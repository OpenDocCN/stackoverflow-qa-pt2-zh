# StackOverflow 问答 15064000-15064999

# javascript - 使用`unwrap`删除jquery中的直接父级

> ID：15064003
> 
> 赞同：0
> 
> 时间：2013-02-25T09:41:36.090
> 
> 标签：javascript, jquery, html, each

我有一个 html 结构，用户可以使用它为 html 模板创建导航或菜单。用户可以拖放并创建菜单和子菜单。当他单击更新时，菜单会随着所做的任何更改而更新。这是动态构建的，并且被引用的html如下

```
<ol class="sortable ui-sortable" id="addMenu">
 <li>
  <div class="droppable ui-droppable">
   <a href="javascript:void(0);">Menu1</a>
  </div>
  <ol>
   <li style="display: list-item;">
     <div class="droppable ui-droppable">
       <a href="javascript:void(0);">Menu2</a>
     </div>
   </li>
  </ol>
 </li>
 <li>
    <div class="droppable ui-droppable">
      <a href="javascript:void(0);">Menu3</a>
    </div>
 </li> 
```

我们想要实现的是，当用户说创建菜单或更新它时，`div`应该`class=droppable`从结构中的每个位置删除 with ，而结构的其余部分保持不变。

我使用`.unwrap()`and`replaceWith()`函数进行了尝试，但似乎没有按预期工作。

```
var menuHtml = $('#addMenu').html();
menuHtml = '<ol id="toRmv">'+menuHtml+'</ol>';

$('#'+IdParent+' .navigationInner').html(menuHtml);
var newHtml = $('#'+IdParent+' .navigationInner').html();

$menuHtml = $("#toRmv div.droppable > a").unwrap();

$('#'+IdParent+' .navigationInner').html($menuHtml); 
```

怎样才能实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:44:28.197

如果你想`div`从锚点周围移除 droppable，那么：

```
$("#addMenu div.droppable > a").unwrap(); 
```

[实例](http://jsbin.com/uzofih/1)| [资源](http://jsbin.com/uzofih/1/edit)

# c# - 字体真棒里面asp按钮

> ID：15064005
> 
> 赞同：43
> 
> 时间：2013-02-25T09:41:44.173
> 
> 标签：c#, asp.net, .net, asp.net-4.0

这是我的 asp:button 代码，它不呈现字体真棒的图标，而是按原样显示 HTML：

```
 <asp:Button runat="server" ID="btnRun" Text="<i class='icon-camera-retro'></i> Search" ValidationGroup="edt" OnClick="btnRun_Click"  CssClass="greenButton"/> 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-25T09:45:22.920

您不能使用默认的 asp.net 按钮，您需要使用 HTML 按钮并为其赋予 runat=server 属性：

```
<button runat="server" id="btnRun" class="btn btn-mini" title="Search">
    <i class="icon-camera-retro"></i> Search
</button> 
```

因此，使用后面的代码添加：

```
onserverclick="functionName" 
```

到按钮，然后在您的 C# 中执行以下操作：

```
protected void functionName(object sender, EventArgs e)
{
    Response.Write("Hello World!!!");
} 
```

所以最终按钮看起来像：

```
<button runat="server" id="btnRun" onserverclick="functionName" class="btn btn-mini" title="Search">
    <i class="icon-camera-retro"></i> Search
</button> 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-10-26T05:44:56.257

您可以使用链接按钮

```
<asp:LinkButton runat="server" ID="btnRun" Text="<i class='icon-camera-retro'></i> Search" 
                ValidationGroup="edt" OnClick="btnRun_Click" CssClass="greenButton" /> 
```

他们确实支持文本字段中的 html。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-14T13:53:22.607

您可以做到这一点，而不是纯粹使用 CSS。您只需将按钮上的 Text 属性设置为 fontawesome 字符的 unicode 值，并为按钮提供 'fa' css 类，以便它占用 fontawesome 字体。

```
<asp:Button ID="Button1" runat="server" 
    Text="\xF135" CssClass="fa" /> 
```

我制作了这个帮助程序库，它提供了所有强类型的图标代码，如果这会让你摇摆不定：

```
<asp:Button ID="Button1" runat="server" 
    Text="<%# FontAwesome.Icons.Rocket %>" CssClass="fa" /> 
```

Nuget：安装包 FontAwesome-ASP.NET

来源：[https ://github.com/kemmis/F​​ontAwesome-ASP.NET](https://github.com/kemmis/FontAwesome-ASP.NET)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-04-24T09:17:47.687

使用链接按钮

```
<asp:LinkButton runat="server" ID="btnRun" ValidationGroup="edt" OnClick="btnRun_Click" CssClass="greenButton" > <i class='icon-camera-retro'></i> Search </asp:LinkButton>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-07T11:05:30.753

您也可以尝试此解决方案 -

```
<span  style="position:relative;">
    <i class="fa fa-hand-o-down"></i>
    <asp:Button ID="btnCatMoveDown" CssClass="movedown" CausesValidation="false" Text="" CommandName="categorymovedown" CommandArgument='<%#Eval("SomeId")%>' runat="server"></asp:Button>
</span>

<style>
    .movedown {
        position:absolute;
        opacity:0;
        top:0;
        left:0;
        width:100%;
        height:100%;
    }
</style> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-09T22:34:49.910

在其他答案中，将 asp:button 更改为其他答案，如果你想使用 asp:button，我会告诉你，EASY :)

```
/*CSS*/
/*Colors depends what btn you use, in this case i´m using btn-default*/

.btn_asp_icon{
    border: 0;
    background-color: #fff;
}

.btn:hover > .btn_asp_icon{
    background-color: #e6e6e6;
}
```

```
<!-- HTML -->

<div class="btn btn-default">

<i class="fa fa-search fa-fw fa-lg" aria-hidden="true"></i>
<asp:Button cssClass="btn_asp_icon" runat="server" text="Consultar"/>   

</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-11T18:48:49.717

在 Nuget 上获得它！

安装包 FontAwesome-ASP.NET 使用

Webforms 按钮中的 FontAwesome 图标

您可以在 asp.net webforms 按钮控件中使用 FontAwesome 图标。只需从 FontAwesome.Icons 类的静态属性中将数据绑定到您选择的图标。然后在您的按钮上调用 DataBind() 或在父控件或页面上调用 DataBind()。

```
<asp:Button ID="Button1" runat="server" 
    Text="<%# FontAwesome.Icons.Rocket %>" CssClass="fa" />
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-24T21:30:18.790

此代码适用于 v5.15

我必须将以下文件添加到 wwwroot 下名为 fonts 的文件夹中

1.  FontAwesome.otf
2.  fontawesome-webfront.eot
3.  fontawesome-webfront.svg
4.  fontawesome-webfront.ttf
5.  fontawesome-webfront.woff
6.  fontawesome-webfront.woff2

```
<div>
    <a asp-controller="Controller" asp-action="CSHTMLFILE"><i class="fa fa-1x fa-arrow-left "></i> Go Back to Previous Page</a>  
</div>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-17T23:15:52.457

把它放在你的**加载表单**方法中：

`btn_Test.Text = "Hello " + FontAwesome.Icons.LongArrowRight;`

和**CssClass**按钮：

`CssClass="fa"`

# dart - Strings.join 在 M3 中删除 - 什么是新语法？

> ID：15064006
> 
> 赞同：7
> 
> 时间：2013-02-25T09:41:50.413
> 
> 标签：dart

下面的代码在 Dart M3 中不再有效，我找不到新语法是什么。

有人可以建议吗？

```
#import('dart:uri');

String encodeMap(Map data) {
  return Strings.join(data.getKeys().map((k) {
    return "${encodeUriComponent(k)}=${encodeUriComponent(data[k])}";
  }), "&");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T09:45:21.053

只需[`.join(separator)`](http://api.dartlang.org/docs/releases/latest/dart_core/Iterable.html#join)使用`Iterable`.

在你的情况下：

```
import 'dart:uri';

String encodeMap(Map data) {
  return data.keys.map((k) {
    return "${encodeUriComponent(k)}=${encodeUriComponent(data[k])}";
  }).join("&");
} 
```

从[重大变化：字符串类即将消失](https://groups.google.com/a/dartlang.org/d/topic/misc/W6ROk6I4yT0/discussion)：

> 核心中的字符串类（注意尾随的“s”）正在消失。
> 如果您使用 Strings.join(stringIterable, separator) 将其替换为 stringIterable.join(separator)。
> 如果您使用 Strings.concatAll(stringIterable) 将其替换为 stringIterable.join()。

# android - 是什么导致 nullpointerexception：由代码引起的？

> ID：15064007
> 
> 赞同：2
> 
> 时间：2013-02-25T09:41:52.530
> 
> 标签：android

我安装了 Acra，所以有时我会从我的应用程序崩溃的设备收到错误日志。我解决了其中的一些问题，但**仍然存在 4 种空指针异常**，我似乎无法跟踪导致它们的原因。是我的代码还是其他什么？似乎无法弄清楚。

这些从未发生在我自己的设备上，但在我通过报告收到的其他设备上......

```
//ERROR 1
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package.game/com.package.game.Answer}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
at android.app.ActivityThread.access$2200(ActivityThread.java:119)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4363)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.package.game.Answer.onCreate(Answer.java:93)
//line 93 = font = Typeface.createFromAsset(getAssets(), "font.ttf");

at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
... 11 more
java.lang.NullPointerException
at com.package.game.Answer.onCreate(Answer.java:93)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
at android.app.ActivityThread.access$2200(ActivityThread.java:119)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4363)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
at dalvik.system.NativeStart.main(Native Method)

// ERROR 2
java.lang.NullPointerException
at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
at com.package.game.Answer.mark(Answer.java:430)
// 430 = Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());

at com.package.game.Answer.onClick(Answer.java:389)
at android.view.View.performClick(View.java:2391)
at android.view.View.onTouchEvent(View.java:4206)
at android.view.View.dispatchTouchEvent(View.java:3736)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:855)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:887)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:887)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:887)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:887)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1662)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1110)
at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1646)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1708)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4363)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
at dalvik.system.NativeStart.main(Native Method)

//ERROR 3
java.lang.NullPointerException
at android.webkit.WebViewCore.didFirstLayout(WebViewCore.java:1617)
at android.webkit.BrowserFrame.nativeStopLoading(Native Method)
at android.webkit.BrowserFrame.stopLoading(BrowserFrame.java:778)
at android.webkit.WebViewCore.stopLoading(WebViewCore.java:1119)
at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:728)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:471)
at java.lang.Thread.run(Thread.java:1060)

//ERROR 4

java.lang.NullPointerException
at com.package.game.CustomArrayAdapter.getView(CustomArrayAdapter.java:75)
//75 = int width = bitmapOrg.getWidth();

at android.widget.AbsListView.obtainView(AbsListView.java:1435)
at android.widget.GridView.makeAndAddView(GridView.java:1222)
at android.widget.GridView.makeRow(GridView.java:268)
at android.widget.GridView.fillDown(GridView.java:221)
at android.widget.GridView.fillFromTop(GridView.java:340)
at android.widget.GridView.layoutChildren(GridView.java:1114)
at android.widget.AbsListView.onLayout(AbsListView.java:1265)
at android.view.View.layout(View.java:7212)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
at android.view.View.layout(View.java:7212)
at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
at android.view.View.layout(View.java:7212)
at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
at android.view.View.layout(View.java:7212)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:45:34.530

尝试初始化字符串变量，然后再次检查代码的值...

```
String xyz=""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:30:58.220

您还应该包括 Answer.java，让我们看看它有什么问题。有时，日志中关于应用程序出错的行的内容是不准确的。错误可能在第 93 行，也可能在第 92 行。请务必发布您的代码。这将有很大帮助。

# java - Neo4J 中的 Gremlin 遍历

> ID：15064015
> 
> 赞同：1
> 
> 时间：2013-02-25T09:42:20.460
> 
> 标签：java, neo4j, traversal, gremlin

在我的数据库中，我可以通过使用看起来像这样的原生 Neo4J 遍历来提取子图：

```
TraversalDescription td = Traversal.description()
.depthFirst()
.relationships(Relation.REL1, Direction.OUTGOING)
.relationships(Relation.REL2, Direction.OUTGOING); 
```

它就像一个魅力。现在我想做两件事中的一件，但我希望后者更容易一些。

1.  我想将遍历存储在 Tinkerpop 蓝图图形对象中。
2.  我想在 Gremlin 中执行相同的查询（通过 java api）并将其存储在相同类型的图形对象中。

当我说将遍历存储为图形对象时，我的实际意思是我希望在遍历期间经过的每个节点（因此不仅是叶节点）存储在这样的图形对象中，然后我希望每个在要创建的新图形对象中同时存在 start 和 endnode 的关系。这包括我没有包含在遍历描述中的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:09:11.480

我想是`g.outE.filter{it.label == "REL1" || it.label == "REL2"}.inV.loop(3)`这样的吗？

# android - 使用自定义布局在 android 中创建 SearchView

> ID：15064019
> 
> 赞同：0
> 
> 时间：2013-02-25T09:42:44.870
> 
> 标签：android, android-custom-view, searchview

我想创建一个这样的视图： ![搜索视图模拟](../Images/671236ed7b47d86f942773e5e90eb3f1.png)

执行 SearchView 很简单，但是如何在操作栏下方创建扩展布局，或者在搜索时为用户提供一些搜索选择。

我想显示一个布局，当用户单击操作栏上的搜索图标时会弹出该布局。布局将具有用户选择的其他搜索条件。

任何提示和示例都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:21:38.310

我建议也许实施 menuItem.setOnActionExpandListener() - 当它展开时，您可以在操作栏下方显示/动画您的其他视图。请参阅 OnActionExpandListener 的文档。

# vb.net - .NET 中是否有内置的泛型类？

> ID：15064027
> 
> 赞同：0
> 
> 时间：2013-02-25T09:43:27.053
> 
> 标签：vb.net, generics

是否有一个类与这个类完全相等？

```
Class X(Of T)
    Public value As T
End Class 
```

请注意，既不`Nullable(Of T)`也不`Tuple(Of T)`等于此类，因为它们不允许您设置成员值。该类应具有以下属性：

1.  当作为参数传递时，被调用方法所做的任何更改都应该影响发送的对象，即它不应该像对固有类型那样创建对象的副本。
2.  应该允许`value`使用语法将成员设置为一个值`x.value = <some value>`，其中 x 是 X 的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:37:17.933

不是一个决定性的答案，但我会试一试。

我个人以前没有见过这种类型的课程。甚至关于泛型的文档也显示了一个与您在示例中创建和使用的类类似的示例类：

[.net 框架中的 msdn 泛型。](http://msdn.microsoft.com/en-us/library/ms172192.aspx)

这是示例：

```
Public Class Generic(Of T)
    Public Field As T

End Class

....

Public Shared Sub Main()
    Dim g As New Generic(Of String)
    g.Field = "A string" 
    '...
    Console.WriteLine("Generic.Field           = ""{0}""", g.Field)
    Console.WriteLine("Generic.Field.GetType() = {0}", g.Field.GetType().FullName)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:44:17.837

我有时会创建这样一个类，几乎是逐字逐句的，尽管我将类`Holder<T>`和字段称为`Value`；这样的类有两个很好的用例：

*   给定 的集合`Holder<someValueType>`，可以方便地对集合的内容进行就地修改。例如，给定一个`List<Holder<Point>>`，可以说`MyList[3].Value.X += 5;`。

*   如果`T`是一种允许原子操作的类型，`Holder<T>`即使该集合不是线程安全的，也可以对集合的内容执行线程安全的原子操作。例如，在我事先知道字典所需的所有键的情况下，我创建了一个`Dictionary<String, Holder<Integer>>`，然后可以使用多个线程`Interlocked.Increment`来计算每个字符串出现的次数。尽管`Dictionary`不是线程安全的，但该程序在没有锁定的情况下是线程安全的，因为`Holder<Integer>`存储在字典中的项目集永远不必更改。

If you want to use a built-in type, there is one that would work: a `T[]` with size one. The main disadvantage of that type is that there's nothing inherent in the type which guarantees that element zero will actually exist (i.e. that it won't be an empty array).

# c# - 将 byte[] 存储在 SQLite 数据库中并从 SQLite 数据库中选择 byte[]

> ID：15064031
> 
> 赞同：0
> 
> 时间：2013-02-25T09:43:35.150
> 
> 标签：c#, visual-studio, sqlite, bytearray

我有一个 SQLiteDatabas，我想将我的 byte[] 存储在一个名为“Data”的字段中，我现在使用的 Datetype 称为：Blob，将 Byte 数组存储在 SQLiteDatabase 中的方法如下所示：

```
public bool InsertMessage()
{
    //create string SQl and fill it with the SQLite query for inserting a message.
    string SQL = "Insert into ClockMessages(InsertDateTime, SendDateTime, Data) Values('"+ insertdatetime + "', null, '" + data + "');";
    List<SQLiteParameter> pars = new List<SQLiteParameter>();
    pars.Add(new SQLiteParameter("InsertDateTime", insertdatetime));
    pars.Add(new SQLiteParameter("Data", data));
    //send the SQl query and it's parameters to the SQLiteDatabase class
    return SQLiteDatabase.ExecuteNonQuery(SQL, pars);
} 
```

我的 SQLiteDatabase 中的字段 Data 字段现在包含以下文本： System.Byte[]

我想将真正的 byte[] 实际存储在数据库中，我该如何实现呢？数据字段是否需要另一个 DateType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:45:39.110

您应该在语句中使用参数：

```
string SQL = "INSERT INTO ClockMessages(InsertDateTime, SendDateTime, Data) VALUES (@InsertDateTime, NULL, @Data)"; 
```

其他一切似乎都是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T10:02:57.490

我会将字节数组转换为 base64string 并将其存储在 nvarchar(max) 字段中

Convert.ToBase64String(byte[])

[http://msdn.microsoft.com/en-us/library/dhx0d524.aspx](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)

并通过 byte[] = Convert.FromBase64String 恢复它

# matlab - 从向量中删除重复值并提示用户输入新值

> ID：15064032
> 
> 赞同：0
> 
> 时间：2013-02-25T09:43:39.903
> 
> 标签：matlab

我有来自用户输入的 6 个元素的向量编号。我想删除任何重复值并将其替换为另一个输入（不使用“唯一”或类似的）。

我试过：

```
myvec=zeros(1,6);
disp('Choose numbers from 1 to 55')
for i=1:6
    myvec(i)=input('');
    if (find(myvec(i)<1 | myvec(i)>55))
        disp('Enter new value')
        myvec(i)=input('');
    end
     if myvec(i+1)==myvec(i)
         myvec(i+1)==input('');
     end
end 
```

问题是：

1) 下面的说法正确吗？

```
if myvec(i+1)==myvec(i)
         myvec(i+1)==input('');
       end 
```

2) 运行时它超出范围，因为向量长度为​​ 6 并且我正在尝试访问 i+1 。我尝试从 2:7 开始使用 for 循环，但随后它在 myvec 向量中添加了零作为第一个元素。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:53:12.763

使用`while`循环怎么样？

```
myvec = NaN(1,6);
ii = 0;
disp('Choose numbers from 1 to 55');
while any( isnan(myvec) )
    tmp = input('');
    if tmp > 1 && tmp < 55 
       % proper input. check for duplicate
       if ( ii == 0 ) || ( ii > 0 && all( myvec(1:ii) ~= tmp ) )
           ii = ii+1;
           myvec(ii) = tmp;
       end
    end
end 
```

一个小小的说明，[在 Matlab](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)[中最好不要使用`i`and`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)作为变量。

# css - 关闭触摸纯 CSS3 的子菜单

> ID：15064033
> 
> 赞同：0
> 
> 时间：2013-02-25T09:43:40.993
> 
> 标签：css, submenu, touchscreen

我只是想知道是否可以通过再次点击它的名称来关闭子菜单？我正在做一个带有几个子菜单的网站水平菜单。On li:hover - 子菜单打开，如果另一个元素被触摸则关闭。但是如何通过点击相同的列表项来关闭相同的菜单？是否可以在纯 CSS3 上执行此操作？...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:59:56.440

您可以（错误）使用带有 CSS 属性的输入（复选框）元素 :checked，例如：

```
.input-list-item + .list-below { display: none; }
.input-list-item:checked + .list-below { display: block; } 
```

支持现代浏览器和（使用正确的文档类型）IE9+

# c# - 如何避免用户选择扩展名不是允许的文件？

> ID：15064036
> 
> 赞同：1
> 
> 时间：2013-02-25T09:43:47.193
> 
> 标签：c#, winforms, openfiledialog

我有一个 OpenFileDialog，它为允许的扩展定义了一个过滤器（仅限于 jpg、png 等图像文件）。问题是我们的用户可以输入*.* 在文件名文本框中，然后这将过滤所有文件。然后我可以毫无问题地选择一个文本文件。除了检查允许扩展的块后面的代码之外，有没有办法让这种情况不发生？这是我创建的可以帮助您理解问题的块，也：

```
if (!(ImageFileExtensions.Split(new char[] { ',' }).Contains(Path.GetExtension(currentFileNamePath).Replace(".", ""))) )
{
    DialogResult respNotAllowedExtension = MdtUserMessage.ShowError(GenericLogCommon.GenericLogDettType.UserWarning, "The extension of the file is not allowed!" , MessageBoxButtons.OK);
    if (respNotAllowedExtension == DialogResult.OK)
        return false;
} 
```

# java - 这个 POST 请求实现有什么问题？

> ID：15064037
> 
> 赞同：21
> 
> 时间：2013-02-25T09:43:51.390
> 
> 标签：java, post, apache-httpcomponents, google-oauth

我一直在使用 java 处理 Google OAuth 2.0，并在实施过程中遇到了一些未知错误。
POST 请求的以下 CURL 可以正常工作：

```
curl -v -k --header "Content-Type: application/x-www-form-urlencoded" --data "code=4%2FnKVGy9V3LfVJF7gRwkuhS3jbte-5.Arzr67Ksf-cSgrKXntQAax0iz1cDegI&client_id=[my_client_id]&client_secret=[my_client_secret]&redirect_uri=[my_redirect_uri]&grant_type=authorization_code" https://accounts.google.com/o/oauth2/token 
```

并产生所需的结果。
但是上面的 POST 请求在 java 中的以下实现会导致一些错误和`"invalid_request"`
检查下面的代码中的响应并指出这里出了什么问题：（使用 Apache http-components）

```
HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
HttpParams params = new BasicHttpParams();
params.setParameter("code", code);
params.setParameter("client_id", client_id);
params.setParameter("client_secret", client_secret);
params.setParameter("redirect_uri", redirect_uri);
params.setParameter("grant_type", grant_type);
post.addHeader("Content-Type", "application/x-www-form-urlencoded");
post.setParams(params);
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(post); 
```

对每个参数都进行了尝试，`URLEncoder.encode( param , "UTF-8")`但这也不起作用。
可能是什么原因？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-25T09:47:52.633

您应该`UrlEncodedFormEntity`在帖子上使用 not setParameter。它也为您处理`Content-Type: application/x-www-form-urlencoded`标题。

```
HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
List <NameValuePair> nvps = new ArrayList <NameValuePair>();
nvps.add(new BasicNameValuePair("code", code));
nvps.add(new BasicNameValuePair("client_id", client_id));
nvps.add(new BasicNameValuePair("client_secret", client_secret));
nvps.add(new BasicNameValuePair("redirect_uri", redirect_uri));
nvps.add(new BasicNameValuePair("grant_type", grant_type));

post.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(post); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-09T16:59:50.673

发送 UrlEncoded 请求的更通用和统一的方法：

```
 @SneakyThrows
  public String postUrlEncoded(String context, Map<String, String> body) {
    List<NameValuePair> nameValuePairs = body.entrySet()
          .stream()
          .map(entry -> new BasicNameValuePair(entry.getKey(), entry.getValue()))
          .collect(Collectors.toList());
    HttpResponse response = Request.Post(baseUrl + context)
          .bodyForm(nameValuePairs)
          .execute().returnResponse();

    return EntityUtils.toString(response.getEntity());
  } 
```

ps：需要流畅的Apache HTTP客户端。Pom 依赖：

```
<dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>fluent-hc</artifactId>
        <version>${fluent-hc.version}</version>
</dependency> 
```

# php - html 到 PHP 中的文本

> ID：15064041
> 
> 赞同：0
> 
> 时间：2013-02-25T09:44:04.957
> 
> 标签：php

我需要将所有 html 标签绕过到文本，我确定有什么方法可以将所有 html 标签绕过到 html 格式的文本，我的示例如下：

例子：

```
<p style="clear: both;"></p> 
```

为了

```
&lt;p style="clear: both;"&gt;&lt;/p&gt; 
```

有什么功能吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:46:45.000

用于`strip_tags`删除 html 标签

```
$str = strip_tags("your string"); 
```

用于显示 html 标签使用`htmlspecialchars`

```
htmlspecialchars("<html>something</html>"); // output <html>something</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:50:58.757

您可能正在搜索[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)：

```
$str = htmlentities('<p style="clear: both;"></p>');
var_dump($str); 
```

或者如果你想反过来做，使用[`html_entity_decode()`](http://www.php.net/manual/en/function.html-entity-decode.php)：

```
$str = html_entity_decode('&lt;p style="clear: both;"&gt;&lt;/p&gt;');
var_dump($str); 
```

# html - Z-index 导致鼠标与视频的交互失败

> ID：15064042
> 
> 赞同：0
> 
> 时间：2013-02-25T09:44:07.073
> 
> 标签：html, css

我正在研究我的作品集（[http://lab.robinandersen.no/](http://lab.robinandersen.no/)），我的问题是我似乎无法按视频播放*（向下滚动到橙色方块）*

我认为原因是因为我在前面使用了一个 div 来保持页脚和页眉浮动在这一切之上。有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:13:44.680

没有包装标签。

如果您将其更改为`div id="wrapper"`并为其添加样式，如下所示：

```
#wrapper {
    width: 100%;
} 
```

然后像这样设置标题：

```
width: 400px;
text-align: center;
position: fixed;
margin: 0 auto; 
```

并`#work`在包装器内移动 div。它应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:11:32.950

我可以按播放按钮，你用的是什么浏览器？

解决方法可能是在视频中添加 z-index，例如

```
#work video {
height: auto;
width: 100%;
margin: -3;
z-index: 99;
} 
```

# ios - 我们可以使用 IOS 企业帐户进行测试，然后使用 IOS 开发人员帐户完成并上传到应用商店吗？

> ID：15064043
> 
> 赞同：4
> 
> 时间：2013-02-25T09:44:15.947
> 
> 标签：ios, iphone, enterprise

我有这个问题。

如果我们有两个 iOS 帐户：

1.  开发者账号
2.  企业账户

我们可以使用 iOS 企业帐户进行测试，然后使用 iOS 开发者帐户完成并上传到应用商店吗？

这可能吗？这合法吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:46:07.183

是的，有可能。

是的，据我了解，这是合法的（只要您不只是将其公开，您应该将其限制在与您的企业有关联或签约的各方）。不过，您应该确保所有企业副本在发布时都被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:46:34.933

这不是合法与否的问题，这是有意义的。使用开发者帐户，您可以将您的应用程序分发到设备并让人们对其进行测试，[尽管有更好的方法。](https://testflightapp.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:52:02.320

是的，您可以使用您的企业帐户进行操作。企业会计 不需要您的测试团队成员设备UDID，因此对您的产品更有利。

当您的测试人员批准后，您可以使用您的分发帐户将其上传到应用商店。

# javascript - 在 Opera 中使用 jQuery 粘贴事件异常

> ID：15064045
> 
> 赞同：1
> 
> 时间：2013-02-25T09:44:17.697
> 
> 标签：javascript, jquery, html, opera, paste

我正在尝试这段代码。它的作用是当有人右键单击第一个文本框时，将焦点转移到第二个文本框，这样如果他`Paste`从上下文菜单中选择选项，文本就会粘贴到第二个文本框中。一个`paste`事件已附加到第二个框以提醒**Foo**。

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){

  $('.foo').contextmenu(function() {
      $('.boo').select();
      return true;
  });
$(".boo").bind("paste",function() { alert("Foo"); });
});
</script>
</head>
<body>
<input type = 'text' class = 'foo' />
<input type = 'text' class = 'boo' />
</body>
</html> 
```

它适用于除 Opera 之外的所有浏览器。当您右键单击并在第一个框中粘贴一些文本时，所有这些浏览器都会弹出警报。在 Opera 中，如果直接在第 2 个框中粘贴一些文本，就可以弹出警告。但是，如果您通过第一个框执行此操作，即在右键单击第一个框时将焦点转移到第二个框，以便剪贴板文本粘贴到第二个框，即使您可以清楚地看到它也不会弹出警报第二个框获得了焦点，文本被粘贴在那里就好了。谁能告诉我是什么问题，以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:31:31.910

正如您在[这个 fiddle](http://jsfiddle.net/RKU92/)中看到的那样，Opera`paste`在被右键单击的元素上触发事件（同时插入焦点移动到的文本）。但是，正如您[在此处](http://jsfiddle.net/RKU92/1/)看到的，该`input`事件会在您预期的元素上触发。

> 谁能告诉我是什么问题，以及如何解决？

您在粘贴操作（两次单击）期间移动选择/焦点，这使用户和浏览器都感到困惑:-)。我不确定如何解决此异常，但您当然不希望仅在通过上下文菜单完成粘贴时才将粘贴移动到另一个输入。

# php - 将字符串写入文件并在 PHP 中强制下载

> ID：15064046
> 
> 赞同：5
> 
> 时间：2013-02-25T09:44:21.783
> 
> 标签：php

我正在研究如何从字符串创建文件的方法，这可能是纯文本将另存为 .txt 和 php 为 .php 等，但我希望能对此有所了解

**我找到了这段代码

```
$file = 'people.txt';
// Open the file to get existing content
$current = file_get_contents($file);
// Append a new person to the file
$current .= "John Smith\n";
// Write the contents back to the file
file_put_contents($file, $current); 
```

但是我需要将 people.txt 保存在我的服务器上吗？

**强制下载部分**

```
header("Content-Disposition: attachment; filename=\"" . basename($File) . "\"");
header("Content-Type: application/force-download");
header("Content-Length: " . filesize($File));
header("Connection: close"); 
```

我需要在哪里存放上述内容，我假设代码是正确的，可以强制下载我的现成文件？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-25T09:56:37.827

您无需将字符串写入文件即可将其发送到浏览器。请参阅以下示例，它将提示您的 UA 尝试下载包含 $str 值的名为“sample.txt”的文件：

```
<?php

$str = "Some pseudo-random
text spanning
multiple lines";

header('Content-Disposition: attachment; filename="sample.txt"');
header('Content-Type: text/plain'); # Don't use application/force-download - it's not a real MIME type, and the Content-Disposition header is sufficient
header('Content-Length: ' . strlen($str));
header('Connection: close');

echo $str; 
```

# java - 会话未在 https 和 http 之间得到维护

> ID：15064049
> 
> 赞同：2
> 
> 时间：2013-02-25T09:44:25.973
> 
> 标签：java, jsp, session, servlets

在我的*JSP/servlet*应用程序中，一些页面位于 https 中，而其他页面仅位于 http 中。登录页面在 https 中，我注意到当我登录并重定向到 http 页面时，会话没有被维护。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:16:38.647

你不应该从 HTTPS 转移到 HTTP，因为你会失去[机密性](http://en.wikipedia.org/wiki/HTTP_Secure)

如果您仍然希望这样做，您可以手动将会话 ID 从登录 (HTTPS) 传递到重定向页面 (HTTP)。

SSL 会话 ID（属性名称 - `javax.servlet.request.ssl_session_id`）不应被泄露，因此它不会被转移到 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:13:25.543

那是因为您指向的重定向 url 没有[jsessionid](http://en.wikipedia.org/wiki/Session_ID)。

尝试这个

```
response.sendRedirect(response.encodeRedirectURL(contextPath + "/myServlet")); 
```

但请注意，由于您在 url 中公开 sessionid，因此您将 webapp 公开为 [Session Fixation Attack](http://en.wikipedia.org/wiki/Session_fixation)

# ios - ios中文本字段中的十进制格式

> ID：15064058
> 
> 赞同：-2
> 
> 时间：2013-02-25T09:44:49.960
> 
> 标签：ios, xcode

我有占位符 00.00 的文本字段。我想以这种格式输入数字。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:48:56.057

将键盘类型设为数字。并在内部使用下面的代码来获得双倍价值

```
 NSString *value =textfield_name.text;
      double doubleValue = [value doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:59:42.727

试试这个方法：

让您的班级成为 的代表`yourTextField`，并添加[此处](https://stackoverflow.com/questions/9344159/validate-numeric-input-to-uitextfield-as-the-user-enters-input)使用的代码。

```
NSString *enteredValue=@"99.129";//get your value from textfield as yourField.text
double doubleValue=[enteredValue doubleValue];
NSString *formattedDoubleValue=[NSString stringWithFormat:@"%.2f",doubleValue];
NSLog(@"->%@",formattedDoubleValue);//now you can set back to the textfield as yourField.text=formattedDoubleValue 
```

或者，您可以为此使用 NSNumberFormatter。

```
NSNumberFormatter *numFormatter=[NSNumberFormatter new];
[numFormatter setFormat:@"00.00"];
NSString *str=[numFormatter stringFromNumber:@99.129];
NSLog(@"->%@",str); 
```

* * *

**编辑：**根据您的评论

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    if (textField == self.yourTextField){
        NSLog(@"here");
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

        NSString *expression = @"^([0-9]{1,2})(\\.([0-9]{1,2})?)?$";

        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression
                                                                               options:NSRegularExpressionCaseInsensitive
                                                                                 error:nil];
        NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                            options:0
                                                              range:NSMakeRange(0, [newString length])];
        if (numberOfMatches==0){
            return NO;
        }
    }

    return YES;
} 
```

# css - CSS3 Opera12 Web 浏览器中选取框的替代方案

> ID：15064060
> 
> 赞同：0
> 
> 时间：2013-02-25T09:44:58.970
> 
> 标签：css, overflow, opera, marquee

我有一个要求，其中需要在文本区域内对齐冗长的文本。我试过“文本溢出：省略号；”
但是，现在我想添加一个选框效果，以便用户可以完全阅读文本。

查看 Opera 文档时，似乎尚不支持溢出属性和选取框等。

所以有人对我的问题有任何替代解决方案吗？

# jsf - 使用 tomahawk 和 jsf 切换选项卡会导致整个页面刷新并再次加载所有数据

> ID：15064069
> 
> 赞同：0
> 
> 时间：2013-02-25T09:45:36.260
> 
> 标签：jsf, tomahawk

我正在使用“panelTabbedPane”并创建了 3 个具有不同处理元素的选项卡。完成第一个选项卡上的详细信息，切换到第二个和第三个工作得很好。但是一旦我决定从第三个选项卡切换到第一个或第二个选项卡，整个页面刷新和所有数据的加载都会再次发生。它对性能的影响很大。谁能帮我？

```
 <t:panelTabbedPane enabledOnUserRole="true"
                binding="#{ABCController.tabSet}" serverSideTabSwitch="true"
                styleClass="tabbedPane" activeTabStyleClass="activeTab"
                inactiveTabStyleClass="inactiveTab"
                disabledTabStyleClass="disabledTab" activeSubStyleClass="activeSub"
                tabContentStyleClass="tabContent"
                immediateTabChange="false">

                <t:panelTab id="panelTab1" disabled="#{abc.disableTabOne}"
                    label="#{abc.tab1LabelTxt}">
                    <jsp:include page="./test1.jsp"></jsp:include>
                </t:panelTab>

                <t:panelTab id="panelTab2"  disabled="#{abc.disableTabTwo}"
                    label="#{abc.tab2LabelTxt}">
                    <jsp:include page="./test2.jsp"></jsp:include>
                </t:panelTab>

                <t:panelTab id="panelTab3" disabled="#{abc.disableTabThree}"
                    label="#{abc.tab3LabelTxt}" >
                    <h:outputText rendered="#{!abc.downloadView}">
                       <jsp:include page="./test3.jsp"></jsp:include>
                    </h:outputText>
                    <h:outputText rendered="#{abcn.downloadView}">
                        <jsp:include page="./test4.jsp" />
                    </h:outputText>
                </t:panelTab>

                <t:tabChangeListener
                    type="org.portlets.controller.ABCController" />
            </t:panelTabbedPane> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:30:44.737

从[文档](https://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_panelTabbedPane.html)中：

> 立即选项卡更改
> 
> 定义是否应该在选项卡之间切换之前执行流程验证和更新模型阶段，当 serverSideTabSwitch = true 时（如果为 false，则通过其他方式进行切换，因此该属性没有任何影响）。请注意，如果此属性设置为 false，则如果表单内的所有输入字段都有效（包括此面板外的输入组件），则仅进行选项卡更改。默认情况下为 true，因此两个阶段都不会执行。

既然你有`serverSideTabSwitch=true`，标签更改是由你观察到的请求/响应周期完成的。然而，通过设置`immediateTabChange=false`，这仅在您访问所有可用选项卡后才会发生。尝试设置`serverSideTabSwitch=false`（但不知道最终会在什么情况下提交tab数据，我自己没试过）。

# asp.net - 这个错误是什么意思'使用'RaiseEvent'语句来引发事件。源文件'

> ID：15064073
> 
> 赞同：1
> 
> 时间：2013-02-25T09:45:44.763
> 
> 标签：asp.net, vb.net, event-handling

我收到了这个错误：

```
Exception Description : E:\sites\EPER EN\Admin\DB\DataFilter.ascx.vb(144): error BC32022: 'Public Event Click(sender As Object, e As System.EventArgs)' is an event, 
and cannot be called directly. Use a 'RaiseEvent' statement to raise an event.  Source File :   Line : 0 
```

在以下 vb.net 代码中：

```
submitFilterButton.Click += New EventHandler(AddressOf submitFilterButtonHandler_Click) 
```

这个错误是什么意思 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:56:55.350

如果要以编程方式注册事件处理程序，则必须使用[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.110%29.aspx)：：

```
AddHandler submitFilterButton.Click, AddressOf submitFilterButtonHandler_Click 
```

您也可以在 aspx 标记上以声明方式添加它（处理程序必须是受保护的/公共的）

```
OnClick="submitFilterButtonHandler_Click" 
```

或在代码隐藏中通过`Handles`子句（可以是私有的）

```
Private Sub submitFilterButtonHandler_Click(sender As System.Object, e As System.EventArgs) Handles submitFilterButton.Click 
```

[**如何：在 ASP.NET 网页中创建事件处理程序**](http://msdn.microsoft.com/en-us/library/6w2tb12s%28v=vs.100%29.aspx)

# c - 对于这个简单的程序，词法分析后的输出是什么？

> ID：15064074
> 
> 赞同：2
> 
> 时间：2013-02-25T09:45:47.480
> 
> 标签：c, compiler-construction, lexical-analysis

对于像这样的简单`C`程序：

```
#include<stdio.h>
int main(){
   int first,second,sum;
   first = 10;
   second = 20;
   sum = first + second;
   printf("%d\n",sum);
} 
```

编译器的第一阶段*词法分析*之后的输出是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:48:38.987

词法分析产生一个*标记*流。现在忽略预处理器，输出将类似于

```
KEYWORD int
IDENTIFIER main
LPAREN
RPAREN
LBRACE
KEYWORD int
IDENTIFIER first
COMMA
... 
```

显然，实际输出取决于您的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:16:24.140

没有输出。第一阶段可能是词法分析，但这并不意味着它是一个完全不同的过程，其输出形成下一阶段的输入。解析器通过函数调用调用词法分析器。

# mysql - 跨多个表保留插入顺序

> ID：15064076
> 
> 赞同：2
> 
> 时间：2013-02-25T09:45:54.530
> 
> 标签：mysql, sql

我有一些归档日志文件，我想将它们导入 MySQL 数据库，用于归档和查询功能。

这些日志文件中的每一行都代表一种特定类型的事件。为了说明这一点，这里有一个示例，每一行都是不同的事件类型：

```
2013-01-15 03:30:08 - Failed login attempt for user 'helloworld' by 1.2.3.4
2013-01-15 03:30:08 - User 'helloworld' successfully logged in from 1.2.3.4
2013-01-15 03:30:08 - User 'helloworld' issued command 'randomcommand' 
```

请注意时间戳，因为这与问题相关。

我最初的想法是为每个事件创建一个表 - `failed_logins`、`successful_logins`、`commands`等。

这种方法的问题是，当多个事件在同一秒内发生时（时间戳只有秒级精度），因为它们位于不同的表中，我无法知道它们发生的实际顺序。

我的下一个想法是使用一个表，主键保留顺序，但这很快就会与所有事件类型失控。（还有更多。）

```
CREATE TABLE log_lines (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    type INT, // 1 = failed_login, 2 = command, ...
    failed_logins_user VARCHAR(32),
    failed_logins_ip VARCHAR(15),
    commands_user VARCHAR(32),
    commands_command VARCHAR(128)
); 
```

我觉得有更好的方法来实现这一点。

总而言之，我的目标是让数据可查询，同时保留每个事件在日志文件中发生的顺序。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:32:15.187

一种可能的解决方案：每行使用两个表：一个存储所有事件共有的列，如序列号（一`AUTO_INCREMENT`列）和时间戳，一个特定于事件以提供其他详细信息。您可以先插入到公用表中，然后将那里生成的 ID 用作其他表中的唯一外键。

但也请记住，`NULL`值通常只占用一位数据，因此具有许多仅用于某些事件类型的列的单个表可能是更好的解决方案。这取决于您的查询：如果您通常按顺序查询所有类型的事件，则单个表会更好，而提取给定类型的特定事件可能更适合使用不同的表。

> ```
> type INT, // 1 = failed_login, 2 = command, ... 
> ```

`enum`对于这种列，您可能会更好。

# jquery - 带有 scrollLeft 的元素的滚动速度比文档的其余部分快

> ID：15064078
> 
> 赞同：5
> 
> 时间：2013-02-25T09:46:02.980
> 
> 标签：jquery, html, parallax

我有一个具有固定位置的元素，但能够使用我[在 JsFiddle 上的这个示例中使用的 jQuery 计算来左右滚动。](http://jsfiddle.net/F7Bme/)

```
$(window).scroll(function(event) {
var x = 0 - $(this).scrollLeft();
var y = $(this).scrollTop();

// whether that's below the form
if (y >= top) {
    // if so, ad the fixed class
    $('.scroll_fixed').addClass('fixed');
} else {
    // otherwise remove it
    $('.scroll_fixed').removeClass('fixed');
}

$(".scroll_fixed").offset({
    left: x + leftInit
});

}); 
```

该解决方案运行良好，直到我必须向左滚动，其中滚动的元素与文档的其余部分产生“视差” - 即，它的滚动速度大约是文档其余部分的两倍。

我知道这是 jQuery 计算的问题，但想知道以前是否有人遇到过这个问题？如果是这样，你是如何解决的？我有点不知所措......

**编辑**

问题已解决 - 这是因为代码使用了 $(window).scrollLeft(); 而不是我希望操作的元素范围内的父元素。

包装器 div 被归类为“wrapperDiv”，所以我使用了 $(".wrapperDiv").scrollLeft();

我会将这个问题标记为已问，但由于我是 Stack Overflow 的新手，我无法再回答 7 个小时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T11:10:14.637

只是将此问题标记为已回答：

“这是因为代码在`$(window).scrollLeft();`我希望操作的元素范围内使用而不是父元素。包装器 div 被归类为“wrapperDiv”，所以我使用了`$(".wrapperDiv").scrollLeft();`“

# joomla - JOOMLA 1.5 无法连接到管理员

> ID：15064080
> 
> 赞同：1
> 
> 时间：2013-02-25T09:46:04.040
> 
> 标签：joomla, joomla2.5, joomla1.5

我只是接管了一个协会的网站，该协会的网站有很多问题。这是基于 Joomla 1.5，我的目标是将站点迁移到 2.5。我遇到的第一个问题是对管理区域的级别访问，我告诉我的登录名/密码，验证后我进入登录页面，没有任何错误消息。我以为我在这里[http://www.joomlaspan.com/general/recover-super-administrator-status-of-joomla-10x-and-15x.php](http://www.joomlaspan.com/general/recover-super-administrator-status-of-joomla-10x-and-15x.php)找到了初步回应，但我实际上仍然有同样的担忧。而且我真的不明白问题在哪里，我确定我的用户名。有人可能知道这个问题的根源？

![模块目录的内容](../Images/644618844a6524d3470bbd2c1c030d74.png) ![插件目录的内容](../Images/92870e2e717a0755d8bd8286d6e5d2da.png)

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:30:20.373

我唯一能想到的，尝试清理浏览器cookies。（这为我修复过一次），看看是否只有一些IP可以访问htaccess文件上的目录，最后从头开始，joomla 1.5.X真的坏的！:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:42:18.970

鉴于您已经接管了该网站，我假设您也可以完全访问主机控制面板。如果没有，请接受它，否则在不访问所有内容的情况下能够运行网站没有多大意义。

如果你有它，然后去 PHPMyAdmin，然后去`#__users`表并确保你的用户具有正确的权限并且属于正确的用户组。如果不需要进行任何更改，那么我建议创建一个子域，安装 Joomla 的新副本，打开您的用户名行并将所有详细信息从新站点复制到旧站点。

# database - 用于节省美元的 Oracle 字段

> ID：15064081
> 
> 赞同：0
> 
> 时间：2013-02-25T09:46:05.227
> 
> 标签：database, oracle10g

我必须将美元保存到我应该使用哪种数据类型的表中。我知道 Number 数据类型，但我想存储我`25,0000`应该使用哪种数据类型`number or varchar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:36:53.920

这样做是一个糟糕的选择（因为最终有人会将损坏的字符串保存到该列并破坏您的代码）。

如果需要，我会将表格作为 a`number`并在其顶部有一个视图，将 $ 连接到数字（`select '$'||your_col, ...`）。如果您需要多种货币，那么最好使用包含货币代码的货币列，例如`USD`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:44:13.600

使用数字，然后使用 TO_CHAR 和正确的格式掩码（取决于 NLS）

```
create table curr_test (col number);
insert into curr_test (col) values (15.25);
select to_char(col, 'L00D00') from curr_test; 
```

链接：[http ://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#NLSPG221](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#NLSPG221)

# iphone - 导航栏上的自定义 UIBarButtonItem

> ID：15064087
> 
> 赞同：0
> 
> 时间：2013-02-25T09:46:20.520
> 
> 标签：iphone, ios, uibutton, custom-controls

我想要导航栏上的两个自定义`UIBarButtonItem`..这`UiBarButtonItem`实际上应该是导航栏上两个`UIBarButtonItem`的组合.. 这些按钮应该像`UISegmentControl`..if一样相互组合，`UISegmentControl`因为我需要上一个和下一个按钮。

那么是否可以组合或自定义两个类似的按钮，例如`UISegmentControl`.

[像这样的图像](http://i.imgur.com/BBbaRM3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:01:23.517

```
CGRect frame = CGRectMake(0.0, self.view.bounds.size.height, self.view.bounds.size.width, 44.0);
fieldAccessoryView = [[UIToolbar alloc] initWithFrame:frame];
fieldAccessoryView.barStyle = UIBarStyleBlackOpaque;
fieldAccessoryView.tag = 200;

[fieldAccessoryView setBarStyle:UIBarStyleBlack];

UIBarButtonItem *spaceButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone  target:self action:@selector(done:)];

UISegmentedControl* segmentedControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:NSLocalizedString(@"Previous", @""), NSLocalizedString(@"Next", @""), nil]];
[segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
[segmentedControl setMomentary:YES];
UIBarButtonItem *segmentButton = [[UIBarButtonItem alloc] initWithCustomView:segmentedControl];

[fieldAccessoryView setItems:[NSArray arrayWithObjects:segmentButton, spaceButton, doneButton, nil] animated:NO];
[segmentButton release];
[spaceButton release];
[doneButton release];
[segmentedControl release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:55:47.303

```
I hope this help you..

UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:
                                        [NSArray arrayWithObjects:
[NSString stringWithString:@"First"],
[NSString stringWithString:@"Second"],
nil]];

//just customize this

[segmentControl setImage:[UIImage imageNamed:@"YOUR_IMAGE1.png"] forSegmentAtIndex:0];
[segmentControl setImage:[UIImage imageNamed:@"YOUR_IMAGE2.png"] forSegmentAtIndex:1];

[segmentedControl setFrame:[self.navigationController.toolbar bounds]];

[self.navigationController.toolbar addSubview:segmentedControl];
[segmentedControl release]; 
```

这是我的粗略想法..如果您发现实施它有任何困难..让我知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:58:19.233

以下代码描述了如何添加`UIBarButtonItem`.`UINavigationBar`

**`UIBarButtonItem`在你的**情况下添加**`UIBarButtonSystemItemFlexibleSpace`看起来像`UISegmentControl.`**

 **```
UIToolbar *Toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [Toolbar sizeToFit];

     NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(Cancel)];
    [barItems addObject:btnCancel];

    UIBarButtonItem *btnDone = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(done)];
    [barItems addObject:btnDone];

    [Toolbar setItems:barItems animated:YES];

UIBarButtonItem *twoButtons = [[UIBarButtonItem alloc] initWithCustomView:Toolbar];
self.navigationItem.rightBarButtonItem = twoButtons; 
```

// UIBarButtonItem 的方法

```
-(void)Cancel
{
  // Write Code for Cancel Method
}

-(void)done
{
  // Write Code for Done Method
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:03:34.037

试试这个代码我在一段时间之前从一些答案中得到了这个代码，我编辑它并在我的应用程序中使用它......试试这个..

```
NSArray *segItemsArray = [NSArray arrayWithObjects: @"One", @"Two", @"Three", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:segItemsArray];
segmentedControl.frame = CGRectMake(0, 0, 200, 30);
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
segmentedControl.selectedSegmentIndex = 0;// set your default selected button(view)

UIBarButtonItem *segmentedControlButtonItem = [[UIBarButtonItem alloc] initWithCustomView:(UIView *)segmentedControl];

UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

NSArray *barArray = [NSArray arrayWithObjects: flexibleSpace, segmentedControlButtonItem, flexibleSpace, nil];

[self setToolbarItems:barArray];
[self.navigationController setToolbarHidden:NO animated:YES]; 
```

我希望这对你有帮助....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T10:25:24.450

**我希望这对你有帮助..**

```
UISegmentedControl *tabNavigation = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Previous", @"Next", nil]];
tabNavigation.segmentedControlStyle = UISegmentedControlStyleBar;
[tabNavigation setEnabled:YES forSegmentAtIndex:0];
[tabNavigation setEnabled:YES forSegmentAtIndex:1];
tabNavigation.momentary = YES;
[tabNavigation addTarget:self action:@selector(segmentedControlHandler:) forControlEvents:UIControlEventValueChanged];
UIBarButtonItem *barSegment = [[UIBarButtonItem alloc] initWithCustomView:tabNavigation];
UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

 keyboardDoneButtonView = [[UIToolbar alloc] init ];//WithFrame:CGRectMake(0, 480, 320, 44)];

 keyboardDoneButtonView.barStyle = UIBarStyleBlackTranslucent;
 keyboardDoneButtonView.translucent = YES;
 [keyboardDoneButtonView setFrame:CGRectMake(0, 480, 320, 44)];
 [keyboardDoneButtonView sizeToFit];
 [keyboardDoneButtonView setItems:[NSArray arrayWithObjects:barSegment,flexSpace,doneButton, nil]]; 
```

**示例文本：**

```
 self.txtGivenName.inputAccessoryView=keyboardDoneButtonView;
 self.txtLastName.inputAccessoryView=keyboardDoneButtonView;

- (void)segmentedControlHandler:(id)sender
 {
if (sender){
    switch ([(UISegmentedControl *)sender selectedSegmentIndex]) {
        case 0:
        {
            [self previousClicked]; 
            break;
        }
        case 1:
        {
            [self nextClicked];
            break;
        }
        default:
            break;
    }
} 
```

}

```
 -(void)previousClicked{
UIResponder* nextResponder = [sclView viewWithTag:selected-1];
if (nextResponder)
    {
    [nextResponder becomeFirstResponder];
    } 
```

}

```
 -(void)nextClicked{
UIResponder* nextResponder = [sclView viewWithTag:selected+1];
if (nextResponder)
    {
    [nextResponder becomeFirstResponder];
    } 
```

}**

# php - PHP 显示数据库中的记录

> ID：15064088
> 
> 赞同：0
> 
> 时间：2013-02-25T09:46:20.677
> 
> 标签：php, mysql, database

我正在尝试显示存储在我的数据库中的记录，这是我在 PHP 上的代码：

```
<?php
include("includes/connect.php");
$user_id = $_GET['user_id'];
$recipe_id = $_GET['recipe_id'];

$sql_check = "select * from user_favorites where user_id = '$user_id' and recipe_id = '$recipe_id'";
$query_check = mysql_query($sql_check);

$result_array = array();
while ($row = mysql_fetch_assoc($query_check)) {
$user_id = $row["user_id"];
$recipe_id = $row["recipe_id"];

$result_array[]= array("user_id"=> $user_id, "recipe_id"=> $recipe_id);
$json_encoded = json_encode($result_array);
echo "addToCallback(". $json_encoded.")";
}
?> 
```

输出：addToCallback([{"user_id":"0","re​​cipe_id":"0"}])

在我的数据库表上，我已经有一个存储记录，但为什么它只显示 0？我的桌子上没有“0”输入。我的代码有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:54:25.930

您的代码有 3 个问题：

1.  您没有正确格式化查询部分
2.  您没有检查可能的错误
3.  很可能您编码错误的数组

第 2 项是必不可少的。您**总是**需要被告知**所有**发生的错误 - 这样您就可以采取适当的措施并解决问题。
没有错误信息，你就是瞎子和聋子。

所以，这里有一个改进的版本。
它将返回编码数据或 mysql 错误（如果您打开了 display_errors。否则错误将记录在 web-servers error_log 中）。
如果既没有数据也没有错误消息 - 您的查询没有返回任何行。

```
<?php
error_reporting(E_ALL);
include("includes/connect.php");
$user_id   = mysql_real_escape_string($_GET['user_id']);
$recipe_id = mysql_real_escape_string($_GET['recipe_id']);

$sql = "select * from user_favorites where user_id = '$user_id' and recipe_id = '$recipe_id'";
$res = mysql_query($sql) or trigger_error(mysql_error()."[$sql]");

$data = array();
while ($row = mysql_fetch_assoc($res)) {
    $data[] = $row;
}
$json_encoded = json_encode($result_array);
echo "addToCallback(". $json_encoded.")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:54:41.703

1.  确保您获得所有 GET 值

2.  改变 ：

`$sql_check = "select * from user_favorites where user_id = '$user_id' and recipe_id = '$recipe_id'";`

至 ：

`$sql_check = "select * from user_favorites where user_id = '".mysql_real_escape_string($user_id)."' and recipe_id = '".mysql_real_escape_string($recipe_id)."'";`

`echo $sql_check`并在 phpmyadmin 中运行并查看输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:08:38.363

我刚刚测试了您的代码并拨打了现有电话

test.php?user_id=1&recipe_id=5

addToCallback([{"user_id":"1","re​​cipe_id":"5"}])

不存在的电话没有给我任何回报：]

# java - 在同一 URL 上部署具有 SOAP11 和 SOAP12 绑定的 Metro Web 服务？

> ID：15064095
> 
> 赞同：1
> 
> 时间：2013-02-25T09:46:57.917
> 
> 标签：java, jax-ws, java-metro-framework

我有一个旧的 Web 服务，我正试图从 Axis2 迁移到 Glassfish/Metro，但我偶然发现了一个问题：

有一个 WSDL 文件，其中一个`wsdl:service`元素包含对两个`wsdl:port`元素的引用，一个用于 SOAP11，一个用于 SOAP12。

特别是，WSDL 的那部分看起来像这样：

```
<wsdl:service name="WebServiceInterface">
    <wsdl:port name="WebServiceSOAP11port"
        binding="ns:WebServiceSOAP11Binding">
        <soap:address
            location="http://localhost:8081/axis2/services/WebService" />
    </wsdl:port>
    <wsdl:port name="WebServiceSOAP12port"
        binding="ns:WebServiceSOAP12Binding">
        <soap12:address
            location="http://localhost:8081/axis2/services/WebService" />
    </wsdl:port>
</wsdl:service> 
```

尝试将类设置为端点，我有以下内容：

```
@WebService(name = "WebServicePortType", targetNamespace = "http://abc/", portName="WebServiceSOAP11port", endpointInterface = "abc.WebServicePortType", serviceName = "WebServiceInterface", wsdlLocation = "WebService.wsdl")
@BindingType(SOAPBinding.SOAP11HTTP_BINDING)
public class WebServiceSoap11Impl extends WebServiceBase implements WebServicePortType {
    // Superclass handles actual method calls - this is just here for binding to Soap 1.1.
} 
```

```
@WebService(name = "WebServicePortType", targetNamespace = "http://abc/", portName="WebServiceSOAP12port", endpointInterface = "abc.WebServicePortType", serviceName = "WebServiceInterface", wsdlLocation = "WebService.wsdl")
@BindingType(SOAPBinding.SOAP12HTTP_BINDING)
public class WebServiceSoap12Impl extends WebServiceBase implements WebServicePortType  {
    // Superclass handles actual method calls - this is just here for binding to Soap 1.2.
} 
```

现在，这适用于 SOAP11 绑定，但如果我尝试通过 soapUI 使用 SOAP12 绑定，我会收到以下错误：

```
[#|2013-02-25T22:31:25.299+1300|SEVERE|glassfish3.1.2|com.sun.xml.ws.transport.http.HttpAdapter|_ThreadID=227;_ThreadName=http-thread-pool-8782(5);|Unsupported Content-Type: application/soap+xml;charset=UTF-8;action="urn:heartBeat" Supported ones are: [text/xml]
com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type: application/soap+xml;charset=UTF-8;action="urn:heartBeat" Supported ones are: [text/xml]
    at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:315)
    at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:149)
    at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:361)
    at com.sun.xml.ws.transport.http.HttpAdapter.decodePacket(HttpAdapter.java:343)
    at com.sun.xml.ws.transport.http.HttpAdapter.access$400(HttpAdapter.java:99)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:623)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:163)
    at org.glassfish.webservices.JAXWSServlet.doPost(JAXWSServlet.java:145) 
```

显然，这`Content-Type`对于 SOAP12 是正确的，但由于某种原因，Metro 没有意识到我有两个用于同一个端点的类 - 1 绑定到 SOAP11，1 绑定到 SOAP12。Axis2 似乎确实能够处理该用例。地铁支持吗？或者我必须为 SOAP11 和 12 提供单独的端点吗？还是我应该放弃对其中之一的支持？

我在带有 Java 1.7.0_4 的 Ubuntu 10.04 上运行 Glassfish 3.1.2.2

# javascript - 自动完成没有真正的价值

> ID：15064098
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:11.663
> 
> 标签：javascript, jquery, autocomplete

它不采用来自列表的值（带有自动完成功能），它只采用我写入文本框中的值。如果有人给我任何技巧，我会很高兴。

提前致谢，

![在此处输入图像描述](../Images/29750862c61ca544fba80244c52bf340.png)

```
$(function () {
    var availableTags = [
    "Mustafa Basyurt",
    "Hakan Öz",
    "Ahmet Taşkın",
    "Burhan Top"
    ];

    $("#<%=txtMembers.ClientID%>").autocomplete({
        source: availableTags,
        messages: {
            noResults: '',
            results: function () { }
        },
        select: function () {

            $("#members").append("<span class='button blue' id='" + ItemNo + "' style='font-size: 16px; margin-left:0px'>" + $("#<%=txtMembers.ClientID%>").val() + "<a onclick='RemoveItem(this);'><img src='../../Style/images/icons/close.png' style='vertical-align:central; margin-top:2px' /></a> </span> ");

        }

    });

}); 
```

HTML：

```
<asp:TextBox ID="txtMembers" runat="server" Width="90%" BackColor="LightBlue" Height="20px"></asp:TextBox>

<div id="members"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:16:52.073

见[http://api.jqueryui.com/autocomplete/#event-select](http://api.jqueryui.com/autocomplete/#event-select)

您的选择处理程序应该类似于（假设 ItemNo 具有某些值）：

```
select: function (event,ui) {
            $("#members").append("<span class='button blue' id='" + ItemNo + "' style='font-size: 16px; margin-left:0px'>" + ui.item.value + "<a onclick='RemoveItem(this);'><img src='../../Style/images/icons/close.png' style='vertical-align:central; margin-top:2px' /></a> </span> ");   

        } 
```

# html - Internet Explorer 与其他浏览器在按钮和输入字段上的区别，表单中提交的内容是什么？

> ID：15064099
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:13.387
> 
> 标签：html, internet-explorer, standards, spring-webflow

想问一下，为什么下例中的IE浏览器在按下提交按钮时，会提交参数列表中的按钮类型按钮？虽然 Firefox 没有。

```
<!DOCTYPE html>
<html>
<head>
<title>Button test page</title>
</head>
<body>
<form name="myform" action="/whatever" method="GET">
<div align="center">
<br><br>
<input type="hidden" value="hey" name="hidden_greeting">
<button type="button" size="35" value="lolie" name="btb">button_type_button</button>
<button type="submit" value="sb" name="ssb">submit</button>
<br><br>
</div>
</form>
</body>
</html> 
```

这是使用 IE 时提交的内容， ?hidden_​​greeting=hey&btb=button_type_button&ssb=submit 这是使用 Firefox 时提交的内容 ?hidden_​​greeting=hey&ssb=sb

为什么是这样？这会导致 Spring Webflow 出现问题，因为它只检查 eventIds 的名称，然后执行错误的操作，因为 IE 浏览器在参数列表中提交了按钮名称类型的按钮及其 innerHTML 作为值，即使提交类型的按钮只是按下。

在这些情况下，这里有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T06:58:58.623

使用 Spring Form Tags 应该可以解决您的问题。

[http://static.springsource.org/spring/docs/2.0.8/reference/spring-form.tld.html](http://static.springsource.org/spring/docs/2.0.8/reference/spring-form.tld.html)

# c - C从目标文件位置读取路径目录

> ID：15064101
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:15.460
> 
> 标签：c, fread

我有一个项目，我想读取一个包含特定文件夹中数据的文件。我有一个脚本文件来执行程序，这个脚本文件可以位于计算机上的任何位置，因此我不能在程序中使用函数 getcwd 来获取我的数据文件的路径。我的问题是，C 中是否有可能从目标文件所在的位置获取路径。即不是从哪里运行脚本？

示例：启动脚本目录：/home/user/my_files/scripts/start_script.sh 主程序目录：/home/user/project/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:52:47.317

在脚本中，您可以执行`cd <specific dir>`然后使用绝对路径启动二进制文件。

```
cd <specific dir>
/home/user/project/main 
```

那么在`main`你很好可以做一个`getcwd()`已经`<specific dir>`返回`main`。

* * *

不，没有便携式方法可以`main`从`main`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:21:10.757

@Matthias 给出了一个问题的链接，其中很好地讨论了查找可执行位置的各种方法。

我可以再加一个。

安装程序时，您可以将路径直接嵌入到可执行文件中。

例如，在程序中，您可以定义一个数组，如下所示：

```
char ExecutablePath[16 + 1024] = "&Unique#!%Stuff~"; 
```

其中前 16 个字符形成一个唯一序列，不会出现在程序的其他任何地方，最后 1024 个字符包含路径，最初是未知的。

在安装过程中，您在可执行文件中查找此唯一字符序列，一旦找到，您就将路径写入文件中。

如果操作系统对其进行验证，您可能需要调整文件的校验和（Windows 似乎并不关心）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:20:49.143

如果我错了，请纠正我，看起来你可以使用`argv[0]`.

```
int main(int argc, char** argv)
{
     printf("Name of executable: %s\n", argv[0]);

     /* extract everything before first '/' from argv[0] */
     char buffer[SomeLargeNumber];

     char* ptr = argv[0] + strlen(argv[0]) - 1;

     while(*ptr != '/' && ptr != argv[0]) { ptr--; }

     int len = ptr - argv[0];

     memcpy(buffer, argv[0], len);
     buffer[len] = '/';
     buffer[len + 1] = 0;

     return printf("Directory: %s\n", buffer);
} 
```

# twitter-bootstrap - 使用 AngularUI 引导集成是个好主意吗？

> ID：15064102
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:15.663
> 
> 标签：twitter-bootstrap, angularjs, angular-ui

我想用 twitters bootstrap 开始一个小测试项目。为了将这一切结合在一起，我想尝试 AngularJS，也许与 requirejs 一起作为 AMD 解决方案。我看到有一个[AngularJS 引导程序集成](http://angular-ui.github.com/bootstrap/)，我问自己使用它是否是一个好主意，而不是使用普通的 AngularJS 和引导程序。

有什么好处还是我应该分开使用这两个？我可以将 AngularUI 与引导程序一起使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:05:26.423

*   Angular 带有指令和模块，因此不需要其他 AMD 解决方案
*   我发现 Bootstrap 对 CSS 特别有用，而且它与 Angular 配合得很好（它只生成 JavaScript 和 HTML）
*   如果您发现[Bootstrap 的 JavaScript 部分](http://twitter.github.com/bootstrap/javascript.html)有用并且您正在使用 Angular，那么请务必使用[AngularJS Bootstrap 集成](http://angular-ui.github.com/bootstrap/)

# java - 带有 CSV 长转换的 Java NumberformatException

> ID：15064103
> 
> 赞同：0
> 
> 时间：2013-02-25T09:47:16.243
> 
> 标签：java, csv, timestamp, numberformatexception

我正在尝试将 CSV 文件导入 Java，但是当我达到时间戳值（例如：135824328205）时，我收到以下消息：

> 02-25 10:40:48.629: W/System.err(23341): java.lang.NumberFormatException: 1.35998E+12

我想将它存储为一个长值，但它不起作用，这是我的代码：

```
in.setTS(Long.parseLong(dataArray[2])); 
```

有谁能够帮我 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:49:46.640

正如你[在这里](https://stackoverflow.com/questions/2722122/java-parse-a-number-in-exponential-notation)看到的：

```
in.setTS(Double.valueOf(dataArray[2]).longValue()); 
```

如果`dataArray[2]`将相关的指数符号保存为字符串

[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)也可以在这里为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:52:00.280

对于巨大的数字，使用它非常有用`BigInteger`

```
BigInteger value = new BigInteger(dataArray[2], 10); 
```

假设`dataArray[2]`是字符串

参考[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

# perl - 如何在 Perl 中执行“加载模块 X”

> ID：15064104
> 
> 赞同：0
> 
> 时间：2013-02-25T09:47:16.977
> 
> 标签：perl, command, system

我在从 Perl 加载内核模块时遇到问题。

我已经尝试过：

```
system ("module load X");

system ´module load X´ 

exec(module load X); 
```

它抱怨

```
Can't exec "module": No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:25:06.503

正确的功能确实是`system`.

```
use IPC::System::Simple qw( system );
system("module load X"); 
```

（通过使用 IPC::System::Simple 的版本，我们不必做任何错误检查。）

如果内核找不到`module`，那是因为它不在 PATH 中。您可以调整 PATH 或使用可执行文件的完整路径。

```
system("/path/to/module load X"); 
```

当然，我假设您的命令实际上是有意义的，因为我对加载内核模块一无所知。这可能不是一个公平的假设，因为您`load module`在一个地方和`module load`另一个地方都说过。仔细检查命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:49:12.587

你*可能*想要

```
use X; 
```

但是我想如果你正在为为什么`system`或`exec`不加载一个模块而苦苦挣扎，你应该阅读一些关于 Perl 的介绍性材料。

# mysql - SQL Select/Join 语句 - 没有加入时选择？

> ID：15064105
> 
> 赞同：2
> 
> 时间：2013-02-25T09:47:20.093
> 
> 标签：mysql, sql, select

所以我一直在使用这个`select`声明：

```
select runners.name, runners.age, sum(races.laptime) as totallaptime
from runners join races on runners.runnerid = races.runnerid
where runners.region = "region001"
group by runners.runnerid 
```

这列出了来自特定地区的所有跑步者，并给出了他们所有单圈时间的总和。

不幸的是，这错过了该地区所有还没有单圈时间的跑步者（大概是因为他们在`races`数据库中没有条目）。

如何调整此`select`语句以使其包含特定区域中的所有跑步者，`0`如果`totallaptime`他们在数据库中没有任何条目，则列出一个`races`？

（抱歉问题标题含糊不清，我想不出任何方法来总结这个问题）

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:48:28.500

使用`LEFT JOIN`：

```
select runners.name, runners.age, coalesce(sum(races.laptime),0) as totallaptime
from runners 
left join races on runners.runnerid = races.runnerid
where runners.region = "region001"
group by runners.runnerid 
```

A`LEFT JOIN`选择左表的*所有行*，如果存在则从右表返回结果，如果不存在则返回值为 NULL 的单行。

注意：我`COALESCE`在语句中添加了 a 因为求和 a`NULL`将导致`NULL`; 这会将这些值更改为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T09:49:31.557

您将不得不使用 a `LEFT OUTER JOIN`，它还会为您提供“左”表（在本例中为`runners`）的结果，其中没有匹配的“右”表：

```
select runners.name, runners.age, sum(races.laptime) as totallaptime
from runners LEFT OUTER JOIN races on runners.runnerid = races.runnerid
where runners.region = "region001"
group by runners.runnerid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:48:54.143

编辑必须使用 LEFT JOIN 甚至包括左表中的不匹配记录

```
select runners.name, runners.age, sum(races.laptime) as totallaptime
from runners left join races on runners.runnerid = races.runnerid
where runners.region = "region001"
group by runners.runnerid 
```

# asp.net-mvc-4 - MVC 在弹出窗口中打开 PDF

> ID：15064107
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:21.503
> 
> 标签：asp.net-mvc-4

在我的应用程序中，我的解决方案中有一个 pdf 文档，当用户单击特定按钮时，必须在弹出窗口中打开该文档。我可以通过返回文件流对象在同一个窗口中打开它。我使用的代码。

```
public ActionResult ShowPdf()
    {
        if (System.IO.File.Exists(Server.MapPath("~/downloads/MyPdf.pdf")))
        {
            string pathSource = Server.MapPath("~/downloads/MyPdf.pdf");
            FileStream fsSource = new FileStream(pathSource, FileMode.Open, FileAccess.Read);

            return new FileStreamResult(fsSource, "application/pdf");
        }
        else
        {
          return RedirectToAction("Index", "User");
        }
    } 
```

我如何在弹出窗口中加载相同的内容

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:50:35.780

这将取决于您如何从客户端调用此控制器操作。例如，如果您有一个链接，您可以将`target="_blank"`属性添加到此锚点。例如：

```
@Html.ActionLink(
    "Download pdf",
    "ShowPdf",
    "SomeController",
    null,
    new { target = "_blank" }
) 
```

或者，如果您使用 javascript 来调用控制器操作，则可以使用该[`window.open`](https://developer.mozilla.org/en/docs/DOM/window.open)函数。

# c# - 如何一次从麦克风录制桌面和音频？

> ID：15064110
> 
> 赞同：1
> 
> 时间：2013-02-25T09:47:27.527
> 
> 标签：c#, winforms

我们需要构建一个应用程序，它应该一次记录我们的桌面和来自麦克风的音频。该文件需要自动保存在指定路径中。我们尝试使用 DLL windows media Encoder 构建应用程序。但我们面临的问题是，出现一个弹出窗口，手动将部分保存到系统文件夹。这工作正常。但我们不需要显示弹出窗口，并且该部分应自动保存到指定路径。我们从这里尝试过，但保存的部分缺少部分音频。任何人都可以帮助我们找到解决方案吗？请检查以下代码，

```
 try
        {
            if (DesktopEncoder != null)
            {
                DesktopEncoder.Stop();
                SaveFileDialog dialog = new SaveFileDialog();
                dialog.Filter = "Video Files (*.wmv)|*.wmv";
                dialog.DefaultExt = "wmv";
                DialogResult res = dialog.ShowDialog();
                if (res != DialogResult.Cancel)
                {
                    if (File.Exists(DirectoryPath + "\\Demo\\tempScreenRecordVideo\\tempscreenvideo.wmv"))//ConfigurationSettings.AppSettings["demoTempScreenRecordVideo"]
                    {
                        recentRecordingsToolStripMenuItem1.DropDownItems.Add(dialog.FileName, null, recentRecordings_Click);
                        recentRecordingsToolStripMenuItem.DropDownItems.Add(dialog.FileName, null, recentRecordings_Click);
                        if (File.Exists(dialog.FileName))
                            File.Delete(dialog.FileName);

                        File.Copy(DirectoryPath + "\\Demo\\tempScreenRecordVideo\\tempscreenvideo.wmv", dialog.FileName);//ConfigurationSettings.AppSettings["demoTempScreenRecordVideo"]
                        if (DesktopEncoder.RunState != WMENC_ENCODER_STATE.WMENC_ENCODER_RUNNING && DesktopEncoder.RunState != WMENC_ENCODER_STATE.WMENC_ENCODER_PAUSED)
                        {
                            File.Delete(DirectoryPath + "\\Demo\\tempScreenRecordVideo\\tempscreenvideo.wmv");//ConfigurationSettings.AppSettings["demoTempScreenRecordVideo"]
                        }
                        if (File.Exists(DirectoryPath + "\\Demo\\ScreenRecordVideo\\screenvideo.wmv"))//ConfigurationSettings.AppSettings["demoScreenRecordVideo"]
                            File.Delete(DirectoryPath + "\\Demo\\ScreenRecordVideo\\screenvideo.wmv");//ConfigurationSettings.AppSettings["demoScreenRecordVideo"]
                        File.Copy(dialog.FileName, DirectoryPath + "\\Demo\\ScreenRecordVideo\\screenvideo.wmv");//ConfigurationSettings.AppSettings["demoScreenRecordVideo"]
                        File.Delete(dialog.FileName);
                    }
                }
                tmrRcCounter.Enabled = false;
                tsRecDuration.Text = "";
                tmrViewerCount.Enabled = false;
                if (this.Visible)
                {
                    notifyRecorder.Text = "Recorder is in Visible Mode.";
                }
                else
                {
                    notifyRecorder.Text = "Recorder is in Invisible Mode.";
                }
                //Windows Media Encoder EXE.
                Process[] ps = Process.GetProcessesByName("wmenc");
                if (ps.Length != 0)
                {
                    ps[0].Kill();
                }
                DesktopEncoder = null;
                tmrRcCounter.Enabled = false;
            }
        }
        catch
        {
            MessageBox.Show("Can't Stop it.Please,Save Current Recording and Restart Application.");
        } 
```

# java - 使用 p:calendar 和小程序时，日期选择器被小程序覆盖

> ID：15064111
> 
> 赞同：0
> 
> 时间：2013-02-25T09:47:33.247
> 
> 标签：java, primefaces, applet

```
<table>
<tr>
<td>
<p:calendar showOn="button"  value="*" />
</td>
</tr>
<tr>
<td>
<applet></applet>
</td>
</tr>
</table> 
```

当我使用 primefaces 和小程序时，我遇到了一个问题，当我单击日期选择器按钮时，弹出选择器被小程序覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:38:43.243

这是CSS的问题

只是扭曲你`applet`的`div`

例如

```
<div id="applet_wrapper">
     <applet></applet>
</div> 
```

并玩弄它的 css 显示或位置

例如（在您的 css 文件中...）：

```
#applet_wrapper{
    display :block; //or inline-block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T04:13:16.390

在这里，您需要使用 SimpleDateFormat ，通过它您可以覆盖 java 小程序中的日期差异。

> 日期 d1 = null; 日期 d2 = null;

```
 d1 = format.parse(logindate1);
    d2 = format.parse(logoutdate);

    //in milliseconds
    long diff = d2.getTime() - d1.getTime();

    long diffSeconds = diff / 1000 % 60;
    long diffMinutes = diff / (60 * 1000) % 60;
    long diffHours = diff / (60 * 60 * 1000) % 24;
    long diffDays = diff / (24 * 60 * 60 * 1000);

    System.out.print(diffDays + " days, ");
    System.out.print(diffHours + " hours, ");
    System.out.print(diffMinutes + " minutes, ");
    System.out.print(diffSeconds + " seconds."); 
```

我遇到了同样的问题，但经过一番搜索后，我[在小程序中找到了日期选择器](http://techdilute.com/date-difference-in-java/)。我希望它会帮助你

# c++ - Windows 上 QtCreator 和 CMake 的链接问题

> ID：15064115
> 
> 赞同：0
> 
> 时间：2013-02-25T09:47:54.840
> 
> 标签：c++, windows, cmake, qt-creator

我是 QtCreator 和 CMake 的新手，我不明白为什么下面的设置给了我一个“未解析的外部符号”。

![在此处输入图像描述](../Images/f7b5170bea890506ec16f9058fbcccad.png)

我错过了什么？

**编辑：**

@ixSci Find_package(opengl) 在那里，但我想它不需要..这是我现在拥有的更清洁的 cmakelists：

```
project(test)
cmake_minimum_required(VERSION 2.8)

aux_source_directory(. SRC_LIST)

include_directories(../../glfw/glfw-2.7.7/include)    
link_directories(../../glfw/glfw-2.7.7/lib-msvc110)

add_executable(${PROJECT_NAME} ${SRC_LIST})

target_link_libraries(${PROJECT_NAME} opengl32 glfw) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:29:30.300

似乎 GLFW 是 OpenGL 的一些开源库。所以你试图通过使用来找到它，`find_package(opengl)`但它是错误的。GLFW 不是 OpenGL 的一部分。您需要应用一些其他方法，例如为 cmake 下载一些 3rdpart GLFW finder。我找到的[一个。](http://code.google.com/p/assembly3d/source/browse/tools/viewer/cmake/FindGLFW.cmake?spec=svnd1f903929efb04f6802f4057e92e853f8e6519b4&r=d1f903929efb04f6802f4057e92e853f8e6519b4)您需要下载它，存储在某处（例如在您的源代码树中），然后将此路径添加到`SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "YOUR_PATH_GOES_HERE")`cmake 文件顶部的 cmake。完成后，您可以使用`FIND_PACKAGE(GLFW REQUIRED)`并`${GLFW_LIBRARY}`在您的`target_link_libraries`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:09:02.120

由 bash.d 建议，我尝试过使用：

```
target_link_libraries(${PROJECT_NAME} glfwdll) 
```

但我得到了这个错误：

> 正在启动 E:\opengl\test\test.exe... 程序意外结束。E:\opengl\test\test.exe 以代码 -1073741515 退出

所以我尝试使用：

```
target_link_libraries(${PROJECT_NAME} glfw) 
```

但是这次我删除了`#define GLFW_DLL`它并且它起作用了。

不知道为什么。

如果有人可以解释如何正确使用 glfwdll.lib，以及为什么我不能使用它，那就太好了。

谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:53:52.050

看起来您正在混合静态和动态链接。您必须选择使用其中任何一个。

当您使用时，`target_link_libraries(${PROJECT_NAME} glfwdll)`您正在使用动态链接，即链接到库的 dll 版本。在这种情况下，您应该将 GLFW.dll 文件与构建的可执行文件放在同一文件夹中，以便能够运行该程序。似乎使用库的 dll 版本也需要`GLFW_DLL`定义标志。最好在 CMake 中使用`add_definitions(-DGLFW_DLL)`而不是将其放入源文件中来定义它。

静态链接更容易处理，只需使用`target_link_libraries(${PROJECT_NAME} glfw)`. 您不需要文件`GLFWDLL.lib`和`GLFW.dll`.

因此，通过动态链接，您`CMakeLists.txt`可能如下所示（`#define GLFW_DLL`从源文件中删除）。

```
cmake_minimum_required(VERSION 2.8)
project(test)

aux_source_directory(. SRC_LIST)
include_directories(../../glfw/glfw-2.7.7/include)    
link_directories(../../glfw/glfw-2.7.7/lib-msvc110)

add_definitions(-DGLFW_DLL)
add_executable(${PROJECT_NAME} ${SRC_LIST})
target_link_libraries(${PROJECT_NAME} opengl32 glfwdll) 
```

如果您想更改为静态链接，只需将最后三行更改为

```
#add_definitions(-DGLFW_DLL)
add_executable(${PROJECT_NAME} ${SRC_LIST})
target_link_libraries(${PROJECT_NAME} opengl32 glfw) 
```

希望能帮助到你！上面的所有代码都未经测试:-)

# javascript - 用 jQuery 优雅地实现增量按钮？

> ID：15064121
> 
> 赞同：2
> 
> 时间：2013-02-25T09:48:06.947
> 
> 标签：javascript, jquery, increment

在我学习 javascript 和 jQuery 的玩具项目中，我需要为一些输入字段实现递增和递减按钮。我认为下面的设计应该可以工作，但不知何故它没有。我对 jQuery 有什么误解，还是一个平庸的错误？

```
<button type="button"  id="WS1inc" class="incbut"> + </button>  
<input type="number" id="WS1" value="1">        

function increment(field)
{
    field.val(field.val()+1);
}

$("#WS1inc").click($("#WS1"),increment); 
```

控制台说该对象没有方法“val()”，所以我想我不能像这样传递 jQuery 对象？

JSFiddle：http: [//jsfiddle.net/MycnR/](http://jsfiddle.net/MycnR/)

编辑：响应我与 Blender 的讨论，一些更广泛的 HTML：http: [//jsfiddle.net/4ELhf/](http://jsfiddle.net/4ELhf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:50:34.053

这里有几个问题。

`field.val()+1`将被归类为字符串连接而不是整数增量。您`parseInt()`首先需要这样做才能正确计算。

其次，您的呼叫方式存在问题`increment()`。

将您的代码更改为：

```
function increment(field)
{
    field.val(parseInt(field.val(),10)+1);
}

$("#WS1inc").click(function(){
   increment($("#WS1"));
}); 
```

***现场演示：http:** [//jsfiddle.net/MycnR/2/](http://jsfiddle.net/MycnR/2/)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:50:45.080

那是因为你没有通过这个领域。

您可以将呼叫更改为

```
$("#WS1inc").click(function(){increment($("#WS1")}); 
```

当您使用`eventData`（传递给的第一个参数`click`）时，这些数据不会作为参数直接传递给处理程序，而是在`event.data`. 所以你也可以这样做：

```
function increment(e) {
    e.data.val(parseInt(e.data.val(), 10) +1);
}
$("#WS1inc").click($("#WS1"),increment); 
```

请注意，您还必须解析字符串才能递增。

关于这个`eventData`论点，我发现[文档`on`](http://api.jquery.com/on/)更清晰：

> 触发事件时要在 event.data 中传递给处理程序的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T09:50:47.030

```
$("#WS1inc").click(function(){
     $("#WS1").val(parseInt($("#WS1").val())+1);
}); 
```

演示在这里[http://jsfiddle.net/MycnR/1/](http://jsfiddle.net/MycnR/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T09:50:58.160

你把语法弄混了一点。这是一种超级详细的方法：

```
$("#WS1inc").click(function() {
    var $element = $("#WS1");
    var value = $element.val();
    var value_as_integer = parseInt(value, 10);

    $element.val(value_as_integer + 1);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T09:52:24.093

您需要告诉`increment`函数它必须更改哪个元素。

这可以使用调用的`data`参数来完成`.on()`，其中提供的参数`ev.data`在事件处理程序中可用：

```
function increment(ev) {
     var el = ev.data || this;  // use the clicked element if it wasn't supplied
     el.value = parseInt(el.value, 10) + 1;
}

$('#WS1inc').on('click', document.getElementById('WS1'), increment); 
```

注意使用-在大多数情况下`el.value`不需要使用，而且效率更高。`$(el).val()``el.value`

见[http://jsfiddle.net/alnitak/W8fjX/](http://jsfiddle.net/alnitak/W8fjX/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T09:53:03.133

传递给事件处理程序的第一个参数是事件对象。在 jquery 中，事件处理程序 ( `this`) 的上下文设置为侦听该事件的元素......也许您可能与此相关，并且可能希望将您的函数更改为：

```
function increment(){
    var field = $(this).siblings('input');
    field.val( (+field.val() || 0) + 1);
} 
```

这是一个现场演示：http: [//jsfiddle.net/MycnR/5/](http://jsfiddle.net/MycnR/5/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-25T09:59:07.407

通用功能：

[演示](http://jsfiddle.net/mplungjan/eq48m/)

html

```
<button type="button"  id="WS1dec" class="but"> - </button>  
<input type="number" id="WS1" value="1">        
<button type="button"  id="WS1inc" class="but"> + </button>  
<hr/>
<button type="button"  id="WS2dec" class="but"> - </button>  
<input type="number" id="WS2" value="1">        
<button type="button"  id="WS2inc" class="but"> + </button> 
```

jQuery

```
$(function() {
  $(".but").on("click",function() {
    var id=this.id;
    var fldId=id.substring(0,id.length-3);
    var inc=id.substring(id.length-3)=="inc";
    var fld = $("#"+fldId);
    var val = +fld.val();
    if (inc)val++;else val--;
    fld.val(val);
  });
}); 
```

# typescript - 使用单个文件进行打字稿调试

> ID：15064122
> 
> 赞同：0
> 
> 时间：2013-02-25T09:48:21.237
> 
> 标签：typescript

是否可以将我所有的打字稿编译成一个文件（app.js 等）并在 .ts 文件中进行调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:52:07.293

您在这里有几个选择。

1.  使用[Source Maps 调试您的 TypeScript](https://stackoverflow.com/questions/12711826/debugging-typescript-code-with-visual-studio) - 仅在几个浏览器中支持。

2.  熟悉 JavaScript - 您使用浏览器控制台在纯 JavaScript 中调试的次数越多，您的理解就会越好。

3.  捆绑调试和测试/单独生活。如果您调试多个文件，则可以在 Visual Studio 中进行。然后，您可以在其他环境中使用单个文件。

# php - 打印0500的php输出

> ID：15064123
> 
> 赞同：1
> 
> 时间：2013-02-25T09:48:24.817
> 
> 标签：php

我有以下 php 代码。

```
 <?php
           print 0505;
           echo "\n";
           print 0500;
     ?>

output =>   325
            320 
```

谁能告诉我这个输出是怎么来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:50:22.283

这是八进制

[这](http://www.statman.info/conversions/octal.html)是一个八进制/十进制转换器。

10 月 500 日 = 12 月 320 日

10 月 505 日 = 12 月 325 日

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:06:05.587

0x*** - 十六进制数 (16)
0b*** - 二进制数 (2, PHP5.4)
0*** - 八进制数 (8)
*** - 十进制数 (10, 正常)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:02:14.017

您可以使用此格式获取输出

打印“0505”；

回声“\n”；

打印“0500”；

因为这是八进制/十进制转换器

请检查此链接： http: [//www.statman.info/conversions/octal.html](http://www.statman.info/conversions/octal.html)

# extjs - Extjs treeview getselected方法不起作用

> ID：15064126
> 
> 赞同：2
> 
> 时间：2013-02-25T09:48:31.040
> 
> 标签：extjs, treeview

我正在使用 extjs 2 树视图根据复选框选择进行过滤，但该`tree.getSelected()`方法无法正常工作。

问题是，如果选择了父节点，它只会获取该父节点而不会获取其子节点。我有代码的完全相同的副本，但在 extjs 4 中可以 100% 工作

**（EXTJS 2 代码）**

```
var records = Ext.getCmp('My_Custom_Tree').getChecked(),
    names = [];

Ext.Array.each(records, function (rec) {
    names.push([rec.raw.type, rec.raw.text]);
}); 
```

**（EXTJS 4 代码）**

```
var records = Ext.getCmp('My_Custom_Tree').getView().getChecked(),
    names = [];

Ext.Array.each(records, function (rec) {
    names.push([rec.raw.type, rec.raw.text]);
}); 
```

如果有人可以告诉我 get selected 是否存在错误或提供除了升级到 4 之外的替代方法，将不胜感激。

# ruby-on-rails - 使用 link_to 创建图片链接

> ID：15064130
> 
> 赞同：2
> 
> 时间：2013-02-25T09:48:47.697
> 
> 标签：ruby-on-rails, ruby

我想使用该`link_to`方法来动态创建图像链接。我尝试使用`image_tag "/assets/#{student.name.downcase}.jpg"`作为链接的参数，我也使用`student_path`了 URL。

我可以创建此方法来创建文本链接，但在生成图像链接时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:49:42.933

尝试

```
link_to image_tag("#{student.name.downcase}.jpg"), student 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:56:20.507

在锚标记中添加更复杂标记的另一个变体是使用块。

```
<%= link_to student do %>
  <%= image_tag("#{student.name.downcase}.jpg") %>
<% end %> 
```

# python - 从 py2exe 获取 tortoise svn 版本到 python 二进制文件

> ID：15064132
> 
> 赞同：0
> 
> 时间：2013-02-25T09:48:50.783
> 
> 标签：python, tortoisesvn, py2exe

我为我的项目生成了一个 py2exe 二进制文件。我使用 TortoiseSVN。如何提取 SVN 修订号（我稍后需要将其合并到二进制文件中）。我需要在 中实施相同的操作`Python`吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:54:17.897

你需要执行这个命令：

```
svn info path/to/working/copy 
```

然后解析输出。输出看起来有点像这样：

```
Path: path/to/working/copy
Working Copy Root Path: blah blah
URL: https://blah blah
Repository Root: https://blah blah
Repository UUID: blah blah
Revision: 42
Node Kind: directory
Schedule: normal
Last Changed Author: blah blah
Last Changed Rev: 42
Last Changed Date: 2013-02-25 09:52:55 +0000 (Mon, 25 Feb 2013) 
```

用于`subprocess.check_output`执行`svn`命令并读入输出。然后按照你的感觉解析它。例如，您可以使用简单的正则表达式`re`来查找信息。

# android - ScrollView diorders 并删除 relativelayout 的内容

> ID：15064149
> 
> 赞同：0
> 
> 时间：2013-02-25T09:49:48.880
> 
> 标签：android, android-layout, scrollview, android-relativelayout

我在`ScrollView`. 不使用`scrollView`我的应用程序会给出这样的布局![不使用 <code>ScrollView</code> 预览](../Images/7adcfbe4ffe2a366e36522c2d4c321b2.png)

但是当我`ScrollView`在看起来像的常规代码上添加标签时

```
`<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="578dp" >
<Spinner
    android:id="@+id/DiscountRate"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:layout_marginLeft="1dp"
    android:text="Discount Rate" />

<Button
    android:id="@+id/results"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"

    android:text="Results" />

<Spinner
    android:id="@+id/Spinner01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/TextView01"
     />

<TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:layout_below="@+id/DiscountRate"
    android:text="Sex" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:layout_below="@+id/Spinner01"
    android:text="Date of Birth" />

<DatePicker
    android:id="@+id/dateOfBirth"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/TextView02"
    android:layout_centerVertical="true" />

<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:layout_below="@+id/dateOfBirth"
    android:text="Date of Trial" />
<DatePicker
    android:id="@+id/dateOfTrial"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/TextView03"
    android:layout_centerVertical="true" /></RelativeLayout></ScrollView>` 
```

然后输出是障碍![添加scrollView标签后的输出](../Images/8018857b078ee5901732631894260efc.png)

请帮助我为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:03:49.520

试试这个：

移除此属性

```
android:layout_centerVertical="true" 
```

进入您的代码中的两个日期选择器，我希望这会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:03:47.047

```
try this..

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="578dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dp"
            android:layout_marginTop="15dp"
            android:text="Discount Rate" />
        <Spinner
            android:id="@+id/DiscountRate"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/DiscountRate"
            android:layout_marginLeft="1dp"
            android:text="Sex" />

         <Spinner
            android:id="@+id/Spinner01"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextView01" />

         <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/Spinner01"
            android:layout_marginLeft="1dp"
            android:text="Date of Birth" />

          <DatePicker
            android:id="@+id/dateOfBirth"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextView02"
             />

           <TextView
            android:id="@+id/TextView03"
            android:layout_below="@+id/dateOfBirth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dp"
            android:text="Date of Trial" />

            <DatePicker
            android:id="@+id/dateOfTrial"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextView03"
             />

        <Button
            android:id="@+id/results"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:text="Results" />

    </RelativeLayout>

</ScrollView> 
```

# c# - 将 JSON 对象反序列化为 C# 对象时整数列表的反序列化问题

> ID：15064152
> 
> 赞同：2
> 
> 时间：2013-02-25T09:50:12.967
> 
> 标签：c#, javascript, asp.net, json

以下代码工作正常

```
List<string> alist = new List<string>() { "1", "2", "3" };
string serialisedList= (new JavaScriptSerializer()).Serialize( alist );
List<int> deserialisedList= JsonConvert.DeserializeObject<List<int>>( serialisedList); 
```

上例中serialisedList的值为"[\"1\",\"2\",\"3\"]"

然后，我有一个 JavaScript 对象，该对象具有一个属性，该属性是一组选中的 CheckboxList 控件值。当我将此对象转换为 JSON 时，键值对如下所示：

```
{
   "SomeProp": "[\"1\",\"2\",\"3\"]"
} 
```

所以，基本上这里的值和上面的值是完全一样的。但是，当我尝试将其反序列化为 C# 对象时：

```
public class ServerObject
{
   public List<int> SomeProp { get; set; }
}

ServerObject deserialisedObj = JsonConvert.DeserializeObject<ServerObject>( jsonString ); 
```

我得到错误：

```
Error converting value "["1","2","3"]" to type 'System.Collections.Generic.List`1[System.Int32]'. Path 'SomeProp' 
```

为什么不能将相同的值反序列化为对象属性，因为它可以直接直接转换为类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:54:59.390

您正在序列化一个字符串列表。你希望它如何神奇地成为INTS列表？是的，JSON 通常是无类型的，并且适用于键值对，但对于值，它保留了最基本的格式信息。在 JSON 中，字符串和数字（​​以及数组/列表和映射/对象）之间存在区别。查看输出的 JSON：

```
{
   "SomeProp": ["1","2","3"]
} 
```

显然，这是一个字符串数组。

在 JSON 中，数字数组如下所示：

```
{
   "SomeProp": [1,2,3]
} 
```

因此，您必须首先将其序列化为：

```
List<string> alist = new List<string>() { "1", "2", "3" };

List<int> list2 = alist.Select(str => int.Parse(str)).ToList();
string serialisedList= (new JavaScriptSerializer()).Serialize( list2 );

List<int> deserialisedList= JsonConvert.DeserializeObject<List<int>>( serialisedList); 
```

至于你的问题：

> 为什么不能将相同的值反序列化为对象属性（..）

因为底层的值类型不匹配。左侧是字符串，右侧是整数。解串器是如何知道如何做到这一点的？如果字符串不是以 10 为基数的整数，而是以 16 基数为基数的整数，而且很幸运它们没有使用字母 AF，该怎么办？

至于你问题的第二部分

> (..) 因为它可以直接直接输入？

不，它不能。如果值类型不匹配，任何合理的往返库都应该抛出。如果您的 JSON 处理库允许您将 JSON 值“blargh”分配给 INT 字段/属性，那么，对我来说，这是一个错误而不是功能 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:01:36.387

如果您使用 JavaScriptSerializer 反序列化，它应该可以工作：

```
List<int> deserialisedList = new JavaScriptSerializer().Deserialize<List<int>>(serialisedList); 
```

# iphone - Iphone 将信用卡信息保存在钥匙串中或使用密码学？

> ID：15064153
> 
> 赞同：1
> 
> 时间：2013-02-25T09:50:16.760
> 
> 标签：iphone, security, cryptography, credit-card, keychain

我正在开发一个 Iphone 应用程序。我需要在 Iphone 上存储用户的信用卡信息，并且我对安全性有一些疑问。

1) 实施加密系统来加密信用卡号（或使用可用的库之一）更好还是我可以只使用钥匙串来存储 CC 号码？钥匙串是否被认为是保存 CC 信息的好地方？

2）我还应该加密（或保存在钥匙串中）到期日期吗？

3) 我应该保存安全码（或 CCV）吗？还是要求用户每次都输入？

感谢您的澄清

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:18:25.903

我建议您阅读 PCI 的以下文档：

使用智能手机或平板电脑接受移动支付

[https://www.pcisecuritystandards.org/documents/accepting_mobile_payments_with_a_smartphone_or_tablet.pdf](https://www.pcisecuritystandards.org/documents/accepting_mobile_payments_with_a_smartphone_or_tablet.pdf)

我的建议是：

*   除非绝对必要，否则不要存储 CC 详细信息。
*   切勿存放 CVV
*   不要实现自己的加密机制，使用框架提供的加密机制。

有任何问题，请告诉我。

问候，法比奥@fcerullo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:57:41.847

这些是您对 Q1 的 Qestion 的以下评论 - 是的，最好使用加密类来为这种高度安全的数据使用好的算法。例如。AES128 或 AES256 算法。

对于 Q2 - 是的，您可以将加密数据保存在 Key Chain 中，这是安全数据的好地方。

对于 Q3 - 我认为您应该要求用户每次输入 CVV 编号。就像每个移动 rehrge 网站一样。支付宝

# html - 禁用 Android 浏览器（WebKit）的输入焦点发光

> ID：15064158
> 
> 赞同：4
> 
> 时间：2013-02-25T09:50:26.780
> 
> 标签：html, css, android-browser, mobile-webkit

我正在尝试为网页设置输入样式。当在 Android 4.0.4 默认浏览器上查看网页时，专注于输入会发出蓝光。

闲置的：

![](../Images/728f5e2e433d638e288858bed9cc7414.png)

输入重点：

![](../Images/f5fa903632adcc58ceef359ab5191d76.png)

我想禁用那个蓝色边框（并自己制作一个），但如果我设置`-webkit-user-modify: read-write-plaintext-only`，输入将失去其类型（HTML `type="number"`）并且不会向上滑动数字键盘（如屏幕截图所示）。

尝试过的 CSS 属性：

1.  `-webkit-user-modify: read-write-plaintext-only`和`-webkit-tap-highlight-color: rgba(255, 255, 255, 0)`
2.  `outline: none`
3.  `border: 0`
4.  `box-shadow: none`

是否可以禁用此 WebKit 功能但保留数字键盘？谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:07:20.583

试试这个:)（改变你想要的颜色/不透明度

```
-webkit-tap-highlight-color: rgba(255, 255, 255, 0); 
```

# linux - /usr/bin/ld: 找不到 -lglut

> ID：15064159
> 
> 赞同：10
> 
> 时间：2013-02-25T09:50:28.763
> 
> 标签：linux, ubuntu

尝试安装 mp4box 并运行 make lib 命令时出现以下错误。

```
/usr/bin/ld: cannot find -lglut
collect2: ld returned 1 exit status
make[1]: *** [libgpac.so] Error 1
make[1]: Leaving directory `/gpac/src'
make: *** [lib] Error 2 
```

在我检查了我得到的库之后：

```
lrwxrwxrwx  1 root root      13 Feb 15 18:25 libGL.so -> mesa/libGL.so
-rw-r--r--  1 root root  905952 Aug 23  2011 libGLU.a
lrwxrwxrwx  1 root root      11 Feb 15 18:26 libGLU.so -> libGLU.so.1
lrwxrwxrwx  1 root root      20 Feb 15 18:25 libGLU.so.1 -> libGLU.so.1.3.071000
-rw-r--r--  1 root root  453272 Aug 23  2011 libGLU.so.1.3.071000
baseem@348588:/usr/lib$ ln -s libGLU.so.1.3.071000 libGL.so
ln: creating symbolic link `libGL.so': File exists 
```

注意：我是 linux 的新手，所以请考虑到这一点！非常感谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T09:52:33.650

您将需要 GLUT 的实现。最容易获得的是 FreeGLUT：

```
sudo apt-get install freeglut3 freeglut3-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T07:31:24.330

当我尝试安装 MP4Box 时，我遇到了同样的问题，然后我找到了解决方案。

首先检查您的配置文件是否产生任何错误。例如（权限被拒绝错误）：在这种情况下，您需要将配置文件中的 TMPDIR1 行（fi 之前的第 7 行）更改为以下内容：

```
 TMPDIR1=/usr/local/src 
```

那么您需要使用以下命令安装 glut：

```
 yum install  glut-devel 
```

现在，如果您运行以下命令

```
 ls /usr/lib64 |grep glut 
```

你会发现你有 libglut.so （如果你不能 libglut.so@ 你需要创建符号链接）那么一切都应该正常工作

# excel - 使用VB将Excel行转换为文件

> ID：15064163
> 
> 赞同：0
> 
> 时间：2013-02-25T09:50:39.767
> 
> 标签：excel, vbscript, rows

对VB有点缺乏经验，所以我希望有人能帮助解决一个简单的问题！

本质上，我需要为 Excel 电子表格的每一行生成一个文本文件（扩展名为 .exp）。但是，列数和行数事先是未知的，格式需要相当具体。例如，给定以下 Excel 格式：

```
Col1 | Col2
1 | 2
8 | 9
17 | 46

```

我希望生成 3 个文件。第一个文件将如下所示：

```
Col1 1
Col2 2

```

第二：

```
Col1 8
Col2 9

```

第三：

```
Col1 17
Col2 46

```

有没有使用VB的简单方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:56:50.797

自从我玩 VBA 以来已经有一段时间了，但是这样的东西应该可以工作：-

```
Dim fso As New FileSystemObject
Dim stream As TextStream
Dim iLoop As Integer
iLoop = 1
While Sheets("Sheet1").Range("A" & iLoop) <> ""
    Set stream = fso.CreateTextFile("C:\Row" & iLoop & ".txt", True)
    stream.WriteLine "Col1 " & Sheets("Sheet1").Range("A" & iLoop)
    stream.WriteLine "Col2 " & Sheets("Sheet1").Range("B" & iLoop)
    stream.Close
    iLoop = iLoop + 1
Wend 
```

可能需要一些调整，我还没有测试过，但这是基本的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:51:54.733

我从不使用 Excel，也没有副本来测试任何代码，所以请耐心等待。

VBScript（独立 .vbs 文件）的基本思想...

```
'connect to Excel
Set XLApp = CreateObject("Excel.Application")
XLApp.Visible = True

'open the file
XLApp.DisplayAlerts = False
Set XLBook = XLApp.WorkBooks.Open("c:\path_to\my.xls")
XLApp.DisplayAlerts = True

'if you know the Worksheet name:
sSheetName = "MySheetName"
Set XLSheet = XLBook.Sheets.Item(sSheetName)

'else use index:
Set XLSheet = XLBook.Worksheets(1)

'or if you want to process all sheets:
For Iter = 1 To XLBook.Worksheets.Count
    Set XLSheet = XLBook.Worksheets(Iter)
    ...
Next

'you can use XLSheet.Columns.Count to iterate
'or if the columns names are known:
Set Col1 = XLSheet.Columns("Col1")
Set Col2 = XLSheet.Columns("Col2")

'or get Range:
Set Range = XLSheet.Columns("Col1:Col2")
'same as above:
Set Range = XLSheet.Range("Col1:Col2")

'vbs FileSystemObject:
Set fso = CreateObject("Scripting.FileSystemObject")

iLoop  = 1 'to enumerate file names
intRow = 2 '?... not sure about this

Do While Range.Cells(intRow,1).Value <> ""
    Set stream = fso.CreateTextFile("Row" & iLoop & ".exp", True)
        stream.WriteLine "Col1 " & Range.Cells(intRow, 1).Value
        stream.WriteLine "Col2 " & Range.Cells(intRow, 2).Value
    stream.Close
    iLoop = iLoop + 1
    intRow = intRow + 1
Loop

'XLBook.Save
XLBook.Close
XLApp.Quit

Set stream = Nothing
Set fso    = Nothing
Set Range  = Nothing
Set XLSheet = Nothing
Set XLBook  = Nothing
Set XLApp   = Nothing 
```

# ruby - rubygem 明显存在时找不到？

> ID：15064166
> 
> 赞同：2
> 
> 时间：2013-02-25T09:50:44.080
> 
> 标签：ruby, rubygems

我刚刚制作了一个小宝石并将其推到`Rubygems.org`：

[https://rubygems.org/gems/fragrant_wind](https://rubygems.org/gems/fragrant_wind)

但是，我似乎无法再次下载它，有什么想法吗？

```
$ gem install fragrant_wind
  ERROR:  Could not find a valid gem 'fragrant_wind' (>= 0) in any repositor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:12:29.237

尝试修复您的宝石名称。选择下划线或连字符，但不要混合使用。

例如，您有：

```
# .gemspec
s.name = 'fragrant-wind' 
```

更好的是：

```
# fragrant_wind.gemspec
s.name = 'fragrant_wind' 
```

编辑 1：它适用于我下载然后安装，但它不能通过 RubyGems 工作。

```
$ gem install fragrant_wind-0.0.2.gem
Successfully installed fragrant_wind-0.0.2
1 gem installed
Installing ri documentation for fragrant_wind-0.0.2...
Building YARD (yri) index for fragrant_wind-0.0.2...
Installing RDoc documentation for fragrant_wind-0.0.2...
$ irb
> require 'fragrant_wind'
=> true
> FragrantWind.new.generate
=> "billowing waterfall" 
```

编辑2：它也可以通过捆绑器工作。（感谢@Bitterzoet）

```
# Gemfile
source 'https://rubygems.org'
gem "fragrant_wind"

$ bundle install
Fetching gem metadata from https://rubygems.org/..
Installing fragrant_wind (0.0.2) 
Using bundler (1.2.3) 
Your bundle is complete! ... 
```

编辑 3：它现在按预期工作（太平洋标准时间周一上午 10 点）。我的猜测是 Rubygems 由于昨晚自己的更新而出现延迟或故障。

# java - 用于 C 或 Java 的非玩具软件事务内存

> ID：15064173
> 
> 赞同：12
> 
> 时间：2013-02-25T09:50:52.623
> 
> 标签：java, c, transactions, shared-memory

我正在考虑通过 1 或 2 个指导实验室为大学课程教授软件事务内存使用的可能性。我只知道 Haskell 的 STM，但该课程的学生可能从未听说过它。

我已经在网上或其他问题中找到了一些此类库的列表（例如，[http](http://en.wikipedia.org/wiki/Software_transactional_memory#C.2FC.2B.2B) ://en.wikipedia.org/wiki/Software_transactional_memory#C.2FC.2B.2B ）。当您阅读本文时，我正在检查它们，但其中许多似乎没有很好的文档（大多数是研究原型，只是在论文中模糊地描述，我宁愿教一些更有用和有据可查的东西）。此外，维基百科提供的许多链接都是悬空的。

**总而言之**，是否有针对工业项目（或至少是非玩具项目，以确保一定的质量水平）和有据可查（为学生提供一些好的指导）的 STM 实现？

**编辑**：我不是这门课的老师，我只是帮他做实验室。当然，学生们之前将学习并发和分布式算法的基础知识。这只是在课程结束时提出一些不同的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:38:28.873

生产质量的 STM 库并非旨在作为**教学工具**，甚至不是“最佳实践”。对于任何大学/大学课程来说，值得学习的可能是**1%**的代码；剩下的 99% 是*与平台相关的本质角落案例*。有趣的 1% 没有以任何方式突出显示，因此您无法找到它。

我对大学/大学课程（无论是入门课程还是高级课程）的建议是自己实施 STM 构建块（并且仅适用于 1 个平台）。

首先介绍问题：并发、缓存……

然后介绍我们有的原子助手：cas/cmpxchg，fence。

然后与您的学生一起构建示例，首先简单，然后更难，更复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:43:48.160

> 首先介绍问题：并发、缓存……

从[eznme 开始](https://stackoverflow.com/users/618598/bernd-elkemann)，我在大学期间解决了一些很好的问题`concurrency`。

*   [餐饮哲学家问题](https://en.wikipedia.org/wiki/Dining_philosophers_problem)

    > 在计算机科学中，哲学家进餐问题是并发算法设计中经常使用的示例问题，用于说明同步问题和解决这些问题的技术。
    > 
    > [![餐饮菲尔](../Images/1d46561ebf0cf120dfc7042916c49620.png)](https://i.stack.imgur.com/AHTQs.png)
    > [（来源：[wikimedia.org](https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Dining_philosophers.png/200px-Dining_philosophers.png)）]

[使用 Je Magee 和 Je Kramer的](https://www.doc.ic.ac.uk/~jnm/book/book_applets/Diners.html)相同实现，并使用监视器解决问题。

大多数共享内存应用程序`Integers`比字符串更有效（由于`AtomicInteger`Java 的类）。所以`shared memory`在我看来，最好的演示方法是让学生编写一个应用程序，使用 a`threadpool`来计算素数，或者计算一些`integral`.

或者线程和共享内存的一个很好的例子是[生产者-消费者问题](https://en.wikipedia.org/wiki/Producer-consumer_problem)。

> 生产者-消费者问题（也称为有界缓冲区问题）是多进程同步问题的经典示例。
> 
> [![制片人](../Images/3f004153e6c95038c5e7a59613542e43.png)](https://i.stack.imgur.com/ousC3.gif)
> [（来源：[csusb.edu](http://cse.csusb.edu/tong/courses/cs460/images/producer-consumer.gif)）]

实现在[这里](https://www.doc.ic.ac.uk/~jnm/book/book_applets/TimedProducerConsumer.html)找到，还有来自软件[工程师 Jenz Dietrich](https://sites.google.com/site/jensdietrich/)教授的[Massey](https://www.massey.ac.nz)的实现。

对于分布式算法， [MapReduce](https://en.wikipedia.org/wiki/MapReduce)和[Hadoop](https://hadoop.apache.org/)是高度记录的分布式数据结构。对于分布式编程库，请查看[MPI（消息传递接口）](http://parallel.vub.ac.be/documentation/mpi/index.html)和[OpenMP](https://web.archive.org/web/20161107020950/http://openmp.org/wp/)（或C++ 的[Pragma](https://en.wikipedia.org/wiki/Preprocessor_directive)）。也有[并行的](https://www.mcs.anl.gov/~itf/dbpp/text/node35.html)[Dijkstra 最短路径算法](https://en.wikipedia.org/wiki/Dijkstra's_algorithm)的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T01:32:16.813

今天有三种做STM的好方法。

第一种方法是使用 gcc 并在 C 或 C++ 中进行 TM。从 gcc 4.7 开始，通过 -fgnu-tm 标志支持事务内存。gcc 维护者做了大量工作，从 4.9（主干）分支开始，您甚至可以使用硬件 TM（例如，Intel Haswell TSX）。[在http://justingottschlich.com/tm-specification-for-cv-1-1/](http://justingottschlich.com/tm-specification-for-c-v-1-1/)上有一个 TM 接口的规范草案，这不是太痛苦。您还可以从 TM 社区中找到 gcc 的 TM 用例（例如，参见 transact 2014 中的应用程序跟踪论文：http: [//transact2014.cse.lehigh.edu](http://transact2014.cse.lehigh.edu)）。

实现本身有点复杂，但这就是正确的。有很多关于可能出错的文献，尤其是在 C 或 C++ 等类型不安全的语言中。GCC 把所有这些事情都做对了。真的。

第二种方式是使用Java。你可以使用 DeuceSTM，它很容易扩展（类型安全使得 TM 实现更容易！），或者使用 Scala 的 STM 的 Akka 库。我更喜欢 Deuce，因为它更易于扩展且更易于使用（您只需将方法注释为 @Atomic，其余的由 Deuce 的 java 代理完成）。

第三种方法是使用 Scala。我在这个领域做的不多，但研究人员似乎喜欢 Akka。如果您隶属于并行/分布式类，您甚至可能已经在使用 Scala。

# javascript - 手动单击后如何以编程方式取消选中单选按钮？

> ID：15064176
> 
> 赞同：1
> 
> 时间：2013-02-25T09:51:00.650
> 
> 标签：javascript

表单上有单选按钮：

```
...
for ( $i = $data["figure"]["cnt"] / 2; $i < $data["figure"]["cnt"]; $i++) {
    $tabFields[4]['html'] .= '
        <td align="center">     
            <input type="radio" id="fig_"'.$i.' name="fig_code" value="' . $data["figure"][$i]["fig_code"] . '" onchange="verifier_usage_figure('. $data["figure"][$i]["fig_code"] .')" />
        </td>';
... 
```

在`verifier_usage_figure`功能中，我想在满足特定条件时取消选中单击的单选。如何编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:54:47.603

使用[JS Radio 选中的属性](http://www.w3schools.com/jsref/prop_radio_checked.asp)

```
document.getElementById("elementId").checked = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:57:48.607

编写包含 stmnt 的 javascript 函数
`document.getElementById("elementId").checked = false;`此函数必须在 verifier_usage_figure() 函数中包含此函数的调用 在这种情况下 "fig_"'.$i 必须用于代替 elementid 并确保将上述代码写入verifier_usage_figure()

# css - 链接 jQuery-UI/Kendo-UI 以对页面设计器中的元素进行实时更改

> ID：15064177
> 
> 赞同：0
> 
> 时间：2013-02-25T09:51:03.083
> 
> 标签：css, jquery-ui, kendo-ui, jquery-ui-dialog

如果标题不够清楚，我深表歉意。我正在开发一个用户可以设计页面的项目（类似于[Wix](http://www.wix.com)）。我正在继续某个开发人员未完成的项目。动作顺序是。

*   用户单击在页面上添加元素的链接（例如 textElement、图片、滑块...）
*   每个元素都有一个编辑按钮。单击打开一个对话框。
*   在对话框中有使用 Kendo-UI 绘制的滑块和颜色选择器。使用它们，用户可以更改元素的样式设置（例如字体颜色、背景颜色、字体大小...）

我现在想要的是在该元素上应用/显示更改。我有每个元素可用的 id。我可以绑定每个样式选择器并将更改实时应用于文本元素。但这似乎不是正确的选择，因为将来我们可能会在对话框中添加另一个样式选择器，这意味着添加用于绑定这个新选择器的代码。

我想知道的是，是否有替代或最好简单的方法来做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:40:24.550

与您遵循的基本思想分享一些代码，因为不清楚您做了什么。听起来您可以使用[MVVM](http://demos.kendoui.com/web/mvvm/index.html)框架功能来帮助您。

# jquery-mobile - jQueryMobile/引导程序/两者

> ID：15064181
> 
> 赞同：0
> 
> 时间：2013-02-25T09:51:12.140
> 
> 标签：jquery-mobile, twitter-bootstrap

今天我们得到了一个桌面系统版本，我们得到了一个带有 jQ​​ueryMobile 的版本。目标是只有一个用于台式机、平板电脑和手机的系统/页面。

我知道 bootstrap 是一个很好的 css/js 框架，而且它是响应式的。这将解决我们系统桌面版本的当今问题。

正如我所说，我们也有一个移动版本。但今天它给了我们一些“双重工作”。它是在网络表单中制作的。

我的想法是在桌面和移动设备上都使用引导程序。但我的老板喜欢 jQuerymobile 的外观和功能。我们相信我们的主要用户将是手机/平板电脑用户。那么最好的解决方案可能是重新制作 jquerymobile 页面并使用 MVC 构建它？

该系统的*主要*内容是让员工检查他们的计划，接受老板的工作建议等等......这是在日历中。此日历中将有更多功能。

Ofc 系统中还有一些其他的东西，但这个日历是最大的。

我的问题是我们将朝着什么方向发展。目标是为移动和桌面用户提供一个页面/系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:14:07.610

如果您使用的是 JqueryMobile，我通常会使用另一种 Windows 事件，但我已经在普通的 pc 浏览器中尝试过这些事件，它们往往可以正常工作。那么，为什么不基于 jquery mobile 构建系统，而只是根据谁通过代理请求发出请求来更改布局。

# mysql - MySQL 使用文件排序的慢速平均最小值最大值

> ID：15064182
> 
> 赞同：4
> 
> 时间：2013-02-25T09:51:15.417
> 
> 标签：mysql, query-optimization

我如何优化查询，它已经花费了大约 2 秒，“结果”表中有大约 500k 条记录，但我预计这个问题会增长到数十亿。

```
 SELECT
     hopcount, hop, round( avg( rtt ) , 2 ) AS avg, min( rtt ) AS min, max( rtt ) AS        max
FROM results
JOIN traces ON id = trace
WHERE target =9
AND rtt > -1
GROUP BY hop` 
```

解释输出：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra   
1   SIMPLE  traces  ref PRIMARY,fk_traces_1_idx fk_traces_1_idx 5   const   26333   Using where; Using temporary; Using filesort  
1   SIMPLE  results ref trace   trace   5   pinger.traces.id    7   Using where 
```

表：

```
CREATE TABLE IF NOT EXISTS `results` (
  `hop` int(11) DEFAULT NULL,
  `trace` int(11) DEFAULT NULL,
  `rtt` int(11) NOT NULL,
  `seq` int(11) NOT NULL,
  KEY `trace` (`trace`),
  KEY `fk_hops_id` (`hop`),
  KEY `seq` (`seq`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;  
    CREATE TABLE IF NOT EXISTS `traces` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `hopcount` smallint(6) NOT NULL,
  `target` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_traces_1_idx` (`target`,`id`,`time`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=52308; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:55:19.893

在 MySQL 中，`GROUP BY`意味着`ORDER BY`

要删除此隐式排序，请添加`ORDER BY NULL`

[这在SELECT 的 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/select.html)中提到

> 如果您使用 GROUP BY，则输出行将根据 GROUP BY 列进行排序，就好像您对相同的列有一个 ORDER BY。为了避免 GROUP BY 产生的排序开销，添加 ORDER BY NULL：

并且在[ORDER BY 优化中](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

# java - Ant 没有使用正确的 java 版本

> ID：15064183
> 
> 赞同：2
> 
> 时间：2013-02-25T09:51:16.077
> 
> 标签：java, eclipse, ant

我在安装了 Java jdk（和 jre）1.6 的 Unix 机器上通过 Eclipse Juno 生成了一个 ant 文件。在 Eclipse 之外运行 ant（build.xml 文件所在的位置）时，在该机器上，一切都很顺利。

现在，问题是当我尝试在另一台安装了 jdk 和 jre 1.6 的机器上运行 ant 时。这是我在另一台运行 RedHat 3 的机器上得到的结果（无法更改）：

```
> ant -version
Apache Ant version 1.5.2-23 compiled on November 12 2003

> java -version
java version "1.6.0_39"
Java(TM) SE Runtime Environment (build 1.6.0_39-b04)
Java HotSpot(TM) Client VM (build 20.14-b01, mixed mode, sharing)

> javac -version
javac 1.6.0_39

> ls -l `which java`
lrwxrwxrwx 1 root root   26 Feb 13 15:22 /usr/bin/java -> /usr/java/default/bin/java*

> ls -l `which javac`
lrwxrwxrwx 1 root root   27 Feb 13 15:22 /usr/bin/javac -> /usr/java/default/bin/javac*

> ls -l /usr/java
total 8
lrwxrwxrwx 1 root root   16 Nov  7 14:19 default -> /usr/java/latest
drwxr-xr-x 7 root root 4096 Feb 13 15:02 jdk1.6.0_39/
drwxr-xr-x 7 root root 4096 Nov  7 14:18 jre1.6.0_37/
lrwxrwxrwx 1 root root   21 Feb 13 15:03 latest -> /usr/java/jdk1.6.0_39

> echo $JAVA_HOME
/usr/java/jdk1.6.0_39/bin/java 
```

当我在 build.xml 文件中添加这一行时，我得到以下结果

```
build.xml:
<echo message="Java version: ${ant.java.version}"/>

> ant 
  [echo] Java version: 1.4 
```

和编译错误：

```
 [javac] ...InputManager.java:11: error: Invalid method declaration, method name required.
  [javac]    Map<Double, List<MyObject>> loadFile(File pSelectedFile)
  [javac]              ^
  [javac] ...InputManager.java:11: error: Class or interface declaration expected.
  [javac]    Map<Double, List<MyObject>> loadFile(File pSelectedFile)
  [javac]              ^
  [javac] ...InputManager.java:33: error: Invalid character '@' in input.
  [javac]    @Override
  [javac]           ^
... 
```

现在，问题是：我的 java 安装不正确吗？我对蚂蚁做错了吗？

下面是 build.xml 文件的快速摘录：

```
> vim build.xml

<project basedir="." default="build" name="myProject">
  <property environment="env"/>
  <property name="ECLIPSE_HOME" value="/opt/eclipse"/>  <!-- that is also where eclipse is on my 2nd machine -->
  <property name="debuglevel" value="source,lines,vars"/>
  <property name="target" value="1.6"/>
  <property name="source" value="1.6"/>
[some stuff]
  <target name="init">
    <mkdir dir="bin"/>
    <copy includeemptydirs="false" todir="bin">
      <fileset dir="src">
        <exclude name="**/*.java"/>
      </fileset>
    </copy>
  </target>
  <target depends="init" name="build-project">
    <echo message="Java version: ${ant.java.version}"/>
    <javac debug="true" debuglevel="${debuglevel}" destdir="bin" includeantruntime="false" source="${source}" target="${target}">
      <src path="src"/>
      <classpath refid="myProject.classpath"/>
    </javac>
  </target>
</project> 
```

欢迎帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:18:52.273

您的 ant 版本是针对旧版本的 java (2003) 编译的。Java 1.6 于 2006 年问世。我发现，您可以让 ant 在旧版本上运行，如下所示： http: [//www.coderanch.com/t/108814/tools/jdk-version-build-xml](http://www.coderanch.com/t/108814/tools/jdk-version-build-xml)：

> …………………………………………………………………………
> 
> > 如果 Ant 已针对 1.5 进行编译，那么您可以将构建任务修改为
> > 
> > `<javac source="1.4" target="1.4" ...>`...................... 但不是相反。所以我猜你需要一个更新版本的 Ant。

来自[http://ant.apache.org/faq.html#java-version](http://ant.apache.org/faq.html#java-version)

> Redhat ES 3.0 随 ant 1.5.2 一起安装。即使您将 PATH 和 ANT_HOME 变量正确设置为更高版本的 ant，您也将始终被迫使用预安装的版本。
> 
> 要在此操作系统上使用更高版本的 ant，您可以执行以下操作：

```
$ ant -version
Apache Ant version 1.5.2-23 compiled on November 12 2003
$ su -
# rpm -e ant ant-libs
# exit
$ hash -r
$ ant -version
Apache Ant version 1.6.2 compiled on July 16 2004 
```

# lotus-domino - Lotus Domino 创建数据库

> ID：15064185
> 
> 赞同：1
> 
> 时间：2013-02-25T09:51:20.800
> 
> 标签：lotus-domino

如何创建 Lotus Domino 数据库？我已经安装了 domino Designer 8.5、lotus admin 8.5 和 lotus server。我已经配置并启动了多米诺服务器。所以现在我需要创建数据库并用java连接到它。连接是第二部分，首先我需要了解如何创建这个数据库。在教程中，我看到我需要使用 domino developer 来做到这一点。但是domino developer中没有这样的功能。谁能告诉我，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:33:09.797

简短的回答：文件 - 应用程序 - 新建。

我建议您在 Notes/Domino 中查找有关应用程序开发主题的书籍和/或在线教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T15:26:04.077

有关使用 Java 编程 Domino 的精彩介绍，请参阅 Bob Balaban 的旧书 — 现在可以在他的博客上免费[获得](http://www.bobzblog.com/tuxedoguy.nsf/dx/programming-domino-with-java-final-flush)。是的，它很旧，但它非常非常好地涵盖了基本概念。（缺少的一个关键是 recycle() 方法，在他写这本书的时候还不存在，但它是绝对必要的。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T12:07:04.863

如何创建 Lotus Domino 数据库？

**从 Notes 客户端执行 File -> Application - New**

我已经安装了 domino Designer 8.5、lotus admin 8.5 和 lotus server。

****很好，你似乎准备好了****

 **我已经配置并启动了多米诺服务器。所以现在我需要创建数据库并用java连接到它。

**所以你已经在操作系统级别编写了一些 java 并且需要使用 Notes API 连接到笔记？第一步是阅读 notes.jar 和 ncso.jar。您知道 Notes 数据库是一个 Eclipse 项目吗？**

连接是第二部分，首先我需要了解如何创建这个数据库。在教程中，我看到我需要使用 domino developer 来做到这一点。但是domino developer中没有这样的功能。

*** 开发者客户端称为 Domino Designer，创建数据库不需要 Domino Designer，但如果要进行设计更改，则需要 Domino Designer。（顺便说一句。您提到您已经在上面安装了 Domino Designer）**

**Notes Domino 是一种客户端服务器解决方案。数据库可以在您的机器或服务器上本地。祝托马斯好运****

# javascript - 使用 Kinetic JS 框架重绘图像

> ID：15064190
> 
> 赞同：1
> 
> 时间：2013-02-25T09:51:43.967
> 
> 标签：javascript, html, canvas, html5-canvas, kineticjs

# 大纲

我的问题涉及 KineticJS 的使用，但在我提出问题之前 - 我将概述项目然后讨论我的问题。

## 任务

我的任务是创建一个调整大小的壁炉环绕，以便所述个人可以使用数字形式来改变环绕的大小，唯一真正应该改变的是它的高度中的门框（两边的腿）和顶部的壁炉架。

现在环绕需要由图像组成，因此它被分解为单独的元素，因此当图像的宽度被拉伸时，整个环绕不会。

我创建了画布并引用了我用于该项目的框架 KineticJs，以便从类似于 Adob​​e Flash 的易于使用的图层和舞台设计中受益。

## 问题

加载所需的所有图像后出现我的问题。我已经使用了一点 JQUERY 来调用函数来绘制环绕并在文档准备好后加载它的单独部分。

在那里，一旦用户与数字表单交互，我就有一个更改事件函数准备好调整环绕的大小。

问题是所有环绕变量都包含在一个名为 drawsomething() 的函数中

现在它们是该功能的本地我需要它们在另一个。

我知道我可能不得不重组我的代码才能让它工作。我只是不完全确定从哪里开始。

任何人都可以先指出我正确的方向吗？

```
 <!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Canvas Project Two</title>
<script type="text/javascript" src="kinetic-v4.3.2.min.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>

$(document).ready(function(){
    drawSomething();
    $("#slider").change(function(){

        redraw();

        });

    })

    function drawSomething(){

    var imageObj = new Image();
    var leftMantel = new Image();
    var rightMantel = new Image();
    var leftJamb = new Image();
    var rightJamb = new Image();
    var leftFoot = new Image();
    var rightFoot =  new Image();   

        imageObj.src = "octon_mantel.png";

    imageObj.onload = function(){

    var image = new Kinetic.Image
        ({
            x:450,
            y:150,
            width:280,
            height:117,
            image: imageObj
        });

            layer.add(image);
            layer.draw();
}

    leftMantel.onload = function(){
    var LeftMant = new Kinetic.Image({

            x:300,
            y:150,
            width:150,
            height:117,
            image: leftMantel

        }); 

        layer.add(LeftMant);
        layer.draw();
    }

    rightMantel.onload = function(){
    var RightMant = new Kinetic.Image({

            x:730,
            y:150,
            width:150,
            height:117,
            image: rightMantel

        });

        layer.add(RightMant);
        layer.draw();
            }

    rightJamb.onload = function(){      
    var RightJamb = new Kinetic.Image({

            x:732,
            y:267,
            width:105,
            height:200,
            image: rightJamb

        });     

        layer.add(RightJamb);
        layer.draw();
        }

    rightFoot.onload = function(){  
    var RightFoot = new Kinetic.Image({

            x:732,
            y:465,
            width:104,
            height:127,
            image: rightFoot

        }); 

        layer.add(RightFoot);
        layer.draw();
        }

    leftJamb.onload = function(){
    var LeftJamb = new Kinetic.Image({

            x:343,
            y:267,
            width:105,
            height:200,
            image: leftJamb

        });

        layer.add(LeftJamb);
        layer.draw();

            }

    leftFoot.onload = function(){   
    var LeftFoot = new Kinetic.Image({

            x:344,
            y:465,
            width:104,
            height:127,
            image: leftFoot

        }); 

        layer.add(LeftFoot);
        layer.draw();

        }

    //Image Location Declaration
    imageObj.src = "octon_mantel.png";
    leftMantel.src = "octon_mantel_left.png";
    rightMantel.src = "octon_mantel_right.png";
    rightJamb.src = "octon_jamb_right.png";
    rightFoot.src = "octon_foot_right.png";
    leftJamb.src = "octon_jamb_left.png";
    leftFoot.src = "octon_foot_left.png";

    }

function redraw(){

        alert("hey");

        }

</script>
<style>
body {
    background-color:#fff;
}
</style>
</head>

<body>

<form style="float:left; height:600px; margin-top:30px; margin-left:30px;">
  <fieldset style="height:600px; border:solid 2px black; border-radius:10px;">
    <legend style="font-size:18px; font-family:Arial, Helvetica, sans-serif; font-weight:bold;">Fireplace Surround</legend>
    <br/>
    Mantel width<br/>
    <input type="number" value="280" id="slider"/>
    <br/>
    <br/>
    Jamb Height<br/>
    <input type="number" value="200" id="jambheightSlider"/>
  </fieldset>
</form>
<div id="myCanvas"></div>
<script>

var stage = new Kinetic.Stage
({
    container: myCanvas,
    width:900,
    height: 700

});

    var layer = new Kinetic.Layer();
    stage.add(layer);

</script>
</body>
</html> 
```

问候

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:39:29.790

所以你有了

```
function drawSomething(){

var imageObj = new Image();
var leftMantel = new Image();
var rightMantel = new Image();
var leftJamb = new Image();
var rightJamb = new Image();
var leftFoot = new Image();
var rightFoot =  new Image();   
//.... Other stuff
} 
```

并且您希望变量的范围不是函数本身的本地变量。简单的修复/破解：

```
var imageObj;
var leftMantel;
var rightMantel;
var leftJamb;
var rightJamb;
var leftFoot;
var rightFoot;

function drawSomething(){
   imageObj = new Image();
   leftMantel = new Image();
   rightMantel = new Image();
   leftJamb = new Image();
   rightJamb = new Image();
   leftFoot = new Image();
   rightFoot =  new Image();   
   //.... Other stuff
} 
```

现在你的函数只是修改了现有的变量，这些变量可以在函数之外访问。

# java - 关于 @override 方法的 junit 测试用例

> ID：15064191
> 
> 赞同：0
> 
> 时间：2013-02-25T09:51:44.450
> 
> 标签：java, junit4

我正在研究 Junit 测试用例，评分方案基于代码的覆盖率。我在方法中遇到了一些@override 方法的问题，因为我似乎无法调用该方法。就像下面的例子一样。

```
public void showFollowersList(PagableResponseList<User> followers) {
  m_itemList.addListener(SWT.Resize, new Listener() {
  @Override
  public void handleEvent(Event arg0) {
    m_itemList.setLayoutData(new RowData(m_itemList.getBounds().width, 
                                         m_itemList.getBounds().height));
    m_rightFrame.layout();
    m_rightFrame.pack();
  }
});
}

addMouseTrackListener(new MouseTrackListener() {
  @Override
  public void mouseHover(MouseEvent arg0) {
  }

  @Override
  public void mouseExit(MouseEvent arg0) {
    Rectangle rect = HoverClickableComposite.this.getClientArea();
    if (!m_clicked && !rect.contains(arg0.x, arg0.y)) {
      setBackground(m_origColor);
    }
  } 
```

如何调用或覆盖诸如 handleEvent 、 mouseExit 和 mouseHover 之类的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:31:14.147

`showFollowersList`如果有帮助，我认为有人在使不可测试方面做得很好。这是故意的吗？

如果是这样，正确的答案实际上可能不是一组测试代码，而是一个非常低的覆盖分数和一个更改类以使其更具可测试性的建议列表......

目前测试它的唯一方法是设置，戳它，然后检查会发生什么。只有当您可以`handleEvent`在您的对象上触发调用，并且类上可以使用某些方法时，这才有效：`getList`，`getListenerCount`等。然后，类似于：

```
testObject.showFollowersList(followers);
// All that method does is add listener. So check that listener got added
assertEquals(1, testObject.getList().getListenerCount());

// Now check that inner handlers behave correctly
testObject.getList().fireEvent();
// This should have created a new RowData in the list
assertNotNull(testObject.getList().getLayoutData()); 
```

但是，如果您**没有**这些方法可用，那么添加它们并`List`仅仅为了单元测试而公开它们绝对不是一个好主意。

另一个问题是图形用户界面。您的单元测试将没有 GUI。因此，您`m_rightFrame`可能会为 null（即使不是，底层 AWT 类也将是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:00:47.970

它不是“方法内部”的方法，而是匿名类的方法。

通常，对于 SWT 或 Swing 编程，需要大量测试覆盖的是代码的功能（业务）方面，而不是脚手架（处理程序等）。

但是，如果这是必需的，至少有两种选择 -

1.  不要为处理程序使用匿名内部类 - 在同一个包中给它们命名。
2.  将类似 Powermock 的模拟框架与 JUnit 一起使用，并将模拟的 SWT 事件对象传递给调用处理程序，以便您进行覆盖。

# hadoop - 使用 Behemoth 和 map reduce 转换为 Tika 时配置对象时出错

> ID：15064194
> 
> 赞同：0
> 
> 时间：2013-02-25T09:51:57.163
> 
> 标签：hadoop, apache-tika, behemoth

我正在运行命令以使用[本教程中给出的 map reduce 将巨兽语料库转换为 tika](http://searchhub.org/2012/03/05/scaling-solr-indexing-with-solrcloud-hadoop-and-behemoth/)

我在执行此操作时遇到以下错误：

```
 13/02/25 14:44:00 INFO mapred.FileInputFormat: Total input paths to process : 1
13/02/25 14:44:01 INFO mapred.JobClient: Running job: job_201302251222_0017
13/02/25 14:44:02 INFO mapred.JobClient:  map 0% reduce 0%
13/02/25 14:44:09 INFO mapred.JobClient: Task Id : attempt_201302251222_0017_m_000000_0, Status : FAILED
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:387)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)
attempt_201302251222_0017_m_000001_0: log4j:WARN No appenders could be found for logger (org.apache.hadoop.hdfs.DFSClient).
attempt_201302251222_0017_m_000001_0: log4j:WARN Please initialize the log4j system properly.
13/02/25 14:44:14 INFO mapred.JobClient: Task Id : attempt_201302251222_0017_m_000001_1, Status : FAILED
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:387)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method) 
```

我无法理解确切的问题。可能的原因是什么？我是否需要将任何 jar 从 Behemoth/Tika 添加到 hadoop 工作目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:40:25.593

我有同样的问题。如[本页](https://groups.google.com/forum/?fromgroups=#!topic/digitalpebble/Gx5VZEB36yI)所述，该过程对我有所帮助。在我运行“mvn clean install”之后，tika 作业按照教程中的描述工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:27:57.470

您提到的教程已过时。请参阅[wiki 上的教程，](https://github.com/DigitalPebble/behemoth/wiki/tutorial)这是参考。日志没有提供任何有用的信息来说明问题可能是什么，但让 Behemoth 工作所需的只是每个模块的作业文件。如果您在服务器上运行 Hadoop，只需对作业文件使用 Hadoop 命令或为简单起见使用[巨兽脚本](https://github.com/DigitalPebble/behemoth/blob/master/behemoth)。顺便说一句，[DigitalPebble 邮件列表](http://groups.google.com/group/digitalpebble)将是一个更好的地方来询问有关 Behemoth 的问题

高温高压

朱利安

# sql - Access2007 SQL中的SWITCH函数

> ID：15064204
> 
> 赞同：0
> 
> 时间：2013-02-25T09:52:28.807
> 
> 标签：sql, ms-access, ms-access-2007

我正在使用此代码根据不同列中的值编辑表中的列，但由于某种原因，此代码不起作用！

```
UPDATE DB_Total
SET FORMAT =
SWITCH 
(Type LIKE "INT") THEN "###"
(Type LIKE "UINT") THEN "###"
(Type LIKE "DIGITAL") THEN "#" 
```

我需要更改什么才能使此代码正常工作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:56:34.010

我刚刚找到了正确的方法：

```
UPDATE DB_Total 
SET FORMAT = SWITCH(
     Type Like "INT","###",
     Type Like "UINT","###",
     Type Like "DIGITAL","#"); 
```

回答了我自己的问题以供将来参考和遇到同样问题的人！

# cocoa - 如何在 NSButton 上绘制右上角的圆角？

> ID：15064207
> 
> 赞同：3
> 
> 时间：2013-02-25T09:52:48.557
> 
> 标签：cocoa, nsbutton, nsbezierpath

有几种方法可以在 Cocoa 中绘制四个圆角，使用 CALayer 或 NSBezierPath。但是如何在 NSButton 上绘制一个圆角？

按钮的当前结构是：

```
NSButton *button = [[NSButton alloc] initWithFrame:NSMakeRect(0, 0, 50, 20)];
[button setTitle:@"My button"];
[button.cell setBackgroundColor:[NSColor grayColor]]; 
```

我想要做的是有一个半径为 10 的圆形右上角。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:02:09.050

**解决方案：**

覆盖`drawRect:`

```
CGFloat cornerRadius = 10;

NSBezierPath *path = [NSBezierPath bezierPath];

// Start drawing from upper left corner
[path moveToPoint:NSMakePoint(NSMinX(self.bounds), NSMinY(self.bounds))];

// Draw top border and a top-right rounded corner
NSPoint topRightCorner = NSMakePoint(NSMaxX(self.bounds), NSMinY(self.bounds));
[path lineToPoint:NSMakePoint(NSMaxX(self.bounds) - cornerRadius, NSMinY(self.bounds))];
[path curveToPoint:NSMakePoint(NSMaxX(self.bounds), NSMinY(self.bounds) + cornerRadius)
     controlPoint1:topRightCorner
     controlPoint2:topRightCorner];

// Draw right border, bottom border and left border
[path lineToPoint:NSMakePoint(NSMaxX(self.bounds), NSMaxY(self.bounds))];
[path lineToPoint:NSMakePoint(NSMinX(self.bounds), NSMaxY(self.bounds))];
[path lineToPoint:NSMakePoint(NSMinX(self.bounds), NSMinY(self.bounds))];

// Fill path
[[NSColor whiteColor] setFill];
[path fill]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:11:52.410

您需要使用 NSBezierPath 并根据您的要求绘制自定义按钮。

你需要做这样的事情：

```
NSBezierPath *path = [NSBezierPath bezierPath];
[path setLineWidth:1];
[path moveToPoint:NSMakePoint(0, 0)];

[path curveToPoint:NSMakePoint(width * 0.1, height)
     controlPoint1:NSMakePoint(width * 0.05, height)
     controlPoint2:NSMakePoint(width * 0.03, height * 0.05)]; 
```

依此类推...直到您制作一个封闭的按钮区域并获得精确的形状。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-25T16:32:51.017

基于 Christoffer [Christoffer 的方法](https://stackoverflow.com/a/15088631/3184888)，我创建了一个更通用的解决方案，您可以在其中选择要圆的角。它在 Swift 3 中，也适用于 macOS 和 iOS/tvOS。

你可以在这里找到 Swift Playground：[https ://github.com/janheiermann/BezierPath-Corners](https://github.com/janheiermann/BezierPath-Corners)

# node.js - Upstart 和 init.d 优先级

> ID：15064208
> 
> 赞同：3
> 
> 时间：2013-02-25T09:52:55.407
> 
> 标签：node.js, redis, upstart, foreman

我使用[工头](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)在生产服务器（ubuntu 服务器 12）上运行我的 node.js 应用程序。Foreman 有一个很棒的工具可以为新贵创建脚本。

问题是当我重新启动服务器时，我的应用程序（由工头管理）在 redis-server 之前启动，我必须构建一些技巧以等待有效连接。

理想的解决方案是先启动 redis-server，然后在所有启动后启动节点应用程序。

引导配置：

*   redis-server 由 /etc/init.d/redis-server 启动，是 /etc/rc2.d/S20redis-server
*   我的节点应用程序以 /etc/init/stocks-streamer*.conf 文件启动

我的问题是：您将如何更改我的节点应用程序的启动顺序？我想在我的应用程序启动之前等待 redis-server 但是当我这样做时，它不会启动：

```
start on (started redis-server) 
```

我想这是因为 init.d 脚本没有向 upstart 发送任何事件，但也许有一种我不知道的方法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:00:56.590

也许你应该让 redis 由 foreman 启动，这样你就可以更好地控制应用程序的所有依赖项。

或者确保工头比 redis 开始晚得多（确保 /etc/rc2.d 中的工头链接在 S20* 之后列出。

另一种选择：让 redis 服务器也由 upstart 启动，这可能有助于 upstart 管理依赖项。

这里有关于如何做到这一点的解释：[https ://gist.github.com/bdotdub/714533](https://gist.github.com/bdotdub/714533)

我建议改用“启动必须先于另一个服务”（[http://upstart.ubuntu.com/cookbook/#start-must-precede-another-service](http://upstart.ubuntu.com/cookbook/#start-must-precede-another-service)），以便在您启动自己的服务时启动redis。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T22:08:56.143

由于这个问题没有公认的答案，并且鉴于我在这里遇到了同样的问题，我想我会提供另一种解决方案。这个问题可以重新表述为：

*如何让新贵工作等待 init.d 脚本？*

正如 OP 在问题中所说，启动 init.d 脚本时可能会发出一个新贵事件。这样，新贵的工作可以有一个简单的`start on started SCRIPT_NAME`声明。

在我的例子中，使用基于 CentOS 的定制发行版，我`/etc/rc.d/rc`负责执行 sysvinit (init.d) 脚本。该脚本完全了解新贵，因此会为每个启动/停止的 sysvinit 脚本发出新贵事件。

换句话说，`/etc/rc.d/rc`脚本有这样的东西（简化为留下多汁的东西）：

```
for i in /etc/rc$runlevel.d/S* ; do
    subsys=${i#/etc/rc$runlevel.d/S??}
    initctl emit --quiet starting JOB=$subsys
    $i start
    initctl emit --quiet started JOB=$subsys
done 
```

我想您需要查看您的脚本并在您认为合适的地方添加事件发射。就我而言，排放已经存在。

你可以在一个新贵的工作中等待几个事件。有关如何找出可用事件的信息，请参阅[此问题（老实说，我还没有找到更好的文档）。](https://askubuntu.com/questions/28281/what-events-are-available-for-upstart)

特别是技巧`grep -r emit`似乎非常有用。

# batch-file - 如何从命令行刷新 IE？

> ID：15064213
> 
> 赞同：0
> 
> 时间：2013-02-25T09:53:14.477
> 
> 标签：batch-file, command-line

我们办公室有五台电视，显示用 .net 编写的本地网页。三位经理可以在一天中的任何时间更新此网页，以告知员工有关事件的信息。

问题是页面没有刷新——我可以远程进入并点击 f5，这没什么大不了的，但页面每小时更新 4 到 6 次。

我真正想要的是一个命令行脚本或批处理文件，它刷新即位于显示网页的电脑上 - 然后我可以在管理人员的电脑上添加一个快捷方式，在他们更新后，他们可以点击那个.

是否有命令行来刷新即或批处理文件？甚至是触发 f5 作为按键的命令行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:01:18.467

如果它在您的控制之下，如何构建对网页的刷新？例如，每分钟
`<meta http-equiv="refresh" content="60">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:40:13.740

是的，我肯定会去 autoit：

```
#include <IE.au3>

while (true)
    $oIE = _IEAttach("sample.html", "URL")
    _IEAction($oIE, "refresh")
    Sleep(60 * 1000) ;sleep for an hour
WEnd 
```

您也可以将脚本编译为独立的 exe

# asp.net-mvc - 打开搜索服务器：基本问题

> ID：15064216
> 
> 赞同：0
> 
> 时间：2013-02-25T09:53:26.287
> 
> 标签：asp.net-mvc, search, opensearch

我正在评估 OSS 以实现对中型 ASP.NET (MVC4) 网站的抓取、索引和搜索。

到目前为止，它看起来很有希望。

以下是一些我在文档中找不到的基本问题：

1.  德语变音：

    渲染器/搜索德语变音符号 'ä, ü, ö' 失败：

    `http://localhost:8080/renderer?use=haas&name=gSearch&query=küche`

    返回

    `"kÃ¼che in the search box with no results - there should be results in the index!"`

    （我用语言=德语创建了一个查询“gSearch”

2.  OSS 是否可以返回“...您的意思是...”之类的同义词，而无需手动插入每个可想到或不可想到的同义词？

3.  在 Schema->Parser_list-> HTML -> supported extensions 中添加“aspx”之前，我没有得到结果

    这是正确的 - 或者我应该为 ASP 添加另一个解析器 - ...我可以为 HTML、ASP、PDF...等提供多个解析器吗？

    完成 3 之后。我得到了结果 - aspx 和 pdf 文档......但我没有得到 PDF 文件的可点击链接（文件名）？

4.  从 MVC 调用搜索的最佳方法是什么？通过网络服务...？我不想包含 IFRAME

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:27:22.240

当几个不同的问题集中在一起时总是很麻烦，但这是我对第 4 点的看法：

我使用一个WebRequest，非常简单。

```
 var webRequest = WebRequest.Create("http://localhost:8080/select?use=haas&query=kitchen");
        webRequest.Timeout = 10000;
        WebResponse webResponse;

        try
        {
            webResponse = webRequest.GetResponse();
        }
        catch (WebException ex)
        {
            WriteToEventLog(ex.Message);
        }

        var xmlStream = webResponse.GetResponseStream();
        var reader = XmlReader.Create(xmlStream);
        var doc = XDocument.Load(reader, LoadOptions.PreserveWhitespace); 
```

然后，您将拥有一个 XML，其中包含在您的 OSS 索引查询中设置的返回字段。

# javascript - GoogleMaps / JS：我们如何使用街道地址列表填充 Google 地图？

> ID：15064221
> 
> 赞同：0
> 
> 时间：2013-02-25T09:53:49.733
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, street-address

**给定 JSON 数据，例如真实、唯一、有效地址的列表：**

```
var data = [
    { "address": "48 rue des Grands Moulins, 75013, Paris"},
    { "address": "12_rue_des_Grands_Moulins,_75013,_Paris"},
    { "address": "65_rue_des_Grands_Moulins,_75013,_Paris"},
    { "...": "..."},
    ]; 
```

这几百个地址中的每一个都足够详细，在地球上是独一无二的。

并**给定html，例如：**

```
<div id="map" style="height:40%;"></div> 
```

**如何使用这些数据创建并自动填充 Google 地图？** JSfiddle 赞赏。

[编辑：我的小提琴](http://jsfiddle.net/xp5vb/7/)的当前进展在这里。明天我会将数据迁移到 JSON 中并添加一个循环来迭代每个对象。

注意：使用街道地址，我们可以使用 JSON 格式获取 geoloc 信息：[此查询](http://maps.googleapis.com/maps/api/geocode/json?address=65_rue_des_Grands_Moulins,_75013,_Paris&sensor=false)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:18:20.713

类似的东西（未测试）；

```
var location, map, objectID;

objectID  = "dom-id";

// Your gMap
//
map       = new google.maps.Map( document.getElementById( objectID ), {} );

// Put the following lines in your loop
// 
geocoder.geocode({ "address" : the_address_to_map }, function( results, status )
{
    if ( status == google.maps.GeocoderStatus.OK )
    {
        var latitude         = results[ 0 ].geometry.location.lat()
        ,   longitude        = results[ 0 ].geometry.location.lng()
        ;

        location = new google.maps.LatLng( latitude, longitude );

        if( location ) 
        {
            var marker          = new google.maps.Marker(
            {
                position    : location,
                title       : "",
                // other settings
            });

            marker.setMap( map );
        }
    }
}); 
```

调用这个服务是有限制的。我以为每天有 2500 个请求，但你可以在你的 API 控制台中查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:38:08.117

```
geoCodeLookupLL: function(addressstring, markerTitle, markerListeners) { 

  this.geocoder = new GClientGeocoder(); 
  this.markerStreetAddr = addressstring; 
  var map = this.getMap(); // Existing Map Object

  this.geocoder.getLatLng(addressstring, 

      function(point,markerTitle) { 

      if (!point) { 

      }else{ 
        Ext.applyIf(markerTitle,G_DEFAULT_ICON);         

        var new_icon = new GIcon()  

        new_icon.image = "https://maps.gstatic.com/mapfiles/ms2/micons/green-dot.png"  
        new_icon.size = new GSize(16,16)  
        new_icon.iconAnchor = new GPoint(9,34)
        new_icon.infoWindowAnchor = new GPoint(9,2)
        new_icon.title = markerTitle

        var mark = new GMarker(point,new_icon); 

        map.addOverlay(mark); 

      }
    }) 
```

我在现有地图上使用地址作为新标记，因此是新图标对象。你也可以找到一些 V2 api 方法。

# javascript - 如何给 dhtmlx tabcontent 变量

> ID：15064223
> 
> 赞同：0
> 
> 时间：2013-02-25T09:54:00.753
> 
> 标签：javascript, asp.net, dhtmlx

我正在使用 DHTMLX 标签栏，我想在“%”中给出标签栏的宽度。我有一个拆分器，当我更改拆分器的位置时，标签内容区域的位置必须有所不同。

```
 <div id="rightTab"></div>
       var tabbar = new dhtmlXTabBar("rightTab", "right");
       tabbar.addTab("a1", "<span>Details</span>", "80px");
       tabbar.setContentHref("a1", "../../Home/Index/"); 
```

我的拆分器中有这个标签栏。我在 (%) 中给出了高度和宽度，但它没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T15:27:01.023

您需要更改 div id "rightTab" 的大小 - 标签栏将随其父容器一起调整大小。

# java - Android聊天服务器-客户端源或实现方式

> ID：15064225
> 
> 赞同：0
> 
> 时间：2013-02-25T09:54:08.680
> 
> 标签：java, android, chat

我需要进行简单的一对一聊天。我认为唯一的方法是：

来自 Client1 的文本

> 客户端1->服务器->客户端2

来自客户 2 的回答：

> 客户端 2 -> 服务器 -> 客户端 1

我找到了一些源代码，但我不知道如何在我的服务器上执行。我应该使用 tomcat 部署它还是使用简单的 php 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:08:42.467

我使用[Node.js](http://nodejs.org/)和[Socket.IO](http://socket.io/)作为聊天服务器。Websockets 比长轮询更好（更快，资源消耗更少）。

你也可以用 PHP 来做，但我认为这不是最好的解决方案，因为 HTTP 协议不是为允许`Server->Client`事件而设计的。它的设计目的只是为了回答客户的请求。

# android - Android：如何为微调器项目提供替代颜色

> ID：15064227
> 
> 赞同：1
> 
> 时间：2013-02-25T09:54:15.550
> 
> 标签：android, android-spinner

我有一个带有以下物品的微调器

```
ArrayAdapter<Message> arrayadapter = new ArrayAdapter<Message>(activity, android.R.layout.simple_spinner_item, messages);
                arrayadapter.setDropDownViewResource(R.layout.textview); 
```

我想给列表项提供不同的颜色。我该怎么做。感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:24:20.067

您可以使用

```
ArrayAdapter<CharSequence> adapter =
    new ArrayAdapter(this, R.layout.simple_spinner_item, myList) {
    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        View view = super.getDropDownView(position, convertView, parent);
        if (position % 2 == 0) { // we're on an even row
           view.setBackgroundColor(evenColor);
        } else {
           view.setBackgroundColor(oddColor);
        }
       return view;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:35:10.557

以下链接可能有助于创建您选择的自定义微调器。

1) [http://adanware.blogspot.in/2012/03/android-custom-spinner-with-custom.html](http://adanware.blogspot.in/2012/03/android-custom-spinner-with-custom.html)
2) [http://www.edureka.in/blog/custom-spinner-in-android/](http://www.edureka.in/blog/custom-spinner-in-android/)
3 ) [Android Spinner 具有不同的“下拉状态”和“关闭状态”布局？](https://stackoverflow.com/questions/4647299/android-spinner-with-different-layouts-for-drop-down-state-and-closed-state)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:37:38.723

您好，您可以使用以下代码

```
 @Override
       public View getDropDownView(int position, View convertView, ViewGroup parent){
            View v = convertView;
            if (v == null) {
               Context mContext = this.getContext();
               LayoutInflater vi = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);
         } 
    TextView tv=(TextView) v.findViewById(R.id.spinnerTarget);
    tv.setText(testarray.get(position));
    switch (position) {
    case 0:  tv.setTextColor(Color.RED);  
    break; 
    case 1:  tv.setTextColor(Color.BLUE);
    break;
    default:  tv.setTextColor(Color.BLACK);
    break;
    }
return v;  
              }              
       };     
       pSpinner.setAdapter(spinnerAdapter); 
} 
```

# angularjs - angularJS 中的数据绑定未更新 - UI 未显示 $scope 变量的更改

> ID：15064233
> 
> 赞同：0
> 
> 时间：2013-02-25T09:54:26.057
> 
> 标签：angularjs

我遇到了 AngularJS 的问题，我在自定义服务上使用回调，以便将数据从一个控制器传递到另一个控制器。

特别是，我正在尝试创建一个非常简单的日志记录服务，其中一个控制器向该服务注册一个侦听器函数，以便在记录消息时接收更新，而另一个控制器在单击 UI 中的按钮时记录一条消息（触发第一个控制器中的侦听器）。

侦听器函数然后更新一个`$scope.messages`变量以在 UI 中显示新记录的消息。但是，当新到达的消息到达侦听器函数时，UI 不会更新。

我相信这是因为 AngularJS 不知道`$scope.messages`正在更新。但是，尝试包装 with 的更新`$scope.messages`并`$scope.$apply`没有带来任何效果`($apply already in progress)`。

HTML 代码：

```
<div ng-app="myApp">
    <div ng-controller="ButtonCtrl">
        <button type="button" ng-click="logMessage()">Button</button>
    </div>
    <div id="console" ng-controller="ConsoleCtrl">
         <div ng-repeat="consoleItem in messages">{{consoleItem.message}}</div>
    </div>
</div> 
```

Javascript代码：

```
var module = angular.module('myApp', []);

module.factory('MyConsole', function($rootScope) {
    var listeners = [];
    var myConsoleService = {};

    myConsoleService.log = function(messageObj) {
      angular.forEach(listeners, function(listener){
             listener(messageObj);
      });
   };

   myConsoleService.registerListener = function(listener) {
      listeners.push(listener);
   };

  return myConsoleService;
});

function ConsoleCtrl($scope, MyConsole){
    $scope.messages = [{"message":"First message!"}];
    MyConsole.registerListener( function(msgObj){
       // while this console.log call below works as expected, the $scope.messages.unshift call does not update the view
       $scope.messages.unshift(msgObj.message);
       console.log($scope.messages);
    });
}

function ButtonCtrl($scope, MyConsole) {
     $scope.logMessage = function () {
        MyConsole.log({message:"myLogmessage"});
     };
} 
```

为了您的方便，也可以在 JSFiddle 上找到代码：http: [//jsfiddle.net/G5LAY/3/](http://jsfiddle.net/G5LAY/3/)

任何帮助将不胜感激 ：-）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:03:38.977

您的代码正在运行，只是这一行：`$scope.messages.unshift(msgObj.message);`仅将消息字符串添加到`$scope.messages`您的模板期望`$scope.messages`成为对象列表时。因此，将其更改为`$scope.messages.unshift(msgObj);`应该可以解决问题。

# java - ISODateTimeFormat 格式化程序在高并发下是否有效？

> ID：15064235
> 
> 赞同：1
> 
> 时间：2013-02-25T09:54:35.207
> 
> 标签：java, performance, concurrency, jodatime

从[javadocs](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)中，明确指定

> ISODateTimeFormat 是线程安全且不可变的，它返回的格式化程序也是如此。

但是，尚不清楚实例是否有望在高并发下表现良好。是否有任何同步点或锁争用点？如果我希望有数百个（或数千个）线程执行 DateTime 解析和格式化，最好为每个线程提供自己的 DateTimeFormatter 实例，或者我是否可以通过在所有线程之间共享相同的实例来期望相同的性能（使用节省一点内存的额外好处）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:45:49.463

对 Joda 代码库的快速扫描表明，您不应该对使用相同的多个线程有任何问题，`DateTimeFormatter`因为其中没有同步的方法。Joda 中的同步主要存在于创建者的缓存访问方法中。当然，如果您的服务器具有足够的内核来测试具有这么多线程的情况，那么建立一个基准来确认它应该是微不足道的。

# git - 向邮件列表提交大量补丁集

> ID：15064237
> 
> 赞同：2
> 
> 时间：2013-02-25T09:54:36.893
> 
> 标签：git, linux-kernel

我有一个支持新 ARM 平台的 Linux 存储库，我想将其发布到 ARM 内核开发邮件列表中以获得一些反馈，并希望最终成为主流。不幸的是，有很多代码并`git format-patch`吐出大约 100 个补丁文件。

我读到最好将它们组合在一起进行逻辑更改，但对于新的 ARM 平台，每个部分都与下一个部分一样重要。我能做的最多可能是将基本平台支持代码与驱动程序代码分开。

此外，我之前的提交包含非常模糊的提交消息，例如*修复重启代码*或其他*修复*，我不希望将其包含在补丁集中。

在不炸毁邮件列表的情况下，让我的更改得到传达的最佳方式是什么？我应该把它压成一个巨大的补丁吗？不知何故，我认为发送 100 个补丁文件也不会给人留下良好的第一印象。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:44:37.907

我建议您针对当前的主线内核（目前是 v3.8）进行交互式变基。这将类似于以下内容：

```
git rebase -i origin/v3.8 
```

在可能的情况下，将相关的提交压缩在一起，例如，您可能应该为每个驱动程序提交一个提交，为核心代码的每个逻辑部分提交一个提交，如果它们相互依赖也没关系，尽管它不应该是循环的。您不需要在开发过程中保留所有错误修复，目标是使补丁易于理解和集成，而不是让它们讲述历史上准确的故事。

如果您需要拆分现有提交，您可以选择`edit`然后执行 a `git add -p`，这将允许您以交互方式选择 diff hunks 并一次提交一个（在此之后，您可以随时返回重新排序并在必要时压缩）。

完成此操作后，您应该拥有一个更容易让人们理解的补丁集（并希望有有用的评论）。我建议您为核心部分（即 1/n、2/n、3/n...）生成一个补丁集，不包括驱动程序，然后先提交。一旦你处理了这个问题，你就可以开始推动司机了。

# c++ - 具有不同返回类型的函数覆盖

> ID：15064247
> 
> 赞同：5
> 
> 时间：2013-02-25T09:55:07.930
> 
> 标签：c++, overriding, return-type

返回类型是否影响函数覆盖？（据我所知，返回类型不是函数/方法签名的一部分）在基类中，我有一个函数，它不获取参数，返回`int`并且是纯虚拟的。在每个派生类中，我为返回类型定义了一个枚举。该函数在派生类中被覆盖，即它具有相同的签名但不同的行为。问题是：重写和返回类型不是函数重写的一部分是否合法？

*代码示例：*

```
class Base
{
  public:
  typedef int ret;
  virtual ret method() = 0;
};

class Der1
{
public:
  enum ret1{
    ret1_0,
    ret1_1
  };
  ret1 method() { return ret1_1;}
};

class Der1
{
public:
  enum ret2{
    ret2_0,
    ret2_1
  };
  ret1 method() { return ret2_0;}
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:58:26.470

您可以覆盖具有不同返回类型的函数，但只允许**协变返回类型**。

函数覆盖意味着在运行时将调用基类方法或派生类方法，具体取决于指针指向的实际对象。
这意味着：
即：可以调用基类方法的每个地方都可以通过调用派生类方法来代替，而无需更改调用代码。

为了实现这一点，唯一可能的方法是将覆盖虚拟方法的返回类型限制为返回与基类相同的类型或从该类派生的类型（协变返回类型），因此标准强制执行此条件。

如果没有这种情况，现有代码将因添加新功能（新的覆盖功能）而中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T10:04:15.070

简短的回答：不，这是不允许的，或者最好说它不是覆盖而是*覆盖*，即您不是覆盖`Base::method()`而是创建一个具有相同名称的新方法。大多数编译器都会警告你。使用您的示例代码，但假设它`Base::method`不是*纯*虚拟的，请考虑：

```
void callMethod(Base const& b)
{
  auto a1 = b.method();  //what should the type of a1 be? -> it's int. Every time.
  std::cout << a1 << '\n';
}

int main()
{
  Der1 d1;
  auto a2 = d1.method(); //a2 is ret1_1 of type ret1
  callMethod(d1);        //calls Base::method and prints that int, not Der1::method
} 
```

你是对的，返回类型不是函数签名的一部分。但是当覆盖虚函数时，签名并不是最重要的。**§10.3,7**明确指出：

> 覆盖函数的返回类型应与被覆盖函数的返回类型相同或与函数的类*协变*。如果函数`D::f`覆盖函数 `B::f`，则函数的返回类型如果满足以下条件，则它们是协变的：
> 
> — 都是类的指针，都是类的左值引用，或者都是类的右值引用
> 
> — 返回类型中的类与返回类型中`B::f`的类相同`D::f`，或者是返回类型中的类的明确且可访问的直接或间接基类`D::f`
> 
> — both pointers or references have the same cv-qualification and the class type in the return type of `D::f` has the same cv-qualification as or less cv-qualification than the class type in the return type of `B::f`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:00:58.267

你所拥有的不是覆盖。

c++ 支持原始指针和原始引用的协变返回类型。

但仅此而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T10:03:11.323

我们不应该通过覆盖来改变基类中函数的返回类型。不建议通过隐藏基成员来更改返回类型，因为它会导致无法以多态方式使用的奇怪东西。

# firefox - Tibco AMX 管理员：登录后为空页面

> ID：15064249
> 
> 赞同：0
> 
> 时间：2013-02-25T09:55:08.593
> 
> 标签：firefox, console, admin, tibco

我在使用 Tibco Active Matrix 管理员控制台和 Firefox 时遇到问题。登录后，我得到一个空白页面。几天前我没有这个问题，看起来我在 Firefox 中没有改变任何东西。有没有人也有这个问题以及它是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:14:12.737

几个月前我也遇到过同样的问题。我要解决的问题是我注意到我的 FireFox 浏览器上有一个插件更新，我觉得这阻碍了管理页面的加载。我刚刚删除了更新的插件并清除了我的 cookie。它在重新启动浏览器和我的机器后不久就工作了。希望这可以帮助

# css - CSS：滚动条右侧的排水沟

> ID：15064250
> 
> 赞同：3
> 
> 时间：2013-02-25T09:55:10.167
> 
> 标签：css

我的页面中间有一个不错的 div。顶部有一个菜单 div。在左边有另一个 div。

div 有边距，因此它们之间有很好的排水沟。到现在为止还挺好。

唯一的问题是，如果我在页面中间的 div 在内容中增长，则会出现一个滚动条（这没关系），但我想要的是在 div 和滚动条之间有一个排水沟？是否可以 ？

```
+-----------+  ^   (see gap 20px between scrollbar and div)
|           |  |
|           |  | 
|           |  |
|           |  |
|           |  |
|           |  |
+-----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:20:23.653

您可以制作一个具有滚动条（属性）的外部容器，`overflow-y`并放置一个具有所需背景的较小内容容器，因此内部元素和外部滚动条之间的间隙模拟了一个排水沟：

**HTML**

```
<div class="outer">
    <div class="inner">
       <!-- content goes here -->
    </div>
</div> 
```

**CSS**

```
.outer {
  width:80%;
  height:150px;
  overflow-y:scroll;
}

.inner {
  width:95%;
  background:White;
} 
```

[**演示**](http://jsbin.com/ikedow/1/edit)

您还可以通过将 替换为`width:95%`一个`margin-right`值来固定装订线的宽度，例如：

```
margin-right:20px; /*20px gap between inner and scrollbar*/ 
```

[**演示**](http://jsbin.com/ikedow/5/edit)

* * *

[`background-clip`](https://developer.mozilla.org/en-US/docs/CSS/background-clip)也可以使用设置为的属性并将`content-box`一些添加到元素中，使用单个元素来重现它`padding-right`：

```
.content {
  width:80%;
  height:150px;
  overflow-y:scroll;
  background:white;
  background-clip: content-box;
  padding-right:40px;
} 
```

[**演示**](http://jsbin.com/ikedow/10/edit)

虽然没有 IE<=8 支持这种方法。此外，该`padding`值应包括滚动条的宽度，否则，使用非常低的填充值会使装订线隐藏在滚动条下方。如果额外的填充破坏了您的布局，您可以将[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)属性设置为`border-box`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:59:01.680

div 需要一个`padding-right:20px;`，以便滚动条和内容之间的空间变为 20px。

**[看看这个](http://jsfiddle.net/5Gt8v/)**

```
div
{
    overflow-y:auto;
    width:100px;
    height:100px;
    padding-right:20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:00:23.673

尝试使用自定义滚动条，像[这样](http://baijs.nl/tinyscrollbar/)，这样你就有更多的选择来自定义它

# sql-server - 我可以强制报告到一个长的、可滚动的页面上吗

> ID：15064251
> 
> 赞同：2
> 
> 时间：2013-02-25T09:55:17.197
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2

我想将一个 8 页的报告强制到一个页面上。

所以现在的情况是这样的： ![在此处输入图像描述](../Images/c0b76331c9c7402b3443e710cd38a32a.png)

明天报告可能只有 6 页长 - 或者可能只有 9 页，但我想强制报告始终呈现在 1 页上。

这显然是一个长页面，但用户只需向下滚动页面即可。

这可能吗？
我可以开箱即用地实现它还是更多地参与？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:00:40.553

是的你可以。

在报告属性中设置`InteractiveSize`->`Height`为 0（这会强制显示在一页上）

可以在这里找到：1) 转到查看选项卡 -> 签入属性 2)`InteractiveSize`在出现的窗口中 搜索![在此处输入图像描述](../Images/7af12c3479fcc7c55ed82d1140ebb269.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:00:31.477

是的，这是可能的 - 将报告`InteractiveSize`->`Height`属性设置为**0cm**。

您仍然可以将`PageSize`属性设置为打印时所需的页面大小。

# java - Java邮箱阅读器

> ID：15064256
> 
> 赞同：0
> 
> 时间：2013-02-25T09:55:34.017
> 
> 标签：java, jakarta-mail, exchangewebservices

我正在尝试阅读来自 microsoft exchange server 的电子邮件，所以我向管理员询问了详细信息，他并不完全确定，但给了我这些详细信息，

```
ab-mbx01 = server
ag 07 = storage group
ab-mbx01 DB01 S1000 = Database/DatabaseName
ab-mbx01.de.domain.com = mailbox server. 
```

所以我使用邮箱服务器作为主机并尝试使用 EWS java api 进行连接，但我收到错误说连接被拒绝。

谁能告诉我，我应该使用在代码中插入其他详细信息以及如何在代码中插入它们吗？

谢谢你。

代码：

```
ExchangeService service = new ExchangeService();
    ExchangeCredentials credentials = new WebCredentials("username", "password");
    service.setCredentials(credentials);
    service.setUrl(new java.net.URI("https://" + "mailbox server"
            + "/EWS/Exchange.asmx"));
    service.setTraceEnabled(true);

    //IF connected view items
    ItemView view = new ItemView(10);
    view.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Ascending);
    view.setPropertySet(new PropertySet(BasePropertySet.IdOnly, ItemSchema.Subject,
            ItemSchema.DateTimeReceived));

    FindItemsResults<Item> findResults = service.findItems(WellKnownFolderName.Inbox, new SearchFilter.SearchFilterCollection(
    LogicalOperator.Or, new SearchFilter.ContainsSubstring(ItemSchema.Subject, "EWS"), 
    new SearchFilter.ContainsSubstring(ItemSchema.Subject, "API")),view);

    System.out.println("Total number of items found: " + findResults.getTotalCount());

    for (Item item : findResults)
            {
                    System.out.println(item.getSubject());
                    System.out.println(item.getBody());
                    // Do something with the item.
            } 
```

使用 JavaMail Api 我使用了相同的代码

```
http://www.javaplex.com/blog/using-javamail-api-read-emails-from-gmail/ 
```

# macos - 在 Mac 上构建 GLSDK - 未找到 platform.h

> ID：15064257
> 
> 赞同：4
> 
> 时间：2013-02-25T09:55:39.607
> 
> 标签：macos, opengl, glfw

我正在尝试在 mac 上构建 GLSDK。我下载了源代码，`premake4 xcode3`它为 xcode 创建了所有项目文件。现在我正在尝试构建所有东西，设法构建 glload、glimg、glutil、glmesh 就好了，我已经从 XQuartz 包中获得了 freeglut，所以我想我不需要构建 glsdk 中包含的那个。

当我尝试构建 glfw 时，问题就开始了：

```
Wojciechs-MacBook-Air:glfw wojciechmusialkiewicz$ xcodebuild
=== BUILD NATIVE TARGET glfw OF PROJECT glfw WITH THE DEFAULT CONFIGURATION (Debug) ===
Check dependencies

CompileC obj/Debug/glfw.build/Objects-normal/x86_64/enable.o lib/enable.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch x86_64 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -D_CRT_SECURE_NO_WARNINGS -D_SCL_SECURE_NO_WARNINGS -D_LIB -D_DEBUG -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -g -Wno-sign-conversion -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-generated-files.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-own-target-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-all-target-headers.hmap -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-project-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library/include -Iinclude -Ilib -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources/x86_64 -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources -F/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library -MMD -MT dependencies -MF /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/enable.d --serialize-diagnostics /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/enable.dia -c /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/enable.c -o /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/enable.o
In file included from /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/enable.c:31:
lib/internal.h:92:10: fatal error: 'platform.h' file not found
#include "platform.h"
         ^
1 error generated.

CompileC obj/Debug/glfw.build/Objects-normal/x86_64/glext.o lib/glext.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch x86_64 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -D_CRT_SECURE_NO_WARNINGS -D_SCL_SECURE_NO_WARNINGS -D_LIB -D_DEBUG -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -g -Wno-sign-conversion -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-generated-files.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-own-target-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-all-target-headers.hmap -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-project-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library/include -Iinclude -Ilib -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources/x86_64 -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources -F/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library -MMD -MT dependencies -MF /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/glext.d --serialize-diagnostics /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/glext.dia -c /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/glext.c -o /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/glext.o
In file included from /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/glext.c:31:
lib/internal.h:92:10: fatal error: 'platform.h' file not found
#include "platform.h"
         ^
1 error generated.

CompileC obj/Debug/glfw.build/Objects-normal/x86_64/image.o lib/image.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch x86_64 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -D_CRT_SECURE_NO_WARNINGS -D_SCL_SECURE_NO_WARNINGS -D_LIB -D_DEBUG -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -g -Wno-sign-conversion -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-generated-files.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-own-target-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-all-target-headers.hmap -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-project-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library/include -Iinclude -Ilib -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources/x86_64 -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources -F/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library -MMD -MT dependencies -MF /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/image.d --serialize-diagnostics /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/image.dia -c /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/image.c -o /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/image.o
In file included from /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/image.c:56:
lib/internal.h:92:10: fatal error: 'platform.h' file not found
#include "platform.h"
         ^
1 error generated.

CompileC obj/Debug/glfw.build/Objects-normal/x86_64/fullscreen.o lib/fullscreen.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch x86_64 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -D_CRT_SECURE_NO_WARNINGS -D_SCL_SECURE_NO_WARNINGS -D_LIB -D_DEBUG -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -g -Wno-sign-conversion -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-generated-files.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-own-target-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-all-target-headers.hmap -iquote /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/glfwD-project-headers.hmap -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library/include -Iinclude -Ilib -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources/x86_64 -I/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/DerivedSources -F/Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/library -MMD -MT dependencies -MF /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/fullscreen.d --serialize-diagnostics /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/fullscreen.dia -c /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/fullscreen.c -o /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/obj/Debug/glfw.build/Objects-normal/x86_64/fullscreen.o
In file included from /Users/wojciechmusialkiewicz/glsdk_0.4.4/glfw/lib/fullscreen.c:31:
lib/internal.h:92:10: fatal error: 'platform.h' file not found
#include "platform.h"
         ^
1 error generated.

** BUILD FAILED **

The following build commands failed:
    CompileC obj/Debug/glfw.build/Objects-normal/x86_64/enable.o lib/enable.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC obj/Debug/glfw.build/Objects-normal/x86_64/glext.o lib/glext.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC obj/Debug/glfw.build/Objects-normal/x86_64/image.o lib/image.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC obj/Debug/glfw.build/Objects-normal/x86_64/fullscreen.o lib/fullscreen.c normal x86_64 c com.apple.compilers.llvm.clang.1_0.compiler
(4 failures) 
```

我试过用谷歌搜索这个`platform.h`文件是什么，但没有明确的答案，即使它存在于 MacOS 上也没有——我在我的电脑上找不到它，所以我猜它不是。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-09T17:24:54.387

文件夹中有一个`glfw.lua`文件`glfw`。打开它并为“ **macosx** ”进行配置，然后将目录“ `lib/cocoa`”添加到包含目录。我还定义了`_GLFW_COCOA`,`_GLFW_NSGL`和`_GLFW_USE_OPENGL`

# ios - 如何将 UIButton 连接到 HTML 按钮？

> ID：15064259
> 
> 赞同：0
> 
> 时间：2013-02-25T09:55:45.433
> 
> 标签：ios

这是代码`HTML`：

```
<input name="nextbtn" type="button" value="Next(N)" onclick="validate( this.name )" accesskey="N" > 
```

这是`onClick(button)`事件`HTML`，我希望当我按下我`UI`的**Objective-C**代码中的按钮时触发此验证功能。

我正在使用**IBAction**并将其连接到`UIButton`，有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:00:42.503

调用`stringByEvaluatingJavaScriptFromString`您正在处理的 webview。

# java - 您是否应该在 server.xml 或 context.xml 中设置数据库连接属性

> ID：15064260
> 
> 赞同：82
> 
> 时间：2013-02-25T09:55:44.713
> 
> 标签：java, spring, datasource, jndi

我正在尝试使用 JNDI 为 Spring Web 应用程序设置数据库连接属性。

我正在考虑以下两种方法：

**方法一：**

在你的 Spring 配置中，你可能有类似的东西：

```
<jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/facs"/> 
```

然后在您的 webapp /META-INF/context.xml 文件中，您也应该有类似的内容：

```
<?xml version='1.0' encoding='utf-8'?>

<!-- antiResourceLocking="true" -->
<Context path="/podd-apn"
         reloadable="true"
         cachingAllowed="false"
         antiResourceLocking="true"
         >

  <Resource name="jdbc/facs"              
            type="javax.sql.DataSource" username="${database.username}" password="${database.password}"
            driverClassName="org.postgresql.Driver" 
            url="${database.url}"
            maxActive="8" maxIdle="4"
            global="jdbc/facs" 
            />

</Context> 
```

在你的 web.xml 你应该是这样的：

```
<!-- JNDI -->
  <resource-ref>
    <description>FACs Datasource</description>
    <res-ref-name>jdbc/facs</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

**方法二：**

在 Spring 上下文中设置如下：

```
<jee:jndi-lookup id="dbDataSource"
   jndi-name="jdbc/DatabaseName"
   expected-type="javax.sql.DataSource" /> 
```

您可以使用以下方式在 Tomcat 的 server.xml 中声明 JNDI 资源：

```
<GlobalNamingResources>
  <Resource name="jdbc/DatabaseName" auth="Container" type="javax.sql.DataSource"
              username="dbUsername" password="dbPasswd"
              url="jdbc:postgresql://localhost/dbname"
              driverClassName="org.postgresql.Driver"
              initialSize="5" maxWait="5000"
              maxActive="120" maxIdle="5"
              validationQuery="select 1"
              poolPreparedStatements="true"/>
</GlobalNamingResources/> 
```

并从 Tomcat 的 web context.xml 中引用 JNDI 资源，如下所示：

```
<ResourceLink name="jdbc/DatabaseName"
   global="jdbc/DatabaseName"
   type="javax.sql.DataSource"/> 
```

我的问题是保存数据库属性的最佳位置在哪里？它们应该放在**server.xml**还是**context.xml**中？

另外，如果我有 2 个数据库，我应该使用两个配置吗？

此外，最好将它们直接放在 server.xml 或 context.xml 中吗？还是我需要通过 Tomcat Manager GUI 控制台进行配置？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-04-29T15:24:32.980

我更喜欢第三种方法，它从 [user1016403 描述的](https://stackoverflow.com/questions/15064260/tomcat-jndi-configuration-best-practice)**方法 1**和**方法 2** 中获得最佳效果。

# 方法 3

1.  将数据库属性保存在`server.xml`
2.  从 Web 应用程序引用`server.xml`数据库属性`META-INF/context.xml`

## 方法 3 的好处

虽然第一点出于安全原因很有用，但第二点对于从 Web 应用程序引用服务器属性值很有用，即使服务器属性值会发生变化。

此外，将服务器上的资源定义与 Web 应用程序的使用分离，使得这种配置可以在具有各种复杂性的组织之间扩展，其中不同的团队在不同的层/层上工作：如果管理员共享相同的内容，服务器管理员团队可以在不与开发人员团队冲突的情况下工作JNDI 名称与每个资源的开发人员。

## 方法 3 实施

定义 JNDI 名称`jdbc/ApplicationContext_DatabaseName`。

`jdbc/ApplicationContext_DatabaseName`在 Tomcat 中声明的各种属性和值，`server.xml`如下所示：

```
<GlobalNamingResources>
  <Resource name="jdbc/ApplicationContext_DatabaseName" auth="Container" type="javax.sql.DataSource"
              username="dbUsername" password="dbPasswd"
              url="jdbc:postgresql://localhost/dbname"
              driverClassName="org.postgresql.Driver"
              initialSize="5" maxWait="5000"
              maxActive="120" maxIdle="5"
              validationQuery="select 1"
              poolPreparedStatements="true"/>
</GlobalNamingResources/> 
```

通过属性中指定的应用程序私有 JNDI 上下文链接`jdbc/ApplicationContext_DatabaseName`来自 Web 应用程序的属性：`META-INF/context.xml``java:comp/env/``name`

```
<Context path="/ApplicationContext" ... >
  <!--
    "global" attribute links to GlobalNamingResources in the ${catalina.base}/conf/server.xml (server administrator team)
    "name" attribute is relative to the application-private JNDI context java:comp/env/ and is looked up from the java web application (application developer team)
  -->
  <ResourceLink global="jdbc/ApplicationContext_DatabaseName" name="jdbc/DatabaseName" type="javax.sql.DataSource"/>
</Context> 
```

最后，为了使用 JNDI 资源，`jdbc/DatabaseName`在 Web 应用程序的部署描述符中指定 JNDI 名称：

```
<resource-ref>
    <description>DatabaseName's Datasource</description>
    <res-ref-name>jdbc/DatabaseName</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

在 Spring 上下文中：

```
<jee:jndi-lookup id="DatabaseNameDataSource"
   jndi-name="jdbc/DatabaseName"
   expected-type="javax.sql.DataSource" /> 
```

## 方法3的缺点

如果 JNDI 名称发生更改，则必须编辑the`server.xml`和 the ，并且需要部署；`META-INF/context.xml`然而，这种情况很少见。

## 方法 3 变体

**一个 Web 应用程序使用的多个数据源**

只需将配置添加到 Tomcat 的`server.xml`：

```
<GlobalNamingResources>
  <Resource name="jdbc/ApplicationContext_DatabaseName1" ... />
  <Resource name="jdbc/ApplicationContext_DatabaseName2" ... />
  ...
</GlobalNamingResources/> 
```

通过属性中指定`META-INF/context.xml`的应用程序私有 JNDI 上下文添加链接 Web 应用程序：`java:comp/env/``name`

```
<Context path="/ApplicationContext" ... >
  <ResourceLink global="jdbc/ApplicationContext_DatabaseName1" name="jdbc/DatabaseName1" ... />
  <ResourceLink global="jdbc/ApplicationContext_DatabaseName2" name="jdbc/DatabaseName2" ... />
  ...
</Context> 
```

最后在 Web 应用程序的部署描述符中添加 JNDI 资源使用情况：

```
<resource-ref>
    <description>DatabaseName1's Datasource</description>
    <res-ref-name>jdbc/DatabaseName1</res-ref-name> ... 
</resource-ref> 
<resource-ref>
    <description>DatabaseName2's Datasource</description>
    <res-ref-name>jdbc/DatabaseName2</res-ref-name> ... 
</resource-ref>
... 
```

在 Spring 上下文中：

```
<jee:jndi-lookup id="DatabaseName1DataSource"
   jndi-name="jdbc/DatabaseName1" ... />
<jee:jndi-lookup id="DatabaseName2DataSource"
   jndi-name="jdbc/DatabaseName2" ... />
... 
```

**同一服务器上的许多 Web 应用程序使用的许多数据源**

只需将配置添加到 Tomcat 的`server.xml`：

```
<GlobalNamingResources>
  <Resource name="jdbc/ApplicationContextX_DatabaseName1" ... />
  <Resource name="jdbc/ApplicationContextX_DatabaseName2" ... />
  <Resource name="jdbc/ApplicationContextY_DatabaseName1" ... />
  <Resource name="jdbc/ApplicationContextY_DatabaseName2" ... />
  ...
</GlobalNamingResources/> 
```

其他配置应该可以从之前的变化案例中推导出来。

**同一服务器上的许多 Web 应用程序使用的同一数据库的许多数据源**

在这种情况下，Tomcat 的`server.xml`配置如下：

```
<GlobalNamingResources>
  <Resource name="jdbc/ApplicationContextX_DatabaseName" ... />
  <Resource name="jdbc/ApplicationContextY_DatabaseName" ... /> 
```

最终出现在两个不同的 Web 应用程序中`META-INF/context.xml` ，例如：

```
<Context path="/ApplicationContextX" ... >
  <ResourceLink global="jdbc/ApplicationContextX_DatabaseName" name="jdbc/DatabaseName" ... />
</Context> 
```

喜欢：

```
<Context path="/ApplicationContextY" ... >
  <ResourceLink global="jdbc/ApplicationContextY_DatabaseName" name="jdbc/DatabaseName" ... />
</Context> 
```

所以有人可能会担心，`name="jdbc/DatabaseName"`部署在同一台服务器上的两个不同应用程序会查找并使用相同的内容：这不是问题，因为它`jdbc/DatabaseName`是应用程序私有的 JNDI 上下文`java:comp/env/`，所以`ApplicationContextX` **使用`java:comp/env/`**can't （按设计）查找链接到的资源`global="jdbc/ApplicationContextY_DatabaseName"`。

当然，如果您在没有这种担心的情况下感到更放松，您可以使用不同的命名策略，例如：

```
<Context path="/ApplicationContextX" ... >
  <ResourceLink global="jdbc/ApplicationContextX_DatabaseName" name="jdbc/applicationXprivateDatabaseName" ... />
</Context> 
```

喜欢：

```
<Context path="/ApplicationContextY" ... >
  <ResourceLink global="jdbc/ApplicationContextY_DatabaseName" name="jdbc/applicationYprivateDatabaseName" ... />
</Context> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-25T11:21:18.710

# `YOUR_APP.xml`文件

我更喜欢方法 2（将所有内容（不仅是配置中的某些属性）放入其中），但不要将它们放置在全局`server.xml`或全局中，而`context.xml`应将其放置在Tomcat 中特定于应用程序的文件中。~~`context.xml.default`~~ `YOUR_APP.xml`

该`YOUR_APP.xml`文件位于`$catalinaHome/conf/<engine>/<host>`（例如`conf/Catalina/localhost/YOUR_APP.xml`）。

特定应用程序中的配置`YOUR_APP.xml`仅适用于特定应用程序。

请参阅MuleSoft 发布的[指南。](https://www.mulesoft.com/tcat/tomcat-context)并查看官方文档，*Tomcat 配置参考*，*上下文容器页面*

*   [版本 9](http://tomcat.apache.org/tomcat-9.0-doc/config/context.html)
*   [版本 8](https://tomcat.apache.org/tomcat-8.0-doc/config/context.html)

引用该文档：

> 可以明确定义各个上下文元素：
> 
> • …</p>
> 
> • 在目录中的单个文件（扩展名为“.xml”）中`$CATALINA_BASE/conf/[enginename]/[hostname]/`。上下文路径和版本将从文件的基本名称（文件名减去 .xml 扩展名）派生。
> 
> • …</p>

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-01T16:48:59.607

**方法 4**

我没有使用 JNDI，而是*在程序初始化期间*而不是在配置时处理`.properties`文件并构建复杂对象。

 *您已经使用了 Spring，并且可以通过以下方式轻松构建`DataSource`：

```
<context:property-placeholder location="classpath:app.properties"/>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@${db.host}:${db.port}:${db.user}"/>
    <property name="username" value="${db.user}"/>
    <property name="password" value="${db.pass}"/>
</bean> 
```

我完全同意[**Ralph**](https://stackoverflow.com/a/15065791/642706)[在中使用](https://stackoverflow.com/a/15065791/642706)**部署描述符，`$CATALINA_BASE/conf/[enginename]/[hostname]/$APP.xml`但我更喜欢 JNDI，我喜欢普通的键值文件！**

 **使用 Spring 将上述属性注入 bean 字段很容易：

```
@Value("${db.user}") String defaultSchema; 
```

而不是 JNDI：

```
@Inject ApplicationContext context;
Enviroment env = context.getEnvironment();
String defaultSchema = env.getProperty("db.user"); 
```

另请注意，EL 允许这样做（默认值和深度递归替换）：

```
@Value('${db.user:testdb}') private String dbUserName;

<property name='username' value='${db.user.${env}}'/> 
```

要外部化`.properties`文件，我使用具有[org.apache.catalina.loader.VirtualWebappLoader](http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html)的现代 Tomcat 7 ：

```
<Loader className="org.apache.catalina.loader.VirtualWebappLoader"
        virtualClasspath="/srv/web/app/"/> 
```

因此，您的 devops 填充`virtualClasspath`了本地外部完整路径，每个应用程序都是独立的，并放在`app.properties`该目录的本地。

也可以看看：

*   [将目录添加到 tomcat 类路径](https://stackoverflow.com/questions/1300780/adding-a-directory-to-tomcat-classpath)
*   [我可以在 Tomcat 中基于每个应用程序创建自定义类路径吗](https://stackoverflow.com/questions/6345793/can-i-create-a-custom-classpath-on-a-per-application-basis-in-tomcat)
*   [从 .war 文件外部化 Tomcat webapp 配置](https://stackoverflow.com/questions/13956651/externalizing-tomcat-webapp-config-from-war-file)
*   [如何在Tomcat中读取我的webapp上下文之外的属性文件](https://stackoverflow.com/questions/15318578/how-to-read-a-properties-file-outside-my-webapp-context-in-tomcat)
*   [配置Tomcat使用属性文件加载DB连接信息](https://stackoverflow.com/questions/1380793/configure-tomcat-to-use-properties-file-to-load-db-connection-information)
*   [外部化 Tomcat 配置](https://stackoverflow.com/questions/11468881/externalize-tomcat-configuration)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-28T19:15:16.030

您还可以将 JNDI URL 支持用于测试、集成测试、生产的不同应用程序配置。

```
<Context>
...
<Resource auth="Container" factory="com.benasmussen.jndi.url.URLFactory" 
name="url/MyUrl" type="java.net.URL" url="file:///your/path/to/file"/>
...
</Context>

<jee:jndi-lookup id="myUrl" jndi-name="java:comp/env/url/MyUrl" expected-type="java.net.URL" /> 
```

查看 GitHub 项目[Tomcat JNDI URL Support](https://github.com/basmussen/tomcat-common)以启用对 Tomcat 服务器的 JNDI URL 支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-27T12:53:40.907

第 1 步：context.xml

```
 <Context path="/projectname">
  <Resource auth="Container" 
            driverClassName="com.mysql.jdbc.Driver"
            logAbandoned="true" 
            maxActive="100" ``
            maxIdle="30" 
            maxWait="10000" 
            name="refname" 
            removeAbandoned="true" 
            removeAbandonedTimeout="60" 
            type="javax.sql.DataSource" 
            url="jdbc:mysql://localhost:8080/dbname" 
            username="root"
            password="root"/>
</Context> 
```

第 2 步：web.xml

```
<resource-ref>
        <description>DB Connection</description>
        <res-ref-name>refname</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref> 
```

第 3 步：创建一个类以获取连接

```
Connection connection = null;        
            Context context = (Context) new InitialContext().lookup("java:comp/env");
            DataSource ds = (DataSource) context.lookup("refname");
            connection = ds.getConnection(); 
```

一切就绪***

# c# - 设置项目全球化

> ID：15064270
> 
> 赞同：0
> 
> 时间：2013-02-25T09:56:05.790
> 
> 标签：c#, winforms, setup-project, globalization

我创建了一个 Windows 窗体项目和一个安装项目来处理安装过程。

它自己的应用程序是多语言的（英语和阿拉伯语），但安装项目只有英语。

我想创建该设置项目的阿拉伯语版本，本地化属性中可用的语言没有阿拉伯语，关于如何添加语言或本地化设置表单的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:58:42.370

你必须添加一个 resx 文件:)

# liferay - Liferay 是否支持 IPC 用于不同页面上的 portlet？

> ID：15064271
> 
> 赞同：3
> 
> 时间：2013-02-25T09:56:14.463
> 
> 标签：liferay, liferay-6

在 IBM Websphere for IPC 中，我们有一个称为[**Wiring**](http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.btools.help.monitor.dash.doc/dash/view_coop.html)的东西，它允许我们切换到接收 portlet 页面，以防您的事件接收 portlet 位于与源 portlet 不同的页面上。

我想知道是否有任何方法可以在 Liferay 中实现这一点。

我还关注了链接：[Using JSR-268 IPC for portlet on different pages in Liferay](https://stackoverflow.com/questions/8741936/using-jsr-268-ipc-for-portlets-on-different-pages-in-liferay)但不清楚，*`application-context.xml`*因为我从 Eclipse 创建了一个简单的 Liferay plugin-portlet-project。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T09:07:34.087

对的，这是可能的。您只需要传递 Layout id、portlet id 以及您的参数。

```
<liferay-renderURL var="varLink" plId="layout-id" portletName="portletName_WAR_WarName"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:15:15.213

布线是Websphere Portal 的概念。Liferay 不支持 Wiring，但您可以使用公共渲染参数和 portlet 事件（在 ACTION->View IPC 的情况下）进行 portlet 间通信。

如果您需要（VIEW->VIEW）IPC，您可以使用liferay的会话共享机制。我的博客上的更多详细信息[https://rutvijshah.wordpress.com/2009/12/13/liferay-session-sharing-made-easy/](https://rutvijshah.wordpress.com/2009/12/13/liferay-session-sharing-made-easy/)

# javascript - 将回调返回值分配给变量

> ID：15064272
> 
> 赞同：0
> 
> 时间：2013-02-25T09:56:15.470
> 
> 标签：javascript, jquery, anonymous-function

我真的在这里挣扎。我正在使用漂亮的 evenIfHidden 插件，它在期望回调的 jQuery 函数中运行良好，该回调正确返回宽度或高度值。但是如果我只想分配那个值，我会得到一个 jQuery 对象，真的很烦人。

这完美地工作：

```
$(this).text($(this).evenIfHidden(function(e) {
                                      return e.width();
                                  })
); 
```

这不会：

```
var width = $(this).evenIfHidden(function(e) {
                                      return e.width();
                                 }); 
```

而不是分配 e.width() 给`width`它分配 jQuery 对象，这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:58:11.337

该插件不返回任何内容，声明一个局部变量，该变量将通过闭包在回调中分配。

```
var width = "";
$(this).evenIfHidden(function(e){
    width = e.width();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:58:25.577

这是不可能的。如果`evenIfHidden`函数没有返回值，那么您无能为力。相反，您应该在回调中使用此值，因为这是该值可用的唯一位置。你不应该试图把它流到外面。因此，例如，如果您想使用此宽度执行某些操作，而不是尝试将其作为返回值传递给`evenIfHidden`函数，您可以在回调中使用它：

```
$(this).text(
    $(this).evenIfHidden(function(e) {
        var width = e.width();
        // do something with the width here, for example you could pass it to some other function
        someFunction(width);
        return width;
    })
); 
```

# logback - logback - 重新映射特定记录器的日志级别

> ID：15064275
> 
> 赞同：9
> 
> 时间：2013-02-25T09:56:18.617
> 
> 标签：logback

我有一个 logback 配置，它有一个带有阈值过滤器的 appender：

```
<appender name="SYSLOG" class="ch.qos.logback.classic.net.SyslogAppender">
  <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
    <level>INFO</level>
  </filter>
  ...
</appender> 
```

这确保只有信息和更高（警告，错误）被记录到系统日志。但是，我们使用的第 3 方库之一是在 DEBUG 记录特定事件，我想将此事件记录到 syslog。我想到的第一种方法是尝试重新映射记录器中的日志级别，但不确定这是否可能？就像是：

```
<logger name="akka.some.Thing" level="DEBUG" logAs="INFO">
  <appender-ref ref="SYSLOG" />
</logger> 
```

显然，“logAs”参数不存在，所以我不能这样做。将 akka.some.Thing 记录到 SYSLOG 附加程序，同时为其他记录器保留过滤器的最佳方法是什么？

另一种方法是创建一个名为 SYSLOG2 的第二个附加程序，它没有适当的过滤器并设置特定的记录器来使用它，但想知道是否有一种方法可以只使用 1 个 SYSLOG 附加程序来配置 logback...

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-08T12:29:07.793

我知道这是一个老问题——但实际上可以用一个 SyslogAppender 来做 OP 想要做的事情。

如果其他人正在寻找如何重新映射的示例，您可以查看[org.springframework.boot.logging.logback.LevelRemappingAppender](https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/java/org/springframework/boot/logging/logback/LevelRemappingAppender.java)类。使用该附加程序，既可以重新映射最终用于日志事件的附加程序，也可以重新映射用于最终日志事件的级别 - 例如，通过将 DEBUG 级别更改为 INFO 级别。

logback 配置文件中的使用示例（取自[https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults .xml](https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml)）：

```
<appender name="DEBUG_LEVEL_REMAPPER" class="org.springframework.boot.logging.logback.LevelRemappingAppender">
    <!-- Optional: specify the destination logger the event ends up in -->
    <destinationLogger>org.springframework.boot</destinationLogger>
    <!-- Optional: specify log level remapping  -->
    <remapLevels>INFO->DEBUG,ERROR->WARN</remapLevels>
</appender>

<logger name="org.thymeleaf" additivity="false">
    <appender-ref ref="DEBUG_LEVEL_REMAPPER"/>
</logger> 
```

请注意，重新映射到特定的目标记录器会使查找原始日志事件的源代码变得更加困难——因此请谨慎使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-06T07:36:58.933

您可以做的是编写具有相同输出的第二个 logger + appender：

```
<appender name="SYSLOG-2" class="ch.qos.logback.classic.net.SyslogAppender">
  <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
    <level>DEBUG</level>
  </filter>
  ...
</appender>

<logger name="akka.some.Thing" level="DEBUG">
  <appender-ref ref="SYSLOG-2" />
</logger> 
```

这会将您的特定调试任务添加到相同的输出中。

# android - Android：在画布上定位 2 个位图

> ID：15064279
> 
> 赞同：0
> 
> 时间：2013-02-25T09:56:21.230
> 
> 标签：android, bitmap, android-canvas, dimension

我拍照并获得一个位图（bitmap），当我拍照时有一个图像我想留在顶部（bitmao2）。因此，为了保存带有图像的图片，我使用了画布。我想将 bitmap2 准确地定位在位图上，当我拍照时它是如何定位的。这是我所做的

```
 Bitmap bitmap = BitmapFactory.decodeByteArray(data,0,data.length);
    int width=bitmap.getWidth();
    int height=bitmap.getHeight();
    Bitmap bitmap2 = GameActivity.decodeSampledBitmapFromResource(gameactivity.getResources(), R.drawable.fire16,width1 );
    Matrix matrix = new Matrix();
    matrix.postRotate(90);
    bitmap=Bitmap.createBitmap(bitmap,0,0,width,height,matrix,true);  

    ImageView image = (ImageView) gameactivity.findViewById(R.id.imageView4);
    LayoutParams layout = (LayoutParams) image.getLayoutParams();
    int margin = layout.topMargin;
    Bitmap cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444); 
    Canvas canvas = new Canvas(cs);
    canvas.drawBitmap(bitmap, 0f, 0f, null);
    canvas.drawBitmap(bitmap2,0,margin, null); 
```

（我旋转图像是因为它处于横向模式，即使我以纵向模式拍摄它，所以我更正了）

问题是即使尺寸 Canvas = 位图尺寸，在我的代码执行后我看不到整个图像，它有点被裁剪，当然 bitmap2 不是它应该在的位置。也许我应该取而代之的是屏幕的尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:08:05.393

您可以使用 drawBitmap (Bitmap bitmap, Rect src, Rect dst, Paint paint) 来绘制位图：

```
Rect src = new Rect(0, 0, bitmap2.getWidth(), bitmap2.getHeight());
Rect dst = new Rect(0, 0, width, height);
canvas.drawBitmap(bitmap2, src, dst, null); 
```

此外，如果您旋转图像，则宽度和高度将在此处交换：

```
bitmap=Bitmap.createBitmap(bitmap,0,0,width,height,matrix,true); 
```

# doctrine-orm - Doctrine HasLifecycleCallbacks PrePersist|PreUpdate 不触发

> ID：15064285
> 
> 赞同：2
> 
> 时间：2013-02-25T09:56:49.350
> 
> 标签：doctrine-orm

我将 Doctrine 2 与 ZF2 和 Doctrine-Module 一起使用。我编写了一个需要 PreUpdate|PrePersist 的实体，因为 Doctrine 不允许 Date|Datetime 在主键中：

```
<?php

namespace Application\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 *
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 * @ORM\Table(name="sample")
 */
class Sample
{

    /**
     *
     * @ORM\Id
     * @ORM\Column(type="string")
     * @var integer
     */
    protected $runmode;

    /**
     *
     * @ORM\Id
     * @ORM\Column(type="date")
     * @var DateTime
     */
    protected $date;

    public function getRunmode()
    {
        return $this->runmode;
    }

    public function setRunmode($runmode)
    {
        $this->runmode = $runmode;
        return $this;
    }

    public function getDate()
    {
        return $this->date;
    }

    public function setDate($date)
    {
        $this->date = $date;
        return $this;
    }

    /**
     *
     * @ORM\PreUpdate
     * @ORM\PrePersist
     */
    protected function formatDate()
    {
        die('preUpdate, prePersist');
        if ($this->date instanceof \DateTime) {
            $this->date = $this->date->format('Y-m-d');
        }
        return $this;
    }

} 
```

现在的问题是，如果我将 DateTime 设置为 Date 我收到消息：

```
"Object of class DateTime could not be converted to string" 
```

因为它没有进入 formatDate。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:06:05.327

首先，由于您将字段映射`Sample#date`为`datetime`，因此它应该始终`null`是`DateTime`.

因此，您应该`setDate`按以下方式输入您的方法：

```
public function setDate(\DateTime $date = null)
{
    $this->date = $date;
    return $this;
} 
```

此外，您的[生命周期回调](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-events)不会被调用，因为方法的可见性`formatDate`是`protected`，因此 ORM 无法访问。将其更改为`public`，它将起作用。无论如何都不需要转换，因此您可以摆脱它。

# wpf - WPF中导航窗口和导航框架的区别

> ID：15064286
> 
> 赞同：0
> 
> 时间：2013-02-25T09:56:49.753
> 
> 标签：wpf

WPF中导航窗口和导航框架的区别？两者都提供了相同的功能，即为包含页面提供内容占位符之类的东西..那么有什么大的区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:45:20.437

不同的是，一个是[框架](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.aspx)，另一个是[窗口](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)。

如果您已经拥有自己的窗户，则可能只需要框架。

如果该答案不完全有帮助，也许您可​​以改写您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-04T11:49:26.687

请参阅继承层次结构

NavigationWindow 类 [https://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow(v=vs.110).aspx)

框架类 [https://msdn.microsoft.com/en-us/library/system.windows.controls.frame(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.controls.frame(v=vs.110).aspx)

它们具有几乎相同的层次结构，但是......当使用 NavigationWindow 时，我对可能的应用程序有更多的 UI 响应能力

# python - 我可以在 pytest 中将“当前行和语句”打印到标准输出吗？

> ID：15064291
> 
> 赞同：2
> 
> 时间：2013-02-25T09:57:05.567
> 
> 标签：python, logging, output, pytest

我可以将“当前行和语句”打印到`stdout` in`pytest`吗？我想修改`pytest`文件以实现以下目标：

```
line 9: snmp_get(node1.1)
line 10: snmp_set(nod1.2) 
```

谁能告诉我在哪里修改？

谢谢！

# jquery - jquery 滑块在 Safari 3.2 上不起作用

> ID：15064292
> 
> 赞同：0
> 
> 时间：2013-02-25T09:57:16.827
> 
> 标签：jquery, safari, jquery-ui-slider

我正在使用 jquery 1.8.2 和 jquery-ui-1.9.2.custom.js 来创建滑块。但不知何故，滑块在 Safari 3.2 上不能正常工作，但在 Safari 5.1.7 上工作得很好

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:12:28.463

这里的基本问题是 safari 3.2 不理解 .offset();

因此，在某种程度上，您将不得不读取 jquery 文件并将 .offset() 更改为 offsetLeft;

# json - 没有getter/setter方法的jsonencoderdecoder

> ID：15064293
> 
> 赞同：0
> 
> 时间：2013-02-25T09:57:21.140
> 
> 标签：json, gwt, resty-gwt

我使用了 RestyGWT 的 JsonEncoderDecoder 接口来编码/解码一些对象。其中有一些类的实例具有未使用 getter/setter 方法公开的属性。我尝试用`org.codehaus.jackson.annotate.JsonProperty`. 但它不起作用，导致错误

> [错误] [jsonsample] - 字段不能是私有的：com.mycompany.jsonsample.ItemList.items

`com.mycompany.jsonsample.ItemList`是具有属性的类，`items`它没有 getter/setter 并如上所述注释。

还有可能告诉编码器/解码器跳过一些属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:38:17.580

带有私有字段和带注释的构造函数的示例，您应该提供有关您的问题的更多信息。

```
public abstract class Parent
{    
    @JsonCreator
    public Parent(@JsonProperty("name") String name)
    {
        this.name = name;
    }

    @Override
    public String getName()
    {
        return name;
    }

    private String name;
} 
```

# drop-down-menu - Knockout select attr:{title Binding} 对于 Observable 数组没有按预期工作

> ID：15064294
> 
> 赞同：2
> 
> 时间：2013-02-25T09:57:24.533
> 
> 标签：drop-down-menu, knockout.js, knockout-2.0

当鼠标悬停在特定选项上时，我想根据选择值显示**标题（步行、跑步、谈话） 。**

[这是我的小提琴](http://jsfiddle.net/naveenkumarm/Hc5vm/)

**这是淘汰赛中的错误（或）我做错了吗？**

**HTML:-**

```
 <select data-bind="value: activityId,optionsValue: 'id', optionsText: 'name', options: activityArray,optionsCaption:'Select',attr: {title:'name'}"> 
```

**脚本**

```
 // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {

var self = this;

self.activityId = ko.observable("");
self.activityArray = ko.observableArray();
self.activityArray.push(new Activity(1,'walk'));
self.activityArray.push(new Activity(2,'run'));
self.activityArray.push(new Activity(3,'talk'));
}
function Activity(id,name){
this.id = id;
this.name = name;
};
// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

**任何帮助都是可观的**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:11:28.497

如果您想在生成的`options`元素上具有其他属性，则不能使用`options`绑定，您必须“手动”使用`foreach`

```
<select data-bind="value: activityId">   
    <option>Select</option>
    <!-- ko foreach: activityArray -->
    <option data-bind="value: id, text: name, attr: {title: name}"></option>
    <!-- /ko -->
</select> 
```

如果您还想`title`为当前选定的元素显示 a ，您将需要一个计算的 observable 来计算标题`activityId`：

```
self.selectedActivity = ko.computed(function () {        
    var selected = ko.utils.arrayFirst(self.activityArray(), function (item) {
        return item.id == self.activityId()
    });
    if (selected)      
     return selected.name;        
}); 
```

然后你可以`selectedActivity`在你的选择上使用它：

```
<select data-bind="value: activityId, attr: {title: selectedActivity}"> 
```

演示[JSFiddle](http://jsfiddle.net/un2qh/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T18:56:19.777

另一个解决方案可能是：http: [//jsfiddle.net/un2qh/3/](http://jsfiddle.net/un2qh/3/)

HTML：

```
<select data-bind="options: activityArray, optionsText: 'name', 
    value: selectedActivity, attr: {title: activityTitle}, 
    optionsCaption: 'Choose...', optionsAfterRender: setOptionTitle">
</select> 
```

JS（标题的主要计算属性）：

```
self.activityTitle = ko.computed(function () {
    return self.selectedActivity() ? self.selectedActivity().name : "" ;
}); 
```

# database - org.hibernate.Session 什么时候抛出 HibernateException？

> ID：15064296
> 
> 赞同：2
> 
> 时间：2013-02-25T09:57:29.683
> 
> 标签：database, spring, hibernate, orm, hibernate-mapping

我正在尝试删除数据库中不存在的实体，但 delete() 方法没有任何异常。
当我尝试删除不存在的实体时，如何得到错误？
我在下面复制了我的代码：

```
public void remove(MyEntity persistentInstance) {
 logger.debug("removing entity: " + persistentInstance);
    try {
        sessionFactory.getCurrentSession().delete(persistentInstance);
        logger.debug("remove successful");
    } catch (final RuntimeException re) {
        logger.error("remove failed", re);
        throw re;
    }
} 
```

**编辑：**
我使用以下代码在测试中调用删除：

```
final MyEntity instance2 = new MyEntity (Utilities.maxid + 1); //non existent id
    try {
        mydao.remove(instance2);
        sessionFactory.getCurrentSession().flush();
        fail(removeFailed);
    } catch (final RuntimeException ex) {

    } 
```

即使我调用刷新测试也不会失败，为什么？
我想得到一个例外。无论如何，我也有兴趣了解 delete() 何时会引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T19:17:11.487

我认为您发现的问题与您尝试删除的对象的状态有关。hibernate 使用 3 种主要状态：瞬态、持久和分离。

瞬态实例是从未持久化的全新实例。一旦你坚持它，它就会变得持久。在连接关闭并且对象被持久化后，它被分离。文档更详细地解释了[https://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/objectstate.html#objectstate-overview](https://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/objectstate.html#objectstate-overview)

这是一个例子：

```
MyEntity foo = new MyEntity(); // foo is a transient instance
sessionFactory.getCurrentSession.persist(foo); // foo is now a persisted instance
txn.commit(); // foo is now a detatched instance 
```

在您的示例中，您正在创建一个具有未使用 id 的全新实例，您的实例是瞬态的（从未被持久化）。我认为当您为瞬态实例调用 delete 时，休眠会忽略。Delete 表示它从数据存储中删除了一个持久实例。[https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html#delete(java.lang.Object)](https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html#delete(java.lang.Object))

相反，尝试这样的事情：

```
public void remove(long entityId) {
    MyEntity myEntity = myEntityDAO.findById(entityId);
    if (myEntity == null) {
        // error logic here
    } else {
        sessionFactory.getCurrentSession().delete(myEntity);
    }
} 
```

# ios - 从 Prestashop 返回的结果与 plist 中的给定值不匹配...预期的行为？

> ID：15064297
> 
> 赞同：0
> 
> 时间：2013-02-25T09:57:33.173
> 
> 标签：ios, plist, prestashop, appixia

我已经使用 appixia 为现有网站创建了一个移动应用程序......我们现有的网站有现有的用户，他们已将他们现有的地址放入我们的数据库（prestashop/mysql）。

这些字段之一（地址行 2）已用于英国县（类似于美国各州）。由于这是自由文本输入，因此用户在此字段中使用了缩写等。

我已经生成了我的移动应用程序，我想使用一个 plist 供用户选择他们的县。这对新用户来说效果很好。

对于登录的现有用户，当 prestashop 返回他们的“县”时，它与 plist 中的给定值不匹配，预期的行为是什么？这对我来说很难模拟，但如果从 prestashop 发送的值与 plist 值不匹配，我希望它将字段留空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:06:44.097

只是为了确保我理解正确，您正在根据[此示例](http://kb.appixia.com/modules%3aver1%3abasicformview)构建您的 plist ，并且在`Value`字段中您不使用数值（如示例），而是输入县名的文本。由于 Prestashop 地址行 2 是自由文本，因此可以解决并填写您在`Value`.

如果与用户的当前地址不完全匹配，则预期的行为是将此字段留空或使用列表中的第一个选择值。不确定是哪个，我建议你测试一下:) 模拟应该不难，通过网站或网站后台在 Prestashop 中创建一个用户，并将随机值设置为 Address Line 2。然后使用此登录应用程序中的用户。另一个想法是在应用程序中创建一个用户，然后使用网站后台编辑他的地址并将地址行 2 更改为某个随机值，然后通过应用程序再次登录。

在任何情况下，在登录和重新登录之间，最好重新启动您的应用程序（或 Visualizer），以确保 cookie 被删除并且您已注销。

# php - 添加了更多信息Magento在后端看不到属性

> ID：15064298
> 
> 赞同：2
> 
> 时间：2013-02-25T09:57:40.900
> 
> 标签：php, mysql, magento, attributes, setup-deployment

我在模块设置文件中使用此函数创建了一个属性：

```
$this->addAttribute(Mage_Catalog_Model_Product::ENTITY, 'outofstock_date', array(
    'group'         => 'Inventory',
    'input'         => 'text',
    'type'          => 'int',
    'label'         => 'Out of Stock Date',
    'visible'       => 0,
    'required'      => 0,
    'user_defined'  => 1,
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL
    )); 
```

我知道该属性的创建是有效的，因为我可以使用以下查询在数据库中找到它：

```
select * from eav_attribute where attribute_code like '%stock%'; 
```

但是，我在后端找不到它。它没有出现在编辑产品页面上，我看不到它在属性管理屏幕和属性集之一中列出。创建它时我做错了什么？为什么我在后台找不到？

另外：以上内容在 mysql4-install-0.1.0.php 安装文件中，触发它的配置文件部分是这样的：

```
 <resources>
        <giftlab_inventory_setup>
            <setup>
                <module>Giftlab_Inventory</module>
                <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
            </setup>
        </giftlab_inventory_setup>
    </resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:45:18.180

固定安装程序脚本：

```
<?php
    $installer = $this;
    $installer->startSetup();
    $installer->addAttribute(Mage_Catalog_Model_Product::ENTITY, 'outofstock_date', array(
        'group'         => 'Inventory',
        'input' => 'date',
        'type' => 'datetime',
        'label'         => 'Out of Stock Date',
        'visible'       => 1,
        'required'      => 0,
        'user_defined'  => 1,
        'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
        'backend' => 'eav/entity_attribute_backend_datetime',
    ));

    $installer->endSetup(); 
```

但是请记住，组通常会添加另一个“库存”组，因此您最终可能会得到两个，但由于这个问题是关于后端缺乏可见性，所以答案也是如此。尝试使用 addAttributeToGroup() 也许。

# mysql - 无法通过perl从mysql数据库中获取排序数据

> ID：15064301
> 
> 赞同：2
> 
> 时间：2013-02-25T09:57:51.833
> 
> 标签：mysql, perl, cgi, dbi

我正在尝试基于 perl 创建一个 cgi 来显示我的相册，现在我正在研究照片的排序功能。我将每张照片的信息存储在mysql中。要显示所有照片，我必须先获取信息。

这是问题所在：我希望从 mysql 获取的数据按每张照片的文件大小排序，但是 fetchrow_array() 的结果是根据插入 mysql 的时间排序的数据。

在mysql shell中，我测试了

```
SELECT * FROM album ORDER BY filesize; 
```

它给出了按文件大小排序的预期结果。这是我的源代码的一部分：

```
#!/usr/bin/perl -w
use strict;
use CGI;

my $sort = 'filesize';

# Connect the database
my $dbh = do 'db.pl';

# Prepare to print out the pictures
my $query;
$query = $dbh->prepare("SELECT * FROM album ORDER BY ?") or die $DBI::errstr;
$query->execute($sort) or die $DBI::errstr;

# Print out all pictures
while( my @data = $query->fetchrow_array() ){
    # Process fetched data
    (my $id, my $user, my $filepath, my $filename, my $filesize, my $uploadtime, my $description, my $tfilepath, my $sessioninfo) = @data;
    print '<fieldset>';

    # Display thumbnail
    print '<a href="', $filepath, '"><img src="', $tfilepath, '" title="', $description, '"></a>';

    # Display filename
    print '</br>';

    print $filename;
    print '</fieldset>';    
}

# Finish printing out all fetched pictures
$query->finish; 
```

我使用了错误的命令吗？或者我使用错误的方法来执行排序功能？感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:02:19.350

`ORDER BY`采用字段名称，而不是表达式。

```
my $query = "SELECT * FROM album ORDER BY ".$dbh->quote_identifier($sort);
my $sth = $dbh->prepare($query);
$sth->execute(); 
```

* * *

顺便说一句，您在输出端也有错误。如果`$description`包含“ `"`”、“ `&`”或“ `<`”怎么办？你需要一些逃避。

```
sub text_to_html {
   my ($s) = @_;
   $s =~ s/&/&amp;/g;
   $s =~ s/</&lt;/g;
   $s =~ s/>/&gt;/g;
   $s =~ s/"/&quot;/g;
   $s =~ s/'/&apos;/g;
   return $s;
} 
```

* * *

顺便一提，

```
(my $id, my $user, my $filepath, my $filename,
 my $filesize, my $uploadtime, my $description,
 my $tfilepath, my $sessioninfo) = @data; 
```

可以写成

```
my ($id, $user, $filepath, $filename,
    $filesize, $uploadtime, $description,
    $tfilepath, $sessioninfo) = @data; 
```

# javascript - 如何根据浏览器重定向用户？

> ID：15064302
> 
> 赞同：-3
> 
> 时间：2013-02-25T09:58:00.323
> 
> 标签：javascript, jquery, html, redirect

我有一个与旧版本 Internet Explorer 不兼容的网站。我不想破坏非 IE 用户的体验，我想在 IE 用户输入我的网址时将他们重定向到同一站点的另一个兼容版本。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:59:41.150

是的，您可以使用[IE 的条件注释](http://msdn.microsoft.com/en-gb/library/ms537512%28v=vs.85%29.aspx)来为旧版本的 IE 执行此操作。例如：

```
<!--[if lt IE 8]>
<meta http-equiv="refresh" content="0;url=/your/other/page" />
<![endif]--> 
```

IE10 不再支持它们，但是，您可能也不需要使用 IE10 进行重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:07:16.083

有一个评论功能可以做到这一点。

```
<!--[if lte IE 7]>
  Redirect your page here.
<![endif]--> 
```

对于重定向本身，您可以使用 javascript 或元标头：

使用 JavaScript：

```
<script>window.location = "http://www.my-new-page.com/"</script> 
```

随着元

```
<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.my-new-page.com/"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:17:43.273

从[这篇文章](https://stackoverflow.com/questions/5916900/detect-version-of-browser)：

> ```
> navigator.sayswho= (function(){
>     var N= navigator.appName, ua= navigator.userAgent, tem;
>     var M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
>     if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
>     M= M? [M[1], M[2]]: [N, navigator.appVersion, '-?'];
>     return M; 
> ```
> 
> })(); navigator.sayswho[0] 是（字符串）版本

您所要做的就是：

```
var browser = navigator.sayswho[0];
if(browser == "MSIE") {
    document.location.href = "you.new.url.html";
} 
```

# c# - 站点默认 URL 中的 HttpModule gzip 压缩和错误

> ID：15064307
> 
> 赞同：0
> 
> 时间：2013-02-25T09:58:16.763
> 
> 标签：c#, asp.net, gzip, httpmodule

我使用 HTTP 模块来压缩请求，这是我的实现：

```
void context_Begin(object sender, EventArgs e)
{
  HttpApplication app = (HttpApplication)sender;
  string encoding = app.Request.Headers.Get("Accept-Encoding");
  if (encoding == null)
     return;
  Stream baseStream = app.Response.Filter;
  if (encoding.Contains("gzip"))
  {
    app.Response.Filter = new GZipStream(baseStream, CompressionMode.Compress);
    app.Response.AppendHeader("Content-Encoding", "gzip");
  }
  else if (encoding.Contains("deflate"))
  {
    app.Response.Filter = new DeflateStream(baseStream, CompressionMode.Compress);
    app.Response.AppendHeader("Content-Encoding", "deflate");
  }
 } 
```

所以一切都很好，只是主网址的奇怪行为：

除主 URL 外，所有页面都运行良好，我的主 URL 是：www.mynewsite.com，如果我禁用 HTTP 模块，一切都很好，但是启用它时，我得到主 URL 的 404 错误：找不到资源。

我不明白？这个页面和请求压缩有什么关系？

有人对此有任何想法吗？有什么建议吗？

# c# - SignalR 在 3.5 基于 asp 的项目中的实现

> ID：15064314
> 
> 赞同：1
> 
> 时间：2013-02-25T09:58:36.793
> 
> 标签：c#, asp.net, signalr

如何将 SignalR 引用和 Dll 集成到 3.5 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:04:42.557

三个选项：

*   你不使用它
*   您将项目升级到更新的框架（大概是 4.5）
*   您所做的工作是让 SignalR 在 .NET 3.5 上工作，可能会提交拉取请求

网络世界快速发展；.NET 3.5 于 2007 年 11 月发布 - 超过 5 年。当绝大多数项目都将用于 4.0 / 4.5 时，强制所有库作者将自己限制在此范围内是令人望而却步的。有些项目可能会选择这样做，有些可能会在旧平台上提供受限的功能子集，有些可能会选择根本不值得支持的开销（大量的努力，以支持边缘和下降的用户根据）。

坦率地说，我认为您应该将此作为考虑升级框架的理由。

特别是，我可以想象 SignalR 想要利用`WebSocket`和改进的异步 IO 功能、MVC 挂钩以及 http-context 存根功能（用于单元测试）。但可能更多（我没有检查过）。

# visual-studio-2010 - VS 2010 RDLC 报告条件分页符

> ID：15064315
> 
> 赞同：1
> 
> 时间：2013-02-25T09:58:40.900
> 
> 标签：visual-studio-2010, rdlc, page-break

我有一个包含 Tablix 的报告，它又包含多个子报告。

我需要在报告的每一页之间有条件的分页符，我可以通过在 Tablix 中的最后一个子报告之后添加一个矩形来实现。然后我将矩形设置为在末尾有一个分页符，并使其可见性取决于传递给报告的参数。

这一切都很好，我在报告的重复部分之间得到了分页符，但是当分页符条件为真时，我最终在报告末尾有一个空白页。

有没有办法维持有条件的分页符但最后没有空白页？

我的报告结构如下所示：

```
<Report>
  <Body>
    <Tablix>
      <Rectangle>
        <Rectangle>
          <SubReport>1</SubReport>
          <SubReport>2</SubReport>
        </Rectangle>
        <Rectangle>
          <SubReport>3</SubReport>
          <SubReport>4</SubReport>
        </Rectangle>
        <Rectangle>Page break rectangle with conditional visibility</Rectangle>
      </Rectangle>
    </Tablix>
  </Body>
</Report> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:57:34.683

我的解决方案，

仅使用 tablix（无矩形）...

为分页符添加新参数，例如：@PageBreak 布尔值或字符串，由您决定。

接下来，您可以在 tablix 中创建**组行**，并将您的**组**设置为功能，如下所示： =IIf(Parameters!PageBreak.Value=true, Fields!YourGroup.Value, "")

然后确定。

*您可以删除执行此操作时创建的行或列，而无需删除组（仅删除行/列）

接下来，找到您的组列表（通常在底部屏幕，**Row Groups**），并设置属性**Group** -> **PageBreak** = **Between**

这会做。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:17:12.043

我设法找到了解决方案，尽管它不是很优雅。我基本上有 2 个 tablix 控件（包含相同的子报表数据、绑定等），每个都嵌套在自己的矩形内。一个打开组的每个实例之间的分页符，另一个关闭此选项。

然后我根据一个参数设置每个父矩形的可见性，即矩形1 可见性=@PageBreak，矩形2 可见性=！@pageBreak。

如果有人可以提出更优雅的解决方案，我会非常感兴趣。

谢谢。

# c# - 将 C# 代码转换为 vb.net

> ID：15064316
> 
> 赞同：1
> 
> 时间：2013-02-25T09:58:42.163
> 
> 标签：c#, asp.net, vb.net

`vb.net`此代码的等效代码是什么`c#`？

```
 DataFilter1.OnFilterAdded += new DataFilter.RefreshDataGridView(DataFilter1_OnFilterAdded); 
```

我使用了转换工具，并得到了以下代码：

```
DataFilter1.OnFilterAdded += New DataFilter.RefreshDataGridView(AddressOf DataFilter1_OnFilterAdded) 
```

但这似乎是不正确的..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:59:45.360

```
AddHandler DataFilter1.OnFilterAdded, AddressOf DataFilter1_OnFilterAdded 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T09:59:57.360

您需要使用[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka.aspx)which 用于订阅事件（当您不使用[`Handles`](http://msdn.microsoft.com/en-us/library/6k46st1y.aspx)子句时）：

```
AddHandler DataFilter1.OnFilterAdded, AddressOf DataFilter1_OnFilterAdded 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T10:00:34.437

如果要以编程方式注册事件处理程序，则必须使用[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.110%29.aspx)：：

```
AddHandler DataFilter1.OnFilterAdded, AddressOf DataFilter1_OnFilterAdded 
```

[**如何：在 ASP.NET 网页中创建事件处理程序**](http://msdn.microsoft.com/en-us/library/6w2tb12s%28v=vs.100%29.aspx)

# css - 在 Twitter 嵌入式推文上自定义样式

> ID：15064318
> 
> 赞同：1
> 
> 时间：2013-02-25T09:58:45.467
> 
> 标签：css, twitter, tweets

我正在尝试简单地将一些 CSS 添加到我网站上的嵌入式推文中

这似乎应该是简单得可笑，而且它确实在工作，然后突然停止了。我的代码是：

```
<blockquote class="twitter-tweet" style="background-color: #E1CFB9 !important;"><p>People scoff at emoticons. How else do you convey body language in a 140char tweet with a perfect stranger? More :-) == Less flame</p>&mdash; Jeff Madsen (@codebyjeff) <a href="https://twitter.com/codebyjeff/status/263808956697292801" data-datetime="2012-11-01T01:05:31+00:00">November 1, 2012</a></blockquote>

<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<style>
.twitter-tweet-rendered{
    padding-left: 20px;
    background-color: #E1CFB9 !important;
    border: 1px solid #77947E !important;
}
.standalone-tweet{
    background-color: #E1CFB9 !important;           
}
</style> 
```

上次涉及的唯一技巧是调用 js 文件让它重新渲染块引用，然后在顶部应用 css。

不知道发生了什么变化，但 .standalone-tweet 背景不再适用，而且每一个 css、javascript、延迟 javascript，无论我能想到什么技巧都行不通。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:59:44.523

你试过这个吗？

```
<script src="http://platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

# php - PHP：如何检查多个数组的值？

> ID：15064322
> 
> 赞同：1
> 
> 时间：2013-02-25T09:59:09.450
> 
> 标签：php

我有一个这样的输出数组..

```
array
'B5' => string 'user1' (length=5)
'B4' => string 'user1' (length=5)

array
'D3' => string 'user1' (length=5)
'D2' => string 'user1' (length=5)
'D1' => string 'user1' (length=5)

array
'A4' => string 'user1' (length=5)
'A2' => string 'user1' (length=5)

array
 'E3' => string 'user1' (length=5)
 'E2' => string 'user1' (length=5)
 'E1' => string 'user1' (length=5) 
```

我想检查这些数组中是否存在诸如“E1”之类的特定项目。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:00:35.157

使用[array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)函数。

例子：

```
$answer = array_key_exists('E1', $array_name); 
```

或者，更简单：

```
$answer = isset($array_name['E1']); 
```

**旁注：**关于[isset() 与 array_key_exists()](https://stackoverflow.com/questions/3210935/difference-between-isset-and-array-key-exists)的使用的讨论。如果您关心性能，值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:03:27.767

这将`array_key_exists`递归检查多维度数组

```
function array_key_exists_r($needle, $haystack)
{
    $result = array_key_exists($needle, $haystack);
    if ($result) return $result;
    foreach ($haystack as $v) {
        if (is_array($v)) {
            $result = array_key_exists_r($needle, $v);
        }
        if ($result) return $result;
    }
    return $result;
} 
```

参考：[http ://www.php.net/manual/en/function.array-key-exists.php#82890](http://www.php.net/manual/en/function.array-key-exists.php#82890)

# javascript - JS 停止 Sinatra 重定向

> ID：15064324
> 
> 赞同：1
> 
> 时间：2013-02-25T09:59:15.473
> 
> 标签：javascript, ruby, http, web, sinatra

我正在 Sinatra 中编写一个博客应用程序。现在我有两个页面：

1.  **'/'**列出我所有的帖子
2.  **'/write'**写一篇新文章

**我在'/write'**上有一个输入 'textarea' 和一个提交按钮。

写完帖子并单击提交按钮后，我使用下面的代码重定向到页面“/”：

```
post '/write' do
    # some codes for storing the new post
    redirect '/', 303
end 
```

这是我的问题：

在**'/write'**上，如果我在 'textarea' 中写一些普通文本并提交它们，一切正常；

但是，如果我在“textarea”中编写任何 javascript 并提交，Chrome/Safari 不会重定向到页面**“/”**，而是给我一个空白的“about:blank”页面。

我使用 Chrome 开发者工具跟踪网络请求，发现没有请求发生。但如果我使用 Firefox 访问我的应用程序，一切正常。firebug 显示 2 个请求发生：**'/write'上的 POST(303) 和 '/** **'**上的 GET(200) 。

所以我不知道我的应用程序是否有任何问题，或者 Webkit 的一些反 XSS 策略阻止了浏览器加载我**的“/”**页面？（这个页面应该显示我新提交的帖子，这是一些 JS 代码。我相信这些 JS 代码会导致我的 'about:blank' 问题）。

如果您能给我任何提示，我将不胜感激，并为我糟糕的英语感到抱歉。

# wpf - 带有 DataTable 的 WPF DataGrid：使用默认值创建 ComboBox

> ID：15064325
> 
> 赞同：1
> 
> 时间：2013-02-25T09:59:17.533
> 
> 标签：wpf, datagrid, default

我有一个`DataGrid`使用 a`DataTable`作为其数据源的。

假设我用以下列创建了我的 DataTable：

```
MyDataTable.Columns.Add(new DataColumn("ColumnSample", System.Type.GetType("System.Double")));
MyDataTable.Columns.Add(new DataColumn("ColumnMode", System.Type.GetType("MyProject.ViewModels.ModeEnum")));
MyDataTable.Columns.Add(new DataColumn("ColumnValue", System.Type.GetType("System.Double"))); 
```

现在我创建一行：

```
row["ColumnSample"] = SampleCount;
row["ColumnMode"] = ModeEnum.PEDAL;
row["ColumnValue"] = val; 
```

如您所见，“ColumnMode”列正在填充**enum**。创建此单元格时，如何让 DataGrid从枚举中**预选一个值？**在我的情况下，DataGrid 显示一个*空*单元格，直到我单击它。然后它会显示一个包含我的枚举值的下拉列表。

# python - 关于带有 os 模块的 python 中的信号

> ID：15064326
> 
> 赞同：2
> 
> 时间：2013-02-25T09:59:22.520
> 
> 标签：python

我正在研究python中的信号主题并遇到了这个例子

```
import signal
import os
import time

def receive_signal(signum, stack):
    print 'Received:', signum

signal.signal(signal.SIGUSR1, receive_signal)
signal.signal(signal.SIGUSR2, receive_signal)

print 'My PID is:', os.getpid()

while True:
    print 'Waiting...'
    time.sleep(3) 
```

现在他正在使用这个发送信号

```
I ran signal_signal.py in one window, then kill -USR1 $pid, kill -USR2 $pid, and kill -INT $pid in another. 
```

我的问题很少

1.  linux kill 命令如何发送信号。我不明白
2.  什么是`kill -USR1`从哪里来`USR` 的，kill 命令期望什么参数

我在想 kill 只杀死进程 id ，为什么我们要传递参数给 kill 命令

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:03:28.433

该`kill`命令有点名不副实。它向进程发送信号，*默认信号*是`SIGTERM`进程终止。用于`kill`发送`SIGUSR*`信号是完全正确的。

当您对 UNIX 命令有疑问时，最好的办法是`man <commandname>`在命令行上输入。`man kill`会告诉你这一切以及更多。

尝试运行`kill -l`支持的信号列表。您可以按数字、符号名称和前面的符号名称指定信号`SIG`。您可以使用`kill -10`,`kill -USR1`或`kill -SIGUSR1`, 都将发送相同的信号。有关更多详细信息，请参见[`kill`手册页](http://linux.die.net/man/1/kill)。

# c# - 用 showdialog() 替换 show()

> ID：15064330
> 
> 赞同：0
> 
> 时间：2013-02-25T09:59:31.193
> 
> 标签：c#, showdialog

我在运行时使用主 gui 表单打开一个表单`form.showdialog();`

我设置了属性，比如表格应该出现在中心等

```
 form.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
form.ClientSize = new System.Drawing.Size(200, 50);
form.StartPosition = FormStartPosition.CenterParent; 
```

并添加了标签

```
Label popupLabel1 = new Label();
form.Controls.Add(popupLabel1); 
```

**问题是**当我用 form.show() 替换 form.showdialog() 时，我看不到标签的内容，现在这个新表单没有出现在中心。为什么这些设置属性没有出现？

坦尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:21:59.803

您没有显示完整的代码，这在这种情况下是必要的。什么代码在何时何地执行？

您需要记住的是 .Show() 不是阻塞调用，而 .ShowDialog() 是阻塞调用。这意味着，如果您在 .Show/ShowDialog 调用*之后*有代码，则在您使用 ShowDialog 时不会立即执行它 - 它将在表单关闭时执行。

假设你有这样的代码：

```
var form = new YourForm();
form.Show(); // NOT BLOCKING!
form.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
form.ClientSize = new System.Drawing.Size(200, 50);
form.StartPosition = FormStartPosition.CenterParent;
Label popupLabel1 = new Label();
form.Controls.Add(popupLabel1); 
```

如果将 Show 更改为 ShowDialog，则需要在创建标签后将其移至末尾。

```
var form = new YourForm();
form.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
form.ClientSize = new System.Drawing.Size(200, 50);
form.StartPosition = FormStartPosition.CenterParent;
Label popupLabel1 = new Label();
form.Controls.Add(popupLabel1);
form.ShowDialog(); // BLOCKING! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:14:18.323

当您使用 Show() 而不是 ShowDialog() 显示表单时，您需要设置其 MDI 父子属性。

尝试以下代码：

```
this.IsMdiContainer = true;
form.MdiParent = this;
form.Show(); 
```

# asp.net-mvc-3 - 在 MVC 3 中的控制器操作中获取当前登录用户

> ID：15064331
> 
> 赞同：1
> 
> 时间：2013-02-25T09:59:39.497
> 
> 标签：asp.net-mvc-3, windows-authentication, intranet

我正在开发 MVC 3 Intranet 应用程序（Windows 身份验证）。我想在我的控制器操作中使用当前登录用户的用户名。我尝试了很多变化，但无法获得用户名。我尝试`Environment.Username`在调试模式下使用它运行良好，但是在部署时它提供了池名称而不是用户名。

控制器动作。

```
 public ActionResult Index()
        {
            LoggedUser usr = new LoggedUser();
            var aa = usr.User;
        } 
```

登录用户

```
public class LoggedUser : Controller
    {
        public LoggedUser()
        {

        }
    } 
```

我正在关注这篇文章，但无法使其工作[在 ASP.NET MVC3 Intranet 应用程序中获取登录的用户名](https://stackoverflow.com/questions/6786380/getting-the-logged-in-username-in-asp-net-mvc3-intranet-application)

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:02:01.700

要检索当前登录的用户名，您可以使用`User.Identity.Name`操作中的属性：

```
public ActionResult Index()
{
    string usr = User.Identity.Name;
    ...
} 
```

您在问题中显示的代码不正确。您已经定义了一个并且正在某个动作`LoggedUser`中实例化这个控制器。`Index`您不应该手动实例化控制器。这是框架的责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-02T16:04:40.080

如果您想使用需要用户名的控制器级别变量，您可以覆盖 OnActionExecuting 事件，您可以在其中访问经过身份验证的用户 ID。为了谨慎起见，您可能必须检查 user.identity 是否为 null。

```
 Obj myObj;
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        myObj = new Obj(User.Identity.Name);
        base.OnActionExecuting(filterContext);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T23:02:45.957

整个讨论是关于真正在做什么，听起来像是权限的“状态”，在访问方法/函数时，确实听起来像是一个更大的概念，什么可以像对象一样存在于控制器中，使这种类型的类成为“状态概念” ...所有关于是否存在于模型/视图/控制器中的讨论，都可以通过在参数交换中使用 ID/Object 来解决，但是因为它是访问数据的需要，所以不是控制器的工作，而是 dbms 的工作和为数据模型的内存结构构建数据访问，以任何形式/模型/类的结构建模“想法/连接/任务”的类的作业。所有关于模型/控制器的讨论都是关于效率的，而效率在所有情况下都是 DBMS。

# c# - 使用系统异常

> ID：15064336
> 
> 赞同：3
> 
> 时间：2013-02-25T09:59:43.210
> 
> 标签：c#, asp.net

我有一个正在创建的项目，我正在添加对一个类的引用，该类会生成一封电子邮件，其中发生了异常和很多好东西。

我的问题是。如果我将它放在一个方法中并在我将`Catch{}`如何为整个项目执行此操作时调用它，那么我只需在 catch 中命名该方法，它就会在项目的每个页面上都知道。

```
var exceptionUtility = new genericExceptions();
exceptionUtility.genericSystemException(
ex,
Server.MachineName,
Page.TemplateSourceDirectory.Remove(0, 1) + Page.AppRelativeVirtualPath.Remove(0, 1),
ConfigurationManager.AppSettings["emailSupport"],
ConfigurationManager.AppSettings["emailFrom"],
string.Empty); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:02:10.303

在 applicationError 方法上你可以做到。

`catch`在每个块中抛出错误

```
private void ThrowingMethod()
{
    try
    {
        throw new InvalidOperationException("some exception");
    }
    catch
    {
        throw;
    }
    finally
    {

    }
} 
```

并在以下事件中获得它`Global.asax`

```
void Application_Error(object sender, EventArgs e)
{

} 
```

这是一个 msdn 链接
[http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/aspnet-error-handling](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/aspnet-error-handling)

[http://msdn。 microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)

# c# - 验证我的表格

> ID：15064339
> 
> 赞同：5
> 
> 时间：2013-02-25T09:59:48.660
> 
> 标签：c#, .net, winforms, textbox

我是新手`.Net Framework`，我想在`Visual Studio 2010 IDE`. 我已经搜索了不同的方法来做到这一点，但我不确定在哪里可以在我的表单中添加该代码？示例之一是下面的代码。

我是否将此代码添加到表单加载方法或提交按钮或其他地方？

```
using System;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace MvcMovie.Models
{
    public class Movie
    {
        public int ID { get; set; }

        [Required(ErrorMessage = "Title is required")]
        public string Title { get; set; }

        [Required(ErrorMessage = "Date is required")]
        public DateTime ReleaseDate { get; set; }

        [Required(ErrorMessage = "Genre must be specified")]
        public string Genre { get; set; }

        [Required(ErrorMessage = "Price Required")]
        [Range(1, 100, ErrorMessage = "Price must be between $1 and $100")]
        public decimal Price { get; set; }

        [StringLength(5)]
        public string Rating { get; set; }
    }

    public class MovieDBContext : DbContext
    {
        public DbSet<Movie> Movies { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:06:29.207

`TextBox`尝试使用（如数字、文本）等公共属性创建自定义`ControlType`，然后为每种类型编写实现。下面给出的代码示例。

```
class CustomTextbox : TextBox
{
    private ControlType _controlType;

    public CustomTextbox()
    {
        Controltype = ControlType.Number;
    }

    public ControlType Controltype
    {
        get { return _controlType; }
        set
        {
            switch (value)
            {
                case ControlType.Number:
                    KeyPress += textboxNumberic_KeyPress;
                    MaxLength = 13;
                    break;

                case ControlType.Text:
                    KeyPress += TextboxTextKeyPress;
                    MaxLength = 100;
                    break;
            }
            _controlType = value;
        }
    }

    private void textboxNumberic_KeyPress(object sender, KeyPressEventArgs e)
    {
        const char delete = (char)8;
        const char plus = (char)43;
        e.Handled = !Char.IsDigit(e.KeyChar) && e.KeyChar != delete && e.KeyChar != plus;
    }

    private void TextboxTextKeyPress(object sender, KeyPressEventArgs e)
    {
        const char delete = (char)8;
        const char plus = (char)43;
        e.Handled = Char.IsDigit(e.KeyChar);
    }

}

public enum ControlType
{
    Number,
    Text,
} 
```

构建您的解决方案。从 中选择新创建的控件`Toolbox`。拖入表单，然后`ControlType`从 更改属性`Property Window`。示例仅显示数字和文本，但您可以扩展电话、电子邮件和所有内容。

**编辑**

也可以在 enum 中使用默认标签，使其成为正常的`Textbox`. 在这种情况下，不要忘记取消链接事件。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:38:33.427

我认为你应该使用`IDataErrorInfo`界面（见[这里](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)）

[这](http://www.codegod.de/WebAppCodeGod/objectdatasource-and-idataerrorinfo-with-winforms-AID427.aspx)是有关如何实现它的示例

它是这样的：

```
public class Movie : IDataErrorInfo
{
   public int ID { get; set; }

  //other properties removed for clearyfication

       private string _lastError = "";

        public string Error
        {
            get { return _lastError; }
        }

        public string this[string columnName]
        {
            get 
            {
               if(columnName == "ID" && ID < 0)
                 _lastError = "Id must be bigger that zero";
            }
        }

} 
```

# ruby - YARD Cucumber 在输出文档中留下评论

> ID：15064344
> 
> 赞同：0
> 
> 时间：2013-02-25T09:59:59.357
> 
> 标签：ruby, cucumber, yard

为了本地化我的 Gherkin 脚本，我`#language:ru`在每个 .feature 文件的最顶部添加了注释，并开始为步骤和场景使用本地化名称。

但是，在使用 yard-cucumber 插件记录我的脚本后，此注释在生成的 html 文档中仍然存在（并且它在功能名称下可见）。它还`features/category_info.feature:3`在每个背景/场景块之后添加行。是调试模式的某种osrt吗？我使用“yardoc -c”命令创建文档，自动加载 yard-cucumber 插件。

我错过了什么吗？我如何让院子里省略这些文物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:22:19.970

使用 -q 运行 cucumber 以静默有关功能/步骤/行号信息的输出。

我认为您无法摆脱语言评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:02:40.473

事实证明，这些工件仅在使用时出现`yard server --reload`，生成的 HTML 文件没有这个问题。

# c# - 使用 ClaimsAuthorizationManager 的自定义授权

> ID：15064347
> 
> 赞同：0
> 
> 时间：2013-02-25T10:00:12.163
> 
> 标签：c#

> 如何使用 ClaimsAuthenticationManager 更改来自 acs 的原始令牌值。我想将角色添加到令牌中。我设法在 claimidentity 中添加了角色，但它没有反映在原始令牌中。

```
 string rawToken = string.Empty;

ClaimsIdentity identity = HttpContext.User.Identity as ClaimsIdentity;

if (null != identity)
 {
   SimpleWebToken token = identity.BootstrapToken as SimpleWebToken;

    if (null != token)
     {
       rawToken = token.RawToken;
     }
  } 
```

> 角色反映在身份上，但没有在引导令牌中添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:29:09.470

Bootstrap 令牌用于构造 ClaimIdentity。在 ClaimsAuthenticationManager 中，您已经从 ACS 令牌创建了 incomingPrincipal。令牌内部的声明也由 ACS 签名，理论上不能在没有令牌消费者验证问题的情况下更改。

您正在尝试实施什么方案？在 WCF 服务或类似服务中重用令牌？

**更新** 这是从 ACS 更改令牌的示例代码（使用 SAML2 令牌）。注意：**具有不同数据的 SAML 断言具有不同的 ID，这一点非常重要**。如果实现一个加载断言“模板”并填充某些数据位的方案，则必须更改 Id，否则在调试器中您将看到修改后的断言值，但 WriteToken 方法将从存储在令牌中的源字节写入原始未修改令牌.

```
X509Certificate2 singingCertificate = new X509Certificate2(certificateFile, certificatePassword);
Saml2SecurityTokenHandler handler = CreateTokenHandler();
Saml2SecurityToken baseToken = GetTemplateToken();
Saml2Assertion assertion = templateToken.Assertion;

//modify template token - change date, add claims etc
assertion.Id = new Saml2Id();
//order is important, because in sampleToken this property is already setup and NotBefore date can not be NotOnOrAfter
assertion.Conditions.NotOnOrAfter = DateTime.MaxValue;
assertion.Conditions.NotBefore = DateTime.UtcNow;

//prepare to resign token assertions
X509AsymmetricSecurityKey signingKey = new X509AsymmetricSecurityKey(singingCertificate);
X509RawDataKeyIdentifierClause x509clause = new X509RawDataKeyIdentifierClause(singingCertificate);
SecurityKeyIdentifier keyIdentifier = new SecurityKeyIdentifier(new SecurityKeyIdentifierClause[] { x509clause });
assertion.SigningCredentials = new SigningCredentials
    (
    signingKey,
    assertion.SigningCredentials.SignatureAlgorithm,
    assertion.SigningCredentials.DigestAlgorithm,
    keyIdentifier
    );
//create and sign modified token
Saml2SecurityToken token = new Saml2SecurityToken(assertion, new ReadOnlyCollection<SecurityKey>(new List<SecurityKey>() { signingKey }), templateToken.IssuerToken); 
```

# android - 在数据库中使用文本数据类型时出现异常

> ID：15064362
> 
> 赞同：0
> 
> 时间：2013-02-25T10:00:43.323
> 
> 标签：android, android-sqlite

我有一个从中运行查询的数据库。我得到了这个例外。我认为这与查询中的空间有关如何解决它。

```
FATAL EXCEPTION: main
E/AndroidRuntime( 2978): android.database.sqlite.SQLiteException: near "413": syntax error: , while compiling: SELECT DISTINCT _id, number, name, macid, type FROM favorites WHERE _id=(652) 413-6525
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
E/AndroidRuntime( 2978):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
E/AndroidRuntime( 2978):    at com.honda.phone.DBAdapter.isPresent(DBAdapter.java:145)
E/AndroidRuntime( 2978):    at com.honda.phone.FavoriteSelectionActivity.onClick(FavoriteSelectionActivity.java:226)
E/AndroidRuntime( 2978):    at android.view.View.performClick(View.java:3511)
E/AndroidRuntime( 2978):    at android.view.View$PerformClick.run(View.java:14105)
E/AndroidRuntime( 2978):    at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime( 2978):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 2978):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 2978):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 2978):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2978):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 2978):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 2978):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 2978):    at dalvik.system.NativeStart.main(Native Method) 
```

这是代码

```
public boolean isPresent(String number) throws SQLException 
    {
        boolean returnValue = false;
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_NUMBER, 
                        KEY_NAME,
                        KEY_MACID,
                        KEY_TYPE
                        }, 
                        KEY_ROWID + "=" + number, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            if(mCursor.getCount() == 0){
                returnValue = false;
            }else{
                returnValue = true;
                mCursor.moveToFirst();
            }

        }
        return returnValue;
    } 
```

我`isPresent()`用包含`(652) 413-6525`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:06:09.987

如果不查看您的代码或数据库结构，很难准确地说出修复它的正确方法是什么。但是，从错误消息中可以明显看出您正在尝试使用电话号码作为该`_id`字段的参数。

我将在这里冒险并建议您将值与该`number`字段进行比较。在这种情况下，您的查询应该是：

```
SELECT DISTINCT _id, number, name, macid, type FROM favorites WHERE number='(652) 413-6525' 
```

注意电话号码周围的单引号。它们是您处理文本字段而不是数字的指标。

**更新：**你真的应该使用参数化查询：

```
Cursor mCursor =
        db.query(true, DATABASE_TABLE, new String[] {
                KEY_ROWID,
                KEY_NUMBER, 
                KEY_NAME,
                KEY_MACID,
                KEY_TYPE
                }, 
                KEY_ROWID + "=?", 
                new String[] { number },
                null, 
                null, 
                null, 
                null); 
```

# javascript - 每次按下按钮时清除视图并重新开始-backbone.js

> ID：15064364
> 
> 赞同：1
> 
> 时间：2013-02-25T10:00:49.310
> 
> 标签：javascript, backbone.js

每次我按下按钮时，它都会添加我的数据并重新加载页面，然后列表就会消失。preventdefault 有效，但是每次我单击该按钮时，它都会不断添加到列表中。

如何清除列表并在每次单击按钮时重新开始？

HTML

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="Scripts/underscore.js"></script>
    <script type="text/javascript" src="Scripts/backbone.js"></script>

</head>
<body>

    <div>

        <div id="container">
            <button>Load</button>
            <ul id="list"></ul>
        </div>

        <div id="list-template">
            <li><a href=""></a></li>
        </div>

        <script type="text/javascript" src="JavaScript.js"></script>

    </div>

</body>
</html> 
```

JavaScript

```
model = new Backbone.Model({

    data: [

        { text: "site 1", href: "link1.htm" },
        { text: "site 2", href: "link2.htm" },
        { text: "site 3", href: "link3.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },

    ]
});

var View = Backbone.View.extend({

    initialize: function () {
        //console.log('initializing ' + this.options.blankOption);
        this.template = $('#list-template').children();
    },
    el: '#container',
    events: {
        'click button' : 'render'
    },
    //model:model,
    render: function(event){
        //event.preventDefault();
        var data = this.model.get('data');
        for (var i = 0; i < data.length; i++) {
            var li = this.template.clone().find('a').attr('href', data[i].href).text(data[i].text).end();
            this.$el.find('ul').append(li);
        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:10:51.450

原因是每次单击按钮时，都会再次呈现整个视图并附加到现有内容。这将解决您的问题：

```
// empty the content inside the $el and re-rendering.
this.$el.empty();
this.$el.find('ul').append(li); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:14:51.227

您应该尝试的另一件事是，您可以创建一个名为“Links”之类的集合和一个名为“Link”的模型，而不是创建一个包含充满对象的数据属性的模型。要显示模型，您可以将集合传递给视图和渲染调用：

```
this.collection.each(function(model){$el.find('ul').append('<li><a href="' + model.get("href") + '">' + model.get('text') + '</a></li>')}) 
```

您可以通过创建另一个视图来改进这一点，以显示模型的“tagName”属性设置为“li”。

例如，在这里我将创建一个模型和一个集合来保存模型。然后我将创建 2 个视图，一个用于保存集合，另一个用于显示模型。

```
var Link = Backbone.Model.extend({})
var Links = Backbone.Collection.extend({
  model: Link
  url: '/links' 
```

});

```
var ls = new Links() 
```

当您调用时`ls.fetch()`，将向您的服务器发出呼叫，该服务器应使用带有所有链接的 JSON 对象进行应答。Backbone 将注意在其内部实例化 Link 模型。您可以通过执行`ls.length`which 应该返回大于零的值来检查它是否有效。

然后你可以像这样创建一个视图：

```
var MainView = Backbone.View.extend({
  template: JST['teams/index']

  render: function(){
      $(this.el).html(this.template())
      this.collection.each(this.appendLink())
      this},
  appendTeam: function(model){
    view = new LinkView({model: model})
    $('#links').append(view.render().el)
    this}}) 
```

模板函数应该有一个 id = links 列表，我们可以在其中附加我们的模型。我们现在要做的就是创建一个 LinkView

```
var LinkView = Backbone.View.extend({
  template: JST['teams/team'],
  tagName: 'li',

  render: function(){
    $(this.el).html(this.template({model: this.model}));
    this}}) 
```

希望这可以帮助！

# html - IE7把我网站中的一些关键词作为链接？

> ID：15064365
> 
> 赞同：0
> 
> 时间：2013-02-25T10:00:51.433
> 
> 标签：html, internet-explorer, hyperlink, cross-browser

这是我第一次看到这种情况。我的投资组合网站在所有其他浏览器中看起来都很好，除了 IE（！）

在IE7中，我网站中的一些关键词变成了链接，比如平面设计师、创意套件。我的代码中根本没有这样的标签。为什么会发生这种情况，我该如何解决？我被什么东西黑了吗？

我的网站是：ykwang.co.uk

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:58:02.163

这听起来像是您的机器感染了恶意软件，它会修改浏览器中加载的页面，添加指向其他页面的链接（通常显示广告，为恶意软件背后的人创造收入）。这很常见，尤其是在 Windows 中，尤其是在较旧的浏览器中。

它通常可以通过间谍软件扫描/删除软件修复。自从我不得不这样做已经有一段时间了，但是[http://www.malwarebytes.org/](http://www.malwarebytes.org/)过去做得很好，而且它是免费的。我会从那里开始。

您应该测试问题是否只是在您的计算机上：访问[http://www.browserstack.com](http://www.browserstack.com)并使用他们的免费试用帐户在 IE7 中测试您的站点。希望您不会看到额外的链接。

# iphone - 象征性的 iPhone 应用程序崩溃

> ID：15064368
> 
> 赞同：4
> 
> 时间：2013-02-25T10:01:04.413
> 
> 标签：iphone, ios, symbolicatecrash

象征 iPhone 应用程序崩溃 - 将十六进制地址映射到有效的函数命名空间（调用堆栈）

上市要求：象征崩溃

1.  使用 Xcode 管理器
2.  使用外部服务
3.  使用 .crash 文件和 .dSYM 文件
    来源：iTunesConnect 崩溃报告（分布式）
    设备崩溃日志或外部服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:59:39.933

如果我有 .crash 文件和 .dSYM 文件，这可以工作。

1.  **初步的**

    `temp`在 中创建一个文件夹`~/`，路径是`~/temp/`
    Keep all files in `~/temp/`ie script, .ipa, .dsym 和 .crash（其实.ipa 是不需要的）

2.  **去** `~/temp/`

3.  **设置路径**：如果系统中有两个 Xcode 或路径未设置

    `sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer/` `export DEVELOPER_DIR=/Applications/Xcode.app`

4.  **创建快捷方式**

    别名 symbolicateCrash /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash

5.  **获取符号**：

    ```
    atos -arch armv7 -o 'appname.app'.dSYM/Contents/Resources/DWARF/'appname' 0x0029c296
    atos -arch armv7 -o 'appname.app'.dSYM/Contents/Resources/DWARF/'appname -l "binary image line of crash log" 
    ```

    或者

    ```
    symbolicateCrash 'logname'.crash 'appname.app'.dSYM/Contents/Resources/DWARF/'appname' 
    ```

6.  **仍然，如果有任何问题**？仍然无法与一些未找到的链接，无法找出异常。
    下载的脚本：外部 shell 脚本（上传为 'symbolicatecrash'）

`./symbolicatecrash -v filename.crash`

参考：

> [如何手动符号化 iOS 崩溃以查看崩溃日志](https://stackoverflow.com/questions/3832900/how-to-manually-symbolicate-ios-crash-to-view-crash-logs/8648232#8648232)
> 
> [符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)
> 
> [iphone：.dSYM 文件在崩溃报告中的位置](https://stackoverflow.com/questions/7088771/iphone-where-the-dsym-file-is-located-in-crash-report)
> 
> [如何在 XCode 4 中创建 dSYM 文件？](https://stackoverflow.com/questions/5745391/how-to-create-dsym-file-in-xcode-4)
> 
> [如何符号化 iPhone\iPad 崩溃日志？](https://stackoverflow.com/questions/8172887/how-to-symbolicate-iphone-ipad-crash-logs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:34:05.830

您应该使用--> Xcode --> Organizer--> Devices --> Device Logs :)

在这里您可以找到崩溃日志....或者您可以使用 TestFlight SDK 使用查看您的测试团队设备的崩溃日志....

# windows-phone-7 - Windows Phone 7.8 和 wma 音频流问题

> ID：15064369
> 
> 赞同：1
> 
> 时间：2013-02-25T10:01:20.273
> 
> 标签：windows-phone-7, windows-phone-7.1, audio-streaming, wma, windows-phone-7.8

我们的应用程序使用 AudioPlayerAgent（后台播放器）流式传输 wma 音频内容。在 WP 7.8 的更新发布之前，一切都在 WP 7.5 上运行良好。比它停止流式传输。

为了排除我们代码中的错误，我们下载了 Microsoft 的示例应用程序 sdkBackgroundAudioPlayerCS 并使用了我们的流。它在尚未获得 7.8 更新的手机上正常工作，但在已更新的设备上却无法正常工作。

流媒体在 WP8 上也能完美运行（我们使用了为 OS 7.1 创建的二进制文件，放在 Store 上）......

除了使用不同的协议/格式外，是否有针对此问题的已知解决方法？

以下是类似的问题：

*   [http://www.ignii.com/software/?p=377](http://www.ignii.com/software/?p=377)
*   [http://answers.microsoft.com/en-us/winphone/forum/wp7-wpapps/wma/9a693cce-478a-438c-91eb-188f48c71945](http://answers.microsoft.com/en-us/winphone/forum/wp7-wpapps/wma/9a693cce-478a-438c-91eb-188f48c71945)
*   [http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/d34d9b0b-79a3-426b-aaa9-e8f17c0e8e8c/](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/d34d9b0b-79a3-426b-aaa9-e8f17c0e8e8c/)
*   [http://answers.microsoft.com/en-us/winphone/forum/wp7-wpmusic/wp7-support-live-streaming-the-next-update-78/548be861-cc4e-4bb9-98b2-448741c54a5e?msgId= 8970a7e6-17a8-47e7-8f0b-2ec302ed62e3](http://answers.microsoft.com/en-us/winphone/forum/wp7-wpmusic/wp7-support-live-streaming-the-next-update-78/548be861-cc4e-4bb9-98b2-448741c54a5e?msgId=8970a7e6-17a8-47e7-8f0b-2ec302ed62e3)

# python - Python 读取 CSV 并将值放入 M ySQL 数据库

> ID：15064376
> 
> 赞同：0
> 
> 时间：2013-02-25T10:01:48.417
> 
> 标签：python, mysql, csv, import

我正在尝试从 csv 获取值并将它们放入数据库中，我设法做到这一点没有很多麻烦。

但是我知道需要写回 csv，所以下次我运行脚本时，它只会将值从 csv 文件中的标记处输入到数据库中。

请注意，系统上的 CSV 文件每 24 小时自动刷新一次，因此请记住 csv 中可能没有标记。所以如果没有找到标记，基本上将所有值都放入数据库中。

我计划每 30 分钟运行一次此脚本，因此 csv 文件中可能有 48 个标记，甚至每次都删除标记并将其移到文件中？

我一直在删除文件，然后在脚本中重新创建一个文件，以便每个脚本运行新文件，但这会以某种方式破坏系统，所以这不是一个好的选择。

希望各位大神帮忙。。

谢谢你

蟒蛇代码：

```
import csv
import MySQLdb

mydb = MySQLdb.connect(host='localhost',
user='root',
passwd='******',
db='kestrel_keep')

cursor = mydb.cursor()

csv_data = csv.reader(file('data_csv.log'))

for row in csv_data:

    cursor.execute('INSERT INTO `heating` VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s,)',
   row)
#close the connection to the database.
mydb.commit()
cursor.close()
import os

print "Done" 
```

我的 CSV 文件格式：

```
2013-02-21,21:42:00,-1.0,45.8,27.6,17.3,14.1,22.3,21.1,1,1,2,2
2013-02-21,21:48:00,-1.0,45.8,27.5,17.3,13.9,22.3,20.9,1,1,2,2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:23:26.323

看起来您的 MySQL 表中的第一个字段是**唯一的**时间戳。可以设置 MySQL 表，使字段必须是唯一的，并忽略`INSERT`会违反该唯一性属性的 s。在`mysql>`提示符下输入命令：

```
ALTER IGNORE TABLE heating ADD UNIQUE heatingidx (thedate, thetime) 
```

（更改`thedate`和`thetime`保存日期和时间的列的名称。）

* * *

对数据库进行此更改后，您只需在程序中更改一行即可使 MySQL 忽略重复插入：

```
cursor.execute('INSERT IGNORE INTO `heating` VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s,)', row) 
```

* * *

`INSERT IGNORE ...`是的，在已经处理过的线路上运行有点浪费，但考虑到数据的频率（每 6 分钟一次？），就性能而言，这并不重要。

这样做的好处是现在不可能意外地将重复项插入到您的表中。它还使您的程序逻辑简单易读。

它还避免了两个程序同时写入同一个 CSV 文件。即使您的程序*通常会*成功且没有错误，但每隔一段时间——也许一次在蓝月亮中——您的程序和其他程序可能会尝试同时写入文件，这可能会导致错误或数据损坏。

* * *

您还可以通过使用`cursor.executemany`而不是使您的程序更快一点`cursor.execute`：

```
rows = list(csv_data)
cursor.executemany('''INSERT IGNORE INTO `heating` VALUES
    ( %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s,)''', rows) 
```

相当于

```
for row in csv_data:    
    cursor.execute('INSERT INTO `heating` VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s,)',
   row) 
```

除了它将所有数据打包到一个命令中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:15:09.860

我认为比“标记”CSV 文件更好的选择是保留一个文件，如果您存储了您处理的最后一行的编号。

因此，如果文件不存在（您存储最后处理的行号的文件），则处理整个 CSV 文件。如果此文件存在，您只处理此行之后的记录。

工作系统的最终代码：

```
#!/usr/bin/python
import csv
import MySQLdb
import os

mydb = MySQLdb.connect(host='localhost',
user='root',
passwd='*******',
db='kestrel_keep')

cursor = mydb.cursor()

csv_data = csv.reader(file('data_csv.log'))

start_row = 0

def getSize(fileobject):
fileobject.seek(0,2) # move the cursor to the end of the file
size = fileobject.tell()
return size

file = open('data_csv.log', 'rb')
curr_file_size = getSize(file)

# Get the last file Size
if os.path.exists("file_size"):
with open("file_size") as f:
    saved_file_size = int(f.read())

# Get the last processed line
if os.path.exists("lastline"):
with open("lastline") as f:
    start_row = int(f.read())

if curr_file_size < saved_file_size: start_row = 0

cur_row = 0
for row in csv_data:
 if cur_row >= start_row:
     cursor.execute('INSERT INTO `heating` VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s,    %s, %s, %s, %s, %s, %s, %s ,%s)', row)

     # Other processing if necessary

 cur_row += 1

 mydb.commit()
 cursor.close()

# Store the last processed line
with open("lastline", 'w') as f:
start_line = f.write(str(cur_row + 1)) # you want to start at the **next** line
                                      # next time
# Store Current  File Size To Find File Flush    
with open("file_size", 'w') as f:
start_line = f.write(str(curr_file_size))

# not necessary but good for debug
print (str(cur_row))

 print "Done" 
```

**编辑：** ZeroG 提交的最终代码，现在正在系统上工作！！也非常感谢 Xion345 的帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:18:55.703

每个 csv 行似乎都包含一个时间戳。如果这些总是在增加，您可以在数据库中查询已记录的最大时间戳，并在读取 csv 时跳过该时间之前的所有行。

# javascript - document.getElementByClassName 无法正常工作

> ID：15064378
> 
> 赞同：0
> 
> 时间：2013-02-25T10:01:55.660
> 
> 标签：javascript

```
$('.inlineDatepickerDepart').datepick({ minDate: '<%=@start_display%>', maxDate: '<%=@end_display%>',
   monthsToShow: 2,
  dateFormat: "dd/mm/yyyy",
  onSelect: function(date) { 
```

var selected=parseInt(document.getElementById("guest_adult").value)+parseInt(document.getElementById("guest_kid").value); 警报（选中）；

```
for(var x=0;x<selected;x++)
{
document.getElementsByClassName("depart1")[x].innerHTML = '2012-03-24';
document.getElementsByClassName("return1")[x].innerHTML = '2012-04-24';
}
},
}); 
```

警报显示客人的数量。它单独替换了离开 1 [0] 的值。不适用于整个循环和“返回 1”类。谁能给我解决问题的钥匙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:03:12.933

您应该查看[控制台](https://developers.google.com/chrome-developer-tools/docs/console)以捕获基本错误，例如该`getElementByClassName`函数不存在的事实。

请改用[getElementsByClassName](https://developer.mozilla.org/fr/docs/DOM/document.getElementsByClassName)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:03:08.960

是复数：

```
document.getElementsByClassName
                   ^ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T10:04:16.480

你应该使用：

```
getElementsByClassName 
```

因为可以有多个元素应用相同的类，所以它是复数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:51:53.040

最后它通过使用以下代码工作。

```
var a;
var b;
for(var x=0;x<selected;x++)
{
a=document.getElementsByClassName("depart1")[x];
a.innerHTML = depart_date;
b=document.getElementsByClassName("return1")[x];
b.innerHTML = return_date;
} 
```

# javascript - 从 RequireJS 的 r.js 优化中排除任意文件并异步加载它们

> ID：15064380
> 
> 赞同：4
> 
> 时间：2013-02-25T10:02:01.910
> 
> 标签：javascript, web-applications, requirejs, r.js

我已经很好地实现了 RequireJS，并且基于 Grunt 的构建过程将 JS 应用程序优化到一个文件中，通过`r.js`它也可以正常工作。我所有的应用程序文件都连接成一个，以实现高效的生产部署。

优化还将我的`r.js`所有模板也包含在主应用程序 JS 文件中，这对于应用程序启动时或之后很快需要的模板也非常有用。对于可能永远不会看到的视图，或者在应用程序生命周期的后期可能会看到，这并不是很好，如果这些模板根据需要异步加载会更好。

所以我的问题是，有没有办法任意排除我的模板被包含到单体应用程序 JS 文件中并由 RequireJS 异步加载，还是不支持？如果不支持异步加载模板有哪些方法？

我正在使用`tpl`文本模板插件和`Backbone.Marionette`. 我的模板用法目前看起来有点像这样：

```
define(function (require) {

    var Backbone = require("backbone");

    var tpl = require("tpl!./some-view-template.tpl");

    return Backbone.Marionette.ItemView.extend({
        template: tpl
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T00:47:00.440

我认为 Require JS 模块将解决您的问题。我没有尝试仅延迟加载模板，但您绝对可以将组件（视图、模型、模板）分离到 Require JS 模块中并延迟加载它们。

Ben Nadel 关于这个主题的博文对这个主题非常透彻。 [http://www.bennadel.com/blog/2404-Compiling-Optimizing-A-Subset-Of-A-RequireJS-Application.htm](http://www.bennadel.com/blog/2404-Compiling-Optimizing-A-Subset-Of-A-RequireJS-Application.htm)

# image - 从文件夹中检索图像并在matlab的图形窗口中显示

> ID：15064387
> 
> 赞同：1
> 
> 时间：2013-02-25T10:02:35.823
> 
> 标签：image, matlab, image-processing, matrix, matlab-figure

我正在研究基于内容的图像检索。

我找到了与查询图像更相似的图像，并将结果存储在矩阵中，如下所示

q =

```
 100       -1293
      50       -1237
       8       -1075
     102       -1024
     141        -951 
```

第 100 个图像更相似，第 50 个图像是第二个更相似的图像。

所有这些图像都在一个文件夹中。如何在 matlab 中检索这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:12:41.303

怎么样

```
 folder = 'c:\images'; % folder were all images are
 img_names; % a cell array where each cell is the name of the image, e.g. img_names{3} is 'photo005.png'
 n = size(q,1); % number of images to be displayed
 w = max(1, floor( sqrt(n) ) );
 h = ceil( n / w );
 figure('Name','Query results');
 for ii = 1:n,
     subplot(w,h,ii);
     img = imread( fullfile( folder, img_names{ q(ii,1) } ) );
     imshow( img );
     title( sprintf( '(%d) img %d score %d', ii, q(ii,1), q(ii,2) ) );
 end 
```

# php - 将 curl 视为一个连接的循环

> ID：15064388
> 
> 赞同：1
> 
> 时间：2013-02-25T10:02:35.997
> 
> 标签：php, curl

嗨，我正在用这个脚本解析一个网站（SHOP）：

```
<?php
date_default_timezone_set('Europe/Warsaw');
ini_set('memory_limit', '-1');
set_time_limit(120);
require_once '../../../simple_html_dom.php';    
require_once'../../../functions.php';
echo '<meta http-equiv="content-type" content="text/html; charset=UTF-8">';
echo "Beginning import at: ".date('H').":".date('i')."\n";
mysql_connect ("localhost","xxxx","xxxx"); 
mysql_select_db ("sklepy"); 
mysql_query('SET CHARSET utf8'); 
$sklepy=(mysql_query("SELECT * FROM `ps_supplier` where id_supplier = 3"));
do {
$curl = curl_init();
$userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';
$timeout = 5;
$cookie = tempnam ("/tmp", "CURLCOOKIE");
curl_setopt($curl, CURLOPT_FAILONERROR, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_AUTOREFERER, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false ); 
curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_USERAGENT, $userAgent);
curl_setopt($curl, CURLOPT_URL, $adres);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookie );
$str = curl_exec($curl);  
 curl_close($curl);
 /code for extracting data from DOM
}

while ($limit != $sklep['limit']); 

}
?> 
```

而且我遇到的问题是 do {} 的每个循环都被视为与解析服务器的新连接，大约 5 分钟后它显示有 1000 人在线，如何更改代码以模仿一个长连接？PS。对不起，我的英语不好 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:15:31.183

您可以为此使用[http://php.net/manual/en/function.curl-multi-exec.php](http://php.net/manual/en/function.curl-multi-exec.php)。有一些工作示例

# javascript - 如何剪掉 viewBox 之外的内容？

> ID：15064389
> 
> 赞同：4
> 
> 时间：2013-02-25T10:02:37.670
> 
> 标签：javascript, html, svg, jquery-svg, svg-edit

有没有一种功能或方法可以剪辑视图框之外的路径，而不是仅仅隐藏它？

我正在使用 svg-edit 它有一个视图框，一个画布区域。在画布之外绘制的所有内容都是隐藏的。但是，当编辑器的输出被收集并粘贴到 Inkscape 等图形编辑器中时，整个绘图就会出现。我希望从编辑器的输出中完全剪掉视图框外的绘图。因此，例如，如果我有一个在画布外一半的圆圈，那么编辑器的输出将是半个圆圈，而不是整个圆圈，只是隐藏了一半。

我想改变主题路径本身的几何形状，而不仅仅是将其隐藏起来。

我正在修改 svg-edit：[http ://code.google.com/p/svg-edit/](http://code.google.com/p/svg-edit/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:36:09.313

一种方法是将 a`clip-path`应用于根 svg 元素。

如果你想要它可以是一个简单的矩形区域，或者另一个更复杂的形状，如下例所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink"     
     viewBox="-100 -100 300 300"
     clip-path="url(#clip)">
  <defs>
    <clipPath id="clip">
      <rect width="100" height="100" rx="10"/>
      <path d="M40 99l10 11 10 -11z"/> 
    </clipPath>
  </defs>

  <rect id="background" width="120" height="120" fill="slateblue"/>
  <image xlink:href="images/man.png" width="100" height="110" 
         preserveAspectRatio="xMidYMax meet"/>
</svg> 
```

[在这里](http://xn--dahlstrm-t4a.net/svg/clippath/clip-svg-root.svg)在线查看。

在您的情况下，您可能只希望元素`<rect>`内部`<clipPath>`有一个与 viewBox 具有相同尺寸的元素。

# javascript - 静态行为的实例原型对象？

> ID：15064390
> 
> 赞同：0
> 
> 时间：2013-02-25T10:02:41.897
> 
> 标签：javascript, windows-8, prototype, windows-store-apps, winjs

我正在尝试使用 HTML/Javascript 和 WinJS 为 Windows 8 制作游戏，并且目前在我不希望它们静态行为时遇到“原型”问题。我从来没有在这种程度上使用过Javascript，或者涉及到这么多对象，所以我可能犯了一个愚蠢的简单错误，但我不明白是什么。

首先是我正在谈论的一些代码（这是一个很长的类）：

```
(function () {
    "use strict";

    WinJS.Namespace.define("Race", {
        Car: WinJS.Class.derive(
            Race.Common,
            //Constructor method.
            function (slotNum, slotData, canvas, stage, preload, pixelScale) {
                this.canvas = canvas;
                this.stage = stage;
                this.preload = preload;
                this.pixelScale = pixelScale;

                this.slotNum = slotNum;
                this.slotData = slotData;
            },
            //Instance properties and methods.
            {
                /** Properties **/
                slotNum: 0,
                slotData: {},
                position: { x: 0, y: 0, r: 0 },
                lastPosition: { x: 0, y: 0, r: 0 },

                /**Methods **/
                /**
                 *
                 */
                calcRotation: function () {
                    //get angle between last position and current position

                    this.lastPosition.r = this.position.r;
                    this.position.r = this.getAngle(this.lastPosition.x, this.lastPosition.y, this.position.x, this.position.y);
                },
            },
            //Static properties and methods.
            {
                //Debug properties.
                showDebug: true,
                debugCarColors: ['red', 'yellow', 'blue', 'green'],
            }
        )
    });
}()); 
```

所以有四个 Race.Car 实例，每个实例都有一组不同的 slotData。这很好用——每个实例都有自己的一组 slotData 和自己的 slotNum。我可以使用断点来确认这一点（当它在汽车中循环时，slotData 特定于每个实例）。到目前为止，我一直在处理位置，这似乎也能正常工作。

然而，我遇到的问题是 lastPosition。这被设置为*最后*一辆车的 lastPosition，而不是*这*辆车的 lastPosition。我会考虑在[WinJS.Class.define](http://msdn.microsoft.com/en-gb/library/windows/apps/br229813.aspx)（而不是静态成员）的“实例成员”部分中定义它，并且 this.lastPosition 的使用使这一点显而易见。

为什么它的行为不像我预期的那样，我做错了什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:42:17.777

实例化对象时，尝试在构造函数中将其添加为默认值，如下所示：

```
function (slotNum, slotData, canvas, stage, preload, pixelScale) {
            this.canvas = canvas;
            this.stage = stage;
            this.preload = preload;
            this.pixelScale = pixelScale;

            this.slotNum = slotNum;
            this.slotData = slotData;
            this.lastPosition = { x: 0, y: 0, r: 0 };
        }, 
```

干杯:-)

# c++ - C++优雅模板注入接口

> ID：15064394
> 
> 赞同：0
> 
> 时间：2013-02-25T10:02:46.023
> 
> 标签：c++, templates, polymorphism, service-locator

我需要一些技巧来实现不支持的 c++：我需要混合动态和静态多态（虚拟和模板）。我需要什么（一些示意图代码）：

```
class IManager
{
public:
    template<class T>
    void Set();
    template<class T>
    T *Get();

protected:
    IManager *_parent;
};

class Manager1: public IManager{};
class Manager2: public IManager{};

// the main goal is a semantic:
IManager manager = Manager1;
// IManager manager = Manager2;
manager.Set<MyClass>();
MyClass *myClass = manager.Get<MyClass>(); 
```

这有点像服务定位器。但它有一些差异，我需要这样的接口声明。我已经有一个这样的实现，但没有接口（它只能通过构造函数中的选项进行配置，我想分离每个接口的实现）

更新：目前我有 2 个实现： 1\. 我使用接口，但它的方法通过参数涵盖了模板参数的所有状态。而且我还有静态函数助手，它转换模板参数并将它们作为参数传递给接口

```
class Manager: IManager{};
Manager manager;
Helper::Set<T>( manager );
Helper::Get<T>( manager ); 
```

1.  我不使用接口，而是在一个实例中注入所有不同的实现并通过构造函数参数对其进行配置。这两种解决方案都很丑陋。

    类经理{公共：经理（选项）；};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:41:14.843

这对于访问者设计模式是可行的。

访问者将新功能注入到类的层次结构中。这不必是虚拟的，可以毫无问题地表示为功能模板。

访问者通常的缺点适用（循环依赖），通常的修复/解决方法（非循环动态访问者技术）也是如此。

这是一个（常规的、循环的）实现示例，快速组合在一起。

```
#include <iostream>
#include <typeinfo>

class Manager1;
class Manager2;

class Visitor
{
  public:
  virtual void visit (Manager1*) = 0;
  virtual void visit (Manager2*) = 0;
};

class IManager
{
  public:
    template<class T> void Set(T* t);
    template<class T> T *Get();

    virtual void accept(Visitor* v) = 0;
};

class Manager1: public IManager
{
  public:
    template<class T> void Set(T*) 
    { std::cout << "Manager1::Set " << typeid(T).name() << std::endl; }
    template<class T> T *Get() 
    { std::cout << "Manager1::Get " << typeid(T).name() << std::endl; return 0; }
    virtual void accept(Visitor* v) 
    { v->visit(this); }
};

class Manager2: public IManager
{
  public:
    template<class T> void Set(T* t) 
    { std::cout << "Manager2::Set " << typeid(T).name() << std::endl; }
    template<class T> T *Get()
    { std::cout << "Manager2::Get " << typeid(T).name() << std::endl; return 0; }
    virtual void accept(Visitor* v) 
    { v->visit(this); }
};

template <class T>
class GetVisitor : public Visitor
{
  public:
    T* GetFunc(IManager* m) { m->accept(this); return t; }
    void visit(Manager1* m) { t = m->Get<T>(); }
    void visit(Manager2* m) { t = m->Get<T>(); }
  private:
    T* t;
};

template <class T>
class SetVisitor : public Visitor
{
  public:
    void SetFunc(IManager* m, T* tt) { t = tt; m->accept(this); }
    void visit(Manager1* m) { m->Set(t); }
    void visit(Manager2* m) { m->Set(t); }
  private:
    T* t;
};

template<class T> void IManager::Set(T* t)
{ SetVisitor<T> v; v.SetFunc(this, t); }
template<class T> T *IManager::Get()
{ GetVisitor<T> v; return v.GetFunc(this); }

class Foo {};

int main ()
{
  IManager* mgr1 = new Manager1;
  IManager* mgr2 = new Manager2;

  int a = 5;
  const char* b = "abc";
  double c = 1.0;
  Foo d;

  mgr1->Set(&a);
  mgr1->Set(&b);
  mgr1->Set(&c);
  mgr1->Set(&d);
  mgr1->Get<Foo>();

  mgr2->Set(&a);
  mgr2->Set(&b);
  mgr2->Set(&c);
  mgr2->Set(&d);
  mgr2->Get<Foo>();

} 
```

可以用一些 s 来打破循环`dynamic_cast`，但每个用户`Set`和`Get`仍将依赖于*所有* `Manager`类。这就是模板在 C++ 中的工作方式。如果这是不可接受的，那么模板可能不是这项工作的正确工具。

# ruby-on-rails-3.2 - 在rails minitest中发布htmp

> ID：15064395
> 
> 赞同：0
> 
> 时间：2013-02-25T10:02:47.680
> 
> 标签：ruby-on-rails-3.2, minitest

我想从 minitest 将 xml 发布到控制器。

它在正常模式下的工作方式是这样的：

curl -X POST -H "Content-Type: text/xml" -d "@/Users/boti/Rails/clients/kevin/search_server/db/search.xml" localhost:3000/search

我尝试这样做：

```
test "search with invalid xml" do
  path_to_file = File.join Rails.root.to_s, 'test', 'search_invalid.xml'
  xml = File.read( path_to_file )
  @request.env['RAW_POST_DATA'] = xml
  post "/search/search", xml, {"Content-type" => "text/xml"} 
```

但是这样我得到了这个例外：

```
NoMethodError: undefined method `symbolize_keys' for #<String:0x007fbd7d863188> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:30:00.367

我在测试中这样做：

```
path_to_file = File.join Rails.root.to_s, 'test', 'search_invalid_xml.xml'
xml = File.read( path_to_file )
@request.env['RAW_POST_DATA'] = xml
post :search, nil, {"Content-type" => "text/xml"} 
```

然后在我的控制器中这样：

```
search_doc = Nokogiri::XML.parse request.raw_post 
```

# c# - 为什么运算符'as'比'is'慢？

> ID：15064400
> 
> 赞同：0
> 
> 时间：2013-02-25T10:03:02.673
> 
> 标签：c#, reflection, operators

我有下一节课：

```
public class A
{
    public int MyProperty { get; set; }
} 
```

Main中的以下代码：

```
object obj = new A();

Stopwatch sw = Stopwatch.StartNew();
var res = obj as A;
if (res != null)
{
    res.MyProperty = 10;
    Console.WriteLine("obj is A (as)" + sw.Elapsed);
}
sw.Stop();

Stopwatch sw2 = Stopwatch.StartNew();
if (obj.GetType() == typeof(A))
{
    A a = (A)obj;
    a.MyProperty = 10;
    Console.WriteLine("obj is A (GetType)" + sw2.Elapsed);
}
sw2.Stop();

Stopwatch sw3 = Stopwatch.StartNew();
var isA = obj is A;
if (isA)
{
    A a = (A)obj;
    a.MyProperty = 19;
    Console.WriteLine("obj is A (is)" + sw3.Elapsed);
}
sw3.Stop();

Console.ReadKey(); 
```

结果是：

```
obj is A (as) 00:00:00.0000589
obj is A (GetType) 00:00:00.0000024
obj is A (is) 00:00:00.0000006 
```

关键是运算符“is”的工作速度总是比“as”快。为什么'as'比'is'慢？甚至 GetType() 也比 'as' 快。与 'is' 和 GetType() 相比，什么代表导致此类延迟的 'as' 运算符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:08:16.330

我猜这是第一个`Console.Write`必须打开到控制台的流，因此需要更多时间。

无论如何，写到控制台比做一个演员要多得多的时间，所以你不能从你的测试中得出任何关于演员表的结论。

进行十亿次演员阵容并且每次演员都不向控制台写入任何内容，会给您一个更合理的结果：

```
object obj = new A();
int iterations = 1000000000;

Stopwatch sw = Stopwatch.StartNew();
for (int i = 0; i < iterations; i++) {
  var res = obj as A;
  if (res != null) {
    res.MyProperty = 10;
  }
}
sw.Stop();
Console.WriteLine("obj is A (as)" + sw.Elapsed);

Stopwatch sw2 = Stopwatch.StartNew();
for (int i = 0; i < iterations; i++) {
  if (obj.GetType() == typeof(A)) {
    A a = (A)obj;
    a.MyProperty = 10;
  }
}
sw2.Stop();
Console.WriteLine("obj is A (GetType)" + sw2.Elapsed);

Stopwatch sw3 = Stopwatch.StartNew();
for (int i = 0; i < iterations; i++) {
  var isA = obj is A;
  if (isA) {
    A a = (A)obj;
    a.MyProperty = 19;
  }
}
sw3.Stop();
Console.WriteLine("obj is A (is)" + sw3.Elapsed); 
```

示例输出：

```
obj is A (as)00:00:00.3937249
obj is A (GetType)00:00:00.3452988
obj is A (is)00:00:01.0193541 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:39:28.537

如果显示“as”比“is”慢，则您的测量结果不正确。

不能这样的原因是“as”和“is”关键字都生成了一条[`isinst`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.isinst.aspx)IL指令，但是“is”指令生成了对返回值的额外检查。

您不需要执行任何计时来确定这一点，因为您可以使用反射器检查生成的 IL 代码。

例如，这个方法：

```
static bool isTest(object value)
{
    return value is Random;
} 
```

生成此 IL：

```
.method private hidebysig static bool isTest(object 'value') cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: isinst [mscorlib]System.Random
    L_0006: ldnull 
    L_0007: cgt.un 
    L_0009: ret 
} 
```

虽然这样：

```
static object asTest(object value)
{
    return value as Random;
} 
```

生成：

```
.method private hidebysig static object asTest(object 'value') cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: isinst [mscorlib]System.Random
    L_0006: ret 
} 
```

"is" 关键字生成与 "as" 关键字相同的 IL 以及一些附加指令；因此，对于这种用法，“is”*必须比“as”慢。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:10:41.980

我认为这可能是因为您也在设置`MyProperty`，所以第一次这样做时，属性设置器是 JIT 编译的。

尝试运行这段代码，有无注释行，并检查差异：

```
 object obj = new A();

    // uncomment these lines and see the difference
    // A tmp = new A();
    // tmp.MyProperty = 100;

    Stopwatch sw = Stopwatch.StartNew();
    var res = obj as A;
    if (res != null) {
        res.MyProperty = 10;
    }
    sw.Stop();
    Console.WriteLine("as : " + sw.Elapsed);

    Stopwatch sw2 = Stopwatch.StartNew();
    if (obj.GetType() == typeof(A)) {
        A a = (A)obj;
        a.MyProperty = 10;
    }
    sw2.Stop();
    Console.WriteLine("GetType : " + sw2.Elapsed);

    Stopwatch sw3 = Stopwatch.StartNew();
    var isA = obj is A;
    if (isA) {
        A a = (A)obj;
        a.MyProperty = 19;
    }
    sw3.Stop();
    Console.WriteLine("is : " + sw3.Elapsed); 
```

# c - unsigned int * 代替 int

> ID：15064404
> 
> 赞同：3
> 
> 时间：2013-02-25T10:03:13.293
> 
> 标签：c, function, pointers

我声明并定义一个函数如下：

```
unsigned int doSomething(unsigned int *x, int y)
{
    if(1) //works
    if(y) //reports the error given below

    //I use any one of the ifs above, and not both at a time

    return ((*x) + y); //works fine when if(1) is used, not otherwise
} 
```

我从 main() 调用函数如下：

```
unsigned int x = 10;
doSomething(&x, 1); 
```

编译器报错和警告如下：

```
passing argument 1 of 'doSomething' makes pointer from integer without a cast [enabled by default]|

note: expected 'unsigned int *' but argument is of type 'int'| 
```

我尝试对函数返回类型、函数调用以及参数类型使用所有可能的组合。我哪里错了？

完整代码：

```
unsigned int addTwo(unsigned int *x, int y)
{
    if(y)
        return ((*x) + y);
}
int main()
{
    unsigned int operand = 10;
    printf("%u", addTwo(&operand, 1));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:12:26.023

尝试在 main() 中显式声明它

如果没有正确声明，编译器假定它默认返回 int

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:14:21.527

我也在 Windows 上使用过 gcc 4.4.3。
该程序编译成功并产生输出“11”：

```
#include <stdio.h>

unsigned int doSomething(unsigned int *x, int y);

int main()
{
    unsigned int res = 0;
    unsigned int x = 10;

    res = doSomething(&x, 1);

    printf("Result: %d\n", res);

    return 0;
}

unsigned int doSomething(unsigned int *x, int y)
{
    if(y)
    {
        printf("y is ok\n");
    }

    if(1)
    {
        printf("1 is ok\n");
    }

    return ((*x) + y); 
} 
```

请检查这是否适合您，然后将其与您的程序进行比较。
确保您已正确声明该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:16:38.803

您将返回一个`unsigned int`(x) 添加到一个`int`(y) 中，该 (y) 可以是一个已签名的`int`。如果不强制转换第二个操作数 (y)，如果您打算仅`unsigned int`在此函数中返回，这可能会导致未定义的行为。

# android - Twitter4j 3.0 for Android，上传图片

> ID：15064408
> 
> 赞同：1
> 
> 时间：2013-02-25T10:03:28.020
> 
> 标签：android, image, post, upload, twitter4j

有人开始使用 Twitter4j 3.0 版进行 Android 集成吗？

我正在尝试在我的 Android 项目中使用这个库，并完成“UploadImage”功能，但我发现的大部分信息都与较低版本有关。谁能给我一些建议，好吗？非常感谢。

# c# - 使用方法扩展数组，c#

> ID：15064415
> 
> 赞同：-9
> 
> 时间：2013-02-25T10:03:39.527
> 
> 标签：c#, arrays

我有一个预定义长度为 2 的数组。

```
private int[] numbers = new int[2]; 
```

现在，我想编写一个方法来创建一个数组，该数组的大小是当前状态的两倍，并将所有数据复制到其中。然后它将数组引用分配给这个新的。关于我应该如何开始使用该方法的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:05:28.287

您不需要自己执行此操作 - 它已经存在于[`Array.Resize`](http://msdn.microsoft.com/en-us/library/bb348051.aspx)：

```
Array.Resize(ref numbers, numbers.Length * 2); 
```

# ruby-on-rails - 将在 Rails 应用程序中分页问题

> ID：15064424
> 
> 赞同：0
> 
> 时间：2013-02-25T10:04:20.777
> 
> 标签：ruby-on-rails, pagination, will-paginate

我有一个应用程序，它根据结果的数量对两个模型进行分页，可以有一个集合，该集合`two models or one`被分页，因此集合的总数始终为 12（每页计数）。

现在，由于我通过了`total_entries`最终分页，所以总页数是正确的，但是由于集合大小始终`current_page`为.`1``12`

如何修改视图助手以使 WP 根据`params[:page]`我发送的内容更改页码。

出现在第 2 页和第 3 页等的链接是可点击的，并导致正确的分页结果，但始终保留在第 1 页，`next_page`链接不起作用。

**这是我在视图中的分页**

```
<%= will_paginate @collection, :renderer => "RemoteLinkRenderer", :params => {:controller => 'doc_managers',:action => @action} %> 
```

**这是我在控制器中的个人和最终分页**

```
f = Folder.action_folder_collection(@action, current_user).paginate(:page => params[:page], :per_page => 12)
if (f.count < 12)
  #d = Document.action_document_collection(@action, current_user)
  d = Document.action_document_collection(@action, current_user).paginate(:page => d_page(params[:page], fc, dc), :per_page => per_page-f.count)
end

@collection = collection.flatten.paginate(:page => page(params[:page], collection.flatten.size),:per_page => 12, :total_entries => total) 
```

现在因为`@collection`总是分页并且它的大小`12`总是，所以它保留在 page 中`1`。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:27:04.913

您可以在其中定义`:per_page`选项`will_paginate`以显示每页的总页数。

```
<%= will_paginate @collection, :renderer => "RemoteLinkRenderer", :params => {:controller => 'doc_managers',:action => @action}, :per_page => 12 %> 
```

如果您想建立`next page`链接，请按照[此 SO 帖子](https://stackoverflow.com/questions/6121448/will-paginate-how-to-build-a-next-page-link?rq=1)。

# c# - 在网格视图页面索引上显示进度条

> ID：15064432
> 
> 赞同：0
> 
> 时间：2013-02-25T10:05:13.633
> 
> 标签：c#, javascript, asp.net, gridview, progress-bar

我想在网格视图页面索引上显示进度条。我已经在按钮单击时显示了一个进度条。当用户从 1 更改为 2 时，我想显示相同的内容。这是我使用的模式弹出窗口：

```
 <asp:Panel ID="PanLoad" runat="server" CssClass="modalPopup">
        <asp:UpdatePanel ID="UpdatePanel7" runat="server">
        <ContentTemplate>
    <asp:UpdateProgress ID="UpdateProgress1" runat="server"  DisplayAfter="0">
    <ProgressTemplate>
        <div align="center">
     <img src="Images/icon_Loading.gif" id="ImgLoading" alt="loading" runat="server" />
<br />
    </div>
</ProgressTemplate>
    </asp:UpdateProgress>
        </ContentTemplate>
        </asp:UpdatePanel>
        </asp:Panel> 
```

我使用了一个 javascript 函数并通过单击按钮调用它。

```
<script language="javascript" type="text/javascript">
        function ShowModalPopup(ModalBehaviour) {
            $find(ModalBehaviour).show();
        }

        function HideModalPopup(ModalBehaviour) {
            $find(ModalBehaviour).hide();
        }        
    </script> 
```

帮我在gridview分页上实现它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:09:13.027

您可以将更新面板的初始化和结束请求用作：

```
var prm = Sys.WebForms.PageRequestManager.getInstance();    
prm.add_initializeRequest(InitializeRequest);
prm.add_endRequest(EndRequest);

function InitializeRequest(sender, args) {
   $find('ModalBehaviour').show();      
}

function EndRequest(sender, args) {
   $find('ModalBehaviour').hide();
} 
```

关于 MSDN 上的此事件：http: [//msdn.microsoft.com/en-us/library/bb384136 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb384136(v=vs.100).aspx)

# perl - 将 Unix 时间戳转换为 Perl 中的可读日期

> ID：15064446
> 
> 赞同：25
> 
> 时间：2013-02-25T10:06:02.903
> 
> 标签：perl, timestamp

我有一些 Unix 时间戳（例如，1357810480，所以它们主要是过去的）。如何使用 Perl 将它们转换为可读的日期格式？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-25T23:19:50.807

快速壳单线：

```
perl -le 'print scalar localtime 1357810480;'
Thu Jan 10 10:34:40 2013 
```

或者，如果您碰巧在文件中有时间戳，则每行一个：

```
perl -lne 'print scalar localtime $_;' <timestamps 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-25T11:04:07.903

[Time::Piece](https://metacpan.org/module/Time::Piece)的完美使用（Perl 5.10 以来的标准）。

```
use 5.010;
use Time::Piece;

my $unix_timestamp = 1e9; # for example;

my $date = localtime($unix_timestamp)->strftime('%F %T'); # adjust format to taste

say $date; # 2001-09-09 02:46:40 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-25T10:12:31.043

你可以使用

```
my ($S, $M, $H, $d, $m, $Y) = localtime($time);
$m += 1;
$Y += 1900;
my $dt = sprintf("%04d-%02d-%02d %02d:%02d:%02d", $Y, $m, $d, $H, $M, $S); 
```

但它有点简单`strftime`：

```
use POSIX qw( strftime );
my $dt = strftime("%Y-%m-%d %H:%M:%S", localtime($time)); 
```

`localtime($time)``gmtime($time)`如果更合适，可以替换为。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-25T10:07:24.870

你可以使用[`localtime`](http://perldoc.perl.org/functions/localtime.html)它。

```
my ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime($unix_timestamp); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-05-07T21:15:47.750

或者，如果您有一个嵌入时间戳的文件，您可以使用以下命令将它们转换到位：

```
$ cat [file] | perl -pe 's/([\d]{10})/localtime $1/eg;' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-25T16:05:46.530

我喜欢 JDawg 的回答，但无法让它在我正在使用的 RHEL 系统上正常工作。我能够让它工作。希望这会对某人有所帮助。它显示带有转换时间戳的文件的内容。

`cat filename | perl -pe 's/(\d+)/localtime($1)/e'`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-02T23:24:09.160

太添加到答案中，您还可以将 localtime 替换为 gmtime 以获取 UTC 时间。我发现这在我的 bash 脚本中非常有用：

世界标准时间：

```
echo 1357810480  | perl -nE 'say scalar gmtime $_' 
```

当地的：

```
echo 1357810480  | perl -nE 'say scalar localtime $_' 
```

*如果您不需要在输出末尾换行，则可以`say`替换为。`print`

# java - Android TCP：错误 EHOSTUNREACH

> ID：15064448
> 
> 赞同：3
> 
> 时间：2013-02-25T10:06:06.960
> 
> 标签：java, android, tcp, wifi

我在我的 android 应用程序中使用 TCP 连接。连接在专用线程中运行。

我的代码：

```
class ReceiverThread extends Thread {
Handler handler;

ReceiverThread(Handler h) {
    handler = h;
}

@Override
public void run() {

    try {
            socketTCP = new Socket((SERVERIP), SERVERPORT);
            in = new BufferedReader(new InputStreamReader(
                    socketTCP.getInputStream()));
            socketTCP.setSoTimeout(20000);

            while (TCPRunning) {

                String strTcp = in.readLine().toString();
                i++;
                Message msg = handler.obtainMessage();
                Bundle b = new Bundle();
                b.putString("getStr", strTcp + "\n");
                msg.setData(b);
                handler.sendMessage(msg);

            }

        } catch (UnknownHostException e) {
            Log.v("TcpClient", "Unknown host");
            try {
                socketTCP.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            e.printStackTrace();

        } catch (SocketException e) {
            // Erreur TimeOut
            Message msg = handler.obtainMessage();
            Bundle b = new Bundle();
            b.putString("getStr", "Error");
            msg.setData(b);
            handler.sendMessage(msg);
            e.printStackTrace();

        } catch (IOException e) {
            if (socketTCP != null) {
                try {
                    socketTCP.close();
                    socketTCP = null;
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }

        } finally {
            try {
                i = 0;
                if (in != null) {
                    in.close();
                }
                if (socketTCP != null) {
                    socketTCP.close();
                    socketTCP = null;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

然后，当我启动我的应用程序时，我将 android 设备连接到另一台设备的 wifi；它运作良好：我接收到另一台设备发送的数据。当我停止连接并重新启动时（几秒钟后）它可以工作。

但是当我等待 2 或 3 分钟时，连接变得不可能：

我得到以下异常：

```
02-25 10:40:32.638: W/System.err(4384): java.net.ConnectException: failed to connect to /192.168.56.1 (port 50000): connect failed: EHOSTUNREACH (No route to host)
02-25 10:40:32.648: W/System.err(4384):     at libcore.io.IoBridge.connect(IoBridge.java:114)
02-25 10:40:32.648: W/System.err(4384):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-25 10:40:32.648: W/System.err(4384):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
02-25 10:40:32.648: W/System.err(4384):     at java.net.Socket.startupSocket(Socket.java:566)
02-25 10:40:32.648: W/System.err(4384):     at java.net.Socket.tryAllAddresses(Socket.java:127)
02-25 10:40:32.658: W/System.err(4384):     at java.net.Socket.<init>(Socket.java:177)
02-25 10:40:32.658: W/System.err(4384):     at java.net.Socket.<init>(Socket.java:149)
02-25 10:40:32.658: W/System.err(4384):     at nke.service.wificonnection.ThreadWifi$ReceiverThread.run(ThreadWifi.java:163)
02-25 10:40:32.658: W/System.err(4384): Caused by: libcore.io.ErrnoException: connect failed: EHOSTUNREACH (No route to host)
02-25 10:40:32.658: W/System.err(4384):     at libcore.io.Posix.connect(Native Method)
02-25 10:40:32.658: W/System.err(4384):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
02-25 10:40:32.668: W/System.err(4384):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-25 10:40:32.668: W/System.err(4384):     at libcore.io.IoBridge.connect(IoBridge.java:112)
02-25 10:40:32.668: W/System.err(4384):     ... 7 more 
```

如果我想再次使用连接，我必须刷新wifi连接（在Android的参数中，停止并重新启动wifi并连接到设备的wifi）。

可能是什么问题呢？错误后关闭套接字时是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-27T17:00:14.833

该`EHOSTUNREACH`错误意味着目的地没有响应。

基本上有几种方法可以发生这种情况：

*   数据链路层已消失（即 WiFi 已掉线）
*   路由表已更改，数据包不再到达所需目的地
*   防火墙导致数据包被丢弃。
*   远程主机没有响应连接请求（端口可能已关闭但已过滤）

您可以尝试连接到目标上的其他端口。如果当您的应用程序不起作用时这有效，则接收（服务器）应用程序不再侦听。如果所有可访问的端口突然都无法访问，那么这是您的 WiFi 或路由表或一般防火墙问题。

您仍然可以拥有到该主机的有效 IP 路由，但如果出于安全原因*过滤*连接请求，您将收到此错误。过滤对于封闭的端口很常见，因此设备的端口扫描除了一个空洞之外什么都不会显示，就好像那个地址没有任何东西一样。我找不到任何明确的参考资料表明 Android 会这样做，但似乎很有可能。

# eclipse - Tomcat 上的 Eclipse 部署/调试 Web 应用程序扩展（即 Alfresco）

> ID：15064453
> 
> 赞同：1
> 
> 时间：2013-02-25T10:06:20.497
> 
> 标签：eclipse, web-applications, deployment, alfresco, remote-debugging

我正在使用 Eclipse 和 Tomcat 在 Alfresco 上开发 Web 应用程序扩展。这意味着我的`tomcat webapps`文件夹看起来像：

```
drwxr-xr-x 15 svil01 users      4096 25 feb 09:54 alfresco
-rw-r--r--  1 svil01 users 142241824 25 feb 09:54 alfresco.war
drwxr-xr-x 12 svil01 users      4096 25 feb 09:56 share
-rw-r--r--  1 svil01 users  27755504 25 feb 09:54 share.war
... 
```

我有一个 Eclipse 项目（称为它`PrjExt`），其中有一些 java 类和一些 jsp，它们是 alfresco 的扩展，所以这些应该例如：

```
TOMCAT_HOME/webapps/alfresco/WEB-INF/classes
TOMCAT_HOME/webapps/alfresco/ 
```

我知道 Alfresco 要求将它们放入 AMP 文件中，但这在开发阶段是不可行或有效的。

应该有一种从 Eclipse 热部署和调试的方法，就像 WTP 插件一样。问题是 WTP 部署程序集映射使用文档基目录，它将发布到：

```
TOMCAT_HOME/webapps/PrjExt/ 
```

最终，更改项目名称它将发布到 alfresco，但不是增量，它只会删除原始的 alfresco 内容，这不在我的项目中。

我正在寻找 Eclipse 对 java 源更改或资源更改的自动刷新，以及服务器刷新和调试功能。

有没有办法在不将所有 Alfresco webapp 源代码和资源放入我的每个扩展项目的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:03:42.523

您可以使用**Ant 构建工具**将您的扩展项目部署到 alfresco 文件夹中。( `TOMCAT_HOME/webapps/alfresco/WEB-INF/classes,TOMCAT_HOME/webapps/alfresco/`)

*   这样，您就不需要将您的扩展项目与 alfresco 同名。
*   不要擦除 alfresco 文件夹下的任何文件。

示例扩展项目可以在[这里](http://ecmarchitect.com/images/articles/alfresco-people/someco-people.zip)找到。您需要查看的唯一两个文件是**build.xml**和**build.properties**文件。

build.properties 定位您想要部署扩展项目的位置。我希望这可以帮助你。

# c# - 在哪里可以找到 Lucene.Net.Analysis 中的包？

> ID：15064454
> 
> 赞同：0
> 
> 时间：2013-02-25T10:06:26.700
> 
> 标签：c#, lucene.net, analyzer

祝你一周愉快！我的开始并不顺利，因为我找不到看似简单的东西，即 Lucene.Net.Analysis 中的命名空间。我已经使用 NuGet 安装了 Lucene.Net 3.0.3 lib 并添加了对我的项目的引用，但我无法访问 Analysis 中的命名空间和类。好像我错过了一些微不足道的东西。

我正在寻找的命名空间：http: [//lucenenet.apache.org/docs/3.0.3/dd/de5/namespace_lucene_1_1_net_1_1_analysis.html](http://lucenenet.apache.org/docs/3.0.3/dd/de5/namespace_lucene_1_1_net_1_1_analysis.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:04:17.287

看来您还需要**Lucene.Net Contrib 3.0.3** lib：[https ://nuget.org/packages/Lucene.Net.Contrib/](https://nuget.org/packages/Lucene.Net.Contrib/)

# java - 创建引用数组

> ID：15064457
> 
> 赞同：5
> 
> 时间：2013-02-25T10:06:32.103
> 
> 标签：java

如果我有一个类说 A，并且我将这个类的 10 个元素的数组声明为，

`A [] arr=new A[10];`

然后创建 A 的 10 个新对象并将其存储在数组中。

但是，我希望能够在 的行上做一些事情`A arr[10];`，其中​​数组只保存对空对象的引用。

我需要这个的原因是因为我只需要数组来保存我稍后在代码中填写的实例。因此，上述语句创建的对象无论如何都会丢失，据我所知，对象创建是昂贵的。

那么，有没有什么方法可以让一组引用指向我以后想要的对象？或者这是不可能的，我应该求助于使用`ArrayList`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T10:08:21.030

> 如果我有一个类说`A`，并且我声明这个类的 10 个元素的数组，
> 
> ```
> A [] arr=new A[10]; 
> ```
> 
> 然后创建 A 的 10 个新对象并将其存储在数组中。

这是不正确的。*在这里，创建了一个包含十个引用*的数组，并且每个引用都设置为`null`. `A`此代码没有创建的实例。

换句话说，代码已经完全按照您的意愿去做了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T10:08:23.397

如果你这样做了，`A [] arr=new A[10];`那么除了你的数组之外不会创建任何对象，每个字段都将在`null`你初始化它之前。

`A [] arr=new A[10];`只创建存储`A`类对象引用的地方。虽然创建了数组`arr`，但它没有引用任何对象，你不能这样做 like `arr[i].someMethod()`。

要更正它，请在数组中的单个内存中分配对象，如下所示：

```
A [] arr=new A[10];
arr[0] = new A();
arr[1] = new A();
:
: 
```

或在一个循环中，如：

```
 for(i=0; i<10; i++){
      arr[i] = new A();
  } 
```

在那之后`arr`是一个引用数组，指的是一个有效的A类对象。并且在这个表达式之后`arr[i].someMethod()`不会导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:19:45.620

来自[**JLS** 类型的变量：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.3)

> 数组组件是未命名的变量，每当创建一个新的数组对象（[第 10 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)，第 15.10 节）时，就会创建并初始化为默认值（[第 4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)[节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)）。当不再引用数组时，数组组件实际上不再存在。

从[4.12.5 开始。变量的初始值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)

> 对于所有引用类型（第 4.3 节），默认值为**null**。

所以正如你所说：

> 如果我有一个类说 A，并且我将这个类的 10 个元素的数组声明为，
> A [] arr=new A[10];
> 然后创建 A 的 10 个新对象并将其存储在数组中。

这是不正确的。但你想要的是正确的。

> 那么，有没有什么方法可以让一组引用指向我以后想要的对象？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-24T03:22:51.617

这是一个常见的 OOP 问题，可以使用`Null Object`设计模式来解决。

为了不必初始化***n 个***对象，您可以创建一个相同类型的静态对象，例如：

```
public class A {
  public static final A NULL = new A();
.
.
.
} 
```

现在这个对象可以通过调用来充当你的空引用：

```
 A[] arr = new A[10];
Arrays.fill(arr, A.NULL); 
```

如果您想检查空值，`.equals`这也很方便地利用了。`. hashCode`

# c# - Sqlite 数据库中的 Int Identity(1, 1) 字段

> ID：15064459
> 
> 赞同：1
> 
> 时间：2013-02-25T10:06:36.607
> 
> 标签：c#, visual-studio, sqlite

起初我使用 SQl Server 来创建我的数据库，但我现在使用 Sqlite 来创建我的数据库，我这样做是因为它只需要一个非常小的数据库，但是在将数据库转换为 SQLite 时我遇到了一个问题，在 SQL 服务器中，我会使用：

```
ID int identity(1, 1) 
```

有一个自动编号字段。这个方法不能在 SQlite 中使用，我想知道我应该怎么做，我已经尝试过这样的事情：

```
create table settings(ID int autoincrement primary key, data text); 
```

但这对我没有帮助。谢谢你的时间。

编辑：

我得到的错误是：

SQL 错误：SQL 错误：AUTOINCREMENT 只允许在 INTEGER PRIMARY KEY 上使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:11:41.040

没救怎么办？因为在 SQLite for WinRT（最新版本）中，以下工作非常好：

```
CREATE TABLE IF NOT EXISTS Settings(
Id INTEGER PRIMARY KEY AUTOINCREMENT,
Data TEXT); 
```

# batch-file - 在for循环Windows批处理中将换行符附加到变量

> ID：15064461
> 
> 赞同：1
> 
> 时间：2013-02-25T10:06:40.017
> 
> 标签：batch-file, append, newline, windows-scripting

我正在遍历命令的结果，并将它们全部附加到`!results!`该循环中的一个变量 ( ) 中。在循环结束时，如果结果不为空，则打印它们。我希望每个结果都出现在新行上。

```
setlocal EnableDelayedExpansion
set results=
set lf=^

for /f "delims=" %%a in ('call mvn dependency:analyze ^| findstr "WARNING"')
    do ( set results=!results!!lf!%%a )
    if not [!results!]==[] (
        echo. ------------------------------------
        echo. FOUND MATCHES 
        echo. ------------------------------------
        echo. !results! 
        echo. ------------------------------------
        echo. ------------------------------------
        echo. && echo.
    ) 
```

我正在尝试使用我在这里看到的新行批处理黑客，但它似乎在这种情况下不起作用。

**我得到了什么**

```
------------------------------------
FOUND MATCHES 
------------------------------------
[WARNING] Used undeclared dependencies found: [WARNING]    org.springframework:spring-jms:jar:3.0.5.RELEASE:compile   [WARNING]    org
    .springframework:spring-beans:jar:3.0.5.RELEASE:compile         [WARNING]    xml-apis:xml-apis:jar:1.3.04:compile
------------------------------------
------------------------------------ 
```

**我想要什么**

```
------------------------------------
FOUND MATCHES 
------------------------------------
[WARNING] Used undeclared dependencies found:
[WARNING]    org.springframework:spring-jms:jar:3.0.5.RELEASE:compile   
[WARNING]    org.springframework:spring-beans:jar:3.0.5.RELEASE:compile         
[WARNING]    xml-apis:xml-apis:jar:1.3.04:compile
------------------------------------
------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:55:30.320

为了让它完全运行，我必须添加一些语句并在和`setlocal`之间添加额外的空行。一旦我这样做了，我实际上看到的输出与你不同：`set lf=^``for`

```
 !results!!lf!%a
[WARNING] a
[WARNING] c 
```

只需在以下内容之前添加以下内容，就可以很容易地在我的（Win7）机器上解决这个问题`for`：

```
set results= 
```

输出中会有一个前导空行，但是当数据添加到`results`.

但是考虑到你得到的输出的不同，我想我们需要采取不同的方法来让它为你工作。无论如何，这应该比使用换行符更强大。

```
@echo off
setlocal
setlocal EnableDelayedExpansion

set showed_header=0
for /f "delims=" %%a in ('call mvn dependency:analyze ^| findstr "WARNING"') do (
   if !showed_header!==0 (
      set showed_header=1
      echo ------------------------------------
      echo FOUND MATCHES 
      echo ------------------------------------
   )

   echo %%a
)

if %showed_header%==1 (
   echo ------------------------------------
   echo ------------------------------------
   echo.
   echo.
) 
```

测试使用`perl -e"print qq{[WARNING] a\nb\n[WARNING] c\n}"`.

# r - R：ggplot2 条形图和误差线

> ID：15064462
> 
> 赞同：3
> 
> 时间：2013-02-25T10:06:49.290
> 
> 标签：r, ggplot2

由于 ggplot2 (0.9.3) 的新版本，我在绘制带有误差线的条形图时遇到了问题。所以我有一个这样的数据框：

```
 group N        val         sd         se         ci
1     206 3 37.2269533  7.9688645  4.6008261 19.7957568
2     207 3  2.0731505  2.2843009  1.3188417  5.6745180
3     208 3  2.2965978  1.4120606  0.8152536  3.5077531
4     209 3  3.1085132  1.1986664  0.6920504  2.9776525
5     210 3  3.3735251  1.9226134  1.1100214  4.7760365
6     211 3  4.0477951  2.9410503  1.6980162  7.3059739
7     212 3  1.2391158  1.2345554  0.7127709  3.0668055
8     213 2  1.3082374  1.1234220  0.7943793 10.0935460 
```

我想为每个组绘制 val +- s ：我在升级之前这样做了：

```
ggplot(dfc, aes(x=factor(group), y=factor(val)) +  geom_bar(position=position_dodge()) + geom_errorbar(aes(ymin=val-se, ymax=val+se),width=.1,position=position_dodge(.9)) 
```

它给了我：

将变量映射到 y 并使用 stat="bin"。使用 stat="bin"，它将尝试将 y 值设置为每组中的案例数。这可能会导致意外行为，并且不会在未来版本的 ggplot2 中被允许。如果您希望 y 表示案例计数，请使用 stat="bin" 并且不要将变量映射到 y。如果您希望 y 表示数据中的值，请使用 stat="identity"。有关示例，请参见 ?geom_bar。（已弃用；最后在 0.9.2 版中使用）

所以有人知道如何解决这个问题吗？谢谢

N。

![ggplot 条形图](../Images/104d031fd83416d741371f76c610563f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:12:42.733

这就是你所追求的吗？

```
my.df <- read.table(text = "group N        val         sd         se         ci
206 3 37.2269533  7.9688645  4.6008261 19.7957568
207 3  2.0731505  2.2843009  1.3188417  5.6745180
208 3  2.2965978  1.4120606  0.8152536  3.5077531
209 3  3.1085132  1.1986664  0.6920504  2.9776525
210 3  3.3735251  1.9226134  1.1100214  4.7760365
211 3  4.0477951  2.9410503  1.6980162  7.3059739
212 3  1.2391158  1.2345554  0.7127709  3.0668055
213 2  1.3082374  1.1234220  0.7943793 10.0935460", header = TRUE)

ggplot(my.df, aes(x = factor(group), y = val)) +  
  geom_bar(position = position_dodge()) + 
  geom_errorbar(aes(ymin=val-se, ymax=val+se)) 
```

![在此处输入图像描述](../Images/b648672720a35a0e5a3c2fefea3b7ad3.png)

# c++ - 在代码中使用 -DBL_MAX 是否安全？

> ID：15064463
> 
> 赞同：8
> 
> 时间：2013-02-25T10:06:57.910
> 
> 标签：c++

我想要极值。

```
#include <iostream> 
using namespace std; 
#include <math.h>
#include <limits.h>
#include <values.h>

#define THRESHOLD 2*DBL_MIN

#define FEQ(x, y) (fabs((x) - (y)) < THRESHOLD)

int main( )
{ 
double  a = -DBL_MAX; // I want here minimum value of double
if(FEQ(a,-DBL_MAX))
cout<<"Equal " <<endl;
else
cout<<"NOt equal"<<endl;
return 0;

} 
```

那么，`-DBL_MAX`在代码中使用是否安全？如果有人知道更好的方法，请在这里分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T10:09:26.147

`DBL_MAX`是标准库的一部分。因此，它并不是特别不安全。

但是，在不可靠的意义上，比较非整数浮点值的相等性本质上是不安全的。

那是因为浮点运算可能以比您选择的类型更高的精度执行，结果来回转换，并不总是像您想象的那样。

* * *

顺便说一句，定义一个宏，如：

```
#define FEQ(x, y) (fabs((x) - (y)) < THRESHOLD) 
```

……不安全：你很容易成为不受欢迎的文本替换的受害者，而且它很碍眼。

而是使用一个`inline`函数，即使`inline`不能保证优化：

```
inline bool feq( double const x, double const y ) { return fabs( x - y ) < THRESHOLD; } 
```

然后常量也是如此`THRESHOLD`，它应该只是 C++ 中的常量：

```
double const threshold = 2*DBL_MIN; 
```

# jquery - 无法使用 Jquery 找到空白列表

> ID：15064466
> 
> 赞同：-1
> 
> 时间：2013-02-25T10:07:08.063
> 
> 标签：jquery, asp.net

在我的 Dom 中，我得到了一些`li`，其中包括一些 as.net 文本框作为它们的子项。我需要将一些文本框设置为可见 false。当我这样做时，`li`围绕此文本框的包裹在 html 中显示为空.所以我决定删除它们，我使用了这段代码（还有更多）

```
 <script type="text/javascript">
    $(document).ready(function (e) {
        $('#u li').each(function () {
            if ($(this).html().length == 0) {
                $(this).remove();
            }
        });
    });
</script> 
```

令我惊讶的是，没有`li`进入空的循环。注意添加的 HTML

```
 <ul id="u">
                   <li class="first-item odd-item">
                       <span id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_lblFirstname">Firstname</span>
                        <input type="text" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_txtFirstname" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$cphContents$ShopConfirmation_2$txtFirstname">
                        <span style="color:Red;visibility:hidden;" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_reqirefieldFirstname">*</span>
                   </li>
                   <li class="odd-item">
                       <span class="m-left" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_lblLastname">Lastname</span>
                        <input type="text" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_txtLastname" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$cphContents$ShopConfirmation_2$txtLastname">
                       <span style="color:Red;visibility:hidden;" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_reqirefieldLastname">*</span>
                   </li>
                   <li class="third-item odd-item">
                       <span id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_lblEmployeenumber">Emloyee Number</span> 
                        <input type="text" id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_txtEmployeenumber" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$cphContents$ShopConfirmation_2$txtEmployeenumber">
                    </li>
                    <li class="odd-item">

                    </li>
                    <li class="odd-item">
                        <span id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_lblAddress">Address</span>
                        <select id="ContentPlaceHolderDefault_cphContents_ShopConfirmation_2_dropdownaddress" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$cphContents$ShopConfirmation_2$dropdownaddress">
    <option value="-----------Select-----------">-----------Select-----------</option>
    <option value="dfddfd">dfddfd</option>
    <option value="gdfgfg">gdfgfg</option>
    <option value="fhgfgfgf">fhgfgfgf</option>

</select>
                    </li>
                    <li class="third-item last-item odd-item">

                    </li>

                  </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:09:46.317

从您编辑到问题中的 HTML 来看，`<li>`元素内部没有内容。但是，`innerHTML`元素的 不是空字符串，它是一个包含一些空格的字符串。简单地修剪 HTML 应该可以工作：

```
$(document).ready(function (e) {
    $('#u li').each(function () {
        if ($.trim($(this).html()).length == 0) {
            $(this).remove();
        }
    });
}); 
```

看看[这个 jsFiddle 演示](http://jsfiddle.net/h6fC2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:13:15.303

```
$('#u li').each(function(){
   if($('input', this).is(':hidden')){
      $(this).remove();
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:15:04.347

```
if ( $(this).is(':empty') ){  // BOOLEAN TRUE / FALSE
  //do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:27:47.363

更新：我现在投票支持@Anthony Grist 的回答 - 空格似乎是问题所在。

我认为 OP 不是在尝试检查，`<input type="hidden">`而是在检查== 'none'的`<input>`元素。`style.display`

所以，这里有一个解决方案：

```
$('#u li input').each(function() {
    var display = $(this).css('display');
    if (display=='none') {
        $(this).closest('li').remove();
    }
}); 
```

# c# - Windows Phone：在 OnNavigatedTo 中调用异步方法

> ID：15064469
> 
> 赞同：6
> 
> 时间：2013-02-25T10:07:24.753
> 
> 标签：c#, windows-phone-8, windows-phone

在我的 WP8 应用程序中，我想在页面导航到时调用 Async 方法。

我想过用**async关键字标记****OnNavigatedTo**方法是这样的：

 **```
async protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            await myAsyncMethod();
        } 
```

有没有更好的方法来实现这一点，用 async标记**OnNavigatedTo是否有问题？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:12:19.510

不，这正是你应该做的。将 OnNavigatedTo 标记为异步，然后执行您需要执行的任何操作。**

# android - 使用自定义适配器填充 ListView

> ID：15064476
> 
> 赞同：1
> 
> 时间：2013-02-25T10:07:56.320
> 
> 标签：android, listview, custom-adapter

我想用 a`ListView`中的多个元素填充 a `custom ListView Adapter`。

我试过[这个教程](http://www.technotalkative.com/android-multi-column-listview/)。

不会引发异常，但它不会在我的`ListView`.

这是代码：

**歌词.java：**

```
 package de.lichtenberger.gottschalk.android;

import static de.lichtenberger.gottschalk.android.Constant.DAUER;
import static de.lichtenberger.gottschalk.android.Constant.INTERPRET;
import static de.lichtenberger.gottschalk.android.Constant.TITEL;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;

import com.parse.FindCallback;
import com.parse.Parse;
import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class Lyrics extends Activity {

    ImageButton back;
    ListView songList;
    TextView textAnzeige;
    private ArrayList<String> Titelliste = new ArrayList<String>();
    private ArrayList<String> Interpretliste = new ArrayList<String>();
    private ArrayList<String> Dauerliste = new ArrayList<String>();
    private ArrayAdapter<String> aa;
    private SAdapter sA;
    ProgressDialog dialog;
    private ArrayList<HashMap> list;

     @Override
       public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_lyrics);

            Parse.initialize(this, "hGxasGU6e0WQAOh5JIOGDfvFBKrYyBJKXIzxBfAG", "WsOPsXerpsFjsjekKKbZnnjAHvXy5PQHVQEB8Cqu");

            setupUI();
            setupOnClickListeners();
            new getData().execute();

            populateList();
            sA = new SAdapter(this, list);
            songList.setAdapter(sA);
            sA.notifyDataSetChanged();

        }

    private void populateList() {

        list = new ArrayList<HashMap>();
        HashMap temp = new HashMap();

        for(int i=1; i<= Titelliste.size(); i++){

            temp.put(TITEL, Titelliste.get(i).toString());
            temp.put(INTERPRET, Interpretliste.get(i).toString());
            temp.put(DAUER, Dauerliste.get(i).toString());
            list.add(temp);         

        }

    }

    private class getData extends AsyncTask<Void, Void, SAdapter>{

        ProgressDialog dialog;
        @Override
        protected void onPreExecute() {
            dialog = new ProgressDialog(Lyrics.this);
            dialog.setMessage("Please wait, while loading!");
            dialog.setIndeterminate(true);
            dialog.setCancelable(false);
            dialog.show();
        }

        @Override
        protected SAdapter doInBackground(Void... params) {
            ParseQuery pq = new ParseQuery("SongDatenbank");
            pq.whereExists("Titel");
            pq.findInBackground(new FindCallback() {

                @Override
                public void done(List<ParseObject> liederListe, ParseException e) {
                    if(e==null){
                        Log.d("Parse", "Objektliste empfangen");

                            ParseObject x;

                        for(int i=0;i<liederListe.size();i++){
                            x = liederListe.get(i);
                            Titelliste.add(x.getString("Titel"));
                            Dauerliste.add(x.getString("Dauer"));
                            Interpretliste.add(x.getString("Interpret"));
                        }

                        x = liederListe.get(0);

                        Log.d("Parse", x.getString("Titel"));

                    }else{

                        Log.d("Parse", "Objektliste nicht empfangen");
                    }
                }
            });
            return null;
        }

        protected void onPostExecute(SAdapter result) {

                    dialog.dismiss();
                    populateList();
                    sA = new SAdapter(Lyrics.this, list);
                    songList.setAdapter(sA);
                    sA.notifyDataSetChanged();
        }

    }

    private void setupOnClickListeners() {

        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent back = new Intent(Lyrics.this, Lagerfeuer_Lieder.class);
                startActivity(back);

            }
        });
    }

    private void setupUI() {

        back = (ImageButton)findViewById(R.id.back);
        songList = (ListView)findViewById(R.id.list);
        textAnzeige = (TextView)findViewById(R.id.lyricsView);

    }   

} 
```

我的适配器：

```
package de.lichtenberger.gottschalk.android;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

import static de.lichtenberger.gottschalk.android.Constant.DAUER;
import static de.lichtenberger.gottschalk.android.Constant.TITEL;
import static de.lichtenberger.gottschalk.android.Constant.INTERPRET;

public class SAdapter extends BaseAdapter
{
    public ArrayList<HashMap> list;
    Activity activity;

    public SAdapter(Activity activity, ArrayList<HashMap> list) {
        super();
        this.activity = activity;
        this.list = list;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return list.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return list.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    private class ViewHolder {
           TextView titel;
           TextView artist;
           TextView duration;

      }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

                ViewHolder holder;
                LayoutInflater inflater =  activity.getLayoutInflater();

                if (convertView == null)
                {
                    convertView = inflater.inflate(R.layout.list_row, null);
                    holder = new ViewHolder();
                    holder.titel = (TextView) convertView.findViewById(R.id.title);
                    holder.artist = (TextView) convertView.findViewById(R.id.artist);
                    holder.duration = (TextView) convertView.findViewById(R.id.duration);
                    convertView.setTag(holder);
                }
                else
                {
                    holder = (ViewHolder) convertView.getTag();
                }

                HashMap map = list.get(position);
                holder.titel.setText(map.get(TITEL).toString());
                holder.artist.setText(map.get(INTERPRET).toString());
                holder.duration.setText(map.get(DAUER).toString());

            return convertView;
    }

} 
```

这是我的activity_lyrics.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background" >

    <ImageButton 
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="0dp"
        android:contentDescription="back"
        android:id="@+id/back"
        android:background="@drawable/back"
        android:text="@string/Lagerfeuer"/>

    <ImageView 
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignTop="@id/back"
        android:layout_toRightOf="@id/back"
        android:background="@drawable/back2"

        android:contentDescription="back2"/>

   <ListView
        android:layout_below="@id/back"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector"
        android:id="@+id/list"
        />
</RelativeLayout> 
```

还有我的 list_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

    <!--  ListRow Left sied Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:background="@drawable/image_bg"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:src="@drawable/guitar_1"/>

    </LinearLayout>

    <!-- Title Of Song-->
    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Rihanna Love the way lie"
        android:textColor="#040404"
        android:typeface="sans"
        android:textSize="15sp"
        android:textStyle="bold"/>

    <!-- Artist Name -->
    <TextView
        android:id="@+id/artist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/title"
        android:textColor="#343434"
        android:textSize="10sp"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Just gona stand there and ..." />

    <!-- Rightend Duration -->
    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/title"
        android:gravity="right"
        android:text="5:45"
        android:layout_marginRight="5dip"
        android:textSize="10sp"
        android:textColor="#10bcc9"
        android:textStyle="bold"/>

     </RelativeLayout> 
```

如果有人可以查看该代码并可以给我一些如何解决我的问题的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:11:39.033

用于`onPostExecute`在 AsyncTask 的方法执行完成后为 ListView 设置 Adapter，`doInBackground`而不是在执行 AsyncTask 后立即调用它，如下所示：

```
 @Override
 protected void onPostExecute(SAdapter result) {

            dialog.dismiss();

            // populate Listview here...
            populateList();
            sA = new SAdapter(Lyrics.this, list);
            songList.setAdapter(sA);
            sA.notifyDataSetChanged();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T03:03:41.627

可能是一个愚蠢的答案，但是

> HashMap 是一种原始类型。对泛型 HashMap 的引用应该被参数化

尝试：

```
HashMap <String, String> map 
```

在适配器和主类主体中更改它。同样的问题发生在我身上，但不知道为什么，我看到的唯一区别是 hashmap 引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:47:06.893

你可以使用这样的东西：

```
@Override
protected void onPostExecute(List<Contact> result) {            
    super.onPostExecute(result);
    dialog.dismiss();
    adpt.setItemList(result);
    adpt.notifyDataSetChanged();
}

@Override
protected void onPreExecute() {        
    super.onPreExecute();
    dialog.setMessage("Downloading contacts...");
    dialog.show();            
} 
```

可以看[这里](http://www.survivingwithandroid.com/2013/01/android-async-listview-jee-and-restful.html)（Android Async ListView–JEE And RestFul）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:17:41.990

```
listview= (ListView)findViewById(R.id.listview);
listview.setOnItemSelectedListener(this);
String days[] = {"Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"};
ArrayAdapter<String> newAdpt= new ArrayAdapter<String>(this,android.R.layout.simple_listview_item,days);
newAdpt.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);
listview.setAdapter(newAdpt); 
```

# types - 在参数中传递类型 fun<'a>？

> ID：15064479
> 
> 赞同：1
> 
> 时间：2013-02-25T10:08:14.827
> 
> 标签：types, parameters, f#

How can I pass a type `fun<'a>` in parameter in F#?

```
Example -> type myClass(a : int, myDelegate : fun<'a>)
    let theFunc = myDelegate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:35:19.243

我想你想要

```
type mytype<'a> (a:int,myDelegate:'a->unit) = 
    let theFunc = myDelegate 
```

或者，如果`fun`在其他地方定义了某种类型，您将需要使用反引号表示法，因为`fun`它是 F# 中的保留字

```
type mytype<'a> (a:int,myDelegate:``fun``<'a>) = 
    let theFunc = myDelegate 
```

# mysql - MySQL：我的主键有一些问题

> ID：15064481
> 
> 赞同：0
> 
> 时间：2013-02-25T10:08:17.893
> 
> 标签：mysql, sql, database

当我从数据库中删除一个人及其元数据时，如果我将新人添加到数据库中，数据库会计算 ID + 1，这通常是正确且安全的方式，对吗？

那么当我删除meta_id（主键）为10的人时，下一个添加的人能否再次获得meta_id 10？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:11:11.140

实际上，MySQL 将保留一个内部索引迭代器，无论您从数据库中删除的数据如何，该迭代器都会递增。因此，如果您创建一个主键 ID 为 10 的新行，然后删除该行并创建一个新行，如果您依赖 auto_increment 迭代您的 ID，则新行的主键 ID 将为 11。这种行为是预期的。

简单来说，没有。MySQL 的 auto_increment 不允许您描述的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:21:57.470

除了到目前为止发布的答案之外，请记住数据库的主键只有一个目的 - 识别一行。它不是为了方便使用顺序编号。当您想要实现您所描述的功能时，有很多含义 - 在将数据写入硬盘时，您会扰乱 MySQL（更准确地说，是 InnoDB 引擎）的内部结构，从而使其变慢。

如果您需要某种与记录相关的顺序编号，您可以创建触发器来处理它，或者在显示数据库中的记录时使用某种编号方法。您不会为此目的使用主键或 auto_increment。

# woocommerce - 将产品添加到 Woocommerce 中的各种分组产品

> ID：15064484
> 
> 赞同：0
> 
> 时间：2013-02-25T10:08:29.343
> 
> 标签：woocommerce

我想知道是否有人知道是否有一种方法可以在 woocommerce 中将产品添加到各种分组产品中，而不仅仅是一个似乎是下拉框中默认设置的产品。实际上，要将产品添加到多个组中，我将不得不复制我想要执行此操作的每个产品，即 180 个产品！

干杯

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:09:30.493

您可能正在寻找[**Product Bundles**](http://www.woothemes.com/products/product-bundles/)或[**Chained Products**](http://www.woothemes.com/products/chained-products/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T21:32:53.387

Composite Products 插件中的“Composite”捆绑包似乎可以解决问题，但谁愿意花 80 美元购买 WooCommerce 包，如果按照 Matt 的建议去做似乎相对简单，而不是将产品与仅一个父组关联，输入字段可以是列表类型，然后该产品可以轻松添加到多个父组？

我现在面临和马特一样的问题……买还是不买复合产品包？我现在只有几个产品，这会有所帮助，所以我倾向于不购买，并且可能会创建一个可变产品，其中每个可变父级包含所有子产品作为单独的选项。这意味着在每个父项中重复输入每个子项，也使子项产品的库存跟踪变得复杂，但是对于产品很少的小企业来说，这更有意义......

太糟糕了 WooCommerce 免费店面包没有将其作为标准提供，在我看来这似乎是基本需求......

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-17T16:34:12.857

实际上是的，woocommerce 套餐的价格非常高。我通常使用 Magento 进行电子商务工作，我想这次尝试 woocomerce 和所有特定功能的很多麻烦，我需要支付 100 美元的一些包。如果您可以在 woocommerce 和 Magento 之间进行选择，我会说选择 Magento！

# less - 为什么 LESS 不会覆盖在两个相同选择器中声明的属性？

> ID：15064485
> 
> 赞同：5
> 
> 时间：2013-02-25T10:08:30.910
> 
> 标签：less

这是一个代码（test.less）：

```
body {
    padding: 50px;
}

body {
    padding: 20px;
} 
```

为什么在编译成 CSS 后我有这个：

```
body {
  padding: 50px;
}
body {
  padding: 20px;
} 
```

我认为 LESS 会覆盖*body*类，而在 CSS 中我只有一个*body*类。

有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T01:42:03.197

在这方面，Less 与 CSS 没有任何不同。它所做的是重写嵌套块，如

```
body {
  padding: 50px;
  h1 {
    color: blue;
  }
} 
```

进入

```
body {
  padding: 50px;
}
body h1 {
  color: blue;
} 
```

因此，在 LESS 中，就像在 CSS 中一样，您编写选择器的顺序确实很重要，并且如果冲突不能通过[特定性](http://www.w3.org/TR/CSS2/cascade.html#specificity)来解决（请参阅[Nicolas Gallagher 的帖子](http://nicolasgallagher.com/css-cascade-specificity-inheritance/)以获得关于其工作原理的更易读的解释），作为一般规则-of-thumb，最后出现的规则将被应用，从而覆盖之前的规则。

# php - MySQL 调用所有值的更简单方法，而不是在 INNER JOIN 中单独调用它们

> ID：15064490
> 
> 赞同：2
> 
> 时间：2013-02-25T10:08:52.493
> 
> 标签：php, mysql

有没有办法调用 INNER JOIN 中的所有值而不是单独调用它们？

```
SELECT l.*, p.pageID AS pageID, p.pageType AS pageType, p.pageTitle AS pageTitle ..... FROM languages l INNER JOIN pages p ON .... 
```

这是从表“页面”获取记录并在我的获取记录中使用它们的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:11:02.833

用作**Akam**指定

```
SELECT l.*, p.* ..... FROM languages l INNER JOIN pages p ON .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:12:10.913

我认为这应该有效：

```
SELECT l.*, p.* FROM languages l INNER JOIN pages p ON ... 
```

除非`languages`和`pages`具有重复名称的字段，`pages`否则字段将覆盖该字段`languages`。在这种情况下你可能需要这个：

```
SELECT l.*, p.*, l.some_field as some_alias FROM languages l INNER JOIN pages p ON ... 
```

# url - 使用 docBase 设置默认 webapp

> ID：15064492
> 
> 赞同：2
> 
> 时间：2013-02-25T10:09:00.057
> 
> 标签：url, tomcat, web-applications

我已将 Tomcat Catalina 上下文配置如下，以将**appA**设置为默认 docBase。

```
<Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">    
  <Context  path="" docBase="appA"/>
</Host> 
```

使用此设置，我可以`webapps/appA/js/test.js`通过点击访问

```
http://localhost/js/test.js 
```

我面临且无法理解的问题是：当我在 webapps 文件夹（`webapps/appB`，`webapps/appC`）下有多个应用程序时，我能够访问

```
http://localhost/appA/js/test.js 
```

像这样。`webapps/appA`但是，如果我在 webapps ( )下只有一个应用程序，这将不起作用。

我已阅读有关此属性的 Tomcat 文档，但找不到答案。有人可以帮我理解`docBase`吗？

# android - setOnItemClickListener 不适用于 Android Spinner

> ID：15064498
> 
> 赞同：15
> 
> 时间：2013-02-25T10:09:21.743
> 
> 标签：android, spinner

setOnItemClickListener 不适用于 android Spinner。这是我的代码：

```
supplier.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position,
                        long id) {
                    // TODO Auto-generated method stub

                    String msupplier=supplier.getSelectedItem().toString();
                    Log.e("Selected item : ",msupplier);

                }
            }); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-25T10:16:30.663

setOnItemClickListener 不适用于 android spinner。或者，尝试使用此方法：

> setOnItemSelectedListener

像这样更改您的代码：

```
supplier.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                String msupplier=supplier.getSelectedItem().toString();

                Log.e("Selected item : ",msupplier);
}

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-31T14:24:20.553

`OnItemSelectedListener()`与点击侦听器的用途不同。最重要的是，如果您再次单击当前选定的项目，它不会触发。在某些情况下，这可能不是问题，但在其他情况下，很可能是。所以真正的答案不是告诉人们使用不同的、可能不合适的听众，而是解决最初的问题。:-)

幸运的是，我们可以将点击监听器放在适配器上：

```
public class SpinnerClickAdapter extends BaseAdapter implements SpinnerAdapter {
  protected OnItemClickListener listener;

  public SpinnerClickAdapter(Context context, ..., OnItemClickListener listener) {
    super();

    this.listener = listener;
  }

  @Override
  public View getDropDownView(final int position, View convertView, final ViewGroup parent) {
    if (convertView == null)
      convertView = LayoutInflater.from(context).inflate(R.layout.yourlayout, false);

    convertView.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        if (listener != null)
          listener.onItemClick((AdapterView<?>) parent, v, position, getItemId(position));
      }
    });

    // ...

    return convertView;
  }
} 
```

然后我们可以像往常一样使用它，唯一的区别是不在微调器上而是在适配器上设置它：

```
Spinner spinner = (Spinner) findViewById(R.id.yourspinner);
SpinnerClickAdapter spinnerAdapter = new SpinnerClickAdapter(context, ..., new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // TODO
  }
});
spinner.setAdapter(spinnerAdapter); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-25T10:17:01.570

**1.**我认为您应该检查包含微调器的 xml 文件。确保没有设置`android:clickable = "false"`.

**2.**请检查您的微调器适配器并确保在您的`getView(int position, View convertView, ViewGroup parent)`方法中，您没有设置任何小部件点击回调事件，例如`Button`，，`Imageview``TextView`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-25T10:15:13.803

我可能会偏离路线，但建议您使用`OnItemSelectedListener`比`OnItemClickListener`Spinners 更广泛的方法：

```
supplier.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
        //do something here
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        //optionally do something here
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T10:14:28.437

使用 getItemAtPosition：

```
supplier.getItemAtPosition(position).toString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T10:15:34.113

用这个

```
supplier.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-13T10:59:43.090

我遇到了这个问题。setOnItemClickListener 不适用于微调器。我的解决方案如下：

```
mSpinnerYears.setAdapter(adapter);
    mSpinnerYears.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            Logger.d(new StringBuilder(2).append("TAG:").append(TAG).toString(),
                    new StringBuilder(3).append("click pos = ").append(position).append(
                            mSpinnerYears.getItemAtPosition(position).toString()).toString());
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T10:12:52.820

我认为`supplier`在您的代码中`spinner`，请替换此行

```
 String msupplier=supplier.getSelectedItem().toString(); 
```

使用以下行：

```
 String msupplier= supplier.getItemAtPosition(position).toString(); 
```

# solr - 具有多核的 Solr 完全导入

> ID：15064499
> 
> 赞同：2
> 
> 时间：2013-02-25T10:09:21.907
> 
> 标签：solr, multicore

我正在尝试创建具有多核的 Solr 机器。目前，我的问题是执行初始完全导入。第一个核心完美导入。但是，当我尝试导入第二个核心时，出现以下错误：

```
org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: NativeFSLock@/home/solr/solr/data/index/write.lock
        at org.apache.lucene.store.Lock.obtain(Lock.java:84)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:602)
        at org.apache.solr.update.SolrIndexWriter.<init>(SolrIndexWriter.java:75)
        at org.apache.solr.update.SolrIndexWriter.create(SolrIndexWriter.java:62)
        at org.apache.solr.update.DefaultSolrCoreState.createMainIndexWriter(DefaultSolrCoreState.java:191)
        at org.apache.solr.update.DefaultSolrCoreState.getIndexWriter(DefaultSolrCoreState.java:77)
        at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:157)
        at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:61)
        at org.apache.solr.update.processor.UpdateRequestProcessor.processAdd(UpdateRequestProcessor.java:51)
        at org.apache.solr.update.processor.DistributedUpdateProcessor.doLocalAdd(DistributedUpdateProcessor.java:432)
        at org.apache.solr.update.processor.DistributedUpdateProcessor.versionAdd(DistributedUpdateProcessor.java:557)
        at org.apache.solr.update.processor.DistributedUpdateProcessor.processAdd(DistributedUpdateProcessor.java:325)
        at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:100)
        at org.apache.solr.handler.dataimport.SolrWriter.upload(SolrWriter.java:70)
        at org.apache.solr.handler.dataimport.DataImportHandler$1.upload(DataImportHandler.java:233)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:507)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:411)
        at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:326)
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:234)
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:382)
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429)
Feb 25, 2013 11:54:30 AM org.apache.solr.handler.dataimport.DocBuilder execute 
```

这发生在第二个核心上，无论我从哪个核心开始。我在这里想念什么？每个核心都可以完美地独立运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:15:52.113

This is happening because the index dir for both cores is the same. As soon as you start a full import for one core, there is a write.lock file in that dir, which won't be deleted until the import completes. You anyway want to keep the indexes for the cores in separate dirs, so modify solrconfig.xml like this:

```
 <!-- Used to specify an alternate directory to hold all index data
       other than the default ./data under the Solr home.
       If replication is in use, this should match the replication 
       configuration. -->
  <dataDir>./data/${solr.core.name}</dataDir> 
```

# javascript - 当获得页面被清除的信号时，如何将对象作为插槽添加到 JS？

> ID：15064505
> 
> 赞同：2
> 
> 时间：2013-02-25T10:09:58.750
> 
> 标签：javascript, qt, signals, slot

> ```
> #include <QApplication>  
> #include "QWebFrame"  
> #include "QWebView"  
> #include "directory.h"  
> #include "QObject"  
> 
> int main(int argc, char *argv[])  {  
>     QApplication app(argc, argv);  
>     Directory dir;  
>     QWebView webview;  
> 
>    webview.load(QUrl("/home/dailu/Desktop/Project2.3/Surface.html"));  
> 
>    webview.page()->mainFrame()->addToJavaScriptWindowObject("dir",&dir);  
> 
>    QObject::connect( webview.page()->mainFrame(),  
> 
>                    SIGNAL(javaScriptWindowObjectCleared()),  
> 
>                    webview.page()->mainFrame(),  
> 
>                    SLOT(aaddToJavaScriptWindowObject("dir",&dir)));  
> 
>    webview.show();  
>    return app.exec(); 
> ```
> 
> }

它不工作~~我只是想捕捉页面被清除的信号然后>再次发送对象以确保可以在页面中重新加载数据..我是一个新鲜的Qt语言....所以.could你提供一个演示来理解或修复它..thx！

# java - 将动态内容传递给 jsp:param "value" 属性

> ID：15064512
> 
> 赞同：3
> 
> 时间：2013-02-25T10:10:40.470
> 
> 标签：java, jsp, jakarta-ee

嗨...我想知道是否可以将涉及“if”或“switch”函数的动态内容发送到jsp：param“value”属性...可以发送一个可以用以下方式表示的值

```
<jsp:param name="blah" value="<%=blah%>"/> 
```

现在我要问的是..

```
<jsp:param name="blah" value="<% 
                               if(blah == 1)
                               out.print("The value is 1");
                               if(blah == 2)
                               out.print("The value is 2");
                               %>"/> 
```

上述方法是否可行.. 当我做同样的事情时，我得到一个错误，指出在值属性中的标记之后需要一个“=”符号..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:17:56.970

我建议`blah`在执行您的`jsp`. 这可以在`servlet`使用直接的 Java 中完成。一旦您确定了`blah`将其放入请求中的值，然后再转发到`jsp`.

```
request.setAttribute("blah", "some value"); 
```

然后在您的`.jsp`文件中，您可以使用`jsp expression language`.

```
${blah} 
```

最好将尽可能多的逻辑排除在您的视图（jsp）之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:19:20.907

你会考虑把它改成

```
<% if(blah == 1){ %>
<jsp:param name="blah" value="The value is 1"/>
<%}else{%>
<jsp:param name="blah" value="The value is 2"/>
<%}%> 
```

否则使用等效的 JSTL 标记，例如

```
<c:choose>
   <c:when test="${blan eq 1}">
      <jsp:param name="blah" value="The value is 1"/>
   </c:when>
   <c:otherwise>
      <jsp:param name="blah" value="The value is 2"/>
   </c:otherwise>
</c:choose> 
```

@gabbi，您不一定必须有两个`<jsp:forward>`，而是可以声明另一个变量来保存该值，如下所示：

```
<% 
String blahValue = ""; 
if(blah == 1){
   blahValue = "The value is 1";
}else if(blah==2){
   blahValue = "The value is 2";
}else{
   blahValue = "the value is invalid"; }
%>

<jsp:forward>
   <jsp:param name="blah" value="<%=blahValue%>"/>
</jsp:forward> 
```

# c# - 在关闭请求之前从服务器端读取数据

> ID：15064523
> 
> 赞同：0
> 
> 时间：2013-02-25T10:11:18.143
> 
> 标签：c#, jquery, xmlhttprequest, xmlwriter

在下面的代码中，我有**`tempGsContact`** 哪个是对象，它是一个方法的值，然后我解析 Into **`XML writer`**，如图所示。我需要读取检索到客户端的每个对象，而无需在所有对象完成后等待。我能做些什么来实现这一目标？我希望我的问题很清楚！

```
using (XmlWriter xmlWriter = XmlWriter.Create(HttpContext.Current.Response.OutputStream, xmlWriterSettings))
                {
     for (int count = 0; count < length - 1; count++)
      {
                tempGsContact = ConvertStringToContactObject(_fileContacts[count]);
               if (tempGsContact != null)
                {
                   tempGsContact.ContactSubInfo.Sort(new Comparison<GSContactInfo>((x, y)                 => string.Compare(x.ContactPropertyTitle, y.ContactPropertyTitle)));                                           
                 _fileContacts = null;
                   #region Convert Contact To XML Format                                            
                  xmlWriter.WriteStartElement("Contact");
                  xmlWriter.WriteAttributeString("Name", tempGsContact.DisplayName);
                  xmlWriter.WriteEndElement();
                  xmlWriter.Flush();
                  #endregion                                          
                }
       }
} 
```

# c# - ASP.Net 上的 WIA 2.0 平板扫描

> ID：15064524
> 
> 赞同：1
> 
> 时间：2013-02-25T10:11:18.730
> 
> 标签：c#, asp.net, security, wia

我正在编写应该使用网络扫描仪扫描一些文档并将它们存储在服务器上的 ASP.Net 应用程序。扫描仪将在服务器端设置。我不想使用 Silverlight。
应用程序将在 IIS 7.5 中运行。

我已经能够在本地扫描，我发现当我使用具有管理员权限的服务器端本地帐户的应用程序池身份时，一切正常。但我想使用只有必要权限的用户。
我尝试为 Wia DeviceManager 设置 DCOM，但我仍然收到 wia 组件上的 Access is denied 错误。

有没有办法为用户（在 ApplicationPool 身份中使用）添加所有必要的权限？

# c# - C# 中的属性是否使用反射？

> ID：15064531
> 
> 赞同：2
> 
> 时间：2013-02-25T10:11:37.427
> 
> 标签：c#, .net, custom-attributes

我想知道 C# 中的属性是如何工作的。我知道如何声明一个属性或如何创建一个属性。我想知道如何在特定属性上生成特定行为。我应该使用反射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:14:46.700

除非您使用 PostSharp 之类的 AOP 框架，否则很少有属性可以*直接*影响您的代码，它们只是一些内置属性。您不能将行为添加到自定义属性。因此：是的，您必须使用反射来测试您的自定义属性是否存在，和/或*物化*属性（仅检查存在性比物化它们便宜）。

如果您经常这样做，您可能需要考虑缓存通过属性获得的信息，这样您就不需要在每次需要元数据时都使用反射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:15:49.260

是的。假设你有一个对象 o 并且你想检查你的属性是否存在。你所要做的就是：

```
Type t = o.GetType();
        object[] attributes = t.GetCustomAttributes(typeof(MyCustomAttribute));
        if (attributes.Length>0){
            MyCustomAttribute a = attributes[0] as MyCustomAttribute;
            //use your attribute properties to customize your logic
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:15:03.100

是的，您使用反射来检查类型或成员是否具有自定义属性。这是一个获取给定类型的 MyCustomAttribute 实例的示例。它将返回第一个 MyCustomAttribute 声明或 null（如果未找到）：

```
private static MyCustomAttribute LookupMyAttribute(Type type)
{
    object[] customAttributes = type.GetCustomAttributes(typeof(MyCustomAttribute), true);
    if ((customAttributes == null) || (customAttributes.Length <= 0))
        return null;

    return customAttributes[0] as MyCustomAttribute ;
} 
```

# c++ - 验证 GCC 中的错误

> ID：15064535
> 
> 赞同：10
> 
> 时间：2013-02-25T10:11:46.380
> 
> 标签：c++, templates, gcc, c++11

我想验证以下是 GCC 中的错误，而不是我对 C++ 的理解。考虑以下代码：

```
struct A
{
    struct B
    {
        template< typename U > U as() const { return U(); }
    };

    B operator[]( int ) const { return B(); }
};

template< typename T >
struct as
{
    template< typename U >
    static T call( const U& u )
    {
        return u[ 0 ].as< T >(); // accepted by Clang 3.2, rejected by GCC 4.7
        // return u[ 0 ].template as< T >(); // does not help and is IMHO not needed
        // return u[ 0 ].A::B::as< T >(); // accepted by GCC 4.7
    }
};

int main()
{
    as< int >::call( A() );
} 
```

恕我直言，代码应该没问题，它被 Clang 3.2 接受，但不被 GCC 4.7 接受（4.4 和 4.6 也失败，错误基本相同，但 4.4 产生的消息略有不同）。这是我的外壳的输出：

```
$ clang++-3.2 -O3 -Wall -Wextra -std=c++0x t.cc -o t
$ g++-4.7 -O3 -Wall -Wextra -std=c++0x t.cc -o t
t.cc: In static member function ‘static T as<T>::call(const U&)’:
t.cc:17:21: error: invalid use of ‘struct as<T>’
t.cc: In static member function ‘static T as<T>::call(const U&) [with U = A; T = int]’:
t.cc:18:4: warning: control reaches end of non-void function [-Wreturn-type]
$ 
```

**问题：**这是 GCC 中的错误还是我遗漏了什么？

**编辑：**我有点困惑：http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55576 的 GCC 错误报告在[评论](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55576)#9 中说评论 #3 中的代码是“有效的”。这到底是什么意思？看起来 GCC 的人认为这实际上*是*一个错误，否则他们早就关闭了它？OTOH @Potatoswatter 的答案似乎很清楚，它应该是正确的，我应该针对 Clang 提交错误报告（或者是否已经有这样的错误报告？）

请注意，在澄清上述内容之前，我会犹豫将答案标记为已接受。由于这两个答案都已经很有帮助（一个解释，一个解决），我给了两个答案。

奖励问题：由于我对非叙述性代码投了反对票，我想知道其他人的感受。我试图创建一个 SCCEE，它可以消除所有干扰并专注于技术问题。这就是我更喜欢思考这些事情的方式。那是错的吗？

另外，@EdHeal：为什么代码容易发生灾难？（你认为这不是我拥有的真实代码，对吧？）

**EDIT2：**谢谢，大卫，刚刚注意到你的编辑。我现在会将您的答案标记为已接受，并且我还看到您对 GCC 错误报告发表了评论。我认为这个问题的要点由此得到解答，GCC 得到了另一个提醒。谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:47:59.587

This is a tricky corner of the language. GCC is applying the rule from C++03 §3.4.5/1:

> In a class member access expression (5.2.5), if the `.` or `->` token is immediately followed by an identifier followed by a `<`, the identifier must be looked up to determine whether the `<` is the beginning of a template argument list (14.2) or a less-than operator. The identifier is first looked up in the class of the object expression. If the identifier is not found, it is then looked up in the context of the entire postfix-expression and shall name a class or function template. If the lookup in the class of the object expression finds a template, the name is also looked up in the context of the entire postfix-expression and
> 
> — if the name is not found, the name found in the class of the object expression is used, otherwise
> 
> — if the name is found in the context of the entire postfix-expression and does not name a class template, the name found in the class of the object expression is used, otherwise
> 
> **— if the name found is a class template, it must refer to the same entity as the one found in the class of the object expression, otherwise the program is ill-formed.**

Note that this process was useless because the `template` keyword is already required to disambiguate the `<` token, since the type of the subexpression `u[0]` depends on a template argument.

The reason for doing it this way is to simplify parsing in the case that the template-id is used in a nested-name-qualifier, for example `u[ 0 ].as< T >::bar.baz` where `bar` is a typedef to a base class.

C++11 removes the three bullet points simplifies the process to

> The identifier is first looked up in the class of the object expression. If the identifier is not found, it is then looked up in the context of the entire postfix-expression and shall name a class template.

So this is a bug, and not an old one as I had said previously. The name lookup corner case needs to be removed.

Also, it looks like this quirk could be exploited to allow a single templated expression to alternately refer to a class or a function. Not sure if that's useful, but it's new in C++11.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:22:04.697

# c# - 如何在 NUnit TearDown 中获取测试失败消息

> ID：15064536
> 
> 赞同：5
> 
> 时间：2013-02-25T10:11:46.233
> 
> 标签：c#, nunit

嗨，我想记录测试失败的消息，我知道它可以检查状态

```
TearDown 
```

使用以下

```
TestContext.CurrentContext.Result.Status.ToString(); 
```

可以在 TearDown 中获取测试失败的原因。像下面这样的东西

```
Expected: True
But was:  False

at NUnit.Framework.Assert.That(Object actual, IResolveConstraint expression, String message, Object[] args)
       at NUnit.Framework.Assert.IsTrue(Boolean condition)
       at Test.FileSystemTests.QuoteFiles() in ExampleTests.cs: line 57 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-07T18:51:29.637

如果

```
TestContext.CurrentContext.Result 
```

不包含您要查找的值，您也可以尝试

```
TestExecutionContext.CurrentContext.CurrentResult 
```

这对我在 TearDown 中的 NUnit 3.0 以及其他方法都有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-12T13:01:58.927

您好，不确定您是否找到了解决此问题的方法。但这是我对此的回答。使用 Nunit 3.0，您可以通过以下几行来实现这一点...

```
TestContext.CurrentContext.Result.Outcome.Status; (For test Execution Status)

TestContext.CurrentContext.Result.StackTrace; (For Stack Trace Message)

TestContext.CurrentContext.Result.Message; (For Test Result Message) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:20:28.977

在你的拆解中需要一个状态是一个测试的迹象。拆卸应该随时工作，而不取决于单元测试的结果。我只是让您的系统处于与单元测试之前相同的状态。您可以添加尝试，最后添加到您的拆解中以清理混乱。然而，依赖一个断言（以及更多断言）会使您的拆解代码变得复杂，这是您现在在单元测试中想要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:40:48.547

这个问题：[NUnit: Accessing the Failure Message in TearDown()](https://stackoverflow.com/questions/14340934/nunit-accessing-the-failure-message-in-teardown)可能会对您有所帮助。它的意图似乎足够相似。

# twitter - Api 限制/垃圾邮件

> ID：15064539
> 
> 赞同：0
> 
> 时间：2013-02-25T10:11:53.320
> 
> 标签：twitter

我正在开发一个收听主题标签的网站。当用户使用该 hashgag**并且目前正在关注我们**时，我们会向他发送一条推文，上面写着“我已经阅读了该推文并保存了它”。

那么，这会被视为垃圾邮件吗？我们设定了一个限制，每 10 分钟 8 条推文（最多 48 条推文/小时）

这是我们正在使用的代码：

```
if(!$twitter->get("friendships/exists", array("screen_name_a" => $social_twitter->getScreenName(), "screen_name_b" => "our_twitter_acc"))){
  continue;
 } 
```

你们有什么感想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:10:17.167

这取自 Twitter API 文档

[https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting)

> 未经身份验证的呼叫允许每小时 150 个请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。OAuth 调用每小时允许 350 个请求，并根据请求中使用的 oauth_token 进行测量。

所以你应该没问题

# ruby - 无法使用 ruby 2.0 安装 bundler 1.3.0

> ID：15064542
> 
> 赞同：5
> 
> 时间：2013-02-25T10:12:10.377
> 
> 标签：ruby, rubygems, bundler, ruby-2.0

我安装了 Ruby 2.0.0 并且编译运行良好，但是当我使用`bundle install`它时出现了这个错误：

```
Bundler 与 Ruby 2.0 或 Rubygems 2.0 不兼容。
请升级到 Bundler 1.3 或更高版本。

```

如果我尝试使用以下方式更新它`gem update bundler`：

```
$ gem 更新捆绑器
更新已安装的 gem
没什么可更新的

```

当我尝试更新 RubyGems 时：

```
$ 宝石更新--系统
当前安装的最新版本。中止。

```

我错过了什么？

我正在使用 Ruby 2.0.0-p0 和 RVM 1.18.14。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:58:52.203

Bundler 1.3 还没有发布，直到你必须安装预发布版本：

```
gem install bundler --pre 
```

# c++ - 以前声明为受保护的枚举的访问枚举器

> ID：15064550
> 
> 赞同：1
> 
> 时间：2013-02-25T10:12:27.427
> 
> 标签：c++

对于我的项目，我想扩大以前在基类中声明为受保护的枚举的可见性。

```
class A { 
protected:
    enum E { e = 0 };
};

class B : public A { 
public:
    using A::E;
};

int main()
{
    B::E enum1; // okay
    enum1 = B::e; // fails: test.cpp:3:14: error: A::E A::e is protected
} 
```

原因很简单：

*   我不控制基类，因此我不能`E`公开
*   我不想要一个巨大的 switch-case 语句来在新枚举`B`和`A::E`

我希望（ed）代码编译得很好。

我很好奇。代码编译失败的科学解释是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:16:56.747

公开`A::E`不影响枚举器的名称，因此`e`仍然受到保护。

尝试附加`using`或添加`static const E e = A::e`到 class `B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:45:56.670

这是使用 C++11 范围语义的完美 C++ 代码：

```
int main()
{
    B::E enum1; // okay
    enum1 = B::E::e; // also okay
} 
```

# javascript - 如何将分区的多个画布内容保存到png图像？

> ID：15064551
> 
> 赞同：0
> 
> 时间：2013-02-25T10:12:27.343
> 
> 标签：javascript, jquery, canvas

下午好，

在以下层次结构中，我在一个主要部门中有多个画布：

```
<div id="main">
  <canvas id="one">
  <canvas id="two">
  <div id="main_2">

     <canvas id="three">

  </div>

</div> 
```

我正在主分区内绘制图像，我想导出主分区内的所有内容并将其保存为图像，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:48:36.767

您必须获取画布数据并将其发送到 php 服务器，在那里您可以将其保存为图像！

获取数据并通过ajax发送，

```
var canvasData = canvas.toDataURL("image/png");
var ajax = new XMLHttpRequest();
ajax.open("POST",'save.php',false);
ajax.setRequestHeader('Content-Type', 'application/upload');
ajax.send(canvasData); 
```

PHP,

```
<?php 
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    $unencodedData=base64_decode($filteredData);

    $random_digit=md5(uniqid(mt_rand(), true));

    $fp = fopen( 'yourfolder/new'.$random_digit.'.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
}
?> 
```

图像将保存在“yourfolder/new'.$random_digit.'.png'”中。链接到同一个问题，

[将照片从 javascript 发送到服务器](https://stackoverflow.com/questions/14018307/sending-photo-from-javascript-to-server/14018570#14018570)

# android - 空指针异常

> ID：15064552
> 
> 赞同：1
> 
> 时间：2013-02-25T10:12:27.340
> 
> 标签：android

我制作了 Game1.java 类，其中有一个对话框，其中有 3 个选项-植物、动物、昆虫。当我点击植物时，我们在下面这一行得到 NullPointerException

```
 String[] plant_array = getResources().getStringArray(R.array.plant_category);

 my array.xml fine is here 

   <?xml version="1.0" encoding="utf-8"?>
  <resources>

<string-array name="category">
    <item>Plant</item>
    <item>Animal</item>
    <item>Insect</item>
</string-array>
<string-array name="plant_category">
    <item>VIKASKUMAR</item>
    <item>SOHAN</item>
    <item>NARENDRA</item>
    <item>VISHAL</item>
    <item>PRASHANT</item>
    <item>VIJAYAPANDEY</item>
    <item>SATYA</item>
    <item>NARAYAN</item>
    <item>CHOUBEY</item>
    <item>PRABHA</item>
</string-array>
<string-array name="animal_category">
    <item>VIKASKUMAR1</item>
    <item>SOHAN1</item>
    <item>NARENDRA1</item>
    <item>VISHAL1</item>
    <item>PRASHANT1</item>
    <item>VIJAYAPANDEY1</item>
    <item>SATYA1</item>
    <item>NARAYAN1</item>
    <item>CHOUBEY1</item>
    <item>PRABHA1</item>
</string-array>
<string-array name="insect_category">
    <item>VIKASKUMAR2</item>
    <item>SOHAN2</item>
    <item>NARENDRA2</item>
    <item>VISHAL2</item>
    <item>PRASHANT2</item>
    <item>VIJAYAPANDEY2</item>
    <item>SATYA2</item>
    <item>NARAYAN2</item>
    <item>CHOUBEY2</item>
    <item>PRABHA2</item>
</string-array> 
```

```
 my Game1.java class is here

   public class Game1 extends Activity implements OnClickListener {

public static String key;
private int numwrongguesses;
private boolean flag = false;

private static String TAG = "game";
private Button abtn, bbtn, cbtn, dbtn, ebtn, fbtn, gbtn, hbtn, ibtn, jbtn,
        kbtn, lbtn, mbtn, nbtn, obtn, pbtn, qbtn, rbtn, sbtn, tbtn, ubtn,
        vbtn, wbtn, xbtn, ybtn, zbtn, btnHint;

private ImageView imageview;
private TextView mystword, hinttextView;
static final String KEY_CATEGORY = "com.shagunstudio.hangman.category";
private static final int CATEGORY_PLANT = 0;
private static final int CATEGORY_ANIMAL = 1;
private static final int CATEGORY_INSECT = 2;
protected static final int CONTINUE = -1;
String mysteryWord;
String hint;

private int cat;
int x;

// *************************************
   //HERE NULL POINTER EXCEPTION IS THERE i.e at plant_array[]

String[] plant_array = getResources().getStringArray(R.array.plant_category);
String[] plant_array_hint = getResources().getStringArray(R.array.plant_category_hint);

// ***********************************

String[] animal_array = getResources().getStringArray(R.array.animal_category);
String[] animal_array_hint = getResources().getStringArray(
        R.array.animal_category_hint);

// ***************************************************************

String[] insect_array = getResources().getStringArray(
        R.array.insect_category);
String[] insect_array_hint = getResources().getStringArray(
        R.array.insect_category_hint);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);
    imageview = (ImageView) findViewById(R.id.hangmanimageview);
    abtn = (Button) findViewById(R.id.A_BUTTON);
    abtn.setOnClickListener(this);

    bbtn = (Button) findViewById(R.id.B_BUTTON);
    bbtn.setOnClickListener(this);

    cbtn = (Button) findViewById(R.id.C_BUTTON);
    cbtn.setOnClickListener(this);

    dbtn = (Button) findViewById(R.id.D_BUTTON);
    dbtn.setOnClickListener(this);

    ebtn = (Button) findViewById(R.id.E_BUTTON);
    ebtn.setOnClickListener(this);

    fbtn = (Button) findViewById(R.id.F_BUTTON);
    fbtn.setOnClickListener(this);

    gbtn = (Button) findViewById(R.id.G_BUTTON);
    gbtn.setOnClickListener(this);

    hbtn = (Button) findViewById(R.id.H_BUTTON);
    hbtn.setOnClickListener(this);

    ibtn = (Button) findViewById(R.id.I_BUTTON);
    ibtn.setOnClickListener(this);

    jbtn = (Button) findViewById(R.id.J_BUTTON);
    jbtn.setOnClickListener(this);

    kbtn = (Button) findViewById(R.id.K_BUTTON);
    kbtn.setOnClickListener(this);

    lbtn = (Button) findViewById(R.id.L_BUTTON);
    lbtn.setOnClickListener(this);

    mbtn = (Button) findViewById(R.id.M_BUTTON);
    mbtn.setOnClickListener(this);

    nbtn = (Button) findViewById(R.id.N_BUTTON);
    nbtn.setOnClickListener(this);

    obtn = (Button) findViewById(R.id.O_BUTTON);
    obtn.setOnClickListener(this);

    pbtn = (Button) findViewById(R.id.P_BUTTON);
    pbtn.setOnClickListener(this);

    qbtn = (Button) findViewById(R.id.Q_BUTTON);
    qbtn.setOnClickListener(this);

    rbtn = (Button) findViewById(R.id.R_BUTTON);
    rbtn.setOnClickListener(this);

    sbtn = (Button) findViewById(R.id.S_BUTTON);
    sbtn.setOnClickListener(this);

    tbtn = (Button) findViewById(R.id.T_BUTTON);
    tbtn.setOnClickListener(this);
    ubtn = (Button) findViewById(R.id.U_BUTTON);
    ubtn.setOnClickListener(this);

    vbtn = (Button) findViewById(R.id.V_BUTTON);
    vbtn.setOnClickListener(this);

    wbtn = (Button) findViewById(R.id.W_BUTTON);
    wbtn.setOnClickListener(this);

    xbtn = (Button) findViewById(R.id.X_BUTTON);
    xbtn.setOnClickListener(this);

    ybtn = (Button) findViewById(R.id.Y_BUTTON);
    ybtn.setOnClickListener(this);

    zbtn = (Button) findViewById(R.id.Z_BUTTON);
    zbtn.setOnClickListener(this);

    btnHint = (Button) findViewById(R.id.HINT_BUTTON);
    btnHint.setOnClickListener(this);

    Intent intent = getIntent();
    Bundle bundle = intent.getExtras();
    int category = bundle.getInt(KEY_CATEGORY);
    // bundle.putInt(key, CATEGORY_PLANT);
    mysteryWord = getGameByCategory(category);

    Intent i = getIntent();
    Bundle b = i.getExtras();
    // int c = b.getInt(key);
    b.putInt(KEY_CATEGORY, CONTINUE);

    mystword = (TextView) findViewById(R.id.textviewhangman);
    hinttextView = (TextView) findViewById(R.id.hinttextView1);

    initMystWord();

}

@Override
protected void onPause() {
    super.onPause();

}

@Override
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.A_BUTTON:
        flag = false;
        updateMystWord('A');
        break;
    case R.id.B_BUTTON:
        flag = false;
        updateMystWord('B');
        break;
    case R.id.C_BUTTON:
        flag = false;
        updateMystWord('C');
        break;
    case R.id.D_BUTTON:
        flag = false;
        updateMystWord('D');
        break;
    case R.id.E_BUTTON:
        flag = false;
        updateMystWord('E');
        break;
    case R.id.F_BUTTON:
        flag = false;
        updateMystWord('F');
        break;
    case R.id.G_BUTTON:
        flag = false;
        updateMystWord('G');
        break;
    case R.id.H_BUTTON:
        flag = false;
        updateMystWord('H');
        break;
    case R.id.I_BUTTON:
        flag = false;
        updateMystWord('I');
        break;
    case R.id.J_BUTTON:
        flag = false;
        updateMystWord('J');
        break;
    case R.id.K_BUTTON:
        flag = false;
        updateMystWord('K');
        break;
    case R.id.L_BUTTON:
        flag = false;
        updateMystWord('L');
        break;
    case R.id.M_BUTTON:
        flag = false;
        updateMystWord('M');
        break;
    case R.id.N_BUTTON:
        flag = false;
        updateMystWord('N');
        break;
    case R.id.O_BUTTON:
        flag = false;
        updateMystWord('O');
        break;
    case R.id.P_BUTTON:
        flag = false;
        updateMystWord('P');
        break;
    case R.id.Q_BUTTON:
        flag = false;
        updateMystWord('Q');
        break;
    case R.id.R_BUTTON:
        flag = false;
        updateMystWord('R');
        break;
    case R.id.S_BUTTON:
        flag = false;
        updateMystWord('S');
        break;
    case R.id.T_BUTTON:
        flag = false;
        updateMystWord('T');
        break;
    case R.id.U_BUTTON:
        flag = false;
        updateMystWord('U');
        break;
    case R.id.V_BUTTON:
        flag = false;
        updateMystWord('V');
        break;
    case R.id.W_BUTTON:
        flag = false;
        updateMystWord('W');
        break;
    case R.id.X_BUTTON:
        flag = false;
        updateMystWord('X');
        break;
    case R.id.Y_BUTTON:
        flag = false;
        updateMystWord('Y');
        break;
    case R.id.Z_BUTTON:
        flag = false;
        updateMystWord('Z');
        break;
    case R.id.HINT_BUTTON:
        flag = false;
        useHint();
        break;

    }

}

public String underscore() {
    StringBuffer buffer = new StringBuffer();

    Log.d(TAG, "nameof musteryword is =" + mysteryWord);
    for (int i = 0; i < mysteryWord.length(); i++) {
        Log.d(TAG, "length of  musteryword is =" + mysteryWord.length());
        buffer.append("_ ");
    }
    return buffer.toString();
}

public void initMystWord() {
    mystword.setText(underscore());

}

private String getGameByCategory(int category) {
    String temp = null;
    switch (cat) {
    case CATEGORY_PLANT:
        Random random1 = new Random();
        x = random1.nextInt(5);
        mysteryWord = plant_array[x];
        //hint = plant_array_hint[x];
        temp = mysteryWord;
        break;
    case CATEGORY_ANIMAL:
        Random random2 = new Random();
        x = random2.nextInt(5);
        mysteryWord = animal_array[x];
        //hint = animal_array_hint[x];
        temp = mysteryWord;
        break;
    case CATEGORY_INSECT:
        Random random3 = new Random();
        x = random3.nextInt(5);
        mysteryWord = insect_array[x];
        //hint = insect_array_hint[x];
        temp = mysteryWord;
        break;
    }
    return temp;
} 
```

}

我们得到了空指针异常的错误，当我们调试这个程序源时找不到显示调试器也不工作..请给我答复先生..我会非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:31:21.940

`getResources()`要求`Context`这将是`null`'直到至少`onCreate`方法。请把所有对应`String[]`的`onCreate方法移一下，看看有没有区别。

# php - php - 正则表达式 - 如何解析两个不同标签中的文本

> ID：15064554
> 
> 赞同：1
> 
> 时间：2013-02-25T10:12:30.627
> 
> 标签：php, regex, pcre

我有一个如下的 HTML 字符串：

```
$string = "\n<h2>heading 2</h2>\n\nwhatever we are doing is good to have one thing\n<h3>heading 3</h3>\nnext paragraph goes there\n<h2>new heading 2</h2>\n\npara succeeded for new heading 2\n\n<h2>heading 3</h2>\nand the rest of data"; 
```

我想要标题文本（即在 <h2> 和 </h2> 标记内）和后续文本（直到找到另一个 <h2>）或字符串结尾

我试过类似的东西：

```
$pattern = "/<h2>((?:(?!(<\/h2>)).)*)<\/h2>(.*?)(<h2>)?/is"; 
```

但这并没有达到预期的效果。

我想得到如下：

```
Array
(
[0] => Array
    (
        [0] => <h2>heading 2</h2>
        [1] => <h2>new heading 2</h2>
        [2] => <h2>heading 3</h2>
    )

[1] => Array
    (
        [0] => heading 2
        [1] => new heading 2
        [2] => heading 3
    )

[2] => Array
    (
        [0] => whatever we are doing is good to have one thing\n&lt;h3&gt; heading 3&lt;h3&gt;/h3&lt;h3&gt;\nnext paragraph goes there
        [1] => para succeeded for new heading 2
        [2] => and the rest of data
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:29:00.543

像这样试试

```
preg_match_all('#<h2>(.*)</h2>([^<]*+)#isU', $string, $match);
echo '<pre>' . htmlspecialchars(print_r($match, 1)) . '</pre>'; 
```

或者你可能需要这样

```
preg_match_all('#<h2>(.*)</h2>((?:(?!<h2>).)*+)#isU', $string, $match); 
```

优化版

```
$pattern = '#<h2>(.*)</h2>(.*)(?=(?:<h2>|$))#isU'; 
```

# android - 如何创建一个和android默认浏览器一样的android webview？

> ID：15064557
> 
> 赞同：1
> 
> 时间：2013-02-25T10:12:41.407
> 
> 标签：android, android-webview

我是android开发的新手。所以我创建了一个响应式设计的网站，并尝试创建一个打开 web 视图并显示网站的 android 应用程序。

跟随[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)。

这是我的代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView myWebView = (WebView) findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWebView.loadUrl("http://www.example.co");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

然而，当模拟器启动时，它并没有给我网站所拥有的响应式设计。但是在android默认浏览器上，它工作得很好。那么我该如何解决这个问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:39:57.823

好吧，我找到了解决方案。

```
myWebView.setInitialScale(50); 
```

# java - 哪个是最快的：3 Arraylist synchronized 或以自定义结构为值的 HashMap

> ID：15064561
> 
> 赞同：1
> 
> 时间：2013-02-25T10:12:45.923
> 
> 标签：java, performance, arraylist, hashtable

我必须开发一个Java代码，将数据和投票与人们联系起来。

我有一个名为“Candidate”的课程，其中包含有关候选人的基本信息（和一个唯一的 ID）。

然后，我必须关联连续的投票（整数），对 JLabel 的引用，在哪里显示该候选人的投票，...

最好的方法是什么？

*   3 ArraList（1个候选人，1个投票，1个JLabel）长度相同，每个索引值都引用关于1个候选人的数据？

*   以候选人为键（使用 uid 进行哈希编码）和自定义结构作为包含投票、JLabel 引用和其他数据的值的 HashTable...

我知道 ArrayList 和 HashTable 都应该是 O(1) 来访问和 O(1) 来在最后添加一个值，但它们真的会像性能一样吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:20:29.000

> ArrayList 和 HashTable 都应该是 O(1) 用于访问，O(1) 用于在最后添加一个值，但它们真的会像性能一样吗？

访问和插入 arraylist 和 hashtable 具有相同的开销。但是在 arraylist 中的搜索是`O(N)`在 hashtable 中`O(1)`。
所以如果你需要搜索一个候选哈希表是最好的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:29:37.707

`int[]`如果您有密集的标识符，最快的将是 a 。

在我的观察中，*任何*使用原始值的集合都可能成为性能瓶颈，因为装箱和拆箱以及相关的*内存开销*。如果您的任务是繁重的数字，请不惜一切代价避免这种情况。

快速收集原始值的一种简单方法是使用[GNU Trove](http://trove.starlight-systems.com/)库。

无论哪种方式：**理论上的复杂性**并不能保证实践中的良好性能。理论上，QuickSort 比 HeapSort 差。在实践中，它更好，因为它对 CPU 更友好，并且在实践中可以通过良好的枢轴选择策略来避免最坏的情况。这与 Java 相同：理论上，成本是`O(1)`. 实际上，它可能会带来相当大的内存管理开销。基于 using 的代码`int[]`可能在（例如 ArrayCopy）中有一些操作`O(n)`，但这些操作可以转换为高性能机器代码，并且*实际*成本非常低。

但是：**你真的需要这些吗？**

```
class Candidate {
   int votes;
   JLabel label;
}

ArrayList<Candidate> candidates; 
```

也许是你所需要的！

# android - 在 Android 中限制（限制）每个帐户（由唯一设备确定）的应用安装

> ID：15064563
> 
> 赞同：15
> 
> 时间：2013-02-25T10:12:51.920
> 
> 标签：android, google-play

我已经发布了一个 Android 应用程序。

问题是，如果有人购买了我的应用程序，他可以使用同一个帐户将其安装在多个设备上。

我可以将安装限制为每个帐户的几个（比如说 2 个）唯一设备吗？

如果用户想在具有相同帐户的另一台设备上使用它，则必须先从另一台设备上卸载。

例如，[MyBackup Pro 只允许两个唯一的设备。](https://play.google.com/store/apps/details?id=com.rerware.android.MyBackupPro&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5yZXJ3YXJlLmFuZHJvaWQuTXlCYWNrdXBQcm8iXQ)

如何在我的应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T10:14:46.200

[谷歌帮助你做到这一点](http://developer.android.com/google/play/licensing/index.html)。

[此页面可帮助您进行设置。](http://developer.android.com/google/play/licensing/setting-up.html)

更具体地说，[您似乎想添加一个 DeviceLimiter](http://developer.android.com/google/play/licensing/adding-licensing.html#impl-DeviceLimiter)：

> 在某些情况下，您可能希望您的策略限制允许使用单个许可证的实际设备的数量。这将阻止用户将许可的应用程序移动到多个设备上，并在这些设备上以相同的帐户 ID 使用该应用程序。它还可以通过向其他人提供与许可证相关联的帐户信息来防止用户“共享”应用程序，这些人随后可以在他们的设备上登录该帐户并访问应用程序的许可证。
> 
> LVL 通过提供一个 DeviceLimiter 接口来支持每个设备的许可，该接口声明了一个方法，allowDeviceAccess()。当 LicenseValidator 处理来自许可服务器的响应时，它调用 allowDeviceAccess()，传递从响应中提取的用户 ID 字符串。
> 
> 如果您不想支持设备限制，则无需进行任何工作 — LicenseChecker 类自动使用称为 NullDeviceLimiter 的默认实现。顾名思义，NullDeviceLimiter 是一个“无操作”类，它的 allowDeviceAccess() 方法只为所有用户和设备返回一个 LICENSED 响应。
> 
> 警告：对于大多数应用程序，不建议按设备进行许可，因为：
> 
> 它要求您提供后端服务器来管理用户和设备映射，并且可能会无意中导致用户被拒绝访问他们在另一台设备上合法购买的应用程序。

[可以在这里找到](https://code.google.com/r/android-dev-marketlicensing/source/browse/library/src/com/android/vending/licensing/DeviceLimiter.java?r=9cd599d6902d8b9b8311e4ef8dd20dcccb5e7aba&spec=svn4fe2c52435d8e4ad7d8a47e086b633439f9a8fa6)源代码。`DeviceLimiter`

源代码几乎解释了您将如何使用 DeviceLimiter 来实现您想要的：

```
/* The LICENSED response from the server contains a user identifier unique to
 * the <application, user> pair. The developer can send this identifier
 * to their own server along with some device identifier (a random number
 * generated and stored once per application installation,
 * {@link android.telephony.TelephonyManager#getDeviceId getDeviceId},
 * {@link android.provider.Settings.Secure#ANDROID_ID ANDROID_ID}, etc).
 *
 * The more sources used to identify the device, the harder it will be for an
 * attacker to spoof. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T04:03:39.570

Ascorbin 和 yarian 的答案都很好解释。

据我所知，它可以通过两种方式进行管理。

**1\. 通过谷歌它自己**

**2.通过你自己的实现**

让我们一一检查，

**1\. 通过谷歌它自己**

Ascorbin 的回答很好地解释了如何实现它以及谷歌如何管理它。所以希望你明白了。如果没有，请告诉我。

**2.通过你自己的实现**

如果您有自己的服务器，那么您可以放置​​检查已安装应用设备的代码。每个设备都有唯一的 IMEI 号码，因此您可以轻松跟踪相同的 IMEI 号码并阻止或允许安装应用程序或运行应用程序。

**注意：**如果设备配置了相同的帐户，Google 允许您在另一台设备上使用相同的应用程序。因此在这种情况下，只能通过检测具有不同 IMEI 或 MAC 地址的相同帐户来实现。

希望你明白了。

随意发表评论。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T10:15:53.730

例如，您可以通过 wlan 模块的 MAC 地址或通过 IMEI 识别设备（两者都可以通过 Android 系统服务检索）。接下来是您使用服务器识别安装，如果服务器回复此用户/客户已经在另一台设备上安装了它，您锁定应用程序并告诉用户发生了什么。

# objective-c - NSLocalizedString 特殊情况

> ID：15064567
> 
> 赞同：0
> 
> 时间：2013-02-25T10:13:23.233
> 
> 标签：objective-c, cocoa-touch, cocoa, localization, nslocalizedstring

我正在我的应用程序中进行一些本地化工作。有一些特殊情况，例如在属格形式的瑞典语中。

如果单词以 s 结尾，则不应在单词中添加 s。因此，例如，如果我要写一个姓氏以**“Carl Fabrizius 生日”结尾的人的生日**

因此，您可以理解，根据语言（瑞典语或英语）应用一些逻辑规则。我将如何在 Objective-C 中处理这个问题？

我在想伪代码它看起来像这样：

```
if (current locale == swedish) {
    swedishGenitiveForm();
} else if (current locale == english) {
    englishGenitiveForm();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:21:47.207

通常，这些[语言规则很难以编程方式处理](https://stackoverflow.com/questions/11207860/can-cocoa-automatically-handle-contractions-for-localized-strings-in-french)。如果您可以在翻译级别修改字符串会更好。如果失败了，那么您可以应用一些您建议的规则，但请注意逻辑会不断增长和增长......

# asp.net-mvc-3 - 如何在 mvc3 中获得 html5 和淘汰赛支持

> ID：15064568
> 
> 赞同：0
> 
> 时间：2013-02-25T10:13:24.000
> 
> 标签：asp.net-mvc-3, html, knockout.js

我创建了一个 mvc3 项目，但没有选中 HTML 标记语义支持复选框。现在我正在尝试在我的项目中使用淘汰赛 js。由于淘汰赛仅适用于 html5，因此我从 Visual Studio 中选择了 html5 调试模式。但是 ko.applyBinding 不起作用。请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:38:33.500

愿你的问题是绑定ko。

**尝试为特定的 div id 绑定您的 viewModel，如下面的代码。它可能会解决您的问题**

**html**

```
<div id="container_id">
...
<div> 
```

**脚本：-**

```
ko.applyBindings(new AppViewModel(), document.getElementById('container_id')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:13:54.257

```
For HTML 5 you need to change your HTML structure like below way.

<!DOCTYPE html>
<html>
<head>
</head>
<body>
// Body content will come here.
</body>
</html> 
```

# php - PHP ARRAY 键作为时间戳 & 合并不起作用

> ID：15064570
> 
> 赞同：0
> 
> 时间：2013-02-25T10:13:27.157
> 
> 标签：php, arrays, string, multidimensional-array, merge

我想构建一个以键为时间戳的数组，由于某种原因，当我手动构建它时它可以工作，但是当我尝试合并一个新项目时它不起作用。

我读到合并的最快方法是：array[]，但它在键前添加了一个索引 [0],[1]，我也需要找到解决这个问题的方法。因为我需要通过时间戳访问密钥。

```
$timeStamp=mktime(0, 0, 0, date("m"), date("d"), date("Y"));

$maxCapArray=array();

// IDEAL MERGING BUT NOT WORKING: $maxCapArray[]= $timeStamp => array('Book'=>'BLABLA','Author'=>'BLOBLO');

// (string) NOT WORKING: $maxCapArray[]= (string)$timeStamp => array('Book'=>'BLABLA','Author'=>'BLUBLU');

$maxCapArray = array($timeStamp => array('Book'=>'BLABLA','Author'=>'BLEBLE')); $maxCapArray = array($timeStamp => array('Book'=>'BLABLA','Author'=>'BLIBLI'));

// MANUALLY ONLY TAKES THE LAST ITEM:

echo $maxCapArray[$timeStamp]['Author']; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:20:01.753

您不能添加像`$maxCapArray[]= $timeStamp => array('Book'=>'BLABLA','Author'=>'BLOBLO');`.

*   你可以这样做：

    $v=数组（）；
    $v[]=array("a"=>array(1,2,3));

这将得到：

```
print_r($v);
Array ( [0] => Array ( [a] => Array ( [0] => 1 [1] => 2 [2] => 3 ) ) ) 
```

*   或这个：

    $v["a"]=数组(1,2,3);

这将得到：

```
print_r($v);
Array ( [a] => Array ( [0] => 1 [1] => 2 [2] => 3 ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:22:24.560

目前尚不清楚您最终需要什么结构。

我想你可能需要这样的东西：

```
<?php

// initial an empty array
$maxCapArray=array();

// first run on a day
$timeStampA=mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$maxCapArray[$timestampA] = array('Book'=>'BLABLA','Author'=>'BLEBLE');

// second run on a different day
$timeStampB=mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$maxCapArray[$timestampB] = array('Book'=>'BLABLA','Author'=>'BLEBLE');

// third run on yet another day
$timeStampC=mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$maxCapArray[$timestampC] = array('Book'=>'BLABLA','Author'=>'BLEBLE');

// ...

// to retrieve the Author of a given timestamp
echo $maxCapArray[$timestampA]['Author'];
echo $maxCapArray[$timestampB]['Author'];
echo $maxCapArray[$timestampC]['Author'];

?> 
```

第一行将删除您之前获得的所有数据。请以合乎逻辑的方式使用它们。

另一个猜测：

```
<?php

// initial an empty array
$maxCapArray=array();
$timeStamp=mktime(0, 0, 0, date("m"), date("d"), date("Y"));

// suppose you want $maxCapArray[$timestamp]['Book'] and $maxCapArray[$timestamp]['author']
// to be arrays
if (!isset($maxCapArray[$timestamp])) $maxCapArray[$timestamp] = array();
$maxCapArray[$timestamp]['Book'][]   = 'BLABLA';
$maxCapArray[$timestamp]['Author'][] = 'BLEBLE';

$maxCapArray[$timestamp]['Book'][]   = 'BLABLA 2';
$maxCapArray[$timestamp]['Author'][] = 'BLEBLE 2';

// ...

// you should get an array:
var_dump($maxCapArray[$timestamp]['Author']);

?> 
```

**更新：看来你正在寻找这个**

```
<?php

// initial an empty array
$maxCapArray=array();
$timeStamp=mktime(0, 0, 0, date("m"), date("d"), date("Y"));

// suppose you want $maxCapArray[$timestamp]['Book'] and $maxCapArray[$timestamp]['author']
// to be arrays
if (!isset($maxCapArray[$timestamp])) $maxCapArray[$timestamp] = array();
$maxCapArray[$timestamp]['Author']['Book 1'] = 'Author 1';
$maxCapArray[$timestamp]['Author']['Book 2'] = 'Author 2';
$maxCapArray[$timestamp]['Author']['Book 3'] = 'Author 2';

// ...

// review your array:
var_dump($maxCapArray[$timestamp]['Author']);

// retrieve
$author_name = 'Author A';
$book_name = 'Book 1';
echo $maxCapArray[$timestamp][$author_name][$book_name];

?> 
```

**更多建议**

数组仅针对 1 种特定情况执行索引结构。几天后，您可能需要另一个。也许您需要按书搜索作者，或按书搜索时间戳。谁知道？

我建议您在这些情况下使用关系数据库。您可以在 MySQL 中创建一个数据库表，如下所示：

```
+-----------+---------------------+------------------------------------------+---------------------+
| record_id | author              | book                                     | timestamp           |
+-----------+---------------------+------------------------------------------+---------------------+
| 1         | Jules Verne         | Twenty Thousand Leagues Under the Sea    | 2013-01-12 12:24:00 |
| 2         | Jules Verne         | Journey to the Center of the Earth       | 2013-01-12 13:01:00 |
| 3         | William Shakespeare | Hamlet                                   | 2013-01-12 16:51:00 |
+-----------+---------------------+------------------------------------------+---------------------+ 
```

MySQL 会自动完成所有的索引工作。

然后当您需要数据时，您可以连接到数据库并读取：

```
<?php

// connect to 
mysql_connect('localhost', 'db_user', 'db_password');
mysql_select_db('library_database');

// ask database of books of a certain timestamp and of certain author
$results = mysql_query('SELECT author FROM book_records WHERE 
  timestamp="2013-01-12 13:01:00" AND book="Journey to the Center of the Earth"');

// read the database's answer to $books array
$authors = array();
while (($row = mysql_fetch_assoc($results)) != FALSE) {
  $authors = $row['author'];
}

// you may examine the array here
// this is a list of author of the specific timestamp
// and of specific book
var_dump($authors);

?> 
```

如果您有其他需要，您可以更改代码：

```
<?php

// connect to 
mysql_connect('localhost', 'db_user', 'db_password');
mysql_select_db('library_database');

// if you want to have all the timestamp of a book and an author
// you may just do this
$results = mysql_query('SELECT timestamp FROM book_records WHERE 
  author="Jules Verne" AND book="Journey to the Center of the Earth"');

// read the database's answer to $books array
$timestamps = array();
while (($row = mysql_fetch_assoc($results)) != FALSE) {
  $timestamps = $row['timestamp'];
}

// this is the list of related timestamp
var_dump($timestamps);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:26:26.897

你可能正在寻找这个：

```
$timeStamp = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$maxCapArray = array();

$maxCapArray[$timeStamp] = array();
$maxCapArray[$timeStamp][] = array('Book'=>'BLABLA','Author'=>'BLEBLE');
$maxCapArray[$timeStamp][] = array('Book'=>'BLABLA','Author'=>'BLIBLI');

echo $maxCapArray[$timeStamp][0]['Author']; // == BLEBLE 
```

请注意，如果您用于`array_merge()`合并数字索引数组，则键将从零开始重新索引，请参阅[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# c# - 添加双 httpHeaders

> ID：15064572
> 
> 赞同：4
> 
> 时间：2013-02-25T10:13:38.103
> 
> 标签：c#, asp.net, asp.net-mvc, iis

我想在我的回复中添加 httpHeader

我想使用这段代码：

```
private void AddCustomHeader()
         {
             if (string.IsNullOrEmpty(HttpContext.Response.Headers.Get("Access-Control-Allow-Origin")))
             {
                 // Custom header
                 HttpContext.Response.AddHeader("Access-Control-Allow-Origin", "*");
             }
         } 
```

但是当使用 VS_server 运行时，它总是会在 localhost 上失败

```
This operation requires IIS integrated pipeline mode. 
```

如果我添加一个已经存在的标题会发生什么？

```
HttpContext.Response.AddHeader("name","value"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:40:13.977

我会说（总结评论），你应该尝试使用：

```
 HttpContext.Current.Response.Headers.Set("Access-Control-Allow-Origin", "*"); 
```

作为

1.  它将替换相应标头的任何现有值
2.  `Response.AddHeader`只是为了保持与以前版本的兼容性

关于您遇到的异常，您应该尝试打开您的 Web 项目属性，“Web”=> 选中“使用本地 IIS Web 服务器”（而不是“使用 VS 开发服务器”）。

根据您的配置，您可能需要选中“使用 IIS Express”

此外，这应该对自定义标题[https://stackoverflow.com/a/15043027/1236044有所帮助](https://stackoverflow.com/a/15043027/1236044)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T10:28:17.067

关于*此操作需要 IIS 集成管道模式*错误：

1.  在 IIS 管理器中选择应用程序池
2.  点击“基本设置...”
3.  确保在对话框中为“托管管道模式”选择了“集成”模式

[来源](http://forums.asp.net/post/2329580.aspx)。

关于你的第二个问题（如果你添加一个已经存在的标题会发生什么）它只会添加另一个同名的值：

```
HttpContext.Response.AddHeader("name", "value1");
HttpContext.Response.AddHeader("name", "value2"); 
```

将产生一个带有名称`name`和值的标头`value1, value2`（在 ASP.NET 4.5、IIS Express 中尝试过，尽管我怀疑这很重要。）

# c# - 最佳程序实践：字典或同步数组

> ID：15064573
> 
> 赞同：2
> 
> 时间：2013-02-25T10:13:42.753
> 
> 标签：c#, .net, vb.net

我想知道什么是最好的，或者是否有更多的可能性。我正在从数据库中检索数据，例如，我需要存储 IDS 和 NAMES。最好将它们存储在索引“同步”的不同数组中，例如（Vb.net）：

```
Dim ids As New List(Of Integer)()
Dim sCods As New List(Of String)()

For each elem In dataBaseData
    ids.Add(CInt(elem("id")))
    sCods.Add(elem("cod").ToString())
Next 
```

所以我知道第 3 个位置的索引上的 id 对应于另一个数组上的相同索引。或者最好这样做：

```
Dim sCods As New Dictionary(Of Integer, String)()

For each elem In dataBaseData
    sCods.Add(CInt(elem("id")), elem("cod").ToString())
Next 
```

现在假设我也必须存储子元素。我的意思是，对于每个 id，一个元素列表，所以字典将类似于：

```
Dim sSubs As New Dictionary(Of Integer, List(Of String))() 
```

只需使用数组：

```
Dim sSubs() As New List(Of String)()
Dim sOneSub As String = sSubs(idIndex)(subIndex) 
```

然后想象有很多数据要检索。我将示例放在 Vb.Net 中，但只有示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:39:54.850

正如您所描述的，将数据存储在单独的“同步数组”中肯定是不好的做法。这不是一个好主意的原因有很多：

*   **它不是自记录的**——代码的结构没有什么明显的迹象表明一个数组中的第 3 项存储与另一个数组中的第 3 项相同的对象的数据。因此，使这一点显而易见的唯一方法是在代码中添加注释，解释数据的存储方式和原因。虽然评论绝对是一件好事，但不需要评论更好。

*   **您无法轻松引用数据**- 您打算如何从数据访问层返回这些数据？您打算如何将其作为参数传递给业务层方法？要获取所有数据，您必须传递所有列表。要从列表中传递单个对象的数据，您必须将所有数据作为单独的变量传递。

*   **它不灵活**- 当您以这种方式存储它时，很难为您的对象添加新属性。例如，现在，您可能只需要为每个对象存储一个 ID 和一个描述，但是当您还需要存储一个日期时会发生什么？您不仅需要添加一个新的列表/数组来存储所有加载对象的日期，而且还必须修复使用和传递数据的所有地方。以及如何找到代码中需要修复的所有位置？这也不容易做到，因为您可以搜索的对象没有特定的数据类型。

*   **它很脆弱**- 由于已经提到的所有原因，以及更多原因，这样存储数据会导致代码错误。如果列表不同步会发生什么？如果您未能在对象中途加载数据，因此只有部分列表得到更新，会发生什么情况？如果您需要从列表中删除一个项目并且由于某种原因仅在其中一个列表上失败怎么办？如果多个线程需要同时修改数据怎么办？如果你不是特别小心，事情很容易出错。没有必要让您的代码如此脆弱，那么为什么要给自己不必要的麻烦呢？

那么更好的解决方案是什么？好吧，这`Dictionary`绝对是一个更好的选择，但在这种情况下，它可能仍然会被误导。如果您只需要为每个对象存储两个数据元素，则不需要字典。字典的目的是存储键/值对，您需要能够快速访问给定键的值。该字典使用哈希表来索引列表，以使键查找非常快速。但是如果使用不当，它实际上会降低效率（即更多内存，由于哈希码生成而变慢）。

为对象或实体（有时在 DB 设计中称为）存储数据的正确方法是创建一个类。这些类通常称为数据传输对象 (DTO) 类。例如：

```
Public Class MyEntity
    Public Property Id As Integer
    Public Property Code As String
End Class 
```

然后，您可以轻松地将数据存储在您想要的任何类型的列表中，例如：

```
Dim entityArray() As MyEntity  ' Arrays are great for storing lists which don't change in length very often
Dim entityList As List(Of MyEntity)  ' Lists are great when the number of items in the list keeps changing
Dim entityDictionary As List(Of Integer, MyEntity)  ' Dictionaries are great when you need to quickly access items by their key (their ID, in this case)
Dim entityQueue As Queue(Of MyEntity)  ' Queues are great when you need to process incoming items in the order that they were received
' Etc. 
```

现在，当你需要返回一个`MyEntity`对象时，你可以返回它`As MyEntity`。当您需要返回它们的列表时，您可以将它们作为单个列表返回。将它们作为参数传递给方法时也是如此。

此外，当您需要向实体添加新属性时，只需将其添加到 DTO 类中，如下所示：

```
Public Class MyEntity
    Public Property Id As Integer
    Public Property Code As String
    Public LastModified As Date  ' Hey look! A new field.
End Class 
```

现在所有使用该数据类型的代码都将立即可以访问该新属性。您所要做的就是用数据填充该字段。如果您想在代码中查找所有使用该数据类型的位置，只需右键单击`MyEntity`类名并从上下文菜单中选择*Find All References选项。*

正如其他人所提到的，有一些框架可用于创建实体类并将它们读取和写入数据库。我想说，在我写这篇文章的时候，Entity Framework 和 NHibernate 是两个最流行的选项。它们当然值得考虑，但在开始使用框架之前，充分了解框架在做什么以及为什么需要它总是很重要的。因此，我建议您至少尝试自己正确地进行数据访问层一段时间，然后再开始寻找偷工减料的方法。使用让您的生活更轻松的框架并没有错，但是如果您不正确地使用任何框架或出于错误的原因，它们可能会使您的生活更加困难，而不是更轻松。

# java - Android/Java：数组的返回位置

> ID：15064576
> 
> 赞同：0
> 
> 时间：2013-02-25T10:13:46.767
> 
> 标签：java, android, arrays, return

我正在开发一个应用程序来注册每个用户介绍的答案。为此，我有一个`Array`取决于每个用户回答的地方。

我想要做的是获得这些答案并在另一个类中使用它们，例如以便在 XML 中序列化这些答案。

我想知道是否有办法以更简单的方式返回答案。我现在拥有的是以下代码，但它的效率很低：

```
 public static String[] Respuestas = {"","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""};

       public static String getRespuesta1(){
            return Respuestas[0];
        }
        public static String getRespuesta2(){
            return Respuestas[1];
        } 
```

依此类推，直到得到 Respuesta30()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:17:43.113

您不必为这种情况创建 30 个方法，您不能简单地调用：

```
MyClass.Respuestas[x]; //where x is any number from 0 to 30? 
```

如果你真的需要一个方法，从这段代码来看你似乎不需要它，那么将索引作为参数传递：

```
public static String getRespuestaByIndex(int index)
{
    return Respuestas[index];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:17:39.173

向指定您感兴趣的索引的方法添加一个整数参数`getRespuesta`。为每个元素使用单独的方法根本不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:21:25.327

对于您的任务，上述方法显然是更好的解决方案，而不是拥有 30 个执行相同操作的函数。还有一件事，请像这样定义数组：

```
public static String[] Respuestas = new String[30]; 
```

您也可以在方括号内设置迭代`[]`，但我认为您不需要这样做。

# eclipse - eclipse中的ivy测试配置

> ID：15064580
> 
> 赞同：0
> 
> 时间：2013-02-25T10:14:02.753
> 
> 标签：eclipse, ant, ivy, ivyde

我有一个常春藤依赖管理，可以在 eclipse 和 ant 下工作。

我应该如何配置测试依赖项以供 eclipse 使用？

我目前的配置是：

```
<configurations>
  ...
  <conf name="test" visibility="public"/>
</configurations>

<dependencies>
  ...
  <dependency org="org.testng" name="testng" rev="6.7" conf="test->provided" transitive="false"/>
</dependencies> 
```

使用该配置，TestNG 不会“检索”。我正在使用 IvyDE，并设置了“选择每个配置”。

# linq - 时间：2019-01-01 标签：c#genericorderby

> ID：15064581
> 
> 赞同：5
> 
> 时间：2013-02-25T10:14:04.087
> 
> 标签：linq, entity-framework, generics, sql-order-by, expression

在我的基础存储库类中

我编写了这个函数，以便可以从数据库中检索排序的数据集合。T 是在类级别定义的泛型

```
public abstract class RepositoryBase<T> 
        where T : class 
```

代码是这样的：

```
public IList<T> GetAll<TKey>(Expression<Func<T, bool>> whereCondition, Expression<Func<T, TKey>> sortCondition, bool sortDesc = false)
        {
            if (sortDesc)
                return this.ObjectSet.Where(whereCondition).OrderByDescending(sortCondition).ToList<T>();

            return this.ObjectSet.Where(whereCondition).OrderBy(sortCondition).ToList<T>() ;
        } 
```

我的目标是引入一个*通用*排序参数，以便我可以以这种方式调用该函数：

```
repo.GetAll (model=>model.field>0, model=>model.sortableField, true) 
```

我的意思是我可以通过匿名函数直接指定排序字段，因此使用 Intellisense ......

不幸的是，这个函数不起作用，因为最后一行代码在编译时会产生错误。

我也试着打电话：

```
repo.GetAll<Model> (model=>model.field>0, model=>model.sortableField, true) 
```

但这不起作用。

我应该如何编写函数来实现我的目标？

我正在使用 EF 5、c#、.NET 4.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:28:39.263

您正在使用`ObjectSet`which implements `IQueryable<T>`。`System.Linq.Queryable`这由接受`Expression<Func<`参数的方法 on 扩展。使用这些`Expression`参数是正确的，因为您打算在数据库中执行，而不是在本地执行。

*   Func 是一个匿名委托，一种 .net 方法。
*   Expression是一棵树，可以编译成Func，也可以翻译成Sql或其他东西。

* * *

您向我们展示了该方法的真正抽象用法，但不是该方法的实际使用，也不是编译器错误。我怀疑您可能犯的错误混淆了这两个类型参数。

你说：

```
repo.GetAll<Model> (model=>model.field>0, model=>model.sortableField, true) 
```

但是这个方法的这个泛型参数代表了 sortableField 的类型。如果 sortableField 不是模型 - 这是错误的。

相反，您应该这样做：

```
Repository<Person> myRepo = new Repository<Person>();
myRepo.GetAll<DateTime>(p => p.Friends.Count() > 3, p => p.DateOfBirth, true); 
```

If specifying the sort type breaks your intended pattern of usage, consider hiding that key by using an IOrderer: [Store multi-type OrderBy expression as a property](https://stackoverflow.com/questions/7737355/store-multi-type-orderby-expression-as-a-property/7742446#7742446)

# c# - 为什么在 asp.net 的 AuthorisationManager 中获取 WindowsPrinciple

> ID：15064586
> 
> 赞同：0
> 
> 时间：2013-02-25T10:14:15.627
> 
> 标签：c#, asp.net, security, claims-based-identity

我正在尝试在 Web 应用程序中实现基于声明的安全性。我有一个像这样的课。

```
public class AuthorisationManager : ClaimsAuthorizationManager
{
    public override bool CheckAccess(AuthorizationContext context)
    {
        //if (context.Principal.Identity.IsAdmin())
        //    return true;
        var resource = context.Resource.First().Value;
        var action = context.Action.First().Value;
        return context.Principal.HasClaim(resource, action);
    }
    public override void LoadCustomConfiguration(System.Xml.XmlNodeList nodelist)
    {
        base.LoadCustomConfiguration(nodelist);
    }
} 
```

我有 CustomPrinciple 喜欢

```
 public class CustomPrinciple  : ClaimsPrincipal
{
    public CustomPrinciple(IIdentity identity)
        : base(identity)
    {
    }
} 
```

它总是返回 false，因为它`context.Principal`是 WindowsPrinciple。我试图在 Globas.asax.cs 中设置它

```
 protected void Application_PostAuthenticateRequest(Object sender, EventArgs e)
    {
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

            PermissionManager mgr = new PermissionManager();
            mgr.CheckUserAccess("", "");
            mgr.LoadPermissionModel("XYZ");

            HttpContext.Current.User = mgr.LoadPermissionModel("ABC");
            Thread.CurrentPrincipal = HttpContext.Current.User;
            AppDomain.CurrentDomain.SetThreadPrincipal(Thread.CurrentPrincipal);
        }
    } 
```

我怎样才能改变它，以便我可以`CustomPrinciple`进入`CheckAccess(AuthorizationContext context)`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:06:22.160

（建议的答案被接受）：

我猜你`<authorization mode="Windows">`在你的 web.config 中而不是`Forms`or `None`（两者都应该使用基于声明的身份验证）。

# android - Android + Show Imageview fullscreen 3秒然后返回对应的activity

> ID：15064588
> 
> 赞同：-6
> 
> 时间：2013-02-25T10:14:15.803
> 
> 标签：android, image, fullscreen

我迫切需要你的帮助，

我有 5(4+1) 个活动。当我在 4 个活动中的任何一个上单击图像时，我想在最后 1 个活动上显示它，这也是全屏...

> 这意味着我有 4 个将随机出现的活动，如果我单击任何 Activity 上的 Image 视图，我想在 Final Activity 上全屏显示所选图像

请帮我发送代码......（我的计划是只使用一个活动来查看之前活动中分别选择的所有图像，并在2~3秒后消失。）

由于我刚刚开始从事**ANDROID**项目，任何形式的帮助将不胜感激。谢谢。

好的，在这里，

MAinActivity.java

```
 public void onClick(View v) {

    // TODO Auto-generated method stub

    switch (v.getId()) {

    case R.id.imageView1:
    Intent i = new Intent(MainActivity.this, ImageView.class);
    i.putExtra("key1", R.drawable.ic_launcher);
    startActivity(i);

    break;

    case R.id.imageView2:
    Intent i1 = new Intent(MainActivity.this, ImageView.class);
    i1.putExtra("key1", R.drawable.ic_launcher);
    startActivity(i1);

    break; 
```

ImageView.java：

```
 super.onCreate(b);      
    iv = new android.widget.ImageView(this);        
    Uri savedInstanceState = getIntent().getParcelableExtra("key1");        
    iv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));     
    iv.setImageURI(savedInstanceState); 
```

好的，我真的被困在这里将图像从一个 MainActivity 传输到 ImageView Activity。

请指出我的清白。

在我的 Main.xml 文件中，我有相关的 ImageView 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:36:09.767

您可以进行一项活动，您可以在其中声明一个在 3 秒后调用的方法并在其中写入`finish();`在此活动中，您可以通过传递图像名称以全屏显示`intent.putExtra`

如果您需要代码，请告诉我

这是代码

*   在 *Activity A* 中保存文件（内部存储）

```
String fileName = "SomeName.png";
try {
    FileOutputStream fileOutStream = openFileOutput(fileName, MODE_PRIVATE);
    fileOutStream.write(b);  //b is byte array 
                             //(used if you have your picture downloaded
                             // from the *Web* or got it from the *devices camera*)
                             //otherwise this technique is useless
    fileOutStream.close();
} catch (IOException ioe) {
    ioe.printStackTrace();
} 
```

*   将位置作为字符串传递给活动 B

```
Intent intent = new Intent(this, ActivityB.class);
intent.putExtra("picname", fileName); 
```

*   在 *Activity B* 中检索文件

```
Bundle extras = getIntent().getExtras();
String fileName = extras.getString("picname"); 
```

*   使*drawable*脱离图片

```
File filePath = getFileStreamPath(fileName);
Drawable d = Drawable.createFromPath(filePath.toString()); 
```

*   将其应用于 ImageView 资源

```
someImageView.setBackgroundDrawable(d); 
```

要访问具有名称的可绘制文件夹资源，您可以使用此方法

```
private void showImage() {
    String uri = "drawable/icon";

    // int imageResource = R.drawable.icon;
    int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

# javascript - 使用 Salesforce 顶点代码的纪元时间

> ID：15064590
> 
> 赞同：0
> 
> 时间：2013-02-25T10:14:17.167
> 
> 标签：javascript, jquery, salesforce, apex-code

如何使用顶点代码获取纪元时间？有使用编程语言但没有使用顶级代码的示例。请帮忙。

Microsoft .NET C# epoch = (DateTime.Now.ToUniversalTime().Ticks - 621355968000000000) / 10000000;

Java 长纪元 = System.currentTimeMillis()/1000;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:55:16.413

你检查过[文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_datetime.htm)吗？

```
datetime dt = datetime.now();
system.debug(dt);
system.debug(dt.getTime()); 
```

输出：

```
|USER_DEBUG|[2]|DEBUG|2013-02-25 10:53:48
|USER_DEBUG|[3]|DEBUG|1361789628679 
```

# sql - 如何比较2个表，删除旧记录并添加新记录sql

> ID：15064591
> 
> 赞同：1
> 
> 时间：2013-02-25T10:14:16.770
> 
> 标签：sql, database, sql-server-2008, comparison

我有 2 个格式完全相同的 sql 表，1 个用作临时表，1 个用作静态表。

目前我的代码只是擦除静态表并每次使用临时表中的新数据填充它，但这并不是我所需要的。我正在尝试创建某种类型的 sql diff 来比较这两个表，然后删除不在临时表中但在静态表中的记录，它会添加临时表中的新记录但是不是静态表。所以静态表只在每次运行时更新，而不是被擦除和重写。

因此，如果我的临时表有：ABC1、ABC2、ABC4，而我的静态表有：ABC1、ABC3、ABC4

理想情况下，我的 sql 查询会返回：ABC1、ABC2、ABC4

我有 2 个查询似乎选择了我要删除的值和我要添加的值，但我目前无法让删除的值正常运行，所以我想知道查询中是否缺少某些内容。

此查询插入临时表中的数据，而不是静态表中的数据：

```
 Insert into [static table] 
    SELECT * 
  FROM [temp table]

EXCEPT

SELECT *
  FROM [static table] 
```

此查询应删除静态表中的数据，而不是临时表中的数据：

```
 delete from [static table] 
 where not exists 
    (SELECT *
  FROM [static table]

EXCEPT

SELECT *
  FROM [temp table] ) 
```

谁能建议我的查询有什么问题，或者是否有更好的方法来执行此任务？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:26:24.790

看看SQL 2008 中引入的[MERGE 。](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.100%29.aspx)

例如未经测试，但类似...

```
MERGE StaticTable AS target
USING TempTable AS source ON target.ColumnA = source.ColumnA
-- value doesn't exist in the target table, so add it
WHEN NOT MATCHED BY TARGET THEN 
    INSERT (ColumnA) VALUES (source.ColumnA)
-- value doesn't exist in the source table, so delete from target
WHEN NOT MATCHED BY SOURCE THEN 
    DELETE 
```

编辑：要处理多个列，例如：

```
 MERGE StaticTable AS target
    USING TempTable AS source ON target.ColumnA = source.ColumnA 
        AND target.ColumnB = source.ColumnB
    -- value doesn't exist in the target table, so add it
    WHEN NOT MATCHED BY TARGET THEN 
        INSERT (ColumnA, ColumnB) VALUES (source.ColumnA, source.ColumnB)
    -- value doesn't exist in the source table, so delete from target
    WHEN NOT MATCHED BY SOURCE THEN 
        DELETE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:25:59.423

我想“合并”应该做你想做的事。以下是详细信息：http: [//msdn.microsoft.com/en-us/library/bb522522 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522522(v=sql.105).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:30:51.867

如果您的表有任何定义的唯一键，您可能可以使用 IN 语法：

```
DELETE FROM static WHERE id NOT IN(SELECT id from temporary);
INSERT INTO static WHERE id IN(SELECT id from temporary) AND NOT id IN (SELECT id from static); 
```

# jquery - jQuery-UI 可拖动：div 没有正确跟随鼠标水平

> ID：15064592
> 
> 赞同：4
> 
> 时间：2013-02-25T10:14:17.047
> 
> 标签：jquery, jquery-ui, draggable

这是一个简短的[演示](http://jsfiddle.net/tmuecksch/RErSF/6/)。我想让一个对话框可拖动。它通过以下方式通过 css 水平居中：

```
div.dialog-container {
    position: absolute;
    left: 0;
    right: 0;
    margin: auto;
} 
```

我的对话框包含一个标题和一个内容 div。整个对话框将通过拖动标题来拖动。所以我使用了 jQuery-UI .draggable() 小部件，如下所示：

```
$("div.dialog-container").draggable({
    handle: "div.dialog-header"
}); 
```

**问题是：**拖动对话框可以工作，但不是按预期的方式拖动。对话框在垂直方向上完美地跟随鼠标***，但在水平方向上它跟随鼠标太慢***，因此可以在拖动时离开对话框*（例如单击最右侧的标题并将对话框向右拖动*）。**有趣的是：**去掉“margin: auto;” 解决了问题，但元素不再居中。用 javascript 居中 div 是没有选择的。您对如何解决该问题有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:21:04.403

如果您的对话框具有固定宽度，请尝试

```
left: 50%;
margin: auto;
margin-left: -200px; 
```

[演示](http://jsfiddle.net/hRCQ4/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:19:03.783

`**[LIVE DEMO](http://jsfiddle.net/RErSF/7/)**`

```
div.dialog-container {
    height: 250px;
    width: 400px;   
    border: 1px solid black;   
    position: absolute;
    left: 50%;             /*   center   */
    margin-left:-200px;    /*   width/2   */
    top: 100px;
} 
```

# actionscript-3 - 平滑颜色填充 - as3 中的 FloodFill

> ID：15064597
> 
> 赞同：0
> 
> 时间：2013-02-25T10:14:45.907
> 
> 标签：actionscript-3

我有一个类似下面的问题。我在 BitmapData 上使用了 floodFill。

但是对于边框不“清晰”的图像（例如 Fireworks 上带有软边框的图像），floodFill 并不是很好。（看图片）

[http://www.mediafire.com/view/?8q3kyv95ccd3693](http://www.mediafire.com/view/?8q3kyv95ccd3693)

我可以让floodFill 更“平滑”吗？

我没有足够的权限发布图片，所以对此表示同情，并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:27:06.710

我自己没有测试过这个类，但它看起来像 floodFill 方法可以满足你的要求（它需要一个“tolerance”参数，而本机 floodFill 方法没有）：

fla 文件链接：http: [//hangunsworld.com/blog/wp-content/uploads/2007/10/floodfill.fla](http://hangunsworld.com/blog/wp-content/uploads/2007/10/floodfill.fla)

# android - 如何在多边形中生成随机 LatLng 坐标？

> ID：15064608
> 
> 赞同：0
> 
> 时间：2013-02-25T10:15:19.193
> 
> 标签：android

我需要在地图上定义的多边形中生成随机 LatLng 点假设我的第一个点开始于 (x,y) 并且下一个 latlng 将大于 100 米且小于 500 米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:34:23.753

您可以尝试以下方法，它使用 HashMap 创建唯一的随机数：

```
public void getRandomPosistions(int endPoint, int total)
{
    Set<Point> set = new HashSet<Point>();
    Random position = new Random();
    Point point;

    Point usedPos = new Point();
    // Starting Position
    usedPos.x = 100;
    usedPos.y = 100;
    set.add(usedPos);

    do
    {
        point = new Point();
        point.x=position.nextInt(endPoint);
        point.y=position.nextInt(endPoint);
        set.add(point);
    }
    while(set.size() < (total));

    List<Object> positionList = new ArrayList<Object>(set);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:39:51.367

这很简单。

1.  获取纬度和经度的最大值和最小值。
2.  生成经度的随机值（使用均匀分布）。
3.  生成纬度的随机值（您可以使用均匀分布或考虑地球的形状）。
4.  检查随机点是否在多边形内，如果不是，请重试。

# wpf - TabControl SelectedItem 绑定问题

> ID：15064609
> 
> 赞同：1
> 
> 时间：2013-02-25T10:15:19.003
> 
> 标签：wpf, mvvm, prism

在选项卡式界面应用程序中，我试图将 TabItem Header 字符串或包含在所选 TabItem 中的对象传递给视图模型，以使用它来发布如下事件：

在视图 (xaml) 中：

```
<TabControl  x:Name="MyTC"
                         prism:RegionManager.RegionName="{x:Static inf:RegionNames.MainRegion}"
                         SelectedItem="{Binding Path=TabControlSelectedItem,UpdateSourceTrigger=PropertyChanged,Mode=Twoway}"
                         Cursor="Hand"
                         Grid.Row="0" 
                         Grid.Column="1">

                <TabControl.ItemTemplate>

                    <DataTemplate>
                        <!--DataContext="{Binding ElementName=MyTC, Path=SelectedItem}"-->
                        <StackPanel  Orientation="Horizontal">

                            <TextBlock VerticalAlignment="Center"
                                       Margin="3"
                                       Text="{Binding Path=DataContext.DataContext.HeaderInfo, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabItem}}}"
                                        />

                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding HeaderClickCommand}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>

                        </StackPanel>

                    </DataTemplate>

                </TabControl.ItemTemplate>

            </TabControl> 
```

在视图模型中

// ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

```
 //Constructor

public ShellWindowViewModel(IEventAggregator eventAggregator)
    {
        this.eventAggregator = eventAggregator;
        this.HeaderClickCommand = new DelegateCommand(OnHeaderClick);
    }

        //SelectedItem Binding 
        private object tabControlSelectedItem;
        public object TabControlSelectedItem
        {
            get { return tabControlSelectedItem; }
            set
            {
                if (tabControlSelectedItem != value)
                {
                    tabControlSelectedItem = value;
                    OnPropertyChanged("TabControlSelectedItem");

                }
            }
        }

        //*****************************************************************************************************

        //this handler publish the Payload "SelectedSubsystem" for whoever subscribe to this event
        private void OnHeaderClick()
        {
            //EA for communication between Modules not within Modules
            string TabHeader = (TabControlSelectedItem as TabItem).Header.ToString();
            eventAggregator.GetEvent<SubsystemIDSelectedEvent>().Publish(TabHeader);

        } 
```

但是有一些问题，因为当我单击 TabItem 时没有任何反应，当我插入断点 @TabControlSelectedItem 属性时，我发现它包含视图命名空间。我希望 TabControlSelectedItem 获取选定的选项卡标题字符串或选定选项卡项中的对象。非常感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:59:03.107

我刚刚尝试了类似的东西，它工作正常。

这是我的xml

```
<TabControl ItemsSource="{Binding Matches}"
    SelectedItem="{Binding SelectedRecipe}">
  <TabControl.ItemTemplate>
    <DataTemplate>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                    Text="{Binding Path=Date}" />
                 <TextBlock Grid.Column="1"
                    TextAlignment="Center"
             Text="{Binding Path=Name}" />
        </Grid>
    </DataTemplate>
  </TabControl.ItemTemplate>
</TabControl> 
```

然后在我的视图模型中

```
public object SelectedRecipe
{
  get
  {
    return _selectedRecipe;
  }
  set
  {
    _selectedRecipe = value;
    OnNotifyPropertyChanged("SelectedRecipe");
  }
} 
```

# c# - Windows 窗体 - 奇怪的自动滚动行为

> ID：15064611
> 
> 赞同：3
> 
> 时间：2013-02-25T10:15:25.410
> 
> 标签：c#, winforms

我遇到了关于 system.windows.forms.panel 的自动滚动的问题。我有一个面板，我用复选框填充，如果复选框总数的高度要求超过面板的高度，它应该添加一个垂直滚动条。我的问题是它按预期处理垂直滚动条，但它也显示不需要的水平滚动条。我通过将 System.Windows.Forms.SystemInformation.VerticalScrollBarWidth 添加到面板宽度来调整面板的宽度。

```
int prevMainTop = 0;
int maxWidth = 0;

foreach (List<String> arr in folderArr)
{
    if (arr[0].Length * 7 > maxWidth) { maxWidth = arr[0].Length * 7; }
}

foreach (List<String> arr in folderArr)
{
    CheckBox cb = new CheckBox();
    cb.BackColor = Color.Chocolate;
    cb.Checked = true;
    cb.AutoSize = false;
    cb.Width = maxWidth;
    cb.Name = arr[0];
    cb.Text = arr[0];
    cb.Tag = arr[1];
    cb.Top = prevMainTop;
    prevMainTop = prevMainTop + 25;
    this.mainPanel.Controls.Add(cb);           
}

this.mainPanel.Width = maxWidth + System.Windows.Forms.SystemInformation.VerticalScrollBarWidth; 
```

[图像显示复选框右侧不需要的添加空间，添加到控件背景的颜色以说明控件的大小。](http://i.stack.imgur.com/lUs1i.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:58:07.523

检查面板`AutoScrollMargin`的特性。应该是，您可能还需要设置该值。`AutoScrollMinSize``AutoScrollMargin``(0,0)``AutoScrollMinSize``maxWidth`

# ios - Vuforia iOS SDK：结合 ImageTargets 和 VideoPlayback 示例

> ID：15064614
> 
> 赞同：1
> 
> 时间：2013-02-25T10:15:33.713
> 
> 标签：ios, vuforia

我正在使用 Vuforia iOS SDK（不是统一插件）开发一个 iOS 应用程序。

我想把`VideoPlayback`和`ImageTargets`样品混合在一起。从论坛建议开始，我开始使用 videoplayback 示例并在其上集成 imageTarget。编辑 EAGLView 文件后，应用程序同时获得视频和 3D 模型，但**不显示 3D 模型**。跟踪图像时，它会获取内部的 3D 对象`renderFrameQCAR`并打印日志。

我不明白在哪里看。有没有人在没有 Unity 支持的情况下尝试过并做到这一点？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:25:21.177

开始处理 VideoPlayback 项目，仅更改`EAGLView`示例文件中的文件导入`Teapot.h`文件`EAGLview.m`

`ImageTargets`在命名空间声明中从顶部添加代码部分：

```
const float kObjectScale = 3.0f;
const char* textureFilenames[] = {
    "icon_play.png",
    "icon_loading.png",
    "icon_error.png",
    "VuforiaSizzleReel_1.png",
    "VuforiaSizzleReel_2.png",

    // added for 3d model
    "TextureTeapotBrass.png",
    "TextureTeapotBlue.png",
    "TextureTeapotRed.png"
}; 
```

添加此功能（来自`ImageTargets`）

```
- (void)setup3dObjects
{
for (int i=0; i < [textures count]; ++i) {
    Object3D* obj3D = [[Object3D alloc] init];
    if (i >= 5)
    {
        obj3D.numVertices = NUM_TEAPOT_OBJECT_VERTEX;
        obj3D.vertices = teapotVertices;
        obj3D.normals = teapotNormals;
        obj3D.texCoords = teapotTexCoords;
        obj3D.numIndices = NUM_TEAPOT_OBJECT_INDEX;
        obj3D.indices = teapotIndices;
    }
    obj3D.texture = [textures objectAtIndex:i];
    [objects3D addObject:obj3D];
    [obj3D release];
}
} 
```

然后，在`RenderFrameQCAR`, 之后：

```
int numActiveTrackables = state.getNumTrackableResults(); 
```

为 3d 模型添加代码，来自`ImageTargets`示例

```
for (int i = 0; i < state.getNumTrackableResults(); ++i) {
    // Get the trackable
    const QCAR::TrackableResult* result = state.getTrackableResult(i);
    const QCAR::Trackable& trackable = result->getTrackable();
    QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result->getPose());

    // Choose the texture based on the target name
    int targetIndex = 0; // "stones"
    if (!strcmp(trackable.getName(), "chips"))
        targetIndex = 1;
    else if (!strcmp(trackable.getName(), "tarmac"))
        targetIndex = 2;
    Object3D *obj3D = [objects3D objectAtIndex:targetIndex+5];

    // OpenGL 2
    QCAR::Matrix44F modelViewProjection;
    ShaderUtils::translatePoseMatrix(0.0f, 0.0f, kObjectScale, &modelViewMatrix.data[0]);
    ShaderUtils::scalePoseMatrix(kObjectScale, kObjectScale, kObjectScale, &modelViewMatrix.data[0]);
    ShaderUtils::multiplyMatrix(&qUtils.projectionMatrix.data[0], &modelViewMatrix.data[0], &modelViewProjection.data[0]);
    glUseProgram(shaderProgramID);
    glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.vertices);
    glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.normals);
    glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.texCoords);
    glEnableVertexAttribArray(vertexHandle);
    glEnableVertexAttribArray(normalHandle);
    glEnableVertexAttribArray(textureCoordHandle);
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, [obj3D.texture textureID]);
    glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&modelViewProjection.data[0]);
    glUniform1i(texSampler2DHandle, 0 /*GL_TEXTURE0*/);
    glDrawElements(GL_TRIANGLES, obj3D.numIndices, GL_UNSIGNED_SHORT, (const GLvoid*)obj3D.indices);
    ShaderUtils::checkGlError("EAGLView renderFrameQCAR");
} 
```

只要确保你所有的东西都正确加载，应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T23:12:08.280

这个答案是基于真实经验的。

我在 videoplayback 通话中调用 3d 模型，我的意思是这样

```
if (strcmp(imageTarget.getName(), "affogato") == 0)
{
const int kObjectScale = 500;
[self secondSetup3dObjects];
playerIndex = 99;
const QCAR::TrackableResult* result = state.getTrackableResult(i);
QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result->getPose());
int targetIndex = 9;
Object3D *obj3D = [objects3D objectAtIndex:targetIndex];
QCAR::Matrix44F modelViewProjection;
ShaderUtils::translatePoseMatrix(0.0f, 0.0f, 50.0f, &modelViewMatrix.data[0]);
ShaderUtils::scalePoseMatrix(kObjectScale, kObjectScale, kObjectScale, &modelViewMatrix.data[0]);
ShaderUtils::multiplyMatrix(&qUtils.projectionMatrix.data[0], &modelViewMatrix.data[0], &modelViewProjection.data[0]);
glUseProgram(shaderProgramID);
glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.vertices);
glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.normals);
            glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.texCoords);

glEnableVertexAttribArray(vertexHandle);
            glEnableVertexAttribArray(normalHandle);
            glEnableVertexAttribArray(textureCoordHandle);

            glActiveTexture(GL_TEXTURE0);
            glBindTexture(GL_TEXTURE_2D, [obj3D.texture textureID]);
            glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&modelViewProjection.data[0]);
            glUniform1i(texSampler2DHandle, 0 /*GL_TEXTURE0*/);
            glDrawArrays(GL_TRIANGLES, 0,  obj3D.numVertices);

            ShaderUtils::checkGlError("EAGLView renderFrameQCAR"); 
```

我希望这可以帮助任何人......

哦，顺便说一句，您需要在 appdelegate 中放入该目标的视频和纹理的透明背景，以使这项工作像魅力一样

# c# - 使用字典中的项目子集填充 WPF 列表框

> ID：15064616
> 
> 赞同：1
> 
> 时间：2013-02-25T10:15:36.540
> 
> 标签：c#, wpf, data-binding, listbox

我有一本`<String, MyThingyClass>`包含几百个条目的字典。现在我想在 WPF 列表框中显示其中的一个子集。我该怎么做（最好在代码中）？

有很多关于如何将整个字典（Systems.Collection）绑定到列表框的示例、教程等，但我还没有发现任何只是绑定子集（通过键或值类中的字段选择） .

我意识到一个简单的解决方案是制作一个包含子集的字典，然后将此子集字典绑定到列表框。但我想知道是否有一种方法无需创建子集字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:23:24.450

你不需要创建它。您可以创建一个返回字典子集的只读属性并将其绑定到 xaml。

或者。

您可以通过触发器中的某些条件隐藏 xaml 中的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:32:28.473

您可以获取[`CollectionView`](https://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)源集合并设置[`Filter`](https://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.filter.aspx)属性。

请参阅[如何：过滤视图中的数据](https://msdn.microsoft.com/en-us/library/ms752348(v=vs.100).aspx)。

# javascript - 使用参数构建更新查询的方法

> ID：15064618
> 
> 赞同：1
> 
> 时间：2013-02-25T10:15:40.057
> 
> 标签：javascript, sqlite, insert, titanium

我正在开发 Appcelerator Titanium 中的应用程序。该应用程序使用 sqlite 数据库。为了**插入数据库**，我编写了一个**带有如下参数的查询**：

```
db.execute("INSERT INTO formData (unique_id,form_xml_id,dateTime_stamp,data,user_id,status) VALUES ('" + Ti.App.mydata._guid + "'," + findex + ",'"+datetime+"','"+fdata1+"'," + Ti.App.information.user_id + ",'" + formstatus + "')"); 
```

我有另一个**查询来更新**不同表的数据库。但是查询没有参数。像这样：

```
db.execute("UPDATE formData SET  form_xml_id=" + findex + ",dateTime_stamp='" + datetime + "',data='" + fdata + "',user_id=" + Ti.App.information.user_id + ",status='"+ DataStatus +"' where unique_id='" + Ti.App.mydata._guid + "'"); 
```

我想**重写更新查询，比如插入查询**。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:20:59.867

我有一个更新联系人的代码......您可以相应地修改它：

```
public int updateContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getPhoneNumber());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
    } 
```

# php - php发送带附件的邮件

> ID：15064619
> 
> 赞同：2
> 
> 时间：2013-02-25T10:15:40.307
> 
> 标签：php, email-attachments

我有这个脚本，它只适用于全名和附件文件。但是，如果我再添加一个字段，例如“tel”，则脚本将发送除附件之外的内容。有人能帮助我吗？

```
<?php
    if(isset($_POST['submit']))
    {
        //The form has been submitted, prep a nice thank you fullname
        $output = '<h1>Thanks for your file and fullname!</h1>';
        //Set the form flag to no display (cheap way!)
        $flags = 'style="display:none;"';

        //Deal with the email
        $to = 'email here';
        $subject = 'a file for you';

        $fullname = strip_tags($_POST['fullname']);
        $tel = strip_tags($_POST['tel']);

        $attachment = chunk_split(base64_encode(file_get_contents($_FILES['file']['tmp_name'])));
        $filename = $_FILES['file']['name'];

        $boundary =md5(date('r', time())); 

        $headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";
        $headers .= "\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"_1_$boundary\"";

        $fullname="This is a multi-part fullname in MIME format.

--_1_$boundary
Content-Type: multipart/alternative; boundary=\"_2_$boundary\"

--_2_$boundary
Content-Type: text/plain; charset=\"iso-8859-1\"
Content-Transfer-Encoding: 7bit

$fullname

--_2_$boundary--
--_1_$boundary
Content-Type: application/octet-stream; name=\"$filename\" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

$attachment
--_1_$boundary--";

        mail($to, $subject, $fullname, $headers);
    }
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>MailFile</title>
</head>

<body>

<?php echo $output; ?>

<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF'];?>" method="post" <?php echo $flags;?>>
<p><label for="fullname">Full name</label> <input name="fullname" id="fullname" /></p>
<p><label for="file">File</label> <input type="file" name="file" id="file"></p>
<p><input type="submit" name="submit" id="submit" value="send"></p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T10:22:09.160

没有必要重新发明轮子。使用[phpmailer](https://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.phpmailer.php)类，然后您可以像添加附件一样简单

```
function emailWithAttachment($to, $subject, $message, $attachment) {

    $mail = new PHPMailer();

    $mail->AddAddress($to);

    $mail->From         = "your@email.com";
    $mail->FromName     = "Your Name";
    $mail->Subject      = $subject;
    $mail->Body         = $message;

    $mail->AddAttachment($attachment);

} 
```

这是您的脚本，使用 phpmailer.class 重写

```
<?php

    if(isset($_POST['submit']))
    {

        //The form has been submitted, prep a nice thank you fullname
        $output = '<h1>Thanks for your file and fullname!</h1>';

        //Set the form flag to no display (cheap way!)
        $flags = 'style="display:none;"';

        // include and start phpmailer
        require_once('PHPMailer_5.2.4/class.phpmailer.php');
        $mail = new PHPMailer();

        //Deal with the email
        $mail->From = "webmaster@example.com"; // from
        $mail->AddReplyTo("webmaster@example.com", "Webmaster"); // reply to address/name

        $mail->AddAddress('email@address.here'); // to address

        $mail->Subject = 'A file for you'; // subject

        $mail->Body = $fullname; // body

        $mail->AddAttachment($_FILES['file']['tmp_name']); // attach uploaded file
    }

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>MailFile</title>
</head>

<body>

<?php echo $output; ?>

<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF'];?>" method="post" <?php echo $flags;?>>
<p><label for="fullname">Full name</label> <input name="fullname" id="fullname" /></p>
<p><label for="file">File</label> <input type="file" name="file" id="file"></p>
<p><input type="submit" name="submit" id="submit" value="send"></p>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-25T11:11:54.137

```
<?php 
//define the receiver of the email   
$to = 'youraddress@example.com'; 
//define the subject of the email 
$subject = 'Test email with attachment'; 
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('attachment.zip'))); 
//define the body of the message. 
ob_start(); //Turn on output buffering 
```

?> --PHP-mixed-
Content-Type: multipart/alternative; 边界=“PHP-alt-”

```
--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 

--PHP-alt-<?php echo $random_hash; ?>-- 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/zip; name="attachment.zip"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
?> 
```

# ruby - Ruby 2.0.0 RVM 无法编译 OS X 10.8.2 Mountain Lion

> ID：15064626
> 
> 赞同：7
> 
> 时间：2013-02-25T10:16:02.380
> 
> 标签：ruby, rvm, osx-mountain-lion, ruby-2.0

尝试使用 RVM 安装它，我收到以下错误：

```
> [2013-02-25 10:09:24] make    CC = /usr/local/bin/gcc-4.2     LD = ld
>   LDSHARED = /usr/local/bin/gcc-4.2 -dynamic -bundle  CFLAGS = -O3
> -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration   -pipe    XCFLAGS = -include ruby/config.h -include ruby/missing.h -D_FORTIFY_SOURCE=2
> -fstack-protector -fno-strict-overflow -fvisibility=hidden -DRUBY_EXPORT  CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libxml2/include -I/usr/local/opt/libxslt/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -I/usr/local/opt/curl-ca-bundle/include -I/usr/local/opt/sqlite/include   -I. -I.ext/include/x86_64-darwin12.2.0 -I./include -I.   DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libxml2/lib -L/usr/local/opt/libxslt/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/curl-ca-bundle/lib -L/usr/local/opt/sqlite/lib  -fstack-protector -Wl,-u,_objc_msgSend      SOLIBS =  linking miniruby ld: warning: directory not found for option
> '-L/usr/local/opt/curl-ca-bundle/lib'
> /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111: [BUG] Stack
> consistency error (sp: 38, bp: 36) ruby 2.0.0p0 (2013-02-24 revision
> 39474) [x86_64-darwin12.2.0]
> 
> -- Crash Report log information --------------------------------------------    See Crash Report log file under the one of following:
>      * ~/Library/Logs/CrashReporter
>      * /Library/Logs/CrashReporter
>      * ~/Library/Logs/DiagnosticReports
>      * /Library/Logs/DiagnosticReports    the more detail of.
> 
> -- Control frame information ----------------------------------------------- c:0006 p:0038 s:0038 e:000037 CLASS  /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111
> c:0005 p:0035 s:0034 e:000033 CLASS 
> /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:107 c:0004 p:0009
> s:0032 e:000031 TOP   
> /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:85 [FINISH] c:0003
> p:---- s:0030 e:000029 CFUNC  :require c:0002 p:0098 s:0026 E:001f68
> EVAL   ./tool/mkconfig.rb:11 [FINISH] c:0001 p:0000 s:0002 E:001848
> TOP    [FINISH]
> 
> ./tool/mkconfig.rb:11:in `<main>' ./tool/mkconfig.rb:11:in `require'
> /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:85:in `<top
> (required)>' /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:107:in
> `<module:FileUtils>'
> /Users/ale/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111:in
> `<module:NoWrite>'
> 
> -- C level backtrace information ------------------------------------------- 0   miniruby                            0x0000000108465e24 rb_vm_bugreport + 164 1   miniruby                 
> 0x000000010833d95e report_bug + 302 2   miniruby                      
> 0x000000010833dc14 rb_bug + 180 3   miniruby                          
> 0x000000010845bea0 vm_exec_core + 32080 4   miniruby                  
> 0x000000010845c07e vm_exec + 94 5   miniruby                          
> 0x000000010845cf5a rb_iseq_eval + 266 6   miniruby                    
> 0x0000000108342572 rb_load_internal + 306 7   miniruby                
> 0x0000000108343cc1 rb_require_safe + 1313 8   miniruby                
> 0x000000010844bc54 call_cfunc_1 + 20 9   miniruby                     
> 0x0000000108452126 vm_call_cfunc + 1046 10  miniruby                  
> 0x0000000108460ce0 vm_call_method + 224 11  miniruby                  
> 0x0000000108457363 vm_exec_core + 12819 12  miniruby                  
> 0x000000010845c07e vm_exec + 94 13  miniruby                          
> 0x000000010845ce2e rb_iseq_eval_main + 206 14  miniruby               
> 0x0000000108340cdf ruby_exec_internal + 111 15  miniruby              
> 0x0000000108341cc2 ruby_run_node + 82 16  miniruby                    
> 0x00000001083080af main + 79 17  libdyld.dylib                      
> 0x00007fff8ae7b7e1 start + 0 18  ???                                
> 0x0000000000000009 0x0 + 9
> 
> -- Other runtime information -----------------------------------------------
> 
> * Loaded script: ./tool/mkconfig.rb
> 
> * Loaded features:
> 
>     0 enumerator.so
> 
> [NOTE] You may have encountered a bug in the Ruby interpreter or
> extension libraries. Bug reports are welcome. For details:
> http://www.ruby-lang.org/bugreport.html
> 
> make: *** [.rbconfig.time] Abort trap: 6 
```

它对其他人有用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:33:54.677

你试过 CC=clang 我在一分钟前安装在 10.7 上没有任何问题吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:51:36.140

`rvm get head`伦敦时间今天下午 5 点之后解决了这个问题。猜猜韦恩一直在战斗！

冉`rvm reinstall 2.0.0`。

仍然继续`find: -printf: unknown primary or operator`ruby​​gems 安装，但其余的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:05:01.463

这里安装成功。

从 .bash_profile 中删除我的 CC 变量（指向 gcc-4.2）并执行**rvm get head && rvm requirements && rvm reinstall 2.0.0**

但我得到 ruby​​gems 安装错误。

进行一些测试似乎不是问题。gem install 很好用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:51:49.290

这是在 ruby​​ 2.0 头中修复的。请参阅下面特定问题的链接。作为拉头的替代方法，您还可以通过应用问题中描述的简单补丁来修复构建问题。

[https://bugs.ruby-lang.org/issues/8171](https://bugs.ruby-lang.org/issues/8171)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-29T07:03:31.313

当“rvm install 2.0.0”失败时，这就是我所做的对我有用的事情。

确保您从 App Store 安装了最新的 Xcode。

然后我删除了 rvm

```
rvm implode 
```

然后重新安装 rvm (参见[rvm.io](http://rvm.io) )

```
curl -L https://get.rvm.io | bash -s stable 
```

然后我做了一个

```
rvm install 2.0.0 
```

这有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T21:33:46.637

我在这里有点晚了，但遇到了同样的问题。我使用以下命令安装了 RVM 和 Ruby 2.0 并收到了相同的错误。

`curl -L https://get.rvm.io | bash -s stable --ruby`

确保重新启动终端，然后运行`rvm get head`

在这里工作。

# bash - 安装了同一程序的不同版本。如何优先考虑特定版本？

> ID：15064629
> 
> 赞同：1
> 
> 时间：2013-02-25T10:16:12.930
> 
> 标签：bash, unix, path, cabal, apt-get

在 Ubuntu 上，我首先使用安装了 Pandoc `apt-get`，然后使用了 haskell cabal 包管理器。如何使`pandoc`终端命令引用较新的 pandoc？我已将 cabal bin 路径添加到我的 ~/.bashrc 脚本中的系统路径，如下所示：

```
PATH=$PATH:~/.cabal/bin
export PATH 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:16:12.930

啊，我明白了。要使终端命令优先于另一个，我只需要确保它首先出现在路径中，如下所示：

```
PATH=~/.cabal/bin:$PATH
export PATH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:04:47.193

您还可以在 /etc/profile（通用）或 ~/.profile 或 ~/.bashrc（只有一个用户）中创建新二进制文件的别名。

```
 alias pandoc="/path/of/new/pandoc" 
```

# sql-server-2008 - 在 SQL SERVER 2008 中，部分 heder 数据再次出现在生成的 CSV 文件中

> ID：15064631
> 
> 赞同：1
> 
> 时间：2013-02-25T10:16:17.870
> 
> 标签：sql-server-2008, bcp

问题：在 SQL SERVER 2008 中，部分 heder 数据再次出现在使用 BCP 命令生成的 CSV 文件中。Table.columnname 是标题的一部分，我们有 3000 列要提取。标题长度为 176,000 个字符。所以在运行 BCP 命令时生成的文件包含

标头（罚款）数据（无问题） CSV 文件中恶意出现的标头的某些部分（这是标头的某些部分从任何字符开始并以任何字符结尾的问题）

CSV 示例：tabl1.col1,tabl2.col1.......tablen.coln 1,2,dd,g,g, 3,4,hghh,hjjj table20.col10,tabl20.col1......依此类推（标题重复的子字符串）

注意：我们使用 BCP 命令从具有 22 列 nvarchar(max) 数据类型且标题长度为 176,000 char 的临时表中提取数据

# ruby-on-rails - 替代 Mongoid::Paranoia

> ID：15064632
> 
> 赞同：4
> 
> 时间：2013-02-25T10:16:22.490
> 
> 标签：ruby-on-rails, mongoid

浏览 Mongoid 文档，我看到[`Mongoid::Paranoia`额外的](http://mongoid.org/en/mongoid/docs/extras.html#paranoia)内容将在版本 4 中消失。

为什么是这样？

什么可以用来替代`Mongoid::Paranoia`和保持类似的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T08:58:26.747

也许是无耻的自我宣传，但我将其提取到它自己的 gem 中：[RubyGems](https://rubygems.org/gems/mongoid-paranoia) / [GitHub](https://github.com/simi/mongoid-paranoia)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T09:04:56.107

这是做出决定的地方：[https](https://github.com/mongoid/mongoid/issues/2433) ://github.com/mongoid/mongoid/issues/2433 。目的是明确使其成为外部提供的依赖项。看起来已经有几个竞争者了，所以你应该没问题。

# c# - 奇怪的错误：对象引用未设置为对象的实例

> ID：15064633
> 
> 赞同：0
> 
> 时间：2013-02-25T10:16:26.007
> 
> 标签：c#, asp.net

我有时会在实时应用程序中遇到错误。

堆栈跟踪：

> 在 Tool.User_RequestSender.Page_Load(Object sender, EventArgs e) in d:\Site\Tool\User\RequestSender.aspx.cs:line 72 at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t , EventArgs e) 在 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) 在 System.Web.UI.Control.OnLoad(EventArgs e) 在 System.Web.UI.Control.LoadRecursive() 在 System. Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）

我一次又一次地尝试在我的机器上运行代码，但无法得到同样的错误。

即使我生活在代码中，我也会偶尔遇到这个问题。

RequestSender.aspx.cs 中的 Page_Load 代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (!IsPostBack)
            {
                this.LoadRequest();
            }
        }
        catch (CustomException ex)
        {
            this.ShowMessage(ex.Message);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

LoadRequest() 如下：

```
private void LoadRequest()
    {
        Credential credential;

            if (
                !string.IsNullOrEmpty(Request["typeOfrequest"]) &&
                !string.IsNullOrEmpty(Request["empUserId"]) &&
                !string.IsNullOrEmpty(Request["applicationId"])
               )
            {
                // Get details of credentials
                credential = (new RequestManager()).GetCredential(this.EmpUserId, this.ApplicationId, (int)this.TypeOfrequest);
                this.applicaionRequest = new Request
                {
                    RequestType = this.TypeOfrequest,
                    RequestStatus = Enumerations.RequestStatus.Sent,
                    Application = credential.Application,

                    EmpUserId = credential.EmpUserId,
                    EmployeeId = credential.EmployeeId,
                    Username = credential.Username,

                    SenderAddress = Security.CurrentUser.Details.EmailAddress,
                    ReceiverAddress = (new Datastore.RequestStore()).GetReceiverAddress((int)this.TypeOfrequest, this.ApplicationId),
                    AddedBy = Security.CurrentUser.Details.UserId
                };
                    ucSendRequest.ApplicationRequest = applicaionRequest;

            }
            else
            {
                Response.Write("Invalid request!");
                Response.End();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:25:13.310

错误清楚地表明 smth`null`在应用程序执行期间。

要获得任何帮助，您应该检查`null`值（`Request`in`LoadRequest()`可能是一个很好的候选者），或者更好的解决方案，修改您的 catch 博客以记录导致应用程序崩溃的参数。

# android - 没有 GoogleCredential.Builder 就无法构建 GoogleCredential

> ID：15064636
> 
> 赞同：3
> 
> 时间：2013-02-25T10:16:34.347
> 
> 标签：android, google-drive-api

在 OAuth2 的 Google 文档中，`GoogleCredential`此处描述了使用身份验证令牌构建一个：

[凭据和凭据存储](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Credential_and_Credential_Store "凭据和凭据存储")

特别是提供了这个代码片段：

```
GoogleCredential credential = new GoogleCredential().setAccessToken(accessToken);
Plus plus = Plus.builder(new NetHttpTransport(), new JacksonFactory())
    .setApplicationName("Google-PlusSample/1.0")
    .setHttpRequestInitializer(credential)
    .build() 
```

当我尝试以这种方式构建`GoogleCredential`时，我被简洁地告知：

```
Please use the Builder and call setJsonFactory, setTransport and setClientSecrets 
```

在异常的消息字段中。我上周下载了这个库，所以我不确定发生了什么。文档是否只是过时了，如果是，什么方法取代了这个作为从现有身份验证令牌和刷新令牌构建的最佳实践？

顺便说一句，不能使用 Builder 的原因是 Google 应用程序控制台没有提供客户端密码；它说不再为 Android 应用程序等提供它们。 `setClientSecrets(...)`，因此，无法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T20:54:04.007

我最近遇到了这个问题，并为我的案例找到了解决方案。

下面是运行条件：程序运行在Android 4.0上，不使用Google Drive SDK，因为它不能让我们的程序读取Google Drive上非我们程序创建的文件。我使用 com.google.api.services.drive.* 和 com.google.api.client.googleapis.auth.oauth2.* Java 库。

出现此问题的代码如下所示：

```
GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
        httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET, Arrays.asList(DriveScopes.DRIVE))
    .setAccessType("offline")
    .setApprovalPrompt("auto").build();

GoogleTokenResponse response = null;
try {
    response = flow.newTokenRequest(authorizationCode).setRedirectUri(REDIRECT_URI).execute();
} catch (IOException e) {
    e.printStackTrace();
}

GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response); 
```

但是如果 setAccessType("online"); 的参数，上面的代码运行良好。

这个问题的解决方法取决于你想要什么样的 accessType。

如果您希望“onLine”作为 accessType，那么使用 setFromTokenResponse() 应该可以。

如果你想“离线”作为访问类型，那么你需要使用打击代码：

```
GoogleCredential credential = new GoogleCredential.Builder().setTransport(httpTransport)
        .setJsonFactory(jsonFactory)
        .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
        .build()
        .setFromTokenResponse(response); 
```

需要提到的一件事是，您需要保持 accessType 设置与 GoogleTokenResponse 和 GoogleAuthorizationCodeFlow 创建一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T08:54:46.270

[您需要在Google Dev Console](https://console.developers.google.com/project)中设置您的 Android 应用程序密钥。

1.  选择你的项目，选择 API & Auth，然后点击 Credentials
2.  创建新的客户端 ID（尽管它有其他客户端 ID）
3.  选择已安装的应用程序-> android
4.  正确填写你的包名和SHA1
5.  创建新密钥（尽管它有其他客户端密钥）
6.  选择安卓键
7.  像这样填写 SHA1;packageName：`45:B5:E4:6F:36:AD:0A:98:94:B4:02:66:2B:12:17:F2:56:26:A0:E0;com.example`

您的问题将自动解决。请务必使用调试密钥库和发布密钥库创建客户端 ID 和密钥。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-25T18:42:29.223

查看 Google Drive SDK 文档中的 Android 快速入门示例，了解正确设置的分步说明`GoogleCredential`：

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

# java - 无法创建托管 bean DBUserMBean。发现以下问题： - 找不到 Bean 或属性类 (...)

> ID：15064637
> 
> 赞同：0
> 
> 时间：2013-02-25T10:16:34.307
> 
> 标签：java, mysql, hibernate, jsf-2, primefaces

我正在尝试使用 Hibernate 和 PrimeFaces 使用 MySQL 数据库制作 Java 和 JSF 项目。

Hibernate 层运行良好（基本 CRUD 运行良好），但在我使用 Prime Faces 制作基本 GUI 并将项目部署到 Tomcat、服务器后，它返回错误：

```
Unable to create managed bean DBUserMBean. The following problems were 
found: - Bean or property class 
com/hibernate/maven/Hibernate_APP/DBUserManagedBean for managed bean 
DBUserMBean cannot be found. 
```

这是我项目中的所有文件：

**数据库用户**

```
@Entity
public final class DBUser{
    private Long  id;
    private String kolumna1;
    private String kolumna2;
    private String kolumna3;
    private int  kolumna4;

    @Id
    @GeneratedValue
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public String toString() {
        StringBuffer strBuff = new StringBuffer();
        strBuff.append("id :").append(id);
        strBuff.append("kolumna1 :").append(kolumna1);
        strBuff.append("kolumna2 :").append(kolumna2);
        strBuff.append("kolumna3 :").append(kolumna3);
        strBuff.append("kolumna4 :").append(kolumna4);
        return strBuff.toString();
    }
} 
```

**DBUserManagedBean**

```
@ManagedBean(name="DBUserManagedBean")
@SessionScoped
public class DBUserManagedBean implements Serializable{

    private static final long serialVersionUID = 1L;
    private static Logger log = Logger.getLogger(DBUserManagedBean.class);
    private static final String SUCCESS = "success";
    private static final String ERROR   = "error";

    private Long  id;
    private String kolumna1;
    private String kolumna2;
    private String kolumna3;
    private int  kolumna4;

    private String message;

    //getters and setters   

    public String getMessage() {
        StringBuffer strBuff = new StringBuffer();
        strBuff.append("id :").append(id);
        strBuff.append("kolumna1 :").append(kolumna1);
        strBuff.append("kolumna2 :").append(kolumna2);
        strBuff.append("kolumna3 :").append(kolumna3);
        strBuff.append("kolumna4 :").append(kolumna4);
        this.setMessage(strBuff.toString());
        return this.message;
    }

    public void setMessage(String message) {
        this.message = message;
    } 

    public String save() {
        String result = null;
        Session session = HibernateUtil.getSessionFactory().openSession();

        DBUser dbuser = new DBUser();

        dbuser.setKolumna1(this.getKolumna1());
        dbuser.setKolumna2(this.getKolumna2());
        dbuser.setKolumna3(this.getKolumna3());
        dbuser.setKolumna4(this.getKolumna4());

        Transaction tx = null;

        try {
            tx = session.beginTransaction();
            session.save(dbuser);
            tx.commit();
            log.debug("New Record : " + dbuser + ", wasCommitted : " + tx.wasCommitted());
            result = SUCCESS;
        } catch (Exception e) {
            if (tx != null) {
                tx.rollback();
                result = ERROR;
                e.printStackTrace();
            }
        } finally {
            session.close();
    }
    return result;
}

public List<DBUser> getDBUsers() {
    Session session = HibernateUtil.getSessionFactory().openSession();
    List<DBUser>  dbuserList = session.createCriteria(DBUser.class).list();
    return dbuserList;
}

public void reset() {
    this.setKolumna1("");
    this.setKolumna2("");
    this.setKolumna3("");
    this.setKolumna4(kolumna4);
}

} 
```

**面孔-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee

http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"

version="2.0">

<managed-bean>

    <managed-bean-name>DBUserMBean</managed-bean-name>
    <managed-bean-class>com.hibernate.maven.Hibernate_APP.DBUserManagedBean</managed-   
bean-class>
    <managed-bean-scope>session</managed-bean-scope>

</managed-bean>

<navigation-rule>
    <from-view-id>pages/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>pages/welcome.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>error</from-outcome>
        <to-view-id>pages/error.xhtml</to-view-id>
    </navigation-case>
</navigation-rule>

</faces-config> 
```

**索引.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"  
xmlns:h="http://java.sun.com/jsf/html"  
xmlns:f="http://java.sun.com/jsf/core"  
xmlns:p="http://primefaces.org/ui">  

<h:head><title>Hibernate_APP</title></h:head>
<body>
 <h:form>

     <table>
         <tr>
            <td><h:outputLabel for="kolumna1" value="kolumna1 :" /></td>
            <td><p:inputText id="kolumna1" value="#{DBUserManagedBean.kolumna1}"/></td>
         </tr>

          <tr>
            <td><h:outputLabel for="kolumna2" value="kolumna2 :" /></td>
            <td><p:inputText id="kolumna2" value="#{DBUserManagedBean.kolumna2}"/></td>
         </tr>

          <tr>
            <td><h:outputLabel for="kolumna3" value="kolumna3 :" /></td>
            <td><p:inputText id="kolumna3" value="#{DBUserManagedBean.kolumna3}"/></td>
         </tr>

          <tr>
            <td><h:outputLabel for="kolumna4" value="kolumna4 :" /></td>
            <td><p:inputText id="kolumna4" value="#{DBUserManagedBean.kolumna4}"/></td>
         </tr>

         <tr>
            <td><p:commandButton id="submit" value="Save" action="#   
{DBUserManagedBean.save}" ajax="false"/></td>
            <td><p:commandButton id="reset" value="Reset" action="#   
{DBUserManagedBean.reset}" ajax="false"/></td>

         </tr>
     </table>

 </h:form>
</body>
</html> 
```

**欢迎.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.prime.com.tr/ui">

<h:head>
<title>Hibernate_APP</title>
</h:head>
<body>
<h:form>
    <h:outputText value="Saved Record is #{DBUserMBean.message}"></h:outputText>
    <p:dataTable id="DBUsers" value="#{DBUserMBean.getDBUsers()}" var="DBUser"    
style="width: 10%">

        <p:column>
            <f:facet name="header">
                <h:outputText value="ID" />
            </f:facet>
            <h:outputText value="#{DBUser.id}" />
        </p:column>

       <p:column>
            <f:facet name="header">
                <h:outputText value="kolumna1" />
            </f:facet>
            <h:outputText value="#{DBUser.kolumna1}" />
        </p:column>

        <p:column>
            <f:facet name="header">
                <h:outputText value="kolumna2" />
            </f:facet>
            <h:outputText value="#{DBUser.kolumna2}" />
        </p:column>

          <p:column>
            <f:facet name="header">
                <h:outputText value="kolumna3" />
            </f:facet>
            <h:outputText value="#{DBUser.kolumna3}" />
        </p:column>

          <p:column>
            <f:facet name="header">
                <h:outputText value="kolumna4" />
            </f:facet>
            <h:outputText value="#{DBUser.kolumna4}" />
        </p:column>

    </p:dataTable>
  </h:form>
</body>
</html> 
```

当我尝试通过我的表单将某些内容保存到数据库时，这是一个例外：

```
WARNING: /pages/index.xhtml @14,87 value="#{DBUserManagedBean.kolumna1}": 
Target Unreachable, identifier 'DBUserManagedBean' resolved to null
javax.el.PropertyNotFoundException: /pages/index.xhtml @14,87 
value="#{DBUserManagedBean.kolumna1}": Target Unreachable, 
identifier 'DBUserManagedBean' resolved to null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:57:19.520

您缺少 the `@Table(name="your Table Name")`and also`@column`注释。

你删除的方法签名

```
value="#{DBUserMBean.getDBUsers()}" 
```

试试这个

```
value="#{DBUserMBean.getDBUsers}" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T13:19:05.790

至于我的帖子没有回答问题，我只会将评论留给作者的代码。

您的托管 bean 被声明了两次，无论是在注释中`faces-config.xml`还是通过`@ManagedBean`注释。尽管它看起来可能会产生歧义，但`faces-config.xml`优先于带有注释的配置。不过，按照我的口味，两次命名 bean 并且使用不同的名称是一种可能导致多个错误的方式。因此，我建议使用注释或 xml 格式命名 bean。

请注意，这`faces-config.xml`是一种定义托管 bean 和导航案例结果的老式方法。JSF 2.x 支持注释和隐式导航。

顺便说一句，您的`@Entity`类缺少`@Column`s 和的注释`@Table`，您的支持 bean 应该具有实体的 DTO，分离实体本身的 DTO，像您一样插入多个文件是一种不好的做法，并且您的操作方法应该返回导航案例结果，例如`welcome`， ETC。

最后，按照@BalusC 在注释#3 中正确说明的那样做，并检查您的 xml 配置文件中的完全限定名称和/或确保您的类文件实际存在于您的构建中。

# node.js - Geddy JS 覆盖自定义 id

> ID：15064641
> 
> 赞同：1
> 
> 时间：2013-02-25T10:16:40.717
> 
> 标签：node.js, mongodb, geddy

我正在使用带有 Mongo DB 的 Geddy JS (v 0.6.18) 运行应用程序 - 在保存模型之前，我正在设置自定义 id 属性。尽管如此，Geddy JS（或 Mongo DB？）似乎用如下所示的字符串覆盖了这个自定义 id 属性：

EAF9AAD8-3A5D-462B-8733-376AB17ECBEC

而不是我的自定义 10 长度字符串。

在更新到最新版本之前不会发生此行为。谁能解释一下，这里发生了什么以及我如何能够将其关闭？

# android - 如何删除应用程序的多个实例

> ID：15064642
> 
> 赞同：3
> 
> 时间：2013-02-25T10:16:42.417
> 
> 标签：android, url, android-intent, android-activity

我制作了一个创建和监听自定义 url 的应用程序。我的问题是应用程序的多个实例。例如，我创建一个 url 并通过短信将其发送给我的朋友。之后，我在我的应用程序中打开该短信（包含 url）。这会创建一个打开此 url 的我的应用程序的新实例。我希望一次只能有一个实例。我将如何实现这一目标。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:21:41.593

`android:launchMode=""`您可以在标记中添加属性`activity`，在清单文件中，并将其设置为以下之一：

1.  **标准**：系统总是在目标任务中创建一个新的活动实例，并将意图路由到它。
2.  **singleTop**：如果 Activity 的实例已经存在于目标任务的顶部，系统会通过调用其`onNewIntent()`方法将 Intent 路由到该实例，而不是创建 Activity 的新实例。
3.  **singleTask**：系统在新任务的根目录创建活动并将意图路由到它。但是，如果活动的实例已经存在，系统会通过调用其 onNewIntent() 方法将意图路由到现有实例，而不是创建一个新实例。
4.  **singleInstance**：与 singleTask 相同，只是系统不会在持有该实例的任务中启动任何其他活动。活动始终是其任务的唯一且唯一的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:20:28.547

在打开 URL的**AndroidManifest.xml**中设置`android:launchMode="singleTop"`为您的 Activity 。例如：

 **```
<activity android:name="com.abc.MainActivity" android:label="app_name"
          android:launchMode="singleTop"> 
```

此外，如果您想捕捉新`Intent`的内容，请在您的活动代码中覆盖以下方法：

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    setIntent(intent);   //set new intent as current intent
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:25:39.720

用于`android:launchMode="singleTask"`您`Activity`的`AndroidManifest.xml`. 有关更多信息，请查看有关[Activity 的 LaunchMode 的](http://developer.android.com/intl/ja/guide/topics/manifest/activity-element.html)文档。**

# django - django 内部文件共享与隐私

> ID：15064643
> 
> 赞同：0
> 
> 时间：2013-02-25T10:16:43.970
> 
> 标签：django, file-upload, privacy

我正在尝试编写一个工作板/应用程序系统，我需要客户上传简历然后与雇主分享的能力，但我想不出最好的方法来做到这一点。简历需要保密，除了与谁共享，并且客户需要能够在提交给雇主后更新简历。

是否有一个 django 应用程序已经这样做了，或者我将如何设置隐私、文件共享等，以便文件可以被复制并且仍然只对那些共享的人保密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:15:43.537

使用 Apache 的 x-sendfile，例如，请参阅：[让 Django 提供可下载文件](https://stackoverflow.com/questions/1156246/having-django-serve-downloadable-files)

将文件存储在私人文件夹中。Django 授权请求并让 Apache 使用 x-sendfile 标头提供文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:27:08.040

1.  使用 S3 和 django-storages。
2.  将 CV 上传到 S3，并将文件设置为私有。
3.  创建一个视图，该视图将从 S3 存储桶中获取给定的 CV，生成“过期 URL”，或者仅从 S3 获取原始数据并通过视图将其传递给用户。

通过这种方式可以完全控制文件的隐私。

您也可以通过将上传的文件存储在您的项目 STATICs 目录之外（假定可公开访问）并为此执行步骤 3 来执行此操作。

或者，如果您想让 DBA 的头脑爆炸，请将 CV 作为 BLOB 存储在数据库中，并以相同的方式使用视图。

# arrays - 这个 Perl 数组类型的规范是什么？

> ID：15064646
> 
> 赞同：0
> 
> 时间：2013-02-25T10:16:55.847
> 
> 标签：arrays, perl

我在一个 Perl 脚本中找到了这个数组定义：

```
 my $in_field = {};
 $in_field->{NAME}        = "John";
 $in_field->{SURNAME}     = "Black";
 $in_field->{PHONE}       = "01234"; 
```

它是什么类型的数组？我对 Perl 不是很熟练，我试图在 Google 中找到它，但是没有任何有意义的关键字很难找到它。我试图在全局数组中查找定义“= {}”和运算符“->”，但没有成功。

它有一些规范吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T10:19:02.737

`$in_field`是一个标量。

`$in_field`包含对哈希的引用。

哈希记录在[perldata](http://perldoc.perl.org/perldata.html)中，引用记录在[perlref](http://perldoc.perl.org/perlref.html)中。

# c# - 异步/等待和任务

> ID：15064650
> 
> 赞同：2
> 
> 时间：2013-02-25T10:17:08.203
> 
> 标签：c#, sockets, async-await

好的，我想我已经理解了整个异步/等待的事情。每当您等待某事时，您正在运行的函数都会返回，从而允许当前线程在异步函数完成时执行其他操作。优点是您不会启动新线程。

这并不难理解，因为它有点像 Node.JS 的工作原理，除了 Node 使用大量回调来实现这一点。然而，这是我无法理解优势的地方。

套接字类目前没有任何 Async 方法（与 async/await 一起使用）。我当然可以将一个套接字传递给流类，并在那里使用异步方法，但是这会给接受新套接字留下一个问题。

据我所知，有两种方法可以做到这一点。在这两种情况下，我都在主线程的无限循环中接受新套接字。在第一种情况下，我可以为我接受的每个套接字启动一个新任务，并在该任务中运行 stream.ReceiveAsync。但是，await 不会真正阻止该任务，因为该任务将无事可做？这又会导致在线程池上产生更多线程，这又不比在任务中使用同步方法更好？

我的第二个选择是将所有接受的套接字放在几个列表之一（每个线程一个列表）中，并在这些线程内运行一个循环，为每个套接字运行 await stream.ReceiveAsync。这样，每当我遇到等待时，stream.ReceiveAsync 并开始从所有其他套接字接收。

我想我真正的问题是这是否比线程池更有效，并且在第一种情况下，它是否真的比仅使用 APM 方法更糟糕。

我也知道您可以使用 await/async 将 APM 方法包装到函数中，但在我看来，您仍然会得到 APM 方法的“缺点”，以及 async/await 中状态机的额外开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:34:39.173

异步套接字 API 不是基于 的`Task[<T>]`，因此它不能直接从`async`/使用`await`- 但您可以相当容易地桥接它 - 例如（*完全*未经测试）：

```
public class AsyncSocketWrapper : IDisposable
{
    public void Dispose()
    {
        var tmp = socket;
        socket = null;
        if(tmp != null) tmp.Dispose();
    }
    public AsyncSocketWrapper(Socket socket)
    {
        this.socket = socket;
        args = new SocketAsyncEventArgs();
        args.Completed += args_Completed;
    }

    void args_Completed(object sender, SocketAsyncEventArgs e)
    {
        // might want to switch on e.LastOperation
        var source = (TaskCompletionSource<int>)e.UserToken;
        if (ShouldSetResult(source, args)) source.TrySetResult(args.BytesTransferred);
    }
    private Socket socket;
    private readonly SocketAsyncEventArgs args;
    public Task<int> ReceiveAsync(byte[] buffer, int offset, int count)
    {

        TaskCompletionSource<int> source = new TaskCompletionSource<int>();
        try
        {
            args.SetBuffer(buffer, offset, count);
            args.UserToken = source;
            if (!socket.ReceiveAsync(args))
            {
                if (ShouldSetResult(source, args))
                {
                    return Task.FromResult(args.BytesTransferred);
                }
            }
        }
        catch (Exception ex)
        {
            source.TrySetException(ex);
        }
        return source.Task;
    }
    static bool ShouldSetResult<T>(TaskCompletionSource<T> source, SocketAsyncEventArgs args)
    {
        if (args.SocketError == SocketError.Success) return true;
        var ex = new InvalidOperationException(args.SocketError.ToString());
        source.TrySetException(ex);
        return false;
    }
} 
```

注意：您可能应该避免在循环中运行接收 - 我建议让每个套接字在接收数据时负责自己泵送。您唯一需要循环的就是定期扫描僵尸，因为并非所有套接字死亡都可以检测到。

另请注意，如果没有原始异步套接字 API，它完全可以使用`Task[<T>]`- 我广泛使用它。虽然`await`在这里可能有用，但它不是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:11:42.663

> 这并不难理解，因为它有点像 Node.JS 的工作原理，除了 Node 使用大量回调来实现这一点。然而，这是我无法理解优势的地方。

Node.js 确实使用回调，但它还有另一个重要方面真正简化了这些回调：它们都被序列化到同一个线程。因此，当您查看 .NET 中的异步回调时，通常会处理多线程以及异步编程（[EAP 样式的回调](http://msdn.microsoft.com/en-us/library/ms228969.aspx)除外）。

使用回调的异步编程称为“连续传递样式”（CPS）。它是 Node.js 的唯一真正选择，但也是 .NET 上的众多选择之一。特别是，CPS 代码会变得极其复杂且难以维护，因此引入了`async`/`await`编译器转换，以便您可以编写“看起来正常”的代码，编译器会为您将其转换为 CPS。

> 在这两种情况下，我都在主线程的无限循环中接受新套接字。

如果您正在编写服务器，那么是的，您将在某个地方反复接受新的客户端连接。此外，您应该不断地从每个连接的套接字读取，因此每个套接字也有一个循环。

> 在第一种情况下，我可以为我接受的每个套接字启动一个新任务，并在该任务中运行 stream.ReceiveAsync。

你不需要新的任务。这就是异步编程的全部意义所在。

> 我的第二个选择是将所有接受的套接字放在几个列表之一（每个线程一个列表）中，并在这些线程内运行一个循环，为每个套接字运行 await stream.ReceiveAsync。

我不确定你为什么需要多个线程，或者根本不需要任何专用线程。

您似乎对如何工作`async`和`await`工作感到有些困惑。我建议按顺序阅读[我自己的介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)、[MSDN 概述](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)、[基于任务的异步模式指南](http://msdn.microsoft.com/en-us/library/hh873175.aspx)和[`async`常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx)。

> 我也知道您可以使用 await/async 将 APM 方法包装到函数中，但在我看来，您仍然会得到 APM 方法的“缺点”，以及 async/await 中状态机的额外开销。

我不确定你指的是什么缺点。状态机的开销虽然不为零，但在套接字 I/O 面前可以忽略不计。

* * *

如果你正在寻找套接字 I/O，你有几个选择。对于读取，您可以使用 APM 或`Task`围绕[APM](http://msdn.microsoft.com/en-us/library/hh873178.aspx)或[Async](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)方法的包装器在“无限”循环中执行它们。或者，您可以使用 Rx 或 TPL Dataflow 将它们转换为类似流的抽象。

另一种选择是我几年前编写的一个名为[Nito.Async](http://nitoasync.codeplex.com/)的库。它提供了 EAP 样式（基于事件）的套接字，可以为您处理所有线程封送处理，因此您最终会得到像 Node.js 这样更简单的东西。当然，就像 Node.js 一样，这种简单性意味着它不会像更复杂的解决方案那样扩展。

# jenkins - Jenkins - 用于显示部署在 Tomcat 上的应用程序的插件

> ID：15064651
> 
> 赞同：1
> 
> 时间：2013-02-25T10:17:13.160
> 
> 标签：jenkins

我们已经创建了一个作业，用于将应用程序从我们的开发环境迁移到测试环境，并且我们选中了“This Build is Parameterised”选项。在此，我们将部署到开发环境中的 Tomcat 实例的应用程序列表硬编码到“CHOICE”参数中。我们的要求是，如果我提供 TOmcat 实例详细信息，则当前在 Tomcat 上运行的应用程序应动态填充到“CHOICE”参数中，。请让我知道这是否可行以及是否有相同的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:37:55.780

至少有两个插件支持这一点，
假设您有一种方法（一些 API）来检索当前安装的应用程序列表：

*   **[Jenkins 动态参数插件](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+Dynamic+Parameter+Plug-in)**
    这个插件允许您通过*Groovy*脚本加载值。

*   **[Extended Choice Parameter plugin](https://wiki.jenkins-ci.org/display/JENKINS/Extended+Choice+Parameter+plugin)**
    这个插件可以加载预先生成的带有值的文本文件
    （您可能需要运行生成该文件的“设置”步骤）。

干杯

# java - com.sun.xml.ws.streaming.XMLStreamReaderException：XML 阅读器错误：com.ctc.wstx.exc.WstxEOFException：序言中出现意外的 EOF

> ID：15064653
> 
> 赞同：2
> 
> 时间：2013-02-25T10:17:24.230
> 
> 标签：java, jax-ws

我使用来自本地 wsdl 文件的 wsimport 生成了一个 jax-ws Web 服务客户端。每当我尝试调用该服务时，我都会收到一个错误： com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog 这是错误堆栈；

```
Exception in thread "main" com.sun.xml.ws.streaming.XMLStreamReaderException: XML reader error: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog 
```

在 [row,col,system-id]: [1,0," [http://dataimpact.co.ke/SmsNotificationManagerService/services/SmsNotificationManager](http://dataimpact.co.ke/SmsNotificationManagerService/services/SmsNotificationManager)"] 在 com.sun.xml.ws.streaming.XMLStreamReaderUtil.next(XMLStreamReaderUtil.java:99) 在 com.sun.xml 的 com.sun.xml.ws.streaming.XMLStreamReaderUtil.wrapException(XMLStreamReaderUtil.java:271) .ws.streaming.XMLStreamReaderUtil.nextContent(XMLStreamReaderUtil.java:114) 在 com.sun.xml.ws.streaming.XMLStreamReaderUtil.nextElementContent(XMLStreamReaderUtil.java:104) 在 com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser .hasWSDLDefinitions(RuntimeWSDLParser.java:246) 在 com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:156) 在 com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser .java:135) 在 com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:275) 在 com.sun.xml.ws.client.WSServiceDelegate.(WSServiceDelegate.java:238) 在 com.sun .xml.ws.client。WSServiceDelegate.(WSServiceDelegate.java:186) 在 com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:111) 在 javax.xml.ws.Service.(Unknown Source) 在 org.csapi.wsdl。 parlayx.sms.notification_manager.v2_3.service.SmsNotificationManagerService.(SmsNotificationManagerService.java:42) at com.test.Test.main(Test.java:51) 原因：com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in [row,col,system-id] 的序言：[1,0,”[row,col,system-id] 的序言中出现意外的 EOF：[1,0,”[row,col,system-id] 的序言中出现意外的 EOF：[1,0,”[http://dataimpact.co.ke/SmsNotificationManagerService/services/SmsNotificationManager](http://dataimpact.co.ke/SmsNotificationManagerService/services/SmsNotificationManager) "] 在 com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:661) 在 com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader .java:2134) 在 com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069) 在 com.sun.xml 的 com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2040)。 ws.util.xml.XMLStreamReaderFilter.next(XMLStreamReaderFilter.java:96) 在 com.sun.xml.ws.streaming.XMLStreamReaderUtil.next(XMLStreamReaderUtil.java:80) ... 12 更多

我缺少一些东西，我无法弄清楚它是什么。任何帮助将不胜感激。

# jquery - 使用jquery转换html结构

> ID：15064656
> 
> 赞同：2
> 
> 时间：2013-02-25T10:17:28.790
> 
> 标签：jquery

任何想法如何从这里转换 html 结构：

```
<div class="menu">
    <ul>
        <li>
            <a href="#">Fruit A</a>
            <ul>
                <li><a href="#">Category 1</a></li>
                <li><a href="#">Category 2</a></li>                              
            </ul>
        </li>
        <li>
            <a href="#">Fruit B</a>
            <ul>
                <li><a href="#">Category 1</a></li>
                <li><a href="#">Category 2</a></li>                             
            </ul>
        </li>
    </ul>
</div> 
```

使用 jQuery 进行以下操作：

```
<div class="menu">
    <div>
        <h3><a href="#">Fruit A</a></h3>
        <ul>
            <li><a href="#">Category 1</a></li>
            <li><a href="#">Category 2</a></li>                             
        </ul>
    </div>
    <div>
        <h3><a href="#">Fruit B</a></h3>
        <ul>
            <li><a href="#">Category 1</a></li>
            <li><a href="#">Category 2</a></li>                            
        </ul>
    </div>
</div> 
```

我试过了，[`.replaceWith()`](http://api.jquery.com/replaceWith/)但没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:31:56.257

有很多方法可以做到这一点。这是第一个想到的：

```
var $menu = $("div.menu"),
    $ul = $menu.children("ul").detach();
$ul.children().each(function() {
    $("<div />").append($(this).children()).appendTo($menu);
});
$("div.menu > div > a").wrap("<h3 />"); 
```

也就是说，首先从菜单 div 中分离顶级列表。然后遍历该列表的 li 元素，将每个元素的内容附加到一个新的 div 中，并将结果附加到菜单中。在 h3 标记中包装标题锚似乎作为最后的单独操作更简单。

演示：http: [//jsbin.com/uwohih/1/edit](http://jsbin.com/uwohih/1/edit)

有关我使用过的 jQuery 方法的更多信息，您知道[在哪里查找](http://api.jquery.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:24:04.060

`**[LIVE DEMO](http://jsbin.com/izazib/6/edit)**`

```
$('.menu > ul > li').each(function(){
  $(this).children('a').wrap('<h3/>');
  $(this).parent().after('<div>'+ this.innerHTML +'</div>');
}).closest('ul').remove(); 
```

* * *

`**[LIVE DEMO](http://jsbin.com/izazib/7/edit)**`

```
$('.menu > ul > li').each(function(){
  $(this).children('a').wrap('<h3/>').closest('ul').after('<div>'+ this.innerHTML +'</div>');
}).closest('ul').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:31:30.840

检查这个：

```
$('.menu > ul > li > a').each(function(){
    $(this).wrap('<h3></h3>');
});

var arr = [];
$('.menu ul li').each(function(){
    arr.push($(this).html());
}

var newhtml = '';

for(var x in arr){
    newhtml += '<div>' + x + '</div>';
}
$('.menu').html(newhtml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:30:16.960

你可以这样做：

```
$(function() {
    var     menu = $('.menu'),
        newHtml = '';

    menu.children('ul li').each(function() {
        var     el = $(this);

        el.children('a').wrap('<h3></h3>');

        newHtml += '<div>'+el.html()+'</div>';
    });

    menu.html(newHtml);
}); 
```

# android - 无法在 WindowManager 中调用 onClickListener

> ID：15064657
> 
> 赞同：4
> 
> 时间：2013-02-25T10:17:34.553
> 
> 标签：android, overlay, android-service

我在我的**服务**类中实现 windowManager

```
WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    wm.addView(mView, params); 
```

我在 Windows 管理器中添加了一个视图，但该视图的单击侦听器不起作用。

```
 mView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(),"onClick",     Toast.LENGTH_LONG).show();
        }
    }); 
```

这是布局参数。

```
 WindowManager.LayoutParams params = new WindowManager.LayoutParams(130,130);
    params.type=WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY;
    params.flags=WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH;
    params.format=PixelFormat.TRANSPARENT; 
```

我希望那个点击监听器能够正常工作，但它不能正常工作，所以请在这方面帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:51:08.177

嗨经过长时间的研究，我发现了这段代码。这应该有效。试试 。在您的服务类的创建时添加此行。以下内容是我们应该传递的参数 FLAG_WATCH_OUTSIDE_TOUCH 和所有。希望这对您有所帮助。

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(100, 100, 2007, 8, -3);
        Button bb=new Button(this);
        bb.setText("Button");
        bb.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.out.println("Clicked----><<<<<<<");
            }
        });

        bb.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                System.out.println("Touched =----- > ");
                return false;
            }
        });

        params.gravity = Gravity.RIGHT | Gravity.TOP;
        params.setTitle("Load Average");
        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);        
        wm.addView(bb, params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-20T12:18:41.103

对我来说，我正在使用这个：

```
WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY; 
```

我发现在android 4.0之后，由于安全原因，这个标志会阻止点击窗口管理器

# javascript - 无法调用未定义的方法“toLowerCase”

> ID：15064659
> 
> 赞同：1
> 
> 时间：2013-02-25T10:17:37.117
> 
> 标签：javascript, jquery

我正在尝试将我的 js 代码重构为更加简洁，但遇到了这个错误。这是我的代码

```
function validate_field(e){
    console.log(typeof e);
    $(e).focusout(function(e){
        var price = $(e).val();
        var number = parseInt(price, 10);
        console.log(number)
        if (number < 0)
        {
            $(e).val(0);
        }
    })
}
$(function(){
    validate_field('#price');
}) 
```

根据堆栈跟踪错误在这里某处`var price = $(e).val();` 我在这里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:20:47.767

尝试

```
 function validate_field(e){
        console.log(typeof e);
        $(e).focusout(function(ev){
-------------------------------^ here you are redeclaring the e previously passed as selector 
            var price = $(e).val();
            var number = parseInt(price, 10);
            console.log(number)
            if (number < 0)
            {
                $(e).val(0);
            }
        })
    }
    $(function(){
        validate_field('#price');
    }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T10:20:22.847

您正在`e`用函数变量干扰参数`e`。它应该是 ：

```
function validate_field(s) { // here also ? I have set "s" as parameter, you can set any word you like
    console.log(typeof s); // noticed the difference here?
    $(s).focusout(function(e) { // noticed the difference here?
        var price = $(this).val();
        var number = parseInt(price, 10);
        console.log(number)
        if (number < 0)
        {
            $(e).val(0);
        }
    });
} 
```

您还可以像 @dakait 所做的那样更改您的事件参数以进行细微更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:28:37.333

重新分配变量会导致问题。

```
function validate_field(field){ // both variable should not be same e & 'e' of inside function
    console.log(typeof e);
    $(field).focusout(function(e){
        var price = $(field).val();
        var number = parseInt(price, 10);
        console.log(number)
        if (number < 0)
        {
            $(field).val(0);
        }
    })
}
$(function(){
    validate_field('#price');
}) 
```

**或者**

可以直接使用下面的代码，而不用在脚本中调用其他函数

```
$(function(){
    $('#price').focusout(function(e){
            var price = $(this).val();
            var number = parseInt(price, 10);
            console.log(number)
            if (number < 0)
            {
                $(this).val(0);
            }
        })
}); 
```

# wordpress - 从自定义管理页面重定向产生“标头已发送”

> ID：15064665
> 
> 赞同：3
> 
> 时间：2013-02-25T10:17:43.280
> 
> 标签：wordpress

我已经在我的插件中注册了一个自定义管理页面`add_submenu_page`。在回调函数（生成管理页面内容的那个）中，我有以下代码：

```
wp_redirect('http://google.com');
exit; 
```

但是，当我访问管理页面时，出现错误：

```
Warning: Cannot modify header information - headers already sent by (output started at ..\wp-admin\includes\template.php:1637) in ..\wp-includes\pluggable.php on line 878 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T12:11:49.540

回调`add_submenu_page`发生得太晚（在呈现管理侧边栏和标题之后），这就是`location`无法再发送标题的原因。

为了实现这一点，我们需要在 WordPress 管理区域中更早地挂钩一个函数，在发送标头之前（例如`admin_init`）。

一个好方法：

```
function myplugin_preprocess_pages($value){
    global $pagenow;
    $page = (isset($_REQUEST['page']) ? $_REQUEST['page'] : false);
    if($pagenow=='admin.php' && $page=='myplugin-custom-page-slug'){
        wp_redirect('http://google.com');
        exit;
    }
}
add_action('admin_init', 'myplugin_preprocess_pages'); 
```

每当您尝试查看时，上面的代码都会将您重定向到 Google `wp-admin/admin.php?page=myplugin-custom-page-slug`。

就我而言，我已将自定义页面附加`add_submenu_page`到管理区域中的默认 (admin.php) 父级，并将自定义页面的 slug 设置为`myplugin-custom-page-slug`. `switch`如果您有很多自定义管理页面，请随意替换上面代码中的值，甚至添加 PHP 。

这样，每当查看我们的自定义管理页面时，我们已经足够早地进行重定向。

***更新：（****另一种方法）*

多亏了[这篇文章](https://wordpress.stackexchange.com/a/88283/27981)，我了解到 WordPress 为每个自定义管理页面创建了一个独特的操作 ( `load-{parent_page_slug}_page_{plugin_subpage_slug}`)。例如，如果您添加了一个带有 parent`admin.php`和 slug的自定义管理页面`myplugin-custom-page`，您可以通过以下方式挂钩其“加载”操作：

```
add_action( 'load-admin_page_myplugin-custom-page', 'myplugin_custom_page_redirect' );
function myplugin_custom_page_redirect() {
    if ( 'myplugin-custom-page' == filter_input( INPUT_GET, 'page' ) ) {
        wp_redirect( 'http://google.com' );
        exit;
    }
} 
```

请注意，操作名称需要考虑一些事项。它是下划线和破折号的混合，并确保您只包含父页面的名称而不包含扩展名（因此“admin”而不是“admin.php”）

# python - 将两列合二为一

> ID：15064668
> 
> 赞同：1
> 
> 时间：2013-02-25T10:17:54.980
> 
> 标签：python

我有一个包含两列的数据文件，我想将其放入单列。

从现在开始，我使用 open("test.txt") 作为 input_data 拆分列：

```
for line in input_data:  # This keeps reading the file
    li=line.strip()
    #print repr(line) #Each line is being returned as a string
    column = line.split()
    # print column
    nb1=column[0]
    nb2=column[1] 
```

我该如何继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:20:16.223

您可以将[Python 的切片符号](https://stackoverflow.com/questions/509211/the-python-slice-notation)与`+`列上的运算符结合使用。例如，连接列表的前两个元素是通过以下方式完成的：

```
=>>> l=["a","b","c","d"]
>>> a=[l[0]+l[1]]+l[2:]
>>> a
['ab', 'c', 'd'] 
```

`a=[l[0]+l[1]]+l[2:]`将`+`前两个元素 ( `[l[0]+l[1]]`) 与其余列 ( `l[2:]`) 连接起来。

在您的代码中，它可能是：

```
columns = [column[0]+ column[1]]+ column[2:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:56:55.987

我将 nb1 和 nb2 更改为列表，并将列值附加到每个添加的 '\n' 中，以便将它们写入新行。输出文件有一个列，其中第 1 列的值位于第 2 列的值之上。这种方法在大多数情况下效果很好，但如果您要处理非常大的文件，这种方法会占用大量内存。如果这是一个问题，您可以分两遍形成输出文件，首先将第一列写入文件，然后再写入第二列。

```
nb1 = []
nb2 = []
with open('input.txt','r') as input_data:
  for line in input_data:
    column = line.strip().split()
    nb1.append(column[0]+'\n')
    if len(column) == 2:
      nb2.append(column[1]+'\n')
with open('output.txt','w') as f:
  f.writelines(nb1)
  f.writelines(nb2) 
```

如果您想要在第一个元素下的每一行中的第二个元素，您可以使用这种更简单、对内存更友好的语法。

```
with open('input.txt','r') as input_data:
  with open('output.txt','w') as f:
    for line in input_data:
      column = line.strip().split()
      f.write(column[0]+'\n')
      f.write(column[1]+'\n') 
```

# tkinter - tkinter：我的滚动条隐藏了一些字符

> ID：15064673
> 
> 赞同：0
> 
> 时间：2013-02-25T10:18:15.473
> 
> 标签：tkinter, scrollbar

我的程序中有一个主窗口作为文本小部件，右侧有一个垂直滚动条，沿其所有高度 - 使用通常的代码：

```
yscrollbar=Scrollbar(mytext, orient=VERTICAL, command=mytext.yview)
mytext["yscrollcommand"]=yscrollbar.set 
```

令人讨厌的是，当我插入/输入文本时，行返回之前的最后 1-2 个字符被滚动条隐藏。

有一些简单的方法可以告诉文本小部件在点击滚动条之前返回该行吗？

PS主窗口是用户可调整大小的，所以我正在寻找一些通用解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:14:59.493

根据您对问题的回答，问题在于您将滚动条*放在*文本小部件内，而不是放在它*旁边*。解决方案是为文本小部件和滚动条提供相同的父级。

如果您希望滚动条的视觉效果位于文本小部件中，请创建一个框架并为其设置边框宽度 1 和“凹陷”的浮雕。然后，给你的文本小部件的边框宽度为零。将文本小部件和滚动条都放在此框架中，滚动条将具有位于文本小部件内部的外观。

# android - 添加数据时刷新 ExpandableListView：保持状态

> ID：15064676
> 
> 赞同：4
> 
> 时间：2013-02-25T10:18:28.937
> 
> 标签：android, expandablelistview

我`ExpandableListView`使用自定义适配器填充了`BaseExpandableListAdapter`. 我可以在新活动中添加新数据，然后我必须刷新列表。刷新列表时，我想保持相同的组展开。

可以在列表中的任何位置添加新条目。我们可以添加新的组或只是新的孩子。

现在我正在使用：

```
adapter.notifyDataSetChanged(); 
```

列表刷新，但状态不一样。例如，如果我有三个组：G1 已扩展，G2 未扩展，G3 已扩展，并且我在 G2 和 G3 之间添加了一个新组 G4，那么 G4 将获得 G3 状态，因为它占据了它的位置。有没有办法自动保持状态，或者我必须在我的适配器中手动完成？

谢谢！

[编辑]

添加一些代码。

这是我的适配器：

```
public class StopsInnerExpandableListAdapter extends BaseExpandableListAdapter {

private ArrayList<String> groups; // Dates.
private ArrayList<ArrayList<HashMap<String, String>>> children; // HashMap has stop ID, image and price.
private Context context;

public StopsInnerExpandableListAdapter (Context ctx, ArrayList<String> groups, 
        ArrayList<ArrayList<HashMap<String, String>>> children) {
    context = ctx;
    this.groups = groups;
    this.children = children;
}

@Override
public boolean areAllItemsEnabled() {
    return true;
}

public HashMap<String, String> getChild(int groupPosition, int childPosition) {
    return children.get(groupPosition).get(childPosition);
}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    if (convertView == null) {
        // Inflate child's view.
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.stop_row, null);
    }

    // Get the stop data and use it to fill the child's views.
    HashMap<String, String> child = children.get(groupPosition).get(childPosition);

    ...

    return convertView;
}

public int getChildrenCount(int groupPosition) {
    return children.get(groupPosition).size();
}

public String getGroup(int groupPosition) {
    return groups.get(groupPosition);
}

public int getGroupCount() {
    return groups.size();
}

public long getGroupId(int groupPosition) {
    return groupPosition;
}

public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) { 
    if (convertView == null) {
        // Inflate group's view.
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.stop_subgroup, null);
    }

    String date = groups.get(groupPosition);

    TextView dateView = (TextView) convertView.findViewById(R.id.title_date);
    dateView.setText(date);

    return convertView;
}

public boolean hasStableIds() {
    return true;
}

public boolean isChildSelectable(int arg0, int arg1) {
    return true;
}

public void updateData(ArrayList<String> groups,
        ArrayList<ArrayList<HashMap<String, String>>> children) {
    this.groups = groups;
    this.children = children;
}
} 
```

在我的活动中，我这样做：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stop_list);

    mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);

    model = new MyModel(this);
}

@Override
protected void onResume() {
    super.onResume();

    ListEntries entries = model.getEntries();

    if(adapter == null){
        // Sets the adapter that provides data to the list.
        adapter = new StopsInnerExpandableListAdapter(this, entries.getDates(), entries.getChilds());
        mExpandableList.setAdapter(adapter);
    }
    else{
        adapter.updateData(entries.getDates(), entries.getChilds());
        adapter.notifyDataSetChanged();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-14T01:28:32.117

`ExpandableListView`没有正确重新扩展，因为您没有使用稳定的 ID 。使用稳定的 ID 将为您解决问题。

虽然您确实通过此处启用了稳定 ID：

```
public boolean hasStableIds() {
    return true;
} 
```

您仍然需要使用`getGroupId()`and`getChildId()`方法实际返回稳定的 ID。分别返回`groupPosition`和`childPosition`不符合稳定 ID 的条件。

成为一个稳定的 ID 意味着返回的值在整个数据集中是唯一的。此外，无论给定项目的位置如何，返回的值都是相同的。例如，假设您正在存储人员。每个人都有一个唯一的 SSN。这将是一个很好的稳定 ID 以返回`getChildId()`。例如，如果 John Smith 位于位置 2、4（组、孩子），然后后来被移动到位置 (3, 1)……他的稳定 ID（或 SSN）仍然是相同的。仅返回位置编号不能保证这一点。

# jquery - 无法在 phonegap 2.4 上为 IOS 4.3 构建 ipa

> ID：15064678
> 
> 赞同：0
> 
> 时间：2013-02-25T10:18:36.560
> 
> 标签：jquery, html, cordova

我正在使用 HTML5、javascript、jQuery 和 Phone gap 2.4 制作一个混合应用程序。该应用程序**适用于 iPhone 5 中的 iOS 6，**但我**无法为 iPhone 4S 的 IOS 4.3 构建 ipa**。我已将部署目标更改为 4.3，但仍然无法正常工作。谁能指导我更改为 IOS 4.3 构建 ipa 的设置的步骤。我是 Phonegap 2.4 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:06:26.470

随着 PhoneGap 2.4.0 的发布，PhoneGap 停止了对 iOS4.x 的支持。查看发行说明：[http ://shazronatadobe.wordpress.com/2013/02/08/whats-new-in-cordova-ios-2-4-0/](http://shazronatadobe.wordpress.com/2013/02/08/whats-new-in-cordova-ios-2-4-0/)

如果需要支持iOs4.x，请使用之前版本的PhoneGap。

# linux - ldd 是否还显示依赖项的依赖项？

> ID：15064685
> 
> 赞同：24
> 
> 时间：2013-02-25T10:18:56.393
> 
> 标签：linux, shared-libraries, ldd

我有一个二进制文件，其中 ldd 显示了意外的依赖项和 libicuuc（来自“icu”）。

```
#ldd A
[...]
libxml2.so.2 => /usr/lib64/libxml2.so.2 (0x00007faaf9722000)
libicuuc.so.49 => /usr/lib64/libicuuc.so.49 (0x00007faaf5689000) 
```

由于在这个系统上，libxml 动态依赖于 libicuuc，所以 ldd 最终找到它是有道理的，但是否期望 libicuuc 也出现在 A 的 ldd 输出中？是否有一些命令仅检索作为依赖项的依赖项链接的库？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-25T10:25:11.407

`ldd`显示启动应用程序或加载共享库时需要加载的所有库。

`readelf -d`仅显示二进制文件的直接依赖关系。

```
$ readelf -d /opt/google/chrome/chrome | grep NEEDED
 0x0000000000000001 (NEEDED)             Shared library: [libX11.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libXrandr.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libXrender.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libXss.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libXext.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libgobject-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libgthread-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libglib-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libgtk-x11-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libgdk-x11-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libatk-1.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libgdk_pixbuf-2.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libpangocairo-1.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libcairo.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libpango-1.0.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libfreetype.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libfontconfig.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libnss3.so]
 0x0000000000000001 (NEEDED)             Shared library: [libnssutil3.so]
 0x0000000000000001 (NEEDED)             Shared library: [libsmime3.so]
 0x0000000000000001 (NEEDED)             Shared library: [libplc4.so]
 0x0000000000000001 (NEEDED)             Shared library: [libnspr4.so]
 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libgconf-2.so.4]
 0x0000000000000001 (NEEDED)             Shared library: [libdbus-1.so.3]
 0x0000000000000001 (NEEDED)             Shared library: [libXcomposite.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libasound.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libXfixes.so.3]
 0x0000000000000001 (NEEDED)             Shared library: [libcups.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libgcrypt.so.11]
 0x0000000000000001 (NEEDED)             Shared library: [libbz2.so.1.0]
 0x0000000000000001 (NEEDED)             Shared library: [libexpat.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libudev.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [ld-linux-x86-64.so.2]

$ ldd /opt/google/chrome/chrome
    linux-vdso.so.1 =>  (0x00007fff9d3ff000)
    libX11.so.6 => /lib64/libX11.so.6 (0x00007f93186dc000)
    libXrandr.so.2 => /lib64/libXrandr.so.2 (0x00007f93184d3000)
    libXrender.so.1 => /lib64/libXrender.so.1 (0x00007f93182c9000)
    libXss.so.1 => /lib64/libXss.so.1 (0x00007f93180c5000)
    libXext.so.6 => /lib64/libXext.so.6 (0x00007f9317eb2000)
    librt.so.1 => /lib64/librt.so.1 (0x00007f9317caa000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f9317aa6000)
    libgobject-2.0.so.0 => /lib64/libgobject-2.0.so.0 (0x00007f9317858000)
    libgthread-2.0.so.0 => /lib64/libgthread-2.0.so.0 (0x00007f9317656000)
    libglib-2.0.so.0 => /lib64/libglib-2.0.so.0 (0x00007f9317336000)
    libgtk-x11-2.0.so.0 => /lib64/libgtk-x11-2.0.so.0 (0x00007f9316cbf000)
    libgdk-x11-2.0.so.0 => /lib64/libgdk-x11-2.0.so.0 (0x00007f9316a00000)
    libatk-1.0.so.0 => /lib64/libatk-1.0.so.0 (0x00007f93167de000)
    libgdk_pixbuf-2.0.so.0 => /lib64/libgdk_pixbuf-2.0.so.0 (0x00007f93165bb000)
    libpangocairo-1.0.so.0 => /lib64/libpangocairo-1.0.so.0 (0x00007f93163ae000)
    libcairo.so.2 => /lib64/libcairo.so.2 (0x00007f9316103000)
    libpango-1.0.so.0 => /lib64/libpango-1.0.so.0 (0x00007f9315eb7000)
    libfreetype.so.6 => /usr/lib64/freetype-freeworld/libfreetype.so.6 (0x00007f9315c15000)
    libfontconfig.so.1 => /lib64/libfontconfig.so.1 (0x00007f93159e0000)
    libnss3.so => /lib64/libnss3.so (0x00007f93156a4000)
    libnssutil3.so => /lib64/libnssutil3.so (0x00007f9315479000)
    libsmime3.so => /lib64/libsmime3.so (0x00007f931524c000)
    libplc4.so => /lib64/libplc4.so (0x00007f9315046000)
    libnspr4.so => /lib64/libnspr4.so (0x00007f9314e09000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f9314bed000)
    libgconf-2.so.4 => /lib64/libgconf-2.so.4 (0x00007f93149bc000)
    libdbus-1.so.3 => /lib64/libdbus-1.so.3 (0x00007f9314778000)
    libXcomposite.so.1 => /lib64/libXcomposite.so.1 (0x00007f9314575000)
    libasound.so.2 => /lib64/libasound.so.2 (0x00007f9314294000)
    libXfixes.so.3 => /lib64/libXfixes.so.3 (0x00007f931408e000)
    libcups.so.2 => /lib64/libcups.so.2 (0x00007f9313e33000)
    libgcrypt.so.11 => /lib64/libgcrypt.so.11 (0x00007f9313bba000)
    libbz2.so.1.0 => not found
    libexpat.so.1 => /lib64/libexpat.so.1 (0x00007f9313991000)
    libudev.so.0 => /lib64/libudev.so.0 (0x00007f9313782000)
    libstdc++.so.6 => /lib64/libstdc++.so.6 (0x00007f931347f000)
    libm.so.6 => /lib64/libm.so.6 (0x00007f9313184000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f9312f6e000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f9312bb7000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003c7a000000)
    libxcb.so.1 => /lib64/libxcb.so.1 (0x00007f9312999000)
    libffi.so.5 => /lib64/libffi.so.5 (0x00007f9312790000)
    libgmodule-2.0.so.0 => /lib64/libgmodule-2.0.so.0 (0x00007f931258c000)
    libgio-2.0.so.0 => /lib64/libgio-2.0.so.0 (0x00007f931223f000)
    libpangoft2-1.0.so.0 => /lib64/libpangoft2-1.0.so.0 (0x00007f9312012000)
    libXinerama.so.1 => /lib64/libXinerama.so.1 (0x00007f9311e0f000)
    libXi.so.6 => /lib64/libXi.so.6 (0x00007f9311c00000)
    libXcursor.so.1 => /lib64/libXcursor.so.1 (0x00007f93119f4000)
    libXdamage.so.1 => /lib64/libXdamage.so.1 (0x00007f93117f1000)
    libpng15.so.15 => /lib64/libpng15.so.15 (0x00007f93115c7000)
    libpixman-1.so.0 => /lib64/libpixman-1.so.0 (0x00007f9311340000)
    libz.so.1 => /lib64/libz.so.1 (0x00007f9311129000)
    libplds4.so => /lib64/libplds4.so (0x00007f9310f24000)
    libdbus-glib-1.so.2 => /lib64/libdbus-glib-1.so.2 (0x00007f9310cfd000)
    libgssapi_krb5.so.2 => /lib64/libgssapi_krb5.so.2 (0x00007f9310ab8000)
    libkrb5.so.3 => /lib64/libkrb5.so.3 (0x00007f93107d3000)
    libk5crypto.so.3 => /lib64/libk5crypto.so.3 (0x00007f93105a8000)
    libcom_err.so.2 => /lib64/libcom_err.so.2 (0x00007f93103a3000)
    libgnutls.so.26 => /lib64/libgnutls.so.26 (0x00007f93100eb000)
    libgpg-error.so.0 => /lib64/libgpg-error.so.0 (0x00007f930fee7000)
    libavahi-common.so.3 => /lib64/libavahi-common.so.3 (0x00007f930fcd9000)
    libavahi-client.so.3 => /lib64/libavahi-client.so.3 (0x00007f930fac8000)
    libcrypt.so.1 => /lib64/libcrypt.so.1 (0x00007f930f891000)
    libXau.so.6 => /lib64/libXau.so.6 (0x00007f930f68c000)
    libselinux.so.1 => /lib64/libselinux.so.1 (0x00007f930f46b000)
    libresolv.so.2 => /lib64/libresolv.so.2 (0x00007f930f251000)
    libkrb5support.so.0 => /lib64/libkrb5support.so.0 (0x00007f930f046000)
    libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00007f930ee42000)
    libtasn1.so.3 => /lib64/libtasn1.so.3 (0x00007f930ec31000)
    libp11-kit.so.0 => /lib64/libp11-kit.so.0 (0x00007f930ea1e000)
    libfreebl3.so => /lib64/libfreebl3.so (0x00007f930e7b3000) 
```

> 是否有一些命令仅检索作为依赖项的依赖项链接的库？

您可以设置差异`ldd`和`readelf -d`输出。

# java - 在java中将Image转换为二进制数组和二进制数组转换为图像

> ID：15064694
> 
> 赞同：0
> 
> 时间：2013-02-25T10:19:19.070
> 
> 标签：java, android

AOA。亲爱的，我需要可以将图像转换为二进制以存储在数据库中并使用 java 将此二进制转换为图像的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:24:20.597

使用 Base64 类将其转换为字符串，然后存储在数据库中。您可以在需要时将其转换回图像。

[http://developer.android.com/reference/android/util/Base64.html](http://developer.android.com/reference/android/util/Base64.html)

# ios - 无法从 iOS 连接到 signalR 服务器

> ID：15064698
> 
> 赞同：1
> 
> 时间：2013-02-25T10:19:32.510
> 
> 标签：ios, signalr, livechat

我正在开发聊天应用程序，我需要连接到使用 signalR 框架进行实时通信的 win 服务器，我最后也在使用相同的。当我运行该应用程序时，它会引发错误“不兼容的协议版本”。我确实调试了代码，发现服务器代码是 1.1 而我的是 1.0，因此应用程序正在终止并且没有连接到服务器。我从 cococpods 获得了 iOS 的这个更新的 signalR 代码。我不知道如何获得 1.1 代码。

有人能告诉我如何获得这个更新的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:00:39.283

看[不兼容的协议版本是否有任何影响？](https://stackoverflow.com/questions/15072430/does-an-incompatible-protocol-version-have-any-impact).

我假设您正在为 SignalR 使用第三方客户端。您需要将服务器降级到兼容的协议版本或等待更新的第三方客户端。您可以使用 Nuget 下拉特定版本的 SignalR。

# forms - 有太多年可供选择

> ID：15064703
> 
> 赞同：5
> 
> 时间：2013-02-25T10:19:55.603
> 
> 标签：forms, date, ruby-on-rails-3.2

从 Rails 3.0x 升级到 3.2.11 后，出现以下错误：

```
There're too many years options to be built. Are you sure you haven't mistyped something? You can provide the :max_years_allowed parameter 
```

代码：

```
<%= f.date_select :to,
    :start_year => Time.now.year - 80,
    :discard_day => true,
    :include_blank => true %> 
```

我也尝试包含一个 :max_years_allowed 参数但没有成功，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T02:59:36.777

根据rails docs，如果未传入选项，则`select_year`方法`date_select`设置`max_years_allowed`为1000。然后它会查看结束年份减去起始年份的绝对值是否大于`max_years_allowed`选项。您是否打开过 Rails 控制台并检查`Time.now.year - 80`了 1000 多年前的情况？我知道这听起来很疯狂，但这是我能看到您收到该错误的唯一原因。

这是[链接](http://apidock.com/rails/ActionView/Helpers/DateTimeSelector/select_year)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T09:19:56.363

你为什么不试试这样，它的工作原理。

```
<%= f.date_select :to,
    :start_year => 80.years.ago.year,
    :discard_day => true,
    :include_blank => true %> 
```

# c++ - 如何在 QwtPlot3D 中显示图例？

> ID：15064706
> 
> 赞同：1
> 
> 时间：2013-02-25T10:20:16.110
> 
> 标签：c++, qt, opengl, legend

我现在正在使用 QwtPlot3D，我需要展示一个图例，例如：

![在此处输入图像描述](../Images/b045943ef3f552bcea10103a861b24b7.png)

但我不知道如何，我在互联网上找不到合适的教程或示例。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:54:31.247

[http://qwtplot3d.sourceforge.net/web/doxygen/classQwt3D_1_1Plot3D-members.html](http://qwtplot3d.sourceforge.net/web/doxygen/classQwt3D_1_1Plot3D-members.html)

在 Plot3D 的所有成员列表中，它列出：

`void showColorLegend (bool show)`

它不起作用，您可能需要创建一个实例`ColorLegend`并确保它具有您希望它显示的元素。

[http://qwtplot3d.sourceforge.net/web/doxygen/classQwt3D_1_1ColorLegend.html](http://qwtplot3d.sourceforge.net/web/doxygen/classQwt3D_1_1ColorLegend.html)

希望有帮助。

# c++ - KDevelop 与 CMake 项目 - 如何管理调试和发布版本？

> ID：15064715
> 
> 赞同：9
> 
> 时间：2013-02-25T10:20:45.250
> 
> 标签：c++, cmake, kdevelop, kdevelop4

KDevelop 是否支持在 CMake 项目的调试和发布版本之间切换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T20:45:33.487

当然，单击**打开配置**，然后单击窗口顶部的**+ 。**这将允许您添加另一个构建目录，并且您将能够在它们之间切换。

![在此处输入图像描述](../Images/bebeb0f08b24b90df53f75f6c25265ee.png)

# node.js - node.js：代理 websockets 到其他端口

> ID：15064719
> 
> 赞同：6
> 
> 时间：2013-02-25T10:20:56.020
> 
> 标签：node.js, websocket, socket.io

我在 node.js 中编写了 http 代理，在端口 80 上运行。我需要的只是将 socket.io 流量重定向到端口 9090，并将标准 http 流量重定向到 8080 上的 Apache。这是我的代理代码：

```
httpProxy = require('http-proxy');

httpProxy.createServer(function (req, res, proxy) {
    if (req.url.match(/socket.io/)) {
        proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 9090
        });
    } else {
        proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 8080
        });
    }
}).listen(80); 
```

一切正常，但 io.socket 回退到 xhr-polling。

```
http://localhost/client.htm    - falls back to xhr-polling

file:///C:/.../client9090.htm  - still uses websocket 
```

socket.io 应用在 9090 端口上运行，client.htm 连接到 80，client9090.htm 直接连接到 9090。

看起来 node-http-proxy 使 socket.io 应用程序在 xhr-polling 模式下工作。客户端是 Chrome v.25

socket.io 应用程序代码

```
var io = require('socket.io').listen(9090);

io.on('connection', function (socket) {

        socket.on('hi!', function (data) {
            console.log(data);
            socket.emit('news');
        });

        socket.on('ahoj', function (data) {
            console.log(data);
        });
    }); 
```

客户端.htm 代码

```
<script src="http://localhost/socket.io/socket.io.js"></script>
<script>
    var chat = io.connect('http://localhost')

    chat.on('connect', function () {
        chat.emit('hi!');
    });

    chat.on('news', function () {
        chat.emit('ahoj',{a:1,b:2});
    });
</script> 
```

client9090.htm 相同，但 localhost 替换为 localhost:9090

正如我所说，一切都很好，唯一的问题是，node-http-proxy 会从 websockets 退回到 xhr-polling。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:56:09.307

根据[https://npmjs.org/package/http-proxy](https://npmjs.org/package/http-proxy)，在向 httpProxy.createServer() 添加回调时，您必须手动代理“升级”事件，因此如下所示：

```
httpProxy = require('http-proxy');

// added `var server =` here
var server = httpProxy.createServer(function (req, res, proxy) {
    if (req.url.match(/socket.io/)) {
        proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 9090
        });
    } else {
        proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 8080
        });
    }
}).listen(80);

// added upgrade listener section here:
server.on('upgrade', function (req, socket, head) {
    server.proxy.proxyWebSocketRequest(req, socket, head);
}); 
```

但是，对于您上面描述的用法，您甚至不需要回调函数 - 您可以轻松地执行以下操作：

```
httpProxy = require('http-proxy');

var options = {
  pathnameOnly: true,
  router: {
    '/wiki': '127.0.0.1:8001',
    '/blog': '127.0.0.1:8002',
    '/api':  '127.0.0.1:8003'
  }
}

var proxyServer = httpProxy.createServer(options);
proxyServer.listen(80); 
```

# c# - 访问表单设计器时出现 Visual Studio 2008 错误

> ID：15064723
> 
> 赞同：2
> 
> 时间：2013-02-25T10:21:09.107
> 
> 标签：c#, winforms, designer

为了防止在加载设计器之前可能丢失数据，必须解决以下错误：

错误列表（名称并不重要）：

变量“TextEditor”要么未声明，要么从未赋值。…………

然后它去：

此错误的实例 (1)

1.  隐藏调用堆栈

在 System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.EnsureDocument(IDesignerSerializationManager manager) 在 System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager) 在 Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)在 System.ComponentModel.Design.Serialization.BasicDesignerLoader.BeginLoad（IDesignerLoaderHost 主机）

它构建但无法访问表单（如果我按下忽略，则会打开空表单）......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:16:06.933

我记不太清了，但是有一个属性，例如 [Designmode(false)] 或类似的东西。此属性忽略设计模式中的属性。因此，当您打开设计模式时，设计师不会访问此属性。如果您的自定义类有问题，并且如果您可以编辑类，则可以将此属性添加到发生此错误的属性中。或者，您可以尝试以下操作。

1.  关闭所有打开的文档 (ALT+(W->L) ) 或从顶部菜单。然后构建并打开您的表单。

2.  关闭 Visual Studio 中的所有文档，如果可以的话，清除您的项目 obj 和 bin 文件夹，然后重建您的项目或清理解决方案。

3.  关闭 Visual Studio 清除 bin 和 obj 文件夹中的所有文档，重新启动您的 Visual Studio 并重建您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T17:59:35.863

（对于VS2008 windows Project）在VS 2008中打开你的项目，首先关闭VS项目项目中的所有选项卡，首先构建项目，然后在清理项目之后，再次构建项目。双击 Form.cs。

# mercurial - 从 cvs 转换为 mercurial 时功能分支中的修订错误

> ID：15064726
> 
> 赞同：0
> 
> 时间：2013-02-25T10:21:25.057
> 
> 标签：mercurial, cvs

我们正在将具有两个分支（一个是 MAIN，另一个是 FEATURE，其余的都可以忽略）的 cvs 存储库转换为一个 mercurial 存储库。

我们正在使用带有以下命令的内置工具转换。

**hg 转换 cvs_source_dir hg_new**

其中 cvs_source_dir = 更新的目录，只有 CVS 的功能分支更改。hg_new= mercurial 存储库的新名称。

转换后，hg_new 存储库包含来自 CVS 的所有历史数据。当我们进行 hg 更新时，它指向 MAIN 分支代码。

如果我们根据 CVS 将其更新为 FEATURE 以从 FEAUTURE 分支获取代码，则使用

**hg update FEAUTURE**，所有在 FEAUTURE 分支中没有修订的文件都将被删除。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:27:05.310

如果我理解正确，分支 FEATURE 没有某些文件存在于分支 MAIN 中，因此当您`hg up`分支 FEATURE 时，这些文件丢失了。

我认为这是一项功能，可`hg up`在您提交时将您的工作目录带入状态（`-c`将检查未提交的更改），因此分支 FEATURE 中不存在的文件将消失。

这篇[文章](https://stackoverflow.com/questions/5066662/how-to-checkout-a-file-from-one-branch-to-another-in-mercurial)展示了一种从另一个分支获取所需文件的方法。如果您有一个文件列表，请迭代该列表并将每个文件都放到您当前的工作目录中。

[更新] 显示如何正确处理的图表：

(1) 您目前的状态

```
A -- B -- C -- D (MAIN)
  \
   - E -- F -- G (FEATURE, missing files) 
```

(2)步骤1：

```
A -- B -- C -- D (MAIN)
  \
   - E -- F -- G (FEATURE, missing files)
    \
     -H (FEATURE, a head adding all missing files from A) 
```

(3)步骤2：

```
A -- B -- C -- D (MAIN)
  \
   - H - (rebase) - E' -- F' -- G' (FEATURE, missing files) 
```

# iphone - iPad 版本 1.0，而同一应用程序的 iTunes 版本 1.1

> ID：15064729
> 
> 赞同：0
> 
> 时间：2013-02-25T10:21:26.947
> 
> 标签：iphone, ipad, app-store-connect, itunes-store

我陷入了一个非常奇怪的境地。我为 iPad 和 iPhone 制作了 2 个不同的同名应用，iPhone 版本目前在 app-Store 上。现在我必须为 iPad 上传应用程序，但问题是 iphone 版本已更新到 1.1。我可以第一次上传 1.1 版的新应用程序吗？版本是这里的主要关注点，因为我的网络服务使用版本来控制数据输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:24:03.573

是的，您可以上传版本号为 1.1 的新应用程序。但是在下一次更新期间，您必须为应用程序提供更高的版本号。

# dom - 使用 selenium 在 DOM 层次结构中向上移动

> ID：15064730
> 
> 赞同：0
> 
> 时间：2013-02-25T10:21:27.713
> 
> 标签：dom, selenium, webdriver

我想访问层次结构中的 DOM 元素到我可以访问的元素。

在附加的屏幕截图中，我想访问 #ntsDiv_1 的 Grand Grand Grand Parent 的 #pRow_22。但我只能访问#ntsDiv_1。请建议我在这种情况下该怎么做

![在此处输入图像描述](../Images/e18649e9be9b52c024f5c66b120bb105.png)

html代码是这样的：-

```
<tr id="pRow_22" style="border-bottom: 0;">
<td class="nameCell" style="border-bottom: 1px solid #CCCCCC;">
    <div id="seller_22" class="product-sellercell">
        <a id="pLogoLink_22" target="_blank" href="/norob/ClickTracker.somethins..." onclick="setMerchLb('eComElectronics.com')" rel="nofollow">
        <div>
            <a id="ntsLink_1" rel="nofollow" onclick="return false;" href="#">
        </div>
        <div id="ntsDiv_1" class="mlt-pop-container" style="width: 250px; text-align: left; white-space: normal; top: 2340px; left: 131px; visibility: hidden;">
            <div class="mlt-pop-bg">
        </div>
        .
        .   
        </div>
</td> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:56:26.120

尝试使用 xpath

```
.//a[contains(@id,'ntsLink_1')]/ancestor::tr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-24T09:19:36.810

**试试这个**：

# ***By.cssSelector("a[id='ntsdiv_1']")***

假设这是层次结构：

```
<div class="1">............  (suppose it's div 1 open)
  <div class="2">........    (div 2 open)
     <div class="3">.......  (div 3 open)
     </div>.....             (div 3 closed)  
     <div class="4">......   (div 4 open)  
     </div>.....             (div 4 closed)
   </div>.........           (div 2 closed)
</div>.........              (div 1 closed) 
```

现在，我们要访问 div 4

**注意**：div 3 和 div 4 是同一级别的，这两个是 div 2 的子级，其父级是 div 1

我们想访问 4 级

我们使用 xpath 进行操作，但 div 4 的类不是唯一的，而类 1 是唯一的，因此您可以这样遍历它：

By.xpath(".//div[@class='1']/div/div[2]")

*解释*： div[2] 表示它将访问具有类 3 的 div 的类 1，其子类具有类 3 和类 4 的两个 div 但我想访问具有类 4 的第二个 div 所以，div [ 2]。

***选择器***

有时我们无法访问路径，所以我们可以使用 css 选择器访问它，假设我们有这样的场景

```
<div class="1">
    <rect class="2">
         <text class="3">
         </text>
    </rect>
</div> 
```

访问文本类

我们使用 By.cssSelector 作为：

By.cssSelector("text[class='3']");

# javascript - 如果出现错误或错误代码，则重新发送 ajax 请求

> ID：15064733
> 
> 赞同：1
> 
> 时间：2013-02-25T10:21:37.087
> 
> 标签：javascript, ruby

我是一个发送 ajax 请求的 javascript 函数。请注意，即使“一切似乎都正常”，服务器也可能返回错误，这意味着成功的处理程序中可能存在错误信息：

```
function sendAjaxRequest(){
    $.ajax({
        type: "GET",
        url: "/123",
        success: function(data){
          //there might and might not an error in data
          if(data.error_exists){
              retryIfError(data);
          } else{
            //everything is ok for sure
          }
        },
        error: function(xhr, textStatus, errorThrown){
          //there is the error for sure
          retryIfError(xhr);
        }
    });
}

 function retryIfError(data){
   var error = data.error_list # the array of error messages
   // ... what should I do further?
  } 
```

原因是`success: function(data)`可能有错误是服务器使用`begin ... rescue`运算符来抑制它们。**这是正确的方法吗？**

第二个问题：

所以目标是发送`sendAjaxRequest()`直到没有错误为止。**我怎么做？** 当然，我也想限制发送`sendAjaxRequest()`请求的数量，但我认为这将是微不足道的，我会自己处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:28:54.710

再次调用该函数呢？您也可以添加一个计数器。

```
error: function(xhr, textStatus, errorThrown){
            if(i<3)
            sendAjaxRequest(i++);
        } 
```

并使用。

```
var i=0; 
```

# powershell - PowerGUI 脚本编辑器设置

> ID：15064736
> 
> 赞同：0
> 
> 时间：2013-02-25T10:21:56.900
> 
> 标签：powershell, powergui

我正在使用

> PowerGUI 脚本编辑器

我正在从 powershell 调用 xml 文件，powershell GUI 脚本编辑器将继续从登录用户的我的文档文件夹中引用 xml 文件，而不是从文件夹结构中指定的位置。

PowerGUI 脚本编辑器中是否有可以更改的**设置。**

# c# - 谁能解释实体框架中的延迟加载？

> ID：15064739
> 
> 赞同：0
> 
> 时间：2013-02-25T10:22:01.063
> 
> 标签：c#, entity-framework

我想通过一个简单的例子来简单解释一下实体框架中的延迟加载。

*   为什么我们使用延迟加载？
*   我们什么时候使用延迟加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:24:25.320

延迟加载意味着延迟加载相关数据，直到您特别请求它。

从这里举个例子..

[延迟加载](http://entityframeworktutorial.net/lazyloading-in-entity-framework.aspx#.USs64KVBNiM)

# c# - 依赖注入：我应该在哪里注入？谁应该控制它？

> ID：15064741
> 
> 赞同：1
> 
> 时间：2013-02-25T10:22:01.150
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container

免责声明：没有编译器编写的代码，您应该丢弃任何语法错误。:)

我想知道我在做什么是“正确的”。

目前，我有一个带有静态方法的 Manager 类。这些方法每个都调用我的 Repository 类上的一个方法（例如，Manager.Get 将调用 Repository.Get，等等）。

*存储库实现将被注入！*

Manager 有一个静态字段，该字段将单例实例引用到自身，以及对存储库实例的引用。

```
static Manager _me = new Manager();

[Dependency]
public IRepository Repo; 
```

**注意：这是我目前进行解析的方式！我需要对此的反馈！**

在管理器中，我解决了依赖关系

```
public Manager()
{
    // Feedback would be nice on this as well!
    // I have a singleton reference to the container,
    // being set from the startup project.
    Repo = Singleton.UnityContainer.Resolve<IRepository>();
} 
```

Manager 的方法如下所示：

```
public static MyObject Get(int id)
{
    return _me.Repo.Get(id);
} 
```

在我的主程序（例如控制台应用程序）中，我将注册我的实现。

```
static void Main(string[] args)
{
    var container = Singleton.UnityContainer = new UnityContainer();
    // The implementation to inject, could change over time
    // to a MSSQL or MySQL, who knows? Hence the DI!
    var myXmlRepo = new XmlRepository("C:\My.xml");
    // Register the instance
    container.RegisterInstance(myXmlRepo);
    container.RegisterInstance<IRepository>(myXmlRepo, new ContainerControlledLifetimeManager()); // Why do I need to register TWICE?
} 
```

So, to summarize my question:

1.  Is it a bad idea to use a singleton reference (not only to a container, but at all?) in the way shown above?
2.  Am I doing the resolving right? Or should I have used BuildUp somewhere? Should I have called Resolve from the startup projects code?

Thank you for your time!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:47:07.933

Dependencies should be resolved in cascade down from the top layer classes, not using static or singleton container in constructors.

Check this [link](http://www.devtrends.co.uk/blog/how-not-to-do-dependency-injection-the-static-or-singleton-container).

If your app does not provide any hook into the pipeline to resolve the dependencies (as `Unity.Mvc3` does with controllers) the best aproach is resolve the `Manager` (your top layer class) class through Unity (you must register it first) and let the DI container inject `IRepository`. This alows you to keep the static/singleton container in one place and keep things under control. No other layer in your app should know anything about DI container.

An example of resolving complete dependency graph could be the next piece of code:

```
Public Class ClasificationManagement //application layer service, top layer class
    Implements IClasificationManagement

    Private _servicio As IClasificacionesService //inject domain serice for bussines
    Private _repositorio As IClasificationRepository //inject repository for perisitence

    Public Sub New(ByVal servicio As IClasificacionesService, ByVal repositorio As IClasificationRepository)
        _servicio = servicio
        _repositorio = repositorio
    End Sub

    Public sub SwapDescrition(ByVal clasificationOrigenID As String, ByVal clasificationDestinoID As String) Implements IClasificationManagement. SwapDescrition

        //code using domain services and repositories

    End sub

Public class ClasificacionesService
    implements IClasificacionesService

  private _tracer as ITracer //inject tracer to service domain

  public sub new(tracer as ITracer)
    _tracer =  tracer
  end sub

  //not relevant code using ITracer

End Class 
```

With the prorper configuration of Unity in XML or runtime I just need to resolve ClasificationManagement and Unity do the dirty work of resolving all dependecy chain.

```
//resolve manager
    manager = ServiceLocator.Current.GetInstance(Of IClasificationManager)()
//use manager, all dependencies (bussines service, repositories, tracers) were injected by Unity
    manager.SwapDescrition("123-ABC", "456-DEF") 
```

For Unity config I like xml configuration because you can change the dependencies and no compilantion is needed. Just include this function somewhere in the initialization logic of your app.

```
Imports Microsoft.Practices.Unity
Imports Microsoft.Practices.Unity.Configuration
Imports Microsoft.Practices.ServiceLocation
    Private Sub InitServiceLocator()
        Dim container As IUnityContainer = New UnityContainer()
        container.LoadConfiguration() //read xml config
         //container.RegisterType<Of ...>(...) //config in runtime
        Dim provider = New UnityServiceLocator(container)
        ServiceLocator.SetLocatorProvider(Function() provider)
    End Sub 
```

A XML config should looks like:

```
<?xml version="1.0" encoding="utf-8" ?>
<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">

    <alias alias="IClasificationManagement" type="AppPrincipal.IClasificationManagement, AppPrincipal" />
    <alias alias="IClasificationRepository" type="X509ValDAL.IClasificationRepository, X509ValDAL" />
    <alias alias="IClasificacionesService" type="Entidades.IClasificacionesService, Entidades" />
    <alias alias="IUnitOfWork" type="X509ValDAL.IUnitOfWork, X509ValDAL" />
    <alias alias="ObjectContext" type="System.Data.Objects.ObjectContext, System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <alias alias="ClasificationManagement" type="AppPrincipal.ClasificationManagement, AppPrincipal" />
    <alias alias="ClasificationRepository" type="X509ValDAL.ClasificationRepository, X509ValDAL" />
    <alias alias="ClasificacionesService" type="Entidades.ClasificacionesService, Entidades" />
    <alias alias="UnitOfWork" type="X509ValDAL.UnitOfWork, X509ValDAL" />
    <alias alias="X509VALEntities" type="Entidades.X509VALEntities, Entidades" />

    <assembly name="AppPrincipal" />
    <assembly name="X509ValDAL" />
    <assembly name="Entidades" />
    <assembly name="System.Data.Entity" />

    <namespace name="AppPrincipal" />
    <namespace name="X509ValDAL" />
    <namespace name="Entidades" />
    <namespace name="System.Data.Objects" />
    <container>

        <register type="IClasificationManagement" mapTo="ClasificationManagement">
            <constructor>
                <param name="servicio">
                    <dependency/>
                </param>
                <param name="repositorio">
                    <dependency/>
                </param>
            </constructor>
        </register>
    <register type="IClasificationRepository" mapTo="ClasificationRepository">
            <constructor>
                <param name="uow">
                    <dependency/>
                </param>
            </constructor>
        </register>

        <register type="IClasificacionesService" mapTo="ClasificacionesService" />
                 TODO: Inject ITracer

        <register type="ObjectContext" mapTo="X509VALEntities" />

        <register type="IUnitOfWork" mapTo="UnitOfWork" >
            <constructor>
                <param name="context">
                    <dependency />
                </param>
            </constructor>
        </register>     

    </container>
</unity> 
```

I hope this example hepls you to understand the phylosophy of DI. Even when I use a static container (ServiceLocator); the container is used just to load top level layer classes to avoid servicelocator antipattern.

# c++ - 在 OpenAL 库中播放流

> ID：15064742
> 
> 赞同：0
> 
> 时间：2013-02-25T10:22:08.607
> 
> 标签：c++, openal

我需要在 OpenAL 中播放流。但我不明白我需要用缓冲区和源做什么。我的伪代码：

```
 FirstTime = true;

        while (true)
        {
        if (!FirstTime)
                {
                    alSourceUnqueueBuffers(alSource, 1, &unbuf);
                }
        //get buffer to play in boost::array buf (882 elements) (MONO16).
                if (NumberOfSampleSet >=3)
                {
                    alBufferData(alSampleSet[NumberOfSampleSet], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
                    alSourceQueueBuffers(alSource, 1, &alSampleSet[NumberOfSampleSet++]);
                    if (NumberOfSampleSet == 4)
                    {
                        FirstTime = false;
                        NumberOfSampleSet = 0;
                    }
                }
alSourcePlay(alSource);
    } 
```

我究竟做错了什么？在扬声器中，我听到重复的点击声。请告诉我我需要用缓冲区做什么来播放我的声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:12:23.643

4 个缓冲区（每个 882 个样本）和 44kHz 源仅提供 (4 * 882/ (2 * 44100) ) = 0.04 秒的播放时间 - 这只是一个“点击”。

要产生更长的声音，您应该加载更多数据（尽管通常只有两个缓冲区就足够了）。

想象一下，您有一个 100Mb 的未压缩 .wav 文件。只需读取 22050 个样本（即 44100 字节的数据）并将它们排入与 Source 关联的 OpenAL 队列。然后将另外 22050 个样本读入第二个缓冲区并将它们也加入队列。然后只需切换缓冲区（就像您现在在 NumberOfSampleSet == 4 处所做的那样）并重复直到文件未完成。

如果你想要一个例如 440Hz 的纯正弦波，那么使用相同的 22050-sample 缓冲区只需用正弦波的值填充它们：

```
const int BufferSize = 22050;
const int NumSamples = 44100;
// phase offset to avoid "clicks" between buffers
int LastOffset = 0;
const float Omega = 440.0f;
for(int i = 0 ; i < BufferSize ; i++)
{
    float t = ( 2.0f * PI * Omega * ( i + LastOffset ) ) / static_cast<float>( NumSamples );

    short VV = (short)(volume * sin(t));;

    // 16-bit sample: 2 bytes
    buffers[CurrentBuffer][i * 2 + 0] = VV & 0xFF;
    buffers[CurrentBuffer][i * 2 + 1] = VV >> 8;
}
LastOffset += BufferSize / 2;
LastOffset %= FSignalFreq; 
```

编辑1：

要实时处理某些事情（不幸的是，延迟很严重），您必须创建缓冲区，推送一些初始数据，然后检查 OpenAL 需要多少数据：

```
int StreamBuffer( ALuint BufferID )
{
    // get sound to the buffer somehow - load from file, read from input channel (queue), generate etc.

    // do the custom sound processing here in buffers[CurrentBuffer]

    // submit more data to OpenAL
    alBufferData( BufferID, Format, buffers[CurrentBuffer].data(), buffers[CurrentBuffer].size(), SamplesPerSec );
}

int main()
{
    ....

    ALuint FBufferID[2];

    alGenBuffers( 2, &FBufferID[0] );

    StreamBuffer( FBufferID[0], BUFFER_SIZE );
    StreamBuffer( FBufferID[1], BUFFER_SIZE );

    alSourceQueueBuffers( FSourceID, 2, &FBufferID[0] );

    while(true)
    {
        // Check how much data is processed in OpenAL's internal queue
        ALint Processed;
        alGetSourcei( FSourceID, AL_BUFFERS_PROCESSED, &Processed );

        // add more buffers while we need them
        while ( Processed-- )
        {
            Luint BufID;

            alSourceUnqueueBuffers( SourceID, 1, &BufID );

            StreamBuffer(BufID);

            alSourceQueueBuffers( SourceID, 1, &BufID );
        }
    }

    ....
} 
```

# machine-learning - 将单词的位置信息包含在特征向量中的好方法是什么？

> ID：15064748
> 
> 赞同：1
> 
> 时间：2013-02-25T10:22:42.360
> 
> 标签：machine-learning, nlp, feature-extraction

我认为词袋对我的任务来说太简单了。我想要一些在特征向量中包含单词的位置信息。例如“好”是倒数第二个，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:16:24.587

在大多数情况下，我们使用单词的二元组或三元组作为特征：它携带句子中的大部分词序信息，同时比每个单词的位置信息稀疏得多。

例如对于句子`the cat ate the mouse`，trigrams 的特征是：

`<b> <b> the, <b> the cat, the cat ate, cat ate the, ate the mouse, etc.`

您也可以保留现有的 BOW 功能。

此外，如果您使用判别模型，您可以添加任何似乎与您的任务相关的特征，即使该特征不独立于您现有的特征。

显然，目标始终是在信息和稀疏性之间找到适当的平衡……这取决于您的数据集，您必须进行实验！

# javascript - 无法找到地址的纬度/经度

> ID：15064750
> 
> 赞同：0
> 
> 时间：2013-02-25T10:22:54.560
> 
> 标签：javascript, geolocation, geocode, google-geocoder

我有一个 javascript 代码，并且想查找用户输入的地址的纬度/经度。

我正在使用以下 javascript 代码：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var address = document.getElementById("address").value;
var geocoder = new google.maps.Geocoder();

geocoder.geocode( { 'address': address}, function(results, status) {
  var location = results[0].geometry.location;
  alert(location.lat() + '' + location.lng());
});
</script> 
```

但是上面的代码不起作用。任何人都可以建议可能是什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:44:32.580

单独运行该代码可以正常工作。可能值得检查您的地址值是否被正确提取，并且页面上没有其他 javascript 错误。

# sql - 通过数据库邮件发送文件

> ID：15064751
> 
> 赞同：1
> 
> 时间：2013-02-25T10:23:09.007
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试通过数据库邮件发送文件，当我在没有@query 选项的情况下执行下面的查询时，邮件被触发，但是当我包含@query 选项时，我得到了提到的错误。

```
 if @@rowcount >0
    EXEC msdb.dbo.sp_send_dbmail     @profile_name = '     Errormail',@recipients='arunkumarb@mobiusservices.in;',
    @subject = 'A new Record created in the SSORunError Log Table' ,
    @body = 'A new Record created in the SSORunError Log Table' ,  
    @query = 'select * from ip',
    @attach_query_result_as_file = 1, 
    @query_result_width = 4000, 
    @query_attachment_filename = 'Details.txt' 
```

**错误信息 ：**

```
 Msg 22050, Level 16, State 1, Line 0
      Error formatting query, probably invalid parameters
     Msg 14661, Level 16, State 1, Procedure sp_send_dbmail, Line 504
      Query execution failed: Msg 208, Level 16, State 1, Server  , Line 1
      Invalid object name 'ip'. 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:30:02.637

尝试使用表的完全限定名称：

```
SELECT * FROM yourDatabase.yourSchemaName.ip 
```

您还可以将`@execute_query_database`调用的参数设置`sp_send_dbmail`为包含数据库的名称（尽管我认为使用完全限定名称就足够了）。

# c# - HttpWebRequest 在 Windows Phone 8 上同步

> ID：15064753
> 
> 赞同：2
> 
> 时间：2013-02-25T10:23:19.130
> 
> 标签：c#, windows-phone-8, httpwebrequest, async-await

为了设计/重用一个可用于 WPF 应用程序、Windows Phone 8 应用程序和更高版本的 Windows 8 / RT 应用程序的库，我们需要进行一些 HttpWebRequest 调用，最好是同步调用，以免破坏现有应用程序。

问题是已经存在的代码使用 ManuelResetEvent 同步执行 Web 请求。它在 WPF 和 Win 8 RT 中完美运行，但在 Windows Phone 8 中（至少在模拟器上），程序挂起如下：

[WP7 上带有 HttpWebRequest 的 ManualResetEvent](https://stackoverflow.com/questions/11508258/manualresetevent-with-httpwebrequest-on-wp7)

我尝试将调用都封装在任务或线程中，但它仍然是一样的。

因此，我将代码更改为使用 async / await，它当然非常适合 WP8 和 Win 8，但我们的桌面应用程序的目标是 .NET 4.0 框架以实现 XP 兼容性。当然，有适用于 Visual Studio 2012 的 Async Targeting Pack，但这有两个问题：

*   应使用 async / await 重写 / 仔细测试桌面应用程序代码
*   Mono 的稳定版本不支持 async / await （也许在 Windows 上使用 Async Targeting Pack 编译然后在 Mono 运行时运行它可以工作？应该测试）

所以，我尝试同步调用 async 标记的方法，只是为了看看。我使用了这里给出的 AsyncHelpers ：

[我将如何同步运行异步 Task<T> 方法？](https://stackoverflow.com/questions/5095183/how-would-i-run-an-async-taskt-method-synchronously)

它适用于 WPF 和 Win 8 应用程序，但它在 Windows Phone 8 上挂起。

有人知道如何拥有可以在任何地方使用而无需挂在 Windows Phone 上的同步代码（或具有等待/异步的同步外观代码）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:41:26.110

也许你云使用 Task 的[Result](http://msdn.microsoft.com/en-us/library/dd321468.aspx)属性。它适用于 .NET 4.0/4.5 和 Windows Phone 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T10:24:34.850

HttpWebRequest 使用 UI 线程来处理请求，不要问我为什么。

因此，如果您尝试通过锁定 UI 线程来等待结果，您将获得死锁条件，因为您锁定 UI 线程直到请求未完成，并且在 UI 线程被锁定时请求不会完成。

# bison - “expr-tokens.l”，第 52 行：无法识别的 %option：可重入

> ID：15064754
> 
> 赞同：1
> 
> 时间：2013-02-25T10:23:24.717
> 
> 标签：bison, flex-lexer

我有一个名为“expr-tokens.l”的文件或一个“lex”文件，当我尝试使用“flex expr-tokens.l”命令解析时，出现错误 [“expr-tokens.l”，第 52 行:unrecognized %option : reentrant]。

解析此文件将生成一个“.c”文件，其中包含我试图链接到我的主程序的方法的定义。我不明白这是否是 Bison 版本问题，我使用的是 Bison 2.5.4 版本或其他版本。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:30:20.157

`%option reentrant`语法适用于扫描仪生成器 Flex（不是 Bison，它与语法一起工作在更高级别）。

确保您的 Flex 版本是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T21:46:50.897

您可能使用的是 GnuWin32 的旧版本。

有了这个就可以了：http: [//sourceforge.net/projects/winflexbison/](http://sourceforge.net/projects/winflexbison/)

# powershell - 使用 PowerShell 总结文件系统目录

> ID：15064758
> 
> 赞同：1
> 
> 时间：2013-02-25T10:23:28.027
> 
> 标签：powershell, powershell-3.0

我正在尝试使用 PowerShell 输出有关目录树的一些累积信息。

这是据我所知。

```
gci -r -ea Si `
| 组 { if ($_.PSIsContainer) {""} else {$_.Extension} } `
| 选择名称、计数、@{n="Measure"; e={$_.组 | 测量长度 -Sum -Average} }`
| 排序计数-desc`
| ft 名称、计数、@{n="SizeMB"; e={"{0:N1}" -f ($_.Measure.Sum / 1MB)}; a="right"} -自动

```

这给了我：

```
名称 计数 SizeMB
---- ----- ------
.DOC 21660 6.988.6
.pdf 17323 11.893.1
                11958 24.0
.rtf 2112 4.808.1
.tif 736 359.3
.msg 490 318.8
.ppt 260 168.5
.zip 219 2.239.6
.xls 216 78.5
[...]

```

这实际上是我第一次尝试使用 PowerShell，所以这可能不是最好的方法。欢迎对方法和风格发表评论。

*   我不喜欢 and 之间的重复`Select-Object`，`Format-Table`这可以折叠吗？
*   我想输出更多指标，但我不确定如何正确执行：
    1.  每个文件类型的最大/平均嵌套深度
    2.  每个文件类型的最大/平均路径长度
    3.  每个文件类型的错误计数`Get-ChildItem`（访问被拒绝/路径太长）
*   这些测量结果也可以在最后作为“整体”部分输出，但列会很好。
*   如果可能的话，我想留在一个管道中，除非有充分的理由不这样做。

* * *

编辑：这是我当前的版本，计算路径长度和嵌套深度

```
gci -r -ea si `
| 选择`
    长度，`
    @{n="文件类型"; e={ if ($_.PSIsContainer) {""} else {$_.Extension.ToLower()} }}, `
    @{n="路径长度"; e={$_.FullName.Length}}，`
    @{n="路径深度"; e={$_.FullName.Split("\").Length - 1}} `
| 组文件类型`
| 排序@{e="计数"; desc=$True}，文件类型`
| 选择`
    姓名，`
    数，`
    @{n="长度"; e={$_.组 | 测量长度 -sum -average} }, `
    @{n="路径长度"; e={$_.组 | 测量路径长度 -max -average} }, `
    @{n="路径深度"; e={$_.组 | 测量路径深度 -max -average} } `
| 英尺`
    @{n="文件类型"; e={$_.Name} }, `
    数，`
    @{n="SumSizeMB"; e={"{0:N1}" -f ($_.Length.Sum / 1MB)}; 一个=“对”}，`
    @{n="AvgSizeKB"; e={"{0:N2}" -f ($_.Length.Average / 1MB)}; 一个=“对”}，`
    @{n="MaxPathLength"; e={[int]$_.PathLength.Maximum}; 一个=“对”}，`
    @{n="平均路径长度"; e={[int]$_.PathLength.Average}; 一个=“对”}，`
    @{n="MaxPathDepth"; e={[int]$_.PathDepth.Maximum}; 一个=“对”}，`
    @{n="平均路径深度"; e={[int]$_.PathDepth.Average}; 一个=“对”}`
    -汽车

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:32:17.427

折叠`Select-Object`并`Format-Table`尝试：

```
dir -r -ea si | group extension | sort count -desc | `
ft name, count, @{n="SizeMB";E={"{0:N1}" -f (($_.group | measure length -sum).sum / 1MB)}; a="right"} -auto 
```

至于其他指标（1和2），这应该可以解决问题：

```
dir -r -ea si | group extension | sort count | `
ft name, count, @{n="SizeMB";E={"{0:N1}" -f (($_.group | measure length -sum).sum / 1MB)}; a="right"}, `
@{n="AVGPathLength";E={($_.group | select @{n="fullpathlength";e={$_.fullname.length}} | measure-object  -property fullpathlength -average).average  }}, `
@{n="MaxPathLength";E={($_.group | select @{n="fullpathlength";e={$_.fullname.length}} | measure-object  -property fullpathlength -maximum).maximum  }}, `
@{n="AVGNestingDepth";E={($_.group | select @{n="nestingdepth";e={$_.fullname.split("\").length -3}} | measure-object  -property nestingdepth -average).average  }}, `
@{n="MaxNestingDepth";E={($_.group | select @{n="nestingdepth";e={$_.fullname.split("\").length -3}} | measure-object  -property nestingdepth -maximum).maximum  }} -auto 
```

我认为没有明显的方法可以完成指标 3。

# android - 带有按钮 xml 的 Android 特定图像视图

> ID：15064762
> 
> 赞同：0
> 
> 时间：2013-02-25T10:23:58.647
> 
> 标签：android, xml

带有按钮 xml 的 Android 特定图像视图

我希望我的 imageview 居中顶部并在其下方相同大小的按钮..

我试过了，但它从来没有用过，按钮永远不会停止流动

我尝试的是相对布局中的图像，然后是相对布局中的按钮，但单独..

![在此处输入图像描述](../Images/ad8b60acf04f354b65ef76d11f44478c.png)

这就是我想要的样子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:00:00.080

您应该`LinearLayout`同时使用 ImageView 和按钮，并将它们设置为`Center_horizontal`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
tools:context=".MainActivity" 
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:src="@drawable/logo" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Button" />

<Button
    android:id="@+id/button3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Button" />

<Button
    android:id="@+id/button4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Button" />

    </LinearLayout> 
```

# windows - 使用 SAPI 创建个人语音识别系统

> ID：15064765
> 
> 赞同：1
> 
> 时间：2013-02-25T10:24:03.793
> 
> 标签：windows, visual-c++, shared, voice-recognition, sapi

我正在使用[此处](http://msdn.microsoft.com/en-us/vstudio//cc482921.aspx)给出的 C++ 代码。但是这里使用的共享语音识别运行它自己的命令，例如移动、最小化、删除。我需要在不调用 MS 语音识别程序的情况下创建它。

```
hr = cpEngine.CoCreateInstance(CLSID_SpSharedRecognizer); 
```

上面的这一行创建了共享实例。

我尝试改用**CLSID_SpInprocRecognizer**但无法正确使用。我是新手。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-07T01:43:47.573

我在这里遇到了同样的问题，并花了很多时间试图找到答案。幸运的是，我通过以下步骤得到了解决方案：

1.  如果您想摆脱 MS 语音识别程序，请使用进程内识别器

`hr = cpRecognizer.CoCreateInstance(CLSID_SpInprocRecognizer);`

2.进程内识别器没有设置默认输入源或识别引擎，您需要设置它们才能让进程内识别器监听。

```
CComPtr<ISpObjectToken>      cpObjectToken;
CComPtr<ISpAudio>            cpAudio;

 // Get the default audio input token.
hr = SpGetDefaultTokenFromCategoryId(SPCAT_AUDIOIN, &cpObjectToken);

// Set the audio input to our token.
hr = cpRecognizer->SetInput(cpObjectToken, TRUE);
// Set up the inproc recognizer audio input with an audio input object.

// Create the default audio input object.
hr = SpCreateDefaultObjectFromCategoryId(SPCAT_AUDIOIN, &cpAudio);

// Set the audio input to our object.
hr = cpRecognizer->SetInput(cpAudio, TRUE); 
```

3.指定要使用的特定语音识别引擎。如果未指定，它将使用默认值。如果它没有被调用，它仍然使用默认的（我推荐这一行，仍然可以正常工作）。

```
hr = cpRecognizer->SetRecognizer(NULL); 
```

而已！它会打开一个默认的美式英语识别引擎，并且很快就能掌握我的命令。

参考：

```
http://stackoverflow.com/questions/18448394/inproc-speech-recognition-engine-in-python
http://msdn.microsoft.com/en-us/library/ms718864%28v=vs.85%29.aspx
http://msdn.microsoft.com/en-us/library/ms718866%28v=vs.85%29.aspx 
```

# asp.net - ViewState 在回发时没有获得价值/在页面生命周期的哪个阶段使用视图状态

> ID：15064767
> 
> 赞同：1
> 
> 时间：2013-02-25T10:24:10.830
> 
> 标签：asp.net, viewstate, page-lifecycle

如果标题看起来很荒谬，我提前道歉。在我陷入困境的情况下，我试图了解这两个问题的答案。我在单击按钮时动态创建用户控件，同时跟踪视图状态中的计数。以下是代码：

```
private int custControlCountID;

    public int CustControlCountID
    {
        get 
        {
            return (int)(ViewState["CustControlCountID"] == null? 1 : ViewState["CustControlCountID"]); 
        }
        set 
        {
            ViewState["CustControlCountID"] = value; 
        }
    }

    protected void Page_Init(object sender, EventArgs e)
    {
        for (int i = 0; i < CustControlCountID; i++)
        {
            RejRow customControl = (RejRow )LoadControl("~/RejRow .ascx");
            customControl.ID = "rejRow" + i;
            divHolder.Controls.Add(customControl);
        }
    }

    protected void btnNewRow_Click(object sender, EventArgs e)
    {
        CustControlCountID = CustControlCountID + 1;
        RejRow customControl = (RejRow)LoadControl("~/RejRow.ascx");
        customControl.ID = "rejectRow" + CustControlCountID;
        divHolder.Controls.Add(customControl);
    } 
```

我只分享了相关的代码。单击按钮控件已成功添加，但仅添加一次。这是因为 CustControlCountID 在 Page_Init 上始终设置为 1。我了解到 LoadViewState 在 Page_Init 之后调用，因此我设置的值在 Page_Init 中不可用。我还了解到要在 Page_Init 中添加控件，在此期间构建控件层次结构。请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:23:21.197

一种理论认为，当`ViewState`在 Page_init 和 Page_load 之间加载时，您在 Page_init 期间获得的值不是来自加载的视图状态，如果您设置它，它可能会在框架在以下步骤中实际加载它时被覆盖页面生命周期。

您可以尝试通过覆盖该`CreateChildControls`方法最初加载您的控件。

# html - 使所有文件都在 html 中是必需的

> ID：15064771
> 
> 赞同：0
> 
> 时间：2013-02-25T10:24:21.723
> 
> 标签：html

默认情况下是否可以将 div 类中的所有文件都设置为所需的文件。我有一个表单，在表单内我有一个 div 类。为什么我使用 div 类是默认的，div 类是隐藏的，当我单击某个复选框时，它会可见。所以我需要 div 类中的所有元素都应该被归档。我在所有元素上都尝试了 required="required" 但它不起作用。有人有想法吗？这是我的html

```
 <div class="downtime" id="downtime" style="display: none" >
    <label> name </label>
    <input required="required" type="text" name="name><br>
    <label> age </label>
    <input required="required type="text" name="age><br>
    </div>
                  </form> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:28:17.320

[语法高亮](http://en.wikipedia.org/wiki/Syntax_highlighting)- 可能是任何编码人员可以使用的最棒的工具。（它甚至在 Stack Overflow 上！）

```
<div class="downtime" id="downtime" style="display: none" >
<label> name </label>
<input required="required" type="text" name="name><br>
<label> age </label>
<input required="required type="text" name="age><br>
</div>
</form> 
```

属性是红色的，它们的值是蓝色的。所以它应该看起来更像这样：

```
<div class="downtime" id="downtime" style="display: none" >
<label> name </label>
<input required="required" type="text" name="name" /><br>
<label> age </label>
<input required="required" type="text" name="age" /><br>
</div>
</form> 
```

仅供参考，该`required`属性不需要值：

```
<input type="text" name="age" required /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:29:38.487

更改您的代码如下：

```
<input type="text" name="name" required> 
```

和

```
<input name="age" required> 
```

只需编写“**必需**”即可使您的字段符合要求。它仅适用于**HTML5**。所以放**它在 html 标签开始之前。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:30:21.187

如果你想使用 html5，你可以使用 required（这只适用于支持 html5 的浏览器），如果不使用 jquery 插件进行验证，如下所示：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)**

# linux - 更改嵌入式 linux 内核代码

> ID：15064772
> 
> 赞同：0
> 
> 时间：2013-02-25T10:24:23.153
> 
> 标签：linux, linux-kernel, embedded

我想了解和编辑（添加 printk 等）我从[github](https://github.com/craneboard/craneboard-kernel)获得的起重机板的 linux 内核。我是新手。我已经在 stackoverflow 中解决了与此相关的某些问题，但它们都集中在 PC 中的 linux 上（而不是嵌入式！）。我不知道从哪里开始。接受任何形式的指导。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:37:41.613

亲爱的，您有没有机会查看位于

[https://github.com/craneboard/craneboard-kernel](https://github.com/craneboard/craneboard-kernel)

如果您需要添加任何信息或一些日志记录，即在内核 itslef 中添加 printk，您需要重新编译它，它还显示了如何执行此操作。但我很想知道为什么需要将日志信息放入内核？你要修复内核中的一些错误吗？

Printk 与 C Printf 相同，但差别不大[http://www.makelinux.net/books/lkd2/ch18lev1sec3](http://www.makelinux.net/books/lkd2/ch18lev1sec3)

也看看[http://processors.wiki.ti.com/index.php/CraneBoard](http://processors.wiki.ti.com/index.php/CraneBoard)

查看[https://linuxlink.timesys.com/files/pdf/Timesys-EmbeddedLinuxTutorial.pdf也可能是一个好的开始](https://linuxlink.timesys.com/files/pdf/Timesys-EmbeddedLinuxTutorial.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:38:42.313

在编译内核之前，您需要一个 ARM 工具链。[这是一个很好的教程](http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/)。

# node.js - npm install - 如何以足够的权限运行构建脚本？

> ID：15064773
> 
> 赞同：24
> 
> 时间：2013-02-25T10:24:24.387
> 
> 标签：node.js, npm

我创建了一个节点模块，它有一个在安装后调用的构建脚本。构建脚本克隆一个 git 存储库并将其中的一些文件复制到另一个文件夹。问题：在 npm install 上，脚本没有获得足够的权限，我收到以下错误：

`sh: ./build.js: Permission denied`

我怎样才能给构建脚本足够的权限来完成它的工作？

我希望用户可以做`npm install mymodule`，然后构建脚本可以在任何系统上完成它的工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-25T19:30:01.680

你有`x`国旗`build.js`吗？

```
chmod +x build.js 
```

脚本的第一行应该告诉如何从 shell 执行脚本：

```
#!/usr/bin/env node 
```

# sql-server-2008 - 每行值之间的差异 - Sum Error

> ID：15064775
> 
> 赞同：0
> 
> 时间：2013-02-25T10:24:28.473
> 
> 标签：sql-server-2008, tsql, group-by, sum

我的主要问题在以下帖子中得到解决

[TSQL - 获取每行值之间的差异](https://stackoverflow.com/questions/15040277/tsql-get-the-difference-between-each-row-value)

我有一个问题是对每一行之间的读数值求和。

```
id  device_id   time    reading shift_id
150323  3   2013-02-25 15:22:01.273 999948.00   43
150324  1   2013-02-25 15:22:01.423 999962.00   43
150325  3   2013-02-25 15:22:01.463 999966.00   43
150326  1   2013-02-25 15:22:01.610 999979.00   43
150327  3   2013-02-25 15:22:01.650 999983.00   43
150328  1   2013-02-25 15:22:01.810 999997.00   43 
```

对于上述情况，我得到了结果，但是在以下情况下，根据提供给我的解决方案，读数正确，但我想增加差异......

```
id  device_id   time    reading shift_id
150322  1   2013-02-25 15:22:01.233 999945.00   43
150323  3   2013-02-25 15:22:01.273 999948.00   43
150324  1   2013-02-25 15:22:01.423 999962.00   43
150325  3   2013-02-25 15:22:01.463 999966.00   43
150326  1   2013-02-25 15:22:01.610 999979.00   43
150327  3   2013-02-25 15:22:01.650 999983.00   43
150328  1   2013-02-25 15:22:01.810 999997.00   43
150329  3   2013-02-25 15:22:01.853 1.00    43
150330  1   2013-02-25 15:22:02.000 15.00   43
150331  3   2013-02-25 15:22:02.040 18.00   43
150332  1   2013-02-25 15:22:02.187 32.00   43 
```

上述读数的结果如下

```
Day Shifts  Hour    Device ID   Count1
2013-02-25  2nd 11  1   39145.00
2013-02-25  2nd 11  3   39148.00
2013-02-25  2nd 12  1   248022.00
2013-02-25  2nd 12  3   248022.00
2013-02-25  2nd 13  1   389195.00
2013-02-25  2nd 13  3   389197.00
2013-02-25  2nd 14  1   201855.00
2013-02-25  2nd 14  3   201854.00
2013-02-25  2nd 15  1   -877108.00
2013-02-25  2nd 15  3   -877112.00 
```

这两个负值应该是正值，值应该是 122892 - 122889。

注意：读取的最大值将始终为 999999.00，之后我将再次从 0 开始到 999999.00，然后再次从 0 开始。这基本上是计数的计数设备。以下是堆栈溢出时建议的查询，我根据需要进行了一些修改

```
declare @fromdate datetime;
declare @todate datetime;
declare @total as decimal(18,2);
SET @fromdate = '2/23/2013 10:51:17 AM';
SET @todate ='2/25/2013 12:10:56 PM';
WITH cte AS
(   
  SELECT    *,
            ROW_NUMBER() OVER(PARTITION BY device_id ORDER BY [time]) AS NId
  FROM [dbo].[readings] r
  where     cast(r.time as date)>= CAST(@fromdate as date) and 
            cast(r.time as date) <= CAST(@todate as date) and 
            r.device_id<>5
)
SELECT  CAST (c1.[time] as DATE) as [Day],
                (
                    select s.name  from shifts s where s.id = c1.shift_id
                 ) as Shifts,
                 DATEPART(hour,c1.time) as [Hour], 
                 c1.device_id as [Device ID],   
                (select 
                    case when sum(c2.reading - ISNULL(c1.reading, c2.reading)) < 0 then
                      sum(c1.reading - ISNULL(c2.reading, c1.reading))                   
                    else
                        sum(c2.reading - ISNULL(c1.reading, c2.reading))

                    end
                 ) AS Count1
               FROM     cte c1 left JOIN cte c2 ON c1.device_id = c2.device_id AND 
                        c1.NId + 1 = c2.NId
  group by cast(c1.time as DATE), c1.shift_id , DATEPART(hour,c1.time), c1.device_id
  order by cast(c1.time as DATE), c1.shift_id,DATEPART(hour,c1.time), c1.device_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:31:37.357

您本质上需要的是暂时假装`c2.reading`在达到 1,000,000 后没有回绕，并且仅在`c2.reading < c1.reading`. 也就是说，此时您需要增加`c2.reading`1,000,000，然后减去`c1.reading`。而当 时`c2.reading >= c1.reading`，查询应该计算“正常”差异，即`c1.reading`从原始（非增加）`c2.reading`值中减去。

实现该逻辑的一种方法是执行如下简单的操作：

```
SUM(
  CASE WHEN c2.reading < c1.reading THEN 1000000 ELSE 0 END
  + c2.reading
  - ISNULL(c1.reading, c2.reading)
) AS Count1 
```

但是，也有不同的方法。

您的读数值，以及因此它们中的任何两个之间的差异，永远不会超过 1,000,000。因此，您可以自由地将[模](http://en.wikipedia.org/wiki/Modulo_operation "模运算（维基百科）")1,000,000 应用于正差，这会给您返回相同的差：

```
d mod 1,000,000 = d 
```

此外，将 1,000,000 的倍数与正差相加不会影响模 1,000,000 的结果，因为根据模运算的分配性，

```
 (d + 1,000,000 * n) mod 1,000,000 =
= d mod 1,000,000 + (1,000,000 * n) mod 1,000,000 
```

第一个相加`d mod 1,000,000`结果为`d`，第二个`(1,000,000 * n) mod 1,000,000`相加结果为 0, `d + 0 = d`。

另一方面，在*负*差上加上 1,000,000 会给我们一个正确的正差。

所以，总结一下，

*   将 1,000,000 加到负差上给我们一个（正确的）正差，

*   以 1,000,000 为模的正差产生相同的正差，并且

*   将 1,000,000 添加到正差不会影响模 1,000,000 的结果。

考虑到所有这些，我们最终可以得到以下通用表达式来计算单个差异：

```
(1000000 + c2.reading - ISNULL(c1.reading, c2.reading)) % 1000000 
```

[Transact-SQL](http://msdn.microsoft.com/en-us/library/ms190279.aspx "Modulo (Transact-SQL)")`%`中的模运算符在哪里。

将表达式放入`SUM`得到对应的聚合值：

```
SUM((c2.reading + 1000000 - ISNULL(c1.reading, c2.reading)) % 1000000) AS Count1 
```

# android - Android 手机状态监听器

> ID：15064776
> 
> 赞同：1
> 
> 时间：2013-02-25T10:24:30.723
> 
> 标签：android

我在电话状态监听器中遇到问题。我想`activity`从`onCallStateChanged`事件中调用一个。当我接到来电时，我想拨打一个电话`activity`并处理当前电话号码的交易（我目前通过来电获得）。但我无法`ShowPhoneStateDialogActivity`使用以下代码进行活动。请纠正我的错误。提前致谢。我的代码是，

```
 case TelephonyManager.CALL_STATE_RINGING:
                Log.d("PHONE:", "RINGING");
                Log.w("Call STATE:", "RINGING");
                if (!sess.getCallActive()) {
                    sess.setCallActive(true);
                    sess.setActiveMobileNo(incomingCallNumber);
                    this.endActivecall();
                    Intent intent = new Intent(context,ShowPhoneStateDialogActivity.class).setAction("incomingNumber");
                    intent.putExtra("Phoneno", incomingCallNumber);
                    Log.i("CURRENT ACTIVITY",this.getClass().getSimpleName());
                    Log.i("CURRENT CONTEXT","Context:"+context);
                    //intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startService(intent);
                    break;
                } else {
                    this.endActivecall();
                }
                break; 
```

`endActivecall`功能是，

```
public void endActivecall() {
        TelephonyManager telephony = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        try {
            Class c = Class.forName(telephony.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            telephonyService = (ITelephony) m.invoke(telephony);
            // telephonyService.silenceRinger();
            telephonyService.endCall();
            Log.i("CALL STATE ACTION:", "Call end");
            Log.i("ACTIVE_MOBILENO:", sess.getActiveMobileNo());
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:49:08.937

而不是 code `context.startService(intent)`，而是尝试调用`context.startActivity(intent)`。

# c# - 控制悬停颜色

> ID：15064779
> 
> 赞同：0
> 
> 时间：2013-02-25T10:24:45.477
> 
> 标签：c#, winforms, panel

抱歉，这是一个初学者的问题，但我没有通过。我有一个带有 4 个面板控件的 Windows 窗体应用程序。现在我希望当用户用鼠标悬停时面板改变它们的背景。我试过以下：

```
private void Panel1_MouseIn(object sender, EventArgs e)
{
    panel1.BackColor = Color.Red;
}

private void Panel1_MouseOut(object sender, EventArgs e)
{
    panel1.BackColor = Color.Blue;
} 
```

这工作正常，但因为我有 4 个面板而不是一个，所以我必须再添加 6 个这样的函数......我试图为所有这些面板创建一个函数，但事件发送者没有可访问的 BackColor 属性。

有没有办法为所有面板制作一个单一的 MouseIn 功能？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:26:45.910

你应该投它：

```
private void Panel_MouseIn(object sender, EventArgs e)
{
  Panel pan = sender as Panel;
  pan.BackColor = Color.Red;
} 
```

并将这一功能用于所有 4 个面板作为事件处理程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:28:12.200

您可以将您的发件人对象投射到面板上

```
Panel panel = (Panel)sender;
if(panel != null)
// Set the BackColor 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T10:28:16.317

您应该首先将 sender 对象转换为 Panel ：

```
Panel panel = sender as Panel;
if (panel == null)
    return;

panel.BackColor = Blue; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T10:29:00.190

`MouseIn`您可以为and`MouseOut`然后定义一个 EventHandler

```
private void Panel1_MouseIn(object sender, EventArgs e)
{
    Panel p = sender as Panel;
    if(p == panel1){
        //set color  
    }
    else if(p == panel2){
       //set color
    }
...
} 
```

同样对于`MouseOut`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-24T03:47:48.650

在鼠标和功能中删除您放置的所有代码并在下面编写一行简单的代码并尝试它会起作用

```
((Control)sender).BackColor = Color.Red; 
```

# php - PHP PDO 数据转换为 Json_Encode + 但只出现第一行

> ID：15064782
> 
> 赞同：0
> 
> 时间：2013-02-25T10:24:58.800
> 
> 标签：php, json, select, pdo, encode

```
 $sql='SELECT word,language,acceptable FROM profanity;';
                       $pds=$database_miscellaneous->pdo->prepare($sql); 
                       $pds->execute(); 
                       //$row=$pds->fetch();
        foreach($pds as $row) {
            $profanityText = json_encode(array('word' => $row['word'],
                                       'language' => $row['language'],
                                       'acceptable' => $row['acceptable']));
        } 
```

我有上面的代码。问题是它有效，但只有数据库中的第一行进入 json 数组。我已经直接对数据库运行查询，它会提取所有数据。

我猜我的 foreach 循环有问题，或者我做 PDO 调用的方式很多。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:27:55.397

问题是保存 json 编码值的变量`$profanityText`每次在循环中都会被覆盖。

用这个

```
 $rows = array()
    foreach($pds as $row) {

        $rows[] = array('word' => $row['word'],
            'language' => $row['language'],
            'acceptable' => $row['acceptable']);
    }
    $profanityText = json_encode($rows); 
```

或者，如果您不以任何方式操作数据，则可以直接调用（如 deceze 所述）

```
$profanityTest = json_encode($pds->fetchAll(PDO::FETCH_ASSOC)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:29:17.427

您只是将每个新值分配给，`$profanityText`但应该像此编辑一样附加它。

```
$profanityText = array();
foreach($pds as $row) {
    $profanityText[] = array('word' => $row['word'],
                                   'language' => $row['language'],
                                   'acceptable' => $row['acceptable']);
}

echo json_decode($profanityText); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:06:33.327

这是PDO，伙计！
尽可能不要重复自己：

```
$sql='SELECT word,language,acceptable FROM profanity;';
$pds=$database_miscellaneous->pdo->prepare($sql); 
$pds->execute(); 
$profanityText = json_encode($pds->fetchAll(PDO::FETCH_ASSOC)); 
```

# c++ - Makefile - 找不到共享库

> ID：15064783
> 
> 赞同：5
> 
> 时间：2013-02-25T10:25:01.157
> 
> 标签：c++, linux, makefile

我有一个用于 c++ Linux 项目的 Makefile：

```
MODE ?= dbg
DIR = ../../../../../somdir/$(MODE)

SRC_FILES = a.cpp b.cpp
H_FILES = a.h

LDFLAGS += -L$(DIR)/lib/linux '-Wl,-R$$ORIGIN'
CPPFLAGS = -I$(DIR)/include
LIBRARIES = -lsomeso

ifeq (rel, $(MODE))
  CFLAGS = -Wall -g -DNDEBUG
else
  CFLAGS = -Wall -ansi -pedantic -Wconversion -g -DDEBUG -D_DEBUG
endif

sample: $(SRC_FILES) $(H_FILES) Makefile
    g++ $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) $(LIBRARIES) $(SRC_FILES) -o sample 
```

当我运行“make”时，它会构建项目，没有错误。但是当我运行该项目时，它抱怨说：

```
error while loading shared libraries: libsomeso.so: cannot open shared object file: No such file or directory 
```

我在 DIR 中给出的路径转到保存共享对象的文件夹（相对于放置 makefile 的位置），如果它是错误的路径，为什么它在 make 过程中不抱怨。

有人知道我错过了什么吗？

谢谢马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:56:45.233

```
LDFLAGS += -L$(DIR)/lib/linux '-Wl,-R$$ORIGIN' 
```

以上应该是：

```
LDFLAGS += -L$(DIR)/lib/linux -Wl,-R$(DIR)/lib/linux '-Wl,-R$$ORIGIN' 
```

也就是说，对于每个非标准动态库位置，都应该指定`-L`一个对应的位置。需要定位相对于可执行文件的动态库，不确定您是否需要它。`-Wl,-R``$ORIGIN`

人们经常建议使用`LD_LIBRARY_PATH`. 在我看来，这是一个糟糕的建议，因为它使部署更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:29:44.167

当你运行你的应用程序时，位置`libsomeso.so`应该在`LD_LIBRARY_PATH`环境变量中。尝试运行这样的程序：

```
LD_LIBRARY_PATH="path_to_libsomeso_so:$LD_LIBRARY_PATH" myprogram 
```

这是所在**目录**`path_to_libsomeso_so`的完整路径，并且是您的程序可执行文件。请注意，您应该指定包含 的目录的路径，而不是文件本身。**`libsomeso.so``myprogram``libsomeso.so``libsomeso.so`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:32:00.850

问题不在编译期间。一切顺利。运行时出现问题。

实际上，您的程序已与共享对象库链接。因此，在运行时，它需要加载这个共享对象文件。`-L`在编译期间，您可以使用标志指示编译器此文件所在的位置。

对于运行时，您必须将`LD_LIBRARY_PATH`环境变量设置为指向`libsomeso.so`文件所在的目录。

或者，您可以将此文件放在搜索这些共享对象文件的标准目录之一中：`/usr/local/lib`, `/usr/lib`, `/lib`，但这应该是您为库的最终分发版本所做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T12:36:04.457

正如 Maxim Egorushkin 所说，`LD_LIBRARY_PATH`这是一个糟糕的选择。同时，使用`-L$(your lib path) -l$(your lib name)`gcc/g++ 参数链接共享库也不是一个好的选择。因为，在构建 exe 之后，您应该告诉 exe 共享库目录在哪里。默认情况下，可执行文件仅在`/usr/lib`或处搜索共享库`/usr/local/lib`。虽然，您在构建可执行文件时已经告诉 makefile 共享库在哪里。但是当你执行这个exe文件时，它们是不同的。但是，链接静态库没有这样的问题。

因此，解决问题的最佳方法是更改​​链接自定义共享文件的方式。像这样：

```
DYNAMIC_LIB_DIR = ../lib (your lib path ,this is a example)

OBJLIBS = xxx.so (your lib name)

gcc/g++ -o exe_name sourcefile/object_file $(DYNAMIC_LIB_DIR)/$(OBJLIBS) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-18T09:49:39.693

# 刷新动态库缓存！

在向 中添加自定义的非标准库后`/usr/local/lib`，首先检查.`/usr/local/lib``/etc/ld.so.conf.d/libc.conf`

然后，以动态链接库缓存刷新结束：

```
$ sudo ldconfig 
```**

# java - == 后增量后令人费解的行为

> ID：15064785
> 
> 赞同：9
> 
> 时间：2013-02-25T10:25:12.593
> 
> 标签：java, post-increment

有人在某个论坛帖子中假设，许多人甚至是经验丰富的 Java 开发人员都不会理解 Java Code 的以下内容。

```
Integer i1 = 127;
Integer i2 = 127;
System.out.println(i1++ == i2++);
System.out.println(i1 == i2); 
```

作为一个对 Java 有点兴趣的人，我对它进行了思考并得出了以下结果。

```
System.out.println(i1++ == i2++);
// True, since we first check for equality and increment both variables afterwards.

System.out.println(i1 == i2);
// True again, since both variables are already incremented and have the value 128 
```

Eclipse 告诉我不然。第一行是真的，第二行是假的。

我真的很感激解释。

第二个问题。这是 Java 特有的，还是这个示例也适用于基于 C 的语言？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T10:27:16.370

```
Integer i1 = 127;
Integer i2 = 127;
System.out.println(i1++ == i2++); 
// here i1 and i2 are still 127 as you expected thus true
System.out.println(i1 == i2); 
// here i1 and i2 are 128 which are equal but not cached
    (caching range is -128 to 127), 
```

在情况 2 中，如果您使用`equals()`它，则返回 true 作为`==`整数运算符仅适用于缓存值。由于 128 超出缓存范围，因此 128 以上的值将不会被缓存，因此您必须使用`equals()`方法来检查 127 以上的两个整数实例是否为**真**

**测试：**

```
Integer i1 = 126;
    Integer i2 = 126;
    System.out.println(i1++ == i2++);// true
    System.out.println(i1 == i2); //true

 Integer i1 = 126;
        Integer i2 = 126;
        System.out.println(i1++ == i2++);// true
        System.out.println(i1.equals(i2)); //true

  Integer i1 = 128;
        Integer i2 = 128;
        System.out.println(i1++ == i2++);// false
        System.out.println(i1==i2); //false

  Integer i1 = 128;
        Integer i2 = 128;
        System.out.println(i1++.equals(i2++));// true
        System.out.println(i1.equals(i2)); //true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:42:24.630

正如所解释的，这是由于[整数缓存](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7-300)。为了好玩，您可以使用以下 JVM 选项运行程序：

```
-XX:AutoBoxCacheMax=128 
```

它会打印两次 true（hostpot 7 上可用的选项 - 不一定在其他 JVM 上）。

注意：

*   这是 JVM 特定的
*   修改后的行为符合 JLS，它说*必须*缓存 -128 和 +127 之间的所有值，但也说可以缓存其他*值*。

底线：**第二个 print 语句在 Java 中是未定义的**，可以根据 JVM 实现和/或使用的 JVM 选项打印 true 或 false。

# c# - RDLC 报告未使用动态绑定的数据源进行分页

> ID：15064787
> 
> 赞同：0
> 
> 时间：2013-02-25T10:25:16.967
> 
> 标签：c#, asp.net, rdlc

我有一个 rdlc 报告，我想将我自己的自定义类的列表绑定到作为数据源。

我使用了[本网站](http://blogs.msdn.com/b/aconrad/archive/2007/09/07/science-project.aspx)上推荐的一些代码来构建 DataTable

这真的很好用

```
 //convert my list of Invoices to a DataTable
     var dt = invoices.CopyToDataTable(dataTable, LoadOption.PreserveChanges);
     //Setup a new DataSource
     var rds = new ReportDataSource {Name = "ReportDataSet", Value = dt};
     //Add that datasource to my ReportViewer
     rvSampleInvoice.LocalReport.DataSources.Add(rds);
     //Map my report path, etc
     rvSampleInvoice.LocalReport.ReportPath = Server.MapPath("etc"); 
```

这一切都很好，当我加载我的页面时，报告显示，但它只有一个 2 页。第一个是我的发票集合中的第一个条目，当我单击下一页时，它是一个空白页。我在页面中添加了一个gridview，并将DataTable (dt) 绑定到它，它显示为一个带有一行标题和20 行数据的漂亮表格。

我想知道如何将 RDLC 绑定到我的发票列表是否有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:59:30.217

[这个 SO 答案](https://stackoverflow.com/questions/8389884/how-do-you-create-a-report-rdlc-that-shows-1-record-per-page)已经解决了这个问题。必须有更好的方法来做到这一点，所以如果有人知道为一个结果集设置多个页面的更好方法，请告诉我

更新：

好的，我将为未来的考古学家解释我现在学到的更多关于 RDLC 的知识。您不能只是将数据拖放到页面中，绑定项目列表并期望它复制您创建的示例页面，但列表中有许多项目。您需要将表格拖到报告中，并在我链接到的 SO 解决方案中勾选“分页符”选项。然后在页面上拉伸表格，添加一堆行和列。在页面中填写您想要的单元格。它需要一堆单元格合并和拉伸才能让它看起来像我想要的那样，所以如果有更好的方法，请有人发帖。

# google-apps-script - 共享文档和其他文档管理

> ID：15064789
> 
> 赞同：0
> 
> 时间：2013-02-25T10:25:24.337
> 
> 标签：google-apps-script

我正在 GAS 中进行一些文档管理。仔细浏览了文档，但没有找到以下任何答案（由我的脚本完成，而不是手动完成）。有谁知道吗？

*   如何与其他用户共享文档？
*   我注意到 DocumentApp.create() 创建并打开了一个文档，但是有没有办法抑制打开（只是创建）？
*   是否可以从模板创建文档？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:43:48.227

作为基本答案，您的所有三个需求都可以在`DocsList`服务的主要方法中实现。

1.  共享文档 = [File[].addViewer()](https://developers.google.com/apps-script/class_file#addViewer)或[File[].addEditor()](https://developers.google.com/apps-script/class_file#addEditor)
2.  在 Apps 脚本中创建文档只会在内存中打开它，而不是作为浏览器选项卡
3.  从模板创建只是复制文件（模板）并重命名/编辑内容。[文件[].makeCopy()](https://developers.google.com/apps-script/class_file#makeCopy)

毫无疑问，可能会给出无数后续细致入微的答案，但您需要从用例描述或您已经尝试过的示例开始。

[教程：与您的文档列表交互](https://developers.google.com/apps-script/articles/docslist_tutorial)是一个很好的介绍。

# python - Django 模型创建共同独特的领域

> ID：15064795
> 
> 赞同：3
> 
> 时间：2013-02-25T10:25:45.870
> 
> 标签：python, django, django-models, data-integrity

我正在尝试为 Django 创建一个如下所示的模型：

```
class Device(Model):
    UDID = CharField(length=64, primary_key=True)
    # more irrelevant stuff

class DeviceProperty(Model):
    device = ForeignKey(Device)
    name = CharField(length=255)
    value = CharField(length=255)
    readOnly = BooleanField() 
```

但是，出于数据完整性的原因，单个设备不应该有两个同名的属性。所以我需要使 DeviceProperty 的设备和名称字段共同唯一。

实现此目的的一种简单方法是在两个字段上使用复合主键，但这会引发一些问题，更重要的是 Django 不支持。

我在 Django 文档中没有找到任何关于此的内容。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:30:37.550

[unique_together](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)是你想要的。

```
class DeviceProperty(Model):
    …
    class Meta:
        unique_together = ['device', 'name'] 
```

# eclipse - Eclipse 文件搜索多次找到同一个文件

> ID：15064796
> 
> 赞同：36
> 
> 时间：2013-02-25T10:25:51.830
> 
> 标签：eclipse, maven

在 Eclipse 中，我有两个 maven 项目 A 和 B，其中 A 是 B 的父项目。目录结构如下：

```
A/pom.xml
A/B/pom.xml
A/B/... 
```

然后我使用文件搜索 (Ctrl+H) 在项目 B 中查找任何文件。搜索结果窗口以不同的相对路径显示该文件两次：

```
A/B/<my_file>
B/<my_file> 
```

所以，同一个文件会显示**两次**。显然，第一个搜索结果是多余的。有没有办法排除这些重复的搜索结果？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-25T13:13:03.867

我个人为避免这种情况所做的是将父项目中的每个模块标记为*派生*（右键单击文件夹> 属性> 属性：派生）。

然后当您执行文件搜索时，取消选中“考虑派生资源”（我认为默认情况下不会选中），您将不会获得`A/B/<my_file>`.

唯一的不便是您必须为每个模块执行此操作，并且每次添加新模块时。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-05-03T04:49:08.447

在打开的资源窗口（cntrl+shift+R）中，单击右上角的箭头并选中“ *Filter Duplicated Resources* ”。这对我有用。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-01-03T03:24:23.213

检查*窗口 -> 首选项 -> Maven ->**隐藏物理嵌套模块的文件夹（实验性）***在*Mars.1 Release (4.5.1)*中为我工作。

检查后我关闭了eclipse中的所有项目，删除了eclipse项目文件（*.project、.classpath*和*.settings*）并重新导入了我的maven项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-09T02:55:59.983

Windows - 首选项 - Maven - 隐藏物理嵌套模块的文件夹

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-05T15:04:24.767

我有类似的问题。

我对这个问题的解决方案是

1.  创建要搜索的项目的eclipse“工作集”
2.  将此工作集设置为搜索对话框中的选项
3.  在里面搜索

    [![示例搜索对话框](../Images/bb1b87f2b7a4e83be73d6d9b24246c5f.png)](https://i.stack.imgur.com/0fVdf.jpg)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-11T18:50:28.610

我同意达蒙霍雷尔的观点。转到 Windows - 首选项 - Maven - 隐藏物理嵌套模块的文件夹（确保选中该复选框）。

注意：确保将 maven 项目重新导入 eclipse 以查看更改。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-31T06:56:53.410

在父项目中，子项目在我的案例中已经在视觉上隐藏了，但仍然可以通过搜索和`Ctrl`单击链接找到。

我通过使用**资源过滤器**解决了这个问题：

1.  右键单击（父）项目 >*属性*>*资源*>*资源过滤器*
2.  点击*Add Filter...*，选择*Apply to* -> *Folders*并输入一个子项目的文件夹名称，点击*OK*
3.  对所有子项目文件夹重复 2.

到最后，你应该有这样的东西：[![在此处输入图像描述](../Images/82a7c415adacc9b3f96c3dadb5ce5351.png)](https://i.stack.imgur.com/QLEDr.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-25T13:04:53.337

有一个古老的[错误要求 Eclipse 支持嵌套项目](https://bugs.eclipse.org/bugs/show_bug.cgi?id=245412)。2008年开业，我猜不会很快发生。

由于 Eclipse 不支持 Maven 的默认嵌套模块布局，您必须单独导入每个模块，这不会让 Eclipse 感到困惑，但正如您在搜索结果中看到的那样，它会让您感到困惑。当您开始在模块中保存启动配置时，也会发生类似的事情。

有几种可能的解决方案：

1.  习惯于忽略一半的搜索结果。需要一些纪律，但没有魔法。

2.  确保您的根项目不包含您可能希望从 Eclipse 打开的任何重要内容（即将父 POM 移动到必须是根项目子项目的新模块）。现在您可以关闭根项目。

    在您的项目中放置东西时需要一些纪律，当您必须添加新模块时会很笨拙。

3.  使用[平面多模块方法](http://maven.apache.org/plugins/maven-eclipse-plugin/reactor.html#Flat_Project_Layout)。这是 #2 的扩展，它看起来很奇怪，并且*可能*有一些插件被它冒犯了。所以如果你使用了很多非标准的插件，你应该检查他们是否喜欢新的布局。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T11:36:59.917

您可以使用[平面多模块方法](http://maven.apache.org/plugins/maven-eclipse-plugin/reactor.html#Flat_Project_Layout)解决此问题。

如果您将 maven-release-plugin 与 Subversion 以外的版本控制系统一起使用，则可能需要注意事项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-28T09:40:58.570

作为一个新加入者，仍然无法发表评论，但我真的很想在最佳答案中添加一些内容。有用！它不仅为我删除了重复文件（一个来自子模块，一个来自父模块），它还从父模块中删除了类文件）。

但是它将文件夹添加到我的 .gitignore 中，这将导致以后添加的新文件/目录出现问题。我刚刚将更改恢复为 .gitignore ，它仍然在 Eclipse 中有效。

找到这个答案以禁用 .gitignore [EGit 的自动更改和 Eclipse 修改 .gitignore 文件，但它不应该](https://stackoverflow.com/questions/17748223/egit-and-eclipse-modifies-gitignore-file-but-it-should-not)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-29T06:43:08.860

除了提到的“**隐藏物理嵌套模块的文件夹**”之外，您可以在导入**Maven**项目 时**取消选中父模块：****[![在此处输入图像描述](../Images/3b53cba176a1d6daf7715e04bdab4768.png)](https://i.stack.imgur.com/J2F8z.png)**

# wordpress - Wordpress 管理员选项，供用户选择每页的自定义侧边栏小部件

> ID：15064797
> 
> 赞同：0
> 
> 时间：2013-02-25T10:25:52.963
> 
> 标签：wordpress, widget, admin, sidebar

首先，我在小部件面板上创建了侧边栏：

```
add_action( 'widgets_init', 'my_register_sidebars' );

function my_register_sidebars() {

    register_sidebar(
        array(
            'id' => 'sidebar1',
            'name' => __( 'Sidebar1' ),
            'description' => __( 'The Sidebar 1.' ),
            'before_widget' => '<div id="%1$s" class="widget %2$s">',
            'after_widget' => '</div>',
            'before_title' => '<h3 class="widget-title">',
            'after_title' => '</h3>'
        )
    ); 
```

我创建了许多自定义侧边栏布局。我希望这些布局中的每一个都是它自己的小部件，作为默认 wordpress 的选项（例如档案、日历、RSS、搜索、标签云等）。因此，我可以选择我希望创建的每个站点都可以使用哪些。

然后根据我提供的侧边栏，我希望用户（在创建/编辑页面时）能够从下拉侧边栏选项框中选择他们想要在相关页面上的布局 - 所以这可以被称为动态而不是自己专门调用每个布局：

```
get_sidebar('$user-selected'); 
```

抱歉有点胡扯，但感谢您提供任何帮助。

（ps我想避免使用插件）

谢谢，马特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:48:29.103

只需使用带有显示所有可用侧边栏的选择框的自定义字段。然后在您的页面模板中检查自定义字段值并相应地输出。

# stream - 流中的递归

> ID：15064799
> 
> 赞同：1
> 
> 时间：2013-02-25T10:25:58.887
> 
> 标签：stream, scheme, racket, lazy-sequences

我有代码

```
(define (add-ten s)
(let ([f (lambda(s) ((cons 10 (car (s))) (cdr (s))))])
 (f s))) 
```

s 可能是类似权力的流

```
(define powers (letrec ([f (lambda (x) (cons x (lambda () (f (* x 2)))))]) 
(lambda  ()   (f 2)))) 
```

我的功能

```
(result-for-n-times powers 5) 
```

给出'（2 4 8 16 32）。

现在，我想定义一个流（加十），它可以获取流的权力并提供另一个流。所以，如果我称之为

```
(result-for-n-times (add-ten powers) 5) 
```

将给出'((10\. 2) (10\. 4) (10\. 8) (10\. 16) (10\. 32))。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:41:37.583

尝试这个：

```
(define powers
  (letrec ([f (lambda (x)
                (cons x
                      (lambda () (f (* x 2)))))])
    (f 2)))

(define (result-for-n-times s n)
  (if (zero? n)
      '()
      (cons (car s)
            (result-for-n-times ((cdr s)) (sub1 n)))))

(define (add-ten s)
  (letrec ([f (lambda (x)
                (cons (cons 10 (car x))
                      (lambda () (f ((cdr x))))))])
    (f s))) 
```

请注意，该`add-ten`过程接收一个流作为参数，但它还必须返回一个流。所以`letrec`必须用于定义一个过程，该过程包含从原始流中获取的每个元素，并承诺继续构建流。

另请注意，您实际上并没有*调用*定义的过程，您要么在' 定义`powers`的末尾调用它，要么像这样调用它：在将它传递给. 解决这个问题，它按预期工作：`powers``(powers)``add-ten`

```
(result-for-n-times (add-ten powers) 5)
=> '((10 . 2) (10 . 4) (10 . 8) (10 . 16) (10 . 32)) 
```

# asp.net - 嵌套的 AJAX 选项卡不可见

> ID：15064801
> 
> 赞同：3
> 
> 时间：2013-02-25T10:26:02.167
> 
> 标签：asp.net, ajax, tabs, asp.net-ajax

我目前正在使用带有选项卡面板的 Ajax 选项卡容器来显示不同的信息。然而，当试图将它们相互嵌套时，它们会在页面呈现时突然变得不可见。但是，这仅在选项卡面板未嵌套在第一个时才会发生，例如这有效：

```
<ajx:TabContainer runat="server" ID="tcMain" CssClass="MyTabStyle" ActiveTabIndex="0">
    <ajx:TabPanel runat="server" ID="tp1" HeaderText="Job Vacancies">
        <ContentTemplate>
            <ajx:TabContainer runat="server" ID="tcSubMain" CssClass="MyTabStyle" ActiveTabIndex="0">
                <ajx:TabPanel runat="server" ID="tpSub1" HeaderText="Job Vacancies">
                    <ContentTemplate>
                    </ContentTemplate>
                </ajx:TabPanel>
            </ajx:TabContainer>
         </ContentTemplate>
     </ajx:TabPanel>
</ajx:TabContainer> 
```

然而这不起作用：

```
<ajx:TabContainer runat="server" ID="tcMain" CssClass="MyTabStyle" ActiveTabIndex="0">
    <ajx:TabPanel runat="server" ID="tp1" HeaderText="Job Vacancies">
        <ContentTemplate>
        </ContentTemplate>
    </ajx:TabPanel>
    <ajx:TabPanel runat="server" ID="tp2" HeaderText="Job Vacancies">
        <ContentTemplate>
            <ajx:TabContainer runat="server" ID="tcSubMain" CssClass="MyTabStyle" ActiveTabIndex="0">
                <ajx:TabPanel runat="server" ID="tpSub1" HeaderText="Job Vacancies">
                    <ContentTemplate>
                    </ContentTemplate>
                </ajx:TabPanel>
            </ajx:TabContainer>
         </ContentTemplate>
     </ajx:TabPanel>
</ajx:TabContainer> 
```

我研究了方法和方法，但是当第二种方法导致选项卡容器完全不可见时，网上似乎没有太多的原因。

我检查了 FireBug，CSS 中没有任何“visibility:hidden”或“display:none”，所以它不能归因于附加的 CSS 文件。

谢谢，

第一岬

# ios - 如何在iOS中计算浮点数后的位数？

> ID：15064811
> 
> 赞同：3
> 
> 时间：2013-02-25T10:26:32.327
> 
> 标签：ios, objective-c, floating-point

如何计算iOS中浮点数后的位数？

例如：

*   3.105 应该返回 3
*   3.0 应该返回 0
*   2.2 应该返回 1

**更新：** 我们还需要添加以下示例。因为我想知道小数部分的位数。

*   1e-1 应该返回 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:31:55.013

试试这个方法：

```
NSString *enteredValue=@"99.1234";

NSArray *array=[enteredValue componentsSeparatedByString:@"."];
NSLog(@"->Count : %ld",[array[1] length]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:44:33.980

我使用的是以下内容：

```
NSString *priorityString = [[NSNumber numberWithFloat:self.priority] stringValue];
    NSRange range = [priorityString rangeOfString:@"."];
    int digits;
    if (range.location != NSNotFound) {
        priorityString = [priorityString substringFromIndex:range.location + 1];
        digits = [priorityString length];
    } else {
        range = [priorityString rangeOfString:@"e-"];
        if (range.location != NSNotFound) {
            priorityString = [priorityString substringFromIndex:range.location + 2];
            digits = [priorityString intValue];
        } else {
            digits = 0;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T15:03:34.840

也许有一种更优雅的方式来做到这一点，但是当从 32 位架构应用程序转换为 64 位架构时，我发现许多其他方式都失去了精度并且搞砸了。所以我是这样做的：

```
bool didHitDot = false;    
int numDecimals = 0;
NSString *doubleAsString = [doubleNumber stringValue];

for (NSInteger charIdx=0; charIdx < doubleAsString.length; charIdx++){

    if ([doubleAsString characterAtIndex:charIdx] == '.'){
        didHitDot = true;
    }

    if (didHitDot){
        numDecimals++;
    }
}

//numDecimals now has the right value 
```

# php - 在 PHP 5 中使用 Schematron 验证 XML

> ID：15064814
> 
> 赞同：4
> 
> 时间：2013-02-25T10:26:50.280
> 
> 标签：php, xml, xslt, schematron, cda

我在使用[schematron](http://en.wikipedia.org/wiki/Schematron)验证 XML 时遇到问题。

在我的代码中，我将 XML 和 XSL 作为 DOMDocument 对象加载，并尝试转换：

```
$domSche = new DOMDocument();
$domSche->loadXML($message);

$domXSLSche = new DOMDocument();
$domXSLSche->load("CI-SIS_StructurationCommuneCDAr2.xsl");

$xsltsche = new XSLTProcessor();
$xsltsche->importStylesheet($domXSLSche);

$XSLValid = $xsltsche->transformToXml($domSche); 
```

但是该函数返回此错误：

> XSLTProcessor::transformToXml()：没有与此对象关联的样式表

从技术上讲，我不明白 importStylesheet 将我的 XSL 与 XML 相关联，不是吗？

如果有人想查看更多来源，文件位于：

*   [$消息](http://pastebin.com/zEHnYP2t)
*   [CI-SIS_StructurationCommuneCDAr2.xsl](http://pastebin.com/9e19wiHf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:06:38.530

您使用的 Schematron 版本不需要 XSL 2.0，但是您拥有的文件使用了 XSL 2.0 功能。

`XSLTProcessor`在 PHP 中仅支持 XSL 1.0。因此，该文件中使用的某些功能不可用并导致导入失败。

由于无法导入样式表，因此无法运行转换。

* * *

错误信息

> 警告：XSLTProcessor::transformToXml()：没有与此对象关联的样式表

表示样式表丢失。不在磁盘或内存中，而是用于转换。

那是因为它有错误，最终无法编译。

在您的情况下，您拥有的 XSL 文件是 2.0 版本，但 PHP 仅支持 1.0 功能。它还使用未设置（定义）的变量。当我加载您的示例数据时，我收到以下错误：

> 警告：XSLTProcessor::importStylesheet()：编译错误：文件 CI-SIS_StructurationCommuneCDAr2.xsl 第 13 行元素样式表

这是：

```
 version="2.0"> 
```

并由下一个警告解释：

> 警告：XSLTProcessor::importStylesheet(): xsl:version: 仅支持 1.0 功能

接下来是一个未定义的变量：

> 警告：XSLTProcessor::importStylesheet()：未定义变量
> 
> 警告：XSLTProcessor::importStylesheet()：编译错误：文件 CI-SIS_StructurationCommuneCDAr2.xsl 第 4974 行元素模板

这是

```
 <!--RULE -->
    <xsl:template match="*[cda:templateId/@root = $templateObservationMedia]" priority="1000"
                  mode="M62"> 
```

这是`$templateObservationMedia`变量并导致

> 警告：XSLTProcessor::importStylesheet()：编译谓词失败

要使其正常工作，您至少需要解决这些问题。由于在匹配模式中使用变量不是 XSLT 1.0，因此您至少需要解决这个问题。有关变量/匹配问题的扩展讨论，请参阅[XSLTProcessor::importStylesheet() 中的多个 PHP 警告。](https://stackoverflow.com/q/1711001/367456)

# android - 如何在 EditText 中单击选择文本？

> ID：15064820
> 
> 赞同：0
> 
> 时间：2013-02-25T10:27:24.787
> 
> 标签：android, android-edittext

![在此处输入图像描述](../Images/0a00767e0b840e7fd0731a9a99e2532c.png)

**下面的源代码不起作用**

```
 public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_book_page);

             book_page = (EditText) findViewById(R.id.activity_book_page_text);
             book_page.setText("Google is your friend.", TextView.BufferType.EDITABLE);

             book_page.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        book_page.setSelection( 9, 15);
                         //book_page.requestFocus();

                    }
               });

             book_page.setOnFocusChangeListener(new OnFocusChangeListener(){
                    @Override
                    public void onFocusChange(View v, boolean hasFocus){
                        if (hasFocus){
                            book_page.setSelection( 9, 15);
                        }
                    }
                });

 <EditText
        android:id="@+id/activity_book_page_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#00000000"
        android:ems="10"
        android:inputType="textMultiLine"
        android:selectAllOnFocus="true" >

        <requestFocus />
    </EditText> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:29:22.870

在 .java 文件中使用这段代码：

```
editText.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        editText.setSelection(0, editText.getText().length() - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:32:50.917

使用 xml：

```
 android:selectAllOnFocus="true" 
```

带代码（选项1）：

```
 yourEditText.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        //((EditText)v).selectAll();
        ((EditText)v).setSelection(startValue, stopValue);
    }
   }); 
```

也可以这样尝试：

调用`EditText.setSelectAllOnFocus(boolean selectAllOnFocus)`以选择焦点上的所有文本。

为您的 EditText 和 onClick 调用设置一个点击监听器`edittext.selectAll();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:59:14.697

```
 editText.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            editText.performLongClick();
        }
    }); 
```

的`EditText`默认长按行为是选择已点击的单词，然后拖动选择标记，因此只需调用`performLongClick()`.`onClick()`

# google-api - 使用超级管理员的 OAuth 令牌访问用户的联系人

> ID：15064824
> 
> 赞同：1
> 
> 时间：2013-02-25T10:27:49.420
> 
> 标签：google-api, google-contacts-api, google-oauth

我知道如果超级管理员授予对应用程序的访问权限，则该应用程序（使用 OAuth）可以访问任何用户（使用该域）的日历。

这同样适用于用户的联系人（不是共享联系人）吗？根据我的测试，我不断收到 403 Forbidden，这意味着这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:19:31.800

您是否正确定义了使用联系人 API 的范围？ [https://developers.google.com/google-apps/contacts/v3/#authorizing_requests_to_the_api_name_service](https://developers.google.com/google-apps/contacts/v3/#authorizing_requests_to_the_api_name_service)

# ruby-on-rails - 如何使表单的正文文本区域预先填写在Rails中？

> ID：15064825
> 
> 赞同：0
> 
> 时间：2013-02-25T10:27:50.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个简单的表格

```
 <div class="form-inputs">
    <%= f.input :title %>
    <%= f.input :body %>
  </div> 
```

现在我希望 textarea 已经预先填充了一些文本（最好是 html），该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:47:53.803

您只需要填写一个值，然后使用它：

```
 <div class="form-inputs">
        <%= f.input :title, :input_html => { :value => "This is title field value." } %>
        <%= f.input :body, :input_html  => { :value => "This is body field value." } %>
      </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:47:32.683

你的问题的细节太少了。方法有一个选项`input`可以指定一个`value`. 但我想说这不是很好的做法。

好的做法是：

*   对于现有记录显示它的内容`body`：它已经有效
*   对于新记录，如果您想要默认`body`文本，最好在创建时指定它 `@rec = Record.new(:body => "default text")`

# jquery - jquery ajax发送带有特殊字符的数据

> ID：15064826
> 
> 赞同：5
> 
> 时间：2013-02-25T10:27:50.580
> 
> 标签：jquery

我写了一个 jquery ajax 代码来发表评论..

```
function PostComment()
{

   $.ajax({
         type :"POST",
         url:PageUrl+'Post_LectureComment',
         data:"{Comment:'"+$('#txt_PostComment').val()+"',LectureID:'"+87+"',CategoryID:'"+2+"',Author_Id:'"+ 78+"' }",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success:SuccessHandler ,  
         });

         function SuccessHandler(data)
         {}
} 
```

当我使用 'like =durgesh'rao 在 txt_PostComment 中发送数据时，它显示错误

**请求负载：{评论：'durgesh'rao'，LectureID：'1250'，CategoryID：'2'，Author_Id：'135'}**

有什么方法可以用' ???

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:42:07.600

我相信您正在尝试构建包含该`'`字符的 JSON 对象。所以要解决这个问题，你首先需要处理字符串`'`

```
function replacequote(text) {
    var newText = "";
    for (var i = 0; i < text.length; i++) {
        if (text[i] == "'") {
            newText += "\\'";
        }
        else
            newText += text[i];
    }
    return newText;
};

function PostComment()
{
   $.ajax({
         type :"POST",
         url:PageUrl+'Post_LectureComment',
         data:"{Comment:'" + replacequote($('#txt_PostComment').val()) + "',LectureID:'"+87+"',CategoryID:'"+2+"',Author_Id:'"+ 78+"' }",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success:SuccessHandler ,  
         });

         function SuccessHandler(data)
         {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:31:04.227

无需使用字符串文字来构建对象。只需创建一个新对象并设置适当的属性。

```
$.ajax({
         type :"POST",
         url:PageUrl+'Post_LectureComment',
         data:{comment: $('#txt_PostComment').val(),lectureID:"87",categoryID:"2",author_Id:"78"},
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success:SuccessHandler  
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:50:55.623

您可以编辑您的查询。
至于你`'`是问题的创造者，在搜索时你可以这样查询：

```
SET ESCAPE "'"
SELECT * FROM x_table WHERE txt_PostComment with ' like "%durgesh'rao%"; 
```

# c++ - C++ 分析和优化

> ID：15064834
> 
> 赞同：3
> 
> 时间：2013-02-25T10:28:04.537
> 
> 标签：c++, optimization, profiling

我的应用程序性能存在一些问题。我在 Stackoverflow 上找到了这个答案： [https ://stackoverflow.com/a/378024/5363](https://stackoverflow.com/a/378024/5363)

我喜欢。我不太明白的一点是代码优化和分析之间的关系是什么。因为显然人们想要分析优化的代码，但同时在优化过程中会丢失很多信息。那么在调试器中运行优化代码并按照引用的答案中的建议闯入它是否可行？

我在 Linux 下使用 CMake 和 gcc，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:39:58.850

一般定律称为**帕累托**定律，[即 80/20 定律](http://en.wikipedia.org/wiki/Pareto_principle)：

*   20%的原因产生80%的后果。

通过分析，您将确定导致应用程序变慢/消耗内存或其他后果的 20% 的最重要原因。如果你解决了 20% 的原因，你将解决 80% 的缓慢/内存消耗等问题......

当然，数字只是数字。只是为了给你它的精神：

*   您必须只关注**真正的主要原因**，以便改进优化，直到您满意为止。

从技术上讲，使用 linux 下的 gcc，您所指的问题的答案是“[我如何分析在 Linux 中运行的 C++ 代码？](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux) ” 简而言之，建议使用：

*   [gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)。
*   [谷歌性能工具](http://code.google.com/p/gperftools/?redir=1)
*   [瓦尔格林德](http://en.wikipedia.org/wiki/Valgrind)
*   [英特尔 VTune](http://en.wikipedia.org/wiki/VTune)
*   [太阳 DTrace](http://en.wikipedia.org/wiki/DTrace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:42:11.763

正如 Schumi 所说，您可以使用 pstack 之类的东西来获取堆栈样本。但是，您真正需要知道的是*为什么*程序会花费采样时间。也许您可以仅从一堆函数名称中弄清楚这一点。如果您还可以看到发生调用的代码行，那就更好了。如果您可以看到参数值和数据上下文，那就更好了。原因是，与您正在寻找“热点”、“慢方法”、“瓶颈”的流行概念相反——即基于测量的视角，寻找最有价值的东西是*正在完成的可以消除*的事情。

换句话说，当您在调试器中停止程序时，*将它正在做的任何事情都视为一个错误*。试着想办法*不做那件事*。然而，在你取另一个样本并看到它在做同样的事情之前，不要这样做——不管你如何描述那件事。现在您知道这需要大量时间。多少时间？没关系 - 修复后您会发现。你知道这是很多。在看到它两次之前你必须采取的样本越少，它就越大。

然后是“放大效应”。在你修复了那个“速度错误”之后，程序将花费更少的时间——但是——这不是唯一的。还有其他的，现在*他们*花费了更多的时间。所以再做一遍。当你完成这个时，如果程序比玩具还大，你可能会惊讶于它的速度有多快。 [*这是 43 倍的加速。*](https://stackoverflow.com/a/927773/23771) [*这是 730 倍的加速。*](http://sourceforge.net/projects/randompausedemo/) [*这是它背后的可怕数学。*](https://scicomp.stackexchange.com/a/2719/1262)

你看，工具的问题是你为采样的便利性付出了代价。由于您将其视为度量，因此您不会专注于代码执行其正在执行的操作的原因-*可疑*的原因。这会导致您错过使代码更快的机会，导致您错过放大效果，导致您在远远没有达到最终可能的加速时停下来。

编辑：为火焰道歉。现在回答你的问题 - 我直到最后才打开编译器优化，因为它可以掩盖更大的问题。然后我尝试做一个打开了优化的构建，但仍然有符号信息，所以调试器可以获得合理的堆栈跟踪并检查变量。当我遇到递减的加速回报时，我可以看到优化器仅通过测量总时间就产生了多大的差异——不需要分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:47:32.397

如果您需要收集堆栈样本，为什么要通过调试器来完成。定期运行 pstack。您可以将每次运行的输出重定向到不同的文件，然后再分析这些文件。通过查看这些文件的调用堆栈，您可能会找出热函数。您不需要调试二进制文件，并且可以在完全优化的二进制文件上执行上述操作。

我更喜欢使用探查器工具来执行上述操作或执行您引用的线程中列出的操作。他们快速查明最热门的函数，您可以通过查看调用者被调用者图来了解调用堆栈。我会花时间了解调用者被调用者堆栈，而不是使用上述方法分析随机堆栈。

# jquery - jQuery UI 克隆的可拖动元素不可拖动

> ID：15064839
> 
> 赞同：0
> 
> 时间：2013-02-25T10:28:18.457
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-clone

我在使用 jQuery UI 和克隆元素时遇到了一个奇怪的问题。尽管 jQuery UI 事件似乎被正确复制，但似乎这些事件仍然引用原始 DOM 对象，而不是克隆的对象。

这个 JS 小提琴显示了这个问题：http: [//jsfiddle.net/XDrC5/](http://jsfiddle.net/XDrC5/)

这是HTML：

```
<button id="clone">Clone</button>

<div id="source">
  <div id="elem"></div>
</div>

<div id="copy">
</div> 
```

和 Javascript：

```
$(document).ready( function() {
    $("#elem").resizable({
        containment:"parent"
    }).draggable({
        containment:"parent"
    });

  $("#clone").on("click", function() {
    var newHTML = $("#source").clone(true);

      $("#copy").html(newHTML.contents());
  });
}); 
```

单击克隆会正确复制下部框中的橙色方块，但尝试拖动新方块会导致原始方块移动。尝试调整新方块的大小根本没有任何作用。

当试图在克隆的元素上调用 jQuery UI 方法时，这会导致更大的问题。例如，`.draggable("destroy");`在克隆之后调用实际上会从原始元素中删除可拖动元素，从而使新元素和旧元素都变为不可移动。

我不确定是否有办法解决这个问题，如果我只是太密集，或者这是一个不可避免的错误。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:56:27.447

我认为作为对 Beetroot-Beetroot 的回应，问题可能是通过这样做，`clone(true)`您正在复制附加到前一个的事件，`elem`这意味着新的元素仍然被告知在`#source`div 内调整大小，尝试不使用`true`，然后将可调整大小的事件重新附加到`#copy`div 中的元素。

我已经更新了 JSFiddle - [http://jsfiddle.net/XDrC5/2/](http://jsfiddle.net/XDrC5/2/)这似乎解决了可拖动的问题。

# php - MySQL 查询返回错误值

> ID：15064840
> 
> 赞同：4
> 
> 时间：2013-02-25T10:28:19.597
> 
> 标签：php, mysql, sql

我正在尝试使用数据库表中的数据制作菜单。但我有一个小问题。我的查询结果返回一个错误的布尔值。

这是我的代码：

```
<?php
class DataBase
{
    protected $dbUser;
    protected $dbPassword;
    protected $dbHost;
    protected $dbName;
    protected $db;

    function __construct()
    {
        $this->dbUser     = 'root';
        $this->dbPassword = '';
        $this->dbHost     = 'localhost';
        $this->dbName     = 'ecommercemakup';
        $this->db = mysqli_connect($this->dbHost, $this->dbUser, $this->dbPassword, $this->dbName) or die('Fatal error!');
    }

    public function getInstance()
    {
        return $this->db;
    }
}
?>

<?php
$db = new DataBase();
$r  = mysqli_query($db->getInstance(), "CALL categories()");
if (mysqli_num_rows($r) > 0) {
    while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
        echo '<li> <a href=' . $row['name'] . '.php>';
        print_r($row['name']);
        echo '</a>
            <ul>';
        $id = intval($row['idCategory']);
        $r1 = mysqli_query($db->getInstance(), "CALL subcategories($id)");
        if (mysqli_num_rows($r1) > 0) {
            while ($row1 = mysqli_fetch_array($r1, MYSQLI_ASSOC)) {
                echo '<li><a href=' . $row1['name'], '.php>';
                print_r($row1['name']);
                echo '</a></li>';
            }
        }
        echo '</ul></li>';
    }
}
?> 
```

第一个查询运行正确，但第二个查询总是返回 false。

这两个程序是这样的：

```
DELIMITER @@
DROP PROCEDURE categories @@
CREATE PROCEDURE ecommercemakup.categories()
BEGIN
    SELECT * FROM categories;
END @@ 
DELIMITER ; 

DELIMITER @@
DROP PROCEDURE subcategories @@
CREATE PROCEDURE ecommercemakup.subcategories
(IN id_Category INT)
BEGIN
    SELECT idSubcategory, idCategory, name FROM subcategories WHERE idCategory = id_Category;
END @@ 
DELIMITER ; 
```

该`categories`表包含 2 个项目：`idCategory`和`name`，并且该`subcategories`表包含 3 个项目`idSubcategory`：`idCategory`和`name`。

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:25:10.340

将变量名称替换为`@id_Category`，名称前缺少@。

在 MySQL 中，@variable 表示用户定义的变量。你可以定义你自己的。

SET @a = '测试'; 选择一个;

不带@ 的变量是系统变量，您无法自行定义。这给您带来了问题，因为您声明变量时没有`@`

希望能帮助到你

参考

[用户定义变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

[系统变量](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html)

# jquery - jquery 使用 $(location) 在新窗口中打开

> ID：15064846
> 
> 赞同：-1
> 
> 时间：2013-02-25T10:28:53.387
> 
> 标签：jquery, hyperlink, click, location

我正在使用此代码在空 div 层上单击后打开链接

```
 $("#portal").click(function () {
     $(location).attr('href', 'http://tafidelvalle.com');
 }); 
```

我需要在新窗口中打开它，但我找不到如何制作它。

我感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:32:12.480

试试下面的代码：

```
window.open("http://tafidelvalle.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:39:12.283

`$(location)`返回`DOM OBJECT`.

如果您已定义`var location = some_selector;`，那么您的代码将获取该 DOM 并设置其`href`属性。

**例子**

```
var location = "a#location";
$(location).attr('href','http://google.com'); 
```

上面的代码所做的是选择 id of 的锚链接，`location`然后`href`为该链接设置属性。

现在您想打开新窗口，然后您可以使用`window.open();`核心 javascript 功能。

# xcode - Xcode 关闭下划线（编辑器）

> ID：15064848
> 
> 赞同：1
> 
> 时间：2013-02-25T10:28:58.827
> 
> 标签：xcode, editor

如何在 Xcode 中关闭下划线？每个空格都是一个下划线。（见截图）

截图： ![在此处输入图像描述](../Images/1d04d02ce7b09932d0220fff694c6b36.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:40:24.143

去`Editor -> Hide Invisibles`

![在此处输入图像描述](../Images/07f4eb062241ac80e452c77a30d562ed.png)

# python - 在 Django 中实现一个 GUI 界面，用于将文件和目录添加到版本控制系统

> ID：15064853
> 
> 赞同：-3
> 
> 时间：2013-02-25T10:29:11.777
> 
> 标签：python, django, version-control

我正在 Django 中实现一个 GUI 界面，用于将文件和目录添加到版本控制系统。我的意思是我会将文件或目录数据传递给 django 视图，并且从视图中我想将这些数据提交到特定的存储库。

到目前为止，我一直在尝试使用 Pyvcs，但我找不到它更合适，因为它可以查看任何特定的回购信息。如果有人有任何想法可以帮助我实现我的目标，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:48:06.510

py-vcs 是你最好的选择（除了在所有版本控制系统的特定 API 之上实现你自己的版本）。

# ios - 以编程方式从 NSCachesDirectory 中删除文件

> ID：15064854
> 
> 赞同：6
> 
> 时间：2013-02-25T10:29:13.700
> 
> 标签：ios, objective-c, cocoa-touch

如果我`NSCachesDirectory`在我的应用程序中以编程方式下载文件，是否也可以以编程方式删除文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:32:25.033

**从 Directory**获取 File 的完整路径可能有很多方法，以下是其中一种。

```
NSArray *myPathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *mainPath    = [myPathList  objectAtIndex:0];

mainPath = [mainPath stringByAppendingPathComponent:DirectoryName]; 
```

这里**mainPath**是文件的完整路径。

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
BOOL fileExists = [fileManager fileExistsAtPath:mainPath];

if (fileExists)
{
     BOOL success = [fileManager removeItemAtPath:mainPath error:&error];
     if (!success) NSLog(@"Error: %@", [error localizedDescription]);

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T10:38:12.950

我认为这个片段应该适合你：

```
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSArray *fileArray = [fileMgr contentsOfDirectoryAtPath:directory error:nil];

for (NSString *filename in fileArray)  {
    [fileMgr removeItemAtPath:[directory stringByAppendingPathComponent:filename] error:NULL];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-09T23:49:45.157

结合 anurag 和 iPatel

我们得到这个最终代码，它将从缓存目录中清除所有内容

```
 NSArray *myPathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *mainPath    = [myPathList  objectAtIndex:0];
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSArray *fileArray = [fileMgr contentsOfDirectoryAtPath:mainPath error:nil];
for (NSString *filename in fileArray)  {
    [fileMgr removeItemAtPath:[mainPath stringByAppendingPathComponent:filename] error:NULL];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:34:43.633

如果您想专门删除`UIWebView`缓存，那么这可能会有所帮助：

```
for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
     if([[cookie domain] isEqualToString:someNSStringUrlDomain]) {
         [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
     }
} 
```

# jquery - jquery从checkboxlist上的选中复选框获取序列号

> ID：15064858
> 
> 赞同：0
> 
> 时间：2013-02-25T10:29:19.487
> 
> 标签：jquery, .net

这是我的代码：

```
$('#CheckBoxList1').change(function () {
                var CHK = document.getElementById("<%=CheckBoxList1.ClientID%>");
                var checkbox = CHK.getElementsByTagName("input");
                if ($.browser.msie) {
                    for (var i = 1; i < checkbox.length; i++) {
                        if (checkbox[i].checked) {
                            markers[i - 1].setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png');
                        }
                        else {
                            markers[i - 1].setIcon('http://maps.google.com/mapfiles/ms/icons/red-dot.png');
                        }

                    }
                }
          });

        }); 
```

在 for 循环中，我从 checkboxlist1 中找到选中的复选框。我正在设置标记颜色，这些名称在 chekboxlist 中被选中。İt 与 for 循环一起工作成功。但是当我选中一个复选框时，我会进行这个过程。我不会使用 for 循环来查找所有选中的复选框。所以我会这样做，当我选中 chekboxlist 上的复选框时，我会得到复选框的索引（序列号）编号.当我得到那个索引号时，我不能使用 for 循环，我可以使用那个索引号处理标记。İ.EI 有一个复选框列表，即它有 5 个复选框 tahats 是 a,b,c,d,e 。例如：当我勾选“e”复选框时，我将获得该复选框索引号为 5，当我勾选“c”复选框时，我将获得该复选框索引号为 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:37:13.450

只需使用 index() 函数。请注意，某些 IE 浏览器可能无法识别 .change() 事件，而是使用 .propertychange ，如下[所示](https://stackoverflow.com/questions/208471/getting-jquery-to-recognise-change-in-ie)

此外，当您仍然使用 document.getElementById 选择元素时，使用 jQuery 有什么意义？

```
$(function() {
    $('#CheckBoxList1 input').change(function() {
        var index = $('#CheckBoxList1 input').index(this);
    });
}); 
```

# android - 在 Android 应用程序中集成日历

> ID：15064864
> 
> 赞同：4
> 
> 时间：2013-02-25T10:29:29.940
> 
> 标签：android, calendar, integration

我正在开发一个需要类似于 Google 日历的提醒的 Android 应用程序。用户应该能够插入新事件。

由于我认为从头开始编写界面太复杂，我想知道是否有办法在我的应用程序中集成任何日历。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:31:59.263

[CalendarView](http://developer.android.com/reference/android/widget/CalendarView.html)可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:32:45.540

这里有两个读/写日历的权限。

```
android.permission.READ_CALENDAR
android.permission.WRITE_CALENDAR 
```

将这些权限放入您的 AndroidManifest.xml。然后，您将能够操作默认日历应用程序使用的内容提供程序。

```
calanderURL = "content://com.android.calendar/calendars";  //Calendar
calanderEventURL = "content://com.android.calendar/events";  //Events
calanderRemiderURL = "content://com.android.calendar/reminders"; //Reminders 
```

有很多教程，如[使用 Android 日历](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)，介绍如何使用日历。

您可以从日历提供程序读取数据并将它们显示在[CalendarView](http://developer.android.com/reference/android/widget/CalendarView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:39:43.687

**Android 3.0 (HoneyComb)**提供普通`CalendarView`启动。

 **也许这个第三方库可以帮助您将日历功能提升到**Android 2.1 (Eclair)**

[https://github.com/SimonVT/android-calendarview](https://github.com/SimonVT/android-calendarview)**

# sqlite - SQLite 中的连接和匿名类型

> ID：15064869
> 
> 赞同：0
> 
> 时间：2013-02-25T10:29:49.283
> 
> 标签：sqlite, windows-8, .net-4.5

我正在尝试在 SQLite 中执行一些 LINQ 语句，但遇到了一些问题。

首先，我正在尝试加入。这是我的代码：

```
var query = from client in db.Table<Client>()
    join address in db.Table<AddressDetail>()
    on client.AddressID equals address.AddressID
    select new
    {   
        ClientID = client.ClientID,
        AddressID = address.AddressID,
        Name = address.Name,
        LastSaveDate = client.LastSaveDate
    }; 
```

这失败了，我收到的错误消息是：不支持加入。

杰出的！！

所以为了解决这个问题，我将我的代码分成 2 个查询，所以这里是更新的代码：

```
var query = db.Table<Client>();

foreach (var client in query)
{
    var subQuery = from address in db.Table<AddressDetail>()
                   where address.AddressID == client.AddressID
                   select new
                   {
                       ClientID = client.ClientID,
                       AddressID = address.AddressID,
                       Name = address.Name,
                       LastSaveDate = client.LastSaveDate
                   };

    foreach (var fullClient in subQuery)
    {
         //Do something here
    }
} 
```

这一切似乎都有效，直到我尝试循环子查询的结果。我收到以下错误：没有为此对象定义无参数构造函数。

那么这是否意味着我不能在 SQLite 中使用连接和匿名类型？

有什么想法可以解决这个问题。

我正在使用 SQLite、.Net 4.5 并正在创建一个 Windows 8 商店应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:01:26.770

你试过这个吗？只需添加`ToList()`到您要加入的表中。

```
var query = from client in db.Table<Client>()
join address in db.Table<AddressDetail>().ToList()
on client.AddressID equals address.AddressID
select new
{   
    ClientID = client.ClientID,
    AddressID = address.AddressID,
    Name = address.Name,
    LastSaveDate = client.LastSaveDate
}; 
```

# php - 是否可以在不使用 iframe 的情况下嵌入 Piwik 小部件？

> ID：15064870
> 
> 赞同：1
> 
> 时间：2013-02-25T10:29:52.603
> 
> 标签：php, codeigniter, matomo

阅读此页面后：http: [//piwik.org/docs/embed-piwik-report/](http://piwik.org/docs/embed-piwik-report/)

我已经学会了使用 iframe 嵌入 Piwik 小部件，但我想知道是否可以在没有 iframe 的情况下使用 PHP 嵌入它们？我正在使用 codeigniter（框架）进行我的 php 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:51:02.070

如果您愿意，您可以通过 Piwik API 创建，以根据您的选择将其拉入构建：http: [//piwik.org/docs/analytics-api/reference/](http://piwik.org/docs/analytics-api/reference/)

# image-processing - 没有双模直方图的图像阈值化中的 Otsu 方法？

> ID：15064877
> 
> 赞同：1
> 
> 时间：2013-02-25T10:30:11.697
> 
> 标签：image-processing

我阅读了 Otsu 的自动执行图像阈值处理的方法。该算法假设要阈值化的图像包含两类像素（双模直方图）。这是绝对的，或者我们可以调整算法，例如我们可以对具有三类或更多像素的图像进行阈值处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:00:46.327

对于较少的数字，例如 3-4 类像素，如果分布分散得很好，您可以重复应用它。

# performance - 与 wsdl Web 服务的连接速度非常慢

> ID：15064878
> 
> 赞同：1
> 
> 时间：2013-02-25T10:30:12.967
> 
> 标签：performance, wsdl, jax-ws

我是 Java 编程新手。我有一个使用 wsdl 服务的 Web 客户端，我可以成功建立连接。我什至可以从 Web 服务获得响应，但问题是连接需要大约 1 分钟到 3 分钟。我使用 wsimport 生成所有客户端存根。有人可以帮助我提高 Web 客户端的性能吗？所有客户端存根均由以下版本的 JAX-WS 生成

/** * 此类由 JAX-WS RI 生成。* JAX-WS RI 2.2.4-b01 * 生成的源版本：2.2 * */

代码：

```
 ChangeRequestServices service = new ChangeRequestServices(); - Huge delay in executing this line.

        port = service.getDefaultEndpoint(); - This actually does the getPort()

        ((BindingProvider)port).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,"<endpoint url>" );
        ((BindingProvider)port).getRequestContext().put(BindingProvider.USERNAME_PROPERTY,"<username>" );
        ((BindingProvider)port).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY,"<password>" );
        ((BindingProvider)port).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true); 
```

提前致谢。

# web-services - 根据 REST 中的资源，在 PUT 操作的 URL 中提供 ID 和资源

> ID：15064879
> 
> 赞同：1
> 
> 时间：2013-02-25T10:30:16.110
> 
> 标签：web-services, http, rest, uri

我们的系统包含许多文档，每个文档可以有 3 个状态，即 A、B 和 C。

**/doc/{docId}/A** - POST 操作创建一个状态为 A 的文档，并为状态 A 生成一个新的 ID。

现在这个状态 A 可以转换为状态 B 或状态 C。现在要定义它，创建的 URL 类似于 **/doc/{docId}/A/{aId}/B** - PUT 操作将从 A 创建新的 B。

**/doc/{docId}/A/{aId}/C** - PUT 操作将从 A 创建新的 C

同样，状态 B 可以转换为状态 C，反之亦然。为了完整地面向 Rest，我们不想使用 RPC，因此不想在 XML 请求中提供状态 B 或 C 的标识。

所以请让我知道是否有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:40:23.670

看来您正在用状态重载 URI。如果它是具有三种状态的单个资源，那么它应该有一个 URI，并且应该使用 PUT 来更改状态（使用 PUT 有效负载）。

# erlang - 在 Erlang 节点上让“每个进程运行直到被阻塞”

> ID：15064887
> 
> 赞同：0
> 
> 时间：2013-02-25T10:30:45.113
> 
> 标签：erlang

（也可以在[Erlang 的邮件列表中](http://erlang.org/pipermail/erlang-questions/2013-February/072574.html)找到。）

是否可以编写一个函数，等待 Erlang 节点上运行的每个进程到达阻塞点，等待消息？

仅当每个进程都在等待尚未发送给它的消息时，该函数才应返回。假设没有进程处于与时间相关的暂停状态（使用 after 子句接收、与计时器相关的操作等）。当然，运行此功能的进程被排除在外。

*显然是错误的答案：*

`erlang:yield/0`：这给了所有其他进程运行的机会，但在它被阻塞之前不一定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:30:45.113

*不是 100% 正确的方法：*

```
only_one_not_waiting() ->
  Running =
    [P || P <- processes(), process_info(P, status) =/= {status, waiting}],
  length(Running) == 1
end.

everyone_blocked() ->
  case only_one_not_waiting() of
    true -> ok;
    false -> everyone_blocked()
  end. 
```

如果最终达到此状态，则忽略计时器，`only_one_not_waiting/0`重复运行直到它返回 true（如所做的那样）应该指示所需的系统状态。`everyone_blocked/0`

但是，我不确定应该对`process_info(P, status)`.

# mysql - 跟踪不同赛季球队/球员的变化

> ID：15064890
> 
> 赞同：0
> 
> 时间：2013-02-25T10:30:48.497
> 
> 标签：mysql, database-design

考虑下表：**赛季、俱乐部、球队**和**球员**

一支球队属于一个俱乐部并且有球员，但是每个赛季俱乐部的球队和那里的球员都可以更换。我希望能够跟踪每个赛季俱乐部/球队/球员的所有变化。

目前我创建这样的关系表：

**season_club** (season_id, club_id)
**season_team_player** (season_id, team_id, player_id)

一个团队直接属于一个俱乐部（为此有一个外键列）。

这是解决这个问题的最佳方式，还是为每个赛季创建一个新俱乐部并将赛季直接存储在**俱乐部**中更好？我正在尝试这样，因为俱乐部数据在赛季之间没有变化，我想跟踪俱乐部的球队/球员的变化，并跟踪个别球员的球队变化。

我希望我的问题有点清楚......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:56:01.440

> 目前我创建这样的关系表：
> 
> **season_club** (season_id, club_id)
> **season_team_player** (season_id, team_id, player_id)
> 
> 一个团队直接属于一个俱乐部（为此有一个外键列）。

这些表格中的第二张对我来说很有意义：连同您的四张主要表格，这应该提供您需要的所有信息：您知道哪些球员在哪个赛季效力于哪个球队。你甚至可以看到在给定的赛季中哪些球队有任何球员，由此得出该赛季存在哪些球队的结论，以及从俱乐部的钥匙中得出哪些俱乐部在该赛季活跃。所以我认为第一个表格没有任何必要，除非您的第二个表格不完整，即您没有现有球队数据的俱乐部，或者您不知道个别球员的俱乐部。

就性能而言，可能需要更多的冗余，但就优雅而言，上述方案以及一堆漂亮的视图应该可以很好地满足您的需求。

> 这是解决这个问题的最佳方式，还是为每个赛季创建一个新俱乐部并将赛季直接存储在**俱乐部**中更好？

我建议不要这样做，除非你想跟踪**俱乐部**数据本身的变化，例如地址的变化或其他什么。如果您无需比较俱乐部名称就可以在不同赛季识别同一俱乐部，我认为这是一个很大的优势。

# php - 直角括号导致我在 html 中的 php 标签过早结束

> ID：15064892
> 
> 赞同：-2
> 
> 时间：2013-02-25T10:30:56.920
> 
> 标签：php, html, windows

如果我尝试一些简单的事情：

```
 <?php echo "<li>test</li>"; ?> 
```

第一个 > 结束我的 php 标记，在我的 html 上显示结果，如下所示：

```
test"; ?> 
```

我见过的每个例子都声称这应该按预期工作，但事实并非如此。我在这里错过了什么吗？

使用 wamp。这段代码位于我打开的 html 文件中，但 localhost/ 其他 php 代码（来自 .php 文件）确实运行，前提是我没有在其中使用 >。如果我在没有 > 的 html 页面中使用 echo，它不会打印任何内容。

在尝试了更多之后，似乎我也无法从 php.ini 得到任何回显或打印到 html 页面上。我只能在 php 页面上打印东西。我不确定这两个问题是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:11:52.647

您的服务器不会将 html 文件作为 php.ini 处理。您可以通过添加将php处理程序添加到html文件的apache配置`AddType application/x-httpd-php .html`中`mime_module`，然后重新启动apache，或者您可以将您的html文件重命名为php，这是更好的恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:57:54.010

您的机器上似乎没有安装 PHP 预处理器。您可以通过创建和运行以下脚本来测试 php 安装：

```
<?php
  phpinfo();
?> 
```

# c# - 如何比较 System.Drawing.Color 和 System.Windows.Media.Color？

> ID：15064894
> 
> 赞同：0
> 
> 时间：2013-02-25T10:30:59.450
> 
> 标签：c#, .net, wpf, winforms

如何测试 a`System.Drawing.Color`和 a是否`System.Windows.Media.Color`描述相同的颜色？

我试过了

```
colour1 == colour2 
```

但我得到一个错误

> 运算符“==”不能应用于“System.Drawing.Color”和“System.Windows.Media.Color”类型的操作数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:39:13.440

您有 2 个选项：

1.  从一种类型转换为另一种类型，这在[此处](https://stackoverflow.com/questions/4104910/system-drawing-color-system-windows-media-color)介绍，然后使用 '==' 运算符。

2.  比较各个组件。由于它们都具有 R、G、B、A 属性作为字节，您可以简单地执行以下操作：

    ```
    bool ColorsEqual (System.Drawing.Color c1, System.Windows.Media.Color c2)
    {
        return c1.R == c2.R && c1.G == c2.G 
            && c1.B == c2.B && c1.A == c2.A;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:38:48.657

由于这两种类型没有`operator==`重载，您可以获取颜色的字符串值或 ARGB 值。

```
System.Drawing.Color c1 = System.Drawing.Color.FromArgb(255,0,0,0);
System.Windows.Media.Color c2 = System.Windows.Media.Color(255,0,0,0);
if(c1.A == c2.A && c1.R == c2.R && ... 
```

看看[这里](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromargb.aspx)和[这里](http://msdn.microsoft.com/en-us/library/system.windows.media.color.fromargb.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:40:46.870

您可以对 System.Drawing.Color 进行扩展方法，将其转换为 System.Windows.Media.Color，然后在 System.Windows.Media.Color 类型上进行比较：

```
public static System.Windows.Media.Color ToMediaColor(this System.Drawing.Color color)
{
    return System.Windows.Media.Color.FromArgb(color.A, color.R, color.G, color.B);
} 
```

# flash - 在 Flash CS6 中测试电影？

> ID：15064896
> 
> 赞同：0
> 
> 时间：2013-02-25T10:31:10.597
> 
> 标签：flash, testing, export, flash-cs6

我正在使用 Flash CS6，当我测试我的电影时，它会像这样导出 -![在此处输入图像描述](../Images/f8f170b336c0cc13c5a9ee018ce0896e.png)

然后电影像这样弹出![在此处输入图像描述](../Images/a0245c88a5e96f65097b5b8db2fc96b9.png) 这是所有预期的行为。但我想同时打开多部这样的电影。我可以打开同一部电影或 swf 的多个实例吗？请注意，由于沙盒安全违规警告，我不想发布到 swf 并打开多个 swf。我想在flash cs6内测试。

我想这样做的原因是因为我正在使用 smartfox 服务器在我的游戏中实现多人游戏功能，并且想测试两个不同的玩家玩。

我知道我可以使用 localhost 来防止违反安全沙箱，但是否可以在 Flash 中做到这一点？我可以同时打开测试影片的多个实例吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:46:01.753

尝试在此处添加`localhost`到您信任的位置：http:
[//www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

然后您应该能够测试您的 SWF。

# jquery - 将 JSON 发送到控制器操作时面临问题

> ID：15064898
> 
> 赞同：0
> 
> 时间：2013-02-25T10:31:19.217
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-3

我正在尝试将 Json 数据发送到我的控制器操作。

**jQuery**

```
function SaveConnection() {
    debugger;
    var CardConnection = {
        ConnectionDetails: []
    };

    var allConn = jsPlumb.getAllConnections();
    var length = allConn["green dot"].length;
    for (var i = 0; i < length; i++) {
        CardConnection.ConnectionDetails.push({
            "CardIDFrom": allConn["green dot"][i].sourceId,
            "CardIDTo": allConn["green dot"][i].targetId
        });
    }

    var CardDetails = $('#CardDetails');
    var url = CardDetails.attr('save-data');
    $.ajax({
        url: url,
        data: JSON.stringify(CardConnection),
        type: 'POST',
        contentType: 'application/json, charset=utf-8',
        dataType: 'json'
    });
    return false;
} 
```

**控制器动作**

```
public ActionResult SaveConnections(List<CardConnection> ConnectionList)
{
    return Json(ConnectionList);
} 
```

问题是 - 它始终在行动参数中显示为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:46:37.627

变量应该是这样的

```
var CardConnection = {
        ConnectionList: []
    }; 
```

不应该是这样的

```
var CardConnection = {
        ConnectionDetails: []
    }; 
```

为什么 ？

在动作参数中，变量名称是`ConnectionList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:58:06.740

我遇到了类似的问题。解决的办法是告诉iis是json的mime类型，因为默认不能处理。

添加 `<staticContent> <mimeMap fileExtension=".json" mimeType="application/json" /> </staticContent>`

到 web.config 作为 system.webServer 的子级。

# c++ - 检查蓝牙套接字中缓冲区的状态

> ID：15064901
> 
> 赞同：0
> 
> 时间：2013-02-25T10:31:36.170
> 
> 标签：c++, linux, bluetooth, buffer, rfcomm

我创建了一个套接字来从蓝牙中的 rfcomm 套接字接收数据。

一件包裹收到的包裹有 10 个号码，但有时我会收到单独的部分。这取决于我选择获取数据的频率。例如，如果我选择`1000Hz`我会得到所有信息。我正在使用 a `QTimer`，因为它得到一个 int ，因为间隔 1000 ms / 1000 Hz 等于一个 int，这没关系。但是，如果除法不是 int，那么 `QTimer`它将对其进行舍入，并且它不会及时重新启动函数以获取所有包，因为它不同步。

我用这个，

```
sock = socket (AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);

numb = read (sock, buf, 10); 
```

如果 numb 等于 10，则包没问题，所以我处理它。如果没有，则只收到一部分。然后那部分就丢失了。

有没有办法只检查缓冲区是否已满而不是已经读取它？即如果状态已满，则读取它，如果没有，则将其留给下一次迭代。

我不是这方面的专家，但国旗会`MSG_EOR`帮助我吗？我的数据是打包的。

我应该`read`改成`recv`? `recv`获取一个套接字作为参数。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:29:56.200

> 有没有办法只检查缓冲区是否已满而不是已经读取它？

您可以尝试使用带有标志 MSG_PEEK的*recv 。*使用此标志*recv*以相同的方式工作，但它不会从队列中删除输入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:28:17.067

好吧，我自己解决了。

作为每个包`10 bytes`，我将`buffer`大小更改为大小，`frequency * 10 bytes`以便它可以接收一秒的采集，因此我可以`QTimer`每隔一秒获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:21:13.953

解决我的问题的另一种方法是重放`read()`函数`recv()`并添加 flag `MSG_WAITALL`。

# ios - Appixia 中的主题项目变化选择

> ID：15064902
> 
> 赞同：0
> 
> 时间：2013-02-25T10:31:45.467
> 
> 标签：ios, appixia

当一个项目有变化，例如大小/颜色，并且您选择一个变化时，屏幕将被默认的蓝色/灰色项目替换，其中包含选择框，包括标题栏。有没有办法正确地为这个实体设置主题以匹配应用程序的其余部分？

如果您有“更多”菜单部分，则项目列表中的 onpress 事件也是如此。它将是蓝色的 onpress 颜色，表示已选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:46:09.550

您描述的模态屏幕（变体选择列表或“更多..”选项卡列表）是默认的 iOS 表格屏幕，目前无法主题化（Mobile Engine 5）。那里出现的颜色与您在默认 iOS 设置应用程序中的颜色非常相似。

如果您希望能够对其进行编辑，请在[Appixia Jira](https://appixia.atlassian.net)中提交功能请求。

引擎支持的只是标题栏颜色的主题。这样，您可以在整个应用程序中使用一致的标题栏颜色（以防您更改了默认颜色）。虽然引擎支持，但 Appixia Dashboard 仍然不支持输入这些颜色。这方面存在一个[问题](https://appixia.atlassian.net/browse/DASH-25)，欢迎您关注它，看看它何时实施。

# python - Django 应用程序 uWSGI 有错误的 datetime.today() 结果，显示开始日期

> ID：15064908
> 
> 赞同：0
> 
> 时间：2013-02-25T10:32:10.683
> 
> 标签：python, django, uwsgi

我正在尝试在 NGINX 和 uWSGI 后面运行 Django 应用程序，但是`datetime.today()`从今天开始安装 uWSGI 服务器时返回日期时间时遇到问题。该应用程序的配置如下：

```
    <uwsgi>
     <plugin>python</plugin>
       <socket>127.0.0.1:3030</socket>
       <chdir>/opt/ETS/bin</chdir>
       <pythonpath>..</pythonpath>
       <模块>实例</模块>
     </uwsgi>

```

uWSGI 的设置是默认设置，没有任何更改。

我怎样才能让日期时间再次工作？

澄清：在访问 url 时在此函数中进行调用

```
def create_file_header(name, ext):
    return {'Content-Disposition': 'attachment; filename=%s-%s.%s' % (name, datetime.date.today(), ext) } 
```

呼叫来自 urlpatten：

```
(r'^loading_details/basic2/$', ExpandedResource(ReadLoadingDetailHandler, authentication=authentication,
                                               headers=create_file_header('loading-details', 'csv')),
 FORMAT_CSV, "api_loading_details_basic_auth"),

```

它在使用 Apache WSGI 托管在同一台服务器上时工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:33:45.587

如果你存储`datetime.date.today()`在一个全局模块中，它只会在服务器启动时执行*一次。*这不是服务器问题，而是您的代码有问题。

如果您需要显示*今天日期*的结果，则需要`datetime.date.today()`在需要今天日期时调用可调用对象，而不是在启动时。

即使您要调用`today()`一个函数，如果该函数本身仅在模块加载时调用，它仍然只执行一次。

URL 模式只生成*一次*。`headers`每次访问 URL 时都不会执行关键字参数，而只会在模块加载时执行。您需要将创建 tha 标头移动到视图本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:56:28.850

您确定不是错误的时区而不是 uWSGI 启动时间吗？uWSGI 不涉及 python 内部（除非在某些领域明确要求）。

# asp.net - Datagrid TotalRows 和 Databind() 的问题

> ID：15064915
> 
> 赞同：1
> 
> 时间：2013-02-25T10:32:44.177
> 
> 标签：asp.net, c#-4.0, .net-4.0, datagrid

我对以下代码有疑问

```
e.TotalRows = data.Count(); //getting exception
Jqgrid1.DataSource = data.Skip((e.NewPageIndex - 1) * Jqgrid1.PagerSettings.PageSize).Take(Jqgrid1.PagerSettings.PageSize);
Jqgrid1.DataBind(); 
```

**浏览器上的错误描述是**

```
The full-text query parameter for Fulltext Query String is not valid. 
```

**描述：**

```
 An unhandled exception occurred during the execution of the current web request. 
 Please review the stack trace for more information about the error and where it 
 originated in the code. 
```

**异常详情：**

```
 System.Data.SqlClient.SqlException: 
   The full-text query parameter for Fulltext Query String is not valid. 
```

我正在使用`.Net 4`.
我的连接字符串很好，因为我可以以**管理员**身份登录并查看其他页面。

有谁知道如何在 asp.net 中实现这一点？

# java - MySQL自动截断不适用于c3p0

> ID：15064917
> 
> 赞同：0
> 
> 时间：2013-02-25T10:32:48.790
> 
> 标签：java, mysql, c3p0

我有一张桌子。

```
mysql> SELECT @@GLOBAL.sql_mode; 
```

...返回空。

```
mysql> create table testtable ( name varbinary(5));

mysql> insert into testtable values('hellowhowareyoudsafafas');

Query OK, 1 row affected, 1 warning (0.00 sec) 
```

数据被插入到表中。但是如果我使用 c3p0 的`ComboPoolDataSource`，我会得到异常`com.mysql.jdbc.MysqlDataTruncation`。

由于我没有在 MySQL 5.1 上设置 MySQL 严格模式，我希望数据存储在表中。我应该怎么做才能允许通过 c3p0 自动截断。

=====好的，我做到了，但是有没有更简洁的方法======

```
PreparedStatement ps1 =  connection.prepareStatement("SELECT @@sql_mode");
    ResultSet rs = ps1.executeQuery();
    String originalSqlMode = "";
    if(rs.next()) {
        originalSqlMode = rs.getString(1);
        System.out.println(originalSqlMode);
    }
    String newSqlMode = originalSqlMode.replace("STRICT_ALL_TABLES", "").replace("STRICT_TRANS_TABLES", "").replace(",,", ",");
    ps1 = connection.prepareStatement("SET SESSION sql_mode=?");
    ps1.setString(1, newSqlMode);
    ps1.execute();
    PreparedStatement ps2 = connection.prepareStatement("insert into testtable values (?)");
    ps2.setString(1, "indianpeople");
    ps2.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:23:43.553

因此，如果您控制数据库，可能最简单的解决方案是使用 mysqld 上的 --sql-mode 开关以您想要的模式执行 MySQL。见[http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html)

如果这不是一个选项，您可以在 c3p0 ConnectionCustomizer 中使用您的模式更改代码。看起来“会话”被定义为连接的生命周期，因此您应该能够覆盖 AbstractConnectionCustomizer 的 onAcquire 方法。当从数据库获取连接时，该选项将只设置一次。请参阅[http://www.mchange.com/projects/c3p0/#connection_customizers](http://www.mchange.com/projects/c3p0/#connection_customizers)

祝你好运！

# c++ - 功能是必需的

> ID：15064919
> 
> 赞同：2
> 
> 时间：2013-02-25T10:32:50.313
> 
> 标签：c++, c++11

我的问题与特定问题无关。而是指编程风格。
在我读过的所有文章和书籍中都说如果你真的不需要，就不应该使用全局变量。因此，我更喜欢在全局空间中使用#define而不是const变量类型。但是#defines有一个可怕的缺陷不能放在命名空间中。

我经常希望 c++ 具有允许此类行为的功能，例如命名空间中的#define。

例子：

```
namespace Space
{
replace type variable = constructor(args);
replace type2 variable2(args);
}

void function(type variable);

int main()
{
    function(Space::variable);
} 
```

其中“替换”是该功能的标识符。并且这种类型的变量必须用他的值编译时间替换。

我的问题：
1）人们如何在不使用全局常量的情况下实现美观清晰的代码
2）我如何向 c++ 标准提出这个想法（可选）
3）这个想法的缺点在哪里（可选）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T10:37:36.113

> 1）人们如何在不使用全局常量的情况下实现美观清晰的代码

只需使用全局常量。宏很烂。

> 2）我如何向 C++ 标准提出这个想法（可选）

不。已经有一个更好的[提议](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1062.pdf)被拒绝了。

> 3）想法的缺点在哪里（可选）

宏很烂。不要像这样使用它们，那么您就不需要更改标准。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T10:56:26.793

您将针对全局共享*状态*的一般规则误认为针对全局*变量*的规则。由于常量是不可变的，它们不构成状态，并且使用起来非常安全。相反，规则应该是所有全局变量*都应该是`const`*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:36:02.753

*   全球`const`比`#define`. `#define`不受监管`namespace`并且已知会导致晦涩的问题（尽管其中大多数是由*类似函数的*宏引起的）。
*   最好的事情`const`是**它受命名空间的约束**（正如你提到的）。

我经常使用：

```
class SomeClass
{
  public:
    const static int STATIC_VALUE = 3;
};
const int SomeClass::STATIC_VALUE;//definition 
```

# asp.net - 在三个 dll 上，mvc 中的 ActionFilter 中的匹配顺序不匹配

> ID：15064922
> 
> 赞同：1
> 
> 时间：2013-02-25T10:32:54.537
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, action-filter

我有三个命名空间，其中我有三个不同的单独的 Action Filter Providers 用于检测控制器和 Action 方法，例如：

1.  命名空间 1-ActionFilterProvider1-ActionFilter1
2.  命名空间 2-ActionFilterProvider2-ActionFilter2
3.  命名空间 3-ActionFilterProvider3-ActionFilter3

所有动作过滤器的顺序都是一样的。

我的问题是当我打电话时`ActionFilterProvider1`应该`ActionFilter1`打电话，但不是打电话和打电话`ActionFilter3`。

当我为它们设置不同的顺序时，总是调用最高的顺序。

我该如何解决这个问题？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:55:38.327

创建单个实例而不是 IOC 容器。

# couchdb - CouchDb 中跨数据库的链接文档

> ID：15064923
> 
> 赞同：2
> 
> 时间：2013-02-25T10:33:09.580
> 
> 标签：couchdb

我一直在阅读CouchDb[文档](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents)中的链接文档，它看起来很好。

但是是否可以在数据库 A 中编写一个从数据库 B 发出文档的视图？我需要它，因为我们在不同的数据库中存储了不同的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:39:11.813

不，那行不通。您应该将不同但相关的类型存储在同一个数据库中。

# java - SimpleDateFormat 和解析：解析不会因错误的输入字符串日期而失败

> ID：15064925
> 
> 赞同：2
> 
> 时间：2013-02-25T10:33:36.847
> 
> 标签：java, parsing, date, date-format, simpledateformat

我在用着

```
java.util.Date date;
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
try {
  date = sdf.parse(inputString);
} catch (ParseException e) {
  e.printStackTrace();
} 
```

其中`inputString`是`dd/MM/yyyy`格式中的字符串。

例如，如果`inputString`是 40/02/2013，我会得到一个错误，而不是 parse 方法返回日期 2013 年 3 月 12 日（2013 年 3 月 12 日）。我在错什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T10:37:06.903

设置[宽大处理位](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)：

```
public void setLenient(boolean lenient) 
```

> 指定日期/时间解析是否宽松。通过宽松的解析，解析器可以使用启发式方法来解释不精确匹配该对象格式的输入。使用严格的解析，输入必须匹配这个对象的格式。

以下代码：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;

public class Tester {
    public static void main(String[] argv) {
        java.util.Date date;
        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");

        // Lenient
        try {
            date = sdf.parse("40/02/2013");
            System.out.println("Lenient date is :                  "+date);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        // Rigorous
        sdf.setLenient(false);

        try {
            date = sdf.parse("40/02/2013");
            System.out.println("Rigorous date (won't be printed!): "+date);
        } catch (ParseException e) {
            e.printStackTrace();
        }

    }
} 
```

给出：

```
Lenient date is :                  Tue Mar 12 00:00:00 IST 2013
java.text.ParseException: Unparseable date: "40/02/2013"
    at java.text.DateFormat.parse(DateFormat.java:357) 
```

## 笔记

1.  当对 Java 类有疑问时，阅读类文档应该是您的第一步。我不知道你的问题的答案，我只是用谷歌搜索了这个课程，点击了解析方法链接并注意到了**See Also**部分。**您应该始终先搜索，并在问题中提及您的发现**
2.  [宽大的日期在绕过审查](http://www.nytimes.com/2011/06/24/opinion/global/24iht-june24-ihtmag-hua-28.html?pagewanted=all&_r=0)和[激发孩子的想象力](http://www.robv.myzen.co.uk/firegiver/?p=353)方面有着令人尊敬的历史。

# button - 更改按钮的背景

> ID：15064930
> 
> 赞同：0
> 
> 时间：2013-02-25T10:33:50.737
> 
> 标签：button, configuration

此方法用于项目中，它应该在列表中显示项目的所有布局，当您单击其中一个时，它会显示它的按钮，当您单击其中一个按钮时，它会显示所有可绘制对象res，然后是我需要您帮助的部分：当您单击其中一个可绘制对象时，它必须显示您选择的布局以及您选择的按钮的新背景（您点击的可绘制对象）

```
public void myclass{
        Class<drawable> cls = R.drawable.class;
        fieldlist = cls.getDeclaredFields();
        setContentView(layoutIds[position]);
        allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
        //allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
        //String tabname=allButtonsInLayout.get(position).getResources().getResourceEntryName(position);
        Toast.makeText(this, "" + allButtonsInLayout.size(), Toast.LENGTH_SHORT).show();
        int size=allButtonsInLayout.size();

        String[] tab_s = new String [size];
            cls = R.drawable.class;
        fieldlist = cls.getDeclaredFields();

        for (java.lang.reflect.Field fld : fieldlist) {
            int i=0;
            for(    i=0;i<allButtonsInLayout.size();i++){

                try {
                                        setContentView(R.layout.listallbuttons);
                    final ListView listView1 = (ListView) findViewById(R.id.listViewallbuttons);
                    drawableId = fld .getInt(null);
                    String s = fld.getName();
                    Log.v("tagllll", "msg" + s);
                                     if((k<=i)) {

                        tab_s[k++]=s;
                    }
                    else{
                        size++;

                        String[]temp=new String[size];

                        for (int f=0;f<tab_s.length;f++){
                            temp[f]=tab_s[f];

                        }
                        tab_s=temp;

                        tab_s[k++]=s;

                    }

            for (int k1=0;k1<tab_s.length;k1++){
                     //int j=allButtonsInLayout.size();

                      if (k1%allButtonsInLayout.size()!=0){
                      tab_s[k1]="null";

                      }

                  }
                     ArrayList<String> wordList = convertStringArrayToArraylist(tab_s);
                     int jk=0;
                    while ( jk<size){
                     wordList.remove("null");
                     jk++;
                     }

                    drawableId--;
                    allButtonsInLayout.get(i).setBackgroundResource(drawableId);
                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            android.R.layout.simple_list_item_1, android.R.id.text1,wordList);

                    listView1.setAdapter(adapter);

                    listView1.setOnItemClickListener(new OnItemClickListener(){

                    @Override
                        public void onItemClick(AdapterView<?> arg0, View arg1,
                                int arg2, long arg3) {
                                     **that's the part where i am lost i need to show the chosen layout with the clicked button with a new background(the one i choosed**

                                  }

                    });

                                  }
                catch(Exception e){

                    e.getMessage();

                }

            }

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:11:06.663

我只需要使最终可变位置

listView1.setOnItemClickListener(new OnItemClickListener(){

```
 @Override
                            public void onItemClick(AdapterView<?> arg0, View arg1,
                                    int arg2, long arg3) {

    **setContentView(layoutid[position]**

                                      }

                        }); 
```

# asp.net-mvc - ServiceStack.Factor 在其模块列表中有一个错误模块“ManagedPipelineHandler”

> ID：15064932
> 
> 赞同：5
> 
> 时间：2013-02-25T10:33:56.063
> 
> 标签：asp.net-mvc, sharepoint, servicestack

我已经使用 ServiceStack 编写了一个 API 来从我的 SharePoint 文档库中检索文档，并且我正在使用 MVC 来输出结果。

但是，当我尝试运行我的应用程序时，我收到一个 HTTP 错误：

> 500.21 ServiceStack.Factor 在其模块列表错误中有一个坏模块“ManagedPipelineHandler”

我在 IIS 中以经典模式运行我的应用程序，因为我需要使用模拟来对我的 SharePoint 服务器进行身份验证。

在经典模式下使用 ServiceStack 似乎有困难。

如何解决此错误？

我希望这是有道理的。

任何帮助将不胜感激

这是我的配置：

```
<system.webServer>
            <modules runAllManagedModulesForAllRequests="true" />
            <validation validateIntegratedModeConfiguration="false" />
            <handlers>
                <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="classicMode" resourceType="Unspecified" allowPathInfo="true" />
            </handlers>
        </system.webServer> 
```

更新：

在我的开发机器上以不同用户身份运行我的应用程序工作正常问题似乎是 IIS 和 ASP.NET 开发服务器之间的差异

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:50:28.533

我不认为经典模式可以处理路由配置。如此处所述 - [http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs) - 您确实需要执行其他在经典模式下使用 IIS 7.0 或使用映射到 ASP.NET 框架（aspx、axd、ashx）的文件扩展名时的配置。

我能够使用以下配置获得针对 IIS 7 的经典模式

web.config（部分并使用 preCondition="integratedMode"）：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
        <add path="servicestack*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" 
             verb="*" preCondition="integratedMode" />
    </handlers>
</system.webServer> 
```

我在路由中添加了 .aspx 以访问 ASP.NET（我想您也可以使用上面链接中列出的其他解决方案）

```
Routes
.Add<Hello>("/hello.aspx")
.Add<Hello>("/hello.aspx/{Name}"); 
```

我可以提出要求`http://localhost/hello.aspx and http://localhost/hello.aspx?name=Test`

**更新 1**

事实证明，`<system.webServer>`在经典模式下运行时，我可以删除所有 IIS 7 ( ) 元素。我的整个 web.config 如下。您的元素的**路径**属性是什么？**也许您因为路径**`<httpHandlers>`不同而得到 404 ？

 **```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <httpHandlers>
            <add path="servicestack*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
        </httpHandlers>
        <compilation debug="true"/>
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
    </system.webServer>
</configuration> 
```

评论答案：

**因此，这在功能上是否等同于您的示例中的 path="api*" ？**

不。见这里：http: [//msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.100%29.aspx)看看这里 的第 2 节：[http ://www.servicestack.net/ ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)元素具有自定义路径的`<httpHandler>`路径属性。

此外，在 Visual Studio 中使用 IIS Express 作为开发服务器。您应该能够模拟标准开发服务器中不会​​出现的 IIS 7 经典模式问题。[http://www.microsoft.com/web/gallery/install.aspx?appid=IISExpress](http://www.microsoft.com/web/gallery/install.aspx?appid=IISExpress)**

# r - lapply 的问题

> ID：15064933
> 
> 赞同：-1
> 
> 时间：2013-02-25T10:33:57.763
> 
> 标签：r

在 lapply 内但在其外打印 data.frame 的值不会保留这些值。

```
lapply(names(RFEresults), function(x)
   {
     feats <- extractFeatures(RFEresults[[x]])
     featurestat[which(featurestat[, 1]==x),rownames(feats)] <- feats$time.choosen
     print(featurestat[1, ])
   })

print(featurestat[1, ]) 
```

lapply 不保留值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:55:03.283

尝试这个：

```
#assign result of the lapply loop to an object
res <- lapply(names(RFEresults), function(x)
   {
     feats <- extractFeatures(RFEresults[[x]])
     featurestat[which(featurestat[, 1]==x),rownames(feats)] <- feats$time.choosen
     featurestat #return value of the function
   })

#now you have the results of each iteration in a list
#and can access them using
print(res[[1]])
print(res[[2]])
#... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:04:53.267

我不知道它是否是犹太洁食，但这应该可以：

```
 lapply(names(RFEresults), function(x)
 {
    feats <- extractFeatures(RFEresults[[x]])
    featurestat[which(featurestat[, 1]==x),rownames(feats)] <<- feats$time.choosen
    print(featurestat[1, ])
 }) 
```

# php - 如何使来自 JSON.stringify 的 JSON 数据可被 PHP 访问

> ID：15064935
> 
> 赞同：1
> 
> 时间：2013-02-25T10:34:06.520
> 
> 标签：php, jquery, ajax, json, post

好的，所以我需要 PHP 来运行一堆由 javascript 动态生成的 URL。到目前为止，我使用 PHP 获取数据的唯一经验是使用网站的 URL，该 URL 可以通过 API 直接获得 JSON 数据。

因此，在经历了各种痛苦的数小时后，我终于得到了我的数据，我拥有完美 JSON 语法的 URL 和 id（感谢 JSON.stringify()！）。现在，我真的很想将 PHP 指向一个 url 以便开始使用这个 JSON....但是如何？！

我很犹豫要不要发布这个，但如果能稍微推动一下正确的方向，将不胜感激。从我现在看到的情况来看，似乎我可能需要更多地研究以某种方式将这些数据发布到我的服务器？我应该研究 AJAX 吗？

同样，我知道这是一个真正的初学者问题，所以我更多地寻找正确方向的轻微推动，而不是给我一个我需要使用的代码块。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:38:41.357

您需要做的有两个部分：

1.  将 JSON 发送到服务器。

2.  将 JSON 解码为 PHP“关联数组”。

第一部分可以通过提交表单或使用 ajax 发送`POST`到服务器来完成。~~如果你不使用任何库，你会使用[`XMLHttpRequest`](http://www.w3.org/TR/XMLHttpRequest/)它，但是所有主要的 JavaScript 库都有方便的函数来使它更容易。由于将 JSON 字符串发送到服务器的最简单方法是使用标准的多部分表单数据编码，因此请务必使用`encodeURIComponent`. 例如：~~

 ~~```
var xhr = new XMLHttpRequest(); // Older browers may need some special handling when creating the object
xhr.open("POST", "/path/to/your/page");
xhr.send("jsondata=" + encodeURIComponent(yourJsonString)); 
```~~  ~~既然您说您使用的是 jQuery，您可以使用[`ajax`](http://api.jquery.com/jQuery.ajax/)将数据发布到服务器：

```
$.ajax({
    url:     "/path/to/your/page.php",
    type:    "POST",
    data:    {jsondata: yourJsonString},
    success: function(data) {
        // Handle successful post here, use `data` if your PHP
        // page sends a reply
    },
    error:   function() {
        // Handle error here
    }
}); 
```

第二部分（接收 JSON 并对其进行解码）是通过接受 POST 变量（`jsondata`在上面）并通过[`json_decode`](http://uk3.php.net/manual/en/function.json-decode.php).~~

# sql - 查询以仅检索具有最大 ID 的行

> ID：15064936
> 
> 赞同：0
> 
> 时间：2013-02-25T10:34:16.040
> 
> 标签：sql, tsql, greatest-n-per-group

我想编写一个查询以仅返回每个 documentID 的 PeriodID 为 BIGGEST 的行，例如：

```
Table1: DOCUMENT
DocumentID  ItemName
-------------------------
1           Doc1
1           Doc1    
1           Doc1
2           Doc2
3           Doc3

Table2: DOC_PERIOD
PeriodID    StartDate   EndDate    DocumentID
----------------------------------------------------
20          1/1/2001    2/2/2002    1
30          2/1/2001    2/3/2012    1   
40          3/2/2012    8/5/2012    1   
25          3/2/2012    8/5/2012    2   
35          3/2/2012    8/5/2012    2   
45          3/2/2012    8/5/2012    3   

EXPECTED OUTPUT
DocumentID  ItemName    PeriodID    StartDate   EndDate
--------------------------------------------------------------------------
1           Doc1        40          3/2/2012    8/5/2012        
2           Doc2        35          3/2/2012    8/5/2012        
3           Doc3        45          3/2/2012    8/5/2012        

SELECT * FROM DOCUMENT
INNER JOIN DOC_PERIOD ON DOCUMENT.DocumentID = DOC_PERIOD.DocumentID
-- SCRIPT TO GET THE MAX PERIODID HERE 
```

我的查询应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:04:30.330

您没有指定您使用的 RDBMS，但如果您的数据库支持它，您可以使用它[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来获取结果：

```
select DocumentId,
    ItemName,
    PeriodId,
    StartDate,
    EndDate
from
(
    select d.DocumentId,
        d.ItemName,
        dp.PeriodId,
        dp.StartDate,
        dp.EndDate,
        ROW_NUMBER() over(partition by d.documentid order by dp.periodid desc) rn
    from dbo.document d
    inner join dbo.doc_period dp
        on d.DocumentId = dp.DocumentId
) src
where rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:46:37.063

试试下面的查询......它会帮助你......

```
SELECT ts.DocumentID,ts.ItemName,ts.PeriodID,tp.StartDate,tp.EndDate 
FROM
(SELECT DOCUMENT.DocumentID ,DOCUMENT.ItemName ,MAX(PeriodID) PeriodID 
FROM DOCUMENT
INNER JOIN 
DOC_PERIOD ON 
DOCUMENT.DocumentID = DOC_PERIOD.DocumentID
group by DOCUMENT.DocumentID ,DOCUMENT.ItemName) ts

INNER JOIN

(SELECT DocumentID, Periodid,StartDate,EndDate from DOC_PERIOD) tp

ON ts.periodId = tp.periodID 
```

# c# - 无法在 C# 中访问超类的属性

> ID：15064937
> 
> 赞同：1
> 
> 时间：2013-02-25T10:34:21.707
> 
> 标签：c#, subclass, perspectivecamera

我是 C# 新手，实际上我正在创建 PerspectiveCamera 的子类

```
class VCamera : PerspectiveCamera
{

    private double m_AngleRadianX;
    private double m_AngleRadianZ;

    public VCamera()
    {
        m_AngleRadianX = 0.0;
        m_AngleRadianZ = 0.0;
        LookDirection = new Vector3D();          
    }
} 
```

我的问题是我无法访问 LookDirection，它是 PerspectiveCamera 的公共属性。 [http://msdn.microsoft.com/en-US/library/system.windows.media.media3d.perspectivecamera.aspx](http://msdn.microsoft.com/en-US/library/system.windows.media.media3d.perspectivecamera.aspx)

是不是因为 LookDirection 继承自 ProjectionCamera！？我不明白...

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:45:00.593

这是因为`PerspectiveCamera`是`sealed`——你不能从中得到。在您编译之前，VS 不会给出非常有用的错误。

# matrix - 如何在 Pharo Smalltalk 中与雅典/开罗进行透视转换

> ID：15064938
> 
> 赞同：7
> 
> 时间：2013-02-25T10:34:23.537
> 
> 标签：matrix, transformation, smalltalk, cairo, pharo

我在 Pharo Smalltalk 的雅典/开罗发现了仿射变换功能（旋转、剪切、平移、缩放）。

我正在寻找透视变换。这可能吗？至少在 Cairo API 中似乎没有方便的方法。

![透视变换](../Images/7c141aba9c7863ecdc723d345c6b69bf.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:04:45.040

There is no perspective transformation, because matrices used in computation is 2x3 affine matrices, which cannot produce such transformation (no combination of scale/rotation on 2-D coordinate space can produce such result). OpenGL uses full 4x4 matrix for coordinate transformations (well, usually it is 3x3 + translation column), but it is enough to create transformations like perspective projection.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:04:44.990

我也一直对这种转变很感兴趣。

不仅在 Pharo 中，还有其他平台，如 Java (Java2D) 或 HTML5 画布。

到目前为止，我的发现指出这似乎是不可能的。

似乎这些库根本没有考虑到 3D 或 3D 支持。我到处找我的两个建议主要是：

*   这应该使用 OpenGL 来完成
*   在 Cairo/Java2D/canvas 之上实现转换

我无意听起来消极，关闭想分享我的搜索结果，也许可以节省你一些时间。

# html - 如何在 div 框上应用从插图到外框阴影的 web 过渡？

> ID：15064940
> 
> 赞同：6
> 
> 时间：2013-02-25T10:34:24.567
> 
> 标签：html, web, css

我正在尝试处理从插入框阴影开始到外框阴影结束的网络过渡。下面的 jsfiddle 显示了示例。问题是正常插入到无框阴影 web 转换工作，但插入到外部不起作用。

[http://jsfiddle.net/xq4qc/](http://jsfiddle.net/xq4qc/)

**HTML**

```
<div class="greyrow"> 
    good transition
    </div>
<br/>
<br/>
<div class="whiterow"> 
    no transition
    </div> 
```

**CSS**

```
.greyrow{
height:100px;
width:250px;
padding:10px;
border:1px solid #CCCCCC;
margin-bottom: 10px;
-moz-box-shadow: inset 0 0 10px #aaa;
-webkit-box-shadow: inset 0 0 10px #aaa;
box-shadow: inner 0 0 10px #aaa;
}

.greyrow:hover{
-moz-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
-webkit-transition: -webkit-box-shadow 1s;
    -moz-transition: -moz-box-shadow 1s;
    -o-transition: -o-box-shadow 1s;
    transition: box-shadow 1s;

}

.whiterow{
height:100px;
width:250px;
padding:10px;
border:1px solid #CCCCCC;
margin-bottom: 10px;
-moz-box-shadow: inset 0 0 10px #aaa;
-webkit-box-shadow: inset 0 0 10px #aaa;
box-shadow: inner 0 0 10px #aaa;
}

.whiterow:hover{

-moz-box-shadow: 0 0 10px #aaa;
-webkit-box-shadow: 0 0 10px #aaa;
box-shadow: 0 0 10px #aaa;
-webkit-transition: -webkit-box-shadow 2s;
    -moz-transition: -moz-box-shadow 2s;
    -o-transition: -o-box-shadow 2s;
    transition: box-shadow 2s;

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-13T21:51:30.640

你可以用过渡来做到这一点。

诀窍是转换必须在数值上，而不是在关键字上。

因此，您需要将正常状态指定为 2 个阴影、1 个内嵌和另一个外阴影，其中一个设置为 0（因此它是不可见的）：

```
.keyframe {
    box-shadow: inset 0 0 60px red, 0 0 0px blue;
    transition: box-shadow 5s;
} 
```

我为大小和时间设置了巨大的值，所以它更明显。那么悬停状态是：

```
.keyframe:hover {
    box-shadow: inset 0 0 0px red, 0 0 60px blue;
} 
```

请注意，阴影之间存在对应关系，因此浏览器只需要转换一个数值（可能是所有数据；但使用 'inset' 关键字）。

# [小提琴](http://jsfiddle.net/vals/xq4qc/4/)

```
.keyframe {
    box-shadow: inset 0 0 10px #aaa;
    height:100px;
    width:250px;
    padding:10px;
    margin-bottom: 10px;
    left: 40px;
    top: 40px;
    position: absolute;
    border:1px solid #CCCCCC;
    box-shadow: inset 0 0 60px red, 0 0 0px blue;
    transition: box-shadow 3s;
}
.keyframe:hover {
    box-shadow: inset 0 0 0px red, 0 0 60px blue;
}
```

```
<div class="keyframe"> 
    dual shadow transition (hover me)
</div>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-25T11:46:06.910

如果您在插入和初始阴影之间切换之前先将动画设置为无，那么您可以非常接近关键帧。（您不能直接对此进行动画处理，因为它们是关键字而不是数值 - 即没有“almostInset”阴影）。

考虑以下CSS：

```
.box {
    box-shadow: inset 0 0 10px #aaa;
    /*add prefixes*/animation: shadowFadeOut 1s;
}
.box:hover {
    box-shadow: 0 0 10px #aaa;
    /*add prefixes*/animation: shadowFadeIn 1s;
}

@/*add prefixes*/keyframes shadowFadeIn {
    0% { box-shadow: inset 0 0 10px #aaa; }
    50% { box-shadow: none; }
    100% { box-shadow: 0 0 10px #aaa; }
}

@/*add prefixes*/keyframes shadowFadeOut {
    0% { box-shadow: 0 0 10px #aaa; }
    50% { box-shadow: none; }
    100% { box-shadow: inset 0 0 10px #aaa; }
} 
```

Webkit 演示：http: [//jsfiddle.net/xq4qc/1/](http://jsfiddle.net/xq4qc/1/)

我能想到的一个缺点是，这也会在第一页加载时为阴影设置动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-02T17:11:37.487

Another way of achieving it is to transition a box-shadow on two elements. So transition the shadow of an inner element from 10px to 0, then from 0 to 10px at the same time on the outer element.

```
.outer {
  display: inline-block;
  box-shadow: 0 0 0 #000;
}
.outer:hover {
  box-shadow: 0 0 30px #000;
}
.inner {
  width: 150px;
  height: 150px;
  background: #ee3b3b;
  box-shadow: inset 0 0 30px #000;
}
.inner:hover {
  box-shadow: inset 0 0 0 #000;
} 
```

Example here: [http://codepen.io/Probocop/pen/yyrqNG](http://codepen.io/Probocop/pen/yyrqNG)

# python - 如何在 GoogleAppEngine 数据存储中的实体中保存超过 1000 条记录？

> ID：15064943
> 
> 赞同：2
> 
> 时间：2013-02-25T10:34:34.800
> 
> 标签：python, google-cloud-datastore

我正在通过 GoogleappEngine 用 Python 开发一个网站。

我需要存储大量数据（财务数据），稍后将根据用户的请求显示。

问题是当我尝试保存它们时，它只在其中一个实体中保存了 1000 条记录。

我只是从文件中迭代数据并以这种方式保存它：

```
# Save in database
b = FinancialData (ticker = ticker, period_type = period_type, year = year, coaCode =      coaCode, value = value)
b.put() 
```

不确定我是否做错了什么，我对这个数据库没有太多经验，或者我是否应该配置它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T07:39:52.513

如果您在本地开发服务器上遇到此问题，而不是在实际服务器上部署时遇到此问题，您的问题已在此处得到解答：

[https://stackoverflow.com/a/9543034/96313](https://stackoverflow.com/a/9543034/96313)

# android - 如何在 Android 中发布杂志

> ID：15064948
> 
> 赞同：4
> 
> 时间：2013-02-25T10:34:52.707
> 
> 标签：android, google-play

目前，Apple 使用 Newsstand 在其 App Store 上发布杂志。Google Android 与 Newsstand 的等价物是什么？

# android - 如何为 Action Bar Scherlock android 添加我自己的主题

> ID：15064949
> 
> 赞同：0
> 
> 时间：2013-02-25T10:34:53.443
> 
> 标签：android, actionbarsherlock

我想要一个`Actionbar`带有白色背景和红色文本的应用程序名称。

我正在使用`ActionBarSherlock library`.

有没有可能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:37:06.863

您可以在这里创建您的样式： http: [//jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/) 然后将其应用到您的操作栏：[http ://android-developers.blogspot.com/2011/04/customizing-action- bar.html](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)

# python - 从 txt 文件中删除一行行

> ID：15064951
> 
> 赞同：0
> 
> 时间：2013-02-25T10:34:58.893
> 
> 标签：python, file, file-io, python-2.7

我有一个 .txt 文件，其结构如下：

```
name
parameter 1
parameter 2
parameter 3
\n
name2
p1
p2
p3
\n
(...) 
```

我不知道如何创建一个从文件中删除块（名称、参数和\ n）的函数，该文件将名称作为函数参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:51:59.863

没有从文件中删除这样的事情。您只能读取和写入文件。但是您可以在 Python 中从列表中删除项目，或者在迭代中省略它们：

```
In [1]: def exclude(f, name):
   ...:     with open(f) as fo:
   ...:         found = False
   ...:         for line in fo:
   ...:             if line.strip() == name:
   ...:                 found = True
   ...:                 continue
   ...:             if found and not line.strip():
   ...:                 found = False
   ...:             if not found:
   ...:                 yield line
   ...: 

In [2]: with open('/tmp/new.txt', 'w') as new:
   ...:     new.writelines(exclude('/tmp/text.txt', 'name'))
   ...: 
```

此示例写入一个没有以 . 开头的块的新文件`"name"`。它假定块用空行分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:53:02.050

也许你可以使用 readline: [readline() from tutorialspoint](http://www.tutorialspoint.com/python/file_readline.htm)或者 [这个来自关于 readline 的 python 文档](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)

1.  从源文件中读取每一行。
2.  如果该行包含函数参数（名称或任何内容），则继续，（不要阅读此行，跳到下一行）。
3.  然后附加每个过滤的行以创建新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:22:41.950

```
def rmblock(path, block):                           
    lines = open(path).readlines()                  
    blockstart = lines.index(block + "\n")          
    blockend = lines.index(r"\n" + "\n", blockstart)
    del(lines[blockstart:blockend+1])               
    open(path, 'w+').writelines(lines) 
```

# python - 通过快捷方式运行 Python 可执行文件会更改程序运行的位置

> ID：15064952
> 
> 赞同：1
> 
> 时间：2013-02-25T10:35:05.857
> 
> 标签：python, py2exe

我已经通过`py2exe`.

如果我在它的 dist 文件夹中运行这个可执行文件，它运行得很好。

该程序需要访问文件夹中的`dist`文件（带有参考数据的 txt 文件）。

如果我在桌面上创建该可执行文件的快捷方式，程序会运行但无法正常工作。似乎程序运行的文件夹是快捷方式所在的文件夹，而不是 exe 所在的文件夹。因此，它无法找到这些带有参考数据的 txt 文件。

在我的代码中，我将这些 txt 文件称为：

`ref_correction = np.matrix(np.genfromtxt( 'Reference_Data.txt' ))`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:42:37.463

您可以使用`__file__`变量（其中包含您当前正在编写代码的 Python 文件的路径）来构造数据文件的路径。您可以将其扩展为绝对路径（通过使用`os.path.abspath()`），然后仅获取该路径的目录部分，并将其与数据文件的名称连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T00:13:49.493

改用这个：

```
path = os.getcwd()   #Where the 'exe' file is stored 

otherpath = os.path.join(path, '../Folder/SubFolder/') #Creates a new path 
```

创建“.exe”文件时，“__ 文件 __”不再适用于路径，因此您需要使用上面的行获取当前工作目录。这会将您的路径更新到“.exe”和所有必需文件当前所在的目录。

# java - 单击列表视图打开自定义对话框

> ID：15064954
> 
> 赞同：0
> 
> 时间：2013-02-25T10:35:16.550
> 
> 标签：java, android

如何在单击基本适配器的列表项时打开自定义对话框？

我尝试使用代码通过单击项目列表来打开“自定义”对话框，但得到了 windowmanager 的错误

```
 public void onItemClick(AdapterView<?> arg0, View view, int position,
                long arg3) {

            int childPosition = ExpandableListView.getPackedPositionChild(position);
            int tempID = childPosition;
            Log.i("tempID",""+tempID);
            Log.i("Item Clicked","Position"+position);

            //Log.i("Item Clicked","Position"+position);    

            type_dilog = new Dialog(Contacts.this);
            type_dilog.setContentView(R.layout.dialogg);

            type_dilog.setTitle(" Select the Operation ");
            Log.i("3333333333","333333333");
            TextView alert_messagee = (TextView) type_dilog.findViewById(R.id.dilog_messagee);
            alert_messagee.setVisibility(View.GONE);
            imageBtn = (Button) type_dilog.findViewById(R.id.automessage_btn);
            videoBtn = (Button) type_dilog.findViewById(R.id.ownmessage_btn);
            captuerimageBtn = (Button) type_dilog.findViewById(R.id.captureimage_btn);
            takevideoBtn = (Button) type_dilog.findViewById(R.id.takevideo_btn);
            delete = (Button) type_dilog.findViewById(R.id.delete_btn);
//              delete_no = (Button) type_dilog.findViewById(R.id.delete_no_btn);
            Log.i("44444444","4444444444");
            imageBtn.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));
            videoBtn.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));
            captuerimageBtn.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));
            takevideoBtn.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));
            delete.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));

            delete.setVisibility(View.GONE);

            imageBtn.setText("Photo Library");
            videoBtn.setText("Video Library");
            captuerimageBtn.setText("Take Picture");
            takevideoBtn.setText("Take Video");

            type_dilog.show();

}

02-25 17:09:55.040: E/AndroidRuntime(27697): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@41d9af60 is not valid; is your activity running? 
```

02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.view.ViewRootImpl.setView(ViewRootImpl.java:683) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android. view.WindowManagerImpl.addView(WindowManagerImpl.java:301) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215) 02-25 17:09: 55.040: E/AndroidRuntime(27697): 在 android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.view.Window$LocalWindowManager .addView(Window.java:537) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.app.Dialog.show(Dialog.java:278) 02-25 17:09:55.040: E /AndroidRuntime(27697): 在 dev.zoemultiline.Contacts$ContactsAdapter$1.onClick(Contacts.java:311) 02-25 17:09:55.040: E/AndroidRuntime(27697):在 android.view.View.performClick(View.java:3567) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.view.View$PerformClick.run(View.java:14224) 02- 25 17:09:55.040: E/AndroidRuntime(27697): 在 android.os.Handler.handleCallback(Handler.java:605) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.os。 Handler.dispatchMessage(Handler.java:92) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.os.Looper.loop(Looper.java:137) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 android.app.ActivityThread.main(ActivityThread.java:4517) 02-25 17:09:55.040: E/AndroidRuntime(27697): 在 java.lang.reflect.Method.invokeNative(Native方法) 02-25 17:09:55.040: E/AndroidRuntime(27697): at java.lang.reflect.Method.invoke(Method.java:511) 02-25 17:09:55.040: E/AndroidRuntime(27697) : 在 com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 02-25 17:09:55.040: E/AndroidRuntime(27697): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 02-25 17：09：55.040：E/AndroidRuntime（27697）：在 dalvik.system.NativeStart.main（本机方法）

上面是想要打开自定义对话框时单击 onItemClick 时出现的 Log cat 错误

我写 type_dilog = new Dialog(getParent()); 而不是 type_dilog = new Dialog(Contacts.this); 它解决了我的问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T10:39:12.533

实施 onitemselectedlistener 以获得更好的结果来解决您的问题。

# c# - 在 C# 中嵌入 Power Point

> ID：15064959
> 
> 赞同：1
> 
> 时间：2013-02-25T10:35:35.053
> 
> 标签：c#, powerpoint

我有兴趣在窗口面板中播放 Power Point 演示文稿。它在 Panel 中播放 power point 文件，但问题是它首先在几秒钟内播放全屏，然后继续在 Panel 中播放。但我需要直接在面板上玩。如果有人知道，请帮助。

```
using System.Diagnostics;
using System.Runtime.InteropServices;
using ppt = Microsoft.Office.Interop.PowerPoint;
using Microsoft.Office.Core;

   [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
        static extern IntPtr FindWindow(IntPtr ZeroOnly, string lpWindowName);

        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

        [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        public static extern bool SetWindowText(IntPtr hwnd, String lpString);

        ppt.Presentation presentation;
        Microsoft.Office.Interop.PowerPoint.SlideShowView oSlideShowView;
        bool flag = false;

        public void open(string FileName)
        {
            try
            {
                ppt.Application application;

                // For Display in Panel
                IntPtr screenClasshWnd = (IntPtr)0;
                IntPtr x = (IntPtr)0;

                application = new ppt.Application();

                presentation = application.Presentations.Open(FileName, MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);

                panel1.Controls.Add(application as Control);
                ppt.SlideShowSettings sst1 = presentation.SlideShowSettings;

                sst1.LoopUntilStopped = Microsoft.Office.Core.MsoTriState.msoCTrue;

                ppt.Slides objSlides = presentation.Slides;

                sst1.LoopUntilStopped = MsoTriState.msoTrue;

                sst1.StartingSlide = 1;
                sst1.EndingSlide = objSlides.Count;

                panel1.Dock = DockStyle.Fill;

                sst1.ShowType = ppt.PpSlideShowType.ppShowTypeKiosk;

                ppt.SlideShowWindow sw = sst1.Run();

                oSlideShowView = presentation.SlideShowWindow.View;

                IntPtr pptptr = (IntPtr)sw.HWND;

                SetParent(pptptr, panel1.Handle);

            }
            catch (Exception)
            {

                throw;
            }

        }
        private void Form3_Load(object sender, EventArgs e)
        {
            string FileName = "D:\\test.pptx";
            open(FileName);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            oSlideShowView.Next();
        } 
```

# php - 具有不同参数的 Google Analytics Content Experiments 动态页面重定向到默认值

> ID：15064961
> 
> 赞同：0
> 
> 时间：2013-02-25T10:35:36.423
> 
> 标签：php, google-analytics, google-experiments

我有一个只有一个页面命名的网站`products.php`，我显示不同的类别（大约 50 个），查询字符串如`products.php?category=books`. 现在，我已经为 url 设置了内容实验`products.php?category=books`并且一切正常，除了当我尝试访问任何其他类别时，我被重定向到上述`books`类别。我怎样才能得到这个工作？

理想情况下，我想设置一个适用于每个类别的“动态”实验，但如果我可以只设置一个类别并且所有其他类别都不会重定向到该`books`类别，我可以接受。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:55:27.913

解决方案实际上非常简单：只需使用原始 url 设置内容实验`products.php`而不使用其他参数，因为它们（如果存在）将被传播，如[官方谷歌分析支持页面](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2618450)所述：

```
3\. URL parameters in your variation pages

If you set URL parameters in your variation pages, then Experiments incorporates
them into what the visitor sees. Let’s say you set your experiment pages as:

Original page: www.example.com/a
Variation page: www.example.com/b?id=50
If visitors arrive with no URL parameters, then they see one of these two pages:

Original page: www.example.com/a
Variation page: www.example.com/b?id=50
If visitors arrive with URL parameters that conflict, then the URL parameters you
supplied during the experiment setup override the URL parameters that visitors
arrive with.

For example, if the visitor clicks a link to www.example.com/a?id=1, the visitor sees one of these two pages:

Original page: www.example.com/a?id=1
Variation page: www.example.com/b?id=50
If visitors arrive with URL parameters that don’t conflict, then the URL parameters are
appended to the page URL. For example, if the visitor clicks a link to
www.example.com/a?cat=1, then the visitor sees one of these two pages:

Original page: www.example.com/a?cat=1
Variation page: www.example.com/b?id=50&cat=1 
```

# jquery - GWAN：上传文件错误请求

> ID：15064963
> 
> 赞同：0
> 
> 时间：2013-02-25T10:35:39.780
> 
> 标签：jquery, file-upload, g-wan

我尝试做一个简单的上传表单。

我正在使用 jQuery 上传（[https://github.com/blueimp/jQuery-File-Upload/archive/master.zip](https://github.com/blueimp/jQuery-File-Upload/archive/master.zip)）

使用简单的形式 ( [http://pastebin.com/wCUB2EkR](http://pastebin.com/wCUB2EkR) ) (data-url="server/php/?index.php")

我将 index.html 和 .js 放入我的“www”目录，并将 server/php/[index.php,UploadHandler.php] 放入 csp 文件夹。我添加“退出（200）；” 到“server/php/index.php”的末尾没有空响应

我将“entity_size”更改为没有 413 错误（请求实体太大）

当我尝试上传文件时，我遇到了几个问题：

在 G-WAN 控制台中，我有以下输出：

`sh: 2: Content-Disposition:: not found sh: 3: Content-Type:: not found : not found`

在 access.log 我有这个`"[Mon Feb 25 10:29:53 2013 GMT] xxx "POST /server/php/?index.php" 127 828 "http://yy:8080/index.html"`

我正在使用最新版本（4.2.19）

[更新] 安全问题？

我只是注意到一个可怕的行为（与我的 GWAN 输出结果的链接......）

我使用了一个简单的 Perl 脚本而不是“server/php/?index.php”，它获取 STDIN 并打印到文件（[http://pastebin.com/SnXkjFya](http://pastebin.com/SnXkjFya)）

为了测试，我尝试使用示例命令上传 .sh 脚本，并在 GWAN 控制台中注意到服务器实际上尝试在我的 .sh 文件中执行所有命令...

我尝试使用另一个包含“touch testgwan”的文件（名为 test.txt），在使用 POST 的表单上传中上传。

文件“testgwan”是在 GWAN 目录的根目录下创建的...

当然，我做错了什么，但 GWAN 不应该执行带有“post”的命令......

* * *

更新：

由于我们无法重复此问题，Geoffrey 将他在以下平台上的测试通过电子邮件发送给我们（他使用的是 AMD Phenom(tm) II X4 955 处理器和未命名的管理程序）：

```
Ubuntu 12.04 32bits, G-WAN 4.2.19: problem
Ubuntu 12.04 32bits, G-WAN 4.2.27: OK

Ubuntu 10.04 32Bits, G-WAN 4.2.19: OK
Ubuntu 10.04 64Bits, G-WAN 4.2.19: OK

Ubuntu 10.04 32Bits, G-WAN 4.2.27: OK
Ubuntu 10.04 64Bits, G-WAN 4.2.27: OK 
```

所以，对于 Geoffrey 来说，最新版本的 G-WAN 已经解决了他的问题，而之前版本的 G-WAN 仅在 Ubuntu 12.04 32bits 中出现了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:51:02.107

如果您查看`entity.c`G-WAN 提供的示例（我们知道其源代码），那么您会发现 G-WAN 不可能*“执行”*一个 POST 实体。

当明确授权这样做时，G-WAN 会将 POST 实体上传到您定义的限制 - 这是它唯一做的事情。

现在，由于您*没有*提供您的源代码`PHP`和`Python`脚本（两者都由 G-WAN*盲目执行*），因此任何人都没有机会告诉您您做错了什么。

鉴于您的英语水平，您可能会从与您一样会说法语的 G-WAN 支持团队联系中获益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:21:28.667

由于 G-WAN 不是开源的（我理解为什么并同意您的观点），我无法告诉您为什么 G-WAN 会那样做。

我正在提供源代码，甚至是“PHP”文件。

这些文件都在“master.zip”中的jQuery上传文件中，我的第一个链接。

忘记 php、perl 或 python 内容脚本。我对“hello world”perl 脚本有完全相同的行为。（打印“helloworld”；）

GWAN 有一个奇怪的行为，我猜是一个安全问题（因为 GWAN 执行输入文件中的所有命令）。

我的表单将输入文件发送到“helloworld”perl 脚本，但 GWAN 执行文件内的所有命令（如 GWAN 执行“sh test.txt”）。

我的问题可能会让其他尝试 GWAN 的人感兴趣，所以，即使我的英语不完美，我也会继续在这里回答。

ps：不要小看潜在客户。你的名声不是很好。在法语中，我们会说“Donner le bâton pour se faire battre”。

# codeigniter - 如何在只允许一个数据库的共享服务器上为 codeigniter 安装 bonfire

> ID：15064968
> 
> 赞同：0
> 
> 时间：2013-02-25T10:35:56.233
> 
> 标签：codeigniter, installation, manual

我的托管公司只允许一个 mysql 数据库。这个数据库只能通过 cpanel 界面创建。因此，在 bonfire 安装屏幕中提供数据库详细信息失败。有没有手动方法来设置具有正确文件夹结构和数据库配置的篝火应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:33:23.843

如果脚本可以，为什么不呢？但是，当 bonfire 创建失败时，我会执行以下步骤： - 验证我的主机是否允许 url 重写，或在 index_path 上的配置中将其更改为“index.php” - 验证文件夹“Modules”是否具有权限 777

# javascript - 如何使用 jquery 清除 json 对象

> ID：15064969
> 
> 赞同：0
> 
> 时间：2013-02-25T10:36:02.567
> 
> 标签：javascript, jquery, html

```
var json=[];
json.push({"id":"1","name":"abc"});
json.push({"id":"2","name":"xyz"}); 
```

像这样推送我的json之后

```
json=[{"id":"1","name":"abc"},{"id":"2","name":"xyz"}]; 
```

在这里我要清除所有`json`数据

像这样`json=[]`

有可能在`jquery`or中`javascript`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:37:24.303

重置为空数组

```
json= []; 
```

我认为这可以解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:43:41.910

简单的答案是：

```
json.length = 0; 
```

这也将释放与对象关联的任何内存。

`delete`您还可以使用以下命令删除对象：

```
delete json; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:37:50.677

尝试以下方法：

```
json.splice(0,json.length); 
```

# arrays - 将矩阵中的变量附加（分配）到元胞数组中

> ID：15064971
> 
> 赞同：1
> 
> 时间：2013-02-25T10:36:07.487
> 
> 标签：arrays, matlab, matrix

我正在使用函数`meshgrid`创建 2 个矩阵并使用函数`num2cell`从一个矩阵创建一个单元格数组。

```
latVectr = 1:1:5;
longVectr = 10:2:20;
[X,Y] = meshgrid(latVectr,longVectr);

CELX = num2cell(X); 
```

我想将第二个矩阵的变量分配给创建的单元格数组的单元格，如下所示：

```
X{1,1}(1,2) = Y(1,1);
X{1,2}(1,2) = Y(1,2);
;
;
;
;X(n,m)(1,1) = Y(n,m) 
```

我可以用循环来做到这一点。还有其他*更优雅*的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:40:11.777

看起来你希望`CELX{ k, l }`会`[ X(k,l) Y(k,l) ]`。
这可以通过

```
CELX = mat2cell( cat(3, X, Y ), ones(size(X,1),1), ones(1, size(X,2)), 2 ); 
```

**编辑：**
您可能希望使用以下方法纠正结果单元格的维度

```
CELX = cellfun( @squeeze, CELX, 'UniformOutput', false ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:16:52.357

另一种方法使用[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)

```
CELX = cellfun(@(x,y) [x,y], num2cell(X), num2cell(Y), 'UniformOutput', false ); 
```

其实我觉得这个方案比我的[其他方案更优雅](https://stackoverflow.com/a/15065056/1714410)

# jquery - 动态设置“确认密码”的值等于第一个密码字段

> ID：15064974
> 
> 赞同：0
> 
> 时间：2013-02-25T10:36:15.210
> 
> 标签：jquery, input, passwords

我想通过去掉注册表单上的“密码确认”字段来运行测试，看看没有它是否表现更好。

在我的 A/B 测试解决方案中，我通过 jquery 将第二个密码输入显示属性值设置为无：

```
$('#password').keypress(function() {
    $('#password2').val($(this).val());
}); 
```

我进行了现场测试，但它说密码不匹配。我确实看到 #password2 在我键入时包含信息（当将显示设置回阻止时），但它似乎会在 #password2 中输入错误的文本。

那么如何正确重复密码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:39:57.820

使用`change`jquery的事件。

```
$('#password').change(function() {
    $('#password2').val($(this).val());
}); 
```

我已经在本地进行了测试，并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:34:08.643

您也可以使用`.on`jQuery 方法。

```
$('#password').on('change',(function()
{
    $('#password2').val($(this).val());
}); 
```

( `.on`... 是非常新的 (jQuery 1.7)，它可以使用委托事件覆盖实时场景，这是一种更快的附加行为方式。

官方文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

事件`on()`处理程序旨在替换`.bind()`和`.delegate()`事件处理程序。

您还可以使用 eventsMap 来指定附加到一个元素的多个事件。

```
$('#password').on({
  change: function() {
    event.preventDefault();
    $('#password2').val($(this).val());
  },
  click: function() {
    console.log('clicked!');
  }
}); 
```

# android - 如何在列表视图中创建搜索功能

> ID：15064977
> 
> 赞同：0
> 
> 时间：2013-02-25T10:36:30.483
> 
> 标签：android, search, listviewitem

我想在 listview 中创建搜索功能，我有点怀疑使用 arraylist 是否可以执行搜索功能。这里我附上了代码..

Totalarraylist 是数组列表，我从该数组列表将数据传递给问题适配器类代码，

```
 searchbox.addTextChangedListener(new TextWatcher() {

              @Override
              public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                  // When user changed the Text

              If so then what to add here for search functionality...

              }

              @Override
              public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                      int arg3) {
                  // TODO Auto-generated method stub

              }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
          });

          adapterfirst = new Questionadapter(MainActivity.this,Totalarraylist);
      listviewfirst = (ListView) findViewById(R.id.listquestion);
      listviewfirst.setAdapter(adapterfirst);

}

public class  Questionadapter extends BaseAdapter  {

        private ArrayList<HashMap<String, Object>> data;    
          public  LayoutInflater inflater;
            Context context;

        public Questionadapter(Context context, ArrayList<HashMap<String,Object>> Totalarraylists) {
            // TODO Auto-generated constructor stub

            data=Totalarraylists;
              inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                System.out.println("data="+data);
        }

        public int getCount() {
            return data.size();
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            //
}
} 
```

任何人都可以帮我做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:02:03.940

试试这个，将您的数组列表与您的字符串进行比较，您将得到答案

```
 public class MainActivity extends Activity {

ArrayList<String> list = new ArrayList<String>();

private EditText searchEdt;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_ugsimply_beta);

    list.add("Android");
    list.add("Android1");
    list.add("blackberry");
    list.add("samsung");
    list.add("LG");
    searchEdt = (EditText) findViewById(R.id.searchEdt);

    searchEdt.addTextChangedListener(new TextWatcher() {

        private int textlength;
        private ArrayList<String> arrayList_sort = new ArrayList<String>();

        public void afterTextChanged(Editable s) {
            // Abstract Method of TextWatcher Interface.
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // Abstract Method of TextWatcher Interface.
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            textlength = searchEdt.getText().length();
            if (arrayList_sort != null)
                arrayList_sort.clear();

            for (int i = 0; i < list.size(); i++) {

                if (textlength <= list.get(i).toString().length()) {

                    if (searchEdt
                            .getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) list.get(i).toString()
                                            .subSequence(0, textlength))) {
                        arrayList_sort.add(list.get(i));
                        Log.d("TAG", "log" + arrayList_sort.size());
                    }
                }
            }

        }
    });

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:50:04.147

将过滤器添加到您的`ListAdapter`, 并将`onTextChanged`过滤器应用于`listadapter`

# php - 从控制器传递数据以查看所需的建议

> ID：15064979
> 
> 赞同：0
> 
> 时间：2013-02-25T10:36:35.850
> 
> 标签：php, codeigniter, controller

我想将一些数据从我的数据库传递到一个网页我的模型中有 Somme 代码，它指定我想要选择的数据并在我的视图中回显数据我的问题是我将如何将 Somme 数据传递给视图使用控制器？这是我的代码

调查/php

```
 <?php
class Survay extends CI_Model{

    function dosurvay($Question, $qA, $qB, $qC){
        $this->db->select('QID, Question, qA, qB, qC');
        $this->db->from('tblquestions');
        $this->db->where('Question', $Question);
        $this->db->where('qA', $qA);
        $this->db->where('qB', $qB);
        $this->db->where('qC', $qC);
         $this -> db -> limit(1);

   $query = $this -> db -> get();

   if($query -> num_rows() == 1)
   {
     return $query->result();
   }
   else
   {
     return false;
   }
 }

}
?> 
```

survay_view.php

```
<html>
<head>

</head>

<body>

    <h1><?php echo $Question;?></h1>
    <?php echo $qA; ?><?php form_checkbox('qA'); ?>
    <?php echo $qB; ?><?php form_checkbox('qB');?>
    <?php echo $qC; ?><?php form_checkbox('qC'); ?>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:40:41.510

在控制器中

加载你的模型

```
$this->load->model('survay'); 
```

调用你的模型函数

```
$survay_data = $this->survay->dosurvay($Question, $qA, $qB, $qC); 
```

将数据加载到视图

```
$viewData = array();
$viewData['survay_data'] = $survay_data;
$this->load->view('survay_view', $viewData) 
```

# parsing - 在 CUP 中：如何使某些内容可选解析？

> ID：15064980
> 
> 赞同：6
> 
> 时间：2013-02-25T10:36:37.190
> 
> 标签：parsing, compiler-construction, jflex

```
 PROC_DECL -> "proc" [ "ret" TYPE ] NAME
                  "(" [ PARAM_DECL { "," PARAM_DECL } ] ")"
                  "{" { DECL } { STMT } "}" 
```

这是过程声明的语法。

你怎么说“ret” TYPE 是可选的而不做多个案例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T23:09:55.750

使用另一个产品，比如 ret_stmt，它可以是空的，也可以包含单个 return 语句，因此在您的 .cup 文件中，您将拥有以下产品：

```
ret_stmt ::= // empty 
                    {: /*your action for empty return statement*/ :}
                 // Single return statement          
                 | "ret":r TYPE:t
                    {: /*your action for single return statement*/ :}

PROC_DECL ::= "proc":p ret_stmt:r NAME:n
                  "(" param_list:pl ")"
                  "{" { DECL } { STMT } "}"
                   {: /*your action for procedure declaration statement*/ :} 
```

您可以使用与参数声明类似的方法，添加生产 param_list。

# php - 如何将下拉列表的选定值存储到php中的会话变量中

> ID：15064981
> 
> 赞同：0
> 
> 时间：2013-02-25T10:36:46.280
> 
> 标签：php, mysql

目前我正在开发一个系统。这里我有一个下拉列表，它的值是从数据库中填充的。现在我需要的是，当有人从列表中选择一条记录时，选择的值应该存储在一个会话变量中，该变量将显示在另一个页面中。我们可以这样做吗？我正在用 php 编码。我的代码是：

```
<td align="center">
                <?php
                $sql_dep=" Select * from   places_tbl";
                $row_dep = $db->Execute($sql_dep);
                $total_dep  = $row_dep->RecordCount();
                ?>
                <select name="place" class="txtbx08" id="place">
                <option value="">--Please Select City--</option>
                <?php if($total_dep>0) {
                while(!$row_dep->EOF)
                {   
                ?>
                  <option value="<?php echo $row_dep->fields["place_id"];?>">
                  <?php echo ucfirst($row_dep->fields["place_name"]); ?>
                  </option>
                  <?php 
                    $row_dep->MoveNext();
                    }}
                  ?>
                </select></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:45:58.830

我不确定您如何检索所选值（假设通过 POST），但正常过程是：

```
session_start();

$_SESSION['place'] = $_POST['place']; 
```

# java - 如何从父类横切方法？

> ID：15064982
> 
> 赞同：2
> 
> 时间：2013-02-25T10:36:48.453
> 
> 标签：java, aop, aspectj

父类：

```
public class Animal {
  public String name() {
    return "my name";
  }
} 
```

儿童班：

```
public class Dog extends Animal {
  // no methods
} 
```

我正在尝试`Dog.name()`使用 AspectJ 横切调用，但不起作用：

```
@Aspect
public class Crosscut {
  @Around("execution(* Dog.name())")
  public Object exec(ProceedingJoinPoint point) {
    // this point is never reached
  }
} 
```

但是，如果我向该类添加子方法`Dog`，则横切可以工作：

```
public class Dog extends Animal {
  public String name() {
    return super.name();
  }
} 
```

如何写出正确的横切？或者根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:55:40.943

其实 jontro 的想法很好，但是如果你不关注`Dog`，但想拦截on及其子类的所有`name()`方法，解决方案会更简单：`Animal`

```
@Around("execution(* Animal+.name())") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:57:02.313

由于 aspectj 没有在这里创建新方法，因此无法匹配`Dog.name()`。您需要做的是声明建议`Animal.name()`并用于`this(...)`使 aspectj 添加运行时 instanceof 检查。

尝试 `@Around("execution(* Animal.name()) && this(Dog)")`

# vbscript - 环境变量其他用户

> ID：15064988
> 
> 赞同：0
> 
> 时间：2013-02-25T10:37:11.650
> 
> 标签：vbscript, environment-variables

我正在尝试为用户 xy 设置环境变量。如何在 Visual Basic 脚本中执行此操作？

这就是我所拥有的：

```
Dim objShell As Object
Set objShell = CreateObject("WScript.Shell")
objShell.Environment("user")("TEST") = "12345" 
```

通过这种方式，我可以为登录用户设置环境变量。但是如何为其他用户 xy 设置环境变量？

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:56:21.187

如果您想为其他用户更改环境变量，您必须在他们的上下文中运行您的代码（使用`runas`）或更改注册表中的变量。对于后者，您必须从用户配置文件中加载用户配置单元`ntuser.dat`：

```
Set sh = CreateObject("WScript.Shell")
sh.Run "%COMSPEC% /c reg load HKU\Temp C:\Users\foo\ntuser.dat", 0, True 
```

加载配置单元后，您可以操作环境子项：

```
sh.RegWrite "HKEY_USERS\Temp\Environment\TEST", "12345", "REG_SZ" 
```

完成后卸载蜂巢并完成：

```
sh.Run "%COMSPEC% /c reg unload HKU\Temp", 0, True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:10:07.593

只有系统环境对其他用户可用。

```
Set wshShell = CreateObject( "WScript.Shell" )
Set wshSystemEnv = wshShell.Environment( "SYSTEM" )
WScript.Echo "SYSTEM:  TEMP=" & wshSystemEnv( "TEMP" ) 
```

# java - Internet Explorer 更改了我的 Web 应用程序中包含特殊字符的文件的文件名

> ID：15064997
> 
> 赞同：0
> 
> 时间：2013-02-25T10:37:48.010
> 
> 标签：java, internet-explorer, tomcat

我有一个支持文件下载的网络应用程序。它在 Firefox 和 Chrome 上运行良好。但是对于 Internet Explorer，当我下载一个包含特殊字符的文件时，例如：`#`，它总是将字符更改为下划线：`_`。

例如，该文件`filename#.zip`将保存为`filename_.zip`我从 Internet Explorer 下载后的文件。

Web 应用程序本身是使用 GWT 和 Java 编写的。Web 应用程序由 Tomcat 托管。我使用的IE版本是IE11。

我知道发布这个问题有点含糊，因为我不能在这里发布我的整个 Web 应用程序代码。欢迎任何想法。

更新：

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <listener>
        <listener-class>com.mycompany.somelistener</listener-class>
    </listener>

    <filter>
        <filter-name>guiceFilter</filter-name>
        <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>guiceFilter</filter-name>
        <url-pattern>*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>

    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>webApp</web-resource-name>
            <url-pattern>*</url-pattern>
        </web-resource-collection>

        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <error-page>
        <error-code>404</error-code>
        <location>/404.jsp</location>
    </error-page>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:38:37.820

Windows 不允许文件名中包含多个字符（`\ / : * ? " < > |` [source](http://support.microsoft.com/kb/177506)），但`#`应该没问题。

也许 IE 不喜欢它，因为它用于网络锚（即 url#anchor）。要了解发生了什么：

1.  确保服务器实际发送您期望的文件名（查看网络上的 HTTP 响应标头；使用浏览器的开发工具或支持日志记录的本地代理服务器）

2.  编辑您的代码以将各种奇数字符放入文件名中，以查看哪些字符可以，哪些不可以

3.  尝试使用不同的浏览器；当浏览器尝试保存文件时，Windows 可能正在重命名文件。

# windows-phone-8 - writeablebitmap 总是用黑色背景渲染图像

> ID：15064998
> 
> 赞同：0
> 
> 时间：2013-02-25T10:37:48.733
> 
> 标签：windows-phone-8, writeablebitmap

我有下一个代码：

```
var bmp = new WriteableBitmap((int)size.Width, (int)size.Height);
  bmp.Render(new Canvas(){Background = new SolidColorBrush(Colors.White)}, null);
  bmp.Invalidate();
return bmp; 
```

我如何获得颜色：

```
var backColor = Application.Current.Resources["PhoneBackgroundColor"].ToString();
var foreColor = Application.Current.Resources["PhoneForegroundColor"].ToString(); 
```

我需要用白色背景渲染图像。但是这段代码总是用黑背渲染图像。前台没问题，我用下一个结构测试过：

```
Canvas
   Textblock - with black foreground
   Textblock - with black foreground 
```

那么问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:35:44.560

您需要指定画布的大小，否则它的默认宽度和高度为 0，从而导致透明的 WriteableBitmap。

```
bmp.Render(new Canvas() { Background = new SolidColorBrush(Colors.White), Width=(int)size.Height, Height=(int)size.Height }, null); 
```