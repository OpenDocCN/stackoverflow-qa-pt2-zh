# StackOverflow 问答 12589000-12589999

# java - 在本地模式下运行一个简单的级联应用程序

> ID：12589000
> 
> 赞同：4
> 
> 时间：2012-09-25T18:30:27.783
> 
> 标签：java, hadoop, cascading

我是 Cascading/Hadoop 的新手，正在尝试以本地模式（即在内存中）运行一个简单的示例。该示例仅复制一个文件：

```
 import java.util.Properties;

    import cascading.flow.Flow;
    import cascading.flow.FlowConnector;
    import cascading.flow.FlowDef;
    import cascading.flow.local.LocalFlowConnector;
    import cascading.pipe.Pipe;
    import cascading.property.AppProps;
    import cascading.scheme.hadoop.TextLine;
    import cascading.tap.Tap;
    import cascading.tap.hadoop.Hfs;

    public class CascadingTest {

            public static void main(String[] args) {
                Properties properties = new Properties();

                AppProps.setApplicationJarClass( properties, CascadingTest.class );
                FlowConnector flowConnector = new LocalFlowConnector();

                // create the source tap
                Tap inTap = new Hfs( new TextLine(), "D:\\git_workspace\\Impatient\\part1\\data\\rain.txt" );

            // create the sink tap
            Tap outTap = new Hfs( new TextLine(), "D:\\git_workspace\\Impatient\\part1\\data\\out.txt" );

            // specify a pipe to connect the taps
            Pipe copyPipe = new Pipe( "copy" );

            // connect the taps, pipes, etc., into a flow
            FlowDef flowDef = FlowDef.flowDef()
                .addSource( copyPipe, inTap )
                .addTailSink( copyPipe, outTap );

                // run the flow
            Flow flow = flowConnector.connect( flowDef );
            flow.complete();
        }
    } 
```

这是我得到的错误：

```
09-25-12 11:30:38,114 INFO  - AppProps                     - using app.id: 9C82C76AC667FDAA2F6969A0DF3949C6
Exception in thread "main" cascading.flow.planner.PlannerException: could not build flow from assembly: [java.util.Properties cannot be cast to org.apache.hadoop.mapred.JobConf]
    at cascading.flow.planner.FlowPlanner.handleExceptionDuringPlanning(FlowPlanner.java:515)
    at cascading.flow.local.planner.LocalPlanner.buildFlow(LocalPlanner.java:84)
    at cascading.flow.FlowConnector.connect(FlowConnector.java:454)
    at com.x.y.CascadingTest.main(CascadingTest.java:37)
Caused by: java.lang.ClassCastException: java.util.Properties cannot be cast to org.apache.hadoop.mapred.JobConf
    at cascading.tap.hadoop.Hfs.sourceConfInit(Hfs.java:78)
    at cascading.flow.local.LocalFlowStep.initTaps(LocalFlowStep.java:77)
    at cascading.flow.local.LocalFlowStep.getInitializedConfig(LocalFlowStep.java:56)
    at cascading.flow.local.LocalFlowStep.createFlowStepJob(LocalFlowStep.java:135)
    at cascading.flow.local.LocalFlowStep.createFlowStepJob(LocalFlowStep.java:38)
    at cascading.flow.planner.BaseFlowStep.getFlowStepJob(BaseFlowStep.java:588)
    at cascading.flow.BaseFlow.initializeNewJobsMap(BaseFlow.java:1162)
    at cascading.flow.BaseFlow.initialize(BaseFlow.java:184)
    at cascading.flow.local.planner.LocalPlanner.buildFlow(LocalPlanner.java:78)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:11:25.717

只是为了提供更多细节：您不能在级联中混合本地和 hadoop 类，因为它们假定不同且不兼容的环境。在您的情况下发生的情况是您正在尝试使用 hadoop taps 创建本地流，后者期望使用 hadoop`JobConf`而不是`Properties`用于配置本地 taps 的对象。

如果您使用`cascading.tap.local.FileTap`而不是`cascading.tap.hadoop.Hfs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:24:17.667

欢迎来到级联 -

我刚刚在 Cascading 用户列表上回答，但简而言之，问题是本地和 Hadoop 模式类的混合。此代码具有 LocalFlowConnector，但随后使用 Hfs 水龙头。

当我恢复到“不耐烦”教程中使用的类时，它运行正确： [https ://gist.github.com/3784194](https://gist.github.com/3784194)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T05:10:03.523

是的，您需要使用 LFS（本地文件系统）tap 而不是 HFS（Hadoop 文件系统）。

您还可以在本地模式本身/来自 Eclipse 中使用 Junit 测试用例（使用 cascading-unittest jar）测试您的代码。

[http://www.cascading.org/2012/08/07/cascading-for-the-impatient-part-6/](http://www.cascading.org/2012/08/07/cascading-for-the-impatient-part-6/)

# ios - iPad 应用程序之间的共享

> ID：12589001
> 
> 赞同：3
> 
> 时间：2012-09-25T18:30:41.683
> 
> 标签：ios, ipad, ios5, file-sharing

我必须与 appB 共享 appA 创建的目录。有没有办法可以“授权” appB 访问 appA 在其空间中创建的文件夹？它们是仅限 iPad 的应用程序。

我知道 UIPasteboard，但我想将 appA 创建的多个小文件（存储在文件夹中）与 appB 共享（最好是安全的）。

我想避免使用服务器在应用程序之间建立共享。

编辑：这两个应用程序将安装在同一设备（iPad）上。

谢谢你。--AAT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:35:12.930

从 Apple 的配置门户：

> 此外，App ID 还可用于在一组应用程序之间共享钥匙串数据（例如密码），以及在使用 iCloud 的应用程序之间共享文档和配置数据。

所以使用 iCloud，是的，你可以；否则，不。

# nginx - 简单的 NGINX 日志文件分析器

> ID：12589003
> 
> 赞同：81
> 
> 时间：2012-09-25T18:30:44.460
> 
> 标签：nginx, analytics

我正在寻找一个简单的工具来分析我的 macbook 上的 NGINX 日志。我希望能够获得一些基本的统计数据，包括机器人访问，并且还能够对日志进行排序/过滤以找出在服务器崩溃之前发生的事情。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-01-15T16:04:30.977

您可以尝试使用[GoAccess](http://goaccess.io)；基于免费和开源控制台。它也可以输出 HTML 报告。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-08-28T17:19:23.040

我遇到过[游客](http://www.hping.org/visitors/)。它是用 C 语言编写的，速度非常快。

它缺少 goaccess 的酷 ncruses 界面。它只输出html。不过，它可以完成这项工作。

编辑：它还可以输出人类可读的文本报告：

```
visitors access.log | less 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-07T10:23:32.243

我会建议使用以下模式的 logstash 和 Kibana：

对于 access.log ：

```
NGINXACCESS %{IPORHOST:clientip} - %{USERNAME:remote_user} \[%{HTTPDATE:time_local}\] %{QS:request} %{INT:status} %{INT:body_bytes_sent} %{QS:http_referer} %{QS:http_user_agent} 
```

对于error.log：

```
 NGINXERROR (?<timestamp>%{YEAR}[./-]%{MONTHNUM}[./-]%{MONTHDAY}[- ]%{TIME}) \[%{LOGLEVEL:severity}\] %{POSINT:pid}#%{NUMBER}: %{GREEDYDATA:errormessage}(?:, client: (?<clientip>%{IP}|%{HOSTNAME}))(?:, server: %{IPORHOST:server})(?:, request: %{QS:request})?(?:, host: %{QS:host})?(?:, referrer: \"%{URI:referrer})? 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-01T12:21:54.550

request-log-analyzer gem 现在在 master 分支中支持 Nginx，我正在找人来测试它。 [http://github.com/wvanbergen/request-log-analyzer](http://github.com/wvanbergen/request-log-analyzer)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-27T21:31:24.033

我现在尝试了[Splunk](http://www.splunk.com/)，它是一个非常强大的工具，而且他们也有免费版本。

# django - DJANGO - 使用 request.POST 更改表单值？

> ID：12589006
> 
> 赞同：1
> 
> 时间：2012-09-25T18:31:25.223
> 
> 标签：django

所以我有这个代码：

```
post = request.POST.copy()
post['relationshipId'] = theRelationship.id
theStory = StoryForm(post, request = request, initial {'relationshipId' : theRelationship.id}) 
```

最初，我的代码如下所示：

```
theStory = StoryForm(request.POST, request = request, initial {'relationshipId' : theRelationship.id}) 
```

这导致了验证问题。验证器会抱怨没有设置 relationshipId。为什么会这样？

编辑：第一段代码运行良好，我对此非常满意。问题与第二个代码块有关，它最初是我所拥有的（以及我刚刚花了一些时间处理的），对我来说，它表现得“奇怪”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-15T18:14:58.203

第一个片段`relationshipId`动态设置字段，而不是从 Web 请求中提供的 POST 参数中获取它。

第二个片段将直接从 中获取该值`request.POST`，因此如果您的表单提交无效值，或者如果没有给出值，它将不会验证。

该`initial`参数仅适用于未绑定的表单（请参阅[https://docs.djangoproject.com/en/1.5/ref/forms/fields/#initial](https://docs.djangoproject.com/en/1.5/ref/forms/fields/#initial)）。您可以将其留在这里，因为您将表单绑定到`post`or `request.POST`。

# asp.net - 菜单项在一种语言中不可见

> ID：12589009
> 
> 赞同：0
> 
> 时间：2012-09-25T18:31:32.587
> 
> 标签：asp.net, resources, multilingual

是否可以在其中一种语言中设置任何菜单元素不可见的资源？

最好的问候， 达格纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:43:36.460

我假设您已经知道如何使用本地资源。如果没有，请检查：[ASP.NET 网页资源](http://msdn.microsoft.com/en-us/library/ms227427%28v=vs.100%29.aspx)

如果您使用本地资源 (App_LocalResources)，您几乎可以引用链接到本地​​资源的页面中任何控件的任何属性。

因此，在链接到本地​​资源的页面中，如果您有一个服务器端菜单元素（带有 runat="server" 标记）并且 ID 为“menuElement”，则可以在资源文件中进行设置。

“姓名” | “价值”

menuElement.Visible | 错误的

例如，您可以在法语资源文件中将值设置为 False，在英语资源文件中将值设置为 True。控件 menuElement 仅以英文显示。

# asp.net-mvc-3 - Glimpse 在本地工作，但未部署到 Azure

> ID：12589010
> 
> 赞同：1
> 
> 时间：2012-09-25T18:31:46.713
> 
> 标签：asp.net-mvc-3, glimpse

在本地，映射到 IIS 中的虚拟目录，一切正常。当我将站点部署到 Azure 时，我仍然可以访问 Glimpse.axd 并设置 cookie（报告的 IP 在允许列表中），但 Glimpse 图标未显示在任何页面上。

浏览器没有报告任何 javascript 错误。检查页面源，应该在正文末尾注入页面的两个 javascript 包含文件没有被发送。

在 web.config 中设置`loggingEnabled="true"`会在本地生成相同的日志，它可以工作，就像它在 Azure 上一样，它不起作用（虚拟目录和 requestId 除外）。从 Azure 日志：

```
2012-09-25 17:54:13.0271|INFO|Glimpse.Core.Module|BeginRequest handling complete for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)|
2012-09-25 17:54:13.1571|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:13.1571|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:13.1571|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:13.1571|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:28.5420|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:28.5420|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:28.5420|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:28.5420|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5812|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5812|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5812|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5831|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5831|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5831|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5831|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5831|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5988|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5988|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5988|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.5988|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-09-25 17:54:30.7874|INFO|Glimpse.Core.Module|PostRequestHandlerExecute handling complete for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)|
2012-09-25 17:54:30.8978|INFO|Glimpse.Core.Module|PostReleaseRequestState handling complete for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)|
2012-09-25 17:54:31.0277|INFO|Glimpse.Core.Module|Glimpse JSON payload created for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)|
2012-09-25 17:54:31.1411|INFO|Glimpse.Core.Module|Glimpse output generated for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)|
2012-09-25 17:54:31.1411|INFO|Glimpse.Core.Module|RequestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart) persisted|
2012-09-25 17:54:31.1411|INFO|Glimpse.Core.Module|EndRequest handling complete for requestId 4da70989-d89b-46ef-80c6-43bd6f5a7ce1 (/cart)| 
```

去年，我在开发中成功使用了 Glimpse，并部署到了 Azure 上的测试服务器。从那时到现在，我都不需要使用它。该项目发生了很多变化，但这是一年前有效的解决方案。我只是想找出目前仅在 Azure 中出现的问题。

关于我可以从哪里开始寻找的任何建议？我正在使用带有 Glimpse 0.87 的 MVC3 和 .NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:03:33.473

I'm willing to bet that the IP address you have configured in web.config is not the actual IP address Azure's infrastructure passes through.

The good news is, we have removed the IP filtering feature from the Glimpse 1.0 release candidate, which is currently available as a prerelease package on NuGet.

If you continue to have issues after upgrading, please submit a bug report on [Glimpse's GitHub issue tracker](https://github.com/Glimpse/Glimpse/issues).

# c# - 在 Visual Studio 2010 中跟踪特定变量

> ID：12589011
> 
> 赞同：-2
> 
> 时间：2012-09-25T18:31:51.230
> 
> 标签：c#, visual-studio-2010

我想在 Visual Studio 2010 中观看特定变量。例如，

字符串 stringVar = "blablabla";

我想知道这个变量是什么时候创建的？修改或分配某些内容时。

--

在我的应用程序中，变量值之一突然改变，我不知道为什么，我不想调试整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:01:39.097

您可以将变量转换为属性并在设置器中设置断点吗？

```
string _stringVar = "blablablba";
string stringVar {
    get
    {
        return _stringVar;
    }
    set
    {
        _stringVar = value;
    }
} 
```

解决问题后，您可以随时将其换回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:36:00.990

指定条件的[断点已更改如何？](http://msdn.microsoft.com/en-us/library/7sye83ce.aspx)

> 如果您想在表达式的值发生更改时中断，请选择已更改。

# svn - 附加到 2 个存储库的 VS 项目 - 有没有一种简单的方法可以从其中一个存储库中分离？

> ID：12589014
> 
> 赞同：0
> 
> 时间：2012-09-25T18:31:56.713
> 
> 标签：svn, tortoisesvn, ankhsvn

这里的情况...

我在本地创建了一个包含 3 个项目的解决方案（一个在本地创建的 Web 应用程序、一个在本地创建的 Web 应用程序的部署项目以及一个连接到 googlecode.com 上的存储库的开源库）。

我对特定于我正在开发的应用程序的开源库进行了一些小的更改（没有理由将更改提交到 googlecode.com，我也无意这样做）。

然后我将整个解决方案（包含所有 3 个项目）添加到不同的存储库。

一切都是我在第二个存储库中想要的方式，但是，因为一个库仍然链接到 googlecode 存储库，所以 ankhsvn 和 tortoisesvn 显示待处理的更改（我已经确认这些待处理的更改已经提交到新/第二存储库）。

我的问题是...

有没有一种简单的方法可以将该项目从 googlecode 存储库中分离出来，或者我必须重新开始（复制解决方案，删除 svn 数据，然后重新添加解决方案）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:13:21.973

如果您想维护文件版本，不。

# java - 如何在 Intellij 中定义导入的 Maven 项目

> ID：12589015
> 
> 赞同：0
> 
> 时间：2012-09-25T18:32:03.430
> 
> 标签：java, maven, intellij-idea

我在 Intellij 中打开了一个现有的 Maven 项目。在“Project Structure -> Artifacts”下，窗格是空的。当我单击 + 号添加一个时，它选择“unnamed.war”。

如何让它生成 pom 中定义的 artifactId 和版本？我一定在这里错过了一步。

![在此处输入图像描述](../Images/f46cb83eacf170224d2c991ed239094c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:38:42.457

了解您是如何创建项目的很重要。您是否选择了“从外部模型导入项目”？如果您只是打开了其他人创建的 IntelliJ 项目，那么我建议使用“从外部模型导入项目”创建一个新项目，因为这应该可以正确构建您的依赖项和正确输出。

# c# - 在实体框架中“克隆”EntityConnections 和 ObjectContexts

> ID：12589017
> 
> 赞同：5
> 
> 时间：2012-09-25T18:32:07.533
> 
> 标签：c#, .net, entity-framework, .net-4.5, entity-framework-5

（这曾经是一个由两部分组成的问题，但由于第二部分确实很重要，因此我决定将其分成两个单独的帖子。**请参阅[使用序列化在实体框架](https://stackoverflow.com/q/12604585/1426433)中的两个 ObjectContexts 之间复制实体了解第二部分。**

我想为我的实体模型创建一个相当通用的数据库“克隆”。此外，我可能需要支持不同的提供商等。我正在使用`ObjectContext`API。

我已经知道[这个问题](https://stackoverflow.com/a/6003101/1426433)和[EntityConnectionStringBuilder MDSN 文档](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.aspx)`Provider`示例，但我需要知道是否有一种编程方式来获取值以`Metadata`初始化`EntityConnectionStringBuilder`?

```
using (var sourceContext = new EntityContext()) {
    var sourceConnection = (EntityConnection) sourceContext.Connection;
    var targetConnectionBuilder = new EntityConnectionStringBuilder();

    targetConnectionBuilder.ProviderConnectionString = GetTargetConnectionString();
    targetConnectionBuilder.Provider = "System.Data.SqlClient"; // want code
    targetConnectionBuilder.Metadata = "res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl"; // want code

    using (var targetContext = new EntityContext(targetConnectionBuilder.ConnectionString)) {
        if (!targetContext.DatabaseExists())
            targetContext.CreateDatabase();

        // how to copy all data from the source DB to the target DB???
    }
} 
```

也就是说，有没有办法获取

*   `"System.Data.SqlClient"`
*   `"res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl"`

从某个地方而不使用文字值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:32:20.507

### 元数据

您应该能够使用`res://*/`来告诉 Entity Framework 在调用程序集中搜索所有 .csdl、.ssdl 和 .msl 文件。或者，用于`res://assembly full name here/`在特定程序集中搜索。请注意，这两种语法都将加载所有找到的文件，直到您在同一个程序集中有多个 .edmx 文件时才能正常工作，从而产生多个 CSDL/SSDL/MSL 文件（.edmx 文件基本上是这三个文件的串联）。[有关MSDN](http://msdn.microsoft.com/en-us/library/cc716756.aspx)的更多信息。

如果您想要更多控制，请使用[Assembly.GetManifestResourceNames](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)列出给定程序集中的所有资源，并将 .csdl/.ssdl/.msl 资源手动匹配在一起，然后根据这些资源名称手动构建元数据字符串。

### 提供者

提供者可以在根节点的 Provider 属性的 SSDL 文件中找到。获得正确的文件名后，[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)以 XML 格式使用和读取文件。代码应如下所示：

```
using (var stream = assembly.GetManifestResourceStream("EntityModel.ssdl")) {
  XDocument document = XDocument.Load(stream);
  string provider = document.Root.Attribute("Provider").Value;
} 
```

# php - 如何将帖子从 wordpress 拉到不同主机上的其他非 wordpress 网站？

> ID：12589025
> 
> 赞同：2
> 
> 时间：2012-09-25T18:32:37.437
> 
> 标签：php, wordpress, cakephp-2.0

如何在不在我的网站上安装 wordpress 的情况下将一位博主的帖子（写在他的 wordpress 博客上）拉到我的网站上？这样做的要求和限制是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T18:38:05.903

有几种方法可以仅将 wordpress 用作 CMS，而无需将其实际用作您的站点或公开内容以在其他站点上使用。

如另一个答案中所述，RSS 提要适用于对帖子的只读访问。要与内容交互，您需要另一个解决方案。

您可以在 wordpress 中启用 XML-RPC，并使用 php xmlrpc 之类的库来连接和拉取 post 数据。然而，XML-RPC 是开箱即用的，主要用于发布到 wordpress，而不是拉出东西。

最灵活的解决方案是 wordpress 的 REST 插件，它通过 RESTful API 公开您的帖子。查看： [http ://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

一个限制是您显然没有非 wordpress 网站上可用的一些 wordpress-as-a-website-building-tool 插件功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:33:58.700

如果是 WordPress，您可以只使用 RSS Feed 将内容联合到您的网站吗？

获取您想要的内容 - [http://codex.wordpress.org/WordPress_Feeds](http://codex.wordpress.org/WordPress_Feeds)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:29:56.453

我相信插件 Wp RSS Multi importer 应该可以解决问题。它从您想要联合到您自己的博客的博客中提取 RSS 提要。您可以在此处获取插件[http://wordpress.org/plugins/wp-rss-multi-importer/](http://wordpress.org/plugins/wp-rss-multi-importer/)。问题可能是您想要的不是提要。例如，我想要看起来像这样的内容[http://bake.co.ke/pg/recent+blog+posts](http://bake.co.ke/pg/recent+blog+posts)。我不想联合提要，而是联合其他网站的真实内容。

# html - 用css在ap附近浮动一个img

> ID：12589035
> 
> 赞同：-3
> 
> 时间：2012-09-25T18:33:35.647
> 
> 标签：html, css, css-float

只是图像显示错误。错误在哪里？ [http://felipelopez.com.ar/prueba/](http://felipelopez.com.ar/prueba/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:35:00.083

您需要在使用后清除浮点数，例如在段落之后：

```
<br style="clear: both;" /> 
```

上面有一些文档：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

您显然希望将其作为一个类来执行，因此您的代码使用更好的实践。还有其他的清零方式，但是
清零是最简单的，用的 CSS 最少。

# java - 复合组件侦听器仅在页面重新加载后工作

> ID：12589037
> 
> 赞同：5
> 
> 时间：2012-09-25T18:33:45.233
> 
> 标签：java, ajax, jsf, composite-component

我有一个网页，其中包含一个子页面，该子页面根据我在 primefaces 停靠菜单 ( `ui:include`) 中选择的元素进行更改。一些子页面包含我实现的自定义复合组件。Web 应用程序显示的第一页让他的所有听众都正常工作。当我通过停靠菜单更改子页面时，VideoStatusTable 的侦听器（复合组件的侦听器）将无法工作，直到我在浏览器中刷新页面（使用`F5`）或者如果我在停靠菜单中再次选择该页面。

这是包含停靠菜单的主页。

```
<h:body style="width:100%;height:100%;position:relative;">
    <h:panelGroup id="contentPanelGroup">
        <ui:include src="#{Template.currentView.view}" />
    </h:panelGroup>

    <div id="header-wrapper">
        <h:form id="headerForm" styleClass="titleSize" style="position:relative;height:100%;width:100%;">
        </h:form>
    </div>

    <div id="footer-wrapper">
                <h:form id="footerForm">
                    <h:graphicImage name="ctec.png" library="images" style="position:absolute;left:30px;bottom:10px;"/>
                    <p:dock>
                        <p:menuitem value="#{msgs.ViewEnum_TRANSFER}" icon="#{resource['images:hard-drive-download.png']}" action="#{Template.setWindow( 0 )}" update=":contentPanelGroup :headerForm :msgsArea" />
                        <p:menuitem value="#{msgs.ViewEnum_STATUS}" icon="#{resource['images:gears.png']}" action="#{Template.setWindow( 1 )}" update=":contentPanelGroup :headerForm :msgsArea"/>
                        <p:menuitem value="#{msgs.ViewEnum_ORGANIZATION}" icon="#{resource['images:folder.png']}" action="#{Template.setWindow( 2 )}" update=":contentPanelGroup :headerForm :msgsArea" />
                        <p:menuitem value="#{msgs.ViewEnum_VALIDATION}" icon="#{resource['images:chart-bar.png']}" action="#{Template.setWindow( 3 )}" update=":contentPanelGroup :headerForm :msgsArea" />
                        <p:menuitem value="#{msgs.ViewEnum_REPORT}" icon="#{resource['images:documents.png']}" action="#{Template.setWindow( 4 )}" update=":contentPanelGroup :headerForm :msgsArea" />
                    </p:dock>
                </h:form>
    </div>
    <p:growl id="msgsArea" life="5000"/>
    <ui:debug/>

</h:body> 
```

`TemplateBean`看起来像这样：

```
@Named(value="Template") // CDI
@SessionScoped // CDI
public class TemplateBean implements Serializable {
    private static final long   serialVersionUID    = -8230221469543897876L;

    private Integer             window              = 2;

        // Some getters ...

        // Get Window
        public Integer getWindow() {
            return window;
        }

        public void setWindow( Integer window ) {
            this.window = window;
            FacesContext.getCurrentInstance().addMessage(
                    null,
                    new FacesMessage( FacesMessage.SEVERITY_INFO, getCurrentViewTitle(), getCurrentViewTitle() )
            );
            FacesContext.getCurrentInstance().addMessage(
                    null,
                    new FacesMessage( FacesMessage.SEVERITY_ERROR, getCurrentViewTitle(), getCurrentViewTitle() )
            );
        }
    } 
```

`ViewEnum`（用于选择显示哪个视图）：

```
public enum ViewEnum {
    TRANSFER ( "hard-drive-download.png", "/private/VideoTransfer.xhtml" ),
    STATUS ( "gears.png", "/private/ProcessStatus.xhtml" ),
    ORGANIZATION ( "folder.png", "/private/DataOrganization.xhtml" ),
    VALIDATION ( "chart-bar.png", "/private/ProcessValidation.xhtml" ),
    REPORT ( "documents.png", "/private/ReportGeneration.xhtml" ),
    ;

    private String                  iconFileName;
    private String                  view;
    private StreamedContent         icon = null;

    private ViewEnum( String iconFileName, String view ) {
        this.iconFileName = iconFileName;
        this.view = view;
    }
    public String getIconFileName() {
        return this.iconFileName;
    }
    public String getTranslationKey() {
        return "ViewEnum_" + this.toString();
    }
    public StreamedContent getIcon() {
        // irrelevant code ...
    }
    public String getView() {
        return this.view;
    }
} 
```

自定义组件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cmpnt="http://java.sun.com/jsf/composite/component">

    <composite:interface componentType="videoStatusTableComponent">
        <composite:attribute name="value" required="true"/>
        <composite:attribute name="selection" required="true"/>

        <composite:attribute name="selectionListener" required="true" method-signature="void listener(org.primefaces.event.SelectEvent)"/>
        <composite:attribute name="selectionUpdate" required="false" default="@this"/>
        <composite:attribute name="refreshListener" required="true" method-signature="void action()"/>
    </composite:interface>

    <composite:implementation>
        <p:dataTable id="cmpntVideoList" var="video" value="#{cc.attrs.value}" rowKey="#{video.key}" style="clear:both;"
            selection="#{cc.attrs.selection}" selectionMode="single" emptyMessage="#{cc.attrs.emptyValueListMsg}">

            <p:ajax event="rowSelect" listener="${cc.selectionListener}" process="@this" update="${cc.attrs.selectionUpdate}"/>

            <composite:insertFacet name="header"/>

            <p:column headerText="Test">
                #{video.humanReadableVideoId}
            </p:column>

            <f:facet name="footer">
                <h:commandLink action="${cc.attrs.refreshListener}" style="float:right;">
                    <h:graphicImage library="images" name="button-rotate-cw_16.png"/>
                    <f:ajax render="cmpntVideoList" execute="@this"/>
                </h:commandLink>
            </f:facet>

        </p:dataTable>

    </composite:implementation>

 </html>

@FacesComponent( "videoStatusTableComponent" )
public class VideoStatusTableComponent extends UINamingContainer {

    public void selectionListener( org.primefaces.event.SelectEvent event ) {
        FacesContext context = FacesContext.getCurrentInstance();
        MethodExpression ajaxEventListener = (MethodExpression) getAttributes().get( "selectionListener" );
        ajaxEventListener.invoke( context.getELContext(), new Object[] { event } );
    }

} 
```

第一个子页面（及其 Bean），其中包括组件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:cmpnt="http://java.sun.com/jsf/composite/component">
    <ui:composition>
        <h:form id="contentForm">
            <cmpnt:videoStatusTable id="transferingVideoList"
                value="#{videoTransfer.tableModel}"
                selection="#{videoTransfer.selectedTableReadyNotCompletelyTranferedVideo}"
                selectionListener="${videoTransfer.onVideoSelection}"
                selectionUpdate=":msgsArea"
                refreshListener="${processStatus.refreshUncompletedVideos}"
            >
            </cmpnt:videoStatusTable>
        </h:form>
    </ui:composition>
    </html>

    @Named( value="videoTransfer" ) // CDI
    @SessionScoped // CDI
    public class VideoTransferBean implements Serializable {

        private static final long   serialVersionUID    = -9019701853654362317L;

        private VideoStatus                         selectedTableReadyNotCompletelyTranferedVideo;
        private VideoStatusTableModel               tableModel;

        private List<Video>                         currentlyTranferingVideos = null;

        // Other irrelevant code...

        public VideoStatusTableModel getTableModel() {
            return tableModel;
        }

        public void setSelectedTableReadyNotCompletelyTranferedVideo(VideoStatus selectedTableReadyNotCompletelyTranferedVideo) {
            this.selectedTableReadyNotCompletelyTranferedVideo = selectedTableReadyNotCompletelyTranferedVideo;
        }

        public VideoStatus getSelectedTableReadyNotCompletelyTranferedVideo() {
            return selectedTableReadyNotCompletelyTranferedVideo;
        }

public void onVideoSelection( SelectEvent event ) {
        FacesMessage msg = new FacesMessage( "Video Selected: " + ((VideoStatus) event.getObject()).getHumanReadableVideoId() );
        FacesContext.getCurrentInstance().addMessage( null, msg );
    }
    } 
```

另一个包含相同组件的子页面（在我重新加载页面（通过停靠栏或如果我点击）之前，这里的侦听器不起作用`F5`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cmpnt="http://java.sun.com/jsf/composite/component"
>
    <ui:composition>
        <h:form id="contentForm">
            <cmpnt:videoStatusTable
                id="orphanVideoList"
                value="#{DataOrganization.videoTableModel}" 
                selection="#{DataOrganization.selectedVideo}"
                selectionListener="#{DataOrganization.onOrphanVideoSelection}"
                selectionUpdate=":msgsArea"
                refreshListener="#{DataOrganization.refreshOrphanVideos}"
            />
        </h:form>
    </ui:composition>
</html> 
```

```
@Named(value="DataOrganization") // CDI
@SessionScoped // CDI
public class DataOrganizationBean implements Serializable, MonitoredBean {

    private static final long serialVersionUID = 1686055743669628317L;

    // Constants and variables

    @EJB
    private DataOrganizationEJB controller;

    private Integer companyEntityID = null;

    private VideoStatusTableModel videoTableModel;
    private VideoStatus selectedVideo;

    public void refreshOrphanVideos() {
        setOrphanVideos(controller.getOrphanVideos(getCompanyEntityID()));
    }

    public void onOrphanVideoSelection(org.primefaces.event.SelectEvent event) {
        this.setSelectedVideo(((VideoStatus) event.getObject()));
    }

    public VideoStatusTableModel getVideoTableModel() {
        return videoTableModel;
    }

    public VideoStatus getSelectedVideo() {
        return selectedVideo;
    }
    public void setSelectedVideo(VideoStatus selectedVideo) {
        this.selectedVideo = selectedVideo;
    }
} 
```

有没有人知道如何避免重新加载网页以使组件的侦听器工作？

在 web XML 中，我已将其设置`STATE_SAVING_METHOD`为客户端。

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

注意：我使用 JSF 2.0、Glassfish 3.1.2.2、Primefaces 3.4。

谢谢！

****** *** ***更新***** ** *******

 **我发现问题确实来自组件。如果我使用完全相同的代码而不使用组件，那么一切正常。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:14:01.743

这看起来与我注意到的一些行为非常相似，并且在以下位置发现了这个问题：http: [//java.net/jira/browse/JAVASERVERFACES-2050](http://java.net/jira/browse/JAVASERVERFACES-2050)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T18:06:07.987

我有同样的问题，但你真的应该避免这样做！你应该少做通用组件。它对我有用。**

# language-agnostic - 向树中添加子树

> ID：12589038
> 
> 赞同：0
> 
> 时间：2012-09-25T18:33:50.647
> 
> 标签：language-agnostic, tree

假设我有一棵树 X

```
 a
                           b       c
                        d  e  f        g 
```

我想向 X 添加一个长子树 Y

```
 a
                           b
                           e
                           u 
```

所以 X+Y 看起来像这样。

```
 a
                       b       c
                    d  e  f        g
                       u 
```

如何实现这样的树连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:55:35.993

你所描述的对我来说听起来就像你试图在[trie](http://en.wikipedia.org/wiki/Trie)中插入一个单词。如果这就是你想要做的，你可以从 trie 的根和单词的开头开始，然后处理每个字符`x`- 如果没有`x`从当前节点标记的边，创建一个新节点并添加一个边它们之间; 然后，无论哪种情况，都沿着标记的边缘`x`移动到下一个字符。

# xcode - 网络或 Wi-Fi 的 Apple 可达性通知

> ID：12589042
> 
> 赞同：2
> 
> 时间：2012-09-25T18:34:05.673
> 
> 标签：xcode, reachability

这是我在应用程序中使用可达性的代码：

```
- (void) handleNetworkChange:(NSNotification *)notice
{

    NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

    if(remoteHostStatus == NotReachable) {
        UIAlertView *alertnew = [[UIAlertView alloc] initWithTitle:@"No Internet Connection!" message:@"Your device lost internet connection!"
                                                       delegate:self
                                              cancelButtonTitle:@"Close"
                                              otherButtonTitles:@"Dismiss", nil];
        [alertnew show];
    } else if (remoteHostStatus == ReachableViaWWAN) {
        //if connected to the Network
        UIAlertView *alertre = [[UIAlertView alloc] initWithTitle:@"Internet Connection!" message:@"Your device re-connected to the internet!"
                                                         delegate:self
                                                cancelButtonTitle:nil
                                                 otherButtonTitles:@"Ok!", nil];
        [alertre show];
    } else if (remoteHostStatus == ReachableViaWiFi) {
        //if connected to Wi-Fi
        UIAlertView *alertre = [[UIAlertView alloc] initWithTitle:@"Internet Connection!" message:@"Your device re-connected to the internet!"
                                                         delegate:self
                                                cancelButtonTitle:nil
                                                otherButtonTitles:@"Ok!", nil];
        [alertre show];
    }

} 
```

我想在用户失去互联网以及重新获得互联网时提醒他们。但是我遇到的问题是，当用户使用 iPhone（具有持续的网络连接）并且他们连接到 Wi-Fi 时，他们会在已经连接时收到警报。所以我只想在他们没有互联网连接并连接到 Wi-Fi 时提醒他们。此代码适用于没有数据计划的 iPod 和 iPad，但问题出在 iPhone 上。我可以做些什么来编辑它并让它只显示一个或另一个的警报吗？

我为最后一个警报尝试了这段代码：

```
else if (remoteHostStatus == ReachableViaWiFi && !(remoteHostStatus == ReachableViaWWAN)) {
        //if connected to Wi-Fi but without Network
        UIAlertView *alertre = [[UIAlertView alloc] initWithTitle:@"Internet Connection!" message:@"Your device re-connected to the internet!"
                                                         delegate:self
                                                cancelButtonTitle:nil
                                                otherButtonTitles:@"Ok!", nil];
        [alertre show];
    } 
```

但这并没有解决问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:28:05.970

代码逻辑中的基本错误是您将三个单独的状态视为两个状态。`NetworkStatus`在 Apple 的`Reachability`示例中，由`enum`此处看到的定义：

```
typedef enum {
    NotReachable = 0,
    ReachableViaWiFi,
    ReachableViaWWAN
} NetworkStatus; 
```

因为你本质上想要一个`BOOL`（Reachable or Not）。只需将当前网络状态与`NotReachable`. 因此，在 any`ReachableViaWiFi`或`ReachableViaWWAN`the的情况`BOOL`下`YES`。

```
BOOL reachable = (_reachability.currentReachabilityStatus != NotReachable); // underbar added for good ivar style. 
```

现在您只需要处理您拥有 WiFi 并转移到蜂窝网络或反之亦然的情况。对于这种情况，您必须跟踪调用之间的状态。添加一个`BOOL`名为`_reachable`. 然后在您的观察者方法中比较您的新值。

```
-(void)reachabilityDidChange:(NSNotification *)note{
    BOOL reachable = (_reachability.currentReachabilityStatus != NotReachable);
    if (reachable != _reachable){
        // State Changed. Inform the user if necessary.
        if (reachable){
            // Connected.
        } else {
            // Lost connection.
        }
    }
    _reachable = reachable;
} 
```

**警告：下面不请自来的建议**

关于这些`UIAlertView`s 的一般概念的最后一点说明。警报本质上是在向用户尖叫。重新连接的警报本质上是大喊“嘿！现在一切都好！”。我想推荐观看 WWDC2012 的第 221 场会议，他们谈到了常见的设计陷阱。大约 35 分钟后，他们开始谈论警报。很明显，他们正试图引导开发人员尽可能远离使用警报。

# spring - 如何在多个 ResourceBundles 之间共享与语言环境无关的属性？

> ID：12589043
> 
> 赞同：0
> 
> 时间：2012-09-25T18:34:11.727
> 
> 标签：spring, localization

场景：在应用程序中，我有与语言相关的属性文件，它们用作模板来生成电子邮件：

`email-subscription_en.properties`：

```
email.subject=You are successfully subscribed to list {0}
email.body=... 
```

`email-cancellation_en.properties`：

```
email.subject=You are successfully unsubscribed from list {0}
email.body=... 
```

等等。现在在 Spring 上下文中，我想要这些包：

```
<bean id="subscriptionMailProperties" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="org.company.email-subscription" />
</bean>

<bean id="cancellationMailProperties" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="org.company.email-cancellation" />
</bean> 
```

与我希望在上下文中声明的这些与语言无关的公共属性合并：

```
<util:properties id="commonMailProperties">
    <prop key="email.from">noreply@company.org</prop>
    <prop key="email.to">{0}@company.org</prop>
</util:properties> 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:14:59.160

据我所知，没有对此的支持。您正在尝试将配置与资源包混合。我觉得你现在拥有的是对的。如果您没有保持原样的奢侈，这里有一种方法（更多的黑客）

1.  使用“ commonMailProperties `org.springframework.context.MessageSource`”（java.util.Properties）作为依赖项来实现，并将 bean id 称为“commonMessageSource”。

2.  In 'getMessage' implementations get the value from 'commonMailProperties'.

3.  Inject 'commonMessageSource' to 'subscriptionMailProperties' and 'cancellationMailProperties', for 'parentMessageSource' property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:33:47.610

If somebody got interested in complete solution:

*   Create class `PropertiesMessageSource`:

    ```
    /**
     * {@link org.springframework.context.MessageSource} implementation that resolves messages via underlying
     * {@link Properties}.
     */
    public class PropertiesMessageSource extends AbstractMessageSource {

        private Properties  properties;

        /**
         * Set properties to use.
         */
        public void setProperties(Properties properties) {
            this.properties = properties;
        }

        @Override
        protected MessageFormat resolveCode(String code, Locale locale) {
            String property = properties.getProperty(code);

            if (property == null) {
                return null;
            }

            return createMessageFormat(property, locale);
        }
    } 
    ```

*   Use it:

    ```
    <bean id="commonMailProperties" class="org.company.PropertiesMessageSource">
        <property name="properties">
            <props>
                <prop key="email.from">noreply@company.org</prop>
                <prop key="email.to">{0}@company.org</prop>
            </props>
        </property>
    </bean>
    <bean id="subscriptionMailProperties" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="org.company.email-subscription" />
        <property name="parentMessageSource">
            <ref bean="commonMailProperties"/>
        </property>
    </bean> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:56:01.160

`ResourceBundleMessageSource` (more exactly: all descendants of `AbstractMessageSource`) now has `commonMessages` property which can hold locale-independent values. For example while you want to have mail subject and body locale-dependant, some properties (mail from and mail to) are common across all bundles (check [SPR-10291](https://jira.springsource.org/browse/SPR-10291)):

```
<bean id="mailProperties" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="org.mycompany.email" />
    <property name="commonMessages">
        <props>
            <prop key="email.from">empty@mydomain.org</prop>
            <prop key="email.to">%s@mydomain.org</prop>
        </props>
    </property>
</bean> 
```

# java - 如何附加到原始文件中的文本？

> ID：12589047
> 
> 赞同：0
> 
> 时间：2012-09-25T18:34:39.663
> 
> 标签：java, android, android-file

我的意思是我想将我的 txt 附加到原始文件中。

我用这个，但它不能。

```
FileOutputStream fOut = openFileOutput(R.raw.a, MODE_WORLD_APPEND);
OutputStreamWriter osw = new OutputStreamWriter(fOut); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:43:22.383

raw中的文件是用ap打包的。所以这些是只读文件。您不能修改这些文件。您需要将其复制到文件系统上，然后进行更改。

**编辑**：检查这篇文章[将原始文件复制到 SDCard？](https://stackoverflow.com/questions/8664468/copying-raw-file-into-sdcard). 添加权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果您正在写入 SD 卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:43:54.940

我是 android 编程新手，但我认为问题在于您无法更改 R.raw 文件。但是，您应该能够像这样直接写入设备上的文件：

```
FileWriter f0 = new FileWriter("file1.txt"); 
f1.write("Hello Ersin!"); 
f1.close(); 
```

访问和修改在设备上创建的文件而不是在项目中创建的文件也应该更容易。

# jquery - 我可以使用 jquery 更改 twitter bootstrap 标签的背景颜色吗？

> ID：12589048
> 
> 赞同：2
> 
> 时间：2012-09-25T18:34:53.597
> 
> 标签：jquery, twitter-bootstrap

我正在使用[twitter 引导程序](http://twitter.github.com/bootstrap/)，并且正在尝试更改标签的背景颜色。我已经允许用户更改颜色映射，所以我不能简单地在样式表中更改它们。我最近的尝试如下：

jQuery

```
var f_threshold_color = localStorage.getItem('f_threshold_color');  

if (f_threshold_color) {
    $('.label-important').css('background-color', f_threshold_color);
} 
```

HTML 如下所示：

```
....
<td><span class="label label-important">105</span></td>
... 
```

twitter-bootstrap.css 中的样式如下所示：

```
.label-important {
   background-color: #b94a48;
}
.label-important:hover {
   background-color: #953b39;
} 
```

知道为什么它不使用新的背景颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:40:43.607

如果您只是更改以下行，它可以工作（请参阅[jsfiddle](http://jsfiddle.net/RNPSm/1/)）：

```
var f_threshold_color = 'red'; 
```

这意味着当您将颜色存储在本地存储中时出现问题。

# php - 空字段导致mysql错误

> ID：12589055
> 
> 赞同：-3
> 
> 时间：2012-09-25T18:35:26.750
> 
> 标签：php, mysql

我有一个包含几个可选字段的表单。当 mysql 查询保存表单中的数据时，如果任何字段留空，它将失败。

解决这个问题的最佳方法是什么？我希望数据库中的字段保持为空，而不是仅仅为了让查询满意而输入数据。

```
$sql = "INSERT INTO s_num_serialz (id, name, date_entered, created_by, account_name, type, supply_type, covered_by_support, install_date, job_number, replacement_for) VALUES ('$id', '$serial_num', NOW(), '$diary_id', '$account', '$type', '$supply_type', $support_cover, '$dispatch_date', '$job_num', '$old_serial_num')";
$result = $mysqli->query($sql) or die($mysqli->error.__LINE__); 
```

这是一个直截了当的插入，但如果其中一个值（例如 $job_number）为空，则查询将失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:43:53.127

收到后检查字段是否为空

```
$r=trim($_POST["something"])
if($r!=''){
  //code goes here    
} 
```

如果您使用的是表单查询

```
Insert into table (..,..,...) values (...,...,) 
```

尝试切换到

```
Insert into table set column1='', column2='' 
```

并添加一些代码来帮助我们回答，因为它**应该可以工作**。

# java - 在点数组列表中查找重复点

> ID：12589056
> 
> 赞同：1
> 
> 时间：2012-09-25T18:35:35.263
> 
> 标签：java, android

我正在尝试删除两个数组列表中的所有重复点。每个列表都是通过查找哪个国家链接到哪个国家来创建的，如果它们链接，那么它会同时在两个数组中创建一个新点。

这个想法是这样我可以循环遍历两个数组的大小（或一个数组的大小）并在点之间画线。

目前的问题是它没有删除这些点或将它们全部删除。

我有以下数组

```
//Different values of course.
Array1 = [Point[1,5]],[Point[1,5]],[Point[1,5]][Point[1,5]]
Array2 = [Point[1,5]],[Point[1,5]],[Point[1,5]][Point[1,5]] 
```

这是删除重复数组的代码：

```
private ArrayList<ArrayList<Point>> checkDuplicatePoints(ArrayList<Point> Array1, ArrayList<Point> Array2)
{
    for(int index1 = 0; index1 < Array1.size(); index1++)
    {
        for(int index2 = 0; index2 < Array2.size(); index2++)
        {
            //So not the same position in the list.
            if(index1 != index2)
            {
                if(
                    Array1.get(index1).x == Array2.get(index2).x &&
                    Array1.get(index1).y == Array2.get(index2).y
                )
                {
                    Array1.remove(index1);
                    Array2.remove(index2);
                    checkDuplicatePoints(Array1, Array2);
                }
            }
        }
    }

    ArrayList<ArrayList<Point>> n2DPointArray = new ArrayList<ArrayList<Point>>();

    n2DPointArray.add(Array1);
    n2DPointArray.add(Array2);

    return n2DPointArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:25:54.900

据我了解，您的问题可能是您应该查看这些代码和示例

```
public class test {
public static void main(String ap[])
{

    List<Point> mList1 =new ArrayList<Point>();
    List<Point> mList2 =new ArrayList<Point>();
    Point mPoint1 = new Point(1, 2);
    Point mPoint2 = new Point(2, 3);

    for (int i=0;i<3;i++){
        mList1.add(mPoint1);
        mList1.add(mPoint2);
    }
    Point mPoint3 = new Point(1, 2);
    Point mPoint4 = new Point(3, 4);

    for (int i=0;i<2;i++){
        mList2.add(mPoint3);
        mList2.add(mPoint4);
    }

    System.out.println(mList1);
    //System.out.println(mList2);
    new test().removingDuplicatesQID(mList1, mList2);
    System.out.println(mList1);
}
public void removingDuplicatesQID(List<Point> list1,List <Point> list2)
{
    Set<Point> uniqueEntries = new HashSet<Point>();
    for (Iterator iter = list1.iterator(); iter.hasNext();)
    {
        Point element = (Point) iter.next();
        if (!uniqueEntries.add(element))
            /* if current element is a duplicate, remove it */
            iter.remove();
    }
    uniqueEntries.clear();
}
} 
```

输出

```
 System.out.println(mList1); 
```

[java.awt.Point[x=1,y=2], java.awt.Point[x=2,y=3], java.awt.Point[x=1,y=2], java.awt.点[x=2,y=3], java.awt.Point[x=1,y=2], java.awt.Point[x=2,y=3]]

//从arrayList1中删除重复项后

```
 System.out.println(mList1); 
```

[java.awt.Point[x=1,y=2], java.awt.Point[x=2,y=3]]

我希望这可以帮助你或者..else更具体到你的问题和结果你需要从你的数组列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:43:46.310

将它们放入[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)中。集合不允许重复条目。

编辑：另一种可能性：首先不要添加它们。

```
void addPoint( Point newPoint )
{
    if( !array1.contains(newPoint) )
    {
        array1.add(newPoint);
    }
} 
```

另一个编辑：

现在，更清楚了：为什么不为此创建自己的数据结构。让我们称之为`CountryLink`。

如果它的两个实例具有相同的两个点，无论是作为开始还是结束，它将有两个`Point`s 和覆盖，因为它返回 true。`equals()`然后您可以轻松地将其放入 ArrayList 中，如上所示。或者进入一个自动拒绝重复的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:44:57.443

我不确定，如果我理解你的问题是正确的，但这是一个制作列表的解决方案，它只包含不同的元素（它不是很有效）：

```
private ArrayList<Point> distinctPoints(ArrayList<Point> first, ArrayList<Point> second)
{
    ArrayList<Point> distinct = new ArrayList<Point>();

    for(Point point : first)
        if(!distinct.contains(point))
            distinct.add(point);

    for(Point point : second)
        if(!distinct.contains(point))
            distinct.add(point);

    return distinct;
} 
```

另一个用于查找重复项：

```
private ArrayList<Point> duplicatePoints(ArrayList<Point> first, ArrayList<Point> second)
{
    ArrayList<Point> duplicate = new ArrayList<Point>();
    ArrayList<Point> distinct = new ArrayList<Point>();

    for(Point point : first)
        if(distinct.contains(point))
            duplicate.add(point);
        else 
            distinct.add(point)   

    for(Point point : second)
        if(distinct.contains(point))
            duplicate.add(point);
        else 
            distinct.add(point)  

    return duplicate;
} 
```

如果您没有为此使用`java.awt.Point`该类，那么您的 Point 类应该有一个覆盖`equals()`并且看起来像这样：

```
public class Point
{
    public int x;
    public int y;

    public Point(int x, int y) {this.x=x; this.y=y;}
    public Point(){this(0,0);}

    @Override
    public boolean equals(Object obj)
    {
        if(obj == null) return false;
        if(obj == this) return true;
        if(obj.getClass() != Point.class) return false;
        Point other = (Point) obj;
        return other.x==this.x && other.y==this.y;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:47:09.017

我不认为我遵循您的想法，但为什么不使用迭代器？

例如：

```
for (Iterator iter = yourList.iterator(); iter.hasNext(); )
 {
    Object item = iter.next();

    if (YOUR_CONDITION_HERE)
    {
        iter.remove();
    }
} 
```

# javascript - 删除警报框

> ID：12589057
> 
> 赞同：0
> 
> 时间：2012-09-25T18:35:36.013
> 
> 标签：javascript, jquery

我正在使用下面的 js 函数

```
function view_city(val) {
    var val = document.getElementById("city").value;

    $(document).ready(function() {
        var availableTags1 = [];
        $.ajax({
            url: "res.php?key=" + val,
            success: function(result1) {
                var result1 = result1;
                var availableTags1 = result1.split("|");

                $("#city").autocomplete({
                    source: availableTags1
                });
            }
        });
        alert(availableTags1);
    }); 
```

这里我不需要警告框，如果我删除了警告框，功能将无法正常工作，请帮助我这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:28:28.540

听起来你在某处有竞争条件，Alertboxes 将锁定线程，让 ajax 调用有时间完成，因为它是在你的主线程之外处理的。我会看看您是否在 ajax 回调之外的任何地方调用数据，或者在它实际可用于回调之前取决于该数据。

它可能在您发布的代码之外。

此外，其中一些代码看起来是周期性的，当您发出 ajax 请求时，为什么在页面加载时期望城市中的值不是“”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:36:38.787

尝试替换`alert(availableTags1);`为`return;`.

# ruby-on-rails - bundle exec 中无法识别 rake 0.9.2

> ID：12589058
> 
> 赞同：0
> 
> 时间：2012-09-25T18:35:37.497
> 
> 标签：ruby-on-rails, rake, bundle, mysql2

这是我在运行 db:migrate 时遇到的错误。

`rake db:migrate rake aborted! You have already activated rake 0.9.2.2, but your Gemfile requires rake 0.9.2\. Using bundle exec may solve this.`

然后我运行 bundle exec rake 0.9.2 这就是我得到的

```
 'rake aborted!dlopen(/Users/connorphillips/.rvm/gems/ruby-1.9.3-p194/gems/mysql2 0.2.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib Referenced from: /Users/connorphillips/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /Users/connorphillips/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.11/lib/mysql2/mysql2.bundle' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:35:30.660

您可能需要安装正确的 MYSQL2 gem。在 Gemfile 中，确保包含 mysql2

```
gem 'mysql2' 
```

然后重新捆绑并尝试

```
bundle exec rake db:migrate 
```

# xpath - 需要使用兄弟孩子、祖先的复杂 Xpath

> ID：12589059
> 
> 赞同：3
> 
> 时间：2012-09-25T18:35:37.093
> 
> 标签：xpath, xquery-sql, tree-traversal, siblings

我需要根据从父母/祖父母的兄弟姐妹的孩子中提取的其他值来查找属性值。我认为这将需要两种不同的表达方式。

因此，给定以下 XML（源自可能长达数千行的日志文件）：

```
<p:log xmlns:p="urn:NamespaceInfo">
 <p:entries>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:attributes>
       <p:attrib name="Position" value="1B2" />
       <p:attrib name="Something" value="Something_else" />
     </p:attributes>
     <p:msg>
     </p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:attributes>
       <p:attrib name="Form" value="FormA" />
     </p:attributes>
     <p:msg>
     </p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:msg>Successful....</p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T12:12:12">
     <p:attributes>
       <p:attrib name="Position" value="1B3" />
       <p:attrib name="Something" value="Something_else" />
     </p:attributes>
     <p:msg>
     </p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:attributes>
       <p:attrib name="Form" value="FormB" />
     </p:attributes>
     <p:msg>
     </p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:msg>Processing....</p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
     <p:msg>Error1</p:msg>
   </p:entry>
   <p:entry timestamp="2012-12-31T09:39:25">
    <p:msg>Error1</p:msg>
   </p:entry>
 </p:entries>
     ...
</p:log> 
```

*   （`<p:attributes>`父标签可以有多`<p:attrib>`个子标签）
*   （`<p:event>`标签只能有一个`<p:msg>`标签）

首先，我需要获取`value`对应`name`属性为的属性的值`Position`，但前提是祖父母的兄弟姐妹有一个文本为`p:entry`的孩子。此外，它需要留在该部分内。例如，我不希望第一次出现该对，因为新的/对出现在 之前，即使从技术上讲，与 the是祖父母的兄弟姐妹。`p:msg``Error1``Position'/'Value``Position``Value``Error1``p:msg``Error1`

`Position`接下来，我需要`Value`我刚刚抓取的孩子的父母的时间戳属性值。`p:entry`所以，找到位置，然后找到祖父标签的时间戳属性值。

所以对于这个例子，我应该只能检索以下值：

`1B3`

`2012-12-31T12:12:12` （给出的日期/时间戳是任意值。这个是不同的，所以你知道我引用的是哪一个）。

我知道有点令人困惑。我还需要确保只获取一个实例，因为我使用 XQuery 从数据库中获取数据，并且每个表达式都必须生成一个奇异值。

`p:msg`我可以通过以下方式获得与 with关联的第一个时间戳`Error1`： `//p:entry[descendant::p:msg='Error1.'][1]/@timestamp`

但似乎无法回到树上来获取其他值。

我可以获得具有 p:attrib 孙子的 p:events 的所有时间戳：`//p:entry[descendant::p:attrib[@name=''Position'']]/@timestamp)[1]`

但我似乎无法将其限制为仅具有“Error1”的那个。我不能根据职位进行选择。我必须首先基于内容。

## 奖金问题

我怎么能在日志文件的下一个实例上再次执行此操作？（不仅仅是第二`Error1`条消息，下一次在日志文件中`Error1`显示下一个“父/兄弟”匹配的消息）。一旦我得到上述问题的答案，这可能是显而易见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:58:13.877

**更新**：

好的，我想我明白了。这是第一个的答案：

```
//p:msg[text()="Error1"]/../preceding-sibling::p:entry[./*/p:attrib[@name="Position"]][1]/*/p:attrib[@name="Position"]/@value 
```

这是从标签开始工作*的*，`p:msg`这使得选择`[1]`前面的父`p:entry`标签中的第一个（即在其中）更容易，这些父标签满足他们有一个孙子的条件，即`p:attrib`name `Position`。

获取时间戳稍微简单一点：

```
//p:msg[text()="Error1"]/../preceding-sibling::p:entry[./*/p:attrib[@name="Position"]][1]/@timestamp 
```

试试看，看看你的想法。

**原始答案**：

通常我不会发布半成品的答案，但我猜你不会得到任何其他东西，因为这个问题是如此复杂，所以这是你在第一段中描述的 xpath：

```
//p:entry[following-sibling::p:entry/p:msg/text()="Error1"]/*/p:attrib[@name="Position"]/@value 
```

这将得到

> 具有对应名称属性 Position 的 value 属性的值，但前提是祖父母的同级 p:entry 具有带有 Error1 文本的子 p:msg。

但是，当您说“它需要保留在该部分内”时，我不知道您的意思。你能澄清一下吗？这将返回`1B2`和`1B3`。

对于问题的第二部分，您可以通过以下方式获取上述条目的时间戳：

```
//p:entry[following-sibling::p:entry/p:msg/text()="Error1" and ./*/p:attrib[@name="Position"]]/@timestamp 
```

尽管如此，这不会做你提到的“部分”事情。不幸的是，这超出了我（当前）对 xpath 的了解，这有点棘手。

# ruby-on-rails - Rails Devise current_user 在匹配项中未定义？高级路由约束

> ID：12589061
> 
> 赞同：6
> 
> 时间：2012-09-25T18:35:39.127
> 
> 标签：ruby-on-rails, devise

`NameError (undefined local variable or method "current_user" for #<APIRouter:0x007ffd54a81f98>):`当我尝试在**比赛**中使用 current_user 时出现错误？约束。我希望某些虚拟用户被路由到一组控制器，而其他用户被路由到另一组控制器。但是，当我尝试使用 current_user 时出现错误。

*   设计（2.0.4）
*   导轨 (3.2.2)

我的匹配约束在 APIRouter 类中定义：

```
class APIRouter
  def matches? request
    @use_rm_app = ENV["USE_RM_APP"] == "true" || (current_user && current_user.is_test)
  end
end 
```

关于如何在比赛中使用当前用户的任何想法？[Rails 指南](http://guides.rubyonrails.org/routing.html#advanced-constraints)中定义的约束。

routes.rb 文件中的部分：

```
#  Route to the rm_app controller if APIRouter says we should, otherwise use the real backend controllers.
match '/api/v1/*path', :controller => 'api/v1', 
  :action => 'handle_create_request', 
  :via => :post, :constraints => APIRouter.new 
```

***更新：感谢 ksol 解决。*** 尝试 3 有效。获取用户使用`request.env["warden"].user(:user)`

解决办法是修改APIRouter

```
 def matches? request
    user = request.env["warden"].user(:user)
    (user && user.is_test) || ENV["USE_RM_APP"] == "true"
  end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T18:38:23.873

`current_user`仅在您的控制器和视图中可用。有不止一种方法可以实现您想要的，更容易将其作为参数提供给您的方法。

**编辑**

如果`current_user`如果可以在路由器中访问，则可以通过执行将其传递给您的约束类`constraints: APIRouter.new(current_user)`。然后，您需要定义`APIRouter#initialize`current_user 并将其存储在一个实例 var 中，您可以在`matches?`.

**编辑 2**

我只记得设计允许您在路由器中执行此操作：

```
authenticated :user do
  root :to => "main#dashboard"
end 
```

我不知道如何确保这一点`user.is_test`。

**编辑 3**

最后一次尝试。`request.env["warden"].user(:user)`如果经过身份验证，应该给你一个用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-04T03:37:28.550

基于 ksol 的帖子，您可以通过将块传递给经过身份验证的来确保 user.is_test：

```
authenticated :user, lambda {|u| u.is_test } do
    // route stuff here
end 
```

这是假设 u.is_test 返回一个布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T05:35:33.410

只要记住添加 diff :as 对于两个 root 否则它将通过错误

```
authenticated :user do
  root :to => "main#dashboard", :as => :foo
end

root :to => "main#landing_page" 
```

# c# - C# 版本的 Flee？

> ID：12589066
> 
> 赞同：3
> 
> 时间：2012-09-25T18:35:54.143
> 
> 标签：c#

[Flee](http://flee.codeplex.com/)真的很棒，但有人知道它的 C# 端口吗？

我在这个问题的一个答案中看到了这一点： [Compiling C# on the fly](https://stackoverflow.com/questions/12422338/compiling-c-sharp-on-the-fly)

我希望 c# 能够处理自己可能出现的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T18:38:53.280

鉴于 Flee 是用 Visual Basic .NET 编写的，您可以直接从 C# 中使用它。两种语言之间的翻译通常相当容易，通常可以使用[在线自动转换器](https://www.google.com/search?q=C%23%20to%20vb.net%20converter)完成。

但是，如果你真的想避免它，你可以使用[NCalc](http://ncalc.codeplex.com/)代替，它也为 .NET 提供了很好的表达式解析，并且是用 C# 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:41:05.450

看起来最近有一次转换，在这里： http: [//fleesharp.codeplex.com/](http://fleesharp.codeplex.com/)。

我已经将它用于我正在处理的项目并且没有发现任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-22T08:28:47.763

我是 CSharpEval ( [http://csharpeval.codeplex.com](http://csharpeval.codeplex.com) ) 的作者。性能应该类似于 Jace.NET，因为最终结果是一个编译函数。此外，CSharpEval 正在积极开发中（因为我在现有项目中使用它）

# linux - 有效文件的 Shell 脚本语法错误

> ID：12589069
> 
> 赞同：0
> 
> 时间：2012-09-25T18:36:00.447
> 
> 标签：linux, shell, command-line, centos

有人在这里帮助shell脚本吗？
我在文件夹 /home/username/down/devel 中有 shell 脚本（脚本文件名为 php）当我运行脚本时，我得到如下错误：-

```
/usr/local/lib/php.ini]: No such file or directory
devel/php: line 4: syntax error near unexpected token `"/usr/local/bin/php",'
devel/php: line 4: `exec("/usr/local/bin/php", *args)' 
```

但是相同的 sciprt 正在其他朋友的机器上工作。这里有什么问题？有人在这里帮助shell脚本吗？下面是我的shell脚本代码

```
#!/bin/bash

args=['-c', "/usr/local/lib/php.ini"]
exec("/usr/local/bin/php", *args) 
```

只是提到我的 php.ini 文件存在。我的机器是linux CentOS release 5.5 (64bit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:53:27.653

如果您想在 bash 中使用数组，请查看[http://www.thegeekstuff.com/2010/06/bash-array-tutorial/](http://www.thegeekstuff.com/2010/06/bash-array-tutorial/)

# ruby-on-rails - 智能手机上禁用 cookie 的 InvalidAuthenticityToken

> ID：12589071
> 
> 赞同：2
> 
> 时间：2012-09-25T18:36:02.923
> 
> 标签：ruby-on-rails, forms, protect-from-forgery

使用 Rails 3.0.3 和 Heroku

我的 Heroku 应用程序上的表单帖子出现 InvalidAuthenticityToken 之类的错误。在我的应用程序控制器中，我启用了protect_from_forgery。

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  ...
end 
```

我的搜索表单

```
<%= form_tag(searchresults_url) do %>
  <%= text_field_tag :search_query, '', :size => 14 %> <%= submit_tag (t :search) %>
<% end %> 
```

路线：

```
match 'searchresults' => 'home#searchresults', :as  => :searchresults

class HomeController < ApplicationController

  def searchresults

    @query = query_string
        @entries_found = Counter.where(...)     

  end

end 
```

当有人尝试通过我的搜索表单搜索网站并且他们**禁用了 cookie**并使用智能手机时，就会发生无效的令牌错误。我曾尝试使用禁用 cookie 的网络浏览器 (Firefox) 访问该网站，但效果很好。

我在我创建的“搜索引擎”上没有出现这种行为（以我无法在这个应用程序中使用的方式）所以出了什么问题。为什么只禁用智能手机和 cookie？

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:16:37.377

一个快速而肮脏的“解决方案”是添加

```
protect_from_forgery :only => [:create, :update, :destroy] 
```

对于相关的控制器。我不确定这会给网站带来什么风险......

# android - Android 中 onWindowFocusChanged 的 替代方案

> ID：12589077
> 
> 赞同：1
> 
> 时间：2012-09-25T18:36:31.477
> 
> 标签：android, android-layout

我正在使用 onWindowFocusChanged 来检测我的 android 应用程序中的弹出窗口，然后终止生成的弹出窗口。这种方法的问题在于，在与弹出窗口相关的服务实际上被我的代码杀死之前，弹出窗口会显示很短的时间。是否有任何其他“开启”方法或其他方法可以在弹出窗口出现在我的活动中之前阻止它？

# assembly - 在 HC12 中是否可以直接比较 2 个寄存器？

> ID：12589081
> 
> 赞同：0
> 
> 时间：2012-09-25T18:37:00.790
> 
> 标签：assembly, 68hc12

如果我已将一个值加载到寄存器 X 中，并将一个值加载到寄存器 Y 中，并且我想比较它们……通常我必须执行以下操作：

```
ldx value_1
ldy value_2
pshy
cpx 0,sp
ins 
```

但这是比较的 3 次操作。有没有办法直接做到这一点？我已经尝试过`cmp 0,y`cmp `y`，但那些并没有做我想要的。

这只是我必须忍受的事情吗？

谢谢，

z。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:46:44.290

对于 X 和 Y，我认为是的，您必须先加载它们。

但是，如果您可以使用 A 和 B，则可能可以使用 SBA。这将从 A 中减去 B 的内容，设置零和其他标志，就像在比较中一样。

# coldfusion - cfindex 上的 CF10 Fieldboost 没有效果

> ID：12589084
> 
> 赞同：0
> 
> 时间：2012-09-25T18:37:15.060
> 
> 标签：coldfusion, solr, coldfusion-10

也许这是一个新的、大部分未使用的功能，但我正在尝试根据来自我们数据库的查询创建一个集合。这是一个简单的问答，我想将问题中的匹配排名高于答案。似乎合乎逻辑，因为目前搜索“注册课程”这个问题“我如何注册课程”的排名低于“我如何为我的课程购买书籍”，因为我认为书籍答案中的内容更匹配。因此，如果问题与查询中的文本非常匹配，我想增加问答。

CF10 在 cfindex 上有一个“Fieldboost”字段，但这对结果的影响为 0。我添加并删除它，没有任何变化。分数和排名保持完全相同。

```
<cfindex action="refresh" collection="faq" 
      type="custom" 
      title="question" 
      body="question,answer" 
      fieldboost="question:6" 
      key="faq_id" 
      query="updateQuery" 
      location_i="location_id" /> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:49:48.200

根据[Solr 文档](http://wiki.apache.org/solr/UpdateXmlMessages)，任何要提升的字段都必须`omitNorms="false"`在 schema.xml 中。默认值是`false`，但是否有可能`true`在您的 schema.xml 中设置它？我在上面的 CFINDEX 语句中看到的另一个问题是，您没有在`fieldboost`参数中指定字段名称，而是在查询列中指定。如果你想提升`title`那么也许你需要

```
<cfindex ... fieldboost="title:6" ... /> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:53:30.613

所以我搜索了 Raymond Camden 的网站，发现了一个我认为我之前尝试过的小答案，但也许我的语法错误。我正在使用`title:#URL.q#^2`它来提高搜索中标题的价值。

虽然这可行，但 CF10 文档表明我应该能够使用该`fieldboost`属性执行此操作，但我仍然无法开始工作。

# logging - 在 Rails 中跟踪控制器请求的持续时间？

> ID：12589087
> 
> 赞同：0
> 
> 时间：2012-09-25T18:37:25.017
> 
> 标签：logging, ruby-on-rails-3.2

我的控制器中有一个下载操作，当用户单击下载链接时会记录该操作。有什么方法可以跟踪下载完成或至少成功所需的时间？

这是控制器中的下载操作（Rails 3.2.8）：

```
def download
    send_file @download.attachment.path, :filename => @download.attachment_file_name,
                                         :content_type => @download.attachment_content_type

    DownloadsLog.debug "log details here! -- at #{Time.now}"
end 
```

downloads_log.rb 模型

```
class DownloadsLog
  def self.debug(message=nil)
    @@downloads_log ||= Logger.new("#{Rails.root}/log/downloads.log", 10, 1024000)
    @@downloads_log.debug(message) unless message.nil?
  end
end 
```

也许这是不可能的，但我想我会问是否有人有任何想法......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:58:17.420

在 Rails 3 中，将一段代码包装在一个块中，并将其提供给方法[`benchmark`](http://apidock.com/rails/ActiveSupport/Benchmarkable/benchmark)。

```
benchmark "<My identifying label>" do
  # do this and that...
end 
```

在您的日志中，您将看到一行指示您的块执行所用的时间：

```
<My identifying label> (138.8ms) 
```

您甚至可以在视图中使用它：

```
<% benchmark "Process data files" do %>
  <%= expensive_files_operation %>
<% end %> 
```

# java - Zxing 不扫描某些 Data Matrix 码

> ID：12589089
> 
> 赞同：2
> 
> 时间：2012-09-25T18:37:39.797
> 
> 标签：java, image-processing, zxing, barcode-scanner

嗨，我可以使用 Zxing 库读取从 Internet 下载的一些二维数据矩阵条形码图像，但无法读取从我的高分辨率彩色相机图像中拍摄的图像。现在我将它们转换成黑白图像，但静止图像不可读。有人可以建议我在哪里做错了吗？我在这里附上了一些图片。请帮忙。

![图 1](../Images/8db2f0e0944dfed5aa60828d11955237.png) ![图 2](../Images/7e10c503816701b76091fb6ce1f6ebf7.png) ![图 3](../Images/b797fbad1a1b394fd276dafb81742515.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:43:32.513

这些是黑白条码，不是标准条码。图书馆不阅读它们。您将不得不反转图像。

# clojure - Clojure 宏作为函数/宏的“部分”？

> ID：12589090
> 
> 赞同：5
> 
> 时间：2012-09-25T18:37:41.407
> 
> 标签：clojure, macros, partial

这类似于[将 Clojure 宏视为函数](https://stackoverflow.com/questions/5531986/treat-clojure-macro-as-a-function)中讨论的问题，但是在尝试最佳答案中的方法时，我得到了一个错误。希望关于我的特定应用程序的太多信息是不必要的，因为它非常复杂，但这里是我尝试做的一个精简版本：

```
(defmacro make-fn [m arg1] 
    `(fn [& args#] 
      (eval `(~'~m ~'~arg1 ~@args#)))) 
```

我在这种情况下使用了宏：

```
(let [columns (make-columns table-width)
       table-name (keyword (str "table_" n))]
  (apply (make-fn helpers/tbl table-name) columns)) 
```

“helpers/tbl”是一个宏，它需要一个表名关键字和可变数量的包含列规范的列表（如 [:varchar 100] 或其他东西）。我正在尝试动态创建随机数据库表规范以方便一些测试。无论如何，在尝试执行上述代码时，我收到以下错误：

```
CompilerException java.lang.RuntimeException: Unable to resolve symbol: table-name in this context, compiling:(NO_SOURCE_PATH:1) 
```

我有点理解这个问题：宏扩展是在编译时完成的，我试图在宏扩展中包含一个运行时值，因此奇怪地使用引用和取消引用来让一切设置得恰到好处。我基本上想要一个宏的部分，并且我需要能够为不同命名空间中的不同宏重用这种机制，并让所有变量解析正确。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:52:22.990

该问题是由 Clojure 解析语法引号（反引号）表达式中的符号的方式引起的。为了避免意外捕获变量，Clojure 总是将语法引用表达式中的符号解释为引用 Vars（*而不是*局部变量）。

你可以通过“滚动你自己的”表单构建代码来解决这个问题，相当于由 syntax-quote 生成的代码。它像罪恶一样丑陋，但它有效......只是不要说我没有警告你：

```
(defmacro make-fn [m arg1]
  (let [g (gensym)]
    (list 'fn ['& g]
      (list 'eval (list 'concat (list 'list m arg1) g))))) 
```

哇，这就像回到我的 Common Lisp 时代......

# internet-explorer - TinyMCE 和引导程序冲突

> ID：12589093
> 
> 赞同：2
> 
> 时间：2012-09-25T18:37:52.720
> 
> 标签：internet-explorer, twitter-bootstrap, tinymce, normalize

我使用 tinyMCE 编辑器来编辑我网站上的文章内容，并使用 bootstrap.css 来设置内容样式。当我在 Internet Explorer 中这样做时，我遇到了一些麻烦。TinyMCE 通过设置宽度和高度属性的本机浏览器方法调整图像大小。但是 Bootstrap 使用 normalize.css，它会重置图像的宽度和高度，并打破 IE 中的宽度和高度属性。我能做些什么来避免这种情况？在将文章内容提交到服务器之前，我需要将属性转换为样式，但是[getContent 事件](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onGetContent)上的插入处理程序无济于事

# python - 换行符多合一python字符串

> ID：12589094
> 
> 赞同：0
> 
> 时间：2012-09-25T18:37:52.407
> 
> 标签：python, html, django, string

我有：

```
...
post_str = "Please input the following information... \nDescription: \n Last Name:"
context = {
     'post_str':post_str,
      ...
}
return render_to_response('contact/contact.html', context, context_instance=RequestContext(request)) 
```

它像这样打印，

`Please input the following information... Description: Last Name:`.

但我希望它打印出来：

```
Please input the following information...
Description:
Last Name: 
```

我以为我使用正确。如何获得换行符以成功生产我需要的东西？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:52:36.987

换行符在 HTML 中没有任何作用。改为使用`<br />`。

# ios - iOS 6核心数据关系对象insertObject问题

> ID：12589097
> 
> 赞同：0
> 
> 时间：2012-09-25T18:38:10.287
> 
> 标签：ios, core-data

在下面的示例代码中，我通过`managedContext`这个选择器所在的视图控制器的一个属性传递一个对象。在这种情况下，这个属性是`currentPetCoreDataObject`.

**是否有人有一个简单的项目，不一定是 iOS 项目，它使用 Core Data 框架在其中具有一对多的关系？一个简单的命令行应用程序就可以了。我能找到的所有关系示例都是一对一的。**

我不知道如何在 xCode Generated 实体类中使用生成的选择器，也找不到任何示例：

```
- (void)insertObject:(Feeding *)value inPetFeedRelationAtIndex:(NSUInteger)idx; 
```

以下代码似乎可以工作，但是在检查计数时，它似乎没有保存。我错过了什么？

我是 Core Data 的新手，还没有成功使用关系。

```
if (!self.nsMutableOrderedSetFeed)
{
  NSLog(@"current feed count:%d", self.currentPetCoreDataObject.PetFeedRelation.count);

    [self.addedFeedObject setBrand:self.txtBrand.text];
    [self.addedFeedObject setFood:self.txtType.text];
    [self.addedFeedObject setParentPetRelation:self.currentPetCoreDataObject];

    [self.addedFeedObject addPetFeedRelationObject:self.addedFeedObject];
    //[self.currentPetCoreDataObject insertObject:self.addedFeedObject inPetFeedRelationAtIndex:[self.currentPetCoreDataObject.PetFeedRelation i];

    [self.currentPetCoreDataObject setPetFeedRelation:[self.nsMutableOrderedSetFeed initWithObject:self.addedFeedObject]];
}
NSError *error;
if (![self.managedObjectContext save:&error])
    NSLog(@"Failed to add new Pet profile with error: %@", [error domain]);

[self dismissViewControllerAnimated:NO completion:nil]; 
```

# linux - How do I use find to copy and remove extensions keeping the same subdirectory structure

> ID：12589105
> 
> 赞同：6
> 
> 时间：2012-09-25T18:38:29.480
> 
> 标签：linux, bash, find, xargs, cp

I'm trying to copy all the files from one directory to another, removing all file extensions at the same time.

```
From directory 0001:
 0001/a/1.jpg
 0001/b/2.txt

To directory 0002:
 0002/a/1
 0002/b/2 
```

I've tried several find ... | xargs c...p with no luck.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:43:57.827

Recursive copies are really easy to to with `tar`. In your case:

```
tar -C 0001 -cf - --transform 's/\(.\+\)\.[^.]\+$/\1/' . |
tar -C 0002 -xf - 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:37:14.870

If you haven't `tar` with `--transform` this can works:

```
TRG=/target/some/where
SRC=/my/source/dir
cd "$SRC"
find . -type f -name \*.\* -printf "mkdir -p '$TRG/%h' && cp '%p' '$TRG/%p'\n" |\
   sed 's:/\.::;s:/./:/:' |\
   xargs -I% sh -c "%" 
```

No spaces after the `\`, need simple end of line, or you can join it to one line like:

```
find . -type f -name \*.\* -printf "mkdir -p '$TRG/%h' && cp '%p' '$TRG/%p'\n" | sed 's:/\.::;s:/./:/:' | xargs -I% sh -c "%" 
```

Explanation:

*   the `find` will find all **plain files** what have extensions in you SRC (source) directory
*   the find's `printf` will prepare the needed shell commands:
    *   command for create the needed directory tree at the TRG (target dir)
    *   command for copying
*   the `sed` doing some cosmetic path cleaning, (like correcting /some/path/./other/dir)
*   the `xargs` will take the whole line
*   and execute the prepared commands with shell

But, it will be much better:

*   simply make an *exact* copy in 1st step
*   rename files in 2nd step

easier, cleaner and FASTER (don't need checking/creating the target subdirs)!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:58:11.690

Here's some find + bash + install that will do the trick:

```
for src in `find 0001 -type f`  # for all files in 0001...
do
  dst=${src/#0001/0002}         # match and change beginning of string
  dst=${dst%.*}                 # strip extension
  install -D $src $dst          # copy to dst, creating directories as necessary
done 
```

This will change the permission mode of all copied files to `rwxr-xr-x` by default, changeable with install's `--mode` option.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:03:13.293

I came up with this ugly duckling:

```
find 0001 -type d | sed 's/^0001/0002/g' | xargs mkdir
find 0001 -type f | sed 's/^0001//g' | awk -F '.' '{printf "cp -p 0001%s 0002%s\n", $0, $1}' | sh 
```

The first line creates the directory tree, and the second line copies the files. Problems with this are:

1.  There is only handling for directories and regular files (no symbolic links etc.)
2.  If there are any periods (besides the extension) or special characters (spaces, etc.) in the filenames then the second command won't work.

# ios - iOS：当应用程序后台运行时在屏幕上隐藏敏感信息

> ID：12589108
> 
> 赞同：6
> 
> 时间：2012-09-25T18:38:35.237
> 
> 标签：ios, hipaa, backgrounding

当前台应用程序进入后台时（例如按下 Home 按钮），在 iOS 拍摄它的快照并启动动画以显示下一个屏幕*之前，我如何更改最顶层视图控制器上的元素？*

我问是因为我正在编写一个需要 HIPAA 合规性的应用程序，并且我担心操作系统为执行此动画而拍摄的快照有时包含敏感数据，即使稍后应用程序被前景化时，这些数据*也不*应该是可见的.

我知道视图控制器具有生命周期方法，例如`viewWillDisappear`可能可用的方法，但我有很多控制器，我宁愿在我的 App Delegate 中有一些东西来处理这个问题（例如，通过添加不透明的全屏 UIImageView 覆盖) 而不必在每个最后一个控制器中为此编写自定义代码。

我尝试将覆盖生成代码放入 中`applicationWillResignActive`，并且我一直在使用 Apple 的文档和 Google 进行挖掘，但它不起作用。我怀疑屏幕截图是在应用程序有机会更新屏幕之前拍摄的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:50:37.970

不确定 HIPAA 关于后台的要求以及可能让用户登录以供其他人恢复，但听起来最安全的方法是添加`UIApplicationExitsOnSuspend`一个布尔值为`YES`to的键`info.plist`。

这将阻止应用程序完全后台运行，并在您每次返回时重新启动它（可能触发登录过程）。

出于安全原因，我测试过的大多数（如果不是全部）移动银行应用程序都是这样做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:26:37.953

我相信答案是不关心在背景动画开始*之前*改变屏幕上的内容，而是简单地修改应用程序进入背景后屏幕上显示的内容（即`applicationDidEnterBackground:`在你的 App Delegate 中）。这解决了我的问题.

我的`UIImageView`叠加想法在这里奏效了，尽管我决定只弹出到根视图控制器。这样更简单。我的根视图没有任何敏感信息。

这是它的样子：

```
-(void)applicationDidEnterBackground:(UIApplication *)application {

    UINavigationController *navigationController = 
        (UINavigationController *)self.window.rootViewController;
    [navigationController popToRootViewControllerAnimated:NO];

    ...
} 
```

# c# - 具有不同操作和控制器但共享输入名称/值的多个提交按钮

> ID：12589111
> 
> 赞同：0
> 
> 时间：2012-09-25T18:38:47.460
> 
> 标签：c#, asp.net-mvc, c#-4.0, razor, angularjs

**编辑：**阅读我的问题的底部，看看我实际上做了什么。不过，我接受了不同的答案，因为我的解决方案需要 AngularJS。

* * *

我正在使用 C# 4.0 和 MVC 3/Razor。我更愿意利用框架的现有功能，而不是制作我自己的辅助类。这就是我正在做的事情，简化：

这是我的模型：

**我的模型.cs**

```
public class MyModel
{
    public string Name { get; set; }
    public int ID { get; set; }
} 
```

到目前为止，我的观点是：

**索引.cshtml**

```
@model IEnumerable<MyModel>

Please select a Model.

<select name="id">
    @foreach (var m in Model)
    {
        <option value="@(m.ID)">@(m.ID) - @(m.Name)</option>
    }
</select> 
```

我的控制器：

**我的控制器.cs**

```
public class MyController : Controller
{
    public ActionResult Index() { /* ... */ }
    public ActionResult Display(int id) { /* ... */ }
    public ActionResult Delete(int id) { /* ... */ }
    public ActionResult Edit(int id) { /* ... */ }
} 
```

**在我看来，我想要三个提交按钮，每个链接到不同的控制器/动作，一个用于编辑、删除和显示。但是，我希望传递用户选择的 ID（通过 GET）。我该怎么做呢？**

我知道我可以创建一个新的控制器动作，其唯一目的是根据type元素`value`的 我想绕过这一步。理想情况下，我想要类似的东西：`submit``input`

```
@using (Html.BeginForm("", "", FormMethod.Get))
{
    <select name="id">
        @foreach (var m in Model)
        {
            <option value="@(m.ID)">@(m.ID) - @(m.Name)</option>
        }
    </select>

    @Html.SubmitButton("Edit", "My")
    @Html.SubmitButton("Delete", "My")
    @Html.SubmitButton("Display", "My")
} 
```

但是我找不到任何方法签名`Html`似乎可以做类似的事情。

* * *

**编辑：**

这就是我最终的结果。它使用一个名为 AngularJS 的 JavaScript 库，但不需要额外的 JavaScript 管道。它只是工作。

```
@model IEnumerable<MyModel>
<html>
    <head>
        <script type="text/javascript" src="../../Scripts/angular.js"></script>
    </head>
    <body ng-app>
        <select ng-model="ID">
            @foreach (var m in Model)
            {
                <option value="@(m.ID)">@(m.ID) - @(m.Name)</option>
            }
        </select>

        @{
            var forms = new[] 
            {
                new { ActionName = "Display", ControllerName = "My" },
                new { ActionName = "Edit", ControllerName = "My" },
                new { ActionName = "Delete", ControllerName = "My" }
            };

            foreach (var form in forms)
            {
                using (Html.BeginForm(form.ActionName, form.ControllerName, FormMethod.Get))
                {
                    <input type="submit" value="@(form.ActionName)" ng-disabled="ID == null"/>
                    <input type="hidden" name="id" value="{{ID}}"/>
                }
            }
        }

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:20:35.767

你可以（我有）使用属性来做到这一点。在尝试了几种[不同](http://blog.maartenballiauw.be/post/2009/11/26/Supporting-multiple-submit-buttons-on-an-ASPNET-MVC-view.aspx)的主题变体后，我选择了这个：

[http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)

它基本上根据您提交的名称进行路由。对于您的情况：

```
 <input type="submit" name="delete" value="Delete" />
 <input type="submit" name="Edit" value="Edit" /> 
```

和控制器

```
public class MyController : Controller {
    [HttpParamAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Edit(int id) {
    }

    [HttpParamAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Delete(int id) {

    }
} 
```

属性

```
 public class HttpParamActionAttribute : ActionNameSelectorAttribute {
        public override bool IsValidName(ControllerContext controllerContext,  
                                       string actionName, MethodInfo methodInfo) 

 {

            if (actionName.Equals(methodInfo.Name,  
                                  StringComparison.InvariantCultureIgnoreCase))
                return true;

            if (!actionName.Equals("Action", 
                                   StringComparison.InvariantCultureIgnoreCase))
                return false;

            var request = controllerContext.RequestContext.HttpContext.Request;
            return request[methodInfo.Name] != null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:42:57.497

对于`Edit`and `Display`，显然，您不需要提交表单。您可以为此使用 GET。因此 Html.ActionLink 辅助方法可用于显示一个链接，该链接将用户带到适当的屏幕（操作方法）。

要从链接中的下拉列表中传递所选项目的值，您可以在单击事件上使用 java 脚本获取所选值并将其发送到操作方法。

```
@Html.ActionLink("Edit","Edit","YourController",null ,new {@class="lnk"})
@Html.ActionLink("Display","Display","YourController",null ,new {@class="lnk"})
@Html.ActionLink("Delete","Delete","YourController",null ,new {@class="lnk"}) 
```

现在 javascript 来捕获这些链接的点击事件

```
$(function(){
  $("a.lnk").click(function(e){
     e.preventDefault();
     var targetUrl=$(this).attr("href");
     var selectedVal=$("#YourDropdownID").val();
     targetUrl=targetUrl+"?id="+selectedVal;
     window.location.href=url;
  });
}); 
```

对于删除，您可能会显示一个将用户带到确认屏幕的链接，并且您可以有一个提交按钮来执行**HTTPPOST**提交。

您可以自定义 CSS 以使`a`标签看起来像提交按钮

另外，**不要在视图中使用 foreach 循环来渲染下拉列表**。在 MVC 中已经有 HTML Helper 方法可以做到这一点。您应该始终使用它。[这](https://stackoverflow.com/questions/12263659/loading-related-data-in-asp-net-mvc/12263805#12263805)是一个解释如何做到这一点的答案。

# youtube-api - 测试未关联的 YouTube 帐户

> ID：12589116
> 
> 赞同：1
> 
> 时间：2012-09-25T18:39:09.520
> 
> 标签：youtube-api

我的应用通过 YouTube 进行身份验证以获取用户的收藏夹列表。我需要处理未关联的 YouTube 帐户的情况，但我的帐户都是在 2009 年之后创建的（因此它们是关联的）。有没有人找到一种方法来创建一个未链接的帐户以用于测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:05:01.110

我认为您可以创建一个 Google 帐户。除非您使用该帐户登录 youtube，否则该帐户不会与 Youtube 关联。

# actionscript-3 - 如何在闪存中设置值和触发功能

> ID：12589117
> 
> 赞同：0
> 
> 时间：2012-09-25T18:39:09.310
> 
> 标签：actionscript-3, flash, flash-builder, mxml

嗨所以这是我的第一个 Flash 应用程序我有两个函数一个单击处理程序将您带到列表页面和一个调用结果的函数在 actionscript 中是否有任何方法可以通过变量传递值，例如 php($)

我需要做的是从按下的按钮上设置功能关闭每个按钮需要向列表提供不同的值以获得结果继承人这两个功能

```
 protected function button_clickHandler_100():void
    {
        currentState='data';
    }

    protected function dataGrid_creationCompleteHandler(event:FlexEvent):void
    {
        getCitysResult.token = cityservice.getCitys(/* VALUE ENTERED HERE */);
    }

    <s:Button click="button_clickHandler_100()" id="button128" includeIn="europe" skinClass="components.englandButton" x="101" y="135"/>
    <s:Button click="button_clickHandler_100()" id="button129" includeIn="europe" skinClass="components.denmarkButton" x="135" y="117"/>
    <s:Button click="button_clickHandler_100()" id="button130" includeIn="europe" skinClass="components.polandButton" x="214" y="135"/>

    <mx:DataGrid includeIn="data" x="28" y="10" id="dataGrid" creationComplete="dataGrid_creationCompleteHandler(event)" dataProvider="{getCitysResult.lastResult}" width="276" height="255">
    <mx:columns>
        <mx:DataGridColumn headerText="city" dataField="city"/>
    </mx:columns>
    </mx:DataGrid> 
```

因此，例如需要提供的值是 GB for button128 ， PL for button130 ....

getCitys 返回城市列表并根据 2 个字母代码填充数据网格，它是一个 php 服务

有没有办法让clickHandler根据按钮的ID按下哪个按钮来为getCitys函数提供值

# html - 无法让我的页面扩展到视口底部

> ID：12589118
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:39:12.707
> 
> 标签：html, css

我在这里变得非常沮丧。我似乎无法让我的居中列一直延伸到页面底部。我尝试清除浮动，并尝试弄乱正文和 html 和列的高度，但它不起作用。

如果有人可以看一下并告诉我发生了什么，我将不胜感激。我似乎无法弄清楚，这不是我第一次遇到这个问题。我不明白发生了什么。

[http://www.thefittedshirtchicago.com/tfs.html](http://www.thefittedshirtchicago.com/tfs.html)

如果您滚动到底部，在图标下方，有一点空间可以显示较浅的背景。我似乎无法让它消失。中心容器的黑色应该在它后面向下延伸。如果您更改窗口的大小，这一点尤其明显。

任何提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:43:26.620

在页脚 div 之后的（clear-div 后面）似乎有以下内容：

```
<br />
c 
```

尝试删除它！

# facebook - 解决 facebook 标签页的 "X-Frame-Options" content="deny"

> ID：12589120
> 
> 赞同：0
> 
> 时间：2012-09-25T18:39:17.000
> 
> 标签：facebook, tabs, options

好的，所以我们的 facebook 标签页可以正常工作，但现在它进入了一个空白页面。经过一番调查，我在 facebook 标题中发现了这一点，“X-Frame-Options” content="deny" 元标记。

我还没有找到任何明确的方法来解决这个问题。有任何想法吗？同样，应用程序页面最初可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:29:40.270

> 好的，所以我们的 facebook 标签页可以正常工作，但现在它进入了一个空白页面。经过一番调查，我在 facebook 标题中发现了这一点，“X-Frame-Options” content="deny" 元标记。

如果您的浏览器拒绝在 iframe 中显示*您的*页面，那么发送此标头的是*您的*服务器，而不是 Facebook。

> 我还没有找到任何明确的方法来解决这个问题。有任何想法吗？同样，应用程序页面最初可以正常工作。

与您的服务器管理员交谈；看起来他可能已经更改了有关服务器放入响应中的默认标头的某些内容。

# android - 使用 CSS 媒体查询独立于 Android 设备定位 iPhone

> ID：12589126
> 
> 赞同：1
> 
> 时间：2012-09-25T18:39:48.223
> 
> 标签：android, iphone, html, css, html-email

有什么方法可以独立于 Android 设备来定位 iPhone，反之亦然，使用 CSS 媒体查询。这是针对 HTML 电子邮件的。

我们尝试了多种方法，但它们似乎都重叠。

我们希望限制最大设备宽度为 480 的设备中的表格大小，但仅适用于基于 Android 的设备。

以下是我最近尝试过的。iPhone（在 Litmus 中测试）忽略了第二个媒体查询并将宽度保持在 300 像素。

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 320px) {
/* Styles */
      table[class="table"], td[class="cell"] {

width: 300px;

}
}

/* iPhone 4 ----------- */
    @media
    only screen and (-webkit-min-device-pixel-ratio : 1.5),
    only screen and (min-device-pixel-ratio : 1.5) {
      table[class="table"], td[class="cell"] {

width: 100%;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:42:25.663

尝试 -webkit-min-device-pixel-ratio 和 min-device-pixel-ratio

```
 /* iPhone 4 ----------- */
    @media
    only screen and (-webkit-min-device-pixel-ratio : 1.5),
    only screen and (min-device-pixel-ratio : 1.5) { 
```

见[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# postgresql - 在 PostgreSQL 8.4 中安装附加模块多维数据集时遇到问题

> ID：12589127
> 
> 赞同：15
> 
> 时间：2012-09-25T18:39:56.273
> 
> 标签：postgresql, installation, postgresql-8.4

我正在尝试将 PostgreSQL 与“七周内的七个数据库”一书一起使用。我在 Ubuntu 10.04 服务器上使用 PostgreSQL 8.4.1。

第一个任务是创建一个名为“book”的数据库并检查 contrib 包是否已正确安装。

```
$ createdb book
$ psql book -c "SELECT '1'::cube;" 
```

当我这样做时，我得到以下输出：

```
ERROR:  type "cube" does not exist
LINE 1: SELECT '1'::cube; 
```

我已经使用以下命令安装了多维数据集包：

```
$ sudo -u postgres psql postgres < /usr/share/postgresql/8.4/contrib/cube.sql 
```

我尝试重新启动 PostgreSQL，但问题仍然存在。当我第二次尝试运行包导入时，我收到以下消息，其中明确指出`type "cube" already exists`：

```
SET
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
ERROR:  type "cube" already exists
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
COMMENT
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
ERROR:  operator < already exists
ERROR:  operator > already exists
ERROR:  operator <= already exists
ERROR:  operator >= already exists
ERROR:  operator && already exists
ERROR:  operator = already exists
ERROR:  operator <> already exists
ERROR:  operator @> already exists
ERROR:  operator <@ already exists
ERROR:  operator @ already exists
ERROR:  operator ~ already exists
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
CREATE FUNCTION
ERROR:  operator class "cube_ops" for access method "btree" already exists
ERROR:  operator class "gist_cube_ops" for access method "gist" already exists 
```

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T21:16:40.157

您只将扩展安装到您的`postgres`数据库（名为“postgres”的默认系统数据库）——这可能**不是**您想要的。您需要将扩展​​安装到*您的*数据库 - 每个要使用它的数据库一次。

或者您可以将其安装到模板数据库（`template1`默认情况下，但*任何*数据库都可以用作模板），以便创建的每个新数据库都以预先安装的功能开始。

在 PostgreSQL 8.4 或更早版本中，您需要*在 shell*中运行：

```
psql -d **dbname** -f SHAREDIR/contrib/cube.sql
```

`dbname`您的实际目标数据库的名称在哪里。或使用您在问题中的等效行。
[此处的手册中有关 PostgreSQL 8.4 的更多信息。](http://www.postgresql.org/docs/8.4/interactive/contrib.html)

自 PostgreSQL 9.1 以来，这已进一步简化，您可以*在数据库会话中*运行：

```
CREATE extension cube 
```

[更多的手册在这里](http://www.postgresql.org/docs/current/interactive/sql-createextension.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-09T20:48:09.603

9.1 的完整命令是：

```
 psql -d dbname  
   CREATE EXTENSION cube;  
   \q 
```

其中 dbname 是要添加扩展的数据库的名称。请注意，最后一个命令是退出的反冲 q。并且不要忘记第二个末尾的分号。

# apache-flex - Flash Builder 中的内部构建错误

> ID：12589128
> 
> 赞同：2
> 
> 时间：2012-09-25T18:39:58.823
> 
> 标签：apache-flex, flash-builder

我在 Flash Builder 中遇到内部构建错误。
当我转到问题编辑器时，它说我可以在错误日志中找到更多详细信息。

![在此处输入图像描述](../Images/268fe277f5cf43ffecc91874b8cbc3b8.png)

Adobe 向我推荐错误日志是什么意思？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:42:42.073

这个错误有时会出现在我身上，我从来没有找到真正的原因......

有时，如果我在构建过程中保存文件，会出现问题并出现错误...

去`Project -> Clean Project`，它应该消失....

# css - CSS 高度案例

> ID：12589130
> 
> 赞同：1
> 
> 时间：2012-09-25T18:40:03.620
> 
> 标签：css

我创建了一个使用 ajax 动态加载内容的页面。我将加载内容的背景颜色设置为透明白色。当内容没有填满整个页面时，我希望背景扩展到页面底部 minux 20px，就像这个 css 一样：

```
#content {
    background-color: rgba(255, 255, 255, 0.5);
    position:absolute;
    top: 20px; left: 380px; bottom: 20px;
    padding: 20px;
} 
```

当内容延伸到页面底部时，我希望背景随之延伸，并在背景下方留出 20 px 的边距。通常我会使用 display: block; 完成此操作，但这会覆盖底部：20px；规则。在这两种情况下，如何让 css 以我想要的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:51:01.970

Try something like this instead:

```
#content {
  margin-bottom: 20px;
  padding: 20px;
  min-height: 800px; /* height of the window */
  background-color: rgba(255, 255, 255, 0.5);
}​ 
```

You may want to consider using jQuery to set the min-height to equal the user's window height.

```
var windowHeight = $(window).height();
$("#content").height(windowHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:05:14.903

[嗯，如果没有小提琴示例http://jsfiddle.net](http://jsfiddle.net)，很难理解您的需求：| 从你说的情况来看，似乎是身体问题。您可以为加载的部分设置一个“body class”（创建一个容器 div，在其中添加宽​​度和高度为 100% 的所有内容），您可以为其设置背景，并且仅适用于未填充所有部分的内容在 div 内容中显示，还应用另一种背景颜色并设置您想要的 margin-bottom。干杯。

# pycharm - pycharm - 我如何摆脱“多行标签”而只有一行，比如firefox或eclipse？

> ID：12589131
> 
> 赞同：3
> 
> 时间：2012-09-25T18:40:09.610
> 
> 标签：pycharm

正如标题所说，我如何在 pycharm 中只有一行而不是多行。这是用于打开文件的选项卡！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:46:53.853

有一个选项可以**在单行中显示选项卡**：

![单排](../Images/d45e1973419bf1c9fcfbee7e94c89726.png)

# ios - Restkit onDidFailWithError 永远不会被调用

> ID：12589132
> 
> 赞同：0
> 
> 时间：2012-09-25T18:40:16.540
> 
> 标签：ios, restkit

我正在尝试发布一个带有块的对象。`OnDidFailWithError`从来没有被叫过，它爆炸了。

这是我得到的错误：

> 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'+ [MyClass objectLoader：didFailWithError：]：无法识别的选择器发送到类

这是我的代码：

```
[[RKObjectManager sharedManager] postObject: myObj usingBlock:^(RKObjectLoader *loader){
    loader.targetObject = nil;
    loader.delegate = (id)self;
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[MyClass class]];

    loader.onDidFailWithError = ^(NSError *error) {
        NSLog(@"Error %@", [error localizedDescription]);
    };

    loader.onDidLoadObject = ^(id obj) {
        NSLog(@"Comment");
        NSLog(@"%@",obj);
    };

    loader.onDidLoadResponse = ^(RKResponse *response) {
        NSLog(@"Response: %@", [response bodyAsString]);
    };

    loader.onDidLoadObjects=^(NSArray* objects){
        //post notification
        [[NSNotificationCenter defaultCenter] postNotificationName:@"finish" object:nil];
    };

    loader.serializationMIMEType = RKMIMETypeJSON; // We want to send this request as JSON
    loader.method = RKRequestMethodPOST;

    loader.serializationMapping = [RKObjectMapping serializationMappingUsingBlock:^(RKObjectMapping* mapping) {
        [mapping mapAttributes:@"field1", @"field2",nil];
    }];
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:22:49.893

您正在将委托设置为 self，这将在您当前的控制器上调用那些 RestKit 委托方法，而不是使用您创建的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:15:06.337

如果您无法处理错误，请在**onDidLoadResponse上尝试此操作**

```
 loader.onDidLoadResponse = ^(RKResponse *response) {

        NSLog(@"Response did arrive");
        if([response statusCode]>299){

            NSError *error = nil;
            id parsedResponse = [NSJSONSerialization JSONObjectWithData:[response body] options:NSJSONWritingPrettyPrinted error:&error];
            NSLog(@"%@",parsedResponse);

        }

    }; 
```

# python - 在装饰器中访问视图参数，django

> ID：12589140
> 
> 赞同：0
> 
> 时间：2012-09-25T18:40:52.443
> 
> 标签：python, django, view, decorator

我有一个简单的视图函数和一个装饰器，我想在装饰器中使用传递给视图的参数。我已经四处搜索，但没有找到任何例子，我仍然不确定这是否可能，如果是这样 - 怎么做？

附加装饰器的视图：

```
@user_is_project_maintainer
def edit(request, project_id_key): 
```

装饰器本身：

```
 def user_is_project_maintainer():
        def decorator(view_func):
            @wraps(view_func, assigned=available_attrs(view_func))
            def _wrapped_view(request, *args, **kwargs):
                if (project_id_key.isdigit()) :
                    project = get_object_or_404(Project, pk=project_id_key)
                else :
                    project = get_object_or_404(Project, key=project_id_key)

                if (project.maintainer_id != request.user.id) :
                    return HttpResponseRedirect(reverse('core.views.index', args=(project.key,)))
                else :
                    view_func(request, *args, **kwargs)

            return _wrapped_view
        return decorator 
```

我复制了一个默认的 django 视图装饰器并根据我的需要对其进行了修改，我确定我做错了，但事实并非如此。我不知道的主要事情 - 如何让我的手在`project_id_key`装饰器内的 var 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:50:33.070

它将在`kwargs`in 中`_wrapped_view`，即`project_id_key = kwargs['project_id_key']`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T18:51:06.707

在 _wrapped_view 中，您可以访问 args 和 kwargs。所以 project_id_key 应该可以作为`args[0]`. 但我宁愿以更明确的方式做到这一点：

```
def _wrapped_view(request, project_id_key, *args, **kwargs): 
```

# javascript - <=IE7 中命名窗口的 window.name 存储

> ID：12589141
> 
> 赞同：2
> 
> 时间：2012-09-25T18:40:59.533
> 
> 标签：javascript

我有一个应用程序`window.name`用作`sessionStorage`.

示例（为简洁起见）：

```
function setData(data){
  window.name = JSON.stringify(data);
}
function getData(data){
  return JSON.parse(window.name);
} 
```

这一切在几乎所有浏览器中都能正常工作。但是，我最近发现当窗口与目标一起启动时，这在 IE7 及以下版本中不起作用。

```
<a href="winning.html" target="bob">winning.html</a> 
```

如果我`winning.html`从上面启动文件`A`，使用 IE7，`getData`将始终返回“bob”，无论我们尝试通过什么设置`setData`。

如果我像这样修改启动链接（删除目标），它将正确设置和记住数据。

```
<a href="winning.html">winning.html</a> 
```

问题是我并不总是能够控制那个原始链接。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:16:36.233

通常情况下，将这个问题搁置几天，然后重新回到它已经揭示了答案。

我使用[此脚本](http://blogs.sitepointstatic.com/examples/tech/js-session/session.js)（来自[此 Sitepoint 文章](http://www.sitepoint.com/javascript-session-variable-library/)）为 window.name 会话存储测试了该错误。

正如您可能猜到的那样，这个脚本不受我原来帖子中的错误的影响。为什么？是什么让这个工作有效，而我上面的简单示例不起作用？这一点是关键：

```
// page unload event
if (window.addEventListener) window.addEventListener("unload", Save, false);
else if (window.attachEvent) window.attachEvent("onunload", Save);
else window.onunload = Save; 
```

出于某种原因，您必须将数据保存回`window.name`窗口`unload`事件中的容器中。

**请注意**仅使用 onunload 方法，因为移动 safari 不会记住数据。要让移动 Safari 将数据持久保存在 中`window.name`，您必须在 onunload 之前手动保存。本质上，为了获得最大的兼容性，您必须同时执行以下操作：在 onunload 中保存；每当设置新数据时手动保存。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T19:32:30.010

`window.name`可能包含在您使用时设置的窗口名称`target="bob"`，实际上是窗口或框架的名称...所以只需使用另一个全局变量，例如`window._session`...如果您有框架，使用它会很好`window.top._session`。仅供参考：所有全局 JS 变量都存储在窗口中，所以如果你像这样定义一个全局变量：`var name = "hello"`......你也可以访问它`window.name`

# jquery - jQuery代码无法运行

> ID：12589143
> 
> 赞同：0
> 
> 时间：2012-09-25T18:41:02.257
> 
> 标签：jquery

我想问一下我的 jquery 代码有什么问题导致它无法运行。我正在尝试使用 selectable 从该表中选择列并从每个 td 中获取信息

```
$(function() {
    $( "table" ).selectable({
        filter: ".tdItem"
        stop: function() {
            $( ".ui-selected", this ).each(
                function() {

                }
            );
        }
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:42:14.673

您在以下内容后缺少逗号：

```
filter: ".tdItem", 
```

最后一个`});`（除非它连接到其他东西，否则会给你一个：**Uncaught SyntaxError: Unexpected token }**错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T18:42:52.200

过滤器和停止之间没有逗号。还有一个额外的 }); 不确定这些是否只是复制粘贴错误。

```
$(function() {
    $("table").selectable({
        filter: ".tdItem",
        stop: function() {
            $( ".ui-selected", this ).each(
                function() {

                }
            );
        }
    });
}); 
```

# java - 如何为抽象类覆盖方法创建泛型返回类型

> ID：12589146
> 
> 赞同：1
> 
> 时间：2012-09-25T18:41:12.077
> 
> 标签：java, android, generics, types

我有一个由 Java 和 Android 实现的抽象类。这个类有一个方法需要返回一个通用的 Cursor 以便实现可以返回它们各自的游标。

我的抽象类：

```
public abstract class DatabaseAdapter {

protected abstract com.domain.database.Cursor<?> executeQuery(String command);      

} 
```

游标类型：

```
public final class Cursor<T> {

private T value = null;

public void setValue(T value) {
    this.value = value;
}

public T getValue() {
    return value;
}
    } 
```

如前所述，我希望实现方法根据情况返回 Java 游标或 Android 游标。我可以很好地创建抽象类，但是当我尝试实现时，出现编译错误。我显然在这里不太了解多态性。

实施方法

```
public Cursor executeQuery(String query){
Cursor cursor = db.rawQuery(query, selectionArgs);
return cursor;      
} 
```

其中光标是**android.database.Cursor**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:04:05.687

我想你可以删除`com.domain.database.Cursor`，但我可能错了。

我的解决方案是`DatabaseAdapter`通用的，而不是`Cursor`.

```
/**
 * @param C the type of the Cursor this adapter returns
 */
public abstract class DatabaseAdapter<C> {
    protected abstract C executeQuery(String command);      
} 
```

然后你像这样实现：

```
public class AndroidDatabaseAdapter extends DatabaseAdapter<android.database.Cursor> {
    public Cursor executeQuery(String query){
        Cursor cursor = db.rawQuery(query, selectionArgs);
        return cursor;
    }
} 
```

# python - 如何让 pubsub 与 pyinstaller 一起工作？

> ID：12589150
> 
> 赞同：1
> 
> 时间：2012-09-25T18:41:27.680
> 
> 标签：python, publish-subscribe, pyinstaller

我正在尝试使用 pyinstaller 从我的 python 代码构建一个 exe。我正在使用的模块之一是 pubsub（真的是 pypubsub。它曾经是 wxpython 的一部分）。当我尝试运行 exe 时出现错误。它抱怨“ImportError：没有名为 listenerimpl 的模块”。

我看过一些关于让 wx.lib.pubsub 工作的文章（它与 pyinstaller 有已知问题）。我已经尝试过那些文章中提出的解决方案（稍作修改以说明它不再是 wx 的一部分）但没有运气。

我可以通过将正确的listenerimpl（kwargs one）的路径添加到我的spec文件中的分析文件列表中来克服最初的“ImportError：没有名为listenerimpl的模块”错误，但是我在导入“publisher”时遇到了进一步的错误. 通过在规范文件中添加其路径并不能修复该错误。

我认为解决方案不应该涉及在我的规范文件中添加 listenerimpl.py 的路径......但我不确定如何让这个工作愉快。

额外信息

*   使用 pubsub 版本：3.1.1b1.201005.r243
*   使用 pyinstaller 版本：2.0
*   平台：win7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:10:45.587

pubsub 问题已解决（尽管 exe 仍未运行）。

因此，如果您查看[此处](http://www.pyinstaller.org/ticket/312)的评论（尤其是 sebastian.hilbert 的评论 #15），它主要通过一些调整来解决问题。

必要的调整。

1.  将挂钩文件上的名称更改为 hook-pubsub.core.py 和 hook-pubsub.setuparg1.py。
2.  在这些文件的内部，您应该摆脱对 wx.
3.  启用挂钩文件。您可以通过以下两种方式之一执行此操作。简单的方法是将这些新的钩子文件放到 'pyinstaller-2.0\PyInstaller\hooks' 中，这是 pyinstaller 默认查找钩子的地方。干净/好的方法是将这些钩子放入它们自己的文件夹中，并将该文件夹作为钩子路径添加到您的规范文件中。

注意：我不清楚如何添加钩子路径。在您的规范文件中，在对分析的调用中，有一个 hookspath 参数。它想要一个列表而不是字符串。所以你想做一些类似 hookspath=['path1', 'path2', etc] 的事情。

NB2：此外，如果您要求“path.dirname(path.abspath(__file__))”，您将获得 pyinstaller 的目录，而不是您的规范文件所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T18:53:22.380

对于像我这样迟到的人，有一个新的推荐程序。

1.  我推荐使用[Oliver](https://stackoverflow.com/users/869951/oliver)的[PyPubSub](https://github.com/schollii/pypubsub/releases)。对于 Python 2.7，使用他的 3.4.2 版本。确保您只使用此 PubSub。这意味着，如果您的 env/lib/site-packages 中有任何其他 PubSub——不包括与 wxPython 捆绑的那个——你会想要摆脱它们。他们会引起问题。

2.  尽管您可能已经阅读过，但不要使用`from pubsub import setupkwargs`.

3.  不要向 PyInstaller 添加任何新的钩子。他们已经把它覆盖了。

就是这样。你完成了。

运行 PyInstaller。检查构建中的任何错误。希望 PubSub 不会成为其中之一。

# python - 凯撒密码函数

> ID：12589151
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:41:30.880
> 
> 标签：python

我正在尝试使用 python 制作凯撒密码，这就是我能做到的：

```
alphabet = ['abcdefghijklmnopqrstuvwxyz']

def create(shift):
    dictionary={}
    emptylist=[]
    int(shift)
    for x in alphabet:
        emptylist.append(x)
        code = ""
        for letters in emptylist:
            code = code + chr(ord(letters) + shift)
            dictionary[letters]=code
    return dictionary 
```

它可以让我输入我的班次值，然后打印：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    create(2)
  File "C:/Users/Pete/Documents/C- Paisley/A-Level/Computing/dictionarytolist.py", line 11, in create
    code = code + chr(ord(letters) + shift)
TypeError: ord() expected a character, but string of length 26 found 
```

最终产品应该是打印移位的字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:07:33.327

一个更简单的方法是

```
 def create(shift):
    alphabet = 'abcdefghijklmnopqrstuvwxyz'
    return alphabet[shift:] + alphabet[:shift] 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:45:10.143

您可以尝试将此代码用于您的密码。关于如何使用它应该是相当不言自明的。

```
>>> UPPER, LOWER = ord('A'), ord('a')
>>> def encode(text, shift):
    data = list(text)
    for i, c in enumerate(data):
        if c.isalpha():
            base = UPPER if c.isupper() else LOWER
            data[i] = chr((ord(c) - base + shift) % 26 + base)
    return ''.join(data)

>>> def decode(text, shift):
    return encode(text, -shift)

>>> encode('This is a test.', 0)
'This is a test.'
>>> encode('This is a test.', 1)
'Uijt jt b uftu.'
>>> encode('This is a test.', 2)
'Vjku ku c vguv.'
>>> encode('This is a test.', 26)
'This is a test.'
>>> encode('This is a test.', 3)
'Wklv lv d whvw.'
>>> decode(_, 3)
'This is a test.'
>>> 
```

# java - java字节数组播放声音

> ID：12589156
> 
> 赞同：4
> 
> 时间：2012-09-25T18:41:47.077
> 
> 标签：java, audio

我有一个从数据线麦克风读取到字节数组的小程序我不是 100% 确定它可以工作，但只是通过打印数组的一部分，当我在麦克风旁边发出声音时，它似乎会改变:)

我喜欢播放声音我如何播放缓冲区中的数据（字节数组到声音）？

```
 package mic; 
import javax.sound.sampled.*;

public class Mic extends Thread{
    boolean flag;
    TargetDataLine mic;
    byte[] buffer;
    AudioFormat format;

    public static void main(String[] args) {
       Mic a=new Mic();
       a.start();
    }
    @Override
    public void run()
    {
        flag=true;
        startMic();
        while(flag)
        {
            send();
        }
    }
    public void send()
    {
        try{
            mic.read(buffer,0,512);
            System.out.println("1\. "+buffer[0]);
        }catch(Exception ex)
        {

        }
    }
    public void startMic()
    {
        try{
            format=new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,8000.0F,16,2,4,8000.0F,true);
            DataLine.Info info=new DataLine.Info(TargetDataLine.class,format);
            mic=(TargetDataLine)AudioSystem.getLine(info);
            mic.open();
            mic.start();
            buffer=new byte[512];
        }catch(Exception exx)
        {
            System.out.println("exx");
        }

    }
} 
```

编辑：
我最后想要做的是将字节数组发送到其他应用程序并
像收音机直播一样立即播放

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-15T23:17:31.770

基于[此](http://www.jguru.com/faq/view.jsp?EID=514372)：

```
// Create the AudioData object from the byte array
AudioData audiodata = new AudioData(byteArray);
// Create an AudioDataStream to play back
AudioDataStream audioStream = new AudioDataStream(audioData);
// Play the sound
AudioPlayer.player.start(audioStream); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:56:18.173

测试捕获的数据的一种简单方法是将它们保存到文件中，然后使用 RAW 文件导入大胆地加载。只需将您的原始文件格式指定为：采样率 8KHz 格式 PCM 大端立体声 16 位

# serialization - SignalR 和序列化对象数组

> ID：12589159
> 
> 赞同：4
> 
> 时间：2012-09-25T18:42:00.993
> 
> 标签：serialization, signalr, postsharp

我是 SignalR 的新手，并且做了一个简单的测试破解。我希望用类型化的对象序列化一个对象数组。默认情况下，SignalR 已将 JSon.NET 序列化程序配置为不提供类型信息。我发现我可以通过以下方式在 DependencyResolver 中注册一个自定义序列化程序：

```
var serializer =
    new EventHubJsonSerializer(
      new JsonSerializerSettings
        {
          PreserveReferencesHandling = PreserveReferencesHandling.Objects,
          TypeNameHandling = TypeNameHandling.Objects
        });

  GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer); 
```

但是，当我收到我的对象数组时，它不会解析类型，而是一个 JSonContainer。我能以任何方式解决这个问题吗？

从 Hub 发出的事件：

```
 public sealed class SignalREvent
  {
    public string Group { get; set; }
    public string EventName { get; set; }
    public string TypeFullName { get; set; }
    public IList<object> EventArguments { get; set; }
  } 
```

并且接收器必须通过转换为动态来解开布尔值：

```
public sealed class TestEventArgs : EventArgs
  {
    #region Public Properties

    /// <summary>
    /// Gets or sets a value indicating whether do not print.
    /// </summary>
    public bool DoNotPrint { get; set; }

    /// <summary>
    /// Gets or sets the event name.
    /// </summary>
    public string EventName { get; set; }

    #endregion
  }
this.subscription = this.client.On<SignalREvent>(
        "PushEvent",
        data =>
          {
            dynamic eventArg1 = data.EventArguments[0];

            if (eventArg1.DoNotPrint.Value)
            {
              return;
            }
          }); 
```

我所做的是将后锐化方面应用于事件，以允许它们通过我的 EventHub 通过 SignalR 传播。例如：

```
[ExternalizeEvent]
public event ASimpleDelegate SimpleEvent; 
```

这是一个非常简单的方面，但是在 .net 世界中拥有类型信息真的很好 - 其他客户当然不会从中受益。

**更新**

这是我的 JSon.NET 配置的输出 - 类型在 $type 中传播，但似乎在反序列化期间没有使用它。

```
{
  "$id": "11",
  "$type": "<>f__AnonymousType0`3[[System.String, mscorlib],[System.String, mscorlib],[System.Object[], mscorlib]], SignalR",
  "Hub": "Externalize.EventHub",
  "Method": "PushEvent",
  "Args": [
    {
      "$id": "12",
      "$type": "DataDuctus.SignalR.Aspects.SignalREvent, DataDuctus.SignalR.Aspects",
      "Group": "all",
      "EventName": "SimpleEvent",
      "TypeFullName": "TestConsole.TestEvents",
      "EventArguments": [
        {
          "$id": "13",
          "$type": "TestConsole.TestEventArgs, TestConsole",
          "DoNotPrint": false,
          "EventName": "second event (test)"
        }
      ]
    }
  ]
} 
```

干杯，马里奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:51:02.963

SignalR .NET 客户端不使用来自服务器的 DependencyResolver，并且当前没有自己的 IoC 容器。因此，正如您在问题中指出的那样，您的自定义 JsonSerializerSettings 用于服务器上的序列化，但不用于客户端上的反序列化。

在 SignalR 的下一个版本中，我们计划向 .NET 客户端添加一个 DependencyResolver，它允许您提供自己的`Newtonsoft.Json.JsonSerializer`或`Newtonsoft.Json.JsonSerializerSettings`在反序列化期间使用。目前没有计划允许在 .NET 客户端中使用非 Json.NET（反）序列化程序。

如果您现在*需要*此功能，您*可以*克隆[https://github.com/SignalR/SignalR.git](https://github.com/SignalR/SignalR.git)并将`private static T Convert<T>(JToken obj)`SignalR.Client\Hubs\HubProxyExtensions.cs 中的方法修改为`return obj.ToObject<T>(yourJsonSerializer)`.

# android - android eclipse调试器永远不会启动

> ID：12589161
> 
> 赞同：3
> 
> 时间：2012-09-25T18:42:02.117
> 
> 标签：android, eclipse, debugging

从eclipse启动模拟器后，我启动我的练习应用程序在调试下运行。每次控制台说应用程序已加载并在设备上启动时，但什么都没有发生。调试会话永远不会开始。永远不会显示模拟器上显示“等待调试器”的警报消息。我后来检查并看到应用程序已成功加载，我可以从模拟器运行，但没有调试器。在这个过程中是否缺少某些东西，是否有某种标志要设置，在某处说 debug=true？任何人都可以提供建议吗？

我的清单文件是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tryit1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Tryit1Activity"
            android:label="@string/title_activity_tryit1" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> </manifest> 
```

以防万一，以下是来自 DDMS logcat 的相关消息：

```
09-25 12:03:56.962: W/ActivityManager(694): No content provider found    for permission revoke: file:///data/local/tmp/tryit1.apk  
09-25 12:03:57.272: W/ActivityManager(694): No content provider found for    permission revoke: file:///data/local/tmp/tryit1.apk
09-25 12:04:00.830: I/PackageManager(694): Removing non-system package:com.example.tryit1 
09-25 12:04:00.865: I/ActivityManager(694): Force stopping package com.example.tryit1 uid=10044 
09-25 12:04:01.893: I/PackageManager(694): Package com.example.tryit1 codePath changed from /data/app/com.example.tryit1-1.apk to /data/app/com.example.tryit1-2.apk; Retaining data and using new 
09-25 12:04:01.981: I/PackageManager(694): Running dexopt on: com.example.tryit1 
09-25 12:04:05.004: I/ActivityManager(694): Force stopping package com.example.tryit1 uid=10044 
09-25 12:04:05.043: W/PackageManager(694): Code path for pkg : com.example.tryit1 changing from /data/app/com.example.tryit1-1.apk to /data/app/com.example.tryit1-2.apk 
09-25 12:04:05.111: W/PackageManager(694): Resource path for pkg : com.example.tryit1 changing from /data/app/com.example.tryit1-1.apk to /data/app/com.example.tryit1-2.apk 
09-25 12:04:05.560: D/PackageManager(694): New package installed in /data/app/com.example.tryit1-2.apk 
09-25 12:04:06.007: I/ActivityManager(694): Force stopping package com.example.tryit1 uid=10044 
09-25 12:04:08.161: D/BackupManagerService(694): Received broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.example.tryit1 flg=0x8000010 (has extras) } 
09-25 12:04:08.800: D/BackupManagerService(694): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.example.tryit1 flg=0x8000010 (has extras) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:04:12.990

开始调试：

1.  你应该去ddms
2.  选择您的申请流程
3.  单击贪婪错误按钮（之后此错误应出现在您的进程附近）

![在此处输入图像描述](../Images/3fd36b7e64f5e73f861796d59d1e0696.png)

您还应该检查`android:debuggable`AndroidManifest.xml 中应用程序的属性是否设置为 true。

# php - php搜索表单显示相似名称？

> ID：12589168
> 
> 赞同：-2
> 
> 时间：2012-09-25T18:42:48.257
> 
> 标签：php, database, search

亲爱的伙计们，我需要知道如何创建搜索表单，当用户搜索用户名时，用户名必须以所有相似的名称显示，并且所有用户名必须采用链接形式我的意思是如果单击用户名，则用户必须重定向到 mydomain.com/user.php?username= HERE SEARCHED USERNAME

我有 user.php 文件 user.php?username= USERNAME

我需要知道如何使用链接形式的搜索用户名来喜欢这个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:01:40.803

您需要使用 javascript 来完成此操作。听起来您正在寻找具有自动完成功能的表单。如果你不懂 javascript，又不想弄脏你的手，你应该看看[jQuery](http://jquery.com/)和[jQuery UI autocomplete](http://jqueryui.com/demos/autocomplete/)。

堆栈溢出的人不会为您编写代码，但这可能是一种开始解决您自己尝试实现的目标并在此过程中学习一些东西的方法:)

# javascript - 将用于有序列表的代码转换为表格

> ID：12589169
> 
> 赞同：0
> 
> 时间：2012-09-25T18:42:49.177
> 
> 标签：javascript, jquery

我目前正在尝试弄清楚如何将此代码转换为适用于列中的表 td 单元格。我在这方面寻求帮助。

```
$(function() {
    $( "#selectable" ).selectable({
        stop: function() {
            var result = $( "#select-result" ).empty();
            $( ".ui-selected", this ).each(function() {
                var index = $( "#selectable li" ).index( this );
                result.append( " #" + ( index + 1 ) );
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:45:22.703

将代码中的 var 索引行替换为：

```
var index = $( "#selectable td" ).index( this ); 
```

确保表格有一个 id #selectable

# box2d - Box2D，将主体锁定在某个位置（无法让 SetPosition 和 SetTransform 工作）

> ID：12589171
> 
> 赞同：0
> 
> 时间：2012-09-25T18:42:53.190
> 
> 标签：box2d, game-physics, easeljs, createjs

我正在使用 Box2D 来模拟一个小世界，用户可以在其中拖动对象并将它们“粘贴”在一些预定义的位置（基本上将它们“锁定”在某个位置）。

我有这段代码可以将对象锁定在某个位置。一切正常，除了我不能让 SetPosition（也不是 SetTransform）工作。他们只是将对象移动到 (0,0)。

仅供参考，世界是使用[EaselJS](http://createjs.com/#!/EaselJS)绘制的。

```
// checks if mouse is dragging the object nearby one of the containers
if( isWithin(mouseX, mouseY, containers) ) {

    // make object 'straight'
    body.SetAngularVelocity(0);
    body.SetAngle(0);

    // makes the object a kinetic body
    body.SetType(b2Body.b2_kineticBody);

    // doesn't work. it always moves the object to (0,0)
    body.SetPosition(5,5); // I am using (5,5) for simplicity
                           // it should have the coordinates of the center of the container
    // alternative: (also doesn't work)
    //body.SetTransform(b2Vec2(5,5), body.GetAngle());
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:13:29.180

你的代码对我来说看起来不错。这是我的应用程序中的动态主体代码。不知道在你的情况下是否有意义。

```
 b2Vec2 delta = that->settings->initPos - that->ballBody->GetPosition();
        delta *= that->ballBody->GetMass();
        that->ballBody->ApplyLinearImpulse(delta, that->ballBody->GetPosition()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T16:53:10.483

尝试使用

```
body->SetTransform(b2Vec2(5,5), body->GetAngle()); 
```

# javascript - 等待模型的数据在遇到时间差异时使用 jQuery 加载？

> ID：12589174
> 
> 赞同：1
> 
> 时间：2012-09-25T18:43:00.117
> 
> 标签：javascript, jquery, load, jquery-deferred

我有一个 MVC 应用程序。我正在尝试使用 jQuery 的负载从服务器加载模型。这工作得很好。我现在正在尝试在我的所有视图都加载后运行一些 JavaScript。因此，我通过使用[jQuery .when来介绍 jQuery 的延迟承诺功能](http://api.jquery.com/jQuery.when/)

我对这个功能的有限理解使我相信下面的两段代码应该运行相同。不过，在我看来，我的“then”方法执行得太快了。我不确定如何确认。

**旧代码（作品）：**

```
$('#OrderDetails').load('../../csweb/Orders/OrderDetails', function () {
    $("fieldset legend").off('click').click(function () {
        var fieldset = $(this).parent();
        var isWrappedInDiv = $(fieldset.children()[0]).is('div');

        if (isWrappedInDiv) {
            fieldset.find("div").slideToggle();
        } else {
            fieldset.wrapInner("<div>");
            $(this).appendTo($(this).parent().parent());
            fieldset.find("div").slideToggle();
        }
    });
}); 
```

现在，我想扩展它以等待多个加载事件。不过，为了简单起见，我将尝试等待 OrderDetails：

**新代码（不起作用）：**

```
var onDisplayLoadSuccess = function () {
    console.log("Done!");
    console.log('Fieldset legend:', $('fieldset legend'); //Not all found.
    $("fieldset legend").off('click').click(function () {
        var fieldset = $(this).parent();
        var isWrappedInDiv = $(fieldset.children()[0]).is('div');

        if (isWrappedInDiv) {
            fieldset.find("div").slideToggle();
        } else {
            fieldset.wrapInner("<div>");
            $(this).appendTo($(this).parent().parent());
            fieldset.find("div").slideToggle();
        }
    });
};

var onDisplayLoadFailure = function () {console.error("Error.");};

$.when($('#OrderDetails').load('../../csweb/Orders/OrderDetails')).then(onDisplayLoadSuccess, onDisplayLoadFailure); 
```

我没有看到任何错误触发。我看到控制台打印出“完成”，但时间似乎不同。在调用 when/load/then 之前存在于页面上的图例应用了 click 事件，但从 OrderDetails 返回的视图中加载的图例**没有**绑定到它们的 click 事件。

相比之下，旧代码的成功函数将点击事件适当地应用于所有图例。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:12:22.607

要捕获绑定事件后动态添加的 DOM 元素上的事件，您需要委托它 (http://api.jquery.com/on/)。

就像是：

`$('fieldset').on('click', 'legend', function(){`

# google-apps-script - 无法使用 Logger.log 从未定义错误中读取属性“参数”

> ID：12589175
> 
> 赞同：1
> 
> 时间：2012-09-25T18:43:00.993
> 
> 标签：google-apps-script

我收到“TypeError：无法从未定义中读取属性“参数”。” 尝试记录 e.parameter 属性时。（我在 contactMe() 函数中插入了以下几行）

```
Logger.log(e.parameter.textBox);
Logger.log(e.parameter); 
```

否则脚本可以正常工作，知道吗？

```
function doGet() {
  var app = UiApp.createApplication();

  var mainPanel = app.createVerticalPanel().setId('mainPanel');
  app.add(mainPanel);

  mainPanel.add(app.createLabel('Enter your email to sign up'));

  var form = app.createHorizontalPanel();
  mainPanel.add(form);

  var email = app.createTextBox().setName('textBox').setId('textBox');
  form.add(email);

  var button = app.createButton('Sign up');
  form.add(button);

  var info = app.createLabel().setVisible(true).setId('info');
  mainPanel.add(info);

  //handler
  var handler = app.createServerHandler('contactMe').addCallbackElement(mainPanel);
  button.addClickHandler(handler);

  return app;
}

function contactMe(e){
 var app = UiApp.getActiveApplication();

 Logger.log("testing");
 Logger.log(e.parameter);
 Logger.log(e.parameter.textBox);

 app.getElementById('textBox').setValue('').setStyleAttribute("color", "black");
 app.getElementById('info').setText('Thank you!').setStyleAttribute("color", "black");

 var ss = SpreadsheetApp.openById('0AqKSxC6f0Cc7dF9aT1lUeXFEcnR2eUFYRGs4Y1NiVVE')
                        .getSheets()[0];
 var range = ss.getRange(ss.getLastRow()+1, 1, 1, 2);

 var values = [[new Date(),e.parameter.textBox]];  
 range.setValues(values); 

 return app;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:59:11.803

我刚刚测试了你的确切代码（除了工作表的东西），它运行良好......除了记录器在从处理程序函数调用时不显示任何内容，但这是一个已知问题......

我使用标签来检查 e.parameter 值，如下所示：

```
 app.getElementById('info').setText(e.parameter.textBox).setStyleAttribute("color", "black"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:10:25.680

有点开箱即用，但我认为它应该可以工作：

```
function doGet() {
  var app = UiApp.createApplication();

  var mainPanel = app.createFormPanel;
  app.add(mainPanel);

  mainPanel.add(app.createLabel('Enter your email to sign up'));

  var form = app.createHorizontalPanel();
  mainPanel.add(form);

  var email = app.createTextBox().setName('textBox').setId('textBox');
  form.add(email);

  var button = app.createSubmitButton('Sign up');
  form.add(button);

  var info = app.createLabel().setVisible(true).setId('info');
  mainPanel.add(info);

  return app;
}

function doPost(e){
 var app = UiApp.getActiveApplication();

 //Logger wont work in uiApps
 //in Form panels the UI is cleared so you want to write a thank you note
 app.add(app.createLabel("Thanks"));

 var ss = SpreadsheetApp.openById('0AqKSxC6f0Cc7dF9aT1lUeXFEcnR2eUFYRGs4Y1NiVVE')
                        .getSheets()[0];
 var range = ss.getRange(ss.getLastRow()+1, 1, 1, 2);

 var values = [[new Date(),e.parameter.textBox]];  
 range.setValues(values); 

 return app; 
```

亲切的问候，

托马斯·范拉图姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:41:58.890

我只是复制粘贴了你的完整代码，制作了一个电子表格并运行它。它工作得很好，最后不要忘记你的 } .....

# javascript - 如何在 XTemplate (itemTpl) 中调用函数

> ID：12589176
> 
> 赞同：14
> 
> 时间：2012-09-25T18:43:08.833
> 
> 标签：javascript, extjs, extjs4, sencha-touch, sencha-touch-2

我想对一些将输出到视图的文本使用 Ext 的[String方法。](http://docs.sencha.com/touch/2-0/#!/api/Ext.String)

例如：

```
itemTpl: [
    ...
    '<tpl switch="post_type">',
    '<tpl case="new_user">',
        '<p>{post_text_teaser}</p>',
        '<p>{timestamp}</p>',
    '<tpl default>',
        '<p>' + Ext.String.ellipsis( + '{post_text_teaser}' + \, 4) + '</p>',
    ...
].join(''), 
```

但当然，第 10 行的串联是非法的。

你知道这是否可能或如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T21:25:49.660

这应该可以解决您的问题：

```
 '<tpl switch="post_type">',
        '<tpl case="new_user">',
            '<p>{post_text_teaser}</p>',
            '<p>{timestamp}</p>',
        '<tpl default>',
            '<p>{[Ext.String.ellipsis(values.post_text_teaser,4,false)]}</p>',
    '</tpl>' 
```

[你可以在Sencha Docs](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)找到更多关于 XTemplate 的信息

模板成员函数的问题是，据我所知，您不能以常规方式直接在 itemTpl 中定义它们，而是需要显式定义一个新的 XTemplate，然后在您的 itemTpl 中使用它。参见示例：

```
var tpl = new XTemplate(
    '<tpl switch="post_type">',
        '<tpl case="new_user">',
            '<p>{post_text_teaser}</p>',
            '<p>{timestamp}</p>',
        '<tpl default>',
            '<p>{[this.shorten(values.post_text_teaser)]}</p>',
    '</tpl>',
    {        
        shorten: function(name){
           return Ext.String.ellipsis(name,4,false);
        }
    }
);

...

itemTpl: tpl,

... 
```

[**Senchafiddle 示例**](http://www.senchafiddle.com/#Kb5jz)

这应该和下面的代码一样正常工作（只需插入上面 XTemplate 中的代码）。

```
itemTpl: new XTemplate(...), 
```

[**Senchafiddle 示例**](http://www.senchafiddle.com/#ktSDx)

希望这能解决问题！

**编辑**注意到我错过了结束标签，有时没有它们也可以工作，但最好总是使用它们，因为它们可能会导致有趣的错误（在这种情况下，生成的代码中缺少括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:50:46.517

> 注意：下面的示例不能按预期工作！查看**zelexir**的答案以获得澄清！

您可以使用成员函数

```
itemTpl: [
    ...
    '<tpl switch="post_type">',
    '<tpl case="new_user">',
        '<p>{post_text_teaser}</p>',
        '<p>{timestamp}</p>',
    '<tpl default>',
        '<p>{[this.doAction(post_text_teaser)]}</p>',
    ...,
    {
        // XTemplate configuration:
        disableFormats: true,
        // member functions:
        doAction: function(name){
           return Ext.String.ellipsis(name + "\", 4);
        }
    }
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:52:24.840

您可以在模板中使用函数

```
itemTpl: [
    ...
    '<tpl switch="post_type">',
    '<tpl case="new_user">',
        '<p>{post_text_teaser}</p>',
        '<p>{timestamp}</p>',
    '<tpl default>',
        '<p>{[this.concatenate(values.post_text_teaser)]}</p>',
    ...,
    {
        concatenate: function(teaser) {
               return Ext.String.ellipsis( + teaser + \, 4);
        }
    }
] 
```

# mysql - mysql复杂语句

> ID：12589180
> 
> 赞同：0
> 
> 时间：2012-09-25T18:43:26.413
> 
> 标签：mysql

问题：两个表，第一个包含userid（constraint fk）和列'name'，第二个表包含两列int和id（外键），我需要的是找到max（column1-column2）并将其分配给第一个表中的名称；

我在做什么：mysql>

```
select u.name, MAX(table2.column1-table2.column2) As var 
  from table1 u, table2 b 
 where u.userID(from table1) = b.userID(from table2)
   and (b.column1-b.column2) = var; 
```

在这种情况下，它说“未知列变量”，是否可以没有触发器/程序？

![在此处输入图像描述](../Images/69c96f2e9e4ae2620e1d0e74630f9616.png)

任何1？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:54:20.770

也许尝试使用子查询？

```
select u.name, (b.column1 - b.column2) as var 
  from table1 u, table2 b 
 where u.userID(from table1) = b.userID(from table2)
   and (b.column1-b.column2) = ( select MAX(column1 - column2) from table2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:55:47.730

我认为这是正确的解决方案：

```
select u.name, 
    MAX(table2.column1-table2.column2) As var 
from table1 u
    join table2 b 
        on b.userId = u.userId
where u.userID(from table1) = b.userID(from table2)
group by u.name 
```

# javascript - 平滑画布动画

> ID：12589187
> 
> 赞同：2
> 
> 时间：2012-09-25T18:43:47.987
> 
> 标签：javascript, animation, webkit, html5-canvas, game-loop

我正在尝试学习如何使用 HTML5 的画布创建流畅的 JavaScript 动画。由于某种原因，动画并不流畅，而是一种“溅射”。

你可以看到我在[这个 jsFiddle](http://jsfiddle.net/3TAVu/)上构建的框架，它目前只使用 Webkit 属性。

另一位开发人员能够使用基于[Ext.js](http://www.sencha.com/products/extjs)[的 WebViews 源代码](https://github.com/mtilchen/webviews)创建相同的概念。出于学习目的，我想避免使用任何库来更好地理解 JavaScript。WebViews 概念可以在[这个 jsFiddle](http://jsfiddle.net/Zzqkd/)中查看，它显示了更流畅的动画。

我已经阅读并尝试了各种不同的场景，从将`update`requestAnimationFrame 中的调用拉到它自己的循环中，到将上下文转换为绘制位置，再到绘制到后台缓冲区上下文并将其复制到视口。以下代码代表了我迄今为止的最大努力。

**关于如何提高性能以使对象平稳移动而没有外部库的所有开销的任何建议？**

先感谢您。

```
var app;
var now = then = delta = 0;
var viewport = document.createElement( 'canvas' );
var viewportContext = viewport.getContext( '2d' );

function App( )
{
    this.circle = {
        position : viewport.width / 2,
        radius : 10
    };
}

App.prototype.initialize = function( )
{
    app = this;
    document.body.appendChild( viewport );
    viewport.width = 320;
    viewport.height = 200;

    webkitRequestAnimationFrame( app.render, viewport );
};

App.prototype.render = function( )
{
    now = performance.webkitNow( );
    delta = ( now - then ) / 1000.0;
    then = now;

    app.update( delta );
    viewportContext.clearRect( 0, 0, viewport.width, viewport.height );
    app.draw( viewportContext );

    webkitRequestAnimationFrame( app.render, viewport );
};

App.prototype.draw = function( context )
{
    context.fillStyle = "white";
    context.beginPath( );
    context.arc( this.circle.position | 0, viewport.height / 2 | 0, this.circle.radius | 0, 0, Math.PI * 2, true );
    context.closePath( );
    context.fill( );
};

App.prototype.update = function( deltaTime )
{
    this.circle.position += viewport.width / 5 * deltaTime;

    if( this.circle.position >= viewport.width )
    {
        this.circle.position = 0;
    }
};

window.onload = function( )
{
    new App( ).initialize( );
};​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:09:54.157

有关许多常见优化的信息，请参阅[此页面](http://www.html5rocks.com/en/tutorials/canvas/performance/)，并详细解释它们为什么以及如何提高性能。

此外，出于某种原因，性能似乎在更“中等大小”的画布上有所提高。我不完全确定这是为什么，但我相信这与浏览器优化有关。

您可以在此处通过一些小调整注意到一些性能提升：http: [//jsfiddle.net/3TAVu/1/](http://jsfiddle.net/3TAVu/1/)

具体来说，我在这里删除了对 fillStyle 的多余分配：

```
App.prototype.draw = function( context )
{
    context.beginPath( );
    context.arc( this.circle.position | 0, viewport.height / 2 | 0, this.circle.radius | 0, 0, Math.PI * 2, true );
    context.closePath( );
    context.fill( );
}; 
```

我还通过只清除画布的相关部分而不是整个东西来修改渲染方法：

```
App.prototype.render = function( )
{
    now = performance.webkitNow( );
    delta = ( now - then ) / 1000.0;
    then = now;

    var cX = app.circle ? (app.circle.position - app.circle.radius) : 0;
    var cY = Math.round(viewport.height/2) - app.circle.radius;
    var w = app.circle ? app.circle.radius * 2 : 0;

    viewportContext.clearRect(cX - 1, cY - 1, w + 2, w + 2);

    app.update( delta );
    app.draw( viewportContext );

    webkitRequestAnimationFrame( app.render, viewport );
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T15:30:58.917

嘿，我发现**[这个](http://creativejs.com/resources/requestanimationframe/)**关于 requestAnimationFrame 的东西解释得很好，它处理更流畅的动画。如果您或此问题的未来查看者可能会发现这很有用..

# php - 让 PHP 阅读我的 postgres 选择语句？

> ID：12589188
> 
> 赞同：1
> 
> 时间：2012-09-25T18:43:49.483
> 
> 标签：php, postgresql, sql

我有一个由其他人构建的应用程序，我需要对其进行编辑。有一个代码区域我找不到正确的语法......有人可以帮忙吗？

POSTGRES 中的 select 语句如下所示：

```
SELECT collection|| '/' ||color AS collection
FROM table
WHERE series = 'random number' <-- this is controlled by an array in the php 
```

在 php 中，现有代码如下所示：

```
$tableName = $db->getOne('SELECT collection FROM item_series WHERE series = ?', array($series['marriage_1']));
}else{$tableName = $series['marriage_1'];} 
```

我已经尝试过了，但它不起作用：

```
$tableName = $db->getOne('SELECT collection, ".'/'.", color AS collection FROM item_series WHERE series = ?', array($series['marriage_1']));
}else{
$tableName = $series['marriage_1'];} 
```

请帮助我已经寻找了几个小时的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:03:43.043

不会是这个吧？

```
$db->getOne('select collection || \'/\' || color as collection ...', ...); 
```

或这个？

```
$db->getOne("select collection || '/' || color as collection ...", ...); 
```

您的尝试：

```
'SELECT collection, ".'/'.", color AS collection FROM item_series WHERE series = ?' 
```

将结束此 SQL 到数据库：

```
SELECT collection, "/", color AS collection FROM item_series ... 
```

并且 PostgreSQL 不会因为您尝试对字符串文字使用双引号而感到不安，它会认为您正在尝试访问名为`/`. 此外，您想要连接并且想要使用`||`SQL 运算符。

# scala - 无法将表示类型实现为类型成员

> ID：12589193
> 
> 赞同：8
> 
> 时间：2012-09-25T18:44:07.450
> 
> 标签：scala, types, abstract-type, type-projection, bounded-quantification

在思考[另一个问题](https://stackoverflow.com/questions/12586748/type-mismatch-with-abstract-types-diverging)时，我遇到了似乎相关的不同谜语。这是其中之一：

```
trait Sys[S <: Sys[S]] {
  type Peer <: Sys[Peer]
}

trait Fenced {
  type Peer <: Sys[Peer]
}

def makeFence[S <: Sys[S]] = new Fenced { type Peer = S#Peer } 
```

其中错误如下：

```
error: overriding type Peer in trait Fenced with bounds >: Nothing <: Sys[this.Peer];
 type Peer has incompatible type
       def makeFence[S <: Sys[S]] = new Fenced { type Peer = S#Peer }
                                                      ^ 
```

为什么？（也尝试将 self-type 添加`_:S =>`到`Sys`，没关系）

* * *

虽然 Rex 的回答使构造`Fenced`对象成为可能，但它并没有真正解决我在使用类型投影 ( `S#Peer`) 时表示类型字符丢失的问题。我提出了另一种提出更严格限制的方案；我认为这是核心问题：

```
trait Test[S <: Sys[S]] {
  def make[T <: Sys[T]](): Unit

  make[S#Peer]()
}

error: type arguments [S#Peer] do not conform to method make's type 
       parameter bounds [T <: Sys[T]]
              make[S#Peer]()
                  ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:35:10.760

你能让`Sys`'s 的类型参数协变吗？例如，这编译：

```
trait Sys[+S <: Sys[S]] { type Peer <: Sys[Peer] }
trait Fenced { type Peer <: Sys[Peer] }

def makeFence[S <: Sys[S]] = new Fenced { type Peer = S#Peer } 
```

现在，如果我们有以下内容（包装在一个对象中只是为了 REPL 复制粘贴方便）：

```
object Example {
  case class SysX(i: Int) extends Sys[SysX] { type Peer = SysY }
  case class SysY(j: Int) extends Sys[SysY] { type Peer = SysX }
}

import Example._ 
```

它按我的预期工作：

```
scala> val fenceX = makeFence[SysX]
fenceX: java.lang.Object with Fenced{type Peer = Example.SysX#Peer} = ...

scala> val y: fenceX.Peer = SysY(1)
y: fenceX.Peer = SysY(1)

scala> val y: fenceX.Peer = SysX(1)
<console>:15: error: type mismatch;
 found   : Example.SysX
 required: fenceX.Peer
       val y: fenceX.Peer = SysX(1) 
```

哪个（我认为）是你想要的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T21:32:05.730

我仍然不完全确定您正在寻找什么限制，但这是一种可能性：

```
trait Sys[S <: Sys[S]] {
  type Peer <: Sys[Peer]
}

trait Fenced {
  type MySys <: Sys[MySys]
  type Peer = MySys#Peer
}

def makeFence[S <: Sys[S]] = new Fenced{ type MySys = S } 
```

`Peer`这使您（并且需要！）可以访问`Fenced`. 我不确定是否`Fenced`可以这样做，或者它是否必须跨外部类型进行抽象。

# objective-c - 如何读取 OSX 的物理屏幕尺寸？

> ID：12589198
> 
> 赞同：17
> 
> 时间：2012-09-25T18:44:22.280
> 
> 标签：objective-c, macos, screen, dpi

我想知道 Mac OSX 下的物理屏幕尺寸。但是`NSDeviceResolution`总是报错值（72），所以分辨率/dpi的计算结果是错误的。

在“About This Mac”里面，有一个 Mac 型号字符串，我的是“15-inch, Early 2011”。所以我想知道是否有办法（可能在 obj-c 中）读取该字符串，然后我可以将其用作物理屏幕尺寸。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T19:29:42.063

您可以使用[`CGDisplayScreenSize`](https://developer.apple.com/documentation/coregraphics/1456599-cgdisplayscreensize)以毫米为单位获取屏幕的物理尺寸。鉴于您已经知道分辨率，您可以从中计算 DPI。

所以例如

```
NSScreen *screen = [NSScreen mainScreen];
NSDictionary *description = [screen deviceDescription];
NSSize displayPixelSize = [[description objectForKey:NSDeviceSize] sizeValue];
CGSize displayPhysicalSize = CGDisplayScreenSize(
            [[description objectForKey:@"NSScreenNumber"] unsignedIntValue]);

NSLog(@"DPI is %0.2f", 
         (displayPixelSize.width / displayPhysicalSize.width) * 25.4f); 
         // there being 25.4 mm in an inch 
```

那`@"NSScreenNumber"`东西看起来很狡猾，[但却](https://developer.apple.com/documentation/appkit/nsscreen/1388360-devicedescription)是`CGDirectDisplayID`从`NSScreen`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-28T00:09:41.553

上面汤米的回答非常好——我已经将它移植到了 Swift（供我自己使用）并在此处发布作为参考，但汤米的回答应该被认为是规范的。

```
import Cocoa

public extension NSScreen {
    var unitsPerInch: CGSize {
        let millimetersPerInch:CGFloat = 25.4
        let screenDescription = deviceDescription
        if let displayUnitSize = (screenDescription[NSDeviceDescriptionKey.size] as? NSValue)?.sizeValue,
            let screenNumber = (screenDescription[NSDeviceDescriptionKey("NSScreenNumber")] as? NSNumber)?.uint32Value {
            let displayPhysicalSize = CGDisplayScreenSize(screenNumber)
            return CGSize(width: millimetersPerInch * displayUnitSize.width / displayPhysicalSize.width,
                          height: millimetersPerInch * displayUnitSize.height / displayPhysicalSize.height)
        } else {
            return CGSize(width: 72.0, height: 72.0) // this is the same as what CoreGraphics assumes if no EDID data is available from the display device — https://developer.apple.com/documentation/coregraphics/1456599-cgdisplayscreensize?language=objc
        }
    }
}

if let screen = NSScreen.main {
    print("main screen units per inch \(screen.unitsPerInch)")
} 
```

请注意，返回的值*实际上*是“每英寸点数”（但不是所有定义；见下文），几乎不是“每英寸像素数”——现代 Mac 的每点像素数取决于当前系统偏好设置中的“分辨率”设置和设备的固有分辨率（Retina 显示器有更多的像素）。

你*对*返回值的了解是，如果你用类似的代码画一条线

```
CGRect(origin: .zero, size: CGSize(width: 10, height: 1)).fill() 
```

如果你用一把非常精确的尺子在屏幕上测量它，这条线将是`1 / pointsPerInch.height`英寸高和英寸宽。`1 / pointsPerInch.width`

（长期以来，图形框架将“点”定义为“现实世界中的 1/72 英寸”*以及“**无论*1 x 1 单位的框的宽度或高度最终在当前以当前分辨率进行监控 — 通常是相互冲突的两个定义。）

 *所以对于这段代码，我使用“单位”这个词来表明我们不是在处理 1/72 英寸，也不是 1 个物理像素。*

# java - 如何显示通用 HashMap 条目

> ID：12589199
> 
> 赞同：1
> 
> 时间：2012-09-25T18:44:24.043
> 
> 标签：java, generics

我试图了解泛型是如何工作的，并且我有这段代码来显示带有这些参数 Map 的类的 newDetails 的条目。这是我的代码。

```
public class Map<Key,Value> {

    private Map<Key, Value> entry;

    public Map(){
        entry = new HashMap<Key,Value>();
    }

    public void putEntry(Key k, Value id){
        entry.put(k, id);
    }

    public void printMe(){
        System.out.println();
        for (Map.Entry<Key, Value> x: entry.entrySet()){
            System.out.print(x+" ");
        }
    }
} 
```

巧克力班

```
 public class Chocolates<T> {

    private List<T> listOfChocolate = new ArrayList<T>(); 

    public Chocolates(T choc){
        listOfChocolate.add(choc);
    }

    public void addChocolate(T getChoc){
        listOfChocolate.add(getChoc);
    }

    public List<T> getLists(){
        return listOfChocolate;
    }
} 
```

主要方法

```
public static void main(String[] arg){

        Map<Chocolates<String>, Integer> newDetails = new Map<Chocolates<String>, Integer>();
        Chocolates<String> choco = new Chocolates<String>();

        newDetails.putEntry((new Chocolates<String>("Cadbury")), 1);
        newDetails.putEntry((new Chocolates<String>("Hersheys")), 2);
        newDetails.printMe();
    } 
```

每当我尝试运行程序时，它只会显示这个

```
generics.Chocolates@9931f5=1 generics.Chocolates@19ee1ac=2 
```

如何显示像 Cadbury 1 然后 Hersheys 2 这样的实际条目？

还有什么方法可以改进 main 方法或程序的某些部分，因为每当我添加新条目时，我总是会创建一个新对象。最初我想做的是创建此代码的泛型版本：

```
Map<List<String>, Integer> newDetails = new HashMap<List<String>, Integer>(); 
```

正如有人告诉我的，在泛型类中实现那行代码要好得多。有什么建议么？谢谢

# 编辑 2

我按照 Nambari 的要求编辑了 Maps Class printMe Method

```
public void printMe(){
        System.out.println();
        for (Map.Entry<Key, Value> x: entry.entrySet()){
            System.out.print(x.getKey()+" "+x.getValue());
        }
    } 
```

输出是：

generics.Chocolates@9931f5 1generics.Chocolates@19ee1ac 2

但是如果我按照 Joao 的建议添加这一行

```
public String toString(){
        return listOfChocolate.toString();
    } 
```

输出是：

```
[Hersheys] 2[Cadbury] 1 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:48:38.023

[`Object#toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)在类中覆盖`Chocolate`：

```
public class Chocolates<T> {

  // ...

  @Override
  public String toString() {
    return listOfChocolate.toString();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:47:48.750

更新`printMe(..)`方法`System.out`

```
System.out.print(x.getKey() + " " + x.getValue()); 
```

编辑：

```
 public void printMe(){
        System.out.println();
        for (java.util.Map.Entry<Key, Value> x: entry.entrySet()){
            System.out.print(((Chocolates)x.getKey()).getLists().get(0) +" "+x.getValue());
        }
    } 
```

注意：`NPE`如果`getLists()`为空，此代码可能会抛出

# linux - 在两个地方查找文件的位置 bash linux

> ID：12589201
> 
> 赞同：1
> 
> 时间：2012-09-25T18:44:42.903
> 
> 标签：linux, file, bash, search

我希望在 bash 中的一个命令中执行此操作：

```
[[ -f ./${SQLITE} ] || [ -f /tmp/${SQLITE} ]] 
```

还不知道该怎么做....在两个地方查找文件...在一个命令中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:46:35.903

你有一个额外的`]`，`[`这是不需要的：

```
[[ -f ./${SQLITE} || -f /tmp/${SQLITE} ]] 
```

# c# - 如何使工具栏出现在其他控件之前？

> ID：12589203
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:45:02.263
> 
> 标签：c#, wpf, visual-studio-2010

我是 WPF 新手，在让我的 GUI 正确显示时遇到问题。我有一个 Grid，里面有一个工具箱和一个 UniformGrid。UniformGrid 中有一堆按钮，工具箱中有一个文本框。我的问题是除非应用程序窗口是全屏的，否则按钮位于网格顶部。我该如何解决这个问题，以便按钮位于网格下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:55:08.247

使用`StackPanel`with`Orientation = Vetrical`或 a`DockPanel` `toolbox.Dock = Top`

```
 <StackPanel Orientation="Vertical">
        <Toolbox>
            <TextBox></TextBox>
        </Toolbox>
        <UniformGrid>
            <Button></Button>
            <Button></Button>
        </UniformGrid>
    </StackPanel> 
```

# php - 为什么longtext字段在学说中总是空的？

> ID：12589206
> 
> 赞同：1
> 
> 时间：2012-09-25T18:45:23.253
> 
> 标签：php, symfony, doctrine-orm

我在 mysql DB 中有 LONGTEXT 列。在我的实体类中，我有

```
 **
 * @ORM\Column(name="tmpl_content", type="text",  nullable=false)
 * @Assert\NotNull()
 */
protected $tmpl_content 
```

CRUD 操作是自动生成的。保存实体很好 - 我可以保存文本并在 phpmyadmin 中查看它。但是当这样加载实体时（自动生成的代码）

```
$entity = $em->getRepository('AcmeMailmanagerBundle:Templates')->find($id); 
```

我的 LONGTEXT 列始终为空。我试图将 LONGTEXT 更改为 VARCHAR 并将注释更改为字符串 - 一切正常，所以文本数据映射有问题。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T20:48:05.873

这是教义和mysqli驱动程序的问题，我将驱动程序从

```
database_driver: mysqli 
```

到

```
database_driver: pdo_mysql 
```

及其工作...我将进一步调查并提交错误报告

# linux-device-driver - 如何集成星号扩展和 PSTN 寻线

> ID：12589210
> 
> 赞同：0
> 
> 时间：2012-09-25T18:45:37.990
> 
> 标签：linux-device-driver, asterisk, pbx, sip-server

任何人都可以指出我从 vicidial now 服务器集成 pstn 线路和 sip 扩展的最佳教程链接

目前我正在使用 VicidialNow CE 1.1，我已经创建了 20 个可以进行内部调用的扩展。我想添加一条 PSTN 寻线（即有 10 个通道），以便分机可以互相呼叫，也可以呼叫中继线或带有特定前缀 ex 的外线。99.

哪种设备最适合我？

谁能帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:17:24.527

我建议做两件事：

1.  阅读[Asterisk：电话的未来](http://shop.oreilly.com/product/9780596009625.do/ "星号：电话的未来")（可[在此处](http://cdn.oreillystatic.com/books/9780596510480.pdf)以免费 pdf 格式获取）
2.  使用 gui，例如[FreePBX](http://freepbx.org)（您可以将其与 linux、lamp、星号等一起[打包为 iso ）](http://www.freepbx.org/freepbx-distro)

如果您想使用纯拨号方案，您需要以下内容：

```
[some-context]
exten => s,1,Dial(Tech/User1)
exten => s,n,Dial(Tech/User2)
exten => s,n,Dial(Tech/User3) 
```

如果您使用 FreePBX，请查看 Ring Groups 或 Queues 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:45:13.967

要连接 pstn，您需要 pstn 卡或网关或 voip 中继，您可以查看此链接以在 goautodial [http://striker24x7.blogspot.in/2012/04/configuring-digium-cards-with-asterisk中配置 digium pstn 卡.html](http://striker24x7.blogspot.in/2012/04/configuring-digium-cards-with-asterisk.html)

# c# - 给定一组点查找区域

> ID：12589214
> 
> 赞同：5
> 
> 时间：2012-09-25T18:46:02.757
> 
> 标签：c#, image-processing, geometry

给定 x,y 坐标列表和已知宽度和高度，如何确定封闭区域的***数量***（在 C# 中）？

例如：

> ![在此处输入图像描述](../Images/f61d0458af15cd1d28995149a0b77201.png)

在此图像中，定义了 5 个***封闭区域：***

1.  脸 (1)
2.  眼睛 (2)
3.  鼻子 (1)
4.  右脸 (1)

x,y 点列表可以是任何黑色像素，包括嘴巴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:57:43.690

我使用 OpenCV 取得了巨大的成功。.net 有一个名为[Emgu CV的库](http://www.emgu.com/wiki/index.php/Main_Page)

这是一个涵盖 Emgu CV 替代方案的问题：[.Net (dotNet) wrappers for OpenCV?](https://stackoverflow.com/questions/85569/net-dotnet-wrappers-for-opencv)

该库包含用于识别轮廓和查找有关它们的属性的函数。您可以搜索 cvContourArea 以查找更多信息。

如果您正在寻找解决此特定问题的快速解决方案并想编写自己的代码而不是重用其他代码，那么我没有可以提供的算法来做到这一点。对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:10:45.340

您可以使用这个简单的算法，基于使用辅助位图进行洪水填充的想法：

```
// backColor is an INT representation of color at fillPoint in the beginning.
// result in pixels of enclosed shape.
private int GetFillSize(Bitmap b, Point fillPoint)
{
   int count = 0;
   Point p;
   Stack pixels = new Stack();
   var backColor = b.GetPixel(fillPoint.X, fillPoint.Y);
   pixels.Push(fillPoint);
   while (pixels.Count != 0)
   {
       count++;

       p = (Point)pixels.Pop();
       b.SetPixel(p.X, p.Y, backColor);

       if (b.GetPixel(p.X - 1, p.Y).ToArgb() == backColor)
           pixels.Push(new Point(p.X - 1, p.Y));

       if (b.GetPixel(p.X, p.Y - 1).ToArgb() == backColor)
           pixels.Push(new Point(p.X, p.Y - 1));

       if (b.GetPixel(p.X + 1, p.Y).ToArgb() == backColor)
           pixels.Push(new Point(p.X + 1, p.Y));

       if (b.GetPixel(p.X, p.Y + 1).ToArgb() == backColor)
           pixels.Push(new Point(p.X, p.Y + 1));
   }

   return count;
} 
```

**更新**

上面的代码只适用于这个四重链接的封闭区域。以下代码适用于八联的封闭区域。

```
// offset points initialization.
Point[] Offsets = new Point[]
{
    new Point(-1, -1),
    new Point(-0, -1),
    new Point(+1, -1),
    new Point(+1, -0),
    new Point(+1, +1),
    new Point(+0, +1),
    new Point(-1, +1),
    new Point(-1, +0),
};

...

private int Fill(Bitmap b, Point fillPoint)
{
    int count = 0;
    Point p;
    Stack<Point> pixels = new Stack<Point>();
    var backColor = b.GetPixel(fillPoint.X, fillPoint.Y).ToArgb();
    pixels.Push(fillPoint);
    while (pixels.Count != 0)
    {
        count++;

        p = (Point)pixels.Pop();
        b.SetPixel(p.X, p.Y, Color.FromArgb(backColor));

        foreach (var offset in Offsets)
            if (b.GetPixel(p.X + offset.X, p.Y + offset.Y).ToArgb() == backColor)
                pixels.Push(new Point(p.X + offset.X, p.Y + offset.Y));
    }

    return count;
} 
```

下图清楚地说明了我的意思。也可以向偏移阵列添加更多远点，以便能够填充具有间隙的区域。

![连通性](../Images/79dddeb859fcbf5e864dcd0d129f1533.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T18:57:36.890

示例图像中有几个特殊情况。你必须决定如何处理它们。

通常，您将从将光栅图像转换为一系列多边形开始。那么计算面积是一件相当琐碎的事情（参见Servy的评论）

特殊情况是脸部和嘴巴的一侧。两者都是开放的形状，而不是封闭的。你需要弄清楚如何关闭它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T19:02:11.753

我认为这归结为计算每个区域中（非黑色）像素的数量。如果您选择一个不是黑色的像素，请将其添加到 a`HashSet<>`中，查看所选像素的上方、下方、左侧和右侧的像素是否也是非黑色的。

每次您发现*新*的非黑色像素（通过上/下/左/右），将它们添加到您的集合中。当你找到它们时，数一数。

您所在地区的面积`count / (pixelWidthOfTotalDrawing * pixelHeightOfTotalDrawing)`乘以整个矩形的面积（取决于您想要的单位）。

评论：我不认为这看起来像一个多边形。这就是为什么我想到了简单绘图软件的“填充油漆”功能。

# firefox - GWT、Firefox 和 Windows 7 触控

> ID：12589220
> 
> 赞同：2
> 
> 时间：2012-09-25T18:46:51.297
> 
> 标签：firefox, gwt, windows-7

我正在尝试使用 GWT 设置应用程序。问题是 Firefox 和 GWT 没有正确处理 Windows 7 的触摸手势。在示例 GWT 页面上使用 Firefox 时，我无法执行 Windows 处理的每次触摸手势。通常 Windows 7 会将这些触摸手势转换为键盘快捷键，但在 Firefox 中，它们的工作时间约为 20%……

使用 Chrome 和 IE 9 没有问题。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T11:17:08.817

也许这个答案和下面的评论可能有助于澄清与上述问题相关的各种问题：[https ://stackoverflow.com/a/24942720/1915920](https://stackoverflow.com/a/24942720/1915920)

# javascript - 我可以定义一个变量来替换此示例中 $(this) 的使用吗？

> ID：12589225
> 
> 赞同：1
> 
> 时间：2012-09-25T18:47:03.383
> 
> 标签：javascript, jquery

我有以下代码：

```
$('#detailData')
    .on('click', '.gridLink', function () {
        dialog(this);
        return false;
    })

function dialog(link) {
   var $link = $(link);
   var viewURL = $link.attr('data-href') 
```

我说我可以用这个代替它是正确的吗？

```
$('#detailData')
    .on('click', '.gridLink', function () {
        var $gridLink = $(this);
        dialog($gridLink);
        return false;
    })

function dialog($gridLink) {
   var viewURL = $gridLink.attr('data-href') 
```

我试图将其放在 stackoverflow.com 的代码审查中。有人需要解决登录问题，因为我无法连接我的堆栈帐户:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:48:20.923

是的，`foo = $(this)`完全合法，合法。事实上，这并非完全不常见。当您觉得需要`this`在 jQuery 对象中反复包装时，这样做是明智的。这样，您将其包装一次，并获得对提供性能优势的工作的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:04:35.740

是的，您在这两种情况下传递的方式都是完全合法的。这还具有缓存和重用它的优点，而不是每次使用时都尝试访问它。

# facebook - FB.Event.subscribe 未注册状态：在 Internet Explorer 和 Firefox 中为真

> ID：12589228
> 
> 赞同：2
> 
> 时间：2012-09-25T18:47:11.263
> 
> 标签：facebook, internet-explorer, google-chrome, login, authorization

如果他们已经登录到 FB，我希望我的 FB 应用程序能够自动获取有关用户的信息。在 chrome 中，以下代码可以完美运行并获取请求的信息。但是，在 Internet Explorer 和 Firefox 中，以下代码仅在我添加 FB.login(); 时才有效。进入 window.fbAsyncInit 函数。这会导致每次访问我不想要的页面时都会加载一个弹出窗口。通过使用警报来测试我的代码，我确定 FB.Event.subscribe 函数甚至没有在 IE 和 FF 中被调用，但在 Chrome 中运行良好。为什么这在 IE 和 FF 中表现不同，我怎样才能让它正常工作？

```
 (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));

// Init the SDK upon load
window.fbAsyncInit = function() {
   FB.init({
      appId      : 'ID', // App ID
      channelUrl : 'Channel Path', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true,  // parse XFBML
      oauth      : true,
      frictionlessRequests: true
   });

  // listen for and handle auth.statusChange events
   FB.Event.subscribe('auth.statusChange', function(response){
      console.log(response);
      if (response.authResponse) {
        // user has auth'd your app and is logged into Facebook
         FB.api('/me', function(me){
            if (me.name) {
               userID = me.id;
            }
         });
         document.getElementById('auth-loggedout').style.display = 'none';
         document.getElementById('auth-loggedin').style.display = 'block';
      }else {
         // user has not auth'd your app, or is not logged into Facebook
         $('#auth-displayname').html('');
         document.getElementById('auth-loggedout').style.display = 'block';
         document.getElementById('auth-loggedin').style.display = 'none';
      }
   });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:06:15.183

auth.statusChange 仅在您已登录 facebook 时才被调用。

我相信你正在 chrome 上进行测试，所以你很可能已经登录。但是当你去 firefox 或 IE 并且你没有登录时，auth.statusChange 永远不会被调用

通过在 chrome 上登录 facebook 进行测试，你会发现它在那里也不起作用。

因此，您必须在页面加载后立即对 FB.getLoginStatus() 进行显式调用以初始化内容，并监听 statusChange 以了解将来的更改：

```
FB.getLoginStatus(function(response){
  if (response.authResponse) {
    // user has auth'd your app and is logged into Facebook
     FB.api('/me', function(me){
        if (me.name) {
           userID = me.id;
        }
     })
    }
 });

// listen for and handle auth.statusChange events
FB.Event.subscribe('auth.statusChange', function(response){
  if (response.authResponse) {
     document.getElementById('auth-loggedout').style.display = 'none';
     document.getElementById('auth-loggedin').style.display = 'block';
  }else {
     // user has not auth'd your app, or is not logged into Facebook
     $('#auth-displayname').html('');
     document.getElementById('auth-loggedout').style.display = 'block';
     document.getElementById('auth-loggedin').style.display = 'none';
  } 
```

});

# c# - 无法将 JSON 数据从 C# 发送到 PHP 服务器

> ID：12589229
> 
> 赞同：1
> 
> 时间：2012-09-25T18:47:19.377
> 
> 标签：c#, php, json

我一直在到处研究以解决这个问题，但我每次都碰壁。目标是将数据序列化为 JSON 字符串并将该数据发送到服务器上的 PHP 文件。最终结果是 json_decode 读出 null。我已经为此工作了几个小时，任何人的任何指导或解决方案都将不胜感激。这是我的代码片段。

```
private void sendData(string questionId, string youtubeUrl)
    {

        //fill in class data
        videoData vd = new videoData();
        vd.question_id = questionId;
        vd.video_path_on_server = videoId;

        //specifiy the url you want to send data to
        string phpurl = "http://questionoftheweek.local/video/save";

        //make request to url and set post properties
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(phpurl);
        request.Method = "POST";
        request.ContentType = "application/json; charset=utf-8";

        try
        {
            //serialize
            DataContractSerializer ser = new DataContractSerializer(typeof(videoData));
            MemoryStream ms = new MemoryStream();
            ser.WriteObject(ms, vd);

            string videodata = Encoding.UTF8.GetString(ms.ToArray());
            StreamWriter writer = new StreamWriter(request.GetRequestStream());
            writer.Write(videodata);
            writer.Close();
        }
        catch (Exception ex) {
            MessageBox.Show("Unable to send data: " + ex.Message);
        } 
```

这是我正在使用的服务器上的 PHP 代码：

```
<?php
$json = json_encode($_POST);
var_dump(json_decode($json)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:50:51.290

Instead of using `DataContractSerializer` Use `DataContractJsonSerializer` or `JavaScriptSerializer` in your C# code

[DataContractJsonSerializer Class Docs](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)
[JavaScriptSerializer Class Docs](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

# javascript - 如何检查 ID 是否相等

> ID：12589232
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:47:23.700
> 
> 标签：javascript

如果我说...

```
alert(this.id); 
```

我收到一条显示“信息”的警报。我该怎么办...

```
if(this.id == "info") alert("Info"); 
```

还，

```
if(this.is("#info")) alert ("Info"); 
```

不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:50:05.923

Try `if(this.getAttribute('id') == "info") alert("Info");` Or maybe `this` is not an object then there is additional code from your side needed to tell what's wrong.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T18:53:20.260

使用 attr("id")。

检查这个[http://jsfiddle.net/PJDkk/1/](http://jsfiddle.net/PJDkk/1/)

# c++ - OpenGL VBO 绘图

> ID：12589240
> 
> 赞同：0
> 
> 时间：2012-09-25T18:47:55.877
> 
> 标签：c++, opengl, drawing, vbo

我似乎在使用 VBO 在 OpenGL 中绘制对象时遇到了一些麻烦。我试图从以下位置复制示例：[http](http://www.opengl.org/wiki/VBO_-_just_examples) ://www.opengl.org/wiki/VBO__-_just_examples （第 2 号），但我无法让飞机出现在屏幕上。

顶点.h：

```
#include <freeglut>

struct Vertex {
    GLfloat position[3];
    GLfloat normal[3];
    GLfloat *uvs[2];
    unsigned short uvCount;
}; 
```

三角形.h：

```
#include <GL/glew.h>
#include "Vertex.h"

class Triangles {
public: 
    Triangles(GLuint program, Vertex *vertices, unsigned int vertexCount, unsigned int *indices[3], unsigned int indiceCount);
    ~Triangles();
    void Draw();

private:
    GLuint program;
    GLuint VertexVBOID;
    GLuint IndexVBOID;
    GLuint VaoID;

    unsigned int *indices[3];
    unsigned int indiceCount;
}; 
```

三角形.cpp：

```
#include "Triangles.h"
#include <stdio.h>
#include <stddef.h>

Triangles::Triangles(GLuint program, unsigned int *indices[3], unsigned int indiceCount) {
    memcpy(this->indices, indices, sizeof(int) * indiceCount * 3);
    this->indiceCount = indiceCount;
    this->program = program;

    glGenVertexArrays(1, &VaoID);
    glBindVertexArray(VaoID);

    glGenBuffers(1, &VertexVBOID);
    glBindBuffer(GL_ARRAY_BUFFER, VertexVBOID);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * vertexCount, vertices, GL_STATIC_DRAW);

    GLuint attributeLocation = glGetAttribLocation(program, "position");
    glEnableVertexAttribArray(attributeLocation);
    glVertexAttribPointer(attributeLocation, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid *)(offsetof(Vertex, position)));

    attributeLocation = glGetAttribLocation(program, "normal");
    glEnableVertexAttribArray(attributeLocation);
    glVertexAttribPointer(attributeLocation, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid *)(offsetof(Vertex, normal)));

    glGenBuffers(1, &IndexVBOID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexVBOID);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(unsigned int) * 3 * indiceCount, indices, GL_STATIC_DRAW);
};

Triangles::~Triangles() {
    glDisableVertexAttribArray(glGetAttribLocation(program, "position"));
    glDisableVertexAttribArray(glGetAttribLocation(program, "normal"));

    glDeleteBuffers(1, &VertexVBOID);
    glDeleteBuffers(1, &IndexVBOID);
    glDeleteVertexArrays(1, &VaoID);
}

void Triangles::Draw() {
    glBindVertexArray(VaoID);
    glDrawElements(GL_TRIANGLES, indiceCount, GL_UNSIGNED_INT, 0);
}; 
```

摘自 main.cpp（创建 triagle 对象）：

```
Vertex vertices[4];
vertices[0].position[0] = -1;
vertices[0].position[1] = 1;
vertices[0].position[2] = 0;
vertices[0].normal[0] = 0;
vertices[0].normal[0] = 0;
vertices[0].normal[0] = 1;
vertices[0].uvCount = 0;

vertices[1].position[0] = 1;
vertices[1].position[1] = 1;
vertices[1].position[2] = 0;
vertices[1].normal[0] = 0;
vertices[1].normal[0] = 0;
vertices[1].normal[0] = 1;
vertices[1].uvCount = 0;

vertices[2].position[0] = 1;
vertices[2].position[1] = -1;
vertices[2].position[2] = 0;
vertices[2].normal[0] = 0;
vertices[2].normal[0] = 0;
vertices[2].normal[0] = 1;
vertices[2].uvCount = 0;

vertices[3].position[0] = -1;
vertices[3].position[1] = -1;
vertices[3].position[2] = 0;
vertices[3].normal[0] = 0;
vertices[3].normal[0] = 0;
vertices[3].normal[0] = 1;
vertices[3].uvCount = 0;

unsigned int **indices;
indices = new unsigned int*[2];
indices[0] = new unsigned int[3];
indices[0][0] = 0;
indices[0][1] = 1;
indices[0][2] = 2;
indices[1] = new unsigned int[3];
indices[1][0] = 2;
indices[1][1] = 3;
indices[1][2] = 0;

Triangles *t = new Triangles(program, vertices, 4 indices, 2); 
```

创建着色器（GLenum，字符 *）：

```
GLuint createShader(GLenum type, char *file) {
    GLuint shader = glCreateShader(type);
    const char *fileData = textFileRead(file);
    glShaderSource(shader, 1, &fileData, NULL);

    glCompileShader(shader);
    return shader;
} 
```

着色器加载：

```
 GLuint v = createShader(GL_VERTEX_SHADER);
    GLuint f = createShader(GL_FRAGMENT_SHADER, "fragmentShader.frag");

    program = glCreateProgram();

    glAttachShader(program, v);
    glAttachShader(program, f);
    glLinkProgram(program);

    glUseProgram(program); 
```

vertexShader.vert：

```
in vec3 position;
in vec3 normal;

out vec3 a_normal;

void main() {
    gl_Position = vec4(position, 1.0);
} 
```

片段着色器.frag：

```
in vec3 a_normal;

out vec4 out_color;

void main() {
    out_color = vec4(1.0, 1.0, 1.0, 1.0);
} 
```

如果需要更多代码，请告诉我。作为旁注，一切都编译得很好，我只是看不到我在屏幕上构建的飞机（可能是因为我没有使用颜色？）

我的OpenGL信息如下：

*   供应商：ATI Technologies Inc.
*   渲染器：ATI Radeon HD 5700 系列
*   版本：3.2.9756 兼容性配置文件上下文
*   扩展： extensions = GL_AMDX_name_gen_delete GL_AMDX_random_access_target GL_AMDX_vertex_shader_tessellator GL_AMD_conservative_depth GL_AMD_draw_buffers_blend GL_AMD_performance_monitor GL_AMD_seamless_cubemap_per_texture GL_AMD_shader_stencil_export GL_AMD_texture

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:31:47.363

回应您的评论：

> 不幸的是我不做错误检查

您应该**始终**添加一些 OpenGL 错误检查，它可以帮助您避免很多问题。它应该如下所示：

```
int err = glGetError();
if(err != 0) {
   //throw exception or log message or die or something
} 
```

> 我使用矩阵函数是因为我没有意识到顶点着色器会影响它。我假设矩阵设置为堆栈顶部的矩阵（我在绘制之前推送的那个。）

这是一个不正确的假设。唯一引用已弃用的矩阵堆栈的变量是特殊的（尽管已弃用）变量`gl_ModelViewProjectionMatrix`。您目前拥有的只是一个未使用的未初始化矩阵，它完全忽略了您的矩阵堆栈。

> 至于指数，我不确定你的意思。我只是在纸上画了顶点，并以此为基础确定了索引。

我指的不是索引缓冲区中三角形的索引，而是 glAttrib* 函数的第一个参数。我想“属性位置”是比索引更正确的术语。

```
glEnableVertexAttribArray(0);
glVertexAttribPointer(0, ...   //attrib location 0

glEnableVertexAttribArray(1);  
glVertexAttribPointer(1, ...   //attrib location 1 
```

您似乎只是随机假设“0”和“1”映射到“位置”和“正常”。这不是一个安全的假设。您应该使用 glGetAttribLocation 查询“位置”和“正常”的属性位置值，然后将该值用于 glEnableVertexAttribArray 和 glVertexAttribPointer。

# ios - 尝试在 iOS 设备上运行应用程序时出错。它在模拟器上运行

> ID：12589242
> 
> 赞同：0
> 
> 时间：2012-09-25T18:48:06.223
> 
> 标签：ios

尝试在我的 iPhone 上使用 ZXing 加载我的应用程序时遇到了一个奇怪的问题。它在模拟器上运行，但是当我尝试在我的 iPhone 上运行它时，它说：

```
error: failed to launch '/Users/....../MyApp.app/MyApp' -- No such file or directory 
```

如果查看该路径，该文件已经存在！

为什么会发生这种情况？

我正在使用最新版本的 ZXing 在 iOS 5.1（针对 4.0）上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:03:11.843

重新启动 XCode，也许这就是解决方案。

# cloud-foundry - 更改域问题

> ID：12589243
> 
> 赞同：1
> 
> 时间：2012-09-25T18:48:12.983
> 
> 标签：cloud-foundry

我一直在尝试更改域并且遇到了问题。我希望有人可以在这里帮助我，我已经记录了我在下面经历的步骤。

我向我们的 dns 管理团队请求了 DNS 资源。

.mike-cf.company.com 规范名称 = mike-cf.company.com。名称：mike-cf.company.com 地址：10.52.88.123

然后我安装了 -D 开关：

bash < <(curl -s -k -B http://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup -D mike-cf.company.com)

我注意到并非 ~/cloudfoundry/.deployments/devbox/config 中的所有配置文件都更改了，所以我使用 sed 命令更改了这些文件：

$ cd ~/cloudfoundry/.deployments/devbox/config $ sed -i 's/.vcap.me/.newdomain.com/g' *.yml

我重新启动，一切看起来都很好，我能够毫无问题地运行 vmc 目标，但我无法注册用户。

$ vmc target [http://api.mike-cf.company.com/](http://api.mike-cf.company.com/) 成功定位到 [http://api.mike-cf.company.com]

$ vmc register --email mike@company.com --passwd password 创建新用户：错误 100：错误请求

uaa.log 中没有条目，只有 cloud_controller.log 中的这个

[2012-09-25 09:06:46.712110] cc - pid=20400 tid=8ee9 fid=4757 调试 -- ---> 异步\n请求：发布[http://uaa.mike-cf.company.com/oauth /token](http://uaa.mike-cf.company.com/oauth/token) \nheaders: {"content-type"=>"application/x-www-form-urlencoded", "accept"=>"application/json", "authorization"=>"Basic Y2xvdWRfY29udHJvbGxlcjpjbG91ZGNvbnRyb2xsZXJzZWNyZXQ="}\nbody: grant_type=client_credentials [2012-09-25 09:06:46.718338] cc - pid=20400 tid=8ee9 fid=4757 DEBUG -- <---\nresponse: 404\nheaders: {"SERVER"=>"nginx", "DATE"=>"2012 年 9 月 25 日星期二 16:06:46 GMT", "CONTENT_TYPE"=>"text/html", "CONTENT_LENGTH"=>"162", "CONNECTION"=>"close"}\nbody : \r\n404 未找到http://uaa.mike-cf。company.com: 404 跟踪 ["/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/bundler/gems/uaa-dad29c9030f4/宝石/lib/uaa/http.rb:56:in`json_parse_reply'", "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/bundler/gems/uaa-dad29c9030f4/gem/lib/uaa/token_issuer.rb:157:in`request_token'", "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/bundler/gems/uaa-dad29c9030f4/gem/lib /uaa/token_issuer.rb:128:in `client_credentials_grant'", "/home/mike/cloudfoundry/cloud_controller/cloud_controller/app/models/uaa_token.rb:80:in`access_token'", "/home/mike/cloudfoundry/cloud_controller/cloud_controller/app/models/uaa_token.rb:96:in `user_account_instance'", "/home/mike/cloudfoundry/cloud_controller/cloud_controller/app/controllers/users_controller.rb:13:in`create'", "/home/mike/cloudfoundry/.部署/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/actionpack-3.0.14/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/actionpack-3.0.14/lib/abstract_controller/base.rb:150:in`process_action'" , "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/actionpack-3.0.14/lib/action_controller/metal/渲染.rb:11:in`process_action'", "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/actionpack-3.0.14/lib/abstract_controller/callbacks.rb:18:in`阻止 process_action'", "/home/mike/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib /active_support/callbacks.rb:446:in ` *run* _3844132275556875466__process_action_ *2824786929479189233* _callbacks'"] [2012-09-25 09:06:46.896386] cc_events-pid=20400 tid75=8ee91fid=4 09:06:46 -0700, :USER, "N/A", "POST:/users", "mike@company.com", :FAILED, "Bad request"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:27:40.577

I have found the problem, there seemed to be an issue with the vmc I was using. Once I downgraded VMC I am now able to connect.

gem uninstall vmc

gem install --version '= 0.3.18' vmc

Here is the thread that lead me to the answer [https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups=#!topic/vcap-dev/enY2qKnSJWI](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups=#!topic/vcap-dev/enY2qKnSJWI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:09:12.140

是否可以查看 uaa 配置文件的内容？确保它具有为 NATS 消息总线指定的正确 IP 地址，该行应如下所示；

```
mbus: nats://nats:nats@192.168.1.10:4222/ 
```

如果该 IP 地址不正确，则需要更改。我认为它安装的服务器具有静态IP地址？它是在您安装 VCAP 之前分配的吗？

# sql - TSQL 表变量初始化

> ID：12589244
> 
> 赞同：17
> 
> 时间：2012-09-25T18:48:16.370
> 
> 标签：sql, tsql, lookup-tables, table-variable

我有以下 TSQL 表变量：

```
declare @NumDaysMonth table
(
   month_id smallint,
   num_days smallint
) 
```

我只想快速查找每个月的天数。如何像 C 数组一样初始化此表：

```
int numDaysMonth[] = {31, 28, 30, ... , 31}; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T18:51:51.120

Well you can't. The best you can do is something like this

```
Insert Into @NumDaysMonth
Values 
(1,31),
(2,28),
(3,31),
...
(12,31); 
```

Then retrieval might be something like

```
DECLARE @LookItUp int

SELECT @LookItUp = num_days 
FROM @NumDaysMonth
WHERE month_Id = 12;

PRINT @LookItUp 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!6/d41d8/279)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:52:39.340

*以下内容未解决 OP 初始化表的问题。欢迎您将其视为格式化的评论。*

对于奇数查找表来说很方便的一个技巧是动态创建一个虚拟表：

```
declare @Foo as Table ( Month Int )
insert into @Foo values ( 1 ), ( 3 ), ( 9 )

select *
  from @Foo as F inner join
    ( select month_id, num_days
      from ( values
      ( 1, 31 ), ( 2, 28 ), ( 3, 31 ), ( 4, 30 ), ( 5, 31 ), ( 6, 30 ),
      ( 7, 31 ), ( 8, 31 ), ( 9, 30 ), ( 10, 31 ), ( 11, 30 ), ( 12, 31 )
      ) as NumDaysMonth( month_id, num_days ) ) as NumDaysMonth on
    NumDaysMonth.month_id = F.Month 
```

为了获得一个月中的天数，我更倾向于创建一个函数，该函数采用年份和月份并返回正确的值。当我需要从一些代码快速一次性翻译成可读的东西时，un-table 很方便。

如果您需要在一个地方多次参考仿表：

```
; with NumDaysMonth as (
  ( select month_id, num_days
    from ( values
      ( 1, 31 ), ( 2, 28 ), ( 3, 31 ), ( 4, 30 ), ( 5, 31 ), ( 6, 30 ),
      ( 7, 31 ), ( 8, 31 ), ( 9, 30 ), ( 10, 31 ), ( 11, 30 ), ( 12, 31 )
      ) as NumDaysMonth( month_id, num_days ) ) ),
  FooMonths as (
    select *
      from @Foo as F inner join
        NumDaysMonth as NDM on NDM.month_id = F.Month ),
  FooWithFollowingMonths as (
    select *
      from FooMonths
    union
    select *
      from @Foo as F inner join
        NumDaysMonth as NDM on NDM.month_id = F.Month + 1 )
  select *
    from FooWithFollowingMonths 
```

除此之外，查找表可能应该保留为真实的表或表值函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T20:06:47.317

仅供参考，这种数组有点不完整，因为它不会随着闰年而改变？例如，今年 2 月有 29 天。

以下为您提供了一个以 0 为索引的列表（如 C#）并且是针对当前年份的。

```
declare @NumDaysMonth table
(
   month_id smallint,
   num_days smallint
)
insert @NumDaysMonth
select m.m, day(dateadd(m,m+1,y)-1)
from
(select CAST(right(year(getdate()),4)+'0101' as datetime)) y(y)
cross join
(select 0 union all
 select 1 union all
 select 2 union all
 select 3 union all
 select 4 union all
 select 5 union all
 select 6 union all
 select 7 union all
 select 8 union all
 select 9 union all
 select 10 union all
 select 11) m(m)

select * from @NumDaysMonth

-- results
MONTH_ID    NUM_DAYS
0   31
1   29
2   31
3   30
4   31
5   30
6   31
7   31
8   30
9   31
10  30
11  31 
```

如果您需要任何其他年份，请将年份放入 Y 子查询中，例如`(select cast('19990101' as datetime))`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-21T15:08:26.953

这很简单。用于`identity`生成自动递增的数字。

```
declare @NumDaysMonth table
(
    month_id smallint identity primary key,
    num_days smallint
);

insert into @NumDaysMonth
    (num_days)
values
    (31),
    (28),
    (31),
    (30),
    (31),
    (30),
    (31),
    (31),
    (30),
    (31),
    (30),
    (31);

select *
from @NumDaysMonth; 
```

->

```
(12 row(s) affected)
month_id num_days
-------- --------
1        31
2        28
3        31
4        30
5        31
6        30
7        31
8        31
9        30
10       31
11       30
12       31

(12 row(s) affected) 
```

`identity`如果需要，可以使用不同的起始编号或增量播种。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T13:04:51.483

可以改用 UDF 并使其可在任何年份进行调整。

```
-- =============================================
-- Author:      Alexander Melnichuk for StackOverflow.com
-- Create date: 2013-03-12
-- Description: Number of days in a month
-- =============================================
CREATE FUNCTION [dbo].[f_NumDaysMonth] (
    @Year datetime = NULL   -- Month and day are ignored. Null gets current year. 
)
RETURNS 
@Ret TABLE (
    month_id smallint, 
    num_days smallint
)
AS
BEGIN
    SET @Year = convert(datetime, convert(varchar(4), 
                    isnull(@Year, getdate()), 112) + '0101', 112)

    WITH  
    seq AS  
    (--==== Returns table of values from 1 to 12
    SELECT TOP (12)
        N = ROW_NUMBER() OVER (ORDER BY t1.Object_ID)
    FROM Master.sys.All_Columns t1          -- There are certainly more than 12 columns in your Master database ;)
    --CROSS JOIN Master.sys.All_Columns t2  -- Uncomment if you need more values. Not this time though.
    )  

    INSERT INTO @Ret
    SELECT N, 
        day(dateadd(day, -1, dateadd(month, N, @Year)))
    FROM seq
    RETURN 
END 
```

用法：

```
SELECT * FROM [dbo].[f_NumDaysMonth] ('20130101') 
```

执行时间 - 0 毫秒。:)

# mysql - mysql Group by : 慢查询

> ID：12589249
> 
> 赞同：2
> 
> 时间：2012-09-25T18:48:33.907
> 
> 标签：mysql, group-by

这是我的查询

```
SELECT file_id, file_name, file_date, file_email
FROM (SELECT *
      FROM `file`
      ORDER BY file_date DESC
     ) AS t
WHERE file_domains = ''
GROUP BY file_name
ORDER BY file_date DESC
LIMIT 0 , 100 
```

主键是file_id，索引是file_name。记录大约 900k 在我的本地计算机中大约需要 2 秒。此查询是否有任何优化？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:52:04.223

This intermediate query:

```
SELECT *
FROM `file`
ORDER BY file_date DESC 
```

Fetches 900k records and orders by date, that might be slow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:03:35.987

您的查询使用 MySQL 的非标准“功能”（错误：一项非标准和一项半标准功能），并且不能保证它不会在 MySQL 的未来版本中中断，当优化器足够聪明时了解子查询是多余的。

添加索引`(file_domains, file_name, file_date)`并尝试此版本：

```
SELECT f.file_id, f.file_name, f.file_date, f.file_email
FROM 
   `file` AS f
  JOIN
    ( SELECT file_name
          ,  MAX(file_date) AS max_file_date
      FROM `file`
      WHERE file_domains = ''
      GROUP BY file_name
      ORDER BY max_file_date DESC
      LIMIT 0 , 100
     ) AS fm
  ON  fm.file_name = f.file_name
  AND fm.max_file_date = f.file_date
ORDER BY f.file_date DESC ; 
```

# css - CSS图像/背景缩放

> ID：12589254
> 
> 赞同：0
> 
> 时间：2012-09-25T18:48:52.467
> 
> 标签：css

**设置：**我有一个带有顶部标题图像的[网站](http://www.acceleratedfreelance.com/dev/)，需要根据屏幕大小正确调整大小。这是我正在使用的代码：

HTML：

```
<img class="header-background" src="<?php echo get_template_directory_uri() . '/images/header.png';?>" alt="Header" /> 
```

CSS：

```
.header-background {
left: 0;
margin: auto;
right: 0;
position: absolute;
z-index: 91;
width: 100%;
margin-top: -35px;
} 
```

**问题：**图像大小为 1900x227 像素，我需要根据每个用户的分辨率正确调整大小。

这就是它应该看起来的样子。蓝顶在每个分辨率上都应该保持不变。

用 CSS 背景/形状替换图像会更容易吗？

![在此处输入图像描述](../Images/39e2130defb6326b40a73d87e70c5d9c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:07:27.277

您可以添加静态高度，例如`height:200px`.

（这就是我发现在我的电脑上效果最好的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:31:25.787

我认为最好的办法是使用具有最小/最大高度和关系值的媒体查询。

前任。：

```
@media all and(max-width: 980px) and (max-height: 980px){
    .headerImage{
        width:8em;
        height:90%;
    }
} 
```

有关媒体查询的更多信息：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

将像素值转换为 ems 的有用工具：http: [//pxtoem.com/](http://pxtoem.com/)

# go - Go 的类型推断算法

> ID：12589255
> 
> 赞同：8
> 
> 时间：2012-09-25T18:48:55.993
> 
> 标签：go, type-inference

Go 编译器使用什么类型推断算法？

我尝试在 golang 上查找此内容，但找不到文档。我很想假设它是 Hindley-Milner，但我想确定

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T19:05:05.087

Go 当然不使用 Hindley-Milner。你为什么那么想？事实上，**Go 一般没有类型推断**，只有`:=`构造，它使用极其简单的规则，即获取右侧的评估类型并将其应用于左侧新声明的变量。它实际上非常类似于 C++11 的`auto`关键字（除了没有处理`const`和引用的规则）。

# validation - MovieLens 100k 数据集是否缺少验证集？

> ID：12589256
> 
> 赞同：2
> 
> 时间：2012-09-25T18:48:56.510
> 
> 标签：validation

MovieLens 100k 数据集提供了五对训练和测试集，用于 5 折交叉验证。但是，我了解到在测试集上进行测试之前应该使用验证集，以获得最佳参数值。

我假设在原始拆分中，五个“测试集”实际上是验证集。如果这是真的，那么就没有可以测试模型性能的“测试集”。那么我是否应该重新拆分 MovieLens 数据以执行健全的训练验证测试过程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:21:29.833

实际上，movielens 集中的测试有 2 个选项。

第一个选项：用户被分成5个组，每个组中又分为一个基本组和一个测试组。基础组在这里“训练”您的算法，而测试组则用于测试。您有 5 个不同的组，因此您可以进行 5 次学习和测试过程，最终获得各种组的统计信息。

第二个选项：100k 集合中的每个用户都有 20 个评分。在第二种情况下，您有两个集合 a 和 b。每个用户对 a 有 10 个评分，对 b 有 10 个评分。因此，您可以从集合 a 中学习，然后尝试猜测和比较集合 b。

当然，有了完整的组合，你也可以根据需要设置自己的组！

# java - 在Java中运行一定时间的采样过程并返回值

> ID：12589257
> 
> 赞同：3
> 
> 时间：2012-09-25T18:48:58.080
> 
> 标签：java, timeout, process-control

我有一个进行采样的 Java 方法。也就是说，它执行以下操作：

```
TIME = 60 /* seconds */

startTime = now();
count = 0;
while (now() - startTime < TIME) {
    sample = createRandomSample();
    if (satisfiesSomeConditions(sample)) {
       count++;
    }
}

return count; 
```

现在，通常 createRandomSample() 和 satisfiesSomeConditions(sample) 运行得非常快（在一秒钟或更短的时间内），所以这段代码运行良好。

但是，有时，这些功能之一可能需要很长时间才能运行。如何控制此采样过程的运行时间不超过 TIME 要求的时间。我不介意它的运行时间是否比 TIME 长 10%，但我不希望它在 TIME 上运行任意长的时间。

ExecutorService 似乎太苛刻了。

这更像是我们想在一个单独的线程上运行采样，然后轻轻地告诉该线程停止采样并给出它当前的任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:46:24.683

你可以使用一个`FutureTask`. 像这样的东西：

```
FutureTask<Void> futureTask = new FutureTask<Void>(new Callable<Void>() {
    @Override
    public Void call() throws Exception {
        doStuff();
        return null;
    }
    });
futureTask.run();
futureTask.get(60, TimeUnit.SECONDS); //handle exceptions 
```

该`get()`方法在可调用完成时终止。如果这发生在超时之前，一切都很好。如果没有，它会抛出一个`TimeoutException`你必须在这种情况下捕获的。

# node.js - 在 node.js 中对阻塞请求进行故障排除

> ID：12589259
> 
> 赞同：3
> 
> 时间：2012-09-25T18:49:00.730
> 
> 标签：node.js

node.js 中是否有任何工具可以提供所有未决异步调用的列表？如果异步调用正在等待响应并且因此请求被卡住，这将特别有用。

还有是否有任何工具可以提供 node.js 中单线程的堆栈跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:52:36.217

它不会为您提供待处理 I/O 的列表，但[node-inspector](https://github.com/dannycoates/node-inspector)确实允许您使用与 Chrome 的开发工具相同的 JS 调试器，它允许您设置断点并检查堆栈。

# sql - SQL 到 HQL 'start with' 和 'Connect by Prior'

> ID：12589260
> 
> 赞同：2
> 
> 时间：2012-09-25T18:49:02.023
> 
> 标签：sql, grails, hql

我需要找到一种方法来获取从 11 开始的 id，在 sql 中是 'start with' 和 'Connect by prior' 但在 HQL 中，我该怎么做？，如果 grails 中有更好的方法，帮助会很棒，谢谢！

（更新：对不起，我没有写另一个命令：'connect by prior'）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:10:05.933

假设 ID 是一个字符串，为什么不简单地使用 like 子句：

```
where id like '11%' 
```

假设它不是字符串，您可以将其转换为字符串：

```
where cast(id as STRING) like '11%' 
```

或者

```
where str(id) like '11%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:10:45.650

如果您的意思是查询 id 大于或等于 11 的记录，那么例如，如果您有一个 Books 表，那么 HQL 将是

```
def books = Books.executeQuery("SELECT b from Books b WHERE id >= 11") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:20:34.627

递归 SQL 查询是非标准的，因此 HQL 不支持它们（尽管我发现一篇[论文](http://www.springerlink.com/content/v05v422450438477/)似乎提议和原型添加支持）。要做到这一点，您需要坚持使用 SQL。这是一个类似的[问题](https://stackoverflow.com/questions/2486757/hql-recursion-how-do-i-do-this)。

# c++ - 当相同的源代码在两个不同的编译器下给出不同的答案时，这意味着什么？

> ID：12589261
> 
> 赞同：1
> 
> 时间：2012-09-25T18:49:02.920
> 
> 标签：c++, compiler-construction, memory-leaks, valgrind

我处于一个非常奇怪的情况，我的代码在我的桌面上运行，但在远程集群上崩溃。我花了无数次检查我的源代码是否有错误，在调试器中运行它以捕获破坏代码的内容，并在 valgrind 下寻找内存泄漏（结果证明是干净的——至少在 gcc 下）。

到目前为止，我最终发现，只要我使用相同的编译器（gcc 4.4.5），相同的源代码在两台机器上都会产生相同的结果。问题是我想在远程集群上使用英特尔编译器以获得更好的性能，以及一些使用英特尔的预构建库。此外，我仍然担心 gcc 可能会忽略一些 intel 编译器中发现的内存问题。

这对我的代码意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:49:46.027

这可能意味着您依赖于[未定义、未指定或实现定义的行为](https://stackoverflow.com/questions/2397984/)。

也许您忘记了初始化变量，或者您访问了超出其有效范围的数组，或者您`a[i] = b[i++]`的代码中有类似的表达式......可能性实际上是无限的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:43:16.353

崩溃是否会导致核心文件？如果来自多个核心转储的回溯跟踪（相当于 gdb 'bt' 命令）是一致的，那么您可以开始有选择地开始放入 printf 语句，并在堆栈跟踪中的函数列表中向后工作。

如果没有检测到内存泄漏，那么堆可能没问题。这使得堆栈成为一个潜在的问题区域。看起来您可能有一个未初始化的变量正在破坏堆栈。

尝试使用 gcc/g++ 编译命令参数中包含的“-fstack-protector”编译您的应用程序。

# android - 如何确定 ListView 何时完成填充

> ID：12589262
> 
> 赞同：6
> 
> 时间：2012-09-25T18:49:04.913
> 
> 标签：android, android-listview

我需要在加载完成后操纵 ListView 的子项，但我似乎无法找到一种方法来找出这种情况何时发生。当我设置我的 ListView 的适配器时，该方法立即返回，但它的子视图的填充是异步发生的。当我的列表充满视图时，有没有办法处理事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:22:47.413

您可以进行定期轮询以查看列表是否已填充：编写一个 while() 循环以不时检查一次。或者您可以等待一段固定的时间（比如 30 毫秒），然后再进行下一次操作。这些不是推荐的方法，但应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:03:13.477

用于`getChildCount()`检索显示的视图，并使用计数器来跟踪异步加载了多少视图。我想我理解你的问题是对的。

# jquery - 使用 JQuery 将 div 调整为特定大小

> ID：12589263
> 
> 赞同：0
> 
> 时间：2012-09-25T18:49:14.163
> 
> 标签：jquery, html, jquery-animate

我有一个当前调整 div 大小的代码，它可以工作，但是它只会稍微调整 div 的大小，我不确定如何编辑代码以使 div 调整为特定大小！

非常感谢任何帮助！

```
<script type="text/javascript">
$(document).ready(function(){    
$(".expanderHead").click(function(){
    var $exsign = $("#expanderSign");
    $(this).find("#expanderContent").slideToggle();
    $exsign.html($exsign.text() == '+' ? '-': '+');   
    // simplify your if/else into one line using ternary operator
    // if  $exsign.text() == "+" then use "-" else "+"
    });    
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:51:37.297

instead of this:

```
$(this).find("#expanderContent").slideToggle(); 
```

do this:

```
$(this).find("#expanderContent").animate({height: '50px'}); 
```

**Update**

See the jsfiddle: [http://jsfiddle.net/csQYN/](http://jsfiddle.net/csQYN/)

As pointed by @JonathanSampson, `slideToggle()` will also save the previous state (the one to toggle back to). You you `animate`, you should be responsible to implement that.

# iphone - Disable Vibration iphone

> ID：12589270
> 
> 赞同：2
> 
> 时间：2012-09-25T18:49:45.713
> 
> 标签：iphone, xcode, iphone-vibrate

Is there a way to disable the vibration of iPhone programmatically?

All I could find is how to enable the vibration. Basically I want to toggle the `Vibration Mode` through `UISwitch`.

Can anybody help me out if there's a way to do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T10:49:42.367

据我所知，你不能这样做。因为苹果不允许这种功能。

# android - How can I send user details to mysql database using DatabaseHelper class

> ID：12589271
> 
> 赞同：0
> 
> 时间：2012-09-25T18:49:52.040
> 
> 标签：android, mysql

Trying to send user details who is log in to my app with facebook details to mysql database using databasehelper.java here i am getting error in DatabaseHelper helper1 = new DatabaseHelper(this); is there any syntax mistake or any wrong code i am using for sending the data to my server ??

```
public void getProfileInformation() {
     Bundle params = new Bundle();
        params.putString("fields", "id,name,email");

    mAsyncRunner.request("me", new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.d("Profile", response);
            String json = response;
            try {
                JSONObject profile = new JSONObject(json);
                // getting name of the user
                final String name = profile.getString("name");
                // getting email of the user
                final String email = profile.getString("email");
                final String id = profile.getString("id");

                /*runOnUiThread(new Runnable() {

                    @Override
                    public void run() {

                        Toast.makeText(getApplicationContext(),
                                "Name: " + name + "\nEmail: " + email + "\nid" + id,
                                Toast.LENGTH_LONG).show();
                    }

                });*/

                if(id != null && id.length() > 0){

                    String accessToken = null;
                    DatabaseHelper helper1 = new DatabaseHelper(this);
                    DatabaseUtility dao = new DatabaseUtility(helper);
                    try {
                        accessToken = dao.getAccessToken();
                    } catch (Exception e1) {
                    }
                    Map<String , String> params = new HashMap<String,String>();
                    params.put(Constants.FACEBOOK_ID, id);
                    params.put(Constants.ACCESS_TOKEN_PARAM, accessToken);
                    Status status = null;
                    try {
                        status = Utils.addFacebookAccount(params, LoginActivity.this);
                    } catch (NullPointerException e) {
                    } 
                    catch (JSONException e) {
                    }

                    Utils.showErrorMessage(getApplicationContext(), Constants.CONNECTED_TO_FACEBOOK_ERROR, Constants.TOAST_VISIBLE_LONG);

                    Intent i=new Intent(getApplicationContext(),ProfileActivity.class);
                    startActivity(i);
            }}
                catch (JSONException e) {
                e.printStackTrace();
            }
        } 
```

# .net - Can AssemblyQualifiedTypeNameConverter attribute get the generic type from the fully qualified name from configuration file?

> ID：12589272
> 
> 赞同：0
> 
> 时间：2012-09-25T18:49:59.280
> 
> 标签：.net

I have a configuration classes which get the elements. Some of them is of a Type value. I am using AssemblyQualifiedTypeNameConverter so that the fully qualified name can be converted to a Type.

Is it possible for that attribute to get the generic Type?

From hand it is possible. I can obtain generic type, MakeGenericType and createInstance from activator....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:58:49.193

我已经解决了。完全限定名称最后必须写有：“`1”。不，它有效。

# java - Slight confusion regarding overriding where variables are concerned

> ID：12589274
> 
> 赞同：12
> 
> 时间：2012-09-25T18:50:04.367
> 
> 标签：java, overriding, scjp, ocpjp

I'm preparing for the SCJP (recently rebranded as OCPJP by Oracle) and one particular question that I got wrong on a mock exam has confused me, the answer description doesn't explain things clear enough.

This is the question :

```
class A 
{
    int x = 5;
} 
class B extends A 
{
    int x = 6;
} 
public class CovariantTest 
{
    public A getObject() 
    {
       return new A();
    } 
    public static void main(String[]args) 
    {
       CovariantTest c1 = new SubCovariantTest();
       System.out.println(c1.getObject().x);
    }
}

class SubCovariantTest extends CovariantTest 
{
    public B getObject() 
    {
       return new B();
    }
} 
```

The answer is `5`, but I chose `6`.

I understand that overriding applies to methods at runtime, and not variables, but the way my mind interpreted that `println` was :

1.  call getObject on c1
2.  c1 is actually a `SubCovariantTest` object, and has a valid override for `getObject()`, so use the overridden method
3.  The override returns B, so grab x from B which is 6

Is it a case of the JVM ignoring the `getObject()` part, and always taking `x` from `c1` as variables are associated at compile time?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T18:54:53.380

尽管对 SubCovariantTest 的覆盖已正确完成，但由于变量 c1 的声明方式，答案是 5。它被声明为 CovariantTest 而不是 SubCovariantTest。

当 c1.getObject().x 运行时，它不知道它是一个 SubCovariantTest（没有使用强制转换）。这就是为什么从 CovariantTest 返回 5 而不是从 SubCovariantTest 返回 6。

如果你改变

```
System.out.println(c1.getObject().x); 
```

至

```
System.out.println(((SubCovariantTest) c1).getObject().x); 
```

你会得到6，如你所料。

编辑：正如评论中指出的那样

“字段在 Java 中不是多态的。只有方法是。子类中的 x 隐藏了基类中的 x。它不会覆盖它。” （感谢 JB 尼泽特）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-23T14:21:17.300

好的，我知道回答这个问题有点晚了，但我和我的朋友遇到了同样的问题，这里的答案对我们来说并不太清楚。所以我将说明我遇到了什么问题以及它现在的意义:)

现在我确实明白字段不会被覆盖，而是它们会被隐藏，正如 miller.bartek 指出的那样，我也明白覆盖是针对方法而不是 Scott 指出的字段。

然而，我遇到的问题是这个。据我说，

```
c1.getObject().x 
```

这必须转化为：

```
new B().x     // and not newA().x since getObject() gets overrided 
```

评估为 6。

而且我不明白*为什么 A 类（超类）的变量被 B 类（子类）的对象调用，而没有明确要求这种行为。*

从问题的措辞猜测，我觉得 OP 有同样的问题/怀疑。

* * *

## 我的答案：

您从 Elbek 的回答中得到了提示。将以下行放入 main 方法并尝试编译代码：

```
A a = c1.getObject();    //line 1
B b = c1.getObject();    //line 2 
```

你会注意到第 1 行是完全合法的，而第 2 行给出了编译错误。

因此，当函数 getObject() 被调用时，CovariantTest (super) 函数将被 SubCovariantTest (sub) 函数覆盖，因为它在代码中是有效的覆盖，并且 c1.getObject() 将返回新的 B()。

然而，由于超函数返回一个类类型 A 的引用，即使在被覆盖之后，它也**必须**返回一个类类型 A 的引用，除非我们对它进行类型转换。在这里，B类**是**A 类（由于继承）。

所以实际上，我们从 c1.getObject() 得到的不是

```
new B() 
```

但是这个：

```
(A) new B() 
```

这就是为什么即使返回 B 类的对象并且 B 类的 x 值为 6，输出仍为 5 的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T13:07:19.477

这里发生的事情的技术术语是“隐藏”。Java 中的变量名由引用类型解析，而不是它们引用的对象。

*   一个对象有一个 Ax 变量。
*   B 对象同时具有 Ax 和 Bx 变量。

但是，具有相同签名的实例方法是“覆盖”而不是“隐藏”的，并且您无法访问从外部覆盖的方法的版本。

请注意，隐藏也适用于具有相同签名的静态方法。

简化形式的模拟问题（不覆盖）：

```
class A {
    int x = 5;
}

class B extends A {
    int x = 6;
}

public class CovariantTest {

    public static void main(String[] args) {

        A a = new B();
        B b = new B();
        System.out.println(a.x); // prints 5
        System.out.println(b.x); // prints 6

    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T18:59:07.867

您正在从以下位置调用方法`c1`：`System.out.println(c1.getObject().x);`

c1 引用类型为：

```
public class CovariantTest 
{
    public A getObject() 
    {
       return new A();
    } 
    public static void main(String[]args) 
    {
       CovariantTest c1 = new SubCovariantTest();
       System.out.println(c1.getObject().x);
    }
} 
```

所以为此：`c1.getObject()`返回类型是`A`. 从`A`你那里直接得到属性而不是方法，正如你提到的java不会覆盖属性，所以它是`x`从`A`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-14T17:01:36.657

当子类和父类都有同名的变量时，子类的变量隐藏父类的变量，这称为变量隐藏。

虽然变量隐藏看起来像覆盖类似于方法覆盖的变量，但事实并非如此，覆盖仅适用于方法，而隐藏是适用的变量。

在方法覆盖的情况下，被覆盖的方法完全替换了继承的方法，所以当我们试图通过持有子对象来访问父引用的方法时，子类的方法会被调用。

但是在变量隐藏中，子类隐藏了继承的变量而不是替换，所以当我们试图通过持有子对象从父引用访问变量时，它将从父类访问。

当子类中的实例变量与超类中的实例变量同名时，则从引用类型中选择实例变量。

你可以阅读我的文章[What is Variable Shadowing and Hiding in Java。](https://programmingmitra.com/2018/02/what-is-variable-shadowing-and-hiding.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-14T13:45:29.793

当方法被覆盖时，子类方法被调用，当变量被覆盖时，超类变量被使用

# git - is there a tool to extract files from git commits

> ID：12589276
> 
> 赞同：0
> 
> 时间：2012-09-25T18:50:10.830
> 
> 标签：git

At work we use git for version control, but not for pushing to development and test sites (attempts have been made to set this up, but no success).

Instead we have to put together patches by copying the files in the correct paths to an update folder in the form of `\sitename\developer-date-001\` which is then applied manually via ftp by someone else.

Is any tool that could look at a git repository and duplicate just the files changed between certain commits into the correct directory structure to make creating those patches more straightforward.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:16:30.483

[`git format-patch`](http://www.kernel.org/pub/software/scm/git/docs/git-format-patch.html)和相关的命令可能会做你正在寻找的东西。[`git diff`](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html)还将创建补丁格式的差异。

# node.js - 使用 async 和 request 模块限制请求

> ID：12589280
> 
> 赞同：4
> 
> 时间：2012-09-25T18:50:34.993
> 
> 标签：node.js, asynchronous, callback, request

我正在结合[async](https://github.com/caolan/async)和[request](https://github.com/mikeal/request)模块以异步方式发出 api 请求并限制速率。

这是我的代码

```
var requestApi = function(data){

    request(data.url, function (error, response, body) {

        console.log(body);

    });
};

async.forEachLimit(data, 5, requestApi, function(err){
      // do some error handling.
}); 
```

数据包含我请求的所有网址。[我使用forEachLimit](https://github.com/caolan/async#foreachlimitarr-limit-iterator-callback)方法将并发请求数限制为 5 。此代码发出前 5 个请求，然后停止。

在异步文档中它说“迭代器传递了一个回调，一旦完成就必须调用它”。但我不明白这一点，我应该怎么做才能表示请求已经完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:10:29.167

首先，您应该向迭代器函数添加回调：

```
var requestApi = function(data, next){
    request(data.url, function (error, response, body) {
        console.log(body);
        next(error);
    });
}; 
```

`next();`或`next(null);`告诉 Async 所有处理都已完成。`next(error);`表示错误（如果`error`不是`null`）。

处理完所有请求后，异步调用它的回调函数`err == null`：

```
async.forEachLimit(data, 5, requestApi, function(err){
    // err contains the first error or null
    if (err) throw err;
    console.log('All requests processed!');
}); 
```

Async在收​​到第一个错误或**所有**请求成功完成后**立即调用其回调。**

# ios - How to drag and drop an UIWebView around

> ID：12589286
> 
> 赞同：0
> 
> 时间：2012-09-25T18:50:54.960
> 
> 标签：ios, ipad, uiwebview, drag-and-drop

I have a simple iOS app (running on iPad) that has only an `UIWebView` filling the full screen.

Now I added a new `UIWebView`(a lot smaller that the previous one) and let it sit on top of the first one.

Is there a way for me to be able to drag and drop the second `UIWebView` around on the first one?

Thanks a lot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:53:37.403

您可以使用[UIPanGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)将拖动功能添加到任何视图。使用它，您将获得拖动的坐标（您可以使用它设置视图的框架），并在平移停止时获得一个标志（您的拖放）。

这是一个取自网络的示例：[Working with UIGestureRecognizers](http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/)

# php - 如何跳过执行父方法来执行祖父方法？

> ID：12589289
> 
> 赞同：9
> 
> 时间：2012-09-25T18:51:01.033
> 
> 标签：php

> **可能重复：**
> [如何让 PHP 类构造函数调用其父级的父级构造函数](https://stackoverflow.com/questions/1557608/how-do-i-get-a-php-class-constructor-to-call-its-parents-parents-constructor)

我知道这听起来很奇怪，但我试图绕过一个错误。如何调用祖父母方法？

```
<?php
class Person {
    function speak(){ echo 'person'; }
}
class Child extends Person {
    function speak(){ echo 'child'; }
}
class GrandChild extends Child {
    function speak(){
      //skip parent, in order to call grandparent speak method
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T19:01:44.157

你可以明确地调用它；

```
class GrandChild extends Child {
    function speak() {
       Person::speak();
    }
} 
```

[parent](https://web.archive.org/web/20161001064405/http://php.net/manual/en/keyword.parent.php)只是一种使用最接近的基类的方法，而无需在多个地方使用基类名称，但是给出任何基类的类名称同样可以使用它而不是直接父类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T19:17:00.323

PHP 有本地方式来做到这一点。

试试这个：

```
class Person {

    function speak(){ 

        echo 'person'; 
    }
}

class Child extends Person {

    function speak(){

        echo 'child';
    }
}

class GrandChild extends Child {

    function speak() {

         // Now here php allow you to call a parents method using this way.
         // This is not a bug. I know it would make you think on a static methid, but 
         // notice that the function speak in the class Person is not a static function.

         Person::speak();

    }
}

$grandchild_object = new GrandChild();

$grandchild_object->speak(); 
```

# android - Android disable or fix tab scrolling when using Hebrew indicator

> ID：12589295
> 
> 赞同：0
> 
> 时间：2012-09-25T18:51:39.107
> 
> 标签：android, tabs, scroll, android-tabhost, hebrew

I have a problem with my tabHost and tabs... when I try them out on Android 2.2 or lower it works just fine. However on android 3.0 or higher there is a problem when I try to use Hebrew string indicator for a tab. the app "thinks" the text is too long, and therefor it is using the scroll/fade animation.. (while English string are working just fine)..

As you can see in the picture below, when I try an English text indicator, even if it is abit long, it works fine. When I enter a Hebrew text indicator (even if its only 2 letters long) the system asssumes that the text is too long..

How can I disable or fix it?

A screen shot of the problem:

[http://imageshack.us/photo/my-images/210/tabsproblem.jpg/](http://imageshack.us/photo/my-images/210/tabsproblem.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:15:50.670

发现自定义标签可以正常工作，但我仍然不确定为什么在使用希伯来语标签标题时会出现问题。所以我的建议是自己定制标签布局:)

# django - 姜戈。'字符串索引必须是整数，而不是 unicode'

> ID：12589296
> 
> 赞同：0
> 
> 时间：2012-09-25T18:51:43.840
> 
> 标签：django, django-admin

当我在管理站点中运行此操作（向选定的人发送电子邮件）时出现错误：

**字符串索引必须是整数，而不是 unicode django**在线：`[p.user_email])`

如何解决？

```
from django.contrib import admin
from myproject.myapp.models import People
from django.core.mail import send_mail

def send_mail(modeladmin, request, queryset):
    for p in queryset:
        send_mail('People information', p.name, p.time, 'mymail@gmail.com'
    [p.user_email])
send_mail.short_description = u'Send e-mail to selected people'

class PeopleAdmin(admin.ModelAdmin):
    list_display = ('name', 'user_email','time')
    actions = [send_mail]

admin.site.register(People, PeopleAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:57:14.093

实际上，您忘记了 之后的逗号`'mymail@gmail.com'`，因此将其解释为`'mymail@gmail.com'[p.user_email]`，就好像您试图索引字符串文字一样。

# php - codeigniter method showing a uri segment value instead of empty string or null

> ID：12589298
> 
> 赞同：0
> 
> 时间：2012-09-25T18:51:48.293
> 
> 标签：php, codeigniter

I have a weird problem. Hopefully, there's a simple explanation / a simple bug somewhere in my code.

I have methodA in my controller, that needs 3 parameters from the url. The code looks like this:

```
 $data['listofpts'] = $this->sw_model->get_all_widgets($this->uri->segment(3),$this->uri->segment(4) );         
      $data['model'] = $this->uri->segment(4);
      $data['ip'] = $this->uri->segment(3); 
      $data['objectid'] = $this->uri->segment(5);         

      $data['main_content']='allstats';
      $this->load->view('includes/template', $data); 
```

You can see that I'm grabbing 3 pieces of from the url. I have 2 additional methods (lets call them methodB and methodC) in the same controller and both of them, when complete, call methodA. However, when these other methods call methodA, the url looks different. Specifically, the "objectid" variable can be either segment 6 or 7 instead of segment 5\.

here's an example of what the URL looks like when methodA is called:

```
 http://myserver/myapp/mycontroller/methodA/10.14.123.123/H8699A/417 
```

Here's an example of what the URL looks like when methodB is called:

```
 http://myserver/myapp/mycontroller/methodB/10.14.3.44/H8699A/A14/417 
```

I'm not sure if this is good design or not, but I decided to change the signature of methodA so that it accepts a number, representing the segment ID. So from methodB, I could do something like:

```
 $this->methodA(6); 
```

PROBLEM / QUESTION: There are two things that i don't understand. The first question is why the new parameter is displaying a value when you just call methodA on its own. As soon as the ivew "allstats" loads, it shows a value inside the new parameter. Technically, it should be empty. I've double checked to make sure that only 2 methods call methodA.

Second, I don't understand why when i dump the contents of the parameter, its showing the IP address, which is uri segment 3\.

So far, the new code for methodA looks like this:

```
public function methodA($uriObjectid)
{
 echo $uriObjectid;
      $data['listofpts'] =   $this->switches_model->get_all_widgets($this->uri->segment(3),$this->uri->segment(4) );         
      $data['model'] = $this->uri->segment(4);
      $data['ip'] = $this->uri->segment(3); 
      $data['objectid'] = $this->uri->segment(5); 

      $data['main_content']='allstats';
      $this->load->view('includes/template', $data);

}//end methodA 
```

Any help would be appreciated. Thanks.

**EDIT 1**

This is what my controller looks like:

public MyController extends CI_Controller {

```
public methodA($optionalparm) 
{
    //url looks like: http://myserver/myapp/thiscontroller/value1/valueformethodA

   echo $optionalparm;  //this is the variable that's problematic. it should be 3 or 4.

   $valueformethodA = $this->uri->segment(2)
}

public methodB() {
    //url looks like: http://myserver/myapp/thiscontroller/value1/value2/value3/valueformethodA
    //call methodA
    // $valueformethodA is now uri segment 4\.  pass that as argument
    $this->methodA(4);
}

public methodC() {

    //url looks like: http://myserver/myapp/thiscontroller/value1/value2/valueformethodA
    //call methodA
   // $valueformethodA is now uri segment 4\.  pass that as argument
    $this->methodA(3);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:21:16.037

我没有 100% 关注你的问题，我不确定 URL 在调用 methodB 和 methodC 以及调用 methodA 之间是如何变化的，除非你正在做某种重定向。

如果我有这个网址

```
http://example.com/myController/methodB/segment3/segment4/segment5/segment6 
```

我有这个控制器

```
public MyController extends CI_Controller {

    public methodA() {
        // the url should still be the same in here as it was in methodB unless a redirect was called.
    }

    public methodB() {
        // call methodC
        $this->methodC();
    }

    public methodC() {
        // call methodA
        $this->methodA();
    }
} 
```

在 Codigniter 中，如果我有一个从这样的 url 调用的方法：

```
public testMethod($one, $two, $three) {

} 
```

`$one`永远是`$this->uri->segment(3)`，$two 永远是`$this->uri->segment(4)`，而且`$three`永远是`$this->uri->segment(5)`；

# erlang - NIF 包装我的多线程 C++ 代码

> ID：12589300
> 
> 赞同：6
> 
> 时间：2012-09-25T18:51:57.547
> 
> 标签：erlang, erlang-nif

我有一个通过串行端口实现特殊协议的 C++ 代码。代码是多线程的，内部轮询串口并做自己的循环处理。我想从 erlang 调用这个驱动程序并接收来自这个驱动程序的事件。我担心的是这个 C++ 代码是多线程的，也是有状态的，这意味着当我在驱动程序上调用某个函数时，它会在内部缓存将在驱动程序的后续调用中使用/需要的内容。我的问题是

1.NIF是否与我的其他erlang进程在同一个操作系统进程中运行，或者NIF是否在单独的操作系统进程中启动？

2.用NIF扭曲这个多线程有状态的C++代码有意义吗？

4.如果 NIF 不是正确的方法，那么让 Elrang 与这段 C++ 代码来回交谈的更好方法是什么。我也更喜欢我的 C++ 代码与我的其他 Erlang 进程位于同一个 OS 进程中，因为看起来链接驱动程序是一种选择，但不确定我的 C++ 代码的多线程性质是否可以接受模型。另外，我听说他们会搞砸 elrang 调度程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:50:11.793

1.  与端口不同，NIF 在 Erlang VM 进程中运行，类似于驱动程序。因此，任何 NIF 崩溃也会导致 VM 停机。而且，提前回答您的最后一个问题，NIF 和驱动程序一样，可能会阻止您的调度程序。

2.  这取决于您通过此 C++ 代码实现的功能。由于答案 1)，您可能希望避免 C++ 部分中的并发，因为它是潜在的错误来源。当然，这并不总是可能的。但是，如果您正在实施，例如，一些工人池，请继续实施 1 线程代码，根据需要多次生成它。

3.  驱动程序也可以是多线程的，具有相同的潜在问题和非常相似的性能（嗯，仍然比 NIF 稍快）。如果你不能完全确定你的 C++ 代码稳定性，可以将它用作 Erlang 移植。

说到 NIF 和驱动程序之间的区别，前者本身是同步的，而后者可以是异步的（如果您不想收到大多数命令的任何答案，这确实是一个巨大的优势）。驱动程序更容易搞砸，也更难实现（但一旦你掌握了主要模式和问题，它们实际上看起来还不错）。

这是驱动程序的良好开端： [http ://www.erlang.org/doc/apps/erts/driver.html](http://www.erlang.org/doc/apps/erts/driver.html)

对于 NIF，类似的东西（看看复杂性的差异）： [http ://www.erlang.org/doc/tutorial/nif.html](http://www.erlang.org/doc/tutorial/nif.html)

# android - 对话片段如何将结果设置为其他片段

> ID：12589305
> 
> 赞同：0
> 
> 时间：2012-09-25T18:52:30.870
> 
> 标签：android, android-fragments

我有一个`fragment`有一个`button`。

当我点击按钮时，系统会打开一个`dialog fragment`用户可以选择一些信息的地方。在对话框中有一个“确定”按钮。当用户点击 ok 时，对话框消失，我们返回 other `fragment`。

我想返回另一个`fragment`结果（选择的信息）。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:58:08.200

有几种方法可以实现这一点：您可以将 Dialog 的结果保存在 Activity (getActivity()) 中，然后从另一个 Fragment 进入

您可以让基础 Fragment 实现一个回调接口，并在对话框中按下 OK 时调用其回调函数。创建对话框片段时，您需要将接口（可能是“this”）作为参数传递。

希望这可以帮助。

# android - how to achieve RFID programming for android

> ID：12589306
> 
> 赞同：0
> 
> 时间：2012-09-25T18:52:31.687
> 
> 标签：android, rfid

I am not even sure whether this can be done or not!

Searched for it but couldn't find much help on the subject So here I am. Is RFID programming for reading tags possible for Android OS? Can I have RFID enabled on my phone instead of a keycard?

Thanks in advance, any help on the subject is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:54:13.567

Android手机中的RFID是通过NFC实现的。

您可以编写和读取各种标签。

[http://developer.android.com/guide/topics/connectivity/nfc/index.html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

# java - 当主窗口最小化时，具有半透明的 JDialogs 消失

> ID：12589310
> 
> 赞同：1
> 
> 时间：2012-09-25T18:52:38.007
> 
> 标签：java, swing, java-7, windowlistener, translucency

[Java 7 中的窗口半透明功能](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)似乎存在一个错误（我相信 Java 6 中也存在这个问题）。如果我打开一个半透明窗口然后最小化它的父窗口，两者都会像你期望的那样消失。但是当您恢复父窗口时，半透明窗口永远不会重新出现。但是，它仍然存在，并且会消耗输入，就好像没有任何问题一样。

这是我的SSCCE：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class BrokenTranslucentWindow extends JApplet //same problem exists using a JFrame
{
    public BrokenTranslucentWindow()
    {
        JButton b = new JButton("Hello");
        b.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                JDialog d = new JDialog(Window.getWindows()[0])
                {
                    @Override
                    public void paint(Graphics g)
                    {
                        g.fillOval(0, 0, getWidth(), getHeight());
                    }
                };
                d.setUndecorated(true);
                d.setBackground(new Color(0, 0, 0, 0));
                d.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
                d.setSize(300, 300);
                d.setLocationRelativeTo(null);
                // d.setModal(true);
                d.setVisible(true);
            }
        });
        this.add(b);
    }
} 
```

您会注意到，在您恢复父窗口后，半透明的椭圆形窗口将不可见，但当您位于窗口应位于的区域上方时，您的光标仍将变为手形光标。

我已将[错误提交给 Oracle](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7200886)，但在修复之前我真的可以使用更好的解决方法。

**我的问题：**

***是否有人对防止这种情况发生的解决方法有任何想法？***

**有趣的事实：**

*   如果半透明窗口碰巧是模态的，这会导致很大的问题。
*   我专注于每像素半透明，但同样适用于均匀半透明。
*   此问题出现在浏览器中的 JFrame、Applet 和 Applet 查看器中的 Applet 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:52:38.007

我发现了一种**不受欢迎**的解决方法。我张贴它是希望它能得到一些创造性的果汁。解决方法是在关闭窗口时关闭半透明，并在激活时将其重新打开。

```
d.addWindowListener(new WindowAdapter()
{
    public void windowActivated(WindowEvent e)
    {
        d.setBackground(new Color(0, 0, 0, 0));
    }

    public void windowDeactivated(WindowEvent e)
    {
        d.setBackground(Color.white);
    }
}); 
```

这并不理想，因为当您单击窗口时它变得不透明。但是，它*确实可以*防止窗口永远消失。

# tridion - Tridion 2011 - 如何在向用户添加组时取消选择所有默认选定的出版物？

> ID：12589312
> 
> 赞同：2
> 
> 时间：2012-09-25T18:52:46.157
> 
> 标签：tridion, tridion-2011

我在 Tridion 2011 管理员活动中遇到了一个典型问题。

> **如何复制问题？**

1.  打开用户
2.  向用户添加组
3.  插入组后，默认情况下所有出版物都被选中/勾选

现在问题来了，如果我有 200 份出版物，并且我只想检查/勾选 2 份出版物，那么我需要手动取消选中剩余的 198 份出版物。

对于 20-30 个用户相同的活动来说，这确实是一项艰巨的任务。

我尝试选中和取消选中“所有出版物”复选框，但没有运气。

> **如何解决这个问题？**

或者

> **是否有任何可用的修补程序？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T18:59:51.933

您可以使用以下解决方法：

*   选择所有出版物（Control + A）
*   按空格键（切换选择/取消选择）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T23:13:29.017

通常[，我建议将用户设置为专门针对范围和权限的组](http://www.createandbreak.net/2012/07/sdl-tridion-authorization.html)，而不是尝试为大约 20-30 个（或更多）用户中的每个用户定义它。

例如：

1.  **创建“权限”组**（或使用默认值）并`This Group will be available for setting permissions in the following Publications:`设置为所有出版物。

2.  **创建**具有一个或多个权限组成员的“范围”组，范围仅限于某些出版物。在此处使用 Puntero 的有用提示。*可以选择使用单独的组来获取权限。*

3.  展望未来，**将用户添加到*范围*组并** `Membership Scope:` **设置为** `All Publications`

这使您可以将全局用户更改合并到几个组并简化手动更改，即使遇到可能的 UI 错误。

# xpages - 具有可见边框的视图面板或常规面板？

> ID：12589322
> 
> 赞同：0
> 
> 时间：2012-09-25T18:54:08.713
> 
> 标签：xpages

无论如何在视图面板和常规面板上都有可见的边框？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:10:11.227

如果您查看视图面板的网页源代码，您会发现视图面板是一个表格，因此只需在其上添加一些样式，例如 table style="border:1px solid blue"...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:36:08.243

我最终只是在视图面板周围放置了一张桌子。

# c# - 当我的代码正确时，为什么我不能将值存储在数据库中？

> ID：12589323
> 
> 赞同：-4
> 
> 时间：2012-09-25T18:54:09.230
> 
> 标签：c#

为什么我不能在数据库中存储值？我的代码是正确的。当我访问数据库时，没有显示任何值。但是当我执行时，它的实施是正确的。告诉我该怎么做才能使它正确。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Text.RegularExpressions;
using System.Windows.Input;
using System.Configuration;

namespace ODesk
{
    public partial class Form8registration : Form
    {

        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["cn"].ConnectionString);

        public Form8registration()
        {
            InitializeComponent();
        }

        private void linkLabel1_login_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            Form1 fm1 = new Form1();
            fm1.Show();
            this.Hide();

        }

        private void Form8registration_Load(object sender, EventArgs e)
        {
            conn.Open();                

        }

        private void button2_reset_Click(object sender, EventArgs e)
        {
            Reset();
        }

        private void Reset()
        {
            textBox1_add.Text = "";
            textBox3_phoneno.Text = "";
            textBox4_emailid.Text = "";
            textBox5_desgination.Text = "";
            textBox6_name.Text = "";
            textBox7_empid.Text = "";
            comboBox1_shifttime.SelectedText  = "";
        }

        private void button3_cancel_Click(object sender, EventArgs e)
        {
            Close();
        }

        private void button1_submit_Click(object sender, EventArgs e)
        {
            if (conn.State == ConnectionState.Closed)
            {
                conn.Open();
            }              

                    SqlCommand cmdd = new SqlCommand("registrtn", conn);

                    cmdd.CommandType = CommandType.StoredProcedure;
                    cmdd.Connection = conn;

                    cmdd.Parameters.Add("@empid",SqlDbType.VarChar,50).Value = textBox7_empid.Text;
                    cmdd.Parameters.Add("@name", SqlDbType.VarChar, 50).Value = textBox6_name.Text;
                    cmdd.Parameters.Add("@desgination", SqlDbType.VarChar, 50).Value = textBox5_desgination.Text;
                    cmdd.Parameters.Add("@emailid", SqlDbType.VarChar, 50).Value = textBox4_emailid.Text;
                    cmdd.Parameters.Add("@phone", SqlDbType.VarChar, 50).Value = textBox3_phoneno.Text;
                    cmdd.Parameters.Add("@skype", SqlDbType.VarChar, 50).Value = textBox1_skpid.Text;
                    cmdd.Parameters.Add("@address", SqlDbType.VarChar, 50).Value = textBox1_add.Text;
                    cmdd.Parameters.Add("@shifttime", SqlDbType.VarChar, 50).Value = comboBox1_shifttime.SelectedText;
                    cmdd.Parameters.Add("@panel", SqlDbType.VarChar, 50).Value = radioButton1_employe.Checked.ToString();

                    cmdd.ExecuteNonQuery();
                    cmdd.Dispose();
                    conn.Close();
                    Reset();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:04:26.560

据我们所知，您没有`button1_submit_Click`正确连接事件！

我建议你用一些简单的测试数据执行代码，`button1_submit_Click`看看你的数据库/权限是否有问题......（缺少存储过程，参数不正确）......或者你的 UI 是否有问题

无需任何 UI 交互即可运行它，这将有助于解决任何问题。

还可以尝试在 Management Studio 中运行存储过程，看看会发生什么。

您是否考虑过[使用](https://stackoverflow.com/questions/75401/uses-of-using-in-c-sharp)而不是您正在做的事情。

```
using(var conn = new SqlConnection(connString))
{
   SqlCommand cmdd = new SqlCommand("registrtn", conn);
   cmdd.CommandType = CommandType.StoredProcedure;
   cmdd.Parameters.Add("@empid",SqlDbType.VarChar,50).Value = textBox7_empid.Text;
   cmdd.Parameters.Add("@name", SqlDbType.VarChar, 50).Value = textBox6_name.Text;
   cmdd.Parameters.Add("@desgination", SqlDbType.VarChar, 50).Value = textBox5_desgination.Text;
   cmdd.Parameters.Add("@emailid", SqlDbType.VarChar, 50).Value = textBox4_emailid.Text;
   cmdd.Parameters.Add("@phone", SqlDbType.VarChar, 50).Value = textBox3_phoneno.Text;
   cmdd.Parameters.Add("@skype", SqlDbType.VarChar, 50).Value = textBox1_skpid.Text;
   cmdd.Parameters.Add("@address", SqlDbType.VarChar, 50).Value = textBox1_add.Text;
   cmdd.Parameters.Add("@shifttime", SqlDbType.VarChar, 50).Value = comboBox1_shifttime.SelectedText;
   cmdd.Parameters.Add("@panel", SqlDbType.VarChar, 50).Value = radioButton1_employe.Checked.ToString();

   cmdd.ExecuteNonQuery();
} 
```

# mysql - 为什么不使用索引？

> ID：12589327
> 
> 赞同：0
> 
> 时间：2012-09-25T18:54:22.333
> 
> 标签：mysql

我有一个简单的查询：

```
SELECT id
FROM logo
WHERE (`description` LIKE "%google%" AND `active` = "y")
ORDER BY id ASC 
```

该表`logo`（MyISAM）由大约 30 个字段组成，其中包含 2402024 行。该字段`description`是 varchar(255) 不为空。该字段`active`是一个 ENUM('y','n') not null 这些索引的基数是：

```
`active`: BTREE Card. 2 
`description`: BTREE Card. 200168 
```

查询上的 EXPLAIN 返回以下内容：

```
select_type: SIMPLE 
table: logo 
type: ALL 
possible_keys: active 
key: NULL 
key_len: NULL 
ref: NULL 
rows: 2402024 
Extras: Using where 
```

我想知道为什么查询不使用`description`索引以及如何优化表以便该查询在没有全表扫描的情况下顺利运行

已经优化了表格并检查了错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:56:07.067

鉴于您的`LIKE`条件`%`在被比较的表达式的开头和结尾都有 a ，因此在这种情况下索引是无用的。

仅当比较表达式可以以“有序”方式找到时，索引才有用，例如 A 在 B 之前，B 在 C 之前。换句话说，`LIKE 'google%'`可以使用索引，而`LIKE '%google%'`不会。

# google-maps - android中的地理编码返回空值

> ID：12589329
> 
> 赞同：3
> 
> 时间：2012-09-25T18:54:24.887
> 
> 标签：google-maps, android-emulator, geocoding

我在 android 中进行地理编码从 edittext 获取位置并将其转换为 lat long 并显示在地图上，但我的地址变量和列表具有空值我的地址就像美框 A-9/1

我的代码是

```
 Geocoder gc =  new Geocoder(this);
      Address d ;
      double latitude = 0 ;
      double longitude = 0;

      try {
          List<Address>locname = gc.getFromLocationName(name, 5);

            d = locname.get(0);
            latitude = d.getLatitude();
            longitude= d.getLongitude();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    GeoPoint dest = new GeoPoint((int)(latitude*1E6), (int)(longitude*1E6)); 
```

locname 为 null 我尝试了很多东西但没有帮助

# android - Android Manifest.xml 解析

> ID：12589330
> 
> 赞同：0
> 
> 时间：2012-09-25T18:54:25.710
> 
> 标签：android, android-manifest

我是android系统开发的新手。不过，我有一些 android 应用程序开发的经验。我想修改 android 权限模型，并且需要在我的自定义 android 风格中提供额外的权限集。作为示例 `<uses-permission android:name="com.example.project.My_Permission_Setting" />` ，这旨在成为开发人员方面的功能，而不是用户方面的功能。

任何人都可以帮助我或指向一个资源（除了Android开发者页面:)），它可以让我在哪里解析清单和处理这些权限..

提前致谢 ！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:16:03.543

我不知道这是否是一个完整的解决方案，但我认为这是一个方向：

```
 PackageManager pm = context.getPackageManager();
        String permission = "YOUR.CUSTOM.PERMISSION";
        try
        {
            pm.getPermissionInfo(permission, PackageManager.GET_PERMISSIONS);
        } 
        catch (PackageManager.NameNotFoundException e) 
        {
           e.printStackTrace();
           // Your permission does not exist...
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:55:01.320

您可以使用自定义权限保护应用程序的组件。为此，您应该在清单文件中声明权限`<permission>`。然后在你的组件（activity、service、broadcastreceiver、contentprovider）的声明中，你应该在属性（`android:permission="string"`）中指定这个权限。

如果您想添加一个权限来保护 Android 系统的一部分，那么您需要深入研究 Android 系统编程。但我认为您不需要这种类型的许可。

**编辑：**

`frameworks/base/core/res/AndroidManifest.xml`您可以在 Android 源中的文件中指定您的新权限。要检查 Android 解析器的工作原理，请尝试查看`frameworks/base/services/java/com/android/server/PackageManagerService.java`

# php - 从数据库中的倍数返回 1 个结果

> ID：12589333
> 
> 赞同：1
> 
> 时间：2012-09-25T18:54:47.963
> 
> 标签：php, mysql

我正在尝试查询我的数据库并为每个数据库返回一个名称。(PHP/MySQL)

表中的示例数据： Mary Tim Mary Rick Tim Mary Rick

我想知道如何只获取每个名称一次并显示它们。而不是多次循环并抓取和显示所有名称。

提前致谢！坦率

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:56:14.487

这就是 DISTINCT 运算符的作用：

```
SELECT DISTINCT(`name`) from `users`; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T18:56:24.560

```
SELECT DISTINCT column_name(s)
FROM table_name 
```

# css - 转换网络字体格式是“有损”过程吗？

> ID：12589337
> 
> 赞同：5
> 
> 时间：2012-09-25T18:54:56.857
> 
> 标签：css, fonts, web, font-face, webfonts

Web 字体以各种格式提供，以满足不同的浏览器要求，我知道的主要格式是：

*   ttf
*   otf
*   eot
*   woff
*   svg

我也知道并非所有主要浏览器供应商都支持所有这些格式。然而，fontforge（可能还有许多其他实用程序）似乎也能够轻松地在这些格式之间进行转换。据我了解，“woff”似乎是网络字体的“新”标准。

我的问题是这样的：

从某种意义上说，如果我从 WOFF 文件开始，转换为 OTF，然后再返回 WOFF，那么任何格式是否“有损”，我最终会得到一个没有所有元数据的文件吗？还是这些格式本质上如此相似，以至于它们中的任何一个都可以作为获得所有格式字体的起点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T00:36:18.720

woff 是 ttf 或 otf + 元数据（以及可选的私有数据）的简单包装器。EOT 是一个简单的 ttf 包装器（从技术上讲，可以创建一个 otf-in-EOT，但这可能没有得到广泛支持）；EOT 包装器中的几乎所有信息都来自内容。所以在任何方向之间的转换：

*   TTF <-> EOT <-> TTF-in-woff**或**
*   OTF <-> OTF-in-woff

应该或至少*可以*是无损的（不包括元数据）。我说*can*，因为它在很大程度上取决于用于转换的工具，并且在某种程度上取决于工具的操作员以及您对元数据的处理方式。

要回答具体问题，“如果我从一个 woff 文件开始，转换为 OTF，然后返回到 woff，我最终会得到一个没有所有元数据的文件吗？” 有点棘手。如果原始 woff 是包装 OTF（不是 TTF），那么答案是**yes**。但是如果 woff 是包装一个 TTF，答案将是**no**，因为需要从 TTF 到 OTF 的转换，并且这种转换是有损的。

同样对于 woff -> TTF -> woff; 如果起始 woff 是包装一个 TTF，这将是无损的（元数据除外），而如果原始 woff 是包装一个 OTF，它将是有损的（因为在该过程中存在从 OTF -> TTF 的转换，并且转换是有损的）。

# wpf - 命令绑定在 UI 中引发异常

> ID：12589338
> 
> 赞同：-2
> 
> 时间：2012-09-25T18:54:57.107
> 
> 标签：wpf, c#-4.0, mvvm, wpf-controls

我正在尝试通过制作魔术卡应用程序来学习 MVVM。从概念上讲，我不知道如何将数据和命令从视图模型链接到视图中。我了解如何在视图模型中提供数据，但不了解如何从视图中访问它。

主要问题是 xaml 中有什么不正确，我在按钮上遇到异常，我假设与命令绑定有关，这也意味着数据可能也不起作用。

```
<Window x:Class="MagicDB.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MagicDB"
    Title="MainWindow" Width="500" Height="500">

<Window.DataContext>
    <local:MainWindowViewModel x:Name="viewModel" />
</Window.DataContext>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50*" />
        <RowDefinition Height="450*" />
    </Grid.RowDefinitions>
    <DataGrid AutoGenerateColumns="False" 
        HorizontalAlignment="Left" 
        VerticalAlignment="Top"
        IsSynchronizedWithCurrentItem="True" Width="auto" Height="auto" Grid.Row="1">
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding CardID}" Width="25" ></DataGridTextColumn>
            <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="110"></DataGridTextColumn>
            <DataGridTextColumn Header="Mana" Binding="{Binding Mana}" Width="30" ></DataGridTextColumn>
            <DataGridTextColumn Header="Card Text" Binding="{Binding CardTXT}" Width="100*"></DataGridTextColumn>
            <DataGridTextColumn Header="Flavor Text" Binding="{Binding FlavorTXT}" Width="100*"></DataGridTextColumn>
            <!--DataGridCheckBoxColumn Header="Cost" Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}" ></DataGridCheckBoxColumn-->
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Initiliaze Database" Height="23" HorizontalAlignment="Left" Margin="55,16,0,0" Name="initdb" VerticalAlignment="Top" Width="75"
            Command="Binding InitCardDB"/>
</Grid> 
```

主要问题是按钮上引发了异常。我也不认为我正在获取网格的数据。

```
namespace MagicDB
{
class MainWindowViewModel : ObservableObject
{
    private CardDB _cards;
    private Command _InitCardDB;

    public CardDB Cards
    {
        get { return _cards; }
        set { _cards = value; OnPropertyChanged("Cards"); }
    }

   public MainWindowViewModel()
    {
        //var cards = GetCards();

        //var cardViewModels = new List<CardViewModel>();
        //cards.ForEach(c => cardViewModels.Add(new CardViewModel(c)));
        _InitCardDB = new Command(InitDB, true);
        Cards = new CardDB(); ;
    }

    public Command InitCardDB
    {
        get
        {
            if (_InitCardDB == null)
            {
                _InitCardDB = new Command(
                    param => InitDB()
                );
            }
            return _InitCardDB;
        }

    }

    private void InitDB()
    {
        _cards = new CardDB();
        _cards.InitDB();
    }
} 
```

}

任何帮助都会很棒，尤其是我做错了什么以及我在概念上犯了错误的地方。我可能完全不正确地处理这个问题？在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:58:46.373

`DataGrid`没有项目，因为您需要设置它`ItemsSource`

Button 导致异常，因为您试图将字符串分配给`"Binding InitCardDb"`属性`Command`而不是使用`"{Binding InitCardDb}"` The`"{}"`告诉 XAML 处理器使用所谓的标记扩展而不是使用文本

除此之外，您的方法看起来是正确的

# c++ - execl() 返回“无法打开或解析参数”错误

> ID：12589339
> 
> 赞同：0
> 
> 时间：2012-09-25T18:55:04.487
> 
> 标签：c++, os.execl

我有这段代码可以使用 execl() 运行程序，但我收到了这个错误：

```
Cannot open or parse ' arg 3'. 
```

而且，当我删除参数 3 时，我得到参数 2 的相同错误，知道吗？

我正在调试，显然第一次是 _pid 大于 0，为什么会这样？

```
int down[2], up[2];

pipe(down);   // creates pipe - [0] is for reading, [1] for writing
pipe(up);

pid_t _pid = fork();

if (_pid < 0)
    exit(1);

if (_pid == 0)
{
    close(down[1]);
    close(up[0]);

    dup2(down[0], 0);
    dup2(up[1], 1);

    execl(cmd_line, cmd_line, "arg 1", "arg 2", "arg 3", NULL);

    _exit(1);
}

// the rest of this fn is executed by the parent only

close(down[0]);
close(up[1]);
_down = down[1];
_up = up[0];

_reader_thd = new Thread(reader_wrapper, this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:57:22.840

听起来更像是您正在执行的任何内容都无法打开或解析您的参数。

# mysql - SQL group by - 合并组

> ID：12589342
> 
> 赞同：2
> 
> 时间：2012-09-25T18:55:08.683
> 
> 标签：mysql, sql, group-by

是否可以“合并”在使用 group by 的 SQL 语句之后获得的 2 个组。例如，如果我有一个字段大小 ENUM('extra-small, 'small', 'medium', 'large', extra-large') 然后我运行这个查询`SELECT * from clothes GROUP BY size;`，但在一种情况下我想进入结果是同一组中的“特小”和“小”。这可以用 SQL 实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:03:58.583

是的你可以：

```
select count(*) 
    , case size 
        when 'extra-large' 
        then 'large' 
    else size end as grouped_size
from sizes
group by grouped_size 
```

演示：[http ://sqlfiddle.com/#!2/ae3fa/2](http://sqlfiddle.com/#!2/ae3fa/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:02:05.367

如何使用 MySQL [GROUP_CONCAT(expr)](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

> 此函数返回一个字符串结果，其中包含来自组的串联非 NULL 值。如果没有非 NULL 值，则返回 NULL。

还可以查看[MySQL – GROUP_CONCAT() 函数](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)

# objective-c - ios 检测到无线的错误变化 - 可达性示例

> ID：12589343
> 
> 赞同：0
> 
> 时间：2012-09-25T18:55:16.093
> 
> 标签：objective-c, ios, network-programming, ios6, reachability

我的应用程序使用 Wifi 网络，我正在使用可达性示例代码来检测 Wifi 网络。

当应用程序连接到任何正常的 Wifi 接入点时，应用程序运行良好，但当应用程序连接到 Ad-hoc 网络时，我的应用程序检测到错误的网络更改。

当应用程序连接到 ad-hoc 网络时，经过一段时间（大约每 15 到 20 分钟），当前可达性状态会变为**Not Reachable**几秒钟，然后再次恢复到**Reachable**状态（仅供参考，类似的 Android 应用程序在同一个 Ad-组网）。

**调试信息**

可达性标志状态：----------

1或2秒后Wifi恢复正常状态

可达性标志状态：-R ------d

**代码**

```
 - (NetworkStatus) currentReachabilityStatus{
        NSAssert(reachabilityRef != NULL, @"currentNetworkStatus called with NULL reachabilityRef");
        NetworkStatus retVal = NotReachable;
        SCNetworkReachabilityFlags flags;
        if (SCNetworkReachabilityGetFlags(reachabilityRef, &flags))
        {
            if(localWiFiRef)
            {
                retVal = [self localWiFiStatusForFlags: flags];
            }
            else
            {
                retVal = [self networkStatusForFlags: flags];
            }
        }
        if(NotReachable == retVal){
            printf("\nNetwork not reachable.");
        }
        return retVal;
    } 
```

# vba - 控制打开的浏览器实例

> ID：12589345
> 
> 赞同：1
> 
> 时间：2012-09-25T18:55:18.477
> 
> 标签：vba, vbscript

```
Set Browser = New SHDocVw.InternetExplorer 
```

一旦你创建了一个新的浏览器实例，你如何引用该实例，而不是关闭并重新打开，比如如果我激活 Excel 窗口，那么我想激活回浏览器，这是如何完成的？

我调查了

```
AppActivate "Windows Internet Explorer" 
```

但是如果我打开了多个窗口，那将无法正常工作，我不认为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:53:08.987

我想你的意思是：

```
Option Explicit
Public browser As SHDocVw.InternetExplorer

Sub NavigateTo()

   Set browser = New SHDocVw.InternetExplorer

   browser.Visible = True
   browser.Navigate "http://stackoverflow.com"

End Sub 
```

换句话说，在模块级别声明浏览器变量，使其保持可用。

您还可以像这样捕获一个实例：

```
Sub getIE()
Dim sh As Object, oWin As Object, IE As Object

    Set sh = CreateObject("Shell.Application")

    For Each oWin In sh.Windows
        If TypeName(oWin.Document) = "HTMLDocument" Then
            Set IE = oWin
            Exit For
        End If
    Next

    Debug.Print IE.Document.url
End Sub 
```

# jquery - 从表单获取数据，然后使用 Jquery 发布

> ID：12589347
> 
> 赞同：0
> 
> 时间：2012-09-25T18:55:32.037
> 
> 标签：jquery

我想知道是否有更好的方法从输入中获取数据然后发布它们。我在这里有这段代码可以正常工作，但我只想知道是否有更好的方法可以用它来简化它。

```
$('#Subscription').submit(function(e){
    var url = $(this).attr('action'),
        1 = $('input[name=1]').val(),
        2 = $('input[name=2]').val(),
        3 = $('input[name=3]').val(),
        4 = $('input[name=4]').val(),
        5 = $('input[name=5]').val(),
        6 = $('input[name=6]').val(),

    $.post(url, { 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6 }, function (data) {
        // Do something after post
    });

    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:56:52.983

试试这个[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

***例子：***

```
$('#Subscription').submit(function(e){
    var url = $(this).attr('action'),
    var formData= $(this).serialize();

    $.post(url, data:formData, function (data) {
        // Do something after post
    });

    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:16:37.283

如果您的输入元素不在表单内，也请尝试以下代码。

```
<div id="form_clone">
    <input name="name" />
    <input name="id" />
    <input name="contact_details" />
    <input name="info" />
</div> 
```

“**序列化**”函数只允许获取表单内的输入字段，但如果您想获取此元素内的输入元素的值，请使用：

```
(function($) {

    $.fn.serializeAnything = function() {

        var toReturn    = [];
        var els         = $(this).find(':input').get();

        $.each(els, function() {
            if (this.name && !this.disabled && (this.checked || /select|textarea/i.test(this.nodeName) || /text|hidden|password/i.test(this.type))) {
                var val = $(this).val();
                toReturn.push( encodeURIComponent(this.name) + "=" + encodeURIComponent( val ) );
            }
        });

        return toReturn.join("&").replace(/%20/g, "+");

    }

})(jQuery); 
```

用法：

```
$('#form_clone').serializeAnything() 
```

# python - ImportError：未定义的符号：Py_InitModule4 for swig

> ID：12589348
> 
> 赞同：4
> 
> 时间：2012-09-25T18:55:41.473
> 
> 标签：python, gcc, swig, x86-64, importerror

我正在尝试通过 python使用网络[http://www.metarecognition.com/libmr-license/上可用的库。](http://www.metarecognition.com/libmr-license/)作者提供了 C 代码和 swig 接口文件 (*.i)。用户提供的 Make 文件没有提供正确的 python 编译。所以我尝试手动编译swig。我在编译主库后使用以下命令。

```
swig -python weibull.i
gcc -c ../libMR/weibull.c weibull_wrap.c -I/usr/include/python2.4 -fPIC
ld -shared weibull.o weibull_wrap.o -o _weibull.so 
```

这些步骤工作正常。但是当我尝试通过 python 导入它时，我收到以下错误：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "pyweibullw.py", line 29, in <module>
    _pyweibullw = swig_import_helper()
  File "pyweibullw.py", line 21, in swig_import_helper
    import _pyweibullw
ImportError: /usr/lib/python2.4/dist-packages/_pyweibullw.so: undefined symbol: Py_InitModule4 
```

有人可以告诉我有什么问题吗？我是否遗漏了 gcc 的一些标志？我曾尝试使用带有 -m64、--arch x86_64 等标志的 gcc，但它似乎没有任何区别。仅供参考，我正在使用以下系统

```
bash-$:uname -a
Linux 2.6.32-5-amd64 #1 SMP Mon Oct 3 03:59:20 UTC 2011 x86_64 GNU/Linux 
```

# c# - 即使对象不为空，也会发生 NullReference 异常

> ID：12589352
> 
> 赞同：4
> 
> 时间：2012-09-25T18:55:55.780
> 
> 标签：c#, wpf, datagrid, event-handling

我是 wpf 的新手；我正在使用可编辑的组合框（用于搜索目的）。

当 ComboBox 中的文本发生更改时，搜索结果将显示在数据网格下方。When any row from the datagrid is selected its values are displayed in textboxes for editing.

当我在组合框中写一些东西时，相关的行会显示在数据网格中，但是当我单击选择一行时，应用程序会抛出一个`nullreference exception`.

当 dataGrid 刷新逻辑在按钮单击之后时，我的应用程序可以正常工作。

dataGrid 的“SelectionChange”事件代码为：

```
private void CategoryRowSelected(object sender, System.Windows.Controls.SelectedCellsChangedEventArgs e)
{
    ClearForm();

    if(CategoryDataGrid.SelectedItem!=null)
    {
        categoryMember = CategoryDataGrid.SelectedItem as CategoryTbl; // value assigned to the object
        // if (categoryMember != null)
        CategoryName.Text = categoryMember.CategoryName; //Exception thrown on this statement
        CategoryDescription.Text = categoryMember.CategoryDescription;
    }       
} 
```

ComboBox 的 textChange 事件的代码是：

```
private void RefreshDataGrid(object sender, System.Windows.Controls.TextChangedEventArgs e)
{
    CategoryDataGrid.SelectedIndex = -1;           
    //CategoryDataGrid.ItemsSource = RefreshQuery;
    CategoryDataGrid.ItemsSource= Admin.RefreshCategoryDataGrid(NameCombo.Text);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:58:38.667

```
 CategoryName.Text = categoryMember.CategoryName; //Exception thrown on this statement 
```

这可能有多种原因 - 不仅仅是因为`categoryMember`为空。在以下情况下也会发生：

*   `categoryMember.CategoryName`（`CategoryName`属性本身）返回`null`，[`TextBox.Text`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text%28v=vs.95%29.aspx)如果您将值设置为 ，则类似的属性会引发异常`null`。
*   `CategoryName`（控制）是`null`

另外，我看到您进行了`null`检查（用于调试？），但已将其注释掉。如果`CategoryDataGrid.SelectedItem`不可分配给`CategoryTbl`，您将收到 null`categoryMember`本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:01:35.163

除了@Reed 回答会说，考虑到你说`Button`点击它就可以工作，我想`Button`是在单元格上。在这种情况下，返回的类型是不同的，那么可能会发生在`CategoryDataGrid.SelectedItem`. 很可能`CategoryDataGrid.SelectedItem`是某种类型的**容器，而不是直接类型的容器**`CategoryTbl`

希望这可以帮助。

# forms - 如何在 Access 2007 中重新打开表单中的页面选项卡

> ID：12589353
> 
> 赞同：0
> 
> 时间：2012-09-25T18:55:55.233
> 
> 标签：forms, tabs, ms-access-2007

我知道我更改了一些设置（或做了一些事情）以使 Access 2007 表单中的页面选项卡消失，但我不记得设置是什么。我不是指在访问选项下的当前数据库中打开选项卡而不是重叠窗口。我已经设置为显示选项卡，但它现在只为我的 2-tab 表单显示一个选项卡。以前我可以看到这个表单有 2 个选项卡。我仍然可以通过在属性表中选择它们来在设计视图中的选项卡之间导航。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:14:41.013

在属性表上查找样式属性。您可以选择选项卡、按钮和无。

![选项卡样式](../Images/0c0829d18c24942f1af4f0f1e36a4e1c.png)

# iphone - 更新了 xcode，不再能够编译 phonegap

> ID：12589362
> 
> 赞同：0
> 
> 时间：2012-09-25T18:56:41.960
> 
> 标签：iphone, xcode, mobile, cordova

我更新了 xcode，现在我不再能够编译我的 PhoneGap 项目。任何有关如何解决此问题的见解都会受到极大的欢迎。下面是 console.log 的输出：

```
2012-09-25 14:52:16.309 PhoneGapTest[18978:c07] Multi-tasking -> Device: YES, App: YES
2012-09-25 14:52:16.323 PhoneGapTest[18978:c07] *** Terminating app due to uncaught     exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]:     object cannot be nil'
*** First throw call stack:
(0x143012 0x257ce7e 0xf6b6a 0xf6a20 0x1696d 0x5bb81 0x341d 0x45f817 0x45f882 0x3aea25    0x3aedbf 0x3aef55 0x3b7f67 0x2ef7 0x37b7b7 0x37bda7 0x37cfab 0x38e315 0x38f24b 0x380cf8     0x33aedf9 0x33aead0 0xb8bf5 0xb8962 0xe9bb6 0xe8f44 0xe8e1b 0x37c7da 0x37e65c 0x27d6 0x2705)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:28:35.543

那是编译错误？如果它是一个运行时错误（这就是它的样子），那么您正试图将一个 nil 对象插入到数组中，这就是导致错误的原因。向您的项目添加一个通用异常断点，以找出发生这种情况的位置。要使用 Xcode 4 执行此操作：

*   单击导航器窗格中的断点符号
*   单击窗格底部的 + 按钮
*   选择“添加异常断点”。

如果是编译错误，请在“insertObject:”上进行项目范围的查找并检查您是否正在尝试执行“insertObject:nil”

# extjs - 设置表单面板的不透明度

> ID：12589368
> 
> 赞同：0
> 
> 时间：2012-09-25T18:57:02.783
> 
> 标签：extjs, extjs4

我有一个`form panel`，我需要将它的背景设置为`Semi-Transparent`。我怎么能这样做？（例如设置`opacity 0.5`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:15:08.337

**对于一个元素：**

假设 html 片段：

```
<div id="div1">
    <form id="form1" >
       <b>Name:</b><input type="text" name="Bla" value="data"/>
    </form>
</div> 
```

ExtJS 代码：

```
var div1 = Ext.get("div1");
div1.setOpacity(.5); 
```

**对于面板**

假设您定义了 Ext.form.Panel：

```
 var panel1 =  Ext.create('Ext.form.Panel', { .... } 
```

使用 Ext.Shadow 类：

```
 var shad =  new Ext.Shadow( panel1);
 shad.setOpacity(.5); 
```

参考资料： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.Shadow-method-constructor](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Shadow-method-constructor)

# java - 如何使用java导出文件？

> ID：12589371
> 
> 赞同：1
> 
> 时间：2012-09-25T18:57:04.263
> 
> 标签：java, list, arraylist, enumeration

我正在尝试使用以下代码导出提要文件：

```
String appname = "abc";
String path = "//home/exportfile//";
String filename = path + "Uncorrelated_ApplicationExport-" + appname + ".txt";
String ret = "false";

QueryOptions ops = new QueryOptions();
Filter[] filters = new Filter[1];
filters[0] = Filter.eq("application.name", appname);
ops.add(filters);

List props = new ArrayList();
props.add("identity.name");

// Do search
Iterator it = context.search(Link.class, ops, props);

// Build file and export header row
BufferedWriter out = new BufferedWriter(new FileWriter(filename));
out.write("Userid~First_Name~Last_Name~Facility/CBO~Title~Menu");
out.newLine();

// Iterate Search Results
if (it != null)
{
    while (it.hasNext())
    {
        // Get link and create object
        Object[] record = it.next();
        String identityName = (String) record[0];
        Identity user = (Identity) context.getObject(Identity.class, identityName);

        // Get Identity attributes for export
        String workforceid = (String) user.getAttribute("workforceID");

        // Get application attributes for export

        List links = user.getLinks();
        if (links != null)
        {
            Iterator lit = links.iterator();
            while (lit.hasNext())
            {
                Link l = lit.next();
                String lname = l.getApplicationName();
                if (lname.equalsIgnoreCase(appname))
                {
                    if (workforceid == null)
                    {
                        userid = (String) l.getAttribute("Userid");
                        fn = (String) l.getAttribute("First Name");
                        ln = (String) l.getAttribute("Last Name");
                        menu = (String) l.getAttribute("Menu");

                        List fac = l.getAttribute("Facility/CBO");
                        List title = l.getAttribute("Title");

                        for (Object fac1 : fac)
                        {
                            for (Object title1 : title)
                            {
                                // Output file

                                out
                                    .write(userid + "~" + fn + "~" + ln + "~" + fac1 + "~" + title1 + "~"
                                        + menu);
                                out.newLine();
                                out.flush();

                            }
                        }
                    }
                }
            }
        }
    }

    ret = "true";
}
// Close file and return
out.close();
return ret; 
```

当我执行上面的代码时，我收到以下错误：

> 发生意外错误：java.lang.Exception：sailpoint.tools.GeneralException：BeanShell 脚本错误：源文件：内联评估：import java.io.FileWriter；导入java.io.File；导入 java.io.B 。. . '' : for 语句的集合、数组、映射、迭代器或枚举部分不能为空。：在第 80 行：在文件中：内联评估：``import java.io.FileWriter; 导入java.io.File；导入 java.io.B 。. . '' : for ( 对象 title1 : title ) { BSF info:

我知道在我的提要文件中，标题列中有几条空白记录，因此理想情况下，代码应该在文件中写入除标题列之外的所有内容（如果标题列为空白）。谁能帮我在哪里更改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:24:39.167

```
 List fac = l.getAttribute("Facility/CBO");
                    List title = l.getAttribute("Title");

                    for (Object fac1 : fac)
                    {
                        for (Object title1 : title) 
```

fac 或 title 被设置为 null，然后您尝试对其进行迭代。您应该在执行循环之前引入一些空值检查。

# c# - C#中的控制台窗口？

> ID：12589377
> 
> 赞同：2
> 
> 时间：2012-09-25T18:57:36.810
> 
> 标签：c#, java, console

好吧，我正在尝试用 C# 制作一个 Java IDE，我已经完成了所有工作，但是我不知道如何在 GUI 窗口的底部制作一个控制台窗口来显示 Java 代码的输出。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:09:25.487

我可能误读了您的问题，如果我错了，我深表歉意，但是您将用来启动用户程序的[Process类具有](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)[StandardOutput](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)和[StandardError](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror.aspx)属性，您可以使用它们来获取程序运行时的输出并将其显示到窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:00:57.727

在这里，您实现了完整的命令提示符（开源），因此您可以探索如何使用`UIParent`它。现在，这是 Windows 窗体，但如果您希望它是 WPF，那么只需将其作为控件托管：

[http://www.codeproject.com/Articles/2366/Command-Prompt-Explorer-Bar](http://www.codeproject.com/Articles/2366/Command-Prompt-Explorer-Bar)

# c++ - linux mq_open 忽略 mq_msgsize 属性

> ID：12589379
> 
> 赞同：2
> 
> 时间：2012-09-25T18:57:39.627
> 
> 标签：c++, linux, mqueue

所有人，曾经认为我是理智的，现在不太确定。
我正在尝试创建一个消息队列，其 mq_msgsize 属性不是 8192，这似乎是默认值。我在下面附上了我的代码——它有许多 printf 显示值。如果您能指出我做错了什么，我将永远感激不尽。

```
bool Subscriber::Subscribe( void )
{
   mqd_t  qid;
   bool   brv = false;
   msg_topic_t topic = this->GetTopic();
   struct mq_attr q_attr;
   int rv = 0;

   if (VALID_TOPIC( topic ))
   {
        if (this->GetName().length() > 0)
        {
            string qnamestr = this->GetName();
            if (qnamestr[0] != '/')
            {   
                qnamestr = "/" + qnamestr; 
                this->SetName(qnamestr);
            }
            const char * qname = (const char *) qnamestr.c_str();

            q_attr.mq_msgsize = 256;
            q_attr.mq_curmsgs = 0;
            q_attr.mq_flags = O_NONBLOCK;
            q_attr.mq_maxmsg = 10;

            qid = mq_open( qname, O_RDONLY|O_CREAT, 0644, &q_attr );
            if ((mqd_t) -1 != qid)
            {   
                rv = mq_getattr(qid, &q_attr );
                if (rv != 0)
                {   perror(" get_attr1 failed: "); }
                printf(" queue size is now: %d\n", q_attr.mq_msgsize);
                if (q_attr.mq_msgsize > 1024)
                {
                    struct mq_attr old_attr;

                    q_attr.mq_msgsize = 1024;
                    rv = mq_setattr( qid, &q_attr, &old_attr);
                    if (rv != 0)
                    {   perror(" could not update message size: "); }
                    rv = mq_getattr(qid, &q_attr );
                    if (rv != 0)
                    {   perror(" get_attr2 failed: "); }
                    printf(" queue size is now: %d\n", q_attr.mq_msgsize);
                }
                this->SetOutboxID( qid );
                brv = true; 
                DLOG(INFO) << " qid = " << qid << endl;
                MessageCenter * mc = MessageCenter::GetInstance();
                mc->AddSubscriber( (Subscriber *) this );
            }
        }
    }
   drain_queue( this->GetOutboxID());
    return( brv );
} 
```

输出如下所示： 队列大小现在是：8192 队列大小现在是：8192 队列大小现在是：8192

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:21:47.430

手册页说：

> mq_maxmsg 和 mq_msgsize 字段在 mq_open(3) 创建消息队列时设置

和

> 唯一可以修改的属性是 mq_flags 中 O_NONBLOCK 标志的设置。newattr 中的其他字段将被忽略。

# cuda - 我们可以在内核运行期间获得准时打印输出吗？

> ID：12589380
> 
> 赞同：3
> 
> 时间：2012-09-25T18:57:40.007
> 
> 标签：cuda

我意识到“cuPrintf”可以在内核中使用，但“cudaPrintfDisplay”只能在CPU代码中使用。在我看来，“cuPrintf”只能在从内核返回后刷新到标准输出。我的问题是：我们可以在内核运行期间得到准时打印吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T22:04:54.223

正如您所注意到的`cuPrintf()`（`printf()`在计算能力 >= 2.0 的情况下），只需在内核运行时将字符串添加到缓冲区，然后在内核结束后打印出缓冲区。

我认为没有办法从内核中获取实时 printf 。但是，为了减少延迟，您可以每次使用更少的线程来运行内核。由于`__device__ printf()`它只是一个诊断或调试工具，因此任何性能损失都无关紧要。

也许最好的办法是在 CUDA 调试器中运行您的代码并以这种方式获得即时反馈。

# json - 返回 ember 数据“find”或“findAll”请求中的总行数

> ID：12589384
> 
> 赞同：8
> 
> 时间：2012-09-25T18:58:01.933
> 
> 标签：json, rest, ember.js, ember-data

我需要知道特定资源（App.User）总共存在多少行。

我试图返回它作为回应，但 Ember 抱怨没有映射属性并且只需要记录数组 ( `users: [ "john", "fred"]`)。我不想对服务器进行额外的查询。

有没有什么干净的方法可以用 Ember 实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:11:53.903

您无需对服务器进行额外的查询。从服务器获取数据存储区中的数据后，它会一直保留在那里，除非某些记录是脏的并且您运行`store.commit`

所以，在你得到你的记录后说

```
users = App.User.find() 
```

你可以简单地做`users.get('length')`，你会得到长度。执行此操作时，不会生成对服务器的附加查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-28T18:12:05.897

如果您想在车把模板中使用它，您可以执行`{{this.length}}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T16:33:41.650

我通过`handleResponse`在我的适配器中实现并以 Ember 期望的方式修改响应来解决了这个问题。

假设我从服务器收到类似于以下内容的响应：

```
{
  "count": 203,
  "users": {...} //user data conforming to model 
} 
```

我的`handleResponse`实现如下所示：

```
handleResponse (status, headers, payload, requestData) {
  let parsedPayload = {
    users: payload.users,
    meta: {
      total: payload.count
    }
  };
  return this._super(status, headers, parsedPayload, requestData);
} 
```

然后我可以通过[Ember 文档指定的方式获取模型元数据](https://guides.emberjs.com/v2.15.0/models/handling-metadata/)

# html - 单独隐藏/显示一些 HTML 表格单元格并对齐其余单元格，因为它们属于同一行

> ID：12589386
> 
> 赞同：-3
> 
> 时间：2012-09-25T18:58:14.867
> 
> 标签：html, html-table, rows, expand

我可以解释我的问题的最好方法是展示一个例子。我在下面的链接中显示了 HTML jQuery 表，它有一个标题（蓝色）和四行，其单元格为绿色、白色和灰色。我只想通过单击绿色单元格来交替隐藏/显示白色和灰色单元格（toogle），这将始终作为父单元格保持可见。隐藏白色单元格后，绿色单元格应对齐到同一行，因为它们像俄罗斯方块砖一样适合。就是这样，我认为更清楚是不可能的。

![在此处输入图像描述](../Images/4889ee32bac73112fbc722a0b17f3b56.png)

表代码：

```
<table class="columns" cellspacing="0" border="0">
<tr>
  <td class="left" rowspan="2">
      <div style="text-align:center;"></div>    </td>
    </tr><tr><td class="middle">
    <div id="detail_table_source" style="display:none"></div>
    <p>Expanded</p>
    <table id="detail_table" class="detail">
      <colgroup>
      <col style="width:20px;">
      <col style="width:40px;">
      <col style="width:70px;">
      <col style="width:20px;">
      </colgroup>
      <thead>
        <tr bgcolor="#848FA4">
          <th width="88" bgcolor="#729ADE">Blahhh</th>
          <th width="211" bgcolor="#729ADE">BLAHH</th>
          <th width="229" bgcolor="#729ADE">BLAHH</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td bgcolor="#50C43C" class="parent" id="row456" style="cursor: pointer; " title="Click to expand/collapse"><strong>Blahh</strong></td>
          <td bgcolor="#FFFFFF" class="child-cell456">blah blah</td>
          <td bgcolor="#FFFFFF" class="child-cell456">blah blah</td>
        </tr>
        <tr>
        <td rowspan="4" valign="top" bgcolor="#5B5B5B" class="child-row456">&nbsp;</td>
          <td bgcolor="#50C43C" class="parent" id="cell456" style="cursor: pointer; " title="Click to expand/collapse">blah blah </td>
          <td bgcolor="#50C43C" class="parent" id="cell456" style="cursor: pointer; " title="Click to expand/collapse">blah blah</td>
        </tr>
        <tr>
          <td class="child-cell456">blah blah</td>
          <td class="child-cell456" >blah blah</td>
        </tr>
        <tr>
          <td class="child-cell456">blah blah</td>
          <td class="child-cell456">blah blah</td>
        </tr>
      </tbody>
    </table> 
```

和 CSS 样式：

```
<style>
table.detail, table.detail td, table.detail th {
    border-collapse:collapse;
    border-style:solid;
    border-width:1px;
    border:1px solid #999;
    text-align:left;
    padding:.5em 1em;
}
table.detail tr.parent {
    width:6em;
    font-weight:bold;
    background:#99CC00;
    border-width:1px;
    border:1px solid #999;
    padding:2px 10px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:39:40.820

不太确定问题是什么，但是是的，您可以在表格单元格上使用您喜欢的任何类。

```
<table>
    <tr>
        <td class="a"></td>
        <td class="b"></td>
        <td class="c"></td>
        <td class="d"></td>
        <td class="e"></td>
    </tr>
    <tr>
        <td class="f"></td>
        <td class="g"></td>
        <td class="h"></td>
        <td class="i"></td>
        <td class="j"></td>
    </tr>
    <tr>
        <td class="k"></td>
        <td class="l"></td>
        <td class="m"></td>
        <td class="n"></td>
        <td class="o"></td>
    </tr>
</table> 
```

# javascript - 区别 TypeError 和 ReferenceError

> ID：12589391
> 
> 赞同：9
> 
> 时间：2012-09-25T18:58:43.427
> 
> 标签：javascript, firefox, typeerror, referenceerror

和有什么区别

```
TypeError: ... is undefined 
```

和

```
ReferenceError: ... is not defined 
```

?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-25T19:25:46.300

`ReferenceError`当您尝试使用根本不存在的变量时会发生A。

A`TypeError`在变量存在时发生，但您尝试执行的操作不适合它包含的值的类型。在详细消息显示“未定义”的情况下，如果您有一个值为特殊`undefined`值的变量，并且您尝试访问它的属性，则可能会发生这种情况。

有关与此相关的一些讨论，请参阅[http://javascriptweblog.wordpress.com/2010/08/16/understanding-undefined-and-preventing-referenceerrors/](http://javascriptweblog.wordpress.com/2010/08/16/understanding-undefined-and-preventing-referenceerrors/)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-05T07:03:11.510

以下是[JavaScript 错误类型](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)：

JavaScript 1.5 规范定义了六种主要错误类型，如下所示：

**EvalError：**以不正确的方式使用 eval() 函数时引发。

**RangeError：**当数值变量超出其允许范围时引发。

**ReferenceError：**使用无效引用时引发。

**SyntaxError：**在解析 JavaScript 代码时发生语法错误时引发。

**TypeError：**当变量的类型不符合预期时引发。

**强文本 URIError：**以不正确的方式使用`encodeURI()`或函数时引发。`decodeURI()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-11T07:52:16.813

考虑以下代码：

```
function foo(){
 var d=1234;
 console.log(d.substring(1,2));     
}
foo(); 
```

这将有以下输出：

异常：TypeError: d.substring is not a function 这是因为我们为给定的操作（需要字符串的子字符串）使用了错误的类型（数字）。当值不属于预期类型时，TypeError 对象表示错误.

```
function foo(){
 var d=1234;
 console.log(c);
}
foo(); 
```

这将有以下输出：

异常：ReferenceError：c 未定义这是因为变量“c”的引用在本地或全局范围内都不存在，我们仍在尝试使用它。访问不存在的变量时会引发 ReferenceError 异常.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-15T18:56:13.587

引用错误是范围解析失败错误。在 TypeError 中，作用域解析成功，但我们尝试对不允许的变量执行非法操作。

以下示例将清楚地说明这两种类型的错误。

```
function foo(a){
    console.log(a+b);//ReferenceError b is not defined
    b=a;
}
foo(2); 
```

执行上述函数会导致 TypeError，因为在编译器到达**console.log(a+b)****语句**时未定义b，请注意**b**未使用**var**关键字声明。

 ******现在考虑下面的函数，

```
function foo(a){
    console.log(a+b);
    var b=a;
}
foo(2);//NaN 
```

执行上述函数时，编译器会提升变量**b**，在函数范围内，函数编译后看起来像这样

```
function foo(a){
    var b;//--> b has a value of undefined at this point
    console.log(a+b);
    b=a;
}
foo(2);//NaN 
```

当引擎执行 console.log(a+b) 时，此时**a**的值为 2，**b**的值为 undefined，因此其日志为 NaN。正如下面的表达式计算为 NaN

```
2 + undefined;// evaluates to NaN 
```

现在来到 TypeError，考虑下面的代码块，像往常一样，我们将使用函数 foo。

```
function foo(a){
console.log(a+b.toString()); //TypeError Cannot read property 'toString' of undefined
var b = a;
}
foo(2); 
```

**按照上述逻辑，在变量b**被提升之后，编译器将函数转换为类似于下面的代码

```
function foo(a){
var b ;// b has a value of undefined at this point
console.log(a+b.toString()); //TypeError is thrown
b= a;
}
foo(2); 
```

在函数的范围内，变量**b**被提升，因此在 console.log(a+b.toString()) 行之前有一个 undefined 值。在这一行中，我们尝试将此时未定义的**b**转换为字符串，这样做，我们尝试执行非法操作，因此抛出 TypeError。**变量b**的作用域查找成功，但我们执行了非法操作。因此抛出了 TypeError。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-11T09:53:28.777

查看上面关于参考错误的解释什么可能导致此代码的参考错误 const arr = [1,2,3,4,5,6,7,8,9,10] let B = [[(arr[1 ] = arr[8])],[(arr[8] = arr[1])]]******

# knockout.js - Knockout - 设置选择的初始值

> ID：12589398
> 
> 赞同：2
> 
> 时间：2012-09-25T18:59:10.940
> 
> 标签：knockout.js

我的代码中所选值的范围最初似乎没有填充。谁能告诉我这是为什么？

小提琴：http: [//jsfiddle.net/vVLdQ/](http://jsfiddle.net/vVLdQ/)

我的 HTML：

```
<div>
Disable:
 <span data-bind="text: options[1].text"></span><input type="checkbox" data-bind="checked: options[1].disable" />
 <span data-bind="text: options[2].text"></span><input type="checkbox" data-bind="checked: options[2].disable" />
 <span data-bind="text: options[3].text"></span><input type="checkbox" data-bind="checked: options[3].disable" />
</div>
<div>
<select data-bind="value: selectedValue">
 <option data-bind="value: options[0].text, text: options[0].text"></option>
 <option data-bind="value: options[1].text, text: options[1].text, disable: options[1].disable"></option>
 <option data-bind="value: options[2].text, text: options[2].text, disable: options[2].disable"></option>
 <option data-bind="value: options[3].text, text: options[3].text, disable: options[3].disable"></option>
</select>
</div>
<span data-bind="text: selectedValue"></span> 
```

我的Javascript：

```
var selectModel;

function OptionModel(text) {
    var me = this;
    me.text = text;
    me.disable = ko.observable(false);
    me.disable.subscribe(function(disableVal) {
        if (disableVal && selectModel.selectedValue() == me.text) {
            selectModel.selectedValue('-- Select --');
        }
    });
}
var options = [
    new OptionModel('-- Select --'),
    new OptionModel('a'),
    new OptionModel('b'),
    new OptionModel('c')
    ];
selectModel = {
    options: options,
    selectedValue: ko.observable(options[0].text)
};
ko.applyBindings(selectModel);​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:55:01.207

**编辑**：正如 nemesv 在评论中所说：“`select data-bind="value: selectedValue"`当没有填充选项值时绑定运行，它将重置`selectedValue`为`null`。”

[从这里](https://stackoverflow.com/questions/8972367/knockoutjs-select-with-option-group)的另一个 StackOverflow 问题，我想出了这个：

```
<select data-bind="foreach: options, value: selectedValue">
    <option data-bind="text: text, value: text, disable: disable"></option>
</select> 
```

我还更改了复选框中的一些内容以使其更具可读性。有关完整示例，请参见[小提琴](http://jsfiddle.net/Rynan/s5qSE/)。

# javascript - 从JSON字符串中获取数据，foreach，多个同类型

> ID：12589405
> 
> 赞同：1
> 
> 时间：2012-09-25T19:00:00.353
> 
> 标签：javascript, json, parsing

我有一个 JSON 对象，我正在尝试解析并获取数据。它开始于：

```
"id": "5019b4b40cd8a056446b8eb4",
"checkItemStates": [
  {
    "idCheckItem": "xxxxxxxx",
    "state": "complete"
  }, {
    "idCheckItem": "xxxxxxxx",
    "state": "complete"
  }
], 
```

..........等大约 20 多行。

现在我想要的是：

```
"member": {
  "id": "XXXXXXXXXXXXXXXc",
  "avatarHash": "XXXXXXXXXXXXXXXXXXXXXXXXX",
  "fullName": 
} 
```

我想获得那个全名，但可能有不止一个成员，可能有 20 个成员，或者只有 2 个。我不知道从一个对象到另一个对象，可能有 100 个对象。

我如何能

1.  基本上在一组 JSON 对象上拉一个 foreach
2.  从每个可能有多个成员的对象中提取 member.fullName？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:13:01.337

首先，您将您的 JSON 字符串（[没有 JSON 对象之类的东西](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)）传递给[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)，它会为您提供一个 javascript 对象。

然后您通过点符号或括号符号访问该 javascript 对象的属性。

例子：

```
// white space added for readability - not legal syntax (see fiddle)
var jsonString = "{\"member\": {
    \"id\": \"XXXXXXXXXXXXXXXc\",
    \"avatarHash\": \"XXXXXXXXXXXXXXXXXXXXXXXXX\",
    \"fullName\": \"Bob Dole\"}
}";

var parsed = JSON.parse(jsonString);

// dot notation
alert(parsed.member.fullName); // Bob Dole

// bracket notation
alert(parsed['member']['fullName']); // Bob Dole 
```

[http://jsfiddle.net/ga5Fq/](http://jsfiddle.net/ga5Fq/)

# python-2.7 - 编码判断 NZEC 上的 Python 错误

> ID：12589407
> 
> 赞同：1
> 
> 时间：2012-09-25T19:00:06.667
> 
> 标签：python-2.7, runtime-error

我有以下程序。我不知道为什么它在 spoj 法官上给出了 NZEC 错误。请帮忙。

```
import math
def main()
    n = int(raw_input())
    while n != 0:
        a = (n * n) / (math.pi * 2)
        print "{0:.2f}".format(a)
        n = int(raw_input())

if __name__ == '__main__':
    main() 
```

# python - 为什么当我运行 virtualenv 时 pip 会向我的 djangoapp 添加额外的依赖项？

> ID：12589408
> 
> 赞同：1
> 
> 时间：2012-09-25T19:00:09.180
> 
> 标签：python, django, heroku, virtualenv, pip

我正在关注[Django 的 herokus 入门指南](https://devcenter.heroku.com/articles/django)。

我已经设置并采购了一个虚拟环境：

```
virtualenv venv --distribute

source venv/bin/activate 
```

在此之后我尝试安装一些东西：

```
pip install Django psycopg2 dj-database-url 
```

我创建了一个项目并冻结了需求。在这一点上，我有两个额外的要求：

```
Django==1.4.1
distribute==0.6.28
dj-database-url==0.2.1
psycopg2==2.4.5
wsgiref==0.1.2 
```

哪儿来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:05:10.067

`--distribute`您请求通过在创建 virtualenv 时包含标志来安装分发而不是 setuptools 。并且 wsgiref 也在开始时安装，请参阅[为什么 pip freeze 会报告使用 --no-site-packages 创建的新虚拟环境中的一些包？](https://stackoverflow.com/questions/6627035/why-does-pip-freeze-report-some-packages-in-a-fresh-virtualenv-created-with-no)

# c# - 如何从服务器端代码反序列化 JSON

> ID：12589409
> 
> 赞同：3
> 
> 时间：2012-09-25T19:00:09.470
> 
> 标签：c#, jquery, asp.net

假设我的 json 存储在字符串变量中。我的 json 看起来像

```
"{\"file\":\"dave\",\"type\":\"ward\"}" 
```

上述数据存储在我的字符串变量中。现在我如何反序列化这个 json 数据并读取每个组件，如文件和类型。

我尝试使用以下代码但出现错误

```
 var jss = new JavaScriptSerializer();
 string json = new StreamReader(context.Request.InputStream).ReadToEnd();

 var sData=jss.Deserialize<string>(json);
 string _file = sData[0].ToString();
 string _type = sData[1].ToString(); 
```

请指导我如何从 json 格式的数据中反序列化后提取每个组件，如文件和类型。谢谢

* * *

**整改**

这样我就解决了这个问题....这里是整个客户端和服务器端代码。

```
 <script type="text/javascript">
     $(document).ready(function () {
         $('#btnlogin').click(function (e) {
             var FeedCrd = {};
             FeedCrd["file"] = 'dave';
             FeedCrd["type"] = 'ward';

             $.ajax({
                 type: "POST",
                 url: "CallASHX.ashx",
                 data: JSON.stringify(FeedCrd),
                 //data: { 'file': 'dave', 'type': 'ward' },
                 //dataType: "json",
                 success: function (data) {
                     if (data == "SUCCESS");
                     {
                         alert('SUCCESS');
                     }

                 },
                 error: function (XMLHttpRequest, textStatus, errorThrown) {
                     alert(textStatus);
                 }

             });
             return false;
         });
     });
 </script>

public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/html";
        var jss = new JavaScriptSerializer();
        string json = new StreamReader(context.Request.InputStream).ReadToEnd();
        Dictionary<string,string> sData=jss.Deserialize<Dictionary<string,string>>(json);
        string _file = sData["file"].ToString();
        string _type = sData["type"].ToString();
        context.Response.Write("SUCCESS");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:16:54.297

我发现的最简单的方法是将[Json.NET](http://json.codeplex.com/)库与新的 .net[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)对象类型相结合：

```
string json = "{\"file\":\"dave\",\"type\":\"ward\"}";
dynamic jo = JObject.Parse(json);
string _file = jo.file;
string _type = jo.type; 
```

不要忘记：

```
using Newtonsoft.Json.Linq; 
```

这是一种非常简单的方法，您不必声明强类型对象，因此它很容易即时执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:01:44.313

你应该有一个类定义为：

```
public class YourJsonClass
{
    public string file {get;set;}
    public string type {get;set;}
} 
```

然后，你会像这样反序列化：

```
YourJsonClass sData=jss.Deserialize<YourJsonClass>(json); 
```

`sData`根据`YourJsonClass`定义，数据将在对象中可用，因此`sData.file`将保存文件属性，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:15:16.863

我通常将 JSON 字符串传递给将结构化类作为参数的函数/方法。

* * *

Javascript 对象

```
"{ q: {file:\"dave\", type:\"ward\"} }" 
```

* * *

```
public class myClass
{
     private string _file = string.empty;
     public string file {
         get { return _file; }
         set { _file = value.trim(); }
       }

     private string _type = string.empty;
     public string type {
         get { return _type; }
         set { _type = value.trim(); }
       }
} 
```

* * *

```
 public ClassTypeOrVariableType FunctionName(myClass q)
  {
     //do stuff here
  { 
```

# iphone - 带有按钮的自定义 UITableViewCell

> ID：12589413
> 
> 赞同：1
> 
> 时间：2012-09-25T19:00:33.797
> 
> 标签：iphone, objective-c, uitableview, uibutton, cgrectmake

基本上，我有一个表格视图，其中有 2 个按钮被渲染到前两行，我通过 CGRectMake 完成了这项工作，并将按钮添加到单元格子视图中。表格视图还有一个带有范围栏的搜索栏。

我遇到的问题是，当应用程序首次加载时，按钮比我想要的要短，并且已经将它们设置为（几乎就像它们在呈现时被“默认”一样）。当我更改范围时，按钮会更改为我设置的大小，但是当我更改回来时，按钮不会恢复到之前的大小。

按钮是在`cellForRowAtIndexPath`方法中创建的，虽然我看不出这可能是大小的问题，但我确实对范围栏有响应问题（但我知道这很可能归结为内部的所有`cellForRowAtIndexPath`内容每次范围更改时都会调用它，因此它自然会导致应用程序变慢。

方法在`cellForRowAtIndexPath`这里：

`-- Edited 26/09/2012 After First Answer --`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *normalCellIdentifier = @"normalCell";
    static NSString *topRowCellIdentifier = @"topRowCell";

    UITableViewCell *normalCell = [tableView dequeueReusableCellWithIdentifier:normalCellIdentifier];
    if (normalCell == nil) {
        normalCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:normalCellIdentifier];
    }

    UITableViewCell *topRowCell = [tableView dequeueReusableCellWithIdentifier:topRowCellIdentifier];
    if (topRowCell == nil) {
        topRowCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:topRowCellIdentifier];

        // Added in here
        button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];

        CGRect buttonRect;

        button1.tag = indexPath.row;
        button2.tag = indexPath.row;

        button1.titleLabel.tag = 0;
        button2.titleLabel.tag = 1;

        [button1 setTitle:@"Button 1" forState:UIControlStateNormal];
        [button2 setTitle:@"Button 2" forState:UIControlStateNormal];

        [button1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [button2 addTarget:self action:@selector(buttonPressed2:) forControlEvents:UIControlEventTouchUpInside];

        [topRowCell addSubview:button1];
        [topRowCell addSubview:button2];

        buttonRect = CGRectMake(0.0f, 0.0f, topRowCell.frame.size.width / 2.0f, topRowCell.frame.size.height);

        button1.frame = CGRectMake(7.0f, 7.0f, buttonRect.size.width - 14.0f, buttonRect.size.height- 14.0f);
        button2.frame = CGRectMake(buttonRect.size.width + 7.0f, 7.0f, buttonRect.size.width - 14.0f, buttonRect.size.height - 14.0f);

        NSMutableArray *buttonsArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.avicode.co.uk/iphone/minepedia/plists/featured/buttons.plist"]];

        NSData *data1;
        data1 = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[[buttonsArray objectAtIndex:indexPath.row] objectAtIndex:button1.titleLabel.tag] objectForKey:@"button1ImageURL"]]];

        NSData *data2;
        data2 = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[[buttonsArray objectAtIndex:indexPath.row] objectAtIndex:button2.titleLabel.tag] objectForKey:@"button2ImageURL"]]];

        selectedIndexPathType1 = [[[buttonsArray objectAtIndex:indexPath.row] objectAtIndex:button1.titleLabel.tag] objectForKey:@"type"];
        selectedIndexPathType2 = [[[buttonsArray objectAtIndex:indexPath.row] objectAtIndex:button2.titleLabel.tag] objectForKey:@"type"];

        button1.imageView.image = [UIImage imageWithData:data1];
        button2.imageView.image = [UIImage imageWithData:data2];
    }

    // Configure the cell...
    if (segmentedControl.selectedSegmentIndex == 0) 
    {
        if (indexPath.section == 0) 
        {
            topRowCell.selectionStyle = UITableViewCellSelectionStyleNone;
            return topRowCell;
        }
        else
        {
            return normalCell;
        }
    }
    else
    {
        return normalCell;
    }
} 
```

让我知道您是否还有其他想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:06:51.650

我认为您的部分问题是您正在多次创建按钮并将其添加到单元格中。您应该在 if 语句的 then 子句中创建按钮，以测试您是否成功地使先前创建的单元出队。

另一个问题是您在创建单元格时同步从 Internet 加载内容。如果只是出于性能原因，您将希望使用 NSURLConnection 之类的东西异步执行此操作。为您的按钮使用占位符图像，并在您从 Internet 加载真实图像时替换它们。或者，您似乎只有两个图像，因此至少您可以缓存它们而不是每次创建单元格时加载它们。

# c# - 如何使用 javascript 在编辑模式下验证网格视图？

> ID：12589414
> 
> 赞同：0
> 
> 时间：2012-09-25T19:00:33.283
> 
> 标签：c#, javascript, gridview

我有一个可以编辑数据的网格视图，它绑定到一个 sqldatasource。

但是，我想验证一些处于编辑模式的文本框。例如，其中之一是必需的，不能留空。如何在编辑模式下使用 javascript 在网格视图中进行此类验证？

```
function ValidateGridEditMode()
{
var Grid = document.getElementById('gridview.clientid');

  //how can i get textboxes and apply validation
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:03:42.927

将这些列转换为模板列，并在 ItemTemplate 中添加标准验证控件。确保在验证控件上将 EnableClientScript 设置为 true。

这里有一个类似（但不完全重复）的帖子[，](https://stackoverflow.com/questions/1190338/validate-a-gridview)其中给出了有效答案中的代码示例。

# debugging - 使用 Codeblocks 逐步执行我的代码

> ID：12589415
> 
> 赞同：4
> 
> 时间：2012-09-25T19:00:36.857
> 
> 标签：debugging, codeblocks

我记得`F8`在 Turbo C 中有一个快捷键可以显示代码的逐步执行，它还可以让你看到变量的值。

**代码块有类似的东西吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T04:04:08.353

Code::blocks 提供调试功能。我们可以观察变量的值并逐步执行。

1.  创建项目
2.  通过在您想要的行号处单击鼠标右键并选择切换断点来添加断点。
3.  单击调试菜单并形成调试窗口选项选择监视窗口。

在监视窗口中，您可以看到变量的值，并在断点后使用 shift+F7 键逐步执行。

我的回答可能对您不清楚，或者您可以关注此代码块 wiki 页面[http://wiki.codeblocks.org/index.php?title=Debugging_with_Code::Blocks](http://wiki.codeblocks.org/index.php?title=Debugging_with_Code::Blocks)

# memory - CUDA - 合并内存访问和总线宽度

> ID：12589416
> 
> 赞同：5
> 
> 时间：2012-09-25T19:00:41.973
> 
> 标签：memory, cuda, coalescing

所以我关于在 CUDA 中合并内存访问的想法是，warp 中的线程应该访问连续的内存地址，因为这只会导致单个内存事务（然后将每个地址上的值广播到线程）而不是多个那些将以串行方式执行的。

现在，我的总线宽度是 48 字节。这意味着我可以在每个内存事务中传输 48 个字节，对吧？因此，为了充分利用总线，我需要能够一次读取 48 个字节（通过每个线程读取一个以上的字节 - 内存事务由 warp 执行）。但是，假设，一次读取 48 个字节的单个线程不会提供相同的优势（我假设我可以通过读取大小为 48 个字节的结构一次读取 48 个字节）？

我的合并问题是我必须对数据进行转置。我有很多数据，因此转置需要时间，如果可以的话，我宁愿将其用于其他事情。

我正在使用计算能力 2.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T19:56:12.320

GPU 的内存总线不仅仅是 48 字节宽（这会很麻烦，因为它不是 2 的幂）。相反，它由 6 个内存通道组成，每个通道有 8 个字节（64 位）。内存事务通常比通道宽度宽得多，以便利用内存的突发模式。良好的事务大小从 64 字节开始，以产生大小为 8 的突发，这与计算能力 1.x 设备上的半扭曲的 16 个 32 位字很好地匹配。

128 字节宽的事务仍然要快一些，并且与计算能力 2.0（及更高版本）设备的经线宽 32 位字访问相匹配。高速缓存行也是 128 字节宽以匹配。请注意，所有这些访问必须在事务宽度的倍数上对齐，以便映射到单个内存事务。

现在关于您的实际问题，**最好的办法可能是什么都不做，让缓存对其进行排序**。这与您在共享内存中显式执行的方式相同，只是它由缓存硬件为您完成，并且不需要代码，这应该会使其速度稍快一些。唯一需要担心的是有足够的缓存可用，这样每个warp 可以有必要的32×32×4 字节= 4kbytes 的缓存用于字宽（例如float）或8kbytes 用于双重访问。这意味着限制同时处于活动状态的 warp 的数量是有益的，以防止它们破坏彼此的缓存行。

对于特殊优化，也可以使用像`float2`or这样的向量类型`float4`，因为所有支持 CUDA 的 GPU 都有将 8 或 16 个字节映射到同一线程的加载和存储指令。然而，在计算能力 2.0 及更高版本上，我并没有真正看到在一般矩阵转置情况下使用它们的任何优势，因为它们会更多地增加每个 warp 的缓存占用空间。

由于 16kB 缓存 / 48kB 共享内存的默认设置只允许每个 SM 四个 warp 一次执行转置（前提是您同时没有其他内存访问），因此选择 48kB 缓存 /使用[`cudaDeviceSetCacheConfig()`](http://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__DEVICE.html#group__CUDART__DEVICE_1g6c9cc78ca80490386cf593b4baa35a15). 较新的设备具有更大的缓存并提供更多不同的拆分以及选择使用超过 48kB 的共享内存。详细信息可以在链接的文档中找到。

为了完整起见，我还将提到计算能力 3.0 引入的 warp shuffle 指令允许在 warp 内交换寄存器数据，而无需通过缓存或共享内存。有关详细信息，请参阅CUDA C 编程指南的[附录 B.22](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#warp-shuffle-functions)。
（请注意，存在没有此附录的编程指南版本。因此，如果在您的副本中附录 B.13 是关于其他内容的，请通过提供的链接重新加载它）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T19:34:29.603

正如您所说，出于合并的目的，您应该专注于使扭曲中的 32 个线程访问连续的位置，最好也对齐 32 字节或 128 字节。除此之外，不必担心 DRAM 内存的物理地址总线。内存控制器由大部分独立的分区组成，每个分区都是 64 位宽。内存控制器将尽快满足您从扭曲中出来的合并访问。一个完整的warp（32个线程）访问一个int或float的单个合并访问无论如何都需要检索128个字节，即物理总线上到DRAM的多个事务。当您在缓存模式下操作时，无论如何，您无法真正控制一次对全局内存的请求粒度低于 128 字节。

不可能导致单个线程在单个事务中请求 48 个字节或类似的东西。即使在 c 代码级别，如果您认为您正在一次访问整个数据结构，在机器代码级别，它也会被转换为一次读取 32 位或 64 位的指令。

如果你觉得一次 128 字节的缓存限制在惩罚你的代码，你可以尝试在非缓存模式下运行，这会将全局内存请求的粒度降低到一次 32 字节。如果你有一个分散的访问模式（没有很好地合并）这个选项可能会提供更好的性能。

# python - 如何捕获子进程的输出而不是标准输出/标准错误？

> ID：12589419
> 
> 赞同：3
> 
> 时间：2012-09-25T19:00:51.653
> 
> 标签：python, subprocess

我有一个程序，我想通过子进程启动。它可以输出到除 stdout 和 stderr 以外的 fd。有没有办法从任意 fd 捕获数据？如果我的进程将输出发送到 fd 9，我想做类似以下的事情：

```
import subprocess, StringIO
redirector = StringIO.StringIO()
errno = subprocess.call(cmd, fd9=redirector)
#process the error code and data in redirector 
```

我不想**通过**stderr 或 stdout 将被调用进程的输出重定向到 fd 9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:19:48.093

如果程序在开始运行后打开文件描述符 9（或其他），则无法执行您想要的操作。

如果程序*本身没有*打开文件描述符 9，而是从父进程中获取它，那么您可以使用 的`preexec_fn`参数做您想做的事情`subprocess.Popen`，但这并不像为`StringIO`实例设置一些东西那么简单。您必须手动创建管道，并且您必须及时安排从中读取，否则*会*导致死锁。期望编写两三百行代码才能做到 100% 正确。我不会在这里放任何示例代码，因为我不想让它看起来比实际更容易。

除了[`subprocess.Popen`](http://docs.python.org/library/subprocess.html#popen-constructor)，您还需要[`os.pipe`](http://docs.python.org/library/os.html#os.pipe)、[`os.dup2`](http://docs.python.org/library/os.html#os.dup2)、 和[`os.read`](http://docs.python.org/library/os.html#os.read)，并且您需要了解底层系统原语： [`pipe(2)`](http://linux.die.net/man/2/pipe)、[`dup2(2)`](http://linux.die.net/man/2/dup2)、[`read(2)`](http://linux.die.net/man/2/read)、[`fork(2)`](http://linux.die.net/man/2/fork)和[`execve(2)`](http://linux.die.net/man/2/execve)。

现在可能是[*购买 Unix 环境中的高级编程*](https://www.powells.com/biblio/62-9780321637734-1)副本的好时机。

# excel - 如何在数据透视表中复制行标签？

> ID：12589420
> 
> 赞同：0
> 
> 时间：2012-09-25T19:00:55.633
> 
> 标签：excel, pivot-table

我创建了一个数据透视表来显示根据多行过滤的数据。但是，输出显示如下：

```
Label1
        Label2
                Label3-1
                Label3-2
                Label3-3

etc... 
```

有没有允许我复制这些行标签而不是空白的选项？我希望上面看起来更像是从数据库中提取的数据，如下所示：

```
Label1  Label2  Label3-1
Label1  Label2  Label3-2
Label1  Label2  Label3-3

etc... 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:10:23.733

在 Excel 2010 中，

*   转到 Pivot table tools \ Design \ Report layout 并选择 Show in Tabular Form 选项，然后
*   转到数据透视表工具\设计\报表布局并选择重复所有项目标签选项

# javascript - Javascript未定义变量错误

> ID：12589423
> 
> 赞同：0
> 
> 时间：2012-09-25T19:01:00.903
> 
> 标签：javascript, onclick

> **可能重复：**
> [Javascript 循环中的事件处理程序 - 需要闭包吗？](https://stackoverflow.com/questions/341723/event-handlers-inside-a-javascript-loop-need-a-closure)

我想简单地将 onclick 事件分配给`li`无序列表中的一系列元素。`li`我不想通过定义大量唯一 ID 并手动将事件添加到每个元素来以凌乱的方式进行操作，而是希望通过`for`循环以编程方式进行操作。

html:

```
<ul id="homeNav">
    <li><a title="Back to home page" href="">home</a></li>
    <li><a title="Play" href="">play</a></li>
    <li><a title="About the site?" href="">about</a></li>
    <li><a title="Latest development news and info." href="">dev blog</a></li>
    <div class="clear"></div>
</ul> 
```

Javascript：

```
window.onload = function()
{
    var parentList = document.getElementById('homeNav');
    var listItems = parentList.getElementsByTagName('li');
    var numItems = listItems.length;
    for(var i = 0; i < numItems; i++)
    {
        listItems[i].onmouseover = function()
        {
            listItems[i].getElementsByTagName('a')[0].style.color = 'blue';
        }
        listItems[i].onmouseout = function()
        {
            listItems[i].getElementsByTagName('a')[0].style.color = '#cccccc';
        }
    }
} 
```

我得到错误`listItems[i] is undefined`

在我看来，事件实际上是在寻找`i`索引变量，而不是使用在将事件添加到触发器时分配给它的数字，或者`i`变量可能不在闭包的范围内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:08:08.173

该变量在事件中不可用，您可以使用`this`..

```
for(var i = 0; i < numItems; i++)
{
    listItems[i].onmouseover = function()
    {
        this.getElementsByTagName('a')[0].style.color = 'blue';
    }
    listItems[i].onmouseout = function()
    {
        this.getElementsByTagName('a')[0].style.color = '#cccccc';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:08:33.740

我不确定，但我会考虑并检查

```
var listItems = parentList.getElementsByTagName('li');
listItems[i] 
```

...我不确定您是否正在这样做 2) 执行 console.log (listItems) 以查看它是什么，并记住数组-对象的区别。暂时就这些了，得走了……抱歉简短的回答，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:08:42.547

你的代码有问题。i 的 mouseover 或 mouseout 值将等于 numItems；因为这些事件将在 for 循环完成后被调用。所以你应该保存上下文。

```
function bindEvent(elem){

            elem.onmouseover = function()
            {
               elem.getElementsByTagName('a')[0].style.color = 'blue';
            }
            elem.onmouseout = function()
            {
               elem.getElementsByTagName('a')[0].style.color = '#cccccc';
            }
}

    window.onload = function()
    {
        var parentList = document.getElementById('homeNav');
        var listItems = parentList.getElementsByTagName('li');
        var numItems = listItems.length;
        for(var i = 0; i < numItems; i++)
        {
          bindEvent(listItems[i]);

        }
    } 
```

# css - 取消设置 CSS 属性？

> ID：12589424
> 
> 赞同：0
> 
> 时间：2012-09-25T19:01:07.293
> 
> 标签：css, twitter-bootstrap

我目前在一些小项目中使用 Twitter 的 Bootstrap。我将所有 CSS 更改放在一个新`.css`文件中。但是我怎样才能取消原始的 CSS 属性`bootstrap.css`呢？

已经厌倦了将其设置为`0`，但这不适用于所有属性。

`.example { color: 0; }`例如不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:15:55.857

最好指定自己的值，因为将其设置为默认值可能会很棘手：

[属性的初始值`color`取决于用户代理](http://www.w3.org/TR/CSS2/colors.html#colors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:01:51.950

尝试这个：

```
.example { color:inherit; } 
```

# ruby - 制作一个 ruby 代码作为控制台命令

> ID：12589425
> 
> 赞同：1
> 
> 时间：2012-09-25T19:01:11.560
> 
> 标签：ruby, console

我用珠宝商创建了一个 gem，我想要一个命令`hat`来调用我的 gem 中的特定函数。在 Python 中我可以把这个

```
entry_points="""
      [console_scripts]
      hat = hat:hat
      """ 
```

在`setup.py`它工作，但它是如何在红宝石中完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:36:29.030

```
$ mkdir bin
$ touch bin/foo
$ chmod a+x bin/foo 
```

编辑**bin/foo**

```
#!/usr/bin/env ruby

require 'foo'
#Anything you want....... 
```

将以下内容添加到 Gemfile

```
 s.executables << 'foo' 
```

按照：

[使 ruby​​ gem 响应终端命令](https://stackoverflow.com/questions/11555268/making-ruby-gems-respond-to-terminal-commands)

还有：

[http://visionmedia.github.com/commander/](http://visionmedia.github.com/commander/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:18:04.170

对于控制台，您可以`.irbrc`像在 Python 中一样将内容添加到文件中。

但是，在`irb`控制台的上下文中，方法必须在`main`命名空间中定义。显然，您要小心在此处添加的内容，因为如果您开始使用任意名称大量添加这些内容，可能会引起混乱。

# iphone - 错误的 URL NSURLConnection

> ID：12589427
> 
> 赞同：1
> 
> 时间：2012-09-25T19:01:30.243
> 
> 标签：iphone, url, nsurlconnection

我遇到了非常糟糕的问题，因为我得到了

```
 Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x1d80fca0 {NSUnderlyingError=0x1d8d0100 "bad URL", NSLocalizedDescription=bad URL}error ! 
```

我正在使用以下网址，并且网址中没有空格，为什么会出现此错误

```
 http://xxxxxxx.com/api/webservices/webservice.php?method=myProfile&uid=14&sid=23a2q6g70ikliv4jjkjjcl0im6&gid=50317 
```

请帮忙，如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:10:06.653

请确保使用此方法的 url 有效。

-(BOOL) validateUrl: (NSString *) 候选{

```
NSString *urlRegEx =
@"(http|https)://((\\w)*|([0-9]*)|([-|_])*)+([\\.|/]((\\w)*|([0-9]*)|
([-|_])*))+";

NSPredicate *urlTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", urlRegEx]; 

return [urlTest evaluateWithObject:candidate]; 
```

}

并检查[CFNetwork](http://developer.apple.com/library/ios/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html)类参考

# quantstrat - 使用 quantstrat 在 R 中使用 min 和 tail 比较以前的值

> ID：12589428
> 
> 赞同：0
> 
> 时间：2012-09-25T19:01:31.173
> 
> 标签：quantstrat

我正在尝试在 quantstrat 中编写自己的信号函数。我正在努力解决的逻辑与其他 R 操作中使用的逻辑相同。

data[,colNums[1]] 等返回一个值向量。

```
sigPair <- function( label, data = mktdata, columns )
{
  ret_sig = FALSE
  colNums <- match.names(columns, colnames(data))
ratio_minus_dn <- data[, colNums[1]] - data[, colNums[3]]
    ret_sig <- do.call(">", list(data[, colNums[1]], data[, colNums[2]]))

    ret_sig <- ifelse( min(tail(ratio_minus_dn, 400)) < 0, ret_sig, FALSE    )

  colnames(ret_sig) <- label
  return(ret_sig)  
} 
```

就是这一行：

```
ret_sig <- ifelse( min(tail(ratio_minus_dn, 400)) < 0, ret_sig, FALSE    ) 
```

这给我带来了问题。

我得到的错误是：`colnames<-`( `*tmp*`, value = "cross.up") 中的错误：尝试在小于二维的对象上设置 colnames

我的目的是检查 ratio_minus_dn 在最后 400 个元素中是否为 <0，并在这种情况下返回 true。

什么是完成这项任务的好方法？

感谢所有提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:27:39.943

无法解决这个问题，但得到了一个很好的解决方案提示，使我能够解决这个问题。这使我能够使用更高的时间范围计算，因此我几乎可以得到相同的结果：

```
getSymbols("SPY", src="yahoo")

SPY$wklyRSI <- xts:::by.period(SPY, RSI, period="weeks", n=2) 
```

# php - 使用 Cookie 在页面加载时显示弹出消息

> ID：12589440
> 
> 赞同：0
> 
> 时间：2012-09-25T19:02:29.640
> 
> 标签：php, jquery, cookies, popup, onload

我正在使用本教程在我的网站上创建弹出消息：[LINK](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/build-a-popup-modal-window-using-the-jquery-reveal-plugin/)

它应该只显示/弹出，当用户使用 IE7 或更少时，并且只有一次 - 所以我需要使用 cookie。

本教程使用了一个名为“Reveal”的 jQuery 插件，它的激活方式如下：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#button').click(function(e) {        // Button which will activate our modal
        $('#modal').reveal({                // The item which will be opened with reveal
            animation: 'fade',              // fade, fadeAndPop, none
            animationspeed: 600,            // how fast animtions are
            closeonbackgroundclick: true,   // if you click background will modal close?
            dismissmodalclass: 'close'      // the class of a button or element that will close an open modal
        });
    return false;
    });
}); 
```

该脚本附带的 HTML 是这样编写的：

```
 <div id="modal">
        <div id="heading">
            Are you sure you want to do that?
        </div>
        <div id="content">
            <p>Clicking yes will make Comic Sans your new system<br> default font. Seriously, have you thought this through?</p>
            <a href="#" class="button green close"><img src="images/tick.png">Yes, do it now!</a>
            <a href="#" class="button red close"><img src="images/cross.png">No, I’m insane!</a>
        </div>
    </div> 
```

我尝试`"Reveal"-plugin`使用[THIS](http://jqueryjs.googlecode.com/svn-history/r6125/trunk/plugins/cookie/jquery.cookie.js)脚本自己将 cookie 添加到 ，但没有运气：

```
<script type="text/javascript">
    $(document).ready(function() {
        if ( $.cookie ( 'first_visit' ) !== '0' ){
            $('#modal').reveal({                // The item which will be opened with reveal
                animation: 'fade',              // fade, fadeAndPop, none
                animationspeed: 600,            // how fast animtions are
                closeonbackgroundclick: true,   // if you click background will modal close?
                dismissmodalclass: 'close'      // the class of a button or element that will close an open modal
            });
            $.cookie( 'first_visit' , '0' );
        return false;
        }
    });
</script> 
```

我究竟做错了什么？我希望此弹出消息显示在 IE7 及以下版本 - 仅在第一次访问该站点时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:05:32.970

如果您希望它在 IE 上显示，请仅使用 IE 条件标签

```
<!--[if lt IE 8]>
<script type="text/javascript">
... your code ...
</script>
<![endif]--> 
```

[IE 条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

还要养成调试时测试变量的习惯

```
<script type="text/javascript">
    $(document).ready(function() {
        var cookie = $.cookie('first_visit');
        alert(cookie); // this will show you why it is not workin
        .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:41:02.513

您在 script.js 的第 12 行有错误。您正在使用一种名为`validationEngine`. 你确定你加载了这个，因为我在任何地方都看不到它。您也可以尝试`$.validationEngine`在控制台中输入，它会告诉您它是未定义的。这可能会停止您的 javascript 执行。

确保您包含此验证引擎，或者不使用它，如果错误仍然存​​在，请返回。据我所知，您对 cookie 插件的使用是正确的。它也已初始化，我可以通过控制台在您的站点上使用它。

**编辑**

调用模态器初始化后返回 false 。我猜这是因为您从属于 html 锚点 ( `<a />`) 上的单击事件的代码中复制了它，并且它需要停止执行默认操作（转到链接）。我认为在这种情况下它不会做任何事情，但是在 $.ready 上返回 false 似乎本能地是一个非常糟糕的主意。摆脱它！

# security - 如何使用 url.parse 防止 sql 注入

> ID：12589442
> 
> 赞同：0
> 
> 时间：2012-09-25T19:02:35.843
> 
> 标签：security, node.js, mongodb, mongoskin

我对 node.js 和 mongodb 很陌生。我有一个页面获取查询字符串

```
var queries = url.parse(req.url,true).query; 
```

我使用 mongoskin 模块将它们写入数据库。我必须对sql注入做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:09:17.070

[http://docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection](http://docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection)

您无需担心 MongoDB 中的传统 SQL 注入或使用上面代码的任何类型的查询注入。只有这些命令：

*   $哪里
*   db.eval()
*   地图减少
*   团体

将允许执行 JavaScript，如果使用用户提供的数据将是不安全的。

# c - Linux下动态加载库的地址范围

> ID：12589443
> 
> 赞同：2
> 
> 时间：2012-09-25T19:02:44.803
> 
> 标签：c, linux, process, dynamic-linking, dlopen

我有一个可以加载插件的工作程序`dlopen`。

新要求：在代码中的某个点，给了我一个指针，我需要测试这个指针是指向代码还是插件的静态数据。

```
bool is_pointer_into_plugin(void *p, void *handle); 
```

同样，我需要检索指针指向的插件（如果有）。我还需要知道指针是否指向主程序的代码或静态数据（理想情况下，区分只读和读写区域）。

```
void *handle plugin_containing_pointer(void *p); 
```

同样，我需要能够检索插件映射的范围（地址和大小）。我还需要主程序的这些信息。

我怎样才能实现`is_pointer_into_plugin`, 或`plugin_containing_pointer`, 或等效的东西？

`dlopen`如有必要，我可以将呼叫更改为。查找应该尽可能快，加载时代码不需要很快。在单独的进程中运行插件并通过共享内存进行通信不是一种选择。

我的程序在 Linux（和 Windows，但这是[另一个问题](https://stackoverflow.com/questions/12589461/address-range-of-a-dynamically-loaded-library-under-windows)）下运行。未来对其他 unix 系统（至少对 OSX）的可移植性将是一个加分项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:20:16.540

一种方法，如果你足够控制插件——使用链接器脚本应该可以解决问题——将确保在开始和结束时有指定的符号——即类似于`__executable_start`, `_etext`, `_edata`, `_end`——然后使用 dlsym 来获取它们地址。您可能可以在具有动态库的所有系统上获得相同的效果，从而将大多数系统依赖项推到构建端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:02:44.803

一种方法（完全特定于 Linux）是解析[`/proc/self/maps`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)（另请参阅[了解 Linux /proc/id/maps](https://stackoverflow.com/questions/1401359/understanding-linux-proc-id-maps)），它描述了进程的内存映射。每个动态加载的库都有一个或多个条目（通常为 3 个），给出其地址范围、访问权限和文件名。这是一个显示 C 库映射的示例：

```
f7622000-f7775000 r-xp 00000000 08:06 6950542                            /lib/tls/i686/cmov/libc-2.11.1.so
f7775000-f7777000 r--p 00153000 08:06 6950542                            /lib/tls/i686/cmov/libc-2.11.1.so
f7777000-f7778000 rw-p 00155000 08:06 6950542                            /lib/tls/i686/cmov/libc-2.11.1.so 
```

第一列给出地址范围，第二列给出权限，第三列给出库（或主可执行文件）的完整路径。最后一列为空或最后一列不是文件名的条目对应于非文件支持的区域（堆栈、堆等）。权限`r-xp`表示代码，`r--p`是只读数据，`rw-p`是可变数据。

如果插件文件被重命名或删除，这将反映在`/proc/self/maps`. 为避免出现这种情况，请在调用 ( ) 后尽快阅读信息`dlopen`；请注意，存在不可避免的竞争条件。插件文件可以通过设备和 inode 来跟踪：打开文件，调用`dlopen`，`/dev/fd/NUM`读取`/proc/self/maps`，将第 4 列和第 5 列与使用 获得的值进行比较`fstat`。

# javascript - Node.js：创建“滚动窗口+文本区域”控制台应用程序的最简单方法？

> ID：12589445
> 
> 赞同：2
> 
> 时间：2012-09-25T19:02:48.243
> 
> 标签：javascript, node.js, console

我正在用 Node.js 编写一个控制台应用程序。把它想象成某种文件的“tail -f”，但您也可以在其中输入一些将在列表中起作用的“命令”。

一个双窗口控制台应用程序：第一个带有无人值守的行滚动，第二个可以在 Readline 的帮助下输入文本。

你认为我需要 ncurses 还是可能有另一种 - 甚至更低级别 - 直接寻址屏幕的方式（哦，伙计，我记得 DOS 内存的 Int21h）？

编辑：我发布了应用程序：[https](https://github.com/claudioc/jecho) ://github.com/claudioc/jecho （仍然没有“windows”......我只是试着对 \n 保持聪明:)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:19:34.180

是的，你需要 ncurses 或 termio 或类似的东西。您尝试做的事情需要您自己控制终端 i/o 缓冲区，绝对低于 node 默认为您提供的级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:42:44.643

它真的需要是一个单一的应用程序吗？你可以只使用屏幕。水平分割屏幕，让每个窗口分别与节点对话。顶部窗口可以只是一个轮询 node.js 并打印输出的循环。

# android - Android：如何将任意 alpha 掩码应用于绘图命令？

> ID：12589446
> 
> 赞同：3
> 
> 时间：2012-09-25T19:02:58.093
> 
> 标签：android

我正在将一些图形绘制到画布中。该图形是形状、文本和位图的组合。我需要根据任意掩码设置这些命令的 alpha 级别。此掩码根据 x,y 位置为所有像素定义任意 alpha。

一个简单的例子：定义一个遮罩，上面的 1/4 区域是 80% alpha，下一个 1/4 是 60% alpha，下一个是 20% alpha，最后一个是 0% alpha。存在用于跨越所有 4 个 alpha 区域的线的绘图命令。生成的渲染应该是一条线，其顶部 1/4 为 80% alpha，下 1/4 为 60% alpha，依此类推。下面是此场景的粗略渲染。实际上，遮罩不需要那么简单，它可以为任何像素定义任何 alpha 值。

Android 提供了各种似乎与此相关的选项/参数，但我没有找到任何适合我的选项/参数。特别是 android.graphics.MaskFilter 看起来很有希望，因为它被描述为一种在绘制之前转换 alpha 通道的方法。但是，MaskFilter 不能被子类化，并且提供的实现不允许任意掩码。

![在此处输入图像描述](../Images/81445f536a6db6baf0f8cc6cd947173d.png)

# android - Android：如何在 FrameLayout 元素中绘制？

> ID：12589450
> 
> 赞同：1
> 
> 时间：2012-09-25T19:03:09.800
> 
> 标签：android, layout, view, drawing

我正在开发一个多片段应用程序并且无法获得任何好的信息如何做到这一点：屏幕顶部是一个标签栏，您可以在其中切换到不同的片段。下面是我正在处理的片段。我想在最低层上绘制内容，并在上方带有按钮的 EditText。绘制的内容必须在按钮单击时可更新。我目前的想法是将内容元素添加到框架布局并绘制到其中。框架布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout  
xmlns:android="http://schemas.android.com/apk/res/android"  
android:layout_width="fill_parent"  
android:layout_height="fill_parent"
android:background="@color/frag_color_bg"> 

<!-- Content element here -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"  
    android:orientation="vertical">  

    <EditText
        android:id="@+id/frag_text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@color/frag_color_te_bg"
        android:hint="@string/frag_srvhint"
        android:padding="2dp"
        android:textColor="@color/frag_text1"
        android:textSize="12sp">
    </EditText>  

    <Button
        android:id="@+id/frag_plotbtn"
        android:background="@drawable/frag_blue_btn"
        android:text="@string/frag_plotlabel"
        style="@style/frag_btn"
        android:layout_marginTop="0dp">

    </Button>
</LinearLayout>  
</FrameLayout> 
```

这甚至可能吗？将内容元素放在 map.xml 中（代替注释）并使用 Java 绘制到其中？如果这是可能的，我必须把哪个内容元素放在那里？一个看法？你有任何示例代码如何做到这一点？

如果这是不可能的，那么实现这一点的最佳方法是什么？

欢迎任何想法或代码示例。我是 Android 新手，几天来一直在寻找解决方案，但网上的示例并不那么清楚......

非常感谢您的时间和帮助！

类本身：

```
public MapFragment extends Fragment {
private final static String LOG_TAG = "Map";
private View mContentView;
private EditText mTxt;
private Activity mAct;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    mAct = (Activity) getActivity();
    mContentView = (View) inflater.inflate(R.layout.map, container,
            false);
    try {
        mTxt = (EditText) mContentView.findViewById(R.id.frag_text1);

           mContentView.findViewById(R.id.frag_plotbtn).setOnClickListener(
                myOnClickListener);
    } catch (Exception e) {
        Log.w(LOG_TAG, e);
    }
    return mContentView;
}

    public OnClickListener myOnClickListener = new OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()) {
        // Plot button
        case R.id.frag_plotbtn:
            // Update drawing here;
            break;
        default:
            break;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:44:39.300

我会在视图之上使用画布。查看这篇文章：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html#draw-with-canvas](http://developer.android.com/guide/topics/graphics/2d-graphics.html#draw-with-canvas)

如果你使用它，你将把你自己的扩展视图放在你的评论位置。您将创建您自己版本的 onDraw() 方法，并在您想要重绘时（即按下按钮时）调用 invalidate()。像这样将它添加到您的 XML 中：

```
<com.mypackage.MyView
   id="@+id/myView"
   ... /> 
```

希望有帮助！

# jquery - JQuery 有内置的继承吗？

> ID：12589454
> 
> 赞同：-5
> 
> 时间：2012-09-25T19:03:14.000
> 
> 标签：jquery

JQuery 是否具有像原型一样的内置继承？

刚发现这个问题：[JQuery继承](https://stackoverflow.com/questions/1075660/jquery-class-inheritance)

我最初的搜索条件失败了，我从节制中猜出一个愚蠢的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:08:21.923

在你被否决之前，我会告诉你。不，它不支持，因为 Javascript 不支持类结构，所以 JQuery 中不存在这种类型的范例。有它的插件。祝你好运。

# vba - VBA 宏运行时错误 9：下标超出范围 - if 语句

> ID：12589455
> 
> 赞同：1
> 
> 时间：2012-09-25T19:03:27.683
> 
> 标签：vba, excel

我正在做一个需要使用 GA 的项目。我在我的代码中遇到了以下错误。

下面的代码是做 GA 的交叉。大多数变量是通过用户表单输入的。*注意此代码可能包含更多错误。

我的变量：

```
Dim FitValarr() As Long
Dim fitsmall As Long
Dim Poparr() As Integer
Dim PopSize As Long
Dim Cross_Prob As Double
Dim overallRandom As Single
Dim FitValarr() As Long
Dim fitsmall As Long
Dim newChildarr() As Integer
Dim newChildfit As Integer
Dim child1() As Integer
Dim child2() As Integer
Dim fitvalchild1 As Integer
Dim fitvalchild2 As Integer
Dim crossoverpos As Integer
Dim chromosomerandom As Integer
Dim fitbig As Integer
Dim i As Long, j As Long, counter As Long
Dim Chromolength As Integer 
```

编码：

```
Chromolength = varchromolength * aVariables  'usual value is around 30 = (10*3)
ReDim Poparr(1 To PopSize, 1 To Chromolength)
ReDim FitValarr(1 To PopSize)                 'popsize is around 10 -50
ReDim newChildarr(1 To Chromolength) As Integer
ReDim child1(1 To Chromolength) As Integer
ReDim child2(1 To Chromolength) As Integer

 'chosing two random chromosomes
Dim rand1 As Integer
Dim rand2 As Integer

rand1 = Int(Rnd * PopSize)               'generate random value between 1-50
rand2 = Int(Rnd * PopSize)               'same as above

Do While rand1 = rand2
       rand2 = Int(Rnd * PopSize)        'checking that the two random values isn't the same
Loop

If overallRandom < Cross_Prob Then                  

    If FitValarr(rand1) > FitValarr(rand2) Then    
        Do While rand1 = rand2
        rand2 = Int(Rnd * PopSize)
        Loop
    Else
        Do While rand1 = rand2                     
        rand1 = Int(Rnd * PopSize)
        Loop
    End If

    crossoverpos = Int(Rnd * Chromolength)
    Do While crossoverpos < 1 & crossoverpos > Chromolength
    Loop

    'do crossover and assign it to child# array
    For i = 1 To crossoverpos                                   
        child1(i) = Poparr(rand1, i)                            
        child2(i) = Poparr(rand2, i)                            
    Next i

    For i = crossoverpos To Chromolength
        child1(i) = Poparr(rand2, i)                            
        child2(i) = Poparr(rand1, i)                            
    Next i

    'fitness of the two offsprings
    For i = 1 To Chromolength                                  
        counter = Chromolength

        Do While counter > 0
            fitvalchild1 = fitvalchild1 + child1(counter) * 2 ^ (i - 1)
            fitvalchild2 = fitvalchild2 + child2(counter) * 2 ^ (i - 1)
            counter = counter - 1
        Loop
    Next i

    If fitvalchild1 > fitvalchild2 Then                        
        newChildfit = fitvalchild1                             
        For i = 1 To Chromolength
        newChildarr(i) = child1(i)                             
        Next i

    Else                                                       
        newChildfit = fitvalchild2                             
        For i = 1 To Chromolength
        newChildarr(i) = child2(i)                             
        Next i

    End If

Else                                                            
    newChildfit = FitValarr(rand1)                              
    For i = 1 To Chromolength
        newChildarr(i) = Poparr(rand1, i)                       
    Next i

End If 'end crossover 
```

错误在交叉代码中：

```
 If FitValarr(rand1) > FitValarr(rand2) Then 
```

我为长代码道歉。我对 VBA 还很陌生，但仍在苦苦挣扎。

# asp.net - 内置 ASP.NET 4 成员资格提供程序的源代码

> ID：12589457
> 
> 赞同：2
> 
> 时间：2012-09-25T19:03:36.670
> 
> 标签：asp.net, asp.net-membership

我想在 asp.net 会员提供程序中做一些修改，我找到[了内置 ASP.NET 2 的源代码](http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx)，但我想要内置 ASP.NET **4**

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:52:39.393

也许为时已晚，但希望它可以帮助寻找这个问题的人:)

在 ASP.NET 4 中，默认提供程序是 ExtendedMembershipProvider - 默认是 SimpleMembershipProvider，它们位于 WebMatrix 中。

您可以在 ASP.NET 源代码的 codeplex 中找到他们的源代码。

ExtendedMembershipProvider：[http ://aspnetwebstack.codeplex.com/SourceControl/changeset/view/553690ac9488#src/WebMatrix.WebData/ExtendedMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/553690ac9488#src/WebMatrix.WebData/ExtendedMembershipProvider.cs)

简单会员提供者；[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/553690ac9488#src/WebMatrix.WebData/SimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/553690ac9488#src/WebMatrix.WebData/SimpleMembershipProvider.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:49:43.110

使用[ILSpy](http://ilspy.net/)自己直接从程序集中提取源代码。

ILSpy 是一个程序集浏览器和反编译器工具，可帮助您通过重新翻译 MSIL 代码从任何 .NET 程序集重构代码。

您可以将 SQLMembershipProvider 用作您自己的提供者的模板，您可以在 GAC 的 System.Web.Security 中找到该模板。

除此之外，您可以通过搜索[ASP.NET 参考源](http://referencesource.microsoft.com/netframework.aspx)（这是已发布的 .NET 源代码，包括 .NET 4）来试试运气。但是我不确定安全类是否在那里。

# javascript - 我希望在相册照片页面上的上一个和下一个图像的缩略图之前加载主图像

> ID：12589460
> 
> 赞同：0
> 
> 时间：2012-09-25T19:03:44.093
> 
> 标签：javascript, jquery, css, html

所以，基本上我想以最低优先级加载（其他图像的）缩略图，以便用户在查看主图像时体验良好。

我想加载普通图像和页面的其余部分，然后当一切都完成后，缩略图可以花时间加载缩略图。

如何实现？一个简单的解决方案表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:12:40.830

据我所知，没有简单的解决方案。

您不能使用 JavaScript，因为您的用户可能禁用了脚本，因此根本无法看到图像。

您可以将所有图像放在一个文件中，并将它们视为[精灵](http://w3schools.com/css/css_image_sprites.asp)。这样，它们将同时加载……尽管这不是一个很好的解决方案。

至少确保设置图像的宽度和高度，以便页面布局在加载时不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:07:10.770

如果您知道缩略图的 url，则在 document.Ready 函数上设置图像标签的 src 属性或仅显示感知，您可以将缩略图隐藏到 document.ready 并使其在 document.ready 函数的末尾可见

# c - Windows下动态加载库的地址范围

> ID：12589461
> 
> 赞同：5
> 
> 时间：2012-09-25T19:03:45.300
> 
> 标签：c, windows, dll, process, loadlibrary

我有一个可以加载插件的工作程序[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)。

新要求：在代码中的某个点，给了我一个指针，我需要测试这个指针是指向代码还是插件的静态数据。

```
bool is_pointer_into_plugin(void *p, HMODULE h); 
```

同样，我需要检索指针指向的插件（如果有）。我还需要知道指针是否指向主程序的代码或静态数据（理想情况下，区分只读和读写区域）。

```
HMODULE plugin_containing_pointer(void *p); 
```

同样，我需要能够检索插件映射的范围（地址和大小）。我还需要主程序的这些信息。

我怎样才能实现`is_pointer_into_plugin`, 或`plugin_containing_pointer`, 或等效的东西？

`LoadLibrary`如有必要，我可以将呼叫更改为。查找应该尽可能快，加载时代码不需要很快。在单独的进程中运行插件并通过共享内存进行通信不是一种选择。该程序必须在 Windows XP 及更高版本（和 Linux，但这是[另一个问题](https://stackoverflow.com/questions/12589443/address-range-of-a-dynamically-loaded-library-under-linux)）上运行。

我需要的信息或多或少是 Sysinternals 实用程序[`listdlls`](http://technet.microsoft.com/en-us/sysinternals/bb896656.aspx)报告的，所以我试图找出它是如何实现的。我看到了一个[使用](http://forum.sysinternals.com/listdlls-functionality-or-source-code_topic21678.html)来[`NtQueryInformationProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684280%28v=vs.85%29.aspx)检索[`PEB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706%28v=vs.85%29.aspx)链接到[`LDR_DATA_TABLE_ENTRY`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813708%28v=vs.85%29.aspx). 看起来很有希望，但是：

*   我可以看到一个`DllBase`看起来可能是每个 DLL 的起始地址（是吗？），但没有大小。
*   的文档将`NtQueryInformationProcess`其标记为不可移植，但并没有为我正在尝试做的事情提供替代方案。
*   在我的系统上，只有and中`PEB`的字段，加上一些字节数组——这不是一个好兆头。`BeingDebugged``SessionId``Reserved*N*`

如何枚举插件的地址范围，或测试指针是否在插件内，或确定指针指向哪个插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T00:15:42.727

[`GetModuleHandleEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683200%28v=vs.85%29.aspx)带有`GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS`标志将告诉您指针指向哪个模块。从中您可以研究模块标题以确定哪个部分。但整个练习闻起来很有趣。你为什么关心指针指向哪个插件？

# objective-c - 如何添加带有本地化字符串的捆绑包？

> ID：12589465
> 
> 赞同：0
> 
> 时间：2012-09-25T19:04:06.830
> 
> 标签：objective-c, ios, localization

在 iOS 中，如果我创建一个包并将其添加到我的目标中，我认为我应该能够从中加载本地化字符串。目录结构应该是什么？目前我有：

```
mybundle.bundle/Contents/Resources/en.lproj/Localizable.strings 
```

我正在尝试像这样加载它们：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"mybundle" ofType:@"bundle"];
bundle = [NSBundle bundleWithPath:path];
[bundle localizedStringForKey:@"mykey" value:@"default value" table:nil]; 
```

这似乎不起作用。我可以看到捆绑包被复制到应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:48:32.057

我实际上是正确地做到了这一点。问题是我的 Localizable.strings 文件已损坏，与应用程序级别的本地化不同，Xcode 不会抱怨，只会失败。就我而言，我遗漏了一个分号。

# perl - 语句 $a &&= 的 perl 表达式含义；

> ID：12589467
> 
> 赞同：0
> 
> 时间：2012-09-25T19:04:18.190
> 
> 标签：perl

最近我在博客上看到了这个 Perl 表达式，无法抓住它的目的。

```
 my $success = 1; 
    $success &&= $insert_handle->execute($first, $last, $department); 
    $success &&= $update_handle->execute($department); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T19:07:11.493

```
EXPR1 &&= EXPR2; 
```

简称

```
EXPR1 = EXPR1 && EXPR2; 
```

（除了`EXPR1`只评估一次。*）

提供的代码

```
my $success = 1; 
$success &&= $insert_handle->execute($first, $last, $department); 
$success &&= $update_handle->execute($department); 
```

也可以写成：

```
my $success = 0;
if ($insert_handle->execute($first, $last, $department)) {
   if ($update_handle->execute($department)) {
      $success = 1;
   }
} 
```

或者

```
my $success = $insert_handle->execute($first, $last, $department)
           && $update_handle->execute($department); 
```

* * *

* - 如果`EXPR1`有副作用，这很重要，如果它是一个神奇的变量或左值子，这很可能发生。

```
my $x = 3;      # Prints:
print("$x\n");  # 3

sub x() :lvalue { print("x\n"); $x }

x &&= 4;        # x
print("$x\n");  # 4

x = x && 5;     # x x
print("$x\n");  # 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:10:36.717

这是一个很长的说法。

```
 my $success =
     $insert_handle->execute($first, $last, $department)
     && $update_handle->execute($department); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:05:53.220

可能 ： -

```
my $success = 1; 
$success = $success && $insert_handle->execute($first, $last, $department); 
$success = $success && $update_handle->execute($department); 
```

如同 ： -

```
a += b  
// is equivalent to
a = a + b 
```

# iphone - UITableView 对象泄露：分配的对象在此执行路径的后面没有被引用，并且保留计数为 +1

> ID：12589468
> 
> 赞同：0
> 
> 时间：2012-09-25T19:04:26.103
> 
> 标签：iphone, objective-c, memory-management, memory-leaks

当使用 Xcode 的分析工具时，我会收到以下内存泄漏警告`UITableView`-

```
Object leaked: allocated object is not referenced later in this execution path and has a retain count of +1 
```

```
 self.contentTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 300) style:UITableViewStyleGrouped];  
self.contentTableView.delegate = self;
self.contentTableView.dataSource = self;
self.contentTableView.scrollEnabled = NO;
self.contentTableView.backgroundColor = [AppDelegate appMainColor];
self.contentTableView.separatorColor = [UIColor whiteColor];
self.contentTableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
[self.view addSubview:self.contentTableView]; 
```

有人遇到过这个警告吗？解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:22:21.167

由于 ARC 不适合您，因此您需要遵循代码中的所有权规则。您已经使用 创建了一个对象`alloc`，因此您必须确保它`release`稍后获得。`autorelease`一种简单的方法是在实例化它并将其分配给您的属性时发送它，例如：

```
self.contentTableView = [[[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 300) style:UITableViewStyleGrouped] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:18:53.673

好吧，这是一个猜测。我很久没有研究过遗留目标了。我一直在后面的目标上进行部署。但是您可以使用`autorelease`或手动释放`UITableView`. 这样的事情可能会奏效，

```
self.contentTableView = [[[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 300) style:UITableViewStyleGrouped] autorelease]; 
```

或者，如果您使用的是属性，则在您的`dealloc`方法中释放，

```
[tableView release]; 
```

**注意**：我很久没有使用非 ARC 环境了，我的语法可能（很可能）是错误的，你必须解决语法问题。

# selenium - 如果从 iframe 内的链接/按钮打开新窗口，则 Selenium 选择窗口不起作用

> ID：12589472
> 
> 赞同：0
> 
> 时间：2012-09-25T19:04:47.207
> 
> 标签：selenium, selenium-rc

我的 Dom 结构就像

```
 <iframe id="frame1">
       <input type="button" onclick="openModalPopup"></input>
   </iframe> 
```

当我在 iframe 内点击此按钮时，selenium 打开 modalpopup ，但无法将控件移到那里？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:29:50.183

切换到默认帧（从当前帧移除焦点），然后尝试将控件移动到弹出窗口。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:49:56.753

[http://release.seleniumhq.org/selenium-core/1.0.1/reference.html](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)。在参考中搜索 iframe。您需要 selectFrame..只有这样您才能与之交互。

# ibm-mq - JMSDeliveryMode 和消息持久性

> ID：12589475
> 
> 赞同：1
> 
> 时间：2012-09-25T19:05:10.560
> 
> 标签：ibm-mq

这是[WebSphere MQ 和 Atomikos - Messages Lost on process terminate中继续讨论的一个问题](https://stackoverflow.com/q/12461572/910492)

JMS 字段中提到的 JMSDeliveryMode[和具有相应 MQMD 字段的属性](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=/com.ibm.mq.csqzaw.doc/uj25450_.htm)是否确定 MQ 消息是否持久？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:18:22.243

是的，只要使用 IBM 的 JMS 类将消息放在那里。这些类会将`JMSDeliveryMode`值转换为 WebSphere MQ 持久性值之一。

AC 程序可能会尝试设置或更改消息属性，以便它们与消息头不同，我不确定 WMQ API 是否会在这种情况下强制执行一致性。

但是，重申第一部分，答案是肯定的。链接的页面描述了 JMS 属性如何映射到本机 WMQ 标头，`JMSDeliveryMode`并且确实映射到`MQMD.Persistence`.

我注意到您指向 V6.0 信息中心的链接。希望您不再使用 WMQ V6.0，因为它会在几天后终止服务。相同信息的当前信息中心主题在[这里](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm25430_.htm)，您会发现它已重新组织并阐明了一些要点。我强烈建议至少迁移到 V7.1 客户端和 QMgr，最好是 V7.5——当然还有相应的 Infocenter。

**更新：**
回应评论，优先顺序如下：

1.  如果在托管对象对象定义中明确设置了持久性，如此处所述[，](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm41630_.htm)则它具有优先权。
2.  如果托管对象设置为`PERSISTENCE=APP`（默认），则应用程序的设置优先。
3.  如果托管对象和应用程序都没有明确设置持久性，那么默认是查看队列上的设置并使用它。

请注意，如果第一次放置消息的队列恰好是传输队列，则持久性在该点确定并随消息一起到达任何位置，即使远程目标队列设置为`DEFPSIST(NO)`.

如果您仔细查看第一个项目符号中链接的页面，您会注意到可能的持久性值 HIGH。该值的描述似乎已从书中删除（我会报告），但它在[此页面上](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm25200_.htm). 这是 JMS 的“尽力而为”的交付模式，介于 WMQ 的持久模式和非持久模式之间。由于没有本机等效项，WMQ 通过在标记为恢复的队列上使用非持久消息来实现这一点。当 QMgr 启动时，将保存队列中的所有非持久消息，假设关闭和启动正常且队列文件未损坏。即使在具有线性日志记录的 QMgr 上，也不会记录这些消息以进行媒体恢复，因此它们只有一个副本。因此，大多数情况下，这些消息在重新启动后仍然存在，但如果 QMgr 可以通过删除它们来解决任何情况，它就会解决。

请注意页面上的警告说，必须将消息通过的所有队列设置为`NPMCLASS(HIGH)`才能正常工作。我不确定如果消息在`NPMSPEED(NORMAL)`通过网络的途中进入队列时会发生什么，但您可能应该将它们视为非持久性的。

# java - 在 SilkTest 中处理 IE8 信息栏

> ID：12589477
> 
> 赞同：1
> 
> 时间：2012-09-25T19:05:17.527
> 
> 标签：java, internet-explorer-8, silktest

我正在使用 SilkTest 自动下载文件。在 IE8 中，会出现一个信息栏，上面写着“为了帮助保护您的安全，Internet Explorer 已被阻止...单击此处查看选项...”。我希望能够使用 SilkTest 来定位它。这可能吗？它是一个 DOM 元素吗？

顺便说一句，禁用该安全功能不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:30:33.777

据我所知，安全信息栏不是 DOM 元素。如果您拥有 Silk Test 的更新版本，则可以使用辅助功能支持来关闭信息栏。

**注意：**我作为 Silk Test 团队的一员在 Borland 工作，因此在这方面表达的任何意见都带有强烈的偏见。

# c++ - 在循环中重置循环

> ID：12589478
> 
> 赞同：0
> 
> 时间：2012-09-25T19:05:21.850
> 
> 标签：c++, stl, for-loop, unordered-map

我很好奇为什么下面的代码不能连续循环运行。而且我也在寻找一些方法来实现我想要实现的目标——即重置循环内部的循环。我需要这样做，因为我需要考虑容器中的每个元素。之所以这样，是因为我可能从中间开始，需要循环检查其他信息/并且还需要重新检查其他信息。继续我的小测试示例：

```
for ( int i = 0; i != 10; i++ ) {
    std::cout << std::endl << "TEST: " << i << std::endl;
    if ( i++ == 10 ) {
        i = 0;
    } else {
        i--;
    }
} 
```

上述方法不起作用有什么特别的原因吗？我很想知道为什么，所以我可以了解一切是如何运作的。这也导致了我面临的一个更大的问题。这是下面的代码。我正在使用 MSVC++ 2010 Express。此外，这是一个线程，因此其他数据无法访问它。它是一个使用 STL 的 unordered_map。如果 2（我检查过），它的大小。

```
for (game_player_client_map::const_iterator it = gpc_map_ptr->begin(); it != gpc_map_ptr->end(); ++it) {
    if ( it++ == gpc_map_ptr->end() ) {
        cout << endl << "IT == gpc_map_ptr->end()" << endl;
        it = gpc_map_ptr->begin();
    } else {
        it--;
    }
} 
```

我很感激 SO 必须提供的任何反馈，以及任何要学习的新东西 :-) 如果需要更多信息，我会提供。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:07:00.857

因为在进入循环体之前检查了条件。When ，循环被破坏，在你的代码可以在计算为 10`i == 10`的时间执行之前。`i++`

请记住，后增量递增变量并返回*旧值*。因此，如果`i`为 9，则`i++`计算结果也为 9，但下次使用`i`时，它将为 10。

如果您希望变量递增并在表达式中使用新值，请使用 preincrement：

```
if (++i == 10) // changes i to i + 1 and checks if the new value of i is 10 
```

但是，您可以完全放弃增量，而只需使用`i + 1`. 这样你就不必`i`在`else`块中递减。

您对后增量的误解可能也是您发布的第二个代码块中的错误来源。您可以将其更改为预增量，或者如果`it`是随机访问迭代器，您可以执行与上述相同的操作，并检查是否`it + 1 == gpc_map_ptr->end()`必须`it`在`else`块中减量。

# java - 如何在 Windows 7 环境中使用 Nginx 配置 Jboss AS 7

> ID：12589479
> 
> 赞同：3
> 
> 时间：2012-09-25T19:05:21.923
> 
> 标签：java, jboss, nginx, load-balancing, httpserver

可以任何一点一步一步的指导用nginx配置n个jboss AS7企业应用程序。假设我有网络服务器路径： C:\jboss-as-7.1.1.Final\ deploy @ C:\jboss-as-7.1.1.Final\standalone\deployments\HelloWorld.deployed AppContext url： `http://localhost:9090/HelloWorld`

我希望所有来自 nginx :80 的请求都指向

```
http://localhost:9090/HelloWorld 
```

笔记：

我 参考了[https://serverfault.com/questions/293348/configure-nginx-for-jboss-tomcat](https://serverfault.com/questions/293348/configure-nginx-for-jboss-tomcat) 仅显示一般信息。任何人都可以指向在 Jboss AS7 中以独立模式部署的 jboss ear 应用程序的实际配置（应用程序未部署为分解版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T23:14:14.400

像这样的配置会将 nginx 上的 localhost:80 代理到 jboss 上的 localhost:9090/HelloWorld/

```
server {
    listen       80;
    server_name  localhost; # or any other logical name
    client_max_body_size 10m; # not needed but useful
    charset utf-8;
    #access_log  /var/log/nginx/log/host.access.log  main; 

    location / {
        index  index.html index.htm;
        proxy_set_header Host $host;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass   http://localhost:9090/HelloWorld/;
        proxy_redirect default;
    }    
} 
```

# ruby-on-rails - 对于线程消息传递，不确定如何仅在未指定 thread_id 时生成唯一 thread_id

> ID：12589480
> 
> 赞同：0
> 
> 时间：2012-09-25T19:05:25.047
> 
> 标签：ruby-on-rails, postgresql, messaging

我希望这是一个相当普遍的问题，因为许多网站都使用线程消息传递，但我无法在互联网上找到任何东西。

基本上我设想这项工作的方式是我的消息表中有一个名为 thread_id 的列。该列不是唯一的，因为显然很多消息将共享同一个线程。我希望看到的是，当我插入一条新消息时，如果我指定一个 thread_id，它会按预期使用它，但如果我不这样做，它会通过自动递增最大值来使用下一个可用的 thread_id。

因此，如果我有一系列带有线程 id 的消息：1,1,2,2,3,2,2,3,3,4,2,5,3,3,3,4 然后我插入一行没有一个 id，它将使用 id 6。

这可能吗？如果不是，大多数人如何完成线程消息传递？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:28:02.747

您可以做的一件事是创建一个包装模型：

```
class Thread < ActiveRecord::Base
  has_many :messages
end 
```

充当消息的父级。这样，如果您知道要向哪个线程添加消息，只需调用`@thread.messages.create!(params[:message])`. 如果想将消息添加到新线程，您可以创建一个新线程并以相同的方式添加消息。您不必担心将递增的 thread_id 分配给消息，因为 Thread 模型会自动增加新线程的 id 并将其分配给消息。

此方法还允许您跟踪有关线程的信息，例如通过“created_at”列创建线程的时间，如果您对此感兴趣的话。

# python - 使用 pandas GroupBy.agg() 对同一列进行多个聚合

> ID：12589481
> 
> 赞同：200
> 
> 时间：2012-09-25T19:05:26.550
> 
> 标签：python, pandas, dataframe, aggregate, pandas-groupby

是否有 pandas 内置方法可以将两个不同的聚合函数`f1, f2`应用于同一列`df["returns"]`，而无需`agg()`多次调用？

示例数据框：

```
import pandas as pd
import datetime as dt
import numpy as np

pd.np.random.seed(0)
df = pd.DataFrame({
         "date"    :  [dt.date(2012, x, 1) for x in range(1, 11)], 
         "returns" :  0.05 * np.random.randn(10), 
         "dummy"   :  np.repeat(1, 10)
}) 
```

语法错误但直觉上正确的方法是：

```
# Assume `f1` and `f2` are defined for aggregating.
df.groupby("dummy").agg({"returns": f1, "returns": f2}) 
```

显然，Python 不允许重复键。有没有其他方式来表达输入`agg()`？也许元组列表`[(column, function)]`会更好，以允许将多个函数应用于同一列？但`agg()`似乎它只接受字典。

除了定义一个仅应用其中两个函数的辅助函数之外，还有其他解决方法吗？（无论如何，这将如何与聚合一起工作？）

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-11-27T20:57:33.097

您可以简单地将函数作为列表传递：

```
In [20]: df.groupby("dummy").agg({"returns": [np.mean, np.sum]})
Out[20]:         
           mean       sum
dummy                    
1      0.036901  0.369012 
```

或作为字典：

```
In [21]: df.groupby('dummy').agg({'returns':
                                  {'Mean': np.mean, 'Sum': np.sum}})
Out[21]: 
        returns          
           Mean       Sum
dummy                    
1      0.036901  0.369012 
```

为了避免弃用警告：

```
df.groupby('dummy').agg(Mean=('returns', np.mean),
                        Sum=('returns', np.sum)) 
```

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2019-01-22T01:50:41.690

TLDR；Pandas`groupby.agg`有一种新的、更简单的语法来指定 (1) 多列上的聚合，以及 (2) 列上的多个聚合。因此，要为**pandas >= 0.25**执行此操作，请使用

```
df.groupby('dummy').agg(Mean=('returns', 'mean'), Sum=('returns', 'sum'))

           Mean       Sum
dummy                    
1      0.036901  0.369012 
```

或者

```
df.groupby('dummy')['returns'].agg(Mean='mean', Sum='sum')

           Mean       Sum
dummy                    
1      0.036901  0.369012 
```

* * *

# Pandas >= 0.25：[命名聚合](https://pandas-docs.github.io/pandas-docs-travis/user_guide/groupby.html#named-aggregation)

Pandas 改变了 的行为，`GroupBy.agg`转而采用更直观的语法来指定命名聚合。请参阅[有关增强功能的 0.25 文档部分](https://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.25.0.html#enhancements)以及相关的 GitHub 问题[GH18366](https://github.com/pandas-dev/pandas/issues/18366)和[GH26512](https://github.com/pandas-dev/pandas/issues/26512)。

从文档中，

> 为了通过控制输出列名来支持特定于列的聚合，pandas 接受特殊语法 in `GroupBy.agg()`，称为“命名聚合”，其中
> 
> *   关键字是输出列名
> *   这些值是元组，其第一个元素是要选择的列，第二个元素是要应用于该列的聚合。Pandas 为 pandas.NamedAgg 命名元组提供了 ['column', 'aggfunc'] 字段，以便更清楚地了解参数是什么。像往常一样，聚合可以是可调用的或字符串别名。

您现在可以通过关键字参数传递一个元组。元组遵循`(<colName>, <aggFunc>)`.

```
import pandas as pd

pd.__version__                                                                                                                            
# '0.25.0.dev0+840.g989f912ee'

# Setup
df = pd.DataFrame({'kind': ['cat', 'dog', 'cat', 'dog'],
                   'height': [9.1, 6.0, 9.5, 34.0],
                   'weight': [7.9, 7.5, 9.9, 198.0]
})

df.groupby('kind').agg(
    max_height=('height', 'max'), min_weight=('weight', 'min'),)

      max_height  min_weight
kind                        
cat          9.5         7.9
dog         34.0         7.5 
```

或者，您可以使用`pd.NamedAgg`（本质上是一个命名元组）使事情更加明确。

```
df.groupby('kind').agg(
    max_height=pd.NamedAgg(column='height', aggfunc='max'), 
    min_weight=pd.NamedAgg(column='weight', aggfunc='min')
)

      max_height  min_weight
kind                        
cat          9.5         7.9
dog         34.0         7.5 
```

Series 更简单，只需将 aggfunc 传递给关键字参数即可。

```
df.groupby('kind')['height'].agg(max_height='max', min_height='min')    

      max_height  min_height
kind                        
cat          9.5         9.1
dog         34.0         6.0 
```

最后，如果您的列名不是有效的 python 标识符，请使用解包字典：

```
df.groupby('kind')['height'].agg(**{'max height': 'max', ...}) 
```

* * *

# 熊猫 < 0.25

在更新到 0.24 的 pandas 版本中，如果使用字典为聚合输出指定列名，您将获得`FutureWarning`：

```
df.groupby('dummy').agg({'returns': {'Mean': 'mean', 'Sum': 'sum'}})
# FutureWarning: using a dict with renaming is deprecated and will be removed 
# in a future version 
```

[在 v0.20 中不推荐使用字典重命名列。](http://pandas.pydata.org/pandas-docs/version/0.20/whatsnew.html#deprecate-groupby-agg-with-a-dictionary-when-renaming)在更新版本的 pandas 上，这可以通过传递元组列表更简单地指定。如果以这种方式指定函数，则该列的*所有*函数都需要指定为 (name, function) 对的元组。

```
df.groupby("dummy").agg({'returns': [('op1', 'sum'), ('op2', 'mean')]})

        returns          
            op1       op2
dummy                    
1      0.328953  0.032895 
```

或者，

```
df.groupby("dummy")['returns'].agg([('op1', 'sum'), ('op2', 'mean')])

            op1       op2
dummy                    
1      0.328953  0.032895 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T01:30:08.793

像这样的工作：

```
In [7]: df.groupby('dummy').returns.agg({'func1' : lambda x: x.sum(), 'func2' : lambda x: x.prod()})
Out[7]: 
              func2     func1
dummy                        
1     -4.263768e-16 -0.188565 
```

# python - Django 模型 - 两个表过滤器

> ID：12589482
> 
> 赞同：1
> 
> 时间：2012-09-25T19:05:29.023
> 
> 标签：python, django-models

编码：

```
class Article(models.Model):
    hits              = models.IntegerField(help_text = 'Visits count')
    answer_to_article = models.ForeignKey('self', blank = True, null = True)
    slug              = models.SlugField(unique = True, help_text = 'Address')
    meta_keywords     = models.CharField(max_length = 512)
    title             = models.CharField(max_length = 256)
    content           = models.TextField(verbose_name = 'Article contents', help_text = 'Article contents')

    def get_similar_articles_from_meta_and_relation(self, phrase, offset = 0, limit = 10):
        return ArticleToArticle.objects.find(article_one)[offset:limit]

    class Meta:
        db_table = 'article'

#only a relational table - one article can have similar articles chosen by it's author
class ArticleToArticle(models.Model):
    article_one = models.ForeignKey(Article, related_name = 'article_source')
    article_two = models.ForeignKey(Article, related_name = 'article_similar')

    class Meta:
        db_table = 'article_to_article' 
```

我的问题是关于文章模型中的 get_similar_articles_from_meta_and_relation 方法 - 我想： 1\. 找到与我的实例相关的其他文章 2\. 根据给定的短语（meta_keywords）过滤它们虽然我对前者没有问题，但我有后面有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:18:58.487

不确定 meta_keywords 和短语参数之间的关系是什么，但您可能想要类似于：

```
class Article(models.Model):
    hits              = models.IntegerField(help_text = 'Visits count')
    answer_to_article = models.ForeignKey('self', blank = True, null = True)
    slug              = models.SlugField(unique = True, help_text = 'Address')
    meta_keywords     = models.CharField(max_length = 512)
    title             = models.CharField(max_length = 256)
    content           = models.TextField(verbose_name = 'Article contents', help_text = 'Article contents')
    similar_articles  = models.ManyToMany('self')

    def get_similar_articles_from_meta_and_relation(self, phrase, offset = 0, limit = 10):
        return self.similar_articles.filter(meta_keywords=phrase)[offset:limit]

    class Meta:
        db_table = 'article' 
```

# php - PHP sleep 强制慢查询

> ID：12589485
> 
> 赞同：1
> 
> 时间：2012-09-25T19:05:38.823
> 
> 标签：php, mysql, zend-framework, sleep

我遇到了我遇到的问题

一个插入然后 sleep(25) 然后第二个插入。

第一次插入的日期时间总是与第二次插入的日期时间匹配。

问题是两个插入在睡眠后同时发生。所以我为第二个插入设置了一个条件，检查第一个插入，但问题就在那里。我正在使用 Zend DB 选择。

注意：我也尝试过 live()->query($sql) 并得到相同的结果

```
 $sql = "insert into leads_verify
            (customer, lead_id,dt)
            values
            ('2'
            ,'111'
            ,'". date("Y-m-d H:i:s")."')";

            $queryResult = Db::live()->exec($sql);

            if($queryResult <> '5' ){
                sleep(24);
            }

            $sql2 = "insert into leads_verify
            (customer, lead_id,dt)
            values
            ('3'
            ,'222'
            ,'". date("Y-m-d H:i:s")."')";

                          $queryResult = Db::live()->exec($sql2); 
```

两者的插入日期时间始终相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:12:19.913

你在 Zend 中使用事务吗？

那么你需要提交你的陈述：

```
Db::live()->commit(); 
```

顺便说一句：
如果该`dt`字段的类型为`DATE`ore `DATETIME`，您可以使用`Now()`而不是`'". date("Y-m-d H:i:s")."'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:59:30.533

我使用的解决方案是使用 mysql_query 连接并以这种方式运行 sql。谢谢大家

# android - AudioRecord：获取缓冲区超时

> ID：12589489
> 
> 赞同：3
> 
> 时间：2012-09-25T19:05:47.093
> 
> 标签：android, audio-recording, android-audiorecord

我的应用程序经常出现以下错误：

```
09-25 15:52:24.875: E/AudioHardware(144): -----AudioStreamInALSA::read(0x42db0040, 512) END ERROR
09-25 15:52:24.875: E/AudioFlinger(144): Error reading audio input
09-25 15:52:24.882: D/AudioHardware(144): AudioStreamInALSA::setParameters() routing=0
09-25 15:52:25.394: W/AudioRecord(7359): obtainBuffer timed out (is the CPU pegged?) user=00000000, server=00000000
09-25 15:52:25.398: D/AudioHardware(144): AudioStreamInALSA::setParameters() input_source=1;routing=262144 
```

我创建 AudioRecord 实例的代码是：

```
int minValue = AudioRecord.getMinBufferSize(sampleRate,
        AudioFormat.CHANNEL_IN_MONO, 
        AudioFormat.ENCODING_PCM_16BIT);

// Gets a buffer size that is greater than the minimun required and is multiple of the chunk size
BUFFER_SIZE_IN_BYTES = getBufferSizeInChunks(minValue);

AudioRecord audioRecord =  new AudioRecord(
        MediaRecorder.AudioSource.MIC,
        sampleRate,
        AudioFormat.CHANNEL_IN_MONO,
        AudioFormat.ENCODING_PCM_16BIT ,
        BUFFER_SIZE_IN_BYTES ); 
```

像这样的 AudioRecord 实例：

```
@Override
public void run() {
    try{
        android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

        recorder = initAudioRecord();
        if (recorder.getState() != AudioRecord.STATE_INITIALIZED) {
            return;
        }

        // Audio input buffer
        byte[] audio_data = new byte[BUFFER_SIZE_IN_BYTES];

        while (!Thread.interrupted() && keepRunning) {
            recorder.startRecording();
            recorder.read(audio_data, 0, BUFFER_SIZE_IN_BYTES);

            recorder.stop();

                // Here I deal with the audio_data ...

                // UI feedback
                PostToUI(frequency);

            }

    }
    catch(Exception e){
        e.printStackTrace();
    }
}

private void PostToUI(final double frequency) {
    handler.post(new Runnable() {
        public void run() {
            uiHandler.updateUi(frequency);
        }
    });
} 
```

如图所示，一个单独的线程不断处理音频输入（只要`onPause()`不调用 Activity）

有人有线索吗？

**完整日志：**

```
09-27 14:05:29.246: D/AudioHardware(144): AudioStreamInALSA::setParameters() input_source=1;routing=262144
09-27 14:05:29.246: V/AudioHardware(144): openMixer_l() mMixerOpenCnt: 0
09-27 14:05:29.246: V/AudioHardware(144): setInputSource_l(1)
09-27 14:05:29.246: V/AudioHardware(144): closeMixer_l() mMixerOpenCnt: 1
09-27 14:05:29.246: D/AudioHardware(144): AudioHardware pcm capture is exiting standby.
09-27 14:05:29.246: V/AudioHardware(144): AudioStreamInALSA exit standby mNeedEchoReference 0 mEchoReference 0x0
09-27 14:05:29.246: V/AudioHardware(144): open pcm_in driver
09-27 14:05:29.312: V/AudioHardware(144): openMixer_l() mMixerOpenCnt: 0
09-27 14:05:29.312: V/AudioHardware(144): read() wakeup setting route Main Mic
09-27 14:05:41.593: D/Finsky(12273): [1] 5.onFinished: Installation state replication succeeded.
09-27 14:05:49.332: W/AudioHardware(144): read error: -1
09-27 14:05:49.332: D/AudioHardware(144): AudioHardware pcm capture is going to standby.
09-27 14:05:49.332: V/AudioHardware(144): closeMixer_l() mMixerOpenCnt: 1
09-27 14:05:49.375: E/AudioHardware(144): -----AudioStreamInALSA::read(0x42b2d040, 512) END ERROR
09-27 14:05:49.375: E/AudioFlinger(144): Error reading audio input
09-27 14:05:49.386: D/AudioHardware(144): AudioStreamInALSA::setParameters() routing=0
09-27 14:05:49.906: W/AudioRecord(13013): obtainBuffer timed out (is the CPU pegged?) user=00000000, server=00000000
09-27 14:05:49.910: D/AudioHardware(144): AudioStreamInALSA::setParameters() input_source=1;routing=262144
09-27 14:05:49.914: V/AudioHardware(144): openMixer_l() mMixerOpenCnt: 0
09-27 14:05:49.914: V/AudioHardware(144): setInputSource_l(1)
09-27 14:05:49.914: V/AudioHardware(144): closeMixer_l() mMixerOpenCnt: 1
09-27 14:05:49.921: D/AudioHardware(144): AudioHardware pcm capture is exiting standby.
09-27 14:05:49.921: V/AudioHardware(144): AudioStreamInALSA exit standby mNeedEchoReference 0 mEchoReference 0x0
09-27 14:05:49.921: V/AudioHardware(144): open pcm_in driver
09-27 14:05:50.000: V/AudioHardware(144): openMixer_l() mMixerOpenCnt: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:15:57.553

有什么原因，为什么你不断地打开和关闭录音机？我会这样说：

```
 // Audio input buffer
    byte[] audio_data = new byte[BUFFER_SIZE_IN_BYTES];

    recorder.startRecording();
    while (!Thread.interrupted() && keepRunning) {
        recorder.read(audio_data, 0, BUFFER_SIZE_IN_BYTES);
            // Here I deal with the audio_data ...
            // UI feedback
            PostToUI(frequency);
    }
    recorder.stop(); 
```

我可以想象，记录器可以提供的不仅仅是缓冲区大小，但你总是只读取那个数量的字节。

在我的应用程序中，我有一些方法可以从我的 run() 方法之外启动和停止记录器（我认为您在设置 keepRunning 时也这样做）。当在其他地方停止记录器时，你只需要像这样调整你的while循环：

```
while(recorder.getRecordingState() == AudioRecord.RECORDSTATE_RECORDING){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:07:35.760

我有类似的问题。不幸的是，我不得不用 AudioRecord 创建多个线程，所以使用`while(recorder.getRecordingState() == AudioRecord.RECORDSTATE_RECORDING){`没有帮助:(

最后我挖掘了这个话题：[Android AudioRecord - Won't Initialize 2nd time](https://stackoverflow.com/questions/5139739/android-audiorecord-wont-initialize-2nd-time) and after `audioRecord.release();`works fine :)

也许它会在未来帮助某人......

# activemq - Tibco EMS 是否支持代理网络？

> ID：12589490
> 
> 赞同：0
> 
> 时间：2012-09-25T19:05:50.823
> 
> 标签：activemq, tibco-ems

Tibco EMS 是否支持类似于 ActiveMQ 的“代理网络”拓扑？或者任何其他类似的功能来支持分布式队列和主题的可扩展设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:26:09.357

是的，TibcoEMS 支持分布式队列和主题。

# java - 将 JLabel 中的文本右对齐

> ID：12589494
> 
> 赞同：53
> 
> 时间：2012-09-25T19:06:16.917
> 
> 标签：java, jpanel, jlabel, text-alignment

我有一个 JPanel，其中一些 JLabel 是通过`add()`JPanel 的方法添加的。我想将 JLabel 向右对齐，如下图所示，但我不知道该怎么做。任何的想法？谢谢！

![在此处输入图像描述](../Images/f56cef4fcff59cd08a36415926c83802.png)

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-25T19:14:47.957

这可以通过两种方式完成。

**JLabel 水平对齐**

您可以使用`JLabel` [构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#JLabel%28java.lang.String,%20int%29)：

```
JLabel(String text, int horizontalAlignment) 
```

要向右对齐：

```
JLabel label = new JLabel("Telephone", SwingConstants.RIGHT); 
```

`JLabel`还有`setHorizontalAlignment`：

```
label.setHorizontalAlignment(SwingConstants.RIGHT); 
```

这假设组件占据了容器中的整个宽度。

**使用布局**

另一种方法是使用布局将组件实际对齐到右侧，同时确保它们不会占据整个宽度。这是一个例子`BoxLayout`：

```
 Box box = Box.createVerticalBox();
    JLabel label1 = new JLabel("test1, the beginning");
    label1.setAlignmentX(Component.RIGHT_ALIGNMENT);
    box.add(label1);

    JLabel label2 = new JLabel("test2, some more");
    label2.setAlignmentX(Component.RIGHT_ALIGNMENT);
    box.add(label2);

    JLabel label3 = new JLabel("test3");
    label3.setAlignmentX(Component.RIGHT_ALIGNMENT);
    box.add(label3);

    add(box); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T19:13:41.017

```
JLabel label = new JLabel("fax", SwingConstants.RIGHT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-15T11:36:53.677

在我看来，您的实际意图似乎是将不同的词放在不同的行上。但是让我回答你的第一个问题：

```
JLabel lab=new JLabel("text");
lab.setHorizontalAlignment(SwingConstants.LEFT); 
```

如果你有一张图片：

```
JLabel lab=new Jlabel("text");
lab.setIcon(new ImageIcon("path//img.png"));
lab.setHorizontalTextPosition(SwingConstants.LEFT); 
```

但是，我相信你想让标签在 1 行上只有 2 个单词。

在这种情况下，试试这个：

```
String urText="<html>You can<br>use basic HTML<br>in Swing<br> components," 
   +"Hope<br> I helped!";
JLabel lac=new JLabel(urText);
lac.setAlignmentX(Component.RIGHT_ALIGNMENT); 
```

# r - 通过匹配 R 中的 3 列来合并两个数据对象

> ID：12589496
> 
> 赞同：1
> 
> 时间：2012-09-25T19:06:34.080
> 
> 标签：r

`segs2`我在两个数据对象（和）中有两个文件和以下列（下面给出的是列名`tn`）。

```
names(cbind(segs2[,2:6]))
[1] "chrom"     "loc.start" "loc.end"   "num.mark"  "seg.mean" 

names(cbind(tn[,4:10]))
[1] "num_positions"      "normal_depth"       "tumor_depth"        "adjusted_log_ratio"
[5] "gc_content"         "region_call"        "raw_ratio"  

names(cbind(tn[,1:10]))
 [1] "chrom"              "chr_start"          "chr_stop"           "num_positions"     
 [5] "normal_depth"       "tumor_depth"        "adjusted_log_ratio" "gc_content"        
 [9] "region_call"        "raw_ratio" 
```

我尝试按染色体合并，开始和停止位置在两个文件中都很常见，但标题名称不同（合适的脚本将有助于自动分析许多文件）；

> filenum <- cbind(segs2[,2:6], tn[,1:10], by=c("chrom","loc.start","loc.end","chr_start","chr_stop"))

data.frame(..., check.names = FALSE) 中的错误：参数暗示不同的行数：1146、829244、5

```
file_num <- cbind(segs2[,2:6], tn[,1:10], by=c("chrom","loc.start","loc.end","chrom","chr_start","chr_stop"), check.names=TRUE) 
```

但是这没有用，有替代方法吗？

谢谢

乌玛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:30:21.620

正如 mplourde 所提到的，我认为你想要的是：

```
merge(segs2, tn, 
      by.x=c("chrom", "loc.start", "loc.end"),
      by.y=c("chrom", "chr_start", "chr_stop")) 
```

如果名称不同，您可以使用`by.x`and`by.y`指定应匹配哪些列。

# solr - solr 过滤器查询包含空格并且破折号不会返回结果

> ID：12589503
> 
> 赞同：0
> 
> 时间：2012-09-25T19:07:09.593
> 
> 标签：solr

我有一个 solr 查询具有以下过滤器查询：

fq= 类别：鞋类 - 男装

我知道我需要在那里转义空格和特殊的 solr char，所以我将 java 字符串转换为：

鞋类// //-// 男装（将所有 ' ' 替换为 '// ' 并将所有 '-' 替换为 '//-'

但没有用。有人可以告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:10:59.503

我认为您应该使用 \ 而不是 /，因为 \ 是转义字符。

那就是：`Footwear\\ \\-\\ Men's`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:12:53.790

如果您使用 java 客户端连接和查询 SOLR 索引，我建议使用`ClientUtils`该类来转义您的输入。

# php - 在 PHP 中散列字符串的绝对最快方法

> ID：12589507
> 
> 赞同：1
> 
> 时间：2012-09-25T19:07:19.463
> 
> 标签：php

在 PHP 中散列字符串的绝对最快方法是什么？

我读过 md5 可能相对较慢，但不确定替代方案。

基本上，我有一个函数，我需要从该函数中挤出所有可能的性能，我有一个字符串说“yada yada yada”，我需要以某种方式对其进行哈希处理，以便它成为一个字符串。

我应该注意，这里的安全性不是问题——我只需要一个唯一的字符串表示，作为缓存键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:08:40.653

哈希的全部意义在于它并不快。哈希值越快，它被破解的速度就越快。

按照这种逻辑，散列越不安全 - 它就会越快。如果您要支持这种逻辑，我建议您要么停止正在做的事情，要么改用加密。

## 响应您的更新

听起来你可能想要一个[`CRC`](http://en.wikipedia.org/wiki/Cyclic_redundancy_check). 再次值得一提的是，通常检查越快，特定算法的组合就越少，因此它不太可能是“唯一表示”。

相关的 PHP 文档可以在这里找到：[`hash function with crc32/crc32b`](http://php.net/manual/en/function.hash.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:10:19.167

[基准](http://www.php.net/manual/en/function.hash.php#89574)。我似乎记得在某处读过这取决于您的 apache 和 PHP 版本，但不记得在哪里。如果我记得我会发布:)

# ms-access - 创建查询时 MS Access 堆栈空间不足

> ID：12589508
> 
> 赞同：3
> 
> 时间：2012-09-25T19:07:23.983
> 
> 标签：ms-access, vba

我正在尝试创建一个 Access 数据库，它将多个结构相同的数据库链接在一起。这些其他数据库是从具有相同表的 3D 模型导出的，但每个数据库中的数据不同。我需要做的是从所有数据库中报告，就像它们是一个大数据库一样。我认为我会如何处理这个问题是创建查询，将每个数据库中的单个相同表合并为一个查询，然后我可以在所有其他报告中使用它。我编写的将表格连接在一起的代码如下。我遇到的麻烦是，这段代码在“Set QueryDef ...”行上给了我一个堆栈空间不足的错误。有人可以告诉我我做错了什么吗？

```
Public Sub CreateUnionQueries()
'On Error GoTo Err_CreateUnionQueries
Dim QueryRs As DAO.Recordset
Dim TableRs As DAO.Recordset
Dim QueryDef As DAO.QueryDef
Dim SQLText As String
Dim qry As QueryDef

'Get list of all Foreign Table Names
Set QueryRs = CurrentDb.OpenRecordset("select distinct ForeignName from msysobjects where ForeignName is not null")

'Loop over list to create union queries
If QueryRs.RecordCount <> 0 Then
    Do While Not QueryRs.EOF
        Set TableRs = CurrentDb.OpenRecordset("select Name from msysobjects where ForeignName = """ & QueryRs![ForeignName] & """")
        Do While Not TableRs.EOF
            SQLText = SQLText & "select * from " & TableRs![Name]
            TableRs.MoveNext
            If Not TableRs.EOF Then
                SQLText = SQLText & " UNION ALL "
            End If
        Loop
        'Create union query
        For Each qry In CurrentDb.QueryDefs
            If qry.Name = "Q-" & QueryRs![ForeignName] Then
               DoCmd.DeleteObject acQuery, "Q-" & QueryRs![ForeignName]
            End If
        Next qry
        Set QueryDef = CurrentDb.CreateQueryDef("Q-" & QueryRs![ForeignName], SQLText)
        QueryDef.Close
        Set QueryDef = Nothing
        QueryRs.MoveNext
        TableRs.Close
        Set TableRs = Nothing
    Loop
Else
    MsgBox "No files are linked currently"
End If

QueryRs.Close

Err_CreateUnionQueries:
    MsgBox "We have an error"
    Set QueryRs = Nothing
    Set TableRs = Nothing
    Exit Sub
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:04:40.230

哦，伙计，我是个白痴。发现了问题。当我循环时，我没有将 SQLText 设置回空，所以它将我对表组的查询附加到最后一个。删除了它，现在它按预期工作。谢谢你们的帮助。

# emacs - 防止键映射上的键绑定隐藏全局键绑定

> ID：12589511
> 
> 赞同：0
> 
> 时间：2012-09-25T19:07:26.980
> 
> 标签：emacs, keyboard

我想将以下键序列绑定 `C-x r l` 到一个名为`helm-bookmarks`.

据我了解，我可以使用触发的键映射来执行此操作`C-x`，例如

```
(define-prefix-command 'my_sense_map)
(global-set-key (kbd "C-x") 'my_sense_map)
(define-key my_sense_map (kbd "r l") 'helm-bookmarks) 
```

但这会影响我所有的其他绑定（例如`C-x 2`或`C-x 3`用于窗口拆分），即它们停止工作。

如何 `C-x r l` 在`'helm-bookmarks` **不**更改任何其他键绑定的情况下绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:54:18.780

您需要做的就是将`C-x``r``l`当前全局地图中的绑定设置为`helm-bookmarks`：

```
(global-set-key (kbd "C-x r l") 'helm-bookmarks) 
```

Emacs 定义`C-x`为前缀键，它使用存储在变量中的键映射`ctl-x-map`，其中包含以 . 开头的键序列的大多数绑定`C-x`。如果您重新定义它以使其使用没有条目的新键盘映射，您将丢失所有存储在`ctl-x-map`.

# java - 声明式 Spring 缓存定制

> ID：12589516
> 
> 赞同：0
> 
> 时间：2012-09-25T19:08:15.183
> 
> 标签：java, spring, caching, spring-mvc, ehcache

我在我的项目中使用基于 Spring Declarative Annotation 的缓存。

应用程序上下文.xml

```
<cache:annotation-driven /> 
```

目前，使用基于 spring 注释的缓存，一切都可以完美运行。我们在开发和本地环境中使用`ehCache`和`ConcurrentHashMap`基于下划线缓存机制。

现在项目中有一个需求，我需要根据一些特定的业务需求来更新 Spring 缓存框架的行为。

我想知道是否有人帮我弄清楚我该如何更换

```
<cache:annotation-driven /> 
```

这个注释带有任何可以自定义行为的弹簧类定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:32:52.537

查看 org.springframework.cache.annotation.EnableCaching。查看源代码中的注释。

它相当于 < cache:annotation-driven /> 但在 spring java config 中。

你将需要重写这个类：org.springframework.cache.aspectj.AnnotationCacheAspect

它负责将通知接线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:29:18.723

这个答案引导我朝着正确的方向前进。我发现 spring 缓存支持的内部工作原理是它没有在 cacheManager 和 KeyGenerator 实现之外注入依赖项。我想子类化/扩展 CacheAspectSupport，发现这个类首先由 CacheInterceptor 扩展，然后使用类 ProxyCachingConfiguration 中的新语句创建该类。为了能够替换一个类/方法，需要替换一个听起来不太友好的类的整个列表（诚然，我可能会遗漏一些东西）。

我对替换行的期望是一组完全列出的 spring bean，它们组成了构成缓存支持的所有 AOP 切入点、建议/方面等，但似乎这只是静态创建的类之间紧密耦合。

# android - 标记“TextView”的语法错误，需要导入

> ID：12589517
> 
> 赞同：1
> 
> 时间：2012-09-25T19:08:17.870
> 
> 标签：android, syntax-error, android-edittext, textview

令牌“TextView”的语法错误，需要导入。
标记“EditText”的语法错误，需要导入。

我是新来的。为什么我会收到这些语法错误？

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;

TextView TextOut;
EditText getInput; 
```

# php - 如何在 PHP 中获取字符串中的最后一个数字？

> ID：12589519
> 
> 赞同：13
> 
> 时间：2012-09-25T19:08:21.127
> 
> 标签：php, regex

我怎样才能得到`23`而不是`1`for `$lastnum1`？

```
$text = "1 out of 23";
$lastnum1 = $this->getEval(eregi_replace("[^* out of]", '', $text)); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T19:11:26.663

你可以这样做：

```
$text = "1 out of 23";
if(preg_match_all('/\d+/', $text, $numbers))
    $lastnum = end($numbers[0]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:10:53.343

```
$text = "1 out of 23";
$ex = explode(' ',$text);
$last = end($ex); 
```

如果你想确定最后一个是数字

```
if (is_numeric(end($ex))) {
    $last = end($ex);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T11:38:34.720

另一种方法：

```
$text = "1 out of 23";
preg_match('/(\d+)\D*$/', $text, $m);
$lastnum = $m[1]; 
```

这将匹配字符串中的最后一个数字，即使它后面跟着非数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T19:11:35.173

用于`preg_match`将值提取到`$matches`：

```
preg_match("/([0-9]+) out of ([0-9]+)/", $text, $matches); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T19:11:55.220

```
$text = '1 out of 23';
preg_match('/\d+ out of (\d+)/', $text, $matches);
$lastnum1 = $matches[1]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T19:12:12.677

如果格式相同，为什么不分解字符串并转换最后一个？

```
<?php
$text = "1 out of 23";
$words = explode(" ",$text);
$lastnum = (int)array_pop($words); 
```

# python - 类方法的最小装饰器

> ID：12589522
> 
> 赞同：2
> 
> 时间：2012-09-25T19:08:33.157
> 
> 标签：python, decorator

我从这样的事情开始：

```
class Client (object):
    def __init__ (self):
        self.state = None
    def open (self, destination):
        if self.state not in [None]: raise error ...
        ... open stuff ...
        self.state = 'Open'
    def handle (self):
        if self.state not in ['Open'] raise error ...
        ... handle stuff ...
    def close (self):
        if self.state not in ['Open'] raise error ...
        ... close stuff ...
        self.state = None 
```

（我对拥有单独的`__init__()`和`open()`方法不满意，但我所称的东西需要这样，恐怕。无论如何，这不是我的问题的核心。）

现在，随着方法和状态的数量越来越多，我想我应该重构成这样的东西：

```
 @states([None])
    def open (self, destination):
        ... open stuff ... 
```

对于其他方法也是如此。基于例如[这个经典的SO答案](https://stackoverflow.com/a/739665/874188)，我为装饰器提出了以下定义：

```
from functools import wraps

def states (statelist):
    def decorator (f):
        @wraps(f)   # In order to preserve docstrings, etc.
        def wrapped (self, *args, **kwargs):
            if self.state not in statelist: raise error ...
            return f(self, *args, **kwargs)
        return wrapped
    return decorator 
```

这是相当复杂的，并且还有一个问题是它不会被派生类继承（我的解决方案是简单地将其设为全局）。我的问题是：这是解决这个问题的最小的、惯用的解决方案，还是我做错了什么？这是我第一次尝试定义自己的装饰器。我发现的各种参考资料（包括指向我的参考资料）似乎向我不知情的自己暗示，[这](https://stackoverflow.com/a/3704434/874188)`wraps`确实是必须的。（或者是否有一个漂亮的库为我封装了这种扭曲？快速浏览了一下，`functools`但我不能说我真的理解文档，无论如何，漂亮的东西似乎> = 2.6，而我需要支持Python 2.5 还有一段时间......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:35:14.017

是的——这个解决方案非常接近你所能得到的简单——而且它是可读的。

你应该去做 - 另一种方法是学习“ [Aspect Oriente](https://en.wikipedia.org/wiki/Aspect-oriented_programming) d”编程，并检查可用的 Python 库以使用方面方向 - AO 的用例或多或少是这样的：将样板代码添加到所有具有共同特征。（在 Python 中，这只是使用适当模块的问题，不需要像 Java 那样为语言的超集使用替代编译器）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:58:23.903

我会将其修改为：

```
def states(*states):
    def decorator (f):
        @wraps(f)   # In order to preserve docstrings, etc.
        def wrapped(self, *args, **kwargs):
            if self.state not in states: raise error ...
            return f(self, *args, **kwargs)
        return wrapped
    return decorator 
```

这样可以节省您键入方括号的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:50:52.667

您可以使用状态模式：

```
class AlreadyClosedError(Exception): pass
class AlreadyOpenError(Exception): pass

class Client(object):

    def __init__(self):
        self._change_state(Closed)

    def _change_state(self, state):
        self.__class__ = state

class Closed(Client):

    def open(self, destination):
        # opening stuff, and if successful:
        self._change_state(Open)

    def handle(self):
        raise AlreadyClosedError()

    def close(self):
        raise AlreadyClosedError()

class Open(Client):

    def open(self, destination):
        raise AlreadyOpenError()

    def handle(self):
        """ handling stuff """

    def close(self):
        # closing stuff, and if successful:
        self._change_state(Closed) 
```

四人帮一书以不同的方式实现了状态模式。在那里，有状态对象持有对状态的引用，并且所有相关调用都被重定向到该状态。但作者还解释说，这种有状态的对象“似乎在运行时改变了它的类”。在 Python 中，由于它的动态性，我们不需要在运行时模拟类的更改，就像我们必须在动态性较低的语言中那样，而是完全这样做。只有两个状态可能是多余的，但是当您添加更多状态并具有更复杂的转换规则时，它有助于保持方法的简短和简单。每个类都代表对象可以处于的特定状态，如果您的转换正确，您可以将其视为不变量。

# javascript - 如何使用 jQuery 检测 HTML 元素是否消失？

> ID：12589524
> 
> 赞同：1
> 
> 时间：2012-09-25T19:08:36.080
> 
> 标签：javascript, jquery, greasemonkey, userscripts, mutation-observers

在用户脚本中，我使用[`waitForKeyElements()`](https://gist.github.com/2625891).
但是，我遇到了一个特定示例，该示例`waitForKeyElements`不能可靠地触发更改。
我的用户脚本会调整`theirID`以插入内部跨度，例如您在此处看到的：

```
<span id='theirID' class='myclass'>
  <span class='myclass2'>text</span> more text
</span> 
```

然后该站点更改此代码以删除我的内部跨度，因此它看起来像：

```
<span id='theirID' class='myclass'>
  some text
</span> 
```

出于某种原因，在某些情况下，`waitForKeyElements`只是不会被该更改触发。我试图检测外部跨度、内部跨度、外部跨度的父级、其父级等的变化。

所以我现在想知道是否有其他方法可以检测，例如，元素 w/ `myclass2`（内部跨度）是否消失了？我想我可以投票`$('.myclass2').length`，但我不知道它从文件中的哪个位置消失了。理想情况下，我会知道持有现在丢失物品的特定父母。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:14:44.177

这里有两个答案，一个针对这种特定情况（您正在使用`waitForKeyElements`，另一个针对一般情况。

# 对于这种特定情况：

由于您`waitForKeyElements()`已经在使用，您可以利用节点处理程序中的返回值。

假设目标页面最初有这样的 HTML：

```
<span id='theirID1' class='myclass'>
    Original text 1.
</span> 
```

你的脚本`waitForKeyElements()`是这样使用的：

```
waitForKeyElements ("span.myclass", wrapImportantWords);

function wrapImportantWords (jNode) {
    var newContent  = jNode.text ().replace (/Original/ig, "<span class='myclass2'>My GM</span>");
    jNode.html (newContent);
} 
```

产量：

```
<span class="myclass" id="theirID1">
    <span class="myclass2">My GM</span> text 1.
</span> 
```

然后，您可以：

1.  有`wrapImportantWords`返回`true`- 这`waitForKeyElements`表明该节点毕竟没有找到，所以它一直在检查。
2.  让该功能还检查是否`span.myclass2`（仍然）存在适当的功能。

像这样：

```
waitForKeyElements ("span.myclass", wrapImportantWords);

function wrapImportantWords (jNode) {
    if (jNode.has ("span.myclass2").length == 0) {
        var newContent  = jNode.text ().replace (/Original/ig, "<span class='myclass2'>My GM</span>");
        jNode.html (newContent);
    }
    return true;
} 
```

* * *

# [使用新的MutationObserver](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)通常检测消失的元素：

在您的具体情况下，这似乎是矫枉过正。但是，这里有一个一般参考的方法。

笔记：

1.  如果你想检测一个节点是否被删除，你必须在它的*parent*上设置观察者。当节点本身被删除或完全重写时，突变记录似乎不可用。
    在这种情况下，我们想知道`span.myclass2`s 什么时候被删除，所以我们观察它们的父母 ( `span.myclass`)。
2.  [据称，*突变摘要*库](http://code.google.com/p/mutation-summary/)使这更容易。

这是**一个完整的 Firefox Greasemonkey 脚本**。您可以针对[**此页面**](http://jsbin.com/exigal/1)对其进行测试。（请注意，Chrome 代码是相同的，只是由于缺少`@require`.）

```
// ==UserScript==
// @name     _Node watcher 1
// @include  http://jsbin.com/exigal/*
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("span.myclass", wrapImportantWords);

function wrapImportantWords (jNode) {
    var newContent  = jNode.text ().replace (
        /Original/ig, "<span class='myclass2'>My GM</span>"
    );
    jNode.html (newContent);
}

/*--- Start of Mutation observer code...
*/
var targetNodes      = $("span.myclass");
var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;
var myObserver       = new MutationObserver (mutationHandler);
var obsConfig        = {
    childList: true, characterData: true, attributes: true, subtree: true
};

//--- Add a target node to the observer. Can only add one node at a time.
targetNodes.each ( function () {
    myObserver.observe (this, obsConfig);
} );

function mutationHandler (mutationRecords) {

    mutationRecords.forEach ( function (mutation) {

        if (    mutation.type                == "childList"
            &&  typeof mutation.removedNodes == "object"
        ) {
            var remdNodes       = $(mutation.removedNodes);
            if (remdNodes.is ("span.myclass2") ) {
                console.log ("Desired node was deleted!   Restoring...");
                var targNode    = $(mutation.target);
                wrapImportantWords (targNode);
            }
        }
    } );
} 
```

# git - 使用 KDiff3 通过 Git 编辑差异

> ID：12589527
> 
> 赞同：15
> 
> 时间：2012-09-25T19:08:47.977
> 
> 标签：git, kdiff3

通常当我做差异时，我想在提交之前编辑我的本地文件。这在 Eclipse 的比较视图中非常有效，因为它允许您轻松地编辑本地文件以及复制以前版本的更改。

我正在尝试将 Git 和 KDiff3 设置为以相同的方式工作。当我使用 KDiff3 作为我的合并工具时，它按预期工作。但是，当我将它设置为 difftool 时，它给了我一个只读视图，所以我无法进行任何编辑。根据文档（[http://kdiff3.sourceforge.net/doc/documentation.html](http://kdiff3.sourceforge.net/doc/documentation.html)），我希望该`--output`选项可以给我想要的两个文件合并，但事实并非如此。我的 .gitconfig 的相关部分：

```
[diff]
  tool = kdiff3
[difftool "kdiff3"]
  cmd = /Applications/kdiff3.app/Contents/MacOS/kdiff3 $LOCAL $REMOTE --output $LOCAL
  trustExitCode = false 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T19:08:40.933

如果我使用以下命令，我可以使用 KDiff3 编辑树内文件：

```
kdiff3 $LOCAL $REMOTE --output $MERGED 
```

KDiff3 在我的`$PATH`，所以重要的一点是将输出从`$LOCAL`改为改为 be `$MERGED`。

从`git-difftool`手册页：

> ...配置的命令行将使用以下可用变量调用： $LOCAL 设置为包含差异前映像内容的临时文件的名称，$REMOTE 设置为包含差异后图像的内容。$MERGED 是正在比较的文件的名称。

由于将输出设置`$LOCAL`为将写入临时文件，因此您将改为写入，`$MERGED`因为这将是实际的“本地”树内文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T13:18:03.780

这是在 Eclipse 中为 GIT 配置 kdiff3 的分步指南：

1.  让 git 创建一个配置文件

*   如果**您的 userdir中****已有**.gitconfig文件，则可以**跳过**。

     ****Windows 用户：

    %userprofile%（在资源管理器地址栏中复制粘贴）**** 
*****   一个名为“.gitconfig”的文件需要在那里存在**** 

 ****1.1 打开一个cmd窗口，执行：

```
git config --global --edit 
```

*   配置文件已创建。

2.  打开**配置文件“.gitconfig”** 2.1 添加以下行将kdiff3注册为git的diff和merge工具（自定义您需要的路径）：

    [difftool "kdiff3"]
    path = "C:\Program Files\KDiff3/kdiff3.exe"
    #

    [mergetool "kdiff3"]
    path = "C:\Program Files\KDiff3/kdiff3.exe"
    #trustExitCode = true
    #

注意：这将是注册您喜欢的任何其他支持的合并工具的位置。

3.  创建一个名为“git merge”的新“程序”“外部工具配置”以在 Eclipse 中执行合并！3.1 选择以下参数：

*   地点：

    C:\Program Files\Git\bin\git.exe

*   工作目录：

    ${git_work_tree}

*   论据：

    合并工具 --tool=kdiff3

要执行合并，请使用**标准 eclipse 合并**，一旦**工作区显示冲突状态**（项目上可见的红色标记），您**标记要合并的项目并启动**我们在上面列出的步骤中创建的“外部工具配置” .

合并**将开始，kdiff3 窗口将弹出。** 从现在开始，继续您的业务，仅在您对合并结果满意时保存文件，因为如果您保存了文件，kdiff 将提供积极的合并反馈。****

# java - 异常处理不起作用

> ID：12589530
> 
> 赞同：0
> 
> 时间：2012-09-25T19:09:08.277
> 
> 标签：java, exception, exception-handling

我做了一个ATM程序。我有一个 try catch 会要求用户输入他们的密码。密码必须是 5 位数字。因此异常将检查它是否为 5 位数字，但异常处理不起作用。无论我输入什么数字，它总是显示无效数字。

这是我的代码，try catch 位于程序的顶部，异常处理 checkNumber 位于程序的底部。

```
import java.util.ArrayList;
import java.util.Scanner;

public class BankMain
{
    private double availableBal = 80;
    private double totalBal = 100;
    private double availableBal2 = 480;
    private double totalBal2 = 500;
    private double availableBal3 = 80;
    private double totalBal3 = 100;
    ArrayList<Integer> cardNum = new ArrayList<Integer>();
    static Scanner input = new Scanner(System.in);

    private String error; // String the error from the exception
    {
        error = "error";
    }

    public void cardNumbers()
    {

        Scanner cards = new Scanner(System.in);
        Scanner input = new Scanner(System.in);
        Scanner keyboard = new Scanner(System.in);

        try
        {

            System.out.println("Please select a 5 digit card number");

            cardNum.add(input.nextInt());
            checkNumber();

        }

        catch (invalidNumber err)
        {

            System.out.println("Caught Error: " + err.getError());
        }

        System.out.println("Thank you! You're card number is " + cardNum);

        System.out.println("Type 'c' to go back to main menu.");
        String value = keyboard.next();

        if (value.equalsIgnoreCase("c"))
        {
            menu();

        }

        else if (!keyboard.equals('c'))
        {

            System.out.println("Invalid Entry!");

        }

    }

    public void menu()
    {

        System.out.println("ATM Menu:");
        System.out.println();
        System.out.println("1 = Create Account");
        System.out.println("2 = Account Login");
        System.out.println("3 = Exit ATM");
        query();
    }

    public void startAtm()
    {
        menu();

    }

    public void drawMainMenu()
    {

        AccountMain main3 = new AccountMain();
        int selection;

        System.out.println("\nATM main menu:");
        System.out.println("1 - View account balance");
        System.out.println("2 - Withdraw funds");
        System.out.println("3 - Add funds");
        System.out.println("4 - Back to Account Menu");
        System.out.println("5 - Terminate transaction");
        System.out.print("Choice: ");
        selection = input.nextInt();

        switch (selection)
        {
        case 1:
            viewAccountInfo();
            break;
        case 2:
            withdraw();
            break;
        case 3:
            addFunds();
            break;
        case 4:
            AccountMain.selectAccount();
            break;
        case 5:
            System.out.println("Thank you for using this ATM!!! goodbye");
        }
    }

    public void viewAccountInfo()
    {
        System.out.println("Account Information:");
        System.out.println("\t--Total balance: $" + totalBal);
        System.out.println("\t--Available balance: $" + availableBal);
        drawMainMenu();
    }

    public void viewAccountInfo2()
    {
        System.out.println("Account Information:");
        System.out.println("\t--Total balance: $" + totalBal2);
        System.out.println("\t--Available balance: $" + availableBal2);
        drawMainMenu();
    }

    public void deposit(int depAmount)
    {
        System.out.println("\n***Please insert your money now...***");
        totalBal = totalBal + depAmount;
        availableBal = availableBal + depAmount;
    }

    public void checkNsf(int withdrawAmount)
    {
        if (totalBal - withdrawAmount < 0)
            System.out.println("\n***ERROR!!! Insufficient funds in you accout***");
        else
        {
            totalBal = totalBal - withdrawAmount;
            availableBal = availableBal - withdrawAmount;
            System.out.println("\n***Please take your money now...***");
        }
    }

    public void addFunds()
    {
        int addSelection;

        System.out.println("Deposit funds:");
        System.out.println("1 - $20");
        System.out.println("2 - $40");
        System.out.println("3 - $60");
        System.out.println("4 - $100");
        System.out.println("5 - Back to main menu");
        System.out.print("Choice: ");
        addSelection = input.nextInt();

        switch (addSelection)
        {
        case 1:
            deposit(20);
            drawMainMenu();
            break;
        case 2:
            deposit(40);
            drawMainMenu();
            break;
        case 3:
            deposit(60);
            drawMainMenu();
            break;
        case 4:
            deposit(100);
            drawMainMenu();
            break;
        case 5:
            drawMainMenu();
            break;
        }
    }

    public void withdraw()
    {
        int withdrawSelection;

        System.out.println("Withdraw money:");
        System.out.println("1 - $20");
        System.out.println("2 - $40");
        System.out.println("3 - $60");
        System.out.println("4 - $100");
        System.out.println("5 - Back to main menu");
        System.out.print("Choice: ");
        withdrawSelection = input.nextInt();

        switch (withdrawSelection)
        {
        case 1:
            checkNsf(20);
            drawMainMenu();
            break;
        case 2:
            checkNsf(40);
            drawMainMenu();
            break;
        case 3:
            checkNsf(60);
            drawMainMenu();
            break;
        case 4:
            checkNsf(100);
            drawMainMenu();
            break;
        case 5:
            drawMainMenu();
            break;
        }
    }

    public void query()
    {

        Scanner keyboard = new Scanner(System.in);
        double input = keyboard.nextInt();

        if (input == 2)
        {

            BankMainPart2 main2 = new BankMainPart2();

            System.out.println("Please enter your 5 digit card number.");
            BankMainPart2.loginCard(cardNum);

        }
        else if (input == 1)
        {

            cardNumbers();

        }

        else if (input == 3)
        {
            System.out.println("Thank you, have a nice day!");
            System.exit(0);

        }

    }

    public void checkingMenu()
    {

        AccountMain main3 = new AccountMain();
        int selection;

        System.out.println("\nATM main menu:");
        System.out.println("1 - View account balance");
        System.out.println("2 - Withdraw funds");
        System.out.println("3 - Add funds");
        System.out.println("4 - Back to Account Menu");
        System.out.println("5 - Terminate transaction");
        System.out.print("Choice: ");
        selection = input.nextInt();

        switch (selection)
        {
        case 1:
            viewAccountInfo2();
            break;
        case 2:
            withdraw();
            break;
        case 3:
            addFunds();
            break;
        case 4:
            AccountMain.selectAccount();
            break;
        case 5:
            System.out.println("Thank you for using this ATM!!! goodbye");
        }
    }

    private static void checkNumber() throws invalidNumber // run the check activation exception
    {
        if (String.valueOf(input).length() != 5)
        {
            throw new invalidNumber("invalid number");
        }
        else
        {

            System.out.println("Works!");
        }

    }

    public static void main(String args[])
    {
        BankMain myAtm = new BankMain();
        myAtm.startAtm();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:14:04.920

此代码段看起来不错：

```
 if (String.valueOf(input).length() != 5)
    {
        throw new invalidNumber("invalid number");
    }
    else
    {

        System.out.println("Works!");
    } 
```

只要您没有意识到这**不是**`input`在某处本地声明的变量：**`double`**

 **```
double input = keyboard.nextInt() 
```

相反，它是[`java.util.Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)(!)

```
static Scanner input = new Scanner(System.in) 
```

而且[`Scanner.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#toString%28%29)肯定不是您想要的 PIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:18:00.653

为什么你有三个不同的 Scanner 类实例。这就是让程序混乱的原因。

在该`compareNumber()`方法中，您实际上是在检查 的值`input`，它是 Scanner 的一个实例。最好像这样使用它：-

`checkNumber(input.nextInt())`

并将数字添加到您的方法中的列表中`checkNumber(int num)`..

当然我不是说它是一种很好的编码方式..但它会暂时解决你的问题..

否则，您的代码有很多问题..

这是您的 try-catch 块：-

```
 try {
            System.out.println("Please select a 5 digit card number");
            cardNum.add(input.nextInt());
            checkNumber();
        } catch (invalidNumber err) {
            System.out.println("Caught Error: " + err.getError());
        } 
```

这是你的`checkNumber()`方法： -

```
private static void checkNumber() throws invalidNumber 
{
    if (String.valueOf(input).length() != 5) {
        throw new invalidNumber("invalid number");
    }
    else {
        System.out.println("Works!");
    }
} 
```

现在您必须看到您正在`input`使用`String.valueOf(input)`.

但是您在 try-catch 块之前已将“输入”声明为 Scanner 的一个实例。

```
 Scanner cards = new Scanner(System.in);
    Scanner input = new Scanner(System.in);
    Scanner keyboard = new Scanner(System.in); 
```

此代码在您的`codeNumbers()`方法中..

因此，显然您`input`永远不能真正包含用户输入，而是`hashcode`代表 object `new Scanner(System.in)`。

因此，最好将整数输入从用户传递给`checkNumber()`方法..

****** *** ** *** ** *** ** *****代码中需要修改..**

 **因此，您的 checkNumber()` 将被修改为：-

```
 private static void checkNumber(int number) throws invalidNumber 
    {
        if (String.valueOf(number).length() != 5) {
            throw new invalidNumber("invalid number");
        }
        else {
            System.out.println("Works!");
        }
    } 
```

您在 try-catch 块中对该方法的调用将更改为：-

```
 try {
            System.out.println("Please select a 5 digit card number");
            int number = input.nextInt();
            cardNum.add(number);
            checkNumber(number);
        } catch (invalidNumber err) {
            System.out.println("Caught Error: " + err.getError());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:15:29.750

您的代码检查`String.valueOf(input)`长度为 5 个字符。但`input`不是用户输入的数字。`Scanner`它是用于解析用户输入内容的类型对象。所以结果`String.valueOf(input)`可能类似于`java.util.Scanner@B09876`.****

# linux - 如何获得程序的内存消耗峰值？

> ID：12589531
> 
> 赞同：2
> 
> 时间：2012-09-25T19:09:15.237
> 
> 标签：linux, memory, process

我有一个小程序，很像`grep`或`cat`在运行时分配内存。我想知道在整个运行过程中最多分配了多少内存。我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:16:04.517

用于`/usr/bin/time`此目的。例子：

```
/usr/bin/time -f '%M kB' command args... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:26:12.883

通常，如果它与内存相关，我会先检查 valgrind 是否有它：

[http://valgrind.org/docs/manual/ms-manual.html](http://valgrind.org/docs/manual/ms-manual.html)

做类似的事情：

```
valgrind --tool=massif <program-name>
ms_print massif.<date> 
```

ms_print 输出的顶部应该是一个图表，它将为您提供所需的信息。

# android - 我可以从 Base64 数据创建一个 TriggerIO 文件实例以传递给 forge.request.ajax 吗？

> ID：12589533
> 
> 赞同：1
> 
> 时间：2012-09-25T19:09:17.017
> 
> 标签：android, ajax, trigger.io, forge

美好的一天，所以。

使用 Trigger.IO 的 javascript SDK，是否可以[`File`](http://docs.trigger.io/en/v1.4/modules/file.html#modules-file)从适合传递给 Forge`forge.request.ajax`方法的 Base64 数据创建 Forge 对象？

我正在尝试将图像上传到服务器，该服务器需要`multipart/form-data`从我的 TriggerIO 移动应用程序以老式请求的形式提交（不幸的是，无法更改）。图片来自`canvas.toDataURL()`Base64 格式。

Android 2.2 缺少`FormData`,`BlobBuilder`和类型化数组——这使得这个练习变得困难`XMLHttpRequest`（尽管我让它在所有其他现代平台上运行良好）。我想知道我是否可以使用 Trigger IO 的 Forge 获得一些乐趣[`forge.request.ajax`](http://docs.trigger.io/en/v1.4/modules/request.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:49:04.387

根据@James Brady 的评论，从当前版本（v1.4）开始无法做到这一点。

> “ File 对象必须来自本机端”

# c# - 如何将此 SQL 代码输入 .NET

> ID：12589535
> 
> 赞同：0
> 
> 时间：2012-09-25T19:09:31.800
> 
> 标签：c#, .net, sql

我有一个在 SQL 中运行良好的批量插入。

我不知道如何让 SQL 代码在 C# 中工作。

```
CMD.CommandText = "???" 
```

我尝试了很多想法并不断出错。批量插入如下：

```
Use Lab2
GO
BULK
 INSERT [dbo].[tmpPerson]
  FROM 'C:\Temp\Input2.txt'
   WITH (
      ROWTERMINATOR  ='\n'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:11:02.827

看看[SqlBulkCopy 类怎么样](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

> 让您可以使用来自其他源的数据有效地批量加载 SQL Server 表。
> 
> Microsoft SQL Server 包括一个名为 bcp 的流行命令提示实用程序，用于将数据从一个表移动到另一个表，无论是在单个服务器上还是在服务器之间。SqlBulkCopy 类允许您编写提供类似功能的托管代码解决方案。还有其他方法可以将数据加载到 SQL Server 表中（例如 INSERT 语句），但 SqlBulkCopy 提供了比它们显着的性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:34:49.530

我使用 Microsoft.SqlServer.management 命名空间中的 Server 对象来做同样的事情。它允许您在命令中使用 GO 字，其中使用 SqlCommand 它期望 SqlCommand 的每个实例代表一个命令。

```
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Smo;

SqlConnection conn = new SqlConnection(sqlConnectionString);
Server server = new Server(new ServerConnection(conn));
server.ConnectionContext.ExecuteNonQuery(script); 
```

# d3.js - d3.js 强制有向图对 enter 的影响

> ID：12589544
> 
> 赞同：4
> 
> 时间：2012-09-25T19:10:23.533
> 
> 标签：d3.js, force-layout

[我完全按照此处](http://bl.ocks.org/1153292)所示使用 d3.js，但具有不同的数据值。

![在此处输入图像描述](../Images/d584aa9c9c6b300d600d0310bd0af7ae.png)

当图表第一次显示时，所有元素都是分散的，并在大约一秒钟内迅速向它们的位置移动。这在示例中看起来不错，但对于我的数据，它看起来并不那么好。有什么方法可以关闭它，以便节点在指定的位置开始？有什么方法可以自定义此条目可视化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:26:17.810

您可以遍历节点数组并将 .x/.y 和 .px/.py 值设置为您希望节点进入的初始位置，这样做将限制它们在初始布局中需要移动的数量。如果关闭力导向算法（tick() 函数），则可以将标准 .transtion().duration(500).attr("transform", xx) 行为应用于节点和链接以使它们在您在运行强制导向算法之前或之后喜欢的方式，但请确保将 .x/.y 和 .px/.py 属性设置为它们的最终位置，否则它们将在您 .tick() 后立即重置

# ios - 如何读取 csv 文件中的单独字段并与用户输入进行比较？

> ID：12589545
> 
> 赞同：0
> 
> 时间：2012-09-25T19:10:25.603
> 
> 标签：ios, xcode, csv

我正在构建一个应用程序，用户可以在其中上传一个 csv 文件，其中包含 3 个单独的列中的名字、姓氏和电子邮件。用户界面将有 3 个文本字段和一个按钮。当用户输入名字或姓氏或电子邮件，并单击搜索按钮时，必须搜索整个文档并显示警报，说明在文件中找到了记录。这是我正在使用的函数，但它只读取第一行和第一列。请帮忙

```
- (void) SearchStudent

{

    NSArray *DocumentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *DocumentDirectory = [DocumentPath objectAtIndex:0];

    NSString *FullPath = [DocumentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"example.csv"]];

    NSString * pstrCSVFile= [NSString stringWithContentsOfFile:FullPath encoding:NSASCIIStringEncoding error:NULL];

    NSArray * paRowsOfCSVFile= [pstrCSVFile componentsSeparatedByString:@"\n"];

    NSArray *paColumnsOfRow;

    NSString *pstrFirstColumn;

    for(NSString * pstrRow in paRowsOfCSVFile)

    {

        paColumnsOfRow= [pstrRow componentsSeparatedByString:@","];

        pstrFirstColumn= [paColumnsOfRow objectAtIndex:0];

        if([pstrFirstColumn localizedCaseInsensitiveCompare:GWIDText.text] == NSOrderedSame)

        {

            UIAlertView *alertingFileName = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

            [alertingFileName show];

            break;

        }

        else

        {

            UIAlertView *alertingFileName1 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Not Found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

            [alertingFileName1 show];

            break;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:33:14.903

几个提示：

1.  您只检查一列。

    ```
    if([pstrFirstColumn localizedCaseInsensitiveCompare:GWIDText.text] == NSOrderedSame) 
    ```

对其他两列执行相同操作。然后您将解决仅检查一列的第一个问题。

1.  看起来行终止符不正确。根据创建 csv 文件的平台，它可能有不同的行终止符。我建议使用像 notepad++ 这样的文本编辑器，并查看隐藏代码以找出您的行终止符。然后使用终止符拆分行。确保您获得超过 1 行（仅输出 rows 变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:34:16.130

如果名字不匹配，看起来你的**else**语句正在退出**for循环。**如果您找到匹配项，您将需要删除它并可能添加一个变量来跟踪。仅当您匹配名称时才设置它。在你的**for**循环之后，检查变量以查看是否有匹配项。如果没有，则显示“未找到”的 UIAlertView。

# css - html5 元素不占用空间并在下一部分溢出

> ID：12589549
> 
> 赞同：0
> 
> 时间：2012-09-25T19:10:41.540
> 
> 标签：css, html

我想做一个简历页面。[这](http://jsfiddle.net/ohadpartuck/jp4LH/)是一个jsfiddle

它看起来像这样：

```
<section class="ResumeItem">
    <header class="ResumeContentTitle" id="ResumeKnowledgeHeader">
         <p>Professional Knowledge</p>
    </header>
    <section>
         <section class="skills">
                        <header>
                            <h3>Strong Skills</h3>
                        </header>
                        <ul>
                            <li>PHP</li>
                            <li>jQuery</li>
                            <li>SQL</li>
                            <li>Ajax</li>
                            <li>HTML</li>
                            <li>CSS</li>
                        </ul>
                    </section>

                    <section id="ResumeKnowledge" class="ResumeContentText">

                        <ul>
                            <li>PHP </li>
                            <li>another item </li>
                            <li>another item </li>
                            <li>another item </li>
                            <li>another item </li>
                        </ul>
                    </section>
</section>
<section class="ResumeItem">
                    <header class="ResumeContentTitle" id="ResumeKnowledgeHeader">
                        <p>Professional Knowledge</p>
                    </header>
</section> 
```

​​​

问题是 ul li 不占用“空间”。下一部分只考虑 id="ResumeKnowledge" 部分。

```
I tried:

.skills ul li{
    overflow: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:18:16.243

问题是该部分是浮动的，因此它位于 DOM 之外。添加一个明确的解决问题。

[http://jsfiddle.net/jp4LH/7/](http://jsfiddle.net/jp4LH/7/)

我刚刚`<div style="clear:both;"></div>`在该部分之后添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:21:05.293

问题是 DOM 之外的浮动项目。较早的答案是正确的，或者您可以添加：section.ResumeItem{ clear:both; } 如果你想保持 2 列并排浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:23:08.243

发生这种情况是因为`section`带有类的内部`skills`是浮动的，所以外部`section`崩溃了。一种解决方法是创建一个新的[块格式化上下文](http://www.yuiblog.com/blog/2010/05/19/css-101-block-formatting-contexts/)，这可以通过添加

```
overflow: hidden 
```

到外部。像这样创建一个新的块格式化上下文会强制外部`section`完全包含所有内部浮动元素。

# php - IDE 中的 Dreamweaver 样式检出

> ID：12589558
> 
> 赞同：0
> 
> 时间：2012-09-25T19:11:09.150
> 
> 标签：php, ide, dreamweaver

我是一个崭露头角的 php 开发人员，我的公司要求我使用 Dreamweaver 将文件签入和签出服务器。这确实是我喜欢的 Dreamweaver 的唯一功能。从服务器获取文件的新副本并跟踪谁拥有文件等非常容易。但作为一个 IDE，它还有很多不足之处。显然，我可以使用 Dreamweaver 检出文件，然后在另一个工具中编辑它们，但我宁愿不这样做。我不能成为第一个遇到这种情况的人，我应该使用什么？日食？网豆？有人为此写了一个插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:12:55.827

听起来您需要查看源代码控制解决方案，例如[Git](http://git-scm.com/)。

# network-protocols - 通过互联网控制机器人的加密协议？

> ID：12589559
> 
> 赞同：0
> 
> 时间：2012-09-25T19:11:09.977
> 
> 标签：network-protocols, robotics

我想通过互联网控制我的机器人的运动。我使用“客户端服务器架构”：机器人连接到服务器，用户连接到服务器。我需要保持连接活跃的网络加密协议。我需要从用户的机器实时向机器人发送命令。服务器必须知道与机器人的连接是否断开。软件是用 C++ 编写的。所以我需要实现这个协议的 C 或 C++ 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:20:27.517

我不知道具体的库，但我会研究 IM（即时消息）库。向您的机器人发送 IM 来控制它有多酷？！我隐约知道有一些开源库可以让你创建自己的 IM 服务器，或者使用现有的。

# c# - 写入堆栈跟踪

> ID：12589566
> 
> 赞同：8
> 
> 时间：2012-09-25T19:11:34.237
> 
> 标签：c#, exception, stack-trace

我可以在堆栈跟踪中抛出一些文本吗？

我的应用程序已经掌握了抛出的异常。但想了解更多有关某些方法（参数）的信息。

这个想法是做类似的事情

```
StackTrace.Insert (0, "argument:" + test); 
```

我知道这并不酷，但有可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T19:57:59.900

创建异常，并将参数放在[数据字典属性](https://msdn.microsoft.com/en-us/library/2wyfbc48.aspx)中。然后抛出异常...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T20:04:52.477

只是为了添加到@erikH 的出色答案：

除了使用该`Data`属性之外，如果您需要异常链上的其他可用数据，您可以通过自定义异常来实现。除了自定义类型可以提供的元信息（`CommunicationException`可能意味着 I/O 问题，`InvalidStateException`可能意味着程序遇到无效状态等）之外，您还可以向异常添加附加信息，其形式为自定义字段。当您需要`Data`属性不提供的类型安全时，自定义字段特别有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T19:39:21.353

根据定义，堆栈跟踪是程序中当前执行点的活动堆栈帧的输出，通常通过异常访问。

@David Yaw 为您提供了将附加信息添加到堆栈跟踪的正确方法，因为它会使异常堆栈冒泡。换句话说，您应该只将自定义数据添加到堆栈跟踪，当它是异常的结果时。

要么创建一些可集中访问的 List 集合来存储日志数据，要么按照 David 的建议使用适当的 try/catch 和异常冒泡。

例如。

```
try
{
  doSomethingThatMightFailAndThrowAnException();
}
catch (Exception ex)
{
  throw new Exception("Here is some custom data to add to the trace...",ex);
  // Notice adding the ex as the second parameter preserves the original exception trace
} 
```

# .net - XSLT 文件中的计算记录

> ID：12589570
> 
> 赞同：2
> 
> 时间：2012-09-25T19:11:50.627
> 
> 标签：.net, xml, xslt, file-processing

我有一个带有参数 'numberOfRecords' 的预告片记录模板。

```
 <xsl:template name="render-FileTrailer">
    <xsl:param name="fileRecordIdentifier" select="TR"/>
    <xsl:param name="numberOfRecords"/>
  </xsl:template> 
```

这个数字应该是我的父记录及其所有子记录的总数。一个例子是

```
<people>
  <person>
    <name> Mark</name>
    <age>32</age>
    <children>
      <child>
        <name> Mark Jr.</name>
        <age> 2</age>
      </child>
      <child>
        <name> Angel</name>
        <age> 4</age>
      </child>
    </children>
  </person>
</people> 
```

所以这将返回 3, 1(mark) + 2(他的两个孩子)

我怎样才能做到这一点？这是我第一次使用 XSLT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:49:52.860

由于您说您是 XSLT 的新手，因此您可能对某些事情感到困惑 :-)`fileRecordIdentifier`和`numberOfRecords`参数的预期用途尚不清楚。在任何情况下，您都不能使用它们从模板返回值；XSLT 不能那样工作。就目前的问题而言，我会尽我所能回答。

下面的样式表将调用您的模板，该模板添加了所有人员元素和所有子元素的数量。结果将只是“3”（顺便说一下，不是有效的 XML）。不过，这在根模板中也可以做得很好，因此最好澄清`render-FileTrailer`模板的预期用途。如果您稍微详细说明这个问题，我们可以更进一步。

`/`附带说明一下，您的 XML 文件在某些​​结束标记中缺少。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
   <xsl:template match="/">
      <xsl:call-template name="render-FileTrailer"/>
   </xsl:template>

   <xsl:template name="render-FileTrailer">
      <xsl:sequence select="count(//people) + count(//child)"/>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:06:11.593

您可以使用以下 XPath 获取文档中所有人员和子元素的计数：

```
count(//person|//child) 
```

应用于您的模板，它将为 numberOfRecords 参数创建一个默认值：

```
<xsl:template name="render-FileTrailer">
    <xsl:param name="fileRecordIdentifier" select="TR"/>
    <xsl:param name="numberOfRecords" select="count(//person|//child)"/>
</xsl:template> 
```

或者您可以在调用模板时指定该值，如下所示：

```
 <xsl:call-template name="render-FileTrailer">
        <xsl:with-param name="numberOfRecords" select="count(//person|//child)"/>
    </xsl:call-template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:13:35.207

**使用这个单一的 XPath 表达式**：

```
count(/*/person) + count(/*/person/children/child) 
```

# javascript - 删除jquery中按钮上的取消绑定？

> ID：12589572
> 
> 赞同：0
> 
> 时间：2012-09-25T19:12:07.260
> 
> 标签：javascript, jquery

```
function getData(url) {
    $.getJSON(url, function(result) {
        $('#formNav ul').append('<ul/>')
        $.each(result, function() {
            var list = $('#formNav li'),
            listItem = $('<li/>'),
            html = listItem.append($('<h5/>').text(this.name));
            $.each(this.items, function() {
                listItem.append($('<a />').attr('href', this.id).text(this.name))
            });
            list.append(html)
        });
    });
};

$(function(){

        var Menu = {

                $menu: $('.config-nav #formNav'),
                $trades : $(".config-nav select#tradesmanList"),
                $skills : $(".config-nav select#jobList"),

                init: function(){
                        var $menu = Menu.$menu;

                        // Set menu up
                        $menu.children("li").addClass('closed');
                        $menu.find(".js-reveal").hide();

                        Menu.$skills.attr("disabled", "disabled");
                        Menu.$trades.on("change", function($skills){
                        Menu.$skills.removeAttr("disabled");
                        });

                        // bind to click on the item...
                        $menu.on("click", "h4", this.toggle);

                },

                toggle: function() {
                        //  Toggle the hide show of the drill down menu
                        var $this = $(this),
                                $category = $this.parent();
                    console.log($this.parent().index());

                    var data = getData("test.json");

                    $category.addClass("loading").toggleClass("open");
                    $this.next(".reveal").delay(100).toggle(0, function(){
                        $category.Data;
                        $category.removeClass("loading");

                    });
                }

        };

       Menu.init();
}); 
```

我有一个返回 json 数据的函数，然后我在菜单函数中调用这个函数来显示数据但是每次我单击按钮时，数据只是不断生成，而不是我希望它显示数据，然后再次单击它隐藏数据？如果有人有任何建议，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:17:36.197

每当您调用切换功能时，您似乎都在使用

```
var data = getData("test.json"); and then use it to populate the list.. 
```

为什么不将 getData 方法移到切换功能之外，而是将其移至 init 功能..看起来应该没问题..

# random - 安卓随机专辑播放列表创建器

> ID：12589573
> 
> 赞同：0
> 
> 时间：2012-09-25T19:12:11.960
> 
> 标签：random, mediastore, playlists

在这个论坛的帮助下，我开发了一个应用程序，允许用户创建包含整个专辑的播放列表。

只需单击 ListView 即可随机选择专辑。长按选定的播放列表会提供删除和播放选项。

这一切都很好，但是，尽管 Play 启动了音乐播放器，但它并没有开始播放选定的播放列表。

问题：有没有办法以音乐播放器开始播放播放列表中的音乐的方式提供数据（playlistid）？

此代码启动播放器：

```
 Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
        startActivity(intent); 
```

我在另一个线程中发现了这个

```
 intent.putExtra("playlist", selectedplaylist); 
```

但到目前为止，我一直无法让它发挥作用。我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:09:53.060

我设法调用了音乐播放器并向用户展示了播放列表。如果我们可以让它播放选定的播放列表，那就太好了，但我找不到这样做的东西。以下代码调用音乐播放器和播放列表。

```
 Intent intent = new Intent(Intent.ACTION_PICK);
      intent.setDataAndType(Uri.EMPTY, MediaStore.Audio.Playlists.CONTENT_TYPE);
      startActivity(intent); 
```

# javascript - 使用 JavaScript 添加样式表 IE 8

> ID：12589576
> 
> 赞同：1
> 
> 时间：2012-09-25T19:12:27.260
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

我正在制作一个缩放按钮来添加和删除 CSS 文件，但由于某种原因，我似乎无法在 IE 8 中添加它

首先我试过这个

```
document.createStyleSheet('style/zoom.css'); 
```

鉴于 jquery 解决方案

```
$("head").append($("<link my style sheet />")); 
```

通过我的测试似乎只适用于 FF 和 IE9

我检查了溢出并找到了这个解决方案

```
 $('#zoomlink').replaceWith($('<link>', {
        id: 'zoomlink',
        href: 'style/zoom.css',
        type: 'text/css',
        rel: 'stylesheet' 
 })); 
```

但是仍然找不到爱，所以我很沮丧地找到了这个

```
var $link = $('&lt;link&gt;');
    $('head').add($link);
    $link.attr({
      type: 'text/css',
      href: 'style/zoom.css',
      type: 'text/css',
      rel: 'stylesheet',
      media: 'screen'
}); 
```

我不确定这是否会起作用，但最后我决定是时候简单地发布一个问题了。

我仍然不确定以后如何通过 javascript 删除样式表，但我需要首先确定如何在 IE 8 中添加新样式表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:30:32.660

也许这会有所帮助（抱歉，无法在 IE8 中尝试）：

```
(function() {
    var s  = document.createElement('link');
    s.type = 'text/css';
    s.rel  = 'stylesheet';
    s.href = 'http://yourdomain.com/style.css';
    document.getElementsByTagName("head")[0].appendChild(s);
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:30:24.070

要删除它，我会假设一个简单的`remove()`工作

```
$("#zoomlink").remove(); 
```

要使用 jQuery 使用以下语法添加新链接：

```
$("head").append(unescape("%3Clink id='zoomlink' rel='stylesheet' type='text/css' href='style/zoom.css'%3E%3C/link%3E")); 
```

或使用纯 JavaScript

```
var e = document.createElement('link');
e.id = 'zoomlink'
e.rel = 'stylesheet';  
e.type='text/css';
r.href='style/zoom.css'
document.getElementsByTagName("head")[0].appendChild(e); 
```

还有很多其他的写法，但思路是一样的，删除旧的引用元素并添加一个新的。

# android - 编译应用程序时出现 LogCat 错误

> ID：12589582
> 
> 赞同：0
> 
> 时间：2012-09-25T19:12:43.357
> 
> 标签：android, database, compiler-errors, logcat

当我编译应用程序时，这些错误显示：

```
 sqlite returned: error code = 1, msg = table mensagens already exists
   Failure 1 (table mensagens already exists) on 0x240328 when preparing 'create table mensagens(mensagemsalva varchar(250),mensagemenviada varchar(250))'.
   sqlite returned: error code = 1, msg = table contatos already exists
   Failure 1 (table contatos already exists) on 0x240328 when preparing 'create table contatos(nome varchar(50),telefone varchar(20))'. 
```

我的 Main.java 有这段代码，用于创建数据库及其表：

```
 onCreate(..){
   ...
  db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);
    ...
    VerificaDados();
  }

    private void VerificaDados() {
    // TODO Auto-generated method stub

    try {
        //cria uma TABLE de nome MENSAGENS
        db.execSQL("create table mensagens(mensagemsalva varchar(250),mensagemenviada varchar(250))");
        //ShowMessage("Banco","Criou a tabela de mensagens");
    }
    catch (Exception e) {

        }
    try{
        //cria uma TABLE de nome CONTATOS
        db.execSQL("create table contatos(nome varchar(50),telefone varchar(20))");
        //ShowMessage("Banco","Criou a tabela de contatos");
    }catch (Exception a){

    }

} 
```

我知道它可能是什么，因为我只是运行应用程序和 BAM，LogCat 中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:22:10.107

查看[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html) API 文档。

> 此类负责打开数据库（如果存在），如果不存在则创建它，并根据需要进行升级。

您应该尝试区分`onCreate()`和`onUpdate()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:53:13.267

只需评论 (//)`VerificaDados();`因为表已经创建。

```
onCreate(..){
    ...
 db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);
    ...
   //VerificaDados();
   } 
```

# mysql - MySQL 在我的 Mac 上运行吗？

> ID：12589585
> 
> 赞同：2
> 
> 时间：2012-09-25T19:12:58.600
> 
> 标签：mysql, osx-lion

我有一个 mac osx 狮子。我正在运行 xampp（即我单击图标，然后单击`mysql`，红点变为绿色）。从那里我不知道如何进入终端并创建数据库。那么如何从终端检查 mysql 是否已安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:15:24.320

您可以使用以下命令登录mysql：

```
mysql -u root -p 
```

然后将提示您输入密码；如果未安装 mysql，您将收到一条错误消息，提示找不到命令或类似内容。

默认情况下，XAMPP 将安装在 中`/Applications/XAMPP/`，请确保包含正确的路径：

```
/Applications/XAMPP/xamppfiles/bin/mysql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:16:10.973

一种快速的方法是转到您的主面板，单击 phpmyadmin 并尝试从那里创建一个数据库。

一旦我找到截图我就给你一个

# php - PHP 持久登录 - 我是否在每个页面验证后重新发出 cookie？

> ID：12589595
> 
> 赞同：3
> 
> 时间：2012-09-25T19:13:33.517
> 
> 标签：php, authentication

我已经建立了一个基于这些原则的持久登录应用程序（来自：http: [//jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)）

> 1.  当用户在选中记住我的情况下成功登录时，除了标准会话管理 cookie 之外，还会发出一个登录 cookie。[2]
> 2.  登录 cookie 包含用户的用户名、系列标识符和令牌。系列和令牌是来自适当大空间的不可猜测的随机数。这三者一起存储在数据库表中。
> 3.  当未登录用户访问该站点并显示登录 cookie 时，会在数据库中查找用户名、系列和令牌。
> 4.  如果存在三元组，则认为用户已通过身份验证。使用的令牌将从数据库中删除。生成一个新令牌，并使用用户名和相同的系列标识符存储在数据库中，并向用户发出一个包含所有三个的新登录 cookie。
> 5.  如果存在用户名和系列但令牌不匹配，则假定为盗窃。用户会收到措辞强硬的警告，并且用户记住的所有会话都将被删除。
> 6.  如果用户名和系列不存在，则忽略登录 cookie。

我了解在初始身份验证成功后我重新颁发了一个新令牌。但是，我是否会在其他需要身份验证的页面上重新发出新令牌，并继续检查该持久性 cookie。

还是在初始成功身份验证后，将用户标记为已登录，并且仅从该点开始通过会话进行身份验证，并保存初始重新发布的 cookie，以供当前会话到期后用户尝试访问该站点时使用（即关闭浏览器等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:32:07.137

我会投票给第二个选项。如果不出意外，持续更新 auth cookie 会影响性能。（小但仍然没有必要）。登录成功后，写入cookie。用户进入站点后，仅使用会话值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:32:18.353

只有当用户尝试在没有当前会话 cookie 的情况下访问站点时，您才检查登录 cookie。这就是我将如何解释原则#3。

> 当**未登录用户**访问该站点并显示登录 cookie 时，会在数据库中查找用户名、系列和令牌。

（强调我的。）

此外，从逻辑上考虑，如果您要在每次页面加载时检查并重新发出登录 cookie，那么同时使用会话 cookie 和登录 cookie 是没有意义的。

# javascript - Javascript 和 html 井字游戏获胜者

> ID：12589596
> 
> 赞同：3
> 
> 时间：2012-09-25T19:13:34.967
> 
> 标签：javascript, html, css

我正在使用 html、css 和 JavaScript 编写井字游戏。我有一个外部 .js 文件中的 JavaScript 被引用到 .html 文件中。在 .js 文件中，我有一个名为 playerMove 的函数，它允许玩家移动并在玩家“x”和“o”之间切换。我要做的是确定获胜者。

这是我所拥有的：每个方块，当 onclick(this) 时，引用 playerMove(piece)。每次移动完成后，我想运行一个 if 语句来检查获胜者，但不确定参数是否包含对“piece”或 a、b 和 c 的引用。任何建议将不胜感激。

```
var turn = 0;   
a = document.getElementById("topLeftSquare").innerHTML;
b = document.getElementById("topMiddleSquare").innerHTML;
c = document.getElementById("topRightSquare").innerHTML;

function playerMove(piece) {
var win;
if(piece.innerHTML != 'X' && piece.innerHTML != 'O'){
    if(turn % 2 == 0){
        document.getElementById('playerDisplay').innerHTML= "X Plays " + printEquation(1);
        piece.innerHTML = 'X';
        window.setInterval("X", 10000)
        piece.style.color = "red";
        if(piece.innerHTML == 'X')
            window.alert("X WINS!");
    }
    else {
        document.getElementById('playerDisplay').innerHTML= "O Plays " + printEquation(1);
        piece.innerHTML = 'O';
        piece.style.color = "brown";
        //document.getElementById('playerDisplay').innerHTML = "O Plays";

        //win = winner();
    }

    turn+=1;
} 
```

html代码：

```
<div id="board">
            <div class="topLeftSquare" onclick="playerMove(this)">

            </div>
            <div class="topMiddleSquare" onclick="playerMove(this)">

            </div>
            <div class="topRightSquare" onclick="playerMove(this)">

            </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:55:47.303

```
<html>
<head>
<script type="text/javascript">
var cur_id;
var tempkeycode = "";
function setKeycode(input)
{
    tempkeycode = input;
    xowin()
}
function setId(id)
{
    cur_id = id;
    xowin()
}
function keyPress(e) 
{
    var input = e.keyCode ? e.keyCode : e.charCode;
    if(tempkeycode == "")
    {
        if ((input == 111) || (input == 120))
        {
            setKeycode(input);
            return true;
        }   
        else 
            return false;
    }
    else
    {
        if(((input == 111) || (input == 120)) && (input != tempkeycode))
        {
            setKeycode(input);
            return true;
        }
        else
        {
            return false;
        }
    }
}
function preventBackspace(e) 
{
    var evt = e || window.event;
        if (evt) 
        {
            var keyCode = evt.charCode || evt.keyCode;
            if (keyCode === 8) 
            {
                if (evt.preventDefault) 
                {
                    evt.preventDefault();
                } 
                else 
                {
                    evt.returnValue = false;
                }
            }
        }
}
function xowin()
{
tb1val = document.getElementById("tb1").value;
tb2val = document.getElementById("tb2").value;
tb3val = document.getElementById("tb3").value;
tb4val = document.getElementById("tb4").value;
tb5val = document.getElementById("tb5").value;
tb6val = document.getElementById("tb6").value;
tb7val = document.getElementById("tb7").value;
tb8val = document.getElementById("tb8").value;
tb9val = document.getElementById("tb9").value;

    if(tb1val == tb2val && tb2val == tb3val && tb1val!= "" && tb2val!= "" && tb3val!= "")
    {
        alert("Player "+tb1val+" Wins!!!");
    }
    else if(tb4val == tb5val && tb5val == tb6val && tb4val!= "" && tb5val!= "" && tb6val!= "")
    {
        alert("Player "+tb5val+" Wins!!!");
    }
    else if(tb7val == tb8val && tb8val == tb9val && tb7val!= "" && tb8val!= "" && tb9val!= "")
    {
        alert("Player "+tb7val+" Wins!!!");
    }
    else if(tb1val == tb4val && tb4val == tb7val && tb1val!= "" && tb4val!= "" && tb7val!= "")
    {
        alert("Player "+tb4val+" Wins!!!");
    }
    else if(tb2val == tb5val && tb5val == tb8val && tb2val!= "" && tb5val!= "" && tb8val!= "")
    {
        alert("Player "+tb2val+" Wins!!!");
    }
    else if(tb3val == tb6val && tb6val == tb9val && tb3val!= "" && tb6val!= "" && tb9val!= "")
    {
        alert("Player "+tb6val+" Wins!!!");
    }
    else if(tb1val == tb5val && tb5val == tb9val && tb1val!= "" && tb5val!= "" && tb9val!= "")
    {
        alert("Player "+tb9val+" Wins!!!");
    }
    else if(tb3val == tb5val && tb5val == tb7val && tb3val!= "" && tb5val!= "" && tb7val!= "")
    {
        alert("Player "+tb3val+" Wins!!!");
    }
    else
    {
        if(tb1val!= "" && tb2val!= "" && tb3val!= "" && tb4val!= "" && tb5val!= "" && tb6val!= "" && tb7val!= "" && tb8val!= "" && tb9val!= "")
        {
            alert("Draw");
        }
    }
}
</script>
</head>
<body bgcolor="blue">
<center>
    <h1>Tic Tac Toe</h1>
    <input type="text" id="tb1" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb2" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb3" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1"><br>
    <input type="text" id="tb4" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb5" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb6" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1"><br>
    <input type="text" id="tb7" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb8" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1">
    <input type="text" id="tb9" value="" size="1" onkeydown="preventBackspace(event)" onkeypress="return keyPress(event)" onblur="setId(this.id);" maxlength="1"><br>
</center>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:06:18.290

```
<html>
<head>
<script type="text/javascript">
var currentvalue = "O";
var b1 = "notClicked";
var b2 = "notClicked";
var b3 = "notClicked";
var b4 = "notClicked";
var b5 = "notClicked";
var b6 = "notClicked";
var b7 = "notClicked";
var b8 = "notClicked";
var b9 = "notClicked";
function first()
{
    if(b1== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b1").value=currentvalue;
            b1 = "clicked";
        if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }
    }
    xowin()
}
function second()
{
    if(b2== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b2").value=currentvalue;
            b2 = "clicked";
        if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }   
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }   
    }
    xowin()
}
function third()
{
    if(b3== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b3").value=currentvalue;
            b3 = "clicked";
        if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }   
    }
    xowin()
}
function fourth()
{
    if(b4== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b4").value=currentvalue;
            b4 = "clicked";
        if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }
        else if(b6== "notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }
        else if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }
        else if(b1=="notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }   
    }
    xowin()
}
function fifth()
{
    if(b5== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b5").value=currentvalue;
            b5 = "clicked";
        if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }   
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }   
    }
    xowin()
}
function sixth()
{
    if(b6== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b6").value=currentvalue;
            b6 = "clicked";
        if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }   
        else if(b5=="notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }   
    }
    xowin()
}
function seventh()
{
    if(b7== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b7").value=currentvalue;
            b7 = "clicked";
        if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b6== "notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }   
        else if(b2=="notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }   
    }
    xowin()
}
function eight()
{
    if(b8== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b8").value=currentvalue;
            b8 = "clicked";
        if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b9== "notClicked")
            {
            document.getElementById("b9").value="O";
            b9 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }   
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }   
    }
    xowin()
}
function ninth()
{
    if(b9== "notClicked")
    {
        if(currentvalue == "O")
            {
            currentvalue = "X";
            }
            document.getElementById("b9").value=currentvalue;
            b9 = "clicked";
        if(b3== "notClicked")
            {
            document.getElementById("b3").value="O";
            b3 = "clicked";
            }
        else if(b1== "notClicked")
            {
            document.getElementById("b1").value="O";
            b1 = "clicked";
            }
        else if(b4== "notClicked")
            {
            document.getElementById("b4").value="O";
            b4 = "clicked";
            }
        else if(b2== "notClicked")
            {
            document.getElementById("b2").value="O";
            b2 = "clicked";
            }
        else if(b8== "notClicked")
            {
            document.getElementById("b8").value="O";
            b8 = "clicked";
            }
        else if(b7== "notClicked")
            {
            document.getElementById("b7").value="O";
            b7 = "clicked";
            }
        else if(b5== "notClicked")
            {
            document.getElementById("b5").value="O";
            b5 = "clicked";
            }   
        else if(b6=="notClicked")
            {
            document.getElementById("b6").value="O";
            b6 = "clicked";
            }   
    }
    xowin()
}
function xowin()
{
b1val = document.getElementById("b1").value;
b2val = document.getElementById("b2").value;
b3val = document.getElementById("b3").value;
b4val = document.getElementById("b4").value;
b5val = document.getElementById("b5").value;
b6val = document.getElementById("b6").value;
b7val = document.getElementById("b7").value;
b8val = document.getElementById("b8").value;
b9val = document.getElementById("b9").value;

    if(b1val == b2val && b2val == b3val && b1val!= "" && b2val!= "" && b3val!= "")
    {
        alert("Player "+b1val+" Wins!!!");
    }
    else if(b4val == b5val && b5val == b6val && b4val!= "" && b5val!= "" && b6val!= "")
    {
        alert("Player "+b5val+" Wins!!!");
    }
    else if(b7val == b8val && b8val == b9val && b7val!= "" && b8val!= "" && b9val!= "")
    {
        alert("Player "+b7val+" Wins!!!");
    }
    else if(b1val == b4val && b4val == b7val && b1val!= "" && b4val!= "" && b7val!= "")
    {
        alert("Player "+b4val+" Wins!!!");
    }
    else if(b2val == b5val && b5val == b8val && b2val!= "" && b5val!= "" && b8val!= "")
    {
        alert("Player "+b2val+" Wins!!!");
    }
    else if(b3val == b6val && b6val == b9val && b3val!= "" && b6val!= "" && b9val!= "")
    {
        alert("Player "+b6val+" Wins!!!");
    }
    else if(b1val == b5val && b5val == b9val && b1val!= "" && b5val!= "" && b9val!= "")
    {
        alert("Player "+b9val+" Wins!!!");
    }
    else if(b3val == b5val && b5val == b7val && b3val!= "" && b5val!= "" && b7val!= "")
    {
        alert("Player "+b3val+" Wins!!!");
    }
    else
    {
        if(b1val!= "" && b2val!= "" && b3val!= "" && b4val!= "" && b5val!= "" && b6val!= "" && b7val!= "" && b8val!= "" && b9val!= "")
        {
            alert("Draw");
        }
    }
}
</script>
</head>
<body bgcolor="lightblue">
<h1 align="center">TIC TAC TOE</h1>
<center>
    <input type="button" id="b1" onclick="first()">
    <input type="button" id="b2" onclick="second()">
    <input type="button" id="b3" onclick="third()"><br>
    <input type="button" id="b4" onclick="fourth()">
    <input type="button" id="b5" onclick="fifth()">
    <input type="button" id="b6" onclick="sixth()"><br>
    <input type="button" id="b7" onclick="seventh()">
    <input type="button" id="b8" onclick="eight()">
    <input type="button" id="b9" onclick="ninth()"><br>
    <input type="button" id="b10" value="New Game" onclick="history.go(0)">
</center>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:09:58.447

亚瑟沃尔夫怀特所说的：

```
<html><head>
<style>
td{border:1px solid black;padding:0px;width:20px;height:22px;text-align:center}
</style>
<script>
var s = "O"; 
var r = [0,0,0,0,0,0,0,0,0];
function t(a,b,c) {
 return (Math.abs(r[a] + r[b] + r[c]) == 3 ? true : false);
}
function a() {
 var c = document.getElementsByTagName("INPUT");
 for (var i = 0; i < c.length;i++) {
  if (c[i].checked == true) {
   var g = parseInt(c[i].id);
   r[g] = (s=="O" ? -1 : 1); 
   var m = document.createElement("TEXT");
   m.innerHTML = s;
   c[i].parentNode.replaceChild(m, c[i]);
   if (t(0,1,2) || t(3,4,5) || t(6,7,8) || t(0,3,6) || t(1,4,7) || t(2,5,8) || t(0,4,8) || t(2,4,6)) {
    alert("Player " + s + " wins!");
   }
   s = (s=="O" ? "X" : "O");
  }
 }
}
</script>
</head><body>
<table cellspacing='0' onclick='a()' name='board'>
<tr><td><input type='checkbox' id='0' /></td><td><input type='checkbox' id='1' /></td><td><input type='checkbox' id='2' /></td></tr>
<tr><td><input type='checkbox' id='3' /></td><td><input type='checkbox' id='4' /></td><td><input type='checkbox' id='5' /></td></tr>
<tr><td><input type='checkbox' id='6' /></td><td><input type='checkbox' id='7' /></td><td><input type='checkbox' id='8' /></td></tr>
</table>
</body></html> 
```

方式又快又脏，但这是一个巨大的挑战！下次我面试 JS 程序员时，我会使用这个！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-12T22:09:55.317

```
const tokens = [{
    name: "Beemo",
    img: "beemo-token.png",
  },
  {
    name: "Princess Bubblegum",
    img: "bubble-token.png",
  }
]

let player1 = {
  token: 0
}

let player2 = {
  token: 1
}

let gameboard = [
  [-1, -1, -1],
  [-1, -1, -1],
  [-1, -1, -1]
]; // array representation of gameboard
let currentPlayer = 1; // indicates who's turn it is
let numTurn = 0; // counts the num of turns made

populateSpace();
let againBtn = document.getElementById("again-btn");
againBtn.addEventListener("click", playAgain);

// Populates the spaces for the gameboard
function populateSpace() {
  // <div class="space">&nbsp;</div>
  let rows = document.querySelectorAll(".row");
  // return [<div>, <div>, <div>]
  for (let rowNum = 0; rowNum < rows.length; rowNum++) {
    let row = rows[rowNum];
    for (let col = 0; col < 3; col++) {
      let space = document.createElement("div");
      space.innerHTML = "&nbsp;";
      space.classList.add("space");
      space.id = rowNum + "-" + col;
      space.addEventListener("click", playerTurn);
      row.appendChild(space);
    }
  }
}

// Implements functionality when a player turn is made
function playerTurn(event) {
  let spaceContent = event.target;
  let location = spaceContent.id.split("-");
  let row = location[0];
  let col = location[1];
  // update the gameboard array ("placeToken")
  placeToken(row, col);
  // update the gameboard DOM
  updateGameboard();
  // check whether the current Player has won
  numTurn++;
  let won = checkWon();
  if (won) {
    report("Congratulations! Player " + currentPlayer + " has won!");
    return
  }
  if (numTurn == 9) {
    report("There was a tie");
    return
  }
  updateTurn();
  // if the player has not won => update the Turn
  // if the player has won/tie => show the container-div
}

// Updates the gameboard variable to indicate a token was placed at a specific row, col
function placeToken(row, col) {
  if (gameboard[row][col] == -1) {
    if (currentPlayer == 1) {
      gameboard[row][col] = 1;
    } else { // currentPlayer == 2
      gameboard[row][col] = 2;
    }
  }
}

// Update who's turn it is
function updateTurn() {
  if (currentPlayer == 1) {
    currentPlayer = 2;
  } else { // currentPlayer = 1
    currentPlayer = 1;
  }
  let turn = document.querySelector("span");
  turn.textContent = "Player " + currentPlayer;
}

// Updates the gameboard generating the tokens based on the gameboard values
function updateGameboard() {
  for (let row = 0; row < 3; row++) {
    for (let col = 0; col < 3; col++) {
      let space = document.getElementById(row + "-" + col);
      space.innerHTML = "";
      if (gameboard[row][col] == 1) {
        let token = makeToken(player1);
        space.appendChild(token);
      } else if (gameboard[row][col] == 2) {
        let token = makeToken(player2);
        space.appendChild(token);
      } else { // gameboard[row][col] == -1

      }
    }
  }
}

// Creates and returns the token DOM element of the given player
function makeToken(player) {
  let token = document.createElement("img");
  token.classList.add("token");
  token.src = "./img/tokens/" + tokens[player.token].img;
  token.alt = tokens[player.token].name;
  return token;
}

// Report whether the player has won or lost
function report(message) {
  let winContainer = document.getElementById("win-container");
  let gameContainer = document.getElementById("gameboard");
  winContainer.classList.remove("hidden");
  gameContainer.classList.add("hidden");

  let h2 = document.querySelector("#win-container h2");
  h2.textContent = message;
}

// Restarts and shows the gameboard to play again
function playAgain() {
  clearGameboard();
  let winContainer = document.getElementById("win-container");
  let gameContainer = document.getElementById("gameboard");
  winContainer.classList.add("hidden");
  gameContainer.classList.remove("hidden");
  numTurn = 0;
}

// Clears the gameboard
function clearGameboard() {
  let rows = document.querySelectorAll(".row");
  for (let i = 0; i < rows.length; i++) {
    let row = rows[i];
    row.innerHTML = "";
  }
  gameboard = [
    [-1, -1, -1],
    [-1, -1, -1],
    [-1, -1, -1]
  ];
  populateSpace();
}

// Returns true/false if the current player who just made a move won
function checkWon() {
  // Horizontal
  for (let row = 0; row < 3; row++) {
    let count = 0;
    for (let col = 0; col < 3; col++) {
      if (gameboard[row][col] == currentPlayer) {
        count++;
      }
    }
    if (count == 3) {
      return true;
    }
    count = 0;
  }

  // Vertical
  for (let col = 0; col < 3; col++) {
    let count = 0;
    for (let row = 0; row < 3; row++) {
      if (gameboard[row][col] == currentPlayer) {
        count++;
      }
    }
    if (count == 3) {
      return true;
    }
    count = 0;
  }

  // Diagonal
  if (gameboard[0][0] == currentPlayer &&
    gameboard[1][1] == currentPlayer &&
    gameboard[2][2] == currentPlayer) {
    return true;
  }

  if (gameboard[0][2] == currentPlayer &&
    gameboard[1][1] == currentPlayer &&
    gameboard[2][0] == currentPlayer) {
    return true;
  }

  return false
}
```

```
body {
  font-family: 'Ranchers', Arial, Helvetica, sans-serif;
  background-color: cornsilk;
}

button {
  background-color: lightblue;
  padding: 10px;
  border: 1px solid grey;
  border-radius: 5px;
}

.space {
  width: 200px;
  height: 200px;
  border: 1px solid black;
  display: flex;
  justify-content: center;
  align-items: center;
}

.row {
  display: flex;
  justify-content: center;
}

h1,
h2,
p {
  text-align: center;
}

.hidden {
  display: none;
}

#win-container {
  border: 3px solid black;
  border-radius: 5px;
  padding: 15px;
  width: 80%;
  margin-left: auto;
  margin-right: auto;
}

#win-container button {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.token {
  max-width: 200px;
}

* {
  cursor: url("./img/uni.cur"), pointer;
}
```

```
 <meta name="author" content="Elisa" />
  <link href="https://fonts.googleapis.com/css2?family=Ranchers&display=swap" rel="stylesheet">
  <link href="./style.css" rel="stylesheet" />

<body>
  <h1>Tic Tac Toe Time</h1>
  <p>It's <span>Player 1</span> turn</p>
  <div id="gameboard">
    <div class="row"></div>
    <div class="row"></div>
    <div class="row"></div>
  </div>
  <div id="win-container" class="hidden">
    <h2>Hello</h2>
    <button id="again-btn">Play Again?</button>
  </div>
  <script src="index.js"></script>
</body>
```

我用 Adventure-Time 代币而不是 Xs 和 Os 完成了我的。当然，您可以使用任何您想要的图像。只需记住更改 JS 和 HTML 中的图像名称/ID。

# c# - 正则表达式消除 < 和 > 内的文本

> ID：12589600
> 
> 赞同：0
> 
> 时间：2012-09-25T19:14:04.703
> 
> 标签：c#, html, regex, replace

> **可能重复：**
> [使用 C# 正则表达式删除 HTML 标记](https://stackoverflow.com/questions/787932/using-c-sharp-regular-expressions-to-remove-html-tags)

我正在尝试编写仅返回 HTML 文件内容的代码。我认为最好的方法是围绕消除 < ..> 括号内的所有元素，或者列出 >...< 括号之间的所有文本。我对正则表达式很陌生，但我很确定它们是要走的路。

这是我尝试过的代码

```
 Regex reg = new Regex(@"<.*>");
        file = reg.Replace(file, ""); 
```

只要在一块文本之前只有一个 <...> ，它就可以工作。任何按顺序包含两个或更多这些元素的文件，例如 <...><...>，它会开始删除它找到的任何文本。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:18:14.230

正则表达式通常是贪婪的（它们匹配他们能找到的最长的字符串）。尝试根据您要查找的语言检查 +? 或者 *？运算符，它将尝试最短匹配。否则，您必须构建另一个正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:18:45.353

好吧，你得到的意外行为是因为你的正则表达式是贪婪的

如果您将正则表达式更改为

```
 Regex reg = new Regex(@"<.*?>");
    file = reg.Replace(file, ""); 
```

你会得到你所期望的。

另外，知道 Regex 不处理嵌套，HTML 有很多，我会避免使用 Regex 来解析 HTML，除非你试图匹配一个非常具体的东西，在一个特别形成的 html 上。

# ios - ios5 - xcode 4.4.1 - AddThis 配置

> ID：12589601
> 
> 赞同：2
> 
> 时间：2012-09-25T19:14:13.160
> 
> 标签：ios, ios5, xcode4.4, addthis

为了做到这一点，我正在尝试向我的 ios 应用程序添加社交共享功能，我正在尝试安装 AddThis。

我遵循了快速入门指南并尝试自己找到解决方案......它必须非常明显。

根据指南，我将不同的文件复制到我的项目中，但是当我在我想使用它的类中导入类“AddThis.h”时，Xcode 抱怨说找不到文件！

要复制文件，我已经转到 Xcode 中的“文件/添加文件”。在那里我选中“将项目复制到目标组的文件夹（如果需要）”框并将文件添加到目标。

**图片：**

1.  添加 AddThis 库：http: [//imageshack.us/photo/my-images/204/addaddthislib.png/](http://imageshack.us/photo/my-images/204/addaddthislib.png/)
2.  项目层次结构：http: [//imageshack.us/photo/my-images/690/projecthierarchy.png/](http://imageshack.us/photo/my-images/690/projecthierarchy.png/)

有人可以帮我吗？它必须非常明显......正如你所看到的，我是一个新的 iOS 程序员。

Xcode 版本：4.4.1 iOS 版本：5 AddThis 版本：0.2.0

感谢磨坊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:09:06.590

构建项目已经解决了这个问题。首先，当我正在处理 ARC 项目时，我必须将编译器标记“-fno-objc-arc”添加到所有 AddThis 类中。

# c# - 从 List 创建用户可读、显示友好的格式化字符串

> ID：12589602
> 
> 赞同：2
> 
> 时间：2012-09-25T19:14:15.310
> 
> 标签：c#, string

我知道有几个关于如何从列表中创建逗号分隔字符串的问题已被[提出](https://stackoverflow.com/q/799446/275643) [并](https://stackoverflow.com/q/368551/275643) [得到解答。](https://stackoverflow.com/q/205555/275643)我正在寻求一些稍微不同的帮助。

我想做的是从 a 创建一个显示友好的人类可读字符串，`List<string>`其内容为*"A, B and C are invalid values"*。字符串的语法和格式应根据列表中的项目数而改变。该列表可以包含任意数量的项目。

**例如：**

```
List<string> myString = new List<string>() { "Scooby", "Dooby", "Doo" };
// Should return "Scooby, Dooby and Doo are invalid values."

List<string> myString = new List<string>() { "Scooby", "Dooby" };
// Should return "Scooby and Dooby are invalid values."

List<string> myString = new List<string>() { "Scooby" };
// Should return "Scooby is an invalid value." 
```

**这是我到目前为止所做的：**

```
string userMessage = "";
foreach(string invalidValue in invalidValues)
{
  userMessage = " " + userMessage + invalidValue + ",";
}

// Remove the trailing comma
userMessage = userMessage.Substring(0, userMessage.LastIndexOf(','));

if (invalidValues.Count > 1)
{
  int lastCommaLocation = userMessage.LastIndexOf(',');
  userMessage = userMessage.Substring(0, lastCommaLocation) + " and " + userMessage.Substring(lastCommaLocation + 1) + " are invalid values.";
}
else 
{
  userMessage = userMessage + " is an invalid value.";
} 
```

有没有更好或更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T19:21:02.847

```
public static string FormatList(List<string> invalidItems)
{
    if(invalidItems.Count == 0) return string.Empty;
    else if(invalidItems.Count == 1) return string.Format("{0} is an invalid value", invalidItems[0]);
    else return string.Format("{0} and {1} are invalid values", string.Join(", ", invalidItems.Take(invalidItems.Count - 1)), invalidItems.Last());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T18:02:44.030

在他的另一个答案中非常感谢@Lee，这是他的方法的一个扩展版本。它允许您指定开始文本和/或结束文本，并且它使用牛津逗号，众所周知，它的遗漏曾经在诉讼中给原告带来灾难性的后果......但如果你讨厌该死的东西，您可以按照所写的方法将其从方法中删除。

```
 public static string GrammaticallyCorrectStringFrom(List<string> items, string prefaceTextWithNoSpaceAtEnd, string endingTextWithoutPeriod)
    {
        var returnString = string.Empty;
        if (items.Count != 0)
        {
            returnString = prefaceTextWithNoSpaceAtEnd + " ";
        }
        if (items.Count == 1)
        {
            returnString += string.Format("{0}", items[0]);
        }
        else if (items.Count == 2)
        {
            returnString += items[0] + " and " + items[1];
        }
        else if (items.Count > 2)
        {
            //remove the comma in the string.Format part if you're an anti-Oxford type
            returnString += string.Format("{0}, and {1}", string.Join(", ", items.Take(items.Count - 1)), items.Last());
        }
        if (String.IsNullOrEmpty(returnString) == false)
        {
            returnString += endingTextWithoutPeriod + ".";
        }           
        return returnString;
    } 
```

可能有更好、更简洁的方法来做同样的事情，但这对我有用，而且很难与结果争论。其实我猜不是，在这里，但仍然......无论如何，欢迎任何有火力来改进这一点的人。

# c# - System.Runtime.InteropServices.SEHException (0x80004005)：外部组件已抛出异常

> ID：12589604
> 
> 赞同：4
> 
> 时间：2012-09-25T19:14:24.267
> 
> 标签：c#

我在 Windows7 和 VS2010 上使用 C# 编写了 32 位代码，使用 .Net 3.5，它运行没有任何问题，现在我使用 .Net 4.0 将其转换为 64 位，但是当我的代码调用 CloseHandle 时出现错误。

错误 - CloseHandle
System.Runtime.InteropServices.SEHException (0x80004005)：外部组件已引发异常。

```
unsafe
{
    fixed (byte* p = readBuffer)
    {
         IntPtr intPtr = (IntPtr)p;
         this.ReadFile(ref sourceFile, (ulong)buffer_size, intPtr, ref nNumBytesRead);

         if (intPtr != IntPtr.Zero)
         {
             try
             {
                 FunctionSqudf.CloseHandle(intPtr);
             }
             catch (Exception ex)
             {
                  Hardware.LogHardware.Error("CloseHandle", ex);
             }
         }
      }
  }

    [SecuritySafeCritical]
    [DllImport("kernel32", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool CloseHandle(IntPtr hObject); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:22:43.027

您不能使用`CloseHandle`指向用户内存的指针。您需要分配 a`HANDLE`才能关闭它。你期望`CloseHandle`关闭什么？

# linux-kernel - 可加载内核模块的调试信息

> ID：12589605
> 
> 赞同：10
> 
> 时间：2012-09-25T19:14:29.993
> 
> 标签：linux-kernel

如何为可加载的 linux 内核模块构建调试信息（如 vmlinux- `uname -r`.debug 中的内核？）它是否在我们构建模块时生成，如果是，它将位于何处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T14:18:40.160

假设您已经使用 CONFIG_DEBUG_INFO 构建了内核，调试符号应该已经在相关模块的 .ko 文件中。然而，由于模块可以在任何地址动态加载，您需要为 gdb 提供更多信息。

```
cd /sys/module/${MODNAME}/sections
cat .text .data .bss 
```

然后，您可以在告诉 GDB 模块时使用此信息：

```
(gdb) add-symbol-file ${MODPATH} ${TEXT} -s .data ${DATA} -s .bss ${BSS} 
```

Linux Foundation 网站上有一个教程可以引导您完成此操作。[使用 GDB 进行内核和模块调试](https://www.linux.com/learn/kernel-newbie-corner-kernel-and-module-debugging-gdb)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-05T15:58:34.937

```
#Modify your Makefile like this then build it
#cat /sys/module/mydriver/sections/.text -> find the address
#Then run like add-symbol-file drivers/mydrivers/mydriver.o address from above #line
obj-m += module_name.o
MY_CFLAGS += -g -DDEBUG
ccflags-y += ${MY_CFLAGS}
CC += ${MY_CFLAGS}

all:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

debug:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules 
        EXTRA_CFLAGS="$(MY_CFLAGS)"
clean: make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

# android - 如何在游标对象保持第一行并移动以获取第二行时中断游标处理？

> ID：12589608
> 
> 赞同：1
> 
> 时间：2012-09-25T19:14:40.330
> 
> 标签：android, sqlite, android-logcat, android-cursoradapter

因为我只从 SqLite 数据库中获取一列，但在我的游标对象中获取了超过 1MB 的数据，我无法拆分我的数据库查询。一旦游标获取第一行并且在那个特定时间我想将此游标对象值保存在另一个对象中，是否可以中断游标处理。在该游标清除此值并移动到下一个以获取数据库中的第二行之后，这会一直持续到记录结束吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:17:06.847

如果您正在使用 Cursor(SQLiteCursor) - 在您获取第一行后，无法阻止游标“吃掉内存”（如您所说的中断处理）。

`android.database.sqlite`是用 C 编写的 sqlite3 库的 java 包装器。
事实是 sqlite3 没有函数来计算将产生多少记录语句，因此您必须在`sqlite3_step`函数的帮助下扫描整个结果集，直到它返回`SQLITE3_DONE`。
`SQLiteCursor`源自`CursorWindow`。 `CursorWindow`（有一些本机方法）目前`Cursors` `getCount()`第一次调用方法 - 它做两件事：计算行数并缓存这些行。

有用于 android 的 sqlite3 的 [自定义端口（俄语） ，具有您需要的功能。](http://habrahabr.ru/post/122408/)
如果看不懂俄语：
[java代码](http://narod.ru/disk/38545807001/biz.zip.html)
[本机代码](http://narod.yandex.ru/disk/16874621001/libs.zip)
[本机源](http://narod.yandex.ru/disk/16874615001/jni.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:52:50.763

如果您执行以下操作会怎样？（这只是一个想法）仅使用 id 列获取您需要的所有行（获取 id 而不是 blob 列）。迭代抛出该游标，并为每一行使用您的 blob 获取给定 id 的一行。然后关闭该 Cursor 并为下一个 id 行打开一个新的：

```
//just fetch the ids of the wanted rows
Cursor idCursor = db.query("TABLE_NAME",new String[]{"_id"}, null, null, null,null,null);
Cursor blobCursor;

    //for each row (id)
    while(idCursor.moveToNext())
    {

        //fetch one row with the blob of the given id
        blobCursor = db.query("TABLE_NAME",new String[]{"image"}, "_id = ?", new String[] {new Long(idCursor.getLong(0)).toString()}, null,null,null);

        if(blobCursor.moveToFirst())
        {

            //get the blob and store it
            blobCursor.getBlob(0); 

        }

        blobCursor.close(); //close the cursor (and release resources)

    }
idCursor.close(); 
```

# packages - 用于离线包安装的结构

> ID：12589612
> 
> 赞同：1
> 
> 时间：2012-09-25T19:14:49.917
> 
> 标签：packages, offline, fabric

我正在从事的项目使用结构进行许多构建步骤，并且需要离线构建作为后备。

我目前一直在安装 tarball 中提供的 python 包。

问题是我无法进入新提取的目录并`setup.py install`在其中运行。

```
@task
def deploy_artifacts():
    """Installs dependencies from local path, useful for offline builds"""
    #TODO: Handle downloading files and do something like this bellow
    tmpdir = tempfile.mkdtemp()
    artifacts_path = ''
    if not 'http' in env.artifacts_path:
        artifacts_path = env.artifacts_path

    with lcd(artifacts_path):

        for f in os.listdir(artifacts_path):
            if 'gz' in f:
                put(f, tmpdir)
                tar = os.path.join(tmpdir, f)
                target_dir = os.path.join(tempfile.gettempdir(), normalize(f))
                if not files.exists(target_dir):
                    run('mkdir %s' % target_dir)
                else: 
                    run('rm -rf %s' %target_dir)
                    run('mkdir %s' % target_dir)
                run('tar xf %s -C %s' % (tar, target_dir))
                run('rm %s' % tar)
                with cd(target_dir):
                    sudo('python setup.py install') 
```

我已经阅读了`tar`无数次的手册页，但我离得到我想要的东西还差得很远。

你们中的一些人是否遇到过这样的情况？对于这种情况，还有其他（阅读：更好的）方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:17:55.723

您正在尝试做的事情（原则上）没有任何问题。也许只是采取更小的步骤到达那里。与其使用临时目录，不如将所有内容都放在一个系统位置，该位置具有已知的权限，而按照惯例没有其他任何东西可以写入，它可能会使调试更容易。至少这可以让您使用结构和手动干预的某种组合来检查出了什么问题。

从长远来看，我看到了一些替代方案。为简单起见，您希望在线和离线版本以相同的方式工作，这意味着在两种情况下都使用 easy_install / [pip](http://www.pip-installer.org/en/latest/index.html)获取包。

一种方法是构建[PyPi](http://pypi.python.org/)的镜像。如果您有足够的存储空间（30Gb），正确的方法是使用实[​​现 PEP381](http://www.python.org/dev/peps/pep-0381/)（PyPI 的镜像基础设施）的软件，已经有一个客户端可以执行此操作（[pep381client](http://pypi.python.org/pypi/pep381client)）。有许多其他项目可以做类似的事情（[basketweaver](http://pypi.python.org/pypi/basketweaver/0.1.3-r0)、[djangopypi2](http://pypi.python.org/pypi/djangopypi2/0.5.0)、[chishop](https://github.com/ask/chishop)）。

另一种选择是考虑更轻量级的代理方案。我一直在寻找[pip2pi](https://github.com/wolever/pip2pi)和[pipli](https://github.com/amenasse/pipli)。我不确定他们是否会直接使用 easy_install，但值得一试。

还值得注意的是，如果您使用 pip，您可以直接从 tarball 安装。

# objective-c - 在类类别中使用 ObjC 类扩展的变量

> ID：12589614
> 
> 赞同：2
> 
> 时间：2012-09-25T19:15:04.093
> 
> 标签：objective-c, categories

我声明了一个向其添加变量的类扩展接口。是否可以访问该类的类别中的这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:36:21.580

当然 - 任何变量都可以通过运行时访问，即使它在`@interface`:

**一些类.h**

```
@interface SomeClass : NSObject {
    int integerIvar;
}

// methods

@end 
```

**SomeClass.m**

```
@interface SomeClass() {
   id idVar;
}

@end

@implementation SomeClass

// methods

@end 
```

**SomeClass+Category.m**

```
@implementation SomeClass(Category)

-(void) doSomething {
    // notice that we use KVC here, instead of trying to get the ivar ourselves. 
    // This has the advantage of auto-boxing the result, at the cost of some performance.
    // If you'd like to be able to use regex for the query, you should check out this answer:
    // http://stackoverflow.com/a/12047015/427309  
    static NSString *varName = @"idVar"; // change this to the name of the variable you need

    id theIvar = [self valueForKey:varName]; 

    // if you want to set the ivar, then do this:
    [self setValue:theIvar forKey:varName];
}

@end 
```

您还可以使用 KVC 在 UIKit 或类似中获取类的 iVar，同时比纯运行时黑客更容易使用。

# python - 编译python扩展模块时链接错误

> ID：12589617
> 
> 赞同：3
> 
> 时间：2012-09-25T19:15:15.070
> 
> 标签：python, linker, extension-modules

所以我正在用 C 语言编写一个 python 扩展模块，并试图为我的 64 位 Python 构建编译它。在对 MinGW 进行了一番抨击之后，我进行了一些谷歌搜索，发现 MinGW 不做 64 位扩展模块，所以我用 Win7 SDK 和 DISTUTILS_USE_SDK 和 MSSdk 设置了 Visual C++ 2008 Express 都等于 1 为在[这个问题](https://stackoverflow.com/questions/4624507/building-64-bit-c-python-extensions-on-windows)的答案中。

我终于让 Distutils 找到了编译器，但是当我编译扩展时，我得到了这个输出：

```
core.obj : error LNK2019: unresolved external symbol __imp__PyErr_NoMemory refer
enced in function "int __cdecl handleErrors(int)" (?handleErrors@@YAHH@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyErr_SetString refe
renced in function "int __cdecl handleErrors(int)" (?handleErrors@@YAHH@Z)
core.obj : error LNK2019: unresolved external symbol _opus_encoder_destroy refer
enced in function "void __cdecl OpusEncoder_dealloc(struct OpusEncoderObject *)"
 (?OpusEncoder_dealloc@@YAXPAUOpusEncoderObject@@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__Py_BuildValue refere
nced in function "int __cdecl OpusEncoder_init(struct OpusEncoderObject *,struct
 _object *,struct _object *)" (?OpusEncoder_init@@YAHPAUOpusEncoderObject@@PAU_o
bject@@1@Z)
core.obj : error LNK2019: unresolved external symbol _opus_encoder_create refere
nced in function "int __cdecl OpusEncoder_init(struct OpusEncoderObject *,struct
 _object *,struct _object *)" (?OpusEncoder_init@@YAHPAUOpusEncoderObject@@PAU_o
bject@@1@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyArg_ParseTupleAndK
eywords referenced in function "int __cdecl OpusEncoder_init(struct OpusEncoderO
bject *,struct _object *,struct _object *)" (?OpusEncoder_init@@YAHPAUOpusEncode
rObject@@PAU_object@@1@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyTuple_Pack referen
ced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncoderO
bject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderObj
ect@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyString_FromString
referenced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusE
ncoderObject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEnc
oderObject@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol _opus_encode_float referenc
ed in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncoderOb
ject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderObje
ct@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyFloat_AsDouble ref
erenced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEnco
derObject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncode
rObject@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyType_IsSubtype ref
erenced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEnco
derObject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncode
rObject@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyFloat_Type referen
ced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncoderO
bject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderObj
ect@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol _opus_encode referenced in
function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncoderObject *
,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderObject@@PA
U1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyErr_Occurred refer
enced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncode
rObject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderO
bject@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyInt_AsLong referen
ced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEncoderO
bject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncoderObj
ect@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyArg_ParseTuple ref
erenced in function "struct _object * __cdecl OpusEncoder_encode(struct OpusEnco
derObject *,struct _object *)" (?OpusEncoder_encode@@YAPAU_object@@PAUOpusEncode
rObject@@PAU1@@Z)
core.obj : error LNK2019: unresolved external symbol __imp__PyModule_AddObject r
eferenced in function _initopys
core.obj : error LNK2019: unresolved external symbol __imp__PyErr_NewException r
eferenced in function _initopys
core.obj : error LNK2019: unresolved external symbol __imp__Py_InitModule4 refer
enced in function _initopys
core.obj : error LNK2019: unresolved external symbol __imp__PyType_Ready referen
ced in function _initopys
core.obj : error LNK2019: unresolved external symbol __imp__PyType_GenericNew re
ferenced in function _initopys
core.obj : error LNK2019: unresolved external symbol __imp__Py_Initialize refere
nced in function _main
core.obj : error LNK2019: unresolved external symbol __imp__Py_SetProgramName re
ferenced in function _main
build\lib.win-amd64-2.7\opys.pyd : fatal error LNK1120: 23 unresolved externals
error: command '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\link.
exe"' failed with exit status 1120 
```

在用头撞了3天后，我有点撞墙了，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:06:37.907

*根据我的经验，除了完整*版的 Visual C++之外，使用 Microsoft 提供的任何东西在 Windows 上构建 python 模块是非常困难的。此外，Visual Studio 的版本必须*与*用于构建 Python 发行版的版本相匹配。

例如，使用 Python 2.7.1 的官方二进制 dist：

```
C:\Python27>python
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on win32
... 
```

根据[我的计算机上的 Python 是用什么版本的 Visual Studio 编译的？](https://stackoverflow.com/questions/2676763/what-version-of-visual-studio-is-this-python-compiled-with)，这意味着 python 是用 Visual C++ 2008 构建的。

对于每个版本的 Visual Studio，都有对应的 Windows SDK 版本，因此如果您想尝试使用免费工具使其工作，您需要找到并安装*正确*的Windows SDK 版本。我认为这可能是[http://www.microsoft.com/en-us/download/details.aspx?id=24826](http://www.microsoft.com/en-us/download/details.aspx?id=24826)，但我不是 100% 确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T22:06:45.870

我有同样的错误。[从https://github.com/nwcell/psycopg2-windows](https://github.com/nwcell/psycopg2-windows)安装 psycopg2解决了我的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T02:07:27.960

1、必须确保python x64、oracle客户端x64（win7 x64），所有版本必须匹配。

2、也许你必须“为python2.7安装vc++”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T09:34:30.873

就我而言，更改 Visual Studio 中的项目属性（为 x64 而不是 x86 构建解决方案）有所帮助，因为我使用的 Python 版本是 64 位。两个版本应匹配。

# rdf - Jena RDF/模型类是否支持其他 RDF/XML 的 RDF 序列化模型

> ID：12589620
> 
> 赞同：0
> 
> 时间：2012-09-25T19:15:19.047
> 
> 标签：rdf, jena, rdfa, rdfs

我想知道 Jena [RDF.Model 类](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html)是否支持特定的 RDF 序列化格式，或者它将提供 RDF 数据的任何序列化格式转换为模型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:25:08.847

可以以各种格式（RDF/XML、N3、Turtle、N-Triples）序列化和解析 Jena 模型。有关概述，请参阅[jena.apache.org/documentation/io/index.html ，或](http://jena.apache.org/documentation/io/index.html)[本教程的 I/O 部分](http://jena.apache.org/tutorials/rdf_api.html#ch-Writing%20RDF)。

# java - 我可以使用java将excel电子表格保存为jpg吗？

> ID：12589626
> 
> 赞同：2
> 
> 时间：2012-09-25T19:15:43.423
> 
> 标签：java, excel, apache-poi, jpeg

有谁知道是否可以使用 java 将 Excel 电子表格保存为 jpg？目前，我正在使用 Apache POI 在 Java 中阅读和操作 Excel 电子表格。它对其他一切都很好，但我无法在他们的文档或在线找到这个问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-27T05:26:41.450

有一些商业库可以这样做，另一种解决方案是使用 Apache POI 将您的 Excel 呈现为 HTML，然后使用类似[java-html2image的库将其转换为图像](https://github.com/hkirk/java-html2image)

# java - viewScoped bean 中的静态对象，用于 fileUpload 倍数的占位符

> ID：12589630
> 
> 赞同：0
> 
> 时间：2012-09-25T19:16:02.353
> 
> 标签：java, jsf-2, primefaces

我正在使用带有倍数和 fileUploadListener 方法的 primefaces fileUpload。每次上传的每个文件都会调用监听器，我想将每个文件存储在 arrayList 中，并在最后一个上传后循环遍历列表并将它们存储在数据库中。

我的托管 bean 是 viewScoped，是否可以使用静态 arrayList 来存储上传，或者是否有更好的方法来处理这个问题？

小面

```
 <p:fieldset legend="Info">
       <p:selectOneRadio id="newold" value="#{newmailer.selectedCompStatus}">  
            <f:selectItem itemLabel="Existing Company" itemValue="exist" />  
            <f:selectItem itemLabel="New Company" itemValue="new" />   
            <p:ajax  listener="#{newmailer.setComp}" event="valueChange" update="main" execute="@all" />
       </p:selectOneRadio>  

       <p:panelGrid columns="2" styleClass="Grid" style="margin-bottom:10px" cellpadding="5" rendered="#{newmailer.exist}">    
                <h:outputLabel value="Company"  id="Company" />
                <p:selectOneMenu value="#{newmailer.selectedComp}" id="companies"  label="Company">
                    <f:selectItem itemLabel="Choose Company" itemValue="" />  
                    <f:selectItems value="#{mailerInfo.companies}" var="comp" />
                    <p:ajax  listener="#{demo.getCompanyMailer}" event="valueChange"  execute="@all" />
                </p:selectOneMenu> 
        </p:panelGrid>
        <p:panelGrid  id="newPanel" styleClass="Grid"  columns="2" style="margin-bottom:10px" cellpadding="5" rendered="#{!newmailer.exist and newmailer.showInfo}"> 
            <h:outputLabel value="Company"  id="Company2" />   
            <p:inputText id="newCompany" value="#{newmailer.selectedComp}" immediate="true"> 
                <f:ajax event="change"/>                
            </p:inputText>
        </p:panelGrid>

        <p:panelGrid styleClass="Grid" columns="2" style="margin-bottom:10px" cellpadding="5" rendered="#{newmailer.showInfo}">    
            <h:outputLabel value="Mailer Id"  />   
            <p:inputText id="mailerId" value="#{newmailer.mailerId}" immediate="true">
                <f:ajax event="change"/> 
            </p:inputText>
        </p:panelGrid>

    </p:fieldset>
    <p:fieldset legend="Status" rendered="#{newmailer.showInfo}">                             
        <p:selectOneRadio id="status"  value="#{newmailer.status}" immediate="true">  
            <f:selectItem itemLabel="Active" itemValue="A" />  
            <f:selectItem itemLabel="Inactive" itemValue="I" />   
            <f:ajax event="change"/>
        </p:selectOneRadio>  

    </p:fieldset>
    <p:fieldset legend="Description" rendered="#{newmailer.showInfo}">
        <p:inputTextarea rows="5" cols="30" value ="#{newmailer.desc}" counter="counter" maxlength="10"       
            counterTemplate="{0} characters remaining." autoResize="false" immediate="true">
            <f:ajax event="change"/>
        </p:inputTextarea>        
    </p:fieldset>
    <p:fieldset legend="Load Image" rendered="#{newmailer.showInfo}"> 
        <p:fileUpload fileUploadListener="#{newmailer.handleFileUpload}"  
            mode="advanced"   
            update="messages"  
            sizeLimit="100000"   
            allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/"
            process="@form"
            multiple="true"

        />  
    </p:fieldset>
    <p:growl id="messages" showDetail="true"/>  

</p:panelGrid>
 <!--  <p:commandButton value="Submit" type="sumbit" action="#{newmailer.submit}" ajax="false"/>-->

</h:form> 
```

豆

```
 @ViewScoped
 @ManagedBean(name="newmailer")
 public class NewMailerBean implements Serializable{

private String status;
private String compStatus;
private String selectedCompStatus;
private String selectedComp;
private String mailerId;
private String desc;
private boolean exist;
private boolean showInfo;
public static Mailer mail;
public static boolean multi=false;
public ArrayList<byte []> images = new ArrayList<byte []>();

    public void handleFileUpload(FileUploadEvent event) {  

        Mailer mail = new Mailer(); 
        mail.setCompany(selectedComp);
        mail.setDesc(desc);
        mail.setMailerId(mailerId);
        mail.setStatus(status);
        mail.setUserId("test");

     try{

         InputStream inputStream = event.getFile().getInputstream();
         ByteArrayOutputStream out=new ByteArrayOutputStream(1024);

         int read = 0;
         byte[] bytes = new byte[1024];

         while ((read = inputStream.read(bytes)) != -1) {
             out.write(bytes, 0, read);
         }

         byte[] bytearray = out.toByteArray();
         inputStream.close();
         out.flush();
         out.close();

         images.add(bytearray);
         mail.setImg(bytearray);

     }catch(IOException e) {
         e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:43:26.680

静态变量是类级别的，因此在同一类的所有实例之间共享，因此其行为类似于全局应用程序范围的变量。您的 webapp 的每个访问者都将共享相同的变量。每个访问者的每个上传文件最终都会出现在同一个列表中，而该列表又对每个访问者可见。

这是你真正想要的吗？

我不这么认为。只是不要让它成为一个静态变量。删除`static`修饰符，您应该使用视图范围的 bean 进行设置。只要您通过 ajax 与同一个视图交互，视图范围的 bean 就会存在。

### 也可以看看：

*   [基本 Java 教程 - 了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# php - 如何修复drupal中的这个错误？未找到列：1054“字段列表”中的未知列“base.type”

> ID：12589634
> 
> 赞同：0
> 
> 时间：2012-09-25T19:16:13.610
> 
> 标签：php, sql, drupal-7

请有人可以帮助我我是drupal的新手，我正在制作一个分类的drupal网站，一切都很好，但我安装了媒体模块，当我卸载这个模块时，我的网站向我显示了这个错误，我不知道如何解决它，我现在在我的网站上看不到任何东西这个网站在我的本地服务器 WAMPSERVER 中，错误是这样的

db_condition_placeholder_44, :db_condition_placeholder_45, :db_condition_placeholder_46, :db_condition_placeholder_47, :db_condition_placeholder_48, :db_condition_placeholder_49, :db_condition_placeholder_50, :db_condition_placeholder_51, :db_condition_placeholder_52, :db_condition_placeholder_554), :db_condition_placeholder_55), :db_condition_placeholder_52): 数组 ( [:db_condition_placeholder_0] => 1 [:db_condition_placeholder_1] => 2 [:db_condition_placeholder_2] => 3 [:db_condition_placeholder_3] => 4 [:db_condition_placeholder_4] => 5 [:db_condition_placeholder_5] => 6 [:db_condition_placeholder_6] => 7 [:db_condition_placeholder_7] => 8 [:db_condition_placeholder_8] => 9 [:db_condition_placeholder_9] => 10 [:db_condition_placeholder_10] => 12 [:db_condition_placeholder_11] => 13 [:

请有人可以帮助我，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:17:46.810

您需要运行更新功能。看起来您已更新代码，但尚未更新数据库。[http://www.yoursite.com/update.php](http://www.yoursite.com/update.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:41:40.737

卸载 file_entity 模块时遇到了这个问题。下载并启用它（由于 Drush 不再有效，因此通过 UI 手动），然后`drush cc all`禁用和卸载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T15:52:02.120

我有同样的问题：当我启用一些模块并重新启动计算机时，我发现我的drupal测试站点无法启动，当然我无法运行update.php，也无法像其他人建议的那样清除缓存。我访问 mysql 服务器，并更改表 FILE_MANAGED，添加一个 TYPE 列。然后，我尝试了我的 drupal 测试站点，它工作正常。我现在可以以管理员身份登录，继续工作 - 问题已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T19:16:00.197

我遇到了几乎相同的问题，我所做的是转到遇到问题的文件（在您的情况下为 entity.inc 第 196 行）然后我评论了该行本身然后我尝试更新它不起作用的网站，然后我在该行上方和下方评论其他情侣行，然后我的 update.php 工作，但出现错误，然后我再次回到该文件并取消注释这些行，我的网站恢复并运行。当我在没有运行 update.php 的情况下对我的 install(hook_schema) 文件进行更新时，我的错误出现了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T16:26:15.317

可能的根本原因是模块安装期间对站点/所有/模块目录的写访问权限。

我已经成功修复了 webform 模块使用 drush 应用以下过程的类似问题。

```
$ drush dis webform # disable target module
$ drush pmu webform # uninstall target module - probable warnings 
```

在 serverur 中删除完整的 webform（或模块名）目录

```
$ rm -rf <drupal path>/sites/all/modules/webform
$ drush cc all # flush all caches - probable warning 
```

使用 msyql cmd 删除 SQL 数据库中的 webform（或模块名）相关表

```
mysql -u root -p;
MYSQL> use <drupaldatabase>;
MYSQL> DROP TABLE webform, webform_component, webform_conditional, webform_conditional_actions, webform_conditional_rules, webform_emails, webform_last_download, webform_roles, webform_submissions, webform_submitted_data; 
```

确保 /sites/all/modules 上的正确权限，例如

```
$ chown -R me:www-data <drupal path>/sites/all/modules
$ chmdo -R 775 <drupal path>/sites/all/modules 
```

准备好使用 drush 启用所需的模块

```
$ drush en webform # or desired module
$ drush cc all # flush all caches 
```

您的模块已正确安装且可用

# wpf - 为什么触发 MouseOver 状态后，Checked 状态的 ColorAnimation 不保持颜色？

> ID：12589636
> 
> 赞同：5
> 
> 时间：2012-09-25T19:16:20.330
> 
> 标签：wpf, controltemplate, togglebutton, visualstates

`ControlTemplate`我创建的for遇到了问题`ToggleButton`。

当按钮为`Checked`时，`ColorAnimation`触发 a 并且控件的背景改变颜色。但是，如果用户进入该`MouseOver`状态，则会触发另一个动画，该动画也会影响按钮的背景。

当鼠标不再处于该`MouseOver`状态时，控件不会返回到它处于该状态时应具有的颜色`Checked`。我不确定为什么在`MouseOver`触发状态时这种情况不会持续存在。

我的`VisualStateManager`部分`ControlTemplate`看起来是这样的：

```
<VisualStateManger.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal"></VisualState>
        <VisualState x:Name="MouseOver">
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="BackgroundBorder"
                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                    To="Gold" Duration="0:0:0.3" />
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
    <VisualStateGroup x:Name="CheckedStates">
        <VisualState x:Name="Checked">
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="BackgroundBorder"
                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                    To="PaleGoldenrod" Duration="0:0:0.3" />
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:53:57.993

我针对我所涉及的问题的解决方法是创建一个`Grid`包含`Border`.

对于`CommonStates`我对 进行了动画更改，`Border.Background`对于`CheckedStates`我对`Grid.Background`.

它达到了我想要的视觉效果。

# javascript - 有没有办法捕获对文本区域的更改？

> ID：12589637
> 
> 赞同：1
> 
> 时间：2012-09-25T19:16:34.187
> 
> 标签：javascript, jquery

这是我现在正在使用的

```
$("#text").on("input", function(event){

    console.log("The changes are:" + SomeDataThatIDontKnowHowToAccess);

}); 
```

我意识到这可能会破坏文本/插入/删除的退格/粘贴。我真的不知道如何处理，也许有删除/插入/覆盖事件......我宁愿不推出自己的解决方案。

**一个例子**

用户粘贴`something`到空白文本区域

`{eventType:'insert', value:'something'}`

出现在控制台中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:23:20.660

将旧值写入您可以坚持专注的地方。然后您可以在事件中使用自己的逻辑`change`来查找新旧值之间的差异

```
$('#text').on('focus', function () {
    //THIS LINE IS INCORRECT [what was wrong with my fiddle]... assignment is parameter *doh*
    //$(this).data('oldValue') = $(this).val();
    //THIS IS THE CORRECT LINE
    $(this).data('oldValue', $(this).val());
}).on('change', function() {
    alert('Old Value: ' + $(this).data('oldValue') + '\nNew Value: ' + $(this).val());
}); 
```

小提琴为你： http: [//jsfiddle.net/BLSully/jqbAr/1/](http://jsfiddle.net/BLSully/jqbAr/1/) [*固定*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:25:08.593

你必须在这里做两件事。首先，您必须缓存最后一个值。这样，当新值进来时，你就有了与之比较的东西。

其次，您需要查看（并下载）[John Resig 提供的字符串差异函数](http://ejohn.org/projects/javascript-diff-algorithm/)。你会得到 diff 的输出到 div 的 html 中。结果看起来很棒。

然后，您的解决方案将如下所示：

```
$("#text").data('lastvalue', $("#text").val());
$("#text").on("input", function(event){
    var diff = diffString($("#text").data('lastvalue'), $("#text").val()); 
    $('#changesdiv').html("The changes are:" + diff);
    $("#text").data('lastvalue', $("#text").val());
});​ 
```

**更新**

[我修复了脚本上的一些错误，并在http://jsfiddle.net/m3KAa/6/](http://jsfiddle.net/m3KAa/6/)上运行了一个 jsfiddle

恕我直言，这个`diffString`功能真的很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:21:09.140

如果您需要获取当前值，则需要使用 keyup 事件

```
$("#text").on("keyup ", function(event){
    console.log("The changes are:" + $(this).val() );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T19:18:46.197

尝试这个

// 当textarea失去焦点时可以使用这个事件

```
$("#text").on("change", function(event){

    console.log("The changes are:" + $(this).val() );

}); 
```

// 这个事件可以用于用户开始打字并且按键被按下

```
 $("#text").on("keyup", function(event){

        console.log("The changes are:" + $(this).val() );

    }); 
```

//

```
$("#text").on("input",   // Here input is not a event you are supposed to used 
```

// 尝试改用更改事件..

# javascript - Javascript 插件/片段组合器

> ID：12589642
> 
> 赞同：2
> 
> 时间：2012-09-25T19:16:57.463
> 
> 标签：javascript, jquery, generator, builder

[我一直在http://jqueryui.com/download](http://jqueryui.com/download)寻找类似下载生成器的东西。

我有一些代码片段和插件，我希望能够逐个项目地从中进行选择。我并不总是需要项目中的所有功能，因此我想通过复选框选择单个片段，并将它们全部下载到单个 js 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:00:32.763

查看[*早午餐*](http://brunch.io/)。它是一个与框架无关的应用程序组装器。没有像 jQuery UI 那样简洁的 gui，而且它肯定不像用户友好的那样接近。我还没有完全掌握它的艺术，但是您可以控制哪些脚本包含在 JSON 配置文件中，然后依次下载脚本。这包括

使用`brunch --watch server`允许您部署一个 NodeJS 服务器，该服务器将在您更改它时不断编译/缩小您的工作。查看[*骨架的*](https://github.com/brunch/brunch/wiki/Skeletons)其他用户制作的列表，您可以轻松下载和试用。

如果您正在寻找更轻量级的东西，我会推荐[RequireJS](http://requirejs.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:06:14.727

Another thing you may want to do is write simple build scripts using [GearJS](http://gearjs.org/) by Yahoo. It allows you to very simply select a group of files then say concatenate them, and minify them. An example queue would look something like this:

```
var gear= require('gear');

new gear.Queue({registry: new gear.Registry({module: 'gear-lib'})})
  .log('Starting javascript build...')
  .log('Reading js files...')
  .read([
    'js/app.js',
    'js/autoflex.js',
    'js/bootstrap.js',
    'js/jquery.history.js',
    'js/templates.js'])
  .log('concatenating files...')
  .concat()
  .log('minifying...')
  .jsminify()
  .log('saving to js/app.min.js')
  .write('js/app.min.js')
  .run(function(err, results) {
    if(err) {
        console.log(err);
        return;
    }
    console.log(('' + results[0]).length + ' characters');
   }); 
```

So, this runs with node. You could make a small set of builds using each snippet (app1.build.js->app1.min.js, myapp.build.js->myapp.min.js, etc.) It's not a GUI, but it is a very nice way to perform a set of actions on a group of javascript files.

# jakarta-ee - 运行 servlet 时出现错误页面

> ID：12589650
> 
> 赞同：0
> 
> 时间：2012-09-25T19:17:30.917
> 
> 标签：jakarta-ee

我在 eclipse Juno 中创建了一个动态 Web 项目，并在服务器（Tomcat6.0）上运行时，得到错误页面 HTTP Status 404 - /FirstServlet/ 并显示以下消息：

> 类型状态报告
> 
> 消息 /FirstServlet/
> 
> 描述 请求的资源 (/FirstServlet/) 不可用。

在这里我观察到 url 是 ---http://localhost:5533/FirstServlet/

谁能告诉我如何解决它。

这是在 FirstServlet 中创建的文件

**Servlet 类代码**

```
package com.surendra.servlets;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class HelloWorldServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public HelloWorldServlet() {
        super();
    }
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter p = response.getWriter();
        p.println("Hello World");
    }

} 
```

**Web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
      <display-name>FirstServlet</display-name>
  <servlet>
    <description></description>
    <display-name>first</display-name>
    <servlet-name>HelloWorldServlet</servlet-name>
    <servlet-class>com.surendra.servlets.HelloWorldServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>first</servlet-name>
    <url-pattern>/HelloWorldServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:21:44.150

此外，您应该以 /HelloWorldServlet 的形式访问它，或者按照前面作者的配置以 /FirstServlet 的形式访问它，如 URL 模式中所述。

一些小事要额外检查。你的战争文件名是什么？您是否已复制/部署到您的应用程序服务器文件夹中？

如果是这样，您的网址应该是`http://localhost:8080/war_name/servlet_name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:25:44.997

将您的 web.xml 更改为：

```
<servlet>
    <description></description>
    <display-name>first</display-name>
    <servlet-name>FirstServlet</servlet-name>
    <servlet-class>com.surendra.servlets.HelloWorldServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>FirstServlet</servlet-name>
    <url-pattern>/FirstServlet</url-pattern>
  </servlet-mapping> 
```

在您的 web.xml 中，URL 模式描述了您将要使用的 URL：

```
<url-pattern>/XXXX</url-pattern> --> http://localhost:5533/XXXX/ 
```

还`servlet-name`必须与 servlet 描述相匹配

```
<servlet>
    <description></description>
    <display-name>first</display-name>
    <servlet-name>XXXXXXXXXX</servlet-name>  <!--- HERE ---->
    <servlet-class>com.surendra.servlets.HelloWorldServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>XXXXXXXXXX</servlet-name>  <!--- AND HERE ---->
    <url-pattern>/FirstServlet</url-pattern>
  </servlet-mapping> 
```

# java - Amazon DynamoDB 映射枚举

> ID：12589654
> 
> 赞同：31
> 
> 时间：2012-09-25T19:17:50.583
> 
> 标签：java, amazon-web-services, amazon-dynamodb

我需要为 Amazon DynamoDB 映射一个用户类。User 对象的属性之一是 AccountType（枚举）。我该如何处理？下面是我尝试过的枚举和代码。

```
public enum AccountType {
    TYPE_A,
    TYPE_B
} 
```

-

```
@DynamoDBAttribute(attributeName="AccountType")   *<< THIS FAILS*
public AccountType getAccountType() {
    return accountType;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2017-02-27T14:30:18.210

AWS 开发工具包支持特殊注释[DynamoDBTypeConvertedEnum](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/datamodeling/DynamoDBTypeConvertedEnum.html)将枚举转换为字符串。

```
@DynamoDBTypeConvertedEnum
@DynamoDBAttribute(attributeName="AccountType")
public AccountType getAccountType() {
    return accountType;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-26T08:22:49.240

[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)提供的[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)高级 API（*对象持久性模型*）尚不支持，请参阅[支持的数据类型](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaSDKHighLevel.html#JavaSupportedTypeORMModel)：`enum`

> Amazon DynamoDB 支持以下原始数据类型和原始包装类。
> 
> *   细绳
> *   布尔值，布尔值
> *   字节，字节
> *   日期（作为 ISO8601 毫秒精度字符串，转换为 UTC）
> *   日历（作为 ISO8601 毫秒精度字符串，转换为 UTC）
> *   长长的
> *   整数，整数
> *   双倍，双倍
> *   漂浮，漂浮
> *   大十进制
> *   大整数

但是，*Amazon DynamoDB*原则上支持任意数据类型，因此您可能能够解决该限制，有关详细信息，请参阅[使用 AWS SDK for Java Object Persistence Model 使用 Amazon DynamoDB 映射任意数据](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaArbitraryDataMappingHLAPI.html)：

> 除了支持的 Java 类型 [...]，您还可以在应用程序中使用没有直接映射到 Amazon DynamoDB 类型的类型。要映射这些类型，您必须提供将复杂类型转换为 String 实例（反之亦然）的实现，并使用 @DynamoDBMarshalling 注释类型注释复杂类型访问器方法。[...]

# erlang - 为什么透析器发现我的类型规范无效？

> ID：12589666
> 
> 赞同：2
> 
> 时间：2012-09-25T19:18:51.463
> 
> 标签：erlang, type-systems, dialyzer

我是透析器的新手，我希望有人可以通过回答这个问题让我快速了解它的操作。

我认为下面的函数，给定一个数字 X 和一个非负整数 N，会产生一个数字。（X 的 N 次方。）

```
-spec pow(X :: number(), N :: non_neg_integer) -> number().
pow(X, N) ->
    pow(X, N, 1).
pow(_X, 0, R) ->
    R;
pow(X, N, R) ->
    pow(X*X,
        N bsr 1,
        if
            N band 1 =:= 0 ->
                R;
            true ->
                X*R
        end). 
```

但是透析器不喜欢我的规格。它告诉我：

```
Invalid type specification for function t:pow/2.
The success typing is (_,integer()) -> any() 
```

在我看来，它所暗示的规范过于包容。有人可以解释它为什么这样做，以及是否有任何方法可以让更严格的类型规范被接受？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T22:07:02.093

我相信这是因为你写了 non_neg_integer 而不是 non_neg_integer()。

# git - 备份和恢复 gitosis 和其他 git repos

> ID：12589671
> 
> 赞同：1
> 
> 时间：2012-09-25T19:19:06.457
> 
> 标签：git, backup, restore, gitosis

我正在尝试将 gitosis 和存储库备份到备份 tarball，然后在空白系统上恢复和测试，以确保在服务器完全故障的情况下，我可以让新系统快速运行。

我有两个目录使用

```
git clone --mirror gitosis@localhost:gitosis-admin.git gitosis-backup.repo
git clone --mirror gitosis@localhost:test1.git test1-backup.repo 
```

然后去皮

在我安装干净的机器上，我已经提取了 tarball 并完成了

```
git clone gitosis-backup.repo gitosis-admin
git clone test1-backup.repo test1 
```

进入这两个目录并执行 git log 会显示历史记录。

但这并不适用于新服务器。但是做 git push origin master 不起作用，它声称是最新的。

但是任何从我的新服务器进行克隆的尝试都失败了，因为非常正确，repo 实际上并不是服务器的一部分。

那么我该如何完成工作呢？我一直无法在此站点或任何其他站点上找到有关恢复 gitosis 的答案。

在 VoC 的帮助下测试的输出如下

```
mkdir git_restore
cd git_restore
mkdir tarballs
cd tarballs
cp ~/backup/*.tgz
tar -zxf gitosis-admin.repo.tgz
tar -zxf test1-backup.repo.tgz

cd ..
mkdir local_repo
cd local_repo

ssh-keygen

sudo apt-get install gitosis

sudo -H -u gitosis gitosis-init < /home/ian/.ssh/id_rsa.pub

ls /srv/gitosis/git # check that this is not a broken sym link

git clone gitosis@localhost:gitosis-admin

cd gitosis-admin

git log # Has the initialise entry

cd ../..

mkdir restore

cd restore

git clone ../tarballs/gitosis-admin.repo gitosis-admin
git clone ../tarballs/test1-backup.repo test1

cd gitosis-admin

git log # Full log is present

git push gitosis@localhost:gitosis-admin master
To gitosis@localhost:gitosis-admin
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'gitosis@localhost:gitosis-admin'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details.

git status
# On branch master
nothing to commit (working directory clean)

git fetch

git merge origin master
Already up-to-date. Yeeah!

git push gitosis@localhost:gitosis-admin master
To gitosis@localhost:gitosis-admin
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'gitosis@localhost:gitosis-admin'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

顺便说一句， git push gitosis@localhost:gitosis-admin origin/master 似乎在推动，但是如果我在一个单独的目录中克隆 gitosis-admin 然后执行 git log 那么我只有初始化条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:11:23.123

如果您使用 ssh 地址，如“[使用 gitosis 安全轻松地设置 git](http://four-bits.com/2009/08/20/setting-up-git-securely-and-easily-using-gitosis/) ”中所述，您需要确保 gitosis 管理员帐户拥有`~gitosis/.ssh/authorized_keys`您在第一台服务器上的权限，以及最初用于克隆`gitosis-admin.git`回购。

总结以下评论：

*   在服务器上安装 gitosis
*   确保您的 ssh 守护进程正在所述服务器上运行
*   生成一个新密钥（仍然在服务器上），这将允许您克隆`gitosis-admin`repo
*   在本地工作站上解压备份存储库
*   `git push --force``gitosis-admin`使用带有新密钥的新帐户回到服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:25:08.807

VonC 通过指出（a）我需要先初始化 gitosis 才能做任何事情，以及（b）需要 --force 命令才能使推送工作，从而解决了这个问题。

# sql-server-2008 - 如何修复此表达式以隐藏/显示报表元素？

> ID：12589672
> 
> 赞同：0
> 
> 时间：2012-09-25T19:19:19.407
> 
> 标签：sql-server-2008, reporting-services

我正在使用 SSRS 2008 R2 生成带有子报告的报告。我正在尝试使用下面的表达式有条件地隐藏子报表（嵌入在矩形内，然后隐藏矩形）。

我根据我在网上找到的各种样本对表达式进行了建模，但没有任何效果。表达式的`Fields!CountABC.Value`部分用红色波浪线加下划线，并带有说明“未知集合成员”的工具提示。我知道该成员存在。我从列表中选择它并验证它存在于数据集中。

```
=IIF(Sum(Fields!CountABC.Value, "DataSet1")>= 1, True, False) 
```

如何修复此表达式？

# c# - 增加 OLE DB 连接字符串中的连接池大小

> ID：12589673
> 
> 赞同：3
> 
> 时间：2012-09-25T19:19:21.603
> 
> 标签：c#, connection-string, oledb

我正在尝试增加连接到我桌面上的 Access 数据库的 SSIS 包的连接字符串中的池大小（神圣的运行语句......）。不过，我找不到这样做的语法。有人可以填写我吗？我当前的连接字符串如下所示：

```
"Provider=Microsoft Office 12.0 Access Database Engine OLE DB Provider;Data source= C:\\Users\\nearod\\Desktop\\ImportDB.accdb" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:24:34.317

看起来您`Max Pool Size`在连接字符串中使用了关键字：

[http://msdn.microsoft.com/en-us/library/ms254502.aspx](http://msdn.microsoft.com/en-us/library/ms254502.aspx)

也许试试这个：

`"Provider=Microsoft Office 12.0 Access Database Engine OLE DB Provider;Data source= C:\\Users\\nearod\\Desktop\\ImportDB.accdb;Max Pool Size=200"`

请注意，默认值为 100。另请注意，我没有尝试过，只是参考 MSDN 文档。

# jsp - 在 Java Web 应用程序中打印

> ID：12589679
> 
> 赞同：0
> 
> 时间：2012-09-25T19:20:00.987
> 
> 标签：jsp, servlets, printing, reporting

我有一个使用 servlet/jsp 构建餐厅订单管理的网络应用程序。

我有一个屏幕显示不同类别的订单，如食品、葡萄酒等。

我想要

1) 打印乱序 2) 如果可能，根据类别将打印作业发送到不同的打印机

首先，我尝试使用 Java 脚本 window.print 和不同的打印模板，但这对我来说不是很好。

是否有任何 java api/**免费**报告框架可以允许这样做。？

希望这是有道理的..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:27:05.227

您可以使用 Jasper Reports 或 BIRT 生成 PDF 报告（我确信还有其他选项，但我知道这些选项）。但是，您将无法自动选择或建议打印机。这是服务器无法控制的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:28:13.970

您没有具体说明“效果不佳”的确切内容。但我会推荐以下内容：

1) 您的 .jsp 应该提供一个“打印”链接，该链接会打开一个 HTML/CSS/Javascript 窗口，其中仅包含您要打印的部分

2）您的网络应用程序应该有一些专门用于“打印”媒体的 CSS：

*   [http://webdesign.about.com/cs/css/a/aa042103a.htm](http://webdesign.about.com/cs/css/a/aa042103a.htm)

3) 以下是使用 Javascript "window.print()" 的一些额外提示：

*   [http://www.htmlgoodies.com/beyond/javascript/article.php/3471121/Print-a-Web-Page-Using-JavaScript.htm](http://www.htmlgoodies.com/beyond/javascript/article.php/3471121/Print-a-Web-Page-Using-JavaScript.htm)

我会劝阻你不要在“新框架”上投入时间和精力——这实际上只是网页设计 101。恕我直言......

# matlab - Java中的分布式矩阵乘法

> ID：12589680
> 
> 赞同：0
> 
> 时间：2012-09-25T19:20:04.453
> 
> 标签：matlab, hadoop, distributed-computing, mahout, matrix-multiplication

我目前在 Matlab 中有几个算法，我希望用 Java 编写代码。我将使用以下方法之一（Colt、Apache Commons Math、jblas）来执行此操作。然而，由于我真的希望提高这些算法的速度，我正在寻找建议，并希望现有的实现，以并行化这些算法以提高性能。

据我所知，Hadoop 不是分布矩阵运算的好选择。我也看过 Mahout，但我不清楚这是否有助于实现这一目标。

非常感谢您的所有提示和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:38:06.817

您从哪里获得 Hadoop“不是分布矩阵运算的好选择”的信息？这当然是一个不错的选择，但前提是您的数据量很大——至少 50 GB 以上。如果您可以将其放入内存中，Hadoop 不是一个好的选择，但如果您认为您想在多个 TB 的数据上使用它，那么 Hadoop 是一个很好的工具。在优化矩阵乘法时，还有很多其他的事情需要考虑，比如你的数据结构（它是稀疏的吗？它是否出现在集群中？等等）。

google 上有很多关于在 MapReduce 上实现矩阵乘法的信息 - 如果您选择这条路线，Jeffrey Ullman 的[书](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCwQFjAB&url=http://infolab.stanford.edu/~ullman/mmds/book.pdf&ei=7j9iULDOAaHgiwLxkIHgDg&usg=AFQjCNF3OJmFT7IGm0MgV7nuC906Da0__Q&sig2=vm05ckR8U-0izX01Wu3g_w)可能是一个不错的起点。

# azure - BizSpark Azure 订阅 - 如何有效分配资源？

> ID：12589683
> 
> 赞同：0
> 
> 时间：2012-09-25T19:20:17.470
> 
> 标签：azure, bizspark

我有一个 BizSpark 帐户，但我正在努力找出作为我的免费 Azure 包的一部分我实际有权获得的内容。此处列出了软件包的详细信息：

[http://www.windowsazure.com/en-us/offers/details?locale=en-us&offer=ms-azr-0012p&no-rewrite=true](http://www.windowsazure.com/en-us/offers/details?locale=en-us&offer=ms-azr-0012p&no-rewrite=true)

我需要运行：

*   一台虚拟机（运行 Linux）为网站提供动力
*   一项为客户端软件（Windows Phone 和 Windows 8）提供数据库访问的托管服务
*   一项为虚拟机提供数据库访问的托管服务
*   两个存储帐户（一个用于映像，一个用于虚拟机）
*   一个 SQL 数据库

托管服务是否算作虚拟机，任何人都可以阐明最佳配置（虚拟机大小等）以将上述所有内容纳入我的订阅吗？多个实例会很好，但我想我现在可能会变得贪婪！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:47:20.537

最重要的是要记住 1500 小时的小型计算实例（这包括云服务和虚拟机）。每月 1500 小时意味着您可以全时运行 2 个小型实例或选择[同等比率](https://www.windowsazure.com/en-us/pricing/details/#equivalent-ratios)。因此，您可以购买 4 个额外的小实例，但仍有空间容纳 2 个额外的小实例和 1 个小实例用于其他用途。为了保持 SLA（至少在托管服务上），我建议如下：

*   2 个额外的小型 Linux 虚拟机实例
*   2 个具有 Web 角色的托管服务的超小型实例。Web 角色将有 2 个任务：
    *   为客户端软件提供数据库访问权限
    *   为虚拟机提供数据库访问权限

就性能而言，这可能不是最好的解决方案，但您将能够运行所有高可用的东西，而无需支付任何额外费用。

BizSpark 订阅也涵盖了 2 个存储帐户和 SQL Azure 数据库（您必须使用网络版）。

**更新：** 1 小 = 4 额外的小当量比是不正确的。该比率为 1 小 = 6 特小。

# conditional-compilation - SSDT项目中模式对象的条件编译

> ID：12589685
> 
> 赞同：1
> 
> 时间：2012-09-25T19:20:27.837
> 
> 标签：conditional-compilation, sql-server-data-tools

我们的 SSDT 数据库项目包括一个具有计算列的表，该计算列可以采用多种形式之一，具体取决于客户要求。我试图弄清楚如何管理这个计算列，以便我们仍然可以使用 Publish 功能，而无需将每个人的列恢复为默认值。

我试图完成的可以在以下***无效***的T-SQL 代码中解释：

```
CREATE TABLE dbo.Customer
(
  Id INTEGER,
  Region INTEGER,
  Name VARCHAR(50),
  AccountNumber AS dbo.FormatAccountNumber(Id, Region)
)

CREATE FUNCTION [dbo].[FormatAccountNumber]
(
  @Id INTEGER,
  @Region INTEGER
)
RETURNS VARCHAR(20)
AS
BEGIN
  IF '$(AccountType)' = 'Regional'
    RETURN CONVERT(VARCHAR, @Region) + '-' + CONVERT(VARCHAR, @Id)

  IF '$(AccountType)' = 'Merged'
    RETURN CONVERT(VARCHAR, @Region * 100000 + @Id)

  IF '$(AccountType)' = 'Flat'
    RETURN CONVERT(VARCHAR, @Id)
END 
```

当然，这是行不通的，因为`$(AccountType)`SQLCMD 变量不能在函数内部使用，并且无论如何都不会在运行时正确设置。我还尝试在整个函数周围放置 SQLCMD 条件：

```
IF '$(AccountType)' = 'Flat'
  CREATE FUNCTION ... 
```

但这会产生“CREATE FUNCTION 必须是批处理中的唯一语句”的错误。

有没有办法在 SSDT 项目中对模式进行任何类型的条件编译？如果没有，我有什么选择可以在 SSDT 发布过程中维护这种可自定义的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:07:13.047

您可以使用 Post-Deploment 脚本在动态 SQL 中强制部署您的对象：

```
IF NOT EXISTS (SELECT * FROM sys.objects 
            WHERE object_id = OBJECT_ID(N'[dbo].[FormatAccountNumber]') 
            AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
EXEC('CREATE FUNCTION [dbo].[FormatAccountNumber] () RETURNS BIT AS BEGIN RETURN 0 END')
GO 

IF '$(AccountType)' = 'Regional'
BEGIN
    EXEC('
        ALTER FUNCTION [dbo].[FormatAccountNumber]
        (
          @Id INTEGER,
          @Region INTEGER
        )
        RETURNS VARCHAR(20)
        AS
        BEGIN
            RETURN CONVERT(VARCHAR, @Region) + ''-'' + CONVERT(VARCHAR, @Id)
        END
    ')
END 
```

请注意，通过这样做，您将无法对`dbo.FormatAccountNumber`SSDT 数据库项目中的函数进行任何引用（除非这些对象也包含在 Post-Deployment 脚本中）。

我还玩弄了一个替代解决方案，该解决方案涉及`.sqlproj`文件本身（在`ItemGroup`元素内）中的附加条件，但这确实有点混乱，因为 MsBuild 属性与 SQLCMD 变量并不完全一样，但如果我可以发布这个你喜欢。

如果您发现自己经常需要有条件地在数据库中部署对象，您可能会考虑转向基于命令的部署解决方案（与 SSDT 项目的声明式风格相反）。命令式部署（通常称为迁移）使您可以更好地控制部署时的行为。

**免责声明：**我是 ReadyRoll 的创始人，它为 VS 制作使用命令式部署的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T02:25:52.427

我在 MSDN 上就这个需求进行了公开讨论。没有取得太大进展。理想的情况是允许您在基础 ssdt 项目中将 db 对象标记为“可继承”，以便引用基础项目或 DAC 的其他项目不会抱怨重复对象，并且只会在以下情况下创建基础对象或“存根”它不存在。这将允许您拥有数据库模型的“层”。请参阅我关于 msdn [Extending SSDT Composite Solutions with Overriden Stored Procedures的帖子](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/01d69555-82a3-49e2-8ec6-0b896efe6fcc/extending-ssdt-composite-solutions-with-overriden-stored-procedures)

# android - TCP Server with IP address

> ID：12589700
> 
> 赞同：3
> 
> 时间：2012-09-25T19:21:29.243
> 
> 标签：android, tcp

I am using the following code to get the IP address of my android phone.

```
try {
         for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
             NetworkInterface intf = en.nextElement();
             for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                 InetAddress inetAddress = enumIpAddr.nextElement();
                 if (!inetAddress.isLoopbackAddress()) {
                     return inetAddress.getHostAddress().toString();
                     //return inetAddress;
                 }
             }
         }
     } catch (SocketException ex) {
         Log.e("SALMAN", ex.toString());
     } 
```

it returns fe80::94ae:97c:2680:c6cb%rmnet0

I then set up a server on port 8080.

How can I use this address to connect a client to it? I was expecting an IPv4 address... Can I connect to it via chrome or something to test the connection?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:43:15.013

Use either:

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ipAddress = wifiInfo.getIpAddress(); 
```

Or:

```
try {
Socket socket = new Socket("www.stackoverflow.com", 80);
   Log.i("", socket.getLocalAddress().toString());
} catch (Exception e) {
   Log.i("", e.getMessage());
} 
```

You can't test your connection via chrome but you can connect over it if you use the HTTP protocol. Write a Java SE desktop with another socket to communicate. The code is pretty similar.

# excel - 如何根据工作表名称创建数据验证

> ID：12589706
> 
> 赞同：0
> 
> 时间：2012-09-25T19:22:23.647
> 
> 标签：excel, vba

我有一个包含一些数据验证列的模板。现在，我要做的是，如果工作表是“Luxury”，那么 F 列需要显示数据验证列表“AC、NonAC”选项，而该数据验证列表将是“普通、单一”。

我怎样才能做到这一点。

在此先感谢您的帮助 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:38:13.573

除了上面所说的 Siddharth Rout 之外，我认为您正在寻找的公式是：

```
=IF(MID(CELL("filename",A1),FIND("]",CELL("filename",A1))+1,256)="Luxury"
    ,OR(F3="AC",F3="NonAC")
    ,OR(F3="Ordinary",F3="Single")) 
```

将允许更改为自定义并将其放入“数据验证”窗口的公式中。在此示例中，我将验证添加到 F3。对于每个单元格，这将不得不改变。您可以执行一次并复制下来。

# django-forms - 如何将模型的 Autofield 值作为自定义 ModelForm 字段

> ID：12589714
> 
> 赞同：0
> 
> 时间：2012-09-25T19:23:03.097
> 
> 标签：django-forms, django-1.4

在自定义 ModelForm 中，我想要一个 HiddenInput 字段，该字段具有模型的 Autofield 主键的值。如果在没有模型的情况下创建表单，则此字段将为无。如果提供模型来实例化表单，它应该包含模型的 Autofield ID。这可能吗？我在想这样的事情：

```
class MyCustomForm(forms.ModelForm):
    the_id = forms.HiddenInput()

    def __init__(self, *args, **kwargs):
        super(MyCustomForm, self).__init__(*args, **kwargs)
        self.fields["the_id"].initial = args.get('id', None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:09:16.663

所以在挖掘之后我遇到了这个：

[https://groups.google.com/forum/?fromgroups=#!topic/django-users/vmIXXr5tsdI](https://groups.google.com/forum/?fromgroups=#!topic/django-users/vmIXXr5tsdI)

这指出 ModelForms 没有 HiddenInput 字段。我应该更仔细地阅读文档。这是我最后的结果：

```
MyCustomForm(forms.ModelForm):
    the_id = forms.IntegerField(widget=forms.HiddenInput)

    def __init__(self, *args, **kwargs):
        super(MyCustomForm, self).__init__(*args, **kwargs)

        instance = getattr(self, 'instance', None)
        if instance and instance.id:
            self.fields["the_id"].initial = instance.id 
```

# java - 如何从动作类中选择特定对象

> ID：12589722
> 
> 赞同：1
> 
> 时间：2012-09-25T19:23:48.983
> 
> 标签：java, jsp, struts2, ognl, valuestack

在 JSP 中拉出多个对象时，如何从动作类中选择特定对象。

从我的动作类中，我通过 Struts 五个相同的对象。在 JSP 中，我将如何选择要在页面上显示的特定对象和对象属性。我已经尝试在标签中放置各种值和名称，`<s:form>`但我还没有弄清楚如何去做。欢迎朝正确的*方向*推进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:56:03.350

采用

```
<s:iterator value="walkthroughs" >
    <s:property value="id"/><br>
    <s:property value="areaName"/><br>
...
</s:iterator> 
```

并且您应该将您的 getter 方法重命名为与 bean 兼容。

```
getId(), getAreaName() 
```

# apache2 - Vagrant + Chef Solo 不使用 Apache 属性

> ID：12589723
> 
> 赞同：2
> 
> 时间：2012-09-25T19:23:56.540
> 
> 标签：apache2, centos, chef-infra, vagrant

我正在尝试使用 Vagrant 和 Chef Solo 配置 CentOS 盒子。我已经指定了一些我希望 apache2 食谱使用的属性，但它似乎没有使用它们。

这是我在我的 Vagrantfile 中添加的内容：

```
chef.json.merge!(
  'apache2' => {
    'user' => 'testuser',
    'group' => 'testgroup',
    'dir' => '/custom',
    'log_dir' => '/custom/logs/http',
    'default_site_enabled' => false
  }
)

chef.add_recipe "apache2" 
```

然而，在运行`vagrant up`apache 食谱之后，我已经忽略了我指定的所有属性。我试过同时使用`apache`和`apache2`作为键。

我错过了一些简单的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:22:33.723

这应该将属性合并到节点中。

```
chef.json = {
  'apache2' => {
    'user' => 'testuser',
    'group' => 'testgroup',
    'dir' => '/custom',
    'log_dir' => '/custom/logs/http',
    'default_site_enabled' => false
  }
} 
```

这就是您访问它的方式。

```
node['apache2']['user']  # => testuser 
```

# php - SQL 用不同的值更新多行，而不指定唯一键

> ID：12589725
> 
> 赞同：1
> 
> 时间：2012-09-25T19:24:20.080
> 
> 标签：php, sql, sql-update

我需要帮助构建一个搜索 user_id（假设 user_id = 5）的 SQL 查询，但是这个 user_id 有多个行条目，但是我需要以不同的方式更新每一行。

我有一个数组，其中包含要分配给该 user_id 的数据。这是一个表格示例：

```
id    user_id    amount    txn_id
1     5          10        foo_unique
2     5          5         bar_unique
3     7          15        xyz_unique
4     5          10        123_unique 
```

我的数组看起来像这样：

```
Array (
    [0] => 14
    [1] => 6
    [2] => 9
) 
```

如您所见，user_id 5 有三个数组值和三行，现在我想将该数组的每个值添加到相应的 user_id (5)。请注意，我有一个名为 UNIQUE 的列`txn_id`

更新表格后，它看起来像这样：

```
id    user_id    amount    txn_id
1     5          14        foo_unique
2     5          5         bar_unique
3     7          6         xyz_unique
4     5          9         123_unique 
```

有什么想法我能做到这一点吗？

谢谢。

PS：我不能在这个问题上使用 SQL CASE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:29:20.170

如果您想用一个值更新**一行**，您必须能够为该**行设置一个****唯一条件**。

 **如果不添加一些额外的字段或条件来唯一标识一行，那么您就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:47:27.573

问题是，您的阵列上没有任何内容表明哪个阵列条目属于哪个数据库行。如果您只想依赖（数组索引和数据库`id`s 的）顺序，则必须`SELECT`首先为用户处理所有行，然后一次循环并更新一行。在 PHP（和[PDO](http://php.net/manual/en/book.pdo.php)）上是这样的：

```
$values = array(14, 6, 9);
$dbh = new PDO('mysql:host=localhost;dbname=yourdbname', 'username', 'password');
$selectQuery = 'SELECT id FROM yourtable WHERE user_id = 5 ORDER BY id';
foreach($dbh->query($selectQuery) as $row) {
    $id = $row['id'];
    $sth = $dbh->prepare("UPDATE yourtable SET amount = :val WHERE id = :id");
    $sth->execute(array(
        'val' => array_unshift($values),
        'id' => $id
    ));
} 
```

（上面的代码假定数组中的值数与 的数据库行数相匹配`user_id = 5`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:26:33.133

您可以使用以下查询：

```
UPDATE MyTable
SET
    amount = 
        CASE id 
            WHEN 1 THEN 14
            WHEN 2 THEN 6
            WHEN 3 THEN 9
            ELSE amount -- just in case user_id 5 has records not covered above.
        END
WHERE 
    user_id = 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:14:04.590

看问题你只需要 SQL 语句。

首先是**创建两个表**：

```
CREATE TABLE users 
  user_id int(11) PRIMARY KEY NOT NULL,
  username varchar(25),
) Engine = InnoDB;

CREATE table userbalances (
  balance_id int(11) PRIMARY KEY NOT NULL,
  user_id int(11),
  amount decimal(10,2),
  CONSTRAINT userid_fk FOREIGN KEY userid_fk(user_id) REFERENCES users(userid)
) Engine = InnoDB; 
```

然后，**在您插入（ed）**表中的所有用户和用户余额之后，您需要做的就是**创建一个 UPDATE 语句**来更新金额：

```
UPDATE userbalances SET amount=? WHERE user_id=? AND balanceid=? 
```

**更新应该是循环**的。并且您应该使用**mysql_query()**函数使用您拥有的分配数组来更新它。

**注意：****userid**和 balanceid都应该在 UPDATE 语句的 WHERE 子句中，因为在**userbalances**表中**有****多个事务。**否则，它将改变该用户所有交易的所有余额。

 ****问题更新：** 如果你在这个问题上没有使用任何 SQL 案例，那么你的问题只是 PHP。您需要找出 UPDATE(ing) 的功能是什么 - 更新金额。只要您的表都已预先填充。您用来更新它的程序上可能有一个功能。****

# php - 如何编写正则表达式以匹配页面上的价格？

> ID：12589732
> 
> 赞同：-3
> 
> 时间：2012-09-25T19:24:52.050
> 
> 标签：php, regex

您好，我正在尝试从不同的 URL 获取产品的价格，我知道如何获取内容，但我不擅长编写正则表达式函数，有人可以帮我写一个吗？它应该匹配 $ 之后的任何数字，例如“$40”、“$40.95”和“$ 45”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:28:38.867

```
$string = '
    Hi! This answer will cost you $10\. 
    If you do not vote this answer up, it will cost you another in $1.23 or $ 2.45\. 
    Be good and transfer me arround $12.45 bucks to my IBAN SI56 1234 4567 8901 234.
    Just joking, it is for free ;-)
';
preg_match_all('~(\$\h?\d+(\.\d+)?)~', $string, $matches);

echo "<pre>".print_r($matches[1],true)."</pre>"; 
```

这将输出：

```
Array
(
    [0] => $10
    [1] => $1.23
    [2] => $ 2.45
    [3] => $12.45
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:32:11.263

您可以使用以下内容：

```
/(\$[0-9]+(\.[0-9]+)?)/ 
```

# php - 将操作/数据发布到 Twitter Bootstrap 注销按钮

> ID：12589739
> 
> 赞同：1
> 
> 时间：2012-09-25T19:25:16.040
> 
> 标签：php, html, twitter-bootstrap

我正在使用 Twitter Bootstrap (TWBS) 来构建我的 UI，并且在不使用表单时无法弄清楚如何发布数据。我基本上采用了 TWBS 的模板并尝试对其进行编辑。我正在尝试将“注销”值发送回我的 index.php 页面，该页面应该嗅出该值并注销用户。我在 HTML 中的代码：

```
 <ul class="dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li class="divider"></li>
          <li><a href="./" type="submit" name="action" value="logout" method="post">Sign Out</a></li>
          <li><a href= "./"
            <form method="post">
                <input type="hidden" name="action" value="logout">Sign Out
            </a></form>
          </li>
        </ul> 
```

如您所见，我还尝试模仿表单来发布操作，但这也不起作用。回到 php 代码中，“嗅探器”是：

```
if (isset($_POST['action']) and $_POST['action'] == 'logout')
{
session_start();
unset($_SESSION['loggedIn']);
unset($_SESSION['email']);
unset($_SESSION['password']);
header('Location: .'); 
exit();
} 
```

谢谢您的帮助。

缠绕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:54:37.797

这与Bootstrap无关，它只是CSS +一点JS。

表单旨在根据用户输入值格式化 HTTP 请求 - 在这种情况下，您只需要一个链接：

```
<a href="index.php?action=logout">Logout</a> 
```

如果你想在 Bootstrap 中使用它的样式，请添加如下内容：

```
<a href="index.php?action=logout" class="btn btn-primary">Logout</a> 
```

顺便说一句，您只需通过`POST`方法将操作传递给您的 php 脚本 - 您最好参考`$_REQUEST`数组，然后根据`$_SERVER['REQUEST_METHOD']`是否有任何决定做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:22:50.627

您是否尝试仅使用表单？在这种情况下，您实际上不必假装，您可以使用以下形式：

```
<li>
    <form method="post" action="./">
        <input type="hidden" name="action" value="logout" />
        <input type="submit" value="Sign Out" />
    </form>
</li> 
```

如果您想要一个更复杂的按钮，您可以使用它并将 html 放入其中。

```
<button type="submit"><i class="icon-user"></i> Sign out</button> 
```

顺便说一句，这不依赖于 Twitter Bootstrap。你可以在任何有 HTML 的地方使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:38:08.757

尝试：

```
 <ul class="dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li class="divider"></li>
          <li><a href="#" onClick="document.getElementById('soForm').submit()">Sign Out</a></li>
          <li>"
            <form id="form" id="soForm" action="/" method="post">
                <input type="hidden" name="action" value="logout">Sign Out
            </form>
          </li>
        </ul> 
```

您的问题是标签不是表单元素，因此您必须使用 js 来触发表单的提交操作。

查看 W3CSchools 以获取有关表单和标签的信息，以了解它们实际上可以做什么。

```
if (isset($_POST['action']) and $_POST['action'] == 'logout')
{
session_start();
unset($_SESSION['loggedIn']);
unset($_SESSION['email']);
unset($_SESSION['password']);
header('Location: /'); 
exit();
} 
```

# android - 如何在java android中通过手指更改图像位置

> ID：12589746
> 
> 赞同：2
> 
> 时间：2012-09-25T19:25:48.297
> 
> 标签：android, image, position

我使用下面的代码在屏幕上显示图像。

```
ImageView img = (ImageView) findViewById(R.id.imageView1);
    img.setImageResource(R.drawable.car); 
```

我想让用户用手指将它重新定位到任何地方。我可以使用哪一个？

1.  `setOnTouchListener`
2.  `onDrag`

这是我有两辆车的时候。背景是另一个位图图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:30:52.757

你可以这样做。但它有点复杂。看看这个很棒的教程：

[http://blahti.wordpress.com/2011/01/17/moving-views-part-2/](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:34:37.523

您可以同时使用这两种方法，但这取决于您的需求，例如您只想将图像重新定位到用户触摸屏幕的位置，或者您想长按它，然后将其放在用户触摸移动结束的位置..... ........对于第一种情况[，在RelativeLayout](https://stackoverflow.com/questions/1660150/move-imageview-around-inside-relativelayout) 中使用这些Move ImageView，第二种情况[在android中使用这些拖放图像](https://stackoverflow.com/questions/4524288/drag-and-drop-images-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:35:15.700

要在java android中通过手指更改图像位置，您需要使用

**Surface View**和**onTouchListener**都在 Android Developer Site 中有详细描述。

您也可以查看此问题，您将从中获得帮助

[在android中触摸和拖动图像](https://stackoverflow.com/questions/4255859/touch-and-drag-image-in-android)

快乐编码。

# php - 收到意外的 T_CONSTANT_ENCAPSED_STRING，创建目录

> ID：12589748
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:25:55.427
> 
> 标签：php

我试图创建文件夹目录名称“code”，我想将它保存到“status.txt”。

这是我收到意外 T_CONSTANT_ENCAPSED_STRING 的代码问题。

```
if(is_writeable($newdir . "/status.txt")) {
    if (fwrite($statusTxt, $statusCode . "," . $status . "," . $share . "," . $date . "," . $permission "\n")){
} 
```

这种方式创建目录并将其保存到status.txt是否正确？下面是其余的代码。

非常感谢，并感谢您的帮助。

```
$newdir = "../../data/code";
umask(0007);
if(!file_exists($newdir))
{
    mkdir($newdir, 02770);
$statusTxt = fopen($newdir. "/status.txt", "a");
}
if(is_writeable($newdir . "/status.txt")) {
    if (fwrite($statusTxt, $statusCode . "," . $status . "," . $share . "," . $date . "," . $permission "\n")){
}
    echo "<p>Your form has succesfully been submit!</p>";
}
fclose($statusTxt);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:28:02.460

您的最后一个连接，对于`"\n"`, 缺少它`.`之前的。该错误基本上意味着您有一个不期望出现的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:30:50.463

将您的代码更改为：

```
if(is_writeable($newdir . "/status.txt")) {
    if (fwrite($statusTxt, $statusCode . 
             "," . $status . "," . $share . "," . 
             $date . "," . $permission  . "\n"))
                                     ^^^^^^  
... 
```

此外，您可能想换掉`\n`常量`PHP_EOL`。

# excel - 以 yyyy-mm-dd hh:mm 格式查找从两次经过的时间

> ID：12589749
> 
> 赞同：0
> 
> 时间：2012-09-25T19:25:58.847
> 
> 标签：excel, excel-2007, excel-formula

基本上我有两个时间戳`YYYY/MM/DD hh:mm`，我想找到以天为单位的时间。

Excel 可以仅使用时间或仅使用日期来执行此操作，但不能在两者结合时执行此操作。我意识到这不是一种不常见的时间戳格式，并且可能有某种方法可以简单地使用 Excel 功能来计算它。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:48:57.057

这是过去几个问题的重复-因此，如果有人想查找其中一个并将此问题标记为重复-这可能是合适的-但与此同时：

![时间问题1](../Images/d948801605b4e9298607fa83eedd4b52.png) ![时间问题2](../Images/514b40d8751cb211838bbbccf49c00d7.png)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:46:09.033

您只能使用 INT() 将时间戳转换为日期，为您提供以下公式：

=INT(A1)-INT(B1)

# css - CSS连接菜单到div背景

> ID：12589752
> 
> 赞同：0
> 
> 时间：2012-09-25T19:26:16.243
> 
> 标签：css, menu

我目前正在编写这个模板：http: [//i.imgur.com/ydrsj.png](http://i.imgur.com/ydrsj.png)

我希望它看起来像这样，但每当我这样做时，就会发生这种情况：http: [//gyazo.com/a87d0c8f763ec1875d74f238ed8ff575](http://gyazo.com/a87d0c8f763ec1875d74f238ed8ff575)

我的代码： http: [//pastebin.com/4WPUGiaT](http://pastebin.com/4WPUGiaT)

我做错什么了？

我的 HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>SlyFiles</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="SlyFiles upload" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen"/>
<link href='http://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'><link rel="stylesheet" href="css/flexslider.css" type="text/css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script><script src="js/jquery.flexslider.js"></script><!-- Place in the <head>, after the three links --><script type="text/javascript" charset="utf-8">$(window).load(function() {  $('.flexslider').flexslider({    animation: "slide"  });});</script>
<link rel="stylesheet" href="flexslider.css" type="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="js/jquery.flexslider.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery.lavalamp-1.4.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">
// Can also be used with $(document).ready()
$(window).load(function() {
  $('.flexslider').flexslider({
    animation: "slide"
  });
});
</script>
</head>
<header>
<div class="header">
<div class="container">
<div class="menu">
   <ul>
   <li class="current"><img src="img/home.png"/><span style="vertical-align: middle; margin-left: 5px;">Home</span></li>
   <li><img src="img/twitter.png"/><span style="pical-align: middle; margin-left: 5px;">Twitter</span></li>
   <li><img src="img/fb.png"/><span style="vertical-align: middle; margin-left: 5px;">Facebook</span></li>
   <li><img src="img/contact.png"/><span style="vertical-align: middle; margin-left: 5px;">Contact</li>
   </ul>
  </div>
 </div>
</div>
<div id="borderbottom"></div>
</header>
<body>
</body>
</html> 
```

我的 CSS：

```
.header  {
height: 42px;
width: 100%;
background: #1d1d1d;
}

#borderbottom {
width: 100%;
height: 12px;
background-image: url("../img/border.png");
background-repeat: repeat-x;
}

.menu {
margin-top: -15px;
}
.menu li {
display: inline;
margin: 10px;
float: left;
color: #fff;
}

.current {
background-image: url("../img/current.png");
width: 84px;
height: 54px;
}

.flex-container a:active,
.flexslider a:active,
.flex-container a:focus,
.flexslider a:focus  {outline: none;}
.slides,
.flex-control-nav,
.flex-direction-nav {margin: 0; padding: 0; list-style: none;}

/* FlexSlider Necessary Styles
*********************************/
.flexslider {margin: 0; padding: 0;}
.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden;} /* Hide the slides before the JS is loaded. Avoids image jumping */
.flexslider .slides img {width: 100%; display: block;}
.flex-pauseplay span {text-transform: capitalize;}

/* Clearfix for the .slides element */
.slides:after {content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0;}
html[xmlns] .slides {display: block;}
* html .slides {height: 1%;}

/* No JavaScript Fallback */
/* If you are not using another script, such as Modernizr, make sure you
 * include js that eliminates this class on page load */
.no-js .slides > li:first-child {display: block;}

/* FlexSlider Default Theme
*********************************/
.flexslider {margin: 0 0 60px; background: #fff; border: 4px solid #fff; position: relative; -webkit-border-radius: 4px; -moz-border-radius: 4px; -o-border-radius: 4px; border-radius: 4px; box-shadow: 0 1px 4px rgba(0,0,0,.2); -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.2); -moz-box-shadow: 0 1px 4px rgba(0,0,0,.2); -o-box-shadow: 0 1px 4px rgba(0,0,0,.2); zoom: 1;}
.flex-viewport {max-height: 258px; -webkit-transition: all 1s ease; -moz-transition: all 1s ease; transition: all 1s ease;}
.loading .flex-viewport {max-height: 300px;}
.flexslider .slides {zoom: 1;}

.carousel li {margin-right: 5px}

/* Direction Nav */
.flex-direction-nav {*height: 0;}
.flex-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url(images/bg_direction_nav.png) no-repeat 0 0; position: absolute; top: 50%; cursor: pointer; text-indent: -9999px; opacity: 0; -webkit-transition: all .3s ease;}
.flex-direction-nav .flex-next {background-position: 100% 0; right: -36px; }
.flex-direction-nav .flex-prev {left: -36px;}
.flexslider:hover .flex-next {opacity: 0.8; right: 5px;}
.flexslider:hover .flex-prev {opacity: 0.8; left: 5px;}
.flexslider:hover .flex-next:hover, .flexslider:hover .flex-prev:hover {opacity: 1;}
.flex-direction-nav .flex-disabled {opacity: .3!important; filter:alpha(opacity=30); cursor: default;}

/* Control Nav */
.flex-control-nav {width: 100%; position: absolute; bottom: -40px; text-align: center;}
.flex-control-nav li {margin: 0 6px; display: inline-block; zoom: 1; *display: inline;}
.flex-control-paging li a {
width: 11px;
 height: 11px;
 display: block;
 background: #fff;
 cursor: pointer;
 text-indent: -9999px;
 -webkit-border-radius: 20px;
 -moz-border-radius: 20px;
 -o-border-radius: 20px;
 border-radius: 20px;
 box-shadow: inset 0 0 3px rgba(0,0,0,0.3);
 }

.flex-control-paging li a:hover {
background: #009ec3; /* Old browsers */
background: -moz-linear-gradient(top,  #009ec3 0%, #00aad9 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#009ec3), color-stop(100%,#00aad9)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* IE10+ */
background: linear-gradient(to bottom,  #009ec3 0%,#00aad9 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#009ec3', endColorstr='#00aad9',GradientType=0 ); /* IE6-9 */

 }
.flex-control-paging li a.flex-active {
background: #009ec3; /* Old browsers */
background: -moz-linear-gradient(top,  #009ec3 0%, #00aad9 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#009ec3), color-stop(100%,#00aad9)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #009ec3 0%,#00aad9 100%); /* IE10+ */
background: linear-gradient(to bottom,  #009ec3 0%,#00aad9 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#009ec3', endColorstr='#00aad9',GradientType=0 ); /* IE6-9 */

 cursor: default;
 }

.flex-control-thumbs {margin: 5px 0 0; position: static; overflow: hidden;}
.flex-control-thumbs li {width: 25%; float: left; margin: 0;}
.flex-control-thumbs img {width: 100%; display: block; opacity: .7; cursor: pointer;}
.flex-control-thumbs img:hover {opacity: 1;}
.flex-control-thumbs .flex-active {opacity: 1; cursor: default;}

@media screen and (max-width: 860px) {
  .flex-direction-nav .flex-prev {opacity: 1; left: 0;}
  .flex-direction-nav .flex-next {opacity: 1; right: 0;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:25:57.583

第 35 行：您尚未指定`</span>`标签。

（在这条线上：）`<li><img src="img/contact.png"/><span style="vertical-align: middle; margin-left: 5px;">Contact</li>`。

# c - c应用服务器套接字连接挂起

> ID：12589756
> 
> 赞同：0
> 
> 时间：2012-09-25T19:26:27.057
> 
> 标签：c, sockets

我正在使用套接字连接连接到我的 C 应用程序中的服务器。偶尔服务器不会返回任何东西。我的意思是什么。所以我的应用程序挂起。我试过使用超时：

```
signal(SIGALRM, timeouthandler);
alarm(myTimeout);

(socket and connection logic)...    

alarm(0); 
```

但它仍然挂起并且不会返回到脚本。一位同事说这可能是因为我正在使用阻塞连接。但是从我正在阅读的内容来看，您在建立连接后将连接设置为非阻塞。

我应该调查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:29:50.527

“我应该调查什么？”

作为调试工具，我发现 Wireshark 在调试套接字连接时很有用。我用 C 语言完成了一些套接字应用程序，有时它归结为 TCP 堆栈库在做一些奇怪的事情，而 Wireshark 有时可以发现这一点。

希望这可以帮助，

# css - @font-face 不起作用

> ID：12589758
> 
> 赞同：8
> 
> 时间：2012-09-25T19:26:33.713
> 
> 标签：css, font-face

我下载了一个字体`inlove-light-wf.ttf`，为了使用规则`@font-face`。

我的文件夹中有：`home.html`和`inlove-light-wf.ttf`.

在我的 CSS 中，我有：

```
@font-face {
    font-family: 'Inlove';
    src: url('inlove-light-wf.ttf');
    font-weight: normal;
    font-style: normal;
}

#definicao{
    text-align:center;
    color:#0080C0;
    font-family:'Inlove';
    font-size:24px;
    margin-top:20px;
    border-top:solid #999 thin;
    padding: 20px 40px 3px 40px;
    height:290px;
    background-color:#EFEFEF;
}

#definicao{
    text-align:center;
    color:#0080C0;
    font-family:'Inlove';
    font-size:24px;
    margin-top:20px;
    border-top:solid #999 thin;
    padding: 20px 40px 3px 40px;
    height:290px;
    background-color:#EFEFEF;
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T19:55:35.853

问题的一个来源可能是您的 css 位于不在根文件夹中的单独文件中。例如，如果您将所有 css 文件保存在“css”文件夹中，则需要将字体 url 修改为相对于该文件，而不是根文件夹。在这个例子中，它将是`src: url('../inlove-light-wf.ttf');`

此外，并非所有浏览器都可以使用 .ttf 字体文件。您必须在`@font-face`css 中声明替代字体格式。

这是一个修改后的`@font-face`声明，可以帮助您入门。我还建议[在此处](http://www.fontspring.com/blog/fixing-ie9-font-face-problems)和[此处](http://sixrevisions.com/css/font-face-guide/)阅读更多内容。

```
@font-face {
    font-family: 'Inlove';
    src: url('inlove-light-wf.eot'); /* IE9 Compat Modes */
    src: url('inlove-light-wf.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('inlove-light-wf.woff') format('woff'), /* Modern Browsers */
         url('inlove-light-wf.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('inlove-light-wf.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:29:21.560

该`@font-face`规则通常不支持某些旧浏览器。我通常使用[字体](http://www.fontsquirrel.com/fontface/generator)生成器，它将从您需要包含的字体生成 css 文件，并且所有浏览器都会正确显示它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-23T21:58:24.270

我的字体也有问题。当字体在 IE 中工作时不在 iPhone 上，而在 iPhone 上工作时不在 IE 中。这是我的代码（我不知道为什么它会这样工作，但它对我有用）：

```
@font-face{
	font-family:"Royal Chicken";
	src: url(../gradivo/font/RoyaChicken.eot);
        src: url(../gradivo/font/RoyalChicken.ttf)  format("truetype"), /* Safari, Android, iOS */
	     url(../gradivo/font/RoyalChicken.eot?#iefix) format("embedded-opentype"), /* IE6-IE8 */
             url(../gradivo/font/RoyalChicken.woff) format("woff"), /* Pretty Modern Browsers */
             url(../gradivo/font/RoyalChicken.svg#RoyalChicken) format("svg");
}
@font-face{
	font-family:"Royal Chicken";
	src: url(../gradivo/font/RoyaChicken.eot);
}
@font-face{
	font-family:"Royal Chicken";
        src: url(../gradivo/font/RoyalChicken.ttf)  format("truetype");
}
```

它可能会帮助你。:)

# xcode - Xcode动态添加标签栏图标

> ID：12589760
> 
> 赞同：4
> 
> 时间：2012-09-25T19:26:57.743
> 
> 标签：xcode, icons, uitabbarcontroller, uitabbar, uitabbaritem

我已经阅读了有关在应用程序委托和界面构建器中添加标签栏图标的不同答案。我想将它们添加到我的 firtsviewcontroller 中，因为我想从`plist`. 建议这样做：

```
NSArray *viewControllerArray = nil;
viewController1 = <View Init Code>
viewController2 = <View Init Code>
viewController3 = <View Init Code>

1stNavController = [[UINavigationController alloc] initWithRootViewController:viewController1]; 
UIImage *img = [UIImage imageNamed:@"tab_home"];
[1stNavController .tabBarItem initWithTitle:@"Home" image:img tag:1]; 
```

但我不喜欢这样做，因为我认为那不干净。我想做类似于以下的事情，但我不知道为什么它不起作用：

```
[[self.tabBarController.tabBar.items objectAtIndex:2] setIcon:[UIImage imageNamed:....]]; 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T17:52:57.993

怎么样：

```
NSArray *viewControllers = self.tabBarController.viewControllers;
((UIViewController*)viewControllers[0]).tabBarItem.image = [UIImage imageNamed:...];
((UIViewController*)viewControllers[1]).tabBarItem.image = [UIImage imageNamed:...];
((UIViewController*)viewControllers[2]).tabBarItem.image = [UIImage imageNamed:...];
((UIViewController*)viewControllers[3]).tabBarItem.image = [UIImage imageNamed:...];
((UIViewController*)viewControllers[4]).tabBarItem.image = [UIImage imageNamed:...]; 
```

# iphone - 将 ActivityIndi cator 添加到 Webview 选项卡应用程序

> ID：12589761
> 
> 赞同：1
> 
> 时间：2012-09-25T19:27:00.903
> 
> 标签：iphone, xcode

在选择每个选项卡并加载初始选项卡后，我试图在屏幕中央添加一个“加载”指示器。我发现许多帖子显示了完成此操作的代码，但它似乎不适用于我的 webview 应用程序的设置方式。

我是一个新手，我的所有代码都来自不同的教程，所以如果你能解释一下把代码放在哪里会有帮助。

这是我当前的 .h 文件

```
 #import <UIKit/UIKit.h>

@interface ViewController1 : UIViewController

{
    IBOutlet UIWebView *myWebView;
}

@end 
```

这是我当前的 .m 文件

```
#import "ViewController1.h"

@interface ViewController1 ()

@end

@implementation ViewController1

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Home", @"Home");
        self.tabBarItem.image = [UIImage imageNamed:@"birdhouse"];
    }
    return self;
}

- (void)viewDidLoad {

    [super viewDidLoad];

    {
        UIImage *navigationBarBackground = [[UIImage imageNamed:@"navbar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

        [[UINavigationBar appearance] setBackgroundImage:navigationBarBackground forBarMetrics:UIBarMetricsDefault];

    }

    // Do any additional setup after loading the view from its nib.

    NSURL *myURL = [NSURL URLWithString:@"http://jbirdmedia.org/rcwc/iphone/home.html"];

    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];

    [myWebView loadRequest:myRequest];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我已从失败的尝试中取出所有代码，因此该代码目前是我用于 viewcontroller1 的工作应用程序，并且我的 4 个选项卡有 4 个 ViewController。

谢谢，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:16:09.007

那么你的代码现在没有提到关于 UIActivityIndi​​catorView 的任何内容。在你的 viewDidLoad 方法中，你需要这样的东西：

```
UIActivityIndicatorView *activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
activityView.center = myWebView.center;
[myWebView addSubview: activityView];
[activityView startAnimating]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:59:58.623

这是非常粗糙且未经测试的，但它应该看起来像这样：

```
 UIView *loadingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 150, 150)];
    loadingView.center = self.view.center;
    [loadingView setBackgroundColor:[UIColor blackColor]];
    [loadingView setAlpha:0.75f];

    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    activityIndicator.frame = CGRectMake(0,0,40,40);
    activityIndicator.center = loadingView.center;
    [loadingView addSubview:activityIndicator];
    [activityIndicator startAnimating];

    UILabel *loadingLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, loadingView.bounds.size.width, 50)];
    [loadingLabel setText:@"Loading"];
    [loadingLabel setBackgroundColor:[UIColor clearColor]];
    [loadingLabel setTextAlignment:NSTextAlignmentCenter];
    [loadingLabel setTextColor:[UIColor whiteColor]];
    [loadingView addSubview:loadingLabel];

    [self.webView addSubview:loadingView]; 
```

您需要适应您实际希望视图看起来的方式，但这应该会让您指向正确的方向。

# jquery - jQuery html 操作

> ID：12589763
> 
> 赞同：0
> 
> 时间：2012-09-25T19:27:08.543
> 
> 标签：jquery, html, dom

```
<div class="row categories">
    <div class="span3 category">
        <a href="#" class="delete"></a>
    </div>
    <div class="span3 category">
        <a href="#" class="delete"></a> <!-- user clicks this one -->
    </div>
    <div class="span3 category">
        <a href="#" class="delete"></a>
    </div>
</div>
<div class="row categories">
    <div class="span3 category">
        <a href="#" class="delete"></a>
    </div>
    <div class="span3 category">
        <a href="#" class="delete"></a>
    </div>
    <div class="span3 category">
        <a href="#" class="delete"></a>
    </div>
</div> 
```

这是我尝试使用 jQuery 操作的一些 html 的简化示例。当用户单击删除时，类别被删除，然后我想重新排列类别 div，以便从上到下填充行。

举个例子：如果用户单击上面 html 中由注释标记的删除，那么我想重新调整类别 div，以便顶行有三个类别 div，第二行只有两个 - 这需要适用于任意数量的行。

我尝试了一些事情，但没有取得任何进展——我觉得我错过了一些 DOM 操作的基本原则。

我尝试将所有类别 div 收集为一个对象，然后将它们包装在相关的行标签中，但我得到很多“#DivElement 没有 XXX 属性错误”。我曾尝试从头开始重建 html，但后来我遇到了很多令人讨厌的事件处理程序 .bind 问题（正如我所说，这是一个简化的示例）。后者是我得到的最接近的，但感觉丑陋且过于复杂。

我觉得收集类别 div 然后重新包装它们是要走的路，但我真的不知道......

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:34:46.513

试试这个代码。[jsfiddle](http://jsfiddle.net/RpPEx/)

```
$(".delete").click(function(){
var next = $(this).parents(".categories").next();
    if(next ){
      var copyfrmnext = next .find(".category:first");
    $(this).parent().parent().append( copyfrmnext );
   }
    $(this).parent().remove();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:43:29.783

假设有一个包装元素（*在`id="container"`我的例子中*）尝试

```
var container = $('#container');
container.on('click','.delete', function(e){
    e.preventDefault(); // cancel the click
    $(this).closest('.category').remove(); // remove clicked category

    var elements = container.find('.category').detach(); // get all .category elements
    container.empty().append(elements); // clear container and re-append only the category elements
    for(var i = 0; i < elements.length; i+=3) {
      elements.slice(i, i+3).wrapAll("<div class='row categories'></div>"); // wrap them every 3 categories..
    }
}); 
```

**演示在** [http://jsfiddle.net/f47bJ/2/](http://jsfiddle.net/f47bJ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:34:23.517

[**jsFiddle 演示**](http://jsfiddle.net/6rFMy/2/)

```
$('.delete').on('click', function () {

    var _myRow = $(this).closest('.row');
    var _nextCategory = _myRow.next('.row').find('.category').first();

    $(this).closest('.category').remove();

    _myRow.append(_nextCategory );
});​ 
```

# django - 带有时区的 django 中的 Unix 时间戳到日期时间

> ID：12589764
> 
> 赞同：22
> 
> 时间：2012-09-25T19:27:13.757
> 
> 标签：django, datetime, timezone, pytz

我有一个向我发送 unixtimestamp 的 javascript 日历。我在新加坡。我希望将此时间戳解释为新加坡时间戳，然后转换为 utc 以与 db 进行比较。

对于我自己的生活，我无法弄清楚如何告诉 django 这个时间戳来自当前时区，新加坡。

当我执行时间戳的打印语句时，它会增加 8 小时的时间（这意味着 django 认为我以 utc 输入时间并将其本地化到新加坡语境）

在许多其他事情中，我尝试过： `start=datetime.datetime.fromtimestamp(int(start_date)).replace(tzinfo=get_current_timezone())`

start_date 是 1325376000（转换为 2012-01-01 00:00:00）

但是，当我打印此输出时，我得到 2012-01-01 08:00:00+06:55。当新加坡是 +08:00 时，我什至不知道 +06:55 来自哪里。我迷路了。

谢谢你的帮助。

设置.py：

`TIME_ZONE = 'Asia/Singapore'`

`USE_TZ = True`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-07-16T13:50:06.410

以上所有方法都是有效的，但不是“django like”。这是一个简单的例子，一个 django 程序员是如何做到的：

```
from datetime import datetime

from django.utils.timezone import make_aware

# valid timestamp
value = 1531489250 
# you can pass the following obj to a DateTimeField, when your settings.USE_TZ == True
datetime_obj_with_tz = make_aware(datetime.fromtimestamp(value)) 
```

[在Django github timezone 模块](https://github.com/django/django/blob/master/django/utils/timezone.py)上查看更多实用程序以获取完整概述...

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-25T19:30:58.260

假设您已经`pytz`安装：

```
from datetime import datetime
import pytz
local_tz = pytz.timezone("Asia/Singapore") 
utc_dt = datetime.utcfromtimestamp(timestamp).replace(tzinfo=pytz.utc)
local_dt = local_tz.normalize(utc_dt.astimezone(local_tz)) 
```

例如：

```
>>> from datetime import datetime
>>> import pytz
>>> local_tz = pytz.timezone("Asia/Singapore")
>>> utc_dt = datetime.utcfromtimestamp(1325376000).replace(tzinfo=pytz.utc)
>>> utc_dt
datetime.datetime(2012, 1, 1, 0, 0, tzinfo=<UTC>)
>>> local_dt = local_tz.normalize(utc_dt.astimezone(local_tz))
>>> local_dt
datetime.datetime(2012, 1, 1, 8, 0, tzinfo=<DstTzInfo 'Asia/Singapore' SGT+8:00:00 STD>)
>>> local_dt.replace(tzinfo=None)
datetime.datetime(2012, 1, 1, 8, 0) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-23T06:30:34.577

将 pytz tzinfo 对象传递给`fromtimestamp()`方法：

```
#!/usr/bin/env python
from datetime import datetime
import pytz # $ pip install pytz

tz = pytz.timezone("Asia/Singapore")
print(datetime.fromtimestamp(1325376000, tz))
# -> 2012-01-01 08:00:00+08:00 
```

注意：结果对象是时区感知的：您可以将其与其他感知日期时间对象进行比较，即，您无需将其转换为 UTC 进行比较——您可以按原样使用它。

> 当新加坡是 +08:00 时，我什至不知道 +06:55 来自哪里。

你看到`+06:55`由于无效的`.replace()`调用。`get_current_timezone()`返回`pytz.timezone("Asia/Singapore")`具有可变 utc 偏移量的返回值（它可能在不同日期具有不同的 utc 偏移量）。当您调用`.replace()`一些随机（取决于实现）时使用 tzinfo 对象。问题是该`.replace()`方法不允许`pytz.timezone("Asia/Singapore")`为输入日期选择正确的 tzinfo。

```
>>> list(tz._tzinfos.values())
[<DstTzInfo 'Asia/Singapore' MALT+7:00:00 STD>,
 <DstTzInfo 'Asia/Singapore' MALT+7:20:00 STD>,
 <DstTzInfo 'Asia/Singapore' JST+9:00:00 STD>,
 <DstTzInfo 'Asia/Singapore' SMT+6:55:00 STD>,
 <DstTzInfo 'Asia/Singapore' SGT+7:30:00 STD>,
 <DstTzInfo 'Asia/Singapore' MALT+7:30:00 STD>,
 <DstTzInfo 'Asia/Singapore' MALST+7:20:00 DST>,
 <DstTzInfo 'Asia/Singapore' LMT+6:55:00 STD>,
 <DstTzInfo 'Asia/Singapore' SGT+8:00:00 STD>] 
```

即，两者`+06:55`都`+0800`对新加坡有效（在不同的日期）。这就是为什么您应该`.replace()`只使用具有恒定 utc 偏移量的时区，例如 utc 时区本身（偏移量为零，**始终**适用于任何日期）。

`fromtimestamp(,tz)`内部方法调用`tz.fromutc()`允许`tz`为给定的 UTC 时间选择正确的偏移量。

# haskell - 继续传递类 型的样式表示

> ID：12589765
> 
> 赞同：16
> 
> 时间：2012-09-25T19:27:15.933
> 
> 标签：haskell, continuations, continuation-passing

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T22:03:48.563

## No such encoding is Unique

As you posed the question the answer is obviously "no"

```
a = forall r. (a -> r) -> r
a = forall s. ((forall r. (a -> r) -> r) -> s) -> s 
```

as to which encoding is the smallest...well the underlying type is almost certainly!

## Codensity might not be what you want

whats more, although Codensity is fascinating, I don't believe it is isomorphic to the underlying type. `from . to = id` is the easy direction.

```
to . from
  = \x -> to (from x)
  = \x -> C $ \f -> (from x) >>= f
  = \x -> C $ \f -> (unC x return) >>= f
  = \(C g) -> C $ \f -> (g return) >>= f 
```

but then you get kinda stuck. The same thing happens when you try to prove `a = forall r. (a -> r) -> r` but you get saved by the "theorem for free" (there might be a way to do it without this, but the free theorem makes it easy). I know of no corresponding argument for Codensity, and what most papers I have read prove is rather that it preserves `>>=` and `return`, that is, if you only construct your `C m a` using the monadic operations and what you call `to` then the call to `to . from` is identity.

If we try hard enough we can even come up with a counter example to the isomorphism

```
evil :: C Maybe Int
evil = C $ \h -> case h 1 of
                      Nothing -> h 2
                      Just x  -> Nothing

 to . from $ evil
  = (\(C g) -> C $ \f -> (g return) >>= f) evil
  = C $ \f -> ((\h -> case h 1 of
                      Nothing -> h 2
                      Just x  -> Nothing) return) >>= f
  = C $ \f -> Nothing >>= f 
```

so are these the same?

```
test 1 = Nothing
test n = Just n

unC evil test
  = Just 2
unC (C $ \f -> Nothing >>= f) test
  = Nothing >>= test
  = Nothing 
```

I might have made a mistake in that derivation. I have not really checked it, but suffice it to say that right now I don't think `C m a = m a`

## Another Kind of CPS

All data can be encoded as untyped lambda functions, a property discovered by Church about 70 years ago. Often we talk about "Church encoding" data structures, although Oleg has suggested that instead, at least in a typed setting, we should talk about "Boehm-Beraducci" encodings. Regardless of what you call it, the idea is

```
(a,b) = forall r. (a -> b -> r) -> r
Either a b = forall r. (a -> r) -> (b -> r) -> r 
```

at least up to fast and loose reasoning. It should be obvious that this encoding provides a way to encode *any* ADT as a System F type. This also reveals a way of implementing functional languages: treat everything as closures under the hood, and have pattern matching just be implemented as function application.

Actually, System F even has a way of encoding existential types as universal types

```
exists a. f a = forall r. (forall a'. f a' -> r) -> r 
```

which turns out to be a very important identity. Among other things, this helps us to think about the relation between type inference for higher rank types and for existential types. Since type inference is decidable up to rank 2 types, type inference is also decidable in a system with rank 1 universals and existentials. Since existential quantification is the basis for modules, this is important stuff.

# python - Mac OS X echo $PATH 给出了奇怪的目录。Xcode 安装对了吗？

> ID：12589766
> 
> 赞同：0
> 
> 时间：2012-09-25T19:27:23.990
> 
> 标签：python, c, xcode, macos, gcc

我试图弄清楚 Xcode 是否安装正确，因为我在 Mac OS X Mountain Lion 上编译 C 程序时遇到问题。为什么 echo $PATH 的输出与 Python.framework 有任何关系？

```
Shanes-MacBook-Pro:all_dsc chimpsarehungry$ echo $PATH
    /Library/Frameworks/Python.framework/Versions/Current/bin:/sw/bin:/sw/sbin:/Library/Frameworks/Python.framework/Versions/3.2/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11R6/bin 
```

我开始研究正确安装 Xcode 的问题，因为当我尝试编译 C 程序时出现以下错误。

```
Shanes-MacBook-Pro:all_dsc chimpsarehungry$ gcc main.c
Undefined symbols for architecture x86_64:
  "_output_res", referenced from:
      _main in cc1YZOoj.o
  "_pred_acc", referenced from:
      _main in cc1YZOoj.o
  "_predict_sequence", referenced from:
      _main in cc1YZOoj.o
  "_read_sequence", referenced from:
      _main in cc1YZOoj.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

当我输入“make”时，我得到了类似的错误。我对此很陌生。以后我会发布一个关于运行 C 程序和编译的问题。但是现在，我只想解决我得到的这个奇怪的目录。

# python - 直接上传到本地谷歌云存储

> ID：12589769
> 
> 赞同：2
> 
> 时间：2012-09-25T19:27:39.350
> 
> 标签：python, google-app-engine, google-cloud-storage

根据此处的答案：[使用 Google App Engine 将图像/视频上传到谷歌云存储](https://stackoverflow.com/questions/11364878/upload-images-video-to-google-cloud-storage-using-google-app-engine)

我打电话给：

```
upload_url = blobstore.create_upload_url(url, gs_bucket_name='my_bucket') 
```

但是，我仍然看到文件被上传到 blobstore 而不是云存储。

这是在本地开发服务器上，我正在通过检查数据存储类型`BlobInfo`和`GsFileInfo`. 当我直接使用 Cloud Storage API 创建和写入文件时，我得到一个`GsFileInfo`，但是当我尝试以上述方式直接上传到本地 Cloud Storage 时，我得到一个新`BlobInfo`实体。

有什么建议么？

另外，还有其他方法可以查看本地云存储的内容吗？`gsutil`有什么方法可以针对本地进行配置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T22:00:36.837

在开发服务器上，模拟云存储，并将所有 blob 上传到 blobstore。

# c# - 将视图中的 src 属性设置为 MVC3 项目之外的 url

> ID：12589771
> 
> 赞同：10
> 
> 时间：2012-09-25T19:27:42.200
> 
> 标签：c#, asp.net-mvc-3

我正在尝试创建一个应用程序来显示本地存储在网络服务器上的图像。这是我的观点，请注意“条目”是绝对地址，例如`"C:\Images\Image1.jpg"`. 但是，当我运行它时，我会`"Not allowed to load local resource: file:///C:/Images/ImageName.jpg"`进入控制台日志。所以也许它会尝试访问客户端上的图像。如何告诉我的视图访问本地网络服务器路径而不是在客户端上查找图像源？请注意，将图像移动到项目目录不是一种选择，因为图像存储在网络服务器的不同驱动器上。

```
<!-- language: c# -->
@model List<String>
<div style="height: 500px; overflow:scroll;">
<h2>
    ScreenShots for testMachine</h2>

@foreach (var entry in Model)
{          
   <div class="nailthumb-container square-thumb">
   <img alt="screenshot" src="@Url.Content(entry)" /> 

</div>
}
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T19:30:40.640

您不能直接将 ASP.NET MVC 3 应用程序之外的图像提供给客户端。如果客户端可以访问您服务器上的任意文件，那将是一个巨大的安全漏洞。

您将需要编写一个将返回它们的控制器操作，然后将您的标签`src`属性指向此控制器操作。`<img>`

```
public class ImagesController: Controller
{
    public ActionResult SomeImage()
    {
        return File(@"C:\Images\foo.jpg", "image/jpeg");
    }
} 
```

在你的视野内：

```
<img src="@Url.Action("SomeImage", "Images")" alt="" /> 
```

您还可以将图像名称作为参数传递给控制器​​操作：

```
public class ImagesController: Controller
{
    public ActionResult SomeImage(string imageName)
    {
        var root = @"C:\Images\";
        var path = Path.Combine(root, imageName);
        path = Path.GetFullPath(path);
        if (!path.StartsWith(root))
        {
            // Ensure that we are serving file only inside the root folder
            // and block requests outside like "../web.config"
            throw new HttpException(403, "Forbidden");
        }

        return File(path, "image/jpeg");
    }
} 
```

在您看来：

```
<img src="@Url.Action("SomeImage", "Images", new { image = "foo.jpg" })" alt="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T05:08:10.460

上面的代码对我很有用，有这样的改变

```
 System.Web.UI.Page page = new System.Web.UI.Page();
 string filePath = page.Server.MapPath("~/Log/" + fileName);

        if (!filePath.StartsWith(filePath))

        {

            throw new HttpException(403, "Forbidden");
        }

        return File(filePath, "Content-Disposition", "attachment;filename=TableImportLog.csv"); 
```

}

扔给用户的文件是这样的文件名“附件；文件名=TableImportLog.csv”，但我希望文件名为“TableErrorLog.csv”需要同样的帮助！

# c# - 窗口加载和 WPF

> ID：12589772
> 
> 赞同：7
> 
> 时间：2012-09-25T19:27:47.657
> 
> 标签：c#, wpf, events, xaml, mvvm

我在 Windows 2012 中有一个 WPF 项目，我需要在 Window Loaded 事件中加载一些信息。不过，我需要在视图模型中而不是在 CodeBehind 中执行此操作。我正在尝试使用以下代码：

在我的 xaml 中：

```
<interactivity:Interaction.Behaviors>
    <behaviors:WindowLoadedBehavior LoadedCommand="{Binding WindowLoadedCommand}" />
</interactivity:Interaction.Behaviors> 
```

在我的视图模型中：

```
private DelegateCommand _WindowLoadedCommand;

public DelegateCommand WindowLoadedCommand
{
    get
    {
        return _WindowLoadedCommand;
    }
    private set
    {
        _WindowLoadedCommand = value;
    }
}

public ShellViewModel()
{
    WindowLoadedCommand = new DelegateCommand(WindowLoadedAction);
}

protected void WindowLoadedAction()
{
    ...
} 
```

我的附加行为：

```
public class WindowLoadedBehavior : Behavior<FrameworkElement>
{
    [SuppressMessage("Microsoft.StyleCop.CSharp.MaintainabilityRules", "SA1401:FieldsMustBePrivate", Justification = "Dependency Property.  Allow public.")]
    public static DependencyProperty LoadedCommandProperty = DependencyProperty.Register("LoadedCommand", typeof(ICommand), typeof(WindowLoadedBehavior), new PropertyMetadata(null));

    public ICommand LoadedCommand
    {
        get { return (ICommand)GetValue(LoadedCommandProperty); }
        set { SetValue(LoadedCommandProperty, value); }
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.Loaded += AssociatedObject_Loaded;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Loaded -= AssociatedObject_Loaded;

        base.OnDetaching();
    }

    private void AssociatedObject_Loaded(object sender, RoutedEventArgs e)
    {
        if (LoadedCommand != null)
            LoadedCommand.Execute(null);
    }
} 
```

OnAttached、AssociatedObject_Loaded 和 LoadedCommand get 都在触发，但 LoadedCommand 集没有触发，显然 WindowLoadedCommand 没有触发。任何线索我可以做些什么来让这个工作？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-25T21:19:38.300

有几个选项。这里列出了其中的几个：

[如何在 WPF MVVM 中调用窗口的 Loaded 事件？](https://stackoverflow.com/questions/1222704/how-to-call-a-windows-loaded-event-in-wpf-mvvm?rq=1)

但是，如果您或其他任何人关心您要花费几个小时来完成本应花费 30 秒的任务，您可能想尝试一下。

```
public MainWindow()
{
    InitializeComponent();

    this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
}

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    ShellViewModel.Instance.WindowLoadedCommand.Execute(null);
} 
```

# asp.net-mvc - MVC 4 数据注释

> ID：12589774
> 
> 赞同：1
> 
> 时间：2012-09-25T19:27:58.430
> 
> 标签：asp.net-mvc, asp.net-mvc-4, metadata, data-annotations

我在 MVC 4 项目中使用数据注释和 Scaffolding Nuget 来创建 CRUD 视图。我使用的是层级数据库模型而不是 EF。

所以我的班级如下所示：

```
[MetadataType(typeof(CustomerMetaData))] 
public partial class UserProfile: IBrObject
{
     public UserProfile(string aspUserName): this()
        {
            this.AspUserName = aspUserName;
        }

     public string AspUserName { get; set; }
     public DateTime MetaDateFirstSaved { get; set; }
}

public class CustomerMetaData
{
            [ReadOnly(true)]             
            [ScaffoldColumn(false)]
            [DisplayName("ASP UserName")]
            public object AspUserName { get; set; }
           [DisplayName("Date First Saved")]
           [DataType(DataType.Date)]
            public object MetaDateFirstSaved { get; set; }
} 
```

当我尝试使用 Scaffolding Nuget 创建视图时，它仍然显示 AspUserName 列不隐藏或不只读。我如何隐藏或只读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:30:30.753

您`object`在元数据中使用，`string`并`DateTime`分别在实际视图模型中使用，因此它们不匹配。

**更新**

另一种可能性（*我很确定这就是您的情况*）是因为您在视图中的模型类型定义为接口类型而不是类类型。

在您看来，替换`@model IBrObject`为`@model UserProfile`.

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:34:27.700

对象 AspUserName != 字符串 AspUserName

# c# - 如何全局取消特定业务逻辑的回发事件？

> ID：12589777
> 
> 赞同：3
> 
> 时间：2012-09-25T19:28:06.390
> 
> 标签：c#, asp.net, asp.net-3.5

我希望能够显示一个页面，但禁用所有控件。这个想法是让用户查看标准页面，但实际上并不与页面交互。禁用所有 UI 控件服务器端很简单，但我主要担心的是“有创意”的用户试图手动将表单发回虚假信息。我的问题有两个：

1.  内置的事件验证会捕捉到不正当的活动吗？
2.  如果事件验证没有捕捉到它，有没有办法全局丢弃回发事件（例如按钮单击，而不是整个生命周期）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:41:53.170

解决您的两个问题之一：

> 如果事件验证没有捕捉到它，有没有办法全局丢弃回发事件（例如按钮单击，而不是整个生命周期）？

一种选择可能是向 ViewState 添加一个值，如果该值存在于回发中，则将用户重定向到错误页面。应该捕获篡改视图状态的用户。这不符合您仅丢弃回发事件的愿望，但可能在从您认为不可能回发的页面接收回发后重定向到错误页面是可以的。

```
if (ViewState["PageSetToReadOnly"] != null)
{
  // Redirect to error page.
} 
```

另一种选择是检查它是否是页面的 PreInit 事件中的回发，如果是，则取消连接事件处理程序：

```
if (Page.IsPostBack)
{
  this.Button1.Click -= new EventHandler(Button1_Click);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:47:34.267

不，你不能停止正常的`Postback`进程。

您如何确定是否应禁用该页面？在`Postback`您的按钮处理程序中使用相同的检查。如果是真的，那么不要保存任何信息。

```
public void button1_Click(object sender, EventArgs e)
{
    if(Page is disabled)
    {
        return
    }
    //Do normal save routine
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T20:44:28.127

我认为全局取消回发的最佳方法是覆盖此 Page 方法。您可以在 OnLoad 事件期间执行设置 DoNotProcessPostBack 所需的任何逻辑：

```
Protected Overrides Sub RaisePostBackEvent(sourceControl As IPostBackEventHandler, eventArgument As String)
    If DoNotProcessPostBack = False Then
        MyBase.RaisePostBackEvent(sourceControl, eventArgument)
    End If
End Sub 
```

sourceControl 是执行回发并跳过 MyBase.RaisePostBackEvent 的控件，基本上会使为其引发事件无效。

# winapi - 为什么是 TTN_NEEDTEXTW 而不是 TTN_NEEDTEXTA？

> ID：12589778
> 
> 赞同：3
> 
> 时间：2012-09-25T19:28:07.530
> 
> 标签：winapi, mfc, tchar

这是一个我从未想过的老问题 - 想知道这里是否有人碰巧知道你脑海中的答案......

在我们软件的某些部分 (MFC/Win32/MBCS) 我的代码只会收到

TTN_NEEDTEXTW

在我们软件的其他部分，我会收到 MBCS 正确消息

TTN_NEEDTEXTA

对我来说完全是无稽之谈。

我知道我们的软件可以编译为 Unicode 或不编译（我们设置为使用多字节字符集）。我有一个模糊的回忆，每个窗口都可以构造成 Unicode 或不构造，虽然这是一个模糊的记忆，没有什么具体的。

有谁知道为什么我们会在代码中的某些地方得到宽版本消息，尽管被编译为多字节？

笔记：

*   我们绝对不会发送此消息 - 大概是 ToolTip 控件。
*   我们肯定只在某些地方接收到 (W) 消息，而在其他地方肯定只接收到 (A) 消息。
*   我确定所有编译模块都使用 MBCS，而不是 Unicode，并且构建目标都指定 MBCS 而不是 Unicode。
*   这似乎只发生在 CMainFrame 托管的窗口和控件上。即主框架之外的窗口可以使用窄版本（比如在对话框中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:48:08.303

公共控件向您发送一条`WM_NOTIFYFORMAT`消息，询问您“您希望接收 MBCS 通知还是 Unicode 通知？” 默认是根据窗口是通过`CreateWindowExW`还是创建的来响应的`CreateWindowExA`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-06T15:01:42.260

使用 MFC ansi 应用程序（处理 unicode 数据），我在 CStatic 派生类和工具提示中遇到了这个问题，我得到的是 TTN_NEEDTEXTA，而不是在我的情况下，是所需的 TTN_NEEDTEXTW。

使用接受的答案，设法获得 TTN_NEEDTEXTW。

```
BEGIN_MESSAGE_MAP(CStaticDerived, CStatic)
ON_WM_NOTIFYFORMAT()
ON_NOTIFY_EX_RANGE(TTN_NEEDTEXTW, 0, 0xFFFF, OnTTNeedText)
END_MESSAGE_MAP()

UINT CStaticDerived::OnNotifyFormat(
    CWnd *pWnd,
    UINT nCommand) {

    if (pWnd->m_hWnd
            == AfxGetModuleThreadState()->m_pToolTip->m_hWnd) {
        // want TTN_NEEDTEXTW for tooltips
        return NFR_UNICODE;
    }

    return __super::OnNotifyFormat(pWnd, nCommand);
} 
```

# asp-classic - 经典的 asp 请求带单引号的输入

> ID：12589781
> 
> 赞同：0
> 
> 时间：2012-09-25T19:28:16.033
> 
> 标签：asp-classic, vbscript

我正在尝试读取文本区域（id= Message）并将其保存到数据库中。问题是如果用户在文本中输入单引号 (')，下面的两个代码都无法处理它。

```
Request("Message") 
```

或者

```
Replace(Request("Message"),"'","") 
```

两者都失败并显示错误消息

```
Security violation occurred
Incorrect value was passed for field "Message" 
```

.

好像一读就失败`Request("Message")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:52:45.727

我怀疑这可能是防止 SQL 注入的托管级别安全措施。如果是这种情况，唯一的解决方案可能是要求您的主机禁用它（并自己保护它）或在提交表单时添加一些 JavaScript 来替换或 HTML 编码撇号。

您是在本地计算机上进行测试，还是仅在由网络托管公司托管的网站上进行测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:40:17.087

您应该使用命令对象将用户输入的数据安全地保存到数据库中。

```
set cmd = Server.CreateObject("ADODB.Command")
set cmd.ActiveConnection = conn
cmd.CommandText = "INSERT INTO table(message) VALUES(?)"
cmd.CommandType = 1
recordsAffected = 0
call cmd.Execute(recordsAffected, array(Request("Message")&""))

if recordsAffected <> 1 then
  Response.Write "Something went wrong!"
else
  Response.Write "Data saved!"
end if 
```

上面的代码假设您与存储在变量 conn 中的数据库建立了一个开放的连接。

# cocos2d-iphone - (Kobold2d) 升级到 xcode 4.5 后出现 Clang 错误

> ID：12589782
> 
> 赞同：1
> 
> 时间：2012-09-25T19:28:16.403
> 
> 标签：cocos2d-iphone, compiler-errors, kobold2d

我升级到 xcode 4.5 并将 Kobold2d 更新到 2.0.4 版，现在在尝试构建项目时出现此错误。

```
clang: error: no such file or directory: 'Items/Kobold2D/Kobold2D-2.0.4/KTireHoops/../__Kobold2D__/libs/GoogleAdMobAdsSDK/libGoogleAdMobAds.a' 
```

有谁知道出了什么问题以及我该如何解决？

# sql-server - 无法安装 Microsoft SQL Server 2008 (R2) Management Studio

> ID：12589785
> 
> 赞同：3
> 
> 时间：2012-09-25T19:28:34.707
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

编辑：解决了！参见下文

当我想在我的 Win7 PC 上安装 MS SQL Server 2008 (R2) 时，我不断收到我需要删除我的 SQL Server 2005 Express 的错误。但是，它不再安装。 ![在此处输入图像描述](../Images/6abfb41765a907e03c76283630f31379.png)

我遵循与此处相同的例程：[SQL Server Express 2008 Install Side-by-side w/ SQL 2005 Express Fails](https://stackoverflow.com/questions/175881/sql-server-express-2008-install-side-by-side-w-sql-2005-express-fails) without result。

我删除了链接到 SQL Server 2005 的所有内容并尝试安装 2008，同样的错误...
重新安装 2005 并尝试通过 2008 安装程序进行更新，“找不到要更新的 2005 共享模块”
删除 2005，重新启动，运行 2008 安装程序，同样的错误：需要删除2005 Express
重新安装2005，删除共享模块，尝试安装2008，同样的错误
完全删除2005，重新启动，运行安装程序，系统上仍然是2005？！

这次我再次运行了设置并安装了除了 Menegement Studio 之外的所有东西。
太糟糕了，这是我绝对需要跟随我的课程的一个程序。

我希望你能帮我解决这个问题！

PS：我已经安装了很多 SQL 程序，因为我已经安装了 Visual Studio，SQLyog，......为我的学习安装

**解决方案**
发现有人有同样的问题：[http](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/5fc58507-9f40-4213-acbd-32a57c8822d7/)
: //social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/5fc58507-9f40-4213-acbd-32a57c8822d7/ 我如何解决我的问题：因为我有一个64 位系统，我必须删除此寄存器文件夹：*HKLM\Software\Wow6432Node\Microsoft\Microsoft SQL Server\90*
对于 32 位系统：删除*HKLM\SOFTWARE\Microsoft\Microsoft SQL Server\90*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:48:16.527

我以前有同样的问题。这与 SQL Server 2005 Express 无关，您可能为 SQL Server 2005 安装了一些附加组件。

这是我的解决方案：

1.  运行注册表
2.  检查 HKLM\SOFTWARE\Microsoft\Microsoft SQL Server\90\Tools\ShellSEM
3.  如果存在，将“ShellSEM”重命名为任何名称
4.  再次运行 SQL Server 2008 安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:41:54.847

您是否尝试过卸载 SSMS？(SQL Server Management Studio Express) 除非您知道您下载了较新的版本 (2008)，否则它可能不会在程序窗口中报告版本。

# c++ - 当被品尝管理器杀死时如何防止内存泄漏

> ID：12589787
> 
> 赞同：0
> 
> 时间：2012-09-25T19:28:41.370
> 
> 标签：c++, windows, winapi, memory-management, gcc

> **可能重复：**
> [当程序使用 Ctrl-C 中断时，如何释放动态分配的空间？](https://stackoverflow.com/questions/7277477/how-is-dynamically-allocated-space-freed-when-a-program-is-interrupted-using-ctr)

我的应用程序使用指针，因此需要分配内存。

如果你用任务管理器杀死我的应用程序会发生什么？windows会释放分配的内存吗？

*我的析构函数没有被调用，所以我的应用程序无法清理:(*

**有解决办法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:29:49.717

当一个进程被杀死（或以任何其他方式结束）时，操作系统会回收该进程使用的内存，因此不会发生内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:31:28.507

您在流程中的记忆与流程本身相关联。如果进程通过任务管理器停止，那么它分配的所有内存都将被释放。

内存泄漏仅在程序运行时发生。

# mysql - MySql SELECT 多对（多对多）

> ID：12589788
> 
> 赞同：0
> 
> 时间：2012-09-25T19:28:55.423
> 
> 标签：mysql, select, many-to-many, sphinx

如何加入两个级联的多对多关系？

我有 5 张桌子：

```
ITEMS            : id /     name

ITEMS_TAXONOMIES : id /    item_id    / taxonomy_id

TAXONOMIES       : id /  attribute_id / adjective_id

ATTRIBUTES       : id /     name

ADJECTIVES       : id /     name 
```

我需要一个 SELECT 来检索特定项目的所有关联的属性形容词对。

我正在使用 Sphinx 搜索引擎，我需要查找与这些项目相关联的 WORDS。

谢谢你的提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:14:03.753

（我在狮身人面像论坛上的答案副本）

我认为最简单的解决方案是

```
sql_query = SELECT i.id, i.name , \
                    GROUP_CONCAT(CONCAT(at.name,' ',ad.name)) as taxonomies \
                    FROM items i \
                          LEFT JOIN items_taxonomies it ON (i.id = it.item_id) \
                          LEFT JOIN taxonomies t ON (t.id = it.taxonomy_id) \
                          LEFT JOIN attributes at ON (at.id = t.attribute_id) \
                          LEFT JOIN adjectives ad ON (ad.id = t.adjective_id) \
                    GROUP BY i.id \
                    ORDER BY NULL 
```

只需搜索您不需要使用 sql_attr_multi 的单词。通过 sql_joined_field 进行索引可能会稍微提高性能，但上述方法更简单，因此请先尝试。或者您可以将属性和形容词放在单独的字段中。但上面有一个好处是可以搜索“属性栏”来获得特定的分类。

如果您想在结果中分组或取回文档的相关分类列表，您可以将 taxonomy_id 粘贴到 MVA 中。

# iphone - 在添加到视图之前在后台线程中更新 UI 元素

> ID：12589789
> 
> 赞同：5
> 
> 时间：2012-09-25T19:28:58.940
> 
> 标签：iphone, objective-c, ios, multithreading, grand-central-dispatch

我只是想把头绕在 Grand Central Dispatch (GCD) 上，但我似乎无法找到答案

所以我知道通常你不应该从主线程以外的任何线程更新 UIView 元素。所以这是非法的：

```
dispatch_async(workerQueue, ^{
    self.view.backgroundColor = [UIColor redColor];
}); 
```

但是您是否允许在视图元素实际添加到视图之前对其进行处理？换句话说，这是否允许？

```
dispatch_async(workerQueue, ^{
    UIButton *thisLevelButton = [UIButton buttonWithType:UIButtonTypeCustom];
    thisLevelButton.frame = CGRectMake(x, y, BUTTON_WIDTH, BUTTON_HEIGHT);
    thisLevelButton.tag = kLevelButtonTags + j;

    int levelState = [[[thisCat objectForKey:[levelNamesInCat objectAtIndex:j]] objectAtIndex:4] intValue];

    [thisLevelButton setBackgroundImage:[UIImage imageNamed:@"ccLSButton50lock"]forState:UIControlStateNormal];
    thisLevelButton.alpha = 0.5;
    [thisLevelButton addTarget:self action:@selector(unlockButtonAction:) forControlEvents:UIControlEventTouchUpInside];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.view addSubview:thisLevelButton];
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:58:56.023

是的你可以。最佳做法是不**更新**. 初始化没问题。

[可以在此博客文章中阅读示例。](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)它几乎与您正在尝试的内容一致。

# python - Python 正则表达式排除下划线

> ID：12589791
> 
> 赞同：5
> 
> 时间：2012-09-25T19:29:13.337
> 
> 标签：python, regex

我需要在 UNICODE 中找到所有两个字符的 sumbols，下划线除外。目前的解决方案是：

```
pattern = re.compile(ur'(?:\s*)(\w{2})(?:\s*)', re.UNICODE | re.MULTILINE | re.DOTALL)
print pattern.findall('a b c ab cd vs sd a a_ _r')
['ab', 'cd', 'vs', 'sd', 'a_', '_r'] 
```

我需要从正则表达式中排除下划线 _，因此找不到**a_** AND **_r 。**问题是，我的角色可以是任何语言。所以我不能像这样使用正则表达式：[^a-zA-Z]。例如，在俄语中：

```
print pattern.findall(u'ф_') 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T19:35:19.430

排除任何非单词 char AND _

```
[^\W_] 
```

代替

```
\w 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T19:33:05.367

您最好的选择是改用新[`regex`模块](http://pypi.python.org/pypi/regex)。它的功能之一是它可以从字符集中*删除字符：*

```
import regex as re

pattern = re.compile(ur'(?:\s*)([\w--_]{2})(?:\s*)', re.UNICODE | re.MULTILINE | re.DOTALL) 
```

该`[\w--_]`语法创建的字符集`\w`与从匹配字符中删除的下划线字符相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-30T17:12:03.367

这似乎对我有用：

```
a="Exclude_from_search"
re.search("(\w[^_]+)", a).group(0)
'Exclude' 
```

# mongodb - 如何替换mongodb文档中的子字符串

> ID：12589792
> 
> 赞同：93
> 
> 时间：2012-09-25T19:29:14.263
> 
> 标签：mongodb, mongodb-.net-driver, mongo-shell, mongodb-update

我在表单集合中有很多 mongodb 文档：

```
{
....
"URL":"www.abc.com/helloWorldt/..."
.....
} 
```

我想替换`helloWorldt`为`helloWorld`：

```
{
....
"URL":"www.abc.com/helloWorld/..."
.....
} 
```

如何为我的收藏中的所有文档实现这一点？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2015-07-07T07:50:17.680

```
db.media.find({mediaContainer:"ContainerS3"}).forEach(function(e,i) {
    e.url=e.url.replace("//a.n.com","//b.n.com");
    db.media.save(e);
}); 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2019-06-12T06:57:20.363

如今，

*   开始`Mongo 4.2`，[`db.collection.updateMany`](https://docs.mongodb.com/master/reference/method/db.collection.updateMany/index.html)（的别名`db.collection.update`）可以接受一个聚合管道，最后允许根据自己的值更新一个字段。
*   开始`Mongo 4.4`，新的聚合运算符[`$replaceOne`](https://docs.mongodb.com/master/reference/operator/aggregation/replaceOne/#exp._S_replaceOne)使得替换字符串的一部分变得非常容易。

```
// { URL: "www.abc.com/helloWorldt/..." }
// { URL: "www.abc.com/HelloWo/..." }
db.collection.updateMany(
  { URL: { $regex: /helloWorldt/ } },
  [{
    $set: { URL: {
      $replaceOne: { input: "$URL", find: "helloWorldt", replacement: "helloWorld" }
    }}
  }]
)
// { URL: "www.abc.com/helloWorld/..." }
// { URL: "www.abc.com/HelloWo/..." } 
```

*   第一部分 ( `{ URL: { $regex: /helloWorldt/ } }`) 是匹配查询，过滤要更新的文档（包含 的文档`"helloWorldt"`）并且只是为了使查询更快。
*   第二部分 ( `$set: { URL: {...`) 是更新聚合管道（注意方括号表示使用聚合管道）：
    *   [`$set`](https://docs.mongodb.com/master/reference/operator/aggregation/set/#pipe._S_set)是一个新的聚合运算符 ( `Mongo 4.2`)，在这种情况下它替换了字段的值。
    *   使用 new 运算符计算新值[`$replaceOne`](https://docs.mongodb.com/master/reference/operator/aggregation/replaceOne/#exp._S_replaceOne)。请注意如何`URL`直接根据其自身的值 ( `$URL`) 进行修改。

* * *

在`Mongo 4.4`开始之前`Mongo 4.2`，由于缺少适当的字符串运算符，我们必须使用和`$replace`的混合：`$concat``$split`

```
db.collection.updateMany(
  { URL: { $regex: "/helloWorldt/" } },
  [{
    $set: { URL: {
      $concat: [
        { $arrayElemAt: [ { $split: [ "$URL", "/helloWorldt/" ] }, 0 ] },
        "/helloWorld/",
        { $arrayElemAt: [ { $split: [ "$URL", "/helloWorldt/" ] }, 1 ] }
      ]
    }}
  }]
) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T20:37:40.060

目前，您不能使用字段的值来更新它。因此，您必须遍历文档并使用函数更新每个文档。这里有一个示例说明您可以如何执行此操作：[MongoDB：使用同一文档中的数据更新文档](https://stackoverflow.com/questions/3788256/mongodb-updating-documents-using-data-from-the-same-document/3792958#3792958)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-02T04:30:22.153

### 使用 mongodump、bsondump 和 mongoimport。

有时 mongodb 集合对于嵌套数组/对象等可能会变得不太复杂，在这些集合中围绕它们构建循环相对困难。我的工作有点原始，但在大多数情况下都适用，无论集合的复杂性如何。

**1\. 使用 mongodump 将集合导出到 .bson**

```
mongodump --db=<db_name> --collection=<products> --out=data/ 
```

**2.使用bsondump将.bson转换成.json格式**

```
bsondump --outFile products.json data/<db_name>/products.bson 
```

**3\. 将 .json 文件中的字符串替换为 sed（用于 linux 终端）或任何其他工具**

```
sed -i 's/oldstring/newstring/g' products.json 
```

**4.使用带有--drop标签的mongoimport导入.json集合，它将在导入之前删除集合**

```
mongoimport --db=<db_name>  --drop --collection products <products.json 
```

> 或者，您可以在 mongoimport 和 mongodump 中使用 --uri 进行连接

例子

```
mongodump --uri "mongodb://mongoadmin:mystrongpassword@10.148.0.7:27017,10.148.0.8:27017,10.148.0.9:27017/my-dbs?replicaSet=rs0&authSource=admin" --collection=products --out=data/ 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-08-14T17:31:41.793

要替换文档中出现的**所有子字符串，请使用：**

```
db.media.find({mediaContainer:"ContainerS3"}).forEach(function(e,i) {
var find = "//a.n.com";
var re = new RegExp(find, 'g');
e.url=e.url.replace(re,"//b.n.com");
db.media.save(e);
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-07-25T18:42:08.120

节点。使用[来自 npm 的 mongodb 包](https://www.npmjs.com/package/mongodb)

```
db.collection('ABC').find({url: /helloWorldt/}).toArray((err, docs) => {
  docs.forEach(doc => {
    let URL = doc.URL.replace('helloWorldt', 'helloWorld');
    db.collection('ABC').updateOne({_id: doc._id}, {URL});
  });
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-11T06:20:42.150

我对所选答案（@Naveed 的答案）的评论的格式已被打乱 - 因此将其添加为答案。所有功劳归于 Naveed。

## -------------------------------------------------- --------------------

太棒了。我的情况是——我有一个数组字段——所以我不得不添加一个额外的循环。

我的查询是：

```
db.getCollection("profile").find({"photos": {$ne: "" }}).forEach(function(e,i) {
    e.photos.forEach(function(url, j) {
        url = url.replace("http://a.com", "https://dev.a.com");
        e.photos[j] = url;
    });
    db.getCollection("profile").save(e);
    eval(printjson(e));
}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-24T01:37:59.290

这可以通过`Regex`在方法的第一部分中使用来完成`replace`，它将`g`用第二个字符串替换该字符串的 [all if in regex pattern] 出现，这与 Javascript 中的正则表达式相同，例如：

```
const string = "www.abc.com/helloWorldt/...";
console.log(string);
var pattern = new RegExp(/helloWorldt/)
replacedString = string.replace(pattern, "helloWorld");
console.log(replacedString);
```

由于正则表达式正在替换字符串，现在我们可以通过该方法查找和迭代每个元素`forEach`并在循环中一个一个地保存，从而轻松地做到这一点是 MongoDB shell `forEach`，如下所示：

```
> db.media.find()
{ "_id" : ObjectId("5e016628a16075c5bd26fbe3"), "URL" : "www.abc.com/helloWorld/" }
{ "_id" : ObjectId("5e016701a16075c5bd26fbe4"), "URL" : "www.abc.com/helloWorldt/" }
> 
> db.media.find().forEach(function(o) {o.URL = o.URL.replace(/helloWorldt/, "helloWorld"); printjson(o);db.media.save(o)})
{
    "_id" : ObjectId("5e016628a16075c5bd26fbe3"),
    "URL" : "www.abc.com/helloWorld/"
}
{
    "_id" : ObjectId("5e016701a16075c5bd26fbe4"),
    "URL" : "www.abc.com/helloWorld/"
}
> db.media.find()
{ "_id" : ObjectId("5e016628a16075c5bd26fbe3"), "URL" : "www.abc.com/helloWorld/" }
{ "_id" : ObjectId("5e016701a16075c5bd26fbe4"), "URL" : "www.abc.com/helloWorld/" }
> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-03T12:58:39.400

现在你可以做到了！

我们可以使用 Mongo 脚本来动态操作数据。这个对我有用！

我使用这个脚本来更正我的地址数据。

当前地址示例：“第五大道 12 号”。

我想删除最后一个多余的逗号，即预期的新地址“第五大道 12 号”。

```
var cursor = db.myCollection.find().limit(100);

while (cursor.hasNext()) {
  var currentDocument = cursor.next();

  var address = currentDocument['address'];
  var lastPosition = address.length - 1;

  var lastChar = address.charAt(lastPosition);

  if (lastChar == ",") {

    var newAddress = address.slice(0, lastPosition);

    currentDocument['address'] = newAddress;

    db.localbizs.update({_id: currentDocument._id}, currentDocument);

  }
} 
```

希望这可以帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-09T08:31:16.147

如果你想搜索一个子字符串，并用另一个替换它，你可以尝试如下，

```
 db.collection.find({ "fieldName": /.*stringToBeReplaced.*/ }).forEach(function(e, i){
        if (e.fieldName.indexOf('stringToBeReplaced') > -1) {
          e.content = e.content.replace('stringToBeReplaced', 'newString');
          db.collection.update({ "_id": e._id }, { '$set': { 'fieldName': e.fieldName} }, false, true);
        }
    }) 
```

# spring - 如何对列表对象进行更改事件？

> ID：12589796
> 
> 赞同：1
> 
> 时间：2012-09-25T19:29:35.517
> 
> 标签：spring, hibernate, jsp

这是我的 JSP 代码，我在其中迭代了一个类列表。

```
<c:forEach items="${student.classes}" var="item" varStatus="status">
<tr>
<td><form:input path="classes[${status.index}].instructorName" size="20" maxlength="20"/></td>
<td><form:input path="classes[${status.index}].instructorGender" size="20" maxlength="20"/></td>
<td><form:input path="classes[${status.index}].instructorExp" size="20" maxlength="20"/></td>
</tr>
</c:forEach> 
```

可以说，我的列表中有 3 个对象，它将显示包含 3 行详细信息的页面。如果用户更改第二行，我需要将该索引发送到我的控制器，以便我可以使用该特定行的 updatetime 更新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:41:54.317

假设您有一个名为 /update?id=[id to update] 的服务器端 url，并且您的每个项目都有一个名为 id 的字段，这样的事情应该可以工作。

```
<script type="text/javascript">
function updateUpdateTime(id) {
  var xmlhttp=new XMLHttpRequest();
  xmlhttp.open("GET","/update?id="+id,true);
  xmlhttp.send();
}
</script>

<c:forEach items="${student.classes}" var="item" varStatus="status">
<tr>
<td><form:input onchange="updateUpdateTime(${item.id})" path="classes[${status.index}].instructorName" size="20" maxlength="20"/></td>
<td><form:input onchange="updateUpdateTime(${item.id})" path="classes[${status.index}].instructorGender" size="20" maxlength="20"/></td>
<td><form:input onchange="updateUpdateTime(${item.id})" path="classes[${status.index}].instructorExp" size="20" maxlength="20"/></td>
</tr>
</c:forEach> 
```

# sql-server - 用 PATINDEX 替换具有固定开头和结尾的字符串

> ID：12589803
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:30:04.047
> 
> 标签：sql-server, patindex

我正在编写一个查询来查找/替换具有明确开头和结尾的模式，中间有通配符。这是原始网址：

```
 "></title><script src="http://www.weblearn.edu"></script><!-- 
```

这是结果：

```
 cript src="http://www.weblearn.edu"></script><!-- 
```

-- 这是想要的结果：（没有字符或空格）

-- 我怎样才能更换整个东西？谢谢你的帮助。

```
 SELECT 

 CASE
 WHEN PATINDEX('">%http%<!--', AcademicDishonestyDesc) > 0 THEN 
 STUFF(AcademicDishonestyDesc, PATINDEX('">%http%<!--', AcademicDishonestyDesc), LEN('">%http%<!--'), '')
 END
 FROM AMS_CoursePolicyAcademicDishonesty
 WHERE      PATINDEX('">%http%<!--', AcademicDishonestyDesc) > 0

 GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:28:03.853

似乎最安全和最容易做的事情 - 因为您已经识别了 URL - 只是从任何 HTML 标记中删除 src 属性：

```
UPDATE dbo.table SET column = REPLACE(column, ' src="http://...bad script..."', ''); 
```

一个简单的例子：

```
DECLARE @n TABLE (x VARCHAR(255));

INSERT @n(x) VALUES
('...><script src="http://www.weblearn.edu"></script><!--'),  
('......><script src="http://www.weblearn.edu"></script><!--'),
('..><script src="http://www.weblearn.edu"></script><!--'),
('....><script src="somethingelse"></script><!--');

UPDATE @n SET x = REPLACE(x, ' src="http://www.weblearn.edu"', '')
  WHERE x LIKE '% src="http://www.weblearn.edu"%';

SELECT x FROM @n; 
```

结果（空脚本标签在 HTML 中绝对没问题）：

```
...><script></script><!--
......><script></script><!--    
..><script></script><!--  
....><script src="somethingelse"></script><!-- 
```

对每个错误的脚本 URL 重复。如果这不是您所追求的，请根据要求更新您的问题（例如，向我们展示所需的结果）。

# php - 将 mysql/php 代码传输到 PDO - 什么已取代 mysql_close($con)

> ID：12589805
> 
> 赞同：0
> 
> 时间：2012-09-25T19:30:17.017
> 
> 标签：php, mysql, pdo

我正在做一个长时间的轮询，所以我想在每个循环（大约 1 分钟循环）上关闭与数据库的连接。

我以前使用mysql_close($con)，那么我在PDO中使用什么？

此外，当我使用 mysql_query 时，它似乎将数字作为字符串返回，所以当我通过 json 将它们返回给我的调用 js 时，它仍然是一个字符串。但是现在，PDO 似乎实际上将它作为一个数字返回。这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:31:34.260

```
 $db = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
     // use the connection here
     ...........

     // and now we're done; close it
      unset($db); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:33:53.930

成功连接到数据库后，PDO 类的一个实例将返回到您的脚本。该连接在该 PDO 对象的生命周期内保持活动状态。要关闭连接，您需要通过确保删除对它的所有剩余引用来销毁该对象——您通过将 NULL 分配给保存该对象的变量来做到这一点。如果您没有明确地这样做，PHP 将在您的脚本结束时自动关闭连接。

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

//just unset the variable:
unset($dbh);
//or
$dbh = null; 
```

# events - 什么是 Facebook 活动应用程序 ID？

> ID：12589807
> 
> 赞同：0
> 
> 时间：2012-09-25T19:30:19.983
> 
> 标签：events, widget, feed, facebook-social-plugins, app-id

我已经在我的网站上嵌入了活动提要小部件，但我只想从我的 FB 业务页面显示 FB 事件 - 我认为脚本生成器会这样做，但我不知道 Facebook 事件应用程序 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:23:01.497

这不是活动提要的工作方式 - 它会拉取对您的域或应用程序中的对象执行的操作（例如，喜欢文章、打开图形操作的帖子）- 它不会拉动您在 Facebook 页面上的 Facebook 活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:42:51.537

以下文章可帮助您了解 App ID 的概念及其用法。

[http://help.yahoo.com/l/us/yahoo/smallbusiness/store/edit/social/social-06.html](http://help.yahoo.com/l/us/yahoo/smallbusiness/store/edit/social/social-06.html)

[https://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/)

# c# - 为每个 DataTable 添加 UserControl 到 FlowLayoutPanel

> ID：12589810
> 
> 赞同：0
> 
> 时间：2012-09-25T19:30:21.967
> 
> 标签：c#, user-controls, datatable, dataset, flowlayoutpanel

我创建了一个 UserControl，它有一张图片和两个标签： labelName labelUsername

我还创建了一个从 SQL CE 数据库获取数据的 DataSet 和 DataTable。当我设法遍历所有 DataTable 行并在 MessageBox 中显示信息时，该位工作正常。

现在，我想在 FlowLayoutPanel 中为 DataTable 中的所有行显示 UserControl，并使用 DataTable 中的 Name 和 Username 值填充两个标签。这是我卡住的地方，因为我不知道在 UserControl 中编码什么以及在包含 FlowLayoutPanel 的表单中编码什么。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:16:20.173

您将在您的 Form 和 UserControl 中对此进行编码。

在您的 UserControl 中，在属性或方法中公开两个标签中的每一个的 Text 属性。如果您选择一个属性，您的 Label labelUsername 可能看起来像这样：

```
public string Username {
    set { labelUsername.Text = value; }
} 
```

在您的表单中，循环遍历 DataSet 中所有 DataTables 中的所有 DataRows，并为每个 DataRow 创建一个 UserControl 实例并将每个实例添加到 FlowLayoutPanel。在 DataRows 中使用适当的列值来设置 UserControl Label 值：

```
foreach (DataTable dt in ds.Tables) {
    foreach (DataRow row in dt.Rows) {
        var uc = new YourUserControl { Username = row["usernameColumn"].ToString(), 
                                       Name = row["nameColumn"].ToString() };
        flowLayoutPanel1.Controls.Add(uc);
    }
} 
```

# git - 什么是单个 git 命令来解开自己？

> ID：12589813
> 
> 赞同：1
> 
> 时间：2012-09-25T19:30:39.623
> 
> 标签：git, github, dvcs

我想要一个执行此操作的 git 命令：无论我处于什么状态 - 我可能在我的更改列表中有本地未推送的提交、未暂存的提交或其他内容，或者我可能处于变基或合并的中间，或者我处于某些状态奇怪的状态，它这样做：

1.  删除所有未跟踪的文件，如果我处于 rebase/merge 的中间，则重置，核对所有未推送的提交，恢复我所有的本地更改等
2.  将我重置为该分支远程的 HEAD

每隔一段时间，我就会陷入一种我只想说“Ok git，请让我回到一个看起来与我对 repo 进行新克隆并执行 git checkout -b 的状态完全相同的状态”的情况分支我（或者如果我在变基中间）在“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:08:11.447

没有“1 答案”的解决方案，因为可能性的数量很大，对一种情况有利的对另一种情况不利。因此，正如@twalberg 所说，您应该学习各种命令以及做什么和为什么。

话虽如此....我通常使用以下内容：

`git reset --hard HEAD` # 删除我在本地所做的一切并返回使用我最初提取的分支版本（或自我上次提交以来）。其他开发人员也这样`git reset --hard origin/the_branch_name`做。

`git checkout -b new_branch`# 对新分支执行此操作，并且当您对分支进行了大量更改时，然后意识到您打算在新分支中执行此工作。另外，在进行合并和变基之前，我了解到从 new_branch 中执行 checkout -b new_new_branch_name 以进行变基和合并是很好的。这样，如果它搞砸了，您可以删除该分支并重新开始，而不会产生不良影响.

`git rebase -i HEAD~10`意味着交互式地重新设置过去的 10 次提交。这意味着对所做的历史提交进行更改（当前状态本身不会改变）。
这会打开一个编辑器，允许您在提交历史记录中压缩、重新排序或删除提交。这可能是一个非常有用的命令，用于整理不同提交中的许多不同更改，以便将其分组到更少的提交中。我们总是在代码审查之前尝试压缩（如果需要）。
注意事项：交互式 rebase 最适合用于尚未推送到远程的分支，尤其是在有其他协作者的情况下（如果不小心，您可能会弄乱他们的历史）。基本上，最好在您仍然在本地或已推送到远程但您知道没有其他人在该分支上工作时使用。

`git checkout path_to/and_file_at/myfile.rb` 这是将单个文件恢复到上次提交时的任何状态。基本上它会丢弃您的本地（未提交）更改。

`git clean`- 从当前目录开始递归删除不受版本控制的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T18:28:00.853

找到了我正在寻找的东西：[https ://github.com/mapmeld/gitjk](https://github.com/mapmeld/gitjk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:34:53.440

您想要`git reset`，请参阅[此页面](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)以获取有关您想要做什么的示例。

正如评论中所指出的，`git clean`将从树中删除未跟踪的文件，有关其工作原理的详细信息，请参阅[此页面](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)。

如果您真的只希望它是一个命令，您可以编写一个别名或其他东西来一起执行这两个命令。

# scala - 连接（投影）类型成员时，Scala 失去了对相关类型的跟踪

> ID：12589815
> 
> 赞同：0
> 
> 时间：2012-09-25T19:30:45.467
> 
> 标签：scala, types, abstract-type, type-projection, bounded-quantification

我正在[解决一个问题](https://stackoverflow.com/questions/12586748/type-mismatch-with-abstract-types-diverging)，我发现类型投影和抽象类型有一个新的奇怪问题。假设我有一个产生交易的系统，并且有一个我想桥接的对等系统。以下对我来说看起来不错：

```
trait Txn[S <: Sys[S]] {
  def peer: S#Peer#Tx
  def newID(): S#ID
  def newVar[A](id: S#ID, init: A): S#Var[A]
}
trait Sys[S <: Sys[S]] {
  type Tx <: Txn[S]
  type Peer <: Sys[Peer] // parallel system
  type Var[A]
  type ID
} 
```

我可以使用直接系统：

```
def directWorks[S <: Sys[S]](implicit tx: S#Tx): Unit = {
  val id = tx.newID()
  val v  = tx.newVar(id, 0)
} 
```

但不知何故，`peer`交易的方法存在缺陷，如下所示：

```
def indirectDoesnt[S <: Sys[S]](implicit tx: S#Tx): Unit = {
  val p   = tx.peer
  val id  = p.newID()
  val v   = p.newVar(id, 0) // what the **** - id is not compatible??
}

error: type mismatch;
 found   : id.type (with underlying type S#Peer#ID)
 required: _30129.Peer#ID where val _30129: S
          val v   = p.newVar(id, 0)
                             ^ 
```

我想变得聪明并解决它：

```
def clever[S <: Sys[S]](implicit tx: S#Tx): Unit = {
  def directWorks[S <: Sys[S]](implicit tx: S#Tx): Unit = {
    val id = tx.newID()
    val v  = tx.newVar(id, 0)
  }
  directWorks(tx.peer)
} 
```

...但这也失败了，提供了更多关于问题所在的线索：

```
error: inferred type arguments [S#Peer] do not conform to method
       directWorks's type parameter bounds [S <: Sys[S]]
          directWorks(tx.peer)
          ^ 
```

这一切都表明，要么`def peer: S#Peer#Tx`引入一个问题，要么（更有可能？）`type Peer <: Sys[Peer]`当不用作类型*参数*但类型*成员*时有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:17:32.457

现在这是一个*几乎可以接受*的解决方案。它基于“修复”中的表示类型的想法`Sys`；在一个具体的系统中`S`，我们总会有`S#S#Tx == S#Tx`等。我对这个解决方案的理解是，它将差异的责任从使用现场转移到了系统本身。

由于这涉及一些仪式，我仍然非常感谢有关删除或减少此仪式的其他答案；以及关于为什么这样做和省略调用`fix`不起作用的解释。

```
trait VarLike[ -Tx, A ] { def update( value: A )( implicit tx: Tx ) : Unit }

trait Sys[ S <: Sys[ S ]] {
   type Tx       <: Txn[ S ]
   type Var[ A ] <: VarLike[ S#Tx, A ]
   type ID
   type Peer     <: Sys[ Peer ]

   // 'pop' the representation type ?!
   def fix[ A ]( v: S#Peer#Var[ A ]) : Peer#Var[ A ]
   def peer( tx: S#Tx ) : Peer#Tx
}

trait Txn[ S <: Sys[ S ]] {
   def newID() : S#ID
   def newVar[ A ]( id: S#ID, init: A ) : S#Var[ A ]
   def system: S
} 
```

现在有两个示例系统。第一的：

```
class InMemTx( val system: InMem ) extends Txn[ InMem ] {
   def newID() {}
   def newVar[ A ]( id: InMem#ID, init: A ) : InMem#Var[ A ] =
      new VarLike[ InMemTx, A ] {
         def update( v: A )( implicit tx: InMemTx ) {}
      }
}
class InMem extends Sys[ InMem ] {
   type Tx       = InMemTx
   type Var[ A ] = VarLike[ Tx, A ]
   type ID       = Unit
   type Peer     = InMem  // reflect back to ourself

   def fix[ A ]( v: Var[ A ]) : Var[ A ] = v
   def peer( tx: Tx ) : Tx = tx
} 
```

第二：

```
class DurableTx( val system: Durable, val peer: InMem#Tx ) extends Txn[ Durable ] {
   def newID() = 33
   def newVar[ A ]( id: Durable#ID, init: A ) : Durable#Var[ A ] =
      new VarLike[ DurableTx, A ] {
        def update( v: A )( implicit tx: DurableTx ) {}
      }
}
class Durable extends Sys[ Durable ] {
   type Tx       = DurableTx
   type Var[ A ] = VarLike[ Tx, A ]
   type ID       = Int
   type Peer     = InMem

   def fix[ A ]( v: InMem#Var[ A ]) : InMem#Var[ A ] = v
   def peer( tx: Tx ) : InMem#Tx = tx.peer
} 
```

并在使用现场验证：

```
// let's make sure we can use the system as intended
trait TestTrait[ S <: Sys[ S ]] {
   def v : S#Peer#Var[ Int ]

   def test( implicit tx: S#Tx ) {
      val s          = tx.system
      implicit val p = s.peer( tx )
      val vf         = s.fix( v ) // not cool...
      vf()            = 1
   }
}

// see if we can actually create variables
class TestImpl[ S <: Sys[ S ]]( implicit tx: S#Tx ) extends TestTrait[ S ] {
   val v = {
      val s          = tx.system
      implicit val p = s.peer( tx )
      val id         = p.newID()
      p.newVar( id, 0 )
   }
} 
```

# c# - “文件已被另一个程序使用”写入错误

> ID：12589820
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:30:54.097
> 
> 标签：c#, .net

每当我尝试写入已打开的文件时，我都会收到此错误“文件已被另一个程序使用”，尽管我使用了“close（）”和“flush（）”命令，但它仍然给我错误，这里是我的代码：

```
private void Openbtn_Click(object sender, EventArgs e)
    {
        textBox1.Text = "";
        listView1.Items.Clear();
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open GSMB File";
        ofd.Filter = "GSMB Files (*.gsmb)|*.gsmb|All Files (*.*)|*.*";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.Unicode);
            BinaryReader brs = new BinaryReader(File.OpenRead(path), Encoding.Unicode);
            brs.BaseStream.Position = 0x4;
            menuItem9.Text = brs.ReadInt32().ToString();
            if (menuItem9.Text == "3620")
            {
                num_pointers = 204;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "54662")
            {
                num_pointers = 2372;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "9560")
            {
                num_pointers = 88;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "1126")
            {
                num_pointers = 130;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "342")
            {
                num_pointers = 16;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "6232")
            {
                num_pointers = 467;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "75698")
            {
                num_pointers = 498;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "9914")
            {
                num_pointers = 110;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "128")
            {
                num_pointers = 4;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "5394")
            {
                num_pointers = 156;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "12000")
            {
                num_pointers = 580;
                menuItem8.Text = num_pointers.ToString();
            }
            else 
            {
                MessageBox.Show("This is not a Pokémon Typing Adventure string file !", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }
            List<int> offsets = new List<int>();
            int startstr = 0x1C;
            br.BaseStream.Position = startstr;
            int startstrval = br.ReadInt32();
            for (int i = 4; i < (num_pointers * 4 + 1); i += 4)
            {
                br.BaseStream.Position = startstr + i;
                offsets.Add(br.ReadInt32() + startstrval);
            }
            Dictionary<int, string> values = new Dictionary<int, string>();
            for (int i = 0; i < offsets.Count; i++)
            {
                int currentOffset = offsets[i];

                int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                int stringLength = (nextOffset - currentOffset - 1) / 2;

                br.BaseStream.Position = currentOffset;

                var chars = br.ReadChars(stringLength);
                values.Add(currentOffset, new String(chars));
            }
            foreach (int offset in offsets)
            {
                listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
             listView1.Items[offset].SubItems[1].Text.Replace(System.Environment.NewLine, "\n");
            }

            br.Close();
            br = null;
        }
        ofd.Dispose();
        ofd = null;
    }
private void menuItem10_Click(object sender, EventArgs e)
    {
        BinaryWriter bw = new BinaryWriter(File.OpenWrite(path));

        bw.BaseStream.Position = 0x20;
        int number_pointers = Convert.ToInt32(num_pointers);
        Encoding enc = Encoding.Unicode;

        bw.Write(number_pointers);

        int curr_pointer = 4 + number_pointers * 4;
        for (int i = 0; i < number_pointers; i++)
        {
            bw.Write(curr_pointer);
            curr_pointer += enc.GetByteCount(listView1.Items[i].SubItems[1].Text) + 2;
        }

        for (int i = 0; i < number_pointers; i++)
            bw.Write(enc.GetBytes(listView1.Items[i].SubItems[1].Text + '\0'));

        bw.Flush();
        bw.Close();
        bw = null;
    } 
```

谢谢你，我对任何干扰表示歉意。PS：请不要发布无用的评论和答案，例如“在 google 中搜索”、“我们已经回答了这些类型的问题”等……我花了 5 个小时在 google 中寻找答案，除了使用 ofd 什么都没有出现.close()，我也在stackoverflow网站上搜索了类似的问题，同样的答案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:42:52.510

如果可能，应在`using`- 语句中使用所有一次性物品

[http://msdn.microsoft.com/en-US/library/yh598w02(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/yh598w02(v=vs.80).aspx)

如果您将所有一次性对象（BinaryReader、FileStream 等）放入这样的语句中，它会起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:49:42.377

可能的罪魁祸首是你自己的程序！

正如 user287107 所说，如果您处理文件的句柄，您应该能够再次打开它以便稍后写入。

Also, sircapsalot has a good suggestion: make sure that everything is disposed of properly by using try {} finally {}.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:39:44.510

由于您在此函数内部没有异常处理，因此如果发生异常，它将不会继续，因此永远不要执行该`br.Close();`函数。

您应该使用`try { } finally { }`以确保它已关闭。

```
private void Openbtn_Click(object sender, EventArgs e)
{
    textBox1.Text = "";
    listView1.Items.Clear();
    OpenFileDialog ofd = new OpenFileDialog();
    ofd.Title = "Open GSMB File";
    ofd.Filter = "GSMB Files (*.gsmb)|*.gsmb|All Files (*.*)|*.*";
    if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        try {
            MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.Unicode);
            BinaryReader brs = new BinaryReader(File.OpenRead(path), Encoding.Unicode);
            brs.BaseStream.Position = 0x4;
            menuItem9.Text = brs.ReadInt32().ToString();
            if (menuItem9.Text == "3620")
            {
                num_pointers = 204;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "54662")
            {
                num_pointers = 2372;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "9560")
            {
                num_pointers = 88;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "1126")
            {
                num_pointers = 130;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "342")
            {
                num_pointers = 16;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "6232")
            {
                num_pointers = 467;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "75698")
            {
                num_pointers = 498;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "9914")
            {
                num_pointers = 110;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "128")
            {
                num_pointers = 4;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "5394")
            {
                num_pointers = 156;
                menuItem8.Text = num_pointers.ToString();
            }
            else if (menuItem9.Text == "12000")
            {
                num_pointers = 580;
                menuItem8.Text = num_pointers.ToString();
            }
            else 
            {
                MessageBox.Show("This is not a Pokémon Typing Adventure string file !", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }
            List<int> offsets = new List<int>();
            int startstr = 0x1C;
            br.BaseStream.Position = startstr;
            int startstrval = br.ReadInt32();
            for (int i = 4; i < (num_pointers * 4 + 1); i += 4)
            {
                br.BaseStream.Position = startstr + i;
                offsets.Add(br.ReadInt32() + startstrval);
            }
            Dictionary<int, string> values = new Dictionary<int, string>();
            for (int i = 0; i < offsets.Count; i++)
            {
                int currentOffset = offsets[i];

                int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                int stringLength = (nextOffset - currentOffset - 1) / 2;

                br.BaseStream.Position = currentOffset;

                var chars = br.ReadChars(stringLength);
                values.Add(currentOffset, new String(chars));
            }
            foreach (int offset in offsets)
            {
                listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
             listView1.Items[offset].SubItems[1].Text.Replace(System.Environment.NewLine, "\n");
            }               
        }
        finally {
            br.Close();
            br = null;
        }
    }
    ofd.Dispose();
    ofd = null;
}
private void menuItem10_Click(object sender, EventArgs e)
    {
    BinaryWriter bw;
    try {
        bw = new BinaryWriter(File.OpenWrite(path));

        bw.BaseStream.Position = 0x20;
        int number_pointers = Convert.ToInt32(num_pointers);
        Encoding enc = Encoding.Unicode;

        bw.Write(number_pointers);

        int curr_pointer = 4 + number_pointers * 4;
        for (int i = 0; i < number_pointers; i++)
        {
            bw.Write(curr_pointer);
            curr_pointer += enc.GetByteCount(listView1.Items[i].SubItems[1].Text) + 2;
        }

        for (int i = 0; i < number_pointers; i++)
            bw.Write(enc.GetBytes(listView1.Items[i].SubItems[1].Text + '\0'));
    }
    finally {
        bw.Flush();
        bw.Close();
        bw = null;
    }
} 
```

我也不确定您是否应该在逻辑的开头显示一个显示“文件已成功打开”的消息框。

# c++ - 扫描线多边形填充算法

> ID：12589822
> 
> 赞同：2
> 
> 时间：2012-09-25T19:30:59.797
> 
> 标签：c++, iterator, polygon, edge-list, scanline

我正在实现基于扫描线的多边形填充算法。我知道一般算法，我现在正在尝试用 C++ 实现它。

我需要将边缘表实现为活动边缘列表。

我已将活动边缘列表设为矢量，以便于动态插入和删除。

然而，边缘表有点混乱。

我正在尝试使用向量数组来实现边缘表，并且向量将包含我制作的结构。

这是结构。

```
struct Bucket
{
    // Fields of a bucket list
    int ymax, x, dx, dy, sum;
}; 
```

我有一个 for 循环，它遍历传入的顶点数组，然后它创建一个桶并将桶插入边缘表中 ymin 索引处的边。

我的问题是我很难遍历边缘表并访问各个存储桶。

这是桶向量数组的声明：

```
// This array is the edge table which has a max index of 300
    // The window for the program is never more than 300 by 300
    vector<Bucket> et[300]; 
```

这是我的 for 循环，它在试图打印出项目的边缘表上进行迭代。我尝试对索引使用迭代器和普通 int，但在尝试打印每个存储桶的值时都不起作用。

```
// Debugging the edge table, prints out all buckets
    vector<Bucket>::iterator it;
    for(int j = 0; j < 300; j++)
    {
            for(it = et[j].begin(); it < et[j].end(); it++)
            {
//                printf(*it);
//                printf();
            }
            for(int q = 0; q < et[j].size(); q++)
            {
                printf("ymax = %d", q[0]);
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:51:39.507

感谢迈克尔的帮助和帮助，我能够打印出这些值。现在，当我准备好遍历边缘表并填充多边形时，这也将帮助我访问这些值。

在向量中打印结构值的正确方法是使用这个 for 循环：

```
vector<Bucket>::iterator it;
    for(int j = 0; j < 300; j++)
    {
        for(int q = 0; q < et[j].size(); q++)
        {
            printf("ymax = %d, x = %d, dx = %d, dy = %d, sum = %d,\n", et[j][q].ymax, et[j][q].x, et[j][q].dx, et[j][q].dy, et[j][q].sum);
        }
    } 
```

我希望这可以帮助那些对 c++ 也很生疏的人。

# matlab - matlab中fastaread函数的替代方法

> ID：12589823
> 
> 赞同：0
> 
> 时间：2012-09-25T19:31:04.470
> 
> 标签：matlab, bioinformatics

我正在尝试运行使用该函数的matlab代码，该函数[`fastaread`](http://www.mathworks.com/help/bioinfo/ref/fastaread.html)在我缺少的生物信息学工具箱中可用。我想知道我是否可以制作自己的函数来从`.fasta`文件函数中读取数据以运行此代码。

对于这种不具体的幼稚问题，我感到很抱歉。但任何帮助将不胜感激。先感谢您。

* * *

谢谢您的答复。我将 readfasta.m 从 mbetoolbox 重命名为 fastaread.m。但是我收到以下错误：

```
??? Error: File: /home/users/fastaread.m Line: 85 Column: 1
Expression or statement is incorrect--possibly unbalanced (, {, or [.

Error in ==> calculate_cons>read_alignment_fasta at 111
full_alignment = fastaread(msa_fasta_filename);

Error in ==> calculate_cons>read_alignment at 67
[encoded_focus_alignment, focus_index_of_interest, focus_to_uniprot_offset_map]
= read_alignment_fasta(msa_fasta_filename, seqid_of_interest);

Error in ==> calculate_cons at 41
[Pij_true, Pi_true, alignment_width, q, encoded_seq_of_interest,
focus_to_uniprot_offset_map] = read_alignment(msa_fasta_filename,
seqid_of_interest, theta); 
```

我会很感激你的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:40:49.473

只需`readfasta`使用[`mbetoolbox`](http://bioinformatics.org/mbetoolbox/).

# java - 获取摆动组件的位置

> ID：12589824
> 
> 赞同：8
> 
> 时间：2012-09-25T19:31:19.850
> 
> 标签：java, swing, jpanel, layout-manager

我已将一些 JPanel 放入另一个 JPanel，其布局为 Box Layout 和 Y 轴。放置完所有面板后，我需要从 JPanel 容器面板中获取每个添加的 JPanel 的 Y 位置。但是，当我尝试得到它时，每个 JPanel 的 Y 位置总是为零。请告诉我如何从 JPanel 容器 JPanel 中获取每个 Jpanel 的 Y 位置。

这就是我所做的，

```
JPanel panelHolder = new JPanel(new BoxLayout(this, BoxLayout.Y_AXIS));
for(int i = 0; i< 10; i++){
   JPanel p = new JPanel(); 
   panelHolder.add(p);
}

int componentCount = panelHolder.getComponentCount();

for (int j = 0; i < componentCount ; j++) {

  Component c = pnlRowHolder.getComponent(i);
  JPanel p = (JPanel)c;
  System.out.println(p.getY());//I get zero for all
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:13:03.830

坐标是相对于它们的父级的。在您的示例中，所有子组件都被添加到父容器的顶部，使 y 位置为 0（相对于它们的父容器）。

尝试向父容器添加一个空边框，您应该会看到 y 位置发生变化。

您可以使用[`SwingUtilities.convertPoint`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#convertPoint%28java.awt.Component,%20int,%20int,%20java.awt.Component%29)来在坐标系之间进行转换

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T20:30:45.533

在获得位置之前打包框架。似乎一切都从原点（0,0）开始相互重叠，直到你打包。

这是一个工作代码：

```
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestBoxLayout {

    public static void main(String[] args) {
        JFrame frame = new JFrame();

        JPanel panelHolder = new JPanel();
        panelHolder.setLayout(new BoxLayout(panelHolder, BoxLayout.Y_AXIS));

        for (int i = 0; i < 10; i++) {
            JPanel p = new JPanel();
            p.setPreferredSize(new Dimension(100, 13)); //I set the height just to make sure.
            panelHolder.add(p);
        }
        frame.add(panelHolder);

        /**
         * Pack before you get the position.
         */
        frame.pack();

        int componentCount = panelHolder.getComponentCount();
        for (int j = 0; j < componentCount; j++) {
            Component c = panelHolder.getComponent(j);
            JPanel p = (JPanel) c;
            System.out.println(p.getY());//I get 0, 13, 26, 39, .....
        }

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

结果：

```
0
13
26
39
52
65
78
91
104
117 
```

**注意**：BoxLayout 的签名是`BoxLayout(Container target, int axis)`. 这`target`是您将布局设置为的内容。出于这个原因，如果你想使用 BoxLayout，你应该总是先创建面板。然后使用`component.setLayout()`，使目标已经存在。您的`this`JPanel 构造函数中的 是指其他东西，而不是`panelHolder`. 我猜你创建这个函数的类也是它的子类，`Container`这就是你没有得到错误的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T20:06:06.583

将您添加`JPanel`到`JFrame`s *contentPane*从而允许您使用 X 和 Y 坐标`getX()`，`get()`尽管我建议首先添加所有组件，因为随着更多组件的添加，点可能会发生变化，然后如垃圾神所说，只需调用`pack()`框架实例.

我做了一个简短的示例来演示：

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        initComponents(frame);

        frame.pack();//call pack 

        printPanelCompPoints(mainPanel);//produces correct coords

        frame.setVisible(true);
    }

    private JPanel mainPanel;

    private void initComponents(JFrame frame) {
        mainPanel = new JPanel(new BorderLayout());
        JPanel centerPanel = new JPanel();
        JPanel northPanel = new JPanel();
        JPanel southPanel = new JPanel();
        JPanel westPanel = new JPanel();
        JPanel eastPanel = new JPanel();

        centerPanel.add(new JLabel("CENTER"));
        northPanel.add(new JLabel("NORTH"));
        eastPanel.add(new JLabel("EAST"));
        southPanel.add(new JLabel("SOUTH"));
        westPanel.add(new JLabel("WEST"));

        mainPanel.add(centerPanel, BorderLayout.CENTER);
        mainPanel.add(northPanel, BorderLayout.NORTH);
        mainPanel.add(southPanel, BorderLayout.SOUTH);
        mainPanel.add(eastPanel, BorderLayout.EAST);
        mainPanel.add(westPanel, BorderLayout.WEST);

       frame.getContentPane().add(mainPanel);

       printPanelCompPoints(mainPanel);//produces all 0's
    }

    private void printPanelCompPoints(JPanel mainPanel) {
        for (int i = 0; i < mainPanel.getComponentCount(); i++) {
            System.out.println(mainPanel.getComponent(i).getX() + ", " + mainPanel.getComponent(i).getY());
        }
    }
} 
```

如您所见，调用`printPanelCompPoints(mainPanel);`产生`initComponents(JFrame frame)`所有 0，（因为它们已添加到框架中但尚未调用 `pack()）。

> 0, 0
> 
> 0, 0
> 
> 0, 0
> 
> 0, 0
> 
> 0, 0

但是在调用`createAndShowUI()`s实例之后调用 会产生正确的 co-odrinates：`pack()``JFrame``printPanelCompPoints(mainPanel);`

> 44, 26
> 
> 0, 0
> 
> 0, 52
> 
> 99, 26
> 
> 0, 26

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-02T15:15:23.120

假设您的 Jpanel 父亲包含一个 JPanel 儿子。如果 cx 是儿子相对于父亲的坐标 x，cy 是儿子相对于父亲的坐标 y，则：

cx = son.getLocationOnScreen().getX()-father.getLocationOnScreen().getX()

cy = son.getLocationOnScreen().getY()-father.getLocationOnScreen().getY()

我认为是最简单的方法...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T20:42:49.373

> 请告诉我如何从 JPanel 容器 JPanel 中获取每个 Jpanel 的 Y 位置。

*   `BoxLayout`接受`XxxSize`（`Preferred`在这种情况下）返回它的孩子，

*   `JPanel`返回 (0, 0) 这是正确的值

*   您可以从 all 中获得 this 或 simlair 结果`LayoutManager`，例如 built_in `FlowLayout`for `JPanel`（仅接受`PreferredSiz`e），返回相同的坐标`(0, 0)`

*   除了`BorderLayout`那里生成`10pixels`（用于 W、E、N、S 区域），并且仅在`CENTER area`用于某些情况下有效`JComponent`

*   `JPanel`is `Container`and by empty `JPanel`by defualt 在屏幕上返回零大小，

*   `JPanel`可以返回正确的坐标（如果有的话）或者你在构造函数中`JComponent`重写`XxxSize``JPanel`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-22T14:49:36.210

问题通常是布局或绘图仅在整个方法返回后完成。在这种情况下，`getX`返回`getY`0。

`pack()`调用框架窗口或`doLayout()`您`validate()`正在处理的 JPanel可能会有所帮助。但往往无济于事，因为你对内部调度影响不大： [http ://www.oracle.com/technetwork/java/painting-140037.html](http://www.oracle.com/technetwork/java/painting-140037.html)

在这种情况下，对我有帮助的是将需要 X 和 Y 位置的部分放入工作线程中：

```
JPanel panelHolder = new JPanel(new BoxLayout(this, BoxLayout.Y_AXIS));
for(int i = 0; i< 10; i++){
    JPanel p = new JPanel(); 
    panelHolder.add(p);
}

int componentCount = panelHolder.getComponentCount();

SwingUtilities.invokeLater(new Runnable() {         
    @Override
    public void run() {
        for (int j = 0; i < componentCount; j++) {    
            Component c = pnlRowHolder.getComponent(i);
            JPanel p = (JPanel) c;
            System.out.println(p.getY());
        }
    }
}); 
```

这种方式获取 X 和 Y 将被推迟，直到布局完成。

# asp.net - 面向普通 Windows 用户的 ASP.NET 部署

> ID：12589828
> 
> 赞同：1
> 
> 时间：2012-09-25T19:31:36.373
> 
> 标签：asp.net, iis

我想在 ASP.NET 中制作一个 Windows 应用程序。

我的问题是：

它运行的 Windows 要求是什么？

IIS 是否安装在 Vista 及更高版本的所有 Windows 版本上？

如果一个新手用户想要安装我的 ASP.NET 应用程序，他需要做什么？

有没有办法自动化这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:37:25.280

您需要安装以下内容：

*   .NET 运行时，可能是 .net 4.0。
*   您不需要 IIS 来开发，但您需要它来托管您的应用程序
    *   对于开发，您可以使用 IIS Express 或 Visual Studio 中的内置 Web 服务器
*   您从 Windows 功能安装 IIS
*   对于自动化过程，有几个选项取决于您想要的高级程度。查看[octopusdeploy](http://www.octopusdeploy.com)以获取发布管理器，但您仍需要将项目打包为适合于 Octopus 部署的工件。另外，查看[网络部署](http://www.iis.net/downloads/microsoft/web-deploy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:37:56.710

A 如果要安装，可以使用

1 个安装程序窗口

2 单击一次

3 或 XCopy

链接：http: [//msdn.microsoft.com/en-us/library/k3bb4tfd%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/k3bb4tfd%28v=vs.80%29.aspx)

B 如果你想自动化部署，你可以使用`Team Foundation Server`并定义 BuildDefinition

注意：您需要 Visual Studio 来开发您的应用程序

# visual-studio-2010 - 使用 TeamCity 构建 MVC 4 应用程序时未找到 System.Web.Optimization

> ID：12589829
> 
> 赞同：1
> 
> 时间：2012-09-25T19:31:36.937
> 
> 标签：visual-studio-2010, asp.net-mvc-4

我正在使用 System.Web.Optimization nuget 包在 VS2010、MVC4 中进行开发。我的项目在本地构建时没有错误，但是当我尝试在 Team City 代理（这是一台 Window XP 机器）上构建它时，我收到一个构建错误，指出找不到 System.Web.Optimization。

我已经在代理机器上安装了 MVC4。我应该如何在 MVC4 中正确部署这个包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:51:43.400

您需要的是 NuGet 在构建时获取缺少的包。

[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T11:32:48.297

在搜索相同的问题时，我偶然发现了这一点。从 2.7 版开始，NuGet 将在构建时自动恢复包。对于我的解决方案，这是我所做的：

1) 在源代码管理资源管理器中删除 \packages 文件夹。签入更改。

2）排队一个新的（TFS）构建。

3）当它开始时，它会比平时花费更长的时间，因为它会下载项目的包。

现在将在构建服务器上解析引用，并且解决方案将构建得很好。

# python - Python bdist 和分发包以在没有 PyPi 的情况下安装

> ID：12589834
> 
> 赞同：4
> 
> 时间：2012-09-25T19:31:49.140
> 
> 标签：python, virtualenv, pip

我正在开发一个本身并不复杂的系统：只是一个带有一组包的 virtualenv，每个包都有自己的依赖项。总而言之（带有依赖项），大约需要安装 30 个包。

以下约束使设置有些复杂：

*   不保证可以访问互联网。事实上，我们假设 PyPI 在安装时不可用。（一个非网络的 debian 稳定存储库**可用**，它允许 virtualenv 和 company）
*   一些包/依赖项具有对应用程序性能至关重要的 C 扩展。
*   最好提前编译好C扩展，避免安装GCC和公司。

在这些限制条件下，打包（然后安装）python 模块依赖项的最快、最简单甚至（最好）“正确”方式是什么？我是否只是获取每个包的源并自己 bdist ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-30T17:15:35.613

这个问题有点老了，但无论如何，从[pip](http://pip.readthedocs.org/en/latest/reference/pip_wheel.html) 1.4 版（2013-07-23）开始，wheel 已经被支持为二进制分发格式，具有更丰富的接口和更好的支持。对于那些找到这个线程的人，考虑使用[轮子](http://wheel.readthedocs.org/en/latest/)而不是鸡蛋。

示例用法（来自 wheel 文档）：

> 为您的需求及其所有依赖项构建轮子到本地目录：
> 
> ```
> pip install wheel
> pip wheel --wheel-dir=/local/wheels -r requirements.txt 
> ```
> 
> 然后仅使用您的本地车轮目录（而不是来自 PyPI）安装这些要求：
> 
> ```
> pip install --no-index --find-links=/local/wheels -r requirements.txt 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:43:45.743

pip`--find-links`选项支持本地目录。只需将所有 sdist 和 egg 发行版放入一个目录，pip 就会在那里找到它们。

二进制发行版，我将其构建为鸡蛋（带有[`setup.py bdist_egg`](https://pythonhosted.org/setuptools/setuptools.html#bdist-egg-create-a-python-egg-for-the-project)），以便于安装而无需编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:55:22.653

我现在确定的方法是[这样](http://peak.telecommunity.com/DevCenter/EasyInstall#packaging-others-projects-as-eggs)的：

```
# To gather together all of the dependencies (ex: pymongo, ujson):
easy_install -zmaxd /my/packaging/directory pymongo>=2.3 ujson

# Secondarily, package my custom module
/mymodule/setup.py sdist
cp /mymodule/dist/mymodule.tar /my/packaging/directory/ 
```

后来由于世界上大部分版本的pip都不支持eggs，所以也使用easy_install安装。（最近版本的 pip 可以，我理解，但不是每个人都是最新的）：

```
easy_install -H None -f file:///installed/packaging/directory mymodule 
```

mymodule 的依赖项仍在查看这是否有效，但它似乎接近“正确”的做事方式。

感谢 Martijn 将我指向鸡蛋。

# java - 将 Shiro 的 PasswordMatcher 与自定义领域一起使用

> ID：12589837
> 
> 赞同：3
> 
> 时间：2012-09-25T19:32:03.017
> 
> 标签：java, authentication, shiro

我正在使用带有自定义 JDBC 领域的 Apache Shiro 从数据库中检索用户的盐、密码、哈希算法名称和哈希迭代次数，这些都存储为单独的列。

问题是我不确定在使用 PasswordMatcher 验证用户的密码是否与存储在数据库中的密码匹配时，我应该如何处理从数据库中检索到的 salt。

使用 HashedCredentialsMatcher 时，盐是使用该`setCredentialsSalt`方法设置的，但是在使用 PasswordMatcher 而不是 HashedCredentialsMatcher 时，情况似乎并非如此。

我在自定义 JDBC 领域中使用的代码如下

```
@Override 
protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException { 

        //code to retrieve user details from database removed for brevity 

        SimpleAuthenticationInfo info = new SimpleAuthenticationInfo(username, passwdSalt.password, getName()); 
        info.setCredentialsSalt(new SimpleByteSource(passwdSalt.salt)); 

        DefaultPasswordService passwordService = new DefaultPasswordService(); 
        DefaultHashService hashService = new DefaultHashService(); 
        PasswordMatcher passwordMatcher = new PasswordMatcher(); 

        hashService.setHashAlgorithmName(passwdSalt.hashAlgorithmName); 
        hashService.setHashIterations(passwdSalt.hashIterations); 
        passwordService.setHashService(hashService); 
        passwordMatcher.setPasswordService(passwordService); 
        setCredentialsMatcher(passwordMatcher); 

        return info; 
} 
```

单步执行代码后，我确认问题肯定是由于在对用户输入的密码进行哈希处理时未使用盐，以便将其与数据库中的哈希密码进行匹配。在 DefaultPasswordService.java 中，当在第 160 行调用方法 passwordsMatch(ObjectmittedPlaintext, String saved) 时，命名的对象`request`包含以下内容

```
algorithmName=null 
iterations=0 
salt=null 
source=cGFzc3dvcmQ= 
```

第 161 行的下一行代码调用`computeHash(request)`

在 DefaultHashService.java 中，当`computeHash(HashRequest request)`调用该方法时，在第 155 行和第 157 行，变量 algorithmName 和 iterations 分别正确设置为`SHA-256`和`1`。在第 159 行，该方法`getPublicSalt(request)`被调用，但它返回 null。

有没有其他人使用 Shiro 的 PasswordMatcher 和自定义领域，如果你如何告诉 Shiro 使用盐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:39:20.703

我在 Shiro 邮件列表上发布了一条消息，并得到回复说 PasswordMatcher 默认不查看 AuthenticationInfo 中的任何内容，而不是 authenticationInfo.getCredentials()。

有关更多详细信息，可在[http://shiro-user.582556.n2.nabble.com/Migrating-from-HashedCredentialMatcher-to-PasswordMatcher-td7577808.html获得邮件列表上的存档消息](http://shiro-user.582556.n2.nabble.com/Migrating-from-HashedCredentialMatcher-to-PasswordMatcher-td7577808.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:45:55.917

我花了一段时间在我的一个项目中寻找这个网址 - [http://meri-stuff.blogspot.com/2011/04/apache-shiro-part-2-realms-database-and.html](http://meri-stuff.blogspot.com/2011/04/apache-shiro-part-2-realms-database-and.html)

文章链接到这个文件[JNDIAndSaltAwareJdbcRealm](https://github.com/SomMeri/SimpleShiroSecuredApplication/blob/authentication_stored_in_database/src/main/java/org/meri/simpleshirosecuredapplication/realm/JNDIAndSaltAwareJdbcRealm.java)

我已在我的项目中成功使用该类在密码哈希中使用盐。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T21:44:16.533

如果您将[Shiro 命令行](https://shiro.apache.org/command-line-hasher.html)哈希创建的凭据存储在[Shiro1CryptFormat](https://shiro.apache.org/static/1.2.5/apidocs/org/apache/shiro/crypto/hash/format/Shiro1CryptFormat.html)中，那么您可以`DefaultPasswordService`在您的领域中使用：

```
 final PasswordMatcher passwordMatcher = new PasswordMatcher();
        passwordMatcher.setPasswordService(new DefaultPasswordService());
        realm.setCredentialsMatcher(passwordMatcher); 
```

# google-maps - 是否可以在谷歌地图上选择多个标记

> ID：12589839
> 
> 赞同：0
> 
> 时间：2012-09-25T19:32:09.150
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

如果我在地图上有 100 个标记，而我只想用其中的 15 个标记做某事，有没有办法通过使用 CTRL + 单击标记或标准光标拖动选择来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:55:50.947

Ctrl+单击是可能的。将单击事件添加到标记，然后在事件处理程序中测试是否按下了 CTRL 键。如果是这样，请将标记添加到一个数组中，然后您可以稍后再做一些事情。

```
var markers = [];
google.maps.event.addListener(marker, 'click', function (event) {
  if (event.ctrlKey) {
    markers.push(marker);
    // some more code to change icon, add marker name to list, etc 
    //   so user knows marker has been selected
  }
}); 
```

[使用这种方法记录](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3134)了一些[问题](https://stackoverflow.com/questions/11118386/retrieving-javascripts-eventobject-when-using-google-maps-api-listener) ，但它每次都对我有用。只需确保在多个浏览器中进行测试。

有关拖动框到选择标记的实现，请参阅[此 Stack Overflow 问题。](https://stackoverflow.com/questions/7976196/box-rectangle-draw-selection-in-google-maps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:36:11.563

我过去这样做的方法是附加一个单击事件处理程序，该处理程序将标记的图片更改为选定的内容，然后将该标记添加到数组中。然后，一旦您选择了“15”个标记，您单击一个按钮（或开始一个事件）来处理您选择的标记。有趣的地方是您可以取消选择标记等。HTH 我知道它不满足 ctrl + 单击。

# jquery - 响应式网页设计中的同位素布局混乱

> ID：12589842
> 
> 赞同：1
> 
> 时间：2012-09-25T19:32:19.027
> 
> 标签：jquery, layout, jquery-isotope

我在[http://www.gablabelle.com](http://www.gablabelle.com)的响应式网页设计中使用同位素，并且布局在页面加载时很好，但在调整窗口大小时会变得混乱。查看我的脚本文件后，我无法弄清楚出了什么问题。

奇怪的是布局在某个时候就位。

请观看此视频： http: [//www.visualise.ca/files/videos/isotope02.mov](http://www.visualise.ca/files/videos/isotope02.mov)

还在[http://jsfiddle.net/CNb7r/添加了一个示例](http://jsfiddle.net/CNb7r/)

我试过两个不同的 jQuery 脚本

第 1)

```
 var $container = $("#stream");
    var $window = $(window);
    $container.imagesLoaded( function(){
        $container.isotope({
            animationEngine: "best-available",
            itemSelector : "article.post",
            masonry: {
            columnWidth: 300,
            gutterWidth: 30
            },
            onLayout: function(){
                forceLoad();
                setTimeout(function(){
                    html_height = $container.height();
                    $("#sidebar").height(html_height - 30);
                }, 500);
            }    
        });
    });
    $window.smartresize(function(){
        var windowSize = $window.width();
        var masonryOpts;
        // update sizing options 
        if (windowSize > 1199) {
            masonryOpts = {
                columnWidth: 300,
                gutterWidth: 30
            };
        } else if (windowSize < 1200 && windowSize > 979) {
            masonryOpts = {
                columnWidth: 240,
                gutterWidth: 20
            };
        } else if (windowSize < 768) {
            masonryOpts = {
                columnWidth: windowSize / 2,
                gutterWidth: 1
            };
        } else {
            masonryOpts = {
                columnWidth: 186,
                gutterWidth: 20
            };
        }
        $container.isotope({
            masonry: masonryOpts
        }).isotope('reLayout');
    }).smartresize(); 
```

和第二个）

```
$(window).smartresize(function(){       
        var $windowSize = $(window).width();
        if ($windowSize > 1199) {
            $container.imagesLoaded( function(){
                $container.isotope({
                    animationEngine: "best-available",
                    itemSelector : "article.post",
                    masonry: {
                        columnWidth: 300,
                        gutterWidth: 30
                    },
                    onLayout: function(){
                        setTimeout(function(){
                            html_height = $container.height();
                            $("#sidebar").height(html_height - 30);
                        }, 500);
                    }       
                });
            });
        } else if ($windowSize < 1200 && $windowSize > 979) {
            $container.imagesLoaded( function(){
                $container.isotope({
                    animationEngine: "best-available",
                    itemSelector : "article.post",
                    masonry: {
                        columnWidth: 240,
                        gutterWidth: 20
                    },
                    onLayout: function(){
                        setTimeout(function(){
                            html_height = $container.height();
                            $("#sidebar").height(html_height - 20);
                        }, 500);
                    }       
                });
            });
        } else if ($windowSize < 768) {
            $container.imagesLoaded( function(){
                $container.isotope({
                    animationEngine: "best-available",
                    itemSelector : "article.post",
                    resizable: false,
                    masonry: {
                        columnWidth: $windowSize / 2,
                        gutterWidth: 1
                    },
                    onLayout: function(){
                        setTimeout(function(){
                            html_height = $container.height();
                            $("#sidebar").height(html_height - 30);
                        }, 500);
                    }   
                });
            });
        } else {
            $container.imagesLoaded( function(){
                $container.isotope({
                    animationEngine: "best-available",
                    itemSelector : "article.post",
                    masonry: {
                        columnWidth: 186,
                        gutterWidth: 20
                    },
                    onLayout: function(){
                        setTimeout(function(){
                            html_height = $container.height();
                            $("#sidebar").height(html_height - 20);
                        }, 500);
                    }   
                });
            });
        };  
    }).smartresize(); 
```

如果您禁用 Javascript，您会看到响应式 CSS 是正确的（不会显示缩略图，只会显示占位符）。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:55:01.703

解决方案在这里：[https ://github.com/desandro/isotope/issues/271#issuecomment-8887060](https://github.com/desandro/isotope/issues/271#issuecomment-8887060)

# clojure - 函数局部、自引用、惰性斐波那契数列

> ID：12589843
> 
> 赞同：4
> 
> 时间：2012-09-25T19:32:26.090
> 
> 标签：clojure, fibonacci, local-variables

我想创建一个返回延迟扩展的无限斐波那契数序列的函数。

现在，我可以让我的序列在顶级命名空间中可用，如下所示：

```
(def fibonacci-numbers
  (lazy-cat [0 1] (map + fibonacci-numbers (rest fibonacci-numbers)))) 
```

然而，这意味着如果我开始大量使用它们，我就会失去对垃圾收集的控制。

我想做类似的事情：

```
(defn fibonacci-numbers-fn []
  (lazy-cat [0 1] (map + (fibonacci-numbers-fn) (rest (fibonacci-numbers-fn))))) 
```

这显然行不通，因为我最终会创建 O(2^n) 序列。我想我在问如何在函数本地命名空间中创建一个自引用的惰性序列。我应该怎么办？

编辑：虽然我喜欢 amalloy 发布的流行解决方案并在整个互联网上找到`defn fibs [] (map first (iterate (fn [[a b]] [b (+ a b)]) [0 1])))`，但我对类似于规范 Haskell 方式的版本感兴趣：

```
fibonaccis = 0 : 1 : zipWith (+) fibonaccis (tail fibonaccis) 
```

这就是我试图用我的原始功能来完成的。对我来说，map-iterate 解决方案读起来像“添加前两个元素以创建一个新元素”，而lazy-cat 解决方案读起来像“加入具有第一个滞后的流”。如何在没有顶级命名空间中的序列的情况下“加入具有第一个滞后的流”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:39:03.187

```
(take 10 (map first (iterate (fn [[a b]]
                               [b (+ a b)])
                             [0 1])))

;; (0 1 1 2 3 5 8 13 21 34) 
```

或者，如果您打算手动使用lazy-seq：

```
(letfn [(fibs
          ([]
             (fibs 0 1))
          ([a b]
             (lazy-seq
               (cons a (fibs b (+ a b))))))]
  (take 10 (fibs)))

;; (0 1 1 2 3 5 8 13 21 34) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T21:51:52.193

`fn`如果在 [] 之前放置一个可选名称，则由表单定义的函数可以是递归的。（在本例中，使用的名称是`this`）

```
user> (defn fibonacci-numbers []
        ((fn this [a b] (lazy-seq (cons a (this b (+ a b))))) 0 1))

user> (take 10 (fibonacci-numbers))
(0 1 1 2 3 5 8 13 21 34) 
```

产生序列的实际函数是匿名函数，每次调用它时只产生下一个元素。没有堆栈或堆溢出的机会（除非您将封闭函数的返回值保存在某处的 var 中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-30T22:04:27.707

我有一个非常相似的问题，最终选择了以下宏（这基本上是 amalloy 涉及承诺的答案的一些糖）：

```
(defmacro rec-seq [name expr]
   `(let [p# (promise)
           s# (lazy-seq (let [~name @p#] ~expr))]
       (deliver p# s#)
        s#)) 
```

然后，您可以编写：

```
(defn  fibonacci-numbers-fn []
   (rec-seq fibs (lazy-cat [0 1] (map +' fibs (rest fibs))))) 
```

这几乎就是你想要写的。

PS：rec-seq 是 recursive-seq 的缩写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-29T21:49:29.257

您可以使用 a`promise`来打结，手动执行 haskell 自动执行的操作：

```
(defn fibs []
  (let [fibs (promise)]
    @(doto fibs
       (deliver (list* 0 1 (lazy-seq (map +' @fibs (rest @fibs)))))))) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T20:49:50.153

也许`letfn`是您正在寻找的东西？

```
(def fibo-nums
  (letfn [(fibo-num-fn []
            (lazy-cat [0 1]
              (map + (fibo-num-fn) (rest (fibo-num-fn)))))]
    fibo-num-fn)) 
```

# dependencies - RPM 包需要旧版本的已安装依赖项。

> ID：12589848
> 
> 赞同：0
> 
> 时间：2012-09-25T19:33:00.743
> 
> 标签：dependencies, rpm

我安装了 zlib-1.2.3-27，但我要打包的软件需要 zlib-1.2.2。

我要打包的软件是预编译的二进制文件。是我自己从源代码构建的唯一选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:12:34.473

如果您非常需要该软件，请获取 zlib-1.2.2 的规范文件（或与您的目标相差不大的任何其他版本）并将包重命名为`zlib-legacy`，请注意库（即可能两个包都提供`libz.so`共享库）。您还需要为 rpm 规范文件再提供一行：`Provides: zlib = 1.2.2` Install the blob rpm via `rpm -ivh`. 注意：这未经测试。

快速肮脏（不创建适当的遗留包）和*不*推荐的*黑客*将链接`libz.so.1.2.2`到`libz.so`（版本为 1.2.3）。这可能会或可能不会工作，具体取决于 API 兼容性。通过`rpm -ivh --nodeps`.

# actionscript-3 - AS3 - 将 Flash 游戏上传到网站。嵌入？

> ID：12589852
> 
> 赞同：0
> 
> 时间：2012-09-25T19:33:21.100
> 
> 标签：actionscript-3, flash, upload, embed

我正在开发一个 Flash 游戏，并希望将其上传到一个站点。游戏有一堆文本文件（约 200 个）用于不同目的（地图、角色、任务等）读入。

文本文件可以嵌入到 FLA 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:00:01.463

在 FLA 中嵌入一些东西？谷歌说语法是 FlashDevelop 的，也就是说，

```
[Embed(source="relative/path/to/file.ext",mimeType="mime/type")]
const embeddedClass:Class; 
```

因此，对于文本文件，使用相对路径，mimeType 可以是“application/octet-stream”，生成的类是 ByteArray（但您仍将 const 声明为类型 Class）或“text/plain”（FlashDevelop 确实没有这个可用，所以没有经验，我希望如果这可行，结果将是 String 类型）。嵌入后，您可以通过简单的方式访问嵌入的数据

```
var yourData:YourType = new embeddedClass(); 
```

当然，“YourType”应该是兼容的，否则你会得到类型强制错误。对于 ByteArrays（和文本文件），请使用 String，因为有一种`ByteArray.toString()`方法可以将数据作为字符串检索，这似乎是您需要的。数据将立即可用。

[从这里。](http://thong-vu.blogspot.com/2011/03/embedding-resourcesimagesjpgpngswf-with.html)

# php - 用于最大化计时器内容的jQuery函数

> ID：12589853
> 
> 赞同：0
> 
> 时间：2012-09-25T19:33:21.100
> 
> 标签：php, jquery, gallery, slideshow, lightbox

我正在做一个项目，该项目将作为功能的图像和文本展示。

我的目标是在页面上以*网格*样式显示媒体*（即 10x5 磁贴）*，然后每 5 秒放大一个随机磁贴，显示 5 秒，然后使用灯箱样式效果最小化。

除此之外，我需要能够在夜幕降临时添加照片/媒体，并将其显示在页面上，而不会破坏展示媒体的顺序（可能通过使用 AJAX 刷新）。我通过使用检查服务器上目录内容的 PHP 脚本来获取图像，然后将其反馈回画廊（以前使用 Supersized）。

[记录在这里：http: [//forum.jquery.com/topic/tutorial-how-to-detect-images-automatically-with-supersized](http://forum.jquery.com/topic/tutorial-how-to-detect-images-automatically-with-supersized) ]

有谁知道我将如何在 jQuery 中编写这个，或者是否已经有一个插件可以为我做这个？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:33:22.607

我认为您应该做的是将任务分解为子任务，而不是试图将其作为一个整体来掌握：

1.  构建 html 以在网格中显示图像，使用静态图像作为数据源，以使其正确。
2.  构建 css 以对齐图像并确保一切都适合。
3.  构建一个数据库，其中将包含图像路径。
4.  更改 html 中的数据源，以使用目录中的图像。
5.  开始编写 javascript，一次一件事。
    1.  构建一个计时器，每 5 秒跳转到下一个图像，并使用 jquery.animate() 向上或向下设置动画
    2.  使用 jquery.ajax() 构建一个 ajax 脚本，将新图像加载到图像容器中

很有可能，如果你把它分解，并尝试做一些具体的事情，当你遇到困难时，你可以再次在这里问一些具体的事情，你将能够得到答案。试图一次做所有事情，会让你一事无成。

# ruby - RoR：我怎样才能只搜索某种类型的微博（数据库表）？

> ID：12589856
> 
> 赞同：1
> 
> 时间：2012-09-25T19:33:46.100
> 
> 标签：ruby, ruby-on-rails-3

现在我有一个名为 Microposts 的对象（我认为）。它是数据库中的一个表，其中有一个名为 kind 的列。这可以是“购买”或“销售”。在主页上，我列出了每个用户的微博列表，分为两个列表。一个只有销售微博，另一个只有购买微博。我试图在这些列表中的每一个顶部放置一个搜索栏，只能搜索这些列表。然后当用户搜索时，该列显示搜索结果。

问题是我找到的所有教程（例如[http://railscasts.com/episodes/37-simple-search-form?autoplay=true](http://railscasts.com/episodes/37-simple-search-form?autoplay=true)都通过了如何使用自己的控制器搜索对象（例如，如果我想通过微博搜索）。我怎样才能只搜索购买的微博。还是只搜索那些正在销售的？

编辑：澄清

这是我应该在 app/views/home.html.erb 中添加的内容

```
<% form_tag microposts_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

但我想要的是其中两个，一个搜索所有具有购买种类（种类是微帖子表中的一列）的微博，另一个搜索所有具有销售种类的微博。我不知道这个的正确语法。

另外，这是我的 microposts_controller.rb 的相关部分

```
 def home

    @microposts=Micropost.all

    @purchases=@microposts.collect{ |m| m if m.kind == "purchase"}.compact
    @sales=@microposts.collect{ |m| m if m.kind == "sale"}.compact

  end 
```

编辑2：

对于定义@microposts、@purchases 和@sales，你们都有很好的建议。我认为使用范围是要走的路。但是，我仍然看不到这如何回答这个特定问题。如何区分这两种搜索形式和搜索定义，以便一个搜索所有带有实物销售的微博，一个搜索所有带有实物购买的微博。我希望搜索完全不同。我可以以某种方式识别搜索表单吗？如何在模型中以不同方式定义销售搜索和购买搜索。我知道我应该有类似的东西

```
def self.search(search)
  if search
    find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
  else
    find(:all)
  end
end 
```

在 micropost.rb 中。我需要一种购买定义和一种销售定义吗？

再次编辑：

我试图在[RoR 更清楚地说明这个问题：如何只搜索具有特定属性的微博？](https://stackoverflow.com/questions/12611866/ror-how-can-i-search-only-microposts-with-a-certain-attribute)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:04:50.283

我将从模型开始

```
class Micropost < ActiveRecord::Base

  ...
  scope :purchases, where(:kind => 'purchase')
  scope :sales, where(:kind => 'sale')
  ... 
```

现在您可以根据需要使用`Micropost.purchases`和`Micropost.sales`添加更多`.where`搜索条件，例如

`@sales = Micropost.sales.where('name like ?',params[:name])`
`@purchases= Micropost.purchases.where('name like ?',params[:name])`

在您的视图中，您将有两个列表来显示@purchases 和@sales，例如：

```
<%-    @purchases.each do |one_purchase} %>
<%=      one_purchase.name %>
%br
<%-    end %>

<%-    @sales.each do |one_purchase} %>
<%=      one_purchase.name %>
%br
<%-    end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:16:47.593

如果你想搜索表格，我会推荐[DataTables](http://www.datatables.net/)，一个 jQuery 插件。它会让你做你想做的事。另外，它将进行动态过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:22:04.983

[您应该阅读ActiveRecord 查询界面](http://guides.rubyonrails.org/active_record_querying.html)上的本指南，但这里是您问题的答案：

```
@purchases = Micropost.where(['`microposts`.kind = ?', 'purchase'])
@sales = Micropost.where(['`microposts`.kind = ?', 'sale']) 
```

您还可以设置范围。

**关于搜索，我推荐[ThinkingSphinx](http://pat.github.com/ts/en/)作为一个简单、轻量级的解决方案：**

您可以像这样设置`micropost`范围和索引：

```
class Micropost < ActiveRecord::Base

  # ...

  scope :purchases, where(:kind => 'purchase')
  scope :sales, where(:kind => 'sale')

  # Here you can define which columns are searchable.

  define_index do
    indexes :name
  end

  # You can even search based on associations, but this is even more complicated
  # and outside the scope of this question. My point: It's very adapatable..

  # Using a sphinx_scope..
  sphinx_scope(:by_kind) { |kind| { :conditions => { :kind => kind } } }

end 
```

通过 ThinkingSphinx 使用 sphinx 引擎很简单。例如，在您的控制器中：

```
def search
  @microposts = Micropost.search(params[:query]).compact

  respond_to do |format|
    format.html
  end
end

# Or, using the sphinx_scope:
# Assumes params[:kind] contains either 'sale' or 'purchase'
def search_by_kind
  @microposts = Micropost.by_kind(params[:kind]).search(params[:query]).compact

  respond_to do |format|
    format.html
  end
end 
```

以你的形式..

```
<select id="select_kind" name="kind">
  <option value="purchase" selected="selected">Purchase</option>
  <option value="sale">Sale</option>
</select> 
```

..这将转化为`params[:kind]`..

# svn - 如何允许用户订阅对 Subversion 中特定文件的更改？

> ID：12589857
> 
> 赞同：1
> 
> 时间：2012-09-25T19:33:50.077
> 
> 标签：svn, redmine

我希望我小组中的开发人员能够订阅对 Subversion 存储库中特定文件的更改，并在进行更改时接收电子邮件。

我们正在使用 Redmine，但我没有看到存储库部分的任何“监视”功能。

关于如何实现这一点的任何想法？我不想每次有人想看新东西时都更改一些提交后挂钩文件。

# silverlight - 如何访问 ItemsControl 中的 UI 元素？

> ID：12589859
> 
> 赞同：0
> 
> 时间：2012-09-25T19:33:54.173
> 
> 标签：silverlight, itemscontrol

我已将 Silverlight 子类`ItemsControl`化为`SlideShow`控件。当我直接在 XAML 中对项目元素进行硬编码时，这可以正常工作。但是如果我使用 a `DataTemplate`，我如何访问每个项目的 UI 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:16:09.153

ItemsControl 可能会在项目来来去去时为它们创建新项目，因此您必须使用`ItemsControl.Items`来获取每个数据项，然后使用`ItemsControl.ItemContainerGenerator.ContainerFromItem`（或其他方法`ItemContainerGenerator`来查找由`DataTemplate`

请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:34:51.077

用 foreach 语句解析它？

例如：

foreach（ParentObject.Children 中的 ChildObject c）

# c++ - 在 cocos2d-x 中使用 pthread

> ID：12589860
> 
> 赞同：1
> 
> 时间：2012-09-25T19:34:00.113
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

今天我遇到了在 cocos2d-x 框架中更新对象的问题。我尝试在异步线程中下载一些文本，然后更新 CCTextFieldTTF 中的文本，然后该文本字段消失。

```
void HelloWorld::callbackFunc(void *Layer, std::vector<promowall::CItem> Items) {
    cocos2d::CCLayer *layer = static_cast<cocos2d::CCLayer *>(Layer);
    cocos2d::CCLabelTTF *label = dynamic_cast<cocos2d::CCLabelTTF *>(layer->getChildByTag(10));
    label->setString("test");    
} 
```

如果有人能帮助我并解释我如何使用 openGl 和 pthreads，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:28:11.447

如果你的 callbackFunc 是从这个异步线程调用的，它可能会导致可能导致这种行为的竞争条件（cocos 缓存所有呈现的字体标签，并且 CCTextureManager 不是线程安全的）。

另外（我认为您可以在 Apple 的 OpenGL 编程指南中找到以下信息） - 从不同线程调用所有 OpenGL 方法是不安全的。如果你在不同的线程中创建这个字符串“test”，cocos 实际上最终会创建一个新的 OpenGL 纹理（这可能不合适，因为在不同的线程中创建）。我认为您可以通过在其他地方（在主线程上）创建具有相同“测试”文本的不同标签来检查该理论-如果在您的代码片段中创建的标签不再消失-这意味着该理论是正确的:)

如何解决？

我相信您必须在主 UI 线程中创建标签（或在其上设置文本） - 例如，记住队列中异步回调的结果，并在某处的更新方法中定期检查它。并记住正确的锁定。

# php - 在 MySQL 中，是否可以将查询的结果独立于子查询的结果？

> ID：12589861
> 
> 赞同：1
> 
> 时间：2012-09-25T19:34:00.083
> 
> 标签：php, mysql, database

我需要向用户输出搜索结果列表。

但是，我选择显示哪些结果取决于另一个查询的结果。

所以：

```
Query 1,
Query 2,

while($row=mysql_fetch_array($result)
    {
    (IF (Query 2 is xyz)
       {
        Output $row[1]
       }
    } 
```

因此，只有通过特定查询 2 参数的 query1 结果才会被打印。

最终，我的问题是，我可以通过将结果放入不同的变量来同时保留 2 个单独的查询吗？即$result1 和$result2？或者做一个新的查询会覆盖最后一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:47:06.203

你可以这样做：

```
$result1 = mysql_query('...');
$result2 = mysql_query('...'); 
```

然后您可以访问它们。例如

```
while($row = mysql_fetch_array($result1/$result2)){ ... } 
```

每个变量将存储一个结果对象。再次调用 mysql_query 不会覆盖它，因为玩具已将其分配给变量。只要您不覆盖该变量，您就可以访问该特定查询结果对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:43:24.840

如果我理解正确你的问题...

```
$query = mysql_query("SELECT * FROM `Query 1`");

while ($row=mysql_fetch_array($query)) {

$rows = $row['this'];

 if (mysql_numrows(mysql_query("SELECT * FROM `Query 2` WHERE `something` = '$rows' ")) != 0) {
echo $rows;
}

} 
```

# chm - 是否可以在 CHM（已编译的 HTML 帮助）文件中启用视觉样式？

> ID：12589865
> 
> 赞同：2
> 
> 时间：2012-09-25T19:34:18.337
> 
> 标签：chm, html-help

当我们的编译 HTML 帮助 (.chm) 文件（使用 Author-It 创建）打开时，它看起来“过时”，因为 HTML 帮助应用程序（即使在 Windows 7 上）似乎没有启用“视觉样式”。打开 .chm 文件时，有没有办法启用视觉样式（通用控件 6）？

[HTML 帮助截图 http://www.arachnetech.com/temp/HTMLHelp.png](http://www.arachnetech.com/temp/HTMLHelp.png)

这是 Windows 7，但请注意对话框中的旧式目录/索引/搜索选项卡和（虽然不太重要）Windows 2000 式按钮。

如果这是编译的 HTML 帮助的限制，我们可以使用更新更好的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:02:17.590

不容易。如果它不自动，它不会自动检测 XP+ 主题支持，因此不会对以后的主题做出反应。

将 hh.exe.manifest 文件放在它旁边可能是可能的。（在 windows 目录中，在 hh.exe 文件旁边），但可能 hh.exe 只是主 hhctrl.ocx 的运行程序，我不知道 activeX 小程序是否会继承清单。

我也不知道这种 XP 清单是否也可以在外部文件中（如 UAC 清单），和/或是否需要特殊安装。

我挖掘了我的链接，找到了如何为旧的 Delphi 创建此类清单的参考：

[http://delphi.about.com/library/bluc/text/uc111601a.​​htm](http://delphi.about.com/library/bluc/text/uc111601a.htm)

它还警告了一些危险

* * *

**更新** 我突然记得CHM中确实也有windows风格的标志。

[请参阅http://chmspec.nongnu.org/latest/INI.html#HHP](http://chmspec.nongnu.org/latest/INI.html#HHP)中的表 5.51，然后特别是字段 14 和 15

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:58:30.287

一个答案（不是我要找的那个）是使用第 3 方 CHM 查看器。谷歌发现的例子（我没有亲自尝试过）是：

*   [http://www.ultrachm.com/](http://www.ultrachm.com/)
*   [http://www.extrachm.com/](http://www.extrachm.com/)

# iphone - 在 iOS 5 应用程序中对 iOS 6 功能的条件支持

> ID：12589866
> 
> 赞同：7
> 
> 时间：2012-09-25T19:34:20.067
> 
> 标签：iphone, objective-c, ios, xcode, iphone-5

`Minimal Deployment Target`如何在设置为 iOS 5.0的应用程序中支持 iOS6 的功能？

例如，如果用户有 iOS 5，他会看到一个`UIActionSheet`，如果用户有 iOS 6，他会看到不同`UIActionSheet`的 iOS 6？你怎么做到这一点？我有 Xcode 4.5 并且想要在 iOS 5 上运行的应用程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-25T19:47:46.573

您应该始终更喜欢检测可用的方法/功能，而不是 iOS 版本，然后假设方法可用。

请参阅[Apple 文档](http://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)。

例如，在 iOS 5 中要显示一个模态视图控制器，我们会这样做：

```
[self presentModalViewController:viewController animated:YES]; 
```

在 iOS 6 中，`presentModalViewController:animated:`方法`UIViewController`是 Deprecated，你应该`presentViewController:animated:completion:`在 iOS 6 中使用，但是你怎么知道什么时候使用呢？

您可以检测 iOS 版本并使用 if 语句指示您是使用前者还是后者，但是，这很脆弱，您会犯错，也许未来较新的操作系统会有新的方法来做到这一点。

处理这个问题的正确方法是：

```
if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    [self presentViewController:viewController animated:YES completion:^{/* done */}];
else
    [self presentModalViewController:viewController animated:YES]; 
```

您甚至可以争辩说您应该更加严格并执行以下操作：

```
if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    [self presentViewController:viewController animated:YES completion:^{/* done */}];
else if([self respondsToSelector:@selector(presentViewController:animated:)])
    [self presentModalViewController:viewController animated:YES];
else
    NSLog(@"Oooops, what system is this !!! - should never see this !"); 
```

我不确定你的`UIActionSheet`例子，据我所知这在 iOS 5 和 6 上是一样的。也许你正在考虑分享，如果你在 iOS 5 上`UIActivityViewController`你可能想回退到一个，所以你`UIActionSheet`可能会检查课程是否可用，请参阅[此处](http://www.lukessandbox.com/2012/checking-for-objective-c-class-availability.html)如何操作。

# appcode - AppCode 工作区和 TFS 命令行客户端工具

> ID：12589869
> 
> 赞同：4
> 
> 时间：2012-09-25T19:34:27.300
> 
> 标签：appcode, team-explorer-everywhere

我可以使用 AppCode 创建一个工作区，并且可以成功签入和签出 TFS。这一切都很好。但是当我使用[跨平台的 TFS 命令行客户端](http://msdn.microsoft.com/en-us/library/gg413282%28v=vs.100%29.aspx)并尝试查看我使用 AppCode 创建的这些工作区时，我返回“未找到本地工作区”。AppCode 并没有真正创建工作区，因为根据 msdn，工作区所有者的名称和使用工作区的计算机的名称存储在 Team Foundation Server 中。

我有其他应用程序需要访问由 AppCode 创建的这个工作区。他们可以使用 TFS 命令行客户端工具来运行 TFS 命令，但由于我上面提到的原因，他们看不到工作区。

有什么建议可以同步 AppCode 创建的工作区和 TFS 客户端工作区，这样我就可以让我的所有应用程序都知道同一个工作区？或任何其他建议？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:50:02.143

我不熟悉 AppCode，但如果它类似于 IntelliJ（他们的 Java IDE），那么他们已经编写了自己的 TFS 集成。`tf`如果是这种情况，那么他们可能没有更新找到其工作区所需的缓存文件。

如果是这种情况，那么您只需要运行一个命令`tf`即可连接到您的服务器 - 此时它将填充必要的缓存文件。例如，如果您将`-collection`标志传递给`tf workspaces`，那么它实际上会向服务器查询工作空间列表（并在此过程中重建必要的缓存文件。）

也就是说：

```
tf workspaces 
```

仅适用于本地工作区缓存，而：

```
tf workspaces -collection:http://tfs.contoso.com:8080/tfs/DefaultCollection 
```

将连接到服务器。

# c - GCC 的 GNU C 标准和 ANSI C 的区别？

> ID：12589873
> 
> 赞同：2
> 
> 时间：2012-09-25T19:34:42.627
> 
> 标签：c, gcc

任何人都可以描述 GCC 的 GNU C 标准和 ANSI C 之间的区别吗？哪个更好？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:37:48.317

GNU C 是一个 C 编译器.... ANSI C 是一个标准。

各种编译器都可以编译ANSI C，但也经常有自己的扩展

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:37:15.393

GCC 文档的相关部分：http: [//gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/C-Extensions.html](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/C-Extensions.html)

关于知道哪个更好，您需要指定目的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:37:24.453

一般来说，GNU C 是任何 ANSI GNU 完全支持的扩展。它有时会包括未来/测试版/提议的标准。几乎总是，GNU C 将支持它们支持的任何最高 ANSI C。使用 GNU C 的唯一缺点是，如果您为 GNU C 编写代码，那么您的代码的可移植性会降低。

# c# - 如何将 NHibernate 与多个数据库和表一起使用

> ID：12589874
> 
> 赞同：1
> 
> 时间：2012-09-25T19:34:44.097
> 
> 标签：c#, nhibernate

我是 NHibernate 的新手，如果这是一个简单的问题，我深表歉意。基本上，我有一个包含对其他数据库的访问的数据库。这是我的基础数据库的布局。这是一个包含其他数据库的数据库信息的表

```
--Databases--
Id
DatabaseName
DatabaseType
ConnectionString 
```

如您所见，此表包含维护的所有数据库。现在这是一个表，其中包含链接到数据库的所有列。

```
--Tables--
Id
Name
ColumnNames
DatabaseId 
```

我有许多不同类型的数据库，包括（Oracle、mysql、mssql 或 postgresql）。它们在我的应用程序中都扮演着不同的角色。为每个数据库中的每个表创建映射 xml 文件将非常耗时。

我想传递 nhibernate 连接字符串并对表执行一个简单的查询。这是一个查询示例。

```
select * from table90182763 where id IS not NULL and id <> 0 
```

我可以将此 SQL 查询直接传递给 NHibernate 吗？我可以在每个请求上有效地将连接字符串传递给休眠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:51:02.627

您可以使用 session.CreateSQLQuery()，但它在您的场景中有一个缺点。

为了使用 CreateSQLQuery，您需要已经为每个数据库、映射文件和类从结果构建域实体的会话管理器等...

**NHibernate 映射到实体，因此如果您想编写原始 SQL 并返回结果数据表，只需使用标准 ODBC 驱动程序并以旧方式执行操作。**

NHibernate 使开发和维护变得更快、更容易，如果您将来想要快速维护和添加新功能，应该正确使用它。

正如强大的 Craig Quillen 所说，“如果它是合法的基础设施，并且可以为您节省时间和不眠之夜，那么它就是一个很好的投资回报率”。

您可以设置 NHibernate 以访问任意数量的数据库，使用任意数量的数据库引擎类型。您还可以使用 IoC 容器抽象您的数据库会话，使其几乎透明。

您应该使用代码配置（[此处的示例](http://epepping.blogspot.com/2007/05/nhibernate-confirguration-from-code.html)）来创建多个会话工厂，每个会话工厂都有自己的 ConnectionString、方言和驱动程序。这些将被创建为静态或“按需 IoC”单例。然后根据您需要加载的实体，您的 IoC 工厂可以从正确的 NHibernate 会话工厂请求会话。

In order to generate mapping files and entities in an automated fashion directly from the database tables, use a tool similar to : [http://nmg.codeplex.com/](http://nmg.codeplex.com/)

# java - 两次调用访问具有不同结果的静态变量

> ID：12589879
> 
> 赞同：1
> 
> 时间：2012-09-25T19:34:54.867
> 
> 标签：java, rmi, remote-access

我在尝试访问两种不同方法之间的共享静态变量时遇到了这个问题......

假设环境应该是这样的：

方法 1 使用 RMI 接口 CommonUtils：

```
CommonUtils service = registry.lookup("chat"); //i'm sure that it works fine
service.register(String username);... 
```

CommonUtils的实现：

```
public static ArrayList<ChatInterface> connectedChat=new ArrayList<ChatInterface>();
public static void register(String username){
     connectedChat.add(username);
}
public static String getChatByUsername(String username){
    for(ConnetctedChat temp:connectedChat)
       if (temp.getUsername().equals(username))
           return temp;
} ... 
```

方法 2 直接从同一个库中调用 utils：

```
String username;
ChatInterface tmp=CommonUtils.getChatByUsername(username); <---- This is "the problem" 
```

现在，当我尝试检查“ArrayList connectedChat”中的内容时，我看到了两个不同的结果：正确的是当我从第一个方法中获取信息时。否则，当我尝试从“方法 2”中取出一些东西时，它说 ArrayList 是空的，所以我不能再操作了（但从另一种方法来看，列表似乎不是空的！）。

我要解决的问题是一种聊天服务......它适用于客户端发送者 - 服务器 - 客户端接收者，但它似乎不适用于简单的服务器发送者 - 客户端接收者通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:03:34.740

您似乎期望 RMI 在 JVM 之间共享静态变量。他们不是。这就是存在远程方法的原因。

# forms - 如何过滤 JSP 上的值?

> ID：12589880
> 
> 赞同：0
> 
> 时间：2012-09-25T19:34:59.473
> 
> 标签：forms, list, jsp, select, filter

我想让 JSP 自动过滤元素上的值。假设我已经向 JSP 加载了如下选项列表：

*   AAAA
*   AAAB
*   亚巴
*   AABB
*   阿巴
*   ABBB

我想要的是一种在我输入“AA”（应该显示项目：AAAA、AAAB、AABA 和 AABB）或“AB”（应该只显示项目：ABBA 和 ABBB）时自动过滤值的方法。

我知道这在 JSF 上很容易，但是这在 JSP 上可行吗？

提前致谢，

特鲁德维希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:21:12.383

您可以调用服务器端（struts 操作、spring 控制器）来通过 Ajax 处理您的选择，尤其是在列表很长的情况下。

`$.post("/yourAction", function(data) {`
`// here you can process data and change client side`
`});`

您可以在此处找到更多如何传递参数和获取结果的示例：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:55:16.223

这是一个 JavaScript 问题，与 JSP 没有太大关系。您可以使用[jQueryUI](http://jqueryui.com/demos/autocomplete/)或[Dojo](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/_autoComplete.html)或[Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#typeahead)或[ExtJS](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/combos.html)或任何其他提供此类组件的 JavaScript 框架。

# caching - Clojure core.cache :threshold 加倍

> ID：12589881
> 
> 赞同：2
> 
> 时间：2012-09-25T19:35:00.857
> 
> 标签：caching, clojure

我在这里想念什么？我设置`:threshold`为 2 但它似乎使用 4 代替。

版本`[org.clojure/core.cache "0.6.2"]`

```
user=> (require '[clojure.core.cache :as cache])
nil

user=> (def foo (cache/fifo-cache-factory {} :threshold 2))
#'user/foo 
```

使用`cache/miss` [文档](http://clojure.github.com/core.cache/#clojure.core.cache/miss)

```
user=> (-> foo (cache/miss :1 1) (cache/miss :2 2) (cache/miss :3 3) (cache/miss :4 4))
{:4 4, :3 3, :2 2, :1 1}

user=> (-> foo (cache/miss :1 1) (cache/miss :2 2) (cache/miss :3 3) (cache/miss :4 4) (cache/miss :5 5))
{:5 5, :4 4, :3 3, :2 2} 
```

使用`assoc`

```
user=> (-> foo (assoc :1 1) (assoc :2 2) (assoc :3 3) (assoc :4 4))
{:4 4, :3 3, :2 2, :1 1}

user=> (-> foo (assoc :1 1) (assoc :2 2) (assoc :3 3) (assoc :4 4) (assoc :5 5))
{:5 5, :4 4, :3 3, :2 2} 
```

如果我设置`:threshold 5`它允许 10 个项目。等等...... [这](https://github.com/clojure/core.cache/wiki/FIFO)就是我要说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:00:33.880

这看起来像 core.cache 中的错误，已在此提交中修复：

[https://github.com/clojure/core.cache/commit/b705f56b3e8e6d1bab97e1411e264fed48bc3694](https://github.com/clojure/core.cache/commit/b705f56b3e8e6d1bab97e1411e264fed48bc3694)

我得到了与使用 0.6.2 相同的行为，并且当我切换到 0.6.3-SNAPSHOT 时得到了正确的结果（可从[https://oss.sonatype.org/content/repositories/snapshots/](https://oss.sonatype.org/content/repositories/snapshots/)获得）。

# php - PHPMailer 创建的电子邮件在正文中显示 html 标签，而不仅仅是文本？

> ID：12589883
> 
> 赞同：0
> 
> 时间：2012-09-25T19:35:02.830
> 
> 标签：php, html, email, phpmailer, email-attachments

我正在尝试发送带有附件的电子邮件，但我有一个问题，我可以发送电子邮件，但不是有文本，而是其中存在 html 标签。

这是代码的摘录.. [http://pastebin.com/8nFkbMyP](http://pastebin.com/8nFkbMyP)

所以我看到带有html标签的消息正文，而不是纯文本，我使用函数将正文指定为html`isHtml(true)`

结果快照：![发送的电子邮件](../Images/5dd1663628fdd55f3e1d367ee153f994.png)

我只想要文本 Shah，Dhruvenkumar

我花了相当多的时间，但找不到解决方案。我在 HTML 中也有双引号，因为实际消息要复杂得多。

如果有人可以提供一些指示，我会很高兴。

谢谢你。

# scala - 数值参数化类型的初始值 (0)

> ID：12589884
> 
> 赞同：0
> 
> 时间：2012-09-25T19:35:04.460
> 
> 标签：scala, generics

考虑一下，我想实现一些函数，该函数将应用于`Long => T`整数范围`a..b`并累积类型的结果`T`（这是练习，而不是寻找有效的解决方案）

```
def sum[T <: Number](f: Long => T)(a: Long, b: Long): T = {
  def loop(acc: T, n: Long): T = 
    if (n > b)
      acc
    else
      loop(acc + f(n), n + 1)

  loop(0, a)
} 
```

`loop(0,`抱怨的缺陷

```
error: type mismatch;
 found   : Int(0)
 required: T
     loop(0, a) 
```

我明白为什么，但是在`T`这里给出数字类型 0 的选项是什么？如果有的话，当然可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:37:56.803

您应该`Numeric`为您的泛型使用类型类`T`。这将使您能够访问方法`zero`，并且`plus`（因为每个人都`Numeric`必须定义这些）这将允许您一般地执行求和。

```
def sum[T](f: Long => T)(a: Long, b: Long)(implicit num: Numeric[T]): T = {
  def loop(acc: T, n: Long): T =
    if (n > b)
      acc
    else
      loop(num.plus(acc, f(n)), n + 1)

  loop(num.zero, a)
} 
```

顺便说一句：这就是 Scala 的内置`sum`方法所做的：

```
// from TraversableOnce
def sum[B >: A](implicit num: Numeric[B]): B = foldLeft(num.zero)(num.plus) 
```

# android - open gles 基本类结构

> ID：12589888
> 
> 赞同：0
> 
> 时间：2012-09-25T19:35:18.803
> 
> 标签：android, opengl-es, android-activity, glsurfaceview

在我的第一次 opengles 教育中，我有四门课程来了解 opengles：

*   我的渲染器
*   myGLSurfaceViev
*   我的活动
*   我的三角形

我想在我的表面上获得触摸事件..但是在我设置 myRenderer 之后，我在屏幕上看到我的三角形但我无法获得触摸事件。

如果我首先在 myActivity 中设置 mySurfaceView 而没有 myRenderer，我会获得触摸事件.. 但我看不到我的三角形。

这里有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:50:44.920

我实现`onTouchEvent`了`GLSurfaceView`并将事件发送到`GLSurfaceView.Renderer`. 您可以`onTouchEvent`在`myGLSurfaceViev`.

我可以通过这里、gist、github 存储库或电子邮件阅读您的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:16:36.750

您可以像这样在“渲染”中编写：

```
public boolean onTouchEvent(MotionEvent event)
{
    // codes here
} 
```

然后在 myActivity 中添加事件代码，如下所示：

```
public boolean onTouchEvent(MotionEvent event)
{
    myRender.onTouchEvent(event);
    return super.onTouchEvent(event);
} 
```

我可以在我的代码中看到查看和获取触摸事件。那么你呢？

# zend-framework - Zend Form - 查看助手和表单装饰器

> ID：12589890
> 
> 赞同：2
> 
> 时间：2012-09-25T19:35:18.927
> 
> 标签：zend-framework, zend-form, zend-view, zend-decorators

Zend 表单装饰器和视图助手有什么区别？我想为我的表单使用一些很棒的 Jquery 插件，但发现很难理解装饰器和视图助手，例如[以下](http://twitter.github.com/bootstrap/javascript.html)是 Twitter 引导 CSS 框架的 javascript 插件

[这](http://loopj.com/jquery-tokeninput/)是一个多选项自动完成。

如何在我的表单中使用这些元素？如果我想创建一个可重用的代码，这些将是装饰器还是助手？

我是 Zend 的新手，在实时 Zend 项目中，使用自定义 HTML 表单或 Zend_Form。这些表单已经由设计师创建并提供给我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-20T06:58:58.043

我会查看现有的 ZF Partial View Helper，看看它是否符合您的需求。然后，您可以通过其他帮助程序注入您需要的任何第三方资源。

以下是相关的 ZF 文档。这些是针对 1.12 的，但如果我回想一下我的阅读，这在 2.x 中基本相同。

[部分助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.partial)

[标题脚本](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)

# c - 如何访问子对象属性？

> ID：12589893
> 
> 赞同：1
> 
> 时间：2012-09-25T19:36:06.963
> 
> 标签：c, gtk3

我正在尝试使用以下代码从对话框中的条目中获取文本属性：

```
GtkWidget   *dialog, *entry;
gchar       *text;

entry = gtk_entry_new();

dialog = create_dialog();

...

gtk_container_child_get(GTK_CONTAINER(dialog), entry, "text", text, NULL); 
```

我得到以下信息：

```
(textview:3079): Gtk-WARNING **: /build/buildd/gtk+3.0-3.4.2/./gtk/gtkcontainer.c:919: container class `GtkDialog' has no child property named `text' 
```

该对话框包含一个标签和一个带有两个按钮的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:35:20.563

你误解了什么`gtk_container_child_get`。它不会返回子属性，但会返回所谓的子属性。这些属性不仅与父级或子级关联，而且与它们的关系有关。

`"text"`不是这样的财产。你应该`gtk_entry_get_text`像 Szilárd 建议的那样使用。

# asp.net-web-api - 使用 autofac 时，如何使用 WebAPI 控制器类型名称作为依赖关系寄存器的参数？

> ID：12589898
> 
> 赞同：1
> 
> 时间：2012-09-25T19:36:38.277
> 
> 标签：asp.net-web-api, log4net, autofac

我正在使用 autofac 并尝试注册 WebApi 控制器。每个控制器都采用一个唯一的`Logging.ILog`作为构造函数参数（这是我的 ILog 适应 log4net ILog）。当记录器被解析时，我希望根据它们被解析的控制器来命名它们。

像这样的东西：

```
builder.Register(c => log4net.LogManager.GetLogger("NEED CONTROLLER NAME HERE"));   
builder.Register(c => new Logging.Adapters.Log4NetAdapter(c.Resolve<log4net.ILog>()));
builder.RegisterType<Logging.Adapters.Log4NetAdapter>().As<Logging.ILog>();         
builder.RegisterApiControllers(System.Reflection.Assembly.GetExecutingAssembly()); 
```

知道如何让每个 WebApi 控制器根据控制器类型名称接收单独的记录器名称吗？

以下似乎可行，但似乎并不理想。

```
builder.Register(c => log4net.LogManager.GetLogger(c.ComponentRegistry.Registrations.Last().Activator.LimitType.Name));
builder.Register(c => new Logging.Adapters.Log4NetAdapter(c.Resolve<log4net.ILog>()));
builder.RegisterType<Logging.Adapters.Log4NetAdapter>().As<Logging.ILog>();       
builder.RegisterApiControllers(System.Reflection.Assembly.GetExecutingAssembly()); 
```

我是autofac的新手，所以请耐心等待。
如果您注意到上面我有一个附加层或我自己的 ILog 和 Log4NetAdapter/Wrapper，那么控制器和实际的 log4net 之间有几层注册。

我需要类似的东西：

```
APIController <- Logging.ILog <- Logging.Adapters.Log4NetAdapter <- log4net.ILog <- log4net.LogManager.GetLogger(APIController-Name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:35:50.700

我使用带有包装器的 NLog，但它当然可以转换为 log4net。这是我的代码：

```
public class LoggingModule : Module
{
    protected override void Load(ContainerBuilder builder)
    {
        builder.Register((c, p) => GetLogger(p.TypedAs<Type>()));
    }

    protected override void AttachToComponentRegistration(
        IComponentRegistry registry, IComponentRegistration registration)
    {
        registration.Preparing +=
            (sender, args) =>
            {
                var forType = args.Component.Activator.LimitType;

                var logParameter = new ResolvedParameter(
                    (p, c) => p.ParameterType == typeof (ILog),
                    (p, c) => c.ResolveLog(forType));

                args.Parameters = args.Parameters.Union(new[] {logParameter});
            };
    }

    public static ILog GetLogger(Type type)
    {
        return new NLogLogger(type);
    }
}

public static class ResolveLogExtension
{
    public static ILog ResolveLog<TService>(this IComponentContext context)
    {
        return context.ResolveLog(typeof (TService));
    }

    public static ILog ResolveLog(this IComponentContext context, Type type)
    {
        return context.Resolve<ILog>(TypedParameter.From(type));
    }
}

public interface ILog
{
    void Debug(string format, params object[] args);
    void Info(string format, params object[] args);
    void Warn(string format, params object[] args);

    void Error(string format, params object[] args);
    void Error(Exception ex);
    void Error(Exception ex, string format, params object[] args);

    void Fatal(Exception ex, string format, params object[] args);
}

public class NLogLogger : ILog
{
    private readonly Logger _log;

    public NLogLogger(Type type)
    {
        _log = LogManager.GetLogger(type.FullName);
    }

    public void Debug(string format, params object[] args)
    {
        _log.Debug(format, args);
    }

    public void Info(string format, params object[] args)
    {
        _log.Info(format, args);
    }

    public void Warn(string format, params object[] args)
    {
        _log.Warn(format, args);
    }

    public void Error(string format, params object[] args)
    {
        _log.Error(format, args);
    }

    public void Error(Exception ex)
    {
        _log.ErrorException("", ex);
    }

    public void Error(Exception ex, string format, params object[] args)
    {
        _log.ErrorException(string.Format(format, args), ex);
    }

    public void Fatal(Exception ex, string format, params object[] args)
    {
        _log.FatalException(string.Format(format, args), ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:42:03.267

[Autofac wiki](http://code.google.com/p/autofac/wiki/Log4NetIntegration)上提供了 Log4net 集成文档。

从文档：

```
public class LogInjectionModule : Module
{
    protected override void AttachToComponentRegistration(IComponentRegistry registry, IComponentRegistration registration)
    {
        registration.Preparing += OnComponentPreparing;
    }

    static void OnComponentPreparing(object sender, PreparingEventArgs e)
    {
        var t = e.Component.Activator.LimitType;
        e.Parameters = e.Parameters.Union(new[]
        {
            new ResolvedParameter((p, i) => p.ParameterType == typeof(ILog), (p, i) => LogManager.GetLogger(t))
        });
    }
} 
```

稍微修改上面的内容以将名称从`LimitType`.

# hadoop - 使用分布式缓存读取文件

> ID：12589899
> 
> 赞同：0
> 
> 时间：2012-09-25T19:37:02.653
> 
> 标签：hadoop, mapreduce, distributed-caching

我有很多文件存储在分布式缓存中，每个文件对应一个用户 ID。我想将与特定用户 id 对应的特定文件（这将是 reducer 的键）附加到特定的 reduce 任务。但我不能这样做，因为我使用 configure 方法从分布式缓存中读取文件，该方法位于 reduce 类中的 reduce 方法之前。所以我不能在reduce类的configure方法中访问reduce方法的键，因此不能只读取我想要的文件。请帮助我。

```
class reduce{

void configure(args)
{

/*I can a particular file from the Path[] here.
I want to select the  file corresponding to the key of the reduce method and pass its
contents to the reduce method. I am not able to do this as I can't access the key of 
the reduce method.*/

}

void reduce(args)
{
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:06:48.640

一种解决方案是`Path`在配置步骤中将 DistributedCache 中的数组分配给类变量，如 DistributedCache [javadocs](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/filecache/DistributedCache.html)中所述。当然，用你的 reduce 代码替换 map 代码。

这是使用旧 API，看起来您的代码正在使用它。

```
 public static class MapClass extends MapReduceBase  
 implements Mapper<K, V, K, V> {

   private Path[] localArchives;
   private Path[] localFiles;

   public void configure(JobConf job) {
     // Get the cached archives/files
     localArchives = DistributedCache.getLocalCacheArchives(job);
     localFiles = DistributedCache.getLocalCacheFiles(job);
   }

   public void map(K key, V value, 
                   OutputCollector<K, V> output, Reporter reporter) 
   throws IOException {
     // Use data from the cached archives/files here
     // ...
     // ...
     output.collect(k, v);
   }
 } 
```

# actionscript-3 - 电影剪辑（根）不工作。如何从movieclip访问根变量？闪存 AS3

> ID：12589904
> 
> 赞同：1
> 
> 时间：2012-09-25T19:37:37.190
> 
> 标签：actionscript-3, flash

好的，我有一个简单的 flash 文件，因为我试图完成从影片剪辑中的主舞台访问变量。我从谷歌找到的所有东西都指向 MovieClip(root)。但它不适合我。

在主时间线上：

```
var MyName:String;
MyName = "kenny"; 
```

然后我有一个名为 MyBox 的影片剪辑，它的代码：

```
trace(MovieClip(root).MyName); 
```

我收到此错误：TypeError: Error #1034: Type Coercion failed: cannot convert flash.display::Stage@2d2df089 to flash.display.MovieClip。在 MyBox/sendpmtext()

我也尝试过 MovieClip(parent)、MovieClip(parent.parent)、MovieClip(stage)、MovieClip(this.stage)，但没有成功。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:01:25.237

你可以做

```
parent["MyName"]; 
```

或者，主时间线的正确转换（在您的上下文中，父级是 MainTimeline 类型）：

```
MainTimeline(parent).MyName; 
```

Parent 始终是 a `DisplayObjectContainer`，它没有您创建的特殊属性。如果您创建自定义属性，则需要先转换为具有这些自定义属性的类，然后才能按名称访问它们。（否则编译器不知道它们存在，并给你那个错误）。

`root`指的是您的 swf 的最顶层阶段。您的主时间线实际上是舞台的子级，因此主时间线上的变量/对象/方法不属于`stage`

* * *

如果您 using `stage.addChild(MyBox)`，那么`stage`是父时间线，而不是主时间线。如果由于某种原因您需要将 stage 作为父级，那么您必须在可以访问的地方保留对 mainTimeline 的引用。您可以在 MyBox 时间线中创建一个 var 来执行此操作。

```
var mainTimeline:MainTimeline; 
```

然后在主时间线代码中，执行以下操作：

```
MyBox.mainTimeline = this; 
```

然后您可以通过执行访问 MyBox 中的 var`mainTimeline.MyName;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:42:28.887

`Stage`是`DisplayObject`，但不是`MovieClip`。尝试使用强制

```
DisplayObject(stage) 
```

或者

```
DisplayObjectContainer(stage) 
```

并访问自定义属性：

```
DisplayObject(this)["MyName"] 
```

# wordpress - 无法导入“联系表 1”：无效的帖子类型 wpcf7_contact_form 无法导入媒体“db_site.sql_.txt”

> ID：12589905
> 
> 赞同：4
> 
> 时间：2012-09-25T19:37:39.490
> 
> 标签：wordpress, wordpress-theming

我是 web 开发的新手，特别是 wordpress。我使用 wordpress 作为 cms 框架创建了一个网站。我将一个数据库导入我的 wordpress 仪表板，一切顺利，但问题是某些内容从未成功导入，消息是这样的，

“...无法导入媒体“db_site.sql_.txt”并且无法导入“联系表格 1”：帖子类型无效 wpcf7_contact_form..”

这可能是什么问题？我很感激你的任何帮助。谢谢！..=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:07:42.730

您缺少所需的 WordPress 插件：

*   安装并激活插件**Contact Form 7**
*   再次导入主题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:11:06.000

我是新的 SO 用户，因此我无法对问题本身发表评论，但我想我可以提供帮助。如果我发布的答案实际上是评论，请原谅我，但我认为这是我最好的选择。一旦事情得到澄清，我将编辑这个问题以成为答案。

您的短语“我将数据库导入到我的 wordpress 仪表板”并不完全有意义。最初的数据在哪里？里面有什么样的数据？您使用什么工具进行导入？

# c# - 计算机与系统之间的指导匹配

> ID：12589911
> 
> 赞同：0
> 
> 时间：2012-09-25T19:38:00.707
> 
> 标签：c#

我将数据库数据导出到另一个数据库，并且数据库中表的列有 GUID 作为其标识。例如，如果我第一次在 10,000 条记录上运行并在 10,000 条记录之上再插入 10,000 条记录（总共将有 20,000 条记录），是否有可能在 20,000 条记录中存在类似的 GUID因为是单独进口的？我只是在想，如果您导入 100,000 条记录，每条记录 10,000 条，则可能会有重复的 GUID，因为 GUID 生成器不知道它生成的以前的 GUID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T19:39:27.910

[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)保证在整个世界都是唯一的，除非用于生成它们的算法有缺陷，否则您永远不会发生冲突（希望您使用的数据库 GUID 生成算法是可靠的）。这就是 GUID 的全部意义所在。纯粹主义者可能会说，从技术上讲，您有可能发生碰撞，但这种机会纯粹是学术上的，没有实际意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:40:09.690

GUIDS 对他们的时代和地点是独一无二的。如果您有重复的 GUID，在过去的某个时间，一个已从另一个复制（或有人错误地生成它们）

# linq - 输出键计数值对的 LINQ 查询

> ID：12589914
> 
> 赞同：2
> 
> 时间：2012-09-25T19:38:13.437
> 
> 标签：linq, list, dictionary, ravendb

大约有 50 万个客户的 RavenDB 文档。其中一个属性是“城市”。我如何编写一个 LINQ 查询来获取每个城市的所有出现及其计数的列表。例如，如果一千个客户文档将“NY”作为城市值，那么我需要一个计数为 NY 1000 的城市列表；LA 200，或 1300，BO 5000 等。

这是我最初写的..

```
 Dictionary<string,int> cityStats = session.Query<Customer>()
                    .ToList()
                    .GroupBy(x => x.City)
                    .OrderBy(x => x.Count())
                    .ToDictionary(x => x.Key, x => x.Count()); 
```

但这看起来不像给我准确的结果..所以我更改了最大请求允许属性（我知道它不推荐）只是为了看看它是否会改变结果..但是将 maxrequest 值保持为 500000 也会给我带来相同的结果。我确定有大约 50 万份客户文件，所以需要加起来才能匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:43:38.983

You need a map-reduce index to do this. Here's a short console program that demonstrates:

```
using System;
using System.Linq;
using Raven.Client.Document;
using Raven.Client.Indexes;

namespace ConsoleApplication1
{
  public class Customer
  {
    public string Id { get; set; }
    public string Name { get; set; }
    public string City { get; set; }
  }

  public class Customers_ByCity : AbstractIndexCreationTask<Customer, Customers_ByCity.Result>
  {
    public Customers_ByCity()
    {
      Map = customers => from customer in customers
                         select new
                         {
                           customer.City,
                           Count = 1
                         };

      Reduce = results => from result in results
                          group result by result.City
                          into g
                          select new
                          {
                            City = g.Key,
                            Count = g.Sum(x => x.Count)
                          };
    }

    public class Result
    {
      public string City { get; set; }
      public int Count { get; set; }
    }
  }

  class Program
  {
    private static void Main()
    {
      var documentStore = new DocumentStore { Url = "http://localhost:8080" };
      documentStore.Initialize();
      IndexCreation.CreateIndexes(typeof(Program).Assembly, documentStore);

      using (var session = documentStore.OpenSession())
      {
        session.Store(new Customer { Name = "John", City = "NY" });
        session.Store(new Customer { Name = "Jane", City = "NY" });
        session.Store(new Customer { Name = "Jim", City = "NY" });
        session.Store(new Customer { Name = "Sally", City = "LA" });
        session.Store(new Customer { Name = "Sam", City = "LA" });
        session.Store(new Customer { Name = "Suzie", City = "LA" });
        session.Store(new Customer { Name = "Sarah", City = "LA" });

        session.SaveChanges();
      }

      using (var session = documentStore.OpenSession())
      {
        // In a real app, you probably don't want to wait for nonstale results.
        // You will also want to consider what to do if you have more than one page of results (more than 1024 cities)

        var counts = session.Query<Customers_ByCity.Result, Customers_ByCity>()
          .Customize(x=> x.WaitForNonStaleResults())
          .Take(1024);

        foreach (var result in counts)
        {
          Console.WriteLine("{0}: {1}", result.City, result.Count);
        }

        Console.WriteLine();
      }
      Console.ReadLine();
    }
  }
} 
```

# c - 使用 sigaction 的多个信号处理程序的问题

> ID：12589916
> 
> 赞同：1
> 
> 时间：2012-09-25T19:38:22.343
> 
> 标签：c, operating-system, multiprocessing

> **可能重复：**
> [使用 sigaction 注册多个信号处理程序](https://stackoverflow.com/questions/12589578/registering-multiple-signal-handlers-using-sigaction)

如何使用 sigaction 函数为一个进程注册多个信号处理程序。我试过下面的代码

```
 struct sigaction action1;
    action1.sa_handler = signal_catcher_monitor_1;
    sigaction(SIGUSR1,&action1,NULL);
    struct sigaction action2;
    action2.sa_handler = signal_catcher_monitor_2;
    sigaction(SIGUSR2,&action2,NULL); 
```

但是，我的信号处理程序似乎不起作用。其中一个信号处理程序被调用一次，之后就不再调用它们。

```
#include <iostream>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/time.h>
#include <signal.h>
#include <cstdio>
#include <stdlib.h>
#include <sys/ipc.h>
#include <sys/shm.h>

#define NUM_SENDER_PROCESSES 3
#define NUM_HANDLER_PROCESSES 4
#define NUM_SIGNAL_REPORT 10
#define MAX_SIGNAL_COUNT 100000

using namespace std;

volatile int *usrsig1_handler_count;
volatile int *usrsig2_handler_count;
volatile int *usrsig1_sender_count;
volatile int *usrsig2_sender_count;
volatile int *lock_1;
volatile int *lock_2;
volatile int *lock_3;
volatile int *lock_4;
volatile int *lock_5;
volatile int *lock_6;

//Used only by the monitoring process
volatile int monitor_count;
volatile int usrsig1_monitor_count;
volatile int usrsig2_monitor_count;
double time_1[NUM_SIGNAL_REPORT];
double time_2[NUM_SIGNAL_REPORT];

//Used only by the main process
int total_signal_count;

//For shared memory
int shmid;
const int shareSize = sizeof(int) * (10);

double timestamp() {
  struct timeval tp;
  gettimeofday(&tp, NULL);
  return (double)tp.tv_sec + tp.tv_usec / 1000000.;
}

pid_t senders[NUM_SENDER_PROCESSES];
pid_t handlers[NUM_HANDLER_PROCESSES];
pid_t reporter;

void terminate_processes() {
  //Kill the child processes
  int status;
  cout << "Time up terminating the child processes" << endl;
  for(int i=0; i<NUM_SENDER_PROCESSES; i++) {
    kill(senders[i],SIGKILL);
  }
  for(int i=0; i<NUM_HANDLER_PROCESSES; i++) {
    kill(handlers[i],SIGKILL);
  }
  kill(reporter,SIGKILL);

  //Wait for the child processes to finish
  for(int i=0; i<NUM_SENDER_PROCESSES; i++) {
    waitpid(senders[i], &status, 0);
  }
  for(int i=0; i<NUM_HANDLER_PROCESSES; i++) {
    waitpid(handlers[i], &status, 0);
  }
  waitpid(reporter, &status, 0);
}

int main(int argc, char *argv[]) {
  void signal_catcher_1(int);
  void signal_catcher_2(int);
  void signal_catcher_int(int);
  void signal_catcher_monitor_1(int);
  void signal_catcher_monitor_2(int);
  void signal_catcher_main(int);

  if(argc != 2) {
    cout << "Required parameters missing. " << endl;
    cout << "Option 1 = 1 which means run for 30 seconds" << endl;
    cout << "Option 2 = 2 which means run until 100000 signals" << endl;
    exit(0);
  }

  int option = atoi(argv[1]);

  pid_t pid;

  if(option == 2) {
    if(signal(SIGUSR1, signal_catcher_main) == SIG_ERR) {
      perror("1");
      exit(1);
    }

    if(signal(SIGUSR2, signal_catcher_main) == SIG_ERR) {
      perror("2");
      exit(1);
    }
  } else {
    if(signal(SIGUSR1, SIG_IGN) == SIG_ERR) {
      perror("1");
      exit(1);
    }

    if(signal(SIGUSR2, SIG_IGN) == SIG_ERR) {
      perror("2");
      exit(1);
    }

  }

  if(signal(SIGINT, signal_catcher_int) == SIG_ERR) {
    perror("3");
    exit(1);
  }

  ///////////////////////////////////////////////////////////////////////////////////////
  ////////////////////// Initializing the shared memory /////////////////////////////////
  ///////////////////////////////////////////////////////////////////////////////////////
  cout << "Initializing the shared memory" << endl;
  if ((shmid=shmget(IPC_PRIVATE,shareSize,IPC_CREAT|0660))< 0) {
    perror("shmget fail");
    exit(1);
  }  

  usrsig1_handler_count = (int *) shmat(shmid, NULL, 0);
  usrsig2_handler_count = usrsig1_handler_count + 1;
  usrsig1_sender_count = usrsig2_handler_count + 1;
  usrsig2_sender_count = usrsig1_sender_count + 1;
  lock_1 = usrsig2_sender_count + 1;
  lock_2 = lock_1 + 1;
  lock_3 = lock_2 + 1;
  lock_4 = lock_3 + 1;
  lock_5 = lock_4 + 1;
  lock_6 = lock_5 + 1;

  //Initialize them to be zero
  *usrsig1_handler_count = 0;
  *usrsig2_handler_count = 0;
  *usrsig1_sender_count = 0;
  *usrsig2_sender_count = 0;
  *lock_1 = 0;
  *lock_2 = 0;
  *lock_3 = 0;
  *lock_4 = 0;
  *lock_5 = 0;
  *lock_6 = 0;

  cout << "End of initializing the shared memory" << endl;
  /////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////// End of initializing the shared memory ///////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////

  ///////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////Registering the signal handlers///////////////////////////////
  ///////////////////////////////////////////////////////////////////////////////////////////
  cout << "Registering the signal handlers" << endl;
  for(int i=0; i<NUM_HANDLER_PROCESSES; i++) {
    if((pid = fork()) == 0) {
      if(i%2 == 0) {
          struct sigaction action;
          action.sa_handler = signal_catcher_1;
          sigemptyset(&action.sa_mask);
          action.sa_flags = 0;
          sigaction(SIGUSR1,&action,NULL);

        if(signal(SIGUSR2, SIG_IGN) == SIG_ERR) {
          perror("2");
          exit(1);
        }

      } else {
        if(signal(SIGUSR1 ,SIG_IGN) == SIG_ERR) {
          perror("1");
          exit(1);
        }

        struct sigaction action;
        action.sa_handler = signal_catcher_2;
        sigemptyset(&action.sa_mask);
        action.sa_flags = 0;
        sigaction(SIGUSR2,&action,NULL);

      }

      if(signal(SIGINT, SIG_DFL) == SIG_ERR) {
        perror("2");
        exit(1);
      }

      while(true) {
        pause();
      }
      exit(0);

    } else {
      //cout << "Registerd the handler " << pid << endl;
      handlers[i] = pid;
    }
  }
  cout << "End of registering the signal handlers" << endl;

  /////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////End of registering the signal handlers //////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////////

  ////////////////////////////////////////////////////////////////////////////////////////////////////
  ///////////////////////////Registering the monitoring process //////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////
  cout << "Registering the monitoring process" << endl;
  if((pid = fork()) == 0) {
    struct sigaction action1;
    action1.sa_flags = 0;
    action1.sa_handler = signal_catcher_monitor_1;
    sigemptyset(&action1.sa_mask);
    sigaction(SIGUSR1,&action1,NULL);

    struct sigaction action2;
    action2.sa_flags = 0;
    sigemptyset(&action2.sa_mask);
    action2.sa_handler = signal_catcher_monitor_2;
    sigaction(SIGUSR2,&action2,NULL);

    if(signal(SIGINT, SIG_DFL) == SIG_ERR) {
      perror("2");
      exit(1);
    }

    while(true) {
      pause();
    }
    exit(0);

  } else {
    cout << "Monitor's pid is " << pid << endl;
    reporter = pid;
  }
  cout << "End of registering the monitoring process" << endl;

  /////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////End of registering the monitoring process////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////////

  //Sleep to make sure that the monitor and handler processes are well initialized and ready to handle signals
  sleep(5);

  //////////////////////////////////////////////////////////////////////////////////////////////////////
      //////////////////////////Registering the signal generators///////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////////
  cout << "Registering the signal generators" << endl;
  for(int i=0; i<NUM_SENDER_PROCESSES; i++) {

    if((pid = fork()) == 0) {

      if(signal(SIGUSR1, SIG_IGN) == SIG_ERR) {
        perror("1");
        exit(1);
      }

      if(signal(SIGUSR2, SIG_IGN) == SIG_ERR) {
        perror("2");
        exit(1);
      }

      if(signal(SIGINT, SIG_DFL) == SIG_ERR) {
        perror("2");
        exit(1);
      }

      srand(i);        
      while(true) {
        int signal_id = rand()%2 + 1;

        if(signal_id == 1) {
          killpg(getpgid(getpid()), SIGUSR1);
          while(__sync_lock_test_and_set(lock_4,1) != 0) {
          }
          (*usrsig1_sender_count)++;
          *lock_4 = 0;
        } else {
          killpg(getpgid(getpid()), SIGUSR2);
          while(__sync_lock_test_and_set(lock_5,1) != 0) {
          }
          (*usrsig2_sender_count)++;
          *lock_5=0;
        }       
        int r = rand()%10 + 1;
        double s = (double)r/100;
        sleep(s);
      }

      exit(0); 
    } else {
      //cout << "Registered the sender " << pid << endl;
      senders[i] = pid;
    } 
  }

  //cout << "End of registering the signal generators" << endl;
  /////////////////////////////////////////////////////////////////////////////////////////////////////
  //////////////////////////End of registering the signal generators///////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////////

  //Either sleep for 30 seconds and terminate the program or if the number of signals generated reaches 10000, terminate the program
  if(option = 1) {
    sleep(90);
    terminate_processes(); 
  } else {
    while(true) {
      if(total_signal_count >= MAX_SIGNAL_COUNT) {
        terminate_processes();
      } else {
        sleep(0.001);
      }
    }
  }
}

void signal_catcher_1(int the_sig) {
  while(__sync_lock_test_and_set(lock_1,1) != 0) {
  }
  (*usrsig1_handler_count) = (*usrsig1_handler_count) + 1;

  __sync_lock_release(lock_1);
}

void signal_catcher_2(int the_sig) {
   while(__sync_lock_test_and_set(lock_2,1) != 0) {
   }
   (*usrsig2_handler_count) = (*usrsig2_handler_count) + 1;
   __sync_lock_release(lock_2);

}

void signal_catcher_main(int the_sig) {
  while(__sync_lock_test_and_set(lock_6,1) != 0) {
  }
  total_signal_count++;
  *lock_6 = 0;
}

void signal_catcher_int(int the_sig) {
  for(int i=0; i<NUM_SENDER_PROCESSES; i++) {
    kill(senders[i],SIGKILL);
  }

  for(int i=0; i<NUM_HANDLER_PROCESSES; i++) {
    kill(handlers[i],SIGKILL);
  }

  kill(reporter,SIGKILL);

  exit(3);
}

void signal_catcher_monitor_1(int the_sig) {
  cout << " Monitor 1 " << endl;
}

void signal_catcher_monitor_2(int the_sig) {
  cout << "Monitor 2  " << endl;
} 
```

# java - ActionBarSherlock 与 google mapview 选项卡

> ID：12589917
> 
> 赞同：1
> 
> 时间：2012-09-25T19:38:24.373
> 
> 标签：java, android, mapactivity, actionbarsherlock-map

我一直在尝试让 actionbarsherlock 选项卡与 google mapview 一起工作，但不知道如何，我已经实现了具有自定义覆盖工作的 google map (MapActivity)，但不想进行太多修改以使 sherlock 水龙头工作。有人可以告诉我怎么做吗？我已关注此链接并使用谷歌而不是 esri 地图库，但从未成功。[http://forums.arcgis.com/threads/59190-Map-View-in-Fragment-with-Tab-Action-Bar](http://forums.arcgis.com/threads/59190-Map-View-in-Fragment-with-Tab-Action-Bar) 谢谢

# html - example.com:8080/wordpress = 我的网站 | example.com = 找不到页面

> ID：12589918
> 
> 赞同：0
> 
> 时间：2012-09-25T19:38:29.003
> 
> 标签：html, wordpress, apache, virtualhost, bitnami

我在家里的 ubuntu 上使用 bitnami wordpress 运行 Lampstack。

```
my website = "example.com"
my ip address = "12.123.123.123
my home server's ip address = 192.168.0.101 
```

基本上，当我访问我的 example.com:8080/wordpress 时，我得到了我的网站，当我访问 example.com 时，我得到了一个找不到页面。

我的域名注册商 www &@A 记录指向我的家庭服务器 IP。

所以我可以通过输入`example.com:8080/wordpress`或`12.123.123.123:8080/wordpress`

在我的路由器中，我设置了一个端口范围

`Application: HTTP | Start: 80 | End: 8080 | Protocol: Both | IP Address 192.168.0.101 | Enable [YES]`

我怎么`example.com`去`example.com:8080/wordpress`？

这是我的 httpd-vhosts.conf 文件的样子`/home/lampstack-5.3.16-0/apache2/conf/extra`

```
NameVirtualHost *:80
NameVirtualHost *:8080
<VirtualHost *:80>
    DocumentRoot /home/admins/lampstack-5.3.16-0/apps/wordpress
    ServerName example.com
    ServerAlias www.example.com
</VirtualHost>
<VirtualHost *:8080>
    DocumentRoot /home/admins/lampstack-5.3.16-0/apps/wordpress
    ServerName example.com
    ServerAlias www.example.com
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:41:16.847

似乎您需要将您的文档根目录（在您的 .conf 文件中）设置为正确的 wordpress 目录。这是 wordpress/index.php 驻留在硬盘上的位置。

# wordpress - 在我按下 F12 之前，IE9 中的 iframe 无法识别 cookie

> ID：12589919
> 
> 赞同：1
> 
> 时间：2012-09-25T19:38:30.427
> 
> 标签：wordpress, internet-explorer, iframe, brightcove

是的，我听起来也很疯狂。把我的头发拉出来，把我的头疯狂地敲在键盘上。这就是为什么我在这里乞求:)

希望这不是太简短：

我在 WordPress 管理员端添加新条目表单中嵌入了 iframe。在 iframe 显示在元框中之前，会设置一个 cookie。iframe 会寻找该 cookie 作为身份验证的手段。如果 cookie 具有特定值，则用户不必登录 iframe 提供的服务。他们会自动登录。但是，我可以让 iframe 看到 cookie 的唯一方法是按 F12 然后刷新页面。一旦我这样做，自动登录就会按预期发生。显然，按 F12 并不是最佳的用户体验 :)

在 Chrome 和 Firefox 中一切正常。

我注意到的唯一其他细节是，即使我让 iframe 查看 cookie 并验证用于选择要上传的文件的按钮也不起作用。我点击它，它已经死了。

最后，iframe“小部件”来自 FileMobile。它是 Brightcove 的上传者。这个细节可能无关紧要，但如果你已经读到这里，我相信你会很好奇。

同样，在 Chrome 和 Firefox 中一切正常。

# python - 用另一个数组切片 numpy 数组

> ID：12589923
> 
> 赞同：10
> 
> 时间：2012-09-25T19:38:55.180
> 
> 标签：python, arrays, numpy, slice

我有一个大的一维整数数组，我需要去掉切片。那是微不足道的，我只是这样做`a[start:end]`。问题是我需要更多这些切片。`a[start:end]`如果 start 和 end 是数组，则不起作用。可以为此使用 for 循环，但我需要它尽可能快（这是一个瓶颈），因此欢迎使用本机 numpy 解决方案。

为了进一步说明，我有这个：

```
a = numpy.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], numpy.int16)
start = numpy.array([1, 5, 7], numpy.int16)
end   = numpy.array([2, 10, 9], numpy.int16) 
```

并且需要以某种方式使它变成这样：

```
[[1], [5, 6, 7, 8, 9], [7, 8]] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:58:58.577

这可以（几乎？）`numpy`使用掩码数组和步幅技巧以纯方式完成。首先，我们创建我们的面具：

```
>>> indices = numpy.arange(a.size)
>>> mask = ~((indices >= start[:,None]) & (indices < end[:,None])) 
```

或者更简单地说：

```
>>> mask = (indices < start[:,None]) | (indices >= end[:,None]) 
```

对于开始值和结束值`False`的那些索引，掩码是（即未掩码的值）。（用(aka )切片增加了一个新维度，启用广播。）现在我们的掩码看起来像这样：`>=``<``None``numpy.newaxis`

```
>>> mask
array([[ True, False,  True,  True,  True,  True,  True,  True,  True,
         True,  True,  True],
       [ True,  True,  True,  True,  True, False, False, False, False,
        False,  True,  True],
       [ True,  True,  True,  True,  True,  True,  True, False, False,
         True,  True,  True]], dtype=bool) 
```

现在我们必须使用以下方法拉伸数组以适应掩码`stride_tricks`：

```
>>> as_strided = numpy.lib.stride_tricks.as_strided
>>> strided = as_strided(a, mask.shape, (0, a.strides[0]))
>>> strided
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11],
       [ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11],
       [ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11]], dtype=int16) 
```

这看起来像一个 3x12 数组，但每一行都指向同一个内存。现在我们可以将它们组合成一个掩码数组：

```
>>> numpy.ma.array(strided, mask=mask)
masked_array(data =
 [[-- 1 -- -- -- -- -- -- -- -- -- --]
 [-- -- -- -- -- 5 6 7 8 9 -- --]
 [-- -- -- -- -- -- -- 7 8 -- -- --]],
             mask =
 [[ True False  True  True  True  True  True  True  True  True  True  True]
 [ True  True  True  True  True False False False False False  True  True]
 [ True  True  True  True  True  True  True False False  True  True  True]],
       fill_value = 999999) 
```

这与您所要求的并不完全相同，但它的行为应该相似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T20:29:32.153

没有 numpy 方法可以做到这一点。请注意，由于它是不规则的，因此无论如何它只会是数组/切片的列表。但是我想补充一点，对于`ufuncs`几乎所有 numpy 中的函数（或者它们至少基于它们）的所有（二进制），有一种`reduceat`方法可以帮助您避免实际创建切片列表，因此，如果切片很小，也可以加快计算速度：

```
In [1]: a = np.arange(10)

In [2]: np.add.reduceat(a, [0,4,7]) # add up 0:4, 4:7 and 7:end
Out[2]: array([ 6, 15, 24])

In [3]: np.maximum.reduceat(a, [0,4,7]) # maximum of each of those slices
Out[3]: array([3, 6, 9])

In [4]: w = np.asarray([0,4,7,10]) # 10 for the total length

In [5]: np.add.reduceat(a, w[:-1]).astype(float)/np.diff(w) # equivalent to mean
Out[5]: array([ 1.5,  5\. ,  8\. ]) 
```

编辑：由于您的切片重叠，我将补充一点，这也可以：

```
# I assume that start is sorted for performance reasons.
reductions = np.column_stack((start, end)).ravel()
sums = np.add.reduceat(a, reductions)[::2] 
```

通常在这里`[::2]`应该没什么大不了的，因为没有为重叠切片做真正的额外工作。

这里还有一个关于切片的问题`stop==len(a)`。必须避免这种情况。如果你只有一个切片，你可以这样做`reductions = reductions[:-1]`（如果它是最后一个切片），否则你只需要附加一个值`a`来欺骗`reduceat`：

```
 a = np.concatenate((a, [0])) 
```

因为无论如何你都在切片上工作，所以在末尾添加一个值并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:50:37.090

这不是一个“纯”的 numpy 解决方案（尽管正如@mgilson 的评论所指出的，很难看出不规则输出如何成为一个 numpy 数组），但是：

```
a = numpy.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], numpy.int16)
start = numpy.array([1, 5, 7], numpy.int16)
end   = numpy.array([2, 10, 9], numpy.int16)

map(lambda range: a[range[0]:range[1]],zip(start,end)) 
```

得到你：

```
[array([1], dtype=int16), array([5, 6, 7, 8, 9], dtype=int16),  array([7, 8], dtype=int16)] 
```

按要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-30T19:47:12.127

如果你想要它在一行中，它将是：

```
x=[list(a[s:e]) for (s,e) in zip(start,end)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-25T12:10:35.170

类似的解决方案，如 timday。类似速度：

```
a = np.random.randint(0,20,1e6)
start = np.random.randint(0,20,1e4)
end = np.random.randint(0,20,1e4)

def my_fun(arr,start,end):
        return arr[start:end]

%timeit [my_fun(a,i[0],i[1]) for i in zip(start,end)]
%timeit map(lambda range: a[range[0]:range[1]],zip(start,end)) 
```

`100 loops, best of 3: 7.06 ms per loop 100 loops, best of 3: 6.87 ms per loop`

# c++ - 我们如何确定是什么导致通过 MS ODBC 驱动程序对 MS Access DB 的查询在 C++ 非托管环境中失败？

> ID：12589924
> 
> 赞同：0
> 
> 时间：2012-09-25T19:38:56.150
> 
> 标签：c++, odbc, ms-access-2007

我正在尝试调试客户端的应用程序。该应用程序使用 MSVC（非托管）C++ 构建。它连接到 MS Access DB（通过 ODBC）。

当 MS Access DB 位于本地驱动器上时，通过 ODBC 提交的所有查询都可以正常完成。

当数据库位于网络驱动器上时，我们会遇到问题。似乎所有基于“Select”的查询（如“Select * from FOO”）都成功返回。

当我们尝试通过删除、插入或更新数据来推送查询时，ODBC 调用会失败。该调用不会返回任何特别有用的信息。它返回 -1 作为结果（表示失败）。我检查了句柄（SQL_HANDLE_ENV、SQL_HANDLE_DBC、SQL_HANDLE_STMT）以查看是否有与失败相关的其他错误信息。

例如，当我们尝试删除时，我们得到的错误消息是：“[Microsoft][ODBC Microsoft Access Driver] 无法从指定的表中删除。”

我们很难弄清楚问题是什么。有没有办法我们可以获得有关错误的更多有用信息（ODBC 跟踪等）？

奇怪的是，简单的选择似乎工作正常，而任何添加/删除/修改数据的操作似乎都失败了。

调试这个的最佳策略是什么？有没有人有任何想法可以帮助我们解决这个问题？

这些是用户/特权可访问性问题的症状吗？

# java - 本机代码中的 Printf 仅出现在 java 应用程序的末尾

> ID：12589925
> 
> 赞同：1
> 
> 时间：2012-09-25T19:38:58.967
> 
> 标签：java, printf, jna

我用 C 语言编写了一个 DLL，它使用`printf`. 我正在使用这个 dll 作为 Java 中的包装器，带有 JNA。

问题是，printf 数据只出现在 Java 应用程序的末尾。

所以我尝试使用 System.out.flush(); 但它没有效果。

请问是否正常以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:44:29.723

`fflush(stdout);`在 之后添加`printf`以强制缓冲区刷新。

# .net - linq to sql 查询不执行

> ID：12589933
> 
> 赞同：0
> 
> 时间：2012-09-25T19:39:38.570
> 
> 标签：.net, linq-to-sql, asp.net-4.0

我的 .NET 4.0 控制台应用程序上有 Linq to Sql，并且我已经测试了查询并且有些工作正常，但是当我尝试在调试模式下执行这个特定查询时，它只是卡在上面并继续工作（它只是不会做任何事）。

```
List<Data.OWNER> activeOwnersForNet1 =
            (from loadd in OrderITDataContext.RECIPE_LOAD_DATAs
             join owner in OrderITDataContext.OWNERs on loadd.RCPLOADD_OWNER equals owner.OWN_ID
             where loadd.RCPLOADD_STATUS == 100 &&
                     owner.OWN_NET_ID == 1
             select owner).ToList(); 
```

请注意，即使没有 where 子句，它也不会起作用。这些表也连接在 SQL 数据库上（FK 关系）。这种奇怪行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:18:19.947

使用 Log 显示查询，然后查看 SSMS 中的查询计划。

[如何：显示生成的 SQL](http://msdn.microsoft.com/en-us/library/bb386961.aspx)

# oracle - ORA-00932 不一致的数据类型：预期 - 得到 BLOB

> ID：12589937
> 
> 赞同：5
> 
> 时间：2012-09-25T19:39:46.913
> 
> 标签：oracle

我有这个查询我正在尝试运行，但我一直遇到这个错误。我正在尝试做一个`Where`子句，将数据（BLOB 列）与 :var2 进行比较，后者是一个 blob 对象。

这是我的代码。

```
SELECT max(id) 
INTO :var1
FROM table_name 
where data = :var2; 
```

关于为什么我会收到此`ORA-00932`错误的任何建议？

我正在将 a`blob`与 a进行比较`blob column`，这不是很好吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T20:02:05.940

它们不是简单的类型，您需要使用函数来比较它们。

```
SELECT max(id) 
INTO :var1
FROM table_name 
where dbms_lob.compare(data,:var2) = 0; 
```

# wpf - 将 ListView 项目链接到单独不同的列表

> ID：12589938
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:40:05.793
> 
> 标签：wpf, listview, itemssource

我已经定义了一个`ListView`每个项目都以只读方式显示的位置（即仅选择，否`TextBox`）`ComboBox`（根据`ItemTemplate`）。

可以从这些组合框中的每一个中选择一个给定的可能项目列表。但是，需要注意的是，不能一次在两个组合框中选择任何项目。为了确保这一点，一旦在其中一个组合框中选择了一个项目，就必须从所有其他组合框中删除它（显然除了它被选中的组合框），一旦它被取消选择，就必须添加它再次到所有其他组合框。

哦，还有一件事：与完整列表相比，可见项目的顺序不得改变。

我的问题是：**我怎样才能实现这种行为？**

我尝试了三种可能的解决方案：

*   我编写了一个新的辅助控件类，它通过与外部世界的绑定获取现有项目的完整列表和排除（使用）项目的列表，以及选定项目的属性。我可以将该控制类包含在`ItemTemplate`; 然后，该模板中的组合框将其`ItemsSource`属性绑定到`ItemsProvider`帮助器类的属性，该属性应该将现有项目列表、排除项目列表和选定项目绑定在一起，并返回该特定组合的单个项目枚举盒子。
    然而，我不知何故迷失在所有关于列表更改的更新通知中；我担心我必须单独对所有组合做出反应`NotifyCollectionChangedAction`在两个输入列表中，并且有十几个更新方法的前景，我认为这不是正确的方法。
*   我将现有项目的列表更改为存储布尔值以及每个项目的列表，因此我可以将每个项目标记为隐藏或不隐藏。这将减轻我在保持项目顺序的同时拥有排除项目列表的必要性，从而降低了上述组合更改通知的复杂性。
    不幸的是，由于列表本身不会随该解决方案而改变，我不知道如何让依赖属性基础结构`ItemsSource`在我的帮助程序类中通知我的属性。
*   我不必*使用*带有绑定方式的 WPF；我也可以在这里做代码隐藏。因此，我尝试遍历所有`ListViewItem`s 并检索每个组合框以手动刷新项目列表。`ListViewItem`但是，在加载项目模板后，我找不到访问 s 的好时机。这种情况似乎没有事件，并且`ListView.ItemContainerGenerator`是只读的，所以即使`ItemContainerGenerator`不是*密封*类，我也无法分配我自己的专业`ItemContainerGenerator`来创建我可以覆盖的自定义列表视图项目`OnApplyTemplate`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:56:50.050

我可能会将所有内容绑定`ComboBoxes`到源集合上的不同[`CollectionViews`](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.aspx)对象，这些集合会过滤掉其他对象的选定项目`ComboBoxes`。`Refresh`如果组合框的选择发生变化，您还需要查看视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:26:19.283

如果您将列表绑定到 ViewModel 中的不同列表，并绑定所选项目以触发更改这些列表的方法，那么您可以获得结果。类似于下面的。

MainWindow.xaml 的 Xaml：

```
<Window x:Class="ComboBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" >
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="180" />
            <ColumnDefinition Width="180" />
            <ColumnDefinition Width="180" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="26" />
        </Grid.RowDefinitions>
        <ComboBox Name="cboOne" Grid.Column="0" Grid.Row="0" ItemsSource="{Binding CboOneList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding CboOneValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
        <ComboBox Name="cboTwo" Grid.Column="1" Grid.Row="0" ItemsSource="{Binding CboTwoList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding CboTwoValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
        <ComboBox Name="cboThree" Grid.Column="2" Grid.Row="0" ItemsSource="{Binding CboThreeList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding CboThreeValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
    </Grid>
</Window> 
```

MainWindow.xaml 的代码隐藏：

```
using System.Windows;
using System.Windows.Controls;

namespace ComboBox {
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();

        this.DataContext = new ComboBoxViewModel();

    }

    private void cboOne_SelectionChanged(object sender, SelectionChangedEventArgs e) {

    }
}
} 
```

视图模型：

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.ComponentModel;

 namespace ComboBox {
class ComboBoxViewModel : INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;
    List<string> master = new List<string>() { "A", "B", "C", "D", "E", "F" };

    #region C'tor
    public ComboBoxViewModel() {
        RetrieveLists();
    }
    #endregion

    #region Methods
    protected void OnPropertyChanged(String propertyName) {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if(null != handler) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public void RetrieveLists() {
        List<string> tempOne = (from a in master
                                where !a.Equals(CboTwoValue) && !a.Equals(CboThreeValue)
                                select a).ToList();
        CboOneList = tempOne;

        List<string> tempTwo = (from a in master
                                where !a.Equals(CboOneValue) && !a.Equals(CboThreeValue)
                                select a).ToList();
        CboTwoList = tempTwo;

        List<string> tempThree = (from a in master
                                where !a.Equals(CboTwoValue) && !a.Equals(CboOneValue)
                                select a).ToList();
        CboThreeList = tempThree;
    }
    #endregion

    #region Properties
    private string cboOneValue = string.Empty;
    public string CboOneValue {
        get {
            return cboOneValue;
        }
        set {
            if(!value.Equals(cboOneValue)) {
                cboOneValue = value;
                RetrieveLists();
                OnPropertyChanged("CboOneValue");
            }
        }
    }
    private string cboTwoValue = string.Empty;
    public string CboTwoValue {
        get {
            return cboTwoValue;
        }
        set {
            if(!value.Equals(cboTwoValue)) {
                cboTwoValue = value;
                RetrieveLists();
                OnPropertyChanged("CboTwoValue");
            }
        }
    }
    private string cboThreeValue = string.Empty;
    public string CboThreeValue {
        get {
            return cboThreeValue;
        }
        set {
            if(!value.Equals(cboThreeValue)) {
                cboThreeValue = value;
                RetrieveLists();
                OnPropertyChanged("CboThreeValue");
            }
        }
    }

    private List<string> cboOneList = new List<string>();
    public List<string> CboOneList {
        get {
            return cboOneList;
        }
        set {
            cboOneList = value;
            OnPropertyChanged("CboOneList");
        }
    }

    private List<string> cboTwoList = new List<string>();
    public List<string> CboTwoList {
        get {
            return cboTwoList;
        }
        set {
            cboTwoList = value;
            OnPropertyChanged("CboTwoList");
        }
    }

    private List<string> cboThreeList = new List<string>();
    public List<string> CboThreeList {
        get {
            return cboThreeList;
        }
        set {
            cboThreeList = value;
            OnPropertyChanged("CboThreeList");
        }
    }
    #endregion
} 
```

}

# javascript - d3.js 中的链接强制有向图

> ID：12589940
> 
> 赞同：1
> 
> 时间：2012-09-25T19:40:09.507
> 
> 标签：javascript, svg, append, hyperlink, d3.js

在[这个例子](http://bl.ocks.org/1153292)中，如何使每个节点的文本成为可点击的链接？

我尝试了类似于此代码的内容，但这些值不可点击：

```
var links = text.append("a").attr("xlink:href", "http://www.google.com/");

// A copy of the text with a thick white stroke for legibility.
links.append("svg:text")
    .attr("x", 8)
    .attr("y", ".31em")
    .attr("class", "shadow")
    .text(function(d) { return d.name; });

 links.append("svg:text")
    .attr("x", 8)
    .attr("y", ".31em")
    .text(function(d) { return d.name; }); 
```

编辑/解决方案：原来css有这个属性：指针事件：无；我不得不删除它，然后按照以利亚的建议使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:42:34.260

不要使用链接，将其删除并直接附加到您的文本中`<g>`，它应该可以工作。

```
text.append("svg:text")
        .attr("x", 8)
        .attr("y", ".31em")
        .attr("class", "shadow")
        .text(function(d) { return d.name; })
        .on("click", function() {yourFunction(yourVar)})
        .on("mouseover", function() {yourFunction2(yourVar)})
        .on("mouseout", function() {yourFunction3(yourVar)})
; 
```

另外，如果你想传递绑定的数据，你可以这样做：

```
.on("click", function(d) {yourFunction(d.yourVar)} 
```

而如果你想传递实际的 d 对象，你可以这样做：

```
.on("click", yourFunction} 
```

在这种情况下， yourFunction(d,i) 可以从绑定数据中引用 d.whatever 。

# magento - 根据密钥模式清除 Magento 缓存

> ID：12589947
> 
> 赞同：0
> 
> 时间：2012-09-25T19:40:59.823
> 
> 标签：magento

Magento 有没有办法清除以特定缓存键开头的缓存的特定部分。

我想清除模块中所有以以下开头的键的内容：

**mynamespace_mymodule_**

因此将从缓存中清除以下内容：

```
mynamespace_mymodule_asdaqasd

mynamespace_mymodule_qeqweq

mynamespace_mymodule_poipoi 
```

等等等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:56:35.627

Magento 的缓存系统允许您在保存缓存的同时分配**缓存键**（唯一 ID）和**缓存标签**。查看`Mage_Core_Model_Cache::save` [方法](http://docs.magentocommerce.com/Mage_Core/Mage_Core_Model_Cache.html#save)- 3d 参数是**缓存标签**数组。

通过分配*缓存标签*，您将能够一次删除所有带有*缓存标签的缓存*。[`Mage_Core_Model_Cache::clean`](http://docs.magentocommerce.com/Mage_Core/Mage_Core_Model_Cache.html#clean)methid 将缓存标签数组作为参数。

# php - 在body标签中替代CSS？

> ID：12589949
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:41:04.977
> 
> 标签：php, css

在我网站的登录系统中，我希望在验证完成后加载用户选择的 CSS。唯一的问题是我的 PHP 位于 body 元素中，我在那里回显了用户的 CSS 链接。我知道这很“糟糕”，但我还能做什么？

```
if (isset($_SESSION['loggedin'])){
ECHO $_SESSION['style'];
}
else
{
ECHO 'green';
}
ECHO ".css' />"; 
```

用户登录后，PHP 脚本会在正文中回显一些文本，这就是为什么我不能将 PHP 脚本放在标题中的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:59:40.733

我假设您根本不熟悉 PHP 的基础知识，所以我将尽可能简单地对其进行分解。如果您的文档能够执行 PHP（这听起来像是因为您在正文中发生了一些事情），那么您需要做的就是将 PHP 代码包装为 PHP`<?php`并将`?>`其解析*为*PHP。

你不应该把样式表放在你的身体里。确实，这是没有人会推荐的。但是，您可以做的是在文档的头部执行 PHP。

```
<!DOCTYPE html>  
<html lang="en">  
  <head>  
    <meta charset="utf-8">  
    <title>title</title>  
    <link rel="stylesheet" href="style.css">  
<?php
echo "<link rel='stylesheet' href='{$_SESSION['user_css']}'>";
?>
    <script src="script.js"></script>  
  </head>  
  <body>  
<?php
echo 'body text';
?>
  </body>  
</html> 
```

无论您决定将 PHP 代码注入到文档的哪个位置，它都会按照您的意愿呈现*。*我建议使用 MVC 解决方案，但如果这只是一个小的一次性文件，请随时根据需要随时注入 PHP。

[http://php.net/manual/en/language.basic-syntax.phptags.php](http://php.net/manual/en/language.basic-syntax.phptags.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:56:15.463

您可以在使用 jQuery 加载文档后加载用户 css。

```
<script>

$(document).ready(function() {

  $(head).append('<style>
  <?php echo($user_css); ?>
  </style>');

});

</script> 
```

虽然只是在头部添加一个部分来输出 CSS，但将来会更容易维护，并且不需要加载页面。在慢速（ish）连接上发生足够显着的变化，当 CSS 加载他们的样式时，用户会看到闪烁。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T19:45:30.097

您可以使用一些 jQuery 将样式附加到`<head>`：

```
$(head).append('<style><?php echo user_css ?></style>'); 
```

# regex - 正则表达式：需要验证条形码

> ID：12589950
> 
> 赞同：1
> 
> 时间：2012-09-25T19:41:08.210
> 
> 标签：regex

我需要通过正则表达式验证以下条形码：

> TE1310 2000183B 804F58000020183B 20120509 0013.0002.0000 20161201

我们的条形码扫描仪偶尔会从条形码中截断一些字符，因此我需要通过以下正则表达式规则对其进行验证：

1.  以“TE1310”开头
2.  空间
3.  第二组字符正好是 8 个长度。可以包含数字或字母
4.  空间
5.  第三组包含恰好 16 个字符。可以是数字或字母
6.  空间
7.  第 4 组必须正好是“0013.0002.0000”
8.  空间
9.  第 5 组也是最后一组包含 8 个字符。仅限数字

我有以下正则表达式，我非常接近，但不确定如何执行上面的＃7（0013.0002.0000）。我放了“？？？？” 在我不确定如何执行此部分的下面进入我的正则表达式：

> TE1310\s[A-Za-z0-9]{8}\s[A-Za-z0-9]{16}\s????\s\d{8}

知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:53:49.063

[我假设正则表达式语法类似于 JavaScript，基本思想可以转换为我知道的任何其他正则表达式。]

### 1：以TE1310开头

```
^TE1310 
```

`^`仅用于匹配字符串的开头，后面的字符按字面意思匹配。

### 2：空间

```
/^TE1310 / 
```

我正在添加`/`正则表达式分隔符以表明正则表达式中实际上包含一个空格字符。如果您的正则表达式语法支持替代分隔符，您可能会看到类似的内容`~^TE1310 ~`。

### 3：第二组字符正好是 8 个长度。可以包含数字或字母

```
/^TE1310 [a-zA-Z0-9]{8}/ 
```

`[abc]`用于在提供的集合中选择一个字符，用途`a-zA-Z0-9`是匹配任何字母（大写或小写）或数字。
`{n}`用于重复之前的选择器`n`时间。

### 4：空间

```
/^TE1310 [a-zA-Z0-9]{8} / 
```

### 5：第三组正好包含 16 个字符。可以是数字或字母

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16}/ 
```

### 6：空间

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16} / 
```

### 7：第 4 组必须准确`0013.0002.0000`

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16} 0013\.0002\.0000/ 
```

`\.`用于转义`.`which 是任何非换行符的选择器。如果您在字符串中构建正则表达式，您可能需要对`\`字符进行双重转义，因此它可能`\\.`不是`\.`

### 8：空间

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16} 0013\.0002\.0000 / 
```

### 9：第 5 组也是最后一组包含 8 个字符。仅限数字

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16} 0013\.0002\.0000 \d{8}/ 
```

`\d`匹配数字，相当于`[0-9]`. 与您类似，`\.`您可能需要对`\`字符进行双重转义，这将是`\\d`相反的。

### 10：字符串结束

你没有明确提到它，但我认为匹配应该只匹配与此模式完全匹配的行，并且后面不跟尾随数字/字母：

```
/^TE1310 [a-zA-Z0-9]{8} [a-zA-Z0-9]{16} 0013\.0002\.0000 \d{8}$/ 
```

`$`用于匹配字符串的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:44:06.487

`#7`是微不足道的，应该只是`0013\.0002\.0000` 你必须确保转义你的时期，并转义你的转义字符，如果这是语言所要求的

所以，试试

`TE1310\s[A-Za-z0-9]{8}\s[A-Za-z0-9]{16}\s0013\.0002\.0000\s\d{8}`

当然，假设其余的点是正确的。

此外，`Sednus`如前所述，您可能希望匹配字符串的开头和结尾。常规符号`^`用于开头和`$`结尾，但我会检查您的特定语言的参考以防万一。

如果您不这样做，正则表达式将`TE1310 2000183B 804F58000020183B 20120509 0013.0002.0000 20161201`在更大的字符串中找到任何内容，例如

`asgsdaTE1310 2000183B 804F58000020183B 20120509 0013.0002.0000 20161201qeasdfa`

# python - 如何将微秒时间戳转换为日期时间？

> ID：12589952
> 
> 赞同：9
> 
> 时间：2012-09-25T19:41:21.310
> 
> 标签：python, datetime, timestamp

我正在从 Google Chrome 中提取 cookie 的过期日期。从外观上看，Chrome 正在存储 cookie 过期时间，其时间戳使用 1601-01-01 00:00:00 UTC 作为纪元。我目前的实现如下：

```
stamp = int(result[3])
date = datetime.datetime.fromtimestamp(stamp / 10000000.0)
print date.year 
```

但是，这会产生错误的日​​期（大约一年）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T20:52:08.400

另一种选择，`tzinfo`从 Python 3.2 以来的标准库中获取（对于较旧的 Python 版本，您可以从 获取[`pytz`](http://pypi.python.org/pypi/pytz/)）：

```
>>> import pytz
>>> from datetime import datetime, timedelta, timezone
>>> epoch = datetime(1601, 1, 1, tzinfo=timezone.utc)
>>> cookie_microseconds_since_epoch = 13022344559000000
>>> cookie_datetime = epoch + timedelta(microseconds=cookie_microseconds_since_epoch)
>>> str(cookie_datetime)
'2013-08-29 13:55:59+00:00' 
```

我假设您的预期值的差异是时区偏移量。

**更新：**

正如@JFSebastian 正确指出的那样，如果您使用的是隐式 UTC*天真* `datetime`对象，那么`tzinfo`是多余的，上面可以简化为：

```
>>> from datetime import datetime, timedelta
>>> epoch = datetime(1601, 1, 1)
>>> cookie_microseconds_since_epoch = 13022344559000000
>>> cookie_datetime = epoch + timedelta(microseconds=cookie_microseconds_since_epoch)
>>> str(cookie_datetime)
'2013-08-30 13:55:59' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:24:53.300

我不确定您从什么数据开始，但这里是一个从整数时间戳开始的示例。假设`pytz`模块存在（我强烈推荐）。

```
>>> import datetime, pytz
>>> x = datetime.datetime.fromtimestamp(0)
>>> x = x.replace(tzinfo=pytz.UTC)
>>> str(x)
'1970-01-01 00:00:00+00:00'
>>> d = datetime.timedelta(365 * (1970 - 1601))
>>> str(x - d)
'1601-03-31 00:00:00+00:00'
>>> d = datetime.timedelta(365 * (1970 - 1601) + 31 + 28 + 31 - 1)
>>> str(x - d)
'1601-01-01 00:00:00+00:00'
>>> str(d)
'134774 days, 0:00:00' 
```

所以你有它。1601 年 1 月 1 日纪元和 1970 年 1 月 1 日纪元之间的换算为 134774 天。

为什么会有这样的天数？闰年！我们增加了一定的天数，而不是年数。（事实上​​，对象[中并不直接支持添加年份](http://docs.python.org/library/datetime.html#timedelta-objects)`timedelta`。）

# asp.net-mvc - 使用 Entity Framework 和 Automapper 将记录从一个实体复制到另一个实体时出错

> ID：12589957
> 
> 赞同：0
> 
> 时间：2012-09-25T19:41:46.773
> 
> 标签：asp.net-mvc, entity-framework, automapper

我正在尝试使用 EF5、MVC 和 Automapper 将记录从一个表移动到另一个匹配的（几乎）表中。这段代码是我正在使用的：

在我的全球应用程序中_开始

```
//Create Map and manually map StatusCode to Status
            Mapper.CreateMap<InstitutionStaging, InstitutionStaging_Archive>()
               .ForMember(dest => dest.Status,o =>o.MapFrom(src=>src.StatusCode)); 
```

在我的控制器中

```
 private MyContext db = new MyContext();

   Public ActionResult ArchiveMe(int id = 0){

  var institutionstaging = db.InstitutionStagings.Find(id);

        if (institutionstaging == null)
        {
            return HttpNotFound();
        }
        if (ModelState.IsValid)
        {  

            var institutionArchive = Mapper.Map<InstitutionStaging, InstitutionStaging_Archive>(institutionstaging);
            //Set Archive date to now.
            institutionArchive.ArchiveDate = DateTime.Now;
//Error happens on the next line
db.InstitutionStaging_Archives.Add(institutionArchive);

            db.InstitutionStagings.Remove(institutionstaging);
            db.Entry(institutionArchive).State = EntityState.Added;
            //Commit the changes
            var result = db.SaveChanges();
            }
} 
```

当它到达标记为*“此处发生错误==>”*的行时，我收到以下错误消息。

```
{"The entity type InstitutionStaging_Archive is not part of the model for the current context."} 
```

MyContext 包含 InstitutionStaging 和 InstitutionStaging_Archive 的 DbSet。

知道发生了什么吗？蒂亚杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:28:07.007

此错误通常不是 AutoMapper 的问题，而是您的实体框架模型设置的问题。

可能是因为您使用了错误的连接字符串，也可能是因为您没有正确映射模型。

因为我们不知道你的模型是什么，你的数据库是什么样的，或者你的映射是怎样的……除此之外无济于事。

为了向自己证明这一点，只需注释掉自动映射器的内容并手动完成，我很确定你会得到同样的错误。

# php - PHP日期不会添加

> ID：12589958
> 
> 赞同：0
> 
> 时间：2012-09-25T19:41:47.747
> 
> 标签：php, datetime

我的问题是 Enddate 不会添加到我的数据库中，但空间和 startdate 添加就好了。

```
<?php
    include("config.php");
    $space=$_POST['space'];
    $startdate = date("Y-m-d");
    $enddate= "date('Y-m-d', strtotime($Date. ' + 7 days'))";

    $query="insert into reservation (Sublessee_space,Res_startdate,Res_enddate) values('$space','$startdate','$enddate')";
    mysql_query($query);
    mysql_close($server);
    header('location:approve.php');
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:43:19.623

`$enddate`是字符串，不是日期。删除`"`它周围的引号，以便 PHP 将执行。

由此：

```
$enddate= "date('Y-m-d', strtotime($Date. ' + 7 days'))"; 
```

对此：

```
$enddate= date('Y-m-d', strtotime($Date. ' + 7 days')); 
```

# sql - SQL 空 IN 语句

> ID：12589961
> 
> 赞同：0
> 
> 时间：2012-09-25T19:41:59.580
> 
> 标签：sql

如果我编写以下查询会发生什么：

```
SELECT *
FROM table
WHERE name IN (select name from someotherTable where id = 3) 
```

并且内部查询（在 IN 语句内）不返回结果集

外部 where 会自动评估为 True 还是 False？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:42:49.980

这将返回一个空集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:47:13.980

让我们测试一下；

```
CREATE TABLE TableA ( id INT );
INSERT INTO TableA VALUES (1);
CREATE TABLE TableB ( id INT );
SELECT * FROM TableA
  WHERE id IN (SELECT * FROM TableB);

(empty set) 
```

# c - 在传输过程中打印百分比

> ID：12589962
> 
> 赞同：0
> 
> 时间：2012-09-25T19:42:04.247
> 
> 标签：c, progress, percentage

这段代码是我开发的 FTP 客户端的一部分：

```
 for(size_to_receive = file_size; size_to_receive > 0;){
    nread = read(f_sockd, filebuffer, size_to_receive);
    if(nread < 0){
      perror("read error on retr");
      close(fd);
      return -1;
    }
    if(write(fd, filebuffer, nread) != nread){
      perror("write error on retr");
      close(fd);
      return -1;
    }
    size_to_receive -= nread;
  } 
```

我想实现下载文件的百分比，但我有一些问题。我试过这种方法：

```
 for(size_to_receive = file_size; size_to_receive > 0;){
    nread = read(f_sockd, filebuffer, size_to_receive);
    tx += nread;
    printf("%d%%\n", (tx * 100 / file_size));
    fflush(NULL);
    if(nread < 0){
      perror("read error on retr");
      close(fd);
      return -1;
    }
    if(write(fd, filebuffer, nread) != nread){
      perror("write error on retr");
      close(fd);
      return -1;
    }
    size_to_receive -= nread;
  } 
```

但我不喜欢它，因为当传输开始时，会立即打印“20%”，而且如果我删除`\n`from `20%%\n`-`40%%\n`等，这些值会在传输结束时打印，而不是立即打印。

如何开发更好的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:47:49.333

```
for (size_to_receive = file_size; size_to_receive > 0;) {
    nread = read(f_sockd, filebuffer, size_to_receive);
    tmp_xc += nread;

    printf("%d%%\r", (tmp_xc * 100 / file_size));
    fflush(NULL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:51:15.873

您可以使用**ncurses**：[如何创建类似命令行进度条的 WGet](http://juhaku.blogspot.com.br/2011/03/how-to-create-wget-like-command-line.html)

# sql - 针对先前查询结果的 T-SQL 查询

> ID：12589963
> 
> 赞同：1
> 
> 时间：2012-09-25T19:42:19.707
> 
> 标签：sql, sql-server, tsql

我很难在互联网上搜索这个，所以想我会在这里问 T-SQL 问题。我有一张叫 CUST 的桌子。CUST 包含客户输入日期、姓名、公司、地址、电子邮件等。我写了一个简单的查询来根据 entrydate 查找新客户；

```
Select * from CUST WHERE ENTRYDATE between '2012-08-01' and '2012-08-30' 
```

这很好用，除了我发现了一个问题。当我们的网上商店创建新订单时，如果客户详细信息不完全匹配，则会创建一个新客户。在这种情况下，如果我有多个 cust.firstname + cust.lastname + cust.company，我想获取我的原始结果，并修剪结果集。我可以在单独的查询中编写这些，只是不确定如何在单个 sql 脚本中执行此操作。

我考虑过将名称连接回表，虽然连接没有错误，但我不知道如何计算出现次数，我正在考虑计算客户数量。

我的加入看起来像这样（剥离了分组依据和列选择以使其更易于阅读；

```
from CUST
    Right Outer Join 
    (
    select *
    from CUST 
    WHERE ENTRYDATE between '2012-08-01' and '2012-08-30'
            AND LTRIM(RTRIM(Firstname + Lastname + Company)) <> ''
    Group By *     
    ) as newcs

    on LTRIM(RTRIM(CUST.Firstname + CUST.Lastname + CUST.Company)) = LTRIM(RTRIM(newcs.Firstname + newcs.Lastname + newcs.Company)) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:10:27.447

如果您要删除重复记录，可以使用以下脚本：

```
DELETE FROM Customer
WHERE PKCol IN 
(    
    SELECT PK_Column FROM 
    ( 
        SELECT ROW_NUMBER() OVER(PARTITION BY FirstName, LastName, Company ORDER BY EntryDate) AS RN, PK_Column
        FROM Customers
    ) A
    WHERE A.RN > 1 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:34:20.237

在本报告期之前未输入的当前时间段内的不同记录：

```
SELECT DISTINCT c1.*
FROM @CUST c1
WHERE c1.ENTRYDATE BETWEEN '2012-08-01' AND '2012-08-30'
AND NOT EXISTS (SELECT 1 
    FROM @CUST c2 
    WHERE c2.ENTRYDATE < '2012-08-01'
    AND LTRIM(RTRIM(c1.Firstname + c1.Lastname + c1.Company)) = LTRIM(RTRIM(c2.Firstname + c2.Lastname + c2.Company))
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:38:16.847

此查询仅产生具有不同（修剪）FirstName+LastName+Company 的**最新客户**

```
SELECT FirstName,LastName,Company,EntryDate FROM(
    SELECT *, R=ROW_NUMBER() OVER (PARTITION BY ID ORDER BY EntryDate DESC) FROM(
        SELECT FirstName,LastName,Company , EntryDate, ID= LTRIM(RTRIM(FirstName)) + LTRIM(RTRIM(LastName)) + LTRIM(RTRIM(Company))
         FROM CUST
        WHERE EntryDate BETWEEN '2012-08-01' and '2012-08-30'
        ) AS a
    ) AS b
WHERE R=1 
```

如果您需要取最旧的，请删除从句`DESC`后的部分`ORDER BY`

# python-3.x - 嵌套 for 的模式

> ID：12589966
> 
> 赞同：0
> 
> 时间：2012-09-25T19:42:34.600
> 
> 标签：python-3.x

如果输入为 3，我如何实现以下模式？

AA

BBAA

AABBAA

我能得到的最远的是：

AA

BBBB

AAAAAA

我尝试了以下方法：

```
#mod operator used to alternate patterns

pattern_size = int (input ("Input height : "))
for level in range (1, pattern_size +1):
    for x in range (level):
        # print AA if remainder != 0
        if level % 2 != 0:
            print ("AA", end = '')

        # print BB if remainder = 0
        if level % 2 == 0:
            print ("BB", end = '') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:28:07.643

我想这是一个家庭作业，如果你自己找到解决方案，你会得到更多。

首先，如果要交替`AA`和`BB`在同一层打印时，必须依赖`x`（因为`x`改变时`level`不改变）。此外，每个级别都以不同的模式开始。这种方式你可能想要测试`(level + x) % 2 == 0`（选择简单的测试方式）。如果布尔表达式为真，则打印一个模式，否则打印另一个。

不要忘记循环`print()`后没有参数。`x`

我更喜欢简单地使用`range()`-- 一个参数。如果`pattern_size`为 3，则第一个循环可以通过级别 0、1、2。但是，第二个`for`循环必须至少循环一次。然后你必须通过`range(level + 1)`。

# wcf-security - 在 WCF 中使用基于角色的授权时将安全异常传递回客户端

> ID：12589969
> 
> 赞同：1
> 
> 时间：2012-09-25T19:43:00.673
> 
> 标签：wcf-security

我正在创建当前作为进程托管但最终将成为服务的 WCF（带回调）服务。我在 Windows 域环境中使用 netTCP 绑定，并且客户端位于域内的另一台机器上（Windows 窗体客户端）。我拥有在传输级别使用 Windows 安全性和 SPN 的所有绑定、方法等。

我现在正在实施安全性并尝试在某些方法上使用此模式（并非所有方法都需要保护）：

```
<PrincipalPermission(SecurityAction.Demand, Role="MyDomain\DataReader")>
public Function GetData() As String

    return "Test String"
End Function 
```

（示例）这正确地允许用户并阻止那些没有角色的人。

我的问题是在服务端引发了异常（我可以在 VS 中看到这一点，因为进程是从那里运行的）。客户端没有收到安全异常，而是超时。

我如何正确地将发生安全异常的情况传回给调用者，以便我可以将消息传递给用户。

# ruby-on-rails - 读入文件内容 rails

> ID：12589973
> 
> 赞同：9
> 
> 时间：2012-09-25T19:43:17.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有一个表单试图读取 JSON 文件以进行解析/操作/等。我在控制器中读取它时遇到问题。

看法：

```
<%= form_tag({:controller => :admins, :action => :upload_json}, {:multipart => true, :method => :post}) do |f| %>

    <%= file_field_tag 'datafile' %>

<%= submit_tag "Upload" %> 
```

控制器：

```
def upload_json

  file_data = params[:datafile]

  File.read(file_data) do |file|

     file.each do |line|
       ## does stuff here....
     end
  end

end 
```

当我播种数据时，类似的功能在我的`seed.rb`文件中起作用 - 只是无法让它在上传的文件中读取。

我得到的错误是：`can't convert ActionDispatch::Http::UploadedFile into String`。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T20:10:55.150

弄清楚了。需要改变：

```
file_data = params[:datafile] 
```

到

```
file_data = params[:datafile].tempfile 
```

并决定用`.open`函数来改变：

```
File.read(file_data) do |file| 
```

到

```
File.open(file_data, 'r') do |file| 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:12:43.847

params[:datafile] 是 ActionDispatch::Http::UploadedFile 类的一个实例，带有附加的临时文件。打开临时文件

你尝试类似的东西

```
File.open(params[:datafile].path) do |file|
 #your stuff goes here
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-02T14:53:19.653

### 使用 . 打开上传的文件`path`。

`params[:datafile]`是[`ActionDispatch::Http::UploadedFile`](http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html)类的一个实例，您需要通过调用`path`来正确处理它来获取存储的文件。

此外，`File.read`不会为您提供您正在寻找的逐行处理。您需要将其更改为`File.open`.

试试这个：

**控制器**

```
def upload_json

  uploaded_datafile = params[:datafile]

  File.open( uploaded_datafile.path ) do |file|

     file.each_line do |line|

       # Do something with each line.

     end

  end

end 
```

### 另类风格

```
def upload_json

  File.foreach( params[:datafile].path ) do |line|

    # Do something with each line.

  end 

  # FYI: The above method block returns `nil` when everything goes okay.

end 
```

# c++ - 如何为多播指定所有接口？

> ID：12589974
> 
> 赞同：1
> 
> 时间：2012-09-25T19:43:18.210
> 
> 标签：c++, network-programming, multicast, lan

我有两个使用多播的程序（MS VC++）——接收者和发送者。我通过 WiFi 在台式机 (Windows 7) 和上网本 (Windows XP) 之间进行测试。台式 PC 具有在 AP 模式下工作的 WiFi 加密狗。如果我在发送程序的接口地址中指定 INADDR_ANY，我会遇到一个问题：多播无法从台式 PC 到达上网本。如果我指定此 WiFi 接口的真实地址而不是 INADDR_ANY - 它工作正常。

所以，我希望我的发送程序可以在所有接口上工作。我怎么能做到这一点？我必须为每个接口初始化单独的套接字？或者它可能有更优雅的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:15:17.193

正如以前的人所说，您必须明确选择输出接口。如果要同时多播到不同的接口，则需要多个套接字。在 boost::asio 中，对应的调用是：

```
boost::asio::ip::udp::socket*  _write;
...
_write->set_option( ip::multicast::outbound_interface( ifAddr.to_v4())); 
```

# python - os.path.getsize 报告最后带有 L 的文件大小，为什么？

> ID：12589976
> 
> 赞同：11
> 
> 时间：2012-09-25T19:43:24.200
> 
> 标签：python, dictionary, filesize, directory

```
import os, sys

def crawlLocalDirectories(directoryToCrawl):
    crawledDirectory = [os.path.join(path, subname) for path, dirnames, filenames in os.walk(directoryToCrawl) for subname in dirnames + filenames]
    return crawledDirectory

print crawlLocalDirectories('.')

dictionarySize = {}
def getSizeOfFiles(filesToMeasure):
    for everyFile in filesToMeasure:
        size = os.path.getsize(everyFile)
        dictionarySize[everyFile] = size
    return dictionarySize

print getSizeOfFiles(crawlLocalDirectories('.')) 
```

每当运行此程序时，我都会得到 的输出`{'example.py':392L}`，为什么？什么是L？我不想在最后把 L 去掉。

如果我在不将其添加到字典的情况下运行它，它会返回文件大小为`392`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T20:47:47.320

这仅显示或在交互模式下或当您通过`repr()`. 正如 zigg 所写，您可以简单地忽略它。考虑这是一个实现细节。当区分普通 int 和 long int 很重要时，它可能很有用。例如，在 Python 3 中，没有`L`. 不管有多大，int 都是 int ：

```
d:\>py
Python 3.2.1 (default, Jul 10 2011, 20:02:51) [MSC v.1500 64 bit (AMD64)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> a = 100000000000000000000000000000000000000000000
>>> a
100000000000000000000000000000000000000000000
>>> ^Z

d:\>python
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> a = 100000000000000000000000000000000000000000000
>>> a
100000000000000000000000000000000000000000000L
>>> 
```

请注意`L`Python 2.7 中的 ，但 Python 3.2 中没有类似的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T19:57:05.150

尾随`L`意味着你有一个[`long`](http://docs.python.org/library/stdtypes.html#typesnumeric). 您实际上总是拥有它，但是`print`ing a`dict`将显示值的可打印表示，包括`L`符号；但是，打印 a`long`本身只显示数字。

您几乎可以肯定不需要担心剥离尾随`L`; 您可以`long`在所有计算中使用 a ，就像使用 a 一样`int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T19:42:30.770

这是 pepr 的回答，但如果你真的需要，你可以使用 int() 函数，它也适用于大整数

```
Python 2.7.3 (default, Jul 24 2012, 10:05:39) 
[GCC 4.7.0 20120507 (Red Hat 4.7.0-5)] on linux2
>>> import os
>>> os.path.getsize('File3')
4099L 
```

但是，如果您自动输入函数 int()：

```
>>> int(os.path.getsize('File3'))
4099 
```

# jquery - 使用 jQuery 选择同级元素

> ID：12589980
> 
> 赞同：2
> 
> 时间：2012-09-25T19:43:31.033
> 
> 标签：jquery, jquery-selectors

您好，感谢您花时间回答我的问题。欣赏它。

假设我有以下 HTML：

```
<div>
    <div class="selectWrapper">
        <select class="selectable">...</select>
    </div>
    <input />
    <input />
    <input class="thisIsTheInputFieldThatIWantToSelect" />
</div> 
```

我有以下 jquery 脚本：

```
$('.selectable').bind('change', function(){
    if($(this).val() > 1){
        $(this).parent().next().next().val('').addClass('validate[required]');
    } else {
        $(this).parent().next().next().val("Type your KPI's description").removeClass('validate[required]');
    }
}); 
```

基本上，选择选项时（除了值0的默认值为0）时，我想要使兄弟输入需要并清空它的值。请看看我上面的尝试。第一种和第二种方式都不起作用。但是，第三种方法根据所选选项使用特定颜色绘制持有者 div。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:46:59.833

如果“.personalWellbeing”是您的选择元素...

```
$(this).parent().siblings('.thisIsTheInputFieldThatIWantToSelect').val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:50:19.133

您可以使用 nth-child() 函数。 [http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

例如：$(this).parent().('input :nth-child(3)')

# scripting - Crystal Reports & VBScript - 找不到自动化类

> ID：12589982
> 
> 赞同：1
> 
> 时间：2012-09-25T19:43:44.713
> 
> 标签：scripting, vbscript, crystal-reports, automation, crystal-reports-2008

首先，我对水晶报表的经验很少，所以如果这是一个愚蠢的问题，请提前道歉。当一位同事离开时，我把这个“了不起的”工作项目丢给了我，所以我希望有人能提供帮助，因为我发现的大多数 Business Objects 链接可能只有重定向到通用 SAP 启动页面的解决方案。

所以我有几百个存储在服务器上的 Crystal Reports（主要是 File Schema 10.2，虽然有些是 8.5 或 12.0）。它们都有一个关联的 VBScript 文件，该文件以下列方式调用它们：

```
Set AppCrystal = WScript.CreateObject("CrystalRuntime.Application.10")

Set CrystalReport = AppCrystal.OpenReport("<file path to report>")
Set CrystalOptions = CrystalReport.exportOptions
CrystalOptions.DestinationType = 1
CrystalOptions.FormatType = 36
CrystalOptions.DiskFileName = "<file path to output excel file>"
CrystalReport.Export False 
```

根据BO的说法，这应该是正确的。请参阅以下有关 CR API 的链接：

[http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel62.html](http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel62.html)

[http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel151.html#1387900](http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel151.html#1387900)

[http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel8.html#1646326](http://devlibrary.businessobjects.com/businessobjectsxi/en/en/RDC_SDK/rdc_com_dg_doc/doc/rdcsdk_com_doc/RDC_ObjectModel8.html#1646326)

所以基本上脚本只是执行报告并将其输出到 Excel 文件。这在旧服务器上效果很好，但是当我尝试在新服务器上执行此脚本时，我收到以下错误：

![CR错误](../Images/1f0377671b4d6fb6582ab8e36a0e1c4f.png)

我认为这是因为我需要安装某种运行时组件，但我终生无法弄清楚是什么。我找到了这个页面：[https ://wiki.sdn.sap.com/wiki/pages/viewpage.action?pageId=56787567](https://wiki.sdn.sap.com/wiki/pages/viewpage.action?pageId=56787567)

但是我尝试下载的文件都没有工作，坦率地说，我发现 SAP 文档在这方面低于标准。我确实有可用的 Crystal Reports 2008，所以如果我需要更新 vbscript 以使用**CrystalRuntime.Application.12**或其他东西，然后在服务器上安装 Crystal Reports 2008 的最新运行时文件，那很好。但我仍然需要知道要使用哪些运行时文件？我找不到任何工作。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:56:29.103

显然，这种对 Crystal 报表的调用使用 RDC 报表引擎，不幸的是 CR 10 不再可用。您仍然可以获得 CR XI R2，它仍然部署了 RDC，它的版本是 11.5。

CR 2008 中没有 RDC，它实际上在 CR 9 中已被弃用，现在不再发货。

您唯一的其他选择是将您的应用程序转换为使用 Visual Studio .NET 并使用当前的 CR 2008 或 CR 之一用于 VS 2010 组件并将您的应用程序重写为 .NET Framework。

不再支持 VB 脚本，但那只是开发语言......

我最终只是升级到 CR 2008，并使用 .NET 控制台项目来替换 VB 脚本。

# service - 如何通过 API 进行注册只能用于人类？

> ID：12589986
> 
> 赞同：0
> 
> 时间：2012-09-25T19:44:04.823
> 
> 标签：service, web

我制作 Web 服务 (JSON) 和使用此服务的网站。本网站使用“注册”服务功能在网站上注册用户。而且我不想制作验证码，因为它打字很无聊并且在打字时容易出错，而且我只能在注册过程中失去我的客户。因此，它很容易制作将注册 [user00000@haha.com .. user99999@hehe.com] 假帐户愤怒的应用程序。如何在不输入 CAPTCHA 的情况下避免这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:48:21.593

您可以使用几种不同的方法，或者将它们组合使用：

您可以让您的用户执行基本数学运算而不是验证码。

您还可以使用 javascript 来检测机器人，因为机器人通常使用直接的 HTTP 请求，但是客户端 javascript 需要真正的浏览器才能执行：

[http://www.kalzumeus.com/2010/06/07/detecting-bots-in-javascrip/](http://www.kalzumeus.com/2010/06/07/detecting-bots-in-javascrip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:51:03.323

CAPTCHA 有一些不错的替代品，例如[this](http://areyouahuman.com/demo/)和[this](http://keypic.com/?tid=homepage_what_is)以及[this](http://drivingtraffic.com/replace-capthca/)和[this （顺便说一句，您可以](http://www.formarmor.com/)[在这里](http://www.arraystudio.com/as-workshop/the-captcha-alternatives.html)找到不同的替代-CAPTCHA - 并非所有这些都“难以”使用！）。

此外，还有一些替代的验证码，而不是显示扭曲的字符 - 给你一个简单的算术方程，例如：`3+7=`你必须输入正确的结果。

# asp.net-mvc-4 - ASP.NET MVC Web Api 获取未将 QueryString 映射到强类型参数

> ID：12589988
> 
> 赞同：25
> 
> 时间：2012-09-25T19:44:25.347
> 
> 标签：asp.net-mvc-4, asp.net-web-api

使用 Web API 时参数请求始终为空。我是否缺少使用强类型对象作为参数而不是简单类型作为参数的东西。

**网址**

```
http://localhost:2222/api/v1/divisions?EventId=30 
```

**控制器动作**

```
public virtual ApiDivisionsResponse Get(ApiDivisionsRequest request)
        {
            return _apiDivisionsService.GetDivisions(request);
        } 
```

**目的**

```
public class ApiDivisionsRequest : ApiAuthorizedRequest
    {
        public ApiDivisionsRequest()
        {
            Page = 1;
            PageSize = 10;
        }

        public int EventId { get; set; }
        public int PageSize { get; set; }
        public int Page { get; set; }
        public string[] Includes { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-25T19:49:57.197

我强烈邀请您阅读[以下文章](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)，以更好地了解参数绑定在 Web API 中的工作原理。读完你就会明白，默认情况下，Web API 将查询字符串参数绑定到原始类型，并将请求正文内容绑定到复杂类型。

因此，如果您需要将查询字符串参数绑定到复杂类型，则需要通过使用参数装饰参数来覆盖此默认行为`[FromUri]`：

```
public virtual ApiDivisionsResponse  Get([FromUri] ApiDivisionsRequest request)
{
    ...
} 
```

是的，我同意你的看法——这真是一团糟——模型绑定在普通的 ASP.NET MVC 中非常容易，他们在 Web API 中制造了一场噩梦。但是一旦你知道它是如何工作的，你就会避免陷阱。

# android - ArrayList 未填充在 AsyncTask 中

> ID：12589993
> 
> 赞同：1
> 
> 时间：2012-09-25T19:44:43.857
> 
> 标签：android, android-asynctask

在我的 AsyncTask 中，我使用 Jsoup 从网页中提取所有 p 标签，然后将它们添加到 ArrayList 中，然后 ArrayAdapter*应该*使用该 ArrayList 来用帖子填充屏幕，但由于某种原因，ArrayList 是当我在方法之后检查它时为空。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    newsItems = new ArrayList<String>();

    fillNewsItems();
    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1,
            newsItems));
    Log.d("news", Integer.toString(newsItems.size()));
}

private class GetNewsItemsTask extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... urls) {
        try {
            Document doc = Jsoup.connect(URL).get();
            for (Element e : doc.getElementsByTag("p")) {
                newsItems.add(e.text());
            }
        } catch (Exception e) {     
            Toast.makeText(getApplicationContext(), "Couldn't fetch articles, try again later.",
                    Toast.LENGTH_SHORT).show();
        }           
        return null;
    }
}

private void fillNewsItems() {
    GetNewsItemsTask getNews = new GetNewsItemsTask();
    getNews.execute(URL);
}
} 
```

有谁知道为什么 onCreate 中的日志语句返回 0，而我的列表是空的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:18:37.790

[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)有比你现在使用的更多的可能性。基本上 AsyncTask 是一个线程（默认情况下不能更改 UI 元素），但它提供了一个特殊功能：它与方法中的 UI 线程同步`onPostExecute()`。

所以你可以用它来设置`ArrayAdapter`里面的`AsyncTask`. 随意使用`onPreExecute()`来显示信息对话框。

这段代码应该是诀窍：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    fillNewsItems();

    Log.d("news", Integer.toString(newsItems.size()));
}

private class GetNewsItemsTask extends AsyncTask<Void, Void, ArrayList<String>> {

    protected ArrayList<String> doInBackground(Void... urls) {
        try {
            ArrayList<String> items = new ArrayList<String>();
            Document doc = Jsoup.connect(URL).get();
            for (Element e : doc.getElementsByTag("p")) {
                items.add(e.text());
            }
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Couldn't fetch articles, try again later.",
                    Toast.LENGTH_SHORT).show();
        }
        return items;
    }

    @Override
    protected void onPostExecute(ArrayList<String> items) {
        newsItems = items; // I assume that newsItems is used elsewhere.
                           // If that's not the case -> remove it
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,
                items));
    }
}

private void fillNewsItems() {
    GetNewsItemsTask getNews = new GetNewsItemsTask();
    getNews.execute();
} 
```

这是一个关于 Android 异步编程的好教程：[Android Threads, Handlers and AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:29:42.523

很可能是因为 AsyncTask 尚未完成执行。AsyncTask 就是这样，异步的。它同时在后台运行。看起来您希望您的代码`fillNewsItems()`在 AsyncTask 完成之前一直阻塞，而实际上它几乎立即返回，就在启动 AsyncTask 之后。因此，当您尝试获取列表的大小时，它仍然为零，AsyncTask 尚未完成。