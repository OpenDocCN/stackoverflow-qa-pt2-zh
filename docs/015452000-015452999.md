# StackOverflow 问答 15452000-15452999

# architecture - 什么时候在 Varnish + ESI 架构中使用 memcached 才有意义？

> ID：15452003
> 
> 赞同：0
> 
> 时间：2013-03-16T16:58:11.440
> 
> 标签：architecture, memcached, varnish

我对 Varnish 很陌生，但是在阅读了[文档](https://www.varnish-cache.org/trac/wiki/ESIfeatures)之后，在我看来 ESI 功能消除了对 memcached 服务器的大部分需求：可以从几个 ESI 包含动态构建一个网页，每个都将被缓存适当地由 Varnish（例如，一个主页可能由一个相当静态的布局构建，该布局将被缓存很长时间，以及一个包含今天新闻的更动态的部分，仅缓存几个小时）。

我猜想在 Varnish 中而不是在 App 服务器中（使用 memcached）构建网页的性能优势可能会很大，尽管我还没有测试过。

我错过了什么吗？在什么情况下你会推荐仍然使用 memcached 来生成网页？如果多个网页使用相同的繁重的数据库请求但不以相同的方式呈现结果，也许可以作为数据库缓存？还有什么想法吗？

感谢您的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:54:45.180

通常它是页面的动态部分，即您将通过 ESI 请求加载的部分，是页面上最重的部分。这就是为什么您很可能还需要在应用服务器上缓存页面的动态部分。即使前面没有 Varnish，应用程序的静态部分也可能很快加载。

是使用 memcached 还是其他类型的缓存（例如文件缓存）几乎是个人喜好问题。与往常一样，在开始缓存内容之前，您需要分析查询、优化查询并确保索引正常工作。如果某些查询仍然过于繁重并导致第一页加载显着延迟，则可能值得将它们移动到将结果存储在摘要表中的计划任务中，并从那里在应用程序中提供内容。

在任何情况下，您都可以（并且应该）使用 Varnish 缓存 ESI 包含的内容，如[Varnish wiki](https://www.varnish-cache.org/trac/wiki/ESIfeatures)所示：

```
sub vcl_fetch {
    if (req.url == "/test.html") {
        esi;  /* Do ESI processing */
        set obj.ttl = 24 h;
    } elseif (req.url == "/cgi-bin/date.cgi") {
        set obj.ttl = 1m;
    }
} 
```

# json - 我的结构没有编组为 json

> ID：15452004
> 
> 赞同：17
> 
> 时间：2013-03-16T16:58:12.030
> 
> 标签：json, go

我在 Mac OS X 10.8.2 上使用 Go 1.0.3，我正在试验这个`json`包，试图将一个结构编组为 json，但我一直得到一个空的`{}`json 对象。

该`err`值为nil，所以根据`json.Marshal`函数没有错，结构是正确的。为什么会这样？

```
package main

import (
  "encoding/json"
  "fmt"
)

type Address struct {
  street string
  extended string
  city string
  state string
  zip string
}

type Name struct {
  first string
  middle string
  last string
}

type Person struct {
  name Name
  age int
  address Address
  phone string
}

func main() {
  myname := Name{"Alfred", "H", "Eigenface"}
  myaddr := Address{"42 Place Rd", "Unit 2i", "Placeton", "ST", "00921"}
  me := Person{myname, 24, myaddr, "000 555-0001"}

  b, err := json.Marshal(me)

  if err != nil {
    fmt.Println(err)
  }

  fmt.Println(string(b))    // err is nil, but b is empty, why?
  fmt.Println("\n")
  fmt.Println(me)           // me is as expected, full of data
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-16T16:59:58.600

您必须公开要编组的字段。像这样：

```
type Address struct {
  Street string
  Extended string
  City string
  State string
  Zip string
} 
```

`err`是`nil`因为所有导出的字段（在这种情况下没有）都已正确编组。

工作示例： https: [//play.golang.org/p/9NH9Bog8_C6](https://play.golang.org/p/9NH9Bog8_C6)

查看文档[http://godoc.org/encoding/json/#Marshal](http://godoc.org/encoding/json/#Marshal)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-05T04:38:05.553

请注意，您还可以通过执行以下操作来操作生成的 JSON 中字段的名称：

```
type Name struct {
  First string `json:"firstname"`
  Middle string `json:"middlename"`
  Last string `json:"lastname"` 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T14:35:49.527

JSON 库无法查看结构中的字段，除非它们是公共的。在你的情况下，

```
type Person struct {
  name Name
  age int
  address Address
  phone string
} 
```

字段名称、年龄、地址和电话不公开（以小写字母开头）。在 golang 中，变量/函数是公共的，当它们以大写字母开头时。因此，要使其正常工作，您的结构需要看起来像这样：

```
type Person struct {
  Name Name
  Age int
  Address Address
  Phone string
} 
```

# java - 如何使 Android ImageView 部分透明

> ID：15452009
> 
> 赞同：2
> 
> 时间：2013-03-16T16:58:42.420
> 
> 标签：java, android, transparency, visibility, transparent

我的应用程序中有一些 ImageViews 并且想让它们中的一些部分透明，它们不应该全部消失。我知道 setVisibility() 和 setAlpha() 方法，但第一个显然不是我想要做的，Eclipse 告诉我第二个已“弃用”。所以我想知道，是否有一种新方法可以替代 setAlpha() 方法？谢谢 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T17:00:23.013

**改为使用[`setImageAlpha(int)`](http://developer.android.com/reference/android/widget/ImageView.html#setImageAlpha%28int%29)。**

请注意，还有[`setAlpha(float)`](http://developer.android.com/reference/android/view/View.html#setAlpha%28float%29), 它适用于所有`View`s，并且已在 API 级别 11 中引入。

# randomaccessfile - 将数据写入 RandomAccessFile

> ID：15452011
> 
> 赞同：0
> 
> 时间：2013-03-16T16:58:47.757
> 
> 标签：randomaccessfile

在我的项目中，我需要为每个学生创建一个文件，我认为我已经创建了方法，如下所示

```
 public addStudent(String fullName, int grn, String formClass, String formTeacher)
    {
        //Default values
        int creativity = 0;
        int action = 0;
        int service = 0;
        int total = 0;

        //Initialize File
        RandomAccessFile adding     = new RandomAccessFile(new File(fullName + ".dat"), "rw");
        long fileSize = adding.length();
        adding.seek(fileSize);

        //Variables from Method
        adding.writeUTF(fullName + "\n");
        adding.writeInt(grn + "\n");
        adding.writeUTF(formClass  + "\n");
        adding.writeUTF(formTeacher  + "\n");

        //Variables created in method
        adding.writeInt(creativtiy + "\n");
        adding.writeInt(action + "\n");
        adding.writeInt(service + "\n");
        adding.writeInt(total + "\n");

        adding.close();
} 
```

我只是一直认为这是不对的，并希望对某些部分进行澄清，例如这条线

```
 RandomAccessFile adding     = new RandomAccessFile(new File(fullName + ".dat"), "rw"); 
```

fullname 是传递给方法的变量，它是学生的姓名和姓氏（例如：John Lennon）。我想要做的是有一个名为“John Lennon.dat”的文件。但是我一直认为我在这里的方法是错误的。

另一个问题是关于整数值。它们会不时更新，但只需简单地添加 current+new。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:12:01.873

1.  如果您使用`fullname`未经过滤的可能用户输入 ( ) 来命名文件，则必须小心。这可能导致安全漏洞。您应该检查`fullname`文件系统中不允许使用的特殊字符，或者会更改您的目录。想象一下有人可以输入`../importantfile`并且`fullname`不检查是否有可能覆盖其他目录中的一些重要文件。最安全的方法是为您的文件使用一些通用名称模式（例如`data1.dat`,`data2.dat`并将与文件名的关系存储`fullname`在另一个地方（可能是一个文件`index.dat`）。

2.  我认为您有充分的理由在`RandomAccessFile`这里使用 a 。根据您的代码，一个文件中可能有多个记录。如果您没有将记录的起始位置存储在另一个位置，那么您必须读取一条又一条记录。如果您发现您的记录要更改，那么您必须读取整数值之前的所有字段，以便您的文件位置指向整数开始位置。然后您可以读取整数，更改值，将文件位置向后移动 4 个字节（`seek(-4)`）。然后您可以编写修改后的整数值。

备择方案：

*   您可以读取整个文件，修改整数值，然后创建新的整个文件并覆盖旧文件。对于短文件，这可能不那么复杂而不会显着降低性能（但这取决于，如果您有数千个文件要在短时间内更改，则不建议使用此替代方案）。
*   您可以将整数值的文件位置存储在另一个位置，并使用它们直接访问这些值。这仅在您的字符串不可变时才有效。
*   您可以使用其他文件格式，如 XML、JSON 或序列化对象。但所有这些都不支持原位更改。
*   您可以使用 SQLite 或 H2 等嵌入式数据库，让数据库关心文件访问和索引。

# asp.net - 将 NULL 值传递给 GUID

> ID：15452025
> 
> 赞同：1
> 
> 时间：2013-03-16T17:00:04.447
> 
> 标签：asp.net, vb.net, null, guid

我是 VB.NET 的初学者，所以您可能需要忍受我，但我需要在后面编辑此代码，以便将空值传递到我的数据库中的“imageurl”字段。前端是一个网络表单，用户可以在其中输入书籍的详细信息，并可以选择上传书籍封面。

我想更改我的代码，以便如果文件上传对话框不满足 hasFile，则在数据库中生成的 GUID 字符串将为 NULL 值（这样我就可以使用 ASP 中的 NullImageUrl 属性获得“无可用图像”图像.)

到目前为止，这是我尝试实现的，但智能感知告诉我“字符串类型的值不能转换为‘System.GUID’。

**代码背后：**

> ```
> Imports System.Data.OleDb 
> Partial Public Class addBook
> Inherits System.Web.UI.Page
> 
> Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
> 
> End Sub
> 
> Protected Sub btn_submission_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btn_submission.Click
>     Dim noFile As String = Nothing
>     Dim myGUID = Guid.NewGuid()
>     Dim newFileName As String = myGUID.ToString() & ".jpg"
>     Dim fileLocationOnServerHardDisk = Request.MapPath("img/thumb") & "/" & newFileName
>     If fu_picture.HasFile Then
>         fu_picture.SaveAs(fileLocationOnServerHardDisk)
>     Else
>         myGUID = noFile
>     End If
>     Dim oleDbConn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     Dim SqlString As String = "Insert into booklist(Title,Author,PublicationDate,Pages,Publisher,Blurb,imgurl,AverageRating)
> Values (@f1,@f2,@f3,@f4,@f5,@f6,@f7,@f8)"
>     Dim cmd As OleDbCommand = New OleDbCommand(SqlString, oleDbConn)
>     cmd.CommandType = CommandType.Text
>     cmd.Parameters.AddWithValue("@f1", tb_booktitle.Text)
>     cmd.Parameters.AddWithValue("@f2", tb_bookauthor.Text)
>     cmd.Parameters.AddWithValue("@f3", tb_bookpubyear.Text)
>     cmd.Parameters.AddWithValue("@f4", tb_bookpages.Text)
>     cmd.Parameters.AddWithValue("@f5", tb_publisher.Text)
>     cmd.Parameters.AddWithValue("@f6", tb_blurb.Text)
>     cmd.Parameters.AddWithValue("@f7", "img/thumb/" & newFileName)
>     cmd.Parameters.AddWithValue("@f8", rbl_Stars.SelectedValue)
>     oleDbConn.Open()
>     cmd.ExecuteNonQuery()
>     System.Threading.Thread.Sleep("2000")
>     Response.Redirect("~/addedrecord.aspx")
> 
> End Sub
> 
> Protected Sub rbl_Stars_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles rbl_Stars.SelectedIndexChanged
> 
> End Sub 
> End Class 
> ```

请告诉我我的思路是否完全错误！

**编辑：**目前，即使没有上传文件，即使图像本身不存在，也会在数据库表中生成 guid 字符串 + jpg 后缀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:07:46.010

如果您不符合要求，您应该将[DBNull.Value](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)传递给您的数据库

```
 cmd.Parameters.AddWithValue("@f7", _
               if(fu_picture.HasFile, "img/thumb/" & newFileName, DbNull.Value) 
```

[三元运算符](https://stackoverflow.com/questions/576431/is-there-a-conditional-ternary-operator-in-vb-net)允许您仅在创建参数时测试标志 HasFile 。
如果为 false，则将参数值设置为 DBNull.Value。如果 HasFile 为真，您可以构建图像文件的正确路径。当然，这消除了之前在代码中将 Nothing 分配给 myGuid 的必要性。

# jquery - 点击事件仅在手指不滑动时有效

> ID：15452026
> 
> 赞同：3
> 
> 时间：2013-03-16T17:00:16.823
> 
> 标签：jquery, cordova, jquery-mobile

我在IOS上使用带有电话间隙的jquery mobile，我注意到只有当您点击屏幕而不向左或向右移动手指时才会触发点击事件。下面是我的绑定代码。

```
$(".pic-cont").on("tap",{count: "not needed"},function(event){
        console.log("Clicked");
        .... 
```

我正在制作游戏，用户会快速点击屏幕上的东西，我注意到当你快速点击时，你的手指可能会滑动而不注册点击事件。是否有任何其他事件我可以使用（如触地事件），所以当用户的手指点击屏幕时，无论他们是否将手指左右移动或按住，都会立即注册该事件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:59:58.353

在 jQuery Mobile 的情况下，几乎没有解决方案，但有一个适用于您的情况。

## 解决方案 1 - jQuery 解决方案

您应该使用 touchstart 事件而不是点击事件。它像点击一样工作，同时它是在屏幕滑动期间触发的第一个事件。

这是一个代码示例：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('touchstart', '#index', function(){       
        alert('touchstart');
    });
}); 
```

我给你做了一个工作的例子：http: [//jsfiddle.net/Gajotres/vDqdD/](http://jsfiddle.net/Gajotres/vDqdD/)

## 解决方案 2 - jQuery Mobile 解决方案

虽然 touchstart 是一个很好的全方位解决方案，但它不适用于使用旧 jQuery Mobile 版本（1.1 及以下）的旧 Android 设备。

因此，如果您需要创建防弹版本，您应该使用[vmousedown](http://api.jquerymobile.com/vmousedown/)事件而不是 touchstart。

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('vmousedown', '#index', function(){       
        alert('vmousedown');
    });
}); 
```

这是一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/vDqdD/4/](http://jsfiddle.net/Gajotres/vDqdD/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:37:23.937

对于游戏，最好使用原生触摸事件：[https](https://developer.mozilla.org/en-US/docs/DOM/Touch_events) ://developer.mozilla.org/en-US/docs/DOM/Touch_events 。使用它们可以让您拥有比使用“点击”等便利事件更严格的控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:09:22.897

您可能想尝试这个[Quo JS](http://quojs.tapquo.com/)轻量级 JavaScript 库来获取准确的事件。我在 SO 的一些建议中发现了这一点。它工作得非常好而且非常准确。

# math - java.util.Random - nextGaussian() 只给出 Z 而不是 P(Z)

> ID：15452035
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:02.127
> 
> 标签：math, random, distribution, gaussian

给定一个名为“nextGaussian()”的实例

```
 public static double findGaussProbability(){
            Random rnd = new Random();
             double Z = rnd.nextGaussian();
             return Z;
    } , 
```

我相当确定表 A 的区域值（例如，0 < P(Z) < 1）在 java.util.Random 中是无法实现的：也就是说，nextGaussian() 可以获取 Z 的原始值，即 -3.4 <= Z <= 3.4，但不是表 A 面积值。您将如何获得这些值？是的，很明显有用的值，即 Z、X、mu、sigma 可以很容易地获得，但是您将如何获得 P(Z)？例如，如果 Z = -1.14 在一个运行实例中：

```
double Z = rnd.nextGaussian(); 
```

那么 P(Z) = .1271 或 12.71%，但是你是怎么得到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:30:00.250

据我所知，标准 Java 库中没有类/逻辑来执行此操作。但是，您可以使用许多第三方库来计算它。例如，[`NormalDistribution`](http://commons.apache.org/proper/commons-math//javadocs/api-3.1.1/org/apache/commons/math3/distribution/NormalDistribution.html)来自[Apache Commons Math3](http://commons.apache.org/proper/commons-math//)的类有一个应该能够做到这一点的方法（特别是`cumulativeProbability`方法）。

希望这可以帮助！

# java - 在另一个视图周围动态添加视图

> ID：15452036
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:02.233
> 
> 标签：java, android, android-layout, android-view

我想在屏幕中心有一个文本视图，其中有许多自定义 SeekBars 位于一个圆圈的边缘周围。它应该看起来像这样。

![视图的外观](../Images/c2449ed6cddac3c9fbb0d3de2b4d1d9f.png)

这是我到目前为止的代码。为了使用更少的代码而不是自定义的 SeekBars，我将使用默认的 SeekBars。我正在使用 Vertical Seek Bar 库[https://github.com/AndroSelva/Vertical-SeekBar-Android](https://github.com/AndroSelva/Vertical-SeekBar-Android)

**主要活动：**

```
public class MainActivity extends Activity implements OnSeekBarChangeListener {

    TextView tv;
    TextView ss;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    RelativeLayout layout = (RelativeLayout) findViewById(R.id.main_layout);
    tv = (TextView)findViewById(R.id.seek_score);
    ss = (TextView)findViewById(R.id.selected_segment);

    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
    RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    lp.addRule(RelativeLayout.RIGHT_OF, tv.getId());

    VerticalSeekBar verticalSeekBar = (VerticalSeekBar) getLayoutInflater().inflate(R.layout.motif_segment, null);
    verticalSeekBar.setName("Test Segment");
    verticalSeekBar.setOnSeekBarChangeListener(this);
    layout.addView(verticalSeekBar, lp);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return false;
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean isUser) {
    tv.setText(Integer.toString(progress / 100));
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {

}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {

} 
} 
```

**main_activity.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" 
    android:id="@+id/main_layout"
    android:layout_gravity="center"
> 

    <TextView 
       android:id="@+id/seek_score"
       android:layout_width="50dip"
       android:layout_height="50dip" 
       android:layout_centerHorizontal="true"
       android:background="@drawable/circle"
       android:gravity="center"
       android:text="0"
       android:layout_margin="40dip"
    />

    <TextView
        android:id="@+id/selected_segment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:18:07.703

> 我想在屏幕中心有一个文本视图，其中有许多自定义 SeekBars 位于一个圆圈的边缘

如果编号的视图具有任意尺寸（意味着它们比中心圆大）并且您只想像图像一样放置它们，那么这很简单：

*   创建圆形视图，它将是一个正方形，边是 4 和 2 或 3 和 1 之间的距离，以父级为中心
*   视图 1 将水平居中 + 设置在圆形视图上方
*   视图 3 将水平居中 + 设置在圆形视图下方
*   视图 4 将垂直居中 + 设置在圆形视图的左侧
*   视图 2 将垂直居中 + 设置在圆形视图的右侧

如果您希望视图 1、2、3、4 具有圆的大小，则使用上面的位置，但也使用 alignLeft/Right/top/Bottom 属性和圆形视图。

如果这四个视图不是您想要围绕圆圈放置的单个视图，那么您应该创建一个自定义`ViewGroup`来更精确地计算应如何放置子视图。

# vb.net - 调用 webserver 类时编程崩溃

> ID：15452038
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:05.717
> 
> 标签：vb.net, visual-studio-2010

提前感谢您的帮助。

我在我的 VB.net 应用程序中运行基于套接字的网络服务器。每当我在程序中调用类时（即加载主应用程序时），程序就会崩溃。

你能帮我吗？

* * *

```
Private Sub Login_Load(sender As System.Object, e As System.EventArgs) Handles    MyBase.Load
    AcceptButton = SubmitLogin
    Dim CurrDate As Date
    CurrDate = DateValue(Now)
    Label3.Text = CurrDate
    OpenConnection()
    username.Text = ""
    password.Text = ""

    server.serve()

End Sub 
```

* * *

```
Imports System.Net
Imports System.Net.Sockets
Imports System.Threading
Imports System.Text
Imports System.IO

Public Module Webserver
Public server As WebServer = New WebServer
Sub Main()
End Sub

Public Class WebServer
    Private tcpListener As System.Net.Sockets.TcpListener
    Private clientSocket As System.Net.Sockets.Socket
    ' Set WWW Root Path
    Dim rootPath As String = "\\ndrive.rdg.ac.uk\mv003237\My Documents\Business Programming Coursework 2\Webserver\"
    ' Set default page
    Dim defaultPage As String = "index.html"
    Public Sub serve()
        Dim hostName As String = Dns.GetHostName()
        Dim serverIP As IPAddress = Dns.GetHostEntry(hostName).AddressList(4)
        Dim Port As String = "8080"
        tcpListener = New TcpListener(serverIP, Int32.Parse(Port))
        tcpListener.Start()

        While (True)
            clientSocket = tcpListener.AcceptSocket()
            ' Socket Information
            Dim clientInfo As IPEndPoint = CType(clientSocket.RemoteEndPoint, IPEndPoint)

            ProcessRequest()
        End While
    End Sub

    Protected Sub ProcessRequest()
        Dim recvBytes(1024) As Byte
        Dim htmlReq As String = Nothing
        Dim bytes As Int32

        ' Receive HTTP Request from Web Browser
        'Some browsers send empty requests sometimes, in addition to the real requests.
        Dim tries As Integer = 10
        While tries > 0
            bytes = clientSocket.Receive(recvBytes, 0, clientSocket.Available, SocketFlags.None)
            If bytes > 0 Then
                tries = 0
            Else
                tries = tries - 1

                'Pause for a moment (50 milliseconds) to wait for the next request
                Thread.Sleep(50)
            End If
        End While

        htmlReq = Encoding.ASCII.GetString(recvBytes, 0, bytes)

        Dim strArray() As String
        Dim strRequest As String

        strArray = htmlReq.Trim.Split(" ")

        ' Determine the HTTP method (GET only)
        If strArray(0).Trim().ToUpper.Equals("GET") Then
            strRequest = strArray(1).Trim

            If (strRequest.StartsWith("/")) Then
                strRequest = strRequest.Substring(1)
            End If

            If (strRequest.EndsWith("/") Or strRequest.Equals("")) Then
                strRequest = strRequest & defaultPage
            End If

            strRequest = rootPath & strRequest
            sendHTMLResponse(strRequest)

        ElseIf strArray(0).Trim() <> "" Then ' Not HTTP GET method
            strRequest = rootPath & "400.html"
            sendHTMLResponse(strRequest)
        End If

        clientSocket.Close()
    End Sub

    ' Send HTTP Response
    Private Sub sendHTMLResponse(ByVal httpRequest As String)
        ' Get the file content of HTTP Request
        Dim streamReader As FileStream
        Dim response As String
        If Not File.Exists(httpRequest) Then
            httpRequest = rootPath & "404.html" 'should really be 404.html
            response = "404 Not Found"
        Else
            response = "200 OK"
        End If
        streamReader = New FileStream(httpRequest, IO.FileMode.Open, IO.FileAccess.Read)
        Dim len As Integer = streamReader.Length
        Dim strBuff(len) As Byte
        streamReader.Read(strBuff, 0, len)
        streamReader.Close()
        streamReader = Nothing

        ' Set HTML Header
        Dim htmlHeader As String = _
          "HTTP/1.0 " & response & ControlChars.CrLf & _
          "Server: WebServer 1.0" & ControlChars.CrLf & _
          "Content-Length: " & len & ControlChars.CrLf & _
          "Content-Type: " & getContentType(httpRequest) & _
           ControlChars.CrLf & ControlChars.CrLf

        ' The content Length of HTML Header
        Dim headerByte() As Byte = Encoding.ASCII.GetBytes(htmlHeader)

        ' Send HTML Header back to Web Browser
        clientSocket.Send(headerByte, 0, headerByte.Length, SocketFlags.None)

        ' Send HTML Content back to Web Browser
        clientSocket.Send(strBuff, 0, len, SocketFlags.None)

    End Sub

    ' Get Content Type
    Private Function getContentType(ByVal httpRequest As String) As String
        If (httpRequest.EndsWith("html")) Then
            Return "text/html"
        ElseIf (httpRequest.EndsWith("htm")) Then
            Return "text/html"
        ElseIf (httpRequest.EndsWith("txt")) Then
            Return "text/plain"
        ElseIf (httpRequest.EndsWith("gif")) Then
            Return "image/gif"
        ElseIf (httpRequest.EndsWith("jpg")) Then
            Return "image/jpeg"
        ElseIf (httpRequest.EndsWith("jpeg")) Then
            Return "image/jpeg"
        ElseIf (httpRequest.EndsWith("pdf")) Then
            Return "application/pdf"
        ElseIf (httpRequest.EndsWith("pdf")) Then
            Return "application/pdf"
        ElseIf (httpRequest.EndsWith("doc")) Then
            Return "application/msword"
        ElseIf (httpRequest.EndsWith("xls")) Then
            Return "application/vnd.ms-excel"
        ElseIf (httpRequest.EndsWith("ppt")) Then
            Return "application/vnd.ms-powerpoint"
        Else
            Return "text/plain"
        End If
    End Function
End Class 
```

端模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:04:44.550

```
 Dim t As Thread
    t = New Thread(AddressOf server.serve)
    t.Start() 
```

# plot - ordiellipse() 中的 show.groups 参数为组使用不同的颜色和线型

> ID：15452039
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:08.800
> 
> 标签：plot, colors, ellipse, vegan

我正在尝试制作一个类似于此问题底部所示的图：[Adding ellipses to a principal component analysis (PCA) plot](https://stackoverflow.com/questions/13936051/adding-ellipses-to-a-principal-component-analysis-pca-plot/14251240#14251240)。但是，我既不熟悉`ggplot`也不熟悉修改函数`ordiellipse()`本身，如下所示：[Color-coding 95% confidence ellipses for centroids](https://stackoverflow.com/questions/13936051/adding-ellipses-to-a-principal-component-analysis-pca-plot/14251240#14251240)。

因此，我尝试使用参数`show.groups`，`ordiellipse()`但我不知道如何告诉这个参数我想要什么。

我正在分析一个包含 83 个站点的表，其中包含大约 418 个物种的丰度数据。我运行了一个具有函数的 DCA，`decorana()`并在数据上降低了稀有物种的权重。之后，我将平均 Ellenberg 指标值拟合到排序上。

```
vali <-read.table(file = "VegOrdi2012.txt", header=T)
attach(vali)

calcul.env<-read.table(file = "indicator-values-2012.txt",header=T)
attach(calcul.env)
names(calcul.env)

#Downweighting of rare species
calcul.dca1<-decorana(vali,iweigh=1)
calcul.dca1

#Fitting of environmental values
habi<-envfit(calcul.dca1~Habitat+Light+Temp+Continent+Moisture+pH+Nutrients+Salt,calcul.env,permu=999)
habi 
```

这是`Habitat`我需要通过以`ordiellipse()`点显示的所有 83 个图及其作为文本的图号在图表中可视化的因素。栖息地由九个类别组成，其中包括：

```
with(calcul.env, levels(Habitat))
[1] "Brown"  "Emb"    "Eph"    "FBS"    "GreeS"  "RiBa"   "Tracks" "TraffA"
[9] "UrbanL" 
```

我能够为它们着色和标记，而无需在它们周围绘制椭圆：

```
#Assigning colors to the nine categories
colvec <- c("black", "darkviolet", "green3", "darkorange", "magenta", "deepskyblue", "red", "blue", "forestgreen")

plot(calcul.dca1, type = "n", xlim=c(-1.5,1.6),ylim=c(-3,3))
ordipointlabel(calcul.dca1, display="site", cex=0.7, col = colvec[Habitat],bg = colvec[Habitat],pch = 21)

# Creating a legend
with(calcul.env, legend("topright", legend = levels(Habitat), cex=0.65,bty = "n",col = colvec, pch = 21, pt.bg = colvec)) 
```

但是我如何告诉`show.groups`参数如何为不同的`Habitat`类型着色以及为九个椭圆分配标准线型以外的不同线型？

到目前为止，我想出了这个情节使用：

```
plot(calcul.dca, type="n", xlim=c(-1.5,1.6),ylim=c(-1,1))

ordiellipse(calcul.dca, Habitat, display="site", kind = "sd",
conf = 0.95, label = T, col="black", cex=0.7) 
```

但它相当难以捉摸，因为即使我添加了它也只显示没有绘图的椭圆`display="site"`。此外，由于它们严重重叠，很难看出哪个是哪个。因此，最好对每种栖息地类型进行不同的着色。

如果您需要我的 DCA 排序数据的摘录，它来了：

```
dput(calcul.dca1)

structure(list(rproj = structure(c(0.622196100508291, 0.0425187062298239, 
0.809118643435233, 1.42649346881288, 0.942469303820393, 2.14549756552088, 
2.41922446503012, 1.28982244065239, 2.38544988614361, 1.40637644094225, 
1.91277135864581, 0.605410167146248, 0.806888393988314, 0.683853698855826, 
0.487565297706596, 1.33517822183407, 1.0239859712969, 1.11996240234112, 
0.878649568698446, 1.53912253203697, 1.10967929396299, 1.23838793138041, 
0.423890604035373, 0.624635178433215, 0.625774941613906, 0.873372685928585, 
1.02496140772642, 1.44785313041614, 1.08257665268759, 0.349688854561329, 
0.391547839427374, 0.730346245879122, 0.286646737460428, 0.731484625760109, 
1.08559070145785, 1.53243971551768, 0.85664914035342, 1.81525177285522, 
1.5519555131377, 1.39064843441504, 0.760013397658093, 1.22801365648165, 
2.21178067417998, 1.79390604164473, 1.65361126768449, 1.73966835197937, 
1.9237320812287, 1.80114956024378, 2.23293893445506, 2.02322760613128, 
...
0.857428410615221, 1.48594779863814, 0.935954361867925, 1.0524685508641, 
0.898391402052793), .Dim = c(84L, 4L), .Dimnames = list(c("p1", 
"p2", "p3", "p4", "p5", "p6", "p7", "p8", "p9", "p10", "p11", 
"p12", "p13", "p14", "p15", "p16", "p17", "p18", "p19", "p20", 
"p21", "p22", "p23", "p24", "p25", "p26", "p27", "p28", "p29", 
"p30", "p31", "p32", "p33", "p34", "p35", "p36", "p37", "p38", 
"p39", "p40", "p41", "p42", "p43", "p44", "p45", "p46", "p47", 
"p48", "p49", "p50", "p51", "p52", "p53", "p54", "p55", "p56", 
"p57", "p58", "p59", "p61", "p62", "p63", "p64", "p65", "p66", 
"p67", "p68", "p69", "p70", "p71", "p73", "p74", "p75", "p76", 
"p77", "p78", "p79", "p80", "p81", "p82", "p83", "p85", "p86", 
"p87"), c("DCA1", "DCA2", "DCA3", "DCA4"))), cproj = structure(c(1.25651540418674, 
4.10086480672813, 0.985170303000948, 0.356752380731314, 0.0871005927968299, 
-0.65389620717045, 0.416500256857967, -0.0687562150601063, -0.448057138258203, 
-0.851379298478351, -4.22395990436862, 3.38456796429771, 3.50656010401288, 
3.0970679364606, 3.76068022295243, 4.15832492473722, 1.73508588573266, 
-0.0979648246992866, -1.54594775838685, 0.0871005366833882, 2.10389514743405, 
0.705016209734685, -1.54594765746973, -0.264737082168187, 1.28992362813467, 
...
2.37831113227017, 2.6918186855265, 3.96654774047496), .Dim = c(414L, 
4L), .Dimnames = list(c("Ace_cam", "Ace_pla", "Ace_pse", "Ach_mil", 
"Aeg_pod", "Aes_hip", "Agr_cap", "Agr_sto", "All_pet", "Alo_pra", 
"Alo_myo", "Ama_alb", "Ama_bli", "Ama_pow", "Ama_ret", "Amb_art", 
"Ame_lam", "Ang_arc", "Anc_arv", "Ant_cau", "Ant_syl", "Ant_tin", 
"Ant_vul", "Ape_spi", "Aqu_vul", "Ara_tha", "Arc_lap", "Arc_min", 
"Are_ser", "Arr_ela", "Art_bie", "Art_cam", "Art_vul", "Asp_rut", 
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:35:26.187

尝试分别添加每个椭圆，并使用 .将 colvec 中的颜色分别分配给每个 Habitat 组`show.groups`。例如：

```
with(calcul.env, ordiellipse(calcul.dca, Habitat, kind="se", conf=0.95,
                       lwd=2, col="black", show.groups = "Brown"))
with(calcul.env, ordiellipse(calcul.dca, Habitat, kind="se", conf=0.95,
                       lwd=2, col="darkviolet", show.groups = "Emb"))
with(calcul.env, ordiellipse(calcul.dca, Habitat, kind="se", conf=0.95,
                       lwd=2, col="green3", show.groups = "Eph")) 
```

等等。如果需要，您可以通过创建循环来简化此操作。请参阅[http://www.mail-archive.com/r-help@r-project.org/msg149786.html](http://www.mail-archive.com/r-help@r-project.org/msg149786.html)

# java - Maven：清理 gwt-unitCache 目录

> ID：15452040
> 
> 赞同：5
> 
> 时间：2013-03-16T17:01:10.567
> 
> 标签：java, gwt, maven

我有一个专家问题。

我有一个 GWT 项目，它生成一个临时目录 gwt-unitCache 文件夹。我想在构建过程结束时将其删除。

我有这个插件配置：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main</directory>
                <includes>
                    <directory>gwt-unitCache/**</directory>
                </includes>
                <followSymlinks>false</followSymlinks>
            </fileset>
        </filesets>
    </configuration>
    <executions>
        <execution>
            <id>gwt-unitCache</id>
            <phase>install</phase>
                    <goals>
                        <goal>clean</goal>
                    </goals>
        </execution>
    </executions>
</plugin> 
```

这通过删除 src/main 下自动生成的 gwt-unitCache 文件夹来完成其工作。但是，它也删除了包含类和战争文件的目标文件夹。

我不希望删除目标文件，因此我通过删除部分修改了配置：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main</directory>
                <includes>
                    <directory>gwt-unitCache/**</directory>
                </includes>
                <followSymlinks>false</followSymlinks>
            </fileset>
        </filesets>
    </configuration>
    <executions>
        <execution>
            <id>gwt-unitCache</id>
            <phase>install</phase>
        </execution>
    </executions>
</plugin> 
```

但这一次它不再起作用了。gwt-unitCache 不会被删除。看起来插件是在构建过程的开始而不是结束时运行的。

我不擅长 Maven。有人可以帮忙吗？我该如何配置它以便：

1.  gwt-unitCache 在构建过程结束时被删除。
2.  不会删除目标文件夹。

我使用命令：maven clean install

建造它。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T17:11:05.497

未经测试，但[`maven-clean-plugin`](http://maven.apache.org/plugins/maven-clean-plugin/clean-mojo.html)公开了一个`excludeDefaultDirectories`可以帮助完成这项工作的方法。就像是：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main</directory>
                <includes>
                    <directory>gwt-unitCache/**</directory>
                </includes>
                <followSymlinks>false</followSymlinks>
            </fileset>
        </filesets>
        <excludeDefaultDirectories>true</excludeDefaultDirectories>
    </configuration>
    <executions>
        <execution>
            <id>gwt-unitCache</id>
            <phase>install</phase>
            <goals>
                <goal>clean</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

顺便说一句，我不明白你为什么需要清除这个目录，你不能在你的 SCM 中忽略它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-30T12:38:26.837

由于它出现在评论中：您可以像这样更改缓存目录的位置：

```
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>gwt-maven-plugin</artifactId>

 <configuration>
   <persistentunitcachedir>${project.build.directory}</persistentunitcachedir>
 </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T18:14:51.557

RC 我使用这个变体在清洁阶段仍然照常工作。

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>3.0.0</version>
    <executions>
        <execution>
            <id>gwt-unitCache</id>
            <phase>install</phase>
            <goals>
                <goal>clean</goal>
            </goals>
            <configuration>
                <filesets>
                    <fileset>
                        <directory>${project.build.directory}/${project.build.finalName}/c</directory>
                        <includes>
                            <directory>gwt-unitCache/**</directory>
                        </includes>
                        <followSymlinks>false</followSymlinks>
                    </fileset>
                </filesets>
                <excludeDefaultDirectories>true</excludeDefaultDirectories>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# mupdf - 想在我们的项目中使用mupdf for android app

> ID：15452042
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:27.020
> 
> 标签：mupdf

我已经下载了 muPdf 源代码。我们想在我们公司的 android 应用程序中使用.. 我可以使用库和 android 源作为我们应用程序的参考吗？

请不要介意我问愚蠢的问题，因为我在阅读许可信息后感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:21:24.697

它在 Affero 通用公共许可证下的开源代码。如果您的应用程序或使用符合 AGPL，那么您可以自由使用该库。

如果不这样做（例如，您打算出售您的应用程序，或者您打算使用部分源代码而不使您自己的源代码在 AGPL 下开源），那么您必须寻求商业许可。Artifex 有一系列不同的许可选项，包括专为 Android/iPhone 应用程序开发人员设计的一种。

如果您觉得您需要商业许可，或者想讨论它，那么您应该联系 sales@artifex.com。

# mysql - MySQL InnoDB 全局变量？

> ID：15452045
> 
> 赞同：1
> 
> 时间：2013-03-16T17:01:35.803
> 
> 标签：mysql, sql, sql-update, innodb

我想执行这段代码：这个想法是获取最低`MID`的未使用项目（`mutex = 0`）。为了防止其他线程读取此行`FOR UPDATE`，使用并`UPDATE`减少`mutex`。

```
START TRANSACTION;
SELECT MID as m, sender, receiver, content FROM queue WHERE mutex = 0 ORDER BY MID ASC limit 1 FOR UPDATE; 
UPDATE queue set mutex = -1 WHERE MID = m;
COMMIT; 
```

但是，仅在执行该行`m`时才知道。`SELECT`如何在下一个查询中访问它，而不破坏查询，这将停止`TRANSACTION`？

PS：我知道互斥锁不是我使用它的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:11:33.080

你可以使用一个变量：

```
START TRANSACTION;
SELECT @m:=MID, sender, receiver, content FROM queue WHERE mutex = 0 ORDER BY MID ASC limit 1 FOR UPDATE; 
UPDATE queue set mutex = -1 WHERE MID = @m;
COMMIT; 
```

# java - 运行 Maven 生成的 jar 时出现 FileNotFoundException

> ID：15452046
> 
> 赞同：-2
> 
> 时间：2013-03-16T17:01:42.423
> 
> 标签：java, maven, jar, resources, dependencies

尝试创建我的第一个可执行 jar 并使用 Maven 来执行此操作。

Java 本身运行良好，但是当我尝试运行 jar 时，我得到 src\main\resources\sound.wav 的 FileNotFoundException。

我认为问题显然出在 pom.xml 文件和资源声明中，但是我对 maven 和 jars 缺乏经验并且缺乏想法意味着无论我做了多少摆弄，我似乎都无法解决它。

我的 pom.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>groupID</groupId>
<artifactId>Main</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>

<build>
    <finalName>MailCheck</finalName>

    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <includes>
                <include>sound.wav</include>
            </includes>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <id>package-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <appendAssemblyId>false</appendAssemblyId>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>Main</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.7</version>
    </dependency>
</dependencies> 
```

我的 Java 文件如下所示：

```
import sun.audio.AudioPlayer;
import sun.audio.AudioStream;

import javax.mail.*;
import javax.mail.search.FlagTerm;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class Main {
    public static void main(String[] args)
    {
        String password = "mypassword";
        String emailAddress = "myemail";

        String soundFile = "src\\main\\resources\\sound.wav";
        AudioStream as = null;

        Properties props = System.getProperties();
        props.setProperty("mail.store.protocol", "imaps");

        try
        {
            InputStream in = new FileInputStream(soundFile);
            as = new AudioStream(in);

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try
        {
            Session session = Session.getInstance(props, null);
            Store store = session.getStore("imaps");
            store.connect("imap.gmail.com", emailAddress, password);

            Folder inbox = store.getFolder("Inbox");
            inbox.open(Folder.READ_ONLY);

            FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
            Message[] messages = inbox.search(ft);

            int unreadMail = 0;

            for (Message message : messages)
            {
                unreadMail++;

                if (unreadMail > 0)
                {
                    AudioPlayer.player.start(as);
                    break;
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:11:02.580

打包后，该文件应该存在于生成的 JAR 中。请检查这个。此外，您无法`InputStream`像文件系统中的普通文件一样获取 JAR 中的文件。您应该尝试`InputStream`从资源中获取。

```
InputStream in = Main.class.getClassLoader()
                                .getResourceAsStream("src/main/resources/sound.wav"); 
```

# java - Java对象参数和递归

> ID：15452051
> 
> 赞同：0
> 
> 时间：2013-03-16T17:02:15.917
> 
> 标签：java, search, artificial-intelligence

我有一个棋盘游戏，目前使用 Negamax 实现 AI 来搜索位置。开始新搜索时，我将棋盘对象传递给类并复制它。副本是类中的私有变量。我这样做是因为 java 不通过引用传递对象（正如我最近了解到的那样）。

在搜索类中，我有 2 个功能：

1.  NegamaxRoot 这是根。我得到初始移动，移动，调用递归 negamax 函数 (2)，然后撤消移动。

2.  NegamaxRecur 这个函数是主要的递归函数。在这里，我得到（同一个棋盘副本的）移动，移动，递归调用自身，然后撤消移动。

这个过程基本上不起作用，因为在单步调试器中，我注意到在执行移动/撤消时对象变量不同步。

撤消是否也需要在递归函数中调用？

这是 negamax 类：

```
public class Negamax
{
    private IBoard board;

    public Negamax() {}

    public Move NegamaxRoot(IBoard board, int depth)
    {
        this.board = board.copy();

        int alpha = -999999999, beta = 999999999;
        int val = 0;

        //The move that will be returned
        Move bestMove = null;      
        List<Move> moves = this.board.getMoves();

        for (Move move : moves)
        {
            //IBoard newBoard = board.copy();

            //Make the move
            this.board.make(move, true);
                val = -negamaxRecur(depth - 1, -beta, -alpha);

            //Undo the move
            this.board.undo(move);

            //Keep best move
            if (val > alpha)
            {
                alpha = val;
                bestMove = move;
            }
        }

        //Return the move
        return bestMove;
    }

    private int negamaxRecur(int depth, int alpha, int beta)
    {
        if (depth == 0 || this.board.getWon() != 0)
            return this.board.getScore();

        int val;

        List<Move> moves = this.board.getMoves();
        for (Move move : moves)
        {
            //Make the move
            this.board.make(move, true);
                val = -negamaxRecur(depth - 1, -beta, -alpha);
            this.board.undo(move);

            //Alpha-Beta pruning
            if (val > alpha)
                alpha = val;

            if (alpha >= beta)
                return alpha;
        }

        return alpha;
    }
} 
```

# ipad - video.js 视频在容器 div 隐藏 iPad 时被破坏

> ID：15452053
> 
> 赞同：1
> 
> 时间：2013-03-16T17:02:24.717
> 
> 标签：ipad, html5-video, video.js

该文档有许多 div，在任何时候只有一个是可见的（其他是 display:none）。

当一个可见的 div 被隐藏然后再次可见时，该 div 中的视频不再播放。

然而，这只是 iPad 上的一个问题。

关于如何重新初始化它们的任何建议？

谢谢

德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:25:56.497

在以各种可能的方式搜索解决方案之后，似乎在 video.js 初始化后隐藏的容器中使用 video.js 的视频在再次可见时变得无法播放。

所以现在，当我的页面检测到浏览器在 iPad/iPhone 上时，他们使用本机视频播放器。

为此，我将 video.js 的包含内容放在页面头部的一个 javascript 块中，这样如果检测到 iPad 或 iPhone，它们就不会被加载。

```
 <script type="text/javascript">
if(!navigator.userAgent.match(/iPad/i) && !navigator.userAgent.match(/iPhone/i)) {
    document.write('<link href=\"\/\/vjs.zencdn.net/c/video-js.css\" rel=\"stylesheet\" type=\"text/css\" \/\>');
    document.write('<script src=\"\/\/vjs.zencdn.net/c/video.js\" type=\"text/javascript\"\>\<\/script\>');
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:32:47.337

我在 Firefox 上遇到了这个问题，但这是因为我在将其容器 div 移动到隐藏的 div 后试图停止视频。我删除了“停止”代码，播放器在 chrome、firefox 和 opera 上从一个 div 移动到另一个 div 后似乎重新启动？（并自行停止）。

在这个简单的解决方案之前，我认为只需通过 javascript 重新添加视频原始 html，它可能可以在 div 隐藏之后或显示之前完成。

# mysql - SQL选择平均只有两行

> ID：15452056
> 
> 赞同：0
> 
> 时间：2013-03-16T17:02:41.297
> 
> 标签：mysql, rows, average

我目前正在为学校完成一个 SQL 数据库项目。

我使用过 W3school、Google 并阅读了几个 SQL 平均问题

我想写一个选择语句，让我计算出 Pro_id 在这里标识的每个程序的平均成绩。我知道你可以使用

`SELECT COUNT(column_name) FROM table_name`为列的平均值。我想获得列中特定行的平均值

```
SELECT GPA from enroll
WHERE Pro_id='4010' 
```

我认为上述方法可行，但得到了：

> 错误 1054 (42S22)：“字段列表”中的未知列“GPA”

```
+------------+--------+--------+------+--------+
| 学生编号 | Mod_id | Pro_id | 平均绩点 | 等级 |
+------------+--------+--------+------+--------+
| 04655236 | 111111 | 4010 | 4.84 | 一个+ |
| 04655236 | 22222 | 4010 | 3.23 | B- |
| 05655236 | 22222 | 4010 | 3.84 | 一个- |
| 06655236 | 33333 | 4011 | 2.84 | B- |
| 07655236 | 44444 | 4011 | 2.23 | C- |
| 08655236 | 55555 | 4012 | 2.23 | C- |
+------------+--------+--------+------+--------+
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:09:52.297

```
SELECT `GPA` from `enroll`
WHERE `Pro_id` = '4010' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:05:47.233

您的表定义可能不正确，因为您提供的数据在演示中运行良好：

```
SELECT AVG(GPA)
FROM enroll
WHERE Pro_id = 4010
GROUP BY Pro_id 
```

**结果**

```
| 平均成绩(GPA) |
------------
| 4 |
```

[查看演示](http://sqlfiddle.com/#!2/584fc/1)

对于所有程序员：

```
SELECT Pro_id, AVG(GPA)
FROM enroll
GROUP BY Pro_id 
```

**结果**

```
| PRO_ID | 平均成绩(GPA) |
---------------------
| 4010 | 4 |
| 4011 | 2.5 |
| 4012 | 2 |
```

[查看演示](http://sqlfiddle.com/#!2/584fc/2)

# java - 安卓启动画面

> ID：15452061
> 
> 赞同：14
> 
> 时间：2013-03-16T17:03:03.617
> 
> 标签：java, android, xml, android-layout, splash-screen

![我的包资源管理器](../Images/9b22e9e9e63d94b251af124a2b95c087.png)

这就是我的包资源管理器中的内容，所以让我们从顶部开始，解决我认为它所在的问题。

MainActivity.java -

```
 package com.drg.idoser;

 import android.os.Bundle;
 import android.app.Activity;
 import android.view.Menu;

 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

现在 SplashActivity.java

```
package com.drg.idoser;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;

public class SplashActivity extends Activity {

 private static String TAG = SplashActivity.class.getName();
 private static long SLEEP_TIME = 5;    // Sleep for some time

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  this.requestWindowFeature(Window.FEATURE_NO_TITLE);    // Removes title bar
  this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,     WindowManager.LayoutParams.FLAG_FULLSCREEN);    // Removes notification bar

  setContentView(R.layout.splash);

  // Start timer and launch main activity
  IntentLauncher launcher = new IntentLauncher();
  launcher.start();
}

 private class IntentLauncher extends Thread {
  @Override
  /**
   * Sleep for some time and than start new activity.
   */
  public void run() {
     try {
        // Sleeping
        Thread.sleep(SLEEP_TIME*1000);
     } catch (Exception e) {
        Log.e(TAG, e.getMessage());
     }

     // Start main activity
     Intent intent = new Intent(SplashActivity.this, MainActivity.class);
     SplashActivity.this.startActivity(intent);
     SplashActivity.this.finish();
  }
}
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

</RelativeLayout> 
```

飞溅.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:background="@drawable/splash_bg"
android:layout_height="match_parent"
android:orientation="vertical" >

</LinearLayout> 
```

AndroidManafest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.drg.idoser"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.drg.idoser.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

现在我认为我的问题出在**AndroidManafest.xml我不认为我在****AndroidManafest.xml**中设置了启动屏幕，当我从手机启动我的应用程序时，它会跳转到**activity_main.xml**而不是**splash.xml**我是 android 应用程序的新手所以我似乎找不到我的问题，但如果有人有 TeamViwer，我需要我的启动屏幕显示 5 秒钟，并且如果它会更快，我想帮助我发布我的会话信息。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-16T17:05:33.137

将您的`<application>`标签更改为以下内容。您没有声明 SplashActivity，并将 MainActivity 设置为启动器 Activity。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.drg.idoser.SplashActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.drg.idoser.MainActivity"
        android:label="@string/app_name" />
</application> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T11:30:57.983

每次启动应用程序时都会显示启动画面的最佳方法是创建一个新活动。

```
public class SplashScreen extends Activity {

private Handler mHandler;

private Runnable myRunnable;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Just create simple XML layout with i.e a single ImageView or a custom layout
    setContentView(R.layout.splash_screen_layout);
    mHandler = new Handler();
    myRunnable = new Runnable() {
        @Override
        public void run() {
            Intent intent = new Intent(SplashScreen.this, MainActivity.class);
            startActivity(intent);
            finish();
        }
    };

}

@Override
public void onBackPressed() {
// Remove callback on back press
    if (mHandler != null && myRunnable != null) {
        mHandler.removeCallbacks(myRunnable);
    }
    super.onBackPressed();
}

@Override
protected void onPause() {
// Remove callback on pause
    if (mHandler != null && myRunnable != null) {
        mHandler.removeCallbacks(myRunnable);
    }
    super.onPause();
}

@Override
protected void onResume() {
// Attach and start callback with delay on resume
    if (mHandler != null && myRunnable != null) {
        mHandler.postDelayed(myRunnable, ConstantValues.SPLASH_TIME_OUT);
    }
    super.onResume();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T16:26:22.930

您可以像这样轻松访问启动画面。如

```
public class MainActivity extends Activity {
    private ImageView splashImageView;
    private boolean splashloading = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        splashImageView = new ImageView(this);
        splashImageView.setScaleType(ScaleType.FIT_XY);
        splashImageView.setImageResource(R.drawable.ic_launcher);
        setContentView(splashImageView);
        splashloading = true;
        Handler h = new Handler();
        h.postDelayed(new Runnable() {
            public void run() {
                splashloading = false;
                // set your layout file in below
                setContentView(R.layout.activity_main);
            }
        }, 3000);

    }
} 
```

这将是 100% 的作品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-16T07:40:45.853

这是一个简单的！

*~Lunox*

**MainActivity.java**

```
import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

**闪屏.java**

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;

public class splashscreen extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);

        //Splash Screen duration
        int secondsDelayed = 1;
        new Handler().postDelayed(new Runnable() {
            public void run() {
                startActivity(new Intent(splashscreen.this, MainActivity.class));
                finish();
            }
        }, secondsDelayed * 3000);
    }
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

**闪屏.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/splashlogo"

    /> 
```

**飞溅标志.png**

[飞溅标志.png](https://github.com/Lunox-Code/SplashScreen)

**GitHub**

[闪屏](https://github.com/Lunox-Code/SplashScreen)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-19T18:49:41.320

```
@Override

   protected void onCreate(Bundle savedInstanceState) {

          super.onCreate(savedInstanceState);

          setContentView(R.layout.activity_main);

          Thread th = new Thread(new Runnable() {            /*create a new thread */

                              @Override

                              public void run() { /*

                                                                  * The purpose of this thread is to

                                                                  * navigate from one class to another

                                                                  * after some time

                                                                  */

                                     try {

                                            Thread.sleep(5000);

                                     } catch (InterruptedException e) {

                                            /*

                                             * We are creating this new thread because we don’t

                                             * want our main thread to stop working for that

                                             * time as our android stop working and some time

                                             * application will crashes

                                             */

                                            e.printStackTrace();

                                     }

                                     finally {

                                            Intent i = new Intent(MainActivity.this,

                                                          Splash_Class.class);

                                            startActivity(i);

                                            finish();

                                     }

                              }

                       });

          th.start(); // start the thread

   } 
```

[http://www.codehubb.com/android_splash_screen](http://www.codehubb.com/android_splash_screen)

# android - 试图调试一个处女的移动 android 2.3 智能手机

> ID：15452062
> 
> 赞同：0
> 
> 时间：2013-03-16T17:03:03.900
> 
> 标签：android

在 Windows 7 上，当我的 acer 平板电脑已连接并且我在运行配置中选择了一个活动设备时，我可以很好地调试我的 android 程序。

如果我尝试在我的 Virgine android 智能手机 (android 2.3) 上调试它，我会收到一条消息，指出没有活动的兼容 AVD 或设备。

我的 android 设备是 v 2.3，项目是为 android 2.2 设置的，

处女手机在我的 Mac 上也能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:09:07.287

您可能没有安装驱动程序。检查制造商的网站以获取 USB 调试驱动程序，或者，如果您喜欢冒险，修改标准的 Android USB 驱动程序以包含您设备的 USB ID（我是为我的中国平板电脑做的）。

# c# - 访问 CustomValidator isValid 属性 - Visual Studio 2008

> ID：15452064
> 
> 赞同：0
> 
> 时间：2013-03-16T17:03:14.460
> 
> 标签：c#, asp.net, database

我目前正在使用 FormView 来显示使用我的数据库的表单。我在 formview 中添加了一个 customvalidator，并希望使用 c# 来验证用户输入。

由于文本框位于表单视图中，因此我习惯于使用以下代码来访问输入：

```
String phoneNum = (FormView1.FindControl("NumberTextBox") as TextBox).Text; 
```

以及以下访问自定义验证器：

```
Control CustomValidator1 = FormView1.FindControl("CustomValidator1"); 
```

当我使用 customValidator1.isValid 时，我得到“不包含定义 isValid”

我想知道是否有办法使用 isValid 属性，并且我是否正确访问了 customvalidator？

谢谢：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:27:06.603

尝试将 CustomValidator1 转换为它的类型而不是 Control。

# ios - 使第三个可见行成为唯一可选择的行

> ID：15452066
> 
> 赞同：1
> 
> 时间：2013-03-16T17:03:19.020
> 
> 标签：ios, uitableview, uipickerview

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我有`UITableView`很多行，但我只显示五行。换句话说，用户只能看到五行。他/她可以滚动表格，但只能看到五行。

我想让第三行可选。用户只能选择第三个可见行。

我正在尝试模拟`UIPickerView`第一个，因为我正在使用 Core Data 并且所有代码现在都可以与`UITableView`委托一起正常工作，其次，我不知道如何自定义`UIPickerView`背景和选择区域。

**如何使第三个可见行成为唯一可选择的行？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:33:48.567

像这样实现`-[id<UITableViewDelegate> tableView:willSelectRowAtIndexPath:]`：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *indexPaths = [tableView indexPathsForVisibleRows];
    if ([indexPaths objectAtIndex:2] isEqual:indexPath) {
        return indexPath;
    } else {
        return nil;
    }
} 
```

更多信息[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T01:04:40.793

完整的示例以及对齐行（通过实现 ScrollView 委托）：

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
    @property (weak, nonatomic) IBOutlet UITableView *myTableView;
@end 
```

视图控制器.m：

```
#import "ViewController.h"

static int kRowHeight = 92;
static int kArrayCount = 20;

@interface ViewController ()
@property (nonatomic, strong) NSMutableArray *tableViewData;

@end

@implementation ViewController
-(void)populateArray {
    for (int i=0; i<kArrayCount; i++) {
        [self.tableViewData addObject:[NSString stringWithFormat:@"String # %d",i]];
    }
    [self.myTableView reloadData];
}

#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [self.tableViewData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.textLabel.text = [self.tableViewData objectAtIndex:indexPath.row];
    // Configure the cell...

    return cell;
}

#pragma mark - Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc]
                            initWithTitle:@"Selected"
                            message:[NSString stringWithFormat:@"Selected Row %d", indexPath.row]
                            delegate:nil
                            cancelButtonTitle:@"OK"
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *indexPaths = [tableView indexPathsForVisibleRows];
    if ([[indexPaths objectAtIndex:2] isEqual:indexPath]) {
        return indexPath;
    } else {
        return nil;
    }
}

#pragma mark - ScrollView Delegate Methods (Make rows snap to position top)
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                     withVelocity:(CGPoint)velocity
              targetContentOffset:(inout CGPoint *)targetContentOffset {
    int cellHeight = kRowHeight;
    *targetContentOffset = CGPointMake(targetContentOffset->x,
                                       targetContentOffset->y - (((int)targetContentOffset->y) % cellHeight));
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableViewData = [[NSMutableArray alloc] initWithCapacity:kArrayCount];
    [self populateArray];
    // Do any additional setup after loading the view, typically from a nib.
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:09:35.857

您可以使用数组`[self.tableView indexPathsForVisibleRows]`来找出`indexPaths`可见的内容。在`willSelectRowAtIndexPath`方法中返回`nil`除第三个元素之外的所有元素。

为避免突出显示，您还可以使用它来设置

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

在 CFRAIP 方法中。

# c# - 在其他对象位置旁边创建一个新矩形

> ID：15452070
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:03:22.523
> 
> 标签：c#, .net, winforms

所以，我想立即在图片框旁边创建一个新矩形。想象一下，我写了 Rectangle Location 等于 PictureBox1 Location 加上 x+10。如何在 C# 中做到这一点？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:06:07.647

您可以使用指定 x,y,width 和 height的构造函数[Rectangle(int,int,int,int)创建新的 Rectangle。](http://msdn.microsoft.com/en-us/library/9wcdy991.aspx)所以使用之前 Rectangle 的 x+10,y,width,height 作为参数。

```
Rectangle newRect = new Rectangle(
  pictureBox1.Location.X + 10, 
  pictureBox1.Location.Y, 
  pictureBox1.Width, 
  pictureBox1.Heigth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:09:24.817

像这样的东西。从我的头顶上做的，所以你可能有一些错误命名的属性。

```
 Pen pen = new Pen(Color.FromArgb(255, 0, 0, 0), 1);
 e.Graphics.DrawRectangle(
    blackPen, 
    pictureBox1.Location.X + 10, 
    pictureBox1.Location.Y, 
    pictureBox1.Size.Width, 
    pictureBox1.Size.Heigth); 
```

（只是谷歌）

# python - Python中的引用错误

> ID：15452073
> 
> 赞同：1
> 
> 时间：2013-03-16T17:03:41.717
> 
> 标签：python, reference

问题来自`state`变量（在 args 中）。它在我的代码中进行了修改（`new_state`修改后）。但是，我读过 using`list()`可以防止这种问题（它看起来`state`和`new_state`具有相同的参考）。

总而言之，如果我在函数的开头显示 state 的值，而在 return 之前，值是不同的（我显然不想改变这个变量的值！）。我怎么解决这个问题 ？

```
def successor(self, state, numberClients, numberDepots, Q, dist_table):         
    succ_list = list() 
    for i in range(0, len(state)): 
        for j in range(0, len(state[i])): 
           switchIndex = 0 
           while switchIndex < length: 
              permutationIndex = 0 
              while permutationIndex < len(state[switchIndex]):                     
                  new_state = list(state) 
                  temp = new_state[switchIndex][permutationIndex] 
                  new_state[switchIndex][permutationIndex] = new_state[i][j] 
                  new_state[i][j] = temp 
                  if checkConst(new_state): # accept only in some cases (we don't care here)
                      succ_list.append(('act', new_state))             
                  permutationIndex += 1 
           switchIndex += 1 
    return succ_list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:07:35.937

它看起来像`state`一个列表列表？

当您这样做时`new_state = list(state)`，您正在复制外部列表，但副本内的引用仍然指向相同的内部列表。

尝试这个：

```
new_state = [list(e) for e in state] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:11:35.420

你自己找到了解决方案。调用中的引用：`list(...)`被复制到新列表中。所以本质上，它不是深拷贝，而是浅拷贝。下面的代码解释了它。

```
>>> class A: pass
... 
>>> a=map(lambda x:A(), range(5))
>>> a
[<__main__.A instance at 0x1018d11b8>, <__main__.A instance at 0x1018f17a0>, <__main__.A instance at 0x101868950>, <__main__.A instance at 0x1018687a0>, <__main__.A instance at 0x101868830>]
>>> b=list(a)
>>> b
[<__main__.A instance at 0x1018d11b8>, <__main__.A instance at 0x1018f17a0>, <__main__.A instance at 0x101868950>, <__main__.A instance at 0x1018687a0>, <__main__.A instance at 0x101868830>]
>>> b[0].v=23
>>> a
[<__main__.A instance at 0x1018d11b8>, <__main__.A instance at 0x1018f17a0>, <__main__.A instance at 0x101868950>, <__main__.A instance at 0x1018687a0>, <__main__.A instance at 0x101868830>]
>>> a[0]
<__main__.A instance at 0x1018d11b8>
>>> a[0].v
23 
```

此外，为了防止出现问题，您可以使用：-

```
import copy 
```

然后，`new_state = copy.deepcopy(state)`在您的代码中使用而不是`new_state = list(state)`.

以下代码解释了这一点： -

```
>>> import copy
>>> copy.deepcopy
<function deepcopy at 0x1004d71b8>

>>> a=map(lambda x:A(), range(5))
>>> b=copy.deepcopy(a)
>>> b[0].v=23
>>> a[0].v
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: A instance has no attribute 'v' 
```

# c - 在 C 中读取和输出 unicode

> ID：15452076
> 
> 赞同：4
> 
> 时间：2013-03-16T17:03:55.617
> 
> 标签：c

```
FILE * f = fopen("filename", "r");
int c;

while((c = fgetc(f)) != EOF) {
    printf("%c\n", c);
} 
```

您好，我已经搜索了整整一个小时，找到了许多关于 Unicode 的明智论文，但没有回答这个简单的问题：

在使用 gcc 和 bash 的 Linux 上，可以管理 UTF8 的这四行的最短等效项是什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T17:15:42.777

考虑到您的系统，这样的事情应该可以工作：

```
#include <stdio.h>
#include <wchar.h>
#include <locale.h>

int main() {
   setlocale(LC_CTYPE, "en_GB.UTF-8");
   FILE * f = fopen("filename", "r");
   wint_t c;

   while((c = fgetwc(f)) != WEOF) {
      wprintf(L"%lc\n", c);
   }
} 
```

您的原始代码的问题在于 C 没有意识到（或关心）字符是多字节的，因此您的多字节字符将被`\n`每个字节之间的字符破坏。在此版本中，一个字符被视为 UTF-8，因此`%lc`现在可以表示多达 6 个实际字节，这些字节可以保证正确输出。如果输入有任何 ASCII，它将像以前一样简单地每个字符使用一个字节（因为 ASCII 与 UTF-8 兼容）。

`strace`对于调试这样的事情总是有用的。例如，如果文件仅包含`££`（£ 具有 UTF-8 序列 \302\243）。您的版本产生：

```
write(1, "\302\n\243\n\302\n\243\n\n\n", 10) = 10 
```

而我的，

```
write(1, "\302\243\n\302\243\n", 6)     = 6 
```

请注意，一旦您读取或写入流（包括`stdout`），它将被设置为字节或宽方向，如果您想更改它，您需要重新打开流。因此，例如，如果您想读取 UTF-8 文件，但保持`stdout`面向字节，则可以将其替换为`wprintf`：

```
 printf("%lc\n", c); 
```

这涉及后台的额外代码（以转换格式），但与其他需要字节流的代码提供更好的兼容性。

# node.js - Node.js 应用程序中的代码执行顺序

> ID：15452077
> 
> 赞同：2
> 
> 时间：2013-03-16T17:04:00.683
> 
> 标签：node.js, mongodb, nginx, express

我一直在想这个问题，从来没有找到一个令人信服的答案。

请考虑以下情况：

```
var toAddress = '';
if(j==1)
{
  toAddress="abc@mydomain.com";
}
else
{
  toAddress="xyz@mydomain.com";
}

sendAlertEmail(toAddress); 
```

我可以确定当我的 sendAlertEmail() 函数被调用时，我将填充“toAddress”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:54:12.797

对于您提供的示例代码：

```
var toAddress = '';
if(j==1)
{
  toAddress="abc@mydomain.com";
}
else
{
  toAddress="xyz@mydomain.com";
}

sendAlertEmail(toAddress); 
```

您绝对可以确定它是严格顺序的。也就是说 的值`toAddress`是`"abc@mydomain.com"`or `"xyz@mydomain.com"`。

但是，对于如下代码：

```
var toAddress = '';
doSomething(function(){
  if(j==1)
  {
    toAddress="abc@mydomain.com";
  }
  else
  {
    toAddress="xyz@mydomain.com";
  }
});

sendAlertEmail(toAddress); 
```

然后就看函数`doSomething`是否异步了。查找的最佳位置是文档。第二个最好的是查看实施。

如果`doSomething`不是异步的，那么代码执行基本上是顺序的，您绝对可以确定它`toAddress`已正确填充。

但是，如果`doSomething`是异步的，那么您通常可以确定代码执行**不是顺序**的。因为这是异步函数的基本行为之一——它们立即返回并在稍后执行传递给它们的函数。

并非所有对函数进行操作的函数都是异步的。同步函数的一个例子是`forEach`数组的方法。但是所有异步函数都接受函数作为参数。这是因为它是在异步操作结束时执行某些代码的唯一方法。因此，每当您看到将函数作为参数的函数时，您都应该检查它是否是异步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:31:01.753

Node.js 是单线程的（或者至少是 JS 执行），因此由于上述所有代码都是同步的并且排成一列，所有代码都发生在同一个时钟周期内，因此它将按顺序运行，因此必须填充 toAddress。

一旦引入异步函数，事情就会变得复杂。在异步情况下，变量可以在行之间移动，因为它们之间会出现刻度。

为了在每个滴答期间澄清代码，只需从执行的顶部到底部评估代码​​。在第一个滴答期间，执行范围是整个文件，但之后是回调和处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:00:05.737

您编写的代码非常简单地指出了异步行为。看看这段代码：

```
var toAddress = 'abc@mydomain.com';
if(j==1)
{ func1(toAddress); }
else
{ func2(toAddress); }
sendAlertEmail(toAddress); 
```

不能保证 sendAlertEmail 将仅在 func1 或 func2（if else 条件）执行后执行。在节点中，函数在被调用时立即返回并执行下一个调用的函数。如果您想确保它们按顺序执行，请使用回调或使用[async 之](https://npmjs.org/package/async#series)类的库。

# posix - 杀死给定用户的所有进程

> ID：15452081
> 
> 赞同：78
> 
> 时间：2013-03-16T17:04:29.550
> 
> 标签：posix

是否有可靠的方法来杀死给定用户的所有进程？`kill(-1, SIGKILL)`因为该用户将工作，除非该用户的流氓进程首先杀死杀死进程。到目前为止，我能找到的最好的方法是循环遍历`system("ps -u")`该用户并以这种方式终止进程，但这似乎真的很笨拙且效率低下。

编辑：为了澄清，我特别要求一个与 POSIX 兼容的解决方案。出于某种原因，我认为标记问题 posix 会将其放在标题中。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-16T17:09:27.993

只是（暂时）杀死了我的Macbook

```
killall -u pu -m . 
```

其中 pu 是我的用户 ID。注意命令末尾的点。

也试试

```
pkill -u pu 
```

或者

```
ps -o pid -u pu | xargs kill -1 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-01-15T13:56:22.777

这是一个执行此操作的班轮，只需将用户名替换为您想要杀死的用户名即可。甚至不要考虑在那里扎根！

```
pkill -9 -u `id -u username` 
```

注意：如果你想很好删除-9，但它不会杀死所有类型的进程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-09T17:58:42.450

在 Debian LINUX 上，我使用：`ps -o pid= -u username | xargs sudo kill -9`.

随着`-o pid=`ps 标头被抑制，输出只是 pid 列表。据我所知，[Debian shell](https://wiki.debian.org/Shell)是 POSIX 兼容的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-21T07:11:55.560

以下将杀死该用户创建的所有进程：

```
kill  -9  -1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-16T17:08:36.760

在 /proc 虚拟文件系统上进行迭代呢？[http://linux.die.net/man/5/proc](http://linux.die.net/man/5/proc)？

# jquery - 当DIV的高度由jQuery的浏览器高度定义时，如何根据内容增加DIV的高度？

> ID：15452082
> 
> 赞同：1
> 
> 时间：2013-03-16T17:04:30.713
> 
> 标签：jquery, browser, resize, height

我正在使用[这篇](https://stackoverflow.com/questions/8130946/jquery-dynamic-height-with-window-resize)文章中的 jQuery 代码使我的 DIV 的高度根据浏览器的高度进行调整，它工作得很好。我正在努力调整此代码，以便仅在内容本身不够大时才调整到浏览器的高度。目前，如果 DIV 中的内容自然会高于浏览器的高度，jQuery 代码仍然使 DIV 仅与浏览器窗口一样高，从而切断溢出的内容。

我用来使 DIV 根据浏览器高度调整高度的 jQuery 代码：

```
$(document).ready(function(){
    resizeContent();

    $(window).resize(function() {
        resizeContent();
    });
});

function resizeContent() {
    $height = $(window).height() - 0;
    $('body div.slide').height($height);
} 
```

如果有人对如何修改代码以防止它切断高于浏览器窗口的内容有任何想法，我将永远感激不尽。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:24:25.700

如果我理解您的问题，您需要做的就是在设置应用窗口高度之前测试 div 的高度：

```
if ($('body div.slide').height()<=$height) {
  $('body div.slide').height($height);
} 
```

见jsfiddle：http: [//jsfiddle.net/9YQYt/](http://jsfiddle.net/9YQYt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:42:42.987

如果我理解这个问题，你可以用 CSS 解决你的问题

```
div.slide{height: 100%} 
```

# android - Android：检测 GPS 何时打开/关闭（或当没有应用程序不再使用它时）

> ID：15452084
> 
> 赞同：16
> 
> 时间：2013-03-16T17:04:38.903
> 
> 标签：android, gps, broadcastreceiver

我在 Android 2.3.7 上，我正在尝试编写一个 BroadcastReceiver，当用户打开/关闭 GPS 时会调用它（即：通过点击选项中的“使用 GPS 卫星”。

到目前为止我所做的是：

1) 创建了以下广播接收器：

```
public class GPSStatusBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Toast.makeText(arg0, "Broadcast received!", Toast.LENGTH_SHORT).show();

    }
} 
```

2）将此添加到标签内的android清单中：

```
<receiver android:name=".GPSStatusBroadcastReceiver"> 
    <intent-filter> 
        <action android:name="android.location.PROVIDERS_CHANGED" /> 
    </intent-filter> 
</receiver> 
```

现在的问题是它似乎不可靠。当我打开/关闭 GPS 时，onReceive() 方法有时只运行（我会说 1 次超时 3），其他时候它不会被调用。

我想知道是否有可靠的方法来检测 GPS 何时关闭/打开。

如果没有，至少在没有应用程序使用 GPS 时（即：当 gps 图标从状态栏中消失时，表明没有人在主动定位时）收到通知会很好。

编辑：澄清：我不想在我的应用程序运行时这样做。我只是在打开/关闭 gps 时启动我的应用程序，执行它的操作然后终止，我不想订阅 LocationsUpdates ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-12T05:30:23.540

在 API 级别 9 及更高级别上，您可以使用[`LocationManager.PROVIDERS_CHANGED_ACTION`](http://developer.android.com/reference/android/location/LocationManager.html#PROVIDERS_CHANGED_ACTION)：

> 当配置的位置提供者改变时广播意图动作。与`isProviderEnabled(String)`. 如果您正在与 交互`LOCATION_MODE API`，请`MODE_CHANGED_ACTION`改用。
> 
> 常数值：“android.location.PROVIDERS_CHANGED”

[资源](https://stackoverflow.com/questions/15778807/how-to-detect-when-user-turn-on-off-gps-state)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T17:42:15.010

以下解决方案可能是一个奇怪的解决方案，但如果您没有找到任何解决方案，您可以尝试一下。您的解决方案的另一个问题是它仅在 api 级别 9 之后才有效。

在线程或服务中，您可以使用非常短的时间间隔定期检查 gps 状态

```
 LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE );
 boolean statusOfGPS = manager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

它将使用权限

```
android.permission.ACCESS_FINE_LOCATION 
```

即使我正在回答这个问题，对我来说它也不应该是一个好的解决方案。也有最小周期间隔延迟的机会。只是一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-13T14:09:53.317

从 API 19 开始，您可以侦听意图操作[`LocationManager.MODE_CHANGED_ACTION`](https://developer.android.com/reference/android/location/LocationManager.html#MODE_CHANGED_ACTION)。

您还可以通过以下方式获取当前位置模式：

```
try
{
    int locationMode = android.provider.Settings.Secure.getInt(context.getContentResolver(), android.provider.Settings.Secure.LOCATION_MODE);
} catch (android.provider.Settings.SettingNotFoundException e)
{
    e.printStackTrace();
} 
```

返回的值应该是以下之一：

```
android.provider.Settings.Secure.LOCATION_MODE_BATTERY_SAVING
android.provider.Settings.Secure.LOCATION_MODE_HIGH_ACCURACY
android.provider.Settings.Secure.LOCATION_MODE_OFF
android.provider.Settings.Secure.LOCATION_MODE_SENSORS_ONLY 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-16T17:06:13.753

使用 a[**`LocationListener`**](http://developer.android.com/reference/android/location/LocationListener.html)并覆盖`OnStatusChanged`。

您可以使用实例上的`requestLocationUpdates(String, long, float, LocationListener)`方法附加您的侦听器。`LocationManager`

# android - android应用程序未安装，eclipse juno

> ID：15452089
> 
> 赞同：1
> 
> 时间：2013-03-16T17:04:56.180
> 
> 标签：android

我正在为 Java EE 开发人员使用 Eclipse IDE。我创建了我的第一个 android 应用程序项目，它应该显示 Hello World 消息，但我运行它并没有得到任何东西（嗯，模拟器启动但什么也没有），没有控制台输出视图，没有错误。如果我再次运行它控制台出现（...警告：数据分区已在使用中。更改将不会持续存在！）并且模拟器在新窗口中打开但又没有请告诉我出了什么问题以及如何安装和运行该应用程序？第一次运行后（pic1&2），第二次运行后（pic3） ![第一次运行](../Images/3a806188d414f92549d579477c79630b.png)

![模拟器](../Images/2711b7dcf6dbf9a5f822f8b0d166e9f4.png)

![第二轮](../Images/2c104432a8ec9ce4694b1498f5561234.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:08:45.370

**重置/重启 adb 服务器**。您应该通过命令行执行此操作。确保您在您的`/android-sdk-root/platform-tools`目录中。

```
adb kill-server
adb start-server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:08:49.673

运行应用程序时，您将在“bin”文件夹下看到 .apk 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:40:10.967

等待！据我所知，您只是在启动模拟器。不是吗？顶部有一个绿色按钮。（如“播放”按钮）只需按下它。

或者右键单击您要运行的项目，然后单击“运行方式 > android 应用程序”并观看模拟器播放您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:05:00.990

尝试从 project-> clean 清理您的项目，并且不要忘记在 android 模拟器上擦除用户数据...这里有一些关于您的问题的很好的讨论...

[使用 Eclipse for androidSDK，当我运行时，我得到警告：数据分区已在使用中。变化不会持续！](https://stackoverflow.com/questions/6854262/using-eclipse-for-androidsdk-when-i-go-to-run-i-get-warning-data-partition-al)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T17:56:16.650

听起来模拟器已经在运行，并且您正在启动它的新实例......基于它之前启动的日志，也许它没有正确关闭。

-按照较早答案中建议的 poitroae 重新启动 adb。

- 如果这没有帮助，请重新启动 Eclipse。

- 如果这没有帮助，请重新启动计算机。

如果您在此之后仍有问题，请回帖。

# mysql - 处理大量数据的批量插入

> ID：15452095
> 
> 赞同：2
> 
> 时间：2013-03-16T17:05:34.650
> 
> 标签：mysql, database, performance, bulkinsert, database-performance

我在 csv 文件中有一些数据。数据量巨大（约 65GB）。我想将它们全部插入数据库中，以便以后可以查询它们。

csv 文件本身非常简单，它只有 5 列。所以基本上所有的数据都会被插入到一个表中。

现在我尝试将这些数据插入到 mysql 数据库中，但它所花费的时间非常长。我花了将近 6 个小时才插入其中的 1.3GB 数据（我的处理器是 core i5 2.9 GHz，RAM 是 4GB DDR3）。

此加载需要很快完成，以便所有数据插入应在 4/5 天内完成。

如果数据的查询速度可以接受，那么在这种情况下，哪个数据库将显示出最佳性能？

另外，我还应该遵循其他一些步骤/做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:48:40.147

您可能甚至不需要导入它。您可以使用 engine=CSV 创建一个表。

```
mysql> 创建表 mycsv(id int not null) engine=csv;
查询正常，0 行受影响（0.02 秒）

```

然后进入您的数据目录并删除 mycsv.CSV 并将您的 CSV 文件移动/复制/符号链接为 mycsv.CSV。返回 mysql 并输入`flush tables;`，一切顺利。（注意：它可能无法使用，`\r\n`因此您可能需要`\n`先将它们转换为）。

如果您使用 InnoDB，问题是它必须跟踪插入的每一行的每个撤消日志条目，这需要大量资源，需要很长时间。最好以较小的批次进行，这样它就可以在内存中进行大部分撤消日志跟踪。撤消日志在那里，以防您在加载过程中按 ctrl-c 它需要回滚。加载该批次后，它不再需要跟踪它。如果您一次完成所有操作，那么它必须跟踪所有这些撤消日志条目，可能必须进入磁盘——这是一个杀手。

如果我知道我不打算进行行级锁定，我更喜欢将 myisam 用于数据，例如如果我想运行一个长程序来分析数据。该表已锁定，但我只需要在其上运行一个程序。另外，您始终可以使用合并表——它们采用 myisam 表，您可以将它们组合到一个表中。我喜欢对每个表都是一个月数据的日志文件执行此操作。然后我有一个合并表一年。合并表不复制数据，它只是指向每个 myisam 表。

# c# - ComboBox wpf 绑定列表已更改

> ID：15452096
> 
> 赞同：0
> 
> 时间：2013-03-16T17:05:41.170
> 
> 标签：c#, wpf, c#-4.0, binding, mvvm-light

我有一个关于在重新加载列表上绑定选定项目的 ComboBox 问题。

```
class Model : ViewModelBase
{
    /// <summary>
    /// The <see cref="Title" /> property's name.
    /// </summary>
    public const string TitlePropertyName = "Title";

    private string _title = "";

    /// <summary>
    /// Sets and gets the Title property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public string Title
    {
        get
        {
            return _title;
        }

        set
        {
            if (_title == value)
            {
                return;
            }

            RaisePropertyChanging(TitlePropertyName);
            _title = value;
            RaisePropertyChanged(TitlePropertyName);
        }
    }

    /// <summary>
    /// The <see cref="Id" /> property's name.
    /// </summary>
    public const string idPropertyName = "Id";

    private int _myId = 0;

    /// <summary>
    /// Sets and gets the id property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public int Id
    {
        get
        {
            return _myId;
        }

        set
        {
            if (_myId == value)
            {
                return;
            }

            RaisePropertyChanging(idPropertyName);
            _myId = value;
            RaisePropertyChanged(idPropertyName);
        }
    }
} 
```

绑定视图模型：

```
class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {

        PopulateCommand = new RelayCommand(() =>
        {
            Populate();
        });

        SetCommand = new RelayCommand(() =>
        {
            Id = 3;
        });
    }

    public void Populate()
    {
        MyList = new ObservableCollection<Model>(){
            new Model(){
                Id = 1,
                Title = "numer1"
            },
            new Model(){
                Id = 2,
                Title = "numer2"
            },
            new Model(){
                Id = 3,
                Title = "numer3"
            },
            new Model(){
                Id = 4,
                Title = "numer4"
            },
        };
    }

    public RelayCommand PopulateCommand { get; private set; }
    public RelayCommand SetCommand { get; private set; }

    /// <summary>
    /// The <see cref="MyList" /> property's name.
    /// </summary>
    public const string MyListPropertyName = "MyList";

    private ObservableCollection<Model> _myList = null;

    /// <summary>
    /// Sets and gets the MyList property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public ObservableCollection<Model> MyList
    {
        get
        {
            return _myList;
        }

        set
        {
            if (_myList == value)
            {
                return;
            }

            RaisePropertyChanging(MyListPropertyName);
            _myList = value;
            RaisePropertyChanged(MyListPropertyName);
        }
    }

    /// <summary>
    /// The <see cref="Id" /> property's name.
    /// </summary>
    public const string IdPropertyName = "Id";

    private int _id = 0;

    /// <summary>
    /// Sets and gets the Id property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public int Id
    {
        get
        {
            return _id;
        }

        set
        {
            if (_id == value)
            {
                return;
            }

            RaisePropertyChanging(IdPropertyName);
            _id = value;
            RaisePropertyChanged(IdPropertyName);
        }
    }

} 
```

xml:

```
 <ComboBox
            ItemsSource="{Binding MyList}"
            DisplayMemberPath="Title" SelectedValue="{Binding Id, Mode=TwoWay}" SelectedValuePath="Id" IsSynchronizedWithCurrentItem="True"/>
    <Button Content="Populate"
            Command="{Binding PopulateCommand}" />
    <Button Content="Set"
            Command="{Binding SetCommand}" />

    <TextBlock Text="{Binding Id}" Width="100"/> 
```

因此，populateButton 正在为组合框绑定创建列表，setButton 将 id 设置为 3。然后，如果我再次填充列表，则组合框中选择的 ID 为 1。它不应该还是 3 吗？我的意思是，组合框不应该为 id=3 的模型设置 Selected Item。

我也尝试过没有将 IsSynchronizedWithCurrentItem 设置为 true。然后重新加载列表后，组合框中没有选择任何内容。有没有办法将 selectedItem 与 Id 同步？

似乎应该首先初始化列表，然后我应该设置 Id，以便组合框可以更新所选项目。但是，为什么如果我先使用 setButton，然后填充，我会得到预期的结果（所选项目是第三个项目）（仅限第一次使用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:46:52.793

您需要做的就是在重新填充列表后通知视图 Id 属性已更改。

```
PopulateCommand = new RelayCommand(
    () =>
        {
            Populate();
            RaisePropertyChanged(() => Id);
        }); 
```

您将不需要使用`IsSynchronizedWithCurrentItem=true`. 这将用于（例如）保持两个列表框同步并显示相同的选定项。

# python - 在 Python 中使用 listdir 时出错

> ID：15452099
> 
> 赞同：11
> 
> 时间：2013-03-16T17:05:55.570
> 
> 标签：python, file, directory, listdir

我正在尝试获取特定目录中的文件列表并计算目录中的文件数。我总是收到以下错误：

```
WindowsError: [Error 3] The system cannot find the path specified: '/client_side/*.*' 
```

我的代码是：

```
print len([name for name in os.listdir('/client_side/') if os.path.isfile(name)]) 
```

我按照[此处](https://stackoverflow.com/questions/2632205/count-the-number-of-files-in-a-directory-using-python)给出的代码示例进行操作。

我在 Pyscripter 上运行 Python 脚本，并且目录 /client_side/ 确实存在。我的 python 代码位于根文件夹中，并且有一个名为“client_side”的子文件夹。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T17:55:29.097

`os.listdir`当您在不引用现有路径的*路径*上使用时会发生此错误。
例如：

```
>>> os.listdir('Some directory does not exist')
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
WindowsError: [Error 3] : 'Some directory does not exist/*.*' 
```

如果要使用`os.listdir`，则需要保证要使用的路径存在，或者`os.path.exists`先使用 来检查存在。

```
if os.path.exists('/client_side/'):
    do something
else:
    do something 
```

假设您当前的工作目录是`c:\foobar`,`os.listdir('/client_side/')`等价于`os.listdir('c:/client_side')`, while`os.listdir('client_side/')`等价于`os.listdir('c:/foobar/client_side')`. 如果你的 client_side 目录不在根目录下，使用`os.listdir`.

对于您的 0 输出问题，让我们回想一下[`os.listdir(path)`](http://docs.python.org/2/library/os.html?highlight=listdir#os.listdir)

> 返回一个列表，其中包含路径给定的目录中条目的**名称**。该列表是任意顺序的。它不包括特殊条目“。” 和 '..' 即使它们存在于目录中。

和[`os.path.isfile(path)`](http://docs.python.org/2/library/os.path.html?highlight=isfile#os.path.isfile)。

> **如果path**是现有的常规文件，则返回 True 。这遵循符号链接，因此 islink() 和 isfile() 对于同一路径都可以为真。

`listdir`既不返回绝对路径也不返回相对路径，而是返回文件名列表，同时`isfile`需要路径。因此，所有这些名称都会产生`False`.

要获取路径，我们可以使用[`os.path.join`](http://docs.python.org/2/library/os.path.html?highlight=isfile#os.path.join), 直接连接两个字符串。

```
print ([name for name in os.listdir(path)
        if os.path.isfile(os.path.join(path, name))]) 
```

或者

```
print ([name for name in os.listdir('client_side/')
        if os.path.isfile('client_side/' + name)]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T03:52:54.590

我决定将代码更改为：

```
def numOfFiles(path):
    return len(next(os.walk(path))[2]) 
```

并使用以下调用代码：

```
print numOfFiles("client_side") 
```

非常感谢所有告诉我如何在 Python 中正确传递 windows 目录的人，以及[这里](https://stackoverflow.com/questions/2632205/count-the-number-of-files-in-a-directory-using-python)的 nrao91 提供函数代码。

编辑：感谢 eryksun 更正我的代码！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T17:19:36.050

两件事情：

1.  os.listdir() 不进行 glob 模式匹配，请使用[glob](http://docs.python.org/3.3/library/glob.html)模块
2.  可能您没有名为“/client_side/*.*”的目录，但可能没有*.* 在名字里

如果您要查找的目录存在，但没有名为 '/client_side/ 的目录，则您使用的语法可以正常工作*。*'。

此外，如果使用 Python 2.x 和 os.listdir，请小心，因为当您使用 u'/client_side/' 和仅使用 '/client_side' 时，Windows 上的结果会有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T18:34:47.067

你可以做

```
os.listdir('client_side') 
```

没有斜线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T17:16:05.273

正如我所看到的`WindowsError`，只是想知道这是否与 Windows 中的“/”有关！理想情况下，在 Windows 上，你应该有类似的东西`os.path.join('C:','client_side')`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T17:19:06.270

你要：

```
print len([name for name in os.listdir('./client_side/') if os.path.isfile(name)]) 
```

用“。” 在“/client_side/”之前。

点表示您正在工作的当前路径（即从您调用代码的位置），因此“./client_side/”表示您想要的路径，该路径是相对于您当前目录指定的。

如果您只写“/client_side/”，在 unix 中，程序将在系统根目录中查找文件夹，而不是您想要的文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-05T18:03:00.220

如果您只想查看脚本所在目录中的所有文件，可以使用`os.path.dirname(sys.argv[0])`. 这将给出脚本所在目录的路径。

然后，使用`fnmatch`函数，您可以获得该目录中具有在`filename`变量中指定的名称和/或扩展名的文件列表。

```
import os,sys
from fnmatch import fnmatch

directory = os.path.dirname(sys.argv[0])    #this determines the directory
file_name= "*"                              #if you want the python files only, change "*" to "*.py"

for path, subdirs, files in os.walk(directory):
    for name in files:
        if fnmatch(name, file_name):
            print (os.path.join(path, name)) 
```

我希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-06T23:25:04.220

检查是否存在取决于比赛。更好地处理错误（请求宽恕而不是请求许可）。另外，在 Python 3 中，您可以抑制错误。使用 contextlib 中的抑制：

```
 with suppress(FileNotFoundError):
     for name in os.listdir('foo'):
         print(name) 
```

# mysql - mysql 性能一张大表与多张表

> ID：15452102
> 
> 赞同：0
> 
> 时间：2013-03-16T17:06:01.467
> 
> 标签：mysql, database, performance

我在一个社交网络网站上工作，所以我希望用户会很多。我需要为每个用户保存标签（键 | 计数器），我想知道使用 1）大表与 2）一个非常大的表与 3）拆分的大表是否更好。

**1）这是许多表实现的示例**

**表 userid_tags**（每个用户都有自己的表）

```
key   | counter
-----   ---------
tag1  |   3
tag2  |   1
tag3  |   10

Query 1: SELECT * FROM userid_tags WHERE key='tag1'
Query 2: SELECT * FROM userid_tags 
```

**2）单表实现：**

**表格标签**

```
key   | counter | user_id
-----   ------------------
tag1  |   3     | 20022
tag2  |   1     | 20022
tag2  |   10    | 31234

Query 1: SELECT * FROM userid_tags WHERE key='tag1' AND user_id='20022'
Query 2: SELECT * FROM userid_tags AND user_id='20022' 
```

**3）拆分表实现**

**表 1000_tags**（user_id 从 1 到 1000）

```
key   | counter | user_id
-----   ------------------
tag1  |   3     | 122
tag2  |   1     | 122
tag2  |   10    | 734 
```

**表 21000_tags**（user_id 从 20000 到 21000）

```
key   | counter | user_id
-----   ------------------
tag1  |   3     | 20022
tag2  |   1     | 20022
tag2  |   10    | 20234

Query 1: SELECT * FROM userid_tags WHERE key='tag1' AND user_id='20022'
Query 2: SELECT * FROM userid_tags AND user_id='20022' 
```

3)**什么是好的拆分索引的问题？**我按照 instict 使用了 1000 个（用户）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:22:52.907

2是正确答案。想想您将如何为每个用户维护一个表，或者每 1000 个标签维护一个表。您将如何创建/更新/删除表？如果您必须进行大规模更改怎么办？您将如何确定需要从*哪个*表中进行选择？即使可以，如果您需要同时从多个表中进行选择（例如获取两个用户的标签），该怎么办。

拆分表不会给您带来太多性能优势。确实，如果表变得非常大，插入可能会变得更慢，因为 mysql 必须创建键，但只要您有适当的键，查找应该非常快。

另一个类似的解决方案是有一个标签表、一个用户表和一个映射它们的表。这将使标签基数保持较小，如果您对两个表都使用 auto_increment 代理键，则两者的键长度都会很小，这应该使查找尽可能快而对关系没有限制（即必须弄清楚其他表为其他用户加入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:37:14.147

使用选项 2 是处理此问题的正确方法。不过，您仍然可以在表中使用分区。有关使用分区的所有信息都可以在[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)中找到。

为每千个用户将表拆分为分区如下所示：

```
CREATE TABLE tags (`key VARCHAR(50), counter INT, user_id INT)
    PARTITION BY KEY(user_id) partitions 1000; 
```

如果`user_id`是 21001，您可以开始在正确的分区中搜索，例如：

```
SELECT * FROM tags PARTITION (p22);' 
```

因为 id 21001 将在第 22 个分区中。检查链接以获取更多信息。

# jquery - 选择相同值时的jQuery选择更改事件

> ID：15452103
> 
> 赞同：8
> 
> 时间：2013-03-16T17:06:05.037
> 
> 标签：jquery, select, collapse

如何处理选择的折叠事件，或者即使选择的选项没有更改也触发更改事件？

我需要一个搜索引擎，如果选择的选项相同，吉祥物仍然会移动。搜索引擎在此页面上：http: [//www.marocpneus.com](http://www.marocpneus.com)

例如，如果您继续单击第一个选择“Type de véhicule”并选择已选择的“Tourisme”，则角色不会移动到第二个选择。但是，如果您确实将“Tourisme”更改为其他值之一，则角色确实会使用经典的 jQuery 更改事件移动。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-26T10:30:06.167

好的，经过一些研究，由于浏览器不兼容，似乎无法触发选择选项单击（看看这个 SO 问题：[附加到选项节点的事件未被触发](https://stackoverflow.com/questions/7760177/event-attached-to-option-node-not-being-fired)）

...但我们可以模拟点击，以解决问题，XD，你在这里有小提琴：http: [//jsfiddle.net/H9gg5/3](http://jsfiddle.net/H9gg5/3)

**JS**

```
$('select.click_option').click(function() {
    if ( $(this).data('clicks') == 1 ) {
        // Trigger here your function:    
        console.log('Selected Option: ' + $(this).val() );
        $(this).data('clicks', 0);
    } else {
        console.log('first click');
        $(this).data('clicks', 1);
    }
});

$('select.click_option').focusout( function() {
    $(this).data('clicks', 0);
}); 
```

**html**

```
<select class="click_option">
      <option value="1"> Selected 1 </option>
      <option value="2"> Selected 2 </option>
</select> 
```

它有什么作用？好吧，我们知道我们已经选择了一个选项（甚至是相同的选项），因为我们在选择上单击了两次，所以，只需计算单击次数，当它在前一次单击之后触发它，XD。该代码还处理失去焦点的问题，因为如果您在选择之外单击，它将在 clicks = 1 时关闭，您必须重置它。

我在选择中添加了一个类，仅在用户单击您想要的选择时触发该功能。

希望它有帮助，问候！

# google-chrome-app - 如何在 chrome 打包的应用程序中继续收听 websocket？

> ID：15452108
> 
> 赞同：0
> 
> 时间：2013-03-16T17:06:28.003
> 
> 标签：google-chrome-app

目前，即使我正在等待来自 websocket 的数据，后台进程总是处于非活动状态。有没有办法绕过这个？该部门的文档完全不清楚（旧文档等）。这样做的“新”和正确方法是什么？

我的清单文件：

```
{
  "name": "Media 5",
  "manifest_version": 2,
  "description": "Html5 media center app for Chrome",
  "version": "0.1",
  "app": {
    "background": {
      "persistent": true,
      "scripts": ["background.js"]
    }
  },
  "icons": { "16": "small_icon.png", "128": "big_icon.png"     },
  "sandbox": {
    "pages": ["sandbox.html"]
  },
  "permissions": [
    "unlimitedStorage",
    "fullscreen",
    "notifications", 
    "webview"
  ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:36:31.033

有很多方法可以防止您的活动页面被卸载，包括此处列出的方法：http: [//developer.chrome.com/extensions/event_pages.html](http://developer.chrome.com/extensions/event_pages.html)。试一试。打开一个消息端口，或将 chrome.alarms 警报设置为大约 5 秒的间隔。我不相信这是记录在案的行为，但事件页面通常会在 10 秒不活动后卸载，所以警报应该让你活着。

我已经提交[了一个关于这个的错误](https://code.google.com/p/chromium/issues/detail?id=204573)；如果您使用的是 websockets，我们避免卸载可能会更聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T18:29:21.987

Another thing that keeps packaged apps alive is having an active callback. So, for example, you could use setTimeout with a timeout value of say 5 to ensure you app remains alive. This is only a workaround though, and there should be a better way to reconcile lifetime of websockets and packaged apps.

There is a Chromium bug ([https://code.google.com/p/chromium/issues/detail?id=204573](https://code.google.com/p/chromium/issues/detail?id=204573)) tracking this issue.

As an FYI (because this is confusing), the "persistent": true line is currently ignored by Chrome. Packaged Apps (v2) are always set to "persistent": false.

# ruby-on-rails-3 - 如何将数据库操作从控制器移动到模型

> ID：15452110
> 
> 赞同：0
> 
> 时间：2013-03-16T17:06:30.640
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我已经开始使用新工具处理旧项目。这一次——Ruby 上的 Rails。我设法取得了一些进展，现在我想改进我的代码的一个元素。

整个项目是关于对所有跟踪的错误进行完整历史搜索的错误跟踪。现在我在用户输入错误的阶段。每个错误都属于属于项目的表。

唯一的问题 - 现在 - 是当我使用全新的名称时表名的自动完成（对于已经存在于数据库中的表，它工作得很好，在 Bug 条目中填充 table_id）。

负责输入（或从现有表中选择）表的部分视图如下所示：

```
<div class="control-group">
  <%= f.label :table_name, :class => 'control-label' %>
  <div class="controls">
    <%= f.autocomplete_field :table_name, autocomplete_table_name_bugs_path %>
  </div>
</div> 
```

没有什么不寻常的。这个去模型（Bug.rb）

```
class Bug < ActiveRecord::Base
  attr_accessible :bugid, :fixdate, :fixnote, :fixstate_id, :milestone, :newtarget, :notes, :oldtarget, :project_id, :bugreason, :reason_id, :regressiondate, :regressionstate_id, :source, :stringid, :table_id

  belongs_to :project
  belongs_to :table
  belongs_to :reason
  belongs_to :state

  def table_name
     table.name if table
  end

  #def table_name=(name)
  #  self.table = Table.find_or_create_by_name(name) unless name.blank?
  #end

end 
```

如您所见，目前没有验证。table_name=(name) 评论说它在我的代码中显然没有做任何事情。

这适用于错误控制器（bugs_controller.rb）

```
def create
  if params[:bug][:table_id].nil?
    if Table.find_or_create_by_name(params[:bug][:table_name])
      params[:bug][:table_id] = Table.find_by_name(params[:bug][:table_name]).id
      params[:bug].delete :table_name
    end

  end

  @bug = Bug.new(params[:bug])

  respond_to do |format|
    if @bug.save
      format.html { redirect_to bugs_path, notice: 'Bug was successfully created.' }
      format.json { render json: @bug, status: :created, location: @bug }
    else
      format.html { render action: "new" }
      format.json { render json: @bug.errors, status: :unprocessable_entity }
    end
  end
end 
```

我在这里只放了负责保存新错误的部分，当我正确完成这部分时，我将设法处理更新部分。

我要改进的是第一部分。现在它不仅负责将 table_name 更改为 table_id，还负责创建新表（如果它不存在）。我知道这部分应该由模型处理，但我不知道该怎么做，可以使用一些帮助。

另一部分，顺便说一句。是我的下拉菜单，用户可以在其中选择活动项目。它由部分处理：

```
<% @projects.each do |project| %>
    <% if project.id == session[:current_project].to_i %>
        <li class="disabled"><%= link_to project.name, '#' %></li>
    <% else %>
        <li><%= link_to project.name, choose_project_path(project.id) %></li>
    <% end %>
<% end %> 
```

但它只有在项目控制器中使用时才能正常工作。如何 - 按照书本 - 我可以从其他控制器处理这个？确切地说，我希望它在整个项目中以相同的方式工作。

现在我在每个控制器中通过片段来处理它，但我很确定 RoR 之神对此并不满意。

```
 before_filter :projects

  def projects
    @projects = Project.all
  end 
```

应该如何以适当的方式完成？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:39:54.050

所以我设法将逻辑从控制器转移到模型。此外，它还保存了我需要的所有数据 - table_id 到 bugs 表和 project_id（存储在会话中）到创建新表时的表表。

所以部分表单渲染没有改变：

```
<div class="control-group">
  <%= f.label :table_name, :class => 'control-label' %>
  <div class="controls">
    <%= f.autocomplete_field :table_name, autocomplete_table_name_bugs_path %>
  </div>
</div> 
```

模型现在看起来像这样：

```
class Bug < ActiveRecord::Base
  attr_accessible :table_name, :bugid, :fixdate, :fixnote, :fixstate_id, :milestone, :newtarget, :notes, :oldtarget, :project_id, :bugreason, :reason_id, :regressiondate, :regressionstate_id, :source, :stringid, :table_id

  belongs_to :project
  belongs_to :table
  belongs_to :reason
  belongs_to :state

  def table_name
     table.name if table
  end

  def table_name=(name)
    self.table = Table.find_or_create_by_name(name, project_id: self.project_id ) unless name.blank?
  end

end 
```

所以唯一的改变是取消注释 table_name= 方法并将 project_id 添加到新表的创建中（并且缺少 project_id 是它之前没有工作的原因）。

控制器如下所示：

```
 def create

    @bug = Bug.new(params[:bug])
    @bug.project_id = session[:current_project]

    respond_to do |format|
      if @bug.save
        format.html { redirect_to bugs_path, notice: 'Bug was successfully created.' }
        format.json { render json: @bug, status: :created, location: @bug }
      else
        format.html { render action: "new" }
        format.json { render json: @bug.errors, status: :unprocessable_entity }
      end
    end
  end 
```

它就像魅力一样工作。我仍然有问题，但会将其作为单独的问题发布。

# php - ajax调用特殊字符

> ID：15452111
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:06:31.393
> 
> 标签：php, javascript, ajax

我需要在文本框中写入 # 或 @ 时调用 ajax。我从 facebook 或 twitter 得到这个想法，当有人在评论区插入 @ 时，一个 div 会打开，显示你朋友的名字（或任何相关的）请帮助我如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:19:19.360

由于您希望在用户按下 # 或 @ 键时发生某些事情，因此您需要为该输入控件设置一个`onkeypress`(或`onkeydown`, ) 事件。`onkeyup`

在事件处理函数（您设置的）中，您将通过（该函数的）参数（或在 IE 浏览器中通过对象`event`的属性）通知`window`用户按下了什么键。通过简单的`if`测试，您将知道这是否是 # 键，如果是，您将进行异步 ajax 调用。

由于您的问题不是很具体，我希望这能让您了解它是如何完成的，我相信如果您改进您的问题，我们将为您提供更详细的信息:)

# sql - 我在自动增量列中出现错误。在错误记录之后

> ID：15452112
> 
> 赞同：2
> 
> 时间：2013-03-16T17:06:49.483
> 
> 标签：sql, sql-server-2008

在 sql server 2008 中

```
create table Person ( Person_ID bigint identity (1,1) not null Constraint PersonID_PK PRIMARY KEY (Person_ID) 
```

当记录正确时，它应该增加`id`1 个数字，如 12345。在填充人员表上的另一列记录期间发生错误，但下次它不应该增加 1，它会丢失。123 错误发生下一个`id`值是 5，两个错误下一个`id`值是 8、9、10、11 两个错误下一个`id`值是 13 请告诉我解决方案我如何在错误期间自动增加它不应该错过该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:26:08.757

在SQL Server中，当表中有一个Identity列，当你在这个表中插入一条记录时，如果插入失败，例如由于检查约束，identity仍然会增加。

如果你想防止这种情况发生。您可以尝试创建一个“代替”触发器。例如：

```
 CREATE TABLE TestTable 
(
 ID int IDENTITY (1, 1) NOT NULL,
  Name varchar(30) NOT NULL ,
) 
INSERT INTO TestTableVALUES ('Bob')
-- This will fail since NULL is not allowed
-- But id still +1
INSERT INTO TestTable VALUES (NULL)
INSERT INTO TestTable VALUES ('Mike')
-- Create INSTEAD OF trigger
CREATE TRIGGER TestTrigger
ON TestTable
INSTEAD OF INSERT
AS
-- Get the value(s) being inserted 
-- and repeat the insert
Declare @value varchar(100)
SET @value = (SELECT Name FROM Inserted)
-- If this statement fails, SQL won't increase the IDENTITY
INSERT INTO TestTable VALUES (@value)
-- Run the same INSERT again, when failed, ID will not increase
INSERT INTO TestTable VALUES('test1')
INSERT INTO TestTable VALUES(NULL)
INSERT INTO TestTable VALUES('test2')
SELECT * FROM TestTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:38:53.377

另一种替代方式，仅供您选择

每次插入失败后，您可以重置种子

```
 declare @maxid int
SELECT @maxid = MAX(id) FROM TestTable
DBCC CHECKIDENT('testtable',RESEED, @maxid ) WITH NO_INFOMSGS 
```

用户按照代码进行测试，它可以工作。

```
 INSERT INTO TestTable VALUES('test1')
INSERT INTO TestTable VALUES(NULL)
...reset seed
INSERT INTO TestTable VALUES('test2')
select * from TestTable 
```

# firefox - Selenium Firefox 19 CSS 菜单单击不起作用

> ID：15452115
> 
> 赞同：1
> 
> 时间：2013-03-16T17:07:12.743
> 
> 标签：firefox, selenium, selenium-webdriver

使用 Selenium 和早期的`webdriver (2.28.0)`and组合`Firefox (pre-19)`，以下代码有效。

```
driver.get("http://www.haemonetics.com/en");
driver.findElement(By.linkText("LOGIN")).click();
driver.findElement(By.linkText("Haemonetics")).click(); 
```

使用`webdriver 2.31.0`并且`Firefox 19.0.2`代码不起作用，我收到了`NoSuchElementException`第二个 findElement。

我尝试使用 xpath，它不适用于 Firefox，但适用于 Chrome 和 IE，它们是同一测试套件的一部分。

有什么想法或其他方式来完成同样的事情吗？我更愿意对上述浏览器使用相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:39:56.907

不确定这是否是您的错字，但它应该是“find_element”而不是“findelement”，至少据我所知，在 2.31 中是这样。

尝试

```
driver.find_element_by_link_text("LOGIN") 
```

如果这不起作用，请发布您的 HTML 代码，以便我们可以构建一个有效的 Xpath。

# scala - 将方法转换为功能？

> ID：15452116
> 
> 赞同：1
> 
> 时间：2013-03-16T17:07:14.633
> 
> 标签：scala

1) 这种结构叫什么名字？不能谷歌它。

2）为什么它不起作用？我希望打印消息。

```
class A {
  def m() {
    println("m()")
  }
}

object Main {

  def main(args: Array[String]) {
    val fun = (_: A).m _
    fun(new A())
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:41:01.330

正如 om-nom-nom 所说，将方法转换为函数称为“部分应用”。它可以通过使用下划线作为方法的“参数”来明确表示，或者当可用的类型信息足以推断出在需要函数的地方使用的方法名称可以部分由编译器自动表示应用于产生所需的功能。

现在，对于您的代码。正如所写，调用的结果`fun(new A())`是一个`Function1[Unit, Unit]`. 您必须使用`apply`该函数才能`println`调用

```
// Exiting paste mode, now interpreting.

defined class A
defined module Main

scala> Main.main(Array())

scala> def doIt { val fun = (_: A).m _; fun(new A())() }
doIt: Unit

scala> doIt
m() 
```

# google-tv - 如何推广仅限 Google TV 的应用程序

> ID：15452117
> 
> 赞同：0
> 
> 时间：2013-03-16T17:07:24.173
> 
> 标签：google-tv

我想知道在我为 Google TV 构建了一个应用程序之后，我如何才能获得[http://www.google.com/tv/apps.html](http://www.google.com/tv/apps.html)下列出的应用程序，或者 Google 是否会做任何事情来帮助推广仅限 Google TV 的应用程序? 由于设计电视友好的 UI 和导航系统需要单独的努力，我们可以做些什么来使其对 Google TV 用户更可见？现在，Play 商店在某种程度上非常混乱和无组织，或者可能只是因为我所在的国家/地区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:45:31.537

您应该联系 Google TV 开发者倡导者。特别是[Les Vogel](https://stackoverflow.com/users/738710/les-vogel-google-tv-devrel)或[Krispy](https://stackoverflow.com/users/195515/krispy)。过去，他们查看过应用程序并提供反馈。他们还帮助将有趣的应用程序添加到 Google TV 上 Play 商店的特色部分。

您还可以考虑加入[Sony Developer Network](http://www.developer.sony.com/)，它允许您上传您的应用程序并让他们在他们的 Google TV 设备上对其进行测试。他们提供了一份测试报告，这将有助于使您的应用程序更适合电视体验。如果他们喜欢您的应用，还可以将其添加到他们自己的 Google TV 设备上 Play 商店的特色应用部分。

G+ 上有一个[Google TV 社区](https://plus.google.com/communities/103154508693468858359/stream/3259fe34-4cda-43e6-aae7-e9ee724ec24b)，您可以在其中发布有关您的应用的信息，以获得用户的一些反馈。进行 Google 搜索，您还会找到其他与 Google TV 打交道的论坛，这些论坛将有助于宣传您的应用。

最好的营销工具是为您的应用程序建立一个网站，并提供一个博客来告诉用户您对该应用程序的更新和计划。您还应该创建一个 YouTube 视频来展示您的应用。在各种社交网络上创建页面，以便用户可以关注您的进度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T17:12:09.090

没什么，**特色应用**要么是非常成功的 GTV 应用，要么是谷歌选择的应用。目前没有办法对此做任何事情。但我猜如果谷歌继续 GTV 的话，他们会继续努力。

# python - 使用搜索 API 过滤掉转发

> ID：15452125
> 
> 赞同：0
> 
> 时间：2013-03-16T17:07:54.880
> 
> 标签：python, twitter

你知道为什么吗

```
http://search.twitter.com/search.json?q=%23work&result_type=recent&rpp=1&filter:retweets 
```

还在显示`RT`消息吗？

例如

```
u'RT @1YOUNGSCOOTER: F*** a friend be about your business #work' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:10:13.923

该推文不是转推，它只是一条以文本`RT`开头的推文。您可以[在原始推文上](https://twitter.com/moreJASplease/status/311761463356293120)看到这一点，上面*没有*“转发者”的文字。

如果我发送带有文本的推文，`RT @somename: this is not a retweet`您也会看到它。仅仅因为一条推文以开头`RT`并不能使它成为适当的转发。

您的查询工作正常。

# javascript - 模态弹出窗口在 FireFox 中有效，但在其他浏览器中无效

> ID：15452127
> 
> 赞同：1
> 
> 时间：2013-03-16T17:08:01.993
> 
> 标签：javascript, jquery, html, popup, modal-dialog

我开发了一个模态弹出窗口，当单击按钮时会弹出一个屏幕。

要么是 AddToBasketButton 点击​​事件，要么是 AskqlnkBtn 点击事件，它会打开窗口。

我的代码在 FireFox 中完美运行，但在 Internet Explorer / Chrome 中却不行。

运行代码时没有可见的 JavaScript 错误（据我所知）。

在旧浏览器中单击链接时，屏幕变暗，因此 loadPopup 必须以某种方式工作。

**自己看问题：**

如果你想体验我网站上的代码，[你可以在这里看到。](http://www.hcemballering.dk/omsnoeringsmaskine). 如果您点击“Læg i kurv”按钮，那么您可以自己尝试一下。

**有什么想法可能是错的吗？**我已经看了几个小时了，还是没有头绪！

**我的代码**：

```
function loadPopup() {
        //loads popup only if it is disabled  
        if ($('#<%=bgPopup.ClientID %>').data("state") == 0) {
            $('#<%=bgPopup.ClientID %>').css({
                "opacity": "0.7"
            });
            $('#<%=bgPopup.ClientID %>').fadeIn("medium");
            $('#<%=ReportError.ClientID%>').fadeIn("medium");
            $('#<%=bgPopup.ClientID %>').data("state", 1);
        }
    }

    function disablePopup() {
        if ($('#<%=bgPopup.ClientID %>').data("state") == 1) {
            $('#<%=bgPopup.ClientID %>').fadeOut("medium");
            $('#<%=ReportError.ClientID %>').fadeOut("medium");
            $('#<%=bgPopup.ClientID %>').data("state", 0);
        }
    }

    function setOrdering() {
        $("#contact-headline").text('Bestil produkt');
        $("#contact-messagelbl").text('Evt. kommentar');
        $('#<%=ContactTypeHiddenLbl.ClientID %>').val("bestil");
    }

    function setQuestions() {
        $("#contact-headline").text('Stil spørgsmål');
        $("#contact-messagelbl").text('Indtast dit spørgsmål');
        $('#<%=ContactTypeHiddenLbl.ClientID %>').val("spørgsmål");
    }

    function centerPopup() {
        $('#<%=ReportError.ClientID%>').center();
    }

    function resetContactControls() {
        $('#<%=ContactMailBox.ClientID %>').val('');
        $('#<%=ContactPhoneBox.ClientID %>').val('');
        $('#<%=ReportMessageBox.ClientID %>').val('');
        $('#<%=AskQuestionProductBtn.ClientID %>').show();
        $('#contact-statuslbl').val('');
    }

    jQuery.fn.center = function () {
        this.css("position", "absolute");
        this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) +
            $(window).scrollTop()) + "px");
        this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) +
            $(window).scrollLeft()) + "px");
        return this;
    };

    $(document).ready(function() {
        var mouseIsInside = true;

        $('#<%=ReportError.ClientID%>').hover(function () {
            mouseIsInside = true;
        }, function () {
            mouseIsInside = false;
        });

        $("body").mouseup(function () {
            if (!mouseIsInside) {
                disablePopup();
            }
        });

    });

        $('#<%=bgPopup.ClientID %>').data("state", 0);

        $('#<%=AddToBasketButton.ClientID %>').click(function () {
            resetContactControls();
            centerPopup();
            loadPopup();
            setOrdering();
        });

        $('#<%=AskqlnkBtn.ClientID %>').click(function () {
            resetContactControls();
            centerPopup();
            loadPopup();
            setQuestions();
        });

        $('#<%=PopupCloseLnk.ClientID %>').click(function () {
            disablePopup();
        });

        $(document).keypress(function (e) {
            if (e.keyCode == 27) {
                disablePopup();
            }
        });

    $(window).resize(function () {
        centerPopup();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:12:25.257

问题是由您定位元素的方式引起的。您将它定位为好像它应该被修复一样。尝试将其用于中心代码。

```
jQuery.fn.center = function () {
    this.css("position", "fixed");
    this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + "px");
    this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + "px");
    return this;
}; 
```

我更改为`position:fixed`并删除了`scrollTop`. 您不希望它绝对定位，因为这意味着它会随着页面滚动。

**编辑：**如果您仍然无法使其正常工作，请使用开发工具检查元素和相关样式以查看发生了什么，或者将其添加到函数中以查看您的`top`和`left`正在设置的内容：

```
alert(Math.max(0, (($(window).height() - this.outerHeight()) / 2) + "px");
alert(Math.max(0, (($(window).width() - this.outerWidth()) / 2) + "px"); 
```

# c++ - ARM C++ ABI：构造函数/析构函数返回值

> ID：15452133
> 
> 赞同：17
> 
> 时间：2013-03-16T17:08:39.600
> 
> 标签：c++, arm, abi

我一直在阅读 Clang 源代码，并发现了一些关于 ARM C++ ABI 的有趣之处，我似乎无法理解其理由。[来自ARM ABI 文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ihi0041d/index.html)的在线版本：

> 此 ABI 要求 C1 和 C2 构造函数返回*this*（而不是 void 函数），以便 C3 构造函数可以尾调用 C1 构造函数，而 C1 构造函数可以尾调用 C2。

（对于非虚拟析构函数也是如此）

我不确定这里是什么`C1`、、`C2`和`C3`参考……本节是对通用（即安腾）ABI 的 §3.1.5 的修改，但该节（至少在[此在线版本](http://mentorembedded.github.com/cxx-abi/abi.html)中）只是说明：

> 构造函数返回**void**结果。

无论如何，我真的不知道这样做的目的是什么：如何让构造函数返回*this*允许尾调用优化，以及在什么情况下？

据我所知，唯一一次构造函数可以尾调用另一个具有相同`this`返回值的情况是派生类具有单个基类、普通构造函数体、没有具有非普通构造函数的成员和没有虚拟的情况表指针。实际上，使用带有返回的尾调用进行优化似乎更容易，而不是更难，`void`因为这样可以消除单个基类的限制（在多个基类的情况下，`this`从最后调用的构造函数不会是`this`派生对象的指针）。

我在这里想念什么？ARM 调用约定是否有`this`必要进行返回？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T19:43:36.037

`C1`好的，来自@Michael 的有用链接使这一切都变得清晰`C2`...... `C3`ABI：

```
 <ctor-dtor-name> ::= C1   # complete object constructor
                   ::= C2   # base object constructor
                   ::= C3   # complete object allocating constructor
                   ::= D0   # deleting destructor
                   ::= D1   # complete object destructor
                   ::= D2   # base object destructor 
```

/ “`C3`完整对象分配构造函数”是构造函数的一个版本，它不是对通过参数传递给它的已分配存储进行操作，而是在`this`内部（通过`operator new`）分配内存，然后调用`C1`/“完整对象构造函数”，即用于完整对象情况的普通构造函数。由于`C3`构造函数必须返回`this`指向新分配和构造的对象`C1`的指针，因此构造函数还必须返回`this`指针才能使用尾调用。

/ “`C2`基类构造函数”是派生类在构造基类子对象时调用的构造函数；`C1`和`C2`构造函数的语义在`virtual`继承的情况下是不同的，并且为了优化目的也可以以不同的方式实现。在`virtual`继承的情况下，`C1`构造函数可以通过调用`virtual`基类构造函数然后尾调用`C2`构造函数来实现，因此如果前者调用，后者也应该返回`this`。

析构函数的情况略有不同但相关。根据 ARM ABI：

> 类似地，我们要求 D2 和 D1 返回这个，这样 D0 就不需要保存和恢复*这个*，并且 D1 可以尾调用 D2（如果没有虚拟碱基）。D0 仍然是一个 void 函数。

/ “ `D0`deleting destructor”在删除对象时使用，它调用`D1`/“complete object destructor”，然后`operator delete`用`this`指针调用以释放内存。让`D1`析构函数返回`this`允许`D0`析构函数使用其返回值来调用`operator delete`，而不必将其保存到另一个寄存器或将其溢出到内存中；同样，`D2`/"base object destructor" 也应该返回`this`。

ARM ABI 还添加了：

> 我们不需要对虚拟析构函数的 thunk 来返回*this*。这样的重击必须调整析构函数的结果，防止它尾调用析构函数，并取消任何可能的保存。
> 
> 因此，只能依靠 D1 和 D2 析构函数的非虚拟调用来返回*this*。

如果我理解正确，这意味着这种保存-恢复-省略优化只能在静态`D0`调用时使用`D1`（即在非`virtual`析构函数的情况下）。

# jquery - mouseenter 和 mouseleave 不起作用 jquery

> ID：15452136
> 
> 赞同：0
> 
> 时间：2013-03-16T17:08:44.063
> 
> 标签：jquery, jquery-hover, mouseenter, mouseleave

**HTML 代码：**

```
<body>
    <img class="card" src="card.jpg"/>
</body> 
```

**CSS 代码**

> .card{位置：静态；边距顶部：100px；左边距：100px；z 指数：10；}
> 
> .cuad{ 不透明度：0.3; 边框：4px纯黑色；宽度：40px；高度：40px；z指数：5；}

**jQuery代码**：

```
$(document).ready(function(e){
$(".card").mouseenter(function(e){
    $("body").append($("<div class='cuad'></div>").css({"position": "absolute", "top": (e.pageY-24)+"px", "left": (e.pageX-24)+"px"}));
});
$(".card").mouseleave(function(e){
    $(".cuad").remove();
}); 
```

});

这段代码的问题是，在.card类元素区域入口处创建的div闪烁，因为自动调用了mouseleave函数，最后进入了死循环。

有人看到代码中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:12:29.803

你为什么不使用`hover`

```
$(document).ready(function(e){
    $(".card").hover(function(){
         //Add code for mouse enter
    },
    function(){
         // Add code for mouse leave
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:53:31.060

这还有更多的问题。每次都会重新创建您的元素。更改 .card 和 .cuav 的 z-Index。使 .cuav 高于该卡，然后

试试这个：

```
$(document).ready(function(e) {
    var el = $("<div/>", {
                 class : 'cuad'
                });

$(".card").hover(function(e) {
                 $("body").append(el);
                 $(el).css({
                    position : "absolute",
                    top : e.pageY - 24,
                    left : e.pageX - 24

                 });

               }, function() {
                $(".cuad").remove(el);
         });
}) 
```

# java - 当我想从可点击的列表视图打开另一个类时，应用程序停止

> ID：15452143
> 
> 赞同：1
> 
> 时间：2013-03-16T17:08:56.330
> 
> 标签：java, android, class, listview

我正在尝试制作一个列表视图，当我单击一个项目时，我想打开另一个类。第二类实际上是从原始文件夹中打开文件。

我的课是

```
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class Cod_rutier extends MainActivity2A {

     private ListView lv1;

     private String lv_arr[]={"CAP.1: Dispozitii generale",
                "CAP.2: Vehiculele",
                "CAP.3: Conducatorii de vehicule",
                "CAP.4: Semnalizarea rutiera",
                "CAP.5: Reguli de circulatie",
                "CAP.6: Infractiuni si pedepse",
                "CAP.7: Raspunderea contraventionala",
                "CAP.8: Cai de atac impotriva procesului-verbal de constatare a contraventiei",
                "CAP.9: Atributii ale unor ministere si ale altor autoritati ale administratiei publice",
                "CAP.10: Dispozitii finale"};
        /** Called when the activity is first created. */
     /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.legislatie);

            lv1=(ListView)findViewById(R.id.listView1);

            // By using setAdpater method in listview we an add string array in list.

            lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 , lv_arr));

            lv1.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
              final TextView mTextView = (TextView)view;
              switch (position) {
                case 0:
                 Intent newActivity0 = new Intent(Cod_rutier.this, Legislatie1.class);     
                 startActivity(newActivity0);
                break;
                case 1:
                 Intent newActivity1 = new Intent(Cod_rutier.this,  Legislatie2.class);     
                 startActivity(newActivity1);
                break;
                case 2 :
                 Intent newActivity2 = new Intent(Cod_rutier.this,  Legislatie3.class);     
                 startActivity(newActivity2);
                break;
                case 3:
                 Intent newActivity3 = new Intent(Cod_rutier.this, Legislatie4.class);     
                 startActivity(newActivity3);
                break;
                default:
              }

          }
        });

        }} 
```

我把它放到清单文件中，但是当我运行它时，应用程序停止了。这是我的日志猫

```
03-16 18:58:35.373: E/AndroidRuntime(828): FATAL EXCEPTION: main
03-16 18:58:35.373: E/AndroidRuntime(828): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.vreaucarnet/com.example.vreaucarnet.Cod_rutier}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.os.Looper.loop(Looper.java:123)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-16 18:58:35.373: E/AndroidRuntime(828):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 18:58:35.373: E/AndroidRuntime(828):  at java.lang.reflect.Method.invoke(Method.java:521)
03-16 18:58:35.373: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-16 18:58:35.373: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-16 18:58:35.373: E/AndroidRuntime(828):  at dalvik.system.NativeStart.main(Native Method)
03-16 18:58:35.373: E/AndroidRuntime(828): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-16 18:58:35.373: E/AndroidRuntime(828):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:172)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.Activity.requestWindowFeature(Activity.java:2719)
03-16 18:58:35.373: E/AndroidRuntime(828):  at com.example.vreaucarnet.Cod_rutier.onCreate(Cod_rutier.java:33)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-16 18:58:35.373: E/AndroidRuntime(828):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-16 18:58:35.373: E/AndroidRuntime(828):  ... 11 more 
```

有人可以告诉我我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:15:10.597

请求任何 requestWindowFeature 调用都在您的活动中的 super.onCreate 调用之前完成

IE

```
requestWindowFeature(Window.FEATURE_NO_TITLE); this should be called before super.onCreate() 
```

改变喜欢

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
  super.onCreate(savedInstanceState); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:10:08.753

是这里：

```
Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content 
```

# javascript - 使用这个正则表达式，为什么它只捕获最后一个列表项

> ID：15452149
> 
> 赞同：1
> 
> 时间：2013-03-16T17:09:26.370
> 
> 标签：javascript, c++, regex

使用正则表达式：

```
(?:(?:(x),)*) 
```

匹配列表字符串，例如：

x,x,x,x,

我只有一个捕获组，持有最后一个 x。**我怎样才能为每个 x 获取一个捕获组。**

正则表达式是一种简化。X 代表一个长的正则表达式

*我在 C++、vs11 (ECMAScript ~=javascript) 中使用正则表达式。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:13:52.920

这是因为您使用`group`的是`*`量词..

第 1组中的第一次匹配..它`x,`再次匹配**覆盖**组值..它这样做直到最后一次匹配..`x,`

 **您可以改为使用`(x,)` **无量词来** **单独**`*`匹配文本

 *** * *

**笔记**

只有**.NET支持使用**[capturecollection](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capturecollection.aspx)捕获多个组值..ie 它会`x,x,x,x,`使用`(x,)*`正则表达式捕获****

# java - JButton 仅在我将鼠标悬停在它上面后才出现？

> ID：15452150
> 
> 赞同：0
> 
> 时间：2013-03-16T17:09:27.570
> 
> 标签：java, swing, jpanel, jbutton, gridbaglayout

我想知道为什么我的按钮直到我将鼠标悬停在它所在的位置之后才显示在面板上？如果我调整窗口大小，它也会再次消失。MainMenuScreen 只是我用作背景图像的图像。

```
 //MainMenu setup
    JPanel card2 = new JPanel();
    card2.setLayout(new GridBagLayout());       
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.insets = new Insets(2,2,2,2);
    gbc.anchor = GridBagConstraints.CENTER;
    MainMenuScreen mms = new MainMenuScreen();
    mms.setLayout(new FlowLayout());
    card2.add(mms);
    card2.add(menuButton1, gbc); 
```

这是我通过背景图像设置的方法。

```
public class MainMenuScreen extends JPanel{
    private static final long serialVersionUID = 1L;

    private BufferedImage background;

    public MainMenuScreen() {
        try {
            background = ImageIO.read(new File("M&M Arcade.png"));          
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(800, 600);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (background != null) {
            int x = (getWidth() - background.getWidth());
            int y = (getHeight() - background.getHeight());
            g.drawImage(background, x, y, this);
        }

        Graphics2D g2d = (Graphics2D) g;
        g2d.setPaint(Color.white);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:25:59.943

`JButton`不会显示，因为您对组件和您的使用相同的`GridBagConstraints`值，即它们存在于同一位置。一旦调整了 的值，就会出现按钮。[在添加](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component,%20java.lang.Object%29)到带有.`MainMenuScreen``JButton` `menuButton1``gbc``GridBagLayout`

**编辑：**

关于如何在`JPanel`容器上实现背景图像已经有很多讨论。一个值得注意的是[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)。

# javascript - jquery 当前导航项选择器

> ID：15452151
> 
> 赞同：1
> 
> 时间：2013-03-16T17:09:28.450
> 
> 标签：javascript, jquery, menu, navigation, nav

我不知道如何使用 jQuery 来设置当前导航项的样式。我已经尝试了几个教程，但无济于事。任何帮助，将不胜感激。提前致谢。

```
 <div id="menu">
     <ul id="nav">  
      <li><a href="http://poolguys.jaredmc.com/index.php">Contact</a></li> 
      <li><a href="http://poolguys.jaredmc.com/index.php">Gallery</a></li>
      <li><a href="http://poolguys.jaredmc.com/pool_liners.php">Pool Liners</a></li>
      <li><a href="http://poolguys.jaredmc.com/services.php">Services</a></li>
      <li><a href="http://poolguys.jaredmc.com/about.php">About</a></li> 
      <li><a href="http://poolguys.jaredmc.com/index.php">Home</a></li> 
    </ul><!--end nav-->         
  </div><!--end menu--> 

   /** nav styling **/

   //<![CDATA[
    jQuery(function() {
     jQuery('#nav li').each(function() {
      var href = jQuery(this).find('a').attr('href');
      if (href === window.location.pathname) {
      jQuery(this).addClass('current');
       }
      });
    });  
  //]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:28:39.560

您可以使用[属性等于选择器 [name="value"]](http://api.jquery.com/attribute-equals-selector/)来找出具有当前路径的导航项。

```
$(document).ready(function () {
    var str = location.href.toLowerCase();
    var item  = $('#nav li a[href="' + str  + '"]');
    if(item.length){
        $("li.current").removeClass("current");
        item.parent().addClass("current");
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/g6cD6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:33:26.860

我想到了！！感谢您的帮助 Will.i.am 和 Arun.p。在为每个页面提供正文 id 之后，我只需要下面的代码行。

```
 /** nav selector **/
     var bodyid = $('body').attr('id');  
     $('#main_nav ul li a.'+ bodyid).addClass('current'); 
```

# c# - C#、Visual Studio 2010、LINQ 连接多个数据表

> ID：15452158
> 
> 赞同：0
> 
> 时间：2013-03-16T17:09:59.190
> 
> 标签：c#, linq, join, datatable

我有一个相当大的问题，我似乎无法理解。从一开始...我有三个数据库表： 现在我将它们拉到 c# paorgram 中的 DATATABLES 中。这些 dt 被称为库存和物品。

```
|-----------------|   |------------------|
|  - Inventory -  |   |   - Items -      |
|-----------------|   |------------------|
|     slot1       |   |     itemid       |
|      qty1       |   |    itemname      |
|     slot2       |   | item description |
|      qty2       |   |------------------|
|-----------------| 
```

在库存中 - slot1 包含一个项目 ID。在库存中 - 数量 1 包含数量。

项目应该是相当自我解释的。

在 sql 中，我确定我会对 slot 1 = "" ... 我认为的项目执行连接？

无论如何，我想做的是找出插槽 1 中项目的 itemid、名称和描述。我希望你明白我的要求...... PS 我已经搜索了 google .. 几乎每次都搜索了大约 6 个小时我接近我认为会起作用的东西，但它不起作用。我确切地知道我想做什么，我只是不知道如何去做！另外，我确定它必须是一个 LINQ，因为你不能在 c# 中的数据表上运行 sql：/

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:14:36.540

据我了解，您正在寻找类似以下内容：

```
from c in Inventory
   from item in Items
     where item.ID = c.Slot
       select new {c.Slot, item.name, c....} 
```

这是使用 EF 的简单启动（我认为比 Dataset 好太多，......）： [http ://entityframeworktutorial.net/create-first-simple-EDM.aspx#.UUTNmjfxfXw](http://entityframeworktutorial.net/create-first-simple-EDM.aspx#.UUTNmjfxfXw)

我选择了一小部分教程来学习如何制作你的第一个示例，在你看到这个之后你可以先尝试代码。

# mysql - 从 Select 语句中选择：每个派生表都必须有自己的别名

> ID：15452164
> 
> 赞同：0
> 
> 时间：2013-03-16T17:10:30.927
> 
> 标签：mysql, sql, select

我需要按 ASC 顺序检索最后 3 行，所以这是最终查询：

```
SELECT c.comment_id,c.comment_message,c.comment_date,u.user_id,u.first_name,u.last_name,p.profile_picture_path 
FROM 
     (SELECT c.comment_id,c.comment_message,c.comment_date,u.user_id,u.first_name,u.last_name,p.profile_picture_path 
      FROM posts_comments c,users u,users_profile_pictures p 
      WHERE c.user_id = u.user_id AND u.user_id = p.user_id AND c.post_id = '82' 
      ORDER BY c.comment_date DESC 
      LIMIT 3) 
ORDER BY c.comment_date ASC 
```

我知道这里有问题，我收到此错误：`Every derived table must have its own alias`. 当适当的表指出它们时，如何从 Select 语句中选择列？意思是，我该如何选择`c.comment_id`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:10:59.007

```
SELECT  comment_id,
        comment_message,
        comment_date,
        user_id,
        first_name,
        last_name,
        profile_picture_path
FROM (
        SELECT  c.comment_id,
                c.comment_message,
                c.comment_date,
                u.user_id,
                u.first_name,
                u.last_name,
                p.profile_picture_path
        FROM    posts_comments c,
                users u,
                users_profile_pictures p
        WHERE   c.user_id = u.user_id
                AND u.user_id = p.user_id
                AND c.post_id = '82'
        ORDER BY c.comment_date DESC 
        LIMIT 3
    ) subA -- <<==  put alias here
           -- the purpose of the alias is to supply an identification 
           -- for the subquery
ORDER BY comment_date ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:23:58.637

```
 SELECT x.comment_id
      , x.comment_message
      , x.comment_date
      , x.user_id
      , x.first_name
      , x.last_name
      , x.profile_picture_path 
   FROM 
      ( SELECT c.comment_id
             , c.comment_message
             , c.comment_date
             , u.user_id
             , u.first_name
             , u.last_name
             , p.profile_picture_path 
          FROM posts_comments c
          JOIN users u
            ON u.user_id = c.user_id 
          JOIN users_profile_pictures p 
            ON p.user_id = u.user_id 
         WHERE c.post_id = 82 
         ORDER 
            BY c.comment_date DESC 
         LIMIT 3
      ) x 
  ORDER 
     BY x.comment_date ASC; 
```

# c# - 多个OfType Linq？

> ID：15452165
> 
> 赞同：16
> 
> 时间：2013-03-16T17:10:31.523
> 
> 标签：c#, linq

我有一个 linq 查询，它选择占位符中的所有文本框并使用结构将它们添加到列表中。我需要扩展此功能以获取 DropDownList 的 selectedvalue 我很确定我做错了，因为当我调试该方法时，列表计数为 0。

我自己的猜测是声明 2`OfType<>()`是错误的，但我对 linq 还是很陌生，我不知道该怎么做。

任何帮助都是极好的！提前致谢。

这是我到目前为止所拥有的：

```
public struct content
{
    public string name;
    public string memberNo;
    public int points;
    public string carclass;
}

List<content> rows = new List<content>();

protected void LinkButton_Submit_Attendees_Click(object sender, EventArgs e)
{
List<content> rows = PlaceHolder_ForEntries.Controls.OfType<TextBox>().OfType<DropDownList>()
        .Select(txt => new
        {
            Txt = txt,
            Number = new String(txt.ID.SkipWhile(c => !Char.IsDigit(c)).ToArray())
        })
        .GroupBy(x => x.Number)
        .Select(g => new content
        {
            carclass = g.First(x => x.Txt.ID.StartsWith("DropDownlist_CarClass")).Txt.SelectedValue,
            name = g.First(x => x.Txt.ID.StartsWith("TextBox_Name")).Txt.Text,
            memberNo = g.First(x => x.Txt.ID.StartsWith("TextBox_MemberNo")).Txt.Text,
            points = int.Parse(g.First(x => x.Txt.ID.StartsWith("TextBox_Points")).Txt.Text)
        })
        .ToList();
} 
```

这是创建控件的方法。

```
protected void createcontrols()
{
    int count = 0;
    if (ViewState["count"] != null)
    {
        count = (int)ViewState["count"];
    }
    while (PlaceHolder_ForEntries.Controls.Count < count)
    {
        TextBox TextBox_Name = new TextBox();
        TextBox TextBox_MemberNo = new TextBox();
        TextBox TextBox_Points = new TextBox();
        DropDownList DropDownList_CarClass = new DropDownList();
        DropDownList_CarClass.Items.Add("Car1");
        ...
        DropDownList_CarClass.Items.Add("Car2");
        TextBox_Name.Attributes.Add("placeholder", "Navn");
        TextBox_Name.ID = "TextBox_Name" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_Name.CssClass = "input-small";
        TextBox_MemberNo.Attributes.Add("placeholder", "Medlemsnr.");
        TextBox_MemberNo.ID = "TextBox_MemberNo" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_MemberNo.CssClass = "input-small";
        TextBox_Points.Attributes.Add("placeholder", "Point");
        TextBox_Points.ID = "TextBox_Points" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_Points.CssClass = "input-small";
        PlaceHolder_ForEntries.Controls.Add(TextBox_Name);
        PlaceHolder_ForEntries.Controls.Add(TextBox_MemberNo);
        PlaceHolder_ForEntries.Controls.Add(DropDownList_CarClass);
        PlaceHolder_ForEntries.Controls.Add(TextBox_Points);
        PlaceHolder_ForEntries.Controls.Add(new LiteralControl("<br />"));
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-16T17:13:05.873

您可以使用`Where`并检查类型对象的实例`is`！

```
List<content> rows = PlaceHolder_ForEntries.Controls.Cast<Control>().Where(c => c is TextBox || c is DropDownList)
        .Select(txt => new
        {
            Txt = txt,
            Number = new String(txt.ID.SkipWhile(c => !Char.IsDigit(c)).ToArray())
        })
        .GroupBy(x => x.Number)
        .Select(g => new content
        {
            carclass = g.First(x => x.Txt.ID.StartsWith("DropDownlist_CarClass")).Txt.SelectedValue,
            name = g.First(x => x.Txt.ID.StartsWith("TextBox_Name")).Txt.Text,
            memberNo = g.First(x => x.Txt.ID.StartsWith("TextBox_MemberNo")).Txt.Text,
            points = int.Parse(g.First(x => x.Txt.ID.StartsWith("TextBox_Points")).Txt.Text)
        })
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-16T17:27:17.560

[AppDeveloper 是对的](https://stackoverflow.com/a/15452191/105570)。`OfType<T>`过滤掉除`T`;以外的所有类型的对象 因此，通过两次过滤，您可以有效地消除列表中的所有对象。

如果您想将此逻辑（从列表中过滤除*两种*类型之外的所有类型）包装到可重用的东西中，那么没有什么能阻止您实现自己的扩展方法：

```
using System.Collections;

public static class EnumerableExtensions
{
    public static IEnumerable OfType<T1, T2>(this IEnumerable source)
    {
        foreach (object item in source)
        {
            if (item is T1 || item is T2)
            {
                yield return item;
            }
        }
    }
} 
```

在您的项目中包含上述类将允许您在应用程序中编写如下代码：

```
var textBoxesAndDropDowns = controls.OfType<TextBox, DropDownList>(); 
```

要了解有关扩展方法的更多信息，请参阅[有关该主题的 MSDN 文章](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。

请注意，由于上面的扩展方法“引入”了两种不同的类型，因此结果仍然是非泛型`IEnumerable`序列。如果您想将结果视为通用序列（例如， an `IEnumerable<Control>`），我建议使用`Cast<T>`扩展方法：

```
var filteredControls = controls.OfType<TextBox, DropDownList>().Cast<Control>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-19T05:29:48.557

我没有彻底阅读这个问题，但从标题的含义来看，您可以通过以下方式实现该行为：

```
var collection = new object[] { 5, "4545",  'd', 54.5 , 576 };

var allowedTypes = new[] { typeof(string), typeof(int) }; 
var result = collection
 .Where(item => allowedTypes.Contains(item.GetType())); 
```

[在这里](https://dotnetfiddle.net/C1n90o)查看它的实际应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T11:32:55.850

将@Shimmys 回答为扩展方法：

```
/// <param name="wantedTypes">--- Sample: --- new Type[] { typeof(Label), typeof(Button) }</param>
public static IEnumerable OfTypes(this IEnumerable collection, Type[] wantedTypes)
{
    if (wantedTypes == null)
        return null;
    else
        return collection.Cast<object>().Where(element => wantedTypes.Contains(element.GetType()));
} 
```

用法：

```
// List of 3 different controls
List<object> controls = new List<object>(new object[] { new Label(), new Button(), new TextBox() });

// Get all labels and buttons
var labelsAndButtons = controls.OfTypes(new Type[] { typeof(Label), typeof(Button) }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T17:14:47.633

您的问题在于`OfType<>().OfType<>()`您使用不同类型过滤了两次

# c - #include 标准库如何工作？

> ID：15452166
> 
> 赞同：0
> 
> 时间：2013-03-16T17:10:37.383
> 
> 标签：c, io, linker, include, c-preprocessor

我的基本问题是编译过程如何使用标准库例程。当我 `#include <stdio.h>`在**C**中时，预处理器是否会获取整个标准库并将其粘贴到我的源文件中？

如果是这样，当我使用库例程时，链接器是如何参与的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:15:47.273

预处理器，顾名思义，是在编译器之前运行的程序。它所做的只是简单的文本替换。

找到`#include`指令后，它只需将整个文件“粘贴”到指令所在的位置。这同样适用于宏扩展，当检测到宏“调用”时，宏的主体被“粘贴”到它的位置。

预处理器与库无关。只是 C（和 C++）需要在使用之前声明其所有函数和变量，因此将声明放在预处理器包含的头文件中是从库中获取这些声明的简单方法。

基本上有两种类型的库：仅标头库和需要链接的库。第一种类型，仅头文件库，正如其名称所暗示的那样：它们完全包含在您包含的头文件中。但是，绝大多数库都是您需要链接的库。这是在编译器完成其工作*后的一个步骤中由一个特殊程序完成的。*当然，如何使用它取决于环境。

一般来说，一个程序的编译可以分为以下几个步骤：

1.  编辑
2.  预处理器
3.  编译器
4.  链接器

编辑步骤是您创建源代码的过程。

预处理器和编译步骤通常放在一个步骤中，这可能是初学者对预处理器真正做什么感到困惑的原因。

最后一步，链接，是从编译器获取输入，并将其与您指定的库一起使用以创建最终的可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:14:02.610

> 当我在 C 中使用 include 时，预处理器是否会获取整个标准库并将其粘贴到我的源文件中？

只有你的头文件`#include`。

> 如果是这样，当我使用库例程时，链接器是如何参与的？

标准库头**文件只包含声明。**函数的**定义**（实现）在库文件中，很可能`/usr/lib/libc.ext`（`ext`是依赖于操作系统的扩展）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:14:39.733

当您在源代码中#include 某些内容时，预处理器会将您#include 的任何内容粘贴到源文件中。但具体来说，如果您包含库中的头文件，您只是包含函数声明，如`void a();`，链接器会在库本身中找到这些函数的实现。

# symfony - Symfony2 Capifony app_dev.php 未找到

> ID：15452167
> 
> 赞同：4
> 
> 时间：2013-03-16T17:10:47.447
> 
> 标签：symfony, http-status-code-404, capistrano, capifony

我已经将我的 Symfony2 网站部署到外部开发服务器，但是它没有从我的 github 存储库中提取 app_dev.php 文件。app.php 已被拉出，我可以从那里访问该站点，但是如果我转到 /app_dev.php，我会收到 404 未找到，因为该文件在服务器上不存在。该文件肯定在我的 github 存储库中，但不在我的 .gitignore 文件中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T17:12:58.880

Capifony`app_*.php`出于安全原因删除文件。你不应该在生产中使用它们。

如果你真的需要它们，你可以将`clear_controllers`选项设置为`false`：

```
set :clear_controllers, false 
```

# java - gson解析嵌套的json对象

> ID：15452172
> 
> 赞同：2
> 
> 时间：2013-03-16T17:11:13.527
> 
> 标签：java, json, collections, gson

我正在尝试将 json 字符串解析为 java 对象。目前代码是手动读取文件并生成java对象。但是，我希望将实现带到 gson。

这是我从 Web 服务调用中收到的 json：

```
{ "comment": [
        "This file is used to define the behavior for the elements parsed.",
        "Each entry in the file will have the format of element:name, skip:bool",
        "If SkipFlag is true, it means that element need not be processed.",
        "Convention used for elements and rule names is camelCase"
    ],
    "rules": [ { "element": "html", "skip": true },
               { "element": "head", "skip": true },
               { "element": "head", "skip": true },
               { "element": "body", "skip": true }
    ]
} 
```

我需要忽略评论并转换规则。这是我试图为规则 java 对象定义的 java 类型：

```
// Arraylist < Map < elementname, Map < name, value >  > >
ArrayList< Map<String, Map<String, String>  > > rules; 
```

有没有一种简单的方法可以用 gson 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:14:48.930

用这个

```
GsonBuilder builder = new GsonBuilder();    
Gson gson = builder.enableComplexMapKeySerialization().create(); 
Type type = new TypeToken<ArrayList< Map<String, ArrayList<Map<String, String> > > >>() {}.getType();
ArrayList< Map<String, ArrayList<Map<String, String> > > > obj = gson.fromJson(str, type); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T17:27:36.167

您可以声明特定的类：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import com.google.gson.Gson;

class Rule {
   String  element;
   boolean skip;
}

class ElementParser {
   String[] comment;
   Rule[]   rules;
}

public class JSonDecoder {
   public static void main( String[] args ) throws IOException {
      try( BufferedReader reader =
              new BufferedReader( new FileReader( "Skip.json" ))) {
         System.out.println( 
            new Gson().fromJson( reader, ElementParser.class ).toString());
      }
   }
} 
```

这是*长*版本：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import com.google.gson.Gson;

class Rule {
   String element;
   boolean skip;

   @Override public String toString() {
      StringBuilder sb = new StringBuilder();
      sb.append( '\t' );
      sb.append( element );
      sb.append( " ==> " );
      sb.append( skip );
      sb.append( '\n' );
      return sb.toString();
   }   
}
class ElementParser {
   String[] comment;
   Rule[]    rules;

   @Override public String toString() {
      StringBuilder sb = new StringBuilder();
      sb.append( "Comment:\n" );
      for( String c : comment ) {
         sb.append( '\t' );
         sb.append( c );
         sb.append( '\n' );
      }
      sb.append( "Rules:\n" );
      for( Rule r : rules ) {
         sb.append( r.toString());
      }
      return sb.toString();
   }
}

public class JSonDecoder {
   public static void main( String[] args ) throws IOException {
      try( BufferedReader reader = new BufferedReader( new FileReader( "Skip.json" ))) {
         System.out.println( 
            new Gson().fromJson( reader, ElementParser.class ).toString());
      }
   }
} 
```

结果：

```
Comment:
    This file is used to define the behavior for the elements parsed.
    Each entry in the file will have the format of element:name, skip:bool
    If SkipFlag is true, it means that element need not be processed.
    Convention used for elements and rule names is camelCase
Rules:
    html ==> true
    head ==> true
    head ==> true
    body ==> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:44:18.333

你也可以试试这个。。

用于保存您的规则和评论的数据类

```
import java.util.List;

public class Data {

    private List<String> comments;
    private List<Rule> rules;

    public Data() {}

    public List<String> getComments() {
        return comments;
    }

    public void setComments(List<String> comments) {
        this.comments = comments;
    }

    public List<Rule> getRules() {
        return rules;
    }

    public void setRules(List<Rule> rules) {
        this.rules = rules;
    }

} 
```

用于保存元素和跳过的 Rule 类 public class Rule {

```
 private String element;
    private boolean skip;

    public Rule() {}

    public String getElement() {
        return element;
    }

    public void setElement(String element) {
        this.element = element;
    }

    public boolean isSkip() {
        return skip;
    }

    public void setSkip(boolean skip) {
        this.skip = skip;
    }

} 
```

最后，您可以使用类似的方法将 json 中的规则转换为 java：

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.List;

import com.google.gson.Gson;

public class GsonTest {

    public static void main(String[] args) throws FileNotFoundException {
        BufferedReader bufferedReader = new BufferedReader(new FileReader("C:/Users/JESNAMOL/Desktop/json.txt"));//i have kept  your json string in a file for demonstration
        Gson gson = new Gson();
        Data data = gson.fromJson(bufferedReader, Data.class);
        List<Rule> rules = data.getRules();

        for (Rule rule : rules) {
            System.out.println("element: " + rule.getElement());
            System.out.println("skip: " + rule.isSkip());
        }
    }

} 
```

# azure - 将富文本编辑器结果上传到 windows azure

> ID：15452181
> 
> 赞同：1
> 
> 时间：2013-03-16T17:12:12.177
> 
> 标签：azure, upload, ftp

如何将 html 内容上传到网站 - 我需要在我的桌面客户端中指定互联网地址，但我不知道我应该输入什么地址 - 这个

```
 publishUrl="ftp://waws-prod-am2-001.ftp.azurewebsites.windows.net/site/wwwroot 
```

或其他东西。如何列出网站内容？是否存在任何微软文本编辑器 - 使用发布配置文件发布会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:33:37.733

现在确定您使用的是什么桌面客户端。根据您的上述信息，您似乎正在使用 Windows Azure 网站，因此我将为您提供从 FTP 客户端上传 HTML 内容的简单想法。

您真正需要的是在您的桌面（即 FileZilla）中安装一个 FTP 客户端，然后设置您的 Azure 网站 FTP 位置。

请按照我下面的博客首先设置您的 FileZilla FTP 客户端：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx)

配置 FTP 客户端后，您可以看到网站文件夹，您可以将 HTML 文件从本地计算机拖放到 Windows Azure 网站。

# php - Apache .htaccess 图像存在检查和重定向

> ID：15452186
> 
> 赞同：2
> 
> 时间：2013-03-16T17:12:26.630
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有一个像这样的文件目录的网站

```
/index.php (home page)

/storage (file storage directory)
    /800 (800 pixel width dir)
        /800x200.png
        /800x350.png
        ....
    /200 (200 pixel width dir)
        /200x150.png
        /200x185.png
        ...
    ....

/css
    /style.css

/images
    /logo.png

/jscript
    /autoload.js 
```

现在用户将提出请求`http://example.com/images/200x150`或`http://example.com/images/200x180`. 从两个 URL 我们知道第一个图像存在，`/storage/200/200x150.png`但不存在第二个。

所以，我想为此写`.htaccess`（理论上在这里）。

```
Rewrite Condition /storage/{width}/{widthxheight}.png existed?
Rewrite Rule {output the image}
Rewrite Failed {go to /somedir/failed.php} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:44:07.970

从您的示例中，图像请求的典型 URL 如下所示

`http://example.com/images/WidthxHeight`

其中`Width`和`Height`是变量并且`images`是固定字符串。

典型的替换 URL 应该是这样的：

`http://example.com/storage/Width/WidthxHeight.png`

where`Width`和`Height`是从传入 URL 传递的参数，而`storage`和`png`是固定字符串。

你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

# Make sure the request is for an image file
RewriteCond %{REQUEST_URI}  ^/images/([^x]+)x([^/]+)/?   [NC]

# Don't want loops
RewriteCond %{REQUEST_URI}  !storage                     [NC]

# Make sure the file exists
RewriteCond %{REQUEST_FILENAME}    -f

# If all conditions are met, rewrite
RewriteRule .*   /storage/%1/%1x%2.png                   [L]

## Else, map to failed.php
RewriteCond %{REQUEST_URI}  !storage                     [NC]
RewriteCond %{REQUEST_URI}  !failed\.php                 [NC]
RewriteRule .*   /somedir/failed.php                     [L] 
```

### 更新

对于带有一个参数和没有参数的传入 URL 有 2 个附加规则。

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

## New option 1
## Check if the request has any parameter
RewriteCond %{REQUEST_URI}  !storage                   [NC]
RewriteCond %{REQUEST_FILENAME}    -f
RewriteRule ^images/?$   /storage/200/200x200.png      [L,NC]

## New option 2
## Check if the request has only 1 parameter
RewriteCond %{REQUEST_URI}  !x                          [NC]
RewriteCond %{REQUEST_URI}  !storage                    [NC]
RewriteCond %{REQUEST_FILENAME}    -f
RewriteRule ^images/([^/]+)/?$   /storage/$1/$1x$1.png  [L,NC]

## Check if the request has 2 parameters
RewriteCond %{REQUEST_URI}  !storage                    [NC]
RewriteCond %{REQUEST_FILENAME}    -f
RewriteRule ^images/([^x]+)x([^/]+)/?  /storage/$1/$1x$2.png  [L,NC]

## Else, map to failed.php
RewriteCond %{REQUEST_URI}  !storage                     [NC]
RewriteCond %{REQUEST_URI}  !failed\.php                 [NC]
RewriteRule .*   /somedir/failed.php                     [L] 
```

对于永久和可见的重定向，将 [L,NC] 替换为 [R=301,L,NC]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:30:42.323

根据当前 .htaccess 的设置方式，您可以将所有不存在的文件路由到 failed.php：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /failed.php [L] 
```

# java - 将字符串转换为毫秒

> ID：15452188
> 
> 赞同：12
> 
> 时间：2013-03-16T17:12:31.613
> 
> 标签：java, datetime, milliseconds

我想计算两个日期之间的时间差（格式为“yyyyMMddHHmmss”）。基本思路是先将字符串日期转换成毫秒，然后得到时间差。

```
Calendar c1 = Calendar.getInstance();
c1.setTime(new SimpleDateFormat("yyyyMMddHHmmss").parse("20110327032913"));
System.out.println(c1.getTimeInMillis());
Calendar c2 = Calendar.getInstance();
c2.setTime(new SimpleDateFormat("yyyyMMddHHmmss").parse("20110327025913"));     
System.out.println(c2.getTimeInMillis()); 
```

结果：

1301189353000

1301191153000

显然，第一个日期晚于第二个日期，但其转换后的毫秒数更小。我在格式上有什么错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T17:31:32.040

以 ms 为单位的两个时间戳之间的时间差为 30 分钟：

```
1301191153000 - 1301189353000 = 1800000ms = 30 min 
```

由于 3 月 27 日的 DST 变化，时钟从凌晨 2 点到凌晨 3 点被调到凌晨 2 点，因此时间戳：

```
20110327032913 => 2011-03-27 03:29:13

20110327025913 => 2011-03-27 02:59:13 
```

实际上被解释为：

```
2011-03-27 03:29:13

2011-03-27 03:59:13 (+1 hour from original time) 
```

因此，第二个时间戳出现得较晚，当转换为 ms 时，它比第一个大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T17:32:08.517

我敢打赌，您在 2011 年 3 月 27 日的夏令时时间从 2 点（上午）更改为 3 点（上午）（请参阅[此链接](http://www.timeanddate.com/time/dst/2011.html)）

你的第一次是

```
2011 03 27 03 29 13
yyyy MM dd HH mm ss 
```

你的第二次是

```
2011 03 27 02 59 13 // does not exist because of time change
yyyy MM dd HH mm ss 
```

所以实际上，你的第二次是：

```
 ,,
2011 03 27 03 59 13
yyyy MM dd HH mm ss 
```

这显然比你的第一个晚了 30 分钟（而不是早了 30 分钟）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T17:42:28.797

也许这段代码可以帮助你：

```
 Calendar c1 = Calendar.getInstance(TimeZone.getTimeZone("UTC"));            
        Calendar c2 = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
        SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmmss");
        sdf.setTimeZone(TimeZone.getTimeZone("UTC"));       

        c1.setTime(sdf.parse("20110327032913"));
        System.out.println(c1.getTimeInMillis());

        c2.setTime(sdf.parse("20110327025913"));     
        System.out.println(c2.getTimeInMillis());
                    System.out.println((c1.getTimeInMillis()-c2.getTimeInMillis())/(1000*60)+ " minutes"); 
```

*问题是，如果您的字符串不是 UTC，您可能永远不知道是否应用了时间更改，因此间隔可能是一小时。

# c# - EF Code First - 急切加载和过滤子类属性（继承）

> ID：15452192
> 
> 赞同：2
> 
> 时间：2013-03-16T17:13:10.303
> 
> 标签：c#, entity-framework, inheritance, ef-code-first

我有以下课程（过于简化）：

```
public class Person
{
    public int ID { get; set; }
}
public class Content
{
    public int ID { get; set; }
}
public class Image : Content
{
    public bool Private { get; set; }
    public Person Author { get; set; }
}
public class Tag
{
    public int ID { get; set; }
    public Content Content { get; set; }
    public Person Person { get; set; }
} 
```

我想得到所有在`Tags`哪里`Content`是一个`Image`和`Image`不是`Private`（同时急切地加载一个属性`Image`）。尝试执行此操作但不起作用的示例：

```
var tags = context.Tags
    .Include("Content.Author")
    .Include("Person")
    .Where(t => !((Image)t.Content).Private); 
```

我收到以下错误：

> 无法将类型“内容”转换为类型“图像”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。

并`Where`删除了该子句：

> 指定的包含路径无效。EntityType“内容”未声明名为“作者”的导航属性。

我需要什么样的查询和/或模型模式更改才能完成这种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:21:21.147

`Where`您可以通过以下方式在子句中编写过滤器：

```
.Where(t => t.Content is Image && !(t.Content as Image).Private) 
```

但是，更大的问题是`Include`零件。该`Author`属性仅存在于派生类型`Image`，但`Include`会尝试加载基类型`Content`（没有`Author`属性），因为这`Content`是`Tag`. 你不能`Include`在这里使用。

您可以尝试将查询重写为投影：

```
var tags = context.Tags
    .Where(t => t.Content is Image && !(t.Content as Image).Private)
    .Select(t => new
    {
        Tag = t,
        Image = t.Content as Image, // possibly this line is not needed
        Author = (t.Content as Image).Author,
        Person = t.Person
    })
    .AsEnumerable()
    .Select(x => x.Tag)
    .ToList(); 
```

只要您不禁用更改跟踪（`AsNoTracking`例如），EF 应该自动将对象图放在一起，以便加载的标签具有填充的`Content`,`Content.Author`和`Person`属性（*就像*您已使用 加载导航属性一样`Include`）。

[顺便说一句：在 UserVoice 上](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1249289-include-property-of-derived-classes)请求包含派生类型的导航属性的功能。它与您的情况并不完全相同，但在评论部分甚至是针对您的场景的请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T09:21:59.700

尝试将类定义更改为...

```
class Person
{
  public int ID { get; set; }
}

class Content
{
  public int ID { get; set; }
}

class Image : Content
{
  public bool IsPrivate { get; set; }   
  public virtual Person Author { get; set; }
}

class Tag
{
public int ID { get; set; }
public Content Content { get; set; }
public Person Person { get; set; }
} 
```

私有似乎不是一个好名称，因为它与公共或私有声明冲突。

# php - PHP - 购物车，会话问题

> ID：15452197
> 
> 赞同：0
> 
> 时间：2013-03-16T17:13:49.277
> 
> 标签：php

当一个项目被添加到购物车时，项目 ID 和该项目的数量应该被显示。在这种情况下，仅从会话中解析数量。未显示项目 ID。此外，当添加不同的项目时，购物车应显示具有单独数量的第二个项目。

```
<?php 
session_start();

?>
<?php 
if (isset($_POST['pid'])) {
    $pid = $_POST['pid'];
    $wasFound = false;
    $i = 0;

    if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1){
        $_SESSION["cart_array"] = array(1 => array("item_id" => $pid, "quantity" => 1));
    } else {
        foreach ($_SESSION["cart_array"] as $each_item) {
            $i++;
            while (list($key, $value) = each($each_item)) {
                if ($key == "item_id" && $value == $pid) {
                array_splice($_SESSION["cart_array"], $i-1, 1,array(array("item_id" => $pid, "quantity" => $each_item['quantity'] + 1)));
                $wasFound = true;
               }
            }
        }
        if ($wasFound == false) {
        array_push($_SESSION["cart_array"], array("item_id" => $pid, "quantity" => 1));
    }
  }
 }
?>
<?php
if (isset($_GET['cmd']) && $_GET['cmd'] == "emptycart") {
    unset($_SESSION["cart_array"]);
}
?>
<?php
$cartOutput = "";
if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1) {
    $cartOutput = "<h2 align='center'>Your shopping cart is empty</h2>";
} else {
    $i = 0;
    foreach ($_SESSION["cart_array"] as $each_item) {
        $i++;
        $cartOutput .= "<h2>Cart item $i</h2>";
        while (list($key, $value) = each ($each_item)) {
            $cartOutput .= "key:$value<br />";
        }
    }
}
?> 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:38:44.943

那是您在那里进行的一些非常奇怪的数组操作。您应该能够通过一个`foreach`循环完成所需的一切：

```
 foreach ($_SESSION["cart_array"] as $item_key => $each_item) {
        if ( $each_item['item_id'] == $pid )
        {
            $_SESSION["cart_array"][$item_key]['quantity']++;
        }
        $wasFound = true;
    } 
```

如果您不熟悉，这`foreach ( $foo as $key => $value )`是执行您所写内容的正常方式，`while( list($key, $value) = each($foo))`并且`$foo++`是`$foo = $foo + 1`.

如果您使用产品 ID 作为购物车数组的键，实际上可以使这更简单；这样您就可以询问 PHP 是否存在密钥，如下所示：

```
if ( array_key_exists($pid, $_SESSION['cart_array']) )
{
    $_SESSION['cart_array'][$pid]['quantity']++;
}
else
{
    $_SESSION['cart_array'][$pid] = array('item_id' => $pid, 'quantity' => 1);
} 
```

# c# - If 语句在计时器中时未执行。（表格尺寸）

> ID：15452201
> 
> 赞同：0
> 
> 时间：2013-03-16T17:14:04.413
> 
> 标签：c#, winforms, timer

好吧，所以基本上我已经尝试了我知道的所有可能的方法来解决这个问题。谁能告诉我我在这里做错了什么，这应该可以...

```
private void Main_Load(object sender, EventArgs e)
    {
        this.Size = new Size(0,0);
        timer2.Enabled = true ;

    }

    public void timer2_Tick(object sender, EventArgs e)
    {
        this.Width += 20;
        this.Height += 20;

        if (this.Height == 400)
        {
            timer2.Enabled = false;
        } 
```

在宏伟的计划中，我以 100 毫秒的间隔一次将表单的大小调整为 20 像素。

编辑：这是我非常粗略地尝试制作表单动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:21:16.593

您可能应该使用大于更正您的 if 语句：

```
public void timer2_Tick(object sender, EventArgs e)
{
    this.Width += 20;
    this.Height += 20;

    if (this.Height >= 400)
    {
        timer2.Enabled = false;
    }
} 
```

祝你的任务好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:30:32.930

```
public void timer2_Tick(object sender, EventArgs e)
{

    if (this.Height < 400)
    {
        this.Height += 20;
        this.Width += 20;   

    }
    else
    {
        timer2.Enabled = false;
    }
} 
```

# android - Android Widget：添加一个新项目（“作者”）文本视图

> ID：15452205
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:14:18.107
> 
> 标签：android, widget, textview

大家，我正在开发一个简单的 android 小部件（“Quotes”）。该项目运行良好，但我想添加一个新的文本视图，显示特定“思想”的作者。我在widget.xml（布局）中创建了一个新的文本视图......我是新手！！！

这里的代码是：

WidgetQuotes.Java

```
 import android.app.PendingIntent;
  import android.appwidget.AppWidgetManager;
  import android.appwidget.AppWidgetProvider;
  import android.content.Context;
  import android.content.Intent;
  import android.widget.RemoteViews;

   public class WidgetQuotes extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    // Build the intent to call the service
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
    Intent intent = new Intent(context.getApplicationContext(), UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    RemoteViews remoteViews2 = new RemoteViews(context.getPackageName(), R.layout.widget);
    Intent intent2 = new Intent(context.getApplicationContext(), UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    // To react to a click we have to use a pending intent as the
    // onClickListener is
    // excecuted by the homescreen application
    PendingIntent pendingIntent = PendingIntent.getService(
            context.getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    remoteViews.setOnClickPendingIntent(R.id.widget_textview, pendingIntent);

    PendingIntent pendingIntent2 = PendingIntent.getService(
            context.getApplicationContext(), 0, intent2, PendingIntent.FLAG_UPDATE_CURRENT);

    remoteViews2.setOnClickPendingIntent(R.id.widget_textview2, pendingIntent2);

    // Finally update all widgets with the information about the click
    // listener
    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews2);

    // Update the widgets via the service
    context.startService(intent);
    context.startService(intent2);
}

@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);

}
public void onReceive1(Context context, Intent intent2) {   
    super.onReceive(context, intent2);
}

} 
```

更新小部件服务.Java

```
 import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Random;

   import android.app.Service;
   import android.appwidget.AppWidgetManager;
   import android.content.Intent;
   import android.content.res.AssetManager;
   import android.os.IBinder;
   import android.util.Log;
   import android.widget.RemoteViews;

   public class UpdateWidgetService extends Service {
private static final String TAG = UpdateWidgetService.class.getSimpleName();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Log.d(TAG, "onStart started");

    // Create some random data
    Random random = new Random();

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    if (appWidgetIds.length > 0) {

        for (int widgetId : appWidgetIds) {
            List<String> qList = getListFromTxtFile("quotes.txt");
            int nextInt = random.nextInt(qList.size());

            RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
            remoteViews.setTextViewText(R.id.widget_textview, qList.get(nextInt));
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();
    }
    super.onStart(intent, startId);
}

public List<String> getListFromTxtFile(String txtFileName){

//  File sdcard = Environment.getExternalStorageDirectory();
// Get the text file
// File file = new File(sdcard,txtFileName);

AssetManager am = this.getAssets();

List<String> qList = new ArrayList<String>();

//Read text from file

try {
    InputStream is = am.open("quotes.txt");
          //BufferedReader br = new BufferedReader(new FileReader(file));
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    String line;

     // get data in text file line by line
    while ((line = br.readLine()) != null) {

        Log.d("line",line);

       qList.add(line);
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here

    {Log.d("Error","There are an error");}
}
return qList;

}

   } 
```

小部件.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="160dp"
android:orientation="vertical"
android:background="@drawable/widget_frame3"
android:layout_gravity="center">

<TextView
    android:id="@+id/widget_textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left|center_horizontal"
    android:layout_marginLeft="80dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="30dp"
    android:padding="10dip"
    android:scrollbars="vertical"
    android:text="@string/widget_text"
    android:textColor="@android:color/white" />

<TextView
    android:id="@+id/widget_textview2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left|center_horizontal"
    android:layout_marginLeft="80dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:padding="10dip"
    android:scrollbars="vertical"
    android:text="@string/widget_text2"
    android:textColor="@android:color/white" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:59:40.737

我认为您不能在小部件中创建文本视图。在小部件中只能点击和触摸

# android - 图像作为 UI 的背景

> ID：15452206
> 
> 赞同：1
> 
> 时间：2013-03-16T17:14:22.953
> 
> 标签：android, android-ui

我是 android 世界的新手，正在开发一个 android 应用程序。

我在我的应用程序中使用了许多按钮和图像按钮。

现在我想用背景图像替换它们。（所以我可以轻松制作漂亮的 gui）

我知道我可以使用视图侦听器，并且可以从 onclick 方法中找到单击的 x 和 y 坐标。

但我想知道如何找到点击了图像的哪一部分。因为不同的手机有不同的分辨率，我怎样才能有效地做到这一点？

还有一件事，这样处理 gui 好吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:19:23.390

AFAIK 以这种方式处理 GUI 并不是一个好习惯。主要是因为 android 屏幕尺寸不是标准的，所以你永远无法确定它在所有设备上都能完美运行。您当然可以使用 onTouchListener 处理事件，并从 MotionEvent 对象的坐标中查看图像的哪一部分被单击。但是，我不建议这样做。

创建不同屏幕尺寸的布局并使用 Buttons 和 ImageButtons 处理事件会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:28:40.097

您首先需要在执行其他代码之前设置初始窗口宽度和高度，并根据屏幕尺寸加载质量图像。因此，例如，您可以拥有 3 组不同大小的图像。一个用于 5 英寸及以下的屏幕。另一个用于 7 英寸平板电脑。另一个 10 并且可能是以上任何内容的另一个超高质量图像。由于在不久的将来出现的许多设备正在达到比以前开发的分辨率高得多的分辨率。只需首先运行代码来检测手头的初始窗口大小并根据该设备的分辨率加载图像。按照您的计划从他们的计划中进行。

Also to jump on answer above. Detect rotation event and adjust image accordingly. and update accordingly. You are adding more programming of course but no reason what you are asking could not be done. Just a few extra events detection and you should be good to go to accomplish exactly what you are looking to do

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:28:13.217

您可以在布局 xml 文件中对背景图像使用 android:background 属性...

但是您也可以通过编程方式设置 UI 元素的背景

# qt - Qt：QTableWidget/QTableView 在全视口中交替行颜色

> ID：15452207
> 
> 赞同：7
> 
> 时间：2013-03-16T17:14:24.800
> 
> 标签：qt, user-interface

我有一个 QTableView 包含来自数据库的数据行。但是，设置 setAlternatingRowColors(true) 仅交替具有数据的行颜色 - 表的其余部分只是白色，这不是您所期望的行为（例如，查看任何浏览器的书签列表 - 空行具有交替颜色）。

有谁知道 Qt 提供的表格视图的替代方法或替代方法？我摆弄了样式表和项目委托，结果相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-22T06:32:57.233

你为什么不为此使用 Qt QSS？它工作得很好。看看这里：[http ://www.qtcentre.org/threads/42211-QTableWidget-alternating-background-color?p=263046#post263046](http://www.qtcentre.org/threads/42211-QTableWidget-alternating-background-color?p=263046#post263046)

```
myTable->setAlternatingRowColors(true);
myTable->setStyleSheet("alternate-background-color: yellow;background-color: red;"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-24T10:06:56.267

您可以`data()`像这样重新实现模型的方法：

```
QVariant MyModel::data(const QModelIndex& index, int role) const
{
    if(role == Qt::BackgroundColorRole)
        return color;
    ...
} 
```

应该可以对委托使用`setModelData()`.

# extjs - 如何查询所有设置了一些配置选项的 ExtJS 组件

> ID：15452223
> 
> 赞同：1
> 
> 时间：2013-03-16T17:15:41.173
> 
> 标签：extjs, extjs4

我已经`showCondition`为视图配置中的某些项目指定了自定义属性。如何查询所有这些组件？

我试过[Ext.ComponentQuery.query()](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.ComponentQuery-method-query)。问题是，它`query()`返回给我正确数量的元素，但没有“真正的”组件，也就是说，当我尝试执行 elements[0].hide() 时，没有任何效果。

我注意到，当我`ref`在控制器类中使用相同的元素时，`hide()`效果很好。

之后，我已经了解`console.log`了两种获取元素的方法的结果，并注意到了奇怪的事情。首先，返回的元素具有不同的 html`id`属性（`textfield-1115`和`textfield-1089`）。其次，`query()`方法返回的元素已经具有 hidden=true 属性（这就是 hide() 无效的原因）。这两个元素都是`textfield`组件。

下面是相关的代码部分。重要的是在`onAfterRenderForm()`。

鉴于：

```
Ext.define('MyApp.view.Test', {
    extend: 'Ext.container.Container',
    alias: 'widget.test',

    layout: 'fit',

    initComponent: function() {
        Ext.apply(this, {
            items: [
                {
                    title: 'form',
                    itemId: 'myForm',
                    xtype: 'form',
                    items: [
                        {
                            xtype: 'textfield',
                            fieldLabel: 'code',
                            showCondition: 'is-root',
                            allowBlank: false,
                            vtype: 'alphanum'
                        }
                    ]
                }
            ]
        });
        this.callParent(arguments);
    }
}); 
```

在控制器中：

```
Ext.define('MyApp.controller.Test', {
    extend: 'Ext.app.Controller',

    requires: [
        'MyApp.view.Test'
    ],

    refs: [
        {
            ref: 'codeField', selector: '[showCondition]'
        }
    ],

    init: function() {
        this.control(
            {
                '#myForm': {
                    afterrender: this.onAfterRenderForm
                }
        );
    },

    onAfterRenderForm: function(oForm) {
        var elements = oForm.query('[showCondition]');
        console.log(elements[0]);
        console.log(this.getCodeField());
        if(elements[0].id == this.getCodeField().id)
            alert('Elements are not the same!!!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:41:48.717

这：

```
refs: [{
    ref: 'codeField', selector: '[showCondition']
}] 
```

与 略有不同`oForm.query('[showCondition]')[0]`。

对于`ref`您，您可以使用已定义的 showCondition 值抓取找到的第一个组件。在`oForm.query`中，您正在获取第一个发现的组件*，它是 oForm 的子*组件，它具有已定义的 showCondition 值。

这意味着，如果您的应用程序中的任何视图中有其他字段定义了 showCondition，则对 ref 生成的 getter 的调用可能会返回这些字段中的任何一个。这取决于 Ext 决定将它们放入的顺序。

在我看来，有几件事正在发生

1.  您的应用程序中有其他字段已定义 showCondition 但不在您的控制器正在查看的表单上。
2.  您的视图正在以隐藏状态呈现。是否被添加为卡片布局中的项目或类似的东西？

# linux - AMPL 找不到“minos”

> ID：15452225
> 
> 赞同：6
> 
> 时间：2013-03-16T17:15:46.223
> 
> 标签：linux, optimization, linear-programming, ampl

我遇到了 AMPL 的问题。我正在使用 32 位版本的 Linux 操作系统。我正在尝试解决一个简单的线性编程问题，但我不明白出了什么问题……这里还有模型、数据文件和会话脚本。命令“solve”的答案是：找不到“minos”。但是求解器目前在我的文件夹中！更改求解器无济于事。有什么建议么？

问题模型：

```
param n;
param t;
param p{i in 1..n};
param r{i in 1..n};
param m{i in 1..n};
#Declaration of variables
var x {i in 1..n} >=0;
#Objective Function
maximize revenues: sum {i in 1..n} p[i]*x[i] ;
#Constraints
subject to Aval_Time: sum{i in 1..n} x[i]/r[i]<=t;
subject to Max_Flavor {i in 1..n}: x[i]<=m[i]; 
```

问题数据：

```
param n := 4;# No of Flavors
param t := 40; # Total labor hour in a week
param p := 1 1 2 1.5 3 1 4 1.5; # Revenue per package flavor i
param r := 1 40 2 30 3 50 4 20; # Production rate of package flavor i
param m := 1 1000 2 900 3 500 4 800; # Maximum demand package flavor i 
```

AMPL 会议：

```
reset;
model example2.mod;
data example2.dat;
solve;
display x; 
```

系统回复：

找不到“米诺斯”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:10:42.153

错误消息试图告诉您**求解器丢失**。AMPL 不能解决您的问题，它只是将您的模型转换为适合求解器的形式，然后将其传递给求解器，实际的解决方案由求解器完成。那是关于错误信息。

你需要一个求解器来解决这个问题。[下载](http://netlib.sandia.gov/ampl/student/linux/minos.gz)并提取 minos 求解器。使其可执行：在 Bash shell（*不是*AMPL shell）中发出以下命令：

```
chmod +x minos 
```

`solve;`在发出命令之前，您还必须告诉 AMPL 求解器在哪里。在求解命令之前，在 AMPL shell 或模型文件中发出此命令：

```
option solver "/path/to/minos"; 
```

您`/path/to/minos`根据安装更改的位置。

就这样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T15:24:39.890

在 Unix 和类 Unix 操作系统（如 Linux）上，当前目录通常不在[搜索路径](http://en.wikipedia.org/wiki/PATH_%28variable%29)上。您有以下选择：

*   在命令`option solver './minos';`之前使用。`solve`
*   与上面类似，但使用 Ali 建议的 minos 的绝对路径。
*   将 AMPL 目录的路径添加到`PATH`环境变量中。
*   复制（或创建符号链接）`minos`到搜索路径上的某个目录，例如`/usr/local/bin`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T12:20:31.413

很抱歉我的回复延迟。通过执行以下命令解决了问题

```
option solver "./minos"; 
```

在带有 AMPL 的文件夹中。谢谢。

# kernel-module - 如何在不使用 dmesg 的情况下显示来自内核模块的消息？

> ID：15452231
> 
> 赞同：1
> 
> 时间：2013-03-16T17:16:13.607
> 
> 标签：kernel-module, kernel

为了显示加载到内核模块中的消息，我可以使用命令

```
dmesg 
```

这个命令有其他选择吗？该函数如何获取所有这些内核消息？

# php - php - 表单包括图片上传

> ID：15452232
> 
> 赞同：-2
> 
> 时间：2013-03-16T17:16:13.720
> 
> 标签：php, javascript, sql, ajax

我尝试制作一个包含图片上传的表格。假设我有`participant`要插入的表格：

```
INSERT INTO `participant`(`Matric`, `Name`, `IC`, `Address`, `Tel`, `Phone`, 
`Email`, `Phone_Ref`, `Institute`, `Course`, `Pic_Participant`, `Exp_Work`) 
VALUES ([value-1],[value-2],[value-3],[value-4],[value-5],[value-6],[value-7],
[value-8],[value-9],[value-10],[value-11],[value-12]) 
```

我想要做的是插入数据并上传图像。它的属性是`Pic_Participant`。

我搜索使用 ajax [Ajax Image Upload 和 Resize with jQuery 和 PHP 的上传](http://www.saaraan.com/2012/05/ajax-image-upload-and-resize-with-jquery-and-php)。然后我想流程，填写表格然后在同一页面上传图片，然后在上传图片后将图片数据发送到数据库，但表格还没有提交。如何从表格图像中获取属性以添加到表格参与者中？

请帮我。我对此很陌生。

* * *

> 编辑

我尝试这段代码但得到一个错误：未定义的变量

```
 <?php

session_start();

include 'dbconnect.php';

function is_valid_type($file)
{
$valid_types = array("image/jpg", "image/jpeg", "image/bmp", "image/gif");

if (in_array($file['type'], $valid_types))
return 1;
return 0;
}

function showContents($array)
{
echo "<pre>";
print_r($array);
echo "</pre>";
}

$TARGET_PATH = "upload/";

//ERROR START HERE

$Matric = $_POST['Matric'];
$Name = $_POST['Name'];
$IC = $_POST['IC'];
$Address = $_POST['Address'];
$Tel = $_POST['Tel'];
$Phone = $_POST['Phone'];
$Email = $_POST['Email'];
$Phone_Ref = $_POST['Phone_Ref'];
$Institute = $_POST['Institute'];
$Course = $_POST['Course'];
/* $fname = $_POST['fname'];
$lname = $_POST['lname']; */
$image = $_FILES['image'];
$Exp_Work =$_POST['Exp_Work'];
//ERROR END HERE

$Matric = mysql_real_escape_string($Matric);
$Name = mysql_real_escape_string($Name);
$IC = mysql_real_escape_string($IC);
$Address = mysql_real_escape_string($Address);
$Tel = mysql_real_escape_string($Tel);
$Phone = mysql_real_escape_string($Phone);
$Email = mysql_real_escape_string($Email);
$Phone_Ref = mysql_real_escape_string($Phone_Ref);
/* $Total_sales = addslashes($_POST['Total_sales']);
$Date = addslashes($_POST['Date']); */
/* $Cer_name = mysql_real_escape_string($Cer_name); */
$Institute = mysql_real_escape_string($Institute);
$Course = mysql_real_escape_string($Course);
/* $Cat_name = addslashes($_POST['Cat_name']);
$Product_name = addslashes($_POST['Product_name']); */
/* $fname = mysql_real_escape_string($fname);
$lname = mysql_real_escape_string($lname); */
$image['name'] = mysql_real_escape_string($image['name']);
$Exp_Work = mysql_real_escape_string($Exp_Work);

$TARGET_PATH .= $image['name'];

if ( $Matric == "" ||$Name == "" ||$IC == "" ||$Address == "" ||$Tel == "" ||$Phone == "" ||$Email == "" ||$Phone_Ref == "" || $Institute == "" || $Course == ""|| $image['name'] == ""|| $Exp_Work == "" )
{
$_SESSION['error'] = "All fields are required";
echo "All fields are required";
exit;
}

if (!is_valid_type($image))
{
$_SESSION['error'] = "You must upload a jpeg, gif, or bmp";
echo"You must upload a jpeg, gif, or bmp";
exit;
}

if (file_exists($TARGET_PATH))
{
$_SESSION['error'] = "A file with that name already exists";
echo"A file with same name exists already";
exit;
}

if (move_uploaded_file($image['tmp_name'], $TARGET_PATH))
{

$sql = "insert into participant (Matric, Name, IC, Address, Tel, Phone, Email, Phone_Ref, Institute, Course, image, Exp_Work) values ('$Matric','$Name','$IC','$Address','$Tel','$Phone','$Email','$Phone_Ref','$Institute', '$Course','" . $image['name'] . "','$Exp_Work')";
$result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
echo"Imgage uploaded successfully";
exit;
}
else
{

$_SESSION['error'] = "Could not upload file. Check read/write persmissions on the directory";
header("Location: fail.php");
exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:20:27.050

如果我正确理解了您想要的是将图像插入（可能是 MYSQL）数据库。

您可以通过使用`base64_encode()`图像二进制数据并在数据库中插入生成的纯文本来实现这一点。

```
$image = 'path/to/image/image.png';
$imagefordbs  =  base64_encode($image);
/*now your image is ready to be stored in database*/ 
```

但是，这种方法有缺点，因为 base64_encode() 占用的内存比原始内存多 33%，需要一些时间来处理输入二进制文件，并且 mysql - [BLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)中有专门的数据类型来满足这种要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:25:17.213

当我阅读您的问题时，您希望已经使用您找到的教程/代码上传图像，然后在图像已经上传时单独提交表单。

要知道文件上传后在哪里可以找到图像，您有两种选择：

1.  上传完成后让图片上传返回文件路径，并在表单中包含该变量（例如作为隐藏输入）；
2.  将图像路径存储在会话变量中，以便在提交数据字段时，可以访问该变量以获取图像的信息。

**编辑：**您需要查看表单插件的文档以获取更多详细信息，但您可以从上传的 php 脚本中返回一些内容。例如`echo`，您可以使用文件名，然后在您的`success`函数中使用它：

```
 function afterSuccess(return_value)  {
        console.log(return_value);  // here you have what was echoed out by php

        $('#UploadForm').resetForm();  // reset form
        $('#SubmitButton').removeAttr('disabled'); //enable submit button
    } 
```

# java - 将 EditText 放在软键盘上方

> ID：15452235
> 
> 赞同：1
> 
> 时间：2013-03-16T17:17:03.490
> 
> 标签：java, android, android-layout

我正在使用 2 FrameLayout 两者都有 EditText，如果我单击位于布局底部的 editText 可以在 softKeyboard 上方看到，但是如果我单击 frameLayout 在另一个 FrameLayout 上方的 editBox 位置不会改变并放在后面键盘和底部的 frameLayout 再次改变位置，显示在软键盘上方。

我试过，

```
mMessageBox.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        Commons.logCatchya("onFocusListener changed !");
        if (hasFocus) {
            Commons.logCatchya("onFocusListener hasFocus !");   
        }
        else {
            Commons.logCatchya("onFocusListener do not hav focus !");
        }
    }
});

mMessageBox.setOnKeyListener(new View.OnKeyListener() {

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        Commons.logCatchya("setOnKeyListener :" + event.getAction() + " keyCode :" + keyCode);
        return false;
    }
});

mProfileStatusBox.setOnFocusChangeListener(new View.OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        Commons.logCatchya("onFocusListener mProfileStatusBox changed !");
        if (hasFocus) {
            Commons.logCatchya("onFocusListener mProfileStatusBox hasFocus !"); 
        }
        else {
            Commons.logCatchya("onFocusListener mProfileStatusBox do not hav focus !");
        }

    }
}); 
```

但是如果我点击屏幕上的隐藏软键盘按钮，光标仍然在我使用的编辑框中。这个问题是因为 FrameLayout 吗？如果不是我应该怎么做来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:30:24.257

`RelativeLayout`我通过使用和使用解决了这个问题

```
android:gravity="bottom" 
```

在布局文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:19:20.247

在您的活动中为您的活动标签设置此项

```
android:configChanges="keyboardHidden|orientation" 
```

如果它对您不起作用，请尝试在 ScrollView 中设置您的父布局

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:52:22.260

我确定您正在使用`LinearLayout`设置它的`width`and 。 不要那样做，而是使用设置为：`height``full_parent`
`RelativeLayout``height`

`android:layout_height="wrap_content"`

# jquery - jquery web服务登录

> ID：15452236
> 
> 赞同：0
> 
> 时间：2013-03-16T17:17:11.500
> 
> 标签：jquery, asp.net, web-services, security

我一直在努力让它工作很长时间，但我似乎无法理解它。

我正在尝试使用调用 ASP.net 网络服务的 jquery mobile 登录。webservice工作正常，可以使用。使用调试器网页时，结果如下：( **true** )

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<boolean xmlns="http://tempuri.org/">true</boolean> 
```

我不相信我的服务有问题，所以这是我的页面代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script src="res/js/jquery.min.js" type="text/javascript"></script>
    <script src="res/js/mobile/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
    <link href="res/js/mobile/jquery.mobile-1.3.0.min.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">

        $(document).ready(function () {
            $("#submit").click(function () {

                $.ajax({
                        type: "POST",
                        url: "http://localhost/as400/services.asmx/Login",
                        data: "{ user: " + $('#usr').val() + ", password: " + $('#psw').val() + "}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            alert(msg.d);
                        },
                        error: function () {
                            alert("error!");
                        }
                    });

            });
        });

    </script>

    <style>
      .ui-page { background: White;}
    </style>

</head>
<body>

<div data-role="page" id="login">

<div data-role="header" data-position="fixed"><h1>Login</h1></div>

<div data-role="content">

    <img src="res/img/logo.gif" style="display: block;margin: 1em auto 0;width: 75%;" />

    <form id="login_form" name="login_form" data-ajax="false">
            <input type="text" name="usr" id="usr" value="" placeholder="user"/>
            <input type="password" name="psw" id="psw" value="" placeholder="password"/>
            <input type="submit" value="Login" id="submit" name="login"/>
            <label><input type="checkbox" name="remember_me" id="remember_me" value="checked_remember"/>Remember me!</label>
        </form>

</div>

<div data-role="footer" data-position="fixed"><h2>Footer</h2></div>

</div>

</body>
</html> 
```

网络服务代码：

```
Imports connection

Imports System.Data

Imports System.Web
Imports System.Web.Script
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Web.Script.Services
Imports System.Collections.Generic
Imports System.Web.Script.Serialization

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
<System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(Name:="services", ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class services
    Inherits System.Web.Services.WebService

    Public connection As New connection

    <WebMethod()> _
    <SoapDocumentMethod(Binding:="services")> _
    <SoapHeader("connection")> _
    Public Function Execute(sql As String, type As Operation) As Result

        Dim r As New Result

        Select Case type
            Case Operation.SelectMultipleRows

                Try
                    r.Data = connection.Execute(sql, type)
                Catch ex As Exception
                    r.ErrorMessage = ex.Message
                    r.SQL = sql
                End Try

        End Select

        Return r

    End Function

    <WebMethod()> _
    <SoapDocumentMethod(Binding:="services")> _
    <SoapHeader("connection")> _
    Public Function Login(user As String, password As String) As Boolean

        Return connection.Login(user, password)

    End Function
End Class 
```

我收到警报“错误”，但我不知道为什么...我已将 web 服务置于调试状态，它运行良好，但似乎 jquery 帖子在处理服务之前出现错误..？

也许我在这里做错了什么？

请帮我！

谢谢

斯坦尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:06:26.980

我设法通过重新设计自己解决了这个问题。问题已过时。

# haskell - 输入“|”时出现 Haskell 错误 没有模块失败

> ID：15452240
> 
> 赞同：1
> 
> 时间：2013-03-16T17:17:32.463
> 
> 标签：haskell, syntax

我是 Haskell 的新手，我遇到了一个非常奇怪的错误：

```
insertion el [] = [el]
insertion el (x:xs) = | el < x = el:x:xs
                      | otherwise = x:insertion el xs 
```

这给了我这个错误，在管道之后的字符的第二行：输入'|'上的解析错误 失败，加载模块：无。

没看懂，求指点 提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:45:54.587

在函数定义中使用守卫（管道符号）时，不要在函数名和参数后面加上等号。它应该这样写：

```
insertion el [] = [el]
insertion el (x:xs)
   | el < x    = el:x:xs
   | otherwise = x:insertion el xs 
```

第一个后卫不需要在下一行，但这往往是一般的风格。

# php - PHP | 具有 Facebook 和 Gmail 身份验证的用户管理库

> ID：15452247
> 
> 赞同：2
> 
> 时间：2013-03-16T17:18:50.450
> 
> 标签：php, facebook, user-management, google-account

我正在寻找一个 php 库或框架模块：

*   启用用户管理（注册、登录、密码提醒），
*   将用户分组（读者、作者、版主）
*   并且还集成了 Facebook 和 Google 帐户认证（一键登录）。

我遇到了提供出色用户管理或 Fb/Gmail 集成的库，但我发现这些库都没有这两个功能。

我正在尝试在 CodeIgniter 中构建这些，但它似乎超级难。

有人知道这样的图书馆吗？提前致谢。

# html - Jinja2 中的 HTML 表单元素未打印正确的字符串。它只打印空格前的值

> ID：15452249
> 
> 赞同：3
> 
> 时间：2013-03-16T17:19:00.483
> 
> 标签：html, forms, jinja2

我正在使用带有cherrypy框架的Jinja2。我已经编写了以下模板代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
               "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CTRnet Search</title>
</head>
<body>
<form action="search" method="post">
        <p> Please enter your query to search in the collection</p>
        <input type="text" name="query" value={{ parameters.query }}  size="35" maxlength="60" />
        <p><input type="submit" value="Search"/> <input type="reset" value="Clear"/></p>
</form>
<h2>The query is {{ parameters.query }}</h2>
<h2>About {{ parameters.numFound }} results</h2> 
</body></html> 
```

我希望表单打印之前进行的查询的值。我正在从 parameters.query 字段中获取上一个查询。如果我的查询是“virginia”，则表单在文本框中正确显示。

如果我的查询是“virginia quake”，则表单只显示“virginia”。它在空格字符之后不打印任何内容。

是与不这样做的表单有关，还是与我的模板系统“Jinja2”有关。变量被正确传递，我可以在表单之后打印该变量。

在下面的屏幕截图中，我的查询是“virginia quake”，但表单框只打印“virginia”。我正在学习设计网页，但我不确定这里发生了什么调试。

![在此处输入图像描述](../Images/0be913d29ca69d4494dbc038dc7a6d5c.png)

请让我知道你的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:50:51.983

在周围加上引号`{{ parameters.query }}`

```
value="{{ parameters.query }}" 
```

# java - 递归 - 删除重复项

> ID：15452255
> 
> 赞同：0
> 
> 时间：2013-03-16T17:19:21.497
> 
> 标签：java

我正在研究一种以递归方式删除 ArrayList 中元素的重复项的方法。但是我遇到了一些问题，我的方法有效并删除了一些元素，但不是所有的重复项。

这是我的输入：

```
100, 200, 200, 300, 400, 300, 100, 500, 500, 400, 100, 400, 100, 100 
```

这是输出：

```
100, 200, 300, 400, 100, 500, 100 
```

还有我的方法：

```
public static void removeDuplicates(ArrayList<Integer> list, int counter){
    if(list == null){
        throw new NullPointerException();
    }

    if(counter < list.size()){
        if(list.contains(list.get(counter))){
            list.remove(list.lastIndexOf(list.get(counter)));
        }
        removeDuplicates(list, ++counter);
    }
} 
```

我知道我只是删除所述值的最后一个元素，然后迭代到下一个元素。我想知道如何更改它以删除所有重复的元素。[此外，我的输出中让我感到困惑的一部分是，“400”有三个值，但输出](http://i.imgur.com/tpVosF8.png)中只显示了一个。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:32:31.353

除了@NPE 是正确的（我认为这是家庭作业）之外，您应该考虑使用**相同**的头部调用您的函数，只要找到重复的元素。如果没有找到重复项（不再），则仅使用下一个元素（即，增加`counter`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:28:51.080

`list.remove()`将减少`list.size()`，这意味着每次您删除一个项目并推进`counter`时，您最终都会跳过一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:35:10.640

试试这个：

```
 public static void removeDuplicates(ArrayList<Integer> list, int counter){

        if(list == null){
            throw new NullPointerException();
        }

        if(counter < list.size()){
            if(list.contains(list.get(counter))){
                if(list.lastIndexOf(list.get(counter))!=counter)
                {
                    list.remove(list.lastIndexOf(list.get(counter)));
                    counter--;
                }
            }
            removeDuplicates(list, ++counter);
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T17:33:09.373

我的第一个问题是你为什么要使用递归？简单地从旧列表构建一个新列表要简单得多。

如果您处理调用序列，从字符串中删除项目，您会发现输出符合预期。

通过 1 删除最后的 100

> 100, 200, 200, 300, 400, 300, 100, 500, 500, 400, 100, 400, 100

通过 2 删除最后的 200

> 100、200、300、400、300、100、500、500、400、100、400、100

通过 3 删除最后的 300

> 100、200、300、400、100、500、500、400、100、400、100

通过 4 删除最后的 400

> 100、200、300、400、100、500、500、400、100、100

Pass 5 删除最后 100 个

> 100、200、300、400、100、500、500、400、100

通过 6 删除最后的 500

> 100、200、300、400、100、500、400、100

Pass 7 什么都不删除 Pass 8 什么都不删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T17:45:42.503

尝试

```
 if (counter < list.size()) {
        int i = list.lastIndexOf(list.get(counter));
        if (i > counter) {
            list.remove(i);
        } else {
            counter++;
        }
        removeDuplicates(list, counter);
    } 
```

# emacs - 如何让查找文件的提示符匹配 Emacs shell 的 $PWD？

> ID：15452259
> 
> 赞同：1
> 
> 时间：2013-03-16T17:19:33.737
> 
> 标签：emacs

使用 Emacs，如果当前缓冲区是“访问”一个普通文件（例如），其完整路径名是`/path/to/somefile`，并且运行`find-file`( `C-x C-f`)，则出现在迷你缓冲区中的提示类似于

```
Find file: /path/to/▮ 
```

...光标按上述 ▮ 所示放置。IOW，默认显示的建议路径总是指向包含当前缓冲区正在访问的文件的目录。

但是，如果当前缓冲区是一个 Emacs *shell 进程*，并且一个运行`find-file`，那么，AFAICT，提示中显示的路径保持*固定*在`$PWD` *当 shell 进程启动时*的值，而与*当前*值无关`$PWD`：

```
Find file: /pwd/at/startup/▮ 
```

这种行为不是很有用，因为`$PWD`启动时通常在以后变得无关紧要。如果' 提示符中显示的目录*是shell 进程的**当前*.`find-file` *`$PWD`*

 *`find-file`每当当前缓冲区是 shell 进程时，是否有一种简单的方法可以修改为这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:36:38.320

您想要“外壳目录跟踪”。例如检查`dirtrack-mode`或`shell-dirtrack-mode`。

`shell-dirtrack-mode`尝试解析“cd”命令，（event_jr：根据我的经验，它不能始终如一地工作）。 `dirtrack-mode`使用提示正则表达式，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:06:15.533

有很多方法可以管理这个。正如[Stefan](https://stackoverflow.com/users/1283394/stefan)所说，有几个内置的包可以管理它。

我首选的方法是更改​​您的提示（在 Emacs 中时）以`$PWD`嵌入其中，然后 Emacs 将其剥离并使用它。这样做的好处是始终保持最新状态。我发现`dirtrack-mode`有时会不同步。

[在此处](http://trey-jackson.blogspot.com/2008_08_01_archive.html)查看我的解决方案，这是对 Emacs Wiki 上[类似实现的修改。](http://www.emacswiki.org/cgi-bin/wiki/ShellDirtrackByPrompt)*

# ruby-on-rails - 独角兽不在生产模式下运行

> ID：15452265
> 
> 赞同：4
> 
> 时间：2013-03-16T17:19:59.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, unicorn

我正在运行堆栈 nginx+unicorn+rails 3.2

当我跑步时

```
bundle exec unicorn_rails -c config/unicorn.rb -E development 
```

没关系，网站运行良好

当我尝试以生产模式启动独角兽网站时

```
bundle exec unicorn_rails -c config/unicorn.rb -E production 
```

我有“我们很抱歉，但出了点问题。” 错误：

![在此处输入图像描述](../Images/daec2354728e4047cc2fe6c4e97a764e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:46:40.210

您是否为生产运行了迁移？

```
rake db:migrate RAILS_ENV="production" 
```

问题可能不是独角兽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T06:48:19.687

只需添加 `config.log_level = :debug`config/production.rb

您将在该日志的 log/production.log 粘贴输出中收到错误日志，以便我可以帮助您

也试试`rake assets:precompile`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T22:27:29.603

问题出在脚本预编译中。它通过添加到“config/environments/production.rb”以下行来解决：

```
config.assets.compile = true 
```

# opencv - 使用 haarcascade 进行人脸检测的准确性

> ID：15452266
> 
> 赞同：0
> 
> 时间：2013-03-16T17:20:02.120
> 
> 标签：opencv, face-detection

最近我对使用“haarcascade_frontalface_alt2.xml”进行人脸检测时发生的一些奇怪的事情感到困惑

假设在网络摄像头拍摄的视频中检测到我的脸，虽然我的脸和相机都没有移动，但返回的人脸坐标和大小会发生一点变化。为什么会发生这种情况？有没有办法改进它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T16:06:27.683

一点是多少？只要检测到的人脸的坐标和大小值不会乱跳，您就可以使用低通滤波器（即运行平均值）来平滑处理。

我不知道您使用的是什么语言，但在 Python 中，它看起来像这样：

```
filterSize = 3
m = []

while True:
   x, y, sizex, sizey = <getThisFramesFaceParams()> ## Your function here
   m.append([x,y,sizex,sizey])
   if len(m) > filterSize:
      m.pop

   x, y, sizex, sizey = 0, 0, 0, 0
   for i in m:
      x += i[0]
      y += i[1] 
      sizex += i[2] 
      sizey += i[3]   

   # less variation in these values:
   x /= len(m)
   y /= len(m)
   sizeX /= len(m)
   sizeY /= len(m) 
```

filterSize 越大，抑制噪声/变化的次数就越多（因此值的随机变化越少）。但是，随着该值变大，您也会注意到更多的滞后。例如，当您移动脸部时，您可能会发现“检测到”的脸部位置落后于脸部的当前位置。这是您需要根据您遇到的噪音量和应用程序所需的速度做出的权衡。

# c# - 在不知道其泛型类型的情况下将对象添加到集合

> ID：15452281
> 
> 赞同：3
> 
> 时间：2013-03-16T17:21:43.787
> 
> 标签：c#, generics, collections, interface

```
class Program
{
    public static void Main(string[] args)
    {
        List<MyInterface> myList = new List<MyInterface>();

        myList.Add(new MyClass<int>());

        foreach (MyInterface item in myList)
        {
            (MyClass)item).Foo(); // <---- Critical Line
        }
    }
}

interface MyInterface { }

class MyClass<T> : MyInterface
{
    public MyClass() { }
    public void Foo() { DoSomething(); }
} 
```

我想使用不知道对象的精确（通用）类型的`Foo()`方法。`MyClass`有没有办法调用它？我会知道`T`代码何时编译，所以我可以将它存储在通过实现的属性中`InterfaceB`吗？

谢谢你的帮助！

**编辑：**抱歉不清楚；还有其他实现的类，`MyInterface`我正在检查项目的类型是否是 ClassB，所以我不能`Foo()`放入`MyInterface`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:24:15.687

为了静态引用，`ClassB<T>`您需要在代码中指定泛型参数。您不能使用该名称`ClassB`，因为这将引用一个名为 的非泛型类`ClassB`。

使这项工作的另一种方法是添加您需要的信息，`InterfaceB`因为它不需要通用参数

```
interface InterfaceB 
{
  InterfaceA FooUntyped();
}

...

foreach (InterfaceB item in bList) {
  aList.Add(item.FooUntyped());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:54:24.817

```
interface MyInterface { }
interface MyFooInterface<T>
{
    List<T> Foo<T>();
}

class MyClass<T> : MyInterface, MyFooInterface<T>
{
    public MyClass() { }
    public List<T> Foo<T>() { DoSomething(); }
}

class MyClassB<T> : MyInfterface
{...}

...
        foreach (MyFooInterface item in myList.OfType<MyFooInterface>)
        {
            item.Foo();
        }
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:19:36.860

关键的见解是`MyClass<int>`和`MyClass<SomethingElse>`是 100% 不相关的类型，因此您不能将它们一视同仁。甚至部分没有。就好像你写`T1`和`T2`编译器一样。

所以你必须创建一个通用的基类/接口或使用`dynamic`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-16T17:28:12.957

您不是在迭代 ClassB 的项目，而是在实际上没有指定 Foo 方法的 interfaceB 。

但是，无需检查：

`var itemB = item as ClassB; if (itemB != null){ itemB.Foo() }`

# z3 - 在 Windows 中安装 Z3

> ID：15452283
> 
> 赞同：3
> 
> 时间：2013-03-16T17:22:03.697
> 
> 标签：z3

我确实下载了现场的适用于 Windows（64 位）的文件 Z3 4.3.0：http: [//z3.codeplex.com/releases](http://z3.codeplex.com/releases)。

当我尝试运行 bin 文件夹中的文件 z3.exe 时。提示出现并立即消失。我需要知道如何通过 z3.exe 文件运行用 z3 编写的文件。

我怎样才能做到这一点？或者通过 Java 运行 z3 的最佳选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:10:04.193

`z3.exe`是一个命令行工具。要执行名为 的 SMT-LIB 2.0 文件`file.smt2`，您应该在命令提示符中执行以下命令。

```
 z3 file.smt2 
```

如果包含的目录`z3.exe`不在您的`PATH`环境变量中，则必须在上面的命令中包含该目录。

顺便说一句，Z3 没有图形用户界面或环境。它本质上是一个用于自动推理的库。`z3.exe`是一个使用这个库构建的简单可执行文件，它允许我们执行存储在文件中的命令。

您还可以使用[rise4fun](http://rise4fun.com/)提供的Web 界面来玩Z3 。在rise4fun，我们有一个[SMT-LIB](http://rise4fun.com/Z3)前端和一个基于[Python](http://rise4fun.com/Z3Py)的前端。他们都有互动教程。

以下是一些了解 SMT 的有用资源：

*   [Z3教程](http://rise4fun.com/Z3/tutorial/guide)
*   [SMT-LIB 教程](http://www.grammatech.com/resources/smt/SMTLIBTutorial.pdf)
*   [描述 SMT 应用的文章](http://dl.acm.org/citation.cfm?id=1995394)
*   [SMT-Lib 基准测试](http://www.smtlib.org/)
*   Stackoverflow：您可以通过包含`[z3]`在搜索框中搜索 Z3 相关问题。

Z3 has APIs for several programming languages: C, C++, .Net, Python and OCaml. In the next release, we will also provide support for Java. You can already play with the Java by using one of the nightly builds. Go [here](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html) for more information about Z3 nightly builds. The nightly builds contain a Java example application using the Z3 API.

# jquery - 仅适用于 google chrome 和 safari 的网站

> ID：15452287
> 
> 赞同：0
> 
> 时间：2013-03-16T17:22:23.100
> 
> 标签：jquery, internet-explorer

这是我遇到问题的网站：

[http://tempalex135a4zr4.aws.af.cm/fourpics_new_demo.html](http://tempalex135a4zr4.aws.af.cm/fourpics_new_demo.html)

（我将它隔离到一个页面）。我已经在所有版本的 IE（甚至 IE 10）和大多数版本的 Firefox 中测试过它。当我在其中一个浏览器中按下提交时，似乎没有任何反应。在 Google Chrome 和 Safari 中，会出现一个不错的下拉列表。

我正在使用 jQuery，并试图`event.preventDefault()`阻止基于 ajax 的表单正常提交。我也尝试在提交表单时返回 false。我尝试放入 Dean Edwards 的脚本[http://dean.edwards.name/IE7/](http://dean.edwards.name/IE7/)，但没有运气。

我已经通过 W3C 验证了我的 HTML，并且我抱怨过非 UTF-8 编码，这似乎不是一个大问题。

我检查以确保我使用的是最新版本的 jQuery 和最新版本的 jQuery UI。我认为最终问题在于告诉浏览器使用 ajax 而不是正常提交​​表单。但是，我似乎无法使用任何版本的 Firefox 或 IE 来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:32:47.333

Firefox 中存在 javascript 错误。检查 Firebug 中的控制台。

```
 $('input#submit').click(function () {
     //$("ul").fadeOut(1000);
     event.preventDefault(); 
```

`event`没有定义。尝试：

```
 $('input#submit').click(function (event) {
     //$("ul").fadeOut(1000);
     event.preventDefault(); 
```

# facebook - 为 Facebook API 指定两个站点 URL

> ID：15452288
> 
> 赞同：1
> 
> 时间：2013-03-16T17:22:28.090
> 
> 标签：facebook

我正在使用 Facebook 图形 API。要进行设置，我需要在 developer.facebook.com 上填写应用设置。

我需要指定两个 URL，一个用于本地测试 (localhost:3000)，另一个用于实时应用。我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:34:24.210

> 我需要指定两个 URL，一个用于本地测试 (localhost:3000)，另一个用于实时应用。我该怎么做？

这是不可能的——至少如果你想使用 Facebook 登录是不可能的。

你有两个选择：

*   设置第二个应用程序进行测试。这很有效，只要它不涉及需要由 FB 批准并与它们被证明的应用程序相关联的 Open Graph 操作。

*   将本地测试环境设置为可通过用于实时站点的域名从本地计算机访问。Fe 使用 Apache 作为网络服务器时，通过设置相应的 VirtualHost 并操纵您的本地 DNS 将域解析为您的本地 IP（通过`hosts`windows 下的文件）。此外，由于您的实时应用程序很可能使用端口：80，因此您应该设置本地服务器以响应该端口上的 HTTP 请求。

# r - 根据季节更改数据框中的年份变量

> ID：15452294
> 
> 赞同：0
> 
> 时间：2013-03-16T17:23:28.227
> 
> 标签：r

我有一个如下所示的数据框：

```
set.seed(50)
df <- data.frame(Month=c(sort(sample(1:12, 10)),
                         sort(sample(1:12, 10)),
                         sort(sample(1:12, 10))),
                 Year=c(rep(2007, 10), 
                        rep(2010, 10), 
                        rep(2011, 10))) 
```

负责人`df`：

```
 Month Year
1     1 2007
2     3 2007
3     4 2007
4     5 2007
5     6 2007
6     7 2007 
```

我需要根据季节重新编码年份变量，例如，如果月份是一月，年份是 2013 年，那么年份应该重新编码为 2012/2013。对于 1-6 月，年份应重新编码为 2012/2013，对于 7-12 月应重新编码为 2013/2014。

`df`因此应重新编码如下。请注意，缺少某些月份和缺少某些年份：

```
set.seed(50)
df <- data.frame(Month=c(sort(sample(1:12, 10)),
                         sort(sample(1:12, 10)),
                         sort(sample(1:12, 10))),
                 Year=c(rep(2007, 10), 
                        rep(2010, 10), 
                        rep(2011, 10)),                   
                 Year.Seasonal=c(rep('2006/2007', 5),
                                 rep('2007/2008', 5),
                                 rep('2009/2010', 6),
                                 rep('2010/2011', 9),
                                 rep('2011/2012', 5))) 
```

重新编码的负责人`df`：

```
 Month Year Year.Seasonal
1     1 2007     2006/2007
2     3 2007     2006/2007
3     4 2007     2006/2007
4     5 2007     2006/2007
5     6 2007     2006/2007
6     7 2007     2007/2008 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:34:55.117

```
df <- within(df,season <- paste(Year - (Month <= 6),
                                Year + (Month > 6),sep="/"))
head(df)
  Month Year    season
1     1 2007 2006/2007
2     3 2007 2006/2007
3     4 2007 2006/2007
4     5 2007 2006/2007
5     6 2007 2006/2007
6     7 2007 2007/2008 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:29:50.237

这是使用的解决方案`ifelse()`- 如果`Month`小于 7，则将是上一季，如果不是，则为下一季。功能`paste()`将放在一起年。

```
df$Year.Seasonal<-ifelse(df$Month<7,
     paste(df$Year-1,df$Year,sep="/"),paste(df$Year,df$Year+1,sep="/"))

> head(df)
  Month Year Year.Seasonal
1     1 2007     2006/2007
2     3 2007     2006/2007
3     4 2007     2006/2007
4     5 2007     2006/2007
5     6 2007     2006/2007
6     7 2007     2007/2008 
```

# jquery - jquery向下滑动功能不起作用

> ID：15452297
> 
> 赞同：0
> 
> 时间：2013-03-16T17:23:55.853
> 
> 标签：jquery, function, onclick, slidedown

你好我有一个包含这个的 php 文件

```
 <div id="center" class="column">
    <p>Staff please, <a id="open" href="#" >login</a> before accessing this page, no access to students.</p>
</div> 
```

单击登录按钮时，它应该打开一个面板，它在页面的上方（在 header.php 文件上）工作，但不是在这里。在我的标题中

`<script src="js/slide.js" type="text/javascript"></script>`

和

`<script type="text/javascript" src="js/jquery.js"></script>`.

我的 slide.js 看起来像这样：

```
$(document).ready(function() {

// Expand Panel
$("#open").click(function(){
    $("div#panel").slideDown("slow");

}); 

// Collapse Panel
$("#close").click(function(){
    $("div#panel").slideUp("slow"); 
});     

// Switch buttons from "Log In | Register" to "Close Panel" on click
$("#toggle a").click(function () {
    $("#toggle a").toggle();
});     

}); 
```

您可以在这里看到它不起作用：[http](http://webtest.jt-games.net/staff.php) ://webtest.jt-games.net/staff.php在面板选项卡中，它可以工作，按钮但页面主要部分的文本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:29:06.410

主页上的按钮和滑动面板中的按钮，都是打开面板的任务，ID相同，`#open`.

ID 必须是唯一的，并且 jQuery 仅适用于具有该名称的第一个 ID，这就是为什么它不适用于页面上的链接。

你可以给主页上的链接另外一个ID，然后触发点击事件，像这样：

```
$("#link_on_main_page_id").on('click', function(){
    $('#open').click();
}); 
```

# c - 获取我正在写的终端列

> ID：15452301
> 
> 赞同：1
> 
> 时间：2013-03-16T17:24:18.467
> 
> 标签：c, terminal

在我的 C 程序中，我想知道我的光标在终端中的位置。例如，另一个程序可能在我之前写了一些东西，我想知道在终端的最后一列之前还剩下多少空间，或者我不知道终端对某些特殊序列的反应（比如颜色：我可以写但它们没有显示）。

有什么建议吗？

编辑：最好避免像ncurses这样的复杂解决方案（ncurses不直接知道光标在哪里：它计算它的位置）。

编辑2：我找到了一种方法，但它只适用于非图形终端：[https ://www.linuxquestions.org/questions/programming-9/get-cursor-position-in-c-947833/](https://www.linuxquestions.org/questions/programming-9/get-cursor-position-in-c-947833/)

编辑 3：不错的代码，它运行良好，但它使用 /dev/vcsaN（与*编辑 2*相同的问题）：[http ://dell9.ma.utexas.edu/cgi-bin/man-cgi?vcs+4](http://dell9.ma.utexas.edu/cgi-bin/man-cgi?vcs+4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:21:26.453

Ncurses 是一个强大的库，用于创建基于终端的文本界面。

`tputs`是用于操作终端功能的简单低级通用函数。

任何一个都可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:28:17.600

您可以尝试使用 ncurses' [`getyx()`](http://linux.die.net/man/3/curs_getyx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:42:31.930

此解决方案不是最佳解决方案，因为它引用 /dev/vcsa*。希望这可以帮助别人。

```
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
int main(void)
{
    int fd;
    char *device = "/dev/vcsa2";
    struct {unsigned char lines, cols, x, y;} scrn;
    fd = open(device, O_RDWR);
    if (fd < 0) {
        perror(device);
        exit(EXIT_FAILURE);
    }
    (void) read(fd, &scrn, 4);
    printf("%d %d\n", scrn.x, scrn.y);
    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:15:25.493

一般来说，你应该记住你离开光标的位置。

但是，大多数终端都会响应`DSR`; 设备状态请求。通过发送

```
CSI 6 n 
```

你会收到一个`CPR`；光标位置报告，形式为

```
CSI Pl;Pc R 
```

where`Pl`并`Pc`给出光标行号和列号，从 1 开始索引。

# css - 乔治亚字体变体

> ID：15452304
> 
> 赞同：2
> 
> 时间：2013-03-16T17:24:33.230
> 
> 标签：css, fonts

我需要在网站上使用 Georgia Bold 和 Georgia Bold Italic 字体。我没有意识到这些是不同的字体。我认为这会起作用：

```
p { font-family:Georgia, serif; font-style: italic; font-weight: bold } 
```

但我意识到这在 Mac 上效果不佳。Windows 渲染与设计师模拟的相同，但 Mac 渲染不同。我应该让自己屈服于这个跨平台的地狱还是有出路？

我可以用自定义字体来做@font-face，但真的不想下载 4 种不同的字体，因为它会缩短页面加载时间。

# facebook - Perl: WWW:Mechanize，获取 Facebook 个人资料图片？

> ID：15452307
> 
> 赞同：1
> 
> 时间：2013-03-16T17:24:55.380
> 
> 标签：facebook, perl, api, www-mechanize

```
#!/usr/bin/perl

#USE DECLARATIONS
use strict;
use warnings;
use WWW::Mechanize;
use Term::ANSIColor;

#VARIABLE DECLARATIONS
my $mech = WWW::Mechanize->new();
my $img;
my $title;
my $pic_page;
my $url;
my $count;
my @links;

#CONNECT TO FACEBOOK
$url = 'https://www.facebook.com/';
$mech = WWW::Mechanize->new();
$mech->agent_alias( 'Linux Mozilla' );
$mech->get( $url );
$title = $mech->title();

#LOGIN FORM
print "Connected to Facebook.\n";
print "Logging in...";
$mech->form_id("login_form");
$mech->field("email",'my@email.com');
$mech->field("pass",'mypass');
$mech->click();
print "done!\n";

#NAVIGATE TO USER PAGE
$mech->get("https://www.facebook.com/some.profile1234");
$title = $mech->title();
print "Finding $title 's profile pictue...\n";

#FIND PROFILE PICTURE
$img = $mech->find_image(url_regex => qr/s160x160/, );
print $img->url();
downloadImage($img->url(),$mech->title().".jpg");

sub downloadImage
{
    my $local_file_name = $_[1];
    my $b = WWW::Mechanize->new;
    print "Downloading: $_[1]...";
    $b->get( $_[0], ":content_file" => $local_file_name );
    print "done!\n";
} 
```

使用此代码，我只想下载给定人的个人资料图片（#NAVIGATE TO USER PAGE）并保存。但是，我收到一个错误，说基本上找不到图像！为什么？（我正在使用 $mech->find_image(url_regex => qr/s160x160/,) 在个人资料页面上查找图像。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:42:40.683

您正在 downloadImage 子中使用新的 Mechanize 实例。而且**此实例未经 Facebook 授权**。

尝试这个：

```
downloadImage($img->url(),$mech->clone() );

sub downloadImage
{
    my $mech = $_[1];
    print "Downloading: $_[1]...";
    $mech->get( $_[0], ":content_file" => $mech->title() . ".jpg" );
    print "done!\n";
} 
```

# javascript - 在 Windows RT 上，我的 JS 应用程序在启用调试的情况下运行良好，但否则会失败

> ID：15452310
> 
> 赞同：0
> 
> 时间：2013-03-16T17:25:31.863
> 
> 标签：javascript, windows-8, windows-runtime, chakra

*   应用程序在 x86 机器上运行良好
*   如果附加了调试器或在启用调试器的情况下运行（[http://bit.ly/WO52kJ](http://bit.ly/WO52kJ)） ，则在 Surface 上按预期运行
*   但是当我在禁用调试器的情况下在 Surface 上启动应用程序时失败。

我试图通过将日志写入页面上的 div 来跟踪执行流程。我注意到一些函数调用没有按预期工作（例如，dojo.publish 的 3 个订阅者中只有 2 个被执行）。没有例外。该问题可以在每次运行时重现。

这看起来很奇怪！我已经尝试了很多事情，包括重置 Surface 以重新开始。行为没有变化。有没有人遇到过这个问题？JS 运行时是否存在任何已知问题？

# c++ - 从 C++ 中的二进制文件顺序读取结构

> ID：15452311
> 
> 赞同：1
> 
> 时间：2013-03-16T17:25:33.320
> 
> 标签：c++, file-io, struct, binary

我正在尝试编写一个程序，当程序正在执行操作（例如：搜索、更新或添加）时，它应该是直接访问。程序不应按顺序读取所有记录以达到一条记录。

```
 #include <iostream>
#include <fstream>
#include <string>

using namespace std;

struct Student{
    int Id;
    int Money;
    int Age;
    char name[15];
};

void main(){
    Student buffer;
    ofstream BinaryFile("student", ios::binary);
    ifstream WorkerText("worker.txt");

//-------------------------------------------------------------------------------------------------------------
    while( WorkerText.good() ){                     
        WorkerText>> buffer.Age >> buffer.name >> buffer.name >> buffer.name;
        BinaryFile.write(  (char *) &buffer, sizeof(Student)  );    

    }
    BinaryFile.close();
//-------------------------------------------------------------------------------------------------------------
    ifstream ReadBinary( "student", ios::binary | ios::out );
    while( BinaryFile.good() ){                     
        ReadBinary.read((char*)&buffer,sizeof(Student));
        cout<<buffer.Age;

    }

//-------------------------------------------------------------------------------------------------------------

system("pause");
} 
```

我卡在这里我无法按顺序阅读我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:47:52.873

仅当文件包含相同大小的结构或使用某些索引表时，您才可以跳过顺序读取。

对于相同大小的结构：

```
void ReadStudent(istream &src, Student &dst)
{
    src.read(&dst, sizeof(dst));
}

void GoToStudentIndex(istream &src, size_t idx)
{
   src.seekg(idx * sizeof(Student), is.beg);
 } 
```

上面的函数假设您正在写入数据，如下所示：

```
void WriteStudent(ostream &dst, const Student &src)
{
    dst.write(&src, sizeof(src));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:39:47.113

当您打开学生文件进行输入时，您正在使用“out”模式：

```
ifstream ReadBinary( "student", ios::binary | ios::out );  
^^^^^^^^                                      ^^^^^^^ 
```

试试这个：

```
ifstream ReadBinary("student", ios::binary); 
```

构造函数已在输入模式 ( )`ifstream`中打开文件。`ios::in`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:55:05.393

有三个选项可以避免顺序读取：

1.  有分隔的记录，按键排序存储它们并使用二分法
2.  有固定大小的记录，按键排序存储它们并使用二分法
3.  拥有比数据文件小得多的单独索引文件（key => 数据文件中的偏移量），先预加载它并用于通过偏移量直接读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:23:58.327

当我们想要进行搜索（和后续更新）但将记录顺序存储在平面文件中时，您需要有外部索引来帮助您直接访问所需的记录！假设在这种情况下您想按姓名搜索学生然后更新记录，您可以执行以下操作：

```
// Store in map name and the position of record
std::map name2offset;

void writeRecord(const Student& student)
{
    name2offset[string(student.name)]=BinaryFile.tellp();
    BinaryFile.write(reinterpret_cast<char*>(&student), sizeof(Student));
}

// Return true if updated successfully else false.
bool update(const string& name, Student &newRecord)
{
    std::map<char,long>::iterator itr = name2offset.find(name);
    if (itr != name2offset.end()) {
        BinaryFile.seekp(itr->second);
        BinaryFile.write(reinterpret_cast<char*>(&newRecord), sizeof(Student));

        return true;
    }

    return false;
} 
```

这些都假设您的结构是固定大小的（在您的示例中）。

# asp.net-mvc - 如何在我的区域内进行 FindPartialView 搜索？

> ID：15452312
> 
> 赞同：4
> 
> 时间：2013-03-16T17:25:34.610
> 
> 标签：asp.net-mvc

所以我注册了所有区域`Global.asax`：

```
protected void Application_Start()
{
  AreaRegistration.RegisterAllAreas();
  //...
  RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

但在我的`/Areas/Log/Controllers`，当我试图找到一个`PartialView`：

```
ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, "_LogInfo"); 
```

它失败了，`viewResult.SearchedLocations`是：

```
"~/Views/Log/_LogInfo.aspx"
"~/Views/Log/_LogInfo.ascx"
"~/Views/Shared/_LogInfo.aspx"
"~/Views/Shared/_LogInfo.ascx"
"~/Views/Log/_LogInfo.cshtml"
"~/Views/Log/_LogInfo.vbhtml"
"~/Views/Shared/_LogInfo.cshtml"
"~/Views/Shared/_LogInfo.vbhtml" 
```

因此`viewResult.View`是`null`。

如何`FindPartialView`在我的区域中进行搜索？

**更新**：这是我已注册的自定义视图引擎`Global.asax`：

```
public class MyCustomViewEngine : RazorViewEngine
{
  public MyCustomViewEngine() : base()
  {
    AreaPartialViewLocationFormats = new[]
    {
      "~/Areas/{2}/Views/{1}/{0}.cshtml",
      "~/Areas/{2}/Views/Shared/{0}.cshtml"
    };

    PartialViewLocationFormats = new[]
    {
      "~/Views/{1}/{0}.cshtml",
      "~/Views/Shared/{0}.cshtml"
    };

  // and the others...
  }
} 
```

但`FindPartialView`不使用`AreaPArtialViewLocationFormats`：

```
"~/Views/Log/_LogInfo.cshtml"
"~/Views/Shared/_LogInfo.cshtml" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:31:57.533

我遇到了完全相同的问题，我使用了一个中央 Ajax 控制器，在其中我从不同的文件夹/位置返回不同的局部视图。

您将要做的是创建一个新的`ViewEngine`派生自 a `RazorViewEngine`（我假设您使用 Razor）并在构造函数中显式包含新位置以搜索部分。

或者，您可以覆盖该`FindPartialView`方法。默认情况下`Shared`，当前控制器上下文中的文件夹和文件夹用于搜索。

这是一个[示例](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)，它向您展示如何覆盖自定义`RazorViewEngine`.

**更新**

您应该在 PartialViewLocationFormats 数组中包含部分的路径，如下所示：

```
public class MyViewEngine : RazorViewEngine
{
  public MyViewEngine() : base()
  {
    PartialViewLocationFormats = new string[]
     {
       "~/Area/{0}.cshtml"
       // .. Other areas ..
     };
  }
} 
```

同样，如果您想在`Area`文件夹内的 Controller 中找到部分视图，则必须将标准部分视图位置添加到`AreaPartialViewLocationFormats`数组中。我已经对此进行了测试，它对我有用。

只要记住将新的添加`RazorViewEngine`到您的`Global.asax.cs`中，例如：

```
protected void Application_Start()
{
  // .. Other initialization ..
  ViewEngines.Engines.Clear();
  ViewEngines.Engines.Add(new MyViewEngine());
} 
```

以下是您如何在名为“Home”的示例控制器中使用它：

```
// File resides within '/Controllers/Home'
public ActionResult Index()
{
  var pt = ViewEngines.Engines.FindPartialView(ControllerContext, "Partial1");
  return View(pt);
} 
```

我已将我要查找的部分存储在`/Area/Partial1.cshtml`路径中。

# java - 摆脱对话框并用 JLabel 替换

> ID：15452315
> 
> 赞同：0
> 
> 时间：2013-03-16T17:25:53.113
> 
> 标签：java, applet

我目前正在开发一个小程序，并且在完成它时遇到了一些麻烦。我的代码工作得很好，但是我需要将`JOptionDialog`消息对话框的最后部分更改为`JLabel`添加到小程序中的一个。我已经尝试了所有我能想到的方法，但仍然不够用。我当前的代码如下所示：

```
import javax.swing.*;

import java.awt.event.*;
import java.awt.*;

public class Password extends JApplet implements ActionListener {

    Container PW = getContentPane();
    JLabel password = new JLabel("Enter Password(and click OK):");
     Font font1 = new Font("Times New Roman", Font.BOLD, 18); 
    JTextField input = new JTextField(7);
    JButton enter = new JButton("OK");

    public void start() {
        PW.add(password);
          password.setFont(font1);
        PW.add(input);
        PW.add(enter);
        PW.setLayout(new FlowLayout());
        enter.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        String pass1 = input.getText();
        String passwords[] = {"Rosebud", "Redrum", "Jason", "Surrender",  "Dorothy"};
       for(int i=0;i<passwords.length;i++) {
           if (pass1.equalsIgnoreCase(passwords[i])) {
            JOptionPane.showMessageDialog(null, "Access Granted");
                return
        }
             else {
       JOptionPane.showMessageDialog(null, "Access Denied");
            }
        }
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:41:34.823

试试这个：

```
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class Password extends JApplet implements ActionListener {

    Container PW = getContentPane();
    JLabel password = new JLabel("Enter Password(and click OK):");
    JLabel message = new JLabel();
    Font font1 = new Font("Times New Roman", Font.BOLD, 18); 
    JTextField input = new JTextField(7);
    JButton enter = new JButton("OK");

    public void start() {
        PW.add(password);
        password.setFont(font1);
        PW.add(input);
        PW.add(enter);
        PW.add(message);
        PW.setLayout(new FlowLayout());
        enter.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        String pass1 = input.getText();
        String passwords[] = {"Rosebud", "Redrum", "Jason", "Surrender",  "Dorothy"};
        for(int i=0;i<passwords.length;i++) {
            if (pass1.equalsIgnoreCase(passwords[i])) {
                message.setText("Access Granted");
                            return;
            }
            else {
                message.setText("Access Denied");

            }
        }
    }
} 
```

它的示例代码没有完成对齐，它将在按钮旁边显示消息。您可以根据需要更改对齐方式；）

# php - Eloquent ORM - 使用 2 个参考字段保存记录

> ID：15452319
> 
> 赞同：1
> 
> 时间：2013-03-16T17:26:10.647
> 
> 标签：php, laravel, laravel-4

如果我创建这样的评论：

```
$post->comments()->create(array('body' => 'Comment message')); 
```

我的帖子上有模型：

```
public function comments()
{
    return $this->morphMany('Comment', 'shared_comments');
} 
```

它填充了帖子和评论之间的多态关系字段。

我的评论中也有模型：

```
public function author()
{
    return $this->belongsTo('User');
} 
```

如何填写评论表中的“user_id”字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:00:24.310

您可以在数组中明确指定用户 ID。

```
$post->comments()->create(array(
    'body' => 'Comment message',
    'user_id' => Auth::user()->id
)); 
```

或者，您可以创建评论，然后插入与帖子和用户表的关系。

```
$post = Post::find($whatever);
$user = Auth::user()->id;

$comment = Comment::create(array(
    'body' => 'Comment message'
));

$post->comments()->insert($comment);
$user->comments()->insert($comment); 
```

在 Laravel 4 中，最后两行将使用`save($comment)`而不是。`insert($comment)`这是 Laravel 3 的重大变化。

# java - Java 绝对清理

> ID：15452320
> 
> 赞同：2
> 
> 时间：2013-03-16T17:26:13.833
> 
> 标签：java, opengl, lwjgl

我注意到许多人在关闭应用程序之前调用方法从内存中删除诸如 VBO 之类的 opengl 数据（不仅在 lwjgl 或 java 中）。

但是，当应用程序循环结束时，不应该删除所有数据吗？如果没有，那么在关闭 java 应用程序（包括 opengl 和 lwjgl 数据）**后绝对清理内存的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T00:53:53.043

OpenGL 对象将因 OpenGL 上下文的破坏而被删除（在 LWJGL 中，我想在 OpenGL 窗口被破坏时会发生这种情况）。因此，您不必*自己*删除它们。但是良好的编码实践表明您应该这样做。

# codeigniter-2 - Codeigniter 有时会自动清除我的会话数据

> ID：15452323
> 
> 赞同：0
> 
> 时间：2013-03-16T17:26:35.360
> 
> 标签：codeigniter-2

我有一个非常奇怪的问题。当人们登录网站时，我将用户数据存储在会话中。这可以正常工作，但有时当我在我的网站上浏览时，Codeigniter 会自动将我从风中注销。

有人遇到过这个问题并知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:45:50.333

检查会话时间......

应用程序/config/config.php

```
$config['sess_expiration']      = 7200; 
```

您希望会话持续的秒数。默认值为 2 小时（7200 秒）。如果您想要一个未过期的会话，请将值设置为零：0

更多细节...

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T12:04:19.300

您好，请在 system/libraries/sessions.php 文件中进行以下更改。

```
public $sess_encrypt_cookie;
public $sess_use_database;
public $sess_table_name;
public $sess_expiration;
public $sess_expire_on_close;
public $sess_match_ip;
public $sess_match_useragent;
public $sess_cookie_name;
public $cookie_prefix;
public $cookie_path;
public $cookie_domain;
public $cookie_secure;
public $sess_time_to_update;
public $encryption_key;
public $flashdata_key;
public $time_reference;
public $gc_probability;
public $userdata;
public $CI;
public $now; 
```

我有同样的问题自定义会话会在一段时间后自动销毁。

# nginx - Nginx - 重定向域尾随点

> ID：15452328
> 
> 赞同：8
> 
> 时间：2013-03-16T17:27:21.523
> 
> 标签：nginx

如何重定向“ [http://domain.com](http://domain.com) ”。使用 Nginx到“ [http://domain.com](http://domain.com) ”？

这样做的推荐方法是什么？正则表达式还是有其他选择？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T09:41:00.910

以下代码片段以一般方式执行此操作，而无需对任何主机名进行硬编码（如果您的服务器配置处理多个域的请求，则很有用）。将此添加到您需要的任何服务器定义中。

```
if ($http_host ~ "\.$" ){
    rewrite ^(.*) $scheme://$host$1 permanent;
} 
```

这利用了删除尾随点的事实（由[Igor Sysoev](http://www.ruby-forum.com/topic/163942)指出）`$host`，而`$http_host`没有；所以我们可以匹配点`$http_host`并自动`$host`用于重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:19:46.307

您将需要使用正则表达式。

```
server {
    listen       80;
    server_name  domain.com.WHATEVER, domain.com.WHATEVER-2, domain.com.WHATEVER-3;
    rewrite  ^  $scheme://domain.com$request_uri?  permanent;
} 
```

来自：[http ://wiki.nginx.org/HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)

重定向 - 返回带有代码 302 的临时重定向；如果替换行以 http://permanent 开头，则使用它 - 返回带有代码 301 的永久重定向

# javascript - javascript regex - 替换字符串停用词

> ID：15452330
> 
> 赞同：0
> 
> 时间：2013-03-16T17:27:46.820
> 
> 标签：javascript, regex, string

我正在尝试编写一个从字符串中删除特定单词的函数。

下面的代码在句子的最后一个单词之前都可以正常工作，因为它后面没有我的正则表达式查找的空格。

如何捕获后面没有空格的最后一个单词？

[JS小提琴](http://jsfiddle.net/cVzx8/2/)

```
function stopwords(input) {

var stop_words = new Array('a', 'about', 'above', 'across');

console.log('IN: ' + input);

stop_words.forEach(function(item) {
    var reg = new RegExp(item +'\\s','gi')

    input = input.replace(reg, "");
});

console.log('OUT: ' + input);
}

stopwords( "this is a test string mentioning the word across and a about"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:28:17.887

您可以使用[单词边界标记](http://www.regular-expressions.info/wordboundaries.html)：

```
var reg = new RegExp(item +'\\b','gi') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:57:12.890

假设我在`sea`传话

```
stopwords( "this is a test string sea mentioning the word across and a about"); 
```

这将减少`sea`到`se`

```
function stopwords(input) {

  var stop_words = ['a', 'about', 'above', 'across'];

  console.log('IN: ' + input);

  // JavaScript 1.6 array filter
  var filtered  = input.split( /\b/ ).filter( function( v ){
        return stop_words.indexOf( v ) == -1;
  });

  console.log( 'OUT 1 : ' + filtered.join(''));

  stop_words.forEach(function(item) {
      // your old : var reg = new RegExp(item +'\\s','gi');
      var reg = new RegExp(item +'\\b','gi'); // dystroy comment

      input = input.replace(reg, "");
  });

  console.log('OUT 2 : ' + input);
}

stopwords( "this is a test string sea mentioning the word across and a about"); 
```

有输出

```
IN: this is a test string sea mentioning the word across and a about

OUT 1 : this is  test string sea mentioning the word  and  

OUT 2 : this is  test string se mentioning the word  and 
```

# r - 覆盖 R lattice parallelplot auto.key 图例颜色

> ID：15452331
> 
> 赞同：5
> 
> 时间：2013-03-16T17:27:51.380
> 
> 标签：r, lattice

我使用 lattice 包 parallelplot 方法来绘制数据并在生成图例时遇到了麻烦。我为绘图创建了一个自定义颜色的矢量，但找不到将它们传入以覆盖图例中显示的默认颜色的方法。虽然我没时间了，最​​终在 Photoshop 中更正了图例颜色，但我想学习在 lattice 中执行此操作的正确方法。

这是生成带有 4 列图例的图的代码：

```
parallelplot(acc, horizontal.axis=FALSE, col=acc_colors, lwd=1.5, cex=2.5, 
    ylab="Accuracy (Min = 50%, Max = 100%)", 
    xlab="Activity (overall = average across activities)", 
    main="Human Activity Recognition Accuracy", 
    scales=list(cex=1), 
    auto.key=list(text=c("Test Set", "Test Subject", "Training Set", "Training Subject"), 
    title=" ", 
    space="top", columns=4, points=FALSE) 
) 
```

任何想法如何传递自定义图例颜色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T11:27:30.920

使用show.settings() 和str(trellis.par.get()) 显示需要自定义的图形参数是superpose.line。使用 par.settings 传入自定义设置，在仍然使用 auto.key 的同时提供自定义键颜色和线宽：

```
acc_par <- list(superpose.line = list(col = key_colors), lwd=1.5, lty=1.5)
parallelplot(acc, horizontal.axis=FALSE, col=acc_colors, lwd=1.5, cex=2.5, 
           ylab="Accuracy (Min = 50%, Max = 100%)",
           xlab="Activity (overall = average across activities)", 
           main="Human Activity Recognition Accuracy",
           scales=list(cex=1),
           par.settings=acc_par,
           auto.key=list(text=c("Test Set", "Test Subject", "Training Set", "Training Subject"),
                         title=" ", space="top", columns=4, lines=TRUE)
           )
} 
```

本文[有助于](http://lamages.blogspot.com/search?q=colours%20and%20legends) 找到此解决方案。

# c# - azure中客户端和服务之间的双工通信

> ID：15452332
> 
> 赞同：0
> 
> 时间：2013-03-16T17:27:58.707
> 
> 标签：c#, azure, communication, duplex, webrole

几天来，我一直在尝试与 Azure 中 WebRole 上的服务进行双工通信。我向我的客户端添加了服务引用（在本地运行的控制台应用程序），当尝试调用服务上的方法时它永远不会起作用。如果我尝试使用 azure 模拟器，一切正常。

有谁知道如何正确地做到这一点？我在哪里可以找到一步一步的教程来做到这一点？我已经做了很多研究，但任何工作或解释这一点。

# java - Xuggler 的 java 视频解码出错

> ID：15452333
> 
> 赞同：1
> 
> 时间：2013-03-16T17:27:59.803
> 
> 标签：java, xuggler

我正在按照教程中的代码学习 Xuggler（一个支持 Java 视频流的库），该[教程](http://blog.xuggle.com/2009/01/23/how-to-use-xuggler-to-decode-and-play-video/)教授[如何解码和播放视频](http://www.youtube.com/watch?v=qEs5Hh4l5hY)。

我认为这段代码是可靠的，但是当我想播放在我的窗口上读取的视频时，我收到错误消息告诉我

`Exception in thread "main" java.lang.RuntimeException: got error decoding video in: C:/Users/swnmlab/1.mp4`

执行此行时发生此错误

`int bytesDecoded = videoCoder.decodeVideo(picture, packet,offset);`

我用debugger单步进去发现xuggle-xuggler.jar没有源码附件，有没有人遇到过这个问题？

```
import java.awt.image.BufferedImage;

import com.xuggle.xuggler.ICodec.Type;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IPacket;
import com.xuggle.xuggler.IPixelFormat;
import com.xuggle.xuggler.IStream;
import com.xuggle.xuggler.IStreamCoder;
import com.xuggle.xuggler.IVideoPicture;
import com.xuggle.xuggler.IVideoResampler;
import com.xuggle.xuggler.Utils;
import com.xuggle.xuggler.demos.VideoImage;

public class DecodeAndPlayVideo {
    public static void main(String[] args) {
        String filename = "C:/Users/swnmlab/1.mp4";

        // Create a Xuggler container object
        IContainer container = IContainer.make();

        // Open up the container
        if (container.open(filename, IContainer.Type.READ, null) < 0)
            throw new IllegalArgumentException("could not open file: "
                    + filename);

        // query how many streams the call to open found
        int numStreams = container.getNumStreams();

        // and iterate through the streams to find the first video stream
        int videoStreamId = -1;
        IStreamCoder videoCoder = null;
        for (int i = 0; i < numStreams; i++) {
            // Find the stream object
            IStream stream = container.getStream(i);
            // Get the pre-configured decoder that can decode this stream;
            IStreamCoder coder = stream.getStreamCoder();

            if (coder.getCodecType() == Type.CODEC_TYPE_VIDEO) {
                videoStreamId = i;
                videoCoder = coder;
                break;
            }
        }
        if (videoStreamId == -1)
            throw new RuntimeException(
                    "could not find video stream in container: " + filename);

        if (videoCoder.acquire() < 0)
            throw new RuntimeException(
                    "could not open video decoder for container: " + filename);

        IVideoResampler resampler = null;
        if (videoCoder.getPixelType() != IPixelFormat.Type.BGR24) {
            // if this stream is not in BGR24, we're going to need to
            // convert it. The VideoResampler does that for us.
            resampler = IVideoResampler.make(videoCoder.getWidth(),
                    videoCoder.getHeight(), IPixelFormat.Type.BGR24,
                    videoCoder.getWidth(), videoCoder.getHeight(),
                    videoCoder.getPixelType());
            if (resampler == null)
                throw new RuntimeException("could not create color space "
                        + "resampler for: " + filename);
        }

        /*
         * And once we have that, we draw a window on screen
         */
        openJavaWindow();

        IPacket packet = IPacket.make();
        while (container.readNextPacket(packet) >= 0) {
            /*
             * Now we have a packet, let's see if it belongs to our video stream
             */
            if (packet.getStreamIndex() == videoStreamId) {
                IVideoPicture picture = IVideoPicture.make(
                        videoCoder.getPixelType(), videoCoder.getWidth(),
                        videoCoder.getHeight());

                int offset = 0;
                while (offset < packet.getSize()) {
                    /*
                     * Now, we decode the video, checking for any errors.
                     */
                    int bytesDecoded = videoCoder.decodeVideo(picture, packet,
                            offset);
                    if (bytesDecoded < 0)
                        throw new RuntimeException(
                                "got error decoding video in: " + filename);
                    offset += bytesDecoded;

                    /*
                     * Some decoders will consume data in a packet, but will not
                     * be able to construct a full video picture yet. Therefore
                     * you should always check if you got a complete picture
                     * from the decoder
                     */
                    if (picture.isComplete()) {
                        IVideoPicture newPic = picture;
                        /*
                         * If the resampler is not null, that means we didn't
                         * get the video in BGR24 format and need to convert it
                         * into BGR24 format.
                         */
                        if (resampler != null) {
                            // we must resample
                            newPic = IVideoPicture.make(
                                    resampler.getOutputPixelFormat(),
                                    picture.getWidth(), picture.getHeight());
                            if (resampler.resample(newPic, picture) < 0)
                                throw new RuntimeException(
                                        "could not resample video from: "
                                                + filename);
                        }
                        if (newPic.getPixelType() != IPixelFormat.Type.BGR24)
                            throw new RuntimeException("could not decode video"
                                    + " as BGR 24 bit data in: " + filename);

                        @SuppressWarnings("deprecation")
                        BufferedImage javaImage = Utils.videoPictureToImage(newPic);

                        // and display it on the Java Swing window
                        updateJavaWindow(javaImage);    
                    }

                }
            } else {
                /*
                 * This packet isn't part of our video stream, so we just silently drop it.
                 */
                do {
                } while (false);
            }
        }

        closeJavaWindow();

    }

    private static VideoImage mScreen = null;
    private static void updateJavaWindow(BufferedImage javaImage) {
        mScreen.setImage(javaImage);
    }

    private static void openJavaWindow() {
        mScreen = new VideoImage();
    }

    private static void closeJavaWindow() {
        System.exit(0);
    }
} 
```

PS如果你想尝试这个库，你可以在[这里](http://www.huergoguil.es/descargas/xuggle-xuggler.5.1.0-win64-setup.exe)找到安装文件，然后按照[这个页面](http://blog.xuggle.com/2009/01/23/how-to-install-xuggler-on-microsoft-windows/)上的步骤在Windows上完成安装这个库。

* * *

我发现错误发生是因为我更改了原始代码

```
 if (videoCoder.open() < 0)
            throw new RuntimeException(
                    "could not open video decoder for container: " + filename); 
```

至

```
 if (videoCoder.acquire() < 0)
            throw new RuntimeException(
                    "could not open video decoder for container: " + filename); 
```

由于 open() 方法会导致弃用警告，所以我使用自动完成来找到一个看起来像 open() 的方法，然后更改为 acquire()。我认为这没关系，因为没有“无法打开容器的视频解码器：”异常抛出。所以只需按照示例代码进行操作即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T09:42:37.680

open() 方法已弃用，您应该改用 open(null,null)

```
if (videoCoder.open(null,null) < 0)
throw new RuntimeException(
        "could not open video decoder for container: "
                + filename); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T18:31:44.993

我浏览了你的代码，发现你获得了一个，但你在玩之前`videoCoder`没有。`open`也许这就是你无法解码的原因。那你能试试吗？

```
if (videoCoder.open() < 0)
    throw new RuntimeException(
            "could not open video decoder for container: "
                    + filename);
IVideoResampler resampler = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T08:21:32.210

我通过以下代码更改执行了相同的代码。这些更改是必需的，因为不推荐使用以下 API。

```
IMetaData params = IMetaData.make();
IContainerParameters params = IContainerParameters.make(); 
```

如图所示，我使用 videoCoder 来设置 timeBase、Height 和 Width。

```
 if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO)
  {
    videoStreamId = i;
    videoCoder = coder;

    // The timebase here is used as the camera frame rate    
    videoCoder.setTimeBase(IRational.make(30,1));

    // we need to tell the driver what video with and height to use
    videoCoder.setWidth(320);
    videoCoder.setHeight(240);

    break;
  } 
```

但是，我面临一个不同的问题，即网络摄像头显示占据整个屏幕，而不是指定的宽度和高度。

设置高度和宽度的代码更改是否不正确？我们应该如何控制尺寸？

# c# - 加密和解密 19 位长的 BigInteger

> ID：15452341
> 
> 赞同：2
> 
> 时间：2013-03-16T17:28:24.913
> 
> 标签：c#, encryption, cryptography, biginteger

如何使用最多 19 位数字`BigInteger`并使用以下规则对其进行加密：

*   结果必须仅基于数字和小写英文字母。
*   所有输出必须与任何输入具有相同的长度。长度必须在 11 到 16 个字符之间，具体取决于您的方法，*但对于所有可能的输入应该是一致的*。
*   没有简单的模式。例如，如果您加密 000...1 和 000...2，结果应该看起来完全不同。
*   完全没有碰撞
*   应该可以解密回原来的BigInteger。

**我尝试过的事情**

*   取原始数字，通过某个键对它进行异或运算，将其乘以一个因子并将其转换为 36 进制字符串。该因素的目的是扩大范围，因此不会有太多的 0 填充。该因子必须在 1 到 之间`36^16/10^19`。这种方法的问题在于 a) 它不够“安全”，并且 b) 接近的数字具有非常相似的结果。

*   [这个答案。](https://stackoverflow.com/a/2565861/140937)但是，结果往往太短或太长，之前使用的因子方法在这里不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:03:46.090

19 位略小于 64 位，因此您可以简单地使用 8 字节分组密码（如 ECB 模式下的 TDEA）来加密 BigInteger 值。首先检索 BigInteger 的默认 64 位编码，然后使用密钥加密，最后进行 base 36 编码。结果将是少于 16 个字符的几个字符，但您始终可以使用任何值填充。

请注意，如果您将相同的值加密两次，您将得到相同的结果，因此在这方面密文确实会泄漏一些有关纯文本的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:46:35.357

这是一段似乎可以做到的代码，前提是您可以将 转换`BigInteger`为`ulong`(9999999999999999999 实际上是`ulong`)。结果始终是一个固定的 16 个字符的字符串（十六进制）。

```
 byte[] key = // put your 16-bytes private key here
    byte[] iv = Guid.NewGuid().ToByteArray(); // or anything that varies and you can carry

    string s = EncryptUInt64(ul, key, iv); // encode
    ulong dul = DecryptUInt64(s, key, iv).Value; // decode if possible

    public static string EncryptUInt64(ulong ul, byte[] key, byte[] iv)
    {
        using (MemoryStream output = new MemoryStream())
        using (var algo = TripleDES.Create())
        {
            algo.Padding = PaddingMode.None;
            using (CryptoStream stream = new CryptoStream(output, algo.CreateEncryptor(key, iv), CryptoStreamMode.Write))
            {
                byte[] ulb = BitConverter.GetBytes(ul);
                stream.Write(ulb, 0, ulb.Length);
            }
            return BitConverter.ToUInt64(output.ToArray(), 0).ToString("x16");
        }
    }

    public static ulong? DecryptUInt64(string text, byte[] key, byte[] iv)
    {
        if (text == null)
            return null;

        ulong ul;
        if (!ulong.TryParse(text, NumberStyles.HexNumber, null, out ul))
            return null;

        using (MemoryStream input = new MemoryStream(BitConverter.GetBytes(ul)))
        using (var algo = TripleDES.Create())
        {
            algo.Padding = PaddingMode.None;
            using (CryptoStream stream = new CryptoStream(input, algo.CreateDecryptor(key, iv), CryptoStreamMode.Read))
            {
                byte[] olb = new byte[8];
                try
                {
                    stream.Read(olb, 0, olb.Length);
                }
                catch
                {
                    return null;
                }
                return BitConverter.ToUInt64(olb, 0);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:51:34.763

您想要的技术是[保存加密的格式](http://en.wikipedia.org/wiki/Format-preserving_encryption)。这将允许您将 19 位数字加密为另一个 19 位数字。

不幸的是，这种技术的高效版本有点难以实现，而且如果你选择错误的参数，实际上可能会非常不安全。有它的图书馆。 [这个](http://botan.randombit.net/fpe.html)是开源的。不幸的是，它在 C++ 中，不清楚它是否在 Windows 上运行。 [Voltage](https://www.voltage.com/technology/format-preserving-encryption/)也有一个库，尽管它可能要花钱，而且我不确定它们支持哪些语言。

# ruby-on-rails - Rails 日期格式

> ID：15452346
> 
> 赞同：0
> 
> 时间：2013-03-16T17:28:45.937
> 
> 标签：ruby-on-rails, date

我正在开发一个 Rails 3.2 应用程序。我在 initializers/time_format.rb 文件中有以下配置。

```
Date::DATE_FORMATS.merge!(default: "%m/%d/%Y")
Date::DATE_FORMATS.merge!(db: "%m/%d/%Y")
Time::DATE_FORMATS.merge!(default: "%m/%d/%Y %H:%M:%S")
Time::DATE_FORMATS.merge!(db: "%m/%d/%Y %H:%M:%S") 
```

我想要所有日期格式 %m/%d/%Y。除了输入元素显示“yyyy-mm-dd”格式外，它工作正常吗？我错过了什么？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:45:07.947

您是在谈论 date_select 表单助手吗？

也许尝试像这样修改您的表格？

```
date_select("article", "written_on", :order => [:month, :day, :year]) 
```

检查[API](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)以获取更多详细信息。

# linux - 如何使用 Code::Blocks 在 Linux 上与 mingw 交叉编译？

> ID：15452347
> 
> 赞同：1
> 
> 时间：2013-03-16T17:28:47.810
> 
> 标签：linux, c++11, mingw, cross-compiling, codeblocks

所以我`i586-mingw32msvc`在linux上使用编译器为windows编译。Code::Blocks 的配置与[此](http://wiki.codeblocks.org/index.php?title=Code%3a%3aBlocks_and_Cross_Compilers)站点类似。一切都很好，直到我尝试编译**C++11**代码并且编译器说：`cc1plus: error: unrecognized command line option "-std=c++0x"`，然后我才意识到 mingw32 编译器对于 C++11 代码来说太旧了。

`mingw-w64`因此，我在菜单 Settings->Compiler->Toolchain 中的 Code::Blocks 中安装了and 我更改`i586-mingw32msvc`为`i686-w64-mingw32`. 搜索目录也已更改。

现在，当我尝试编译**C++11**代码时，我得到了这个（构建日志）：

```
i686-w64-mingw32-g++ -Wall -fexceptions  -std=c++0x  -DWINVER=0x0400 -D__WIN95__ -D__GNUWIN32__ -DSTRICT -DHAVE_W32API_H -D__WXMSW__ -D__WINDOWS__   -I/usr/i686-w64-mingw32/include  -c /home/me/program/p1/main.cpp -o obj/Release/win/main.o
i686-w64-mingw32-g++ -L/usr/i686-w64-mingw32/lib  -o bin/Release/win/p1 obj/Release/win/main.o   -lstdc++ -lgcc -lodbc32 -lwsock32 -lwinspool -lwinmm -lshell32 -lcomctl32 -lctl3d32 -lodbc32 -ladvapi32 -lodbc32 -lwsock32 -lopengl32 -lglu32 -lole32 -loleaut32 -luuid  
Output size is 107,04 KB
Process terminated with status 0 (0 minutes, 0 seconds)
0 errors, 0 warnings (0 minutes, 0 seconds) 
```

和 Build Messages 仅显示以下一行：

```
||=== Build finished: 0 errors, 0 warnings (0 minutes, 0 seconds) ===| 
```

就像没有编译一样。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:31:49.740

```
Output size is 107,04 KB 
```

所以你得到了一个大小为 107kB 的可执行文件。那没什么吗？

```
||=== Build finished: 0 errors, 0 warnings 
```

我会很高兴代替您...您是否**希望**编译错误作为编译器已运行的证明？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:47:53.127

我解决了这个问题，所以我自己回答，也许对其他人会有帮助，所以我只需要添加以下链接器选项：仅此而已`-static-libgcc -static-libstdc++ -L`。

# java - Java套接字一直冻结

> ID：15452351
> 
> 赞同：1
> 
> 时间：2013-03-16T17:29:10.773
> 
> 标签：java, android, sockets, serversocket

我正在尝试实现一个简单的服务器（java 应用程序）和客户端（android 应用程序），其中客户端每秒发送一个字符串大约 10 次。一切正常运行一分钟左右，之后服务器停止接收来自客户端的消息。相关代码如下。

**ClientThread.java**

```
public class ClientThread implements Runnable{
static Socket socket;
static String message = "";
InetAddress serverAddr;
BufferedOutputStream bos;

public ClientThread(String message){
    ClientThread.message = message;
}

@Override
public void run() {
    try{
        serverAddr = InetAddress.getByName(SERVER_IP);
        if(socket != null && socket.isConnected())socket.close();
        socket = new Socket(serverAddr, SERVER_PORT);
        bos = new BufferedOutputStream (socket.getOutputStream());
        OutputStreamWriter osw = new OutputStreamWriter(bos, "US-ASCII");
        osw.write(message);
        osw.flush();
        socket.shutdownOutput();
        socket.close();
    }catch (Exception e) {
    }
}
} 
```

**服务器线程.java**

```
public class ServerThread extends Thread{
    private ServerSocket serverSocket;
    static String clientSentence;

   public ServerThread(int port) throws IOException, AWTException{
      serverSocket = new ServerSocket(port);
   }

   public void run() {
      while(true){
         try{
            Socket server = serverSocket.accept();
            BufferedReader d = new BufferedReader(new InputStreamReader(server.getInputStream()));
            clientSentence = d.readLine();
            System.out.println(clientSentence);
            server.close();
         }catch(IOException e){
            e.printStackTrace();
            break;
         }
      }
   }
} 
```

ClientThread.java 每秒调用大约 10 次，使用：

```
Thread clientThread = new Thread(new ClientThread(message));
clientThread.start(); 
```

ServerThread.java 使用以下命令初始化和启动：

```
t = new ServerThread(8888);
t.start(); 
```

关于为什么运行一段时间后会冻结的任何想法？修复它的唯一方法是重新启动服务器，然后一分钟后再次出现同样的问题。我花了很多时间研究这个问题，但无法找到解决方案。

编辑：我发现服务器冻结在 clientSentence = d.readLine(); 部分。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:40:52.763

每秒 60 个连接，运行一分钟：每分钟 3600 个连接。

[关闭套接字不会**立即**释放关联的文件描述符。](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination)您可能会在操作系统层耗尽资源。

尝试`netstat`在服务器端运行以查看活动、挂起和关闭的连接。

你可以[在 SU 上阅读这篇文章](https://superuser.com/questions/173535/what-are-close-wait-and-time-wait-states)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:24:54.823

您的线程永远不会退出，并且您会不断创建新线程。所以你用完了一些东西：线程空间，套接字，FD，......

这都是错误的。您的线程应该循环*，或者**您*应该创建一个新线程。不是都。

 *还：

1.  您应该使用单个连接，而不是每条消息一个新连接。
2.  您正在阅读行，但要发送它们，除非数据已经包含换行符，这是不应该的。*

# regex - 查找正则表达式的补码

> ID：15452353
> 
> 赞同：4
> 
> 时间：2013-03-16T17:29:44.030
> 
> 标签：regex, complement

我的练习单上有一个问题要找到两个公式的补集

(1)`(aa|bb)*`

和

(2) `(a|b)(aa|bb)(a|b)`。

在我看来，两者的补充是`a* | b*`指只有`a`'s 还是 only `b`'s？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T18:09:24.247

您需要通过通常的程序：

*   将正则表达式转换为 NFA。
*   将 NFA 转换为 DFA。对于简单的情况，很容易（手动）从正则表达式直接转换为 DFA。
*   将所有非终端状态转换为终端状态，反之亦然。
*   将补充 DFA 转换为正则表达式。[这是这种转换的一个详细示例](https://stackoverflow.com/questions/13676431/regular-expressions-with-repeated-characters/13677120#13677120)

我不会向您展示结果，因为它是练习，但我会向您展示第一个公式的 DFA `(aa|bb)*`：

![公式1](../Images/1547b512029d76d47df713aa34dec880.png)

由此，您可以清楚地看到`a*`或`b*`不会给出正确的结果。您永远不会处于***Trap***状态（在补充正则表达式中成为终止状态），并且您可能最终处于状态***2a/2b***（在补充正则表达式中成为**非**终止状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T19:43:32.547

简单地说 (aa+bb)* 将包含示例字符串，例如 null、aa、aaaa、bb、bbbb、aabb、bbaa 等等，所以补码应该包含所有奇数长度的字符串 ((a+b)(a+b))*(a+b)

# asp.net - 以块 (8k) 写入 BLOB 数据的问题

> ID：15452355
> 
> 赞同：0
> 
> 时间：2013-03-16T17:29:51.957
> 
> 标签：asp.net, vb.net, sqldatareader

我正在尝试将 BLOB 数据写入 word 文件。这是我的代码

将 reportID 调暗为整数 reportID = table1.report_output_data_id

```
 Dim aSqlStr As String = "SELECT file_data FROM table2 WHERE report_output_data_id = " + Convert.ToString(reportID )
       Dim reader As SqlDataReader = CType(WebSession.DataObjectFactory.GetDataProvider("EGDatabase"), cDataProviderSQL).PopulateDataReader(aSqlStr)

       ' The size of the BLOB buffer.
       Dim bufferSize As Integer = 8192
       ' The BLOB byte() buffer to be filled by GetBytes.
       Dim outByte(bufferSize - 1) As Byte
       ' The bytes returned from GetBytes.
       Dim retval As Long
       ' The starting position in the BLOB output.
       Dim startIndex As Long = 0
       Do While reader.Read()
           ' Reset the starting byte for a new BLOB.
           startIndex = 0
           ' Read bytes into outByte() and retain the number of bytes returned.
           retval = reader.GetBytes(0, startIndex, outByte, 0, bufferSize)

           ' Continue while there are bytes beyond the size of the buffer.
           Do While retval = bufferSize
               Response.BinaryWrite(outByte)

               ' Reposition start index to end of the last buffer and fill buffer.
               startIndex += bufferSize
               retval = reader.GetBytes(0, startIndex, outByte, 0, bufferSize)
           Loop
           Response.BinaryWrite(outByte)
       Loop
       reader.Close() 
```

我一次写 8k，因为我之前在数据很大时遇到内存不足的问题，比如 1GB。而不是上面的代码，如果我使用

Response.BinaryWrite(table2.file_data)

一切正常。

所以请告诉我使用 sqldatareader 的问题是什么？

目前我正在考虑的文件大小是 31794 字节

仅供参考：我正在使用 CommandBehavior.SequentialAccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T19:19:02.890

在写入 BLOB 数据时，垃圾数据被添加到文件中。

例如文件大小为 33959 字节

循环 1 将处理 0 - 8192 字节（增量为 8k） 循环 2 8192 - 16384 循环 3 16384 - 24576 循环 4 24576 - 32768 循环 5 32768 - 33959（实际文件大小）

retval = reader.GetBytes(0, startIndex, outByte, 0, bufferSize)

在循环 5 中，我们只有 1191 个字节。因此，在 outbyte 数组中，前 1191 个项目将替换为此时读取器读取的字节，即 1191，但 outbyte 数组中的其余项目仍将保留垃圾值（即来自先前循环的）作为 outbyte数组大小为 8k。

因此，如果要写入的剩余数据少于 8k，则使用新的 outbyte 数组而不是默认的（8k）。这是代码更改。

Dim aSqlStr As String = "SELECT datalength(file_data),file_data FROM table2 WHERE report_output_data_id = " + Convert.ToString(reportID) Dim reader As SqlDataReader = CType(WebSession.DataObjectFactory.GetDataProvider("EGDatabase"), cDataProviderSQL).PopulateDataReader(aSqlStr )

```
 ' The size of the BLOB buffer.
   Dim bufferSize As Integer = 8192
   ' The BLOB byte() buffer to be filled by GetBytes.
   Dim outByte(bufferSize - 1) As Byte
   ' The bytes returned from GetBytes.
   Dim retval As Long
   ' The starting position in the BLOB output.
   Dim startIndex As Long = 0
           Do While reader.Read()
               ' Get file size from BLOB buffer.
               fileSize = reader.GetInt32(0)
               If fileSize > bufferSize Then

                   ' Reset the starting byte for a new BLOB.
                   startIndex = 0
                   ' Read bytes into outByte() and retain the number of bytes returned.
                   retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize)

                   ' Continue while there are bytes beyond the size of the buffer.
                   Do While retval = bufferSize
                       Response.BinaryWrite(outByte)
                       ' Reposition start index to end of the last buffer and fill buffer.
                       startIndex += bufferSize
                       Dim aRemainingBytes = fileSize - startIndex
                       If Not aRemainingBytes < bufferSize Then
                            retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize)
                       Else
                            Dim outByteRemaining(aRemainingBytes - 1) As Byte
                            retval = reader.GetBytes(1, startIndex, outByteRemaining, 0, aRemainingBytes)
                            Response.BinaryWrite(outByteRemaining)
                       End If
                    Loop
                Else
                    Response.BinaryWrite(aReportOutput.GetRelatedPropertyValue("ReportOutputData.FileData"))
                End If
           Loop
           reader.Close() 
```

# gnuplot - gnuplot histogram 不可视化小数字

> ID：15452360
> 
> 赞同：0
> 
> 时间：2013-03-16T17:30:16.860
> 
> 标签：gnuplot

我今天只是第一次看一下 gnuplot 并使用直方图示例，我想从教程中构建一个小示例，只是我将输入数字从 50,000 更改为 100 范围并且它没有正确可视化。这是dat文件

```
Region   Denmark   Netherlands     Norway  Sweden    
1891-1900       500  400  300   200 
```

这是 gnuplot 脚本

```
set terminal pngcairo
set output 'histograms.2.png'
set boxwidth 0.9 absolute
set style fill   solid 1.00 border lt -1
set key inside right top vertical Right noreverse noenhanced autotitles nobox
set style histogram clustered gap 5 title  offset character 0, 0, 0
set datafile missing '-'
set style data histograms
set xtics border in scale 0,0 nomirror rotate by -45  offset character 0, 0, 0
set xtics  norangelimit font ",8"
set xtics   ()
set title "US immigration from Northern Europe\n(same plot with larger gap between clusters)" 
set yrange [ 0.00000 : 3000\. ] noreverse nowriteback
i = 22
plot 'immigration.dat' using 1:xtic(1) ti col, '' u 2 ti col, '' u 3 ti col, '' u 4 ti col 
```

如此处所示：

![在此处输入图像描述](../Images/0d47d5db4dc6b497d219f880ae138467.png)

第一列被错误地可视化。有任何想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:02:58.377

我想你想要：

```
plot 'immigration.dat' using 2:xtic(1) ti col, '' u 3 ti col, '' u 4 ti col, '' u 5 ti col 
```

在您的版本中，gnuplot 将第一列 ( `1891-1900`) 中的数据解释为数字 ( `1891`)。您也可以通过仔细查看关键来看到这一点 - 红色条对应于`Region`。

# c++ - 如何对指向另一个字符数组的指针数组进行冒泡排序

> ID：15452364
> 
> 赞同：0
> 
> 时间：2013-03-16T17:30:30.083
> 
> 标签：c++, pointers, char, bubble-sort

我有一个包含`chars`输入的数组，另一个数组包含指向`chars`第一个数组中对应的指针。这部分进展顺利。

但后来我想对`char**`数组（指针数组）进行冒泡排序，以便原始数组保持不变但出现问题（文本未排序）。

```
EDIT: Please discuss only the sorting algorithm

 char tab[200];//array of chars 
 char** t = new char*[tabLength];
 //SOMETHING
....

....
int n = tabLength;//length of tab(length of the word it contains)
//TILL HERE EVERYTHING IS FINE -----------------------------------
         //bubble sorting below
do{
    for(int i = 0; i < n -1; i++){
        if(*t[i] > *t[i+1]){
            char* x = t[i];
            t[i] = t[i+1];
            t[i+1] = x;
        }
        n--;
    }
}while(n>1);

cout<<"sorted input";
for(int i = 0; i < tabLength; i++)
    cout<<t[i];
    cout<<endl;

cout<<"original"<<tab<<endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:35:08.403

确保打印出指针指向的值：

```
for(int i = 0; i < tabLength; i++)
  cout << *t[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:52:34.340

我会简单地使用标准库中已经可以使用的功能：

```
#include <iostream>
#include <string>
#include <algorithm>

int main()
{
    std::string original;
    std::getline(std::cin, original);

    std::cout << '|' << original << "|\n";

    std::string sorted = original;
    std::sort(std::begin(sorted), std::end(sorted));

    std::cout << "Sorted  : " << sorted << '\n';
    std::cout << "Original: " << original << '\n';
} 
```

测试运行：

```
|你好世界，你今天好吗？|
已排序 : ,?Haadddeeghillllnoooooorrtuwyy
原文：Hello World，你今天好吗？

```

# php - 检查数据库、返回消息以及发送电子邮件的功能

> ID：15452368
> 
> 赞同：3
> 
> 时间：2013-03-16T17:30:46.760
> 
> 标签：php, jquery, ajax

在此示例中，我使用的是 MySQL，我知道它已被弃用，但这仅用于学习目的。我也在学习如何使用 PDO，现在只是不想因为我对 PDO 的缺乏经验而搞砸，所以我现在正在使用 mysql。

好的，所以我有一个 jQuery AJAX 函数，可以将表单数据提交到 PHP 函数页面。然后 PHP 页面与数据库通信并返回结果。到目前为止，所有这些都有效。

用户填写提供其电子邮件地址的表格。电子邮件被传递到 PHP 页面并输入数据库。如果用户存在，则会显示一条消息，告诉他们他们已经订阅。如果不退出，则添加它们，然后一条消息告诉它们已成功添加。好消息是所有这些都很棒！

现在，我有一个问题是，在同一个回调函数“dispAdd”期间，我想为用户生成一封自动欢迎电子邮件。不过，无论我如何尝试对邮件调用进行编码，我似乎都会在函数中遇到错误。我将给你我现在拥有的东西，但如果有人能提供帮助，我将不胜感激。

这是我的回调函数，因为所有其他部分现在都可以正常工作：

```
function dispAdd()             // Serves as callback function to jQuery/AJAX in contact.html
{
  $sql= "SELECT * FROM mailList WHERE email = '$email'";
  $result= mysql_query($sql) or die(mysql_error());
  $to = "rmailloux11@mail.bristol.mass.edu";
  $who = "ME";
  $message = "WOW";
  $subject = "TESTING";
  $message = $who . ', ' . $message;
  $headers = "From: rmailloux11@mail.bristol.mass.edu" . "\r\n";

  if(mysql_num_rows($result) > 0)  // Checks to see if query returns any info for the calling function
  {
    mail($to,$subject,$message,$headers);
    while ( $row = mysql_fetch_assoc($result))
    return;
  }
} 
```

原始电话：

```
$('#contForm').submit(function() {
  var formData = $(this).serialize();            // Stores all form data in AJAX variable
  $.post('contact.php',formData,dispAdd);
  function dispAdd(result) {               // Callback function requests result of RESULT
    if (!result) {
      $('#main').html('<div>Your have been added to the mailing list</div>');
    } else {
      if ($('#fail').length==0) {
        $('#main').append('<div id="fail" style="color:red";>This email address is already subscribed to our mailing list</div>');
      }
    }
  }
  return false;    // Stops form from loading contact.php page
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:37:41.563

```
<script>
  $('#contForm').submit(function()
  {
    var formData = $(this).serialize();            // Stores all form data in AJAX variable
    $.post('contact.php',formData, function(data)
    {
      console.log(data);
      if(data)
      {
        $('#main').html('<div>You have been added to the mailing list</div>');
      }
      else
      {
        $('#main').append('<div id="fail" style="color:red";>This email address is already subscribed to our mailing list</div>');
      }
      console.log(data);
    });
    return false;    // Stops form from loading contact.php page
  });
</script> 
```

然后，在contact.php 中你应该放置以下函数：

```
function dispAdd()             // Serves as callback function to jQuery/AJAX in contact.html
{
  $sql= "SELECT * FROM mailList WHERE email = '$email'";
  $result= mysql_query($sql) or die(mysql_error());
  $to = "rmailloux11@mail.bristol.mass.edu";
  $who = "ME";
  $message = "WOW";
  $subject = "TESTING";
  $message = $who . ', ' . $message;
  $headers = "From: rmailloux11@mail.bristol.mass.edu" . "\r\n";

  if(mysql_num_rows($result) > 0)   // Checks to see if query returns any info for the calling function
  {
    mail($to,$subject,$message,$headers);
    while ( $row = mysql_fetch_assoc($result))
    return;
  }
} 
```

在contact.php 上的代码运行后，让它调用该`dispAdd`函数并将结果返回`dispAdd`给您的Ajax 请求。

# prolog - Prolog 函数（例如：汽车拥有历史）

> ID：15452372
> 
> 赞同：1
> 
> 时间：2013-03-16T17:31:10.433
> 
> 标签：prolog, singleton, chain

**编辑：**我想出了单例变量。Prolog 不喜欢数据库的大写单词。我还对代码进行了一些重大更改。

**编辑：编辑**：意识到我没有递归调用。德普

尽管我在使用 Haskell 进行函数式编程方面有一些经验，但我对 Prolog 还是很陌生。

尽管我在尝试使函数输出使语句为真的所有可能值时遇到了麻烦。我不认为这是一个逻辑错误，因为过去几个小时我一直在经历它，但我可能是错的。

在这个问题中，我试图创建汽车的所有权历史。

-- 我知道一个人拥有一辆车 如果 - 他/她从经销商那里买了这辆车 - 他/她从前车主那里买了这辆车。

因此，了解这些事实后，我建立了一个数据库，创建了汽车、车主和一个单独的经销商变量，这些变量将在此递归中用作基本案例。

```
car(prius).
car(bmw).

owner(meg).
owner(nora).
dealer(d).

boughtFrom(meg,nora).
boughtFrom(nora,d). 
```

我确定了从从经销商那里购买的诺拉购买的梅格。当您从经销商处购买时，我计划的递归停止，因为这是基本情况的终点。所以逻辑是这样的：

```
ownCar(X,Y) :- boughtFrom(X,d), car(Y).
ownCar(X,Y) :- ownCar(boughtFrom(_,prevowner(X)), car(Y)). 
```

如果您是经销商或从前任车主那里购买汽车，您可以成为汽车的车主。如果他们是从经销商或其他前任所有者那里购买的，则该前任所有者就是所有者。等等等等。所以它唯一停止的时间是这个人从经销商那里买车的时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:19:12.177

我认为您的数据库不完整，因为缺少一些明显的关系。

例如，这条规则`ownCar(X,Y) :- boughtFrom(X,d), car(Y).`适用于*所有*Y，即从经销商处购买的任何人都将“拥有”每辆车。

表示也是不准确的。卖车后，卖方不再是车主。

无论如何，在 Prolog 中你编写*连接*（它是一个关系数据模型），然后得到传递属性的闭包：

```
ownCar(X, Y) :- owner(O), boughtFrom(X, O), ownCar(O, Y). 
```

注意在Prolog中我们应该避免左递归，因为它可能导致无限循环，那么连接的顺序很重要。

*编辑*

要获取历史记录（作为列表），您应该在谓词中添加一个参数，或者将“输出”更改为列表。你可以做类似的事情

```
ownCar(X, Y, [X]) :- boughtFrom(X,d), car(Y).
ownCar(X, Y, [X|L]) :- owner(O), boughtFrom(X, O), ownCar(O, Y, L). 
```

注意：通常在 Prolog 中，我们将“输出”参数放在最后一个参数位置。

# javascript - 匹配来自两个 a 链接的文本并更改第一个链接的类

> ID：15452374
> 
> 赞同：0
> 
> 时间：2013-03-16T17:31:28.297
> 
> 标签：javascript, jquery, addclass

`.firstA`如果这些内容的内容和`.secondA`包含相同的文本，我想触发一个样式。我以为这段代码可以做到，唉，它没有用。我究竟做错了什么？

HTML：

```
<tr>
<td><a id="a11" href="#" class="firstA">text</a><a id="c10" href="#" class="secondA">text</a></td>
</tr> 
```

JS：

```
$('.firstA').each(function(){
        if ($(this).text() == $(this).next('.secondA').text()){
            $(this).addClass('highlight');
        }
}); 
```

PS：.secondA 隐藏了一个`$(.secondA).hide();`函数，这可能是问题吗？

# c# - C# - 对象组合 - 删除样板代码

> ID：15452377
> 
> 赞同：32
> 
> 时间：2013-03-16T17:31:37.487
> 
> 标签：c#, .net, inheritance, design-patterns, composition

# 背景/问题

我参与过许多需要持久化数据并且通常最终使用[存储库](http://www.martinfowler.com/eaaCatalog/repository.html)模式的 .NET 项目。有谁知道在不牺牲代码库可扩展性的情况下删除尽可能多的样板代码的好策略？

# 继承策略

因为很多存储库代码都是样板并且需要重复，所以我通常创建一个基类来涵盖异常处理、日志记录和事务支持等基础知识以及一些基本的 CRUD 方法：

```
public abstract class BaseRepository<T> where T : IEntity
{
    protected void ExecuteQuery(Action query)
    {
        //Do Transaction Support / Error Handling / Logging
        query();
    }       

    //CRUD Methods:
    public virtual T GetByID(int id){}
    public virtual IEnumerable<T> GetAll(int id){}
    public virtual void Add (T Entity){}
    public virtual void Update(T Entity){}
    public virtual void Delete(T Entity){}
} 
```

所以当我有一个简单的域时，这很有效，我可以为每个实体快速创建一个 DRY 存储库类。但是，当域变得更加复杂时，这种情况就会开始崩溃。假设引入了一个不允许更新的新实体。我可以分解基类并将 Update 方法移动到不同的类中：

```
public abstract class BaseRepositorySimple<T> where T : IEntity
{
    protected void ExecuteQuery(Action query);

    public virtual T GetByID(int id){}
    public virtual IEnumerable<T> GetAll(int id){}
    public virtual void Add (T entity){}
    public void Delete(T entity){}
}

public abstract class BaseRepositoryWithUpdate<T> :
    BaseRepositorySimple<T> where T : IEntity
{
     public virtual void Update(T entity){}
} 
```

此解决方案不能很好地扩展。假设我有几个具有通用方法的实体： public virtual void Archive(T entity){}

但是一些可以存档的实体也可以更新，而其他实体则不能。所以我的继承解决方案崩溃了，我必须创建两个新的基类来处理这种情况。

# 作曲策略

我已经探索了 Compositon 模式，但这似乎留下了很多样板代码：

```
public class MyEntityRepository : IGetByID<MyEntity>, IArchive<MyEntity>
{
    private Archiver<MyEntity> _archiveWrapper;      
    private GetByIDRetriever<MyEntity> _getByIDWrapper;

    public MyEntityRepository()
    {
         //initialize wrappers (or pull them in
         //using Constructor Injection and DI)
    }

    public MyEntity GetByID(int id)
    {
         return _getByIDWrapper(id).GetByID(id);
    }

    public void Archive(MyEntity entity)
    {
         _archiveWrapper.Archive(entity)'
    }
} 
```

MyEntityRepository 现在加载了样板代码。有没有可以用来自动生成它的工具/模式？

如果我可以将 MyEntityRepository 变成这样的东西，我认为这将是理想的：

```
[Implement(Interface=typeof(IGetByID<MyEntity>), 
    Using = GetByIDRetriever<MyEntity>)]      
[Implement(Interface=typeof(IArchive<MyEntity>), 
    Using = Archiver<MyEntity>)
public class MyEntityRepository
{
    public MyEntityRepository()
    {
         //initialize wrappers (or pull them in
         //using Constructor Injection and DI)
    }
} 
```

# 面向方面的编程

我研究了为此使用 AOP 框架，特别是[PostSharp](http://www.postsharp.net/)和他们的[Composition Aspect](http://doc.postsharp.net/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/20c81e23-af91-4688-a672-b0f3cce793a9.htm)，看起来它应该可以解决问题，但是为了使用存储库，我必须调用 Post.Cast<>()，它添加了一个非常奇怪的代码气味。任何人都知道是否有更好的方法来使用 AOP 来帮助摆脱合成器样板代码？

# 自定义代码生成器

如果一切都失败了，我想我可以创建一个自定义代码生成器 Visual Studio 插件，它可以将样板代码生成到部分代码文件中。是否已经有一个工具可以做到这一点？

```
[Implement(Interface=typeof(IGetByID<MyEntity>), 
    Using = GetByIDRetriever<MyEntity>)]      
[Implement(Interface=typeof(IArchive<MyEntity>), 
    Using = Archiver<MyEntity>)
public partial class MyEntityRepository
{
    public MyEntityRepository()
    {
         //initialize wrappers (or pull them in
         //using Constructor Injection and DI)
    }
} 

//Generated Class file
public partial class MyEntityRepository : IGetByID<MyEntity>, IArchive<MyEntity>
{
    private Archiver<MyEntity> _archiveWrapper;      
    private GetByIDRetriever<MyEntity> _getByIDWrapper;

    public MyEntity GetByID(int id)
    {
         return _getByIDWrapper(id).GetByID(id);
    }

    public void Archive(MyEntity entity)
    {
         _archiveWrapper.Archive(entity)'
    }
} 
```

# 扩展方法

当我最初写这个问题时忘记添加这个（对不起）。我还尝试了扩展方法：

```
public static class GetByIDExtenions
{
     public T GetByID<T>(this IGetByID<T> repository, int id){ }        
} 
```

但是，这有两个问题，a）我必须记住扩展方法类的名称空间并将其添加到任何地方，b）扩展方法不能满足接口依赖项：

```
public interface IMyEntityRepository : IGetByID<MyEntity>{}
public class MyEntityRepository : IMyEntityRepository{} 
```

*更新*：[T4 模板](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)会是一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T22:42:12.560

我有一个通用存储库接口，它只为特定的数据存储实现一次。这里是：

```
public interface IRepository<T> where T : class
{
    IQueryable<T> GetAll();
    T Get(object id);
    void Save(T item);
    void Delete(T item);
} 
```

我为 EntityFramework、NHibernate、RavenDB 存储实现了它。我还有一个用于单元测试的内存实现。

例如，这里是基于内存集合的存储库的一部分：

```
public class InMemoryRepository<T> : IRepository<T> where T : class
{
    protected readonly List<T> _list = new List<T>();

    public virtual IQueryable<T> GetAll()
    {
        return _list.AsReadOnly().AsQueryable();
    }

    public virtual T Get(object id)
    {
        return _list.FirstOrDefault(x => GetId(x).Equals(id));
    }

    public virtual void Save(T item)
    {
        if (_list.Any(x => EqualsById(x, item)))
        {
            Delete(item);
        }

        _list.Add(item);
    }

    public virtual void Delete(T item)
    {
        var itemInRepo = _list.FirstOrDefault(x => EqualsById(x, item));

        if (itemInRepo != null)
        {
            _list.Remove(itemInRepo);
        }
    }
} 
```

通用存储库接口使我免于创建大量类似的类。您只有一个通用存储库实现，但也可以自由查询。

`IQueryable<T>`result from `GetAll()`method 允许我对数据进行任何我想要的查询，并将它们与特定于存储的代码分开。所有流行的 .NET ORM 都有自己的 LINQ 提供程序，它们都应该有这种神奇的`GetAll()`方法——所以这里没有问题。

我使用 IoC 容器在组合根中指定存储库实现：

```
ioc.Bind(typeof (IRepository<>)).To(typeof (RavenDbRepository<>)); 
```

在测试中，我使用它的内存替换：

```
ioc.Bind(typeof (IRepository<>)).To(typeof (InMemoryRepository<>)); 
```

如果我想为存储库添加更多特定于业务的查询，我将添加一个扩展方法（类似于答案中的扩展方法）：

```
public static class ShopQueries
{
    public IQueryable<Product> SelectVegetables(this IQueryable<Product> query)
    {
        return query.Where(x => x.Type == "Vegetable");
    }

    public IQueryable<Product> FreshOnly(this IQueryable<Product> query)
    {
        return query.Where(x => x.PackTime >= DateTime.Now.AddDays(-1));
    }
} 
```

因此，您可以在业务逻辑层查询中使用和混合这些方法，从而节省存储库实现的可测试性和易用性，例如：

```
var freshVegetables = repo.GetAll().SelectVegetables().FreshOnly(); 
```

如果您不想为这些扩展方法使用不同的命名空间（比如我） - 好的，请将它们放在存储库实现所在的同一命名空间中（比如`MyProject.Data`），或者更好的是，放到一些现有的业务特定命名空间（比如`MyProject.Products`或`MyProject.Data.Products`）。现在不需要记住额外的命名空间。

如果您对某种实体有一些特定的存储库逻辑，请创建一个派生的存储库类来覆盖您想要的方法。例如，如果产品只能通过`ProductNumber`而不是找到`Id`并且不支持删除，则可以创建此类：

```
public class ProductRepository : RavenDbRepository<Product>
{
    public override Product Get(object id)
    {
        return GetAll().FirstOrDefault(x => x.ProductNumber == id);
    }

    public override Delete(Product item)
    {
        throw new NotSupportedException("Products can't be deleted from db");
    }
} 
```

并让 IoC 为产品返回这个特定的存储库实现：

```
ioc.Bind(typeof (IRepository<>)).To(typeof (RavenDbRepository<>));
ioc.Bind<IRepository<Product>>().To<ProductRepository>(); 
```

这就是我与我的存储库一起离开的方式；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:32:50.833

签出 T4 文件以生成代码。T4 内置于 Visual Studio 中。[在此处查看教程](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)。

我通过检查 LINQ DBML 和它们的存储库创建了用于生成 POCO 实体的代码的 T4 文件，我认为它会在这里很好地为您服务。如果您使用 T4 文件生成部分类，您可以只为特殊情况编写代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T19:59:00.183

对我来说，您似乎将基类划分为一个继承类，然后将它们的功能都包含在一个继承类中。在这种情况下，组合是选择。如果 C# 支持，多类继承也会很好。但是，因为我觉得继承更好并且可重用性仍然很好，所以我的第一选择会选择它。

**选项1**

我宁愿多一个基类而不是两者的组合。可重用性也可以通过静态方法而不是继承来解决：

可重复使用的部分在外面是不可见的。无需记住命名空间。

```
static class Commons
{
    internal static void Update(/*receive all necessary params*/) 
    { 
        /*execute and return result*/
    }

    internal static void Archive(/*receive all necessary params*/) 
    { 
        /*execute and return result*/
    }
}

class Basic 
{
    public void SelectAll() { Console.WriteLine("SelectAll"); }
}

class ChildWithUpdate : Basic
{
    public void Update() { Commons.Update(); }
}

class ChildWithArchive : Basic
{
    public void Archive() { Commons.Archive(); }
}

class ChildWithUpdateAndArchive: Basic
{
    public void Update() { Commons.Update(); }
    public void Archive() { Commons.Archive(); }
} 
```

当然有一些小的重复代码，但那只是调用公共库中的现成函数。

**选项 2**

我的组合实现（或模仿多重继承）：

```
public class Composite<TFirst, TSecond>
{
    private TFirst _first;
    private TSecond _second;

    public Composite(TFirst first, TSecond second)
    {
        _first = first;
        _second = second;
    }

    public static implicit operator TFirst(Composite<TFirst, TSecond> @this)
    {
        return @this._first;
    }

    public static implicit operator TSecond(Composite<TFirst, TSecond> @this)
    {
        return @this._second;
    }

    public bool Implements<T>() 
    {
        var tType = typeof(T);
        return tType == typeof(TFirst) || tType == typeof(TSecond);
    }
} 
```

继承与组合（下）：

```
class Basic 
{
    public void SelectAll() { Console.WriteLine("SelectAll"); }
}

class ChildWithUpdate : Basic
{
    public void Update() { Console.WriteLine("Update"); }
}

class ChildWithArchive : Basic
{
    public void Archive() { Console.WriteLine("Archive"); }
} 
```

作品。不确定这是否足以说明不存在样板代码。

```
class ChildWithUpdateAndArchive : Composite<ChildWithUpdate, ChildWithArchive>
{
    public ChildWithUpdateAndArchive(ChildWithUpdate cwu, ChildWithArchive cwa)
        : base(cwu, cwa)
    {
    }
} 
```

使用所有这些的代码看起来还不错，但在分配中仍然不寻常（**不可见**）类型转换。这是减少样板代码的回报：

```
ChildWithUpdate b;
ChildWithArchive c;
ChildWithUpdateAndArchive d;

d = new ChildWithUpdateAndArchive(new ChildWithUpdate(), new ChildWithArchive());
//now call separated methods.
b = d;
b.Update();
c = d;
c.Archive(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-25T11:21:33.263

这是我的版本：

```
interface IGetById
{
    T GetById<T>(object id);
}

interface IGetAll
{
    IEnumerable<T> GetAll<T>();
}

interface ISave
{
    void Save<T>(T item) where T : IHasId; //you can go with Save<T>(object id, T item) if you want pure pure POCOs
}

interface IDelete
{
    void Delete<T>(object id);
}

interface IHasId
{
    object Id { get; set; }
} 
```

我不喜欢通用存储库接口，因为它设置了额外的限制并使其以后更难使用。我改用通用方法。

[我没有为存储库使用标头接口](http://martinfowler.com/bliki/HeaderInterface.html)，而是为每个存储库方法使用[角色接口。](http://martinfowler.com/bliki/RoleInterface.html)这让我可以向存储库方法添加额外的功能，例如日志记录、发布对 PubSub 的更改等。

我不使用存储库进行自定义查询，因为我还没有找到适合任何数据库的任何好的和简单的查询抽象。我的存储库版本只能通过 id 获取项目或获取相同类型的所有项目。其他查询在内存中完成（如果性能足够好）或者我有一些其他机制。

为方便起见，可以引入 IRepository 接口，这样您就不必为诸如 crud 控制器之类的东西不断编写 4 个接口

```
interface IRepository : IGetById, IGetAll, ISave, IDelete { }

class Repository : IRepository
{
    private readonly IGetById getter;

    private readonly IGetAll allGetter;

    private readonly ISave saver;

    private readonly IDelete deleter;

    public Repository(IGetById getter, IGetAll allGetter, ISave saver, IDelete deleter)
    {
        this.getter = getter;
        this.allGetter = allGetter;
        this.saver = saver;
        this.deleter = deleter;
    }

    public T GetById<T>(object id)
    {
        return getter.GetById<T>(id);
    }

    public IEnumerable<T> GetAll<T>()
    {
        return allGetter.GetAll<T>();
    }

    public void Save<T>(T item) where T : IHasId
    {
        saver.Save(item);
    }

    public void Delete<T>(object id)
    {
        deleter.Delete<T>(id);
    }
} 
```

我提到使用角色接口我可以添加额外的行为，这里有几个使用装饰器的例子

```
class LogSaving : ISave
{
    private readonly ILog logger;

    private readonly ISave next;

    public LogSaving(ILog logger, ISave next)
    {
        this.logger = logger;
        this.next = next;
    }

    public void Save<T>(T item) where T : IHasId
    {
        this.logger.Info(string.Format("Start saving {0} : {1}", item.ToJson()));
        next.Save(item);
        this.logger.Info(string.Format("Finished saving {0}", item.Id));
    }
}

class PublishChanges : ISave, IDelete
{
    private readonly IPublish publisher;

    private readonly ISave nextSave;

    private readonly IDelete nextDelete;

    private readonly IGetById getter;

    public PublishChanges(IPublish publisher, ISave nextSave, IDelete nextDelete, IGetById getter)
    {
        this.publisher = publisher;
        this.nextSave = nextSave;
        this.nextDelete = nextDelete;
        this.getter = getter;
    }

    public void Save<T>(T item) where T : IHasId
    {
        nextSave.Save(item);
        publisher.PublishSave(item);
    }

    public void Delete<T>(object id)
    {
        var item = getter.GetById<T>(id);
        nextDelete.Delete<T>(id);
        publisher.PublishDelete(item);
    }
} 
```

在内存存储中实现测试并不难

```
class InMemoryStore : IRepository
{
    private readonly IDictionary<Type, Dictionary<object, object>> db;

    public InMemoryStore(IDictionary<Type, Dictionary<object, object>> db)
    {
        this.db = db;
    }

    ...
} 
```

最后把所有东西放在一起

```
var db = new Dictionary<Type, Dictionary<object, object>>();
var store = new InMemoryStore(db);
var storePublish = new PublishChanges(new Publisher(...), store, store, store);
var logSavePublish = new LogSaving(new Logger(), storePublish);
var repo = new Repository(store, store, logSavePublish, storePublish); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-05T18:32:19.230

您可以使用访问者模式，[在此处](http://codinghelmet.com/?path=howto/visitor-pattern-encapsulation "编码头盔博客文章")阅读实现，因此您只能实现必要的功能。

这是想法：

```
public class Customer : IAcceptVisitor
{
    private readonly string _id;
    private readonly List<string> _items = new List<string>();
    public Customer(string id)
    {
        _id = id;
    }

    public void AddItems(string item)
    {
        if (item == null) throw new ArgumentNullException(nameof(item));
        if(_items.Contains(item)) throw new InvalidOperationException();
        _items.Add(item);
    }

    public void Accept(ICustomerVisitor visitor)
    {
        if (visitor == null) throw new ArgumentNullException(nameof(visitor));
        visitor.VisitCustomer(_items);
    }
}
public interface IAcceptVisitor
{
    void Accept(ICustomerVisitor visitor);
}

public interface ICustomerVisitor
{
    void VisitCustomer(List<string> items);
}

public class PersistanceCustomerItemsVisitor : ICustomerVisitor
{
    public int Count { get; set; }
    public List<string> Items { get; set; }
    public void VisitCustomer(List<string> items)
    {
        if (items == null) throw new ArgumentNullException(nameof(items));
        Count = items.Count;
        Items = items;
    }
} 
```

因此，您可以在域逻辑和基础架构之间应用关注点分离，应用访问者模式以实现持久性。问候！

# python - 使用 Virtualenv 安装一个程序的两个版本

> ID：15452390
> 
> 赞同：0
> 
> 时间：2013-03-16T17:32:34.820
> 
> 标签：python, virtualenv

所以我有一个关于安装单个程序的多个版本的问题。显然我需要在我的项目的一部分中使用 Weblogo-3.3，但是我用于不同部分的另一个程序使用 Weblogo-2.8.2 作为依赖项，并且不能与 3.3 一起使用。这是...有问题的，因为我需要做这两部分。两者都使用python 2.7。

有什么方法可以使用虚拟环境来选择性地安装和运行 Weblogo-2.8？我担心即使我这样做并尝试运行将其用作依赖项的程序，它也会尝试调用 Weblogo-3.3。它们不会都在 python 的 dist-packages 文件夹中并导致冲突吗？

我正要尝试用 Virtualenv 安装它，但我不想弄乱我当前的 Weblogo-3.3 安装，所以我打算推迟到我确定为止。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:48:26.757

这正是虚拟环境的用途。

创建您的虚拟环境并激活，然后您所做的任何“pip install”或“easy_install”只会影响该环境，而不是您的站点。

如果我是你，一旦你让 2.8 工作，在不同的 virtenv 中安装 3.0，然后考虑删除站点范围的 Weblogo。

# sorting - 使用 KnpPaginatorBundle 对连接表进行排序

> ID：15452393
> 
> 赞同：5
> 
> 时间：2013-03-16T17:32:45.723
> 
> 标签：sorting, symfony, doctrine-orm, pagination

我设置了一个测试来更熟悉 Symfony2 和 KnpPaginatorBundle。我有一张宠物表，其中引用了宠物动物类型（`Dog`、、`Cat`等）。我可以按`id`,排序`name`，但是当我尝试按动物排序时，`type`我收到一条错误消息，指出：

> 给定的 Query 组件中没有这样的字段 [animalkind]，别名为 [a]

我尝试了各种字段名称，但似乎没有任何效果。

实体：`MyPets.php`

```
<?php
namespace Xyz\TestBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * MyPet
 */

class MyPet
{
    /**
     * @var integer
     */
    private $id;

    /**
     * @var string
     */
    private $name;

    /**
     * Set id
     *
     * @param integer $id
     * @return MyPet
     */
    public function setId($id)
    {
        $this->id = $id;
        return $this;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return MyPet
     */
    public function setName($name)
    {
        $this->name = $name;
        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }
    /**
     * @var \Xyz\TestBundle\Entity\AnimalKind
     */
    private $AnimalKind;

    /**
     * Set AnimalKind
     *
     * @param \Xyz\TestBundle\Entity\AnimalKind $animalKind
     * @return MyPet
     */
    public function setAnimalKind(\Xyz\TestBundle\Entity\AnimalKind $animalKind)
    {
        $this->AnimalKind = $animalKind;
        return $this;
    }

    /**
     * Get AnimalKind
     *
     * @return \Xyz\TestBundle\Entity\AnimalKind 
     */
    public function getAnimalKind()
    {
        return $this->AnimalKind;

    }
} 
```

实体：`AnimalKind.php`

```
<?php
namespace Xyz\TestBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * AnimalKind
 */
class AnimalKind {

    /**
     * @var integer
     */
    private $id;

    /**
     * @var string
     */
    private $type;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId() {
        return $this->id;
    }

    /**
     * Set type
     *
     * @param string $type
     * @return AnimalKind
     */
    public function setType($type) {
        $this->type = $type;

        return $this;
    }

    /**
     * Get type
     *
     * @return string 
     */
    public function getType() {
        return $this->type;
    }

    /**
     * @var \Doctrine\Common\Collections\Collection
     */
    private $MyPets;

    /**
     * Constructor
     */
    public function __construct() {
        $this->MyPets = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add MyPets
     *
     * @param \Xyz\TestBundle\Entity\MyPet $myPets
     * @return AnimalKind
     */
    public function addMyPet(\Xyz\TestBundle\Entity\MyPet $myPets) {
        $this->MyPets[] = $myPets;

        return $this;
    }

    /**
     * Remove MyPets
     *
     * @param \Xyz\TestBundle\Entity\MyPet $myPets
     */
    public function removeMyPet(\Xyz\TestBundle\Entity\MyPet $myPets) {
        $this->MyPets->removeElement($myPets);
    }

    /**
     * Get MyPets
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getMyPets() {
        return $this->MyPets;
    }

    public function __toString() {
        return $this->getType();
    }

} 
```

控制器：`MyPetController.php`( `IndexAction`)

```
 public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();

        $query = $em->createQuery("SELECT a FROM XyzTestBundle:MyPet a");

        $paginator  = $this->get('knp_paginator');

        $pagination = $paginator->paginate($query,$this->get('request')->query->get('page', 
          1)/*page number*/,15/*limit per page*/);

        return $this->render('XyzTestBundle:MyPet:index.html.twig', array(
         'pagination' => $pagination,

        ));
    } 
```

观点：（`MyPet/index.html.twig`截图）

```
<table class="records_list">
    <thead>
        <tr>
            {# sorting of properties based on query components #}
            <th>{{ knp_pagination_sortable(pagination, 'Id', 'a.id') }}</th>
            <th>{{ knp_pagination_sortable(pagination, 'Name', 'a.name') }}</th>
            <th>{{ knp_pagination_sortable(pagination, 'kind', 'a.animalkind') }}</th>
        </tr>
    </thead>
    <tbody>
    {% for mypet in pagination %}
        <tr>
            <td><a href="{{ path('xyz_mypet_show', { 'id': mypet.id }) }}">{{ mypet.id }}</a></td>
            <td>{{ mypet.name }}</td>
            <td>{{ mypet.animalkind }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table> 
```

谁能给我关于这个问题的任何见解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:13:30.837

第一个问题是缺少 ORM 关系声明；基本上在您的数据库`YourPet`中不能关联到`AnimalKind`.

[您可以在 Symfony 的网站上](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)找到有关实体关系和关联的文档。

从`YourPet`实体的角度来看，您可能希望使用多对一关系。

第二个问题是，一旦您解决了上述问题，您就没有`AnimalKind`在查询中加入实体。

第三个问题是您不能按实体对查询结果进行排序。

第一个问题潜在的解决方案：

```
// In MyPet class
/**
 * @var \Xyz\TestBundle\Entity\AnimalKind
 * @ORM\OneToMany(targetEntity="AnimalKind", inversedBy="MyPets")
 */
private $AnimalKind;

// In AnimalKind class
/**
 * @var \Doctrine\Common\Collections\Collection
 * @ORM\ManyToOne(targetEntity="MyPet", inversedBy="AnimalKind")
 */
private $MyPets; 
```

第二个问题潜在解决方案：

```
$query = $em->createQuery("
    SELECT a, k
    FROM XyzTestBundle:MyPet a
    JOIN a.animalKind k 
"); 
```

第三个问题潜在解决方案：

```
<th>{{ knp_pagination_sortable(pagination, 'kind', 'k.type') }}</th> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T15:33:12.393

要显示没有 animalKind 的动物，您必须在查询中使用 LEFT JOIN

```
$query = $em->createQuery("
    SELECT a, k
    FROM XyzTestBundle:MyPet a
    LEFT JOIN a.animalKind k 
"); 
```

# c# - c#/.net中如何让一个进程在另一个进程中触发一个事件？

> ID：15452403
> 
> 赞同：2
> 
> 时间：2013-03-16T17:33:22.353
> 
> 标签：c#, .net, vb.net, interprocess

如何使 process-1 能够在 process-2 中触发事件，并发送一些参数，以指示第二个进程执行特定操作，并可选择接收回复？

可以使用文件系统来执行此操作，可能有一个文件，其中 process-1 转储了一些命令/查询，而 process-2 将不断地从该文件中读取，但是，这个解决方案并不好。

还有其他方法吗？

（我知道在 VB.net 中很容易在启动新进程时触发正在运行的进程中的事件，如果在项目属性中启用了“单个实例”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:37:26.837

您可以使用命名的[EventWaitHandle](http://msdn.microsoft.com/en-us/library/41acw8ct.aspx)来实现跨进程同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:40:08.037

[这篇文章](http://www.codeproject.com/Articles/32908/C-Single-Instance-App-With-the-Ability-To-Restore)似乎做了你习惯的事情`vb.net single instance`（而且它似乎仍然是一个可行的选择）。

简而言之，似乎有三种方法可以完成类似单实例的解决方案：

*   使用[互斥体](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)
*   循环浏览进程列表，查看是否有同名进程正在运行
*   将 Visual Basic 系统用于单实例应用程序（可以从 C# 访问）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:45:55.233

如果“进程”是指“应用程序域”，那么在两者之间设置事件是相当容易的。事实上，如果你在两个独立的应用程序域中有两个类（每个类都有 MarshalByRefObject 作为基类），那么 .net 将自动设置一个远程处理结构，使事件看起来像在单个应用程序中一样 -领域。（这里的例子：http: [//msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)）

不过这里的关键是“出现”。“应用程序域”和“进程”分离旨在有意保持资源隔离。要访问您的进程之外的任何内容，您确实需要操作系统的帮助，例如共享文件或 Internet 连接或命名管道 - 类似的东西。但是像事件这样的 .net 概念在运行时中不存在于您的空间之外。

换句话说，如果两个进程都在同一台机器上，您必须使用类似 Named-Pipes ( [http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.aspx](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.aspx) ) 的东西, TCPClient/TCPListener ( [http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx) ) 如果跨多个系统进行通信，或者 WCF 如果您需要更重的任务。

如果您想在实践中看到其中一种技术的具体示例，我可以为您写一个，顺便说一句。

# jquery - div 数据中的 Jquery 图像或 url-

> ID：15452404
> 
> 赞同：2
> 
> 时间：2013-03-16T17:33:30.110
> 
> 标签：jquery, html

是否可以将“数据描述”更改为喜欢 div 类？但仍然使脚本工作，因为我想在数据描述中放置一个 url 和图像

请帮我

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#MenuBar1 div").mouseover(function() {
            $('.description').text($(this).data('description'));
        }).mouseout(function() {
            $("#back").attr("src", $("#back").data("original"));
        });
    });
</script>

<div id="MenuBar1" class="MenuBarHorizontal">
    <div data-description="Beschrijving 1">
    <a href="#">Titel 1</a>
    </div>

    <div data-description="Beschrijving 2">
    <a href="#">Titel 2</a>
    </div>

    <div data-description="Beschrijving 3">
    <a href="#">Titel 3</a>
    </div>
</div>

<div class="description">
Text change.
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:35:19.813

尝试这个

```
 $('#elementID').data('description','urlyou want'); 
```

# python - 使用 matplotlib 更新散点图中的标记样式

> ID：15452405
> 
> 赞同：6
> 
> 时间：2013-03-16T17:33:31.547
> 
> 标签：python, matplotlib

我正在开发一个交互式绘图应用程序，它要求用户从 matplotlib 散点图中选择数据点。为清楚起见，我希望能够在单击（或以任何方式选择）时更改绘图点的颜色和形状。

由于`matplotlib.collections.PathCollection`该类有一个`set_facecolors`方法，因此更改点的颜色相对简单。但是，我看不到更新标记形状的类似方法。

有没有办法做到这一点？

问题的简单说明：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.random.normal(0,1.0,100)
y = np.random.normal(0,1.0,100)

scatter_plot = plt.scatter(x, y, facecolor="b", marker="o")

#update the colour 
new_facecolors = ["r","g"]*50
scatter_plot.set_facecolors(new_facecolors)

#update the marker? 
#new_marker = ["o","s"]*50
#scatter_plot.???(new_marker)  #<--how do I access the marker shapes?  

plt.show() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:34:20.550

如果您真正想要的是突出显示用户选择的点，那么您可以`dot = ax.scatter(...)`在所选点的顶部叠加另一个点（带有 ）。稍后，为了响应用户点击，您可以使用`dot.set_offsets((x, y))`来更改点的位置。

Joe Kington 编写了一个[很好的示例 ( `DataCursor`)](https://stackoverflow.com/a/4674445/190597)，说明如何在用户单击艺术家时添加显示数据坐标的注释（例如散点图）。

这是一个派生示例 ( `FollowDotCursor`)，当用户将鼠标悬停在某个点上时，它会突出显示和注释数据点。

显示的`DataCursor`数据坐标是用户单击的位置 - 这可能与基础数据的坐标不完全相同。

显示的`FollowDotCursor`数据坐标始终是基础数据中离鼠标最近的一个点。

* * *

```
import numpy as np
import matplotlib.pyplot as plt
import scipy.spatial as spatial

def fmt(x, y):
    return 'x: {x:0.2f}\ny: {y:0.2f}'.format(x=x, y=y)

class FollowDotCursor(object):
    """Display the x,y location of the nearest data point.
    """
    def __init__(self, ax, x, y, tolerance=5, formatter=fmt, offsets=(-20, 20)):
        try:
            x = np.asarray(x, dtype='float')
        except (TypeError, ValueError):
            x = np.asarray(mdates.date2num(x), dtype='float')
        y = np.asarray(y, dtype='float')
        self._points = np.column_stack((x, y))
        self.offsets = offsets
        self.scale = x.ptp()
        self.scale = y.ptp() / self.scale if self.scale else 1
        self.tree = spatial.cKDTree(self.scaled(self._points))
        self.formatter = formatter
        self.tolerance = tolerance
        self.ax = ax
        self.fig = ax.figure
        self.ax.xaxis.set_label_position('top')
        self.dot = ax.scatter(
            [x.min()], [y.min()], s=130, color='green', alpha=0.7)
        self.annotation = self.setup_annotation()
        plt.connect('motion_notify_event', self)

    def scaled(self, points):
        points = np.asarray(points)
        return points * (self.scale, 1)

    def __call__(self, event):
        ax = self.ax
        # event.inaxes is always the current axis. If you use twinx, ax could be
        # a different axis.
        if event.inaxes == ax:
            x, y = event.xdata, event.ydata
        elif event.inaxes is None:
            return
        else:
            inv = ax.transData.inverted()
            x, y = inv.transform([(event.x, event.y)]).ravel()
        annotation = self.annotation
        x, y = self.snap(x, y)
        annotation.xy = x, y
        annotation.set_text(self.formatter(x, y))
        self.dot.set_offsets((x, y))
        bbox = ax.viewLim
        event.canvas.draw()

    def setup_annotation(self):
        """Draw and hide the annotation box."""
        annotation = self.ax.annotate(
            '', xy=(0, 0), ha = 'right',
            xytext = self.offsets, textcoords = 'offset points', va = 'bottom',
            bbox = dict(
                boxstyle='round,pad=0.5', fc='yellow', alpha=0.75),
            arrowprops = dict(
                arrowstyle='->', connectionstyle='arc3,rad=0'))
        return annotation

    def snap(self, x, y):
        """Return the value in self.tree closest to x, y."""
        dist, idx = self.tree.query(self.scaled((x, y)), k=1, p=1)
        try:
            return self._points[idx]
        except IndexError:
            # IndexError: index out of bounds
            return self._points[0]

x = np.random.normal(0,1.0,100)
y = np.random.normal(0,1.0,100)
fig, ax = plt.subplots()

cursor = FollowDotCursor(ax, x, y, formatter=fmt, tolerance=20)
scatter_plot = plt.scatter(x, y, facecolor="b", marker="o")

#update the colour 
new_facecolors = ["r","g"]*50
scatter_plot.set_facecolors(new_facecolors)    

plt.show() 
```

![在此处输入图像描述](../Images/c986e51e4ef7889bb2010b4a92dca23b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T19:30:52.523

很确定没有办法做到这一点。`scatter`已将您的数据转换为路径集合，并且不再具有执行此操作所需的元数据（即，它对绘制形状的语义一无所知，它只有一个要绘制的形状列表） .

您还可以使用`set_array`（作为`PathCollection`的子类`ScalerMappable`）更新颜色。

如果您想这样做（并且点数相当少），您可以手动管理路径。

另一个（更简单的）选项是使用两个（或几个，一个用于您想要的每个形状/颜色组合）`Line2D`对象（因为在此示例中您没有缩放标记的大小） `linestyle='none'`。对象上的选择器事件`Line2D`将返回您最近的点。

对不起，这是兰姆利。

# flashdevelop - FlashDevelop 是否具有在我调试时更改值的功能？

> ID：15452407
> 
> 赞同：0
> 
> 时间：2013-03-16T17:33:52.217
> 
> 标签：flashdevelop

FlashDevelop 是否具有在我调试时更改值的功能？如果是这样，我如何更改值？

为了更详细地解释上述功能，我希望您在 VisualStudio 中查看相同功能的示例。请查看站点中的第 4 章“4.修改任何变量”： [http ://www.cprogramming.com/tutorial/visual_studio_tips.html](http://www.cprogramming.com/tutorial/visual_studio_tips.html)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:06:01.420

您可以使用即时面板，它就像操作脚本代码的控制台

设置断点并使用以下语法：

```
p variable="value" 
```

# php - 使用 php 将图像存储到 mysql DB 中并显示

> ID：15452412
> 
> 赞同：0
> 
> 时间：2013-03-16T17:34:22.040
> 
> 标签：php, mysql, image, jpeg

从我的 mysql 数据库中显示图像时遇到大问题

我将它存储在 longblob 类型中

显示图像时，我得到一个损坏的图像图标

这是存储图像的代码

```
if(isset($_FILES['image']) && $_FILES['image']['size'] > 0 && isset($_POST['photoName']))
{
    //temporary file name
    // Temporary file name stored on the server
    $tmpName = $_FILES['image']['tmp_name'];
    $imageType = $_FILES['image']['type'];

    // Read the file
    $fp = fopen($tmpName, 'r');
    $data = fread($fp, filesize($tmpName));
    $data = addslashes($data);
    fclose($fp);

    $sql="INSERT INTO photos (photoName, caption, photoData, photoType, userName)
        VALUES
        ('$_POST[photoName]','$_POST[caption]','$tmpName','$imageType', '$currentUser')";

    //For debugging purposes
    if(!mysqli_query($con,$sql))
    {
        die('Error: ' . mysqli_error($con));
    }
    else
    {
        echo "Your Image has been Added";
    }   
} 
```

然后打印图像

```
if(isset($_POST['usersImage'])){
        //code to show images
        $user = $_POST['usersImage'];
        $sql = "SELECT * FROM `photos` WHERE userName = '$user'";
        $result = mysqli_query($con,$sql);
        while($row = mysqli_fetch_array($result)) 
        {
            switch ($row['photoType']) {
                case 'image/jpeg':

                echo "<tr>";  
                echo '<img src="data:image/jpeg;base64,'. base64_encode($row['photoData'])."\"></td>";   
                echo "</tr>"; 
                    //echo '<img src="image>' .$row['photoData']. '.jpeg'.'</p>';
                    //echo '<p id="caption">'.$row['caption'].' </p>';
                break;
            }           
        }
    } 
```

如您所见，我最近的尝试是使用 base64 编码来打印图像我之前的尝试是注释掉的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:41:35.317

当您显示图像时，它必须来自它自己的请求。`src=""`应该包含一个脚本的 URL，该脚本将使用正确的 MIME 标头传递内容`image/jpeg`。

```
<?php
    $photo_bin = //binary data from query here;

    header("Content-Type: image/jpeg"); // or whatever the correct content type is.
    echo $photo_bin; 
```

浏览器可以从`img`标签请求的 php 脚本的快速示例^。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:44:28.680

验证很重要。您正在向如此多的安全问题敞开心扉。

切勿在 sql 语句中使用 $_POST / $_GET。逃避它们，更好的是，使用 PDO 语句。验证图像实际上是图像，此时，您可以在表中输入任何类型的文件。

正如您所发现的，将图像存储在数据库中也比在文件系统中要困难得多。通常，将图像存储在文件系统中的参数比在表中要多得多。

快速查看您的插入代码，我不太确定您为什么要在二进制数据中添加斜杠。删除对addlahes的调用，然后尝试。

# algorithm - 与其他数据结构合并排序？

> ID：15452419
> 
> 赞同：2
> 
> 时间：2013-03-16T17:35:03.410
> 
> 标签：algorithm, sorting

鉴于其随机访问的优势，似乎在许多教科书中自上而下的合并排序是使用数组完成的。

我想知道是否有办法与其他数据结构进行合并排序？假设数据存储在队列或堆栈中，是否可以在队列/堆栈上与最多另一个辅助队列/堆栈进行合并排序？

我主要担心的是，由于没有随机访问，在这种情况下合并排序仍然能够达到 O(n logn) 效率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:45:40.127

使用带有归并排序的数组的另一个优点是，如果您编写巧妙（但难以理解）的算法，您可以在递归调用级别之间切换“临时”数组和“真实”数组。在任何有价值的合并排序实现中，只会分配一次“临时”数组，但使用切换技术，您最多只需移动一次结果。

对于堆栈和队列，您可能会使用数组作为底层数据结构。您可以使用链表，但是`push()`和`pop()`或`enqueue()`和中的常数因子`dequeue()`会变大，因为您还必须为您的项目分配内存。显然，正如**@LearnedfromMistake**所示，使用堆栈和队列是可能的，但鉴于数组很可能被用作底层数据结构，尚不清楚这种方法的优势是什么。

# drupal-7 - 如果结果集中嵌入视图或块，则搜索结果和分页错误

> ID：15452423
> 
> 赞同：0
> 
> 时间：2013-03-16T17:35:13.557
> 
> 标签：drupal-7, pagination, drupal-search

我有两种嵌入视图或块的内容类型（在 Drupal 7.20 环境中）。当我在搜索结果中允许这些内容类型时，只要这些内容类型出现在结果集中，结果页面就会横向显示：寻呼机从一个结果页面显示到下一个结果页面的总页面数不同，或者在我点击 Next 后完全消失（！），每页显示少于 10 个结果（但有一个寻呼机......），等等，等等。

如果我不允许这些内容类型（通过自定义搜索），我看不到分页等任何问题。

我注意到的是，实际的视图/块是在构建搜索结果页面时执行的——这不仅仅是在 search_index 表中找到命中的问题。

有人知道如何解决这个问题吗？

（我已经搜索了 stackoverflow，以及 Drupal.org 上的搜索和自定义搜索问题 - 不高兴。）

提前谢谢，李

[编辑：修复了几个错别字...] [3/17/13 编辑：问题原来是由于搜索结果集中包含的视图或块的寻呼机。如果视图在结果集中，但没有分页器，则没有问题。因此，我的解决方案是检测我在 hook_views_query_alter() 中的搜索结果页面上（通过查看请求 URI）并设置

```
$view->items_per_page = 0; 
```

这有效地摆脱了视图的寻呼机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:37:11.527

[我没有意识到我可以回答我的问题 - 不知道这与编辑问题以包含答案有什么不同，但无论如何我也会把我的答案放在这里。]

问题原来是由于搜索结果集中包含的视图或块的寻呼机。如果视图在结果集中，但没有分页器，则没有问题。因此，我的解决方案是检测我在 hook_views_query_alter() 中的搜索结果页面上（通过查看请求 URI）并设置

```
$view->items_per_page = 0; 
```

这有效地摆脱了视图的寻呼机。

# ruby - ORM for Ruby 能够从现有数据库生成模型/迁移脚本

> ID：15452425
> 
> 赞同：1
> 
> 时间：2013-03-16T17:35:23.493
> 
> 标签：ruby, orm, sinatra

Ruby 的 ORM 是否能够从现有数据库生成模型/迁移脚本？

我会将它与 sinatra 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:32:06.337

您可以使用[Sequel 的迁移](http://sequel.rubyforge.org/rdoc/files/doc/migration_rdoc.html)来转储现有架构（请参阅链接页面下方的“将当前架构转储为迁移”）。

另外，我知道如果您使用的是 Postgresql 或 MS SQL Server，您可以将数据库转储到脚本中，既可以作为模式也可以作为数据。如果您要使用的 ORM 没有迁移工具（或者即使有），您可以使用这些脚本，甚至将它们嵌入到迁移中（[Sequel 也将接受标准 SQL 字符串](http://sequel.rubyforge.org/rdoc/files/doc/sql_rdoc.html)，其他 ORM 可能也可以）。

* * *

编辑：生成模型。

如果你想生成模型，那么 Sequel 有一个[反射 API](http://sequel.rubyforge.org/rdoc/files/doc/reflection_rdoc.html)。这样的事情可以让你开始：

```
generator = ->(table) {
  s = <<STR
require 'sequel'
class #{table} < Sequel::Model
  # other stuff here
end
STR
}

DB.tables.reject{|name| name == :schema_info }
         .each do |table|
           File.new "app/models/#{table}.rb" do |f|
             f.write generator.call(table)
           end
         end 
```

进行关联会更难，但我认为可能。看看[Database#foreign_key_list](http://sequel.rubyforge.org/rdoc/classes/Sequel/Database.html#method-i-foreign_key_list)和[Model association basics](http://sequel.rubyforge.org/rdoc/files/doc/association_basics_rdoc.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:35:25.483

它不是 ORM，但是有一个非常古老的 gem，叫做 magic_models 可以做到这一点，不确定它是否仍然有效：[http ://magicmodels.rubyforge.org/](http://magicmodels.rubyforge.org/)

# django - 骨干集合

> ID：15452426
> 
> 赞同：1
> 
> 时间：2013-03-16T17:35:31.577
> 
> 标签：django, backbone.js

我试图在其后端使用 Django 创建一个主干应用程序。我正在关注一个主干教程。我使用了以下代码：

**代码**

```
<!doctype html>
<html lang = "en">
    <meta charset = "utf-8">
    <title>IstreetApp</title>
    <link rel="stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Book Manager</h1>
        <hr />
        <div class="page"></div>
    </div>

    <script type = "text/template" id = "booklist.template">

    </script>

    <script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone-min.js"></script>
    <script>

        $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
            options.url = 'http://backbonejs-beginner.herokuapp.com' + options.url;
        });

        var Books = Backbone.Collection.extend({
            url: '/books'
        });

        var BookList = Backbone.View.extend({
            el: '.page',
            render: function () {
                var that = this;
                var books = new Books();
                books.fetch({
                    success: function(books) {
                        var template = _.template($('#booklist.template').html(), {books: books.models});
                        that.$el.html(template);
                    }
                })
            }
        });

        var Router = Backbone.Router.extend({
            routes: {
                '': 'home'
            }
        })

        var bookList = new BookList();

        var router = new Router();
        router.on('route:home', function () {
            bookList.render();
        });

        Backbone.history.start();
    </script>

</body>
</html> 
```

由于未定义集合，因此不会执行成功代码。我想收集数据应该通过 Django 来自服务器，但我不确定如何以及以什么形式。请帮忙。我对骨干网和 Django 非常陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:15:25.600

当您对集合调用 fetch 时，它会发出 AJAX 请求以：

```
 http://backbonejs-beginner.herokuapp.com/books 
```

但是，那里没有设置 API。需要发生以下两件事之一：

1）您需要修改代码以指向不同的 URL，该 URL 确实具有现有的 API（也许您使用的任何教程都有这样的 API）

2）您需要自己在 yoursever.com 上创建这样的 API（然后让您的 Backbone 代码指向该 API 的 URL）

如果没有服务器支持，Backbone 中的诸如此类的操作`save`根本`fetch`无法运行。

附带说明一下，Django 是一个*网站*框架。虽然您可以使用它来创建服务器端*API*，但这并不是 Django 真正关注的重点。正因为如此，有几个优秀的第三方库可用于在 Django 中执行 RESTful API（即 Backbone 喜欢的那种）；我个人推荐 Django REST Framework（我使用它并且效果很好）或 TastyPie（从未使用过，但它非常受欢迎）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T17:09:27.243

使用骨干集合时，您需要从您的 api url ( [http://backbonejs-beginner.herokuapp.com/books](http://backbonejs-beginner.herokuapp.com/books) ) 示例中返回一个 json 对象数组

```
{[{"name":"bookname", "publisher": "penguin"}, {"name":"bookname", "publisher":"penguin"}]} 
```

您还需要一个模型用于您的收藏。一个模型看起来像这个例子：

```
var Book = Backbone.Model.extend({
defaults: {
"name":  "",
"publisher": ""
}
}); 
```

集合的工作方式是解析 json 数组并将数组中的每个对象转换为您指定的模型（此时是一本书，其中包含名称和出版商的值）。

当您在模型上创建 .fetch() 时，您正在发出 GET 请求，因此请确保您的[http://backbonejs-beginner.herokuapp.com/books](http://backbonejs-beginner.herokuapp.com/books)网址已准备好接收 GET 请求并使用 json 数据进行响应我在顶部指定的格式。

# java - java Arrays.sort 二维数组

> ID：15452429
> 
> 赞同：87
> 
> 时间：2013-03-16T17:35:39.843
> 
> 标签：java, arrays, sorting, matrix

我希望根据 [][0] 的值对以下数组进行排序

```
double[][] myArr = new double[mySize][2]; 
```

例如，myArr 内容是：

```
1      5
13     1.55
12     100.6
12.1   .85 
```

我希望它达到：

```
1      5
12     100.6
12.1   .85
13     1.55 
```

我希望在不必实现自己的排序的情况下做到这一点。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-16T17:38:46.130

使用 Overloaded [**Arrays#Sort(T[] a, Comparator c)**](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)，它将 Comparator 作为第二个参数。

```
double[][] array= {
{1, 5},
{13, 1.55},
{12, 100.6},
{12.1, .85} };

java.util.Arrays.sort(array, new java.util.Comparator<double[]>() {
    public int compare(double[] a, double[] b) {
        return Double.compare(a[0], b[0]);
    }
}); 
```

***JAVA-8：***我们可以使用 lambda 函数来代替那个大比较器，如下所示

```
Arrays.sort(array, Comparator.comparingDouble(o -> o[0])); 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2016-10-09T22:32:57.053

欢迎使用 Java 8：

```
Arrays.sort(myArr, (a, b) -> Double.compare(a[0], b[0])); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2019-09-17T13:11:43.593

最简单的方法：

```
Arrays.sort(myArr, (a, b) -> a[0] - b[0]); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-16T17:42:47.263

你需要`Comparator<Double[]>`像这样实现：

```
public static void main(String[] args) throws IOException {
    final Double[][] doubles = new Double[][]{{5.0, 4.0}, {1.0, 1.0}, {4.0, 6.0}};
    final Comparator<Double[]> arrayComparator = new Comparator<Double[]>() {
        @Override
        public int compare(Double[] o1, Double[] o2) {
            return o1[0].compareTo(o2[0]);
        }
    };
    Arrays.sort(doubles, arrayComparator);
    for (final Double[] arr : doubles) {
        System.out.println(Arrays.toString(arr));
    }
} 
```

输出：

```
[1.0, 1.0]
[4.0, 6.0]
[5.0, 4.0] 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-23T11:32:04.723

虽然这是一个旧线程，但这里有两个用于解决 Java8 问题的示例。

按第一列 ([][0]) 排序：

```
double[][] myArr = new double[mySize][2];
// ...
java.util.Arrays.sort(myArr, java.util.Comparator.comparingDouble(a -> a[0])); 
```

按前两列排序 ([][0], [][1])：

```
double[][] myArr = new double[mySize][2];
// ...
java.util.Arrays.sort(myArr, java.util.Comparator.<double[]>comparingDouble(a -> a[0]).thenComparingDouble(a -> a[1])); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-05-01T05:46:31.103

您可以使用的二维整数数组的递减/递增顺序：

```
Arrays.sort(contests, (a, b) -> Integer.compare(b[0],a[0])); //decreasing order

Arrays.sort(contests, (a, b) -> Integer.compare(a[0],b[0]); //increasing order 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-08-29T17:13:30.553

**简化的 Java 8**

IntelliJ 建议简化以下问题的最佳答案：

```
Arrays.sort(queries, Comparator.comparingDouble(a -> a[0])); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-01-22T08:17:04.430

要按降序排序，您可以翻转两个参数

```
int[][] array= {
    {1, 5},
    {13, 1},
    {12, 100},
    {12, 85} 
};
Arrays.sort(array, (b, a) -> Integer.compare(a[0], b[0])); 
```

输出：

```
13, 5
12, 100
12, 85
1, 5 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-02-01T16:08:20.573

这真的很简单，你只需要记住一些语法。

Arrays.sort(contests, (a, b) -> Integer.compare(a[0],b[0]));//升序---1

Arrays.sort(contests, (b, a) -> Integer.compare(b[0],a[0]));//升序---2

Arrays.sort(contests, (a, b) -> Integer.compare(b[0],a[0]));//降序---3

Arrays.sort(contests, (b, a) -> Integer.compare(a[0],b[0]));//降序---4

如果您仔细观察，那么影响结果的是“a”和“b”顺序的变化。对于第 1 行，集合是 (a,b) 和 Integer.compare(a[0],b[0])，因此它是递增顺序。现在，如果我们改变其中任何一个中 a 和 b 的顺序，假设 (a,b) 和 Integer.compare(b[0],a[0]) 的集合如第 3 行，我们得到降序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-22T00:07:42.327

更简单的代码：

导入 java.util.Arrays；int[][] 数组 = 新的 int[][];

Arrays.sort(array, (a, b) -> a[1] - b[1]);

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-14T11:58:18.050

```
import java.util.*;

public class Arrays2
{
    public static void main(String[] args)
    {
        int small, row = 0, col = 0, z;
        int[][] array = new int[5][5];

        Random rand = new Random();
        for(int i = 0; i < array.length; i++)
        {
            for(int j = 0; j < array[i].length; j++)
            {
                array[i][j] = rand.nextInt(100);
                System.out.print(array[i][j] + " ");
            }
            System.out.println();
        }

        System.out.println("\n");

        for(int k = 0; k < array.length; k++)
        {
            for(int p = 0; p < array[k].length; p++)
            {
                small = array[k][p];
                for(int i = k; i < array.length; i++)
                {
                    if(i == k)
                        z = p + 1;
                    else
                        z = 0;
                    for(;z < array[i].length; z++)
                    {
                        if(array[i][z] <= small)
                        {
                            small = array[i][z];
                            row = i;
                            col = z;
                        }
                    }
                }
            array[row][col] = array[k][p];
            array[k][p] = small;
            System.out.print(array[k][p] + " ");
            }
            System.out.println();
        }
    }
} 
```

祝你好运

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-11T12:14:58.493

Java 8 现在非常普遍。

```
Arrays.sort(myArr,(double[] a,double[] b)->{
                //here multiple lines of code can be placed
                return a[0]-b[0]; 
            }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-17T18:07:58.487

你可以使用自己的排序，很简单。

```
int[][] matrix = {
            {2, 1, 3},
            {5, 4, 6},
            {8, 7, 9}
        };

for (int k = 0; k < length; k++) {
        for (int i= 0; i < matrix[k].length; i++) {
            for (int j = 0; j < matrix[k].length; j++) {
                if (matrix[k][i] < matrix[k][j]) {
                    int temp = matrix[k][i];
                    matrix[k][i] = matrix[k][j];
                    matrix[k][j] = temp;
                }
            }
        }
    }

System.out.println(Arrays.deepToString(matrix)); 
```

## 输出

```
[[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-03-16T19:10:11.140

对于一般解决方案，您可以使用[Column Comparator](http://tips4java.wordpress.com/2008/10/16/column-comparator/)。使用该类的代码是：

```
Arrays.sort(myArr, new ColumnComparator(0)); 
```

# c# - C#.Net 中的连接字符串

> ID：15452432
> 
> 赞同：3
> 
> 时间：2013-03-16T17:35:51.467
> 
> 标签：c#, .net, sql-server, connection-string

// *SQL部分*

**第 1 行**：`string dd = "Data Source=.\SQLEXPRESS;AttachDbFilename="C:\Users\HEX\Documents\Visual Studio 2008\Projects\cventry_address_book_0.1\cventry_address_book_0.1\addressbook.mdf";Integrated Security=True;Connect Timeout=30;User Instance=True";`

**第 2 行**：`SqlConnection sqlconobj = new SqlConnection(dd);`

**第 3 行**：`sqlconobj.Open();`

---------**错误输出**------------

> 意外字符'\'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:37:56.417

在 C# 中，反斜杠字符具有特殊含义。
您需要将其加倍或在整个字符串前面加上逐字字符 @
并且无需在文件名前后加上双引号。
格式化规则（结束分号）允许 AttachDbFileName 的路径或文件名中有空格

```
 string dd = @"Data Source=.\SQLEXPRESS;AttachDbFilename=" + 
             @"C:\Users\HEX\Documents\Visual Studio 2008\" + 
             @"Projects\cventry_address_book_0.1\cventry_address_book_0.1" + 
             @"\addressbook.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:37:33.737

尝试：

```
string dd = @"Data Source=.\SQLEXPRESS;AttachDbFilename=""C:\Users\HEX\Documents\Visual Studio008\Projects\cventry_address_book_0.1\cventry_address_book_0.1\addressbook.mdf"";Integrated Security=True;Connect Timeout=30;User Instance=True"; 
```

您需要使用`@`字符转义字符串。或者，您可以将 single 替换`\`为`\\`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:37:18.780

您应该通过在字符串前面加上字符来转义字符串`@`。此外，您应该将 SqlConnection 实例包装在 using 语句中：

```
string dd = @"Data Source=.\SQLEXPRESS;AttachDbFilename=""C:\Users\HEX\Documents\Visual Studio 2008\Projects\cventry_address_book_0.1\cventry_address_book_0.1\addressbook.mdf"";Integrated Security=True;Connect Timeout=30;User Instance=True";
using (SqlConnection sqlconobj = new SqlConnection(dd))
{
    sqlconobj.Open();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T17:37:34.320

你需要转义这个`\`角色。用这个：

```
string dd = @"Data Source=.\SQLEXPRESS;AttachDbFilename="C:\Users\HEX\Documents\Visual Studio 2008\Projects\cventry_address_book_0.1\cventry_address_book_0.1\addressbook.mdf";Integrated Security=True;Connect Timeout=30;User Instance=True"; 
```

更多：[字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T17:42:08.610

```
string dd = "Data Source=.\\SQLEXPRESS;AttachDbFilename=\"C:\\Users\\HEX\\Documents\\Visual Studio 2008\\Projects\\cventry_address_book_0.1\\cventry_address_book_0.1\\addressbook.mdf\";Integrated Security=True;Connect Timeout=30;User Instance=True"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T17:46:03.617

这应该是您的查询连接字符串

```
string dd = @"Data Source=.\SQLEXPRESS;AttachDbFilename=" + 
                            @"C:\Users\HEX\Documents\Visual Studio 2008\Projects\cventry_address_book_0.1\cventry_address_book_0.1\addressbook.mdf" 
                            + ";Integrated Security=True;Connect Timeout=30;User Instance=True"; 
```

# php - 同步 MySQL 和 PHP 时间

> ID：15452434
> 
> 赞同：3
> 
> 时间：2013-03-16T17:36:00.353
> 
> 标签：php, mysql, sql, timezone

我正在尝试同步我的 PHP 和 MySQL 时间。目前时间不同（以下输出）：

```
'SELECT CURRENT_TIMESTAMP' returns '2013-03-16 13:14:28'
'date('Y-m-d g:i:s')'      returns '2013-03-16 10:14:28' 
```

从其他用户那里阅读，我已经成功地使用`SET time_zone='-7:00';`. 问题是时间会根据用户的位置改变不同的查询，我宁愿不改变`time_zone`每个查询的时间。

我应该只设置`time_zone`一次，使其与服务器时间相同，然后根据用户在 PHP 中的时区更改时间吗？还是有更好的方法来解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:45:22.540

> 我是否应该只设置一次 time_zone，使其与服务器时间相同，然后根据用户在 PHP 中的时区更改时间？还是有更好的方法来解决这个问题？

是的。由于夏令时，您也不应该通过其 GMT 区域设置时区。您可以通过设置 date_default_timezone_set('UTC'); 编写自己的函数来执行此转换；然后到您用户的时区。

```
$time = strtotime('2013-03-16 13:14:28'.' UTC');
echo date('Y-m-d g:i:s',$time); //2013-03-16 9:14:28 
```

另一种选择是将mysql时间存储在“Unix Time”中，然后只用PHP转换一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:45:06.273

您肯定想在应用程序/数据库中使用单个时区。如果您在向用户显示时必须喜欢，仅更改数据的时区（不在数据库或您的 php 默认 tz 中） - 然后仅在您即将显示它之前执行此操作。否则，请使用单个时区。我更喜欢格林威治标准时间

设置 mysql 服务器时区：在 my.conf 中有这样的东西： `default-time-zone='GMT'` 然后重新启动 mysql 参见：[http ://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

对于 php，您应该在每个页面顶部的某处执行此行：

```
date_default_timezone_set("GMT"); 
```

# c# - 程序吐出错误的答案 - Project Euler

> ID：15452435
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:36:05.377
> 
> 标签：c#, math, console

我一直在研究 Project Euler（问题 #8）。

> 找出 1000 位数字中连续五位数字的最大乘积。
> 
> 73167176531330624919225119674426574742355349194934 96983520312774506326239578318016984801869478851843 85861560789112949495459501737958331952853208805511 12540698747158523863050715693290963295227443043557 66896648950445244523161731856403098711121722383113 62229893423380308135336276614282806444486645238749 30358907296290491560440772390713810515859307960866 70172427121883998797908792274921901699720888093776 65727333001053367881220235421809751254540594752243 52584907711670556013604839586446706324415722155397 53697817977846174064955149290862569321978468622482 83972241375657056057490261407972968652414535100474 82166370484403199890008895243450658541227588666881 16427171479924442928230863465674813919123162824586 17866458359124566529476545682848912883142607690042 2421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188 84580156166097919133875499200524063689912560717606 05886116467109405077541002256983155200055935729725 71636269561882670428252483600823257530420752963450

我写了一个相对简单的程序来查找任何连续的数字。程序循环遍历包含每个数字作为元素的字符数组中的每个数字。在 for 循环中，我比较了当前位置后面的以下四个数字，看它是一个连续的数字。据我了解，数字 8527 符合标准，因为 7 在数字 8 之前。

```
static void Main(string[] args)
    {
        string number = "731671...52963450";

        char[] numCharArray = number.ToCharArray();

        for (int i = 0; i < numCharArray.Length - 5; i++)
        {
            string n1Str = numCharArray[i + 1].ToString();
            string n2Str = numCharArray[i + 2].ToString();
            string n3Str = numCharArray[i + 3].ToString();
            string n4Str = numCharArray[i + 4].ToString();
            string iStr = numCharArray[i].ToString();

            int n1 = Convert.ToInt32(n1Str);
            int n2 = Convert.ToInt32(n2Str);
            int n3 = Convert.ToInt32(n3Str);
            int n4 = Convert.ToInt32(n4Str);
            int iNum = Convert.ToInt32(iStr);

            int prod = iNum * n1 * n2 * n3 * n4 ;

            //I believe this is the source of the problem
            if (iNum == n1 + 1 || iNum == n2 + 1 || iNum == n3 + 1 || iNum == n4 + 1 || iNum == n1 - 1 || iNum == n2 - 1 || iNum == n3 - 1 || iNum == n4 - 1)
            {
                Console.WriteLine(prod);
            }

        } 
```

无论如何，*请不要为我写一个新的方法。*我只想知道为什么我没有得到正确的答案。

顺便说一句，该程序有一个`IndexOutOfRangeException`，它会给你所有的“答案”，但是一旦我实现了程序正常工作的逻辑，我就会解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:39:34.007

您的 for 循环到达数组的最终索引，但是您在最后一个索引之后索引四个元素。这就是您的 IndexOutOfRangeException 的原因。请尝试以下操作，

```
 for (int i = 0; i < numCharArray.Length - 5; i++) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T17:43:50.733

我不明白你想用这段代码做什么，但如果这会吐出正确的答案，我真的会感到惊讶。

```
if (iNum == n1 + 1 || iNum == n2 + 1 || iNum == n3 + 1 || iNum == n4 + 1 || iNum == n1 - 1 || iNum == n2 - 1 || iNum == n3 - 1 || iNum == n4 - 1)
{
    Console.WriteLine(prod);
} 
```

我希望你不会认为这是一种新方法，但这是我的建议。

```
static void Main(string[] args)
{
    string number = "731671...52963450";

    char[] numCharArray = number.ToCharArray();
    int maxProduct = 0; // initial value

    for (int i = 0; i < numCharArray.Length - 5 /* Fix IndexOutOfRange (see Matthew Fahrbach's answer) */; i++)
    {
        // ...

        int prod = iNum * n1 * n2 * n3 * n4;
        if (prod > maxProd)
        {
            maxProd = prod;
        }
    }

    Console.WriteLine(maxProd);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:32:33.740

解决了这个问题后，您似乎误解了“连续数字”在这种情况下的含义。我记得这里的连续意思是“连续”。所以考虑每组 5 位数字，73167，然后是 31671，等等。应该有大约 996 组这样的 5 位数字。在所有这些集合中找到这些数字的最大乘积。

# postgresql - 在 postgres heroku 数据库上查找服务器 IP

> ID：15452443
> 
> 赞同：0
> 
> 时间：2013-03-16T17:36:50.720
> 
> 标签：postgresql, heroku, coldfusion

我有一个 Heroku Postgres 数据库。有三个插槽可以连接到 Heroku 服务器：

*   服务器 ： ？
*   用户名：（我有）
*   密码：（我有）

如何找到连接到 Heroku DB 的服务器 IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:03:22.580

从 a 的输出中，`heroku config`您将看到 的条目`DATABASE_URL`，它采用以下形式：

```
postgres://username:password@host:port/database_name 
```

`@`在您的情况下，您将需要符号后面的主机中的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T21:34:13.613

您不应使用 IP 地址进行连接，而应使用主机名。主机名在连接字符串中。Heroku 开发中心有更多详细信息：[https ://devcenter.heroku.com/articles/heroku-postgresql#external-connections-ingress](https://devcenter.heroku.com/articles/heroku-postgresql#external-connections-ingress)

如果您确实需要 IP 地址，可以使用以下命令将主机名解析为地址`nslookup`：

```
nslookup foo-domain.com 
```

# c++ - 是否保证 sizeof(std::atomic ) == sizeof(整数类型)?

> ID：15452447
> 
> 赞同：12
> 
> 时间：2013-03-16T17:37:17.067
> 
> 标签：c++, c++11, atomic

换句话说，是否`std::atomic<int>`保证只保存一个`int`值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T17:38:53.763

**不。**

根据 C++11 标准的第 29.5/9 段：

> [注意：原子特化的表示不需要与其对应的参数类型具有相同的大小。专业化应尽可能具有相同的大小，因为这减少了移植现有代码所需的工作量。——尾注]

# c# - 为什么当我使用 JSON.NET 反序列化时会忽略我的默认值？

> ID：15452450
> 
> 赞同：19
> 
> 时间：2013-03-16T17:37:27.710
> 
> 标签：c#, serialization, json.net, deserialization, default-value

我使用 JSON.NET 作为我的主要序列化程序。

这是我的模型，看我设置了一些`JSONProperties`和一个`DefaultValue`.

```
public class AssignmentContentItem
{
    [JsonProperty("Id")]
    public string Id { get; set; }
    [JsonProperty("Qty")]
    [DefaultValue(1)]
    public int Quantity { get; set; }
} 
```

当我序列化 a`List<AssignmentContentItem>`时，它做得很好：

```
private static JsonSerializerSettings s = new JsonSerializerSettings
{
    DefaultValueHandling = DefaultValueHandling.Ignore,
    NullValueHandling = NullValueHandling.Ignore
}; 
```

输出：

```
[{"Id":"Q0"},{"Id":"Q4"},{"Id":"Q7"}] 
```

但是当我想反序列化这个 jsonContent 时，属性 Qty 总是 0 并且没有设置为默认值。我的意思是，当我反序列化 jsonContent 时，因为 Quantity 的 DefaultValue 应该是 1 而不是 0。

```
public static List<AssignmentContentItem> DeserializeAssignmentContent(string jsonContent)
{
    return JsonConvert.DeserializeObject<List<AssignmentContentItem>>(jsonContent, s);
} 
```

我该怎么办

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T19:59:29.257

该`DefaultValue`属性不设置属性的值。看到这个问题：[.NET DefaultValue 属性](https://stackoverflow.com/questions/2329868/net-defaultvalue-attribute)

你最好做的是在构造函数中设置值：

```
public class AssignmentContentItem
{
    [JsonProperty("Id")]
    public string Id { get; set; }
    [JsonProperty("Qty")]
    public int Quantity { get; set; }

    public AssignmentContentItem()
    {
        this.Quantity = 1;
    }
} 
```

这一行在哪里：

```
AssignmentContentItem item =
    JsonConvert.DeserializeObject<AssignmentContentItem>("{\"Id\":\"Q0\"}"); 
```

结果是`AssignmentContentItem`其`Quantity`设置为`1`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-13T09:10:35.180

您可以使用 DefaultValueHandling.Populate 设置，以便 Json.Net 使用默认值填充创建的对象。

```
public static List<AssignmentContentItem> DeserializeAssignmentContent(string jsonContent)
{
    return JsonConvert.DeserializeObject<List<AssignmentContentItem>>(jsonContent, new JsonSerializerSettings
    { 
            DefaultValueHandling = DefaultValueHandling.Populate, 
            NullValueHandling = NullValueHandling.Ignore 
    });
} 
```

[http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_DefaultValueHandling.htm](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_DefaultValueHandling.htm)

# c# - 如何将字符串分隔为多个部分 C#

> ID：15452451
> 
> 赞同：1
> 
> 时间：2013-03-16T17:37:30.727
> 
> 标签：c#, string

我有一个字符串，其中包含链接。例子：

```
www.google.com;www.yahoo.com;www.gmail.com 
```

我的问题是如何分离这些链接，以便我可以将标签添加到所有链接`<a>`并在链接末尾添加标签`</a>`？

我应该得到这个：

```
<a>www.google.com</a>;<a>www.yahoo.com</a>;<a>www.gmail.com</a> 
```

如果解决方案尽可能简单并使用该`IndexOf`方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:42:44.927

该代码应该可以完成这项工作：

```
var input = "www.google.com;www.yahoo.com;www.gmail.com";
var result = string.Join(";", input.Split(';').Select(x => string.Format("<a>{0}</a>",x))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T17:43:03.790

```
var links = "www.google.com;www.yahoo.com;www.gmail.com";
var result = String.Join(";", links.Split(';').Select(s => String.Format("<a>{0}</a>", s))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T17:42:32.700

最简单的方法：

```
var result = "<a>" + String.Join("</a>;<a>", input.Split(new char[] { ';' })) + "</a>"; 
```

但是，它将返回`<a></a>`空输入。

解释：

`input.Split(new char[] { ';' })`按字符拆分输入字符串`:`。

`String.Join("</a>;<a>", input.Split(new char[] { ';' }))`使用`</a>;<a>`字符串连接拆分中的元素。

`"<a>" + String.Join("</a>;<a>", input.Split(new char[] { ';' })) + "</a>";``<a>`在结果的前面和`</a>`末尾添加额外的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T17:44:41.943

尝试这样的事情：

```
var result = String.Join(";", 
"www.google.com;www.yahoo.com;www.gmail.com"
.Split(';')
.Select(str => String.Format("<a>{0}</a>", str))); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T17:43:33.587

使用 split() 函数。按字符拆分字符串；并存储在一个数组中。

```
string[] arr = inputstring.Split(';'); 
string outputstring=string.Empty;
for(int i=0;i<arr.Length;i++)
  outputstring += "<a>"+arr[i]+"</a>;"; 
```

因为你不想要分号结尾

`outputstring = outputstring .TrimEnd(';');`

# python - 如何将菜单项添加到自己的模块 - OpenERP 7

> ID：15452454
> 
> 赞同：0
> 
> 时间：2013-03-16T17:37:37.603
> 
> 标签：python, openerp

当我需要将“供应商菜单项”添加到我自己的模块时，我需要复制并粘贴到标签下方并在**openerp** .py 文件的依赖部分中添加 hr 和基本模型。？够了吗。？需要做其他修改吗？

```
<menuitem id="base.menu_procurement_management_supplier_name" name="Suppliers"
    parent="menu_procurement_management"
    action="base.action_partner_supplier_form" sequence="15"/> 
```

我也尝试这种方法来支付菜单项。然后它从那个模块移动到我的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:42:51.523

用您想要显示的模块菜单 ID 替换父菜单。

就像您的 menuitem 示例一样：

```
parent="menu_procurement_management" 
```

是采购模块menuitem id，所以在采购订单菜单下显示菜单。当您将其替换为您的菜单项 ID 时，它将显示在您的菜单项下。

您可以根据模块要求更改顺序。

希望这对你有帮助

# scala - Json 转换器 - 来自 2 个现有领域的新领域

> ID：15452456
> 
> 赞同：2
> 
> 时间：2013-03-16T17:37:45.297
> 
> 标签：scala, playframework-2.0

使用 json API，我如何为以下内容编写转换器：

```
{
"name":"John Doe",
"number":22
} 
```

到

```
{
"name":"John Doe",
"number":22,
"slug":"John-Doe-22"
} 
```

使用字符串操作可以做到这一点，但是如何从 2 个字段中选择值并将其应用于它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:04:57.003

你可以这样做：

```
val json = Json.obj(
   "name" -> JsString("John Doe"),
   "number" -> JsNumber(22)
)

val transformed = 
   json.transform(
      __.json.update(
        (__ \ 'slug).json.put(JsString(
          (json \ "name").as[String].replace(' ', '-') + "-" + (json \ "number").as[Int]
        ))
      )
   ).get

Ok(transformed.toString())
//{"name":"John Doe","number":22,"slug":"John-Doe-22"} 
```

[这](http://mandubian.com/2012/10/29/unveiling-play-2-dot-1-json-api-part3-json-transformers/)是关于播放 json 转换的好帖子。

# ruby-on-rails - 如何定义 admin_user 删除帖子？Ruby on rails 应用程序

> ID：15452458
> 
> 赞同：0
> 
> 时间：2013-03-16T17:37:58.843
> 
> 标签：ruby-on-rails, ruby

我试图让管理员能够删除用户的帖子。这是我在 post.html.erb 中使用的代码

```
<% if current_user.admin? %>
    <%= link_to "delete", post, method: :delete %>
  <% end %> 
```

这就是我在控制器里面的东西

```
class PostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :admin_user, only: :destroy
  before_filter :correct_user, only: :destroy

def destroy
    @post.destroy
    redirect_to root_path
  end

  private

    def correct_user
      @post = current_user.posts.find_by_id(params[:id])
      redirect_to root_path if @post.nil?
    end 
```

我可以让它为正确的用户工作，但不能为管理员工作。我收到此错误消息

```
undefined local variable or method `admin_user' for #<PostsController:0x5fda230> 
```

我试图将 admin_user 定义为 user.id ==1 private

```
def admin_user?
      current_user && current_user.id == 1
    end 
```

但我遇到了同样的错误信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:00:33.930

```
class ApplicationController < ActionController::Base
  def admin_user?
    unless current_user && current_user.admin?
      redirect_to root_url
      return false
    end
  end
end

class PostsController < ApplicationController
  before_filter :signed_in_user
  # before_filter :admin_user?, only: :destroy
  before_filter :load_post, :only: :destroy

  def destroy
    @post.destroy
    redirect_to root_url
  end

  private
    def load_post
      @post = current_user.admin? ? Post.find(params[:id]) : current_user.posts.find(params[:id])
    end
end 
```

升级版：

正如我从评论中了解到的那样，您希望用户能够销毁他们自己的帖子，并且管理员能够销毁任何帖子。在这种情况下，您不必在 before_filter 中检查用户 admin，例如删除此行：

```
before_filter :admin_user?, only: :destroy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:06:02.880

```
before_filter :admin_user, only: :destroy

class ApplicationController
  def admin_user?
    if current_user && current_user.id == 1
      return true
    else 
      redirect_to root_url, :error => "Admin only"
      return false
    end
  end
end 
```

由于 admin_user? 从任何控制器调用，所以把它放在应用程序控制器中

# javascript - 将百分号添加到进度条

> ID：15452459
> 
> 赞同：2
> 
> 时间：2013-03-16T17:37:59.280
> 
> 标签：javascript, html, css, progress-bar, percentage

我正在制作一个非常简单的进度条，除了一件事……百分号之外，一切正常。我的代码在下面，我的问题是如何在不弄乱脚本的情况下添加百分号。- [JsFiddle](http://jsfiddle.net/qGjkf/)

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="icon" href="Assets/IMG/Roz.png" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Apache Testing Server</title>
<style type="text/css">
    #ProgressWrap {
        height:30px;
        width:300px;
        border:1px solid #222;
        text-align:center;
        position:relative;  
    }

    #ProgressStat {
        height:30px;
        width:0%;
        background-color:#9CF;
        position:absolute;
        top:0px;
        left:0px;
    }

    #ProgressPer {
        width:100%;
        height:30px;
        line-height:30px;
        position:absolute;
        top:0px;
        left:0px;
        z-index:1000;
    }
</style>

<script type="text/javascript">
window.onload = function() {
    document.getElementById('ProgressPer').innerHTML = 0;

    var Change = setInterval(function() {
        var Per = document.getElementById('ProgressPer').innerHTML;
        ++Per
        if(Per == 101)
        {
            clearInterval(Change);
        }
        else
        {
            document.getElementById('ProgressPer').innerHTML = Per;
            var Bar = document.getElementById('ProgressStat');
            Bar.style.width = Per + '%';    
        }
    }, 50);
}
</script>
</head>

<body>
    <div id="ProgressWrap">
        <div id="ProgressPer"></div>
        <div id="ProgressStat"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:40:52.927

您需要更改这两行：

```
var Per = document.getElementById('ProgressPer').innerHTML.replace('%',''); 
```

和

```
document.getElementById('ProgressPer').innerHTML = Per.toString() + '%'; 
```

[见小提琴](http://jsfiddle.net/qGjkf/2/)。

您的代码没有任何问题，但它并没有真正遵循 javascript 样式准则。此外，没有必要在计算中使用 innerHTML 值。这是另一个需要考虑的版本。

```
var pct = 0,
    change = setInterval(function () {
    ++pct;
    if (pct == 101) {
        clearInterval(change);
    } else {
        document.getElementById('ProgressPer').innerHTML = pct.toString() + '%';
        var bar = document.getElementById('ProgressStat');
        bar.style.width = pct + '%';
    }
}, 50); 
```

# c# - 活动目录中的工作站允许属性

> ID：15452465
> 
> 赞同：0
> 
> 时间：2013-03-16T17:39:06.247
> 
> 标签：c#, active-directory

通过执行命令行，`net user "userid" /domain`我看到了`workstations allowed`值。

活动目录中此属性的名称是什么？

我正在使用 c# 来检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T11:55:00.963

简短回答：用户工作站

长答案：我使用以下脚本从我需要学习的 AD 对象中读取属性。

```
 'Script to Walk Through the Property Cache for an Object and Display All Values

Option Explicit
On Error Resume Next

Const ADSTYPE_INVALID = 0
Const ADSTYPE_DN_STRING = 1
Const ADSTYPE_CASE_EXACT_STRING = 2
Const ADSTYPE_CASE_IGNORE_STRING = 3
Const ADSTYPE_PRINTABLE_STRING = 4
Const ADSTYPE_NUMERIC_STRING = 5
Const ADSTYPE_BOOLEAN = 6
Const ADSTYPE_INTEGER = 7
Const ADSTYPE_OCTET_STRING = 8
Const ADSTYPE_UTC_TIME = 9
Const ADSTYPE_LARGE_INTEGER = 10
Const ADSTYPE_PROV_SPECIFIC = 11
Const ADSTYPE_OBJECT_CLASS = 12
Const ADSTYPE_CASEIGNORE_LIST = 13
Const ADSTYPE_OCTET_LIST = 14
Const ADSTYPE_PATH = 15
Const ADSTYPE_POSTALADDRESS = 16
Const ADSTYPE_TIMESTAMP = 17
Const ADSTYPE_BACKLINK = 18
Const ADSTYPE_TYPEDNAME = 19
Const ADSTYPE_HOLD = 20
Const ADSTYPE_NETADDRESS = 21
Const ADSTYPE_REPLICAPOINTER = 22
Const ADSTYPE_FAXNUMBER = 23
Const ADSTYPE_EMAIL = 24
Const ADSTYPE_NT_SECURITY_DESCRIPTOR = 25
Const ADSTYPE_UNKNOWN = 26

Const ADS_PROPERTY_CLEAR = 1
Const ADS_PROPERTY_UPDATE = 2
Const ADS_PROPERTY_APPEND = 3
Const ADS_PROPERTY_DELETE = 4

Dim adsPropValue  'An individual property value within a loop
Dim adsPropEntry  'An ADSI PropertyEntry object
Dim adsObject     'The object whose property list we wish to investigate
Dim txtStr        'A text string used to display results in one go
Dim intPropCount  'The number of properties in 
Dim intIndex      'The index used while looping through the property list
Dim intCount      'Used to display property values in a numbered sequence
Dim ArgObjName    'Used to hold name of object to be enumerated
Dim objAttr
Dim sidBin, sidHex, sidDec

'Uncomment one of these lines and modify it to your own environment
'Set adsObject = GetObject("LDAP://cn=Managers,ou=Sales,dc=windows,dc=mycorp,dc=com")
'Set adsObject = GetObject("WinNT://WINDOWS/Managers,Group")

if WScript.Arguments.Count > 0 then
    ArgObjName = WScript.Arguments(0)
else
    ArgObjName = InputBox("Please enter the machine you wish to query or leave blank for local Profile.", _
            "Walk1.vbs","LDAP://CN=CND7352YMY-A,OU=Kingsport,OU=NAR,OU=Workstations,DC=emn,DC=com")
    if ArgObjName = "" then
        ArgObjName = "LDAP://CN=ZWW8R-A,OU=Longview,OU=NAR,OU=Desktops,DC=emn,DC=com"
    end if
end if

if instr(ArgObjName,":") < 1 then ArgObjName = "LDAP://" & ArgObjName

wscript.echo "Connecting to " & ArgObjName
Set adsObject = GetObject(ArgObjName)
adsObject.GetInfo

intPropCount = adsObject.PropertyCount
txtStr = wscript.scriptname & " For " & ArgObjName & vbcrlf 
txtStr = txtStr & "There are " & intPropCount & " values in the property cache." & vbCrLf
wscript.echo "GUID: " & adsobject.GUID

sidBin = adsObject.objectSid
sidHex = OctetToHexStr(sidBin)
sidDec = HexStrToDecStr(sidHex)
WScript.Echo "SID: " & sidDec & " (hex: " & sidHex & ")"

'The extra vbTab's used in the first loop are to space the results so that they are nicely
'formatted with the list of values in the second loop
For intIndex = 0 To (intPropCount-1)
  Set adsPropEntry = adsObject.Item(CInt(intIndex))
  txtStr = txtStr & adsPropEntry.Name & vbCrLf
  If (adsPropEntry.ADsType = ADSTYPE_INVALID) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "INVALID" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_DN_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "DN_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_CASE_EXACT_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "CASE_EXACT_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_CASE_IGNORE_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "CASE_IGNORE_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_PRINTABLE_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "PRINTABLE_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_NUMERIC_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "NUMERIC_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_BOOLEAN) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "BOOLEAN" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_INTEGER) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "INTEGER" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_OCTET_STRING) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "OCTET_STRING" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_UTC_TIME) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "UTC_TIME" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_LARGE_INTEGER) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "LARGE_INTEGER" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_PROV_SPECIFIC) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "PROV_SPECIFIC" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_OBJECT_CLASS) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "OBJECT_CLASS" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_CASEIGNORE_LIST) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "CASEIGNORE_LIST" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_OCTET_LIST) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "OCTET_LIST" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_PATH) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "PATH" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_POSTALADDRESS) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "POSTALADDRESS" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_TIMESTAMP) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "TIMESTAMP" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_BACKLINK) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "BACKLINK" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_TYPEDNAME) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "TYPEDNAME" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_HOLD) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "HOLD" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_NETADDRESS) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "NETADDRESS" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_REPLICAPOINTER) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "REPLICAPOINTER" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_FAXNUMBER) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "FAXNUMBER" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_EMAIL) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "EMAIL" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_NT_SECURITY_DESCRIPTOR) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "NT_SECURITY_DESCRIPTOR" & vbCrLf
  ElseIf (adsPropEntry.ADsType = ADSTYPE_UNKNOWN) Then
    txtStr = txtStr & vbTab & "Type:" & vbTab & vbTab & "UNKNOWN" & vbCrLf
  End If

  intCount = 1
  For Each adsPropValue In adsPropEntry.Values  
    If (adsPropValue.ADsType = ADSTYPE_DN_STRING) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.DNString & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_CASE_EXACT_STRING) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.CaseExactString & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_CASE_IGNORE_STRING) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.CaseIgnoreString & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_PRINTABLE_STRING) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.PrintableString & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_NUMERIC_STRING) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.NumericString & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_BOOLEAN) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & CStr(adsPropValue.Boolean) & vbCrLf
    ElseIf (adsPropValue.ADsType = ADSTYPE_INTEGER) Then
      txtStr = txtStr & vbTab & "Value #" & intCount & ":" & vbTab & adsPropValue.Integer & vbCrLf
    End If
    intCount=intCount+1
  Next
  If (adsPropEntry.ADsType = ADSTYPE_UTC_TIME) Then
      objattr = ""
      objAttr = adsObject.get(adsPropEntry.Name)
      if isarray(objAttr) then
    txtStr = txtStr & vbTab & "Value   :" & vbTab & join(objAttr,";") & vbCrLf
      else
    txtStr = txtStr & vbTab & "Value   :" & vbTab & objAttr & vbCrLf
      end if
  End If
  If (adsPropEntry.ADsType = ADSTYPE_LARGE_INTEGER) Then
      wscript.echo adsPropEntry.Name
      objattr = ""
      objAttr = adsObject.get(adsPropEntry.Name)
      if isarray(objAttr) then
    txtStr = txtStr & vbTab & "Value   :" & vbTab & join(objAttr,";") & vbCrLf
      else
    txtStr = txtStr & vbTab & "Value   :" & vbTab & objAttr & vbCrLf
      end if
  End If
  'If (adsPropEntry.ADsType = ADSTYPE_LARGE_INTEGER) Then
  '    txtStr = txtStr & vbTab & "Value   :" & vbTab & FormatNumber(adsPropEntry,0) & vbCrLf
  'End If
Next
WScript.Echo txtStr

'RefreshTime = FormatNumber((Account.get("PasswordAge"))/86400,0)

' The following functions are attributable to <A Target="NewWindow" Href="http://www.rlmueller.net/"><FONT SIZE="+1"><B>Richard Mueller [MVP]</B></FONT></A>

Function OctetToHexStr(arrbytOctet) 
    Dim k 
    OctetToHexStr = "" 
    For k = 1 To Lenb(arrbytOctet) 
        OctetToHexStr = OctetToHexStr _ 
            & Right("0" & Hex(Ascb(Midb(arrbytOctet, k, 1))), 2) 
    Next 
End Function 

Function HexStrToDecStr(strSid) 
    Dim arrbytSid, lngTemp, j 
    ReDim arrbytSid(Len(strSid)/2 - 1) 
    For j = 0 To UBound(arrbytSid) 
        arrbytSid(j) = CInt("&H" & Mid(strSid, 2*j + 1, 2)) 
    Next 
    HexStrToDecStr = "S-" & arrbytSid(0) & "-" _ 
             & arrbytSid(1) & "-" & arrbytSid(8) 

    lngTemp = arrbytSid(15) 
    lngTemp = lngTemp * 256 + arrbytSid(14) 
    lngTemp = lngTemp * 256 + arrbytSid(13) 
    lngTemp = lngTemp * 256 + arrbytSid(12) 

    HexStrToDecStr = HexStrToDecStr & "-" & CStr(lngTemp) 

    lngTemp = arrbytSid(19) 
    lngTemp = lngTemp * 256 + arrbytSid(18) 
    lngTemp = lngTemp * 256 + arrbytSid(17) 
    lngTemp = lngTemp * 256 + arrbytSid(16) 

    HexStrToDecStr = HexStrToDecStr & "-" & CStr(lngTemp) 

    lngTemp = arrbytSid(23) 
    lngTemp = lngTemp * 256 + arrbytSid(22) 
    lngTemp = lngTemp * 256 + arrbytSid(21) 
    lngTemp = lngTemp * 256 + arrbytSid(20) 

    HexStrToDecStr = HexStrToDecStr & "-" & CStr(lngTemp) 

    lngTemp = arrbytSid(25) 
    lngTemp = lngTemp * 256 + arrbytSid(24) 

    HexStrToDecStr = HexStrToDecStr & "-" & CStr(lngTemp) 

End Function 
```

# android - Android相机程序错误-2147483648

> ID：15452473
> 
> 赞同：0
> 
> 时间：2013-03-16T17:39:46.680
> 
> 标签：android, android-camera

我正在尝试学习如何使用相机拍照。我指的是[本教程](http://www.vogella.com/articles/AndroidCamera/article.html)并尝试实现`MakePhotoActivity`该类。当我在手机上运行该应用程序时，该应用程序正常启动。理想情况下，单击“MakePhoto”按钮应捕获图像并将其保存到我的 SD 卡中。但是，当我单击“MakePhoto”按钮时，我的应用程序不会执行任何操作。在检查 logcat 时，我`error -2147483648`在里面。谁能告诉这里发生了什么以及如何解决此错误？

编辑：

这是日志猫：

```
03-16 13:16:03.608: I/Process(7907): Sending signal. PID: 7907 SIG: 9
03-16 13:16:11.108: D/TextLayoutCache(8052): Using debug level: 0 - Debug Enabled: 0
03-16 13:16:11.148: D/libEGL(8052): loaded /system/lib/egl/libGLES_android.so
03-16 13:16:11.158: D/libEGL(8052): loaded /system/lib/egl/libEGL_adreno200.so
03-16 13:16:11.158: D/libEGL(8052): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-16 13:16:11.158: D/libEGL(8052): loaded /system/lib/egl/libGLESv2_adreno200.so
03-16 13:16:11.198: D/OpenGLRenderer(8052): Enabling debug mode 0
03-16 13:16:28.308: D/MakePhotoActivity(8052): Camera found
03-16 13:16:28.498: E/Camera(8052): Error -2147483648 
```

我还尝试在我的 SD 卡中搜索任何图片，但找不到任何图片。

我试图调试程序。这是我得到的：

```
03-16 14:23:13.949: W/dalvikvm(11426): threadid=1: thread exiting with uncaught exception (group=0x2b542210) 
```

编辑2：

好的。我只是使用`e.printStackTrace();` 所以打印出未捕获的异常，logcat 在日志中附加以下内容：

```
03-16 14:39:09.589: W/System.err(12863): java.lang.NullPointerException
03-16 14:39:09.599: W/System.err(12863):    at edu.gatech.makephotoactivity.MakePhotoActivity.onClick(MakePhotoActivity.java:43)
03-16 14:39:09.599: W/System.err(12863):    at java.lang.reflect.Method.invokeNative(Native Method)
03-16 14:39:09.599: W/System.err(12863):    at java.lang.reflect.Method.invoke(Method.java:511)
03-16 14:39:09.599: W/System.err(12863):    at android.view.View$1.onClick(View.java:3058)
03-16 14:39:09.599: W/System.err(12863):    at android.view.View.performClick(View.java:3534)
03-16 14:39:09.599: W/System.err(12863):    at android.view.View$PerformClick.run(View.java:14263)
03-16 14:39:09.599: W/System.err(12863):    at android.os.Handler.handleCallback(Handler.java:605)
03-16 14:39:09.599: W/System.err(12863):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-16 14:39:09.609: W/System.err(12863):    at android.os.Looper.loop(Looper.java:137)
03-16 14:39:09.609: W/System.err(12863):    at android.app.ActivityThread.main(ActivityThread.java:4441)
03-16 14:39:09.609: W/System.err(12863):    at java.lang.reflect.Method.invokeNative(Native Method)
03-16 14:39:09.609: W/System.err(12863):    at java.lang.reflect.Method.invoke(Method.java:511)
03-16 14:39:09.609: W/System.err(12863):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-16 14:39:09.609: W/System.err(12863):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-16 14:39:09.609: W/System.err(12863):    at dalvik.system.NativeStart.main(Native Method) 
```

所以，我得到一个`NullPointerException`. 我的猜测是该`getDir()`函数没有返回任何内容。但是，我不确定。有什么建议为什么我可能会遇到异常以及如何摆脱它？

编辑 3：

现在，我正在尝试再次调试程序。我从类文件编辑器收到一条消息说`Source Not Found. The source attachment does not contain source for ClassLoader.class`。我可以把细节放在这里，但它会变得太长。显然我的代码找不到`PhotoHandler`类。如何让 Eclipse 在同一个包中找到类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:57:42.550

我真的不明白为什么我会收到这个错误以及如何解决它。我也不明白为什么 eclipse`PhotoHandler`在运行时无法找到课程。但是，@JoxTraex 使用隐式相机应用程序意图的建议很有用。所以我删除了单独的函数并在我的方法`onClick`中添加了以下代码：`onCreate`

```
findViewById(R.id.imageButton1).setOnClickListener(new OnClickListener() {
  public void onClick(View view) {    

      try {
          Intent i = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
          startActivityForResult(i, RET_CODE);
      }    
      catch(Exception e){
          e.printStackTrace();
      }
  }
}); 
```

我还在`MakePhotoActivity`课堂上添加了以下方法

protected void onActivityResult(int requestCode, int resultCode, Intent data) { super.onActivityResult(requestCode, resultCode, data); 如果（结果代码！= RESULT_OK）返回；

```
 switch(requestCode){
  case RET_CODE:
      Uri u = data.getData();      *//This gives the URI where the image is saved*
      /*
        FETCH THE PHOTO USING THE URI AND DO WHATEVER OPERATION YOU WANT WITH THE PHOTO (IN MY CASE SENDING IT OVER THE NETWORK)
      */
      break;
  default:
      break;
  } 
```

}

并对 XML 文件进行了适当的更改。

虽然，这不是我问题的答案，但我只是发布它，以便它可能对某人有用。

# html - CSS Divs % 宽度

> ID：15452475
> 
> 赞同：0
> 
> 时间：2013-03-16T17:39:47.923
> 
> 标签：html, css

我需要创建 CSS div。

*   顶部的标题（全宽）
*   左侧的一个（180px）用于垂直菜单
*   右边是主要内容

左侧的菜单将是 iframe，然后右侧的菜单也将是 iframe。

我目前有这个代码：

```
<style type="text/css">
body,html {
    height:98%;
}
#top-bar {
    width:100%;
    padding:10px 10px 10px 10px;
    margin:0 0 10px 0;
    border-bottom:solid 1px #000000;
    top:0;
    left:0;
}
#left-bar {
    width:170px;
    display:inline;
    float:left;
    position:fixed;
    z-index:999;
}
#right-bar {
    margin-left:180px;
    width:auto;
    display:inline;
}
#space {
    width:100px;
    height:120px;
}
</style>

<table width="100%" border="0" cellspacing="10" cellpadding="10" style="position:fixed;z-index:999;top:0;left:0;background-color:#fff">
  <tr>
    <td><a href="index.php"><img src="http://www.integradigital.co.uk/images/company/logo.png" width="282" height="41" /></a></td>
    <td align="right">Hello <?php echo $_SESSION["forename"]; ?> | <a href="logout.php">Logout</a></td>
  </tr>
  <tr>
    <td colspan="2"><hr /></td>
  </tr>
</table>

<div id="space"></div>

<div id="left-bar"><iframe src="header.php" width="180px" height="480px" frameborder="0" scrolling="auto"></iframe></div>

<div id="right-bar">
<iframe name="rightiframe" src="dash.php" width="100%" height="480px" frameborder="0" scrolling="auto"></iframe>
</div> 
```

但正确的内容似乎在左侧菜单下

我需要顶部标题（当前在表格中）在滚动时不移动，左侧菜单栏也是如此，并且需要为 %，以便它可以全部适合不同尺寸的屏幕。

有人知道我能用它做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:50:44.230

首先，将样式移动到单独的样式表中，然后从`<head>`页面链接到该样式表。不要使用该`<style>`元素，因为维护起来很痛苦，并且会导致跨页面重复。该`<style>`元素不应该在`<body>`页面中。

另外，不要使用表格进行布局。它不是语义的。

将浮动元素内联是没有意义的。它不会是内联的。如果这些内联元素没有浮动，则不会应用您指定的宽度。另外，不要`style`在元素上使用属性 - 使用 CSS。

这些建议可能无法解决您的具体问题，但目前一切都有些混乱，所以我认为您现在有更大的问题需要解决......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:00:59.637

尝试以下更改，

```
<div id="left-bar">
   <iframe src="image.png" width="100%" height="100%" frameborder="0"   scrolling="auto"></iframe>
</div>
<div id="right-bar">
   <iframe name="rightiframe" src="image.png" width="100%" height="100%" frameborder="0" scrolling="auto"></iframe>
</div>

#left-bar {
   width: 20%;
   ........
}
#right-bar {
   width: 80%;
   .......
} 
```

注意：切勿使用表格来对齐页面中的内容。始终使用 .css 文件中定义的 css 的 div，并为 div 标签定义适当的“类”属性。

# java - Java 不读取具有相对路径的图片和音频文件

> ID：15452476
> 
> 赞同：0
> 
> 时间：2013-03-16T17:39:50.870
> 
> 标签：java, jar, relative-path

在java中，我编写了一个小程序来播放音频文件和播种图片：
首先我用路径制作了一个最终的字符串，然后我制作了一个文件对象。
至少我将返回的数组保存在我的“tracks”变量中。这是我的代码：

```
private static final String PATH = "../src/audio/";
private static final File FILE = new File(PATH);
tracks = liesAudioDateien(file);

private AudioClip[] liesAudioDateien (File inputFile) {
    File[] dateFileArray;
    AudioClip[] tracks;
    dateFileArray = inputFile.listFiles();
    tracks = new AudioClip[dateFileArray.length];
    for (int i = 0; i < tracks.length; i++) {
        if (dateFileArray[i].isFile()) {
            try {
                tracks[i] = Applet.newAudioClip(dateFileArray[i].toURL());
            } catch (IOException ex) {
                System.err.println("Oops!: -- " + ex.toString());
            }
        }

    }
    return tracks; 
```

如果我运行此代码，我会收到错误消息：

```
Exception in thread "main" java.lang.NullPointerException
    at source.Sound.liesAudioDateien(Sound.java:32) 
```

Sound.java:32：
这是`tracks = new AudioClip[dateFileArray.length];`行。

如果我尝试使用绝对路径，它确实有效！我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:43:24.797

您的路径是相对的，它被解析为相对于当前工作目录。当前的工作目录不是你想象的那样。

尝试在此之前执行此操作`inputFile.listFiles()`；

```
System.out.println(inputFile.getAbsolutePath()); 
```

看看 Java*认为*绝对路径应该是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:52:26.820

更改`"../src/audio/"`为`"./src/audio/"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:10:26.570

[`File.listFiles`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)`null`如果抽象路径名不表示目录，则返回。

您需要确保`inputFile` *does*表示一个目录以确保`dateFileArray`is not `null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T14:47:02.903

尝试使用 File.separator 代替正/反斜杠。前任：

```
String soundDir = "." + File.separator + "folderName" + File.separator;
String fileName = "sound.wav";
String filePath = soundDir+ + fileName; 
```

# iphone - 如何创建这样的表格单元格布局？

> ID：15452479
> 
> 赞同：0
> 
> 时间：2013-03-16T17:40:20.050
> 
> 标签：iphone, cocoa-touch, uitableview

我喜欢做的就是创建一个 UITableViewCell ，其布局只有两个元素，如下所示：

```
"Text that can have a flexible length 
with mutliple lines..."
"one fix line directly follwing the above text" 
```

所以基本上 1\. 具有可变长度的灵活文本字段，如果需要，必须看到完整的文本以多行包裹 2\. 紧随其后的一行

虽然我发现`heightForRowAtIndexPath`它仍然无助于如何在这里进行第二个字段的布局......

```
 -(void) layoutSubviews {
    [super layoutSubviews];
    [flexibleText setFrame:CGRectMake(  5.0,  5.0, 250.0, 40.0)];  //<- fexible height
        [one_line setFrame:CGRectMake(  5.0, 42.0, 250.0, 20.0)]; //<- followed by this one liner
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:45:26.917

您必须将 UITableViewCell 子类化，然后在布局中计算第一个标签需要多大。看看这个[-[NSString sizeWithFont:forWidth:lineBreakMode:] 有什么用？](https://stackoverflow.com/questions/455553/what-is-nsstring-sizewithfontforwidthlinebreakmode-good-for)对于如何使用`-[NSString sizeWithFont:constrainedToSize:lineBreakMode:]`。

然后根据第一个重新定位第二个标签的框架。

然后，您可以创建一个方法，该方法将返回单元格所需的高度并在您的`heightForCell`方法中调用它。

# java - 继承：从子类访问基类字段

> ID：15452480
> 
> 赞同：11
> 
> 时间：2013-03-16T17:40:26.663
> 
> 标签：java, oop, inheritance

子类对象如何引用超类？例如：

```
public class ParentClass {

    public ParentClass() {}     // No-arg constructor.

    protected String strField;
    private int intField;
    private byte byteField;
} 

public class ChildClass extends ParentClass{

    // It should have the parent fields.
} 
```

这里`ChildClass`调用构造函数时，`ParentClass`会创建一个类型的对象，对吧？

ChildClass 继承`strField`自 ParentClass 对象，所以它（`ChildClass`对象）应该以`ParentClass`某种方式访问​​对象，但是如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T17:46:02.980

当您这样做时，`ChildClass childClassInstance = new ChildClass()`只会创建一个新对象。

您可以将`ChildClass`视为由以下内容定义的对象：

*   来自`ChildClass`+ 的字段来自`ParentClass`.

所以该字段`strField`是 ChildClass 的一部分，可以通过`childClassInstance.strField`

所以你的假设是

> `ChildClass`调用构造函数时，`ParentClass`会创建一个类型的对象

不完全正确。创建的`ChildClass`实例也是一个`ParentClass`实例，它是同一个对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T17:45:15.477

的实例`ChildClass`没有`ParentClass`对象，它**是**一个`ParentClass`对象。作为一个子类，它可以访问其父类中的公共和受保护的属性/方法。所以这里`ChildClass`可以访问`strField`，但不能访问`intField`，`byteField`因为它们是私有的。

您可以在没有任何特定语法的情况下使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:46:18.680

是的，您将能够访问`strField`表单`ChildClass`，而无需执行任何特殊操作（但请注意，只会创建一个实例。子节点，它将继承父节点的所有属性和方法）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T17:42:51.563

您可以`strField`像在`ChildClass`. 为避免混淆，您可以添加一个`super.strField`含义，即您正在访问父类中的字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T17:56:50.580

> 在这里，当调用 ChildClass 构造函数时，会创建 ParentClass 类型的对象，对吗？

不！调用 ChildClass 构造函数 >> 调用父类 constr 并且不创建 ParentClass 的对象，仅在 ChildClass 中继承父类的可访问字段

> ChildClass 从 ParentClass OBJECT 继承 strField，所以它（ChildClass 对象）应该以某种方式访问​​ ParentClass 对象，但是如何？

不，这只是重用 ParentClass 的模板来创建新的 ChildClass

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-23T19:51:09.303

只关注无参构造器的业务和编译器的参与，在`ChildClass`调用派生类()的默认构造器(无参构造器)的同时，`ParentClass`通过编译器帮助的机制创建基类()的子对象（在派生类中插入基类构造函数调用）并包装在派生类的对象中。

```
class Parent{
    String str = "i_am_parent";
    int i = 1;
    Parent(){System.out.println("Parent()");}
}
class Child extends Parent{
    String str = "i_am_child";
    int i = 2;
    Child(){System.out.println("Child()");}
    void info(){
        System.out.println("Child: [String:" + str + 
                           ", Int: " + i+ "]"); 
        System.out.println("Parent: [String: ]" + super.str + 
                           ", Int: " + super.i + "]"); 
    }
    String getParentString(){ return super.str;}
    int getParentInt(){ return super.i;}
    public static void main(String[] args){
        Child child = new Child();
        System.out.println("object && subojbect");
        child.info();
        System.out.println("subojbect read access");
        System.out.println(child.getParentString());
        System.out.println(child.getParentInt());

    }
} 
```

结果：

```
Parent()
Child()
object && subojbect
Child: [String:i_am_child, Int: 2]
Parent: [String: ]i_am_parent, Int: 1]
subojbect read access
i_am_parent
1 
```

# c++ - 查找表与运行时计算效率 - C++

> ID：15452481
> 
> 赞同：1
> 
> 时间：2013-03-16T17:40:32.617
> 
> 标签：c++, performance, caching, optimization, lookup-tables

我的代码需要不断地从以下函数计算一个值：

```
inline double f (double x) {
    return ( tanh( 3*(5-x)  ) *0.5 + 0.5);
} 
```

分析表明程序的这一部分是花费大部分时间的地方。由于该程序将运行数周甚至数月，因此我想优化此操作并正在考虑使用查找表。

我知道查找表的效率取决于表本身的大小以及它的设计方式。目前我不能使用少于 100 MB 的空间，最多可以使用 2GB。矩阵中两点之间的值将被线性插值。

使用查找表会比进行计算更快吗？此外，使用 N 维矩阵会比一维 std::vector 更好吗？不应该跨越的表大小的阈值（如果有）是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:30:13.493

> 我正在编写一个不断需要从特定函数计算值的代码。在进行了一些分析之后，我发现我的程序的这一部分是花费大部分时间的地方。
> 
> 到目前为止，我不允许使用少于 100 MB 的空间，最多可以使用 2GB。线性插值将用于矩阵中点之间的点。

如果您有巨大的查找表（如您所说的数百 MB），它不适合缓存 - 很可能内存查找时间将远高于计算本身。RAM“非常慢”，尤其是在从巨大数组的随机位置获取时。

这是综合测试：

[现场演示](http://coliru.stacked-crooked.com/a/d7239c9d5feaa5c3)

```
#include <boost/progress.hpp>
#include <iostream>
#include <ostream>
#include <vector>
#include <cmath>

using namespace boost;
using namespace std;

inline double calc(double x)
{
    return ( tanh( 3*(5-x)  ) *0.5 + 0.5);
}

template<typename F>
void test(F &&f)
{
   progress_timer t;
   volatile double res;
   for(unsigned i=0;i!=1<<26;++i)
      res = f(i);
   (void)res;
}

int main()
{
   const unsigned size = (1 << 26) + 1;
   vector<double> table(size);
   cout << "table size is " << 1.0*sizeof(double)*size/(1 << 20) << "MiB" << endl;
   cout << "calc ";
   test(calc);
   cout << "dummy lookup ";
   test([&](unsigned i){return table[(i << 12)%size];}); // dummy lookup, not real values
} 
```

我机器上的输出是：

```
table size is 512MiB
calc 0.52 s

dummy lookup 0.92 s 
```

# r - 在 R 中将许多字段匹配（和求和）为一个

> ID：15452482
> 
> 赞同：2
> 
> 时间：2013-03-16T17:40:33.717
> 
> 标签：r

我有一个数据文件 (.csv)，其中每个观测值都是 333 个区之一。每个区都有一个 ID，例如 1101、1102、...。其次，我有另一个数据文件 (.csv)，其中每个观察值都是 112,975 个城镇之一，包括人口数据。城镇数据有一个 District_ID 字段。每个区大约有300个镇。因此，有一个区`district_ID == 1101`和大约 300 个镇`district_ID == 1101`。

我想在我的区数据集中创建一个区级人口变量。这意味着将多个城镇观测值与每个区域观测值相匹配，并对城镇人口进行求和。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:04:18.680

一个 data.table 解决方案：

```
#some example data
set.seed(42)
districts <- data.frame(district_ID=1:10,whatever=rnorm(10))
towns <- data.frame(town=1:100,district_ID=rep(1:10,each=10),
                    population=rpois(100,sample(c(1e3,1e4,1e5))))

library(data.table)
districts <- data.table(districts,key="district_ID")
towns <- data.table(towns,key="district_ID")

#calculate district population
temp <- towns[,list(district_pop=sum(population)),by=district_ID]
#merge result with districts data.table
districts <- merge(districts,temp)

#    district_ID    whatever district_pop
# 1:           1  1.37095845       434886
# 2:           2 -0.56469817       334084
# 3:           3  0.36312841       342241
# 4:           4  0.63286260       433224
# 5:           5  0.40426832       334039
# 6:           6 -0.10612452       342810
# 7:           7  1.51152200       433362
# 8:           8 -0.09465904       333810
# 9:           9  2.01842371       342035
# 10:          10 -0.06271410       432302 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T17:56:45.630

编辑：更大数据集的基准。

使用 tapply 函数计算每个地区的人口：

```
districtdata$population<-
  tapply(towndata$population,towndata$district_ID,sum)[districts$district_ID] 
```

一些基准测试，只是为了好玩：

```
fn1<-function(districts,towns) 
{
  districts$population<-
       tapply(towns$population,towns$district_ID,sum)[districts$district_ID]

  districts
}
fn2<-function(districts,towns) #Roland's data.table approach:
{ 
  districts <- data.table(districts,key="district_ID")
  towns <- data.table(towns,key="district_ID")
  temp<-towns[,list(district_pop=sum(population)),by=district_ID]
  merge(districts,temp)
}

set.seed(42)
districts <- data.frame(district_ID=1:300,whatever=rnorm(300))
towns <- data.frame(town=1:100000,district_ID=rep(1:300,each=300),
                    population=rpois(300000,sample(c(1e3,1e4,1e5))))

microbenchmark(fn1(districts,towns),fn2(districts,towns))
Unit: milliseconds
                  expr       min        lq    median        uq       max neval
 fn1(districts, towns) 215.29266 231.47103 243.72353 265.28280 355.43895   100
 fn2(districts, towns)  20.03636  27.51046  36.11116  58.56448  88.70766   100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:20:56.243

怎么样：

```
aggregate(population ~ district_ID, towns, sum) 
```

（基于罗兰的综合数据）

# paypal - 选择正确的贝宝计费选项

> ID：15452485
> 
> 赞同：0
> 
> 时间：2013-03-16T17:40:49.433
> 
> 标签：paypal, paypal-adaptive-payments

在我的网站上，我有多个计费计划，例如：

*   1 美元 = 5 分
*   2 美元 = 15 点
*   3 美元 = 30 点

当用户选择贝宝选项时，我希望他被重定向到贝宝结帐页面，并且在交易完成后，我希望收到通知，以便我可以用积分来充值帐户。我了解使用立即付款按钮无法完成此操作。另外，我不明白这样做的最正确方法是什么。建议？

*   当我谈论贝宝结帐页面时，我的意思是这个

![在此处输入图像描述](../Images/bb54b8d1c9aaa219d42ed8d7b1d11aa7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:55:43.720

我只想创建一个下拉菜单选项，让买家选择他们想要购买的那个。然后，将使用选择的正确选项和金额填充 PayPal 结帐页面。至于将信息返回到您的站点。我会使用IPN。

即时付款通知 (IPN) 是一种消息服务，可通知您与 PayPal 交易相关的事件。您可以使用它来自动化后台和管理功能，例如履行订单、跟踪客户以及提供与交易相关的状态和其他信息。

在此处查看此页面[以获取有关 IPN 的更多信息](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)。还有一些 IPN 脚本示例，以及该页面左侧与 IPN 相关的其他链接。

# ruby-on-rails - 基于多对多关系的Ruby on Rails中的复选框表单

> ID：15452488
> 
> 赞同：5
> 
> 时间：2013-03-16T17:40:55.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 Ruby on Rails 应用程序有一个 DocumentType 模型和一个 PersonType 模型。文档属于 DocumentType（例如 Letter、Postcard）并列出一个或多个 People。每个人都被分配了一个 PersonType 来表示他们与文档的关系（发送者、接收者、作者等）。用户只能将 People 分配给与 DocumentType 相关的 PersonType。

表定义：

```
create_table "document_types", :force => true do |t|
 t.string   "name" 
end

create_table "document_types_person_types", :id => false, :force => true do |t|
 t.integer "document_type_id"
 t.integer "person_type_id"
end

create_table "person_types", :force => true do |t|
 t.string   "name"
end 
```

模型定义：

```
class Document < ActiveRecord::Base
 has_many :people, :dependent => :destroy
 belongs_to :document_type
end

class DocumentType < ActiveRecord::Base
 has_many :documents
 has_and_belongs_to_many :person_types
end

class Person < ActiveRecord::Base
belongs_to :document
has_and_belongs_to_many :person_types
end

class PersonType < ActiveRecord::Base
 has_and_belongs_to_many :people
 has_and_belongs_to_many :document_types
end 
```

表格示例：

```
documents
 id:   1 
 document_type_id: 1
 name: Letter from John Smith  to Jane and Joe Smith

document_types
 id: 1  |  name: letter

document_types_person_types
 document_type_id: 1  |   person_type_id:   1
 document_type_id: 1  |   person_type_id:   2
 document_type_id: 1  |   person_type_id:   4

person_types
 id: 1  |  name: Sender
 id: 2  |  name: Recipient
 id: 3  |  name: Photographer
 id: 4  |  name: Author  

people
 id: 1  |  document_id: 1  |  name: John Smith  |  person_type_id: 1
 id: 2  |  document_id: 1  |  name: Jane Smith  |  person_type_id: 2
 id: 3  |  document_id: 1  |  name: Joe Smith   |  person_type_id: 2 
```

当用户将 Person 添加到 Document 时，他们将选择 Person 与 Document 的关系，并将其存储在 Person 模型（或扩展模型）中。

Document 只会显示与该 DocumentType 相关的 PersonType（例如，Photo 不会有 Author，但会有摄影师）。

所以毕竟......我想要实现的是 DocumentTypes 的管理界面，代表 document_types_person_types 表，该表显示所有 PersonTypes 并允许我选择一个复选框（如果 PersonType 适用）：

```
EDIT DocumentType Letter
Sender       [x]
Recipient    [x]
Photographer [ ]
Author       [x] 
```

然后，在将人员添加到文档时，选择的那些 PersonTypes 将是唯一可用的 PersonTypes。希望比我在解释方面的努力所代表的更直接。任何人都可以提供任何指示吗？

*编辑：* 为了将来参考，根据下面弗雷德里克的回答，这行得通

```
<% for pt in PersonType.find(:all) %>
  <%= check_box_tag "document_type[person_type_ids][]", pt.id, @document_type.person_types.include?(pt)  %>
  <%= pt.name %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:48:15.820

有了这样的关联，DocumentType 将有一个`person_type_ids`方法返回相关人员类型的 id 数组。

因此，如果您创建一组复选框，其中名称`document_type[person_type_ids][]`和值是每个人员类型的 id，那么将提交的是一个包含已检查人员类型的 id 的数组，所以

```
document_type.update_attributes params[:document_type] 
```

将更新协会。这里唯一的微妙之处是，如果没有选中复选框，则不会提交任何数组（您不能提交空数组）并且不会清除相关人员类型的列表。我通常通过一个隐藏字段来解决这个问题，该字段将值 0 添加到数组中（因为我知道这永远不会是合法的 id），然后从控制器中的数组中删除该 0。

# ckeditor - ckeditor 生成的代码 W3C 验证：没有属性“data-cke-saved-src”

> ID：15452489
> 
> 赞同：1
> 
> 时间：2013-03-16T17:41:00.907
> 
> 标签：ckeditor, w3c-validation

我在 Intranet 中使用[CKEditor 4.0.1.1](http://ckeditor.com/blog/CKEditor-4.0.1.1-Released)并尝试使用 W3C 标记验证服务验证我的代码。

验证标记服务发现此错误：

> 第 547 行，第 2455 列错误：**没有属性“data-cke-saved-src”**

```
<img alt="" data-cke-saved-src="http://portail-rep/Contents/images/Java… 
```

如何禁用 ckeditor 保护代码的此功能以使我的代码可以进行 W3C 验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:47:38.743

CKEditor 使用许多特殊的属性和元素来实现它的一些特性。但是，它们仅在内部使用，并且在通过`editor.getData()`. 因此编辑器产生有效的标记。

例如打开[http://ckeditor.com/demo](http://ckeditor.com/demo)，切换到源模式，你会看到图像没有`data-cke-saved-src`属性。但是，如果您使用 Firebug 或 Webkit 的开发工具，您会发现图像具有此属性。

PS。事实上，在 HTML5 中`data-cke-saved-src`是一个[有效的属性。](https://developer.mozilla.org/en/docs/Web/Guide/HTML/Using_data_attributes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-05T03:55:17.177

我现在有同样的问题。此问题已通过使用 CKEDITOR config 解决`on blur event`。

我在元素上使用内联编辑。
我的 ck 配置包含具有销毁方法的模糊事件。

```
CKEDITOR.config.on = {
  blur: function() {
    this.destroy();
  }
} 
```

**使用很简单：**
在元素上单击将创建新编辑器的实例并启用内联编辑。
现在，如果用户在编辑器外部单击并调用模糊事件，编辑器会自行销毁它，如果不存在编辑器实例，则从 data-cke 属性中清除数据的内容。

# ember.js - 在同一个提交中创建父模型和子模型

> ID：15452500
> 
> 赞同：1
> 
> 时间：2013-03-16T17:42:12.557
> 
> 标签：ember.js, ember-data

我有以下型号：

```
App.Offers = DS.Model.extend({
   name: DS.attr('string'),            
   createdBy: DS.belongsTo('App.Users'),
   products: DS.hasMany('App.Products'), 
   startDate: DS.attr('string'),
   endDate: DS.attr('string')
}

App.Products = DS.Model.extend({
    description: DS.attr('string'),
    img: DS.attr('string'),
    offer: DS.belongsTo('App.Offers'),
} 
```

使用这两个模型，我创建了一个报价（父）和一个产品（子）：

```
var offer = App.Offers.createRecord({/*fields*/}),
    product = App.Products.createRecord({/*fields*/});
offer.get('products').pushObject(product);
offer.get("store").commit(); 
```

当我这样做时，问题是父母需要孩子的id，孩子需要父母的id才能设置它的FK。

我在 ember-data 存储库中查找了问题和 PR，发现了这个：[https](https://github.com/emberjs/data/pull/440) ://github.com/emberjs/data/pull/440 。它建议将 createRecord 包装在 waitForParents 函数中，该函数基本上创建父项，然后创建子项。虽然我尝试了他们的建议，但我仍然无法创建我的记录。问题是，即使先请求父级，它仍然需要子级的 id（尚未创建）。父请求使用以下有效负载发送：

```
{/*other_fields*/,"products":["/api/v1/products//"]} 
```

请注意 url 中缺少的产品 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:12:13.190

我设法通过遵循此 PR 中的建议来修复它：[https](https://github.com/emberjs/data/issues/437) ://github.com/emberjs/data/issues/437 。他们基本上建议创建一个 waitForParents 函数并将其包装在 createRecord 周围。该函数检查是否存在belongsTo 关系并将该创建的代码执行推迟到创建父级（通过将观察者添加到id 字段）。

就我而言，我还必须在序列化程序中覆盖 addHasMany。

我希望这可以帮助其他有同样问题的人。

# bash - 在 cygwin 上使用 getopts 时出错

> ID：15452505
> 
> 赞同：0
> 
> 时间：2013-03-16T17:42:36.350
> 
> 标签：bash, getopts

我正在尝试`getopts`在脚本`cygwin`中使用。`bash`以下是代码：

```
#!/bin/bash

# Sample program to deal with getopts.

echo "Number of input arguments = $#";
i=0;

while [ ${i} -lt 10 ];
do
  i=$[${i}+1];
  echo ${i};
done

while getopts ":a:b:c:e:" opt;
do
  case ${opt} in
  a)
   echo "-a was triggered with argument: ${OPTARG}";
  ;;

  b)
  echo "-b was triggered with argument: ${OPTARG}"
  ;;

  c)
   echo "-c was triggered with argument: $[OPTARG}"
  ;;

  e)
   echo "-e was triggered with argument: ${OPTARG}"
  ;;

  ?)
   echo "Invalid argument: ${OPTARG}"
  ;;
  esac
done 
```

当我运行上面的代码时，我收到以下错误：

```
./getOpts_sample.bash: line 37: syntax error near unexpected token `done'
./getOpts_sample.bash: line 37: `done' 
```

我无法理解此错误背后的原因。为什么`getopts`循环不起作用而第一个循环不起作用？是不是因为我的系统没有`getopts`安装？我该如何检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:49:28.283

这不是 cygwin 特有的；第 26 行有语法错误：

```
echo "-c was triggered with argument: $[OPTARG}" 
```

替换`[`为`{`，它将起作用。

第 11 行的注释：`echo ${i}`错误，用于`echo ${!i}`打印第 i 个参数。

第 10 行的注意事项：语法`$[ ]`现已过时；您可以`(( ))`像这样使用：

```
((i++)) 
```

甚至更好，将第 8-12 行替换为：

```
for ((i=0; i<10; i++)); do echo ${!i}; done 
```

# java - 我可以使用 OGNL 动态创建对象和设置属性吗？

> ID：15452512
> 
> 赞同：2
> 
> 时间：2013-03-16T17:43:21.553
> 
> 标签：java, xml, struts2, ognl

我正在开发一个系统，用于将接收到的结构化消息动态映射到 Java 对象。目前我正在通过 XML 模式执行此操作，该模式具有以下典型格式：

```
<mapping>
  <domainObject>company.app.MyObject</domainObject>
  <attribute>
    <domainAttribute>myAttr</domainAttribute>
    <messageAttribute>root/config/component/param1</messageAttribute>
  </attribute>
</mapping> 
```

所以接收到的消息有一个层次结构，它映射到特定的域对象属性。因此，对于上述内容，我将消息元素映射`root/config/component/param1`到域属性`MyObject.myAttr`

我已经开发了代码来做到这一点，但是在阅读了关于 Struts2 及其对 OGNL 的使用之后，它似乎在做同样的事情。**我的问题是，OGNL 可以动态构造必要的对象，然后填充所有必要的属性吗？如果是这样，那是怎么做的？**通过阅读 API 文档，您似乎必须自己构建对象。例如，如果我使用这样的 OGNL 表达式

```
rootObj.childObj.param1 
```

理想情况下，我希望 OGNL 服务构造 object `rootObj`，`childObj`然后是 set attribute `param1`。这正是 Struts 将 Http 请求参数传递给域对象所做的事情，因此动态对象的创建必须在某处进行。然而，在对 OGNL 表达式进行了一些试验之后，没有发生对象创建，并且我得到了空对象异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:59:46.190

OGNL 不会构造您的对象。它主要并最终用于评估表达式。创建对象是您或用于[`ObjectFactory`](http://struts.apache.org/release/2.2.x/docs/objectfactory.html)创建对象的框架的责任。

# html - 通过 https 加载样式表的问题

> ID：15452519
> 
> 赞同：17
> 
> 时间：2013-03-16T17:43:43.440
> 
> 标签：html, css

我最近向我的域应用了 SSL 证书，但是在 HTTP:// 上查看我的网站时，我遇到了一些样式问题，这些样式很好。但是，当通过 HTTPS:// 查看它时，根本不会应用任何样式。

我发现了问题所在。**我没有通过 HTTPS 加载我的第三方样式。我切换到HTTPS，所有问题都解决了。**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-16T17:46:47.873

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T17:52:58.720

如果请求的 URI 是`https`，如果您在页面上有使用该方案请求的资源（图像、样式表、JavaScript 文件等），则`http`某些浏览器可能会阻止它们，因为它们被认为是不安全的。您可以绕过每个浏览器，但您的代码中也有替代方案：

1.  用于`https`请求所有内容，或至少匹配方案。
2.  用于`//`指示方案。浏览器会将方案与请求 URI 匹配。例如：`<link rel="stylesheet" type="text/css" href="//example.com/path/to.css">`

# jquery-mobile - 旋转手机时连续更改图标编号

> ID：15452530
> 
> 赞同：0
> 
> 时间：2013-03-16T17:45:06.430
> 
> 标签：jquery-mobile

我开始为移动设备上的网页开发。

我需要一个带有 6 个大图标的应用程序，它会占用几乎所有可见空间。当移动设备水平放置时，我希望这些图标在 2 列中有 3 行。当手机垂直放置时，我希望它们有 2 行和 3 列。我不能将单个图标宽度声明为例如 100px，然后使用简单的 float:left - 我希望我的布局是流畅的。

我计划在我的页面中使用 jQuery mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:11:55.790

我为您做了一个工作示例，只需将其复制到一个空的 html 文件中即可。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        #custom-icon {
            position: relative;
            float: left;
            width: 33.333%;
            height: 50%;
        }

        .ui-content {
            padding: 0 !important;
        }
    </style>
    <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>   
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
    <script>    

        $(document).on('pageshow', '#index', function(){       
            detectOrientationMode();
            setRealContentHeight();             
        }); 

        $(window).bind('orientationchange', function() {            
            detectOrientationMode();
            setRealContentHeight();             
        });     

        function detectOrientationMode() {
            if($(window).height() > $(window).width()) {
                $('[data-role="content"] div').each(function(){
                    $(this).css({'width':'50%','height':'33.33333%'});          
                });
            } else {
                $('[data-role="content"] div').each(function(){
                    $(this).css({'width':'33.33333%','height':'50%'});          
                });             
            }
        }

        function setRealContentHeight() {
            var header = $.mobile.activePage.find("div[data-role='header']:visible");
            var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
            var content = $.mobile.activePage.find("div[data-role='content']:visible:visible");
            var viewport_height = $(window).height();

            var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
            if((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
                content_height -= (content.outerHeight() - content.height());
            } 
            $.mobile.activePage.find("div[data-role='content']").height(content_height);
        }
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content">
            <div id="custom-icon" style="background: red;">Icon 1</div>
            <div id="custom-icon" style="background: blue;">Icon 2</div>
            <div id="custom-icon" style="background: green;">Icon 3</div>
            <div id="custom-icon" style="background: yellow;">Icon 4</div>
            <div id="custom-icon" style="background: orange;">Icon 5</div>
            <div id="custom-icon" style="background: violet;">Icon 6</div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

**测试：**

安卓 4.1.1 铬

iPad iOS 6.0

# algorithm - 在锦标赛比赛列表中查找获胜者

> ID：15452532
> 
> 赞同：0
> 
> 时间：2013-03-16T17:45:08.210
> 
> 标签：algorithm

我检查了关于 stackoverflow 的重复问题。这可能很接近：[查找所需的网球比赛数量](https://stackoverflow.com/questions/5483810/find-number-of-tennis-matches-required)

这是一个亚马逊面试问题。我想知道关键路径上的 Θ(log p) 操作是否是“p”玩家的正确答案（与锦标赛障碍算法-> John Mellor-Crummey 相同）。

例如，我们有 4 名玩家 1、2、3、4。我们可以安排以下比赛：

```
 1)  Between (1 & 2)

 2)  Between (3 & 4) 

 3) organize the third match between winners of these two matches. 
```

同样，对于 5（奇数）名玩家，我们可以安排以下比赛：

```
 1) (1 & 2) and (3 & 4) 

 2) Winner from (1&2) OR winner from (3&4) against 5

 3) Winner between winner of not chosen group and winner from previous match 
```

.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:00:17.217

每场比赛只淘汰一名球员。要将**p**玩家减少到**1**玩家需要**p-1**匹配..

如果您要同时安排最大数量的比赛，并且球员一次只能参加一场比赛，并且想知道需要多少轮比赛，那就是上限（log p）。

# java - 重定向表单 jsf 托管 bean 并根据托管 bean 中的条件显示 js 警报

> ID：15452539
> 
> 赞同：2
> 
> 时间：2013-03-16T17:45:45.707
> 
> 标签：java, jsp, jsf, jakarta-ee, web-applications

好吧，在我的课堂上 Bean

```
package bean;

import entidade.Usuario;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

/**
 *
 * @author muky
 */

@ManagedBean
@ViewScoped
public class BeanUsuario {

private Usuario usuario;

public Usuario getUsuario() {
    return usuario;
}

public void setUsuario(Usuario usuario) {
    this.usuario = usuario;
}

@PostConstruct
public void BeanUsuario() {
    if (usuario == null) {
        usuario = new Usuario();
    }
}

public void verificarUsuario(String login, String senha) {
    //UsuarioJpaController usuarioJPA = new UsuarioJpaController();        
    //usuarioJPA.getEntityManager().createNamedQuery("Usuario.findByLoginSenha").setParameter("login", login).setParameter("senha", senha).getResultList();

}
} 
```

我的 XHTML

```
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:p="http://primefaces.org/ui">  
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>

        <h:form id="usuario" prependId="false">  

            <h:panelGrid columns="4" cellpadding="5" style="">  

                <h:outputLabel for="login" value="Login:" style="font-weight:bold"/>           
                <p:inputText id="login" value="#{beanUsuario.usuario.login}" /> 

                <h:outputLabel for="senha" value="Senha:" style="font-weight:bold"/>           
                <p:inputText id="senha" value="#{beanUsuario.usuario.senha}" />

                <p:commandButton value="Entrar" ajax="false" actionListener="#{beanUsuario.verificarUsuario(login, senha)}"/>  

            </h:panelGrid>  

        </h:form> 

    </h:body>
</html> 
```

我需要检查登录名和密码（senha）是否正确，如果是，则将它们重定向到其他页面，否则会出现一个警告框，拒绝访问！我开始'javaweb而不是想法：\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:58:51.800

您应该将值传递到您的`beanUsuario.verificarUsuario`方法中（如果您真的想要），如下所示：

```
#{beanUsuario.verificarUsuario(beanUsuario.usuario.login, beanUsuario.usuario.senha)}" 
```

但我认为您实际上并不需要在`verificarUsuario`方法中传递参数，因为您将输入文本的值绑定到 managedBean 属性`usuario`。所以你可以简单地编写方法：

```
public void verificarUsuario() {
//UsuarioJpaController usuarioJPA = new UsuarioJpaController();
usuarioJPA.getEntityManager().createNamedQuery("Usuario.findByLoginSenha").setParameter("login", usuario.getLogin()).setParameter("senha", usuario.getSenha()).getResultList();

  if(canLogin){ //canLogin is the condition to check whether can login or not
      ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
      ec.redirect(ec.getRequestContextPath() + "/home.xhtml");
  }
  else{
       showAlert = true;
  }
} 
```

您只需在方法中调用`usuario.getLogin()`and即可获取值。`usuario.getSenha()`您将`showAlert`变量放在 managedBean 中，然后在 jsf 页面中，您可以`<h:outputScript>`像这样使用标签：

```
 <h:outputScript rendered="#{beanUsuario.showAlert}">
   alert("Invalid login");
</h:outputScript> 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T12:06:44.800

如果你在 xhtml 页面中有一个对话框，如果你想显示只使用的对话框，那就太好了。

RequestContext requestContext = RequestContext.getCurrentInstance();
requestContext.execute(“dialog.show()”);

& 如果你想重定向然后使用 Facescontext redirect("URL") 方法。

希望它会帮助你。

# php - PHP ↔ JavaScript 通信：常量 VS 字符串

> ID：15452553
> 
> 赞同：1
> 
> 时间：2013-03-16T17:46:51.123
> 
> 标签：php, javascript

我正在开发一个大量使用 AJAX 的 Web 应用程序。服务器通常通过一个数组来回答，以便*连接*响应的不同部分。

我想知道在以下两个中处理这些数组中的键的最佳解决方案是什么（未显示 JSON 编码和解码）：

### 字符串

该解决方案易于阅读，尤其是在 JavaScript 中，但非常脆弱且难以维护。

*PHP*：

```
<?php
return array(
    'key_name_1' => 'foo',
    'key_name_2' => 'bar'
);
?> 
```

*JavaScript*：

```
var result = ajax(...);
alert(result.key_name_1); 
```

### 常数

这是一个可靠的解决方案，它允许使用短键和数字键，但它很重且难以阅读（在我的情况下，使用反射来自动生成 JavaScript 常量不是可接受的解决方案，并且无论如何也不能解决所有缺点） .

*PHP*：

```
<?php
class Answer
{
    const CONSTANT_1 = 1;
    const CONSTANT_2 = 2;
}

return array(
    Answer::CONSTANT_1 => 'foo',
    Answer::CONSTANT_2 => 'bar'
);
?> 
```

*JavaScript*：

```
Answer.CONSTANT_1 = <?php echo Answer::CONSTANT_1; ?>
Answer.CONSTANT_2 = <?php echo Answer::CONSTANT_2; ?>

var result = ajax(...);
alert(result[Answer.CONSTANT_1]); 
```

* * *

在你看来，最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:12:22.117

> 我认为字符串解决方案很脆弱，因为键名的任何更改也必须在使用它们的代码中执行。

这个结论是不正确的，会导致代码不可维护。

考虑以下 PHP 数据结构：

```
array(
 MyClass::FIELD1 => "my field1 value",
 MyClass::FIELD2 => "my field2",
 MyClass::FIELD3 => "field 3 is awesome",
);

class MyClass {
  const FIELD1 = "field1";
  const FIELD2 = "field2";
  const FIELD3 = "field3";
} 
```

假设我们想使用一个新字段来代替`field1`（如建议的用例）——我们将其命名为`newfield`：

```
class MyClass {
  const FIELD1 = "newfield";
  ....
} 
```

现在代码处于不一致的状态。*变量的名称不再与其值有任何关联。*`FIELD1`常数本质上是关于它所代表的领域的谎言*。*

想象一个新程序员一年后检查这段代码。她知道`newfield`存在并想要访问它。`result.newfield`但是，她必须输入，而不是简单地输入`result[Answer.FIELD1]`。每次她想访问时，`newfield`她都有记住和应用这个映射的精神开销。但这是一个包含数百个字段的大型应用程序，并且大多数都以这种方式被误导。这是脆弱且不可维护的代码。

常量只能用于本质上是*常量的值。*典型的例子是存储像 pi 这样的数学常数：

```
class MyMathClass {
  const PI = 3.141592;
} 
```

常量是可用于维护易失数据结构（字段名称定期更改）的最糟糕的编程工具之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:06:35.280

一旦你将它回显出 JavaScript，它无论如何都不会是一个常量。我个人会使用字符串，如果它会让你的代码更具可读性。为什么这会使它变得脆弱且难以维护？如果您需要它既是常量又是可读的，您总是可以定义一个常量字符串。如果没有更多信息，很难判断以数字或单词作为键是否会更好地为您服务。

# npm - Can I download an NPM package without the npm tool?

> ID：15452557
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:47:23.033
> 
> 标签：npm

I want to download [https://npmjs.org/package/ripple-lib](https://npmjs.org/package/ripple-lib) for inspection. Most other systems I have dealt with provide a download link as well as the `command install package` syntax. The npm site does not seem to provide such a download link. Does anyone know another way?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T11:02:08.477

从页面上链接的 github 存储库下载它。

# c# - Error in SQL syntax;check the manual that corredponds to your MySQL server

> ID：15452558
> 
> 赞同：1
> 
> 时间：2013-03-16T17:47:30.323
> 
> 标签：c#, mysql, mysql-workbench

I am trying to insert a record to a mysql database using c# but I always saw this error message:

> You have error in your SQL syntax;check the manual that corredponds to your MySQL server version for the right syntax to use near 'Order(idOrder, Quantity, Date, Menu_idMenu)VALUES(10002, '1', '3/17/2013 12:00' at line 1

this is the code:

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    if (!row.IsNewRow)
     {
           com.CommandText = "INSERT INTO Order (idOrder, Quantity, Date, Menu_idMenu) VALUES (" + 10002 + ", '" +row.Cells[0].Value.ToString() + "', '"+DateTime.Today.ToString()+"', '" + row.Cells[1].Value.ToString() + "')";
           int insert = com.ExecuteNonQuery();
     }
} 
```

what does it mean?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:50:14.390

You have reserved keywords in your query, `Order`. Quote it and be happy.

```
com.CommandText = "INSERT INTO `Order` (idOrder, Quantity, Date, Menu_idMenu) VALUES (" + 10002 + ", '" +row.Cells[0].Value.ToString() + "', '"+DateTime.Today.ToString()+"', '" + row.Cells[1].Value.ToString() + "')"; 
```

Also, it is good practice to use parameters.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:52:35.710

`Date`并且`Order`是MySQL 上的*[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)*。

在之间使用它们`''`

```
com.CommandText = "INSERT INTO `Order` (idOrder, Quantity, Date, Menu_idMenu) VALUES (" + 10002 + ", '" +row.Cells[0].Value.ToString() + "', '"+DateTime.Today.ToString()+"', '" + row.Cells[1].Value.ToString() + "')"; 
```

并且**始终**使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*。这种代码对*[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击开放。

实际上，您可以`Date`不带引号使用。

> MySQL 允许将某些关键字用作不带引号的标识符，因为许多人以前使用过它们。

因为，我建议你使用*参数化查询*，在这里你可以如何在你的代码中使用它；

```
com.CommandText = "INSERT INTO `Order` (idOrder, Quantity, Date, Menu_idMenu) VALUES (@idOrder, @Quantity, @Date, @Menu_idMenu)";

com.Parameters.AddWithValue("@idOrder", "10002");
com.Parameters.AddWithValue("@Quantity", row.Cells[0].Value.ToString());
com.Parameters.AddWithValue("@Date", DateTime.Today.ToString());
com.Parameters.AddWithValue("@Menu_idMenu", row.Cells[1].Value.ToString()); 
```

# file - FileChooser 方法 showSaveDialog() 不保存文件 javafx？

> ID：15452560
> 
> 赞同：0
> 
> 时间：2013-03-16T17:47:41.903
> 
> 标签：file, save, javafx, savefiledialog, filechooser

showSaveDialog() 方法是如何工作的？我知道它返回选定的文件，但为什么它不保存文件？

以下是我在网上找到的代码摘录。

```
buttonSave.setOnAction(new EventHandler<ActionEvent>() {

      @Override
      public void handle(ActionEvent event) {
          FileChooser fileChooser = new FileChooser();

          //Set extension filter
          FileChooser.ExtensionFilter extFilter = new FileChooser.ExtensionFilter("TXT files (*.txt)", "*.txt");
          fileChooser.getExtensionFilters().add(extFilter);

          //Show save file dialog
          File file = fileChooser.showSaveDialog(primaryStage);
          System.out.println("file is " + file.getName());

      }
  }); 
```

另外我如何设置实际保存的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:59:49.520

文件选择器应该从哪里知道要写入文件的内容。您需要在返回的文件（例如 FileInputStream）上打开一个流并自己写出信息。

# jquery - how to get html table row data into a dialog box to edit

> ID：15452561
> 
> 赞同：0
> 
> 时间：2013-03-16T17:47:51.863
> 
> 标签：jquery, spring, spring-mvc, dialog

i have a users.jsp page which contains the html table so when i click on edit button a pop window should be opened with data so the form is in another file editDialog.jsp which i want to submit... so i tried many ways but i couldnt find the solution...

```
<div>
<table cellpadding="0" cellspacing="0" border="0"
                class="display example" id="example1">
                <thead>
                    <tr>
                        <th>Login</th>
                        <th>Status</th>
                        <th>Created</th>
                        <th>Last Modified</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach items="${userList}" var="users" varStatus="loopStatus">
                        <tr id="${users.user_id}">
                            <td>${users.login_name}</td>
                            <td>${users.account_status eq 1 ? "Enable" : "Disable"}</td>
                            <td>${users.created_at}, ${users.created_by}</td>
                            <td>${users.updated_at}, ${users.updated_by}</td>
                            <td><input class="button" type="button" name="updateRows" value='Edit' onclick="editUserData(${users.user_id})" /></td>

                        </tr>
                    </c:forEach>
                </tbody>
            </table>
</div> 
```

editDialog.jsp

so the dialog should populate only loginId and account status and userId should be hidden and account_status is the editable value... i stuck up here need help....

```
<div id="editDialog" title="Edit user" style="display: none">
    <form:form action="users.do" method="POST" commandName="users"
        id="editForm">
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Name:</td>
                    <td id="loginId"><form:input path="login_name" /></td>
                </tr>
                <tr class="hide">
                    <td>UserId:</td>
                    <td id="userId"><form:input path="user_id" readonly="true" />
                    </td>
                </tr>
                <tr>
                    <td>Status:</td>
                    <td id="statusId"><form:radiobutton path="account_status"
                            value="1" /> Enable <form:radiobutton path="account_status"
                            value="0" /> Disable</td>
                </tr>
                <tr>
                    <td>CsId:</td>
                    <td id="csId"><form:input path="cs_id" readonly="true" /></td>
                </tr>
                <tr class="hide">
                    <td>Created_at:</td>
                    <td id="createdAtId"><form:input path="created_at"
                            readonly="true" /></td>
                </tr>
                <tr class="hide">
                    <td>Created_by:</td>
                    <td id="createdById"><form:input path="created_by"
                            readonly="true" /></td>
                </tr>
                <tr class="hide">
                    <td>Updated_at:</td>
                    <td id="updatedAtId"><form:input path="updated_at"
                            readonly="true" /></td>
                </tr>
                <tr class="hide">
                    <td>Updated_by:</td>
                    <td id="updatedById"><form:input path="updated_by"
                            readonly="true" /></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" name="action" value="Edit">
                        <input id="addCancel" type="button" value="Cancel"></td>
                </tr>
            </tbody>
        </table>
    </form:form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:32:59.783

您可以通过将一个表单隐藏在 div 中来做到这一点，每当用户单击编辑按钮时，将必要的信息复制到表单元素，然后将其显示为对话框并允许用户保存/取消它。保存时将表单数据作为 Ajax 请求提交。

# c# - 在 InsertOnSubmit() 上使用 Linq asp.net c# 在两个不同的表中插入数据

> ID：15452565
> 
> 赞同：0
> 
> 时间：2013-03-16T17:48:24.517
> 
> 标签：c#, asp.net, mysql, database-design, linq-to-sql

我正在使用 asp.net c# 和 Mysql 进行在线购物项目。我正在使用 Devart Linqconnect (LinqtoMysql)。我在 mysql 客户和客户地址中有两个表：

**客户表**
CustomerID Int
Customerhone varchar(20);
客户密码 Varchar(20);
电子邮件 varchar(20)
名字 char(50)姓氏(
50)
用户名​​ varshar(50)

**Customer_Addresses**
Customer_address_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
Customer_ID INT NOT NULL,
address1 CHAR(250),
address2 CHAR(250),
city CHAR(20),
state CHAR(20), pincode VARCHAR(20),
PRIMARY KEY(Customer_address_ID),
FOREIGN KEY (Customer_ID) REFERENCES customers(Customer_ID)

当我在使用 LINQ to mysql 注册客户时编写此代码时：

```
 using (ShoppingDataContext data = new ShoppingDataContext())
        {
            Customer NewCustomer = new Customer();
            CustomerAddress newaddress = new CustomerAddress();
            newaddress.CustomerID = NewCustomer.CustomerID;
            NewCustomer.CustomerFirstname = TextBoxFirstName.Text;
            NewCustomer.CustomerLastname = TextBoxLastname.Text;
            NewCustomer.CustomerEmail = TextBoxEmail.Text;
            NewCustomer.Username = TextBoxusername.Text;
            NewCustomer.CustomerPassword = TextBoxPassword.Text;
            newaddress.Address1 = TextBoxAddress1.Text;
            newaddress.Address2 = TextBoxAddress2.Text;
            newaddress.City = TextBoxCity.Text;
            newaddress.State = TextBoxState.Text;
            newaddress.Pincode = TextBoxPincode.Text;
            System.Web.Security.Membership.CreateUser(TextBoxusername.Text, TextBoxPassword.Text);
            data.Customers.InsertOnSubmit(NewCustomer);
            PanelRegister.Visible = false;
            ConfimPanel.Visible = true;

        } 
```

此代码是否可以将数据插入到两个表中。请帮忙。customer_address表是否能够根据customerId作为外键检测输入的客户地址是customer表的..

我正在使用 ajax 工具包的模态弹出面板并在面板中添加注册和登录表的另一件事..

我的注册面板： ![在此处输入图像描述](../Images/6ba66270772c9be1235c9ecb793e3556.png)

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:54:59.110

看来您必须先插入一条记录`Customer Table`，然后再插入`Customer_Addresses`以使数据库引擎能够找到外键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:02:45.577

如果您查看自己代码中的一行，

```
data.Customers.InsertOnSubmit(NewCustomer); 
```

这告诉您在单个表上调用`InsertOnSubmit`and的故事。`InsertAllOnSubmit`我自己没有尝试过，但是您可以解决并制定自己的方法来为您执行此操作。

尽管正如 Pablo Lemurr 所提到的，您需要先添加客户记录，然后再添加地址记录，因为它引用了外键。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:17:03.043

我强烈建议您像这样组织代码：

```
 using (ShoppingDataContext data = new ShoppingDataContext())
 {
     Customer newCustomer = new Customer()
     {
         CustomerFirstname = TextBoxFirstName.Text,
         CustomerLastname = TextBoxLastname.Text,
         CustomerEmail = TextBoxEmail.Text,
         Username = TextBoxusername.Text,
         CustomerPassword = TextBoxPassword.Text
     };

     //now I'd like to be proven wrong here, but I believe you need to insert
     //and submit at this point
     data.Customers.InsertOnSubmit(newCustomer);
     data.SubmitChanges();

     CustomerAddress newaddress = new CustomerAddress()
     {
          CustomerID = NewCustomer.CustomerID,
          Address1 = TextBoxAddress1.Text,
          Address2 = TextBoxAddress2.Text,
          City = TextBoxCity.Text,
          State = TextBoxState.Text,
          Pincode = TextBoxPincode.Text,
     };
     //add new address to your customer and save
     newCustomer.CustomerAddresses.Add(newAddress);
     //it has been a while since I used linq2sql so you may need one of these:
     //newCustomer.CustomerAddresses.InsertOnSubmit(newAddress);
     //newCustomer.CustomerAddresses.Attach(newAddress);
     //basically use intellisense to help you figure out the right one, you might
     //have some trial and error here
     data.SubmitChanges();

     System.Web.Security.Membership.CreateUser(TextBoxusername.Text, TextBoxPassword.Text);

     PanelRegister.Visible = false;
     ConfimPanel.Visible = true;

  } 
```

另外，请注意 insert 和 db.SubmitChanges() 移动到的位置。现在我不确定您是否可以使用一个 SubmitChanges() 一次性完成此操作，或者您是否需要如图所示的两个。我很想你提供有关这方面的最新信息。

您可以在此处查看一个简单的插入示例：

[http://msdn.microsoft.com/en-us/library/bb386941.aspx](http://msdn.microsoft.com/en-us/library/bb386941.aspx)

编辑：您可能希望将这一切包装在事务范围中，以便它作为一个单元成功或失败

```
using(TransactionScope scope = new TransactionScope())
{
  using(ShoppingDataContext data = new ShoppingDataContext())
  {
    //the rest of your code
  }
} 
```

只是一个想法。

# ruby-on-rails-3 - Error using authlogic for login: :Can't mass-assign protected attributes:

> ID：15452567
> 
> 赞同：0
> 
> 时间：2013-03-16T17:48:29.920
> 
> 标签：ruby-on-rails-3, authentication, authlogic

I 'm using authlogic for authentication and using [this](http://www.logansbailey.com/2010/10/06/how-to-setup-authlogic-in-rails-3/) tutorial. I did refer to [rubyDocs](http://guides.rubyonrails.org/security.html#mass-assignment) also. If I understand it correctly that attr_protected method ensures list of attributes will not be accessible for mass-assignment. And I have my model attributes as protected. I also tried changing the whitelist flag in config/application.rb to false..which didnt make any difference.

I think the problem might be because of no attribute called password & password_confirmation in user model. This is what the tutorial says

> We changed the field name from :crypted_password to :password. Authlogic will map the :password field to :crypted_password after hashing it. We also changed the field type from f.text_field to f.password_field, this will create your standard password input field instead of a plain text input field. We have also added a :password_confirmation field. All of the logic to support these fields is built into authlogic.

Is this still true? Any suggestions on how to fix this issue?

Rails: 3.2.12

Ruby: 1..9.3

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#create

Can't mass-assign protected attributes: password, password_confirmation

{"utf8"=>"✓",
 "authenticity_token"=>"WUw09PvSlIxLUBFFsi1hiK6v0Y3nn7wqkjH3seCkU34=",
 "user"=>{"username"=>"test",
 "email"=>"test",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "commit"=>"Create User"} 
```

Following is my model & controller

**MODEL**

```
class User < ActiveRecord::Base
  attr_accessible :crypted_password, :email, :password_salt, :persistence_token, :username
end 
```

**CONTROLLER**

```
def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

FORM.html

```
div class="field">
    <%= f.label :username %><br />
    <%= f.text_field :username %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </div>
  <div class="field">
      <%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation %>
    </div> 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:37:55.247

正如您所说，您的属性似乎受到保护，因此无法批量分配。通过添加到`attr_accessible`列表使它们可以访问

```
class User < ActiveRecord::Base
  attr_accessible :crypted_password, :email, :password_salt, :persistence_token, :username, :password, :password_confirmation
end 
```

注意：您可能还想从该列表中删除敏感数据，例如`:crypted_password`或`:password_salt`

```
class User < ActiveRecord::Base
  attr_accessible :email, :persistence_token, :username, :password, :password_confirmation
end 
```

# android - Can a View be focused and invisible at the same time?

> ID：15452568
> 
> 赞同：5
> 
> 时间：2013-03-16T17:48:53.310
> 
> 标签：android, android-edittext

I want to have an `EditText` in focus so it is edited, but also invisible. In other words, all the user will see is the keyboard.

Is that possible?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T17:51:15.310

AFAIK，一个不可见的 Edittext 不能有一个视图（我从未尝试过）所以你的解决方法是

**您可以为 edittext 设置透明背景来实现此目的。**

```
youredittext.setBackgroundResource(android.R.color.transparent); 
```

或者您可以像这样直接在 XML 中设置属性

```
android:background="@null" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-01T04:28:17.617

我知道我可能会迟到，但最近我不得不面对类似的问题。

解决方案也可以是这个（`styles.xml`在布局中或布局中使用）：

```
android:layout_width = 0dp
android:layout_height = 0dp 
```

这也将使您`EditText`仍然可以集中注意力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-08T04:55:16.297

我的两种替代方法：

**方法一：**淡出

```
view.animate().alpha(0.0f).setDuration(0); 
```

并在你想要它的时候淡入淡出

```
view.animate().alpha(1.0f).setDuration(0); 
```

将持续时间设置为 0 可确保它立即发生。

**方法二：**设置屏幕外的视图

```
LayoutParams params = view.getLayoutParameters();
int offset = -80; // offset from the screen border, choose your own
params.setMargins(0, 0, offset, 0); // left, top, right, bottom
view.setLayoutParams(params); 
```

做

```
params.setMargins(0, 0, 0, 0); // left, top, right, bottom
view.setLayoutParams(params); 
```

当你想要它回来的时候。

# php - Resized images not saving upon file upload

> ID：15452570
> 
> 赞同：0
> 
> 时间：2013-03-16T17:49:22.617
> 
> 标签：php, gd

I'm trying to create a system which allows users to upload an image, this image is then saved to an /images folder along with a resized thumbnail version.

As an example, a user would visit the upload page, select their file and hit the upload button. The image is then saved and a function is then called to resize the image and save the resized image as th-filename.ext along with filename.ext.

At the moment, I've managed to get the file uploads to work although I can't get the resizing and saving to work. I can't seem to locate the issue as resizing and saving images using PHP is newish to me although I imagine it's nothing to do with the SimpleImage.php. Any help would be greatly appreciated as I'm not getting anywhere :S.

My upload page form:

```
<form action="assets/includes/upload.php" method="post" enctype="multipart/form-data"> <input type="file" name="file" id="file"><br><input type="submit" name="submit" value="Submit" class="btn btn-primary"></form> 
```

My uploadImage function (reduced down):

```
function imageUpload() {
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("../../images/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      $file = $_FILES["file"]["name"];
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../../images/" . $_FILES["file"]["name"]);
          include('SimpleImage.php');
          $image = new SimpleImage();
          $image->load($file);
          $image->resizeToWidth(150);
          $image->save("th-" . $file);
      }
    }
  }
else
  {
  echo "Invalid file";
  }

  header("Location: ../../album.php"); 
  die(""); 
} 
```

As well as the SimpleImage.php:

```
 <?
class SimpleImage {

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {
      $new_image = imagecreatetruecolor($width, $height);
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:21:54.360

尝试使用单个脚本上传、调整大小和保存相同的图像会带来各种问题，尤其是图像文件已经或仍在由应用程序处理时。因此，您至少需要将函数分开，并确保一个函数在让脚本的另一部分再次打开它之前释放了有问题的文件，您需要创建一个时间间隔。

现在时间间隔只有在文件大小最小且不消耗服务器资源的情况下才合适。因此，要确保有足够的时间，最好的方法是实际分离功能并将它们放在单独的页面上。

这些页面可以通过使用脚本重定向链接自动加载下一个页面，或者您可以通过在页面上显示带有一个按钮供用户单击提交的预览来使其看起来有意义。

# linux - Can I use Linux kernel image even after this build failure

> ID：15452573
> 
> 赞同：2
> 
> 时间：2013-03-16T17:49:31.670
> 
> 标签：linux, build, linux-kernel

I am new to Linux Kernel and trying to build my first Kernel image, I am building from 3.4.28 Linux Kernel on i686 Architecture for 32 bit.

After one and half hours of build process, I got the following errors

```
BUILD   arcarch/x86/boot/compressedh/x86/boot/bzImage

Setup is 16540 bytes (padded to 16896 bytes).
System is 4667 kB
CRC c2376a1f
Kernel: arch/x86/boot/bzImage is ready  (#1)
Building modules, stage 2.
MODPOST 3508 modules
ERROR: "__sync_fetch_and_and_4" [drivers/staging/line6/line6usb.ko] undefined!
ERROR: "__sync_fetch_and_or_4" [drivers/staging/line6/line6usb.ko] undefined!
WARNING: modpost: Found 28 section mismatch(es).
To see full details build your kernel with:
'make CONFIG_DEBUG_SECTION_MISMATCH=y'
make[1]: *** [__modpost] Error 1
make: *** [modules] Error 2 
```

But if I go and look in the "arch/x86/boot/compressed" directory, I find vmlinux.bin image with ELF header.

I wanted to know can I use this vmlinux binary for my purpose or is a complete successful build required to make this binary fully functional.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:58:10.497

只要不依赖内核模块`line6usb.ko`或在它之后构建的任何模块，你就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:49:24.427

我的回答也和 JimR 一样；内核模块`line6usb.ko`并不是那么重要的模块。首先通过先[运行](http://irclogs.ubuntu.com/2012/02/11/%23ubuntu-arm.txt) `mrproper`然后在之后禁用此模块`make menuconfig`。在`menuconfig`驱动程序暂存中找到驱动程序并将其禁用。稍后再次交叉编译内核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T11:04:00.557

在内核配置中禁用模块。

通过这样选择

设备驱动程序 - -

```
 staging drivers 
```

# android - 如何在 Android 4.0 上启动时直接（无需询问）启动应用程序

> ID：15452580
> 
> 赞同：0
> 
> 时间：2013-03-16T17:50:34.697
> 
> 标签：android

我想在 Android 4.0 中启动我的应用程序。为此，我编写了一些代码，这些代码与@Ahmad 的代码完全相同（在答案中）。**但是，尽管我一如既往地**选择我的应用程序，但当平板电脑打开时，它会询问“您喜欢什么？” （Android 的默认启动器或我的应用程序）。我不希望它问那个问题，它必须自动启动我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:54:42.023

使用`BOOT_COMPLETED`意图。

> 广播动作：在系统完成启动后广播一次。它可用于执行特定于应用程序的初始化，例如安装警报。您必须持有该 `RECEIVE_BOOT_COMPLETED`权限才能接收此广播。

在您的清单中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

设置一个`Broadcastreceiver`：

```
<receiver android:name="com.example.MyBroadcastReceiver">  
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver> 
```

这就是你的`BroadcastReceiver`样子：

```
 public class MyBroadcastreceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            Intent i = new Intent(context, MyActivity.class);
            startActivity(i);
        }
    } 
```

# java - MVP：主持人辛格尔顿

> ID：15452583
> 
> 赞同：1
> 
> 时间：2013-03-16T17:50:56.920
> 
> 标签：java, gwt, history, mvp

我在我的 ajax-web-application(GWT) 中使用历史管理。当用户按下后退或前进按钮时，将显示另一个视图。每个视图只会创建一次。我的问题是如何处理演示者。

我认为有两种方法：
1.视图保存所有数据，并且在每次历史更改事件之后，将创建一个新的演示者。当模型需要一些数据时，演示者会向视图请求数据并将它们发送给模型。

2\. Presenter 保存所有数据，每次历史更改事件后，Presenter 将被重新用于视图。因此，视图只有 ui 小部件，用户所做的所有更改都将重定向到演示者。

我更喜欢第二种方式，但我不确定这是否与 mvp 兼容。你给我推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:30:59.350

还有第三种方式，即presenter和view都不保存数据。该视图仅包含 ui 小部件，并且是可重用的单例。演示者包含逻辑和本地状态，并且每次调用时都会创建演示者。通过在每次调用它时创建它，可以确保本地状态是新鲜的。

演示者需要的外部数据可以作为演示者启动的一部分从服务器获取或查询，但如果您需要在演示者之间传递数据，则可能无法正常工作。因此，将数据存储在由应用程序维护的全局对象中，并在调用演示者时将所需的特定对象通过演示者的构造函数传递给演示者。通过从演示者和视图中删除数据，您可以使其更简单，因为演示者/视图不必管理。如果不存在，此代码还将从服务器获取数据。当用户通过编辑将加载特定演示者/视图的 url 进入页面时，它也更加健壮。通过将数据管理移出您不需要的演示者/视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:08:58.277

如果您确保演示者是轻量级的，即或多或少没有状态（我的解释），那就没那么重要了。

我宁愿将数据状态加载/保存的代码委托给从演示者调用的另一个类，并使演示者成为单例。

# java - 当用户单击 GUI 中的按钮时，我想打开图像

> ID：15452589
> 
> 赞同：0
> 
> 时间：2013-03-16T17:51:30.350
> 
> 标签：java, image, swing, user-interface, jbutton

单击按钮后，我试图在我的框架内打开图像，到目前为止，我已将图像放在按钮内的 JLabel 中，我希望它在单击后打开。但它立即显示出来。关于如何设置它以便在单击“剪刀”按钮后打开图像的任何想法？

```
 btnPlaySci = new JButton ("Scissors!");
    btnPlaySci.setBounds(180, 40, 110, 20);
    btnPlaySci.addActionListener(new PlaySciHandler());
    panel.add (btnPlaySci);
    btnPlaySci.setForeground(Color.MAGENTA);

    //below is my image, and above is the button I want it to open to

    ImageIcon rock1 = new ImageIcon("rock.jpg");
    JLabel picture = new JLabel(rock1);
    picture.setBounds(60, 200, 400, 400);
    panel.add(picture); 
```

编辑后的代码粘贴在评论中

```
class PlaySciHandler implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            String computerRand = sps.computerChoice(); 
            txtComputerRand.setText(computerRand); 
            String result = sps.play(Sps.SCISSORS); 
            txtResult.setText(result); 
            ImageIcon rock1 = new ImageIcon("rock.jpg"); 
            JLabel picture = new JLabel(rock1); 
            picture.setBounds(60, 200, 400, 400); panel.add(picture); 
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:59:23.320

我认为您想在单击按钮时将 JLabel（包含图像）添加到面板中。

您必须编写下面的类，当用户单击按钮“btnPlaySci”时该类将处理该事件。

```
btnPlaySci.addActionListener(new PlaySciHandler(panel)); //replace your addActionListener line with this code.

import java.awt.event.*;
class PlaySciHandler implements ActionListener 
{
    JPanel panel;
    PlaySciHandler(JPanel p)
    {
         panel = p;
    }
    public void actionPerformed(ActionEvent ae)   
    {
      ImageIcon rock1 = new ImageIcon("rock.jpg");
      JLabel picture = new JLabel(rock1);
      picture.setBounds(60, 200, 400, 400);
      panel.add(picture);   
    } 
} 
```

# java - 如何使用 Graph API 将图像上传到 Facebook

> ID：15452590
> 
> 赞同：1
> 
> 时间：2013-03-16T17:51:33.460
> 
> 标签：java, facebook-graph-api

任何人都可以通过建议使用 Facebook Graph API 将图像上传到 Java 中的 Facebook 的方式来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:06:51.047

我建议你使用[restfb](http://restfb.com/)来做到这一点。它应该大大简化您的学习曲线。

这里有一个使用 restfb 将图像上传到 facebook 的示例： [facebook: Post photo to timeline with restfb](https://stackoverflow.com/questions/13699834/facebook-post-photo-to-timeline-with-restfb)

# delphi - 从另一个类访问公共字段因访问冲突而失败

> ID：15452600
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:52:50.080
> 
> 标签：delphi, class, delphi-7, access-violation

我有多个文件。在`main.pas`文件中，我将主窗体中存在的 TImage 实例传递给显示类，然后将其设置为其类的属性。

该图像可以在类内毫无问题地使用，但我在任何其他类中都有访问冲突问题，无论我做什么，它都会尝试使用此属性。

以下是一些代码片段来演示该问题：

## 主文件

```
unit main;

interface

uses

  snake, display,

  ExtCtrls, Classes, Controls, Windows, Messages, SysUtils, Variants, Graphics, Forms,
  Dialogs, StdCtrls;

type
  TfrmGameScreen = class(TForm)
    Image: TImage;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmGameScreen: TfrmGameScreen;
  snake: TSnake;
  display: TDisplay;

implementation

{$R *.dfm}

procedure TfrmGameScreen.FormCreate(Sender: TObject);
begin
  DoubleBuffered := True;
  display := TDisplay.create(Image);
end;

end. 
```

* * *

## 显示.pas

```
unit display;

interface

uses
   ExtCtrls, Graphics;

type

  TDisplay = class
  public
    image: TImage;
    constructor create(img: TImage);
  end;

  TDraw = class(TDisplay)
  public
     procedure rectangle(x1, y1, x2, y2: integer);
  end;

implementation

constructor TDisplay.create(img: TImage);
begin
  image := img;
  image.Canvas.Rectangle(100, 100, 150, 150);

end;

procedure TDraw.rectangle(x1, y1, x2, y2: integer);
begin
 // image.canvas.rectangle(x1, y1, x2, y2); THIS IS WHERE THE ACCESS VIOLATION ARISES

end;

end. 
```

蛇.pas

```
unit snake;

interface

uses display, Dialogs, sysUtils, Graphics, ExtCtrls;

type
  TBlock = record
    width, height: integer;
  end;

  TCoordinate = record
    x, y: integer;
  end;

  TVector = TCoordinate;

  TSnake = class
  public
    position: TCoordinate;
    direction: integer;
    block: TBlock;
    velocity: TVector;
    constructor create(initialPosition: TCoordinate);
    procedure draws(x, y: integer);
    procedure move(x, y: integer);
  end;

  var
    display: TDisplay;
    draw: TDraw;
implementation

constructor TSnake.create(initialPosition: TCoordinate);
begin
  position.x := initialPosition.x;
  position.y := initialPosition.y;

  velocity.x := 3;
  velocity.y := 3;

  block.height := 50;
  block.width := 50;

end;

procedure TSnake.draws(x, y: integer);
begin
  display.clear;
  draw.rectangle(1, 2, 3, 4);
  //image.canvas.Rectangle(100, 100, 150, 150);
  //display.canvas.rectangle(x, y, x + block.width, y + block.height);
end;

procedure TSnake.move(x, y: integer);
begin
  draws(x, y);

end;

end. 
```

![这是我得到的访问冲突错误](../Images/c0f4e4d4d37a69278b59b707f602b5b3.png)

我在另一个文件中使用 TDraw 对象。

我的目标是在所有其他单元中使用 main.pas 文件中的 TImage 实例。它在图像设置的实例的类中运行良好，但是任何其他引用该实例的类在执行时都会引发错误。

我的问题是：这怎么可能？有什么办法可以克服这个吗？有更好的解决方案吗？

我将不胜感激提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:45:00.413

全局变量

```
draw: TDraw; 
```

在 snake.pas 中永远不会创建。您必须先创建它，然后才能调用它的方法。

# mysql - 迁移到存储过程时出现 MySQL“命令不同步”

> ID：15452602
> 
> 赞同：0
> 
> 时间：2013-03-16T17:52:58.187
> 
> 标签：mysql

我有一些工作的 php/mysql，我现在正在迁移到存储过程。

一旦调用任何存储过程，后续的 CALL 和 SELECT 就会失败，并显示“命令不同步；您现在无法运行此命令”。

不是 SELECT 的现有存储过程可以正常工作。

```
function db_all ($query)
{
    log_sql_read ($query);
    $result = mysql_query ($query, db_connection ());

    if (!$result)
    {
        log_sql_error ($query);
        return Array ();
    }

    $rows = Array ();

    while ($row = mysql_fetch_assoc ($result))
        array_push ($rows, $row);

    mysql_free_result ($result);

    return $rows;
}

db_all ("SELECT 1 as `test`");
db_all ("SELECT 2 as `test`");
db_all ("CALL `$db`.`select_info`($id);"); // RETURNS CORRECT DATA
db_all ("CALL `$db`.`select_info`($id);"); // ERROR HERE
db_all ("SELECT 5 as `test`");             // ERROR HERE 
```

由于未调用`mysql_free_result`，此错误在其他地方进行了解释，但我**确实**调用了它。那么有什么问题呢？

我看到了一些引用 mysqli 的解决方案。我现在需要一个*非 mysqli*解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:07:50.090

问题是在执行时，存储过程会给你两个结果集。一个带有实际结果集，另一个带有执行状态。并且您需要在进行另一个返回结果集的调用之前消耗两者。

`mysqli_*`您可以利用`mysqli_multi_query`, `mysqli_store_result`,`mysqli_next_result`来实现这一点。`mysqli`[你可以在这里](https://stackoverflow.com/a/7691133/1920232)看到如何做到这一点。

在您的情况下，`mysql_*`您可以在完成获取结果后关闭连接。

```
function db_all ($query)
{
    $link = db_connection();     //Open connection

    log_sql_read ($query);
    $result = mysql_query ($query, $link);

    if (!$result)
    {
        log_sql_error ($query);
        return Array ();
    }

    $rows = Array ();

    while ($row = mysql_fetch_assoc ($result))
        array_push ($rows, $row);

    mysql_free_result ($result);
    mysql_close($link);          //Close the connection
    return $rows;
} 
```

# javascript - AngularJS 通过 $resource 对复杂对象进行数据绑定

> ID：15452604
> 
> 赞同：2
> 
> 时间：2013-03-16T17:52:59.763
> 
> 标签：javascript, angularjs

我有一个返回订单的宁静服务。此订单有一个项目列表。我正在制作屏幕，您可以在其中编辑订单中的特定项目。所以我需要先获得项目列表，然后才能找到并显示特定项目的信息。我正在这样解决它：

```
$scope.order = orderResource.get({id:$routeParams.orderId}, function(order) {
    $scope.item = _.findWhere(order.items, {id:$routeParams.itemId});
}); 
```

绑定看起来像这样：

```
<input id="itemName" type="text" ng-model="item.name"> 
```

我的问题是：这是解决这个问题的最好方法吗？（我不想使用有解析的路线。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T00:28:54.683

是的，您应该创建一个将返回特定项目的端点。一个示例 GET 端点可能是

`/orders/:id/items/:itemId`

```
$scope.item = orderResource.get({id:$routeParams.orderId, itemId: $routeParams.itemId}); 
```

如果那不可能，那么您正在做的事情似乎很好。

# sql - 从嵌套查询中获取拖列

> ID：15452605
> 
> 赞同：1
> 
> 时间：2013-03-16T17:53:05.850
> 
> 标签：sql, oracle

使用以下代码，我得到最大值

```
select
  max(e.maxNum)
from (select
    companyno as cn,
    count(employeeNo) as maxNum
      from works
      group by companyNo) e; 
```

但我也需要像（companyno，e.maxNum）这样的“companyNo”

我试过了

```
select
  e.cn,
  max(e.maxNum)
from (select
    companyno as cn,
    count(employeeNo) as maxNum
      from works
      group by companyNo) e; 
```

但我收到错误

如何解决这个问题？

表格格式

```
works(employeeNo, companyNo, salary)
company(companyNo, companyName, city) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:58:00.997

```
select 
  max(CompanyNo) keep (dense_rank first order by count(employeeNo) desc) as cn,
  max(count(employeeNo)) maxNum
from Works
group by CompanyNo 
```

[小提琴](http://www.sqlfiddle.com/#!4/7c7fe/1)

# asp.net - 存储供全球使用的功能和潜艇？

> ID：15452606
> 
> 赞同：1
> 
> 时间：2013-03-16T17:53:22.527
> 
> 标签：asp.net

存储函数和子例程以便我网站中的每个页面都可以使用它们的最佳方法是什么？

目前它们在一个 aspx.vb 页面上，我需要将它们复制到我想要使用它们的每个页面上，我真的不想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:57:35.520

如果您使用的是 VB.NET，则可以使用 App_Code 文件夹中的模块来存储函数。

如果您使用的是 C#，则可以使用静态函数创建一个类

VB.NET：

```
Public Module Utilities

    Public Function MyFuct()

    End Function

End Module 
```

C＃：

```
public class Utilities
{

    static public string MyFuct()
    {

    }
} 
```

然后，调用使用：

```
Utilities.MyFuct() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:57:40.247

根据类的作用，我会将它们分类为类或辅助类型静态类。同样，这仅取决于您需要它们做什么。

# javascript - jQuery Mobile：$.mobile 未定义

> ID：15452611
> 
> 赞同：2
> 
> 时间：2013-03-16T17:53:42.937
> 
> 标签：javascript, jquery, json, jquery-mobile, mobile

我正在尝试使用 jQuery 解析远程 JSON 文件，但出现“$.mobile is undefined”错误。

```
<html>
<head>
<title></title>
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile-1.3.0.min"></script>    
<script>
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
$(document).ready(function() 
{
    $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?", function(data)
    {
        alert ("Ok");
    })  
})
</script>
</head>
<body>
</body>
</html> 
```

我究竟做错了什么？“jquery-1.9.1.min.js”和“jquery-1.9.1.min.js”都存在，我没有修改它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:55:52.103

错字。改变

```
<script src="js/jquery.mobile-1.3.0.min"></script> 
```

到

```
<script src="js/jquery.mobile-1.3.0.min.js"></script>    
//                                     ^^^ 
```

# ruby-on-rails - Rails 3 - 具有自定义租户 ID 列的acts_as_tenant

> ID：15452612
> 
> 赞同：0
> 
> 时间：2013-03-16T17:53:46.243
> 
> 标签：ruby-on-rails, multi-tenant, acts-as-tenant

有没有人成功地将 Rails `acts_as_tenant`gem 用于多租户，其中未命名租户 ID 列`xxx_id`？

我的模型类似于

```
has_one :tenant, :foreign_key => "tenant_code" 
acts_as_tenant :tenant 
```

然后我的查询`select * from [table] where tenant_id = xxx`忽略了被覆盖的`foreign_key`规范。

有没有什么办法解决这一问题？还是我在做其他明显错误的事情？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T07:13:00.343

就像对此问题的更新以供将来参考：

从 gem 版本 0.3.3 开始，现在可以显式设置外键。

```
acts_as_tenant(:account, :foreign_key => 'accountID') 
```

也许这有助于发现这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T18:32:08.133

ActsAsTenant 在 gem 本身中将它自己的外键设置为（伪代码）#{tenant_klass}_id：

```
def self.fkey
  "#{@@tenant_klass.to_s}_id"
end 
```

[https://github.com/ErwinM/acts_as_tenant/blob/master/lib/acts_as_tenant/model_extensions.rb#L12-L14](https://github.com/ErwinM/acts_as_tenant/blob/master/lib/acts_as_tenant/model_extensions.rb#L12-L14)

不幸的是，我不相信您可以为除了 activerecord 模型关系之外的任何东西设置自己的外键（使用您的代码，理论上您仍然可以调用 model.tenant；但是，这对您没有帮助）。

# r - 将函数应用于数据框或多个列表

> ID：15452613
> 
> 赞同：0
> 
> 时间：2013-03-16T17:53:49.970
> 
> 标签：r

*根据评论编辑：* OP想要计算：

```
(100 *  (1 - 10 ^ - (Do - Do[Do==0] )) ⎞ (1 - 10 ^ - (Do[Do==100] - Do[Do==0]) - Do 
```

*对于-RS*`Cl`中, `In`,`Sa`的每个组合`data.frame`

 ** * *

我正在尝试将一个名为 dG 的函数应用于数据帧。由于函数的参数长度不同，回收产生了不可预测的结果。

为了纠正这个问题，我将数据框分成列表，并在使用名为“ids”的函数识别每个列表后尝试将 dG 函数（如下）应用于每个列表。

*   请随时提出不同的解决方案。仅供参考，我的具体要求从要点开始

请让我首先提供显示问题的综合数据：

```
Do <- rep(c(0,2,4,6,8,10,15,20,30,40,45,50,55,60,65,70,80,85,90,92,94,96,98,100), each=16,times=16)
Cl <- rep(c("K", "Y","M","C"), each= 384, times=4)
In <- rep(c("A", "S"), each=3072)
Sa <- rep(c(1,2), each=1536)
Data <- rnorm(6144)
DataFrame <- cbind.data.frame(Do,Cl,In,Sa,Data); head(DataFrame)
rm(Do,Cl,In,Sa,Data)
attach(DataFrame)

DFSplit <- split(DataFrame[ , "Data"], list(Do, Cl, In, Sa)) 
```

函数 'ids' 是一个辅助函数，用于识别列表名称

```
ids <- function(Do, Cl, In, Sa){
    grep( paste( "^" , Do, "\\.",
                Cl, "\\.",
                In,
                "\\.", Sa,sep=""),
         names(DFSplit), value = TRUE)}

mapply(ids, Do, Cl, In, Sa, SIMPLIFY = FALSE) 
```

上面的 mapply 产生了 6144 个列表。如果您查看 mapply 输出，您会注意到有 384 个唯一列表名称，但每个名称重复 16 次 384*16=6144。

*   如何更改 'ids' 函数，以便 mapply 不会重复相同的名称 16 次。

作为一个丑陋且成本高昂的解决方案，我使用了独特的；我需要一个更好的基本解决方案。

```
unique(mapply(ids, Do, Cl, In, Sa, SIMPLIFY = FALSE)) 
```

dG 函数是我想要对每个“DFSplit”列表进行操作的函数。它与之前的 ids 函数有相同的问题。它使用 ids 函数作为输入。

```
dG <- function(Do,Cl, In, Sa){
    dg <- 100*
                (1-10^-( DFSplit[[ids(Do,  Cl, In, Sa)]] - DFSplit[[ids(0, Cl, In, Sa)]])) /
                (1-10^-( DFSplit[[ids(100, Cl, In, Sa)]] - DFSplit[[ids(0, Cl, In, Sa)]])) - Do
    dg} 
```

我尝试按如下方式使用 dG，但这不是我想要的。

```
dG(Do,Cl, In, Sa) 
```

它只评估了 dG 函数的最后一部分（-Do）加上这个警告

在 grep(paste("^", unique(Do), "\.", unique(Cl), "\.", unique(In), : 参数 'pattern' 的长度 > 1 并且只有第一个元素是用过的

*   你能建议修改 dG 函数吗

然后我尝试了mapply

```
mapply(dG, Do, Cl, In, Sa, SIMPLIFY = FALSE) 
```

mapply 使用我的数据正确评估了函数。mapply 生成 6144 个列表。您会注意到，mapply 输出基本上是 384 个唯一列表，每个列表重复 16 次 384*16=6144。

*   如何修改 dG 函数以摆脱无用且耗时的重复？

我的想法是：

1.  消除我的第一个函数“ids”中的重复，我不知道该怎么做。
2.  更改第二个函数的参数，使参数的长度为 384。也许使用列表的名称作为输入参数。我不知道怎么做。

3.  更改公式 dG 并且不使用 (Do, Cl, In, Sa) 参数，因为每个参数的长度为 6144

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:26:04.663

## 更新：

您对@Roland 所做的评论是您在[之前的每个](https://stackoverflow.com/questions/15365371/looping-with-multiple-parameters-without-the-for-loop) [相关](https://stackoverflow.com/questions/15449612/why-does-mapply-repeat-the-same-list-multiple-times) [问题](https://stackoverflow.com/questions/15452613/applying-functions-to-dataframe-or-multiple-lists/)中所必须填写的所有内容，这曾经包括在内。

您的整个过程可以在一行代码中处理：

```
library(data.table)
myDT <- data.table(DataFrame)

myDT[ , "TVI" :=  100 * (1 - 10^-(Data - Data[Do==0])) / (1 - 10^-(Data[Do==100] - Data[Do==0])) 
      , by=list(Cl, In, Sa)]

# this is your Tonval Value Increase
myDT$TVI 
```

* * *

* * *

*原答案：*

仍然非常不清楚您要完成什么。但是，这里有两个概念应该能够为您节省一个令人头疼的世界。

### 首先，您不需要您的`ids`功能。您可以获得更多里程数`expand.grid`：

```
myIDs <- expand.grid(unique(Do), unique(Cl), unique(In), unique(Sa))

# You can then use something like 
apply(myIDs, 1, paste, sep=".")
# to get the same results.  Or whatever other function suits 
```

然而，即使这样也不是必须的。

* * *

### 这是`dG`使用`data.table`.

请注意，没有必要进行任何拆分或`ids`类似的事情。一切
都由`by`.`data.table`

```
library(data.table)
myDT <- data.table(DataFrame)

myDT

dG_DT <- 
    100 * 
    1 - 10^(   myDT[ ,     Data, by=list(Do, Cl, In, Sa)][, Data] 
             - myDT[Do==0, Data, by=list(Do, Cl, In, Sa)][, Data]
            ) / 

    1 - 10^(   myDT[Do==100, Data, by=list(Do, Cl, In, Sa)][, Data]
             - myDT[Do==0,   Data, by=list(Do, Cl, In, Sa)][, Data]
            ) - 
    myDT[, Do]

dG_DT 
```*

# struts2 - 152Struts URL 未找到 - 错误

> ID：15452616
> 
> 赞同：0
> 
> 时间：2013-03-16T17:54:00.817
> 
> 标签：struts2

我是 Struts 2 的新手，正在尝试根据教程创建一个新项目。

当我运行该项目时，我收到如下所示的错误。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Struts2Starter</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>   
</filter-mapping>

</web-app> 
```

struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<struts>
    <package name="default" extends="struts-default">
        <action>name="getTutorial" class="org.prem.javabrain.action.TutorialAction"
            <result name="success">/success.jsp</result>    
            <result name="failure">/error.jsp</result>
        </action>
    </package>
</struts> 
```

TutorialAction.java

```
package org.prem.javabrain.action;

public class TutorialAction {
    public String execute() {
        System.out.println("Hello from execute");
        return "success";
    }
} 
```

成功.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    Success Page!
</body>
</html> 
```

错误.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <body>
    Error!
  </body>
</html>

HttpStatusError-404

http://localhost:8080/Struts2Starter/getTutorial.action 
```

错误：

```
Mar 16, 2013 1:42:22 PM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Document is invalid: no grammar found. at (null:3:8)
org.xml.sax.SAXParseException; systemId: file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml; lineNumber: 3; columnNumber: 8; Document is invalid: no grammar found.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:1007)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:165)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:132)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:214)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Mar 16, 2013 1:42:22 PM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Dispatcher initialization failed
Unable to load configuration. - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: Unable to load file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:1012)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:165)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:132)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:214)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    ... 22 more
Caused by: Document is invalid: no grammar found. - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:1007)
    ... 26 more
Caused by: org.xml.sax.SAXParseException; systemId: file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml; lineNumber: 3; columnNumber: 8; Document is invalid: no grammar found.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 27 more

Mar 16, 2013 1:42:22 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
Unable to load configuration. - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:483)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: Unable to load configuration. - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    ... 20 more
Caused by: Unable to load file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:1012)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:165)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:132)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:214)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    ... 22 more
Caused by: Document is invalid: no grammar found. - file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml:3:8
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:1007)
    ... 26 more
Caused by: org.xml.sax.SAXParseException; systemId: file:/C:/Users/premvidya/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Struts2Starter/WEB-INF/classes/struts.xml; lineNumber: 3; columnNumber: 8; Document is invalid: no grammar found.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 27 more

Mar 16, 2013 1:42:22 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Mar 16, 2013 1:42:22 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/Struts2Starter] startup failed due to previous errors
Mar 16, 2013 1:42:22 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Mar 16, 2013 1:42:22 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Mar 16, 2013 1:42:22 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/15  config=null
Mar 16, 2013 1:42:22 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1715 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:02:15.823

错误描述了问题。

为您正在使用的 S2 版本使用适当的 DOCTYPE，例如：

```
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"> 
```

# ruby-on-rails - 引导日期选择器在 Rails 3 中不起作用

> ID：15452617
> 
> 赞同：1
> 
> 时间：2013-03-16T17:54:06.417
> 
> 标签：ruby-on-rails, twitter-bootstrap

引导日期选择器对我不起作用。我知道以前有人问过这个问题，但是经过很长时间的搜索，我找不到答案。

我有以下配置。加载页面时，会出现输入字段，但单击该字段时不会出现可供选择的日历。非常感谢任何帮助。

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree .
//= require prototype
//= require prototype_ujs
//= require effects
//= require dragdrop
//= require controls
//= require bootstrap-datetimepicker
//= require bootstrap-datepicker
//= require_self

$('[data-behaviour~=datepicker]').datepicker() 
```

应用程序.css

```
/*
 *= require_self
 *= require_tree .
 *= require bootstrap-datepicker
 */ 
```

自定义.css.scss

```
@import "bootstrap";
@import 'bootstrap-datetimepicker'; 
```

并且在视图中

```
<input type="text" data-behaviour='datepicker' > 
```

我已经尝试了一些关于 stackoverflow 的其他主题中建议的变体，但没有一个奏效。例如，

```
$(function() {
$('#dp5').datepicker()
}); 
```

和...一起

```
<input class="span2" id="dp5" readonly="" value="02-02-2012" size="16"> 
```

也不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T07:49:50.497

发生此问题是因为您的情况下的 jquery 版本

```
//= require jquery 
```

尝试下载另一个版本的 jquery 并替换您当前的版本。我遇到了完全相同的问题，这就是解决方案。尝试使用 1.5 或 2.0 或类似的版本。

另外，请注意：

```
//= require_tree . 
```

您正在包含来自 javascript 目录的 .js 文件，因此请确保您没有下载另一个版本的 jquery，并且您也自动包含了第二个版本。您将遇到冲突问题。

如果这一切都不起作用，您可以尝试在这里查看答案[jQuery in Rails 3.2 not displayed datepicker](https://stackoverflow.com/questions/15562009/jquery-in-rails-3-2-not-displaying-datepicker)

**重要的：**

确保在测试时**使用** `ctrl+ F5`! 它将从头刷新整个页面，并且不包含兑现元素，这非常重要，因为您可能会找到解决方案，但由于兑现您不会注意到更改，您可能会因为兑现而错过解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T07:34:33.223

您是否尝试过这个宝石：[https](https://github.com/lubieniebieski/bootstrap-datetimepicker-rails) ://github.com/lubieniebieski/bootstrap-datetimepicker-rails ？

它会将 datetimepicker 所需的 Javascript 和 CSS 正确打包到 rails 资产管道中。

# asp.net-mvc - ajax.action 链接未显示成功警报

> ID：15452623
> 
> 赞同：0
> 
> 时间：2013-03-16T17:54:54.750
> 
> 标签：asp.net-mvc, asp.net-ajax

我正在研究 asp.net MVC 2 应用程序。我有 ajax.action 链接，但它不工作。在我看来，我有这段代码：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
   <script type="text/javascript">
       function success(result) {
           alert(result);
           // TODO: do something with the object
       }
   </script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <%: Ajax.ActionLink(
    "Delete", 
    "Delete", 
    new { Id = 55 }, 
    new AjaxOptions { OnComplete = "success" })
%>
</asp:Content> 
```

这是控制器代码：

```
 public ActionResult Index()
 {
      ViewData["Message"] = "Welcome to ASP.NET MVC!";

      return View();
 }

 public JsonResult Delete(Int32 Id) {

     return Json("Record deleted!", JsonRequestBehavior.AllowGet);
 } 
```

但是当我点击链接时，它显示记录已删除！在浏览器中而不是显示为警报。我错过了一些文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:58:41.773

您可能需要在页面中包含`MicrosoftAjax.js`和`MicrosoftMvcAjax.js`脚本：

```
<script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftAjax.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftMvcAjax.js") %>"></script> 
```

在 ASP.NET MVC 3 及更高版本中，这些文件[`obsolete and replaced`](https://stackoverflow.com/a/8784998/29407)由 jQuery 不显眼的脚本编写。

既然您已经通过邮件向我发送了您的示例项目，那么问题出在哪里就很清楚了。您已经在`<title>`页面标签内定义了成功的 javascript 函数，这显然无法正常工作。

因此，在您的 MasterPage 中，您应该为您的脚本定义一个特殊的占位符（还要注意我是如何使用 url 帮助程序修复您到 CSS 文件的硬编码链接的）：

```
<head runat="server">
    <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
    <link href="<%= Url.Content("~/Content/Site.css") %>" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftAjax.js") %>"></script>
    <script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftMvcAjax.js") %>"></script>
    <asp:ContentPlaceHolder ID="Scripts" runat="server" />
</head> 
```

您可以在视图中覆盖：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %>

<asp:Content ID="Content1" ContentPlaceHolderID="Scripts" runat="server">
    <script type="text/javascript">
        function success() {
           alert('success');
           // TODO: do something with the object
        }
    </script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <%= Ajax.ActionLink(
        "Delete", 
        "Delete", 
        new { id = 55 }, 
        new AjaxOptions { OnComplete = "success" }
    ) %>
</asp:Content> 
```

# css - 如何防止元素引起滚动

> ID：15452624
> 
> 赞同：1
> 
> 时间：2013-03-16T17:54:55.157
> 
> 标签：css, html, scrollbar

我正在尝试创建一个跨越我网页顶部的简单黑匣子。

目前我有这个：

```
<canvas id="block" align="center" height="250" width="5000" 
style="border:1px solid #000000;background:#ffffff;position:absolute;top:-100px;z-index:10;"> 
```

最初我尝试将其设为百分比，但对我来说太复杂了。

我需要防止框导致页面滚动到两侧。

我确信这是一件非常简单的事情，可能我遇到的主要问题是不知道要搜索什么。我已经在谷歌上搜索了 2 个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:00:39.037

哟可以简单地使用`overflow:hidden`

示例：

```
<div style="overflow:hidden; width:200px; height:200px;position:relative;"></div> 
```

观看演示：[**jsFiddle 现场演示**](http://jsfiddle.net/BlackSRC/n5979/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:33:49.117

> 我正在尝试创建一个跨越我网页顶部的简单黑匣子。

如果您正在尝试完成此操作，那么您需要做的就是以下内容：

```
<div style="background-color:#000;height:10px;width:100%;"></div> 
```

并将其直接放在您的开始`<body>`标签下方。

我对为什么要`width:5000px;`在画布上进行设置感到困惑，如果您希望使画布元素比视口更宽并且仍然不允许滚动，那么您需要`overflow:hidden`在**body**元素上进行设置。

```
body {
overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T18:01:07.810

如果不需要的滚动是由于用户在您的应用程序中按下箭头键，那么您应该告诉浏览器*您*正在通过执行以下操作自己处理箭头键：

```
 event.preventDefault(); 
```

在键盘事件的处理程序中。

另外`html {overflow: hidden}`也可能工作。

# css - 导入和扩展原始 CSS？

> ID：15452626
> 
> 赞同：2
> 
> 时间：2013-03-16T17:55:01.267
> 
> 标签：css, less

我有一个预处理器导入问题。我有供应商 css，我想复制功能。不幸的是，*我也不能控制*这种情况下的 html。所以基本上我有供应商 css 和不同的供应商 html，我正试图将一个 css 规则的功能扩展到另一个。

现在，许多 css 预处理器的基本概念是扩展规则。

```
// Vendor
.foo { font-weight: bold; }
.bar { text-color: red; }

// Mine
.bar { .foo } 
```

在上面的示例中，您无法访问`.foo`or `.bar`，但是使用预处理器，您可以从`.foo`into扩展功能`.bar`，这对于 less/stylus/etc 非常有用。问题在于，供应商规则仅在原始 css 中定义。

话虽如此，最明显的解决方案是让 Stylus/Less 将原始 css 导入为 stylus/less。但是，似乎两者都无法真正做到这一点..我至少发现了这一点。Less 似乎不能*（`@import "foo.css"`指令被忽略）*，虽然 Stylus 可以选择实际包含导入的原始 CSS，但它似乎并没有真正处理它。也就是说，它会包含 css，但`@extend`指令失败*（也许我错了？）*。

我能想到的另一个选择是将 .css 文件重命名为预处理器语言扩展名。由于我们想让供应商的东西不受我们控制，允许适当的版本控制/等，这涉及一个构建过程，该过程复制目标 css 文件并将它们重命名为目标语言扩展名，但这很容易出错。Stylus 立即遇到语法错误，Less 也很容易*（因为并非所有 CSS 都是有效的 Less。大多数是，但不是全部）*。

所以..在这方面还有什么其他想法吗？希望有一个选项我可能会丢失？也许 SCSS 处理得更好？

目前，我发现是/不可能..我觉得唯一*稳定*的方法是将原始 css 位简单地复制到我的 css 代码中。如果供应商代码更改，我将不得不手动更新，但至少我不会冒供应商内容更改的风险，并且构建过程突然失败，因为供应商引入了一些不被 less/etc 支持的 CSS 语法. 它远非好..但可能发生的最糟糕的是我的css看起来很有趣，我需要更新。

**编辑**：

接下来我将尝试 SCSS .. 我们将看看它是如何进行的。在网站上，他们声称所有 CSS（仅限 3 个？）语法都是有效的 SCSS

**编辑2：**为了清楚起见。我的问题是，给出上述场景，你会*怎么*做？无法导入 .css 文件**（请参阅下面的注释！）**，并且将 .css 文件重命名为 .less/.stylus 反过来也容易出错，因为 less 不是 CSS 的完美超集（即由于专有特性）。

**！笔记！**：从那以后，我一直在挖掘较少的来源，看看可以做些什么来解决这个问题，而不是解决这个问题，并且遇到了十几个关于此事的支持票。其主要讨论似乎发生在[#issue 1185](https://github.com/cloudhead/less.js/issues/1185)上，更重要的是，请查看 *（我相信）解决此问题的变更日志！[变更日志 1.4.0 测试版](https://github.com/cloudhead/less.js/blob/master/CHANGELOG.md)

话虽如此，这`@import (less) "file.css"`很可能是这里的获胜方案，即使它可能由于测试状态而存在一些错误。耶 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:16:05.773

您最好的选择是 @Lee Olayvar 所说的，或者使用 LESS 中新的 ":extend()" 功能。听起来您可能已经尝试过扩展功能，但是您使用了“SASS 指令”语法（IMO 不正确地使用 at 规则），而 LESS 使用类似 CSS 的伪选择器语法：

```
.foo:extend(.bar) {} 
```

如果你有耐心（在接下来的几天/几周内），你会看到一个非常适合你想做的新功能，**它**是 LESS 独有的。**它将允许您扩展或混合外部“静默”样式**。这意味着您将能够“@import”和外部样式表，但样式不会显示在您编译的代码中，除非您扩展它们或将它们用作 mixin。

顺便说一句，我是 Less.js 的核心团队，所以如果您有任何其他问题或者我是否可以提供进一步的帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:06:49.953

看起来所有导入`.css`的文件都不会被前置，`less`而只会`@import`在顶部添加一个。

> 您可以导入 CSS 和 LESS 文件。仅处理 LESS 文件导入语句，CSS 文件导入语句保持原样。如果你想导入一个 CSS 文件，并且不想让 LESS 处理它，只需使用 .css 扩展名

**来源： http: [//lesscss.org/](http://lesscss.org/)**

我相信你能做的最好的事情就是重命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:11:52.150

虽然仍处于测试阶段，但新添加的`@import (less) "file.css"`语法应该可以正确处理所有 CSS 文件。由于“官方”支持，也可以预期/假设任何破坏 LESS 的专有语法都将被修复*（尽管可能不“支持”）*。

所以理论上这是最好的选择！除了 SCSS，在这种情况下我还没有尝试过。在我的测试中，手写笔仍然存在问题。

有关更多信息，请查看[此问题](https://github.com/cloudhead/less.js/issues/1185)或[此更改日志](https://github.com/cloudhead/less.js/blob/master/CHANGELOG.md)。

# mysql - 选择每组中的最后一条记录

> ID：15452628
> 
> 赞同：0
> 
> 时间：2013-03-16T17:55:11.030
> 
> 标签：mysql, sql, database, select, greatest-n-per-group

有一个`Remark`包含数据的表，如下所示：

```
 SerialNo | RemarkNo  | Desp
=============================================
             10 |         1 | rainy
             10 |         2 | sunny
             11 |         1 | sunny
             11 |         2 | rainy
             11 |         3 | cloudy
             12 |         1 | rainy 
```

如果我运行查询`SELECT * FROM remark WHERE remark_no IN (SELECT MAX(remark_no) FROM remark GROUP BY serial_no);`，我仍然会得到上述结果：

什么查询将返回以下结果：

```
 10 |         2 | sunny
             11 |         3 | cloudy
             12 |         1 | rainy 
```

也就是每组最后一条记录应该返回？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:33:43.930

```
SELECT
  r1.*
FROM remark r1
  LEFT JOIN remark r2
    ON (r1.serial_no = r2.serial_no
    AND r1.remark_no < r2.remark_no)
WHERE r2.remark_no IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:11:38.603

对于每个 SerialNo 的顶部 RemarkNo（以及同一行中的其他字段）：
选择相同 SerialNo 没有更高 RemarkNo 的所有记录

```
SELECT *
FROM remark r1
WHERE NOT EXISTS
  (SELECT SerialNo FROM remark r2
   WHERE (r2.RemarkNo>r1.RemarkNo)
     AND (r2.SerialNo=r1.SerialNo)
  ) 
```

[http://sqlfiddle.com/#!2/7da1b/21](http://sqlfiddle.com/#!2/7da1b/21)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-16T18:12:36.177

您可以通过返回结果并使用排序顺序来做到这一点。例如...

```
SELECT * from GROUP Order By GROUP.ID DESC 
```

这将首先按照最后一条记录的顺序返回结果。然后，如果您不遍历结果，您将只返回一条记录……最后一条记录。

# vector - 比较上下文向量

> ID：15452637
> 
> 赞同：1
> 
> 时间：2013-03-16T17:55:49.547
> 
> 标签：vector, nlp, cosine-similarity

我使用向量来表示单词周围的上下文，我需要相互比较上下文。以下是我的问题的简化版本：

假设我有一个 vector `a=[1,1,15,2,0]`。然后我有一个向量`b=[0,0,15,0,0]`和`c=[1,1,11,0,1]`。通过余弦相似度比较两个向量时`b`最接近`a`. 但是，由于向量代表上下文`c`在我的情况下更有意义，因为`b`它只是一个上下文，恰好有一个与原始单词相同的单词并且具有相同的分数。

我怎么能`c`以最相似的方式返回？另一个相似性度量？或者也许我的推理在某个地方有缺陷？

正如我所说，这是对我的问题的简化。我已经在对向量进行规范化，并且为了对上下文词进行评分，我正在使用对数似然。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:08:38.900

使用[Jaccard 相似度](http://en.wikipedia.org/wiki/Jaccard_index)。在下面的 Python 演示中，请记住函数`cosine`和`jaccard`返回距离，这是相似度的“倒数”，并阅读评论：

```
# Input all the data
In [19]: from scipy.spatial.distance import cosine, jaccard
In [24]: a
Out[24]: array([ 1,  1, 15,  2,  0])
In [25]: b
Out[25]: array([ 0,  0, 15,  0,  0])
In [26]: c
Out[26]: array([ 1,  1, 11,  0,  1])
# Calculate cosine similarity. I've scaled it by a factor of 100 for legibility
In [20]: 100*cosine(a,b)
Out[20]: 1.3072457560346473
In [21]: 100*cosine(c,a)
Out[21]: 1.3267032349480568
# Note c is slightly "further away" from a than b.
# Now let's see what Mr Jaccard has to say
In [28]: jaccard(a,b)
Out[28]: 0.75
In [29]: jaccard(a,c)
Out[29]: 0.59999999999999998
# Behold the desired effect- c is now considerably closer to a than b
# Sanity check- the distance between a and a is 0
In [30]: jaccard(a,a)
Out[30]: 0.0 
```

PS 存在更多相似性度量，每种度量都适用于不同的情况。你有充分的理由相信`c`应该`a`比更相似`b`吗？你的任务是什么？如果您想了解更多关于该主题的信息，我强烈推荐[这篇博士论文](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDcQFjAA&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.10.538&rep=rep1&type=pdf&ei=3PtEUc_9N4bYPcaWgKgJ&usg=AFQjCNEJNs9-3SJvjVi2aTwiRBVPn7VWWQ)。警告：200 页长。

# gmaps4rails - gmaps4rails 地图显示

> ID：15452638
> 
> 赞同：1
> 
> 时间：2013-03-16T17:55:50.303
> 
> 标签：gmaps4rails

我是 Ruby on Rails 的新手，正在尝试使用 gmaps4rails gem。经度和纬度自动显示，但地图没有出现。如果我查看页面源信息，似乎正在调用和创建地图，所以我不确定它为什么没有显示。这可以在这里看到：

```
 <script src="//maps.google.com/maps/api/js?v=3.8&amp;sensor=false&amp;client=&   amp;key=& amp;libraries=geometry&amp;language=&amp;hl=&amp;region=" type="text/javascript"></script>
    <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

    <script type="text/javascript">
      Gmaps.map = new Gmaps4RailsGoogle();
      Gmaps.load_map = function() {
      Gmaps.map.map_options.auto_adjust = true;
      Gmaps.map.initialize();
      Gmaps.map.markers = [{"lat":40.8217303,"lng":-73.9551369},             {"lat":41.4925374,"lng":-99.9018131},{"lat":50.3429668,"lng":18.5540869}];
      Gmaps.map.markers_conf.do_clustering = true;
      Gmaps.map.create_markers();
      Gmaps.map.adjustMapToBounds();
      Gmaps.map.callback();
       }; 
```

我是否需要在我的文档中包含一些其他文件才能显示地图？这些文件会在哪里？我正在使用 Ruby 1.9.3 和 Rails 3.2.12。我看到此类问题已被多次询问和回答，但我无法从这些答案中得到解决方案。谢谢你的帮助。

更新：

这是我的看法：

```
 <br />
            <%= link_to 'New Bathroom', new_bathroom_path %>
            <%= gmaps4rails(@json) %> 
```

模型：

```
 acts_as_gmappable

      def gmaps4rails_address
      address 
```

控制器：

```
 def index
     @bathrooms = Bathroom.all
  @json = Bathroom.all.to_gmaps4rails
    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @bathrooms }
     end
     end 
```

和 application.html

```
 <%= yield %>
       <%= yield :scripts %>
     <%= stylesheet_link_tag 'gmaps4rails' %>

     </body>
    </html> 
```

我想知道的一件事是我是否需要将一些资产复制到应用程序。它在github网站上说。

""""""""""""""""""""""""""""""""""""""""" `gmaps4rails.css`将在您运行后复制到您的应用程序Rails 生成器。确保在您的第一步中需要此文件。

对于 Rails 3.0.x 或没有资产管道：

<%= stylesheet_link_tag 'gmaps4rails' %> """"""""""""""""""""""""""""""""""""""""" “”

由于我没有看到 gmaps4rails.css 文件，我想知道这是否是问题所在。感谢您的帮助。

* * *

发布调试器详细信息：

对，是真的。我几乎没有这方面的经验。我按照你的建议得到了 Firebug，发现当我在页面上滑动时，调试器中的谷歌脚本永远不会突出显示。我看到它确实尝试调用 googleapis.com 但是不同操作的时间为零，除了阻塞和等待。这让我觉得谷歌服务器没有发送任何内容。在 Get gmaps4rails.css 下，它在我的 app/asset 文件夹中查找并出现 404 错误。我正在学习如何理解所有这些信息，如果我是正确的，似乎服务器对谷歌的请求由于某种原因被阻止了，它认为我的 css 文件在资产文件夹中。如果我是正确的，我真的不知道从这里去哪里。请告诉我哪些信息有助于使这个问题更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:32:11.570

你需要运行'rails generate gmaps4rails:install'。这将提供缺失的位（并且 css 将在 rails 3.2 中自动获取）。

在那之后，你应该很高兴（基于原始问题，并禁止任何后续更改）。

# android - 抛出异常，忽略捕获部分

> ID：15452642
> 
> 赞同：1
> 
> 时间：2013-03-16T17:55:57.317
> 
> 标签：android, exception, nfc

我正面临`java.lang.NoSuchMethodError: android.nfc.NdefRecord.createUri`这段代码的异常：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
   mNfcAdapter = NfcAdapter.getDefaultAdapter(this.getApplicationContext());
   try {
        if (mNfcAdapter == null) {
        } else {
            NdefRecord uriRecord = NdefRecord.createUri(someUri);
            NdefMessage msg = new NdefMessage(new NdefRecord[] {uriRecord});
            mNfcAdapter.setNdefPushMessage(msg, this);
        }
    } catch (Exception e) {
        Log.e(getClass().getSimpleName(), "initNfcNdefMessage()", e);
    }
} 
```

但是，`initNfcNdefMessage` **不会打印**在堆栈跟踪中。这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:02:06.933

因为`java.lang.NoSuchMethodError`不是从Exception类派生的。

您试图通过 Exception 对象捕获它，但它最初是可抛出的

检查这个

```
java.lang.Object
  extended byjava.lang.Throwable
      extended byjava.lang.Error
          extended byjava.lang.LinkageError
              extended byjava.lang.IncompatibleClassChangeError
                  extended byjava.lang.NoSuchMethodError 
```

[参考这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NoSuchMethodError.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T18:03:38.727

Java 有多个异常层次结构。

您的问题是[java.lang.NoSuchMethodError](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NoSuchMethodError.html)不是从[java.lang.Exception](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html)派生的，因此您无法通过捕获异常来捕获 NoSuchMethodError。您需要明确地捕获 NoSuchMethodError 或者您可以捕获 Throwable 。

请参阅有关[有效 Java 异常](http://www.oracle.com/technetwork/articles/entarch/effective-exceptions-092345.html)的文章以了解有关检查异常的更多信息。

# php - 无法从 php 中的 db 中删除行

> ID：15452643
> 
> 赞同：2
> 
> 时间：2013-03-16T17:56:04.010
> 
> 标签：php, html, sql

我有 2 页 sell.php 和 sell_form.php 。当用户从 sell_form.php 的下拉菜单中选择股票代码时，我在 sell.php 中有一个查询，应该从数据库中删除该股票代码，但我现在得到的只是一个空白页我点击出售按钮。我不确定我是否完全理解下拉菜单中的值是如何传递给 sell.php 表单的。这是我到目前为止的代码

这是我的 sell.php 文件

```
if ($_SERVER["REQUEST_METHOD"] == "POST") 
{

    // delete the stock from their portfolio 
query("DELETE FROM shares WHERE id = ? AND symbol = ?", $_SESSION["id"],$_POST["symbol"]);  

redirect("/");
}
else
{

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);

    //create array to store the shares
    $shares = [];

    //for each of the user info

    foreach($rows as $row){

        //lookup stock info
        $stock = lookup($row["symbol"]);
        if($stock !== false){

            $shares[] = [
                "name" => $stock["name"],
                "price" => $stock["price"],
                "shares" => $row["shares"],
                "symbol" => $row["symbol"],
                "total" => $row["shares"]*$stock["price"]
            ];

        }
    }

// render portfolio
render("sell_form.php", ["shares" => $shares, "title" => "Sell"] );
} 
```

这是我的 sell_form.php

```
<form action="sell.php" method="post">
<fieldset>     
    <div class="control-group">

        <select name="symbol">
        <option value="blank"></option>

        <?php foreach ($shares as $symbol):?>
        <option value="symbol"><?= $symbol["symbol"]?></option>
         <? endforeach ?>
        </select>     

    </div>
    <div class="control-group">
        <button type="submit" class="btn">Sell all shares</button>
    </div>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:20:12.037

我们认为在 sell_form.php 中，

```
<option value="symbol"><?= $symbol["symbol"]?></option> 
```

应改为

```
<option value="<?= $symbol["symbol"]?>"><?= $symbol["symbol"]?></option> 
```

否则在 sell.php 中

删除语句解释为 -

```
DELETE FROM shares WHERE id = <<Spefied User Id>> AND symbol = 'symbol'; 
```

纳克斯

# php - PHP贯穿整个页面，抓取所有链接

> ID：15452644
> 
> 赞同：0
> 
> 时间：2013-03-16T17:56:04.603
> 
> 标签：php, curl

我写了这个脚本，它可以工作，但只抓取页面上的第一个链接，然后停止：

```
<?php
$handle = fopen("localurls.csv","r");
while(($line=fgetcsv($handle))!==FALSE) {

$curl = curl_init();
curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $line[0],
));
$resp = curl_exec($curl);
curl_close($curl);
$regex_body = '%<a href="(.+?)">%s';
$myBody = preg_match($regex_body, $resp, $matches);
$myFile = "localdownload.txt";
$fh = fopen($myFile, 'a') or die("can't open file");
fwrite($fh, $matches[0]);
fclose($fh);
sleep(2);
}
?> 
```

.csv 文件是我有脚本爬网的页面列表。当我运行它时，我得到每个页面上的第一个链接.. IE

```
<a href="www.google.com"> 
```

然后我将它写入一个txt文件。有谁知道修改它以继续在页面上查看代码之间的所有迭代的方法

```
<a href=" 
```

和

```
"> 
```

想了想，在网上找了下怎么实现的，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:15:09.167

您需要使用`preg_match_all`而不是`preg_match`. `preg_match`返回第一次出现，`preg_match_all`执行**全局**正则表达式并搜索所有实例。

[http://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

# javascript - 谷歌地图不以用户位置为中心

> ID：15452645
> 
> 赞同：0
> 
> 时间：2013-03-16T17:56:15.803
> 
> 标签：javascript, google-maps, google-maps-api-3

我的网站上有一张谷歌地图，它可以获取用户的位置，然后显示带有用户位置的地图以及到地图上某个固定点的路线。当地图加载它只填充 div 的一个小角落时，我使用以下代码解决了这个问题：

```
google.maps.event.trigger(map, 'resize'); 
```

但是我现在遇到的问题是地图没有放大到指定的级别，并且它没有再次以代码中指定的用户位置为中心。

地理位置代码：

```
if (navigator.geolocation) { 
  navigator.geolocation.getCurrentPosition(geoInfo, noGeoInfo);
} else {
  noGeoInfo();
}

function geoInfo(position) { 
  navigator.geolocation.getCurrentPosition(function (position) { 
    var latitude = position.coords.latitude;                    
    var longitude = position.coords.longitude;                 
    var coords = new google.maps.LatLng(latitude, longitude); 
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = { 
      zoom: 15,        
      center: coords,
      mapTypeControl: true, 
      navigationControlOptions:
      {
        style: google.maps.NavigationControlStyle.SMALL 
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP 
    };
    map = new google.maps.Map(  document.getElementById("mapContainer"), mapOptions); 
    directionsDisplay.setMap(map); 
    var request = {
      origin: coords, 
      destination: '54.861283, -6.326805', 
      travelMode: google.maps.DirectionsTravelMode.DRIVING 
    };
    directionsService.route(request, function (response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  });
}

function noGeoInfo() { 
  var location = new google.maps.LatLng(54.861283, -6.326805); 
  var mapOptions = { 
    center: location, 
    zoom: 15, 
    mapTypeId: google.maps.MapTypeId.ROADMAP 
  };
  var map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
  marker = new google.maps.Marker({ 
    position: location,
    map: map
  });
} 
```

为什么它不以指定位置或缩放级别为中心？

# c# - 如何检查字符串是否包含 C# Winforms 中的文本

> ID：15452647
> 
> 赞同：0
> 
> 时间：2013-03-16T17:56:28.157
> 
> 标签：c#, .net, winforms, c#-4.0

任何人都可以帮助我在 C# Winforms 中编写一段代码，它可以给我一个布尔值，即一段字符串是否包含几个单词。

例如，如果我想检查字符串“**仅**测试字符串”中是否存在字符串测试字符串。

我写了以下一段代码，但它总是给我真实的，无论字符串是否包含单词。

```
 private bool ContainsText(string input)
    {
        for (int i = 0; i < input.Length; i++)
        {
            if (((int)input[i] >= 65 && (int)input[i] <= 90) || ((int)input[i] >= 97 && (int)input[i] <= 177))
                return true;
        }

        return false;
    } 
```

当我调用以下行时，我总是得到**true**，这是不正确的

```
MessageBox.Show(ContainsText("test only string").ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:02:32.457

代码方面，如果*任何*字符由于某种原因在“A 到 Z”或“a 到 U+00B1”中，您的`ContainsText`代码会*立即*返回。`true`*`input`*

 *但问题远不止于此：您已经描述*了两个*输入 - 要检查的字符串，例如“仅测试字符串”和检查其存在的字符串，例如“提供数据以仅测试字符串”。您的方法只接受*一个*输入，不使用任何其他状态。所以它*不可能*工作。值得退后一步，尝试弄清楚为什么您没有注意到您需要两个输入 - 以及为什么您的测试确实只使用了“仅测试字符串”而没有提及“提供数据以仅测试字符串”。

您根本不需要方法 -`String`已经有[`Contains`](http://msdn.microsoft.com/en-gb/library/dy85x1sa.aspx)方法：

```
if (textToCheck.Contains(textToFind))
{
    ...
} 
```

这是假设你想要一个序数比较。如果要以区分区域性或不区分大小写的方式进行检查，请`IndexOf`与适当的一起使用。`StringComparison`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:01:15.950

一个简单的[string.IndexOf](http://msdn.microsoft.com/en-us/library/ms224425.aspx)可能带有忽略大小写的枚举：

```
 string myTestString = "Data is provided to Test Only String";
 if(myTestString.IndexOf("test only string", StringComparison.CurrentCultureIgnoreCase) >= 0)
    Console.WriteLine("Found text"); 
```

当然 string 类也有 Contains 方法，但它是作为对 IndexOf 的调用实现的，不可能忽略大小写。

```
public bool Contains(string value)
{
     return (this.IndexOf(value, StringComparison.Ordinal) >= 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:01:49.447

您可以使用 String 对象的 Contains 方法。

```
var a = "Data is provided to test only string";
var b = "test only string";

if (a.Contains(b))
     MessageBox.Show("yes"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:00:44.190

使用 IndexOf

[http://www.dotnetperls.com/indexof](http://www.dotnetperls.com/indexof)

使用示例..

```
string str = "string to test";
bool result = str.IndexOf("The hosted network started.") != -1;

MessageBox.Show(result.ToString()); 
```*

# javascript - 如果单击 set div 中的收音机。用#radioselected 交换选中的电台

> ID：15452649
> 
> 赞同：1
> 
> 时间：2013-03-16T17:56:41.837
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, radio-button

单击 radiogroup2 中的收音机时，选定的收音机应与 id 为选定收音机的收音机交换。尝试使用 .clone 进行操作，但可能选择错误

小提琴： http: [//jsfiddle.net/DCC66/5](http://jsfiddle.net/DCC66/5)几乎正确更新为[http://jsfiddle.net/DCC66/6/](http://jsfiddle.net/DCC66/6/)仍然无法正常工作

```
$("div.radiogroup2 input[name='domain_ext']").click(function() { //only if a the radio in radiogroup to are clicked take radio and swap with id='radioselected'
    if  ($(this).prop('checked')) {
        $(this).after('#radioselected').add(this);
        $('#radioselected').after(this);
    }
}); 
```

我选择了用另一个脚本隐藏的收音机，并用 css 装饰它，收音机的标签是可见的。in the same form i have 3 sections of the same radio group (grouped by name='') when a radio in the div radiogroup2 is selected, i want this radio (label and css) to swap with the radio with the id='无线电选择'

所以。简而言之。

单击 div 中具有“radiogroup2”类的收音机。此收音机与 id 为“selectedradio”的收音机交换

# c# - 在 Selenium 中使用 XPath 选择器来捕获禁用的复选框和兄弟的 href 值

> ID：15452650
> 
> 赞同：1
> 
> 时间：2013-03-16T17:56:44.773
> 
> 标签：c#, xpath, selenium

我在 IE9 中使用 Selenium（.NET/语言为 C#）并具有以下 html 标记（相关部分）

```
 <tr>
        <td class="a" align="b">
            <span class="i"/>
            <input type="checkbox" class="checkboxClass" name="chkBox" value="100" disabled/>
            </td>
        <td>
            <a href="/links/items/100.img">Battery</a>
        </td>
            <td align="left">3/16/2016
            </td>
    </tr>
    <tr>
        <td class="a" align="b">
        <span class="i"/>
        <input type="checkbox" class="checkboxClass" name="chkBox" value="101"/>
        </td>
    <td>
        <a href="/links/items/101.img">Polish</a>
    </td>
        <td align="left">3/16/2016
        </td>
</tr>
<tr>
    <td class="a" align="b">
        <span class="i"/>
        <input type="checkbox" class="checkboxClass" name="chkBox" value="101" disabled/>
        </td>
    <td>
        <a href="/links/items/102.img">Polish</a>
    </td>
        <td align="left">3/16/2014
        </td>
</tr> 
```

目标是仅当兄弟的复选框被禁用时才获得所有**href 。我对 XPath 几乎没有经验，但我设法使用以下表达式获得所有****href**，但坚持如何将选择限制为仅禁用检查 -盒子。

```
var hrefs = driver.FindElements(By.XPath("//tr/td[2]/a")); 
```

我对“前兄弟”做了很多试验和错误，但没有走得更远。例如，我尝试硬编码 href 并查看是否可以访问复选框元素，以便稍后我可以在循环中对其进行概括并检查复选框的“已选择”属性。但是以下不起作用。

```
var checkbox = driver.FindElement(By.XPath("//tr/td[a[@href='links/items/100.img']]/preceding-sibling::td[1]")); 
```

我的直觉是，解决方案可能很简单，就像一个 XPath 表达式一样，所以我可以避免循环，这将有助于从社区获得反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:57:52.890

与其尝试按兄弟姐妹、父母等过滤元素，不如选择适合您条件的 TR 元素，然后在匹配的 TR 中获取 A 元素。

符合您标准的 TR 元素是那些具有嵌入式禁用输入的元素：

```
//tr[td[1]//input[@disabled]] 
```

然后你想在每个匹配的 TR 中获取 A 元素，因此你 append `/td[2]/a`。

获取 A 元素的最终 XPath 表达式是：

```
//tr[td[1]//input[@disabled]]/td[2]/a 
```

从此，您可以使用与最初相同的方法来检索 href 属性。

[由 OP 编辑​​] 值得一提的是，要获取实际的 href 属性，请使用 selenium IWebElement 的 GetAttribute() 方法，并将 "href" 作为参数，即 GetAttribute("href") 。由于某种原因，当 XPath 表达式“//tr[td[1]//input[@disabled]]/td[2]/a/@href”时，IE 的 selenium 驱动程序（在这种情况下是在版本 9 上测试）给出错误如其中一个响应中所述使用。由于上述方法工作正常并解决了原始问题，因此该解决方案是完整的。

# c# - 使用 c# 在 mac 上启动外部进程

> ID：15452651
> 
> 赞同：12
> 
> 时间：2013-03-16T17:56:45.493
> 
> 标签：c#, macos, mono, process.start

我成功地使用 System.Diagnostics.Process.Start() 在 Windows 上启动我的外部单声道可执行文件。但是它在mac上失败了。我没有收到任何错误，根本没有任何事情发生。

我尝试通过以下方式进行操作：

```
System.Diagnostics.Process.Start("mono", "/path/program.exe"); 
```

我也试过像下面这样打开终端（也失败了）：

```
System.Diagnostics.Process.Start("Terminal"); 
```

我唯一能做的就是通过以下方式启动终端：

```
System.Diagnostics.Process.Start("open", "-a Terminal"); 
```

有任何想法吗？我真的很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T05:49:52.863

您需要做的是使用实际可执行文件的完整路径。在 OSX 上，“应用程序”实际上是带有`.app`扩展名的特殊结构化文件夹，可执行文件（通常）位于`Content/MacOS/[name]`.

例如，要打开终端：

```
System.Diagnostics.Process.Start("/Applications/Utilities/Terminal.app/Contents/MacOS/Terminal"); 
```

或者对于文本编辑：

```
System.Diagnostics.Process.Start("/Applications/TextEdit.app/Contents/MacOS/TextEdit"); 
```

要找到可执行文件，您可以右键单击（或按住 Control 单击）应用程序，然后选择**Show Package Contents**，这将在 Finder 中打开实际文件夹。然后，您可以导航到该`Contents/MacOS`文件夹​​以找到实际的可执行文件。

要运行**Mono**可执行文件，您必须使用 mono 可执行文件的完整路径并将程序作为参数传递。通常它会是类似`/usr/local/bin/mono`或可能的东西`/usr/bin/mono`。

例如：

```
System.Diagnostics.Process.Start("/usr/bin/local/mono /Users/Ilya/Projects/SomeApp.exe"); 
```

显然你会使用`.exe`文件的实际路径，上面只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:46:14.713

Mono 鲜为人知的特性是您可以直接运行 .exe 文件（以兼容它在 Windows 中的执行方式，但也是为了方便）。它使用启动原始可执行文件的同一个 Mono VM 启动。换句话说，一个人可以简单地做：

```
Process.Start("Test.exe"); 
```

好吧，至少它在 Linux 上对我有用；）

**编辑：**

这是该功能的[来源](https://github.com/mono/mono/blob/master/mono/io-layer/processes.c#L802)，应该适用于每个平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:09:43.060

要扩展 Bryan 的答案，请**不要**在代码中对路径`/usr/bin/local/`进行硬编码。

要找出每个系统中的正确路径，有多种技术，但我不确定哪个是最好的：

*   用于`which mono`定位完整路径。为此，您需要`which`从另一个 Process 实例调用。（不确定是否`which`所有 Mac 系统都默认提供）
*   使用 pkg-config 确定安装 Mono 的前缀。但要注意，你不能简单地调用系统的 pkg-config，你必须先检查 mono 的 pkg-config 是否存在。为此，您需要检查此硬编码路径是否存在：（`/Library/Frameworks/Mono.framework/Versions/Current/bin/pkg-config`就像在[此处](https://github.com/mono/monodevelop/commit/1887798788eaad59cc1184a941406dda46262617)完成的那样）。

# delphi - Firemonkey style.png 结构

> ID：15452654
> 
> 赞同：0
> 
> 时间：2013-03-16T17:56:53.243
> 
> 标签：delphi, styles, firemonkey

我正在试验 Delphi XE3 Firemonkey 的自定义样式设计，并且可以轻松生成我的 styles.png 并将其加载回来。问题是映射哪个元素出现在地图的哪个位置。

除了手动遍历 100 多种样式来查找位置之外，还有没有为 styles.png 中的哪个颜色条指定哪个样式的索引？如果有的话，可以节省长时间的工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:40:29.080

图像中的位置取决于风格，没有“标准”位置。

如果您想简单地“重新绘制”现有样式图像，请尝试将组件在各种状态下的外观与原始图像进行比较，或者查看组件样式中附加到 TSubImages 的各种 TRectAnimations。

# android - 在图像地图上离线绘制方向

> ID：15452655
> 
> 赞同：3
> 
> 时间：2013-03-16T17:56:56.460
> 
> 标签：android, jquery, asp.net, dictionary

我有一个商场地图的 jpg 图像，我想制作一个应用程序，它将获取目的地并显示在商场内购物的静态方向，而无需显示当前位置。

如何在地图上绘制方向以及如何定义商店区域和填充路线？

在 Java Android、C# 或 jQuery 中，任何东西都会有所帮助。

谢谢

# html - 相同的链接锚点不适用于所有浏览器

> ID：15452660
> 
> 赞同：0
> 
> 时间：2013-03-16T17:57:20.153
> 
> 标签：html, anchor, hyperlink

我不得不为客户创建一些法律文档页面，我遇到了这个问题。我不得不使用很多 id 属性来链接到页面内部的特定部分，但它们都不起作用。

我遵循了 w3schools 中描述的方法。

所以我有 id 元素 `<h4 id="a1">Some text</h4>`，然后我像这样指向它`<a class="specialLink" href="#a1">Click here</a>`

在谷歌和这里浏览了几个线程但没有帮助。

有任何想法吗？

另外这里是网站的[链接](http://topgreekgyms.gr/terms/)。您可以在第三个选项卡中看到锚点，您可以使用密码“输入”进入。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:04:22.977

利用`<a name="a1">some text</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:29:14.973

这个问题与锚点和超链接无关，它们运行良好（尽管你真的不应该信任 w3schools... [http://w3fools.com/](http://w3fools.com/)）。

如果您将选项卡的内容复制到单个页面中，则所有超链接都与已经存在的标记一起使用。

真正的问题是滚动控件。

您有一个带有一些自定义滚动控制器的容器（提示是 class="mCSB_scrollTools"），它阻止页面滚动到您要显示的部分。您可以做的另一个测试是尝试在“交易”页面上查找；并且（至少在 Chrome 中）当浏览器尝试显示该部分然后滚动（更好地传送）到页面顶部时，您会注意到闪烁。

我的 Wordpress 经验接近于零，所以很遗憾，这就是我可以帮助你的程度。也许您可以更改滚动框上的一些配置，或者只使用普通容器...

# javascript - 为 JSON 创建嵌套对象

> ID：15452662
> 
> 赞同：0
> 
> 时间：2013-03-16T17:57:29.873
> 
> 标签：javascript, jquery, json

我想实现以下 JSON 结果/JS 对象：

```
{
    "mysex": "female",
    "yoursex": "male",
    "location": {
        "lat": "48",
        "lng": "1"
    },
    "description": "descr2",
    "owner": "zBYnfuu8DXEwMttwZ",
    "nickname": "user",
    "_id": "xcGAkaANcmJP9jQu9"
} 
```

我已经有一个消息对象，它可以从表单中获取除位置嵌套对象值之外的所有其他信息。这很好用。

```
var message = $('#daform').serializeJSON(); 
```

我已经将 lat 和 lng 值存储为变量 'templat' 和 'templng' 但我不知道在消息中“推送”嵌套对象所需的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:09:30.603

假设这`var message = $('#daform').serializeJSON();`相当于

```
{
    "mysex": "female",
    "yoursex": "male",
    "description": "descr2",
    "owner": "zBYnfuu8DXEwMttwZ",
    "nickname": "user",
    "_id": "xcGAkaANcmJP9jQu9"
} 
```

只需添加

```
message.location = { 'lat': templat, 'lng': templng }; 
```

# iphone - 如何检查组件是 UIView 还是 UIImageView

> ID：15452663
> 
> 赞同：0
> 
> 时间：2013-03-16T17:57:32.843
> 
> 标签：iphone, uiview

嗨，在我的应用程序中，我有一个数组。因为我有许多 UIView 和 UIImageView 组件，我想从该数组中获取每个组件，并且必须知道是 imageview 还是 view，如果那是 imageview，我必须更改该 imageview 的图像。但我没有知道如何知道组件是图像视图还是视图。如果有人知道，请告诉我识别组件类型的方法。请在这个问题上帮助我。

```
for (int i=0; i<[array count]; i++){
   // here i have to know wether the component is imageview or view and based on that i have to do below operations 
   UIView *view1=[array objectAtIndex:i];
   NSLog(@"%@",[array objectAtIndex:i]);
   if (130==view1.tag){
       view1.backgroundColor=[UIColor redColor];
    }
    UIImageView *image1=[array objectAtIndex:i];
    if (132==image1.tag){
       image1.image=[UIImage imageNamed:@"Approve2.png"];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T17:59:20.560

利用`isKindOfClass`

例子：

```
if ( [originalValue isKindOfClass:[UIImageView class]] ){

   UIImageView *myImageView = (UIImageView *)originalValue;

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T17:59:14.630

您可以通过类内省检查

尝试这个

```
if( [obj1 class] == [obj2 class] ){

   //same class
} 
```

* * *

一些你可能觉得方便的额外东西

> ```
> Class Introspection
> ·  Determine whether an objective-C object is an instance of a class
>         [obj isMemberOfClass:someClass];
> ·  Determine whether an objective-C object is an instance of a class or its descendants
>         [obj isKindOfClass:someClass];
> ·  The version of a class
>         [MyString version]
> ·  Find the class of an Objective-C object
>         Class c = [obj1 class]; 
>         Class c = [NSString class];
> ·  Verify 2 Objective-C objects are of the same class
>         [obj1 class] == [obj2 class] 
> ```

# c# - 在 Outlook 邮件中添加一个可打开加载项窗口的按钮

> ID：15452667
> 
> 赞同：0
> 
> 时间：2013-03-16T17:57:49.733
> 
> 标签：c#, email, button, outlook, add-in

我正在为我的公司开发 Outlook 加载项。我需要一些我在网上找不到的东西。我有一个包含 WPF 的 win-form 来为 DB 创建新条目，还有一个 win-form 来查看现有条目。创建新条目后，将自动发送邀请邮件。目前这封邮件只包含文本。

1.  我需要邮件中的按钮（默认 WPF 按钮） - HTML 按钮由于某种原因不起作用。
2.  在启用按钮之前，我需要检查收件人是否安装了我的加载项。否则该按钮应该被禁用。
3.  这个按钮需要打开我的win-form来查看条目（我想用一个参数打开它：特定条目的ID）

1.我目前有这个：

```
 mailItem.Subject = String.Format("New entry: {0}", vm.ActiveEntry.Title);
        mailItem.HTMLBody = String.Format("<html><body><h3>A new entry is available for you!</h3><p><u>Description:</u><br>{0}</p><p><u>Time:</u><br><b>Start</b> on {1:dd.MM.yyyy} at {1:HH:mm}<br><b>End</b> on {2:dd.MM.yyyy} at {2:HH:mm}</p></body></html>", vm.ActiveEntry.Description, vm.ActiveEntry.Start.DateTime, vm.ActiveEntry.End.DateTime); 
        mailItem.BodyFormat = Outlook.OlBodyFormat.olFormatHTML; 
```

我想我必须重新处理我的 HTML 文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:13:39.183

出于安全原因，Outlook 不运行脚本，也不处理邮件中的 HTML 表单。

如果仅在安装了加载项时才需要启用按钮，为什么加载项不首先创建按钮？

# jquery - jQuery：如何拆分单选值并将其放入单独的字段中

> ID：15452672
> 
> 赞同：0
> 
> 时间：2013-03-16T17:58:29.797
> 
> 标签：jquery, string, onclick, split, int

我有一个可靠`input#total`的，由单选框触发。单击单选框时，其值显示在`input#total`.

现在我需要将值拆分`(1500|xx)`为两个单独的元素。但我不能让它发生。这是我的代码：

**jQuery**

```
$(document).ready(function(){
    $("input[type=radio][name=rate]").click(function(){
       $("#total").val(this.value);
    }); 
}); 
```

**HTML**

```
<input type="radio" name="rate" value="10000|nc" id="rate1" />
<input type="radio" name="rate" value="15000|eb" id="rate2" />
<input type="radio" name="rate" value="17500|ss" id="rate3" /> 
```

从上面的代码。我需要做这些事情。

1.  将 input#rate 的第一个数组放入 input#total
2.  将另一个值放入名为 input#rate_type 的隐藏输入中

第一件事做得很完美。但第二个不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:05:18.893

看到这个：**[样本](http://jsfiddle.net/JpX6E/)**

```
$(document).ready(function () {
  $("input[type=radio][name=rate]").click(function () {
    var arr = this.value.split('|');
    $("#total").val(arr[0]);
    $("#rate_type").val(arr[1]);
  });
}); 
```

用于`.split()`分割字符串

# c++ - 如何用 g++ (Ubuntu) 编译 OpenAL 程序？

> ID：15452676
> 
> 赞同：4
> 
> 时间：2013-03-16T17:58:48.207
> 
> 标签：c++, linux, ubuntu, linker, openal

我正在尝试找到一种让 OpenAL 在我的计算机上运行的方法：

```
Ubuntu 12.10 (running on 2010 intel i7 Macbook Pro) 
```

我从终端安装了 OpenAL 库：

```
$ sudo apt-get install libopenal-dev 
```

一切顺利。现在我尝试创建一个包含库的简单 C++ 程序：

```
#include <iostream>
#include <AL/alut.h>

using namespace std;

int main(){
    cout << "Hello, world" << endl;
} 
```

不管我多么努力，我最接近找到如何用 g++ 编译它的方法是：

```
$ g++ test.cpp -lalut 
```

这给出了以下错误：

```
test.cpp:2:21: fatal error: AL/alut.h: No such file or directory
compilation terminated. 
```

关于如何将 OpenAL 链接到我的项目的任何想法？我在谷歌上花了几个小时，答案似乎不存在。我可能做错了什么，因为我对 Linux c++ 开发很陌生。谢谢。

编辑：更改以供参考：

```
$ g++ -lalut test.cpp 
```

至

```
$ g++ test.cpp -lalut 
```

（后面是正确的做法，我贴错了）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T18:06:38.157

确保您已安装 alut

```
sudo apt-get install libalut-dev 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T18:37:08.610

您的错误消息表明您的编译器无法找到 ALUT 的头文件（一个实用工具包，可以更轻松地开始使用 OpenAL 开发）。这可能是由于以下两个原因之一：

1.  您根本没有安装该库。在这种情况下，`apt-get install`请像使用 OpenAL 本身一样使用。

2.  标头存在于系统的某个位置，但不在默认包含路径中。如果您能够在文件系统上找到该库，请确保使用`-I`开关使其包含目录为 g++ 所知。

通常，当使用 g++（或重要的 MinGW）链接到库时，编译期间需要对编译器工具链提供三件事：

*   库的包含目录（头文件所在的位置） - 使用`-I`
*   库文件的目录 - 使用`-L`
*   库文件的名称 - 使用`-l`

通常在 Linux 上，前两个是在相应库包的安装过程中自动处理的。不过，如果您的库位于标准目录以外的其他位置，则必须显式指定包含和库路径。

有关 g++ 用法的简明介绍，另请参见[此处](http://homepages.gac.edu/~mc38/2001J/documentation/g++.html)。

**编辑：**我意识到我花了太多时间来摆弄我的答案，而你的问题已经解决了。但无论如何，我希望以上信息对您有用！

# php - 表单数据以 ASCII 格式提交，我需要 UTF8

> ID：15452682
> 
> 赞同：-1
> 
> 时间：2013-03-16T17:59:20.103
> 
> 标签：php, jquery, html, forms, utf-8

嗨，我通过 jquery ajax 将表单的序列化数据发布到 php 脚本，当我使用`mb_detect_encoding`. 我的数据来自的 php 页面被声明为带有此标记的 UTF8 `<meta charset=UTF-8"/>`，我是否必须在表单来的页面中添加一些内容或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:08:28.823

ASCII 是 UTF-8 的完美子集。如果 UTF-8 编码数据仅包含基本 ASCII 范围内的字符，则它与 ASCII 无法区分。即它同时是有效的 ASCII 和 UTF-8。

`mb_detect_encoding`只是猜测第一个匹配的编码。

# javascript - 如何在共享服务器上安全地存储用户名和密码？

> ID：15452684
> 
> 赞同：1
> 
> 时间：2013-03-16T17:59:21.090
> 
> 标签：javascript, security, encryption, passwords

我有一个简单的 HTML5/JavaScript 站点，它读取包含电子邮件帐户配置的本地（应用程序）XML 文件，并使用单个登录在单个页面上显示来自多个邮件帐户的邮件。本质上，一个邮件整合者。问题是，该站点托管在由 Web 主机管理的共享服务器上的云中。我不希望将电子邮件帐户凭据以纯文本形式保存在配置文件中。我正在努力想出一个合理安全的解决方案，但到目前为止还没有运气。

我可以加密 XML 文件中的凭据，但是我看不到如何在不使 JavaScript 代码中的解密路径明显的情况下实现密钥。

我在这里要求的不是代码，而是帮助我指出正确的方向，设计一种实现这一目标的方法。有人会如何做到这一点，以便主机的某些技术不能简单地打开我网站中的文件并访问电子邮件帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:21:14.620

如果我理解正确，您需要检索存储的密码，以连接到托管邮件帐户。这意味着，您不能使用单向哈希，而只能加密数据。

现在您面临的问题是，服务器必须能够解密帐户信息，并且所有服务器都可以做，攻击者也可以做。所以你需要一种方法，服务器本身不能解密数据。

一种可能性是，您使用用户定义的主密码加密所有数据。这个密码永远不应该存储在服务器上，让用户在他想使用服务时输入这个密码。由于帐户信息只能使用此密码解密，并且无法从服务器访问密码，因此帐户信息应该是安全的。这也意味着无法重置密码。

当然，存储帐户信息是一件微妙的事情，如果你想承担这个责任，我真的会再想一想。有很多事情需要考虑，比如 SSL、XSS 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:02:09.327

您应该使用 SHA256 哈希对要加密的数据进行加盐和哈希处理。

**新用户：**

1.  验证密码
2.  加盐并散列密码
3.  将哈希值存储在您的文件中

**登录时：**

1.  哈希密码
2.  将散列与存储在文件中的散列进行比较

这是一个包含更多详细信息的链接：

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:06:56.947

如果您担心“托管公司的某些技术”，请从使用专用或虚拟服务器开始。

但是，如果这超出了您的预算，那么您需要使用数据库来记录用户详细信息并至少对密码进行加密。不要使用 JavaScript 进行任何解密，因为它永远不会是安全的。而是使用服务器端编程语言，如 ASP、CGI、PHP 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:11:35.313

使用像 php 这样的服务器端语言来进行加密和写入。这可能最好使用 Ajax 调用来实现。用户将能够看到被调用的脚本，但是因为 php 是服务器端，即使他们转到该页面，他们也无法知道 XML 文件的保存位置。

你真的不想依赖 JavaScript 来做任何安全的事情，因为它是客户端的，因此永远不安全。

# jquery - jQuery 将 .each() 转换为 for()

> ID：15452686
> 
> 赞同：0
> 
> 时间：2013-03-16T17:59:36.833
> 
> 标签：jquery

我找到了一个 jQuery 插件，它完全符合我的要求，但它需要很长时间才能完成。我可以看到在本[教程](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)`.each()`中使用的实例比第 3 项慢 10 倍。`for()`

`.each`将它们转换为`.for()`请的最佳方法是什么？

例如：

```
 $firstTdChildren = $fixedBody.find(firstTdChildrenSelector)
        .each(function(index) {
            helpers._fixHeightWithCss($(this), tableProps);
            helpers._fixWidthWithCss($(this), tableProps, tdWidths[index % settings.fixedColumns] );
    }); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:29:24.757

除非您有成百上千的项目要迭代，否则转换代码是没有意义的。此外，还有其他方法可以节省整体时间，例如最小化脚本以节省页面加载时间。

要转换， .each 只是遍历每个项目。所以在 jQuery 中：

```
var elms[];
for (var i = 0; i < $("div").get().length; i++) {
    alert($("div").innerHTML);
  } 
```

# sql - PL-SQL 显式游标

> ID：15452689
> 
> 赞同：1
> 
> 时间：2013-03-16T17:59:59.490
> 
> 标签：sql, plsql, oracle11g

我正在尝试为 oracle 编写一个 PL?SQL 语句，该语句从表（作业表）中选择所有唯一行业并将其插入另一个名为`dim_industry`

```
DECLARE
cursor industries is select unique industry from job;
ind varchar2(20);

BEGIN
  open industries;
  for counter in 1..industries%ROWCOUNT
  LOOP
    FETCH industries into ind;
    insert into dim_industry (IndustryName) values(ind);
  END LOOP;
  close industries;
END;
/ 
```

这

```
select unique industry from job 
```

选择 10 行，但是当我运行 pl-sql 时，它说插入了 1 行。另外，当我做一个

```
select * from dim_industry 
```

查询，表保持为空。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:19:23.927

之前的所有答案都是改进 - BULK COLLECTION 是一个非常有用的工具。但是您通常不需要使用 PL/SQL 来复制数据。在您的情况下，请尝试仅使用 INSERT ... SELECT 语句，如下所示：-

```
INSERT INTO dim_industry( IndustryName )
SELECT DISTINCT industry
FROM job 
```

PL/SQL 是最后的手段恕我直言。我什至在直接的 Oracle SQL 中实现了约束求解！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:02:27.543

`ENDLOOP`应该写成`END LOOP`
**UPDATE**
来实现你想要的，你可以这样进行：

```
 DECLARE
    cursor industries is select unique industry from job;
    ind varchar2(20);

    BEGIN
      open industries;
      LOOP
        FETCH industries into ind;
        exit when industries %notfound;
        insert into dim_industry (IndustryName) values(ind);
      END LOOP;
      close industries;
      commit;
    END;
/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:53:07.913

跳过那一步：

```
DECLARE 
    TYPE T_IND IS TABLE of job.industry%TYPE;
    ind T_IND;
BEGIN
    SELECT UNIQUE industry BULK COLLECT INTO ind FROM job;
    FORALL i IN ind.FIRST..ind.LAST
        INSERT INTO dim_industry (IndustryName) VALUES (ind(i));
    -- don't forget to commit;
END;
/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T05:53:19.057

嘿，我认为你在其他路线上做的很长！！！试试这个家伙

```
DECLARE
  CURSOR c1
  iS
    select unique industry from job;
BEGIN
  FOR i IN c1
  LOOP
    INSERT INTO dim_industry (IndustryName) VALUES
      (i.industry
      );
  END LOOP;
  commit;
END;
/ 
```

如果您使用`for loop`光标，则无需提及`open and close`它已隐式打开和关闭。注意：如果您想使用游标在表上更新或插入删除操作，则使用批量操作更好的用户集合它比这快得多。

**这是第二种方法；**

```
DECLARE
temp HR.departments.department_name%type;
  CURSOR c1
  iS
    SELECT DISTINCT d.department_name FROM hr.departments d;
BEGIN
  open c1;
  LOOP
  fetch c1  into temp;
    INSERT INTO thiyagu.temp_dep VALUES
      (temp
      );
      dbms_output.put_line(temp);
      exit when c1%notfound;
  END LOOP;
  close c1;
  commit;
END;
/ 
```

***这是第三种有效的方法；***

```
DECLARE

type test_type is  table of job.industry%type;

col test_type;

BEGIN
  select unique industry bulk collect into col from job;
  forall i in col.first..col.last insert into dim_industry values(col(i));
  dbms_output.put_line(sql%rowcount);
  commit;

END;
/ 
```

# delphi - 如何正确显示基于资源管理器的右键菜单

> ID：15452692
> 
> 赞同：4
> 
> 时间：2013-03-16T18:00:23.290
> 
> 标签：delphi, properties, menu, lazarus, right-click

我使用 Sertac Akyuz 在此处回答中放置的代码创建此菜单： [显示默认的右键单击菜单 - Delphi](https://stackoverflow.com/questions/5282021/show-the-default-right-click-menu-delphi) ，它运行良好，但有问题：当我点击创建的菜单时：删除（删除文件以回收） - 它询问我：`Are you sure want to delete?`

当我单击是时 - 它工作正常，但是当我单击否时 - 它显示一个错误，我在调试器中看到，错误在线：

```
OleCheck(ContextMenu.InvokeCommand(CommandInfo));

Error: ###(gdb unparsed remainder:s 0x0 out of bounds>)###. 
```

我使用 Lazarus，但我认为，在 Delphi 中它也是实际的。

在我看来，菜单（窗口）试图返回我的程序答案 - 不，在这种情况下会发生错误。

如何解决这个问题呢？回答“否”如何正确解决这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T02:54:15.367

您没有指定错误号，但是当我尝试复制这些步骤时，`OleCheck`调用失败并显示`0x80270000`. 高位字部分，保存错误位，是`0x27`(39)，`FACILTY_SHELL`在“winerror.h”中定义。如您所见，低位字是'0'，shell没有给出任何具体的错误代码，实际上代码与`ERROR_SUCCESS`or相同`NO_ERROR`。

我的解释是，shell 只是通知命令（删除操作）失败。失败是由于用户取消了操作。我的建议是，根据您的需要相应地修改代码。您知道操作失败，但您可以选择忽略它，或者可能通知用户。也许是这样的：

```
var
  ...
  InvokeResult: HRESULT;
begin

  ...
//      OleCheck(ContextMenu.InvokeCommand(CommandInfo));
      InvokeResult := ContextMenu.InvokeCommand(CommandInfo);
      if not Succeeded(InvokeResult) then begin
        if LoWord(InvokeResult) = NO_ERROR then
          ShowMessage('Command did not carried out')
        else
          OleError(InvokeResult);
      end;
    ... 
```

# javascript - HTML href 中的 JavaScript 函数调用

> ID：15452694
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:00:32.717
> 
> 标签：javascript, html

我有一个 JavaScript 函数`showImage`，它显示具有特定 ID 的图像。我有一个调用该函数的 HTML 链接

```
<a href="javascript:showImage('img1')">show image1</a> 
```

`a`像这样在 HTML 标记中调用 JavaScript 是个好主意吗？它似乎有效，但这是“正确”的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:03:27.027

大多数时候，您不想将 HTML 与 javascript 代码结合起来。最好附加一个对用户透明的事件处理程序。这样，如果用户禁用了 javascript，您可以[优雅地降级](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript#Degrading_gracefully)。

解决问题的方法很多，这一切都取决于需要什么方法。

也可以看看：

*   [渐进增强和优雅降级：概述](http://www.sitepoint.com/progressive-enhancement-graceful-degradation-basics/)
*   [不显眼的 JavaScript 原则](http://docs.webplatform.org/wiki/concepts/programming/the_principles_of_unobtrusive_javascript)
*   [Mozilla 关于 element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)的注释，请注意替代方法，具体取决于您需要支持的浏览器和版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:03:28.790

> 它似乎有效，但这是“正确”的方法吗？

*正确*是非常主观的，但可能不是。

您应该调查[不显眼的 JavaScript。](https://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

尝试使用这样的东西：

```
document.getElementById('my_link').addEventListener('click', function (event) {
    event.preventDefault();
    showImage('img1');
}, false); 
```

# ruby-on-rails - 摆脱客人结帐时的错误

> ID：15452699
> 
> 赞同：0
> 
> 时间：2013-03-16T18:00:45.813
> 
> 标签：ruby-on-rails, checkout, spree

我已从我的 spree 应用程序中删除了地址和交货状态并将其设置为：

```
Spree::Order.class_eval do

  checkout_flow do
    go_to_state :payment, :if => lambda { |order| order.payment_required? }
    go_to_state :confirm, :if => lambda { |order| order.confirmation_required? }
    go_to_state :complete
    remove_transition :from => :payment, :to => :confirm
  end

end 
```

我删除它是因为目前我的雇主只想做店内取货。现在，如果用户已登录，这非常有用，那么我不会收到任何错误，但是如果我尝试进行访客结帐（我的雇主想要），我会收到此错误：

```
2 errors prohibited this record from being saved:

There were problems with the following fields:

    State is invalid
    State is invalid 
```

现在我是狂欢的新手，所以如果这是一个愚蠢的问题，请原谅我，但是地址和/或交付中的什么会搞砸客人结帐不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:26:35.797

被 Spree 的创建者告知这是一个 devise_auth 错误，已修复但未提交到 git repo 的稳定分支

# java - 为什么 Enum 中的静态方法 values() 和 valueOf() 是由编译器添加的，而不是在 Enum 类中显式声明的？

> ID：15452703
> 
> 赞同：3
> 
> 时间：2013-03-16T18:01:08.097
> 
> 标签：java, enums, language-design

在阅读 Javadoc 时，`Enum`我可以看到我通常不使用的[签名。`valueOf()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#valueOf%28java.lang.Class,%20java.lang.String%29)values() 方法的 javadoc 也丢失了。我读到这些方法实际上是由编译器自动生成的。所以我的问题是为什么这些方法没有在`Enum`类本身中声明为静态方法？像编译器那样包含方法的需要是什么？为什么要增加这个额外的抽象层？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T18:02:26.327

这些方法必须不是在 中声明`Enum`，而是在`Enum`子类中声明，即`enum`您正在编写的类型。它们不能以任何其他方式添加，尤其是因为静态方法不会像实例方法那样继承。

# java - GWT 代码拆分不触发 AJAX 请求

> ID：15452706
> 
> 赞同：0
> 
> 时间：2013-03-16T18:01:22.763
> 
> 标签：java, ajax, gwt

我试图找出代码拆分在 GWT 中是如何工作的。为此，我遵循他们在[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)提供的示例。它按预期工作，在第二种情况下`RunAsyncCallback`，字符串**Hello, AJAX**`cache.html`在文件中不可见。但是在开发模式下运行时，当我单击按钮时，我看不到任何 Ajax 请求在 Firebug 中被触发，即使警报显示得很好。

所以这意味着内容存在于周围的某个地方（可能在`cache.js`文件中），它*不是*从服务器上即时获取的。如果是这样，那么代码拆分的意义何在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:07:25.690

请求仅在编译模式下触发。在开发模式下，GWT 浏览器插件接管，并将调用转发到代码服务器。

在编译模式下，一切都如您所愿。看看目录 war/ *mymodulename* /deferredjs/

# jquery-ui - 好的 Gridster 演示？

> ID：15452708
> 
> 赞同：0
> 
> 时间：2013-03-16T18:01:41.333
> 
> 标签：jquery-ui, jquery-plugins, gridster

jsfiddle或jsbin等网上有没有很好的Gridster演示？？

有没有办法控制gridster表的最大高度和宽度？并使小部件仅在此容器内播放？gridster 默认使用 Jquery-UI 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:25:36.420

这是一个 jsbin 演示，您可以在此处对其进行编辑以控制活动的高度和[宽度](http://jsbin.com/oziquh/7/edit)。我把它放在一起来回答你的问题。出于某种原因，它之前被一个热心的模组删除了，但无论如何，这里又是一个链接，因为这就是你所要求的。

Gridster 不需要 Jquery UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T13:04:24.520

我在这里找到了很多很棒的 gridster 示例：http: [//dsmorse.github.io/gridster.js/#demos](http://dsmorse.github.io/gridster.js/#demos)

# encryption - RSA算法密钥生成

> ID：15452709
> 
> 赞同：5
> 
> 时间：2013-03-16T18:01:46.497
> 
> 标签：encryption, key, rsa

我目前正在努力使用[RSA 加密算法](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。

我的问题位于`public/private`密钥生成，这是我的步骤：

```
 1\. -Generate 2 prime numbers p, q with p > q and nbBits(p) == nbBits(q)
             using the miller-rabin algorythm this was done succesfully
 2\. -compute n = p*q
 3\. -compute fi(n) = (p-1)*(q-1) 
```

麻烦来了：我需要找到一个整数 e `q < e < fi(n)`。这个整数需要有某种素数。

我的问题是：e 必须是原始的（不能被除自身或 1 以外的任何数字除）还是原始的 WITH`fi(n) (gcd(e, fi(n)) = 1)`或两者？

我确实有一些问题要弄清楚（我的消息来源明确指出需要欧几里德算法（gcd），但由于英语不是我的母语，我在数学英语方面遇到了一些麻烦）

可能是一个愚蠢的问题，但我找不到明确的解释（至少对我来说足够清楚）。

感谢阅读，更感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:09:53.710

加密指数`e`需要与 互质`phi(n)`，即`gcd(e,phi(n)) = 1`。这个条件是必要的，因为否则，您将无法（通过欧几里德的扩展算法）构造一个指数`d`（解密指数），使得`e*d = 1 mod phi(n)`.

# python - 提取第三个轴，数据立方体 pyfits

> ID：15452711
> 
> 赞同：1
> 
> 时间：2013-03-16T18:01:55.340
> 
> 标签：python, astronomy, data-cube, fits

我有一个数据立方体 fitfile，由常规 (512x512) 2d 网格的强度组成。然而，还有第三个轴；该轴上的每个值对应一个频率。在每个频率上，都会拍摄一张这样的 2d 图片。

我一直试图在 fit 文件中找到这些频率值，但到目前为止我还没有运气。我知道有 140 个不同的频道，我通过查看 fit 文件的标题知道单位等。*问题在于找到这 140 个通道的值。*

顺便说一句，在 Python 中编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:47:25.240

它通常以与轴“n”的坐标相同的方式给出。参考值“CRVALn”、参考位置“CRPIXn”、每个像素/通道的增量“CDELTn”以及在这些关键字“CTYPEn”中给出的坐标类型。因此，您可以从中计算出立方体中每个“通道”的值

```
(channel_number - CRPIXn) * CRDELTn + CRVALn 
```

既然您说您解决了它，也许您可​​以发布您的解决方案以造福他人？

* * *

编辑/添加：

有关如何在 FITS 文件中表达的更多信息：http: [//fits.gsfc.nasa.gov/fits_wcs.html](http://fits.gsfc.nasa.gov/fits_wcs.html)

特别是论文“FITS 中光谱坐标的表示”Greisen 等人。（2005 年）（NASA ADS 论文[链接）](http://adsabs.harvard.edu/cgi-bin/nph-bib_query?bibcode=2006A%26A...446..747G&db_key=AST&data_type=HTML&format=&high=42261c2ea130558)

# php - 我有一个外部页面，我想打印它的值

> ID：15452712
> 
> 赞同：1
> 
> 时间：2013-03-16T18:01:56.840
> 
> 标签：php, variables, curl

我有一个外部页面我想打印
我正在使用的个人服务器 appserv的值
我使用了网站的 curl：[http ://login.live.com/login.srf?id=2&svc=mail&cbid=1&msppjph= 1&tw=0&fs=1&fsa=1&fsat=1296000&lc=1033&_lang=EN](http://login.live.com/login.srf?id=2&svc=mail&cbid=1&msppjph=1&tw=0&fs=1&fsa=1&fsat=1296000&lc=1033&_lang=EN) 我只想打印这个变量名 = PPFT

``<input type="hidden" name="PPFT" id="i0327" value="CjS9*L3LVhU9sc!dH70OyGoJKKDPgDxqPN!rP6c0IGpw9mq8clZJccbv0B!USsIsjYmrf6nuuW2jzf*yvMlReHpT7zR5unDipkBJ!*bbgW4Ibm5I!SOCeglUJ4iLO85N2WIQ!G37lhXRKQ0t3txFwmE$"/>``

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:48:34.440

```
$html = file_get_contents('http://login.live.com/login.srf?id=2&svc=mail&cbid=1&msppjph=1&tw=0&fs=1&fsa=1&fsat=1296000&lc=1033&_lang=EN');
$doc = new DOMDocument;
@$doc->loadHTML($html);
$xpath = new DOMXpath($doc);
$value = $xpath->query("//input[@name='PPFT']")->item(0)->getAttribute('value');

echo $value; 
```

这将为您获取为`PPFT`表单字段设置的值。确保您已在文件中`allow_url_fopen`启用。`php.ini`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:06:09.427

您应该能够使用`file_get_contents(URL)`where`URL=the external site`并将其设置为等于您可以在值中回显的变量。

# html - 带有 twitter bootstrap 的台式机和平板电脑的相同样式

> ID：15452715
> 
> 赞同：0
> 
> 时间：2013-03-16T18:02:10.250
> 
> 标签：html, css, twitter-bootstrap, responsive-design

当浏览器窗口的最大宽度为 767px 时，我正在使用 twitter bootstrap 的响应功能来更改菜单样式。

这是示例：http: [//jsfiddle.net/G2mEv/2/](http://jsfiddle.net/G2mEv/2/)

在全窗口：http: [//jsfiddle.net/G2mEv/2/embedded/result/](http://jsfiddle.net/G2mEv/2/embedded/result/)

问题是当窗口的最大宽度为 979px 时应用了不同的样式。但我想为 767px 做这个。因为我不想为平板电脑提供不同的菜单，只为手机提供。

Css 带有 twitter 引导程序，所以我可以提供一些 html

```
 <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-target=".nav-collapse"
                                          data-toggle="collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#" tabindex="-1">
                    Some logo
                </a>
                <nav class="nav-collapse collapse" role="navigation">
                    <ul class="nav pull-right">
                        <li class="active"><a href="#">Link 1</a></li>
                        <li><a href="#">Link 2</a></li>
                        <li><a href="#">Link 3</a></li>
                    </ul>
                </nav>
            </div>
        </div> 
```

任何想法如何管理这个？随意分叉我的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:37:16.563

您需要根据自己的喜好更改媒体查询的最小值和最大值。

例如，改变这个：

```
@media (max-width: 979px) {
...
@media (min-width: 768px) { 
```

对此：

```
@media (max-width: 767px) {
...
@media (min-width: ???px) { 
```

[如果您不想修改 Bootstrap 文件，这里讨论](https://stackoverflow.com/questions/11425230/override-css-media-queries)了如何在另一个样式表中覆盖媒体查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:40:53.120

我想如果你只是删除所有内容：

```
@media (min-width: 768px) and (max-width: 979px) { 
    /* delete all code */
} 
```

它应该工作。您可以在此处创建自定义引导下载，其中不包括屏幕宽度在 768 到 979 像素之间的自定义响应式 CSS：

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

只需取消选中`Tablets to desktops (767-979px)`并下载。

# c++ - 获取 cstring 的大小

> ID：15452717
> 
> 赞同：-6
> 
> 时间：2013-03-16T18:02:19.810
> 
> 标签：c++

有没有办法获取以空字符结尾的字符串的大小？

前任。

```
char* buffer = "an example";

unsigned int buffer_size; // I want to get the size of 'buffer' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:05:58.433

请注意，在 C++11 中，字符串文字具有 type `const char[]`，并且转换为`char*`（即指向 non-的指针`const`）是**非法**的。这说：

```
#include <cstring> // You will need this for strlen()
#include <iostream>

int main()
{
    char const* buffer = "an example";
    //   ^^^^^
    std::cout << std::strlen(buffer);
} 
```

但是，由于您正在编写 C++ 而不是 C（至少这是标签所声称的），因此您应该使用 C++ 标准库中的类和算法：

```
#include <string> // You will need this for std::string
#include <iostream>

int main()
{
    std::string buffer = "an example";
    std::cout << buffer.length();
} 
```

看一个[活生生的例子](http://liveworkspace.org/code/4cvdpz%2443)。

**笔记：**

如果您正在使用的 API 需要 C 字符串，则可以使用对象的`c_str()`成员函数`std::string`来检索指向 a 的`char const*`指针，您可以使用 std::string 对象内存缓冲区的 c_str() 成员函数，其中包含封装的 C 字符串。请注意您无法修改该缓冲区的内容这一事实：

```
std::string s = "Hello World!";
char const* cstr = s.c_str(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T18:04:25.417

尝试`strlen(buffer)`从`<cstring>`. 它返回您传入的字符串的长度。

# xml - Android - UI XML 到 Java 代码 - 动态 - 带权重的 LayoutParams 按钮

> ID：15452721
> 
> 赞同：0
> 
> 时间：2013-03-16T18:02:41.240
> 
> 标签：xml, layout, dynamic, user-interface

大家好，我试图以编程方式管理 UI，我将向表中添加一些行，但行数并不总是相同。所以我试图通过代码以编程方式执行此操作，因此它可以是动态的.

我已经尝试过了，只需要知道如何转换ImageButton和Button的layoutparams...两者必须相同，它们都是按钮..

非常感谢提前！！

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TableLayout 
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:stretchColumns="*"
             >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                >

                <ImageButton
                    android:id="@+id/imageButton1"
                    android:contentDescription="@string/removeIconDesc"
                    android:layout_width="0dip"
                    android:layout_weight="0.3"
                    android:layout_height="fill_parent"
                    android:src="@drawable/remove_icon" 
                    android:background="@null"/>

                <Button
                     android:layout_width="0dip"
                     android:layout_weight="1"
                     android:layout_height="fill_parent"
                     android:id="@+id/button1"
                     android:text="@string/button1" 
                     android:background="@drawable/pressed"
                     android:drawableRight="@drawable/arrow_left"
                     />

                <Button
                     android:layout_height="fill_parent"
                     android:layout_width="0dip"
                     android:layout_weight="1"
                     android:id="@+id/button2"
                     android:text="@string/button1" 
                     android:background="@drawable/pressed"
                     android:drawableLeft="@drawable/arrow_right"

                     />

                  <ImageButton
                    android:contentDescription="@string/removeIconDesc"
                    android:id="@+id/imageButton2"
                    android:layout_width="0dip"
                    android:layout_weight="0.3"
                    android:layout_height="fill_parent"
                    android:src="@drawable/remove_icon" 
                    android:background="@null"/>
            </TableRow>
    </TableLayout> 
```

我正在尝试将在 XML 中定义的这个 UI 转换为 java 代码，因为我需要动态地执行它，到目前为止我最好的尝试是下面的这个：但是现在我不能继续前进.. 因为我无法设置权重我的 ImageButton 和 Buttons 的 LayoutParams...

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    tLayout = new TableLayout(this);
    tLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    tLayout.setStretchAllColumns(true);

    TableRow tbRow = new TableRow(mainActivity);

    TableRow.LayoutParams tL = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    tL.weight = 1;

    tbRow.setLayoutParams(tL);

    RelativeLayout.LayoutParams iM = new RelativeLayout.LayoutParams(0, LayoutParams.MATCH_PARENT);   //this is the right LayoutParams for the ImageButton... I guess
    iM.weight = 0 -- This is not possible.... Error On IDE

    //still need to do the translation to the two buttons... and the other ImageButton, but knowing how to do for the ImageButton I guess I can do the rest..

    setContentView(tLayout);
} 
```

非常感谢社区；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:42:05.327

我修复了它，删除了拉伸表格布局列的行，并删除了我将 imagebutton 的背景设置为空的方法......

像这样：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        tLayout = new TableLayout(this);
        tLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

        TableRow tbRow = new TableRow(this);

        TableRow.LayoutParams tL = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        tL.weight = 1;

        TableRow.LayoutParams iM = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT);   //this if for the ImageButton..
        iM.weight = (float) 0.3;

        TableRow.LayoutParams iMB = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT);   //this if for the ImageButton..
        iMB.weight = (float) 1;

        ImageButton m = new ImageButton(this);
        m.setImageResource(R.drawable.remove_icon);

        m.setLayoutParams(iM);

        Button b = new Button(this);

        b.setText("Cenas");
        b.setLayoutParams(iMB);
        b.setCompoundDrawablesWithIntrinsicBounds(0,0,R.drawable.arrow_left,0);

        Button b2 = new Button(this);
        b2.setBackgroundResource(R.drawable.pressed);
        b2.setText("Conas");
        b2.setLayoutParams(iMB);
        b2.setCompoundDrawablesWithIntrinsicBounds(R.drawable.arrow_right,0,0,0);

        ImageButton m2 = new ImageButton(this);
        m2.setImageResource(R.drawable.remove_icon);
        m2.setLayoutParams(iM);

        tbRow.addView(m);
        tbRow.addView(b);
        tbRow.addView(b2);
        tbRow.addView(m2);

        tLayout.addView(tbRow, tL);

        setContentView(tLayout);

    } 
```

# vb.net - Msgbox Yes No & 取消按钮在 VB.NET 2010 中工作

> ID：15452725
> 
> 赞同：1
> 
> 时间：2013-03-16T18:02:52.053
> 
> 标签：vb.net, msgbox

下面是我的 MsgBox 代码。“*是”*按钮正在工作，但是当我单击*“否”*或“*取消*”时，它仍然会删除数据...

```
 strup = "DELETE FROM student WHERE urno =" & CInt(txtUrn.Text) & ";"
        Dim command As New OleDb.OleDbCommand(strup, con)
        MsgBox("Do you want to delete record(s)", MsgBoxStyle.YesNoCancel, "Confirm Delete")
        command.ExecuteNonQuery()
        con.Close() 
```

*单击“否”*或“*取消*”时如何取消删除操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T18:09:43.727

使用基本`If`语句检查`MsgBox`. `MsgBox`不会自行取消任何内容。

```
If MsgBox("Prompt", MsgBoxStyle.YesNoCancel, "Title") = MsgBoxResult.Yes Then
    ' execute command
End If 
```

您也可以使用`MsgBoxStyle.YesNo`仅获取是和否按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T02:07:45.143

类似于`If...Then`，但我认为这更干净

```
Select Case MsgBox("Are you sure ?", MsgBoxStyle.YesNo, "Delete")
    Case MsgBoxResult.Yes
        ' Do something if yes
    Case MsgBoxResult.No
        ' Do something if no
End Select 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:57:37.497

```
 If MsgBox("Are you sure ?", MsgBoxStyle.YesNo, "Delete") = MsgBoxResult.Yes Then
            strup = "DELETE FROM student WHERE urno =" & CInt(txtUrn.Text) & ";"
            Dim command As New OleDb.OleDbCommand(strup, con)
            'MsgBox("Do you want to delete record(s)", MsgBoxStyle.YesNoCancel, "Confirm Delete")
            command.ExecuteNonQuery()
            con.Close()
            txtUrn.Text = ""
            txt10Per.Text = ""
            txt12Per.Text = ""
            txtCAdd.Text = ""
            txtEid.Text = ""
            txtFname.Text = ""
            txtGPer.Text = ""
            txtMno.Text = ""
            txtName.Text = ""
            txtPAdd.Text = ""
            cmb10YofPass.Text = ""
            cmb12YofPass.Text = ""
            cmbDate.Text = ""
            cmbGender.Text = ""
            cmbMonth.Text = ""
            cmbNameofGCourse.Text = ""
            cmbYear.Text = ""
            ComboBox1.Text = ""
            TextBox1.Text = ""
            MsgBox("Record Deleted Successfully")
        ElseIf MsgBoxResult.No Then

        End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T10:10:53.933

MsgBox 仍然不能在 ASP.NET 生产环境或 QA 而不是开发环境中工作。

# google-maps-sdk-ios - 在 iOS 谷歌地图 App 上展示整个世界

> ID：15452726
> 
> 赞同：4
> 
> 时间：2013-03-16T18:02:53.097
> 
> 标签：google-maps-sdk-ios

是否可以选择以某种方式缩小使用新的 Google Maps sdk 创建的 iOS 应用程序？比如展示整个世界？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:53:59.427

GMSCameraPosition.h 包含两个常量

```
/**
 * The maximum zoom (closest to the Earth's surface) permitted by the map
 * camera.
 */
FOUNDATION_EXTERN const CGFloat kGMSMaxZoomLevel;

/**
 * The minimum zoom (farthest from the Earth's surface) permitted by the map
 * camera.
 */
FOUNDATION_EXTERN const CGFloat kGMSMinZoomLevel; 
```

您可以通过以下方式最大限度地缩小：

```
self.googleMap.camera = [GMSCameraPosition    
cameraWithLatitude:self.googleMap.camera.target.latitude
longitude:self.googleMap.camera.target.longitude
zoom:kGMSMinZoomLevel
bearing:self.googleMap.camera.bearing
viewingAngle:self.googleMap.camera.viewingAngle]; 
```

如果 self.googleMap 是您的 GMSMapView。（可能有更简单的方法，但这有效）

无法进一步缩小以查看 3D 地球仪或 smtg。为此，您需要 Google 地球。

# xml - 为什么 XML 中的 CDATA 语法看起来如此奇怪？

> ID：15452727
> 
> 赞同：4
> 
> 时间：2013-03-16T18:03:02.423
> 
> 标签：xml, cdata

CDATA 在 XML 中使用，例如：

```
<my-tag><![CDATA[my-data]]></my-tag> 
```

这是一种非常不寻常的语法。当我第一次看到它时，我认为它是某种我尚未学习的通用 XML 结构的特定形式。但是，据我所知（[XML CDATA 规范](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)）它不是。

我的问题：CDATA 部分看起来像这样是否有原因，例如，是某些 SGML 事物的特例吗？或者某个语言设计者是否有一天只是想“我将创建一个 CDATA 部分，在 CDATA 之前有一个括号，之后是一个括号，一个感叹号，用尖括号括起来。”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T21:47:53.217

CDATA 部分是一个标记部分。在 SGML 中既有抽象语法也有具体语法。标记部分声明的**抽象语法**以标记声明打开*(mdo)*分隔符开头，后跟声明子集打开*(dso)*分隔符。紧随其后的是第二个声明子集打开*(dso)*分隔符的*状态关键字。*标记部分以标记部分关闭*(msc)*分隔符结尾，后跟标记声明关闭*(mdc)*分隔符。因此，标记部分声明的抽象语法是：

 ***```
mdo dso status-keyword dso my-data msc mdc 
```

为每个文档定义了具体的**语法。**此语法在与每个文档相关的 SGML 声明中指定。具体语法定义要用于文档的分隔符。我假设在 ISO 8879:1986 中定义的默认 SGML 分隔符如下：

*   标记声明打开：`<!`
*   声明子集打开：`[`
*   标记部分关闭：`]]`
*   标记声明关闭：`>`

但是您可以自由定义自己的具体语法，因此可以修改用作分隔符的字符。

因此，标记部分声明的默认具体语法是：

```
<![ status-keyword [my-data]]> 
```

可能*的状态关键字*有：CDATA、RCDATA、IGNORE、INCLUDE、TEMP

这使我们：

```
<![ CDATA [my-data]]> 
```

请参阅Martin Bryan的《 **SGML 和 HTML 解释**》一书中的以下章节：

*   [SGML 声明](http://www.is-thought.co.uk/book/sgml-4.htm)
*   [标记部分和处理说明](http://www.is-thought.co.uk/book/sgml-8.htm)***

# php - MySQL 选择查询不起作用

> ID：15452729
> 
> 赞同：0
> 
> 时间：2013-03-16T18:03:05.393
> 
> 标签：php, mysql

在我的数据库中，我有一个 IP 表，我禁止访问我的 PHP 脚本中的某些内容。当我将我的 IP 输入数据库（作为字符串，例如“123.4.5.6”）并且它似乎没有回显“banned”时，当我清楚地将我的 IP 输入到被禁止的数据库表中时。

```
<?php
require_once('config.php');
$ip = $_SERVER['REMOTE_ADDR'];
$checkipban "SELECT * FROM banned WHERE bannedip = '$ip'
";
$banquery = mysql_query($checkipban,$con);
if(mysql_num_rows($banquery) > 0)
echo "banned";
}
?> 
```

$con 是 config.php 中与数据库的连接，它之所以有效，是因为脚本中的其他 MySQL 查询有效。数据库表被称为禁止，只有一列称为禁止IP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:06:23.253

似乎错字。你错过了`=`

```
$checkipban = "SELECT * FROM banned WHERE bannedip = '$ip'";
            ^ 
```

**笔记：**

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:07:10.320

您离开`=`是为了将其分配给 variable `$checkipban`，

```
$checkipban  = "SELECT * FROM banned WHERE bannedip = '$ip'"; 
```

# angularjs - 执行 $http.get 时 createHttpBackend 出现奇怪的异常

> ID：15452731
> 
> 赞同：0
> 
> 时间：2013-03-16T18:03:14.220
> 
> 标签：angularjs

我刚刚开始使用 AngularJS，出于某种原因我遇到了问题。我正在对 Last.fm API 运行 http get 查询，以便检索与 Caravan 相似的艺术家。我已经在 Web 浏览器上尝试了查询，它返回了正确的 XML 响应。

这是我的控制器：

```
function ArtistsCtrl($scope, $http) {
    //artist: $scope.artist;
    $scope.getArtists = function() {
        $http.get('http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=Caravan&api_key=MY_API_KEY').success(function(data) {
            echo(data);
        }).error(function(data, status, headers, config){
            echo(data);
        });
    };
}; 
```

这是我的观点：

```
<!doctype html>
<html lang="en" ng-app>
<head>
<meta charset="utf-8">
<title>My HTML File</title>
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="css/bootstrap.css">
</head>
<body>
    <div ng-controller="ArtistsCtrl">
        <button ng-click="getArtists()">Get artists</button>
    </div>
    <script src="angular.js"></script>
    <script src="angular-resources.js"></script>
    <script src="app.js"></script>
</body>
</html> 
```

问题是当我单击按钮并执行 $http.get 时，它会抛出以下异常并且永远不会返回任何数据。

```
[Exception... ""  nsresult: "0x805e0006 (<unknown>)"  location: "JS frame :: http://localhost/AngularJS/angular.js :: createHttpBackend/< :: line 9409"  data: no]
http://localhost/AngularJS/angular.js
Line 5764 
```

任何人都知道可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:38:27.933

尝试下载 AngularJS 1.0.5 并且工作正常，它给了我 1.1.3 上的错误。

# scala - 如何在光滑的普通 SQL 中按名称引用列？

> ID：15452732
> 
> 赞同：0
> 
> 时间：2013-03-16T18:03:16.963
> 
> 标签：scala, scalaquery, slick

我想在 GetResult 中使用命名引用而不是位置引用，以便代替：

```
implicit val getCoffeeResult = GetResult(r => Coffee(r.<<, r.<<, r.<<)) 
```

我可以写这样的东西：

```
implicit val getCoffeeResult = GetResult(r => Coffee(r.get("name"), r.get("supID"),r.get("price"))) 
```

*我可以有命名的结果？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:08:00.647

您可以通过结果集获得它：

```
r.rs.getString("name") 
```

# c# - 使用数据源更新或刷新

> ID：15452737
> 
> 赞同：1
> 
> 时间：2013-03-16T18:03:41.533
> 
> 标签：c#, .net, winforms, listbox

我将数据从`ms-access`数据库加载到`listbox`.. 我想要做的就是`listbox datasource`在单击更新按钮时更新或刷新我的数据。然后这是我用于方法的代码，然后调用`DataLoadListBox()`on`form_load event`并更新`button_click event`..

```
private BindingList<mylist> myList = new BindingList<mylist>();

private void DataLoadListBox()
{
    string query = "select * from myItem order by itemname";
    OleDbDataAdapter cmd = new OleDbDataAdapter(query, Conn());
    DataSet dt = new DataSet();
    cmd.Fill(dt, "myItem");
    DataTable datTable = dt.Tables[0];
    foreach (DataRow dtRow in datTable.Rows)
    {
        myList.Add(new mylist() { id = dtRow["ID"].ToString(), itemname = dtRow["itemname"].ToString() });
    }
    mylb.DisplayMember = "itemname";
    mylb.DataSource = myList;
    mylb.ValueMember = "id";
    Conn().Close();
} 
```

然后当`textbox`文本填充了我想要的内容时，我推送了`button_click`如下编码的更新事件

```
OleDbCommand comm = new OleDbCommand("update myItem set itemname = @itemname where ID = @ID", Conn());
comm.Parameters.AddWithValue("@itemname", itemname.Text);
comm.Parameters.AddWithValue("@ID", itemid.Text));
comm.ExecuteNonQuery();
// start updating the listbox
myList.Clear();
mylb.DataSource = null;
mylb.Items.Clear();
mylb.Refresh();
mylb.Update();
mylb.DataSource = myList;
DataLoadListBox();
// none of above working, the listbox datasource not getting update 
```

问题是我没有得到`listbox datasource`更新，我在这里做错了什么？我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:27.073

您似乎关闭了 DataLoadListBox 中的连接。您是在 button_click 中打开它还是在到达该代码时至少打开它？

如果不是您在此处缺少最少的异常处理。如果 ExecuteNonQuery 抛出一个异常，你现在只是忽略它。

# c# - 从控制器 GET 返回时，服务器以 500 状态响应

> ID：15452747
> 
> 赞同：0
> 
> 时间：2013-03-16T18:04:53.580
> 
> 标签：c#, asp.net-mvc, jquery

嗨，我一直在 mvc 使用 ajax 进行简单搜索。我对这个错误有点困惑，因为 ajax 可以在 ajax 调用上与控制器通信，但是当控制器向 JS 返回一个值时，它给了我 error500

这是我的代码：

```
$.ajax({
        type: "GET",
        url: 'SearchCustomer',
        data: { 'name': name, 'id': customerId },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            alert(data);
            $(data).each(function () {

            });
        }
    }); 
```

然后我的控制器

```
 public JsonResult SearchCustomer(string name, string id)
        {

            var customers = tr.SearchCustomers(name, id);
            return new JsonResult() { Data = customers, JsonRequestBehavior = JsonRequestBehavior.AllowGet };

        } 
```

- 在提出这个问题之前，我已经尝试过很多解决方案，但令人惊讶的是没有一个有效..所以帮助！:P 欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:07:32.983

您应该摆脱该`contentType`设置，因为您没有发送 JSON。此外，您的控制器操作的 url 看起来也不太有效。如果您使用的是默认路由，它通常应该看起来像`{controller}/{action}`. 我建议您使用 Url 助手来生成它。

同样在您的控制器操作中，您已经使用该`Data`属性来发送结果，因此您应该在成功回调中使用它来循环遍历：

```
$.ajax({
    url: '@Url.Action("SearchCustomer")',
    type: 'GET',
    data: { 'name': name, 'id': customerId },
    success: function (result) {
        $(result.Data).each(function () {

        });
    }
}); 
```

您应该寻找的另一件事是您从控制器操作发送到视图的模型：

```
var customers = tr.SearchCustomers(name, id); 
```

目前尚不清楚此客户集合的类型是什么，但您应该确保它是 JSON 可序列化的。这意味着`Customer`模型不应该在对象图中包含任何循环引用。如果是这样，您将不得不排除它们，理想情况下通过使用视图模型并仅将所需的属性发送到您的视图。

# matlab - rgb2hsv 中的错误

> ID：15452749
> 
> 赞同：0
> 
> 时间：2013-03-16T18:05:03.250
> 
> 标签：matlab, matlab-guide

rgb2hsv 函数对某些图像给出了错误，但对其他一些图像给出了良好的结果，如下所示。

```
 [fname path] = uigetfile('*.*','open image file');%*.*
    %dn=path;
    [path,name,ext,ver] = fileparts(fname);
    handles.fname = strcat(name,ext);
    [handles.queryx, handles.querymap] = imread(fname);
    figure
    imshow(handles.queryx, handles.querymap); %This displays the image.
    question_Callback(hObject, eventdata, handles)
    % Obtain HSV format of the image...
    handles.queryhsv = rgb2hsv(handles.querymap);
    guidata(hObject,handles) 
```

如果我为石雕图像运行此程序会导致错误

```
 ??? Attempted to access r(:,2); index out of bounds because size(r)=[0,0,1].

    Error in ==> rgb2hsv at 74
         g = r(:,2); b = r(:,3); r = r(:,1);

    Error in ==> CBIR_MJP>insert_Callback at 101
    handles.queryhsv = rgb2hsv(handles.querymap);

    Error in ==> gui_mainfcn at 96
         feval(varargin{:});

    Error in ==> CBIR_MJP at 42
         gui_mainfcn(gui_State, varargin{:});

    Error in ==>
   @(hObject,eventdata)CBIR_MJP('insert_Callback',hObject,eventdata,guidata(hObject))

     ??? Error while evaluating uicontrol Callback 
```

是吗？

# objective-c - 基于 Spotlight 搜索的 OSX 应用程序

> ID：15452757
> 
> 赞同：1
> 
> 时间：2013-03-16T18:05:24.810
> 
> 标签：objective-c, macos, cocoa, spotlight

我一直在 iOS 方面，并正在考虑一个**mac 应用程序**。

它没有太多的接口。

该应用程序是一个参考应用程序，具有可搜索的数据。大约有300个项目。

我希望应用程序：

1.  可在 Spotlight 中搜索。在聚光灯下键入应该会从应用程序中获得该项目
2.  搜索图像并将鼠标悬停在它上面会为该图像或文本文件带来一个小显示窗口，显示其内容。我想要类似的东西，虽然该应用程序不是基于文本文件的应用程序，但我希望本机操作系统显示一个示例窗口。

像这样的本机窗口。

例如，搜索 xml 文件并将鼠标悬停在某个项目上会显示一个示例窗口。我希望我的自定义窗口为此出现，但以类似的方式运行。 ![在此处输入图像描述](../Images/7d1b19d9fa27228f3a98b16d51fd0bb6.png) 我不确定我是否已经很好地表达了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:08:42.517

您需要创建一个[QuickLook](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/Quicklook_Programming_Guide/Articles/QLImplementationOverview.html)插件并将其注册到系统中。Spotlight 使用 QuickLook 来呈现它找到的项目的预览。

您可能还需要创建一个[Spotlight 导入器](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/MDImporters/Concepts/WritingAnImp.html)来告诉 Spotlight 如何索引您的数据。

# javascript - jQuery，当锚点数超过 10 时创建下一个 div

> ID：15452760
> 
> 赞同：1
> 
> 时间：2013-03-16T18:05:54.173
> 
> 标签：javascript, jquery, html

脚本：

```
<script>
    var currentPage = 1;

    function page(pg)
    {
        var els = document.getElementsByClassName("pagecontainer");
        for (var i = 0; i < els.length; i++)
        {
            var page_of_container = els[i].getAttribute("id");
            els[i].style.display = page_of_container  == pg ? 'block' : 'none';                    
        }

        currentPage = pg;
    }

    function prev()
    {
        if (currentPage <= 1) return;

        page(currentPage -1);
    }

    function next()
    {
        if (currentPage >= document.getElementsByClassName("pagecontainer").length) return;

        page(currentPage + 1);
    }
</script> 
```

HTML：我将只拥有这个 HTML，

```
<div id="1" class="pagecontainer" style="display: block;">
<a href="#">Contents goes here</a>
<a href="#">Contents goes here</a>
<a href="#">Contents goes here</a>
-
-
-
- 10 a elements
<p class="page"></p>
</div>

<div class="bottom">
    <a href="#" onclick="prev()">&lsaquo;</a>
    <a href="#" onclick="page('1')"></a>
    <a href="#" onclick="page('2')"></a>
    <a href="#" onclick="next()">&rsaquo;</a>
</div> 
```

我需要从脚本中创建：

```
<div id="2" class="pagecontainer" style="display: block;">
    <a href="#">Contents goes here</a>
    <a href="#">Contents goes here</a>
    <p class="page"></p>
    </div> 
```

* * *

我将它用于有用的链接块，因此所有内容都将成为 LINKS，并且脚本通过创建 div id=1、id=2、id=3 可以很好地处理静态内容，我需要让它动态化例如，通过使用一个 div 并让脚本在锚点数量超过 10 时创建下一个 div，

我怎样才能做到这一点，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:12:25.457

只需循环遍历每个`anchor`并将其添加到数组中，然后当循环计数达到 10 时创建新的除法器并相应地分配。

```
var container = [];

$('a[href]').each(function() {
    container.push($(this));

    var containerLength = container.length;

    if(containerLength  === 10 || !$(this).next().is('a[href]'))
    {
        var containingDivider = $('<div></div>');
        containingDivider.insertBefore(container[0]);

        for(i=0;i<containerLength;i++)
            container.shift().appendTo(containingDivider);

        container.length = 0;
    }
}); 
```

确保下`!$(this).next().is('a[href]')`一个元素是具有`href`属性的锚点 - 如果不是，则意味着我们已经到达锚点的末端或到达不是锚点的东西。

这是一个使用中的[JSFiddle 示例](http://jsfiddle.net/2Nxkv/2/)。

# iphone - viewWillDisappear 和 viewDidDisappear 之间的巨大延迟

> ID：15452763
> 
> 赞同：2
> 
> 时间：2013-03-16T18:06:06.353
> 
> 标签：iphone, cocoa-touch, ios6

这是日志输出

```
2013-03-16 14:02:59.301 Echo[65406:4503] child viewWillDisappear start
2013-03-16 14:02:59.303 Echo[65406:4503] child viewWillDisappear returning
2013-03-16 14:02:59.303 Echo[65406:4503] parent viewWillAppear start
2013-03-16 14:02:59.305 Echo[65406:4503] parent viewWillAppear returning
2013-03-16 14:02:59.307 Echo[65406:4503] parent finished calling popToRootViewControllerAnimated on child.navigationController
2013-03-16 14:03:30.120 Echo[65406:c07] child viewDidDisappear start
2013-03-16 14:03:30.121 Echo[65406:c07] child viewDidDisappear returning
2013-03-16 14:03:30.121 Echo[65406:c07] parent viewDidAppear start
2013-03-16 14:03:30.122 Echo[65406:c07] parent viewDidAppear returning 
```

这是一个很酷的 30 秒之间`viewWillDisappear`和`viewDidDisappear`。中间还发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:41:29.913

这里的问题是线程。这是因为此操作在 AFNetworking 代码的回调中。而不是使用：

```
[controller.navigationController popViewControllerAnimated:NO]; 
```

需要：

```
// http://stackoverflow.com/questions/9411271/how-to-perform-uikit-call-on-mainthread-from-inside-a-block
dispatch_async(dispatch_get_main_queue(), ^{
    [controller.navigationController popViewControllerAnimated:NO];
    [self.navigationController pushViewController:newController animated:YES];
}); 
```

# vb.net - 视觉基本表格和数据网格

> ID：15452764
> 
> 赞同：0
> 
> 时间：2013-03-16T18:06:08.010
> 
> 标签：vb.net, ms-access

关于将 Access .mdb 数据源链接到 Visual Basic 表单的一个相当简单的问题。我有三个表的数据库：

学生

贷款 #link 表

书

表格看起来像这样（它真的是一个测试表格而不是一个工作现场项目）

![在此处输入图像描述](../Images/52dab7a7d0f1793be1bef92f70ce3382.png)

表单上的第一个**文本框**链接到学生表中的学生 ID 字段。

文本框下方是附加到查询的**数据网格**，该查询包含学生 ID 字段和其他表中的字段。

我想要的是**过滤**数据网格，以便当我**更改**表单上的学生 ID 文本框输入时，它会更改该学生的数据网格中的**查询结果**。

我可以单独使用 Access 来完成，但在这里我使用 VB 2010 Express 作为 GUI。

我认为这可能与这段代码有关：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'BisDataSet.student_Query' table. You can move, or remove it, as needed.
    Me.Student_QueryTableAdapter.Fill(Me.BisDataSet.student_Query)
    'TODO: This line of code loads data into the 'BisDataSet.student' table. You can move, or remove it, as needed.
    Me.StudentTableAdapter.Fill(Me.BisDataSet.student)

End Sub 
```

正如它提到的数据网格正在使用过滤器。

谁能告诉我**如何使用表单**上的学生 ID 字段过滤数据网格？

为了使问题更清楚：

下面的结果显示我选择了学生 3 但网格结果没有执行查询： ![在此处输入图像描述](../Images/24c02f7c949e96d55b8ac03c732b7937.png)

总结一下如何将显示查询结果的 dat 网格绑定到 VB.net 中表单上的文本框字段（.mdb 文件保存数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:15:00.260

> 若要对 DataGrid 控件中的数据进行分组、排序和筛选，请将 DataGrid 绑定到支持这些功能的集合视图。

我想[在这里](http://msdn.microsoft.com/en-us/library/dd833072%28v=vs.95%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)你可以找到你的解决方案。

# html - 如何在我的站点上“隐藏”子文件夹？

> ID：15452766
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:06:14.573
> 
> 标签：html, security

我不确定在搜索时最好的方法是什么，但我有一个相对简单的问题：

假设我有 mysite.com 然后我有 mysite.com/images

如何保护该子文件夹不被任何人访问？我有多个像这样分布在网站上的文件夹。在这方面我是新手。我是否在每个文件夹中放置一个文件，弹出某种错误？我应该重定向还是有一个弹出站点地图的屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:19:48.757

您可以重命名文件夹以使其`.`前面有一个。在你的情况下，

```
.images 
```

只需浏览您使用的任何文件系统，找到文件夹并将其重命名以`.`在其前面放置一个。

这样，任何人都无法从浏览器/另一台服务器访问它（基本上除了您和您​​的服务器脚本之外的所有人都无法访问它）。但是，如果您有在网页中显示的图像，您将无法使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:16:37.457

你用什么网络服务器？当您使用 apache 时，您可以`.htaccess`在要保护的文件夹中创建文件。例如，您可以允许从 ip 地址 1.2.3.4 访问目录，使用 htaccess 文件中的以下行阻止其他目录：

```
order deny,allow    
allow from 1.2.3.4
deny from all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:17:15.090

你可以用它`.htaccess`来做到这一点。这是一个很好的方法的链接：[htaccess 保护所有子文件夹和文件](https://stackoverflow.com/questions/6246664/htaccess-protect-all-subfolders-files)

# java - 从 TextField 使用 JavaFX KeyTyped 事件

> ID：15452768
> 
> 赞同：2
> 
> 时间：2013-03-16T18:06:24.223
> 
> 标签：java, javafx-2, textfield, keyevent

我正在尝试验证一个 TextField，我只想在 TextField 上允许数字。我的代码如下所示：

```
public void handle(KeyEvent evt) {
    String character = evt.getCharacter();
    if(!character.equals("1")) {
        JOptionPane.showMessageDialog(null,evt.getCharacter());
        evt.consume();                
    }                                         
} 
```

这不会消耗事件:(这是一个错误吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-13T05:28:02.723

试试这个它的工作..

```
txtMobile.addEventFilter(KeyEvent.KEY_TYPED, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent event) {
        String character=event.getCharacter();

        if(!valid.checkNumeric(character))
            event.consume();                    
    }}); 
```

和数字的功能......

```
public boolean checkNumeric(String value)    {
    String number=value.replaceAll("\\s+","");
    for(int j = 0 ; j<number.length();j++){ 
            if(!(((int)number.charAt(j)>=47 && (int)number.charAt(j)<=57)))
            {
                return false;
            }
    }     
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:17:55.420

我认为使用关键事件是错误的方法。可以说过滤输入的一种更简单且侵入性较小的方法是在 text 属性上安装一个侦听器，并在需要时将其还原：

```
public class Test extends Application {
    @Override
    public void start(final Stage stage) throws Exception {
        final Pattern wholeNumberPattern = Pattern.compile("\\d*");
        final TextField tf = new TextField();
        tf.textProperty().addListener(new ChangeListener<String>() {
            public void changed(final ObservableValue<? extends String> observableValue, final String oldValue,
                                final String newValue) {
                if (!wholeNumberPattern.matcher(newValue).matches())
                    tf.setText(oldValue);
            }
        });
        stage.setScene(new Scene(tf));
        stage.show();
    }

    public static void main(String[] args) {
        System.out.println(com.sun.javafx.runtime.VersionInfo.getRuntimeVersion());
        Application.launch(args);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T18:59:20.067

从 JavaFX 8u40 开始，限制文本字段输入的最佳方法是在文本字段上设置[TextFormatter](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TextFormatter.html)。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/7555564/what-is-the-recommended-way-to-make-a-numeric-textfield-in-javafx/36436243#36436243)。无需手动添加事件过滤器或使用事件。

# php - 如何将我的 php 变量传递给 javascript

> ID：15452776
> 
> 赞同：2
> 
> 时间：2013-03-16T18:07:05.680
> 
> 标签：php, javascript

我有一个动态下拉菜单。这填充了第二个下拉列表。当我使用一个 php 变量进行测试时更改我的选择时，我的 javascript 没有使用我的变量。我对此很陌生

Javascript：

```
<script type="text/javascript">
function populate(s1,s2){
var s1 = document.getElementById(s1);
var s2 = document.getElementById(s2);
s2.innerHTML = "";
if(s1.value=="<?php echo $car; ?>"){
var optionArray=[" ","camero Camaro","convette Convette"];
} else
if(s1.value=="Dodge"){
var optionArray=[" ","avanger Avanger","challenger Challenger"];
} else if(s1.value=="Ford"){
var optionArray=[" ","mustang Mustang","fiesta Fiesta"];
}
for (var option in optionArray){
var pair = optionArray[option].split(" ");
var newOption = document.createElement("option");
newOption.value = pair[0];
newOption.innerHTML = pair[1];
s2.options.add(newOption);
}
}
</script> 
```

PHP 文件：

```
<select name="slct1" id="slct1" onchange="populate(this.id,'slct2')">

<option value=""></option>
<option value="<?php $car = 'Chevy';echo $car; ?>">Chevy</option>
<option value="Dodge">Dodge</option>
<option value="Ford">Ford</option>
</select>
<hr />
<select id="slct2" name="slct2">
</select>
<hr /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:10:30.710

这是因为您分配了一个变量`<?php $car = 'Chevy'; ?>`

您需要打印`<?php echo 'Chevy'; ?>`或 `<?php echo $car; ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:13:30.427

```
<option value="<?='Chevy'?>">Chevy</option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T16:00:00.587

问题在于这一行

```
if(s1.value=="<?php echo $car; ?>"){ 
```

尝试使用 html 的隐藏输入标签

```
<input id="hidden_field" name="hidden_field" type="hidden" value="<?php echo $car;?>" /> 
```

在 Javascript 中

```
var hidden_Value = document.getElementById('hidden_field').value;
if(s1.value==hidden_Value ){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T20:52:35.523

如果您显示的 javascript 代码在 *.js 文件中，则其中的内联 php 将不会被 php 解析。

我不知道这是你遇到的问题还是更深层次的问题。当 javascript 发送到您的浏览器时，第 6 行看起来像：

```
if(s1.value=="<?php echo $car; ?>"){ 
```

或者

```
if(s1.value=="Chevy"){ 
```

如果它看起来像第一个，但您希望它看起来像第二个，那么您需要将您的 javascript 放在 php 文件中，以便它可以访问您的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T18:26:33.863

这个

```
if(s1.value=="<?php echo $car; ?>"){ 
```

将被解析并添加 $car 的值。

```
<option value="<?php $car = 'Chevy'; ?>">Chevy</option> 
```

将其替换为

```
<option value="<?php $car = 'Chevy'; echo $car; ?>">Chevy</option> 
```

记得给 $car 赋值。正如我上面所说，

```
if(s1.value=="<?php echo $car; ?>"){ 
```

将被解析，添加 $car = 'Chevy'; 它上面

# android - 适用于 Android 的多种屏幕尺寸 Adob e Air

> ID：15452779
> 
> 赞同：0
> 
> 时间：2013-03-16T18:07:12.563
> 
> 标签：android, actionscript-3, air

我正在使用适用于 iOS 的 Adob​​e Air 构建我的游戏，但我也在构建适用于 Android 的游戏。因为我的主要平台是 iOS，所以尺寸设置为 960x640，但是当我将游戏放到不同的设备上时，例如我的 Nexus屏幕周围都是白色的。我知道这可能会发生，但是当我的朋友做完全相同的事情（屏幕尺寸也一样）并在他的 Nexus 上运行它时，它适合屏幕。我只是想知道如果无论如何可以启用/禁用它。

另外：我的屏幕周围确实有白色矩形，这可能是原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:08:37.780

您可以通过以下链接，这可能对您有用：

[支持多种屏幕尺寸](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html)

# jquery - jQuery addClass 到 h1

> ID：15452780
> 
> 赞同：-2
> 
> 时间：2013-03-16T18:07:15.033
> 
> 标签：jquery, html, addclass

我正在尝试根据 h1 元素内的文本向 h1 元素添加一个类。

```
var title = $("h1").text();
if (title == "Welcome") {
$("h1").addClass("hide");
} 
```

[http://jsfiddle.net/4LjnT/](http://jsfiddle.net/4LjnT/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:09:23.977

我建议：

```
$('h1').addClass(function(){
    return $(this).text() == 'Welcome' ? 'hide' : '';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4LjnT/4/)。

或者，为了减少对 jQuery 的不必要调用：

```
$('h1').addClass(function(){
    return (this.textContent || this.innerText) == 'Welcome' ? 'hide' : '';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4LjnT/6/)。

而且我*可能*有几分钟的时间可以杀死，这导致了这个简单的 JavaScript 替代方案：

```
Object.prototype.textToClass = function(needle,classToAdd){
    var len = this.length,
        classes = [],
        txt;
    for (var i=0; i<len; i++){
        txt = this[i].textContent || this[i].innerText;
        if (txt == needle){
            classes = this[i].className.split(/\s/);
            classes.push(classToAdd);
            this[i].className = classes.join(' ');
        }
    }
    return this;
};

document.getElementsByTagName('h1').textToClass('Welcome','hide'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4LjnT/7/)。

参考：

*   jQuery
    *   [`addClass()`](http://api.jquery.com/addClass/).
*   纯 JavaScript：
    *   [`Array.length`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/length).
    *   [`Array.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
    *   [`Array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push).
    *   [条件运算符/三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。
    *   [`Element.className`](https://developer.mozilla.org/en-US/docs/DOM/element.className).
    *   [`Object.prototype`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype).
    *   [`String.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T18:09:15.400

jQuery 未在此小提琴中加载。

此外，您没有将代码包装在`document.ready()`函数中，因此存在可能无法以您想要的方式执行的风险。确保从右侧的“Frameworks & Extensions”下拉列表中选择 jQuery。此外，请始终记住检查浏览器的控制台以查看是否有错误，这是对此类事情的一个很好的健全性检查。一直发生在我身上:)

**JS**

```
$(function(){

  var title = $("h1").text();

  if (title === "Welcome") {
    $("h1").addClass("hide");
  }

}); // end ready 
```

# angularjs - 使用 AngularJS 的 Facebook 登录按钮

> ID：15452786
> 
> 赞同：5
> 
> 时间：2013-03-16T18:08:04.013
> 
> 标签：angularjs, facebook-login

我正在尝试使用[https://developers.facebook.com/docs/reference/plugins/login/上的文档将 Facebook 登录按钮添加到我的网站](https://developers.facebook.com/docs/reference/plugins/login/)

现在，此按钮显示在视图中。仅当用户明确请求登录网站时才会加载视图。

我正在使用 HTML5 版本。在第 1 步中，我被要求包含 Javascript SDK - 我在标记之后立即执行此操作。`ng-view`它位于包含该指令 的主页中。

我放置代码以在视图中呈现登录按钮。问题是，如果我通过单击主页中的登录按钮导航到视图，则视图不会呈现 FB 登录按钮。但是，如果我刷新页面（包含登录视图的页面），按钮就会呈现。

我也将 Javascript SDK 的代码移到了登录视图中——在呈现按钮之前和之后，但这也不能解决问题。只有在刷新登录视图时，才会呈现按钮。

所以，
a）要么我需要知道为什么会发生这种情况和解决方案，要么
b）在 AngularJS 中刷新；也就是说，我需要知道 AngularJS 在渲染之前刷新登录视图的方式，以便（我希望）渲染登录按钮。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T18:22:40.823

这是因为 Facebook 渲染整个页面一次以找到它的按钮和内容。加载 ngView 后需要重新运行解析器。

由于您不应在控制器上进行 dom 操作，因此这里是指令版本。

```
angular.module("myApp", []).directive("fbLogin", function($rootScope) {
    return function (scope, iElement, iAttrs) {
        if (FB) {
            FB.XFBML.parse(iElement[0]);
        }
    };
}; 
```

# php - PHP，添加到数据库

> ID：15452788
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:08:22.280
> 
> 标签：php

在浏览器中填写字段并按下添加产品时，它返回列计数与第 1 行的值计数不匹配，而不是将其添加到数据库中。

```
<?php
if (isset($_POST['name'])) {

$name = mysql_real_escape_string($_POST['name']);
$price = mysql_real_escape_string($_POST['price']);
$shipping = mysql_real_escape_string($_POST['shipping']);
$quantity = mysql_real_escape_string($_POST['quantity']);
$description = mysql_real_escape_string($_POST['description']);
$keywords = mysql_real_escape_string($_POST['keywords']);
$category = mysql_real_escape_string($_POST['category']);

$sql = mysql_query("SELECT id FROM products WHERE name='$name'");
$productMatch = mysql_num_rows($sql);
if($productMatch > 0){
    echo'sorry name of film is already in database';
    exit();
}
$sql = mysql_query("INSERT INTO products (name,price,shipping,quantity,description,keywords,category)VALUES
('$name','$price','$shipping','$quantity','$description','$keywords','$category',now)") or die(mysql_error());
$id = mysql_insert_id();
$newname = "$id.jpg";
move_uploaded_file($_FILES['fileField']['tmp_name'], "./images/$newname");
}
?>
<?php

$product_list = "";
$sql = mysql_query("SELECT * FROM products");
$productCount = mysql_num_rows($sql);
if($productCount > 0){
    while($row = mysql_fetch_array($sql))   {
    $id = $row["id"];
    $name = $row["name"];
    $catagory = $row["catagory"];
    $price = $row["price"];
    $product_list .="";
    }
    }
    else {
    $product_list = "You have no products";
    }

?>
<?php echo $product_list; ?>

 <here is a form that contains all required data    

<?php include 'includes/overall/footer.php' ; ?> 
```

任何想法都可以使用，因此我们可以以管理员身份将产品添加到数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:16:00.877

错误在它自己中很明显`Column count doesn't match value count`。在您的查询值中包含`now`最后，而您忘记提及它的相应列。

您的专栏：

```
name,price,shipping,quantity,description,keywords,category 
```

而价值观：

```
'$name','$price','$shipping','$quantity','$description','$keywords','$category',now 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:15:55.810

此查询有问题，我认为您错过了一个字段

```
$sql = mysql_query("INSERT INTO products (name,price,shipping,quantity,description,keywords,category)VALUES
('$name','$price','$shipping','$quantity','$description','$keywords','$category',now)") or die(mysql_error()); 
```

这里有7个字段

```
name,price,shipping,quantity,description,keywords,category 
```

但是这里有8个值，

```
'$name','$price','$shipping','$quantity','$description','$keywords','$category',now 
```

所以找出`now`值的字段名称，这将解决问题。

**笔记：**

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。

# xsl-fo - xsl:number - 排除某些元素

> ID：15452789
> 
> 赞同：0
> 
> 时间：2013-03-16T18:08:25.507
> 
> 标签：xsl-fo

在 xsl fo 中，我需要标记/计算一个名为`prcitem1`using的元素`xsl:number`，但我只想定位`prcitem1`具有名为 的第二个后代的元素`para`。

编号的工作原理是唯一标记的元素是我刚刚描述的元素，但是如果有一个`prcitem1`元素不符合标准，即使没有显示标签，它仍然会被计算在内。这会导致编号不正确，就像它会从 B. 而不是 A. 开始，因为第一个`prcitem1`元素不符合条件但仍被计算在内。

我正在使用`<xsl:number count="self::*[./prcitem1/para] format="A" from="task"`. Task 是 for 的包含元素`prcitem1`，我从`prcitem1`模板内部开始计数。有谁知道如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:52:54.157

你应该只需要这样计算`prcitem1[para]`：

```
<xsl:number format="A" from="task" count="prcitem1[para]"/> 
```

这是一个例子。它可能与您的不完全匹配，但应该接近...

**XML 输入**

```
<doc>
    <task>
        <prclist1>
            <prcitem1>
                <prcitem>
                    <para>prcitem 1A</para>
                </prcitem>
            </prcitem1>
            <prcitem1>
                <prcitem>
                    <para>prcitem 2A</para>
                </prcitem>
            </prcitem1>
            <prcitem1/>
            <prcitem1>
                <prcitem>
                    <para>prcitem 4A</para>
                </prcitem>
            </prcitem1>
        </prclist1>
        <prclist1>
            <prcitem1>
                <prcitem>
                    <para>prcitem 1B</para>
                </prcitem>
            </prcitem1>
            <prcitem1/>
            <prcitem1>
                <prcitem>
                    <para>prcitem 3B</para>
                </prcitem>
            </prcitem1>
            <prcitem1>
                <prcitem>
                    <para>prcitem 4B</para>
                </prcitem>
            </prcitem1>
        </prclist1>
    </task>
</doc> 
```

**XSLT 2.0**（将按原样作为 1.0 工作。）

```
<xsl:stylesheet version="2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="doc">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="my-page" page-width="8.5in" page-height="11in">
                    <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="my-page">
                <fo:flow flow-name="xsl-region-body">
                    <xsl:apply-templates/>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>

    <xsl:template match="prclist1">
        <fo:list-block font-size="10pt" provisional-distance-between-starts="24pt" space-before=".1in" space-after=".1in" keep-with-next.within-page="always">
            <xsl:apply-templates/>
        </fo:list-block>
    </xsl:template>

    <xsl:template match="prcitem1[prcitem/para]">
        <fo:list-item>
            <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                <fo:block>
                    <xsl:number format="A" from="task" count="prcitem1[prcitem/para]"/>
                </fo:block>
            </fo:list-item-label>
            <fo:list-item-body start-indent="body-start()" font-size="12pt">
                <fo:block>
                    <xsl:apply-templates select="prcitem/para"/>
                </fo:block>
            </fo:list-item-body>
        </fo:list-item>
    </xsl:template>

</xsl:stylesheet> 
```

**FO 输出**

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <fo:layout-master-set>
      <fo:simple-page-master master-name="my-page" page-width="8.5in" page-height="11in">
         <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
      </fo:simple-page-master>
   </fo:layout-master-set>
   <fo:page-sequence master-reference="my-page">
      <fo:flow flow-name="xsl-region-body">
         <fo:list-block font-size="10pt"
                        provisional-distance-between-starts="24pt"
                        space-before=".1in"
                        space-after=".1in"
                        keep-with-next.within-page="always">
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>A</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 1A</fo:block>
               </fo:list-item-body>
            </fo:list-item>
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>B</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 2A</fo:block>
               </fo:list-item-body>
            </fo:list-item>
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>C</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 4A</fo:block>
               </fo:list-item-body>
            </fo:list-item>
         </fo:list-block>
         <fo:list-block font-size="10pt"
                        provisional-distance-between-starts="24pt"
                        space-before=".1in"
                        space-after=".1in"
                        keep-with-next.within-page="always">
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>A</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 1B</fo:block>
               </fo:list-item-body>
            </fo:list-item>
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>B</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 3B</fo:block>
               </fo:list-item-body>
            </fo:list-item>
            <fo:list-item>
               <fo:list-item-label end-indent="label-end()" font-size="12pt" font-weight="bold">
                  <fo:block>C</fo:block>
               </fo:list-item-label>
               <fo:list-item-body start-indent="body-start()" font-size="12pt">
                  <fo:block>prcitem 4B</fo:block>
               </fo:list-item-body>
            </fo:list-item>
         </fo:list-block>
      </fo:flow>
   </fo:page-sequence>
</fo:root> 
```

**PDF 输出**

![在此处输入图像描述](../Images/20b8f240fe0ce97f047741e784c9ae8a.png)

# macos - ASN1 OID 和翻译的 Mac 列表

> ID：15452796
> 
> 赞同：1
> 
> 时间：2013-03-16T18:09:11.840
> 
> 标签：macos, certificate, asn.1

我正在寻找 Apple 证书 QuickLook 查看器使用的所有 OID 的规范列表，以及它们的显示名称。

最好用英语和所有其他语言。当然必须有某种包含这些的字符串文件。

例如：

```
"2.5.4.3" = "Common Name";
"2.5.4.6" = "Country Name";
"2.5.4.7" = "Locality Name";
"2.5.4.8" = "State of Province Name";
"2.5.4.9" = "Street Address";
"2.5.4.10" = "Organization Name";
"2.5.4.11" = "Organizational Unit Name";
"2.5.4.13" = "Description";
"2.5.4.17" = "Postal Code";

"1.2.840.113549.1.1.1" = "RSA Encryption";
"1.2.840.113549.1.1.4" = "MD5 with RSA Encryption";
"1.2.840.113549.1.1.5" = "SHA-1 with RSA Encryption";

"1.2.840.113549.1.9.1" = "E-Mail Addresse";

"1.2.840.113635.100.4.7" = "Apple ID Sharing Certificate";

"1.2.840.113635.100.6.1.2" = "Apple Developer Certificate (Development)";
"1.2.840.113635.100.6.1.4" = "Apple Developer Certificate (Submission)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:57:41.290

原始字符串位于以下文件中：

/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/Resources/English.lproj/OID.strings

请注意，在我的系统（OS X 10.8.3）上，该文件是二进制编码的 .strings 文件，而不是通常的 UTF-16 类型。要查看它，您可能需要使用以下方法进行转换`plutil`：

```
plutil -convert xml1 -o ~/Desktop/OIDXML.strings \
/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/Resources/English.lproj/OID.strings 
```

虽然这些是最终产品，但 Apple 还以 AppleGlot 词汇表的形式为开发人员提供来自 OS X 中所有本地化资源的字符串，可从[https://developer.apple.com/downloads/index.action?name下载=本地化](https://developer.apple.com/downloads/index.action?name=localization)。

对于大约 30 种语言中的每一种，每个可本地化的产品都有大约 500 个左右的 AppleGlot`.lg`词汇表。您需要的是`SecurityFoundation.12A269.<language code>.lg`，其中`<language code>`是语言的缩写（例如，`E`西班牙语、`D`德语等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:15:07.780

OID 不是集中注册的，而是组织可以获得节点的所有权并在该节点下分配新的 OID。因此，很难获得已分配 OID 的完整列表。

但是，有些数据库会收集大量 OID，例如： [OID 存储库](http://www.oid-info.com/)

# ruby-on-rails - 在 ruby 中创建一个与模型无关的字段

> ID：15452801
> 
> 赞同：0
> 
> 时间：2013-03-16T18:09:29.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想知道如何创建与模型无关的字段，我需要该字段的唯一原因是确定要对其执行哪些操作。

假设我有一篇模型文章，并且在创建新文章时，我想要一个隐藏字段，该字段将具有 0,1,2，在新控制器中，我会查看参数是否等于 0，然后执行此设置的逻辑或 1 那么这组逻辑。

谢谢，我也知道为每个动作定义一组动作是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:21:13.167

在表单中，您可以声明与模型不直接关联的隐藏和可见字段。当您提交表单时，您可以在表单的操作中操作`params`与模型无关的属性。

当您声明表单字段时，您可以使用以`_tag`like `email_field_tag`、`radio_button_tag`和关于您的问题 、结尾的字段`hidden_field_tag`。例子：

```
<% hidden_field_tag 'this_is_hidden' %> 
```

试一试并检查动作中的内容：`raise params.inspect`. 在这样做时，您会注意到`params`now 包含您声明的与您的模型无关的属性的键（如属性`:this_is_hidden`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:13:51.890

尝试使用 hidden_​​field_tag 进行操作。（建议：将其放在表单标签内的提交按钮之前。）

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-hidden_​​field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-hidden_field_tag)

```
hidden_field_tag 'decide', '0' 
```

然后在控制器的新动作中，您可以在 params 哈希中捕获它，并将其与 params[:decide].to_i 进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:38:16.920

最简单的方法是有一个隐藏字段作为@Zippie，提到。但是它有一些风险，因为最终用户可以修改隐藏字段中的值，并且您的程序可能会有不同的行为。

我个人认为有某种方法可以从传递的参数中识别

```
Ex: if it is a new object then it should go to method A etc... 
```

通过这种方式，最终用户将没有机会修改工作流程。

# php - 使用 $.post 将 JS 变量发送到 PHP 脚本

> ID：15452802
> 
> 赞同：3
> 
> 时间：2013-03-16T18:09:29.810
> 
> 标签：php, javascript, .post

我正在尝试将 Javascript 变量发送到 PHP 脚本以更新问答游戏的分数。我查找了执行此操作的速记方法，即 $.post，但我无法检索 PHP 脚本中的值。我相当不熟悉哪个 JS，并且需要帮助我做错了什么。

这是Javascript

```
function updatescore(){
            var thisgamemarks= 2300;
            var thequizid = 5;
            $.post("updatemark.php", { quizidvalue: thequizid, newmarkvalue: thisgamemarks } );
            } 
```

和 PHP

```
$studentnewmark = $POST['newmarkvalue'];
$thisquizid = $POST['quizidvalue'];
$thisstudentid = $_SESSION['studentid']; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T18:22:19.797

键入 $_POST 而不是 $POST。此外，在基于 Windows 的机器上，您可以使用 ctrl + shift + j 来调试 js 脚本 - 如果您的代码有任何问题，这将有所帮助。但是，您向我们展示的 js 代码看起来非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:25:46.327

是的。正如建议使用 $_POST 而不是 $POST 并尝试将“quizidvalue”放在javascript中的引号内。它可能会有所帮助。只是一个想法。我总是这样做。

# css - 悬停时的CSS3暗图像

> ID：15452805
> 
> 赞同：0
> 
> 时间：2013-03-16T18:09:47.627
> 
> 标签：css

我有 .css 这使我的图像在悬停时更暗：

```
a.darken {
    display: inline-block;
    background: #222222;
    padding: 0;
}

a.darken img {
    display: block;

    -webkit-transition: all 0.5s linear;
       -moz-transition: all 0.5s linear;
        -ms-transition: all 0.5s linear;
         -o-transition: all 0.5s linear;
            transition: all 0.5s linear;
}

a.darken:hover img {
    opacity: 0.1;

} 
```

我想知道如何更改它，使其在正常状态下变暗并且在悬停时正常​​？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:11:53.897

将 移至`opacity: 0.1`正常状态并将其恢复为`1.0`悬停状态：

```
a.darken img {
    display: block;
    opacity: 0.1;

    -webkit-transition: all 0.5s linear;
       -moz-transition: all 0.5s linear;
        -ms-transition: all 0.5s linear;
         -o-transition: all 0.5s linear;
            transition: all 0.5s linear;
}

a.darken:hover img {
    opacity: 1.0;
} 
```

# jquery - 使用 jQuery 删除内部 UL 和 Li 元素

> ID：15452814
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:10:35.983
> 
> 标签：jquery, html-lists, detach

我已经像这样构建了 UL/Li

```
<ul>
 <li><a>1.1</a></li>
 <li>.....</li>
 <li><a>1.N</a></li>
    <ul>
      <li><a>2.1</a></li>
         <ul>
           <li><a>3.1</a></li>
           .....
           <li><a>3.N</a></a></li>
         </ul>
    </ul> 
</ul> 
```

我想删除所有 UL 和 LI 元素并保留所有标签。我的目标是将菜单作为多行字符串。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:22:21.833

看看这是否对您有帮助：

JS：

```
var tags = $("ul li").map( function(){
          return $(this).html();
        }).get();      // get all tags in an Array.  I suspect you meant Array by saying `multi row strings`
$("#main ul").remove();

$("#main").append(tags); 
```

字体 Html;

```
<div id="main">
<ul>
 <li><a>1.1</a></li>
 <li><a>1.N</a></li>
 <li><ul>
      <li><a>2.1</a></li>
       </li><ul>
           <li><a>3.1</a></li>
           <li><a>3.N</a></a></li>
         </ul>
       </li>
    </ul>
</li>
</ul>
</div> 
```

[样本](http://jsfiddle.net/S9GXe/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:18:57.423

首先，您需要修复您的 HTML。您不能`ul`在其他`ul`元素中包含元素，它们必须在`li`元素中：

```
<ul>
  <li><a>1.1</a></li>
  <li><a>1.2</a></li>
  <li>
    <a>1.N</a>
    <ul>
      <li>
        <a>2.1</a>
        <ul>
          <li><a>3.1</a></li>
          <li><a>3.N</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

要删除列表并保留链接，请将链接移出列表，然后删除列表。例如：

```
$('ul>li>a').appendTo(document.body);
$('ul').remove(); 
```

演示：http: [//jsfiddle.net/kRBRC/](http://jsfiddle.net/kRBRC/)

# web-services - Web 服务的 PostConstruct 在 servlet 上下文侦听器的 contextInitialized 之前调用

> ID：15452815
> 
> 赞同：1
> 
> 时间：2013-03-16T18:10:47.567
> 
> 标签：web-services, migration, jax-ws, tomcat7, tomcat6

我需要将 Web 服务应用程序从 Tomcat 6（使用 JDK 1.5）迁移到 Tomcat 7（使用 JDK 1.6）（实际上是在 7.0.27 上测试）。JAX-WS 框架是 Metro 2.1。

我正在使用两个 ServletContextListener：

1.  “WebAppListener”：初始化应用程序（配置，数据库连接的设置......）。

2.  “com.sun.xml.ws.transport.http.servlet.WSServletContextListener”：创建 Web 服务的 Metro 监听器。

顺序很重要，因为我需要在我的 Web 服务上调用 @PostConstruct 方法之前完全初始化我的 Web 应用程序。

在 Tomcat 6 中，这非常有效：

```
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
mars 16, 2013 5:13:13 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive WSWebApp.war
************************ IN WebAppListener.contextInitialized ***********************
************************ IN WSMyWebService.postConstruct **************************** 
```

然而，在 Tomcat 7 中完全相同的战争：

```
mars 16, 2013 6:45:24 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\home\tomcat\webapps\WSWebApp.war
************************ IN WSMyWebService.postConstruct ****************************
************************ IN WebAppListener.contextInitialized *********************** 
```

我认为调用侦听器的顺序是它们在 web.xml 中出现的顺序？

为什么在 Tomcat 7 中更改了此顺序？但更重要的是：我需要做什么才能恢复“Tomcat6”订单？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:05:39.470

答案在于 Servlet 规范 2.5 和 Servlet 规范 3.0 之间的区别。

在**Servlet 规范 2.5**中，调用侦听器的顺序由它们在部署描述符 (web.xml) 中的声明顺序定义：

> SRV.10.3.3 监听器注册。
> Web 容器创建每个侦听器类的实例，并在应用程序处理第一个请求之前为事件通知注册它。**Web 容器根据它们实现的接口以及它们在部署描述符中出现的顺序来注册监听器实例。在 Web 应用程序执行期间，侦听器按照注册的顺序被调用。**

在**Servlet 规范 3.0**中，调用侦听器的顺序由部署描述符 (web.xml) 中的元素**<absolute-ordering>定义：**

> 8.2.3 从 web.xml、webfragment.xml 和注解中组装描述符。
> ...
> c。*在此规范发布之前，上下文侦听器是以随机顺序调用的*。

恕我直言，这是错误的，如上面 2.5 版规范中所述。:-)

> 从 Servlet 3.0 开始，监听器按照它们在 web.xml 中声明的顺序被调用，如下所示
> ：javax.servlet.ServletContextListener 的实现在它们的 contextInitialized 方法**中按照它们被声明的顺序**被调用，并在它们的 contextDestroyed 方法中以相反的顺序被调用。

这根本**不像**你想象的那样有效，是我的麻烦、困惑和失去周末的根源。;-) **它与以前的顺序不同（2.5 规范）！**

但还有更多......（AHA时刻即将到来！）

> 8.2.2 web.xml 和 web-fragment.xml 的排序 由于规范允许应用程序配置资源由多个配置文件（web.xml 和 web-fragment.xml）组成，从多个不同的地方发现和加载应用时，必须解决排序问题。
> ...
> 必须考虑两种情况以允许应用程序配置资源表达它们的排序偏好。
> 1.**绝对排序：** web.xml 中的**<absolute-ordering>**元素。一个。在这种情况下，必须忽略下面的情况 2 处理的排序首选项。
> 2.**相对排序：**一个**<ordering>**web-fragment.xml 中的元素。一个。web-fragment.xml 可能有一个 <ordering> 元素。如果是这样，该元素必须包含零个或一个 <before> 元素和零个或一个 <after> 元素。下面解释这些元素的含义。

所以，就我而言，我有两个选择：

1.  坚持使用 2.5 版：这在 Tomcat 6 和 7 上运行良好，但只是将问题转移到未来。
2.  迁移到规范的 3.0 版并相应地调整我的部署描述符：

    *   更新 web-app 元素中的版本和架构，当然：

    <web-app xmlns="http://java.sun.com/xml/ns/javaee **"** xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http ://java.sun.com/xml/ns/ **javaee** **http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd** ["](http://java.sun.com/xml/ns/)版本 = **"3.0"** >

     *****   添加一个 <absolute-ordering> 元素来定义监听器的处理顺序：

    **<absolute-ordering> <name>bootstrap</name><name>ws</name><others/></absolute-ordering>**
    <listener **id="bootstrap** ">
       <listener-class>lu.estiedi.ws。 WebAppBootstrap</listener-class>
    </listener>
       <listener **id="ws"** >
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>**** 

 ****注意**<others/>**元素：如果它不存在，那么未命名的侦听器将不会被处理。

**编辑：**

这实际上并不能解决问题。它昨天在家里消失了，但今天早上在工作中解决方案不起作用。:-(

看起来 Metro 正在使用服务提供者**ServletContainerInitializer**，它**在 Listeners 之前被调用**。

如果这是它应该工作的方式，那么 PosConstruct 方法总是在侦听器上的 contextInitialized 之前调用。*那么，在*创建 Web 服务之前，我们在哪里初始化我们的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T14:54:54.937

这不是关于监听器的顺序，而是关于 servlets 规范 3.0 的一个新特性，以及你可能正在使用像 METRO 这样的 JAX-WS 实现这一事实，我想。在 servlets 规范 3.0（第 8.2.4 章）中，有一种方法可以将 3rd 方插件或 API 添加到容器（在本例中为 Tomcat），例如 JAX-WS、JAX-RS、JSF 等实现。它也被称为广告 SCI (javax.servlet.ServletContainerInitializer)。简而言之，METRO JAX-WS jar 使用这种方式，因此不必在 web.xml 描述符文件中添加侦听器 (com.sun.xml.ws.transport.http.servlet.WSServletContextListener) 和 servlet 配置。它使用 sun-jaxws.xml 文件列出 ws 端点并在部署 Web 应用程序和执行之前实例化 ws 类，例如，侦听器的方法 contextInitialized。

为避免这种情况，只需按照说明在 Tomcat 中避免 SCI 机制：[如何使 Tomcat 启动更快？](http://wiki.apache.org/tomcat/HowTo/FasterStartUp)

Context 元素上存在一个属性，containerSciFilter。它可用于禁用通过 SCI API 插入 Tomcat 的容器提供的功能：WebSocket 支持（在 Tomcat 7 及更高版本中）、JSP 支持（在 Tomcat 8 及更高版本中）。

可以通过查看 Tomcat JAR 中的 META-INF/services/javax.servlet.ServletContainerInitializer 文件来检测要过滤的类名。对于 WebSocket 支持，名称是 org.apache.tomcat.websocket.server.WsSci，对于 JSP 支持，名称是 org.apache.jasper.servlet.JasperInitializer。

它与 JAX-WS 一起为我工作，它只使用 web.xml 配置来部署 Web 服务。****

# c++ - 如何验证条件变量是否已初始化？

> ID：15452816
> 
> 赞同：1
> 
> 时间：2013-03-16T18:10:52.163
> 
> 标签：c++, qt, asynchronous, race-condition, condition-variable

我在解决获取锁时出现的竞争条件时遇到了一些麻烦。我有一个异步触发的大型计算。我需要在大型任务开始之前结束我之前的同步任务。大任务启动并等待条件变量，在理想情况下，小任务将在完成时通知条件变量。我的问题来自于大任务启动得太早，小任务触发了一个尚未完全初始化的条件变量，因此实际上并没有触发，导致程序被锁定。

我把它归结为这个最小的例子。

我认为这是一个常见问题。如何检查我的条件变量是否实际上已获得互斥锁并被锁定？

```
#include <QCoreApplication>
#include <QObject>
#include <QFuture>
#include <QtConcurrent/QtConcurrent>
#include <QFutureWatcher>
#include <QWaitCondition>

class workUnit: public QObject
{
    Q_OBJECT

    public:
    workUnit(QObject *parent)
    {
        m = new QMutex();
        m->lock();
        w=new QWaitCondition();
    }
    QWaitCondition* w;
    QMutex* m;

public slots:
    void runMe()
    {
        w->wait(m);
        m->unlock();
        //perform long computation
    }
};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    workUnit* mUnit=new workUnit(&a);
    QFutureWatcher<void> w;
    QObject::connect(&w, SIGNAL(finished()), &a, SLOT(quit()));
    QFuture<void> f = QtConcurrent::run(mUnit,&workUnit::runMe);
    w.setFuture(f);
    _sleep(1000);//with this delay it works, without the delay it doesn't
    mUnit->w->wakeAll();//This would be triggered by another process
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:58:13.263

的文档`QWaitCondition::wait`指出：

> 互斥锁最初必须**由调用线程**锁定。

您应该`m->lock();`从构造函数中删除并将其放入`runMe()`函数中，然后再调用`wait`.

# java - 将图像放在相机预览的顶部

> ID：15452819
> 
> 赞同：0
> 
> 时间：2013-03-16T18:11:28.557
> 
> 标签：java, android, android-camera, surfaceview

我是 Android 开发的新手。

我正在制作一个儿童游戏，当用户单击相机按钮时，它将调出相机预览，其中包含一些角色的图像。我尝试了各种示例，但似乎无法正常工作。

目前我正在使用以下意图打开相机：

```
public void camerabuttonClick(View view) {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, 1337);

} 
```

根据我所读到的，我无法在我所描述的情况下使用它。我使用的一些示例将 SurfaceView 放在相对布局中的一些 ImageView 后面，但我对此没有任何运气。

有没有人有任何想法？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:17:53.150

在这里你需要做些什么来实现这一点

1）使用surfaceview创建自定义相机界面。[答案链接](https://stackoverflow.com/questions/8543244/custom-camera-android?rq=1)

2）在相对布局中添加surfaceview和image。这里的图像将与相机预览重叠。

试试这个，它对我有用。

# python - pydoc 支持 python 元数据，例如 __version__ = '0.1'

> ID：15452828
> 
> 赞同：7
> 
> 时间：2013-03-16T18:12:29.053
> 
> 标签：python, pydoc

我什至不确定这些东西的正式名称，不过，Python 有元数据，通常位于模块文件的顶部，例如`__version__ = '0.1'`.

如何找到 PyDoc 支持的所有列表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T21:10:12.160

任何遵循特定命名约定的顶级私有全局变量都将包含在**Pydoc**`Data`生成的部分下：

 ***   所有正常的全局变量都显示在那里——你可以通过在一个带有一些全局变量的模块上运行**pydoc**来看到这一点，否则这些变量是空的。
*   显示“特殊”名称（但不显示私有名称）：类似`__SomeClass__`或`__a_special_variable__`将显示名称，但不会显示类似名称`__this_is_private`。
*   [显示命名元组](https://stackoverflow.com/questions/2970608/what-are-named-tuples-in-python)，以及与指定它们的模式匹配的任何内容：对象的名称以开头`_`并且对象具有`_fields`属性（即，它具有公共字段）。

这些基本规则有例外；保留列表中的名称*没有*得到相同的处理：

```
{'__author__', '__builtins__', '__cached__', '__credits__',
 '__date__', '__doc__', '__file__', '__initializing__',
 '__loader__', '__module__', '__name__', '__package__',
 '__path__', '__qualname__', '__slots__', '__version__'} 
```

Pydoc 将自动为`__version__`、`__date__`、`__author__`和`__credits__`. 其他是“冗余的或内部的”（例如`__name__`并`__package__`分配给它们自己的部分，但无论您是否设置它们，Pydoc 也会自动生成这些字段）。

所有这些都可以通过浏览[源](http://hg.python.org/cpython/file/3.3/Lib/pydoc.py)找到，但似乎没有任何其他地方可以编译这些信息——或者至少，在谷歌中没有一个排名很高的地方。**

# c# - 反编译 .net 程序集

> ID：15452829
> 
> 赞同：1
> 
> 时间：2013-03-16T18:12:29.247
> 
> 标签：c#, .net, vb.net, deobfuscation

嘿，我在学习 c# 时已经在 .net 中进行了一些反编译，所以它有助于我查看代码，因为它有很大帮助。但最近我遇到了一些我知道是 .net 但在反射器中显示为非 .net 程序集的程序。这是名为：Proxy Multiply 的程序示例。

我不想做任何非法的事情或其他事情。只是想学习。我试图用谷歌搜索，但我无法取得任何好的结果。谢谢这里是图片的链接。

![图片](../Images/23d67c38695bf61c4234b07fcaa33378.png)

![De4Dot 错误](../Images/baf520cfd7f42629e240cf395e793ec2.png)

![PEid 截图](../Images/55af4e7b7de8ac2f6e10cacd617f7512.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:16:24.500

我之前对 dot net reflector 也有同样的问题，尝试[JetBrains dotPeek 1.0 版](http://www.jetbrains.com/decompiler/)反编译（此应用程序将显示混淆的代码）

> 1.  将 .NET 1.0-4.5 程序集反编译为 C#
> 2.  支持 .dll、.exe、.zip、.vsix、.nupkg 和 .winmd 文件
> 3.  快速跳转到类型、程序集、符号或类型成员
> 4.  轻松导航到符号声明，
> 5.  实现、派生符号和基本符号等
> 6.  准确搜索符号用法
> 7.  具有搜索结果的高级呈现
> 8.  继承链概述
> 9.  支持从源服务器下载代码
> 10.  语法高亮
> 11.  完整的键盘支持
> 12.  dotPeek 是免费的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:17:51.633

有许多 .Net 代码保护替代方案，即`obfuscate`IL 代码，因此它们不会太多暴露于 IL 反汇编程序应用程序。

*   .Net 反应堆
*   泰米达
*   智能装配
*   清单很大。. .

许多保护程序修改了 Exe（PE Header info），.Net exe 包含一些额外的元数据，有助于反汇编程序识别它。

下载这个小应用程序，它可能会告诉你更多关于 exe 的信息。

下载[PEID 0.95](http://www.softpedia.com/get/Programming/Packers-Crypters-Protectors/PEiD-updated.shtml)

> PEiD 是一个直观的应用程序，它依靠其用户友好的界面来检测 PE 可执行文件中的加壳程序、加密程序和编译器——它的检测率高于其他类似工具，因为该应用程序在 PE 文件中打包了 600 多个不同的签名。
> 
> PEiD 带有三种不同的扫描方法，每种方法都适用于不同的目的。Normal 会在其入口点扫描用户指定的 PE 文件以查找其所有包含的签名。所谓的深度模式具有更高的检测率，因为它扫描文件的入口点包含部分，而硬核模式扫描整个文件以查找所有记录的签名。

### 我最好的猜测是您正在寻找的程序集受保护`.Net Reactor`或`Themida`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:14:12.373

仅仅因为它是 .NET 并不意味着您可以像那样反编译它。他们可能使用了ILMerge。这并不是说这是不可能的，但它需要更多的工作。

请参阅[是否可以“反编译” Windows .exe？或者至少查看大会？](https://stackoverflow.com/questions/273145/is-it-possible-to-decompile-a-windows-exe-or-at-least-view-the-assembly)

# sql - 根据行中存在的逗号分隔 id 获取数据 - SQL

> ID：15452832
> 
> 赞同：1
> 
> 时间：2013-03-16T18:12:39.450
> 
> 标签：sql, sql-server, sql-server-2008, procedure

**表格1**

```
 HolId
1   Package17   2,1,5
2   Package13   5,4,3 
```

**表 2**

```
 HolId1
    1   New Years Day   2013-01-01 00:00:00.000
    2   Republic Day    2013-01-26 00:00:00.000
    3   Holi            2013-04-27 00:00:00.000
    4   Memorial Day    2013-05-27 00:00:00.000
    5   US Independence 2013-07-04 00:00:00.000
    7   Labour Day  2013-09-02 00:00:00.000 
```

我想显示如下数据

```
 HolId    HolId1
Package17   2   2   Republic Day    2013-01-01 00:00:00.000
Package17   1   1   New Years Day   2013-04-27 00:00:00.000
Package17   5   5   US Independence 2013-05-27 00:00:00.000
Package13   5   5   US Independence 2013-07-04 00:00:00.000
Package13   4   4   Memorial Day    2013-05-27 00:00:00.000
Package13   3   3   Holi            2013-04-27 00:00:00.000 
```

我的网格将显示如下，我已经弄清楚了

```
Package17

     Republic Day   2013-01-01 00:00:00.000
    New Years Day   2013-04-27 00:00:00.000
    US Independence 2013-05-27 00:00:00.000

Package13   

    US Independence 2013-07-04 00:00:00.000
    Memorial Day    2013-05-27 00:00:00.000
    Holi            2013-04-27 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:24:30.617

这是解决方案`MySQL`：

```
SELECT
T1.Pkg, T2.*
FROM Table2 T2
    JOIN Table1 T1
        ON FIND_IN_SET(T2.HolID1, T1.HolID) 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/30c3c/4)**

这是为了`SQL SERVER`

```
SELECT
T1.Pkg, T2.*
FROM Table2 T2
    JOIN Table1 T1
        ON CHARINDEX(CAST(T2.HolID1 as varchar), T1.HolID) > 0 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/314dd/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:12:54.757

最好对您的表进行反规范化，然后只需一次连接即可获得结果。如果您必须使用当前架构。希望以下代码对您有所帮助。

```
 declare @tempTable table 
     ( Package_Name varchar(100),
       Holid int
       )

declare @SQLString varchar(max)
declare @package_name varchar(100)
set @SQLString = ''
DECLARE @X XML
while @SQLString is not null
begin
set @SQLString = null
select top 1 @package_name=package_name, @SQLString = Holid 
from Package 
where package_name not in (select package_name from @tempTable)
if @SQLString is null
   break
SET @X = CAST('' + REPLACE(@SQLString, ',', '') + '' AS XML)
insert into @tempTable
SELECT @package_name, t.value('.', 'INT')
FROM @x.nodes('/A') as x(t)
end
select * from @tempTable
select A.**, B.*** from @tempTable A
inner join HolID1 B
on A.Holid = B.HolID1 
```

# c++ - netbeans 7.3 构建主机 c/cpp

> ID：15452835
> 
> 赞同：0
> 
> 时间：2013-03-16T18:13:30.507
> 
> 标签：c++, c, netbeans, build, host

我是 Netbeans 的新手，我刚刚安装了具有完整功能的 Netbeans 7.3。我尝试运行 c/c++ 项目，但似乎我对这个“构建主机”有问题。我在尝试添加新的远程主机时尝试添加我研究所的代理地址，但它说它无法连接到给定的地址。是否真的需要提供远程主机来运行 ac/c++ 项目。否则请建议我解决这个问题的解决方案。如果可能的话，请解释一下这个构建主机和东西。我会非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T17:49:50.360

我的计算机上没有 IDE 工作，只有 devc++ 和 turboc，这两个太糟糕了，我想要 vc++ express 或 netBean c++，但没有任何工作！我不知道为什么，但我讨厌这种情况，这太糟糕了！:(

# c# - 排序视觉节点数组

> ID：15452836
> 
> 赞同：1
> 
> 时间：2013-03-16T18:13:36.890
> 
> 标签：c#, list, nodes, placement, mindmapping

首先，我将大致展示我在这里尝试完成的工作。 [想要的效果。](http://img826.imageshack.us/img826/889/desiredeffect.png) 请注意，这并不准确，因为当前系统无法正常工作。这就是我在这里的原因。

我一直在尝试解决这个问题一段时间。到目前为止，我得到了这段代码，但它不能正常工作。

```
public double UpdateChildPosition(bool fromParent)
    {
        if (children.Count == 0)
            return 0;

        if (!fromParent && parentnode != null)
        {
            parentnode.UpdateChildPosition(false);
            return 0;
        }

        double cwidth = 0;
        if ((fromParent && children.Count > 0) || parentnode == null)
            children.ForEach((n) => cwidth += n.UpdateChildPosition(true));

        double width = children.Sum((n) => n.rectangle1.Width + 10) + cwidth / 2;
        double x = 0 - width / 2;
        foreach (MindmapNode node in children)
        {
            node.x = x;
            x += node.rectangle1.Width + 10 + cwidth / children.Count;
            node.y = 50;
        }
        return width;
    } 
```

相反，它创建了这个：

[![当前效果图](../Images/e283173ecd619b4f06878e8538a086c5.png)](https://i.stack.imgur.com/Dp1I1.png)

我提供的信息可能太少了，但我不确定需要多少。询问更多信息。谢谢！

由于新帐户，不让我发布图像。

**编辑** 我忘了说，在我的系统中，坐标是相对于父级的。

**EDIT2** 我取得了一些进展。当前的问题是：当节点的大小发生变化（是的，它们是动态的）时，它们会重叠。

```
List<MindmapNode> children;
public double UpdateChildPosition(bool fromParent)
    {
        if (children.Count == 0)
            return rectangle1.Width + 10;

        if (!fromParent && parentnode != null)
        {
            parentnode.UpdateChildPosition(false);
            return 0;
        }

        double[] childrenwidth = new double[children.Count];

        //if ((fromParent && children.Count > 0) || parentnode == null)
        List<MindmapNode> rchildren = (from n in children
                                       where n.moved == false
                                       select n).ToList();
        (from n in children
         where rchildren.Contains(n) == false
         select n).ToList().ForEach((n) => n.UpdateChildPosition(true));

        int i = 0;
        rchildren.ForEach((n) => childrenwidth[i++] =
            Math.Max(n.UpdateChildPosition(true), (n.children.Count > 0) ? n.rectangle1.Width * 2 : 0));

        double width = childrenwidth.Sum();
        double x = -width / 2;
        i = 0;
        foreach (MindmapNode node in rchildren)
        {
            x += childrenwidth[i] / 2;
            node.x = x;
            x += childrenwidth[i] / 2;
            node.y = 50;
            i++;
            node.SetOrigin();
        }
        return width;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:24:32.303

这应该适用于每个父母：

```
X = ( (children.Last.Right - children.First.Left) / 2 ) - Width / 2; 
```

在我看来，这是对所需内容的定义，直接翻译成代码。

# symfony - 尝试使用 Solr 和 Symfony2 索引文档时找不到类

> ID：15452844
> 
> 赞同：0
> 
> 时间：2013-03-16T18:14:22.020
> 
> 标签：symfony, solr, indexing, solarium

我对 Solr 很陌生，但我可能缺少一些简单的东西，但是在遵循[Xavier Briand 的](http://xavierbriand.github.com/training-solr/#/uber-feature-again)演示文稿后，我设置了 Symfony2、Solarium 和 Nelmio\SolariumBundle。

```
"nelmio/solarium-bundle": "2.0.*@dev",
"solarium/solarium": "3.0.*" 
```

为我的学说 php 对象实现了 toSolrDocument 方法。

```
public function toSolrDocument(\Solarium_Document_ReadWrite $doc)
{
    $doc->id          = $this->getId();
    $doc->description = $this->getTitle();
    $doc->path        = "path";

    return $doc;
} 
```

我面临以下错误。

> 可捕获的致命错误：传递给 ::toSolrDocument() 的参数 1 必须是 Solarium_Document_ReadWrite 的实例，给定的 Solarium\QueryType\Update\Query\Document 的实例，在 Controller.php 中调用

调用此 toSolrDocument 方法的控制器具有以下功能

```
public function indexItems(){

    $client = $this->get('solarium.client');

    // get an update query instance
    $update = $client->createUpdate();

    // create documents
    $documents = array();

    $em = $this->getDoctrine()->getManager();
    $repo = $em->getRepository('<Bundle>:<Object>');
    $items = $repo->findAll();

    foreach ($items as $item) {
        $documents[] = $item->toSolrDocument($update->createDocument());
    }

    // add the documents and a commit command to the update query
    $update->addDocuments($documents);
    $update->addCommit();

    // this executes the query and returns the result
    $result = $client->update($update);
} 
```

该方法的大部分内容再次直接来自 Xavier 的演示文稿，并且可以清楚地看到 $update->createDocument() 方法没有返回正确的类型。事实上，它返回 my php 对象的一个​​实例。有谁知道我在这里哪里出错了？可能有帮助的另一件事是，即使我尝试直接传递日光浴室文档，我也会遇到异常。

```
 foreach ($items as $item) {
        $rw_item = new \Solarium_Document_ReadWrite();
        $documents[] = $item->toSolrDocument($rw_item);
    } 
```

例外是

> FatalErrorException：错误：在中找不到类“Solarium_Document_ReadWrite”

我似乎在任何捆绑包中都找不到这个类，我想知道我的设置是否会导致问题。任何帮助将不胜感激。

还有一点需要注意的是，当我运行 solr jar 时，我看到查询请求来自我的 symfony2 页面，这只是我无法完成的索引操作，所以配置可能没问题，我想念理解使用的捆绑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:25:38.007

您只需要为参数使用正确的类。

```
use Solarium\QueryType\Select\Result\AbstractDocument;

...

public function toSolrDocument(AbstractDocument $doc)
{ 
```

您也不能输入提示：

```
public function toSolrDocument($doc)
{ 
```

# ios - 钥匙串 - 安全数据存储

> ID：15452847
> 
> 赞同：4
> 
> 时间：2013-03-16T18:14:41.343
> 
> 标签：ios, objective-c, xcode, keychain

我正在开发一个带有钥匙串实现的应用程序。我能够创建并将数据保存到钥匙串中。我正在使用Apple 提供的[Keychain Wrapper 类。](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Listings/Classes_KeychainItemWrapper_h.html)

根据要求，我必须在 KeyChain 中实现最佳安全性（安全团队指出了漏洞，例如它在越狱设备上的可访问性）。

有人可以给我方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:19:21.317

我还使用您引用的相同包装器在应用程序中实现了钥匙串，但是，当然有很多修改。

基本上 Keychain 是相当安全的。根据 Apple 的说法，它是一个加密容器，为多个应用程序保存安全信息，这意味着当 keychain 被锁定时，没有人可以访问其受保护的内容。

在 iOS 中，只有创建钥匙串的应用程序才能访问它。根据 Apple 的文档，iOS 可以选择 Memory-Cache 或 Disk Cache 它。

但是从 iOS 4.xx++ 开始，它只是磁盘缓存（不知道为什么），因此总是创建一个 sqlite DB，其中钥匙串中的所有数据都存储在与特定标识符相对应的位置。

Sqlite DB 可以在 root 或越狱设备上被黑客入侵。

保护钥匙串

1 添加安全关键字“ ”，同时在方法“ ”&“ ”上`kSecAttrAccessibleWhenUnlockedThisDeviceOnly`添加或
更新钥匙串中的数据。`SecItemUpdate``SecItemAdd`

就像是 ：-

```
- (void)writeToKeychain
{
    NSDictionary *attributes = NULL;
    NSMutableDictionary *updateItem = NULL;
    OSStatus result;

    if (SecItemCopyMatching((CFDictionaryRef)genericPasswordQuery, (CFTypeRef *)&attributes) == noErr)
    {
        updateItem = [NSMutableDictionary dictionaryWithDictionary:attributes];

        [updateItem setObject:[genericPasswordQuery objectForKey:(id)kSecClass] forKey:(id)kSecClass];

        NSMutableDictionary *tempCheck = [self dictionaryToSecItemFormat:keychainItemData];
        [tempCheck removeObjectForKey:(id)kSecClass];

#if TARGET_IPHONE_SIMULATOR
        [tempCheck removeObjectForKey:(id)kSecAttrAccessGroup];
#endif

        [updateItem setObject:(id)kSecAttrAccessibleWhenUnlockedThisDeviceOnly forKey:(id)kSecAttrAccessible];
        result = SecItemUpdate((CFDictionaryRef)updateItem, (CFDictionaryRef)tempCheck);
        NSAssert( result == noErr, @"Couldn't update the Keychain Item." );
        CFRelease(attributes);
    }
    else
    {
        [keychainItemData setObject:(id)kSecAttrAccessibleWhenUnlockedThisDeviceOnly forKey:(id)kSecAttrAccessible];
        result = SecItemAdd((CFDictionaryRef)[self dictionaryToSecItemFormat:keychainItemData], NULL);
        NSAssert( result == noErr, @"Couldn't add the Keychain Item." );
    }
} 
```

2 在添加到钥匙串之前加密数据。我使用 AES-128 加密。还要确保用于加密的密钥是 RSA 密钥。（由 SSL Web 服务发送）。

注意：-钥匙串数据存储在`/private/var/Keychains/keychain-2.db`iPhone 上的文件中。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T09:56:33.020

```
 [attributeDict setObject:(__bridge id)kSecAttrAccessibleWhenUnlockedThisDeviceOnly forKey:(__bridge id)kSecAttrAccessible]; 
```

# actionscript-3 - 消除儿童投掷错误

> ID：15452851
> 
> 赞同：0
> 
> 时间：2013-03-16T18:15:05.110
> 
> 标签：actionscript-3

当我想删除 Child 时出现错误 The provided DisplayObject must be a child of the caller. 我尝试了很多我在stackoverflow上找到的不同方法，但都没有奏效。

```
if(player.hitTestObject(activePowerup as DisplayObject)
{
    activePowerup.onPlayerPick(player);
    this.parent.removeChild(activePowerup as DisplayObject);
    activePowerups.splice(activePowerup, 1);
} 
```

我不知道是什么问题，但我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:43:49.987

如果您`activePowerup`绝对是 的孩子`this.parent`，那么我怀疑问题出在您的接头上。假设`activePowerups`是`Array`,`splice()`不能按预期工作（[请参阅此处的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)）。您需要给出`splice()`的*索引*：`activePowerup`

```
activePowerups.splice(activePowerups.indexOf(activePowerup), 1); 
```

否则，您可能会拼接错误的电源，然后在下次运行此代码时尝试删除同一个孩子两次。

# javascript - 使用 AJAX 调用 Ruby（非 Rails）变量

> ID：15452857
> 
> 赞同：1
> 
> 时间：2013-03-16T18:15:23.223
> 
> 标签：javascript, ruby, ajax

我在 Ruby 和 JavaScript 方面都有一些经验，但我从来没有将两者结合起来。我搜索了这个站点，发现任何可能的答案都指向我没有使用的 Rails。

我的问题是：我需要从另一个文件中提取一个变量，并使用它的数据来填充一个空的`DIV`. 我研究了一下，发现由于 JS 是客户端代码，而 Ruby 是服务器，你不能同时直接与两者进行通信。解决方案是 AJAX，但我以前用过一次 AJAX，做一些非常简单的调用。这是我的代码：

Javascript：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>

  $(function()
  {
      $.ajax({
          url: "Main.rb"
          data: '{"method" : "get_Sched_name", "variable" : "@schedules"}'
      });
  }); 
```

红宝石：

```
def get_Sched_name
  @schedules = repository.adapter.select "SELECT name FROM schedules"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:33:23.753

您可以使用 ERB 进行评估`@schedules`，即

```
data: '{"method" : "get_Sched_name", "variable" : "<%= @schedules %>"}' 
```

# java - 如何获取列表中特定类型的所有对象？

> ID：15452858
> 
> 赞同：2
> 
> 时间：2013-03-16T18:15:24.363
> 
> 标签：java, design-patterns, instanceof

如果我有一个水果列表，其中包含各种`Fruit`实现，例如`Apple`,`Banana`等。该列表是必要的，因为其他方法对列表中的所有水果执行一般操作。

如何从列表中获取特定类型的所有对象？例如所有的苹果？进行 instanceof/if-else 检查非常难看，尤其是当有很多不同的类时。

以下如何改进？

```
class Fruit;
class Apple extends Fruit;
class Banana extends Fruit;

class FruitStore {
    private List<Fruit> fruits;

    public List<Apple> getApples() {
        List<Apple> apples = new ArrayList<Apple>();

        for (Fruit fruit : fruits) {
            if (fruit instanceof Apple) {
                apples.add((Apple) fruit);
            }
        }

        return apples;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:46:48.063

您应该知道 - 实例是代码的不良做法。

写.getType()，返回枚举类型的对象怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:35:00.950

你使方法通用：

```
public <T extends Fruit> List<T> getFruitsByType(Class<T> fType) {
    List<T> list = new ArrayList<T>();
    for (Fruit fruit : fruits) {
        if (fruit.getClass() ==  fType) {
            list.add(fType.cast(fruit));
        }
    }
    return list;
} 
```

并按如下方式使用它：

```
FruitStore fs = new FruitStore();
List<Apple> apples = fs.getFruitsByType(Apple.class); 
```

# javascript - JavaScript/Jquery 读取 json 文件

> ID：15452862
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:15:58.407
> 
> 标签：javascript, jquery, json, html, parsing

所以我在我的网站主页上有这个搜索框，我希望它作为“从画廊（jason 文件）中按名称搜索汽车”并将汽车显示给用户，现在我不太懂确定如何实现这一目标，对实际代码的任何帮助将不胜感激。

我的杰森文件：

```
{
"cars" :
    [
        {
            "model": "Mazda Nagare",
            "year": "2013",
            "country": "Japan",
            "plate": "y72-28f-609",
            "price": "220,000",
            "pic" : "images/MazdaNag.jpg"
        },  
        {
            "model": "BMW M135i",
            "year": "2011",
            "country": "Germany",
            "plate": "bmw-016-ur2",
            "price": "140,000",
            "pic" : "images/BMWM135i.jpg"
        },  
        {
            "model": "Mazda 6",
            "year": "2007",
            "country": "Germany",
            "plate": "x57-6u6-fev",
            "price": "110,000",
            "pic" : "images/Mazda6.jpg"
        },  
        {
            "model": "Toyota 9T",
            "year": "2013",
            "country": "Japan",
            "plate": "qwe-rty-013",
            "price": "390,000",
            "pic" : "images/toyota_9turbo.jpg"
        },  
        {
            "model": "Toyota GTS",
            "year": "2012",
            "country": "Japan",
            "plate": "6r2-x0r-65y",
            "price": "177,000",
            "pic" : "images/ToyotaGts.jpg"
        },  
        {
            "model": "Toyota GT-86",
            "year": "2013",
            "country": "Japan",
            "plate": "ca1-pw9-n3x",
            "price": "260,000",
            "pic" : "images/ToyotaGt86.jpg"
        }
    ] 
```

}

我的搜索框和按钮（打开一个新的空白页面，我为搜索结果创建的）：

```
<div id="searchBox" data-theme="a">
    <input type="search" placeholder="Search for a car by name">
    </div>
<div class="smallButtonStyle">
    <input type="button" value="Search" onClick="location.href='#search'" data-icon="arrow-r" data-transition="slide"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:34:01.240

我建议你看看这个[stackoverflow 答案](https://stackoverflow.com/questions/1946165/json-find-in-javascript) 但是，如果你只想要代码，你可以用这个 javascript 查询你的 json。

这个想法是使用一个函数来检索输入元素的值，并通过数组暴力破解名称。如果这就是您所做的一切，那么将汽车数组改为一个对象会更快（对象的键是汽车名称）。祝你好运。

```
<script>
var jsonArray = {}; //your json array
var mySearchFunction = function () {
    var the_searched_name = document.getElementById("my_search").value;
    for (car in jsonArray["cars"]) {
      if (car["model"] == the_searched_name) {
        // Do something with 'car' 
      }
    }
};
</script>

<div id="searchBox" data-theme="a">
    <input id="my_search" type="search" placeholder="Search for a car by name">
    </div>
<div class="smallButtonStyle">
    <input type="button" value="Search" onClick="mySearchFunction()" data-icon="arrow-r" data-transition="slide"/> 
```

# android - 蓝牙是多人回合制游戏的可行选择吗？

> ID：15452865
> 
> 赞同：0
> 
> 时间：2013-03-16T18:16:08.910
> 
> 标签：android, bluetooth, multiplayer

所以我目前正在开发一款多人回合制纸牌游戏。我已经完成了所有核心游戏逻辑和用户界面，只是想找出尝试使其成为多人游戏的最佳方法，并通过多部手机连接。现在，似乎我唯一的选择是蓝牙，根据我的研究，这是一个非常糟糕的选择，特别是因为模拟器中不支持它。所以我想知道是否有任何替代方案。替代方案需要以下内容：

*   拥有本质上是“游戏大厅”的能力，玩家可以在其中加入“房间”（类似于许多其他多人游戏，例如使命召唤）
*   支持 API 8 级及以上
*   最多可连接 6 名玩家
*   不需要互联网即可播放（这是最重要的）
*   我不需要任何付款（无服务器）
*   最好易于在模拟器上测试

我也考虑过直接WIFI，但它需要API 14，这使得游戏无法在超过一半的Android市场上使用。

另外，如果没有其他选择，是否有多人蓝牙回合制游戏的SDK或教程？甚至有没有可能在没有设备配对的情况下使用蓝牙来拥有“游戏大厅”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:45:19.000

使用蓝牙符合您的要求列表，我没有看到您排除的任何其他方式缺少 wifi。

据我所知，必须使用客户端-服务器模型来实现蓝牙通信。例如，一个玩家必须开始游戏，他将主持您的游戏大厅，其他玩家可以连接到它。主机可能也想玩，所以你必须以主要“游戏引擎”可以与两种玩家通信的方式实现它：通过蓝牙远程和本地（主机自己）。这可能有点棘手但可行。

我不确定活动蓝牙连接的数量是否有限制。在一部相当旧的手机（API 版本 4）上，我可以同时使用 3 台设备。但是，电池耗尽的速度要快得多。

关于配对...我使用的设备（不是手机）在服务器模式下使用蓝牙，我必须与所有设备配对才能使用。按照同样的逻辑，我认为玩家都必须与服务器（启动游戏的手机）配对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:55:43.157

鉴于您的要求，我会说您的选择是蓝牙和 Wi-Fi Direct。模拟器都不应该容易/支持（从未尝试过 Wi-Fi Direct）。

需要注意的是，蓝牙需要一个主设备，最多可以连接7个远程设备。据我所知，Wi-Fi 直连是一种更加分散的方法（如果主人决定离开游戏怎么办？）。

Both approaches allow to retrieve discoverable devices. Might be worth considering a hybrid approach, where all devices with Android 4 use Wi-Fi Direct. Older devices also use Wi-Fi direct by connecting, via Bluetooth, to a newer phone that relays the packets.

# c# - FileStream.WriteLine() 没有写入文件

> ID：15452866
> 
> 赞同：6
> 
> 时间：2013-03-16T18:16:10.037
> 
> 标签：c#, file-io, stream, text-files

我正在尝试制作一个将数据存储在 TXT 日志文件中的简单软件。这是我的代码

```
FileStream fs = null;
StreamWriter fw = null;
try
{
    fs= new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop)+"/textme.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite);
    fw = new StreamWriter(fs);
    fw.Write("sadadasdsadsadsadas");

    for (int i = 0; i < AnimalShelter.AnimalList.Count; i++)
    {
        fw.WriteLine("<chipNr>" + AnimalShelter.AnimalList[i].ChipRegistrationNumber + "<chipNr>");
        Console.WriteLine("<chipNr>" + AnimalShelter.AnimalList[i].ChipRegistrationNumber + "<chipNr>");
    }
}
catch(IOException)
{
    MessageBox.Show("ERROR THROWN");
}
finally
{
    if (fs!= null) fs.Close();
    //  if (fw != null) fw.Close();
} 
```

我实现的是：文件被创建，但没有写入任何内容。我检查了很多帖子，但找不到任何特别的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:29:33.460

添加对流的调用`Flush`有效。这是因为您正在包装`FileStream`. `StreamWriter`将写入`FileStream`，但您需要指明何时将 发送`Stream`到实际文件。此外，您可以用以下方式交换您`try finally`的`using`：

```
try
{
    using (var fs = new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop)+"/textme.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite))
    {
        using (var fw = new StreamWriter(fs))
        {
            fw.Write("sadadasdsadsadsadas");

            for (int i = 0; i < AnimalShelter.AnimalList.Count; i++)
            {
                fw.WriteLine("<chipNr>" + AnimalShelter.AnimalList[i].ChipRegistrationNumber + "<chipNr>");
                Console.WriteLine("<chipNr>" + AnimalShelter.AnimalList[i].ChipRegistrationNumber + "<chipNr>");

            }
            fw.Flush(); // Added
        }
    }
}
catch(IOException)
{
    MessageBox.Show("ERROR THROWN");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T18:31:56.817

将您`StreamWriter`包含在 using 块中，以确保在文件使用结束时正确关闭所有内容，而且我认为您不需要为此创建一个`FileStream`。

```
try
{
    string fileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "textme.txt")
    using(fw = new StreamWriter(fileName, true))
    {
         ......
    }
}
catch(IOException)
{
    MessageBox.Show("ERROR THROWN");
} 
```

请注意，`StreamWriter`有一个构造函数，它接受两个参数，要创建/打开的文件的名称和一个指示文件应该以追加模式打开或覆盖的标志， [请参阅 StreamWriter 文档](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T19:05:44.290

始终使用`using`（如前所述），您不会遇到问题（或必须考虑）...

```
using (FileStream fs = new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "/textme.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite))
using (StreamWriter fw = new StreamWriter(fs))
{
    fw2.Write("sadadasdsadsadsadas");
} 
```

（你也可以关闭作者而不是应该工作的文件流）

据我所知，问题是......

`FileStream.Close`实际上是`Stream.Close`- 并且调用`Dispose`但它不是虚拟的，所以一些一般清理。

`FileStream.Dispose`当您使用`using`- 执行特定`Flush`然后`Close`/Dispose 时，它​​会被隐式调用 - 正确的特定清理也是如此。

您可以通过`using`通常推荐的模式来避免任何这种情况（坦率地说，我从来没有让我参与其中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T18:36:00.653

的确， Flush() 是答案；但是，我会[`File.WriteAllLines()`](http://msdn.microsoft.com/en-us/library/system.io.file.writealllines.aspx)改用。

```
try
{
    var fileName = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)+"/textme.txt";
    var lines = AnimalShelter.AnimalList.Select(o=> "<chipNr>" + o.ChipRegistrationNumber + "</chipNr>");
    File.WriteAllLines(fileName, lines);
    foreach(var line in lines)
        Console.WriteLine(line);
}
catch(IOException)
{
    MessageBox.Show("ERROR THROWN");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T18:36:41.837

尝试使用它 - 只需替换数组：

```
try
{
    using (Stream fs = new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "/textme.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite))
    {
        using (StreamWriter sw = new StreamWriter(fs))
        {
            int[] test = new int[] { 0, 12, 23, 46 };
            sw.Write("sadadasdsadsadsadas");
            for (int i = 0; i < test.Length; i++)
            {
                sw.WriteLine("<chipNr>" + test[i] + "<chipNr>");
                Console.WriteLine("<chipNr>" + test[i] + "<chipNr>");
            }
            sw.Close();                    
        }
        fs.Close();
    } 

}
catch (IOException)
{
    MessageBox.Show("ERROR THROWN");
} 
```

# java - Maven 与 Eclipse

> ID：15452874
> 
> 赞同：1
> 
> 时间：2013-03-16T18:16:37.697
> 
> 标签：java, eclipse, maven, project

我有一个完全用 Java 编写的项目，并使用了几个外部 Java 库（hibernate、一些 Apache commons、MQ、非常标准的东西。）

我习惯于使用 Eclipse，但这个项目——我从一群不再在公司的开发人员那里继承而来——依赖于 Maven。

我不知道他们为什么首先使用 Maven（他们无法与我分享这些知识。）该项目是中等规模的，公司所做的一切都不是太复杂。

现在我的问题是：我有什么理由保留 Maven 吗？环顾四周，我找不到任何这样做的真正原因，而且我对目录结构特别不满意，这需要我进入 3 个级别才能获得实际的 Java 包和 Java 代码。

（我想做的只是使用 Eclipse 结构将所有内容移至 Eclipse。运行它需要 1-2 天的工作，所以不会浪费太多时间，从我现在的角度来看，这将使我的生活更简单，并让我为雇用我的公司做得更好。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T18:21:01.210

是的：手动管理传递依赖是一件很傻的事，而且它还有很多其他功能，手动操作也很复杂。

通常，仅依赖 IDE 的构建过程是一个坏主意。不是每个人都使用相同的 IDE，或者 IDE 的版本，或者根本不是 IDE。与后者一起，CI 系统是无头的，并且依赖于构建文件。

使用 Eclipse-Maven 插件，如[m2eclipse](http://www.sonatype.org/m2eclipse/)或类似插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:20:54.480

使用 maven，您不必关心在项目中导入 jar，因为它在 pom 文件中提到。如果需要，这些 jar 将从 maven 存储库中下载（它应该出现在 maven 存储库中）。它还将帮助您一次性制作所有 jars（只需配置一次）:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T18:41:27.337

Maven 是一个强大的、可扩展的、开源的项目构建器。配置包含在 XML 文件中，因此任何文本编辑器都可以轻松访问它。如果您想共享配置，您只需发布`pom.xml`. 许多 IDE 都有项目配置到 Eclipse 和 Eclipse 的转换器，但此配置是本地的，并由开发环境在内部使用。开发人员甚至不会在 VCS 中保存此类配置。检查这样的配置是没有意义的。但是 maven 是独立的，因为它依赖于跟踪项目使用的每个库和版本的外部存储库。包括 Eclipse 在内的许多 IDE 通过插件支持 Maven。这可以保持两种配置不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:43:54.640

你应该保留 Maven，如果你想使用 Eclipse，你可以这样做，并且仍然有 Maven 完整的功能。你可以在 Maven 中拥有任何你想要的文件夹结构，只需要在`pom`文件中指定路径。

# javascript - 类的 JQuery 单击侦听器

> ID：15452875
> 
> 赞同：6
> 
> 时间：2013-03-16T18:17:00.270
> 
> 标签：javascript, jquery

我在 HTML 中有一类图像，ID`img1`为 , `img2`,..., `img9`。我想创建`a`带有 ID `link_img1`、`link_img2`、 ... 的链接（HTML 标记），`link_img9`这样每当我点击一个链接时，就会出现相应的图像。

我正在考虑将所有链接分配给同一个类，然后为该类添加一个 JQuery 单击侦听器，并在侦听器内部查找该链接的 ID，并显示相应的图像。如何为*类*添加 JQuery 侦听器，以及如何从元素中获取 ID？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T18:22:30.573

您不应该使用`a`标签的 id 来定义它们的目标。最好使用该`href`属性：

```
<img id="img1" ...>
<img id="img2" ...>
<a href="#img1" class="image-link">Click me</a>
<a href="#img2" class="image-link">Click me</a>

jQuery("a.image-link").click(function(){
  $(this.href).show();
}); 
```

这使您可以为同一图像创建两个链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:33:19.010

尝试：

```
$('a.yourClassName').click(function(){
   $('img#'+ this.id).show();         
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T18:22:22.633

要为类添加监听器，只需使用 jQuery 方式选择它（即 $('elem.class')。然后使用 attr() 获取 id。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T18:22:54.497

这里。正如在其他一些答案中所提到的，`id`这可能不是确定您应该采取什么行动的最佳方式。使用您认为合适的其他属性

```
$('a.some-class').click(function() {
    switch (this.id) {
        case 'one':
          // do something
          break;
        case 'two':
          // do something
          break;
        default:
          // do something
          break;
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T18:24:03.623

试试这个

```
$('a.yourClass').click(function(){
    var $linkID= $(this).attr('id'); 
    $('img#'+ $linkID).show();         
}); 
```

# c# - 如何使用 Windows 窗体登录基于 javascript 的站点？

> ID：15452881
> 
> 赞同：0
> 
> 时间：2013-03-16T18:17:28.397
> 
> 标签：c#, javascript

`GetElementByTag`我一直在尝试使用/方法自动使用 WebBrowser 控件登录到站点，`GetElemenByName`但没有太大成功。(WFA - C#)

我相信主要原因是该网站使用 JavaScript。

我做了一些研究，发现了两种方法：

1.  通过模仿站点登录表单，我可以使用称为 POST 的东西。（或类似的东西）
2.  向站点中的所有输入字段注入 javascript 输入

我不知道如何解决这个问题，并且由于我完全缺乏使用 JavaScript 或任何基于 Web 的编程的经验，我真的可以针对手头的问题使用任何建议或解决方案。

/** EDIT 1 感谢您的快速回复。我尝试使用您的代码，但仍然面临相同的异常抛出..

这是代码：（我修剪了一下）

```
 public WorkerClass(string url)
    {
     webBrowser1 = new WebBrowser();
     webBrowser1.Navigate(url);
     webBrowser1.Document.GetElementById("c_Username").InnerText = "?????";
     webBrowser1.Document.GetElementById("c_Password").InnerText = "?????";
    } 
```

我在上面的用户名行上得到一个“System.NullReferenceExeption”。

我试图访问的网站是 - “ [http://www.gool.co.il](http://www.gool.co.il) ”......也许我的方法是错误的？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:28:57.633

您可以使用网络浏览器控件，只需在目标页面上找到元素 id 并填写它们。

我给你写一个简单的：

```
public Form1()
        {
            InitializeComponent();
            //navigate to you destination 
            webBrowser1.Navigate("https://www.certiport.com/portal/SSL/Login.aspx");
        }
        bool is_sec_page = false;
        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (!is_sec_page)
            {
                //get page element with id
                webBrowser1.Document.GetElementById("c_Username").InnerText = "username";
                webBrowser1.Document.GetElementById("c_Password").InnerText = "pass";
                //login in to account(fire a login button promagatelly)
                webBrowser1.Document.GetElementById("c_LoginBtn_c_CommandBtn").InvokeMember("click");
                is_sec_page = true;
            }
            //secound page(if correctly aotanticate
            else
            {
                //intract with sec page elements with theire ids
            }

        } 
```

# c# - SQL 限制错误

> ID：15452882
> 
> 赞同：0
> 
> 时间：2013-03-16T18:17:35.497
> 
> 标签：c#, sql, sql-server-ce-3.5

我在我的项目中使用此代码（SQL COMPACT）：

```
"select Name 
from Drug 
where Name 
like '" + Dname + "%'  
limit 10" 
```

`Dname`是一个字符串值。结果是这个错误：

> 解析查询时出错。
> 
> [令牌行号= 1，令牌行偏移量= 44，错误令牌= LIMIT]

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:22:06.403

我想你想要的是

```
"select TOP (10)  
from Drug 
where Name 
like '" + Dname + "%'  " 
```

您还应该尝试使用参数化查询：

```
 string qry = "select TOP(10) from Drugs where name like @dname";
 SqlCommand oCmd = new SqlCommand(qry, ConnectionString);
 oCmd.Parameters.AddWithValue("@dname", dname +  '%'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:27:01.660

切勿使用字符串连接来构建 SQL 查询。始终使用参数化查询：

```
string connectionString = ....
using (var conn = new SqlConnection(connectionString))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = "SELECT TOP 10 FROM drug WHERE name LIKE @name";
    cmd.Parameters.AddWithValue("@name", Dname + '%');
    using (var reader = cmd.ExecuteReader())
    {
        while (reader.Read())
        {
            ...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T18:33:34.663

根据[this previous question](https://stackoverflow.com/q/138419/1275871)，正确的语法是`TOP(n)`，所以试试这个：

```
"select TOP(10) Name 
from Drug 
where Name 
like '" + Dname + "%' " 
```

# hadoop - Hadoop 2.0.2 多节点集群运行问题？

> ID：15452883
> 
> 赞同：2
> 
> 时间：2013-03-16T18:17:48.357
> 
> 标签：hadoop

我正在使用 MRv2 运行多节点 hadoop 2.0.2 集群。我的问题是这个特定页面和 fsck 命令一次只显示 3 个活动节点：

![在此处输入图像描述](../Images/87fb2fce648c932b1db3b48ee0ec7faf.png)

尽管此页面显示实际没有。活节点

![在此处输入图像描述](../Images/de818fe5b0dc9c1384fee8d910e0e6f7.png)

另一个问题是有时一些数据节点会自动关闭。我如何知道 pblm 以及为什么同一个集群显示两个不同的活动节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:01:26.420

关于您使用的 Web 界面`http://localhost:50070/dfshealth.jsp`适用于 NameNode WebUI 和`http://localhost:8088/cluster`ResourceManager WebUI。

```
Although this page shows actual no. of live nodes 
```

实际上它没有显示活动节点。如果您看到`Last Health Updates`每个节点的Namenode 接口位于 50070。现在只有 3 个处于活动状态。

```
Another problem is some times some datanodes are getting shutdown automatically. 
```

您的四个节点在 2013 年 3 月 15 日 01:00:00 左右出现故障（最后更新）。因此，我会调查您当时的数据节点日志文件，以了解它们关闭的原因。你可以在里面找到它们，`$HADOOP_HOME/logs/`或者`/var/log/hadoop*`，如果你没有设置`HADOOP_LOG_DIR`环境变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T05:59:57.850

添加 应该在 yarn-site.xml 中进行一些配置，让 nodemanager 知道资源管理器在哪里。具体来说，我将此属性添加到 yarn-site.xml 中：

`<property> <name>yarn.resourcemanager.hostname</name> <value>master</value> </property>`

原因：yarn-default.xml中的默认值是0.0.0.0，很多属性使用这个hostname来联系资源管理器，比如

`<property> <name>yarn.resourcemanager.address</name> <value>${yarn.resourcemanager.hostname}:8032</value> </property>`

# linux - 单列数据到多列

> ID：15452884
> 
> 赞同：4
> 
> 时间：2013-03-16T18:17:48.433
> 
> 标签：linux, bash, shell, sed, awk

我在由两条空行分隔的单列中有正或负浮点值的数据。

```
1.0
-2.0

3.0
4.0

-5.0
6.0

-7.0
8.0 
```

在 bash 中，将这些数据放入多个列以使最终结果看起来像这样的最佳方法是什么：

```
1.0 3.0 -5.0 -7.0
-2.0 4.0 6.0 8.0 
```

在理想情况下，该解决方案不仅适用于数字，还适用于以类似方式分隔的文本。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T19:01:51.760

怎么样：

```
$ grep -v '^\s*$' file | pr -ts" " --columns 4 
1.0 3.0 -5.0 -7.0
-2.0 4.0 6.0 8.0 
```

`grep`用于删除空白行并`pr`格式化输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:18:51.487

这可能对您有用（GNU sed）：

```
sed -r '/./!d;$!N;2{h;d};G;s/^(.*)\n(.*)\n(.*)\n(.*)$/\3 \1\n\4 \2/;$!{h;d}' file 
```

*   `/./!d`如果该行不包含字符，则将其删除。
*   `$!N`如果该行不是最后一行，则将换行符和下一行添加到模式空间 (PS)。
*   `2{h;d}`对于第二行，将 PS 复制到保留空间（HS），然后将其删除。
*   `G`对于所有其他行，将 HS 附加到 PS。
*   `s/^(.*)\n(.*)\n(.*)\n(.*)$/\3 \1\n\4 \2/`将 PS 重新排列成所需的顺序。
*   `$!{h;d}`对于除最后一行之外的所有行，将 PS 复制到 HS，然后删除 PS。这意味着在遇到最后一行时，将打印出 PS 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:53:10.473

这是一个更长但更易读的解决方案：

```
a=() b=() i=0
while read line ; do
    case $i in
        0) a+=($line) ;;
        1) b+=($line) ;;
    esac
    ((i++))
    if ((i == 4)); then i=0; fi
done < data.txt

echo ${a[*]}
echo ${b[*]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:41:17.810

假设您的数据在文件 data.txt 中；你可以试试这个：

```
a=($(< data.txt))
b(){ for((i=$1; i<${#a[*]}; i+=2)); do echo -n "${a[$i]} "; done; echo ;}
b 0
b 1 
```

这当然不是最好的方法，但它确实有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T21:18:59.183

您也可以尝试使用“按摩”输入`xargs first`

```
while read a b
do 
  A+=($a) B+=($b)
done < <( xargs -n2 < file )

printf "%s\n" "${A[*]}" "${B[*]}" 
```

--

或者

```
while read a; read b; do
  read; read;
  A+=($a) B+=($b)
done < file

printf "%s\n" "${A[*]}" "${B[*]}" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T06:54:26.997

使用一次对 awk 的调用：

```
awk 'BEGIN{RS="\n\n\n"}{A=A " " $1;B=B " " $2}END{printf A "\n" B "\n"}' NewFile 
```

仅使用 posix shell（带有内置函数）

```
#!/bin/sh
L=""
R=""
while read A && read B && read dummy && read dumtwo || [ "$A" ];do
    L="$L $A"
    R="$R $B"
done < NewFile
echo $L
echo $R 
```

注意：您可以使用 bash 数组而不是使用 L_ARRAY+=("$A") 或像这样存储变量，而不是将变量存储在字符串 $L 和 $R 中：

```
#!/bin/bash
L=()
R=()
while read A && read B && read dummy && read dumtwo || [ "$A" ];do
    L[${#L[@]}]=${A}
    R[${#R[@]}]=${B}
done < NewFile
echo -e "${L[@]}\n${R[@]}" 
```

或使用 sed（2 次调用）

```
L=`sed -n 1~4p NewFile`
R=`sed -n 2~4p NewFile`
echo $L
echo $R 
```

# ios - AFNetworking - 可达性总是返回 -1

> ID：15452885
> 
> 赞同：1
> 
> 时间：2013-03-16T18:17:50.110
> 
> 标签：ios, objective-c, afnetworking

我使用最新的 AFNetworking 源，但可达性对我不起作用，它永远不会触发可达性块并且`[httpClient networkReachabilityStatus]`总是返回 -1。SystemConfiguration/SystemConfiguration.h 包含在 .pch 中

startMonitoringNetworkReachability 被执行（在 AFHTTPClient 中）。

iPhone 4、iOS 6.1

```
AFHTTPClient *httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:URL]];

[httpClient setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {

    NSLog(@"Internet status changed");
    NSLog(@"%d", status);
}];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:method parameters:post];

NSLog(@"Network reach %d",[httpClient networkReachabilityStatus]);

AFJSONRequestOperation *operation = [self getOperationWithMethod:method withRequest:request andCallback:callback];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T17:03:16.547

假设您正在使用 ARC，则该块可能永远不会被触发，因为`httpClient`一旦此方法完成，您就会被释放。

要解决此问题，您需要创建您`httpClient`的，`strong` `@property`例如：

```
@property (nonatomic, strong) AFHTTPClient *httpClient; 
```

# c++ - 如何显示图像的频谱？

> ID：15452889
> 
> 赞同：1
> 
> 时间：2013-03-16T18:17:55.227
> 
> 标签：c++, cimg

我正在尝试使用 CImg 库显示图像的频谱。假设为一条线图，x 轴为频率值，y 轴为对数强度。

我对图书馆很陌生，所以它可能很容易。

# c++ - 连接 cstrings c++

> ID：15452891
> 
> 赞同：0
> 
> 时间：2013-03-16T18:18:05.497
> 
> 标签：c++, concatenation, cstring

当我运行它时，我没有收到任何错误，但字符串没有连接起来。有人可以告诉我我在这里做错了什么。

```
char *con(const char str[], int n) {
    char * t = new char[60];
    int l = strlen(str);
    t[l] = '\0';
    if (n <= 0) {
        return t;
    } else {
        for (int i = 0; i < n; i++) {
            strcat(t, str);
        }
        return t;
    }
} 
```

如果我尝试取出：

```
int l = strlen(str);
t[l] = '\0'; 
```

然后程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:23:19.590

你必须从一个空字符串开始。

代替：

```
int l = strlen(str);
t[l] = '\0'; 
```

和：

```
t[0] = '\0'; 
```

现在`str`将`n`在`t`.

原始代码未初始化第一个`l-1`字符。`t`

# c++ - 如何在我的 C 代码中访问我的 C++ 函数，反之亦然？

> ID：15452892
> 
> 赞同：5
> 
> 时间：2013-03-16T18:18:08.293
> 
> 标签：c++, c, opencv, cross-language

我想用 C 实现一个项目*，但是用**C++*编写项目的某些部分然后从主*C*代码调用它们是很舒服的。
是否可以？！如果是的话，我该怎么做？！
提前致谢 ：）

***PS***
我在我的*C++*代码中使用了一些库，例如*OpenCV*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:25:44.617

您需要使用常规 C 函数“包装”您的 C++ 接口，这些函数接受一个参数来指示它们将被调用的对象。例如，如果你有 C++

```
class A
{
    // .. boilerplate stuff...
    int SomeMethod(int n, float f);
}; 
```

然后与它一起，您可以声明一个函数，例如

```
extern "C" int A_SomeMethod(void* Obj, int n, float f)
{
    return(((A*)Obj)->SomeMethod(n, f));
} 
```

如果您对 void* 的转换不满意，您可以实现某种从不透明句柄到`A*`. 但要点是您需要保留一些指向将调用该方法的对象的句柄/指针。为了获得指针/句柄，您需要将分配包装到：

```
extern "C" void* A_Instantiate()
{
    return new A;
} 
```

C++ 文件应与具有上述功能的文件一起*单独*编译。C 编译的单独包含应包括上述所有函数的声明。

编辑：下面的警告和评论很重要；回答这个问题，“是的，可以从 C 调用 C++”，这是一种方法。这不是一个完整的方法，因为没有真正的机械方法来做到这一点，但这是一个开始。另外，不要忘记为`delete`等创建另一个调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:24:34.270

是的，您需要将其指定为

> 外部“C”

这样，它将使函数具有“C”链接，然后C代码可以像在C中一样调用您的函数。这个函数名称不会被破坏，因为C不支持重载。

这里让我引用@Faisal Vali：

*   extern "C" 是一个链接规范
*   每个编译器都*需要*提供“C”链接
*   链接规范应仅出现在命名空间范围内
*   所有函数类型、函数名和变量名都有语言链接
*   具有不同语言链接的两个函数类型即使在其他方面相同也是不同的类型
*   联动规格嵌套，内一决定最终联动
*   类成员忽略 extern "C"
*   至多一个具有特定名称的函数可以具有“C”链接（无论命名空间如何）
*   extern "C" 强制函数具有外部链接（不能使其静态）
*   从 C++ 到用其他语言定义的对象以及从其他语言到用 C++ 定义的对象的链接是实现定义和语言相关的。只有在两种语言实现的对象布局策略足够相似的情况下，才能实现这样的联动

[在这里查看费萨尔瓦利的答案](https://stackoverflow.com/a/1041880/1141471)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:24:40.403

问：我能否从 C++ 访问我的 C 代码，反之亦然？

答：是的。

1）主要是`extern "C" { ...}`在所有标题中使用来表示仅 C 的函数和数据，如下所示：

[http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)

```
/* Header file foo.h */
#ifdef __cplusplus /* If this is a C++ compiler, use C linkage */
extern "C" {
#endif

/* These functions get C linkage */
void foo();

struct bar { /* ... */ };

#ifdef __cplusplus /* If this is a C++ compiler, end C linkage */
}
#endif 
```

2) 通常的场景是一个 C++ 主程序，它调用 C 和 C++ 函数和结构的混合。结构和函数都在头文件中声明，并且都有“#ifdef __cplusplus/extern C”。

3) 这是一个关于混合 C 和 C++ 的常见问题解答：

[http://www.parashift.com/c++-faq/mixing-c-and-cpp.html](http://www.parashift.com/c++-faq/mixing-c-and-cpp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:12:48.823

除非*严格要求*，否则这仅适用于彻头彻尾的受虐狂。这样做需要双方都非常小心，并且今天可以很好地工作，并在下一次编译器更新时爆炸式地爆炸。C++ 需要大量运行时帮助，通常不支持从 C 中可靠地工作。您可以从 C++ 调用 C，这是官方支持的（以及标准的一部分`extern "C"`等）。

最好的办法可能是在 C 和 C++ 处理的子集中编写 C（细微差别的起点是[this](http://david.tribble.com/text/cdiffs.htm)）并使用 C++ 编译器进行编译。或者克服它并决定你最喜欢哪种语言。

# c# - 恢复线程并同时处理另一个按钮

> ID：15452894
> 
> 赞同：0
> 
> 时间：2013-03-16T18:18:10.707
> 
> 标签：c#, multithreading

我是 C# 新手。我发现了一些适用于进度条的代码。什么是，当有人点击按钮开始时`btnStartAsyncOperation_Click`，进度条开始增加，当`btnCancel_Click`按下它时取消操作。这是代码

```
namespace BackgroundWorkerSample
{
    public partial class Form1 : Form
    {       
        BackgroundWorker m_oWorker;

        public Form1()
        {
            InitializeComponent();           
            m_oWorker = new BackgroundWorker();
            m_oWorker.DoWork += new DoWorkEventHandler(m_oWorker_DoWork);
            m_oWorker.ProgressChanged += new ProgressChangedEventHandler(m_oWorker_ProgressChanged);
            m_oWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(abcd);
            m_oWorker.WorkerReportsProgress = true;
            m_oWorker.WorkerSupportsCancellation = true;
        }

        void abcd(object sender, RunWorkerCompletedEventArgs e)
        {           
            if (e.Cancelled)
            {
                lblStatus.Text = "Task Cancelled.";
            }
            else if (e.Error != null)
            {
                lblStatus.Text = "Error while performing background operation.";
            }
            else
            {
                lblStatus.Text = "Task Completed...";
            }
            btnStartAsyncOperation.Enabled = true;
            btnCancel.Enabled = false;
        }

        void m_oWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            progressBar1.Value = e.ProgressPercentage;
            lblStatus.Text = "Processing......" + progressBar1.Value.ToString() + "%";
        }

        void m_oWorker_DoWork(object sender, DoWorkEventArgs e)
        {

            for (int i = 0; i < 100; i++)
            {
                Thread.Sleep(100);
                m_oWorker.ReportProgress(i);
                if (m_oWorker.CancellationPending)
                {
                    e.Cancel = true;
                    m_oWorker.ReportProgress(0);
                    return;

                }

            }

            //Report 100% completion on operation completed
            m_oWorker.ReportProgress(100);
        }

        private void btnStartAsyncOperation_Click(object sender, EventArgs e)
        {
            btnStartAsyncOperation.Enabled  = false;
            btnCancel.Enabled               = true;
            //Start the async operation here

            m_oWorker.RunWorkerAsync();

        }

        private void btnCancel_Click(object sender, EventArgs e)
        {

            if (m_oWorker.IsBusy)
            {
                //Stop/Cancel the async operation here
                m_oWorker.CancelAsync();
            }
        }

        private void progressBar1_Click(object sender, EventArgs e)
        {

        }

        private void lblStatus_Click(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {

            }

        private void button2_Click(object sender, EventArgs e)
        {

        }
        }
    } 
```

现在我又添加了 2 个按钮，按钮 1 暂停，按钮 2 恢复。由于我找不到任何恢复的方法，所以我必须`CancelAsync()`在按下暂停时使用函数，并将进度条的值保存在全局变量中。然后，当我按下 resume 时，我再次使用`RunWorkerAsync`. 但问题是，我不能在这个函数中发送全局变量的值，所以它从 0 进度开始。

我尝试`thread.sleep(infinite time here)`在有人按下暂停时使用，然后在有人按下恢复时停止线程。问题仍然是，在这种情况下我无法按下任何按钮。如果我启用按钮，它们仍然不起作用。

请给我一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:25:46.643

您可以尝试拥有自己的变量，即

```
bool isPaused = false; 
```

当有人点击你的暂停按钮...

```
isPaused = true; 
```

并在有人点击简历时将其设置为 false。最后，在 doWork 方法的 for 循环中，让它等到该变量为假。

```
while (isPaused) 
{
    Thread.Sleep(100);
} 
```

让我知道这对你有什么影响。

# d - 哪些 D 编译器会对此函数执行尾调用优化？

> ID：15452896
> 
> 赞同：5
> 
> 时间：2013-03-16T18:18:14.123
> 
> 标签：d, dmd, gdc

```
string reverse(string str) pure nothrow
{
    string reverse_impl(string temp, string str) pure nothrow
    {
        if (str.length == 0)
        {
            return temp;
        }
        else
        {
            return reverse_impl(str[0] ~ temp, str[1..$]);
        }
    }

    return reverse_impl("", str);
} 
```

据我所知，这段代码*应该*进行尾调用优化，但我不知道 DMD 是否正在这样做。哪些 D 编译器支持尾调用优化，它们会在这个函数上执行它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T18:22:17.540

通过查看反汇编，DMD 对您的代码执行 TCO：

```
_D4test7reverseFNaNbAyaZAya12reverse_implMFNaNbAyaAyaZAya   comdat
    assume  CS:_D4test7reverseFNaNbAyaZAya12reverse_implMFNaNbAyaAyaZAya
L0:     sub ESP,0Ch
        push    EBX
        push    ESI
        cmp dword ptr 018h[ESP],0
        jne L1C

LC:     mov EDX,024h[ESP]
        mov EAX,020h[ESP]
        pop ESI
        pop EBX
        add ESP,0Ch
        ret 010h

L1C:    push    dword ptr 024h[ESP]
        mov EAX,1
        mov EDX,offset FLAT:_D12TypeInfo_Aya6__initZ
        push    dword ptr 024h[ESP]
        mov ECX,024h[ESP]
        push    ECX
        push    EAX
        push    EDX
        call    near ptr __d_arraycatT
        mov EBX,02Ch[ESP]
        mov ESI,030h[ESP]
        mov 034h[ESP],EAX
        dec EBX
        lea ECX,1[ESI]
        mov 01Ch[ESP],EBX
        mov 020h[ESP],ECX
        mov 02Ch[ESP],EBX
        mov 030h[ESP],ECX
        mov 038h[ESP],EDX
        add ESP,014h
        cmp dword ptr 8[ESP],0
        jne L1C
        jmp short   LC
_D4test7reverseFNaNbAyaZAya12reverse_implMFNaNbAyaAyaZAya   ends
    end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T18:11:51.520

快速查看 gdc 生成的代码的一个很好的资源是[http://d.godbolt.org/](http://d.godbolt.org/)。我们目前没有 dmd 等价物。

# java - 使用归并排序+java按升序对字符串的字符进行排序

> ID：15452897
> 
> 赞同：0
> 
> 时间：2013-03-16T18:18:14.427
> 
> 标签：java, mergesort

我正在尝试使用合并排序按升序对字符串的字符进行排序，但我不知道我应该在哪里比较字符以便对它们进行排序。到目前为止，这是我的方法：

```
public static String mergeSort(String s)
    {
        String left = "",
               right = "";
        if(s.length() <= 1)
            return s;
        int middle = s.length()/2;
        for(int i = 0; i < middle; i++)
            left = left + s.charAt(i);
        for(int i = middle+1; i < s.length(); i++)
            right = right + s.charAt(i);
        left = mergeSort(left);
        right = mergeSort(right);
        return merge(left, right);
    } 
```

如果你能帮助我，我会很高兴谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:26:12.117

首先，我建议您阅读[Wikipedia 关于 MergeSort 的条目](http://en.wikipedia.org/wiki/Merge_sort)。

根据您的代码建议两件事

1.  两个字符的实际比较不会发生在 中`mergeSort()`，而是发生在`merge()`. 请参阅 Wikipedia 的伪代码以了解如何编写它。
2.  我不建议您构建`left`和`right`String 对象一次读取一个字符。无需使用`charAt()`. 相反，请使用`String.substring()`( [http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html) )。

### 附加信息

使用它来设置`left`和`right`：

```
String left = s.substring(0, middle);
String right = s.substring(middle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:24:19.740

您可以使用两个字符的减法。因此，如果您有两个字符`a`和`b`和：

*   `a - b = 0`, 字符相等
*   `a - b > 0`,`a`更大
*   `a - b < 0`,`b`更大

这正是该`Character.compareTo()`方法的实施方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:15:31.110

您可以将输入字符串转换为字符数组并进行合并排序的计算，如下所示：

```
import java.util.Queue;
import java.util.LinkedList;

public class MergeSort {

    public static void sort(char[] chars, int low, int right) {
        if (low < right) {
            int middle = (low + right) / 2;
            sort(chars, low, middle);
            sort(chars, middle + 1, right);
            merge(chars, low, middle, right);
        }
    }

    public static void merge(char[] chars, int low, int middle, int right) {
        Queue<Character> queue1 = new LinkedList<Character>();
        Queue<Character> queue2 = new LinkedList<Character>();

        for (int i = low; i <= middle; i++) {
            queue1.add(chars[i]);
        } 

        for (int i = middle + 1; i <= right; i++) {
            queue2.add(chars[i]);
        }

        int i = low;

        while (!queue1.isEmpty() && !queue2.isEmpty()) {
            if (queue1.peek() <= queue2.peek()) {
                chars[i++] = queue1.poll();
            } else {
                chars[i++] = queue2.poll();
            }
        }

        while (!queue1.isEmpty()) {
            chars[i++] = queue1.poll();
        }

        while (!queue2.isEmpty()) {
            chars[i++] = queue2.poll();
        }
    }

    public static void sort(char[] chars) {
        sort(chars, 0, chars.length - 1);
    }

    public static void sort(String string) {
        sort(string.toCharArray());
    }

    public static void main(String[] args) {
        String string = "sarathkumarsivan";
        char[] chars = string.toCharArray();

        MergeSort.sort(chars);

        for (int i = 0; i < chars.length; i++) {
            if (i > 0) { System.out.print(", "); }
            System.out.print(chars[i]);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:24:23.757

1.  不要`String`在你的计算中使用，因为`String`在 Java 中是不可变的。您将创建数千个对象，这将减慢您的实施速度。我建议`char[]`改用。
2.  您在`merge()`子程序中进行实际比较。例如，您以与比较`char`相同的方式进行比较`int`，只是使用标准`>`运算符。

# jquery - 扩展一个抽象的 jQuery 插件

> ID：15452908
> 
> 赞同：0
> 
> 时间：2013-03-16T18:19:53.357
> 
> 标签：jquery

我创建了一个 jQuery 插件，它通过 ajax 查询服务器并显示一个弹出窗口。然后我想要另一个页面上的另一个返回一些不同的数据并显示它。我实现它的方式是，插件将指示它所在页面的数据发送到服务器，服务器将获取数据并发送回数据类型，客户端将根据给定的数据类型显示它。

我的方法显然有很多不足之处。相反，是否可以制作插件的抽象版本，然后将其扩展到每个特定应用程序以便正确显示它（即摆脱 switch 语句）？另外，我怎样才能避免在弹出窗口上使用一个 id（即#screenshot），以便每个都可以单独设置样式？谢谢

```
ayb={};
$("a.screenshot").screenshotPreview();

function contact(data)
{
    return '<dl><dt>Name:</dt><dd>'+data.firstname+' '+data.lastname+'</dd>'
    +'<dt>Account:</dt><dd>'+data.account_name+'</dd>'
    +'<dt>Name:</dt><dd>'+data.firstname+' '+data.lastname+'</dd>'
    +((data.title)?'<dt>Title:</dt><dd>'+data.title+'</dd>':'')
    +'<dt>User Name:</dt><dd>'+data.username+'</dd>'
    +'<dt>Password:</dt><dd>'+data.password+'</dd>'
    +'<dt>Communication Method:</dt><dd>'+data.communication_method+'</dd>'
    +((data.email)?'<dt>Email:</dt><dd>'+data.email+'</dd>':'')
    +((data.account_phone)?'<dt>Account Phone:</dt><dd>'+display_phone(data.account_phone)+'</dd>':'')
    +((data.phone)?'<dt>Direct Phone:</dt><dd>'+display_phone(data.phone)+'</dd>':'')
    +((data.mobile_phone)?'<dt>Mobile Phone:</dt><dd>'+display_phone(data.mobile_phone)+'</dd>':'')
    +((data.account_fax)?'<dt>Account Fax:</dt><dd>'+display_phone(data.account_fax)+'</dd>':'')
    +((data.fax)?'<dt>Direct Fax:</dt><dd>'+display_phone(data.fax)+'</dd>':'')
    +((data.address || data.location)?'<dt>Address:</dt><dd>'+data.address+((data.address && data.location)?'<br>':'')+data.location+'</dd>':'')
    +((data.email)?'<dt>Email:</dt><dd>'+data.email+'</dd>':'')
    +'</dl>';
}
function account(data)
{
    return '<dl><dt>Name:</dt><dd>'+data.name+'</dd>'
    +((data.phone)?'<dt>Account Phone:</dt><dd>'+display_phone(data.phone)+'</dd>':'')
    +((data.fax)?'<dt>Account Fax:</dt><dd>'+display_phone(data.fax)+'</dd>':'')
    +((data.address || data.location)?'<dt>Address:</dt><dd>'+data.address+((data.address && data.location)?'<br>':'')+data.location+'</dd>':'')
    +((data.vertical_markets)?'<dt>Primary Market:</dt><dd>'+data.vertical_markets+'</dd>':'')
    +((data.priority)?'<dt>Priority:</dt><dd>'+data.priority+'</dd>':'')
    +'</dl>';
}
function user(data)
{
    return '<dl><dt>Name:</dt><dd>'+data.firstname+' '+data.lastname+'</dd>'
    +'<dt>User Name:</dt><dd>'+data.username+'</dd>'
    +((data.phone)?'<dt>Direct Phone:</dt><dd>'+display_phone(data.phone)+'</dd>':'')
    +((data.mobile_phone)?'<dt>Mobile Phone:</dt><dd>'+display_phone(data.mobile_phone)+'</dd>':'')
    +((data.fax)?'<dt>Direct Fax:</dt><dd>'+display_phone(data.fax)+'</dd>':'')
    +((data.email)?'<dt>Email:</dt><dd>'+data.email+'</dd>':'')
    +'</dl>';
}
function getUrlVars(href)
{
    //Returns object based on variables in url.  Used to send data to GET
    var vars = {}, hash, hashes = href.slice(href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars[hash[0]] = hash[1];
    }
    return vars;
}

(function( $ ){
    $.fn.screenshotPreview = function() {
        //Apply to links to get a preview of the link

        //Config - Set popup's distance from the cursor
        ayb.screenshot={};
        ayb.screenshot.xOffset = 20;
        ayb.screenshot.yOffset = 10;
        ayb.screenshot.showing=false;

        this.hover(function(e)
        {
            if(!ayb.screenshot.showing){
                ayb.screenshot.title = this.title;this.title = "";//Prevent title from being displayed,and save for later to put back    
                var url=getUrlVars(this.href);
                ayb.screenshot.timeoutID=window.setTimeout(function() {
                    ayb.screenshot.showing = true;
                    url.task="getPopup";   //specify task
                    ayb.screenshot.ajax=$.ajax({
                        url:    'index.php',
                        data: url,
                        success: function(data)
                        {
                            //Determine how to display returned data
                            switch (data.type)
                            {
                                case 'contact':var string=contact(data);break;
                                case 'account':var string=account(data);break;
                                case 'user':var string=user(data);break;
                                case 'project':var string=project(data);break;
                                default:var string='Error';
                            }
                            $("body").append('<div id="screenshot">'+((ayb.screenshot.title != '')?'<h3>'+ayb.screenshot.title+'</h3>':null)+string+"</div>");                                 
                            $("#screenshot")
                            .css("top",(e.pageY - ayb.screenshot.yOffset) + "px")
                            .css("left",(e.pageX + ayb.screenshot.xOffset) + "px")
                            .fadeIn("fast");                    
                        },
                    dataType: 'json'
                    });
                },250); //Wait 1/4 of a second before requesting data from server
            }
        },
        function()
        {
            //When not hover
            if (typeof ayb.screenshot.ajax == 'object') {ayb.screenshot.ajax.abort();}
            window.clearTimeout(ayb.screenshot.timeoutID);
            this.title = ayb.screenshot.title;    
            $("#screenshot").remove();
            ayb.screenshot.showing = false;
        });    
        this.mousemove(function(e)
        {
            $("#screenshot").css("top",(e.pageY - ayb.screenshot.yOffset) + "px").css("left",(e.pageX + ayb.screenshot.xOffset) + "px");
        });
    };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:53:21.383

几个可能有帮助的想法。首先是`data-`在标记中使用属性：

```
<a href="#" class="screenshot" data-type="user">User Link</a> 
```

接下来是创建一个更通用的模板方法。使用类型可以从 html 中获取，`data-type`并通过添加相同类型的类（或与类型相关的一些其他协议），您可以为不同的用例使用不同的 css

演示 JS：

```
(function ($) {

    var shotTemplate = function (data, type) {
        this.shot = {
            start: '<div id="screenshot" class="' + type + '">',
            end: '</div>},'
        };
        this.user = function () { 
            /* not suggesting "data.type" protocol, was just simple for my demo*/
            return '<div class="user_class">' + data.user + '</div>';
        };
        this.contact = function () {
            return '<div class="contact_class">' + data.contact + '</div>';
        };
        this.account= function () {
            return '<div class="account_class">' + data.account + '</div>';
        };

        return this.shot.start + this[type]() + this.shot.end;

    };  

    $.fn.screenshotPreview = function () {
        return this.each(function () {
            var $el = $(this);
            /* isolate screenshot to this instance*/
            var $screenshot;
            $el.hover(function () {
                $.post(url,data,function( response){
                        $screenshot = $(shotTemplate(response, $el.data('type')));
                        $('body').append($screenshot);
                });
            }, function () {
                $screenshot.remove();
            })

        });

    };
})(jQuery); 
```

CSS：

```
#screenshot.user{background:navy;color:white}
#screenshot.contact{background:#444;color:white} 
```

演示：http: [//jsfiddle.net/wceDc/](http://jsfiddle.net/wceDc/)

我保持演示简单，以允许专注于概念而不是混乱的代码与定位

# asp.net - 使用 ASP.NET MVC 将用户控件放在母版页上的当前页面之外？

> ID：15452910
> 
> 赞同：1
> 
> 时间：2013-03-16T18:20:01.383
> 
> 标签：asp.net, html, asp.net-mvc, razor, master-pages

我有一个 ASP.NET MVC 解决方案，我在其中使用 MasterPage，如下所示：

```
<div class="wrapper">
    <div id="header">
        <div class="content">
            <div id="contentBody">
                <div id="mainMenu">
                    @Html.Raw(@Html.MainMenu())
                </div>
                 @Html.Raw(@Html.Partial("LoginStatusPartial"))
            </div>
        </div>
    </div>
    <div id="mainContent">
        <div id="page">
            @Html.Partial("LoginPartial")
            @RenderBody()
        </div>
        <div id="rightPanel">
            &nbsp;
        </div>
        <div style="clear:both;"></div>
    </div>
    <div class="push"></div>
</div>
<div id="footer">
    <div class="content">
        foot [sitename]&nbsp;
    </div>
</div> 
```

现在我需要在 rightPanel 中放置一个用户控件，这仅适用于特定页面。

这可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:23:21.147

您可以使用部分：

```
<div id="rightPanel">
    @RenderSection("RightPanel", required: false)
</div> 
```

然后在需要将某些内容放入本节的视图中可以定义它：

```
@section RightPanel {
    <div>@Html.Partial("SomeRightPanel")</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:23:09.903

是的。在你的主人中使用以下内容：

```
<div id="rightPanel">
    @RenderSection("Name")
</div> 
```

或者，如果您只想显示右侧面板，如果您在视图中提供内容，请使用：

```
@if (IsSectionDefined("Name")) {
<div id="rightPanel">
    @RenderSection("Name")
</div>
} 
```

并在您的视图中使用它：

```
@section Name {
    Content
} 
```

# batch-file - 如果条件为真，则使用批处理文件设置静态变量

> ID：15452913
> 
> 赞同：0
> 
> 时间：2013-03-16T18:20:37.657
> 
> 标签：batch-file, cmd

我试图让用户选择使用默认目录，或者使用他们自己的目录作为变量`%1`。这是我所拥有的：

```
if ("%1"=="default") {set %1=C:\TestExecution\test}
set source=%1
IF NOT EXIST "%source%" goto error3

goto end
:error3
echo.
echo Error: Invalid Path
echo %source%
goto end
:end 
```

尝试使用 cmd 对其进行测试时，结果如下：

```
c:\TestExecution>test.bat default 10.42.232.245

Error: Invalid Path
default 
```

如果有人知道正确的语法并且可以帮助一个新手，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:26:26.000

试试这个：

```
if "%~1"=="default" (set "source=C:\TestExecution\test") else set "source=%~1" 
```

# actionscript-3 - AS3 游戏循环和并条框

> ID：15452914
> 
> 赞同：0
> 
> 时间：2013-03-16T18:20:38.623
> 
> 标签：actionscript-3, loops, frame, render, draw

我正在为 AS3 中的学校制作游戏。我用计时器制作了一个游戏循环，这样这个游戏就可以运行得更快。

```
private var updateTimer:Timer;
updateTimer = new Timer(0);
updateTimer.addEventListener(TimerEvent.TIMER, update);
updateTimer.start();

private function update(e:TimerEvent):void {     } 
```

这是可行的，但我的老师确实向我展示了一个函数/命令，我可以如何绘制/渲染框架。

因此，帧率会上升。不幸的是，我丢失了该代码，并且在任何地方都找不到该功能。有谁知道这个功能？是的，我知道这种方式很不稳定。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:35:08.997

你在想[`TimerEvent.updateAfterEvent()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/TimerEvent.html#updateAfterEvent%28%29)吗？这会导致 Flash 在响应计时器或鼠标事件时立即独立于影片帧速率呈现新帧。

```
e.updateAfterEvent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:44:00.050

如果您只想更改游戏的帧速率而不弄乱计时器，您可以随时使用`stage.frameRate`并从那里开始。因此，如果您想提高帧速率，只需使用`stage.frameRate++;`.

# eclipse - Eclipse Egit：更新 github fork 以合并主仓库的更改？

> ID：15452915
> 
> 赞同：6
> 
> 时间：2013-03-16T18:20:47.083
> 
> 标签：eclipse, egit

我已经分叉了一个 github 存储库。现在我工作的回购与原始回购不同步。

我知道我需要进行合并，但是如何使用 Eclipse git 来做到这一点对我来说有点不清楚。

问题：如何更新我的分叉以包含所有者对原始存储库所做的更改？

* * *

**编辑 1：**我添加了另一个遥控器。但我在上下文菜单上看不到任何拉按钮：

![在此处输入图像描述](../Images/b2475a76a5c5df30cdc5712162b82234.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T07:47:50.033

您在本地机器上进行合并，然后将结果从本地机器推送到您自己的 github 存储库。无法直接在服务器上更新您的 github 存储库。

为此，请将原始 github 存储库添加为新远程。这在[egit 用户手册](http://wiki.eclipse.org/EGit/User_Guide#Adding_a_Remote_Configuration)中有描述。改为选择“configure for fetch”，并为其提供原始 repo 的 URI。之后，您可以简单地使用该新远程节点上的上下文菜单“Pull”来获取和合并所有新内容。完成合并后，您“推送到上游”，这是您自己的 github 存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T21:52:45.557

尝试上游下的第二个 url 来推送您的更改。第一个仅用于获取（请参见绿色/红色箭头 ;-)

# css - :active 默认红色？

> ID：15452921
> 
> 赞同：0
> 
> 时间：2013-03-16T18:21:05.133
> 
> 标签：css

在[http://www.droppoint.cz/system/objednej.php](http://www.droppoint.cz/system/objednej.php)当您单击购物车图标时，激活时边框变为红色。默认情况下，右边框也略带蓝色，这也不应该是。

你看有什么不对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:31:46.897

如果您想删除这两种效果，即
1.Red 颜色在活动和
2.Default 蓝色从右边框。

然后我发现这`box-shadow`是这里的问题，所以从你的类中删除这些属性。

这些是类

```
#obj #cart #icon:active 
{
   /*box-shadow: -1px 0px 4px 0px inset;*/
}

#obj #cart #icon
{
 /* box-shadow: -1px 0px 5px -2px inset; */
} 
```

这将删除它们。希望它对你有用。

# emacs - Emacs 光标移动建议

> ID：15452923
> 
> 赞同：4
> 
> 时间：2013-03-16T18:21:23.407
> 
> 标签：emacs, elisp, advising-functions, defadvice

我编写了一个次要模式，当光标在缓冲区中移动时突出显示缓冲区的各个部分。我通过建议这样的运动功能来做到这一点。

```
...
(defadvice next-line (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
(defadvice previous-line (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
(defadvice right-char (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
(defadvice left-char (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
(defadvice forward-word (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
(defadvice backward-word (after showcss/advise-main)
  "Advice around cursor movement"
  (highlight-some-stuff))
... 
```

但这似乎是错误的做法。我一直在寻找光标移动的钩子，但似乎没有。

我是否缺少一个可以使用的钩子而不是建议一堆运动功能，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:56:41.210

嗯...几天前我给你发了一封电子邮件，建议在 GNU ELPA 中包含 showcss，我还建议你使用它`post-command-hook`来代替那些默认的建议。

# c++ - 使用数组和 for 循环，但不使用字符串或任何类

> ID：15452925
> 
> 赞同：3
> 
> 时间：2013-03-16T18:21:24.087
> 
> 标签：c++, arrays, if-statement, for-loop

```
void printEncodingCodonSequences (
            char aminoAcid1,
            char aminoAcid2,
            char aminoAcid3, 
            char aminoAcid4,
            char aminoAcid5
); 
```

给定一个由 5 个氨基酸符号组成的蛋白质片段作为输入，打印出（在屏幕上）翻译成该蛋白质片段的所有不同密码子序列（每行一个序列）。输入可以在任何情况下，如果任何输入无效，则该函数应打印“？” 在一行中。

这是一个例子：蛋白质片段 MWQWH 可以由这四个密码子序列翻译，因此输入的 for ：'M'，'W'，'Q'，'W'，'H'（或'm'，' W', 'q', 'W', 'H')，该函数应打印以下内容：

```
ATGTGGCAATGGCAT
ATGTGGCAGTGGCAT
ATGTGGCAATGGCAC
ATGTGGCAGTGGCAC 
```

我不希望你回答所有问题，只是提示如何去做。对于此任务，不允许使用任何字符串或任何容器类！有人告诉我必须对数组使用嵌套循环。

![在此处输入图像描述](../Images/ffa839160eb05fb70d5e612793437fb5.png)

在这个项目中，蛋白质片段由 5 个氨基酸组成（输入作为它们的符号），如果氨基酸的密码子超过 1 个，它将在新行中打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:03:55.100

鉴于您应该使用循环来实现这一点：这可以使用*五个嵌套循环*进行编程。在每个循环中，您会遍历一个氨基酸符号*的所有可能的翻译密码子三联体。*这是基本的想法。

以下伪代码可以作为开始：

```
for each translating codon triplet codon1 for aminoAcid1:
    for each translating codon triplet codon2 for aminoAcid2:
        for each translating codon triplet codon3 for aminoAcid3:
            for each translating codon triplet codon4 for aminoAcid4:
                for each translating codon triplet codon5 for aminoAcid5:
                    print codon1 + codon2 + codon3 + codon4 + codon5
                end for
            end for
        end for
    end for
end for 
```

您现在要做的是使用原始数组在 C++ 中编写这些循环。对于每个氨基酸符号，您提前知道哪个（以及多少）密码子三联体是我们必须在循环中遍历的候选者。将它们存储为常量数组，并使用函数参数中提供的氨基酸在循环中访问该数组。

由于您不应该使用字符串和容器，因此您不得不使用 C 字符串（char 数组）和此类的原始数组在 C++ 中对上面的表格进行编码。伪代码 ( `codon1`... `codon5`) 中的变量应该只是`const char*`(C-strings) 并且可以使用`cout`或打印`printf`。

上面的表格可以写成一个数组，如下所示。请注意，我将表格的每一行都写为一个 C 字符串，它以编码氨基酸符号的字母开头，然后是一个三元组的“列表”。所有这些三元组都是以 0 结尾的（这使得将它们指向 C 字符串成为可能）。要遍历三元组，您只需找到空终止字符并将此指针加一。如果这个指针是非空的，就会有另一个三元组来。如果它为空（请注意，在这些行的末尾，将添加另一个空，因为它被添加到每个字符串文字中），这是最后一个三元组。

```
const char *codons[] = {
    "AGCT\0GCC\0GCA\0GCG\0",
    "RCGT\0CGC\0CGA\0CGG\0AGA\0AGG\0",
    // ...
    "*TAA\0TGA\0TAG\0"
}; 
```

使用从该表中找到正确行的实用函数，然后可以将循环写为（这里是第一个酸符号）：

```
for(const char *codon1 = codonRow(aminoAcid1); codon1 += strlen(codon1); codon1 != NULL) {
    ...
} 
```

在这个循环中，初始化使用实用函数（见下文），它从表中返回行但不包括第一个字符（因此它指向给定酸的第一个密码子三联体）。递增操作只是将这个指针增加了 C 字符串长度（这将导致`codon1`在下一个空终止字符之后指向）。如果这是空的，我们就完成了。

好消息是，在这个循环的每次迭代中，都`codon1`指向一个 C 字符串（嗯，它从上面指向数组的字符串文字的中间）并且将被适当地终止。所以打印`codon1`只会打印 3 个字符。

这是上面循环中使用的实用函数，它在表中搜索特定字符并返回此行：

```
const char *codonRow(char aminoAcid)
{
    for(int i = 0; i < sizeof(codons)/sizeof(*codons); ++i) {
        const char *row = codons[i];   // Fetch the row from the array
        if (row[0] == aminoAcid)       // Compare the amino acid symbol
            return row + 1;            // Remove the amino acid symbol
    }
    // error:
    std::cerr << "No such amino acid: " << aminoAcid << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:04:03.790

好的，我将忽略您被告知确切有多少密码子，并描述一个更通用的解决方案。

您知道每个密码子正好转换为 3 个字符，因此您可以预先计算所需缓冲区的大小。在您的情况下，您当然可以使用固定大小的缓冲区。请记住为终止 NUL 字符留出空间。此输出缓冲区将是一个数组。看起来像这样：

```
void printEncodingCodonSequences(
        char aminoAcid1,
        char aminoAcid2,
        char aminoAcid3, 
        char aminoAcid4,
        char aminoAcid5         )
{
     char outputBuffer[16]; // 5 codons, exactly
     char codons[] = { aminoAcid1, aminoAcid2, aminoAcid3, aminoAcid4, aminoAcid5 };
     findCodonEncodingCombinations(outputBuffer, outputBuffer, codons, 5);
} 
```

接下来，您需要将每个密码子映射到所有可能的序列，并针对给定的密码子重复此操作。因为这是一个组合问题，所以它非常适合递归。该函数采用第一个密码子，并遍历不同的可能编码。在每次迭代中，它会再次调用自己来处理剩余的密码子。

```
int findCodonEncodingCombinations( char* outputBuffer, char* outputPos, char* codons, int remaining )
{
    if (remaining == 0) {
        *outputPos = 0;
        puts(outputBuffer);
        puts("\n");
        return 1;
    }

    int combinations = 0;

    switch (*codon) {
        case 'D': // GAT, GAC
        case 'd':
            outputPos[0] = 'G';
            outputPos[1] = 'A';
            outputPos[2] = 'T';
            combinations += findCodonEncodingCombinations(outputBuffer, outputPos + 3, codons + 1, remaining - 1);
            outputPos[2] = 'C';
            combinations += findCodonEncodingCombinations(outputBuffer, outputPos + 3, codons + 1, remaining - 1);
            break;
    }

    return combinations;
} 
```

实际上，循环对于这个问题并不是特别有用。但是，您可以使用一个来验证所有输入是否有效，例如：

```
void printEncodingCodonSequences(
        char aminoAcid1,
        char aminoAcid2,
        char aminoAcid3, 
        char aminoAcid4,
        char aminoAcid5         )
{
     char outputBuffer[16]; // 5 codons, exactly
     char codons[] = { aminoAcid1, aminoAcid2, aminoAcid3, aminoAcid4, aminoAcid5 };
     if (!validateCodons(codons, 5)) return;
     findCodonEncodingCombinations(outputBuffer, outputBuffer, codons, 5);
}

bool validateCodons( char* codons, int count )
{
    while (count--) {  // it's a loop :)
        switch (*codons++) {
            case 'd':
            case 'D':
            //...
                break;

            default: // unrecognized codon
                puts("?\n");
                return false;
        }
    }

    return true;
} 
```

显然，您需要填写许多其他密码子映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:13:24.600

好吧，您想将氨基酸序列翻译成密码子序列。因此，您需要的第一件事是将氨基酸代码翻译成密码子的表格。由于您不允许使用类，因此表意味着数组。由于每个氨基酸可能转化为多个密码子，因此您需要一组数组：

```
#define MAX_CODONS  6   /* maximum number of codons for one amino acid */
char *AminoAcidCodons[26][MAX_CODONS+1] = {
    /* A */ { "GCT", "GCC", "GCA", "GCT", 0 },
    /* B */ { 0 },
    /* C */ { "TGT", "TGC", 0 },
          :
    /* Y */ { "TAT", "TAC", 0 },
    /* Z */ { 0 },
}; 
```

现在您可以使用循环将大写字母转换为密码子集：

```
for (i = 0; AminoAcidCodons[aminoAcid1 - 'A'][i]; i++) {
    /* AminoAcidCodons[aminoAcid1-'A'][i] is one of the codons that AminoAcid1 can be encoded as */
     : 
```

要获得 5 种氨基酸的所有可能组合，您需要 5 个嵌套循环。要处理小写字母，您需要将它们翻译成大写字母。您还需要处理无效代码（非字母和没有相应密码子的字母）。功能`isalpha`和`toupper`可以在这里提供帮助。

# php - 允许将会话中存储的 id 副本插入数据库

> ID：15452929
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:21:48.620
> 
> 标签：php, mysql, database, session, duplicates

在数据库中，我已经有了这个：

```
id | username  | password
=========================
3  |   John    |  happy 
```

同一用户注册了一个 ID 为 3 的帐户，该帐户存储在 PHP 会话中。我想将 id 也是 3 的另一行存储到数据库中。

输出将是这样的：

```
id | username  | password
=========================
3  |   John    |  happy
3  |   Emily   |   sad 
```

到目前为止，我得到了这个：

abc.php

```
$result = mysql_query("SELECT id FROM account WHERE username='".$username."' LIMIT 1") or die(mysql_error);

while ($row = mysql_fetch_assoc($result)) 
{
    $_SESSION['id'] = $row['id'] ;
}

<input type="hidden" name="custom" value="<?php echo $_SESSION['id'];?>"> 
```

cba.php

```
$id = $_POST['custom'];

mysql_query("INSERT INTO user (id, username, password) VALUES('".$id."', '".$username."', '".$password."')") or die(mysql_error()); 
```

我尝试使用 id 为 3 的会话并尝试插入数据库但没有插入任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:34:26.880

您要做的是具有相同的“两个唯一”值。这是不可能的。否则这些值不再是唯一的。

要回答您的问题，如果您要在其中存储值的字段不是您强制唯一性的字段，那么一个简单的插入应该可以做到。除非您想从数据库中获取值并进行重复。很难弄清楚你想要什么。但只是尝试插入一个您知道该字段已经存在的值。如果它不是唯一字段或主要字段，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:26:48.797

很好奇你为什么要这样做。任何人，您都可以尝试以下方法：

```
$sql = "INSERT INTO user (id, username, password)
SELECT MAX(id), '" . $username . "', '" . $password . "' FROM user"; 
```

希望您也不要以纯文本形式存储密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:52:14.293

我认为您需要更新查询。由于 id 已经存在（用户已注册，因为他的会话有一个 id），您需要使用新的详细信息更新现有用户的信息。

# servlets - 我们怎么能说Servet属于Presentation tier而不是Business tier呢？

> ID：15452931
> 
> 赞同：0
> 
> 时间：2013-03-16T18:21:50.997
> 
> 标签：servlets

我已经看到 Servlet 属于表示层，下面的 Chech Link
[谁能解释这些词。Java EE 中的表示层.业务层.集成层示例？](https://stackoverflow.com/questions/2113818/can-anybody-explain-these-words-presentation-tier-business-tier-integration-ti)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:09:08.987

因为 Servlet 还有助于动态创建网页。一种 JSP 组件，它也是一种 Java servlet，旨在履行 Java Web 应用程序的用户界面角色。JSP 引擎从磁盘加载 JSP 页面并将其转换为 servlet 内容。只是 Web 开发人员将 JSP 编写为结合了 HTML 或 XHTML 代码、XML 元素以及嵌入式 JSP 操作和命令的文本文件。

# ios - iOS SQLite3 中的 SQLite 更新语句可能性

> ID：15452932
> 
> 赞同：2
> 
> 时间：2013-03-16T18:21:53.197
> 
> 标签：ios, sqlite, sql-update

我的 iOS 应用程序使用 SQLite3 数据库，到目前为止，我已经成功地创建表、插入值，然后选择它们。

但是，现在我想更新。我试过这个：

```
UPDATE field WHERE _id = 5 (name,type,state) VALUES (?,?,?) 
```

但是 SQLite 告诉我 WHERE 附近存在语法错误

据我了解，SQLite 可能不支持上述语法，更喜欢它的格式如下。

```
UPDATE field  SET name= "Upper"  type= "Pigs" state=1 WHERE _id = 5; 
```

但是请注意，在第二个语句中没有 (?,?,?) （我相信它调用了参数化查询）用于将值动态插入 SQL 字符串。告诉我这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:49:49.903

是的，您可以使用以下参数化查询：-

```
NSString *sqlString = @"UPDATE field SET name=?, type=?, state=? where _id=?";

sqlite3_stmt *stmt;
if(sqlite3_prepare(database, [sqlString UTF8String], -1, &amp;stmt, NULL) != SQLITE_OK)
{
  //Handle Error
}

if(sqlite3_bind_text(stmt, 1, [record.name UTF8String],[record.type UTF8String],[record.state UTF8String], -1, SQLITE_TRANSIENT) != SQLITE_OK)
{
  // Handle Error
}
if(sqlite3_bind_int(stmt, 2, record.key) != SQLITE_OK)
{
  // Handle Error
}

if (sqlite3_step(statement) != SQLITE_DONE)
{
  // Handle Error
} 
```

您的参数化代码已准备就绪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:44:28.503

你要

```
update field set name = ?, type = ?, state = ? where id = 5 
```

# android - 应用程序被杀死时Android后台服务正在重新启动

> ID：15452935
> 
> 赞同：38
> 
> 时间：2013-03-16T18:21:59.447
> 
> 标签：android, service, background-service

我正在开发一个应用程序，其中创建了一个后台服务来收集传感器数据。我从我的活动开始服务：

```
startService(new Intent(this, MyService.class)); 
```

我创建了服务，因此如果应用程序被销毁，后台服务仍会继续收集数据。我试过这个，它在一定程度上奏效了。我的问题是，当我终止应用程序时，服务似乎重新启动，因为调用了`onCreate()`服务和`onStart()`方法。请问有什么方法可以不重启服务吗？

**更新：**

正如下面的答案所建议的，我在服务中添加了以下方法，但没有运气。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return START_NOT_STICKY;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-16T18:28:10.137

这取决于 onStartCommand 中返回的值。

您必须返回 START_NOT_STICKY

根据[文档](https://developer.android.com/reference/android/app/Service.html)：

> 对于已启动的服务，它们可以决定运行另外两种主要的操作模式，具体取决于它们从 onStartCommand() 返回的值：START_STICKY 用于根据需要显式启动和停止的服务，而 START_NOT_STICKY 或 START_REDELIVER_INTENT 用于适用于只应在处理发送给它们的任何命令时保持运行的服务

简而言之：如果您返回 START_STICKY，则只要资源可用，就会重新创建服务。如果您返回 START_NOT_STICKY 您必须重新激活发送新意图的服务。

由于所有这些都引发了我的好奇心，我制作了一个示例应用程序来测试它。[您可以在此处找到包含所有来源](https://dl.dropbox.com/u/3092639/ServiceNotSickySample.zip)的 zip 有一个 startService 按钮和一个 stopService 按钮，它们可以满足您对它们的期望。该服务在 onStartCommand 中返回 START_NOT_STICKY。我在 onCreate、onStartCommand 和 onDestroy 中放置了 toast。

这里会发生什么：

*   如果我按开始，则会调用 onCreate 和 onStart
*   如果我按下停止，就会触发 onDestroy
*   如果我按 start 两次，onCreate 被调用一次，onStartCommand 被调用两次

所以它的行为与预期的一样。

如果我按照您的描述启动服务并终止应用程序，则不会调用 onDestroy，但不会调用 onCreate 或 onStart。

如果我回到应用程序并再次按启动，**则会调用 onCreate，**这意味着，正如我之前所写的，START_NOT_STICKY 会阻止服务自动重启。

我猜您的应用程序中有其他东西可以再次启动服务（可能是待处理的意图）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-26T15:18:49.977

应用程序和服务存在于同一个进程中，这意味着当应用程序被终止时，您的服务也会被终止。更改 onStartCommand 的返回值不会影响此过程。它只是告诉服务在您告诉它时启动/停止，或者在它完成所需的操作时启动/停止。正如您对原始帖子的评论中所述，将其设置为前台进程是可行的，但这实际上只是迫使服务具有高优先级，而不是解决问题。

要更改服务以使其被单独终止并假设它是已启动的服务而不是由于使用 onStartCommand 而绑定的服务，请在该服务的清单中指定进程名称。

来自[进程和线程开发人员指南](https://developer.android.com/guide/components/processes-and-threads.html)：

> 每种类型的组件元素的清单条目 — `<activity>, <service>, <receiver>, and <provider>`— 支持一个 android:process 属性，该属性可以指定该组件应在其中运行的进程。您可以设置此属性，以便每个组件在其自己的进程中运行，或者使某些组件共享一个进程而其他组件不共享。您还可以设置 android:process 以便不同应用程序的组件在同一个进程中运行——前提是这些应用程序共享相同的 Linux 用户 ID 并使用相同的证书进行签名。
> 
> Android 可能会决定在某个时候关闭某个进程，此时内存不足并且需要更直接地为用户服务的其他进程。在被杀死的进程中运行的应用程序组件因此被破坏。当这些组件再次有工作要做时，将再次为这些组件启动一个流程。

从[`<service>`清单文件中](https://developer.android.com/guide/topics/manifest/service-element.html)：

> 安卓：进程
> 
> 运行服务的进程的名称。通常，应用程序的所有组件都在为应用程序创建的默认进程中运行。它与应用程序包同名。元素的 process 属性可以为所有组件设置不同的默认值。但是组件可以使用自己的进程属性覆盖默认值，从而允许您将应用程序分布在多个进程中。
> 
> 如果分配给此属性的名称以冒号 (':') 开头，则会在需要时创建应用程序专用的新进程，并且服务在该进程中运行。如果进程名称以小写字符开头，则服务将在该名称的全局进程中运行，前提是它有权这样做。这允许不同应用程序中的组件共享一个进程，从而减少资源使用。

不知道为什么提到这一点的其他答案被否决。我过去使用过这种方法，而今天，我创建了一个简单的 Activity 应用程序，该应用程序在不同的进程上提供了一个服务，以确保我没有发疯。我使用 Android Device Monitor 来终止应用程序的进程。您可以在 ADM 中看到这两个单独的进程，并且可以看到当应用程序的进程被终止时，服务的进程不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-04T07:56:54.747

Start not sticky 在 kitkat 之上不起作用，而另一个 onTaskRemoved 在 Marshmellow 之上不起作用。onTaskRemoved 可以通过处理一些异常来使用。没有工作。但是试试那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:27:20.710

如果你使用 IntentService，它有一个

```
onHandleIntent() 
```

方法，您应该在其中放置需要执行的代码。它在一个单独的线程中执行（不是您的应用程序运行的 UI 线程），因此您的应用程序不应影响它。代码执行完毕后，线程终止，服务自动停止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-01T15:50:54.810

我遇到了同样的问题，并且能够通过使服务在全局进程中运行来解决它。您可以通过将以下内容添加到清单标记来执行此操作：

> 进程="com.myapp.ProcessName"

（随便起个名字。）

当我这样做时，我发现当应用程序从列表中滑出时，我的服务没有被终止（并重新启动）。大概这是因为当你刷掉它时应用程序进程被杀死，但全局服务进程没有。

这样做的缺点是您的应用程序和服务之间的通信现在必须通过 IBinder 接口；您不能直接从另一个应用程序或服务中调用函数，因为它们在不同的进程中运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-28T16:27:22.383

我知道回答这个问题已经很晚了，但可能对其他人有帮助。这真的帮助了我的音乐播放器应用程序。

如果有一些服务可能会破坏或影响用户体验，如音乐等，那么在这种情况下，您必须使用通知，当服务启动成功时，然后创建通知并使用该功能

```
startForeground(int Notification_id,Notification); 
```

这将在后台运行您的服务，而无需重新启动和重新调用其方法

[https://developer.android.com/reference/android/app/Service.html](https://developer.android.com/reference/android/app/Service.html)

# android - 如何在android api v2中填充谷歌地图高度？

> ID：15452937
> 
> 赞同：0
> 
> 时间：2013-03-16T18:22:05.247
> 
> 标签：android, google-maps-android-api-2

如何填充谷歌地图的高度......

![在此处输入图像描述](../Images/7898fe59dc3a312b9253e83b6e7c2602.png)

红色框中是空白区域。如何避免这种情况......

**XML 布局文件**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:47:50.563

尝试将 Map 放在 a 内`LinearLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:name="com.google.android.gms.maps.SupportMapFragment"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

# javascript - jsPlumb 在调用 setPaintStyle() 时删除了直接连接

> ID：15452943
> 
> 赞同：3
> 
> 时间：2013-03-16T18:22:28.910
> 
> 标签：javascript, jquery, canvas, svg, jsplumb

我正在将 jsPlumb 用于中型项目。尽管文档在可靠的解释方面很薄弱，但我已经成功完成了该项目，现在我已准备好交付它。

就在交货日期之前，我被要求将连接线笔直而不是弯曲。我认为这就像在 jsPlumb 连接方法中添加一个关键字一样简单，例如：`jsPlumb.connect({ connector: 'Straight'... })`...确实如此。所以有什么问题？

我正在处理的这个项目必须允许用户“选择”连接线，这样他们就可以按下“删除”按钮来清除他们选择的连接。我允许用户通过调用 jsPlumb 的`setPaintStyle()`方法来选择连接，如下所示：

```
// Select/Deselect each connection on click
jsPlumb.bind('click', function (connection, e) {
   e.preventDefault();

   connection.setPaintStyle({ 
      strokeStyle: 'red'
   });
}); 
```

仅当线条弯曲（*jsPlumb 默认*）时，这才按预期工作。

但是，如果方法中的`connector`选项`connect()`更改为**"Straight"**，当我单击它们时，垂直的连接线（*它们的端点相互交叉*）就会消失。其他没有直接相互交叉端点的直线没有这个问题。

删除连接器选项，或将其值设置为“bezier”，或者`setPaintStyle()`在选项设置为“直”时调用该方法，然后点击的行保持在适当位置。

这是一个 jsBin 示例：[jsPlumb setPaintStyle() with Straight lines bug](http://jsbin.com/ogekot/4/edit)

最初我认为这是我的应用程序中的一个错误，但在花费大量时间后，我将问题追溯到 setPaintStyle() 方法。我很有信心这是一个 jsPlumb 错误，但我并不完全确定。在这一点上非常令人沮丧，因为唯一阻止我交付项目的是将笔触颜色更改为红色的能力。如果我能用直线完成这个简单的任务，那么我就可以继续前进。

我考虑过自己定位 SVG 路径节点并以这种方式更改笔触颜色，但由于 jsPlumb 将 VML 用于 IE8（*ie8 是该项目的要求*），我不确定我能做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:13:55.493

对于其他可能遇到这个令人沮丧的 jsPlumb 错误的人。在整个星期六都在寻找解决方案之后，我终于找到了解决这个问题的方法。

我实际上并没有使用`setPaintStyle()`方法来改变描边颜色，而是使用了`getPaintStyle()`和`repaint()`方法的组合。这是一个固定的 jsBin 示例：http: [//jsbin.com/ogekot/7/edit](http://jsbin.com/ogekot/7/edit)

```
jsPlumb.bind('click', function (connection, e) {
   e.preventDefault();

   connection.getPaintStyle().strokeStyle = '#CE322A';
   connection.repaint()
}); 
```

# python - 在 PiCloud 环境服务器上使用共享库

> ID：15452945
> 
> 赞同：2
> 
> 时间：2013-03-16T18:22:37.797
> 
> 标签：python, linux, cloud

Linux新手问题：我有个人[PiCloud](http://www.picloud.com)环境，可以安装自己的Python扩展。但我想使用一个预编译的 C 共享库（mylib.so），即放在 /user/lib 中。那可能吗？如果我必须在PiCloud环境服务器上构建它，我该如何上传源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:15:40.863

您可以简单地将 mylib.so 复制到环境的 /usr/lib 中。但是，最好在安装服务器上编译 mylib.so 以确保服务器上的所有依赖项都可用，并且使用正确的体系结构 (AMD64)。

以下是步骤：

1.  创建一个环境，并将其置于修改模式。

2.  您需要将文件复制到环境的设置服务器。如果您在 Linux 上，使用 scp 将是最简单的。如果您使用的是 Windows，则需要使用[Tunnelier 之](http://www.bitvise.com/tunnelier)类的东西。在任一操作系统上，您都需要单击钥匙图标，然后下载您需要通过设置服务器进行身份验证以复制文件的 SSH 身份文件。

    $ scp -i picloud_rsa mylib.tar.gz picloud@setup-server-hostname.com:~/

3.  一旦文件在服务器上，您可以通过 SSH 连接到设置服务器，或使用 Web 浏览器控制台（新功能！）。从那里，运行您的编译脚本。您可以将 .so 文件复制到 /usr/lib。不要忘记使用“sudo”。

    $ sudo cp mylib.so /usr/lib

4.  您应该在安装服务器上运行依赖于 mylib.so 的任何程序，以确保其正常工作。如果要运行测试，则需要运行“ldconfig”，以便共享库位于库缓存中。

    $ sudo ldconfig

    $ ./run_your_program

# c++ - 为什么派生类不能访问受保护的基类成员？

> ID：15452948
> 
> 赞同：1
> 
> 时间：2013-03-16T18:22:52.477
> 
> 标签：c++, inheritance, namespaces

我有一个基类（VectorRaw）和一个派生类（Vector）。

我在基类的构造函数中使用 operator new 来创建内存缓冲区，然后在派生类的构造函数中放置 new 以在其中放置元素。

基类有它的虚拟析构函数，如果派生类的构造函数中出现问题，它会清理。

当我尝试编译它时，出现错误：所有基类的成员（`begin, end, end_of_reserved`）都超出了所有派生类函数的范围。

我究竟做错了什么？

这是我的代码：

```
template <typename T>
class VectorRaw {
protected:
    T * begin;
    T * end;
    T * end_of_reserved;

    VectorRaw(const size_t size) {
        begin = (T*) operator new (2 * size * sizeof(T));
        end = begin;
        end_of_reserved = begin + 2 * size;
    }
    virtual ~VectorRaw<T> () throw() {
        for (T * iter = begin; iter != end; ++iter) {
            iter->~T();
        }
        operator delete (begin);
        end_of_reserved = end = begin;
    }
};

template <typename T>
class Vector : public VectorRaw<T> {
public: 
    Vector(const size_t size, const T& value) : VectorRaw<T>(size) {
        for (end = begin; end != begin + size; ++end)
            {   
            new (end) T (value);
        }
    }
    bool Empty() const throw() {
        return (begin == end);
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:26:26.717

由于您的基类是模板类，因此您需要通过`this`指针访问成员：

```
template <typename T>
class Vector : public VectorRaw<T> {
public: 
    Vector(const size_t size, const T& value) : VectorRaw<T>(size) {
        for (this->end = begin; this->end != this->begin + size; ++this->end)
            {   
            new (this->end) T (value);
        }
    }
    bool Empty() const {
        return (this->begin == this->end);
    }

}; 
```

这对于推迟查找这些名称直到知道模板参数是必要的。它使它们成为*依赖名称*。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/4643295/150634)。

# multithreading - 如何处理 Isolates 中抛出的异常？

> ID：15452954
> 
> 赞同：2
> 
> 时间：2013-03-16T18:23:24.703
> 
> 标签：multithreading, dart, error-handling, dart-isolates

我正在试验 Dart 并使用新[`streamSpawnFunction`](http://api.dartlang.org/docs/releases/latest/dart_isolate.html#streamSpawnFunction)的来创建一个新的隔离。

我在 Dartium 中运行我的代码，但我注意到如果隔离中发生某种不可恢复的错误，我在控制台上不会收到任何错误消息。因为 Isolate 代码中的断点不起作用，所以调试真的很痛苦。

旧的基于端口的 Isolate spawn 函数 ( [`spawnFunction`](http://api.dartlang.org/docs/releases/latest/dart_isolate.html#spawnFunction)) 具有用于处理错误的回调函数。我想知道为什么这不适用于`streamSpawnFunction`. 有没有一种新的方式来订阅 Isolate 的错误事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:01:28.027

streamSpawnFunction 缺少的功能只是一个疏忽。我提交了[http://dartbug.com/9208](http://dartbug.com/9208)，我将在下周尝试修复它。

我不确定断点在隔离区中不起作用是否是一个已知问题。我会让您提交错误报告 ( [http://dartbug.com](http://dartbug.com) )，以便开发人员可以向您提问，并且您可以随时了解该过程。

# c++ - 如何编写用于算法的 C++ stdlib 样式增量函数

> ID：15452955
> 
> 赞同：0
> 
> 时间：2013-03-16T18:23:25.623
> 
> 标签：c++, std

我正在试验 C++ 标准库，并想编写一个通用的增量运算符来练习。下面是我的尝试。有没有更简单的方法？我希望它的操作有点像 std::plus。但是我不能使用 plus，因为它是一个二元运算符，而 generate_n 需要一个没有参数的函数。

这是我的尝试。任何反馈将不胜感激。

```
#include <iostream>
#include <vector>
#include <algorithm>

template<typename T>
class incr {
public:
    incr(const T& startnum = 0) : m_start(startnum) {}

    T operator()() { return m_start++; }

private:
    T m_start;
};

void printme(int i) {
    std::cout << i << " ";
}

int main() {
    int n = 10;
    std::vector<int> sq(n);
    incr<int> i(3);
    std::generate_n(sq.begin(), n, i);
    std::for_each(sq.begin(), sq.end(), printme);
    return 0;
} 
```

更新：为了支持广泛的平台，我需要排除 C++11 和 Boost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:25:26.797

使用[运算符重载](http://www.cplusplus.com/doc/tutorial/classes2/)怎么样？

# jquery - 使用 Jquery 从 json 格式化日期

> ID：15452960
> 
> 赞同：0
> 
> 时间：2013-03-16T18:24:00.813
> 
> 标签：jquery, json, jquery-ui, date, formatting

我正在尝试为 TMDb 编写自动完成功能，但我不知道如何格式化日期。

TMDB API 返回一个日期，如`2001-12-19`. 我想显示数据，如`Title (Year)`.

我试图摆弄并使用 jQuery 获取日期，例如[http://jsfiddle.net/XHyy3/](http://jsfiddle.net/XHyy3/)。

我的脚本：

```
<script>
  $(function() {
    function log( message ) {
      $( "<div>" ).text( message ).prependTo( "#log" );
      $( "#log" ).scrollTop( 0 );
    }

    $( "#city" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: "http://api.themoviedb.org/3/search/movie?api_key=myapikey",
          dataType: "jsonp",
          data: {
            query: request.term
          },
          success: function( data ) {
            response( $.map( data.results, function( item ) {
              return {
                label: item.title + " (" + item.release_date + ")",
                value: item.title,
                name: item.id
              }
            }));
          }
        });
      },
      minLength: 2,
      select: function( event, ui ) {
    $("input#city").val(ui.item.name);
    $('input[name="q"]').attr('name', 'id');
    $('input[id="film"]').click();
      },
      open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
    });
   });
 </script> 
```

`item.release_date`包含日期，例如`2001-12-19`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:32:47.293

如果其他一切正常，只需更改此行：

```
label: item.title + " (" + item.release_date + ")", 
```

对此：

```
label: item.title + " (" + item.release_date.split('-')[0] + ")", 
```

# c# - 无需点击按钮即可发布

> ID：15452963
> 
> 赞同：1
> 
> 时间：2013-03-16T18:24:20.220
> 
> 标签：c#, javascript, asp.net, sql-server, webmatrix-2

好的，我正在使用 MS Webmatrix 和 ASP.net、c#、javascript 构建一个站点。我想让我的客户输入信息，然后如果我可以在我的数据库上验证它，就去贝宝付款。所以流程是

1.  客户输入信息
2.  针对数据库进行验证
3.  去 PayPal 付款。

所以我真的不希望*立即付款*按钮直接转到贝宝。*我现在可以轻松地将付款*路由到验证的 html，如果失败，则显示适当的消息和提示。

如果信息验证，我如何在不点击另一个按钮的情况下路由到 PayPal？是否有代码可以放入我的脚本中以发送到贝宝而无需单击或以编程方式强制单击而无需客户干预？

此外，如果要求退款，我希望能够在将来召回客户的帐单地址，以便我可以邮寄支票。我更喜欢手动邮寄支票。我是否可以捕获/存储 PayPal 交易 ID，然后在几个月后（如果需要）使用该交易 ID 请求账单地址，这样我就不必将地址存储在我的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:25:12.783

您可以使用[WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)向 PayPal 发出 HTTP 请求并管理其响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:32:25.717

你想重定向服务器端？只需使用 Web Classes 即可。

关于 PayPal：有一个 SOAP/XML API，在那里你可以做诸如 TransactionSearch 之类的东西。只需检查[https://developer.paypal.com/](https://developer.paypal.com/)或检查：[https ://cms.paypal.com/cms_content/GB/en_GB/files/developer/PP_API_Reference.pdf](https://cms.paypal.com/cms_content/GB/en_GB/files/developer/PP_API_Reference.pdf)

# php - OnClick fopen fread fwrite fclose

> ID：15452971
> 
> 赞同：0
> 
> 时间：2013-03-16T18:24:57.520
> 
> 标签：php, javascript, html, ajax

我有一张图片：

```
 <img src="imagini/floo.gif" onclick="score()"> 
```

我希望“点击”打开一个文件“c.txt”。该文件的内容是：0

我希望每次点击都在 c.txt 中添加 100。

我想要这样的东西：

```
 <img src="imagini/floo.gif" onclick="score()">
<script> function score(){ (..do file add.php ...) }</script> 
```

并添加.php：

```
<?php
$c = "c.txt";
$fh = fopen($c, "r");
$current = fread($fh, filesize($c));
fclose($fh);
$current++;
$fh = fopen($c, "w");
fwrite($fh,$current);
fclose($fh);
?> 
```

放置什么：“（..do file add.php ...）”以使代码正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:28:26.770

您需要发送 AJAX 请求来处理文件。这是代码的 jQuery 版本：

```
function score() {
    $.post("add.php", function(data) {
       //This callback executes after the request was successfull
       // echo something back to read from here as `data`
       console.log(data);
    });
} 
```

# python - wxPython 消息对话框错误“捕获鼠标的窗口未处理 wxEVT_MOUSE_CAPTURE_LOST”

> ID：15452979
> 
> 赞同：0
> 
> 时间：2013-03-16T18:26:08.683
> 
> 标签：python, wxpython, wxwidgets

我的代码

```
 def myCaller(self, event):

    wx.CallAfter(self.msgbox(0.3434, 0.34, 0.121))

 def msgbox(self, val, f1, f2):

    message = "Node Failure Probability: %f \nLeft Child Value: %f \nRight Child Value: %f" % (val, f1, f2)

    dlg = wx.MessageDialog(self, message, "Node Information", wx.OK)
    dlg.showmodal()
    dlg.Destroy() 
```

输出正常，但随后在 Shell 中出现错误：

```
 dlg.ShowModal()
     File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_windows.py", line 711, in ShowModal
return _windows_.Dialog_ShowModal(*args, **kwargs)
    wx._core.PyAssertionError: C++ assertion "wxAssertFailure" failed at ..\..\src\common\wincmn.cpp(2571) in DoNotifyWindowAboutCaptureLost(): window that captured the mouse didn't process wxEVT_MOUSE_CAPTURE_LOST 
```

我哪里错了？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:27:11.273

问题不在于您显示的代码，而在于调用它的代码，或者更确切地说，在于选择调用它的那一刻。在不知道从哪里调用它的情况下很难确定，但是您必须通过捕获鼠标时调用的某个事件处理程序来执行此操作。显示消息对话框会中断鼠标捕获并导致您看到警告。

有两种解决方案：要么修改正在捕获鼠标的组件以对捕获失败做出反应，要么`wx.MessageDialog`此时不显示。如果它是 C++ 而不是 Python 级别的东西，前者对你来说很难做到（尽管你总是可以尝试更新到 wxPython 2.9.4 并查看问题是否在此期间没有解决），但后者可以很容易只需使用[wx.CallAfter 即可](http://wiki.wxpython.org/CallAfter)完成。

# c++ - X11 图形编程字体

> ID：15452984
> 
> 赞同：0
> 
> 时间：2013-03-16T18:26:31.390
> 
> 标签：c++, x11, embedded-linux

我正在使用 X11 编程开发用户界面软件。（我不使用 QT、Widget、GTk）。我想使用字体属性功能增加字体大小。如何使用 XFontProp 功能？有没有其他方法可以使用 X windows 来增加字体大小？如果可以给我一个样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:11:09.787

如果要使用老式的现已弃用的服务器端字体渲染方法，则无法*更改*字体大小，需要*加载*正确大小的字体。使用`XLoadFont`和/或`XLoadQueryFont`为此。使用`Font`你在你的`GC`.

要查看字符串参数的外观，`xlsfonts`请在您的计算机上键入，或使用`xfontsel`GUI 实用程序。

请注意，任何给定的 X 服务器都可能缺少您要使用的字体。只有少数强制性字体包括`fixed`，我忘了还有什么。

如果您想使用时尚的现代客户端字体渲染（当今编写的大多数程序都在使用），您必须使用其中一个工具包，或者 Xft2 或 Cairo 库。

# xcode - SDL 和 Xcode（SDL_image 被忽略）

> ID：15452988
> 
> 赞同：0
> 
> 时间：2013-03-16T18:26:43.377
> 
> 标签：xcode, sdl, undefined-symbol, sdl-image

```
ld: warning: ignoring file /Library/Frameworks/SDL_image.framework/SDL_image, file was     
built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0  
0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386):
/Library/Frameworks/SDL_image.framework/SDL_image
    Undefined symbols for architecture i386:
    "_IMG_Load", referenced from:
    Image::Image(char const*)in main.o
    ld: symbol(s) not found for architecture i386
    collect2: ld returned 1 exit status 
```

我在我的 SDL 项目中遇到了上述错误，我不确定为什么。我上次运行该程序时（大约三个月前）它正在工作，但现在它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:59:55.950

获得 32 位版本——这就是这种情况下缺少的东西。

*   'i386 = 英特尔 32 位'
*   'x86_64 = 英特尔 64 位'

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T15:21:04.360

您显然安装了错误版本的 SDL_image，如果您使用的是 Mac OS X，您应该安装[mac version](http://www.libsdl.org/projects/SDL_image/)。

# c# - C#/Nodejs 兼容的加密/解密

> ID：15452992
> 
> 赞同：1
> 
> 时间：2013-03-16T18:27:13.597
> 
> 标签：c#, javascript, node.js, openssl

以下 nodejs 代码的等效 C# 加密例程是什么：

```
var cipher = crypto.createCipher('aes256', 'myPassword');
encrypted = cipher.update(sha256, 'utf8', 'base64') + cipher.final('base64'); 
```

我想在 C# 上加密并能够在 Node.js 应用程序中解密它。

# gwt - GWT 中 String.format() 的替代方法是什么？

> ID：15452994
> 
> 赞同：23
> 
> 时间：2013-03-16T18:27:20.397
> 
> 标签：gwt

虽然 GWT 不能模拟所有 java 的核心，但可以用作以下替代方案：

```
String.format("The answer is - %d", 42)? 
```

在 GWT 中向消息注入参数的优雅高效模式是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-16T19:10:38.237

一种优雅的解决方案是使用 SafeHtml 模板。您可以在界面中定义多个此类模板，例如：

```
public interface MyTemplates extends SafeHtmlTemplates {
  @Template("The answer is - {0}")
  SafeHtml answer(int value);

  @Template("...")
  ...
} 
```

然后使用它们：

```
public static final MyTemplates TEMPLATES = GWT.create(MyTemplates.class);

...
Label label = new Label(TEMPLATES.answer(42)); 
```

虽然这需要更多的工作来设置，但它的巨大优势在于参数会自动进行 HTML 转义。有关详细信息，请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml)

如果您想更进一步，并将您的消息国际化，请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nMessages#SafeHtmlMessages](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nMessages#SafeHtmlMessages)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T20:33:55.557

您可以简单地编写自己的`format function`代码，而不是进行头脑风暴。

```
public static String format(final String format, final String... args,String delimiter) {
    String[] split = format.split(delimiter);//in your case "%d" as delimeter
    final StringBuffer buffer= new StringBuffer();
    for (int i= 0; i< split.length - 1; i+= 1) {
        buffer.append(split[i]);
        buffer.append(args[i]);
    }
    buffer.append(split[split.length - 1]);
    return buffer.toString();
 } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-16T23:01:52.553

因为大多数（如 99.999%）消息格式是静态的，在编译时已知，所以 GWT 处理它的方式是在编译时解析它们。

您通常会使用[`Messages`子接口](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nMessages)来本地化消息，但有时您更需要`SafeHtmlTemplates`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-18T15:58:45.110

在编译时模板未知的 0.001% 中，您可以使用 Javascript sprintf（参见：[http](http://www.diveintojavascript.com/projects/javascript-sprintf) ://www.diveintojavascript.com/projects/javascript-sprintf ），如下所示：

```
public static native String format (String format, JsArrayMixed values) /*-{
  return vsprintf(format, values);
}-*/; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T13:49:48.210

你可以自己写。

我写了一个只适用于 Strings(%s) 的版本：

```
public static String format(final String format, final Object... args)
{
    checkNotNull(format);
    checkNotNull(args);

    final String pattern = "%s";

    int start = 0, last = 0, argsIndex = 0;
    final StringBuilder result = new StringBuilder();
    while ((start = format.indexOf(pattern, last)) != -1)
    {
        if (args.length <= argsIndex)
        {
            throw new IllegalArgumentException("There is more replace patterns than arguments!");
        }
        result.append(format.substring(last, start));
        result.append(args[argsIndex++]);

        last = start + pattern.length();
    }

    if (args.length > argsIndex)
    {
        throw new IllegalArgumentException("There is more arguments than replace patterns!");
    }

    result.append(format.substring(last));
    return result.toString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-06T11:51:49.417

为什么不编写如下方法：

```
String appendAnswer(int result) {
    return "The answer is - "  + Integer.toString(result);
} 
```

正在解决您的问题，因为您没有像在代码中那样进行格式化。

如果您遇到过将整数/字节转换为十六进制字符串等问题，您应该使用：

```
Integer.toString(int, 16); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-06-16T08:21:29.627

我不太了解 GWT，但我正在做一个 GWT 项目，我需要这个。在尝试一些替代方案时，我发现这是可行的；

```
import java.text.MessageFormat;

MessageFormat.format("The answer is - {0}", 42); 
```

我不知道该项目的开发人员是否添加了一些特殊的东西来使这项工作或默认工作。

# python - Python - 使用“pdb”跟踪一个小脚本

> ID：15452996
> 
> 赞同：0
> 
> 时间：2013-03-16T18:27:27.547
> 
> 标签：python, pdb

是否可以将程序常量的演变（确实是一个小程序）保存在一个文件中？换句话说，有没有办法存储发送的信息`pdb`？

例如，假设我们有以下代码。

```
a = 1
b = 2
a = a + b 
```

我想要类似下面的东西。

```
a initialized to 1
b initialized to 2
a + b stored in a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:09:32.350

我对你到底在问什么有点困惑。但*听起来*你想实现[logging](http://docs.python.org/2/library/logging.html)。

# c# - 如何使用 parentID 和 ordermenu 订购

> ID：15452997
> 
> 赞同：0
> 
> 时间：2013-03-16T18:27:31.043
> 
> 标签：c#, asp.net, linq

我有具有以下特征的菜单表：

tblMenu: *ID* , *Title* , *ParentID* , *OrderM*

我想使用 ParentID 和 OrderM 选择菜单和订单，如下所示：

前任：

表中数据：

```
ID = 1  Title = menu1 ParentID = 0 OrderM = 1
ID = 2  Title = menu2 ParentID = 0 OrderM = 2
ID = 3  Title = menu3 ParentID = 0 OrderM = 3
ID = 4  Title = submenu2-1 ParentID = 2 OrderM = 1
ID = 5  Title = submenu2-2 ParentID = 2 OrderM = 2
ID = 6  Title = submenu1-2 ParentID = 1 OrderM = 2
ID = 7  Title = submenu1-1 ParentID = 1 OrderM = 1 
```

我想要选择 LINQ 的以下结果：

```
menu1
submenu1-1
submenu1-2
menu2
submenu2-1
submenu2-2
menu3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:07:44.653

这应该有效（[示例](https://dl.dropbox.com/u/40318759/linqpad3.png)）：

```
var result =
  l.Where(c => c.ParentID == 0)
   .Select(c => new {Menu = c, Sub = l.Where(ci => ci.ParentID == c.ID).OrderBy(s => s.OrderM)})
   .OrderBy(ao => ao.Menu.OrderM)
   .SelectMany(ao => ao.Sub.Count() == 0 ? new List<C> {ao.Menu} : new List<C> {ao.Menu}.Concat(ao.Sub)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:49:17.540

如果是您遇到问题的顺序，请尝试使用 OrderBy 和 ThenBy 来实现您需要的顺序。

例如：

```
 var items = source.OrderBy(i => i.OrderM).ThenBy(o => o.ParentID); 
```

# html - 100% 高度列，固定侧边栏

> ID：15452999
> 
> 赞同：3
> 
> 时间：2013-03-16T18:27:38.327
> 
> 标签：html, css, layout, two-columns

我一直试图让这个工作。当主列的内容填满页面高度时，它看起来是正确的，但当它没有填满时却不是。

看起来不错：http: [//jsfiddle.net/creativetags/ngv4H/1/](http://jsfiddle.net/creativetags/ngv4H/1/)

看起来不对：http: [//jsfiddle.net/creativetags/EAuBc/1/](http://jsfiddle.net/creativetags/EAuBc/1/)

```
<div class='container'>
    <div class='container-wrap'>
        <nav class='tabnav'>Some nav menu items here</nav>
        <div class='container-inner'>
            <div class='clearfix' id='mainwrap'>
                <div class='columns' id='main'>
                     <h2>Main content scrolls here</h2>
                </div>
            </div>
            <div class='columns' id='side'>
                <div class="sidecontent">
                    <p>Fixed Side panel</p>
                </div>
            </div>
        </div>
    </div>
</div> 
```

我使用的是固定的人造侧边栏列，因此当您滚动主列时，它会保持在视图中。

`.container-inner`即使内容没有到达底部，我也需要将背景填充到页面底部。

`.tabnav`需要从body标签显示背景图片，所以`.container-inner`不能从页面顶部开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:59:08.343

使用相同的 CSS更新了[大内容](http://jsfiddle.net/Matt_Coughlin/ngv4H/3/)和[小内容](http://jsfiddle.net/Matt_Coughlin/EAuBc/3/)的演示。

**变更摘要**

*修复主要内容*

*   将白色背景颜色应用于`.container-wrap`和`.container-inner`。
*   设置`.container`和`.container-wrap`到`height:100%;`。
*   下面的背景图像`.tabnav`现在被白色背景颜色覆盖，因此将背景图像重新应用到`.tabnav`. **这是解决方案的关键部分**。

*更新侧边栏*

*   设置`#side`和`.sidecontent`到`height:100%;`。
*   将侧面背景图像从 移动`.container`到`.sidecontent`。

**添加了 CSS**

```
.container {
    height: 100%;
    ...
}
.container-wrap {
    width: 660px;
    height: 100%;
    background-color: #f8f8f8;
}
.tabnav {
    background: #1d1d1b url("http://cat.storehousebelfast.com/assets/bg.jpg") repeat fixed top left;
}
#side {
    height: 100%;
    ...
}
.sidecontent {
    background: transparent url("http://cat.storehousebelfast.com/assets/right-column.gif") repeat-y top right;
    height: 100%;
    ...
} 
```

**已移除 CSS**

```
.container {
    background: transparent url("http://cat.storehousebelfast.com/assets/right-column.gif") repeat-y top right;   /* Remove this */
    ...
}
.container-inner {
    min-height: 100%;   /* Remove this */
    height: 100%;       /* Remove this */
    ...
} 
```