# StackOverflow 问答 14533000-14533999

# javascript - Backbone.js 获取不工作

> ID：14533001
> 
> 赞同：0
> 
> 时间：2013-01-26T01:49:39.183
> 
> 标签：javascript, json, backbone.js

我无法让 Backbone.js 获取工作。以下代码实际上从我的服务器代码中提取了 json，但它仍然以错误函数结束，而不是成功函数。

服务器代码是 PHP 设置标头 application/json 并返回有效的 json。

当 Javascript 运行时，我在控制台日志中得到以下信息。

```
{"id":"1011"} client.js:22
{"readyState":4,"responseText":"{id: 1011,address: \"123 Main St.\"}","status":200,"statusText":"OK"} client.js:23
{"parse":true,"emulateHTTP":false,"emulateJSON":false,"xhr":{"readyState":4,"responseText":"{id: 1011,address: \"123 Main St.\"}","status":200,"statusText":"OK"}} client.js:24

$(function() {
    var Property = Backbone.Model.extend({

urlRoot: 'property'
});

var AppView = Backbone.View.extend({
el: $('#content'),
error: function(m, xhr, opts) {
    console.log(JSON.stringify(m));
    console.log(JSON.stringify(xhr));
    console.log(JSON.stringify(opts));
},
render: function() {
    alert("Success");
},
initialize: function() {
    var options = {};
    options.success = this.render;
    options.error = this.error;
    var property = new Property({id: "1011"});
    property.fetch(options);
}
    });
    var appview = new AppView;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:06:35.690

好的，Backbone.js 似乎期望某些数据以特定格式在 JSON 响应中返回。

如果我返回，它不会包含`id: 1011`在我的 json 响应中，而是有效`"id": "1011"`

某处有这方面的文档吗？它真的让我绊倒了很长时间。我一直回到我的服务器响应，认为那里的东西不太正确，但我无法弄清楚。

不过，这个 StackOverflow 问题和答案对我有帮助：[model.fetch 总是会出现错误回调](https://stackoverflow.com/questions/7040039/model-fetch-always-going-to-error-callback)

希望这个问题和答案能在未来帮助其他人。

# javascript - Chrome for Android 中的手势启动事件模拟

> ID：14533002
> 
> 赞同：2
> 
> 时间：2013-01-26T01:49:51.727
> 
> 标签：javascript, android, google-chrome

iOS Safari 具有`GestureEvent`发送的对象`gesturestart, gesturechange`和`gestureend`多点触控事件。

Chrome for Android 中是否有类似的功能？

当用户用两根手指触摸屏幕，然后在没有将手指从屏幕上抬起的情况下做出捏合手势时，通常的`touchstart/move/end`事件不会被调度，而`gesturestart, gesturechange`Android`gestureend`版 Chrome 中似乎不存在多点触控事件。

如何在 Chrome for Android 中检测到这种多指手势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:41:47.300

无法直接在 Chrome for Android 中检测到手势。我们只是没有实施它，而且我相信我们不太可能实施它。

多个触摸启动应该在 Android 中正常发生。如果不是，那么我怀疑您没有将视口锁定到设备宽度；

我创建了一个简单的测试[http://jsbin.com/ipibup/latest](http://jsbin.com/ipibup/latest)，它锁定了视口并且它可以工作（但是如果你滚动它，就会出现一个错误，因为触摸结束不会触发）。

# html - 小屏幕笔记本电脑的布局不合适

> ID：14533008
> 
> 赞同：0
> 
> 时间：2013-01-26T01:50:45.657
> 
> 标签：html, css, twitter-bootstrap

*   布局适合 24 英寸笔记本电脑......当我在 11 英寸笔记本电脑上看到它时，布局不合适......右栏坏了并向下移动......

[http://jsfiddle.net/ZrpLT/92/embedded/result/](http://jsfiddle.net/ZrpLT/92/embedded/result/)

在下面提供我的代码

```
<div class="row" style="margin-left: 325px;">
    <div class="span12 pagination-centered" style="font-style: arial; font-size: 21px; color: #cc0000; margin-bottom: 20px; padding-top: 113px;">
            Main Menu
    </div>
    <div class="span5" style="margin-left: 97px; width: 493px;">
        <div class="melonhtml5_gallery">
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/search.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/yourfiles.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/shareFiles.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custProfile.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custQuote.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/salesOrders.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/vendorProfile.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/reports.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/yourfiles.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/admin.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/shipLogistic.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/accReceivable.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custRMA.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/production.png"></div>
            <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/CRM.png"></div>
        </div>
    </div>
    <div class="span5" style="margin-left: 65px; width: 493px;">
        <div class="melonhtml5_gallery">
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/accPayable.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/vendorRMA.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/manuPlanning.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/productLifeCycle.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/multiMedia.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/receiving.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/tax.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/admin.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/ISOprocess.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/intergration.png"></div>
            <div data-caption="" data-image="http://www.defie.co/designerImages/png/comDocuments.png"></div>
            <div data-caption="" data-image="/images/cubes/TBU4.png"></div>
            <div data-caption="" data-image="/images/cubes/TBU5.png"></div>
            <div data-caption="" data-image="/images/cubes/TBU5.png"></div>
            <div data-caption="" data-image="/images/cubes/TBU5.png"></div>
            <div data-caption="" data-image="/images/cubes/TBU5.png"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:57:15.760

我正在开发一个应用程序，它必须在电脑屏幕、笔记本电脑屏幕和移动屏幕上工作。最好的办法是将大小从像素更改为百分比。使用百分比，它会按屏幕的百分比调整事物的大小，使用像素它只计算像素，所以如果屏幕更小，那么像素的总大小会更小，因此你正在努力调整元素的大小

以这种方式看待它，例如：

**像素：**

900 像素屏幕中的 400 像素等于 400 像素（剩余 500 像素）

1200 像素屏幕的 400 像素等于 400 像素（剩余 800 像素）

**百分比：**

800 像素屏幕的 25% 是 200 像素（正好是屏幕的四分之一）

1200 像素屏幕的 25% 是 300 像素（正好是屏幕的四分之一）

希望你能理解 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:04:15.713

我会考虑用这样的布局做一些响应式的事情。[通过使用像masonry](http://masonry.desandro.com/)这样的插件或像[基础](http://foundation.zurb.com/)这样的响应式框架。

# backbone.js - 声明有和没有命名空间

> ID：14533010
> 
> 赞同：0
> 
> 时间：2013-01-26T01:50:56.903
> 
> 标签：backbone.js

我正在玩 Todo MVC 应用程序的主干[http://addyosmani.github.com/todomvc/](http://addyosmani.github.com/todomvc/)并注意到一些东西，我不确定这是设计完成的（这是必要的）或者它只是随机的。作者似乎对 Backbone 和 js 颇有经验，在声明 Router (var Workspace) 和 Collection (var TodoList) 时使用 'var'，然后在实例化时将它们带入 app 命名空间，例如，

```
app.TodoRouter = new Workspace(); 
```

但是，例如，当他声明视图时，他不使用 var，而是直接使用命名空间。他也对模型执行此操作。例如，

```
app.TodoView = Backbone.View.extend({

}); 
```

无需检查所有代码，是否存在我遗漏的决定的更高层次的原因，或者它只是任意的

**代码**

看法

```
app.TodoView = Backbone.View.extend({

}); 
```

**路由器**

```
var Workspace = Backbone.Router.extend({

});

app.TodoRouter = new Workspace(); 
```

**收藏**

```
var TodoList = Backbone.Collection.extend({

});

// Create our global collection of **Todos**.
app.Todos = new TodoList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:23:45.353

该代码使用命名空间，他将其`app`用作与全局命名空间相关联的唯一变量。大多数时候，你会看到一些东西：

```
var app = {};  /** local */
window.app = app;  /** assign variable to global scope */ 
```

`app`现在您可以在其中定义变量，并且您在其中定义的任何内容都可以在`app`命名空间内的任何位置访问。

所以现在，你可以定义各种子命名空间来保持你的代码整洁并且更容易找到东西。最有可能出于组织目的，避免变量冲突并且不要混淆变量。你可以做这样的事情，它为整个应用程序提供结构。

```
app = {
    Utilities: {},
    Views: {},
    Collections: {}
}; 
```

您也可以随时在其中定义变量，例如。

```
app.Models = {}; 
```

`variables`现在它们不是在`window`（或全局命名空间）中到处都是，而是在 中定义，并且`app`可以通过以下方式访问`app.Utilities.doSomething();`

在该命名空间之外定义的任何其他内容（`app`例如`var router = new AppRouter( {})`局部变量）都已定义，并且只能在声明它的函数的范围内使用。它们只能使用一次，并且不能在其他任何地方使用代码（当前范围之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:30:23.047

我相信他本质上只是将需要的东西附加到命名空间对象。

所以在这种情况下，TodoView 是一个构造函数，每次添加一个 todo 项时都需要它来创建一个新视图。而路由器构造函数只用于创建一个单独的路由器实例，所以它只在本地范围内创建，并且使用一次来创建app.TodoRouter。集合也是如此，构造函数被使用一次来创建单实例 app.Todos，然后超出范围。如果在需要多个 TodoList 实例的情况下，您还需要将构造函数附加到应用程序对象 (app.TodoList)。

javascript 中一个常见的命名约定是对构造函数使用 pascal 大小写（首字母大写），对实例使用驼峰式大小写。这会使它更具可读性，但这只是一个约定，完全可以接受意见。在这种情况下，您将拥有 app.TodoView 和 app.todoRouter。

# html - Bootstrap 流体行重叠

> ID：14533012
> 
> 赞同：0
> 
> 时间：2013-01-26T01:51:15.240
> 
> 标签：html, css, twitter-bootstrap

我正在运行当前代码，同时包含最新 Bootstrap 的标准和响应式 css。

我不明白为什么当我增加字体大小时，该行根本没有响应并且文本当前重叠。

任何建议都会有所帮助，因为我是 Bootstrap 的新手。我也知道这很老套，但这是测试我的想法的一种快速简单的方法。

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12" style=" text-align:center;">
        <p style="font-size:6em;  font-weight:bold;">LARGE TEXT</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12" style="text-align:center; font-size:3em; font-weight:bold;">
        <p>Date 02/02/2013</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:58:19.990

您需要重置`p`元素的行高。行高继承自 body 规范，默认设置为 20px。

改变你的风格`style="font-size:6em; line-height:normal; font-weight:bold;"`应该可以解决问题。

请参阅[http://jsfiddle.net/7EXmD/1/](http://jsfiddle.net/7EXmD/1/)。

我不建议以这种方式为您的元素设置样式以供生产使用，但正如您所说，对于测试，这是使其工作的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:26:41.077

该行不响应文本大小，该行响应浏览器窗口的大小。如果您使用的是响应式布局，您应该考虑使用`@media query`缩小文本的大小以使其适合，因为所有内容都应该缩小，而不仅仅是包含跨度。

# magento - Magento 的 AB 测试

> ID：14533013
> 
> 赞同：0
> 
> 时间：2013-01-26T01:51:16.250
> 
> 标签：magento

Magento 可以使用哪些软件进行 A/B 测试？

我过去曾尝试过 Visual Website Optimizer (http://visualwebsiteoptimizer.com/)，但它只允许您进行细微的更改，例如更改图像和文本，但不允许您对页面的布局。

我想知道哪个软件可以很好地允许布局更改，但如果它是专门为与 Magento 集成而构建的，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:54:42.900

这取决于你需要什么，

如果您想要完整的布局更改，那么您可以使用不同的主题等进行另一个商店视图。

如果您需要在某些地方进行一些更改，有很多工具可以让您进行 AB 测试

我用过并满意的最后一个是[http://www.optimizely.com](http://www.optimizely.com)

还有很多不同的选择，但最终它们几乎相同

[http://unbounce.com/](http://unbounce.com/)

[http://www.whichmvt.com/](http://www.whichmvt.com/)

[http://www.maxymiser.com/](http://www.maxymiser.com/)

# java - 将数据插入到通过 Java 动态更改的 MySql 表中

> ID：14533019
> 
> 赞同：0
> 
> 时间：2013-01-26T01:52:46.670
> 
> 标签：java, mysql

你能帮我解决在列/字段动态变化的表中插入行的问题吗？我有一个名为 schedule 的表，其中取决于字段动态增加或减少。我的要求是将数据插入到该表中。问题是，我不确定有多少字段，因为它会动态增加或减少。

我的想法：我使用 ResultSetMetaData 来动态了解字段名称。有了这个，我可以使用插入查询，如下所示：

```
ResultSet res = stat.executeUpdate("insert into scheduletab (name,date,shift,'"+col_name[i]+"') values (....., ...., .....)"); 
```

这里的问题是我将如何初始化或指定 "i" 的值？

我的代码是：

注意：b34 是提交按钮。

```
if (e.getSource() == b34)
{
    String[] col_name = new String[25];
    try
    {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(
           "jdbc:mysql://localhost/nursedb", "root", "123456");
        try
        {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("SELECT * FROM scheduletab");
            ResultSetMetaData md = rs.getMetaData();
            int col = md.getColumnCount();
            System.out.println("Number of Column : " + col);
            System.out.println("Columns Name: ");
            for (int i = 1; i <= col; i++)
            {
                col_name[i] = md.getColumnName(i);
                System.out.println(col_name[i]);
            }
        }
        catch (SQLException s)
        {
            System.out.println("SQL statement is not executed!");
        }

        // Start Inserting data into Schedule Tab by specifying the
        // column names.
        Statement stat = con.createStatement();
        // ResultSet res =
        // stat.executeUpdate("insert into scheduletab (name,date,shift,'"values();
        // End Inserting data into Schedule Tab by specifying the column
        // names.

    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:25:36.667

如果您的数据库模式是动态变化的，那么您几乎肯定会走上一条错误的道路。

查看[这个较旧的问题](https://stackoverflow.com/questions/66385/dynamic-database-schema)以获取一些警示性建议。

# php - 如何让 .htaccess 将 REQUEST_URI 附加到 404 页面

> ID：14533020
> 
> 赞同：8
> 
> 时间：2013-01-26T01:52:55.123
> 
> 标签：php, .htaccess, mod-rewrite, errordocument

有没有办法将请求 URI 作为 URL 变量发送到 404 页面？例如，如果我用`ErrorDocument`指令转发我的 404，有没有办法做这样的事情？这是我尝试过的代码，但显然没有用。

```
ErrorDocument 404 /pages/errors/index.php?e=404&url=%{REQUEST_URI} 
```

我也尝试了 mod_rewrite，但我也无法让它工作。这是我尝试使用 mod_rewrite 的方法：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /pages/errors/index.php?e=404&url=%{REQUEST_URI} [L,R=404] 
```

基本上，我要做的就是当用户输入类似`http://mysite.com/asdf`then 的内容时，它会转发到`http://mysite.com/pages/errors/index.php?e=404&url=/asdf`假设`/asdf`服务器上不存在该目录。

有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:17:20.217

如果这是您的问题，我认为您不必将任何其他信息传递给错误处理程序脚本。Apache 提供了足够的信息：

> 重定向到另一个 URL 可能很有用，但前提是可以传递一些信息，然后可以使用这些信息更清楚地解释或记录错误情况。
> 
> 为了实现这一点，当发送错误重定向时，将设置额外的环境变量，这些环境变量将从提供给原始请求的标头中生成，方法是在原始标头名称前加上“REDIRECT_”。这为错误文档提供了原始请求的上下文。
> 
> 例如，除了更常见的环境变量之外，您可能还会收到以下内容。
> 
> REDIRECT_HTTP_ACCEPT= */* , 图像/gif, 图像/jpeg, 图像/png
> 
> REDIRECT_HTTP_USER_AGENT=Mozilla/5.0 Fedora/3.5.8-1.fc12 Firefox/3.5.8
> 
> REDIRECT_PATH=.:/bin:/usr/local/bin:/sbin
> 
> REDIRECT_QUERY_STRING=
> 
> REDIRECT_REMOTE_ADDR=121.345.78.123
> 
> REDIRECT_REMOTE_HOST=client.example.com
> 
> REDIRECT_SERVER_NAME=www.example.edu
> 
> REDIRECT_SERVER_PORT=80
> 
> REDIRECT_SERVER_SOFTWARE=Apache/2.2.15
> 
> REDIRECT_URL=/cgi-bin/buggy.pl
> 
> REDIRECT_ 环境变量是根据重定向之前存在的环境变量创建的。它们使用 REDIRECT_ 前缀重命名，即 HTTP_USER_AGENT 变为 REDIRECT_HTTP_USER_AGENT。
> 
> REDIRECT_URL、REDIRECT_STATUS 和 REDIRECT_QUERY_STRING 保证被设置，并且只有当它们在错误条件之前存在时才会设置其他标头。
> 
> 如果 ErrorDocument 目标是外部重定向（以 http: 之类的方案名称开头的任何内容，即使它引用与服务器相同的主机），这些都不会设置。

检查此[链接](http://httpd.apache.org/docs/current/custom-error.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:38:08.617

我认为您需要删除`R=404`. 这对我有用；

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php?e=404&url=%{REQUEST_URI} [L] 
```

测试`foo/index.php`：：`print_r($_GET)`

`localhost/foo -> Array ( )`

`localhost/foo/asdf -> Array ( [e] => 404 [url] => /foo/asdf )`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-30T13:57:23.803

您第一次尝试`%{REQUEST_URI}`输入`ErrorDocument`指令现在应该可以在最新版本的 Apache 中使用。来自[https://httpd.apache.org/docs/2.4/mod/core.html#errordocument](https://httpd.apache.org/docs/2.4/mod/core.html#errordocument)：

> 从 2.4.13 开始，可以在指令内部使用表达式语法来生成动态字符串和 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T01:59:12.190

我有另一个想法，既然你使用的是 php，为什么不直接访问`$_SERVER['HTTP_REFERER']`. 这向您显示了上一个页面请求，因此可能正是您正在寻找的内容。从那里，您可以使用该值做您想做的事。那样有用吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T02:10:01.147

您已经通过 rewritecond 检查重写之前存在的文件/文件夹，**您不需要在重写规则中使用请求 uri**并通过`$_SERVER['REQUEST_URI']`

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /pages/errors/index.php?e=404 [L,R=404] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T04:15:47.253

终于得到了这个工作，虽然有点不合常规。我在 ColdFusion 而不是 PHP 上运行，不幸的是，这里的其他答案对我不起作用。但我认为这对任何人都适用，无论他们的服务器端平台如何，因为它是基于 javascript 的：

在 .htaccess 中：

```
ErrorDocument 404 /mark404.cfm 
```

在 /mark404.cfm

```
<script>
   window.location = '/handle404.cfm';
</script> 
```

在 /handle404.cfm

```
<script>
    var r = document.referrer;
    //this is what you want, the url that the user tried to hit
</script> 
```

之所以可行，是因为浏览器在达到 mark404 时仍然“认为”它位于请求的 doesntexist.html 上。因此，当您重定向到 handle404 时，doesntexist.html 会出现在浏览器历史记录中，并且 javascript 可以获取它。

# ios - Bamboo + iOS - 禁用代码签名

> ID：14533023
> 
> 赞同：3
> 
> 时间：2013-01-26T01:53:22.393
> 
> 标签：ios, xcode, code-signing, bamboo

我想使用 Bamboo 为 iOS 项目进行持续构建。该项目是为代码签名设置的，但我不想在构建机器上安装证书。因此，我需要在构建时禁用代码签名。在命令行中，我可以使用以下命令使其工作：

```
/usr/bin/xcodebuild -sdk iphoneos6.0 -project MyProject.xcodeproj \
  -alltargets -configuration Debug \
  CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO 
```

最后两项是关键。不幸的是，我不知道将它们放在 Bamboo Task 配置中的哪个位置，以便它们实际上被传递给`xcodebuild`命令。

任何人都知道如何在不禁用项目文件本身的代码签名的*情况下完成此操作？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:08:11.277

每个竹子计划都有您可以设置的计划变量。在计划配置页面上有一个选项卡`Variables`。在那里设置的任何变量都将传递给 Bamboo 脚本，例如，您可以`codeSignId`在计划变量页面中设置变量并在构建脚本中访问它，如下所示

```
/usr/bin/xcodebuild -sdk iphoneos6.0 -project MyProject.xcodeproj \
  -alltargets -configuration Debug \
  CODE_SIGN_IDENTITY=${bamboo.CodeSignID} CODE_SIGNING_REQUIRED=NO 
```

# php - 错误通常如何保存在 MVC 框架中？

> ID：14533025
> 
> 赞同：0
> 
> 时间：2013-01-26T01:53:37.933
> 
> 标签：php, model-view-controller

当提交表单并检测到错误时，用户通常会被引导回具有保留输入和突出显示错误的相同表单。但是，为了避免收到错误信息的可能性如下：

![表格重新提交](../Images/80b1bd2726dceaf475b0acd005af4fc9.png)

表单被重定向使用`header('Location:');`，以便表单的“操作”不会保存在浏览器历史记录中。

由于重定向创建了一个新请求，错误通常如何从一个请求保存到下一个请求？我倾向于使用`$_SESSION`，但从我收集的使用会话进行错误处理的内容来看，这是不受欢迎的。

我很欣赏对此事的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:00:35.093

在 MVC 框架中，您可以访问请求变量并在同一个请求中交付预期的页面，其中涉及重定向，您将在 url 中使用会话或查询变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:11:08.063

错误不应该是任何东西，由任何广泛的框架处理。相反，它应该是应用程序本身的一部分。

错误的生成以及永久和临时存储都应该由模型层处理，而所述错误的呈现完全是视图实例的责任。而且，由于 MVC 的实际部分不受框架的约束，这使得处理错误超出了框架的范围。

# c - C字符串将值存储到数组中而不重写

> ID：14533027
> 
> 赞同：0
> 
> 时间：2013-01-26T01:54:50.203
> 
> 标签：c, arrays, pointers, null

我正在尝试获取程序中输入的最后 10 个命令。我遇到的问题是我从命令行获取参数并将其存储到我的数组中，但我一直在我的数组中写入值，因为它们存储的是指针而不是实际的字符数组值。我想知道如何获取当前字符数组（将随着输入的每个命令而改变）并将该值存储到一个数组中。我知道这是一个指针问题，但我不确定如何解决这个问题

我的代码如下。我的 char 数组 history[] 如下所示，输入如下：

输入 a 历史[0] = a 输入 b 历史[0] = b 历史[1] = b 输入 c 历史[0] = c 历史[1] = c 历史[2] = c

```
#define MAX 256
#define CMD_MAX 10
#define HISTORY_MAX 10

int make_history(char *history[], int history_counter, char *input_line)
{
  if(history_counter < HISTORY_MAX)
  {
    history[history_counter] = input_line;
  }
  return 1;
}

int make_tokenlist(char *buf, char *tokens[])
{
   char input_line[MAX];
   char *line;
   int i,n;

   i = 0;
   line = buf;
   tokens[i] = strtok(line, " ");

   do
   {
    i++;
    line = NULL;
    tokens[i] = strtok(line, " ");
   }

   while(tokens[i] != NULL);

   return i;
 }

int main()
{
  char input_line[MAX], *tokens[CMD_MAX], *history[HISTORY_MAX];
  int i, n, history_counter;

  while(1)
  {
    printf("abc> ");

    if (gets(input_line) != NULL)
    {
     n= make_tokenlist(input_line, tokens);
    }
    else
    {
     printf("error?");
     return 1;
    }

    make_history(history,history_counter,input_line);

    if(strcmp(tokens[0],"history")==0)
    {
     for (i = 0; i < HISTORY_MAX; i++)
     {
       if(history[i]!=NULL)
       {
         printf("%d. %s \n", i, history[i]);
       }
     }
    } 

    for (i = 0; i < n; i++)
    {
     printf("extracted token is %s\n", tokens[i]);
    }

    history_counter++; //increment history counter
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:28:40.530

问题（我认为您理解）是您正在存储指向与`input_line`. 也就是说，里面的字符串`history`和input_line是同一个数据。

解决方案是制作副本并将其`input_line`存储*到*`history`. 一个幼稚的实现（**不起作用**）如下：

```
int make_history(char *history[], int history_counter, char *input_line)
{
    if(history_counter < HISTORY_MAX)
    {
        char input_copy[MAX];
        strcpy(input_copy, input_line);
        history[history_counter] = input_copy;
    }
    return 1;
} 
```

现在，您正在将该行的副本复制到内存中，该副本*不会*在其他任何地方使用 ( `input_copy`)。那应该有效，对吧？问题是声明这样的变量（称为静态分配）将变量的数据存储在堆栈上。当函数返回时，该函数放入堆栈的所有数据都将被销毁。当`make_history()`返回时，`input_copy`被销毁，并且由于`history[history_counter]`指向与 相同的数组`input_copy`，它现在指向的内存可能会被程序用于其他目的，并且不再包含输入行的副本。

您可以使用*动态分配*来解决仅存在于声明它的范围内的静态分配内存的问题。`malloc()`在所谓的*堆上*分配内存（在 C 中；在 C++ 中，您将使用`new`）。除非您告诉它自己释放内存，否则堆中的数据不会在程序运行时被破坏。例子：

```
int make_history(char *history[], int history_counter, char *input_line)
{
    if(history_counter < HISTORY_MAX)
    {
        char *input_copy = (char *)malloc(MAX * sizeof(char));
        strcpy(input_copy, input_line);
        history[history_counter] = input_copy;
    }
    return 1;
} 
```

这将起作用，因为堆中的数据（由 分配`malloc()`）将在`make_history()`返回后继续存在，直到您自己释放该内存或程序结束。请注意我是如何使用`sizeof(char)`的——这是因为原始类型（例如`int`, `char`）的大小可能会根据您正在编译的处理器类型、您正在使用的编译器等而有所不同。（**编辑：**请注意，`sizeof(char) == 1`由C 规范（我认为所有修订版），所有其他数据类型大小均以 . 的倍数给出`char`。）

但如果：

```
// history_counter == 0
make_history(history,history_counter,input_line);
// ...
// later, when history_counter == 0 again somehow
make_history(history, history_counter, another_input_line); 
```

第二个`make_history()`所做的只是将指针从副本更改`input_line`为 another_input_line 的副本！它永远不会释放 first 的内存`input_line`，现在所有指向它的指针都消失了。这被称为内存泄漏（如果它们都那么简单，那就太好了！）。如果这在您的程序中是可能的（例如，您将`history_counter`循环返回到 0），您会想要解决这个问题。在您第一次分配该内存后，您可以重复使用它，对吗？

```
int make_history(char *history[], int history_counter, char *input_line)
{
    if(history_counter < HISTORY_MAX)
    {
        if(history[history_counter] == NULL)
        {
            history[history_counter] = (char *)malloc(MAX * sizeof(char));
        }
        strcpy(history[history_counter], input_line);
        history[history_counter] = input_copy;
    }
    return 1;
} 
```

现在您正在检查您之前是否已经存储了一行的副本`history[history_counter]`，如果没有，则`malloc()`首先检查内存。无论哪种方式，之后您都复制`input_line`到`history`数组中。（您的代码还有另一个问题会破坏这一点；见下文。）

关于动态分配你应该知道的另一件事，因为这似乎是我们正在讨论的主题，那就是释放你使用分配的内存`malloc()`，使用`free()`。对于 C++，要释放使用 分配的内存`new`，请使用`delete`.

* * *

另一种可能的解决方案，正如您对问题的评论所提到的：您可以立即静态分配`10*256*sizeof(char)`字节`main()`。这是一个更简单的解决方案，但会一直使用内存，而不是仅在需要时使用。您的示例很简单，不需要那么多内存，但是在更大/更复杂的程序中，这种差异可能很重要。

* * *

顺便说一句，除了问题之外，您的代码中还有一些问题：

您永远不会在 中初始化`history_counter`，`main()`因此在调用时它的初始值是未定义的`make_history()`。您应该将未初始化的变量（已声明，但未分配值）视为随机变量——实际上，该值取决于处理器/系统、编译器、操作系统，而不是您应该依赖的任何东西。因此，第二行`main()`应该是：

```
int i, n, history_counter = 0; 
```

同样，您声明`history`为：

```
char *history[HISTORY_MAX]; 
```

并且您不会初始化指向`NULL`值的指针数组。稍后您检查：

```
if(history[i] != NULL) 
```

但是您不能保证默认`history[i]`值为`NULL`all `i`。`history`您应该首先将数组初始化为所有`NULL`值。我上面的最后一个实际答案的例子也依赖于这个初始化，如果你尝试`free()`一个未分配的地址，可能会发生不好的事情。

# vba - 我需要一个 Excel VBA 代码来将多列表转换为单列表

> ID：14533030
> 
> 赞同：0
> 
> 时间：2013-01-26T01:55:34.690
> 
> 标签：vba, excel

输入：Excel表格

```
Data    4/1/2012    4/2/2012    4/3/2012    4/4/2012    4/5/2012
V        10 20  30  40  50
H   5   10  15  20  25
S   6   12  18  24  30
R   8   16  24  32  40
A   9   18  27  36  45

Output : Excel Table
V        4/1/2012    10
V        4/2/2012    20
V        4/3/2012    30
V        4/4/2012    40
V        4/5/2012    50
H        4/1/2012    5
H        4/2/2012    10
H        4/3/2012    15
H        4/4/2012    20
H        4/5/2012    25
.
.
.
A        4/1/2012    9
A        4/2/2012    18
A        4/3/2012    27
A        4/4/2012    36
A        4/5/2012    45 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:24:13.357

Here is a solution using `Arrays`. In the code, there are couple of *static* ranges. So you will need to set the sheet name, starting cell names accordingly.

```
Option Explicit

Sub colsToRows()
Dim ws1 As Worksheet
Dim a As Long, lr As Long, lc As Long
Dim va As Variant, vd As Variant
Dim LastRow As Long, LastCol As Long

        '-- set e.g. sheet name Sheet1, starting column = B, dates starting cell = C2
        Set ws1 = Sheets("Sheet1")
        LastRow = ws1.Range("B" & ws1.Rows.Count).End(xlUp).Row
        LastCol = ws1.Cells(Range("C2").Row, ws1.Columns.Count).End(xlToLeft).Column - 1

        '--put dates into this array as it repeats for each item
        vd = WorksheetFunction.Transpose(WorksheetFunction.Transpose(ws1.Range("C2").Resize(1, LastCol - 1)))

        '-- titles
        ws1.Range("B2").Offset(LastRow + 1) = "Item"
        ws1.Range("C2").Offset(LastRow + 1) = "Dates"
        ws1.Range("D2").Offset(LastRow + 1) = "Data"

        '--2 is deducted as the main range is starting from B3\. So B3-B1 = 2
        For a = 1 To LastRow - 2
           '--to get next last row
            lr = Cells(Rows.Count, "B").End(xlUp).Row

            '--items
            va = Array(ws1.Range("B2").Offset(a).Value)
            ws1.Range("B1").Offset(lr).Resize(LastCol - 1) = Application.Transpose(va)

            '--dates
            ws1.Range("C1").Offset(lr).Resize(UBound(vd)) = Application.Transpose(vd)

            '--data
            va = WorksheetFunction.Transpose(WorksheetFunction.Transpose(ws1.Range("C2").Offset(a).Resize(1, LastCol - 1)))
            ws1.Range("D1").Offset(lr).Resize(UBound(va)) = Application.Transpose(va)
        Next a

End Sub 
```

**Output:**

![enter image description here](../Images/13b29a090eff121759e37a5d4b8e7778.png)

# jquery - 如何在 Rails 3 中使用 jQuery Uniform

> ID：14533031
> 
> 赞同：0
> 
> 时间：2013-01-26T01:55:47.260
> 
> 标签：jquery, ruby-on-rails-3, uniform

我正在尝试在我的 rails webapp 上安装默认制服，但尚未找到任何可靠的教程/指南。我已经确认我有 jquery gem

在我的 Gemfile 中：

```
gem 'jquery-rails', '2.0.2' 
```

然后从我的应用程序目录中在终端中运行以确保：

```
bundle install 
```

我将 uniform.default.css 放在我的样式表目录中，将 jquery.uniform.js 放在我的 javascripts 目录中，并将图像放在我的 images 目录中。然后，我将它们包含在我的视图中，格式如下：

```
 1 <!-- for jQuery uniform -->
  2 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  3 <%= javascript_include_tag "jquery.uniform.js" %>
  4 <%= stylesheet_link_tag "uniform.default.css" %>
  5 <script type='text/javascript'>
  6   // On load, style typical form elements
  7   $(function () {
  8     $("select, input, button, textarea, submit").uniform();
  9   });
 10 </script>
 11 <!-- end for jQuery uniform --> 
```

不，图像正在显示！我查看了 uniform.default.css 文件的来源，发现所有的图像都是相对于当前目录的：

```
 background-image: url("../images/sprite.png"); 
```

幸运的是，rails 3 应用程序的默认树的设置方式似乎仍然如此，但存在问题。我还尝试将每个实例编辑为绝对路径，我已确认该路径对另一个图像有效。例如：

```
 background-image: url("/assets/images/sprite.png"); 
```

但仍然没有运气。有任何想法吗？javascript是否也依赖于图像的特定路径？不应该，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:39:05.883

尝试在 vendor/assets 目录中添加文件。在那里把css放在

```
vendor/assets/stylesheets 
```

里面的js

```
vendor/assets/javascripts 
```

和中的图像

```
vendor/assets/images 
```

而不是在 app/assets/stylesheets/application.css 中添加以下行：

```
*= require uniform.agent 
```

将您放置在 vendor/assets/javascripts 中的 js 文件重命名为 uniform.js 并将其添加到 app/assets/javascripts/application.js

```
//= require uniform 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T19:20:55.213

呸！进行了一些实验，但最终像这样集成了 jQuery Uniform：

通过将其包含在 Gemfile 中，确保您已安装 jQuery gem：`gem 'jquery-rails', '2.0.2'`

从以下网址下载您感兴趣的任何样式：http: [//uniformjs.com/#themes](http://uniformjs.com/#themes)

将图像添加到 /vendor/assets/images，将 javascript 文件添加到 vendor/assets/javascripts，将样式表添加到 vendor/assets/stylesheets。

编辑 css 文件中的任何背景 url 图像路径： url('../images/imagename.png') 到

```
url('/assets/imagename.png') 
```

因此，我猜所有这些资产最终都会放入一个大目录中，命名为 assets。分离只是为了开发人员的理智。

我还确保将其包含在我的主要布局的头部，`application.html.erb`：

```
<%= stylesheet_link_tag "application", :media => "all" %>
<%= stylesheet_link_tag "uniform.aristo", :media => "all" %>  <!-- for jQuery Uniform -->
<%= javascript_include_tag "application" %>
<%= javascript_include_tag "jquery.uniform" %> <!-- for jQuery Uniform --> 
```

就这样。没有模糊的配置文件编辑或需要其他需要更多向导代码的修复的随机错误修复，...

现在我得到了一个可以工作的版本，然后从我所有的其他实验中去除了任何潜在的影响，这变得更加简单了。

希望能帮助到你。

# c# - 无法弄清楚如何返回部分视图而不是全部

> ID：14533032
> 
> 赞同：1
> 
> 时间：2013-01-26T01:55:49.890
> 
> 标签：c#, asp.net-mvc, razor, view

我试图调用一个视图，但不是全部。我以前偶然做过，但我不记得我是怎么做的，然后再做一次。

这是我展示的示例：

![在此处输入图像描述](../Images/476118b458ddb5222d9de850bfaf574b.png)

我只想显示红色圆圈所在的区域。

这是代码：

```
public ActionResult Logon()
{
  return View();
} 
```

真的很简单，但我有，`return PartialView();`但这并没有改变它。

有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:03:01.390

检查您的部分视图是否设置了布局

就像是

```
@{
     Layout = "views/shared/sitelayout.cshtml";
} 
```

如果它是部分视图，那么您可以（可能）删除它

如果你没有看到这一行，你可能有一个默认的布局继承，需要删除它。然后试试这个

```
@{
     Layout = null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:08:27.560

在 ASP.NET MVC 中，默认模板有一个名为 Layout.cshtml 的页面，它用作`@RenderBody()`调用方法的布局内的其他视图呈现的基本视图。它在 _ViewStart.cshtml 页面中定义，并自动应用于所有视图。如果要呈现没有 Layout 页面的 View，则必须将 View 的 Layout 属性设置为 null。

```
@{
   Layout = null;
} 
```

但是，请记住，如果您的视图没有，您必须添加一些 html 布局才能获得正确的 html。像这样的东西：

```
@{
   Layout = null;
}
<html>
<head>
   <title>@ViewBag.Title</title>
<body>

// content view

</body>
</html> 
```

您也可以使用 Html.RenderPartial 方法在另一个视图中呈现视图：

```
@Html.RenderPartial("YouPartialFileName") 
```

# javascript - 为什么我的 Google Map API Ver3 不允许我显示标记，但它会在方向上呈现标记？

> ID：14533033
> 
> 赞同：0
> 
> 时间：2013-01-26T01:55:53.710
> 
> 标签：javascript, jquery, google-maps-api-3

我有一张正在制作的地图。我是 JS 和 Map API 的新手。我找到了一个 Demo 并正在修改它以满足我的需要。
我的问题是地图有效。它以正确的位置为中心，但在初始化时不会呈现标记。但是，它会在请求行车路线时呈现标记。我已经阅读了所有内容，直到我的眼睛受伤，并且似乎仍然无法掌握在代码中放置标记的位置。当我把它放在我认为它应该去的代码中时，它不会呈现。

我有一个包含所有代码的小提琴。如果有人可以查看它并指出我应该在哪里添加标记以便它在地图初始化时呈现，那就太棒了

小提琴在这里[http://jsfiddle.net/hughesjoseph/nADJK/](http://jsfiddle.net/hughesjoseph/nADJK/)

我试图将标记放在这个函数中，因为我相信它会呈现初始地图。

```
 mapSetup = function () {

                map = new google.maps.Map($Selectors.mapCanvas, {
                    zoom: 16,
                    center: new google.maps.LatLng(32.565243, -97.130531),

                    mapTypeControl: true,
                    mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.DEFAULT,
                        position: google.maps.ControlPosition.TOP_RIGHT
                    },

                    panControl: true,
                    panControlOptions: {
                        position: google.maps.ControlPosition.RIGHT_TOP
                    },

                    zoomControl: true,
                    zoomControlOptions: {
                        style: google.maps.ZoomControlStyle.LARGE,
                        position: google.maps.ControlPosition.RIGHT_TOP
                    },

                    scaleControl: true,
                    streetViewControl: true,
                    overviewMapControl: true,

                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });

                autoCompleteSetup();
                directionsSetup();
                trafficSetup();
            }, // mapSetup Ends 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:12:42.100

您可以在初始化`map`变量后立即放置一个标记，因此您的`mapSetup`函数将如下所示：

```
mapSetup = function () {
    map = new google.maps.Map($Selectors.mapCanvas, {
        zoom: 16,
        center: new google.maps.LatLng(32.565243, -97.130531),

        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DEFAULT,
            position: google.maps.ControlPosition.TOP_RIGHT
        },

        panControl: true,
        panControlOptions: {
            position: google.maps.ControlPosition.RIGHT_TOP
        },

        zoomControl: true,
        zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
            position: google.maps.ControlPosition.RIGHT_TOP
        },

        scaleControl: true,
        streetViewControl: true,
        overviewMapControl: true,

        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var marker1 = new google.maps.Marker({
        position: new google.maps.LatLng(32.565243, -97.130531),
        map: map
    });

    autoCompleteSetup();
    directionsSetup();
    trafficSetup();
}, // mapSetup Ends 
```

[http://jsfiddle.net/nADJK/10/](http://jsfiddle.net/nADJK/10/)

# google-cloud-storage - Google Cloud Storage 是否支持 SPDY、Keep-Alive、流水线或其他提高小对象性能的方法？

> ID：14533034
> 
> 赞同：3
> 
> 时间：2013-01-26T01:55:57.607
> 
> 标签：google-cloud-storage

我有一千万个小对象要通过 Google Cloud Storage 传输。打开 TCP 连接执行 SSL 握手、上传请求并在发出下一个请求之前等待每个请求的响应是昂贵的。

我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T01:55:57.607

Google Cloud Storage 支持多种可提高上传和下载性能的功能：

1.  使用线程或进程池在许多连接上并行发出请求。
2.  使用 Keep-Alive 标头启用[持久 HTTP 连接](http://en.wikipedia.org/wiki/HTTP_persistent_connection)。这允许您在每次请求后重用相同的连接，从而提高 TCP 和 SSL 的性能。
3.  [管道化](http://en.wikipedia.org/wiki/HTTP_pipelining)您的请求。在等待对第一个请求的响应时发送第二个请求。您可以在同一个 HTTP 连接上执行此操作。
4.  使用[SPDY](http://en.wikipedia.org/wiki/SPDY)，它可以通过压缩、多路复用和优先级来帮助减少延迟。

# php - 停止登录用户查看登录页面？

> ID：14533040
> 
> 赞同：0
> 
> 时间：2013-01-26T01:57:33.133
> 
> 标签：php, login-control

我对 php 和 mysql 很陌生。我找到了一个很棒的教程来创建网站上的注册和登录部分。我正在设法很好地解构它并进行细微的更改。然而...

如果用户登录，我可以允许使用以下方式访问页面 -

```
<?php
session_start();

if(!isset($_SESSION['username'])){
header("Location: index.php");
}
?> 
```

如果用户登录并且他们再次访问“登录”页面，我不希望他们能够看到它，但它将他们重定向到“成员区域”内的页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:17:37.720

好吧，如果您想在 URL 中加载相同的页面，例如[http://domain.com/](http://domain.com/)，但您希望登录的人与注销的人不同。你可以这样做。

```
session_start();

if(!isset($_SESSION['username'])) {
    require_once("pathToLoggedOutFile.php");
} else {
    require_once("PathToLoggedInFile.php");
}
die; 
```

现在，如果您想在他们登录时将他们重定向到另一个页面，也可以这样做，例如，您可以使用标题来做到这一点。

```
session_start();

if(isset($_SESSION['username'])) {
    header("Location: /pathtologgedinpage.php");
    die;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:03:14.977

您想在导航菜单上设置两条路径，如下所示：

```
<?php
if (isset($_SESSION['username']))
{
?>
<a href="loggedinpage.php">PageName</a>
<?php
}
elseif (!isset($_SESSION['username']))
{
?>
 <a href="login.php">Login</a>
 <a href="bla.php">Page</a>
<?php
}
?> 
```

因此，取决于是否设置了 $_SESSION[] .. 将显示不同的锚点。

**回复评论**

尝试使用受限文件创建一个数组。示例：

```
if (isset($_SESSION))
{
   $Restrictions = array ("login.php", "index.php", "register.php");
  if (in_array($_SERVER['REQUEST_URI'], $Restrictions ))
  {
    die ("You Must Login To View These Pages!"); //I use die and an include in my scripts, but this will be called when the user is navigating to a page such as login.php when they already have an active session
  } 
} 
```

以上将使用 $_SERVER 数组作为请求的 URL，如果用户会话处于活动状态并且用户尝试导航到数组中的所述字段，则会向他们显示一条`die`消息。当然，这可以根据您的需要进行更改。您也可以使用相同的块做类似的事情，通过限制未登录的用户；从查看您需要登录的页面。

*对于重定向*

在你的 index.php 上，你可以有这样的东西：

```
if (isset($_SESSION))
{
 header("Location: member_area.php");
 exit; // exit to stop the rest of your page (index.php for example) from processing.
} 
```

如果用户有活动会话，这会将用户重定向到页面。

* * *

看着你的问题；如果处于活动状态，您希望用户被重定向到 member_area `$_SESSION`.. 然后使用名为 " 的最后一个块*用于重定向*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T02:03:22.657

看来您上面所拥有的大致就是您想要的。它假定您的登录脚本为`username`. 如果您不确定或想要检查，并且因为您说您是新手，那么查看设置了哪些会话变量可能会对您有所帮助。只需将其放在您的`session_start()`行下方：

```
echo '<pre>';
print_r($_SESSION);
exit; 
```

确保仅将其用于开发并在完成后将其注释掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T02:38:36.993

```
//Your Logout.php script should look something like this.
$session_variable = $_SESSION['variable'];
session_unset($session_variable);
session_destroy();
header('Location: blah.php');

//Your session check script should look something like this. 
$session_variable = $_SESSION['variable'];
if(!isset($session_variable)) {
session_unset();
session_destroy();
header('Location: blah.php');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T04:04:02.233

`header("Location: http://www.site.com")`如果在那之前有写过的东西，你就不能使用。PHP头函数必须是这样的

```
<?php header("Location: http://www.site.com") ?> 
```

# javascript - JavaScript“拥有”功能？

> ID：14533044
> 
> 赞同：0
> 
> 时间：2013-01-26T01:57:58.493
> 
> 标签：javascript, variables, dom, object

我想要一种快速简单的方法来“获得”JavaScript 变量的所有权。例如：

```
function takeown( obj ) {
     obj = obj;
}

takeown( window.undefined ); 
```

那么这是否设置`window.undefined`为`window.undefined`？

对不起，n00b 的问题，但是，我是 javascript 的 n00b。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:11:09.367

这将无济于事。Javascript 变量是对内存中对象的引用。您的函数接受一个引用并将其指向它先前引用的同一对象，使其（如评论中所述）成为无操作。

如果要重新定义 window.undefined，只需将其设置为新值即可（不建议这样做）。Javascript 不会以您可能期望的方式保护其全局变量。大多数内置值都可以重新定义或扩充。

### 更新

由于您在评论中明确表示您真正想要的是一种防止将来修改变量的方法，因此最好的方法是使用闭包。

闭包是一种利用 javascript 的作用域处理来模拟私有变量和保护作用域的方法。特别是在这种情况下，您可以执行以下操作：

```
function createConstant(){

     var const = 3;
     return function(){
         return const;
     }
} 
```

这将创建一个不可变地返回 3 的函数。所以 ：

```
createConstant() 
```

将始终返回 3。（尽管从技术上讲，您可以重新定义创建常量以引用新函数。在某种程度上，对于这些东西无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:13:16.437

你想要做的是覆盖一个全局变量（我不明白你为什么要这样做），这样做是这样的：

```
window.Counter = 'whatever';
// so
window.Counter // => 'whatever' 
```

您的函数将变量分配给同一变量...无操作。但是，自javascript 1.8.5（[链接）以来，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined) *undefined*是不可写的，我认为任何其他全局变量都是可写的。

干杯，

# javascript - 为什么 JavaScript 没有严格的大于/小于比较运算符？

> ID：14533046
> 
> 赞同：72
> 
> 时间：2013-01-26T01:58:28.763
> 
> 标签：javascript

虽然 JavaScript 的类型严格比较运算符 ( `===`, `!==`) 很好，但它没有对应的大于/小于的严格比较。

```
var x = 10;

x <= 20;    // true
x <= '20';    // true
x <== 20;   // true (or would be, if JS had such an operator)
x <== '20'; // false (ditto) 
```

为什么不？我问这个问题完全期待答案是“呃，因为它没有”，但无论如何我都在问，以防这些运算符被省略的有趣和/或令人沮丧的历史原因。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-26T02:39:48.147

我只能猜测——

如果
`a === b`为假，
`a !== b`则为真。***总是***。

但是，这个含义不成立`<==`

如果
`x <== 20`为假，我们无法推断结果， `x >== 20`因为它可能由于类型检查或关系检查而为假。

我认为这*有点*令人困惑，尽管语言中有很多更糟糕的东西（通常是类型强制，仅举一例）。

但是，我认为严格的`<`还是`>`会表现得始终如一。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-26T02:00:46.860

由于`a === b`是 的简写`typeof a == typeof b && a == b`，因此您可以将此展开式用于不等式：`typeof a == typeof b && a <= b`例如。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-26T03:21:25.020

我不确定你的问题是否有答案。我的猜测是，预期用途是将数字与字符串（可能还有布尔值）进行比较。它实际上适用于这些情况，就像非严格相等运算符一样。无论如何，其他任何东西都受任意类型强制规则的约束。什么是“正确”的输出`[] < {}`？`false`? 也许`undefined`？请注意，类型甚至不需要不同，`({foo: 1}) < {bar : 2}`也没有任何意义。

在我看来，他们（Brendan Eich，以及后来的 ECMAScript 委员会）只是决定相信开发人员只会比较有意义的东西。或者甚至没有考虑到开发人员会尝试疯狂的比较。为比较创建额外的运算符只会使语言混乱。并且不要忘记比较不是处理类型强制时唯一的陷阱，还有加法、减法等。所以我猜他们只是决定忠实于他们允许不同类型之间的操作的决定。他们认为当人们知道自己在做什么时，这会有所帮助，但也许没有预料到由此引起的所有混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T07:28:02.770

为了说明为什么拥有它没有意义，请考虑...

```
var x = 10
var less = (x <= 5) 
```

现在，两者

```
x <== 5 
```

和

```
x <== '5' 
```

将是错误的，但出于不同的原因。在第一种情况下，您可以使用 x > 5 的假设，但不能在后一种情况下使用。为避免错误假设，最好先使用 === 或 !==，然后再进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-06T03:02:16.090

我想说的问题是可以为不同的类型很好地定义严格相等（不是相同的类型，然后不等于），但是不能为不同的类型很好地定义关系运算符。

假设我们定义一个严格的比较器`a <== b`是`typeof a == typeof b && a <= b`。对于`a >== b`. 然后我们比较 a = "3" 和 b = 3 结果是`a <== b`假的，`a >== b`假的和`a === b`假的。恭喜，你刚刚创造了一个悖论！

如此严格的比较器仍然会弄乱诸如排序算法或比较意外值之类的事情。例如：

```
for (var i; i <== list.count; i++) {
  doStuff(i);
} 
```

请注意，该示例错误地使用`list.count`了而不是`list.length`，它只会返回`undefined`，而`i <== undefined`与

`list.count`如果 JavaScript 在未定义属性上引发错误，并且比较不同的类型，那会更好。

这就是我能说的，跨类型比较应该引发异常，就像任何其他体面的语言一样。但事实并非如此。

这意味着，实际可行的解决方案是开始使用预处理器，或者只是说“哦，好吧”并继续输入 JavaScript`¯\_(ツ)_/¯`

# android - 如何更改操作栏中菜单项的标题

> ID：14533048
> 
> 赞同：-2
> 
> 时间：2013-01-26T01:59:12.487
> 
> 标签：android, menu, android-actionbar, title

我正在尝试更改我的操作栏菜单项之一的标题。当用户未登录时，它会显示登录，这是它的正常标题，但是一旦用户登录，我希望它更改为注销。我现在所拥有的只是测试我是否可以让它工作，但是每当我使用代码运行它来更改标题时，它就会崩溃。

这是代码：

```
public MenuItem logout;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        background = findViewById(R.id.status);
        status = findViewById(R.id.image); 
        logout = (MenuItem) findViewById(R.id.menu_login);
        logout.setTitle("Blah");
        new CheckStatusTask().execute();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:08:03.533

它崩溃是因为`MenuItem`视图层次结构中不存在，它仅在创建或显示菜单时呈现。您需要将代码放入[`onCreateOptionsMenu`](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)or[`OnPrepareOptionsMenu`](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)中，具体取决于对您有意义的方式 -`onCreateOptionsMenu`首次显示菜单时调用一次，`OnPrepareOptionsMenu`每次显示时调用。

在这些功能中，您可以找到您的菜单项

```
logout = (MenuItem) menu.findViewById(R.id.menu_login); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T03:57:07.337

我想出了如何解决这个问题。我所做的是制作两个菜单 xml 文件，然后在 onCreateOptionsMenu 中放入 if 语句来检查用户是否登录并选择正确的菜单来使用它。

# networking - XBee 无线 2 路通信

> ID：14533049
> 
> 赞同：2
> 
> 时间：2013-01-26T01:59:13.953
> 
> 标签：networking, serial-port, arduino, xbee

我有一个简单的三个 XBee（版本 2）节点网络，由一个协调器和两个路由器组成。每个 XBee 都连接到一个 Arduino。根据我的调查，我可以通过串行接口从路由器向协调节点发送消息。

在协调员上，我只需调用：

```
while(xbeeSerial.available()){
    char c = xbeeSerial.read();
    ...
} 
```

从串行连接中读取。

在路由器上，我通过串行连接发送消息，如下所示：

```
xbeeSerial.print(...); 
```

我的问题是：有没有办法从协调节点向路由器发送串行广播？只是简单地调用`.print()`协调器，还是我需要做其他事情？从我尝试过`.print()`的简单调用协调器不会广播到路由器节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:08:03.293

您应该将所有 Xbee 适配器的 PAN ID 设置为相同的值，以便它们可以互相看到。然后对于广播，您应该将目标地址低设置为 FFFF。现在您可以向所有 XBees 广播。

详解： [https ://sites.google.com/site/xbeetutorial/xbee-introduction/zigbee_setup](https://sites.google.com/site/xbeetutorial/xbee-introduction/zigbee_setup)

我以前做过类似的事情，只要按照指南（特别设置唯一的 pan id），你会做到的。

# neo4j - Neo4j 数据库关闭：无法关闭逻辑日志

> ID：14533050
> 
> 赞同：0
> 
> 时间：2013-01-26T01:59:30.497
> 
> 标签：neo4j, shutdown

当我通过停止 tomcat 来停止我的 Web 应用程序时，neo4j 数据库没有完全关闭。我总是收到以下异常，neo4j 在下次应用程序启动时进行数据库恢复。

该应用程序在嵌入式模式下使用 neo4j 运行，并使用 spring-data-neo4j 2.0、Java 1.7.0_11-b21 和 apache-tomcat-7.0.34。

任何人都可以帮忙吗？

```
Jan 23, 2013 6:13:52 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Unable to close logical log
java.nio.channels.ClosedByInterruptException
at java.nio.channels.spi.AbstractInterruptibleChannel .end(AbstractInterruptibleChannel.java:202)
at sun.nio.ch.FileChannelImpl.write(FileChannelImpl.j ava:705)
at org.neo4j.kernel.impl.transaction.xaframework.Dire ctMappedLogBuffer.writeOut(DirectMappedLogBuffer.j ava:159)
at org.neo4j.kernel.impl.transaction.xaframework.Dire ctMappedLogBuffer.force(DirectMappedLogBuffer.java :172)
at org.neo4j.kernel.impl.transaction.xaframework.XaLo gicalLog.releaseCurrentLogFile(XaLogicalLog.java:6 77)
at org.neo4j.kernel.impl.transaction.xaframework.XaLo gicalLog.close(XaLogicalLog.java:702)
at org.neo4j.kernel.impl.transaction.xaframework.XaCo ntainer.close(XaContainer.java:76)
at org.neo4j.index.impl.lucene.LuceneDataSource.close (LuceneDataSource.java:318)
at org.neo4j.kernel.impl.transaction.XaDataSourceMana ger.shutdown(XaDataSourceManager.java:106)
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleIn stance.shutdown(LifeSupport.java:443)
at org.neo4j.kernel.lifecycle.LifeSupport.shutdown(Li feSupport.java:211)
at org.neo4j.kernel.InternalAbstractGraphDatabase.shu tdown(InternalAbstractGraphDatabase.java:574)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Nativ e Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Native MethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(De legatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.beans.factory.support.Disposab leBeanAdapter.invokeCustomDestroyMethod(Disposable BeanAdapter.java:320)
at org.springframework.beans.factory.support.Disposab leBeanAdapter.destroy(DisposableBeanAdapter.java:2 46)
at org.springframework.beans.factory.support.DefaultS ingletonBeanRegistry.destroyBean(DefaultSingletonB eanRegistry.java:510)
at org.springframework.beans.factory.support.DefaultS ingletonBeanRegistry.destroySingleton(DefaultSingl etonBeanRegistry.java:486)
at org.springframework.beans.factory.support.DefaultS ingletonBeanRegistry.destroySingletons(DefaultSing letonBeanRegistry.java:455)
at org.springframework.context.support.AbstractApplic ationContext.destroyBeans(AbstractApplicationConte xt.java:1090)
at org.springframework.context.support.AbstractApplic ationContext.doClose(AbstractApplicationContext.ja va:1064)
at org.springframework.context.support.AbstractApplic ationContext.close(AbstractApplicationContext.java :1010)
at org.springframework.web.context.ContextLoader.clos eWebApplicationContext(ContextLoader.java:549)
at org.springframework.web.context.ContextLoaderListe ner.contextDestroyed(ContextLoaderListener.java:14 3)
at org.apache.catalina.core.StandardContext.listenerS top(StandardContext.java:4831)
at org.apache.catalina.core.StandardContext.stopInter nal(StandardContext.java:5478)
at org.apache.catalina.util.LifecycleBase.stop(Lifecy cleBase.java:232)
at org.apache.catalina.core.ContainerBase$StopChild.c all(ContainerBase.java:1575)
at org.apache.catalina.core.ContainerBase$StopChild.c all(ContainerBase.java:1564)
at java.util.concurrent.FutureTask$Sync.innerRun(Futu reTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.jav a:166)

at java.util.concurrent.FutureTask$Sync.innerRun(Futu reTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.jav a:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker( ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:41:47.610

也许Tomcat有时会中断正在执行的线程。Neo4j 使用 Java NIO，它对中断非常敏感，会导致这样的问题，因为当它注意到一个使用 I/O 的线程被中断时，它会立即关闭该文件句柄。

# c# - XPath 查询适用于在线工具，但不适用于 .NET

> ID：14533051
> 
> 赞同：1
> 
> 时间：2013-01-26T01:59:41.787
> 
> 标签：c#, .net, xml, xpath

我可以使用在线 xpath 工具让下面的 xpath 与下面的 xml 一起工作，但我得到一个“表达式必须评估为节点集”。.NET 4.5 中的异常

路径：

```
//*[starts-with(name(.), "childnode")[identification/text()='xyz']] 
```

xml:

```
<rootnode>
    <childnode1234>
        <identification>xyz</identification>
    </childnode1234>
    <childnode3456>
        <identification>abc</identification>
    </childnode3456>
 </rootnode> 
```

预期的结果是

```
<childnode1234>
            <identification>xyz</identification>
        </childnode1234> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T03:58:58.910

**只是改变：**

```
//*[starts-with(name(.), "childnode")[identification/text()='xyz']] 
```

**至**：

```
//*[starts-with(name(.), "childnode")][identification/text()='xyz'] 
```

**我建议避免未经测试且明显有问题的 "no name" "online xpath tools"**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T03:09:10.513

网上的实现太宽松了。Microsoft XPath 是正确的：`starts-with()`计算结果为布尔值，而不是节点集。尝试

```
//*[starts-with(name(.), 'childnode') and identification/text()='xyz'] 
```

# c++ - 如何在 Visual Studio 2012 Express 的属性页中更改“继承值”

> ID：14533053
> 
> 赞同：13
> 
> 时间：2013-01-26T02:00:27.233
> 
> 标签：c++, visual-studio-2012

我下载了我想要包含在我正在处理的项目中的库的源代码。在属性页面 > 配置属性 > C/C++ > 预处理器中。从预处理器定义下拉菜单中单击编辑。

对话框的下半部分显示“继承的值”，这些是只读的。我想知道这些值是在哪里设置的，以便我可以编辑它们。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-03T16:36:51.440

这些设置可能来自几个地方。其中一些来自您项目中其他地方的设置。例如，如果您将 Project->Properties->General->Character Set 设置为“使用多字节字符集”，您将看到 _MBCS 出现在继承值列表中。这些设置也可以来自属性层次结构中包含的属性文件 (.props)。您可以通过导航到“属性管理器”选项卡来查看这些内容。还有其他偷偷摸摸的方法。例如，我有一个 .props 文件，我必须直接在 .props 文件中修改一些文件，因此它们不会出现在 Property Manager 中。可能还有更多方法，但这些是我知道的一些。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-05T14:07:37.000

我认为修改“继承值”的最佳方法是使用 View->Property Manager，然后导航到 YourProject->|，双击 Microsoft.Cpp..user 并搜索要更改的设置。

# c# - 使用长时间运行的构造函数设计对象

> ID：14533054
> 
> 赞同：3
> 
> 时间：2013-01-26T02:00:31.603
> 
> 标签：c#, .net, design-patterns, .net-3.5

我有一个类，旨在为在整个应用程序中多次使用的某些特定文件提供对某些元数据的快速访问。不幸的是，一些元数据只能通过非常长时间运行的方法调用来提取。

我有另一个类为长时间运行的方法提供异步包装器（可能是 5 分钟或更长时间，具体取决于文件的大小），但我试图弄清楚如何调用这个异步方法以及它是否合适将其放入构造函数中，或者是否有更好的设计模式适合这种情况。

这是一些伪代码来尝试说明我的问题：

```
public class MetaData
{
    public string Data1 { get; private set; }
    public string Data2 { get; private set; }

    public MetaData(String filepath)
    {
        var extractor = new ExtractMetaData(filepath);  //create instance of class that fetches the metadata

        this.Data1 = extractor.GetData1(); // short running method

        extractor.Data2Received += Data2Received;  
        extractor.GetData2Async();  // long running method, called with via async method

    }        

    private void Data2Received(object sender, MetaDataEventArgs args)
    {
        this.Data2 = args.Data;  // finally set Data2 property
    }
}

class ExtractMetaData
{

    public event Data2ReceivedEventHandler Data2Received;

    public ExtractMetaData (string filePath) { }

    public String GetData1();  // very fast method to get Data1
    public void GetData2Async();  // very slow method to get Data2

} 
```

我想弄清楚是否有更好的方法来实现这一点？

现在使用我的代码，几乎不需要等待构造，但是如果有人在方法返回并触发事件之前`MetaData`尝试访问该`MetaData.Data2`属性，他们将得到响应。但是如果他们在返回后调用 if ，它将包含正确的信息。由于确实没有办法通知用户此方法已完成，我担心这会变成糟糕的用户体验，因为他们不必等待构造函数，而是必须等待所有属性被设置。`GetData2Async()``Data2Received``null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:48:56.217

首先，您说没有办法通知用户`Data2`完成。这不是真的，您可以使用多种方式通知用户，例如事件或`Task`.

但我认为你实际上应该重组你的班级。您说获取`Data2`需要很长时间，这很可能意味着它使用了大量资源。正因为如此，我认为你甚至不应该尝试初始化`Data2`，除非你必须这样做。你怎么知道的？用户将不得不告诉你。理想情况下，如果用户不想要`Data2`，他甚至不应该能够访问它，这意味着`MetaData`分成两个类：类似于`BasicMetaData`and的东西`ExtendedMetaData`，它继承自`BasicMetaData`.

在`ExtendedMetaData`中，您可以通过某种方式通知用户初始化已完成（很可能使用事件），或者您可以让构造函数等到初始化完成（您可以使用`Monitor.Wait()`and`Monitor.Pulse()`来执行此操作）。

就个人而言，我认为最好的选择是如果你有一个静态工厂方法会返回`Task<ExtendedMetaData>`. `Result`这样，用户可以同步（使用）或异步（使用`ContinueWith()`或在可用的地方）等待结果`await`。这在 .Net 4.5 中特别有用（因为`await`），但在 .Net 4.0 中也是如此。不幸的是，您问题上的标签表明您使用的是 .Net 3.5，它没有`Task`. 如果可能的话，我会建议你升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:08:07.560

我认为您需要将注意力集中在以下模式上：延迟加载（仅在您真正需要时才调用“长”方法）和代理（如果需要，实现缓存层，隐藏内部实现，可能有多种不同的模式）对象的底部）。如果您决定使用多个对象来确保整体功能 - 那么 Facade 也可能是合理的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:49:17.217

这个问题你会得到几个不同的答案。这是我的看法。

IMO，您不应该在构造函数中调用任何操作，例如您现在正在做的事情。你的构造函数中的所有东西`MetaData`都不应该从那里开始。

当您实例化一个对象时，它可能会抛出一个异常，这很好，但您的对象不会被构造。一些最佳实践。构造函数应该是短期运行的，并且应该确保对象图将在构造函数之后创建。

再看看这个问题： [一个构造函数应该放多少代码？](https://stackoverflow.com/questions/531282/how-much-code-should-one-put-in-a-constructors-java)

或者，您应该注入您的依赖项并创建填充数据的方法。

如果您能多描述一下您的问题，那将会更有帮助。

您确实需要简化流程和设计。

# javascript - 当浮动：左在EE2中使用一些繁重的javascript时，非常有问题的慢滚动（浏览器原生）

> ID：14533056
> 
> 赞同：0
> 
> 时间：2013-01-26T02:00:43.470
> 
> 标签：javascript, jquery, css-float, gallery, expressionengine

所以我在表达式引擎 2 中创建了一个画廊，坦率地说，我不太了解，所以我使用了大量的 javascript 来弥补它（如果你建议任何更简单的方法来做到这一点，我会喜欢你永远）

奇怪的是，当我在带有图片的块链接上使用浮动时，页面上的滚动开始变得疯狂。

```
<a href="#" class="popthisshit photoins" style=""><img height="170" src="'+quitenice[i]+'"></a> 
```

我已经非常精确地隔离了这一点：

```
.photoins{ display:block; border:1px solid #666; height:140px; width:140px; overflow:hidden; margin:0px 0px 20px 20px; float:left;}
.photoins img{text-align:center; height: 240px; margin:-50% -50%;} 
```

一旦我使用 float: left; 页面停止正确滚动。删除它，它很好.. __

这是代码 [不要讨厌 plzktnx]

我首先从频道中的照片创建**数组：**

```
{exp:channel:entries channel="galleries" disable="categories|category_fields|custom_fields|member_data|pagination" limit="1" status="open|closed"}
<script> 
var quitenice = new Array('{gallery_photos}{row_photo} ', '{/gallery_photos}'); 
```

但是哦whyyyy，你可能会在远处大喊..因为以下原因：在这里我创建了假分页以避免使用它，因为它被证明更重..

```
var zero = 0;
var size = 25;
var somecount = 0;

for (var i=zero; i<size; i+=1) {
    somecount+=1;
    document.write('<a href="#" class="popthisshit photoins" style=""><img height="170" src="'+quitenice[i]+'"></a>');
};

var newzero=zero+size; 
var newsize = size+newzero; 
```

所以现在我们得到了第一组 25 张图片。这是图片锚

```
document.write('<a href="#" class="morePics"></a>'); 
```

而且，这是无限卷轴：

```
$(function () {
             var $win = $(window);
             $win.scroll(function () {
                 if ($win.height() + $win.scrollTop() == $(document).height()) {
                    if(quitenice.length >=newsize){ 
                        for (var ii=newzero; ii<newsize; ii+=1) {
                            $('.morePics').before('<a href="#" class="popthisshit photoins"><img src="'+quitenice[ii]+'"></a>');        
                        };
                        newzero += size;
                        newsize +=size;
                    }else{  
                        for (var ii=newzero; ii< quitenice.length-1; ii+=1) {
                            $(this).before('<a href="#" class="popthisshit photoins"><img src="'+quitenice[ii]+'"></a>');
                        };
                        $('.morePics').before('<span class="ender"></span>');
                        newzero += size;
                        newsize +=size;
                    }; 
                 }
             });
         });

</script>
{/exp:channel:entries} 
```

所以删除float：left，它滚动得很好，但是在javascript中添加一堆position：absolutes似乎更倒退了。

我使用 1.8.0 jQuery 的一堆子库。我试图改变它和其他一切，但它是 float: left 让它变得有问题。帮助。

ps：popthisshit调用超轻灯箱，也和问题没多大关系！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:08:57.427

我在编写无限滚动脚本时遇到了同样的问题。问题是滚动事件会在每个滚动中的每个小 steo 处触发。我在 airbnb 的 InfinityJS 中找到的解决方案是使用设置为 ~500 的间隔来检查自上次间隔以来滚动的差异。然后`shouldShow`根据`scrollY`

```
var prevScroll = -1
window.setInterval(function () {
    currScroll = window.scrollY
    if (currScroll != prevScroll) {
        // check
    }
}) 
```

# ruby-on-rails - 有没有办法配置 Rails 3 在自己的日志文件中记录 SQL 查询？

> ID：14533057
> 
> 赞同：0
> 
> 时间：2013-01-26T02:00:46.620
> 
> 标签：ruby-on-rails

在我的开发环境中，所有日志都保存到`logs/development.log`. 日志文件包含在每个网页中执行的 SQL 查询以及其他噪音。有没有办法将 Rails 3 配置为仅将这些查询记录在单独的日志文件中？我目前正在使用 3.2.11

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:05:32.727

在您的`config/environments/development.rb`文件中，您可以执行以下操作：

```
config.active_record.logger = Logger.new("log/sql.log") 
```

# mysql - 快速左连接

> ID：14533061
> 
> 赞同：3
> 
> 时间：2013-01-26T02:02:19.467
> 
> 标签：mysql, performance, left-join, create-table, xeround

我最近从使用本地 MySQL 实例切换到对我的 C# 应用程序使用 Xeround MySQL 实例。因此，我注意到查询运行速度要慢得多。我目前正在运行左连接以创建一个新表，并试图将我的运行时间缩短几秒钟。

我观察到以下平均运行时间：

*   创建表为（选择）：14s
*   创建表并插入左连接：14 秒
*   仅 SELECT 语句：9s
*   创建临时表为（选择）：9.2s
*   创建视图和检索内容：9.5 秒

目前我正在运行该`CREATE TABLE AS (SELECT)`声明。显然，我想减少与从仅选择语句移动到使用选择语句相关的五秒溢价`CREATE TABLE`。使用视图似乎很有希望，但是从视图访问数据非常慢，并且不能证明这里节省的时间是合理的。使用临时表似乎也很有希望，但是按照我进行函数调用的方式，该表将在我完成访问之前被删除。我可以使用另一个关键字来告诉 MySQL 引擎获取`SELECT`语句的内容并将其放入准系统表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:41:07.387

5 秒的延迟似乎是由将所选记录写入表中引起的。如果可用内存允许，请尝试使用`MEMORY`引擎创建表：

```
CREATE TABLE myTempTable ENGINE=MEMORY AS SELECT (...) 
```

至于与本地服务器相比性能更差（假设硬件规格相似），我建议比较`SHOW VARIABLES`每个系统上的输出，尤其是那些以“innodb_”开头的变量。

# sql - 记录不存在的 SQL 内连接

> ID：14533066
> 
> 赞同：1
> 
> 时间：2013-01-26T02:02:43.057
> 
> 标签：sql, sql-server, tsql

我目前有 2 个使用 INNER JOIN 子句查询的表。我的第一个标签为部门的表相当简单，只包含 3 个字段 - deptID、deptName 和 companyID。我的第二个标签为 departmentMemberships 的表更简单，只包含 2 个字段 - deptID 和employeeID。我当前的 SQL 语句查询这两个表并返回所有部门 ID、部门名称和每个部门的员工人数。如果上述部门中没有任何员工，我的查询将不会返回部门。这是我当前的查询。

```
`SELECT departments.deptID, departments.deptName,
COUNT(departmentMemberships.deptID) AS employeeCount
FROM departmentMemberships
INNER JOIN departments
ON departmentMemberships.deptID = departments.deptID
WHERE departments.companyID = 1
GROUP BY departments.deptID, departments.deptName
ORDER BY departments.deptName ASC;` 
```

请原谅我对 TSQL 的缺乏经验，但我如何更改此查询以返回所有部门，包括没有员工登记的部门？

非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T02:08:54.420

如所写，将您的更改`INNER JOIN`为`RIGHT OUTER JOIN`. 但我更喜欢`LEFT JOIN`我自己；更容易遵循。IE：

```
SELECT departments.deptID
     , departments.deptName
     , COUNT(departmentMemberships.deptID) AS employeeCount
FROM departments
LEFT OUTER JOIN departmentMemberships
ON departmentMemberships.deptID = departments.deptID
WHERE departments.companyID = 1
GROUP BY departments.deptID, departments.deptName
ORDER BY departments.deptName ASC 
```

# mysql - 在数据库搜索方面，默认使用 OR 或 AND 逻辑会更好吗？

> ID：14533067
> 
> 赞同：0
> 
> 时间：2013-01-26T02:02:54.513
> 
> 标签：mysql, search

假设我有一个包含学生信息的数据库，并且我有以下字段：

1) 年龄组 2) 课程名称 3) 原籍国

如果我要构建一个搜索功能，假设用户想要搜索匹配的学生会更好：

年龄组或课程名称或原籍国？

或者我应该假设用户想要搜索满足所有条件（即 AND 逻辑）的学生？

最佳做法是什么？我认为人们的意思是 OR 大多数时候，因为这给出了最多的结果。

你怎么看？

非常感谢您的反馈！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:10:03.527

如果这是一个大问题，请让人们选择。否则，这取决于它的常用方法。我希望看到 AND 这样我就可以产生最严格的输出，而不必筛选我不想要的东西——但我不知道你的用户群是什么样的；你应该问他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:13:34.610

这是用户焦点小组的绝佳候选者。如果您正在构建一个网站（而不是软件产品或公司内部应用程序），而您无法访问组织焦点小组，您可以尝试以调查或联系表的形式征求用户的反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:39:19.437

您总是可以针对所有这些字段创建一个全文索引，然后对索引进行搜索。

```
CREATE FULLTEXT INDEX giveitaname ON mytable (agefield, coursename, country); 
```

然后像这样查询索引：

```
SELECT * FROM mytable WHERE MATCH(agefield, coursename, country) against ('%search_variable_here%') 
```

现在，您的搜索将适用于部分单词、不匹配的订单，并且可能会更加相关并产生更少的零结果结果。

同时，我个人不会太担心 OR 或 AND 之间的负载，特别是如果您的索引设置正确。您应该根据您正在使用的数据集以及对您的用户群最直观和最相关的数据集做出选择。

# javascript - 通过修改css来旋转图片

> ID：14533079
> 
> 赞同：0
> 
> 时间：2013-01-26T02:04:22.123
> 
> 标签：javascript, image, rotation

我想通过修改css来旋转两个图像，如下所示：

```
document.getElementById("id").style.backgroundImage = "url('image2.png')";
document.getElementById("id").style.backgroundImage = "url('image1.png')"; 
```

但是，我只需要在函数调用时执行四次。

我试过使用 setTimeout() 方法，但是，它似乎没有完成这项工作。

这是我当前通过单击初始化的代码。

```
var d = new Date();
var n;
var i;

function flash() {
    n = d.getTime();
    var newTime = d.getTime();
    var called = 0;
    i = 0;
    while ((newTime - n) < 2000) {
        document.getElementById("i_count").innerHTML = i;
        if (!(i % 2) && (!called)) {
            called = 1;
            setTimeout("change_1()", 250);
            i++;
            called = 0;
        } else if ((i % 2) && (!called)) {
            called = 1;
            setTimeout("change_2()", 250);
            i++;
            called = 0;
        }
        newTime = d.getTime();
    }
}

function change_1() {
    document.getElementById("id").style.backgroundImage = "url('image2.png')";
    return;
}
function change_2() {   
    document.getElementById("id").style.backgroundImage = "url('image1.png')";
    return;
} 
```

我试图在while循环中使用计时器而不是计数，但它会阻塞页面并且永远不会加载。当我在 while 循环中使用计数器时，它在没有调用 change_2() 的情况下递增，这意味着计数器刚刚递增超过停止条件。

我想做一个非常（至少听起来像）简单的任务，点击动作旋转图像一段时间然后停止。

...我试过在网上搜索，但在过去的 2 个小时里，我所看到的只是连续旋转。

感谢帮助！

将代码更改为以下，但是，我只得到一个周期。无论 change_1 和 2 是否完成，计数器都会递增。

```
var i;

function flash() {
    i = 0;
    while (i++ < 10) {
        document.getElementById("i_count").innerHTML = i;
        setTimeout("change_1()", 250);
    }
};

function change_1() {
    document.getElementById("1").style.backgroundImage = "url('images/img_1.png')";
    setTimeout("change_2()", 250);
};

function change_2() {
    document.getElementById("1").style.backgroundImage = "url('images/img_2.png')";
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:10:29.297

是的，你甚至没有接近。

您不会在循环中一次又一次地调用超时。change_1 应该设置一个超时来调用 change_2，反之亦然，计数器在四点后停止。

# oracle - WSO2 数据源：Oracle 如何配置一些用户？

> ID：14533080
> 
> 赞同：2
> 
> 时间：2013-01-26T02:04:48.347
> 
> 标签：oracle, jdbc, wso2, wso2dss

我使用 WSO2 数据服务，并且与 Oracle 的通信与我的主用户数据库完美。

我创建了具有相同配置文件的其他用户，但 WSO2 无法与之通信。错误信息是：

> **数据库 URL 不能为空**。

该 URL 与我用于主数据库用户的 URL 相同，如下所示：

> **jdbc:oracle:thin:xxx/xxx@localhost:1521:orcl**

拜托，有人可以帮我吗？

非常感谢！

# c# - 覆盖 SimpleMembershipProvider 的 FormsAuth 票证以包含额外的用户信息

> ID：14533081
> 
> 赞同：1
> 
> 时间：2013-01-26T02:04:55.453
> 
> 标签：c#, security, asp.net-mvc-4, simplemembership

我正在使用带有 SimpleMembershipProvider 的 ASP.NET MVC 4 应用程序中的默认功能，并且想知道如何将额外参数（userId 等）添加到用户登录时创建的 cookie 中？我可以简单地覆盖cookie吗？

# c# - 为什么 Array 类不直接公开其索引器？

> ID：14533082
> 
> 赞同：22
> 
> 时间：2013-01-26T02:04:56.550
> 
> 标签：c#, arrays, ilist, indexer

**要回答的事情：**

1.  不要担心*方差*，而有问题的项目是`Array`而不是`T[]`。

2.  多维数组的类似情况是 [[这里](http://en.wikipedia.org/wiki/Logical_block_addressing)]

也就是说，N-dims 到线性变换总是可能的。所以这个问题特别引起了我的注意，因为它已经`IList`为线性索引器实现了。

* * *

**问题：**

在我的代码中，我有以下声明：

```
public static Array ToArray<T>(this T source); 
```

我的代码知道如何制作`souce`一个数组（在运行时）。我试图让消费代码直接访问它的索引器。但是没有“as IList”，就无法做到。 ***返回`object[]`可能需要额外的转换/转换，这就是我阻止做的事情。*** 我能做的是：

```
public static IList ToArray<T>(this T source); 
```

但我认为一个名为`ToArray`返回的方法`IList`看起来很奇怪。

因此，我对此感到困惑：

在 的声明中`Array`，有

```
object IList.this[int index]; 
```

这样我们就可以

```
Array a;
a=Array.CreateInstance(typeof(char), 1);
(a as IList)[0]='a'; 
```

但我们不能

```
a[0]='a'; 
```

除非它被声明为

```
public object this[int index]; 
```

我能看到的唯一区别是它要求我们通过`IList`实现它的接口显式地使用它的索引器，但为什么呢？**有好处吗？还是有暴露的问题？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T18:26:04.233

`Array`不能有索引器，因为它需要能够表示具有任意维数的数组。二维数组的索引器具有与一维数组不同的签名。

如果提供了一个索引器并将其用于`Array`表示二维数组的数组，会发生什么？

语言设计者选择的解决方案是根本不包括索引器。

如果您知道您的`ToArray`方法将始终返回一维数组，请考虑使用：

```
public static T[] ToArray<T>(this T source); 
```

那将有一个索引器。

如果数组中的元素不都是类型，`T`那么您可以返回`object[]`：

```
public static object[] ToArray<T>(this T source); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T02:17:15.993

`a as IList`是（基本上）铸造。所以只需先投射它：

```
char[] a = (char[])Array.CreateInstance(typeof(char), 1);
a[0] = 'a'; 
```

**编辑**：原因是：因为接口`Array`根本没有定义索引器。它使用`SetValue(Object, Int32)`和`Object GetValue(Int32)`。注意里面的不祥之`Object`物。`Array`不是特定类型的；它是为最小公分母而构建的：`Object`. 它可以很容易地定义一个索引器，但实际上你仍然会遇到取消/装箱问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T03:32:19.390

`Array`我认为不直接实现该索引器的一个原因是因为所有特定的数组类型（如`char[]`）都派生自`Array`.

这意味着这样的代码是合法的：

```
char[] array = new char[10];
array[0] = new object(); 
```

像这样的代码不应该是合法的，因为它不是类型安全的。以下是合法的并引发异常：

```
char[] array = new char[10];
array.SetValue(new object(), 0); 
```

但是`SetValue()`一般不使用，所以这不是什么大问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T18:02:15.020

The problem with `IList<T>`'s methods in the `Array` class, including its indexer, is that their *explicit* implementations are [added to `Array` objects of the class at run time](http://msdn.microsoft.com/en-us/library/system.array.aspx):

> Starting with the .NET Framework 2.0, the `Array` class implements the `System.Collections.Generic.IList<T>`, `System.Collections.Generic.ICollection<T>`, and `System.Collections.Generic.IEnumerable<T>` generic interfaces. The implementations are provided to arrays at run time, and therefore are not visible to the documentation build tools. As a result, the generic interfaces do not appear in the declaration syntax for the `Array` class, and there are no reference topics for interface members that are accessible only by casting an array to the generic interface type (explicit interface implementations).

When classes implement interfaces *explicitly*, accessing interface methods [requires a cast](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx):

> A class that implements an interface can explicitly implement a member of that interface. When a member is explicitly implemented, it cannot be accessed through a class instance, but only through an instance of the interface.

The problem with providing a "regular" (as opposed to an "explicit") interface implementation is the fact that the `Array` class is not generic: without a type parameter, you cannot write

```
class Array : IList<T> 
```

simply because `T` is undefined. The environment cannot slap an interface implementation onto the `Array` class until the type of the `T` parameter becomes known, which may happen only at run time:

```
// The type of [T] is char
Array a = Array.CreateInstance(typeof(char), 1);
// The type of [T] is int
Array b = Array.CreateInstance(typeof(int), 1);
// The type of [T] is string
Array c = Array.CreateInstance(typeof(string), 1); 
```

At the same time, the static type of `a`, `b`, and `c` remains the same - it's `System.Array`. However, at run time `a` will be implementing `IList<char>`, `b` will be implementing `IList<int>`, and `c` - `IList<string>`. None of it is known at compile time, prevents the compiler from "seeing" the indexer and other methods of `IList<T>`.

Moreover, not all instances of `Array` implement `IList<T>` - [only arrays with a single dimension do](https://stackoverflow.com/a/275129/335858):

```
Array x = new int[5];
Console.WriteLine(x.GetType().GetInterface("IList`1") != null); // True
Array y = new int[5,5];
Console.WriteLine(y.GetType().GetInterface("IList`1") != null); // False 
```

All of the above prevents the compiler from accessing `IList<T>` methods, including the indexer, without an explicit cast.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T00:01:07.443

**简短的回答**：

System.Array 是**ND 数组**（不仅是一维）的基类，这就是为什么一维索引器 (object this[i]{get;set;}) 不能成为基成员的原因。

**长答案**：

如果您说创建二维数组并尝试访问它的 IList 索引器：

```
Array a;
a=Array.CreateInstance(typeof(char), 1,1);
(a as IList)[0]='a'; 
```

您将获得不受支持的异常。

好问题是：

> **为什么要`System.Array`实现`IList`，`IEnumerable`而它的大部分实现都会抛出`NotSupportedException`非一维数组？**

还有一件有趣的事要提。从技术上讲，没有一个数组在内部具有经典含义的类索引器。Indexer 的经典含义是属性“Item”+ get(+set) 方法。如果你深入思考，你会发现**typeof(string[])**没有 indexer 属性，它只有 2 个方法**Get**和**Set** - 在 string[] 类中声明的那些方法（不是在基类中，与 Array.SetValue 不同， Array.GetValue），它们用于编译时索引。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-03T15:16:16.307

即使数组都是一维的，你仍然会遇到协方差和逆变问题**：**

如果基类有一个

```
public Object this[int index] { get; set; } 
```

indexer 属性，然后是具体类型 indexer 属性

```
public TValue this[int index] { get; set; } 
```

会与基类型的冲突（因为参数是 setter 是相同的，但返回值不是）。

将基类转换为基接口或通用接口（如 IList 或 IList）可以解决此问题，因为可以显式实现非特定索引器。这与

```
Add(Object value) 
```

对比

```
Add(TValue value) 
```

方法。

理论上，多维问题**可以**通过定义 1D 索引和 nD 索引之间的转换来克服（例如 [n] = [n / length(0), n % length(0)]），因为 nD 矩阵存储为一个连续的缓冲。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T18:07:42.463

From msdn:

> The Array class is the base class for language implementations that support arrays. However, only the system and compilers can derive explicitly from the Array class. Users should employ the array constructs provided by the language.

If it provide you an indexer it contradicts with the original intention of Array class. You should use the compiler implementation.

Again from msdn:

> **Important:** Starting with the .NET Framework 2.0, the Array class implements the System.Collections.Generic.IList, System.Collections.Generic.ICollection, and System.Collections.Generic.IEnumerable generic interfaces. The implementations are provided to arrays at run time, and therefore are not visible to the documentation build tools. As a result, the generic interfaces do not appear in the declaration syntax for the Array class, and there are no reference topics for interface members that are accessible only by casting an array to the generic interface type (explicit interface implementations). The key thing to be aware of when you cast an array to one of these interfaces is that members which add, insert, or remove elements throw NotSupportedException.

It is an afterthought, I presume.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-05T22:39:30.840

从技术上讲，有两种类型的数组。矢量类型或矩阵类型。运行时将 Vector 类型称为`Sz_Array`，它们是您在声明一维数组*时获得的类型。我不知道为什么。矩阵类型表示多维数组。不幸的是，它们都继承自`Array`其他中间类型，但没有其他中间类型。

> 为什么 Array 类不直接公开其索引器？

当您将其作为 a 时，您只能访问一维数组的索引器的原因`T[]`是因为一维数组的索引器是通过 IL 操作码在运行时实现的。

例如

```
static T GetFirst<T>(T[] a)
{
   return a[0]:
} 
```

转换为以下 il::

```
L_0000: ldarg.0 
L_0001: ldc.i4.0 
L_0002: ldelem.any !!T
L_0007: ret 
```

如下 C#

```
private static T GetFirst<T>(IList<T> a)
{
    return a[0];
} 
```

转换为这个 IL。

```
L_0000: ldarg.0 
L_0001: ldc.i4.0 
L_0002: callvirt instance !0 [mscorlib]System.Collections.Generic.IList`1<!!T>::get_Item(int32)
L_0007: ret 
```

所以我们可以看到一个是使用操作码`ldelem.any`，另一个是`callvirt`方法。

运行时在运行时为数组注入`IList<T>,IEnumerable<T>`。MSIL 中它们的逻辑位于类中`SZArrayHelper`

提供实现的运行时还为生成的每个数组创建两个辅助方法，以帮助不支持索引器的语言（如果存在这种语言）C# 不会公开它们，但它们是可以调用的有效方法。他们是：

```
T Get(Int32)
void Set(Int32, T) 
```

这些方法也会根据维度为矩阵类型数组生成，并在调用索引器时由 C# 使用。

但是，除非您实际指定您是类型化数组，否则您不会获得索引器。由于 Array 没有索引器方法。不能使用操作码，因为在编译时您需要知道所讨论的数组是向量类型和数组的元素类型。

> 但是 Array 实现了 IList！那有一个索引器我不能叫它吗？

是的，但是 IList 方法的实现是显式实现，因此它们只能在 C# 中在强制转换或受泛型约束绑定时调用。可能是因为对于任何非向量类型的数组，当您调用其任何方法时，它都会引发不受支持的异常。由于它唯一有条件地支持运行时的创建者，因此当您知道这是一个一维数组时，可能希望您将其强制转换，但我现在无法命名该类型。

> `IList`如果不支持任何多维数组的实现抛出，为什么数组实现？

这可能是自 1.0 以来就存在的错误。他们现在无法修复它，因为无论出于何种原因，他们都可能将多维数组转换为`IList`. 在 2.0 中，他们添加了一些运行时魔法，以便在运行时向向量类型类添加实现，以便只有一维数组实现`IList<T>`和`IEnumerable<T>`.

我们可以插入您的下一个问题::

> 如何在不强制转换的情况下让索引器出现？将方法签名更改为::

```
public static T[] ToArray<T>(this T source) 
```

但是你可能会说你的 ToArray 没有返回 T[]，它返回了别的东西我该怎么办？如果您可以明确指定返回类型，请执行此操作。如果它是一种引用类型，您总是可以*滥用*数组协方差并将返回类型更改为，`object[]`但是您将受到 ArrayTypeMismatchException 的摆布。如果您要返回一个值类型，这将不起作用，因为该强制转换是非法的。此时您可以直接返回`IList`，但随后您将元素装箱并且您仍然受 ArrayTypeMismatchException 的摆布。Array 是所有数组类型的基类，因为它有帮助方法来帮助您访问内容，例如`GetValue`和`SetValue`您会注意到它们具有采用索引数组的重载，以便您可以访问 Nd 和 1d 数组中的元素。例如

```
IList myArray = ToArray(myValues);
// myArray is actually a string array.
myArray[0]='a';
// blows up here as you can't explicitly cast a char to a string. 
```

所以短处是你不知道显式类型。`Array`并且implementation的每个继承者`IList`，即使它没有多大意义，也是一个他们无法更改的*实现细节，因为它自 1.0 以来就在那里。*

*   从技术上讲，这不是 100% 正确的。您可以创建一个只有一维的矩阵类型数组。这个可怕的憎恶可以在 IL 中创建，或者您可以使用`typeof(int).MakeArrayType(1)`通知您现在如何拥有`System.Int32[*]`而不是创建类型`System.Int32[]`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-06T11:56:18.940

C# Specs“12.1.1 System.Array 类型”说，“注意 System.Array 本身不是数组类型”

**因为它不是数组类型。**

并注意“6.1.6 隐式引用转换”说，“从一维数组类型 S[] 到 System.Collections.Generic.IList 及其基接口，前提是存在从 S 到的隐式标识或引用转换T"

C# 规格： [http ://www.microsoft.com/en-us/download/details.aspx?id=7029](http://www.microsoft.com/en-us/download/details.aspx?id=7029)

关于为什么索引器访问如此神秘，请查看其他 SO 帖子： [隐式与显式接口实现](https://stackoverflow.com/questions/598714/implicit-vs-explicit-interface-implementation)

希望能帮助到你。

# android - 如何优化此代码以减少垃圾收集？

> ID：14533084
> 
> 赞同：1
> 
> 时间：2013-01-26T02:05:16.693
> 
> 标签：android, garbage-collection

首先，我想说这是我正在开发的一款安卓游戏的一部分。垃圾收集器大约每三秒运行一次，这会导致我的游戏出现短暂（但明显）的延迟。我已将其缩小为我的代码中的一种方法（粘贴在下面）。当不使用这部分时，垃圾收集器大约每 11 秒运行一次，并且延迟更少。此代码是对象的一部分，该对象使用树结构来检测与对象的碰撞。对象 topLeft、topRight、bottomLeft 和 bottomRight 是相同类型的对象，它们递归地检查碰撞。我主要想知道如果每帧都运行它，这里是否有任何东西会产生大量垃圾。

```
public HashSet<Integer> getCollisionTiles(Rect r)
{
    resetTempList();

    if(topLeft!=null && topLeft.containsTiles() && Rect.intersects(r, topLeft.getBounding()))
        topLeft.addCollisionTiles(tempList, r);
    if(topRight != null && topRight.containsTiles() && Rect.intersects(r, topRight.getBounding()))
        topRight.addCollisionTiles(tempList, r);
    if(bottomLeft != null && bottomLeft.containsTiles() && Rect.intersects(r, bottomLeft.getBounding()))
        bottomLeft.addCollisionTiles(tempList, r);
    if(bottomRight != null && bottomRight.containsTiles() && Rect.intersects(r, bottomRight.getBounding()))
        bottomRight.addCollisionTiles(tempList, r);

    return tempList;
}

private void addCollisionTiles(HashSet<Integer> tList, Rect r)
{
    if(level==maxLevel)
    {
        for(Integer i: keyListTiles) 
            tList.add(i);
    }
    else
    {
        if(topLeft!=null && topLeft.containsTiles() && Rect.intersects(r, topLeft.getBounding()))
            topLeft.addCollisionTiles(tList, r);
        if(topRight != null && topRight.containsTiles() && Rect.intersects(r, topRight.getBounding()))
            topRight.addCollisionTiles(tList, r);
        if(bottomLeft != null && bottomLeft.containsTiles() && Rect.intersects(r, bottomLeft.getBounding()))
            bottomLeft.addCollisionTiles(tList, r);
        if(bottomRight != null && bottomRight.containsTiles() && Rect.intersects(r, bottomRight.getBounding()))
            bottomRight.addCollisionTiles(tList, r);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:08:26.437

`topLeft.getBounding()`每次 调用都会创建一个新的 Rectangle 。

如果您经常调用，这将是很多对象`getCollisionTiles()`。您可能会在调用`getCollisionTiles()`很多次之前提取一次边界矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:26:09.553

好吧，我想我已经解决了这个问题。HashMaps 在我的程序中经常使用，我从它们切换到 SparseArray。此外，渲染图块的方式是为每个绘制的图块创建一个新的 Rect，因此我对其进行了优化以更有效地使用此方法并创建更少的垃圾。

# c++ - 互斥代码中发生死锁？

> ID：14533088
> 
> 赞同：1
> 
> 时间：2013-01-26T02:05:43.773
> 
> 标签：c++, concurrency, deadlock

我想弄清楚这段代码有什么问题？我已经研究了一段时间，如果有死锁，我仍然看不到任何死锁。任何提示将不胜感激！

```
Mutex mA;
Mutex mB;

Take(mA);
Take(mB);

DoSomething(); 

Release(mA); 
Release(mB); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:08:57.543

此代码本身不会引起问题。但是，如果您有在`Take(mB); Take(mA);`其他地方使用反向的代码，您可能会遇到死锁。

# iphone - 使用 AVAudioSessionCategoryMultiRoute 同时从 iPhone 主扬声器和听筒扬声器播放

> ID：14533089
> 
> 赞同：6
> 
> 时间：2013-01-26T02:06:29.827
> 
> 标签：iphone, ios6, avaudioplayer, avaudiosession

`AVAudioSessionCategoryMultiRoute`有谁知道 iPhone 是否可以同时使用（或任何其他方法）从主扬声器（手机底部靠近 30 针基座连接器）和接收器（屏幕上方的听筒）播放声音？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T06:30:42.297

不幸的是，它不能。不幸的是，当插入 30 针基座连接器并制作音频对时，所有音频都会路由到 30 针连接器。这有时甚至可能发生在简单的事情上，比如在 30 针上卡住了垃圾——就硬件而言，不幸的是，这绝对不是——查看[http://theamazingaudioengine.com/](http://theamazingaudioengine.com/)看看可能是你最酷的东西目前可以用音频做，但在回答你的问题时，不，抱歉，它不能做。

# mysql - MySQL - 如何存储 GROUP BY 的结果以在 ON DUPLICATE KEY UPDATE 中使用

> ID：14533091
> 
> 赞同：0
> 
> 时间：2013-01-26T02:06:51.303
> 
> 标签：mysql, sql, alias

如何修复以下查询？我尝试将 SELECT 查询的结果别名到表`tmp`中是行不通的。

```
INSERT INTO vote_counts (list_id, node_id, num_down_votes) 
  (SELECT vl.list_id, vl.node_id, COUNT(*) AS c
    FROM vote_logs vl 
   WHERE vl.node_id=2442703 AND vl.agree_type='DOWN_VOTE' 
GROUP BY vl.list_id) tmp
ON DUPLICATE KEY UPDATE num_down_votes = tmp.c; 
```

该`vote_counts`表在 上具有唯一键约束`(list_id, node_id)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:34:00.593

如果我没记错的话，这应该有效：

```
INSERT INTO vote_counts (list_id, node_id, num_down_votes) 
SELECT vl.list_id, vl.node_id, COUNT(*) AS c
FROM vote_logs vl 
WHERE vl.node_id=2442703 AND vl.agree_type='DOWN_VOTE' 
GROUP BY vl.list_id
ON DUPLICATE KEY UPDATE num_down_votes = vl.c; 
```

如果`vl.c`不起作用，您可能需要使用它，`Count(vl.*)`因为它是别名 - 不确定，必须对其进行测试。

- 编辑

也许使用 a`subquery`可以解决这个问题：

```
INSERT INTO vote_counts (list_id, node_id, num_down_votes) 
SELECT list_id, node_id, c
FROM (
    SELECT vl.list_id, vl.node_id, COUNT(*) AS c
    FROM vote_logs vl 
    WHERE vl.node_id=2442703 AND vl.agree_type='DOWN_VOTE' 
    GROUP BY vl.list_id
) tempTable
ON DUPLICATE KEY UPDATE num_down_votes = tempTable.c; 
```

祝你好运。

# dart - 找不到引用的源：package:web_ui/web_ui.dart

> ID：14533092
> 
> 赞同：2
> 
> 时间：2013-01-26T02:07:08.193
> 
> 标签：dart, dart-webui

我有一个使用 Dart 和 web_ui 包的项目。我刚刚将 Dart 升级到 libv2，具体来说：

```
Dart Editor version 0.3.1_r17594
Dart SDK version 0.3.1.3_r17594 
```

我刚刚将 web_ui 更新为 0.3.0+2。

现在，我收到这些错误：

```
Cannot find referenced source: package:web_ui/web_ui.dart
no such type "WebComponent"
"ChatWindowComponent" has no method named "dispatch" 
```

当我运行我的 build.dart 时，它成功完成，但它没有创建 out 目录。它也没有给出任何错误信息。

这是怎么回事？为什么找不到 package:web_ui/web_ui.dart？我可以清楚地看到 pub 已经正确设置了东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:02:43.777

> 当我运行我的 build.dart 时，它成功完成，但它没有创建 out 目录。它也没有给出任何错误信息。

我在禁用“自动运行 pub”的情况下运行编辑器。创建一个新的 web ui 项目会产生一些错误，安装 pub 后错误消失了，但文件的时间戳现在已经过时了。

我更改了要构建的文件，out 目录立即出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:07:08.193

这是一个已知问题。请参阅[http://code.google.com/p/dart/issues/detail?id=7822](http://code.google.com/p/dart/issues/detail?id=7822)。该问题今天已关闭。我尝试了 Dart 编辑器的连续构建，但这会导致不同的错误——我将把它留到另一个问题上。

# javascript - 表单提交时需要复选框

> ID：14533095
> 
> 赞同：-1
> 
> 时间：2013-01-26T02:07:34.500
> 
> 标签：javascript, jquery, html

试图找到一些如何使复选框成为必需的东西。如下所示，这是我`required="required"`生成复选框的方式，我将不胜感激有关如何执行此操作的任何帮助。我的系统至少需要选中一个复选框。也想如果它不会是一个弹出窗口。`alert('');`

```
<?php 
                $result=mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
                $i=1;
                while($row = mysql_fetch_array($result)){
                echo '<input type="checkbox" name="type" 
                        value='.$row['type_id'].' id='.$row['type_id'].'>'.'
                            <label for='.$row['type_id'].'
                            class="fil_lab">'.$row['type_name']. '</label>';
                if($i%5==0)
                {
                 $i = 0;
                 echo '<br><br>';
                }
                $i++;}
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:11:53.557

好吧，那里有大量的 jQuery 验证插件，但是做起来很简单：

```
$("form").on('submit', function (e) {
   if (!$(":checkbox:checked").length) {
      $("form").append("<div>Check at least one box please</div>");
      e.preventDefault();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:12:43.813

```
$('.form').submit(function(){

    var checked = true ;

    $('.check_box').each(function(){

         if(!$(this).is(':checked')) {

             checked = false;   
         }

         if(!checked){

            $('.error_div').html("please select at least on check box");
            return false;
         }

    });       
}); 
```

# css - IE7 Subnav，两个定位问题

> ID：14533096
> 
> 赞同：0
> 
> 时间：2013-01-26T02:07:46.920
> 
> 标签：css, internet-explorer-7, z-index

有问题的网站：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

如果您在 IE7 中测试上述链接（我使用的是具有浏览器模式和 IE7 浏览器兼容性的 IE9），则子导航存在定位问题。

将鼠标悬停在“关于我们”上，然后将鼠标悬停在“主页”上，然后返回“关于我们”。您将看到子导航已向右移动了其上方 LI 的宽度。

这纯粹是用 CSS 编码的。这在除 IE7 之外的所有浏览器中都能完美运行，我想在 CSS 中保持它的工作，而不需要任何 Javascript 修复。

我也有一个 z-index 问题，对这两个问题有什么想法吗？

这是处理主 UL 和 LI 的 CSS 代码，以及处理第一个 Subnav 的 CSS。（注意“迈克尔”下的二级子导航按预期工作）。

***请注意，类 .main-nav 应用于处理水平条的第一个 UL。.main-sub-nav 类应用于在 About us 菜单下保存 subnav LI 的 Michael、Kenny 等的 UL。

```
nav .main-nav {
    position: absolute; /* allows us to absolute position the subnavs */
    display: block;
    width: 100%;
    height: 40px; /*height of inner nav for white border */
    padding: 0;
    margin: 0;
    border: 1px solid #fff; /* Inner white border */
    -moz-border-radius: 5px; /*rounded edges */
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

nav ul > li {
    display: inline-block;
    height: 40px;
    padding: 0;
    margin: 0 0 0 -4px;
}

/* MAIN NAV SUBNAV STYLES */

.main-sub-nav { /* BASIC STYLING PLUS HIDE */
    position: absolute;
    display: none;
    z-index: 1;
    width: 200px;
    height: auto;
    top: 100%;
    border: 1px solid #d4d4d4;
    background: #f6f6f6;
}

nav ul > li:hover > .main-sub-nav { /* ON HOVER MAKE SUB-NAV VISIBLE */
    display: block;
}

nav ul li .main-sub-nav li {
    position: relative;
    height: 40px;
    display: block;
    padding: 0;
    margin: 0;
    border-top: 1px solid #fff;
    border-right: none;
    border-bottom: 1px solid #f2f2f2;
    border-left: 1px solid #fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:37:57.073

问题是您错误地使用了定位。

试试这个方法。我评论了一些变化。

```
.row.margin-bottom-15.nav-container { /* Remove overflow:hidden; so your dropdowns will be shown when they overflow. */}

nav .main-nav {
    /* removed position:absolute; */
    display: block;
    width: 100%;
    height: 40px;
    padding: 0;
    margin: 0;
    border: 1px solid #fff;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

nav ul > li {
    position: relative; /* Add position:relative; so you can absolute position dropdowns */
    display: inline-block;
    height: 40px;
    padding: 0;
    margin: 0 0 0 -4px;
}

.main-sub-nav { 
    position: absolute;
    display: none;
    z-index: 1;
    width: 200px;
    height: auto;
    top: 100%;
    left: 0;
    border: 1px solid #d4d4d4;
    background: #f6f6f6;
}

nav ul > li:hover > .main-sub-nav { 
    display: block;
}

nav ul li .main-sub-nav li {
    position: relative;
    height: 40px;
    display: block;
    padding: 0;
    margin: 0;
    border-top: 1px solid #fff;
    border-right: none;
    border-bottom: 1px solid #f2f2f2;
    border-left: 1px solid #fff;
} 
```

让我知道它是否有帮助。

# php - 结合 RGB 和灰度颜色

> ID：14533104
> 
> 赞同：1
> 
> 时间：2013-01-26T02:08:50.690
> 
> 标签：php, css, colors, gradient, grayscale

我正在寻找一种将 RGB 颜色与灰度颜色相结合的方法。

我正在研究一个渐变生成器，它使用存储的颜色和模板（大多数供应商的预制样式属性）来创建 CSS3 渐变。我确信他们是一个简单的解决方案，但我似乎找不到它。我不是在寻找任何人为我制作自定义功能，我只需要知道如何制作该功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:45:27.637

您的一般方法可能包括三个部分：

1.  将 RGB 颜色转换为 HSL。
2.  保持色调和饱和度，但应用所需灰度颜色的亮度。
3.  将此 HSL 三元组转换回 RGB。

维基百科有[一个很棒的关于 HSL 颜色空间的页面，包括转换公式](http://en.wikipedia.org/wiki/HSL_color_space)。[Michael Jackson](http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript) 使用此信息创建了一些 JavaScript 转换函数*（是的，我是认真的）*：

## `rgbToHsl(r,g,b)`

```
/**
 * Converts an RGB color value to HSL. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes r, g, and b are contained in the set [0, 255] and
 * returns h, s, and l in the set [0, 1].
 *
 * @param   Number  r       The red color value
 * @param   Number  g       The green color value
 * @param   Number  b       The blue color value
 * @return  Array           The HSL representation
 */
function rgbToHsl(r, g, b){
    r /= 255, g /= 255, b /= 255;
    var max = Math.max(r, g, b), min = Math.min(r, g, b);
    var h, s, l = (max + min) / 2;

    if(max == min){
        h = s = 0; // achromatic
    }else{
        var d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
    }

    return [h, s, l];
} 
```

## `hslToRgb(h,s,l)`

```
/**
 * Converts an HSL color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes h, s, and l are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param   Number  h       The hue
 * @param   Number  s       The saturation
 * @param   Number  l       The lightness
 * @return  Array           The RGB representation
 */
function hslToRgb(h, s, l){
    var r, g, b;

    if(s == 0){
        r = g = b = l; // achromatic
    }else{
        function hue2rgb(p, q, t){
            if(t < 0) t += 1;
            if(t > 1) t -= 1;
            if(t < 1/6) return p + (q - p) * 6 * t;
            if(t < 1/2) return q;
            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
            return p;
        }

        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        var p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
    }

    return [r * 255, g * 255, b * 255];
} 
```

既然您说您不是在寻找任何人来为您制作自定义函数，我相信您会发现将这些函数改编为 PHP 并根据您的需要利用它们不会有什么问题。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:10:26.580

您可以用灰度颜色的亮度减去 RGB 通道。

在 JavaScript 中：

```
var grey = {r:123,g:123,b:123};
var color = {r:216,g:205,b:120};

var clamp = function(a,b,x){return Math.min(Math.max(a,x),b);}
var mixed = {
    r:clamp(0,255,color.r-(255-grey.r)),
    g:clamp(0,255,color.g-(255-grey.g)),
    b:clamp(0,255,color.b-(255-grey.b))
};// the final combined color. 
```

希望这可以帮到你。

# report - 带有公司标题的 openerp 报告

> ID：14533110
> 
> 赞同：1
> 
> 时间：2013-01-26T02:09:50.423
> 
> 标签：report, openerp

我正在尝试使用公司标题制作报告，但它不起作用，报告工作正常但我没有任何公司标题，这是我的代码： *report.xml*：

```
<report id="tracker_Labels" 
        model="noc.trajet" 
        name="noc.trajet" 
        string="Tracker Labels" 
        xml="module_coll/report/tracker_label.xml"
        xsl="module_coll/report/tracker_label.xsl" 
        header="True"/> 
```

tracker_label.xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
<xsl:import href="../../base/report/corporate_defaults.xsl" />
<xsl:template match="/">
    <xsl:call-template name="rml" />
</xsl:template> <!-- CONTENT -->
</xsl:stylesheet> 
```

问候，

# html - 使用jQuery将事件绑定到动态添加到DOM的元素

> ID：14533116
> 
> 赞同：4
> 
> 时间：2013-01-26T02:10:34.687
> 
> 标签：html, dom, jquery

我正在向 DOM 动态添加一些元素。我想使用`.on()`jQuery 的功能来操纵这些元素的行为。但不知何故，DOM 并没有`.on()`为动态添加的元素触发事件。

这是显示示例的 JS Fiddle - [http://jsfiddle.net/jYQ2D/1/](http://jsfiddle.net/jYQ2D/1/)

当我单击“在 HTML 中动态添加”按钮时，它应该显示警报消息，但它没有显示。

知道为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T02:13:21.887

委派`.on`不是那样工作的。您必须调用`.on`元素，然后使用第二个参数作为委托选择器：

```
$(document).on("click", "#dyna", function() { 
```

[http://jsfiddle.net/jYQ2D/2/](http://jsfiddle.net/jYQ2D/2/)

[文档](http://api.jquery.com/on/)。另请注意，只能有一个`#dyna`元素。

# angularjs - 资源的斜线斜线

> ID：14533117
> 
> 赞同：34
> 
> 时间：2013-01-26T02:10:40.827
> 
> 标签：angularjs

我的 api 需要用于 api 调用的斜杠。我想知道如何用角度来解决这个问题。

所以我需要能够访问`/tasks/`或`/tasks/xxxx/.` 我试图通过以下方式进行：

```
angular.module('taskServices', ['ngResource']).
        factory('Tasks', function($resource){
            return $resource('/tasks/:task_id/', {}, {
                 query: {method:'GET', 
                         params:{},
                         isArray:true}
            });
 }); 
```

和一个

```
$scope.tasks = Tasks.query(); 
```

但它会导致一个`/tasks`或一个`tasks/xxx`查询。

`/tasks/`我怎么能强迫它永远存在`/tasks/xxx/`

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-06-10T13:02:02.790

这似乎已经修复：[https ://github.com/angular/angular.js/pull/5560](https://github.com/angular/angular.js/pull/5560)

您现在可以这样配置它：

```
app.config(function($resourceProvider) {
  $resourceProvider.defaults.stripTrailingSlashes = false;
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-26T11:19:20.307

[在这行](https://github.com/angular/angular.js/blob/69be39fccfceae13c4850e1dcf097fcd7d9ce395/src/ngResource/resource.js#L329)AngularJS 源代码中，尾部斜杠被显式删除。我不完全确定此代码背后的基本原理是什么，但已经为此打开了一个问题：[https ://github.com/angular/angular.js/issues/992](https://github.com/angular/angular.js/issues/992)

如上述问题所述，`$resource`工厂非常适合符合特定规范的 RESTful 端点。虽然`$resource`与符合本规范的后端交谈会做得很好，但它有一些限制，可能会将它排除在不遵守`$resource`. 在这种情况下，最好的方法是切换到使用`$http`此问题中指出的较低级别的服务：[从服务器获取数据的推荐方式](https://stackoverflow.com/q/11850025/1418796)

`$http`是一项非常强大且灵活的服务，允许完全控制 URL、发送的参数等。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-19T06:49:44.617

在 url 模板的最后添加一个空格在这里有效（使用 angular 1.2.0 测试）：

```
{url: '/user/:id/ '} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-21T09:12:07.970

添加 2 个反斜杠来转义 URL 上的尾部斜杠在 Chrome 和 Safari 上对我有用。

然而，Firefox 认为从 URL 中删除尾部斜杠并将正斜杠转义为 %5C...great 的反斜杠编码是一个好主意：-) 所以在上面的示例中，您会得到[http://example .com/controller/save%5C](http://example.com/controller/save%5C)，然后在服务器上执行 404。

我在我的项目中使用 Django+TastyPie 并且需要 URL 上的尾部斜杠，我将寻求修改 ngResource 而不是将所有内容都降为 $http 作为最低公分母。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-08T10:55:40.153

对于使用[django-rest-framework 的](http://www.django-rest-framework.org/)AngularJS 客户端，只需使用[angular-django-rest-resource](https://github.com/blacklocus/angular-django-rest-resource)。工作得很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-10T11:04:56.283

可以对所有或特定 url 使用 http 拦截器，例如 api url：

```
app.factory('myHttpInterceptor', function ($q) {
    return {
        'request': function(config) {
            if (config.url.indexOf('/api/') != -1 && config.url.slice(-1) != '/') {
                config.url += '/';
            }
            return config || $q.when(config);
        }
    };
});

app.config(function($httpProvider) {
    $httpProvider.interceptors.push('myHttpInterceptor');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-02T00:46:47.193

作为解决此问题的方法，直到/如果他们更改了 AngularJS 源，我设置了一个 .htaccess 重写规则，为所有传入网络服务器的请求添加一个尾部斜杠。

```
RewriteCond %{REQUEST_URI} !(/$|\.)
RewriteCond %{REQUEST_METHOD} GET
RewriteRule (.*) %{REQUEST_URI}/ [R=301,L] 
```

这种方法的缺点：

*   RESTful 调用的网络流量被 301 重定向，因此您看到请求被发送了两次
*   这仅适用于 GET 请求（请注意我的示例中的限制），如果重写接收 POST、DELETE、PUT 请求和重定向，它会作为相同 URL 的 GET 请求，这当然可能不是您想要的，因为你失去了你的有效载荷。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-13T20:48:30.233

在编写最终 url 之前，我可以通过将其添加到 ngResource 来解决 Firefox 编码问题：

```
url = url.replace(/\\/,"/"); 
```

这允许 Chrome/Safari 的斜线转义修复在 Firefox 上运行良好。

```
app.factory('Things', function($resource){
        return $resource('/api/v1/thing\\/', {}, {
              query: {method:'GET', params:{},isArray:true}});
        }); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-05-20T22:26:16.730

文森特对尾部斜杠的转义（在 URL 的末尾添加两个反斜杠和一个正斜杠 (http://example.com/controller/save\\/)）对我有用。

# google-apps-script - 使用 Google Apps 脚本设置自定义电子表格菜单项的样式

> ID：14533122
> 
> 赞同：1
> 
> 时间：2013-01-26T02:11:18.273
> 
> 标签：google-apps-script, google-sheets

我在 Google 表格上有一个自定义菜单：

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var csvMenuEntries = [{name: "Save as CSV file", functionName: "saveAsCSV"}];
  ss.addMenu("Save New Emails", csvMenuEntries);    
} 
```

我想为我创建的菜单设置样式。

这是可能的吗？如何去做？

我真正想做的就是为按钮设置自定义颜色或背景以使其脱颖而出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T13:36:29.077

这不受支持，但您可以在菜单条目的名称中添加一些 Unicode 符号，以便它们从其他选项中脱颖而出。

该站点中的大多数符号都有效： http: [//copypastecharacter.com/](http://copypastecharacter.com/)

这就是我用来突出显示一些帮助菜单条目的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T03:37:14.313

我认为当前的 API 不支持这一点。

# c - 局部变量分配在哪里？堆还是栈？

> ID：14533134
> 
> 赞同：6
> 
> 时间：2013-01-26T02:12:52.473
> 
> 标签：c, memory, segmentation-fault, heap-memory, stack-memory

[http://www-ee.eng.hawaii.edu/~tep/EE160/Book/chap14/subsection2.1.1.8.html](http://www-ee.eng.hawaii.edu/~tep/EE160/Book/chap14/subsection2.1.1.8.html) 这个页面说局部变量和传递的参数是在堆栈上分配的，所以我尝试了：

```
#include <stdio.h>
#include <stdlib.h>
#define A 2000000
#define B 2

typedef struct {
    int a[A][A];
} st;

void fun(st s){}

void main()
{
    st s;
    //fun(s);
} 
```

编译运行后没有报错。但是当我去注释时`//fun(s)`，然后 SIGSEGV 被抓住了。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T02:18:19.297

> 局部变量分配在哪里？堆还是栈？
> 
> 这个页面说局部变量和传递的参数是在堆栈上分配的

确切地。

> 但是当我去注释 //fun(s) ，然后 SIGSEGV 被抓住了。谁能告诉我为什么？

堆栈上的内存比堆上的内存更有限¹。您正在堆栈上分配一个 2000000x2000000 数组，然后将其传递给一个函数。这很可能会超出可用的堆栈空间，从而导致分段错误。

至于为什么注释掉函数调用时不会发生分段错误。首先，正如 Jonathan Leffer 指出的那样，编译器可能会`s`完全优化掉，因为它没有被使用。但即使没有，您也可能不会遇到段错误，因为在堆栈上分配内存仅意味着递增堆栈指针。并且在大多数实现本身永远不会导致分段错误。只有当您尝试访问分配的内存并且系统意识到您超出了堆栈的边界（在这种情况下也是整个内存）时，才会发生分段错误。

¹尽管在这种情况下并没有什么不同，因为正如 slugonamission 指出的那样，该数组占用了 16TB，因此也会超过堆上的可用内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T02:29:29.820

此外，这是一个很好的例子，为什么你只通过值传递函数参数，而通常你通过引用传递参数：

```
#include <stdio.h>
#include <stdlib.h>
#define A 2000000
#define B 2

typedef struct {
    int a[A][A];
} st;

void fun(st *s){}

void main()
{
    st s;
    fun(&s);
} 
```

我认为它根本不会运行，因为它需要 4TB 的堆栈内存。由于编译器转储了未使用的变量并且根本没有在运行时声明，因此它可以`//fun(s)`在您的代码中顺利编译和运行。`s`

# math - 如何计算相机的 z 距离以在 3D 空间中以 100% 的原始比例查看图像

> ID：14533135
> 
> 赞同：4
> 
> 时间：2013-01-26T02:12:54.977
> 
> 标签：math, 3d, three.js, linear-algebra

如何计算与 3D 空间中的对象（本例中为图像）的相机距离，以使图像处于其原始像素宽度。

考虑到相机的纵横比、fov 和图像的原始宽度/高度（以像素为单位），我是否正确地假设这是可能的？

（如果相关，我在这个特定实例中使用 THREE.js）。

感谢任何可以帮助或引导我走向正确方向的人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-13T18:12:24.500

感谢大家的所有投入！

在进行了一些挖掘，然后弄清楚这一切如何适合我试图用 THREE.js 解决的确切问题之后，这是我在 JavaScript 中提出的答案，作为以原始比例显示事物的目标 Z 距离：

```
var vFOV = this.camera.fov * (Math.PI / 180), // convert VERTICAL fov to radians

var targetZ = window.innerHeight / (2 * Math.tan(vFOV / 2) ); 
```

我试图找出将哪一个标记为答案，但我将所有这些都组合到了这个解决方案中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:33:30.917

三角函数：

一条长度为 l 的线段与视图平面成直角，并且垂直于它的距离为 n 将在相机上对角 arctan(l/n) 度。您可以通过简单的三角函数得出该结果。

因此，如果您在直线方向上的视野是 q，相当于 p 个像素，那么您最终将占据`p*arctan(l/n)/q`像素。

因此，使用 y 作为输出像素数：

```
y = p*arctan(l/n)/q
y*q/p = arctan(l/n)
l/tan(y*q/p) = n 
```

线性代数：

在具有 90 度视野和 2w 像素宽的视口的相机中，投影到屏幕空间中相当于：

```
x' = w - w*x/z 
```

当垂直时，屏幕上一条线的长度是两个这样的 x 之间的差，因此根据正常的关联性和交换性规则：

```
l' = w - w*l/z 
```

因此：

```
w - l' = w*l/z
z = (w - l') / (w*l) 
```

如果您的视野实际上是 q 度而不是 90 度，那么您可以使用余切来适当地缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:45:11.087

在您[最初的问题](https://stackoverflow.com/questions/14519412/getting-the-real-screen-width-in-pixels-of-a-div-image-using-three-js-and-the-cs)中，您说您正在使用 css3D。我建议您执行以下操作：

设置一个 fov = 1..179 度的正交相机，其中left = screenWidth / 2，right = screenWidth / - 2，top = screenHeight / 2，bottom = screenHeight / - 2。近平面和远平面不影响CSS3D渲染据我所知，经验。

```
camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);
camera.fov = 75; 
```

现在您需要计算相机和物体之间的距离，这样当使用上述设置的相机投影物体时，物体在屏幕上具有 1:1 的坐标对应关系。这可以通过以下方式完成：

```
var camscale = Math.tan(( camera.fov / 2 ) / 180 * Math.PI);
var camfix = screenHeight / 2 / camscale; 
```

1.  将您的 div 放置到位置：x、y、z
2.  将相机的位置设置为 0, 0, z + camfix

这应该为您提供与渲染结果和 css / div 样式中的像素值的 1:1 坐标对应关系。请记住，原点在中心，对象的位置是对象的中心，因此您需要进行调整以实现例如左上角的坐标规格

```
object.x = ( screenWidth - objectWidth ) / 2 + positionLeft
object.y = ( screenHeight - objectHeight ) / 2 + positionTop
object.z = 0 
```

我希望这会有所帮助，我一直在为同样的事情苦苦挣扎（精确控制 css3d 场景），但设法弄清楚正交相机 + 视口大小调整到对象的距离起到了作用。不要改变相机旋转或其 x 和 y 坐标，只需调整 z 即可。

# android - android浏览器中的HTML5日期输入

> ID：14533136
> 
> 赞同：2
> 
> 时间：2013-01-26T02:13:00.653
> 
> 标签：android, html, date, browser

我正在为 android 用户构建一个网页，我使用日期表单控件来允许用户输入日期，但对于大多数设备，它不会弹出原生日期选择器，但对于像 Note2 这样的一些三星设备，它可以显示本机日期选择器。

我想知道这与android系统版本有关吗？或与特定的android设备有关？如何检测当前用户是否具有显示日期选择器的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:04:55.913

现在对 HTML5 <input type="date"> 的支持程度非常不同，所以我建议使用 jQuery/jQueryUI DatePicker 作为更可靠的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T21:39:21.767

看看[How to make the HTML5 input type 'date' trigger the native datepicker on Android?](https://stackoverflow.com/questions/16865378/how-to-make-the-html5-input-type-date-trigger-the-native-datepicker-on-android#comment24327844_16865378) 我能够找到一种在 Web 应用程序中获得原生 android datepicker 体验的方法。

# php - 已弃用：函数 eregi()

> ID：14533137
> 
> 赞同：0
> 
> 时间：2013-01-26T02:13:01.233
> 
> 标签：php

> **可能重复：**
> [不推荐使用函数 eregi()](https://stackoverflow.com/questions/5700806/function-eregi-is-deprecated)

你好我收到这个错误

已弃用：函数 eregi() 在第 4 行的 /home/u578804202/public_html/includes/functions.php 中已弃用

这是我的代码：

```
if(eregi($file,$_SERVER['REQUEST_URI'])) {
    die("Sorry but you cannot access this file directly for security reasons.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:17:32.397

正如您应该的那样，它是一个已弃用的旧功能，`stristr()`而是用户

```
if(stristr($_SERVER['REQUEST_URI'],$file)) {
    die("Sorry but you cannot access this file directly for security reasons.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:26:02.230

您应该`preg_match`改用：

```
if (!preg_match("~{$file}~i,", $_SERVER['REQUEST_URI'])) {
    die("Sorry but you cannot access this file directly for security reasons.");
} 
```

# android - 如何设置 UnderlineSpan 的颜色？

> ID：14533142
> 
> 赞同：11
> 
> 时间：2013-01-26T02:13:40.293
> 
> 标签：android, android-edittext, textview

这个问题是我上一个问题的后续：[如何突出显示文本，如 Android 拼写检查器？](https://stackoverflow.com/questions/14530546/how-to-highlight-text-like-android-spell-checker)

我正在使用 UnderlineSpan 为 EditText 中的文本添加下划线，但我需要下划线为**IN COLOR**，就像拼写检查器的屏幕截图一样：

![在此处输入图像描述](../Images/f36ec9dc30d7591be23852eb4652d94a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-24T15:03:40.693

不幸的是，您不能仅使用 Span 来做到这一点——没有公共方法可以满足您的要求。有一种方法可以在 TextPaint 中设置独立于文本颜色的下划线颜色（您可以在 SuggestionSpan 的源代码中看到它），但[它是隐藏的](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/text/TextPaint.java#38)。

如果您可以访问 EditText，则可以自己处理 Span 并绘制下划线，否则您将不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-24T09:17:57.873

这是您可以用来设置文本下方线条颜色的功能

```
public void addUnderLineLink(TextView mTextView) {
    if (mTextView != null) {
        SpannableString content = new SpannableString(mTextView.getText().toString());
        UnderlineSpan us=new UnderlineSpan();
        TextPaint tp=new TextPaint();
        tp.setColor(ContextCompat.getColor(getContext(),R.color.white));
        us.updateDrawState(tp);
        content.setSpan(us, 0, mTextView.getText().toString().length(), 0);
        mTextView.setText(content);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T00:37:22.233

This is how i made it work

```
Spanned part_1 = Html.fromHtml(getString(R.string.part1));
Spanned part_2 = Html.fromHtml("<u><font color='#2eb6f0'>Text in blue</font></u>");
Spanned part_3 = Html.fromHtml(getString(R.string.part3));
Spanned output = (Spanned) TextUtils.concat(part_1, part_2, part_3);

textview.setText(output, TextView.BufferType.SPANNABLE); 
```

# statistics - 取变量的对数是什么意思？

> ID：14533143
> 
> 赞同：-1
> 
> 时间：2013-01-26T02:13:47.817
> 
> 标签：statistics, logarithm, normal-distribution

关于取变量对数的问题（统计问题）

假设您有一个条形图显示示例“按人口计算的计算机订单成本”的数据，并且您正在尝试分析数据并找到分布。该信息不表示任何内容，因此您取变量的对数，然后该图类似于正态分布。我知道正态分布基本上意味着**平均值**，但是取信息的对数意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:44:56.670

您似乎在描述对数正态分布：如果随机变量的对数呈正态分布，则称其来自对数正态分布。

在实践中，这可以描述值不能低于零的过程，并且大多数人口接近左侧（右偏度）。例如：工资、房价、骨折、女朋友的数量都可以用对数正态分布合理地建模。

例如：假设年轻人平均有 2.5 个女朋友。少数人从未拥有过；你不能有“负数”的女朋友，有几个混蛋有 25 个。但是，大多数年轻人会有一到三个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:32:01.713

如果您将 x 的值显示为它们的 log(x)，那么图表中的线是一条直线，此时值呈指数增长。这是一个快速检查值是否呈指数增长的统计技巧。

# php - 名为订单的列 - 大数据库，我应该如何处理？

> ID：14533144
> 
> 赞同：0
> 
> 时间：2013-01-26T02:14:08.263
> 
> 标签：php, sql, sqlite, keyword

> **可能重复：**
> [SQLite 中是否有保留字？](https://stackoverflow.com/questions/2791611/are-there-any-reserved-words-in-sqlite)

我有一个大数据库（对于那些知道它的人来说，veekun 的 pokedex）并且一个表有一个名为“order”的列。这是为了排序，我正在尝试`ORDER BY`该列，但这是一个问题，因为`ORDER`它当然是一个保留字。我看到的两个选项是

1.  重命名此列（但我想尽可能避免修改数据库）
2.  以某种方式解决这个问题

那么，在 1 的情况下，我将如何重命名列而不过多地弄乱数据库？在 2 的情况下，我无法想象我能做什么，但也许有一个我不知道的技巧来解决这个问题。

我正在使用 SQLite 和 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:17:43.513

一些数据库支持```转义字符，其他数据库使用`[…]`. 查找 SQLlite，它支持括号：

```
order by [Order] 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:18:38.377

你只需要在 `backticks` 中包围关键字冲突

# c# - C#如何缩短这个长的超载do while语句

> ID：14533147
> 
> 赞同：2
> 
> 时间：2013-01-26T02:14:17.653
> 
> 标签：c#, winforms, visual-studio-2012

我制作了一个井字游戏，并且正在制作另一个代码更少的版本。无论如何...这是我的代码...我在 do while 语句之间使用了一些代码，但是是的...

```
 var rc = new Random();
    do
    {
        storeRI = rc.Next(1, 9);

        if (storeRI == 1 & button1.Text == "")
        {
            button1.Text = "O";
            Turn = 1;
            TestWin();
            break;
        }
        else if (storeRI == 2 & button2.Text == "")
        {
            button2.Text = "O";
            Turn = 1;
            TestWin();
            break;
        }

    } while (Turn == 2 & button1.Text == "" | button2.Text == "" | button3.Text == "" | button3.Text == "" | button4.Text == "" | button5.Text == "" | button6.Text == "" | button7.Text == "" | button8.Text == "" | button9.Text == "");
}
else
{
    MessageBox.Show("It's a draw");
} 
```

我主要想专注于这段代码......缩短...... :)

```
 } while (Turn == 2 & button1.Text == "" | button2.Text == "" | button3.Text == "" | button3.Text == "" | button4.Text == "" | button5.Text == "" | button6.Text == "" | button7.Text == "" | button8.Text == "" | button9.Text == ""); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:18:25.393

从您的各个按钮创建一个按钮列表，然后将其更改为

```
while(Turn==2 && buttons.Any(b => b.Text == "")) 
```

通常有 9 个按钮，它们可能应该放在一个数组或列表中以便于访问：

```
Button[] buttons = new Button[] {button1, button2, button3, ... } ; 
```

然后你可以访问它`buttons[0]`而不是`button1`等。

我会在您的表单初始化程序中执行此操作，而不是使用按需执行此操作的函数。

# jquery - 为 jquery 插件实例创建唯一 ID？

> ID：14533148
> 
> 赞同：1
> 
> 时间：2013-01-26T02:14:26.697
> 
> 标签：jquery, jquery-plugins

我创建了一个 jQuery 插件，它监听窗口的模糊事件。

我想在插件本身内部创建一个唯一的 id，以便在销毁插件实例时可以[关闭侦听器。](http://api.jquery.com/off/)我应该如何创建这些 un​​iqueIds？

下面的示例显然不起作用——destroy 方法中的 incrementId 总是从最后一个插件实例中删除模糊。

```
 (function( $ ) {

    var incrementId = 0;

    var methods = 
    {
        init : function( options ) {
            var that = this;
            incrementId += 1;
            $(window).on( "blur.pleaseKillMe" + incrementId, function( e ) {
                that.css( "color", "red" );
            });
        },

        destroy : function( ) {
            console.log( "and... " + incrementId );
            $(window).off( "blur.pleaseKillMe" + incrementId );
        }
    };

    $.fn.pleaseKillMe = function( method )
    {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        }
        else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        }
        else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.p5shrinkwrap' );
        }
    };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:20:44.880

```
incrementId += 1;
this.data('id', incrementId);
...
$(window).off('blur.pleaseKillMe' + this.data('id'); 
```

# java - 使用提交按钮将项目添加到 Swing java 中存储

> ID：14533155
> 
> 赞同：0
> 
> 时间：2013-01-26T02:15:49.077
> 
> 标签：java, swing, jframe

我创建了一个存储人员实例记录的商店。当从 CLI 添加员工时，它可以工作并且存储增量，当使用 swing 和 CLI 进行调试时，我可以看到新记录，但增量没有完成！

```
submit.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e)
        {
            Store recordStore;
            recordStore = new Store(1);

                // here add the submitting text
                Employee em = new Employee("mn",'M', new Date(18,12,1991), "025", new Date(2,5,2009));

                if (!Store.isFull())
                    {

                    recordStore.add(em);
                    recordStore.displayAll();
                    System.out.println("Current size of store is " + Store.getCount());
                    }

                else
                {   JOptionPane.showMessageDialog(null, "The store seems to be full, please save it, and create a new one!"); } 
```

店铺添加功能

```
 public void add(Person p)
{
    // person p is added to array

    list[count++] = p;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:28:55.907

我怀疑您的问题是每次运行 ActionListener 代码时您都在创建一个新的 Store 实例。也许您想在类中创建一个 Store 实例，然后在 ActionListener 中添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:48:26.540

```
public void add(Person p)
{
  // person p is added to array
  list[count++] = p;
} 
```

如果在类中定义了上述函数，`Store`那么您正在初始化一个新实例

```
Store recordStore;
recordStore = new Store(1); 
```

每次。因此，您的列表计数将始终为 1。因此`Hovercraft Full Of Eels`建议将其移到`ActionListener`课堂之外并相应地更改代码。

或者使用`static count`存储`records of person instances`您添加的计数的 a 。

# android - 进度条 + 主线程 UI 更新等待线程完成（Android Java）

> ID：14533163
> 
> 赞同：1
> 
> 时间：2013-01-26T02:16:54.370
> 
> 标签：android

我一直在为我的 Android 应用程序创建进度条获得帮助。这里有很多帮助！我遇到了一个问题，虽然我很难解决。当应用程序尝试从联网计算机下载文件时，我显示了一个进度条。这工作得很好，但是我需要更新我的 UI 以防发生错误。我无法更新线程内的 UI，我想从 getRaceResultsHandler 更新 UI。不幸的是，它在线程完成之前执行该代码。我尝试了一些没有运气的事情。如果有人可以提供帮助，我有一个代码示例，下面有我的评论。

```
public void getRaceResultsHandler (View view) {

       dialog = new ProgressDialog(this);
       dialog.setCancelable(true);
       dialog.setMessage("Attempting to transfer race files. Please wait...");
       // Set progress style to spinner
       dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
       // display the progressbar
       dialog.show();

       // create a thread for downloading the files

       Thread background = new Thread (new Runnable() {
           public void run() {

                   //The Code here to execute the file download from the networked computer....

                  //Dismiss the progress bar because the download is either completed or failed...
                  dialog.dismiss();                         
           }        
        });
        // start the background thread
        background.start();

              //All Other Code Goes here to update the UI. Shows either an error message or a success based on the results of the download.
//My problem is that this code executes before the background thread is completed. I need it to wait until the thread is completed. 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:19:44.397

尝试使用关闭该对话框`Handler`

```
Handler h = new Handler(); // Create this object in UI Thread

Thread background = new Thread (new Runnable() {
   public void run() {
     h.post(new Runnable()
     {

       public void run()
       {
         dialog.dismiss();
       }

     };
   }); 
```

你应该使用`AsyncTask`而不是正常`Thread`

```
AsyncTask<Void,Void,Void> aTask = new AsyncTask<Void,Void,Void>()
{

  @Override
  public void onPreExecute()
  {
      // Setup some UI Objects
  }
  @Override
  public void onPostExecute(Void result)
  {
     dialog.dismiss();

  }

  @Override
  protected Void doInBackground(Void...params)
  {
     // your download stuff
     publishProgress(object) // <-- if you want to update the progress of your download task
  }

}); 
```

注意：我自己的没试过，我朋友的笔记本电脑里没有IDE

# c++ - 构造对象时出现“无法将参数从 '[classname](_cdecl *)(void)' 转换为 '[classname]'”错误

> ID：14533172
> 
> 赞同：3
> 
> 时间：2013-01-26T02:17:47.860
> 
> 标签：c++, visual-c++, constructor

注意：我使用的是 Visual Studio 2010。

这里有两个重要的类，日期和目录。

```
class Date
{
private:
    int month, day, year;
public:
    Date();
    Date(int month, int day, int year);
};

class Directory : public [Superclass]
{
private:
    File* fileContents[50];
    Directory* dirContents[5];
public:
    Directory();
    Directory(char* name, 
        long size, 
        Date dateCreated, 
        Date dateModified,
        Date dateAccessed,
        int attributes);
}; 
```

我在更远的地方定义了构造函数——`Date`构造函数就像你想象的那样工作。现在，我**真的**是 C++ 新手，所以我什至无法理解我收到的错误消息。如果我尝试使用默认构造函数`Directory`，我会收到以下错误消息：

```
error LNK2019: unresolved external symbol "class Directory __cdecl d(void)" (?d@@YA?AVDirectory@@XZ) referenced in function _main 
```

如果我尝试使用 3 个`Date`对象来实现它，请使用以下代码：

```
int main()
{
    Date d1();
    Date d2();
    Date d3();
    Directory d("Hello", 12, d1, d2, d3, 0);
    cout << d;
} 
```

这些是我的错误信息：

```
error C2664: 'Directory::Directory(char *,long,Date,Date,Date,int)' : cannot convert parameter 3 from 'Date (__cdecl *)(void)' to 'Date' 
```

智能感知：`no instance of constructor "Directory::Directory" matches the argument list`

编辑：因此，为了继续努力让我觉得零意义，VS 决定在`Date`创建三个参数`Date da[3]`并且构造函数的参数是`("Hello", 12, d[0], d[1], d[2], 0)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T02:25:02.920

根据标准

> 初始值设定项为空括号集的对象，即 ()，应进行值初始化。
> 
> [注意：由于初始化程序的语法不允许 ()，
> 
> X一();
> 
> 不是类 X 的对象的声明，而是不带参数并返回 X 的函数的声明。在某些其他初始化上下文（5.3.4、5.2.3、12.6.2）中允许使用 () 形式。——尾注]

因此，您需要按如下方式更改您的声明

```
int main()
{
    Date d1;
    Date d2;
    Date d3;
    Directory d("Hello", 12, d1, d2, d3, 0);
    cout << d;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T03:05:52.730

当涉及到变量声明时，C++ 有一个相当烦人的极端情况。

以下是合法的 C++：

```
int main() {
    int foo(int x);
    return foo(42);
} 
```

它只是设置了一个在 .`foo`范围内命名的函数的声明`main`。要让程序运行，`foo`需要在某个地方定义，否则会出现链接错误。

现在，考虑

```
Date foo(); 
```

`foo`这是不带参数并返回`Date`对象的函数的前向声明的语法。但是，是使用单个整数作为参数初始化的类型`Date foo(42);`变量的声明。您的编译器通常会根据参数是类型还是表达式来确定您是否需要变量或函数，但在零参数情况下（默认构造函数），编译器无法判断，因此*默认为函数声明*（因为标准是这样说的）。`foo``Date`

 *所以，通过写

```
Directory d(); 
```

您前向声明了一个`d`不带任何内容并返回的函数`Directory`。当您链接程序时，您会收到一条错误消息，指出该函数`class Directory __cdecl d(void)`（称为`d`不接受任何内容并返回 a的函数`Directory`）未定义，因为 C++ 仅看到此函数的前向声明。

为了解决这个问题，在 C++ 中，编写

```
Directory d; 
```

将创建一个类型变量`Dictionary`并使用默认构造函数对其进行初始化。*

# java - 无法在弹出 JFrame 中编辑 JTextField

> ID：14533179
> 
> 赞同：1
> 
> 时间：2013-01-26T02:18:27.950
> 
> 标签：java, swing, popup, jframe, jtextfield

好的，我在弹出 JFrame 中的文本字段有问题...我实际上有 2 个单独的程序，一个是游戏，一个是地图编辑器。我决定让游戏有一种内置的地图编辑器，所以我将地图编辑器中的类添加到我游戏项目的新包中，进行了一些小调整（比如从地图编辑器中删除 main() 方法)，然后开始工作。地图编辑器作为新的 JFrame 弹出，当我单击“新建”按钮时，它会打开一个新的 JFrame，其中包含几个 TextField 和一个请求新地图宽度和高度的按钮。我无法编辑文本字段中的值......而且我不知道为什么......弹出代码：

```
private class newMap extends JFrame implements ActionListener{
    JLabel wlbl = new JLabel("Map width: ");
    JTextField w = new JTextField("12");
    JLabel hlbl = new JLabel("Map height: ");
    JTextField h = new JTextField("8");
    JButton create = new JButton("Create map");
    public newMap(Component p){
        super("New Map");
        setSize(100,75);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setResizable(false);
        setLayout(null);
        setVisible(true);
        int bw = 96, bh = 24, s = 4, x = s;

        wlbl.setBounds(x,s,bw,bh);
        x+=s+bw;
        add(wlbl);
        w.setBounds(x,s,bw,bh);
        x+=s+bw;
        add(w);
        hlbl.setBounds(x,s,bw,bh);
        x+=s+bw;
        add(hlbl);
        h.setBounds(x,s,bw,bh);
        x+=s+bw;
        add(h);
        create.setBounds(x,s,bw,bh);
        x+=s+bw;
        create.addActionListener(this);
        add(create);

        setSize(getWidth()-this.getContentPane().getWidth()+x,
                getHeight()-this.getContentPane().getHeight()+s+s+bh);
        setLocationRelativeTo(p);
    }
    public void actionPerformed(ActionEvent e){
        try{
            mapBox.create(Integer.parseInt(w.getText()),Integer.parseInt(h.getText()));
        }catch(NumberFormatException ex){
            return;
        }
        dispose();
    }
} 
```

我显然已经尝试过 w.requestFocusInWidnow() 和 w.requestFocus() 之类的东西，对于框架和我在网上找到的其他一些解决方案也是如此，但没有一个对我有用。

**问题已解决：** 在解释了我的问题后，我意识到问题必须在游戏代码中的某个地方，可能在 JFrame 的类中，我注意到我做了一些奇怪的事情，而不是使用 KeyListener 实现来处理输入。（我以前尝试将游戏创建为 JApplet，但在 JApplet 上使用 Keylisteners 时遇到了问题）。我将我的 Main 类设为 KeyEventDispatcher 或类似的东西。感谢您的帮助，这是一个愚蠢的问题（我只是在错误的地方寻找解决方案）。

因此 KeyEventDispatcher 没有正确地将关键操作“分派”给其他组件。我刚刚回到传统的 KeyListener，因为它在 JFrame 中对我来说很好用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:22:59.790

我怀疑问题在于你如何调用这个新窗口，也许你有一个无限循环或其他冻结 Swing 事件调度线程或 EDT 的构造，使你的 GUI 无响应。如果您能创建并发布一个[SSCCE](http://sscce.org)供我们编译、测试、运行以及可能的修改和更正，我们会最清楚。

同样在我看来，您的代码还有其他重要但与您的主要问题无关的问题：

*   您不应该在应该使用 JOptionPanes 或 JDialogs 等对话框的地方使用 JFrames。
*   您应该避免使用绝对定位，而应使用布局管理器。
*   您应该努力创建符合 Java 命名标准的代码，包括以大写字母开头的类名称。当要求其他人阅读和理解您的代码并为您提供帮助时，这一点变得尤为重要。

例如，一些快速制作的示例代码：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

@SuppressWarnings("serial")
public class TestNewMap extends JPanel {
   private MapBox mapBox = new MapBox();
   private NewMap newMap = new NewMap(this);
   private HoverNewMap hoverNewMap = new HoverNewMap();

   public TestNewMap() {
      JPanel btnPanel = new JPanel(new GridLayout(1, 0, 5, 0));

      btnPanel.add(new JButton(new AbstractAction("Show Your NewMap") {

         @Override
         public void actionPerformed(ActionEvent evt) {
            newMap.setVisible(true);
         }
      }));
      btnPanel.add(new JButton(new AbstractAction("Show Hover's NewMap") {

         @Override
         public void actionPerformed(ActionEvent evt) {
            hoverNewMap.setMapWidth(mapBox.getWidthValue());
            hoverNewMap.setMapHeight(mapBox.getHeightValue());

            Object[] options = { "Create Map", "Cancel" };
            Object initialValue = options[0];
            int result = JOptionPane.showOptionDialog(TestNewMap.this,
                  hoverNewMap, "Get Map Dimensions",
                  JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null,
                  options, initialValue);
            if (result == 0) {
               try {
                  int w = hoverNewMap.getMapWidth();
                  int h = hoverNewMap.getMapHeight();

                  mapBox.create(w, h);
               } catch (NumberFormatException e) {
                  JOptionPane.showMessageDialog(TestNewMap.this,
                        "Please only enter int values", "Non-int Input Error",
                        JOptionPane.ERROR_MESSAGE);
                  hoverNewMap.setMapHeight(0);
                  hoverNewMap.setMapWidth(0);
               }
            }
         }
      }));

      int borderGap = 5;
      setBorder(BorderFactory.createEmptyBorder(borderGap, borderGap,
            borderGap, borderGap));
      setLayout(new BorderLayout(borderGap, borderGap));
      add(btnPanel, BorderLayout.NORTH);
      add(mapBox, BorderLayout.CENTER);
   }

   private static void createAndShowGui() {
      TestNewMap mainPanel = new TestNewMap();

      JFrame frame = new JFrame("TestNewMap");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

   private class MapBox extends JPanel {
      private static final int INIT_WIDTH = 12;
      private static final int INIT_HEIGHT = 8;
      private JTextField widthField = new JTextField(
            String.valueOf(INIT_WIDTH), 5);
      private JTextField heightField = new JTextField(
            String.valueOf(INIT_HEIGHT), 5);

      public MapBox() {
         add(new JLabel("Width:"));
         add(widthField);
         add(Box.createHorizontalStrut(10));
         add(new JLabel("Height:"));
         add(heightField);
      }

      public void create(int width, int height) {
         widthField.setText(String.valueOf(width));
         heightField.setText(String.valueOf(height));
      }

      public int getWidthValue() {
         return Integer.parseInt(widthField.getText());
      }

      public int getHeightValue() {
         return Integer.parseInt(heightField.getText());
      }

   }

   private class HoverNewMap extends JPanel {
      private JTextField mapWidth = new JTextField(5);
      private JTextField mapHeight = new JTextField(5);

      public HoverNewMap() {
         add(new JLabel("Width:"));
         add(mapWidth);
         add(Box.createHorizontalStrut(15));
         add(new JLabel("Height:"));
         add(mapHeight);

         setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
      }

      public void setMapWidth(int w) {
         mapWidth.setText(String.valueOf(w));
      }

      public void setMapHeight(int h) {
         mapHeight.setText(String.valueOf(h));
      }

      public int getMapWidth() throws NumberFormatException {
         int w = Integer.parseInt(mapWidth.getText());
         return w;
      }

      public int getMapHeight() throws NumberFormatException {
         int h = Integer.parseInt(mapHeight.getText());
         return h;
      }
   }

   private class NewMap extends JFrame implements ActionListener {
      JLabel wlbl = new JLabel("Map width: ");
      JTextField w = new JTextField("12");
      JLabel hlbl = new JLabel("Map height: ");
      JTextField h = new JTextField("8");
      JButton create = new JButton("Create map");

      public NewMap(Component p) {
         super("New Map");
         setSize(100, 75);
         setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
         setResizable(false);
         setLayout(null);
         // setVisible(true);
         int bw = 96, bh = 24, s = 4, x = s;

         wlbl.setBounds(x, s, bw, bh);
         x += s + bw;
         add(wlbl);
         w.setBounds(x, s, bw, bh);
         x += s + bw;
         add(w);
         hlbl.setBounds(x, s, bw, bh);
         x += s + bw;
         add(hlbl);
         h.setBounds(x, s, bw, bh);
         x += s + bw;
         add(h);
         create.setBounds(x, s, bw, bh);
         x += s + bw;
         create.addActionListener(this);
         add(create);

         setSize(getWidth() - this.getContentPane().getWidth() + x, getHeight()
               - this.getContentPane().getHeight() + s + s + bh);
         setLocationRelativeTo(p);
      }

      public void actionPerformed(ActionEvent e) {
         try {
            mapBox.create(Integer.parseInt(w.getText()),
                  Integer.parseInt(h.getText()));
         } catch (NumberFormatException ex) {
            return;
         }
         dispose();
      }
   }
} 
```

# ms-access - MS Access 表子窗体刷新

> ID：14533185
> 
> 赞同：1
> 
> 时间：2013-01-26T02:19:27.063
> 
> 标签：ms-access

每当我在付款下输入新数据时，我想刷新位于历史记录选项卡下的表格。单击“历史记录”选项卡时，我尝试添加 onclick 宏，但 Access 2010 中的新宏编辑器让我感到困惑。

如下图所示，我已经在 Payments 子表单中添加了第四个条目，而新条目未显示在 History 选项卡下的表格中。

我认为刷新或重新查询是要走的路，但我不知道如何设置它以使其工作。任何帮助，将不胜感激。 ![在此处输入图像描述](../Images/e4b47b1bef39d55d5f60554407e9bc8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:14:12.547

运行重新查询的最佳位置是付款子表单的更新后事件。

```
Private Sub Form_AfterUpdate()
    Me.Parent.HistorySubformConrolName.Form.Requery
End Sub 
```

确保使用子表单控件的名称，而不是包含的表单的名称。见[http://access.mvps.org/access/forms/frm0031.htm](http://access.mvps.org/access/forms/frm0031.htm)

创建事件： http: [//office.microsoft.com/en-us/access-help/about-events-and-event-procedures-HP005186744.aspx](http://office.microsoft.com/en-us/access-help/about-events-and-event-procedures-HP005186744.aspx)

在这种特殊情况下编辑：

```
Me.Parent.Payment_Info.Form.Requery 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-15T15:30:18.537

Me.qryListExpertsHistory_subform.Requery

' qryListExpertsHistory_subform（是嵌入的表单）

# java - 如何在选中 ListView 中的 ListItem 时设置标志，并在未选中时将其设置为关闭？

> ID：14533189
> 
> 赞同：0
> 
> 时间：2013-01-26T02:19:57.610
> 
> 标签：java, android, android-listview

我有一个 ListView 适配器，我在其中从 XML 编写 ListItems。我想在检查项目时标记并在未检查项目时取消标记。我正在使用一个数组来存储标志值。例如，如果我的 ListView 有四个列表项“红、蓝、绿、黄”。如果选中 Red 和 Green，则数组应更新为 [1, 0, 1, 0]，如果未选中，则应将其更新为 [0, 0, 0, 0]。下面是我的代码。我做错了什么，它没有显示所需的输出。有人可以调查一下并建议我更好的方法来解决它。谢谢！

```
ArrayAdapter<String> adapter;

    array =  getResources().getStringArray(R.array.facilities);
    strings1 = new ArrayList(Arrays.asList(array));

    TopicSelectionListAdapter topicSelectionListAdapter = new TopicSelectionListAdapter(
            second.this, R.layout.listrow, strings1);
    listView.setAdapter(topicSelectionListAdapter);
    listView.setItemsCanFocus(false);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    for(int i=0;i<strings1.size();i++){
        listView.setItemChecked(i, false);
    }

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position,
                long arg3) {
            CheckedTextView selectedItem = (CheckedTextView) view;
            boolean isChecked = selectedItem.isChecked();

            Log.e("TAG","item clicked position = " + position + " isChecked = " + isChecked);
            for(int i=0; i< strings1.size(); i++){
                if(!isChecked){
                    bArray[i]= 0;
                }
                else{
                    bArray[i]= 1;
                }

            }
            for(int i =0; i < bArray.length; i++){
                Log.e("TAG","boolean Array value = " + bArray[i]);
            }

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:37:50.927

我无法准确说出您的问题出在哪里，因为我不确定您没有得到您认为应该得到的输出，而且我看不到`bArray`声明的位置。但我可能会`LinkedHashMap`在这种情况下使用 a 。这保留了的顺序，`Map`您可以将该位置与列表中的位置匹配或按名称进行比较。检查或未选中该位置时，您可以相应地将其值设置为1或0。

**[这是关于喜欢的哈希图的文档](http://developer.android.com/reference/java/util/LinkedHashMap.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:41:04.950

这部分只是勾选你的每个部分`bArray`

```
 for(int i=0; i< strings1.size(); i++){
      if(!isChecked){
          bArray[i]= 0;
      }
      else{
         bArray[i]= 1;
      }
  } 
```

这样做的原因是，您只需擦除整个数组而不检查是否检查`bArray`了此特定事件的元素......这样做应该会产生更好的结果：

```
bArray[position] = isChecked?1:0; 
```

# mysql - 按一个元素出现的次数对表格进行排序

> ID：14533190
> 
> 赞同：-1
> 
> 时间：2013-01-26T02:20:02.273
> 
> 标签：mysql

## 桌子

```
id Category Name
1  Sports   name1
2  Food     name2
3  Sports   name3
4  Social   name4
5  TV       name5
6  Food     name6
7  Sports   name7
8  TV       name8 
```

如何查询 * 按提及次数最多的类别排序？结果应该是这样的：

```
Sports name1
Sports name3
Sports name7
Food name2
Food name6

and so. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:01:07.620

### 每个类别被提及的次数

```
SELECT category, COUNT(*) AS cat_count
  FROM anonymous_table
 GROUP BY category 
```

### 数据按要求排序

```
SELECT a.category, a.name
  FROM anonymous_table AS a
  JOIN (SELECT category, COUNT(*) AS cat_count
          FROM anonymous_table
         GROUP BY category
       ) AS c ON a.category = c.category
 ORDER BY c.cat_count DESC, a.name 
```

* * *

> 出于某种原因，它没有做这项工作。

我在 Informix 中尝试了上面的 SQL，它“有效”，但给出了一个意想不到但可以解释的答案：

```
Sports    name1
Sports    name3
Sports    name7
Food      name2
TV        name5
Food      name6
TV        name8
Social    name4 
```

没有什么可以将 Food 行组合在一起，而且名称上的排序确实迫使它们分开。因此，ORDER BY 子句需要有一个额外的条件：

```
SELECT a.category, a.name
  FROM anonymous_table AS a
  JOIN (SELECT category, COUNT(*) AS cat_count
          FROM anonymous_table
         GROUP BY category
       ) AS c ON a.category = c.category
 ORDER BY c.cat_count DESC, a.category, a.name; 
```

这给出了一个合理的结果：

```
Sports    name1     
Sports    name3     
Sports    name7     
Food      name2     
Food      name6     
TV        name5     
TV        name8     
Social    name4 
```

如果您想先看电视再想吃东西，您必须为此制定一些订购方案。在示例中，您可以按类别降序排序。在不同类别的准任意排序的一般情况下，您将添加一个类别表和一些排序列（可能是一个 ID，更可能与 ID 列分开），当其他标准是相同的：

```
CREATE TABLE Category(Name CHAR(10) NOT NULL PRIMARY KEY, Ordering INTEGER NOT NULL);
INSERT INTO Category(Name, Ordering) VALUES('Sports', 10);
INSERT INTO Category(Name, Ordering) VALUES('TV',     20);
INSERT INTO Category(Name, Ordering) VALUES('Food',   30);
INSERT INTO Category(Name, Ordering) VALUES('Social', 40);

SELECT a.category, a.name
  FROM anonymous_table AS a
  JOIN category        AS b ON a.category = b.name
  JOIN (SELECT category, COUNT(*) AS cat_count
          FROM anonymous_table
         GROUP BY category
       ) AS c ON a.category = c.category
 ORDER BY c.cat_count DESC, b.ordering, a.category, a.name; 
```

您仍然需要按类别排序以确保正确分组，因为 Category.Name 列上没有唯一约束（尽管您可以添加一个，然后可以`a.category`从 ORDER BY 子句中删除该术语）。

# c - 'c 接口和实现' (David Hanson) 代码安装

> ID：14533191
> 
> 赞同：0
> 
> 时间：2013-01-26T02:20:39.497
> 
> 标签：c, linux, gcc, ubuntu-11.04

我正在尝试安装本书附带的代码：[https ://sites.google.com/site/cinterfacesimplementations/](https://sites.google.com/site/cinterfacesimplementations/)

按照作者在这里给出的说明：http: [//cii.googlecode.com/svn/trunk/install.html](http://cii.googlecode.com/svn/trunk/install.html)

我的电脑在 32 位 i686 架构上安装了 ubuntu 11.04。按照作者对 32 位 linux 的说明进行操作，我尝试：

```
make CC='cc -DMAXALIGN=4' AS='cc -c -x assembler-with-cpp -traditional' 
```

其中 cc 是 gcc 版本 4.5.2，它给出以下警告和错误：

```
makefile:138: warning: overriding commands for target `maxalign'
makefile:135: warning: ignoring old    cc -DMAXALIGN=4 -g -Iinclude -c -o ap.o src/ap.c

In file included from src/thread.c:100:0:
/usr/include/i386-linux-gnu/asm/sigcontext.h:56:8: error: redefinition of ‘struct _fpreg’
/usr/include/bits/sigcontext.h:28:8: note: originally defined here
/usr/include/i386-linux-gnu/asm/sigcontext.h:61:8: error: redefinition of ‘struct _fpxreg’
/usr/include/bits/sigcontext.h:34:8: note: originally defined here
/usr/include/i386-linux-gnu/asm/sigcontext.h:67:8: error: redefinition of ‘struct _xmmreg’
/usr/include/bits/sigcontext.h:41:8: note: originally defined here
/usr/include/i386-linux-gnu/asm/sigcontext.h:71:8: error: redefinition of ‘struct _fpstate’
/usr/include/bits/sigcontext.h:50:8: note: originally defined here
/usr/include/i386-linux-gnu/asm/sigcontext.h:104:8: error: redefinition of ‘struct sigcontext’
/usr/include/bits/sigcontext.h:81:8: note: originally defined here
src/thread.c: In function ‘interrupt’:
src/thread.c:108:2: warning: ‘sigsetmask’ is deprecated (declared at /usr/include/signal.h:199)
make: *** [thread.o] Error 1 
```

不知道在这里做什么。同样令人费解的是/usr/include/i386-linux-gnu。因为如果我这样做

```
uname -m 
```

它打印 i686 而不是 i363。有什么想法吗？

干杯，吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:44:00.053

在 thread.c 的第 100 行——删除`#include <asm/sigcontext.h>`（或将其注释掉）。那应该删除“重复声明”。它不会修复不推荐使用的接口（十年前写的书和 5 年前更新的代码的问题），如果您尝试在 64 位处理器上运行它，则会出现我没有尝试修复的其他问题.

# angularjs - Angular js在发布后设置范围值的最佳方法

> ID：14533199
> 
> 赞同：0
> 
> 时间：2013-01-26T02:22:20.993
> 
> 标签：angularjs

我试图找出在更新后更新模型的最佳方法。

所以假设我有我的资源，我调用它来进行更新，然后我尝试对成功函数进行另一个查询。我进入了成功函数并且我的查询已成功完成，但我似乎无法弄清楚如何将我的查询结果返回到我的模型的范围内。也许我为此采取了错误的方法？

这是我的例子：

```
var myResource = new MyResource();
myResource.$update({
    resourceId : resourceId
   }, function (u) {
     u.$query({
    resourceId : resourceId
   }, function (result){
       $scope.mymodel = result;
   })
}); 
```

所以在我上面的例子中，我看到我的查询被成功调用。但我似乎从未在查询中进入我的回调函数。但也许在更新后走这条路线进行查询是错误的路径？如果我理解正确，更新（放置）是异步的。所以如果我想在更新后更新我的模型，我需要使用回调函数或其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:28:35.773

为什么更新后需要查询？如果您的后端更加 RESTful，则更新将使用更新后的值进行响应。

那么你的代码将是这样的：

```
var myResourceId = 123;
var myResource = new MyResource();

// get will instantly return an empty object. Angular will "hydrate" it when the 
// response is returned, automagically.
$scope.mymodel = myResource.get({resourceId: myResourceId}); 

// Change something on the model
$scope.mymodel.someProperty = "monkeys";
$scope.mymodel.$update();  // Does a POST with the someProperty set to the new value 
```

# python - 字符串中的交替单词 - Python

> ID：14533201
> 
> 赞同：-1
> 
> 时间：2013-01-26T02:22:48.667
> 
> 标签：python, string, list, alternate

我必须创建一个程序，向用户询问两个字符串，然后生成一个新字符串，将第一个字符串中的一个单词和第二个字符串中的一个单词交替出现，其中“单词”如上所述定义为空格或标点符号之间的任何内容。当一个字符串用完单词时，只需使用较长字符串的其余部分。（例如，'This.is.a, test' 和 'My mom made a mean pasta sauce' 将产生 'This My is mom a make test a mean pasta sauce'）

任何输入将不胜感激我正在尝试学习如何编程，而我目前所拥有的根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:51:27.523

该`random`模块是一个很棒的模块，它将对此有所帮助。

我使用该`string`模块删除所有标点符号。

```
import random
import string
sentence_one = raw_input('Enter the first sentence! ').translate(None, string.punctuation)
sentence_two = raw_input('Enter the second sentence! ').translate(None, string.punctuation)
mylist1 = sentence_one.split()
mylist2 = sentence_two.split()
mylist3 = mylist1 + mylist2
random.shuffle(mylist3)
randomsentence = ' '.join(mylist3)
print randomsentence 
```

运行时：

```
Enter the first sentence! one, two, three
Enter the second sentence! four! five! six!
three two four six one five # Well it could be anything really, this is randomised. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:47:57.967

查看 Python 的 itertools 模块的文档。特别是功能 itertools.izip_longest （解决您发布的确切问题）。

从文档：

itertools.izip_longest(*iterables[, fillvalue]) 创建一个迭代器，用于聚合来自每个可迭代对象的元素。如果可迭代的长度不均匀，则用 fillvalue 填充缺失值。迭代一直持续到最长的可迭代对象用完为止。

如果其中一个可迭代对象可能是无限的，那么 izip_longest() 函数应该用一些限制调用次数的东西来包装（例如 islice() 或 takewhile()）。如果未指定，则 fillvalue 默认为 None。

# command-line-arguments - Findstr -- 排除文件类型 -- 只搜索 ascii

> ID：14533204
> 
> 赞同：4
> 
> 时间：2013-01-26T02:23:21.047
> 
> 标签：command-line-arguments, dos, findstr

我想以一种超出在“findstr /？”中容易找到的方式运行 FINDSTR dos 命令。我将如何运行 findstr 以便它只搜索 ascii 文件。（我不确定这是否可能。我的直觉是不可能）此外，我将如何运行此命令行以排除一些文件时间。例如，如果我想排除 .psd 文件怎么办

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T03:58:32.107

`/P`帮助中描述的选项有什么问题？

```
/P         Skip files with non-printable characters. 
```

它对我有用。

要进一步控制搜索哪些文件，只需使用 for 循环迭代文件并添加您需要的任何逻辑。要跳过 .psd 文件并跳过二进制文件：

```
for /f "eol=: delims=" %%F in ('dir /a-d /b^|findstr /live ".psd"') do findstr /p "search" "%%F" 
```

如果从命令行运行，请使用单个百分比而不是双百分比。

# php - 使用 Codeigniter 分页库“显示 X 到 Y 的 Z 结果”？

> ID：14533206
> 
> 赞同：2
> 
> 时间：2013-01-26T02:23:40.883
> 
> 标签：php, codeigniter, pagination

我正在使用 Codeigniter 分页库，

我想知道如何获取使用分页类显示的第一个和最后一个项目的数量？

所以，如果我有 12 个结果，并且 per_page 设置为 5。我想要

第 1 页：`Displaying 1 to 5 of 12 results`
第 2 页：`Displaying 6 to 10 of 12 results`
第 3 页：`Displaying 11 to 12 of 12 results`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T04:09:38.403

保持简单。

你需要3个变量。结果开始，结果结束（在页面中，而不是整个）和总结果。

1.  您已经知道总结果（来自分页）。让我们称之为`$total`。

2.  `$curpage`所以，现在从 CI 实例获取当前页面 ( ) 值。然后，

    ```
    $result_start = ($curpage - 1) * $per_page + 1;
    if ($result_start == 0) $result_start= 1; // *it happens only for the first run* 
    ```

3.  对于`$result_end`，您只需要添加每页值，但考虑到它会少 1，

    ```
    $result_end = $result_start+$per_page-1;

    if ($result_end < $per_page)   // happens when records less than per page  
        $result_end = $per_page;  
    else if ($result_end > $total)  // happens when result end is greater than total records  
        $result_end = $total; 
    ```

4.  发送所有这 3 个值以查看。

    ```
    echo "displaying $result_start to $result_end of $total"; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-15T18:36:49.870

itachi 的解决方案效果很好，除非您需要处理最后一页的元素少于 $per_page 的情况。

```
if ($result_end > $total) {
    $result_end = $total;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T14:47:30.580

在 CodeIgniter 控制器文件中

```
$params['limit'] = 15;
        $params['offset'] = ($this->input->get('per_page')) ? $this->input->get('per_page') : 0;
        $config = $this->config->item('pagination');
        $config['per_page'] = $params['limit'];
        $config['base_url'] = site_url('cy_controller/action?');
        $config['total_rows'] = $this->abcd_model->get_count($params);
        $this->pagination->initialize($config);
        $data['merchant'] = $this->abcd_model->get_all($params);
        $countMerchant = count($data['merchant']);
        if ($params['offset'] == 0) {
            $find_total_record = $countMerchant;
        } else {
            $valuec = $params['offset'] + $params['limit'];
            if ($valuec > $config['total_rows'])
                $find_total_record = $params['offset'] + $countMerchant;
            else
                $find_total_record = $params['offset'] + $params['limit'];
        }
        $per_page_total = $find_total_record;

        $initial = $params['offset'] == 0 ? 1 : $params['offset'];
        $data['showing'] = "Showing  " . $initial . " to " . $per_page_total . " of " . $config['total_rows'] . " results";
        $data['_view'] = 'cy_controller/action';
        $this->load->view('layouts/main', $data); 
```

并在视图文件中

```
 <div class="pull-left">
     <?php echo $showing; ?>
  </div> 
```

# serial-port - Arduino Uno 拒绝上传，更改端口

> ID：14533209
> 
> 赞同：1
> 
> 时间：2013-01-26T02:24:03.057
> 
> 标签：serial-port, arduino, microcontroller, avr

在尝试了一些串行通信（可能相关也可能不相关）后，当我尝试将新代码上传到 Arduino 或使用串行监视器时，Arduino IDE 会引发“打开串行端口错误”错误。这在 Windows 和 Linux 中都发生过。

在 Linux 中，上传失败后，我尝试断开连接，然后重新连接板。它被重新分配给下一个打开的串行端口。例如，它从 /dev/ttyACM0 开始，然后移动到 /dev/ttyACM1，依此类推。

插入电源后，“TX”LED 亮起，然后变暗。当我尝试上传到它时，“TX”LED 闪烁两次，然后什么也没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:39:36.900

打开文件**~/.arduino/preferences.txt**文件（linux）。在那里你会找到一个字符串**serial.debug_rate**。检查它的值。通常它的值为**9600**（它表示串行通信的波特率）。因此，如果此值是其他值，则可能会导致问题。

对于可能导致价值改变的原因，我没有明确的答案。但在我的情况下，将其改回 9600 效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:16:20.870

将某些东西物理插入arduino上的串行端口将使草图无法上传。

# python - 基于一些模板动态生成Python字符串

> ID：14533214
> 
> 赞同：0
> 
> 时间：2013-01-26T02:24:55.987
> 
> 标签：python, string, dictionary, python-3.x, python-2.7

我想根据使用我的模块的某些代码请求的 msg 类型从我的模块生成特定的 xml 字符串。这些 xml 字符串中的每一个都包含一些动态生成的数据。例如，许多这些 xml 字符串都有一个使用另一个函数生成的 cookie 字段。

我从一个 python 字典开始，它使用预先填充的动态字段（即 cookie）初始化所有 xml 字符串（即，不完全是动态的）。然后我调用字典来获取相关的 xml 字符串。

这种方法的问题是 cookie 每小时过期，因此模块在一小时后返回的字符串具有这些过期值。理想情况下，我希望拥有某种形式的生成器函数（不确定在这种情况下是否可能），它在根据请求的 msg_type 请求它们时返回正确格式的字符串（如下例所示）。保存在这个字典中的每个 xml 字符串都是唯一的格式，所以我不能完全拥有某种通用的模板 xml 生成器。

例如，我定义的 dict 与此处的 get_msg 字典类似：

```
 get_msg["msg_value_1"] = """<ABC cookie=""" + getCookie() + """ > 
                                         <XYZ """ + foo_name +""">
                                         </XYZ>
                                  </ABC>"""

        get_msg["msg_value_2"] = """<ABC cookie=""" + getCookie() + """ > 
                                         <some text """ + bar_name + """>
                                         </XYZ>
                                  </ABC>""" 
```

对于每个新的 msg 请求（不一定使用字典）都会调用 getCookie() 来动态生成这些 xml 字符串的好方法是什么。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:54:15.333

为此，我将创建一个这样的类

```
class SF( object ):
    def __init__( self, temp, args ):
            self.temp = temp
            self.args = args

    def __call__( self ):
            ret = self.temp
            for k, v in self.args.iteritems():
                    if hasattr( v, "__call__" ):
                            v = v()
                    ret = ret.replace( "{%s}" % k, str( v ) )
            return ret

s = SF( "This is a {test} with another {value}", 
        { "test": lambda: 100, "value": "Test" } )

print s()

This is a 100 with another Test 
```

这将允许您传入各种模板，并且您需要替换的每个部分都将具有`{cookie}`用大括号括起来的名称。`SF`然后可以将这些对象存储到您的字典中，然后简单地调用以返回您各自的 XML。

`lxml`当事情变得更复杂时，我还强烈建议使用诸如或类似的 XML 库来生成正确的 XML。

# neo4j - 获取同一节点的多个关系和子节点

> ID：14533215
> 
> 赞同：0
> 
> 时间：2013-01-26T02:24:58.800
> 
> 标签：neo4j, cypher

是否可以通过关系获得多个“子”节点。例如，给定以下查询：

```
START event=node(4) 
MATCH event-[:photoalbum]->photoalbum-[:coverphoto]->coverphoto 
RETURN event, photoalbum, coverphoto 
```

我认为也可以按如下方式获取事件的位置：

```
START event=node(%i) 
MATCH event-[:photoalbum]->photoalbum-[:coverphoto]->coverphoto, event-[:location]->location 
RETURN event, photoalbum, coverphoto, location 
```

但是我只是收到一个错误，说他们期待返回类型。

我查看了[Cypher 文档](http://docs.neo4j.org/chunked/1.8.1/cypher-query-lang.html)，但似乎在多个 MATCH 上找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:04:08.900

事实证明，我只是简单地阅读，因此忘记了传入/传出关系。碰巧该位置是传入关系，因此不会获取。而不是 --> 或 <-- 我只是使用 -- 所以关系的方向是通用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:03:52.123

你可以试试这个，它对我很好

```
START event=node(%i) 
MATCH location<-[:location]-event-[:photoalbum]->photoalbum-[:coverphoto]->coverphoto
RETURN event, photoalbum, coverphoto, location 
```

# php - 如何在窗口下使用 urandom 来获取密码正确的数字？

> ID：14533221
> 
> 赞同：0
> 
> 时间：2013-01-26T02:26:15.110
> 
> 标签：php, random, cryptography

我知道`mcrypt_create_iv($len, MCRYPT_DEV_URANDOM)`在 Windows 下提供高熵，但是，我怎样才能从中得到一个数字？我听说过一点关于 CryptGenRandom 的知识，但我不知道如何在 Windows 下使用它。

任何人都知道如何使用它来获得密码正确的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-25T09:56:20.073

在 Windows 上，`mcrypt_create_iv($len, MCRYPT_DEV_URANDOM);`将为您正确使用 CryptGenRandom。PHP 开发人员提前考虑了。

至于如何从二进制字符串中获取随机**数，一点**[也不简单](https://github.com/paragonie/random_compat/blob/master/lib/random_int.php)。

你最好的选择：

*   PHP 7：只需使用`random_int()`.
*   PHP 5：`random_int()`在加载[random_compat](https://github.com/paragonie/random_compat)作为依赖项后使用。

# javascript - 重复十进制算法

> ID：14533222
> 
> 赞同：9
> 
> 时间：2013-01-26T02:26:35.880
> 
> 标签：javascript

我正在尝试编写一个简单的重复十进制算法。现在我已经非常接近拥有一些有用的东西了。

我尝试使用此算法：[如何知道分数中的重复小数？](https://stackoverflow.com/questions/8946310/how-to-know-the-repeating-decimal-in-a-fraction)

> “一个非常简单的算法是这样的：实现长除法。记录你所做的每个中间除法。一旦你看到一个与你以前做过的相同的除法，你就有了重复的东西。”

除了检测重复的小数模式并将其放在括号中之外，我能够完成上述所有操作。

对于分数 7/13，我的输出应该是 0.[538461] 现在是 0,5,3,8,4,6,1,5,3,8,4,6,1,5,3,8,4,6,1,5。

关于如何使用我上面提到的算法实现检测重复小数模式并将其放在括号中的任何建议？我知道有类似的问题，但我想使用我上面提到的算法用我当前的代码来实现它。

```
<script>
// All the prime numbers under 1,000
var primeNumbers = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];

// Finds all the prime factors of a non-zero integer
// a = integer
function primeFactors(a) {
    var primeFactors = new Array(); 

    // Trial division algorithm
    for (var i = 0, p = primeNumbers[i]; i < primeNumbers.length && p * p <= a; i++, p = primeNumbers[i]) {
        while (a % p == 0) {         
                primeFactors.push(p);

                a /= p;
        }
    }

    if (a > 1) {
        primeFactors.push(a);
    }

    return primeFactors;
}

// Converts a fraction to a decimal
// i = number
// n = numerator
// d = denominator
function fractionToDecimal(n, d) {
    var pFS = primeFactors(d);

    for (var i = 0; i < pFS.length; i++) { // Go through each of the denominators prime factors

        if (pFS[i] !== 2 && pFS[i] !== 5) { // We have a repeating decimal

            var output = new Array();

            // Let's find the repeating decimal
            // Repeating decimal algorithm - uses long division
            for (var i = 0; i < 20; i++) { // For now find 20 spots, ideally this should stop after it finds the repeating decimal

                // How many times does the denominator go into the numerator evenly
                var temp2 = parseInt(n / d);

                output.push(temp2);

                var n = n % d;

                n += "0";
            }

            return "Repeating decimal: " + output;
        }
    }

    // Terminating decimal
    return "Terminating decimal: " + n / d;
}

document.write(fractionToDecimal(7, 13));
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:56:14.493

你已经弄清楚了大部分，只有两个部分丢失：

1.  检查长除法的分子是否重复并停止循环。当分子重复时，意味着我们找到了重复的小数。

2.  将数组转换为不带逗号的字符串，这很容易通过使用`join('')`.

这是实现上述两点的代码的相关部分：

```
function fractionToDecimal(n, d) {
    var pFS = primeFactors(d);
    for (var i = 0; i < pFS.length; i++) { // Go through each of the denominators prime factors

        if (pFS[i] !== 2 && pFS[i] !== 5) { // We have a repeating decimal

            var output = new Array();
            var ns = new Array();

            // Let's find the repeating decimal
            // Repeating decimal algorithm - uses long division
            for (var i = 0; i < 20; i++) { // For now find 20 spots, ideally this should stop after it finds the repeating decimal
                // How many times does the denominator go into the numerator evenly
                var temp2 = parseInt(n / d);

                if (ns[n] === undefined) {
                    ns[n] = i;
                } else {
                    return "Repeating decimal: " + 
                        output.slice(0, 1).join('') +
                        '.' +
                        output.slice(1, ns[n]).join('') +
                        '[' + output.slice(ns[n]).join('') + ']'
                    ;
                }

                output.push(temp2);
                var n = n % d;
                n += "0";
            }           
            return "Repeating decimal: " + output;
        }
    }

    // Terminating decimal
    return "Terminating decimal: " + n / d;
} 
```

jsFiddle 完整代码：http: [//jsfiddle.net/49Xks/](http://jsfiddle.net/49Xks/)

# html - 在网页上记录 Applet 的 UI 性能

> ID：14533226
> 
> 赞同：0
> 
> 时间：2013-01-26T02:27:00.710
> 
> 标签：html, swing, applet, webpage, web-hosting

我创建了一个小程序，它是一个基于 java swing 的信使，在浏览器上运行良好。现在我必须在网页上托管这个小程序并允许用户测试我的小程序。我需要记录他们使用信使执行每项任务所花费的时间以及他们所犯的错误。研究完成后，必须向用户显示时间和错误数量。

我无法弄清楚如何记录用户在我的 Messenger 应用程序中必须执行的每项任务的时间。一种方法是记录单击右键的时间我可以在 Java Swing 中以编程方式正确单击按钮，但是如何从小程序将此信息发送到 HTML 页面。

我不知道如何捕获错误。

需要的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:59:40.513

要存储异常和[信息](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html#info%28java.lang.String%29)，您可以使用[Logger](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html)。

从文档，

`A Logger object is used to log messages for a specific system or application component.`

因此，当您遇到任何异常时，请将其写入 Logger 文件。它具有记录信息所需的所有方法集。

**示例：** 当您输入方法时，使用[Logger.entering](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html#entering%28java.lang.String,%20java.lang.String%29)记录方法条目。同样，您必须使用类提供的相应方法编写所有操作，这些方法`Logger`可能是您希望通过此日志文件向用户显示的消息或异常或错误。

**PS：**我们在我们的应用程序中使用它，它非常方便。

# xcode - 如何消除 arc 项目中的“内存”问题？

> ID：14533235
> 
> 赞同：0
> 
> 时间：2013-01-26T02:29:26.873
> 
> 标签：xcode

在我的项目中，我使用的是 arc，但我仍然面临内存问题。谁能告诉我如何删除它们？

```
-(IBAction)familyHistoryBtnClicked:(id)sender
{
    FamilyHistoryViewController *FamilyViewController=[[FamilyHistoryViewController alloc]initWithNibName:@"FamilyHistoryViewController" bundle:nil];
    FamilyViewController.view.frame = CGRectMake(0, 50 , 809, 748);
    FamilyViewController.view.tag=112;
    [self removeSubview:112];

    [self.view addSubview:FamilyViewController.view];
}

-(IBAction)pastMedicalHistoryBtnClicked:(id)sender
{
    MedicalHistoryViewController *medicalViewController=[[MedicalHistoryViewController alloc]initWithNibName:@"MedicalHistoryViewController" bundle:nil];
    medicalViewController.view.frame = CGRectMake(0, 50 , 809, 748);
    medicalViewController.view.tag=113;
    [self removeSubview:113];
    [self.view addSubview:medicalViewController.view];

} 
```

# windows-7 - 在 SVN 上移动文件夹

> ID：14533237
> 
> 赞同：0
> 
> 时间：2013-01-26T02:29:40.327
> 
> 标签：windows-7, tortoisesvn

我想将**服务器目录**中的所有内容 从

```
https://myweb.com:8443/svn/Papers/MyName/MySoftware 
```

至

```
https://myweb.com:8443/svn/NewDir/MyName/MySoftware 
```

来自**客户端乌龟 SVN**，

这样我就可以随后结帐

```
https://myweb.com:8443/svn/NewDir/MyName/MySoftware 
```

我应该如何做到这一点？

我已经看到 Windows 上下文菜单中有一个重定位和切换命令，但我不确定是否有我希望实现的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:20:21.957

**如果**我的重建

> `Papers`并且`NewDir`是存储库（因为 URL 模式提醒我服务器位置内有 SVNParentPath `svn`），并且您想保存旧的树结构，但将其保存在另一个存储库中

是正确的并且满足“存储库 NewDir 已经存在并且您有权提交”的**前提条件：**

您可以*尝试*从客户端执行此操作。将您的 WC（根）从`https://myweb.com:8443/svn/Papers/MyName/MySoftware`to重新定位`https://myweb.com:8443/svn/NewDir/MyName/MySoftware`并提交。如果出现“存储库不相关，UUID 不匹配”之类的错误 - 签出新（空？）repo，将旧 WC（withoot .svn 目录）复制到新 WC，添加，提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:32:36.680

TortoiseSVN 将检查并创建 SVN 服务器的输出。如果您想保留 SVN 的内容、格式、版本控制、用户，您必须压缩 SVN 服务器的整个 Repository 文件夹，然后将其重新加载到另一个 SVN 服务器中。如果您从 SVN 服务器签出，则无法从签出版本重新运行具有相同版本、用户等的 SVN 服务器

# ios - 在 iOS 中从地图生成图像

> ID：14533239
> 
> 赞同：0
> 
> 时间：2013-01-26T02:30:15.727
> 
> 标签：ios, uiview, apple-maps

这是我想要做的：

1.  找个目的地。
2.  在地图中将其渲染到视图中。
3.  把它变成我可以保存并用作背景的图像。

另一种选择是放下地图视图，关闭所有输入并在其上绘制。基本上要求一种栅格化地图视图的方法。想知道有没有人这样做过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T02:41:22.920

您可以使用以下方式将任何视图渲染为图像：

```
 UIGraphicsBeginImageContextWithOptions(mapView.bounds.size, NO, 0.0f);
    [mapView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *mapImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

# android - 如何防止通话过程中屏幕关闭？

> ID：14533240
> 
> 赞同：0
> 
> 时间：2013-01-26T02:30:31.337
> 
> 标签：android, screen, phone-call

我正在使用 Intent.ACTION_SCREEN_OFF 和 Intent.ACTION_SCREEN_ON 制作自己的 LockScreen。当我有电话时，我想停止我的应用程序，但我找不到这样做的方法。最后的选择是在通话期间防止屏幕关闭。我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:44:40.150

不确定你的实现细节，但是你需要看一下[`TelephonyManager`](http://developer.android.com/reference/android/telephony/TelephonyManager.html)，如果你只需要检查某个时间点的状态，你可以使用该[`getCallState`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getCallState%28%29)方法。否则，您可以使用该[`listen`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#listen%28android.telephony.PhoneStateListener,%20int%29)方法注册 a[`PhoneStateListener`](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)以跟踪状态更改并让您的应用程序根据需要响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:22:57.750

我找到了这段代码，它有效：

```
 TelephonyManager tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);

private PhoneStateListener mPhoneListener = new PhoneStateListener() {
    public void onCallStateChanged(int state, String incomingNumber) {

            switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:

                finish();
                break;

            case TelephonyManager.CALL_STATE_OFFHOOK:
               finish();

                break;

            case TelephonyManager.CALL_STATE_IDLE:

                break;

            }
        } 
    }; 
```

在清单中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# android - 按钮 OnClickListener 不起作用

> ID：14533248
> 
> 赞同：0
> 
> 时间：2013-01-26T02:32:07.323
> 
> 标签：android, onclicklistener

我是安卓新手。我正在尝试从 EditText 获取输入并在按钮的帮助下在 TextView 中显示它。当我单击按钮时，没有任何反应。请帮忙，这是我的 MainActivity.java 代码 -

```
package com.example.addname;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    Button b1;
    TextView v1;
    EditText t1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1 = (Button) findViewById(R.id.button1);
        t1 = (EditText) findViewById(R.id.editText1);
        v1 = (TextView) findViewById(R.id.textView1);

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if(t1.getText().toString()=="")
                {

                    v1.setText(t1.getText().toString());
                }

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是我的activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="25dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="48dp"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:37:01.720

代替

```
if(t1.getText().toString()=="")
{

   v1.setText(t1.getText().toString());
} 
```

您可以使用

```
if(t1.getText().isEmpty())  // isEmpty() is only available from API 9 and Above
{

  v1.setText(t1.getText().toString());
} 
```

或这个

```
if(t1.getText().trim().length == 0)
{

  v1.setText(t1.getText().toString());
} 
```

Don't compare strings using `==`. You're actually comparing reference of an object. To compare strings, use `equals()` method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:34:21.687

我建议比较字符串，`.equals()`因为对象比较`==`通常会失败（`==`比较引用，而不是对象内容）。

```
if(t1.getText().toString().equals(""))) 
```

不过，在您的情况下，由于您正在比较一个空字符串，您也可以使用

```
if (t1.getText().toString().length == 0) 
```

然后请注意，一旦您设置了文本，您将`v1`'s text 设置为一个空字符串，因为您的逻辑表明只有在您设置`v1`'s text 的空字符串上。所以我建议完全摆脱`if`：

```
@Override
public void onClick(View arg0) {
     v1.setText(t1.getText().toString());
} 
```

# ios6 - NSDictionary 查询

> ID：14533250
> 
> 赞同：0
> 
> 时间：2013-01-26T02:32:35.853
> 
> 标签：ios6, key, nsdictionary, nsmutabledictionary

我是 iOS 6 的新手，只想发布一个关于使用 NSDictionary 或 MutuableDictionary 的问题。

我习惯了 Android 方法 ShardPreferences，我可以在其中以键/值格式写入数据并覆盖等。任何 SharedPreferences 文件也可以从任何场景访问，例如全局类。

我是否正在为我想做的事情寻找合适的课程？

创建后，可以从任何场景/类访问内容吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:44:37.503

您可以使用`NSUserDefaults`

> 使用`NSUserDefaults`该类，您可以保存与应用程序或用户数据相关的设置和属性。

例如，您可以保存用户设置的个人资料图像或应用程序的默认配色方案。

> 这些对象将保存在所谓的 iOS“默认系统”中。iOS 默认系​​统在您的应用程序中的所有代码中都可用，并且保存到默认系统的任何数据都将通过应用程序会话持续存在。这意味着即使用户关闭您的应用程序或重新启动他们的手机，保存的数据在他们下次打开应用程序时仍然可用！

使用 NSUserDefaults，您可以保存以下类类型的对象：

```
 - NSData, NSString, NSNumber, NSDate, NSArray, NSDictionary 
```

如果要存储任何其他类型的对象，例如 UIImage，通常需要将其归档或包装在 NSData、NSNumber 或 NSString 的实例中。

例子

```
NSUserDefaults *sharedPref = [NSUserDefaults standardUserDefaults];
[sharedPref setObject:@"TextToSave" forKey:@"keyToLookupString"];
NSString *myString = [sharedPref stringForKey:@"keyToLookupString"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:36:52.427

我认为您正在寻找的是[NSUserDefaults](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

那是应用程序的持久的、全局可访问的“首选项”。

NSDictionary 就像 Android 中的 java.util.Map 一样。

# algorithm - 划分区域的算法 - 找到彼此靠近的点

> ID：14533253
> 
> 赞同：0
> 
> 时间：2013-01-26T02:32:45.573
> 
> 标签：algorithm, polygon, rectangles, convex-hull, convex-polygon

是否有一种算法可以找到彼此之间具有一定距离的所有点？还是所有接触的矩形？

我将平面（在纬度/经度坐标系中，具有一定的限制）划分为 nxn 的样本矩形，每个矩形得到一个从 0 到 7 的值。我需要能够为每个值显示岛屿。n > 100 - 可能是 15000。

我写了一些非常蛮力的代码，但我只设法得到了一些非常粗糙的矩形......

我的输入示例：

```
111111111111111122222111
111221122222111122211111
111222222222111112211111
111222222111111112211111
111221111113311112111111
111111111113311111111111 
```

以上，使用矩形中的点定义（每个 1 和 2 以及其他是我通过一些采样获得的矩形......） - 我最终有几千个 - 可能是十万个小矩形，我想得到每种区域。

我发现我可以使用凸包算法获得区域 - 如果我可以正确地将矩形（或它们的中心点）分成区域。

在我的函数的输入中，我只会得到具有相同度量的矩形。

例子：

```
1111111111111111     111
111  11     1111   11111
111         11111  11111
111      11111111  11111
111  111111  1111 111111
11111111111  11111111111

                22222
   22  22222    222
   222222222     22
   222222        22
   22            2 
```

我想找到一些算法，这样我就可以在单独的集合中获得正在接触的矩形，或者彼此相距一定距离的点（它们具有绝对坐标），这样我就可以在结果集。

由于矩形是通过采样创建的，因此它们的宽度/高度相同。

有这样的事吗？

我的代码在 VB.NET 中，但 C# 或任何语言或伪代码都会有所帮助。

非常感谢你。

编辑：

我有各种各样的测试，比如

```
Public Function AreTwoRectanglesNearEachOther(ByRef one As RectangleF, ByRef two As RectangleF) As Integer
        If Math.Abs(one.Right - two.Left) <= distance_lat Then
            Return 1    ' one is before two
        ElseIf Math.Abs(two.Right - one.Left) <= distance_lat Then
            Return -1   ' one is after two
        ElseIf Math.Abs(two.Top - one.Bottom) <= distance_lon AndAlso one.Right - two.Left > 0 Then
            Return 2    ' one is above two
        ElseIf Math.Abs(one.Top - two.Bottom) <= distance_lon AndAlso one.Right - two.Left > 0 Then
            Return -2   ' one is below two
        Else
            Return 0    ' they are not next to each other
        End If
    End Function 
```

其中 distance_lat 和 distance_lon 是 dim_lat/10，分别是 dim_lon/10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:35:31.833

谢谢 mmgp - 我确实实现了连接组件标记算法 - 这是一个绝妙的主意。

# java - 记录来自 servlet 和数据库的请求的最佳方式？

> ID：14533257
> 
> 赞同：1
> 
> 时间：2013-01-26T02:33:18.083
> 
> 标签：java, database, logging

我正在提供由 servlet 提供的 RESTful 服务（在 Tomcat 7.0.X 和 Ubuntu Linux 中运行）。我每小时已经收到大约 20,000 个查询，而且还会增长得更高。servlet 接收请求，准备响应，在 MySQL 数据库表中插入记录并传递响应。数据库中的日志是绝对强制性的。直到最近，所有这一切都以同步的方式发生。我的意思是，在 Tomcat 线程传递响应之前，它必须在数据库表中创建记录。问题是这个日志过去占用了总时间的 90% 以上，甚至更糟：当数据库变慢时，服务大约需要 10-15 秒而不是 20 毫秒。

我最近做了一个改进：每个 Tomcat 线程都会创建一个额外的线程来执行“(new Thread(new certain Object)).start();” 它以异步方式处理 SQL 插入，因此响应更快地到达客户端。但是当 MySQL 运行速度较慢并且线程成倍增加时，这些线程占用了太多 RAM，而 JVM Tomcat 运行的内存有数千个。

我需要的是能够接受尽可能多的 HTTP 请求，尽可能快地记录每个请求（不同步），并在 MySQL 变慢并插入时使一切都变得快速并且 RAM 使用率非常低需要排队。当http请求的速度高于数据库日志中的插入速度时，我想我需要某种队列来缓冲条目。

我正在考虑这些想法：

1-自己创建某种 FIFO 队列，可能使用一些 Apache 公共集合，以及轮询集合并创建数据库记录的某种线程。但是我应该使用什么集合？我应该如何对轮询它的线程进行编程，这样它就不会独占 CPU？我认为“Do while (true)....”会占用 CPU 周期。那是关于让它线程安全的吗？怎么做？我认为自己做这件事太费力了，很可能我会重新发明轮子。

2-log4J？我从未直接使用过它，但似乎这个框架的算法旨在创建与数据库对话的“附加程序”。那会是这样做的方法吗？

3-使用某种专门从事此工作的任何其他框架？

你有什么建议？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:22:28.320

一定要看看使用 ThreadPoolExecutor。您可以提供线程池大小，它将为您处理所有并发和排队。唯一可能的问题是，如果您的 JVM 因任何原因崩溃，您将丢失池中的所有排队项目。

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

我也肯定会尽可能地优化 MySQL 数据库。每小时 20k 个条目很快就会变得很棘手。您的硬件、操作系统和索引优化得越好，您的插入越快，您的队列就越小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:42:23.503

首先：非常感谢您的宝贵建议！

到目前为止，我已经找到了满足我需求的部分解决方案，并且我已经成功实现了它：

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)

现在我正在考虑使用队列提供程序（如果它已满）作为故障转移解决方案。到目前为止，我一直在考虑亚马逊的排队服务，但它需要花钱。我还将检查 Ryan 建议的队列解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:10:59.563

马上想到的是你说的队列。您可以使用 ActiveMQ [http://activemq.apache.org/](http://activemq.apache.org/)或 RabbitMQ [http://www.rabbitmq.com/](http://www.rabbitmq.com/)之类的东西。

这个想法是开火然后忘记。发送消息应该几乎没有开销。

然后您可以连接一些“离线”以从队列中提取消息并以您需要的速度将它们写入数据库。

我觉得我整天都在 Stack Overflow 上插入这个，但我们在工作中使用 Mule (http://www.mulesoft.org/) 来执行此操作。Mule 的一大优点是您可以显式设置从队列中读取的线程数和写入数据库的线程数。它允许您对限制消息进行细粒度控制。

# c++ - 是否有可能在编译时有一个未知的模板类型

> ID：14533258
> 
> 赞同：0
> 
> 时间：2013-01-26T02:33:20.550
> 
> 标签：c++

假设我有一堂课：

```
template <unsigned M, unsigned N, typename T = float>
class Matrix
{}; 
```

我想从包含一些未知 M,N 矩阵的文件中读取并创建上述类型：

矩阵 getMatrixFromFile(std::string &path);

考虑到 M, N 在编译时未知，这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:37:15.073

答案是不。

模板参数用于在编译时根据传递的类型创建类型。

# mysql - #1062 - 键 'option_name' 的重复条目 '_site_transient_timeout_theme_roots'

> ID：14533259
> 
> 赞同：1
> 
> 时间：2013-01-26T02:33:21.300
> 
> 标签：mysql, sql, mysql-error-1062

我正在将站点从 Site5 托管迁移到 InMotion 托管，并且 mysql 文件的导入（通过 phpMyAdmin）不起作用。

mysql 文件导入失败，返回此错误消息：

**#1062 - 键 'option_name' 的重复条目 '_site_transient_timeout_theme_roots'**

根据我在各种论坛上的求助请求，我得到的信息是：每张桌子都有一把钥匙？

所以我想我应该在 option_name 表中寻找某种类型的重复项？

我迷路了请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:18:22.197

我已经多次看到这种类型的问题。

我雇主的公司有一个使用 Drupal 的 DB Hosting 客户端。

有一个特殊的表叫做`search_index`保存单词。

用于表的字符集不同于用于记录来自传入 Web 浏览器会话的数据的字符集。当我 mysqldump 这个数据库并将其重新加载到另一个 MySQL 实例时，我也收到错误 1062。我在尖叫“重新加载时mysqldump怎么会失败？”

由于表的数据是持续收集的，因此客户端允许我截断表，然后 mysqldump 数据库。不用说，mysqldump 的重新加载是成功的。

鉴于错误消息，这可能发生在您身上的唯一方法是，如果`_site_transient_timeout_theme_roots`表有一个名为的索引列`option_name`，并且该列的字符数据与表的字符集不兼容。例如，该表可能是使用 UTF-8 创建的，并且您正在将 Latin-1 字符或一些奇​​怪的 Unicode 加载到`option_name`. 存储的数据不会有任何问题。正是当您 mysqldump 表并重新加载时，字符集的怪异之处才浮出水面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T21:38:19.160

确保只导出了要导入的数据库，并且不超过 1 个数据库。

当我不小心导出了数据库服务器而不是数据库，然后尝试导入多个数据库时，我收到了这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T19:04:14.253

如果您有缓存插件，例如 Autoptimize 和 WP Fastest Cache 等，请确保在导出数据库之前清除所有缓存。

# ruby-on-rails - 如何从 Rails 中的模型渲染视图？

> ID：14533262
> 
> 赞同：1
> 
> 时间：2013-01-26T02:33:53.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我必须编辑 Rails 应用程序，但在语言方面我是新手（我是 Ruby 和 Rails 的新手）。在查看源文件时，我提出了一些问题：

```
class Card < ActiveRecord::Base
    class CardRenderer < AbstractController::Base
        include AbstractController::Rendering
        include AbstractController::Helpers

        self.view_paths = Rails.application.config.paths["app/views"]

        helper_method :res_url

        def print(_card, _template)
             @card = _card
             render template: "prints/#{_template}.html"
        end

        protected
            def res_url(_res_name)
                "#{Rails.root}/app/views/prints/res/#{_res_name}"
            end
     end
     .......
     .......
     .......
end 
```

我看到一个模型在另一个类中包含一个类你有这个语言特征的名字吗？

我如何从模型的实例中调用这个类？例如来自控制器（显然这不起作用）：

```
@card::CardRenderer.new.print(@card, @template) 
```

模型类内部的类具有呈现视图的功能

我可以从控制器中使用此功能吗？例如来自控制器（显然这也不起作用）

```
render Card::CardRenderer.new.print(@card, @template) 
```

理想是我读一本书吗！，我会去做！但在这些日子里，我不能（时间问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:24:50.257

*你有这个语言功能的名字吗？*

“嵌套类”，我认为

*我如何从模型的实例中调用这个类？*

`@card.class::CardRenderer`应该管用

*模型类内部的类有一个呈现视图的函数。我可以从控制器使用此功能吗？*

从头到尾阅读整个内容：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

ps 我有一个偷偷摸摸的怀疑，应用程序的当前设计完全违背了模型-视图-控制器的想法

# html - Why isn't my wrapper div clearing correctly?

> ID：14533263
> 
> 赞同：0
> 
> 时间：2013-01-26T02:33:54.620
> 
> 标签：html, css

My wrapper div is acting like the children divs aren't cleared properly. It's only wrapping a portion of the vertical height of the children divs. Can anyone explain why this is happening? I cleared both of the divs contained by the wrapper.

[packardcarbs.myshopify.com](http://packardcarbs.myshopify.com)

The password is "ataska."

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:36:16.307

do not specify a height for your #content. Remove `height: 100%;` on line 88

# asp.net - SQLDataSource 参数插入：清理和格式化

> ID：14533267
> 
> 赞同：0
> 
> 时间：2013-01-26T02:34:52.173
> 
> 标签：asp.net, sql

我正在构建一个 Web 应用程序，我希望允许用户将记录插入数据库。我遇到的方法是从文本框中获取信息并运行以下代码：

```
SqlDataSource1.InsertParameters["ProductCode"].DefaultValue = txtProductCode.Text;
SqlDataSource1.InsertParameters["Name"].DefaultValue = txtName.Text;
SqlDataSource1.InsertParameters["Version"].DefaultValue = txtVersion.Text;
SqlDataSource1.InsertParameters["ReleaseDate"].DefaultValue = txtReleaseDate.Text;
try
{
    SQLDataSource1.Insert();
}
... 
```

如果我尝试注入一些 SQL，我会收到错误消息：

> 消息：字符串或二进制数据将被截断。该语句已终止。

此方法是否清理参数？我很难找到这些信息，因为我不确定是否还有办法解决这个错误。如果没有，我应该如何对输入进行消毒？

此外，ReleaseDate 参数当前似乎读取为 dd/MM/yyyy，但有办法锁定它，以便不同系统上的相同代码不会表现不同。我担心如果代码在具有不同区域设置的系统上运行，它将使用不同的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:53:31.667

表中的一个字段不够长，无法插入该值。您需要检查每个 ProductionCode、name、Version 和 ReleaseDate 的长度并相应地增加它们。

[http://msdn.microsoft.com/en-us/library/aa196741(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa196741(v=sql.80).aspx)

# ruby - 转义 ruby 字符串插值语法

> ID：14533269
> 
> 赞同：0
> 
> 时间：2013-01-26T02:35:18.343
> 
> 标签：ruby, ruby-1.8

> **可能重复：**
> [如何从字符串插值中转义 #{](https://stackoverflow.com/questions/1310701/how-do-i-escape-from-string-interpolation)

如果我有这样的字符串：

```
"interpolated: #{1}, verbatim: #{dont_interpolate}" 
```

如何仅转义第二个 #{} 以使输出如下所示：

```
=> interpolated: 1, verbatim: #{dont_interpolate} 
```

我试过这个：

```
 "interpolated: #{1}, verbatim: #\{dont_interpolate\}" 
```

但我在 # 前面多了一个斜杠：

```
interpolated: 1, verbatim: \#{dont_interpolate} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:42:38.567

我认为这只是在`irb`. 当我使用`puts`时，它会正确打印：

```
irb(main):002:0> "interpolated: #{1}, verbatim: #\{dont_interpolate\}".to_s
=> "interpolated: 1, verbatim: \#{dont_interpolate}"
irb(main):003:0> puts "interpolated: #{1}, verbatim: #\{dont_interpolate\}"
interpolated: 1, verbatim: #{dont_interpolate}
=> nil 
```

看来你也可以这样逃避它：

```
irb(main):004:0> puts "interpolated: #{1}, verbatim: \#{dont_interpolate}"
interpolated: 1, verbatim: #{dont_interpolate}
=> nil 
```

# jquery - 是否有一个 jQuery GRID 组件允许固定前 N 列，而其他列水平滚动

> ID：14533278
> 
> 赞同：1
> 
> 时间：2013-01-26T02:36:42.317
> 
> 标签：jquery, excel, grid

我正在寻找一个带有 Excel 的 jQuery GRID 组件，例如编辑，它允许我修复前 N 列，然后允许其余列水平滚动。

它绝对必须是一个 jQuery 组件。

我已经在 stackoverflow 上查看了其他答案，但它们绝对不够好 - 它们不支持 Excel 之类的编辑。这是我检查的内容：

*   [HTML/jQuery 表格：水平滚动，固定第一（左）列](https://stackoverflow.com/questions/7030797/html-jquery-tables-scroll-horizontally-fix-the-first-left-column)
*   [水平滚动的 HTML 表格（第一列固定）](https://stackoverflow.com/questions/3402295/html-table-with-horizontal-scrolling-first-column-fixed)

还有其他人，但他们甚至没有接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:33:58.907

I looked for the same type of thing and found very few solutions and the ones I did find either had issues or seemed hard to work with for things like editing.

So I rolled my own and learned a lot about browser reflows (speed), and dom manipulation. I needed to display 200-300 rows and 58 columns with a fixed header and x number of fixed left columns. Some solutions just got downright sluggish when trying to edit or scroll.

I used the jQuery UI Widget factory pattern for my code. So far it supports sorting, cell renderers, row numbering, row select modes, and events for before/after edit render.

You can check out a fairly recent test at [http://chronosrealty.com/fcTable/fcTable.html](http://chronosrealty.com/fcTable/fcTable.html) and steal the code as needed if it works for you. Cells are editable starting at column '11/5'. Still adding features and restructuring and hope to make it available with documentation sometime soon.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:48:08.613

你可以看看 jQuery DataTables。它支持一个或多个固定列。

*   这是一个有一个固定列的示例：[示例 1](http://datatables.net/extras/fixedcolumns/)
*   这是另一个具有两个固定列的示例：[示例 2](http://datatables.net/release-datatables/extras/FixedColumns/two_columns.html)
*   这是一个编辑示例：[示例 3](http://datatables.net/release-datatables/examples/api/editable.html)

jqGrid 也支持这些特性。这是它的[演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)。

# php - 为什么零在其类型为整数时不进入数据库？

> ID：14533282
> 
> 赞同：2
> 
> 时间：2013-01-26T02:37:06.250
> 
> 标签：php, mysql, sql

我能知道为什么当它的类型为整数时它没有向我的数据库插入零吗？我有一个名为contact 的表，并且有一列可以保存用户的10 位数长度的手机号码。这个数字通常以 0 开头。例如。0713423454、0234324545等

在我的表中，我创建了这样的列..

```
mobile INT(10) NOT NULL, 
```

在php中我验证它是这样的......

```
// Check for a mobile number:
if ( !empty($_POST['mobile'])) {
    $number = $_POST['mobile'];     
    if (preg_match('/(0[0-9]{9})/', $number)) {
        $mobile = mysqli_real_escape_string ( $dbc, $number);
    } else {
        $reg_errors['mobile'] = 'You are NOT entered valid Mobile number!';
    }
} else {    
    $reg_errors['mobile'] = 'Mobile number can not be empty!';
} 
```

但是当将手机号码插入数据库时​​，它会像这样 234223434、435453545 等没有 0。

所以我想知道有没有办法将我的手机号码与0插入数据库..

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T02:38:39.303

整数没有（不能）有前导零。也就是说， '099' 和 '99' 都表示相同的数值¹。

请改用[char 或 varchar](http://dev.mysql.com/doc/refman/5.0/en/char.html)。

* * *

¹有时，数字文本表示中的前导零指定 [八进制] 基数，但这里*不是*这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T02:45:46.187

您不能存储前导零，但更大的问题是您不应该将手机号码存储为 INT。将其存储为 CHAR。

手机号码是标识符，而不是数值。如果你改变你的数据模型，你会省去很多麻烦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T02:39:29.880

用于[`zerofill`](http://hashmysql.org/wiki/Zerofill)您的列..

# php - 当用户未使用帐户登录时禁用链接

> ID：14533284
> 
> 赞同：-1
> 
> 时间：2013-01-26T02:37:19.090
> 
> 标签：php, javascript, html, mysql, wampserver

再会！我只是想知道如果用户没有登录我的网站是否可以禁用链接。就像其他网站一样，我允许访问者在不登录的情况下进入网站，但我想禁止他们使用网站的某些功能，这些功能仅供拥有帐户的人使用。我真的不擅长这个。我也在考虑根据用户 ID 禁用一些链接。我的意思是，有些功能仅适用于管理员。如果登录的用户不是管理员，他也不能使用管理员的页面链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:39:30.737

是的，你可以用 PHP 做到这一点。制作一个检查用户是否登录的脚本，然后提交指向 HTML 页面的链接，否则，不要提交。

# ruby - 如何将 Twitter api 请求写入 ruby 中的文件

> ID：14533285
> 
> 赞同：0
> 
> 时间：2013-01-26T02:37:21.053
> 
> 标签：ruby, twitter

对不起，如果这很明显，我只有大约 5 天的 ruby​​ 经验。我正在尝试将 Twitter 上的前 10 个热门话题写入 json 文件。API 请求是对[https://api.twitter.com/1/trends/1.json](https://api.twitter.com/1/trends/1.json)的 GET 请求。我的代码是

```
require "net/http"
require "uri"
require "JSON"

uri = URI.parse("https://api.twitter.com/1/trends/1.json")

File.open("test.json", "w") do |f|
  f.write(Net::HTTP.get(uri.host, uri.port))
end 
```

它给了我一个错误

```
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:1668:in 'initialize': undefined method 'empty?' for 443:Fixnum (NoMethodError) from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:1787:in 'intialize' from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:1081:in 'new' from D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:1081:in 'request_get' from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:389:in 'block in get_response' from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:627:in 'start' from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:388:in 'get_response' from 
D:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/net/http.rb:370:in 'get' from test:8:in 'block in (main)' 
```

对此的任何帮助都会很棒

编辑： [https](https://dev.twitter.com/docs/api/1/get/trends/%3Awoeid) ://dev.twitter.com/docs/api/1/get/trends/%3Awoeid是如果我错过提供任何重要信息，我正在使用的 API 调用的所有信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:55:16.733

您对 Net::HTTP.get 的调用不正确，它需要 (host, path) 而不是 (host, port)：

```
f.write(Net::HTTP.get(uri.host, uri.path)) 
```

get 方法尝试将您传入的内容视为字符串，这就是导致您看到的异常的原因。

你也可以写

```
f.write(Net::HTTP.get(uri.host, uri.path, uri.port)) 
```

让它使用 https，但这会导致一个空响应（由于某种原因 twitter 不喜欢 https？）

顺便提一下 api v1 已被弃用，我建议移至 v1.1 等效请求：[https ://dev.twitter.com/docs/api/1.1/get/trends/place](https://dev.twitter.com/docs/api/1.1/get/trends/place)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:19:27.490

如前所述，

```
require "net/http"
require "uri"
require "JSON"

uri = URI.parse("https://api.twitter.com/1/trends/1.json")  

File.open("test.json", "w") do |f|
   f.write(Net::HTTP.get(uri.host, uri.path)) 
end 
```

应该管用。

然而，使它具有可读性是一项艰巨的任务。

# iphone - iPhone后退按钮文字iOS5+没有出现？

> ID：14533286
> 
> 赞同：0
> 
> 时间：2013-01-26T02:37:49.443
> 
> 标签：iphone, ios, objective-c, uibutton, back

我已经加载了一个带有 [uibarbutton 外观] 的自定义后退按钮，但我不知道如何更改自定义图像上的文本。编码：

```
- (void)viewDidLoad
{
[super viewDidLoad];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:[UIImageimageNamed:@"someimage.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:59:39.260

不需要为其设置标题或文本，它的导航系统`ios`本身就可以，只需将自定义按钮分配给导航栏`backbutton`

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleDone target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:47:38.170

后退按钮上的文本由`title`后退按钮将导航到的视图控制器的属性确定（即导航控制器堆栈上的前一个视图控制器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T02:53:53.137

```
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Back"
style:UIBarButtonItemStylePlain
target:self action:@selector(back:)] autorelease]; 
```

# objective-c - NSScrollView 填充

> ID：14533297
> 
> 赞同：6
> 
> 时间：2013-01-26T02:39:37.903
> 
> 标签：objective-c, macos, cocoa

我有一个 NSScrollView，里面有一个 NSTableView。

![在此处输入图像描述](../Images/0170c33cbc4d69725398fac6b09fa610.png)

如您所见，有一个 100px 高的 NSView 覆盖在 table view 之上。（这是有意完成的，覆盖层略微透明，您可以看到下方表格视图滚动的阴影）。

问题当然是我需要在滚动视图的底部添加 100px 的空白空间来补偿覆盖。否则你看不到表格的底部，它会被覆盖层覆盖。

我试过修改剪辑视图，但似乎只能改变它的框架（失去透明覆盖效果）。

也许我做得不太对，请帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T21:28:08.020

好的，所以我想通了，我需要不断地放大`documentView`框架。

我发现这样做的最好方法是对文档视图进行子类化，在本例中是 NSTableView。

在子类 NSTableView 中，我覆盖了`setFrameSize:(NSSize)newSize`

```
- (void)setFrameSize:(NSSize)newSize {
    newSize.height += 100;
    [super setFrameSize:newSize];
} 
```

这在表格视图的底部添加了 100px 的填充，从而为滚动视图添加了 100px 的填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-09T18:10:59.510

在**Swift 4**中也是这样：

```
class TableViewPadded: NSTableView{
  //Add padding at bottom
  override func setFrameSize(_ newSize: NSSize) {
    let padded = NSSize(width: newSize.width, height: newSize.height+30)
    super.setFrameSize(padded)
  }
} 
```

# node.js - 关于在 NodeJS 中使用 REST API 身份验证的困惑

> ID：14533301
> 
> 赞同：1
> 
> 时间：2013-01-26T02:39:59.210
> 
> 标签：node.js, authentication

我正在为我的项目使用 Express + NodeJS + Mongoose.js + PassportJS。我在 IOS 中为我​​的客户端应用程序创建了一个 API 密钥，每个请求都是由这个 apikey 完成的。

有时我需要来自服务器的用户相关数据。例如：

如果我请求查询场所，并查看当前用户是否已对该场所进行评级。

为此，我应该将用户 ID 作为参数发送到服务器以进行与当前用户相关的查询。

正如我在 Foursquare API 中看到的，如果请求用户经过身份验证，您可以查询用户相关数据。如果用户未认证，仅认证应用，则无法查询用户相关数据。

那么，我应该给每个用户一个 apikey 吗？或者只有 1 个 api 密钥到一个将使用我的 API 的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:12:32.060

您已经提到您使用的是passportJs，而不是为什么不使用它进行用户身份验证，您有多种选项可用于获得用户身份验证。您将选择哪种方法取决于您的要求。为了让您了解设置基本身份验证，您可以参考此[https://github.com/jaredhanson/passport-local/blob/master/examples/express3/app.js](https://github.com/jaredhanson/passport-local/blob/master/examples/express3/app.js)

从上面的示例中，您可以验证用户是否已通过身份验证

```
function ensureAuthenticated(req, res, next) {
if (req.isAuthenticated()) { return next(); }
res.redirect('/login')
} 
```

您可以使用该方法作为路由中间件来限制用户访问。我认为我附上的链接给了你很好的主意，但如果你仍然需要任何帮助，请告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:58:15.550

您需要先将用户重定向到 Foursquare，以使他们在 Foursquare 上进行身份验证。您只需要一个 api 密钥。

考虑使用以下库之一： [https](https://github.com/Constantine-Fry/Foursquare-API-v2) ://github.com/Constantine-Fry/Foursquare-API-v2 https://github.com/baztokyo/foursquare-ios-api

或自己动手： [https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

# javascript - Javascript动画错误事件

> ID：14533306
> 
> 赞同：0
> 
> 时间：2013-01-26T02:40:40.570
> 
> 标签：javascript, events, animation

我似乎无法找到这个问题的答案，所以我想我会问。我正在编写我的第一个网站，当鼠标悬停在每个单独的导航元素上时，我正在使用一点点 Javascript 向上滑动它。然后在鼠标移出时它会向下滑动。

它工作正常，除非当鼠标在“向上”有时间向下滑动之前从“向上”元素变为“向下”元素时，它会变得混乱并保持向上，而“向下”元素认为它应该滑动向下。我认为新的鼠标悬停事件与前一个事件混淆了，但我不确定如何修复它。

我希望这能解释我的问题，这是我正在使用的代码（CSS 非常简单，位置对于每个导航选项卡都是相对的，所以我没有显示它）：

Javascript：

```
var cartridges, obj, lastObj;
var velocity = 2;

function setUp() {
    if (!document.getElementById) return;
        cartridges = document.getElementsByClassName('navigation');
    for (var i = 0; i < cartridges.length; i++) {
        cartridges[i].onmouseover = slideUp;
        cartridges[i].onmouseout = slideDown;
   }
}

function slideUp(e) {
    if (!e) var e = window.event;
    obj = (e.target) ? e.target: e.srcElement;
    var up = obj.style.top;
    up = up.substring(0, up.length - 2);
    parseInt(up);

    function frame() { 
        up -= velocity; // update parameters     
        obj.style.top = up + "px"; // show frame
        if (up <= -100)  // check finish condition (negative because that pushes it up, otherwise it would go down
            clearInterval(id);
    }
    var id = setInterval(frame, 10); // draw every 10ms 
}

function slideDown() {
    var up = obj.style.top;
    up = up.substring(0, up.length - 2);
    parseInt(up);

    function frame() { 
        up++;  // update parameters 
        obj.style.top = up + "px";
        if (up >= 0)  // check finish condition (negative because that pushes it up, otherwise it would go down
            clearInterval(id);
    }
    var id = setInterval(frame, 10); // draw every 10ms 
}

window.onload = setUp; 
```

HTML：

```
<div id="navigation">
            <ul>
                <li><a  class="navigation" href="index.html" ><img id="home" alt="Home" src="../images/cartridge_grey_index.png" /></a></li>
                <li><a  class="navigation" href="aboutme.html"><img id="aboutme" alt="About Me" src="../images/cartridge_grey_aboutme.png" /></a></li>
                <li><a  class="navigation" href="resume.html"><img id="resume" alt="resume" src="../images/cartridge_grey_resume.png" /></a></li>
                <li><a  class="navigation" href="projects.html"><img id="projects" alt="projects" src="../images/cartridge_grey_projects.png" /></a></li>
                <li><a  class="navigation" href="blog.html"><img id="blog" alt="blog" src="../images/cartridge_grey_blog.png" /></a></li>
                <li><a  class="navigation" href="contact.html"><img id="contact" alt="contact" src="../images/cartridge_grey_contact.png" /></a></li>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:00:01.753

就像是

```
.navigation:hover { margin-top: 2; } 
```

可能就是你所需要的。

然后你可以添加

```
transition-property: margin-top;
transition-duration: 1s; 
```

一点额外的眼睛糖果。

当然，你可能更喜欢在你的项目中添加一个 80K 的库，然后编写大量代码来处理鼠标悬停事件之类的，即使同样的事情可以在一行 CSS 中完成，因为使用 jQuery 会让你感觉像，你知道，一个真正的程序员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:09:37.390

如果您是 Web 新手，尤其是 Javascript 世界的新手，我强烈建议您使用 jQuery 或 MooTools 等库来完成滑动菜单。已经有很多插件可用，或者如果你想完成学习过程，你可以很容易地自己连接起来。

jQuery 提供了方便的方法，例如 .mouseover() 和 .slideUp()，这使得这项任务几乎是微不足道的，或者您可以从其他效果列表中进行选择，例如淡入淡出和显示/隐藏。作为额外的奖励，您还将获得所有浏览器的兼容性。

欲了解更多信息，请查看：[http ://api.jquery.com](http://api.jquery.com)

# onclicklistener - 未使用字段 Main.Activity.b1 的值

> ID：14533308
> 
> 赞同：0
> 
> 时间：2013-01-26T02:41:18.120
> 
> 标签：onclicklistener

有人可以帮我试试 onclick android 教程如何使用按钮更改页面，但我卡住了我收到一个错误，提示字段 Main.Activity.b1 的值未使用我无法弄清楚

```
 package com.example.lasttry;

            package com.example.lasttry;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.content.Intent;

public class MainActivity extends Activity implements OnClickListener  {
private Button b1;
public final static String EXTRA_MESSAGE = "com.example.lasttry";

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.setContentView(R.layout.activity_main);
        this.b1 = (Button)this.findViewById(R.id.b1);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
    finish();   // TODO Auto-generated method stub

    }
public void sendMessage(View v){
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText= (EditText) findViewById(R.id.b1); 
String message = editText.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T19:01:35.070

```
myButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

    Intent i = new Intent(getApplicationContext(), yourSecondActivityClass.class);
    startActivity(i);       

        }
    }); 
```

您可以将此代码放在您的 onCreate 方法中。因此，每当用户单击按钮时，您的应用程序都会基于 yourSecondActivityClass 打开一个新的活动实例。这个类必须是Activity的类型，你必须在Manifest文件中定义这个Activity。

# entity-framework - 实体框架调优

> ID：14533310
> 
> 赞同：2
> 
> 时间：2013-01-26T02:41:22.847
> 
> 标签：entity-framework, c#-4.0, entity-framework-mapping

遇到问题，希望有人可以提供帮助。

这是我在现实世界中的例子。我有 4 个表格：
Person
Plan
Coverage 和 CoveredMembers

每个人可以有很多计划，每个计划都可以有很多承保范围。这些coverage 中的每一个都可以有许多 CoveredMember。

我需要一个查询，它将对 Plan.PlanType == 1 和 CoveredMembers.TermDate == null 应用过滤器。此查询应带回任何具有未终止医疗类型计划的人。但我还需要包括所有的子记录。符合筛选条件的每个人，以及他们的计划、承保范围和受保成员。

这条 SQL 语句就是这样做的：

```
SELECT Person.*, Plans.*, Coverages.*, CoveredMembers.* 
FROM Person P 
INNER JOIN Plan PL ON P.PersonID = PL.PersonID 
INNER JOIN Coverage C on PL.PlanID = C.PlanID 
INNER JOIN CoveredMember CM on C.CoverageID = CM.CoverageID 
WHERE CM.TermDate = NULL AND PL.PlanType = 1 
```

在 EF (4.0 vs 2010) 我已经做到了

```
var Q from p in context.Persons
join pp in context.Plans
on p.PersonID  equals pp.PersonD
join c in context.Coverages
on pp.PlanID equals c.PlanID 
join cm in context.CoveredMember
on c.CoverageID equals cm.CoverageID
where cm.TermDate == null && pp.PlanType = 1 && 
pp.ActiveFlag == true 
select p; 
```

然后

```
var people = Q.Include(people => 
people.Plans.Select(plans => plans.Coverages.Select(cc =>  cc.CoveragedMembers)))
.ToList (); 
```

如果我在 var people = Q 行上设置断点并执行

```
((System.Data.Objects.ObjectQuery)Q).ToTraceString(); 
```

在使用 ToList() 将查询实际发送到数据库之前（在包含语句之前），我接受该查询并取回我应该取回的确切记录数量。

然后我运行一个 sql 跟踪（在 SQL Profiler 中）并将查询发送到数据库（包含语句）。我看到发送到数据库的 sql 语句已经失去了所有的过滤。它基本上返回相同的人，但子对象上的过滤器消失了，正在返回这些人的所有数据。（缺少 plan.PlanType = 1 和coveredMember.TermDate = null）

也许这不是实现这一目标的方法？有人有什么想法吗？EF甚至可以吗？这是一个非常简单的 SQL 语句（尽管跨越 4 个表），所以我认为这应该不是什么大问题，尽管我确定我没有正确地做某事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:31:01.540

我认为这是`Include`. `Include`将s 直接放在它们适用的实体后面或多或少是常见的。我将向您展示我的意思，同时使用导航属性重写您的查询：

```
var q = from p in context.Persons
                         .Include(people => people.Plans
                         .Select(plans => plans.Coverages
                         .Select(cc =>  cc.CoveragedMembers)))
        from pp in p.Plans
        from c in pp.Coverages
        from cm in c.CoveragedMembers
        where cm.TermDate == null && pp.PlanType = 1 && pp.ActiveFlag
        select p; 
```

（使用导航属性本质上并没有改变任何东西，但它让生活变得更轻松）。我已经看到放在 linq 语句末尾的包含被解释为外部连接，但同样包含在内部连接的开头。

`Include`我可能会补充一点，如果可以事先决定您需要哪些数据，并将 ( `select`) 投射到（命名或匿名）类型中，那么您根本不需要s，即类似

```
select new { Person = p, Plan = pp, CoveredMember = cm } 
```

而不是`select p`. 更好的是，选择特定的属性：

```
select new { Person = p.Name, Plan = pp.Plan, CoveredMember = cm.Name } 
```

您将大大减少您获取的数据量。`Includes`有办法在宽度和长度上放大查询结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:44:02.807

你`cannot use filtering with Eager loading (Include)`。

所以你可以做下面的事情（这是一个示例代码）

```
public Company Get(int id)
{
    var query = from c in
                    (from co in db.Companies
                        where co.Id == id
                        select new
                        {
                            Company = co,
                            CompanyPerson = from person in co.Persons
                                            where person.IsActive && !person.IsDeleted
                                            select person
                        })
                select c;

    //Create my company object
    Company company = new Company();
    foreach (var item in query)
    {
        company = item.Company;

        //Add persons to my company object
        foreach (var companyPerson in item.CompanyPerson)
        {
            company.Persons.Add(companyPerson);
        }
    }
    return company;
} 
```

有关更多信息，请查看这篇文章[**Eager Loading (include) with filter in Entity Framework**](http://dotnethill.com/post/2011/07/12/Eager-Loading-%28include%29-with-filter-in-Entity-Framework.aspx)

我希望这对你有帮助。

# css - Wordpress 菜单项不想居中

> ID：14533312
> 
> 赞同：1
> 
> 时间：2013-01-26T02:41:34.590
> 
> 标签：css, wordpress, menu, center, nav

我有一些菜单项，无论我做什么都不想居中。我真的不确定我做错了什么。我觉得 PHP 拉菜单项可能是个问题（我不知道 PHP，它来自一个主题），因为当我手动添加我自己的 UL 菜单项时，它们会完美居中。

任何帮助，将不胜感激！

**PHP 文件代码**

```
<div id="hmenubar">

    <?php $navcheck = '' ; ?>

    <?php $navcheck = wp_nav_menu( array(   'container_class' => 'menu-header', 
                        'theme_location' => 'primary' , 
                        'menu_class' => 'nav', 
                        'fallback_cb' => '', 
                        'echo' => false ) ); ?>
    <?php  if ($navcheck == '') { ?>

        <ul class="nav">            

            <?php wp_list_pages('title_li=&sort_column=menu_order'); ?>

        </ul>

    <?php } else echo($navcheck); ?>  

</div> 
```

**CSS 代码**

```
#hmenu_container {
height: 30%;
width:100%;
display: block;
text-align; center;
}

#hmenubar {
margin: 0 auto; 
}

#hmenubar ul {
font-family: 'Calligraffitti', cursive;
font-size: 1.5rem;
display: inline-block;
list-style: none;
margin: 0 auto;
} 
```

**编辑：列表的 HTML**

```
<div class="menu-header">

<ul id="menu-photography" class="nav">

<li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-15"><a href="/">Home</a></li>
<li id="menu-item-13" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13"><a href="/blog/">Blog</a></li>
<li id="menu-item-14" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14"><a href="/about/">About</a></li>
<li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="/gallery/">Gallery</a></li>
<li id="menu-item-20" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-20"><a href="/projects/">Projects</a></li>
<li id="menu-item-16" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16"><a href="/insquares">Insquar.es</a></li>
<li id="menu-item-17" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17"><a href="/instagram">Instagram</a></li>

</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:57:42.033

```
#hmenu_container {
    height: 30%;
    width:100%;
}
#hmenubar {
    display: inline;
    text-align: center;
}
#hmenubar ul {
    font-family:'Calligraffitti', cursive;
    font-size: 1.5rem;
    display: inline-block;
    list-style: none;
}
#hmenubar li {
    display: inline;
} 
```

[JSFiddle](http://jsfiddle.net/bryaW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T01:27:23.487

我最近遇到了这个问题，当我无法让那个菜单居中时，我在谷歌上搜索帮助，找到了这个页面。像您一样，我尝试了 JSFiddle 的答案，但没有成功，因此我开始分解此特定代码中的所有内容。当我注意到这部分代码时，我终于让菜单栏居中：

**PHP代码：**

```
<?php $navcheck = wp_nav_menu( array(   'container_class' => 'menu-header', 
                    'theme_location' => 'primary' , 
                    'menu_class' => 'nav',
                    'fallback_cb' => '', 
                    'echo' => false ) ); ?> 
```

具体来说：

```
 'menu_class' => 'nav', 
```

当我在我的 CSS 文件中查找**nav**时，我发现它位于我正在编辑的主题中名为**superfish.css的文件中。**我注意到这个文件包含两次基本相同的代码，一个标记为演示皮肤，有问题的代码如下：

**CSS：**

```
/*** DEMO SKIN ***/
.nav {
float:  left;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 13px;
} 
```

很容易，我改变了**浮动：左；****浮动：中心**；我的菜单栏居中。

我希望这可以帮助其他有这个问题的人！:)

# asp.net - runat = server 的替代方案

> ID：14533317
> 
> 赞同：0
> 
> 时间：2013-01-26T02:42:39.670
> 
> 标签：asp.net, vb.net

`runat ="server"`在 vb.net 代码中是否有任何替代方法。我不应该使用`runat="server"`

```
Protected name As String = " "
<script  language ="VB" runat="server">
    Actual code here 
    name&= (DTName.Rows(DRCount)("Client Name").Tostring() & "<br/>")
</script>

<html>
   <%=name%>
</html> 
```

如果我不使用`runat="server"`，则不会显示 html 中的代码。

# libxml2 - 在 Vala 中，为什么 node->set_content 不接受 & 字符？

> ID：14533318
> 
> 赞同：0
> 
> 时间：2013-01-26T02:42:41.007
> 
> 标签：libxml2, vala

以下代码

```
Xml.Node* node = new Xml.Node (null, "name");
node->set_content("&"); 
```

产生以下错误：

**错误：未终止的实体引用**

这是一个错误还是我做错了什么？

大于和小于字符都可以正常工作。此外， add_content 方法适用于 & 字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T03:47:11.517

> 这是一个错误还是我做错了什么？

后者。来自[xmlNodeSetContent](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeSetContent)文档：“内容应该是一段 XML CDATA，因此它允许实体引用，但需要首先转义 XML 特殊字符......”。您可以使用[GLib.Markup.escape_text](http://valadoc.org/glib-2.0/GLib.Markup.escape_text.html)来执行此操作。

> 此外， add_content 方法适用于 & 字符。

来自[xmlNodeAddContent](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeAddContent)文档：“与 xmlNodeSetContent() 相比，@content 应该是原始文本，因此允许使用未转义的 XML 特殊字符，不支持实体引用。”

# c# - 在接口中模拟虚拟方法

> ID：14533321
> 
> 赞同：-2
> 
> 时间：2013-01-26T02:43:56.073
> 
> 标签：c#, oop, inheritance, interface, multiple-inheritance

好的，因此在 C# 中解决多重继承的一种方法是使用接口。尽管这是一个公平的解决方案，但它仍然需要您始终在接口中重新键入实际上不应该在类之间更改的方法。

例如，如果我有一个方法 .foo() 作为接口 Adabo 的一部分，它总是被发现做同样的事情（比如，它循环 10 次），但在开发的某个点我发现我需要做对其进行更改（例如，它实际上应该循环 11 次），我将不得不遍历从 Adabo 继承的每个类并相应地更改它们自己的 .foo() 。

坦率地说，我对接口唯一想要的就是它们在多重继承上的自由通行证。我对他们的全抽象前提并不感兴趣。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:09:57.327

没有上下文，这是一个很难回答的问题。根据具体情况，不同的解决方案将比其他解决方案更合适。

首先，如其他地方所述 - 接口不指定实现，它们仅指定合同。实现将包含在某个基类中。一个类可以实现许多接口，但你真正的问题（我相信）是；“鉴于不可能进行多重继承，我如何在 C# 类中实现许多接口，同时限制代码重复？”。

有很多选择，上下文很重要。但是，您可以进一步研究一些一般原则；

*   [对象构成](http://en.wikipedia.org/wiki/Object_composition)；一个班级由其他几个班级组成。例如，一个`class car`类可以包含几个轮子、一个引擎、门等。轮子类可以在一个`class Bus`
*   横切关注点/[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)；当它是您想要复制的特定行为而不是具体概念时更合适。典型的例子是跟踪/记录；您希望所有方法都记录下来，而不必在任何地方重复记录调用。在 C# 中有出色的工具可以支持这一点，例如[PostSharp](http://www.sharpcrafters.com/)，但这种方法需要与“传统”OO 设计不同的设计思路。
*   [扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)；这是一个 .NET 结构，当您想要实现一个类型的行为而不实际修改该类型时，它非常方便。这里最好的例子是 LINQ；的所有实现都`IEnumerable`可以使用 LINQ 方法，而无需实际直接实现任何东西。

正如我所说，上下文很重要，没有它，这些只是一般性的指针，可能会在进一步的研究中为您服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:00:12.957

> 在 C# 中解决多重继承的一种方法是使用接口

不对。类*实现*接口，它们不从它们*继承*。没有办法在 C#（或任何其他托管语言）中实现多重继承

*接近*多重继承的一种方法是使用聚合 - 创建一个“包装器”，它只是将函数调用传递回子部分。

> 如果我有一个方法 .foo() 作为接口 Adabo 的一部分，它总是被发现做同样的事情（比如，它循环 10 次）

接口不做*任何*事情——它们只是定义具体类需要实现哪些方法/属性。

如果您的问题不仅仅是理论上的，那么我鼓励您发布一些您认为多重继承有价值的示例。可能还有另一种模式可以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T03:07:21.527

> 它仍然要求您始终在接口中重新键入实际上不应该在类之间更改的方法

一点也不。您只需在基类上实现接口，实现将实现该接口的所有类中通用的方法，然后将其余部分声明为`abstract` - 这会强制派生类实现它。

```
public interface MyInterface
{
    void SomeCommonMethod(object whatever);

    void SomeSpecialisedMethod(int someOtherParameter);
}

public abstract class MyBaseClass : MyInterface
{
    public void SomeCommonMethod(object whatever)
    {
        //do some stuff
    }

    public abstract void SomeSpecialisedMethod(int someOtherParameter);
}

public class SomeSpecialisedClass : MyBaseClass
{
    public override void SomeSpecialisedMethod(int someOtherParameter)
    {
        //do stuff that can't be done in the base class
    }
} 
```

这显示了如何避免在所有需要它的类中无休止地“重新键入”接口实现。

话虽如此，使用接口并不等同于多重继承。在 C# 的早期，对此有很多讨论，普遍的共识是，在现实世界中实际上很少需要多重继承。我个人在我的职业生涯中只真正需要过几次，在这些情况下，有足够的解决方法——多重继承本来是一种更清洁的方法。

> 我唯一想要的接口是它们在多重继承时的自由通行证

*跟我重复一遍：*   **接口中也没有多重继承。**

一个接口可以**实现**多个其他接口，也可以定义自己的需求（契约），但绝不是继承。您可以近似多重继承，但无法实现正确的多重继承。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T03:47:24.737

似乎您混淆了几件事并感到困惑。如果我理解正确，你有一个接口，比如 Adabo，它有一个名为 foo() 的方法。现在，您有许多实现此方法的类。从您写的内容来看，我认为该方法的实现在所有这些类中都是相同的，因此，困扰您的是，当您想要更改实现时，您需要去更改所有这些。

好吧，这是你的问题。接口中的方法适用于不同实现类的情况，根据自己的需要以**不同的方式实现它。**如果碰巧实现对所有人都是一样的。那么你有几个选择：

1.  继承：通过具体或抽象类。将公共方法放在父类中，并对其进行扩展。如果您说子类已经扩展了其他类。那么你的下一个赌注是，

2.  组合：将通用功能放在一个组件类中，并包含在其他需要使用它的类中。因此，使用 Adabo 类代替接口 Adabo

    类阿达博{

    ```
    foo(); 
    ```

    }

那么在你所有的孩子班里都有

```
class childA {

   Adabo a;

   ...
   a.foo();
}

class childB {

   Adabo a;

   ...
   a.foo();
}

class childC {

   Adabo a;

   ...
   a.foo();
} 
```

# html - Chrome开发者窗口可以同时覆盖css规则吗？

> ID：14533328
> 
> 赞同：1
> 
> 时间：2013-01-26T02:45:09.190
> 
> 标签：html, css, google-chrome, sdk, ide

目前我正在使用浏览器的开发者模式来测试元素是否在正确的位置，但是，我发现每次需要更改时都需要一些时间。每次我需要在浏览器上测试并转到相应的css文件进行编辑它 。所以，我想知道有没有办法在chrome开发者模式下直接编辑css文件？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:53:19.790

实时 CSS 编辑器 Chrome 扩展程序可以为您做到这一点： [https ://chrome.google.com/webstore/detail/live-css-editor/oelggcmknbjmhkpgjfhakedcfnkgbdpg?hl=en](https://chrome.google.com/webstore/detail/live-css-editor/oelggcmknbjmhkpgjfhakedcfnkgbdpg?hl=en)

# zend-framework - Zend 表单 getValue 为一半字段返回“0”

> ID：14533329
> 
> 赞同：0
> 
> 时间：2013-01-26T02:45:12.037
> 
> 标签：zend-framework

我正在尝试构建一个 html 表单（需要足够的标记，让 zend 使用装饰器生成它是不可行的），并且我`$this->signupForm->getValue('fieldName')`在输入值元素中使用。

表单类正常创建元素并添加到表单中，当我显示此表单时，字段工作正常。

但是，使用 getValue 方法，我的表单字段值的一半是“0”。我进行了类型检查以确保它们不为空，但 getValue 实际上返回一个字符串“0”。

没有设置默认值。唯一似乎相关的是，所有默认值为“0”的字段都定义在扩展父类的子类中。但是，将字段移动到父类似乎没有影响（缓存清除等）。

这些让您了解表单类的结构：

```
class Form_Signup extends Base_Form_Signup {

    public function __construct($options = null) {

        parent::__construct($options);

        $address = $this->createElement('checkbox', 'address');
        $address->setLabel('Address')->setRequired(true);

        // Add our elements
        $this->addElement($address);

    }
}

class Base_Form_Signup extends Zend_Form {

    public function __construct($options = null) {

        parent::__construct($options);

        // fields defined here do not show 0

        // Add our elements
        $this->addElement( // adding our elements );

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:50:25.303

我认为由于 Zend_Form 中构造函数的工作方式，您遇到了问题。我认为在每个类的构造函数中调用默认装饰器会导致某些事情被覆盖/取消。

尝试使用`init()`该类设计为使用的方法：

```
class Form_Signup extends Base_Form_Signup {

    public function init() {

        parent:: init();//may be needed, may not

        $address = $this->createElement('checkbox', 'address');
        $address->setLabel('Address')->setRequired(true);

        // Add our elements
        $this->addElement($address);

    }
}

class Base_Form_Signup extends Zend_Form {

    public function init() {

        // Add our elements
        $this->addElement( // adding our elements );

    }
} 
```

`$options`如果确实需要，您仍然可以将数组传递给构造函数，但最好只使用`setOptions()`.

# algorithm - 求解：T(n) = T(n-1) + n

> ID：14533335
> 
> 赞同：5
> 
> 时间：2013-01-26T02:46:07.113
> 
> 标签：algorithm, math, recurrence

在 Cormen's Introduction to Algorithm 的书中，我试图解决以下问题：

**证明递归关系 T(n) = T(n-1) + n 的解是 O(n2 ) 使用替换**

（没有给出初始条件，这是问题的全文）

但是，我似乎无法找出正确的过程。教科书只简要介绍了它，我搜索过的大多数网站似乎都假设我已经知道如何。如果有人能给我一个简单的分步指南，甚至是一个链接，我将不胜感激。

对于踢球，这是我迄今为止的尝试：

**T(n) <= c(n^2)
       <= c(n-1)^2 + n
       <= c(n^2 -2n +1) + n （我很确定不是 < c( n^2))**

再次感谢。

更新：这是我试图完成的方法的一个示例，以避免混淆。

**证明解为 O(nlog(n))
T(n) = 2T([n/2]) + n
代入法要求我们证明 T(n) <= cn*lg(n) 可供选择常数 c > 0。假设这个界限适用于所有正数 m < n，其中 m = [n/2]，产生 T([n/2]) <= c[n/2]*lg([n/2] ）。将其代入递归得到以下结果：
T(n) <= 2(c[n/2]*lg([n/2])) + n
       <= cn*lg(n/2) + n
       = cn* lg(n) - cn*lg(2) + n
       = cn*lg(n) - cn + n
       <= cn*lg(n)
只要 c >= 1 最后一步就成立**

我可以遵循这个逻辑很好，但是当我尝试复制上述问题中的步骤时，我被卡住了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T22:03:13.400

我想这应该是感应？

所以基本情况 n=1 是微不足道的。归纳案例，假设 n>1。(*) 假设 T(n-1) 为 O((n-1) ² )=O(n ² )。证明 T(n) 也是 O(n ² )。

```
 T(n) = T(n-1) + n
      < c (n-1)^2 + n,  assume c>1 wlog
      < c n^2 - 2cn + c + n
      < c n^2 - (2c - 1)n + c
      < c n^2 
```

对于 n > 1，c > 1。

这是突破：

首先，注意当 c > 1, 2c - 1 > c，所以你有

```
 < c n^2 - (2c - 1)n + c
      < c n^2 - (c)n + c 
```

接下来，注意当 n > 1 时，-(c)n+c = (1-n) c < 0，所以你有

```
 < c n^2 - (c)n + c
      < c n^2 
```

由于有一个常数 c 使得 T(n) < cn^2，显然 T(n) 是 O(n ² )。

这大致符合你想要的吗？不得不对其进行多次编辑以修复边缘情况。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T03:00:37.280

这是一个纯粹的数学问题吗？

从 T(n) = T(n-1) + n，我们有：

```
T(n)   - T(n-1) = n
T(n-1) - T(n-2) = n-1
T(n-2) - T(n-3) = n-2
...
...
T(2)   - T(1)   = 2
T(1)   - T(0)   = 1 
```

对上述所有方程求和得出：

T(n) - T(0) = 1 + 2 + ... + (n-1) + n = n * (n+1) / 2 = O(n ^ 2)

我们完成了。

**更新**（我不确定这是否被称为 OP 所需的替换）：

```
T(n) = T(n-1) + n
= T(n-2) + (n-1) + n
= T(n-3) + (n-2) + (n-1) + n
= ... 
= T(1) + (2 + 3 + ... + n)
= T(0) + (1 + 2 + ... + n)
= T(0) +  n * (n+1) / 2
= O(n ^ 2) 
```

# symfony - Doctrine MongoDB 文档中的自定义字段

> ID：14533336
> 
> 赞同：0
> 
> 时间：2013-01-26T02:46:14.157
> 
> 标签：symfony, doctrine-orm, doctrine-odm

我在需要使用的项目中有一个特定要求`MongoDB Collection`，其中包含`Documents`不同的字段集。

例如，这两个`Documents`在同一个集合中。和字段`name`为`foo`必填项。

```
{ 'name': 'scott', 'foo': 'abc123' }
{ 'name': 'jack' , 'foo': 'def456', 'bar': 'baz' } 
```

使用 Doctrine MongoDB ODM，`Document`字段将在一个`Document`类中指定。

就目前而言，我让我的`Document`类扩展了以下内容`BaseDocument`并为事件创建了一个自定义侦听器，以使用自定义字段`PostPersist`更新持久化。`Document`

`BaseDocument`班级：

```
class BaseDocument
{
    protected $customFields;

    public function __construct()
    {
        $this->customFields = array();
    }

    public function setCustomField($name, $value)
    {
        if (\property_exists($this, $name)) {
            throw new \InvalidArgumentException("Object property '$name' exists, can't be assigned to a custom field");
        }
        $this->customFields[$name] = $value;
    }

    public function getCustomField($name)
    {
        if (\array_key_exists($name, $this->customFields)) {
            return $this->customFields[$name];
        }

        throw new \InvalidArgumentException("Custom field '$name' does not exists");
    }

    public function getCustomFields()
    {
        return $this->customFields;
    }
} 
```

`postPersist`听众：

```
class CustomFieldListener
{
    public function postPersist(LifecycleEventArgs $args)
    {   
        $dm = $args->getDocumentManager();
        $document = $args->getDocument();

        $collection = $dm->getDocumentCollection(\get_class($document));
        $criteria = array('_id' => new \MongoID($document->getId()));
        $mongoDoc = $collection->findOne($criteria);
        $mongoDoc = \array_merge($mongoDoc, $document->getCustomFields());;
        $collection->update($criteria, $mongoDoc);
    } 
} 
```

当前的解决方案一点也不优雅，需要同时调用`insert`和`update`调用来插入单个`Document`. `Document`在持久化、读取和更新时注入自定义字段的更好方法是什么？

# vba - 在单击其他单元格时设置单元格值

> ID：14533338
> 
> 赞同：1
> 
> 时间：2013-01-26T02:46:20.797
> 
> 标签：vba, excel

我正在尝试执行简单的任务，即根据用户单击单元格 B、C 还是 D 来更改单元格 A 的值。由于某种原因，下面的代码仅适用于第一个 with 语句（在这种情况下，这会将单元格 A 的值设置为“低”）。有谁知道为什么当我单击 B 或 C 时它不起作用？对此代码的任何帮助都会很棒！谢谢！

```
Sub Worksheet_SelectionChange(ByVal Target As Range)

With Target

If Not Intersect(.Cells, Columns(1)) Is Nothing Or .Count > 1 Then Exit Sub
Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "Low"

If Not Intersect(.Cells, Columns(2)) Is Nothing Or .Count > 1 Then Exit Sub
Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "Medium"

If Not Intersect(.Cells, Columns(3)) Is Nothing Or .Count > 1 Then Exit Sub
Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "High"

End With

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T03:10:38.787

如果它不是第一列，您的第一条语句将导致例程退出。改变测试，你会有更多的成功

此外，当您正在查找特定列时，请使用 select case 语句检查它们以减少拥挤

```
Sub Worksheet_SelectionChange(ByVal Target As Range)

With Target

    if .Count > 1 then exit sub
    Select Case .column
        Case 2
            Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "Low"
        Case 3
            Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "Medium"
        Case 4
            Sheets("Sheet1").Range("A" & ActiveCell.row).Value = "High"
    end Select
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:50:58.063

试试这个：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim rOut As Range

With Target
   Set rOut = Me.Range("A" & .Row)
   If .Count = 1 Then
       If Not Intersect(.Cells, Columns(2)) Is Nothing Then
            rOut.Value = "Low"
       Else
            If Not Intersect(.Cells, Columns(3)) Is Nothing Then
                rOut.Value = "Medium"
            Else
                If Not Intersect(.Cells, Columns(4)) Is Nothing Then
                    rOut.Value = "High"
                End If
            End If
        End If
    End If
End With

End Sub 
```

# php - 通过 php 脚本将逗号分隔值传递给 sql 查询

> ID：14533339
> 
> 赞同：2
> 
> 时间：2013-01-26T02:46:21.393
> 
> 标签：php, sql, arguments, comma

我正在使用以下格式的网络浏览器将参数传递给我的 php 代码：

```
www.site.php?age=1&sex=2 
```

然后在访问这些参数的代码中：

```
'age' => $_GET['age']
'sex' => $_GET['sex'] 
```

一个参数需要是一组逗号分隔值（即“1,2,3,4,5”）。当我执行以下操作时，只有第一个值被解释：

```
www.site.php?age=1&sex=2&nums=1,2,3,4,5 
```

我尝试过使用括号、括号等，它们都破坏了代码。有什么想法吗？谢谢，

编辑：我错误地假设错误发生的时间。尝试实际进行 sql 调用时发生错误：

这有效：

```
$sql = <<<SQL
    SELECT * from db
    WHERE age=:age AND nums in (1,2)
SQL;
$query = $dbs['base']['connection']->prepare($sql);

$query->execute(array(
    ':age'      => $_GET['age'],

)); 
```

但是当我传入数字时它失败了：

```
$sql = <<<SQL
    SELECT * from db
    WHERE age=:age AND nums in (:nums)
SQL;
$query->execute(array(
        ':age'      => $_GET['age'],
            ':nums'  => $_GET['nums']
    )); 
```

当我只打印 $_GET['nums'] 时，逗号分隔的值就可以了。如何正确地将“nums”参数传递给 sql 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:54:18.227

你试过了`urlencode`吗？

```
// set
$nums = urlencode(join(',', array(1,2,3,4,5)));

// get
$nums = explode(',', urldecode($_GET['nums']));
// i think needs sanitize
$nums = array_map('intval', $nums); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:01:41.260

不清楚为什么这样的测试对你不起作用。请注意`<pre>`和`print_r()`严格用于调试。`explode(',', $_GET['nums'])`是关键。

```
echo '<pre>';
$nums_array = explode(',', $_GET['nums']);
print_r($nums_array);
echo '</pre>'; 
```

也许您需要与我们分享部分解析代码以更好地理解？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:01:50.650

在发送页面上将逗号转换为更友好的内容

```
$nums = "1,2,3,4,5";
$nums = str_replace(',','|',$nums); 
```

在接收 GET 的页面中执行以下操作：

```
$nums = str_replace('|',',',$nums); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T02:51:42.027

如果你想要一个字符串，URL 对逗号进行编码？

```
www.site.php?age=1&sex=2&nums=1%2C2%2C3%2C4%2C5 
```

此外，HTTP 具有 PHP 可以自动为您解释的参数的数组格式。我忘记了语法，但它非常简单。

编辑2：没关系，你想要字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T03:18:36.977

使用您当前的数据库界面，您不能。它使用准备好的语句。您的列表将被转换为字符串，因此不再是`IN`子句的值列表。

这就是为什么我例如使用这样的东西：

```
db("SELECT * from t1 WHERE id=? AND x IN (??)", $id, $array); 
```

但是，您必须手动创建一些`?,?,?,?,?`占位符¹，具体取决于输入列表长度（在提到的爆炸之后，或者更好的 str_getcsv 拆分之后）。是的，您需要枚举参数，而不是 :named 参数。

¹正是因为它很无聊/乏味，所以我不在这里提供示例代码。

# android - 如何编写代码在 Arduino Mega 和 Nexus 7 平板电脑之间来回发送数据？

> ID：14533345
> 
> 赞同：0
> 
> 时间：2013-01-26T02:47:01.340
> 
> 标签：android, usb, arduino, atmega, nexus-7

我正在制作一个 3D LED Cube，以根据 chr 的流行 LED Cube Instructable 可视化音乐：http: [//www.instructables.com/id/Led-Cube-8x8x8/](http://www.instructables.com/id/Led-Cube-8x8x8/)

我怀疑需要在 Arduino 上运行太慢的计算（它会一次做很多事情）所以我想使用 Nexus 7 来进行计算。如何使用 USB 向 Arduino 和 Nexus 7（最重要的是整数数组）发送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:22:48.047

附件开发工具包似乎适合您的需求，[http://developer.android.com/tools/adk/index.html](http://developer.android.com/tools/adk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T01:20:15.800

基本上你需要另一种方式来与 Android 平板电脑对话，对吧？

这里有一些基本想法：
**1）**将wifi添加到您的arduino，有很多方法可以做到这一点
最长的范围并且可能最昂贵

**2）**添加蓝牙并通过蓝牙连接
范围更有限，更接近硬件

**3）**添加NFC屏蔽并通过8gh P2P NFC进行通信
非常近距离，也许可用带宽对您来说是个问题

**4)**有点脏……如果我没记错的话，你可以破解 Nexus 7 来提供 USB OTG。
您将使用 FTDI（如 USB 到 USART 设备）并将您的电路板直接插入您 nexus 的 USB 插槽。
这可能涉及更改内核，我记得还有一些关于修改过的 USB 电缆为其添加电源，您需要将您的 nexus7 更改为 root 模式（这很容易，但涉及数据中断）。颇费一番功夫。

**5)**另一种有趣的方法，您可以使用显示屏、前置摄像头和 LED/光电二极管进行基于光的通信。
这比 NFC 的范围更有限。
我已经看到银行使用这种方法从网上银行与加密设备进行通信。

**6）**作为一个整理的想法。你说你有一个 ADK 斗篷，由于引脚限制，你不能使用它。您可以考虑在您的项目中添加第二个 AVR/arduino，它只是充当 android 和您的主 AVR 之间的中继。
您可以在 AVR 之间使用高速 (400k) I2C 或 SPI，因此如果您需要带宽，可以达到几兆位。
如果我没记错的话，大型 Arduino Mega2560 使用了这种方法，它还有一个小型 AVR，可用作 USB 继电器，而不是通常的 FTDI 方法。

与安卓平板电脑通信的方式有很多，我认为其中不少是可用的。
一旦您能够交流，您需要做的就是编写一个简单的协议，表演就可以开始了。

# python - Cython：找不到符号：_PyCFunction_Check

> ID：14533349
> 
> 赞同：1
> 
> 时间：2013-01-26T02:48:17.727
> 
> 标签：python, cython

我正在尝试使用[基本的 Cython 教程](http://docs.cython.org/src/userguide/tutorial.html)。所以我有

`hello.pyx`：

```
def say_hello_to(name):
    print("Hello %s!" % name) 
```

并且`setup.py`：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [Extension("hello", ["hello.pyx"])]

setup(
  name = 'Hello world app',
  cmdclass = {'build_ext': build_ext},
  ext_modules = ext_modules
) 
```

但是，尝试编译时出现此错误：

```
$ python setup.py build_ext --inplace
running build_ext
failed to import Cython: dlopen(/usr/local/lib/python2.7/site-packages/Cython/Compiler/Scanning.so, 2): Symbol not found: _PyCFunction_Check
  Referenced from: /usr/local/lib/python2.7/site-packages/Cython/Compiler/Scanning.so
  Expected in: flat namespace
 in /usr/local/lib/python2.7/site-packages/Cython/Compiler/Scanning.so
error: Cython does not appear to be installed 
```

Cython*已*安装，并且`scanning.so`确实包含有问题的符号：

```
$ nm -gl /usr/local/lib/python2.7/site-packages/Cython/Compiler/Scanning.so | grep _PyCFunction_Check
             U _PyCFunction_Check 
```

有任何想法吗？我在 OS X 10.7.5 上使用自制 python 2.7.3。

**编辑：**正如下面@bdash 的评论所指出的，`U _PyCFunction_Check`实际上意味着这 `_PyCFunction_Check`是未定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:57:27.920

解决方案非常简单：我卸载了 brew python 和 pip 安装的 Cython 并重新安装了两者，之后一切似乎都正常了。

我认为问题在于我安装了 python 和 brew 只安装了 Xcode。同时——在我安装 Cython 之前——我安装了 Apple 的命令行工具。所以 python 和 Cython 是在不同的条件下安装的，这可能会导致错误。

# php - 带有额外字符的PHP mySQL密码问题

> ID：14533356
> 
> 赞同：0
> 
> 时间：2013-01-26T02:48:58.440
> 
> 标签：php, passwords

我对 php 和 mysql 很陌生。我找到了一个很棒的教程来创建网站上的注册和登录部分。我正在设法很好地解构它并进行细微的更改。然而...

登录时，如果密码不正确，它会验证并返回错误。如果正确，它会登录。

我遇到的问题是，如果您输入了正确的密码，但在它既不验证也不登录后添加了额外的字符。只是进入一个空白页面。这是登录页面的验证码 -

```
<?php
include('db.php'); 
if(!isset($_POST['login']))//checking if user has entered this page directly
{
include('form.php');
}
else{
if(isset($_POST['user'])&&$_POST['user']==""||!isset($_POST['user']))
{
$error[] = "Username Field can't be left blank";
$usererror = "1";
}
if(!isset($usererror))
{
$user = mysql_real_escape_string($_POST['user']);
$sql = "SELECT * FROM users WHERE user = '$user'";
if(mysql_num_rows(mysql_query($sql))=="0")//1 means there is one entry same so we print error
{
$error[] = "Can't find a user with this username"; 
}
}
if(isset($_POST['pass'])&&$_POST['pass']==""||!isset($_POST['pass']))
{
$error[] = "password Field can't be left blank";
}
if(isset($error)){
if(is_array($error)){echo "<div class=\"error\"><span>please check the errors and refill the form<span><br/>";
foreach ($error as $ers) {     
echo "<span>".$ers."</span><br/>";
}
echo "</div>";
include('form.php');
}
}
if(!isset($error)){
$suser=mysql_real_escape_string($_POST['user']);
$spass=md5($_POST['pass']);//for secure passwords
$find = "SELECT * FROM users WHERE user = '$suser' AND password = '$spass'";
if(mysql_num_rows(mysql_query($find))=="1"or die(mysql_error())){
session_start();
$_SESSION['username'] = $suser;
header("Location: loggedin.php");
}
else{
echo "<div class=\"warning\"><span>Some Error occured durring processing your data</div>";
}
}
}
?> 
```

任何帮助将不胜感激...

编辑

我刚刚注意到我得到的唯一错误是如果没有输入密码。如果输入了错误的密码，我会看到空白页。谁能帮忙解释为什么密码没有被验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:50:15.130

~~用于[`trim()`](http://us3.php.net/manual/en/function.trim.php)处理字符串前后的多余空格~~

看来是逻辑问题。您需要使用括号来组织条件：

```
if(
    (isset($_POST['pass'])&&$_POST['pass']=="")
  ||
    !isset($_POST['pass'])
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:07:25.653

~~if(mysql_num_rows(mysql_query($find))=="1"or die(mysql_error())){~~

~~如果 SQL 查询没有返回结果（意味着密码和用户名不匹配），则 if 语句返回 false 并且没有任何反应。在这种情况下，您应该返回一条错误消息。~~

编辑：

之后我没有注意到 else 语句。我认为实际的问题是**die(mysql_error())**。当 SQL 查询没有返回结果时，该 if 语句将执行 die(mysql_error())，这将返回一个空白，因为空结果不是错误。

我建议你删除 die(mysql_error()) 并包含一个单独的 if 语句来检查 mysql_errno() （当出现错误时返回 true）。

> if (mysql_errno()) { die(mysql_error()); }

值得注意的是 mysql_* 函数在最新版本的 PHP 中已被弃用。建议使用 MySQLi 或 PDO 连接 PHP 中的 MySQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:18:08.503

试试这个，看看它是否有效。

```
if(mysql_num_rows(mysql_query($find))=="1") {
  session_start();
  $_SESSION['username'] = $suser;
  header("Location: loggedin.php");
} else {
  echo "<span>Your username or password was incorrect.</span>";
  include "form.php";
  die;
} 
```

# wcf - WCF 服务 - 混合安全绑定？

> ID：14533359
> 
> 赞同：1
> 
> 时间：2013-01-26T02:49:48.063
> 
> 标签：wcf, iis

我目前在 WCF 服务上有以下绑定：

> ```
>  <basicHttpBinding>
>     <binding name="BasicHttpEndpointBinding">
>       <security mode="TransportCredentialOnly">
>         <transport clientCredentialType="Ntlm" />
>         <message clientCredentialType="UserName" algorithmSuite="Default" />
>       </security>
>     </binding>
>   </basicHttpBinding> 
> ```

和

> ```
>  <webHttpBinding>
>     <binding name="WebHttpEndpointBinding">
>       <security mode="None" />
>     </binding>
>   </webHttpBinding> 
> ```

使用相应的端点：

> ```
>  <endpoint address=""
>               binding="basicHttpBinding"
>               bindingConfiguration="BasicHttpEndpointBinding"
>               bindingNamespace="http://services.company.net/MyWcfService"
>               contract="MyWcfService.Interface.IMyWcfService">
>     </endpoint>
>     <endpoint address="RestService"
>               behaviorConfiguration="restServiceBehavior"
>               binding="webHttpBinding"
>               bindingConfiguration="WebHttpEndpointBinding"
>               contract="MyWcfService.Interface.IMyWcfService" />
>   </service> 
> ```

这个想法是让客户端调用“BasicHttpEndpointBinding”绑定以要求 NTLM 身份验证，而调用“WebHttpEndpointBinding”的客户端能够匿名执行此操作（通过 jQuery 的 RESTful 调用）。

虽然这似乎适用于我的机器，但在 IIS 7.5 托管环境中这似乎可行吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:55:15.963

您需要`endpoint`为每个单独的`binding`.

复制现有的`endpoint`，然后更新`address`and `binding`。

> `/{myService}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:02:11.940

这适用于启用匿名和 Windows 身份验证的 IIS。

# javascript - 如何更改 IFRAME location.hash 值而不让父级跳转到 IFRAME？

> ID：14533361
> 
> 赞同：2
> 
> 时间：2013-01-26T02:49:55.923
> 
> 标签：javascript, html, iframe

我已成功更改了 IFRAME 位置的哈希值（[作为通过 Google Document Viewer 进行外部化导航的一部分](https://stackoverflow.com/a/9228965/866618)），但是我无法弄清楚如何在函数时阻止父级跳到 IFRAME 的顶部被触发。

有人有 JS/jQuery 解决方案吗？我找到[了这个问答](https://stackoverflow.com/a/5651372/866618)（也在下面），但解决方案似乎很脏并且容易出现问题。想法？

```
var yScroll=document.body.scrollTop;
window.location.hash = id;
document.body.scrollTop=yScroll; 
```

另外，作为参考，我正在使用的功能是这样的：

```
function st_go_to_pg( pg ){
    if( pg >= 0) jQuery('.gde-frame').first()[0].contentWindow.location.hash=':0.page.'+pg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:31:13.510

由于看起来没有人有比我在最初问题中包含的更好的解决方案，我想我将把它作为答案发布。

在不更改父页面的 y 滚动位置的情况下更改嵌入文档中的页面的结果函数如下：

```
function go_to_pg( pg ){
    var y=document.body.scrollTop; // save parent y to undo jump to top of IFRAME
    if( pg >= 0) jQuery('.gde-frame').first()[0].contentWindow.location.hash=':0.page.'+pg;
    document.body.scrollTop=y; // reset y
} 
```

# python - 在 Python 中解析来自 .ics 文件的事件

> ID：14533364
> 
> 赞同：2
> 
> 时间：2013-01-26T02:50:20.077
> 
> 标签：python, date, calendar, icalendar

基本上我的目标是我希望能够将 ics 文件作为输入，并能够解析出日期的事件，然后从每个事件中分解出其中的信息。[我一直在尝试用http://pypi.python.org/pypi/icalendar](http://pypi.python.org/pypi/icalendar)弄清楚

这是据我所知..

```
from icalendar import Calendar, Event
cal = Calendar.from_ical(open('Work.ics','rb').read())

for component in cal.walk():
    print component 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:03:53.703

取决于“解析事件日期”的含义：您是否应该知道所有实例日期（RRULE、RDATE、EXDATE）的能力，您也可以尝试[pyICSParser a ics events enumerator](http://pypi.python.org/pypi/pyICSParser/0.6.1x7)来列出事件实例：

```
mycal = icalendar.ics()
mycal.local_load("work.ics")
dates = mycal.get_event_instances(start,end)
#dates will contain the json with all explicit dates of the events spec'ed by the iCalendar file 
```

PS：免责声明 - 我写/仍在写这个模块，到目前为止它只处理 DATE 而不是 DATE-TIME 属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:34:20.707

也许尝试：

```
with Calendar.from_ical(open("work.ics")) as FileObj:
    for components in FileObj:
        print components 
```

这应该打印文件中的每一行（未经测试）。

# java - 从字节数组中读取 4 位块

> ID：14533367
> 
> 赞同：3
> 
> 时间：2013-01-26T02:50:30.373
> 
> 标签：java, android

我`byte[]`从外部输入中得到一个，其中每个字节存储**两个**4 位值。我的任务是从这个紧凑的数组中读取索引**idx**的 4 位值。我从来没有写过这样的代码，所以我想知道我下面的解决方案是否正确，如果是，那么是否有更优化的方法来做到这一点。（请让我免于“你为什么不自己测试它”的评论；测试不能证明某事的正确性，只能证明不正确......）。

所以字节和值看起来像（每个 [] 是一个`byte`）：

```
[value0|value1] [value2|value3] [value4|value5] [value6|value7] 
```

我必须用 index 检索值`idx`。明显地：

*   如果 i 是偶数，则表达式为：`array[idx/2] & 0xF0`
*   如果 i 是奇数，则表达式为：`array[idx/2] & 0x0F`

所以代码是：

```
if (idx % 2 == 0) {
   return array[idx/2] & 0xF0;
}
return array[idx/2] & 0x0F; 
```

这是正确的和最优的吗？

* * *

**“快速”读者的更新**：这是不正确的，请参阅答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:59:03.677

您的想法应该是正确的，但我认为您可能希望更改代码以使用位移：

```
if (idx % 2 == 0) {
   return array[idx/2] >>> 4; // unsigned bit shift
}else{
    return array[idx/2] & 0x0F;
} 
```

因为如果你有`01000011`，你可能想要得到`4,3`而不是`64,3`。

顺便说一句，我个人认为使用`else`块代码会更清晰。编译后的操作码不会有任何不同。

# python - Biopython 1.60 中的 Bio.Entrez 和蛋白质问题

> ID：14533368
> 
> 赞同：1
> 
> 时间：2013-01-26T02:50:31.870
> 
> 标签：python, bioinformatics, biopython, ncbi, protein-database

我在使用 Bio.Entrez 搜索蛋白质时遇到问题。我正在这样做：

```
>>> handle=Entrez.esearch(db="protein", term="insulin AND homo")
>>> record=Entrez.read(handle)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/__init__.py", line 351, in read
    record = handler.read(handle)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/Parser.py", line 169, in read
    self.parser.ParseFile(handle)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/Parser.py", line 307, in endElementHandler
    raise RuntimeError(value)
RuntimeError: Search Backend failed: Database is not supported: protein 
```

我也遇到了 einfo() 的问题，请查看：

```
>>> handler=Entrez.einfo(db="protein")
>>> record=Entrez.read(handler)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/__init__.py", line 351, in read
    record = handler.read(handle)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/Parser.py", line 169, in read
    self.parser.ParseFile(handle)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/Parser.py", line 285, in startElementHandler
    raise ValidationError(name)
Bio.Entrez.Parser.ValidationError: Failed to find tag 'Build' in the DTD. To skip all tags that are not represented in the DTD, please call Bio.Entrez.read or Bio.Entrez.parse with validate=False. 
```

为什么不支持蛋白质数据库？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:54:16.840

也在 Biopython 邮件列表中提出，显然现在正在工作：http: [//lists.open-bio.org/pipermail/biopython/2013-January/008306.html](http://lists.open-bio.org/pipermail/biopython/2013-January/008306.html)

我们认为这是 NCBI 的一个暂时性问题。

# jquery - 通过 DropKick.js 传递表格排序功能

> ID：14533370
> 
> 赞同：1
> 
> 时间：2013-01-26T02:51:01.517
> 
> 标签：jquery, tablesorter, jquery-dropkick

在过去一天左右的时间里，我一直在努力让两个相当流行的 jquery 脚本一起工作，dropkick.js 和 tablesorter.pager.js。我对 JS 比较陌生，但我遇到的问题是不知道通过 dropkick 函数的正确语法。

这两个脚本都运行在相同版本的 jquery 上，我遇到的唯一问题是，当进行选择时，显示的结果数量不会改变。例如，如果一个表中显示了 10 个结果，并且我选择 5 作为选择选项，则该表应该只显示 5 个结果而不重新加载页面。

两个脚本都可以独立工作，但 dropkick.js 不使用更改函数对其值不做任何事情。

**这是表单 HTML 数据：**

表 ID：“#user-search-results”

```
<div id="pager" class="pager">
<form>
    <img src="images/first.png" class="first"/>
    <img src="images/prev.png" class="prev"/>
    <input type="text" class="pagedisplay"/>
    <img src="images/next.png" class="next"/>
    <img src="images/last.png" class="last"/>
    <select class="pagesize">
        <option value="1">1 per page</option>
        <option value="2">2 per page</option>
                    <option value="100">100 per page</option>

             </select>
</form>
</div> 
```

注意：低值用于测试目的。

**jquery.tablesorter.pager.js**

```
(function($) {
$.extend({
    tablesorterPager: new function() {

        function updatePageDisplay(c) {
            var s = $(c.cssPageDisplay,c.container).val((c.page+1) + c.seperator + c.totalPages);   
        }

        function setPageSize(table,size) {
            var c = table.config;
            c.size = size;
            c.totalPages = Math.ceil(c.totalRows / c.size);
            c.pagerPositionSet = false;
            moveToPage(table);
            fixPosition(table);
        }

        function fixPosition(table) {
            var c = table.config;
            if(!c.pagerPositionSet && c.positionFixed) {
                var c = table.config, o = $(table);
                if(o.offset) {
                    c.container.css({
                        top: o.offset().top + o.height() + 'px',
                        position: 'absolute'
                    });
                }
                c.pagerPositionSet = true;
            }
        }

        function moveToFirstPage(table) {
            var c = table.config;
            c.page = 0;
            moveToPage(table);
        }

        function moveToLastPage(table) {
            var c = table.config;
            c.page = (c.totalPages-1);
            moveToPage(table);
        }

        function moveToNextPage(table) {
            var c = table.config;
            c.page++;
            if(c.page >= (c.totalPages-1)) {
                c.page = (c.totalPages-1);
            }
            moveToPage(table);
        }

        function moveToPrevPage(table) {
            var c = table.config;
            c.page--;
            if(c.page <= 0) {
                c.page = 0;
            }
            moveToPage(table);
        }

        function moveToPage(table) {
            var c = table.config;
            if(c.page < 0 || c.page > (c.totalPages-1)) {
                c.page = 0;
            }

            renderTable(table,c.rowsCopy);
        }

        function renderTable(table,rows) {

            var c = table.config;
            var l = rows.length;
            var s = (c.page * c.size);
            var e = (s + c.size);
            if(e > rows.length ) {
                e = rows.length;
            }

            var tableBody = $(table.tBodies[0]);

            // clear the table body

            $.tablesorter.clearTableBody(table);

            for(var i = s; i < e; i++) {

                //tableBody.append(rows[i]);

                var o = rows[i];
                var l = o.length;
                for(var j=0; j < l; j++) {

                    tableBody[0].appendChild(o[j]);

                }
            }

            fixPosition(table,tableBody);

            $(table).trigger("applyWidgets");

            if( c.page >= c.totalPages ) {
                moveToLastPage(table);
            }

            updatePageDisplay(c);
        }

        this.appender = function(table,rows) {

            var c = table.config;

            c.rowsCopy = rows;
            c.totalRows = rows.length;
            c.totalPages = Math.ceil(c.totalRows / c.size);

            renderTable(table,rows);
        };

        this.defaults = {
            size: 1,
            offset: 0,
            page: 0,
            totalRows: 0,
            totalPages: 0,
            container: null,
            cssNext: '.next',
            cssPrev: '.prev',
            cssFirst: '.first',
            cssLast: '.last',
            cssPageDisplay: '.pagedisplay',
            cssPageSize: '.pagesize',
            seperator: "/",
            positionFixed: false,
            appender: this.appender
        };

        this.construct = function(settings) {

            return this.each(function() {   

                config = $.extend(this.config, $.tablesorterPager.defaults, settings);

                var table = this, pager = config.container;

                $(this).trigger("appendCache");

                config.size = parseInt($(".pagesize",pager).val());

                $(config.cssFirst,pager).click(function() {
                    moveToFirstPage(table);
                    return false;
                });
                $(config.cssNext,pager).click(function() {
                    moveToNextPage(table);
                    return false;
                });
                $(config.cssPrev,pager).click(function() {
                    moveToPrevPage(table);
                    return false;
                });
                $(config.cssLast,pager).click(function() {
                    moveToLastPage(table);
                    return false;
                });
                $(config.cssPageSize,pager).change(function() {
                    setPageSize(table,parseInt($(this).val()));
                    return false;
                });
            });
        };

    }
});
// extend plugin scope
$.fn.extend({
    tablesorterPager: $.tablesorterPager.construct
});

})(jQuery); 
```

**工作表排序脚本：**

```
<script defer="defer">
$(document).ready(function() 
{ 
    $('#user-search-results')
    .tablesorter({widthFixed: false, widgets: ['zebra']})
    .tablesorterPager({container: $('#pager')});

} 
); 
</script> 
```

**我的最新版本包括 dropkick：**

```
<script defer="defer">
$(document).ready(function() 
{ 
    $('#user-search-results')
    .tablesorter({widthFixed: false, widgets: ['zebra']})
    .tablesorterPager({container: $('#pager')});

    $('.pagesize').dropkick({
    change: function () {
        tablesorterPager({container: $('#pager')});
    }
    });

} 
); 
</script> 
```

我尝试从 dropkick 更改函数中的寻呼机脚本调用不同的函数，并为各个函数传入所需的变量，包括“值”。

**例如：**

```
<script defer="defer">
$(document).ready(function() 
{ 
    $('#user-search-results')
    .tablesorter({widthFixed: false, widgets: ['zebra']})
    .tablesorterPager({container: $('#pager')});

    $('.pagesize').dropkick({
    change: function (value) {
        setPageSize('table#user-search-results', value);
    }
    });

} 
); 
</script> 
```

我非常卡在ATM上，它阻碍了我的整个项目。正如我之前提到的，我是 jquery 的新手，我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:45:10.120

我在尝试让 dropkick 将选择放在同一个地方时遇到了很多问题，但这里有[一个演示](http://jsfiddle.net/Mottie/abkNM/332/)它的工作原理。

```
$('table')
    .bind('pagerInitialized', function (e, c) {
        $(".pagesize, .gotoPage").dropkick({
            change: function (value, label) {
                $(this).trigger('change');
            }
        });
    })
    .tablesorter({
        theme: 'blue'
    })
    .tablesorterPager({
        container: $(".pager"),
        // {page}, {totalPages}, {startRow}, {endRow} and {totalRows}
        output: '{startRow} to {endRow} ({totalRows})'
    }); 
```

*   请注意，底部寻呼机 ( `name="pagesize2"`) 的选择名称必须与顶部名称 ( `name="pagesize"`)不同

* * *

或者，我尝试了其他方法，例如使用[纯 css](http://jsfiddle.net/Mottie/abkNM/330/)，选择被包裹`<label>`

```
 .tablesorter-pager select {
    padding:3px;
    margin: 0;
    border-radius:4px;
    -webkit-box-shadow: 0 3px 0 #ccc, 0 -1px #fff inset;
    background: #f8f8f8;
    color:#888;
    border:none;
    outline:none;
    display: inline-block;
    -webkit-appearance:none;
    cursor:pointer;
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
    .tablesorter-pager select {
        padding-right:18px
    }
    label {
        position:relative
    }
    label:after {
        content:'<>';
        font:11px"Consolas", monospace;
        color:#aaa;
        -webkit-transform:rotate(90deg);
        position:absolute;
        right:4px;
        top:2px;
        padding:0 0 2px;
        pointer-events:none;
        border-bottom:1px solid #ddd;
    }
} 
```

* * *

并使用[uniform.js](http://uniformjs.com/)，这是我最喜欢的 -[演示](http://jsfiddle.net/Mottie/abkNM/331/)：

```
$("select").uniform();

$('table')
    .bind('pagerInitialized', function (e, c) {
        $.uniform.update();
    })
    .tablesorter({
        theme: 'blue'
    })
    .tablesorterPager({
        container: $(".pager"),
        // {page}, {totalPages}, {startRow}, {endRow} and {totalRows}
        output: '{startRow} to {endRow} ({totalRows})'
    }); 
```

# jquery - 单击时关闭叠加层

> ID：14533372
> 
> 赞同：0
> 
> 时间：2013-01-26T02:51:27.580
> 
> 标签：jquery, click, overlay

当用户单击它时，我正在尝试关闭我添加到此的叠加层。关闭按钮有效，但覆盖无效。不过，叠加层确实会自动关闭。我会假设我下面的内容会起作用，但不是。我错过了什么吗？

```
(function (a) {
a.sticky = function (b, c, d) {
    return a.fn.sticky(b, c, d)
};
a.fn.sticky = function (b, c, d) {
    var e = "top-right";
    var f = {
        speed: "slow",
        duplicates: true,
        autoclose: 2200
    };
    if (!b) {
        b = this.html()
    }
    if (c) {
        a.extend(f, c)
    }
    var g = true;
    var h = "no";
    var i = Math.floor(Math.random() * 99999);
    a(".sticky-note").each(function () {
        if (a(this).html() == b && a(this).is(":visible")) {
            h = "yes";
            if (!f["duplicates"]) {
                g = false
            }
        }
        if (a(this).attr("id") == i) {
            i = Math.floor(Math.random() * 9999999)
        }
    });
    if (!a("body").find(".sticky-queue").html()) {
        a("body").append('<div class="sticky_overlay"><div class="sticky-queue"></div></div>')
    }
    if (g) {
        a(".sticky-queue").prepend('<div class="sticky border-' + e + '" id="' + i + '"></div>');
        a("#" + i).append('<img src="images/close.png" class="sticky-close" rel="' + i + '" title="Close" />');
        a("#" + i).append('<div class="sticky-note" rel="' + i + '">' + b + "</div>");
        var j = a("#" + i).height();
        a("#" + i).css("height", j);
        a("#" + i).hide().fadeIn(f["speed"]);
        g = true
    }
    a(".sticky").ready(function () {
        if (f["autoclose"]) {
            a("#" + i).delay(f["autoclose"]).fadeOut(f["speed"]);
            a(".sticky_overlay").delay(f["autoclose"]).fadeOut(f["speed"]);
        }
    });
    a(".sticky-close").click(function () {
        a(".sticky_overlay").dequeue().fadeOut(f["speed"]);
    });
//--- this is where I'm trying to close by clicking the overlay ---//
a(".sticky_overlay").click(function () {
        a(".sticky_overlay").dequeue().fadeOut(f["speed"]);
    });
//--- this is where I'm trying to close by clicking the overlay ---//
    var k = {
        id: i,
        duplicate: h,
        displayed: g,
        position: e
    };
    if (d) {
        d(k)
    } else {
        return k
    }
}
})(jQuery); 
```

它显示的 HTML：

```
<div class="sticky_overlay" style="display: block;">
 <div class="sticky-queue">
  <div class="sticky border-top-right" id="79528" style="height: 40px; display: block;">
   <img src="images/close.png" class="sticky-close" rel="79528" title="Close">
   <div class="sticky-note" rel="79528">
    <div class="messages status_green">Project created!</div>
   </div>
  </div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:38:27.750

尝试像 N Rohler 指出的那样更改`.click()`为ooorrrr 。以下是文档的链接：`.live()``.on()`

[http://api.jquery.com/live/](http://api.jquery.com/live/)

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# windows - Visual Studio 2012 安装限制

> ID：14533374
> 
> 赞同：6
> 
> 时间：2013-01-26T02:51:47.813
> 
> 标签：windows, visual-studio-2012, installation

在尝试安装 Visual Studio 2012 时，我注意到它需要占用我启动磁盘的很大一部分作为安装的先决条件：

![在此处输入图像描述](../Images/f9b28534bc20cc33dfa203f4e6578ec8.png)

它在我的引导驱动器上需要比它要存在的目录多**一倍的磁盘空间！**这是什么疯狂？

做了一些搜索，我找到了一个有类似问题的用户，但他只能通过卸载所有额外的驱动器来解决他的问题，然后启动安装程序。据推测，他要安装的驱动器上有一个操作系统。我不。（也不想这样做）。他的困境在这里概述：[https ://stackoverflow.com/questions/14466787/why-does-visual-studio-install-onto-multiple-drives](https://stackoverflow.com/questions/14466787/why-does-visual-studio-install-onto-multiple-drives "Visual Studio 安装到多个驱动器上")

根据上述问题中的建议，我将所有“temp”目录引用移动到指向“E:\”驱动器以尝试将其强制关闭“C:\”，如下所示：

![在此处输入图像描述](../Images/e4461687eca95b6c54f18fbf73120743.png)

但没有骰子。据记载，文件只是临时的；如果是这样，为什么它*坚持*将大量文件放到我的启动盘上？我可以接受这个，除了我没有 6 GB 的空间来进行这个安装，并且没有足够的空间让它完成它。该磁盘来自消费级 SSD 的早期阶段，因此选择很纤薄，这没关系，因为我从来没有想过它可以容纳空间不足的应用程序。

除了扩展磁盘，或者荒谬地卸载一堆其他应用程序，安装 Visual Studio，然后重新安装其他应用程序之外，我能做些什么吗？考虑到我在另一个驱动器上有 TB 的空间可以使用，这是一个特别令人沮丧的问题；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T21:31:48.157

我最终通过使用 Windows 7 中包含的 DISM（部署映像服务和管理）实用程序回收了大部分启动驱动器：[DISM 实用程序](http://technet.microsoft.com/en-us/library/dd744382%28v=ws.10%29.aspx "DISM 实用程序")具体来说，我使用以下参数运行了 DISM 工具：

```
>dism.exe /online /cleanup-image /spsuperseded 
```

据推测，Windows 正在存储服务包和更新的卸载信息，这会占用大量空间。通过将自己“锁定”到当前的服务包中，我能够在系统驱动器上释放 6 多个演出空间。如果这是一台关键的生产机器，我会更加担心，但由于我的机器本质上是一台低影响的家用机器，没有理由保留旧的服务包文件。

然而，这并不能解决最初的问题，但我认为这对于希望从更“晦涩”的方法中回收空间的人来说是一个有用的提示。为 Ken White 的洞察力干杯，我希望这些信息可以帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T17:44:16.827

这似乎是 Visual Studio 的一个“功能”，其中很大一部分东西必须安装在系统驱动器上，例如：

*   共享运行时，如 .NET Framework 和 Visual C/C++，需要安装到系统驱动器中。
*   与具有自己的安装文件夹（如 SQL Server 和 Windows SDK）的其他产品共享的包
*   与 Office 等其他应用程序或 IIS 等服务共享的组件
*   Windows 安装程序和程序包缓存

参考：http: [//blogs.msdn.com/b/heaths/archive/2012/03/07/why-visual-studio-11-requires-space-on-the-system-drive.aspx](http://blogs.msdn.com/b/heaths/archive/2012/03/07/why-visual-studio-11-requires-space-on-the-system-drive.aspx)

# php - 过滤结果时是否有更短的方法来设置查询？

> ID：14533388
> 
> 赞同：0
> 
> 时间：2013-01-26T02:55:35.137
> 
> 标签：php, mysqli

我有 2 个下拉菜单，用户可以使用下拉菜单过滤他们希望看到的学生和问题。可能的过滤器类型有：

*   选择所有学生和所有问题
*   选择所有学生和一个问题
*   选择所有问题和一名学生
*   选择一名学生和一个问题

下面是下拉菜单：

```
<p>
    <strong>Student:</strong>
    <select name="student" id="studentsDrop">
    <option value="All">All</option>
    <?php
    while ( $currentstudentstmt->fetch() ) {
    $stu = $dbStudentId;
    if(isset($_POST["student"]) && $stu == $_POST["student"]) 
        echo "<option selected='selected' value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
    else
        echo "<option value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
    }
    ?>
    </select>
    </p>

    <p>
    <strong>Question:</strong>
    <select name="question" id="questionsDrop">
    <option value="All">All</option>
    <?php
    while ( $questionsstmt->fetch() ) {
    $ques = $dbQuestionId;
    if(isset($_POST["question"]) && $ques == $_POST["question"]) 
        echo "<option selected='selected' value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
    else
        echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
    }
    ?>
    </select>

</p> 
```

现在我想设置一个 mysqli 查询来确定从下拉菜单中选择的学生和问题。

我的问题只是我需要设置 4 个查询来检查我从下拉菜单中提到的 4 种可能性，还是有更短的方法？

我必须使用：

```
 if ($_POST['question'] == 'All' && if ($_POST['student'] == 'All'){){

//NO WHERE CLAUSE

    if ($_POST['question'] == 'All' && if ($_POST['student'] != 'All'){){

//WHERE CLAUSE FOR FINDING SELECTED STUDENT

    if ($_POST['question'] != 'All' && if ($_POST['student'] == 'All'){){

//WHERE CLAUSE FOR FINDING SELECTED QUESTION 

    if ($_POST['question'] != 'All' && if ($_POST['student'] != 'All'){){

//WHERE CLAUSE FOR FINDING SELECTED QUESTION AND SELECTED STUDENT 
```

**更新：**

我现在拥有的：

```
 function AssessmentIsSubbmitted()
{
    if(isset($_POST['answerSubmit'])) // we have subbmited the first form
    {

//QUERY 1: Student details depending on selected student(s)

if ($_POST['student'] == 'All'){

$selectedstudentqry = "
SELECT
StudentAlias, StudentForename, StudentSurname
FROM Student s
INNER JOIN Student_Session ss ON s.StudentId = ss.StudentId
WHERE SessionId = ?
ORDER BY StudentAlias
";

global $mysqli;
$selectedstudentstmt=$mysqli->prepare($selectedstudentqry);
// You only need to call bind_param once
$selectedstudentstmt->bind_param("i",$_POST["session"]);
// get result and assign variables (prefix with db)
$selectedstudentstmt->execute(); 
$selectedstudentstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname);
$selectedstudentstmt->store_result();
$selectedstudentnum = $selectedstudentstmt->num_rows();     

}else{  

$selectedstudentqry = "
SELECT
StudentAlias, StudentForename, StudentSurname
FROM
Student
WHERE
(StudentId = ?)
ORDER BY StudentAlias
";

global $mysqli;
$selectedstudentstmt=$mysqli->prepare($selectedstudentqry);
// You only need to call bind_param once
$selectedstudentstmt->bind_param("i",$_POST["student"]);
// get result and assign variables (prefix with db)
$selectedstudentstmt->execute(); 
$selectedstudentstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname);
$selectedstudentstmt->store_result();
$selectedstudentnum = $selectedstudentstmt->num_rows();    

}    

//QUERY 2: Question details depending on selected question(s)

if ($_POST['question'] == 'All'){

$selectedquestionqry = " SELECT q.QuestionNo, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
                    ORDER BY Answer
                    SEPARATOR ',' ) AS Answer, r.ReplyType, q.QuestionMarks
                    FROM Question q
                    LEFT JOIN Answer an ON q.QuestionId = an.QuestionId
                    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
                    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
                    WHERE SessionId = ?
                    GROUP BY q.QuestionId
                    ORDER BY q.QuestionId";
";

global $mysqli;
$selectedquestionstmt=$mysqli->prepare($selectedquestionqry);
// You only need to call bind_param once
$selectedstudentstmt->bind_param("i",$_POST["session"]);
// get result and assign variables (prefix with db)
$selectedquestionstmt->execute(); 
$selectedquestionstmt->bind_result($detailsQuestionNo,$detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,
$detailsAnswer,$detailsReplyType,$detailsQuestionMarks);
$selectedquestionstmt->store_result();
$selectedquestionnum = $selectedquestionstmt->num_rows(); 

}else{

$selectedquestionqry = "
SELECT q.QuestionNo, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
                    ORDER BY Answer
                    SEPARATOR ',' ) AS Answer, r.ReplyType, q.QuestionMarks
                    FROM Question q
                    LEFT JOIN Answer an ON q.QuestionId = an.QuestionId
                    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
                    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
                    WHERE QuestionId = ?
                    GROUP BY q.QuestionId
                    ORDER BY q.QuestionId
";

global $mysqli;
$selectedquestionstmt=$mysqli->prepare($selectedquestionqry);
// You only need to call bind_param once
$selectedquestionstmt->bind_param("i",$_POST["question"]);
// get result and assign variables (prefix with db)
$selectedquestionstmt->execute(); 
$selectedquestionstmt->bind_result($detailsQuestionNo,$detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,
$detailsAnswer,$detailsReplyType,$detailsQuestionMarks);
$selectedquestionstmt->store_result();
$selectedquestionnum = $selectedquestionstmt->num_rows(); 

}

//QUERY 3: Student Answers depending on selected student(s) and selected question(s)

$studentanswerqry = "
SELECT
sa.StudentId, sa.QuestionId, GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
FROM Student_Answer sa
INNER JOIN Student_Response sr ON sa.StudentId = sr.StudentId
WHERE
(sa.StudentId = ? AND sa.QuestionId = ?)
GROUP BY sa.StudentId, sa.QuestionId
";

global $mysqli;
$studentanswerstmt=$mysqli->prepare($studentanswerqry);
// You only need to call bind_param once
$studentanswerstmt->bind_param("ii",$_POST["student"], $_POST["question"]);
// get result and assign variables (prefix with db)
$studentanswerstmt->execute(); 
$studentanswerstmt->bind_result($detailsStudentAnswer,$detailsResponseTime,$detailsMouseClick,$detailsStudentMark);
$studentanswerstmt->store_result();
$studentanswernum = $studentanswerstmt->num_rows(); 

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:06:41.793

您可以迭代地构建一个`WHERE`子句。考虑一个`WHERE`子句进行显式过滤，因此对于您选择“全部”某物的情况，您不需要添加任何过滤器。其他过滤器是相互建立的，所以我们可以简单地将它们与`AND`s连接起来`WHERE`：

```
$query = 'SELECT ... FROM ...';

// Initially empty
$where = array();
$parameters = array();

// Check whether a specific student was selected
if($stu !== 'All') {
    $where[] = 'stu = ?';
    $parameters[] = $stu;
}

// Check whether a specific question was selected
// NB: This is not an else if!
if($ques !== 'All') {
    $where[] = 'ques = ?';
    $parameters[] = $ques;
}

// If we added to $where in any of the conditionals, we need a WHERE clause in
// our query
if(!empty($where)) {
    $query .= ' WHERE ' . implode(' AND ', $where);
}

$result = prepare_and_execute_query($query, $parameters); 
```

* * *

好的，所以查看您的更新，您有一组相当复杂的查询，但可以将其组合成一个语句。试试这个：

```
SELECT
    s.StudentId, s.StudentAlias, s.StudentForename,         -- Student fields
    s.StudentSurname,
    q.QuestionId, q.QuestionNo, q.QuestionContent,          -- Question fields
    q.OptionType, q.NoofAnswers, q.Answer, q.ReplyType,
    q.QuestionMarks,
    GROUP_CONCAT(DISTINCT sa.StudentAnswer ORDER BY         -- Answer fields
        sa.StudentAnswer SEPARATOR ',') AS StudentAnswer,
    sr.ResponseTime, sr.MouseClick, sr.StudentMark
FROM Student s
INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
WHERE                     -- This WHERE clause may be entirely removed, 
                          -- depending on the filters
    s.StudentId = ? AND   -- This is removed if $_POST['student'] is 'All'
    q.QuestionId = ?      -- This is removed if $_POST['question'] is 'All'
GROUP BY sa.StudentId, q.QuestionId 
```

我认为这会做你想要的。我不太确定哪些字段是其中的一部分，`Student_Response`哪些是其中的一部分，`Student_Answer`因此您可能不得不摆弄`SELECT`.

* * *

不幸的是，这种方法不适用于您的用例。但是我们仍然可以考虑我提出的原始逻辑如何与您给出的一个查询一起工作：

```
$selectedstudentqry = "
SELECT
StudentAlias, StudentForename, StudentSurname
FROM
Student ";
if($_POST['student'] !== 'All') { // Check here
    $selectedstudentqry .= "
    WHERE
    (StudentId = ?) ";
}
$selectedstudentqry .= "
ORDER BY StudentAlias
";

global $mysqli;
$selectedstudentstmt=$mysqli->prepare($selectedstudentqry);
if($_POST['student'] !== 'All') {
    // You only need to call bind_param once
    $selectedstudentstmt->bind_param("i",$_POST["student"]);
}
// get result and assign variables (prefix with db)
$selectedstudentstmt->execute(); 
$selectedstudentstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname);
$selectedstudentstmt->store_result();
$selectedstudentnum = $selectedstudentstmt->num_rows(); 
```

请注意我们如何简单地将外部`if`s 移动到代码中更具体的位置以减少代码重复。如果你看到像你一样的重复，很有可能你正在做一些事情，比如让你的条件句过于宽泛。不过，您肯定在尝试简化这一点并减少冗余方面走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T15:44:44.903

这是我在有 64 种用户输入排列时使用的代码。可以有来自另一个页面的乘客 ID、部分名字和/或姓氏、年份、月份或课程 ID。

用各种 AND、IS LIKE 等构建 where 子句的一部分。

```
$params = array();
$types = "";

if ( isset($_GET["riderid"]) && $_GET["riderid"] )  {
    $where = sprintf (' AND %s.id = ?', $tables["rider"]);
    $params[]= $_GET["riderid"];
    $types = $types .'i';

} else {
    if ( isset($_GET["last"]) && $_GET["last"] ) {

        $where = sprintf(' AND %s.last like ?', $tables["rider"]);
        $params[] = $_GET["last"] . "%";
        $types = $types . "s";
    }

    if ( isset($_GET["first"]) && $_GET["first"] ) {

        $whereFirst = sprintf(' AND %s.first like ?', $tables["rider"]);
        $where = $where . $whereFirst;
        $params[] = $_GET["first"] . "%";
        $types = $types . "s";
    }
}

if ( isset($_GET["year"]) && $_GET["year"] && $_GET["year"] != -1 )  {
    $whereYear = sprintf(' AND YEAR(%s.date) = ?', $tables["race"]);
    $where = $where . $whereYear;
    $params[] = $_GET["year"];
    $types = $types . "i";
}

if ( isset($_GET["month"]) && $_GET["month"] && $_GET["month"] != -1 )  {
    $whereMonth = sprintf(' AND month(%s.date) = ?', $tables["race"]);
    $where = $where . $whereMonth;
    $params[] = $_GET["month"];
    $types = $types . "i";

}  

if ( isset($_GET["courseid"]) && $_GET["courseid"] && $_GET["courseid"] != -1 ) {
    $whereCourse = sprintf(' AND %s.courseid = ?', $tables["race"]);
    $where = $where . $whereCourse;
    $params[] = $_GET["courseid"];
    $types = $types . "i";
} 
```

这是查询。

```
 //
    // Show selected races
    //
    $listQuery = "SELECT {$tables["race"]}.raceid, {$tables["race"]}.typeid, " .
             "           tag,  {$tables["race"]}.date, " .
             "           {$tables["location"]}.name, {$tables["course"]}.dist, " .
             "           {$tables["course"]}.description,  " .
             "           {$tables["result"]}.time, {$tables["result"]}.dnf, " .
             "           {$tables["rider"]}.first, {$tables["rider"]}.last ".
             "  FROM {$tables["race"]}, {$tables["sysracetype"]}, " .
             "       {$tables["course"]}, {$tables["location"]}, " .
             "       {$tables["result"]}, {$tables["rider"]} " .
             " WHERE {$tables["race"]}.courseid = {$tables["course"]}.courseid " .
             "   AND {$tables["race"]}.typeid = {$tables["sysracetype"]}.typeid " .
             "   AND {$tables["course"]}.locid = {$tables["location"]}.locid " .
             "   AND {$tables["race"]}.raceid = {$tables["result"]}.raceid" .
             "   AND {$tables["result"]}.riderid = {$tables["rider"]}.id" .
             $where .
             $orderby; 
```

准备和绑定参数。

```
$stmt = mysqli_prepare ($db_connection, $listQuery);
// 
// Handle the varying number of SQL parameters / place holders.
// Push the first two parameter of mysqli_stmt_bind_param
//
$bindArgs = array ($stmt, $types);

//
// Change parameters to refs  (depends on PHP version)   
//
foreach ($params as $key => $value)  
    $bindArgs[] =& $params[$key];

//
// Use "call back" to pass all params.
//
call_user_func_array("mysqli_stmt_bind_param", $bindArgs); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-05T19:21:58.070

我以这种方式解决了类似的问题。其中 $parmMap 是用 2 (1,2) 的幂构造的，因为我检测到每个可选的 WHERE 子句项并附加适当的 AND fieldName = ?。

```
switch ($parmMap ) {
    case 0:
      break;
    case 1:
      mysqli_stmt_bind_param ($stmt, "i", $courseParm );
      break;
    case 2:
      mysqli_stmt_bind_param ($stmt, "i", $yearParm );
      break;
    case 3:
      mysqli_stmt_bind_param ($stmt, "ii", $courseParm, $yearParm );
      break;
    default:
      break;
} 
```

我不会将它用于另一个有六个可选 where 子句条件的查询！我发现了`call_user_func_array`。

# javascript - 如何使用 Rally 的 SDK 2 立即制作像网格显示一样的组件？

> ID：14533390
> 
> 赞同：2
> 
> 时间：2013-01-26T02:55:52.980
> 
> 标签：javascript, extjs, rally

我创建了一个 rallygrid 并将其放入作为应用程序项目列出的容器之一中。然后，该应用程序将通过 for 循环进行循环，该循环最多可能需要三分钟来创建其他网格并将其添加到页面。

1.  应用程序会等到所有网格都被创建并添加到页面中，然后再显示其中的任何一个。将第一个添加到组件后如何显示它？

2.  是否有一个经验法则可以以最快的方式添加一大堆东西？我为一些小的汇总数据添加了 100 多个网格。每个都有一个小数组，但我先创建一个商店，然后再创建一个网格。

3.  虽然它在 100 多个小网格中循环，但我无法阻止它完成执行。由于整个事情是通过更改属性框开始的，因此用户更改下拉菜单在一段时间内不会做任何事情。而且我什至无法在构建时关闭 Chrome 选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:17:29.637

在渲染期间暂停 Ext 布局可能有助于加快速度：

```
Ext.suspendLayouts();
for (var i = 0; i < 100; i++) {
    addGrids...
}
Ext.resumeLayouts(true); 
```

如果挂起布局仍然太慢，请尝试异步添加网格。这实际上不会加快渲染速度，但它可能会帮助 UI 感觉更灵敏。将suspendLayouts技巧与异步渲染结合起来是行不通的，你必须选择其中之一：

```
for (var i = 0; i < 100; i++) {
    var addGrid = function() {
        addGrid...
    }

    Ext.Function.defer(addGrid, i * 200);
} 
```

100 格是很多 dom。无论您使用什么方法，它都可能会很慢。如果您以 IE 为目标，请小心，我怀疑 IE 中单个页面上的 100 个网格将无法使用。

# javascript - simpleCart JS 视图购物车在一列中显示所有项目信息。如何样式化输出？

> ID：14533391
> 
> 赞同：0
> 
> 时间：2013-01-26T02:56:08.817
> 
> 标签：javascript, simplecart

我的 simpleCart js 视图购物车将所有项目信息输出到单个列中，而不是将其格式化为表格。您如何设置视图购物车的输出样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:19:43.537

您可以在初始化中使用 'cartStyle : "table"' 将输出更改为表格：

```
simpleCart({
    checkout : {
        type : "SendForm",
        url : "cart.php",

        ... etc

    },
    cartStyle : "table"
}); 
```

文档：[http ://simplecartjs.org/documentation/setup_initialization](http://simplecartjs.org/documentation/setup_initialization)

# android - 亚马逊移动应用内购买需要我自己的服务器？

> ID：14533394
> 
> 赞同：1
> 
> 时间：2013-01-26T02:56:31.207
> 
> 标签：android, in-app-purchase, amazon, application-server

查看此图表明，在应用程序购买中需要我有一个应用程序服务器。

![](../Images/bac6111caf89bdaa034eaeea9e4da574.png)

我没有这个项目的应用服务器，我可以使用亚马逊应用内购买吗？主要是询问是否有人有这方面的经验，以及他们是如何*开发*解决方案的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:11:00.613

从技术上讲，您不必检查收据，但是您很容易受到用户以各种方式伪造购买的影响。

根据图表，绿线都标记为可选。所以只有步骤 1-5 是真正需要的，而且这些都不需要你自己的服务器。

# java - Android XML错误：文档元素/根元素后的垃圾必须格式正确

> ID：14533401
> 
> 赞同：2
> 
> 时间：2013-01-26T02:58:32.683
> 
> 标签：java, android, xml

我完全不知道我做错了什么我得到了两个错误 - 文档元素之后的垃圾和根之后的标记必须正确形成，有什么想法吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".MainActivity" />

<EditText  android:id="@+id/edit_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"  />
</EditText>
<button android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:19:19.630

我看到你至少有两个错误。

1.  `LinearLayout`不应`/`在顶部声明的末尾有 a。这可能会导致您的 XML 错误。
2.  `button`应该大写。

# java - 监听 JComboBoxes 和 JTextFields 修改激活类 Mutators

> ID：14533404
> 
> 赞同：0
> 
> 时间：2013-01-26T02:58:51.213
> 
> 标签：java, swing, user-interface, jtextfield, jcombobox

我在 Swing GUI 中有一个小表单，一旦对象发生更改，我想为我的类调用一些自定义突变器，但我就是不知道如何获取该信息并调用我的突变器。这是相关代码，我知道这比较简单，但我就是想不通。

对于参考 namebox 的内容在更改或失去焦点时应调用用于构建表单类框功能的数组的索引号，与 Racebox 相同

更新：找到了一些我需要的东西，我需要为这些项目添加一个标签，然后使用 getsource 和 getActioCommand 但这应该适用于大多数方面我仍然有一个小问题 Genderbox 存储一个字符串，但我希望它有一个 int值并且只显示一个字符串 有没有办法用 aj 组合框来单独设置一个值和一个显示选项文本？

```
 JTextField namebox = new JTextField(nala.getName());
    namebox.addFocusListener(new FocusListener() {

    //Create the combo box for gender.
    String[] gender = { "male", "female" };
    JComboBox genderBox = new JComboBox(gender);
    if (nala.getGender()){genderBox.setSelectedIndex(1);}else{genderBox.setSelectedIndex(0);}
    genderBox.addActionListener(this);
    genderBox.setActionCommand("GenderBox");

    //Create the combo box for race.
    String[] cRace = new String[75];
    for (int i=0; i<75; i++){cRace[i] = nala.getRaceName(i);}
    JComboBox raceBox = new JComboBox(cRace);
    raceBox.setSelectedIndex((int)nala.getRace());
    raceBox.addActionListener(this);

    //Create the combo box for class.
    String[] cClass = new String[50];
    for (int i=0; i<50; i++){cClass[i] = nala.getClassName(i);}
    JComboBox classBox = new JComboBox(cClass);
    classBox.setSelectedIndex((int)nala.getRace());
    classBox.addActionListener(this);

    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("GenderBox")){
            JComboBox cb = (JComboBox)e.getSource();
            System.out.println(cb.getSelectedItem().toString());
        }
         JLabel label = new JLabel(setStatsInfo());
    }//actionPerformed(ActionEvent e) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:39:02.663

当 JComboBox 中的选择发生变化时，请使用[ItemListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ItemListener.html)。

**例子：**

```
JComboBox combo = new JComboBox();
combo.addItemListener(new ItemListener() {
  @Override
  public void itemStateChanged(ItemEvent arg0) {
  // TODO: Action.
  }
}); 
```

您的代码仅显示添加`listeners`确实可以为您的问题提供任何线索的代码。请发布`ActionEvent`方法代码以向我们展示问题。

# c# - 动态改变 Texture2D

> ID：14533406
> 
> 赞同：2
> 
> 时间：2013-01-26T02:59:10.523
> 
> 标签：c#, textures

```
private void occupiedcheck(Vector2 positionv, Texture2D positiont)
   {
       int xpos=(((int)positionv.X+100)/150);
       int ypos=(((int)positionv.Y+110)/150);
       for (int j = 0; j < 4; j++)
       {
           if (piecexarray[j] == xpos && pieceyarray[j] == ypos)
           {

           }
           else
           {
               positiont = Content.Load<Texture2D>("Graphics/Highlighter");
               break;
           }
       }
   } 
```

上面你可以看到我为 C# 游戏编写的一个函数，我希望它在函数的“else”部分被激活时将传递给它的纹理（Texture2D 位置）更改为“Graphics/Highlighter”。目前它不起作用，我怎样才能得到它，以便我可以将现有的 Texture2D 传递给函数并通过函数中的“Content.Load”方法动态更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:59:15.237

您可以在方法中使用[ref](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.71%29.aspx)方法参数关键字，以便“[当控制权传递回调用方法时，对方法中的参数所做的任何更改都将反映在该变量中](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.71%29.aspx)”：

```
private void occupiedcheck(Vector2 positionv, ref Texture2D positiont)
{
    // ...
} 
```

# box2d - 我在哪里可以找到 box2d 的完整参考资料和解释？

> ID：14533407
> 
> 赞同：0
> 
> 时间：2013-01-26T02:59:14.800
> 
> 标签：box2d, document

我正在学习 Box2D 的关节并在这里阅读“所谓的”手册：

[http://www.box2d.org/manual.html](http://www.box2d.org/manual.html)

但是对于某些部分，例如“distanceJoint”，他们给了我建议而不是完整的功能列表，没有解释。

我花了几个小时测试建议的功能，但还没有弄清楚这些功能的作用，或者如何使用它们。（例如：DistanceJoint 的名为“collideConnected”的属性）我什至想知道是否所有可用的功能都列在那里，或者我必须自己找到一些。

因此，我想知道他们是否在某个地方有更详细的文档，例如 MSDN。——或者说我此刻所拥有的都是我能应付的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:22:44.667

[你可以在那里](https://www.iforce2d.net/b2dtut/joints-overview)找到一些更详细的描述。如果你需要*文档*（不是手册），那么你可以去[那里在线](http://www.learn-cocos2d.com/api-ref/1.0/Box2D/html/annotated.html)，或者下载 Box2D 源代码并用 Doxygen 编译它。查看使用 Box2D 源分发的 Testbed 也很有用。

# mysql - 使用插入到使用mysql

> ID：14533414
> 
> 赞同：0
> 
> 时间：2013-01-26T03:00:41.460
> 
> 标签：mysql, sql, insert

我需要将以下内容插入到我的表中...我的用户表有五列 id、用户名、密码、名称、条目。（我还没有提交任何内容，我稍后将使用 php 来执行此操作）但由于某种原因，我不断收到此错误：#1054 - '字段列表'中的未知列 'const89' 为什么它将值读取为柱子？

```
INSERT INTO users  VALUES(1,const89,cdm89,constantin); 
```

我也试过`INSERT INTO users (id,username,password,name) VALUES(1,const89,cdm89,constantin);` 这给了我同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:01:46.510

您需要将字符串放在引号中：

```
INSERT INTO users  VALUES(1,'const89','cdm89','constantin'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T03:02:37.257

只需在您的字符串周围加上引号：

```
INSERT INTO users VALUES(1,'const89','cdm89','constantin'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T03:02:23.890

将您的字符串值放在引号内。

```
INSERT INTO users  VALUES(1,'const89','cdm89','constantin'); 
```

# python - 你能推荐一个好的minhash实现吗？

> ID：14533420
> 
> 赞同：19
> 
> 时间：2013-01-26T03:01:43.517
> 
> 标签：python, hash, minhash

我正在尝试寻找可以用于我的工作的 minhash 开源实现。

我需要的功能非常简单，给定一个集合作为输入，实现应该返回它的 minhash。

最好使用 python 或 C 实现，以防万一我需要破解它来为我工作。

任何指针都会有很大帮助。

问候。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-10T21:07:13.110

You should have a look at the following open source libraries, in order. All of them are in Python, and show how you can calculate document similarity using LSH/MinHash:

[lsh](https://github.com/embr/lsh)
[LSHHDC : Locality-Sensitive Hashing based High Dimensional Clustering](https://github.com/go2starr/lshhdc)
[MinHash](https://github.com/rahularora/MinHash)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-04T13:03:07.650

看看[数据草图库](https://github.com/ekzhu/datasketch)。它支持序列化和合并。它是在纯python中实现的，没有外部依赖。[Go 版本](https://github.com/ekzhu/go-datasketch)具有完全相同的功能。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-09-27T10:14:16.487

如果您有兴趣研究 minhash 算法，这里有一个非常简单的实现和一些讨论。

为了为集合生成 MinHash 签名，我们创建了一个长度向量，`$N$`其中所有值都设置为正无穷大。我们还创建`$N$`了接受输入整数并置换该值的函数。该`$i^{th}$`函数将单独负责更新`$i^{th}$`向量中的值。给定这些值，我们可以通过将集合中的每个值传递给每个`$N$`置换函数来计算集合的 minhash 签名。如果`$i^{th}$`置换函数的输出低于`$i^{th}$`向量的值，我们将值替换为置换函数的输出（这就是为什么哈希被称为“ *min* -hash”）。让我们在 Python 中实现它：

```
from scipy.spatial.distance import cosine
from random import randint
import numpy as np

# specify the length of each minhash vector
N = 128
max_val = (2**32)-1

# create N tuples that will serve as permutation functions
# these permutation values are used to hash all input sets
perms = [ (randint(0,max_val), randint(0,max_val)) for i in range(N)]

# initialize a sample minhash vector of length N
# each record will be represented by its own vec
vec = [float('inf') for i in range(N)]

def minhash(s, prime=4294967311):
  '''
  Given a set `s`, pass each member of the set through all permutation
  functions, and set the `ith` position of `vec` to the `ith` permutation
  function's output if that output is smaller than `vec[i]`.
  '''
  # initialize a minhash of length N with positive infinity values
  vec = [float('inf') for i in range(N)]

  for val in s:

    # ensure s is composed of integers
    if not isinstance(val, int): val = hash(val)

    # loop over each "permutation function"
    for perm_idx, perm_vals in enumerate(perms):
      a, b = perm_vals

      # pass `val` through the `ith` permutation function
      output = (a * val + b) % prime

      # conditionally update the `ith` value of vec
      if vec[perm_idx] > output:
        vec[perm_idx] = output

  # the returned vector represents the minimum hash of the set s
  return vec 
```

这里的所有都是它的！为了演示我们如何使用这个实现，让我们举一个简单的例子：

```
import numpy as np

# specify some input sets
data1 = set(['minhash', 'is', 'a', 'probabilistic', 'data', 'structure', 'for',
        'estimating', 'the', 'similarity', 'between', 'datasets'])
data2 = set(['minhash', 'is', 'a', 'probability', 'data', 'structure', 'for',
        'estimating', 'the', 'similarity', 'between', 'documents'])

# get the minhash vectors for each input set
vec1 = minhash(data1)
vec2 = minhash(data2)

# divide both vectors by their max values to scale values {0:1}
vec1 = np.array(vec1) / max(vec1)
vec2 = np.array(vec2) / max(vec2)

# measure the similarity between the vectors using cosine similarity
print( ' * similarity:', 1 - cosine(vec1, vec2) ) 
```

这将返回 ~.9 作为这些向量之间相似性的度量。

虽然我们只比较了上面的两个 minhash 向量，但我们可以通过使用“Locality Sensitive Hash”更简单地比较它们。为此，我们可以构建一个字典，将 $W$ MinHash 向量分量的每个序列映射到构造 MinHash 向量的集合的唯一标识符。例如，如果`W = 4`我们有一个`S1`从中派生 MinHash 向量的集合`[111,512,736,927,817...]`，我们会将`S1`标识符添加到该向量中四个 MinHash 值的每个序列中：

```
d[111-512-736-927].append('S1')
d[512-736-927-817].append('S1')
... 
```

一旦我们对所有集合执行此操作，我们就可以检查字典中的每个键，如果该键具有多个不同的集合 ID，我们有理由相信这些集合是相似的。实际上，一对集合 id 在字典中的单个值中出现的次数越多，这两个集合之间的相似性就越大。以这种方式处理我们的数据，我们可以将识别所有相似集合对的复杂度降低到大致线性时间！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-10T15:08:57.050

我会建议你[这个库](https://github.com/simonemainardi/LSHash)，特别是如果你需要持久性。在这里，您可以使用 redis 存储/检索所有数据。

您可以选择一个 redis 数据库，或者简单地使用内置的内存中 python 字典。

使用 redis 的性能，至少如果 redis 服务器在您的本地计算机上运行，​​几乎与通过标准 python 字典实现的性能相同。

您只需要指定一个配置字典，例如

```
config = {"redis": {"host": 'localhost', "port": '6739', "db": 0}} 
```

并将其作为参数传递给`LSHash`类构造函数。

# c - mov 后正确读取 gdb 值

> ID：14533427
> 
> 赞同：2
> 
> 时间：2013-01-26T03:02:40.457
> 
> 标签：c, linux, assembly, gdb, x86

这是我在 gdb 中调试的两行二进制文件。这是 gcc 为 IA32 编译的 C 代码：

```
8049345:    8b 45 08                mov    0x8(%ebp),%eax
8049348:    89 04 24                mov    %eax,(%esp) 
```

我有一个`display $eax`设置，所以它会在每一步之后显示值。在第一行之后，`display`说：`6: $eax = 134527652`.

我可以`x 134527652`或`x $eax`我看到`0x804baa4 <input_strings+100>: "1 1 1 1 1 1"`为什么 display 和 x 给我不同的结果？

我相信下一行说将 eax 移动到 esp 存储的地址中？我有一个`display $esp`设置，它说：`2: $esp = (void *) 0xffffd540`。

在第二个 mov 之前，我`x 0xffffd540`看到：`0xffffd540: ""`在 mov 之后，我重复并看到：

```
0xffffd540:  "\244\272\004\bY\233\004\b\210\325\377\377\214\325\377\377\220\325\377\377\224\325\377\377\230\325\377\377\234\325\377\377\001" 
```

我以为这条线会把 eax 移到这个地址，但我显然不明白这里的东西？如果您想查看二进制文件中的任何其他行，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:29:01.903

我认为您的困惑可能是由于该`x`命令将地址 0xffffd540 处的数据打印为字符串。大概在存储到该地址之前，0xffffd540 处的第一个字节是 0 字节，被视为终止字符串，因此您看到`""`的是空字符串。将值 0x804baa4 写入此地址后，您会看到它以字节为单位的表示：

```
\244\272\004\b 
```

其中`\244`（八进制转义）为 0xa4，`\272`为 0xba，`\004`为 0x04，`\b`（退格字符的转义，U+0008）为 0x08。

您会在打印的字符串中看到更多的垃圾，因为不再有空终止符。

# c++ - 在运行时更改谓词

> ID：14533430
> 
> 赞同：0
> 
> 时间：2013-01-26T03:03:17.167
> 
> 标签：c++, stl

假设您有不同的谓词（在这种特殊情况下具有初始状态的函数对象）与 STL 算法（`copy_if`等`sort`...）一起使用。事情是谓词可以通过配置更改或用户输入在运行时更改。我考虑过使用多态性和 virtual `operator()`，然后选择了`std::function`这样的解决方案（这让我进入了 C++11 领域，但这没关系）

```
struct PlainFilter {
    PlainFilter(string filter):m_filter(filter)
    {}
    bool operator() (const string& toMatch)
    {one way}
};
struct AcronymFilter {
    AcronymFilter (string filter):m_filter(filter)
    {}
    bool operator() (const string& toMatch)
    {a different way}
};

enum FilterTypes {plain,acronym};

vector<string> FilterStuff(string filter, vector<string> in)
{
     vector<string> out;
     std::function<bool(const string&)> foo;

     if( filterType == plain)
         foo = PlainFilter(filter);
     else if( filterType == acronym)
         foo = AcronymFilter(filter);

     copy_if(in.begin(),in.end(),back_inserter(out),foo);
     return out;
} 
```

这个好吗？

我宁愿避免每次我需要过滤字符串时使用 if else 语句，因为过滤器类型可能会在程序的整个生命周期中更改一次或根本不更改。也欢迎对这个问题提出任何其他不同的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:39:48.387

可能有几种方法可以做到这一点，但这就是多态性的用途。你的代码被简化了，*你*不必记住在每个可以使用的地方添加一个新的`case`或任何你梦想的新过滤器。`else if`

```
struct IFilter
{
    virtual bool operator()(const std::string &) const = 0;
};

struct PlainFilter : public IFilter
{
    virtual bool operator()(const std::string &filter) const override
    {
        // do something
    }
};

struct AcronymFilter : public IFilter
{
    virtual bool operator()(const std::string &filter) const override
    {
        // do something else
    }
};

std::vector<std::string> FilterStuff(const IFilter &filter, const std::vector<std::string> &in)
{
    std::vector<std::string> out;
    std::copy_if(in.begin(), in.end(), std::back_inserter(out), filter);

    return out;
} 
```

但是，我个人会以`FilterStuff`不同的方式实施。你`string`从一个中取出 s`vector`并将它们复制到另一个，然后大概另一段代码将迭代那个新的`vector`并用那些过滤`string`的 s 做一些事情。考虑一个采用过滤器*和*“用它做某事”功能的设计：

```
void EnumerateStuff(const IFilter &filter, const std::vector<std::string> &in,
                    std::function<void(std::string)> callback)
{
    for (const auto &s : in)
    {
        if (filter(s))
        {
            callback(s);
        }
    }
} 
```

`FilterStuff``EnumerateStuff`如果确实需要过滤副本，现在可以用 来编写：

```
std::vector<std::string> FilterStuff(const IFilter &filter, const std::vector<std::string> &in)
{
    std::vector<std::string> out;

    EnumerateStuff(filter, in,
        [&](const std::string &s)
        {
            out.push_back(s);
        });

    return out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:53:39.537

由于`filterType`是运行时值，因此您将在此处进行某种选择。有您`if`的 's、a`switch`或数组查找。我喜欢`switch`最好的，数组查找需要更复杂的类型，并且一旦优化器通过它就不会更快。此外，我会`const &`在反射上不按值传递初始化程序。

也就是说，我认为你的方法很好。另一种方法：

```
bool plain_string_test(const string& filter, const string& candidate) 
{  /* ... one way ... */ }

bool acronym_string_test(const string& filter, const string& candidate)
{  /* ... or another ... */ }

enum FilterTypes {plain,acronym};

vector<string> FilterStuff(string filter, vector<string> in)
{
     vector<string> out;
     std::function<bool(const string&, const string&)> filtermethod;

     switch(filterType) {
     default: throw some_domain_error(some_constructor_here);

     case plain:      filtermethod = plain_string_test;         break;
     case acronym:    filtermethod = acronym_string_test;       break;

     }

     copy_if(in.begin(),in.end(),back_inserter(out), 
         [&filtermethod, &filter](const string& candidate) -> bool
             { return filtermethod(filter,candidate); }
     return out;
} 
```

我更喜欢这个；它消除了一些类型的脚手架和一些复制，并使字符串测试更可重用（或者也消除了一些功能脚手架）。在这里，您可能能够从静态函数数组中获得更好的价值，它可能取决于上下文。

键盘到编辑框警告，我没有测试过这段代码，但我相信它至少对于通信来说足够正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:55:20.357

您的示例中的`filterType`变量是什么？我猜你的应用程序/算法有一些可配置的参数？？

无论如何，我会提出以下建议：

1）将所有可配置参数收集到一个结构中：

```
class configuration
{
public:
    /// Type of predicate functor
    typedef std::function<bool(const std::string&)> predicate_type;

    struct plain_filter { /* your implementation */ };
    struct acronym_filter { /* your implementation */ };

    /// Type of predicate to use
    enum class predicate_type { plain, acronym };

    /// Set predicate
    void set_filter_kind(const predicate_type ft)
    {
        switch (ft)
        {
        case predicate_type::plain:
            m_predicate = plain_filter();
            break;
        case predicate_type::acronym:
            m_predicate = acronym_filter();
            break;
        default:
            assert(!"Invalid filter type");
        }
    }

    /// Get filter to be used by algorithms
    /// \todo Consider to return a const reference instead of copy,
    /// but make sure your filters are state-less (as expected by STL slgorithms)
    decltype(m_predicate) use_filter() const
    {
        return m_predicate;
    }

    // other configuration parameters/methods

private:
    predicate_type m_predicate;
}; 
```

`configuration`2) 填充来自命令行选项、配置文件或用户输入的实例。使此实例对您的代码的所有必需部分可见（例如，使其成为您的`application`类的成员并提供一种方法来（只读）访问它或像这样......）

3) 在你的算法中使用配置数据

```
std::vector<string> filter_stuff(string filter, const std::vector<string>& in)
{
    std::vector<string> out;
    std::copy_if(
        begin(in)
      , end(in)
      , std::back_inserter(out)
      , application().get_config().use_filter()
      );
    return out;
} 
```

PS：顺便说一句，`in`通过引用（或右值引用）传递参数......我真的怀疑你需要一个副本（按值传递）

# css - 移动应用程序和 JQM 的奇怪 CSS 问题

> ID：14533437
> 
> 赞同：0
> 
> 时间：2013-01-26T03:05:08.983
> 
> 标签：css, jquery-mobile

我认为这与 JQM 无关，但可能只是 CSS。

我有一个非常基本的移动网页，它加载了正确的 css。此页面上有一个链接链接到类似页面但具有不同的 css 参考.. 但在我点击刷新之前它不会应用 css。我用iphone浏览器测试了这个。

任何人有类似的问题或看到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:50:14.030

默认情况下，JQM 的工作方式是通过 ajax 加载每个链接页面，“内部”加载的第一个页面。这是在幕后完成的。

如果要强制加载不同的内容，最快的方法是使链接成为“外部”链接，使用

```
<a href="location.html" rel="external">click here</a> 
```

这就是我知道它绝对不会使用ajax的方式。不幸的是，这会禁用整洁的页面更改效果。

在文档中它说你应该使用

```
<script>
$(document).ready(function() {
    // disable ajax nav
    $.mobile.ajaxLinksEnabled = false;
});
</script> 
```

但这并不总是对我有用。

请记住，尽管一切都已重新加载，因此您必须在“新”页面中包含所有 javascript 和 css。

实现您的要求的另一种方法是在所有页面上加载两个 Css 文件并使用 javascript 到媒体标签在它们之间切换。

希望这可以帮助。我花了很长时间想出一种让 jqm 像经典网站一样工作的方法。

# .net - 在 .NET 中存储单元测试的常用方法

> ID：14533449
> 
> 赞同：0
> 
> 时间：2013-01-26T03:06:56.440
> 
> 标签：.net, unit-testing, project, projects-and-solutions

> **可能重复：**
> [哪个更好？每个解决方案或每个项目的单元测试项目？](https://stackoverflow.com/questions/5197192/which-is-better-unit-test-project-per-solution-or-per-project)

我不时看到不同的方法：

有人将 unittest 存储在他们当前正在测试的同一个项目中，只是在项目根目录下创建测试文件夹。

有人从他们测试的解决方案中为每个项目创建额外的测试项目。

有人对整个解决方案中的所有测试都有一个大的测试项目。

*那么在 .NET 世界中存储测试的一般方式是什么，可以说是“官方”方式？*很确定微软有这方面的指导方针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:13:24.393

测试代码的第一条规则：永远不要将测试代码放在生产程序集（可交付成果）中。

这条规则的原因很简单：测试代码可能会破坏您的现场安装。即使有良好的编码实践。即使有优秀的程序员。

测试代码的第二条规则：它必须由程序员自己维护：当开发人员重构他们的代码时，测试代码必须随之改变。因此，如果您可以以任何方式避免它，请不要将其放在单独的解决方案中。

从这里开始，你就靠自己了。就我个人而言，我更喜欢在我的生产程序集和我的测试程序集之间保持大约 1 对 1 的对应关系，将“.Test”附加到名称中。

然后，当我对生产程序集的 csproj 文件进行单元测试时，我会使用此命名将它们过滤掉。

哦，我有没有提到你永远不应该将测试代码放在生产程序集中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:19:32.140

这个问题似乎有点主观，所以你可能会得到很多答案，最终由你决定什么对你和你的团队最有效。

我的 $.02 ...

我通常希望在与正在测试的代码不同的项目中看到测试。这可以防止生成的程序集变得臃肿，并避免必须将测试代码部署到生产中（或分发给客户端，具体取决于其目的）。

关于测试是否应该在同一个项目中，或者分布在多个项目中取决于正在编写的测试。如果测试都是相关的，并且将它们捆绑在一起是有意义的，那么将它们放在一个项目中，但如果它们完全不相关，那么我认为没有理由将它们放在同一个项目中。

我想这个判断可以像任何代码一样应用于测试。如果它在一起，就把它放在一起，如果没有，那就不要。

事实上，你正在编写测试，这意味着你可能走在正确的道路上，所以不要害怕尝试一段时间，确定它是否适合你，如果不适合，请尝试不同的方式。编写代码的美妙之处在于它可以随着时间的推移进行重构以更好地满足您的需求。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:17:31.263

这是我所看到的

a) 对于拥有独立管理测试代码的专门 QA 团队的大型团队，使用自己的解决方案管理测试代码会更容易。

b) 如果开发人员驱动单元测试和一些功能测试的团队不是那么大，那么将测试作为同一解决方案的一部分进行管理变得更加容易。

*c) 如今，随着 TDD 被更积极地采用，将测试作为产品代码项目*本身的一部分变得更加容易。

指导方针是把你的测试放在你认为最能管理它们的地方，对于今天的大多数人来说，它通常要么是 a 要么是 b。

犹他州：http: [//msdn.microsoft.com/en-us/library/hh598957.aspx](http://msdn.microsoft.com/en-us/library/hh598957.aspx)

TDD： http: [//msdn.microsoft.com/en-us/library/aa730844 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730844(v=vs.80).aspx)

# javascript - Firefox 和 Chrome 窗口宽度/高度显示不同

> ID：14533451
> 
> 赞同：1
> 
> 时间：2013-01-26T03:07:21.307
> 
> 标签：javascript, jquery, css

我的笔记本电脑显示分辨率为 1280 x 800。当我查询 $(window).width() 时，我在 Firefox 上得到 1420，而在 Chrome 上得到 1280。为什么 Firefox 显示的窗口宽度大于我的屏幕分辨率？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T03:16:25.077

因为您的 Firefox 窗口可能已缩小。

使用以下方法之一重置缩放：

*   `CTRL`+ `0`（或某些键盘布局中的`CTRL`+ `SHIFT`+ ）`0`
*   查看（或`ALT`+ `V`）> 缩放 > 重置

# facebook - facebook scraper 停止读取我的元数据

> ID：14533454
> 
> 赞同：-1
> 
> 时间：2013-01-26T03:08:33.030
> 
> 标签：facebook, debugging, object, scraper

> **可能重复：**
> [Facebook 不会分享指向我网站的链接](https://stackoverflow.com/questions/13185406/facebook-wont-share-a-link-to-my-site)

我有 2 个网站在粘贴到 Facebook 时无法显示图像。所以我去了 facebook 对象调试器并将刮板看到的内容与视图源看到的内容进行比较。

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fvspwebandvideo.com%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fvspwebandvideo.com%2F)

我的两个失败页面都死了：

因为它没有给出错误，所以它只是停止阅读，我不知道该尝试什么。

有任何想法吗？我想知道具有 html 实体的标题标签是否会产生影响。

paxtonsgrill.com 也失败了，但 allaroundloveland.com 有效。所有 3 个都是 wordpress 网站，但我是一名 PHP 开发人员，所以如果我能找出问题所在，我很可能会修复它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:12:49.357

问题出在您网站的字符集上。

如果您单击`See exactly what our scraper sees for your URL`他们页面上的链接，您应该注意到他们的刮板在`<link rel="alternate" type="application/rss왩">`（在您的网站上实际上是一个 + RSS 之后）并检查您网站的源代码，我看到您有`utf-7`字符集。

所以我做了一个快速测试，我可以确认它的字符编码问题。只需将其更改为`utf-8`，一切都应该正常工作。

此外，如果您检查您`allaroundloveland.com`网站的源代码，您会发现它具有正确的字符集，但您的其他网站具有错误的字符集（如果您出于某种原因自己添加了它？但他们的抓取工具正在破坏该字符集）。

希望这会有所帮助，并让我知道它是否对您有用。

# python - Python线程化多个bash子进程？

> ID：14533458
> 
> 赞同：44
> 
> 时间：2013-01-26T03:09:25.517
> 
> 标签：python, multithreading, subprocess

如何使用线程和子进程模块来产生并行 bash 进程？当我开始线程时，这里的第一个答案是：[如何在 Python 中使用线程？](https://stackoverflow.com/questions/2846653/python-multithreading-for-dummies)，bash 进程顺序运行而不是并行运行。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-26T04:35:17.760

您不需要线程来并行运行子进程：

```
from subprocess import Popen

commands = [
    'date; ls -l; sleep 1; date',
    'date; sleep 5; date',
    'date; df -h; sleep 3; date',
    'date; hostname; sleep 2; date',
    'date; uname -a; date',
]
# run in parallel
processes = [Popen(cmd, shell=True) for cmd in commands]
# do other things here..
# wait for completion
for p in processes: p.wait() 
```

* * *

为了限制您可以使用的并发命令的数量，这些命令使用线程并提供与使用进程`multiprocessing.dummy.Pool`相同的接口：[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)

```
from functools import partial
from multiprocessing.dummy import Pool
from subprocess import call

pool = Pool(2) # two concurrent commands at a time
for i, returncode in enumerate(pool.imap(partial(call, shell=True), commands)):
    if returncode != 0:
       print("%d command failed: %d" % (i, returncode)) 
```

[这个答案演示了限制并发子进程数量的各种技术](https://stackoverflow.com/a/9874484/4279)：它显示了基于 multiprocessing.Pool、concurrent.futures、threading + Queue 的解决方案。

* * *

您可以在不使用线程/进程池的情况下限制并发子进程的数量：

```
from subprocess import Popen
from itertools import islice

max_workers = 2  # no more than 2 concurrent processes
processes = (Popen(cmd, shell=True) for cmd in commands)
running_processes = list(islice(processes, max_workers))  # start new processes
while running_processes:
    for i, process in enumerate(running_processes):
        if process.poll() is not None:  # the process has finished
            running_processes[i] = next(processes, None)  # start new process
            if running_processes[i] is None: # no new processes
                del running_processes[i]
                break 
```

在 Unix 上，您可以避免忙循环并[阻塞`os.waitpid(-1, 0)`，等待任何子进程退出](https://docs.python.org/3/library/os.html#os.waitpid)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T04:11:36.280

一个简单的线程示例：

```
import threading
import Queue
import commands
import time

# thread class to run a command
class ExampleThread(threading.Thread):
    def __init__(self, cmd, queue):
        threading.Thread.__init__(self)
        self.cmd = cmd
        self.queue = queue

    def run(self):
        # execute the command, queue the result
        (status, output) = commands.getstatusoutput(self.cmd)
        self.queue.put((self.cmd, output, status))

# queue where results are placed
result_queue = Queue.Queue()

# define the commands to be run in parallel, run them
cmds = ['date; ls -l; sleep 1; date',
        'date; sleep 5; date',
        'date; df -h; sleep 3; date',
        'date; hostname; sleep 2; date',
        'date; uname -a; date',
       ]
for cmd in cmds:
    thread = ExampleThread(cmd, result_queue)
    thread.start()

# print results as we get them
while threading.active_count() > 1 or not result_queue.empty():
    while not result_queue.empty():
        (cmd, output, status) = result_queue.get()
        print('%s:' % cmd)
        print(output)
        print('='*60)
    time.sleep(1) 
```

请注意，有更好的方法可以做到这一点，但这并不太复杂。该示例为每个命令使用一个线程。当您想要执行诸如使用有限数量的线程来处理未知数量的命令之类的事情时，复杂性开始蔓延。一旦掌握了线程基础知识，那些更高级的技术似乎就不会太复杂。一旦掌握了这些技术，多处理就会变得更容易。

# sql - 为什么我的 sqlite sql 没有返回结果？

> ID：14533464
> 
> 赞同：2
> 
> 时间：2013-01-26T03:09:59.270
> 
> 标签：sql, macos, sqlite

以下是我的数据库功能：

```
+(NSArray*)searchWithKey:(NSString*)_key{
NSMutableArray* tmpArray = [NSMutableArray array];
static Statement* stmt = nil;
char* sql = "select * from Bookmarks where BMUrl like '%?%'";
if (stmt == nil) {
    stmt = [DBConnection statementWithQuery:sql];
    [stmt retain];
}
[stmt bindString:_key forIndex:1];
while ([stmt step] == SQLITE_ROW) {
    BookMark* tmpBM = [[BookMark alloc] initWithStatement:stmt];
    NSLog(@"tmpBM = %@",tmpBM);
    [tmpArray addObject:tmpBM];
    [tmpBM release];
}
[stmt reset];
return tmpArray;} 
```

sql的关键字是我使用的“like”。但是sqlite没有返回结果。有人能告诉我为什么吗？我将sql更改为“select * from Bookmarks where BMUrl like '%h%'”，返回了一些结果。所以，我猜错误是函数“bindString:forIndex”，代码是

```
- (void)bindString:(NSString*)value forIndex:(int)index{
sqlite3_bind_text(stmt, index, [value UTF8String], -1, SQLITE_TRANSIENT);} 
```

我将使用哪个正确的 sqlite3 api？感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:17:05.453

绑定不是这样插值的。如果您在字符串中加上引号，如 中`'%?%'`，它将被解释为文字问号。

您应该修改您的输入`_key`：

*   `%`转义和`_`的任何实例`\`
*   `%`首尾加s

这使它准备好与`LIKE`操作员一起使用。

您还需要修改 SQL 以使`?`代表独立参数：`... where BMUrl like ?`.

* * *

这是一个如何转义特殊字符并`%`在开头和结尾添加 s的示例`_key`：

```
NSString *escapedKey = [_key stringByReplacingOccurencesOfString:@"%" 
                                                      withString:@"\\%"];
escapedKey = [escapedKey stringByReplacingOccurencesOfString:@"_"
                                                  withString:@"\\_"];
NSString *keyForLike = [NSString stringWithFormat:@"%%%@%%", escapedKey];
[stmt bindString:keyForLike forIndex:1]; 
```

# servicestack - ServiceStack：这是为 MonoTouch 注册泛型类型的正确方法吗？

> ID：14533466
> 
> 赞同：1
> 
> 时间：2013-01-26T03:10:09.583
> 
> 标签：servicestack

我有一个服务请求，例如：

```
public class UpdateUserActions
{
    public Dictionary<string, int> Actions { get; set; }
} 
```

我在 Aot.Init 方法中注册了它，就像在 ServiceStack.Text.Tests.MonoTouch 中的方式一样：

```
public static void Init()
{
    JsConfig.RegisterForAot ();
    JsConfig.RegisterTypeForAot<UpdateUserActions>();
    JsConfig.RegisterTypeForAot<Dictionary<string, int>>();
} 
```

并在 AppDelegate 中调用了 Aot.Init。但它似乎并没有修复 JIT 编译器错误。仍然出现以下错误：

> 调试：异常读取响应错误：尝试 JIT 编译方法'ServiceStack.Text.Common.ToStringDictionaryMethods`3:WriteIDictionary (System.IO.TextWriter,object,ServiceStack.Text.Common.WriteObjectDelegate,ServiceStack.Text.Common.WriteObjectDelegate)'使用 --aot-only 运行时。

# php - Symfony2 无法导入资源

> ID：14533470
> 
> 赞同：3
> 
> 时间：2013-01-26T03:10:45.700
> 
> 标签：php, symfony, yaml

当我安装供应商文件时，Symfony 应用程序抛出以下错误

```
[Symfony\Component\Config\Exception\FileLoaderLoadException]                          
Cannot import resource "/var/www/test/app/config/parameters.yml" from "/var  
/www/test/app/config/config.yml".                                            

[Symfony\Component\Yaml\Exception\ParseException]                                     
Unable to parse in "\/var\/www\/test\/app\/config\/parameters.yml" at line   
2 (near "database_driver   = pdo_mysql").

Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handling the post-install-cmd event terminated with an exception      

[RuntimeException]                                                         
An error occurred when executing the "'cache:clear --no-warmup'" command. 
```

我的导入有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T03:43:27.343

您的 paramteres.yml 文件不是有效的 YAML。它应该是

```
database_driver: pdo_mysql 
```

不`=`签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:52:27.230

如果您无法使用`cache:clear`错误消息中的命令，您可以手动执行

`sudo rm -rf app/cache/*`

# javascript - 有没有办法确定 keyup elem - 不是 - 特定的父母或父母的孩子？

> ID：14533471
> 
> 赞同：0
> 
> 时间：2013-01-26T03:10:51.160
> 
> 标签：javascript, jquery

经过数小时的搜索，我似乎无法找到解决方案:-(

我试过无济于事：

```
jQuery('#someGlobalNav').delegate('*','keyup', function(){
   if(!(jQuery('#itemsForSale').find(jQuery(this))){// do something}

jQuery("#itemsForSale, #itemsForSale > * ").focusout(function(){} 
```

尝试使用 :not 和 :contains。

基本上，我有一组链接。让我们在下面使用它：

```
<div id="someGlobalNav">
<ul id='siteNavigation'>
<li id="itemsForSale">
   <div id="items">
      <ul id='itemNav'>
         <li>
             <div id="menu1">
                <ul>
                   <li><a href="link">menu 1 item 1</a></li>
                   <li><a href="link">menu 1 item 2</a></li>
                </ul>
             </div>
         </li>
         <li>
              <div id="menu2">
                <ul>
                   <li><a href="link">menu 2 item 1</a></li>
                   <li><a href="link">menu 2 item 2</a></li>
                </ul>
             </div>
         </li>
      </ul>
   </div>
</li>
<li><a href="link">Link that Might exist</a></li>
<li><a href="link">AnotherLink that Might exist</a></li>
</ul>
<div><a href="somelink">Arbitrary link</a></div>
</div> 
```

一切都很好等。唯一的问题是，我只想对不是“itemsForSale”或其子项的元素采取行动。因此，作为用户通过链接键入，一切都很好，直到他们键入 itemsForSale 之外的某些东西——

我想使用 :not - 但我不知道选择器，因为导航是动态的。我尝试了各种其他的东西，但没有运气。

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:35:41.997

您的问题的一个过度简化的解决方案是这样的：

```
$('a:not(#itemsForSale *)'); 
```

jsbin 演示：http: [//jsbin.com/idijos/1/edit](http://jsbin.com/idijos/1/edit)

# python - 在python中将utf-8字符串转换为cp950编码

> ID：14533474
> 
> 赞同：0
> 
> 时间：2013-01-26T03:11:31.767
> 
> 标签：python, utf-8, character-encoding

我正在处理编码问题。我的输入是一个 unicode 字符串，例如：

```
>>> s
u'\xa6\xe8\xac\xc9' 
```

实际上它是用cp950编码的。我想解码它：（注意没有“u”）

```
>>> print unicode('\xa6\xe8\xac\xc9', 'cp950')
西界 
```

但是，我不知道如何摆脱那个“u”。直接转换不起作用：

```
>>> str(s)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128) 
```

使用 encode() 的结果不是我想要的：

```
>>> s.encode('utf8')
'\xc2\xa6\xc3\xa8\xc2\xac\xc3\x89' 
```

我想要的是`'\xa6\xe8\xac\xc9'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:17:56.717

这有点滥用`unicode`类型。字符串中的`unicode`字符应为 Unicode 代码点（例如`u'\u897f\u754c'`），因此与编码无关。`str`它们不应该是来自特定编码的字节（Python 3 通过将 Unicode strings与 byte strings分开来非常清楚地区分这种情况`bytes`）。

由于您只想将每个代码点解释为字节，您可以这样做

```
u'\xa6\xe8\xac\xc9'.encode('iso-8859-1') 
```

因为 Unicode 的前 256 个代码点被定义为等于 ISO-8859-1 的代码点。但是，*请*尝试解决首先给您这个不正确的 Unicode 字符串的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:36:19.953

所以让我们直截了当：你有一个字节序列作为 Unicode 代码点读入，你需要将它们解释为 cp950 吗？

```
>>> ''.join(chr(ord(c)) for c in s)
'\xa6\xe8\xac\xc9'
>>> print ''.join(chr(ord(c)) for c in s).decode('cp950')
西界 
```

# java - 使用 Commons Math 和拟合的最小二乘法

> ID：14533475
> 
> 赞同：5
> 
> 时间：2013-01-26T03:11:58.283
> 
> 标签：java, math, apache-commons-math

我试图使用公共数学来计算多项式中的常数。看起来该例程存在，但我收到此错误。有没有人看到这个问题？

我试图将这个问题转换为 commons-math： [https ://math.stackexchange.com/questions/121212/how-to-find-curve-equation-from-data](https://math.stackexchange.com/questions/121212/how-to-find-curve-equation-from-data)

通过绘制数据（Wolfram|Alpha 链接），它看起来不是线性的。所以最好用多项式拟合。我假设您想要拟合数据：

XY 1 4 2 8 3 13 4 18 5 24 .. 使用二次多项式 y=ax2+bx+c。

wolfram alpha 提供了一个很好的实用程序。我希望我能得到与 wolfram 相同的答案。

[http://www.wolframalpha.com/input/?i=fit+4%2C+8%2C+13%2C](http://www.wolframalpha.com/input/?i=fit+4%2C+8%2C+13%2C)

例如，通过输入该数据，我会得到：4.5 x-0.666667（线性）

这是代码和错误：

```
import org.apache.commons.math3.stat.regression.OLSMultipleLinearRegression;
import org.apache.commons.math3.stat.regression.SimpleRegression;
final OLSMultipleLinearRegression regression2 = new OLSMultipleLinearRegression();
double[] y = {
        4.0, 
        8, 
        13,                 
};      
double[][] x2 = 
    {
        { 1.0, 1, 1  },
        { 1.0, 2, 4  },
        { 0.0, 3, 9  },             
    };
regression2.newSampleData(y, x2);
regression2.setNoIntercept(true);
regression2.newSampleData(y, x2);       
double[] beta = regression2.estimateRegressionParameters();
for (double d : beta) {
    System.out.println("D: " + d);
} 
```

线程“主”org.apache.commons.math3.exception.MathIllegalArgumentException 中的异常：在 org.apache.commons.math3.stat.regression.AbstractMultipleLinearRegression.validateSampleData( AbstractMultipleLinearRegression.java:236) at org.apache.commons.math3.stat.regression.OLSMultipleLinearRegression.newSampleData(OLSMultipleLinearRegression.java:70) at org.berlin.bot.algo.BruteForceSort.main(BruteForceSort.java:108)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T03:41:16.637

validateSampleData() 的 javadoc 指出，二维数组的行数必须至少多于列数。

[http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/regression/AbstractMultipleLinearRegression.html](http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/regression/AbstractMultipleLinearRegression.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:13:15.680

Rcook 是对的。我提供了一个额外的行（测试用例），它产生了与 wolfram/alpha 相同的答案。

D: 0.24999999999999822 D: 3.4500000000000033 D: 0.24999999999999914

或 0.25x^2 + 3.45x + 0.25

```
final OLSMultipleLinearRegression regression2 = new OLSMultipleLinearRegression();
        double[] y = {
                4, 
                8, 
                13,         
                18
        };              
        double[][] x2 = 
            {
                { 1, 1, 1  },
                { 1, 2, 4  },
                { 1, 3, 9  },                                                               
                { 1, 4, 16  },
            };

        regression2.newSampleData(y, x2);
        regression2.setNoIntercept(true);
        regression2.newSampleData(y, x2);       
        double[] beta = regression2.estimateRegressionParameters();
        for (double d : beta) {
            System.out.println("D: " + d);
        } 
```

# ios - UITabBar 在单击时摆脱了屏幕顶部的 UINavigation 项

> ID：14533477
> 
> 赞同：1
> 
> 时间：2013-01-26T03:12:44.137
> 
> 标签：ios, ios5, uitabbarcontroller, uitabbar

我正在制作一个具有 UITabBar 和 UINavigationConroller 的应用程序。当我在应用程序周围单击时，屏幕顶部的导航项会出现，屏幕底部的 UITabBar 也会出现。

但是，当我单击其中一个 UITabBar 项目时，它确实进入了它应该进入的屏幕，但由于某种原因 UINavigationItem 消失了。

有谁知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:34:26.060

在所有您`ViewController`使用以下代码。

```
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
 [self.navigationController setNavigationBarHidden:NO];
    }

-(void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
   [self.navigationController setNavigationBarHidden:YES];
} 
```

当你想显示`Navigationcontroller`使用`Hidden:NO`

# r - 带有 ggplot 的误差线 - 出现错误

> ID：14533480
> 
> 赞同：4
> 
> 时间：2013-01-26T00:40:27.373
> 
> 标签：r, ggplot2, standard-error

我正在尝试创建一个折线图并在添加错误栏中时不断收到错误（刚刚开始使用 R，所以很抱歉！）。我不知道为什么 - 帮助将不胜感激！

```
Group = c("a","a","b","b","a","a","b","b")
Time = c(1,2,1,2,1,2,1,2)
Code = c("A","A","A","A","B","B","B","B")
Mean = (2,6,7,5,6,1,2,8)
SE = c(1.9,1.7,1.5,1.3,2,1.8,2.3,1.5)
dataset=data.frame(Group,Time,Code,Mean,SE)

ggplot(data=dataset) + geom_line(aes(x=Time,y=Mean,colour=Code,linetype=Group))+ 
  scale_x_continuous(breaks=c(1,2)) + 
  scale_linetype_manual(values=c(2,1)) + 
  geom_point(aes(x=Time,y=Mean,colour=Code,linetype=Group)) + 
  geom_errorbar(aes(ymin=Mean-SE,ymax=Mean+SE),width=.1,position=dodge) 
```

问题与最后一行有关——没有它，代码可以正常工作。但有了它，我得到：`Error in eval(expr, envir, enclos) : object 'x' not found`。

那么我在这`geom_errorbar`条线上做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T00:48:47.017

我会尝试的第一件事是只定义一次美学，并在`ggplot()`函数中这样做。IE。

```
ggplot(data=dataset,aes(x=Time,y=Mean,colour=Code,linetype=Group,ymin=Mean-SE,ymax=Mean+SE)) + 
geom_line() + 
scale_x_continuous(breaks=c(1,2)) + 
scale_linetype_manual(values=c(2,1)) + 
geom_point() + 
geom_errorbar(width=.1,position='dodge') 
```

这是因为`ggplot`不能保证传递原始数据集中的所有变量，并且取决于此可能会导致奇怪的结果。

编辑：我只是注意到`x`永远不会被定义，`geom_errorbar`添加`x=Time`到或者应该解决问题。但是，确实不建议使用后者。`aes``ggplot()``geom_errorbar()`

如果您提供示例数据（例如`dput`），我将能够为您提供进一步的帮助。

# c++ - 用字符串附加 const char 变量

> ID：14533482
> 
> 赞同：-1
> 
> 时间：2013-01-26T03:13:42.360
> 
> 标签：c++, char, strcat, const-char

我有 2 个整数，我通过传递给用户定义的函数将其转换为 const char* 。现在我想将这两个变量附加到命令行字符串中

```
 "gnome-terminal -x sh -c 'cd; cd project/into_bot/; sh ./matlab_batcher.sh localize \""+num1+","+num2+"\"; exec bash; 
```

我知道它非常基础，但对数据类型很不好。我如何在此处附加这 2 个 const char？此方法不起作用，因为它会引发错误，表示 const char* 的二进制运算符。请帮助我，尽管它很简陋。

num1 和 num2 是变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:17:37.783

如果`num1`和`num2`是`const char *`，您可以使用`std::string`.

```
std::string cmd_line = std::string() +
    "gnome-terminal -x sh -c 'cd; cd project/into_bot/; "
    "sh ./matlab_batcher.sh localize \"" +num1+","+num2+"\"; "
    "exec bash;";

system( cmd_line.c_str() ); 
```

从语义上讲，这里发生的是您创建一个`std::string()`用于构建字符串的临时变量，然后在构建完所有内容后，它用于初始化永久变量`cmd_line`。

# iphone - 在 xcode 4.x 中添加静态库的标头搜索路径混淆？

> ID：14533483
> 
> 赞同：4
> 
> 时间：2013-01-26T03:14:16.110
> 
> 标签：iphone, ios, xcode, ipad, xcode4.5

我对在 xcode 4.5 中添加核心绘图静态库感到困惑。它与 xcode 3.x 版本不同。我尝试了很多东西，它给出了找不到头文件和链接器错误。

我已按照以下步骤操作。在这种情况下，我们必须在 Header 搜索路径中使用递归。如果有人做错了，请帮忙？

> 1）在Xcode项目中添加coreplot库及其头文件。（勾选本地复制）
> 
> 2）在项目构建设置中将编译器转换为 LLVM GCC 4.2。（不在目标构建设置中）
> 
> 3）拇指的编译器将是**“否”**
> 
> 4）在项目构建设置中添加标题搜索路径为，递归 **“$（SRCROOT）/Libs/CorePlot/CorePlotHeaders”**
> 
> 5）在目标构建设置中添加标题搜索路径为$（继承）
> 
> 6）库搜索路径在目标和项目构建设置中都是空的。
> 
> 7)-ObjC 已添加到目标构建设置中的其他链接器标志中。从中删除了 -all_load。
> 
> 8) 在目标和项目构建设置中，搜索路径始终为“是”。
> 
> 9）仅构建存档架构将是**YES**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:18:44.723

几天前我在尝试以`CorePlot`这种方式添加时遇到了同样的问题，但我发现有一个更简单的过程：

> 1.  将 CorePlotHeaders 目录复制到您的 Xcode 项目中
>     
>     
> 2.  将 Core Plot 库复制到您的 Xcode 项目中。
>     
>     
> 3.  打开您的应用程序目标构建设置，其他链接器标志包括：
>     
>     
> 
> -ObjC（-all_load 曾经需要作为链接器标志，但在 Xcode 4.2 中不再需要）
> 
> 1.  将 QuartzCore 框架添加到项目中。
>     
>     
> 2.  将项目构建设置中的 C/C++ 编译器更改为 LLVM GCC 4.2 或 LLVM 1.6。

就我而言，我不需要改变我`C/C++ Compiler`的`CorePlot`工作

# r - 对不同长度向量的向量化操作

> ID：14533484
> 
> 赞同：1
> 
> 时间：2013-01-26T01:39:01.383
> 
> 标签：r

假设我有以下两个数组：

```
R <- 101
v <- array(0, dim <- c(R,2))
v[,1] <-runif(101)
t <- array(runif(5), dim <- c(5,2)) 
```

我想做的是为 v 第二列中的每个单元格分配以下函数的结果：

```
which.min(abs(v[r,1] - t[,1])) 
```

因此，对于 v 的第二列中的每个单元格，我将有一个 1、2、3、4 或 5。我知道我可以在 v 的所有行 r 上使用 for 循环来做到这一点，但是有人知道一种向量化的方法这个操作让我不必求助于（相当慢的）for循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:03:44.310

您可以扩展`v`和`t`：

```
V <- matrix(rep.int(v[,1],dim(t)[[1]]),ncol=dim(t)[[1]])
TT <- matrix(rep.int(t[,1],dim(v)[[1]]),ncol=dim(t)[[1]],byrow=T) 
```

然后减去并取每一列的最大值：

```
max.col(-abs(V-TT)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T03:29:49.670

尽管有名称，但并没有真正矢量化，如`Vectorize`调用`lapply`。但这给出了结果：

```
> Vectorize(function(r) which.min(abs(v[r,1] - t[,1])))(seq(nrow(v)))
##   [1] 4 3 3 2 5 5 2 5 2 5 3 3 2 5 1 4 5 5 4 3 3 5 5 2 4 2 2 4 4 3 2 4 5 2
##  [35] 2 3 2 4 4 1 5 5 2 3 2 4 5 5 3 5 2 4 4 2 4 5 5 5 5 5 4 3 3 5 5 3 2 3
##  [69] 5 3 5 3 3 5 4 5 5 3 1 2 5 5 2 3 3 4 3 3 4 5 4 2 2 3 4 2 5 5 5 5 2 
```

然后可以将此值分配给`v[,2`]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:58:52.953

我认为可以提供一种使用`stepfun`和结合的矢量化解决方案`pmin`，`pmax`所有这些都是矢量化的。它有点扭曲/复杂的逻辑，但值得付出所有努力。

使用`stepfun`++的优点`pmin`：`pmax`

*   速度极快（参见下面的基准测试）
*   不受矩阵大小的限制（在运行 Jonathan 的代码时查看巨大向量上的错误）

首先，这个想法的灵感来自[**这里**](https://stackoverflow.com/questions/1628383/finding-the-minimum-difference-between-each-element-of-one-vector-and-another-ve)`Jonathan Chang's`的帖子。这里的小变化是您需要索引而不是差异。另外，我*假设*所有值都是*正*的（来自您的输入）。您可以将其扩展到具有负输入的向量，但如果需要，我将这项任务留给您。在我开始代码和基准测试之前，让我解释一下背后的想法是什么。[](https://stackoverflow.com/questions/1628383/finding-the-minimum-difference-between-each-element-of-one-vector-and-another-ve)****`runif``stepfun`****

 ****假设您有两个向量`x`（等价于`v[,1]`）和`y`（等价于`t[,1]`）。现在，让我们以这种方式排序并`y`创建一个：`stepfun``sorted y`

```
y_sort <- sort(y)
step <- stepfun(y_sort, 0:length(y)) 
```

这对我们有多大帮助？查询`step(a)`会为您提供其中最大值的`y_sort`索引 `< a`。这可能需要一段时间才能理解。换句话说，值`a`位于`step(a)`和之间`step(a) + 1`的位置`sorted y (y_sort)`。现在，我们首先要弄清楚的是，这两个值中的哪一个最接近`a`. 这是通过提取索引`step(a)`和与这些索引对应`step(a)+1`的值并询问是否. 如果它是假的，那么，就是你的索引，反之亦然。其次，从from中取回原始索引，这可以通过使用in选项获取相应的排序索引来实现。`y_sort``abs(a-y_sort[step(a)]) > abs(a - y_sort[step(a)+1])``step(a)``y``y_sort``index.return = TRUE``sort`

我同意以这种方式遵循这可能会非常复杂。但是检查代码并逐步运行它，并使用上面的文本跟随它（如有必要）。最好的部分是它`a`可以是一个向量，所以它非常快！现在开始代码。

```
# vectorised solution using stepfun
vectorise_fun1 <- function(x, y) {
    y_sort <- sort(abs(y), index.return = TRUE)
    y_sval <- y_sort$x
    y_sidx <- y_sort$ix

    # stepfun
    step_fun <- stepfun(y_sval, 0:length(y))
    ix1      <- pmax(1, step_fun(x))
    ix2      <- pmin(length(y), 1 + ix1)
    iy       <- abs(x - y_sval[ix1]) > abs(x - y_sval[ix2])

    # construct output  
    res      <- rep(0, length(x))
    res[iy]  <- y_sidx[ix2[iy]]
    res[!iy] <- y_sidx[ix1[!iy]]
    res
}

# obtaining result
out_arun <- vectorise_fun1(v[,1], t[,1])
# (or) v[,2] <- vectorise_fun1(v[,1], t[,1])

# Are the results identical?
# Matthew's solution
vectorise_fun2 <- function(x, y) {
    res <- Vectorize(function(r) which.min(abs(x[r] - y)))(seq(length(x)))
}
out_matthew <- vectorise_fun2(v[,1], t[,1])

# Jonathan's solution
vectorise_fun3 <- function(x, y) {
    V  <- matrix(rep.int(x, length(y)), ncol = length(y))
    TT <- matrix(rep.int(y, length(x)), ncol = length(y), byrow = T)
    max.col(-abs(V-TT))
}
out_jonathan <- vectorise_fun3(v[,1], t[,1])

# Are the results identical?
> all(out_arun == out_matthew)
[1] TRUE
> all(out_arun == out_jonathan)
[1] TRUE 
```

那么，有什么意义呢？所有结果都是相同的，并且功能`stepfun`庞大且难以遵循。让我们取一个巨大的向量。

```
x <- runif(1e4)
y <- runif(1e3) 
```

现在，让我们进行基准测试以查看优势：

```
require(rbenchmark)
> benchmark( out_arun <- vectorise_fun1(x,y), 
             out_matthew <- vectorise_fun2(x,y), 
             out_jonathan <- vectorise_fun3(x,y), 
             replications=1, order = "elapsed")

#                                   test replications elapsed relative user.self
# 1     out_arun <- vectorise_fun1(x, y)            1   0.004     1.00     0.005
# 2  out_matthew <- vectorise_fun2(x, y)            1   0.221    55.25     0.169
# 3 out_jonathan <- vectorise_fun3(x, y)            1   1.381   345.25     0.873

# Are the results identical?
> all(out_arun == out_matthew)
[1] TRUE
> all(out_arun == out_jonathan)
[1] TRUE 
```

因此，使用`step_fun`速度至少快 55 倍，最多快 345 倍！现在，让我们寻找更大的向量。

```
x <- runif(1e5)
y <- runif(1e4)

require(rbenchmark)
> benchmark( out_arun <- vectorise_fun1(x,y), 
             out_matthew <- vectorise_fun2(x,y), 
             replications=1, order = "elapsed")

#                                  test replications elapsed relative user.self
# 1    out_arun <- vectorise_fun1(x, y)            1   0.052    1.000     0.043
# 2 out_matthew <- vectorise_fun2(x, y)            1  16.668  320.538    11.849 
```

乔纳森的函数导致分配错误：

```
Error in rep.int(x, length(y)) : 
     cannot allocate vector of length 1000000000 
```

而且这里的加速是320倍。****

# algorithm - 查找给定数字是否为 2 的幂的时间复杂度

> ID：14533486
> 
> 赞同：-1
> 
> 时间：2013-01-26T03:14:40.593
> 
> 标签：algorithm, time-complexity

我正在尝试计算以下函数返回的时间复杂度-

```
int isPowerof2(unsigned int num)
{
     if(((~num)&1) == 1)
          return 1;
      return 0;
} 
```

我认为它应该是 O(1) 但我不确定否定的复杂性。有人可以帮助我了解如何确定这方面的复杂性。谢谢！

编辑-如果在单个数字的情况下将其视为 n 个输入并且函数检查 2 的幂，那么在这种情况下的复杂性是多少

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T10:08:44.120

以二进制表示的 2 的幂恰好设置了*一个*位，所有其他位都为零。

减一将反转所有位，包括最右边的一位：

```
110101100 - 1=> 110101011 (in the case of zero, all bits get inverted) 
```

> 我们假设**`num & (num - 1)`**当且仅当`num`是 2 的幂时，它的计算结果为零。

**如果`num`实际上是 2 的幂**，则总共设置了一个位，减去一个将使该位变为 0，并将其右侧的所有位设置为 1。

因此，`num`不能`num - 1` *共享*任何设置位。因此，`num & (num - 1)`评估为 0。

**如果`num`不是2 的幂（并且*不是***零），则*至少*设置了两个位。当减去一个时，只有最右边的设置位被改变，而那些在它右边的，那么其他的*将不会*受到影响。

因此，`num`最多`num - 1`共享一个设置位。我们得出结论，对于非零且不是 2 的幂，`num & (num - 1)`不能评估为零。`num`

因此正确的检查是：`num && !(num & (num - 1))`

**复杂性**：在普通计算机上，所有二进制操作都在恒定时间内发生。因为有固定数量的恒定时间操作，所以整个函数会以恒定时间返回：`O(1)`.

当您执行`n`对该函数的调用时，您每次调用它时都会执行固定时间量的工作。当`n`翻倍时，工作量翻倍。由此可见，这种情况的复杂性是`O(n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:13:55.503

现代处理器以恒定数量的时钟对机器字大小的整数进行基本的算术和逻辑运算，而与这些整数的值无关。因此，函数中的所有这些操作都是 O(1)，并且由于操作的数量是固定的，因此整个函数是 O(1)。

顺便说一句，该函数不会判断给定数字是否是 2 的幂。它会判断它是否是 2 的倍数，因为它只查看 的最低有效位`num`。

对 2 的幂的正确检查是这样的：

```
int isPowerof2(unsigned int num)
{
  return (num != 0) && ((num & (num - 1) == 0);
} 
```

# validation - 使用 initBinder 添加多个验证器

> ID：14533488
> 
> 赞同：38
> 
> 时间：2013-01-26T03:15:36.493
> 
> 标签：validation, spring-mvc

我正在使用以下`initBinder`方法添加用户验证器：

```
@InitBinder
    protected void initBinder(WebDataBinder binder) {
        binder.setValidator(new UserValidator());
    } 
```

这里是`UserValidator`

```
public class UserValidator implements Validator {

    public boolean supports(Class clazz) {
        return User.class.equals(clazz);
    }

    public void validate(Object target, Errors errors) {
        User u = (User) target;

        // more code here
    }
} 
```

该`validate`方法在控制器方法调用期间被正确调用。

```
@RequestMapping(value = "/makePayment", method = RequestMethod.POST)
public String saveUserInformation(@Valid User user, BindingResult result, Model model){

    // saving User here

    // Preparing CustomerPayment object for the payment page.
    CustomerPayment customerPayment = new CustomerPayment();
    customerPayment.setPackageTb(packageTb);
    model.addAttribute(customerPayment);
    logger.debug("Redirecting to Payment page.");

    return "registration/payment";
} 
```

但是在返回付款屏幕时，我收到了这个错误：

> java.lang.IllegalStateException：Validator [com.validator.UserValidator@710db357] 的目标无效：com.domain.CustomerPayment[customerPaymentId=null] org.springframework.validation.DataBinder.setValidator(DataBinder.java:476) com.web。 UserRegistrationController.initBinder(UserRegistrationController.java:43) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) java .lang.reflect.Method.invoke(Method.java:597) org.springframework.web.bind.annotation.support.HandlerMethodInvoker.initBinder(HandlerMethodInvoker.java:393) org.springframework.web.bind.annotation.support.HandlerMethodInvoker .updateModelAttributes(HandlerMethodInvoker.java:222) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:429) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java: 414)

这可能是因为我返回 a`CustomerPayment`并且没有为此定义验证器。

我也无法在`initBinder`方法中添加多个验证器。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-03T19:40:28.560

You need to set the value of the `@InitBinder` annotation to the name of the command you want it to validate. This tells Spring what to apply the binder to; without it, Spring will try to apply it to everything. This is why you're seeing that exception: Spring is trying to apply the binder - with your `UserValidator` - to a parameter of type `CustomerPayment`.

In your specific case, it looks like you need something like:

```
@InitBinder("user")
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new UserValidator());
} 
```

To your second question, as Rigg802 explained, Spring does not support attaching multiple validators to a single command. You can, however, define multiple `@InitBinder` methods for different commands. So, for example, you could put the following in a single controller and validate your user and payment parameters:

```
@InitBinder("user")
protected void initUserBinder(WebDataBinder binder) {
    binder.setValidator(new UserValidator());
}

@InitBinder("payment")
protected void initPaymentBinder(WebDataBinder binder) {
    binder.setValidator(new CustomerPaymentValidator());
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T11:40:50.460

这有点棘手，1 个控制器在 1 个命令对象上只有 1 个验证器。您需要创建一个“复合验证器”，它将获取所有验证器并单独运行它们。

这是一个解释如何做到这一点的教程：[使用多个验证器](http://mdeinum.wordpress.com/2006/12/13/using-multiple-validators-in-controllers-and-formaction/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-04T16:16:05.250

我看不出为什么 Spring 没有过滤掉所有默认情况下不适用于当前实体的验证器，这会强制使用 @Rigg802 描述的 CompoundValidator 之类的东西。

`InitBinder`允许您仅指定名称，这可以让您有一些控制权，但不能完全控制如何以及何时应用您的自定义验证器。从我的角度来看，这还不够。

您可以做的另一件事是自己执行检查并仅在实际需要时将验证器添加到活页夹，因为活页夹本身具有绑定上下文信息。

例如，如果您想添加一个新的验证器，除了内置验证器之外，它还可以与您的 User 对象一起使用，您可以编写如下内容：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
  Optional.ofNullable(binder.getTarget())
      .filter((notNullBinder) -> User.class.equals(notNullBinder.getClass()))
      .ifPresent(o -> binder.addValidators(new UserValidator())); 
```

}

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-14T09:14:53.837

您可以通过迭代 ApplicationContext 中的所有 org.springframework.validation.Validator 来添加多个验证器，并在 @InitBinder 中为每个请求设置合适的验证器。

```
@InitBinder
public void setUpValidators(WebDataBinder webDataBinder) {
    for (Validator validator : validators) {
        if (validator.supports(webDataBinder.getTarget().getClass())
                && !validator.getClass().getName().contains("org.springframework"))
            webDataBinder.addValidators(validator);
    }
} 
```

请参阅我的项目以获取示例和简单的基准。[https://github.com/LyashenkoGS/spring-mvc-and-jms-validation-POC/tree/benchamark](https://github.com/LyashenkoGS/spring-mvc-and-jms-validation-POC/tree/benchamark)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-22T04:21:21.407

有一个简单的技巧，总是`true`在`supports`方法中返回，并将类检查委托给`validate`. 然后基本上你可以在`initBinder`没有问题的情况下添加多个验证器。

```
@Component
public class MerchantRegisterValidator implements Validator {

    @Autowired
    private MerchantUserService merchantUserService;

    @Autowired
    private MerchantCompanyService merchantCompanyService;

    @Override
    public boolean supports(Class<?> clazz) {
        return true; // always true
    }

    @Override
    public void validate(Object target, Errors errors) {

        if (!RegisterForm.getClass().equals(target.getClass()))
            return; // do checking here.

        RegisterForm registerForm = (RegisterForm) target;

        MerchantUser merchantUser = merchantUserService.getUserByEmail(registerForm.getUserEmail());

        if (merchantUser != null) {
            errors.reject("xxx");
        }

        MerchantCompany merchantCompany = merchantCompanyService.getByRegno(registerForm.getRegno());

        if (merchantCompany != null) {
            errors.reject("xxx");
        }

    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-26T07:13:40.810

Spring MVC 4.x 现在支持一个命令上的多个验证器。您可以使用此代码段：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.addValidators(new UserValidator(), new CustomerPaymentValidator());
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-02T10:12:00.980

最安全的方法是添加一个通用的验证器来处理该控制器：

```
 @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.setValidator(new GenericControllerOneValidator());
    } 
```

然后，在通用验证器中，您可以支持多个请求主体模型，并且基于对象的实例，您可以调用适当的验证器：

```
 public class GenericValidator implements Validator {
        @Override
        public boolean supports(Class<?> aClass) {
            return ModelRequestOne.class.equals(aClass) 
                  || ModelRequestTwo.class.equals(aClass);
        }

            @Override
            public void validate(Object body, Errors errors) {
                if (body instanceof ModelRequestOne) {
                    ValidationUtils.invokeValidator(new ModelRequestOneValidator(), body, errors);
                }
                if (body instanceof ModelRequestTwo) {
                    ValidationUtils.invokeValidator(new ModelRequestTwoValidator(), body, errors);
                }

            }
        } 
```

然后为每个模型验证器实现添加自定义验证。`ModeRequestOneValidator`并且`ModeRequestTwoValidator`还需要实现的`Validator`接口`org.springframework.validation` 还有，别忘了在控制器里面使用`@Valid ModeRequestOne`and`@Valid ModeRequestTwo`方法调用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-27T16:04:29.723

安娜贝尔回答的一个补充：

如果控制器具有此方法参数并且您想专门验证该方法参数

```
 @RequestMapping(value = "/users", method = RequestMethod.POST)
 public String findUsers(UserRequest request){..} 
```

然后绑定应该是类名的小写（但只是第一个字母，而不是其他所有字母）

```
@InitBinder("userRequest")
protected void initUserBinder(WebDataBinder binder) {
    binder.setValidator(new YourValidator());
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-04-01T17:26:29.043

将请求声明为

`(... , Model model,HttpServletRequest request)`

和改变

```
model.addAttribute(customerPayment); 
```

至

```
request.setAttribute("customerPayment",customerPayment); 
```

# .net - F# 删除函数处理程序

> ID：14533489
> 
> 赞同：7
> 
> 时间：2013-01-26T03:15:48.910
> 
> 标签：.net, events, f#

所以，我有一个想要在事件触发器上执行的函数，但我想稍后将其删除。我该怎么做？我知道 F# 事件具有`Add`将函数添加为处理程序的方法，但您不能删除此函数。我明白，但我根本找不到如何创建任何委托！（嗯，有*，*但`type Foo = delegate of type1 -> type2`我不明白它的用法......）

编辑：这是我想要做的一个更清楚的例子，在代码中：

```
// Define and publish event
let _someEvent = new Event<string>()
let SomeEvent = someEvent.Publish

// Normally, I'd do this to use it:
SomeEvent.Add (fun arg -> printfn "Argument: %s" arg)

// Trigger the event
someEvent.Trigger "Hello world" 
```

但我的问题是我想在某个时候删除这个钩子。我知道它可能与代表......只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T07:21:16.840

另一种选择是使用订阅方法并使用 Dispose 取消订阅：

```
// Define and publish event
let someEvent = new Event<string>()
let SomeEvent = someEvent.Publish

// Subscribe to event
let subscription =
    SomeEvent.Subscribe (fun arg -> printfn "Argument: %s" arg)

// Trigger the event
someEvent.Trigger "Hello world"

// Unsubscribe
subscription.Dispose() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T07:51:13.060

是的，只需使用处理程序。

```
// Define and publish event
let _someEvent = new Event<string>()
let SomeEvent = _someEvent.Publish

// wrap function in handler
let handler = Handler<string>(fun _ arg -> printfn "Argument: %s" arg)

// add
SomeEvent.AddHandler handler

// remove
SomeEvent.RemoveHandler handler 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T04:09:26.810

您可以像创建任何其他对象一样在 F# 中创建委托。只需将一个函数传递给它的构造函数。您还可以像在任何 .Net 语言中一样，使用 .Net 语言从事件中删除处理程序`RemoveHandler`。您需要确保将最初添加的委托传递给它。

此示例（您可以在 FSI 中运行）创建一个`PaintEventHandler`填充蓝色表单的表单，并将其添加到表单的`Paint`事件中。然后将窗体上的按钮设置为从事件中删除绘制处理程序，并强制重绘窗体。

```
open System
open System.Drawing
open System.Windows.Forms

let form = new Form()

let paintHandler =
    PaintEventHandler( // The function is passed to the delegate constructor.
        fun sender e ->
            e.Graphics.Clear Color.CornflowerBlue
    )

form.Paint.AddHandler paintHandler // Handler added.

let btn = new Button()
btn.Text <- "Remove Handler"
btn.Width <- 200;
btn.Click.Add (fun e ->
    form.Paint.RemoveHandler paintHandler // Handler removed.
    form.Invalidate() // Redraw
)
form.Controls.Add btn

form.Show() 
```

重要的是要注意`AddHandler`/`RemoveHandler`采用普通委托，但`Add`采用不同签名的功能。（`sender`缺少参数。）

# jquery - next() 和 nextall >

> ID：14533491
> 
> 赞同：0
> 
> 时间：2013-01-26T03:15:55.737
> 
> 标签：jquery, html

我有以下结构

```
<h2> title </h2>
<ul>
<li></li>
<li></li>
<li></li>
</ul>

<h2> title 2 </h2>
<ul>
<li></li>
<li></li>
<li></li>
</ul> 
```

我正在使用`Jquery.load()`函数，它看起来像这样：

```
<script> $('#result').load('http://www.mysite/page h2:contains(title)'  ) ; 
```

这可以让我进入 h2 .. 但我似乎无法进入 NEXT 元素.. 他们必须匹配吗？即他们都必须是相同的标签。我试过了：

```
<script> $('#result').load('http://www.mysite/page h2:contains(title).next(li:lt(3)'  ) ; 
```

但它不起作用..我需要在每个指定的 h2 之后选择 3 li

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:47:58.570

首先，您在 css 选择器中使用 jquery 方法。那是无效的CSS。其次，这似乎对我有用：

```
$('#result').load('http://www.mysite/page h2:contains(title) + ul > li:nth-child(-n+3)'); 
```

这个 css 将选择相邻`ul`的，that 的直接后代，`ul`s `li`，以及这些的前三个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:46:52.473

试试这个：

```
$('#result').load('http://www.mysite/page h2:contains(title) + ul li:nth-child(1),li:nth-child(2)'); 
```

**[工作演示](http://jsfiddle.net/dfUH8/11/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:54:01.510

以@Kundan Singh Chouhan 的回答为基础，完全一样的事情将在没有任何 JavaScript 的 CSS 中完成。

演示：http: [//jsfiddle.net/dfUH8/12/](http://jsfiddle.net/dfUH8/12/)

```
h2 + ul li:nth-child(1),
li:nth-child(2){
    background-color: red;
} 
```

虽然，这仅适用于支持 CSS3 的较新浏览器，因为 JavaScript 版本将适用于任何地方。

# c# - 如何在 C# 中基于带有换行符分隔条目的文本文件创建字符串数组？

> ID：14533494
> 
> 赞同：0
> 
> 时间：2013-01-26T03:17:04.280
> 
> 标签：c#, arrays, string, text-files, delimited

> **可能重复：**
> [C# 如何将 File.ReadLines 转换为字符串数组？](https://stackoverflow.com/questions/4220993/c-sharp-how-to-convert-file-readlines-into-string-array)

我有一个文本文件，我想从中创建一个字符串数组。该文件是换行符分隔的。例如，

条目1

条目2

条目3

将创建一个数组 {"entry1", "entry2", "entry3"}

编辑：我想在 WebClient 中使用 DownloadString 来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:44:13.210

所以你只是想把一个字符串拆分成一个用新行分隔的数组？

如果是这样，这应该工作：

```
string temp = webClient.DownloadString(someurl);
string[] lines = temp.Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

祝你好运。

# javascript - 访问子域源代码

> ID：14533496
> 
> 赞同：0
> 
> 时间：2013-01-26T03:17:20.587
> 
> 标签：javascript, html

是否可以访问我控制的子域页面的来源？

例如：www.example.com/test.html 运行调用 login.example.com 的 javascript 并返回 login.example.html 的来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:28:23.650

这就是使用 document.domain 的乐趣所在。

**example.com/test.html 页面的 html**

```
<script>document.domain = "example.com";</script>
<iframe src="subdomain.example.com/domain.html" style="display:none"></iframe>

<script>
  /* make ajax calls or access iframe of the subdomain*/
</script> 
```

**subdomain.example.com/domain.html** [iframe 中的页面] 的HTML

```
<html>
  <head>

  </head>
  <body>
    <script>document.domain = "example.com";</script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:55:46.230

开箱即用，不，它是浏览器上的一项安全功能，可防止网站过度使用框架和 ajax：它被称为[**同源策略**](http://en.wikipedia.org/wiki/Same_origin_policy)

但是，如果您拥有或管理这两个域，则可以通过使用 HTTP 标头：Origin & Access-Control-Allow-Origin 或使用 Javascript 中的 document.domain 属性来允许它们共享资源。

# c# - 在 Epplus 中使用小计功能时，出现“Excel 在...中发现不可读的内容”错误

> ID：14533497
> 
> 赞同：6
> 
> 时间：2013-01-26T03:17:23.993
> 
> 标签：c#, asp.net, epplus

我的网页中有一个由 Epplus 库生成的简单 Excel 文档；但是，当我使用 excel 函数“小计”时，出现以下错误：

> Excel 在...中发现无法读取的内容

这是代码：

```
protected void Page_Load(object sender, EventArgs e)
{
   ExcelPackage pck = new ExcelPackage();
   ExcelWorksheet ws = pck.Workbook.Worksheets.Add("hoja1");

   ws.Cells["A1"].Value = 1;
   ws.Cells["A2"].Value = 2;
   ws.Cells["A3"].Value = 3;
   ws.Cells["A1:A3"].Style.Numberformat.Format = "#,##0";

   ws.Cells["A4"].Formula= "SUBTOTAL(9;A1:A3)";

   Response.Clear();
   Response.AddHeader("content-disposition", 
        string.Format("attachment;filename=\"{0}\"", "Reporte.xlsx"));
   Response.ContentType = 
        "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
   Response.BinaryWrite(pck.GetAsByteArray());
   Response.End();
} 
```

和带有详细信息的 xml 文档：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<recoveryLog xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
   <logFileName>error057400_01.xml</logFileName>
   <summary>
      Se han detectado errores en el archivo "C:\xxxxxx\Content.IE5\MAW7NL0X\Reporte.xlsx"
   </summary>
   <removedRecords summary="Lista de registros eliminados:">
      <removedRecord>
          Registros quitados: Fórmula de /xl/worksheets/sheet1.xml parte
      </removedRecord>
</removedRecords></recoveryLog> 
```

注意：如果我切换到使用以下功能，一切正常。为什么我的小计不起作用？

```
ws.Cells["A4"].Formula= "SUM(A1:A3)"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-26T03:35:46.113

不确定这是否是问题，但尝试替换“;” 带有“，”：

```
ws.Cells["A4"].Formula= "SUBTOTAL(9,A1:A3)"; 
```

祝你好运。

# scheme - 结构定义

> ID：14533502
> 
> 赞同：0
> 
> 时间：2013-01-26T03:17:46.150
> 
> 标签：scheme, racket

我被要求为动物园里饲养的每只动物创建一个结构定义。对于每一种动物，它们都会存储其名称、年龄、早餐时间、晚餐时间和物种。

```
 (define-struct animal (name species age breakfast-hour dinner-hour)) 
```

现在，每个动物园管理员都有自己的名字，并被指派看管动物园里的三种不同的动物。

会是这样吗？

```
(define attendant(make-attendant "David" "Leo" ')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:46:21.887

`attendant`使用所需字段定义结构。姓名，年龄，随便什么——还有三个额外的字段，每个指定的动物一个，并在创建服务员的那一刻传递这三个动物。

# java - 如何防止 IntelliJ 在我的 JAR 中包含 3rd-party JAR？

> ID：14533506
> 
> 赞同：0
> 
> 时间：2013-01-26T03:18:19.813
> 
> 标签：java, intellij-idea

如何防止 IntelliJ 在我的 JAR 中包含 3rd-party JAR？

这太烦人了。基本上我想要其中之一：

*   **只**用我的代码生成 jar 。清单中将引用 3rd-party jar。

或者

*   生成带有提取的 3rd 方库类的 jar。

唯一的问题是 IntelliJ 生成 JAR，其中包含其他 jar 文件。它们没用，因为当我通过`java -jar my.jar`. 我必须手动删除它们并重新打包 JAR/ZIP 文件。

依赖项在设置中未标记为“导出”。

我认为 jar 最终会出现在我的 jar 中，因为我在工件的布局中添加了“编译输出”。但是我不确定如何在没有依赖项的情况下进行编译输出。

我尝试将依赖项范围设置为“已提供”。它没有帮助。它们仍然被复制到输出。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:40:40.967

当您在 IDEA 中创建 jar 工件时，此行为由以下选项控制：

![jar 神器](../Images/95af8ce96782a85ee12e46f47030a3b5.png)

[有关详细信息，请参阅帮助](https://www.jetbrains.com/help/idea/create-jar-from-modules-dialog.html)。

# php - 将值添加到数组php中，然后放入json用于ajax

> ID：14533511
> 
> 赞同：0
> 
> 时间：2013-01-26T03:20:16.080
> 
> 标签：php, ajax

伙计们，我仍然有一个关于附加到数组中的问题，然后把它放在 json 中让我在 ajax 中使用它这是我的代码。

```
global $school_id;

        $get_section = "SELECT *
                        FROM section a
                        LEFT JOIN advisory_sections b ON(a.section_id = b.section_id)
                        LEFT JOIN school_faculty c ON (b.faculty_id = c.faculty_id)

                        WHERE a.school_id = '$school_id'  ORDER BY section_level ASC";

                        $result=mysql_query($get_section)or die(mysql_error());

                            $i=0;

                                $data=array();
                    while ($row = mysql_fetch_array($result))
                                {
                                    $data[] = array(
                                       'sec_id'=>$row['section_id'],
                                       'sec_name'=>$row['section_name'],
                                       'sec_dept'=>$row['section_department'],
                                       'sec_lvl'=>$row['section_level'],
                                      'advisory_id'=>$row['advisory_id'],
                                      'first_name'=>$row['f_firstname'],
                                      'last_name'=>$row['f_lastname'],
                                      'middle_name'=>$row['f_middlename'],
                                      'advisor_id'=>$row['faculty_id'],
                                    );

                    $get_subjects = "SELECT subject_name
                                        FROM subjects  
                                        WHERE level = '".$row['section_level']."' ";

                        $result_get_subjects =mysql_query($get_subjects)or die(mysql_error());

                        $subjects_count = mysql_num_rows($result_get_subjects);

                    $check_archive_subjects = " SELECT b.subject_name 
                                                FROM registrar_grade_archive a
                                                LEFT JOIN subjects b ON(a.subject_id=b.subject_id)

                                                WHERE a.advisor_faculty_id = '".$row['faculty_id']."'
                                                GROUP BY b.subject_name ASC
                                                 " ;

                     $query_checking =mysql_query($check_archive_subjects)or die(mysql_error());

                    $subjects_count_sent = mysql_num_rows($query_checking);

                                if($subjects_count_sent == $subjects_count){

                                        array_push($data, 'status:complete');
                                    }else{

                                        array_push($data, 'status:Incomplete');
                                    }

                                $i++;
                                }

        echo json_encode($data); 
```

阿贾克斯：

```
 function get_sections_status(){
     $.ajax({                
    url: 'teacher_class_get.php',
    dataType: 'json',
    type: 'POST', //u missed this line.
    data:{'func_num':'6'},
    success: function (data){
      $.each(data, function(i, item) {

        html = "<tr>";

                              html += "<td style='width:10%;'><input type='radio' name='section_id' rel='"+data[i].advisory_id+"' value='"+data[i].sec_id+"'></td>";
                              html += "<td style='width:25%;'><label>"+data[i].status+"</label></td>";
                              html += "<td style='width:15%;'><label id='year_level' rel='"+data[i].sec_lvl+"''>"+data[i].sec_lvl+"</label></td>";
                              html += "<td style='width:20%;'><label>"+data[i].sec_name+"</label></td>";
                              html += "<td style='width:30%;'><label id='faculty_id' rel='"+data[i].advisor_id+"'>"+data[i].last_name+", "+data[i].first_name+" "+data[i].middle_name+"</label></td>";                              
                              html += "</tr>";

       $('#table-sections-content').append(html);
       });

           }
      });

   }
   get_sections_status(); 
```

我得到了这样的回应：

```
[{"sec_id":"36","sec_name":"black","sec_dept":"highschool","sec_lvl":"firstyear","advisory_id":"60","first_name":"asdf","last_name":"asdf","middle_name":"asdf","advisor_id":"1"},"status:Incomplete",{"sec_id":"32","sec_name":"level-up","sec_dept":"highschool","sec_lvl":"firstyear","advisory_id":"53","first_name":"asdf","last_name":"asdf","middle_name":"asdf","advisor_id":"1"},"status:Incomplete" 
```

如您所见，状态不在数组内。这就是为什么我得到这种输出。

![这是我的输出](../Images/a06ca7b4707c0cca31c090b81a4e3065.png)

在我的输出中，我有一个具有状态但具有其他未定义值的新行，而其他行具有值但具有未定义状态..请帮助大家..提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:25:59.083

您需要在数据结构的不同级别添加状态。

试试这个（见代码中的注释）：

```
....
while ($row = mysql_fetch_array($result))
{
//Create a new item to add to $data later
    $item = array(
        'sec_id'=>$row['section_id'],
        'sec_name'=>$row['section_name'],
        'sec_dept'=>$row['section_department']
....

    //Add status to $item, rather than $data
    //I don't think array_push will give you what you want here
    if($subjects_count_sent == $subjects_count){
        $item['status']='complete';
    }else{
        $item['status']='incomplete';
    }
    //Add the new item after status has been set
    $data[]=$item;
    $i++;
}
.... 
```

是的，您应该考虑切换到 mysqli 或 PDO。

# android - 使用 Google 地图版本 2 时出错

> ID：14533512
> 
> 赞同：0
> 
> 时间：2013-01-26T03:20:17.473
> 
> 标签：android, google-maps

嘿嘿我无法在手机上加载地图我收到错误无法打开文件进行阅读我已将 google play 服务添加为库项目；我还在我的项目中添加了 google play services jar

AndroidManifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.mapsdemo"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="15"
            android:targetSdkVersion="15" />
        <permission
              android:name="com.example.mapsdemo.permission.MAPS_RECEIVE"
              android:protectionLevel="signature"/>
        <uses-permission android:name="com.example.mapsdemo.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

        <uses-feature
         android:glEsVersion="0x00020000"
         android:required="true"/>

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.mapsdemo.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="API KEY"/>
        </application>

    </manifest> 
```

我的 main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

我的 MainActivity.java

```
package com.example.mapsdemo;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
} 
```

当我在具有 Android 4.0.4 的 Galaxy s3 上运行它时，日志猫给了我一个错误：

日志 cat 01-25 20:11:45.690: E/(23663): 无法打开文件进行阅读 01-25 20:11:45.690: E/(23663): 无法打开文件进行阅读

请帮忙解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:33:55.527

哦，我的上帝..你的“我的 MainActivity.java”是错误的。你没有在里面写任何东西，所以你得到了失败。要显示 Google 地图，您的 java 代码至少必须包含以下代码，这是基本和初始设置；

**1.**修改您的“**my MainActivity.java** ”，如下所示；

这显示了如何使用地图和地图上的标记创建简单的活动。请注意我们如何处理用户设备上未安装/启用/更新 Google Play 服务 APK 的可能性。

```
public class MainActivity extends android.support.v4.app.FragmentActivity {

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.basic_demo);
        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }
} 
```

**2.**修改完成后，按键盘上的**ctrl+shft+字母“o”**保存，再次运行~！。

注意：在运行之前，您必须在 Android 4.0.3 中将构建目标设置为“Googel APIs”，而不是在 eclipse 中将构建目标设置为 Android 4.0.3。请检查一下; project < properties < Android < 选择Android 4.0.3下的“Googel APIs”，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:51:50.033

此错误消息显然是三星 Galaxy S3 的副作用，当您未注册用于使用 Android Maps API 的 Google API 控制台签署 Android 应用程序的数字证书的 SHA-1 指纹时，就会出现此错误消息V2。

例如，我得到了同样的错误：

```
Log cat 01-25 20:11:45.690: E/(23663): Can't open file for reading 
```

...在我切换到一台新笔记本电脑并忘记将该笔记本电脑上的新调试证书的 SHA-1 添加到 Google API 控制台之后。

要在 Windows 上为调试证书修复此问题，请打开命令提示符，然后：

```
cd .android
keytool -list -alias androiddebugkey -keystore debug.keystore -storepass android -keypass android -v 
```

这将打印出一堆文本，您需要在`SHA-1:`输出后复制文本。

然后，按照[Android Maps API V2 文档](https://developers.google.com/maps/documentation/android/start#creating_an_api_project)中的说明将您的 SHA-1 指纹、分号和您的应用程序包名称添加到 Google API 控制台。

# node.js - 用 https 请求/响应包装的分布式队列

> ID：14533513
> 
> 赞同：0
> 
> 时间：2013-01-26T03:20:46.503
> 
> 标签：node.js, queue, task, distributed

寻找有关如何执行以下操作的一些建议：

1.  接收来自网站的特定长时间运行进程的请求（~10-30 秒）
2.  网站后端安排作业并放入分布式队列..可能是 SQS/Kue/resque
3.  工作人员将作业从队列中取出并进行处理。将结果存储在某处。
4.  网站后端订阅作业完成事件并获取已处理作业的结果。
5.  网站后端使用任务结果关闭对网站的请求。

1,2和3没问题。我只是发现将排队任务的结果传递回后端以便它可以关闭请求很棘手。

从网站轮询不是一个选项 - 无论任务需要多长时间处理，请求都必须保持打开状态。我正在使用nodejs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:10:05.660

2 - 4 都发生在服务器端。没有什么可以阻止您轮询结果的预期结果位置（在服务器端），然后在结果最终出现时返回结果。

1.  客户端发送请求
2.  服务器启动作业并开始轮询结果
3.  结果返回，因此服务器端的轮询循环结束
4.  服务器将结果发送回客户端
5.  客户端-服务器连接终于被切断了

如果作业可以在完成时执行一个 url，那么您可以获得更高效的代码。在这种情况下，您的服务将有两个端点……一个供客户端启动进程，另一个供您的作业队列调用。

1.  客户端发送请求
2.  服务器开始工作......将响应回调保存在一个全局对象中，这样它就不会关闭（我假设这里是 express 的东西）

    openJobs.push({ id: 12345, res: res }); jobQueue.execute({ id: 12345, data: {...}});

3.  作业完成并保存结果后，使用 id 调用服务 url

4.  您可以检查作业是否已实际完成并从 openJobs 列表中删除该作业
5.  完成原始响应

    openJob.res.send(数据);

6.  这将发送数据并关闭原始的客户端-服务器连接。

总体结果是您根本没有投票……这很酷。

当然......在这两种情况下，如果您的服务器在批处理过程中关闭，您就会被搞砸......这就是为什么我会在这种情况下推荐像 socket.io 这样的东西。您可以在某处将作业的结果排队，socket.io 将轮询/等待列表上的回调，并在有新项目时推送到客户端。这更好，因为如果服务器崩溃没什么大不了的 - 一旦服务器恢复，客户端将重新连接。

# android - Android - 如何将我现有的应用程序翻译成不同的语言？

> ID：14533515
> 
> 赞同：0
> 
> 时间：2013-01-26T03:21:31.267
> 
> 标签：android, internationalization

如果我想翻译整个应用程序（带有按钮名称和标签，以及长文本），是否最好只制作一个不同的应用程序？或者有我可以使用的翻译api吗？

我问的原因是我试着去 Goolge Play 商店用不同的语言搜索它，它基本上不明白我想要什么。那么对于不同的语言有不同的 Goolge Play 界面吗？或者一些我需要打开的设置？

这通常如何工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:29:14.243

使用文件中的所有字符串而不是硬编码方式。该文件的名称是 values 文件夹中的 strings.xml，对于另一种语言，您需要做的是创建 values-ru values-ch 等文件夹并将您的 strings.xml 放入文件夹中。并更改值。这是解释您的解决方案的一种快速方法。对于扩展，详细的解决方案在这里：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T03:30:08.550

> 多语言支持很容易为 android 完成。使用语言代码的后缀为该语言创建一个新的值目录。对于德语：`values-de`或法语：`values-fr`而不是将您复制`string.xml`到其中并翻译每个条目。这就是你所需要的。

Android 在运行时根据这些 android 设备所在的区域或用户语言偏好选择本地化。

看看这里::

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T03:36:32.147

您不想制作应用程序的多个版本。通常，这是通过为您要使用的每个翻译使用特定于语言环境的字典来完成的，因此您可以在适当的参考数据库中引用一个元素，而不是在您的应用程序中硬编码字符串，这基本上是所有您在应用程序中使用的字符串。

以下是我专门为 Android 开发找到的一些信息：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

至于翻译，自然语言处理还远远不足以自动提供良好的翻译，尤其是在没有上下文的情况下。您可以尝试使用一些统计方法的 Google 翻译 API (https://developers.google.com/translate/)，但即使这样也可能会给您带来错误的翻译（我确定您可能使用过 Google 或其他服务翻译一些东西，然后出来的东西你可以肯定是不准确的）。您可能可以将其用作将应用程序转换为不同语言的第一步，并且如果您的应用程序是开源的（或者即使不是），请要求用户输入各种翻译的准确性。

希望这会有所帮助。

# jquery - jQuery 1.4.2：如何隐藏淡入的元素

> ID：14533516
> 
> 赞同：0
> 
> 时间：2013-01-26T03:21:33.103
> 
> 标签：jquery

在某些情况下，我想隐藏一个当前正在淡入的元素。这适用于更高版本的 jQuery，但不适用于 jQuery 1.4.2，这是我正在处理的网站正在使用的版本，无法升级. 我怎样才能让它在 1.4.2 中工作？

**HTML**

```
<div class="fade">BLAH</div> 
```

**CSS**

```
.fade {
    display:none;   
} 
```

**Javascript**

```
$('.fade').show(1000);
setTimeout(function() {
    $('.fade').hide();
}, 500); 
```

[现场演示](http://jsfiddle.net/WcUUd)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:25:19.633

用于[`.stop()`](http://api.jquery.com/stop/)停止动画并清除队列：

```
$('.fade').show(1000);

setTimeout(function() {
    $('.fade').stop(true, true).hide();
}, 500); 
```

**演示：http: [//jsfiddle.net/WcUUd/4/](http://jsfiddle.net/WcUUd/4/)**

# wpf - 具有自定义下拉（弹出）模板等的组合框

> ID：14533518
> 
> 赞同：2
> 
> 时间：2013-01-26T03:21:46.817
> 
> 标签：wpf, wpf-controls

我在我的组合框中的自定义下拉列表或弹出模板中连接一些事件时遇到问题。

顺便说一下，这个自定义模板看起来像 IE 10 中的那个。这是 ![在此处输入图像描述](../Images/6f31b3e431f09d2a81110c2005606df2.png) 我得到的部分图片（下面是我的）。但我在删除历史列表中的项目时遇到问题。下面是我的 PART_Popup 模板

```
<Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
    <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MinWidth="{Binding ActualWidth, ElementName=Placement}">
        <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
            <!--<ScrollViewer>-->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel>
                    <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>

                    <Border Padding="5">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="History" Foreground="{StaticResource SeparatorLine}" />
                                <Border Height="2" Grid.Column="1" Margin="5,0,0,0" BorderBrush="{StaticResource SeparatorLine}" BorderThickness="0.5" />
                            </Grid>
                            <ListBox x:Name="listHistory"  BorderThickness="0" Margin="0" Padding="0" HorizontalContentAlignment="Stretch">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock Text="{Binding }" />
                                            <Button Grid.Column="1" HorizontalAlignment="Right" x:Name="btnDeleteHistoryItem" Content="r" FontFamily="Marlett" Style="{DynamicResource ButtonStyle}" Visibility="Hidden" Opacity="0.75" />
                                        </Grid>

                                        <DataTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Visibility" TargetName="btnDeleteHistoryItem" Value="Visible" />
                                            </Trigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                    </StackPanel>
                    </Border>
                </StackPanel>

                <Border Grid.Row="1" BorderBrush="{StaticResource SeparatorLine}" BorderThickness="0,1,0,0" Padding="5" Height="30">
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#33000000" Offset="0"/>
                            <GradientStop Offset="1"/>
                            <GradientStop Offset="0.375"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="btnClearHistory" Content=" Clear History " Style="{DynamicResource ButtonStyle}" />
                    </StackPanel>
                </Border>
            </Grid>
            <!--</ScrollViewer>-->
        </Border>
    </Themes:SystemDropShadowChrome>
</Popup> 
```

好吧，在**Listbox(listHistory)**中我有一个名为**btnDeleteHistoryItem**的按钮，但我无法钩住它。它在我的代码中返回 Null 错误

```
protected override void OnSourceInitialized(EventArgs e)
{
    ListBox lb = (ListBox)cbSearch.Template.FindName("listHistory", cbSearch);
    lb.ItemsSource = this.SearchHistory;
    lb.SelectionChanged += cbResults_SelectionChanged;

    Button btnDeleteHistoryItem = (Button)lb.Template.FindName("btnDeleteHistoryItem", lb);
    // if (btnDeleteHistoryItem != null)
    {
        btnDeleteHistoryItem.Click += DeleteHistoryItem_Click;
    }

    // or --------------

    Button btnDeleteHistoryItem = (Button)cbSearch.Template.FindName("btnDeleteHistoryItem", cbSearch);
    // if (btnDeleteHistoryItem != null)
    {
        btnDeleteHistoryItem.Click += DeleteHistoryItem_Click;
    }
} 
```

编码在这里有点经典，所以没有在事件挂钩中实现 MVVM。所以问题是这个**Button btnDeleteHistoryItem = (Button)lb.Template.FindName("btnDeleteHistoryItem", lb);** 或**按钮 btnDeleteHistoryItem = (Button)cbSearch.Template.FindName("btnDeleteHistoryItem", cbSearch);** 无法找到该 btnDeleteHistoryItem 的行。

我该如何解决这个问题？

- 更新 -

```
lb.Loaded += (a, b) =>
{
    Button btnDeleteHistoryItem = (Button)lb.Template.FindName("btnDeleteHistoryItem", lb);
    //if (btnDeleteHistoryItem != null)
    {
        btnDeleteHistoryItem.Click += DeleteHistoryItem_Click;
    }
}; 
```

也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:41:36.180

使用命令可能是这里最简单的解决方案。您可以将命令连接到删除按钮并将当前项目作为参数传递。这是一个简单的示例来说明。

```
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();
        SomeCommand = new MySampleCommand();

        cbo.Items.Add("Hello");
        cbo.Items.Add("Item 1");
        cbo.Items.Add("Another Item");
        cbo.Items.Add("Something else");
        cbo.Items.Add("Yet another item");
    }

    public MySampleCommand SomeCommand { get; set; }
}

public class MySampleCommand : ICommand {
    public bool CanExecute(object parameter) {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter) {
        MessageBox.Show(string.Format("You are trying to remove {0}", parameter.ToString()));
    }
} 
```

您的组合框绑定看起来像：

```
<Window x:Class="SOComboWithEmbeddedButton2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="Window"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <DataTemplate x:Key="ListBoxItemTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding}" />
            <Button Command="{Binding SomeCommand, ElementName=Window}" CommandParameter="{Binding}" Content="Remove" />
        </StackPanel>
    </DataTemplate>
</Window.Resources>
<StackPanel>
    <ComboBox ItemTemplate="{StaticResource ListBoxItemTemplate}" x:Name="cbo" />
</StackPanel> 
```

只需调整 DataTemplate 上的 Command 绑定以指向具有命令对象实例的适当对象。希望有帮助！

# firefox - 如何指定所有属性的 CSS3 过渡，但有一个例外/覆盖？

> ID：14533519
> 
> 赞同：1
> 
> 时间：2013-01-26T03:22:19.373
> 
> 标签：firefox, css, css-transitions

我在一个元素上设置了一个 CSS 过渡，所有属性都受到影响。[我不提前知道哪些 CSS 属性会改变，所以尽管存在性能问题](https://stackoverflow.com/questions/8947441/css3-transitions-is-transition-all-slower-than-transition-x)，我别无选择，只能使用“全部” 。

```
.a {
    transition: all 0.5s ease-in-out;
} 
```

但是，我希望特定属性具有与其他所有属性不同的转换设置：

```
.a {
    transition: all 0.5s ease-in-out, margin-top 5s linear;
} 
```

根据[W3C 的 transition-property 语法，](http://www.w3.org/TR/css3-transitions/#transition-property-property)指定 'all' 后应允许其他值。

但是，这似乎不适用于 Firefox (18) 和 Opera (12)。它在 Chrome/Safari（带前缀）和 IE10 中正常工作。

这是一个演示行为的小提琴：http: [//jsfiddle.net/F7tb5/3/](http://jsfiddle.net/F7tb5/3/)

有没有办法让它在所有现代浏览器中工作而无需手动枚举所有可能更改的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:07:04.250

# php - 从 PHP 代码创建数据库和分配用户

> ID：14533520
> 
> 赞同：0
> 
> 时间：2013-01-26T03:22:20.637
> 
> 标签：php, mysql

我想问一下从 PHP 代码创建用户和数据库的问题。

我在服务器上有 cpanel。在我的应用程序中，我希望我的应用程序创建一个数据库来备份某些内容。但我总是收到错误“拒绝访问”

那么，如何创建数据库并将用户分配给该数据库，以便该用户可以访问它。

我现在的代码是：

```
<?php
$con = mysql_connect("localhost","k3516438_disp","secret");
mysql_query("GRANT ALL PRIVILEGES ON *.* TO  'k3516438_disp'@'localhost' IDENTIFIED BY PASSWORD 'secret' WITH GRANT OPTION MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

if (mysql_query("CREATE DATABASE IF NOT EXISTS k3516438_dispatcher_backup",$con))
{
echo "Database created";
}
else
{
echo "Error creating database: " . mysql_error();
}

mysql_select_db("universal_backup", $con);

$sql = "CREATE TABLE order_backup
(
order_id varchar(15),
request_id varchar(15)
)";

mysql_query($sql);
?> 
```

它仍然无法正常工作，我编写的代码来自：[问题](https://stackoverflow.com/questions/2745675/create-mysql-user-and-database-from-php)。但这对我不起作用，我想。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:37:32.533

听起来您的用户没有相关权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:43:53.420

拥有用户所需的权限是不够的。当他从特定 IP 登录时，他也应该拥有特权。请检查用户“k3516438_disp”在从您的服务器IP访问时是否具有创建用户和数据库的权限。

可能是您的用户“k3516438_disp”没有从“localhost”访问的权限。MySQL 官方网站有更多关于“拒绝访问”错误的信息。见[http://dev.mysql.com/doc/refman/5.1/en/access-denied.html](http://dev.mysql.com/doc/refman/5.1/en/access-denied.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:08:07.123

最后我从本地（我的办公室）备份它，远程数据库。因为在本地，该特权没有问题。感谢大家回答这个问题。

# iphone - 游戏中心导致 UIApplicationInvalidInterfaceOrientation

> ID：14533521
> 
> 赞同：2
> 
> 时间：2013-01-26T03:22:35.693
> 
> 标签：iphone, ios, objective-c, game-center, uiinterfaceorientation

我已经检查了这个问题的其他解决方案，但没有一个对我有用。

如果我尝试在我的物理 iPhone（*不是模拟器；这在模拟器中工作*）上验证 GKLocalPlayer，我会收到以下错误：

```
Terminating app due to uncaught exception 
'UIApplicationInvalidInterfaceOrientation', reason: 'Supported orientations has
no common orientation with the application, and shouldAutorotate is returning YES'

*** First throw call stack:
(0x373463e7 0x33d7e963 0x37346307 0x3815b857 0x382fff21 0x381dfcdd
0x381def6b 0x37349ad4 0x372a128f 0x382fd0f3 0x32acce01 0x30a19793
0x30a195db 0x30a1ce45 0x3731a1b1 0x3728d23d 0x3728d0c9 0x315d733b
0x38147291 0x101a73 0x1019d0) 
```

我试图将以下代码添加到视图控制器，但没有任何变化：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

这个应用程序应该只在横向运行，我可以确认它只在我尝试通过 Game Center 对玩家进行身份验证时发生。如果我把那条线去掉，就没有问题了。

**编辑**

为了澄清，当以下代码运行时会发生这种情况：

```
- (void)GKLogin
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    [localPlayer authenticateWithCompletionHandler:^(NSError *error) {
        if (localPlayer.isAuthenticated)
        {
            NSLog(@"Authenticated");
        }
        else
        {
            NSLog(@"Not Authenticated");
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:29:54.863

在应用程序委托中试试这个

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {

return (NSUInteger)[application supportedInterfaceOrientationsForWindow:window] | (1<<UIInterfaceOrientationPortrait);

} 
```

# java - 如何在 JSP 页面中显示漂亮的打印 JSON 字符串

> ID：14533530
> 
> 赞同：2
> 
> 时间：2013-01-26T03:24:14.853
> 
> 标签：java, json, jsp, spring-mvc, jackson

我想在 JSP 页面中显示一个 JSON 字符串。我正在使用 Spring MVC 框架。下面是代码

```
String result = restTemplate.getForObject(url.toString(), String.class);

ObjectMapper mapper = new ObjectMapper();
Object json = mapper.readValue(result, Object.class);

String indented = mapper.defaultPrettyPrintingWriter().writeValueAsString(json);

System.out.println(indented);//This print statement show correct way I need

model.addAttribute("response", (indented)); 
```

这一行`System.out.println(indented);`打印出这样的东西-

```
{
  "attributes" : [ {
    "nm" : "ACCOUNT",
    "error" : "null SYS00019CancellationException in CoreImpl fetchAttributes\n java.util.concurrent.CancellationException\n\tat java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:231)\n\tat java.util.concurrent.FutureTask.",
    "status" : "ERROR"
  } ]
} 
```

这是我需要使用 JSP 页面显示的方式。但是当我像这样将它添加到模型时-

```
model.addAttribute("response", (indented)); 
```

然后在 resultform.jsp 页面中显示出来，如下所示 -

```
 <fieldset>
        <legend>Response:</legend>
            <strong>${response}</strong><br />

    </fieldset> 
```

我在浏览器上得到类似的东西-

```
{ "attributes" : [ { "nm" : "ACCOUNT", "error" : "null    
SYS00019CancellationException in CoreImpl fetchAttributes\n 
java.util.concurrent.CancellationException\n\tat 
java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:231)\n\tat 
java.util.concurrent.FutureTask.", "status" : "ERROR" } ] } 
```

我不需要。不知道为什么会变成这样？我需要上面打印出来的方式，就像这样。

```
{
  "attributes" : [ {
    "nm" : "ACCOUNT",
    "error" : "null SYS00019CancellationException in CoreImpl fetchAttributes\n java.util.concurrent.CancellationException\n\tat java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:231)\n\tat java.util.concurrent.FutureTask.",
    "status" : "ERROR"
  } ]
} 
```

谁能告诉我为什么会这样？以及如何以我需要的方式在 JSP 页面中显示它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T03:28:41.213

[空白字符通常在 HTML 中折叠（默认情况下）。](http://www.w3.org/TR/html401/struct/text.html#h-9.1)这些字符包括换行符。将 JSON 转储到[`<pre>`](https://developer.mozilla.org/en-US/docs/HTML/Element/pre).

```
<pre>
${response}
</pre> 
```

其他解决方案：[https ://stackoverflow.com/a/10474709/139010](https://stackoverflow.com/a/10474709/139010)

# unix - 管道输出到参数

> ID：14533535
> 
> 赞同：0
> 
> 时间：2013-01-26T03:25:41.313
> 
> 标签：unix, pipe

所以我想写一个简单的命令，它比我当前目录中的文件数少一。我有这个命令接近但关闭了一个。

```
ls | wc -l 
```

我如何通过管道将其`bc`减去，以便将其减一？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:30:01.853

这真的不是你想做的。改用`find`：

```
find . -maxdepth 1 -type f | wc -l 
```

此外，您可以排除隐藏文件，包括：

```
find . -maxdepth 1 -type f ! -name ".*" | wc -l 
```

为了完整起见，您可以处理包含换行符和空格的文件，例如：

```
find . -maxdepth 1 -type f -print0 | tr -dc '\0' | wc -c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:41:22.987

管道给`bc`你可以使用这样的东西

```
echo " $(ls | wc -l) - 1 " | bc 
```

编辑：`$(` `)`用史蒂夫的答案或您需要的任何其他命令替换部分。

# c# - StreamWriter 用新文本替换行

> ID：14533536
> 
> 赞同：6
> 
> 时间：2013-01-26T03:25:49.810
> 
> 标签：c#, windows, forms, streamwriter

是否可以在不删除其他数据的情况下用新文本替换文本文件中的文本，这是我的示例代码，但它不起作用，我知道它有问题但我无法弄清楚，谢谢，

```
private void button1_Click_1(object sender, EventArgs e)
{
    StreamReader sr = new StreamReader("test10101.txt");
    List<string> lines = new List<string>();
    while (!sr.EndOfStream)
        lines.Add(sr.ReadLine());
    output = Convert.ToInt32(textBox1.Text);
    newbal = Convert.ToInt32(lines[0]) - output;
    MessageBox.Show("Please get your cash....\n\nYour new balance is: $" + newbal);
    sr.Close();
    {
        string linetoreplace = lines[0];
        int newlinevalue = newbal;
        string contents = sr.ReadToEnd();

        StreamWriter sw = new StreamWriter("test10101.txt" + ".tmp");
        //contents = Regex.Replace(contents, linetoreplace, newlinevalue.ToString());
        contents = contents.Replace(linetoreplace, newlinevalue.ToString());
        sw.WriteLine(contents);
        sw.Close();

    } 
```

我想知道我是使用正则表达式还是直接替换该行，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T03:34:46.313

你可以更容易地做到这一点：

```
 string[] lines = System.IO.File.ReadAllLines("test");
        lines[0] = /* replace with whatever you need */
        System.IO.File.WriteAllLines("test", lines); 
```

希望这可以帮助

`int.TryParse`如果您不希望在您的代码部分中引发异常，我也建议使用，以防文件的第一行或文本框值不是数字

如果你真的想使用 streamwriter 你可以用这个，也是一种更简单的方法：

```
line[0] = newbal.ToString();
foreach(string s in lines)
    sw.WriteLine(s); 
```

# asp.net - 如何更新 GridView 中的实体对象

> ID：14533539
> 
> 赞同：2
> 
> 时间：2013-01-26T03:27:07.410
> 
> 标签：asp.net, entity-framework, gridview

我正在使用`Entity Framework`ASPX 网络表单。在我的(GV) 中，我使用和`GridView`制作我的所有专栏。在编辑模式下，我可以选择一个新值，但它不会更新记录。在 GV 中，我将 a设置为与该字段的相关表匹配的 a。我需要哪些步骤，需要处理哪些事件？我已经尝试了and事件，但到目前为止还没有有用的代码。如果你想让我给你看一些糟糕的代码 - 只要问，我也会很高兴。我只需要一些关于接线的指导。`ItemTemplates``EditTemplates``DropDownList``EntityDataSource``RowEditing``RowUpdating`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:00:13.740

假设我有一个名为 customerEntities 的 ADO.NET 实体数据模型，它有一个表 Customers 和 3 列：

1.  客户ID
2.  姓名
3.  姓

**ASPX：**

```
<asp:GridView ID="gvCustomers" runat="server" AutoGenerateEditButton="true" 
    AutoGenerateColumns="false" onrowcancelingedit="gvCustomers_RowCancelingEdit" 
    onrowediting="gvCustomers_RowEditing" onrowupdating="gvCustomers_RowUpdating" DataKeyNames="CustomerId">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblId" runat="server" Text='<%# Bind("CustomerId") %>' />
                <asp:Label ID="lblName" runat="server" Text='<%# Bind("Name") %>' />
                <asp:Label ID="lblSurname" runat="server" Text='<%# Bind("Surname") %>' />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtName" runat="server" Text='<%# Bind("Name") %>' />
                <asp:TextBox ID="txtSurname" runat="server" Text='<%# Bind("Surname") %>' />
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**后面的代码：**

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
                BindCustomers();
        }

        private void BindCustomers()
        {
            customerEntities entityModel = new customerEntities();
            gvCustomers.DataSource = entityModel.Customers;
            gvCustomers.DataBind();
        }

        protected void gvCustomers_RowEditing(object sender, GridViewEditEventArgs e)
        {
            gvCustomers.EditIndex = e.NewEditIndex;
            BindCustomers();
        }

        protected void gvCustomers_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
        {
            gvCustomers.EditIndex = -1;
            BindCustomers();
        }

        protected void gvCustomers_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            int customerId = (int)gvCustomers.DataKeys[e.RowIndex].Value;
            TextBox txtName = (TextBox)gvCustomers.Rows[e.RowIndex].FindControl("txtName");
            TextBox txtSurname = (TextBox)gvCustomers.Rows[e.RowIndex].FindControl("txtSurname");

            customerEntities entityModel = new customerEntities();
            Customer customer = entityModel.Customers.Where(c => c.CustomerId == customerId).First();
            customer.Name = txtName.Text;
            customer.Surname = txtSurname.Text;
            entityModel.SaveChanges();

            gvCustomers.EditIndex = -1;
            BindCustomers();
        } 
```

# c++ - VS2010 中令人困惑的 std::string::c_str() 行为

> ID：14533540
> 
> 赞同：0
> 
> 时间：2013-01-26T03:27:32.370
> 
> 标签：c++, visual-studio-2010, stl, constants, stdstring

我确定我做错了什么，但对于我的生活，我无法弄清楚是什么！请考虑以下代码：

```
cerr<<el.getText()<<endl;
cerr<<el.getText().c_str()<<endl;
cerr<<"---"<<endl;
const char *value = el.getText().c_str();
cerr<<"\""<<value<<"\""<<endl;
field.cdata = el.getText().c_str();
cerr<<"\""<<field.cdata<<"\""<<endl; 
```

`el`是一个 XML 元素并`getText`返回一个 std::string。正如预期的那样，`el.getText()`并`el.getText().c_str()`打印相同的值。但是，`value`设置为`""`- 即空字符串 - 当它分配`c_str()`. 这段代码已被写入 set `field.cdata=value`，因此正在清除它。将其更改为设置的假定相同的表达式`value`后，它工作正常，最后一行打印预期值。

由于`el`在堆栈上，我想我可能一直在破坏它 - 但即使在`value`设置之后，基础值`el`仍然是正确的。

我的下一个想法是，将事物分配给 const 指针存在一些奇怪的编译器特定问题，所以我写了以下内容：

```
std::string thing = "test";
std::cout << thing << std::endl;
std::cout << thing.c_str() << std::endl;
const char* value = thing.c_str();
std::cout << value << std::endl; 
```

正如预期的那样，我得到了三次“测试”。

所以现在我不知道发生了什么。似乎很明显，我的程序中发生了一些奇怪的事情，而样本中没有发生，但我不知道它是什么，而且我对如何继续寻找没有想法。有人可以启发我，或者至少指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T03:31:54.833

我假设这`el.getText()`是返回一个临时`string`对象。当该对象被销毁时，返回的指针`c_str()`不再有效（请记住，这也是使返回的指针`c_str()`失效的其他方式）。

临时对象将在创建它的完整表达式的末尾被销毁（在上面的示例中通常位于分号处）。

您可以通过以下方式解决您的问题：

```
const char *value = strdup(el.getText().c_str()); 
```

它将字符串的副本创建为`char`动态分配的内存中的原始数组。然后，您将负责`free()`在不再需要该数据时调用该指针。

# plot - 绘制从 csv 文件读取的数据时出错

> ID：14533543
> 
> 赞同：1
> 
> 时间：2013-01-26T03:28:15.907
> 
> 标签：plot, octave

尝试在 GNU/octave 中绘图时出现以下错误：

```
octave:22> plot(b(:,2),b(:,4))
error: invalid conversion from real matrix to real scalar
error: __calc_dimensions__: expecting graphics handle as only argument
error: called from:
error:   /usr/share/octave/3.6.2/m/plot/private/__go_draw_axes__.m at line 55, column 8
error:   /usr/share/octave/3.6.2/m/plot/private/__go_draw_figure__.m at line 167, column 19
error:   /usr/share/octave/3.6.2/m/plot/__gnuplot_drawnow__.m at line 86, column 5
octave:23> 
```

变量*b*从*csv*文件加载，如下所示：

```
b=csvread("my.csv") 
```

*my.csv*的内容

 *```
1,40.0942,0.775539,18.658
2,40.1882,0.857556,415.677
3,40.2818,0.858294,233.934
4,40.3748,0.887273,348.503
5,40.4669,0.908618,27.0149
6,40.558,0.908496,234.81
7,40.6478,0.911826,58.3943
8,40.7362,0.922848,204.128
9,40.823,0.928547,7.75615
10,40.908,0.920065,0.0654867 
```

可悲的是，有时会发生错误，而其他错误则不会。（八度错误？）

有谁知道发生了什么？

顺便说一下，我的系统是：Ubuntu 12.11，octave 3.6.2，Linux kernel 3.5.00-22-generic

**编辑：**

我认为这是一个错误。上述错误是由*plotyy*之后调用的*情节*引起的。要重现错误，请执行以下命令：

 *```
1> b=csvread("my.csv");
2> plot(b(:,2),b(:,4))
3> plotyy(b(:,1),b(:,2),b(:,1),b(:,4))
4> plot(b(:,2),b(:,4)) 
```**

# java - .xls 使用 java 和 POI APACHE 转换为 xlsx

> ID：14533544
> 
> 赞同：4
> 
> 时间：2013-01-26T03:28:20.953
> 
> 标签：java, apache-poi, xls, xlsx

我正在尝试使用 POI.APACHE 在 java 中编辑 excel 文件。我必须将 .xls 转换为 .xlsx，因为我需要将文件发送到共享点。这就是为什么它不能用不同的扩展名重命名。我该怎么办？我在他们的网站上找不到任何示例。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T16:09:43.007

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Iterator;

import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

/**
 * Partial copy of one of style and data..
 * 
 * @author jcalfee
 */
public class xls2xlsx {

    /**
     * @param args
     * @throws InvalidFormatException
     * @throws IOException
     */
    public static void main(String[] args) throws InvalidFormatException,
            IOException {

        String inpFn = args[0];
        String outFn = args[1];

        InputStream in = new BufferedInputStream(new FileInputStream(inpFn));
        try {
            Workbook wbIn = new HSSFWorkbook(in);
            File outF = new File(outFn);
            if (outF.exists())
                outF.delete();

            Workbook wbOut = new XSSFWorkbook();
            int sheetCnt = wbIn.getNumberOfSheets();
            for (int i = 0; i < sheetCnt; i++) {
                Sheet sIn = wbIn.getSheetAt(0);
                Sheet sOut = wbOut.createSheet(sIn.getSheetName());
                Iterator<Row> rowIt = sIn.rowIterator();
                while (rowIt.hasNext()) {
                    Row rowIn = rowIt.next();
                    Row rowOut = sOut.createRow(rowIn.getRowNum());

                    Iterator<Cell> cellIt = rowIn.cellIterator();
                    while (cellIt.hasNext()) {
                        Cell cellIn = cellIt.next();
                        Cell cellOut = rowOut.createCell(
                                cellIn.getColumnIndex(), cellIn.getCellType());

                        switch (cellIn.getCellType()) {
                        case Cell.CELL_TYPE_BLANK:
                            break;

                        case Cell.CELL_TYPE_BOOLEAN:
                            cellOut.setCellValue(cellIn.getBooleanCellValue());
                            break;

                        case Cell.CELL_TYPE_ERROR:
                            cellOut.setCellValue(cellIn.getErrorCellValue());
                            break;

                        case Cell.CELL_TYPE_FORMULA:
                            cellOut.setCellFormula(cellIn.getCellFormula());
                            break;

                        case Cell.CELL_TYPE_NUMERIC:
                            cellOut.setCellValue(cellIn.getNumericCellValue());
                            break;

                        case Cell.CELL_TYPE_STRING:
                            cellOut.setCellValue(cellIn.getStringCellValue());
                            break;
                        }

                        {
                            CellStyle styleIn = cellIn.getCellStyle();
                            CellStyle styleOut = cellOut.getCellStyle();
                            styleOut.setDataFormat(styleIn.getDataFormat());
                        }
                        cellOut.setCellComment(cellIn.getCellComment());

                        // HSSFCellStyle cannot be cast to XSSFCellStyle
                        // cellOut.setCellStyle(cellIn.getCellStyle());
                    }
                }
            }
            OutputStream out = new BufferedOutputStream(new FileOutputStream(
                    outF));
            try {
                wbOut.write(out);
            } finally {
                out.close();
            }
        } finally {
            in.close();
        }
    }
} 
```

# javascript - 使用 Javascript window.open 和 jQuery 提交表单

> ID：14533545
> 
> 赞同：1
> 
> 时间：2013-01-26T03:28:21.430
> 
> 标签：javascript, jquery, dom, window.open, new-window

我想使用 window.open 函数在新窗口中加载 yahoo.com。然后，填写搜索字段并使用 jQuery 提交搜索表单。

由于某种原因，以下代码不起作用：

```
var yhooWin;
var yhooDoc;

function openYahooWindow() {
    yhooWin = window.open("http://yahoo.com","ywin","width=1050,height=750");
    yhooWin.focus();
}

openYahooWindow();
yhooDoc = yhooWin.document;

$(yhooDoc).ready(function () {
    $(yhooDoc).contents().find("#p_13838465-p").val("gangnam style");
    $(yhooDoc).contents().find(".searchsubmit").trigger("click");
}); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:30:02.880

[由于相同的源策略](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)，您无法访问不同域的内容。查看错误控制台，您将看到错误消息。

如果您控制了另一个域，则可以查看[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。另一种选择是服务器端代理。另一种选择是像[Yahoo Pipes](http://pipes.yahoo.com/pipes/)这样的服务并进行 JSONP 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:32:02.147

您无法使用其他页面 javascript 控制新窗口。

例如：

Page1.html 用于`window.open`打开 yahoo.com

Page1.html 无法对 yahoo.com 执行任何操作

# android - 删除所有 ListView 行

> ID：14533547
> 
> 赞同：-1
> 
> 时间：2013-01-26T03:28:32.647
> 
> 标签：android, android-listview

我已成功地将 pulltorefresh 列表视图集成到我的实际代码中。

但是，当列表更新时，它会将所有存在的行添加到列表的末尾。我想在进行更新之前清除所有列表元素，但我坚持

**如何删除列表视图中的这些行。行项目是可缓存元素我认为清除缓存之类的东西可以工作吗？**请有任何想法。我想摆脱 listview 行。

```
<com.dmobile.pulltorefresh.PullRefreshContainerView
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:dividerHeight="2dp"
    android:scrollingCache="false"
    android:listSelector="@drawable/list_selector"
    /> 
```

这是我的高效适配器

```
 EfficientAdapter efficienadapter=new EfficientAdapter(Actualites.this,result);
            //EfficientAdapter.isActusAstuce=true;
            mList.setAdapter(efficienadapter); 
```

这是我的 oncreate 方法

mRefreshHeader = new TextView(this);

```
 mImage= new ImageView(this);

        mRefreshHeader.setTextSize(TypedValue.COMPLEX_UNIT_SP,16);

        mRefreshHeader.setTypeface(null, Typeface.BOLD);

        mRefreshHeader.setTextColor(getResources().getColor(R.color.blue));

        mRefreshHeader.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 
```

LayoutParams.MATCH_PARENT));

```
 mRefreshHeader.setGravity(Gravity.CENTER);

        mRefreshHeader.setText("Pull to refresh...");

        mImage.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

      //  LinearLayout.LayoutParams params=new LinearLayout.LayoutParams
           //     ((int)LayoutParams.WRAP_CONTENT,(int)LayoutParams.WRAP_CONTENT);

       // params.leftMargin=50;

       // mImage.setLayoutParams(params);

        int id = getResources().getIdentifier("boutton_retour", "drawable", getPackageName());

        //mImage.setImageResource(id);   

        mContainerView = (PullRefreshContainerView) findViewById(R.id.container);

        mContainerView.setRefreshHeader(mRefreshHeader);

        mContainerView.setRefreshHeader(mImage);

        mContainerView.setOnChangeStateListener(new OnChangeStateListener() {

            @Override

            public void onChangeState(PullRefreshContainerView container, int 
```

状态）{开关（状态）{

```
 case PullRefreshContainerView.STATE_IDLE:

                case PullRefreshContainerView.STATE_PULL:

                    mRefreshHeader.setText("Tirez pour actualiser...");

                    break;

                case PullRefreshContainerView.STATE_RELEASE:

                    mRefreshHeader.setText("Relâchez pour rafraîchir...");

                    break;

                case PullRefreshContainerView.STATE_LOADING:

                    mRefreshHeader.setText("Chargement en cours...");

                    new Thread(new Runnable() {

                        @Override

                        public void run() {
                            Actualites.this.runOnUiThread(new Runnable() {

                                @Override

                                public void run() {

                                    try {

                                        Thread.sleep(2000);

                                    } catch 
```

（中断异常 e）{

```
 e.printStackTrace();
                                    }
                                    //refresh ui

                                    new loadingTask().execute("");

                                    mContainerView.completeRefresh();
                                }
                            });

                        }

                    }).start();

                    break;

                }

            }

        });

        mList = mContainerView.getList();

        mList.setCacheColorHint(Color.TRANSPARENT);

        // PostList for ListView

        /// START AsyncTask here

        new loadingTask().execute("");

  note       new loadingTask().execute("") is an async background task 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:31:51.130

首先，清除结果数组/数组列表或列表，...之后，通知适配器同步列表项

```
result.clear();
efficienadapter.notifyDataSetChanged(); 
```

希望这有帮助

# php - 提交表单时不重定向

> ID：14533550
> 
> 赞同：0
> 
> 时间：2013-01-26T03:28:41.127
> 
> 标签：php, jquery, forms, redirect

我有一个简单的表单，我正在使用 jquery livevalidate 进行验证，并使用 php 脚本进行处理。我不想在表单成功提交后重定向页面，而是想使用 jquery 显示一个 div（并保持在同一页面上）。

```
<form action="/process_form.php" method="post">

      <div id="field1-container">
           <label>Name</label>
           <input type="text" name="name" id="name">

             <script type="text/javascript">
                var f1 = new LiveValidation('name');
                f1.add(Validate.Presence);
                f1.add( Validate.Length, { minimum: 4, maximum: 30 } );
              </script>
      </div>

      <div id="field4-container" class="field f_100 twelve columns">
           <label>
                Email Address
           </label>
           <input type="text" name="email" id="email">

               <script type="text/javascript">
                var f2 = new LiveValidation('email');
                f2.add(Validate.Presence);
                f2.add( Validate.Email );
              </script>

      </div>

      <div id="field3-container" class="field f_100 twelve columns">
           <label>Message</label>
           <textarea rows="5" name="message" id="message"></textarea>

<script type="text/javascript">
                var f3 = new LiveValidation('message');
                f3.add(Validate.Presence);
              f3.add( Validate.Length, { minimum: 20, maximum: 300 } );
              </script>

      </div>

<br>

<div id="form-submit">
           <input type="submit" class="small button radius" value="Submit">
</div>

<!-- mymodal div revealed on form success -->

<script type="text/javascript">
if ($("#contactform").valid()) {
        $("#myModal").reveal();
    }
 </script>

</form> 
```

处理代码（process_form.php）为：

```
<? ob_start(); ?>
<?php

$to = "destemail@domain.com \r\n";//<== update the email address
$headers = "From: $email_from \r\n";
$name = $_POST['name'];
$visitor_email = $_POST['email'];
$message = $_POST['message'];

$email_from = 'an@email.com';//<== update the email address
$email_subject = "Contact via website";
$email_body = "You have received a new message from $name.\n\n".
"Here is the message:\n $message\n\n\n".

$headers .= "Reply-To: $visitor_email \r\n"; //Send the email!

mail($to,$email_subject,$email_body,$headers);

// Function to validate against any email injection attempts
function IsInjected($str)
{
$injections = array('(\n+)',
          '(\r+)',
          '(\t+)',
          '(%0A+)',
          '(%0D+)',
          '(%08+)',
          '(%09+)'
          );
$inject = join('|', $injections);
$inject = "/$inject/i";
if(preg_match($inject,$str))
{
return true;
}
else
{
return false;
}
}

?> 

<? ob_flush(); ?> 
```

div '#mymodal' 出现了，但随后页面重定向到 php 文件......我怎样才能阻止它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:35:15.433

你似乎并没有阻止提交，除非我错过了。

您可能想要编写一些 javascript 来阻止默认操作 onsubmit，而是使用 AJAX 将表单数据发送到您的处理器 PHP 脚本。php 返回您想要返回的任何内容，AJAX 将其显示在您的模式窗口中。

我将从查看 Javascript 的 preventDefault 和 JQUERY 库的 .ajax 函数开始。

# html - 并排放置两个div

> ID：14533558
> 
> 赞同：0
> 
> 时间：2013-01-26T03:29:37.440
> 
> 标签：html, css

我有两个div，一个是图片，另一个是文本。我将这两个 div 放在父 div 中并用作我的标题。我的图像比文字高得多。我想要做的是将图像一直放在左侧，右侧的文本在底部垂直对齐以与图像底部对齐。我很难做到这一点。另外，我不能使用浮动，因为当我在手机上查看页面时，由于宽度，文本会中断到下一行，这很好，但使用 float:right 它会向右移动，这不是我想要的我正在尝试什么。

```
<div id="header" style="overflow:auto"><div style="float:left;">

<img src="Images/crescentlogo.png" /></div>

<div><h4 class="gold">Daily <span class="DarkGreen">EXCEEDING</span> <span class="gold">our Customers'</span> <span class="DarkGreen">EXPECTATIONS</span></h4></div>

</div> 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:55:31.930

这是它的代码：

```
<!DOCTYPE html>
 <html>
<head>
<style>
    h4{
        display: inline;
    }
</style>
</head>
<body><div id="header">
<img src="Images/crescentlogo.png" id="img" />

<div id="text" style="display: inline;"><h4 class="gold">Daily <span    
class="DarkGreen">EXCEEDING</span>
    <span class="gold">our Customers'</span> <span class="DarkGreen">EXPECTATIONS</span></h4>    </div>

</div>
     </body>
    </html> 
```

JSFiddle 链接：http: [//jsfiddle.net/w5wCG/1/](http://jsfiddle.net/w5wCG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:36:33.663

给也给`float:left`，它会并排放置`img``float:left``div`

```
img div {
    float:left; } 
```

# ios - 当我单击那个特定的单元格按钮 uitableview 时，如何隐藏细节 uitableViewCell webview？

> ID：14533561
> 
> 赞同：-1
> 
> 时间：2013-01-26T03:29:49.440
> 
> 标签：ios, xcode

在 tableviewcells 我有一个按钮和 webViews，有一些数组计数。所以当我点击特定的 tableViewcells 按钮动作时。我必须隐藏那个特定的表格单元格 webview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T02:38:04.600

```
[cell.webView setUserInteractionEnabled:NO]; 
```

使 webView 无法获取用户触摸焦点，从而使单元格获取用户交互 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:18:07.170

您可以这样做，实际上，`UIButton`如果您为按钮提供标签，您将获得单元格索引，使用该标签，您可以 `NSIndexPath`为您点击的单元格制作单元格对象，隐藏`UIWebView`该单元格中的子视图，您可能需要根据您所做`heightForRowAtIndexPath`的某些条件设置其高度基础`UITableView`。获取单元格的另一种方法是，`[button superview];`您将在此处获取`containerview`特定单元格，并应用相同的逻辑，这仅在您在`contentview`.

# html - 日期输入类型未在 IE 10 中显示

> ID：14533566
> 
> 赞同：2
> 
> 时间：2013-01-26T03:30:25.377
> 
> 标签：html, internet-explorer, datepicker

我有 IE 10 并试图查看输入日期类型的示例。但文本框只是一个纯文本框，没有日期选择器。问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T04:39:00.933

根据[caniuse.com 的兼容性表](http://caniuse.com/#feat=input-datetime)，目前支持的浏览器只有`<input type="date">`Chrome、Opera 和 iOS Safari。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T19:32:26.873

你需要一个像 angularjs 这样的 JavaScript 框架来完成这个技巧，即让它对浏览器友好。

# twitter-bootstrap - 自举重叠跨度

> ID：14533567
> 
> 赞同：1
> 
> 时间：2013-01-26T03:30:39.807
> 
> 标签：twitter-bootstrap, html, scaffolding

我正在学习引导程序，但在响应能力和调整大小方面遇到了一点问题。

我有这两个元素：

![在此处输入图像描述](../Images/4c495a762ad1da19dc94c3595956ebb6.png)

当调整窗口大小，甚至在 iPad/iPhone 或某些屏幕尺寸中查看它时，问题就出现了，跨度重叠：

![在此处输入图像描述](../Images/c8e2d3da83f3c427206b4cbed0d680b0.png)

经过足够的挤压后，它最终将自身重新排列到不重叠的位置：

![在此处输入图像描述](../Images/7146470a954745dcd3e5699c932fab6a.png)

可能我错过了一些东西，因为我的网络编程新手。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <link href="<?php echo base_url() ?>assets/css/bootstrap.css" rel="stylesheet">

    <meta charset="utf-8">

    <style type="text/css">

        body {
            background-color: #f5f5f5;
            font: 13px/20px normal Helvetica, Arial, sans-serif;
            color: #4F5155;
        }

        #aux{
            margin: 40px;
            height: 100%;
            padding-top: 40px;
        }

        #body{
            background-color: #fff;
        }

        .containerList{ border:2px solid #ccc; width:100%; height: 100px; }

    </style>
    <link href="<?php echo base_url() ?>assets/css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>

    <div id="aux">
        <div id="wrap">
            <div id="body" class="well">
                <div class="row-fluid">
                    <div class="span3">
                        <textarea id="limitedtextarea" name="limitedtextarea" rows="5" cols="40"></textarea><br>
                    </div>
                    <div id="otherPartFormId" class="span9" >
                        <div id="otherPartForm">
                            <div class="containerList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="<?php echo base_url() ?>assets/js/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T14:31:41.710

默认情况下，a 的宽度`<textarea>`由数量定义。除了 cols 的数量之外，`cols=""`您还可以通过 CSS 设置一些值来强制其宽度： **CSS 定义的宽度将覆盖 cols 的数量**。`width: 100px;`

 **但在这种情况下，您希望根据流体网格强制设置宽度，如`.row-fluid`容器所示。所以你应该把这个`.span12`类应用到`<textarea>`这样的：

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/7bA2e/)

```
<div class="row-fluid">
    <div class="span3">
        <textarea class="span12" id="limitedtextarea" name="limitedtextarea" rows="5" cols="40"></textarea><br>
    </div>
    <div id="otherPartFormId" class="span9" >
        <div id="otherPartForm">
            <div class="containerList"></div>
        </div>
    </div>
</div> 
```**

# c - PostQuitMessage() 是否进入 WM_DESTROY 或 WM_CLOSE？

> ID：14533569
> 
> 赞同：5
> 
> 时间：2013-01-26T03:31:08.730
> 
> 标签：c, windows, winapi

我正在尝试使用 Win32 API 创建一个非常基本的窗口，我已经很久没有这样做了。

我认为我的消息循环没问题，但是当我关闭打开的窗口时，应用程序仍在运行。看起来消息循环永远不会收到`WM_QUIT`消息。但是，我正在打电话`PostQuitMessage`，一个消息框确认我打电话给它。

这个极简代码有什么问题？

```
#include <Windows.h>

LRESULT CALLBACK window_proc(HWND hwnd, UINT msg,
        WPARAM w_param, LPARAM l_param) {
    switch (msg) {
    case WM_DESTROY:
        MessageBox(NULL, L"destroy", L"info", MB_OK);
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hwnd, msg, w_param, l_param);
    }

    return 0;
}

int CALLBACK WinMain(HINSTANCE h_instance, HINSTANCE h_prev_instance,
        LPSTR cmd_line, int n_cmd_show) {
    WNDCLASS wnd_class;
    HWND hwnd;
    MSG msg;
    BOOL ret;

    wnd_class.cbClsExtra = 0;
    wnd_class.cbWndExtra = 0;
    wnd_class.hbrBackground = (HBRUSH) GetStockObject(BLACK_BRUSH);
    wnd_class.hCursor = LoadCursor(NULL, IDC_ARROW);
    wnd_class.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    wnd_class.hInstance = h_instance;
    wnd_class.lpfnWndProc = window_proc;
    wnd_class.lpszClassName = L"MyWindowClass";
    wnd_class.lpszMenuName = NULL;
    wnd_class.style = 0;
    if (!RegisterClass(&wnd_class)) {
        MessageBox(NULL, L"cannot register window class",
            L"error", MB_OK | MB_ICONERROR);
    }

    hwnd = CreateWindow(
        L"MyWindowClass",
        L"",
        WS_OVERLAPPEDWINDOW | WS_VISIBLE,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        h_instance,
        NULL
    );

    while ((ret = GetMessage(&msg, hwnd, 0, 0)) != 0) {
        if (ret == -1) {
            MessageBox(NULL, L"error", L"", MB_OK);
        } else {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    MessageBox(NULL, L"quitting now", L"info", MB_OK);

    return msg.wParam;
} 
```

`GetMessage`文档说该函数在读取消息时返回0 `WM_QUIT`。Howcome`PostQuitMessage`被调用并且`GetMessage`从不返回 0？

谢谢你，Win32 大师。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T04:04:26.533

它是你的`GetMessage()`循环。

您将窗口句柄传递给该循环，从而过滤掉所有应用程序线程消息并仅接收到*该*窗口的消息。.

改变这个：

```
while ((ret = GetMessage(&msg, hwnd, 0, 0)) != 0) 
//  Note window handle =========^ 
```

对此：

```
while ((ret = GetMessage(&msg, NULL, 0, 0)) != 0) 
//  Note no handle =============^ 
```

您的应用程序线程队列现在应该由您的`GetMessage()`循环监控。

**原因：** `GetMessage()`可以定制调用以监视特定窗口句柄的消息队列。应用程序 WM_QUIT 未发布到窗口句柄队列；它被发布到线程消息队列，它只能通过使用`GetMessage()`（也许`PeekMessage()`也是，但它太长我记不住了）从队列中拉出消息，*没有*目标窗口句柄来专门监控。

# qt - 将 QFile 传递给函数

> ID：14533571
> 
> 赞同：3
> 
> 时间：2013-01-26T03:31:16.110
> 
> 标签：qt, dereference, qfile

我在`generateCSVHeader(*file4);`.

函数声明：

```
void generateCSVHeader(QFile * file); 
```

功能使用：

```
str="MyData.csv";
QFile file4(str);
generateCSVHeader(*file4); 
```

当我删除取消引用指示符时，它给了我一个 cannot convert QFIle to QFile * 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:36:54.893

您应该将*指针*传递给您的`QFile`对象（这是一个地址），而不是传递对象本身（取消引用是无关紧要的，因为它只与指针一起使用，而不是对象）。要获取对象的地址，您应该使用`&`运算符。所以你必须像这样调用你的函数：

```
generateCSVHeader(&file4) 
```

此外，您可以考虑使用引用而不是指针。

# jsf - 如何将文档添加到复合组件的属性

> ID：14533575
> 
> 赞同：3
> 
> 时间：2013-01-26T03:32:17.387
> 
> 标签：jsf, jsf-2, documentation, composite-component

我有一个看起来像这样的复合组件：

```
<composite:interface>           
    <composite:attribute name="confirmUnload" type="java.lang.Boolean" default="false" />
    <composite:attribute name="showLoader" type="java.lang.Boolean" default="true" />
    <composite:attribute title="test test" name="menuFormIds" type="java.lang.String" default="menuForm" />
    <composite:attribute name="unloadMessage" type="java.lang.String" default="You have unsaved data" />            
</composite:interface>

<composite:implementation>
    <div title="unloadEventComponent">...</div>
</composite:implementation> 
```

在页面中使用此组件时，eclipse 自动完成将帮助处理属性。但是，有时不看代码很难理解属性的作用，这对用户体验没有帮助。

有没有办法将属性描述添加到复合组件中，使其显示在 eclipse 自动完成中？

PrimeFaces 组件在选择属性时通常有描述，但它们使用自定义组件而不是复合组件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T03:50:01.680

为此，`shortDescription`应使用该属性。例如

```
<composite:attribute name="confirmUnload" type="java.lang.Boolean" default="false" 
    shortDescription="Set to true to enable the confirm unload message. Defaults to false." /> 
```

# php - 试图从提交的表单中插入

> ID：14533576
> 
> 赞同：0
> 
> 时间：2013-01-26T03:32:17.683
> 
> 标签：php, forms

我是 php 新手，只是为了警告你。无论如何，我已经查了很多，但看到我不太了解..我看不出该怎么做..所以我有一个表，里面有一个“日期”列，我正在测试使用表单将值插入表中。我想要它，这样我就可以在表单中拆分日期（例如月：日：年）并将它们组合成一个值以插入“日期” ' 列..任何想法如何做到这一点？我试过 implode() 但我不确定这些值是如何从表单发送的，所以......使用代码：

实际形式

```
 <form action="submit.php" method="post" style="text-align: center; width: 550px; margin: auto;">
        <!--Id: <input type="text" name="id"> -->
        <div style="float: left;">Author: <input type="text" name="author"></div>
        <div style="float: right;">Month: <input type="text" name="month" size="3">
        Day: <input type="text" name="day" size="3">
        Year: <input type="text" name="year" size="5"><br></div>
        <textarea name="post" style="width: 550px; height: 100px;"></textarea><br>
        <input type="submit">
    </form>

</body> 
```

提交.php

```
<?php

mysql_connect('localhost','root');
mysql_select_db('apple');

$date = implode("-", "(month, day, year)");

$sql = "INSERT INTO blog (id, author, $date, post) VALUES ('$_POST[id]', '$_POST[author]', '$_POST[date]', '$_POST[post]')";

if (!mysql_query($sql))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:38:41.287

`implode()`将数组作为第二个参数：

```
$date = implode("-", array($_POST['year'], $_POST['month'], $_POST['day'])); 
```

您还可以使用[`sprintf()`](http://us3.php.net/manual/en/function.sprintf.php)：

```
$date = sprintf("%04d-%02d-%02d", $_POST['year'], $_POST['month'], $_POST['day']); 
```

您的查询也有两个问题。尝试这个：

```
$sql = "INSERT INTO blog (id, author, `date`, post) 
        VALUES ('$_POST[id]', '$_POST[author]', '$date', '$_POST[post]')"; 
```

其他几点：

*   MySQL中的`date`数据类型是`YYYY-MM-DD`
*   您对[SQL 注入持开放态度](https://stackoverflow.com/q/60174)
*   [**不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。
*   这个词`date`在 MySQL 中是保留的。您应该尽量避免在保留字之后命名列。它在问问题。

# ajax - 如何从 jquery 移动页面加载请求中获取原始标记？

> ID：14533578
> 
> 赞同：0
> 
> 时间：2013-01-26T03:32:34.580
> 
> 标签：ajax, jquery-mobile, pageload

如何从在 jquery mobile 中加载页面的 AJAX 请求中获取原始 HTML 标记？

我的页面在页面容器元素（data-role="page"）之外有一个菜单，我需要在每次页面加载时更新它，但 jquery-mobile 只给我请求中的页面标记，而不是整个文档。

我什至尝试过为 jquery 使用全局 ajaxSuccess 回调；显然 jquery-mobile 也觉得有必要将其过滤到页面元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:24:23.853

你不能给菜单页面分配一个id并直接访问它吗？

```
$('#myMenu').html(newContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:22:28.453

在 pageload 事件中找到了 http 请求对象。

```
$(document).bind("pageload", function (e, data) {
    console.log(data.xhr.responseText);
}); 
```

# c++ - Eratosthenes C++ 实现筛：不退出循环

> ID：14533580
> 
> 赞同：1
> 
> 时间：2013-01-26T03:33:26.447
> 
> 标签：c++, math

我正在尝试自己实现筛子，除了提供的算法之外没有任何帮助......

```
#include <iostream>

using namespace std;

void findPrimeNumbers(int number) {

    int n=0;

    bool* boolArray = new bool[number](); 

    for(int i=0; i<number; i++) {
        boolArray[i] = true;
    }

    for(int i = 2; i<(int)sqrt(number); i++) {
        cout << "calculating...\n";
        if(boolArray[i]) {
            for(int j=(i^2+(n*i)); j<number; n++)
                boolArray[j] = false; 
        }
        if(boolArray[i])
            cout << i << "\n";
    }
    return;
}

int main()
{

    findPrimeNumbers(55);

    system("pause");
    return 0;
} 
```

除了程序挂在第 37 行；具体来说，“boolArray[j] = false”。它永远不会退出那个循环，我不知道为什么。

编辑：好的，这解决了问题但仍然不正确，但不要回答，我想弄清楚:)

```
#include <iostream>
#include <cmath>

using namespace std;

void findPrimeNumbers(int number) {

    int n=0;

    bool* boolArray = new bool[number](); 

    for(int i=0; i<number; i++) {
        boolArray[i] = true;
    }

    for(int i = 2; i<sqrt(number); i++) {
        if(boolArray[i]) {
            for (int j = pow(i,2) + n*i; j <= number; j = pow(i, 2) + (++n*i))
                boolArray[j] = false;
        }
        if(boolArray[i] && number % i == 0)
            cout << i << "\n";
    }
    return;
}

int main()
{

    findPrimeNumbers(13195);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:41:31.620

您的问题是`i^2+(n*i)`评论指出的那一行，`operator^`是 XOR 运算符，而不是求幂。为了对某些东西求幂，您必须包含`<cmath>`标题并`std::pow(a,b)`在它与数学表达式等效的地方调用`a^b`。

尽管您没有要求进行代码审查，但应该注意，对 bool 数组使用动态分配可能不是一个好主意。你应该使用`std::vector<bool>`并正确`reserve`调用。还应该注意的是，`pow`调用是完全没有必要的，因为您只是将它自身相乘（即 2^2 与 2*2 相同）。

更好的朴素初筛将类似于以下内容：

```
#include <vector>
#include <iostream>

template<typename T>
std::vector<T> generatePrimes(unsigned int limit) {
    std::vector<T> primes;
    std::vector<bool> sieve((limit+1)/2);
    if(limit > 1) {
        primes.push_back(2);
        for(unsigned int i = 1, prime = 3; i < sieve.size(); ++i, prime += 2) {
            if(!sieve[i]) {
                primes.push_back(prime);
                for(unsigned int j = (prime*prime)/2; j < sieve.size(); j += prime)
                    sieve[j] = true;
            }
        }
    }
    return primes;
}

int main() {
    std::vector<unsigned> primes = generatePrimes<unsigned>(1000000);
    for(auto& i : primes)
        std::cout << i << '\n';
} 
```

你可以[在这里](http://stacked-crooked.com/view?id=58d1a8fdac88c983464364ca5a8f7c89)看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:42:03.833

除了@Rapptz 指出的错误（^ 是按位异或）之外，您正在递增 n 而不是 j，因此永远不会达到终止条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:43:14.433

你有很多问题：

```
int j=(i^2+(n*i)) 
```

`^`不是 C++ 中的权力，它是按位 XOR 运算符。要解决此问题，您需要使用`#include <cmath>`并使用`pow`，或简单地使用`i * i`.

其次，正如其他人所提到的，您正在增加`n`. 最简单的解决方法是改用`while`循环：

```
int j = std::pow(i, 2) + (n*i);
while(j < number) {
    //Set bool at index to false
    j += i;
} 
```

第三，你有内存泄漏——你`new`没有`delete`. 此外，没有理由在`new`这里使用，而是您应该：

```
bool b[number]; 
```

这将在函数退出时自动释放 b。

最后，为什么`return`在`void`函数的底部？从技术上讲，您可以做到，但没有理由这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T03:46:05.750

两个问题：

`^`运算符不像其他一些语言那样是指数运算符。只需乘以`i`自身而不是 ( `i*i`)。

你的`for`循环：

```
for(int j=(i^2+(n*i)); j<number; n++)
    boolArray[j] = false; 
```

不会重新评估每个循环的初始条件。您需要在`for`循环开始时重新评估条件：

```
for(int n=0; j<number; n++)
{
    j=(i*i+(n*i));
    boolArray[j] = false; 
} 
```

# java - 代码未在 Netbeans 中使用实现控制器传递参数的 JavaFx 进行编译

> ID：14533583
> 
> 赞同：0
> 
> 时间：2013-01-26T03:34:02.287
> 
> 标签：java, netbeans, javafx-2, javafx, netbeans-7

我今天下午在我的项目中工作，没有问题。在回家之前，我对我的 svn 进行了提交以在家里继续它，但是现在当我尝试运行它时，它显示了一个以前没有显示的代码错误。以下代码应该使用控制器和传递参数来启动新场景。错误：

![在此处输入图像描述](../Images/7cd01b149d8b2393e816d799c01fc51b.png)

有人知道发生了什么吗？如果您说“代码错误”，那是不可能的，因为我在工作中使用了完全相同的代码。

细节，下午我用的是Mac OS，现在我用的是Windows。IDE是展位的Netbeans

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:24:19.513

我的问题不在于代码，实际上代码是正确的。出现问题是因为我的 Netbeans 指向的是旧版本的 JavaFX。修复它的方法是从我的计算机上卸载有关 java 的所有内容，然后使用较新版本的 JDK、JavaFx 和 Netbeans 重新安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:53:29.383

将您的加载程序转换为适当的类型。第一次将其转换为登录控制器，第二次将其转换为 MainViewController。

NetBeans 只看到返回的抽象对象，即使实际返回的内容更具体一点。我不确定当你从一个平台转移到下一个平台时为什么会发生这种情况（我假设你有相同的版本和所有东西），但一些编译器会将此视为错误而其他人不会。从技术上讲没有错误，只是有问题的结果。

# android - ListView 中的 ProgessBar 与 Seekbar

> ID：14533584
> 
> 赞同：0
> 
> 时间：2013-01-26T03:34:04.280
> 
> 标签：android, android-listview, seekbar, android-progressbar

我想要一个包含一对多条目的屏幕，其中栏会根据用户条目变得越来越大。用户将无权手动拖动栏。

我玩过 a`ProgressBar`但似乎主要用于文件下载。 `SeekBar`似乎更适合控制音量和其他 android 功能。这真的不是我想做的。做这个的最好方式是什么？

![在此处输入图像描述](../Images/d481e8495a4400c10160937d12f1344a.png)

任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:37:40.693

> 这真的不是我想做的。做这个的最好方式是什么？

没有最好的方法来做到这一点。`ProgressBar`和是A `SeekBar`​​ndroid SDK 中唯一可用于该栏的小部件。因此，除非您编写自己的小部件来完成您想要的所有操作，否则您必须使用其中一个（我不明白为什么会有问题）。

> 我玩过进度条，但似乎主要用于文件下载。Seekbar 似乎更适合控制音量和其他 android 功能。

这不是真正的问题，因为您始终可以禁用小部件，因此用户无法选择弄乱它们。

# jquery - jQueryUI Dialog + Firefox + ASP.Net = 对严格模式调用函数的访问被审查

> ID：14533585
> 
> 赞同：21
> 
> 时间：2013-01-26T03:34:14.020
> 
> 标签：jquery, asp.net, postback, jquery-ui-dialog

我有一个在 IE 和 Chrome 中运行良好的页面，但在 Firefox 和 Opera 中无法运行。当我说它不起作用时，我的意思是`Submit`按钮根本没有做任何事情。这是一个嵌套了几个页面和几个`UpdatePanels`jQueryUI 手风琴的页面。

我有一个简单的`div`.

```
<div id="date-dialog" title="Date?">
    <label id="lblDate" for="txtDate">
        Please Enter Your The Date:
    </label>
    <input type="text" id="txtDate" class="text ui-widget-content ui-corner-all" />
</div> 
```

然后我有一些简单的代码把它变成一个对话框：

```
$('#date-dialog').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    buttons: {
        "Submit": function () {
            __doPostBack('DateButton', $('#txtDate').val());
        },
        "Cancel": function () {
            $(this).dialog("close");
        }
    }
});

$('#txtDate').datepicker({ dateFormat: 'yy-mm-dd' }); 
```

我也尝试过添加这个，它没有帮助，实际上不适用于模态对话框：

```
 open: function (type, data) {
        $(this).parent().appendTo("form");
    }, 
```

在 Firefox 中，我收到以下错误：

```
Error: TypeError: access to strict mode caller function is censored
Source File: http://ajax.microsoft.com/ajax/4.0/2/MicrosoftAjaxWebForms.debug.js
Line: 718 
```

我不知道该怎么做才能解决这个问题。我很想关掉`strict mode`，但我找不到任何关于如何做到这一点的信息。我几乎无法使用 Google 找到有关该错误的任何信息。看来我正在做的事情应该很简单。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-09-05T13:03:49.510

这是一个旧帖子，但今天我仍然想到这个问题。我不想使用单击按钮，所以我尝试了 a`setTimeout`并且它也可以工作。

To people having this issue, try this solution:

```
setTimeout(function() { __doPostBack('DateButton', $('#txtDate').val()); }, 1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-15T09:25:23.787

最近不得不解决这个问题，我发现我可以通过将以下脚本添加到我的应用程序顶部来解决问题并让 __doPostBack 在 Edge、IE、Chrome 和 FireFox 中工作。

```
    if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1) { window.event = {}; }    

```

使用*SetTimeout*函数会中断 Edge。只需放入*window.event={}*就破坏了 IE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T01:24:46.400

虽然这实际上并没有解释如何解决问题，但这是一个可行的解决方法。

我创建了一个隐藏字段，对应于对话框中的每个字段。然后我创建了一个按钮。这些必须保留在对话框之外，`div`因为`div`当它被打开到对话框时，它们会被移到表单之外。然后我修改我的对话框创建代码是这样的：

```
$('#date-dialog').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    buttons: {
        "Submit": function () {
            $('#<%=hfDate.ClientID %>').val($('#txtDate').val());
            $('#<%=btnFormSubmit.ClientID %>').click();
            $(this).dialog("close");
        },
        "Cancel": function () {
            $(this).dialog("close");
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-16T09:30:24.007

这适用于 IE、Chrome 和 Firefox。浏览器！，感谢[https://mnaoumov.wordpress.com/2016/02/12/wtf-microsoftajax-js-vs-use-strict-vs-firefox-vs-ie/](https://mnaoumov.wordpress.com/2016/02/12/wtf-microsoftajax-js-vs-use-strict-vs-firefox-vs-ie/)

```
function hackEventWithinDoPostBack() {
var originalEventDescriptor = Object.getOwnPropertyDescriptor(Window.prototype, "event");
    var hackEventVariable = false;
    var eventPropertyHolder;
    Object.defineProperty(window, "event", {
        configurable: true,
        get: function get() {
            var result = originalEventDescriptor ? originalEventDescriptor.get.apply(this, arguments) : eventPropertyHolder;
            if (result || !hackEventVariable)
                return result;
            return {};
        },
        set: function set(value) {
            if (originalEventDescriptor)
                originalEventDescriptor.set.apply(this, arguments);
            else
                eventPropertyHolder = value;
        }
    });
    var originalDoPostBack = window.__doPostBack;

    window.__doPostBack = function hackedDoPostBack() {
        hackEventVariable = true;
        originalDoPostBack.apply(this, arguments);
        hackEventVariable = false;
    };
}

hackEventWithinDoPostBack(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-14T17:15:58.613

这可能是一些好消息，但我无法在最新的 Firefox 84.0.2 和 jQuery 3.5.1 中复制该问题。我测试了报告的场景以及与“使用严格”规则相关的其他 __doPostBack 问题场景，所有这些场景似乎都可以正常工作，没有任何 JS 错误。

您在使用最新的 jQuery 3.5.1 和最新的 Firefox 84.0.2 时仍然遇到这个问题吗？

jQuery 团队也有官方声明，但它很旧，适用于 jQuery 1.9.1，但不适用于 3.5.1 - [https://bugs.jquery.com/ticket/13335](https://bugs.jquery.com/ticket/13335)。

谢谢！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-16T19:52:40.127

这在 Firefox Quantum 中发生在我身上。我使用的是 jQuery 3.x CDN，我必须下载它才能在我的项目中本地引用它。之后，我对其进行了编辑（jquery.3.x.min.js）并评论/删除了以下内容：

`"use strict";`

我不得不做一个`search`来删除它们。有两个。

# wpf - 绑定错误代码是什么意思，我在哪里可以找到它们的列表？

> ID：14533589
> 
> 赞同：6
> 
> 时间：2013-01-26T03:34:45.877
> 
> 标签：wpf, binding

当我在 WPF 中遇到绑定错误时，会出现一个错误代码。

例如，

> System.Windows.Data**错误：40**：BindingExpression 路径错误：在“对象”“ProductModel”（HashCode=57788087）上找不到“Product”属性。绑定表达式：路径=产品；DataItem='ProductModel' (HashCode=57788087); 目标元素是'TextBox'（名称=''）；目标属性是“文本”（类型“字符串”）

或者

> System.Windows.Data**错误：4**：找不到与引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.ItemsControl'，AncestorLevel='1''的绑定源。BindingExpression:Path=Horizo​​ntalContentAlignment; 数据项=空；目标元素是'MenuItem'（名称=''）；目标属性是“Horizo​​ntalContentAlignment”（类型“Horizo​​ntalAlignment”）

这些错误代码代表什么，在哪里可以找到它们的列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T05:50:44.067

我认为您不会在任何地方找到官方源文档，这些似乎是 WPF 程序集内部的消息和代码。

这不是找到所有可能错误的唯一地方，但如果您查看[源代码](https://github.com/dotnet/wpf/tree/v5.0.3/src/Microsoft.DotNet.Wpf/src/PresentationFramework)，您可以查看`MS.Internal.TraceData`该类，您会在那里找到错误消息和代码。自从发布此答案以来，它似乎已被重构，但您可以在生成的[`AvTraceMessages.cs`](https://github.com/dotnet/wpf/blob/v5.0.3/src/Microsoft.DotNet.Wpf/src/PresentationFramework/MS/Internal/Generated/AvTraceMessages.cs)文件中找到这些。

例如，[`TraceData.ClrReplaceItem()`](https://github.com/dotnet/wpf/blob/v5.0.3/src/Microsoft.DotNet.Wpf/src/PresentationFramework/MS/Internal/Generated/AvTraceMessages.cs#L503)对应于 error`40`和[`TraceData.NoSource()`](https://github.com/dotnet/wpf/blob/v5.0.3/src/Microsoft.DotNet.Wpf/src/PresentationFramework/MS/Internal/Generated/AvTraceMessages.cs#L63)对应于 error `4`。

幸运的是，我们现在可以访问用于生成这些消息的资源文件，您可以在[此处](https://github.com/dotnet/wpf/blob/v5.0.3/src/Microsoft.DotNet.Wpf/src/PresentationFramework/AvTraceMessages.xml)找到。看起来错误代码可能对应于该文件中的索引。

# firefox-addon - 为什么这个剪贴板代码不能通过 Mozilla 验证？

> ID：14533593
> 
> 赞同：2
> 
> 时间：2013-01-26T03:35:31.727
> 
> 标签：firefox-addon, clipboard

药膏！当我在我的插件上尝试 Mozilla 的[验证器](https://addons.mozilla.org/en-US/developers/addon/validate)时，它得到以下与我对剪贴板使用的处理相关的错误：

> `nsITransferable`在 Gecko 16 中已更改。
> 
> 警告：`nsITransferable`界面已更改，以更好地支持隐私浏览模式。实例化对象后，您应该在调用`init`任何其他函数之前调用其上的函数。有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Using_the_Clipboard](https://developer.mozilla.org/en-US/docs/Using_the_Clipboard)。
> 
> ```
> var trans = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
> if ('init' in trans){ trans.init(null);}; 
> ```

我无法理解这一点。

这是我的代码 - 我显然在调用`trans.init`：

```
var clip = Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard);
if (!clip) return "";

var trans = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
if ('init' in trans){ trans.init(null);};  //<--IT DOESN'T LIKE THIS
if (!trans) return false;
trans.addDataFlavor("text/unicode"); 
```

我还尝试了`Transferable`Mozilla[示例](https://developer.mozilla.org/en-US/docs/Using_the_Clipboard)中的功能，但得到了相同的非验证报告。

*Mozilla AMO 的一位编辑告诉我要准确地写这个，但它仍然没有验证。*

我也试过了，简单地说：

```
var trans = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
trans.init(null);   //<---LOOK HERE
if (!trans) return false;
trans.addDataFlavor("text/unicode"); 
```

验证器不报告任何错误 - 只是这个警告。一切正常。Mozilla 更新了他们的 Gecko 引擎，他们希望开发人员能够适应新标准。

在我的使用中，我们也希望能够使用可能从应用程序外部获取的剪贴板内容，因此我们确实希望使用 init 来调用 init 函数，`null`而不是`window`.

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:44:00.943

`trans.init(null)`在某些情况下有效，例如您的情况。如果在错误的情况下使用它也可能导致隐私泄露，因此验证器将其所有使用标记为可能需要更改。因此，在这种情况下，您可以忽略此警告。

# java - 在 Android 项目中包含 Natty

> ID：14533596
> 
> 赞同：4
> 
> 时间：2013-01-26T03:35:46.867
> 
> 标签：java, android, eclipse, natty

在过去的几个小时里，我一直在尝试各种方法将 Natty ( [http://natty.joestelmach.com/](http://natty.joestelmach.com/) ) 包含到 Android 应用程序中。我试图包含我从 github 存储库 ( [https://github.com/joestelmach/natty](https://github.com/joestelmach/natty) ) 编译的 JAR 文件，但我总是缺少类异常。

真的被这个难住了，我做错了什么？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T17:36:36.507

我假设您遇到问题的原因是您没有包含 Natty 的所有依赖项（有很多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T08:03:52.247

我遇到了这个问题，并通过以 jar 文件的形式下载所有依赖项来解决它。请查看这个[GitHub 问题。](https://github.com/joestelmach/natty/issues/209)

# javascript - d3.csv 饼图示例

> ID：14533606
> 
> 赞同：1
> 
> 时间：2013-01-26T03:37:38.357
> 
> 标签：javascript, d3.js

从我应用 d3.csv 时阅读文档到

```
age,population
<5,2704659
5-13,4499890
14-17,2159981
18-24,3853788
25-44,14106543
45-64,8819342
≥65,612463 
```

我相信我应该得到

```
data = 
  [
    {"age": "<5", "population": "2704659"},
    {"age": "5-13", "population": "4499890"},
    {"age": "14-17", "population": "2159981"},
    {"age": "18-24", "population": "3853788"},
    {"age": "25-44", "population": "14106543"},
    {"age": "45-64", "population": "8819342"},
    {"age": "≥65", "population": "612463"},
  ] 
```

但是，当我在此示例中替换 d3.csv 时：http://bl.ocks.org/3887235[与](http://bl.ocks.org/3887235)上面的代码示例，什么都没有出现。

变化很小，看起来很合理，但是我不知道为什么这是空白的。

这是我的意思的演示：http: [//jsfiddle.net/dME8a/](http://jsfiddle.net/dME8a/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:11:03.097

您没有在 Fiddle 中加载 D3 库。

```
<script src="http://d3js.org/d3.v3.min.js"></script> 
```

查看更新版本：http: [//jsfiddle.net/dME8a/2/](http://jsfiddle.net/dME8a/2/)

# php - 如何在没有框架的情况下将值从控制器传递到 PHP 中的视图？

> ID：14533607
> 
> 赞同：5
> 
> 时间：2013-01-26T03:37:59.420
> 
> 标签：php, model-view-controller

我是 PHP 新手，已经阅读了 MVC。目前，我没有使用任何框架，并且想知道如何将数据从控制器推送到视图。

背景：

1.  htmlForm1.php -> 获取输入并将数据传递给 DoWork.php 进行处理
2.  DoWork.php -> 做工作并传递给 htmlForm2.php 显示
3.  htmlForm2.php -> 显示结果

我了解我通过 _GET 获取 DoWork.php 中的值（来自 htmlForm1.php）。我的问题是如何获取 htmlForm2.php 中的值（来自 DoWork.php）？

我曾想过使用会话，但这是唯一的解决方案吗？我不要求这些数据在 htmlForm2.php 之后持久化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T04:42:45.717

从技术上讲，视图*可以*直接请求模型数据。

![MVC](../Images/a931e55dcd19e26666fe53dd245701e9.png)

将模型连接到视图的虚线正是这种连接。

但是面向 Web 的 MVC 不同于常见的 MVC 方法，因为它是*按请求*执行的。在 Web 之外谈论 MVC 时，视图还有很多其他功能，而不仅仅是检索数据并打印它：视图可以直接连接到模型，加载后请求数据，还可以在控制器中触发动作（on视图中的特定事件）。仅使用 HTML 几乎不可能实现的事情（可以关闭 JavaScript，因此无法使用），而无需实际加载完整的新请求并获得完整的新响应。到目前为止，应用程序的 HTML 部分还停留在一个*愚蠢的模板*上，因为它被设计为请求的静态输出。

大多数 PHP Web 框架都将视图视为模板，我认为（恕我直言）这是这种情况下最好和更清晰的方法。这样，如果您发送视图作为响应，您可以通过简单的方式从控制器向视图发送变量：

```
$view = new View('view/myView.php');
$view->assign('a' => 'b'); 
```

然后在视图类中简单地`extract()`分配变量数组中的变量，然后包括实际的视图文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T11:01:57.047

该*控制器*应该推送到*视图实例的***唯一**信息是用户输入（即使在极少数情况下也是如此）。

 **相反，*视图*应该通过服务从*模型层*请求信息。*控制器*主要负责根据用户输入改变模式层的状态。这也应该通过服务来完成。

为此，控制器和视图必须能够访问相同的模型层。`ServiceFactory`这通常是通过在两种情况下注入某种来完成的。然后工厂确保每个服务只实例化一次，而不会使代码依赖于全局状态。

> [**PS：**视图不是愚蠢的模板。它们是负责应用程序中的 UI 逻辑的类。当 MVC 在 Web 环境中使用时，它们会为用户创建响应。]

> [**PPS：**模型不是类或对象。它是 MVC 中的两个层之一。另一层是*表示层*，控制器、视图和模板都在其中。模型层主要由三个主要组组成，每个组负责该层的一个特定方面：应用程序逻辑、领域/业务逻辑和存储逻辑。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:51:30.220

您的选择归结为会话、http (post/get) 或数据库。

最常见的是，您的表单会将其数据提交给控制器，控制器将通过其模型运行数据，可能会结束将其保存到表中。

然后在后续页面上，您将根据保存在会话/cookie 中的 user_id 之类的内容从模型中调用数据。**

# php - 为什么这个 php 脚本无法检测到除了 index.php 所在位置之外的其他目录中的图像？

> ID：14533613
> 
> 赞同：0
> 
> 时间：2013-01-26T03:39:06.903
> 
> 标签：php

```
<?

$start = $_GET[start] ? $_GET[start] : 0 ;

$sortby = $_COOKIE[sortby] ? $_COOKIE[sortby] : "name" ;
if($_GET[sortby]){
    $sortby = $_GET[sortby];
    setcookie("sortby", $_GET[sortby], time()+86400 );
    header("location: index.php");
}

$od = opendir("./");
while($file = readdir($od)){
    if( eregi("\.(gif|jpe?g|png)$", $file) ){
        $file2 = rawurlencode($file);
        $img_arr[$file2]            = $file;
        $img_arr_filesize[$file2]   = filesize($file);
        $img_arr_filemtime[$file2]  = filemtime($file);

        list($imagex, $imagey, $type, $attr) = getimagesize($file);
        $img_arr_sizexy[$file2]     = $imagex."x".$imagey;
    }
}

asort($img_arr);
asort($img_arr_filesize);
asort($img_arr_filemtime);

switch($sortby){
    case "time":
        $img_arr_final = $img_arr_filemtime;
        break;

    case "size":
        $img_arr_final = $img_arr_filesize;
        break;

    case "name":
        $img_arr_final = $img_arr;
        break;
}

$total_images = count($img_arr_final);

foreach($img_arr_final as $k=>$v){
    $i++;
    if($i < $start+1) continue;
    if($i > $start + $pp) break;

    $img_name = strlen($img_arr[$k]) > 18 ? substr($img_arr[$k],0,16)."..." :$img_arr[$k];

    $alt = $img_arr[$k] . " -|- Last modified: " . date("Y-m-d H:i:s", $img_arr_filemtime[$k]) . " ";

    $imgl .= "<div class=\"img_thumb\"><a href=\"$k\"><img src=\"index.php?thumb=$k\" alt=\"$alt\" title=\"$alt\" /></a><p title=\"".$img_arr[$k]."\"><strong>".$img_name.    "</strong><br /><span class=\"mini\">".$img_arr_sizexy[$k].", ".round(($img_arr_filesize[$k]/1024))." KB</span></p></div>";

}

for($p=0; $p*$pp <  $total_images ; $p++){
    $active = ($p*$pp) == $start ? "active" : "" ;
    $page_htmo .= "<a href=\"index.php?start=".($p*$pp)."\" class=\"$active pages\">".($p+1)."</a> ";
}

$arr_sortby = array("name"=>"Name", "size"=>"Size", "time"=>"Time");    

foreach($arr_sortby as $k=>$v){

    if($sortby == $k){
        $sortby_html[] = "<strong>$v</strong>";
    } else {
        $sortby_html[] = "<a href=\"index.php?sortby=$k\">$v</a>";
    }

}   

$sortby_htmo = implode(" | ", $sortby_html);

function make_thumbnail($updir, $img){
global $thumb_width, $thumb_height;

$thumbnail_width    = $thumb_width ? $thumb_width : 120;
$thumbnail_height   = $thumb_height ? $thumb_height : 80;

$arr_image_details  = GetImageSize("$updir"."$img");
$original_width     = $arr_image_details[0];
$original_height    = $arr_image_details[1];

if( $original_width > $original_height ){
    $new_width  = $thumbnail_width;
    $new_height = intval($original_height*$new_width/$original_width);
} else {
    $new_height = $thumbnail_height;
    $new_width  = intval($original_width*$new_height/$original_height);
}

$dest_x = intval(($thumbnail_width - $new_width) / 2);
$dest_y = intval(($thumbnail_height - $new_height) / 2);

if($arr_image_details[2]==1) { $imgt = "ImageGIF"; $imgcreatefrom = "ImageCreateFromGIF"; $imgx = "gif"; }
if($arr_image_details[2]==2) { $imgt = "ImageJPEG"; $imgcreatefrom = "ImageCreateFromJPEG"; $imgx = "jpeg"; }
if($arr_image_details[2]==3) { $imgt = "ImagePNG"; $imgcreatefrom = "ImageCreateFromPNG";  $imgx = "png"; }

if( $imgt ) { 
    $old_image  = $imgcreatefrom("$updir"."$img");
    $new_image  = ImageCreateTrueColor($thumbnail_width, $thumbnail_height);
    imageCopyResized($new_image,$old_image,$dest_x,         
    $dest_y,0,0,$new_width,$new_height,$original_width,$original_height);

    header("Content-Type: image/jpeg"); imagejpeg($new_image, NULL, 80);
}

}

if($_GET['thumb']) { 
 if( in_array($_GET['thumb'], $img_arr) ) make_thumbnail("./", $_GET['thumb']); // against file inclusion
 exit(); 
}
?> 
```

这是一个画廊生成器脚本，但它只向我显示与脚本位于同一目录中的图片，我如何修改它以允许其他脚本。我尝试了很多调整，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:46:36.547

当您尝试打开根目录时，几乎可以肯定是文件权限问题。

```
$od = opendir("./"); 
```

它将适用于脚本所在的目录，因为脚本将有权访问该目录。

我不建议授予 PHP 访问根文件夹的权限（即使仅在读取模式下），因为这是一个巨大的安全风险，因为理论上有人可以读取您的密码文件。

相反，您应该使用非根目录来保存要为其生成图库的图像，并且只授予其读取权限，即

```
mkdir /var/images
chmod a+r /var/images 
```

# bash - bash 脚本作为 sudo 但用户变量

> ID：14533614
> 
> 赞同：0
> 
> 时间：2013-01-26T03:39:46.393
> 
> 标签：bash, shell

我有一个需要使用 sudo 调用的脚本，但是有一部分我必须克隆一个 GIT repo `git clone foo:repo path/to/files`，为此它需要我的普通用户 ssh 密钥，这一切都在我的普通用户`$HOME/.ssh/config`文件中定义。

```
.ssh/config:
host foo
    HostName foo.com
    User myuser
    IdentityFile ~/.ssh/id_rsa 
```

有没有办法在调用这个脚本来保存我的 ssh 配置数据以便可以克隆 repo 时？我尝试将 -E 标志传递给 sudo，但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:07:09.130

从评论到原始帖子，所有功劳都归于@that-other-guy。

代替：

```
if [[ 'svn' == $repoType ]]; then
    svn co ...
elif [[ 'git' == $repoType ]]; then
    git clone ...
fi 
```

由于我是 sudo-ing，导致我的克隆无法访问我的用户 .ssh/config 数据以获取我的密钥

切换到：

```
if [[ 'svn' == $repoType ]]; then
    (sudo -u $SUDO_USER svn co ...)
elif [[ 'git' == $repoType ]]; then
    (sudo -u $SUDO_USER git clone ...)
fi 
```

# objective-c - 目标 c hmac sha 256 给出错误的 nsdata 输出

> ID：14533621
> 
> 赞同：2
> 
> 时间：2013-01-26T03:41:02.383
> 
> 标签：objective-c, nsdata, wcf-security, hmac

所以终于想出了如何进行 hmac sha 256 散列。我将把它用于我制作的 wcf 服务 api。我的问题是我的方法发送的 NSData 输出有空格。

例如。这就是我的 API 发出的样子

> > “2efb00aba01a3f5b674fba3063b43fee7a9356947118……”

这就是我的 iphone 应用程序显示它的方式

> > <2efb00ab a01a3f5b 674fba30.....>

这就是我在目标 c 中的代码的样子：

```
NSData *hmacSHA256(NSString *key, NSString *data)
{
    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
    return [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
} 
```

这来自这个答案：

[https://stackoverflow.com/a/8459123/639713](https://stackoverflow.com/a/8459123/639713)

无论如何，我的问题是，我该如何处理。如何将 NSdata 输出转换为字符串？如果确实转换为字符串，我猜输出将与 WCF 服务 API 发出的不同。我是否更改 API 处理其 hmacsha256 输出的方式？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T04:02:37.243

您可以稍微修改您的方法，以便创建一个将字节格式化为十六进制的字符串，而不是创建一个包含摘要字节的 NSData。

```
NSString *hmacSHA256(NSString *key, NSString *data)
{
    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);

    NSMutableString *result = [NSMutableString string];
    for (int i = 0; i < sizeof cHMAC, i++)
    {
        [result appendFormat:@"%02hhx", cHMAC[i]];
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:01:37.793

`<2efb00ab a01a3f5b 674fba30.....>`看起来像调用的结果`-[NSData description]`，就像`NSLog`对任何`%@`格式字符串一样。它`NSData`本身代表一个字节序列。您之后的输出似乎是作为十六进制字符串的字节序列。有关如何将 NSData 序列化为该格式的信息，请参阅[将 NSData 序列化为十六进制字符串的最佳方法](https://stackoverflow.com/questions/1305225/best-way-to-serialize-a-nsdata-into-an-hexadeximal-string/9084784#9084784)`NSData`。

# ruby-on-rails - 关系 - 访问子元素

> ID：14533628
> 
> 赞同：1
> 
> 时间：2013-01-26T03:41:38.413
> 
> 标签：ruby-on-rails, ruby

我正在尝试添加一个简单的库存管理系统。一个类产品有_许多变体，并且变体属于_一个产品，因此有一个product_id，以及一个名称和一个数量。当用户创建产品时，我通过调用以下命令让产品生成 11 个不同的变体（仅使用数值）

```
Located in variants.rb (model)

  def self.create_multiple_variants( product_id )
    p = Product.find(product_id)
    i = 11
    while i <= 21
      new_variant = Variants.create
      new_variant.product = p
      new_variant.name = (i*2)
      new_variant.qty = 0
      i += 1
    end
  end 
```

然后当用户尝试显示页面时，程序将检查属于产品的每个变体，看看它们是否有任何数量（管理员会在此过程中调整），如下所示：

位于视图中：

```
<div class="size"><br/>Size: <%= f.select(:size, @sizes_availiable, :prompt => "Select a Size...") 
```

位于 product_controller 中：

```
@sizes_availiable = Variants.create_inventory_array( @product.id ) 
```

位于variants.rb（模型）

```
 def self.create_inventory_array( product_id )
    p = Product.find(product_id)
    a = []
    p.variants.each do |v|
      a << variant.name if variant.qty > 0
    end
    a
  end 
```

我知道命名有点令人困惑，因为我将它设置为更大但现在不推荐使用它，很抱歉这有点令人困惑。现在您可以将变体视为“大小”

但是它的创建部分工作正常，但是当我去展示产品时，我收到了这条消息：

> ProductController 中的名称错误#show
> 
> app/models/variants.rb:20:in `create_inventory_array' app/controllers/product_controller.rb:18:in`show'

我假设我建立关系的方式是问题的根源，无论是那个还是我如何称呼它。有任何想法吗？

* * *

更新：

我使用了下面的建议，现在看来问题出在第二个功能上。这是我的新 variables.rb 和我得到的错误：

```
class Variants < ActiveRecord::Base
  attr_accessible :product_id, :name, :qty
  belongs_to :product

  def self.create_multiple_variants( product_id )
    p = Product.find(product_id)
    for i in 11..21
      v = Variants.create
      v.product = p
      v.name = (i*2)
      v.qty = 0
      v.save!
    end
  end

  def self.create_inventory_array( product_id )
    p = Product.find(product_id)
    a = []
    p.variants.each do |variant|
      a << variant.name if variant.qty > 0
    end
    a
  end
end

 NoMethodError in ProductController#create

 undefined method `Variants' for #<Product:0x007fe9561ad550>

 Application Trace | Framework Trace | Full Trace
 app/models/variants.rb:8:in `block in create_multiple_variants'
 app/models/variants.rb:7:in `each' app/models/variants.rb:7:in
 `create_multiple_variants' app/controllers/product_controller.rb:33:in
 `create 
```

我仍然认为这是如何建立关系的问题（我正在分配variants.product = current_product，但我称之为product.variants - 我觉得关系不是双向建立的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:21:38.717

是的。您需要保存对象。

要在循环结束时保存它：

```
new_variant.save! 
```

关于这个循环的旁注：

```
i = 11
while i <= 21
  ...
  i += 1
end 
```

这是一种更好的编写方式，因为它更清晰：

```
for i in 11..21 do
  ...
end 
```

对于这样的块：

```
 new_variant = Variants.create
 new_variant.product = p
 new_variant.name = (i*2)
 new_variant.qty = 0
 new_variant.save! 
```

使其更易于阅读：

```
 v = Variants.create
 v.product = p
 v.name = i*2
 v.qty = 0
 v.save! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:39:53.953

问题出在这段代码中：

```
p.variants.each do |v|
  a << variant.name if variant.qty > 0
end 
```

您传入变量`v`，但将其称为`variant`. 要修复它，请将行更改为

```
p.variants.each do |variant| 
```

* * *

另请阅读：[http](http://guides.rubyonrails.org/active_record_querying.html#conditions) ://guides.rubyonrails.org/active_record_querying.html#conditions通过查询所需产品 ID 和数量的变体，然后调用 map 仅获取名称，您可以使代码更加优雅。

* * *

这也可以改进：

```
new_variant = Variants.create
new_variant.product = p
new_variant.name = (i*2)
new_variant.qty = 0 
```

至

```
new_variant = p.variants.create name: "#{i*2}", qty: 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:02:47.163

我发现出了什么问题——我的模型是 Variants.rb（带有 s），它在某些时候会导致问题。我将文件 variables.rb 以及类名 Variants 分别重命名为 variant.rb 和 Variant，重新启动服务器，它就可以工作了！感谢帮助过的人！

# android - 为 Android NDK 编译：找不到 Android NDK 函数定义

> ID：14533631
> 
> 赞同：0
> 
> 时间：2013-01-26T03:42:50.353
> 
> 标签：android, android-ndk, makefile

我正在尝试通过 Cygwin 终端运行“ndk-build”来编译调用 Android NDK 函数（例如“AAsset_close”）的 Android-9 项目，但“ndk-build”命令返回一条错误消息，指出它找不到函数定义。

来自“ndk-build”的错误信息如下：

> [Android NDK 路径]/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm -linux-androideabi/bin/ld.exe：[项目文件夹]/静态库：在函数中 [函数名]：[文件名]：39：错误：未定义对 'AAsset_close' 的引用

等等

我的“Android.mk”文件如下：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := <name of project>
LOCAL_C_INCLUDES := <folders where header files are located>
LOCAL_CFLAGS := $(LOCAL_C_INCLUDES:%=-I%) -O2 -Wall -D__ANDROID__ -DtyANDROID
LOCAL_CPPFLAGS := $(LOCAL_C_INCLUDES:%=-I%) -O2 -Wall -D__ANDROID__ -DtyANDROID
LOCAL_LDLIBS := -lm -lEGL -lGLESv2 -llog -lz -landroid
LOCAL_STATIC_LIBRARIES := android_native_app_glue

LOCAL_ARM_MODE  := arm  

LOCAL_SRC_FILES := <source files>

include $(BUILD_STATIC_LIBRARY)
... 
```

我的“Application.mk”生成文件如下：

```
APP_ABI := armeabi armeabi-v7a x86
APP_PLATFORM := android-9 
```

根据“nm” Unix 命令，此函数在 Android NDK 库“libandroid.so”中定义，该库存在于所有目标平台的 NDK 路径中。如上所示，我在“LOCAL_LDLIBS”宏中包含了“-landroid”，这应该允许我链接到该库。我还需要做什么来修复这个编译错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:21:07.217

您展示了`Android.mk`构建静态库的内容，在此步骤中不调用链接器，因此`$(LOCAL_LDLIBS)`将被忽略。你可能有另一个`Android.mk`或不同的部分，你有

```
include $(BUILD_SHARED_LIBRARY) 
```

请检查，`-landroid`该部分可能缺少。

# html - 仅当类不存在时才应用 CSS？

> ID：14533632
> 
> 赞同：0
> 
> 时间：2013-01-26T03:43:04.170
> 
> 标签：html, css

我有这行来自 Twitter Bootstrap 的 CSS，

```
.icon-white,.nav-pills>.active>a>[class^="icon-"],.nav-pills>.active>a>[class*=" icon-"],.nav-list>.active>a>[class^="icon-"],.nav-list>.active>a>[class*=" icon-"],.navbar-inverse .nav>.active>a>[class^="icon-"],.navbar-inverse .nav>.active>a>[class*=" icon-"],.dropdown-menu>li>a:hover>[class^="icon-"],.dropdown-menu>li>a:hover>[class*=" icon-"],.dropdown-menu>.active>a>[class^="icon-"],.dropdown-menu>.active>a>[class*=" icon-"],.dropdown-submenu:hover>a>[class^="icon-"],.dropdown-submenu:hover>a>[class*=" icon-"]
{
    background-image:url("http://cdn.mydomain.com/static/img/glyphicons-halflings-white.png");
} 
```

如果 li 上存在禁用的类，我希望它忽略/不应用该 CSS，我将如何使其***不***适用。`.dropdown-menu>li.disabled>a`这很容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:45:12.143

您可以将一般情况下所需的样式应用于所有内容，然后在脚本中向下，您可以用“禁用”类的另一种样式覆盖它，模仿您的默认行为。

像这样的东西：http: [//jsfiddle.net/8cQvz/1/](http://jsfiddle.net/8cQvz/1/)

```
div{
 display:block;
 height:25px;
 width: 25px;
 background-image:url("image.png");
 float:left;
 margin:5px;
}

div.no
{
 background-image:none;
} 
```

# ios - 如何在 xcode 中使用 IBAction 从 UIView 转换到 UITableViewController？

> ID：14533634
> 
> 赞同：1
> 
> 时间：2013-01-26T03:43:24.170
> 
> 标签：ios, objective-c, xcode, in-app-purchase

我将我的应用程序构建为单视图应用程序，然后添加了另一个带有 .xib 的视图。我知道该怎么做。但我现在需要做的是添加另一个视图，但这是一个使用故事板的 UITableViewController。我正在从我使用的使用 MasterViewController 并自动加载第一个视图的教程中添加 IAP，但我并没有那样制作我的应用程序。

如果有人能解释我是如何做到的，那么当你在我的原始视图上单击一个按钮 (IBAction) 时，我可以转换到 UITableViewController，它使用具有我的 IAP 表的情节提要，那就太棒了。这甚至可能吗？如果有另一种方式我也很酷！顺便说一句，我对此很陌生，所以请尽可能简单地解释一下。因此，如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:56:09.007

在第一个表单上放一个按钮，按住 CTRL 并拖动鼠标并指向另一个表单，它将创建一个 segue。您可以设置类型（推送、模态等）

观看 2011 年介绍故事板的 WWDC 会议。值得。

# c# - StoreJson 上的 Couchbase 失败

> ID：14533637
> 
> 赞同：1
> 
> 时间：2013-01-26T03:43:48.877
> 
> 标签：c#, asp.net, couchbase

我在使用带有最新版本的 .NET 程序集 (1.2) 的 Couchbase 时遇到问题。我的目标是从我当前的 Oracle 数据库中选择 150,000 条记录，并将整个对象迁移到 Couchbase 数据桶中。150k 条记录作为对象存储在 objectList 中（belo

每次运行以下代码时，我似乎都会遇到 100,000 到 120,000 次失败。有谁知道可能是什么原因或如何最好地调试这个问题？但是，每次我运行它时，都会将不同的对象集添加到数据桶中，这让我更加困惑。

```
int failures = 0;
foreach (var obj in objectList) {

var result = client.StoreJson(StoreMode.Set, obj.Id, obj);
if (!result) failures++;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:37:22.250

出于调试目的，我建议不要使用`StoreJson`您使用的扩展方法`ExecuteStore`。您还必须执行序列化步骤。

这些方法之间的区别在于，虽然 StoreJson 只返回一个`bool`值，但 ExecuteStore 返回实际值，`IOperationResult`它会告诉您发生了什么。该对象上有一个状态代码和异常消息（如果有）。

[http://www.couchbase.com/docs/couchbase-sdk-net-1.2/api-reference-set.html](http://www.couchbase.com/docs/couchbase-sdk-net-1.2/api-reference-set.html)

# .htaccess - 如何修复由 .htaccess 引起的过多重定向？

> ID：14533641
> 
> 赞同：8
> 
> 时间：2013-01-26T03:44:20.627
> 
> 标签：.htaccess, redirect

我最近在客户的网站上添加了一个 Wordpress 博客。我创建了一个子目录并在那里安装了 Wordpress。在我将 .htaccess 文件添加到根目录之前，一切正常。

```
RewriteEngine on
rewritecond %{http_host} ^websitename.com [nc]
rewriterule ^(.*)$ http://www.websitename.com/$1 [r=301,nc] 
```

现在，当我单击博客链接时，出现以下错误

```
The webpage at http://websitename.com/blog/ has resulted in too many redirects. 
Clearing    your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with 
your computer. 
```

有谁知道如何解决这个问题？我对.htaccess 一点也不熟悉。

编辑：为了清楚起见，301 重定向适用于所有页面，除了博客文件夹。如果您输入 websitename.com，您将重定向到 www.websitename.com。但是，如果您输入 websitename.com/blog，您将遇到错误。此示例中的博客指向 Wordpress 文件夹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T03:48:55.953

我认为您试图强制“www。”？

使用以下内容：

```
RewriteCond %{HTTP_HOST} ^suncoastlaw\.com
RewriteRule .* http://www.%{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

要获得更多信息，请查看我在这里写的帖子：[强制 www](http://nishantk.net/wordpress/?p=95)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T03:51:31.890

你想要`*.suncoastlaw.com/xx -> www.suncoastlaw.com/xx`吗？

然后你的conf

`^(.*)$ http://www.suncoastlaw.com/$1`

让 www.suncoastlaw.com/$1 301-> www.suncoastlaw.com/$1

所以会有太多的重定向

改成

`rewritecond %{http_host} !www.suncoastlaw.com`

当不是 www.suncoastlaw.com 然后重定向

所有重写配置细节都可以在

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

**如何追踪**

您的[http://suncoastlaw.com/blog/](http://suncoastlaw.com/blog/)重定向到[http://www.suncoastlaw.com/blog/](http://www.suncoastlaw.com/blog/)然后 [http://www.suncoastlaw.com/blog/](http://www.suncoastlaw.com/blog/)重定向到[http://suncoastlaw.com/blog /](http://suncoastlaw.com/blog/) 这就是问题

```
$ curl -I http://suncoastlaw.com/blog/
HTTP/1.1 302 Found
Date: Sat, 26 Jan 2013 13:37:10 GMT
Server: Apache
Location: http://www.suncoastlaw.com/blog/
Content-Type: text/html; charset=iso-8859-1

$ curl -I http://www.suncoastlaw.com/blog/
HTTP/1.1 301 Moved Permanently
Date: Sat, 26 Jan 2013 13:37:21 GMT
Server: Apache
X-Pingback: http://suncoastlaw.com/blog/xmlrpc.php
Location: http://suncoastlaw.com/blog/
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T20:18:37.463

问题解决了。不幸的是，我无法弄清楚，但我找到了可以的人。显然，问题是由于在我的数据库中，该站点没有 WWW。所以我的博客重定向到我的旧网站的 URL。该问题已通过添加 WWW 得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T03:54:14.767

尝试将这些行添加到您的 httpd.conf 文件中，而不是使用 .htaccess 文件来强制 WWW 子域：

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} !^(127\.0\.0\.0|localhost) [NC]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}$1 [L,R=301] 
```

如果您将仅通过 IP 访问您的 Web 服务器，您可能还想在第二行的列表中添加您的 IP。如需更多解释，还请阅读[此线程](https://stackoverflow.com/questions/1823038/mod-rewrite-too-many-redirects-problem)中的答案；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-18T14:15:15.160

RewriteEngine on rewritecond %{http_host} ^websitename.com [nc] rewriterule ^(.*)$ [http://www.websitename.com/](http://www.websitename.com/) $1 [r=301,nc]

代替

RewriteEngine On RewriteCond %{HTTPS} on RewriteRule (.*) [https://%](https://%) {HTTP_HOST}%{REQUEST_URI}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-19T08:29:00.867

我有同样的问题。问题不在于规则。规则是正确的，但 .htaccess 中规则的顺序不正确。这是我以前的。注意我正在重写非www。

```
 #https
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  #remove home
  RewriteCond %{THE_REQUEST} ^.*/home
  RewriteRule ^(.*)home$ https://example.com/$1 [R=301,L] 

 # !IMPORTANT! Set your RewriteBase here and don't forget trailing and leading
 #  slashes.
 # If your page resides at
 #  http://www.example.com/mypage/test1
 # then use
 # RewriteBase /mypage/test1/
 #RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php?/$1 [L]

 #301 redirect
 RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
 RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

我改为

```
 #301 redirect
 RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
 RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]

 #https
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  #remove home
  RewriteCond %{THE_REQUEST} ^.*/home
  RewriteRule ^(.*)home$ https://example.com/$1 [R=301,L] 

 # !IMPORTANT! Set your RewriteBase here and don't forget trailing and leading
 #  slashes.
 # If your page resides at
 #  http://www.example.com/mypage/test1
 # then use
 # RewriteBase /mypage/test1/
 #RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# java - Java，使用 Scanner 将 TXT 文件的字符添加到多维数组中

> ID：14533642
> 
> 赞同：0
> 
> 时间：2013-01-26T03:44:41.970
> 
> 标签：java, arrays, file, multidimensional-array

我真的需要你的帮助。我想将 TXT 文件的字符放入多维数组，但我的 Java 代码并不能真正工作。我必须使用 Scanner.util 读取文件。这是我的代码

```
import java.io.*;
import java.util.Scanner;

public class Test {
public static void main(String args[]) {
try {

        FileInputStream file = new FileInputStream("a.txt");
        Scanner s = new Scanner(file);
        char arr[][];

        while (s.hasNextLine()) {
             String line = s.nextLine();
            for (int i=1 ;i<=line.length(); i++){
                for (int k=1 ;k<=line.length(); k++){
                arr[k][i] = line.charAt(i);          //the local variable arr may not have been initialized

                }
            }
            for (int i=0 ;i<=line.length(); i++){
                int k=0;
                System.out.println (arr[i][k]);      //the local variable arr may not have been initialized
                k ++;
            }
        }

        file.close();
    } catch (IOException e) {
        System.out.println("Fehler");
    }
}
} 
```

你能帮我更正我的代码吗？这将是非常好的:)

* * *

编辑：

好的。这就是它现在的样子：

```
public class Test {
public static void main(String args[]) {
try {

    FileInputStream file = new FileInputStream("a.txt");
    Scanner s = new Scanner(file);
    char arr[][] = new char[15][9]; //changed

    while (s.hasNextLine()) {
         String line = s.nextLine();
        for (int i=0 ;i<=line.length(); i++){ //changed
            for (int k=0 ;k<=line.length(); k++){ //changed
            arr[k][i] = line.charAt(i);

            }
        }
        for (int i=0 ;i<=line.length(); i++){
            int k=0;
            System.out.println (arr[i][k]);
            k ++;
        }
    }

    file.close();
} catch (IOException e) {
    System.out.println("Fehler");
}
}
} 
```

这是我想读入的 TXT 文件：

```
---------------
|S    |  |    |
| --- | ----  |
|  |  |     | |
|  |  |---- |Z|
|   | |     | |
| |   |  |  | |
| | |    |    |
--------------- 
```

但是如果我启动程序，我会得到这个错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 15
at maze.Test.main(Test.java:21) 
```

你有什么想法，我做错了什么？-.-

* * *

好的。这就是它现在的样子：

```
public class Test {
public static void main(String args[]) {
try {

    FileInputStream file = new FileInputStream("a.txt");
    Scanner s = new Scanner(file);
    char arr[][] = new char[15][9]; //changed

    while (s.hasNextLine()) {
         String line = s.nextLine();
        for (int i=0 ;i<=line.length(); i++){ //changed
            for (int k=0 ;k<=line.length(); k++){ //changed
            arr[k][i] = line.charAt(i);

            }
        }
        for (int i=0 ;i<=line.length(); i++){
            int k=0;
            System.out.println (arr[i][k]);
            k ++;
        }
    }

    file.close();
} catch (IOException e) {
    System.out.println("Fehler");
}
}
} 
```

这是我想读入的 TXT 文件：

```
---------------
|S    |  |    |
| --- | ----  |
|  |  |     | |
|  |  |---- |Z|
|   | |     | |
| |   |  |  | |
| | |    |    |
--------------- 
```

但是如果我启动程序，我会得到这个错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 15
at maze.Test.main(Test.java:21) 
```

你有什么想法，我做错了什么？-.-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:58:24.740

您需要初始化数组，例如，

```
 char arr[][] = new char[100][100]; 
```

同样在第一个循环中，变量 i 和 k 应以 0 开头。加上删除 <= 并更改为小于

# jquery - 查询。使用 .each() 动态更改图像以等待完全加载以删除加载程序

> ID：14533649
> 
> 赞同：0
> 
> 时间：2013-01-26T03:46:07.647
> 
> 标签：jquery, image, load, each, loader

请帮忙。我正在谷歌搜索我的问题的答案，但找不到任何解决方案。

我正在使用 $.post() 从 PHP 文件中获取图像名称

我的页面上有图像缩略图，但没有任何 src。从文件中读取名称后，它将这些 src'es 更改为它得到的那些。

我想让它们都以隐藏模式加载并带有加载器，然后删除加载器并淡入我的图像。

加载程序启动，然后隐藏，但图像仍在继续加载。我做错了什么？

非常感谢。

这是我的代码的一部分：HTML：

```
<div id="window">
            <div id="wrapper">
                <div class="container" style="left:10px; top:10px;"><img class="image" /></div>
                <div class="container" style="left:120px; top:10px;"><img class="image" /></div>
                <div class="container" style="left:230px; top:10px;"><img class="image" /></div>
                <div class="container" style="left:340px; top:10px;"><img class="image" /></div>
                <div class="container" style="left:450px; top:10px;"><img class="image" /></div>

                <div class="container" style="left:10px; top:120px;"><img class="image" /></div>
                <div class="container" style="left:120px; top:120px;"><img class="image" /></div>
                <div class="container" style="left:230px; top:120px;"><img class="image" /></div>
                <div class="container" style="left:340px; top:120px;"><img class="image" /></div>
                <div class="container" style="left:450px; top:120px;"><img class="image" /></div>

                <div class="container" style="left:10px; top:230px;"><img class="image" /></div>
                <div class="container" style="left:120px; top:230px;"><img class="image" /></div>
                <div class="container" style="left:230px; top:230px;"><img class="image" /></div>
                <div class="container" style="left:340px; top:230px;"><img class="image" /></div>
                <div class="container" style="left:450px; top:230px;"><img class="image" /></div>
            </div>

        </div> 
```

JS：

```
$('#wrapper').append('<div class="loading"></div>');
$.post('dirscan.php', {'dir':dir},
    function(data){

        imagNames = data;
        ImgCount = imagNames.length;
        totalPages = parseInt(ImgCount / 15) - 1;
        if ((totalPages % 15) != 0) { totalPages++ };

        $('img.image').each(function(i){
            if (imagNames[(pageN*15)+i]) {
                $(this).attr('src', imagNames[(pageN*15)+i])
            }
            else { $(this).addClass('close') }
        })

        $('img.image').load(function(){
            $('.loading').fadeOut(500);
            $('img.image').fadeIn(700);
            $('.loading').remove();})

},'json'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:58:44.497

找到方法了！

```
$('img.image').each(function(i){
if (imagNames[(pageN*15)+i]) {
$(this).attr('src', imagNames[(pageN*15)+i])
    $(this).load(function(){
$('.loading').fadeOut(500);
$(this).fadeIn(700); //here is the key
$('.loading').remove();}) 
```

希望对任何人都有帮助。

# javascript - 在 Rails 应用程序中使用 jQuery 插件

> ID：14533651
> 
> 赞同：0
> 
> 时间：2013-01-26T03:46:31.160
> 
> 标签：javascript, jquery, ruby-on-rails

我目前正在尝试为 Rails 应用程序中的登录设置一个非常基本的灯箱效果。我正在使用插件 Lightbox Evolution。用法如下：

*   确保它是有效的 DOCTYPE。
*   在要使用灯箱的页面头部包含 jQuery 库灯箱 CSS 和灯箱 js 文件
*   初始化插件：

    `<script type="text/javascript" jQuery(document).ready(function($){ $('.lightbox').lightbox(); }); </script>`

jquery.lightbox.min.js 和 jquery.lightbox.css 分别位于 vendor/assets/javascripts 和 vendor/assets/stylesheets 目录中。

我已经在 application.html.erb 文件中包含了灯箱脚本，因为我计划在网站的其他地方使用灯箱效果。

我的 application.html.erb 文件如下所示：

```
<!DOCTYPE html>
<html>
<head>
   <title>Test App</title>
   <%= stylesheet_link_tag    "application", :media => "all" %>
   <%= stylesheet_link_tag    "jquery.lightbox.css", :media => "all" %>   
   <%= javascript_include_tag "application" %>
   <%= javascript_include_tag "jquery.lightbox.min" %>   
   <%= csrf_meta_tags %>
</head>
<body>
   <p class="notice"><%= notice %></p>
   <p class="alert"><%= alert %></p>
   <%= yield %>

   <script type="text/javascript">
 jQuery(document).ready(function($){
    $('.lightbox').lightbox();
  });
   </script>

</body>
</html> 
```

我的登陆页面是 app/views/welcome/index.html.erb：

```
<h1>Landing Page</h1>
<a href="users/sign_in" class="lightbox">Login</a> 
```

我按照说明使用“灯箱”类。

当我去localhost:3000时，在开发环境中构建的html如下：

```
<!DOCTYPE html>
<html>
<head>
   <title>MetaLinx Material Management</title>
   <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/containers.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scales.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/welcome.css?body=1" media="all" rel="stylesheet" type="text/css" />
   <link href="/assets/jquery.lightbox.css?body=1" media="all" rel="stylesheet" type="text/css" />   
   <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/containers.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.effect.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.core.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.widget.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.mouse.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.sortable.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.position.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.menu.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.autocomplete.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.datepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/jquery.ui.timepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.datetimepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/jquery.colorpicker.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.filter-box.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.filtering-multiselect.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.filtering-select.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.remote-form.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/jquery.pjax.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_nested_form.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.nested-form-hooks.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ra.widgets.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/ui.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/custom/ui.js?body=1" type="text/javascript"></script>
<script src="/assets/rails_admin/rails_admin.js?body=1" type="text/javascript"></script>
<script src="/assets/scales.js?body=1" type="text/javascript"></script>
<script src="/assets/welcome.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery.lightbox.min.js?body=1" type="text/javascript"></script>   
    <meta content="authenticity_token" name="csrf-param" />
 <meta content="NGWSCp8qKAwi52ViQNfSP+2WG4teWxwOzCDCFfqQaLc=" name="csrf-token" />
 </head>
 <body>
   <p class="notice"></p>
   <p class="alert"></p>
   <h1>Landing Page</h1>
 <p>Find me in app/views/welcome/index.html.erb</p>

<a href="users/sign_in" class="lightbox">Login</a>

    <script type="text/javascript">
      jQuery(document).ready(function($){
      $('.lightbox').lightbox();
    });
    </script>
</body> 
```

我正在使用设计进行身份验证，因此它为用户/登录设置了路由。当我单击上面的链接时，它会将我带到用户/新页面，但它不会在灯箱中弹出。生成的 html 如下所示：

应用程序/视图/会话/new.html.erb：

```
<h2>Sign in</h2>

    <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email, :autofocus => true %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

所以问题是我做错了什么，所以当我单击 app/views/welcome/new.html.erb 中的“登录”链接时，它会将我带到登录页面，而不是使用灯箱 jQuery 弹出它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:27:56.050

尝试更改`href="users/sign_in"`为`href="#"`. 因为如果您只想单击它并让灯箱弹出登录表单，链接真的无关紧要。

# javascript - Javascript 函数 - 可能有什么问题？

> ID：14533658
> 
> 赞同：1
> 
> 时间：2013-01-26T03:48:06.683
> 
> 标签：javascript, function, variables, compiler-construction

我对可编译语言有一些经验，但我是 Javascript 的新手，它真的让我很困惑。所以可能我通常做错了什么，但我不知道它是什么。

代码示例（不工作）：

```
function show_element(element_name){
    document.getElementsByName(element_name)[0].style.display="";
}
function hide_element(element_name){
    document.getElementsByName(element_name)[0].style.display="none";
}
function switch_display(element_to_hide, element_to_show){
    hide_element(element_to_hide);
    show_element(element_to_show);          
} 
```

HTML 代码如下所示：

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switch_display("content_navigator_1","content_navigator_2")"> 
```

在 Firefox 中进行调试会在 onMouseOver 时给我错误消息：

```
syntax error: switch_display ( 
```

谢谢你帮助我！

（次要问题：你是否也遇到过 Javascript 的问题？它真的是一种逻辑语言，还是只是一种试错语言？为了好，在某个地方有 JS 编译器吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:54:17.813

尝试在你的论点周围使用单引号。双引号终止属性值。

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switch_display('content_navigator_1','content_navigator_2')"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:54:24.563

随手一试

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switch_display('content_navigator_1','content_navigator_2')"> 
```

或正确转义内部引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T03:54:34.033

您的具体错误在这里（您还有其他问题，请参阅我的答案底部）

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switch_display("content_navigator_1","content_navigator_2")"> 
```

切换到

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switch_display('content_navigator_1','content_navigator_2')"> 
```

如果我需要解释原因，请告诉我。

除了错误的原因之外，还有一个问题是您尝试按名称调用 HTML 元素，最好通过 id 来调用，然后使用：

```
document.getElementById(element_id).style.display=""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T03:57:54.747

`.getElementByName()`返回元素列表，因此您需要使用索引：

```
document.getElementByName(element_name)[0].style.display = "none"; 
```

但是，正如其他人建议的那样，您应该使用`getElementById()`

# linux - 参数通配符扩展

> ID：14533659
> 
> 赞同：0
> 
> 时间：2013-01-26T03:48:15.493
> 
> 标签：linux

我有一个带有文件参数的脚本（我们称之为脚本）。我希望脚本用户能够在此参数中使用通配符。

我必须使用什么来使参数变量恢复为完整路径？

例如脚本 ~/*gz

所以在 bash 里面做 x 把变量 $1 (~/*gz) 变成 /home/name/file.tar.gz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:00:37.843

试试`readlink -f`。但是外壳应该扩展参数，除非通配符被转义。另外，它必须是bash吗？为什么不为此目的使用像 perl 这样的脚本语言呢？

# jquery - 使用 z-index 在所有内容之上创建一个 div 不起作用？

> ID：14533664
> 
> 赞同：2
> 
> 时间：2013-01-26T03:49:03.963
> 
> 标签：jquery, css, wordpress, google-maps, z-index

我正在使用 wordpress 插件*Basic Google Maps Placemarks*来显示地图，但我必须把它放在一个非常窄的地方 (width=300px) 。现在我想破解那个插件，希望弹出窗口的溢出是可见的。首先，我正在使用 Google Chrome 的检查元素工具进行测试。但无论我如何更改该 div 的 z-index，它始终是隐藏的。

截图如下：

![在此处输入图像描述](../Images/3871165f58366faf08f8292e1552feb4.png)

这是我正在开发的网站：[http ://starrystory.org/](http://starrystory.org/)

我错过了什么？我怎么能把那个 div 放在其他所有东西之上呢？

PS如果它不能只用CSS来完成，有没有人有jQuery解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:16:19.490

由于父元素具有`overflow: hidden`画布的尺寸，因此内部元素不会显示在其边界之外。

您必须将弹出元素移到溢出隐藏容器之外。在这种情况下，这将是棘手的。

# c# - c# 多变量数组

> ID：14533667
> 
> 赞同：1
> 
> 时间：2013-01-26T03:49:32.810
> 
> 标签：c#, arrays, multidimensional-array, matrix

c# 中有没有办法拥有一个包含多个变量的数组？

例如，我有一个股票的数据：

## 日期 |开盘 |最高 |最低 |收盘

10-01-2012| 10.00| 11.01| 9.56| 10.56

10-02-2012| 10.56| 10.99| 9.21| 9.99

10-03-2012| 9.99 | 10.12| 9.78| 10.11

* * *

我想做的是创建一个数组，它接受一个 DateTime 和一个字符串变量，并输出一个双精度/字符串。

所以，如果我想获得 2012 年 10 月 1 日股票的开盘价，我可以说

DateTime 天 = Convert.ToDateTime("10-01-2012"); double openPrice = MyArray[Day,"Open"];

它会以双精度或字符串形式返回 10.00。

做这个的最好方式是什么？这甚至可以使用数组吗？如果没有，我还可以使用哪些其他方法？我一直在考虑这个问题，但我不确定构造这个数组/对象的最佳方法

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T03:58:07.130

可能更好地创建一个类来包含您的数据，并创建一个数组或列表；

```
class DailyPrice
{
    DateTime Date { get; set; }
    decimal Open { get; set; }
    decimal Close { get; set; }
    decimal High { get; set; }
    decimal Low { get; set; }
}

static class Program
{
    static void Main()
    {
        List<DailyPrice> prices = new List<DailyPrice>();
        prices.Add(new DailyPrice() { Date = DateTime.Today, Open = 11.11M, Close=... });
        prices.Add(new DailyPrice() { Date = DateTime.Today, Open = 12.14M, High=... });
        ...
    }
} 
```

顺便说一句，由于`double`在 C# 中使用类型执行算术时的精度问题，用户`decimal`使用货币值更安全（我假设这是你在这里所拥有的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T04:04:59.693

您可以在字典中使用字典，如下所示：

```
var stocks = new Dictionary<DateTime, Dictionary<String, Double>> 
```

然后，访问价格：

```
Double price = stocks[Day]["Open"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:55:11.390

据我所知，你不能用数组来做到这一点，但你可以用 Dictionnary<> 来实现：

`Dictionnary<DateTime, double[]>`

这样，您就可以按天“索引”您的值，然后在双数组的位置 0 上，您将获得“打开”值

要获得您需要的“10.00”值，您必须这样做：

`openvalue = mydic[Day][0];`

# android - Android：应用程序无法在带有 Jellybean 的 Nexus 10 上运行 - 在旧设备上运行良好

> ID：14533668
> 
> 赞同：0
> 
> 时间：2013-01-26T03:49:46.980
> 
> 标签：android, api, backwards-compatibility, android-4.2-jelly-bean

我的应用程序针对 2.2 版，似乎在我测试过的 3 台设备上运行良好（2.2 版和 2.3 版）

但是，我只是在 Google Nexus 10 平板电脑上运行它，并且启动画面工作正常，并采用触摸输入来启动下一个活动（基于 SurfaceView 使用多线程的菜单系统），虽然它显示/动画正常，但没有按钮正在工作 - 我不确定从哪里开始，假设为旧 Android API 编写的应用程序与新版本的操作系统不兼容，我错了吗？新版本肯定向后兼容吗？

谢谢大家！！

编辑：如果我反复点击开始按钮，Logcat 会显示：

![在此处输入图像描述](../Images/f70eba37f3af7305f1add86e5a9ba717.png)

所以不知道为什么在 JB 上这样做，但在运行旧操作系统的设备上可以 - 谢谢大家。

编辑2：

“按钮”释放代码（在“按钮”按下后）：

```
if (event.getAction()==MotionEvent.ACTION_UP){      

Intent StartNewGame = new Intent((Activity) getContext(), StartGame.class);     

    getContext().startActivity(StartGame);  

// Oddly, if I put a System.exit(0); here, game activity starts and everything is fine - obviously this is only for testing and needs to be removed.

return true;}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:16:44.490

```
public int nextInt(int n) {
    if (n > 0) {
        if ((n & -n) == n) {
            return (int) ((n * (long) next(31)) >> 31);
        }
        int bits, val;
        do {
            bits = next(31);
            val = bits % n;
        } while (bits - val + (n - 1) < 0);
        return val;
    }
    throw new IllegalArgumentException();
} 
```

那是 4.1 的源代码，所以看起来你是如何将 0 传递给函数的，有什么办法可以在你的代码中发生这种情况吗？

# javascript - 在方法之间传递jQuery元素数据？

> ID：14533670
> 
> 赞同：2
> 
> 时间：2013-01-26T03:50:08.247
> 
> 标签：javascript, jquery, methods

我正在尝试创建我的第一个 jQuery 插件，阅读[jQuery 插件创作](http://docs.jquery.com/Plugins/Authoring)，它真正强调的一件事是使用方法而不是命名空间。我还尝试使用该指南中的数据在方法之间反弹变量，但它不起作用。我需要创建一些数据，将其传递给另一个方法来更新它并将其发送到其他地方。

```
(function($) {

    var methods = {
        init : function(settings) {

            return this.each(function(){

                var x = 3; 
                var object = $(this);

                // Bind variables to object
                $.data(object, 'x', x);

                $(object).bbslider('infoParse');

                var y = $.data(object,'y');
                alert(y);

            }); // End object loop

        }, // End init
        infoParse : function() { 
            var object = $(this);
            var x = $.data(object,'x');

            alert(x);

            var y = 10;
            $.data(object,'y',y);
        }, // End infoParse
    }; // End method

    $.fn.bbslider = function(method) {

        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.bbslider' );
        }       
    }; // End slider

})(jQuery); 
```

这是一个 jsFiddle 来说明我的意思：http: [//jsfiddle.net/wRxsX/3/](http://jsfiddle.net/wRxsX/3/)

如何在方法之间传递变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:09:05.740

看看这个[http://jsfiddle.net/wRxsX/6/](http://jsfiddle.net/wRxsX/6/)是否可以？

element.data(k,v)

$.data 应该在元素上使用

[http://api.jquery.com/data/](http://api.jquery.com/data/)

`Store arbitrary data associated with the matched elements or return the value at the named data store for the first element in the set of matched elements.`

# ruby-on-rails - Heroku bundler 不删除旧的 gems 版本

> ID：14533676
> 
> 赞同：10
> 
> 时间：2013-01-26T03:51:37.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我刚刚更新了几个 gem，但是当我推送到 heroku 时，旧的仍然被复制到供应商/捆绑程序中，我有一条消息

```
Using bson (1.8.2)
[...]
Would have removed bson (1.5.2) 
```

事实上，在供应商/捆绑器中，旧的宝石仍然被复制。

但是，如果我创建一个新的 cedar 应用程序并从头开始推送到 Heroku，则旧的 gem 不会复制到 vendor/bundle 中，并且它可以按预期工作。

旧的 gem 版本既不在 Gemfile 也不在 Gemfile.lock 中，所以我不明白 heroku bundler 从哪里得到这个（过时的）信息。

有什么提示吗？谢谢，马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:48:52.357

这是 Heroku 部署配置中的一个错误。它写入一个文件 .bundle/config ，其中有一行：

```
BUNDLE_DRY_RUN: false 
```

当 bundler 加载此全局配置文件时，它会将其转换为`:dry_run => "false"`当它检查此设置时，它正在检查 settings[:dry_run]，它是一个字符串，其计算结果为 true。

感谢@Roman 在类似线程中的回答

我的解决方案是（因为我有一个自定义 buildpack）来修补它

[https://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb](https://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb)

第 408-409 行从

```
 puts "Cleaning up the bundler cache."
    pipe "bundle clean" 
```

到

```
 puts "Cleaning up the bundler cache."
    pipe "bundle config --delete dry_run"
    pipe "bundle clean" 
```

bundle config --delete 删除配置（注意下划线），默认`dry-run`为 false。结果

```
 Removing bson_ext (1.8.2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:27:01.047

在您的开发实例上，您可以尝试。

```
bundle update 
```

[在此处](http://gembundler.com/man/bundle-update.1.html)查看详细信息

然后将更改提交到 Git，然后将您的应用程序推送到 Heroku。

如果问题仅出在单个 GEM 上，那么您可以尝试在 Gemfile 中强制使用版本号。

```
gem 'bson', '1.8.2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:24:23.927

“Would have removed...”消息可能来自 Bundler 意外发布的调试消息。它们可以安全地被忽略，并且不应该出现在下一个版本中，如果尚未修复的话。

# javascript - 如何使用 favicon 创建拖放链接

> ID：14533677
> 
> 赞同：0
> 
> 时间：2013-01-26T03:52:07.333
> 
> 标签：javascript, html, bookmarks, favicon, favorites

我们正在开发一个可以添加到大多数网络浏览器的书签菜单的链接，我们已经成功地创建了一个链接，它甚至可以执行一些 javascript 以将代码插入到当时正在显示的网站中（如 pinterest）。

是否可以向此链接添加代码，以便它可以创建对 favicon 的引用以便显示在书签栏上？想法是将此链接拖到书签栏并显示站点名称 + favicon。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:58:03.950

如果书签是网站的链接，那么浏览器在访问 URL 后应该会显示一个网站图标（假设该网站已正确设置了网站图标）。

如果书签实际上是在从任何页面单击时运行的 JavaScript 小书签，那么不，我不相信在这种情况下可以显示网站图标。

# jquery - jQuery/AJAX – 启动和取消启动

> ID：14533678
> 
> 赞同：0
> 
> 时间：2013-01-26T03:52:32.290
> 
> 标签：jquery, html, ajax

我希望能够为任何给定的对话加注星标/取消加注星标（例如 Gmail。）当我单击“空”星标将某些内容标记为重要时，我需要提交一些 ajax，然后切换到星标图像。反之亦然，当我单击加星标的对话时，我需要 ajax 提交并在其成功后，然后将“空”星切换回来。

一些 HTML（简而言之）：

```
 <div class='__conversation'>
      <div class='__conversation_star'>
         <img class='__star_n' src='p_star_n.png'/>
         <img class='__star_y' src='p_star_y.png'/>
      </div>
 </div> 
```

和基本功能类似的东西：

```
 $(".__conversation_star").click(function() {
         $(this).find('img').toggle();
    }); 
```

一些阿贾克斯：

```
 $(".__conversation_star").click(function() {
    jQuery.ajax({
        type: 'POST',
        url: "./process.conversation.php,
        data: {method: 'star'},
        cache: true,
        success: function() {
            // Toggle to un-starred .__star_n
        }
    });
 });

 $(".__conversation_star").click(function() {
    jQuery.ajax({
        type: 'POST',
        url: "./process.conversation.php",
        data: {method: 'star'},
        cache: true,
        success: function() {
            // Toggle to starred .__star_n
        }
    });
 }); 
```

有没有办法在ajax成功后执行切换？和/或有什么其他方法可以更好地工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:29:39.363

与其切换显示哪个图像，不如切换 CSS 类可能更容易。因此，如果您的 HTML 是这样设置的：

```
<div class="conversation">
    <span class="star"></span>
    <span>blah blah blah blah</span>
</div> 
```

然后你有以下CSS：

```
.conversation{
    padding:3px 5px;
    border: 1px solid #CCC;
    margin-top:3px;
}

.star{
    background-color: hsl(200, 90%, 90%);
    border:1px solid #333;
    display:inline-block;
    height:20px;
    width:20px;
}

.star.state-selected{
    background-color: hsl(60, 70%, 60%);
} 
```

现在你所要做的就是切换`state-selected`每个类`<span class='star'>`

这是一些示例 JavaScript

```
$(".star").click(function() {
    var $thisStar = $(this);

    $.ajax({
        type: 'POST',
        url: "./process.conversation.php",
        data: {method: 'star'},
        cache: true,
        success: function() {
            $thisStar.toggleClass("state-selected");
        }

    });

}); 
```

* * *

# 演示：http: [//jsfiddle.net/fbvg9/](http://jsfiddle.net/fbvg9/)

# android - 使用 Slim Rest 服务器和 android 客户端进行用户注册

> ID：14533682
> 
> 赞同：1
> 
> 时间：2013-01-26T03:53:42.840
> 
> 标签：android, http, android-asynctask, slim, jsonexception

我正在开发一个简单的应用程序，我可以在其中注册新用户。- 我在 apache 本地主机上使用带有 MySQL 的 SLIM PHP 框架 - 我有一个带有名为 tbl_user 的表的 MySQL 数据库。我已经使用 CURL 测试了我的 SLIM 实现——在客户端，我有三个名为 fname、电子邮件和密码的 EditView 字段以及一个注册按钮——它很简单，当用户单击注册按钮时，应该建立数据库连接并且新用户应该被添加到数据库中。注册很简单，无需任何检查。我将在解决此问题后实施。

请帮忙。我进行了很多搜索，但无法解决错误。

我收到以下错误：

错误

这是我现在的实际错误
01-27 08:42:14.981: D/URL read(6739): Slim Application Errorbody{margin:0;padding:30px;font:12px/1.5 Helvetica,Arial,Verdana,sans-serif; }h1{margin:0;font-size:48px;font-weight:normal;line-height:48px;}strong{display:inline-block;width:65px;}

# Slim 应用程序错误

由于以下错误，应用程序无法运行：

## 细节：

**消息：** error_log(/var/tmp/php.log) [function.error-log]：未能打开流：没有这样的文件或目录
**文件：** C:\xampp\htdocs\api\index.php
**行：** 105

## 堆栈跟踪：

#0 [内部函数]：Slim::handleErrors(2, 'error_log(/var/...', 'C:\xampp\htdocs...', 105, Array)
01-27 08:42:14.981: D/URL 读取 (6739): #1 C:\xampp\htdocs\api\index.php(105): error_log('SQLSTATE[23000]...', 3, '/var/tmp/php.lo. ..')
01-27 08:42:14.981: D/URL 读取 (6739): #2 [内部函数]: register()
01-27 08:42:14.981: D/URL 读取(6739): #3 C:\xampp\htdocs\api\Slim\Route.php(392): call_user_func_array('register', Array)
01-27 08:42:14.981: D/URL read(6739): #4 C:\xampp\ htdocs\api\Slim\Slim.php(1052): Slim_Route->dispatch()
01-27 08:42:14.981: D/URL 读取(6739): #5 C:\xampp\htdocs\api\index.php （26）：苗条->运行（）
01-27 08：42：14.981：D/URL 读取（6739）：#6 {main}

RegisterActivity.java（部分）

```
 class CreateNewUser extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(RegisterActivity.this);
        pDialog.setMessage("Signing Up..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);

        pDialog.show();
    }

    /**
     * Creating User
     * */
    protected String doInBackground(String... args) {
        String fname = mUsername.getText().toString();
        String email = mEmail.getText().toString();
        String password = mPassword.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));
        params.add(new BasicNameValuePair("fname", fname));

        // getting JSON Object
        // Note that create user url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat from response
        //Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created USER
                Intent i = new Intent(getApplicationContext(), UserHome.class);
                startActivity(i);

                // closing this screen
               // finish();
            } else {
                // failed to create USER
                 // Log.d("No Sign Up.", json.toString());
            }
        } catch(JSONException e){
           // Log.e("log_tag", "Error parsing data "+e.toString());
           // Log.e("log_tag", "Failed data was:\n" + TAG_SUCCESS);
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

} 
```

jsonParser.java（部分）

```
 public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

苗条：index.php

```
<?php

session_start(); 
require 'Slim/Slim.php';

$app = new Slim();

$app->post('/login', 'login');

$app->post('/register', 'register');

$app->response()->header('Content-Type', 'application/json');

$app->get('/users', 'getUsers');
$app->get('/users/:id', 'getUser');
$app->get('/users/search/:query', 'findByName');
$app->post('/users', 'addUser');
$app->put('/users/:id', 'updateUser');
$app->delete('/users/:id',  'deleteUser');

$app->get('/gametype', 'getgameType');

$app->run();

// AUTHENTICATION START

function login() {
    $request = Slim::getInstance()->request();
    $user = json_decode($request->getBody());
    $email= $user->email;
    $password= $user->password;
    // echo $email;
//   echo $password;
if(!empty($email)&&!empty($password))
    {
        $sql="SELECT email, fname, role FROM tbl_user WHERE email='$email' and password='$password'";
        $db = getConnection();

    try {
        $result=$db->query($sql); 

                if (!$result) { // add this check.
                      die('Invalid query: ' . mysql_error());
                }
        $row["user"]= $result->fetchAll(PDO::FETCH_OBJ);
        $db=null;
        echo json_encode($row);

    } catch(PDOException $e) {
        error_log($e->getMessage(), 3, '/var/tmp/php.log');
        echo '{"error":{"text":'. $e->getMessage() .'}}'; 
    }

    }

} 

// AUTHENTICATION END

//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

// Register START

function register() {

    $request = Slim::getInstance()->request();
    $user = json_decode($request->getBody());
    $sql = "INSERT INTO tbl_user (email, password, fname) VALUES (:email, :password, :fname)";
    try {
        $db = getConnection();
        $stmt = $db->prepare($sql);  
        $stmt->bindParam("fname", $user->fname);
        $stmt->bindParam("password", $user->password);
        $stmt->bindParam("email", $user->email);
        $stmt->execute();
        $user->id = $db->lastInsertId();
        $db = null;

        print('{"success":1}');

    } catch(PDOException $e) {
        error_log($e->getMessage(), 3, '/var/tmp/php.log');
        echo '{"error":{"text":'. $e->getMessage() .'}}'; 
    }
}

    // Register END 
```

APP行为：点击注册按钮后...应用程序卡在此处并崩溃为“不幸的是，您的应用程序已停止。”..

![应用屏幕](../Images/bba3ef3237d60102c57cdcc9958faf14.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:14:10.660

当第一次创建 Slim 响应对象时，[它设置了](https://github.com/codeguy/Slim/blob/master/Slim/Http/Response.php#L135)“text/html”的内容类型。

也许在您的 register() 方法中，您应该执行以下操作：

```
function register()
{
    $request = Slim::getInstance()->request();
    $response = Slim::getInstance()->response();
    $response['Content-Type'] = 'application/json; charset=utf-8';

    /* rest of your function here*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T00:18:05.843

你的错误是你没有这个文件来写错误 error_log(/var/tmp/php.log) [function.error-log]: failed to open stream: No such file or directory create using *touch /var/tmp/php .log*或通过 ftp

# javascript - 检索.val（）时jQuery取消选择输入字段？

> ID：14533691
> 
> 赞同：2
> 
> 时间：2013-01-26T03:54:30.823
> 
> 标签：javascript, jquery

我有一个带有输入字段（存储每个对象的价格）的表单，这些字段具有不同的按键、模糊和按键事件。当用户浏览字段时，我的 JS 循环遍历每个输入字段以检查它是否已从其先前的值更改（并基于该值执行计算）。（我尝试使用 .change 和 .keypress 事件来代替 - 不幸的是，它们被定时触发 AFTER keyup，它需要在之前）。

我存储每个输入的初始值的全局变量数组，并对照它检查当前值。但是由于某种原因，当我遍历每个输入并检查其 .val() 时，效果是用户当前选择的输入被取消选择。.attr("value") 也是如此。我已经进行了充分的调试，知道这个特定的调用是问题所在——例如，替换一个随机数而不是调用 .val() 会导致它完美地工作。任何想法为什么会这样？！我无计可施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:30:10.187

为了清楚起见，并且不想让这个问题看起来没有答案，我也在此处重复评论部分接受的答案：

> onkeydown事件相关的事件顺序：***onkeydown*** -> ***onkeypress*** -> ***onkeyup***

答案取自[w3schools.com](http://www.w3schools.com/jsref/event_onkeydown.asp)。使用*onkeydown*事件似乎解决了 OP 的困境：

> （我尝试使用 .change 和 .keypress 事件来代替 - 不幸的是，它们被定时触发 AFTER keyup，它需要在之前）

;)

# c# - 如何使用 BackGroundWorker 对依赖于用户输入停止的方法进行连续执行？

> ID：14533694
> 
> 赞同：1
> 
> 时间：2013-01-26T03:54:42.010
> 
> 标签：c#

> **可能重复：**
> [如何使用按钮启动和停止连续运行的后台工作程序](https://stackoverflow.com/questions/3065700/how-to-start-and-stop-a-continuously-running-background-worker-using-a-button)

我有 2 个按钮，第一个按钮名为“Continuous”.. 第二个按钮“Stop”

我想在按下连续按钮时调用一个方法：

```
private void continuous_Click(object sender ,EvantArgs e) 

      {   

     // continuous taking pictures ...

      } 
```

我的问题是：如何通过按停止按钮来停止执行？

我已经写了一个拍照的代码，我已经成功拍照了......现在我想让相机连续拍摄......但是如果我按下停止按钮，相机应该停止拍照......

我用过BackGroundWorker，但代码不起作用！！！

这是代码：

```
private void ContinousSnaps_Click(object sender, EventArgs e)
    {

        Contiguous.DoWork += Contiguous_DoWork;
        Contiguous.RunWorkerCompleted += Contiguous_RunWorkerCompleted;
        Contiguous.RunWorkerAsync();
    }

    private void Contiguous_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; ; i++) TakeSnapShotCommand();
    }

    private void Contiguous_RunWorkerCompleted(object sender,
                                   RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("complete");
    }

    //------------------------------------------------------------------//

    private void Stop_Click(object sender, EventArgs e)
    {
        Contiguous.CancelAsync();

    }

  //--------------------------------------------------------------------// 
```

我怎样才能达到我想要的结果？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:05:51.287

试试看这是否可行：在您的 _DoWork 事件中：

```
 private void Contiguous_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; ; i++)
        {
            if (Contiguous.CancellationPending)
            {
                e.Cancel = true;
                return;
            }
            TakeSnapShotCommand();
        }
    } 
```

并在 Stop_Click 中执行以下操作：

```
 private void Stop_Click(object sender, EventArgs e)
    {
        if (Contiguous.WorkerSupportsCancellation)
            Contiguous.CancelAsync();
    } 
```

还要确保你允许取消（如果你想在这里接受我的建议 - 在表单加载中移动这些事件注册，所以它们将被执行一次，而不是每次单击按钮时 - 只留下 Continuous.RunWorkerAsync() ):

```
 // your form load <---
    private void Form1_Load(object sender, EventArgs e)
    {
        Contiguous.DoWork += Contiguous_DoWork;
        Contiguous.RunWorkerCompleted += Contiguous_RunWorkerCompleted;
        Contiguous.WorkerSupportsCancellation = true; // allowing cancellation
    }

    private void ContinousSnaps_Click(object sender, EventArgs e)
    {
        // not a bad idea if you disable the button here at this point
        Contiguous.RunWorkerAsync();
    } 
```

# javascript - .append() 不适用于表

> ID：14533695
> 
> 赞同：0
> 
> 时间：2013-01-26T03:54:50.753
> 
> 标签：javascript, jquery, html-table

当用户将鼠标悬停在图像 $("#dot0003") 上时，我想使用 jquery 的附加功能向我的网站添加一个表格。Dreamweaver 已经告诉我存在语法错误，但我不明白在哪里。

```
$(document).ready(function() {

$("#dot0003").hover(
    function(){

        $("#tablespace").append('

        <table  id="table1" class="info0004" border="4">
        <tr>
        <td>roomnumber</td>
        <td>200</td>
        </tr>
        <tr>
        <td>number of bathrooms</td>
        <td>2</td>
        </tr>
        <tr>
        <td>number of beds</td>
        <td><img src="_index/_dots/dot.gif" width="20" height="20"></td>
        </tr>
        </table>')

})
}) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:07:32.667

你确定这是你想要做的吗？这意味着，当您将鼠标悬停在 dot0003 上时，它将继续尝试附加此数据。看这里的[小提琴](http://jsfiddle.net/X8qrF/)。

话虽如此，您的问题在于您的空间。见上面的小提琴。删除您的空格或构建您的字符串，例如：

```
var myContent = '<table  id="table1" class="info0004" border="4">'
myContent += '<tr>'
... 
```

但这会产生无效的 HTML 标记，因为您在表中添加表，如下所示：

```
<table>
    <tr><td></td></tr>
    <table>
    ... 
```

我认为你应该使用 jQuery 的`after`方法而不是`append`.

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:59:25.077

```
Your adding dynamic table syntax has a space so remove space then run 
```

您可以尝试使用简单的动态 div 运行

```
$(document).ready(function() {

    $("#dot0003").hover(
        function(){
            $("#tablespace").append('<div>ss</div>')})}) 
```

但是当你用空格写语法时，它会显示错误

$(文档).ready(函数() {

```
$("#dot0003").hover(
    function(){
        $("#tablespace").append('<div>ss 
```

')})})

删除多余空间后尝试使用此代码

```
$(document).ready(function() {

$("#dot0003").hover(
    function(){

        $("#tablespace").append('<table id="table1" class="info0004" border="4">       <tr><td>roomnumber</td><td>200</td></tr>        <tr><td>number of bathrooms</td>       <td>2</td></tr><tr><td>number of beds</td>        <td><img src="_index/_dots/dot.gif" width="20" height="20"></td></tr></table>')

})
}) 
```

# python - 将任何字符串块替换为 Python 中的单个实例

> ID：14533702
> 
> 赞同：0
> 
> 时间：2013-01-26T03:56:10.347
> 
> 标签：python, string

例如，如果

```
s = "111111111111234"
or
s = "1111234"
or
s = "jsdfjkdsnfkjds111jknsdjkfsd"
or
s = "111as1as11" 
```

我想将任何连续的 1 块减少为单个 1。

```
1234
1234
jsdfjkdsnfkjds1jknsdjkfsd
1as1as1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:59:13.337

您可以使用`re.sub`

```
import re
s = '111111111111234'
print re.sub('1+', '1', s)
# '1234' 
```

解释：

*   `'1+'`-`+`匹配前一个正则表达式的一个或多个重复（在这种情况下`1`）
*   `'1'`- 告诉`re.sub`用什么替换它。
*   `s`- 要执行`re.sub`on 的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:01:29.613

```
import re
re.sub('(.)\\1+', "\\1", "1111122233334444")
#=> "1234" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T03:58:00.740

使用`itertools.groupby()`：

```
In [162]: from itertools import groupby

In [163]: strs="111111111111234"

In [164]: "".join(k if k=='1' else "".join(g) for k,g in groupby(strs))
Out[164]: '1234'

In [170]: strs="1111112222111111234"

In [171]: "".join(k if k=='1' else "".join(g) for k,g in groupby(strs))
Out[171]: '122221234' 
```

或将所有重复的项目减少为单个项目：

```
In [175]: strs="1111112222111111234"

In [176]: "".join(k for k,g in groupby(strs))
Out[176]: '121234' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T04:00:11.013

您可以使用`set`删除重复项，然后`join`得到结果列表：

```
>>> ''.join(set('11111234'))
'1324' 
```

# html - 如何使用 VIM 在 CoffeeScript 中嵌入 HTML 字符串语法？

> ID：14533703
> 
> 赞同：0
> 
> 时间：2013-01-26T03:56:12.313
> 
> 标签：html, vim, coffeescript, syntax-highlighting, vim-syntax-highlighting

[我已经从vim 中的 javascript 字符串中](https://stackoverflow.com/questions/1471715/html-syntax-highlighting-in-javascript-strings-in-vim?rq=1)的 HTML 语法高亮显示中查看了如何在 JavaScript 字符串中嵌入 HTML 语法。

但是，当我使用 CoffeeScript 时，我无法通过`coffee.vim`以类似方式编辑语法文件来获得相同的效果。我得到了递归错误，其中包括`html.vim`使它过于嵌套。

我在 CoffeeScript 中有一些 HTML 模板，如下所示：

```
angular.module('m', [])
  .directive(
    'myDirective'
    [
      ->
        template: """
        <div>
          <div>This is <b>bold</b> text</div>
          <div><i>This should be italic.</i></div>
        </div>
        """
    ]
  ) 
```

如何在 VIM 中正确突出显示 CoffeeScript 字符串中的模板 HTML 语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:18:12.460

我将按如下方式进行：

找出应该作为纯 html 突出显示的语法组。向这些组添加 html 语法突出显示。

要查找光标下的有效语法组，您可以按照[此处](http://vim.wikia.com/wiki/Identify_the_syntax_highlighting_group_used_at_the_cursor)的说明进行操作。

在您的示例中，感兴趣的语法组是`coffeeHereDoc`.

要向该组添加 html 突出显示，请执行以下命令

```
unlet b:current_syntax
syntax include @HTML syntax/html.vim
syn region HtmlEmbeddedInCoffeeScript start="" end=""
\    contains=@HTML containedin=coffeeHereDoc 
```

由于 vim 抱怨递归，如果你将这些行添加到`coffee.vim`我会使用自动命令：

```
function! Coffee_syntax()
    if !empty(b:current_syntax)
        unlet b:current_syntax
    endif
    syn include @HTML syntax/html.vim
    syn region HtmlEmbeddedInCoffeeScript start="" end="" contains=@HTML
\       containedin=coffeeHereDoc
endfunction

autocmd BufEnter *.coffee call Coffee_syntax() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:57:55.897

在尝试使其正常工作时，我也遇到了各种问题。经过一些实验，这就是我想出的。只需`.vim/after/syntax/coffee.vim`使用以下内容创建：

```
unlet b:current_syntax
syntax include @HTML $VIMRUNTIME/syntax/html.vim
syntax region coffeeHtmlString matchgroup=coffeeHeredoc
\      start=+'''\\(\\_\\s*<\\w\\)\\@=+ end=+\\(\\w>\\_\\s*\\)\\@<='''+ 
\      contains=@HTML
syn sync minlines=300 
```

该`unlet b:current_syntax`行禁用当前语法匹配，并让 HTML 语法定义接管匹配区域。

使用 html.vim 包含的绝对路径可以避免递归问题（下面将详细介绍）。

区域定义匹配看起来像是包含 HTML 的 heredoc 字符串。具体来说，开始模式查找三个单引号，后跟一个看起来像 HTML 标记开头的东西（两者之间可以有空格），而结束模式查找一个 HTML 标记的结尾，后跟三个单引号。看起来不包含 HTML 的 Heredoc 字符串仍然使用该`coffeeHeredoc`模式进行匹配。这是有效的，因为这个语法文件是在咖啡脚本插件的语法定义之后加载的，所以我们有机会在更一般的匹配（`coffeeHeredoc`区域）发生之前进行更具体的匹配（包含 HTML 的 heredoc）。

`syn sync minlines=300`扩大了匹配区域。我嵌入的 HTML 字符串有时会超过 50 行，而且 Vim 的语法高亮器会对如何高亮字符串感到困惑。为了完全保证，您可以使用`syn sync fromstart`，但是对于大文件，理论上这可能很慢（我没有尝试过）。

@heartbreaker 最初遇到的递归问题是由插件附带的 html.vim 脚本引起的`vim-coffeescript`（我假设正在使用该脚本）。该插件的 html.vim 文件包含其 coffee.vim 语法文件，以将咖啡脚本突出显示到 HTML 文件中。使用相对语法 include, a la

```
syntax include @HTML syntax/html.vim 
```

您可以在 VIM 的运行时路径中获得所有的 syntax/html.vim 文件，包括来自 coffeescript 插件的文件（其中包括 coffee.vim，因此是递归）。使用绝对路径将限制您仅获取您指定的特定语法文件，但这似乎是一个合理的权衡，因为嵌入到咖啡脚本字符串中的 HTML 可能相当简单。

# python - 使用字典将月份编号转换为月份名称的基本 Python 编程

> ID：14533709
> 
> 赞同：4
> 
> 时间：2013-01-26T03:57:08.797
> 
> 标签：python, python-2.7

我是python新手，只知道最基本的级别。我应该允许以 dd/mm/yyyy 的形式输入日期并将其转换为 1986 年 8 月 26 日之类的内容。我不知道如何将月份（mm）从数字转换为单词。下面是我目前的代码，希望你能帮助我。** 请不要建议使用日历功能，我们应该使用 dict 来解决这个问题。

谢谢 （：

```
#allow the user to input the date
date=raw_input("Please enter the date in the format of dd/mm/year: ")

#split the strings
date=date.split('/')

#day
day=date[:2]

#create a dictionary for the months
monthDict={1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr', 5:'May', 6:'Jun', 7:'Jul', 8:'Aug', 9:'Sep', 10:'Oct', 11:'Nov', 12:'Dec'}
#month
month=date[3:5]
if month in monthDict:
    for key,value in monthDict:
        month=value

#year
year=date[4:]

#print the result in the required format
print day, month, "," , year 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T05:08:42.137

使用 Python 的 datetime.datetime！阅读使用`my_date = strptime(the_string, "%d/%m/%Y")`. 使用 打印`my_date.strftime("%d %b, %Y")`。

访问：[http ://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)

例子：

```
import datetime
input = '23/12/2011'
my_date = datetime.datetime.strptime(input, "%d/%m/%Y")
print my_date.strftime("%d %b, %Y") # 23 Dec, 2011 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T04:15:23.733

```
date = raw_input("Please enter the date in the format of dd/mm/year: ")
date = date.split('/')
day = date[0] # date is, for example, [1,2,1998]. A list, because you have use split()
monthDict = {1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr', 5:'May', 6:'Jun', 
            7:'Jul', 8:'Aug', 9:'Sep', 10:'Oct', 11:'Nov', 12:'Dec'}
month = date[1] # Notice how I have changed this as well
                # because the length of date is only 3
month = monthDict[int(month)]
year = date[2] # Also changed this, otherwise it would be an IndexError
print day, month, "," , year 
```

运行时：

```
Please enter the date in the format of dd/mm/year: 1/5/2004
1 May , 2004 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T04:13:16.020

完成拆分后，您不需要使用像 day=date[:2] 这样的索引。只需使用say = date[0]。同样，不需要循环来匹配字典值。你可以看到下面的代码。

```
#allow the user to input the date
date=raw_input("Please enter the date in the format of dd/mm/year: ")

#split the strings
date=date.split('/')

#day
day=date[0]

#create a dictionary for the months
monthDict={1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr', 5:'May', 6:'Jun', 7:'Jul', 8:'Aug', 9:'Sep', 10:'Oct', 11:'Nov', 12:'Dec'}
#month
monthIndex= int(date[1])

month = monthDict[monthIndex]
#year
year=date[2]
print day, month, "," , year 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T04:06:11.633

拆分日期字符串时，您将只有三个元素（0、1 和 2）：

```
>>> date=date.split('/')
>>> print date
['11', '12', '2012']
  ^     ^     ^
  0     1     2 
```

因此， date[:2] 将等于：

```
>>> day=date[:2] # that is, date up to (but not including) position 2
>>> print day
['11', '12'] 
```

而且`date[4]`不会存在，也不会存在`date[3:5]`。

此外，您需要像这样调用您的字典值：

```
>>> print monthDict[12]
Dec 
```

因此，要打印日、月、年的组合，您需要这样做：

```
>>> print date[0], monthDict[int(date[1])] + ", " + date[2]
11 Dec, 2012 
```

您必须使用`int(date[0])`作为您的键，`monthDict[int(date[0])]`因为您使用整数作为您的字典键。但是您的输入（来自用户）是一个字符串，而不是整数。

# jquery - 从 JSON 数组中提取图像

> ID：14533713
> 
> 赞同：1
> 
> 时间：2013-01-26T03:57:54.217
> 
> 标签：jquery, json

我在从 json 数组中提取一些图像时遇到问题。

这是我的代码

```
 for (var n = 0; n < detail.photos.length; n++) {
    var photos = detail.photos[n]
    var photo_img = $("<img />", {
        "src": photos
    });
    $("#Gallery").append("<br />" + photo_img)
} 
```

我的图像循环的这段代码输出的是每个图像的 [object, OBJECT]。我尝试添加一个`alert(photos);`，它的作用是给我一个带有每个图像来源的警报框。我不知道如何让图像正确显示。

啊，下面指出的解决方案是您不能将连接与 .append()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:08:59.663

您不能在附加中使用串联。因为那么您将向一个没有任何意义的对象添加字符串。应该是这样的

```
 for (var n = 0; n < detail.photos.length; n++) {

    var photos = detail.photos[n];
    console.log(photos);
    var photo_img = $("<img />", {
        "src": photos
    });
     $("body").append(photo_img).append('<br>');
} 
```

编辑：对不起，我没有注意到细节指向酒店对象

# html - 两个高度相同的div显示不同

> ID：14533722
> 
> 赞同：1
> 
> 时间：2013-01-26T03:59:11.013
> 
> 标签：html, css

我`div`在一个容器中有两个 s，它们都设置为`display:inline-block`相同的高度。两者之间的唯一区别是它们的字体大小。因为它们的高度设置为相同的值，所以我希望它们具有相同的高度并且从页面的最顶部开始，但是情况并非如此（一个从顶部偏移了一点点）。

为什么会这样，我如何使它们的高度相同并且从顶部偏移 0？

[http://jsfiddle.net/tinanyaa/tWrHd/1/](http://jsfiddle.net/tinanyaa/tWrHd/1/)

![](../Images/d0b5a2112ee449475aa9483986d1f6c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:01:31.853

的默认值为`inline-block`基线。`vertical-align:top`在您的 DIV 中定义。像这样写：

```
div{
 display:inline-block;
 vertical-align:top
} 
```

检查这个[http://jsfiddle.net/tWrHd/2/](http://jsfiddle.net/tWrHd/2/)

阅读更多内容[为什么这个 inline-block 元素会被向下推？](https://stackoverflow.com/questions/9273016/why-is-this-inline-block-element-pushed-downward)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:01:09.077

也许将`vertical-align: text-top;`or`vertical-align: top;`属性添加到这两者可能会有所帮助？

# python - Python 对 UbuntuOne 文件 api 的 urllib2/oauth2 请求返回 401 未授权错误

> ID：14533725
> 
> 赞同：1
> 
> 时间：2013-01-26T03:59:32.867
> 
> 标签：python, ubuntu, oauth-2.0, urllib2

我正在尝试发出一个基本的 UbuntuOne API 调用。

1.  正如[https://one.ubuntu.com/developer/account_admin/auth/otherplatforms](https://one.ubuntu.com/developer/account_admin/auth/otherplatforms)上所解释的，我正在获取 OAUTH 令牌，然后将其传递给 UbuntuOne 服务。
2.  我可以得到令牌和消费者信息
3.  然后我尝试发出 /api/file_storage/v1 API 调用（请参阅：[https://one.ubuntu.com/developer/files/store_files/cloud。](https://one.ubuntu.com/developer/files/store_files/cloud.)）使用 OAUTH 令牌对请求进行签名。

下面的代码片段是我正在执行的确切代码（减去 email.password/description 字段。）正确返回了令牌和消费者数据。发出 /api/file_storage/v1 请求时，我从服务器收到“401 UNAUTHORIZED”...知道为什么吗？

```
import base64
import json
import urllib
import urllib2
import oauth2

email = 'bla'
password = 'foo'
description = 'bar'

class Unauthorized(Exception):
  """The provided email address and password were incorrect."""

def acquire_token(email_address, password, description):
  """Aquire an OAuth access token for the given user."""
  # Issue a new access token for the user.
  request = urllib2.Request(
    'https://login.ubuntu.com/api/1.0/authentications?' +
    urllib.urlencode({'ws.op': 'authenticate', 'token_name': description}))
  request.add_header('Accept', 'application/json')
  request.add_header('Authorization', 'Basic %s' % base64.b64encode('%s:%s' % (email_address, password)))
  try:
    response = urllib2.urlopen(request)
  except urllib2.HTTPError, exc:
    if exc.code == 401: # Unauthorized
      raise Unauthorized("Bad email address or password")
    else:
      raise
  data = json.load(response)
  consumer = oauth2.Consumer(data['consumer_key'], data['consumer_secret'])
  token = oauth2.Token(data['token'], data['token_secret'])

  # Tell Ubuntu One about the new token.
  get_tokens_url = ('https://one.ubuntu.com/oauth/sso-finished-so-get-tokens/')
  oauth_request = oauth2.Request.from_consumer_and_token(consumer, token, 'GET', get_tokens_url)
  oauth_request.sign_request(oauth2.SignatureMethod_PLAINTEXT(), consumer, token)
  request = urllib2.Request(get_tokens_url)
  for header, value in oauth_request.to_header().items():
    request.add_header(header, value)
  response = urllib2.urlopen(request)

  return consumer, token

if __name__ == '__main__':
  consumer, token = acquire_token(email, password, description)
  print 'Consumer:', consumer
  print 'Token:', token

  url = 'https://one.ubuntu.com/api/file_storage/v1'

  oauth_request = oauth2.Request.from_consumer_and_token(consumer, token, 'GET', url)
  oauth_request.sign_request(oauth2.SignatureMethod_PLAINTEXT(), consumer, token)

  request = urllib2.Request(url)
  request.add_header('Accept', 'application/json')

  for header, value in oauth_request.to_header().items():
    request.add_header(header, value)

  response = urllib2.urlopen(request) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:11:32.800

问题在于“描述”字段。它必须采用以下格式：

```
Ubuntu One @ $hostname [$application] 
```

否则，UbuntuOne 服务会返回“ok 0/1”并且不注册令牌。

# ios - 在 Objective C 中处理 JSON

> ID：14533727
> 
> 赞同：-3
> 
> 时间：2013-01-26T03:59:41.073
> 
> 标签：ios, xcode, arrays, json, xcode4

如何从 JSON 字典中提取单个评级值？评级值仅驻留在父 JSON 字典中（它不是嵌套的）。我的代码在这里：

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];

  for (NSDictionary *diction in allDataDictionary)
  {
    NSString *rating = [diction objectForKey:@"rating"];
    [array addObject:rating];
  }

  [[self myTableView] reloadData];
} 
```

其次，我如何制作一个 If 语句来将评级值转换为一个`NSString`，以便它出现在 iPhone 模拟器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:36:28.977

为了从字典中获取所有评级对象，您可以使用：

```
NSArray *array = [allDataDictionary valueForKey:@"rating"]; 
```

这取决于 JSON 表示和数据集的结构。

对于第二个问题，如果这个对象是一个`NSNumber`，你可以试试这个：

```
if ([[array objectAtIndex:indexPath.row] isKindOfClass:[NSNumber class]]) {
     cell.textLabel.text = [[array objectAtIndex:indexPath.row] stringValue];
} 
```

请注意，您必须使用`isKindOfClass`方法来检查类并`stringValue`转换为字符串。

# c# - 夏普DX。照明问题

> ID：14533728
> 
> 赞同：1
> 
> 时间：2013-01-26T03:59:46.720
> 
> 标签：c#, directx, lighting, sharpdx

我正在使用 SharpDX d3d9 制作具有灯光效果的球体。

所以，我尝试了下面的代码。

```
 var direct3D = new Direct3D();
 var device = new SharpDX.Direct3D9.Device(direct3D, 0, SharpDX.Direct3D9.DeviceType.Hardware, this.Handle, CreateFlags.HardwareVertexProcessing,
 new PresentParameters(this.ClientSize.Width, this.ClientSize.Height));
 Light light = new Light();
 light.Type = LightType.Point;

 light.Diffuse.Red = 1.0f;
 light.Diffuse.Green = 1.0f;
 light.Diffuse.Blue = 1.0f;
 light.Diffuse.Alpha = 0.7f;

 light.Position = new Vector3(-10, -10, -10);

 light.Range = 200.0f;
 light.Attenuation0 = 0.1f;

 device.SetRenderState(RenderState.Lighting, true);
 device.SetRenderState(RenderState.Ambient, new Color4(0.5f, 0.5f, 0.5f, 0.5f).ToRgba());

 device.SetLight(0, ref light);
 device.EnableLight(0, true);

 Material met = new Material();
 met.Diffuse = new Color4(1, 1, 1, 1);
 met.Ambient = new Color4(1, 1, 1, 1);
 met.Specular = new Color4(1, 1, 0, 1);
 met.Emissive = new Color4(0, 0, 0, 1);
 met.Diffuse.Alpha = 0.7f;
 met.Power = 5.0f;

 device.Material = met; 
```

但是，什么都没有改变。

图像：http : [//cfile24.uf.tistory.com/image/156A994C5103547E273035](http://cfile24.uf.tistory.com/image/156A994C5103547E273035)

（颜色是我输入的值。）

渲染代码是

```
 RenderLoop.Run(this, () => {
            var time = clock.ElapsedMilliseconds / 1000.0f;

            device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, Color.Black, 1.0f, 0);
            device.BeginScene();

            effect.Technique = technique;
            effect.Begin();
            effect.BeginPass(0);

            var worldViewProj = Matrix.RotationX(time) * Matrix.RotationY(time * 2) * Matrix.RotationZ(time * .7f) * viewProj;
            effect.SetValue("worldViewProj", worldViewProj);
            //effect.SetValue("worldViewProj", viewProj);

            //device.DrawPrimitives(PrimitiveType.LineList, 0, counts / 2);
            device.DrawPrimitives(PrimitiveType.TriangleList, 0, counts / 3);

            effect.EndPass();
            effect.End();

            device.EndScene();
            device.Present();
        }); 
```

如何将光应用于我的应用程序？

和，

var effect = Effect.FromFile(device, "MiniCube.fx", ShaderFlags.None);

什么剂量是什么意思？但是我不想要任何效果..（它来自 SharpDX 示例源。MiniCube.csproj）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:25:08.203

除了它是 C# 的 DX 包装器这一事实之外，我本人并不熟悉 SharpDX。虽然是一个很酷的概念，但如果您不熟悉 DirectX 的工作原理，我会警告您不要使用它。据我了解，SharpDX 家伙故意提供很少的文档，因为 DirectX 本身已经有大量的示例和文档。

说到效果，它们是处理着色器逻辑的对象。着色器是直接与 GPU 交互的“小程序”。现代游戏中的大部分内容都是通过着色器编写、显示、倾斜、变形、更改甚至移动的，包括照明！HLSL（或高级着色器语言）是 DirectX 接口的标准语言。具有讽刺意味的是，找到简单的着色器教程或示例可能相当困难，而更复杂的细节却得到了很好的映射。

尽管这些对于您的即时需求可能不是特别有用，但这里是我最喜欢的两个 HLSL 材料资源。

[DirectXTutorial.com](http://www.directxtutorial.com)

[贾JDoo](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=JaJDoo%20Shader%20Guide)

DXTutorial 非常适合通过 C++ 学习 DX，几乎没有依赖项，除了微软最近宣布弃用的 D3DX 库（混蛋）。它还为高级内容收取 50 美元的象征性费用（我相信这包括着色器），但当我说他以 50 美元卖空自己时请相信我。

JaJDoo 的教程本身就很出色，但是它们针对的是 Ogre 图形框架，因此您需要对代码进行一些更改，因为 Ogre 使用自定义着色器管道来改变您定义和调用技术和传递的方式，而不是一个巨大的处理找出IMO。

话虽如此，我意识到我还没有真正回答你的问题。但是，我会敦促您退出 SharpDX 并学习基础知识。可能还有其他人不同意我的观点，但对我来说似乎有点倒退。无论如何，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-23T10:39:02.287

如果你想使用光照，你的顶点格式应该包括`VertexFormat.Normal`. 如果没有法线，DirectX 就无法计算光照。

# ajax - 长时间运行的 ajax 与轮询

> ID：14533729
> 
> 赞同：1
> 
> 时间：2013-01-26T03:59:56.960
> 
> 标签：ajax, signalr, long-polling

我正在尝试确定最适合我的 Web 应用程序的解决方案。我有一个页面会触发任意数量的 ajax 请求以从服务器检索数据。例如，加载的页面可能会向服务器发出 10 个 ajax 请求，**每个**请求可能需要 10 秒 (+-) 才能返回内容。

鉴于这是多用户和多并发环境中的 Web 应用程序，使用传统的 ajax 方法是一个好主意，还是选择长轮询，例如 SignalR。

两种方法（拉与推）的优缺点是什么？最终，我追求的是最节省资源的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:01:37.530

在您陈述的示例中，您谈论的是纯粹的“拉动”场景。即“当页面加载时，我希望 X、Y、Z 发生，然后我想查看结果”。

长轮询/websockets (SignalR) 对于 Push 场景很有用 - 即“哦，看我已经完成了这个超长进程......我最好告诉任何当前连接的用户”。

您可以使用 SignalR 运行那些普通样式的 AJAX 请求......但您不会获得任何性能增强。AJAX 将异步并行运行，一旦服务器端进程完成，您将执行一个回调。也许您可能会稍微提高性能，因为 signalR 将持续运行连接，因此您将失去创建连接的轻微延迟。另一方面，服务器将运行大量打开的连接，这可能会降低性能（特别是如果您使用 10 X 10 秒的计算来达到它）

# javascript - Javascript自定义选项卡添加到代码：如果选项卡为空，则隐藏内容

> ID：14533732
> 
> 赞同：1
> 
> 时间：2013-01-26T04:00:14.490
> 
> 标签：javascript, jquery

我尝试将动态内容添加到选项卡并在选项卡为空时隐藏内容

**html代码**

```
<ul id="tabs">
    <li><a href="#" name="#tab1">One</a></li>
    <li><a href="#" name="#tab2">Two</a></li>
    <li><a href="#" name="#tab3">Three</a></li>
    <li><a href="#" name="#tab4">Four</a></li>
</ul>

<div id="content_tabs">
    <div id="tab1">content 1</div>
    <div id="tab2">content 2</div>
    <div id="tab3">content 3</div>
    <div id="tab4">content 4</div>
</div> 
```

**js代码**

```
function resetTabs(){
    jQuery("#content_tabs > div").hide(); //Hide all content
    jQuery("#tabs a").attr("id",""); //Reset id's      
}

var myUrl = window.location.href; //get URL
var myUrlTab = myUrl.substring(myUrl.indexOf("#")); // For mywebsite. com/tabs.html#tab2, myUrlTab = #tab2     
var myUrlTabName = myUrlTab.substring(0,4); // For the above example, myUrlTabName = #tab

jQuery(function(){
    jQuery("#content_tabs > div").hide(); // Initially hide all content
    jQuery("#tabs li:first a").attr("id","current"); // Activate first tab
    jQuery("#content_tabs > div:first").fadeIn(); // Show first tab content

    jQuery("#tabs a").on("click",function(e) {
        e.preventDefault();
        if (jQuery(this).attr("id") == "current"){ //detection for current tab
         return       
        }
        else{             
        resetTabs();
        jQuery(this).attr("id","current"); // Activate this
        jQuery(jQuery(this).attr('name')).fadeIn(); // Show content for current tab
        }
    });

    for (i = 1; i <= $("#tabs li").length; i++) {
      if (myUrlTab == myUrlTabName + i) {
          resetTabs();
          jQuery("a[name='"+myUrlTab+"']").attr("id","current"); // Activate url tab
          jQuery(myUrlTab).fadeIn(); // Show url tab content        
      }
    }
}); 
```

**美女css**

```
#tabs {
  overflow: hidden;
  width: 100%;
  margin: 0;
  padding: 0;
  list-style: none;
}

#tabs li {
  float: left;
  margin: 0 -15px 0 0;
}

#tabs a {
  float: left;
  position: relative;
  padding: 0 40px;
  height: 0; 
  line-height: 30px;
  text-transform: uppercase;
  text-decoration: none;
  color: #fff;
  border-right: 30px solid transparent;
  border-bottom: 30px solid #3D3D3D;
  border-bottom-color: #777\9;
  opacity: .3;
  filter: alpha(opacity=30);      
}

#tabs a:hover,
#tabs a:focus {
  border-bottom-color: #2ac7e1;
  opacity: 1;
  filter: alpha(opacity=100);
}

#tabs a:focus {
  outline: 0;
}

#tabs #current {
  z-index: 3;
  border-bottom-color: #3d3d3d;
  opacity: 1;
  filter: alpha(opacity=100);     
} 
```

**这里演示** [http://jsfiddle.net/uVNFp/95/](http://jsfiddle.net/uVNFp/95/)

如果有人知道如果选项卡为空我如何隐藏内容，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:23:56.723

[http://jsfiddle.net/tdf22/1/](http://jsfiddle.net/tdf22/1/)

与原始小提琴的更改：

*   删除的内容`<div id="tab2">`。
*   添加了以下内容。

> ```
> $("#content_tabs > div:empty").each(function() {
>     $("#tabs > li").eq($(this).index()).hide();
> }); 
> ```

**编辑：**

为了回应您对空白的评论，我创建了这个小提琴：http: [//jsfiddle.net/tdf22/3/](http://jsfiddle.net/tdf22/3/)

在这一个中，我：

*   添加了以下 jQuery 自定义表达式

> ```
> $.expr[":"].emptyOrWhiteSpace = function(obj){
>   var $this = $(obj);
>   return ($.trim($this.html()) === "");
> }; 
> ```

*   并改变了这一行

    $("#content_tabs > div:empty").each(function() {

*   对此

    $("#content_tabs > div:emptyOrWhiteSpace").each(function() {

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:17:35.377

Gustavo，这只是我整理的一个快速答案，以便你有一些工作。这可以以更专业的方式完成。[http://jsfiddle.net/tdf22/8/](http://jsfiddle.net/tdf22/8/)

我只是在你的 javascript 的底部添加了这个：

```
var tabs = $('#tabs li');
for (var i=0; i<tabs.length; ++i) {
  if (tabs[i].style.display !== 'none') {
    tabs[i].firstChild.id = 'current'; 
    $('#tab'+(i+1)).show();
    return false;
  }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:07:05.913

```
var El = document.getElementById("El"); //replace
If(El.hasChildNodes()) {
      El.style.display = "block";
    } else {
        El.style.display = "none";
    } 
```

# python - Python脚本遍历windows目录并通过子进程启动应用程序

> ID：14533733
> 
> 赞同：0
> 
> 时间：2013-01-26T04:00:33.710
> 
> 标签：python, subprocess, stdout

我对python比较陌生，对stackoverflow显然很陌生。我的目标是在我的库中创建一个包含有关视频文件信息的文件：编解码器、大小、比特率和分辨率，我可以轻松解析。我计划使用这些信息来确定哪些视频文件的质量足够低，以保证用更好看的编码进行替换。

我在 sourceforge 上找到了[MediaInfo 。](http://mediainfo.sourceforge.net/en)我的脚本递归遍历给定目录并通过子进程调用 MediaInfo。由于 stackoverflow 上的[这个](https://stackoverflow.com/questions/3005437/windowserror-error-5-access-is-denied)线程描述了如何解决 Windows 权限错误，我解决了一个较早的错误。我还从[这个](https://stackoverflow.com/questions/7006238/how-do-i-hide-the-console-when-i-use-os-system-or-subprocess-call)线程实现了代码来隐藏 Windows 命令提示符控制台，该控制台在每次调用子进程时都会被实例化。

目前，我的代码失败并出现以下错误： `returned non-zero exit status 1`

我的脚本的当前状态如下。提前致谢！

```
import os, subprocess 
```

我推测问题可能在于我如何格式化传递给子进程的字符串

```
types = [".avi", ".mp4", ".mkv"]
app = "MediaInfo.exe"
app_path = os.path.join("C:\Program Files\MediaInfo\MediaInfo_CLI_0.7.61_Windows_x64", app)
movie_dir = "L:\Movies"
current_file = "" 
```

下面的代码在没有控制台窗口的情况下启动子进程

```
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

递归检查媒体目录并分析匹配文件

```
for root, dirs, files in os.walk(movie_dir):
    for filename in files:
        for extension in types:
            if (filename.endswith(extension)):
                current_file = '"' + os.path.join(root, filename) + '"'
                output = subprocess.check_output([app, current_file], 
                    executable=app_path, 
                    stderr=subprocess.STDOUT,
                    startupinfo=startupinfo)
                print app_path, current_file, output #debug
                with open("out.txt", "a") as f:
                    f.write(output) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:51:45.713

如果您使用的是 python 3（和 windows）及更高版本，请尝试使用原始字符串（或在 windows 上转义反斜杠），或者在形成路径时使用正斜杠！所以而不是

```
app = "MediaInfo.exe"
app_path = os.path.join("C:\Program Files\MediaInfo\MediaInfo_CLI_0.7.61_Windows_x64", app)
movie_dir = "L:\Movies" 
```

尝试使用

```
app = r'MediaInfo.exe'
app_path = os.path.join(r'C:\Program Files\MediaInfo\MediaInfo_CLI_0.7.61_Windows_x64',  app)
movie_dir = r'L:\Movies' 
```

同样在你的剧本中也是如此。我在字符串“C:\Program Files..”中的空格以及不转义反斜杠时也遇到了很多麻烦。

# java - 在Android中执行shell命令时避免“su” toast？

> ID：14533743
> 
> 赞同：1
> 
> 时间：2013-01-26T04:02:39.467
> 
> 标签：java, android, checkbox, exec, su

我正在开发一个简单的应用程序，它通过执行 shell 命令在 build.prop 上注入行。我的主要问题是，每次我检查创建函数的切换时，都会出现显示 shell 字符串的 toast。有没有办法避免这种情况？另外，如果您有任何建议清理一下代码，我们将不胜感激！（我的第一个应用程序）。

代码：

```
public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle savedInstanceState) {

  // fragment not when container null
  if (container == null) {
     return null;
  }
  // inflate view from layout
  View v = (LinearLayout)inflater.inflate(R.layout.performance,container,false);

    final CheckBox hwdebug = (CheckBox) v.findViewById(R.id.hwDebug);   
    final String[] mountrw = {"su","-c","mount -o remount,rw /system"};
    final String[] enhwdebug1 = {"su","-c","sed -i '/debug.sf.hw=*/d' /system/build.prop"};
    final String[] enhwdebug2 = {"su","-c","echo '## Rendering GPU Enabled ##' >> /system/build.prop"};
    final String[] enhwdebug3 = {"su","-c","echo debug.sf.hw=1 >> /system/build.prop"};
    final String[] dishwdebug1 = {"su","-c","sed -i '/debug.sf.hw=1/d' /system/build.prop"};
    final String[] dishwdebug2 = {"su","-c","sed -i '/## Rendering GPU Enabled ##/d' /system/build.prop"};

final SharedPreferences hwdebugpref = this.getActivity().getSharedPreferences("hwdebugck",0);

    // GPU Rendering Checkbox
    boolean hwdebugck = hwdebugpref.getBoolean("hwdebugck", false);
    if (hwdebugck) { 
        hwdebug.setChecked(true);
    } else {
        hwdebug.setChecked(false);
    }
    hwdebug.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {    
        if((hwdebug.isChecked())) {
            SharedPreferences.Editor editor = hwdebugpref.edit();
          editor.putBoolean("hwdebugck", true); // value to store
          editor.commit();   
            ArrayList<String[]> enhwdebug = new ArrayList<String[]>();
            enhwdebug.add(mountrw);
            enhwdebug.add(enhwdebug1);
            enhwdebug.add(enhwdebug2);
            enhwdebug.add(enhwdebug3);
                for(String[] cmd:enhwdebug){
                    try {
                        Runtime.getRuntime().exec(cmd);
                        } catch (IOException e) {
                            e.fillInStackTrace(); 
                        } 
                }
        } else {
          SharedPreferences.Editor editor = hwdebugpref.edit();
          editor.putBoolean("hwdebugck", false); // value to store
          editor.commit();
            ArrayList<String[]> diswdebug = new ArrayList<String[]>();
            diswdebug.add(mountrw);
            diswdebug.add(dishwdebug1);
            diswdebug.add(dishwdebug2);
                for(String[] cmd:diswdebug){
                    try {
                        Runtime.getRuntime().exec(cmd);              
                        } catch (IOException e) {
                            e.fillInStackTrace(); 
                        } 
                } 
                }
    }
}); 
```

所以，我的主要问题是`su -c`显示令人讨厌的吐司。我试图将它传递给busybox或工具箱但没有成功，因为它们需要与`su`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:29:25.993

有可能，通过让对 root 命令的调用保持不变并让它始终是唯一处理它们的线程来保持相同的线程。

这样，toast 只会在您第一次使用 root 操作时出现。

此外，在最终用户方面，一些应用程序（如 super-su）允许避免 toast，即使是每个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:43:00.130

好的，首先回答您的问题，答案是肯定的和否定的。

简单的回答：不，它不可能使用您不能使用的当前 SU 管理器之一，例如 SuperUser 或 SuperSU。吐司是一种安全机制。这两个应用程序都具有删除特定应用程序的 toast 的功能，但您作为开发人员无法控制这一点。

硬性答案：是的，这是可能的，但这需要您编译自己的 su 二进制文件并使用它来代替已安装的 su 二进制文件。您需要删除引用当前管理器的代码（您从哪个源编译）。建议添加检查，以便只有您的应用程序可以运行该二进制文件。但是，这可能会导致安全风险，并且可能不是一个好主意。

我没有仔细阅读您的代码，但我想说一件事在任何情况下都不要在 UI 线程上运行 SU 命令。这只是在问问题。

# c++ - C ++：1和0到原始字符的整数数组

> ID：14533747
> 
> 赞同：0
> 
> 时间：2013-01-26T04:03:53.130
> 
> 标签：c++

我有 1 和 0 的 int 数组，例如-

```
01101000
01100101
01101100
01101100
01101111 
```

这是“你好”的位转换。我想将其转换回字符数组，例如-

```
01101000 -> h
01100101 -> e
01101100 -> l
01101100 -> l
01101111 -> o 
```

你们能给出相同的C++代码片段吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T04:37:56.577

您可以定义一个函数，如：

```
char bitsToChar(const char *bits)
{
    char result = 0;
    for (int i = 0; i < 8; i++)
    {
        result = (result << 1) | bits[i];
    }
    return result;
} 
```

在每个循环中，下一位附加到存储结果的右侧，将先前添加的位“推”到左侧。

所以这段代码：

```
#include <iostream>
using namespace std;

char bits[5][8] = {
    {0,1,1,0,1,0,0,0},
    {0,1,1,0,0,1,0,1},
    {0,1,1,0,1,1,0,0},
    {0,1,1,0,1,1,0,0},
    {0,1,1,0,1,1,1,1} };

char bitsToChar(const char *bits)
{
    char result = 0;
    for (int i = 0; i < 8; i++)
    {
        result = (result << 1) | bits[i];
    }
    return result;
}

int main(const char* argv[], const int argc)
{
    for (int j = 0; j < 5; j++)
    {
        for (int i = 0; i < 8; i++)
        {
            cout << (int)bits[j][i];
        }
        cout << " -> " << bitsToChar(bits[j]) << endl;
    }
} 
```

产生以下输出：

```
01101000 -> h
01100101 -> e
01101100 -> l
01101100 -> l
01101111 -> o 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T04:44:15.717

数组中的每一个都`int`应该根据它在数组中的位置左移（例如，最右边`int`的值左移 0，最左边的值左移 7），然后添加到跟踪和。遍历数组并保留位移值的总和。

假设您总是要使用 8 的数组`ints`：

```
int bits[8] = {0,1,1,0,1,0,0,0};
char c = 0;
for (int i=0; i<8; i++) {
    c += bits[i]<<(7-i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:31:34.650

我会给你一个线索，因为这似乎是家庭作业。

您可以`int`通过在遍历数组时有条件地添加来生成二进制文件。`int`可以将an强制转换为 a`char`以返回一个字母。

例如在基数 3 中：

```
10212 : h
21121 : e 
. 
.
.

const int length_of_word = 5;
const int length_of_letter = 5;

char* word = new char[length_of_word];
for (int letter = 0; letter < length_of_word; letter ++)
{
  int accumulator = 0;
  for (int trinaryIndex = 0; trinaryIndex < length_of_letter; trinaryIndex ++)
  {
    int curVal = 1;
    if (trinaryArray[letter][trinaryIndex] > 0)
    {
      accumulator += curVal * trinaryArray[letter][trinaryIndex];
    }
    curVal *= 3;
  }
  word[letter] = (char)accumulator;
} 
```

编辑：这不考虑 MSB 或 LSB 排序。您可能需要更改内部循环的顺序以解决此问题；）。

# c# - 无法将我的登录结果定向到控制器

> ID：14533750
> 
> 赞同：4
> 
> 时间：2013-01-26T04:04:56.297
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我是 C# 和 asp.net 世界的新手。所以我要问的问题可能很蹩脚，希望大家多多包涵:)。好的，所以我正在阅读一本书并了解在 asp.net 中如何进行身份验证和授权的基础知识。

现在我在 web.config 中定义了我的身份验证和授权，如下所示；

```
<authentication mode="Forms">
  <forms loginUrl="~/Home/LogOn" protection="All" path="/" timeout="30" name="MyCookies" />
</authentication>
<authorization>

  <deny users="?"/>
  <allow users="*"/>

</authorization> 
```

然后我继续创建我的登录表单。如下；

```
<form method="post" action="../Home/LogUser">
<fieldset>

<legend>Log On</legend>
<p>User Name</p>
<p><input type="text" name="txtUserName" id="txtUserName" size="30"/></p>

<p>Password</p>
<p><input type="password" name="txtPassword" id="txtPassword" size="30"/></p>

<p><input type="submit" name="btnSubmit" value="Log On"/></p>
</fieldset>
 </form> 
```

我的问题是，由于我已在 web.config 中定义拒绝匿名用户，因此当我尝试提交指向控制器的表单时，它会返回登录页面。我该如何处理这种情况？也许我已经了解了 asp.net 中的整个登录范例，在这种情况下，我很感激对此的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:41:31.053

欢迎访问 asp.net。我特别喜欢 MVC 框架。希望你这样做。

很多点建议

1）如果您使用的是 MVC 框架，则不建议使用此方法。一种更优越的方法是将`[Authorize]`属性应用于控制器和/或您想要关闭非身份验证用户的方法。

这种方法可以非常灵活地决定您的用户可以匿名去哪里，他们可以去哪里进行身份验证，以及只有某些角色可以去哪里`[Authorize(Roles="Admin")]`

2) 如果要继续进行 web.config 设置和身份验证位置，以允许用户访问特定位置，请将此代码添加到 web.config

```
<location path="~/Home/">
  <system.web>
    <authorization>
      <allow users="?" />
    </authorization>
  </system.web>
</location> 
```

3）我从你的问题中不明白的是你的意图。如果您希望用户能够登录，您应该打开`~/Account/Logon`并且您的登录表单应该（理想情况下）在那里发布。

# php - 使用 LIKE 子句时 mysqli 准备问题？PHP

> ID：14533752
> 
> 赞同：2
> 
> 时间：2013-01-26T04:05:18.193
> 
> 标签：php, mysqli

我正在尝试从 fullName LIKE 'Ma%' 的数据库中选择前 10 个结果

它一直没有返回任何结果。我 100% 确定表中有一些结果，因为当我在不使用 mysqli ans 的情况下运行相同的查询时，它可以工作！

这段代码是怎么回事？有什么诀窍可以让这段代码运行吗？

这是我到目前为止所拥有的

```
$term = "'Ma%'";

$query = $db->prepare('SELECT customerID, fullName, birthYear, homeAddress, ID, DATE_FORMAT(idIssue, "%d-%m-%Y") AS idIssue, DATE_FORMAT(idExp, "%d-%m-%Y") AS idExp, phone
                       FROM customers WHERE (fullName LIKE ? ) LIMIT 0,10');
$query->bind_param('s', $term);

$query->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:27:09.897

```
$term = "Ma%"; // <-- remove the extra quotes

$sql = 'SELECT customerID, fullName, birthYear, homeAddress, ID, phone, 
               DATE_FORMAT(idIssue, "%d-%m-%Y") AS idIssue, 
               DATE_FORMAT(idExp, "%d-%m-%Y") AS idExp
        FROM customers WHERE fullName LIKE ? LIMIT 0,10'
$query = $db->prepare($sql);
$query->bind_param('s', $term);
// s refers to a string, i for an int... etc.
$query->execute();
// I hope you have some code below this line to actually display the returned data 
```

如果您对此查询有任何其他问题，它们与您发布的代码无关。检查拼写错误、正确的凭据、正确保存的文件和实际数据。

# django - 在 django 中手动添加 html 输入字段的正确方法是什么？

> ID：14533758
> 
> 赞同：0
> 
> 时间：2013-01-26T04:06:18.450
> 
> 标签：django, django-forms, django-templates, django-views

我是 django 新手，来自 php 世界。我不知道如何使用 django 创建项目所需的某些输入字段。所以我手动将这些字段的 html 添加到模板中。即，我添加了复选框和菜单。然后，在 view.py 中，我添加了代码以通过 request.POST 获取用户对复选框和菜单的选择。使用这些选择，我可以修改并保存表单的实例。

一切正常。唯一的故障是表单无法验证。如果发生这种情况，我需要重新显示表单，并在顶部显示错误消息。所以我调用 render 来重新显示表单。重新显示的表单丢失了我自定义的 html 的所有选择。即，自定义的复选框和菜单被重置，但不是 django 创建的输入字段。有没有办法保存用户对自定义 html 的选择？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:49:09.703

**模型.py**

```
class Debt(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50,
        help_text="Name to identify your debt.")
    due_day = models.PositiveSmallIntegerField(
        help_text="Day of the month payment is due.") 
```

**表格.py**

```
class DebtForm(forms.ModelForm):
    class Meta:
        model = Debt 
```

**视图.py**

```
def add_debt(request):
    if request.method == 'POST':
        form = DebtForm(request.POST)
        if form.is_valid():
            form.save() 
return render(request, 'add_debt.html', {
    'form': DebtForm(),
}) 
```

**add_debt.html**

```
<form method="post">{% csrf_token %}
    {% for field in form %}
        {{field}}<br/>
    {% endfor %}
    <input type="submit" value="Save Debt">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:28:57.440

您可以使用您的输入创建一个表单[要](https://docs.djangoproject.com/en/dev/ref/forms/widgets/) 了解如何使用表单，[请参阅此处](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs) 您可以[将 ModelForms](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)与自定义输入一起使用。

# ios - 如何从给定的网格生成俄罗斯方块

> ID：14533762
> 
> 赞同：1
> 
> 时间：2013-01-26T04:06:43.183
> 
> 标签：ios, objective-c, algorithm, tetris

起初我认为我的问题应该以前被问过，但我没有找到我想要的。

我正在开发的这个 iOS 应用程序的一个元素是将一个 8x8 网格分成[俄罗斯方块](http://en.wikipedia.org/wiki/Tetris)（每块由 4 个块组成）。我有两个特别的问题是：

1.  在 Objective-C 中表示俄罗斯方块的最佳方式是什么？

2.  什么算法将网格呈现为随机的俄罗斯方块（以及稍后如何检查两个部分是否适合）。

01/28 @livingtech 版，我想我几乎实现了你所说的，除了“有一个洞”这一点。当俄罗斯方块块只有两个块（是的，两个正方形，水平或垂直连接）时，我的代码在简单阶段没有孔，但在 3 方块俄罗斯方块块中，我会得到孔。我刚刚测试过，跑了 1000 次，我会得到一个没有洞的。所以我肯定需要一些机制来检查下一个方块是否是单例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:08:40.427

我一直在尝试为我的游戏做同样的事情。虽然我是一个初学者，但我正在使用`XNA`C#。

但我试图解决的方法是：`4x6 grid array`

```
--y123456
X1-000000
X2-000000
X3-000000
X4-000000 
```

这里，

*   0 表示没有阻塞
*   1 定义一个块

**算法**

1.  首先取数组中的第一个 0（左上角），然后随机选择 0 或 1。
2.  根据 x1/x2-y1/y2 随机选择坐标，决定 1 或 0。
3.  如果是 1，则根据该 1 的放置位置来决定协调。
4.  如果它在 x2 y1 上是 1，则决定是否应该在下一个接触坐标上继续使用 1。
5.  如果您只需要在哪些坐标接触和哪些不接触的坐标中进行编码，那么逻辑就会通过。

我的设置有点不同。但这是我的随机俄罗斯方块引擎的基础。

我还发现这样做确实有助于拥有一个白板并使用您的坐标绘制网格和标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:24:29.257

因为你的板子是 8*8，我想你可以用一个 int64 来代表板子。int64 的每一位代表特定网格是否被填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T07:14:52.687

如果这是真的，几个月前我在 Objective-C 上编写了测试俄罗斯方块应用程序[https://github.com/SonnyBlack/Test-Demo-Tetris](https://github.com/SonnyBlack/Test-Demo-Tetris)。我认为我的算法不是很好，但它有效。=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T07:46:38.237

实现俄罗斯方块是我的一个爱好。首先在 Windows/C 中实现它。然后在 Perl/Tk 中！我在 Obj-C/Cocoa (Mac) 中完成的最后一个实现。在所有情况下，游戏逻辑都是相同的。只有 UI 的东西会改变。我分别处理每个小盒子，并有一个二维数组，其中包含板上每个“设置”盒子的存在（和颜色）。我使用的标准板尺寸是 10 盒宽 x 20 盒高。

另外，我会跟踪“掉落”的部分：它的位置以及它是什么类型的部分。根据计时器，尝试使作品掉落。如果已经设置了“掉落”棋子将掉落的任何框，则停止丢弃该棋子并将棋子框添加到棋盘的“已设置”部分。创建一个新作品，然后重新开始。

这可能不是实现它的最佳方式，但在我看来它是有道理的。从纯 OO 的角度来看，掉落物的每个形状都可以是通用形状类的子类。覆盖检查形状是否可以下降、形状中各个框的偏移量等的函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T06:04:31.560

我认为尚未有人对您的问题 #2 提出质疑，因此我将概述我将要做什么。

设置：

1.  您需要将您的网格表示为某种数组。至少，您需要某种布尔值，以表示网格中的每个坐标是否被“占用”。
2.  您需要跟踪网格上的部分。这可能是另一个数组，这一次包含对每个部分的四个坐标的引用。
3.  您需要一个或多个变量来跟踪网格中的坐标，您将在其中开始填充片段（我可能会用一个角来填充这些）。
4.  设置所有可能的俄罗斯方块碎片和旋转的“池”。（您需要跟踪在下面概述的每次迭代中您已经检查了哪些。）

迭代：

1.  从您的池中随机抽取一块适合您的起始坐标。（如果你想变得花哨，你可以很聪明地选择哪些，或者你可以完全随机。因为不合适，标记它们检查，这样你就不会永远随机检查。如果你得到到了你已经检查了所有部分的程度，你有一个不起作用的解决方案，要么备份一个迭代，要么重新开始。）
2.  确保您选择的俄罗斯方块没有留下“洞”或少于 4 个方格的空白空间。（我不知道你对解决这个问题的要求，所以我不能说你应该关注速度还是编码的易用性，但如果你愿意，你可以跳过这一步，“蛮力”解决方案.)
3.  通过将其写入您的作品数组并标记已填充的坐标来“放置”作品。
4.  检查“完成”状态，其中所有空间都已填满。
5.  在网格中选择一个新坐标并重复 #1。（我会在前一个坐标旁边选择一个空的。）

# mysql - MySQL外键错误

> ID：14533768
> 
> 赞同：0
> 
> 时间：2013-01-26T04:08:19.403
> 
> 标签：mysql, foreign-keys

我想创建一个数据库并将其与两个数据库连接。但我不知道当我为第二个数据库（time_shift 表）创建外键时，它总是导致错误 150；

这是表的结构`outlet`：
![餐桌插座](../Images/6f1fb6b187925513e92012ab3c22d0ae.png)

这是表的结构`time_shift`：
![表 time_shift](../Images/5b4f74124400b2afa88131e26cec709b.png)

这是创建新表的查询`tide_cart`：

```
create table `tide_chart` (
    `id` int(10) not null auto_increment primary key,
    `date` date null,
    `outletId` int(11) not null,
    `timeShiftId` int(11) not null,
    `value` varchar(255) not null,

    unique (`date`, `outletId`, `timeShiftId`),
    foreign key (`outletId`) references `outlet`(`id`) 
        ON update cascade ON delete cascade,
    foreign key (`timeShiftId`) references `time_shift`(`id`) 
        ON update cascade ON delete cascade
) engine=innoDB; 
```

请向我解释一下，为什么在尝试使外键连接到表时出现错误`time_shift`？

* * *

`outlet`更新：为和添加转储导出结构表`time_shift`：

```
CREATE TABLE `outlet` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ; 

  CREATE TABLE `time_shift` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `time_start` time NOT NULL,
   `time_end` time NOT NULL,
   `is_active` tinyint(4) NOT NULL DEFAULT '1',
   `ref_area` int(11) NOT NULL DEFAULT '1',
   PRIMARY KEY (`id`),
   KEY `ref_area` (`ref_area`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:18:59.723

您需要为您的表使用 InnoDB 引擎。time_shift 正在使用 MyISAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:12:16.783

`outletId`您必须为and `timeShiftId`（`UNIQUE`或根据需要）定义索引，`KEY`以便能够使用该字段创建外键。

# python - 有没有办法“好”一个 Python 脚本的方法

> ID：14533769
> 
> 赞同：4
> 
> 时间：2013-01-26T04:08:48.883
> 
> 标签：python, linux, scheduling, nice

我的脚本有多个组件，只有部分需要`nice`-die，以低优先级运行。

有没有办法`nice`只使用一种 Python 方法，或者我需要将其分解为多个进程？

我正在使用 Linux，如果这很重要的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T04:19:17.560

您可以编写一个装饰器，在进入和退出时调整正在运行的进程：

```
import os
import functools

def low_priority(f):
    @functools.wraps(f)
    def reniced(*args, **kwargs):
        os.nice(5)
        try:
            f(*args,**kwargs)
        finally:
            os.nice(-5)
    return reniced 
```

然后你可以这样使用它：

```
@low_priority
def test():
    pass # Or whatever you want to do. 
```

免责声明：

1.  在我的机器上工作，不确定 os.nice 有多普遍。
2.  如下所述，它是否有效可能取决于您的操作系统/发行版，或者是根用户。
3.  Nice 是基于每个进程的。每个进程具有多个线程的行为可能不正常，并且可能会崩溃。

# fonts - Firefox 的字体显示问题，但 Safari 没有

> ID：14533770
> 
> 赞同：1
> 
> 时间：2013-01-26T04:08:57.287
> 
> 标签：fonts, webfonts

我在 font2web 的服务中使用的自定义字体出现显示问题...字体由图标组成，由我自己组合在一起（不确定这是否相关。）简而言之，它们没有显示在firefox ......即使在 chrome 中，它们似乎有点过时但没有那么糟糕，而在 safari 中它们看起来很好。起初它们在每个浏览器中都很好，但现在它们似乎被转移/扭曲了......

我在这里隔离了一个 html 文件中的图标，问题仍然存在。www.robinwkurtz.com/test/icons.html

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:13:53.803

我强烈推荐使用[Font Squirrel](http://www.fontsquirrel.com)而不是大多数其他网络字体工具。并查看与 Font2Web 相比 Font Squirrel 创建的源代码，看看可能会令人窒息……假设 Font Squirrel 做得更好。

# javascript - 修改dom节点属性，保存这段HTML

> ID：14533778
> 
> 赞同：1
> 
> 时间：2013-01-26T04:10:05.510
> 
> 标签：javascript, jquery

```
var template = $(this).parent().next().html()
console.log(template) 
```

铬控制台输出

```
<a href="/weishiji/objActivity/timeline/746"><img class="my-pic-head" width="40" height="40" original="/weishiji/avatar/20130121/746.jpg" style="display: block;" src="/weishiji/avatar/20130121/746.jpg"></a>
        <p class="co_reply">
            <a class="co_reply_name" href="/weishiji/objActivity/timeline/746">test</a>
            7                <br>
            <abbr title="2013-01-26 11:11:11" class="publishfooter">56 minute</abbr>
        </p>
        <pre class="delete_reply" id="comment-542">delete</pre> 
```

现在我使用下面的代码来修改这个html中的一些属性。

```
$(template).find('img').attr('src', 'a')
console.log($(template).html()) 
```

铬控制台输出

```
<img class="my-pic-head" width="40" height="40" original="/weishiji/avatar/20130121/746.jpg" style="display: block;" src="/weishiji/avatar/20130121/746.jpg"> 
```

但这不是我想要的结果，没有改变img src属性值，扔掉其他节点我只想改变里面的属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:18:01.163

我认为您的问题是您将模板设置为等于 html() 与将其设置为实际对象。试试这个：

```
var template = $(this).parent().next();
$(template).find('img').attr('src', 'a'); 
```

希望这可以帮助。这是一些示例[小提琴](http://jsfiddle.net/cnWWx/)，以查看它的工作原理。

正如@AustinBrunkhorst 指出的那样，这将是一样的：

```
template.find('img').attr('src', 'a'); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:23:55.757

问题是，您选择的内容已经是一个 jquery 对象，因此无需再次重新包装它。

我怀疑你的代码有问题，但无论如何

这是一个例子

```
var html = $('#id');
var attr = html.find('img').attr('src' , 'somehtm');
console.log(html.html()); 
```

[http://jsfiddle.net/SxQMw/](http://jsfiddle.net/SxQMw/)

# iphone - 检查任务是否在时间间隔之间完成

> ID：14533779
> 
> 赞同：0
> 
> 时间：2013-01-26T04:10:17.717
> 
> 标签：iphone, ios, xcode, nstimeinterval

我对时间逻辑不是很好，但想检查用户是否在 2 分钟的时间间隔内使用整数 (INT) 和布尔 (DN) 完成了特定任务。

**伪代码是这样的**

演绎功能1

如果 INT <= 4 在 2 分钟内然后 -0.5 否则如果 INT > 4 在 2 分钟内然后 -1.0

加法功能2

如果 INT < 3 && DN >= 2 在 2 分钟内然后 +0.5 否则如果 INT < 4 && DN >= 3 在 2 分钟内然后 +0.25

目前我这样做只是为了找出间隔

```
//time check if more then 2 minutes
#define TIME_INTERVAL   -120

-(void)shouldCheckForTime
{
    NSString *updateUTCPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"UTCDate"];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:updateUTCPath];

    if (!fileExists)
    {
        NSDate *currentDate = [NSDate date];
        NSArray *array = [NSArray arrayWithObject:currentDate];
        [array writeToFile:updateUTCPath atomically:YES];

        NSTimeInterval currentUTCTimeStamp = [[NSDate date] timeIntervalSince1970];
        NSLog(@"currentUTCTimeStamp %.0f",currentUTCTimeStamp);
    }

    NSMutableArray *rawArray = [NSMutableArray arrayWithContentsOfFile:updateUTCPath];
    if (rawArray == nil)
    {
        //return NO;
    }

    //get date from file UTCDate
    NSDate *lastUTCDate = [rawArray objectAtIndex:0];
    //NSLog(@"CDTS timeIntervalSince1970 %.0f",[lastUTCDate timeIntervalSince1970]);
   // NSLog(@"CDTS timeIntervalSinceNow %.0f",[lastUTCDate timeIntervalSinceNow]);

    if ([lastUTCDate timeIntervalSinceNow] < TIME_INTERVAL)
    {
         //NSLog(@"more then 2 mins");
    }
    else
    {
         //NSLog(@"less then 2 mins");
    }

    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    [dateFormatter setDateFormat:@"mm:ss:SS"];

    NSDate* firstDate = [dateFormatter dateFromString:@"01:00:00"];
    NSDate* secondDate = [dateFormatter dateFromString:@"01:02:00"];

    NSTimeInterval timeDifference = [secondDate timeIntervalSinceDate:firstDate];

    //NSLog(@"time diff %f",timeDifference);
} 
```

感谢您阅读并感谢任何评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:50:44.247

根据要求，这是您需要的示例。此特定示例用于确定用户创建对象后的时间。然后它决定是否需要在几分钟或几小时内完成。

```
NSTimeInterval timeDifference = [[NSDate date] timeIntervalSinceDate:dateToCompare;
NSTimeInterval finalTime = timeDifference / 60;

NSString *timePostedString = nil;
if (finalTime < 1) {
    timePostedString = [NSString stringWithFormat:@"1m"];
} else if (finalTime >= 60) {
    timePostedString = [NSString stringWithFormat:@"%.0fh", finalTime / 60];
} else if (finalTime >= 1440) {
    timePostedString = [NSString stringWithFormat:@"%.1fd", finalTime / 1440];
} 
```

# java - 在 Android/Java 中读写文件时跳过部分

> ID：14533781
> 
> 赞同：0
> 
> 时间：2013-01-26T04:10:33.910
> 
> 标签：java, android

我正在尝试学习 Java/Android，现在我正在对该`replaceAll`功能进行一些实验。但是我发现对于大型文本文件，该过程会变得缓慢，所以我想知道是否有办法跳过文件的“无用”部分以获得更好的性能。（注意：跳过它们，不要删除它们）

注意：我不是要“计算行数”或“println”或“system.out”，我只是替换字符串并将更改保存在同一个文件中。

***例子***

**AAAA**

**CCCC-** 9234802394819102948102948104981209381'238901'2309'129831'2381'2381'23081'23081'284091824098304982390482304981'20841'948023984129048'1489039842039481'204891'29031'923481290381'20391'294872385710239841'20391'20931'20853029573098341'290831'20893'12894093274019799919208310293810293810293810293810298'120931¿ 2093¿12039¿120931¿203912¿0391¿203912¿039¿12093¿12093¿12093¿12093¿12093¿1209312¿0390¿... **DDDD**

**AAAA**

**CCCC-** 9234802394819102948102948104981209381'238901'2309'129831'2381'2381'23081'23081'284091824098304982390482304981'20841'948023984129048'1489039842039481'204891'29031'923481290381'20391'294872385710239841'20391'20931'20853029573098341'290831'20893'12894093274019799919208310293810293810293810293810298'120931¿ 2093¿12039¿120931¿203912¿0391¿203912¿039¿12093¿12093¿12093¿12093¿12093¿1209312¿0390¿... **DDDD**

**等等......就像无数次**

我想用**"BBBB"替换所有****"AAAA"**，但是我要替换的字符串之间有很大一部分数据。**此外，这部分始终以"CCCC"**开头并以**"DDDD"**结尾。

 ******这是我用来替换字符串的代码。

```
File file = new File("my_file.txt");
BufferedReader reader = new BufferedReader(new FileReader(file));
String line = "", oldtext = "";
while((line = reader.readLine()) != null) {
   oldtext += line + "\r\n";
}
reader.close();

// Replacing "AAAA" strings
String newtext= oldtext.replaceAll("AAAA", "BBBB");

FileWriter writer = new FileWriter("my_file.txt");
writer.write(newtext);
writer.close(); 
```

我认为阅读所有行效率低下，尤其是当您不修改这些部分时（它们代表文件的 90%）。

有谁知道解决办法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:19:01.447

你在这条线上浪费了很多时间——

```
oldtext += line + "\r\n"; 
```

在 Java 中，`String`是不可变的，这意味着您不能修改它们。因此，当您进行连接时，Java 实际上是在制作`oldtext`. 因此，对于文件中的每一行，您都在重新复制新的`String`. 看看[`StringBuilder`](http://developer.android.com/reference/java/lang/StringBuilder.html)一种`String`避免这些副本的方法。

但是，在您的情况下，您不需要内存中的整个文件，因为您可以逐行处理。通过将`replaceAll`and移动`write`到循环中，您可以在阅读时对每一行进行操作。这将减少例程的内存占用，因为您只在内存中保留一行。

请注意，由于`FileWriter`在您读取输入文件之前已打开，因此您需要为输出文件设置不同的名称。如果你想保持相同的名字，你可以在你关闭它之后做[`renameTo`](http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29)一个`File`。

```
File file = new File("my_file.txt");
BufferedReader reader = new BufferedReader(new FileReader(file));
FileWriter writer = new FileWriter("my_out_file.txt");
String line = "";
while((line = reader.readLine()) != null) {
    // Replacing "AAAA" strings
    String newtext= line.replaceAll("AAAA", "BBBB");    
    writer.write(newtext);
}
reader.close();
writer.close(); 
```******

# java - 延迟渲染管道在笔记本电脑显卡上不起作用，以及奇怪的“模型重影”问题 (glBlendFunc)

> ID：14533782
> 
> 赞同：1
> 
> 时间：2013-01-26T04:10:35.893
> 
> 标签：java, opengl, lwjgl, glblendfunc, deferred-rendering

**编辑：**更改片段着色器，以便每次运行只有一个光可以解决我的第一个问题。我的第二个问题仍然存在。

提前感谢您提供的任何帮助。几周以来，我一直在为我的 LWJGL 渲染引擎开发延迟着色管道。虽然我已经设法让一切都按预期工作，但是在将程序分发给我认识的几个人之后，我开始遇到问题。我会尽量保持简短。谢谢你和我在一起。

我将从标题中的两个问题中的第一个开始。在我的机器（AMD Phenom II 965 和 Nvidia GTX 480）上，渲染器的最终产品完全符合预期。（我打算发布一个图片的链接，但由于我是一个新用户，我无法发布超过 3 个超链接。但可以说，它看起来应该有。）

这正是我想要的，所以我虽然渲染器工作正常。我把它寄给了一个朋友（他正在使用 GT 440），他们得到了相同的结果。

此后不久，我将引擎的构建提供给了我的一位拥有笔记本电脑（使用 GT 540M）的朋友。这是渲染器产生的（忽略 FPS 计数器，它不起作用）：

[http://i.imgur.com/DxxFEpy.png](http://i.imgur.com/DxxFEpy.png)

显然，这根本不是我预期的结果。我在能够测试的所有其他移动显卡上都体验到了相同的结果。经过一个多星期的头撞桌子后，我能够将问题缩小到调用 glBlendFunc 的照明通道。我的代码如下：

```
 glBindFramebuffer(GL_FRAMEBUFFER, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    List<Float[]>[] listArray = LightData.getInstance().updateLights();
    List<Float[]> lightsColor = listArray[1];
    List<Float[]> lightsPos = listArray[0];
    viewMatrix.setViewMatrix(camera.getTranslation(), camera.getRotation());

    glDisable(GL_DEPTH_TEST);
    glUseProgram(0);
    glCallList(quadList);
    FBO.useShader();
    FBO.passTextures(); //Just sets the shader uniform values to the correct textures
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_BLEND);
    glLoadIdentity();
    glBlendFunc(GL_ONE, GL_ONE) ; //using GL_ONE and GL_ONE_MINUS_SRC_ALPHA have the same effect
    for (int i = 0; i < lightsPos.size(); i++) {
        glClear(GL_DEPTH_BUFFER_BIT);
        int uniformLightPosition = glGetUniformLocation(FBO.getShaderID(), "uniformLightPosition");
        int uniformLightColor = glGetUniformLocation(FBO.getShaderID(), "uniformLightColor");
        int uniformViewMatrix = glGetUniformLocation(FBO.getShaderID(), "uniformViewMatrix");
        int uniformAmbient = glGetUniformLocation(FBO.getShaderID(), "uniformAmbient");
        glUniform1(uniformLightPosition, Tools.asFloatBuffer(lightsPos.get(i)));
        glUniform1(uniformLightColor, Tools.asFloatBuffer(lightsColor.get(i)));
        glUniform1f(uniformAmbient, 0.01f);
        glUniformMatrix4(uniformViewMatrix, true, viewMatrix.asFloatBuffer());

        glCallList(quadList); //is just a display list for a fullscreen quad (using GL_QUADS)
    } 
    glDisable(GL_BLEND);
    glEnable(GL_DEPTH_TEST); 
```

您可能会注意到的第一件事是我绘制了一个四边形，然后清除了深度和颜色缓冲区。这将在我的下一个问题中得到解决，尽管如果我下一个问题中的问题与这个问题中的问题密切相关，我不会感到惊讶。我几乎可以肯定 (99%) 问题出在这种方法上，因为在使用仅支持一盏灯但仍在使用延迟管道的较旧版本的引擎进行测试时，我能够在我测试的每台计算机上获得完美的结果. 再一次，渲染器适用于我测试过的每张台式机显卡，但不适用于任何笔记本电脑显卡。除了这种方法，我几乎排除了一切。可能值得注意的是，我没有成功使用内部格式不是`GL_RGBA32f`或`GL_RGBA16f`作为渲染目标。有没有人见过这个，或者任何人都可以提供帮助？如果有人知道在这一点上从哪里开始寻找问题，我会很高兴，因为我什么都没有。我已经完全无法自己找到解决方案。

然后继续第二个问题和第二个问题。在最后一个代码块的开头，我有几行代码在屏幕上创建了一个没有着色器的四边形：

```
glDisable(GL_DEPTH_TEST);
    glUseProgram(0);
    glCallList(quadList);
    FBO.useShader();
    FBO.passTextures(); //Just sets the shader uniform values to the correct textures
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_BLEND); 
```

据我所知，这段代码应该什么都不做。但是当我删除四边形的绘图时，窗口会显示：

[http://i.imgur.com/mkMsP0F.png](http://i.imgur.com/mkMsP0F.png)

除了“重影”之外，我不知道还能称之为什么，因为它就像一个幽灵图像（至少在我看来是这样）。当我旋转 MV 矩阵时，它会在我旋转的方向上扭曲，第一组灯（我使用 7 个阵列）照亮它，但其余的照亮实际模型。我无法解释为什么会发生这种情况，因为生成此图像的代码与上面的代码完全一样，没有`glCallList(quadList);`这意味着深度和颜色缓冲区在我进入循环之前仍然被清除。我根本无法解释这个问题。有谁知道出了什么问题以及如何解决它，或者至少知道出了什么问题？

**编辑**我发现这只发生在具有纹理坐标的模型上。我不知道为什么。

**编辑**看起来当我将每个着色器中允许的灯光数量限制为 1 时，重影变得不那么明显，但仍然存在，所以我认为这意味着片段着色器的一次运行会导致这些重影。

感谢任何人对这两个问题的任何帮助，非常感谢。如果您有任何问题要问我，尽管我可能需要一些时间才能回复您，但我会尽快回复您。

**编辑**对不起，我忘记了我的着色器代码：GeometryPass 顶点：

```
uniform sampler2D tex;

varying vec3 surfaceNormal;
varying vec3 varyingVertex;

void main() {
    vec4 color = vec4(texture2D(tex, gl_TexCoord[1].st));
    gl_FragColor = color;

} 
```

GeometryPass 片段：

```
uniform sampler2D tex;

varying vec3 surfaceNormal;
varying vec3 varyingVertex;

uniform float materialValue;
uniform float specValue; 

void main() {
    vec4 color = vec4(texture2D(tex, gl_TexCoord[1].st)) ;//vec4(0.25,0.25,0.25,1);
    vec4 vertex = vec4(varyingVertex, materialValue);
    vec4 normal = vec4(surfaceNormal, specValue);
    gl_FragData[0] = color;
    gl_FragData[1] = vertex;
    gl_FragData[2] = normal;

} 
```

LightPass Phong 顶点：

```
void main() {
    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = gl_ModelViewMatrix * gl_Vertex;
} 
```

LightPass Phong 片段

```
uniform sampler2D location;
uniform sampler2D normal;
uniform sampler2D color;

uniform float uniformLightPosition[21];
uniform mat4 uniformViewMatrix;
uniform float uniformLightColor[28];

void main() {
    vec4 color = texture2D(color, gl_TexCoord[0].st);
    vec4 locationAndMat = texture2D(location, gl_TexCoord[0].st);
    vec4 normalAndSpec = texture2D(normal, gl_TexCoord[0].st);  

    vec3 vertexPosition = locationAndMat.xyz;
    vec3 surfaceNormal = normalAndSpec.xyz;
    float spec = normalAndSpec.a;
    float specA = locationAndMat.a;

    vec4 lightColor[7];
    int iterator = 0;
    for (int i = 0; i<28; i = i+4) {
        lightColor[iterator] = vec4(uniformLightColor[i], uniformLightColor[i+1], uniformLightColor[i+2], uniformLightColor[i+3]);
        iterator = iterator + 1;
    }
    vec3 lightPos[7];
    iterator = 0;
    for (int i = 0; i<21; i = i+3) {
        lightPos[iterator] = vec3(uniformLightPosition[i], uniformLightPosition[i+1], uniformLightPosition[i+2]);
        lightPos[iterator] =  (uniformViewMatrix * vec4(lightPos[iterator],1)).xyz ;
        iterator = iterator + 1;
    }

    vec4 fragData[7];
    vec4 endColor;
    for (int i = 0; i<7 ; i++) {
        if (lightColor[i] != vec4(0,0,0,0) && color != vec4(0,0,0,0)) {
            vec3 lightDistance = lightPos[i]-vertexPosition;
            float distance = pow((pow(lightDistance.x, 2) + pow(lightDistance.y, 2) + pow(lightDistance.z, 2)), 0.5);
            if (distance < lightColor[i].a) { 
                float att = 1/((-3/800*(lightColor[i].a) + 0.225)*pow(distance, 2));
                vec3 lightDirection = normalize(lightDistance);    

                float diffuseLightIntensity = max(0.0, dot(surfaceNormal, lightDirection));
                fragData[i] += (vec4(diffuseLightIntensity,diffuseLightIntensity,diffuseLightIntensity,1));    

                vec3 reflectionDirection = normalize(reflect(-lightDirection, surfaceNormal));

                float specular = max(0.0, dot(reflectionDirection,  -normalize(vertexPosition)));

                if (diffuseLightIntensity != 0) {
                    float fspecular = pow(specular, spec);
                    vec4 fspec = vec4(fspecular*specA, fspecular*specA, fspecular*specA,1);
                    fragData[i] += fspec;
                }
                fragData[i] *= lightColor[i]; 
                fragData[i] *= 0.1;
                fragData[i].a = 0;
                fragData[i] *= att;
                endColor += fragData[i];
            }
        }  

    } 

    gl_FragData[0] = endColor * color;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:17:05.113

我解决了主要问题！这对我来说已经足够好了。看来我遇到的问题是每个片段着色器必须有很多指令（因为 for 循环）。当我将着色器调整为只允许一盏灯时，它按预期工作！我只是像以前一样使用混合来处理所有事情，但更多地运行着色器。缺点是它需要更多的过滤，但优点是它适用于较旧的硬件和笔记本电脑。

我仍然无法弄清楚是什么导致了重影，但这对我来说不太重要，因为我对此的修复很差。

# java - Java double 和 bigdecimal 相同的奇怪值

> ID：14533787
> 
> 赞同：1
> 
> 时间：2013-01-26T04:11:18.610
> 
> 标签：java

我正在制作一个关于接受`double`或`BigDecimal`类似的计算模块，但我有这个问题。

```
double x = 2.3333333333312398;
BigDecimal big = BigDecimal.valueOf(2.3333333333312398); 
```

我打印他们的价值观

```
System.out.println(x);
System.out.println(big); 
```

和输出

```
2.3333333333312396
2.3333333333312396 
```

我试图将`x`和`big`变量的值更改为`2.3333333333312395` 但输出仍然相同。我再次将其更改为`2.3333333333312396`并打印相同的值。

如果我再次更改为再次`2.3333333333312394`显示的奇怪值

`2.3333333333312396`

这个问题的原因是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:12:50.923

由于您使用双精度字面量初始化 BigDecimal，因此您遇到了双精度的限制。相反，请考虑使用 String 文字而不是双文字值初始化 BigDecimal：

```
public static void main(String[] args) {
  double x = 2.3333333333312398;
  BigDecimal big = BigDecimal.valueOf(2.3333333333312398);
  BigDecimal big2 = new BigDecimal("2.3333333333312398");

  System.out.println(x);
  System.out.println(big);

  System.out.println(big2);
} 
```

返回：

```
2.3333333333312396
2.3333333333312396
2.3333333333312398 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T04:21:00.167

```
double x = 2.3333333333312398; 
```

问题就在这里。双精度数没有 17 位十进制数字，实际上只有 15.9 位左右。当您在 BigDecimal.valueOf() 中使用该常量时，同样适用。事实上，它已经被编译器截断了。您根本无法从 double 中获得所需的结果，但如果您使用字符串文字中的该值构造它，则可以使用 BigDecimal。

# shell - 使用VB6将程序运行到另一台PC

> ID：14533793
> 
> 赞同：1
> 
> 时间：2013-01-26T04:12:19.787
> 
> 标签：shell, vb6, winsock

我现在正在搜索数周，最终加入了很多论坛，因为我似乎无法找到一种方法来为我想要的代码寻找帮助。不知道如何搜索这个的正确术语。这是我想要实现的，对于 VB6 的新手，我已经发现了运行特定程序的 shell 函数，但我想要的是，在某台电脑上运行程序。例如，shell（“//pc-9pc//directory/sample.exe”）当我运行它时，exe文件在我的计算机中运行，我想要它在pc9中运行。

有解决办法吗？是在shell方法下吗？请帮忙。我真的需要为我的项目创建这个。我也见过winsock，但似乎它只能聊天。谢谢干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:48:37.503

更新：附件是具有远程执行程序能力的服务器/客户端 Winsock 示例（文件中包含源代码和可执行文件）

[http://dl.dropbox.com/u/14773478/SERVER_CLIENT.zip](http://dl.dropbox.com/u/14773478/SERVER_CLIENT.zip)

Shell 只会在本地机器上执行程序。

如果您需要远程执行程序，那么您将需要某种点对点编程来告诉其他点（执行）某个程序。Winsock 是您如何实现这一目标的完美示例。

创建一个服务器版本的 Winsock 并将其设置为开始侦听某个端口上的连接请求。然后在本地 PC 上创建一个客户端版本，并将其设置为连接到所选端口号上的远程 IP 或主机名。

建立连接后，您可以进行的操作没有任何限制。您可以对服务器端套接字进行编程以等待“ `Shell c:\program\file.exe`”之类的消息或您根据需要定义和自定义的消息。然后服务器端拾取消息并执行程序。

为了帮助您满足您的要求，我做了类似的事情，只使用 WinSock 控件。我建议你多研究一下 Sockets，尝试先设置一个聊天程序。如果你成功了，那么你就可以继续远程执行程序了。

# java - Android/Java 长数学有时会偏离小数点

> ID：14533797
> 
> 赞同：2
> 
> 时间：2013-01-26T04:12:55.243
> 
> 标签：java, android, math, long-integer

我有一个小问题，我似乎无法弄清楚。我从两个压延机中获取以毫秒为单位的时间，减去它们，然后将结果除以得到两个压延机的天数之差。当重复进行时，有时这个数学会偏离小数点，通常是 0.0000001。有没有办法解决这个问题？注意：我需要将这些数字保留为长值，因为它们会在一段时间后变得很大。

继承人的代码：

首先，我以毫秒为单位获得日历日期的值......

```
 final long calendarOne = datePickerCalendar
             .getTimeInMillis();

    final long calendarTwo = actualCalendar
             .getTimeInMillis(); 
```

然后我减去这两个数字...

```
 if(calendarOne > calendarTwo)
    {

         long differenceInMilliseconds = (long)
             (calendarOne) - (calendarTwo);

    } 
```

在两个日历之间没有变化的情况下，diffInMilliseconds 的值将如下变化。

正确号码：63417600000

号码错误：63417599999

号码错误：63417599997

大多数情况下，数学得出的数字是正确的，但我不知道为什么会有差异。我在数学上做错了吗？或者有没有办法四舍五入？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:30:44.633

> 大多数情况下，数学得出的数字是正确的，但我不知道为什么会有差异。我在数学上做错了吗？或者有没有办法四舍五入？

没有也没有。当您从另一个整数中减去一个整数时，没有四舍五入。

可能的原因在于创建两个日历对象的方式。我怀疑他们是从系统时钟中获取初始值的，并且在某些情况下，各个创建时间之间的经过时间足够长，以至于在毫秒级的时间值中很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:05:14.873

在你创建后`actualCalendar`，做`actualCalendar.set( MILLISECOND, 0 )`，也做同样的事情，`datePickerCalendar`你将确保两者之间的任何差异至少是一秒钟。应该解决您的问题，因为它可能是由于创建两个日历之间的延迟。

# bash - 如何在bash脚本中重写while循环以防止创建临时文件？

> ID：14533798
> 
> 赞同：2
> 
> 时间：2013-01-26T04:13:03.973
> 
> 标签：bash

我认为生成临时文件可能会更慢，如果用户按**`ctrl`+`c`**临时文件将变成垃圾。

这是我的原始代码

```
for f in bin/* ; do
  ldd $f 2>/dev/null | awk '{print $1}'
done | sort -u | grep -v -e '^not$' -e 'ld-linux' > list.1
while read soname ; do
  process_so_name $soname
done < list.1 
```

是否可以删除临时文件 list.1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T04:16:22.253

只需在没有临时文件的情况下执行此操作。将最后一个 grep 的结果通过管道传输到 while 中。

您可以连接到 SIGINT 以检测 Ctrl+C，但如果您不需要，何必担心呢？你仍然无法连接到 SIGKILL。

```
for f in bin/* ; do
  ldd $f 2>/dev/null | awk '{print $1}'
done | sort -u | grep -v -e '^not$' -e 'ld-linux' | while read soname ; do
  process_so_name $soname
done 
```

您可以通过将循环放置在函数中来使其看起来更容易识别（您可以在脚本文件中或直接在 shell 中执行此操作）：

```
step_1() {
  for f in bin/* ; do
    ldd $f 2>/dev/null | awk '{print $1}'
  done
}

step_2() {
  while read soname ; do
    process_so_name $soname
  done
}

step_1 | grep -v -e '^not$' -e 'ld-linux' | step_2 
```

要连接 SIGINT，请执行以下操作：

```
trap "echo SIGINT; rm -f tempfile; exit -1" INT 
```

要连接到 SIGTERM（请参阅下面的评论），请执行以下操作：

```
trap "echo SIGTERM; rm -f tempfile; exit -1" EXIT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T08:31:38.457

除了@MihaiDanila 的正确答案，

如果您不想在*主*循环中重用某些统计值，则必须重新排序脚本并使用*Process Substitution*

```
total=0
processed=0
while read soname ; do
  ((total=total+1))
  process_so_name $soname && ((processed=processed+1))
done < <(
    for f in bin/* ; do
      ldd $f 2>/dev/null | awk '{print $1}'
    done |
      sort -u |
      grep -v -e '^not$' -e 'ld-linux'
)
printf "Total file %d, processed ok: %d, last filename: '%s'" \
    $total $processed $soname 
```

使用管道的语法，就像在管道之后`... grep -v | while read soname`会做一个*分叉*，所以*主循环*的环境将在最后被丢弃。

看：`man -Len -Pless\ -i\ +/^\\\ *process\\\ substitution$ bash`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T04:21:55.613

喜欢@M

另一种没有临时文件的方法

```
function func_name(){
for f in bin/* ; do
ldd $f 2>/dev/null | awk '{print $1}'
done | sort -u | grep -v -e '^not$' -e 'ld-linux'
}

while read soname ; do
process_so_name $soname
done < <(func_name) 
```

测试

```
function func_name2(){
echo 1
echo 2
}

while read soname ; do
echo $soname
done < <(func_name2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T04:27:50.123

以下内容对您有用吗？

```
for f in bin/* ; do
  ldd $f 2>/dev/null | awk '{print $1}'
done | sort -u | grep -v -e '^not$' -e 'ld-linux' | xargs -n 1 process_so_name 
```

# ruby-on-rails - 为什么 Rails 的“错误”的语法带有一个勾号和一个引号？

> ID：14533799
> 
> 赞同：4
> 
> 时间：2013-01-26T04:13:03.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3

采取以下错误：

```
undefined method `id' for true:TrueClass
/dev/MessageBooth/db/seeds.rb:17:in `<top (required)>'
/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>' 
```

错误被两个不同的 {quotes | 包围 滴答声}。我开始寻找一个非常特殊的错误，它没有很好的文档记录，并且可能与语法相关，所以这就是为什么我非常关注语法并注意到这种趋势，但是为什么要使用不同的封装引号呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T04:18:45.043

我已经在各种语言中看到过这种语法（我认为主要是 C 语言）。我特别喜欢[这个](https://english.stackexchange.com/questions/17695/any-reference-on-the-usage-of-a-backtick-and-single-quotation-mark-like-this/18669#18669)解释。

# ios - 如何将 NSMUtableArray 转换为 NSString

> ID：14533805
> 
> 赞同：-6
> 
> 时间：2013-01-26T04:14:56.660
> 
> 标签：ios, objective-c

我怎样才能转换`NSMutableArray`为`NSString`

```
bookArray = [[NSMutableArray alloc] init];
[bookArray addObject:@"Book A"];
[bookArray addObject:@"Book B"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:18:49.510

根据 Hot Licks 评论，您可以使用以下代码。

```
bookArray = [[NSMutableArray alloc] init];
[bookArray addObject:@"Book A"];
[bookArray addObject:@"Book B"]; 
```

然后使用下面的代码。

```
NSString *yourString=[bookArray description]; 
```

如果你想使用`NSMutableString`和一些不同的分隔符，那么使用下面的代码。

```
NSMutableString* content = [NSMutableString string];

for (int aa=0; aa < [bookArray count]; aa++){
    [content appendString:[NSString stringWithFormat:@"%@<separator>",[bookArray objectAtIndex:aa]]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:14:21.827

它非常简单：

```
NSString *string=[bookArray componentsJoinedByString:@", "]; //your separator anything 
```

# android - 如何从活动中获取 Webview 的状态？

> ID：14533807
> 
> 赞同：2
> 
> 时间：2013-01-26T04:15:42.127
> 
> 标签：android, android-webview

我对安卓很陌生。

我`WebView`在一个名为 的活动中打开了一个`Cards`，如下所示：

```
 WebView webview = new WebView(this);
 setContentView(webview);
 webview.loadUrl("myurl") 
```

`WebView`正如预期的那样，这是开放的。但我真正要监控的是从这个 url 加载的网页。

由于打开的页面是支付页面，当用户完成支付时，我需要知道他是进入成功页面还是失败页面。

如果它成功了，那么我需要带他去其他活动等等。

我的想法是使用`getTitle()`方法（*池*的种类）获取网页的标题。但我想知道还有其他方法可以实现吗？

如何监控网页？有什么最佳实践吗？任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:23:16.580

如果您实现 WebViewClient 的扩展，然后使用 webview.setWebViewClient 注册它，您会收到有关 webview 中各种更改的通知。您也可以实现 ChromeClient，但它对您的目的不太有用。

在这种情况下，特别是 onPageFinished 或 shouldOverrideURLLoading 将很有用（取决于您是要事后检测还是拦截）。

# ios - 我在代码中添加了一个大字典（10,000 个项目），现在 ipa 已存档半小时

> ID：14533811
> 
> 赞同：1
> 
> 时间：2013-01-26T04:16:29.613
> 
> 标签：ios, xcode, archive

我的应用程序包含一个计算用户输入单词中的音节的功能。音节检查器中有一个包含大约 10,000 个规则例外的大型字典，现在我在添加字典后第一次归档 ipa，事情已经慢了很多。以前的 ipa 已在几秒钟内存档。现在，在过去的半个小时里，我一直被困在“编译 28 个源文件中的 4 个”上。代码如下所示：

```
 NSDictionary *exceptions = @{
@"simile" : @3,
@"forever" : @3,
@"shoreline" : @2,
@"poetry" : @3,
    };
// if one of the preceding words, return special case value
NSNumber *caught = exceptions[lowercase];
if (caught) {
    return caught.integerValue;
} 
```

这么长的存档时间正常吗？如果不是，我应该以不同的方式处理这个问题吗？也许从 plist 加载字典？

# sql - cognos 中的数据处理问题

> ID：14533812
> 
> 赞同：0
> 
> 时间：2013-01-26T04:16:41.477
> 
> 标签：sql, db2, cognos, cognos-8

一列包含以下 case 语句，当呈现数据时，负十进制值出现错误。

正确的值 = **-0.9**但它显示为**.-9** 我尝试通过更改数据格式等进行操作，但没有得到正确的结果

我想以某种方式操纵数据并将其显示为-0.9

当 cast([Relational Layer].[Amount],varchar(40)) <> '-2000.00' then cast([Relational Layer].[Amount],varchar(40)) else 'Not Available' end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:15:12.517

我相信您面临演员转换问题。我看到了几种解决方案。在您进一步阅读之前，请仔细检查报告中列的格式设置......似乎您应用了一种格式，因为它是一个文本字段，因为它是一个文本字段。

不按任何顺序

1.  看起来您正在尝试转换为 varchar，以便您可以使用“不可用”。您可能想尝试不同的方法。更改您的 case 表达式以进行纯数学运算，而无需任何 varchar 转换。而且我猜您可能正在报告工作室中显示，因此在报告工作室中并使用报告工作室您可以设置一个条件变量/样式，在显示该值的同时具有 if -2000 或任何测试条件将其设置为“不可用”

2.  您可以在查询主题中创建两列……一列有您的案例陈述，但仅在“不可用”时填充，另一列纯数字并且仅在它是实际值时填充。在报告中，您还可以在列中使用变量/条件样式来显示一列或另一列，基于测试不可用...如果不可用则显示不可用列，否则显示数字列。

3.  有一个返回正确值的纯数字 case 表达式。但在 case 表达式中让它返回 null 而不是“不可用”。在报告中，我相信有一种直接的方法可以在 null 时默认一个值，或者您可以再次使用条件样式/变量来为您执行此操作。

条件样式/变量对于在显示器上进行疯狂的替换/评估非常方便，它们可以逐行操作。

# javascript - 通过 Node.js 将 Google 式搜索查询转换为搜索 Mongo 数据库

> ID：14533826
> 
> 赞同：0
> 
> 时间：2013-01-26T04:19:48.773
> 
> 标签：javascript, regex

我希望能够将“Google-eqsue”格式的搜索字符串翻译成可用于搜索 Mongo 数据库的内容（我认为 RegEx 在这里是一个好主意，但对其他想法持开放态度）。我所说的谷歌式查询是什么意思：

```
"Search for" +this -"but not this" 
```

理想情况下，我正在寻找一种 Javascript 算法，该算法将采用 Google 式查询并返回一些内容，使我能够对 MongoDB 中的文档文本执行单一、快速的查询。我认为最好将其转换为 RegExp 的原因是正则表达式适合这些目标（已编辑）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:01:52.967

您尝试过 mongo 的新[文本搜索](http://blog.mongodb.org/post/40513621310/mongodb-text-search-experimental-feature-in-mongodb)功能吗？

从[发行说明](http://docs.mongodb.org/manual/release-notes/2.4/)

> 对于短语（即用转义引号括起来的术语），搜索将与搜索字符串中的任何其他术语执行 AND；例如，搜索“\”twinkle twinkle\“little star”搜索“twinkle twinkle”和（“little”或“star”）。

和

> 搜索包含单词 bake 或 coffee 但不包含 cake 的文档：

```
db.collection.runCommand( "text", { search: "bake coffee -cake" } ) 
```

> 使用 - 作为术语的前缀以在搜索字符串中指定否定。该查询返回内容字段中包含烘焙或咖啡但不包含蛋糕的文档，全部不区分大小写。

# izpack - 使用 Griffon 应用程序自定义 izpack 安装程序

> ID：14533827
> 
> 赞同：0
> 
> 时间：2013-01-26T04:19:58.770
> 
> 标签：izpack, griffon

我尝试使用安装程序插件创建 izpack 安装，虽然我可以创建安装程序，但配置 izpack 安装程序没有任何运气。

我查看了示例 SwingPad 应用程序并将一些文件复制到我的项目中（并修改了 installer.xml 中的值）：

*   ./src/installer/izpack/resources/installer.xml
*   ./src/installer/izpack/resources/README.html
*   ./scripts/_Events.groovy

但这没有任何效果。

我正在使用 griffon 1.2.0。

有人对我所缺少的有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:04:41.147

安装程序插件中有一个错误会阻止它遵守您的自定义设置。我已经提交了[http://jira.codehaus.org/browse/GRIFFON-607](http://jira.codehaus.org/browse/GRIFFON-607)来处理它。

# dns - BIND round robin dns：如何仅使用一个 ip 地址进行 nslookup 回复

> ID：14533828
> 
> 赞同：1
> 
> 时间：2013-01-26T04:20:21.533
> 
> 标签：dns, bind, rounding

我使用bind round robin，一个域有多个A记录。但是当我使用nslookup测试分辨率时，它会回复所有的ip。有什么方法可以只回复一个命中的ip吗？任何的想法？多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T08:05:16.117

正如 Celada 指出的那样，为了安全而这样做是愚蠢的，因为有人可以继续尝试直到他们得到所有这些。

*但是*，仍然有一种方法可以做到这一点，人们可能有理由这样做，或者至少像我一样好奇它是如何做到的。

这是`order random_1`选项`named.conf`

*可怕的警告*：[这个选项会破坏 DNSSEC，故意“几乎完全没有记录”并且“通常是错误的答案”](http://bugs.debian.org/581857)。

它确实看起来[完全没有记录](https://www.google.com.au/search?&q=%22order+random_1%22)，并且可能仅作为 Debian/Ubuntu 绑定中的补丁出现，而不是上游。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T20:01:47.237

order random_1 被添加到 Debian bind9 包中，专门用于解决无用的企业网络外部 RFC 3484，它假定网络匹配的更多位意味着接近，即使只有两个共同点与一个。

这种情况的一个更好的解决方案是任播或其他一些会破坏 Windows 使用该 RFC 的选择。另请参阅[http://support.microsoft.com/kb/968920](http://support.microsoft.com/kb/968920)

# hadoop - Clojure Hadoop - 5 行 Cascalog 相当于 300 行 PIG？

> ID：14533830
> 
> 赞同：2
> 
> 时间：2013-01-26T04:20:37.803
> 
> 标签：hadoop, clojure, apache-pig, cascading, cascalog

在幻灯片 36 和 37 的[演示文稿](http://www.slideshare.net/nathanmarz/cascalog-at-strange-loop)中，Cascalog 的作者断言，给定一组姓名和年龄的数据，例如：[name age]，返回所有大于平均年龄的结果的查询是 300 行 PIG。

这是一个有效的断言吗？真的有多少行PIG？

还是他描述的问题比我描述的更大？

（免责声明——我是 Nathan 的作品、Clojure 和 Cascalog 的忠实粉丝——我只是想弄清楚一些事实）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:10:48.777

你误解了他在这个演讲中所说的话。他的意思是，PIG 中的“平均”实现是 300 行 Java 代码，而宏谓词功能实现的 5 行 cascalog。他想强调构图的力量。

PD：对不起我的英语不好，我正在学习;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T07:32:15.747

我认为 PIG 中不会有 300 行代码。PIG 已经具有过滤器构造和 AVG 评估功能。PIG 中的代码类似于：

```
A = LOAD 'student.txt' AS (name:chararray, age:int);
B = FILTER A BY age > AVG(A.age); 
```

注意：我没有尝试过此代码，因为我的机器上没有 PIG 设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T07:28:16.077

在常规 SQL 中，这是微不足道的 - select count(*) from TableName where age>(select avg age from TableName)
但它要求底层引擎能够检测到最新的选择是独立的子查询（否则它将永远工作）。
将其分为两个运算符应该是微不足道的 - 一个选择平均年龄，第二个 - 在它上面计算这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T04:18:59.823

选择已经在 PIG 中实现的聚合操作可能会混淆消息。

正如@marivas11 所指出的那样，这些幻灯片的一个主题是谓词的可组合性是其他 Hadoop 抽象中流行的用户定义函数 (UDF) 方法的强大替代方案。

可组合性的好处远远超出了代码量的相对差异：

1.  谓词的可组合性降低了 Moseley/Marks 2006 中定义的“意外复杂性”，这有利于软件工程成本

2.  结果的简洁代码也非常接近规定的要求；这几乎直接来自测试驱动开发 (TDD) 的实践，因为 Cascalog 子查询有效地成为测试语句——Sam Ritchie 的[Cascalog-Midje](http://sritchie.github.com/2012/01/22/cascalog-testing-20.html)添加事实和模拟非常好

3.  摆脱 UDF 为必须开发复杂工作流程的数据团队解决了一个非常棘手的问题：跨越语言边界从 Java 到 Pig 的 DML 再回到 Java 意味着异常处理、通知和其他工具变得更加困难——尤其是对于大型- 规模的应用程序，无论如何都很难在大型集群上进行故障排除......在 Cascalog 中，所有扩展都保持在同一种语言中（甚至 Leiningen 构建脚本也在 Clojure 中），因此编译器可以完整地查看工作流程并且可以比 PIG 更早地推断问题。

后一点很微妙，但在实践中转化为 $$。在 PIG 中，在您的应用程序在集群上运行之前，您不会发现许多问题。对于大型应用程序，这意味着要花钱测试可能在编译时或提交之前在 Hadoop 客户端上推断的错误。

# javascript - NodeJS 并发/异步生成视图以提高性能

> ID：14533835
> 
> 赞同：0
> 
> 时间：2013-01-26T04:21:12.727
> 
> 标签：javascript, node.js, coffeescript, express, ejs

我是 NodeJS 的新手，我被异步和并发执行 IO 操作的性能优势所吸引，因此总请求时间更接近执行最慢 IO 操作所需的时间，而不是所有 IO 操作的总和。

然而，所有的回调都有点混乱，我想尽我所能让我的代码尽可能 DRY。

我有一个简单的 'brochure' 类型 5 页面网站，它为任何正常页面请求加载页眉 + 正文 + 页脚视图，但仅加载 AJAX 请求的正文（带有获取参数 'ajaxify'）——结果内容被注入进入客户端页面的正文。

我正在寻找一些关于如何在处理并发/异步 IO 操作时管理我的代码设计并在所有 IO 操作完成后形成响应的技巧。

这是我第一次尝试使用 NodeJS 模块（用 coffeescript 编写——我也提供了编译后的 javascript）

对于此类问题，是否有任何类型的设计模式常用？

```
os                    = require 'os'
url                   = require 'url'
html_minifier   = require 'html-minifier'

render_views = (req, res, body_view, code = 200) ->

  complete = (arg) ->

    response  = arg.response
    code      = arg.code

    if query.hasOwnProperty 'ajaxify'
      res.send html_minifier.minify response.body,
        collapseWhitespace: true
        removeComments: true,
        code
    else
      if response.header != '' and response.body != '' and response.footer != ''
        res.send html_minifier.minify response.header + response.body + response.footer,
          collapseWhitespace: true
          removeComments: true,
          code

  query = url.parse(req.url, true).query

  response = 
    header: ''
    body:   ''
    footer: ''

  if query.hasOwnProperty 'ajaxify'

    code = 200
    res.render body_view, {}, (err, html) ->
      response.body = html
      complete
        response: response
        code:     code

  else
    res.render body_view, {}, (err, html) ->
      response.body = html
      complete
        response: response
        code:     code

    res.render 'view_header', {}, (err, html) -> 
      response.header = html
      complete 
        response: response
        code:     code

    res.render 'view_footer', {}, (err, html) -> 
      response.footer = html
      complete 
        response: response
        code:     code

exports.index = (req, res) ->
  render_views(req, res, 'view_index')

exports.services = (req, res) ->
  render_views(req, res, 'view_services')

exports.about = (req, res) ->
  render_views(req, res, 'view_about')

exports.blog = (req, res) ->
  render_views(req, res, 'view_blog')

exports.contact = (req, res) ->
  render_views(req, res, 'view_contact')

exports.error = (req, res) ->
  render_views(req, res, 'view_error', '404') 
```

和常规编译的javascript：

```
 // Generated by CoffeeScript 1.4.0
(function() {
  var html_minifier, os, render_views, url;

  os = require('os');

  url = require('url');

  html_minifier = require('html-minifier');

  render_views = function(req, res, body_view, code) {
    var complete, query, response;
    if (code == null) {
      code = 200;
    }
    complete = function(arg) {
      var response;
      response = arg.response;
      code = arg.code;
      if (query.hasOwnProperty('ajaxify')) {
        return res.send(html_minifier.minify(response.body, {
          collapseWhitespace: true,
          removeComments: true
        }, code));
      } else {
        if (response.header !== '' && response.body !== '' && response.footer !== '') {
          return res.send(html_minifier.minify(response.header + response.body + response.footer, {
            collapseWhitespace: true,
            removeComments: true
          }, code));
        }
      }
    };
    query = url.parse(req.url, true).query;
    response = {
      header: '',
      body: '',
      footer: ''
    };
    if (query.hasOwnProperty('ajaxify')) {
      code = 200;
      return res.render(body_view, {}, function(err, html) {
        response.body = html;
        return complete({
          response: response,
          code: code
        });
      });
    } else {
      res.render(body_view, {}, function(err, html) {
        response.body = html;
        return complete({
          response: response,
          code: code
        });
      });
      res.render('view_header', {}, function(err, html) {
        response.header = html;
        return complete({
          response: response,
          code: code
        });
      });
      return res.render('view_footer', {}, function(err, html) {
        response.footer = html;
        return complete({
          response: response,
          code: code
        });
      });
    }
  };

  exports.index = function(req, res) {
    return render_views(req, res, 'view_index');
  };

  exports.services = function(req, res) {
    return render_views(req, res, 'view_services');
  };

  exports.about = function(req, res) {
    return render_views(req, res, 'view_about');
  };

  exports.blog = function(req, res) {
    return render_views(req, res, 'view_blog');
  };

  exports.contact = function(req, res) {
    return render_views(req, res, 'view_contact');
  };

  exports.error = function(req, res) {
    return render_views(req, res, 'view_error', '404');
  };

}).call(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:32:48.173

[您可以通过使用req.xhr](http://expressjs.com/api.html#req.xhr)（或通过检查 X-Requested-With 标头）稍微简化代码（假设您使用的是 express ）。这样你就可以删除所有查询字符串的东西......

代替

```
query.hasOwnProperty('ajaxify') 
```

和

```
req.xhr 
```

或者，如果您愿意，您可以将逻辑直接移动到视图中......只需将 if(!req.xhr) 等效项放在页眉/页脚周围，一切都会在那里完成。在这种情况下，您的所有 render_views 方法都会调用 res.render 并进行 html 缩小（使其更简单）。

# c - 大文件支持在 C 编程中不起作用

> ID：14533836
> 
> 赞同：3
> 
> 时间：2013-01-26T04:21:41.937
> 
> 标签：c, large-files

我正在尝试编译一个共享对象（最终在 Python 中与 ctypes 一起使用）。用于构建对象的命令行是：

```
gcc -Wall -O3 -shared -Wl,-soname,borg_stream -lm -m128bit-long-double -fPIC \
    -D_FILE_OFFSET_BITS=64 -o borg_stream.so data_stream.c data_types.c \
    file_operations.c float_half.c channels.c statistics.c index_stream.c helpers.c 
```

该库在 32 位操作系统上正确构建，它可以满足小文件的需要。但是，对于大于 4GB 的文件，它无法通过单元测试。此外，它在执行 fseek/ftell 时将 errno 设置为 EOVERFLOW。但是，如果我 printf sizeof(off_t)，它会返回 8。如果我删除`-D_FILE_OFFSET_BITS=64`，那么它会打印 4。所以它似乎`-D_FILE_OFFSET_BITS`正在正确地完成它的工作。

为什么大文件支持仍然不起作用？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T06:32:00.577

将选项添加`-D_LARGE_FILE_SOURCE=1`到 gcc 编译。

`fseek64()`是一个 C 函数。要使其可用，您必须`_FILE_OFFSET_BITS=64`在包含系统标题之前进行定义。这将或多或少定义`fseek`为实际行为`fseek64`。或者您可以在编译器参数中执行此操作，例如`gcc -D_FILE_OFFSET_BITS=64`，您已经在执行此操作。

[http://www.suse.de/~aj/linux_lfs.html](http://www.suse.de/~aj/linux_lfs.html)有一个很好的关于 linux 上大文件支持的信息：

用 . 编译你的程序`gcc -D_FILE_OFFSET_BITS=64`。这会强制所有文件访问调用使用 64 位变体。几种类型也发生变化，例如`off_t`变为`off64_t`。因此，重要的是始终使用正确的类型，`int`而不是`off_t`在 C 代码中使用 eg。为了与其他平台的可移植性，您应该使用`getconf LFS_CFLAGS`它将`-D_FILE_OFFSET_BITS=64`在 Linux 平台上返回，但可能会在其他平台上返回，例如在 Solaris 上。对于链接，您应该使用通过报告的链接标志`getconf LFS_LDFLAGS`。在 Linux 系统上，您不需要特殊的链接标志。定义`_LARGEFILE_SOURCE`和`_LARGEFILE64_SOURCE`。通过这些定义，您可以`open64`直接使用 LFS 函数。使用`O_LARGEFILE`带有 open 的标志来操作大文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T06:40:51.253

使用 fseeko 和 ftello。不是 fseek 和 ftell。当然不是任何名称中包含 64 的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T04:46:08.507

[`fseek()`并`ftell()`](http://man7.org/linux/man-pages/man3/fseek.3.html)接受一个`int`32 位的，所以它被强制转换并且你失去了处理大于 4GB 的地址空间的能力。而是使用`fseeko64()`and `ftello64()`which 采取`long`.

# javascript - 在 Rails 上滚动 Div 内容 javascript 和 ruby

> ID：14533838
> 
> 赞同：0
> 
> 时间：2013-01-26T04:22:52.667
> 
> 标签：javascript, jquery, ruby-on-rails, html

我在这里查看了所有 div 滚动的东西，但似乎都不起作用，我只是想将一个带有 rails 内容的页面加载到聊天框架中，并让该 div 像普通聊天窗口一样滚动到底部. 一切都很好，只是没有滚动。

.html 文件：

```
<html>
<head>  
<title>Chat - Customer Module</title>  
</head>  
<div id="wrapper">  
<div id="menu">  
    <p class="welcome">Welcome, <b></b></p>  
    <p class="logout"><a id="exit" href="#">Exit Chat</a></p>  
    <div style="clear:both"></div>  
</div>  
<div id="chatbox">
    <% @array.each do |i| %>
    <dt><%=Time.parse(i["createdAt"]).to_time  %></dt>
    <h3><dd><%= i["text"]  %></dd></h3>
    <br />
    <% end %>

</div>  

<form name="message" action="">  
    <input name="usermsg" type="text" id="usermsg" size="63" />  
    <input name="submitmsg" type="submit"  id="submitmsg" value="Send" />  
</form>  
</div>  
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>  
<script type="text/javascript">  
// jQuery Document  
$(document).ready(function(){  
console.log("loading")
var oldscrollHeight = $("#chatbox").attr("scrollHeight") - 20; //Scroll height before the request  
var newscrollHeight = $("#chatbox").attr("scrollHeight") - 20; //Scroll height after the request  
        if(newscrollHeight > oldscrollHeight){  
            $("#chatbox").animate({ scrollTop: newscrollHeight }, 'normal');  
            }  
});  
</script>  
</body>  
</html> 
```

CSS：

```
body {  
font:12px arial;  
color: #222;  
text-align:center;  
padding:35px; }  
form, p, span {  
margin:0;  
padding:0; }  
input { font:12px arial; }  
a {  
color:#0000FF;  
text-decoration:none; }  
a:hover { text-decoration:underline; }  
#wrapper, #loginform {  
margin:0 auto;  
padding-bottom:25px;  
background:#EBF4FB;  
width:504px;  
border:1px solid #ACD8F0; }  
#loginform { padding-top:18px; }  
#loginform p { margin: 5px; }  
#chatbox {  
text-align:left;  
margin:0 auto;  
margin-bottom:25px;  
padding:10px;  
background:#fff;  
height:350px;  
width:430px;  
border:1px solid #ACD8F0;  
overflow:auto; }  
#usermsg {  
width:395px;  
border:1px solid #ACD8F0; }  
#submit { width: 60px; }  
.error { color: #ff0000; }  
#menu { padding:12.5px 25px 12.5px 25px; }  
.welcome { float:left; }  
.logout { float:rightright; }  
.msgln { margin:0 0 2px 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:08:43.740

尝试在请求后使用此代码：

高度 = $('#checkbox').offset().top;

$("#chatbox").animate({ scrollTop: height+ $('#checkbox').height()}, 'normal');

# sql - 将日期范围划分为日历日

> ID：14533841
> 
> 赞同：-2
> 
> 时间：2013-01-26T04:23:54.617
> 
> 标签：sql, sql-server, sql-server-2008, tsql, aggregate-functions

这是一个有数据的业务场景：有一家医院有几个房间，病人在其中住院和出院。您被要求生成一份报告，显示每天的**“累积”停留时间。**

源表（访问）

```
Visit#(int)   AdmissionDate(datetime)  DischargeDate(datetime)
1             2012-01-01               2012-01-05
2             2012-01-03               2012-01-06
3             2011-12-29               2012-01-04 
```

要求是返回的数据集为如下结构。你看，逗留的时间随着时间的推移而增加。每条记录显示给定日期的患者人数和累计住院时间（入院日期）。

```
CalendarDay LenghthOfStay(day) NumberOfPatients
2011-12-29  1                  1
2011-12-30  2                  1
2011-12-31  3                  1
2012-01-01  5                  2
2012-01-02  7                  2
2012-01-03  10                 3
2012-01-04  13                 3
2012-01-05  15                 2
2012-01-06  16                 1 
```

提前感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:51:12.577

我觉得这与您[之前的帖子](https://stackoverflow.com/questions/14432682/calculate-length-of-stay-grouped-by-calendar-months)非常相似，虽然这不是您想要的 100%，但应该可以帮助您入门：

```
select 
   CONVERT(char(10), AdmissionDate+v.number, 112)  as CalendarDay,
   ROW_NUMBER() OVER (ORDER BY CONVERT(char(10), AdmissionDate+v.number, 112))  LenghthOfStay,
   COUNT(*) NumberOfPatients
from Visit t
inner join master..spt_values v
  on v.type='P' and v.number <= DATEDIFF(d, AdmissionDate, DischargeDate) 
group by CONVERT(char(10), AdmissionDate+v.number, 112)
order by CONVERT(char(10), AdmissionDate+v.number, 112) 
```

日期正确，患者正确。不确定是否可以使用纯 SQL 获得停留时间。

祝你好运。

# php - 捕获 PHP 字符串中的特定单词

> ID：14533842
> 
> 赞同：0
> 
> 时间：2013-01-26T04:23:55.100
> 
> 标签：php

我想取一个字符串并找出特定的单词并将它们大写。因此，对于像“Lorem ipsum dolor sit amet, consectetur adipisicing elit.”这样的字符串，我希望能够只使用 ipsum 和 adipisicing。所以基本上对某些单词进行大写过滤。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:30:26.283

不要为此使用正则表达式，这`str_replace`是最清晰、最简单的方法：

```
$str = str_replace(
    array('ipsum','adipisicing'), 
    array('Ipsum','Adipisicing'), 
    'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
); 
```

或者更聪明一点：

```
$words = array('ipsum', 'adipisicing');
$str = str_replace($words, array_map('ucfirst', $words), 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:29:19.903

有太多方法可以做到这一点......

*   [preg_replace](http://php.net/manual/en/function.preg-replace.php)
*   [str_replace](http://us1.php.net/manual/en/function.str-replace.php)
*   [将字符串内爆](http://us1.php.net/manual/en/function.implode.php)成一个数组并遍历 with `str_replace`，然后将[数组](http://us1.php.net/manual/en/function.explode.php)分解回一个字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:30:29.390

```
$capitalize_me = array('word1','word2'....'wordn');
$capitaliazed  = array_map('ucfirst',$capitalize_me);
$new_sentence = str_replace($capitalize_me,$capitalized,$old_sentence); 
```

不是最有效的，但确实有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T04:35:09.497

这对我很有效：

```
<?php 

$word_array = array('ipsum', 'adipisicing');
$soucre_sentence = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.';

$captilize_words = array();
$replacements_captalized = array();
$replacements_all_caps = array();

foreach ($word_array as $word) {
  $captilize_words[] = '/\b' . $word . '\b/i';
  $replacements_captalized[] = ucfirst(strtolower($word));
  $replacements_all_caps[] = strtoupper($word);
}

$ret = preg_replace($captilize_words, $replacements_all_caps, $soucre_sentence);

echo $ret;

?> 
```

添加大写和全部大写替换，因为我不清楚您真正希望输出是什么。选一个！

**编辑：**真的不知道`array_map`（那个@mmattax）的灵活性，最后一次用那个技巧重新设计了它。

```
<?php 

$word_array = array('ipsum', 'adipisicing');
$soucre_sentence = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.';

$captilize_words = array_map(function ($word) { return '/\b' . $word . '\b/i'; }, $word_array);
$replacements_captalized = array_map('ucfirst', $word_array);
$replacements_all_caps = array_map('strtoupper', $word_array);

$ret = preg_replace($captilize_words, $replacements_all_caps, $soucre_sentence);

echo $ret;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T04:36:30.417

```
$str = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.';
$caps = 'ipsum|adipisicing';
echo preg_replace_callback(
    '/(^|\s)('.$caps.')(\s|$)/'
  , function($m){ return $m[1].ucfirst($m[2]).$m[3]; }
  , $str
); 
```

那个正则表达式可能会更好（我想你可以使用 \W），但如果你不考虑单词之前/之后的空格，它也会在单词中间替换。

# c++ - 当我运行项目时，它会在执行任何操作之前终止

> ID：14533849
> 
> 赞同：0
> 
> 时间：2013-01-26T04:26:17.067
> 
> 标签：c++, main, eclipse-cdt

这是我在 C++ 中的第一个项目，所以可能缺少一些基本的东西，但这是我的问题

当我单击我的项目并选择作为本地 c/C++ 项目运行时，它会弹出一个对话框，该对话框在我知道它可能会说什么之前就消失了。与我在控制台未打开之前完成的项目不同（我猜应该如此），但是如果我已经打开它，它什么也不显示，并且就像它已经完成一样。以下是我尝试过的一些主要方法：

我真正需要的一个：

```
#include <iostream>
using namespace std;
#include "GasStation.h"
using namespace controller;

int main() {
GasStationTUI myTUI;
myTUI.run();
return 0;
} 
```

但我也尝试测试

```
#include <iostream>
using namespace std;
#include "GasStation.h"
using namespace controller;  

int main() {
cout<<"stuff"<<endl;
cin.get(); /or/ system("PAUSE");
return 0;
} 
```

这里也有帮助的是 run 方法和它调用的方法：

```
void GasStationTUI::run() {
this->displayOptions();
    }
string GasStationTUI::displayOptions() {
string selection;
cout << "Welcome to the Gas Station Finder." << endl;
cout
        << "What would you like to query: (m)iminum price, ma(x)imum price, (p)repay pumps,"
        << endl;
cout << "(t)hreshold price, (l)ist stations, (q)uit " << endl;
cin >> selection;
return selection;} 
```

此外，我还有另一个项目给了我，应该可以工作，但它有同样的错误，让我认为它可能不是我的代码。

最后是的，我已经多次清理并完全构建了项目，没有任何变化。

# javascript - 我如何将控制台事件与当前时间一起写入？

> ID：14533850
> 
> 赞同：1
> 
> 时间：2013-01-26T04:26:50.860
> 
> 标签：javascript

我正在尝试将当前时间和日期一起写入控制台事件，但时间不会随事件而改变。如何每秒更新时间变量？

```
var cde = function(){
    var dte=new Date(),
        mce=dte.getMonth()+1,
        day=dte.getDate(),
        hrs=dte.getHours(),
        mns=dte.getMinutes(),
        sec=dte.getSeconds();
if(mce<10){mce='0'+mce}
    if(day<10){day='0'+day}
    if(hrs<10){hrs='0'+hrs}
    if(mns<10){mns='0'+mns}
    if(sec<10){sec='0'+sec}

return 
'['+day+'.'+mce+'.'+dte.getFullYear()+'::'+hrs+':'+mns+':'+sec+']';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:33:58.200

每次创建日志时创建一个新日期。
当你在 JS 中约会时...

```
var date = new Date(); 
```

...无论您调用多少次`date`，它仍将等于创建它的确切毫秒数（基于用户的系统时钟）。

将你在那里的东西包装在一个函数中，而不是一个立即调用的函数，然后调用它。

```
console.log( cde() /*, stuff */ ); 
```

# php - 使用 .htaccess 重写 URL 在 xampp 中不起作用

> ID：14533852
> 
> 赞同：0
> 
> 时间：2013-01-26T04:27:00.697
> 
> 标签：php, .htaccess

我当前的网址是

*   http://localhost/b2b/post.php?postid=15

我想将我的网址显示为

*   http://localhost/b2b/post/15 ，或
*   http://localhost/b2b/[title_of_postid_number]

我使用下面的代码，但它不 woking

```
RewriteEngine On
RewriteRule ^post/(.*) /post.php?postid=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:43:52.837

我认为这是因为重写引擎正在寻找：

*   [http://localhost/post/*]

而不是寻找：

*   [http://localhost/b2b/post/*]

尝试添加：

```
RewriteBase /b2b/ 
```

在重写规则之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T17:54:08.640

删除`/`之前的`post.php?`. 所以你的代码应该是：

```
RewriteEngine On
RewriteRule ^post/(.*) post.php?postid=$1 
```

# java - 如何在 EL 中执行包含检查的字符串

> ID：14533854
> 
> 赞同：3
> 
> 时间：2013-01-26T04:27:19.900
> 
> 标签：java, jsp, struts, el

该应用程序是使用 Struts 1.2 框架制作的。我想在 jsp 文件中获取请求标头主机名并识别`user-agent`从标头读取值的浏览器。

下面是我使用 scriptlet 编写的代码：

```
String userAgent = request.getHeader("user-Agent");
if(userAgent.contains("Chrome")){
    userAgent = "Chrome";
}else if(userAgent.contains("Android")){
    userAgent = "Android";
} 
```

并且代码运行良好。但我想避免使用 scriptlet，因为它有一些易受攻击的跨站点脚本问题。因此，为了在 EL 中做同样的事情，我可以使用以下方法获取标题：

```
Host is: ${header["user-agent"]} 
```

但我不确定如何`contains`在 EL 中进行检查。

这个应用程序在 Struts 1.2 框架上运行，如果框架提供了更好的方法来读取 JSP 中的标头值，那么也请告诉我。否则EL也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:50:46.727

您需要使用`fn:contains`或`fn:containsIgnoreCase`

```
<c:set var="userAgent" value="${header['user-agent']}"/> 
```

进而：

```
 <c:if test="${fn:containsIgnoreCase(userAgent, 'Chrome')}">
  <!-- TODO: -->
 </c:if/> 
```

# c++ - Mingw 和 Eclipse 找不到库

> ID：14533855
> 
> 赞同：2
> 
> 时间：2013-01-26T04:27:32.483
> 
> 标签：c++, eclipse, mingw, static-libraries

我遇到的问题与[此处](https://stackoverflow.com/questions/9127623/mingw-eclipse-ld-exe-does-not-find-libraries)描述的类似。我创建了一个新项目，在 Eclipse 中添加了库路径并添加了要使用的库的名称。但是 MingW 链接器找不到库。我尝试过使用“/”而不是“\”（这是解决问题的方法），以及其他几件事，但没有运气。在 mingw 文档中找不到任何有用的东西。

我的命令如下：

```
g++ -LD:/ocv/build/x86/mingw/lib -o OCVTest.exe "src\\OCVTest.o" -ltest.a 
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe: cannot find -ltest.a
collect2.exe: error: ld returned 1 exit status 
```

该文件名为 test.a

在命令行中我尝试使用

```
g++ -L"D:/ocv/build/x86/mingw/lib" -o OCVTest.exe "src\\OCVTest.o" -ltest.a 
```

但这也无济于事。

我安装了 MingW 和 Make for Windows。我将这两个都添加到了我的 PATH 变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:48:31.830

将它命名为 libtest.a 并使用 g++ 的 -ltest 选项。*nix 中的静态库（包括 mingw）应该命名为`libxxx.a`，`-l`选项告诉编译器在指定路径（当前并通过`-L`选项给出）中查找库。但是要链接 w/ 静态库，可以给出一个全名（没有任何选项）......只需通过 libtest.a

# javascript - 不显示以在 IE 中显示内联

> ID：14533859
> 
> 赞同：1
> 
> 时间：2013-01-26T04:28:51.793
> 
> 标签：javascript, internet-explorer, position, fixed

我查看了其他人并添加了我的文档类型，但它仍然不起作用

我正在建立一个网站，您可以在其中单击产品并打开一个包含更多信息的 div，这部分在 firefox、Chrome 等方面没有问题，但 IE 当然甚至不显示 div。

所以这就是我所拥有的

```
#div{position:fixed; display:none;} 
```

现在，当我单击该项目时，代码更改为

```
#div{position:fixed; display:inline;} 
```

IE 根本不显示 div。

这个网站将在二月份启动并运行，所以我需要帮助！希望没什么太难的...

我也不想使用 jQuery... 只是 HTML CSS 和 Javascript

谢谢！

更新：谢谢你告诉我我的错误，但我确实把 display:none; 在我的代码中，这只是一个错误。

更新2：

这是我的 javascript

```
function view ()
{
screen.style.display = "block";
title.innerHTML = "<h1>" + set[0] + "</h1>";
purchase.innerHTML = set[0] + " costs " + set[1];
images.innerHTML = "<center>" + set[3] + set[2] + "</center>";
} 
```

这是我的 CSS

```
#screen{background-color:yellow; position:absolute; top:0px; left:0px; width:780px; height:400px; z-index:4; display:none;} 
```

这是我的 HTML

```
<div id="screen">

<div id="title">
</div>
<div id="images">
</div>
<div id="purchase">
</div> 
```

我删除了 div 内的文本，因为这并不重要。这同样适用于除 IE 之外的所有浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:19:59.663

你的意思是这个： `display:hidden`不是一个有效的选项。

```
#div {
  position:fixed;
  display:none;   /* Hide it entirely */
} 
```

或这个：

```
#div {
  position:fixed;
  visibility: hidden    /* Don't display, but reserve the space for it */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:31:16.520

`display: inline`不是块元素的 div 的有效选项。您应该使用“block”、“inline-block”，或者将属性留空以获取默认值。

`display: hidden;`也无效，我相信你的意思是`display: none;`

[更新] 查看您的代码，可能是因为您使用保留字作为变量名。例如，尝试将变量称为“myScreen”和“myTitle”，而不是“screen”或“title”。

以下是保留字列表：

[http://mattsnider.com/reserved-words-in-javascript/](http://mattsnider.com/reserved-words-in-javascript/)

PS：正如其他人指出的那样，对于此类问题，指定您在哪个版本的 IE 中进行测试会很有帮助。

# c++ - 有没有办法用引用制作一个恒定的吸气剂？

> ID：14533864
> 
> 赞同：0
> 
> 时间：2013-01-26T04:29:59.797
> 
> 标签：c++, pointers, reference, pass-by-reference

考虑以下模式：

```
class Child
{
public:
    char Foo;

    Child(char foo)
    {
        Foo = foo;
    }
};

class Parent
{
public:
    Child c;

    Parent() : c('A') { }

    const Child& GetChild() const
    {
        return c;
    }
};

// Scenario 1: Works, but useless
int main()
{
    Parent p = Parent();
    Child c = p.GetChild();
    c.Foo = 'B';
    cout << p.c.Foo << endl; // A, wrong
    cout << c.Foo << endl; // B, good
    system("PAUSE");
}

// Scenario 2: Doesn't compile, of course
int main()
{
    Parent p = Parent();
    Child& c = p.GetChild(); // Error
    c.Foo = 'B';
    cout << p.c.Foo << endl; // A, good
    cout << c.Foo << endl; // B, good
    system("PAUSE");
} 
```

规格如下：

*   getter 必须定义为 const（因为它不修改 Parent）
*   getter 给出的引用必须修改基础值

问题是：

*   如果 getter 本身是 const，C++ 要求 getter 的返回值是 const（为什么？）
*   C++ 禁止将 const 值分配给引用（逻辑上）

使用指针很容易做到这一点（使访问器返回`Child*`），但似乎有一个共识（并且理所当然地）认为引用是可取的，因为它们隐藏了指针的复杂性。

有什么办法吗？如果没有，我将回到指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:32:14.393

如果返回的引用不是 const，调用者可以修改对象，即使它在自己的上下文中是 const：

```
const Parent p = ...
Child & child = p.GetChild(); // valid const call, invalid return type 
```

但是，这只是当您尝试返回作为类本身一部分的成员变量（它本身不是指针）时的问题。因此，正如您已经建议的那样，将 Child 设为指针就可以了。但是将非常量指针返回到非指针`Child`会导致同样的问题......

为了更好地说明问题，请考虑以下内存布局图：

```
Parent:  [Child]

Child:   [char ] 
```

因此，父对象包含一个`Child`对象，仅此而已，因此修改您的`Parent`实例会修改一个`Child`实例，而修改`Parent::c`会修改`Parent`它自己。

因此，您不能返回指针或对非 const 对象的引用（`this`指针在 const 成员函数中指向该对象）：

```
Child& GetChild() const
{
    return c;    // compiler will complain here
} 
```

将等于：

```
Child& GetChild() const
{
    return this->c;   // compiler will complain here
} 
```

where `this`is of type `const Parent *`，这意味着 that `this->c`is of type `const Child &`。返回`Child &`违反了 const-ness。

getter 本身不会修改对象，但它允许规避调用者代码中的 const-ness，如上面的代码所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:24:42.277

要求看起来很矛盾，因为如果 Parent 不能被修改，那么这意味着即使是 Child 成员也不应该被修改。

但是如果您的规范放宽并且可以修改子成员对象，那么一个可能的解决方案是使用 const_cast。

```
class Child
{
public:
    char Foo;

    Child(char foo)
    {
        Foo = foo;
    }
};

class Parent
{
public:
    Child c;

    Parent() : c('a') { }

    const Child& GetChild() const
    {
        return c;
    }
};

// Scenario 2: Doesn't compile, of course
int main()
{
    Parent p = Parent();
    Child& c = const_cast<Child &>(p.GetChild()); // No more Error
    c.Foo = 'B';
    std::cout << p.c.Foo << std::endl; // A, good
    std::cout << c.Foo << std::endl; // B, good
    system("PAUSE");
} 
```

# google-apps-script - 无论如何要更改工作表顺序？

> ID：14533869
> 
> 赞同：10
> 
> 时间：2013-01-26T04:30:31.980
> 
> 标签：google-apps-script, google-sheets

无论如何要更改已存在的指定工作表的顺序？我看到有 API 调用`sheet.getIndex()`，但没有集合。现在看来唯一的办法就是调用`insertSheet()`。

```
insertSheet(optName, optSheetIndex, optAdvancedArgs) 
```

您可以使用 指定索引`optSheetIndex`。任何的想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T04:52:35.200

[您可以使用setActiveSheet()](https://developers.google.com/apps-script/class_spreadsheet#setActiveSheet)和[moveActiveSheet()](https://developers.google.com/apps-script/class_spreadsheet#moveActiveSheet)来实现这一点。

# java - 在 FOR 循环中初始化多个变量

> ID：14533871
> 
> 赞同：17
> 
> 时间：2013-01-26T04:30:40.227
> 
> 标签：java, for-loop

我是一名学生，试图弄清楚如何解决一个看似简单的问题。尝试在 FOR 循环中初始化 2 个变量时，我不断收到错误消息。我正在尝试为游戏板创建行。为什么我会收到此错误？

这是方法：

```
public String [] board;

public void printBoard(){
            for(int i, j = 0; i < this.board.length; i++, j++)
                if(j > 10)
                    System.out.println();
                else
                    System.out.print(this.board[i]);

> java:39: error: variable i might not have been initialized 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-26T04:32:11.310

这是因为您没有初始化 variable `i`，可能为零或其他。

```
for(int i = 0, j = 0; i < this.board.length; i++, j++)
            if(j > 10)
                System.out.println();
            else
                System.out.print(this.board[i]); 
```

如果某些对象正在使用它，请不要忘记初始化变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T04:35:39.443

`i`实际上还没有被初始化。 `for(int i=0, j=0;.... );`将为您解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-09T06:53:27.343

这是语法。我认为这将帮助您初始化多个变量 for(int k = 0, dcount = 1; k < count; k++, dcount++) {

}

# php - 如何处理php中的重定向循环错误

> ID：14533873
> 
> 赞同：0
> 
> 时间：2013-01-26T04:30:50.293
> 
> 标签：php, codeigniter

我正在使用一个 php 函数，该函数多次重定向到标题。运行 21 次左右后，出现以下错误：

```
"This website has a redirect loop" and stops running 
```

以下是我的重定向代码：

```
header('Location: http://myfunction.com/index.php/test/mytestfunction?days=60&start='. ($start + 100) .'&end='. ($end + 100)); 
```

这里 $start 和 $end 是从数据库中获取数据的限制。项目在 codeigniter

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:50:52.920

我想你想要这样的东西（见下面的代码）。您对 HTTP 标头所做的事情毫无意义。

```
$url = 'http://myfunction.com/index.php/test/mytestfunction';
$ch = curl_init($url . '?' . http_build_query(array(
    'days' => 60,
    'start' => $start,
    'end' => $end,
));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$response = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:33:31.353

这听起来像是彻头彻尾的疯狂。出于各种原因，页面重定向旨在将用户转移到网站的不同部分。它们永远不应该被用作迭代的手段。这就是循环的目的。

另一种可能性是您将`header`命令放在未包含在任何条件下的脚本中，然后重定向到自身（或重定向回的另一个脚本）。

# windows-runtime - Win8 应用程序在 20 次后未打开然后失败：没有足够的配额可用于处理此命令。（来自 HRESULT 的异常：0x80070718）

> ID：14533875
> 
> 赞同：1
> 
> 时间：2013-01-26T04:31:05.553
> 
> 标签：windows-runtime

嗨，这是我问的第一个问题：

我有一个 WinRT 应用程序 (C#/XAML)，前 20 次打开正常，然后打开失败。

在 Windows 事件应用程序日志中（无用）消息是“应用程序未在其分配的时间内启动”。如果我附加 Visual Studio 调试器，看起来基本错误是“没有足够的配额可用于处理此命令。（来自 HRESULT 的异常：0x80070718）”。

编辑：看起来这可能是 bg 代理重复注册的问题......将更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:18:16.467

底层“没有足够的配额可用于处理此命令。（来自 HRESULT 的异常：0x80070718）”消息是由以下原因引起的：

```
BackgroundAccessStatus status = await BackgroundExecutionManager.RequestAccessAsync(); 
```

在应用程序的每次加载时都会被调用。第 21 次加载和后续加载都将失败，并在应用程序事件日志中显示“应用程序未在分配的时间内启动”。

仅在用户第一次加载应用程序时才进行调用已解决问题，该应用程序现在打开 30 多次且没有错误。

# c - Vim 的理想 C 设置

> ID：14533877
> 
> 赞同：6
> 
> 时间：2013-01-26T04:31:29.087
> 
> 标签：c, vim

我试图在 Vim 中为 C 编程建立一个相当传统的环境，只是为了从图形 IDE 背景中体验它。目前我的 .vimrc 文件如下所示：

```
syntax on
:filetype indent on 
```

这提供了良好的语法突出显示和一些缩进。但是，自动缩进缩进 8 个空格。这是 vim 用户的标准吗？是否有一个原因？感觉有点……宽敞……来自通常有 4 个空间的环境。我敢肯定有办法改变它，但我应该吗？

我还想要一些东西来完成我的括号和括号，就像 Eclipse 一样。我听说过 AutoClose 插件。这是最好的路线，还是有更轻量级的路线？

还有其他必需品吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T08:58:59.227

你应该把`:`它不需要放在你的`~/.vimrc`中，正确的行应该是：

```
filetype plugin indent on 
```

该`plugin`部分加载其他特定于文件类型的插件，这些插件通常提供有用的命令/映射/设置。

* * *

8 个字符实际上是 a 的通用和历史默认宽度`<Tab>`。如果您希望它显示得更短（我可以理解），您必须将这些行添加到您的`~/.vimrc`：

```
set softtabstop=4              " see :h 'softtabstop'
set shiftwidth=4               " see :h 'shiftwidth' 
```

里面有全面的解释`:h 'tabstop'`。

请注意，它不会更改文件的实际内容。

* * *

我使用 DelimitMate，但有很多“自动关闭”插件。如果您对 AutoClose 感到满意并*需要*该功能，我想没有理由改变。但是您应该知道，可以通过一些自定义映射来实现该概念的幼稚但有效的实现，例如：

```
inoremap ( ()<Left> 
```

* * *

这是`~/.vimrc`我在我工作的每台服务器上设置的最低限度。它很小，但它设置了许多超级有用的选项，例如`hidden`or `incsearch`。

```
set nocompatible
filetype plugin indent on
syntax on
silent! runtime macros/matchit.vim
set autochdir
set backspace=indent,eol,start
set foldenable
set hidden
set incsearch
set laststatus=2
set ruler
set switchbuf=useopen,usetab
set tags=./tags,tags;/
set wildmenu
nnoremap gb :buffers<CR>:sb<Space> 
```

要知道每个选项的作用，只需执行`:h 'option`（使用单引号）并将其添加到您的`~/.vimrc` *选项*中，前提是您了解它的作用*并且*您确实需要它。

通常，学习如何使用文档是关键。

# ios - iOS MapView 未更新到指定范围

> ID：14533879
> 
> 赞同：1
> 
> 时间：2013-01-26T04:31:50.717
> 
> 标签：ios, mkmapview, mkcoordinatespan

我的 iOS 应用程序中有一个地图，它不会将可见区域设置为我指定的位置。

```
- (void)mapView:(MKMapView *)aMapView didUpdateUserLocation:(MKUserLocation*)aUserLocation    
{
    MKCoordinateSpan span;
    span.latitudeDelta = .011932;
    span.longitudeDelta = 0.011242;
    MKCoordinateRegion region;
    region.center = self.mapView.userLocation.coordinate;
    region.span = span;
    [aMapView setRegion:region animated:YES];
} 
```

那是我的代码，你会认为它会工作，它非常简单。但是，它将可见区域设置为比我想要的稍高但明显的区域。我打印了跨度增量值，`mapView:regionDidChangeAnimated`我得到的值是：

```
Span: 0.014576, 0.013733 
```

这不是我设置的。

关于为什么的任何想法？最重要的是，我真的很想了解为什么会发生这种情况，以及它是使用 Apple Maps 的产物还是我做错了一些奇怪的事情。如果您不介意，请支持，以便其他遇到此问题的人可以得到解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:23:38.643

这一直是 MKMapView 的问题。设置区域不会设置您传递给它的确切区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T08:20:53.897

由于您没有更改地图视图的形状，因此无论您给它多大的跨度，它都必须达到比例。例如，如果您告诉它您想查看比宽度高 100 倍的东西，它就不会以您的目标区域结束。此外，我认为它会捕捉到一组首选缩放级别，其中地图看起来更好。所以你的区域是完全可见的，如果需要，它周围可能会有填充。

# css - iPad 上的网站卡在左对齐

> ID：14533882
> 
> 赞同：-1
> 
> 时间：2013-01-26T04:32:12.900
> 
> 标签：css, mobile-safari

这个 Wordpress 站点通常在浏览器中居中对齐，iPad 上的 Safari 除外。在 iPad 上，该站点奇怪地左对齐（左侧没有空格）。

我已经在其他（非 iPad）浏览器上测试过了，不能重复这个问题。

iPad截图：![在此处输入图像描述](../Images/cd0a48b04caf1bd21b03231b08f22251.png)

网址：[http ://rainleader.com](http://rainleader.com)

我不知道是什么原因造成的。几乎所有东西都有一个 CSS 宽度值......

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:14:57.173

你有这个：

```
body { font-size: 13px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; color: #111; background-image: url('http://cdn.rainleader.com/assets/bg_top_outer.jpg'); background-repeat: repeat-x; text-align:center; }
#container { width: 900px; margin-top: 25px; margin-right: auto; margin-left: auto; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } 
```

改成这个

```
body { [add this] text-align:center }
[change to this] #container { width: 900px; margin-top: 25px; margin: 0 auto; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;  text-align:left; } 
```

这就是我始终以事物为中心的方式，并且始终有效。

1）在正文中对齐中心（你没有这样做）

2）容器中的margin 0 auto（你只有auto，没有0）

3）在容器中指定宽度

4）在容器中左对齐以从主体撤消中心

# node.js - 哪个 IDE 支持 Node.js 应用程序的 CoffeeScript 调试（源映射、断点和调用堆栈）？

> ID：14533885
> 
> 赞同：8
> 
> 时间：2013-01-26T04:32:18.607
> 
> 标签：node.js, debugging, ide, coffeescript, breakpoints

我对整个 CoffeeScript 场景还是很陌生。

是否有任何支持调试在 Node.js 上运行的 CoffeeScript 源代码的 IDE？

我希望可以在 .coffee 文件中设置断点并查看调用堆栈并检查变量。

WebStorm 似乎还不符合要求。[WEB-2389](http://youtrack.jetbrains.com/issue/WEB-2389#tab=Comments.)

似乎有一个在 Chrome 中使用[CoffeeScriptRedux的客户端解决方案。](https://github.com/michaelficarra/CoffeeScriptRedux)[例子](http://ryanflorence.com/2012/coffeescript-source-maps/)

还有其他选择吗？[崇高](http://www.sublimetext.com/)？

**更新** 近一年后再次检查此问题后，我遇到了这个[JetBrains 帮助文档](https://www.jetbrains.com/idea/webhelp/debugging-coffeescript.html)。看起来它支持调试服务器端咖啡脚本......终于！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:27:51.607

JetBrains 产品支持结合使用 JetBrains Chrome 插件和 Coffee-script-redux 来调试 CoffeeScript。

[http://www.jetbrains.com/products.html#IDE_and_editors](http://www.jetbrains.com/products.html#IDE_and_editors)

[http://confluence.jetbrains.com/display/RUBYDEV/Debugging+CoffeeScript+Code](http://confluence.jetbrains.com/display/RUBYDEV/Debugging+CoffeeScript+Code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:58:58.510

[Nodeclipse](http://www.nodeclipse.org/)有一个未解决的问题[#12 CoffeeScript 调试支持](https://github.com/Nodeclipse/nodeclipse-1/issues/12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T23:09:22.460

理论上，您可以在任何支持远程调试的 IDE 上执行此操作。但是，使用 beta 2 中的 Coffee-script redux 以及围绕源映射支持的所有活动，您最好等待 5 分钟。

# git - 删除文件扩展名 Windows 8

> ID：14533886
> 
> 赞同：1
> 
> 时间：2013-01-26T04:32:53.473
> 
> 标签：git, windows-8

我想在 Windows 8 中有一个没有扩展名的文件。这个文件的目的是让我的 git (.gitignore) 文件的忽略列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:40:22.247

这位先生怎么样

```
echo > .gitignore 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:32:12.620

如果你已经安装了它，我发现 WinSCP 是 Windows 资源管理器的一个很好的快速替代方案，用于将本地文件重命名为不带扩展名的文件名。

# c - C 关于 PUTCHAR

> ID：14533887
> 
> 赞同：3
> 
> 时间：2013-01-26T04:33:00.010
> 
> 标签：c, pointers, recursion

```
#include <stdio.h>

  void reverse( const char * const sPtr );

   int main ( void ) {

     char sentence[ 80 ];
     fgets( sentence, 80, stdin);

     reverse (sentence);
     return 0; 
  }

   void reverse( const char * const sPtr ){

     if (sPtr[0] == '\0' )
       return;
     else {
        reverse( &sPtr[1] );
        putchar (sPtr [0] );
     } 
```

我通常对反向功能的工作方式感到困惑？我看不到指针是如何递增以指向下一个字符的，我不知道我是否完全理解 putchar 的作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:42:04.623

假设你的字符串是“Viad”

首先它发送“Viad”来反转功能，

```
reverse("Viad"); 
```

在反向函数中，您再次调用反向函数，但这次您发送的是第二个字符的地址，即您发送的是“iad”，

```
reverse("iad"); 
```

它再次调用反转，现在它发送“广告”，

```
reverse("ad"); 
```

再次“d”，

```
reverse("d"); 
```

现在它发送 '\0' 结束字符

现在这一次它`return`&现在它倒带是因为`Stack functionality`，即当我们调用一些其他函数时，它会将变量的当前状态保存在堆栈中，并且在完成该函数的所有语句后，它返回意味着它从堆栈中弹出所有保存的状态

现在它去声明

```
putchar('d'); 
```

它打印“d”&

然后它打印“da”，然后是“dai”，然后是“daiV”，这意味着它会继续倒带

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T04:36:06.617

此函数为字符串中的每个连续字符递归调用自身，并在到达`\0`字符时（基本情况）以相反的顺序展开打印字符。

* * *

**第 1 步**：

```
void reverse( const char * const sPtr ){ //This calls the function with string 
```

这里，sPtr 指向字符串的第一个字符。

**第 2 步**：

```
reverse( &sPtr[1] ); //This calls the function with the next character of the string 
```

这条线将功能向前推进。

**第 3 步**：

重复这两个步骤，您将到达字符串的末尾，即基本情况。

* * *

它不是反转字符串，而是简单地反向打印字符串。

# c++ - C ++中的普通（自动）变量使用堆栈还是堆？

> ID：14533888
> 
> 赞同：2
> 
> 时间：2013-01-26T04:33:04.363
> 
> 标签：c++

> **可能重复：**
> [堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

一个不同的基本问题，请原谅我的无知。请让我知道是否在 C++ 中对普通（自动非静态和非全局）变量进行简单的变量声明，例如 .... float x; 在函数的范围内，说 main() 使用堆栈或堆（空闲存储）内存？我问这个是因为下面给出的代码可以在 C++ 中工作，但不能在 C 中工作。提前致谢。

```
#include <iostream>
using namespace std;

int main()
{ 
    int a,b;
    cin >> a >> b; 
    if(a < b)
    { 
        int c = 1925;
        float d = 0.7;
    }
    else
    {
        double e = 889.7; 
        short f = 35;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:39:47.733

这些变量将在堆栈上创建，并在它们离开其包含范围时被销毁。例如，当 if 语句终止时，c 和 d 将不再可用，因为它们在碰到第一个右大括号“}”时将超出范围。

这适用于 C++ 而不是 C 的原因与堆栈与堆分配无关。“使用命名空间 std”和您 #included 的 iostream.h 文件仅存在于 C++ 标准模板库中！请参阅[http://www.cplusplus.com/reference/](http://www.cplusplus.com/reference/)以查看 C 与 C++ 中可用的内容。

当您使用 new 运算符时，堆分配起作用，该运算符返回指向堆上新分配对象的指针，并且在您显式调用指针上的 delete 之前不会被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:40:54.210

以您描述的方式声明的变量存储在堆栈中。

有关更多详细信息，请参阅此响应：[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

# ruby-on-rails - Gem::InstallError: 赛璐珞需要 Ruby 版本 >= 1.9.2

> ID：14533893
> 
> 赞同：6
> 
> 时间：2013-01-26T04:33:56.200
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm, gitlab

我正在尝试安装 GitLab CI，但出现此错误。

```
Gem::InstallError: celluloid requires Ruby version >= 1.9.2.
An error occurred while installing celluloid (0.12.4), and Bundler cannot continue.
Make sure that `gem install celluloid -v '0.12.4'` succeeds before bundling. 
```

但是，我认为我的红宝石是最新的。

```
# ruby --version
ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux]

# ls -l /usr/bin/ruby
lrwxrwxrwx 1 root root 22 Jan 26 11:20 /usr/bin/ruby -> /etc/alternatives/ruby

# ls -l /etc/alternatives/ruby 
lrwxrwxrwx 1 root root 18 Jan 26 12:17 /etc/alternatives/ruby -> /usr/bin/ruby1.9.3

# rvm list
rvm rubies
=* ruby-1.9.3-p286 [ i686 ]

# which bundle
/usr/local/rvm/gems/ruby-1.9.3-p286@global/bin/bundle

# which gem
/usr/local/rvm/rubies/ruby-1.9.3-p286/bin/gem 
```

知道我这里有什么问题吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:45:40.013

很可能，您的`bundler`或`gem`CLI 工具与 Ruby 1.8 的安装相关联。

看看`which bundle`和`which gem`; 并检查这些文件 - 默认情况下，它们是指向特定 ruby​​ 安装的。

（您可能需要为当前的 ruby​​ 版本安装 bundler）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T06:06:14.930

我也遇到了这个问题。我使用 rbenv。

这是我的解决方案。

1.  确保您的 Ruby 由 rbenv 加载
2.  `$ gem install bundler`
3.  `$ rbev rehash`

现在你`gem`不应该指向你的系统 Ruby。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T14:23:49.957

如果您使用基于 debian 的 linux，请尝试`sudo update-alternatives --config ruby`使用`sudo update-alternatives --config gem`. 帮助过我。

# python - Python中的对象和对象有什么区别？

> ID：14533895
> 
> 赞同：4
> 
> 时间：2013-01-26T04:33:59.680
> 
> 标签：python, oop

在 python 中创建一个类时，它应该继承自对象还是对象，或者两者都不继承？是否需要从对象继承？

```
class NewClass(object) 
```

或者

```
class NewClass(Object) 
```

或者

```
class NewClass() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T04:40:14.640

`object`如果类是“新样式”对象，则继承自该类。这是python2.2中引入的一个特性。

新样式对象与经典对象具有不同的对象模型，并且某些内容不适用于旧样式对象，例如`super()`、`@property`和描述符。有关什么是新样式类的详细说明，请参阅这篇文章：

[Python 文档 - 类型和类更改](http://docs.python.org/release/2.2.3/whatsnew/sect-rellinks.html)

`Object`另一方面，它似乎是一个命名不佳的变量或对象。

# c - 从 C 中的不兼容指针类型警告返回

> ID：14533898
> 
> 赞同：0
> 
> 时间：2013-01-26T04:34:35.623
> 
> 标签：c, linked-list

我对 C 不是很熟悉，当我尝试使用 C 构建一个链表时，我遇到了一个小问题，希望有人为我澄清一下。

到目前为止，这是我的代码：

```
typedef struct {
struct dlinkNode_t *next;
struct dlinkNode_t *prev;
void *value;
} dlinkNode_t;

dlinkNode_t* getNext(dlinkNode_t *ptr){
/**return the next node of the node pointed by ptr. Return NULL if next element*/
return ptr->next; 
```

当我尝试编译它时，我收到以下警告：

```
"warning: return from incompatible pointer type" 
```

我将 dlinkNode_t 定义为链表节点的类型，每个节点有 2 个指向前后的指针。我应该将 getNext 的返回类型定义为：

```
struct dlinkNode_t* 
```

但这似乎违背了 typedef 的目的，因为我想将 dlinkNode 定义为一个新类型。任何帮助都会很好。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:39:11.410

希望这会有所帮助..当您在其中使用相同的指针`struct`时必须具有名称....`struct`

```
typedef struct dlinkNode {
struct dlinkNode *next;
struct dlinkNode *prev;
void *value;
} dlinkNode_t;

dlinkNode_t* getNext(dlinkNode_t *ptr){
/**return the next node of the node pointed by ptr. Return NULL if next element*/
return ptr->next; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:42:04.140

将其更改为

```
typedef struct dlinkNode_t {
    struct dlinkNode_t *next;
    struct dlinkNode_t *prev;
    void *value;
} dlinkNode_t; 
```

# ios - 将我的应用与 Zillow API 集成

> ID：14533901
> 
> 赞同：2
> 
> 时间：2013-01-26T04:35:13.267
> 
> 标签：ios, api

我需要将我的应用程序与 Zillow API 集成以检索特定信息以进行显示。

我对此一无所知，因此我需要一些有关如何执行此操作的一般信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T05:02:21.590

您如何将 API 集成到您的应用程序中取决于您正在处理的 API 类型。如果我没记错的话，Zillow 是一个基于 Web 的 API，因此您将通过向某些 URL 发出 HTTP 请求并包含 API 所需的参数来访问它。您从此类请求中返回的内容取决于相关 API，但通常是一些 XML 或 JSON 格式的数据。

示例：GetZestimate 调用是对[http://www.zillow.com/webservice/GetZestimate.htm](http://www.zillow.com/webservice/GetZestimate.htm)的 HTTP 查询，其中包括`zws-id`和`zpid`参数。[在这里](http://www.zillow.com/howto/api/GetZestimate.htm)阅读所有关于它们的信息。作为回报，您会以 XML 文件的形式返回相当多的信息，这也在我上面链接的页面上进行了描述。

至于如何真正打出这样的电话……嗯，有很多方法，完整的描述比我愿意写的要多得多。您应该首先阅读作为 iOS 一部分提供的[URL 加载系统。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html%23//apple_ref/doc/uid/10000165i)即使您最终没有直接使用 Apple 的 API，您仍然应该阅读它，以便您对正在发生的事情有一个基本的了解。有许多第三方框架主要试图简化发出 Web 请求的过程；一个非常流行的框架是[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)，尽管作者已经停止了开发，但它仍然有很多用途。您可以通过谷歌搜索轻松找到其他一些内容，但在大多数情况下，基本思想是相同的——您构建一个请求并发送它，然后您会返回一些数据。

您还需要研究能够帮助您在获得数据后理解数据的框架。同样，iOS 提供了一些解析 XML 的解决方案，但也有第三方框架试图使该过程更容易。[TouchXML](https://github.com/TouchCode/TouchXML)就是其中之一。对于 JSON，事情要简单一些：你应该只使用 iOS 提供的[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类。

# php - MVC ORM 和用户相关数据

> ID：14533903
> 
> 赞同：1
> 
> 时间：2013-01-26T04:35:27.747
> 
> 标签：php, session, orm, yii, yii-cmodel

Yii 提供基于 ORM 的开发，可以正常开发。我的问题是，在我的应用程序中有很多与用户相关的数据，例如用户信息、用户设置、用户偏好等。这里的用户是指当前登录的用户。

如果某处我需要用户的背景图片设置，我会执行以下操作

```
$user = User::model()->findByPk(Yii::app()->user->id);

$bgImage = $user->settings->backgroundImage; 
```

我在需要背景图像的应用程序的其他地方重复同样的事情。意味着再次创建 $user 的实例，我认为这不是一个好方法。那么，有没有一种方法我们不需要一次又一次地实例化用户类？？？请记住，我不喜欢会话方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:46:12.493

另一种方法是使用*单例*。在库代码中，执行以下操作：

```
public static function getUser() {
    static $user;

    if (!$user) {
        $user = User::model()->findByPk(Yii::app()->user->id);
    }

    return $user;
} 
```

这可以调用任意多次，但在单个 Web 请求中，数据库调用只会进行一次。

请注意，如果`Yii::app()->user->id`可能在 Web 请求中发生变化，则值得使用一个由该值索引的静态数组 - 因此，如果您的用户登录或注销，该方法会正确缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:55:18.223

共享相关资源（类、数组...）的最常见方法是*依赖注入*方法，它真正使类结构稳定，使依赖关系尽可能清晰。在这种情况下，我建议您将用户模型实例化一次，然后通过其构造函数将其传递给每个需要它的类。

考虑您的用户模型类`UserModel`并考虑依赖于该类的类的构造函数是：

```
public function __construct(UserModel $user, ...) { ... } 
```

然后，您可以将其用作：

```
$user = User::model()->findByPk(Yii::app()->user->id);
$bgImage = $user->settings->backgroundImage;

$dependentclass1 = new DependentClass1($user, ...);
...
$dependentclass2 = new DependentClass2($user, ...);
...
$dependentclass3 = new DependentClass3($user, ...); 
```

关于建议的其他答案：

*应该知道，围绕单例（反）模式的使用已经发生了很多战争，这是正确的，您应该注意这一点。[他们中的大多数也已在 SO 上讨论过](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)。但是您必须记住：设计模式（如 DI 和 Singleton）只是一种**选择**，而不是**要求**，因此您可以在您的上下文中自由使用对您更有意义的任何东西。*

# python - 在 scipy.insterpolate 的 splrep 函数上选择结的错误（？）

> ID：14533908
> 
> 赞同：3
> 
> 时间：2013-01-26T04:37:14.007
> 
> 标签：python, scipy

我有这个关于 scipy 的 splrep 函数的问题，我认为这是一个错误，所以我会发布每段代码，以便您可以在您的计算机上重现它。假设我想找到一些数据的 b 样条表示，比如说，通过以下代码获得的那个，它创建一个数据集作为十个高斯与一些添加噪声的混合：

```
import numpy as np
# First we define the number of datapoints:
ndata = 100
x = np.arange(0,1,1./np.double(ndata))
means = np.random.uniform(0,1,10)
y = 0.0
for i in range(len(means)):
    y = y+np.exp(-(x-means[i])**2./0.01)
# We add some noise to obtain the data:
data = y + np.random.normal(0,0.05,len(y)) 
```

应该是这样的： ![噪声数据和真实曲线（高斯混合）](../Images/a153d78e0bc3114df759770aa8e90faa.png) 现在，让我们使用 splrep 和 splev 函数来获得这条曲线的 b 样条表示：

```
from scipy.interpolate import splrep,splev
# First define the number of knots. Let's put, say, 10 knots:
nknots = 10
# Now we crate the array of knots:
knots = np.arange(x[1],x[len(x)-1],(x[len(x)-1]-x[1])/np.double(nknots))
tck = splrep(x,data,t=knots)
fit = splev(x,tck) 
```

如果您将所有内容绘制到这里，一切似乎都很好： ![适合 b 样条](../Images/44c319c09f8e6d5e307b4a8bfdd7438c.png) 但是，数据点数量和结数的某些组合存在问题。例如，如果您使用 and 尝试上面的代码`ndata = 1931`，`nknots = 796`我会收到以下错误：

```
File "/usr/lib/python2.7/dist-packages/scipy/interpolate/fitpack.py", line 465, in
splrep raise _iermess[ier][1](_iermess[ier][0])
ValueError:     Error on input data 
```

这给我带来了问题，因为上面的代码是不可自动化的。我正在使用具有约 19000 个数据点的数据集，其中一个循环`while`可能对计算要求很高。所以我的问题是：`try``except`

1.  你能重现这个问题吗？如果你能...
2.  你知道发生了什么事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:34:28.983

我创造了一种解决问题的方法。它可能与适合两个结之间的数据点数量较少有关，所以我所做的是将创建结数的行替换为：

```
idx_knots = (np.arange(1,len(x)-1,(len(x)-2)/np.double(nknots))).astype('int')
knots = x[idx_knots] 
```

这样，我确保节点之间有足够的数据点，因为我使用 x 向量的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T09:09:35.347

`t`您可以使用参数，而不是直接指定结（通过参数） `s`。该`s`参数控制样条曲线的平滑度。它通过增加结的数量来做到这一点，直到条件

```
sum((w * (y - g))**2,axis=0) <= s 
```

满足（g 是平滑样条表示，w 是权重）。

# ios - 如何使用 Cocos2d 创建 TileMap？

> ID：14533909
> 
> 赞同：0
> 
> 时间：2013-01-26T04:37:13.763
> 
> 标签：ios, ios6, cocos2d-iphone

我正在努力使用 Cocos2d 创建 TileMap。无论我尝试什么，我都会收到运行时错误：“线程 1：EXC_BAD_ACCESS（代码 = 1，地址 = 0x30000008），我理解这是一个内存问题。

我已经运行了默认的 cocos2d 项目，它可以工作。然后我在我的 init 函数中添加以下行：

```
CCTMXTiledMap* tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"TileMap.tmx"]; 
```

我的程序中断了。据我所知，这应该有效。我正在使用 cocos2d 2.0，它是最新的稳定版本。我正在使用 XCode，并尝试使用 5.0 和 6.0 iPhone 模拟器。

有人有想法吗？

# c# - 在 silverlight 中导航到不同的用户控件而不创建用户控件的新实例

> ID：14533910
> 
> 赞同：1
> 
> 时间：2013-01-26T04:37:48.693
> 
> 标签：c#, silverlight, xaml, singleton

目前，我能够在 silverlight 中的多个用户控件之间导航。但是，每次我导航到一个新的用户控件时，该用户控件中的所有代码都会再次运行。通常这不是问题，但在我的场景中，其中一个用户控件需要大约 50 秒才能加载，因为它是通过 WCF 服务运行的怪物查询。

那么如何在不创建这些用户控件的新实例的情况下导航到不同的用户控件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:51:33.233

您可能想研究一些[创新软件设计模式](http://en.wikipedia.org/wiki/Creational_pattern)。

我会推荐[Object Pool](http://en.wikipedia.org/wiki/Object_pool_pattern)或[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)，但您选择的模式将取决于您的要求，您可能会发现另一种更适合您。

我强烈建议您购买[Design Patterns: Elements of Reusable Object-Oriented Software](https://rads.stackoverflow.com/amzn/click/com/0201633612)。这是一部出色的、开创性的作品，任何认真的 C# 程序员都不应缺少它。

# mysql - MySQL 将 now() （仅日期，而不是时间）与日期时间字段进行比较

> ID：14533914
> 
> 赞同：71
> 
> 时间：2013-01-26T04:38:50.170
> 
> 标签：mysql

我有一个`duedate`列（`datetime`格式）指定票的到期日期，现在我需要根据`now()`与`duedate`. ie `2010-04-29 02:00`vs`2010-04-29 10:00`在这件事上会返回 true。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-26T04:41:04.380

用于`DATE(NOW())`比较日期

`DATE(NOW())`将为您提供当前日期的日期部分，并`DATE(duedate)`为您提供到期日的日期部分。然后您可以轻松比较日期

所以你可以像这样比较它

```
DATE(NOW()) = DATE(duedate) 
```

或者

```
DATE(duedate) = CURDATE() 
```

看[这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-09-21T13:24:05.817

仅比较日期而不是日期 + 时间 (NOW) 与：

```
CURDATE() 
```

# php - jQuery 参数未传递给 PHP

> ID：14533920
> 
> 赞同：1
> 
> 时间：2013-01-26T04:39:37.427
> 
> 标签：php, jquery, jquery-load, url-parameters

我不确定为什么，但是 jQuery 没有将参数传递给 PHP，以便根据参数 ID 使用特定数据完成 load() 函数。

短期内，当用户点击链接时，会触发 onclick`photo_tab('.$row['id'].');`

account.php HTML 元素

```
<li><a href="#!/photos" onclick="photo_tab('.$row['id'].');"><i class="icon-camera"></i> Photos</a></li> 
```

在某种意义上，应该将 ID 传递给 photo_tab（脚本包含在页面中而不是它自己的页面上）

通用.js

```
function photo_tab(user_id) {
    $('.ac-content').load('ajax/photos.php',{user_id:id});
} 
```

并且应该加载照片/页面，这是一个 PHP 页面，并基于 user_id 值从与该 user_id 关联的数据库中加载照片。

```
<?php
   if ($_GET['user_id'] == 2) {
      echo "WORKED!";
   } else {
      echo "FAILED!";
   } 

***this is the photos/ file located at ajax/photos.php with mod_rewrite to point
otherwise to just photos/ or photos 
```

编辑：1-使用完整路径而不是重写照片> ajax/photos.php 不起作用 2-ID 正在通过 $row['ID']; 传递并回显到页面上；3 - ajax/photos.php 正在使用 $_REQUEST

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:47:37.690

尝试将数据作为查询字符串传递，如下所示：

```
function photo_tab(user_id) {
    $('.ac-content').load('photos/','user_id='+id);
} 
```

**编辑：** 再看一遍，那个 URL 正确吗？有一个相对 URL 似乎很奇怪。

您还应该确保生成的标记是正确的，行 ID 是否在源中打印出来？

**编辑2：** 我在本地设置，这是工作代码，模仿你的文件结构。

//localhost/account.php

```
<html>
<head>
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script>
        function photo_tab(id) {
            $('.ac-content').load(
                'ajax/photos.php',
                { 'user_id': id }
            );
        }
    </script>
</head>
<body>
    <div class="ac-content"></div>
    <a href="#!/photos" onclick="photo_tab(3);"><i class="icon-camera"></i> Photos</a>
</body> 
```

//localhost/ajax/photos.php

```
<?php
if (isset($_GET['user_id']) && $_GET['user_id'] == 2)
{
    echo "WORKED!";
}
else
{
    echo "FAILED!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:48:20.023

用引号包裹你的变量怎么样？

```
function photo_tab(id)
{
    $('.ac-content').load('photos/',{'user_id':id});
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T04:51:04.013

是的，不应该像你想象的那样传递参数，因为名称意味着方法从服务器加载数据并将返回的 HTML 放入匹配的元素中。

```
.load( url [, data ] [, complete(responseText, textStatus, XMLHttpRequest) ] ) 
```

EG : 与上面相同，但会将附加参数 POST 到服务器，并在服务器完成响应时执行回调。

```
$(".ac-content").load("photos.php", {user_id:user_id}, function(){
  alert("have been loaded");
}); 
```

试试上面的语法。

1.  试试`$_REQUEST`吧`$_GET`
2.  它应该`photos.php`或一些 .php 不是`photos/`
3.  确保`id`不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T04:42:22.973

看起来`id`从未定义过。试试这个：

```
function photo_tab(id) {
  $('.ac-content').load('photos/',{user_id:id});
} 
```

# java - 如何读取混合了数字和字符的字符串中的单个整数？

> ID：14533925
> 
> 赞同：-4
> 
> 时间：2013-01-26T04:39:58.330
> 
> 标签：java, integer

例如，如果我有
`0]+4`

我如何阅读和吃零？

编辑：所以看起来我真的不清楚。让我编辑东西。我要做的就是获取出现在数字和字符字符串中的第一个整数。文本的第一个组成部分总是一个整数。我可以有这个的任何组合。例如，我可以拥有以下任何一种：
`43SOMETEXT424` `3blahblahblah64blahblahblah` `5MoreText`

阅读本文后，我将分别返回 43、3 和 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:44:51.240

你可以使用模式

```
 Pattern pattern;
   pattern = Pattern.compile("\\d");
   String st=jTextField1.getText();
   Matcher matcher = pattern.matcher(st);
system.out.prinl(matcher.group()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:45:31.480

在不知道您正在做的事情的上下文的情况下，这有点长镜头......但是这段代码可以工作：

```
Integer.parseInt("0]+4".charAt(0)); 
```

如果您真的只想要“0”，只需将您拥有的值读入字符串并调用字符串`Integer.parseInt()`的第一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:47:20.730

尝试

```
 int n = NumberFormat.getInstance().parse("0]+4").intValue(); 
```

奇怪，因为看起来不会有 ParseException，这就是 NumberFormat / DecimalFormat 的工作原理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T05:06:53.157

```
public static void main(String[] args) {
    String s = "0]+4";
    for (int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);
        if (Character.isDigit(c)) {

            System.out.println(c);
        }
    }
} 
```

尝试这个。我想这就是你想要的……是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T05:13:35.610

```
public char getNumber(final String str){
    final String onlyNumbers = str.replaceAll("[^0-9]", "");
    return (char) (onlyNumbers.length() > 0 ? onlyNumbers.charAt(0) - '0' : -1);
} 
```

考虑使用正则表达式。这不会解析负数，但我怀疑你需要在这里找到它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-28T13:15:48.877

```
public static void main(String[] args){
    Scanner in=new Scanner(System.in)
    int number=in.nextInt();
}

//put loop for nextInt fun as many time as you want to get the required number 
```

# unix - 寻找 。-name "*.c" 并找到 . -name "*.c" > o 在深层目录中给出不同的答案

> ID：14533926
> 
> 赞同：1
> 
> 时间：2013-01-26T04:40:03.427
> 
> 标签：unix, command-line, find, dump

`find . -name "*.c"`返回正确的东西，列出从执行点开始的具有完整相对路径的所有文件（示例）：

```
./a/b/c/d/e/f/g/h/file.c 
```

`find . -name "*.c" > o`将输出转到文件用单词“dump”替换路径的开头（示例）：

```
./dump/g/h/file.c 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:03:36.563

Find 正在返回当前目录中的所有文件。您要么`*.c`在输出中包含与当前目录中的模式匹配的文件，要么在 stderr 上有一条“find: *.c: No such file or directory”消息，但您没有告诉我们。

更新：

你的问题现在不同了。回答你的新问题：

find 不会根据其输出的去向而改变其行为。这意味着您要么在重定向测试中的不同条件下执行它，要么您正在检查的文件中的输出不是 find 的真实输出。

# sql - oracle sql正则表达式检索表名

> ID：14533930
> 
> 赞同：1
> 
> 时间：2013-01-26T04:40:18.060
> 
> 标签：sql, regex, oracle

我有一个表格，其中有一列类型为 varchar2(4000)。该列包含我想使用正则表达式检索表名的查询。

前任：

```
 create table sam ( query_1 varchar2(4000)); 
```

数据为：

```
insert into sam values(
'select ename e, empno d , sal f,dname from emp e, dept d where e.deptno=d.deptno');
insert into sam values(
'SELECT B.DN,  A.DN , C.BN FROM A.DoG,   b.caT,  C.rAt') 
```

如何将 query_1 列中的表名检索到另一个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:03:27.993

这将为单行完成工作，但在选择多行时无法正常工作。也许比我更熟练的人可以改进这一点：

```
select
  regexp_substr(c.split, '\S+') as table_name
from (
  select 
    regexp_substr(b.match, '[^,]+', 1, rownum) as split 
  from (
    select
      regexp_replace(regexp_substr(query_1, 'from.+?(where|group|order|$)', 1, 1, 'i'), '(from|where|group|order)', '', 1, 0, 'i') as match
    from
     sam
  )b
   connect by level <= length (regexp_replace (b.match, '[^,]+'))  + 1
) c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:54:42.637

您不能在直接的 Oracle SQL 中执行此操作。您不能有动态表或列名。您将需要使用 PL/SQL 和[Dynamic SQL](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#LNPLS01101)。

# python-3.3 - 'int' 对象不可调用：类型错误

> ID：14533931
> 
> 赞同：0
> 
> 时间：2013-01-26T04:40:43.057
> 
> 标签：python-3.3

好的，所以我今天做了一个基本的计算器（今天是我学习编程的第一天），我收到以下代码的错误：

```
Traceback (most recent call last):
  File "C:\Users\Stone\Desktop\unfinished calculator.py", line 42, in <module>
    start()
  File "C:\Users\Stone\Desktop\unfinished calculator.py", line 26, in start
    n1()
TypeError: 'int' object is not callable 
```

以此为代码

```
x = 1
global n1
global n2
global opp1
def n1():
    global n1
    n1 = input("Number to perform operation on: ")
    n1 = int(n1)
def n2():
    global n2
    n2 = input("Number to perform operation with: ")
    n2 = int(n2)
def opp():
    global opp1
    opp1 = input("Available operations to perform with number:\n1)Addition\n2)Subtraction\n3)Multiplication\n4)Division\n5)Exit Calculator\nPlease enter number choice (1-5): ")
    opp1 = int(opp1) 
def add():
    print(n1 + n2)
def subtract():
    print (n1 - n2)
def multiply():
    print(n1 * n2)
def divide():
    print(n1 / n2)
def start():
    n1()
    opp()
    n2()
    if opp1 == 1:
        add()
    elif opp1 == 2:
        subtract()
    elif opp1 == 3:
        multiply()
    elif opp1 == 4:
        divide()
    elif opp1 == 5:
        x = 0
    else:
        print("Invalid Choice!")
while x == 1:
    start() 
```

有人可以向我解释这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:44:36.523

问题是您同时定义`n1`为函数和变量。不可能两者兼而有之。我建议更改`def n1():`函数的名称。

为了进一步扩展，在第 2 行，你有这个：

`global n1`

但是在第 5 行，你有这个：

`def n1():`

第一个是设置一个可以从文件中的任何函数访问的全局变量。第二个是创建一个特定的功能。简而言之，它们不能像这样在同一个作用域中具有相同的名称。所以在第 26 行你调用`n1`了 ，它实际上是一个变量而不是一个函数，并且 Python 解释器出错了，因为你不能像调用方法那样“调用”一个 int 。

一个快速的解决方法是重命名你的变量`n1`，并且`n2`不是你的方法名称`n1`和`n2`. 但是，随着您不断学习编程，您将学习如何将变量传递给您的方法以及在方法完成时返回它们。这意味着您甚至不必使用全局变量（这通常被认为是一件坏事）。

`global n1`因此，您可以删除该行，而不是声明，并将您的`n1`函数定义为：

```
def n1():
    number = input('Number to perform operation on: ')
    try:
        return int(number)
    except ValueError:
        print("That's not a number.") 
```

分解那里发生的事情：

该`try`语句尝试执行一段代码。在这种情况下，它会尝试将用户输入的内容转换为整数。如果它不是数字，`exception`则会发生 an，然后我们打印出“这不是数字”，然后返回到您的`start`函数。（或者，您可能希望将它放在一个 while 循环中，因此它会一直询问直到用户输入一个数字。[这个问题可能会有所帮助。](https://stackoverflow.com/a/8754600/1026980)）如果它是一个数字，则`return`发生该语句。这会将该函数的结果返回到您调用它的位置。所以回到你的`start()`功能，你会做这样的事情：

`value1 = n1()`

这会将结果分配给您可以使用`n1`的新变量。`value1`

# python - Python：在源代码中找不到字符串

> ID：14533936
> 
> 赞同：2
> 
> 时间：2013-01-26T04:41:57.327
> 
> 标签：python

好的。这是我在这里的第一个问题所以我正在尝试制作这个程序，它在 HTML 源代码中搜索短语“你有错误”。问题是当我尝试

```
 html_data=urllib2.open(site).read()
    if html_data.find(string):
       print "It's found" 
```

它没有找到它..虽然当我打印 html_data 时，它在那里找到，没有任何标签。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:07:18.030

`str.find()`返回索引（如果未找到，则返回 -1）。因此以下是不正确的：

```
if html_data.find(string): 
```

它应该是：

```
if html_data.find(string) != -1: 
```

或者，如果您不需要知道比赛的位置：

```
if string in html_data: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:17:54.693

大写/小写是否与您正在查看的页面匹配？您能否给我们您尝试从中阅读的页面？因为这段代码似乎工作正常：

```
 >>> string = 'You have an error'
    >>> page = """

    You have an error

        """
    >>> if string in page:
        print "It's found"

    It's found 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:53:30.410

有时代码是在 javascript 加载和执行时动态生成的。在这种情况下，您将需要执行 JavaScript 以获取与从浏览器的 View Source 获取的页面源完全相同的页面源。您可能想为此编写一个浏览器扩展程序，然后如果需要将它找到的内容发送到您的 python 服务器。这样做的好处是您可以使用浏览器的 JavaScript 虚拟机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T14:04:05.087

`find`如果找不到字符串，则方法返回 -1，而不是 0。所以，你应该像这样使用它

```
if html_data.find(string) != -1: 
```

# android - 我可以在 android 画布上绘制 pi，让它看起来像是用 drawText 绘制的吗？

> ID：14533939
> 
> 赞同：1
> 
> 时间：2013-01-26T04:42:12.460
> 
> 标签：android, canvas, drawtext

嗨，我有一个 android 画布，我用阴影层和其他一些文本效果在上面绘制文本。我还希望能够在画布上绘制 π，使其看起来与 drawText 相同，但我认为 drawText 不支持 UTF-8，所以这就是我卡住的地方。有谁知道我可以做到这一点的其他方式？制作我自己的显示路径会起作用，但我不知道如何制作一个漂亮的 pi 路径。感谢您的任何回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:48:28.173

基于关于[String的 android 文档](http://developer.android.com/reference/java/lang/String.html)

> 字符串由 UTF-16 值的数组表示，以便 Unicode 补充字符（代码点）通过 Unicode 代码单元（char）存储/编码为代理对。

因此，您可以在`Canvas`.

# android - 更换片段时未找到视图

> ID：14533942
> 
> 赞同：3
> 
> 时间：2013-01-26T04:42:31.450
> 
> 标签：android, fragment, android-support-library

我有一个使用片段的活动。在某些操作上，我替换了可见的片段。这很好用，除了一位用户报告他的机器人光子错误。

这是堆栈跟踪：

```
java.lang.IllegalArgumentException: No view found for id 0x7f060091 (com.b2.livewants:id/user_profile_fragment) for fragment UserProfileInfoFragment{40b3a8c0 #2 id=0x7f060091}
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3844)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

这是有问题的功能：

```
private void setFragment(Fragment fr){
    getFragmentManager()
        .beginTransaction()
        .replace(R.id.user_profile_fragment, fr)
        .commit();
} 
```

**编辑：**

这是（缩短的）布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    ...

    <FrameLayout
            android:id="@+id/user_profile_fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
</LinearLayout> 
```

这怎么可能？在这种情况下，Android 似乎很难找到视图......以前有没有人遇到过这个问题或有提示给我？

谢谢西蒙

# python - Python 脚本无法加载 Django 设置模块——ImportError

> ID：14533944
> 
> 赞同：2
> 
> 时间：2013-01-26T04:42:48.153
> 
> 标签：python, django

我正在虚拟环境中的 Mac OS X 上开发一个 Django 项目，并且有一些常规的 Python 脚本需要运行一些东西（主要是操作数据）。但是，每次我尝试运行其中一个使用 Django 中任何内容的脚本（例如导入模型）时，都会出现以下错误：

```
ImportError: Could not import settings 'myproject.settings' (Is it on sys.path?): No module named myproject.settings 
```

我在脚本顶部添加了以下几行：

```
import sys
import os

os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

sys.path.append("path/to/project/") 
```

我什至打印出 sys.path，我可以在那里看到文件夹容器 myproject 的路径。但我仍然得到同样的错误。关于我能做什么的任何想法？

* * *

当我运行时`python -m modulefinder my-script.py`，我从我的根 Python 路径（默认是 Enthought 分发）和我的 venv 路径获取模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T20:12:41.020

你需要 django.setup()

```
import os
import django

# Connect to the Django Database 
script_path = os.path.dirname(__file__)
os.environ['DJANGO_SETTINGS_MODULE']='myapp.settings'
django.setup() 
```

# javascript - 使用 jquery 将 javascript 对象传递给 jsp 页面

> ID：14533946
> 
> 赞同：2
> 
> 时间：2013-01-26T04:42:53.493
> 
> 标签：javascript, jquery, ajax, jsp

我有 javascript

`var data = new Object();`

这个对象的一些属性是：

```
data.name = "mike";
data.id = 1; 
```

我使用 jquery 将对象传递给 jsp 页面

```
var request = $.ajax
({
 url: "test.jsp",
 type: "post",
 data:  'obj='+ data,
success:    function(msg) {
     $('#response').html(msg);},
  error:function (xhr, ajaxOptions, thrownError){
 alert(xhr.status);
 alert(thrownError);
}  
}); 
```

在jsp中我说

`Object objParam = request.getParameter("obj");` `out.println(objParam.name);`

这似乎不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:16:53.703

1.  因为您要发布到 JSP，所以请确保您在方法内部进行`doPost(request, response)`处理。
2.  一般来说，所有传递的数据都应该是 JSON 格式。在你的情况下，它应该是

    ```
    data: {'obj' : data} 
    ```

3.  要在服务器端解析，请使用[**org.json**](http://www.json.org/java/)库：

    ```
     JSONObject obj = (JSONObject) JSONValue.parse(request.getParameter("obj"));
        Iterator<?> keys = obj.keys();            
        //iterate over the properties of the JSON object
        while( keys.hasNext() ){
            String key = (String)keys.next();
            if( obj.get(key) instanceof JSONObject ){
                //a JSONObject inside the JSONObject
            } else {
                //process
            }
        } 
    ```

    请参阅文档：[**JSONObject**](http://www.json.org/javadoc/org/json/JSONObject.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:42:53.907

您可以在客户端传递 json 数据（使用 json.stringify() 转换为 json 数据的 javascript 对象）。在服务端，使用 Gson Libarary 您可以将 json 数据映射到 java 对象。

```
 public class User{
private String userName;
//getters
//setters
    } 
```

json格式

```
{"userName":"test_username"} 
```

现在您可以使用 GSON 库将 json 数据映射到 java 对象。

例如请参考以下链接

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:59:22.380

javascript的对象与java的对象不同。两者根本没有可比性。在这里，您按原样发送 javascript 对象。这应该更改为 json 字符串。

```
data:  'obj='+ JSON.stringify(data), 
```

而且在服务器上，您应该获取 json 字符串，然后使用一些机制将该 json 转换为 java 对象，例如`ObjectMapper`

```
Object objParam = request.getParameter("obj");

ObjectMapper om = new ObjectMapper();
om.readValue(objParam.toString(), ...); 
```

# java - javacv代码没有运行

> ID：14533950
> 
> 赞同：1
> 
> 时间：2013-01-26T04:44:30.453
> 
> 标签：java, eclipse, opencv, javacv

我已经尝试了很长时间。我已经安装了所有的先决条件。
1\. 先安装java jdk
2\. 安装Microsoft Visual C++ 可再发行包
3\. 下载opencv 包
4\. 在系统路径中设置OpenCV .dll。
5\. 从以下链接下载 JavaCV-bin 并解压。
6.最后将所有外部JAR文件添加到eclipse Libraries中。

下面是我用于测试的演示代码`javacv`

```
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;
import com.googlecode.javacv.CanvasFrame;

public class demo {

    public static void main(String[] args) {

     //Load image img1 as IplImage
        final IplImage image = cvLoadImage("backimg.png");

        //create canvas frame named 'Demo'
        final CanvasFrame canvas = new CanvasFrame("Demo");

        //Show image in canvas frame
        canvas.showImage(image);

        //This will close canvas frame on exit
        canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);        
    }    
} 
```

现在，当我将项目作为 Java 应用程序运行时，会出现以下对话框（包含在下面的链接中）：-

[eclipse中出现的对话框](https://lh6.googleusercontent.com/-MMvJ6Gd3K_0/UQNexUTRtDI/AAAAAAAAAEQ/XX_lPlJHs8s/s606/error.jpg)

现在我已经尝试了对话框中显示的所有选项，但代码没有运行。如果有人能告诉我应该在对话框中选择什么选项以及如果我在某处出错时运行代码的正确过程，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:46:35.400

有时，由于 JavaCV jar 和所需 OpenCV 库的版本不匹配，可能会出现“java.lang.UnsatisfiedLinkError”。您可以在 javacv-bin 的 Readme 文件中查看所需的 OpenCV 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:03:19.583

从列表中选择“演示 - （默认包）”。Eclipse 要求您从包含 main 方法的类中进行选择。

# javascript - socket.io 客户端没有方法 emit

> ID：14533951
> 
> 赞同：2
> 
> 时间：2013-01-26T04:44:32.837
> 
> 标签：javascript, node.js, socket.io

[使用来自http://cdn.socket.io/stable/socket.io.js](http://cdn.socket.io/stable/socket.io.js)的 socket.io.js 的稳定版本，并尝试在 google chromium 和 firefox 上建立连接。

```
var websocket = io.connect("http://nodetifications.no-ip.org:3030");
websocket.emit("usuarioConectado", "juanvilu" );</code> 
```

显示以下错误：

```
Uncaught TypeError: Object # has no method <Object> 'connect'
(anonymous function)
(anonymous function) jquery-latest.js: 586
jquery-latest.js jQuery.extend.globalEval: 587
jquery-latest.js jQuery.fn.extend.domManip: 6169
a.fn.extend.domManip jquery.tmpl.min.js: 10
jquery-latest.js jQuery.fn.extend.append: 5926
(anonymous function) jquery-latest.js: 6051
jquery-latest.js jQuery.extend.access: 835
jquery-latest.js jQuery.fn.extend.html: 6015
(anonymous function)
jquery-latest.js fire: 1017
jquery-latest.js self.fireWith: 1127
jquery-latest.js done: 8021
callback 
```

# java - Linux 上的 Java Runtime.exec() 参数

> ID：14533954
> 
> 赞同：2
> 
> 时间：2013-01-26T04:45:14.833
> 
> 标签：java, linux-kernel, runtime, runtime.exec

好的，问题来了：我有 3 个类 MyClass1 和 MyClass2 以及 ExecClass。我转到命令提示符并执行以下操作：

```
$java MyClass1 -exec "java MyClass2 arg1 arg2" 
```

效果很好。现在在 ExecClass 我有以下行：

```
Runtime.getRuntime().exec("java MyClass1 -exec \"java MyClass2 arg1 arg2\""); 
```

问题是如果您打印第二个字符串与第一个字符串完全相同，但是当我的 ExecClass 运行它时 MyClass1 抱怨：无法识别的参数 arg1 并失败。经过一番调试，我发现在第一种情况下，当我直接从终端调用时，引号中的整个字符串是 1 个参数（arg[1]），而在第二种情况下，arg.length = 5 和它基本上将它们分开......出于一些我不知道的原因。我只需要知道一个解决方法，如果有人知道，也就是我的 Runtime.exec() 可以工作。PS：在我的 Windows 机器上，这样的问题不仅仅发生在 linux 上。这是一个 ubuntu 破坏内核：2.6.32-279.14.1.el6.x86_64。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T04:50:05.247

`Runtime.exec`与`system()`其他语言中的 -like 函数不同，它不会调用 shell 来解析命令（双引号字符串是 shell 功能）。

要以您想要的方式拆分字符串，请使用接受 String 数组的 Runtime.exec：

```
Runtime.getRuntime().exec(new String[] { "java", "MyClass1", "-exec", "java MyClass2 arg1 arg2"}); 
```

# java - 摘要/用户可选择窗口的界面设计

> ID：14533960
> 
> 赞同：1
> 
> 时间：2013-01-26T04:46:07.877
> 
> 标签：java, android

我有一个带有用户可配置对象的应用程序`MyObject`，它允许用户选择特定类型的窗口以在以后显示。在这一点上，选择最终将是 a`DialogFragment`或 a `FragmentActivity`。

这个想法是，稍后`MyObject`调用时，应用程序将根据配置中选择的选项显示对话框/片段`MyObject`。本质上，这两种窗口的功能是相同的，只是呈现方式不同。

我首先创建了一个*抽象*类设置来按照这些思路做一些事情

```
public abstract MyDialog extends DialogFragment {
    private static mDialog;

    public abstract void close();
    public abstract void open();
    public abstract void start();
    public abstract void stop();

    public MyDialog (MyObject myO) {
        switch (myO.getDialogType()) {
            case 1: // MyDialog1
                mDialog = new MyDialog1(myO);
                break;
            case 2: // MyDialog2
                mDialog = new MyDialog2(myO);
                break;
        }

        mDialog.open();
    }
}

public MyDialog1 extends MyDialog {

    @override
    pubilic void onCreateDialog() {

    }

    // other implemented methods...
}

public MyDialog2 extends MyDialog {

    @override
    pubilic void onCreateDialog() {

    }

    // other implemented methods...
} 
```

我被困的地方是我现在正试图添加相同的 heirachy `ActivityFragment`，我无法再扩展`MyDialog`。我试图让`MyDialog`扩展`Fragment`，然后子类扩展`DialogFragment`or `FragmentActivity`，但这会导致多重继承，这是不可能的。

**有没有办法从我的应用程序中的同一个基类扩展这两种`DialogFragment`类型`ActivityFragment`？**

我应该使用两个 case 语句来做一些更复杂的事情吗？我从来没有以抽象的方式使用过这么多，所以我是否错误地使用它？

```
public MyApp extends FragmentActivity {

    MyObject mMyO;

    public void someEvent() {
        if (mMyO.getDisplayType() == "Activity") {
            MyActivity myA;
            switch (mMyO.getType()) {
            case 1: // MyActivity1
                myA = new MyActivity1(mMyO);
                break;
            case 2: // MyActivity2
                myA = new MyActivity2(mMyO);
                break;
            }
            myA.open();
        }

        if (mMyO.getDisplayType() == "Dialog") {
            MyDialog myD;
            switch (mMyO.getType()) {
            case 1: // MyDialog1
                myD = new MyDialog1(mMyO);
                break;
            case 2: // MyDialog2
                myD = new MyDialog2(mMyO);
                break;
            }
            myD.open();
        }
    }
}

public MyDialog1 extends MyDialog {

    @override
    pubilic void onCreateDialog() {

    }

    // other implemented methods...
}

public MyDialog2 extends MyDialog {

    @override
    pubilic void onCreateDialog() {

    }

    // other implemented methods...
}

public MyActivity1 extends MyActivity {

    @override
    pubilic void onCreate() {

    }

    // other implemented methods...
}

public MyActivity2 extends MyActivity {

    @override
    pubilic void onCreate() {

    }

    // other implemented methods...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:47:22.270

看我不是OO的家伙。我更喜欢功能性但想在这里测试自己。所以让我们遵循mvc的想法。您有一个模型、myobject，以及两个视图（对话或活动）的选择。将视图和对象之间的映射具体化的正确位置是控制器，对吗？您的两个视图可以扩展一个 View 类。您的应用不应扩展视图类。它应该扩展一个 Controller 类。

您是否也在对不同的 UI 活动或事件进行分类？我认为你不应该这样做，除非你会在格式塔中参加几个活动。在这种情况下，有一个 ComplexEvent 超类和一个要捕获的事件列表，或者具有相同目的的子类。

# cookies - 当我 CURL 时 Cookie 会发生什么

> ID：14533963
> 
> 赞同：0
> 
> 时间：2013-01-26T04:47:34.157
> 
> 标签：cookies, curl

我使用 curl 从 url 加载内容，但是当我从网站执行 cookie 时，不会在我的浏览器中设置。

有没有更好的方法来使用 php 打开外部 url 并使 cookie 工作？

顺便说一下，我是如何加载带有 curl 的页面的，这可能就是为什么不设置 cookie 的原因。 `<img src="http://apprevues.com/pxl.php?i=1" height="1" width="1" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:23:36.617

当通过 PHP 使用 cURL 请求网页时，请记住请求和响应都与服务器上的 PHP 脚本相关联。此时，客户端的浏览器根本没有发挥作用。有一些使用 cURL 管理 cookie 的方法（请参阅： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)），但是对于您在此处描述的内容，cookie 需要归客户端所有浏览器。

为了让 cookie 与客户端相关联，请求和响应也必须与客户端相关联（即浏览器必须访问 url 本身）。

我建议学习[Header 重定向](http://php.net/manual/en/function.header.php)；我相信这些将满足您的需求。它只是将客户端的浏览器定向到给定的 url，从而将来自站点的任何 cookie 与您的客户端浏览器而不是您的服务器相关联。

这是一个示例实现，可帮助您入门：

```
<?php
$url = "https://google.com/";
header("Location: ".$url);
?> 
```

我希望这有帮助。

# javascript - 使用 .after() 创建表格但无法访问变量的值来填充单元格

> ID：14533965
> 
> 赞同：1
> 
> 时间：2013-01-26T04:47:49.890
> 
> 标签：javascript, jquery

我正在使用 .after 向我的网站添加表格，但我需要将变量中的值插入到单元格中。好像我无法访问它们。可能我采取了完全错误的方法。

```
var object0001= {price: 1000, bedrooms:2}

$(document).ready(function() {

    $("#dot0003").hover(
        function(){

            $("#tablespace").after(
            '<table  border="4">'+
            '<tr><td>price</td>'                '<td>object0001.price</td></tr>'+
            '<tr><td>number of bedrooms</td>'   '<td>object0001.bedrooms</td></tr>'+
            '<tr><td>livingroom</td>'           '<td><img src="_index/_dots/dot.gif" width="20" height="20"></td></tr></table>')        

    });

    }); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:52:30.797

应该是这样的

```
var object0001= {price: 1000, bedrooms:2};

$(document).ready(function() {
  $("#dot0003").hover(function(){
    $("#tablespace").after(
      '<table  border="4">'+
      '<tr><td>price</td><td>'+object0001.price+'</td></tr>'+
      '<tr><td>number of bedrooms</td><td>'+object0001.bedrooms+'</td></tr>'+
      '<tr><td>livingroom</td><td><img src="_index/_dots/dot.gif" width="20" height="20"></td></tr></table>')        
  });
}); 
```

'' 之间的任何内容都是一个字符串，并且不会被解析为 JavaScript

尝试将所有的html放在一个变量中，然后将其传递给append，这样可以在您尝试维护代码时节省您的时间

# javascript - Javascript Window应用商店Metro风格中的Arraylist，Linkedlist？

> ID：14533974
> 
> 赞同：1
> 
> 时间：2013-01-26T04:48:51.510
> 
> 标签：javascript, window, microsoft-metro

我正在为将使用 HTML5 和 Javascript 的 Windows 应用商店编写游戏。

该平台是否有任何 ArrayList 或 LinkedList 的实现？如果是这样，有人可以给我一个如何使用它的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:49:55.233

JavaScript`Array`没有固定长度，因此可以像`ArrayList`. 你只需要使用[正确的方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/prototype#Methods)：

*   `arrayList.Add(element)`=`array.push(element)`
    将一个元素添加到数组的末尾。push/pop 命名就像一个队列：最后添加/删除。
*   `arrayList.AddRange(collection)`=`array.push(element1, element2, ...)`
    将多个元素添加到数组的末尾。像许多其他`Array`方法一样，`push`可以附加可变数量的元素。
*   `arrayList.RemoveRange(index, count)`=`array.splice(index, count)`
    这个名字有点不明显。`splice`在 处删除给定数量的元素 ( `count`) `index`。
*   `arrayList.RemoveAt(index)`= `array.splice(index, 1)`：
    传递`1`as `count`to`splice`只删除一个元素。
*   `arrayList.Insert(index, x)`=`array.splice(index, 0, element)`
    `splice`在删除给定数量的元素后，还需要在索引处插入可变数量的元素。通过不删除任何元素（传递`0`as `count`），您可以使用它来简单地插入新元素。

所有这些方法都正确地调整了数组的长度和移动元素，而不是`delete array[index]`. 只是从*对象*`delete`中删除*属性*并且不会以不同的方式处理数组，因此您会留下一个“差距”。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:29:28.107

我发现了我的问题！我只想释放数组中的内存。可以通过对数组的每个元素使用“删除”关键字来完成，但数组的长度不会减少。

关于 JavaScript 中的数组列表，我认为当前的内置数组很好。无需实施更多。*

# jquery - jQuery if 语句 - 它可以先行（或者必须在事件之后进行）？

> ID：14533978
> 
> 赞同：2
> 
> 时间：2013-01-26T04:49:25.970
> 
> 标签：jquery, if-statement, jquery-animate

我正在努力让它发挥作用。我正在创建一系列可点击的按钮来下拉菜单。我希望使它按如下方式工作：

1.  如果下拉菜单全部隐藏 - 动画高度
2.  如果任何一个下拉菜单可见 - 显示/隐藏以在菜单之间切换

当动画到一个新的下拉菜单在两种情况下都相同时，我可以做到这一点。然而，这不是我想要的样子。我真的很喜欢当一个已经打开时显示/隐藏的“切换”以及第一次打开时的高度动画（以及一旦关闭）。由于我可能会更进一步并启用向下/向上拖动以进行初始打开和关闭，并在打开后向左/向右滑动以在下拉菜单之间移动，这是每个场景需要单独动画的另一个原因。

我首先尝试使用事件来执行此操作，即 click() 按钮和 if() all :hidden，然后执行此操作... click() 按钮和 if() :visible，然后执行其他操作。但这不起作用，菜单刚刚打开并立即关闭（我认为是因为两个 .click() 事件都是背靠背发生的，因为它同时识别了我的 if 语句？不确定。）

下一次尝试，也就是我在下面所做的尝试，尝试将每个 .click() 包装在它自己的 if 语句中以分别定义每个。但正如您从以下小提琴中看到的那样：

[http://jsfiddle.net/U3jHf/31/](http://jsfiddle.net/U3jHf/31/)

不工作...

这是jQuery：

```
//sideUI drop down

if( $('#sideUIContainer').is(':hidden') && $('#sideUISearchContainer').is(':hidden') && $('#sideUIActionContainer').is(':hidden') ){

    $('#navNavigate').click(function(){

            $('#sideUIContainer').show();       
            $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'504px'});          
            $('#navNavigate').addClass('active');

    }

    $('#navSearch').click(function(){

            $('#sideUISearchContainer').show();     
            $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'504px'});          
            $('#navSearch').addClass('active');

    }

    $('#navAction').click(function(){

            $('#sideUIActionContainer').show();     
            $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'504px'});          
            $('#navAction').addClass('active');

    }

};

// toggle drop down when UI open - menu

if($('#sideUIContainer').is(':visible')){

    $('#navNavigate').click(function(){

        $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'0'}, function(){

            $('#sideUIContainer').hide();
            $('#navNavigate').removeClass('active');

        }); 
    }

    $('#navSearch').click(function(){

        $('#sideUIContainer').hide();
        $('#navNavigate').removeClass('active');

        $('#sideUISearchContainer').show();
        $('#navSearch').addClass('active');

    }); 

    $('#navAction').click(function(){

        $('#sideUIContainer').hide();
        $('#navNavigate').removeClass('active');

        $('#sideUIActionContainer').show();
        $('#navAction').addClass('active');

    }); 

};

// toggle drop down when UI open - search

if($('#sideUISearchContainer').is(':visible')){

    $('#navNavigate').click(function(){

        $('#sideUISearchContainer').hide();
        $('#navSearch').removeClass('active');

        $('#sideUINavigateContainer').show();
        $('#navNavigate').addClass('active');

    }); 

    $('#navSearch').click(function(){

        $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'0'}, function(){

            $('#sideUISearchContainer').hide();
            $('#navSearch').removeClass('active');

        }); 
    }

    $('#navAction').click(function(){

        $('#sideUISearchContainer').hide();
        $('#navSearch').removeClass('active');

        $('#sideUIActionContainer').show();
        $('#navAction').addClass('active');

    }); 

};

// toggle drop down when UI open - action

if($('#sideUIActionContainer').is(':visible')){

    $('#navNavigate').click(function(){

        $('#sideUIActionContainer').hide();
        $('#navAction').removeClass('active');

        $('#sideUINavigateContainer').show();
        $('#navNavigate').addClass('active');

    }); 

    $('#navSearch').click(function(){

        $('#sideUIActionContainer').hide();
        $('#navSearch').removeClass('active');

        $('#sideUISearchContainer').show();
        $('#navSearch').addClass('active');

    }); 

    $('#navAction').click(function(){

        $('#sideUIContainer, #sideUISearchContainer, #sideUIActionContainer').animate({'height':'0'}, function(){

            $('#sideUIActionContainer').hide();
            $('#navAction').removeClass('active');

        }); 
    }

}; 
```

如果我必须澄清上述内容，请告诉我。但希望我的小提琴和 jQuery 代码能帮助你们进一步理解我想要做什么。

非常感谢任何和所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:58:21.220

我不会按照你提议的方式做事。维护所有这些单独的事件处理程序将是一件痛苦的事情。相反，使用导航上的数据属性和 jQuery 的`data`方法来检索它。这将让您以编程方式选择正确的侧边栏，而无需单独的处理程序。

在您的处理程序中，您将向活动导航项添加一个“活动”类。然后检查这个类以确定用户遇到了三种可能性中的哪一种。

1.  目前没有打开菜单。动画进去。
2.  菜单当前打开。隐藏当前菜单。显示新菜单。
3.  再次单击相同的菜单。动画出来。

我放弃了您的 html/css 模板，因为它不包含可使用的功能元素，而且我不想在问题的非 js 部分浪费时间。代码仍然可以清理一下。我变得懒惰并在那里留下了一个`foo`。但这应该足以让您从中获得一个有效的、强大的解决方案。

[http://jsfiddle.net/wSFED/4/](http://jsfiddle.net/wSFED/4/)

```
$('.nav').click( function() {
    debugger;
    var $this = $(this);

    //current menu has been clicked again
    if ($this.hasClass('active')) {
        //however you want to handle this. I collapsed it again
        var $foo = $('#' + $this.data('menu'));
        $foo.animate( {width:0}, 500);        
        $this.removeClass('active');
        return;
    }

    //another menu is already active
    var $active = $('.nav.active');
    if ($active.length) {
        //toggle current clicked item 
        var thismenu = $this.data('menu');
        var activemenu = $active.data('menu');
        var $thismenu = $('#' + thismenu);
        var $activemenu = $('#' + activemenu);

        //hide the old active menu and remove active class from nav
        $activemenu.css( {width:0} );
        $active.removeClass('active');

        //show the new menu and add active class to nav
        $thismenu.css( {width:300} );
        $this.addClass('active');
        return;
    }

    //no menu is active - animate menu in
    var $menu = $('#' + $this.data('menu'));
    $menu.animate( {width:300}, 500);
    $this.addClass('active');

}); 
```

# javascript - 约束 DIV 中的固定内容

> ID：14533979
> 
> 赞同：1
> 
> 时间：2013-01-26T04:49:39.053
> 
> 标签：javascript, jquery, css

我在页面上有一个固定位置元素。我希望该元素包含在我分配的 ID 或类的某个 div 标记中。这是一个[例子](http://jsfiddle.net/Lynda333/44L8t/)。在示例中，浮动条不应高于或低于黑框。

我不介意使用 jQuery 来更改功能，我使用的是 v. 1.8.3。

[这里是一个展示](http://photoshopland.com/downloads/photoshop-gradients/the-ultimate-gradients-pack-1/)我所追求的例子的网站。看左边。

这是示例的代码：

**HTML**

```
<div class="wrapper">
<div class="top">
    <p>&nbsp;</p>
</div>
<div class="container">
<p>Floating Bar Should not go above this point.</p>

<p>&nbsp;</p>

</div>
<p>Floating Bar Should not go below this point.</p>
    <p>&nbsp;</p>

</div>

    <div class="add-this-container" >
    <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_floating_style addthis_counter_style">
<a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
<a class="addthis_button_tweet" tw:count="vertical"></a>
<a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
<a class="addthis_counter"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js">   </script>
<!-- AddThis Button END -->
</div> 
```

**CSS**

```
.wrapper{
    height:1500px;
    background: #808080;
    width: 300px;
}
.container{
    background: #111;
    height: 600px;
}
.top{
    height: 400px;
    background: #7e0000;
}
.add-this-container{
position: absolute;
    left: 350px;
    top: 250px;
}
.addthis_floating_style{
    background: #ccc;
 }
p{
    color: white;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T09:08:38.037

我在您的 html 中添加了一些 ID 以获取它们的位置（页眉和页脚）

```
<div class="wrapper">
    <div class="top">
        <p>&nbsp;</p>
    </div>
    <div class="container">
    <p id="header">Floating Bar Should not go above this point.</p>

    <p>&nbsp;</p>

    </div>
    <p id="footer">Floating Bar Should not go below this point.</p>
        <p>&nbsp;</p>

</div>

<div class="add-this-container" >
        <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_floating_style addthis_counter_style">
<a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
<a class="addthis_button_tweet" tw:count="vertical"></a>
<a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
<a class="addthis_counter"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>
<!-- AddThis Button END -->
</div> 
```

一旦浮动 div 到达页眉或页脚分界点，这个小脚本就会停止它。我把剧本写得有点“不合时宜”，以帮助你了解它的作用和时间。它可以做得更漂亮一些，也可以为位置变化设置动画。

```
$(function(){

    //Scroll event, sets position on scroll
    $(document).scroll(function() { 
        position();        
    });

    // Set initial position on document ready
    position();
});

function position()
{
            //Collect positions
        var floaterHeight = $('.addthis_floating_style').height();
        var headerBreakoff = $('#header').offset().top + $('#header').height();
        var footerBreakoff = $('#footer').offset().top;

        var newTop = $(document).scrollTop() + 20; // this will be position when between header and footer        

        if(newTop <= headerBreakoff) // Above header
        {        
            newTop = headerBreakoff;
        }
        else if(newTop + floaterHeight >= footerBreakoff) // Below footer
        {
            newTop =  footerBreakoff - floaterHeight;
        }

        //Set position
        $(".addthis_floating_style").offset({ top: newTop});
} 
```

这是小提琴

[http://jsfiddle.net/urbanbjorkman/BJ6EP/](http://jsfiddle.net/urbanbjorkman/BJ6EP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:11:21.463

将 jQuery 函数附加到窗口滚动，并检查 div 是否与您设置的边界的顶部或底部重叠。如果重叠，则添加或删除一个类，使其从固定位置元素变为规则定位元素，并限制在指定的范围内。当用户向后滚动时，将其翻转回固定位置，它会再次“浮动”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:20:11.427

By pure coincidence I cam across a jQuery Plugin that does this for me. It is called "Sticky Floating Box" which can be found [here](http://dropthebit.com/74/sticky-floating-box/).

# github - jekyll 不想与 redcarpet 合作

> ID：14533982
> 
> 赞同：1
> 
> 时间：2013-01-26T04:50:32.470
> 
> 标签：github, jekyll, github-pages, redcarpet

我已经安装了 jekyll 并想使用 redcarpet。我的 jekyll 没有从基本安装中获得这种能力 - 所以我尝试将它作为插件安装：[https ://github.com/nono/Jekyll-plugins](https://github.com/nono/Jekyll-plugins)

它仍然无法正常工作。有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T05:04:11.257

解决方案：不需要该插件 - 并且 jekyll 0.12.0（截至本文发布时为当前版本）支持 redcarpet 2.whatever 本机，只需`markdown: redcarpet`在`_config.yml`文件中说明即可。只需获得新版本的 jekyll 和最新的 redcarpet，就可以了。

# javascript - 确保 JavaScript 中的条件始终为真

> ID：14533987
> 
> 赞同：0
> 
> 时间：2013-01-26T04:51:03.030
> 
> 标签：javascript, assert

在 JavaScript 中，是否可以测试一个条件是否在程序的整个执行过程中保持为真？在这里，我想确保变量 a 从程序开始到结束始终可以被 3 整除。

```
//Assert that the following is always true, and print an error message if not true
ensureAlwaysTrue(a % 3 == 0); //print an error message if a is not divisible by 0
                              //from this point onward

a = 6;

a = 10 //print error message, since a % 3 != 0

function ensureAlwaysTrue(){
    //this is the function that I'm trying to implement.
} 
```

一种解决方案是在每个变量赋值后添加语句来检查断言，但这将是多余和麻烦的。是否有更简洁的方法来检查整个程序执行过程中条件是否为真？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:00:16.250

哇，这些都是可怕的解决方案。如果您真的想这样做，您可以创建一个模型并使用模型上的方法访问该值。这是一个例子：

```
function Model(value){
  this.value = value;
}

Model.prototype = {
  get: function(){
    return this.value;
  },

  set: function(value){
    if(this.validate(value)){
      this.value = value;
      return this;
    }
    throw Error('Not a valid value.');
  },

  test: function(func){
    this.validate = func;
    return this;
  }
};

var a = new Model();

a.test(function(val){ return val == 7 });

// Sets value of a to 7
a.set(7);
// Gets value of a (7 in this case)
a.get();
// Throws an error
a.set(5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T04:57:30.343

不。

您可能在 Javascript 中获得的最接近的方法是找到一些“编译”您的代码以`ensure`在每个语句之后自动注入函数调用的工具，例如用于 Java 的[AspectJ 。](http://www.eclipse.org/aspectj/)

使用另一种语言的潜在方法可能是使用后台线程。Javascript 线程（网络工作者）将无法访问其他线程中的变量。Javascript 也是一种解释性语言，它只会按顺序运行代码——除非`ensure`函数实际上在执行路径中，否则它不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T05:00:18.830

好吧，你可以添加一个定时间隔，比如

```
assertInterval = 10; //milisseconds

function ensureAlwaysTrue(condition)
{
    setInterval(function(){ if(!condition()) error(); }, assertInterval);
} 
```

你会这样称呼它：

```
var a = 6;

ensureAlwaysTrue(function(){return (a % 3 == 0);}); 
```

那会抓住它，但最多有`assertInterval`几毫秒的延迟。

**编辑：** 它实际上不起作用，正如@Chris 指出的那样：“您的间隔函数实际上不会在当前执行函数的语句之间运行”。这是真的，它只适用于事件之间的断言等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T05:22:06.167

根据@Chris (http://stackoverflow.com/a/14534019/1394841) 的想法，您可以将整个代码包含在一个字符串中，然后执行以下操作：

```
function ensureAlwaysTrue(condition, code)
{
    var statements = code.split(";");
    for (var i = 0; i < statements.length-1; i++) { //last statement is empty
        eval(statements[i] + ";");
        if (!condition()) error();
        //break; //if desired
    }
}

var code =
"a = 6;\
a = 10; //print error message, since a % 3 != 0\
";

ensureAlwaysTrue(function(){return (a % 3 == 0);}, code); 
```

# java - 用于存储 html 解析器规则的文件格式

> ID：14533989
> 
> 赞同：1
> 
> 时间：2013-01-26T04:51:07.103
> 
> 标签：java, android, html-parsing, jsoup

我正在使用 Jsoup 解析结构随时间变化的页面。现在解析配置是用 Java 编写的，所以每次修改规则时我都必须发布一个新版本。
是否有某种基于 json 或 xml 的标记语言可以用来将解析配置存储在外部文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:08:22.543

您可以尝试使用 Clojure ，Clojure 可以代表您的配置数据并调用 Jsoup 进行解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T00:15:13.917

选项包括 XPath 和 CSS 选择器语法。后者由 Jsoup 支持。

# php - 多个复选框值进入数据库循环

> ID：14533994
> 
> 赞同：0
> 
> 时间：2013-01-26T04:51:50.440
> 
> 标签：php

试图在我的 mySQL 数据库中插入多个值，这就是我到目前为止所得到的。

```
if (in_array(",", $_POST['categories'])) { /* Other was selected */}
        $cat = implode(" ,", $_POST['categories']);
        if (in_array(",", $_POST['subcat'])) { /* Other was selected */}
        $sub = implode(" ,", $_POST['subcat']);
        if (in_array(",", $_POST['type'])) { /* Other was selected */}
        $type = implode(" ,", $_POST['type']);
        if (in_array(",", $_POST['payment'])) { /* Other was selected */}
        $payment = implode(" ,", $_POST['payment']);

        $sql = "INSERT INTO tbl_locations SET

                name='".$_POST['name']."', 
                alias='".$_POST['alias']."',
                category_id='$cat',
                subcategory_id='$sub',
                tourism_type_id='$type',
                lgu_id='$payment',
                latitude='".$_POST['latbox']."', 
                longitude='".$_POST['lngbox']."'
            ";
        $qry= mysql_query($sql) or die (mysql_error());
        if ($qry)
        {   
            header("location:addsuccess.php");
            exit();
        } 
```

如您所见，不仅有 1 个多个条目，还有 4 个。. 将不胜感激如何进行此操作。..我的表格也`name=name[]`没有问题。它只是将单个值插入到我的数据库中，而不是多个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:08:18.317

您的应用程序的问题在于您的数据库设计。如果您可以有多个类别、类型、付款等，那么您需要一个可以处理此问题的关系模型。这样做的一种方法是有一个处理您的请求的表，然后是每个请求的类别、类型、付款等的子表。

```
> 请求表

身份证日期
1 2012-01-25

> 类别表

request_id 类别
1 1
1 2
```

等等。

# php - 如果 MySQL 连接或数据库的链接有错误，则打印

> ID：14533995
> 
> 赞同：2
> 
> 时间：2013-01-26T04:51:52.130
> 
> 标签：php, sql

```
$link = mysql_connect($db_host, $db_user, $db_password);
if (!$link) {
  die ("MySQL Connection error");
}

mysql_select_db($db_name, $link) or die ("Wrong MySQL Database"); 
```

如果 $link 或 $db_name 不正常，我尝试编写一些行回显一些文本

像这样的东西

```
if (!$link || !$db_name) {
  echo 'Some Text Here';
} 
```

但它没有用

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:55:23.960

`mysql_select_db`是一个布尔函数，所以。

```
$link = mysql_connect($db_host, $db_user, $db_password);

$db = mysql_select_db($db_name, $link);

if(!$link && !$db) {
  echo "nothing works";
} 
```

[**但是请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。

# ios - 如何强制应用从后台返回时始终从头开始？

> ID：14533997
> 
> 赞同：3
> 
> 时间：2013-01-26T04:52:29.723
> 
> 标签：ios, objective-c, background-process

我正在开发一个需要从头到尾运行协议的应用程序。当从后台返回时，如何强制应用程序始终从头开始，无论它留在哪里。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T05:01:42.977

如果您的目标是在每次启动时从头开始重新启动应用程序，只需在 info.plist 文件中添加/`UIApplicationExitsOnSuspend`更改`YES`密钥

[这是文档http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)中的相关链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:58:28.660

一种选择是使用`exit()`. 但是，该方法仅用于测试/编程目的。Apple 不会接受您的代码中的内容。

另一种选择是创建一个类似于大多数社交媒体 API 使用的方法的全局会话，并且在您的 App Delegate 中：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

将全局会话设置为关闭。然后只需将您的协议逻辑设置为在会话关闭时重新启动。

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:58:35.477

在方法中编写您的应用程序启动代码`applicationDidBecomeActive`，因为此方法在您第一次启动应用程序时以及当您来自后台时都会调用