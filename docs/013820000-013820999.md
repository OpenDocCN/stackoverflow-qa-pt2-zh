# StackOverflow 问答 13820000-13820999

# android - Android webview 和 https

> ID：13820008
> 
> 赞同：1
> 
> 时间：2012-12-11T12:03:41.553
> 
> 标签：android, webview

我有个问题。我有 3.0 api 的申请。我正在使用 webview 来显示页面。我有一个问题，如果 webview 正确使用 https？我想创建商店，我想使用 https。该协议是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:16:01.540

你应该没问题，但如果你没有来自受信任机构的证书，你将需要以某种方式处理这个问题。

以下代码片段

```
webview = (WebView) findViewById(R.id.webviewId);
webview.setWebViewClient(new WebViewClient() {
    public void onReceivedSslError (WebView view, 
        SslErrorHandler handler, SslError error) {
            handler.proceed() ;
    }
} 
```

将向用户显示一个对话框，验证他们是否信任您的站点并希望继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:16:59.767

我们一直在为我们的一个应用程序使用带有 webviews 的 HTTPS，没有任何问题。我们通过它处理付款，因此您可以安全使用它。

只需确保您使用的是来自受信任机构的证书，这样您就不需要任何黑客攻击。

# forms - FOSUserBundle - 持久化相关实体/文档

> ID：13820018
> 
> 赞同：0
> 
> 时间：2012-12-11T12:04:03.157
> 
> 标签：forms, symfony, fosuserbundle, database-relations

我有一个应用程序，每个用户都有一个“家”。

我已经覆盖了我的 FOSUserBundle 注册 FormType 以嵌入 Home 并在注册过程中捕获一些属性。不幸的是，当我注册时，新用户仍然存在，但新主页没有。

我真的不想在用户上设置 postPersist 侦听器，以防我想为现有主页创建第二个用户。我假设我必须覆盖 RegistrationFormHandler onSuccess() 或 process() 方法并手动保留主页？如果是这种情况，我是否必须在构造函数中注入 DocumentManager？这是最好的方法吗？

如果这有什么不同，我使用 Doctrine MongoDB ODM 作为存储层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:14:10.663

我[创建了自己的 RegistrationFormHandler](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md#overriding-form-handlers)并覆盖了 onSuccess 方法：

```
public function onSuccess(UserInterface $user, $confirmation)
{
    $home = $user->getHome();
    $this->documentManager->persist($home);
    $this->documentManager->flush();

    parent::onSuccess($user, $confirmation);
} 
```

这使用了您需要在构造函数中注入的文档管理器。

# oracle - 如何释放以前分配给 BLOB 的空间？

> ID：13820022
> 
> 赞同：1
> 
> 时间：2012-12-11T12:04:05.907
> 
> 标签：oracle, plsql, blob

我被要求释放 Oracle 中分配给 BLOBS 的空间。我将提取数据，然后将 BLOB 设置为 null 以释放空间。

根据 DBA，这不会释放空间。我正在使用的 SQL 是

```
UPDATE TABLENAME SET BLOB_FIELD_A = NULL 
```

我做了一些谷歌搜索，有一个名为`EMPTY_BLOB()`; 没有评论释放先前分配的空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:31:32.450

在 oracle 中缩小段的唯一方法是移动/缩小它。

即，一旦将 lob 更新为 null，您就必须运行：

```
alter table b modify lob (c) (shrink space); 
```

（从 10.2 开始可用）或

```
alter table b move lob(c) store as (tablespace your_tablespace); 
```

# android - Android 和使用 google 帐户 authtoken

> ID：13820028
> 
> 赞同：1
> 
> 时间：2012-12-11T12:04:21.693
> 
> 标签：android, web-services, accountmanager

我想将谷歌身份验证令牌用于我拥有的谷歌日历网络服务。将令牌从 android 设备发送到 web 服务的替代方法是什么？

Atm，我从我的 android 设备中的 accountmanager 获取我的 gmail 帐户令牌，但我不确定这个令牌是否是在我的服务器端用于修改我的谷歌日历（带有谷歌 API 的网络服务）的正确令牌。

我想要一些关于如何做这些事情的意见，什么是正确的方法。

（日历逻辑需要在 web 服务上，它是一个正在运行的自动化进程等，带有计时器/时间表等等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:51:04.553

我对如何在客户端和服务器之间进行通信没有任何建议，但是如果您想与 Google 日历集成，则 gmail 帐户令牌不是正确的令牌。

`authTokenType`你给getAuthToken [()](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)应该是**oauth2:https://www.googleapis.com/auth/calendar**如果你需要读/写访问或**oauth2:https://www.googleapis.com/auth/calendar.readonly**如果只读访问就足够了。

另请参阅[日历 API](https://developers.google.com/google-apps/calendar/auth)的文档。

# iphone - 从 uiimageView 中删除白色像素

> ID：13820035
> 
> 赞同：1
> 
> 时间：2012-12-11T12:04:41.633
> 
> 标签：iphone, objective-c, ipad, uiimageview, cgcolor

我是IOS开发的新手。我有一个`UIImageView`并且我想删除我的图像视图中的白色像素。这是否可以去除白色像素。

# mdx - 具有按二维分组的聚合值的简单 MDX

> ID：13820050
> 
> 赞同：0
> 
> 时间：2012-12-11T12:05:54.937
> 
> 标签：mdx

我对 MDX 很陌生，对于初学者，我下载了一个用于 excel 0 OLAPPivotGrid Extensions 的插件。我用它来生成报告，复制 MDX 并使用它绑定到网格。

但是，我需要创建其他简单的查询，但是在创建可以通过 SQL 轻松完成的事情时发现问题。例如，如果我有这个 SQL 查询，我将如何使用 MDX？

选择 Day, ProductType, sum(amount), sum(amount2) where day => 20120101 and day < 20120201 Group by Day,ProductType

例如，现在在我的情况下，Day 和 product type 是 2 个不同的维度，在执行这种类型的 MDX 查询时，我得到“函数中指定的两个集合具有不同的维度”。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:20:11.880

我通过对两个维度使用 CrossJoin 和 DrilldownLevel 解决了这个问题。然后我在 MDX 查询的 [From] 部分使用了过滤器。

# batch-file - 批处理脚本：删除文件夹及其 X 天前创建的内容

> ID：13820059
> 
> 赞同：1
> 
> 时间：2012-12-11T12:06:22.407
> 
> 标签：batch-file, windows-server-2008

我有一个包含一堆文件夹和 .zip 文件的备份文件夹。

我基本上想创建一个批处理脚本（每晚运行），删除 X 天或更早之前创建的所有文件夹（及其内容）。

我尝试了以下 FORFILES 命令，但它只删除文件而不是文件夹：

```
@echo off
:: set folder path
set dump_path=C:\Users\sw\Desktop\Test

:: set min age of files and folders to delete
set max_days=1

:: remove files from %dump_path%
forfiles -p %dump_path% -m *.* -d -%max_days% -c "cmd  /c del /q @path"

:: remove sub directories from %dump_path%
forfiles -p %dump_path% -d -%max_days% -c "cmd /c IF @isdir == TRUE rd /S /Q @path" 
```

期待您的帮助。

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:26:06.493

请参阅此示例，使用 ROBOCOPY将**超过 7 天**的文件**移动**到垃圾文件夹，然后将其删除。

 **```
MD %temp%\trash
ROBOCOPY %src% %temp%\trash /MOVE /E /MINAGE:7
RD %temp%\trash /s 
```

**编辑**添加`/E`到递归目录的开关**

# php - PHP 响应式条件包含

> ID：13820064
> 
> 赞同：2
> 
> 时间：2012-12-11T12:06:50.553
> 
> 标签：php, css, mobile

我遇到了响应式布局的问题。

布局必须根据浏览器宽度在不同位置包含相同的 php 文件。

**显示：无；**仍然加载内容并可能破坏所述文件中的代码。

```
<div id="more_than_960">
    <?php require "content.php";?>
</div>

<div id="less_than_960">
    <?php require "content.php";?>
</div> 
```

有没有更好的方法来实现目标？

问题不在于隐藏内容，而是将其从加载过程中排除。

* * *

**对于其他有这个问题的人。这是一个很好的解决方案，提供了我的 Markus：**

[https://github.com/serbanghita/Mobile-Detect](https://github.com/serbanghita/Mobile-Detect)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:13:38.610

您不应该在服务器端进行响应，而应该在客户端使用`@media`查询和必要的 JavaScript 进行响应。所以你会有类似的东西：

```
@media (min-width:960px) {
    .somestuff {
        display: none;
} 
```

等等

所以你需要稍微改变你的方法。制作能够很好地降级的内容，而不是插入重复的内容。

如果您确实需要在服务器端执行部分操作，您可能不想询问宽度，而是直接使用这样的库检测特定设备组[https://github.com/serbanghita/Mobile-Detect](https://github.com/serbanghita/Mobile-Detect) .

此外，您可能希望将标记与内容分开。

```
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();

if ($detect->isMobile()) {
    $markup = 'your markup';
}
else if ($detect->isTablet()) {
    $markup = 'your alternative markup';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:10:36.270

使用媒体查询显示内容。无需显示/隐藏 div

请参阅此链接以获取帮助[http://line25.com/tutorials/create-a-responsive-web-design-with-media-queries](http://line25.com/tutorials/create-a-responsive-web-design-with-media-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:11:24.600

您可以制作`If-Else function`并使用`$_SERVER['HTTP_USER_AGENT']`来检查正在使用的设备。并使一个 div 被加载。

# mysql - MySQL Join 与分组和排序

> ID：13820066
> 
> 赞同：0
> 
> 时间：2012-12-11T12:06:54.553
> 
> 标签：mysql, join

我试图在两个表上做一个 LEFT JOIN/INNER JOIN/JOIN（忘记了差异，我的 MySQL 知识变得尘土飞扬......）。一个是`categories`，另一个是`images`。

我想返回`categories`具有特定`parent`值的所有列表，并为每个类别返回该类别的最新图像`images`。

我结束了这个查询：

```
SELECT * FROM `categories` AS `a`
         JOIN (SELECT `im`.`preview` AS `preview`,
                      `im`.`cid` AS `cid` 
               FROM `images` AS `im`
               ORDER BY `im`.`cid` DESC) AS `b`
               ON (`a`.`cid` = `b`.`cid`)
         GROUP BY `preview` 
```

这将为类别表中的每一行从图像表中返回一个图像，但是如果我尝试对结果表进行条件/排序，我将开始得到奇怪的结果，例如将结尾更改为此或任何类似的变体：

```
WHERE `a`.`parent` = 10
GROUP BY `preview`
ORDER BY `a`.`cid 
```

将不胜感激您对此有任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:13:13.193

您也可以不加入，只需使用子选择：

```
SELECT
c.*,
(SELECT preview 
 FROM images img 
 WHERE img.cid = c.cid 
 ORDER BY img.id DESC
 LIMIT 1) AS preview
FROM categories c 
```

# android - Android：通过 3.5mm 插孔输入数据

> ID：13820073
> 
> 赞同：1
> 
> 时间：2012-12-11T12:07:15.213
> 
> 标签：android

我们可以通过 3.5mm 插孔和安卓手机将数据发送到手机并将其写入文本文件吗？我的主要动机是将振动数据发送到移动设备，然后对其进行处理。限制是我们不能使用手机的加速度计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:13:33.120

我认为没有问题，但我认为数据必须以某种方式编码，这需要一些创造力，但从这个开始应该没问题：[Android：需要记录麦克风输入](https://stackoverflow.com/questions/6959930/android-need-to-record-mic-input)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:15:39.070

据我所知，3.5 毫米插孔用于音频 O/P。向它发送数据是什么意思？

# java - 如何使用 TimeZone ID 获取 GMT 等效值

> ID：13820074
> 
> 赞同：2
> 
> 时间：2012-12-11T12:07:24.473
> 
> 标签：java, calendar, timezone, dst, gmt

我想使用 TimeZone id 示例获取 GMT 等效值：

太平洋/斐济 ==> 应该是 GMT+13，因为 DST 于 2012 年 10 月 21 日星期日开始。但是，我得到的是 GMT+12。

下面是我的代码：

```
public static void main(String[] args){

    String m_utcDatePattern = "yyyy-MM-dd'T'HH:mm:ss.SSS";
    String pnrCreation = "2012-12-10T01:14:22.000";

    Calendar calendar = convertDateStringToCalendar(pnrCreation, m_utcDatePattern);

    double offset = TimeZone.getTimeZone("Pacific/Fiji").getOffset(calendar.getTimeInMillis())/(60*60*1000.0);

    System.out.println("GMT+" + (int) offset);  //result is GMT+12, it should be GMT+13
}

//Date String to Calendar
public static Calendar convertDateStringToCalendar(String value, String fromPattern)     
{
       Calendar calendar;

       if (value == null)
       {
           return null;
       } 
       else 
       {
           DateFormat dateFormat = new SimpleDateFormat(fromPattern);
           Date date;
           try 
           {
               date = dateFormat.parse(value);
               calendar = Calendar.getInstance();
               calendar.setTime(date);
           } 
           catch (ParseException e) 
           {
               return null;
           }

           return calendar;
       }

} 
```

提前致谢！:-)

问候，
拉克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:25:10.657

无论如何，您的代码目前有点损坏，但根本问题是您使用的是旧时区数据。

我无法确定现在更改的*确切版本，但在 TZDB 2012e 版本中，斐济有一条规则：*

```
Rule    Fiji    2012    only    -   Jan 22  3:00    0   - 
```

在 2012h 版本中，它具有：

```
Rule    Fiji    2012    max -   Jan Sun>=18 3:00    0   - 
```

（以及其他适当的更改。）

我相信斐济*会*放弃夏令时，但最终还是决定保留它们。

我不知道为“普通”Java 更新时区数据库有多么容易——我建议您改用[Joda Time](http://joda-time.sf.net)，它允许您使用本地构建的最新数据版本。它也是一个更清洁的 API :)

# file - 在 Erlang 中读取带有变音符号的文本文件的内容

> ID：13820078
> 
> 赞同：1
> 
> 时间：2012-12-11T12:07:47.113
> 
> 标签：file, utf-8, erlang, diacritics

我正在尝试读取一个文本文件的内容，该文件可能包含变音符号和类似的东西。我已经在 Erlang 中使用了关于 unicode 的内容，但我仍然不知道如何正确读取文件。这是我读取文件的代码：

`reader (File) -> case io:get_line(File,'') of eof -> []; {error, Reason} -> Reason; Line -> [Line] ++ reader(File) end.`

但最终我的结果是：`Ã¼`当阅读`ü`

我必须如何转换`Line`才能获得预期的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:51:15.220

该文件看起来像是用 utf-8 编码的，但 Erlang 用 latin1 读取它。

获取句柄时指定编码：

```
file:open(Fname, [read, {encoding,utf8}]) 
```

语法可能不正确，我从[手册](http://erlang.org/doc/apps/stdlib/unicode_usage.html)中复制粘贴了它。

# c#-4.0 - 应用程序池异常

> ID：13820080
> 
> 赞同：1
> 
> 时间：2012-12-11T12:08:02.103
> 
> 标签：c#-4.0, iis-7.5

我创建了 WCF 来为 IIS 创建池和站点。当我尝试使用该 WCF 时，它会给出以下异常。

```
Microsoft.Web.Administration.ApplicationPool cannot be serialized 
because it does not have a parameterless constructor. 
```

有人可以帮忙吗？谢谢

# excel - dde 链接单元格更改时的时间戳

> ID：13820081
> 
> 赞同：2
> 
> 时间：2012-12-11T12:08:04.580
> 
> 标签：excel, vba

我在第 11 列中有数据（ dde ​​链接）。我希望在第 12 列中的第 11 列中的数据发生变化时有一个时间戳。这是我尝试过但没有按预期工作的一些代码？

在表 1 中......：

```
Private Sub Workbook_Open(ByVal Target As Range)
Sheet1.ValDDE = Target.Column = 10
End Sub 
```

在模块 1 ........中：

```
Public ValDDE
Private Sub Worksheet_Calculate(ByVal Target As Range)
If VarType(ValDDE) = VarType(Target.Column = 10) Then
If ValDDE <> Cells(Target.Column, 12).Value = Now Then _
  MsgBox "New value : " & Target.Column = 11 _
  Else Exit Sub
Else: MsgBox "New value : " & Target.Column = 11
End If
ValDDE = Target.Column = 11
End Sub
Sub ddetrackchange()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:23:15.680

我建议您删除 'calculate' 方法，因为它是减慢*horcrux*的那些讨厌的性能之一。

请尝试以下操作`worksheet changed event`。`for loop`如果您只检测到一个单元格，则不需要使用 a 检查范围内的每个单元格。

```
Private Sub Worksheet_Change(ByVal Target As Excel.Range)
    Dim myRng As Range
    Set myRng = Range("D2") 'change according to yours
    If Target.Application.DDEAppReturnCode = True 'this check the dde link updates specifically
      If Target.Address = myRng.Address Then        
         'change time in some other cell
         Range("E2").value = now()
      else
      'do something else
      End If
    else
    'do something else
    End If
End Sub 
```

*   [MSDN 库参考](http://msdn.microsoft.com/en-us/library/office/ff836739.aspx)

# git - Git：如何在拉/失败自动合并后恢复文件？

> ID：13820082
> 
> 赞同：2
> 
> 时间：2012-12-11T12:08:07.393
> 
> 标签：git

我正要获得最新的 a`git pull origin master`并意识到我在某些配置文件中存在冲突。但我还有其他文件要签入，我不想丢失。

由于这些冲突是本地配置文件，我只是删除了它们，希望通过执行新的拉取请求再次检索它们。

现在尝试做另一个`git pull origin master`，它说

> “拉取是不可能的，因为你有未合并的文件。请在工作树中修复它们，然后根据需要使用'git add/rm'来标记分辨率，或者使用'git commit -a'。”

那么如何从存储库中恢复这些具有最新状态的已删除配置文件呢？（我不关心我对这些文件的本地更改，因此我将其删除）

我现在应该为每个配置文件做：

`git checkout -- path/to/individual_file`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:24:45.370

如果你有一些文件要提交，你可以将它们存储起来`git stash`，然后重置回`HEAD`with `git reset --hard HEAD`，拉动更改并`git pull`修复所有冲突，然后将你的存储应用到新的 HEAD 上`git stash apply`

如果您更喜欢存储本地更改，您还可以创建一个临时`branch`的，重置并拉上 master 并从临时分支恢复您的本地更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:21:41.803

您可以`$ git reset --hard HEAD`返回`HEAD`状态。

然后再做`git pull`一次，修复冲突，然后提交修复。

# f# - 检索最常用的名称

> ID：13820083
> 
> 赞同：0
> 
> 时间：2012-12-11T12:08:11.700
> 
> 标签：f#

我无法理解。如何找到最常用的名称，例如

```
type person = {name:string; surname:string}

let persons=[{name:"Jack";surname:"YYY"};
             {name:"Joe";surname:"XYX"};
             {name:"Jack";surname:"XXY"}] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:17:32.597

```
// You have to use '=' instead of ':' between field names and field values
let persons = 
    [ {name = "Jack"; surname = "YYY"};
      {name = "Joe"; surname = "XYX"};
      {name = "Jack"; surname = "XXY"} ]

// val it : string = "Jack"
persons |> Seq.countBy (fun {name = s} -> s)
        |> Seq.maxBy snd
        |> fst 
```

# java - 如何绕过调用父类paint方法

> ID：13820086
> 
> 赞同：0
> 
> 时间：2012-12-11T12:08:17.270
> 
> 标签：java, applet

我正在开发小程序，我的类扩展了一个第三方 api 类，它有它的paint(Graphics g) 方法。此类扩展 JComponent 并从它的paint(Graphics g) 中调用 super.paint(g)。现在我想从我的类中直接调用 JComponent 绘制方法。有没有办法做到这一点。我在下面尝试但给出错误

```
getParent().getParent().paint(g);

```

或者您可以通过以下方式理解这一点

```
ThirdPartyClass 扩展 JComponent{

    公共无效油漆（图形g）{
     super.paint(g);
     //一些工作
    }
}

MyClass 扩展 ThirdPartyClass{

   公共无效油漆（图形g）{
      getParent().getParent().paint(g); // 不工作给出异常
   }
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:16:44.153

该`getParent()`方法不会像您认为的那样做。它与继承和超类无关。它只是返回该组件位于*UI*中的 awt 容器。

例如，如果组件位于滚动窗格中，而滚动窗格位于面板中，则`getParent().getParent().paint(g);`在组件中调用将调用面板的绘制方法。

![在此处输入图像描述](../Images/86d4bb3fe7e690f31cf34b9b585ce00e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:17:01.157

首先，getParent 没有得到*继承*父级；它获取*Component*父级，因此您尝试的操作不会做您想做的事情，即使它确实有效。

其次，我认为是时候重新考虑您的小程序设计了。如果你不想要你继承的类的行为，那你为什么要从它继承呢？为什么不直接从 Component 继承呢？我认为如果你试图让你的类成为第三方的子类，然后绕过第三方的一些行为，但不是全部，我认为可能会产生各种后果。

# matlab - 在 Matlab 中的同一图形上绘制多个具有一个 y 轴的图形和另一个具有不同 y 轴的图形

> ID：13820087
> 
> 赞同：6
> 
> 时间：2012-12-11T12:08:20.400
> 
> 标签：matlab

我有三个数据集以及它们的错误向量。我想将它们绘制在同一个图上，其中数据集在同一个 y 轴上（在左侧），错误在同一个图上，但在不同的轴上（在右侧）。

函数[plotyy](http://www.mathworks.com/help/matlab/ref/plotyy.html)允许为每个轴上的 1 个图执行此操作，我如何为多个图执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:01:09.090

也可以`plotyy()`与多行 y 值一起使用。

遵循 matlab 帮助中的示例：

```
x = 0:0.01:20;
y1 = [200*exp(-0.05*x).*sin(x);
      300*exp(-0.04*x).*sin(x)];
y2 = [0.8*exp(-0.5*x).*sin(10*x);
      0.6*exp(-0.4*x).*sin(5*x)];
[AX,H1,H2] = plotyy(x,y1,x,y2);

set(get(AX(1),'Ylabel'),'String','Slow Decay') 
set(get(AX(2),'Ylabel'),'String','Fast Decay') 

xlabel('Time (\musec)') 
title('Multiple Decay Rates')

set(H1,'LineStyle','--')
set(H2,'LineStyle',':') 
```

产生下图

![使用带有多个 y 值的 plotyy。](../Images/93c986ff9a0fe1c74ed062b94cde3633.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T14:03:40.550

我认为您应该`axes`手动创建新的：

```
figure(1); clf, hold on

x1 = 0:0.1:5*pi;
y1 = sin(x1)./x1;

x2 = 0:0.1:5*pi;
y2 = x2.^(0.2);

x3 = 0:0.1:5*pi;
y3 = cos(x3);

plot(x1,y1, 'b', 'linewidth', 2)
plot(x2,y2, 'g', 'linewidth', 2)
plot(x3,y3, 'k', 'linewidth', 2)

ax1 = gca;
ax2 = axes('Position', get(ax1,'Position'),...           
           'YAxisLocation','right',...
           'Color' , 'none',...
           'YColor', 'r');
linkaxes([ax1 ax2], 'x')

x4 = x3;
y4 = 0.025*randn(size(y3));

line(x4, y4, 'color', 'r', 'parent', ax2) 
```

输出： ![在此处输入图像描述](../Images/1b66754b0aa134dca41e28bf4ff6f6a2.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:01:05.840

这是@natan建议的使用滑铁卢的代码

```
x = 0:0.01:20;
y1 = [200*exp(-0.05*x).*sin(x);300*exp(-0.04*x).*sin(x)];
y2 = [0.8*exp(-0.5*x).*sin(10*x);0.6*exp(-0.4*x).*sin(5*x)];
f=GXFigure();
ax=subplot(f,1,1,1);
p1=line(ax, x, y1(1,:), 'LineColor', 'SEAGREEN');
p2=line(p1, [], y1(2,:), 'LineColor', 'TOMATO');
ax.getObject().getView().setXLabel(sprintf('Time Slow Decay %cs', char(181)));
layer1=kcl.waterloo.graphics.GJGraph.createInstance();
ax.getObject().getView().add(layer1);
p3=line(wwrap(layer1), x, y2(1,:), 'LineColor', 'CORNFLOWERBLUE');
p4=line(p3, x, y2(2,:), 'LineColor', 'CRIMSON');
layer1.setXLabel(sprintf('Time Fast Decay %cs', char(181)));
ax.getObject().setTitleText('Multiple Decay Rates'); 
```

产生：

![在此处输入图像描述](../Images/20a08d8335eed8456b5cf252d84a0df7.png)

有关其他示例，请参见 [此处](http://waterloo.sourceforge.net/plotgallery.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T14:31:15.647

您可以尝试以下方法：

```
% Example data
x = [1 2 3];
yd1 = [1 1 1];
yd2 = [2 2 2];
yd3 = [3 3 3];
ye1 = [0.1 0.2 0.3];
ye2 = [0.2 0.3 0.4];
ye3 = [0.3 0.4 0.5];
% Create two axes
ax1 = axes();
ax2 = axes();
% Plot your data
line(x, yd1, 'Parent', ax1, 'Color', 'b');
line(x, yd2, 'Parent', ax1, 'Color', 'b');
line(x, yd3, 'Parent', ax1, 'Color', 'b');
line(x, ye1, 'Parent', ax2, 'Color', 'r');
line(x, ye2, 'Parent', ax2, 'Color', 'r');
line(x, ye3, 'Parent', ax2, 'Color', 'r');
% Modify axes properties
set(ax1, 'ylim', [-10 4]);
set(ax2, 'Color', 'none', 'YAxisLocation', 'right', 'XTick', []); 
```

![在此处输入图像描述](../Images/8aa4451d003f5d585c518617cc63321c.png)

我使用了，`line`而不是`plot`，因为`plot`给了我一些关于 y 轴刻度的问题。更多信息[在这里](http://www.mathworks.com/help/matlab/creating_plots/using-multiple-x-and-y-axes.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-20T22:40:13.867

这是绘制两个 y 轴的最简单方法，允许您使用与正常绘图中相同的标签和边界设置器：`ylim`、`ylabel`等。

从[文档](https://www.mathworks.com/help/matlab/creating_plots/plotting-with-two-y-axes.html)。

```
yyaxis left;
plot(x, y_left);
ylim([0, 100]); % sets the limits for the left y axis
ylabel('left axis');

yyaxis right;
plot(x, y_right);
ylim([0, 100]); % sets the limits for the right y axis
ylabel('right axis'); 
```

# ios - 如何使用 phonegap 在 iOS 应用程序中防止键盘上推 webview

> ID：13820088
> 
> 赞同：21
> 
> 时间：2012-12-11T12:08:22.043
> 
> 标签：ios, cordova, webview, keyboard

当屏幕底部的输入字段获得焦点时，键盘将我的 webview 向上推，页面的上部不再可见。

我想防止键盘向上推 webview。

有人有想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T02:47:05.963

在焦点上，设置**window.scrollTo(0,0);** 这可以防止键盘完全向上推 webview

```
$('input').on('focus', function(e) {
    e.preventDefault(); e.stopPropagation();
    window.scrollTo(0,0); //the second 0 marks the Y scroll pos. Setting this to i.e. 100 will push the screen up by 100px. 
}); 
```

如果您**不想**为 Y 滚动位置设置静态值，请随意使用[我编写的这个简短插件，它会自动在输入字段下方对齐键盘](https://stackoverflow.com/a/13808307/1262619)。它并不完美，但它可以完成工作。只需将其称为焦点，如上所示：

```
setKeyboardPos(e.target.id); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-05T17:52:54.503

使用*driftyco/ionic-plugins-keyboard* ( [https://github.com/driftyco/ionic-plugins-keyboard](https://github.com/driftyco/ionic-plugins-keyboard) )解决了这个问题

首先安装键盘插件：

```
cordova plugin add com.ionic.keyboard 
```

现在你可以**我）**要么禁用本机键盘滚动：

```
cordova.plugins.Keyboard.disableScroll(true); 
```

或**II）**监听`native.keyboardshow`事件`deviceready`并在键盘显示时滚动回顶部：

```
window.addEventListener('native.keyboardshow', keyboardShowHandler);

function keyboardShowHandler(e){
    setTimeout(function() {
        $('html, body').animate({ scrollTop: 0 }, 1000);
    }, 0);
} 
```

我使用了 II) 方法，因为我喜欢我的案例中的动画滚动。如果您不想使用动画，请将相应的行替换为`window.scrollTo(0, 0);`. 但恐怕在那种情况下，你将不得不再次处理*Imskull*所写的“垃圾抖动动画”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-07T15:21:05.337

我遇到了同样的问题，上面的解决方案都没有帮助我，但我找到了一个简单的方法来解决它。

在 platform/android 文件夹中打开 manifest.xml 并在主活动标签中将 android:windowSoftInputMode="adjustResize" 属性替换为 android:windowSoftInputMode="adjustPan"

现在键盘将覆盖您的内容。

我希望它会帮助某人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-19T09:38:45.337

在我不得不自己找到答案之前，我确实经历了 100 个答案。所以这里是如何在 IOS 上禁用 UI 的滚动。只需在加载科尔多瓦时，添加它。请安装：

```
cordova plugin add ionic-plugin-keyboard --save 
```

然后`cordova prepare`将这个新插件加载到您的 www 文件夹中。

```
document.addEventListener('deviceready', function(e){
    window.addEventListener('native.keyboardshow', function () {
            cordova.plugins.Keyboard.disableScroll(true);
        });
}); 
```

就是这样。请让我知道这是否有帮助。我很乐意回答更多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-22T11:12:45.660

将此选项添加到`config.xml`对我来说是诀窍。

```
<preference name="KeyboardShrinksView" value="true" /> 
```

It has been removed in [Cordova 3.2.0](https://github.com/apache/cordova-ios/blob/master/RELEASENOTES.md#320-20131120) but is available in [cordova-plugin-keyboard](https://github.com/cjpearson/cordova-plugin-keyboard#cordovapluginskeyboardshrinkview).

You need to install this plugin and this option will work again

```
cordova plugin add cordova-plugin-keyboard 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-23T09:10:48.890

确保在您的 config.xml

```
<preference name="KeyboardShrinksView" value="true" /> 
```

# iphone - 创建自定义滑块的方法

> ID：13820094
> 
> 赞同：0
> 
> 时间：2012-12-11T12:08:38.620
> 
> 标签：iphone, objective-c, ios, xcode, interface-builder

我需要以下滑块控件。

*   有一个总长度（对应于以秒为单位的总持续时间）
*   与`UISlider`滑块“可访问”的总长度内的范围不同
*   滑块在该“可访问”轨道上有一个位置，并且不会超出它。

我目前看到以下方法，它们似乎各有利弊：

1.  创建一个`UISlider`子类并向其添加新的属性和功能
2.  我创建了一个`UIView`包含 UISlider 和 a 的自定义控件，`UIProgressBar`并提供了一个类似于`UISlider`.
3.  我使用自定义绘图代码从头开始创建控件。

我不确定我是否遗漏了某些方面。我现在想知道哪种方法最适合我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:25:21.573

下面是几个链接，展示了如何创建自定义滑块：

1.  [https://github.com/barrettj/BJRangeSliderWithProgress](https://github.com/barrettj/BJRangeSliderWithProgress)
2.  [https://github.com/cbpowell/CPSlider](https://github.com/cbpowell/CPSlider)
3.  [https://github.com/buildmobile/iosrangeslider](https://github.com/buildmobile/iosrangeslider)
4.  [https://github.com/taviscaios/TVCalibratedSlider](https://github.com/taviscaios/TVCalibratedSlider)
5.  [https://github.com/ole/OBSlider](https://github.com/ole/OBSlider)

注意：通常要创建任何 UI 自定义控件，您可以简单地从 UIControl 类继承该类，这将允许您拥有所需的类的所有属性以及其他属性......但要小心使用它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:35:32.370

我认为选项 2 和 3 有点牵强。您可以做的是有一个在更改滑块值时调用的方法，如果用户超出轨道上允许的值，则将其设置为中间的最大值：

用类似的东西声明你的滑块实例（主要是添加目标）

```
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectZero];
slider.continuous = TRUE;
slider.minimumValue = MIN_VALUE;   // some min value constant or something?
slider.maximumValue = SLIDER_MAX_VALUE;  // some max value constant for the entire slider
slider.value = MIN_VALUE;   // or anything else you want

[slider addTarget:self action:@selector(checkBeyondTrack:) forControlEvents:UIControlEventValueChanged];
[self.contentView addSubview:slider]; 
```

现在，您需要在定义滑块的同一类中使用 checkBeyondTrack 方法

```
- (void)checkBeyondTrack:(id)sender {
    UISlider *slider = sender;        

    // if we've attempted to go beyond the value allowed
    if (slider.value > MAX_TRACK) {
        [slider setValue:MAX_TRACK animated:YES];
    }
} 
```

每次用户更改滑块的值时，`checkBeyondTrack:`都会调用滑块目标方法，该方法执行检查并根据需要重置值。

# java - 无法设置输出文件：Spring Batch Job

> ID：13820095
> 
> 赞同：0
> 
> 时间：2012-12-11T12:08:37.823
> 
> 标签：java, spring-batch

我在运行春季批处理作业时遇到问题。我对批处理作业配置很有信心，因为从过去四天开始，设置工作正常。我附上了运行作业时生成的堆栈跟踪片段。

片段1：

```
2014-08-20 00:00:01,895 ERROR [STDERR] org.springframework.batch.item.ItemStreamException: Unable to create file: [F:\jboss-4.2.3\config\feeds\jsdnmp\dailybillingfeeds\DailyBillFeed_jsdnmp_19-8-2014.csv]

2014-08-20 00:00:01,896 ERROR [STDERR]  at org.springframework.batch.item.util.FileUtils.setUpOutputFile(FileUtils.java:80)

2014-08-20 00:00:01,896 ERROR [STDERR]  at org.springframework.batch.item.file.FlatFileItemWriter$OutputState.initializeBufferedWriter(FlatFileItemWriter.java:497)

2014-08-20 00:00:01,896 ERROR [STDERR]  at org.springframework.batch.item.file.FlatFileItemWriter$OutputState.access$000(FlatFileItemWriter.java:354)

2014-08-20 00:00:01,896 ERROR [STDERR]  at org.springframework.batch.item.file.FlatFileItemWriter.doOpen(FlatFileItemWriter.java:291)

2014-08-20 00:00:01,896 ERROR [STDERR]  at org.springframework.batch.item.file.FlatFileItemWriter.open(FlatFileItemWriter.java:281)

2014-08-20 00:00:01,896 ERROR [STDERR]  at sun.reflect.GeneratedMethodAccessor274.invoke(Unknown Source)

2014-08-20 00:00:01,897 ERROR [STDERR]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

Snippet 2: Caused by:

2014-08-20 00:00:01,900 ERROR [STDERR] Caused by: java.io.IOException: Could not delete file: F:\jboss-4.2.3\config\feeds\jsdnmp\dailybillingfeeds\DailyBillFeed_jsdnmp_19-8-2014.csv

2014-08-20 00:00:01,900 ERROR [STDERR]  at org.springframework.batch.item.util.FileUtils.setUpOutputFile(FileUtils.java:65)

2014-08-20 00:00:01,900 ERROR [STDERR]  ... 27 more 
```

我已提供对文件的所有访问权限以进行修改。这是输出文件位置：

```
F:\jboss-4.2.3\config\feeds\jsdnmp\dailybillingfeeds\DailyBillFeed_jsdnmp_19-8-2014.csv 
```

我尝试了使用**appendAllowed**和**shouldDeleteIfExists**的选项，但未能找到任何预期的输出。

根据我的以下信息可能会对您有所帮助：

*   窗口 7
*   日食太阳神
*   Jboss 4.2 正式版
*   JDK 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-23T06:02:03.343

请执行以下操作：

1.  将下面的插件标签添加到您的 pom.xml 中，以便为每个 maven 安装命令将所有 maven 依赖项复制到 project/lib 文件夹。

    ```
    <plugin>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <phase>install</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <outputDirectory>H:/workspace/JsonProject/lib</outputDirectory>
            </configuration>
          </execution>
        </executions>
      </plugin> 
    ```

2.  然后在项目构建路径中包含 lib 文件夹中的所有 jar。

# iphone - 如何在多人游戏中同步数据（游戏中心 ios）

> ID：13820097
> 
> 赞同：0
> 
> 时间：2012-12-11T12:08:40.157
> 
> 标签：iphone, objective-c, ios, ipad, game-center

我一直在为 Game Center 开发游戏。

**游戏说明：-**

一个玩家是游戏的发起者，因为游戏有 5 个平铺地图（任一玩家（发起者）随机选择一个平铺地图）。发起者会将选定的瓦片地图发送给第二个玩家，现在这个瓦片地图将在第二个玩家一侧绘制。（此时两个玩家都有相同的瓦片地图）

当我通过向玩家发送邀请开始游戏时，这可以正常工作。

但是当我通过“automatch”开始游戏时，我无法找到谁将成为发起者（谁将发送随机选择的瓷砖地图）。

我通过以下代码创建了一个玩家发起者：

```
isThisInvited_Player = YES;  
[[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_INVITATION_ACCEPTED object:nil];

- (void)authenticationChanged {    

    if ([GKLocalPlayer localPlayer].isAuthenticated && !userAuthenticated) {
       userAuthenticated = TRUE;  

    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {

        isThisInvited_Player = YES;
        self.pendingInvite = acceptedInvite;
        self.pendingPlayersToInvite = playersToInvite;
        [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_INVITATION_ACCEPTED object:nil];

    };

} else if (![GKLocalPlayer localPlayer].isAuthenticated && userAuthenticated) {
   userAuthenticated = FALSE;
}

} 
```

如果“自动”中无法进行数据同步，请告诉我，如何禁用游戏中心视图控制器中的自动匹配（播放）按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:32:34.593

您可以通过按他们的 playerID 对两个玩家进行排序来选择发起者是谁，然后始终将排序数组中的第一个作为发起者。

# java - 使用 href 将值从一个 jsp 发送到另一个 jsp

> ID：13820098
> 
> 赞同：5
> 
> 时间：2012-12-11T12:08:40.277
> 
> 标签：java, jsp

如何`resultset.getInt(1)`将此值发送到另一个 jsp 页面，我正在尝试但不工作。

```
<td><a href="result.jsp?Id="+<%=resultset.getInt(1)%> ><%= resultset.getInt(1) %></a></td> 
```

结果.jsp

```
<% 
String ss =request.getParameter("Id");
System.out.println("my value" + ss);
%> 
```

我要`""`进去了`result.jsp`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T12:19:49.297

试试这个：

```
<td>
    <a href=<%= "\"result.jsp?Id=" + resultset.getInt(1) + "\"" %> ><%= resultset.getInt(1) %></a>
</td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:14:21.150

我建议你看看生成的 HTML。看起来第一个的结果`<%=resultset.getInt(1)%>`写在了 href 的值之外。这可能会更好：

```
<td><a href="result.jsp?Id=<%=resultset.getInt(1)%>" ><%= resultset.getInt(1) %></a></td> 
```

在旁注中，我建议您看一下表达式语言并使用它，而不是在您的 JSP 中内联 Java 代码。很难调试和维护这样的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:21:56.517

这是我们的第一页：-

```
 <%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8" import="java.util.*;" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="xp.jsp" method="get">
<input type="text" value="" name="lol">
<input type="submit" value="submit"></input>
</form>
<a href="xp.jsp?lol=hahah">click me</a>
</body>
</html> 
```

这是我们的 xp.jsp:-

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%=request.getParameter("lol") %>
</body>
</html> 
```

# javascript - 我的 JS 框架的版本号是多少？

> ID：13820099
> 
> 赞同：2
> 
> 时间：2012-12-11T12:08:51.397
> 
> 标签：javascript

对于 Alpha 版本，您会遵循什么版本号格式？

我刚刚完成了一个 JS 框架的编写。它正在工作，但需要我团队的其他成员进行一些认真的测试，所以我认为它处于 alpha 阶段。我需要给它一个版本号，但我认为版本 1.0.0 不正确，因为这不是完整版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:17:28.550

嗯，没有一个正确的答案。我使用版本号来跟踪库与“功能完整”的接近程度。即使一个库可能是稳定的并且可以使用，但这并不意味着它在我看来已经准备好了。

它可以帮助制定路线图并将功能与特定版本联系起来，以指导开发工作。对于可能包括多个开发人员的大型项目尤其如此。

您可以使用版本来表示 API 兼容性。如果您要进行破坏向后兼容性的非常大的更改，则可能需要发布 x.0 版本。

[使用诸如grunt](https://github.com/gruntjs/grunt)之类的构建工具很有用。它将在包装方面有很大帮助，并且总体上使您的生活更轻松。

# jquery - 没有ajax的JQuery下拉菜单

> ID：13820102
> 
> 赞同：1
> 
> 时间：2012-12-11T12:09:04.567
> 
> 标签：jquery, ajax, menu

抱歉，这是一个 nube 问题，我刚刚习惯了 javascript。

我想创建一个类似于此处找到的下拉菜单：

[http://www.impressivewebs.com/demo-files/mega-drop-downs/index.html](http://www.impressivewebs.com/demo-files/mega-drop-downs/index.html)

这个菜单的问题在于它使用 ajax 来调用菜单内容，这 1) 意味着用户的后退/前进导航令人困惑，因为它通过 ajax #hashtags 而不是用户访问过的页面后退/前进，并且2) 在调用每个菜单项时加载内容存在延迟。

有谁知道没有使用 ajax 的具有相同效果（.slidedown）的任何好的 jquery 菜单包？（或者任何人都可以建议一种修改此菜单的方法，使其不使用 ajax）。

提前感谢您的任何帮助/建议。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:55:17.687

您可以使用 1.9 版本中引入的 jQuery 菜单：

[http://jqueryui.com/menu/](http://jqueryui.com/menu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:21:12.380

我复制了他们的部分js。

```
// populates the menu according to what link was clicked, opens it if not already opened
populateMenu: function (currentLink) {
    dd.removeClass(pages);
    dd.addClass(currentLink + " open");
    dd.slideDown(speed, function () {
        // callback that runs after menu finishes sliding down
        $("nav ul li.menu>a.active").find("span").html(upArrow);
        // ajax call is below; it appends a timestamp to prevent caching, in case of dynamic content; remove if you like
        dd.load(dir + "/" + currentLink + ext + "?" + new Date().getTime(), function () {
            // callback that runs after menu finishes loading
            dd.removeClass("loading");
            addCloseLink();
        });
    });
    // change the hash according to the clicked link
    document.location.hash = currentLink;
}, 
```

如果您`dd.load`使用 jQuery 更改对 modify 语句的调用，就像`dd.html(...)`您选择的内容一样，您不必使用 ajax。

如果您删除`document.location.hash = currentLink;`函数末尾的行，它不会修改您的后退/前进导航。

最终看起来像：

```
populateMenu: function (currentLink) {
  dd.removeClass(pages);
  dd.addClass(currentLink + " open");
  dd.slideDown(speed, function () {
    // callback that runs after menu finishes sliding down
    $("nav ul li.menu>a.active").find("span").html(upArrow);
    dd.html($('#your_source_here'));
    dd.removeClass("loading");
    addCloseLink();
  });
}, 
```

**编辑：**

您还可以使用带有可折叠内容的 jQueryUI 选项卡，请参阅[此处的演示](http://jqueryui.com/tabs/#collapsible)。它需要样式，但工作量可能比修改以前的代码要少。

有关基本示例，请参阅[此 jsFiddle](http://jsfiddle.net/XKqhg/1/)。只需要设置选项卡的样式。

# sql - 为什么“保存”返回真，但数据库有一个无效记录？

> ID：13820104
> 
> 赞同：0
> 
> 时间：2012-12-11T12:09:13.970
> 
> 标签：sql, ruby-on-rails, database, ruby-on-rails-3

我编写了一个 Rails 应用程序，它通过 json-rpc 与前端社区。ActiveRecord 类是：

```
class ProcessingDocument < ActiveRecord::Base
  attr_accessible :command, :comment, :creator, :emergency_level, :file_name, :is_locked, :is_removed, :last_status, :next_status, :owner_id, :paper_title, :receiver, :sender, :status, :suggest, :unit_id, :uuid, :workflow_id
  attr_accessor :command, :comment, :creator, :emergency_level, :file_name, :is_locked, :is_removed, :last_status, :next_status, :owner_id, :paper_title, :receiver, :sender, :status, :suggest, :unit_id, :uuid, :workflow_id

  def self.all_propertoes
    [:command, :comment, :creator, :emergency_level, :file_name, :is_locked, :is_removed, :last_status, :next_status, :owner_id, :paper_title, :receiver, :sender, :status, :suggest, :unit_id, :uuid, :workflow_id]
  end
end 
```

而Controller通过json动态更新ProcessingDocument的对象。

```
def pd_create(json)
    pd_now = ProcessingDocument.new(:uuid => generate_uuid)
    json["params"].each do |k, v|   # the json["params"] is a Hash
        if ProcessingDocument.all_propertoes.include? k.to_sym
            pd_now.send("#{k}=", v)
        else
            render json: default_fail_json(json, __method__)
            return
        end
    end

    if pd_now.save
        debug_method pd_now.to_json  # this is a stdout bebug

        result = { :uuid => pd_now.uuid }
        render json: respond_data(json, result, nil)
    else
        render json: default_fail_json(json, __method__)
    end
end 
```

当我发布 json`{"status":"1", "command":"stuff"}`时，`debug_method`打印：

```
{"command":"stuff","comment":null,"created_at":"2012-12-11T12:02:41Z",
"creator":null,"emergency_level":null,"file_name":null,"id":16,"is_locked":null,
"is_removed":null,"last_status":null,"next_status":null,"owner_id":null,
"paper_title":null,"receiver":null,"sender":null,"status":"1","suggest":null,
"unit_id":null,"updated_at":"2012-12-11T12:02:41Z",
"uuid":"21403d30-c2c1-4fc8-94ba-36d059fdc170","workflow_id":null} 
```

但数据库不保存“命令”、“状态”和“uuid”：

```
Started POST "/services/" for 127.0.0.1 at 2012-12-11 20:02:41 +0800
Processing by ServicesController#accept as JSON
Parameters: {"{\"id\":\"7e330302-dede-4d2f-bf52-8e90174bb837\",\"method\":\"pd_create\",\"params\":{\"status\":\"1\",\"command\":\"stuff\"}}"=>nil}
(0.0ms)  begin transaction
SQL (0.5ms)  INSERT INTO "processing_documents" ("command", "comment", "created_at", "creator", "emergency_level", "file_name", "is_locked", "is_removed", "last_status", "next_status", "owner_id", "paper_title", "receiver", "sender", "status", "suggest", "unit_id", "updated_at", "uuid", "workflow_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["command", nil], ["comment", nil], ["created_at", Tue, 11 Dec 2012 12:02:41 UTC +00:00], ["creator", nil], ["emergency_level", nil], ["file_name", nil], ["is_locked", nil], ["is_removed", nil], ["last_status", nil], ["next_status", nil], ["owner_id", nil], ["paper_title", nil], ["receiver", nil], ["sender", nil], ["status", nil], ["suggest", nil], ["unit_id", nil], ["updated_at", Tue, 11 Dec 2012 12:02:41 UTC +00:00], ["uuid", nil], ["workflow_id", nil]]
(2.5ms)  commit transaction
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 3.5ms) 
```

您已经看到了 SQL：`SQL (0.5ms) INSERT INTO "processing_documents" ("command", "comment", "created_at", "creator", "emergency_level", "file_name", "is_locked", "is_removed", "last_status", "next_status", "owner_id", "paper_title", "receiver", "sender", "status", "suggest", "unit_id", "updated_at", "uuid", "workflow_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [["command", nil], ["comment", nil], ["created_at", Tue, 11 Dec 2012 12:02:41 UTC +00:00], ["creator", nil], ["emergency_level", nil], ["file_name", nil], ["is_locked", nil], ["is_removed", nil], ["last_status", nil], ["next_status", nil], ["owner_id", nil], ["paper_title", nil], ["receiver", nil], ["sender", nil], ["status", nil], ["suggest", nil], ["unit_id", nil], ["updated_at", Tue, 11 Dec 2012 12:02:41 UTC +00:00], ["uuid", nil], ["workflow_id", nil]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:39:20.127

为什么要调用`attr_accessor`模型属性？

```
attr_accessor :command, :comment, :creator, :emergency_level, :file_name, :is_locked, :is_removed, :last_status, :next_status, :owner_id, :paper_title, :receiver, :sender, :status, :suggest, :unit_id, :uuid, :workflow_id 
```

这些正在创建设置实例变量的访问器方法，例如`attr_accessor :command`，相当于创建这样的方法：

```
def command
  @command
end

def self.command=(value)
  @command = value
end 
```

因此，现在您的代码中发生的情况是，当您调用`pd_now.send("#{k}=", v)`散列中的每个键/值时，正在设置实例变量而不是数据库属性。这就是为什么您没有看到调用后生成的 SQL 中的属性的原因`save`。

要解决此问题，只需删除`attr_accessor`模型中的行。

Ref:[为什么使用 Ruby 的 attr_accessor、attr_reader 和 attr_writer？](https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer)

# jboss - EJB 未部署在 JBoss AS 5.0.x 上

> ID：13820109
> 
> 赞同：0
> 
> 时间：2012-12-11T12:09:21.477
> 
> 标签：jboss, ejb

我试图从我正在阅读的关于 JBoss 5 (JBoss AS 5 Developmet) 的书中构建一个示例，但是即使直接来自书中的代码也无法正常工作。

这是我的界面：

```
@Remote
public interface Mailer {

    public void sendMail(String aToEmailAddr, 
                         String aSubject, String aBody);

} 
```

这是实现此接口的 EJB

```
@Stateless  
@RemoteBinding(jndiBinding="remote/MailerEJB")

public  class MailerBean implements Mailer {... } 
```

这是尝试查找 bean 的客户端应用程序。

```
public class MailClient {
     public static void main(String[] args) throws Exception
       {
          InitialContext ctx = new InitialContext();
          Mailer mailer = (Mailer) ctx.lookup("remote/MailerEJB");

       }

} 
```

当我尝试运行 MailClient 类时，我得到了以下异常

```
Exception in thread "main" javax.naming.NameNotFoundException: remote not bound 
```

我也有 jndi.properties 文件，我将它添加到构建路径中，它看起来像这样>

```
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.url.pkgs=org.jnp.interfaces 
```

即使在 jmx-console 中，我也根本看不到远程/MailerEJB Bean。

我正在使用 jboss-5.0.1.GA + JBDS + java 1.7.0

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:53:54.463

首先，您必须确保 EJB 已正确部署在 JBoss 中并为其提供了绑定名称，因此如果您在 JMX 控制台的 JNDIView 中看不到 bean，则肯定是部署问题。为确保它已正确部署，您可以在部署 EJB（您的 ejb-jar 或 ear）时检查 JBoss 日志，查找类似于以下内容的行：

```
EJBBindingName - EJB3.x Default Remote Business Interface 
```

在您的情况下，如果您定义的绑定是正确的，它应该是：

```
remote/MailerEJB - EJB3.x Default Remote Business Interface 
```

这一行表示为 EJB 提供的真实 JNDI 名称，它是您在远程调用中必须使用的名称。

另一方面，尝试删除注释和类定义之间的界线：

```
@Stateless  
@RemoteBinding(jndiBinding="remote/MailerEJB")
public  class MailerBean implements Mailer {... } 
```

此外，在[这篇文章](https://stackoverflow.com/questions/13380465/call-ejb-remote/13386464#13386464)中，您可以找到有关如何从简单的命令行 Java 程序远程调用 EJB 的具体说明。

# android - 重新启动应用程序到前端而不重新创建它

> ID：13820111
> 
> 赞同：0
> 
> 时间：2012-12-11T12:09:23.120
> 
> 标签：android, android-activity, relaunch

我正在尝试在通话开始时重新启动应用程序。我正在监听电话状态变化，当我摘机状态时，我尝试重新启动我的应用程序。

这是我正在使用的启动活动代码：

```
Intent i = new Intent(context, MyClass.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

我使用“singleTop”启动模式不会重新创建活动。问题是活动重新启动，但它不在前面。也许有人对此有解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:26:27.303

您是否尝试过在清单中将 Activity 设置为 singleInstance？

```
<activity
        android:name=".Main"
        android:label="@string/app_name"
        android:launchMode="singleInstance"> 
```

这将打开相同的活动（因为它只能有一个实例）。这对我有用，但确实意味着一些缺点。前任。您不能将活动用于不同的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:38:43.150

无法保证您的应用程序仍在运行并且无需创建即可启动；出于这个原因，你不需要依赖任何标志来继续你离开的地方。相反，当您的应用程序被隐藏*时*存储您的状态并在您的应用程序恢复时恢复它是由您负责的。基于 Android Activity 生命周期，有多种方法可以做到这一点（见[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)）。我会通过在方法中保存我的状态并在`onPause()`方法中恢复它来做到这一点`onResume()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:14:22.043

试试下面：

```
 Intent intent = new Intent(context, MainActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

            finish();
            startActivity(intent); 
```

# jquery - jQuery 动画 JsFiddle 链接的问题 -> jsfiddle.net/QYry5

> ID：13820117
> 
> 赞同：2
> 
> 时间：2012-12-11T12:09:43.877
> 
> 标签：jquery, jquery-animate, jquery-effects

我写了一些运行良好的代码，但这个动画只在第一次工作，然后它只是加载和显示（没有动画）

```
$(document).ready(function () {
    $("li.moreInfo").hide();

    $("a").mouseover(function () {
        var t = $(this);
        t.parent().next().eq(0).show();
        t.parent().next().animate({ width: '300px' }, 2000, 'easeOutBounce');
    });

    $("a").mouseleave(function () {
        var t = $(this);
        $(this).parent().next().hide(500);
    });
}); 
```

HTML在这里：

```
<div style="position:relative;">
    <ul>
        <li><a href="#">Section 1</a></li>
        <li class="moreInfo">More Info</li>
        <li><a href="#">Section 2</a></li>
        <li class="moreInfo">Second More Info</li>
        <li><a href="#">Section 3</a></li>
        <li class="moreInfo">More Info</li>
        <li><a href="#">Section 4</a></li>
        <li class="moreInfo">Second More Info</li>
    </ul>
</div> 
```

在项目上是鼠标悬停，它第一次产生效果（easeOutBounce 和缓慢移动）但是当我第二次重复相同的时候，它既不显示缓慢移动也不显示 easeOutBounce 效果。它只是加载而且太快了。我认为它可能正在缓存，但我不知道如何避免它。

你们能帮我解决这个问题吗？

更新：我也发布了 HTML 代码 JsFiddle Link -> [http://jsfiddle.net/QYry5](http://jsfiddle.net/QYry5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:04:55.667

我在 JS 和 CSS 中进行了更改：

JS：

```
t.parent().next().eq(0).show(2000,'easeOutBounce'); 
```

CSS：

```
.moreInfo
        {
            display:block;
            background-color: #eee;
            border: 1px solid Yellow;
            width:300px;                
        } 
```

这是更新的jsFiddle：

[http://jsfiddle.net/QYry5/1/](http://jsfiddle.net/QYry5/1/)

问题仅在于宽度。在第一个动画之后，它获得了 300px 的宽度，因此第二次动画没有更多的空间。如果你只想在宽度上播放，你应该在 mouseleave 事件上重置宽度。

鼠标悬停时：

```
t.parent().next().animate({ width: '+=300px' }, 2000, 'easeOutBounce'); 
```

在鼠标水平上：

`t.parent().next().animate({ width: '-=300px' }, 2000, 'easeOutBounce',function(){$(this).hide()})`;

这是为此更新的jsFiddle：

[http://jsfiddle.net/QYry5/2/](http://jsfiddle.net/QYry5/2/)

# c++ - 带有 std::queue 的 std::random_shuffle

> ID：13820118
> 
> 赞同：0
> 
> 时间：2012-12-11T12:09:55.443
> 
> 标签：c++, collections, queue, std, shuffle

我如何将`std::random_shuffle`算法与 a 一起应用`std::queue`？我试过这个：

```
std::random_shuffle(myQueue.front(), myQueue.back()); 
```

并给出错误：

*   '__i- __first' 中的 'operator-' 不匹配
*   '__first != __last' 中的 'operator!=' 不匹配
*   '__first + 1' 中的 'operator+' 不匹配
*   '++ __i' 中的 'operator++' 不匹配

我的队列正在举办`Card`代表扑克牌的课程。我可以理解错误来自对队列元素进行的操作所以，即使我的班级`std::random_shuffle`不需要一个，我也写了一个，那个错误就消失了。`!= operator``Card`

但是我应该如何处理其余的错误？`operators +, - and ++`为`Card`班级写作是没有意义的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:16:41.333

`std::queue`不是容器；它是一个容器适配器。它调整了一个序列容器以将其接口限制为简单的队列/出队操作。特别是，它不允许您（轻松地）迭代底层容器，这是`std::random_shuffle`需要做的。如果您不想要这些限制，请不要使用`std::queue`; 直接使用序列容器（例如`vector`或`deque`）。

有一些[方法](https://stackoverflow.com/a/3034221/204847)可以颠覆它的接口并干预底层容器，但最好选择一个合适的容器开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:17:19.297

`std::random_shuffle`需要一对迭代器。此外， an`std::queue`的设计并不是为了那样乱七八糟。它根据定义维护其元素的顺序。您可以做的是创建一个`std::deque`，对其进行随机播放，然后从中构造一个队列。

```
std::deque<int> d {5, 1, 67, 89, 32, 444}; // populate in the order you would the queue
std::random_shuffle(d.begin(), d.end());
std::queue<int> q(d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:16:48.897

`std::random_shuffle`需要两个迭代器，但是`std::queue::front()`并`std::queue::back()`返回两个对元素的引用。`std::queue`不公开迭代器，它只提供一个接口来推回和弹出前端元素。如果您需要遍历集合使用`std::deque`（或任何标准容器）。

# python - 从可迭代的点生成路径

> ID：13820124
> 
> 赞同：1
> 
> 时间：2012-12-11T12:10:18.580
> 
> 标签：python, python-3.x, iterator, iterable

假设我有一套`{a, b, c, d}`. 我想从中创建一个“路径”，它是一个产生 `(a, b)`, then `(b, c)`, then的生成器`(c, d)`（当然`set`是无序的，所以任何其他通过元素的路径都是可以接受的）。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:29:12.157

[这是使用来自http://docs.python.org/3/library/itertools.html#itertools-recipes](http://docs.python.org/3/library/itertools.html#itertools-recipes)`pairwise()`的配方的示例

```
>>> from itertools import tee
>>> def pairwise(iterable):
...     "s -> (s0,s1), (s1,s2), (s2, s3), ..."
...     a, b = tee(iterable)
...     next(b, None)
...     return zip(a, b)
...
>>> for pair in pairwise({1, 2, 3, 4}):
...     print(pair)
...
(1, 2)
(2, 3)
(3, 4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:14:41.010

```
def gen(seq):
   it = iter(seq)
   a, b = next(it), next(it)
   while True:
     yield (a, b)
     a, b = b, next(it)

print(list(gen({1, 2, 3, 4}))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:14:22.210

[在 Python](https://stackoverflow.com/q/6822725)解决方案中使用滚动或滑动窗口迭代器：

```
>>> from itertools import islice
>>> def window(seq, n=2):
...     "Returns a sliding window (of width n) over data from the iterable"
...     "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
...     it = iter(seq)
...     result = tuple(islice(it, n))
...     if len(result) == n:
...         yield result    
...     for elem in it:
...         result = result[1:] + (elem,)
...         yield result
... 
>>> path = window({1, 2, 3, 4})
>>> for step in gen:
...     print path
(1, 2)
(2, 3)
(3, 4) 
```

这恰好遵循排序顺序，因为对于 python 整数`hash(x) == x`，因此 1、2、3、4 的序列按该顺序插入到集合中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:30:06.313

您可以使用`pairwise` [itertools 配方](http://docs.python.org/3/library/itertools.html#itertools-recipes)：

```
>>> from itertools import tee
>>> def pairwise(iterable):
        a, b = tee(iterable)
        next(b, None)
        return zip(a, b)

>>> pairwise({1, 2, 3, 4})
<zip object at 0x0000000003B34D88>
>>> list(_)
[(1, 2), (2, 3), (3, 4)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T12:43:03.090

现在我明白了这个问题

```
从 itertools 导入 islice
a = {'A','B','C','D'}
zip(a,islice(a,1,None))
#[('A', 'C'), ('C', 'B'), ('B', 'D')]

```

# ios - 再次动态调整 UITableViewCell 的大小

> ID：13820127
> 
> 赞同：1
> 
> 时间：2012-12-11T12:10:26.770
> 
> 标签：ios, xcode, uitableview

好吧，我一直在寻找很多东西来解决我的问题，但是，我没有发现任何有用的东西。

我有我的自定义单元格，它可以（或不能）以自由顺序包含图像、文本、标题等，因此我需要根据其内容设置行的高度。喜欢这两个： http: [//db.tt/AVBKYuEY](http://db.tt/AVBKYuEY) http://db.tt/HbnXMMFn

我可以制作它们的唯一方法是通过故事板。

所以，我调用`tableView:cellForRowAtIndex:` 并在那里设置全部内容，然后我想设置行的高度，但我不能这样做，因为行的高度设置在`tableView:height...`: 中，这被称为 BEFORE`tableView:cellForRowAtIndex:`

顺便说一句，我的情节提要中也有限制，所以，如果我可以使用它们来计算单元格高度，那就太好了。

而且当我旋转iPhone时它也完美地改变了宽度，事实上我不能改变高度很奇怪

如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:27:37.620

您可以在 tableView:heightForRowAtIndexPath: 中设置高度。您可以在该方法中访问索引路径，因此可以访问向单元格提供数据的数组的索引。因此，您需要查看该数据，并进行确定单元格高度所需的任何计算，并返回该值。

编辑后：这是一个计算多行标签高度的示例。我创建了一个临时标签，用该行将包含的文本填充它，然后使用 sizeWithFont:constrainedToSize:LineBreakMode: 进行计算：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    UILabel *label = [[UILabel alloc] init];
    label.numberOfLines = 0; // allows label to have as many lines as needed
    label.text = _objects[indexPath.row][@"detail2"]; // this is the data I'm passing in the detail label
    CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:CGSizeMake(300, 300000) lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat h = labelSize.height;
    return h + 50; //50 is base height for my cell with only one line of text, determined empirically
} 
```

# linux - 为什么“性能报告”命令什么也没显示？

> ID：13820136
> 
> 赞同：0
> 
> 时间：2012-12-11T12:10:53.873
> 
> 标签：linux, perf

我使用“perf record ./exe”，它会生成文件“perf.data”；但是，当我使用“性能报告”检查数据时，它什么也没显示，为什么？我的性能版本是“0.0.2.PERF”并使用 Open suse Linux Enterprise Server 11 (x86_64)。

当我在 Ubuntu 中做同样的事情时，它运行良好，Open suse 和 Ubuntu 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:50:21.973

是的，ubuntu 和 open suse 中的 perf 二进制文件具有不同的版本。你最好从它的源代码编译 perf（如果你有安装依赖项的权限，那就是）。与 suse linux 中的相比，linus 提示中的 perf 在功能和错误修复方面相距数光年：

```
$ git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
<make coffee, or something>

$ cd linux/tools/perf
$ make prefix=/usr/local install install-man
<it will complain about missing libs here, if any, which you should be able
 to deduce the corresponding rpm packages to install them from> 
```

至于性能学习资源 - 恕我直言，它们还不够。我从阅读[其 wiki 站点上的 perf 教程](https://perf.wiki.kernel.org/index.php/Tutorial)开始。然后我通过[gmane浏览了](http://dir.gmane.org/gmane.linux.kernel.perf.user)[perf-user 邮件列表](http://vger.kernel.org/vger-lists.html#linux-perf-users)。我发现这篇关于[acme](http://acmel.wordpress.com/) （redhat 成名）的 [开箱分析文章对](http://thread.gmane.org/gmane.linux.kernel.perf.user/9/focus=10)我需要做的事情最有帮助。您最好浏览一下 perf 用户邮件列表。

最后，我还浏览了 perf 的 git log 消息，以查看人们一直在努力的功能和修复：

```
$ cd tools/perf
$ git log -- . 
```

# powershell - 如何从 PowerShell 中的 catch 块中重新引发异常？

> ID：13820140
> 
> 赞同：72
> 
> 时间：2012-12-11T12:11:13.110
> 
> 标签：powershell, exception

我应该以与 .NET 相同的方式处理异常吗？

那么，如何从 PowerShell 中的 catch 块中重新引发异常？

够`throw`了吗？或者会`throw $_`更好？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-12-11T13:37:48.387

如果您想*重新抛出*原始异常，您可以使用`throw`（最常见的），或`throw $_`，或`throw $_.Exception`

ps：内部`catch`变量`$_`本身不是异常，而是`System.Management.Automation.ErrorRecord`包含异常

* * *

## 笔记

PowerShell 中的`throw`关键字的行为与 .NET 实现不同：在 .NET 中，您只能抛出`System.Exceptions`自身或其后继者，但在 PowerShell 中，您可以抛出任何东西，并且会自动包装到`System.Management.Automation.RuntimeException`. [请参阅此处](https://gist.github.com/4258647)的片段。

# ruby-on-rails - 在 Ruby on Rails 中创建登录表单

> ID：13820141
> 
> 赞同：0
> 
> 时间：2012-12-11T12:11:18.907
> 
> 标签：ruby-on-rails, login

我正在尝试开发一个允许用户为其个人收藏创建、修改和添加类别的系统。用户可以查看个人收藏列表，但是要将项目添加或修改到他们的个人收藏中，必须创建一个帐户并且用户必须登录。

决定遵循来自 RailsCasts的[https://github.com/ryanb/railscasts-episodes/tree/master/episode-250/revised/blog-after/app文件中的登录部分的源代码。](https://github.com/ryanb/railscasts-episodes/tree/master/episode-250/revised/blog-after/app)

除了登录和注册表单外，其他一切都有效。

尝试加载页面时，我收到以下消息：

```
NoMethodError in UsersController#create

undefined method `password_digest=' for #<User:0x007fd8540db770>
Rails.root: /Users/laurens14/collections

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:14:in `new'
app/controllers/users_controller.rb:14:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"rqrGlYSK5eSl9+P3WHkSgazwi2zyQyJUiB/G9G6UOU4=",
 "user"=>{"email"=>"laurens14@icloud.com",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "commit"=>"Sign Up"} 
```

这是所使用的控制器的源代码。

用户控制器：

```
 class UsersController < ApplicationController
def new
    @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        session[:user_id] = @user.id
        redirect_to root_url, notice: "Thank you for signing up!"
        else
        render "new"
    end
end
end 
```

会话控制器：

```
class SessionsController < ApplicationController
def new
end

def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
        session[:user_id] = user.id
        redirect_to root_url, notice: "Logged in!"
        else
        flash.now.alert = "Email or password is invalid"
        render "new"
    end
    end

def destroy
    session[:user_id] = nil
    redirect_to root_url, notice: "Logged out!"
end
  end 
```

应用程序控制器：

```
 class ApplicationController < ActionController::Base
protect_from_forgery

private

def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user

def authorize
    redirect_to login_url, alert: "Not authorized" if current_user.nil?
end
end 
```

Collections_controller

```
 class CollectionsController < ApplicationController
   # GET /collections
   # GET /collections.json
   def index
   @collections = Collection.all

    respond_to do |format|
      format.html # index.html.erb
     format.json { render json: @collections }
   end
  end

   def list
   end

    # GET /collections/1
   # GET /collections/1.json
  def show
  @collection = Collection.find(params[:id])

   respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @collection }
   end
end

  # GET /collections/new
  # GET /collections/new.json
  def new
   @collection = Collection.new

    respond_to do |format|
     format.html # new.html.erb
     format.json { render json: @collection }
    end
    end

    # GET /collections/1/edit
   def edit
   @collection = Collection.find(params[:id])
   end

def search
    @collections = Collection.find(:all, :conditions => ["title LIKE ?", "%#{params[:key]}%"])
end

   # POST /collections
   # POST /collections.json
  def create
@collection = Collection.new(params[:collection])

  respond_to do |format|
     if @collection.save
      format.html { redirect_to @collection, notice: 'Collection was successfully created.' }
      format.json { render json: @collection, status: :created, location: @collection }
     else
      format.html { render action: "new" }
      format.json { render json: @collection.errors, status: :unprocessable_entity }
    end
  end
  end

 # PUT /collections/1
# PUT /collections/1.json
def update
  @collection = Collection.find(params[:id])

  respond_to do |format|
   if @collection.update_attributes(params[:collection])
    format.html { redirect_to @collection, notice: 'Collection was successfully updated.'    }
    format.json { head :no_content }
    else
    format.html { render action: "edit" }
    format.json { render json: @collection.errors, status: :unprocessable_entity }
    end
   end
   end

  # DELETE /collections/1
 # DELETE /collections/1.json
 def destroy
   @collection = Collection.find(params[:id])
   @collection.destroy

     respond_to do |format|
  format.html { redirect_to collections_url }
  format.json { head :no_content }
    end
   end
 end 
```

模型的源代码：

```
user.rb

      class User < ActiveRecord::Base
      has_secure_password

        attr_accessible :email, :password, :password_confirmation

        validates_uniqueness_of :email
       end

collection.rb

        class Collection < ActiveRecord::Base
       attr_accessible :date, :description, :instructions, :title, :category_id
       belongs_to :category
     end

catergory.rb

          class Category < ActiveRecord::Base
          attr_accessible :name
          has_many :Collection
      end 
```

这是 Rake 路由文件夹中的代码：

```
Collections::Application.routes.draw do
get 'signup', to: 'users#new', as: 'signup'
get 'login', to: 'sessions#new', as: 'login'
get 'logout', to: 'sessions#destroy', as: 'logout'

resources :users
resources :sessions

#resources :collections

resources :collections do
    post 'search', :on => :collection
    get 'list', :on => :collection

end 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:07:06.497

在 def 块中为 new 添加以下行，然后查看它是否有效：

respond_to 做 |格式|

```
 format.html # new.html.erb
  format.json { render json: @user }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:01:58.303

检查用户模型的迁移。它有一个专栏`password_digest`吗？（列类型应该是`string`）

# typescript - 在模块中引用类

> ID：13820149
> 
> 赞同：0
> 
> 时间：2012-12-11T12:11:30.053
> 
> 标签：typescript

我正在尝试在导出的模块中引用一个类，为什么我必须像这样两次 decare GameObjects：

游戏对象.游戏对象.玩家

而不是这样：

下面代码中的 GameObjects.Player

```
import GameObjects = module("GameObjects")

class game {

    player: GameObjects.GameObjects.Player; 
```

ETC

在另一个文件中

```
export module GameObjects {

    // Class
    export class   Player {
etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:01:51.777

您的代码使用*外部*模块，然后指定加载模块的变量是必要的。请看一下[这个](https://stackoverflow.com/questions/12841557/whats-the-difference-between-internal-and-external-modules-in-typescript)问题的答案，看看有什么区别。

# sql - 如何查看针对我的 localdb 数据库执行的 SQL 语句？

> ID：13820150
> 
> 赞同：6
> 
> 时间：2012-12-11T12:11:32.790
> 
> 标签：sql, profiling, localdb

我正在运行 LocalDB 来开发我的应用程序，并希望查看我的应用程序从其各个组件执行的 SQL 语句。有什么工具可以用来捕捉这些陈述吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T16:34:14.727

让我来谈谈两个非常轻量级的 Sql 分析器，它们可以为各种 SqlServer 风格完成工作，包括 LocalDb - “*在我的机器上工作 (TM)* ”

## ExpressProfiler

到目前为止，最容易使用的（也是最简单的-show-me-the-SQL-statements-kthxbye）是[CodePlex 上的 ExpressProfiler](https://expressprofiler.codeplex.com/)。

![在此处输入图像描述](../Images/54e198b371000342c537e5544d732552.png)

整个程序是一个 126 KB 的 EXE！现在轻了！

## AnjLab Sql Profiler

另一种是来自[DataWizard](http://www.datawizard.com/)的，它曾经是免费的（显然现在价格从 5 美元起）。

当它是开源的时候，有人设法[在 GitHub 上保存了一个快照（包括 xcopy-installable 二进制文件）。](https://github.com/ren85/free-sql-server-profiler)

可执行文件将自己显示为“AnjLab Sql Profiler”，并允许对显示的事件进行一些过滤 - 但这种优势也是它的弱点，因为可以启用/禁用的事件类型太多了。如果选择了所有内容，则输出非常冗长。

仅选择特定事件即可获得更明智的输出。

![在此处输入图像描述](../Images/ff89db20b8a34a57652b2419de6e59c6.png)

以下是我为获得上述输出而选择的事件：

![在此处输入图像描述](../Images/bd9bc5278e629823d090c33a117ae2dc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T15:03:42.740

如果您在 SQL 2008 或 SQL 2008 R2 上使用 SQL Server Management Studio，您有一个名为**Activity Monitor**的工具，它允许您查看正在对您的数据库执行哪些查询以及静态详细信息，例如它对 dbms 的成本。您可以在服务器上右键单击它（打开 Mgmt Sutdio 后），选择“活动监视器”并查看应用程序末尾的“最近的昂贵查询”部分。祝你好运。

# iphone - 导入第三方项目时出现链接器错误

> ID：13820153
> 
> 赞同：3
> 
> 时间：2012-12-11T12:11:42.753
> 
> 标签：iphone, objective-c, ios, linker

我正在导入一个第三方项目，它有自己的框架。我希望研究那个 API，当我试图打开那个项目时，我得到了

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_T0Command", referenced from:
      objc-class-ref in ViewController.o
  "_OBJC_CLASS_$_T1Command", referenced from:
      objc-class-ref in ViewController.o
  "_OBJC_CLASS_$_iSmart", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我花了将近一个半小时来寻找解决方案。

`Link Binaries with Libraries`包含所需的框架，最初缺少我**已经添加**

该项目已多次构建和清理。

**编辑 1** 我已经在框架的二进制文件上使用终端运行了“文件”命令

```
file iSmartSDK
iSmartSDK: Mach-O universal binary with 2 architectures
iSmartSDK (for architecture armv7): Mach-O object arm
iSmartSDK (for architecture armv6): Mach-O object arm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:15:12.427

看起来该框架仅针对 ARM 编译，而不针对 Intel ( i386 )。尝试在你的 iPhone 上运行它，看看会发生什么..

或者，您可以使用终端在框架的二进制文件上运行“文件”命令，以检查并查看它支持的架构。第三方框架是开源的吗？您可能应该下载源代码，将其包含在您的项目中并在每次构建项目时编译它，这样您就不会遇到此类问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:16:44.203

我认为您`ViewController.m`没有添加到`target's` `compiled source`s 中`build phases`。

更新 1：将“仅构建活动架构”设置为是。

`Target`-->`Build Settings`

更新 2：检查您是否未编写`#import "ViewController.m"`. ！！

# html - 文本溢出省略号

> ID：13820154
> 
> 赞同：0
> 
> 时间：2012-12-11T12:11:46.390
> 
> 标签：html, position, alignment, css

我有这样的html代码

```
<li>
  <strong>Name Lastname<span>1</span></strong>
  <span>ok</span>
  <date>Monday, 10th Dec 2012</date>
</li> 
```

和CSS

```
li {
  padding: 0 10px;
}
strong {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
strong span {
  display: inline-block;
  margin-left: 10px;
  padding: 3px 12px;
  border-radius: 15px;
  color: #fff;
  vertical-align: middle;
  background-color: #9c0;
}
date {
  float: right;
  margin-top: 7px;
  color: #555;
  text-align: right;
  text-transform: uppercase;
} 
```

当我调整窗口大小时，我希望我的跨度始终位于强元素中文本的右侧。如果窗口很窄，文本应该溢出并且跨度可见。

请看附件图片

我想要的是

![我想要什么 1](../Images/26536713fa0e1344e573f6d07ffd75a0.png)

![我想要什么 2](../Images/88f461ef757ac4b445b8ed1c9c8aa27f.png)

我有的：

![我有什么 1](../Images/02c2e2165565df21f9d446e9c8535ffe.png)

如果我为跨度指定绝对位置，它适用于窄窗口，但不适用于宽窗口（与第一个解决方案相反）。

![我有什么绝对1](../Images/f39aeba303a416181067fff08dabee79.png) ![我拥有的绝对 2](../Images/1e7375133617bff022e10d7b1a144fc8.png)

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:21:57.920

将标签放在`span`外面`strong`

**HTML**

```
<ul>
    <li>
        <div class="left">
            <img src="http://www.swpc.noaa.gov/sxi/goes14_firstimage_small.jpg" />
            <strong>Name Lastname Lastname</strong><span>1</span>            
        </div>
         <div class="date">Monday 12 Sept 2012</div>
     </li>
</ul>
​ 
```

**CSS**

```
 ul{margin:0; padding:0}
li {
  padding: 0 10px; list-style:none
}
.left{
    overflow:auto
}
.left img{float:left; position:relative}
strong {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; margin-right:20px
}
span {
  display: inline-block;
  margin-left: 10px;
  padding: 3px 12px;
  border-radius: 15px;
  color: #fff;
  vertical-align: middle;
  background-color: #9c0; position:absolute; right:0; top:6px
}
.date{float:right; } 
```

​ ​</p>

**[演示](http://tinkerbin.com/NPJmjnvS)**

# java - java如何在java中进行通信

> ID：13820156
> 
> 赞同：0
> 
> 时间：2012-12-11T12:11:51.153
> 
> 标签：java, device, communication

我使用 ActiveX 通过 C# 和 asp.net 与我的 Web 应用程序和打印机通信。

我如何在 Java 中实现这一点？

Java 如何与设备通信？

假设我想使用 Java EE 技术（Spring、Hibernate）开发一个停车系统。

如何让我的应用程序与汽车出入口通信？

任何建议或任何推荐的开始阅读的链接都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:25:23.377

您可以将小程序用于该 Web 应用程序。还有你在applet的特权操作中应该做的事情。所以你使用的小程序应该是签名的小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:13:29.093

这种情况还有很多替代方案，其中一些我已经在这里提到过：[https ://stackoverflow.com/questions/13762984/sending-text-from-one-computer-to-another-over-the-互联网/13764357#13764357](https://stackoverflow.com/questions/13762984/sending-text-from-one-computer-to-another-over-the-internet/13764357#13764357)

但要恢复，我要做的是构建一个 Web 应用程序，它公开一个 REST 服务并从我想要的所有设备调用它，这是迄今为止我认为的最佳选择，因为它易于扩展、灵活和可扩展并且也很漂亮有据可查。

对于 web 应用程序，我会推荐类似 jersey 或 RESTEasy 的东西，对于 web 客户端，我会推荐类似 apache 的 http 客户端。

有用的链接：

REST：[http](http://www.vogella.com/articles/REST/article.html) ://www.vogella.com/articles/REST/article.html http 客户端：http: [//www.vogella.com/articles/ApacheHttpClient/article.html](http://www.vogella.com/articles/ApacheHttpClient/article.html)

希望这可以帮助。

# c++ - 具有不同签名的类方法特化

> ID：13820160
> 
> 赞同：4
> 
> 时间：2012-12-11T12:11:59.187
> 
> 标签：c++, templates, template-specialization

我正在尝试编写一个类模板，其中方法签名根据模板参数而变化。我的目标是尽可能少地重复代码。考虑这个例子，首先是类声明：

```
// a.hxx
#ifndef A_HXX
#define A_HXX

template<typename T>
struct A
{
    void foo(T value) const;
    void bar() const;
};

#include <string>

#ifndef short_declaration
template<>
struct A<std::string>
{
    void foo(const std::string &value) const;
    void bar() const;
};
#else // short_declaration
template<>
struct A<std::string>
{
    void foo(const std::string &value) const;
};
#endif // short_declaration

#endif // A_HXX 
```

现在类定义：

```
// a_impl.hxx
#ifndef A_IMPL_HXX
#define A_IMPL_HXX

#include "a.hxx"
#include <iostream>
#include <typeinfo>

template<typename T>
void A<T>::foo(T value) const
{
    std::cout << "A<T=" << typeid(T).name() << ">::foo(" << value << ")"
        << std::endl;
}

template<typename T>
void A<T>::bar() const
{
    std::cout << "A<T=" << typeid(T).name() << ">::bar()" << std::endl;
}

void A<std::string>::foo(const std::string &value) const
{
    std::cout << "A<std::string>::foo(" << value << ")" << std::endl;
}

#ifndef skip_duplicates
void A<std::string>::bar() const
{
    std::cout << "A<std::string>::bar()" << std::endl;
}
#endif // skip_duplicates

#endif // A_IMPL_HXX 
```

现在是一个测试程序：

```
// test.cxx

//#define skip_duplicates
//#define short_declaration
#include "a_impl.hxx"

int main(void)
{
    A<int>         obj1;
    A<std::string> obj2;
    int         value1(1);
    std::string value2("baz");

    obj1.foo(value1);
    obj1.bar();

    obj2.foo(value2);
    obj2.bar();

    return 0;
} 
```

如果像这样编译，我会得到（对于我的 typeid 实现）的预期输出：

```
A<T=i>::foo(1)
A<T=i>::bar()
A<std::string>::foo(baz)
A<std::string>::bar() 
```

但我当然想要一种方法来启用任何一个`skip_duplicates`，甚至`short_declaration`在我的示例中。对于一个有点[类似的问题](https://stackoverflow.com/questions/11454389/function-specialisation-with-different-signature)，[ecatmur](https://stackoverflow.com/users/567292/ecatmur)回答说需要给出完整的课程，所以至少定义`short_declaration`是行不通的。

其他人如何处理使用可能将大对象作为参数的方法创建类模板的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:39:38.427

您可以将重复项提取到基类中：

```
template<typename T>
struct Base{
    void Bar()
    {
        std::cout << "A<T=" << typeid(T).name() << ">::bar()" << std::endl;
    }

protected:
    ~Base(){}
    template<typename U>
    void DoFoo(U value)
    {
        std::cout << "A<T=" << typeid(T).name() << ">::foo(" << value << ")"
        << std::endl;
    }
};

template<typename T>
struct A : Base<T> {
    void Foo(T value)
    {
        DoFoo(value);
    }
};

template<>
struct A<std::string> : Base<std::string> {
    void Foo(const std::string& value)
    {
        DoFoo(value);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:59:30.630

根据 hansmaad 的回答[和](https://stackoverflow.com/users/1774667/yakk)[Yakk](https://stackoverflow.com/users/498298/hansmaad)的评论，我认为以下是我将采用的解决方案：

```
// a.hxx
#ifndef A_HXX
#define A_HXX

template<typename T, typename U=T>
struct Abase
{
    void foo(U value) const;
    void bar() const;
};

template<typename T>
struct A : Abase<T> { };

#include <string>

template<>
struct A<std::string> : Abase<std::string, const std::string &> { };

#endif // A_HXX 
```

而这个实现：

```
// a_impl.hxx
#ifndef A_IMPL_HXX
#define A_IMPL_HXX

#include "a.hxx"
#include <iostream>
#include <typeinfo>

template<typename T, typename U>
void Abase<T, U>::foo(U value) const
{
    std::cout << "A<T=" << typeid(T).name() << ",U=" << typeid(U).name()
        << ">::foo(" << value << "): &value=" << int(&value) << std::endl;
}

template<typename T, typename U>
void Abase<T, U>::bar() const
{
    std::cout << "A<T=" << typeid(T).name() << ",U=" << typeid(U).name()
        << ">::bar()" << std::endl;
}

#endif // A_IMPL_HXX 
```

测试程序可以保持原样，也可以得到如下额外的行：

```
//...
    std::cout << "&value=" << int(&value1) << std::endl;
//...
    std::cout << "&value=" << int(&value2) << std::endl;
//... 
```

感谢您的回答和您的建议！

# c++ - LD_LIBRARY_PATH 不工作，而 LD_PRELOAD 工作正常

> ID：13820171
> 
> 赞同：4
> 
> 时间：2012-12-11T12:12:25.330
> 
> 标签：c++, c, linux, gcc

我正在一台机器上编译一个程序并在另一台没有兼容的 libstdc++ 库的机器上运行它。如果我这样运行它，即使用 LD_PRELOAD，它运行良好。

```
LD_PRELOAD=./libstdc++.so.6 ./program args 
```

但是，如果我尝试使用 LD_LIBRARY_PATH，如下所示，它不会加载库，并且我会收到错误，即我没有所需的 libstdc++ 版本。

```
export LD_LIBRARY_PATH="./libstdc++.so.6"
./program args 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:32:04.023

您需要在 LD_LIBRARY_PATH 变量中给出路径：

```
LD_LIBRARY_PATH=$PWD ./program args 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T12:33:35.343

`LD_LIBRARY_PATH`, like `PATH`, 获取目录列表，而不是文件。

如果你想把当前目录（**不**推荐）放在那里，你可以：

```
export LD_LIBRARY_PATH=. 
```

但是最好把绝对路径放在那里，这样如果你改变目录就不会捡起随机垃圾。

对于您的特定问题，如果您的可执行文件具有设置（可能会覆盖环境），保留`LD_PRELOAD`实际上可能是最好的方法。`rpath`如果您不想每次都重新键入它，请创建一个包装脚本来执行此操作。

# python - 如何从eclipse调试用mrjob编写的python MapReduce程序

> ID：13820172
> 
> 赞同：3
> 
> 时间：2012-12-11T12:12:25.737
> 
> 标签：python, eclipse, mapreduce, mrjob

我正在尝试在 Ubuntu 下使用 eclipse 调试在 python 的 mrjob 库中编写的 mapreduce 作业。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:42:59.283

调试 MrJobs 有时可能是一个相当大的挑战。我的学习曲线是从使用 try... except 子句开始的，映射器和化简器将产生的异常（使用 traceback 模块）生成到结果中，而不是破坏工作流程。但是第一种方法很耗时，因为您必须等待几分钟才能完成工作，最后，大多数错误最终都会导致未定义的变量或语法错误。因此，我尝试使用小型测试日志来提供作业，这大大减少了运行作业以查看问题所在的时间。另一种方法是在 hadoop 之外测试映射器和缩减器，这非常方便，因为您可以为此目的使用 pdb，并快速找出问题。

最后，您还可以尝试使用 MrJob 文档的建议，然后您会发现如何在本地运行作业非常方便： [http ://packages.python.org/mrjob/runners-inline.html](http://packages.python.org/mrjob/runners-inline.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:22:26.097

关键是要有尽可能多的测试覆盖率。即使您在本地运行作业，重复地重新运行作业也会很快耗尽您的一天。对我来说，解决方法是将 map 和 reduce 步骤分解为一系列较小的函数，并为每个小步骤编写单元测试。

此外，请注意本地 Python 版本与安装在 Hadoop 实例上的版本之间的差异（最新的 EMR 实例使用 Python 2.6）。我在[这里](http://www.empiricalresults.ca/blog/2013/01/31/debugging-tips-for-running-mrjob-on-elastic-map-reduce/)列出了一些调试技巧。

# dns - 可以强制 twisted.names.client 返回 ipv4 地址吗？（无需修改 resolv.conf 或 ETH 设备）

> ID：13820175
> 
> 赞同：1
> 
> 时间：2012-12-11T12:12:33.067
> 
> 标签：dns, twisted, ipv4, names

我遇到的问题是因为在我的以太网接口上启用了 IPv6 - 所以当我不想要它们时，主机名解析有时会产生 IPv6 结果。

是否可以让 twisted.names.client**只**返回 ipv4 地址而不对操作系统/名称解析/以太网配置进行任何更改？

示例代码：

```
#!/usr/bin/python

from twisted.internet import defer, reactor
from twisted.names import client

def got_arg(*args):
    print 'got_arg',args

def get_arg(arg):
    d = client.getHostByName('www.google.com').addCallback(got_arg)

if __name__ == '__main__':
    get_arg('www.google.com')
    reactor.run() 
```

这段代码*总是*在我的 Linux 机器上给我一个 ipv6 地址：

```
got_arg ('2001:4860:4001:800::1010',) 
```

我希望能够强制进行 ipv4 查找，而无需修改下面的任何内容。有任何想法吗？由于缺乏强制，至少有一个结果被 ipv4/ipv6 分解的字典或元组会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:11:18.547

我想通了..您必须使用 client.lookupAllRecords 然后测试返回的记录类型..

```
#!/usr/bin/python

from twisted.internet import defer, reactor
from twisted.names import client, dns

def got_arg(*args):
    for a in args[0][0]:
        if a.payload.TYPE == dns.A:
            print 'A    - ipv4',a.payload
        elif a.payload.TYPE == dns.AAAA:
            print 'AAAA - ipv6',a.payload

def get_arg(arg):
    d = client.lookupAllRecords('www.google.com').addCallback(got_arg)

if __name__ == '__main__':
    get_arg('www.google.com')
    reactor.run() 
```

**编辑**

我意识到这个解决方案是不够的——特别是在第一批记录只包含一个指向另一个地址的 CNAME 的情况下。

原因是 twisted.names.common.extractRecord() 首先查找 ipv6 地址并立即返回它们 - 没有明显的机制来覆盖此行为。

因此，我为此制定了一个 hacky 解决方案，这样我们甚至不会尝试通过制作丑陋的猴子补丁来解决 ipv6 地址的链条。

```
#!/usr/bin/python

import socket
from twisted.names import dns
from twisted.names import common

def myExtractRecord(resolver, name, answers, level=10):
    if not level:
        return None
    for r in answers:
        if r.name == name and r.type == dns.A:
            return socket.inet_ntop(socket.AF_INET, r.payload.address)
    for r in answers:
        if r.name == name and r.type == dns.CNAME:
            result = myExtractRecord(
                resolver, r.payload.name, answers, level - 1)
            if not result:
                return resolver.getHostByName(
                    str(r.payload.name), effort=level - 1)
            return result
    # No answers, but maybe there's a hint at who we should be asking about
    # this
    for r in answers:
        if r.type == dns.NS:
            from twisted.names import client
            r = client.Resolver(servers=[(str(r.payload.name), dns.PORT)])
            return r.lookupAddress(str(name)
                ).addCallback(
                    lambda (ans, auth, add):
                        myExtractRecord(r, name, ans + auth + add, level - 1))

common.extractRecord = myExtractRecord 
```

我把它放在 dnsclient.py 中，并通过以下方式在我的主编中使用它：

```
from twisted.names import client
import dnsclient 
```

如果对此有更优雅的解决方案，我会全力以赴。我认为如果 getHostByName 接受 dns.A,dns.AAAA,dns.A && dns.AAAA 的掩码来确定要遍历树的记录，这会更友好。

# javascript - 使用 Array.concat 方法后未弹出警报消息

> ID：13820179
> 
> 赞同：0
> 
> 时间：2012-12-11T12:12:59.587
> 
> 标签：javascript

我在`IE9, Chrome`. 但它不适用于两种浏览器。

在`Firefox`，它工作正常

```
<script type="text/javascript">
    var first = ['a','b','c','h','i','j'];
    var second = ['d','e','f','g'];
    var insertPosIndex = 3;
    first.splice.apply(first, Array.concat(insertPosIndex, 0, second));
    alert(first);
</script> 
```

我期待输出为`a,b,c,d,e,f,g,h,i,j`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:18:55.427

```
<script type="text/javascript">
    var first = ['a','b','c','h','i','j'];
    var second = ['d','e','f','g'];
    var insertPosIndex = 3;
    first.splice.apply(first, [].concat(insertPosIndex, 0, second));
    alert(first);
</script> 
```

根据一个错误，请在[此处](https://bitbucket.org/birkenfeld/sphinx/issue/710/arrayconcat-doesnt-work-on-chrome-ie)阅读有关它的信息，`[]`而不是`Array`Chrome 的解决方法。

这适用于 Firefox、IE9 和 Chrome。

# javascript - 单击时隐藏/显示元素并更改 CSS

> ID：13820183
> 
> 赞同：0
> 
> 时间：2012-12-11T12:13:10.290
> 
> 标签：javascript, jquery, css

我正在尝试建立一个页面，其中有一些链接，当点击它们时，它会在同一页面上显示一个文本。我已经用 javascript/jQuery 完成了它，它工作正常。

我想要做的是改变活动链接的布局。我已经在之前关于该主题的问题上寻找了几个小时，但我有点迷茫，因为我是 javascript/jQuery 的新手

**这是一个[FIDDLE](http://jsfiddle.net/yJYTT/96/)**。你会看到我做了什么。我需要有关活动链接布局的帮助。例如，**我想为链接的文本获得另一种颜色，这样我们就会知道哪个链接是活动的**）

这是我的html代码：

```
<div id="fond_soins">
    <a class"asoins" href="javascript:showonlyone('onglet1');" >
        <span class="icon">
            <div id="acu1">
                <h3 class="onglet">Titre 1</h3>
            </div>
    </a>
    <a class"asoins" href="javascript:showonlyone('onglet2');" >
        <span class="icon">    
            <div id="acu2">
                <h3 class="onglet">Titre 2</h3>
            </div>
    </a>
    <a class"asoins" href="javascript:showonlyone('onglet3');" >
        <span class="icon">
            <div id="acu3">
                <h3 class="onglet">Titre 3</h3>
            </div>
        </a>
</div>

<div class="clear"></div>

<div id="contenu_soins">
    <div class="newboxes" id="onglet1">
        <div class="rectangle"></div>
            <h2 class="titre_bloc">Titre1</h2>
            <div class="clear"></div>
            <div class="contenu-texte">
                <div class="contenu-texte"><p>bloc 1</p></div> </div>
            </div>
            <div class="newboxes" id="onglet2">
                <div class="rectangle"></div>
                    <h2 class="titre_bloc">Titre2</h2>
                    <div class="clear"></div>
                    <div class="contenu-texte"><p>bloc 2</p></div>
                </div>
                <div class="newboxes" id="onglet3">
                    <div class="rectangle"></div>
                        <h2 class="titre_bloc">Titre3</h2>
                        <div class="clear"></div>
                        <div class="contenu-texte"><p>bloc 3</p></div>
                    </div>
                </div> 
```

这是CSS：

```
#fond_soins {
    height:280px;
    background-color:#FFF;
    width:100%;
}
#contenu_soins {
    background-color:#FFF;
    margin-top:30px;
    min-height: 242px;
    padding-top: 11px;    
}
.newboxes {
    padding-left:30px;
    padding-right:30px;
    padding-bottom:30px;
}
a.asoins, a.asoins:hover {
    text-decoration: none;
}
#acu1 {
    margin-left: 6em;
}

#acu1, #acu2, #acu3 {
    width:15%;
    height:165px;
    border-radius: 15px;
    border-style:solid;
    border-color: #E5EAD9;
    border-width:5px;
    color:#777;
    float:left;
    margin-right:1em;
    margin-top:69px;
}
#acu1:hover,#acu2:hover,#acu3:hover {
    border-color:#333;
    color:#333;
    text-decoration:none;
}

h3.onglet {
    text-align:center;
    padding-top:135px;
}

#onglet1 {
    display:block;
}
#onglet2, #onglet3 {
    display:none;
}

#acu1.active, #acu2.active, #acu3.active {
    border-color:#333;
    color:#333;
    text-decoration:none;
} 
```

这是Javascript

```
function showonlyone(thechosenone) {
    $('.newboxes').each(function(index) {
        if ($(this).attr("id") == thechosenone) {
            $(this).show();    
        }
        else {
            $(this).hide();
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:32:23.257

创建一个新的css类名“active”为

```
 .active #acu1,.active #acu2,.active #acu3
    {
        text-decoration: underline;
        border-radius: 15px;
        border-style: solid;
        border-color: Black;
        border-width: 5px;
    } 
```

现在，对您的 javascript 函数进行小修正，通过发送`this`运算符 添加一个参数**，例如：** `<a class"asoins" href="javascript:void(0);" onclick="javascript:showonlyone('onglet3',this);" ></a>` 并在 js 函数中进行一些更改

```
function showonlyone(thechosenone,CurrCtrl) {

     $(".asoins").removeClass("active");
     $(CurrCtrl).addClass("active");

     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show();    
          }
          else {
               $(this).hide();
          }

     });

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:38:30.750

尝试这个：

```
$(function(){
    var links = $('.asoins');

    links.click(function(){
        $(this).toggleClass('activelink', true);
        links.not(this).toggleClass('activelink', false);
    });
}); 
```

CSS：

```
#acu1:hover,#acu2:hover,#acu3:hover, #fond_soins .activelink div {
    border-color:#333;
    color:#333;
    text-decoration:none;
} 
```

演示：http: [//jsfiddle.net/yJYTT/119/](http://jsfiddle.net/yJYTT/119/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:41:13.663

我喜欢纯 CSS 解决方案，所以我为你做了这个：

[http://jsfiddle.net/vucMe/](http://jsfiddle.net/vucMe/)

它用于`#a:checked ~ label[for=a]`设置充当单选按钮的标签

# jquery - 强制 dom 更新 Firefox 3.5.3 中的 onclick 属性

> ID：13820184
> 
> 赞同：0
> 
> 时间：2012-12-11T12:13:11.367
> 
> 标签：jquery, events, dom, struts2, triggers

这是我面临的问题：我有一个输入来汇总表单，其中包含在点击事件中执行的功能。此功能将禁用事件单击，启动一个 jquery 对话框。对话框有一个yes/no按钮，它会将onclick属性从输入中清空（防止重新执行该功能），并触发一个click事件以提交表单。这在 firefox 17 中运行良好，但在 firefox 3.5.3 中，即使 onclick attr 已被清空，它也会触发函数执行。我怀疑这与 dom 更新有关，但我不确定。

这是算法的一个片段：

```
<form>
  ....
<s:submit action="someAction" onClick="myFunction(this,'save_box_id'); return false;"/>

function myFunction(sauvButton,save_box_id) {

          if($("#save_box_id").is(':data(dialog)')){

              $("#save_box_id").dialog('open');
          }else{
              $("#save_box_id").dialog({
                  buttons:{
                      "Yes":function(){
                                      ...
                          $(sauvButton).attr('onclick','');
                          $(sauvButton).trigger('click');
                          $(this).dialog('close');
                      },
                      "No": function(){
                         ...
                          $(sauvButton).attr('onclick','');
                          $(this).dialog('close');
                          $(sauvButton).trigger('click');

                      },
                      "cancel":function(){
                          $(this).dialog('close'); 
                      }
                  }

              });
          }

 } 
```

感谢您的回复。

# c# - 我如何检查一个列表是否比另一个列表大 1？

> ID：13820187
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:13:16.723
> 
> 标签：c#

这是代码：

```
if (rise.Count > fall.Count)
            {
                rise.Remove(rise.Last());
            } 
```

在这种情况下，我检查列表上升是否大于列表下降。我想检查仅当列表上升大于列表下降 1 时才执行某些操作。

例如，如果rise.Count 是418 而fall.Count 是417，那么做一些事情，因为上升大于下降1。或者如果rise.Count 是1123 而fall.Count 是1122 那么做点什么。只有当它大一时，所有其他情况才会做任何事情。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:16:07.113

你快到了

```
if ((rise.Count - fall.Count) == 1)
{
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:16:57.293

```
if (rise.Count - fall.Count == 1)           
    rise.Remove(rise.Last()); //your code here 
```

# ruby-on-rails - 如何使用delayed_job 来延迟控制器动作？

> ID：13820195
> 
> 赞同：0
> 
> 时间：2012-12-11T12:13:46.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我怎样才能为这个动作/动作实现delayed_job gem？它从 API 获取 plist 并将这些值插入数据库。我只是希望它作为后台进程插入数据......

```
def get_videos_from_outer(page=params[:page], kid=params[:kid], totalCount="")

        @videos = Video.where(program_id: params[:p_id])
        @program = Program.find(params[:p_id])

        @fetch = Typhoeus::Request.post("URL", :params => {:commandtype=>"getprogramepisodes", :feedtype=>"plist",:id=>kid.to_i, :page=>page.to_i})
        @plist = Plist::parse_xml(@fetch.body.force_encoding 'utf-8')

          @totalCount = @plist.second.first['totalCount']

          if !totalCount.blank?
            @totalCount = totalCount
          end
        import_outer_videos(@plist, kid, page.to_i, @totalCount.to_i)

  end 
```

和`import_outer_videos`方法。

```
private

def import_outer_videos(plist, kid, page, totalCount)

         @totalCount = totalCount

        plist.second.each_with_index do |t, i| 
        # First page has odd data and here we're getting rid off them
                if page.to_i==1
                   if i > 0
                   @new = Video.create(:thumb_path=>t['tnPath'], :vid=>t['id'], :title=>t['title'], :type=>t['type'], :kid=>kid, :program_id=>@program.id)

                    end
                else
                  @new = Video.create(:thumb_path=>t['tnPath'], :vid=>t['id'], :title=>t['title'], :type=>t['type'], :kid=>kid, :program_id=>@program.id)       

                end

        end

        if page.to_i < (@totalCount.to_i/20) + 1
        page = page.to_i + 1 

        get_videos_from_outer(page.to_i, kid.to_i, @totalCount)
        else
          redirect_to :action=>"index", :p_id=>params[:p_id]
        end

          if @new.errors.blank?
          flash[:notice]="#{@totalCount} videos has been transfered."
          else
            flash[:notice]="No new video."
          end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:19:16.777

创建`app/workers/my_job.rb`，类似：

```
class MyJob < Struct.new(:p1, :p2)
  def perform
    # put all your hard work here.
    # APIClass.get_videos_from_outer(p1, p2)
    # or something.
  end
end 
```

然后调用它：

```
Delayed::Job.enqueue(MyJob.new(foo, bar), 0, 2.hours.from_now) 
```

或者其他的东西。

[这可能很有用。](http://railscasts.com/episodes/171-delayed-job)

# python - Django 模型 - 外键对象日期重写

> ID：13820196
> 
> 赞同：0
> 
> 时间：2012-12-11T12:13:57.997
> 
> 标签：python, django, foreign-keys, models, django-queryset

我有这样的情况：

楷模：

```
class Test2(models.Model) {
  date = models.DateField(editable=False)
}

class Test(models.Model) {
  test2 = models.ForeignKey(Test2)
} 
```

行动：

```
for test_obj in Test.objects.all():
  test2_obj = test_obj.test2
  test2_obj.date = date.today()
  test2_obj.save()
  test_obj.save() 
```

在该操作之后，日期`test2_obj`不会更改。为什么？是`test2_obj = test_obj.test2`副本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:38:28.193

我创建 testapp 并测试你的问题

> 模型.py

```
from django.db import models

class Test2(models.Model):
    date = models.DateField(editable=False)

class Test(models.Model):
    test2 = models.ForeignKey(Test2) 
```

> 测试.py

```
from django.test import TestCase
from models import Test, Test2

from datetime import datetime, date

class SimpleTest(TestCase):
    def test_field_update(self):
        old_date = date(2012,11,11)
        current_date = datetime.today().date()

        t2 = Test2(date = old_date)
        t2.save()

        t1 = Test(test2 = t2)
        t1.save()

        for test_obj in Test.objects.all():
            test2_obj = test_obj.test2
            test2_obj.date = current_date
            test2_obj.save()
            test_obj.save()

        t2 = Test2.objects.all()[0]

        self.assertEqual(t2.date, current_date) 
```

运行测试

.. >manage.py 测试 testapp

为别名“默认”创建测试数据库...。-------------------------------------------------- -------------------- 在 0.016 秒内运行 1 次测试

OK 正在销毁别名“default”的测试数据库...

所以你这是按预期工作，而不是你发布的那样。

# c# - 在 WinForms 应用程序中托管 WCF 服务

> ID：13820197
> 
> 赞同：0
> 
> 时间：2012-12-11T12:14:00.983
> 
> 标签：c#, wcf, servicehost

我使用与此处相同的 WCF 服务：[How to consume wcf service running as windows service in ajax client](https://stackoverflow.com/questions/7142035/how-to-consume-wcf-service-running-as-windows-service-in-ajax-client)

1.  我想通过视图 h **p://localhost:8732/TestService 显示浏览器中的所有可用方法但我收到消息：**找不到端点。**
2.  我可以在此服务方法中使用 AJAX 发送从该 WCF 服务获取数据的 HTML 页面吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:30:24.813

你问的不是很清楚，可以改写一下吗？也许也许发布一些代码？

另外，您是否启用了 MEX 端点？或者它可能没有正确配置。我遇到了类似的问题，服务似乎正在运行，但 SvcUtil 无法获取任何端点信息。经过一些重新配置（app.config 和代码）后，它工作并且 SvcUtil 可以找到端点信息。

# android - 恢复时如何更新背景片段？

> ID：13820198
> 
> 赞同：0
> 
> 时间：2012-12-11T12:14:03.590
> 
> 标签：android, android-fragments

MainActivity.java

```
FragmentA fragmentA = null;
FragmentB fragmentB = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

}

public void replaceFragment(Fragment newFragment){
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.right_container, newFragment);
    ft.addToBackStack(null);
    ft.commit();
}

public void removeFromActivity(Fragment oldFrag){
    FragmentManager manager = getFragmentManager();
    FragmentTransaction ft = manager.beginTransaction();
    manager.popBackStack();
    manager.executePendingTransactions();
    ft.remove(oldFrag);
    ft.commit();
} 
```

片段A.java

```
public class FragmentA extends Fragment implements OnClickListener{

public View contentView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if(null == contentView){
        contentView = inflater.inflate(R.layout.fragment_a, null);
        EditText editTxt = (EditText) contentView.findViewById(R.id.right_frag_edit_txt);
        editTxt.setOnClickListener(this);
    }
     //--------------------------------------------------//
     //Here If I am printing
     EditText editTxt = (EditText) contentView.findViewById(R.id.right_frag_edit_txt);
     System.out.println(editTxt.getText()); //Output -- Now Button has Clicked --New value as expected
    return contentView;
}

public void setValues(String newVal){
    EditText editTxt = (EditText) contentView.findViewById(R.id.right_frag_edit_txt);
    editTxt.setText(newVal);
}

@Override
public void onClick(View v) {
    FragmentB newFrag = new FragmentB();
    ((MainActivity)getActivity()).fragmentB = newFrag;
    ((MainActivity)getActivity()).replaceFragment(newFrag);
}
} 
```

片段B.java

```
public class ReplacedFragment extends Fragment implements OnItemClickListener{

public View contentView;

    @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if(null == contentView){
        contentView = inflater.inflate(R.layout.fragment_b, null);
    }
    return contentView;
}

@Override
public void onClick(View v) {
    FragmentA previousFrag = ((MainActivity)getActivity()).fragmentA;
    previousFrag.setValues("Now Button has Clicked");
    ((MainActivity)getActivity()).removeFromActivity(this);
}
} 
```

当我单击“返回”按钮时，从 fragmentB 中，我只是从返回堆栈中删除了这个片段。结果 FragmentB 恢复回来。但是 edittext 值没有用新值更新。

当 FragmentA 恢复时，我应该怎么做才能更新它的某些视图。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:41:01.657

因此，如果我正确理解这一点，您希望在单击片段 B 中的按钮后更新片段 A。如果是这种情况，我有一个解决方案，但它不是很优雅，但它可以工作。我在片段 B 中调用了片段 A 的 OnPause。

```
Fragment fragmentA = getActivity().getSupportFragmentManager().findFragmentByTag("fragmentA");
fragmentA.onPause(); 
```

在 OnPause 中，您现在可以以编程方式更新片段 A。理论上您也可以调用 OnResume，但在我的情况下，我已经将 OnResume 用于其预期目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:44:29.460

最后我找到了一个解决方案，但我不知道它是否是一个有效的解决方案。但我仍然在分享它。

`FragmentB`从开始时`fragmentA`，它将调用我将标志设置为 true`onPause()`的位置。`FragmentA`当从中`FragmentB`删除时`FragmentTransaction`，它将调用我正在检查标志值并更新.`onResume()``FragmentA``FragmentA`

我认为这是一个更好的解决方案，而不是显式调用生命周期方法`onPause()`。

# sql-server - SqlServer 触发器可以推送到 ActiveMQ

> ID：13820199
> 
> 赞同：2
> 
> 时间：2012-12-11T12:14:09.230
> 
> 标签：sql-server, activemq

谁能告诉我是否可以将数据从 SqlServer 触发器直接推送到 ActiveMQ。

我已经浏览了 ActiveMQ 文档，但没有看到任何对它的引用。我们可以使用服务轮询数据库以获取插入，但触发器将是理想的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:52:53.083

> 但触发器将是理想的解决方案

绝对不。这是一个坏主意的原因有很多，但我会给你主要的：

*   增加了每个 DML 的延迟，因为您需要等待 RPC 调用完成。
*   当 ActiveMQ 存在可用性问题时，随机和不稳定行为的操作失败（RPC 调用失败，DML 和原始应用程序事务随之而来）
*   存在回滚时的正确性。仅此一项就是一个完整的表演停止者。如果运行触发器的应用事务回滚，无论出于何种原因，您都无法撤消 ActiveMQ 操作。

其中一些问题可以通过将应用事务与排队系统一起注册到分布式事务 (2PC) 中来解决，即 . [用于 ActiveMQ 的 XA](http://activemq.apache.org/how-do-transactions-work.html)。这解决了最后一个问题，但代价是增加了严重的延迟并将吞吐量降低了几个数量级。

提倡的解决方案是让触发器在一个[用作队列的表中](http://rusanu.com/2010/03/26/using-tables-as-queues/)本地入队，并让外部应用程序从该表中出列并推送到 ActiveMQ。不要偷工减料并将您的应用程序状态用作“队列”（即轮询状态并标记为“已处理”），这就是 99% 的“数据库中的队列”尝试失败的原因。

当您将数据存储从队列存储中分离出来时，您仍然无法解决一些固有的问题（无法进行一致的备份/恢复，HA/DR 故障转移时的“脑裂”就像队列一样不遵循数据库故障转移等），但只有购买嵌入在数据库中的排队和消息传递，如[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx) ，才能解决这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T14:42:37.250

我会说可以在 Sql Server 中创建一个 UDF，该 UDF 在 .NET 中运行代码并创建一个 UDP/TCP 连接 ActiveMQ 服务器。

我已经通过这种方式通过 SqlServer 数据库进行了很多网络连接，在本地网络中创建了非阻塞连接。

# c++ - 在不使用 GLSL 的情况下迁移到最新的 OGL

> ID：13820202
> 
> 赞同：0
> 
> 时间：2012-12-11T12:14:12.880
> 
> 标签：c++, opengl, glsl

我正在开发仅完全支持 GL < 2 的上网本。这一切都以超过 100fps 的速度运行。但是由于我读到状态机已被弃用，我正在尝试移动，但这似乎是不可能的。许多函数没有使用最新的 glext.h 声明。所以我不能创建一个着色器程序或至少一个 VBO。所以我尝试使用 glm 移动矩阵。但是从 glm 向 ogl 发送一个矩阵是通过调用 glUniformMatrix*v 来完成的，这里也没有声明。那么有没有办法在不使用 GLSL 的情况下“升级”呢？我不需要任何暗示我只包含 GLSL，因为它既好又快等，因为我不能使用它，我不敢相信没有它是不可能的。

我使用 OpenGL Extension Viewer 3 检查了扩展。报告显示：
1.1 100%
1.2 100%
1.3 100%
1.4 100%
1.5 66%（不支持：GL_ARB_occlusion_query）
2.0 10%（仅支持：GL_EXT_stencil_two_side）
2.X 0%
3。 X 0%
4.X 0%

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:40:07.303

> …仅完全支持 GL <= 2.2。（...）但由于我读到状态机已被弃用，我正在尝试移动，但这似乎是不可能的。

首先：状态机没有被弃用。固定功能管道已被弃用。但这种变化只适用于 OpenGL-3 核心和更远的地方。因此，如果您仅限于 OpenGL-2，那么固定功能和所有爵士乐仍然可用。

> 那么有没有办法在不使用 GLSL 的情况下“升级”呢？

您确实意识到弃用固定功能管道的含义大致相同：现在一切都发生在着色器中。用 GLSL 编写的着色器。

GLSL 在 OpenGL-2 中也可用。这不是强制性的。

> 许多函数没有使用最新的 glext.h 声明。所以我不能创建一个着色器程序或至少一个 VBO。

您需要的不仅仅是 glext.h。您还需要一些从 OpenGL 实现中加载高级功能的代码。一个流行的选择是 GLEW，可在[http://glew.sourceforge.net获得](http://glew.sourceforge.net)

> 我不能使用它

好吧，不是开箱即用。但是使用 GLEW 是小菜一碟：

1.  下载 GLEW
2.  安装到额外安装的库并包含目录
3.  将所有出现的 替换`#include <GL/gl.h>`为`#include <GL/glew.h>`
4.  将 glew32.lib 作为库依赖添加到链接器设置
5.  `glewInit();`在每个 OpenGL 上下文创建之后添加对 right 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:29:40.383

尝试使用[glew](http://glew.sourceforge.net)。它不会直接解决您的问题，而是与在 Windows 上使用 OpenGL 扩展有关的许多（可能相关的）问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:51:36.407

查看您的平台是否支持 OpenGL ES 2.0。这实际上已成为现代台式机的标准。如果是这样，请使用 OpenGL ES 2.0。

此外，您还可以在 OpenGL 扩展中找到许多您需要的功能。查看您的平台上有哪些扩展可用，并注意函数名称可能与后来的标准名称不同（例如 glBindFramebuffer_EXT）

# c# - 在 x 数量相同的数字后拆分字符串

> ID：13820204
> 
> 赞同：12
> 
> 时间：2012-12-11T12:14:16.203
> 
> 标签：c#, regex, string, split

我需要在 C# 中拆分一个字符串，如下所示：

字符串是这样的：`0000120400567`

`0`开头总是有s。在上面的示例中，有六个零，后跟`120400567`。我想拆分我得到的最后一部分的字符串`120400567`。

开头的零数量可能会改变（最后一个零件号将增加一个数字），这意味着我们可以拥有`001245878945`并且我想要的是`1245878945`.

如何拆分此字符串，去掉前 0 或前 x 数量的零并仅获取结束编号？可能是数字开头没有任何零，并且数字直接从第一个数字开始......但可能是数字包含 8 个零和超过 2 个或更多位数。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-11T12:16:40.670

```
string withoutLeadingZeroes = withLeadingZeroes.TrimStart('0'); 
```

（或者

```
string withoutLeadingZeroes = Regex.Replace(withLeadingZeroes, "^0*", ""); 
```

或者

```
string withoutLeadingZeroes = new String(
    withLeadingZeroes.SkipWhile(c => c == '0').ToArray()); 
```

或者 ...）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T12:21:18.363

`TrimStart`是你的朋友。但是，当您的原始字符串仅包含 0 时，您需要注意不要以空字符串结尾。

```
string s = "0000120400567";
s = s.TrimStart('0');
if (s == "")
    s = "0"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T12:17:39.377

您可以使用`int.Parse`将字符串转换为整数。这将删除前导零，但当然仅限于 int 范围内的字符串（或 long，如果您使用它）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-11T15:47:11.013

为什么不将其转换为 int32 或 long 或任何您想要的，然后将其转换为字符串？

```
int i = int.Parse("0000120400567");
        string s = i.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T12:49:22.567

如果字符串中有一定范围的数字，您可以使用它`(?:\b(?:0+|(?=[1-9])))`来拆分该字符串

`0534 000500 35435 040`因此，与上述拆分`regex`将最终得到

```
534 
500
35435 
40 
```

* * *

如果它只包含一个数字`Regex`，则不需要，尤其是`splitting`它

但是如果你仍然想要`split`那个字符串，你可以用`(?:^0+|^)`

# hibernate - Hibernate ClassNotFoundException：org.hibernate.proxy.HibernateProxy

> ID：13820206
> 
> 赞同：4
> 
> 时间：2012-12-11T12:14:21.197
> 
> 标签：hibernate, osgi

我的休眠设置引发了一些异常，但仍然有效。映射 xml 中定义的每个实体类都会引发异常。我的项目使用 Equinox 在 OSGI 上设置。找不到的类肯定在类路径中。

休眠配置

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.driver_class">com.package.Driver</property>
        <property name="hibernate.connection.url">url</property>
        <property name="hibernate.connection.username">username</property>
        <property name="hibernate.connection.password">password</property>
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="dialect">org.hibernate.dialect.H2Dialect</property>
        <property name="current_session_context_class">thread</property>
        <property name="hibernate.cache.use_second_level_cache">false</property>
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <property name="show_sql">false</property>
        <!-- C3P0 Connection Pool -->
        <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
        <property name="hibernate.c3p0.min_size">5</property>
        <property name="hibernate.c3p0.max_size">20</property>
        <property name="hibernate.c3p0.timeout">300</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.idle_test_period">3000</property>
    </session-factory>
</hibernate-configuration> 
```

例外

```
Javassist Enhancement failed: at.mkw.inlocs.common.Mapping
java.lang.RuntimeException: by java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at javassist.util.proxy.ProxyFactory.createClass3(ProxyFactory.java:344)
    at javassist.util.proxy.ProxyFactory.createClass2(ProxyFactory.java:314)
    at javassist.util.proxy.ProxyFactory.createClass(ProxyFactory.java:273)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.getProxyFactory(JavassistLazyInitializer.java:163)
    at org.hibernate.proxy.pojo.javassist.JavassistProxyFactory.postInstantiate(JavassistProxyFactory.java:66)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:187)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:170)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:77)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:107)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:135)
    at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:80)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:323)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:475)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:133)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
    at at.mkw.inlocs.syncservice.client.LocalDatabase.configureHibernate(LocalDatabase.java:80)
    at at.mkw.inlocs.syncservice.client.LocalDatabase.login(LocalDatabase.java:153)
    at at.mkw.inlocs.swingclient.StartupHandler.createMainframe(StartupHandler.java:123)
    at at.mkw.inlocs.swingclient.Activator.runSwing(Activator.java:142)
    at at.mkw.inlocs.swingclient.Activator.access$6(Activator.java:71)
    at at.mkw.inlocs.swingclient.Activator$7.run(Activator.java:236)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: javassist.CannotCompileException: by java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at javassist.util.proxy.FactoryHelper.toClass(FactoryHelper.java:169)
    at javassist.util.proxy.ProxyFactory.createClass3(ProxyFactory.java:339)
    ... 40 more
Caused by: java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javassist.util.proxy.FactoryHelper.toClass2(FactoryHelper.java:181)
    at javassist.util.proxy.FactoryHelper.toClass(FactoryHelper.java:163)
    ... 41 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.proxy.HibernateProxy
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:494)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:398)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 50 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:15:00.313

这是在 OSGi 环境中使用 Hibernate 的常见问题。问题是每个包都有自己的类加载器，当`Class.forname()`在 hibernate 中使用 Hibernate 时，它​​会引发异常，因为您的映射类不在 hibernate 类加载器的类路径上。在 Equinox 中解决这个问题的方法是使用所谓的伙伴类加载。在包含 hibernate jar 的捆绑包中，您可以在其中添加以下内容：

```
Eclipse-BuddyPolicy: registered 
```

然后在带有映射类的包中添加这个假设你的休眠包的名称`org.hibernate`

```
Eclipse-RegisterBuddy: org.hibernate 
```

此外，要使其正常工作，您需要将休眠包添加为依赖项，而不是通过导入的包，因此请确保将其添加到您的包中以及映射类。

```
Require-Bundle: org.hibernate 
```

欲了解更多信息谷歌休眠好友

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T21:56:40.643

并非所有问题都是相同的，即使它们都是类未发现异常。在我的场景中，使用 Hibernate 的持久性捆绑包具有 org.hibernate.proxy 类，但具有休眠类的捆绑包没有 org.hibernate.proxy 类。使用 Import-Package 导入这些类解决了我的问题

该问题的 METE-INF 更改适用于我的方案

导入包：entity,javax.persistence;version="[2.1,3)",javax.xml.bin d.annotation,org.hibernate.proxy,javassist.util.proxy

# java - 当 MySQL 中有任何更新时，在 android 中获取通知

> ID：13820207
> 
> 赞同：4
> 
> 时间：2012-12-11T12:14:20.557
> 
> 标签：java, php, android, mysql, android-notifications

我想根据 MySQL 的变化来实现通知。我有一个在运行时向设备发送任务的应用程序。当我在 MySQL 的任务表中插入任务时，我希望在我的 android 设备上收到通知。我可以使用 php 从 MySQL 获取所有任务。而且我还进行了登录，在其中我获取用户名和密码并从 MySQL 验证它。和我为任务所做的一样。获得任务。像[这样](https://stackoverflow.com/questions/13245771/how-to-validate-the-user-login-credentials-in-android-using-php-mysql-with-the/13248082#13248082)，现在我正在关注本[教程](http://mobiforge.com/developing/story/displaying-status-bar-notifications-android)以实现通知。但是在 MySQL 中插入任务时如何获得通知。我必须创建一个将在后台运行的服务，但是如果任务表有任何变化，我将如何获得。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:20:06.090

您应该看一下[Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/)，它提供了无需轮询即可向设备发送消息的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:20:48.587

您可以在 MySQL 数据库中创建一个触发器，并在每次在该表中插入一行时运行一个外部应用程序。更多信息：[http ://dev.mysql.com/doc/refman/5.1/en/faqs-triggers.html#qandaitem-B-5-1-10](http://dev.mysql.com/doc/refman/5.1/en/faqs-triggers.html#qandaitem-B-5-1-10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:21:16.313

# java - 插入排序实现的区别

> ID：13820220
> 
> 赞同：0
> 
> 时间：2012-12-11T12:15:02.957
> 
> 标签：java, sorting

我已经以两种不同的方式看到了插入排序的实现，如下所示，

方法一：

```
 for (int out = 1; out < numbers.length; out++) {

        int temp = numbers[out];
        int in = out - 1;
        while (in >= 0 && numbers[in] > temp) {

            numbers[in + 1] = numbers[in];
            numbers[in] = temp;
            in--;
        }

        } 
```

方法二：

```
int S[] = { 20, 25, 10};
    int N = S.length;

    for (int i = 1; i < N; i++) {
        int j = i - 1;
        int temp = S[i];

        while (j >= 0 && S[j] > temp) {
        S[j + 1] = S[j];
        j--;
        }

        S[j + 1] = temp;
    } 
```

但我不明白为什么交换在第二种方法中的while循环之外的原因？有没有理由让它在while循环之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:18:26.143

这两个版本在功能上是等效的。后者只是避免做一些不必要的工作。

在第一个版本中，以下分配

```
numbers[in] = temp; 
```

如果循环继续，将在循环的下一次迭代中撤消。`temp`第二个版本注意到了这个事实，并且在循环完成之前不会恢复恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:18:53.167

基本上两者是相同的，但在第一个中，您只需将临时编号立即写入您复制到元素 [in + 1] 的编号。在第二个中，你等到你的 while 循环完成。所以它只是节省了一些时间。

# winapi - 如何找到单击按钮时调用的函数

> ID：13820225
> 
> 赞同：0
> 
> 时间：2012-12-11T12:15:25.587
> 
> 标签：winapi, memory, assembly, machine-code, memory-editing

使用[Cheat Engine](http://cheatengine.org/)和[OllyDbg](http://www.ollydbg.de/version2.html)之类的程序，我正在编辑程序运行时的内存。

我需要找到用户单击某个按钮时执行的函数的地址。

*是否有任何可用的教程显示如何做到这一点？*

*是否有任何可用的软件可以跟踪当前执行的代码？*

我正在尝试构建和扩展软件应用程序，我的客户不再拥有源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:51:15.383

首先，您在内存中搜索显示的字符串，然后放置一个 onread 内存断点，您将确定它的使用位置，然后您开始遍历调用堆栈。逐步断点，直到到达要通过的条件所在的位置。有大量的教程，书籍，但也很辛苦......

更多*信息* [在这里](http://www.google.com/search?q=remove+nag+screen+tutorials&oq=remove+nag+screen+tutorials&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8)

更多*书籍* [在这里](https://stackoverflow.com/questions/6015986/interesting-books-on-reverse-engineering)

# facebook - 您可以将 Facebook 事件同步到网站上的事件部分吗？

> ID：13820227
> 
> 赞同：1
> 
> 时间：2012-12-11T12:15:30.683
> 
> 标签：facebook, events

我目前正在网站上开发一个活动部分。用户将能够在此网站上发布活动。我想知道是否有任何方法可以将 Facebook 事件与我网站上的表单同步。

我们特别希望尽可能多地填写以下字段：

```
Country : 

Region/City : 

Venue :   

Genre :

Date :

Start/End Time : 

Name  : 

Cost :

Jpeg / Image : 

Info : 
```

有人知道类似的事情吗？

谢谢

# c# - 简单连接中的 LINQ 错误 - 连接子句中的表达式之一的类型不正确

> ID：13820230
> 
> 赞同：0
> 
> 时间：2012-12-11T12:15:39.860
> 
> 标签：c#, linq

我正在尝试做一个简单`JOIN`但`LINQ`发生错误

`the type of one of the expressions in the join clause is incorrect`

**代码：**

```
var select2 = from si in db.San_Imovel
                              join sic in db.San_Imovel_caracteristica      <--- ERROR 
                              on si.Imovel_Id equals sic.Imovel_Id
                             where si.Credenciada_Id == credenciada_Id                    
                             select new
                             {
                                 si.Celula_Id, 
                                 si.Credenciada_Id, 
                                 si.Imovel_Id,
                                 si.NomeArquivo, 
                                 si.TipoDsc1, 
                                 si.BairroDsc1,
                                 si.AreaRealPrivativa,                                  
                                 si.ValorImovel,
                                 si.ValorCondominio, 
                                 si.ValorIPTU, 
                                 si.Lat2, 
                                 si.Lon2,
                                 si.Bairro1, 
                                 si.NomeCidade,
                                 si.Transacao_ID
                             }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:45:48.027

如果你的属性有`long`和`int?`类型，那么你可以试试这个加入：

```
var select2 = from si in db.San_Imovel
              join sic in db.San_Imovel_caracteristica
                            .Where(x => x.Imovel_Id.HasValue)
              on si.Imovel_Id equals (long)sic.Imovel_Id.Value
              where si.Credenciada_Id == credenciada_Id                    
              select new { ... } 
```

# sql - 匹配所有条件洗劫

> ID：13820235
> 
> 赞同：0
> 
> 时间：2012-12-11T12:15:52.870
> 
> 标签：sql, ruby-on-rails-3, ransack

我正在尝试过滤我的用户以了解他们的外语知识。我有`LanguageSkill`属于`Member`,`Language`和的模型`LanguageLevel`。

```
class LanguageSkill < ActiveRecord::Base
    attr_accessible :member_id, :language_id, :language_level_id
    belongs_to :member
    belongs_to :language
    belongs_to :language_level
end 
```

另一个重要信息是`LanguageLevel`具有`difficulty`属性（只是一个整数，因此可以对不同的语言级别进行排序）

一个成员可能具有多种语言的语言技能，但是当我查询它们时，我希望将语言和语言级别联系起来，即语言级别与所讨论的语言相关，而不是与任何语言相关。

语言字段部分如下：

```
<div class="field">
<div class="language">
    <%= select_tag :'q[language_skills_language_id_eq_all][]', options_from_collection_for_select(Language.all, 'id', 'name') %>
</div>
<div class="language_level">
    <%= select_tag :'q[language_skills_language_level_difficulty_gteq_all][]', options_from_collection_for_select(LanguageLevel.all, 'difficulty', 'name') %>
</div>
<%= link_to '#', :class => "remove_fields" do %>
    <button class="btn btn-link btn-mini">
           <i class="icon-remove"></i> <%= t('general.remove') %>
    </button>
<% end %>
 </div> 
```

如果我使用上述部分的两个部分，它会生成以下 SQL：

`SELECT DISTINCT "members".* FROM "members" LEFT OUTER JOIN "language_skills" ON "language_skills"."member_id" = "members"."id" LEFT OUTER JOIN "language_levels" ON "language_levels"."id" = "language_skills"."language_level_id" WHERE ((("language_skills"."language_id" = 38 AND "language_skills"."language_id" = 59) AND ("language_levels"."difficulty" >= 5 AND "language_levels"."difficulty" >= 3)))`

我不确切知道我想要 ransack 生成的 SQL 是什么，但是如果我输入 [French, Proficient] 和 [English, advanced] 我希望它可以获取所有讲法语的成员精通（或更高）水平和高级（或更高）水平的英语。

# node.js - 在开发过程中如何查看/复制 Cakefile 中的文件？

> ID：13820236
> 
> 赞同：1
> 
> 时间：2012-12-11T12:15:54.363
> 
> 标签：node.js

目前我已经设置了一个`cake`任务来观察和编译 CoffeeScript、Jade、Stylus，比如：

```
task "startdev", "Starts server with nodemon and watch files for changes", ->
    # start nodemon server
    nodemon = spawn procExec("nodemon"), ["server.coffee"]
    processOutput nodemon

    # watch and compile CoffeeScript
    coffee = spawn procExec("coffee"), ["-o", "public/js/app", "-cw", "client/coffee"]
    processOutput coffee

    # watch and compile Stylus
    stylus = spawn procExec("stylus"), ["client/stylus/styles.styl", "-I", "public/css/","-l", "-w", "-u", "./node_modules/nib", "-o", "public/css/app"]
    processOutput stylus

    # watch and compile jade
    jade = spawn procExec("jade"), ["client/jade/index.jade", "--out", "public"]
    processOutput jade 
```

现在，我想监视文件夹中的文件更改并将其复制到另一个文件夹（又名同步文件夹，将文件从复制`src`到`public`）。我该怎么做？我认为如果解决方案不是特定于 Node/JS 的，我认为这很好，只要我不必下载一大堆和大量的设置来使其工作。

经过一番研究，也许我应该使用类似的构建[`jake`](https://github.com/mde/jake)？但是我如何使用它来同步 2 个文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T20:14:06.827

您可以使用 watch 来执行此操作：

```
watch = require 'watch'

task 'watch', 'watches for file and copy/compiles them', ->
  # watch file changes
  watch.watchTree 'src', (f, curr, prev) ->
    return if typeof f is "object" && prev is null && curr is null
    return if f.match(/\.(coffee)$/)
    dest = 'lib' + f[3..]
    if curr.nlink is 0
      fs.unlinkSync dest if fs.existsSync dest
      log "removed " + dest
    else 
      oldFile = fs.createReadStream f
      newFile = fs.createWriteStream dest
      oldFile.pipe newFile
      log "copied " + f + ' to ' + dest
  log 'Watching to copy files', green  
  # watch_coffee
  ... 
```

# wcf - 如何在 IIS 5.1 中托管 WCF 服务？

> ID：13820240
> 
> 赞同：0
> 
> 时间：2012-12-11T12:16:04.280
> 
> 标签：wcf, iis, deployment

我使用 VS2008 和 .NET 3.5。

这是我的情况：

1) 对外服务：

我使用外部服务（对其代码一无所知；对我来说它是黑匣子）并调用它的方法，该方法需要几个参数。其中之一是我应该写的 WCF 服务的地址（见 2））。调用如下所示：

```
string Url = "http://public-ip:8072/Service.svc";
string content = extClient.Method1(Url, email, param1, param2...); 
```

在 Method1 的某个地方，他们从 2) 调用我的服务。

2）我的服务：

```
public class Service : IService
{
    public const string ReplyAction = "http://public-ip:8072/Message_ReplyAction";
    public const string RequestAction = "http://public-ip:8072/Message_RequestAction";

    public Message SetData(Message requestXml)
    {
        // Do something
    }
} 
```

网络配置：

```
<system.serviceModel>
  <serviceHostingEnvironment>
    <baseAddressPrefixFilters>
      <add prefix="http://public-ip:8072/"/>
    </baseAddressPrefixFilters>
  </serviceHostingEnvironment>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Parus.ServiceBehavior">
        <serviceMetadata httpGetEnabled="true" httpGetUrl="http://local-ip:8072/Service.svc"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service behaviorConfiguration="Parus.ServiceBehavior" name="Parus.Service">
      <endpoint address="http://public-ip:8072/Service.svc" binding="basicHttpBinding" contract="Parus.IService">
      </endpoint>
      <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    </service>
  </services>
</system.serviceModel> 
```

当我在本地使用它时，我的服务可以工作，但当我将它暴露给世界时就不行。我的意思是 1) 中的 Method1 根本不调用它。我尝试了不同的事情，但到目前为止没有任何反应。防火墙关闭时它不起作用。此外，添加防火墙端口 8072 的例外时，它也不起作用。

我想我在 Web.config 文件中做错了什么或者错过了 IIS 中的一些设置。您可以关注 Web.config 文件中的 public-ip 和 local-ip 地址。也许我对他们犯了错误。我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:35:12.873

当服务在本地工作但不是通过公共 IP 地址工作时，通常是以下两种情况之一：

*   防火墙正在阻止该请求。在这里，我看到您写道您打开了端口。尝试用telnet测试一下，可能有好几层阻塞了端口，而你只打开了一层。
*   配置。您在 web.config 中混合使用公共和私有 IP 地址，尝试将所有内容设置为公共 IP 地址。

# java - 我们是否有 .NET “mustinherit”或“notinheritable”的 Java 通讯员？

> ID：13820243
> 
> 赞同：3
> 
> 时间：2012-12-11T12:16:08.813
> 
> 标签：java, oop

我们如何声明Java中的某个类必须被继承而不是直接从自身实例化，或者相反，如何强制它不被继承？在 .NET 中，我们可以使用“mustinherit”和“notinheritable”修饰符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:16:54.510

无法实例化的 java 类是抽象的

```
abstract class A { 
```

你不能继承的java类是final

```
final class A { 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T12:16:55.393

> 必须继承而不是直接从自身实例化

让它`abstract`。

> 或者相反，如何强制它不被继承？

让它`final`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:17:41.327

我不熟悉.NET，所以我可以根据我对名称的理解来回答。“mustinherit”`abstract`在java中的意思是“noninheritable”`final`在java中的意思

# iphone - 通过 ipad 应用程序从 iTunes 商店购买

> ID：13820244
> 
> 赞同：0
> 
> 时间：2012-12-11T12:16:32.030
> 
> 标签：iphone, ios, ipad, app-store, itunes

我想为我的用户提供一种在他使用精简版时购买我的应用程序的付费/完整版本的方法。我在主菜单上有一个按钮，单击该按钮时应提示用户输入密码并完成下载类似于从 ipad 中的 appstore 应用程序购买的应用程序。

我见过很少的应用程序这样做。有人可以建议如何实现。苹果是否提供任何框架来与iTunes商店通信

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:22:12.013

这些应用程序可能正在使用应用程序内购买来实现这一点。

他们所做的是在应用程序版本上创建，其中包含一个选项，可以通过购买应用程序内购买的完整版本来解锁应用程序中的一些限制。

Apple 有一些不错的文档：[In-App Purchase](https://developer.apple.com/appstore/in-app-purchase/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:32:43.363

您可以简单地使用[InAppPurchase](https://developer.apple.com/appstore/in-app-purchase/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:24:20.667

这就是你想要的：

```
SKStoreProductViewController 
```

这将带来一个模态视图控制器，允许您的用户在不离开精简版的情况下查看/购买您的应用程序。

这是您的链接：

[http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class](http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T12:23:57.557

Mugunth Kumar 的[MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)可以帮助简化应用程序内购买，如果他们正在使用它来执行此操作。

# java - 如何使用字节数组从 String.format 获取格式化的字符串？格式化字符串具体意味着什么？

> ID：13820246
> 
> 赞同：0
> 
> 时间：2012-12-11T12:16:36.867
> 
> 标签：java, bytearray, string-formatting

```
byte mac[] = ni.getHardwareAddress();
StringBuilder sb = new StringBuilder();

sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));    

String macAdd = new String(sb);
System.out.println(macAdd); 
```

它打印出我的接口的 MAC 地址，如下所示：

```
70-F1-A1-A1-DF-F5 
```

谁能解释一下步骤：

```
String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : "") 
```

*特别*是字符串是什么`%02X%s`意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:21:05.017

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

% 开始一个格式规范

0 表示左填充零

2 表示 2 位宽

X 表示十六进制输出

s 表示字符串

所以我们输出一个两位十六进制数字，后跟一个字符串。我知道 Formatter javadoc 有点密集，但这确实是它的用途。

# sql - sql查看条件

> ID：13820261
> 
> 赞同：0
> 
> 时间：2012-12-11T12:16:59.107
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我从 2 个表中获得了这个视图：

```
create view db1
as
SELECT
         p.pr_id
        ,p.PlotArea
        ,p.OwnershipTitle
        ,p.Price
        ,p.NotaryCosts
        ,p.AgentFee
        ,p.CtrNO
        ,isnull(p.Price,0)-isnull(a.Price,0) as Diferente
        ,isnull(p.Price,0)+isnull(p.NotaryCosts,0)+isnull(p.AgentFee,0) as TotalCosts

FROM nbProcuri p
      left JOIN nbAchizitii a
      ON p.PlotArea = a.PlotArea
where p.CtrNO=0 
```

在这两个表中，我都有一个名为 CtrNo 的列和一个名为 PlotArea 的列。

我希望视图在 p.PlotArea=a.PlotArea 和 p.CtrNo=a.CtrNo 时不显示记录，并显示所有其他情况。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:21:51.803

试试这个：

```
SELECT
         p.pr_id
        ,p.PlotArea
        ,p.OwnershipTitle
        ,p.Price
        ,p.NotaryCosts
        ,p.AgentFee
        ,p.CtrNO
        ,isnull(p.Price,0)-isnull(a.Price,0) as Diferente
        ,isnull(p.Price,0)+isnull(p.NotaryCosts,0)+isnull(p.AgentFee,0) as TotalCosts

FROM nbProcuri p
      left JOIN nbAchizitii a
      ON p.PlotArea = a.PlotArea and p.CtrNo=a.CtrNo
where a.CtrNO is null and a.PlotArea is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:25:20.483

```
 create view db1
 as
 SELECT
     p.pr_id
    ,p.PlotArea
    ,p.OwnershipTitle
    ,p.Price
    ,p.NotaryCosts
    ,p.AgentFee
    ,p.CtrNO
    ,isnull(p.Price,0)-isnull(a.Price,0) as Diferente
    ,isnull(p.Price,0)+isnull(p.NotaryCosts,0)+isnull(p.AgentFee,0) as TotalCosts

FROM nbProcuri p
  left JOIN nbAchizitii a
  ON p.PlotArea = a.PlotArea
  where p.PlotArea=a.PlotArea and p.CtrNo=a.CtrNo 
```

# android - 方向更改使 SensorManager 引用无效

> ID：13820265
> 
> 赞同：0
> 
> 时间：2012-12-11T12:17:14.400
> 
> 标签：android, android-sensors, android-location, sensormanager

我正在制作一个附加位置和传感器侦听器的应用程序，以便它可以将它们的更改记录到文件中。

奇怪的是，其中一部使用该应用程序的手机在某些情况下是强制关闭的，我将其缩小为方向变化：如果手机在录制过程中改变了方向，那么我在活动中存储为“mSensorManager”的 SensorManager 属性将是设置为空。

这引出了我的问题：我是否应该存储 SensorManager 参考，因为它是一个糟糕的设计选择？还是可以，我应该在使用之前检查引用是否为空？

**编辑**：要添加两件事：

1.  我发现不仅加速计和磁力计属性也被取消了（哪种有意义），而且位置管理器（没有太大变化，因为它与方向确定无关）；

2.  我是否应该将这些属性存储在活动以外的东西中，这不会在方向更改时使引用无效？

**它为我做了什么：** 更正要在活动生命周期内完成的侦听器、管理器和传感器实例化。然后唯一的问题是唤醒锁，它被破坏了，但我需要保持方向变化。我也将其更改为在活动生命周期中获取，尽管是在不同的阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:21:51.927

1.  在清单中的活动标记内添加此行后尝试

    ```
     android:configChanges="orientation|keyboardHidden" 
    ```

    我想这是无效的，因为`onCreate`该活动需要改变方向

2.  尝试使用[共享首选项保存值](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:12:41.083

**它为我做了什么：**更正要在活动生命周期内完成的侦听器、管理器和传感器实例化。然后唯一的问题是唤醒锁，它被破坏了，但我需要保持方向变化。我也将其更改为在活动生命周期中获取，尽管是在不同的阶段。

# ajax - 排序顺序图标。如何在一处修改 WebGrid 标头？

> ID：13820268
> 
> 赞同：3
> 
> 时间：2012-12-11T12:17:23.573
> 
> 标签：ajax, asp.net-mvc, sorting, header, webgrid

我应该向 Ajax WebGrid 添加排序顺序图标。以下方法有效：

```
grid.Column("Name", string.Format("Name {0}", grid.SortColumn == "Name" ? grid.SortDirection == SortDirection.Ascending ? "▼" : "▲" : "") 
```

但应该适用于每一列。

是否有任何其他方法可以将排序指标仅添加到一个位置的排序列？比如在grid.GetHtml()之后修改网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:10:08.280

您已经找到了使用 WebGrid API 的唯一方法。但是，您可以在事后使用 jQuery 应用排序箭头。您可以使用隐藏字段来存储`WebGrid.SortDirection`和`WebGrid.SortColumn`值。然后，您可以使用该`ajaxUpdateCallback`参数指定在异步更新网格后调用的函数，并在该方法中，根据隐藏字段值设置箭头：

```
function setArrows() {
    var dir = $('#dir').val(); //hidden field value
    var col = $('#col').val(); //hidden field value
    var header = $('th a[href*=' + col + ']');
    if (dir == 'Ascending') {
        header.text(header.text() + ' ▲');
    }
    if (dir == 'Descending') {
        header.text(header.text() + ' ▼');
    }
}; 
```

我刚刚[写了一篇](http://www.mikesdotnetting.com/Article/203/Enhancing-The-WebGrid-With-Sort-Arrows)关于这个的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T04:31:51.160

我发现这段代码很方便。您只需将其放在 grid.GetHtml 之后：

```
@{
   if(!string.IsNullOrWhiteSpace(grid.SortColumn))
   {
    <script type="text/javascript">
     $('thead > tr > th > a[href*="sort=@grid.SortColumn"]').parent().append('@(grid.SortDirection == SortDirection.Ascending ? "▲" : "▼")');
     </script>
   }
} 
```

[http://shahvaibhav.com/how-to-add-up-down-arrows-to-webgrid-header-in-razor-mvc-or-sort-indicator-in-webgrid-razor/](http://shahvaibhav.com/how-to-add-up-down-arrows-to-webgrid-header-in-razor-mvc-or-sort-indicator-in-webgrid-razor/)

# data-structures - 链表树

> ID：13820272
> 
> 赞同：1
> 
> 时间：2012-12-11T12:17:29.300
> 
> 标签：data-structures

我的问题是，这有正确的名称吗？（即它之前是否被发明过）？

配置为链表树的（文件效率高的）树结构，采用以下方式：![在此处输入图像描述](../Images/38f343563aff0957df6fd1d414aa952d.png)

可以看出，不是每个节点都必须记住子节点的“列表”，而是列出一个子节点，并使用链表链接到其他兄弟节点。这样，所有节点的空间需求都是恒定的 (2)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:28:32.687

这是将 k-ary 树表示为二叉树，称为[左子-右兄弟二叉树](http://en.wikipedia.org/wiki/Left_child-right_sibling_binary_tree)。

# url - 编码/解码 URL

> ID：13820280
> 
> 赞同：77
> 
> 时间：2012-12-11T12:17:45.740
> 
> 标签：url, escaping, go

在 Go 中编码和解码整个 URL 的推荐方法是什么？我知道方法`url.QueryEscape`和`url.QueryUnescape`，但它们似乎并不是我正在寻找的。具体来说，我正在寻找 JavaScript`encodeURIComponent`和`decodeURIComponent`.

谢谢。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-11T19:14:02.080

您可以使用[net/url](http://golang.org/pkg/net/url/)模块进行所有您想要的 URL 编码。它不会破坏 URL 各部分的单独编码功能，您必须让它构建整个 URL。仔细研究了源代码后，我认为它做得非常好并且符合标准。

这是一个例子（[操场链接](http://play.golang.org/p/kQQIx_4bsK)）

```
package main

import (
    "fmt"
    "net/url"
)

func main() {

    Url, err := url.Parse("http://www.example.com")
    if err != nil {
        panic("boom")
    }

    Url.Path += "/some/path/or/other_with_funny_characters?_or_not/"
    parameters := url.Values{}
    parameters.Add("hello", "42")
    parameters.Add("hello", "54")
    parameters.Add("vegetable", "potato")
    Url.RawQuery = parameters.Encode()

    fmt.Printf("Encoded URL is %q\n", Url.String())
} 
```

哪个打印

```
Encoded URL is "http://www.example.com/some/path/or/other_with_funny_characters%3F_or_not/?vegetable=potato&hello=42&hello=54" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-11T13:50:12.460

从[MDN 上 encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：

> encodeURIComponent 转义除以下字符以外的所有字符：字母、十进制数字、`'-', '_', '.', '!', '~', '*', ''', '(', ')'`

从[Go 的 url.QueryEscape 实现](http://golang.org/src/pkg/net/url/url.go?s=3938:3971#L66)（特别是`shouldEscape`私有函数），转义除以下字符之外的所有字符：字母、十进制数字、`'-', '_', '.', '~'`.

与 Javascript 不同，Go 的 QueryEscape()**将**escape `'!', '*', ''', '(', ')'`。基本上，Go 的版本严格符合 RFC-3986。Javascript 更宽松。再次来自 MDN：

> 如果希望更严格地遵守 RFC 3986（保留 !、'、(、) 和 *），即使这些字符没有正式的 URI 分隔用途，也可以安全地使用以下内容：

```
function fixedEncodeURIComponent (str) {
  return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A");
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-15T18:18:24.263

从 Go 1.8 开始，这种情况发生了变化。[`PathEscape`](https://golang.org/pkg/net/url/#PathEscape)除了旧[`QueryEscape`](https://golang.org/pkg/net/url/#QueryEscape)的编码路径组件之外，我们现在还可以访问unescape 对应组件[`PathUnescape`](https://golang.org/pkg/net/url/#PathUnescape)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-09T10:46:24.313

为了模仿 Javascript `encodeURIComponent()`，我创建了一个字符串辅助函数。

示例：`"My String"`转向`"My%20String"`

[https://github.com/mrap/stringutil/blob/master/urlencode.go](https://github.com/mrap/stringutil/blob/master/urlencode.go)

```
import "net/url"

// UrlEncoded encodes a string like Javascript's encodeURIComponent()
func UrlEncoded(str string) (string, error) {
    u, err := url.Parse(str)
    if err != nil {
        return "", err
    }
    return u.String(), nil
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-12T03:41:52.653

这个怎么样：

```
template.URLQueryEscaper(path) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-11T12:28:21.343

如果有人想获得与 JS encodeURIComponent 相比的确切结果，请尝试我的函数，它很脏但效果很好。

[https://gist.github.com/czyang/7ae30f4f625fee14cfc40c143e1b78bf](https://gist.github.com/czyang/7ae30f4f625fee14cfc40c143e1b78bf)

```
// #Warning! You Should Use this Code Carefully, and As Your Own Risk.
    package main

    import (
    "fmt"
    "net/url"
    "strings"
)
/*
After hours searching, I can't find any method can get the result exact as the JS encodeURIComponent function.
In my situation I need to write a sign method which need encode the user input exact same as the JS encodeURIComponent.
This function does solved my problem.
*/
func main() {
    params := url.Values{
        "test_string": {"+!+'( )*-._~0-  9a-zA-Z 中文测试 test with ❤️ !@#$%^&&*()~<>?/.,;'[][]:{{}|{}|"},
    }
    urlEncode := params.Encode()
    fmt.Println(urlEncode)
    urlEncode = compatibleRFC3986Encode(urlEncode)
    fmt.Println("RFC3986", urlEncode)
    urlEncode = compatibleJSEncodeURIComponent(urlEncode)
    fmt.Println("JS encodeURIComponent", urlEncode)
}

// Compatible with RFC 3986.
func compatibleRFC3986Encode(str string) string {
    resultStr := str
    resultStr = strings.Replace(resultStr, "+", "%20", -1)
    return resultStr
}

// This func mimic JS encodeURIComponent, JS is wild and not very strict.
func compatibleJSEncodeURIComponent(str string) string {
    resultStr := str
    resultStr = strings.Replace(resultStr, "+", "%20", -1)
    resultStr = strings.Replace(resultStr, "%21", "!", -1)
    resultStr = strings.Replace(resultStr, "%27", "'", -1)
    resultStr = strings.Replace(resultStr, "%28", "(", -1)
    resultStr = strings.Replace(resultStr, "%29", ")", -1)
    resultStr = strings.Replace(resultStr, "%2A", "*", -1)
    return resultStr
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-08-23T09:16:53.047

希望这可以帮助

```
 // url encoded
func UrlEncodedISO(str string) (string, error) {
    u, err := url.Parse(str)
    if err != nil {
        return "", err
    }
    q := u.Query()
    return q.Encode(), nil
} 
```

```
 * encoded into %2A
 # encoded into %23
 % encoded into %25
 < encoded into %3C
 > encoded into %3E
 + encoded into %2B
 enter key (#13#10) is encoded into %0D%0A 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-10-27T14:55:21.327

这是 escape 和 unescape 的实现（从 go 源中提取）：

```
package main

import (  
    "fmt"
    "strconv"
)

const (
    encodePath encoding = 1 + iota
    encodeHost
    encodeUserPassword
    encodeQueryComponent
    encodeFragment
)

type encoding int
type EscapeError string

func (e EscapeError) Error() string {
    return "invalid URL escape " + strconv.Quote(string(e))
}

func ishex(c byte) bool {
    switch {
    case '0' <= c && c <= '9':
        return true
    case 'a' <= c && c <= 'f':
        return true
    case 'A' <= c && c <= 'F':
        return true
    }
    return false
}

func unhex(c byte) byte {
    switch {
    case '0' <= c && c <= '9':
        return c - '0'
    case 'a' <= c && c <= 'f':
        return c - 'a' + 10
    case 'A' <= c && c <= 'F':
        return c - 'A' + 10
    }
    return 0
}

// Return true if the specified character should be escaped when
// appearing in a URL string, according to RFC 3986.
//
// Please be informed that for now shouldEscape does not check all
// reserved characters correctly. See golang.org/issue/5684.
func shouldEscape(c byte, mode encoding) bool {
    // §2.3 Unreserved characters (alphanum)
    if 'A' <= c && c <= 'Z' || 'a' <= c && c <= 'z' || '0' <= c && c <= '9' {
        return false
    }

    if mode == encodeHost {
        // §3.2.2 Host allows
        //  sub-delims = "!" / "$" / "&" / "'" / "(" / ")" / "*" / "+" / "," / ";" / "="
        // as part of reg-name.
        // We add : because we include :port as part of host.
        // We add [ ] because we include [ipv6]:port as part of host
        switch c {
        case '!', '$', '&', '\'', '(', ')', '*', '+', ',', ';', '=', ':', '[', ']':
            return false
        }
    }

    switch c {
    case '-', '_', '.', '~': // §2.3 Unreserved characters (mark)
        return false

    case '$', '&', '+', ',', '/', ':', ';', '=', '?', '@': // §2.2 Reserved characters (reserved)
        // Different sections of the URL allow a few of
        // the reserved characters to appear unescaped.
        switch mode {
        case encodePath: // §3.3
            // The RFC allows : @ & = + $ but saves / ; , for assigning
            // meaning to individual path segments. This package
            // only manipulates the path as a whole, so we allow those
            // last two as well. That leaves only ? to escape.
            return c == '?'

        case encodeUserPassword: // §3.2.1
            // The RFC allows ';', ':', '&', '=', '+', '$', and ',' in
            // userinfo, so we must escape only '@', '/', and '?'.
            // The parsing of userinfo treats ':' as special so we must escape
            // that too.
            return c == '@' || c == '/' || c == '?' || c == ':'

        case encodeQueryComponent: // §3.4
            // The RFC reserves (so we must escape) everything.
            return true

        case encodeFragment: // §4.1
            // The RFC text is silent but the grammar allows
            // everything, so escape nothing.
            return false
        }
    }

    // Everything else must be escaped.
    return true
}

func escape(s string, mode encoding) string {
    spaceCount, hexCount := 0, 0
    for i := 0; i < len(s); i++ {
        c := s[i]
        if shouldEscape(c, mode) {
            if c == ' ' && mode == encodeQueryComponent {
                spaceCount++
            } else {
                hexCount++
            }
        }
    }

    if spaceCount == 0 && hexCount == 0 {
        return s
    }

    t := make([]byte, len(s)+2*hexCount)
    j := 0
    for i := 0; i < len(s); i++ {
        switch c := s[i]; {
        case c == ' ' && mode == encodeQueryComponent:
            t[j] = '+'
            j++
        case shouldEscape(c, mode):
            t[j] = '%'
            t[j+1] = "0123456789ABCDEF"[c>>4]
            t[j+2] = "0123456789ABCDEF"[c&15]
            j += 3
        default:
            t[j] = s[i]
            j++
        }
    }
    return string(t)
}

// unescape unescapes a string; the mode specifies
// which section of the URL string is being unescaped.
func unescape(s string, mode encoding) (string, error) {
    // Count %, check that they're well-formed.
    n := 0
    hasPlus := false
    for i := 0; i < len(s); {
        switch s[i] {
        case '%':
            n++
            if i+2 >= len(s) || !ishex(s[i+1]) || !ishex(s[i+2]) {
                s = s[i:]
                if len(s) > 3 {
                    s = s[:3]
                }
                return "", EscapeError(s)
            }
            i += 3
        case '+':
            hasPlus = mode == encodeQueryComponent
            i++
        default:
            i++
        }
    }

    if n == 0 && !hasPlus {
        return s, nil
    }

    t := make([]byte, len(s)-2*n)
    j := 0
    for i := 0; i < len(s); {
        switch s[i] {
        case '%':
            t[j] = unhex(s[i+1])<<4 | unhex(s[i+2])
            j++
            i += 3
        case '+':
            if mode == encodeQueryComponent {
                t[j] = ' '
            } else {
                t[j] = '+'
            }
            j++
            i++
        default:
            t[j] = s[i]
            j++
            i++
        }
    }
    return string(t), nil
}

func EncodeUriComponent(rawString string) string{
    return escape(rawString, encodeFragment)
}

func DecodeUriCompontent(encoded string) (string, error){
    return unescape(encoded, encodeQueryComponent)
}

// https://golang.org/src/net/url/url.go
// http://remove-line-numbers.ruurtjan.com/
func main() {
    // http://www.url-encode-decode.com/
    origin := "äöüHel/lo world"
    encoded := EncodeUriComponent(origin)
    fmt.Println(encoded)

    s, _ := DecodeUriCompontent(encoded)
    fmt.Println(s)
} 
```

```
// -------------------------------------------------------

/*
func UrlEncoded(str string) (string, error) {
    u, err := url.Parse(str)
    if err != nil {
        return "", err
    }
    return u.String(), nil
}

// http://stackoverflow.com/questions/13820280/encode-decode-urls
// import "net/url"
func old_main() {
    a,err := UrlEncoded("hello world")
    if err != nil {
           fmt.Println(err)
    }
    fmt.Println(a)

    // https://gobyexample.com/url-parsing
    //s := "postgres://user:pass@host.com:5432/path?k=v#f"
    s := "postgres://user:pass@host.com:5432/path?k=vbla%23fooa#f"
    u, err := url.Parse(s)
    if err != nil {
        panic(err)
    }

    fmt.Println(u.RawQuery)
    fmt.Println(u.Fragment)
    fmt.Println(u.String())
    m, _ := url.ParseQuery(u.RawQuery)
    fmt.Println(m)
    fmt.Println(m["k"][0])

}
*/

// ------------------------------------------------------- 
```

# jquery - jQuery UI 对话框打开回调只执行一次，但我希望它在每次对话框打开时执行

> ID：13820282
> 
> 赞同：1
> 
> 时间：2012-12-11T12:17:52.950
> 
> 标签：jquery, jquery-ui, user-interface

jQuery UI 对话框打开回调只执行一次，但我希望它在每次对话框打开时执行..

```
$('<div><b><center>'+ text +'</center></b></div>').dialog({
  title: '<b>User(s) with a similar name</b>',
  modal: true,
  autoOpen: true,
  height: 'auto',
  width: 400,
  resizable: false,
  open: function(){
    $('#smartpaginate').smartpaginator({
      totalrecords: 3,
      recordsperpage: 2,
      datacontainer: 'all-tabs',
      dataelement: 'table',
      theme: 'green'
    });
  },
  buttons: {
    "Close": function(){
      $(this).dialog('close');
      return false;
    }
  }
}); 
```

打开的回调函数正确执行并生成分页，但关闭后，每次打开时都没有分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:10:20.417

尝试从 DOM 中删除对话框：

```
$('<div><b><center>'+ text +'</center></b></div>').dialog({
  title: '<b>User(s) with a similar name</b>',
  modal: true,
  autoOpen: true,
  height: 'auto',
  width: 400,
  resizable: false,
  open: function(){
    $('#smartpaginate').smartpaginator({
      totalrecords: 3,
      recordsperpage: 2,
      datacontainer: 'all-tabs',
      dataelement: 'table',
      theme: 'green'
    });
  },
  buttons: {
    "Close": function(){
$(this).remove();
      return false;
    }
  }
}); 
```

# c++ - iostream.h 在 GCC 中的位置

> ID：13820285
> 
> 赞同：8
> 
> 时间：2012-12-11T12:18:06.660
> 
> 标签：c++, gcc

近十年后，我回到了 C++ 世界。我已经安装了 GCC 并在我的 Windows 7 机器上编写了一个初步程序。我有以下问题：

当我说 时`#include <iostream.h>`，我收到一条错误消息，提示找不到文件。我不得不说`#include <iostream>`让它工作。此外，当我转到安装 GCC 的文件夹时，我找不到任何名称的听者文件。iostream 是从哪里挑选出来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:21:41.343

`<iostream>`是您需要包含的标准 C++ 标头。它在哪里取决于您的平台。在我的，它在

> /usr/include/c++/4.4.3/iostream

您可以通过以下方式了解`g++`配置的详细信息

> g++ --详细

这会打印出，除其他外，

> --with-gxx-include-dir=/usr/include/c++/4.4

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T12:22:50.667

标`.h`头（例如`iostream.h`）已被弃用，取而代之的是“现代”风格的标头（`iostream`）。这确保了实现不需要将标头作为物理位于磁盘上的文件提供。可以自由选择任何适当的实现。

例如，`<math.h>`要求实现提供具有此名称的文件，但如果您只指定`<cmath>`，则实现可以随意提供数学实用程序，而不需要物理文件。

此外，`.h`标头将其声明放在全局名称空间中，而“非.h”标头将其声明放在`std`名称空间中。因此，新标头不太可能导致任何命名冲突。

**编辑**正如[Basile Starynkevitch](https://stackoverflow.com/users/841108/basile-starynkevitch)在评论中指出的那样，这个概念不仅限于 C++，而且 C 标准也支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T12:21:18.270

C++中没有`iostream.h`标题，这些都是在标准之前的日子里。没有 C++ 标准库头文件以`.h`.

如果您的编译器安装是健全的，那么您永远不必将包含标准库头文件的目录添加到您的包含目录中——编译器已经知道最好的位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-21T12:49:19.493

在我的 Windows 盒子上，`iostream`（现在没有`.h`）位于`:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include`. （由于 Eclipse 错误，我正在搜索它并搜索了 Google 和我的 HD。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T12:21:58.143

实际上你可以在 GCC 的源代码中找到它：
`libstdc++-v3/include/std/iostream`
**Without** `.h` extension
Example for`GCC-4.7`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T12:23:49.513

使用 GCC 的`-H` [预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)让它显示每个包含的标题。

正如其他人告诉你的那样，标准 C++ 头文件不再以`.h`or结尾`.hh`

（我的建议是`.hh`用于您自己的 C++ 头文件和`.cc`C++ 源文件；我还建议使用 GCC 4.7 并针对[C++2011](http://en.wikipedia.org/wiki/C++11)标准进行编码，特别是使用`auto`初始化本地的“类型推断”关键字变量）

# css - firebug [对象 CSSStyleRule]

> ID：13820298
> 
> 赞同：2
> 
> 时间：2012-12-11T12:18:57.117
> 
> 标签：css, firefox, firebug

在 firebug 中（这开始发生在几天前，我不确定，但我认为它是在我更新 firefox 之后开始的），当我用 firebug 检查元素并尝试在右侧的样式视图中更改 css 属性时，我得到“[object CSSStyleRule] " 作为 css 属性的值。

当我单击 css 文件链接并打开整个 css 文件时，我可以更改属性值而无需使用这个烦人的大括号。

我正在使用 Firefox 17.0.1 和 firebug 1.11.0

最近有没有人遇到这个问题，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:05:36.933

这是 FireFile 和 Firebug 1.11 之间的已知冲突。我建议现在降级 Firebug。

# c# - 当前上下文错误c#中不存在名称'string'

> ID：13820306
> 
> 赞同：3
> 
> 时间：2012-12-11T12:19:31.293
> 
> 标签：c#

这是我目前遇到问题的代码：

```
 try

        {
            int realopid = Convert.ToInt16(operatorid);
        }
        catch (OverflowException)
        {
            //Create Message Box
            MessageBox.Show("Please Scan Valid Operator ID", "Operator ID");
            operatorid = Microsoft.VisualBasic.Interaction.InputBox("Scan Operator ID", "Operator ID");
        }

            string res = lookupName( realopid ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:21:12.507

您正在定义`realopid`try 块的内部。它只在那里可见。你应该在外面定义它。

```
int realopid = 0;
try
{
   realopid = Convert.ToInt16(operatorid);
}
catch (OverflowException)
{
    //Create Message Box
    MessageBox.Show("Please Scan Valid Operator ID", "Operator ID");
    operatorid = Microsoft.VisualBasic.Interaction.InputBox("Scan Operator ID", "Operator ID");
 }
string res = lookupName(realopid); 
```

# java - Rotate 3D object with Direction and Axis

> ID：13820312
> 
> 赞同：1
> 
> 时间：2012-12-11T12:19:55.203
> 
> 标签：java, matrix, 3d, rotation, java-3d

I am working on showing a 3D model (IFC) in Java3D. I need to rotate the object with 2 vectors, a direction vector and a axis vector that are given by the IFC model.

But I can't figure out how to get the right angle.

Code:

```
// Create vectors
Vector3f directionVector = new Vector3f(dx, dy, dz);
Vector3f axisVector = new Vector3f(ax, ay, az);

//Calculate angle
float angle = axisVector.angle(directionVector);

//create AxisAngle4f
AxisAngle4f axisAngle = new AxisAngle4f(axisVector, angle); 
```

The axisVector is always (0.0, 0.0, 1.0), so it needs to be rotated on the Z-axis

But when I calculate the angle it seems always 1.5707964 (90°):

```
Example 1:
dir:    (-1.0, 0.0, 0.0)
axis:   (0.0, 0.0, 1.0)
angle:  1.5707964 (90.00000250447816)
AA:     (0.0, 0.0, 1.0, 1.5707964)

Example 2:
dir:    (0.0, 1.0, 0.0)
axis:   (0.0, 0.0, 1.0)
angle:  1.5707964 (90.00000250447816)
AA:     (0.0, 0.0, 1.0, 1.5707964)

Example 3:
dir:    (1.0, 0.0, 0.0)
axis:   (0.0, 0.0, 1.0)
angle:  1.5707964 (90.00000250447816)
AA:     (0.0, 0.0, 1.0, 1.5707964) 
```

I know through testing that -1.0 means inverted so 180°.

Can some one help me understanding what I am doing wrong?

**Edit**

[Documentation](http://www.buildingsmart-tech.org/ifc/IFC2x4/beta1/html/ifcgeometryresource/lexical/ifcaxis2placement3d.ht) for the placement object (Direction and axis)

Screenshots of the results:

*   Orange: are the floors
*   Green: is the roof
*   Red: is de rotation point
*   Left: Side perspective
*   Right: Top perspective
*   The group of 3 slabs have direction direction (0.0, 1.0, 0.0)
*   The group of 2 slabs have direction direction (1.0, 0.0, 0.0)
*   Roof has direction: (-1.0, 0.0, 0.0)

I did the *2 test to simulate the 180° of -1.0\. as you can see in the last example the roof is correctly drawn.

![enter image description here](../Images/efe05bb61b73d777222d1f484451396c.png)

![enter image description here](../Images/ae1d865d5aca991180b8fae6ac9687c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:22:42.410

You don't need the angle between the direction vector and the axis vector. Since your axis vector is always (0.0, 0.0, 1.0), you can define a constant vector of (1.0, 0.0, 0.0) to which you can compare the direction vector, i.e.:

```
// Create vectors
Vector3f directionVector = new Vector3f(dx, dy, dz);
Vector3f axisVector = new Vector3f(ax, ay, az);
Vector3f constantBaseVector = new Vector3f(1, 0, 0);

//Calculate angle
float angle = constantBaseVector.angle(directionVector);

//create AxisAngle4f
AxisAngle4f axisAngle = new AxisAngle4f(axisVector, angle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-10T19:53:53.720

The angle between each axis should be 90°, and calculating the angle between any two vectors will only give values in the range 0° - 180°, rather than the 360° you need.

Also, if the zAxis is not (0, 0, 1), then you would need to calculate a rotation axis as well as the angle.

Instead, you can create a rotation matrix from the 3 axis directions, and create a transform object from that. The y-axis is the cross-product of the x and z axes:

```
// Given xAxis and zAxis.
Vector3f xAxis = new Vector3f(1, 0, 0);
Vector3f zAxis = new Vector3f(0, 0, 1);

// Create yAxis.
Vector3f yAxis = new Vector3f();
yAxis.cross(zAxis, xAxis);

// Create rotation matrix from axes.
Matrix4f rotationMatrix = new Matrix4f();
rotationMatrix.setRow(0, new Vector4f(xAxis));
rotationMatrix.setRow(1, new Vector4f(yAxis));
rotationMatrix.setRow(2, new Vector4f(zAxis));
rotationMatrix.setRow(3, new Vector4f(0, 0, 0, 1));

// Create transform.
Transform3D transform = new Transform3D(rotationMatrix);

// Transform points.
Vector3f vector = new Vector3f(0, 1, 0);
transform.transform(vector);
System.out.println(vector); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:27:08.333

I'm guessing that `axisVector.angle(directionVector)` returns the angle between the two vectors.

In all three of your examples you're comparing unit vectors on the base axes with the unit vector of the z-axis, which are perpendicular to each other by definition. What are you expecting to get?

To me the angle between -x and z is 90°, the angle between y and z is 90° and the angle between x and z is 90°. So all the data is correct, what are you expecting to get?

EDIT:

Example one: angle between (-1, 0, 0) and (0, 0, 1) = 90° Example two: angle between (0, 1, 0) and (0, 0, 1) = 90° Example three: angle between (1, 0, 0) and (0, 0, 1) = 90°

Please draw these vectors in a cartesian coordinate system and it should be clear. Also, please note that the *angle* between two vectors is the smallest angle on the plane that these two vectors define.

# mysql - MySQL和Neo4J中friend-of-friend-of-friend-of...关系的比较

> ID：13820313
> 
> 赞同：0
> 
> 时间：2012-12-11T12:19:57.627
> 
> 标签：mysql, graph, neo4j, gremlin

为了了解使用 Neo4J 建立朋友关系的优势，我在 MySQL 数据库上创建了一张用于 Persons 的表（“Persons”，20900 个数据集）：

```
id     | name
--------------
 1     | Peter
 2     | Max
 3     | Sam
 ...   | ...
 20900 | Rudi 
```

和一张关系表（“友谊”，每个人有 50 到 100 个朋友）：

```
personen_id_1 | personen_id_2
-------------------------
 1         | 2
 1         | 3
 2         | 56
 ...       | ...
 20900     | 201 
```

因此，大约有 120 万个关系。

现在我想现在 id=1 的人的朋友的朋友朋友的朋友，所以我制作了这样的查询：

```
select distinct P.name
from Friendships f
join Friendships f2 ON f.personen_id_2 = f2.personen_id_1
join Friendships f3 ON f2.personen_id_2 = f3.personen_id_1
join Friendships f4 ON f3.personen_id_2 = f4.personen_id_1
join Persons P ON f4.personen_id_2 = P.id
where f.personen_id_1 = 1 
```

用户 ID 1 的查询花费了大约 30 秒

在 Neo4J 中，我为每个人创建了一个具有一个名称属性的节点（20900 个节点）。所有节点都连接到 MySQL 中的 Friendships 表，因此有 120 万个关系。

为了在此处获得相同的 friedset，我输入了 gremlin：

```
gremlin> g.v(1).outE.inV.loop(2){ it.loops <= 4 }.name.dedup.map() 
```

这花了大约 1 分钟。我根本没想到会这样！

那么我的比较正确吗？如果是，如何修改此示例以显示使用 neo4j 执行此任务的优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:19:35.757

如果您知道您正在执行 4 个循环，请执行以下操作：

```
g.v(1).out.out.out.out.name.dedup.map 
```

Gremlin 中有一个已知的语义错误，其中 loop() 将变成广度优先查询。 [https://github.com/tinkerpop/pipes/issues/25](https://github.com/tinkerpop/pipes/issues/25)

此外，如果不需要，请不要执行 outE.inV。等价的已经出来了。此外，请意识到您正在执行 4 步搜索，即大规模计算（组合爆炸）。这是图数据库不擅长的。为此，您将需要查看像 Faunus 这样的批处理分析框架 - [http://thinkaurelius.github.com/faunus/](http://thinkaurelius.github.com/faunus/)。原因请参见[http://thinkaurelius.com/2012/04/21/loopy-lattices/](http://thinkaurelius.com/2012/04/21/loopy-lattices/)

图形数据库针对本地遍历进行了优化，通过 4 个步骤，您（很可能）触及了整个数据集并使用“get get get”样式的数据库访问，这效率不高。

HTH，马尔科。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:23:23.887

我对 Gremlin 不太熟悉，但我生成了一个类似大小的数据集（下面的统计数据）并在 Cypher 中运行了一个等效的查询：

```
START person=node:user(name={name})
MATCH person-[:FRIEND]-()-[:FRIEND]-()-[:FRIEND]-()-[:FRIEND]-friend
RETURN friend.name AS name 
```

我对数据集运行了 1000 次，每次都选择不同的用户作为起点。在运行测试之前我没有预热缓存，所以这是从一开始的。平均响应时间：33 毫秒。

在 MacBook Pro、2.2 GHz Intel Core i7、8 GB RAM、4 GB 堆上运行

以下是图表统计数据：

```
+----------------------------------------------+
| user           | 20900                       |
+----------------------------------------------+
|                | Average |    High |     Low |
+----------------------------------------------+
| FRIEND                                       |
+----------------------------------------------+
|       OUTGOING |      74 |     100 |      48 |
|       incoming |      74 |     123 |      31 |
+----------------------------------------------+

+----------------------------------------------+
| _UNKNOWN       | 1                           |
+----------------------------------------------+
|                | Average |    High |     Low |
+----------------------------------------------+

+----------------------------------------------+
| Totals                                       |
+----------------------------------------------+
| Nodes          | 20901                       |
| Relationships  | 1565787                     |
+----------------------------------------------+
| FRIEND         | 1565787                     |
+----------------------------------------------+ 
```

# iphone - 如何使用 NSMutableArray 中的列名列表在 sqlite3 中创建表

> ID：13820314
> 
> 赞同：3
> 
> 时间：2012-12-11T12:19:56.417
> 
> 标签：iphone, objective-c, ios, sqlite, sdk

我需要动态创建一个带有列的 sqlite3 表，实际上是存储在 NSMutableArry 中的列名，我想从 NSMutableArrya 值创建一个表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:26:45.463

尝试这个 ：

```
- (void)viewDidLoad
  {
    NSString *idField = @"ID INTEGER PRIMARY KEY AUTOINCREMENT";
    NSString *nameField = @"NAME TEXT";
    NSString *ageField = @"AGE INTEGER";

   // Make the field array using different attributes in different cases
   NSArray *fieldArray = [NSArray arrayWithObjects:idField,nameField,ageField, nil];

     [self createTable:fieldArray];

   }

- (void)createTable:(NSArray *)fieldArray
  {
    // Put all the code for create table and just change the query as given below
    NSString *queryString = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS CONTACTS (%@)",[fieldArray componentsJoinedByString:@","]];
const char *sql_stmt = [queryString UTF8String];
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:23:46.087

您可以这样做，只需以正确的方式解析数组的数据

```
-(BOOL)createNewTable
{
    NSArray *array=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath=[array objectAtIndex:0];

filePath =[filePath stringByAppendingPathComponent:@"yourdatabase.db"];

NSFileManager *manager=[NSFileManager defaultManager];

BOOL success = NO;
if ([manager fileExistsAtPath:filePath]) 
{
    success =YES;
}
if (!success) 
{
    NSString *path2=[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"yourdatabase.db"];
    success =[manager copyItemAtPath:path2 toPath:filePath error:nil];
}
createStmt = nil;
NSString *tableName=@"SecondTable";
if (sqlite3_open([filePath UTF8String], &database) == SQLITE_OK) {
    if (createStmt == nil) {

        NSString *query=[NSString stringWithFormat:@"create table %@(rollNo integer, name text)",tableName];

        if (sqlite3_prepare_v2(database, [query UTF8String], -1, &createStmt, NULL) != SQLITE_OK) {
            return NO;
        }
        sqlite3_exec(database, [query UTF8String], NULL, NULL, NULL);
        return YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:26:01.000

要动态创建表，请使用 create 查询，例如：

```
NSString *query=[NSString stringWithFormat:@"create table '%@'('%@' integer, '%@' text)",yourTableName,[yourArray objectAtIndex:0],[yourArray objectAtIndex:1]]; 
```

# java - ConcurrentlinkedQueue 类型不是通用的；它不能用参数参数化

> ID：13820316
> 
> 赞同：0
> 
> 时间：2012-12-11T12:20:03.673
> 
> 标签：java, collections, queue

你能解释一下为什么我得到标题中提到的 2 个错误，当我尝试实例化 ConcurrentlinkedQueue 对象时，在 Java SE 文档中，ConcurrentlinkedQueue 实现了 Queue 并且可以被泛化，因为我想我可以写：

```
 Queue<Integer>  myConcurrentLinkedQueue  = new ConcurrentlinkedQueue<Integer>(); 
```

期待您的来信，谢谢。

更新：我已经导入 java.util.*;

最后更新：这是我的错误，因为我创建了一个名为“ConcurrentLinkedList”的类，感到很尴尬，对不起，我把时间放在我的琐碎问题上，谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:23:09.447

您可能正在使用不同包中的 Queue ，`javax.jms.Queue;`这可能会给您当前的错误。

```
 java.util.Queue<Integer>  myConcurrentLinkedQueue  = new ConcurrentLinkedQueue<Integer>(); 
```

应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:26:43.003

很可能您正在使用这些类中的一个或两个的另一种实现（`java.util.Queue`例如，除了 之外的其他类），或者您正在构建一个非常旧的 JDK 版本，其中集合不是通用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:35:47.783

检查您是否真的在使用`java.util.concurrent`，例如[backport-util-concurrent](http://backport-jsr166.sourceforge.net/) ( `edu.emory.mathcs.backport.java.util.concurrent`)。后者与 Java 1.4 兼容并且不使用泛型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:38:17.510

我创建了一个名为 ConcurrentLinkedList 的类，不便之处敬请见谅。

# javascript - 未捕获的异常：无法在初始化之前调用选项卡上的方法

> ID：13820319
> 
> 赞同：7
> 
> 时间：2012-12-11T12:20:05.163
> 
> 标签：javascript, jquery

我正在使用以下代码在单击时更改选项卡颜色

```
 $("ul.tabs").tabs("> .pane"); 
```

但它正在抛出错误

```
uncaught exception: cannot call methods on tabs prior to initialization; attempted to call method '> .pane' 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-19T07:23:45.153

正如例外所说，它非常简单。您的选项卡必须先初始化，然后才能处理它们。所以初始化它们。

```
function(){
$("ul.tabs").tabs();
} 
```

或简单地使用

```
$("ul.tabs").tabs().tabs($("div.panes > div"), action); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:26:34.983

我不知道您希望使用此代码得到什么，但这是错误的。您不应该将选择器作为`.tabs()`方法的属性传递。查看[jQuery UI Tabs API](http://api.jqueryui.com/tabs/)了解如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:41:50.547

您的初始化无效。参数部分试图调用 tabs 命名空间中的方法，该`("> .pane")`方法肯定不存在。

您还可以在包含列表 (ul) 的 div 上初始化 tabs 方法，而不是 ul 本身。

假设 html 结构：

```
<div id="tabs">
  <ul>
    // the list items
  </ul>
    // tab content divs (all with class="pane")
</div> 
```

像这样的东西：

```
$('#tabs').tabs();
$('#tabs li').bind('click', function() {
   // change bg color to 'teal' of all divs with class name '.pane' inside #tabs div
   $('#tabs').find('.pane').css('background-color', 'teal');
}); 
```

[在jqueryui.com/tabs](http://jqueryui.com/tabs/)上阅读更多信息

# qt - 基本 Qt tcp-server 应用程序仅显示选定的客户端消息

> ID：13820328
> 
> 赞同：0
> 
> 时间：2012-12-11T12:20:57.417
> 
> 标签：qt, tcp, tcpclient, tcplistener

我正在用 qt 开发一个简单的 tcp 服务器。没有问题。但问题是，我已经在列表框中列出了每个连接的客户端，我只想从列表框中查看来自所选客户端的传入数据，但我只能看到最后连接的客户端的消息。这是代码，这是构造函数部分

```
server = new QTcpServer();
    client = new QTcpSocket();
    connect(server, SIGNAL(newConnection()),this, SLOT(acceptConnection()));
    server->listen(QHostAddress::Any, ui->txtPort->text().toInt(bool(),10));
    if(server->isListening())
    {
        ui->statusBar->showMessage("Server Started..");
    }
    else
    {
        ui->statusBar->showMessage("Server Not Started..");
    }

    connect(client,SIGNAL(disconnected()),this,SLOT(client_disconnected()));

    connect(ui->listWidget,SIGNAL(clicked(QModelIndex)),this,SLOT(selected_client())); 
```

这是 acceptConnection() 部分

```
client = server->nextPendingConnection();

    ui->listWidget->insertItem(client_count,client->peerAddress().toString());
    client_count++; 
```

这是 listWidget 项目的选定项目事件

```
ui->txtRead->clear();
    selected_client_index = ui->listWidget->currentIndex().row();
    connect(client, SIGNAL(readyRead()),this, SLOT(startRead())); 
```

最后是 startRead() 部分

```
 char buffer[1024] = {0};
   client->read(buffer, client->bytesAvailable());
   qDebug() << buffer;
   ui->txtRead->insertPlainText(buffer); 
```

如何选择特定客户端并显示其消息？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:38:37.597

你不应该使用`client`in `startRead`，而是一些你在SLOT`selectedClient`中记住的。 至于现在，当您使用 时，您将失去任何以前的客户。您应该将它们保存到一些.`selected_client()`
`client = server->nextPendingConnection()``QList<QTcpSocket*>`

# php - 特定 url 的控制器结构

> ID：13820333
> 
> 赞同：0
> 
> 时间：2012-12-11T12:21:09.913
> 
> 标签：php

我想知道如何编写 index.php/controller 以便能够使用 domain.com/imageid 之类的 url 显示图像。现在我正在使用例如 domain.com/?image=imageid 显示图像并使用 $_GET 超全局数组收集它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:26:50.927

只需使用 apache 的 rewrite_mod 即可。

在您的根目录中，创建一个名为的文件并将`.htaccess`其写入其中：

```
RewriteEngine On
RewriteRule ^(.+)$ index.php?image=$1 
```

# java - GUI变得不整洁

> ID：13820354
> 
> 赞同：2
> 
> 时间：2012-12-11T12:21:57.733
> 
> 标签：java, swing, user-interface

这是我第一次来这里。
我正在编写一个 GUI 驱动的程序，它允许我对`.txt`文件执行凯撒密码。
但是，在添加`ActionListener`s 和`ChangeListener`s 之前，我决定测试 GUI。这是我得到的： ![在此处输入图像描述](../Images/bb50e1f793d70826578f293507ff20ff.png)

**这是代码：**

```
package implementation;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
public class Frame extends JFrame{
    public Frame(){
        super("Caesar[E]");
        this.setVisible(true);
        this.setLocationRelativeTo(null);
        /*Adding the options to GUI*/
        factor.setPreferredSize(new Dimension(30,30));
        JToolBar toolbar = new JToolBar();
        radio.add(encrypt);
        radio.add(decrypt);
        toolbar.add(encrypt);
        toolbar.add(decrypt);
        toolbar.add(factor);
        toolbar.setFloatable(false);

        /*Adding the JTextArea for input*/
        Box inputBound = Box.createHorizontalBox();
        Box inputBound_text = Box.createVerticalBox();
        Box inputBound_buttons = Box.createVerticalBox();
        inputScroll.add(input);
        inputScroll.setEnabled(true);
        input.setEditable(true);
        inputScroll.setBorder(BorderFactory.createTitledBorder("Text/File for Encryption/" +
                "Decryption"));
        inputBound_text.add(inputScroll);
        inputBound_buttons.add(openFile);
        inputBound_buttons.add(cancelFileInput);
        inputBound.add(inputBound_text);
        inputBound.add(Box.createHorizontalStrut(25));
        inputBound.add(inputBound_buttons);

        /*Adding JTextArea for output*/
        Box outputBound = Box.createHorizontalBox();
        Box outputBound_text = Box.createVerticalBox();
        Box outputBound_buttons = Box.createVerticalBox();
        outputScroll.add(output);
        output.setEditable(true);
        outputScroll.setBorder(BorderFactory.createTitledBorder("Text After Encryption" +
                "/Decryption"));
        outputBound_text.add(outputScroll);
        outputBound_buttons.add(saveFile);
        outputBound_buttons.add(send);
        outputBound.add(outputBound_text);
        outputBound.add(Box.createHorizontalStrut(25));
        outputBound.add(outputBound_buttons);
        outputBound.setSize(150, 200);

        /*Adding JButton for performing the action*/
        this.add(performAction,BorderLayout.SOUTH);

        /*Adding the components to the Frame*/
        Box outerBox = Box.createVerticalBox();
        outerBox.add(toolbar,BorderLayout.NORTH);
        outerBox.add(inputBound);
        outerBox.add(outputBound);
        this.add(outerBox);
        this.setSize(500, 700);
    }
    boolean isFileInput = false;
    boolean isEncrypt = true;
    JButton performAction = new JButton("Encrypt!");
    JButton openFile = new JButton("Open a File");
    JButton cancelFileInput = new JButton("Cancel File Input");
    JButton saveFile = new JButton("Save File");
    JButton send = new JButton("Send");
    JTextArea input = new JTextArea();
    JTextArea output = new JTextArea();
    JFileChooser chooser = new JFileChooser();
    JScrollPane inputScroll = new JScrollPane();
    JScrollPane outputScroll = new JScrollPane();
    ButtonGroup radio = new ButtonGroup();
    JRadioButton encrypt = new JRadioButton("Encrypt",true);
    JRadioButton decrypt = new JRadioButton("Decrypt",false);
    JSpinner factor = new JSpinner(new SpinnerNumberModel(1,1,26,1));

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run(){
                new Frame();
            }
        });
    }
} 
```

你能告诉我如何解决如图所示的问题吗？

*   我知道我可以使用`setPreferredSize()`，但如何确保我输入正确的尺寸而无需反复试验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:41:10.970

我喜欢 SpringLayout，它非常灵活，而且没有什么不能做的。特别是您将不再需要关心 setPreferredSize。随便找找，资源够用的。

SpringLayout 允许您定义元素相对于其他元素的大小 - 例如，您可以确保按钮看起来相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:51:16.083

我会推荐[MiGLayout](http://miglayout.com/ "MiGlayout")作为 LayoutManager。类似的事情在 MiGLayout 中很容易

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:30:19.993

*反复试验**绝不*是获得所需布局的好方法。相反，请使用`JTextArea`可让您说出所需行数和列数的构造函数。

```
JTextArea(int rows, int columns) 
```

`JTextArea`当您打开窗口时，将计算一个好的首选尺寸`pack()`，而您不需要`setSize()`.

编辑：您说，“`JTextArea`处于非活动状态。我无法在其中输入文本。”

而不是`add()`，使用`setViewportView()`：

```
inputScroll.setViewportView(input);
...
outputScroll.setViewportView(output);
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:03:56.467

在这种情况下，我喜欢将我的应用程序划分为职责范围。这使代码保持干净和独立，允许我在需要时替换其中的部分，而不会对应用程序的其余部分产生不利影响。

这也意味着您可以专注于每个部分的个别要求。

对于复杂的布局，使用具有单独布局管理器的复合容器总是更好（恕我直言），它降低了复杂性和奇怪交叉行为的可能性。

![在此处输入图像描述](../Images/3e9fe66830c50ceeb29afdc62510afbb.png)

```
public class BadLayout07 {

    public static void main(String[] args) {
        new BadLayout07();
    }

    public BadLayout07() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MasterPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MasterPane extends JPanel {

        public MasterPane() {
            EncryptSettings encryptSettings = new EncryptSettings();
            InputPane inputPane = new InputPane();
            OutputPane outputPane = new OutputPane();

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(encryptSettings, gbc);

            gbc.gridy++;
            gbc.weighty = 1;
            gbc.fill = gbc.BOTH;
            add(inputPane, gbc);

            gbc.gridy++;
            add(outputPane, gbc);
        }

    }

    public class EncryptSettings extends JPanel {

        private JRadioButton encrypt;
        private JRadioButton decrypt;
        private JSpinner factor;

        public EncryptSettings() {
            encrypt = new JRadioButton("Encrypt");
            decrypt = new JRadioButton("Decrypt");
            ButtonGroup bg = new ButtonGroup();
            bg.add(encrypt);
            bg.add(decrypt);

            factor = new JSpinner(new SpinnerNumberModel(new Integer(1), new Integer(1), null, new Integer(1)));

            setLayout(new FlowLayout(FlowLayout.LEFT));
            add(encrypt);
            add(decrypt);
            add(factor);
        }

    }

    public class InputPane extends JPanel {

        private JTextArea input;
        private JButton open;
        private JButton close;

        public InputPane() {
            setBorder(new TitledBorder("Source Text"));
            input = new JTextArea();
            open = new JButton("Open");
            close = new JButton("Close");

            JPanel tb = new JPanel(new FlowLayout(FlowLayout.LEFT));
            tb.add(open);
            tb.add(close);

            setLayout(new BorderLayout());
            add(tb, BorderLayout.NORTH);
            add(new JScrollPane(input));
        }

    }

    public class OutputPane extends JPanel {

        private JTextArea output;
        private JButton save;
        private JButton send;

        public OutputPane() {
            setBorder(new TitledBorder("Encrypted Text"));
            output = new JTextArea();
            output.setEditable(false);
            save = new JButton("Save");
            send = new JButton("Send");

            JPanel tb = new JPanel(new FlowLayout(FlowLayout.LEFT));
            tb.add(save);
            tb.add(send);

            setLayout(new BorderLayout());
            add(tb, BorderLayout.NORTH);
            add(new JScrollPane(output));
        }

    }

} 
```

我没有互连任何功能，但这是一个简单的案例，即根据需要提供适当的 setter 和 getter，以及适当的事件侦听器。

# jenkins - 使用 Jenkins 的 Testlink 插件

> ID：13820356
> 
> 赞同：0
> 
> 时间：2012-12-11T12:22:00.027
> 
> 标签：jenkins, testng, jenkins-plugins

嗨，我正在尝试在 jenkins 中实现 testlink 插件。

我按照本教程[http://tupilabs.com/books/jenkins-testlink-plugin-tutorial/en/book.pdf](http://tupilabs.com/books/jenkins-testlink-plugin-tutorial/en/book.pdf)

我可以构建项目，但没有运行测试。有一个文件未找到错误我不明白我必须把我的测试文件放在哪里。我想输出格式必须是TestNG，但我必须把它放在哪里？

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:10:53.730

当我按照 Jenkins:The Definitive Guide 一书中的教程进行操作时，我在构建项目时遇到了完全相同的问题。我将 Jenkis (jenkins-1.502.msi) 作为服务安装在 Windows7 64 上 - 无论我尝试过什么，都会收到：

```
[workspace] $ mvn.bat
The system cannot find the file specified
FATAL: command execution failed
java.io.IOException: Cannot run program "mvn.bat" (in directory "C:\Work\jenkins\jobs\gameoflifedefault\workspace"): CreateProcess error=2, The system cannot find the file specified 
```

不幸的是，我没有设法解决这个 jenkis 服务问题，但找到了另一个解决方案让它在 Windows 上工作：使用 Apache Tomcat java 服务器 - 如果你已经正确配置了 Tomcat，请执行以下操作：

1.  下载 jenkins.war
2.  将它放在 Tomcat 目录中的 webapps 文件夹中
3.  运行 Tomcat 并通过`http://localhost:8080/manager`jenkins 检查是否存在
4.  去`http://localhost:8080/jenkins`

现在可以看到 mvn.bat 并且我的构建运行没有问题。

当然，我知道 Maven 在您的系统上已正确配置-因此您应该在环境变量中指定：

*   变量：M2
    值：%M2_HOME%\bin
*   变量：M2_HOME
    值：C:\yourPathToMaven\apache-maven-3.0.4
*   变量：PATH
    添加到现有值：%M2_HOME%；

要检查 maven 是否可见，请在命令提示符中键入：

```
C:\Users\x>mvn --version 
```

你应该得到类似的东西：

```
 Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100)
    Maven home: C:\Work\Maven\apache-maven-3.0.4
    Java version: 1.7.0, vendor: Oracle Corporation
    Java home: C:\Work\ja\jdk1.7.0_10\jre
    Default locale: en_US, platform encoding: Cp1250
    OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows" 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:38:07.040

更新：我发现错误是：Cannot run program mvn.bat in directory d:/jenkins/jobs/JobTest/workspace CreateProcess error=2 File not found。

如教程中所述，我制作了一个自由风格的项目。这似乎是一个maven错误，所以我不明白......

如果有人可以帮助我，我将不胜感激

# php - 阿拉伯语网站搜索无法在线工作

> ID：13820362
> 
> 赞同：1
> 
> 时间：2012-12-11T12:22:17.567
> 
> 标签：php, post, arabic

我创建了一个简单的站点搜索，并且正在使用以下代码

```
 <form  id="search" name="form1" method="post" accept-charset="utf-8" />
 <input id="sitesearch" name="sitesearch" type="text" value="<?php echo $search; ?>" />
 <input name="search" id="search" type="submit" />
 </form> 
```

在我的本地服务器上它工作正常，我可以在我的在线服务器上的 url 栏 search.php?sp=العلامة%20البيضاء 上看到 search?sp=%25D8%25A8%25D8%25B1%25D9%2586%25D8%。 .. 在网上，奇怪的是我在 IE9 上得到了正确的结果，但在 Chrome 和 Firefox 上却没有

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:26:42.220

问题是因为编码。它没有转换为`utf8`.

用于`utf8_encode`对文本进行编码和`utf8_decode`解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:32:09.690

在服务器上的 php.ini 中

寻找 `; http://php.net/default-charset`

替换为

```
; http://php.net/default-charset
default_charset = "utf-8" 
```

* * *

直接添加到您的文件中

```
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head> 
```

* * *

## 并且您的文件另存为使用 utf-8 编码

使用 safari 或 chrome 将浏览器更改为正确 100% متأكد

# javascript - IE7 + JavaScript appendChild = 滚动条错误

> ID：13820371
> 
> 赞同：1
> 
> 时间：2012-12-11T12:23:02.980
> 
> 标签：javascript, html, css, internet-explorer-7

我正在修改 StackOverflow 上的一个示例，用于替换 IE7 上不支持一些不错的 CSS 布局的“选择”组件。该示例缺少滚动条，因此我添加了一个固定大小的 div，这样滚动条就会出现并且组件几乎完整。

我的问题：

1 - 在 IE7（IE9 兼容模式）上不显示滚动条。有什么解决办法吗？

2 - 如何将“div”定位在该位置但保持在其他组件的前面，而不是占据其全尺寸？

我在 jsfiddle 上的代码/html：

[http://jsfiddle.net/mbarni/nTYWA/](http://jsfiddle.net/mbarni/nTYWA/) （运行为“无包装（头部）”）

内联代码/html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <style type="text/css">
    body {
      font: 80% 'Quicksand-Regular', Verdana, Geneva, sans-serif;
    }
    select {
      display: block;
      margin: 0 0 10px;
      width: 300px;
    }
    select.replaced {
      width: 1px;
      position: absolute;
      left: -999em;
    }
    ul.selectReplacement {
      background: #10194B;
      margin: 0 0 10px;
      padding: 0;
      height: 1.65em;
      width: 300px;
      position: relative;
      z-index: 1000;
    }
    ul.selectFocused {
      background: #10194B;
    }
    ul.selectReplacement li {
      background: #09C;
      color: #fff;
      cursor: pointer;
      display: none;
      font-size: 11px;
      line-height: 1.7em;
      list-style: none;
      margin: 0;
      padding: 1px 12px;
      width: 276px;
    }
    ul.selectOpen li {
      display: block;
    }
    ul.selectReplacement li.selected {
      background: #10194B;
      border-bottom: 1px solid #fff;
      color: #fff;
      display: block;
    }
    ul.selectOpen li.selected {
      background: #10194B;
      border: 0;
      display: block;
    }
    ul.selectOpen li:hover,
    ul.selectOpen li.hover,
    ul.selectOpen li.selected:hover {
      background: #10194B;
      color: #fff;
    }
    div.scroll {
      overflow-y: auto;
      overflow-x: hidden;
      height: 100px;
      width: 300px;
    }
  </style>
  <script type="text/javascript">
    function selectReplacement(obj) {
      obj.className += ' replaced';
      var ul = document.createElement('ul');
      ul.className = 'selectReplacement';
      var div = document.createElement('div');
      div.className = 'scroll';
      div.appendChild(ul);

      var opts = obj.options;
      var selectedOpt = (!obj.selectedIndex) ? 0 : obj.selectedIndex;
      for (var i=0; i<opts.length; i++) {
        var li = document.createElement('li');
        var txt = document.createTextNode(opts[i].text);
        li.appendChild(txt);
        li.selIndex = i;
        li.selectID = obj.id;
        li.onclick = function() {
          selectMe(this);
        };
        if (i == selectedOpt) {
          li.className = 'selected';
          li.onclick = function() {
            this.parentNode.className += ' selectOpen';
            this.onclick = function() {
              selectMe(this);
            };
          };
        }
        if (window.attachEvent) {
          li.onmouseover = function() {
            this.className += ' hover';
          };
          li.onmouseout = function() {
            this.className = 
              this.className.replace(new RegExp(" hover\\b"), '');
          };
        }       
        ul.appendChild(li);
      }
      obj.onfocus = function() {
        ul.className += ' selectFocused';
      };
      obj.onblur = function() {
        ul.className = 'selectReplacement';
      };
      obj.onchange = function() {
        var idx = this.selectedIndex;
        selectMe(ul.childNodes[idx]);
      };
      obj.onkeypress = obj.onchange;
      obj.parentNode.insertBefore(div,obj);
    }
    function selectMe(obj) {
      var lis = obj.parentNode.getElementsByTagName('li');
      for (var i=0; i<lis.length; i++) {
        if (lis[i] != obj) {
          lis[i].className='';
          lis[i].onclick = function() {
            selectMe(this);
          };
       } else {
          setVal(obj.selectID, obj.selIndex);
          obj.className='selected';
          obj.parentNode.className = 
            obj.parentNode.className.replace(new RegExp(" selectOpen\\b"), '');
          obj.onclick = function() {
            obj.parentNode.className += ' selectOpen';
            this.onclick = function() {
              selectMe(this);
            };
          };
        }
      }
    }
    function setVal(objID,val) {
      var obj = document.getElementById(objID);
      obj.selectedIndex = val;
    }
    function setForm() {
      var s = document.getElementsByTagName('select');
      for (var i=0; i<s.length; i++) {
        selectReplacement(s[i]);
      }
    }
    window.onload = function() {
      (document.all && !window.print) ? null : setForm();
    };
  </script>
</head>
<body>  
    <select id="unidade">
        <option value="001">TEST 1</option>
        <option selected value="002">TEST 2</option>
        <option value="003">TEST 3</option>
        <option value="004">TEST 4</option>
        <option value="005">TEST 5</option>
        <option value="006">TEST 6</option>
        <option value="007">TEST 7</option>
        <option value="008">TEST 8</option>
    </select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:10:50.637

您遇到了[IE7 滚动 div 错误](https://stackoverflow.com/questions/67665/ie7-css-scrolling-div-bug)。

`position: relative`从中删除`ul.selectReplacement`，一切正常。已经在 IE9 的 IE7 浏览器模式下[在 jsfiddle中进行了测试。](http://jsfiddle.net/LgaJL/10/)

如果您发现需要`position: relative`ul 元素上的 ，请附加`position: relative`到包含的 div ( `div.scroll`)，这也可以解决问题（[相关的 jsfiddle](http://jsfiddle.net/uWXPn/5/)）。在 chrome 或 IE7 模式下，仅条带相对位置似乎并没有破坏任何东西，但是如果您需要 ul 元素不使用静态模型并且不需要 div 使用静态，则第二种方法也可以正常工作两种情况。

至于第二个问题，您可以`position: relative`将`div.scroll`其包装在一个`height: 1.5em`div 中，[如此 jsfiddle](http://jsfiddle.net/sMcjs/3/)中所见。包装 div 可以根据需要添加定位和 z-indexing：请注意，如果您需要内部元素看起来比包装 div 的其他兄弟元素更高，则由于 IE 错误相关，您将需要包装上的 z-indexing子元素与祖先元素的 z 索引。在 IE7 模式和 chrome 中工作。

（请注意，如果您想让它成为一个内联元素，您可以`display: inline-block`使用通常的警告 - 适当的[jsfiddle here](http://jsfiddle.net/sMcjs/4/)和 IE7 fix hack with `zoom`and `*display:inline` [version here](http://jsfiddle.net/sMcjs/7/)）

编辑：通过在两个不同高度之间切换 div 来修复以下文本的内联版本：jsfiddle。请注意，这将需要对 ul 和 li 元素的高度/线高进行一些调整，以避免从打开到关闭的高度轻微位移，但基本概念就在那里，尽管方式不优雅（“更好”就是简单地更改 div 的高度属性，或在其他类中隔离高度并仅交换该类）。请注意，必须降低所选元素的高度并移除填充，以便能够将 div 压缩到基本上为单行高度。如果需要，进一步降低某些元素的高度将允许进一​​步压缩滚动 div，即使在关闭状态下也不会出现滚动条。

# c - C中静态变量的内存分配

> ID：13820372
> 
> 赞同：2
> 
> 时间：2012-12-11T12:23:07.293
> 
> 标签：c

> **可能重复：**
> [静态变量存储在哪里（在 C/C++ 中）？](https://stackoverflow.com/questions/93039/where-are-static-variables-stored-in-c-c)

我读过所有初始化的全局变量都将在初始化的数据段上分配空间，所有未初始化的静态和全局变量都初始化为0，并在BSS上分配。在以下定义的情况下，

```
static int i = 0; 
```

`i`将在哪里分配空间？它会因为`i`被初始化而在初始化的数据段上，还是因为值为 0 而在 BSS 上`i`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T12:34:47.530

是的，未初始化的静态变量默认会初始化为 0，这在 C 中总是如此。

数据的存储位置将取决于实现......我已经看到它是 0 初始化静态变量（`i`在你的情况下）进入 .BSS（由符号开始的块）。

例如，非 0 初始化静态变量进入 .DATA `static int i=2;`。

为了表明这一点：

```
int main(int argc, char * argv[])
{
    return 0;
} 
```

保存在“test.c”中

```
> gcc test.c
> size a.out
text     data     bss   dec    hex   filename
1056     252      8     1316   524   a.out 
```

然后我们这样更新它：

```
int main(int argc, char * argv[])
{
    static int i;
    return 0;
}

> gcc test.c
> size a.out
text     data     bss   dec    hex   filename
1056     252      12    1316   524   a.out 
```

再次更改它：

```
int main(int argc, char * argv[])
{
    static int i = 2;
    return 0;
}

> gcc test.c
> size a.out
text     data     bss   dec    hex   filename
1056     256      8     1316   524   a.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:30:16.367

这实际上取决于实际的编译器/实现，但是是的，`i`很可能在 BSS 上，因为它要么在文件级别（即在任何函数之外），要么在`static`函数内部并且具有`0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:54:17.123

当我编译这个程序时，它依赖于实现，在具有 gcc 4.5.2 的 Linux 上：

```
static int a[1000000] = {1}; void main() {} 
```

我得到了大小为 3.9M 的可执行文件 - 数组的第一个元素被初始化（具有非零值），因此数组 'a' 转到 .data 段。

当我用零初始化数组时：

```
static int a[1000000] = {0}; void main() {} 
```

我得到了大小为 8.2K 的可执行文件——我猜这种大小的差异表明这次“a”数组位于 .bss 段中。

# youtube - 将 youtube 视频默认质量设置为高清

> ID：13820374
> 
> 赞同：0
> 
> 时间：2012-12-11T12:23:12.990
> 
> 标签：youtube, camtasia

我有一个 youtube 视频，我想默认为高清 (720)，而不是 youtube (360) 自动设置。我发现的只是我可以配置我将从其他用户的视频中看到的内容，但我找不到我在哪里设置用户默认观看*我的视频的质量。*我正在使用 Camtasia 8 制作视频。也许我需要在那里配置它？

任何提示都会很棒。

也许没有人知道这种新的 youtube 布局。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:16:42.187

看起来无法配置 - 您只能配置嵌入视频。我通过简单地用这些 youtube 评论提示用户切换高清来解决这个问题，并希望他们会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:02:43.893

我认为 youtube 在这里最好地描述了您可以并且应该嵌入 youtube 视频的方式。

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=178264](http://support.google.com/youtube/bin/answer.py?hl=en&answer=178264)

# objective-c - 如何从远程 .plist 文件填充 UITableView

> ID：13820375
> 
> 赞同：0
> 
> 时间：2012-12-11T12:23:13.160
> 
> 标签：objective-c, uitableview, plist

很抱歉，如果以前曾多次问过这个问题，但似乎对我的问题没有任何帮助。

我已将我的应用程序设置为从应用程序本身内部完美读取本地 .plist 文件以进行测试，但要使该应用程序有任何用途，我需要能够在 Web 服务器上更新它并远程加载它.

这是我当前的本地 plist 代码。我将如何在应用程序的其他地方进行最小的更改来修改它？

提前谢谢了。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Create a dictionary with the contents of Squad.plist
    NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Squad" ofType:@"plist"]];

    //Fill the Squad array with contents of dictionary under the key "Players"
    [self setSquad:(NSArray*) [dictionary objectForKey:@"Players"]];

    //Reload the table data
    [[self tableView] reloadData];

    [[self navigationItem] setPrompt:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:28:36.357

您需要先下载远程.plist，同时显示加载或其他内容，下载后，像现在一样在本地使用它。没有办法远程阅读它。

# c# - 如何使程序在独立于 .NET Framework 的不同计算机上运行？C＃

> ID：13820377
> 
> 赞同：-2
> 
> 时间：2012-12-11T12:23:18.367
> 
> 标签：c#, .net, executable, save

我有一个应用程序，其中包括将游戏状态保存在文本文件中。我正在向我的几个朋友发送 .exe 文件。节省在某些计算机上有效，而在其他计算机上则例外。

当我研究了一下，我认为这可能是接收端没有兼容的 .NET Framework 的问题。当然，这对我来说是不可取的，因为我希望该应用程序可以在每台计算机上运行..

您知道如何使程序独立于 Microsoft 的 Framework 版本。

如果有助于了解我在说什么，我正在使用此过程保存文件：

```
string filePath = System.IO.Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath) + "\\ConnectFour.txt";

StreamWriter myFile = File.CreateText(filePath); 
```

请问我能做什么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:30:58.850

您可以在程序集或安装程序中包含 .net 框架。检查这个： [将 .Net Framework 4.0 添加到安装项目中](https://stackoverflow.com/questions/11579883/add-net-framework-4-0-into-setup-project)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:31:40.797

更有可能是由于个人用户必须将文件写入该文件夹的权限。

相反，请考虑使用临时文件区域。使用它来获取它：

```
string filePath =  Path.Combine(Path.GetTempPath(),"ConnectFour.txt"); 
```

# java - Java Web 服务和 XML

> ID：13820378
> 
> 赞同：1
> 
> 时间：2012-12-11T12:23:29.050
> 
> 标签：java, xml, web-services, soap, jaxb

我是java编程的新手（不到2个月），你们能给我一些关于如何实现这个场景的建议吗？我需要查看和阅读哪些内容和哪些领域才能理解。

**到目前为止我所做的事情是：**

在 netbeans 上创建了一个新的 web 服务器和 web 应用程序项目，部署和测试没有问题，创建了一个 XSD 模式文件并使用 XML 文件创建了 JAXB 绑定。

**创建电影院预订服务**

1) 基于 XSD 模式的 XML 文件。

2) Web 服务应该能够在预订完成后返回值。（我很难理解这里需要什么来创建返回过程。但我知道使用 JAXB，我可以解组 XML 文件并将其转换为 Java 并将其显示给用户。但是我不明白我怎么能编组来自接口的输入并更新 XML 文件。）

3) 实现搜索功能，允许我的用户搜索电影票的可用性，并可以选择使用特定标准进行搜索，例如电影、流派、年龄。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:53:32.717

如果您不熟悉 Java 和 Web 服务并学习 JSP/Servlets，请先了解一些有关 Java 方法和 Java 接口的知识。

如果您想将 XML 和 XSD 用于 Web 服务，请尝试本教程

[JAXB](http://javapapers.com/jee/jaxb-tutorial/)

[网络服务](http://javapapers.com/web-service/web-service-introduction-tutorial/)

[斯塔克斯](http://javapapers.com/jee/java-stax/)

创建 Soap Web 服务

[SOAP 示例](http://javapapers.com/web-service/soap-web-service-introduction/)

# iphone - 如何在日历中的EKEvent中设置不报警

> ID：13820389
> 
> 赞同：4
> 
> 时间：2012-12-11T12:24:19.270
> 
> 标签：iphone, ios, ekevent

当我为日历创建新`EKEvent`日历时，我注意到会自动添加`9`活动当天的警报广告，我该如何设置否`alarm`？我试过这样：

```
EKEvent *event = [EKEvent eventWithEventStore:eventStore];
event.titile = @"This is an event";
event.calendar = calendar;
event.alarms = nil; //in this way don't work... 
```

但不起作用，在日历中我看到警报你如何看到：

![在此处输入图像描述](../Images/d7802f3cd18c6144722d1bd2875aafd9.png)

任何人都知道我如何在没有警报的情况下添加 EKEvent？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:27:53.913

您应该设置一个没有警报的空`NSArray`，如下所示：

```
EKEvent *event = // whatever...
[event setAlarms:[NSArray array]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:58:41.293

我发现默认闹钟是由日历设置的 Settings.app 设置的。如果在 settings.app 中设置了默认警报，我找不到设置没有警报的事件的正确方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T22:23:19.953

我终于找到了为什么我们中的一些人在创建新的 EKEvents 事件时收到警报的原因，尽管我们已经指定了警报关闭。对我来说，我猜对你们大多数人来说，选定的日历是谷歌日历。谷歌日历有一个设置，它为每个添加的新事件创建一个警报。要关闭它，请在网络浏览器上登录您的谷歌日历以将其关闭。我希望这会节省一些挫败感！Brgds，埃里克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-07T00:10:48.273

似乎禁用警报的唯一方法是使用以下代码在遥远的将来创建一个

```
EKAlarm * alarm = [EKAlarm alarmWithAbsoluteDate:[NSDate distantFuture]];
event.alarms = @[alarm]; 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-04T15:15:40.737

对我来说，唯一的方法是在创建后手动将其从事件中删除：

```
private func CreateEntry(calendar : EKCalendar, date: Date, prop: String) {

    let event:EKEvent = EKEvent(eventStore: eventStore)

    event.title = prop
    event.startDate = date
    event.endDate = date
    event.isAllDay = true
    event.notes = prop
    event.calendar = calendar //eventStore.defaultCalendarForNewEvents

    if event.alarms != nil {
        for del in event.alarms! {
            event.removeAlarm(del)
        }
    }

    do {
        try eventStore.save(event, span: EKSpan.thisEvent, commit: true)
    } catch let error as NSError {
        print("failed to save event with error : \(error)")
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T16:44:27.437

根据我的经验解决了问题。它取决于，在设备中，而不是在模拟器中，取决于设置/邮件、联系人、日历/默认警报时间/事件设置。如果设置为无，您可以添加警报或将其保留为默认值，即 nil。有用。如果设置为其他任何值，这将覆盖您对事件警报所做的任何设置，包括 nil。

# ios - MPMoviePlayerController 视频不播放

> ID：13820391
> 
> 赞同：3
> 
> 时间：2012-12-11T12:24:43.873
> 
> 标签：ios, mpmovieplayercontroller

我在我的应用程序中使用了 MPMoviePlayerController。
我得到了正确的 URL，但 MPMoviePlayer 不播放视频，它只显示黑屏。
我的代码如下：

```
[video setImage:[UIImage imageNamed:@"video_active.png"] forState:UIControlStateNormal];
 NSString *filename=[NSString stringWithFormat:@"%@.mp4",[appdel.TempVideoUrl valueForKey:tag]];
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *filePath = [documentsDirectory stringByAppendingPathComponent:filename];
 NSURL *movieURL = [NSURL fileURLWithPath:filePath] ;
 theMovie = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
 theMovie.view.frame = CGRectMake(106, 18, 216, 235);
 [uploadview addSubview:theMovie.view];

  // Play the movie.
 [theMovie pause]; 
```

我得到这样的 URL：file://localhost/var/mobile/Applications/6E1D4CB7-A08D-438B-9FE7-E2FD9B7B5EEC/Documents/136_1355227629.mp4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:46:26.373

`[theMovie prepareToPlay];`调用前添加`[theMovie play];`。

> **准备播放**
> 
> 准备播放电影播放器​​。（必需的）
> 
> `- (void)prepareToPlay`
> 
> **讨论**
> 
> 如果调用 play 方法时电影播放器​​尚未准备好播放，则该方法会自动调用此方法。但是，为了尽量减少播放延迟，请在调用 play 之前调用此方法。
> 
> 调用此方法可能会中断电影播放器​​的音频会话。有关中断以及如何回应中断的信息，请参阅音频会话编程指南。可用性
> 
> ```
> Available in iOS 3.2 and later. 
> ```
> 
> 在 MPMediaPlayback.h 中声明

您还可以`isPreparedToPlay`用于**检查电影播放器​​是否准备好播放。**

请参阅此[链接](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaPlayback_protocol/Reference/Reference.html)了解更多信息。

# android - 弹出对话框后控制底层元素

> ID：13820392
> 
> 赞同：0
> 
> 时间：2012-12-11T12:24:44.923
> 
> 标签：android

我通过调用具有透明主题的意图从应用程序上下文中弹出一个对话框。（[类似于](http://www.sherif.mobi/2011/08/creating-global-dialogs.html)此处提到的内容。）弹出是只读的。问题是当显示弹出时有一个当前活动在后台进行。在显示弹出窗口时，我也需要能够访问后台活动。我添加了以下两行，但我仍然无法控制基础活动：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:23:54.053

你必须在一个线程中打开对话框，你没有解释太多你想在后台做什么，但是为了让一个线程这样做：创建一个名为：thread1的新类，然后在那里写下这些：

```
public class thread1 extends Thread {
MainActivity activity;
public  thread1(MainActivity m){
activity=m;
ProgressDialog pd;
//other code maybe for specification
pd=ProgressDialog.show(activity,"", "wait for background activity");
}
@Override
public void run(){
         //you code working in background here like:
         activity.sucess=0;
         while (activity.sucess==0){
        android.os.SystemClock.sleep(300);  
    }
    pd.dismiss();
}
} 
```

每当你想打开这个 pb 你应该写这个，

```
thread1 t1=new thread1(this);
t1.start(); 
```

当你的工作完成并且你想关闭 pb 时，你必须设置 sucess=1 然后线程将被杀死。

# c++ - 使用 Visual Studio 2010 在 C++ 中进行内联汇编？

> ID：13820395
> 
> 赞同：1
> 
> 时间：2012-12-11T12:24:50.893
> 
> 标签：c++, assembly

我尝试在 64 位 Windows 7 下使用 Visual Studio 2010 编译以下代码。

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int strlen2(char str[] )
{
int x ;
    _asm
        {   
            MOV ESI,0;
    LA:     MOV DL,BYTE PTR str[ESI];
            CMP DL,0;
            JE EXIT;
            INC ESI;
            JMP LA;
    EXIT:   MOV x,ESI;

        };

return x;
}

int main()
{
char X[] ="string2222";
cout<<strlen2(X);
system("pause");
return 0;
} 
```

我希望输出是“10Press any key to continue ...”，
但不幸的是，输出是“3Press any key to continue ...” 对于 X[] 的任何值。
你能解释一下错误在哪里吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:40:14.817

因为您正在测量指针的长度（幸运的是，它的顶部字节为零），而不是字符串。

试试这个：

```
 MOV ESI,0;
        MOV EBX, strl
LA:     MOV DL,[ESI + EBX];
        CMP DL,0;
        JE EXIT;
        INC ESI;
        JMP LA;
EXIT:   MOV x,ESI; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:28:05.327

我没有测试这个的环境，但我怀疑你在访问时需要另一个级别的间接`str`性

```
LA:     MOV DL,BYTE PTR str[ESI]; 
```

您可能正在扫描指针的值而不是指向的字符串。

# android - 如何在android中刷新浏览器页面？

> ID：13820398
> 
> 赞同：0
> 
> 时间：2012-12-11T12:25:06.980
> 
> 标签：android, browser

我正在使用以下 Intent 打开 URL。

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW,Uri.parse(actionURL));
startActivity(browserIntent); 
```

.第一次加载页面时，我可能会输入一些数据。然后再次如果我尝试打开同一页面，它会尝试显示我输入一些数据的旧页面。如果我刷新则显示最新的页面。但我的要求是每次页面都应该自动刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:50:26.797

这里可以考虑两种情况。

*   首先，它是从“资产”文件夹访问您开发的网页。
*   其次，您正试图访问一个网站。

1.如果是您的网页，您需要在javascript中编写代码，如下所示：

```
 function refreshIt(){
      setTimeout('refreshIt()',5000);
    } 
```

2.如果您正在访问该网站。

为此检查浏览器 api：http: [//developer.android.com/reference/android/provider/Browser.html](http://developer.android.com/reference/android/provider/Browser.html)

尝试使用“deleteFromHistory(ContentResolver cr, String url)”方法清除特定网站的历史记录，以便在刷新时为您提供新页面。

您无法从 api 级别刷新它。

# c# - 将请求重定向到不同的控制器

> ID：13820399
> 
> 赞同：0
> 
> 时间：2012-12-11T12:25:08.973
> 
> 标签：c#, asp.net-mvc

我在布局页面中有一个按钮，它应该在不同的视图之间导航。

```
<a id="next" href="/Navigation?CurrentPage=@ViewBag.CurrentPage">Next</a> 
```

我在每个页面的 ViewModel 中填充`ViewBag.CurrentPage`值。

导航控制器在以下控制器中拦截锚点点击 -

```
public class NavigationController : Controller
{
    public void Index(string CurrentPage)
    {
        PageType currentPageEnum = (PageType)Enum.Parse(typeof(PageType), CurrentPage);
        PageType nextPageEnum = currentPageEnum + 1;
        RedirectToAction(nextPageEnum.ToString());            
    }
} 
```

Enum 按顺序包含 ActionName，因此只需增加 currentPageEnum 值即可找到下一页。

```
enum PageType
{
    Page1,
    Page2
} 
```

每个动作在 Global.asax.cs 中都有一个映射路由，如下所示 -

```
routes.MapRoute("Page1", "Page1", new { controller="controller1", action="Page1"});
routes.MapRoute("Page2", "Page2", new { controller="controller2", action="Page2"}); 
```

**问题：** 我无法使用此代码重定向到其他控制器 -

```
RedirectToAction(nextPageEnum.ToString()); 
```

请求终止而不重定向。

1.  我缺少什么信息。
2.  在 ASP MVC 中是否有更有效的方式在不同视图之间导航

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:26:35.840

添加一个 return 语句并使函数返回一些东西。

```
 public class NavigationController : Controller
{
    public **ActionResult** Index(string CurrentPage)
    {
        PageType currentPageEnum = (PageType)Enum.Parse(typeof(PageType), CurrentPage);
        PageType nextPageEnum = currentPageEnum + 1;
        **return** RedirectToAction(nextPageEnum.ToString());            
    }
} 
```

而且由于您指的是映射的路线名称而不是操作，我相信您需要`RedirectToRoute`而不是`RedirectToAction`像此代码中的那样：

```
 public class NavigationController : Controller
{
    public **ActionResult** Index(string CurrentPage)
    {
        PageType currentPageEnum = (PageType)Enum.Parse(typeof(PageType), CurrentPage);
        PageType nextPageEnum = currentPageEnum + 1;
        **return RedirectToRoute**(nextPageEnum.ToString());            
    }
} 
```

但我建议从（剃刀）视图在 MVC 环境中导航的最佳方式是这样的：

```
<div>
    @Html.ActionLink(string linkText, string actionName)
</div> 
```

如果动作在同一个控制器中。如果不使用此重载：

```
<div>
    @Html.ActionLink(string linkText, string actionName, string controllerName)
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:30:41.337

是的，有一种有效的方法如下：

只需使用

```
 RedirectToAction("ACTION_NAME", "Controller_NAME"); 
```

# spring - 无法使用 Spring MVC 初始化记录器

> ID：13820401
> 
> 赞同：1
> 
> 时间：2012-12-11T12:25:11.690
> 
> 标签：spring, spring-mvc, log4j

这是我的 bean 类 AppLogger.java

```
public class AppLogger {

    private String logMessage;

    public String getLogMessage() {
        return logMessage;
    }

    public void setLogMessage(String logMessage) {
        this.logMessage = logMessage;
    }
} 
```

我的 log4j.properties

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=debug, file, stdout 
```

我的 Log4j.xml

```
<bean id="appLogger" class="com.sort.model.AppLogger">
   <property name="message" value="Logger!"/>
   </bean> 
```

我的 Web.xml

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/Log4J.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

我的控制器，我试图在其中记录示例消息。

```
public class BasicFormController {

    private static final Logger logger = Logger.getLogger(BasicFormController.class);

    @ModelAttribute("evaluation")
    protected List<String> referenceData(HttpServletRequest request) throws Exception {

        logger.info("creating a message");
        List<String> evaluation = new ArrayList<String>();
        evaluation.add("Evaluated");
        evaluation.add("Not Evaluated");
        return evaluation;

    }
} 
```

我的 servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Enable annotation driven controllers, validation etc... -->
    <mvc:annotation-driven />
    <context:component-scan base-package="com.sort.controller" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value></value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean>
    </beans> 
```

我的构建路径中有 log4j-1.2.14.jar。现在的问题是，我收到 404 错误。该应用程序运行良好，无需所有这些 Log4j 相关问题。
你能帮我解决这个问题吗？
或者有人可以指导我举一个合适的例子来演示 Spring MVC 项目的日志记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:12:52.917

我使用了 xml 方法并记录了代码流。感谢您的所有回复。

这是我用过的log4j.xml...

```
<?xml version="1.0" encoding="UTF-8" ?>
<log4j:configuration debug="true">

    <appender name="ROLL" class="org.apache.log4j.RollingFileAppender">
        <!-- The active file to log to -->
        <param name="file" value="D:/portal.log" />
        <param name="append" value="true" />
        <param name="encoding" value="UTF-8" />

        <rollingPolicy class="org.apache.log4j.TimeBasedRollingPolicy">
            <!-- The file to roll to, this is a fairly intelligent parameter, if the 
                file ends in .gz, it gzips it, based on the date stamp it rolls at that time, 
                default is yyyy-MM-dd, (rolls at midnight) See: http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/TimeBasedRollingPolicy.html -->
            <param name="FileNamePattern" value="D:/portal.%d.log.gz" />
        </rollingPolicy>

        <layout class="org.apache.log4j.PatternLayout">
            <!-- The log message pattern -->
            <param name="ConversionPattern" value="%5p %d{ISO8601} [%t][%x] %c - %m%n" />
        </layout>
    </appender>

    <!-- Loggers to filter out various class paths -->

    <logger name="org.hibernate.engine.loading.LoadContexts"
        additivity="false">
        <level value="error" />
        <appender-ref ref="ROLL" />
    </logger>

    <!-- Debugging loggers -->

    <!-- Uncomment to enable debug on calpoly code only -->
    <!-- <logger name="edu.calpoly"> <level value="debug"/> <appender-ref ref="ROLL" 
        /> </logger> -->

    <root>
        <priority value="info" />
        <appender-ref ref="ROLL" />
    </root>

</log4j:configuration> 
```

我删除了属性文件并放弃了这种方法。

# iphone - 如何在选项卡视图控制器故事板应用程序中添加更多选项卡？

> ID：13820407
> 
> 赞同：25
> 
> 时间：2012-12-11T12:25:29.317
> 
> 标签：iphone, objective-c, ios, tabs, storyboard

> **可能重复：**
> [Xcode 4.2 选项卡式应用程序 - 添加新选项卡视图](https://stackoverflow.com/questions/7952576/xcode-4-2-tabbed-application-adding-new-tab-view)

我是 iPhone 应用程序的新手，我按照[以下教程](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)使用故事板开发选项卡视图应用程序：

它工作正常。感谢作者。:)

现在，**我想在主视图中添加更多选项卡（默认为 2 个选项卡；我想要 3 个或 4 个）。**

我该怎么做？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-11T12:52:44.737

添加一个视图控制器（UIViewController）并将其与您的 tabBarController 一起添加到关系“视图控制器”中（要执行此操作，请右键单击选项卡栏控制器并将其拖动到新视图控制器并选择最底部的关系 seague，即视图控制器），您的 XIB页面应如下所示：

![在此处输入图像描述](../Images/a8d3546cd2276fce9c3257adf5498ef3.png)

您可以对其余部分应用相同的模式。

# 添加控制器文件

正如@Jamie 所说：您必须转到菜单并单击“新建文件”，然后单击Objective-C 类，最后确保选择UIViewController 子类。命名它，然后它将添加文件。现在在您的故事板中，确保将每个选项卡的类更改为您的文件名。即为您的 ViewController 分配自定义类，我在 Image 中使用了名称 AAA。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T13:08:16.683

只需在屏幕上再添加一个视图控制器，将其从控件中拖动，然后在标签栏控制器上单击鼠标右键，然后单击新添加的视图控制器，然后左键单击将出现四个选项，通过单击选择最顶部的选项它的名字是“Relationships-view controllers”。并完成。

# safari - 使用 Applescript 在 Safari 中访问 Web Inspector

> ID：13820409
> 
> 赞同：0
> 
> 时间：2012-12-11T12:25:41.020
> 
> 标签：safari, applescript, web-inspector

我正在尝试创建一个基本上从 Safari 下载文件的 Applescript 脚本。但是，这些文件无法通过网页下载，所以我通常打开`Web Inspector`然后转到`Resources`一个名为 的文件夹中`Other`，下载文件。

我一直在网上搜索通过 Applescript 执行此操作的方法，但无济于事。因此，我的问题是：如何在当前的 Safari 窗口中访问 Web Inspector > Resrouces > Other files？我[知道](http://trac.webkit.org/wiki/WebInspector)可以使用 启动 Web Inspect `⌥⌘I`，然后您可以使用 更改 Inspector 内部的窗格`⌘]`。但是我无法专注于资源文件列表，如下所示： ![在此处输入图像描述](../Images/2b1f42f7bf21f67270f07677de600738.png)

是否可以在不使用快捷命令的情况下访问文件夹`.mp3`内的此文件？`Other`如果不是/如果是这样，我如何访问`Other`此窗口窗格内的文件夹？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:37:15.913

您是否可以通过其他方式访问 .mp3 文件？与其使用 Web Inspector，或许您可以在页面源代码中找到指向 .mp3 文件的链接，然后下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:22:41.860

如果要访问“其他”文件夹，则必须复制所需的网址，重置 safari，通过 html 栏转到网页，然后通过 alt>cmd>I 打开网络检查器它应该在那里。不确定Apple Script与任何事情有什么关系（但我从未使用过它：P）希望这会有所帮助

# javascript - Jquery：如何在第一个函数完成后用不同的参数回调相同的函数？

> ID：13820414
> 
> 赞同：0
> 
> 时间：2012-12-11T12:26:07.793
> 
> 标签：javascript, jquery

我有一个函数，它接受一个参数来动画它。我想在前一个函数完成后用不同的参数回调这个函数。到目前为止，我有这个，动画有效，但它没有一个接一个地做：

```
var thisis = document.getElementById("thisis");
var txt1 = document.getElementById("txt1");
var txt2 = document.getElementById("txt2");
var txt3 = document.getElementById("txt3");
var txt4 = document.getElementById("txt4");
var txt5 = document.getElementById("txt5");

$("#thisis").fadeIn(400, function(){
                    animetxt(txt1, function() {
                        animetxt(txt2, function(){
                            animetxt(txt3, function(){
                                animetxt(txt4, function(){
                                    animetxt(txt5);
                                });
                            });
                        });
                    });
                });

function animetxt(o){ //.css and .animate on the parameter// } 
```

您的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:28:52.937

您的`animetxt`函数没有您传递给它的回调函数的参数。也许：

```
function animetxt(o, f) {
   o.animate({/* css */}, f);
} 
```

# java - Maven 版本插件，限制版本：update-properties 损坏

> ID：13820416
> 
> 赞同：2
> 
> 时间：2012-12-11T12:26:15.713
> 
> 标签：java, maven, versions-maven-plugin

我有一个多模块 Maven 项目，其中模块共享依赖项。通过共享，我的意思是使用相同的依赖项。然而，每个模块都自己声明依赖关系。为了保持理智（是的，maven，理智，我知道），并让所有模块使用相同版本的依赖项，父 pom 使用版本号声明属性：

```
<properties>
   <dependency1.version>1.0-SNAPSHOT</dependency1.version>
   <dependency2.version>1.1-SNAPSHOT</dependency2.version>
</properties> 
```

并且所有模块都使用如下：

```
<dependency>
  <groupId>group</groupId>
  <artifactId>dependency1</artifactId>
  <version>${dependency1.version}</version>
</dependency> 
```

我对这个设置非常满意，因为它允许我在 1 个地方更改依赖项版本。

现在我有一堆我自己维护的依赖项。这些的发布是自动的并且非常简单，基本上：

```
mvn release:prepare release:perform -B 
```

现在我想进一步自动化并在我运行的主项目中：

```
mvn versions:update-properties 
```

（基本上，如果需要，我还运行：“mvn 版本：使用发布”来更改通常的依赖项，但这超出了这个问题的范围）。

运行此更新属性后，我的主要项目 pom 中的属性指向发布（这很好）。但是，如果我的模块使用属性来定义其他依赖项的版本并且这些项目有更新的版本可用，那么这些属性也会更改。

有没有办法限制更新属性造成的损害？版本：use-release 需要**包含**属性，所以我只能在我的人工制品上使用它。找不到更新属性的类似内容。

我可以恢复除父级之外的所有 pom 并仅提交/推送，但这似乎并不优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:47:43.980

听起来你没有理解maven的概念。在这种情况下，您应该在父 pom 中使用[dependencyManagement](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)，如下所示：

```
<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>com.google.inject</groupId>
      <artifactId>guice</artifactId>
      <version>3.0</version>
    </dependency>
    ...
   </dependencies>
</dependencyManagement> 
```

在您的模块中，您只需使用如下依赖项：

```
 <dependencies>
    <dependency>
      <groupId>com.google.inject</groupId>
      <artifactId>guice</artifactId>
    </dependency>
    ...
   </dependencies> 
```

重要的一步不是定义版本。在这种情况下，将使用由依赖管理块定义的版本。所以你不需要定义属性等，而且你有一个点可以定义和更改依赖关系，特别是版本。

[除此之外，还可以在version:update-properties](http://mojo.codehaus.org/versions-maven-plugin/update-properties-mojo.html#properties)调用的命令行中限制将要更改的属性。

# php - 出现验证时如何对齐文本输入和标签

> ID：13820419
> 
> 赞同：0
> 
> 时间：2012-12-11T12:26:22.483
> 
> 标签：php, html, css

下面有一个表单表，其中包含文本输入和验证消息等表单元素：

```
$error_user = (!empty($errors['user']))?$errors['user']:"";
$error_email = (!empty($errors['email']))?$errors['email']:"";  

            echo "<form action='./forgotpass.php' method='post'>
            <table>
            <tr>
            <td></td>
            <td id='errormsg'>$errormsg</td>
            </tr>
            <tr>
            <td>Username</td>
            <td><input type='text' name='user' value='$user'/><br/>".$error_user."</td>
            </tr>
            <tr>
            <td>Email</td>
            <td><input type='text' name='email' value='$email'/><br/>".$error_email."</td>
            </tr>
            <tr>
            <td></td>
            <td><input type='submit' name='resetbtn' value='Reset Password' /></td>
            </tr>
            </table>
            </form>"; 
```

现在我在相关文本输入下方显示每个验证消息，但问题是对齐。如果我像现在这样在文本输入下方显示消息，那么文本输入会向上移动一点以占据验证消息下方的空间，这意味着文本输入未与其标签对齐，例如`Email`文本输入未对齐出现验证时的此标签。

我的问题是，当验证消息出现在下方时，如何让标签和文本输入保持一致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:30:17.413

如果你使用这个：

```
echo "<form action='./forgotpass.php' method='post'>
        <table>
        <tr>
        <td></td>
        <td id='errormsg'>$errormsg</td>
        </tr>
        <tr>
        <td valign='top'>Username</td>
        <td valign='top'><input type='text' name='user' value='$user'/><br/>Username Error</td>
        </tr>
        <tr>
        <td valign='top'>Email</td>
        <td valign='top'><input type='text' name='email' value='$email'/><br/>Email Error</td>
        </tr>
        <tr>
        <td></td>
        <td><input type='submit' name='resetbtn' value='Reset Password' /></td>
        </tr>
        </table>
        </form>"; 
```

你应该得到你想要的样子。消息扭曲行的原因是因为它正在放大一个单元格，因此带有标签的单元格在中间垂直对齐。注意`valign:top`? 这会将所有内容推到单元格的顶部，因此第一行中的所有内容都将对齐。

看到这个[JSFiddle](http://jsfiddle.net/upXYe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:30:47.070

添加`style="vertical-align: top"`到所有`TD`标签。您可能还需要在标签单元格中添加一点填充，以使它们与输入框中的内容正确对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:31:16.023

创建另一个`<td>`元素以显示类似此编辑的错误消息

```
<tr>
 <td>Username</td>
 <td><input type='text' name='user' value='$user'/></td>
 <td>".$error_user."</td>
</tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:33:48.983

另外，除了提到的所有内容，如果它没有给你带来任何麻烦，我会尝试在空的 td 中添加一个空格，如下所示：

```
 <td>&nbsp;</td>
        <td id='errormsg'>$errormsg</td> 
```

它会让事情平均分配

# asp.net - 表单身份验证问题

> ID：13820420
> 
> 赞同：0
> 
> 时间：2012-12-11T12:26:26.943
> 
> 标签：asp.net, forms-authentication, webforms

我正在开发一个 ASP.NET Web 窗体应用程序，并且我`Account`在根目录下有一个文件夹。其中主要包含三个 ASPX 页面：`Login.aspx`, `ChangePassword.aspx`, `ForgotPassword.aspx`.

我已经使用自定义成员资格提供程序配置了表单身份验证。

**网络配置**

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login.aspx" slidingExpiration="true" timeout="2880" path="/" protection="All" />
</authentication>

<membership defaultProvider="CustomMembershipProvider">
  <providers>
    <clear/>

    <add name="CustomMembershipProvider" 
         type="App_Code.CustomMembershipProvider, Portal.Web" 
         connectionStringName="PortalConnectionString"
         applicationName="/" />
  </providers>
</membership> 
```

如果我尝试访问`Account`文件夹中的页面而不是`Login.aspx`我一直重定向到的页面，`Login.aspx`并且我目前正在避免其他两个页面的表单身份验证，如下所示，

```
 <location path="Account/ChangePassword.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>

  <location path="Account/ForgotPassword.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

我可以将它们组合起来，而不是像上面那样指定单个页面吗？我尝试`Account`在`path`属性中指定文件夹名称，但这不起作用。

接下来是我`Dashboard.aspx`在根目录中调用了另一个页面，每当我直接访问它时，我以为我会被重定向到该`Account/Login.aspx`页面，但它没有发生，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:35:37.263

您绝对可以将文件夹指定为路径属性 - 如果您保留它，请尝试删除尾随 /，例如

```
 <location path="account">
    <system.web>
      <authorization>
        <deny users="?" />
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

但是，因为您想保护帐户文件夹中的其他页面，您需要覆盖专门为匿名用户提供的页面，例如 Login.aspx 和 ResetPassword.aspx。您不能合并多个文件条目。

至于 Dashboard.aspx 重定向的原因，您未在此处发布的配置中肯定还有其他原因导致了这种情况。

# ios - XCode 中的属性列表值约束

> ID：13820426
> 
> 赞同：0
> 
> 时间：2012-12-11T12:26:35.933
> 
> 标签：ios, xcode, types, plist, constraints

我想限制您可以赋予我的一个 plist 文件中的项目的值。例如，内置 info.plist 使用此功能：

![plist 项目有约束](../Images/5e5577e65a3eedd0005baa391301f42c.png)

这里只能选择这四个值。我想做一个项目，只能选择我的自定义值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:34:10.633

这不是 Info.plist 的功能。您可以在 Info.plist 中放置您想要的任何值；他们只是不会被正确解释。您正在查看的功能是 Xcode 中 Info.plist 编辑器的功能。它只是向您展示它认为合法的价值观；过去它甚至是错误的，您必须手动添加它不知道的条目。这不是一般的 plist 功能。您只能通过创建自己的 plist 编辑器来实现它。

# c++ - 编译中的提升几何距离（）错误

> ID：13820428
> 
> 赞同：1
> 
> 时间：2012-12-11T12:26:40.380
> 
> 标签：c++, boost, compilation, boost-geometry

我只是写了一个 boost 给出的简单例子（[http://www.boost.org/doc/libs/1_52_0/libs/geometry/doc/html/geometry/quickstart.html](http://www.boost.org/doc/libs/1_52_0/libs/geometry/doc/html/geometry/quickstart.html)）。编译过程中出现一些错误。我使用 eclipse 和 Mingw 来编译它。有人可以告诉我有什么问题吗？

测试代码如下：

```
#include <iostream>
using namespace std;

#include <boost/geometry.hpp>
#include <boost/geometry/geometries/point_xy.hpp>
#include <boost/geometry/geometries/polygon.hpp>
#include <boost/geometry/algorithms/distance.hpp>

using namespace boost::geometry;

int main() {
cout << "!!!Hello World!!!" << endl; 
model::d2::point_xy<int> p1(1, 1), p2(2, 2);
cout << "Distance p1-p2 is: " << distance(p1, p2) << endl;
return 0;
} 
```

错误如下：

```
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-  
mingw32/4.7.1/include/c++/bits/stl_iterator_base_funcs.h:114:5:   
required by substitution of 'template<class _InputIterator> 
typename std::iterator_traits::difference_type 
std::distance(_InputIterator, _InputIterator) [with _InputIterator 
= boost::geometry::model::d2::point_xy<int>]'
..\src\test.cpp:22:50:   required from here
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-  
mingw32/4.7.1/include/c++/bits/stl_iterator_base_types.h:166:53: 
error: no type named 'iterator_category' in 'class 
boost::geometry::model::d2::point_xy<int>'
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-
mingw32/4.7.1/include/c++/bits/stl_iterator_base_types.h:167:53: 
error: no type named 'value_type' in 'class   
boost::geometry::model::d2::point_xy<int>'
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64- 
mingw32/4.7.1/include/c++/bits/stl_iterator_base_types.h:168:53: 
error: no type named 'difference_type' in 'class  
boost::geometry::model::d2::point_xy<int>'
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64- 
mingw32/4.7.1/include/c++/bits/stl_iterator_base_types.h:169:53: 
error: no type named 'pointer' in 'class 
boost::geometry::model::d2::point_xy<int>'
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-  
mingw32/4.7.1/include/c++/bits/stl_iterator_base_types.h:170:53: 
error: no type named 'reference' in 'class 
boost::geometry::model::d2::point_xy<int>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:47:11.273

这就是为什么你应该避免使用 using 指令。你有：

```
using namespace std;
using namespace boost::geometry; 
```

将这些命名空间中的所有名称拖到全局命名空间中。这包括`std::distance`和`boost::geometry::distance`和（从错误消息来看）`std::distance`被选为更好的重载。

如果您删除`using namespace std;`，并在必要时符合`std::`条件，那么一切都应该没问题。或者，如果你真的想保持命名空间污染，那么写限定名，`boost::geometry::distance`.

# perl - Perl - 在 make 测试中将 Devel::Cover 添加到 ExtUtils::MakeMaker

> ID：13820440
> 
> 赞同：1
> 
> 时间：2012-12-11T12:27:29.913
> 
> 标签：perl

我想做这个：

```
make test 
```

并作为

```
HARNESS_PERL_SWITCHES=-MDevel::Cover make test 
```

如果可能的话，最后运行封面。

我尝试这样做但不起作用。

```
test  => { HARNESS_PERL_SWITCHES => '-MDevel::Cover' }, 
```

但是仔细阅读手册，我认为这是不可能的。

顺便说一句，我可以添加类似

```
make cover 
```

谁能这样对我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:35:35.910

如果你使用 Dist::Zilla，有一个插件可以让你在 shell上发布一个[dzil 封面。](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aApp%3a%3aCommand%3a%3acover)

# jquery - Phonegap Paypal 插件 - 环境设置问题

> ID：13820446
> 
> 赞同：0
> 
> 时间：2012-12-11T12:28:01.300
> 
> 标签：jquery, ios, xcode, cordova, paypal

我已经设置了Phonegap Paypal JS（Iphone - [https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/PayPalPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/PayPalPlugin)），当环境设置为none时工作正常 - 出现Paypal覆盖，我可以进行测试付款 - 一旦我将环境更改为沙盒或 Live - 没有任何反应 - 事件被触发并且没有出现错误 - 但也没有出现 Paypal 屏幕......

我的 Xcode 输出如下所示 -

```
2012-12-11 12:21:42.008 ptapp[3108:907] WARNING: You are using a dummy PayPal App ID.
2012-12-11 12:21:44.038 ptapp[3108:907] SAiOSPaypalPlugin.prepare - set paymentType: 3
2012-12-11 12:21:44.042 ptapp[3108:907] SAiOSPaypalPlugin.payWithPaypal - payment sent.  
currency:GBP amount:10.00 desc:Jogging Club  
recipient:paul_1355160222_biz@liquidsolution.co.uk merchantName:Liquid Solution 
```

我正在使用以下脚本来触发 -

功能 startPayment(payAmnt,payDesc) { window.plugins.paypal.prepare(PayPal.PaymentType.DONATION);

```
 window.plugins.paypal.setPaymentInfo({
            paymentCurrency : "GBP",
            paymentAmount : payAmnt,
            itemDesc : payDesc,
            //recipient : "name@example.com",
            recipient : "paul_1355160222_biz@liquidsolution.co.uk",
            merchantName : "Liquid Solution"

    });
    window.plugins.paypal.pay()

} 
```

我的插件设置如下 -

```
#define NO_APP_ID   @"dummy"

/* Get one from Paypal at developer.paypal.com */
#define PAYPAL_APP_ID   NO_APP_ID

/* valid values are ENV_SANDBOX, ENV_NONE (offline) and ENV_LIVE */
#define PAYPAL_APP_ENV  ENV_SANDBOX 
```

我已经用 Paypal 的测试应用程序 ID 尝试了上述方法并得到相同的结果 - 所以我真的不知道发生了什么或从这里去哪里！非常令人沮丧！我唯一的想法是该插件不再受支持/生效。

非常欢迎任何关于修复原位或更好的替代方法的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T20:41:29.633

该插件已修复并删除了导致这些问题的错误。它现在位于[https://github.com/SnareChops/PayPalPlugin](https://github.com/SnareChops/PayPalPlugin)，并已在 PayPal 的沙盒环境中成功测试。

# php - 如何删除某个行号phpexcel以下的行

> ID：13820451
> 
> 赞同：0
> 
> 时间：2012-12-11T12:28:19.993
> 
> 标签：php, phpexcel

我想删除底部记录。当我到达第 6 行时，我想在 phpexcel 中删除以下任何内容。

```
for($tot=2; $tot<$highestRowEMDist; $tot++){
  $chkven = $objPHPExcel->getActiveSheet()->getCell('C'.$tot)->getValue();
  if ($chkven!="Test" ) {
    $objPHPExcel->getActiveSheet()->removeRow(7,0);
  }
} 
```

我想要的只是如果我到达第 6 行下面需要删除的任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:23:36.493

我找到了解决方案

```
for($row=2; $row < $highestRowEMDist; $row++){
   $value = $objPHPExcel->getActiveSheet()->getCell('C'.$row)->getValue();
   if ($value != "Quest") {
      $objPHPExcel->getActiveSheet()->removeRow($row, $row);
   }
} 
```

# objective-c - 基本和 OAuth 身份验证标头同时

> ID：13820454
> 
> 赞同：2
> 
> 时间：2012-12-11T12:28:26.603
> 
> 标签：objective-c, oauth-2.0, afnetworking

是否可以在 AFNetworking 的同一请求中使用 Basic 和 OAuth 授权标头（避免覆盖）？

我有这个代码：

```
NSURL *url = [NSURL URLWithString:@"https://www.infojobs.net/"];
AFOAuth2Client *OAuthClient = [[AFOAuth2Client alloc] initWithBaseURL:url clientID:kClientID secret:kClientSecret];

[OAuthClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

[OAuthClient authenticateUsingOAuthWithPath:@"oauth/authorize" code:self.authorizationCode redirectURI:kInfoJobsRedirectURLString success:^(AFOAuthCredential *credential) {
    NSLog(@"Credentials: %@", credential.accessToken);
    if (![credential.accessToken isEqualToString:@""]) {
        self.isAuthenticated = YES;

        [AFOAuthCredential storeCredential:credential withIdentifier:@"kInfoJobsAccessToken"];

        [[InfoJobsAPI sharedClient] setAuthorizationHeaderWithToken:credential.accessToken];

        // (!) This overwrites the Authorization header set with the accessToken
        [[InfoJobsAPI sharedClient] setAuthorizationHeaderWithUsername:kClientID password:kClientSecret];   

        success(credential);

    }
} failure:^(NSError *error) {
    NSLog(@"Error: %@", error.localizedDescription);

}]; 
```

我需要这样的请求：

```
GET /api/1/application HTTP/1.1
Host: api.infojobs.net
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==
Authorization: OAuth 07d18fac-77ea-461f-9bfe-a5e9d98deb3d
.... 
```

但我无法在同一请求中设置“基本”和“OAuth”授权标头，因为 AFNetworking 似乎覆盖了此标头，如[文档中所示](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/setAuthorizationHeaderWithToken%3a)

可以在同一个 Authorization 标头中使用“Basic”和“OAuth”，也许用“\n”将两者分开？

谢谢，对不起我糟糕的英语

* * *

**编辑**

最后，我可以在同一个标​​头中使用“Basic”和“Oauth”身份验证，这是代码：

```
[[InfoJobsAPI sharedClient] setAuthorizationHeaderWithUsername:kClientID password:kClientSecret];

AFOAuthCredential *credential = [AFOAuthCredential retrieveCredentialWithIdentifier:@"kInfoJobsAccessToken"];

NSMutableURLRequest *request = [self requestWithMethod:@"GET" path:@"/api/2/candidate" parameters:nil];

[request addValue:[NSString stringWithFormat:@"OAuth %@", credential.accessToken] forHTTPHeaderField:@"Authorization"];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    DLog(@"Response : %@",JSON);
}failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    DLog(@"Error : %@",error);
}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:54:52.070

根据 HTTP 规范，一个请求中只能有一个`Authorization`标头。因此，根据该规范，库显示的行为是正确的：第二次调用会`setAuthorizationHeader...`覆盖前一次调用。

您通常会在 HTTP 中看到的是有一个握手阶段，服务器告诉客户端它可以接受哪些授权协议。然后客户端可以从这些协议中选择它想要使用的协议。

# timer - 暂时禁用定时器中断

> ID：13820458
> 
> 赞同：3
> 
> 时间：2012-12-11T12:28:33.577
> 
> 标签：timer, embedded, interrupt, stm32, irq

我正在 stm32f4xx uC 上用 C 语言开发一个嵌入式项目。

我有一段代码连续执行循环操作 XYZ，有时 TIM4 中断会更改一些全局参数并导致操作 XYZ 重新启动。

代码是这样的：

```
for (;;) {
       //line A
    XYZ;
       //line B
} 
```

XYZ 是一项复杂的操作，涉及在缓冲区和其他缓冲区之间传输数据。

TIM4 中断处理程序执行此操作：停止 XYZ 并更改一些影响 XYZ 操作的全局变量。

所以基本上我希望 XYZ 重复执行，TIM4 中断来停止 XYZ，更改参数，**然后必须通过使用新的全局参数重新启动 XYZ 来重新启动循环。**

**问题是：**由于 XYZ 有许多指令，TIM4 IRQ 可能会在它的中间出现，并且在 IRQHandler 更改全局变量之后，操作从 XYZ 的中间恢复，这会破坏程序。

**我的初始解决方案：**使用 __disable_irq() 禁用线路 A 上的中断，并使用 __enable_irq() 在线路 B 上恢复它们

**失败**，因为 XYZ 复杂操作必须使用其他中断（TIM4 除外）。

**下一个解决方案**仅禁用线路 A 上的 TIM4 中断：

```
TIM_ITConfig(TIM4, TIM_IT_Update , DISABLE) 
```

并在 B 行重新启用它：

```
TIM_ITConfig(TIM4, TIM_IT_Update , ENABLE) 
```

**失败**，因为我丢失了中断：当 int 恢复时，在 XYZ 期间到达的中断被忽略。这是一个大问题（其中一个原因是 TIM4 IRQHandler 更改了全局变量，然后再次激活 TIM4 以便稍后发出中断，我这样做是因为中断之间的周期不同）。

谁能给我一个解决这个问题的方法？有没有更好的方法来禁用/恢复 TIM4 IRQ 而**不会丢失任何中断？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:47:40.643

有几个选项可能可用（我不是 100% 了解 ARM 架构）：

*   更改中断优先级/级别屏蔽寄存器以仅屏蔽 TIM4，让其他中断发生。希望如果 TIM4 在被屏蔽时被触发，在恢复关卡掩码时它会记住并触发 ISR。
*   屏蔽中断并手动检查在 XYZ 期间设置的 TIM4 中断标志
*   将 XYZ 分成更小的部分，仅在绝对必要时屏蔽 TIM4。
*   对数据副本进行操作，可选择检查 TIM4 中断标志​​以决定是继续/保留结果还是丢弃并重新启动。
*   如果 TIM4 可能很快触发，请检查时间并避免启动 XYZ，或者仅在 TIM4 触发后运行 XYZ N 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:37:55.383

完成 XYZ 后，您可以对全局变量的副本进行操作并从中断中换入新值。

从问题中不清楚是否需要在全局变量更改时立即停止处理 XYZ，或者是否可以等到 XYZ 完成处理以交换变量的新副本。我将在您需要摆脱处理 XYZ 的假设下进行操作，但这很容易做到。

代码看起来像这样：

```
volatile int x;
int x_prime;

int main(void)
{
    while(1)
    {
        //copy in new global parameter value
        x_prime = x;

        while(1)
        {
            //do stuff with x_prime
            if (x_prime != x)
            {
                break;
            }

            //do more stuff with x_prime
            if (x_prime != x)
            {
                break;
            }
        }
    }
}

// interrupt handler
void TIM_IT_Update(void)
{
    x++;
} 
```

这些`break`模式假设你没有改变`x_prime`。如果需要修改`x_prime`，则需要另一个副本。

由于永远不会禁用中断，因此您永远不必担心丢失任何中断。而且由于您正在操作由中断更改的参数的副本，因此中断是否在执行过程中更改参数并不重要，因为您在制作副本之前不会查看这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:47:49.027

当我发现自己处于类似情况时，处理可能需要比中断时间更长的时间，我使用 FIFO 将处理与传入数据分离。IE：TIM4 填充一个 FIFO。XYZ（或管理器）使用 FIFO 并处理数据。

（我觉得你的设计可能是错误的，因为你不应该使用全局变量来控制数据或流程。研究此事的书籍参考：制作嵌入式系统：伟大软件的设计模式）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T14:25:07.750

在 XYZ 从缓冲区复制所有内容并使用副本之前。我相信这是最好的方法，在编写 gps 解析器时有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-15T18:50:10.133

您是否考虑过为您的系统使用 RTOS？我意识到这需要进行一些重组，但它可以为您提供系统所需的任务处理灵活性和分辨率。如果您使用的是 STM32 的 CubeIDE，启用、配置和运行 RTOS 非常简单。

# windows - Windows XP Embedded 中的 CUDA

> ID：13820463
> 
> 赞同：2
> 
> 时间：2012-12-11T12:28:52.920
> 
> 标签：windows, cuda, driver, windows-xp-embedded

我想在带有显卡 Quadro 600 的 Windows XP Embedded OS 中进行 CUDA 编程。我想使用的 CUDA SDK 是 4.0。我在 NVIDIA 驱动程序中搜索了 Windows XP Embedded，但在 nvidia 驱动程序下载站点中没有找到它。我在哪里可以获得适用于 Windows XP Embedded OS 的 nvidia 驱动程序。

如何在该机器上运行 CUDA 应用程序。？

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:42:55.810

您是否尝试过为您的显卡安装 NVidia 的常规 Windows XP 驱动程序？XP Embedded 只是 Windows XP 的组件化版本，您可以在其中省略不使用的操作系统组件。它与 Windows CE 不同的内核。据我所知，它只是普通的 XP 内核，所以普通的 XP 驱动程序应该可以工作，除非 NVidia 正在采取措施防止这种情况发生。当然，也有可能构建您正在使用的 XP Embedded 映像的任何人都将必要的组件从您的 Windows 映像中遗漏了。

# java - 试图让游戏工作，循环条件

> ID：13820467
> 
> 赞同：3
> 
> 时间：2012-12-11T12:29:16.650
> 
> 标签：java, arrays, loops, for-loop, break

我将尝试简单而清晰地解释我得到了什么以及我需要什么。

我有一个二维数组，制作了一个 char 元素板。我必须从底部拍摄一张用“·”显示的照片。镜头从底部 (a.length-1) 到顶部 (0)，在墙壁上反弹，具体取决于拍摄方向。

```
if (dirDisp == 3){
            for(int x = 3, y = 0; x < 5 & y < 2; x++, y++) {
                if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY)
                    a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
            }
            for(int x = 0, y = 1; x < 9 & y < 11; x++, y++) {
                if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                    a[(a.length-1) - y][(a[x].length-1) - x] = '·';
            }
            for(int x = 0, y = 9; x < 5 & y < 14; x++, y++) {
                if(a[(a.length-1) - y][x] == EMPTY)
                    a[(a.length-1) - y][x] = '·';
            }
        } 
```

我已将拍摄方向 = 3 的代码放在上面。EMPTY 常量是“”。问题是我在数组中也有其他字符，比如'a'、'b'等。

我想要的是在没有 EMPTY 的情况下停止循环。它的实际作用是：

```
 g  g  b  g  g  y  y  r  r 
 y  o  y  a  r  y  g  o  b 
 g  o  r  a  b  r  a  a  b 
 g  y  o  a  y  a  g  o  b 
 g  a  b  b  b  o  o  b  g 
    ·                      
       ·                   
 r  r  r  r  r  r  r  r  r 
             ·             
                ·          
                   ·       
                      ·    
                         · 
                      · 
```

当镜头到达与 EMPTY 不同的第一个字符时，镜头必须停止。我尝试使用中断并继续。还有使用firstLoop:{}。我也尝试在循环的每个部分使用布尔值，但我还没有让它工作。我需要一点帮助。

如果有不清楚的地方问。

PD：这个镜头有3个“for”循环，第一个是从底部到第一面墙填充阵列，第二个是墙和墙之间的空间，第三个是顶部相对的墙。PD2： 'r' 行是为了让你看看实际发生了什么。

* * *

使用布尔值后：

```
 a  b  a  b  y  a  r  y  y 
 y  a  o  y  g  r  o  g  g 
 g  o  y  o  a  y  y  a  y 
 y  o  a  a  g  o  o  b  a 
 o  o  r  a  o  r  g  y  y 

 r  r  r  r  r  r  r  r  r 

                         · 
                      · 
```

* * *

## 主班

```
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Stack;

public class BobbleTexto {

        public static Scanner sc = new Scanner(System.in);

        public static char RED = 'r';
        public static char GREEN = 'g';
        public static char  BLUE = 'b';
        public static char ORANGE = 'o';
        public static char  YELLOW = 'y';
        public static char  GRAY = 'a';
        public static char PURPLE = 'p';
        public static char EMPTY = ' ';

        public static char IZQUIERDA = 'A';
        public static char DERECHA = 'D';
        public static char DISPARO = 'S';
        public static char SALIR = 'Q';

        public static char [][] generarTablero (){

            char [][] a = new char [14][9];

            for (int x = 0; x < a.length; x++){
                for (int y = 0; y < a[x].length;y++){
                    a [x][y] = EMPTY;
                }
            }
            for(int x = 0; x < 5; x++){
              for(int y = 0; y < a[y].length; y++){
                  a[x][y] = generarBurbuja();
                     a[7][y] = RED;
              }
            }
            return a;
        }
        public static char [][] limpiarTablero (char [][] a){
            for (int x = 0; x < a.length; x++){
                for (int y = 0; y < a[x].length;y++){
                    if (a [x][y] == '·')
                        a[x][y] = EMPTY;
                }
            }
            return a;
        }
        public static void imprimirDisparo (char [][] a,int dirDisp,char Burbuja){
            if (dirDisp == 1){
                for(int x = 1, y = 0; x < 5 & y < 4; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY){
                    a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                    }
                    else{
                        break;
                    }
                }
                for(int x = 0, y = 3; x < 9 & y < 11; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY){
                        a[(a.length-1) - y][(a[x].length-1) - x] = '·'; 
                    }
                    else{
                    }
                }
                for(int x = 0, y = 11; x < 4 & y < 14; x++, y++){
                    if(a[(a.length-1) - y][x] == EMPTY){
                        a[(a.length-1) - y][x] = '·';
                    }
                    else{
                        break;
                    }
                }   
            }
            if (dirDisp == 2){
                    for(int x = 2, y = 0; x < 5 & y < 3; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY){
                            a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                        }
                        else {
                        }
                    }
                    for(int x = 0, y = 2; x < 9 & y < 11; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY){
                            a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                        }
                        else {
                        }
                    }
                    for(int x = 0, y = 10; x < 4 & y < 14; x++, y++){
                        if(a[(a.length-1) - y][x] == EMPTY){
                            a[(a.length-1) - y][x] = '·';
                        }
                        else {
                        }
                    }
            }

            if (dirDisp == 3){
                boolean foundObstacle = false;
                for(int x = 3, y = 0; x < 5 & y < 2 && !foundObstacle; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY)
                       a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                    else {
                        foundObstacle = true;
                        break;
                    }
                }
                if(!foundObstacle) {
                    for(int x = 0, y = 1; x < 9 & y < 11 && !foundObstacle; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                           a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                        else {
                            foundObstacle = true;
                            break;
                        }
                    }
                }
                if(!foundObstacle) {
                    for(int x = 0, y = 9; x < 5 & y < 14 && !foundObstacle; x++, y++){
                        if(a[(a.length-1) - y][x] == EMPTY)
                            a[(a.length-1) - y][x] = '·';
                        else break;
                    }
                }
            }
            if (dirDisp == 4){
                    for(int x = 4, y = 0; x < 5 & y < 1; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                    }
                    for(int x = 0, y = 0; x < 9 & y < 11; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    }
                    for(int x = 0, y = 8; x < 6 & y < 14; x++, y++){
                        if(a[(a.length-1) - y][x] == EMPTY)
                        a[(a.length-1) - y][x] = '·';
                    }
            }
            if (dirDisp == 0) {
                    for (int x = 0; x < a.length; x++)
                        if(a[x][(a[x].length - 1) / 2] == EMPTY)
                        a[x][(a[x].length - 1) / 2] = '·';
            }
            if (dirDisp == -1){
                    for(int x = 1, y = 0; x < 5 & y < 4; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) / 2 - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) / 2 - x] = '·';
                    }
                    for(int x = 1, y = 3; x < 11 & y < 12; x++, y++){
                        if(a[(a.length-1) - y][x-1] == EMPTY)
                        a[(a.length-1) - y][x-1] = '·';
                    }
                    for(int x = 0, y = 11; x < 4 & y < 14; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    }
            }
            if (dirDisp == -2){
                    for(int x = 2, y = 0; x < 5 & y < 4; x++, y++){
                        if( a[(a.length-1) - y][(a[x].length-1) / 2 - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) / 2 - x] = '·';
                    }
                    for(int x = 1, y = 2; x < 10 & y < 12; x++, y++){
                        if(a[(a.length-1) - y][x-1] == EMPTY)
                        a[(a.length-1) - y][x-1] = '·';
                    }
                    for(int x = 0, y = 10; x < 4 & y < 14; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    }
            }       
            if (dirDisp == -3){
                    for(int x = 3, y = 0; x < 5 & y < 4; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) / 2 - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) / 2 - x] = '·';
                    }
                    for(int x = 1, y = 1; x < 10 & y < 12; x++, y++){
                        if(a[(a.length-1) - y][x-1] == EMPTY)
                        a[(a.length-1) - y][x-1] = '·';
                    }
                    for(int x = 0, y = 9; x < 5 & y < 14; x++, y++){
                        if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                        a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    }
            }
            if (dirDisp == -4){
                for(int x = 4, y = 0; x < 5 & y < 4; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) / 2 - x] == EMPTY)
                    a[(a.length-1) - y][(a[x].length-1) / 2 - x] = '·';
                }
                for(int x = 1, y = 0; x < 10 & y < 12; x++, y++){
                    if(a[(a.length-1) - y][x-1] == EMPTY)
                    a[(a.length-1) - y][x-1] = '·';
                }
                for(int x = 0, y = 8; x < 6 & y < 14; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                    a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                }
            }

            for (int x = 0; x < a.length; x++){
                System.out.println();
                for (int y = 0; y < a[x].length; y++){
                    System.out.print(" "+a [x][y]+" ");
                }       
            }

            System.out.println("\nDirección de disparo ["+dirDisp+"]");
            System.out.println("Burbuja ["+Burbuja+"]");
        }
        public static int getDirDisp(){
            int dirDisp = sc.nextInt();
            while (dirDisp < -4 || dirDisp > 4){
                System.out.println("Introduzca una dirección de disparo válida(-1,-2,-3,0,1,2,3)");
                dirDisp = sc.nextInt();
            }

            return dirDisp;
        }
        public static char generarBurbuja(){
            char burbuja = EMPTY;
            int azar = (int) (Math.random() * 6);
            switch (azar){
            case 0 : burbuja = RED; break;
            case 1 : burbuja = GREEN; break;
            case 2 : burbuja = BLUE; break;
            case 3 : burbuja = ORANGE; break;
            case 4 : burbuja = YELLOW; break;
            case 5 : burbuja = GRAY; break;
            case 6 : burbuja = PURPLE; break;
            }
            return burbuja;
        }
        public static char obtenerAccionJugador (){ 
            System.out.println("Acción?");
            String aux = sc.next();
            char accion = aux.charAt(0);
            while (accion != IZQUIERDA && accion != DERECHA && accion != DISPARO && accion != SALIR){
                System.out.println("Introduzca una acción válida:");
                aux = sc.next();
                accion = aux.charAt(0); 
            }
            System.out.println("***************************");
            return accion;
        }

        public static void obtenerTrayectoria (char [][] a){
            System.out.println("Posiciones:");
            for (int x = 0; x < a.length; x++){
                for (int y = 0; y < a[x].length;y++){
                    if(a [x][y] == '·'){
                        Posicion pos = new Posicion(x,y);
                        ArrayList<Posicion> aListPos = new ArrayList<Posicion>();
                        aListPos.add(pos);
                        for(Posicion ii : aListPos){
                            System.out.println("(" + pos.getFila() + "," + pos.getColumna()+")");
                        }
                    }
                }
            }
        }
        public static char [][] realizarDisparo (char [][] a,char Burbuja){
            int c [] = new int [a.length];
            int w = 0;
            for (int x = 0; x < a.length; x++){
                for (int y = 0; y < a[x].length;y++){
                    if (a [x][y] == '·'){
                        w++;
                        c [w]= x;   
                    }
                    if(a[c[1]][y] == '·'){
                        a[c[1]][y] = Burbuja;
                    }
                }   
            }
            return a;
        }
        public static int moverDerecha (int dirDisp, char [][] a){

            if(dirDisp == -4)
                dirDisp = -3;
            else if (dirDisp == -3)
                dirDisp = -2;
            else if (dirDisp == -2)
                dirDisp = -1;
            else if (dirDisp == -1)
                dirDisp = 0;
            else if (dirDisp == 0)
                dirDisp = 1;
            else if (dirDisp == 1)
                dirDisp = 2;
            else if (dirDisp == 2)
                dirDisp = 3;
            else if(dirDisp == 3)
                dirDisp = 4;

            return dirDisp;
        }
        public static int moverIzquierda (int dirDisp, char [][] a){

            if(dirDisp == 4)
                dirDisp = 3;
            else if (dirDisp == 3)
                dirDisp = 2;
            else if (dirDisp == 2)
                dirDisp = 1;
            else if (dirDisp == 1)
                dirDisp = 0;
            else if (dirDisp == 0)
                dirDisp = -1;
            else if (dirDisp == -1)
                dirDisp = -2;
            else if (dirDisp == -2)
                dirDisp = -3;
            else if(dirDisp == -3)
                dirDisp = -4;
            else{}

            return dirDisp;
        }
        public static boolean existenBurbujas (char [][] a){
            boolean result = true;
            int contadorBurbujas = 0;
            for (int x = 0; x < a.length; x++){
                for (int y = 0; y < a[x].length;y++){
                    if(a [x][y] != EMPTY){
                        contadorBurbujas++;
                    }
                }
            }
            if(contadorBurbujas > 0){
                return true;
            }
            return result;
        }
        public static void borrarBurbujasAgrupadas(char [][] b, Posicion p) {
            if(b[p.fila][p.columna] != EMPTY)
                vecinos(b, p.fila, p.columna, b[p.fila][p.columna]);                    
        }
        private static void vecinos(char [][] b, int i_comienzo, int j_comienzo, char destino) {        
            Stack<Integer> ic = new Stack<Integer>();
            Stack<Integer> jc = new Stack<Integer>();

            ic.add(i_comienzo);
            jc.add(j_comienzo);

            int t = 0;
            boolean [][] visitados = new boolean[b.length][b[0].length];

            while( !ic.isEmpty() ) {
                int i = ic.pop();
                int j = jc.pop();
                visitados[i][j] = true;

                t++;                        

                if(j-1 >= 0) {
                    if(b[i][j-1] == destino && !visitados[i][j-1]) {
                        ic.push(i);
                        jc.push(j-1);
                    }
                }
                if(j+1 < b[0].length) {
                    if(b[i][j+1] == destino && !visitados[i][j+1]) {
                        ic.push(i);
                        jc.push(j+1);
                    }
                }
                if(i-1 >=0) {
                    if(b[i-1][j] == destino && !visitados[i-1][j]) {
                        ic.push(i-1);
                        jc.push(j);
                    }
                }
                if(i+1 < b.length) {
                    if(b[i+1][j] == destino && !visitados[i+1][j]) {
                        ic.push(i+1);
                        jc.push(j);
                    }
                }

                if(j-1 >=0 && i-1 >=0) {
                    if(b[i-1][j-1] == destino && !visitados[i-1][j-1]) {
                        ic.push(i-1);
                        jc.push(j-1);
                    }
                }
                if(j+1 < b[0].length && i-1 >= 0 ) {
                    if(b[i-1][j+1] == destino && !visitados[i-1][j+1]) {
                        ic.push(i-1);
                        jc.push(j+1);
                    }
                }
                if(j-1>=0 && i+1<b.length) {
                    if(b[i+1][j-1] == destino && !visitados[i+1][j-1]) {
                        ic.push(i+1);
                        jc.push(j-1);
                    }
                }
                if(j+1<b[0].length && i+1<b.length) {
                    if(b[i+1][j+1] == destino && !visitados[i+1][j+1]) {
                        ic.push(i+1);
                        jc.push(j+1);
                    }
                }
            }   

            if(t >= 3)
                for(int i=0; i<visitados.length; i++)
                    for(int j=0; j<visitados[i].length; j++)
                        if(visitados[i][j])
                            b[i][j] = EMPTY;
        }

        public static void jugar (){
            Posicion p = new Posicion();
            char [][] a = generarTablero();
            System.out.println("Introduzca la dirección de disparo(-1,-2,-3,-4,0,1,2,3,4)");
            int dirDisp = getDirDisp();
            char Burbuja = generarBurbuja();
            imprimirDisparo(a,dirDisp,Burbuja); 
            char accion = obtenerAccionJugador();
            while(true){
                if (accion == IZQUIERDA){
                    dirDisp = moverIzquierda(dirDisp,a); 
                    limpiarTablero(a);
                    imprimirDisparo(a,dirDisp,Burbuja);
                    accion = obtenerAccionJugador();
                }

                else if(accion == DERECHA) {
                    dirDisp = moverDerecha(dirDisp,a);
                    limpiarTablero(a);
                    imprimirDisparo(a,dirDisp,Burbuja);
                    accion = obtenerAccionJugador();
                }

                else if(accion == DISPARO){
                    realizarDisparo(a,Burbuja);
                    borrarBurbujasAgrupadas(a,p);
                    Burbuja = generarBurbuja();
                    imprimirDisparo(a,dirDisp,Burbuja);
                    obtenerTrayectoria(a);
                    accion = obtenerAccionJugador();
                }
                else if (accion == SALIR){
                    System.out.println("GAME OVER");
                }continue;
            }

        }

        public static void main (String[] args){

            jugar();

        }
} 
```

* * *

另一个有对象的类

* * *

公共类位置{

```
 int fila;
    int columna;

    public Posicion(int fila,int columna) {
        this.fila = fila;
        this.columna = columna;
    }

    public int getFila(){
        return this.fila;
    }

    public int getColumna(){
        return this.columna;
    }
    public Posicion(){} 
```

## }

## 尝试新的拍摄方式

在您回答完所有问题后，我已经完成了一种新的拍摄方法，比第一种更容易，带有 while 循环和更多常量名称，使其易于理解。

Position 类仍然相同。

我将把带有正向拍摄方向的代码放在这里：

```
public static void getTrayectory (char [][] a,int shootDirection){  

                int x = 0, y = 0;   
                START = ((RIGHT_WALL)/2) + shootDirection;
                a [BOTTOM][START] = SHOT;

                if(shootDirection > 0){
                    while (!isOut(BOTTOM-x,START+y) && emptyCell(BOTTOM-x,START+y)){
                        b [BOTTOM - x][START + y] = SHOT;
                        x++; y++;   
                    }
                    y = 0; x=x-1;
                    while (!isOut(BOTTOM-x,RIGHT_WALL-y) && emptyCell(BOTTOM-x,RIGHT_WALL-y)){
                        b [BOTTOM-x][RIGHT_WALL-y] = SHOT;
                        x++; y++;
                    }
                    y = 0; x=x-1;
                    while (!isOut(BOTTOM-x,LEFT_WALL+y) && emptyCell(BOTTOM-x,LEFT_WALL+y)){
                        b [BOTTOM-x][LEFT_WALL+y] = SHOT;
                        x++; y++;
                    }
                    y = 0; 
                    while (!isOut(BOTTOM-x,RIGHT_WALL-y) && emptyCell(BOTTOM-x,RIGHT_WALL-y)){
                        b [BOTTOM-x][RIGHT_WALL-y] = SHOT;
                        x++; y++;
                    }           

                }
    } 
```

* * *

## 您还需要它才能编译它；)

```
public static char [][] b = new char [25][9];

    public static char EMPTY = '-';
    public static char SHOT = 'x';

    public static Scanner sc = new Scanner(System.in);

    public static int shootDirection;
    public static int BOTTOM = b.length - 1;
    public static int RIGHT_WALL = b[0].length - 1;
    public static int LEFT_WALL = 0;
    public static int TOP = 0;
    public static int CENTER = ((RIGHT_WALL)/2);
    public static int START = ((RIGHT_WALL)/2) + shootDirection;

    public static void fill (char [][] b){
        for (int x = 0; x < b.length; x++){
            for (int y = 0; y < b[x].length;y++){
                b [x][y] = EMPTY;
                b [10][y] = 'A';
            }
        }
    }

    public static void show (char [][] b){
        for (int x = 0; x < b.length; x++){
            System.out.println();
            for (int y = 0; y < b[x].length; y++){
                System.out.print(" "+b [x][y]+" ");
            }       
        }
    }

    public static boolean isOut (int x,int y){
        if(x < TOP)return true;
        if(y > RIGHT_WALL)return true;
        if(y < LEFT_WALL)return true;
        return false;     
    }
    static boolean emptyCell(int x, int y){
          return b [x-1][y] == EMPTY;
        } 
```

问题是，它可以工作，但是 emptyCell 方法有一个错误。它返回 b [x-1][y] == EMPTY，因为如果我使用 return b[x][y] 它会得到一个 OutOfBounds 错误。由于 x-1，循环在它应该停止之前停止了一行，我不知道如何修改它以使其正常工作。

另一件事是，我想做一个更简单的方法，但即使有下面的小例子，我也不知道如何用我的常量来做。我希望你能为我做，它一定很容易但我不知道：S 使用 isOut 方法和 emptyCell 方法，答案一定很接近。谢谢你，很抱歉这个长线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:34:05.657

据我了解代码，最接近您所拥有的解决方案是`else`在`EMPTY`检查中放置一个，并在那里告诉它`break`从可能被中断的第一个循环开始。然后，设置一个告诉它停止的变量，然后使其余`for`循环对该变量有条件，这样它就不会从那里选择。

所以，它可能是这样的（但请记住，以下是一个不好的解决方法，应该立即改进此代码的整体结构）：

```
if (dirDisp == 3){
            boolean foundObstacle = false;
            for(int x = 3, y = 0; x < 5 & y < 2; x++, y++){
                if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY)
                   a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                else {
                    foundObstacle = true;
                    break;
                }
            }
            if(!foundObstacle) {
                for(int x = 0, y = 1; x < 9 & y < 11; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                       a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    else {
                        foundObstacle = true;
                        break;
                    }
                }
            }
            if(!foundObstacle) {
                for(int x = 0, y = 9; x < 5 & y < 14; x++, y++){
                    if(a[(a.length-1) - y][x] == EMPTY)
                        a[(a.length-1) - y][x] = '·';
                    else break;
                }
            }
        } 
```

一旦解决了您的问题，请考虑对您的代码进行一些更改，因为首先，`for`如果您知道循环将过早结束，则使用循环被认为是不好的做法。在这些情况下，我们通常使用`while`循环。其次，硬编码这些东西不是一个好主意。一旦你掌握了这个窍门，你就可以想出一个算法来完成任何给定方向的工作。

希望这可以帮助。

**编辑：**

```
 if (dirDisp == 3){
            boolean foundObstacle = false;
            for(int x = 3, y = 0; x < 5 & y < 2 && !foundObstacle; x++, y++){
                if(a[(a.length-1) - y][(a[x].length-1) / 2 + x] == EMPTY)
                   a[(a.length-1) - y][(a[x].length-1) / 2 + x] = '·';
                else {
                    foundObstacle = true;
                    break;
                }
            }
            if(!foundObstacle) {
                // At its first iteration, this loop finds the '·' symbol placed by the previous one. 
                // So I've made it start from the second.
                for(int x = 1, y = 2; x < 9 & y < 11 && !foundObstacle; x++, y++){
                    if(a[(a.length-1) - y][(a[x].length-1) - x] == EMPTY)
                       a[(a.length-1) - y][(a[x].length-1) - x] = '·';
                    else {
                        foundObstacle = true;
                        break;
                    }
                }
            }
            if(!foundObstacle) {
                for(int x = 0, y = 9; x < 5 & y < 14 && !foundObstacle; x++, y++){
                    if(a[(a.length-1) - y][x] == EMPTY)
                        a[(a.length-1) - y][x] = '·';
                    else break;
                }
            }
        } 
```

请记住，正如其他人所建议的那样，您无法调试的原因是代码非常晦涩难懂。无论多么有经验的人，这*都是*一件很难调试的事情。

这就是为什么每个人都建议我们应该编写干净的代码。记住，每个人都会犯错。一旦你了解了如何用一种语言编写程序（显然你个人也是这样做的），最重要的是你自己对代码的理解程度如何，这样你就可以更容易地看到你的错误。永远不要认为仅仅因为你自己编写了一段代码就理解了它。制作大量变量，给它们起有意义的名字，将你的程序分成几部分，制作许多与你的程序必须处理的实体相对应的类型，给它们起有意义的名字，找到重复的代码模式，把它们变成函数/方法（带或不带参数化部分）并给它们起有意义的名称。

即使你在那个时候找不到你的错误，至少其他人会更容易帮助你。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:47:40.660

如果您的中断条件很复杂，我建议改用 while 循环。使用漂亮的方法名称也会使您的代码更具可读性。

```
while (!outOfBounds(x,y) && emptyCell(x,y) {
  a[x][y] = '.';
  moveCursor(direction);
}

...

boolean emptyCell(int x, int y){
  return a[x][y] == EMPTY;
}

boolean outOfBounds(int x, int y){
  if (x<0) return true;
  if (y<0) return true;
  if (x>LIMIT_X) return true;
  if (y>LIMIT_Y) return true;
  return false;
}

void moveCursor(direction){
  if (direction==DOWN_RIGHT){
    x++;
    y++;
    if (x > X_LIMIT){
      x-=2;
      direction = DOWN_LEFT;
    }
    ...
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:58:28.127

我刚刚写了这个小方法，它正在做你想做的事。但它被填充了一个 rnd char 数组。查看我的休息条件

```
private void shot() {
    char charArray[][] = new char[100][20];
    Random r = new Random();
    for(int i = 0;i<charArray.length;++i) {
        for(int j = 0;j<charArray[0].length;++j) {
            if(r.nextInt(5) == 0) {
                charArray[i][j] = (char) (r.nextInt(26)+65);
            }
        }
    }
    boolean shotRight = false;
    for(int i = charArray.length-1,j = charArray[0].length-1;i>0;--i) {
        System.out.println(i + " " + j);
                    // break condition
        if(charArray[i][j] != '\u0000') break;
        if(shotRight) {
            charArray[i][j] = '.';
            ++j;
        }
        else {
            charArray[i][j] = '.';
            --j;
        }
        if(j <= 0) {
            shotRight = true;
        }
        if(j >= charArray[0].length-1) {
            shotRight = false;
        }

    }
    for(int i = 0;i<charArray.length;++i) {
        for(int j = 0;j<charArray[0].length;++j) {
            System.out.print(((charArray[i][j] == '\u0000') ? "  ":charArray[i][j] + " ") + "  ");
        }
        System.out.println();
    }

} 
```

它确实中断了，因为 char = '\u0000' 的默认值

# javascript - 如何获得立方体的宽度和高度？

> ID：13820468
> 
> 赞同：2
> 
> 时间：2012-12-11T12:29:22.537
> 
> 标签：javascript, three.js

我有一个立方体几何和一个网格，我不知道如何获得宽度。这是代码：

```
geometry = new THREE.CubeGeometry( 200, 200, 200 );
material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
mesh = new THREE.Mesh( geometry, material ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:14:15.880

你可以`scale`改用。

```
geometry = new THREE.CubeGeometry( 1, 1, 1 );
material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
mesh = new THREE.Mesh( geometry, material );
mesh.scale.x = 200;
mesh.scale.y = 200;
mesh.scale.z = 200; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:15:28.110

不确定我是否正确理解了您的问题，但您刚刚指定了尺寸为 200 x 200 x 200 的立方体，因此您的宽度和高度就在那里。

# ruby - 从头开始没有任何框架的 Ruby 网页

> ID：13820476
> 
> 赞同：2
> 
> 时间：2012-12-11T12:29:42.280
> 
> 标签：ruby, rack

我正在尝试从头开始学习 ruby​​ for web。我知道 PHP，而且我是 ruby​​ 新手。我不想在一开始就使用任何框架。尝试创建简单的 2 - 3 页练习。我搜索了很多但没有任何示例来从 ruby​​ 和 racks 创建网页并在任何浏览器中运行它。

伙计们，如果您有任何 URL 或在线资料可以开始，请分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:24:04.467

用 Ruby 编写一个简单的 CGI 很容易，但是解释如何超出了 Stack Overflow 的范围。

首先，请阅读 Wikipedia 的[通用网关接口](http://en.wikipedia.org/wiki/Common_Gateway_Interface)文章，以便您对 CGI 必须返回的内容有一个基本的了解。挑选 Perl 示例；你应该能够很容易地弄清楚发生了什么。通读这篇文章并将其内容与代码示例的内容进行比较。

接下来，看看 Ruby 的[CGI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html)模块，因为它会帮助您解析传入的表单信息，并对 URL 和 HTML 进行编码/解码。查看环境变量表，您会看到传入的内容与 Wikipedia 文章中提到的内容相同。接下来，注意`params()`方法，这是您访问表单变量的方式。通过阅读“编写输出”和“生成 HTML”部分来遵循这一点，并在示例中了解一下。那你应该上路了。

完成后，您应该看看[Sinatra](http://www.sinatrarb.com/) gem。这是一个非常好的、易于使用的框架，非常适合一般的 Web 使用，并且在了解了 CGI 的工作原理之后，您将处于了解 Sinatra 为您所做的一切的好地方。此外，我强烈建议将[HAML](http://haml.info/)与 Sinatra 一起使用。它是一种用于生成网页的快捷语言，类似于 ERB，但不那么冗长。

您会发现 PHP 已经使您无需了解使用 CGI 编写“普通”Web 应用程序所需的大量知识。如果您已经知道这些内容，那没关系，但如果您从未编写过较低级别的代码，或者尝试使用不同的语言，那就不好了，因为了解 CGI 层提供了理解整个 HTTPD 堆栈所需的大量知识。一旦您了解了 CGI 层，Sinatra、Rails、Django、Mojolicious 和所有其他框架之类的东西就会突然变得更有意义，并且您会知道何时利用它们或推出自己的框架。而且，PHP 在 HTTP 服务器中的位置也将更加清晰，让您可以更好地挑选适合手头工作的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:33:11.280

这样的事情应该这样做：

[http://www.editrocket.com/articles/ruby_apache_windows.html](http://www.editrocket.com/articles/ruby_apache_windows.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:51:37.280

查看 Ben Scofield 在 RubyConf 2008 上的演讲 -[构建我自己的 Web 框架](http://rubyconf2008.confreaks.com/writing-my-own-web-framework.html)应该让您了解在不使用任何框架的情况下从头开始使用 ruby​​ 构建 Web 应用程序所涉及的内容。

上一个问题的答案也应该会有所帮助：[在 Ruby 中完成 Web 应用程序而不使用任何框架 - 有多难？陷阱？](https://stackoverflow.com/questions/732828/complete-web-apps-in-ruby-without-using-any-frameworks-how-difficult-pitfalls)

# javascript - URL 的标签验证

> ID：13820477
> 
> 赞同：9
> 
> 时间：2012-12-11T12:29:43.997
> 
> 标签：javascript, html, validation

我正在尝试使用 JavaScript 验证 URL，但由于某种原因它不起作用。当有人没有输入任何 URL 时，它会显示如下消息：

> 请输入有效的 URL。（即 http://）

我正在尝试修复它，但无法使其正常工作。

HTML5 中是否有任何允许验证 URL 的技巧？

```
$(document).ready(function() { 
$("#contactInfos").validate( 
 { onfocusout: false, rules: { 
       phone: { number:true }, 
       zipcode: { number:true }, 
       website: {    url:true    } 
 }, 
     messages: { phone: { number:"please enter digit only" }, 
     zipcode: { number:"Plese enter digit only"  }, 
     website: { url: "Please enter valid URL.(i.e. http://)"     } 
   } 

}); 
```

验证 URL 的方法：

```
url: function(value, element) {
      values=value.split(',');
      for (x in values)
      {
          temp=values[x].trim();
  temp1=this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(temp);

      if(temp1!=true)
      {
        return false;
      }
      }
       return true;
}, 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-11T13:23:53.000

在 html5 中，您可以使用标签输入 type="url"：

```
<input type="url" /> 
```

您也可以使用自己的模式：

```
<input type="url" pattern="https?://.+" required /> 
```

在 Uniform Resource Identifier (URI): Generic Syntax [RFC3986] [http://www.ietf.org/rfc/rfc3986.txt](http://www.ietf.org/rfc/rfc3986.txt)一文中，URI 的正则表达式为：

```
^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))? 
```

> 例如，将上面的表达式匹配到
> 
> ```
>  http://www.ics.uci.edu/pub/ietf/uri/#Related 
> ```
> 
> 导致以下子表达式匹配：
> 
> ```
>  $1 = http:
>   $2 = http
>   $3 = //www.ics.uci.edu
>   $4 = www.ics.uci.edu
>   $5 = /pub/ietf/uri/
>   $6 = <undefined>
>   $7 = <undefined>
>   $8 = #Related
>   $9 = Related 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-25T15:53:58.160

没有协议，url 有效是否有意义？

例如，currently`http://google.com`是一个有效的 url，while`google.com`不是。

同样，`http://localhost`is 是有效的 url，while`localhost`不是有效的 url。

# c# - 在 WCF 服务中传递用户定义的参数导致问题

> ID：13820483
> 
> 赞同：0
> 
> 时间：2012-12-11T12:30:07.943
> 
> 标签：c#, .net, wcf

我正在创建一个 wcf 自托管服务。我正在使用 UriTemplate 类来自定义方法的 url。代码片段如下

```
 public interface ISelfService
    {
        [WebInvoke(Method = "POST", UriTemplate = "ack/{errorcode}/{uniquefileid}")]
        [OperationContract]
        void Ack(ErrorCode errorcode, string uniquefileid);

       [WebInvoke(Method = "POST", UriTemplate = "filechanged/{metainfo}")]
       [OperationContract]
       void FileChanged(MetaInformation metainfo);

     } 
```

每当我运行这个程序时，我都会收到以下错误

> 合约“ISelfHostService”中的操作“FileChanged”有一个名为“metainfo”的“Natash.Common.MetaInformation”类型的查询变量，但“Natash.Common.MetaInformation”类型不能被“QueryStringConverter”转换。UriTemplate 查询值的变量必须具有可由“QueryStringConverter”转换的类型

谁能告诉我为什么会这样？

而且，我没有对 web.config 文件进行任何修改。我需要在那里进行任何修改吗？

MetaInformation 定义如下

```
[DataContract]
    public struct MetaInformation
    {
        [DataMember]
        public string Author { get; set; }
        [DataMember]
        public string tags { get; set; }
        [DataMember]
        public string categories { get; set; }
        [DataMember]
        public string description { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:26:58.193

试试这个

`public interface ISelfService{`

 ````
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/ack?errorcode={errorcode}&uniquefileid={uniquefileid}")]
    void Ack(ErrorCode errorcode, string uniquefileid);

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/filechanged")]
    void FileChanged(MetaInformation metainfo);} 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:54:26.050

从您发布的消息看来，MetaInformation 类 ( `Gettrix.Common.MetaInformation`& `Natash.Common.MetaInformation`) 有 2 个定义。

在实例化服务时，可能两者都在 WCF 的范围内。如果是这样，它可能会认为没有 DataContract 属性的那个（可能`Natash.Common.MetaInformation`）是您所引用的，因此不能用于服务内的数据传输。`

# file - Applescript：由applescript创建后在finder窗口中选择（突出显示）文件

> ID：13820485
> 
> 赞同：4
> 
> 时间：2012-12-11T12:30:12.520
> 
> 标签：file, applescript

我最近从 Windows 7 切换。我是 applescript 的（非常）新手。
要通过热键和显示对话框创建新文件，我使用 spark 和我部分找到的以下脚本：

```
try
    tell application "Finder" to set the this_folder ¬
        to (folder of the front window) as alias
on error -- Merci d ouvrir un dossier avec votre finder
    set the this_folder to path to desktop folder as alias
end try

activate
set thefilename to text returned of (display dialog ¬
"Create file named:" default answer "filename.txt")
set thefullpath to POSIX path of this_folder & thefilename
do shell script "touch \"" & thefullpath & "\""

activate application "Finder" 
```

我了解它的作用（除了 shell script touch）。
我成功地在需要时将显示对话框放在前面，然后进入`thefilename`finder 窗口`this_folder`。

我现在正在尝试选择/突出显示新创建的文件（以便在长列表中轻松找到它）。我找到了`open -R`可能是我正在寻找的代码，并尝试在底部应用它：

```
open -R thefilename 
```

和

```
open -R this_folder/thefilename 
```

我尝试重用`thefilename`之前输入的名称变量，但未成功。
我不知道如何指定 open 命令可能显示的文件。

如果我的英语不完美，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:44:54.450

尝试：

```
try
    tell application "Finder" to set the this_folder ¬
        to (folder of the front window) as alias
on error -- Merci d ouvrir un dossier avec votre finder
    set the this_folder to path to desktop folder as alias
end try

set thefilename to text returned of (display dialog ¬
    "Create file named:" default answer "filename.txt")

tell application "Finder"
    set thefullpath to make new file at folder this_folder with properties {name:thefilename}
    select thefullpath
end tell 
```

# android - 无法从远程服务解除绑定

> ID：13820491
> 
> 赞同：2
> 
> 时间：2012-12-11T12:30:31.623
> 
> 标签：android, android-service

我正在开发一个应用程序，该应用程序使用远程服务来执行某些通信和处理任务。该应用程序运行良好，但我在从服务器解除绑定时遇到一些问题，这使应用程序不稳定。该应用程序的架构如下：

在此处查看图片： [https ://docs.google.com/open?id=0B8aFlQkvXrcqbEFhSnRpVzJab3M](https://docs.google.com/open?id=0B8aFlQkvXrcqbEFhSnRpVzJab3M)

如您所见，我创建了一个名为 Device 的类的对象，我在其中启动服务 HealthService，然后该服务启动另一个服务。Device 和 HealthService 之间的通信是通过 AIDL 进行的。HealthService 和 BluetoothService 之间的通信是通过 Message 进行的。

通信工作正常，然后我得到了数据。但是当我想关闭这个通信通道以允许其他设备稍后绑定时，绑定不起作用。这意味着我创建的所有设备都在监听和处理数据，即使我当时没有绑定。它引起了许多我想解决的冲突。

这里有一些代码：

设备（绑定健康服务）：

```
 intent= new Intent("com.signove.health.service.HealthService");
    context.startService(intent);
    context.bindService(intent, serviceConnection, 0); 
```

设备（解除绑定健康服务）：

```
 context.unbindService(serviceConnection);
    Log.w("kill", "Device: Service connection unbinded");
    Log.w("kill", "Device: Binded = " + Boolean.toString(api.asBinder().isBinderAlive())); 
```

isBinderAlive 总是返回 true...

我试图用 stopService 销毁服务，但这会导致崩溃。在服务 onUnbind 被加入。我已经实现，当调用 onUnbind 时，服务会从其他服务中取消绑定以清理所有内容，但它一直在崩溃。

有人可以帮助我吗？:)。如果需要，请询问更多信息。

# tomcat - 为什么Tomcat的线程比后台线程成本更高？

> ID：13820492
> 
> 赞同：0
> 
> 时间：2012-12-11T12:30:32.990
> 
> 标签：tomcat, spring-mvc, asynchronous, threadpool

我参考了以下博客条目：关于 Spring MVC 3.2 异步支持的[博客条目。](http://blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/)

我了解 Tomcat 使用线程池来服务 http/web 请求。此外，上面的文章似乎表明**Spring MVC 异步支持减轻了 Tomcat 的线程池**，并**通过使用后台线程**进行“繁重”操作，从而在 webapp 中实现更好的并发性。

任何人都可以就为什么会这样提供明智的建议吗？**为什么从tomcat线程池中取出的“前端”线程比后台线程成本更高？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:45:43.583

它不是“成本更高”，但它是用于处理传入请求的相对稀缺的资源，因此在其中执行其他类型的繁重工作是禁忌的。

# c#-4.0 - 如何在实体框架中获取 SQL 2008 的下一个主键

> ID：13820493
> 
> 赞同：0
> 
> 时间：2012-12-11T12:30:32.153
> 
> 标签：c#-4.0

我正在使用 Entity Framework 4 连接来连接到 SQL 2008 服务器，以便为我的应用程序进行数据库处理。

我在 Visual Studio 2010 中使用 C#，我的问题是关于由 SQL 本身递增的主键字段，我是否有可能找到数据库接下来将使用的 ID。

我不能只找到最后一个项目和 +1 的原因是因为如果我的表包含项目 1、2、3、4 和 5，删除项目 5 然后添加另一个将使下一个项目成为项目 6，而不是再次成为项目 5（因为我在 SQL 中使用身份规范，但必须使用它）。

我找不到任何方法，例如 Item.ID.GetNextIdentity() 或类似的方法，并且已经查看了许多类似的问题，但无济于事。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:01:04.200

您对此有何看法：

```
var query1=Entities.Select(p=>p.Id).OrderBy(p=>p);
var query2=query1.Select(p=>p+1);
var result=query2.Except(query1).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:57:43.110

看看 Ident_Current('Table_Name')

# c# - 接收GPRS C#的数据包

> ID：13820495
> 
> 赞同：1
> 
> 时间：2012-12-11T12:30:42.607
> 
> 标签：c#

我有一个使用 GPRS 服务的 GSM 设备，并发送信息（数据包），我想要在我的 c# 应用程序上接收这些数据包的解决方案。

我发现套接字编程是这样做的方法，但我想问是否有另一种方法来解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:07:13.503

先生，如果您有静态 IP，那么最好的解决方案是套接字编程，并且您不需要 gsm 或 gprs 调制解调器。

# javascript - 使用 javascript 在网页上编辑图像

> ID：13820510
> 
> 赞同：0
> 
> 时间：2012-12-11T12:31:39.987
> 
> 标签：javascript, jquery, image, image-editing

我正在建立一个网站，我希望用户能够在其中编辑上传的图像——不是复杂编辑（过滤、更正等）的 Photoshop 风格，而只是“简单”的东西，比如在图片上添加一些文本（文本框），或一些行等。

有人知道我可以使用的 jQuery 插件或类似插件吗？

非常感谢，

丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:53:02.943

您可以尝试[http://www.pixastic.com/](http://www.pixastic.com/)但我不确定这是否适用于 IE7

# objective-c - 如何处理成千上万的小音频文件？

> ID：13820516
> 
> 赞同：1
> 
> 时间：2012-12-11T12:32:01.623
> 
> 标签：objective-c, ios

需要实现一个具有播放声音功能的应用程序。每个声音都会是一些单词声音，预期声音的数量大约是一千个。因此，最简单的解决方案是将这些声音存储为声音文件，将每个单词的声音存储在单独的声音文件中，然后按需播放。如此大量的文件会有任何潜在的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:55:20.310

您应该可以在 IPA 中存储 1000 个音频剪辑文件，但重要的是要注意空间要求和组织。

还要考虑到访问磁盘比内存慢的事实，它还占用电池空间，因此将最常用的音频剪辑加载到内存中是理想的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:20:27.863

这么多文件没问题，但它们会占用比它们的总大小更多的空间。每个文件将填满设备上的整个 # 空间块。平均而言，您将浪费半个块（根据经验），除非您的所有文件都明显小于一个块，在这种情况下，您将始终使用 1.000 个块（一个 pr. 文件）并浪费 1000 *（块大小 - 平均文件大小）。

你可以做的事情：

将文件连接成一个大文件，存储每个子文件的开始和长度，将块读入内存或复制到临时文件。

将数据库中的文件作为 BLOB 字段删除，以便于检索。这不会节省空间，但可能会使您的代码更简单或更可靠。

我认为您不需要制作自己的缓存机制。很可能 iOS 有一个系统范围的缓存，它做得更好。只有当您遇到性能问题并且需要更短的加载时间时，这才应该是相关的。在这种情况下，可以考虑使用块来加载和调度播放，因为这是隐藏加载延迟和避免 UI 冻结的更简单方法。

如果您的音频未压缩，App Store 将报告压缩后的大小。如果这与未包装尺寸有很大不同，一些（挑剔的）客户肯定会注意到 ald 抱怨，因为他们认为广告尺寸是安装尺寸。我从个人经验中知道。他们通常不会采用技术答案作为答案，甚至可能会绕过与您交谈，并据此对您投反对票。我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:09:20.497

如果您负担得起，请使用 FMOD，我相信它可以从各种压缩方案中提取音频。如果您只想自己处理所有这些文件，请创建一个 .zip 文件并使用 libz（iOS 库 libs.dylib）即时提取它们。

# java - 使用 static final unmodifiable Set 作为常量来检查变量值

> ID：13820519
> 
> 赞同：7
> 
> 时间：2012-12-11T12:32:06.683
> 
> 标签：java, coding-style

我经常遇到一种验证模式，其中一些变量必须包含前缀数量的值之一才能有效。

```
PSEUDO CODE:
    IF x == CONSTANT_1 || X == CONSTANT_2 || ... || x == CONSTANT_N
    THEN X is valid 
```

为了避免 OR 术语链，我创建了一个静态的最终不可修改集，其中包含所有常量：

```
public final static String CONSTANT_1 = *value* ;
public final static String CONSTANT_2 = *value* ;
...
public final static String CONSTANT_N = *value* ;

public final static Set SET_OF_CONSTANTS = Collections.unmodifiableSet(new HashSet(){
    private static final long serialVersionUID = 1L;
    {
        add(CONSTANT_1); 
        add(CONSTANT_2);
        ...
        add(CONSTANT_3);
    }
}); 
```

我通过以下方式执行检查：

```
if(!SET_OF_CONSTANTS.contains(x)){ 
    //X NOT VALID 
} 
```

我想知道这是否是一种好的编程实践，是否有任何替代方法，以及使用哈希表查询（理论上为 O(1)）而不是 OR 术语链是否可以提高性能，也许还可以代码可读性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T12:44:00.720

总的来说，我认为这是非常好的风格。

没有太大的区别，但我个人会`SET_OF_CONSTANTS`这样定义：

```
 public final static String CONSTANT_1 = "*value*";
      public final static String CONSTANT_2 = "*value*";
              ...
      public final static String CONSTANT_N = "*value*";

      public final static Set<String> SET_OF_CONSTANTS = Collections.unmodifiableSet(
        new HashSet<String>(Arrays.asList(
              CONSTANT_1, 
              CONSTANT_2,
                      ...
              CONSTANT_N
              ))); 
```

我不完全清楚您是否甚至需要单独的`CONSTANT_1`常量，或者您是否可以简单地将值折叠到`SET_OF_CONSTANTS`.

就性能而言，在我根据真实数据分析代码之前，我不会开始优化任何东西。

最后，注意when`x`是一个字符串，下面的可能是不正确的：

```
IF x == CONSTANT_1 || x == CONSTANT_2 || ... || x == CONSTANT_N 
```

在这里，`==`可能应该替换为对 的调用`equals()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-19T12:28:41.093

另一种（较短的）方法是使用 Set.of ：

```
public final static Set SET_OF_CONSTANTS = Collections.unmodifiableSet(
    Set.of(CONSTANT_1, CONSTANT_2, CONSTANT_3)); 
```

# actionscript-3 - 如果孩子的父母有父母，如何访问孩子？

> ID：13820527
> 
> 赞同：1
> 
> 时间：2012-12-11T12:32:34.110
> 
> 标签：actionscript-3, actionscript

我的 actionscript 3.0 有问题

我无法访问孩子（我们称其为孩子 A），其中孩子 A 有一个父 Sprite（称为 sprite B）。并且 Sprite B 有一个父 C（精灵）。

例如：

```
var prBoard:Sprite = new Sprite();
prBoard.name="p";
var spMatrix:Sprite = new Sprite();
spMatrix.name="s";
var tf:TextField = new TextField();

            tf.width = 30;
            tf.height = 20;
            tf.name = "r";
            tf.text= "27";

this.addChild(prBoard);
prBoard.addChild(spMatrix);
spMatrix.addChild(tf); 
```

问题是如何访问 textField tf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:57:01.230

```
trace((((getChildByName("p") as DisplayObjectContainer).getChildByName("s") as DisplayObjectContainer).getChildByName("r") as TextField).text); //27 
```

# android - 在 Android 中管理一组相似的图像

> ID：13820532
> 
> 赞同：0
> 
> 时间：2012-12-11T12:32:58.123
> 
> 标签：android, android-layout

在我的 android 应用程序中，我需要管理相似图像组，如下例所示：

![例子](../Images/0676841444a262aa75d4e104b0698053.png)

组的大小可以不同（4x4、2x2、2x1 等），每个方形元素可以是黑色或绿色。结果视图由给定的算法选择，因此我需要创建具有给定大小和给定元素颜色的图像组，并像单个对象一样管理它（如果可能的话 - 像 single `ImageView`）。做这个的最好方式是什么？有什么方法可以组合图像而不在视图上绘制它们`Canvas`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:14:43.913

您可以使用 GridView 并将 ImageButton/Button 放置在 GridView 的任何位置，并为 Buttons 编写选择器并将其设置为所有 Buttons。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:45:24.637

`GridView`可能是最好的选择。

这是你如何做到的

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);

    GridView gridview=(GridView)this.findViewById(R.id.gridView);

    Integer[] mThumbIds;
    //pass the R.drawable ids to this function using your logic that chooses
    // the black and green etc.

    ImageAdapter myAdapter = new ImageAdapter(this);
    myAdapter.SetImages(mThumbIds);
    gridview.setAdapter(myAdapter);
} 
```

# eclipse - 如何隐藏 RCP 中的默认菜单？

> ID：13820533
> 
> 赞同：3
> 
> 时间：2012-12-11T12:33:05.227
> 
> 标签：eclipse, eclipse-plugin, rcp

我是 Eclipse RCP 插件开发的新手。

我用自己的视角编写了一个插件，并在其中添加了特定于视角的菜单。

我的问题是如何隐藏 Eclipse 中提供的默认菜单，例如 Edit、Navigated、Search、Project ？

我尝试使用'< extension point="org.eclipse.core.expressions.definitions" >'并将我的视图特定条件放在菜单贡献中。

任何帮助表示赞赏。

最好的祝福，

曼达尔·帕塔克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:56:10.083

你需要[活动](http://www.vogella.com/blog/2009/07/13/eclipse-activities/)。我当前项目的示例：

```
<extension
     point="org.eclipse.ui.activities">
  <activity
        id="arm.activity.disabled"
        name="%arm.activity.disabled.name">
     <enabledWhen>
        <with
              variable="selection">
           <count
                 value="-1">
           </count>
        </with>
     </enabledWhen>
  </activity>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        pattern="org\.eclipse\.m2e\..*">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        pattern="org\.eclipse\.search\..*">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        pattern="org\.eclipse\.team\..*">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        pattern="org\.eclipse\.compare.*">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        pattern="org\.eclipse\.help\.ui\.PrefPageHelp.*">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        isEqualityPattern="true"
        pattern="org.eclipse.ui.ide/org.eclipse.ui.preferencePages.Workspace">
  </activityPatternBinding>
  <activityPatternBinding
        activityId="arm.activity.disabled"
        isEqualityPattern="true"
        pattern="org.eclipse.ui.ide/org.eclipse.ui.preferencePages.Perspectives">
  </activityPatternBinding>
</extension> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:37:21.137

一种方法是在您的 rcp 应用程序中，您有一个扩展 ActionBarAdvisor 的类，并且在该类的构造函数中，您可以执行类似的操作，例如删除编辑菜单

```
configurer.getMenuManager().remove(IWorkbenchActionConstants.M_EDIT); 
```

所有常见的 Eclipse 菜单（如编辑）都将在上面的类中定义一个常量，对要从应用程序中删除的菜单执行此操作。

这只是一种方法，我相信可能还有其他方法，但希望这能满足您的需求。

# javascript - 为什么 document.write() 之后的代码没有执行？

> ID：13820535
> 
> 赞同：3
> 
> 时间：2012-12-11T12:33:12.013
> 
> 标签：javascript

我有以下 JavaScript。

```
<html>
    <head>
        <script language="JavaScript">
            function fdivisible()
            {
                document.write("<h1> Just a javascript demo</h1>");
                var x=document.forms["aaa"]["txt1"].value;  
                alert(x);   
            }
        </script>
    </head>
    <body>
        <form action="#" name="aaa">
            Enter a no. : <input type="text" name="txt1" id="txt1" />
            <input type="button" value="Click" onclick="fdivisible();">
        </form>
    </body>
</html> 
```

问题是，JS函数的第一行正在执行，其余的都被忽略了。如果我注释掉第一行，其余的代码就会被执行。谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:35:39.687

因为调用[`document.write`](https://developer.mozilla.org/en-US/docs/DOM/document.write)隐式调用[`document.open`](https://developer.mozilla.org/en-US/docs/DOM/document.open)，它会清除调用它的文档：

> 如果目标中存在文档，则此方法将其清除

调用 后`document.write`，您尝试获取引用的元素不再存在于 DOM 中，并引发错误。如果您查看错误控制台，它应该类似于以下内容：

> `TypeError: Cannot read property 'txt1' of undefined`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T12:34:54.017

[`document.write`](https://developer.mozilla.org/en-US/docs/Web/API/Document/write)只能在文档的初始加载期间使用。

如果你想在调用函数时插入你的 H1，你可以替换

```
document.write("<h1> Just a javascript demo</h1>"); 
```

和

```
var h1 = document.createElement('h1');
h1.innerHTML = " Just a javascript demo";
document.body.appendChild(h1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T12:42:40.260

document.write(content) 将内容写入文档流。

您必须在写入文档后关闭流才能继续加载页面

```
document.write("hello");
document.close(); 
```

*   [https://developer.mozilla.org/en-US/docs/DOM/document.write](https://developer.mozilla.org/en-US/docs/DOM/document.write)
*   [https://developer.mozilla.org/en-US/docs/DOM/document.close](https://developer.mozilla.org/en-US/docs/DOM/document.close)
*   [https://developer.mozilla.org/en-US/docs/DOM/document.open](https://developer.mozilla.org/en-US/docs/DOM/document.open)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T12:36:30.763

除了dystroy答案之外，您还可以替换`document.write`为：

```
document.body.innerHTML += '<h1>Javascript demo</h1> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T12:45:50.490

您正在使用 document.write 调用破坏 DOM。在某些浏览器中，这也会破坏全局变量。

而是使用：

```
var element = document.createElement('h1');
element.appendChild(document.createTextNode('text'));
document.body.appendChild(element); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T12:37:47.590

尝试这个：

```
var x=document.getElementById(txt1).value;
alert(x); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T12:38:07.060

您可以使用以下命令写入文档

```
 document.write("<h1> Just a javascript demo</h1>"); 
```

只有一次，它适用于整个文档。如果要放置，则必须向其添加类/ id，然后将文本放入该类/ id。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-11T12:36:47.720

`document.write()`在所有 JS 语句的末尾使用。该`script`元素永远不会在它之后执行。

# php - PHP XPath 查询：如何理解它们？

> ID：13820538
> 
> 赞同：0
> 
> 时间：2012-12-11T12:33:40.080
> 
> 标签：php, dom, xpath, xpath-2.0

我是 PHP 新手，我刚刚意识到**XPath 查询不是用 PHP 编写的**……对吗？最终我应该学习什么语言来掌握它们？XML？Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:48:01.583

XPath 是它自己的语言。这是一个不错的入门教程：http: [//zvon.org/comp/r/tut-XPath_1.html](http://zvon.org/comp/r/tut-XPath_1.html)

也许您的困惑在于，因为 XPath 是查询 XML 的最简单方法之一，所以许多其他语言具有允许它们使用它的函数和方法。[您可能已经发现，PHP 在其DOM](http://php.net/manual/en/book.dom.php)和[SimpleXML](http://php.net/manual/en/book.simplexml.php)库 中都有与 Xpath 相关的类。

# asp.net-mvc-3 - 如何更改 url 操作的名称

> ID：13820543
> 
> 赞同：0
> 
> 时间：2012-12-11T12:34:27.047
> 
> 标签：asp.net-mvc-3, c#-4.0, dns

在我的网址中，`localhost:45120/Home/Index`我们需要像 stackoverflow 这样的网站名称。

我如何使用 asp.net mvc3 为我们的项目实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:17:47.410

然后，您应该从任何域名托管公司注册一个域名。您将不得不从托管公司购买网络空间并将您的域名重定向到您购买的网络空间的 ip...

```
**EDIT:**

 routes.MapRoute(
                "Can Be anything", // Route name
                "yourpath/{para1}", // URL with parameters[if you want to have any]
                new { controller = "Quote", action = "Index" }, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                ); 
```

# bash - 返回并添加新行而不在 bash 中执行当前命令？

> ID：13820546
> 
> 赞同：3
> 
> 时间：2012-12-11T12:34:50.437
> 
> 标签：bash, command

在 bash 中输入了一个长命令后，出于某种原因，我决定不执行它。但我只是想在没有清除命令的情况下开始一个新行。那个命令还在屏幕上？来人帮帮我？

```
#I typed as below:
$>find -name "filepattern" -exec grep "hello" {} \;

#I wanted as below without executing the 'find' command.
$>find -name "filepattern" -exec grep "hello" {} \;
$> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T13:21:55.357

一个有用的 bash 快捷方式是`Alt``#`注释掉当前命令。

例如：

```
$ find -name "filepattern" -exec grep "hello" {} \; <Alt+#>
$ #find -name "filepattern" -exec grep "hello" {} \; 
$ 
```

我喜欢这个，因为它将命令存储在您的历史记录中。然后您可以返回到它，删除`#`并运行它。随着`Ctrl+C`你失去你写的命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:36:52.940

您可以使用`ctrl``c`“取消”您键入的命令。

我在 OS X 上的测试：

```
bash-3.2$ find -name "filepattern" -exec grep "hello" {} \; <ctrl+c>
bash-3.2$ 

bash-3.2$ /bin/bash -version
/bin/bash -version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)
Copyright (C) 2007 Free Software Foundation, Inc.
bash-3.2$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:40:53.290

一种临时解决方案是在当前行的开头添加一个“#”以将其转换为注释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T05:18:53.707

`ctrl``u`给你一个新的开始。您可以继续使用之前键入的旧命令`ctrl``y`

# asp.net-mvc - 为什么我的 MVC 4 应用程序中带有端口号的 URL 会给我“潜在危险的 Request.Path 值”错误？

> ID：13820550
> 
> 赞同：3
> 
> 时间：2012-12-11T12:34:55.383
> 
> 标签：asp.net-mvc

我已将 MVC 4 应用程序部署到 IIS - url 有一个端口号。该应用程序实际上是从 MVC 3 升级到 MVC 4。当我浏览到应用程序时，我得到了

```
A potentially dangerous Request.Path value was detected from the client (:). 
```

这似乎表明冒号（url 中的端口号是必需的）是问题所在。

我已经尝试将它添加到我的配置中

```
<httpRuntime requestPathInvalidCharacters="" requestValidationMode="2.0" />
<pages validateRequest="false" /> 
```

这没有帮助。

# php - 传递给 Smarty 的 PHP 文件中的变量范围

> ID：13820553
> 
> 赞同：1
> 
> 时间：2012-12-11T12:35:05.930
> 
> 标签：php, arrays, smarty

我想知道为什么在以下示例中未使用字符串连接更新数组。

```
$scripts = array( "jquery.js","bootstrap.min.js",
               "jquery-jvectormap-1.0.min.js",
               "jquery-jvectormap-us-aea-en.js",
               "protoFluid.js");

foreach($scripts as $script)
$script = "/scripts/".$script;                 

$smarty -> assign('scripts',$scripts); 
```

`$scripts[0]`例如，我希望此代码从更改`jquery.js`为`/scripts/jquery.js`. 但是，Smarty 调试控制台显示以下内容。

```
Smarty_Variable Object (3)
->value = Array (5)
0 => "jquery.js"
1 => "bootstrap.min.js"
2 => "jquery-jvectormap-1.0.min.js"
3 => "jquery-jvectormap-us-aea-en.js"
4 => "protoFluid.js"
->nocache = false
->scope = "Smarty root" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:37:45.910

Foreach 正在处理数组的副本，您必须这样做：

```
foreach($scripts as &$script)
    $script = "/scripts/".$script; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:42:46.843

根据之后是否仍需要原始数组，您可以使用`array_map()`创建修改后的副本：

```
$smarty->assign('scripts', array_map(function($script) {
    return "/scripts/$script";
}, $scripts)); 
```

# c# - 在 hyper v 中运行应用程序存在大量性能问题

> ID：13820554
> 
> 赞同：2
> 
> 时间：2012-12-11T12:35:12.977
> 
> 标签：c#, .net, performance, console-application, hyper-v

**更新**：Se 底部：添加了 CreateArticleRelations 代码示例。

好的，这是一个棘手的问题。在预览和生产环境中，我在 hyper-v 中遇到了巨大的性能问题。

首先，这里是设置。

所有服务器上的 .NET 4.0。

**预习**

网络服务器：虚拟机，8gb 内存，4 cpu，windows server 2008 r2 (64)

数据库：虚拟服务器、6gb 内存、2 个 cpu、windows server 2008 r2 (64)

**生产**：

网络服务器：虚拟机，8gb 内存，4 个 cpu，windows server 2008 r2 (64)

数据库：物理机，48 gb 内存，16 cpu，windows server 2008 r2 (64)

这是一个在这些上运行的 B2B 商店。当为一种产品运行集成时，结果让我大吃一惊。我会提供图片。

在预览中运行一个产品需要：83 秒才能更新所有内容。在生产中运行一种产品需要 301 秒 (!) 才能更新所有内容。同款产品！

如果我在本地运行它，大约需要 40 秒才能完成。

我已经在两台服务器上运行了 dotTrace 远程分析，以实际查看需要时间的内容。我使用 EnterpriseLibrary 进行日志记录，使用 umbraco 进行 cms 和 uCommerce 作为商务平台。请看下面我看到的一个发现的图片示例。

![在此处输入图像描述](../Images/e55e8dd5ee07067d0085225767ed6d6d.png)

首先，CreateArticleRelations 在生产服务器上需要 140 秒，但在预览版上只需要 46 秒。相同的产品，相同的数据。然后是真正时髦的东西。在顶部的生产站点上，我们看到企业日志记录需要 64 秒，但在预览运行时，它的速度已经下降，因此甚至不能说它完全没有时间。

日志记录的实现如下所示。

```
 private string LogMessage(string message, int priority, string category, TraceEventType severity, int code, int skipFrames = 2)
  {
     //Check if "code" exists in eCommerceB2B.LogExceptions
     var dbf = new ThirdPartSources();
     var exeptions = dbf.GetLogExeptions();
     foreach (var exeption in exeptions)
     {
        if (code.ToString() == exeption)
           return DateTime.Now.ToString();
     }

     try
     {
        var stack = new StackTrace(skipFrames);

        if (_logWriter.IsLoggingEnabled())
        {
           var logEntry = new LogEntry
                              {
                                 Title =
                                     stack.GetFrame(0).GetMethod().ReflectedType.FullName + " " +
                                     stack.GetFrame(0).GetMethod(),
                                 Message = message,
                                 Priority = priority,
                                 Severity = severity,
                                 TimeStamp = DateTime.Now,
                                 EventId = code
                              };

           logEntry.Categories.Add(category);

           _logWriter.Write(logEntry);

           return logEntry.TimeStampString;
        } 
```

日志记录设置为滚动平面文件和数据库。我试图禁用日志记录并节省了大约 20 秒，但 LogMessage 仍然位于顶部。

这几天让我大吃一惊，我似乎无法找到解决方案。当然我可以完全删除日志记录，但我不想找到问题的原因。

令我困扰的是，例如在生产服务器上运行一种方法 (CreateArticleRelations) 所需的时间几乎是其 4 倍。cpu 级别永远不会超过 30 %，并且 5 gb 内存可用。这些应用程序作为控制台应用程序运行。

有人请救救我！:) 如果需要，我可以提供更多数据。我敢打赌，这与虚拟服务器有关，但我不知道要检查什么。

**更新：**

根据评论，我尝试完整地注释掉 LogMessage。它总共节省了大约 100 秒，这告诉我有些事情是非常错误的。仍然需要 169 秒来创建关系，而在预览中需要 46 秒，并且在预览中日志记录仍处于启用状态。企业库使其以这种方式运行可能有什么问题？而且，为什么我的代码在生产服务器上运行速度要慢 4 倍？删除 LogMessage 后的图像。它来自生产。

![在此处输入图像描述](../Images/bdc739c3db473c4c9e0387f01005f4a0.png)

创建文章关系

```
 private void CreateArticleRelations(Product uCommerceProduct, IStatelessSession session)
    {
        var catalogues = _jsbArticleRepository.GetCustomerSpecificCatalogue(uCommerceProduct.Sku).CustomerRelations;
        var defaultCampaignName = _configurationManager.GetValue(ConfigurationKeys.UCommerceDefaultCampaignName);
        var optionalArticleCampaignName = _configurationManager.GetValue(ConfigurationKeys.UCommerceDefaultOptionalArticleCampaignName);

        var categoryRelations =
            session.Query<CategoryProductRelation>()
                .Fetch(x => x.Category)
                .Fetch(x => x.Product)
                .Where(
                    x =>
                    x.Category.Definition.Name == _customerArticleCategory && x.Product.Sku == uCommerceProduct.Sku)
                .ToList();

        var relationsAlreadyAdded = _categoryRepository.RemoveCataloguesNotInRelation(catalogues, categoryRelations,
                                                                                      session);

        _categoryRepository.SetArticleCategories(session, relationsAlreadyAdded, uCommerceProduct, catalogues,
                                                 _customerCategories, _customerArticleCategory,
                                                 _customerArticleDefinition);

        //set campaigns and optional article
        foreach (var jsbArticleCustomerRelation in catalogues)
        {
            // Article is in campaign for just this user
            if (jsbArticleCustomerRelation.HasCampaign)
            {
                _campaignRepository.CreateCampaignAndAddProduct(session, jsbArticleCustomerRelation, defaultCampaignName);
            }
            else // remove the article from campaign for user if exists
            {
                _campaignRepository.DeleteProductFromCampaign(session, jsbArticleCustomerRelation, defaultCampaignName);
            }

            // optional article
            if(jsbArticleCustomerRelation.IsOptionalArticle) 
            {               
                _campaignRepository.CreateCampaignAndAddProduct(session, jsbArticleCustomerRelation, optionalArticleCampaignName);
            }
            else
            {
                _campaignRepository.DeleteProductFromCampaign(session, jsbArticleCustomerRelation, optionalArticleCampaignName);
            }
        }            
    } 
```

我们以某种方式几乎在每一行上都访问了数据库。例如，在 DeleteProductFromCampaign 中，以下代码在预览环境中需要 43 秒，在生产环境中需要 169 秒。

```
 public void DeleteProductFromCampaign(IStatelessSession session, JSBArticleCustomerRelation jsbArticleCustomerRelation, string campaignName)
    {
        var productTarget =
            session.Query<ProductTarget>()
                   .FirstOrDefault(
                       x =>
                       x.CampaignItem.Campaign.Name == jsbArticleCustomerRelation.CustomerNumber &&
                       x.CampaignItem.Name == campaignName &&
                       x.Sku == jsbArticleCustomerRelation.ArticleNumber);

        if (productTarget != null)
        {
            session.Delete(productTarget);
        }
    } 
```

因此，例如，此代码在生产服务器上的运行速度要慢 4 倍。服务器之间最大的区别是生产（物理）服务器设置了许多实例，而我正在使用其中一个（20 gb om ram）。

# c# - 如何计算弹簧圈圈数？

> ID：13820556
> 
> 赞同：2
> 
> 时间：2012-12-11T12:35:13.947
> 
> 标签：c#, image-processing, emgucv, image-segmentation

参考：[如何检测和计算螺旋的匝数](https://stackoverflow.com/questions/13563880/c-sharp-wpf-emgu-how-to-detect-and-count-a-spirals-turns)

即使在基于像素的计算中，我也无法计算。

如果我附上了图片，如何开始计算圈数。

我试过 FindContours(); 但并没有完全隔离它不能隔离的轮次。matchshape() 我也有相似因子，但对于整个线圈。

所以我尝试如下轮数：

```
 public static int GetSpringTurnCount()
        {
            if (null == m_imageROIed)
                return -1;
            int imageWidth = m_imageROIed.Width;
            int imageHeight = m_imageROIed.Height;

            if ((imageWidth <= 0) || (imageHeight <= 0))
                return 0;

            int turnCount = 0;

            Image<Gray, float> imgGrayF = new Image<Gray, float>(imageWidth, imageHeight);

            CvInvoke.cvConvert(m_imageROIed, imgGrayF);

            imgGrayF = imgGrayF.Laplace(1); // For saving integer overflow.

            Image<Gray, byte> imgGray = new Image<Gray, byte>(imageWidth, imageHeight);
            Image<Gray, byte> cannyEdges = new Image<Gray, byte>(imageWidth, imageHeight);

            CvInvoke.cvConvert(imgGrayF, imgGray);

            cannyEdges = imgGray.Copy();

            //cannyEdges = cannyEdges.ThresholdBinary(new Gray(1), new Gray(255));// = cannyEdges > 0 ? 1 : 0;
            cannyEdges = cannyEdges.Max(0);

            cannyEdges /= 255;

            Double[] sumRow = new Double[cannyEdges.Cols];
            //int sumRowIndex = 0;
            int Rows = cannyEdges.Rows;
            int Cols = cannyEdges.Cols;
            for (int X = 0; X < cannyEdges.Cols; X++)
            {
                Double sumB = 0;

                for (int Y = 0; Y < cannyEdges.Rows; Y ++)
                {
                    //LineSegment2D lines1 = new LineSegment2D(new System.Drawing.Point(X, 0), new System.Drawing.Point(X, Y));

                    Double pixels = cannyEdges[Y, X].Intensity;

                    sumB += pixels;

                }
                sumRow[X] = sumB;
            }

            Double avg = sumRow.Average();

List<int> turnCountList = new List<int>();

            int cnt = 0;
            foreach(int i in sumRow)
            {
                sumRow[cnt] /=  avg;
                if(sumRow[cnt]>3.0)
                turnCountList.Add((int)sumRow[cnt]);
                    cnt++;
            }
            turnCount = turnCountList.Count();

 cntSmooth = cntSmooth * 0.9f + (turnCount) * 0.1f;
            return (int)cntSmooth;
    } 
```

![在此处输入图像描述](../Images/8fdafcaa2997fe58bdd0d0be37c3ad5d.png)

我接下来尝试冲浪。

====================================================

编辑：添加样本。如果你喜欢就去做。 ![在此处输入图像描述](../Images/e30eabee6cded02c6c8ebc7fe184fedd.png) ![在此处输入图像描述](../Images/f83e4a804dffae380513f88c34129e11.png) ![在此处输入图像描述](../Images/b519b020b44f3b9b134d709681f57128.png) ![在此处输入图像描述](../Images/5fbee3af995167a3117e9afc5d36f017.png) ![在此处输入图像描述](../Images/202b9581b37c534d525c3a43f53416a6.png) ![在此处输入图像描述](../Images/1dca30298d9a2b2bfb37831c0cf85a61.png)

====================================================

编辑：尝试了另一个算法：

1.  ROI 然后旋转（最大的细浅蓝色矩形）
2.  GetMoments() 使用该时刻缩小 ROI 高度和 position.Y。
3.  使用空白图像设置缩小的 ROI 和 ._And()。（带有绿色矩形的灰色区域）
4.  将图像切成两半。
5.  轮廓和拟合椭圆。
6.  获得最大拟合椭圆数。

稍后将致力于更好的算法和结果。

![在此处输入图像描述](../Images/7b984bde452302ecce6483f945baf940.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:16:34.800

假设较大的白色簇是春天

- 编辑 -

1.  对图片应用逆阈值并使用洪水填充算法填充角落。
2.  使用 findContours 和 minAreaRect 找到最大白色簇的旋转边界框
3.  跟踪盒子长轴，执行以下操作
4.  对于沿轴轨迹轴线垂直穿过当前像素的每个像素
5.  这条线将至少在两点上穿过弹簧。
6.  找到与轴距离较大的点
7.  这将在类似于正弦函数的点上创建集合
8.  计算此集合的峰值或簇，这将获得两倍的循环数。

所有这一切都假设您在图片中没有高噪点。

# java - 如何在java gae中处理多个html5输入

> ID：13820566
> 
> 赞同：0
> 
> 时间：2012-12-11T12:35:57.503
> 
> 标签：java, html, google-app-engine, apache-commons-fileupload

我在 GAE 上有一个处理表单的 httpservlet。表单有一个按钮。在 servlet 中，我使用 apache.commons.fileupload 来处理单个文件上传，但我不知道如何处理多个文件数组......任何帮助表示赞赏。

形式：

```
<form id="fileupload" action="/Save" method="Post" enctype="multipart/form-data">
    <input name="title" type=text />
    <textarea name="info"></textarea>
    <input type="file" name="files[]" multiple>
    <input id="save" type="submit" value="Save this">
</form> 
```

小服务程序：

```
FileItemIterator iter = upload.getItemIterator(req);
while (iter.hasNext()) {
    FileItemStream item = iter.next();
    String name = item.getFieldName();
    InputStream stream = item.openStream();
    if (item.isFormField()) {
        System.out.println("Form field " + name + " with value "
            + Streams.asString(stream) + " detected.");
    } else {
        // name here will be "files[]"
        System.out.println("File field " + name + " with file name "
        + item.getName() + " detected."); 
        //MY NONWORKING ATTEMPT AT HANDLING THE FILES[] ARRAY: <- this is my question, how to do this?
        Object files[] = Streams.copy(stream);
        for(int i = 0; i < files.size(); i++){
            String fileType = files[i].getContentType();
            Blob imageBlob = new Blob(Files[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:38:25.587

您正在尝试从 one 获取所有文件`FileItemStream`，而实际上每个`FileItemStream`文件都是它自己的文件。

```
// INSERT THIS INSTEAD OF YOUR NONWORKING PART
String filename = item.getName();
String contentType = item.getContentType();
int len;
byte[] buffer = new byte[8192];
while ((len = stream.read(buffer, 0, buffer.length)) != -1) 
    // here save the buffer to blobstore
} 
```

要将数据保存到 blobstore，请参阅如何[使用新的 Files API 保存到 blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。

# sed - 使用 sed 或 awk 删除行

> ID：13820568
> 
> 赞同：4
> 
> 时间：2012-12-11T12:35:59.057
> 
> 标签：sed, awk

我有一个像这样的文件 data.txt 。

```
>1BN5.txt
207
208
211
>1B24.txt
88
92 
```

我有一个包含文本文件的文件夹 F1。

F1文件夹中的1BN5.txt文件如下图所示。

```
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C 
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C  
ATOM    422  C   SER A 248      70.124 -29.955   8.226  1.00 55.81           C 
ATOM    615  H   LEU B 208       3.361  -5.394  -6.021  1.00 10.00           H
ATOM    616  HA  LEU B 211       2.930  -4.494  -3.302  1.00 10.00           H 
ATOM    626  N   MET B  87       1.054  -3.071  -5.633  1.00 10.00           N  
ATOM    627  CA  MET B  87      -0.213  -2.354  -5.826  1.00 10.00           C 
```

F1文件夹中的1B24.txt文件如下所示。

```
ATOM    630  CB  MET B  87      -0.476  -2.140  -7.318  1.00 10.00           C 
ATOM    631  CG  MET B  88      -0.828  -0.688  -7.575  1.00 10.00           C
ATOM    632  SD  MET B  88      -2.380  -0.156  -6.830  1.00 10.00           S
ATOM    643  N   ALA B  92      -1.541  -4.371  -5.366  1.00 10.00           N  
ATOM    644  CA  ALA B  94      -2.560  -5.149  -4.675  1.00 10.00           C 
```

我只需要 1BN5.txt 文件中包含 207,208,211（第 6 列）的行。我想删除 1BN5.txt 文件中的其他行。像这样，我只需要 1B24.txt 文件中包含 88,92 的行。

```
Desired output 
```

1BN5.txt 文件

```
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C 
ATOM    615  H   LEU B 208       3.361  -5.394  -6.021  1.00 10.00           H  
ATOM    616  HA  LEU B 211       2.930  -4.494  -3.302  1.00 10.00           H 
```

1B24.txt 文件

```
ATOM    631  CG  MET B  88      -0.828  -0.688  -7.575  1.00 10.00           C
ATOM    632  SD  MET B  88      -2.380  -0.156  -6.830  1.00 10.00           S
ATOM    643  N   ALA B  92      -1.541  -4.371  -5.366  1.00 10.00           N 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:38:45.833

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk data.txt 
```

内容`script.awk`：

```
/^>/ {
    file = substr($1,2)
    next
}

{
    a[file][$1]
}

END {

    for (i in a) {

        while ( ( getline line < ("./F1/" i) ) > 0 ) {

            split(line,b)

            for (j in a[i]) {

                if (b[6]==j) {

                    print line > "./F1/" i ".new"
                }
            }
        }

        system(sprintf("mv ./F1/%s.new ./F1/%s", i, i))
    }
} 
```

或者，这是单线：

```
awk '/^>/ { file = substr($1,2); next } { a[file][$1] } END { for (i in a) { while ( ( getline line < ("./F1/" i) ) > 0 ) { split(line,b); for (j in a[i]) if (b[6]==j) print line > "./F1/" i ".new" } system(sprintf("mv ./F1/%s.new ./F1/%s", i, i)) } }' data.txt 
```

* * *

* * *

如果您有旧版本的`awk`, 早于`GNU Awk 4.0.0`，您可以尝试以下操作。像这样运行：

```
awk -f script.awk data.txt 
```

script.awk 的内容：

```
/^>/ {
    file = substr($1,2)
    next
}

{
    a[file]=( a[file] ? a[file] SUBSEP : "") $1
}

END {

    for (i in a) {

        split(a[i],b,SUBSEP)

        while ( ( getline line < ("./F1/" i) ) > 0 ) {

            split(line,c)

            for (j in b) {

                if (c[6]==b[j]) {

                    print line > "./F1/" i ".new"
                }
            }
        }

        system(sprintf("mv ./F1/%s.new ./F1/%s", i, i))
    }
} 
```

或者，这是单线：

```
awk '/^>/ { file = substr($1,2); next } { a[file]=( a[file] ? a[file] SUBSEP : "") $1 } END { for (i in a) { split(a[i],b,SUBSEP); while ( ( getline line < ("./F1/" i) ) > 0 ) { split(line,c); for (j in b) if (c[6]==b[j]) print line > "./F1/" i ".new" } system(sprintf("mv ./F1/%s.new ./F1/%s", i, i)) } }' data.txt 
```

* * *

* * *

请注意，此脚本完全按照您的描述进行。它期望像`1BN5.txt`和一样`1B24.txt`的文件驻留在`F1`当前工作目录的文件夹中。它还将覆盖您的原始文件。如果这不是所需的行为，请挂断`system()`电话。HTH。

结果：

内容`F1/1BN5.txt`：

```
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C 
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C  
ATOM    615  H   LEU B 208       3.361  -5.394  -6.021  1.00 10.00           H
ATOM    616  HA  LEU B 211       2.930  -4.494  -3.302  1.00 10.00           H 
```

内容`F1/1B24.txt`：

```
ATOM    631  CG  MET B  88      -0.828  -0.688  -7.575  1.00 10.00           C
ATOM    632  SD  MET B  88      -2.380  -0.156  -6.830  1.00 10.00           S
ATOM    643  N   ALA B  92      -1.541  -4.371  -5.366  1.00 10.00           N 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:41:17.977

不要尝试从现有文件中删除行，尝试创建一个仅包含您想要的行的新文件：

```
cat 1bn5.txt | awk '$6 == 207 || $6 == 208 || $6 == 211 { print }' > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:36:18.870

假设 gnu awk，从包含以下内容的目录运行此命令`data.txt`：

```
awk -F">" '{if($2 != ""){fname=$2}if($2 == ""){term=$1;system("grep "term" F1/"fname" >>F1/"fname"_results");}}' data.txt 
```

这会解析`data.txt`文件名和搜索词，然后`grep`从内部调用`awk`以将列出的每个文件和词的匹配项附加到被调用`data.txt`的新文件中。`F1``originalfilename.txt_results`

如果要完全替换原始文件，则可以运行以下命令：

```
grep "^>.*$" data.txt | sed 's/>//' | xargs -I{} find F1 -name {}_results -exec mv F1/{}_results F1/{} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:47:47.390

此解决方案使用记录分隔符玩了一些技巧：“data.txt”`>`用作记录分隔符，而其他文件使用换行符。

```
awk '
    BEGIN {RS=">"}
    FNR == 1 {
        # since the first char in data.txt is the record separator, 
        # there is an empty record before the real data starts
        next
    }
    {
        n = split($0, a, "\n")
        file = "F1/" a[1]
        newfile = file ".new"
        RS="\n"
        while (getline < file) {
            for (i=2; i<n; i++) {
                if ($6 == a[i]) {
                    print > newfile
                    break
                }
            }
        }
        RS=">"
        system(sprintf("mv \"%s\" \"%s.bak\" && mv \"%s\" \"%s\"", file, file, newfile, file))
    }
' data.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T12:47:37.557

这会将 F1 中的所有文件移动到名为“backup”的 tmp 目录，然后仅在 F1 下重新创建生成的非空文件

```
mv F1 backup &&
mkdir F1 &&
awk '
NF==FNR {
   if (sub(/>/,"")) {
      file=$0
      ARGV[ARGC++] = "backup/" file
   }
   else {
      tgt[file,$0] = "F1/" file
   }
   next
}
(FILENAME,$6) in tgt {
   print > tgt[FILENAME,$6]
}
' data.txt &&
rm -rf backup 
```

如果您也想要空文件，这是一个微不足道的调整，如果您想保留备份目录，只需在最后摆脱`"&& rm.."`（无论如何在测试期间这样做）。

编辑：仅供参考，在这种情况下，您可能会认为 getline 的情况并不完全不正确，因为它解析的第一个文件在结构和意图上与其余文件完全不同，因此解析该文件与其他文件不同是不会的以后引起任何维护头痛：

```
mv F1 backup &&
mkdir F1 &&
awk -v data="data.txt" '
BEGIN {
   while ( (getline line < data) > 0 ) {
      if (sub(/>/,"",line)) {
         file=line
         ARGV[ARGC++] = "backup/" file
      }
      else {
         tgt[file,line] = "F1/" file
      }
   }
}
(FILENAME,$6) in tgt {
   print > tgt[FILENAME,$6]
}
' &&
rm -rf backup 
```

但是正如您所看到的，它使脚本更加复杂（尽管效率稍高，因为现在主体中没有对 FNR==NR 的测试）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T12:44:16.057

绝对是一份工作`awk`：

```
$ awk '$6==207||$6==208||$6==211 { print }' 1bn5.txt
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C 
ATOM    421  CA  SER A 207      68.627 -29.819   8.533  1.00 50.79           C  
ATOM    615  H   LEU B 208       3.361  -5.394  -6.021  1.00 10.00           H
ATOM    616  HA  LEU B 211       2.930  -4.494  -3.302  1.00 10.00           H 

$ awk '$6==92||$6==88 { print }' 1B24.txt
ATOM    631  CG  MET B  88      -0.828  -0.688  -7.575  1.00 10.00           C
ATOM    632  SD  MET B  88      -2.380  -0.156  -6.830  1.00 10.00           S
ATOM    643  N   ALA B  92      -1.541  -4.371  -5.366  1.00 10.00           N 
```

重定向以保存输出：

```
$ awk '$6==207||$6==208||$6==211 { print }' 1bn5.txt > output.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T14:34:08.073

我不认为你一个人可以做到这一点`sed`。您需要一个循环来读取您的文件 data.txt。例如，使用`bash`脚本：

```
#!/bin/bash

# First remove all possible "problematic" characters from data.txt, storing result
# in data.clean.txt. This removes everything except A-Z, a-z, 0-9, leading >, and ..
sed 's/[^A-Za-z0-9>\.]//g;s/\(.\)>/\1/g;/^$/d' data.txt >| data.clean.txt

# Next determine which lines to keep:
cat data.clean.txt | while read line; do
   if [[ "${line:0:1}" == ">" ]]; then
      # If input starts with ">", set remainder to be the current file
      file="${line:1}"
   else
      # If value is in sixth column, add "keep" to end of line
      # Columns assumed separated by one or more spaces
      # "+" is a GNU extension, so we need the -r switch
      sed -i -r "/^[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +$line +/s/$/keep/" $file
   fi
done

# Finally delete the unwanted lines, i.e. those without "keep":
# (assumes each file appears only once in data.txt)
cat data.clean.txt | while read line; do
   if [[ "${line:0:1}" == ">" ]]; then
      sed -i -n "/keep/{s/keep//g;p;}" ${line:1}
   fi
done 
```

# php - Symfony：从模块/操作获取路由名称

> ID：13820570
> 
> 赞同：0
> 
> 时间：2012-12-11T12:36:02.597
> 
> 标签：php, symfony-1.4

在`routing.yml`

```
Login:
  url:   /login
  param: { module: access, action: login } 
```

然后我有：

```
$module = 'access';
$action = 'login'; 
```

我想获取路由名称？？// 登录

类似`getRoutingName($module, $action)`return的东西`"login"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:35:03.837

您正在寻找的*几乎* [`getRouteThatMatchesParameters`](http://trac.symfony-project.org/browser/branches/1.4/lib/routing/sfPatternRouting.class.php#L482)是. 它为一些参数（模块、操作和查询字符串）找到了一个路由。

这是从模块和操作名称中检索路由名称的快速片段：

```
$routes = $this->getContext()->getRouting()->getRoutes();
foreach ($routes as $name => $route)
{
  if ($route->matchesParameters(array('module' => 'access', 'action' => 'login'), $this->getContext()))
  {
    var_export($name);
    break;
  }
} 
```

当心。我放`break`是因为它可以检索多个路由（例如它通常会返回默认路由（通常是`/:module/:action/*`））。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-11T12:44:22.353

`$currentRoute = $this->getContext()->getRouting()->getCurrentInternalUri(false);`

# android - 如何根据已完成工作的百分比对 ImageView 进行着色

> ID：13820575
> 
> 赞同：3
> 
> 时间：2012-12-11T12:36:33.663
> 
> 标签：android

在我的应用程序中`ImageView`，我已经设置了背景图像，现在根据完成的工作百分比完成某些工作后，我想显示`ImageView`阴影的一部分，我的意思是说如果完成了 20% 的工作部分我想要对 20% 的图像视图进行着色，同样在 50% 的工作上我想显示 50% 的`ImageView`阴影

那怎么办呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:00:40.390

您可以覆盖`onDraw()`您`ImageView`在其顶部绘制一个大小等于 的半透明矩形，`ImageView`其宽度是进度的函数。

# css - 如何删除 Internet Explorer 中按钮的默认 onclick 和活动效果？

> ID：13820576
> 
> 赞同：0
> 
> 时间：2012-12-11T12:36:35.857
> 
> 标签：css, internet-explorer

在 Internet Explorer 9 中单击带有 html 的按钮时：

```
<fieldset class="this_fieldset">
<p style="display:inline">title:</p>
<button class="styled_buttons" data-filter=".1">all</button>
<button class="styled_buttons" data-filter=".1.2">2</button>
<button class="styled_buttons" data-filter=".1.3">3</button>
<button class="styled_buttons" data-filter=".1.4">4</button>
<button class="styled_buttons" data-filter=".1.5">5</button>
<button class="styled_buttons" data-filter=".1.6">6</button>
<button class="styled_buttons" data-filter=".1.7">7</button>
</fieldset> 
```

按钮上的文本会移动，并且按钮上会出现（并保持）边框。

我怎样才能消除这些效果（它们没有出现在 chrome 和 ff 中）。

谢谢你。

更新：请求的当前css：

```
fieldset.this_fieldset {
float: left;
} 
```

和

```
.styled_buttons {
background: none repeat scroll 0 0 #CCCCCC;
border: 1px solid #000000;
border-radius: 5px 5px 5px 5px;
color: #FFFFFF;
height: 23px;
padding: 2px 10px;
}

/* for firefox only */
@-moz-document url-prefix() {
.styled_buttons {
padding: 2px 5px;
}
}

.styled_buttons:hover {
cursor: pointer;
} 
```

# php - Mercury 邮件服务器 Chash

> ID：13820577
> 
> 赞同：0
> 
> 时间：2012-12-11T12:36:41.083
> 
> 标签：php, email

我有一个 PHP（使用 xamp）应用程序来进行医疗预约，每天早上都会向每个有预约的患者发送邮件。我通过 Mercury Mail Server 发送邮件。在 Windows 7 上运行。我的问题是运行几天（如一周）后，水银裂缝，并且 Windows 显示“内存不足”错误。该计算机是全新的 athlon 2 x2 250，具有 4gb 内存 en 500gb。服务器每天发送的邮件数量不多，最多100封。谁能帮我 ？或推荐其他邮件服务器？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:47:11.330

分页文件大小可能是个问题。您可以尝试增加页面文件大小并检查吗？另一个可能的原因可能是其中一个进程正在泄漏句柄。如果句柄计数频繁增加（每隔几秒左右），您可以从任务管理器中检查这一点。

# php - 在具有原始高度的div，iframe，框架内显示跨域页面？

> ID：13820578
> 
> 赞同：7
> 
> 时间：2012-12-11T12:36:40.817
> 
> 标签：php, css, iframe, cross-domain

我创建了一个页面，其中显示*了一个网站页面*（位于 web 上的某个位置）；

我使用了*iframe*，但对高度问题感到困惑，我只解决了 950px 的宽度问题，`css3`但我需要**作为目标网站的全高，**但这不适用于*跨域页面*（我已经成功处理了相同的域）。

现在我想通过`PHP`using`get_file_content()`或其他方式将其放入 div`iframe`或`frames`任何工作中（**并且页面必须可以从主要站点访问**）

容器将通过单击超链接更改其内容。

请帮我解决问题。我尝试了更多方法，包括**jquery**、**js**、**php**、**css** 和 blah blah blah ，但没有成功。

在评论或回答之前，请访问[此链接](http://www.bing.com/images/search?q=Hanukkah&view=detail&id=4C72782A5D36074B1DA0CAEEC89F84A9EDD30C35&first=1)

**[我需要这样](http://www.bing.com/images/search?q=Hanukkah&view=detail&id=4C72782A5D36074B1DA0CAEEC89F84A9EDD30C35&first=1)**的东西****

 ****请检查并更改此处** [查看我的页面单击此处](http://communique-isite.com/ipg/default1.htm)

**笔记：**

1.  我无法访问目标站点，因此无法将属性放在目标页面上并返回 iframe 页面。

2.  我有 100 多页要展示，所以无法使用特定的方法，我需要任何通用技术。

3.  我不想在我的页面中滚动的另一件事。

**所做的努力：**

[阿贾克斯/jQuery](https://stackoverflow.com/questions/9963799/ajax-jquery-load-webpage-content-into-a-div-on-page-load)

[PHP 调整大小](https://stackoverflow.com/questions/525992/resize-iframe-height-according-to-content-height-in-it)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:13:39.280

在“iframe'd” html 中，有：

```
<body onload="parent.resize_iframe(document.body.scrollHeight)"> 
```

在 iframe 的页面中：

```
<script type="text/javascript">
    function resize_iframe(new_height) {
        document.getElementById('iframed').style.height =   parseInt(new_height, 10) + 60 + 'px';
    }
</script> 
```

我使用 60px 来修复潜在的填充等。

请注意，它们必须在同一个域下才能正常工作，否则您可能必须运行：

```
<script type="text/javascript">
    document.domain =   "domain.com";
</script> 
```

在一个或两个上。这是必需的，以便浏览器可以在它们之间进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:49:04.967

做这样的事情：

```
<frameset rows="*">
    <frame frameborder=0 src="http://www.discountautoparts.com/" scrolling="auto" noresize>
</frameset> 
```

如果你这样做，它应该看起来像这张[图片](http://f.cl.ly/items/2h2e13150u1K373n1E2Z/Screen%20shot%202012-12-11%20at%207.47.53%20AM.png)**

# asp-classic - 经典asp多按钮点击

> ID：13820579
> 
> 赞同：2
> 
> 时间：2012-12-11T12:36:44.407
> 
> 标签：asp-classic

我有2个asp页面。

*   反馈_管理_更新.asp
*   反馈_管理.asp

我的 HTML 表单：

```
<form ACTION="Feedback_Administration_Update.asp" METHOD=POST NAME="form">
  <input type="button" value="Submit" onclick="javascript:Checkit();" name="btnSubmit">
  <input type="reset" value="Reset" onclick="javascript:document.location=location">
  <input type="button" value="Send Response to Requester" name="btnSubmit" onclick="javascript:Checkit();"/>
</form> 
```

Feedback_Administration_Update.asp 文件中的代码：

```
dim buttonPressed
buttonPressed=Request.Form("btnSubmit")
select case buttonPressed
    case "Submit"
        'update database code 
        Response.Redirect "feedback_administration.asp?ID=" & regEx.Replace((request.form("ID")), "''") & "&lstPages=" & Trim(Request("lstPages")) & "&view=" & Request("view")& "&strSuccess1=" &"Success"
    case "Send Response to Requester"
        'mail  task code 
End Select 
```

我不确定他们为什么不点击任何按钮。

当我点击提交页面时，它应该更新代码，当我点击提交*发送响应给请求者*时，它应该发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:06:09.093

按钮输入的值不会发送到服务器。你需要使用普通的提交按钮，并且有验证码你可以取消他们的 onclick 事件：

```
<input type="submit" value="Submit" onclick="return Checkit();" name="btnSubmit" />
<input type="submit" value="Send Response to Requester" name="btnSubmit" onclick="return Checkit();" /> 
```

要使其工作，请以两种方式更改您的 JavaScript 函数。首先，不要让它提交表单，其次让它`true`在成功验证后返回，`false`否则，例如：

```
function Checkit() {
    //validate your stuff..
    if ([all is good]) {
        //don't submit the form here, the submit button will do that.
        return true;
    }

    //indicate that something was wrong, cancel form submission:
    return false;
} 
```

将其放置在适当的位置将导致`Request.Form("btnSubmit")`保持所需的值。

# android - Android：带有 android 头像的对话框

> ID：13820581
> 
> 赞同：1
> 
> 时间：2012-12-11T12:36:50.000
> 
> 标签：android, facebook

我有一个自定义对话框，我试图在其中加载带有 Facebook 个人资料图像的对话框，下面的名称是我的代码

```
public void postToWall(String message) {
    String fbUser="";

    try {
        JSONObject me = new JSONObject(facebook.request("me"));
        String id=me.getString("id");

        ImageView picture;
        fbUser = me.getString("name");
        TextView usr = (TextView)findViewById(R.id.textView1);
        picture = (ImageView) findViewById(R.id.imageView4);
        URL image_value= new URL("http://graph.facebook.com/" + fbUser + "/picture" );
        Bitmap profPict=BitmapFactory.decodeStream(image_value.openConnection().getInputStream());
        picture.setImageBitmap(profPict);
        usr.setText(fbUser);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
} 
```

我创建了自定义对话框而不是 fb 提要对话框，在发布时我想要对话框中的用户图像和名称，代码对我来说似乎没问题，但不知道我哪里出错了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:20:25.563

问题解决了..在这一行做错了 URL image_value= new URL("http://graph.facebook.com/" + id+ "/picture" ); 以前我在 url 中使用用户名而不是 id ...

# javascript - 刷新 Datatable 数据而不重新加载整个页面

> ID：13820587
> 
> 赞同：2
> 
> 时间：2012-12-11T12:37:11.690
> 
> 标签：javascript, jquery, ajax, datatables

我正在使用 codeigniter 在数据表上加载数据，在数据表上，每一行都有一个链接，当点击数据时，该链接将发送到其他地方。该特定行中的数据应消失，仅保留未单击的链接。我已经设法用 AJAX 做到了，但成功后我被迫在 jQuery 超时时重新加载页面

样本：

```
//Table headers here
<tbody class="tablebody">
    <?php foreach ($worksheets as $sheets) : ?> 
        <tr>
            <td><?php echo $sheets->filename ?></td>
            <td class="bold assign">
                <?php echo $sheets->nqcl_number ?>&nbsp;&nbsp;&nbsp;
                <?php echo anchor('assign/assing_reviewer/' . $sheets->nqcl_number, 'Assign') ?>
                <a id="inline" href="#data">Assign1</a>
                <input type="hidden" id="labref_no" value="<?php echo $sheets->nqcl_number; ?>" />
            </td>
            <td><?php echo $sheets->uploaded_by ?></td>
            <td><?php echo $sheets->datetime_uploaded ?></td>
            <td></td>                        
        </tr>
    <?php endforeach; ?>
</tbody> 
```

我希望在 AJAX 成功时，链接所在的数据表行会从表中动态删除，而无需刷新页面。

```
$.ajax({
    type: "POST",
    url: "<?php echo base_url(); ?>assign/sendSamplesFolder/" + labref,
    data: data1,
    success: function(data) {
        var content = $('.tablebody');
        $('div.success').slideDown('slow').animate({opacity: 1.0}, 2000).slideUp('slow');
        $.fancybox.close();
        //Reload the table data dynamically in the mean time i'm refreshing the page
        setTimeout(function() {
            window.location.href='<?php echo base_url();?>Uploaded_Worksheets';
        }, 3000);
        return true;
    },
    error: function(data) {
        $('div.error').slideDown('slow').animate({opacity: 1.0}, 5000).slideUp('slow');
        $.fancybox.close();
        return false;
    }
}); 
```

我已经尝试过了，但它加载了两个相同的页面。解决方法是什么？

```
 content.load(url); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:55:39.227

您可以使用`fnDraw()`强制数据表重新查询数据源。尝试这个：

```
// store a reference to the datatable
var $dataTable = $("#myTable").dataTable({ /* Your settings */ });

// in the AJAX success:
success: function(data) {
    $dataTable.fnDraw();
}, 
```

阅读文档中[的](http://datatables.net/api)`fnDraw`条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T04:41:54.747

```
var $dataTable = $("#myTable").dataTable({ /* Your settings */ });

var oSettings = $dataTable.fnSettings();

var page = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength);

$dataTable.fnPageChange(page); 
```

# html - Codeigniter 电子邮件 - 样式标签/css 不起作用

> ID：13820595
> 
> 赞同：4
> 
> 时间：2012-12-11T12:37:56.333
> 
> 标签：html, css, codeigniter, email

我正在尝试将特定 div 的 innerhtml 发送到电子邮件（在 Codeigniter 框架中）。

我使用 jquery 获得了 div 的内部 html，并使用 ajax 将数据传输到控制器。

邮件有效，但我的问题是 html 类、样式标签（我在视图文件 html 中编写的内联样式除外）、样式表不起作用。

有什么方法可以将我的`style.css`文件添加到电子邮件内容中？即使标签正常工作，我也会没事的，这是我在本`<head>`节开头放置的。

请帮忙，这是我的代码。

**将 html 传输到控制器的 Ajax 代码：**

```
<script type="text/javascript">
    $(function() {
  $('#sendmail').click(function(e) {

        e.preventDefault();
        $.ajax({
              url:'<?php echo site_url();?>/welcome/send',
              type:'POST',
              data:{'message':$('#body').html(),'subject':'Subject of your e-mail'},
              success:function(data) {
                    alert('You data has been successfully e-mailed');
                    alert('Your server-side script said: ' + data);
              }
        });
  });
});

</script> 
```

**控制器中的代码** public function send() {

```
 $nome = $this->input->post('message');

           $config = array(
            'protocol' => 'smtp',
            'smtp_host' => 'send.one.com',
            'smtp_port' => '2525',
            'smtp_user' => 'akhil.ns@cymose-tech.com',
            'smtp_pass' => 'akhil123',
            'charset' => 'utf-8',
            'wordwrap' => TRUE,
            'mailtype' => 'html'
        );
        $this->load->library('email', $config);

        $this->email->set_newline("\r\n");
        $this->email->from('akhil.ns@cymose-tech.com', 'The Wanderers');
        $this->email->to('shabasy002@gmail.com');

        $this->email->subject('The Wanderers Proforma Invoice ');

        $formatedMessag ='';

    $formatedMessag = '<html><head><link rel="stylesheet" type="text/css" href="http://localhost/study/extra/style.css"></head><body><style type="text/css">p{color:#cccccc;font-weight:bold;}</style>';
        $formatedMessag .= $nome.'</body></html>';

        $this->email->message($formatedMessag);

        if ($this->email->send()) {

            echo $formatedMessag;

            }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:20:45.060

据我所知，没有电子邮件客户端允许为 HTML 电子邮件加载外部样式表。

最终，这意味着您必须在文档头部声明样式，例如

```
<head>
    <style>
        body { background: black; color: white; }
    </style>
</head> 
```

然而，一些电子邮件客户端（嗯，几乎只是 Outlook）甚至不允许在文档头部定义一些样式，这意味着像这样的内联样式：

```
<body style="background: black; color: white;"></body> 
```

（我里面的一点点刚刚死了）

甚至在 HTML 电子邮件中使用内联 CSS 也存在许多问题，因为一些客户端（同样主要是 Outlook）不支持像浮动这样的简单 CSS 功能。这最终意味着您必须使用表格对时事通讯进行编码，以确保它适用于大多数人。

有关更多信息，请参阅这篇文章（或只是谷歌）： [http ://www.sitepoint.com/code-html-email-newsletters/](http://www.sitepoint.com/code-html-email-newsletters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:05:19.603

问题实际上是您只能使用`inline`和`internal`css，这意味着您可以在元素内部定义所有 css 规则，例如

```
<td style="padding:10px;"><b style="color:red;">Texty</b></td> 
```

或在`<head></head>`您的电子邮件文档中：

```
<head>
    <style>
        b {color:red;}
        td { padding:10px; }
    </style>
</head> 
```

# android - 每 5 分钟启动一次 Android 服务

> ID：13820596
> 
> 赞同：17
> 
> 时间：2012-12-11T12:38:01.953
> 
> 标签：android, service, alarmmanager, timertask

我在互联网上搜索了过去 2 天，但找不到任何有用的教程。我已经创建了一项服务，并在服务启动时在状态栏中发送通知。我希望该服务在显示通知后停止，并在 5 分钟后重新启动。如果可能，请告诉我，如果您有任何有用的教程，请告诉我。我听说过`TimerTask`并且`AlarmManager`我也尝试使用它们，但我无法获得预期的结果。

**编辑：**即使我的应用程序没有运行，我也需要每 5 分钟启动一次服务。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T12:49:28.823

您不想使用 a `TimerTask`，因为这取决于您的应用程序是否连续运行。一个`AlarmManager`实现使您的应用程序在执行之间被杀死是安全的。

说您尝试使用`AlarmManager`但没有得到想要的结果并不是一个有用的陈述，因为它不会告诉任何人如何帮助您获得正确的结果。表达发生的事情会更有用。

[http://web.archive.org/web/20170713001201/http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/](http://web.archive.org/web/20170713001201/http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/)包含关于`AlarmManager`. 以下是要点：

1）您的警报将`Intent`在到期时触发。由您决定应该采用哪种方式`Intent`以及如何实施。我提供的链接有一个基于广播接收器的完整示例。

2）您可以通过以下示例安装警报：

```
public void setOnetimeTimer(Context context) {
    AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
    intent.putExtra(ONE_TIME, Boolean.TRUE);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + (1000 * 60 * 5), pi);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-12-28T11:05:06.927

下面我提供了三个文件，MainActivity.java 用于启动服务，第二个文件 MyService.java 提供 5 分钟服务，第三个文件是清单文件。

## MainActivity.java

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        startService(new Intent(this, MyService.class)); //start service which is MyService.java
    }
} 
```

## 我的服务.java

```
 public class MyService extends Service {

    public static final int notify = 300000;  //interval between two services(Here Service run every 5 Minute)
    private Handler mHandler = new Handler();   //run on another Thread to avoid crash
    private Timer mTimer = null;    //timer handling

    @Override
    public IBinder onBind(Intent intent) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    @Override
    public void onCreate() {
        if (mTimer != null) // Cancel if already existed
            mTimer.cancel();
        else
            mTimer = new Timer();   //recreate new
        mTimer.scheduleAtFixedRate(new TimeDisplay(), 0, notify);   //Schedule task
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mTimer.cancel();    //For Cancel Timer
        Toast.makeText(this, "Service is Destroyed", Toast.LENGTH_SHORT).show();
    }

    //class TimeDisplay for handling task
    class TimeDisplay extends TimerTask {
        @Override
        public void run() {
            // run on another thread
            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    // display toast
                    Toast.makeText(MyService.this, "Service is running", Toast.LENGTH_SHORT).show();
                }
            });
        }
    }
} 
```

## AndroidManifest.xml

```
 <service android:name=".MyService" android:enabled="true" android:exported="true"></service> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-11T12:42:34.373

创建一个`Timer`对象并给它一个`TimerTask`执行您想要执行的代码的对象。

```
Timer timer = new Timer ();
TimerTask hourlyTask = new TimerTask () {
    @Override
    public void run () {
        // your code here...
    }
};

// schedule the task to run starting now and then every hour...
timer.schedule (hourlyTask, 0l, 1000*60*60);   // 1000*10*60 every 10 minut 
```

使用 Timer 对象的优点是它可以处理多个 TimerTask 对象，每个对象都有自己的计时、延迟等。您还可以通过将 Timer 对象声明为类来启动和停止计时器变量什么的。

# python - 在 python 中，如何强制 scipy.signal 中的 lfilter 处理整数

> ID：13820602
> 
> 赞同：1
> 
> 时间：2012-12-11T12:38:17.317
> 
> 标签：python, filter, signal-processing

我有一些我想模拟的 VHDL 代码。它使用整数 FIR 系数并执行整数加法。我使用的系数是从 scipy.signal.firwin 重新调整的。我在我的真实硬件中看到了一些干扰，这些干扰来自过滤器，我想在 python 中模拟。

然而，Python 用于 lfilter 浮点运算，这并不是我所需要的。我只需要整数算术，使用舍入来获得最接近的整数并通过滤波器传播信号。

有这样的功能还是我必须自己做？

谢谢

.d。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:26:17.337

[numpy.convolve](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html)怎么样？

这是一个使用过滤器添加前两个样本的简单示例。

```
signal, coeffs = np.array([1,2,3,4,5]), np.array([1, 1])
output = np.convolve(signal, coeffs, mode='valid') 
```

结果：

```
array([3, 5, 7, 9]) 
```

请注意，输出比输入短一点，因为`mode=valid`开关避免在数据不足的情况下计算样本。您可以尝试不同的开关以获得边缘效果所需的行为。

此函数可能会在内部计算浮点数，然后舍入为整数。正如您所意识到的，这对最终答案没有影响。但是，如果您的目标是节省计算时间，您应该检查整数输入实际上是否比浮点输入更快。我敢打赌是的。

# php - php包含路径Windows 7 wampserver

> ID：13820603
> 
> 赞同：0
> 
> 时间：2012-12-11T12:38:19.640
> 
> 标签：php, windows-7-x64

我在 Windows 7 机器上有一个 php 环境。我想添加 php 包含路径。我从以下文件夹运行所有 php 应用程序：

> c:\wamp\www（后跟我正在开发的应用程序的文件夹）

请协助，我是php新手，还有很多东西要学。

> if(!defined('PHPWORD_BASE_PATH')) { define('PHPWORD_BASE_PATH', dirname( **FILE** ) . '/'); 需要 PHPWORD_BASE_PATH 。'PHPWord/Autoloader.php'; PHPWord_Autoloader::Register();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:47:45.127

如果您的包含在同一个文件夹中..

`<? include "file.php"; ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:55:06.060

如果您的包含文件在同一个文件夹中，您需要写为

```
<? include "file.php"; ?> 
```

如果它是您需要使用的内部文件夹

```
<? include "foldername/file.php"; ?> 
```

如果它在一个文件夹中，您需要使用

```
<? include "../file.php"; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:56:22.657

假设您的脚本是`c:\wamp\www\myscript\index.php`，而您的其他文件是`c:\wamp\www\myscript\something_else.php`.

然后，您可以使用以下任何一种：

```
<? include("c:\wamp\www\myscript\something_else.php"); ?>
<? include("something_else.php"); ?> 
```

如果两个文件都在同一个文件夹中，则最后一个有效。

# jquery - 如何使用 jquery 验证引擎插件在单个字段上调用 jquery 验证函数

> ID：13820604
> 
> 赞同：2
> 
> 时间：2012-12-11T12:38:24.657
> 
> 标签：jquery, jquery-validation-engine

我正在使用[Position Absolute 的 jQuery Validation Engine 插件](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)，尝试提交表单，但对 jQuery 还是很陌生。

我需要在提交表单之前进行额外检查（即检查用户名是否唯一）但是用户名可能是唯一的，但同时违反了其上设置的自定义验证，因此在这种情况下会出现两条消息：“仅限字母“表单验证引擎，以及我的函数中的“用户名可用”，这没有意义。

所以简而言之，我想确保在做一些额外的事情之前验证某个字段。例如

```
if ($(selector).is_valid_using_validation_engine) {
    //do some stuff        
}​ 
```

有什么帮助吗？

# java - 通过序列化检索对象

> ID：13820606
> 
> 赞同：0
> 
> 时间：2012-12-11T12:38:42.310
> 
> 标签：java, string, object, serialization

我正在尝试序列化一个引用另一个对象作为实例变量的对象。我遵循常见的方式，但是我无法在 main() 方法中检索第二个对象（它是不可序列化的）。这是我的代码：

```
 public class Car {

String type;
int speed;

public Car(String s, int v){
    type = s;
    speed = v;
} 
```

}

```
public class Employee implements Serializable {

String name;
int Id;
transient Car car;

public Employee(String s, int i, Car c){
    name = s;
    Id = i;
    car = c;
}

private void writeObject(ObjectOutputStream os){
    try {
        os.defaultWriteObject();
        os.writeObject(car);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void readObject(ObjectInputStream is){
    try {
        is.defaultReadObject();
        car = (Car)is.readObject();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

在主要方法中：

```
public static void main(String[] args) {

    Car c = new Car("noType", 100);
    Employee e = new Employee("Aris", 1, c);

    try {
        FileOutputStream fo = new FileOutputStream("save.txt");
        ObjectOutputStream out = new ObjectOutputStream(fo);
        out.writeObject(e);
        out.close();
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    try {
        FileInputStream fi = new FileInputStream("save.txt");
        ObjectInputStream in = new ObjectInputStream(fi);
        Employee emp = (Employee) in.readObject();     // Comment
        System.out.println(emp.car.speed);
        in.close();
    }catch (ClassNotFoundException e1) {
        e1.printStackTrace();
    } 
    catch (IOException e1) {
        e1.printStackTrace();
    }
} 
```

在第二个 try 块的“Comment”行上，它会抛出一个 nullPointerException。它不能以这种方式保存 Car 对象。我应该怎么做才能克服它？我当然希望 Car 类保持不可序列化。如果更喜欢保存 Car 对象的实例变量并借助它们及其构造函数重新创建它，我该如何保存（和检索）String 属性？

**更新：**

尝试仅保存 int 实例变量时，它可以工作。这次的相关方法是：

```
private void writeObject(ObjectOutputStream os){
    try {
        os.defaultWriteObject();
        os.writeInt(car.speed);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void readObject(ObjectInputStream is){
    try {
        is.defaultReadObject();
        car = new Car("theNew", is.readInt());
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

但我的问题仍然是如何（或是否）我可以保存整个对象。毕竟我没有设法保存和检索字符串。WriteString()、ReadString() 方法不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:48:41.693

线

```
car = (Car)is.readObject(); 
```

是错的。汽车不可序列化。

解决方案：

1.  使汽车可序列化，并删除该行

2.  使用仅可串行化的 MyCar 对象用于 ser/deser，并从 MyCar 创建汽车，参见第 3 点。

3.  创建一辆新车：car = new Car(); 但是从哪里获取数据呢？（见第 2 点）

4.  使用 os.writeObject() 和原语，例如 os.writeInt() 逐一序列化汽车的字段；

5.  使用您自己的自定义序列化，使用 DataOutputStream

**更新**您的更新问题的答案

String 是一个对象，你用 os.writeObject(car.type); 序列化它
另请参阅使用解决方案 4 的[ObjectOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)
代码：

```
private void writeObject(ObjectOutputStream os){
    try {
        os.defaultWriteObject();
        os.writeObject(car.type);
        os.writeInt(car.speed);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void readObject(ObjectInputStream is){
    try {
        is.defaultReadObject();
        String type = (String) is.readObject();
        int speed = is.readInt();
        this.car = new Car(type, speed);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# c# - 当我单击下拉列表中的项目时如何显示 GridView

> ID：13820608
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:38:46.523
> 
> 标签：c#, asp.net

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList1.AutoPostBack = true;
    Class1 cc = new Class1();
    string k = DropDownList1.SelectedItem.Text;
    DataTable l = cc.table1(k);
    GridView g = new GridView();
    g.DataSource = l;
    g.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:40:07.453

您需要设置`AutoPostBack=true` `before` `DropDownList1_SelectedIndexChanged`以使其有效。如果 AutoPostBack 之前未设置为 true，则 DropDownList1_SelectedIndexChanged 将永远不会被触发。

您可以`AutoPostBack=true`在设计时在 page_load 事件中设置。

# asp-classic - 如果达到 PageCount，则从第一页开始（ASP Classic）

> ID：13820610
> 
> 赞同：0
> 
> 时间：2012-12-11T12:38:47.887
> 
> 标签：asp-classic

我有一个活动服务器页面，显示当天的预订。我将 PageSize 设置为 2，因此如果有更多记录，我的显示器每边仅显示 2 个预订。所以实际上我的记录集中有 8 个预订，所以我的 ASP 创建了 4 个页面。

我写了以下函数：

```
Function getNext10(num)

getNext10 = CurrPage + 1

End Function 
```

最后，我在元标记中调用该函数，以自动更改页面：

```
<meta http-equiv="refresh" content="10;URL=paging.asp?PageNo=<% Response.Write(getNext10(CurrPage))%>" /> 
```

它就像魅力一样工作。但我还有一个问题。如果我这样做，PageNo 将无限增加。我的页数是 4。

所以我在我的函数中需要一个逻辑来检查是否达到了 PageCount。如果是，那么他应该再次从第一页开始，如果不是，则增加直到达到 pagecount。

有人可以帮我吗？谢谢！！

编辑：

我写了那个函数：

```
Function getNext10(num)

 getNext10 = num

 if getNext10 < i then  // In `i`, i have my pagecount (4), which i got from Recordset.PageCount
                        // I checked it with Response.Write()
 getNext10 = CurrPage + 1

 End if

 End Function 
```

如果我使用`i`if 子句不起作用，我不知道为什么。只有当我直接使用数字时它才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:26:42.190

如果您知道页码将始终为 4，那么您可以进行检查。

```
Function getNext10(num)
   if (num < i) then
      CurrPage = num + 1
   else
      CurrPage = 1 'Reset the page count
   end if
   'Updating the variable used to call the page iterator
   getNext10 = CurrPage
End Function 
```

如果您并不总是知道页码，那么您将需要以某种方式计算页数以进行检查。

# oracle - oracle 合并性能

> ID：13820612
> 
> 赞同：1
> 
> 时间：2012-12-11T12:38:55.740
> 
> 标签：oracle, merge

```
MERGE INTO table1 t1
USING 
    (SELECT column1 
     FROM table2 join table3 on... 
     WHERE table2.column5 = 'xyz') t2
ON (t1.column1 = t2.column1 AND t1.column2 =  somevalue 
AND t1.column3 = someothervalue)
WHEN not matched 
THEN 
INSERT ... 
```

“on”部分将拒绝大多数行，但合并是否首先查询“using”内的所有行？在这种情况下，该部分大部分时间将无用运行，因为 95% 的行将不匹配**t1.column2 = somevalue AND t1.column3 = someothervalue**。还是甲骨文足够聪明，不会那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:01:36.290

是的，Oracle 将重写查询以将 table1 连接到使用视图查询。因此，如果`t1.column2 = somevalue AND t1.column3 = someothervalue`是选择性的并且 Oracle 意识到了这一点，您应该在计划中看到查询将从 TABLE1 驱动，然后连接到使用视图中的表中。只需运行一个解释计划来检查它。IE

```
set linesize 200 pagesize 200
explain plan for
merge....;
select * from table(dbms_xplan.display()); 
```

您应该会看到 Oracle 已经为您完成了这项工作。

例如：

```
SQL> create table table1(id number primary key, t2_id number, str varchar2(20), notes varchar2(20));

Table created.

SQL> create table table2(id number primary key, notes varchar2(20));

Table created.

SQL>
SQL> insert into table1
  2  select rownum, rownum, case mod(rownum, 100) when 0 then 'ONE' else 'TWO' end, null
  3  from dual connect by level <=1000000;

1000000 rows created.

SQL>
SQL> insert into table2
  2  select rownum, dbms_random.string('x', 10)
  3  from dual connect by level <=1000000;

1000000 rows created.

SQL>
SQL> create index table1_idx on table1(str);

Index created.

SQL> exec dbms_stats.gather_table_stats(user, 'TABLE1', method_opt=>'for all indexed columns size skewonly');

PL/SQL procedure successfully completed.

SQL> exec dbms_stats.gather_table_stats(user, 'TABLE2');

PL/SQL procedure successfully completed. 
```

所以生病添加`t1.str = 'ONE'`时非常有选择性：

```
SQL> explain plan for
  2  merge into table1 t1
  3  using (select * from table2 t where t.id > 1000) t2
  4  on (t2.id = t1.t2_id and t1.str = 'ONE')
  5  when matched then update
  6  set t1.notes = t2.notes;

Explained.

SQL> @explain ""

Plan hash value: 2050534005

---------------------------------------------------------------------------------------------
| Id  | Operation                      | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------------------------
|   0 | MERGE STATEMENT                |            |   441 | 11025 |   929   (5)| 00:00:12 |
|   1 |  MERGE                         | TABLE1     |       |       |            |          |
|   2 |   VIEW                         |            |       |       |            |          |
|*  3 |    HASH JOIN                   |            |   441 | 12348 |   929   (5)| 00:00:12 |
|*  4 |     TABLE ACCESS BY INDEX ROWID| TABLE1     |   441 |  5733 |    69   (2)| 00:00:01 |
|*  5 |      INDEX RANGE SCAN          | TABLE1_IDX |  8828 |       |    21   (0)| 00:00:01 |
|*  6 |     TABLE ACCESS FULL          | TABLE2     |   994K|    14M|   848   (4)| 00:00:11 |
-------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   3 - access("T"."ID"="T1"."T2_ID")
   4 - filter("T1"."T2_ID">1000)
   5 - access("T1"."STR"='ONE')
   6 - filter("T"."ID">1000) 
```

您可以看到它在 table1 上应用了索引

```
INDEX RANGE SCAN          | TABLE1_IDX 
```

因此删除了在 table1 上扫描的大量行（考虑到我的表，哈希连接更合适，但在您的情况下，您可能会在连接步骤中看到嵌套循环方法）。

# jsf - JSF2 ui：在开发阶段重复空指针异常

> ID：13820613
> 
> 赞同：2
> 
> 时间：2012-12-11T12:39:00.063
> 
> 标签：jsf, jsf-2, nested, el, uirepeat

我有一个问题（没什么大不了的，但想看看其他人是否看过），我的结构如下所示：

```
<ui:repeat var="categoria"
value="#{newsletterPage.categoriasNewsletter}" varStatus="it">
    boring code...
    <ui:repeat
        value="#{newsletterPage.getOportunidadesPremium(categoria)}"
        var="trio">
        boring code...
    </ui:repeat> 
```

categoria 是枚举列表 categoriasNewsletter 中的一个枚举，对于每个类别，我都需要从 getOportunidadesPremium(categoria) 获取一些数据。

该错误恰好发生在 getOportunidadesPremium 上，因为不知何故，当 categoria 作为参数传递时，它在方法内为 null。有趣的故事是这仅在使用开发阶段时为空，如果是生产阶段一切都很好，只需更改：

```
 <context-param>
          <param-name>javax.faces.PROJECT_STAGE</param-name>
         <param-value>Production</param-value>
    </context-param> 
```

我正在使用 primefaces 3.4 和

```
 <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.10</version>
    </dependency>

    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
    </dependency>

    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.10</version>
    </dependency> 
```

我不是要求修复它，因为我想一定是一个 api 问题（在生产中它将是生产），只是想知道你是否见过这样的事情。

谢谢。

# asp.net - 使用 Epplus 和 Service.svc 时遇到问题

> ID：13820615
> 
> 赞同：0
> 
> 时间：2012-12-11T12:39:05.113
> 
> 标签：asp.net, web-services, wsdl, epplus

我有一个带有 Service.svc 文件的网站，我使用 Add New Item -> AJAX-enabled WCF Service 创建了它，几周以来，一切正常。今天，我导入了 EPplus.dll 来生成一些 excel 文件。当我尝试编译时出现此错误

```
Error   1   Reference.svcmap: 
Failed to generate code for the service reference 'QUAY.Tractebel.COP.Servicos'.
Cannot import wsdl:portType  Detail: An exception was thrown while running a WSDL import extension:
System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Type 'OfficeOpenXml.ExcelRangeBase' is a recursive collection data contract which is not supported. 
Consider modifying the definition of collection 'OfficeOpenXml.ExcelRangeBase' to remove references to itself.  
XPath to Error Source: //wsdl:definitions[@targetNamespace='']/wsdl:portType[@name='Servicos']  App_WebReferences/QUAY/Tractebel/COP/Servicos/ 
```

我不知道如何解决它，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:39:39.213

在引用我使用的自定义 wcf 类时遇到了同样的问题。奇怪的问题是在我的旧开发电脑（windows vista 32bit，visual studio 2010）上我没有遇到这个问题，它只在我的新系统（windows 8 64bit）中弹出。呸。

但是，我绕过了打开 App_WebReferences 的问题->“您的服务名称”-> 右键单击​​依赖的参考图标->“配置服务参考”

在此屏幕中，将选项按钮从“在所有引用的程序集中重用类型”移动到“在指定的程序集中重用类型”并检查所有依赖库，除了 EPPlus

编译并...瞧

如果有人也有逻辑解释，我很乐意听

# java - 在使用 Java 的 WebDriver 的文本文件中输入的数值会被自动删除

> ID：13820616
> 
> 赞同：1
> 
> 时间：2012-12-11T12:39:06.583
> 
> 标签：java, webdriver, selenium-webdriver

我正在使用带有 java 的 Webdriver。我想使用 Java 在文本字段中输入一些数值。我正在使用以下代码：

```
driver.findElement(By.id("igtxtctl00_MasterPlaceHolder_WTxtZip")).sendKeys("25025"); 
```

但输入完数值后，输入的数值会被自动清除。存储值后，我必须单击选项卡（使用脚本），以便在运行后端进程后自动填充 City 字段。

我通过使用下面的代码使用 Selenium RC 实现了同样的事情：

```
selenium.typeKeys("igtxtctl00_MasterPlaceHolder_WTxtZip", "25025");
Thread.sleep(x);
selenium.keyPress("igtxtctl00_MasterPlaceHolder_WTxtZip", "9"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:42:58.657

通过检查您的代码，我看到有基于该 zip 元素的客户端逻辑。有一个回发到服务器以确定城市。回发的触发器是 tab 键。

这意味着如果你想有效地测试你的页面，你必须发送 tab 键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:36:25.910

尝试这样的事情

```
driver.findElement(By.id("igtxtctl00_MasterPlaceHolder_WTxtZip")).sendKeys("25025"); 
```

输入邮政编码后，尝试单击页面中的其他位置

```
driver.findElement(By.id("igtxtctl00_MasterPlaceHolder_WTxtZip")).sendKeys(Keys.TAB); 
```

或者

尝试使用[Actions](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)类。

```
new Actions(driver).sendKeys(driver.findElement(By.id("igtxtctl00_MasterPlaceHolder_WTxtZip")), "").perform(); 
```

# android - 图像在 Android 中显示

> ID：13820624
> 
> 赞同：-2
> 
> 时间：2012-12-11T12:39:33.460
> 
> 标签：android, image

我有图像列表。我想要的是，当用户单击其中一张图像时，它应该看起来类似于下图。用户可以看到背景模糊的大图像，用户可以通过滑动手指来更改此图像（与活动更改相同）。当用户按下后退按钮时，它应该被取消。在安卓中可以吗？我希望你能理解我的问题。 ![在此处输入图像描述](../Images/ecdb6a5d53c754fd6059a02fb6fcf019.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:49:48.827

是的，您必须定义一个自定义对话框，然后在需要时打开它。您可以为滑动手指或您正在寻找的任何其他东西编码。

[在此处](http://www.mkyong.com/android/android-custom-dialog-example/)制作和显示自定义对话框，作为对您的一些指导，使用图像视图，您必须[在此处](http://android-journey.blogspot.com/2010/01/android-gestures.html)或[此处使用手势检测器](http://coderzheaven.com/2011/03/using-gestures-in-androida-simple-example/)

足够的 ？？

# cakephp - CakePHP 通过 ExceptionRenderer 对视图输出中的 HTML 实体进行了不必要的编码

> ID：13820625
> 
> 赞同：0
> 
> 时间：2012-12-11T12:39:35.910
> 
> 标签：cakephp, cakephp-2.0

我正在尝试通过扩展 ExceptionRenderer 在 CakePHP 2.0 中创建自定义 404 页面。一切工作正常，除非我在 View Cake 中输出 HTML 标记字符串时对 HTML 实体进行了不必要的编码。我怎样才能防止这种情况发生？

在我的渲染器中，我有：-

```
class AppExceptionRenderer extends ExceptionRenderer {
    public function missingController($error) {
        $this->controller->set('test', '<p>Test</p>');
        header('HTTP/1.1 404 Not Found');
        $this->controller->render('/Errors/error404', 'default');
        $this->controller->set('title_for_layout', 'Page Not Found');
        $this->controller->response->send();
    }
} 
```

在视图中（View/Error/error404.ctp）：-

```
<?php echo $test ?> 
```

这输出`&lt;test&gt;`而不是`<p>test</p>`.

在我的实际代码`test`中，将由数据库中的内容设置，因为这是一个 CMS 驱动的站点。我只是`test`以上面的渲染器代码为例（并证明代码的行为与我观察到的一样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:53:08.903

您不应该在 PHP 中使用 HTML，您应该在视图文件中编写任何标记。

我没有遇到过需要在 PHP 代码中编写标记的情况，但是如果您没有其他方法可以解决它，您始终可以[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php)在视图中使用该函数。

不幸的是，我不知道如何阻止 Cake 像你想要的那样自动对其进行编码。

# visual-c++ - SSE 指令给出错误

> ID：13820629
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:39:38.830
> 
> 标签：visual-c++, sse

我正在使用以下代码使用 SSE 将所有 int 数组元素与常数因子相除。

```
void sse_div(int *arr,int num_shift,int N) // devide all array elements by 2
{
         num_shift=1;
     int nb_iters = N / 4;    
     __declspec(align(32))int *a1=arr;

      __m128i* l = (__m128i*)a1;  
     for (int i = 0; i < nb_iters; ++i, ++l)
          _mm_store_si128( l, _mm_srai_epi32(*l,num_shift)); //Error line

} 
```

但我收到以下错误

![在此处输入图像描述](../Images/bdd0ae06832dada3b37738420aebe15a.png)

我无法摆脱这个问题。任何人都可以帮助解决这个问题。任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:36:56.960

由于您的输入数组显然未对齐，您可以使用未对齐的加载/存储，例如：

```
void sse_div(int *arr, int N)     // divide all array elements by 2
{
    for (int i = 0; i < nb_iters; i += 4)
    {
        __m128i v = _mm_loadu_si128(&arr[i]);
        v = _mm_srai_epi32(v, 1);
        _mm_storeu_si128(&arr[i], v);
    }
} 
```

请注意，使用未对齐的加载/存储可能会对性能造成重大影响（取决于您正在运行的 CPU），因此如果可能，您应该`arr`在分配内存时使您的数组 16 字节对齐。

# mongodb - 在 Log 中显示 Mongodb 查询投影

> ID：13820630
> 
> 赞同：0
> 
> 时间：2012-12-11T12:39:40.750
> 
> 标签：mongodb, mongodb-.net-driver

**（更新）**

我想在日志中查看查询中使用的字段限制（投影），而不仅仅是查询本身，这样我就可以准确地看到请求的内容。我在配置文件中设置了“vvvv=true”和“verbose=true”，所以给出了一个shell查询；

```
db.col.find({},{Name:1}).count() 
```

然后我可以在日志中看到这个；

```
command: {"count":"col, query:{_id:23}, fields: {Name: 1.0}}} 
```

但是，以下查询不会。

```
db.col.find({_id:23},{Name:1}) 
```

当我`Fields.Include`在`MongoCursor`.

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:13:37.840

MongoD 服务器当前不记录投影。在我们的 JIRA 中有一张票：[https](https://jira.mongodb.org/browse/SERVER-3129) ://jira.mongodb.org/browse/SERVER-3129——如果你想表明这对你很重要，请投票给它。

# motorola-emdk - 摩托罗拉 MC65 - EMDK .NET 2.6 - E_SCN_READTIMEOUT 使用 ScanWait()

> ID：13820632
> 
> 赞同：5
> 
> 时间：2012-12-11T12:39:46.290
> 
> 标签：motorola-emdk

我希望将 EDMK 2.6 库中的 Barcode2 类集成到我们现有的条码扫描界面中。

我已经将示例代码连接到我们的接口方法，并且即使代码似乎响应扫描，`StartScan()`也总是得到结果。（响应扫描命中`E_SCN_READTIMEOUT`断点`if (scan.Result == Results.SUCCESS)`

```
public void StartScan()
        {
            if (!barcode.IsScanPending)
            {
                ScanData scan = barcode.ScanWait(2000); // 2 second timeout
                if (scan.Result == Results.SUCCESS)
                {
                    if (scan.IsText)
                    {
                        textbox1.Text = scan.Text;
                    }
                }
            }
        } 
```

结果总是`E_SCN_READTIMEOUT`，我怀疑这可能与设备上运行的 DataWedge 3.4 冲突，但扫描仪和触发器的功能似乎依赖于它。

使用 DataWedge 将条形码扫描到剪贴板对我们来说不是一种选择，尽管有 DataWedge（假设导致读取超时），有没有办法让库正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:30:34.677

确实需要禁用 DataWedge 应用程序（这可以通过 Motorola 的 datawedge API 以编程方式完成，感谢 Abdel 的提示！）。

[https://docs.symbol.com/ReleaseNotes/Release%20Notes%20-%20DataWedge_3.3.htm](https://docs.symbol.com/ReleaseNotes/Release%20Notes%20-%20DataWedge_3.3.htm)

一些关于我们的 Windows Mobile 应用程序的背景以供参考，我们有一个硬件单例，它包含所有硬件组件的接口，并通过反射加载相关类型和程序集。如果我们直接引用类型，上面的代码就可以工作。

最终的解决方案是使用 Symbol.Barcode 库而不是 Symbol.Barcode2。

# php - 复选框价格

> ID：13820634
> 
> 赞同：1
> 
> 时间：2012-12-11T12:40:01.157
> 
> 标签：php

我希望人们看到他们必须为他们可以购买的某种产品支付什么价格。

正如您从下面的示例中看到的那样，如果我选中一个或多个复选框，则会有一定数量的“折扣”。

我不希望他们在仅选中 1 个复选框时获得折扣，而在选中 3 个复选框时获得更多折扣。

我需要输入什么代码才能使其工作！请帮忙！（百分比折扣，'procent'，是 0.9）

```
 <?php 
if ($_POST['sub']){

    $checkv = $_POST['checkv'];
    $checkb = $_POST['checkb'];
    $checke = $_POST['checke'];
    $procent = $_POST['procent'];

    $total = $checkv + $checkb + $checke;
    $total = $total * $procent;
    echo "&#8364; $total,-";

}
?> 
```

这是网址：[http](http://sofan.site40.net/Sofan/Untitled-2.php) ://sofan.site40.net/Sofan/Untitled-2.php也许它会帮助你们一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:21:57.753

我忍不住注意到您使用 000webhost 作为您的主机和作为他们服务的前用户，我必须说他们的 PHP 和 mySQL 往往不能正常工作。也许尝试在您的计算机上安装 XAMPP 以进行客户端编辑和显示。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:09:19.377

如果以下是正确的：

用户勾选 2 个盒子并获得 1 个折扣，勾选 1 个盒子 - 没有折扣，3 个盒子 - 更多折扣

那么你需要减少复选框的数量：

```
<?php

    if ($_POST['sub']){

        extract($_POST);

        $discount = $checkv + $checkb + $checke - 1;
        $total = $total - $procent * $discount;
    }
?> 
```

$procent 改为 0.1（从 1 中减去的值）

因此，如果选中 3 个盒子，则 2 个盒子的折扣为 0.8 和 0.9。

您也可以使用 pow PHP 函数，因此对于 2 个产品，折扣为 0.9、3 - 0.81、4 - 0.73 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:48:13.957

除非我弄错了，否则您希望脚本忽略`$checkb`并检查`$checke`是否`$checkv`已检查，并忽略`$checke`是否检查`$checkv`或`$checke`检查。

代替

```
$checkv = $_POST['checkv'];
$checkb = $_POST['checkb'];
$checke = $_POST['checke']; 
```

和

```
$checkv = $_POST['checkv'];
$checkb = $checkv == 0 ? $_POST['checkb'] : 0; // If $checkv doesn't = 0, this = 0
$checke = $checkb == 0 ? $_POST['checke'] : 0; // If $checkb doesn't = 0, this = 0 
```

尽管这是按顺序排列的，因此如果同时选中`$checkv`和`$checke`，`$checkv`则始终是选中的检查。不过，我认为您必须需要某种优先级，对吗？要更改复选框的优先级，只需切换执行这些条件语句的顺序即可。

这是你要找的吗？

# java - 在 Java 代码中嵌入密码的最安全方法是什么？

> ID：13820640
> 
> 赞同：6
> 
> 时间：2012-12-11T12:40:18.070
> 
> 标签：java, authentication, embed, credentials

我必须先说我知道在客户端应用程序中硬编码密码是不好的做法，原因有很多。还有其他问题涉及该问题。这个问题的范围更窄，并假设身份验证凭据必须驻留在客户端应用程序的代码中，原因是您无法控制的某些原因。

如果某些方法比其他方法更好（例如：JPasswordField 将密码存储在 char 数组而不是 String 中）并且如果您必须在 Java 应用程序中对其进行硬编码，您可以采取哪些措施来使其更难被获取？

更新：

该应用程序的一个实例在远程 pc 上运行，最终用户具有管理员权限。凭据用于访问同一网络中的数据库，因此实际密码已经预先确定，并且必须在实际代码中手动输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T13:29:49.957

> .... 如果您必须在 Java 应用程序中对其进行硬编码，您可以采取哪些措施来使其更难被获取？

首先，我会确保负责做出这个错误决定的管理人员完全意识到这**从根本上来说是不可挽回的不安全**¹。

然后我可能会想出一些*naff*算法，以一种晦涩的方式组合密码；例如，通过构建两个字节数组并将它们异或在一起......并分发混淆的字节码。您希望做的最好的事情就是让技能有限的人难以从您的代码中对密码进行逆向工程。

（使用强算法加密密码并没有多大帮助，因为算法的选择和解密密钥都必须嵌入到您的代码中。确实，您可以梦想的任何方案都可以通过使用调试器设置断点在密码需要明文的地方。）

^(1 ...即使是 Jon Skeet 也无法确保它的安全。)

* * *

> 如果某些方法比其他方法更好（例如：JPasswordField 将密码存储在 char 数组而不是 String 中）...

我只想指出，使用 char 数组在 JPasswordField 等中保存密码的*正常*原因是为了防止坏人从核心转储或交换文件中读取密码。在这种情况下它并没有真正的帮助，因为我们必须假设你应该担心的坏人是具有系统管理员访问权限的 simeone。他或她将有足够的控制权将调试器附加到 JVM 并从 char 数组中捕获字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:50:51.270

作为一般准则，您永远不应该存储密码（当然）。

如果您需要在运行时提供密码，最佳实践（例如 Jez Humble 在 Continous Delivery 书中所倡导的）是在部署/启动时提供密码。这样，密码只能驻留在人们的脑海中，而不是在某个不安全的文件中。

我不知道这在你的情况下是否可行，但你应该朝着这个目标努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:56:18.087

我想最不理想的解决方案是，如果您可以拥有基于挑战的身份验证协议，其中包含随机元素。

这样，不仅仅是密码，也是使用密码生成正确响应的代码，需要进行逆向工程。

那么也可以是双向认证，即你端可以验证对方也使用相同的协议/算法，也有相同的密码。

最重要的是，密码永远不会通过网络发送，因此无法被嗅探。

[Diffie-Helman 密钥交换](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)是用于此类事情的一种广泛使用的协议，但如果您只想要默默无闻而不是真正的安全性，您总是可以推出自己的简单实现。好吧，如果一切都可以从字节码反编译和逆向工程，那么真正的安全显然是遥不可及的，但无论如何...... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:35:54.137

在客户端存储敏感数据是极其不安全的，尤其是密码，因为 .class 文件很容易被反编译。你有没有想过让一些非对称加密的东西参与进来？像公钥/私钥对或类似的东西？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T18:15:41.790

我喜欢斯蒂芬的回答，但我会补充......

源代码的安全性也很重要。无论您使用什么方法来混淆密码，任何有权访问源代码的人都可以轻松地`System.out.println(password)`在使用密码的地方放置并捕获密码，或者在调试中运行代码并停止代码以检查变量。

即使没有编译，任何有权访问的人都`jar`可以在调试模式下启动 java 程序并停止使用密码的程序并检查变量，这对于源代码来说是微不足道的，但仍然可以只使用 jar 和一些工具。

您可能会考虑让程序在需要时（通过 Web 服务调用或其他方式）从安全服务器获取密码，并让该服务器使用防火墙以仅允许某些 IP 访问它（如果客户端计算机的 IP 是已知）。它仍然不安全，但至少它是安全的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-11T12:46:09.777

您可以散列密码，甚至可以根据需要对其进行加密。看看这篇文章，它可能会很有用。[Java - 从配置文件中加密/解密用户名和密码](https://stackoverflow.com/questions/339004/java-encrypt-decrypt-user-name-and-password-from-a-configuration-file)

# javascript - 当我们使用 javascript 关闭弹出窗口时，将查询字符串附加到父页面

> ID：13820641
> 
> 赞同：2
> 
> 时间：2012-12-11T12:40:24.137
> 
> 标签：javascript, asp.net

当我们使用 javascript 关闭弹出窗口时，我想将查询字符串附加到父页面。我正在使用下面的代码，但它不起作用：

```
parent.location.href =parent.location.href+"?PostComments=true"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:13:51.823

这似乎对我有用！添加到评论中有点太多了，所以我将其发布为答案：

```
var win=window.open('','','width=200,height=100');
    win.focus();
    win.onunload = function() {
        window.location.search = "querystring"
    }; 
```

请注意，一旦您更改查询字符串，页面就会重新加载，并且弹出窗口会在循环中再次打开等等，但我假设您是在某个事件而不是页面加载时打开弹出窗口，所以这不应该是真的问题。

# jquery - 如何从托管在 Windows 服务上的 WCF 服务在网站上显示数据（并刷新数据）

> ID：13820643
> 
> 赞同：2
> 
> 时间：2012-12-11T12:40:29.567
> 
> 标签：jquery, asp.net, json, wcf, windows-services

我有一个 Windows 服务，它从外部组件接收数据（每秒）。我想显示在网站（Asp.Net Web 应用程序）上收到的数据。我想使用 HTML5 和 JQuery/Javascrpit 中的画布来呈现接收到的数据（生产线的概要）。

我的网站已经在运行并与由 Windows 服务托管的 WCF 服务进行通信。

第一个问题：这是否比从客户端汇集以从服务器端获取信息更好的方法？（我认为 Gmail、Facebook 不使用池化..）

第二个问题：我应该使用哪些架构和技术？我的解决方案是创建一个 WCF 方法，该方法通过汇集调用 WCF 方法（JSON 协议）的获取信息来返回数据和网站。

这是更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:52:50.197

满足您需求的好方法可能是

1.  在您的应用程序中有一个后台线程以每隔一定时间调用 WCF 服务，
2.  如果需要，您可以将该数据存储在缓存中以避免多次往返。
3.  获取数据后，您可以使用[SignalR](https://github.com/SignalR/SignalR)将信息广播给所有客户端，而无需明确请求。

SignalR 非常好，因为它有一个 fallback 过程，所以如果可以的话，它会使用 HTML5 的 WebSockets，否则它会使用其他方法来模拟长轮询。

# java - 将每个资源的名称与 sqlite 数据库变量的内容进行比较

> ID：13820645
> 
> 赞同：6
> 
> 时间：2012-12-11T12:40:39.560
> 
> 标签：java, android, comparison, drawable, contains

我希望你能帮助我，我已经研究了我的案例，但没有找到一个好的答案。我想将变量的内容与所有现有资源的名称进行比较（如果可能，仅使用可绘制资源）。

简而言之：如何将变量的字符串内容与所有资源名称的列表进行比较，优先考虑可绘制资源？或者换句话说：如何获取所有资源名称的列表（包含字符串），只优先绘制可绘制资源？

案例：我想显示一个基于给定类型的符号。此类型是从 SQLite 数据库中检索的。有许多符号存储为可绘制资源，它们都被命名为可能的类型。对于数据库中的每个存储类型，我想在列表中显示拟合符号。应该通过变量“type”和包含所有（可绘制）资源名称的列表之间的比较（通过 contains 方法）找出相等性。

示例：数据库中有名为“A”、“B”和“C”的类型。在可绘制资源文件夹中是名称为“A”、“BX”和“S”的图形。比较应该导致这种情况，在列表中只有类型“A”与合适的可绘制符号“A”连接。类型“B”和“C”没有可能命名的可绘制资源，因此不应显示任何符号。

我希望你能理解我的问题，并提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T13:20:54.487

> 或者换句话说：如何获取所有资源名称的列表（包含字符串），只优先绘制可绘制资源？

这可能是你想要的：

```
Field[] fields = R.drawable.class.getFields();
String[] allDrawablesNames = new String[fields.length];
for (int  i =0; i < fields.length; i++) {           
    allDrawablesNames[i] = fields[i].getName();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-19T11:15:58.253

抱歉，我知道您正在寻找 Java 解决方案，但我没有在 StackOverflow 中找到 C# 和 Xamarin 问题的任何解决方案，所以如果您不介意，我将把我的 Android 解决方案留在这里。

我在 GitHub 上找到了一个写得很好的类[ReflectionUtils](https://gist.github.com/caiorss/e95a48675c0e155c874b2197495fb410)，就用了，把这个方法做成了调用。

```
 private List<string> GetAllStrings()
    {
        IEnumerable<FieldInfo> fields = ReflectionUtils.GetAllFields(typeof(Resource.String));
        List<string> list = new List<string>();
        using (var enumerator = fields.GetEnumerator())
        {
            try
            {
                while (enumerator.MoveNext())
                {
                    list.Add(enumerator.Current.Name);
                }
            } catch (Exception e)
            {
                // Handle exception.
            }
        }
        return list;
    } 
```

# string - T-SQL 如何对字符串进行转义或解码？

> ID：13820646
> 
> 赞同：3
> 
> 时间：2012-12-11T12:40:41.090
> 
> 标签：string, tsql, decode, sql-server-2012, encode

我有一个以编码格式（用 Javascript 编码）记录在数据库中的字符串，我需要对其进行解码。“制表符”和“换行符”字符用 '%09' 或 '%09%09%09%09%0D%0A' 等符号进行转义，很难说应该替换哪些符号。

有没有一种棘手的方法可以做到这一点，或者我应该找到字符串中的编码组合并替换它们？

# client-certificates - 苹果触摸图标在安全域上不起作用

> ID：13820648
> 
> 赞同：4
> 
> 时间：2012-12-11T12:40:48.110
> 
> 标签：client-certificates, apple-touch-icon

我想知道是否有人可以提供帮助，我正在设置苹果触摸图标，它们都可以正常工作（即使在 https 域上）但是对于我公司的 Intranet 站点，它使用客户端证书和 secure.domain 它不起作用，请您指出我在正确的方向？

亲切的问候雷切尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:41:26.830

对于遇到此问题的其他人，我必须非常迅速地删除证书，添加主屏幕图标并再次恢复证书。

# text-files - 在 Notepad++ 中显示文件的修改日期

> ID：13820649
> 
> 赞同：2
> 
> 时间：2012-12-11T12:40:51.497
> 
> 标签：text-files, notepad++

是否可以在 Notepad++ 中显示当前打开文件的最后修改日期和时间？最好让这些信息始终可见，例如在状态栏中。

我在 Windows XP SP3 上使用 Notepad++ v5.9.3 (UNICODE)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:31:12.707

C# 控制台应用程序；我在五分钟内写了这篇文章，因为这就是我所拥有的并且想要这个。它不漂亮，但我现在可以做的一样好。这至少是一个起点。

![Notepad++ 上次修改日期](../Images/fe92de6d562901fb334886fb04730643.png)

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Notepadd___DateModified
{
    class Program
    {
        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);

         [DllImport("user32.dll", EntryPoint = "SendMessage", CharSet = System.Runtime.InteropServices.CharSet.Auto)] 
        public static extern bool SendMessage(IntPtr hWnd, uint Msg, int wParam, StringBuilder lParam);

        [DllImport("user32.dll", SetLastError = true)]
        public static extern IntPtr SendMessage(int hWnd, int Msg, int wparam, int lparam);

        [DllImport("user32.dll")]
        public static extern int SendMessage(IntPtr hWnd, int msg, int Param, string s);

        const int WM_GETTEXT = 0x000D;
        const int WM_SETTEXT = 0x000c;
        const int WM_GETTEXTLENGTH = 0x000E;

        static void Main(string[] args)
        {
            while (true)
            {

                foreach (Process p in Process.GetProcessesByName("Notepad++"))
                {
                    if (p.Id != Process.GetCurrentProcess().Id)
                    {
                        try
                        {
                            DateTime LastModified = Directory.GetLastWriteTime(p.MainWindowTitle.Replace(" - Notepad++", ""));

                            IntPtr childHandle;
                            childHandle = FindWindowEx(p.MainWindowHandle, IntPtr.Zero,  "msctls_statusbar32", null);

                            StringBuilder subtitle = new StringBuilder();
                            Int32 subsize = SendMessage((int)childHandle, WM_GETTEXTLENGTH, 0, 0).ToInt32();

                            if (subsize > 0)
                            {
                                subtitle = new StringBuilder(subsize + 1);
                                SendMessage(childHandle, (int)WM_GETTEXT, subtitle.Capacity, subtitle);
                            }

                            if (!subtitle.ToString().Contains(" - Last Modified: " + LastModified.ToString()))
                            {
                                SendMessage(childHandle, WM_SETTEXT, 0, subtitle.ToString().Split(new string[] { " - Last Modified: " },StringSplitOptions.None)[0] + " - Last Modified: " + LastModified.ToString());
                                Console.Out.WriteLine(subtitle + " - Last Modified: " + LastModified.ToString());
                            }
                        }
                        catch
                        {
                            break;
                        }
                    }
                    else return;
                }
                Thread.Sleep(1000);
            }
        }
    }
} 
```

# c# - C# Java 命名管道稳定性

> ID：13820652
> 
> 赞同：2
> 
> 时间：2012-12-11T12:41:00.777
> 
> 标签：c#, java, named-pipes

我在使用命名管道在 C# 和 Java 应用程序之间进行通信时遇到稳定性问题。

这是在 C# 中设置命名管道并读取 XML 字符串行的代码。

```
try
{
    NamedPipeServerStream inStream = new NamedPipeServerStream(inName, PipeDirection.In);
    inStream.WaitForConnection();
    reader = new StreamReader(inStream);
    while (!Stopped && !reader.EndOfStream)
    {
        string xml = reader.ReadLine();
        processXml(xml);
    }
}
catch (Exception e)
{
    log.Error("Error in receiver", e);
}
finally
{
    log.Info("Receiver ended");
} 
```

这里是连接并用Java编写代码

```
public void connect() throws TransportUnavailableException
{
    try
    {
        File inPipe = new File(inName);
        os = new FileOutputStream(inPipe);
        // Uses JAXB for XML serialization
        marshaller = context.createMarshaller();
    }
    catch (FileNotFoundException e)
    {
        throw new TransportUnavailableException("Named pipe not found: " + inName);
    }
}

public void send(Message message)
{
    marshaller.marshal(message, os);
    os.write('\n');
    os.flush();
} 
```

一切正常。但是许多用户报告崩溃。我在日志中没有看到任何表明管道死亡原因的异常。我只是看到 C# 中的接收线程结束（即日志中的“接收器结束”），之后我在下一次尝试从 Java 发送时收到 IO 异常，并显示消息“句柄无效”。这似乎是随机发生的，但通常在建立连接后的 1 分钟或 2 分钟内发生。当应用程序没有做任何事情时，管道结束消息也会发生，这可能是自上次用户操作以来的几分钟。然后可能需要几分钟才能尝试从 Java 进行下一次写入。

我的应用程序故意关闭管道的所有原因（例如系统其他地方的崩溃）都被记录下来，我从来没有看到这是管道结束的原因，我只是收到读者已经放弃阅读的消息。

*   管道被杀死，防病毒，防火墙等是否有任何外部原因？
*   我注意到我没有像大多数示例似乎使用的那样使用 Java 中的 RandomAccessFile。这可能是一个原因吗？

任何帮助/建议表示感谢谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:57:16.197

您的服务器端代码只处理一个连接，然后在读取到 EOS 时退出。您需要创建命名管道，循环接受连接，并启动一个新线程来处理每个连接。完成后，您还需要关闭每个连接。

但是，出于几个原因，我会为此使用 TCP 而不是命名管道。

# mysql - 如何选择/统计过去 2 小时内发生的所有记录？- MYSQL

> ID：13820655
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:41:07.837
> 
> 标签：mysql, time, intervals

在 MYSQL 中，我将日期和时间分开。我需要计算一个 ip 在过去 2 小时内登录失败的次数。如果他失败的次数太多，那么他在接下来的 2 小时内都无法登录。

我只是不知道哪个陈述是正确的（也许下面的 2 个都不是）。

```
SELECT COUNT(`ip`) AS count_failed_logins FROM `failed_logins` WHERE `time`=TIME(CURTIME()+Interval 2 hour) 
```

或者

```
SELECT COUNT(`ip`) AS count_failed_logins FROM `failed_logins` WHERE `time`=TIMEDIFF(CURTIME()+Interval 2 hour) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:45:45.813

你可以简单地做：

```
SELECT COUNT(`ip`) FROM `failed_logins` WHERE `time` > DATE_SUB(NOW(), INTERVAL 2 HOUR); 
```

# java - facebook graph api调用使用servlet发布图像

> ID：13820658
> 
> 赞同：0
> 
> 时间：2012-12-11T12:41:14.897
> 
> 标签：java, javascript, html, ajax, facebook-graph-api

我正在尝试使用 javascript FB.api 将图像发布到用户墙上。图像是从 java servlet 动态生成的，但由于在生成图像之前的异步行为，它会将控制权传递到块下方以将图像发布到 Facebook 部分。我想要

1.  如何从 servlet 将 fb.api 发布到 Facebook 调用？
2.  如何处理这种行为，以便控制不会在图像生成之前传递到下方？

**注意**servlet 正在工作文件并生成图像。

```
var imgURL="http://xxx.xxx.xxx.xxx:8084/myapps/app1?monthly="+monthly+"&recent="+recent+"&likes="+likes;

//var imgURL="http://xxx.2xx.xx6.1x8:8084/WebApplication6/image";
alert('image');
//var imgURL="https://graph.facebook.com/100000329585395/picture";
var img = document.createElement('img');
img.src =imgURL;
document.body.appendChild(img);

FB.api('/me/photos', 'post', {
message:'image',
url:imgURL        
                       }, function(response){
                           alert('here');

if (!response || response.error) {
    alert('Error occured'+response.error);
} else {
    var postId = response.id;
     alert(postId);}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:09:04.263

检查[RESTFB](http://restfb.com/) Api，它是一个 Java API。您可以使用它来代替 Javascript API。

# azure - Windows Azure 访问控制和 Windows Phone 8

> ID：13820664
> 
> 赞同：4
> 
> 时间：2012-12-11T12:41:50.470
> 
> 标签：azure, windows-phone, windows-phone-8, acs

我目前正在开发一个通过 Windows Azure 访问控制服务进行单点登录的应用程序。我正在使用适用于 Windows Phone NUGET 包的访问控制服务（同样的控制也可以在适用于 Windows Phone 的 Windows Azure 工具包中找到）。

我只是想知道在 Windows Phone 8 中是否有这样做的新方法？

这些当前的控件已经有大约一年没有更新了，从那时起似乎发生了很多变化。我已经搜索过，但搜索引擎似乎仍然主要返回 Windows Phone 7 结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:01:00.107

Azure 移动服务（目前仍处于预览阶段）具有旨在帮助简化用户身份验证的新功能。请参阅[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/)

# mysql - 在没有 Xcode 的情况下使用 rails 安装 MySQL

> ID：13820666
> 
> 赞同：1
> 
> 时间：2012-12-11T12:42:04.103
> 
> 标签：mysql, ruby-on-rails, ruby, xcode, homebrew

无论如何我可以在没有Xcode的情况下为rails安装MySQL gem吗？许多网站都提到 XCode 作为安装的可选要求。但是安装了命令行工具。

我已经安装了没有 XCode 的 rails、ruby、homebrew、MacPorts。但是无法安装 MySql gem

注意：我已经为 Xcode 安装了命令行工具。但不是完整的 Xcode。

我遵循了这些参考资料，

[http://scotty-t.com/2012/04/02/intstalling-mysql-5-5-on-os-x-mountain-lion/](https://stackoverflow.com/questions/6340174/mysql-gem-on-osx-10-7-lion)

[在 bash_profile 中设置路径](https://stackoverflow.com/questions/6340174/mysql-gem-on-osx-10-7-lion)

但是我在尝试时不断收到这些错误

```
sudo gem install mysql 
```

错误

```
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
checking for mysql_ssl_set()... no
checking for rb_str_set_len()... no
checking for rb_thread_start_timer()... no
checking for mysql.h... no 
```

`checking for mysql/mysql.h... no *** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers. Check the mkmf.log file for more details. You may need configuration options.`

 `Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby --with-mysql-config --without-mysql-config` 

`Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/mysql-2.9.0 for inspection. Results logged to /Library/Ruby/Gems/1.8/gems/mysql-2.9.0/ext/mysql_api/gem_make.out`

我应该先安装 XCode 吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:03:29.893

当您执行 exec`sudo gem install mysql`时，您正在安装一个`gem`名称为 mysql，而不是数据库的名称。这个 gem 依赖于`libmysql`mysql 数据库附带的一个名为 的文件。

换句话说，你必须先在你的机器上安装 mysql db，然后再安装 gem。否则，gem 将无法构建，因为它找不到所需的文件。

由于您有自制软件，因此可以通过 exec 安装 mysql db `brew install mysql`。在那之后，`sudo gem install mysql`可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:00:58.863

你有安装 mysql-devel 吗？如果没有，试试这个

```
$ sudo yum install mysql-devel ;sorry it's for fedora 
```

为狮子做，然后

```
$ gem install mysql 
```

如果仍然有错误，请尝试在安装 gem 时添加配置路径。

# c - 串行端口 read() 一次只获取更少的字节

> ID：13820667
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:42:08.663
> 
> 标签：c, serial-port, usbserial

操作系统：Ubuntu

串行端口使用：USB->串行适配器（多产 PL2303）

我有一个示例串口读写程序。在运行应用程序时，我正在尝试发送 4100 字节，编写能够一次性完成的程序。

```
n = write (s_port,msg,4100); 
```

在这里，我正在检查“n”值，它是 4100

I**强文本**n 接收端

```
n = read(s_port,msg,5000); 
```

上面的行在一个循环中，我在一次读取尝试中获得的字节数不超过 32 个。因此超过 128 次读取尝试（32+32+32 等...）以获得完整字节（4100）

**在发送端如果能够一次推送整个字节，为什么不能一次接收呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:48:58.397

串行通信需要时间来传输单个字节，具体取决于波特率。CPU 在处理收到的字节时要快得多。

通过写入，串行通信设备接口能够缓冲要发送的字节。然而，读取必须从其他设备接收字节，因此存在时间延迟。

这是[关于 RS-232 串行通信标准的维基百科文章](http://en.wikipedia.org/wiki/RS-232)。

将串行端口与[这篇关于 Parallel port 的维基百科文章进行](http://en.wikipedia.org/wiki/Parallel_port)比较。

并行端口每个位有一根线，因此所有位都在同一时间传输，而串行端口一次一个串行地传输位。在串行端口速度非常低的时候，并行端口用于更高速度的传输，例如打印机。多年来，串行端口速度已显着提高，但仍远不及 USB 速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:49:39.550

这是串行到 USB 转换器的一般性质，您必须处理以较小块接收的数据。我认为 PL2303 有一个 64 字节的缓冲区，但无论如何它都在你试图在单次读取中传输的内容之下。

同样是异步的，没有分隔符来指定数据块的开始和结束，因此芯片/驱动程序必须根据片上缓冲区大小和它们可能实现的其他规则来决定在哪里中断数据流例如在将数据作为 USB 数据包转发之前的超时。

# mysql - MYSQL select语句通过多个关联实体

> ID：13820668
> 
> 赞同：1
> 
> 时间：2012-12-11T12:42:24.340
> 
> 标签：mysql, select, join

我正在尝试通过多个关联实体检索数据，即**company_area**（粉红色）和**jobs_employees**（蓝色）。我想检索**员工**（灰色）从特定**公司**和**区域所做的所有****工作**（绿色）。我将如何使用我拥有的数据库结构来做到这一点？

 *********我试过的：***

```
select Jobs.idJobs,jobs.Title, jobs.JobDescription, jobs.Deadline, 
jobs.JobStarted, jobs.jobEnded, jobs.Completed, jobs.Remarks, Priority

from company_area

inner join employees 
on employees.idEmployees = company_area.FK_Employee
inner join jobs_employees
on jobs_employees.FK_Employees = employees.idEmployees
inner join JobPriority 
on jobs_employees.FK_Priority = JobPriority.idJobPriority
inner join jobs
on jobs_employees.FK_Employees = jobs.idJobs 

where company_area.FK_Company = '2' and company_area.FK_Area = '1' 
```

***备注：*** 我知道我可以在公司、区域和工作之间创建一个关联实体，但是如果没有额外的实体，这样做是否可行且高效？

[创建数据库的代码>>](http://www.hydrocell.co/DB_structure.html) ![ERD 图](../Images/d047deaf149ab2cb76b332498c6b7788.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:24:56.353

一些建议：

1.  没有什么神奇的：如果你访问一个表来获取列值或者加入其他的，你肯定需要这个表。

2.  您的查询中可能存在的问题：如果工作由几个用户执行，您可以多次获得一份工作。

3.  更好地为所有列使用表前缀。带有前缀 FK 的列名有点误导 - 它是命名外键的标准前缀。******

# .htaccess - 将域重定向到子目录

> ID：13820671
> 
> 赞同：0
> 
> 时间：2012-12-11T12:42:31.557
> 
> 标签：.htaccess, cpanel

我正在尝试将所有访问 www.century21.bh 的流量重定向到 Century21.bh/map

我试图使用 .htaccess 没有运气。我在 cPanels 重定向方面取得了一些小小的成功。

它重定向了所有主页流量，但例如它没有重定向。www.century21.bh/OldPage.html

这是我所拥有的：

```
//301 Redirect Entire Directory
RedirectMatch 301 /(.*) /map/$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:52:38.077

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.century21\.bh$ [NC]
RewriteRule ^ /map [L,R=301] 
```

此规则需要位于`www.century21.bh`域文档根目录中的 htaccess 文件（最好靠近顶部）。

# ruby - 使用 codekit 作为指南针时 Ruby 使用了太多内存

> ID：13820673
> 
> 赞同：2
> 
> 时间：2012-12-11T12:42:35.850
> 
> 标签：ruby, memory-leaks, sublimetext2, compass-sass, compass-geolocation

将 Compass 与 codekit 一起使用时遇到问题。Ruby 开始吃掉操作系统的几乎所有内存。在下面的屏幕截图中，您可以看到 Ruby 正在使用 2.26bg 内存。当我使用 Sublime 和 Codekit 来编译 Compass 时，就会出现这个问题。有人经历过这个问题吗？

![在此处输入图像描述](../Images/a81a86d0dd9ac2086b4ee3866d8e37f6.png)

**编辑：这是我检查此过程时的信息**

```
采样过程 537 持续 3 秒，样本之间的运行时间为 1 毫秒
采样完成，处理符号...
客户端错误：连接中断
每 1 毫秒分析一次采样 ruby​​ (pid 537)
工艺：红宝石 [537]
路径：/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
加载地址：0x1000ca000
标识符：红宝石
版本： ？？？（？？？）
代码类型：X86-64（本机）
父进程：CodeKit [326]

日期/时间：2012-12-11 10:49:56.497 -0200
操作系统版本：Mac OS X 10.8.2 (12C60)
报告版本：7

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-04T08:38:34.833

您用于精灵的所有文件都是他们所说的吗？扩展名是否与 MIME 类型匹配？例如，您是否不小心保存了带有 PNG 扩展名的 JPEG？

当我不小心保存了带有 PNG 扩展名的 PSD 时，我遇到了同样的问题。在我的图像目录中运行 a`$ file --mime-type *`会发现是哪个文件导致了这个问题，并为我正确地保存了它。

# android - 用户不符合此购买条件 Android inApp

> ID：13820674
> 
> 赞同：12
> 
> 时间：2012-12-11T12:42:37.723
> 
> 标签：android, in-app-purchase, in-app-billing

我在进行inapp android购买时遇到问题。我已经尽我所能，但似乎卡在了错误上`user is not eligible to this purchase`。请指导我完成我做错了什么。以下是我遵循的步骤

1.  已签名的 apk 上传到 Play 商店
2.  处于已发布状态的 inapp 产品
3.  用户在测试设备上
4.  版本代码和版本名称与上传到存储的 apk 相同

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:48:26.043

当您所做的一切都很完美时，就会出现此错误，您使用了带有正确产品 ID 的签名 APK，但您必须注意，您使用的帐户可能没有正确的**有效信用卡详细信息**。

因此，当您想**购买任何产品时，即使使用测试帐户**，该帐户也应该具有**有效的信用详细信息**。

您必须在发布者帐户的编辑配置文件中指定测试帐户

**许可和应用内计费**

**测试帐户**框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T06:23:31.007

我以为我也分享我的。

我的测试设备也有同样的问题。我已经完成了许多文档中提到的所有内容，直到我偶然在带有 SIM 卡的不同设备上对其进行了测试，一切都很好。

我的测试设备没有 SIM 卡，只有无线互联网。所以谷歌无法验证。不过，我可以从 Google Play 购买我想要的任何应用程序。

我的另一台测试设备使用不同的测试帐户 + 它有一张正确的 SIM 卡和数据计划。

希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T08:51:16.527

这个错误只有两个原因： 1> 在 Play Store App 中登录的帐户没有测试权限。将此帐户添加到 Google Play 上的测试帐户

2> 发布者不能购买自己的产品。应用内甚至付费应用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:54:58.937

花了我 2 天的时间才发现，你不仅要在控制台 v2 下创建应用程序，还要在 v2 下上传它。

我的问题是，在 v2 下，我无法上传任何东西（没有图片，没有 APK）......所以我切换回 v1，并在那里完成了所有上传。

（请注意：v2 控制台并没有告诉您有关“草稿”或发布应用程序所需的所有详细信息。所以我来回切换......）

因此，在经历了所有“用户不合格”的麻烦之后，我终于决定再次执行整个过程，并发现使用谷歌浏览器上传不起作用。:D

最后，使用 Firefox 上传确实有效，我再也没有看到那个错误；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T12:54:04.493

只是为了弄清楚我的问题是我的测试 IAP 购买在我的游戏中运行良好，但我无法购买实际的 IAP 游戏产品。

最后我发现这工作了 2 个月。我尝试了很多事情，可能是看到这一切的可能原因。但在我看来问题很大的一个重要问题是，我在巴基斯坦时试图通过美国信用卡购买 IAP 产品。正如我多次尝试购买一样，我首先收到一封购买成功的电子邮件，然后突然收到来自谷歌的取消购买电子邮件。所以我去尝试我在美国的朋友购买的产品，它奏效了。

最后一件事，我想提的是这不可能是看到这些警报背后的唯一原因，因为我不记得我为完成这项工作所经历的所有事情。

感谢每一个人的努力！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T01:20:56.460

我有同样的问题 2 天。最后，我发现我的信用卡货币有问题。我使用美国运通作为我的测试帐户，它不允许以欧元计费，只能以美元计费。当我使用欧洲信用卡时，问题就解决了。

最好的办法是尝试使用您的 google play 测试帐户购买一些现有的东西，以确保问题不是来自您的帐户配置。

# ios - 此证书由未知机构签署

> ID：13820680
> 
> 赞同：53
> 
> 时间：2012-12-11T12:42:55.713
> 
> 标签：ios, xcode, vmware, provisioning-profile

我需要为测试目的创建 ipa 文件。我去 Keychian access -> Certificate assistant -> Request a certificate from a certificate authority 并创建 some.certSigningRequest 文件。然后我将该文件上传到客户 iOS 配置门户并创建开发和分发证书，我将其下载并安装在我的 vmware mac 上。当我选择证书时，我收到消息：**此证书由未知机构签署**
这是图像：

![在此处输入图像描述](../Images/b5600d129b6952c9f403abbf76279f73.png)

我很困惑，不知道有什么问题？

非常感谢任何帮助。谢谢人...

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-01-24T06:18:01.513

解决了！

问题是缺少苹果 WWDR 中间证书。

我们还必须安装 Apple 全球开发者关系部颁发的 WWDR 中间证书。它可以从门户网站或直接在 [http://developer.apple.com/certificationauthority/AppleWWDRCA.cer](http://developer.apple.com/certificationauthority/AppleWWDRCA.cer)下载 。确保您也将它添加到您的钥匙串中。

添加证书：在您的 Mac 电脑上打开您的钥匙串实用程序软件，然后转到`File`→<kbd>导入项目，然后选择`AppleWWDRCA.cer`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-27T16:01:20.270

我评论了接受的答案，但我想我会给出更彻底的回应。

为 Apple Pay 生成商家 ID 证书会在生成的证书上产生“此证书由未知机构签名”的警告。

通常，“颁发者”显示“Apple 全球开发者关系证书颁发机构”——但是，在商家 ID 证书的情况下，它是：

“Apple 全球开发者关系 CA - G2”

大多数在线答案都指向[AppleWWDRCA.cer](http://www.apple.com/certificateauthority/AppleWWDRCA.cer "下载 Apple 全球开发者关系认证中心证书")，但是由于发行机构的原因，这不起作用——在这种情况下，我需要[AppleWWDRCAG2.cer](http://www.apple.com/certificateauthority/AppleWWDRCAG2.cer "下载 Apple Worldwide Developer Relations CA - G2 证书")。我能够从这里获得这个证书：http: [//www.apple.com/certificateauthority/](http://www.apple.com/certificateauthority/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:34:55.280

我猜当您创建/生成证书时，钥匙串首选项没有以下配置。请检查随附的屏幕截图。我认为根据附件图像制作证书选项卡后，它将解决您的问题。

祝你好运 ![在此处输入图像描述](../Images/cf34f9ff656d186acb9a9f7b659e17d8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-18T06:25:05.660

今天我们需要 v3 的证书 http://www.apple.com/certificateauthority/AppleWWDRCAG3.cer

# typescript - 用于保存 Jquery 对 HTML5 Canvas 的引用的 Typescript 变量

> ID：13820684
> 
> 赞同：1
> 
> 时间：2012-12-11T12:43:06.893
> 
> 标签：typescript

嗨，我想知道我是否以正确的方式执行此操作，我想要一个 Typescript 变量来保存对 HTML5 Canvas 的 Jquery 引用。我有一个无类型的画布对象，它从 $(document).ready 中的行传递到构造函数中。

游戏.ts：

```
///<reference path="../javascripts/sprite.js" />
///<reference path="d.ts/jquery-1.8.d.ts" />
///<reference path="../javascripts/jquery-1.8.2.js/>

        $(document).ready(function () {
        canvas = $('#canvas');

        })
    });

class Game {

    canvas;

    CANVAS_WIDTH: number;
    CANVAS_HEIGHT: number;

    constructor (canvas) {
        this.canvas = canvas;
        this.CANVAS_WIDTH = canvas.width();
        this.CANVAS_HEIGHT = canvas.height();
    } 
```

但是，在游戏类中使用此画布变量时，我没有像 .width() 那样获得任何 jquery 语法自动完成；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:47:54.770

一种更好的做事方式（使用 HTMLCanvasElement 类型），虽然丢失了 width() 属性是像这样引用 Canvas。

```
 canvas: HTMLCanvasElement = <HTMLCanvasElement> document.getElementById('canvas');

context2D: CanvasRenderingContext2D; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T12:46:05.923

解决方案，使用 JQuery 变量：

```
class Game {

     canvas : JQuery;

    CANVAS_WIDTH: number;
    CANVAS_HEIGHT: number;

    constructor (canvas:JQuery) {
        this.canvas = canvas;

        this.CANVAS_WIDTH = canvas.width();
        this.CANVAS_HEIGHT = canvas.height();
    } 
```

# android - Eclipse Repository Tortoise SVN 连接错误

> ID：13820686
> 
> 赞同：0
> 
> 时间：2012-12-11T12:43:13.170
> 
> 标签：android, eclipse, tortoisesvn

我的系统中有 Tortoise SVN 客户端存储库。现在我需要从另一个系统连接到存储库，该系统在 Eclipse 的 lan 中链接。我已经为 Eclipse 安装了 subclipse 插件。但是当我尝试创建一个存储库时，我收到了这个错误。

![在此处输入图像描述](../Images/c651397c6404d8cbd0cf1416f838bb28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:14:39.027

要么您的路径错误，要么您没有特权。这是错误的通常原因。

另外，请检查您的 SVN 连接器是否与服务器上安装的 SVN 版本相同。

**编辑**：

[类似的话题在这里。通读这些答案。](https://stackoverflow.com/questions/85486/adding-a-svn-repository-in-eclipse)

# hibernate - 是否可以从两个具有相同名称的表的数据库中创建实体类？

> ID：13820688
> 
> 赞同：0
> 
> 时间：2012-12-11T12:43:23.717
> 
> 标签：hibernate, netbeans

以下问题涉及 Netbeans 7.2，但我希望它也适用于 7.1、7.0、6.8 和 6.9。

我正在尝试从两个不同的数据库 DB1 和 DB2 映射实体类，这两个数据库都包含一个同名的表 TB。DB1.TB 和 DB2.TB 中的字段完全不同。

我正在为两个数据库生成实体并将类放入单独的包中（让我们说 DB1 的“entities.db1”和 DB2 的“entities.db2”）。

问题是当我为第二个数据库生成实体时，TB 表已经存在，因此只允许我进行 UPDATE 或 RECREATE。重新创建会删除另一个 TB 实体，而更新会造成混乱。

我尝试过创建单独的持久性单元，但这似乎没有任何区别（并且无法在“来自数据库的实体类”向导中选择 PU）。

我真的不想拥有名为 Db1Tb 和 Db2Tb 的类，尽管看起来我别无选择。我的问题是，我做错了吗？是否有另一种使用 Netbeans 创建实体类的方法，其中两个表具有相同的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:20:55.237

我发现分离是关键……我创建了三个项目：

*   myEntities：来自数据库的实体类（禁止创建持久性单元）
*   myEJBs：实体类和本地接口的会话 Bean（这里是 PU）
*   myEJBRemotes：远程接口（由会话 Beans 向导创建）

如果只有一个 Web 应用程序引用这些 bean，我可以将它们全部打包并部署在一起。但是，由于我打算创建几个独立部署的 Web 应用程序，将 EJB 作为依赖项添加到每个模块会产生一个问题：在部署时，Glassfish 抱怨已经部署了具有该名称的 EJB。

再一次，分离是解决方案……我的第一个想法是部署 EJB 模块，然后将实体和远程模块作为依赖项添加到我的 Web 应用程序中。这不太奏效——EJB 模块没有对实体类的引用（在部署 EJB 时，它的依赖项不包含在发送到应用程序服务器的包中）。

创建*另一个*项目，这次将 ejb 模块和关联的 jars（实体和远程）打包成一个 EAR，终于成功了。这个EAR可以单独部署在Glassfish上，然后web应用只需要在Entity和Remote jars上添加依赖...

提示：

1.  关于 maven-ear-plugin：添加`<defaultLibBundleDir>lib</defaultLibBundleDir>`到配置中，否则库会放在耳朵的根目录中，glassfish 开始抛出 NoClassDef 异常。

2.  关于 Web 应用程序：如果您在单独的 EAR 中部署您的 Web 应用程序，并且您正在尝试使用一些自定义查询，那么您*不能*像所有东西都捆绑在一起那样从 EJB 中“借用”EntityManager（在至少，据我所知不是）。您需要创建一个新的持久性单元，尽管您可以在一个`persistence.xml`文件中共享多个单元，当然您也可以重用为 EJB 创建的实体。

3.  关于持久性单元：因为持久性单元与实体不在同一个项目中，所以请确保设置`<exclude-unlisted-classes>true</exclude-unlisted-classes>`并包含 PU 表示的所有实体类。*这对于 EJB 模块和*Web 应用程序中的 PU 都是正确的。

我敢肯定这不是做到这一点的唯一方法，而且它可能（很有可能）也不是最好的方法。我很乐意听取任何提供更好方法的人的意见...

# java - 如何将 jScrollPane 添加到 jPanel 的 Null 布局

> ID：13820692
> 
> 赞同：0
> 
> 时间：2012-12-11T12:43:29.123
> 
> 标签：java, swing, jpanel, layout-manager, null-layout-manager

怎么添加`jScrollPane`进去`Null Layout of jPanel`？`netbeans`我正在使用`Null Layout for jPanel`并且我搜索了不同的来源，但我仍然无法将 jScrollPane 添加到 jPanel 的 Null 布局。

如果可能，请帮助提供*源代码。*

感谢所有回复评论者，我也接受建议而不是谈论建议。

当有人问他们需要的任何东西时，我似乎在这里，但这里的一些人不鼓励寻求帮助而不是帮助的人......

我使用空布局的基本需求是，我正在使用带有 jlabel 的空布局向 jpanel 添加背景图像，因为我正在使用 netbeans，我是 java 的初学者......

我要求所有版主不要删除我的编辑字...人们可能会理解我的感受，因为我是 java 和 netbeans 学习者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:09:37.950

而不是设置`null`你的布局`JPanel`，设置`BorderLayout`和一切都应该像这个例子一样正常工作：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.JTextArea;
import java.awt.BorderLayout;
import javax.swing.JScrollPane;
import javax.swing.JPanel;

public class App extends JFrame{
    JPanel panel = new JPanel();
    JTextArea textarea = new JTextArea(10,50);

    public App(){
        panel.setLayout(new BorderLayout());
        panel.add(new JScrollPane(textarea),BorderLayout.CENTER);
        add(panel);
    }

    public static void main( String[] args ){

        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                App a = new App();
                a.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                a.pack();
                //a.setSize(1900,1200);
                a.setVisible(true);
            }
        });    
    }
} 
```

因此，只需添加您的表单而不是`JTextArea`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:45:49.787

```
JScrollPane pane = new JScrollPane();
JPanel panel = new JPanel();
panel.add(pane); 
```

# touch - jquery - 如果原始目标是链接/图像，则 touchend preventDefault

> ID：13820695
> 
> 赞同：1
> 
> 时间：2012-12-11T12:43:44.623
> 
> 标签：touch, jquery

我正在使我的网站触摸友好，并创建了一个简单的轮播样式插件，效果很好，但是当触发 touchend 事件并且原始目标是图像（用户触摸图像然后滑动/向左导航）时，它仍在打开与图像关联的链接。

我已经输入了 event.stopPropagation() 和 event.preventDefault() 但它没有效果。

有谁知道如何防止这种情况？

编辑：

我正在使用以下方法绑定触摸事件：

```
obj.parent().bind('touchstart', onTouchStart);
obj.parent().bind('touchend', onTouchEnd); 
```

这是touchend功能

```
function onTouchEnd(event) {
    if(!cdata.in_touch) return;
    cdata.in_touch = false;

    var pos = getPointerPosition(event);
    var final_distance = Math.sqrt(pos.x - cdata.touch_start);
    cdata.timer_end = new Date();
    cdata.timer_length = cdata.timer_end - cdata.timer_start;

    if(cdata.timer_length > 100) {
        if (final_distance > 100) {
            event.stopPropagation();
            event.preventDefault();
            // no effect, link associated with image still fires
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:15:12.730

解决这个问题的一般技巧是倾听`touchstart`。一旦被触发，保存触摸 XY 坐标并为和`touchstart`附加监听器。侦听器应调用您要调用的指定回调（即全屏显示点击的图像）。应该监视从原始点击 XY 坐标移动的距离，如果它超过某个阈值，它会取消（以及现在的冗余事件）。`touchend``touchmove``touchend``touchmove``touchend``touchmove`

[Google https://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)有一篇带有参考代码的优秀文章

此外，FTlabs 的一个名为 FastClick 的新 Github 项目更加全面； [https://github.com/ftlabs/fastclick](https://github.com/ftlabs/fastclick)

# jquery-jscrollpane - 带有 jScrollPane 的 Cycle2 字幕

> ID：13820696
> 
> 赞同：0
> 
> 时间：2012-12-11T12:43:50.753
> 
> 标签：jquery-jscrollpane, jquery-cycle2

我正在尝试将 jScrollPane 与插件 Cycle2 一起使用，但它没有按预期工作。

以下图像是 Cycle2 插件中的循环标题元素，以及每张幻灯片中的动态内容（数据循环标题）。

所以，我正在尝试使用 jScrollPane 添加滚动条。OnLoad，它按预期工作，但是一旦循环，滚动窗格就会变得很多，当回到第一张幻灯片时，它会显示为第二张图片：

![在此处输入图像描述](../Images/a2f051ede3f1c25cfb6aabd3bf94fa62.png)![在此处输入图像描述](../Images/3583fc754a702bb72098378d684830ed.png)

所以，我使用的代码如下：

```
$(window).bind('load',function(){
    $('#text').jScrollPane(
        {
            verticalDragMaxHeight:20,
            verticalDragMinHeight:20,
            animateScroll:true
        }
    );
    var api = $('#text').data('jsp');
    $('#slideshow').on('cycle-after',function(e, opts){
        api.reinitialise();
    });
}); 
```

幻灯片的结构我认为它不相关，因为它是带有标题模板等的基本结构。

拜托，我真的需要这个工作！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:10:08.847

我设法让它使用一些肮脏的解决方法。在这里发布，以便如果有人遇到同样的问题可以让它工作！

```
$('#slideshow').on('cycle-after',function(e, opts)
    {
        setTimeout(enable_scroll,5);
    }
);
function enable_scroll(){ $('#text').jScrollPane(settings); } 
```

是`setTimeout`关键！

希望能帮助到你 ：）

# asp-classic - 经典 ASP 电子邮件脚本不再工作

> ID：13820697
> 
> 赞同：0
> 
> 时间：2012-12-11T12:43:55.167
> 
> 标签：asp-classic

几年前，我在 ASP 中创建了一个“sendmail”脚本，包括电子邮件格式验证和 CAPTCHA 验证。它运作良好。

我已经有一段时间没有通过表格收到任何询问了，所以我想自己测试一下联系页面。瞧，脚本似乎不再起作用。

有谁知道我的方法（请参见下文）在过去几年中是否已经过时？！现在在（经典）ASP 中有不同的推荐方式吗？

这是我脚本的第一部分（为保护隐私而更改了电子邮件地址）：

```
<%
Dim mail
Dim msgtext
Set mail = CreateObject("CDO.Message")
mail.To = "abcdef@ymail.com"
mail.Cc = "abcdefg@gmail.com"
mail.From = Request.Form("From")
mail.Subject = "Enquiry from website"

mail.TextBody = "From: " & Request.Form("Fname") & vbCRLF & "Message: " &  Replace(Request.Form("Body"),vbCrLf ,"") & vbCRLF & "Telephone: " & Request.Form("Phone") & vbCRLF

if not IsEmpty(Request.Form("btnTest")) then
    if TestCaptcha("ASPCAPTCHA", Request.Form("captchacode")) then
    else
        msgtext = "c"
    end if
end if

mail.Send()
'Destroy the mail object!
Set mail = nothing
msgtext = "y"
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T01:20:46.683

唯一让我震惊的是默认邮件服务器可能已停止/未找到。据我所知，指向特定服务器是一种很好的做法

```
mail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusing")=2
    'Name or IP of remote SMTP server
mail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserver")="smtp.server.com"
     'Server port
mail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserverport")=25 
mail.Configuration.Fields.Update
mail.Send
set mail=nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T01:49:43.613

毫无疑问，您最后添加了 Captcha，因此这将是通过取消定义其要求来测试的第一件事。还...

*   在“mail.Send”之后不需要 ()。
*   检查您的“发件人”变量是否为空。

# github - github API 搜索 - 限制和政策

> ID：13820699
> 
> 赞同：1
> 
> 时间：2012-12-11T12:43:58.770
> 
> 标签：github, github-api

我想知道 github 搜索 API 是否对请求数量有限制，而且我想知道是否可以将检索到的数据保存在我自己的数据库中，或者之间有一些策略。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:49:33.063

[http://developer.github.com/v3/#rate-limiting](http://developer.github.com/v3/#rate-limiting)说如下

> 对于未经身份验证的请求，我们将请求限制为每小时 60 个。对于使用基本身份验证或 OAuth 的请求，我们将请求限制为每小时 5,000 个。您可以检查任何 API 请求的返回 HTTP 标头以查看您的当前状态：
> 
> ```
> $ curl -i https://api.github.com/users/whatever 
> ```

至于保存数据，如果是你的就可以，如果是其他的也可以，但我不是律师：

[GitHub 服务条款](https://help.github.com/articles/github-terms-of-service)F.1 节：

> 我们对您提供给服务的材料不主张任何知识产权。您上传的个人资料和资料仍然属于您。但是，将您的页面设置为公开查看，即表示您同意允许其他人查看您的内容。通过将您的存储库设置为公开查看，您同意允许其他人查看和分叉您的存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:19:15.073

除了@CharlesB 给出的答案之外，[未经身份验证的请求也可以享受更高的速率限制](http://developer.github.com/v3/#unauthenticated-rate-limited-requests)，因为它们在查询字符串中包含客户端 ID 和秘密

```
$ curl -i https://api.github.com/users/whatever?client_id=xxxxxxxxxxxxxx&client_secret=yyyyyyyyyyyyyyyyyyyyy

HTTP/1.1 200 OK
Status: 200 OK
X-RateLimit-Limit: 12500
X-RateLimit-Remaining: 11966 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T05:33:46.717

添加到先前的答案，您 [现在（2013 年 7 月 2 日）](http://developer.github.com/changes/2013-07-02-rate-limit-reset/)可以准确地知道**[速率限制](http://developer.github.com/v3/#rate-limiting)重置时间**何时生效。

> 该信息现在在**新的`X-RateLimit-Reset`响应标头**中可用。

```
$ curl -I https://api.github.com/orgs/octokit

HTTP/1.1 200 OK
Status: 200 OK
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 42
X-RateLimit-Reset: 1372700873
... 
```

> X-RateLimit-Reset 标头提供[Unix UTC 时间戳](http://en.wikipedia.org/wiki/Unix_time)，让您知道新的速率限制生效的确切时间。
> 
> 重置时间戳也可作为**资源的****一部分使用`/rate_limit`**。

```
$ curl https://api.github.com/rate_limit

{
  "rate": {
    "limit": 60,
    "remaining": 42,
    "reset": 1372700873
  }
} 
```

# java - 如何从 cmd 启动使用预编译 DLL 的 java swing 应用程序？

> ID：13820703
> 
> 赞同：0
> 
> 时间：2012-12-11T12:44:12.797
> 
> 标签：java, windows, dll, java-native-interface

当我使用双击时，我的 java 应用程序完美启动。我自己的路：

```
PATH=...C:\Program Files\Java\jdk1.7.0_02\bin;... 
```

但是当我从 cmd 运行应用程序时：

```
C:\Program Files\Java\jdk1.7.0_02\bin>java.exe -jar C:\Users\zagorulkinde\Docume
nts\ps_client_lib\bin\Win32\GUItest.jar
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: C:\Window
s\System32\pc_client_lib.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform

        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1928)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1854)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at PC_client.lib.<clinit>(lib.java:10)
        at settings.load(GUItest.java:342)
        at GUItest.createAndShowGUI(GUItest.java:2681)
        at GUItest.access$4100(GUItest.java:851)
        at GUItest$22.run(GUItest.java:2728)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:117)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我正在尝试使用 x86 java 版本运行：

```
C:\Program Files (x86)\Java\jdk1.7.0_09\bin>java.exe -jar C:\Users\zagorulkinde\
Documents\ps_client_lib\bin\Win32\GUItest.jar
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no PC_cli
ent_lib in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at PC_client.lib.<clinit>(lib.java:10)
        at settings.load(GUItest.java:342)
        at GUItest.createAndShowGUI(GUItest.java:2681)
        at GUItest.access$4100(GUItest.java:851)
        at GUItest$22.run(GUItest.java:2728)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:244)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:163)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:151)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

如果我试图指定 dll：

```
C:\Program Files (x86)\Java\jdk1.7.0_09\bin>java.exe -Djava.library.path="C:\Use
rs\zagorulkinde\Documents\ps_client_lib\bin\Win32\Pc_client_lib.dll" -jar C:\Use
rs\zagorulkinde\Documents\ps_client_lib\bin\Win32\GUItest.jar
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no PC_cli
ent_lib in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at PC_client.lib.<clinit>(lib.java:10)
        at settings.load(GUItest.java:342)
        at GUItest.createAndShowGUI(GUItest.java:2681)
        at GUItest.access$4100(GUItest.java:851)
        at GUItest$22.run(GUItest.java:2728)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:244)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:163)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:151)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:48:04.093

您必须将 DLL 放在 JVM 可以找到的地方。通常，它应该位于您的应用程序文件夹下，但您应该`-Djava.library.path=PATH TO YOUR DLL`在运行 java.util 时指定选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:00:54.027

1.) -Djava.library.path 指定本地库所在的*路径*，它不指定库本身。（即 - 取出文件名，将其更改为`-Djava.library.path="C:\Use rs\zagorulkinde\Documents\ps_client_lib\bin\Win32\"`）

2.) 区分大小写可能是一个问题 - 您在不同的地方将文件称为“Pc_client_lib.dll”和“PC_client_lib”。确保您使用的名称`loadLibrary`与实际的 .DLL 文件名大小写相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:48:26.203

最安全的方法是将您的 DLL 文件放入`system32`文件夹中。

# delphi - 如何禁用泛型类型的调试信息

> ID：13820712
> 
> 赞同：2
> 
> 时间：2012-12-11T12:45:02.393
> 
> 标签：delphi, generics, compiler-options

我有以下代码（简化）：

```
program Project1;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  Unit1 in 'Unit1.pas';

var
  f: TFoo<Integer>;
begin
  f := TFoo<Integer>.Create;
  f.Baz;
  Readln;
end.

unit Unit1;

{$D-}

interface

type
  TFoo = class
  public
    procedure Bar(const s: string);
  end;

  TFoo<T> = class(TFoo)
  public
    procedure Baz;
  end;

implementation

uses
  TypInfo;

{ TFoo }

procedure TFoo.Bar(const s: string);
begin
  Writeln(s);
end;

{ TFoo<T> }

procedure TFoo<T>.Baz;
begin
  Bar(PTypeInfo(TypeInfo(T)).Name);
end;

end. 
```

`f.Baz`现在，当我进入时，`Unit1.TFoo<T>.Baz`虽然我明确禁用了该单元的调试信息，但我无法进入`TFoo.Bar`哪个是正确的。我认为这是因为泛型在内部是如何实现的（如模板），并且因为`TFoo<Integer>`在我的`Project1`. 当我添加以下单元时，我无法再进入`Baz`：

```
unit Unit2;

{$D-}

interface

uses
  Unit1;

type
  TIntegerFoo = TFoo<Integer>;

implementation

end. 
```

现在有什么方法可以完全删除泛型类型的调试信息，这样我就可以在任何地方（调试信息所在的位置）专门化该类型，但避免进入泛型类型的方法？`Generics.Collections.TList<T>`我想这一定是可能的，因为如果不启用“使用调试 .dcus”选项，我将无法执行任何方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:21:49.300

经过一些实验，似乎是否启用调试信息的确定由引用该类型的特定实例的第一个单元控制。

因此，如果编译器第一次遇到类型的实例化，启用调试信息，那么特定类型将使用调试信息进行编译。另一方面，如果第一次实例化是在没有调试信息的单元中，那么将没有调试信息。

在您的示例中，第一个（也是唯一一个）实例化`TFoo<Integer>`在 .dpr 文件中，该文件确实启用了调试信息。因此，如果您将 .dpr 文件移至`{$D-}`.dpr 文件中并设置`{$D+}`，`Unit1`您会发现没有 .dpr 的调试信息`TFoo<Integer>.Baz`。

我说第一次实例化的原因是可能有很多不同的单元实例化`TFoo<Integer>`。编译器遇到的第一个问题是确定实例化类型是否使用调试信息进行编译。

可以安排`TFoo<Integer>`有调试信息，但`TFoo<string>`没有调试信息。

* * *

> 我想这一定是可能的，因为如果不启用“使用调试 .dcus”选项，我将无法步进任何 Generics.Collections.TList 方法。

我无法解释。根据我的假设，调试信息应该可用于 TList 实例化，如果调试信息在您第一次实例化类时打开。

我怀疑调试器中可能存在错误。例如，我编写了以下程序：

```
{$APPTYPE CONSOLE}
uses
  Generics.Collections;
begin
  TList<Integer>.Create.Add(6);
end. 
```

当我在关闭启用调试 DCU 的情况下运行它时，我确实可以进入`Generics.Collections`. 但是我完全走错了地方。它降落在`TList<T>.Pack`。

所以，很抱歉我不能提供更多的见解，但是你问题的这个方面让我感到困惑。

# mysql - 用于存储友谊详细信息的数据库模式

> ID：13820714
> 
> 赞同：0
> 
> 时间：2012-12-11T12:45:22.413
> 
> 标签：mysql, database, database-design

我正在创建一个应用程序，用户依次使用她的 twitter/facebook/foursquare 帐户登录，并获取她关注的人的所有 ID 和其他详细信息（或将他们作为朋友列在她的列表中）

我已经提到了这些问题：

*   [友谊数据库模式](https://stackoverflow.com/questions/2910134/friendship-database-schema)
*   [单行友谊数据库模式与获取...](https://stackoverflow.com/questions/12984497/single-row-friendship-database-schema-with-getting-userid-from-one-column-or-the)

但唯一的一点是，上述设计侧重于“友谊”模型，而我想将系统建立在“跟随”模型的基础上。
在“友谊”模型中，两个用户相互添加/确认，而在“关注”模型中，一个用户可以关注另一个用户，无需确认。

我可以继续设计，其中一个表存储我的应用程序的所有用户，另一个存储他们关注的所有人员以及其他信息，但由于我对数据库设计不是很好，我担心这种情况当我最终复制很多行时。
例如：

*   如果 Kathy 在某个网络上关注 Ana，Steve 在其他网络上关注 Ana，我最终有两行 Ana，描述了与这两个用户的关系。这样好吗？
*   如果在不同的网络上，安娜和史蒂夫互相关注怎么办？这种关系有两行是可以避免的吗？
*   在某个网络上，史蒂夫跟随凯西，他们的关系将再次出现一排。这个可以吗？
*   Ana 很可能是 Kathy 在多个社交网络 (twitter+facebook) 上的朋友，我必须有两行来为同一个人 Ana 存储这两个网络的不同信息。这样好吗？

在数据库设计方面，我不是专业人士，通常是从数据库人员那里设计的，但这次是我的个人应用程序，所以我不太清楚什么是好的，什么不是。

这个系统可能会变得相当大，因为不同的用户最终会添加一个以上的社交网络帐户。我将在开始时使用 LAMP，并且基本上担心糟糕的数据库设计可能会增加复杂性。

任何关于模式的建议或想法都非常受欢迎。
如果需要更多信息，请发表评论。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:58:40.827

由于社交网络数量有限，将不同网络中的关系作为单个关系中的标志并不会*太浪费。*

例如，如果 Steve 和 Ana 在任何网络中连接，则该关系可以在一行中表示，并带有附加列来表示不同的关注/朋友关系。如果您的用户数量有限，那么这可能是可以接受的，因为它易于使用并权衡设计效率。

对于大型数据库，建议使用适当的关系，我会说您需要为每个用户的每个关系创建一个不同的记录。如果您有两个用户互相关注的场景，我想您可以针对两个用户之间的单个记录设置一个“isReciprocal”标志：

```
User1|User2|isReciprocal
Steve|Kathy|1 
```

其中当isReciprocal = 1时，他们互相跟随，如果为0，Steve跟随Kathy，但Kathy不跟随Steve。

如果关系发生变化（Steve 取消关注 Kathy，Kathy 开始关注 Steve），则可以更改该关系，以便 Kathy 是 User1，Steve 是 User2。希望这很清楚。

归根结底，设计是一个规模问题。如果您的用户数少于 10000 并且不经常更新，那么一些非常低效的设计是完全可以的。如果您要处理数以万计的记录和关系，并且不断更新，那么使设计更高效是非常明智的。

通常，一个小而快的解决方案可能会被过度设计，我认为在这些情况下，非标准化数据是可以接受的，因为您因此获得了易用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:54:14.927

如果您希望对数据库进行规范化，则每个关系都需要单独的一行。如果您存储了所有关系，假设将关注者 id 放在名为 followerID 的字段中，那么如果基于一个关注者删除该记录，则所有关注者都将被删除。所以是的，多条记录是个好主意。

您还可以做的是使用followed 和follower 的主键以及您需要的任何其他相关信息来设置一个基于Follow_Relationships 的关系表。这样，您只需对两个表执行连接即可。

我希望这有帮助！

# actionscript-3 - 否定指令

> ID：13820717
> 
> 赞同：1
> 
> 时间：2012-12-11T12:45:28.040
> 
> 标签：actionscript-3, apache-flex, flash-builder

我有一个布尔编译器指令

```
-define=CONFIG::dev,true 
```

我想知道是否有某种方式否定这个价值。例子：

```
CONFIG:dev{
    // the code if dev is true
}

!CONFIG:dev{
    // the code if dev is false
} 
```

# jquery - 模糊上的 jQuery Select2 标记

> ID：13820718
> 
> 赞同：10
> 
> 时间：2012-12-11T12:45:32.647
> 
> 标签：jquery, tags, jquery-select2

我正在使用 Select2 在我的应用程序中创建一个 Gmail 样式的电子邮件地址字段。它工作得很好，除了一种情况：当用户输入一个电子邮件地址并且没有在它之后放置空格或逗号，并且没有按 Enter 或 Tab 键时。例如，如果他们只是键入一个电子邮件地址，然后使用鼠标选择表单中的下一个字段，他们键入的电子邮件地址就会消失。

我在这里有一个示例 jsfiddle[来](http://jsfiddle.net/davertron/NjFFy/3/)说明问题。

这是我在隐藏输入上设置 select2 的方式：

```
$(function(){
    $('input').select2({
        tags: [],
        width: "300px",
        dropdownCss: {display: 'none'},
        tokenSeparators: [',', ', ', ' ']
    });
}); 
```

有没有办法让我设置 select2 以便 onBlur 它只需要剩下的并且当前不是标签并使其成为一个标签吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T16:22:36.833

现在在 select2 库的 3.3 版中使用“selectOnBlur”选项支持此功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T03:09:55.717

我有一个带有 select2（标签模式）和一个提交按钮的表单。默认情况下，当用户键入标签时，如果没有从下拉菜单中选择标签或按下触发控制键之一，用户输入将丢失，因为插件会在 blur 事件上关闭生成的输入 dom 对象。

我对这个问题的快速解决方法是破解插件模糊功能并添加以下行：

```
var val=this.search.val();
if($.trim(val)!='') this.onSelect({id:val,text:val}); 
```

一旦调用了模糊函数，上面的代码就会检查用户是否进入。如果有任何它触发选择事件并发送所需的对象。我传递的对象仅适用于标记模式下的 select2，如果您使用 select2 v3.2，则可以在第 1311 行的 AbstractSelect2 的模糊功能开始处插入此行。我希望这能让您了解如何自定义小部件根据您的需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-22T02:46:40.217

从4.0.3开始的[文档中：](https://select2.github.io/options.html)

```
$('select').select2({
  selectOnClose: true
}); 
```

如果用户点击其他地方，这将捕获选择并创建一个标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T12:57:27.083

我真的不明白您在这里要做什么，因为您在谈论电子邮件：

```
jQuery(element.val().split(",")).each(function () {
                data.push({id: this, text: this});
            }); 
```

但你可以试试这个：

```
var splitted = element.val().split(",");
for(var i=0,z=splitted.length;i<z;i++)
    data.push({id: splitted[i], text: splitted[i]}); 
```

顺便说一句，你的 jsfiddle 是不完整的。

# c++ - C++ iStream、If-Else 和向量

> ID：13820729
> 
> 赞同：0
> 
> 时间：2012-12-11T12:46:03.267
> 
> 标签：c++, vector, istream

我有这个 iStream 函数可以读取 .txt 数据文件，格式如下：

```
 Pink Floyd: Dark Side of the Moon
  0:01:30 - Speak to Me 
```

我的功能几乎可以完美运行。

这是我无法弄清楚的问题。1）当每首曲目添加到专辑时打印（输出）（因此打印`x`第一个专辑的副本，每个专辑都附有下一首曲目。2）创建新专辑时，它保留上一张专辑中的旧曲目，并继续一一添加。（所以最终专辑包含所有专辑中的每首曲目）

显然，我希望每张专辑只打印一次，每张专辑只有自己的歌曲......任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:32:42.233

我发现您的代码存在许多问题。

> `stringstream stringstreamFirst(line);`

您没有使用该变量`stringstreamFirst`，`line`此时为空。

> `Album anAlbum(artistName,albumTitle,trackVector);`

这条线有很多问题。

*   它使用了错误的值。
    第一行 , `artistName`,`albumTitle`和`TrackVector`是空的。当您最终看到一张新专辑时`artistName`，`albumTitle`、 和`TrackVector`是上一张专辑的专辑，而不是当前专辑。当您访问专辑中的曲目时，这些值是正确的——但这不是您想要创建新专辑对象的时候。
*   它在错误的地方。
    放置后，此语句为输入文件中的每一行创建一个`Album`对象。创建新专辑对象的正确位置是在输入文件中遇到新专辑条目时。

> `stringstream stringstreamNew(line);`
> `stringstream stringstreamNewNew(line);`

为什么使用复杂的名称，为什么需要两个变量？另一种方法是使用 but one `stringstream`，创建为`while`循环的第一行。

> if (!(line[8] == '-'))
> else if (line[8] == '-')

不要像这样复制你的布尔条件。如果您的意思是`else`（这就是您的意思），请使用`else`. 该行是专辑条目或曲目条目；没有别的了。

> else // 缺少这些行

您没有任何错误处理。如果您无法解析什么应该是专辑条目，或者什么应该是曲目条目，该怎么办？

你需要做什么（伪代码）：

```
while (getline(istr, line)) {
   stringstream linestream (line);
   if (line looks like an album line) {
      if (not the first line in the file) {
          // Create an album using the artist name, album title, and track vector
          // and add this album onto the vector of albums
      }
      // Parse the line for artist name and album title, preferably handling errors
      // Clear the trackVector that now pertains to the previous album
   }
   else {
      // Parse the line for track duration and name, preferably handling errors
      // Add the track to the track vector.
   }
}
// Create an album to cover the last album plus set of tracks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:15:19.997

是否`Album`可能存储对其构造函数参数的引用（甚至指针）？

不要那样做，这意味着只有一个曲目向量 - 称为`trackVector`- 在专辑之间共享，并且不断添加。

在阅读所有曲目之前，您应该有一个`addTrack`成员，`Album` *或者*不构建一个成员，`Album`具体取决于 a 是否`Album`是可变的。

此外，您从不修改`aC`- 您希望`artistName = artistName`完成什么？

# multithreading - 无法更新 GridPane

> ID：13820734
> 
> 赞同：0
> 
> 时间：2012-12-11T12:46:14.953
> 
> 标签：multithreading, events, javafx-2, javafx, event-dispatch-thread

我有一个带有网格 ( [GridPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html) ) 的简单应用程序和一个带有开始/停止按钮的简单工具栏。我的按钮操作如下所示：

```
startButton.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent actionEvent) {
            grid.change();
        }
    }); 
```

当我点击它时，网格会像它应该的那样改变。因为场景图不是线程安全的并且它仅由 FX 应用程序线程呈现，所以我已经放置了一个应该更新我的网格的服务：

```
private Service task = new Service(){
    @Override
    protected Task createTask() {
        System.out.println("Task created");
        return new Task<Void>() {
            @Override
            protected Void call() throws Exception {
                for (int i = 0; i < 3; i++) {
                    System.out.println("calling");
                    Platform.runLater(new Runnable(){
                        @Override
                        public void run() {
                            System.out.println("running");
                           grid.changeGeneration();
                            try {
                                Thread.sleep(1500L);
                            } catch (InterruptedException e) {
                                e.printStackTrace();  
                            }
                        }
                    });
                }
                return null;
            }
        };
    }
}; 
```

当我运行我的应用程序时，按下按钮后它给了我这个

> 任务创建 调用 调用 调用 运行 运行 运行

它重新计算网格模型，但它不想渲染视图，实际上网格在所有 Platform.runLater 完成后由 FX App Thread 渲染，但不是在 each 之后`running`。我的错误在哪里？我怎样才能让 FX App Thread 在每个之后渲染我的网格`running`？

**更新：在**[这里](https://forums.oracle.com/forums/thread.jspa?threadID=2474848&stqc=true) 得到了解决方案，但仍然不能完全理解为什么它拒绝工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:27:20.527

这里的原因很可能是您`Runnables`连续快速发布了三个，而 FX 队列没有机会在两者之间实际重新绘制。**由于没有更好的名称，重绘不会立即执行，而是添加到事件队列的末尾**。所以基本上，你的外部循环触发了三个`Runnables`，事件队列最终看起来像这样：|GridChange|GridChange|GridChange|Repaint|Repaint|Repaint|。

此外，你的 sleep 实际上阻塞了事件队列——你永远不应该`Thread#sleep(...)`在`Platform#runLater(...)`. 您实际上阻止了所有事件处理，包括重绘和用户输入，时间为 3x1500 毫秒。

搬出`Thread.sleep()`去`Runnable`，你会解决这两个问题。事件队列将接收 GridChange，有 1.5 秒的时间更新 UI，接收下一个 GridChange，依此类推...

# mysql - 将 Couchdb 共享或复制到 Mysql

> ID：13820741
> 
> 赞同：1
> 
> 时间：2012-12-11T12:46:55.360
> 
> 标签：mysql, database, couchdb, share, replicate

我正在尝试使用 couchdb 的软件。我不是编码员，我不明白 couchdb 是如何工作的，等等......所以对于那个软件，我想使用一个 php 中的网站，它是为与 mysql 一起工作而构建的。

有没有一种方法可以复制我需要的数据并从 couchdb 中删除这些文档，因为 couchdb 增长了很多并且瞬间填满了我的网络空间。

对于那些可能知道什么软件和我想做什么的人，我正在尝试让 ecoinpool 与 simplecoin 之类的 php 前端一起工作。如果失败了，获得一个已经开发并使用mysql的php，使用couchdb的网站有多难？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:08:00.620

我不会尝试将数据从 CouchDB 复制或共享到 MySQL。CouchDB 具有与 MySQL 截然不同的数据模型，因此充其量您最终会导致双方数据之间出现非常严重的不匹配。

另一方面，使用 CouchDB 而不是 MySQL 制作一个设计良好的基于​​ PHP 的网站界面应该不会那么难。CouchDB REST API 非常易于使用，并且有[很多库](http://wiki.apache.org/couchdb/Getting_started_with_PHP)可供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:57:37.993

通过一些编程，您可以将该数据导入 couchdb。这需要一些努力，由您决定是更喜欢构建导入器还是重新编程您的软件。我自己更喜欢建立一个进口商，因为否则你将无法再次更新 simplecoin 而不会破坏你的适应。

要创建一个导入器，我会使用我喜欢的脚本语言来监听你的 couchdb 数据库的 _changes API。然后对于每个新文档，我会将其格式化为 SQL 查询并将其插入 MySQL。

之后，您仍然需要创建一些脚本来删除 couchdb 上的旧文档，并找到一种方法来导入丢失的文档，以防您的导入器停止（这肯定会在某个时候发生）。

# .net - 从 xap 获取文件列表，在应用程序启动时存储在隔离存储中

> ID：13820742
> 
> 赞同：2
> 
> 时间：2012-12-11T12:46:56.420
> 
> 标签：.net, windows-phone, windows-phone-8, isolatedstorage

我正在创建一个应用程序，其中应用程序使用大量资产（文件和图像，文件数超过 100）。

可以在程序运行期间修改此资产。因此，我打算将这些文件复制到独立存储中。为此，我必须列出某个文件中可用的所有文件名。

稍后的文件计数。有没有办法以编程方式获取内容文件列表？这样我就可以递归地将这个文件从 XAP 复制到隔离存储中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:29:04.877

一旦安装在设备上，就无法查询 xap 文件的内容。

但是，在构建时，您可以轻松地生成这样的列表（使用 T4、PowerShell、CMD/BAT 脚本或简单的控制台应用程序）并让它以您可以在代码中轻松使用的格式输出列表。

这样做的好处是您的应用程序会更快一点，因为它不需要在每个设备上生成文件列表，您只需在您的开发/构建机器上执行一次。

# android - 如何捕获图像并保存在文件夹中

> ID：13820743
> 
> 赞同：2
> 
> 时间：2012-12-11T12:46:58.467
> 
> 标签：android

这是我的代码，它获取图像并将其保存在手机图像目录中。如何修改此代码以在内存中创建一个新文件夹并将捕获的图像保存在那里，并在主屏幕中显示所有图像。我按照[这个指南](http://labs.makemachine.net/2010/03/simple-android-photo-capture/)。

```
package makemachine.android.examples;

import java.io.File;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

 public class PhotoCaptureExample extends Activity 
{
protected Button _button;
protected ImageView _image;
protected TextView _field;
protected String _path;
protected boolean _taken;

protected static final String PHOTO_TAKEN   = "photo_taken";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    _image = ( ImageView ) findViewById( R.id.image );
    _field = ( TextView ) findViewById( R.id.field );
    _button = ( Button ) findViewById( R.id.button );
    _button.setOnClickListener( new ButtonClickHandler() );

    _path = Environment.getExternalStorageDirectory() + "/images 
  /make_machine_example.jpg";
}

public class ButtonClickHandler implements View.OnClickListener 
{
    public void onClick( View view ){
        Log.i("MakeMachine", "ButtonClickHandler.onClick()" );
        startCameraActivity();
    }
}

protected void startCameraActivity()
{
    Log.i("MakeMachine", "startCameraActivity()" );
    File file = new File( _path );
    Uri outputFileUri = Uri.fromFile( file );

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
    intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

    startActivityForResult( intent, 0 );
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
    Log.i( "MakeMachine", "resultCode: " + resultCode );
    switch( resultCode )
    {
        case 0:
            Log.i( "MakeMachine", "User cancelled" );
            break;

        case -1:
            onPhotoTaken();
            break;
    }
}

protected void onPhotoTaken()
{
    Log.i( "MakeMachine", "onPhotoTaken" );

    _taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

    _image.setImageBitmap(bitmap);

    _field.setVisibility( View.GONE );
}

@Override 
protected void onRestoreInstanceState( Bundle savedInstanceState){
    Log.i( "MakeMachine", "onRestoreInstanceState()");
    if( savedInstanceState.getBoolean( PhotoCaptureExample.PHOTO_TAKEN ) ) {
        onPhotoTaken();
    }
}

@Override
protected void onSaveInstanceState( Bundle outState ) {
    outState.putBoolean( PhotoCaptureExample.PHOTO_TAKEN, _taken );
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-27T06:44:43.910

此代码正在运行

```
public class MainActivity extends ActionBarActivity {

    protected Button _button;
    protected ImageView _image;
    protected String _path;
    protected boolean _taken;

    protected static final String PHOTO_TAKEN   = "photo_taken";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        _image = ( ImageView ) findViewById( R.id.imageView );
        _button = ( Button ) findViewById( R.id.buttonCapture );
        _button.setOnClickListener((android.view.View.OnClickListener) new ButtonClickHandler());

        _path = Environment.getExternalStorageDirectory() + "/MyFolder/"+System.currentTimeMillis()+".jpg";
    }

    public class ButtonClickHandler implements View.OnClickListener
    {
        public void onClick( View view ){

            Log.i("MakeMachine", "ButtonClickHandler.onClick()" );
            startCameraActivity();
        }
    }

    protected void startCameraActivity()
    {
        Log.i("MakeMachine", "startCameraActivity()" );
        File file = new File( _path );
        Uri outputFileUri = Uri.fromFile( file );

        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
        intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

        startActivityForResult( intent, 0 );
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        Log.i( "MakeMachine", "resultCode: " + resultCode );
        switch( resultCode )
        {
            case 0:
                Log.i( "MakeMachine", "User cancelled" );
                break;

            case -1:
                onPhotoTaken();
                break;
        }
    }

    protected void onPhotoTaken()
    {
        Log.i( "MakeMachine", "onPhotoTaken" );

        _taken = true;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 4;

        Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

        _image.setImageBitmap(bitmap);

    }

    @Override
    protected void onRestoreInstanceState( Bundle savedInstanceState){
        Log.i( "MakeMachine", "onRestoreInstanceState()");
        if( savedInstanceState.getBoolean( MainActivity.PHOTO_TAKEN ) ) {
            onPhotoTaken();
        }
    }

    @Override
    protected void onSaveInstanceState( Bundle outState ) {
        outState.putBoolean( MainActivity.PHOTO_TAKEN, _taken );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:51:13.243

嘿，根据需要在 ExternalStorage 中创建一个特殊目录，并将所有文件保存到该文件夹​​中。从该文件夹中检索所有文件并将它们显示在 Listview 或 Gridview 中。最好使用 currentTimeInMillis() 生成文件名，因为您想显示许多图像但使用相同的目录。

```
_path = Environment.getExternalStorageDirectory() + "/images 
  /make_machine_example.jpg"; 
```

而不是上面的行使用下面的行

```
_path = Environment.getExternalStorageDirectory() + "/images 
  /"+System.currentTimeMillis()+".jpg"; 
```

添加创建目录的代码：

```
File dir = new File("path/to/your/directory");
try{
  if(dir.mkDir()) {
     System.out.println("Directory created");
  } else {
     System.out.println("Directory is not created");
}catch(Exception e){
  e.printStacktrace();
} 
```

不要忘记添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# linux - RODBC 无法识别我的 odbc 设置

> ID：13820745
> 
> 赞同：17
> 
> 时间：2012-12-11T12:47:09.553
> 
> 标签：linux, r, unixodbc, rodbc

我在 Red Hat Linux 6 服务器上运行 R 2.15.2。我的目标是通过 RODBC 连接到另一台机器上的 MS SQL Server 数据库。我做了研究，从[微软支持网站](http://www.microsoft.com/en-us/download/details.aspx?id=28160)下载并安装了 Linux 版本的 MS SQL ODBC 驱动程序。我必须从源代码构建 unixODBC 版本 2.3.0，因为它是 Windows 驱动程序所必需的，并且不在 RHL 存储库中（存储库版本是 2.2.14）。

总之，经过一番努力，我终于把驱动安装好，配置好了，可以通过`isql`命令成功连接到SQL Server数据库：

```
$ isql -v test testuser testpass
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL> 
```

所以我知道我已经正确设置了我的`odbc.ini`和文件。`odbcinst.ini`

但是，当我尝试从 R 中访问 ODBC 连接时，会发生以下情况：

```
> test <- odbcDriverConnect('DSN=test;Database=RSQLTest01;Uid=testuser;Pwd=testpass')
Warning messages:
1: In odbcDriverConnect("DSN=test;Database=RSQLTest01;Uid=testuser;Pwd=testpass") :
   [RODBC] ERROR: state IM002, code 0, message [unixODBC][Driver Manager]Data 
   source name not found, and no default driver specified
2: In odbcDriverConnect("DSN=test;Database=RSQLTest01;Uid=testuser;Pwd=testpass") :
   ODBC connection failed 
```

这是`odbcDataSources`R中命令的结果：

```
> odbcDataSources()
named character(0) 
```

我一直在做一些研究，我认为解决方案（尽管我可能错了）可能与正确配置 ODBC 环境变量有关，以便 RODBC 知道去哪里查找`odbc.ini`。根据我的研究，我发现了以下可能相关的环境变量：`$ODBCINI, $ODBCSYSINI, $ODBC_ROOT $ODBC_INCLUDE, and $ODBC_LIBS.` 我对这些应该设置的内容有一个合理的想法，但我不确定如何永久设置它们，以便 RODBC 可以识别在哪里找到相应的文件。

任何人都可以为我阐明这一点吗？我不确定我是否正确理解环境变量在 linux 中的工作原理，尤其是为什么`isql`连接没有问题，但`RODBC`甚至找不到驱动程序/数据源。

注意：当我安装了 unixODBC 的 repo 版本时，使用 R 中的命令可以很好地安装 RODBC `install.packages('RODBC')`。但是，在我从源代码安装 unixODBC 2.3.0 后，由于依赖关系问题，RODBC 安装会失败，我不得不使用[此处发布的指南](http://carlo-hamalainen.net/blog/2012/05/11/r-makeflags-rpath-and-building-packages/)从源代码安装 RODBC 。有没有可能我一开始就没有正确配置 ODBC，这就是我现在遇到麻烦的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T21:48:52.390

哇，我以为我是唯一一个从事这种工作的人。我不得不解决同样的问题，发现最好的解决方案是使用 rjdbc。这更容易配置，因为 linux 或 osx 上的 ODBC 非常参差不齐。RJDBC 性能非常好，因为它使用本机 ms sql server jar 来执行查询。这是我们的一个脚本中的一个示例。您只需从 microsoft 下载 sqljdbc4.jar，然后将 install.package("RJDBC") 安装到您的环境中。我意识到你正试图让 ODBC 工作，我确实让它在 osx 上工作，但我放弃了由于 linux 的时间。

```
library(RJDBC);  

drv <- JDBC('com.microsoft.sqlserver.jdbc.SQLServerDriver', '/usr/local/project/dataproviders/jdbc/sqljdbc4.jar', identifier.quote="'"); 

ch <- dbConnect(drv, 'jdbc:sqlserver://the.server.address.net;databaseName=DataWarehouse', 'USERNAME', 'PASSWORD'); 

allsupp_allprod_allproc <- dbGetQuery(ch, paste("SELECT  [Date], Sum([Fail]) as Numerator, Sum([Pass] + [Fail]) as Denominator,'' as Annotation,'True'  as 'Use for CL' FROM [PSU_YieldData] Group by [Date] Order by [Date]")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T17:40:22.603

在 Ubuntu Server 我这样设置

* * *

*   编辑 ~/.bash_profile

    `nano ~/.bash_profile`

*   添加此行

    `export ODBCINI=/usr/local/etc/odbc.ini export ODBCSYSINI=/usr/local/etc`

* * *

然后 RODBC 会很好用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-20T01:07:27.370

它找不到驱动程序，因为您没有指定它！我也不明白 DSN 的东西应该如何工作，但这在类似情况下对我有用：

```
ch <- odbcDriverConnect('driver={SQL Server};server=servername;database=databasename;uid=username;pwd=password;')
sqlQuery(ch,'sql script',stringsAsFactors = FALSE) 
```

当然需要准确。并将 {SQL Server} 替换为您拥有的任何驱动程序。这是棘手的部分。服务器名称与 Management Studio 中下拉菜单中出现的名称相同，在您的情况下可能是“测试”。isql 必须自动使用正确的驱动程序。

即对于 MySQL，它可能是：

```
Driver={MySQL ODBC 5.1 Driver};Server=localhost;Database=myDataBase;User=myUsername;Password=myPassword;Option=3; 
```

我只是搜索“mysql odbc 连接字符串”，而不是任何特定于 R 的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-26T22:19:11.090

在 Mac OS 10.13.3 High Sierra 上配置 unixODBC 后，我也遇到了这个问题。我尝试配置我的 .Renviron 为 ODBCINI 设置特定于 R 的环境变量，但 RODBC 仍然不会列出我的数据源名称 (DSN)。此外，尽管能够与 isql 连接，但我无法找到在 ODBCinst.ini 中指定的驱动程序，甚至无法获得与 RODBC::ODBCDriverConnect() 一起使用的连接字符串。

我能够让 JDBC 连接正常工作，但我不想依赖 JVM，而且我已经为 RODBCext 编写了重要的数据库访问代码。

最终的工作很简单：

```
remove.packages('RODBC')
install.packages('RODBC', type="source") 
```

看来，如果您在 mac 上从源代码安装 RODBC，它会正确选择 odbc.ini 文件和 odbcinst.ini 文件。

感谢这篇文章对解锁密钥的微妙评论：http: [//eriqande.github.io/2014/12/19/setting-up-rodbc.html](http://eriqande.github.io/2014/12/19/setting-up-rodbc.html)

# python - 使用 matplotlib 清除 Tkinter Canvas 小部件的问题

> ID：13820748
> 
> 赞同：3
> 
> 时间：2012-12-11T12:47:15.797
> 
> 标签：python, matplotlib, tkinter, canvas

一旦将某些变量输入到输入字段并单击“绘图”按钮，这将绘制散射角与检测器距离的关系。该图显示在我创建的画布中。绘图方法是“def flup()”，大约是通过单击名为“bgra”的按钮执行的代码的一半。

当我更改输入字段中的变量然后再次点击绘图时，程序会在画布上添加另一个绘图，这很好。我想要做的是添加一个按钮，其命令是清除整个画布。

就在绘图方法“flup()”下面有一个名为 def clear() 的方法的开始，我想在其中定义一个函数，按钮将使用该函数来清除画布。您会注意到，该按钮已在其下方几行创建，称为“删除”。有人可以给我一个示例，说明我需要在 def clear() 方法中包含的一小段代码，以便该按钮可以清除画布。

```
from numpy import *
import matplotlib.pyplot as plt
fromTkinter import *
import tkMessageBox
from pylab import savefig
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg,NavigationToolbar2TkAgg
import matplotlib.backend_bases       
from matplotlib.figure import Figure

def rutherford():
    tkMessageBox.showinfo("hello world", j)
def N():
    tkMessageBox.showinfo("Variable N", "Number of alpha particles incident on foil")

def T():
    tkMessageBox.showinfo('Variable t', 'Thickness of foil in metres')

def K():
    tkMessageBox.showinfo('Variable E', 'Kinetic energy of alpha particles in joules')

def atom():
    tkMessageBox.showinfo('Variable Z', 'Atomic number of element from which the foil is made, or the name of the element')

class App:
    def __init__(self, master):
        frame = Frame(master) #creates the first frame

        Button(frame, text = "?", command=N).grid(row=1,column=2) #various help buttons
        Button(frame, text = "?", command=T).grid(row=2,column=2)
        Button(frame, text = "?", command=K).grid(row=3,column=2)
        Button(frame, text = "?", command=atom).grid(row=4,column=2)

        Nlabel = Label(frame, text = "N =").grid(row=1, column=0, sticky=E) #labels next to the entry frame
        tlabel = Label(frame, text="t =").grid(row=2,column=0, sticky=E)    
        Elabel = Label(frame, text="E =").grid(row=3,column=0, sticky=E)        
        Zlabel = Label(frame, text="Z =").grid(row=4, column=0, sticky=E)

        eN=Entry(frame)
        eN.grid(row=1,column=1)
        et=Entry(frame)
        et.grid(row=2,column=1)
        eE=Entry(frame)
        eE.grid(row=3,column=1)
        eZ=Entry(frame)
        eZ.grid(row=4,column=1)

        def flup():         #the plot
            N=float(eN.get())#turn string into float
            t=float(et.get())
            E=float(eE.get())
            Z=float(eZ.get())
            r=10*(10**-10)
            e=1.602*(10**-19)
            a=5*(10**30)
            i = linspace(math.pi/80, math.pi, 1000)
            list =[]

            for p in i:
                b = (N*a*t)/(16.0*(r**2))
                c = ((2.0*Z*(e**2))/(E*4.0*math.pi*8.854*(10**-12)))**2
                d = (1.0/(math.sin(p/2.0)))**4
                n=b*c*d
                list.append(n)

            f=Figure(figsize=(5,4), dpi=100)
            g=f.add_subplot(1,1,1)

            g.plot(i,list)

            canvas=FigureCanvasTkAgg(f, master=master)
            canvas.show()
            canvas.get_tk_widget().pack(side=LEFT, fill=BOTH, expand=1)

            canvas._tkcanvas.pack(side=TOP, fill=BOTH, expand=1)

        #def clear():

        bgra=Button(frame, text = "Plot", command=flup) #this button makes the plot
        bgra.grid(row=5,column=1)

        delete=Button(frame,text='Clear All', command=clear)
        delete.grid(row=5,column=2)

        frame2=Frame(master)

        b1=Button(frame2, text="Rutherford Scattering??", command=rutherford)
        b1.pack(side=LEFT)
        frame2.pack()
        frame.pack()

root = Tk()
app = App(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:06:22.087

要删除画布上的所有内容，请`delete`使用参数调用该方法`"all"`。我对matplotlib一无所知，但我猜你会做这样的事情：

```
canvas.get_tk_widget().delete("all") 
```

# ios - 将整数值绑定到标签中

> ID：13820755
> 
> 赞同：0
> 
> 时间：2012-12-11T12:48:08.850
> 
> 标签：ios

我必须绑定 Json 数据，字符串格式的数据在标签中绑定正常，但我无法在标签中绑定整数或浮点值。是否有任何语法可以在标签中绑定这些类型的值？

```
 NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:

                      showcost.text = [loans objectForKey:@"Cost"],
                      showname.text =  [loans objectForKey:@"Name"],nil]; 
```

我得到了`Name`，但我无法绑定`Cost`（答案是 12.34）。请给我一个继续的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:04:04.833

对于整数值

```
int cost = [[loans objectForKey:@"Cost"]intValue];
showcost.text = [NSString stringWithFormat:@"%d",cost]; 
```

对于浮点值

```
float cost = [[loans objectForKey:@"Cost"]floatValue];
showcost.text = [NSString stringWithFormat:@"%f",cost]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T13:01:02.810

您可以将字符串文字的属性用作

```
showcost.text =[NSString stringWithFormat:@"%f",[[loans objectForKey:@"Cost"]floatValue]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T12:57:31.497

如果 cost 是 float 类型，您可以使用 stringWithFormat 为其创建一个字符串值，以将 Decimal 浮点数打印为字符串：

```
showcost.text = [NSString stringWithFormat:@"%f", [loans objectForKey:@"Cost"]]; 
```

# javascript - Javascript：按三个值对对象数组进行排序

> ID：13820759
> 
> 赞同：3
> 
> 时间：2012-12-11T12:48:22.550
> 
> 标签：javascript, arrays, sorting

我有一个对象数组，我想使用 .sort() 函数对其进行排序。它应按三个值排序（首先按第一个值，然后按第二个值，最后按第三个值）。我已经尝试过类似以下的方法，但它似乎无法正常工作。

```
myArray.sort(function(a,b) {
     if (a.Value1 === b.Value1) {
         if (a.Value2 === b.Value2) {
             return (a.Value3 < b.Value3) ? -1 : (a.Value3 > b.Value3) ? 1 : 0;
         } else {
             return (a.Value2 < b.Value2) ? -1 : 1;
         }
     } else {
         if (a.Value2 === b.Value2) {
             return(a.Value1 < b.Value1) ? -1 : 1;
         } else {
             return (a.Value2 < b.Value2) ? -1 : 1;
         }
     }
 }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:55:25.717

它大部分都很好，但是你在`a.Value1 !== b.Value1`.

这是一个固定版本：

```
myArray.sort(function(a,b) {
     if (a.Value1 === b.Value1) {
         if (a.Value2 === b.Value2) {
             return (a.Value3 < b.Value3) ? -1 : (a.Value3 > b.Value3) ? 1 : 0;
         } else {
             return (a.Value2 < b.Value2) ? -1 : 1;
         }
     } else {
          return (a.Value1 < b.Value1) ? -1 : 1;
     }
}); 
```

[示范](http://jsfiddle.net/uZkDf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:06:09.010

为什么这么复杂？试试这个：

```
myArray.sort(function(a,b) {
    if(a.Value1 !== b.Value1) return (a.Value1 < b.Value1) ? -1 : 1;
    if(a.Value2 !== b.Value2) return (a.Value2 < b.Value2) ? -1 : 1;
    return (a.Value3 < b.Value3) ? -1 : 1;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:58:15.850

```
myArray.sort(function(a,b) {

    function getResult(first, second) {
      return (first < second) ? -1  : (first > second) ? 1 : 0;
    }

    if (a.Value1 !== b.Value1) return getResult(a.Value1, b.Value1);
    if (a.Value2 !== b.Value2) return getResult(a.Value2, b.Value2);
    return getResult(a.Value3, b.Value3);

 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T20:20:48.220

对我来说，这更有效和可读。另一方面，它适用于任意数量的字段

```
 List.sort(function (a, b) {
          var keyA = a.Field1;
          var keyB = b.Field1;

          if (keyA > keyB) return -1;
          if (keyA < keyB) return 1;

          keyA = a.Field2;
          keyB = b.Field2;

          if (keyA > keyB) return -1;
          if (keyA < keyB) return 1;

          keyA = a.Field3;
          keyB = b.Field3;

          if (keyA > keyB) return -1;
          if (keyA < keyB) return 1;

          //You can repeat this for any number of fields

          return 0;
      }); 
```

# c# - 类型参数继承上的泛型类型转换

> ID：13820760
> 
> 赞同：0
> 
> 时间：2012-12-11T12:48:24.033
> 
> 标签：c#

给定以下代码：

```
namespace sample
{
    class a { }

    class b : a { }

    public class wrapper<T> { }

    class test
    {
        void test1()
        {
            wrapper<a> y = new wrapper<b>();
            //Error 11  Cannot implicitly convert type 'sample.wrapper<sample.b>' to 'sample.wrapper<sample.a>' 
        }
    }
} 
```

从逻辑上讲，a 因为`b`是`a`，a`wrapper<b>`是 a `wrapper<a>`。那为什么我不能进行这种转换，或者我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:54:36.157

> 因为 b 是 a，所以 a`wrapper<b>`是 a`wrapper<a>`

好吧，对于 .NET 泛型类来说，情况并非如此，它们不能是协变的。您可以使用接口协方差实现类似的功能：

```
class a { }
class b : a { }

public interface Iwrapper<out T> { }
public class wrapper<T> : Iwrapper<T> {}

class test
{
    void test1()
    {
        Iwrapper<a> y = new wrapper<b>();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:53:59.543

这是一个协方差问题。

类`b`是一个`a`，但`wrapper<b>`不是一个`wrapper<a>`。

您可以使用 C# 4 的*协方差*语法来允许它，如下所示：

```
public interface IWrapper<out T> { ... }

public class Wrapper<T> : IWrapper<T> { ... } 
```

这将指示 CLR 将其`Wrapper<B>`视为`Wrapper<A>`.

（作为记录：C# 有大写约定；类名是 Pascal 大小写的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:02:45.853

让我们做一个场景。让我们调用类`a` `Mammal`，类`b` `Dog`，然后说`wrapper<T>`类是`List<T>`

看看这段代码发生了什么

```
List<Dog> dogs = new List<Dog>();  //create a list of dogs
List<Mammal> mammals = dogs;   //reference it as a list of mammals

Cat tabby = new Cat();
mammals.Add(tabby)   // adds a cat to a list of dogs (!!?!)

Dog woofer = dogs.First(); //returns our tabby
woofer.Bark();  // and now we have a cat that speaks foreign languages 
```

* * *

（我对[如何将基类儿童存储在字典中的答案的解释？](https://stackoverflow.com/questions/12423973/how-to-store-base-class-children-in-a-dictionary)）

# svn - 删除 SVN 修订

> ID：13820767
> 
> 赞同：2
> 
> 时间：2012-12-11T12:48:50.977
> 
> 标签：svn

我知道，这个主题已经[在这里](https://stackoverflow.com/questions/747713/subversion-retract-accidental-checkin)有很好的记录。但我找不到正确的答案。

几年前我们的老板对一位同事说，他必须将*ALL*放入SVN。他做了几次，总共大约**7.2 Gigs**。这现在已经完全过时了，必须从 SVN 中删除。注意：**所有修订都在一个 SVN 目录树**中，该目录树中的所有文档都应删除。

**我已经知道不能删除修订版，但是 7.2Gigs 对于过时的业务部门来说是太多的备份空间。**

```
root: svn://192.168.123.123/
delete: svn://192.168.123.123/OUTDATED_DIR_TREE 
hold: svn://192.168.123.123/java
hold: svn://192.168.123.123/cpp 
```

是否可以将 java 和 cpp 路径导出到新安装中（如果需要，可以进行新修订）并**保留注释和版本标签**？

> svn，版本 1.5.2 (r32768) 编译于 2009 年 2 月 25 日，16:12:21
> 
> 版权所有 (C) 2000-2008 CollabNet。Subversion 是开源软件，见[http://subversion.tigris.org/](http://subversion.tigris.org/) 本产品包含 CollabNet 开发的软件（[http://www.Collab.Net/](http://www.Collab.Net/)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:05:52.690

[svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.filtering)应该是你需要的：

1.  使用 svnadmin dump 导出完整的 repo
2.  从不再需要的转储中删除信息，例如

    svndumpfilter --drop-empty-revs --renumber-revs 排除 OUTDATED_DIR_TREE <转储文件>过滤转储

3.  使用 svnadmin load 重新创建 repo

当然，所有用户都必须重新签出完整的存储库。

# iphone - 在 viewDidLoad 中更改 UIImageView 的 CGRect？

> ID：13820776
> 
> 赞同：1
> 
> 时间：2012-12-11T12:49:31.863
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview, viewdidload

我敢肯定我以前遇到过这种情况，但我不记得是什么原因造成的。我已经使用情节提要定位了 UIImageView (bar_001)，并且我想从 viewController 中以编程方式更改其位置。我的问题是，当从 viewDidLoad 访问时，UIImageViews 的大小和原点都设置为零，我错过了什么？

```
#import "ViewController.h"

@interface ViewController ()
@property(nonatomic, weak) IBOutlet UIImageView *bar_001;
@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    [self animateBars_V1];
}

- (void)animateBars_V1 {
    CGRect barRect = [[self bar_001] frame];
    NSLog(@"HEIGHT: %f", barRect.size.height);
    NSLog(@"WIDTH : %f", barRect.size.width);
}

@end 
```

安慰：

```
2012-12-11 12:53:27.777 TESTBED[4279:907] HEIGHT: 0.000000
2012-12-11 12:53:27.785 TESTBED[4279:907] WIDTH : 0.000000 
```

故事板：

![在此处输入图像描述](../Images/6c0f0cc0cf80d785c741976538ff456e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:18:13.153

我有时也看到类似的问题。我会尝试在 viewDidAppear 而不是 viewDidLoad 中调用 animateBars_V1() 方法。到时，viewDidLoad 被调用，视图已加载到内存中但可能尚未绘制。我必须先查找一些东西，然后才能给出一个明确的原因来解释它为什么会这样。

# android - 不调用带有缓冲区的 PreviewCallback 和 PreviewCallback

> ID：13820781
> 
> 赞同：6
> 
> 时间：2012-12-11T12:49:50.257
> 
> 标签：android, callback, camera

我对 Android 4.0.x 的预览回调有疑问。我设置了一个摄像头，创建了一个显示摄像头图像`on previewCallback`事件的表面。一切正常。

但在 Android 4.0.x 中，既不`onPreviewCallback`调用也不调用`onPreviewCallbackWithBuffer`. 这个问题有解决方法吗？

我想截屏并且不想使用`takePicture()`-way，因为它会在短时间内冻结实时图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:13:33.520

您必须在surfaceChanged 方法中调用setPreviewCallback，而不仅仅是在surfaceCreated 中。

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    if (mHolder.getSurface() == null){
      return;
    }

    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    try {
        mCamera.setPreviewCallback(this);
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T08:38:32.653

你可以调用 setOneShotPreviewCallback

```
mCamera.setOneShotPreviewCallback(new Camera.PreviewCallback() {
                @Override
                public void onPreviewFrame(byte[] data, Camera camera) {
                    Camera.Parameters parameters = camera.getParameters();
                    int format = parameters.getPreviewFormat();
                    //YUV formats require more conversion
                    if (format == ImageFormat.NV21 || format == ImageFormat.YUY2 || format == ImageFormat.NV16) {
                        int w = parameters.getPreviewSize().width;
                        int h = parameters.getPreviewSize().height;
                        // Get the YuV image
                        YuvImage yuv_image = new YuvImage(data, format, w, h, null);
                        // Convert YuV to Jpeg
                        Rect rect = new Rect(0, 0, w, h);
                        ByteArrayOutputStream output_stream = new ByteArrayOutputStream();
                        yuv_image.compressToJpeg(rect, 100, output_stream);
                        byte[] byt = output_stream.toByteArray();
                        FileOutputStream outStream = null;
                        try {
                            // Write to SD Card
                            File file = createFileInSDCard(FOLDER_PATH, "Image_"+System.currentTimeMillis()+".jpg");
                            //Uri uriSavedImage = Uri.fromFile(file);
                            outStream = new FileOutputStream(file);
                            outStream.write(byt);
                            outStream.close();
                        } catch (FileNotFoundException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        } finally {
                        }
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T06:33:33.693

我也有类似的问题。`PreviewCallbackWithBuffet`我在相机准备好之前进行了初始化。为了解决这个问题，我使用了以下代码：

```
_camera.addCallbackBuffer(createPreviewBuffer(new Size(width, height)));
                    _camera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {
                        @Override
                        public void onPreviewFrame(byte[] bytes, Camera camera) {
                            processingRunnable.setNextFrame(bytes, camera))
                        }
                    });
                    _camera.startPreview(); 
```

希望能帮助到你

# c++ - 递归调用模板函数 (C++)

> ID：13820782
> 
> 赞同：3
> 
> 时间：2012-12-11T12:49:55.163
> 
> 标签：c++, templates, recursion, c++11

我正在编写一个模板化的数学矩阵类来适应一些新的 c++11 特性，基本声明如下：

```
template <typename Type, int kNumRows, int kNumCols>
class Matrix { ... }; 
```

该类有一个成员函数来返回其次要之一（稍后用于计算 NxN 矩阵的行列式）。

```
Matrix<Type, kNumRows - 1, kNumCols - 1> minor(const int row, const int col) {
  static_assert(kNumRows > 2, "");
  static_assert(kNumCols > 2, "");

  ...
} 
```

然后我创建了一个非成员函数来计算任何方阵的行列式：

```
template <typename Type, int kSize>
Type determinant(const Matrix<Type, kSize, kSize>& matrix) {
  switch (kSize) {
  case 2:
    return 0; // For now unimportant
  case 3:
    // Recursively call the determinant function on a minor matrix
    return determinant(matrix.minor(0, 0));
  }
  ...
} 
```

在 main() 中，我创建了一个 3x3 矩阵并调用`determinant`它。**这不会编译。**编译器有效地移动到案例 3，创建一个次要矩阵并调用`determinant`它。**然后它再次进入`case 3`，通过尝试创建一个 1x1 次要生成一个 static_assert。**

问题很简单：我在这里遗漏了什么吗？是否不允许递归调用这样的模板化函数？这是编译器错误（我对此表示怀疑）？

为了完整起见：我正在使用 Clang++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:56:09.547

编译器生成所有代码路径，即使这些路径在执行期间并未全部访问（并且实际上可能在优化步骤中被删除）。因此，`determinant<Type, kSize - 1, kSize - 1>`总是被实例化，即使对于`kSize`< 3。

您需要部分专门化您的功能以防止这种情况发生，您需要`determinant`适当地重载您的功能：

```
template <typename Type>
Type determinant(const Matrix<Type, 2, 2>& matrix) {
  ...
} 
```

顺便说一句，这使得`switch`函数中的语句变得多余。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:00:09.423

模板决定了在编译时做什么，而一个`switch`语句决定了在运行时做什么。编译器会为所有 switch 案例生成代码，或者至少验证其有效性，即使正确的案例在编译时是“显而易见的”。

而不是使用`switch`，尝试重载行列式：

```
template <typename Type>
Type determinant(const Matrix<Type, 1, 1>& matrix) {
    return matrix(0,0);
}

template <typename Type>
Type determinant(const Matrix<Type, 2, 2>& matrix) {
    return 0; // (incorrect math)
}

template <typename Type, int kSize>
Type determinant(const Matrix<Type, kSize, kSize>& matrix) {
    return determinant(matrix.minor(0,0)); // (incorrect math)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:56:17.230

您需要在编译时使用模板专业化进行切换：

```
template <typename Type, int kSize>
struct Determinate {
    Type operator()(const Matrix<Type, kSize, kSize>& matrix) const {
        // Recursively call the determinant function on a minor matrix
        return Determinate<Type, kSize-1>{}(matrix.minor(0, 0));
    }
};
template <typename Type>
struct Determinate<Type, 2> {
    Type operator()(const Matrix<Type, kSize, kSize>& matrix) const {
        return 0; // For now unimportant
    }
};
template <typename Type, int kSize>
Type determinant(const Matrix<Type, kSize, kSize>& matrix) {
    return Determinate<Type, kSize>{}(matrix);
} 
```

# ruby-on-rails-3 - 安装 therubyracer 时出错 error failed to build gem native extension

> ID：13820784
> 
> 赞同：2
> 
> 时间：2012-12-11T12:50:17.537
> 
> 标签：ruby-on-rails-3

我将此命令提供给命令提示符“buncle install”..它给出了错误“安装 therubyracer”。当我安装 therubyracer 时，我收到此错误“安装 therubyracer 错误错误无法构建 gem 本机扩展”。任何知道的人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T05:35:51.540

您可以使用 brew 中的 Libv8 而不是 gem 中的 Libv8。您可以通过以下命令执行此操作：

```
$ gem uninstall libv8

$ gem install therubyracer 
```

# delphi - 迭代编辑框并将值与Delphi中的先前值进行比较

> ID：13820786
> 
> 赞同：2
> 
> 时间：2012-12-11T12:50:35.897
> 
> 标签：delphi, pascal, editbox

我正在做一个学校项目，我有 10 个文本框（5 对）。

这个想法是每对的总和最多可以是“3”。所以

[1] [2]

[1] [0]

...

[2] [1]

我认为在“onChange”事件期间检查这个太费时了，所以我决定用一个按钮来检查所有这些。只要任何一对不满足要求，它就会抛出一个 showmessage() 。

现在有没有办法检查每一对并检查它们的值是否小于或等于三并且不是负数？我知道我可以通过编写大量代码来手动完成，但我希望尽可能保持干净。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:04:32.047

在一个窗体上放置十个`TEdit`控件。由于您是手动创建的，因此您需要使它们在代码中易于访问，并且没有超级优雅的方法可以做到这一点。但这有效：

在您的实施部分，定义

```
type
  TEditorPair = record
    First,
    Second: TEdit;
  end; 
```

`FEditors: array[0..4] of TEditorPair;`并向您的表单类添加一个私有字段。做

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  FEditors[0].First := Edit1;
  FEditors[0].Second := Edit2;
  FEditors[1].First := Edit3;
  FEditors[1].Second := Edit4;
  FEditors[2].First := Edit5;
  FEditors[2].Second := Edit6;
  FEditors[3].First := Edit7;
  FEditors[3].Second := Edit8;
  FEditors[4].First := Edit9;
  FEditors[4].Second := Edit10;
end; 
```

现在，选择所有十个编辑器控件，`OnChange`并向它们添加一个公共事件。

```
procedure TForm1.EditorChange(Sender: TObject);

  procedure FailPair(PairIndex: integer);
  begin
    FEditors[PairIndex].First.Color := clRed;
    FEditors[PairIndex].Second.Color := clRed;
  end;

  procedure PassPair(PairIndex: integer);
  begin
    FEditors[PairIndex].First.Color := clWindow;
    FEditors[PairIndex].Second.Color := clWindow;
  end;

var
  i: Integer;
  n1, n2: integer;
begin
  for i := 0 to high(FEditors) do
  begin
    if (FEditors[i].First.Text = '') or (FEditors[i].Second.Text = '') then
      Continue;
    if TryStrToInt(FEditors[i].First.Text, n1) and TryStrToInt(FEditors[i].Second.Text, n2) then
      if InRange(n1+n2, 0, 3) then
        PassPair(i)
      else
        FailPair(i)
    else
      FailPair(i);
  end;
end; 
```

[示例编译EXE](http://privat.rejbrand.se/TenEditors.exe)

如果您要打高尔夫球，`EditorChange`程序可以缩短到

```
procedure TForm1.EditorChange(Sender: TObject);

  procedure PairFeedback(PairIndex: integer; Pass: boolean);
  const
    Colors: array[boolean] of TColor = (clRed, clWindow);
  begin
    FEditors[PairIndex].First.Color := Colors[Pass];
    FEditors[PairIndex].Second.Color := Colors[Pass];
  end;

var
  i: Integer;
  n1, n2: integer;
begin
  for i := 0 to high(FEditors) do
  begin
    if (FEditors[i].First.Text = '') or (FEditors[i].Second.Text = '') then
      Continue;
    PairFeedback(i, TryStrToInt(FEditors[i].First.Text, n1) and
      TryStrToInt(FEditors[i].Second.Text, n2) and InRange(n1+n2, 0, 3));
  end;
end; 
```

我们使用了一些“技巧”，例如布尔短路（惰性）评估。

# android - 使用通过 USB 的套接字将文件从设备传输到 PC

> ID：13820788
> 
> 赞同：3
> 
> 时间：2012-12-11T12:50:35.967
> 
> 标签：android, sockets, usb

我能够通过 WiFi 网络将文件从我的 android 设备传输到 pc，但无法弄清楚如何使用套接字通过 USB 传输文件（遵循这篇文章：[connecting-android-to-the-pc-over-usb](http://qtcstation.com/2011/03/connecting-android-to-the-pc-over-usb/)）。有没有人曾经尝试过它，是否有可能......如果是这样，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:10:13.447

这是不可能的。USB 连接没有插座。您也不能通过 USB 电缆进行 IP 连接。当然，您可以为 PC 编写自己的固件和设备驱动程序。

# c# - 如何在c#metro app中将文件选择器限制在一个位置

> ID：13820789
> 
> 赞同：1
> 
> 时间：2012-12-11T12:50:39.417
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在用 C# 开发一个地铁应用程序。我正在使用文件选择器来保存和打开文件。现在，我想将用户限制在一个位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:47:28.210

或者你可以创造性地使用 UI。打开一个屏幕，您已经从您选择的位置预加载了某种网格视图或列表视图中的文件，并允许用户从中进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:43:37.310

无法使用 FilePicker 将用户限制在一个位置。这是[来自论坛的消息来源](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1e59c78f-6c37-4915-b731-714613030b72)，证实了这一点。一种可能性是您可以使用[SuggestedStartLocation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.suggestedstartlocation.aspx)设置您希望他们使用的位置，然后大多数人可能会使用该默认位置。

# php - 如何从 AsyncTask 返回一个数组列表？

> ID：13820790
> 
> 赞同：3
> 
> 时间：2012-12-11T12:50:43.807
> 
> 标签：php, android, mysql, android-asynctask

我有一个问题如下：我必须从 android 的 mysql 中获取一些数据，为此我使用 php 来完成，但是由于我使用 android 4.0，所以通过`AsyncTask`. 问题是我不知道如何返回结果`arraylist`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:52:05.333

您可以创建`interface`，将其传递给`AsyncTask`（在构造函数中），然后调用方法`onPostExecute`

例如：

你的界面：

```
public interface OnTaskCompleted{
    void onTaskCompleted(values);
} 
```

您的活动：

```
public YourActivity implements OnTaskCompleted{
    //your Activity
    YourTask  task = new YourTask(this); // here is the initalization code for your asyncTask
} 
```

还有你的 AsyncTask：

```
public YourTask extends AsyncTask<Object,Object,Object>{ //change Object to required type
    private OnTaskCompleted listener;

    public YourTask(OnTaskCompleted listener){
        this.listener=listener;
    }

    //required methods

    protected void onPostExecute(Object o){
        //your stuff
        listener.onTaskCompleted(values);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:02:00.060

一种方便的方法是使 AsyncTask 成为 Activity 类中的匿名类。然后在 onPostExecute 方法中，您可以从创建 AsyncTask 的方法访问属于您的 Activity + final 对象的所有字段。

# google-chrome - Chrome 说：资源解释为图像，但使用 MIME 类型文本/javascript 传输：“ "

> ID：13820791
> 
> 赞同：4
> 
> 时间：2012-12-11T12:50:47.607
> 
> 标签：google-chrome, yepnope

在 webapp 中，我`yepnope.js`用作加载器（主要是因为它能够加载 CSS 和 JS）。

但是，对于**yepnope**加载的任何内容，Chrome 都会发出警告：

> **资源解释为图像，但使用 MIME 类型文本/javascript 传输：`<some js file>`**

或者

> **资源解释为图像，但使用 MIME 类型 text/css 传输：`<some css file>`**

就执行而言，这不会造成任何问题，但我不明白的是 Chrome 如何将纯 JS 或 CSS 文件解释为 IMAGE。

以及如何解决这个问题？

此外，无论从 YepNope 外部加载什么，都可以在没有任何警告的情况下完美加载。

**PS** :: 我没有启用任何扩展。唯一启用的是**PageSpeed**。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T17:07:28.843

坐下来放松一下，这只是一个警告。

yepnope 用于`<img>`预加载资源。这就是为什么会有警告。

阅读[yepnope.js](https://github.com/SlexAxton/yepnope.js/blob/master/yepnope.js)。`preloadFile()`_

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:29:34.743

This is answered by the yepnope team here: [https://github.com/SlexAxton/yepnope.js/issues/32](https://github.com/SlexAxton/yepnope.js/issues/32)

# git - 为什么每个命令都必须在 git bash 中输入“git”？

> ID：13820793
> 
> 赞同：7
> 
> 时间：2012-12-11T12:49:04.813
> 
> 标签：git, repository

```
git status
git add
git clone 
git push
git commit.... 
```

为什么 Git bash 不允许您输入 git 命令，例如：

```
status
add
clone
push 
```

然后对于所有非 git 命令类型“nongit”或其他东西

```
nongit cd
nongit ls... 
```

或者这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T13:06:07.373

这样内部的 git 命令不会与现有的 shell 命令冲突。

在现代 CLI 工具（如 git 功能）中，通常将其分解为通过内部命令调用的子工具。然后，这些命令可以采用特定的参数来整理工具界面。`git status`意思是“调用”的`status`命令`git`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T13:01:46.723

也许 git-sh 是您正在寻找的：检查[https://github.com/rtomayko/git-sh](https://github.com/rtomayko/git-sh)或在 Debian/Ubuntu 中安装包 git-sh

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:52:43.347

也许你可以试试 GIT Prompt：

[http://volnitsky.com/project/git-prompt/](http://volnitsky.com/project/git-prompt/)

# django-crispy-forms - 是否可以在 django-cripsy-forms 中默认 helper.form_tag 为 False？

> ID：13820794
> 
> 赞同：0
> 
> 时间：2012-12-11T12:50:55.070
> 
> 标签：django-crispy-forms

我已经开始在 django 项目中使用 django-cripsy-forms。默认情况下，我希望crispy 不为每个表单打印标签。我知道我可以为每个表单创建一个助手并设置`helper.form_tag = False`属性。然而，这对于所有现有的表格来说是很麻烦的。

有谁知道是否可以覆盖默认的脆皮设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:10:25.433

我发现自己处于类似的境地。我想出的是一个混合视图，如下所示。我仍然必须将此 mixin 添加到相关视图中，但我发现它比添加`helper`到所有表单中更好。至少我可以更改所有`helper`未定义表单的默认行为。

此方法仅适用于基于类的视图。如果您使用基于函数的视图，您可以通过添加一个`prepare_form`函数并在每次在视图中使用表单时调用它来完成类似的行为。

```
CrispyFormsMixin 类（对象）：
    def get_form（自我，form_class）：
        form = super(CrispyFormsMixin, self).get_form(form_class)
        # 为crispy_forms 添加一个默认助手
        如果不是 getattr(form, 'helper', None):
            form.helper = FormHelper()
            form.helper.form_tag = False
        退货表格

```

# c# - 简单的构造函数链

> ID：13820803
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:51:23.237
> 
> 标签：c#

所有，我有一个应用程序我想从另一个应用程序或作为一个独立的实用程序启动。为了方便从 appB 启动 appA，我在`Main()`/Program.cs中使用了以下代码

```
[STAThread]
static void Main(string[] args)
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new SqlEditorForm(args));
} 
```

现在，在`SqlEditorForm`我有两个构造函数

```
public SqlEditorForm(string[] args)
    : this()
{
    InitializeComponent();

    // Test if called from appB...
    if (args != null && args.Count() > 0)
    {
        // Do stuff here...
    }
} 
```

和聋哑人

```
public SqlEditorForm()
{
    // Always do lots of stuff here...
} 
```

这对我来说看起来不错，但是当作为独立 ( `args.Length = 0`)运行时，`SqlEditorForm(string[] args)`构造函数被调用，并且在它进入构造函数执行之前`InitializeComponent();`，它会初始化该类的所有全局变量，*然后*直接进入默认构造函数。

*问题，构造函数的链接似乎以错误的顺序发生。我想知道为什么？*

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:53:49.557

将所有逻辑移动到带参数的构造函数，并从无参数的构造函数中调用该构造函数，并传递默认参数值：

```
public SqlEditorForm()
    :this(null)
{        
}

public SqlEditorForm(string[] args)
{   
    InitializeComponent();
    // Always do lots of stuff here...

    if (args != null && args.Count() > 0)
    {
        // Do stuff here...
    }
} 
```

# c# - 在 x 间隔后取消计时器

> ID：13820804
> 
> 赞同：0
> 
> 时间：2012-12-11T12:51:23.753
> 
> 标签：c#, timer

我有一个计时器，它应该以 500 毫秒的间隔运行 x 次。目前我的代码看起来像这样：

```
 var i = 0;
 var times = 10;
 timer = new System.Threading.Timer(_ =>
 {
    if (timer == null || i >= times)
        return;

    Console.WriteLine("Run " + i);

    if (i < times - 1)
        i++;
    else
    {
        timer.Dispose();
        timer = null;
    }
 }, null, 500, 500); 
```

如果我确保在计时器变量中只创建和引用一个计时器，这是取消计时器的可靠方法吗？

间隔的数量在运行时是可变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:42:47.703

处理计时器看起来很安全。我会将 i 和 times 变量设为私有，而不是方法的一部分。这会创建更快的代码。此外，计时器委托可能同时在不同线程上运行的可能性很小，请参阅[http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)，所以我可能会使用 Interlocked .增量法。

也许是这样的：

```
class Foo
{
  volatile int runCount;
  int maxRunCount;
  Timer timer;

  void RunFor(int max)
  {
    maxRunCount = max;
    timer = new System.Threading.Timer(_ =>
    {
      if (timer == null) return;
      Console.WriteLine("Run " + runCount);

      if (Interlocked.Increment(ref runCount) == maxRunCount)
      {
          timer.Dispose();
          timer = null;
      }
    }, null, 500, 500);
  }
} 
```

**[编辑]**

在查看代码时，我可能会在 dispose 计时器周围加锁，以防止出现竞争条件。

```
 if (...)
    {
       lock(this)
       {
          if (timer != null) timer.Dispose();
          timer = null;
       }
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:42:32.300

您应该改用`System.Timers.Timer`该类...
它同时支持`Stop()`和`Start()`方法。

简短的例子：

```
System.Timers.Timer timer = new System.Timers.Timer();
var i = 0;
var times = 10;

public SetupTimer()
{
    timer.Interval = 500;
    timer.Elapsed += OnTimerElapsed;
    timer.Start();
}

private void OnTimerElapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // Logic

    if (i > times)
    {
       timer.Stop();
    }
} 
```

# c# - 单元测试返回 void 的方法

> ID：13820809
> 
> 赞同：15
> 
> 时间：2012-12-11T12:51:44.710
> 
> 标签：c#, unit-testing, dependency-injection

想要对以下类中的方法进行单元测试

```
public class DeviceAuthorisationService : IDeviceAuthorisationService
{
    private DeviceDetailsDTO deviceDetailsDTO = null;
    private IDeviceAuthorisationRepositiory deviceAuthorisationRepositiory;

    public DeviceAuthorisationService(IDeviceAuthorisationRepositioryService paramDeviceAuthorisationRepository)
    {
        deviceAuthorisationRepositiory = paramDeviceAuthorisationRepository;
    }

    public void AuthoriseDeviceProfile(long paramUserID, string paramClientMakeModel)
    {
        if (deviceDetailsDTO == null)
            GetCellPhoneDetails(userID);

        if (deviceDetailsDTO.IsDeviceSelected == false)
            throw new SomeCustomExceptionA();

        if (deviceDetailsDTO.CellPhoneMakeModel.ToLower() != paramClientMakeModel.ToLower())
            throw new SomeCustomExceptionB;
    }

    public void UpdateDeviceStatusToActive(long userID)
    {
        if (deviceDetailsDTO == null)
            throw new InvalidOperationException("UnAuthorised Device Profile Found Exception");

        if (deviceDetailsDTO.PhoneStatus != (short)Status.Active.GetHashCode())
            deviceAuthorisationRepositiory.UpdatePhoneStatusToActive(deviceDetailsDTO.DeviceID);
    }

    private void GetCellPhoneDetails(long userID)
    {
        deviceDetailsDTO = deviceAuthorisationRepositiory.GetSelectedPhoneDetails(userID);

        if (deviceDetailsDTO == null)
            throw new SomeCustomException()
    }

} 
```

笔记：

*   方法名称 = AuthoriseDeviceProfile 返回 void
*   该方法检查 userSentMakeModel 与存储在 db 匹配中的那个
*   如果匹配 - 它只是返回（即不改变任何状态）

我们将如何对这个方法进行单元测试？

*   嘲笑了回购
*   涵盖了“抛出异常”的场景
*   **问题是如何对 ALL WENT WELL 的场景进行单元测试，即用户；s makeModel 与存储库匹配；s makeModel**

非常欢迎任何使此可测试的设计建议提前谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T12:57:47.550

由于您的方法返回 void，它可能具有一些您可以测试/断言的副作用。

在您的情况下，一个选项是提供`IDeviceAuthorisationRepositioryService`. 然后，您可以检查是否`UpdatePhoneStatusToActive`发生了呼叫。这是使用[Moq](http://code.google.com/p/moq/)的解决方案：

```
var mock = new Mock<IDeviceAuthorisationRepositioryService>();

var service = new DeviceAuthorisationService(mock.Object);
service.UpdateDeviceStatusToActive(....);

mock.Verify(x => service.UpdatePhoneStatusToActive(), Times.Never()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T12:53:59.997

如果一个方法是无效的，那么它应该有一些可观察到的副作用——否则它是没有意义的。因此，您无需测试返回值，而是测试副作用。在这种情况下，看起来可能是在哪些情况下引发了哪些异常。

（在这里，“抛出异常”被认为是一种副作用；您当然也可以将其视为一种隐式的返回值......）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T12:55:20.653

注入一个模拟存储库。测试是否调用了存储库上的某些方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T12:55:07.870

您可以在单元测试中设置异常预期。在 nUnit 中，它看起来像这样：

```
[Test]
[ExpectedException(typeof(InvalidOperationException))]
public void TestAuthoriseFail()
{
    // do something that should make the tested method throw the exception
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T13:05:32.380

即使您的方法返回 void，它也必须做一些对您有用的事情（否则它将是一个毫无意义的方法）。

从您的代码中，我猜该`AuthoriseDeviceProfile`方法正在做的基本上有两种“有用”的东西：

*   调用上的`GetSelectedPhoneDetails`方法`IDeviceAuthorisationRepositiory`
*   根据特定条件抛出各种异常

因此，要对该方法进行单元测试，您应该执行与此相对应的两件事：

*   注入一个模拟`IDeviceAuthorisationRepositiory`并让它记录和/或断言是否`GetSelectedPhoneDetails`被调用
*   练习引发各种异常的测试方法，并在它们被抛出时捕获它们以验证：
    *   实际上抛出了一个异常
    *   引发的异常适用于每种情况

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-14T12:50:35.950

```
 [TestMethod]
        public void AuthoriseDeviceProfileTest()
        {
            long paramUserID=1, string paramClientMakeModel=test";
            IDeviceAuthorisationService DeviceAuthorisationService= new DeviceAuthorisationService();

            try
            {

                DeviceAuthorisationService.AuthoriseDeviceProfile(paramUserID, paramClientMakeModel);
                Assert.IsNull(paramUserID);

            }
            catch (Exception e)
            {
                Assert.AreNotEqual("Exception of type was thrown", e.Message);
            }
        }
    } 
```

# symfony-1.4 - 我可以在 symfony1.4 中连接没有 Propel 或 Doctrine 的 Db

> ID：13820813
> 
> 赞同：0
> 
> 时间：2012-12-11T12:52:12.490
> 
> 标签：symfony-1.4

我将在现有的 symfony1.4 项目中工作。在这个项目中，他们没有使用数据库连接。

现在我想从数据库中保存和检索一些记录。所以我需要建立一个数据库连接。我可以在不使用 Propel 或 Doctrine 的情况下连接数据库吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:26:58.197

Doctrine 和 Propel 都是 PDO 之上的包装器

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

如果不需要 Data Mappers 和 ActiveRecord，可以直接使用它。

# javascript - Javascript：检查是否触发了 onClick

> ID：13820816
> 
> 赞同：0
> 
> 时间：2012-12-11T12:52:33.910
> 
> 标签：javascript, javascript-events, onclick

我正在尝试以编程方式确定元素的 onClick 事件是否被触发。例如，如果元素被禁用，则事件不应触发。这就是我想出的：

```
function check(elm) {
   elm.exonclick = elm.onclick;
   var clicked = false;
   elm.onclick = function(oEvent) {
      clicked = true;
      if (elm.exonclick) elm.exonclick(oEvent);
   };
   elm.click();
   elm.onclick = elm.exonclick;
   elm.exonclick = undefined;
   return clicked;
} 
```

所以在这种情况下，函数应该返回 true：

```
<a onClick="foo(); bar();" /> 
```

在这种情况下，它应该返回 false：

```
<a onClick="foo(); bar();" disabled="disabled" /> 
```

但我有两个问题：

1.  由于某种原因，表达式`elm.exonclick = elm.onclick`始终为空。
2.  我的自定义 onclick 函数在这两种情况下都会触发，即使它不应该触发。因此，这两种情况都返回 true，这是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:00:39.937

至于你问题的第一点。请注意，如果单击处理程序不会内联（在 html 代码中）或使用注册`someelement.onclick = function() {...}`，您将无法访问处理程序。在您的情况下，您正在使用`onClick`属性，然后引用`onclick`（小写）也许这就是它为空的原因。

# javascript - Arranging JSON DATA

> ID：13820818
> 
> 赞同：0
> 
> 时间：2012-12-11T12:52:40.507
> 
> 标签：javascript, jquery, json, jsonp

I have a JSON url file, which I have grabbed the data from and wrote out to an li. The link to the JSON file is [https://www.inquicker.com/facility/americas-family-doctors.json](https://www.inquicker.com/facility/americas-family-doctors.json). The link to my fiddle file is [http://jsfiddle.net/VVnSC/17/](http://jsfiddle.net/VVnSC/17/). I am trying to narrow down the times to the Next Available time for each location. So I only have 1 time (the next available time) for each location Brentwood, Smyrna, and Spring Hill. I am also trying to get rid of the Location name before the dash in the name so it just displays the person's name. All help will be greatly appreciated, Thanks.

```
<!DOCTYPE html>
<html>
<head>
<title>AFD TEST</title>
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js">   </script>
<script>
$(document).ready(function(){
$.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json',
    function(data){
    console.log(data.facility);
    $.each(data.schedules, function(i, name){
        times=''
            if (name.available_times.length){
                times='<ul>'
                $.each(name.available_times,function(i,o){
                    for (var i; i < 1; i++) {
                    times+='<li><a href="'+ name.available_times[0].url +'">'+o.when+'</a></li>'
                    }
                })
                times+='</ul>'
            }
            else{
               times='<ul><li>No Time Available</li></ul>'                    
            }
        $('#names').append('<li>' + (name.name) + times + '</li>');
    });
});
});
</script>
</head>
<body>
<ul id="names"></ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:04:05.867

You should use regex. Something like

```
var regexp = /- (.*)/g;
var nameShort = regexp.exec(name.name); 
```

The name will then be located in nameShort[1]

so in your code replace

```
$('#names').append('<li>' + (name.name) + times + '</li>'); 
```

with

```
var regexp = /- (.*)/g;
var nameShort = regexp.exec(name.name);
$('#names').append('<li>' + (nameShort[1]) + times + '</li>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:21:19.680

Using regexp is the better option if there is a pattern

Just change this code snippet

```
$('#names').append('<li>' + (name.name) + times + '</li>'); 
```

with this

```
$('#names').append('<li>' + (name.name.replace(/.*?-\s/,'')) + times + '</li>'); 
```

Try this and I have update here

```
http://jsfiddle.net/VVnSC/47/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:28:16.950

You will have to do some fancy date & time comparison, parsing and comparing the days and times.

The following parses the times and dates (see [this fiddle](http://jsfiddle.net/mccannf/qUvuB/6/) for how it works). This also requires `date.js` (it is added as a resource in the fiddle):

```
$(document).ready(function(){
    $.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json',
        function(data){

            var earliest = {};
            var doctor = {};
            var links = {};
            $.each(data.schedules, function(i, name) {
                var location = name.name.split(' - ')[0];
                var dr_name = name.name.split(' - ')[1];
                if (name.available_times.length) {
                   if (location in earliest) {   // location has already been stored.
                      var newTime = parseAvailableDate(name.available_times[0].when);
                      if (newTime.isBefore(earliest[location])) {
                         earliest[location] = newTime;
                         doctor[location] = dr_name;  
                         links[location] = name.available_times[0].url;
                      }                    
                   }
                   else {
                      earliest[location] = parseAvailableDate(name.available_times[0].when); 
                      doctor[location] = dr_name; 
                      links[location] = name.available_times[0].url;                       
                   } 
               }                    
            });
            for (i in earliest) {
                $("#names").append("<ul>Location: "+i+"<li>Doctor: "+doctor[i]+"</li><li>Time: <a href='"+links[i]+"'>"+earliest[i].toString("dddd dd MMMM yyyy H:mm tt")+"</a></li></ul>");         
            }
    });
});

function parseAvailableDate(dateString) {
    var trimmedString = dateString.replace(/^\s\s*/, '');
    var avTime=trimmedString.split(' ')[0],
        ampm=trimmedString.split(' ')[1],
        avDay=trimmedString.split(' ')[2];
    var avDate = Date.parse("next "+avDay);
    avDate.addHours(avTime.split(':')[0]).addMinutes(avTime.split(':')[1]);
    if (ampm == "pm" && avTime.split(':')[0] != "12") avDate.addHours(12);

    return avDate;
} 
```

**Edit**

If the locations are fixed and you have an order in mind, just change this:

```
 for (i in earliest) {
                $("#names").append("<ul>Location: "+i+"<li>Doctor: "+doctor[i]+"</li><li>Time: <a href='"+links[i]+"'>"+earliest[i].toString("dddd dd MMMM yyyy H:mm tt")+"</a></li></ul>");         
            } 
```

to:

```
 displayDetails("Brentwood", earliest, doctor, links);
            displayDetails("Smyrna", earliest, doctor, links);
            displayDetails("Spring Hill", earliest, doctor, links); 
```

and create this function ([see another fiddle](http://jsfiddle.net/mccannf/qUvuB/17/)):

```
 function displayDetails(location, earliest, doctor, links) {
            $("#names").append("<ul>Location: "+location+"<li>Doctor: "+doctor[location]+"</li><li>Time: <a href='"+links[location]+"'>"+earliest[location].toString("dddd dd MMMM yyyy H:mm tt")+"</a></li></ul>");         
   } 
```

# ios - 在ios中修改GSM DATA

> ID：13820821
> 
> 赞同：1
> 
> 时间：2012-12-11T12:52:44.830
> 
> 标签：ios, networking, encryption, gsm

我正在寻找加密 GSM 数据（不是 VOIP），我发布[这个](https://stackoverflow.com/questions/13529101/intercept-gsm-data-in-ios)，我阅读发布的链接，我可以在设备中编译和运行应用程序。（越狱模式）。

主要问题：

1.  我可以加密 GSM 语音数据吗？
2.  我可以通过 GSM 网络发送加密数据吗？
3.  如果是，我可以再次解密吗，我的意思是电话/网络，发送时，是否会修改数据结构？

只是为了澄清一下，现在我找不到如何让 GSM 数据加密，但我想知道我正在做的事情是否可以在我花费时间和精力之前完成。

我正在寻找 iOS/网络​​专家 :) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:18:20.983

语音数据在从手机到第二方的过程中使用不同的有损编解码器进行压缩/解压缩。因此，我看不到任何以“众所周知的方式”成功加密和解密它的方法。可能有一些技术可以添加一些噪音并将其过滤掉，但我不确定它们的安全性。

# windows-7 - 使用 MTM 进行自动化测试，但没有构建服务器

> ID：13820824
> 
> 赞同：0
> 
> 时间：2012-12-11T12:52:52.470
> 
> 标签：windows-7, tfs, visual-studio-2012, coded-ui-tests, microsoft-test-manager

有没有办法在本地机器上使用 Microsoft 测试管理器进行自动化测试？没有构建服务器？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:29:30.503

可以使用命令行 tcm.exe 踢出测试用例，自动运行测试用例。如果它们设置为自动化，它们会在本地运行。

# .htaccess - htaccess 重写匹配一个精确的查询字符串

> ID：13820828
> 
> 赞同：0
> 
> 时间：2012-12-11T12:53:04.350
> 
> 标签：.htaccess

我正在尝试重定向对`main/WinnersDetails.asp?ID=167`to的请求`http://www.the-domain-name.org.uk/winners/simon-bingham.html`。但是，我的重写规则不起作用。

```
RewriteRule ^main/WinnersDetails.asp?ID=167$ http://www.the-domain-name.org.uk/winners/simon-bingham.html [R=301] 
```

我认为这是导致重定向失败的 url 的查询字符串部分，但我不确定如何修改规则以使其工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:04:10.710

您无法匹配重写规则中的查询字符串。您需要在重写条件下匹配`%{QUERY_STRING}`变量：

```
RewriteCond %{QUERY_STRING} ^ID=167$ 
RewriteRule ^main/WinnersDetails.asp$ http://www.the-domain-name.org.uk/winners/simon-bingham.html? [R=301,L] 
```

# java - 使用 Applet 和 Apache POI 打开 Excel 文件

> ID：13820831
> 
> 赞同：2
> 
> 时间：2012-12-11T12:53:21.643
> 
> 标签：java, excel, applet, apache-poi

我有这个代码

```
try {
  url       = new URL("http://miprueba.co.nf/prueba.xls");
  input     = url.openStream();
  bookModel = new HSSFWorkbook(input);
} catch {
  ...
} 
```

在服务器的 miprueba.co.nf 文件夹中，我有“myapplet.jar”和“prueba.xls”以及一个带有“poi-3.9-2021203.jar”的子目录“lib”

这是我在代码“bookModel = new ...”行中从控制台获得的消息

```
network: cache not found [URL: http://miprueba.co.nf/lib/poi-3.9-20121203.jar, versión: null]

network: Connectin http//miprueba.co.nf/lib/poi-3.9-20121203.jar con proxy=DIRECT

network: CleanupThread used 5 us

network: Downloading resource: http//miprueba.co.nf/lib/poi-3.9-20121203.jar
 Content-Lenght: 1.821.732
 Content-Encoding: null

network: Cache not found [URL: http//miprueba.co.nf/, versión: null]

network: Cache not found [URL: http//miprueba.co.nf/org/apache/poi/hssf/usermodel/HSSFWorkbook.class, versión: null]

network: Connecting http//miprueba.co.nf/org/apache/poi/hssf/usermodel/HSSFWorkbook.class con proxy=DIRECT
network: CleanupThread used 5 us

Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook
 at applettest.Variables.<init>(Variables.java:50)
 at applettest.myApplet.jButton2ActionPerformed(myApplet.java:124)
....
....
.... 
```

有什么帮助吗？我希望能够从 excel 文件“prueba.xls”中读取一个数字。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:35:23.780

关键线是：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook 
```

您缺少运行时类路径中的 Apache POI jar。您应该修复它以便您的应用程序正确加载它，或者生成一个包含您的代码和所有依赖项的单个 jar。无论哪种方式，如果您想使用 POI，您需要在运行时提供它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:07:28.123

如果认为 .jar 文件的服务器端 MIME 类型不正确。

如果我查看从 POI 网站下载的 poi-3.9-20121203.jar，我有 1,869,113 个字节。你的日志说 1.821.732 字节。

另一种可能性是您使用 Java 7 重新编译了库，而 Applet 使用 Java 6 运行。

这是您的*.htaccess*

> AddType 应用程序/java-archive .jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:30:54.860

我从上面得到的是 - 你试图在 ie 中使用第三方 jar`applet`来读取`excel`。要使小程序使用第三方 jar，请使用`jarsigner`.

签署您的第三方 jar 将它们放入`classpath`，然后它应该可以工作。

# windows-phone-7 - Windows Phone -> MS Blend 4 中的动画点进度条

> ID：13820834
> 
> 赞同：0
> 
> 时间：2012-12-11T12:53:35.927
> 
> 标签：windows-phone-7, blend

我想将这个简单的动画添加到介绍屏幕。它在屏幕上显示移动的点，如何添加？简单地添加进度条组件不会做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:01:42.183

我认为不可能在带有文件（gif）或其他文件的页面 Starter 应用程序（“闪屏”）上添加简单的动画。然而，这是一个非常好的方法和示例，它解释了如何添加个人动画“SplashScreen”

-> [http://www.abhisheksur.com/2011/05/creating-animated-splash-screen-in.html](http://www.abhisheksur.com/2011/05/creating-animated-splash-screen-in.html)

或者这个：

-> [windows phone 7 中的启动画面加载进度动画](https://stackoverflow.com/questions/7763343/splash-screen-load-progress-animation-in-windows-phone-7)

# c# - LINQ：获取列表中列表的所有项目

> ID：13820836
> 
> 赞同：3
> 
> 时间：2012-12-11T12:53:47.433
> 
> 标签：c#, linq

我有一个包含另一个 ObservableCollection 的 ObservableCollection。

```
ObservableCollection<MyModel> models = new ObservableCollection<MyModel>(); 
```

我的模型看起来像这样：

```
public class MyModel
{
    public ObservableCollection<MyModel2> list2 { get; set; }
    public string Property1 { get; set; }
}

public class MyModel2
{
    public string Property2 { get; set; }
    public string Property3 { get; set; }
} 
```

现在我想在“Property2”==“test1”和“Property3”==“test2”的模型中找到所有 MyModel2 项目

我知道如何在一个 list2 中搜索以找到正确的项目，但我想在模型集合中搜索所有“list2”。

```
var result = from mod 
             in list2
             where mod.Property2 == "test1" && mod.Property3 == "test2"
             select mod; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:57:06.503

听起来你想要这样的东西：

```
var query = from model in models
            from model2 in model.list2
            where model2.Property2 == "test1" && model2.Property == "test2"
            select model2; 
```

或以非查询表达式形式：

```
var query = models.SelectMany(model => model.list2)
                  .Where(model2 => model2.Property2 == "test1"
                                   && model2.Property == "test2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:59:10.207

```
var result =
    models.SelectMany(item => item.list2.Where(model => model.Property2 == "test1" && model.Property3 == "test2")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:59:25.790

[`Enumerable.SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)并[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)在“内部”列表中：

```
models.SelectMany(m => 
    m.list2.Where(m2 => m2.Property2 == "test1" && m2.Property3 == "test2")); 
```

# c++ - 如何正确取消映射 boost::interprocess 中的共享内存？

> ID：13820837
> 
> 赞同：0
> 
> 时间：2012-12-11T12:53:46.767
> 
> 标签：c++, multithreading, boost, boost-interprocess

我`boost::interprocess::managed_shared_memory`用于进程间通信。为了增长/缩小，共享内存必须在每个使用它的进程中取消映射。鉴于我有两个线程，这是如何完成的？

就我搜索`boost`文档而言，不存在类似 unmap/detach 函数的东西，所以也许我只需要删除指针？这行得通吗：（未经测试/未编译）

```
MyThreadClass::operator() () {
    // mutex for thread safe write of Abord/Done fields
    std::pair<boost::interprocess::named_mutex*, std::size_t> mutex =
        sharedSegment->find<boost::interprocess::named_mutex>("Mutex");
    // stop all threads?
    std::pair<bool*, std::size_t> abord = sharedSegment->find<bool>("Abord");
    // is work of the thread done?
    std::pair<bool*, std::size_t> done = sharedSegment->find<bool>("Done");

    while(! (*abord.first) ) {
        // id == id of thread, if more threads are used
        if (! (done.first)[id] ) {
            this->doSomethingUseful();
            mutex.first->lock();
            (done.first)[id] = true;
            mutex.first->unlock();
        } else {
            // when work is done, this thread has nothing to do
            //   until the main application tells us so
            // by the time we sleep, we can detach the shared memory
            // do some busy waiting (change to observer pattern if everything works)
            delete mutex;
            delete abord;
            delete done;
            boost::this_thread::sleep(boost::posix_time::seconds(1));
            // map variables again
            mutex = sharedSegment->find<boost::interprocess::named_mutex>("Mutex");
            abord = sharedSegment->find<bool>("Abord");
            done = sharedSegment->find<bool>("Done");
        }
    }

    // is thread really finished
    std::pair<bool*, std::size_t> killed = sharedSegment->find<bool>("Killed");
    mutex.first->lock();
    (killed.first)[id] = true;
    mutex.first->unlock();
}

MainApplication::someFunction() {
    done = sharedSegment->construct<bool>("Done")[noThreads](false);
    killed = sharedSegment->construct<bool>("Killed")[noThreads](false);

    for (unsigned int i = 0; i < noThreads; ++i) {
        // construct new threads with some parameters
        new boost::thread(MyThreadClass(...));
    }

    while ( someCondition ){
        // set every thread into working mode
        mutex->lock();
        for (unsigned int j = 0; j < noThreads; ++j) done[j] = false;
        mutex->unlock();

        // wait until every thread has finished (busy waiting again)
        blockUntilThreadsFinish();

        // every thread finished computation here 
        // change size of shared memory here
        // since busy waiting is used, the shared memory will be mapped
        //   every second ==> grow/shrink can fail!
        // if observer pattern is used, this should work, since the thread
        //   sleeps as long, as nothing is observed
    }

    mutex->lock();
    (*abord) = true;
    mutex->unlock();
} 
```

我也相信我必须使用一些观察者模式来使这个 100% 线程安全（参见源代码中的注释）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:12:35.280

删除 shared_memory 对象将分离共享内存。尽管它确实不会影响您的流程资源。

# .net - WCF 和自定义集合序列化

> ID：13820841
> 
> 赞同：1
> 
> 时间：2012-12-11T12:53:51.277
> 
> 标签：.net, wcf, serialization, collections, datacontract

我确定我不是第一个提出这个问题的人，但我没有在 SO 和 Google 中找到适合我的答案......

我有以下自定义集合：

```
[Serializable]
public class BaseCollection<T>: ICollection<T>
{
}

[CollectionDataContract]
[Serializable]
ProductsCollection : BaseCollection<Product>
{
    [DataMember]
    public int CategoryId {get;set;}
} 
```

现在，我转移了使用 WCF 的实例`ProductsCollection`......问题是 WCF 没有正确转移我的自定义属性 CategoryId。它始终为 0（默认为 int）。

在[http://msdn.microsoft.com/en-us/library/aa347850.aspx](http://msdn.microsoft.com/en-us/library/aa347850.aspx)他们说`CollectionDataContract`应该解决它，并且集合将被序列化到我的特定集合而不是 ArrayOfProduct。

我错过了什么吗？

如果 DataContract 序列化程序不可能，是否可以为我的特定类编写某种 MyCustomContract 序列化程序，以便根据需要对我的集合进行序列化/反序列化？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:39:12.380

（这`DataContractSerializer`是 WCF 默认值）仅序列化集合项，但没有额外的属性。

请参阅此[答案](https://stackoverflow.com/questions/13508229/trouble-with-datacontractserializer/13524894#13524894)以获取解决方法。

# asp.net-mvc-3 - 如何从模型中搜索父ID？

> ID：13820842
> 
> 赞同：1
> 
> 时间：2012-12-11T12:53:55.030
> 
> 标签：asp.net-mvc-3, linq, razor, parent-child

我需要在视图中显示一些父子关系数据。以下是我的代码：

```
@model PagedList.IPagedList<Test.Domain.TestTable> 
<table width="100%">
    <tr>
        <td>Name</td>
        <td>Parent</td>
    </tr>
    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ParentID)
        </td>
    </tr>
    }
    <tr>
        <td>
            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
            -----------------
            -----------------
        </td>
    </tr>
</table> 
```

现在我想显示父名称而不是父 ID，它在数据库中具有以下结构：
**ID** **Name** **ParentID**
**1**   **John**    **Null**
**2**   **Dean**   **1**
**3**   **Sam**    **1**

* * *

为了显示父名称，我尝试了以下代码，但这些都不起作用：

*   `@Model.Where(screenParent => screenParent.ID == item.ParentID).Select(screenParent => new { screenParent.Name})`
    它显示 `System.Linq.Enumerable+WhereSelectEnumerableIterator`2[Test.Domain.TestTable,<>f__AnonymousType5`1[System.String]]`

* * *

您能建议为什么它显示在代码行上方吗？
还可以做些什么来实现父名称而不是父 ID。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:29:30.507

在这里做几个假设。

您的模型上是否有 Parent 的属性，或者您只是拉入 ParentID？如果您只输入 ID，我建议您更改模型/映射，以便您通过 FK 提取整个对象引用。

如果您已经在拉入整个 Parent 对象，请知道实体框架不会自动为您延迟加载您的 Parent 。您必须在查询 TestTable 时明确告诉它加载它。

您可以通过 2 种不同的方式执行此操作。

1.  使您的父属性虚拟。IE

    公共虚拟测试表父{获取；放; }

    然后，当您尝试访问 TestTable.Parent 时，它将从数据库中加载。这将允许您访问该名称。

2.  查询测试表时显式加载父级，即

    myDBContext.TestTables.Include("YourParentPropertyName").Where(....);

您视图中的最终结果将如下所示：

```
 @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Parent.Name)
        </td>
    </tr>
    } 
```

让我知道这是否有帮助。

# php - 数据库复杂3路连接查询

> ID：13820845
> 
> 赞同：1
> 
> 时间：2012-12-11T12:54:09.263
> 
> 标签：php, mysql, database-design, join

![表](../Images/1dcc2f2252fdd98c6975b878c8515016.png)

嗨，我有以下 3 个表，其中包含示例数据

患者：1,DUMMY PT, 78936, 1987-07-18

Custom_fields : **1** , 1 , '血压' , input , '病历'

患者信息：1、1、80/90 等等等等，**1**

* * *

我想要的是当我非常耐心的页面时，获取 'patient_info' 的所有行，其中 pt_id=patients.patient_id 然后获取 custom_fields.title=cf_id where doctor_id=$id 并显示全部。

从上面给出的数据示例来看，它应该如下所示：

患者： DuMMY pt 个人资料页面：-

血压：80/90 等等

任何提示我应该如何将这些表连接在一起？

注意：我试过：

```
SELECT patient_info.info,custom_fields.title FROM patient_info where patient_info.pt_id='8' and custom_fields.id=patient_info.cf_id and custom_fields.doctor_id = '10'
join patients on patient_info.pt_id=patients.patients_id
join custom_fields on patient_info.cf_id=custom_fields.id 
```

其中 10 和 8 已经给出（php 中的 $vars），但在“加入患者”附近出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:00:07.973

你可以使用下面的代码

```
select * from patients P,Custom_fields CF,patient_info PI where PI.pt_id=p.patient_id
and PI.cf_id=CF.id and CF.doctor_id='$id'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:18:54.143

我觉得应该是[左连接](http://www.w3schools.com/sql/sql_join_left.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:10:17.623

尝试这个：

```
SELECT p.info,cf.title 
FROM patient_info p
INNER JOIN patients ps ON p.pt_id=ps.patients_id
INNER JOIN custom_fields cf ON p.cf_id=cf.id
WHERE p.pt_id='8' AND cf.doctor_id = '10' 
```

# jquery - 在 jQuery 中单击 div 时切换类？

> ID：13820846
> 
> 赞同：0
> 
> 时间：2012-12-11T12:54:10.853
> 
> 标签：jquery

基本上，我有一个 div 块，我想在点击时替换它的类。

我的 HTML：

```
<div class="lol">       
</div> 
```

我的 jQuery 代码：

```
$('.lol').toggleClass('troll'); 
```

这输出：

```
<div class="lol troll">
</div> 
```

**如何用 troll 完全替换类名 lol？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:56:05.613

使用[`.removeClass()`](http://api.jquery.com/removeClass)方法

```
$('.lol').removeClass('lol').addClass('troll'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:01:12.313

如果您只想用另一个类替换一个类，您可以使用：

```
$(".lol").removeClass("lol").addClass("troll"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:00:22.453

如果您想用一个替换多个类名，您可以执行以下操作...

```
$(".lol").attr("class", "troll"); 
```

它只是重写类名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:58:08.477

`removeClass`在“巨魔”之前“大声笑” ，或者`addClass`同时切换它们：

```
$('.lol').toggleClass('lol').toggleClass('troll'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T12:58:21.253

您可以切换两个类

```
$('.lol').toggleClass('troll').toggleClass('lol'​);​ 
```

你可以像这样更短

```
$('.lol').toggleClass('troll lol');​ 
```

[演示](http://jsfiddle.net/PCWtY/2/)（警报框显示结果窗口正文中的内容）

# google-visualization - 将 Pandoc 的 Webtex URI 用于更大的 Latex 方程

> ID：13820852
> 
> 赞同：3
> 
> 时间：2012-12-11T12:54:33.237
> 
> 标签：google-visualization, pandoc

我正在尝试通过在终端中使用以下命令来增加 Pandoc 使用 Google Charts API 输出的 LaTeX 方程的大小：

```
pandoc -s --webtex=http://chart.apis.google.com/chart?cht=tx&chs=500&chf=bg,s,FFFFFF00&chl= --self-contained test.Rmd -o test.html 
```

但是，LaTeX 代码的输出没有变化（它的大小没有增加），事实上，当我查看渲染的 html 文件段（在哪里`$\frac{1}{x}$`）时，我看到的图像源标签是：

```
<img style="vertical-align:middle" src="http://chart.apis.google.com/chart?cht=tx%5Cfrac%7B1%7D%7Bx%7D" alt="\frac{1}{x}" title="\frac{1}{x}" /> 
```

我在哪里使用`--webtex[=URL]`不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T22:23:30.237

我发现在命令行上我所要做的就是转义`&`（与号）符号。所以为了让它工作，我所要做的就是：

```
pandoc -s --webtex=http://chart.apis.google.com/chart?cht=tx\&chs=500\&chf=bg,s,FFFFFF00\&chl= --self-contained test.Rmd -o test.html 
```

# c - C使用带有链表的while循环

> ID：13820860
> 
> 赞同：0
> 
> 时间：2012-12-11T12:54:48.780
> 
> 标签：c, list, while-loop, linked-list

我遇到了一个问题，我尝试在链表上使用 while 循环。我有两个链表，即`temp`和`graph`。我正在使用 while 循环来执行任务`while(temp != NULL)`。为了在每个循环中继续前进，我正在分配`temp = temp->link`. 但是，此代码无法编译。我意识到递归函数可能是一个解决方案，但该函数实际上要复杂得多，我认为递归不是一个好主意。对了，`graph`已经是一个内置的链表了。提前致谢！

PS 这是家庭作业的一部分。

```
temp = graph->link;
while(temp!=NULL){
    if(stack->link == NULL){
        stack->link = (node_pointer)malloc(sizeof(graph));
        stack->link->weight = temp->weight;
        stack->link->vertex = temp->vertex;
    }
    temp = temp->link; //Here is the problem.
} 
```

编辑：

stack 和 graph 都是链表的数组：

```
typedef struct node *node_pointer;

struct node{
    int vertex;
    int weight;
    int visited;
    struct node *link;
};
node_pointer graph[50];
node_pointer stack[50];
node_pointer temp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:05:48.987

0xC00000005 不是编译时错误。当您访问不允许访问的内存位置时，通常会发生此错误，即使它指向`NULL`. 它是一个运行时错误。检查是否`temp`不是 NULL 并且是否也被`malloc`正确编辑。是吗？还要检查所有其他变量。使用调试器，通过`valgrind`. 它将帮助您正确学习语言和调试技术。特别是 CompileTime 和 RuntimeErrors ;-)。

在创建新节点时也显式地制作`link`。`NULL`指针变量通常包含一个没有初始化的 JUNK 值。我假设您没有设置`link`和`NULL`访问 JUNK 内存位置。垃圾进垃圾出。`IF TEMP(WHICH IS SET TO LINK) IS NOT EQUAL TO NULL`如果 LINK*不为空*而是垃圾，*则*您的逻辑失败。

# iphone - 如何在表格视图中重新加载数据

> ID：13820862
> 
> 赞同：-2
> 
> 时间：2012-12-11T12:54:52.550
> 
> 标签：iphone, xcode, uitableview, ios5

每次我在按钮内重新加载数据时，应用程序都会崩溃。这是代码：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface ResultViewController : UIViewController <UITableViewDelegate,      
UITableViewDataSource> {
NSMutableArray *listData;
NSMutableArray *listLocation;
NSMutableArray *listPostDate;
NSMutableArray *listLogo;
IBOutlet UINavigationBar *uiNavigationBar;
IBOutlet UITableView *uiTableView;

}

@property (nonatomic, retain) NSMutableArray *listData;
@property (nonatomic, retain) NSMutableArray *listLocation;
@property (nonatomic, retain) NSMutableArray *listPostDate;
@property (nonatomic, retain) NSMutableArray *listLogo;
@property (nonatomic, retain) UITableView *uiTableView;

-(IBAction)done;
-(IBAction)prev;
-(IBAction)next;

@end

#import "ResultViewController.h"
#import "JobAddSiteViewController.h"
#import "JobAddSiteAppDelegate.h"
#import "JSONKit.h"

@implementation ResultViewController
@synthesize listData;
@synthesize listLocation;
@synthesize listPostDate;
@synthesize listLogo;

NSInteger *countPage = 1;

NSArray *rows;
NSMutableArray *jsonResults;

NSMutableArray *tempArray;
NSMutableArray *tempArray2;
NSMutableArray *tempArray3;
NSMutableArray *tempArray4;

-(IBAction)done{

JobAddSiteViewController *second = [[JobAddSiteViewController alloc]initWithNibName:nil bundle:nil];
[self presentModalViewController:second animated:YES];
[second release];

}

- (void)viewDidLoad {

JobAddSiteAppDelegate *ja = (JobAddSiteAppDelegate *)[[UIApplication sharedApplication] delegate];

NSString *strURL2 = [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/totaljobs.php", ""];
NSData *nsData2 = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL2]];
NSString *dataResult = [[NSString alloc] initWithData:nsData2 encoding:NSUTF8StringEncoding];

tempArray = [[NSMutableArray alloc] init];
tempArray2 = [[NSMutableArray alloc] init];
tempArray3 = [[NSMutableArray alloc] init];
tempArray4 = [[NSMutableArray alloc] init];
NSString *strURL = [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/appresults3.php?pg=%d", countPage];
NSData *nsData = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL]];

NSDictionary* listDictionary = [nsData objectFromJSONData];
NSArray* people =[listDictionary objectForKey:@"jobs"];
for (NSDictionary *person in people) { 
    NSString *str = [NSString stringWithFormat:@"%@", [person valueForKey:@"position"]];
    NSString *str2 = [NSString stringWithFormat:@"%@", [person valueForKey:@"subcounty"]];
    NSString *str3 = [NSString stringWithFormat:@"%@", [person valueForKey:@"postdate"]];
    NSString *str4 = [NSString stringWithFormat:@"%@", [person valueForKey:@"logo"]];

    if(![str isEqualToString:@"<null>"])
    { 
        NSString *position = [person objectForKey:@"position"];
        [tempArray addObject: position];
    }

    if(![str2 isEqualToString:@"<null>"])
    { 
        NSString *subcounty = [person objectForKey:@"subcounty"];
        [tempArray2 addObject: subcounty];
    }

    if(![str3 isEqualToString:@"<null>"])
    { 
        NSString *postDate = [person objectForKey:@"postdate"];
        [tempArray3 addObject: postDate];
    }

    if(![str4 isEqualToString:@"<null>"])
    { 
        NSString *logo = [person objectForKey:@"logo"];
        [tempArray4 addObject: logo];
    }
}

//NSArray *array = [[NSArray alloc] initWithObjects:@"iPhone", @"iPod",@"iPad",nil];

self.listData = tempArray;
self.listLocation = tempArray2;
self.listPostDate = tempArray3;
self.listLogo = tempArray4;

//[tempArray release];
[listData release];
[listLocation release];
[listPostDate release];
[listLogo release];
[super viewDidLoad];

}

- (void)dealloc {
//[tempArray dealloc];
[listData dealloc];
[listLocation dealloc];
[listPostDate dealloc];
[listLogo dealloc];
[super dealloc];
}

#pragma mark -
#pragma mark Table View Data Source Methods

- (IBAction)prev{

}

- (IBAction)next{

[listData addObject:@"Mac Mini"];
[listLocation addObject:@"Mac Mini"];
[listPostDate addObject:@"Mac Mini"];
[listLogo addObject:@"Mac Mini"];
UITableView *tv = (UITableView *)self.view;
[tv reloadData];

}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
return [self.listData count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath       
*)indexPath
{
if (indexPath.section == 1 && indexPath.row == 1) {
    return 65;
}
return 65;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

UILabel *labelMain;
UILabel *labelLocation;
UILabel *labelDate;
UIImageView *image;

if (cell == nil) {
    cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier] autorelease];

    image = [[[UIImageView alloc] initWithFrame:CGRectMake(0,3,80,62)] autorelease];
    image.tag = 4;
    [cell.contentView addSubview:image];

    labelMain = [[[UILabel alloc] initWithFrame:CGRectMake(80,3,200,20)] autorelease];
    labelMain.tag = 1;
    labelMain.font = [UIFont systemFontOfSize:14.0];
    [cell.contentView addSubview:labelMain];

    labelLocation = [[[UILabel alloc] initWithFrame:CGRectMake(80,20,200,20)] autorelease];
    labelLocation.tag = 2;
    labelLocation.font = [UIFont systemFontOfSize:12.0];
    labelLocation.textColor = [UIColor darkGrayColor];
    [cell.contentView addSubview:labelLocation];

    labelDate = [[[UILabel alloc] initWithFrame:CGRectMake(80,40,200,20)] autorelease];
    labelDate.tag = 3;
    labelDate.font = [UIFont systemFontOfSize:12.0];
    labelDate.textColor = [UIColor darkGrayColor];
    [cell.contentView addSubview:labelDate];

} 

[(UILabel *)[cell.contentView viewWithTag:1] setText:[self.listData objectAtIndex:indexPath.row]];
[(UILabel *)[cell.contentView viewWithTag:2] setText:[self.listLocation objectAtIndex:indexPath.row]];
[(UILabel *)[cell.contentView viewWithTag:3] setText:[self.listPostDate objectAtIndex:indexPath.row]];
NSString *imagePath = [self.listLogo objectAtIndex:indexPath.row];
UIImage *uiImage = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"http://www.bestitjobs.co.uk/employers/logo/Files/%@", imagePath]];
//NSLog([NSString stringWithFormat:@"http://www.bestitjobs.co.uk/employers/logo/Files/%@", imagePath]);
image.image = uiImage;

return cell;

}

@end 
```

## 错误

2012-12-11 12:35:14.828 JobAddSite[674:207]-[UIView reloadData]：无法识别的选择器发送到实例 0x4e2d420 2012-12-11 12:35:14.931 JobAddSite[674:207] *** 由于未捕获而终止应用程序异常'NSInvalidArgumentException'，原因：'-[UIView reloadData]：无法识别的选择器发送到实例 0x4e2d420'***第一次抛出调用堆栈：（0 CoreFoundation 0x00deb5a9 **exceptionPreprocess + 185 1 libobjc.A.dylib 0x00f3f313 objc_exception_throw + 44 2 CoreFoundation 0x00ded0bb -[ NSObject(NSObject) doesNotRecognizeSelector:] + 187 3 CoreFoundation 0x00d5c966 __*转发***+ 966 4 CoreFoundation 0x00d5c522 _CF_forwarding_prep_0 + 50 5 JobAddSite 0x000039c1 -[ResultViewController next] + 262 6 UIKit 0x002db4fd -[UIApplication sendAction:to:from:forEvent:] + 119 7 UIKit 0x004edcc3 -[UIBarButtonItem:withEventA] 156 8 UIKit 0x002db4fd -[UIApplication sendAction:to:from:forEvent:] + 119 9 UIKit 0x0036b799 -[UIControl sendAction:to:forEvent:] + 67 10 UIKit 0x0036dc2b -[UIControl(内部) _sendActionsForEvents:withEvent:] + 527 11 UIKit 0x0036c7d8 -[UIControl touchesEnded:withEvent:] + 458 12 UIKit 0x002ffded -[UIWindow _sendTouchesForEvent:] + 567 13 UIKit 0x002e0c37 -[UIApplication sendEvent:] + 447 14 UIKit 0x002e5f2e _UIApplicationHandleEvent + 7576 15 GraphicsServices 0x01743992 PurpleEventCallback + x00504461050**CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 52 17 CoreFoundation 0x00d2ccf7 __CFRunLoopDoSource1 + 215 18 CoreFoundation 0x00d29f83 __CFRunLoopRun + 979 19 CoreFoundation 0x00d29840 CFRunLoopRunSpecific + 208 20 CoreFoundation 0x00d29761 CFRunLoopRunInMode + 97 21 GraphicsServices 0x017421c4 GSEventRunModal + 217 22 GraphicsServices 0x01742289 GSEventRun + 115 23 UIKit 0x002e9c93 UIApplicationMain + 1160 24 JobAddSite 0x00002af8 main + 102 25 JobAddSite 0x00002a89 start + 53 ) 在抛出“NSException”实例后调用终止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:46:05.050

```
UITableView *tv = (UITableView *)self.view;
[tv reloadData]; 
```

为什么不简单地使用您创建的 *uITableView ivar？我认为这是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T20:33:34.467

这是一个老问题，但如果有人通过谷歌到达这里......尝试将调用包装到 [tv reloadData]; 在主线程调度中，如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [tv reloadData];
}); 
```

# python - 如何在jinja2中重新定义宏

> ID：13820864
> 
> 赞同：6
> 
> 时间：2012-12-11T12:54:54.113
> 
> 标签：python, jinja2

我正在通过 sphinx 使用 jinja2。在我的基本模板（*layout.html*我有一些宏

```
{%- macro post_meta(metadata) -%}
    <div class="postmeta">
        {{ author(metadata.author) }}
    </div>
{%- endmacro -%} 
```

我在*theme2*中扩展了这个模板`{%- extends "theme1/layout.html" -%}`

如何`post_meta`在*theme2*中重新定义？`post_meta`简单地在*theme2*中添加新定义是行不通的。

顺便说一句，我如何使用 python 内置函数，如：

```
{{ type(metadata) }} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T02:21:18.827

Q1：您必须创建一个块以使用基本模板中的宏覆盖该块。这是孩子的密码。使用 use_child = False ：将使用基本模板中的宏

```
{% block pm_mac %}
    {% if use_child %}
        {%- macro post_meta(metadata) -%}
               .....
        {%- endmacro -%}
    {% else %}        
        {{ super() }}
    {% endif %} 
{% endblock %} 
```

Q2：您必须注册一个全局 Python 函数才能使用 type ：

```
def py_to_upper(a):
    return a.upper()

env.globals['to_upper'] = py_to_upper # register the global python function

and in the Jinja template :

{{ to_upper("lowercase") }} 
```

# jquery - diaog打开回调函数只执行一次

> ID：13820865
> 
> 赞同：0
> 
> 时间：2012-12-11T12:54:54.657
> 
> 标签：jquery, jquery-plugins, jquery-ui-dialog

我的 jQueryUI 对话框打开回调函数仅在对话框第一次打开时执行，但我希望它在每次打开对话框时都能工作。任何人都可以帮忙吗？

```
$('<div><b><center>'+ text +'</center></b></div>').dialog({
    title: '<b>User(s) with a similar name</b>', 
    modal: true,
    autoOpen: true,
    height: 'auto', 
    width: 400,
    resizable: false,
    open: function() { 
        $('#smartpaginate').smartpaginator({ 
            totalrecords: 3,
            recordsperpage: 2, 
            datacontainer: 'all-tabs', 
            dataelement: 'table',
            theme: 'green' 
        });
    },
    buttons: {
        "Close": function() {
            //alert($(this).attr('class'));
            $(this).dialog('close');
            return false;
        }
    }
}); 
```

回调中的代码执行分页插件[Jquery smart paginator](http://www.egrappler.com/jquery-pagination-plugin-smart-paginator/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:26:45.973

如前所述，此代码段不足以理解您的问题。在[这个小提琴](http://jsfiddle.net/_LPO/qZfwA/2/)中看到总是调用 open 回调函数。我刚刚添加了一个 smartpaginate div 和一个按钮来控制对话框的打开：

```
<button id="opener">open the dialog</button>
<div id="dialog" title="Dialog Title"><div id="smartpaginate"></div></div> 
```

并显示一条消息以显示调用已执行：

```
$('#opener').after('<p>dialog open function triggered</p>'); 
```

也许你应该看看你的 js 控制台，给我们更多的上下文。

# asp.net-mvc - 是否可能需要 MVC 应用程序中的控制器参数并且路由与空参数不匹配？

> ID：13820866
> 
> 赞同：3
> 
> 时间：2012-12-11T12:55:01.380
> 
> 标签：asp.net-mvc, controller, routes

`Detail(int id)`对 a采取行动`ProductController`，我可以通过

```
/Product/Detail/32 
```

但如果我这样做

```
Product/Detail 
```

`id`我也没有通过访问同一个控制器。如何使参数成为必需，否则返回 404（根本不执行控制器操作，例如不匹配路由）

```
public ActionResult Detail(int id) {
    // some fancy code that get the product by id
    return View()
} 
```

路线：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Application", action = "Index", id = UrlParameter.Optional } defaults); 
```

我知道如果（未找到产品）返回`HttpNotFound()`并且适用于大多数情况，我可以做到这一点，但我想知道是否有一种方法可以在不传递参数的情况下甚至无法达到控制器操作

编辑：

```
/ <-- homepage
/Product/List <-- List of products
/Product/Detail <-- return 404
/Product/Detail/10 <-- Product Details id 10 
```

现在，我想知道是否有任何方法可以支持这种“简单”场景。控制器上的操作是：

```
ApplicationController{
    public ActionResult Index() {}
}

ProductController {
    public ActionResult List(){}
    public ActionResult Detail(int id){}
} 
```

当前路由只是默认的：

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Application", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

添加建议的路由无法按预期工作，因为要么返回 a `404`on`/Product/Detail`但也返回`404`on `/Product/List`and `/`。

或（其他建议）

`ActionResult Detail(int id)`在没有在请求中发送参数的情况下调用，这是这个问题的目的，以了解是否可以在`/Product/Detail`没有 id 参数的情况下不匹配 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:58:55.943

## 更改路由

只需为其提供路由并将`id`默认值删除为可选参数：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index" } // defaults
); 
```

但这些默认值永远不会被使用，所以：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}" // URL with parameters
); 
```

这是需要定义的实际路线。

你的`controller`and `action`are 永远不会根据需要从 URL 中省略，`id`并且是 URL 定义中的最后一个，这意味着第一对也必须在那里。

我不确定这是否正是您所需要的，但是根据您问题的当前状态，这应该可以为您解决问题。但是如果你需要你的 id 来获得一些预定义的值，你可以在你的路由定义中给它一个不同的值：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = 1 } // defaults
); 
```

这使得所有三个都可以从 URL 中省略，并且它们都将具有特定的值。

## `id`定义格式的路由约束

您还可以使用路由约束来告诉路由 URL 参数的外观。由于您`id`似乎必须是数字，这也是*一种可能性*：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index" }, // defaults
    new { id = "\d+" } // constraints
); 
```

* * *

# 编辑后

您的问题实际上有两种解决方案。

1.  正确路由以定义`id`某些路由所需
2.  动作方法选择器过滤器以声明方式标记它们需要某些参数的动作

## 解决方案 1：路由

这一个定义了几个路由定义，但硬编码需要`id`参数的操作：

```
routes.MapRoute(
    "RequiresId",
    "{controller}/{action}/{id}", // URL with parameters
    null,
    new { action = "Detail" }
);
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}" // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new { action = "(?!Detail).+" } // any action except "Detail"
); 
```

第一条路线定义了所有具有操作方法的控制器`Detail`都需要`id`参数。这很简单，只要**所有**具有这些操作的控制器都具有相同的要求（可能是您的情况）。但是如果这不是真的，它会变得更加复杂，因为您必须为每个控制器提供约束。

## 解决方案 2：操作方法选择器过滤器

此解决方案仅需要带有可选的默认路由`id`。自定义操作方法选择器过滤器（鲜为人知且很少使用）将帮助您编写如下代码：

```
[RequiresRouteValues("id, name")]
public ActionResult Detail(int id, string name)
{
    ...
} 
```

你会把它放在那些需要它的方法上。如果该特定参数不存在，控制器动作调用程序将无法找到合适的方法，因此返回 404。

我已经[在我的博客上](http://erraticdev.blogspot.com/2011/02/improving-aspnet-mvc-maintainability.html)详细讨论过这个问题。它还包括过滤器的代码，如下所示：

```
/// <summary>
/// Represents an attribute that is used to restrict action method selection based on route values.
/// </summary>
[SuppressMessage("Microsoft.Design", "CA1019:DefineAccessorsForAttributeArguments")]
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = true, Inherited = true)]
public sealed class RequiresRouteValuesAttribute : ActionMethodSelectorAttribute
{
    #region Properties

    /// <summary>
    /// Gets required route value names.
    /// </summary>
    public ReadOnlyCollection<string> Names { get; private set; }

    /// <summary>
    /// Gets or sets a value indicating whether to include form fields in the check.
    /// </summary>
    /// <value><c>true</c> if form fields should be included; otherwise, <c>false</c>.</value>
    public bool IncludeFormFields { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether to include query variables in the check.
    /// </summary>
    /// <value>
    ///     <c>true</c> if query variables should be included; otherwise, <c>false</c>.
    /// </value>
    public bool IncludeQueryVariables { get; set; }

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="RequiresRouteValuesAttribute"/> class.
    /// </summary>
    private RequiresRouteValuesAttribute()
    {
        this.IncludeFormFields = true;
        this.IncludeQueryVariables = true;
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="RequiresRouteValuesAttribute"/> class.
    /// </summary>
    /// <param name="commaSeparatedNames">Comma separated required route values names.</param>
    public RequiresRouteValuesAttribute(string commaSeparatedNames)
        : this((commaSeparatedNames ?? string.Empty).Split(','))
    {
        // does nothing
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="RequiresRouteValuesAttribute"/> class.
    /// </summary>
    /// <param name="names">Required route value names.</param>
    public RequiresRouteValuesAttribute(IEnumerable<string> names)
        : this()
    {
        if (names == null || names.Count().Equals(0))
        {
            throw new ArgumentNullException("names");
        }

        // store names
        this.Names = new ReadOnlyCollection<string>(names.Select(val => val.Trim()).ToList());
    }

    #endregion

    #region ActionMethodSelectorAttribute implementation

    /// <summary>
    /// Determines whether the action method selection is valid for the specified controller context.
    /// </summary>
    /// <param name="controllerContext">The controller context.</param>
    /// <param name="methodInfo">Information about the action method.</param>
    /// <returns>
    /// true if the action method selection is valid for the specified controller context; otherwise, false.
    /// </returns>
    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }

        // always include route values
        HashSet<string> uniques = new HashSet<string>(controllerContext.RouteData.Values.Keys);

        // include form fields if required
        if (this.IncludeFormFields)
        {
            uniques.UnionWith(controllerContext.HttpContext.Request.Form.AllKeys);
        }

        // include query string variables if required
        if (this.IncludeQueryVariables)
        {
            uniques.UnionWith(controllerContext.HttpContext.Request.QueryString.AllKeys);
        }

        // determine whether all route values are present
        return this.Names.All(val => uniques.Contains(val));
    }

    #endregion
} 
```

第一个在具有多个控制器和与之相关的不同约束的应用程序中使事情变得复杂。第二个是优雅的，适用于简单和复杂的场景。

我当然会选择**解决方案 2**。但在这种情况下，把我当作一个有偏见的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:59:27.973

不要将 Id 作为可选

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Application", action = "Index"} ); 
```

如果您想保持 id 可选，那么您可以为产品详细信息定义不同的路线

```
routes.MapRoute("ProductDetails", "product/details/{id}"); 
```

这需要一个 Id 并保持原来的默认路由不变。

# php - PHP：cookie 存在，但函数使用 isset 找不到它

> ID：13820869
> 
> 赞同：1
> 
> 时间：2012-12-11T12:55:11.930
> 
> 标签：php, codeigniter, cookies, isset

使用 CodeIgniter，我正在使用 isset() 函数检查 cookie 是否存在，并根据它重定向到另一个控制器。现在我的问题是我得到了一个重定向循环，因为 check_logged_in 函数认为 cookie 不存在。

这是我的代码：

该函数位于`login_helper`.

```
function check_logged_in()  
{  
    if(!isset($_COOKIE['uid']))  
    {   
        redirect('users/login');  
        return FALSE;   
    }
    else
    { 
         return TRUE;
} 
```

下一个函数驻留在`home`控制器中并调用上面描述的 check_logged_in() 函数。

```
public function index()
{
    $this->load->helper('url');
    $this->load->helper('login');
    $logged_in = check_logged_in();

    if($logged_in === TRUE)
    {
        $this->load->view('templates/header');
        $this->load->view('pages/home_view');
        $this->load->view('pages/advanced_search_view');
        $this->load->view('pages/contact_information_view');
        $this->load->view('templates/footer');
    }
} 
```

下一个函数驻留在`users`控制器中

```
public function login()
{
    if(isset($_COOKIE['uid']))
    { 
        redirect(home); 
    }
    else
    {
        -some unrelated code-
    } 
```

当cookie确实存在并且我运行`home/index`函数或`users/login`函数时，我最终会进入重定向循环。当 cookie 不存在时，我最终会进入我的登录页面，因此`users/login`cookie 检查似乎工作正常，但`home/index`功能却没有。

* * *

我试过把

```
if(!isset($_COOKIE['uid']))  
{   
    redirect('users/login');     
} 
```

直接在`home/index`函数中，但它给出了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:15:01.053

将登录检查放入构造函数中。给它一个通用名称 - 让它做一些有用的事情，比如从 cookie 中返回信息，和/或从数据库查找中返回信息。

```
function __construct() {
parent::__construct();
 // load the model
 $this->load->model( 'login_model' );

 // if logged in, return $this->user
 if(! $this->user = $this->login_model->verifyUser() ) 
 { redirect('users/login', 'refresh'); }

 } // construct 
```

现在 $this->user 可用于您的方法，一直到视图。

如果您需要一个比用户做更多事情的“管理员”，以同样的方式

```
 $this->admin = $this->login_model->verifyAdmin() ; 
```

然后您可以更改 verifyAdmin() 中发生的情况，并且您的课程不必更新。

# javascript - ie8 中此操作错误的源 HTML 无效

> ID：13820877
> 
> 赞同：2
> 
> 时间：2012-12-11T12:55:37.580
> 
> 标签：javascript, internet-explorer, extjs

我明白了

**SCRIPT601：此操作的源 HTML 无效。**

**ext-all-debug.js，第 6769 行字符 21**

在 IE 8 中

这是行。

```
el.insertAdjacentHTML(hashVal[0], html); 
```

调试时，html中的值为`"<a title=\"\">1</a>"`

我坚持这个问题好几天了。这与评级功能有关。我认为由于这个错误，在 ie 8 中没有显示评级星。其他浏览器都可以。我在下面给出了相应的代码部分。我正在使用 extjs。

```
var starLink = star.createChild({
            tag: 'a',
            html: this.values[i],
            title: this.showTitles ? this.titles[i] : ''
        }); 
```

并且在创建此元素时，调用将转到以下部分，并且在上面指定的行上发生错误。

```
 insertHtml : function(where, el, html){
            var hash = {},
                hashVal,
                range,
                rangeEl,
                setStart,
                frag,
                rs;

            where = where.toLowerCase();

            hash[beforebegin] = ['beforeBegin', 'previousSibling'];
            hash[afterend] = ['afterEnd', 'nextSibling'];

            if (el.insertAdjacentHTML) {
                if(tableRe.test(el.tagName) && (rs = insertIntoTable(el.tagName.toLowerCase(), where, el, html))){
                    return rs;
                }

                hash[afterbegin] = ['afterBegin', 'firstChild'];
                hash[beforeend] = ['beforeEnd', 'lastChild'];
                if ((hashVal = hash[where])) {
                    el.insertAdjacentHTML(hashVal[0], html);
                    return el[hashVal[1]];
                }

            } else { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:54:13.573

IE 对使用 .innerHTML、.insertAdjacentHTML 和类似的东西非常挑剔。

传递的 HTML 必须是*完美*的结构 - 它不允许任何类型的错误。如果有的话，它根本不会这样做。其他浏览器将执行与文档其余部分相同的“最佳猜测”。

尝试放入一些非常简单的 HTML 值，例如：

```
<p>Hello World!</p> 
```

你应该会发现它有效。在这种情况下，您需要找出您提供的 HTML 有什么问题。如果它不起作用，那么你还有另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:49:50.357

虽然我们不知道您正在创建哪些元素以及在哪里创建，但我假设您正在尝试将新`tr`元素添加到`table`. 然而，这在 IE < 10 中是不可能的。较旧的 IE 具有与其他浏览器完全不同的表模型，并且无法访问表`insertAdjacentHTML()`来创建行（`td`可以创建 s）。也`innerHTML`适用于 and 的直接后代，`table`是`tr`只读的。

在 IE 中向表中添加新行的最佳方法是使用`insertRow(index)`method. `index`是要添加行的地方。默认情况下`index`是 -1，它在表的末尾添加一个新行。

这篇文章在 MSDN 上[动态构建表](http://msdn.microsoft.com/en-us/library/ms532998%28v=vs.85%29.aspx)可能会有所帮助。

BTW`if ((hashVal = hash[where]))`在较新的浏览器中不再是有效的语法。

# c# - 检索 SharePoint 的图像 - 401 错误

> ID：13820879
> 
> 赞同：0
> 
> 时间：2012-12-11T12:55:38.983
> 
> 标签：c#, sharepoint

当我尝试从本地 SharePoint 网站获取图像时收到 401 消息。尝试了许多凭据设置，但它们都返回相同的 401 错误。

```
var SharePointURL = "http://SharePointServer/Site/ImageFolder/image1.jpg";
System.Net.WebRequest req = System.Net.WebRequest.Create(SharePointURL);
req.Credentials = System.Net.CredentialCache.DefaultCredentials;
req.UseDefaultCredentials = true;              
System.Net.WebResponse response = req.GetResponse();
Stream stream = response.GetResponseStream();
System.Drawing.Image img = System.Drawing.Image.FromStream(stream);
stream.Close(); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:12:50.387

我不知道为什么会这样，但我可以告诉你你可以做些什么来自己找出答案：

假设您在与运行 SharePoint 的计算机不同的计算机上运行代码，则需要在计算机上安装[Fiddler](http://www.fiddler2.com/fiddler2/)。获取它以拦截来自您的代码的请求和来自浏览器的相同请求。您应该能够看到请求之间的差异，这将有助于指导您了解问题的原因。您还可以使用 Fiddler 尝试更改参数，以便查看哪些标头因存在或不存在而导致问题。

如果您的代码发出与浏览器完全相同的请求，您将得到完全相同的响应。

如果您发现自己在所有这些之后仍然感到困惑，您是否知道 SharePoint 有[自己的 Stack Exchange。](https://sharepoint.stackexchange.com/)

# javascript - 检测DOM何时连续改变输入值

> ID：13820880
> 
> 赞同：3
> 
> 时间：2012-12-11T12:55:44.523
> 
> 标签：javascript

所以，我有一个输入栏，如果它被修改，我想不断搜索它。我检查了一些 stackoverflow 问题，例如[检测 DOM 更改事件](https://stackoverflow.com/questions/8733306/detecting-dom-change-events)，并检查了这个 DOMSubTreeModified 事情。

它第一次工作，但我需要不断检查是否有更新。有没有办法循环它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:59:49.613

您可以使用时间间隔：

```
var oldVal = document.getElementById("yourInput").value;
function check(){
    if(document.getElementById("yourInput").value !== oldVal){
        alert("value changed");
    }
}

setInterval(check, 1000); 
```

代码应该是不言自明的:)

或者您可以绑定更改或输入事件（但如果您使用 javascript 更改值，它们将不起作用）。抱歉在这个例子中使用了 jQuery :)

```
$("#yourInput").on("change input", function(event){
    alert("value changed")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:03:23.010

您是在谈论`input`标签价值的变化吗？在这种情况下，您不是在谈论正在更改的 DOM。尝试`onKeyDown`事件处理程序。

```
document.getElementById('input').addEventListener('keydown', function() {
  // Perform search
}); 
```

# c# - 实体框架模型第一外键列

> ID：13820883
> 
> 赞同：0
> 
> 时间：2012-12-11T12:55:54.403
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, foreign-key-relationship

我有 3 个实体（`Projects`/ `Products`/ `Negotiations`）。

Negotiations 实体有一个名为的列`ReferencedId`，`TypeId`它`ReferencedId`是 Projects 和 Products 表的外键。
`TypeId`有定义`ReferencedId`属于哪个实体。

但是当我调用`context.SaveChanges();`在实体中插入新消息时`Negotiation`，抛出了这个错误：

```
Server Error in '/' Application.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProjectNegotiation". The conflict occurred in database "MyMVCApp", table "dbo.Projects", column 'Id'.
The statement has been terminated. 
```

**编辑：** 这是我的模型：

![我的模特](../Images/185008147d4538f4bd2dbed3221cbf8b.png)

我该怎么做才能使用 1 列作为谈判实体的外键并避免为此使用 2 列。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:03:54.670

正如您所说-这是一个概念性问题..您误用了外键。不要这样做！

使 Negotiations 抽象，创建 ProductNegotiations 和 ProjectNegotiations 作为 Negotiations 的子类，并在那里定义您的导航属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:08:05.757

您不能将单个列作为指向两个表的（正式）外键约束。

您可以使用 Table-per-type 或 table-per-hierarchy 映射的某些变体来执行此操作（[这是一篇介绍性文章](http://lwang00.wordpress.com/2007/11/04/entity-mapping-table-per-type-and-table-per-hierarchy/)）

# php - htaccess，网址别名，mod_rewrite。从 url 中排除 id 但需要它

> ID：13820884
> 
> 赞同：0
> 
> 时间：2012-12-11T12:55:54.830
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

您好，我遇到的问题是，我有一个登录页面（event.php），显示来自我的数据库的事件。

其他字段中的每个事件都有“类别”、“标题”、“ID”。我正在尝试为我的网站创建干净的 url，看起来像这样[http://domain.com/event/category/title](http://domain.com/event/category/title)但问题是某些事件可能具有相同的标题，因为它们可能每周重复一次，尽管如此他们确实有唯一的 id，我用它来获取特定的事件。

我的问题是这样的，我该如何转换：

```
http://www.domain.com/event.php?cat=rock&title=Great-gig&id=145 
```

进入：

```
http://www.domain.com/event/rock/Great-gig 
```

请记住，我确实需要 id 的值，但我不希望它以某种方式显示在干净的 url 上......

我可以使用 htaccess 创建干净的 url，但我不知道如何排除 id 被看到。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:07:16.530

您只有 2 个选项：

1.  制作一个别名，例如，如果事件在 12 月，则为 Great-gig-Dec，如果是在一月，则为 Great-gig-Jan，并将此值用作您的唯一 ID

2.  仅加载下一个事件或最近的事件，具体取决于您的站点结构。这样，如果有多个 Great-gig，那么您将获得最新的或下一个，因此您可以像[http://www.domain.com/next-events/rock/Great-gig](http://www.domain.com/next-events/rock/Great-gig)， [http://www.domain.com/next-events/rock/Great-gig /www.domain.com/latest-events/rock/Great-gig](http://www.domain.com/latest-events/rock/Great-gig)。所以在这里你知道要使用多行中的哪一行，而它仍然看起来像一个好的 url。

格言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:58:03.857

你不能排除它并使用它。您必须通过它，或者使用标题查找事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:04:26.423

嗨，您需要在文件夹中为此编写 htacces 创建一个 .htaccess 文件

在那写下这段代码

```
RewriteEngine On
RewriteBase /foldername/  //for localhost
RewriteBase /              // for online

RewriteRule ^event/(.+)/(.+)/?$ event.php?cat=$1&title=$2 [L,QSA] 
```

# java - 如何使用 SNMP4J 查找 Spring Web 应用程序的带宽

> ID：13820885
> 
> 赞同：0
> 
> 时间：2012-12-11T12:55:54.670
> 
> 标签：java, spring, snmp4j

我是 SNMP4J 的新手。我需要监控我们的 Web 应用程序正在使用多少带宽。Web 应用程序是使用 Spring、Hibernate 开发的。我已经下载了 SNMP4J 库并完成了查找系统描述、systemUp 时间的基本示例。请帮助找到完成此任务的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:22:57.433

您的问题似乎表明您对 SNMP 监督的工作方式不是很熟悉。让我试着把它理顺。RFC 1905 的第 2.1 章提供了我将使用的术语的更正式定义： [http ://www.ietf.org/rfc/rfc1905.txt](http://www.ietf.org/rfc/rfc1905.txt)

SNMP4j 是一个库，可让您更轻松地用 Java 编写 SNMP 应用程序。SNMP 应用程序可以是管理代理的管理器，也可以是代理。听起来您正在寻找实现 SNMP 管理器。

在您可以使用 SNMP 管理器来监控您的 Spring 应用程序或运行它的机器之前，必须在机器上安装 SNMP 代理。从您的问题中看是否是这种情况并不明显，但快速的谷歌搜索表明“SNMP for Spring”应用程序可以用作这样的代理。您可以在此处查看“入门”页面以快速入门。 [http://spring-snmp.sourceforge.net/](http://spring-snmp.sourceforge.net/)

现在，一旦你有了代理，如何监督它就成了一个悬而未决的问题。您可以着手实现自己的 SNMP 管理器，如果您是 Java 程序员，那么 SNMP4j 很可能是适合这项工作的工具。但是，我真的建议不要直接解决这个问题。如果您的组织需要监督网络上的服务，请查看大量可用的商业和免费网络管理工具。我相信开源系统 Nagios、ZenOSS 和 OpenNMS 都在其免费实现中提供了 SNMP 监控功能。

如果您实现自己的基于阈值的带宽监控系统，您以后可能会尝试将其扩展为不仅仅处理您的 Spring 系统，并添加陷阱接收，并且....最终您将重新发明（大部分) 比喻轮子（我指的是 NMS 系统），它的工作可能不如上述产品之一。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T14:50:46.303

您的 Web 应用程序应该安装在某台机器上，这样您就可以使用 snmp4j 找到您机器的带宽。希望它是您想要的。

# android - 向滚动视图添加项目使其滚动

> ID：13820887
> 
> 赞同：2
> 
> 时间：2012-12-11T12:56:04.193
> 
> 标签：android, scrollview

我动态地将项目添加到 a`ScrollView`并使其滚动到底部。我希望它保持领先。

我有一个`ScrollView`，一个 vertical `LinearLayout`，一些东西，然后 a`ListView`被调整到其所有项目的高度，因此它不会滚动。

当我加载数据并将其添加到布局时，它会滚动！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:58:39.710

在 ScrollView 中有一个 ListView 总是一个坏主意。

我已经通过使用添加行而不是 ScrollView 的垂直 LinearLayout 解决了类似的问题。由于您始终显示列表中的所有项目，因此此解决方案应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:14:24.400

添加项目时，您应该通过以下方法告诉您的滚动视图保持在顶部[`scrollTo(int x, int y);`](http://developer.android.com/reference/android/widget/ScrollView.html#scrollTo%28int,%20int%29)：

```
 for(int i = 0; i<items.size();i++) {
        //adding items
    }
    //go to top atfer adding item
    scrollView.scrollTo(0,0); 
```

# image-processing - 我在 matlab 中收到“未定义的变量“vision”或类“vision.CascadeObjectDetector”错误

> ID：13820889
> 
> 赞同：3
> 
> 时间：2012-12-11T12:56:04.723
> 
> 标签：image-processing, computer-vision, matlab, matlab-cvst

我尝试使用 matlab 检测图像中的人脸。为此，我找到了许多演示。所有演示都使用 vision.CascadeObjectDetector 类。但是我的 matlab 总是抛出异常，即“未定义的变量“视觉”或类“vision.CascadeObjectDetector”，甚至试图在命令窗口中调用视觉类

计算机视觉系统工具箱已安装。

问题出在哪里，我该如何解决？

已安装的工具箱列表；

```
MATLAB                                                Version 7.13       (R2011b)
Simulink                                              Version 7.8        (R2011b)
Aerospace Blockset                                    Version 3.8        (R2011b)
Aerospace Toolbox                                     Version 2.8        (R2011b)
Bioinformatics Toolbox                                Version 4.0        (R2011b)
Communications System Toolbox                         Version 5.1        (R2011b)
Computer Vision System Toolbox                        Version 4.1        (R2011b)
Control System Toolbox                                Version 9.2        (R2011b)
Curve Fitting Toolbox                                 Version 3.2        (R2011b)
DO Qualification Kit                                  Version 1.5        (R2011b)
DSP System Toolbox                                    Version 8.1        (R2011b)
Data Acquisition Toolbox                              Version 3.0        (R2011b)
Database Toolbox                                      Version 3.10       (R2011b)
Datafeed Toolbox                                      Version 4.2        (R2011b)
EDA Simulator Link                                    Version 3.4        (R2011b)
Econometrics Toolbox                                  Version 2.0.1      (R2011b)
Embedded Coder                                        Version 6.1        (R2011b)
Filter Design HDL Coder                               Version 2.9        (R2011b)
Financial Derivatives Toolbox                         Version 5.8        (R2011b)
Financial Toolbox                                     Version 4.1        (R2011b)
Fixed-Income Toolbox                                  Version 2.2        (R2011b)
Fixed-Point Toolbox                                   Version 3.4        (R2011b)
Fuzzy Logic Toolbox                                   Version 2.2.14     (R2011b)
Global Optimization Toolbox                           Version 3.2        (R2011b)
IEC Certification Kit                                 Version 2.0        (R2011b)
Image Acquisition Toolbox                             Version 4.2        (R2011b)
Image Processing Toolbox                              Version 7.3        (R2011b)
Instrument Control Toolbox                            Version 3.0        (R2011b)
MATLAB Builder EX                                     Version 2.1        (R2011b)
MATLAB Builder JA                                     Version 2.2.3      (R2011b)
MATLAB Builder NE                                     Version 4.1        (R2011b)
MATLAB Coder                                          Version 2.1        (R2011b)
MATLAB Compiler                                       Version 4.16       (R2011b)
MATLAB Distributed Computing Server                   Version 5.2        (R2011b)
MATLAB Report Generator                               Version 3.11       (R2011b)
Mapping Toolbox                                       Version 3.4        (R2011b)
Model Predictive Control Toolbox                      Version 4.0        (R2011b)
Model-Based Calibration Toolbox                       Version 4.3        (R2011b)
Neural Network Toolbox                                Version 7.0.2      (R2011b)
OPC Toolbox                                           Version 3.1        (R2011b)
Optimization Toolbox                                  Version 6.1        (R2011b)
Parallel Computing Toolbox                            Version 5.2        (R2011b)
Partial Differential Equation Toolbox                 Version 1.0.19     (R2011b)
Phased Array System Toolbox                           Version 1.1        (R2011b)
RF Toolbox                                            Version 2.9        (R2011b)
Robust Control Toolbox                                Version 4.0        (R2011b)
Signal Processing Toolbox                             Version 6.16       (R2011b)
SimBiology                                            Version 4.0        (R2011b)
SimDriveline                                          Version 2.1        (R2011b)
SimElectronics                                        Version 2.0        (R2011b)
SimEvents                                             Version 4.0        (R2011b)
SimHydraulics                                         Version 1.10       (R2011b)
SimMechanics                                          Version 3.2.3      (R2011b)
SimPowerSystems                                       Version 5.5        (R2011b)
SimRF                                                 Version 3.1        (R2011b)
Simscape                                              Version 3.6        (R2011b)
Simulink 3D Animation                                 Version 6.0        (R2011b)
Simulink Code Inspector                               Version 1.0        (R2011b)
Simulink Coder                                        Version 8.1        (R2011b)
Simulink Control Design                               Version 3.4        (R2011b)
Simulink Design Optimization                          Version 2.0        (R2011b)
Simulink Design Verifier                              Version 2.1        (R2011b)
Simulink Fixed Point                                  Version 7.0        (R2011b)
Simulink HDL Coder                                    Version 2.2        (R2011b)
Simulink PLC Coder                                    Version 1.2.1      (R2011b)
Simulink Report Generator                             Version 3.11       (R2011b)
Simulink Verification and Validation                  Version 3.2        (R2011b)
Spreadsheet Link EX                                   Version 3.1.4      (R2011b)
Stateflow                                             Version 7.8        (R2011b)
Statistics Toolbox                                    Version 7.6        (R2011b)
Symbolic Math Toolbox                                 Version 5.7        (R2011b)
System Identification Toolbox                         Version 7.4.3      (R2011b)
SystemTest                                            Version 2.6.2      (R2011b)
Vehicle Network Toolbox                               Version 1.5        (R2011b)
Wavelet Toolbox                                       Version 4.8        (R2011b)
xPC Target                                            Version 5.1        (R2011b)
xPC Target Embedded Option                            Version 5.1        (R2011b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:28:55.737

我不认为 vision.CascadeObjectDetector 在 R2011b 中可用。它可从 R2012a 获得。您正在运行的演示是否提到任何最低版本要求？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:38:00.223

此错误强烈表明未安装计算机视觉系统工具箱。

要确保它已安装，`ver`请在 Matlab 命令提示符下键入。对我来说，这输出：

```
>> ver
-------------------------------------------------------------------------------------------------------
MATLAB Version: 8.0.0.783 (R2012b)
MATLAB License Number: xxxxxx (edited out)
Operating System: Linux 2.6.35-32-generic #67-Ubuntu SMP Mon Mar 5 19:39:49 UTC 2012 x86_64
Java Version: Java 1.6.0_26-b03 with Sun Microsystems Inc. Java HotSpot(TM) 64-Bit Server VM mixed mode
-------------------------------------------------------------------------------------------------------
MATLAB                                                Version 8.0        (R2012b)
Simulink                                              Version 8.0        (R2012b)
Curve Fitting Toolbox                                 Version 3.3        (R2012b)
Fuzzy Logic Toolbox                                   Version 2.2.16     (R2012b)
Global Optimization Toolbox                           Version 3.2.2      (R2012b)
Image Acquisition Toolbox                             Version 4.4        (R2012b)
Image Processing Toolbox                              Version 8.1        (R2012b)
M2HTML Toolbox - A Documentation Generator for ...    Version 1.5                
MATLAB Coder                                          Version 2.3        (R2012b)
MATLAB Compiler                                       Version 4.18       (R2012b)
Mapping Toolbox                                       Version 3.6        (R2012b)
Neural Network Toolbox                                Version 8.0        (R2012b)
Optimization Toolbox                                  Version 6.2.1      (R2012b)
Parallel Computing Toolbox                            Version 6.1        (R2012b)
Partial Differential Equation Toolbox                 Version 1.1        (R2012b)
Signal Processing Toolbox                             Version 6.18       (R2012b)
Statistics Toolbox                                    Version 8.1        (R2012b)
Symbolic Math Toolbox                                 Version 5.9        (R2012b)
System Identification Toolbox                         Version 8.1        (R2012b)
Wavelet Toolbox                                       Version 4.10       (R2012b) 
```

如您所见，我*没有*安装此工具箱。你？

# django - Django 应用管理最佳实践

> ID：13820901
> 
> 赞同：1
> 
> 时间：2012-12-11T12:56:26.953
> 
> 标签：django, django-models

我读过 Django 中的“应用程序”是一个可重用的功能。

由于这在我的脑海中不是很清楚，也许 Django pro dev 可能会在我开始编码之前判断我的现实生活示例并在必要时让我走上正确的轨道。

我的目标是为我们的工作室创建一个真正轻量级的财务仪表板。

我正在使用 Django Boilerplate 作为项目启动器。

所以我的根看起来像：

```
apps/
config/
db/
libs/
public/
static/
templates/
.gitignore
.manage.py 
```

在“apps/”中，我有以下树（每个都是一个应用程序）

```
apps/invoice (manage all invoices)
apps/estimate (manage all estimates)
apps/customer (manage all customers for both invoice and estimates)
apps/idstore (manage a central repository of unique custom ID for each estimate and invoice)
apps/main (manage all global business logic such as routing etc..) 
```

我做对了吗？错误的 ？我是否过度复杂化了这些东西？在这个组织的开发生命周期中，我会遇到大麻烦吗？

感谢您对此的想法。

# php - PHP Curl 不适用于端口 8080

> ID：13820902
> 
> 赞同：1
> 
> 时间：2012-12-11T12:56:34.070
> 
> 标签：php, tomcat, curl

我正在尝试将 API 请求发送到端口 8080 上的 APACHE tomcat 服务器，但它失败了。我尝试了所有可能的解决方案，但不知何故它不起作用。

我到处搜索维基百科、谷歌、stackoverflow 和其他网站，但没有运气。Curl 能够在端口 80 上向/从同一服务器发送/接收网络请求，但在 8080 上失败。

当我从浏览器打开相同的 URL 时，它工作正常，但从服务器发送请求时失败。

如果有人想自己进行测试，这里是服务器信息

*   IP地址：122.248.246.104
*   端口：8080

此外，当我从 localhost (XAMPP) 测试它时，它运行良好。

如果有人可以帮助我解决这个问题，那就太好了。

问候，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T19:18:16.597

在您尝试从共享服务器进行连接的假设下运行，出于安​​全原因，通过标准 80 或 990 以外的任何端口的连接都将被禁用。我会打电话给您的托管服务提供商，看看他们是否可以通过此端口为您的帐户启用连接。

# javascript - 有谁知道 url 中的“objc://”是什么意思

> ID：13820903
> 
> 赞同：4
> 
> 时间：2012-12-11T12:56:34.920
> 
> 标签：javascript

有谁知道这是什么意思： `objc://` 在这个 javascript 示例代码行中： `var invokeString = "objc://planner/openPDF?" + encodeURIComponent(fileName);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:11:03.767

在这种情况下`objc://`是自定义方案，如 http。除其他外，它可用于打开在 Mac/iOS 上为此协议注册的应用程序（我不确定 Windows 是否支持此功能）。

假设我的 ios-app“Planner”注册为处理 objc://，那么当在浏览器中访问此 URL 时，该应用程序将在我的 iPhone 上打开“Planner”应用程序，并以相同的方式将 URL 传递给应用程序[http:// /www.google.com](http://www.google.com)打开您的 Safari（或您的标准浏览器）应用程序并通过 google.com。

另一个例子是 Apple 使用`itmss://`指向他们的 iTunes 音乐商店的链接。单击其中一个链接将在 iTines 中打开音乐商店。

这是一篇关于[在 iOS 上注册方案](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)的文章。[以及关于URI 方案](http://en.wikipedia.org/wiki/URI_scheme)的 wiki

**更新**

正如 Sheikh Heera 评论的那样，它也可以用作在 Objective-c 应用程序 (iOS/Mac) 中的 UIWebView（运行 HTML/JS 页面）和本机应用程序之间进行通信的一种方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:14:10.760

我用谷歌搜索了它，发现[Calling Objective-C Methods From JavaScript](http://www.sencha.com/forum/showthread.php?105941-Calling-Objective-C-Methods-From-JavaScript)，它说你可以通过调用带有自定义协议的 URL 来调用 Objective-C 方法，比如

```
document.location="mycustomprotocolname:functionName?param1=value1&param2=value2..." 
```

所以`objc://`看起来像一个自定义协议在这里调用一个 Objective-C 方法。

# linux - 基于优先级的线程（不是进程）调度

> ID：13820905
> 
> 赞同：1
> 
> 时间：2012-12-11T12:56:40.270
> 
> 标签：linux, multithreading, scheduling, thread-priority

我有一个包含两个线程的进程。我想根据他们的`priority(SCHED_RR policy)`. 让 t1、t2 表示这些线程，它们最初都具有优先级 1（最低）。

我想确保我的线程 t1 在执行关键任务时不会被抢占/重新调度 - 所以我在关键任务之前将其优先级提高到最大值，并在关键任务之后将其降低到原始值：

```
thread_proc_t1() {
    while(1) {
        if(critical condition happens) {
            set_priority_max();
        }
        printf("t1");
        usleep(xxx);
        if(critical task finished ) {
            reset_priority();
        }
    }   
}

thread_proc_t2() {
    while(1) {
        printf("t2");
        usleep(xxx);
    }   
} 
```

我希望`printf()`线程 t2 中的命令在我调用`set_priority_max()`线程 t1 后不会被执行。但输出也包含来自线程 t2 的打印。

1.  为什么会这样？

2.  我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:58:57.353

没有问题，这是预期的行为。

首先，如果你有多个核心，那么如果准备运行的线程比核心少，那么优先级就无关紧要了——每个线程都会有自己的核心。

其次，您的高优先级线程休眠，这使低优先级线程有时间运行。

第三，您的线程通过保护标准输出的锁进行交互。较高优先级的线程可以等待该锁，从而允许较低优先级的线程运行。

请不要尝试以这种方式使用优先级。它增加了[巨大的复杂性](http://en.wikipedia.org/wiki/Priority_inversion)，损害了性能，并且很少完成任何有用的事情。

# python - Python optparse，有一个选项取决于另一个

> ID：13820906
> 
> 赞同：2
> 
> 时间：2012-12-11T12:56:42.020
> 
> 标签：python, command-line-arguments

有没有办法让以下工作？我正在寻找的是基于另一个选项的价值来获得一个选项的价值。

```
import optparse
parser = optparse.OptionParser()

parser.add_option("--file-name", default="/foo/bar", dest="file_name")

parser.add_option("--file-action", 
    default="cp %s /bar/baz" % (options.file_name), 
    dest="fileaction")

options, args = parser.parse_args() 
```

显然，目前它不会起作用，因为

**赋值前引用的局部变量“选项”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:00:03.170

两者都有：

```
parser.add_option("--file-name", dest="file_name")
parser.add_option("--file-action", dest="file_action") 
```

你可以使用简单的逻辑。

```
if options.file_name:
    #do code relating to file_action 
```

甚至

```
if options.file_action and not options.file_name:
    raise ValueError("No Filename specified")
# do your code here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:58:28.997

稍后您将不得不按摩默认值。如果该选项是默认选项，则进行按摩：

```
parser.add_option("--file-action", 
    default="cp <filename> /bar/baz", 
    dest="fileaction")

options, args = parser.parse_args()

if options.fileaction == "cp <filename> /bar/baz":
    options.fileaction = "cp %s /bar/baz" % (options.file_name) 
```

也就是说，在这个例子中，fileaction 和 filename 似乎有冲突，因此同时设置它们是没有意义的，它们会以不明显的方式相互覆盖。我会让 fileaction 默认为`"cp"`，并添加一个`--action-target`for `'/bar/baz'`，然后从这些部分构建调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:06:30.503

Your parser is a handler. It will explain python what you will do with the command line recieved when the programme is launch. Therefore, it is incorrect to have a dependance in your options.

What I advise you, is to deal with the default behaviour in your code. You can do something like :

```
parser.add_option("--file-action", 
default=None, 
dest="fileaction")

options, args = parser.parse_args()

# Manage the default behaviour
if not options.fileaction:
    fileaction = "cp %s /bar/baz" % (options.file_name)
    # You could then use fileaction the way you would use options.fileaction 
```

# vbscript - 使用 VB 脚本删除其任何单元格中不包含任何数据的 Excel 列

> ID：13820907
> 
> 赞同：-1
> 
> 时间：2012-12-11T12:56:49.443
> 
> 标签：vbscript

如果该列中不包含单个值，是否有使用 vb 脚本删除 Excel 列的更快过程？

```
 For Task=2 To 300

   Vcounter="False"
   IntRow6=2

   Do While objSheet6.Cells(IntRow6,1).Value = ""

  If objSheet6.Cells(IntRow6,Task).Value <> "" Or objSheet6.Cells(IntRow6,Task).Value <> "None"

   Vcounter="True"
   Exit DO

  End If

 IntRow6=IntRow6+1
 Loop

  If  Vcounter <> "True" Then

   objSheet6.Cells(1,Task).EntireColumn.Delete

  End If

 Next 
```

***更新：***

您还可以说如何计算 Excel 每一行中的数据数吗？例如

```
 Col1   Col2  Col3   Col4   Col5

  Row1   A       B            X     P
  Row2   L       M
  Row3                 T            V 
```

现在 VBScript 应该给我 Row1 包含 4 个数据，Row2 包含 2 个数据和 Row3 包含 2 个数据的计数。

***代码更新***

我已经参考您的代码更新了我的代码。并使用“Hi”作为弹出框，查看控件是否进入了If Body。但弹出框始终没有出现。调用“Application.WorksheetFunction.CountBlank(rg)”中似乎发生了一些错误。你能在这里检查并帮助我吗？没有一列被删除，它们应该在哪里。

```
Sub DeleteColumns(Ob6)
     Dim CountBlank 
     Dim rows 
     Dim rg,c
  Set objExcel1 = CreateObject("Excel.Application")

 For c = 150 To 155
    Set rg = Ob6.Range(Ob6.Columns(c),Ob6.Columns(c))
    CountBlank = objExcel1.Application.WorksheetFunction.CountBlank(rg)
    rows = rg.rows.Count

    If CountBlank = rows Then
        MsgBox("Hi")
        rg.EntireColumn.Delete
    End If
 Next
End Sub 
```

***修复：***我刚刚修复了它。所以这里没有问题。只需要您对***更新***部分的帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:19:57.507

您可以使用在 Application.WorksheetFunction 中找到的函数 CountBlank

```
Dim CountBlank As Long
CountBlank = Application.WorksheetFunction.CountBlank(Range("A:A")) 
```

然后，您只需将其与同一范围内的行数进行比较：

```
Dim ws As Worksheet
Dim rows As Long
Set ws = ThisWorkbook.Worksheets(1)
rows = ws.Range("A:A").Count 
```

从索引 1 到 300 删除空列的整个代码如下所示：

```
Sub DeleteColumns()
    Dim CountBlank As Long
    Dim ws As Worksheet
    Dim rows As Long
    Set ws = ThisWorkbook.Worksheets(1)
    Dim rg As Range

    For c = 1 To 300
        Set rg = Range(ws.Columns(c), ws.Columns(c))
        CountBlank = Application.WorksheetFunction.CountBlank(rg)
        rows = rg.rows.Count

        If CountBlank = rows Then
            rg.EntireColumn.Delete
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:43:32.290

你的想法很完美，除了我在代码中做了一些改变。我们需要使用 Decrement For 循环，而不是 Increment 循环。否则，Delete 函数不会删除所有列。这里更改和更新的代码是：

```
Sub DeleteColumns(Ob6)
  Dim CountBlank 
  Dim rows 
  Dim rg,c

  For c = 155 To 150 step - 1
    Set rg = Ob6.Range(Ob6.Columns(c),Ob6.Columns(c))
    CountBlank = objExcel1.Application.WorksheetFunction.CountBlank(rg)
    rows = rg.rows.Count
         'MsgBox("CountBlank:"&CountBlank)
         'MsgBox("Count:"&rows)
    If CountBlank = (rows-1) Then ' Rows-1 means the count should start from the 2nd row onward

        rg.EntireColumn.Delete

    End If
 Next

End Sub 
```

# websphere - WAS7 上没有球衣的 JAX-RS

> ID：13820912
> 
> 赞同：6
> 
> 时间：2012-12-11T12:57:14.793
> 
> 标签：websphere, jax-rs, web.xml, websphere-7, websphere-8

我在 WAS 8.0 上部署了 JAX-RS WS 应用程序，其中包含一个空的 2.4 web.xml、扩展“javax.ws.rs.core.Application”的类和 2 个资源，并且效果很好。

我想在 WAS 7.0 上部署此应用程序，但我得到：“错误 404：SRVE0190E：找不到文件：/rest/source”（这是资源的路径）。

如何在不使用 Jersey 或任何其他应用程序服务器相关类的情况下在 WAS 7.0 上部署 JAX-RS 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:50:57.463

在 WAS 7 中，您必须在 web.xml 中定义 servlet：

```
<servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>com.ibm.websphere.jaxrs.server.IBMRestServlet</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>YOUR APPLICATION CLASS</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

此外，WAS 7 不与 JAX-RS 捆绑，您应该将 JAX-RS jar 添加到您的 Web 模块或将其添加为共享库。

# iphone - 以字典形式存储图像 EXIF 元数据

> ID：13820915
> 
> 赞同：0
> 
> 时间：2012-12-11T12:57:25.013
> 
> 标签：iphone, ios, xcode, upload, exif

我想将图像的 EXIF 数据存储在 `DictRequest`.

我该怎么做？请帮我

下面是代码：

```
ALAssetRepresentation *rep = [temp defaultRepresentation];

StrPath = [StrPath stringByAppendingFormat:@"%d.%@",(int)timeInterval,strImageType];

UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
NSLog(@"Image width %f Image height %f",image.size.width,image.size.height);

NSData *dataObj = nil;
dataObj = UIImageJPEGRepresentation(image, 1.0);

NSLog(@"Length of data %d",[dataObj length]);
NS    tring* StrFileData = [Base64 encode:dataObj];
NSString* strFileHash = [dataObj md5Test];

//----------------------------------------------------
NSMutableDictionary *DictRequest = [[NSMutableDictionary alloc]init];
[DictRequest setObject:srtprefSessionId forKey:@"SessionId"];
[DictRequest setObject:StrPath forKey:@"Path"];
[DictRequest setValue:[NSNumber numberWithBool:isTrash] forKey:@"UploadDirectlyToTrashbin"];
[DictRequest setObject:StrFileData forKey:@"FileData"];
[DictRequest setObject:strFileHash forKey:@"FileHash"];
[DictRequest setObject:result forKey:@"DateCreated"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:11:10.667

您可以使用 访问图像的元数据`[rep metadata]`。字典应包含 EXIF 数据。EXIF 数据不能通过 UIImage 对象访问。

# linux - java.lang.UnsatisfiedLinkError: /opt/oracle/oraloader-2.0.0-2/lib/libolh11.so: libclntsh.so.11.1: 无法打开共享对象文件

> ID：13820918
> 
> 赞同：0
> 
> 时间：2012-12-11T12:57:41.030
> 
> 标签：linux, oracle, hadoop, classpath, hdfs

在集群上运行 hadoop 作业时，我得到以下信息。

```
2012-12-11 04:20:47,642 INFO oracle.hadoop.loader.lib.output.OCIOutputFormat: loadNativeLib: java.library.path=/opt/oracle/oraloader-2.0.0-2/lib:/usr/lib/hadoop-0.20-mapreduce/lib/native/Linux-amd64-64:/u04/hadoop/mapred/taskTracker/ashsshar/jobcache/job_201212110407_0004/attempt_201212110407_0004_r_000000_0/work
2012-12-11 04:20:47,657 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2012-12-11 04:20:47,661 FATAL org.apache.hadoop.mapred.Child: Error running child : java.lang.UnsatisfiedLinkError: /opt/oracle/oraloader-2.0.0-2/lib/libolh11.so: libclntsh.so.11.1: cannot open shared object file: No such file or directory
    at java.lang.ClassLoader$NativeLibrary.load(Native Method) 
```

我已经检查过这些文件是否存在于集群节点的所需目录下。我还更改了这些文件的权限。

我已经修改了 hadoop 的 mapred-site.xml 中的 LD_LIBRARY_PATH 以使用 mapred.child.java.opts 选项添加这些必需的 3rd 方 jars

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:25:04.203

要让 java 库加载器找到库，您应该设置 JAVA_LIBRARY_PATH

# algorithm - 如何找到可能的最长路线？

> ID：13820924
> 
> 赞同：4
> 
> 时间：2012-12-11T12:57:57.677
> 
> 标签：algorithm, optimization

以下问题：

发动机（例如汽车）在笔直的道路上开始其旅程。它的消耗与距离成正比（例如 480 公里使用 1 个单位的燃料，因此 48 公里使用 10 个单位的燃料）。该发动机最多可以运输一个单位的燃料。

在起点供应 n0 个燃料单位。路线上的不同点有燃料库（例如 n1 @ d1、n2 @ d2 等），驾驶员可以在路线上的任何地方卸油。例如，对于一个单位的值 480 公里，驾驶员可以驾驶 160 公里创建一个具有 1/3 单位燃料的仓库，然后开回起点给他的发动机加油。

我正在寻找一种算法（或一些想法来找到一个）来找到可以达到的最大距离，具体取决于起始燃料和路线上的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:12:10.093

根据直觉，贪心算法应该是最优的，即通过最大化每个站点的可用燃料量，您正在最大化可能的路线。这只是我的观点，我假设“路线上的任何地方”是“实际上在任何仓库”。

贪心算法将如何工作？在每个时间点，您只有两个决定：“继续前进”或“返回上一个仓库进行补充”。只要能增加当前的仓库储备，贪婪者总会后退。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:15:08.220

我认为您也可以“反转” a*, dijkstra 方法中使用的“<=”比较。

或者添加一个逻辑参数（最佳、最差）路径。

所以你可以保持相同的路径搜索而无需重复代码。

# mercurial - 只允许在 Mercurial 中使用特定文件名提交

> ID：13820928
> 
> 赞同：1
> 
> 时间：2012-12-11T12:58:08.050
> 
> 标签：mercurial, hook, commit, hgrc

有没有办法只在提供文件名时使用 hg commit 命令？

这应该有效： `hg commit file1 file2`

这不应该： `hg commit`

我不希望人们错误地提交不应该提交的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:41:25.783

我不确定这是否可行，但听起来您的工作流程和/或 Mercurial 知识有问题，所以我将回答在 Mercurial 中通常如何管理此问题。

当您说“提交不应该提交的文件”时，您是什么意思？我可以得到该短语的两种含义之一：

1.  人们将不应添加的文件添加到存储库
2.  人们更改不应该更改的文件，然后提交它们

如果是第一个，那么您应该将文件移出工作副本，或者将它们添加到[`.hgignore`](http://mercurial.selenic.com/wiki/.hgignore)文件中。此文件用于指定`*.obj`应被命令忽略的文件（或文件模式，例如`hg status`和） `hg commit --addremove`。

如果是第二个，那么您和您的团队应该在提交之前审查他们所做的更改。他们应该使用`hg status`来检查哪些文件已被更改，然后`hg diff`在他们看到任何他们可能不打算提交的内容时使用。如果您通过一次只修复一个问题或将新功能分解为多个阶段并在每个阶段之后提交来养成更频繁地提交的习惯，这会更容易。

另一个可能的问题是您有一个配置文件，开发人员经常更改该配置文件，但不应将其提交到存储库。此问题的典型解决方案是，您在存储库中有一个模板配置文件，每个人在克隆存储库时都需要将其复制到正确的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:49:09.700

实际上，这很简单。您可以通过将 commit 定义为自身的别名来实现，但要使用显式参数。在`[alias]`hgrc 文件的部分中，添加以下内容：

```
commit = commit $1 
```

这仍然可以处理多个参数：它们只是附加到别名扩展的末尾。但是如果你尝试在没有参数的情况下提交，你会得到一个类似这样的错误：

> abort: $1: 没有这样的文件或目录

使用更详细的别名，您可以提供自己的错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:33:51.670

如果您的工作目录包含多个特定更改（我认为只提交特定文件的唯一原因），那么单个文件可能包含多个更改 - 有些您想要提交，有些您不想提交。

与其限制应签入的文件，不如考虑使用[Record 扩展名](http://mercurial.selenic.com/wiki/RecordExtension)或[Shelve](http://mercurial.selenic.com/wiki/ShelveExtension)之类的东西。两者都允许您指定提交哪些特定更改，但方式略有不同（我认为 Record 可能适合您的需要）。

但是，就我个人而言，我会考虑更改您的工作流程以进行小的更改并定期提交。您的问题表明您正在尝试以几乎基于文件的方式（à la CVS（或 Subversion？））使用 Mercurial，而 Mercurial 是基于变更集的，将存储库的状态视为一个整体。

# android - EditText 并转到下一个

> ID：13820932
> 
> 赞同：3
> 
> 时间：2012-12-11T12:58:18.580
> 
> 标签：android, android-layout

我的应用程序中有一些 EditTexts，我正在使用：`android:nextFocusDown="@+id/last_name_edit_text"`转到下一个 editText 按“下一步”按钮。我对最后一个 EditText 有问题。我想在这是最后一个 EditText 时添加我想在完成按钮上更改下一个按钮。我如何在 xml 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:01:30.297

在最后一个editText中添加这个

```
android:imeOptions="actionDone" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:02:36.340

使用 imeOptions="actionDone"

[在这里](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)和[这里](http://developer.android.com/guide/topics/ui/controls/text.html)检查

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T13:05:31.400

```
android:imeOptions="actionDone" 
```

以下内容可能对您有所帮助

*   [http://developer.android.com/resources/articles/on-screen-inputs.html](http://developer.android.com/resources/articles/on-screen-inputs.html)
*   [http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:02:00.360

`android:imeOptions="actionDone"`在最后一个编辑文本上使用

**对于下一个 -** `android:imeOptions="actionNext"`

**完成**-`android:imeOptions="actionDone"`

# javascript - 在谷歌地图 api v3 (javascript) 中获取 dragend 标记的旧位置

> ID：13820940
> 
> 赞同：3
> 
> 时间：2012-12-11T12:58:46.567
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

您好，我在网上搜索但找不到答案，所以我需要您的宝贵帮助。有我的代码：

```
 for(var i=0; i<10;i++){         
        LatLon=new google.maps.LatLng(39.633336, 22.386423);
        Marker= new google.maps.Marker({position:LatLon,map:MyMap,draggable: true,title:'Mytitle'+i});
        MarkersArray[] = Marker; //keep markers in array because i want to delete them later!!!
        google.maps.event.addListener(Marker,"dragend",function(event){
            var markerNewPosition = this.getPosition();
            alert("old position: **here i want to show the old position** \nnew position: "+markerNewPosition);
        });
    } 
```

直到现在，当我拖动标记时，我会提醒它新位置的纬度和经度。但我想要更多的东西！我想提醒旧位置的经纬度。换句话说，我希望在 dragend 处理程序中获取标记所在位置的坐标和标记所在的新位置的坐标。有人知道怎么做吗？任何想法将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T13:16:23.333

您需要使用`dragstart`事件侦听器来获取它。你可以这样存储：

```
var GLOBAL = {};

...

google.maps.event.addListener(Marker,"dragstart",function(event){
    var markerOldPosition = this.getPosition();
    GLOBAL.startDragPosition = markerOldPosition;

});
google.maps.event.addListener(Marker,"dragend",function(event){
    var markerNewPosition = this.getPosition();
    alert("old position: " + GLOBAL.startDragPosition + " \nnew position: "+markerNewPosition);
    delete GLOBAL.startDragPosition;
}); 
```

# google-apps - 如何获取 Google-apps 用户个人资料图片 URL

> ID：13820941
> 
> 赞同：2
> 
> 时间：2012-12-11T12:58:54.340
> 
> 标签：google-apps, google-contacts-api

可以使用[此](https://developers.google.com/google-apps/profiles/#retrieving_photo)获取 google-apps 用户个人资料图片，我们 [可以获得正常的 google 用户个人资料图片 URL](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)，但我需要获取 google-apps 用户个人资料图片 URL。有没有办法使用消费者密钥而不是访问令牌来获取 google-apps 用户个人资料图片 URL。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T13:09:27.853

该 API 调用也应该适用于 Google Apps 用户（所有 Google Apps 帐户实际上也是 Google 帐户）。你试过了吗？你得到了什么错误？

# javascript - 加载 JQuery 后加载 JS

> ID：13820944
> 
> 赞同：1
> 
> 时间：2012-12-11T12:58:58.647
> 
> 标签：javascript, jquery, function

> **可能重复：**
> 
> *   [如何在没有jquery的情况下检查跨浏览器的脚本元素加载事件](https://stackoverflow.com/questions/12574549/how-to-check-the-script-element-load-event-accross-browser-without-jquery)
> *   [等待动态脚本加载的 JS 类加载](https://stackoverflow.com/q/5412531/2247494)
> *   [动态脚本加载同步](https://stackoverflow.com/q/774752/2247494)
> *   [脚本的加载和执行顺序](https://stackoverflow.com/q/8996852/2247494)
> *   [等待脚本对象加载](https://stackoverflow.com/q/11638354/2247494)

我以这种方式包含了 jQuery：

```
function loadScript(loc){
  var head = document.getElementsByTagName('head')[0];
  var file = document.createElement('script');
  file.src = loc;
  file.type = "text/javascript";
  head.appendChild(file)
}

loadScript("js/jquery.js") 
```

现在应该以相同的方式加载下一个脚本。但是如果在最后一行之后加载，我就不能使用 jQuery，因为它可能没有完成加载。那么如何检查 jQuery 的加载是否完成？我可以做这样的事情吗？：

```
while (typeof jQuery == 'undefined')
  {
  wait...
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T13:11:30.390

动态加载脚本的普遍接受的方法是通过创建脚本元素然后附加到 DOM（就像您所做的那样），而且还分配一个回调函数来检测脚本何时加载。

```
function loadScript(url, callback){
    var script = document.createElement("script")
    script.type = "text/javascript";

    if (script.readyState){
        // handle IE
        script.onreadystatechange = function(){
            if (script.readyState == "loaded" || script.readyState == "complete"){
                script.onreadystatechange = null;
                callback();
            }
        };
    } else {
        // handle other browsers
        script.onload = function(){
            callback();
        };
    }

    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

用法：

```
loadScript("https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js", function(){
    // jquery is loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:09:27.953

JS 是单线程的应用程序使用：如果你创建一个无限循环，整个页面就会被卡住。

通常，在所有依赖库之前包含 JQuery，并且库仅在收到 $(document).ready 事件后才使用来自 JQuery 的 DOM API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:34:12.650

那里很少有装载机。您可以轻松使用它们。前任。-

1.  [http://headjs.com/](http://headjs.com/)
2.  [http://labjs.com/](http://labjs.com/)
3.  [http://www.dustindiaz.com/scriptjs](http://www.dustindiaz.com/scriptjs)

检查这个[http://labjs.com/documentation.php](http://labjs.com/documentation.php)。这个的编码方法看起来和你的相似。你可以写 -

```
<script>
   $LAB
   .script("framework.js").wait()
   .script("plugin.framework.js")
   .script("myplugin.framework.js").wait()
   .script("init.js").wait();
</script> 
```

看到等待（）？它告诉“framework.js”必须先加载，然后再执行其他脚本。

# ruby - 用ruby cucumber填写表单时导致nil：NilClass（NoMethodError）的未定义方法“form”的原因

> ID：13820945
> 
> 赞同：-3
> 
> 时间：2012-12-11T12:58:59.240
> 
> 标签：ruby, cucumber, watir

我正在尝试使用 ruby​​ cucumber 填写一些表单，但我得到了 nil:NilClass (NoMethodError) 的未定义方法“form”。在第一页上，它正确填写了表格，但在第二页上，我收到了错误消息。

代码

```
Then /^next page Licence Type: "(.*)", Licence Years: "(.*)", NCD: "(.*)"$/ do |licence_type, licence_years, ncd|
   step 'I wait "1" seconds'
   frame = @browser.frames.find{ |frame| frame.form(:action => "Default.aspx?Action=nav&Page=5047").exists? }
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").select(:id => "ctl03_content-216088_drivinglicencetype-213533_dd").select licence_type
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").select(:id => "ctl03_content-216088_drivinglicenceyears-213534_dd").select licence_years
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").select(:id => "ctl03_content-216088_ncd-for-new-models-767231_dd").select ncd
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").select(:id => "ctl03_content-216088_nrofclaims-213540_dd").select "None"
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").select(:id => "ctl03_content-216088_nrofconvictions-220190_dd").select "None"
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").radio(:id => "ctl03_content-216088_usualpaymentmethod-231551_rbRadioList_0").click
   frame.form(:action => "Default.aspx?Action=nav&Page=5047").button(:id => "ctl03_navigation-216089_table-261670_row-261671_next-261674_next-261675_pbNext").click
   step 'I wait "1" seconds'
end

Then /^next page 2 Mileage: "(.*)", Car Value: "(.*)" & Overnight Location: "(.*)"$/ do |mileage, car_value, overnight_location|
  frame = @browser.frames.find{ |frame| frame.form(:method => "post").exists? }
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").select(:id => "ctl03_content-231405_car-details-231421_annualmileage-231427_dd").select mileage
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").text_field(:id => "ctl03_content-231405_car-details-231421_vehiclevalue-231426_tb").set car_value
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").text_field(:id => "ctl03_content-231405_car-details-231421_purchase-date-231428_MONTH").set "01"
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").text_field(:id => "ctl03_content-231405_car-details-231421_purchase-date-231428_YEAR").set "2008"
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").select(:id => "ctl03_content-231405_car-details-231421_garage-231424_dd").select overnight_location
  frame.form(:action => "Default.aspx?Action=nav&Page=5322").button(:id => "ctl03_navigation-231432_copy-of-table-261677_row-261678_next-261681_next-261682_pbNext").click
  step 'The page Assumptions containing the following text'
  frame.form(:action => "post").button(:id => "ctl03_navigation-279445_copy-of-copy-of-table-279454_row-279455_next-279458_next-279459_pbNext").click
  step 'I wait "1" seconds'
  price =  frame.form(:action => "Default.aspx?Action=nav&Page=5334").div(:id, "premiumprice-882008").exist?
  puts price
  puts assert price.eql? (true)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:40:31.050

您收到该错误是因为`frame`-`nil`它找不到带有`:method => "post"`. 也许您应该`:action => "Default.aspx?Action=nav&Page=5322"`像在第一个示例中那样通过操作查找表单。或者，也许您需要在查找之前添加等待步骤 - 这些是我可以看到的与您的工作示例的唯一区别。

另外，我强烈建议您将表单分配给一个变量，这样您就不会一直重复`frame.form(:action => "Default.aspx?Action=nav&Page=5047")`等等 - 哎呀！

# ruby-on-rails - 如何让我的 application.rb 文件从活动管理员中识别 current_user？

> ID：13820946
> 
> 赞同：0
> 
> 时间：2012-12-11T12:58:59.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我正在关注这个帖子：

[活动管理员 - 用户和管理员的相同模型](https://stackoverflow.com/questions/8268730/active-admin-same-model-for-users-and-admins)

我已经把

```
# if user is not admin redirect to main page
def admin_required
  current_user.is_admin? || redirect_to("/")
end 
```

在我的 app/controllers/application_controller.rb

但是我想我错过了类似的东西

```
require 'activeadmin' 
```

或者因为我收到以下错误：

> 未定义的局部变量或方法“current_user”

我错过了一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:06:23.493

您可以在其中定义`current_user`方法，`app/controller/application_controller.rb`然后将其作为 helper_method 提供：

```
def current_user
  return unless session[:user_id]
  @current_user ||= User.find_by_id(session[:user_id])
end
# Make current_user available in templates as a helper
helper_method :current_user 
```

# android - Android性能api级别11及以上

> ID：13820952
> 
> 赞同：8
> 
> 时间：2012-12-11T12:59:12.500
> 
> 标签：android, performance

我似乎有一个无法解决的问题，我花了一个周末来解决它，无法解决它。当我用两个活动制作一个简单的测试应用程序时： 1\. Mainactivity：几个按钮、一个计时器（后台线程）和一个对 SQLite 数据库的轻请求。2\. 第二个活动：几个按钮，只有一个有一个点击监听器，当你点击它时，你只需回到第一个活动。我使用大按钮（屏幕宽度约为屏幕高度的四分之一），xml 布局资源不包含任何嵌套的权重元素或其他奇异的东西。

这是一个测试项目，没有其他功能。

我遇到了以下严重问题： - 当我将清单文件中的 api 级别设置为 3 时，一切正常。（在兼容模式下自动屏幕）-当我将 api 级别设置为 11 或更高时，第二个活动可能需要长达 10 秒才能加载。第一次打开第二个activity后，东西好像被缓存了，延迟不复存在了。- 当我将 api 级别设置为 11 或更高时，我强制（屏幕分辨率）兼容模式：没有变化，延迟仍然存在。

我已经构建了这个测试项目，因为我在升级旧应用程序时遇到了这个问题。它在较旧的 api 级别上运行顺利，每当我将它放到 Android 版本 3 或更高版本时，它都会延迟长达 25 秒！（即使是打开一个只显示静态文本的活动......）。

我正在测试一个新的 Galaxy Tab，这不是问题。我花了几个小时在谷歌上搜索解决方案，但从未找到任何接近它的东西。我什至完全卸载了 Eclipse 和所有 android 资源，并重新安装和更新了所有内容（包括我的 Galaxy Tab 的出厂重置）。没运气。

我做了一个跟踪，问题出在 GLES20Canvas.nDrawDisplayList 中。似乎建立这个列表需要很多时间，即使没有太多要建立的......

有谁知道我该如何解决这个问题？

谢谢，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:40:34.527

我通过检查这篇文章找到了解决这个问题的方法： [http ://code.google.com/p/android/issues/detail?id=22514](http://code.google.com/p/android/issues/detail?id=22514)

解决方案是禁用硬件加速。

在`AndroidManifest.xml`, 在您的应用程序标记中，添加：

```
android:hardwareAccelerated="false" 
```

现在一切都再次顺利进行。不幸的是，硬件加速不会使您的应用程序在启动时运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:05:35.933

> **GLES20Canvas.nDrawDisplayList**

当它来的时候**`expected to have a large portion of the time if you are drawing a lot, especially very big views`**。

我希望你给你来自[android-30-hardware-acceleration的 Do's 和 Dont's 链接](http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html)

# python - Pyside Signal 和 Slots 连接新方法

> ID：13820954
> 
> 赞同：4
> 
> 时间：2012-12-11T12:59:15.477
> 
> 标签：python, pyside, signals-slots

这段代码：

```
self.buttonOk.clicked(self.accept())
self.buttonCancel.clicked(self.reject()) 
```

显示此错误：

```
TypeError: native Qt signal is not callable 
```

如何将 buttonOk 的 clicked() 信号连接到 accept() Slot？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:01:02.780

您的代码有几处问题。

首先，您需要使用信号的`connect()`方法进行连接；其次，您需要传入一个*可调用对象*（即没有括号）。

所以你的代码需要看起来像这样：

```
self.buttonOk.clicked.connect(self.accept)
self.buttonCancel.clicked.connect(self.reject) 
```

可以在[这里](https://qt-project.org/wiki/Signals_and_Slots_in_PySide)找到 PySide 的信号和插槽支持的概述。

# javascript - 对于每个循环在除 Firefox 之外的主流浏览器中都不起作用

> ID：13820960
> 
> 赞同：1
> 
> 时间：2012-12-11T12:59:44.387
> 
> 标签：javascript, google-chrome, firefox, internet-explorer-9

我的代码：

```
<script type="text/javascript">
for each ( var movie in ['Endhiran The Robot','Shivaji The Boss','Anbulla Rajinikanth'] )
    document.writeln(movies + "<br/>");
</script> 
```

在 Firefox 中，我得到的输出为

```
Endhiran The Robot
Shivaji The Boss
Anbulla Rajinikanth 
```

但是在`IE9`and`Chrome Version 23.0.1271.95 m`中`for each`不起作用，并且文档上没有写任何内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:02:42.273

该`for each`构造是对 ECMAScript 语言的扩展；它是在 E4X 规范中定义的，但并未得到广泛支持。

我认为只有 Firefox 在 HTML 脚本缩影中支持它，它已被弃用：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)

要遍历数组，可以使用普通`for`循环：

```
var movies = ['Endhiran The Robot', 'Shivaji The Boss', 'Anbulla Rajinikanth'];
for (var i = 0; i < movies.length; ++i) {
  document.writeln(movies[i] + "<br/>");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:05:24.480

JavaScript中没有`for each`，那是一个非标准的扩展。

有一个新的[ES5`forEach`函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)，它在现代浏览器中得到很好的支持，当然在旧的浏览器中不支持：

```
['Endhiran The Robot','Shivaji The Boss','Anbulla Rajinikanth'].forEach(function(movie) {
    document.writeln(movie + "<br/>");
}); 
```

Stack Overflow 上的[其他答案](https://stackoverflow.com/questions/3943494/how-to-loop-through-array-in-jquery/3943526#3943526)中还有其他几个选项。（问题提到了 jQuery，但答案涵盖了纯 JavaScript 和 jQuery 选项。）

# iphone - 自定义 WEPopover 推送控制器

> ID：13820961
> 
> 赞同：0
> 
> 时间：2012-12-11T12:59:46.097
> 
> 标签：iphone, ios6, popup, popover, presentmodalviewcontroller

我正在使用 WEPopover 项目的源代码在 iPhone 上创建一个弹出窗口。(https://github.com/werner77/WEPopover)

当我点击弹出窗口中显示的 uitableview 中的一行时，我尝试推送视图控制器。iOS6 中推送的视图控制器以与弹出窗口相同的视图大小显示。在 iOS5 中，新的视图控制器在整个屏幕尺寸上正确显示。

可能是什么问题？提前致谢。

```
Task *task = [ar objectAtIndex:indexPath.row];
    TaskViewController *viewController =[[TaskViewController alloc] init];
    viewController.currentTask = task;

    viewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:viewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:28:54.157

要解决此问题，您需要从显示弹出窗口的 ViewController 推送您的 ViewController。

# html - 如何在网页中添加字体

> ID：13820963
> 
> 赞同：0
> 
> 时间：2012-12-11T12:59:50.377
> 
> 标签：html, css

如何在页面中添加字体。

例如，假设我有一个特定的`.TTF`文件。

我想在特定网页上使用这个文件。现在，随着所有浏览器处理不同字体的方式不同，CSS 中可以在`font-family`标签中添加“字体文件”。

如果这是无法解决或难以置信的简单，我很抱歉，我是 CSS 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:03:40.353

创建字体文件夹并保存所有字体文件

```
 @font-face {
        font-family: 'Archer-Semibold';
        src: url('fonts/archer-semibold-pro.eot');
        src: url('fonts/archer-semibold-pro.eot?#iefix') format('embedded-opentype'),
                 url('fonts/archer-semibold-pro.woff') format('woff'),
                 url('fonts/archer-semibold-pro.ttf') format('truetype'),
                 url('fonts/archer-semibold-pro.svg#archer-semibold-pro') format('svg');
        font-weight: normal;
        font-style: normal;
    }

.menu {
  font-family: Archer-Semibold;
} 
```

`url('fonts/archer-semibold-pro.eot')`用于 IE 9，`url('fonts/archer-semibold-pro.eot?#iefix')`用于 IE 6 到 8

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:01:57.053

[这个页面](http://www.css3.info/preview/web-fonts-with-font-face/)应该可以帮助你。

你声明你的新字体：

```
@font-face { 
  font-family: Delicious; 
  src: url('Delicious-Roman.otf'); 
} 
```

然后引用它

```
h1 {
  font-family: Delicious;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T13:03:27.970

如果您拥有一个`.ttf`-file，您可以访问一个为您制作网络字体的网站（例如 font-squirrel：[http](http://www.fontsquirrel.com/fontface/generator) ://www.fontsquirrel.com/fontface/generator ）。

你会得到一个包含字体的 zip，一个带有一些字体修饰的 CSS 文件。那应该让你开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T13:02:19.160

使用`@font-face`

```
@font-face {
    font-family:font-name;
    src: url(path-to-font/font-name);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T13:03:47.257

试试这个：

```
@charset "utf-8";       //file encoding

@font-face {
font-family: 'GoodDogRegular';
src: local("GoodDog Regular");
url('fonts/gooddog-webfont.ttf') format('truetype'),
font-weight: normal;
font-style: normal;
} 
```

您现在可以像在 CSS 中使用常规字体一样使用此字体。

```
.menu {
font-family:GoodDogRegular;
color:#dd0000;
font-size: 36px;
font-weight:bold;
} 
```

# android - 为 Android 构建的混合应用程序在向输入框中输入数字时崩溃

> ID：13820964
> 
> 赞同：3
> 
> 时间：2012-12-11T12:59:54.323
> 
> 标签：android, html, dojo, ibm-mobilefirst

我不确定是否有人以前见过这样的事情（我希望你见过！）但这让我很困惑。

基本上，我在 Android上有一个带有输入框的**HTML 5 。**每当我在这些框中输入数字时，应用程序就会崩溃。

我已经用**input type="text"**和**type="number"**试过了，但这不好，会出现同样的结果。

如果我输入一个**0，那么它将**在输入下一个数字时崩溃。如果我以 0 以外的值领先，它通常会在我输入第四个数字时崩溃。

这种行为真的很奇特。如果我在文本类型的输入框中输入文本，那绝对没问题。如果我真的很快输入数字，它就无法应对并崩溃。如果我慢慢输入它们，该应用程序会更好地应对并允许我输入更多数字。

我正在使用 Worklight 和三星 Galaxy S3 构建我的应用程序。其他一切都运行良好，但就目前而言，这是一个相当大的问题。

有没有人遇到过这种情况或可以提出解决方法？我正在使用 Dojo 文本框（尽管我也使用了标准的 html 5 输入框并且达到了相同的最终结果）。Dojo 在应用程序的其他任何地方都可以正常工作。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:22:39.870

对我来说，我升级到了最新版本的 Worklight（这是我构建混合应用程序的方式）并且问题得到了解决。我应该在升级之前检查一下，但我认为随附的 PhoneGap 版本是后来的版本（因为那是我的问题被创建的地方）。希望对你有帮助！

# asp.net - 找不到或无法访问 Asp.net SQL 服务器实例

> ID：13820965
> 
> 赞同：1
> 
> 时间：2012-12-11T12:59:55.307
> 
> 标签：asp.net, sql-server, instance, accessible

我正在做一个网络项目，当我使用 vs2008 时，一切正常。但是在我使用另一台机器并在 vs2012 下使用相同的方式设置项目后，异常总是说找不到实例或无法访问。

我有谷歌的解决方案，但他们正在使用 SQL 服务器管理工​​具来解决它。

我刚刚安装了 vs2012，是否需要安装新的 SQL Server 2012 来获取这些工具来配置它？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:00:09.087

最后，在我的案例中，我得到了简单的解决方案。我所做的只是

1.  安装 SQL SERVER 2012 EXPRESS

2.  打开 SQL 服务器配置管理器

3.  转到左侧面板上的 SQL SERVER NETWORK CONFIGURATION

4.  展开它并选择特定服务器的协议

5.  在右侧面板上，启用 TCP/IP

6.  重启对应的服务器

经过这些步骤，一切都完成了。

因为某些 SQL SERVER 设置会默认禁用 TCP/IP。

所以即使我们安装了 Visual Studio，我们仍然无法确保服务器能够被使用。

然后我们要做的就是至少下载并安装 SQL Server Express 以获得配置工具。

老实说，这是我第一次遇到这种问题，这完全是因为 Visual Studio 2012。

希望这可以帮助那些有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:03:58.853

您需要确保 SQL 连接字符串有效，例如 IP 地址/主机名、用户名、密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T11:08:37.717

I also had this type of error, but now i'm using the new Microsoft SQL server 2017, and this is successfully run on my machine i suggest that try this new version, Here is the link [https://www.microsoft.com/en-us/sql-server/sql-server-2017](https://www.microsoft.com/en-us/sql-server/sql-server-2017) , hope you like it.. try once.!

# ios - 关闭当前视图控制器时 UIView 框架发生变化

> ID：13820967
> 
> 赞同：2
> 
> 时间：2012-12-11T12:59:57.210
> 
> 标签：ios, ios5, uiview, uitoolbar, cgrect

我有一个模态的视图。此视图呈现另一种模式视图。当视图被关闭时，初始视图（第一个模态视图）会改变它的框架。所以我在这个视图上的工具栏会在状态栏下向上滑动......如何解决这个问题？

```
2012-12-11 14:53:49.976 app[11225:907] toolbar frame: {{0, 0}, {320, 44}}
2012-12-11 14:53:49.979 app[11225:907] view frame: {{0, 20}, {320, 460}}
2012-12-11 14:54:07.496 app[11225:907] toolbar frame: {{0, 0}, {320, 44}}// here the second modal view is dismissed 
2012-12-11 14:54:07.498 app[11225:907] view frame: {{0, 0}, {320, 480}} 
```

该应用程序不使用全屏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:15:42.573

`presentModalViewController`由于弃用了AND ， 因此应该这样做`dismissModalViewControllerAnimated`。这两种方法在 iOS6 中已弃用。

试试这个代码。这会帮助你

```
// ~~~~~~~~~~~~~~present

if ([self respondsToSelector:@selector(presentViewController:animated:completion:)])
{
    [self presentViewController:test animated:YES completion:nil];
}
else
{
     [self presentModalViewController:test animated:YES];
}
// ~~~~~~~~~~~~~~dismiss

if ([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
{
    [self dismissViewControllerAnimated:animated completion:nil];
}
else
{
    [self dismissModalViewControllerAnimated:animated];
} 
```

希望对你有帮助............

# .net - 是否有任何可用于 Powershell 的单元测试库、模块等？

> ID：13820976
> 
> 赞同：0
> 
> 时间：2012-12-11T13:00:32.003
> 
> 标签：.net, unit-testing, powershell

> **可能重复：**
> [如何在 Powershell 中进行 TDD 和单元测试？](https://stackoverflow.com/questions/940497/how-to-do-tdd-and-unit-testing-in-powershell)

是否有任何可用于 Powershell 的单元测试库、模块等？

（或者由于 Powershell 是建立在 .NET 之上的，人们是否以某种方式使用 Debug.Assert 方法？）

# c# - NHibernate 与 linq 分页性能

> ID：13820977
> 
> 赞同：0
> 
> 时间：2012-12-11T13:00:38.927
> 
> 标签：c#, performance, sqlite, nhibernate

我在 ac# 项目中的 SQLite DB 上使用 NHibernate。我有一个通用的批量数据处理方法，如下所示：

```
 private void DataProcess<Tobj>(int pageSize, Expression<Func<Tobj, bool>> whereClause,
        Action<Tobj, ISession> dataProcessingCallback) where Tobj : IModelBase
    {
        int offset = 0;
        bool moreToGet = true;

        while (moreToGet)
        {
            DataAccess((ISession session) =>
            {
                IEnumerable<Tobj> result = session.Query<Tobj>().Where(whereClause);
                List<Tobj> data = result.Skip(offset)
                    .Take(pageSize)
                    .ToList();
                foreach (Tobj item in data) { dataProcessingCallback(item, session); }

                if (data.Count == pageSize) { offset += pageSize; }
                else { moreToGet = false; }
            });
        }
    } 
```

（DataAccess 方法为我们提供了可以使用的会话对象、处理事务等）

环顾四周，这似乎与大多数其他 linq 分页实现非常相似。他们通常会做一个 .Skip().Take()

我的问题是，对于大型数据集（在我正在查看的测试用例中，大约有 200k 行），它需要 AGES（在调试器中大约 20 秒）来执行 result.Skip(offset).Take(pageSize).ToList (); 线。这是 pageSize = 100 和 offset = 0。

我的理解是，由于延迟执行，SELECT 直到需要时才会发生（在本例中为 .ToList()）。此时，它知道它需要哪些行，它应该只选择相关的 100 行。

'data' 有预期的 100 行，但似乎系统已经从数据库中获取了所有 200k 奇数行，然后在代码中完成了分页。

我对 LINQ/NHibernate 的理解不正确吗？如果是这样，我想我需要使用标准 API 执行类似的操作：[NHibernate Paging performance (Better option)](https://stackoverflow.com/questions/4137356/nhibernate-paging-performance-better-option)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:04:03.300

查看以下行：

```
IEnumerable<Tobj> result = session.Query<Tobj>().Where(whereClause); 
```

您正在使用一个`IEnumerable<Tobj>`字段，因此当您调用时`Skip`，您正在调用该[`Enumerable.Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)方法。我相信你想要的是[`Queryable.Skip`](http://msdn.microsoft.com/en-us/library/bb357513.aspx)方法。

请尝试以下代码行：

```
IQueryable<Tobj> result = session.Query<Tobj>().Where(whereClause); 
```

这将确保调用正确的扩展方法。

**解释**

该[`Enumerable.Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)方法将遍历源中的每个实体，`IEnumerable<Tobj>`然后才在 N 个元素之后返回结果。这将强制 NHibernate 将所有数据加载到内存中，因为 NHibernate 只知道需要数据。

该[`Queryable.Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)方法将改为建立一个表达式树，以便 NHibernate 稍后在访问数据时可以处理这个问题。此时 NHibernate 知道要跳过前 N 条记录。

不过请注意，我不确定 LINQ 提供程序当前是否支持`Skip`and`Take`方法。

# android - android TextView 的焦点监听器？

> ID：13820980
> 
> 赞同：1
> 
> 时间：2012-12-11T13:00:40.830
> 
> 标签：android, textview, setfocus

我创建了一个布局，`TextView`并为两个视图`EditText`设置了。`FocusListener`但我无法获得焦点`TextView`。我也尝试了硬编码`requestFocus`，但它也不起作用。

有人对此有任何想法吗？

# javascript - 从循环创建对象

> ID：13820981
> 
> 赞同：0
> 
> 时间：2012-12-11T13:00:45.137
> 
> 标签：javascript, jquery, json, jquery-plugins

从循环中添加对象时，我在以正确格式创建对象时遇到问题。

例如，我遍历一些列表

```
<ul class="pdmenu">
    <ul class="pdmenu">
    <li class="menu-top" id="vmen-1"><a href="#">1</a></li>
    <li class="menu-item"><a href="#">aaa</a></li>
</ul>

<ul class="pdmenu">
    <li class="menu-top" id="vmen-2"><a href="#">2</a></li>
    <li class="menu-item"><a href="#">aaa</a></li>
    <li class="menu-item"><a href="#">bbb</a></li>
</ul>

<ul class="pdmenu">
    <li class="menu-top" id="vmen-3"><a href="#">3</a></li>
    <li class="menu-item"><a href="#">aaa</a></li>
    <li class="menu-item"><a href="#">bbb</a></li>
</ul> 
```

我使用 jQuery 循环遍历顶部列表项，`.menu-top`并将 和 可见性推`id`送到对象。

```
jsonmenu = $();  // Set empty object.

$('.menu-top').each(function(index) {                   
    jsonmenu.push({ 
        menu: $(this).attr('id'), 
        visible: "" + $(this).next().is(':visible') + ""
    });
}); 
```

这会为每个项目创建具有成员的对象，如下所示

```
{
    "0": {
        "menu":"vmen-1",
        "visible":"false"
    },
    "length":4,
    "1": {
        "menu":"vmen-2",
        "visible":"false"
    },
    "2":{
        "menu":"vmen-3",
        "visible":"false"
    },
    "3": {
        "menu":"vmen-4",
        "visible":"true"
    }
} 
```

我只需要一个简单的格式，如下所示；

```
{
    "menu":"vmen-1",
    "visible":"false" 
},
{
    "menu":"vmen-2",
    "visible":"false"
},
{
    "menu":"vmen-3",
    "visible":"false"
},
{
    "menu":"vmen-4",
    "visible":"true"
} 
```

如何更改它以获取这种简单格式的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:03:34.607

使用本机数组而不是 JSON 对象来保存您的值：

```
var jsonmenu = [];

$('.menu-top').each(function(index) {                   
  jsonmenu.push({menu: $(this).attr('id'), visible: ""+$(this).next().is(':visible')});
}); 
```

或者，当你刚刚得到类似键值对的东西时，你可以这样做：

```
var jsonmenu = {};

$('.menu-top').each(function(index) {                   
  jsonmenu[ $(this).attr('id') ] = $(this).next().is(':visible');
}); 
```

这将导致这样的事情：

```
{ 
  'vmen-1': false, 
  'vmen-2': false,
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:48:43.613

您已经有了答案，使用原生数组而不是空的 jQuery 对象。但是，为了完整起见，jQuery 中还有另一种方便的方法来执行诸如“枚举一堆 DOM 元素并将它们转换为数组”之类的操作[`.map()`](http://api.jquery.com/jQuery.map/)

你会像这样使用它：

```
var jsonmenu = $('.menu-top').map(function(i,e) {                   
    var $this = $(e);
    return {
        id: $this.attr('id'),
        visible: "" + $this.next().is(':visible') + ""
    }
}); 
```

现场示例：http: [//jsfiddle.net/8szrG/](http://jsfiddle.net/8szrG/)

# bitbucket - 文件可以是私有的，但对于具有确切 URL 的任何人仍然可见？

> ID：13820984
> 
> 赞同：1
> 
> 时间：2012-12-11T13:00:58.943
> 
> 标签：bitbucket

我在 bitbucket 上有一个源文件，我不想搜索它，但如果有人输入确切的 URL，我确实希望它可以访问。YouTube 有这个视频，它很有用，因为我可以将私人视频的链接发送给一些不需要 YouTube 帐户来观看视频但我知道没有 URL 的人可以找到它的朋友。BitBucket 可以吗？我不希望我想向其发送 URL 的人必须设置一个 bitbucket 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:51:09.163

目前[Bitbucket](http://bitbucket.org)不提供您要求的功能。您可以将文件完全保密（只有允许的用户可以访问该文件）或完全公开（任何人都可以访问该文件）。

# javascript - JS 错误“未定义 hX_6”

> ID：13820985
> 
> 赞同：1
> 
> 时间：2012-12-11T13:00:59.333
> 
> 标签：javascript, jsf, ibm-rad, ibm-jsf

我正在使用 RAD 7.5.6、JSF 1.2 和 IBM JSF 客户端框架（`hx`taglib）。

我有一个搜索页面，在项目列表中，我可以编辑我选择的项目。当我单击该项目时，我被重定向到插入页面，其中包含我的所有项目数据。我的页面加载了所有数据，但我收到了一个 JS 错误，我跟踪到以下代码，并显示消息“hX_6 未定义”：

```
<script type="text/JavaScript" language="JavaScript">
    if (hX_6) hX_6.setResourceServer("/APHP0000_Web/.ibmjsfres");
    if (hX_6 && hX_6.setLocale) hX_6.setLocale("pt_BR");
</script> 
```

和

```
<script type="text/javascript" src="/APHP0000_Web/.ibmjsfres/hxclient_be_v3_1_4.js"> </script>
<script type="text/javascript">
    hX_6.onPageLoad();
</script> 
```

此错误会影响我的菜单以及页面的所有其他 JS 和提交。

# header - 骆驼setHeader新手错误

> ID：13820988
> 
> 赞同：0
> 
> 时间：2012-12-11T13:01:05.633
> 
> 标签：header, websocket, apache-camel

我只想知道这条路线我哪里错了。我正在尝试通过网络套接字路由返回消息，但我无法设置骆驼连接密钥：

```
from("jms:queue:subscriptionValidationError").log("Receiving error message: ${body} ${in.headers.websocket.connectionKey}")
    .setHeader(WebsocketConstants.CONNECTION_KEY, simple("${in.headers.websocket.connectionKey}"))
    .log("Sending error message: ${body} ${out.headers.websocket.connectionKey}")
    .to("websocket://0.0.0.0:9292/subscribeErrors?staticResources=classpath:webapp"); 
```

这给了我一个没有第二个日志操作的连接密钥的日志：

```
 Receiving error message: doit suivre "[-a-zA-Z0-9]+\@[-a-zA-Z0-9]+\.[a-zA-Z]+" 60f7cc44-9d9b-4bde-905a-d7d51be7661a 
 Sending error message: doit suivre "[-a-zA-Z0-9]+\@[-a-zA-Z0-9]+\.[a-zA-Z]+" 
```

你能告诉我我哪里错了吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:25:09.153

您的 log() 引用`out.header`...但 setHeader() 正在设置`in.header`

见[http://camel.apache.org/using-getin-or-getout-methods-on-exchange.html](http://camel.apache.org/using-getin-or-getout-methods-on-exchange.html)

# c# - 如何使 Ndepend 控制台自动更新 FrameworkAssemblies？

> ID：13820989
> 
> 赞同：1
> 
> 时间：2012-12-11T13:01:09.753
> 
> 标签：c#, ndepend

在 Ndepend 中加载程序集时，会自动找到并显示它的依赖项（在 xml 项目文件中称为 FrameworkAssemblies）。

但是在控制台模式下使用 Ndepend 时，FrameworkAssemblies 不会自动更新，它们只会被读取。

NDepend 是否已经提供了自动执行此操作的任何方法？还是我们应该自己写一个脚本？目标是避免维护依赖关系 3 次：在 csproj 中，在 Ndepend 项目文件中，在 maven pom 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:39:39.830

您可以通过 NDepend.API 即时创建您的 NDepend 项目，如此[NDepend.API 入门页面](http://www.ndepend.com/API/NDepend.API_gettingstarted.html)所示。在这种情况下，第三方程序集在 NDepend 项目创建时在当前机器上解析。

# linux - 如何在 debian 中安装 Hjelmslund USB485

> ID：13820991
> 
> 赞同：0
> 
> 时间：2012-12-11T13:01:21.183
> 
> 标签：linux, rs485

正如标题所说！

我可以使用“dmesg”从设备中读取信息，并在“lsusb”时看到它，但我如何附加/安装它，例如 dev/ttyUSB2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:53:18.330

一种方法是使用 FTDI 软件 FT Prog（用于对 FTxxx 设备的 EEPROM 进行编程的实用程序）更改 VID 和 PID。更改为 0403 和 6001，Linux 会将其识别为通用 FTDI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T22:07:34.860

如果您不想修改 ftdi 芯片设置，您可以将 VID / PID 添加到 ftdi 驱动程序识别的 id 列表中。要在运行时执行此操作（非永久性），请执行以下操作：

```
modprobe ftdi_sio
echo "1c40 0477" > /sys/bus/usb-serial/drivers/ftdi_sio/new_id 
```

# database - 数据库更改和 MyEclipse

> ID：13820998
> 
> 赞同：1
> 
> 时间：2012-12-11T13:01:36.493
> 
> 标签：database, myeclipse

在 My Eclipse 中工作时是否可以跟踪数据库中发生的更改（例如，在表格中添加一列）？