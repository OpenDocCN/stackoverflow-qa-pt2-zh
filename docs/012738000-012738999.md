# StackOverflow 问答 12738000-12738999

# php - Ajax + PHP 协作错误

> ID：12738000
> 
> 赞同：0
> 
> 时间：2012-10-05T00:41:12.017
> 
> 标签：php, jquery, mysql, ajax

注意：**更新**- 请阅读

请阅读，更新代码，更好：

另外，我加了一个ajax报错函数，并没有调用报错，第一次做，但是下一次就报错了，第三次和第四次，以此类推。

我有一些代码似乎不起作用，问题可能出在 Ajax 请求或 PHP 接收函数中，我不知道可能是什么问题。

这是重要的代码，请询问其他可能对您有帮助的代码。

**jQuery Ajax 请求**

```
 $(document).ready(function()

{

        $("#secretcoin").mouseover(function()

        {

        $.ajax(

        {

        type: "POST",

        url: "achievements.php",

        data: { Home_Coin_Locator: "Yes" },

        error: errorAlert

        });

        });

}); 
```

**接收方 PHP，它获取此信息并将其存储在数据库中：**

```
$achieve4 = $_POST["Home_Coin_Locator"];

$astrSQL = "SELECT * FROM Awards_Inv WHERE Username = '$username'"; 

$rs3 = mysql_query($astrSQL, $connection); 

if ($achieve4 == "Yes")

{

while($row3 = mysql_fetch_array($rs3)){ 

$soar4 = $row3["Home_Coin_Locator"]; 

if ($soar4 == "Yes") 

{ 

$soa4 = "Yes"; 

} 

else 

{ 

$soa4 = "No";  

$awardSTRsql = "UPDATE Awards_Inv SET 'Home_Coin_Locator' = 'Yes' WHERE Username = '$username'";

mysql_query($awardSTRsql, $connection) or die(mysql_error()); 

$updatestatsSTRsql = "UPDATE User_Info SET `Coins` = Coins + 120, `Skill Points` = Skill Points + 10, `Awards` = Awards + 1 WHERE Username = '$username'"; 

mysql_query($updatestatsSTRsql, $connection) or die(mysql_error()); 

}

}

}

else

{

} 
```

好的，所以我的代码可能很奇怪，但请尝试阅读它并查看问题所在。

我想任何其他建议也可以接受，感谢您的关注，希望您能找到一些东西！

我添加了一个错误回调函数，并将3个mysql查询合并为1个，但问题仍然存在。

最后，阅读此代码以获取有关 $connection 和 $username 变量的信息

```
$connection = mysql_connect("mysql1.000webhost.com", "username hidden", "password hidden") or die (mysql_error ());

mysql_select_db("a7347456_usersdb") or die(mysql_error()); 
```

session_start();

$username = $_SESSION["用户名"];

另一个事实：

据我所知，错误是信息没有更新到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:36:20.880

首先，确保您需要配置文件来识别 $connection 变量。如果您准确地描述问题所在，它会更容易。

# ember.js - 从 hasMany 关系中删除孩子

> ID：12738004
> 
> 赞同：8
> 
> 时间：2012-10-05T00:41:48.560
> 
> 标签：ember.js, ember-data

如何在不删除孩子的情况下从 hasMany 关系中删除孩子？

我尝试将孩子的 foreign_key 设置为 null。我也尝试过在父关系上使用 removeObject 。

这是一个例子。

```
App.Invoice = DS.Model.extend
  lines: DS.hasMany('App.Line')

App.Line = DS.Model.extend
  invoice: DS.belongsTo('App.Invoice')

App.InvoiceController = Ember.Controller.extend
  removeLine: (line) ->
    @get('content.lines').removeObject(line)
    line.set('invoice', null)
    @get('store').commit()

App.InvoiceEditView = Ember.View.extend
  templateName: 'invoice'

App.LineView = Ember.View.extend
  tagName: 'tr'
  templateName: 'line'

#invoice template
<table>
    {{#each content.tasks}}
      {{view App.LineView}}
    {{/each}}
</table>

#line template
<td><a {{action "removeLine" view.context}}>remove</a></td>
<td>{{description}}</td>
<td>{{price}}</td>
<td>{{price}}</td> 
```

我目前正在使用

```
jquery 1.8.2
ember.js v1.0.pre-4
ember-data v11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:02:47.140

在`remove()`函数中，它`commit()`是然后`remove()`再次调用。**这将导致“setProperty in state rootState.loaded.updated.inFlight”错误，因为在 Ajax 请求为inflight**时无法更改记录。

如果您的意图是实际删除**Line**，从而将其从**hasMany**关联中删除，那么我建议使用`remove()`如下函数：

```
remove: function(event) {
  var item = event.context;
  if (item.get('isDeleted')) return;
  item.deleteRecord();
  App.store.commit();
  return item;
} 
```

Note that once something has be marked for deletion by `deleteRecord()`, it will remain live in Ember with `isDeleted` == true until a `commit()` completes successfully. You may want to add a `classNames` binding to hide it with CSS once it's marked for deletion:

```
#line template
<tr {{bindAttr class="isDeleted"}}>
  <td><a {{action "removeLine" target="view"}}>remove</a></td>
  <td>{{description}}</td>
  <td>{{price}}</td>
  <td>{{price}}</td>
</tr> 
```

With CSS like:

```
.is-deleted { display: none; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:57:31.997

It seems that setting invoice to an empty string works.

```
 App.InvoiceController = Ember.Controller.extend
   removeLine: (line) ->
     @get('content.lines').removeObject(line)
     line.set('invoice', '')
     @get('store').commit() 
```

# php - Smarty PHP 与 AngularJS 发生冲突

> ID：12738012
> 
> 赞同：9
> 
> 时间：2012-10-05T00:42:40.663
> 
> 标签：php, javascript, smarty, angularjs, template-engine

当我在同一个模板中使用 AngularJS 时，如何阻止 Smarty 抛出错误。我有一个包含以下代码的 Smarty 页面模板：

```
 <li ng-repeat="i in items">
      <p class="item">{{i}}</p>
 </li> 
```

当我在浏览器中查看时，我得到一个空白页面。我的 apache error_log 中出现一个大错误，其中包含以下内容：

```
 PHP Fatal error: Uncaught exception 'SmartyCompilerException' with message 'Syntax Error in template ... <p>{{i}}</p>; unknown tag "i 
```

如果我将**{{i}}**换成{ **{4}}**或任何其他数字，它就可以正常工作。我也可以使用数学，{{8+2}} 将在页面中显示 10。那是 Smarty 在做 angularJS 的数学运算吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-06T16:24:34.440

更清洁的解决方案：您可以这样更改 AngularJS 的模板分隔符：

```
angular.module('app', [])
  .config(['$interpolateProvider', function ($interpolateProvider) {
    $interpolateProvider.startSymbol('[[');
    $interpolateProvider.endSymbol(']]');
  }]); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-05T01:10:01.417

试试这个：

```
<li ng-repeat="i in items">
    <p class="item">{literal}{{i}}{/literal}</p>
</li> 
```

引用Smarty网站...

> {literal} 标签允许按字面意思获取数据块。这通常用于 Javascript 或样式表块，其中 {花括号} 会干扰模板分隔符语法。{literal}{/literal} 标记中的任何内容都不会被解释，而是按原样显示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T22:08:47.340

您可以将 Angular 配置为使用 {{}} 以外的插值符号：[https ://stackoverflow.com/a/11108407/215945](https://stackoverflow.com/a/11108407/215945)

# ruby-on-rails - Ember.js 集成到 Rails 3.2.8

> ID：12738022
> 
> 赞同：0
> 
> 时间：2012-10-05T00:43:36.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ember.js

我是 ember.js 的新手。我正在尝试使用[ember-rails](https://github.com/emberjs/ember-rails) gem 将 ember.js 与 Rails 集成。但是当我启动服务器并打开浏览器控制台时，我收到以下错误：

```
Uncaught Error: assertion failed: Ember Views require jQuery 1.7 :3000/assets/ember.js?body=1:43
Uncaught TypeError: Cannot call method 'extend' of undefined :3000/assets/ember-data.js?body=1:141
Uncaught ReferenceError: Blog is not defined :3000/assets/store.js?body=1:1
Uncaught ReferenceError: Blog is not defined :3000/assets/controllers/application_controller.js?body=1:1
Uncaught ReferenceError: Blog is not defined :3000/assets/views/application_view.js?body=1:1
Uncaught TypeError: Cannot call method 'template' of undefined :3000/assets/templates/application.js?body=1:1
Uncaught ReferenceError: Blog is not defined :3000/assets/routes/app_router.js?body=1:1
Uncaught ReferenceError: Blog is not defined :3000/assets/blog.js?body=1:10
Uncaught TypeError: Cannot call method 'create' of undefined ember.js:10183
Uncaught ReferenceError: Blog is not defined 
```

如何解决？或者如何手动将 ember.js 集成到 rails。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:38:43.687

这是 ember-rails 的问题（https://github.com/emberjs/ember-rails/issues/88）

要强制 jquery 为 1.7，您可以使用 jquery-rails gem 的 1.0.19 版本。因此，将您的 Gemfile 更改为：

```
gem "jquery-rails", "1.0.19" 
```

你会被设置。

作为替代方案，您可以遵循 GH 问题中的建议，并且

```
var ENV = {'FORCE_JQUERY': true}; 
```

在加载 ember.js 以覆盖任何 jquery 版本的需求检查之前。（我没有测试过这个）。

# ruby - 通过 Ruby 系统调用通过 SSH 发送美元符号

> ID：12738025
> 
> 赞同：2
> 
> 时间：2012-10-05T00:44:08.760
> 
> 标签：ruby, ssh

我正在尝试对服务器进行 SSH 系统调用并回显一个字符串。该字符串由 ruby​​ 定义，其中包含美元符号。

```
#!/usr/bin/env ruby
string = '$$%%$#@%$#@%325dg345345'

puts %x(ssh server "echo \'#{string}\'") 
```

当我执行时，返回的输出不是字符串。远程服务器将美元符号解释为变量。我可以采取任何形式的巧妙逃避来防止这种情况发生吗？字符是随机的，因此仅编辑字符串以转义美元符号是行不通的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T01:14:21.187

您可以使用 stdlib 的[Shellwords](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/shellwords/rdoc/Shellwords.html)库来转义美元符号、空格和字符串可能包含的任何其他“危险”字符：

```
require 'shellwords'

string = '$$%%$#@%$#@%325dg345345'
escaped_string = Shellwords.escape(string)
# "\\$\\$\\%\\%\\$\\\#@\\%\\$\\\#@\\%325dg345345"

puts %x(ssh server "echo #{string}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T01:03:45.910

我不确定您是否反对转义`$`s，因为无论字符串是否随机，这都是完全可行的：

```
escaped_string = string.gsub('$', '\$')
puts %x(ssh server "echo \'#{escaped_string}\'") 
```

输出：

> $$%%$#@%$#@%325dg345345

# java - Java Swing - 如何在 ActionListener 中处理泛型

> ID：12738026
> 
> 赞同：7
> 
> 时间：2012-10-05T00:44:20.457
> 
> 标签：java, swing, generics, java-7

我有：

```
class CustomerActionListener implements ActionListener
{
  @Override
  public void actionPerformed(ActionEvent event)
  {
    JComboBox cb = (JComboBox)event.getSource();
    .. do something
  }
} 
```

这会在 jdk7 中导致以下编译器警告：

**JComboBox 是一种原始类型。应该参数化对泛型类型 JComboBox 的引用**

我试图将其参数化为：

```
JComboBox<String> cb = (JComboBox<String>)event.getSource(); 
```

但这仍然留下以下编译器警告：

**类型安全：从 Object 到 JComboBox 的未经检查的强制转换**

*因此我不确定如何消除编译器警告......*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T01:59:48.623

我很欣赏这种方法。它避免了任何类型转换并且易于阅读。

我改进了我的答案，现在它没有给你编译器警告。JComboBox 的类型现在设置为字符串。要获得选定的项目，您必须通过 ComboBoxModel。

```
class CustomerActionListener implements ActionListener
{
  private JComboBox<String> comboBox;
  public CustomerActionListener(JComboBox<String> comboBox){
    this.comboBox = comboBox;
  }
  @Override
  public void actionPerformed(ActionEvent event)
  {
    // Just use the comboBox
    ComboBoxModel<String> model = comboBox.getModel();
    int index = comboBox.getSelectedIndex();
    String choosen = model.getElementAt(index);
    System.out.println("Hey you choose "+choosen);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:11:26.073

唯一的出路是获取对您的类型的引用`JComboBox`：

要么这样

```
JComboBox<String> myStringCb = new JComboBox<String>();
...
myStringCb.addActionListener(new CustomerActionListener(myStringCb); 
```

和你一起`ActionListener`：

```
class CustomerActionListener implements ActionListener {

  private JComboBox<String> cb;

  public CustomerActionListener(JComboBox<String> cb) {
    this.cb = cb;
  }

  @Override
  public void actionPerformed(ActionEvent event) {
    if(event.getSource()==cb) {
       // Here you can do something with the typed cb
    }
  }
} 
```

`ActionListener`或者，另一种解决方案是使用带有引用的匿名`final`：

```
final JComboBox<String> myStringCb = new JComboBox<String>();
myStringCb.addActionListener(new ActionListener(){

    public void actionPerformed(ActionEvent e) {
        // Here you can refer directly to myStringCb
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:54:22.287

试着检查一下：

[一个非常有用的链接表单 StackOverflow](https://stackoverflow.com/questions/2592642/type-safety-unchecked-cast-from-object)

简而言之，Java 编译器不知道您要转换的对象是什么对象，因此它不喜欢一言不发地进行转换，它必须告诉您您可能犯了一个错误（但是您确实知道您要投射的对象是哪种类，所以不要介意）添加 @SuppressWarning("unchecked")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T19:17:56.553

**另一个解决方案**

您还可以使用[Java 通配符](https://en.wikipedia.org/wiki/Wildcard_(Java))模式：

```
class CustomerActionListener implements ActionListener
{
  @Override
  public void actionPerformed(ActionEvent event)
  {
    JComboBox<?> cb = (JComboBox<?>)event.getSource();
    .. do something
  }
} 
```

# python - 在python函数中创建一个新函数作为返回？

> ID：12738031
> 
> 赞同：31
> 
> 时间：2012-10-05T00:45:18.960
> 
> 标签：python

我想知道是否可以在 python 中执行以下操作：

```
def func1(a,b):
   return func2(c,d) 
```

我的意思是，假设我对 a,b 做了一些事情，这会导致一些可以定义新函数的系数，如果使用 a,b 的操作确实是可能的并且能够在 func1 之外访问它，我想创建这个函数.

一个例子是给定函数 f 的简单傅立叶级数 F(x)：

```
def fourier_series(f,N):
   ...... math here......
    return F(x) 
```

我的意思是我想创建和存储这个新函数以供以后使用，也许我想推导它，或者集成或绘图或任何我想做的事情，我不想发送点 x在fourier_series（或func1（..））中进行评估，我只是说fourier_series创建了一个接受变量x的新函数，这个函数可以稍后在外部调用，如y = F（3）......如果我让自己足够清楚?

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-05T00:53:17.487

您应该能够通过定义一个新的内联函数来做到这一点：

```
fourier_series(f, N):
    def F(x):
        ...
    return F 
```

您不仅限于传递给的参数`fourier_series`：

```
def f(a):
    def F(b):
        return b + 5
    return F

>>> fun = f(10)
>>> fun(3)
8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T00:52:48.007

你可以使用一个`lambda`（虽然我更喜欢其他解决方案，我认为:)）：

```
>>> def func2(c, d):
...   return c, d
...
>>> def func1(a, b):
...   c = a + 1
...   d = b + 2
...   return lambda: func2(c,d)
...
>>> result = func1(1, 2)
>>> print result
<function <lambda> at 0x7f3b80a3d848>
>>> print result()
(2, 4)
>>> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T00:56:05.730

虽然我不能给你一个具体的你打算做什么的答案。（看起来数学超出了我的范围。）

我可以告诉你，Python 确实支持[一流的函数](http://en.wikipedia.org/wiki/First-class_function)。

Python 可以从函数返回函数，将函数存储在列表等集合中，并且通常像对待任何变量一样对待它们。

在其他函数中定义函数和返回函数等很酷的事情都是可能的。

```
>>> def func():
...     def func2(x,y):
...         return x*y
...     return func2
>>> x = func()
>>> x(1,2)
2 
```

函数可以分配给变量并存储在列表中，它们可以用作其他函数的参数，并且与任何其他对象一样灵活。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T00:50:02.250

如果在外部函数内部定义一个函数，则可以在内部函数的定义中使用传递给外部函数的参数，并将该内部函数作为外部函数的结果返回。

```
def outer_function(*args, **kwargs):
    def some_function_based_on_args_and_kwargs(new_func_param, new_func_other_param):
        # do stuff here
        pass
    return some_function_based_on_args_and_kwargs 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T00:50:15.607

您可以在函数内部定义函数并返回这些函数（我认为这些在技术上是闭包）：

```
def make_f(a, b):
    def x(a, b):
      return a+b
     return x(a, b) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-13T13:56:44.813

我正在浏览一些文档并找到了这个。

这是一个片段，就像您的代码一样：

```
def constant(a,b):
    def pair(f):
        return(f(a,b))
    return pair
a = constant(1,2) #If You Print variable-> a then it will display "<function constant. 
                                                        #<locals>.pair at 0x02EC94B0>"
pair(lambda a, b: a) #This will return variable a. 
```

现在，constant() 函数同时接受 a 和 b，并返回一个名为“匿名函数”的函数，该函数本身接受 f，并用 a 和 b 调用 f。

这称为“[闭包](https://en.wikipedia.org/wiki/Closure_(computer_programming))”。闭包基本上是一个函数的实例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T00:53:18.807

我想你想做的是：

```
def fourier_series(f,N):
    #...... math here......
    def F(x):
        #... more math here ...
        import math #blahblah, pseudo code
        return math.pi #whatever you want to return from F
    if f+N == 2: #pseudo, replace with condition where f,N turn out to be useful
        return F
    else:
        return None 
```

在外面，你可以这样称呼：

```
F = fourier_series(a,b)
if F:
    ans = F(x)
else:
    print 'Fourier is not possible :(' 
```

从 Python 的角度来看，重要的是：

1.  是的，您可以在函数内部编写函数
2.  是的，您可以从函数返回一个函数。只需确保使用`return F`（返回函数对象）返回它，而不是`return F(x)`调用函数并返回值

# css - 水平 CSS UL 菜单

> ID：12738033
> 
> 赞同：1
> 
> 时间：2012-10-05T00:45:23.283
> 
> 标签：css

出于某种原因，我的 CSS 样式的 UL 菜单不会水平居中。创建它的 CSS 是：

```
#navigation {
    width:79em;
    height: 2em;
    position: relative;
    padding: .5em;
    font-family: Verdana, Geneva, sans-serif;
    text-transform: uppercase;
    font-size: 1em;
    background-color: #F5F5F5;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 0 1em 0 #333;
    -moz-box-shadow: 0 0 1em 0 #333;
    box-shadow: 0 .25em .3em -.055em #333;
}

#navigation ul {
    text-align: center;
    padding: 0;
    margin: 0;
    list-style: none;
}

#navigation li {
    display: inline;
    list-style: none;
    display: block;
    float: left;
    width: 10em;
    height: 2em;
    text-align: center;
    padding: .5em 0 0 0;
    margin: 0;
    border-left: .0625em solid #FFF;
    border-right: .1em solid #CCC;
    text-shadow: .0625em .0625em .0625em #ffffff;
    filter: dropshadow(color=#ffffff, offx=1, offy=1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:50:02.163

添加

```
#navigation {
...
margin : 0 auto;
} 
```

# c# - 来自 Web 服务表单调用的十六进制转换错误

> ID：12738035
> 
> 赞同：0
> 
> 时间：2012-10-05T00:45:32.100
> 
> 标签：c#, asp.net, service, web, hex

我收到一个错误，看起来是由于在 uint 字段中使用十六进制输入的错误。它发生在我正在处理的 Web 服务的两个版本上。

```
System.ArgumentException: Cannot convert 0x2 to System.UInt32.
Parameter name: type ---> System.FormatException: Input string was not in a correct format. 
```

但是，我的同事说，当他使用 C++ 调用它时，它适用于我拥有的 Web 服务的早期版本，但它不适用于我正在处理的当前版本。

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:51:50.447

你在你的代码中使用这样的东西吗？如果没有，请尝试执行此操作（将“CF01”替换为您的输入值）：

```
int i = Convert.ToInt32("CF01", 16); 
```

编辑：

对于带有 0x 前缀的特殊情况：

```
public int32 GetInt32FromHex(string h) {
    h = h.substring(2, (h.length - 2));
    return convert.ToInt32(h, 16);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:03:02.123

这是一个非常有趣的错误，因为 Parse 方法似乎`UInt32`只能`[ws][sign]digits[ws]`根据[文档](http://msdn.microsoft.com/en-us/library/b23e5abt.aspx)解析表单的数字。该方法的一个版本可以使用`NumberStyles`标志，请参阅[文档](http://msdn.microsoft.com/en-us/library/41810tes.aspx)。其中一个值是`AllowHexSpecifier`您认为允许 0x 的值。但是，如果您阅读 Parse 方法和[NumberStyles](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx)的文档，则根本无法处理 0x 格式。如果你看它说：

> 如果 s 是十六进制数的字符串表示形式，则它前面不能有任何将其区分为十六进制数的修饰符（例如 0x 或 &h）。这会导致转换失败。

AllowHexSpecifier 使得只有表格的数字`[ws]hexdigits[ws]`

似乎您必须在解析之前摆脱前导 0x 或使用另一种解析方法。

一种方法是执行以下操作，尤其是在有前导 0x 的情况下：

```
var value = UInt32.Parse( "0x2".TrimStart('0').TrimStart('x')); 
```

您必须在这里小心检查以确保您具有正确的基础，并且您可能需要使用`NumberStyles.AllowHexSpecifier`正确解析。

# mysql - MySQL 快速搜索 varchar 列中的匹配项

> ID：12738039
> 
> 赞同：0
> 
> 时间：2012-10-05T00:46:13.247
> 
> 标签：mysql, sql

我对 sql 比较陌生，所以我可能在做一些愚蠢的事情。

无论如何，我有一个带有 VARCHAR(255) 单词列的 Dictionary 表。我已将字典文本文件加载到此表中。检查某些 VARCHAR(255) 是否在字典中的最有效方法是什么？目前我正在这样做：

```
CREATE TABLE Dictionary
(
word CHAR(255) NOT NULL UNIQUE
);

LOAD DATA LOCAL INFILE 'E:/dictionary.txt'
INTO TABLE Dictionary
LINES TERMINATED BY '\n'
(word); 
```

在一个程序中，我正在做

```
DECLARE currentWord VARCHAR(255);
...
IF EXISTS(SELECT word FROM Dictionary WHERE word=currentWord) THEN
... 
```

这需要相当长的时间。我应该做些什么来加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:56:41.040

如 Satya 所述，在 word 字段上添加一个键。这是语法：

```
ALTER TABLE Dictionary ADD KEY `word` (`word`); 
```

# html - html 强制 div 为父级高度的 100% 并将图像放在其中间

> ID：12738043
> 
> 赞同：0
> 
> 时间：2012-10-05T00:46:35.593
> 
> 标签：html, css

我已经搜索和搜索并尝试了不同的技术，但没有任何效果。

我有 3 列，在左右列中，我有一个需要垂直对齐到中心以及水平对齐到中心的图像。但是，我的中间内容 div 有点延伸。所以我希望我的 2 列与高度相匹配。这 3 列包裹在另一个 div 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:17:42.170

in your case it's better to use table instead of div because any change in some cell inside certain row will effect the other cells.. try this code it may do the job

```
<div style="border:1px black solid; width:850px; margin:auto">
  <table style="border:1px red solid; width:100%; height:500px; text-align:center" cellspacing="0">
    <tr>
      <td style="border:1px lime solid">1</td>
      <td style="border:1px lime solid">2</td>
      <td style="border:1px lime solid">3</td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:08:59.700

Add this to your css:

```
margin: auto;
padding: auto 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:54:23.193

我不确定你所说的“100% 的高度”是什么意思，这无关紧要，但我只会使用 css“margin”属性，并根据父级为其分配百分比（不是像素）尺寸。它可能不是您要找的东西，但它以前在网站上保存了我的屁股，这可能是最简单的方法。

# java - Java 向 JPanel 添加虚线或虚线边框

> ID：12738045
> 
> 赞同：6
> 
> 时间：2012-10-05T00:46:39.163
> 
> 标签：java, jpanel, border, dotted-line

我在这件事上遇到了问题：我可以以某种方式向 JPanel 添加虚线（或虚线，无论如何）边框吗？

我搜索了一些问题，但似乎以前没有人问过这个问题。

我想知道是否有任何课程可以使用。实际上我正在使用：

```
myPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK)); 
```

显然这是一个标准类，只给出很少的标准边框，对我没有用处。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T12:12:26.370

从 Java 7 开始，您可以使用`BorderFactory.createDashedBorder(Paint)`.

在 Java 7 之前，您必须自己定义此边界。然后就可以使用这个自写的边框了：

```
private class DashedBorder extends AbstractBorder {
    @Override
    public void paintBorder(Component comp, Graphics g, int x, int y, int w, int h) {
        Graphics2D gg = (Graphics2D) g;
        gg.setColor(Color.GRAY);
        gg.setStroke(new BasicStroke(1, BasicStroke.CAP_BUTT, BasicStroke.JOIN_BEVEL, 0, new float[]{1}, 0));
        gg.drawRect(x, y, w - 1, h - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T01:35:58.613

你正在寻找[`BorderFactory.createDashedBorder(Paint)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/BorderFactory.html#createDashedBorder%28java.awt.Paint%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T18:10:06.717

使用 Java 6，我遇到了从[Timmos](https://stackoverflow.com/a/15270947/2544255)解决方案（上图）中获取自定义 AbstractBorder 的问题。绘图会显示奇怪的伪影，例如只有几个像素会零星地绘制。需要定义插入，可以通过添加以下方法来完成：

```
public Insets getBorderInsets(Component c)
{
    return new Insets(thickness, thickness, thickness, thickness);
}

public Insets getBorderInsets(Component c, Insets insets)
    insets.left = insets.right = insets.top = insets.bottom = thickness;
    return insets;
} 
```

厚度是您想要的边框。例如 1

# regex - 使用多个可能的分隔符从正则表达式中删除冗余

> ID：12738049
> 
> 赞同：3
> 
> 时间：2012-10-05T00:47:13.147
> 
> 标签：regex, pcre

我有一个正则表达式，其中相同的匹配条件可以应用于多个分隔符。 `[]`, `()`, 和`<>`都是有效的。例如，它看起来像这样：

`\[.\]|\(.\)|<.>`

有没有办法从上面的正则表达式中删除冗余？分隔符内的匹配标准始终相同，但分隔符本身可能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:39:55.863

如果您确实在使用[PCRE 库](http://www.pcre.org/pcre.txt)（例如通过 PHP），您可以使用 DEFINE 组来创建子例程，如下所示：

```
'~(?(DEFINE)(?<content>\w+))(?:<(?&content)>|\[(?&content)\]|\((?&content)\))~' 
```

...或者更具可读性：

```
(?(DEFINE)(?<content>\w+))
(?:
  <(?&content)>
  |
  \[(?&content)\]
  |
  \((?&content)\)
) 
```

这是一个PHP**[演示](http://ideone.com/F2zYM)**。它也应该在 Perl 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:57:43.473

我猜你问是因为

```
[[(<].[])>] 
```

不够准确，原因很明显。

回答“不，没有办法”总是很危险的，因为很难确定一个人已经检查了所有可能的方法。在这种情况下，人们必须经常拿出一个可靠的证据来回答。

我不确定这是一个足够强大的证明，甚至根本不是一个“证明”，但考虑一下这个（伪）信息论观点：

1.  PCRE 引擎本身不知道字符对、 、 和 之间的`[]`任何`()`关系`<>`。因此，表达式本身必须包含该信息，*即**至少*需要六个字符`[]()<>`。

2.  不仅如此，出于同样的原因，表达式本身必须定义*至少*两个*配对*（隐含第三个）。我不确定如何证明两个交替运算符 ( `|`) 是你能做的最好的，但我的意思是，即使有*更*紧凑的方法，你*最多*只能保存一个字符，因为至少有一个需要说，“配对存在！”

3.  元字符的转义只能通过`[]()`可以出现在字符类中而不被转义的事实来压缩，但首先，这并不是真正的“消除冗余”，而是“语法中的幸运情况”，其次，您仍然需要为所述字符类的定义添加两个字符：`[]`.

4.  因此，我相信即使从理论的角度来看，如果我对正则表达式引擎*无法知道*的假设是正确的，那么一个人最多可以从您已经提供的正则表达式中保存*三个*字符：`\[.\]|\(.\)|<.>`.

我热切期待正则表达式大师的纠正！

# django - django 设计模式/最佳实践：过滤查询集

> ID：12738052
> 
> 赞同：2
> 
> 时间：2012-10-05T00:47:33.420
> 
> 标签：django, django-models, django-templates, django-queryset

我有一个页面，我在其中向用户显示查询集的结果。我想做的是允许用户单击链接以应用过滤器。

目前我所做的是让链接将“get”参数传递给页面以应用过滤器。过滤器可以引用其他模型或自定义过滤器（例如未分配的过滤器）

为了提供体面的用户体验，实现需要做一些事情

*   在视图中：
    1.  检查传递的过滤器参数是否有效
    2.  检查它是什么类型的过滤器（基于其他模型或自定义过滤器），以便将正确的条件应用于查询集
    3.  （可选）一种使过滤器累积的方法（即您可以继续添加过滤器）
*   在模板中：
    1.  根据选择的过滤器显示正确的结果集
    2.  显示过滤器时，识别我们应用了哪个过滤器，以便当前应用的过滤器显示为文本而不是超链接。

我认为这必须足够普遍，以至于除了视图和模板中明显的 if/else 语句之外，有人必须为此找到设计模式或最佳实践。

在那儿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:29:02.133

我发现 Django 管理员处理这种功能的方式是一个很好的模式。如果您不熟悉，请查看`list_filter`管理员中的选项。它与您所描述的相似，但您的更通用。也许这会帮助你思考一些想法？

*   首先，对于实际的查询字符串块，您只需传递 Django-ORM 查找键和值对。例如，`?sites__id__exact=1`,`tags__in=words`等。由于您希望允许跨模型查找，因此您需要在字符串中提供其他部分以包含模型名称，而不是太难。

*   要检查过滤器是否有效，您可以简单地确保模型/字段查找有效。通过拆分每个 QS 块的部分，您可以识别模型、字段名、查找和值。然后，使用 Django 的内置功能来验证模型上是否存在字段名。您也可以使用 ForeignKey 来做到这一点。[这是 Django 的做法](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L228)

*   你可以很容易地继续添加过滤器。您将提供您的视图和显示这些过滤器的表单以及一些上下文，因此它将为用户保留并重新填充。此外，您可以轻松地保留查询字符串。基本上，您在这里始终拥有相同的读取/解析功能，没有什么不同。

我认为关键是自动化并尽可能保持干燥。不要屈服于一堆 if 语句。将这些查找传递到 ORM 中非常容易，也很安全，而且很容易捕获错误查找并为用户提供有意义的错误消息。

我希望这对你的道路有帮助！:)

# ruby-on-rails - 如何在 Rails 表单中定义嵌套关联？

> ID：12738053
> 
> 赞同：0
> 
> 时间：2012-10-05T00:47:37.563
> 
> 标签：ruby-on-rails, forms, activerecord, scope

我有以下使用 Formtastic 的代码。

```
- if can? :update, @workout
  = semantic_form_for ew.exercise, :url => user_exercise_path(@user, ew.exercise) do |exercise|
    %table
      %thead
        %tr
          %th.reps Reps
          %th.weight Weight
      %tbody
        = exercise.semantic_fields_for :log_entries do |log_entry|
          = render 'log_entry_fields', :f => log_entry
    .links
      = link_to_add_association 'Add Set', exercise, :log_entries
    = exercise.actions do
      = exercise.action :submit 
```

鉴于此，我的问题是 log_entries 为与练习相关的每个日志条目呈现 log_entries。

例如，如果 Bob 正在为 benchpress 记录日志条目，而 Hope 正在为 benchpress 记录日志条目，那么使用这种形式，这两个 log_entries 都将呈现。我想要它做的只是针对当前用户的 log_entries 进行该练习。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:57:49.873

我通过以下修改解决了它：

```
= exercise.semantic_fields_for :log_entries, exercise.object.log_entries.for_user(@user) do |log_entry| 
```

逗号后的所有内容都是新的。我`log_entry.rb`用以下方法在我的身上创建了一个类方法：

```
def self.for_user(user)
  where(:user_id => user.id)
end 
```

# python - 如何在python中一致地从串行打印数据

> ID：12738055
> 
> 赞同：2
> 
> 时间：2012-10-05T00:47:39.303
> 
> 标签：python, macos, arduino

我正在尝试打印来自 Arduino 的串行数据，但我无法这样做。我尝试的代码是这样的：

```
import serial
import time
s = serial.Serial('/dev/tty.usbmodemfd141',9600)

while 1:
   if s.inWaiting():
      val = s.readline(s.inWaiting())
      print val 
```

然而，在吐出大约 30 行左右之后，我收到以下错误消息：

```
Traceback (most recent call last):
  File "py_test.py", line 7, in <module>
    val = s.readline(s.inWaiting())
  File "build/bdist.macosx-10.8-intel/egg/serial/serialposix.py", line 460, in read
serial.serialutil.SerialException: device reports readiness to read but returned no data (device disconnected?) 
```

我想我正在错误地使用 inWaiting，但我不知道如何以任何其他方式使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:03:40.233

您是否尝试将 readline 包装在 try/except SerialException 块中？然后，您可以只传递 SerialException。当没有任何数据时，串行驱动程序在接收缓冲区中报告数据可能是一个问题，在这种情况下，您的代码将继续运行。不是一个很好的解决方案，但它可能会引导您找到正确的解决方案。

```
try:
    s.read(s.inWaiting())
except serial.serialutil.SerialException:
    pass # or maybe print s.inWaiting() to identify out how many chars the driver thinks there is 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:29:30.113

我相信你想使用函数 read()，而不是 readline()。您正在检索缓冲区中的字符数，它们不一定以换行符结尾

你的循环变成：

```
while 1:
   if s.inWaiting():
      val = s.read(s.inWaiting())
      print val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T04:22:08.270

如果您只想打印来自串行连接设备的数据。您只需使用**readline()**即可。首先使用**open()**打开端口，然后您需要使用**readline()**。

注意：**/dev/ttyUSB0 是 linux 的端口号，com0 是 windows**

这是代码

```
import serial 

BAUDRATE = 115200
device_name = "ttyUSB0"
tty = device_name
s = serial.Serial("/dev/" + tty, baudrate=BAUDRATE)

s.open()
print s

try:
    while True:
        line = s.readline()   //after this you can give the sleep time also as time.sleep(1) before that import time module.
        print line
finally:
    s.close() 
```

# javascript - 使用 Web Audio API 创建 10 段均衡器

> ID：12738056
> 
> 赞同：17
> 
> 时间：2012-10-05T00:48:15.530
> 
> 标签：javascript, html5-audio, equalizer, web-audio-api

我正在尝试使用 Web Audio API 重新创建类似
Winamp 的 10 波段均衡器的东西。

[![Winamp 的 10 段均衡器](../Images/1e68a1f586e37c4e3cce397d9e024165.png)](https://i.stack.imgur.com/TRKVD.png)
[（来源：[head-fi.org](https://cdn.head-fi.org/3/3d/1000x500px-LL-3da00ebd_winamp-eq.png)）]

据我所知，我必须创建 10 个[双二阶滤波器](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#BiquadFilterNode-section)，将它们设置`type`为[2（对于带通滤波器）](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#BANDPASS)并将它们分别设置`frequency`为`[60, 170, 310, 600, 1000, 3000, 6000, 12000, 14000, 16000]`。一旦我这样做了（这就是我有点困惑的地方），我将为每个频率“波段”创建一个单独的[增益节点并将其值绑定到一个滑块。](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioGainNode-section)

```
<input id="someFreqBand" type="range" min="-12" max="12" step="0.1" value="0" onchange="slide()"/> 
```

假设所有这些都是正确的，那么剩下的唯一步骤是将所有 10 个增益节点连接到音频上下文`destination`（我想这将占用所有 10 个频率“波段”并将它们混合/同步在一起）。这是创建 Web 音频 10 频段均衡器的正确方法吗？

我感到困惑的主要事情是我如何将源“连接”到 10 个频带滤波器（+ 相关的增益节点），因为所有节点只有一个输入或输出（包括目标）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T06:36:22.983

通过将每个过滤器与目标连接，您将创建 5 条路径（路线），因此您将听到源声音的五倍放大。这不是正确的方法。您必须将每个过滤器连接成一行。

```
source.connect(filter1);
filter1.connect(filter2);
filter2.connect(filter3);
filter3.connect(filter4);
filter4.connect(filter5);
filter5.connect(context.destination); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T12:29:03.350

正如 Matt D 所说，将过滤器连接到同一目的地应该没有问题。

但是，我会说您可能想要使用类型为 5（峰值）的滤波器，它允许所有频率通过，并且仅在您设置相应 filter.frequency.value 的频率处放大/降低。这使您可以串联过滤器，因此您不需要 10 个单独的音频路径。您还可以考虑将低架滤波器用作第一个滤波器，将高架滤波器用作第十个滤波器，这在均衡器中很常见。不过，我不记得这是否是 winamp 所做的。

最后，如果您串联使用峰值滤波器，则不需要为每个频率单独设置增益节点，只需为特定滤波器设置 filter.gain.value。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T19:47:44.367

> 我感到困惑的主要事情是我如何将源“连接”到 10 个频带滤波器（+ 相关的增益节点），因为所有节点只有一个输入或输出（包括目标）。

确实如此，但不要将其视为只能连接到另一个物理输入的物理输出。Web Audio 节点的单个输出可以连接多个节点，一个节点也可以接收多个输入。例如，假设您想通过 5 个并行过滤器链接输入节点，然后将它们重新连接在一起。你可以这样做：

```
source.connect(filter1);
source.connect(filter2);
source.connect(filter3);
source.connect(filter4);
source.connect(filter5);

filter1.connect(context.destination);
filter2.connect(context.destination);
filter3.connect(context.destination);
filter4.connect(context.destination);
filter5.connect(context.destination); 
```

这里的关键见解是多次调用 .connect 不会将输出切换到不同的节点，而只会*添加额外的输出连接*。换句话说，它是一个“扇出/扇入”系统。

# cocoa - App Purchases Mac Store 中的收据验证问题“应提供收据验证...”

> ID：12738061
> 
> 赞同：2
> 
> 时间：2012-10-05T00:48:56.827
> 
> 标签：cocoa, in-app-purchase, storekit

我的应用程序使用 Store Kit API 在应用程序购买中进行购买。我收到以下商店拒绝问题，有人遇到过吗？

> 2.3 与开发者宣传不符的应用将被拒绝
> 
> 该应用程序未正确使用 Store Kit API。应用程序需要使用收据验证，以便 Store Kit 正确处理应用内购买。

我进一步询问，他们说：

> 应在启动应用程序时提供收据验证。

有人知道问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:57:28.773

请参阅以下内容：

[Mac App Store 收据验证码？](https://stackoverflow.com/questions/4261348/mac-app-store-receipt-validation-code)

这个应用程序也很有帮助，但对 IMO 来说太贵了：

[http://receigen.etiemble.com/](http://receigen.etiemble.com/)

# python - 如何理解 IMAP 服务器返回的 BODYSTRUCTURE 信息？

> ID：12738068
> 
> 赞同：4
> 
> 时间：2012-10-05T00:49:52.657
> 
> 标签：python, email, imap

我正在使用 python`IMAPClient`从 IMAP 服务器检索电子邮件。我检索到的属性之一是`BODYSTRUCTURE`. 但是，我找不到任何关于如何解释返回值的文档。这是 IMAP 服务器返回的正文结构

```
16:12.679978 <  FLAGS (NotJunk $NotJunk \Seen) BODYSTRUCTURE ((("TEXT" "PLAIN" ("CHARSET" "us-ascii") NIL NIL "QUOTED-PRINTABLE" 4888 170 NIL NIL NIL)("TEXT" "HTML" ("CHARSET" "us-ascii") NIL NIL "QUOTED-PRINTABLE" 32407 479 NIL NIL NIL) "ALTERNATIVE" ("BOUNDARY" "Apple-Mail=_3AAA7CD7-3B07-406A-83CB-2C7762C3306E") NIL NIL)("APPLICATION" "PKCS7-SIGNATURE" ("NAME" "smime.p7s") NIL NIL "BASE64" 2414 NIL ("ATTACHMENT" ("FILENAME" "smime.p7s")) NIL) "SIGNED" ("BOUNDARY" "Apple-Mail=_DF4FE6BB-F796-46D7-A593-9723F4315DD2" "MICALG" "sha1" "PROTOCOL" "application/pkcs7-signature") NIL NIL)) 
```

这是解析为 python 类型的相同主体结构。

```
"BODYSTRUCTURE": [
    [
        [
            [
                "TEXT",
                "PLAIN",
                [
                    "CHARSET",
                    "us-ascii"
                ],
                null,
                null,
                "QUOTED-PRINTABLE",
                4888,
                170,
                null,
                null,
                null
            ],
            [
                "TEXT",
                "HTML",
                [
                    "CHARSET",
                    "us-ascii"
                ],
                null,
                null,
                "QUOTED-PRINTABLE",
                32407,
                479,
                null,
                null,
                null
            ],
            "ALTERNATIVE",
            [
                "BOUNDARY",
                "Apple-Mail=_3AAA7CD7-3B07-406A-83CB-2C7762C3306E"
            ],
            null,
            null
        ],
        [
            "APPLICATION",
            "PKCS7-SIGNATURE",
            [
                "NAME",
                "smime.p7s"
            ],
            null,
            null,
            "BASE64",
            2414,
            null,
            [
                "ATTACHMENT",
                [
                    "FILENAME",
                    "smime.p7s"
                ]
            ],
            null
        ]
    ],
    "SIGNED",
    [
        "BOUNDARY",
        "Apple-Mail=_DF4FE6BB-F796-46D7-A593-9723F4315DD2",
        "MICALG",
        "sha1",
        "PROTOCOL",
        "application/pkcs7-signature"
    ],
    null,
    null
], 
```

数组似乎不是恒定长度。数组的每个元素代表什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T03:36:36.853

您应该阅读[RFC 3501](https://www.rfc-editor.org/rfc/rfc3501)。根据正文段的类型（文本与其他），字段的长度可能会发生变化。

具体阅读第 73 和 74 页。

# c++ - 关于在循环中使用 ifstream 的错误

> ID：12738071
> 
> 赞同：2
> 
> 时间：2012-10-05T00:50:08.857
> 
> 标签：c++, fstream

我有一个非常简单的代码，它的功能是输入程序将从中读取数据的文件的名称。由于输入错误可能导致文件不正确，如果以前的名称无效，控制台将继续要求用户输入名称。

问题是，虽然第一个 do-while 循环工作正常，但如果在第一个循环中第一次没有正确输入文件名，程序将跳过第二个 while 循环。但是，如果正确输入了文件名，则一切正常。

我想知道为什么程序会这样。

感谢您的帮助和时间！

```
#include<iostream>
#include<fstream>

using namespace std;

int main() {
    string context;
    int step=0,i=0;
    ifstream fin;

    do {
        string filename;
        cout << endl << "please type in the name of input file" << endl;
        cin >> filename;
        string filepath = "files/" + filename;
        cout << filepath << endl;
        fin.open( filepath.c_str() );
    } while( !fin.is_open() );

    while (getline(fin, context)){
        cout << context << endl;
        cout << "hello" << endl;
    }
    fin.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:58:08.147

我认为“鳍”的状态在第一次尝试后可能会受到污染。为什么不尝试在调用 fin.open() 之前调用 fin.clear()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:59:59.017

您需要清除您的 ifstream，它可能已被先前的文件尝试损坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:07:57.750

从标准来看，

> 27.8.1.10
> `void open(const char* s, ios_base::openmode mode = ios_base::out);`
> 通话`rdbuf()->open(s,mode|out)`。如果该函数返回空指针，则调用 setstate(failbit)。^(311a)

那么这个注释 311a 是什么？

> ^(311a)成功打开不会改变错误状态。

虽然注释不是规范性的，但规范性文本绝对没有说明如果成功打开，成功打开对错误状态有何`rdbuf->open()`影响。该说明澄清了这一非陈述。

底线：当您在失败后重新`clear`调用时，您需要在调用之前获取文件流的状态位。`open``open`

# ruby-on-rails - Rails 3.2表单验证排除一个确切的字符串

> ID：12738073
> 
> 赞同：0
> 
> 时间：2012-10-05T00:50:23.190
> 
> 标签：ruby-on-rails, validation

，我需要验证一个表单字段，所以它不能是一个特定的字符串。例如，如果有人在文本字段中输入“hello”并提交表单，我如何抛出一个错误，说明不允许使用特定的字符串？有没有办法避免在客户端使用 javascript 执行此操作，以便我可以保持一致的感觉？

```
validates_presence of :field_name, #condition here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:05:12.803

您需要通过自定义验证

```
INVALID_STRING = %W(string1, string2, string3, ... )
def valid_field_name    // valid_name
  if INVALID_STRING.include?(self.field_name)
    errors[:base] << "field_name you enter that not valid." unless self.field_name.blank?
  end
end 
```

调用这个方法

```
 validate:valid_field_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:24:47.497

rails 中的自定义验证非常简单，如果属性“name”不包含在字符串数组中，则在此示例中引发错误。

```
WHITELIST = %w(string1 string2 otherstring)

validate :name_is_ok

def name_is_ok
  unless WHITELIST.include? name 
    errors[:name] << "is not valid" 
  end
end 
```

# entity-framework - 多个 EF 问题。我究竟做错了什么？

> ID：12738080
> 
> 赞同：1
> 
> 时间：2012-10-05T00:51:38.210
> 
> 标签：entity-framework, odp.net, odac

全部，

我在类库项目的 app.config 文件中有以下连接字符串：

```
<connectionStrings>
   <add 
      name="MyConnection"
      connectionString="
         metadata=res://*/Namespace.Model1.csdl|res://*/Namespace.Model1.ssdl|res://*/Namespace.Model1.msl;
         provider=Oracle.DataAccess.Client;
         provider connection string='data source=&quot;
         (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = myhost.mydomain.com)(PORT = 1521)))(CONNECT_DATA =(SERVICE_NAME = myservice.mydomain.com)(SERVICE = DEDICATED)))
         &quot;;
         password=MyPasswd;
         persist security info=True;
         user id=MyID'" 
      providerName="System.Data.EntityClient" />
</connectionStrings> 
```

如您所见，我正在使用 ODAC 连接到 Oracle 服务器。一切似乎都很好，我可以从我的数据库中更新我的模型（EntityFramework）。

但是，在运行以下代码时：

```
public class MyClass //classy, isn't it
{
    public MyClass()
    {
        MyCollectionEF = new MyCollection();
    }
    private MyCollection _MyCollectionEF;

    public MyCollection MyCollectionEF
    {
        get
        {
            return _MyCollectionEF;
        }
        set
        {
            _MyCollectionEF = value;
            _Region = (ICollection<RegionEnt>)_MyCollectionEF.RegionEnt.OrderBy(a => a.REGION);
            _LangSource = (ICollection<LangEnt>)_MyCollectionEF.LangEnt.OrderBy(a => a.LANGUAGE);
        }
    }
} 
```

我最终得到一个“UnintentionalCodeFirst”异常。好的，很明显，此时我可能做错了，但我坚持并从 OnModelCreating 初始化程序中删除了 throw 异常（可能是个坏主意，但我还是新手）。

接下来，我最终得到一个 ModelValidationException ，说明我的所有实体都没有任何键（尽管当我查看模型时，我可以清楚地看到所涉及的键）。

最后，经过一番挖掘，我发现在初始化我的 _MyCollectionEF 变量后，连接字符串神奇地更改为“Data Source=.\SQLEXPRESS;Initial Catalog=MyConnection;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFrameworkMUE”

好的，现在要问问题（不幸的是，我有很多问题）。

1) 为什么我会收到 UnintentionalCodeFirst 异常。有没有更好的方法将我需要的数据加载到 iCollections 对象（或其他适合使用 MVVM 模式进行数据绑定、添加和删除数据的对象）中。

2) 为什么在我的模型中明显有键时会引发 ModelValidationException，以及解决此问题的最佳方法是什么（记住我计划使用 MVVM）。

3) 为什么我的 ConnectionString 会神奇地改变？这是 ODAC 在幕后做的事情，还是有更好的理由。我应该指出，在执行 _MyCollectionEF.DataBase.Connection.Open() 时，我收到一条错误消息，指出用户“mywindowslogon”的连接被拒绝，这是有道理的，因为后端的实际服务器没有设置为集成安全。

提前感谢您的所有帮助。

编辑：我还应该指出，由于某些业务需求，其中一部分是多：多关系（即在这个简单的示例中，一个区域可以有多种语言，一种语言可以有多个区域）。

编辑：也在 social.msdn.microsoft.com 上询问

# android - Android区分App-In-Background和Rotation Event

> ID：12738082
> 
> 赞同：3
> 
> 时间：2012-10-05T00:51:47.993
> 
> 标签：android, android-service, audio-recording, android-lifecycle

我的基本问题是弄清楚如何确定我的应用程序何时被置于后台与进行轮换。

我有一个用于音乐识别的录音服务。我想智能地管理此服务的生命周期以完成以下任务：

1.  在最终成为设备轮换的生命周期事件期间保持服务运行。
2.  当应用程序进入后台时停止服务（以释放麦克风）。

我无法覆盖`onConfigurationChanged`，因为我的应用程序使用带有以编程方式添加的片段的操作栏选项卡，并且无法重新膨胀片段布局。

克服这些挑战的好方法是什么？到目前为止，我最好的解决方案是更新服务中的计时器，但我想考虑替代方案。我不喜欢计时器，因为在使用语音搜索时经常会出现麦克风争用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:14:18.330

您可以致电`getChangingConfigurations()`或`isChangingConfigurations()`在`onPause()`. 这会告诉你方向是否正在改变。如果不是，那么它可能会进入后台。

此外，您可以覆盖`onCongifurationChanged()`，只需确保您调用`super.onConfigurationChanged()`，以便框架处理方向更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T06:59:58.957

要检测您的应用是否已进入后台，您可以在 Activity 中使用以下代码：

```
public void onWindowFocusChanged(boolean hasFocus) {

    super.onWindowFocusChanged(hasFocus);

    if (hasFocus)
Toast.makeText(this, "ON TOP", Toast.LENGTH_SHORT).show();
    if (!hasFocus) {
Toast.makeText(this, "ON BACK", Toast.LENGTH_SHORT).show();

         }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:31:18.040

我很困惑为什么你不能覆盖 onConfigurationChanged - 为什么你不能以你创建它们的相同方式重新膨胀片段布局？

在绑定的服务中，系统不应该根据活动的应用程序/活动是否绑定到它来控制运行/关闭您的服务吗？您是基于应用程序上下文（在方向更改后持续存在）还是活动上下文（瞬态）绑定到服务？也许尝试在你的代码中切换它，看看你是否得到了你正在寻找的行为。

编辑：也许您需要 onStartCommand/stopService*和*bindService 的混合解决方案。已启动的服务似乎允许在 Activity 生命周期之外保持持久性，但也允许您将状态数据从一个绑定的 Activity 传递到下一个（通过 onBind/onRebind）。不确定这些数据是否对您的片段有帮助，但您至少可以传递一个标志，告诉您这是“新鲜”还是“回收”活动。

我自己还没有使用过服务，但仔细检查[绑定服务生命周期](http://developer.android.com/guide/components/bound-services.html#Lifecycle)可能会有所帮助。

# android - 在 Google Maps Android 中使用多个标记

> ID：12738086
> 
> 赞同：0
> 
> 时间：2012-10-05T00:51:52.753
> 
> 标签：android, maps

这是错误：

无法访问 MainActivity 类型的封闭实例。必须使用 MainActivity 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 MainActivity 的实例）。

错误出现在这行代码的 MyLocationListener.java 中的这行代码

```
 MyMapOverlays marker = new MyMapOverlays(p) ; 
```

有人帮我吗？

继承人的代码：

MainActivity.class

```
package com.sample.dorm_locator_gps;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import android.os.Bundle;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

public class MainActivity extends MapActivity {
    LocationManager locMgr;
    MyLocationListener locLstnr;

    private MapView mapView;
    private MapController mc;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview1);
        mc = mapView.getController();

        String coordinates[] = {"30", "71"};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        GeoPoint p = new GeoPoint(
                (int) (lat * 1E6),
                (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(7);
        mapView.invalidate();
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    /*My overlay Class starts*/
    class MyMapOverlays extends com.google.android.maps.Overlay
    {
        GeoPoint location = null;

        public MyMapOverlays(GeoPoint location)
        {
            super();
            this.location = location;
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow)
        {
            super.draw(canvas, mapView, shadow);
            //translate the screen pixels
            Point screenPoint = new Point();
            mapView.getProjection().toPixels(this.location, screenPoint);

            //add the image
            canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.our_cross_image),
                    screenPoint.x, screenPoint.y , null); //Setting the image &nbsp;location on the screen (x,y).
        }
    }
    /*My overlay Class ends*/
} 
```

MyLocationListener.java

```
package com.sample.dorm_locator_gps;

import java.util.List;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.sample.dorm_locator_gps.MainActivity.MyMapOverlays;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.widget.Toast;

public class MyLocationListener implements LocationListener
{
    private MapController mc;
    private MapView mapView;

    public void onLocationChanged(Location loc) {
        // TODO Auto-generated method stub
        loc.getLatitude();
        loc.getLongitude();
        String Text = "My current location is: " +  "Latitud = " + 
        loc.getLatitude() + "Longitud = " + loc.getLongitude();
        Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

        String coordinates[] = {""+loc.getLatitude(), ""+loc.getLongitude()};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);
        GeoPoint p = new GeoPoint((int) (lat * 1E6),(int) (lng * 1E6));
        mc.animateTo(p);
        mc.setZoom(7);

        //add a location marker.
        MyMapOverlays marker = new MyMapOverlays(p) ;
        List listOfOverLays = mapView.getOverlays();
        listOfOverLays.clear();
        listOfOverLays.add(marker);
        mapView.invalidate();
    }

    private Context getApplicationContext() {
        // TODO Auto-generated method stub
        return null;

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Disabled", Toast.LENGTH_SHORT ).show();

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:53:29.940

将`MyMapOverlays`类移动到自己的文件中将解决问题并使您的设计更加灵活。

目前，您需要一个 的实例`MainActivity`才能创建 的实例`MyMapOverlays`，但您的`MyLocationListener`类不需要知道`MainActivity`该类。将其移动到单独的文件中会破坏这种不必要的耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:42:29.840

您需要将 MyMapOverlays 声明为静态类。

```
public static class MyMapOverlays..... 
```

# ruby-on-rails - Rails 关联无法正常工作

> ID：12738093
> 
> 赞同：0
> 
> 时间：2012-10-05T00:53:18.820
> 
> 标签：ruby-on-rails

我有两个表，项目和类别。我已经预加载了 4 行的类别，每个项目必须属于 4 行之一。但是，当我尝试在命令行中添加现有项目和现有类别之间的关联时，我得到了这个：

```
> Project.find(11).category = Category.find(1)
Project Load (0.5ms)  SELECT "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT 1  [["id", 11]]
Category Load (0.7ms)  SELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT 1  [["id", 1]]
 => #<Category id: 1, name: "Photography", created_at: "2012-10-05 00:07:37", updated_at: "2012-10-05 00:07:37"> 
1.9.3p194 :004 > Project.find(11).category
Project Load (0.7ms)  SELECT "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT 1  [["id", 11]]
 => nil 
> Project.find(11).category
Project Load (0.4ms)  SELECT "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT 1  [["id", 11]]
 => nil 
```

很明显有些东西不起作用。我的迁移：

```
class CreateProjects < ActiveRecord::Migration
  def change
    create_table :projects do |t|
      t.string :filename
      t.string :location
      t.integer :id
      t.references :category
      t.timestamps
    end
  end
end 
```

* * *

```
class CreateCategories < ActiveRecord::Migration
  def change
    create_table :categories do |t|
      t.integer :id
      t.string :name, :default => "Design"
      t.timestamps
    end
  end
end 
```

* * *

和型号：

```
class Category < ActiveRecord::Base
  attr_accessible :name, :id, :category_id
  has_many :projects 
    def to_hash
    {
      :id => self.id,
      :name => self.name
    }
  end
end 
```

* * *

```
class Project < ActiveRecord::Base
  attr_accessible :id, :project_id, :filename, :location, :uploaded_file
  belongs_to :category
  def to_hash
    {
      :id => self.id,
      :filename => self.filename,
      :location => self.location
    }
  end
end 
```

我哪里错了？提前感谢您阅读所有这些内容！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:57:10.893

你从来没有保存过记录。

```
project = Project.find(11)
project.category = Category.find(1)
project.save! 
```

# objective-c - 迭代 NSMutableArray 无法正常工作

> ID：12738095
> 
> 赞同：0
> 
> 时间：2012-10-05T00:53:26.653
> 
> 标签：objective-c, ios, nsmutablearray

我在迭代自定义对象的 NSMutableArray 时遇到问题。每当我运行以下代码时，它都会对数组进行 6 次迭代，尽管 NSMutableArray 对象中只有 2 个对象。

```
//Configure the Settings Screen
[self addSection:^(JMStaticContentTableViewSection *section, NSUInteger sectionIndex) {

    section.title = @"Twitter Accounts";

    //alloc and init the twitterSwitchesArray to store the switches used in the view
    self.twitterSwitchesArray = [[NSMutableArray alloc] initWithCapacity:[self.twitterAccounts count]];

    NSLog(@"LOADING: twitterAccounts Array count: %i", [self.twitterAccounts count]);

    for(MessageBlastSavedTwitterAccount *twitterAccount in _twitterAccounts)
    {
        NSLog(@"Configuring: %@", twitterAccount.twitterAccountDescription);

        //Configure the Twitter Setting Switch
        [section addCell:^(JMStaticContentTableViewCell *staticContentCell, UITableViewCell *cell, NSIndexPath *indexPath) {

            UISwitch *twitterSwitch = [[UISwitch alloc] init];
            twitterSwitch.accessibilityLabel = twitterAccount.twitterAccountDescription;
            twitterSwitch.on = [self switchShouldBeFlippedForTwitterAccount:twitterAccount.twitterAccountDescription];

            NSLog(@"LOADING: Twitter account %@, should be enabled: %i", twitterAccount.userEnteredDescription, [self switchShouldBeFlippedForTwitterAccount:twitterAccount.twitterAccountDescription]);

            [self.twitterSwitchesArray addObject:twitterSwitch];

            [twitterSwitch addTarget:self action:@selector(flippedTwitterSwitch:) forControlEvents:UIControlEventValueChanged];

            staticContentCell.reuseIdentifier = @"UIControlCell";
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.textLabel.text = [twitterAccount userEnteredDescription];
            cell.imageView.image = [UIImage imageNamed:@"210-twitterbird.png"];
            cell.accessoryView = twitterSwitch;
        }];
    }
}]; 
```

我得到以下输出：

```
2012-10-04 20:47:27.703 MessageDraft[1206:c07] LOADING: twitterAccounts Array count: 2
2012-10-04 20:47:27.703 MessageDraft[1206:c07] Configuring: coryb
2012-10-04 20:47:27.704 MessageDraft[1206:c07] LOADING: Twitter account @coryb, should be enabled: 1
2012-10-04 20:47:27.705 MessageDraft[1206:c07] Configuring: cocoaapp
2012-10-04 20:47:27.706 MessageDraft[1206:c07] LOADING: Twitter account @cocoaapp, should be enabled: 1
2012-10-04 20:47:27.708 MessageDraft[1206:c07] LOADING: Twitter account @coryb, should be enabled: 1
2012-10-04 20:47:27.709 MessageDraft[1206:c07] LOADING: Twitter account @cocoaapp, should be enabled: 1
2012-10-04 20:47:27.713 MessageDraft[1206:c07] LOADING: Twitter account @coryb, should be enabled: 1
2012-10-04 20:47:27.714 MessageDraft[1206:c07] LOADING: Twitter account @cocoaapp, should be enabled: 1 
```

我什至尝试过手动方式（如下）来迭代数组，但我仍然遇到完全相同的问题：

```
// The self.twitterAccounts count returns a 2, so this should only repeat twice.
    for(int i = 0; i < [self.twitterAccounts count]; i++)
    {
        NSLog(@"%i", i);

        //Configure the Twitter Setting Switch
        [section addCell:^(JMStaticContentTableViewCell *staticContentCell, UITableViewCell *cell, NSIndexPath *indexPath) {

            UISwitch *twitterSwitch = [[UISwitch alloc] init];
            twitterSwitch.tag = i;
            twitterSwitch.on = [self switchShouldBeFlippedForTwitterAccount:_twitterAccount.description];

            self.twitterAccount = [_twitterAccounts objectAtIndex:i];

            NSLog(@"LOADING: Twitter account %@, should be enabled: %i", _twitterAccount.userEnteredDescription, [self switchShouldBeFlippedForTwitterAccount:_twitterAccount.description]);

            [self.twitterSwitchesArray addObject:twitterSwitch];

            [twitterSwitch addTarget:self action:@selector(flippedTwitterSwitch:) forControlEvents:UIControlEventValueChanged];

            staticContentCell.reuseIdentifier = @"UIControlCell";
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.tag = i;
            cell.textLabel.text = [_twitterAccount userEnteredDescription];
            cell.imageView.image = [UIImage imageNamed:@"210-twitterbird.png"];
            cell.accessoryView = twitterSwitch;
        }];
    }
}]; 
```

任何有关此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:51:57.783

我是[JMStaticContentTableViewController](https://github.com/jakemarsh/JMStaticContentTableViewController)的创建者。

该`addCell:`方法不会被多次调用。`JMStaticContentTableViewCellBlock`您传递给方法的块*作为*控制器方法的一部分 `addCell:`被调用。`tableView:cellForRowAtIndexPath:`

它这样做是为了让您可以正确配置`UITableViewCells`并有效地重用它们。

在查看了上面的代码之后，我建议您迭代两次，一次是为了`twitterSwitchesArray`正确配置您的代码，另一次是使用您希望在`tableView:cellForRowAtIndexPath:`方法中调用的代码。

您可以在`JMStaticContentTableViewCellBlock` [此处查看执行 for 循环并在右侧](https://github.com/jakemarsh/JMStaticContentTableViewController/blob/master/SettingsExample/SettingsExample/WifiViewController.m#L96-L136)运行循环安全代码的示例。

`JMStaticContentTableViewController`被设计成您仍然可以像传统的基于委托的`UITableViewController`模型一样“思考”它，但使用块来代替。

这就是为什么`JMStaticContentTableViewCellBlock`传入一个`UITableViewCell`实例，这样你就可以把它当作你`dequeueReusableCellWithIdentifier:`从`UITableView`. 它还传入模型对象实例，以便您可以配置一些在标准对象`JMStaticContentTableViewCell`上没有意义或不可能的东西，例如or 。`UITableViewCell``tableViewCellSubclass``cellHeight`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:04:06.487

我认为问题不在于`for`循环，甚至不在于这种方法，而在于`addCell:`. 您设置的块`addCell:`被多次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:30:34.943

这是内部问题，最好使用 ((ClassName*)[mutableArray objectAtIndex:i])

# dll - generate_export_header 典型用法

> ID：12738096
> 
> 赞同：2
> 
> 时间：2012-10-05T00:53:32.713
> 
> 标签：dll, cmake

我正在尝试使用 generate_export_header 函数。我的库源代码在`src`文件夹中，因此 CMake 在`src/mylib_export.h`. 为了使用此导出标头，我是否只需将其复制到库的`include`文件夹中以在实现代码中使用？这是我正在使用的 CMake 代码片段：

```
ADD_LIBRARY(${PROJECT_NAME} ${LIB_TYPE} ${SOURCES})
GENERATE_EXPORT_HEADER(${PROJECT_NAME})

FILE(COPY 
    ${CMAKE_CURRENT_BINARY_DIR}/${PROJECT_NAME}_export.h 
    DESTINATION 
    ${PROJECT_SOURCE_DIR}/include
) 
```

有没有更多的 CMake 方式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:22:46.980

当我使用 CMake 执行此操作时，我通常将二进制文件夹添加到 include_directories 并且根本不复制导出标头。

这样，源代码树中没有任何生成的部分，这使得使用源代码控制更简单，而且我通常使用每个源代码树超过 1 个构建树来构建我的项目，主要是为了允许在超过 1 个编译器下构建或构建使用不同的设置或使用相同的编译器单独的 32 位/64 位构建树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-13T22:21:46.573

我更喜欢复制`export.h`到源文件夹并将其添加到`.gitignore`特定于应用程序的相同内容中`config.h`。

```
generate_export_header (
  ...
  EXPORT_FILE_NAME "${CMAKE_CURRENT_SOURCE_DIR}/export.h"
)
configure_file ("config.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/config.h") 
```

原因是`clang`代码高亮和格式化。`export.h`现在看起来如何和看起来并不重要`config.h`（这些文件将在构建之前更新），您只需要在带有空`build`文件夹的文本编辑器中正确突出显示和格式化您的代码。

# java - 信用卡验证 - 技术上正确但算法错误？

> ID：12738098
> 
> 赞同：1
> 
> 时间：2012-10-05T00:53:33.280
> 
> 标签：java, credit-card

所以这是任务：

信用卡号码 使用 8 位数字检查 • 从最右边的数字开始，形成所有其他数字的总和。例如，如果信用卡号是 4358 9795，那么您将形成总和 5 + 7 + 8 + 3 = 23。 • 将前面步骤中未包括的每个数字加倍。添加结果数字的所有数字。例如，对于上面给出的数字，将数字加倍，从倒数第二个开始，得到 18 18 10 8。将这些值中的所有数字相加得到 1 + 8 + 1 + 8 + 1 + 0 + 8 = 27。 • 将前面两个步骤的总和相加。如果结果的最后一位为 0，则该数字有效。在我们的例子中，23 + 27 = 50，所以这个数字是有效的。--有效/无效？

我已经为这些方法创建了一个测试程序和一个单独的程序。一切都成功编译，所以不应该有任何技术错误，但即使我输入有效的卡号，程序也会返回该号码无效，所以我假设实际算法有问题，但我很新这让我无法弄清楚它是什么。

```
import java.util.Scanner;

public class CreditCardTester{

public static void main(String[] args){

    Scanner scanner = new Scanner(System.in);
    String retry = ("y");
    String n = null;

    while(retry.equalsIgnoreCase("y")){ // allows program to keep running even if the user enters in a capital Y
        int lengthCheck = 1;
        System.out.println("Please enter your 8-digit credit card number");

    // check to see whether the input number is exactly 8 digits
        while(lengthCheck==1){
            n = scanner.next();
                if(n.length()==8)
                    lengthCheck=0;
                else
                    System.out.println("Please make sure the credit card number you have entered is 8 digits");
        } // end inner while loop

    // instantiate CardNumber and check validity
    CardNumber number = new CardNumber(n);
    number.check();
    if (number.isValid())
        System.out.println("The number you entered is a valid credit card number.");
    else
        System.out.println("The number you entered is not a valid credit card number. Would you like to enter in another number? (y/n)");
    retry = scanner.next();

    } // end outer while loop

}

} 
```

和单独的班级

```
public class CardNumber {

private String number;
private boolean valid;

public CardNumber(String n){
    number = n;
    valid = true;
}

private void check1(){
    int a = Integer.parseInt(number.substring(7));
    int b = Integer.parseInt(number.substring(5,6));
    int c = Integer.parseInt(number.substring(3,4));
    int d = Integer.parseInt(number.substring(1,2));

    int oddsum = a + b + c + d;

    int e = (Integer.parseInt(number.substring(6,7))) * 2;
    int f = (Integer.parseInt(number.substring(4,5))) * 2;
    int g = (Integer.parseInt(number.substring(2,3))) * 2;
    int h = (Integer.parseInt(number.substring(0,1))) * 2;

    String ee = String.valueOf(e);
    String ff = String.valueOf(f);
    String gg = String.valueOf(g);
    String hh = String.valueOf(h);

    int evensum = (Integer.parseInt(ee.substring(0))) + (Integer.parseInt(ff.substring(0))) + (Integer.parseInt(gg.substring(0))) + (Integer.parseInt(hh.substring(0)));

    int totalsum = evensum + oddsum;
    if (!(totalsum%10 == 0))
    valid=false;
}

public void check(){
    check1();
}

public boolean isValid(){
    return valid;
}

} 
```

我相信还有一个更好的方法可以做到这一点，所以所有的建议都值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:12:02.063

The credit card number validation is called the Luhn Algorithm. Here's a java implementaion [http://www.xinotes.org/notes/note/595/](http://www.xinotes.org/notes/note/595/)

For your code I think here:

```
 int evensum = (Integer.parseInt(ee.substring(0))) + (Integer.parseInt(ff.substring(0))) + (Integer.parseInt(gg.substring(0))) + (Integer.parseInt(hh.substring(0))); 
```

You mean to sum both digist:

```
int evensum = Integer.parseInt(ee.substring(0,1)) +  Integer.parseInt(ee.substring(1)) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T18:17:00.347

您可以在此处找到信用卡验证器的自定义植入，它同时进行信用卡号验证和信用卡类型检测，

[http://www.esupu.com/credit-card-validator-java/](http://www.esupu.com/credit-card-validator-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:28:37.203

尝试这个。

```
public class CardNumber {

    String number;
    boolean valid;

    public CardNumber(String n){
        number = n;
    }

    public void check(){
        // The odd sum
        // For the eight digits, 1, 3, 5, 7 are odd
        int a = Integer.parseInt("" + number.charAt(1));
        int b = Integer.parseInt("" + number.charAt(3));
        int c = Integer.parseInt("" + number.charAt(5));
        int d = Integer.parseInt("" + number.charAt(7));

        int oddsum = a+b+c+d;

        // The even sum
        int e = (Integer.parseInt(number.substring(6,7))) * 2;
        int f = (Integer.parseInt(number.substring(4,5))) * 2;
        int g = (Integer.parseInt(number.substring(2,3))) * 2;
        int h = (Integer.parseInt(number.substring(0,1))) * 2;

        // As suggested by RUP to make it more simple
        int evensum = e + f + g + h;

        // Total sum
        int totalsum = oddsum + evensum;
        valid = (totalsum%10==0)?true:false;            
    }

    public boolean isValid(){
        return valid;
    }

} 
```

# javascript - 如何配置我的 Derby.js 应用程序以使用 LESS CSS 引擎？

> ID：12738101
> 
> 赞同：1
> 
> 时间：2012-10-05T00:54:42.597
> 
> 标签：javascript, node.js, less, derbyjs

根据 Derby 博客和[这个 pull request](https://github.com/codeparty/derby/pull/33)，Derby.js 从 0.3.1 版本开始支持 LESS 引擎。但是，我不知道应该在哪里设置配置选项以在我的代码中将其从 Stylus 切换。我觉得它需要通过`derby.use`我的文件中的调用来发生`lib/server/index.js`，但是除了它是可能的之外，我所看到的文档中没有列出任何关于它的内容。

我只是使用 Stylus，但我正在尝试 Columnal，它不能在 Stylus 中编译。如何配置应用程序以使用 LESS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:50:52.253

没有要设置的配置选项，它都是透明的。只需开始使用`.less`目录中的`styles`文件即可。

# sql - 需要编写一个 SQL 查询来显示 MID 字段的最小值、最大值和范围。

> ID：12738104
> 
> 赞同：1
> 
> 时间：2012-10-05T00:55:32.803
> 
> 标签：sql, select, range, max, min

编写一个 SQL 查询，将显示 MID 字段的最小、最大和值范围（即最大 - 最小）。值的范围是高值和低值之间的差异，因此如果高值为 12，而低值为 3，则范围将为 9。 [在 3 列中] 我的问题是如何找到最小值和最大值的值并将信息放在一列中，如果在解决方案之间看到，但我需要将它放在另一列中。我可以使用我能得到的所有帮助我只有一个月的 sql 使用（BANNER Oracle9i Enterprise Edition Release 9.2.0.1.0 - Production PL/SQL Release 9.2.0.1.0 - Production CORE 9.2.0.1.0 Production TNS对于 32 位 Windows：版本 9.2.0.1.0 - 生产 NLSRTL 版本 9.2.0.1.0 - 生产）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:58:09.690

作为一个警告，我不了解 Oracle，所以这*可能*在语法上并不完全正确（但想法是一样的）：

```
SELECT MIN(MID) AS LowValue
    , MAX(MID) AS HighValue
    , MAX(MID) - MIN(MID) AS ValueRange
FROM YourTable 
```

我们所做的就是使用 获取列中的最小值，使用 获取列中`MIN`的最大值`MAX`，然后在第三种情况下从范围的最小值中减去最大值。

# jquery - 创建一个在按键被按下时播放的简单动画

> ID：12738107
> 
> 赞同：1
> 
> 时间：2012-10-05T00:56:25.010
> 
> 标签：jquery, html, animation, jquery-animate

我想做以下事情，我想知道最有效的方法是什么：

按下特定键时，我想以我可以指定的速率从一个 jpeg 到下一个 jpeg 循环浏览一组 jpeg，然后将最终图像无限期地保留在屏幕上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:24:04.977

首先，欢迎来到 Stack Overflow。通常习惯性地提供一些您尝试过的示例。下次，先尝试一下。当我们看到一些代码时，我们会更有帮助！

这应该让你开始。它只会`console.log`在`enter/return`按住键时。一旦它被释放，它会再做一个`console.log`，并在下一次`enter/return`按住键时重新绑定事件。

[这是一个示例小提琴](http://jsfiddle.net/ccW7Q/)

```
(function(){
  var intervalId;

  // your animations should go here
  var someFunc = function(){
    console.log("executing");
  }

  var keyDownFn = function(e){
    if(e.keyCode == 13){ // 13 is enter/return
      $(window).unbind('keydown.animation');
      $(window).bind('keyup.animation', keyUpFn);
      intervalId = setInterval(someFunc, 500);
    }
  }

  var keyUpFn = function(e){
    if(e.keyCode == 13){ // 13 is enter/return
      console.log("stopping");
      $(window).unbind('keyup.animation');
      $(window).bind('keydown.animation', keyDownFn);
      clearInterval(intervalId);
    } 
  }

  // this line fires the whole thing off
  $(window).bind('keydown.animation', keyDownFn);

})();​ 
```

# php - PHPUnit 模拟对象问题

> ID：12738109
> 
> 赞同：2
> 
> 时间：2012-10-05T00:56:59.750
> 
> 标签：php, class, object, mocking, phpunit

我一定遗漏了一些东西，但我遵循了本教程：[http ://www.phpunit.de/manual/current/en/test-doubles.html](http://www.phpunit.de/manual/current/en/test-doubles.html)

```
 <?php
    class SomeClass
    {
      public function doSomething()
      {
         // Do something.
         return 'bar';
      }
    }
 ?> 
```

我的 StubTest 课程

```
class StubTest extends PHPUnit_Framework_TestCase
{
  public function testStub()
  {
    // Create a stub for the SomeClass class.
    $stub = $this->getMock('SomeClass');

    // Configure the stub.
    $stub->expects($this->any())
         ->method('doSomething')
         ->will($this->returnValue('foo'));

    // Calling $stub->doSomething() will now return
   $this->assertEquals('foo', $stub->doSomething());
  }
 }
 ?> 
```

好吧，也许我遗漏了一些东西，但调用 doSomething 的预期价值不是吧？

如果我这样做`$this->assertEquals('bar', $stub->doSomething());`，它将失败。

它似乎是基于`->will($this->returnValue('foo'));`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:15:34.893

你的测试应该通过。主代码将返回“bar”，但您没有调用主代码。您嘲笑该对象以返回“foo”。因此，它应该返回您的测试显示的“foo”。

要使用 mock 从您的代码中模拟相同的返回，您可以执行以下操作：

```
$stub = $this->getMock('SomeClass');

// Configure the stub.
$stub->expects($this->any())
     ->method('doSomething')
     ->will($this->returnValue('bar'));

// Calling $stub->doSomething() will now return
$this->assertEquals('bar', $stub->doSomething()); 
```

这将允许您的测试继续进行，就好像您调用了真正的函数并收到“bar”作为返回一样。

# python - Python：使用 Db 值附加列表

> ID：12738111
> 
> 赞同：1
> 
> 时间：2012-10-05T00:57:13.030
> 
> 标签：python

我在 Python 方面相对较新，因此在基础方面面临困难。我有以下代码在循环内打印正确的列表值，但在循环外它只显示最后一个值：

```
for item in statusEntries:
        theNameStatus = item[3] #get the numStatus field data
        if theNameStatus == 1:
            numStatus1 = item[2] #get cntStatus
        elif theNameStatus == 2:
            if numStatus1 > 0:
                theNameStatus = "closed"

        sctStatus["nameStatus"] = theNameStatus
        sctStatus["IDstatus"] = item[0]
        sctStatus["cntStatus"] = item[2]
        #Appending Status Array with Status Attribute Object
        sctResponse["STATUSOPTION"].append(sctStatus) 
```

当我在循环中打印**sctResponse["STATUSOPTION"]**时，它会在每次迭代中显示正确的值，但是当它到达最后一次迭代时，它只会用最后一个循环值填充它：

```
{'STATUSOPTION': [{'nameStatus': 1, 'cntStatus': 0, 'IDstatus': 6}]}
{'STATUSOPTION': [{'nameStatus': 2, 'cntStatus': 0, 'IDstatus': 1}, {'nameStatus': 2, 'cntStatus': 0, 'IDstatus': 1}]}
{'STATUSOPTION': [{'nameStatus': 3, 'cntStatus': 0, 'IDstatus': 7}, {'nameStatus': 3, 'cntStatus': 0, 'IDstatus': 7}, {'nameStatus': 3, 'cntStatus': 0, 'IDstatus': 7}]}
{'STATUSOPTION': [{'nameStatus': 4, 'cntStatus': 0, 'IDstatus': 4}, {'nameStatus': 4, 'cntStatus': 0, 'IDstatus': 4}, {'nameStatus': 4, 'cntStatus': 0, 'IDstatus': 4}, {'nameStatus': 4, 'cntStatus': 0, 'IDstatus': 4}]} 
```

**{'STATUSOPTION': [{'nameStatus': 5, 'cntStatus': 0, 'IDstatus': 5}, {'nameStatus': 5, 'cntStatus': 0, 'IDstatus': 5}, {'nameStatus' : 5, 'cntStatus': 0, 'IDstatus': 5}, {'nameStatus': 5, 'cntStatus': 0, 'IDstatus': 5}, {'nameStatus': 5, 'cntStatus': 0, ' ID状态'：5}]}**

正如您所看到的最后一条粗体记录，所有值都已清除，并用最后一条记录填充。为什么会这样？Append 应该追加而不是清除它，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:02:34.680

引用`sctStatus`始终是对*同一*字典的引用 - 当您`append`将该字典添加到`sctResponse`列表时，您不是在附加字典的*副本*，而是对它的*引用*。每次将最后一行更改为`sctResponse["STATUSOPTION"].append(sctStatus.copy())`或创建一个新字典。`sctStatus`

```
status_option = []
sctStatus = {}
for i in range(1, 3):
    sctStatus["integer"] = i
    status_option.append(sctStatus)
    print "Round", i, "->", status_option 
```

将打印：

```
Round 1 -> [{"integer": 1}]
Round 2 -> [{"integer": 1, "integer": 2}, {"integer": 1, "integer": 2}]
Round 3 -> [{"integer": 1, "integer": 2, "integer": 3},
            {"integer": 1, "integer": 2, "integer": 3},
            {"integer": 1, "integer": 2, "integer": 3}] 
```

发生了什么？Python 是[按名称传递的](http://me.veekun.com/blog/2012/05/23/python-faq-passing/)——除非您处理的是原始值，否则您几乎总是按值传递这些伪指针。当您附加`sctStatus`到列表时，您附加的*名称*仍指向`sctStatus`内存中的同一字典。当您更改该字典时，指向它的所有名称现在都会拉出*更改*后的字典。

另请参阅[*其他语言有变量*](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)以获得对这种行为的另一个很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:02:30.067

假设循环如您所展示的那样，那么在我看来只有一个`sctStatus`字典，并且您不断更改它的`"namestatus"`,`"IDstatus"`和`"cntStatus"`键值对。尝试插入`sctStatus = {}`，即

```
 sctStatus = {}
    sctStatus["nameStatus"] = theNameStatus
    sctStatus["IDstatus"] = item[0]
    sctStatus["cntStatus"] = item[2] 
```

这样您每次都附加一个新字典。

# haskell - [Int] 之和导致溢出

> ID：12738112
> 
> 赞同：3
> 
> 时间：2012-10-05T00:57:14.543
> 
> 标签：haskell

我有一个返回的函数，`[Int]`我想取列表的总和。然而，虽然每个单独的元素都小于`maxBound::Int`，但总和肯定更大。

一个（人为的）例子：

```
ghci> sum ([1..10000000] :: [Int])
-2004260032 
```

有什么办法可以强制 sum 累积成 an`Integer`而不是 an `Int`？我想错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T01:06:39.863

sum 返回与其输入列表元素相同的类型：

```
sum :: Num a => [a] -> a 
```

所以你需要传递它 a`[Integer]`才能返回一个`Integer`. 如果您的输入列表已经是 type `[Int]`，您可以使用该函数：

```
sum . map fromIntegral 
```

反而：

```
ghci> sum . map fromIntegral $ ([1..10000000] :: [Int])
50000005000000 
```

# android - Post-EasyTether，PDANet 将三星 Galaxy 4g 绑定到 Mac OS X 10.7.4 以实现 Python

> ID：12738120
> 
> 赞同：1
> 
> 时间：2012-10-05T00:59:01.060
> 
> 标签：android, python

我正在使用 Mac OS X 版本 10.7.4 和 Python 3.2.3。我已经阅读了 Stack Overflow 上许多同样令人沮丧的帖子，这篇文章在帮助我删除 EasyTether 不起作用后特别有用，结果证明它阻止了 PDANet 工作：

[OS X 10.6.6 和“adb devices”无法列出 android 设备](https://stackoverflow.com/questions/4680637/mac-os-x-10-6-6-and-adb-devices-fails-to-list-android-devices)

我正在使用 Paul Ferrill 的“带有 SL4A 的 Pro Android Python”，在过去的 4 个小时里，我只想能够在我的 Mac 的 IDLE 会话中输入以下内容：

```
>>>import android
>>>droid = android.Android()
>>>droid.makeToast("Hello Android from Mac") 
```

在这一点上我很受阻。我已经允许在我的三星 Galaxy 4g 上进行 USB 调试，我终于可以使用 PDANet 软件，但我没有什么可以展示的。我看过一堆 Youtube 教程，这个对安装 PDANet 很有帮助：

[http://www.youtube.com/watch?v=yR9GANNKUgo](http://www.youtube.com/watch?v=yR9GANNKUgo)

很多其他人在使用 EasyTether 时遇到了类似的问题，但现在我有 PDANet 工作，我似乎仍然无法让这段代码工作。现在，我有以下内容：

Python 3.2.3 键入“copyright”、“credits”或“license()”以获取更多信息。

> > > 导入安卓

回溯（最近一次通话最后）：

文件“”，第 1 行，在

导入安卓

ImportError：没有名为 android 的模块

我会非常感谢您能提供的任何帮助。

**更正**

我了解代码引发错误的原因是在我的计算机上找不到 android 模块。我只是想知道如何让我的 Mac 与我的三星 Galaxy 连接，这样我就可以编写上面的代码并将我的 android 上的文件 android.py 与我的 Mac 上的脚本一起注册，这样程序才能工作.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:26:23.303

我不确定那本书是否适合 Python 3。有一个 Python3 APK（http://code.google.com/p/python-for-android/downloads/detail?name=Python3ForAndroid_r6.apk），但是另一种，标准的 PythonForAndroid 是基于 2.6(?) 的。您需要在您的 android 设备和本地机器上使用相同版本的 python 来执行您想要执行的操作。我不确定哪个 Python 3 ve

当我在玩这本书和同一本书时，我必须在我的本地机器上安装与我在设备上安装的 APK 中使用的相同版本的 python。要让它发挥作用仍然需要花很多功夫，而且最终并不值得付出努力。

但是，我发现只是将脚本推送到并立即运行它比尝试远程使用 IDLE 更容易。这就是我现在如何快速制作我计划开发的任何 Android 应用程序的原型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:00:20.263

我在使用 PDANet 将三星 Galaxy 3 连接到我的笔记本电脑以进行互联网连接时遇到问题。手机显示 PDANet 与笔记本电脑一样已连接，我已采取所有必要步骤（即：启用 USB 调试）但是在几秒钟内笔记本电脑将显示连接已断开。我终于浏览了一篇提到**三星驱动程序更新**的帖子。因此，我访问了三星官方网站并输入了有关我的特定手机的必要信息，并将必要的三星驱动程序下载到我的笔记本电脑上。我很高兴地说，三星 Galaxy S3 现在可以完美地使用 PDANet，我现在正在使用它来撰写这篇文章。我希望这些信息对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-13T16:42:32.023

[这个名为 ( **gnirehtet** )](https://github.com/Genymobile/gnirehtet)的免费开源项目将允许您将您的 android 手机连接到**Mac**、**Linux**或**Windows**计算机上！android的最低版本是5.0（棉花糖）

[![在此处输入图像描述](../Images/f6843e764c78bab3caefef18535869c7.png)](https://i.stack.imgur.com/kUHZQ.png)

# powershell-3.0 - PowerShell 将 Char 数组转换为字符串

> ID：12738121
> 
> 赞同：11
> 
> 时间：2012-10-05T00:59:02.047
> 
> 标签：powershell-3.0

我已经阅读了在 PowerShell 中将 char 数组转换为字符串的各种方法，但它们似乎都不适用于我的字符串。我的字符串的来源是：

```
$ComputerName = "6WMPSN1"
$WarrantyURL = "http://www.dell.com/support/troubleshooting/au/en/aulca1/TroubleShooting/ProductSelected/ServiceTag/$ComputerName"
$WarrantyPage = Invoke-WebRequest -Uri $WarrantyURL
$WPageText = $WarrantyPage.AllElements | Where-Object {$_.id -eq "TopContainer"} | Select-Object outerText 
```

生成的 WPageText 是一个字符数组，所以我不能使用 Select-String -Pattern "days" -Context

我试过了：

```
$WPageText -join
[string]::Join("", ($WPageText)) 
```

根据 [http://softwaresalariman.blogspot.com.au/2007/12/powershell-string-and-char-sort-and.html](http://softwaresalariman.blogspot.com.au/2007/12/powershell-string-and-char-sort-and.html)

到目前为止，我唯一成功的事情是：

```
$TempFile = New-Item -ItemType File -Path $env:Temp -Name $(Get-Random)
$WPageText | Out-File -Path $TempFile
$String = Get-Content -Path $TempFile 
```

除了写入和读取文件之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-17T12:59:26.170

您可以使用`-join`运算符（带有额外的部分来证明数据类型）：

```
$x = "Hello World".ToCharArray();
$x.GetType().FullName         # returns System.Char[]
$x.Length                     # 11 as that's the length of the array
$s = -join $x                 # Join all elements of the array
$s                            # Return "Hello World"
$s.GetType().FullName         # returns System.String 
```

或者，连接也可以写成：

```
$x -join "" 
```

两者都是合法的；`-join`没有 LHS 只是将数组合并到其 RHS 上。第二种格式使用 RHS 作为分隔符连接 LHS。有关更多信息，请参阅[about_Join 帮助](http://technet.microsoft.com/en-us/library/hh847757.aspx)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T18:57:40.943

这样做的廉价方法是修改`$ofs`变量并将数组包含在字符串中。`$ofs`是一个内部 PS 分隔符，用于使用`Object.ToString()`.NET 打印数组。

```
$a = "really cool string"
$c = $a.ToCharArray()
$ofs = '' # clear the separator; it is ' ' by default
"$c" 
```

您也可以（应该）`System.String`像这样使用构造函数：

```
$a = "another mind blowing string"
$result = New-Object System.String ($a,0,$a.Length) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-06-07T08:20:39.433

将 char 数组转换为字符串的最快方法：

```
[String]::new($WPageText) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T04:58:45.783

无论你在寻找什么，我认为你错过了一些关于`$WPageText`. 如果你看一下它是一个`PSCustomObject`你感兴趣的内部，`outerText`它是一个字符串。

```
PS C:\PowerShell> $WPageText | Get-Member

   TypeName: Selected.System.Management.Automation.PSCustomObject

Name        MemberType   Definition                                                                                           ----        ----------   ----------                                              
Equals      Method       bool Equals(System.Object obj)                                                                                                                               
GetHashCode Method       int GetHashCode()                                                                                                                                            
GetType     Method       type GetType()                                                                                                                                               
ToString    Method       string ToString()                                                                                                                                            
outerText   NoteProperty System.String outerText= ... 
```

所以

```
PS C:\PowerShell> $WPageText.outerText 

 Precision M6500 
Service Tag: 6WMPSN1 

 Select A Different Product > 
Warranty Information 
Warranty information for this product is not available. 
```

# css - 我怎么能把我的

> ID：12738132
> 
> 赞同：2
> 
> 时间：2012-10-05T01:00:57.600
> 
> 标签：css, image, text

[我的布局](http://lrroberts0122.github.com/DWS/lab4/index.html)有问题，我有一个`<h1>`元素位于图像上方。情况使我无法编辑 HTML，那么如何将`<h1>`元素定位在图像*下方*？

**我的代码如下所示：**

```
<h1>Razer Press Release</h1>
<img src="/images/trongamingkeyboard.jpg" /> 
```

但基本上，在链接中，您可以看到我想直接移动到图像下方的“Razer Press Release”文本。我就是不知道怎么办！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:04:39.440

使用 CSS 交换两个元素的垂直位置。

```
<h1 style="position: relative; top: 500px;">Razer Press Release</h1>
<img style="position: relative; top: -18px;" src="/images/trongamingkeyboard.jpg" /> 
```

如果您不能使用内联样式（这是最简单的），这些选择器将起作用，给定该页面中的标记：

```
#cta > h1:first-child {
    position: relative;
    top: 500px;
}

#cta > h1:first-child + div > img {
    position: relative;
    top: -18px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:48:10.687

你的 HTML

```
<section id="cta">
  <h1>Razer Press Release</h1>
  <div>
    <img alt="Photograph of the new Tron Gaming Keyboard by Razer" src="images/tron-keyboard-main.jpg">
  </div>
</section> 
```

我的 CSS

```
#cta {
  position: relative;
  z-index: 0;
}

#cta h1{
  position: absolute;
  z-index: 100;
  top: 20px; /* your placement */
  left: 20px; /* your placement */
} 
```

# apache-pig - 将具有非标准分隔符的文件加载到 pig 中

> ID：12738133
> 
> 赞同：2
> 
> 时间：2012-10-05T01:01:09.110
> 
> 标签：apache-pig

我有一个如下所示的文件，其中字段由“？”分隔：

```
(01-01-2011-04:43:50?2521795691802591407?94.20.58.165? 
```

当我使用

```
mac = load 'Activity_1295336_01-01-2011.log.gz'using PigStorage('?'); 
```

我仍然无法访问内部字段，例如`mac$1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:58:40.987

它在我身边按预期工作......

```
$> pig --version
Apache Pig version 0.9.2-cdh4.0.0 (rexported) 
compiled Jun 04 2012, 17:42:27

$> cat temp1
01-01-2011-04:43:50?2521795691802591407?94.20.58.165?

grunt> a = load '/temp1' using PigStorage('?') as (datetime, id, ip); 
grunt> dump a;
grunt> >> (01-01-2011-04:43:50,2521795691802591407,94.20.58.165,)
grunt> b = foreach a { funky = CONCAT(ip, '_-* FUNKY'); generate datetime, id, funky;}
grunt> dump b;
grunt> >> (01-01-2011-04:43:50,2521795691802591407,94.20.58.165_-* FUNKY) 
```

# javascript - 为什么在谷歌浏览器中输入文本不起作用？---负 z-index

> ID：12738135
> 
> 赞同：0
> 
> 时间：2012-10-05T01:01:43.597
> 
> 标签：javascript, input, z-index

所以这是给你的一个错误。使用以下文本，在谷歌浏览器 22.0 中，输入字段**不会改变光标并获得焦点**，因此**您无法在输入框中输入内容**。（它在 FireFox 和 IE 中都可以正常工作）为什么会这样？

```
<html>
<body>
<div style="z-index: -10; position:fixed; top:20; left:20; bottom: 20; right: 20;">
  <form action="">
  <input type="text">
  </form>
</div>
</body>
</html> 
```

这会在 Chrome 的未来版本中更改吗？这里的设计思想是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:01:43.597

该代码在 div 中使用负 z-index。由于 Chrome 中的一个错误，即使显示元素，表单也必须具有大于 0 的 z-index 才能允许交互。大概这倾向于防止在交叉加载的广告代码中隐藏输入表单，尽管通过将表单覆盖或将其移出页面来隐藏表单同样容易，因此这似乎并不有效。因为，即使它在未来得到修复，旧浏览器可能仍然存在这个错误，只需**确保永远不要**在任何可能在 Chrome 上运行的代码上使用负 z-index 数字。

# serialization - 自定义 Json.NET 序列化以将空字符串视为 null

> ID：12738137
> 
> 赞同：0
> 
> 时间：2012-10-05T01:01:48.403
> 
> 标签：serialization, extjs, json.net

我这里有一个愚蠢的问题。我正在使用 ASP .NET MVC 4、EF5 和 Ext JS (Sencha) 开发一个 Web 应用程序。

问题是，按照设计（我不知道为什么），Ext JS 在执行 ajax 请求时会将具有空值的 js 对象转换为空字符串。

为了它，我将过度简化示例。

所以如果我在 JavaScript 中有一个变量

```
icon_id : null 
```

当我得到 JObject 服务器端时，它变成了

```
icon_id : "" 
```

`icon_id`当我作为请求的参数传递时。因此，当我编写时，`icon_id.ToObject<MyNETIconIDClass>()`我得到一个异常，它告诉我它不能从字符串转换为可为空的 int。这是可以理解的。

我可能误解了这背后的逻辑，但由于我不想弄乱 Ext JS 源代码，有什么办法可以告诉 Json.NET 反序列化器将空字符串视为 null ？

据我所见，使用转换器会很麻烦，因为我必须更改模型中每个类中的每个可为空的 int 属性才能使这项工作正常进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:00:10.503

根据评论，OP 发送的是 GET 请求而不是 POST。

# filter - 如何将 except() 用于控制器而不是控制器方法？

> ID：12738142
> 
> 赞同：2
> 
> 时间：2012-10-05T01:02:45.930
> 
> 标签：filter, laravel

我今天刚开始学习 Laravel 框架。

我想在全球范围内检查用户的会话。我在基类的构造函数中放置了一个过滤器，如下所示。

```
class Base_Controller extends Controller {

    public function __construct() {

        parent::__construct();

        $this->filter('before', 'auth')->except(array('login@index'));

    }

} 
```

它工作正常，除了有一个问题。我想忽略登录控制器的身份验证过滤器。我怎么做？

我试过

**except(array("login"))**，**except(array("login.index))**和**except(array("login@index"))**。他们都没有工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:16:37.177

`$this->filter()`在控制器中使用与在`routes.php`文件中使用不同的方法。当您在控制器中使用它时，`except()`将只接受该控制器的方法。

您可以解决您的问题，创建一个从`Base_Controller`类似`Base_Auth_Controller`检查 auth 过滤器的扩展的新控制器。如果您检测到控制器是“Auth”（提示：），您可能可以使用`Route::filter('before', function(){});`and ，但您不能绝对排除.`return;``Request::route()->controller``controller@action`

或执行以下操作：

```
public function __construct() {

    parent::__construct();

    // you should check what exactly returns, I don't remember actually
    if(Request::route()->controller != 'Auth_Controller')
    {
         $this->filter('before', 'auth')->except(array('login@index'));
    }

} 
```

# ios - DocumentMetada.plist 在 iCloud 中未完成

> ID：12738143
> 
> 赞同：3
> 
> 时间：2012-10-05T01:02:56.697
> 
> 标签：ios, icloud

我正在创建一个非常简单的 iOS 应用程序，它将有一个 UIManagedDocument 和一个我想通过 iCloud 同步的核心数据数据库。当我打开应用程序时，我设置了 NSMetaDataQuery 并获取 NSMetadataQueryDidFinishGatheringNotification 和 NSMetadataQueryDidUpdateNotification 的通知。当其中一个进入时，他们会调用一个方法来检查并查看 iCloud 文档目录中有多少文件。如果没有，则创建一个，其persistantStoreOptions在以下方法中设置

```
- (void)setPersistentStoreOptionsInDocument:(UIManagedDocument *)document
{
    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

    [options setObject:[document.fileURL lastPathComponent] forKey:NSPersistentStoreUbiquitousContentNameKey];
    [options setObject:[[self iCloudURL] URLByAppendingPathComponent:@"DataLogs"] forKey:NSPersistentStoreUbiquitousContentURLKey];

    document.persistentStoreOptions = options;
} 
```

该文件似乎已成功创建（我可以在 iCloud 文档查看器中看到它列出）但是，稍后当我打开该文件时，无论是重新启动应用程序还是在新设备上打开它，我都遇到了问题。

我创建了一个新的 UIManagedDocument，然后通过从 DocumentMetadata.plist 文件创建一个 NSDictionary 来创建它的 persistentStoreOptions。但是，当我查看字典中的内容时，只有 NSPersistentStoreUbiquitousContentNameKey 在那里。我正在使用的代码是：

```
NSMetadataItem *item = [self.iCloudQuery resultAtIndex:0];
NSURL *url = [item valueForAttribute:NSMetadataItemURLKey];
url = [self filePackageURLForCloudURL:url]; // gets top level filename
self.accountDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
NSURL *optionsURL = [self.accountDatabase.fileURL URLByAppendingPathComponent:@"DocumentMetadata.plist"];
NSDictionary *options = [NSDictionary dictionaryWithContentsOfURL:optionsURL];
self.accountDatabase.persistentStoreOptions = options;
[self useDocument:self.accountDatabase]; 
```

我是否缺少某些步骤来阻止persistentStoreOptions 中的其余项目上传到iCloud？

# c# - 如何将 net tcp 绑定合并到 web api 环境中？

> ID：12738146
> 
> 赞同：3
> 
> 时间：2012-10-05T01:03:07.150
> 
> 标签：c#, asp.net, json, tcp

我有一个用 c# 实现的 asp.net web api 应用程序。我正在使用一个运行良好的 ApiController。

控制器处理一个 JSON 对象（包装在 HTML 中）。

我知道想要实现完全相同的逻辑，但请求不会是 JSON 包装的 HTML 请求，而是 JSON 数据的原始 tcp 套接字请求。

实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:02:58.323

我决定使用 Microsoft 的异步套接字服务器示例。我主要关心的是可扩展性，但是当我到达它时我会跨越那座桥。

[https://docs.microsoft.com/en-us/dotnet/framework/network-programming/using-an-asynchronous-server-socket](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/using-an-asynchronous-server-socket)

# go - 为什么 filepath.Walk() 会恐慌？

> ID：12738149
> 
> 赞同：2
> 
> 时间：2012-10-05T01:03:50.983
> 
> 标签：go

我正在尝试为 go 编程语言编写 wiki。我已将数据放在`/data`文件夹中，并将`.html`文件放在`/tmpl`文件夹中。

我已经将`main`函数编码如下

```
func main() {
    walk := func(path string, info os.FileInfo, err error) error {
        if err == nil && !info.IsDir() && filepath.Ext(path) == ".html" {
            http.HandleFunc("/view/", makeHandler(viewHandler))
            http.HandleFunc("/edit/", makeHandler(editHandler))
            http.HandleFunc("/save/", makeHandler(saveHandler))
        }
        return err
    }
    root := TEMPLATE_PATH + "edit.html"
    err := filepath.Walk(root, walk)
    if err != nil {
        return
    }
} 
```

我越来越`panic edit.html not found`。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:45:18.623

从[filepath.Walk 的文档中，](http://golang.org/pkg/path/filepath/#Walk)您可以阅读：

> func Walk（根字符串，walkFn WalkFunc）错误
> 
> Walk 遍历以根为根的文件树，为树中的每个文件或目录调用 walkFn，包括根。访问文件和目录时出现的所有错误都由 walkFn 过滤。文件按词法顺序遍历，这使得输出具有确定性，但意味着对于非常大的目录，Walk 可能效率低下。

所以`Walk`期望一个目录作为第一个参数。你在里面放了一个文件，这让整个事情变得恐慌。

我不确定您要尝试做什么，但是如果您想打开该文件，请使用[`os.Open`](http://golang.org/pkg/os/#Open)或者`os.Stat`如果您想测试是否存在。

在 go 中编码时的一般提示：使用该`gofmt`命令根据[样式指南](http://golang.org/doc/effective_go.html#formatting)格式化您的代码。

# git - git在推送后切换哪个分支是主分支

> ID：12738151
> 
> 赞同：3
> 
> 时间：2012-10-05T01:04:24.593
> 
> 标签：git

我有一个其他人的 repo 的分支，并且像这样对我的 master 分支进行了一些更改，并推送到我的分支：

```
[upstream/master] --- C1 --- C2[origin/master] 
```

然后我决定我想要我的更改`C1`并`C2`成为分支的一部分`feature_branch1`，我希望我的`master`分支回到`upstream/master`：

```
[upstream/master === origin/master] --- C1 --- C2[origin/feature_branch1] 
```

我通过以下方式实现了这一目标：

```
git checkout C2
git branch -m feature_branch1
git checkout upstream/master
git branch -m master 
```

（不知道这是否是我打算这样做的方式）。

然后我在我的`master`分支上添加了一些额外的功能，如下所示：

```
 C1 --- C2 [origin/feature_branch1]
                                   / 
[upstream/master === origin/master]
                                   \ 
                                     C1' --- C2' [origin/feature_branch2] 
```

( `git checkout master; git checkout -b feature_branch2; <changes>; <commits>`)

现在我正在尝试推送到远程。我已经成功推送（ ） `feature_branch1`，但是当我尝试推送 master 时，我收到一个关于无法快进并丢失历史记录的错误。`feature_branch2``git push origin feature_branchX`

我有点明白这一点 - 我认为它不希望我输掉并`C1`回到分支点。但是我已经保存了，所以我不会失去它们。`C2``master``C1``C2``feature_branch1`

有什么办法可以实现上图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:08:42.373

在 a 之后`git checkout master`，您可以`git reset --hard origin/master`将分支重置为与远程 master 相同的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:15:38.770

如果您将`--force`标志添加到您的推送中，它应该会成功。

一旦推送，重写历史被认为是一件坏事，因为如果其他人克隆了您的 master 并提取了您要删除的提交，他们将遇到问题，因为他们的 refs 不再存在。

# java - Java Swing - 如何使用泛型在 Swing 组件上创建实用程序类

> ID：12738159
> 
> 赞同：3
> 
> 时间：2012-10-05T01:05:25.870
> 
> 标签：java, swing, generics, java-7

我有一个 Utils 类，这样：

```
public static void setComboBoxDefaultWidth(JComboBox cb)
{
    cb.setPrototypeDisplayValue("mmmmmmmmmmmmmmmmmmmmmmmmmm");
} 
```

问题是这会导致编译器警告：

**JComboBox 是一种原始类型。应该参数化对泛型类型 JComboBox 的引用**

我不确定如何参数化泛型，以便调用方法和函数都可以工作（没有编译器错误）。无论出于何种原因，我可以解决一个问题，但不能同时解决这两个问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T01:11:06.703

The fact is that `JComboBox` wasn't generic in Java6 but it became generic with 7 just because the design was flawed (since `getItemAt()` returned an Object type you had to manually cast it).

The method is declared as

```
public void setPrototypeDisplayValue(E prototypeDisplayValue) 
```

This means that, you must have a specific instance of a specific class to call it, and the type must correspond to the one declared for your combo box:

```
public void setComboBoxDefaultWidth(JComboBox<String> cb) {
  cb.setPrototypeDisplayValue("mmmmmmmmmmmmmmmmmmmmmmmmmm");
} 
```

You are forced to do it because you are passing a `String` to the method so the `JComboBox` must contain `String`s.

The above solution is what you need to do when the method that you want to invoke requires a parameter of the generics type. Otherwise you couldn't specify it (without narrwing how many the target) and you would have to use the wildcard `?` exists: if a method doesn't care about what is the specific type of the generic class you just need to specify that the `JComboBox` has a generic type without worrying about what the type is:

```
public static void setComboBoxDefaultWidth(JComboBox<?> cb) {
    cb.setLightWeightPopupEnabled(true);
} 
```

The syntax `<?>` just literally means *unknown type*, the parameter is indeed a `JComboBox` of unknown type items.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T07:27:26.577

原型显示值必须与键入 JComboBox 的类型相同。

给定 a ，只有知道类型`JComboBox<E>`才能调用该方法。`setPrototypeDisplayValue(E prototypeDisplayValue)`因此，不能使用通配符 (?)。目前，您所能做的就是拥有：

```
public static void setComboBoxDefaultWidth(JComboBox<String> cb) {
    cb.setPrototypeDisplayValue("mmmmmmmmmmmmmmmmmmmmmmmmmm");
} 
```

您可能拥有的另一个选择是：

```
public static <E> void setComboBoxDefaultWidth(JComboBox<E> cb, E prototypeValue) {
    cb.setPrototypeDisplayValue(prototypeValue);
} 
```

但这是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:10:50.183

If your `JComboBox`s always contains String, the syntax would be:

```
public static void setComboBoxDefaultWidth(JComboBox<String> cb)
{
    cb.setPrototypeDisplayValue("mmmmmmmmmmmmmmmmmmmmmmmmmm");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T04:27:12.803

如果您想为任何类型的 Generic 保留 JComboBox，则不能。

# python - 线程不工作我如何解决这个问题？

> ID：12738164
> 
> 赞同：-2
> 
> 时间：2012-10-05T01:07:00.687
> 
> 标签：python, sockets

当我想访问 int(COORDINATES [2](https://i.stack.imgur.com/kRGYC.png) ) 时，这不起作用。我该如何解决？我正在尝试访问现在已成为全球范围的 COODINATES

```
import socket
import os,sys
import time
from threading import Thread

HOST = '59.191.193.59'
PORT = 5555

COORDINATES = []

def connect():   
    globals()['client_socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

def update_coordinates():
    connect()
    screen_width = 0
    screen_height = 0
    while True:
        try:
            client_socket.send("loc\n")
            data = client_socket.recv(8192)
        except:
            connect();
            continue;

        globals()['COORDINATES'] = data.split()

        if(not(COORDINATES[-1] == "eom" and COORDINATES[0] == "start")):
            continue

        if (screen_width != int(COORDINATES[2])):
        screen_width = int(COORDINATES[2])
                screen_height = int(COORDINATES[3])   

Thread(target=update_coordinates).start()

while True:
    print 'ball x' , int(COORDINATES[2]) 
```

这是我得到的错误![在此处输入图像描述](../Images/82fbfc24c64fdec3dbff45dd2d4781d5.png) ![在此处输入图像描述](../Images/82fbfc24c64fdec3dbff45dd2d4781d5.png)

如果我将代码更改为：

```
 import socket
import os,sys
import time
from threading import Thread

HOST = '59.191.193.59'
PORT = 5555

COORDINATES = []

def connect():   
    globals()['client_socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

def update_coordinates():
    connect()
    screen_width = 0
    screen_height = 0
    while True:
        try:
            client_socket.send("loc\n")
            data = client_socket.recv(8192)
        except:
            connect();
            continue;

        globals()['COORDINATES'] = data.split()

        if(not(COORDINATES[-1] == "eom" and COORDINATES[0] == "start")):
            continue

        if (screen_width != int(COORDINATES[2])):
        screen_width = int(COORDINATES[2])
                screen_height = int(COORDINATES[3]) 

    print int(COORDINATES[8])  

Thread(target=update_coordinates).start() 
```

这就是我得到的：

![在此处输入图像描述](../Images/56b76dc8eef434012d4b6a44fae5db00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:28:47.973

这一行：

```
Thread(target=update_coordinates()).start() 
```

应该读：

```
Thread(target=update_coordinates).start() 
```

您提供了函数的结果作为目标的值，而不是提供函数本身。

# grid - Extjs 在与网格绑定的面板数据上自动滚动

> ID：12738165
> 
> 赞同：0
> 
> 时间：2012-10-05T01:07:03.747
> 
> 标签：grid, extjs4, scrollbar, panel

我正在实现一些很像这里的例子： [http ://docs.sencha.com/ext-js/4-0/#!/example/grid/binding-with-classes.html](http://docs.sencha.com/ext-js/4-0/#!/example/grid/binding-with-classes.html)

我想在我的详细信息面板上放置一个自动滚动，但通常的 autoScroll: 'true' 不起作用。我认为这是因为在面板呈现后正在加载需要滚动条的数据。那有意义吗？有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:38:15.527

弄清楚了。只需将其添加到 initComponent: 函数

```
 this.bodyStyle = {
            background: '#ffffff',
            overflow: 'auto'
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-19T13:41:30.807

```
scroll: true,
viewConfig: {
    style: {
        overflow: 'auto',
        overflowX: 'hidden'
    }
} 
```

试试上面的那个。

# javascript - 如何提交新 Google 帐户的申请？

> ID：12738167
> 
> 赞同：2
> 
> 时间：2012-10-05T01:07:51.980
> 
> 标签：javascript, python, html, urllib

我想制作一个命令行帐户制造商（在 python 中）。它会向您显示 ReCapatcha 的使用情况`PIL.Image.Image.show()`，并在您输入所有信息后将请求提交给 google。

我从来都不擅长 JavaScript 或 HTML，所以我无法在[accounts.google.com/SignUp](https://accounts.google.com/SignUp)页面上对代码进行左右设置。

我将提交请求的 url 是什么，它将是什么请求？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:17:37.443

The simple answer - you don't. There is no way around the bot-catcher. This is not the popular answer, but it is the only true one. Data for the ReCapatcha is stored on the server, not sent to the client (obviously; this is the whole point). I hate being that guy, but you don't need the url or the message because your task is impossible. Sorry.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:44:32.430

就像 Code Monkey 说的那样，使用您当前的方法是不可能实现这一点的。但是，可能还有另一种方式。与其让用户在查询站点之前填写数据，不如让您的程序表现得像一个普通的网络浏览器。

您可以使用[urllib.request](http://docs.python.org/release/3.2.3/library/urllib.request.html)模块打开帐户创建页面并下载原始 html。

```
from urllib.request import urlopen
html = urlopen("https://accounts.google.com/NewAccount").read().decode('utf-8') 
```

从那里，使用正则表达式选择 ReCAPTCHA 图像的 URL。

```
import re
token = re.search("accounts.google.com/Captcha\?ctoken=([^\"]+)", html).group(1)
url = "https://accounts.google.com/Captcha?ctoken=" + token 
```

然后，您可以从 URL 下载图像并将其显示给用户。

至于实际提交表单，我怀疑您需要使用用户提供的数据设置`data`参数`urlopen`并向另一个 URL 发出 POST 请求，但我尚未验证这一点。

我发现对这类东西非常有帮助的 Firefox 插件是[Tamper Data](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)。它可以让您准确地看到您的浏览器在做什么，包括显示 POST/GET 请求的样子、您正在访问的 URL 以及其他有用的信息。

或者：

*   使用[机械化](http://wwwsearch.sourceforge.net/mechanize/)库（[示例](https://stackoverflow.com/a/3516692/369977)）
*   只需打开一个 Web 浏览器窗口到注册页面，让您的用户按照 Google 的意图创建一个帐户。

我还应该补充一点，我不容忍通过创建大量帐户（出于垃圾邮件或其他目的）违反[Google 的 TOS 。](http://www.google.ca/intl/en/policies/terms/regional.html)谷歌提供了很棒的服务。请不要滥用它。

# c# - 通用列表性能优化

> ID：12738182
> 
> 赞同：4
> 
> 时间：2012-10-05T01:10:15.603
> 
> 标签：c#, linq, generics, optimization

我正在尝试优化通用列表算术运算。我有如下定义的 3 个可空双精度列表。

```
List<double?> list1 = new List<double?>();
List<double?> list2 = new List<double?>();
List<double?> listResult = new List<double?>();

int recordCount = list1.Count > list2.Count ? list2.Count : list1.Count;

for (int index = 0; index < recordCount; index++)
{
      double? result = list1[index] + list2[index];
      listResult.Add(result);
} 
```

如果我有大量列表，有什么方法可以让这个操作运行得更快？

感谢您的输入。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T01:20:15.437

> 如果我有大量列表，有什么方法可以让这个操作运行得更快？

您可以将结果列表创建移动到计数之后：

```
List<double?> list1 = new List<double?>();
List<double?> list2 = new List<double?>();

int recordCount = list1.Count > list2.Count ? list2.Count : list1.Count;
List<double?> listResult = new List<double?>(recordCount); 
```

这将使您可以指定结果所需的确切容量，并避免在列表本身内重新分配。对于“巨大的列表”，这可能是最慢的部分之一，因为随着列表变大，内存分配和复制将是这里最慢的操作。

此外，如果计算很简单，您可能会使用多个核心：

```
List<double?> list1 = new List<double?>();
List<double?> list2 = new List<double?>();

int recordCount = list1.Count > list2.Count ? list2.Count : list1.Count;

var results = new double?[recordCount]; // Use an array here

Parallel.For(0, recordCount, index => 
    {
        double? result = list1[index] + list2[index];
        results[index] = result;
    }); 
```

鉴于“工作”在这里非常简单，您实际上可能需要一个自定义分区器来充分利用并行性（有关详细信息，请参阅[如何：加速小型循环体](http://msdn.microsoft.com/en-us/library/vstudio/dd560853%28v=vs.100%29.aspx)）：

```
var results = new double?[recordCount]; // Use an array here
var rangePartitioner = Partitioner.Create(0, recordCount);

Parallel.ForEach(rangePartitioner, range => 
    {
        for (int index = range.Item1; index < range.Item2; index++)
        {
            results[index] = list1[index] + list2[index];
        }
    }); 
```

但是，如果这不是瓶颈，您可以使用 LINQ 单行执行此操作：

```
var results = list1.Zip(list2, (one, two) => one + two).ToList(); 
```

但是，如果性能确实是一个瓶颈，这将（非常轻微地）比自己处理循环效率低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:19:29.300

如果您提前知道列表的大小，那么简单数组*应该*运行得更快。像这样创建：

```
double?[] Array1 = new double?[10]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:22:32.707

您可以做的第一件事是指定结果列表的容量

```
List<double?> listResult = new List<double?>(recordCount); 
```

这将为每个 List.Add() 调用节省时间的结果预先分配空间。

如果您真的担心性能，您可以将列表分成块并启动多个线程来执行部分结果集，然后在完成后将完整集重新合并在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T01:24:19.993

```
var result = from i in
            Enumerable.Range(0, Math.Min(list1.Count, list2.Count))
            select list1.ElementAtOrDefault(i) + list2.ElementAtOrDefault(i);
foreach (var item in result)
{
Debug.Write(item.Value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T01:49:43.403

如果你有能力使用原始数组而不是列表，你当然可以让它更快 - 多少取决于你想要多低级。纠正了您源代码中的一些错误，我写了三个不同的版本。一种方法是通过为结果创建一个新列表（我冒昧地使用具有容量的构造函数，防止一堆中间分配），从而按照您的代码的方式进行。

我还编写了一个将两个数组相加为第三个的版本，认为剥离 List 会提高效率。

最后，我编写了一个使用不安全代码的版本，使用指针将第一个数组添加到第二个数组。

比较结果如下：

```
Timings: 500000 iterations of 10000-item lists
  Lists:           00:00:13.9184166
  Arrays (safe):   00:00:08.4868231
  Arrays (unsafe): 00:00:03.0901603

Press any key to continue... 
```

我使用的代码可以在[这个 Github gist](https://gist.github.com/3837601)中找到。

不安全的代码可能有点过于优化了，但是看到这三个示例之间的差异是相当惊人的。为了清楚起见，我建议坚持使用安全代码并使用数组。

# c# - 使用 MEF 创建工厂

> ID：12738183
> 
> 赞同：1
> 
> 时间：2012-10-05T01:10:34.663
> 
> 标签：c#, .net, mef

我基本上有一个类，它有一个工厂方法，它接受我们拥有的一种 Product 并返回一个专门能够处理该产品的 IProfileService 的实现。如果我想使用 MEF，以便我可以在另一个 DLL 中实现 IProfileService 的不同实现，只有在安装该特定产品时才会安装，什么是一个好方法？

我的第一个想法是使用 MetaData 的 ImportMany 来描述它处理的产品，然后在我的工厂方法中使用 LINQ 查询将传入的产品与 MetaData 进行比较。这听起来不错还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:55:01.993

我认为这种方法会很好用。我想不出其他更好的方法。

可以与这种方法一起使用的一种技术是延迟加载。请参阅[这篇](http://www.codeproject.com/Articles/376033/From-Zero-to-Proficient-with-MEF)关于 MEF 的精彩文章。通过`Lazy<T>`在您的导出中使用，您的 IProfileService 对象在您需要它们之前不会被创建。

# bash - 从Unix中的另一个目录在某个目录中创建一个文本文件

> ID：12738189
> 
> 赞同：0
> 
> 时间：2012-10-05T01:11:10.027
> 
> 标签：bash, unix

想知道如果您想从 unix 中的另一个目录在某个目录中创建文件，代码会是什么样子。

例子：

```
File to be created: pop.txt
Directory to create that in: /home/p1
Directory you are currently in and are to make it from: /home/pokemon/master/ 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:13:06.160

```
touch /home/p1/pop.txt 
```

就这么简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:48:40.583

你可以使用这种方式。因为 touch 只创建一个空文件。但这您也可以添加内容。

猫 > /home/p1/pop.txt

vim > /home/p1/pop.txt

cat 用于终端。vim 是一个编辑器。

否则你可以使用这种方式。

猫 > ../../p1/pop.txt

vim ../../p1/pop.txt

.. 表示反向引用或上一个目录。

# php - 在 PHP 中使用 target="_blank"

> ID：12738193
> 
> 赞同：-2
> 
> 时间：2012-10-05T01:11:46.343
> 
> 标签：php, html, target

我已经搜索了几个小时，但我似乎无法弄清楚如何将 target="_blank" 属性包含到这个 php 的 'href' => 部分而不破坏它。

这是代码：

```
'chat' => array(
            'title' => 'Chat',
            'href' => 'http://mywebsite.com/',
            'show' => true,
            'sub_buttons' => array(
            ),
        ), 
```

是否可以在此代码中使用该目标属性？

这是来自 SMF 论坛中使用的 Subs.php 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:14:24.507

好吧，您可以尝试附加`" target="_blank`到该`href`值，但如果这样可行，那么您手头就有一个严重的问题（该值应该被转义）。

在这种情况下，最好扩展将这个数组转换为 HTML 的任何方法，这`target`也是一个可接受的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:20:30.067

是的@sachleen 是正确的。您刚刚提供了一个数组。将有一些函数/方法来创建 url。要么添加一个具有属性的额外选项数组，然后像这样构建它。

我从 Aura.View 助手复制的示例

[https://github.com/auraphp/Aura.View#using-helpers](https://github.com/auraphp/Aura.View#using-helpers)

`$this->anchor($href, $text)`返回一个`<a href="$href">$text</a>`标签

这是在代码的帮助下实现的

```
class Anchor extends AbstractHelper
{
    public function __invoke($href, $text, $attribs = [])
    {
        // build text and return
        if ($attribs) {
            $skip = ['href'];
            $attr = $this->attribs($attribs, $skip);
            return "<a href=\"$href\" $attr>$text</a>";
        } else {
            return "<a href=\"$href\">$text</a>";
        }
    }
} 
```

[https://github.com/auraphp/Aura.View/blob/master/src/Aura/View/Helper/Anchor.php](https://github.com/auraphp/Aura.View/blob/master/src/Aura/View/Helper/Anchor.php)

希望有帮助。

# c# - WebDeploy different parts of one project to multiple websites

> ID：12738197
> 
> 赞同：0
> 
> 时间：2012-10-05T01:12:48.780
> 
> 标签：c#, asp.net-mvc, deployment, iis-7.5, webdeploy

Given an ASP.NET webapp that is already deployed using WebDeploy to its live server, how can I also deploy a subset of that application to another server?

eg

*   Entire webapp / all files including static files-> web deploy to domain.com
*   Static files only (js,images,css) -> web deploy to static.com

This is for the purpose of creating a separate cookieless site for static content only.

Is it possible with just one publish profile? Or do I need to create two publish profiles?

And is it even possible to create a publish profile that only deploys the static part of the webapp (everything in the ~/Content directory)?

Both target servers are II7.5 running on Windows 2008 64bit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:53:05.643

您可以使用两个发布配置文件来做到这一点。这将涉及跳过（[如果从 Visual Studio 中执行部署，则需要注意](https://stackoverflow.com/questions/12576662/msdeploy-skip-rules-when-using-msbuild-publishprofile-with-visual-studio-2012)）每个配置文件的适当内容。

但是，我建议对您的应用程序服务器进行完整部署，然后使用`runCommand`提供程序执行批处理文件。

为此，您可以在发布配置文件中定义以下内容：

```
<ItemGroup>
    <AfterAddIisSettingAndFileContentsToSourceManifest>
        $(AfterAddIisSettingAndFileContentsToSourceManifest);
        AddContentDeploymentToSourceManifest;
    </AfterAddIisSettingAndFileContentsToSourceManifest>
</ItemGroup>

<Target Name="AddContentDeploymentToSourceManifest">
    <ItemGroup>
        <MsDeploySourceManifest Include="runCommand">
            <Path>$(MSBuildProjectDirectory)\deployContent.bat</Path>
        </MsDeploySourceManifest>
    </ItemGroup>
</Target> 
```

然后，在 deployContent.bat 中：

```
REM Detect MSDeploy location (stolen from VS generated CMD)
if "%MSDeployPath%" == "" (
for /F "usebackq tokens=1,2,*" %%h  in (`reg query "HKLM\SOFTWARE\Microsoft\IIS Extensions\MSDeploy" /s  ^| findstr -i "InstallPath"`) do (
if /I "%%h" == "InstallPath" ( 
if /I "%%i" == "REG_SZ" ( 
if not "%%j" == "" ( 
if "%%~dpj" == "%%j" ( 
set MSDeployPath=%%j
))))))

"%MSDeployPath%mdeploy.exe" -verb:sync ^
    -source:iisApp="application site name" 
    -dest:iisApp="static content site name",computerName=http://contentserver:8192/msdeploy.axd
    -skip:File=^.*(?<!png|jpg|jpeg|css|js)$ 
```

...它将站点从应用程序服务器部署到内容服务器，跳过任何没有预定义的静态内容扩展列表之一的内容。

（仅供参考：[不要尝试将参数发送到您的批处理文件，除非它已经存在于服务器上](https://stackoverflow.com/questions/12672893/pass-parameters-to-batch-file-in-msdeploy-runcommand)）

# php - Nginx is returning 404 when setting a variable

> ID：12738203
> 
> 赞同：1
> 
> 时间：2012-10-05T01:14:26.010
> 
> 标签：php, drupal, nginx

I'm using Nginx to serve a Drupal site and with Boost.

So far it's been working fine, but recently we added a mobile version and i configured boost/drupal to cache the mobile version in another directory, however i'm triying to configure Nginx to check for the adecuate directory if the device is mobile, but i'm getting 404 for some pages, and others never ever hit the cached files.
I've a location @cache with something like this:

```
set $mobile_rewrite desktop;
if ($http_user_agent ~ (iPhone|Android) ) {
    set $mobile_rewrite mobile;
}
try_files /cache/normal/$mobile_rewrite/$host${uri}_$args.html /cache/$host${uri}_$args.html @drupal; 
```

When hitting the frontpage with a mobile user agent, i get served the mobile version, but every time it recreates it (so it goes to the @drupal location), and if i try to navigate further in the site (with mobile user agent) i get a 404 error

Any ideas?

I solved it using custom error and different locations.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:50:03.067

我终于解决了这个问题，为此，我改变了方法，而不是尝试使用变量更改 try_files 指令，我这样做了：

设置“地图”来检查用户代理并确定是否移动：

```
#Inside my http block
map $http_user_agent $is_desktop {
  default 0;
  ~*linux.*android|windows\s+(?:ce|phone) 0; # exceptions to the rule
  ~*spider|crawl|slurp|bot 1; # bots
  ~*windows|linux|os\s+x\s*[\d\._]+|solaris|bsd 1; # OSes
}
map $is_desktop $mobile_device {
  1 0;
  0 1;
} 
```

然后在我的服务器块中，在默认 / 位置：

```
error_page 418 = @mobile; #defined a new error page pointing to a @location  
    if ($mobile_device) { #checking for above variable/map if true, goes to @location defined in error
           return 418;
    } 
```

这个新位置与我之前的@cache 完全相同，但指向另一个目录。
希望它可以帮助别人！

# sitemap - 制作站点地图的工具

> ID：12738206
> 
> 赞同：0
> 
> 时间：2012-10-05T01:14:56.180
> 
> 标签：sitemap, diagram

你喜欢用什么工具（Windows 或 Mac）来制作网站地图（类似这样的东西 - 没有颜色）[http://www.avermedia.com/AVerTV/Upload/SpecialPagePic/sitemap.gif](http://www.avermedia.com/AVerTV/Upload/SpecialPagePic/sitemap.gif)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:33:35.090

您可以尝试免费的图表工具“ [yEd](http://www.yworks.com/yed) ”，它恰好可以在 Windows 和 Mac（以及 Linux，因为它基于 Java 的性质）上工作。从图表的树结构（页面层次结构）开始，让工具自动为您布局该部分。然后添加“交叉引用”页面之间的链接并且不遵循您网站的层次结构，选择它们并在所选边缘上运行边缘路由算法（“正交边缘路由器”）。使用不同的布局算法及其设置来找到适合您需求的图片。最后，您可以将图形导出为位图，甚至是 SVG 图形或交互式 Flash 图形，以包含在您的网站中。

# error-handling - Handling 500 / Maximum request length exceeded in an API client friendly way

> ID：12738208
> 
> 赞同：1
> 
> 时间：2012-10-05T01:15:26.600
> 
> 标签：error-handling, asp.net-web-api

I'm working on an ASP.NET hosted WebAPI endpoint for uploading files (multipart form-data). The expected files are going to be small so I'm going to leave the default max request size in place (4MB). When the request size is violated, by default the framework wants to return an HTML centric response. I'd like to return something more API client friendly.

Because of the way IIS and the ASP.NET pipeline works, request size violations do not appear to be handled by anything in the WebAPI pipeline such as MessageHandlers. Therefore, I've resorted to catching the error in the Global.asax.cs and redirecting to a controller which creates an API client friendly response.

```
protected void Application_Error()
{
    if (exception.Message.ToUpper().Contains("MAXIMUM REQUEST LENGTH"))
    {
        Server.ClearError();
        Response.Redirect("~/errors/500?message=" + exception.Message);
    }
}

public class ErrorsController : ApiController
{
   public HttpResponseMessage Get(int id, string message)
   {
      return Request.CreateResponse((HttpStatusCode)id, message);
   }
} 
```

Is there a better way to do this? I'd love to be able to handle this sort of thing without issuing a 302 redirect.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:18:26.300

我到处寻找从 Application_Error 调用 API 控制器的方法，但找不到解决方案。

我得到的最接近的是下面。

但是，此代码会导致 System.Web.Http.DLL 中出现“System.NullReferenceException”。

我相信这是因为 HttpRequestMessage 不完整......它的 Headers 和 Properties 为空，但我不确定需要在那里做什么才能使其工作：

```
protected void Application_Error(object sender, EventArgs e){

        // Other code omitted for brevity

        Exception exception = Server.GetLastError();

        // Set the RouteData to point to the desired controller and action to invoke
        IHttpRouteData routeData = new HttpRouteData(new HttpRoute());
        routeData.Values.Add("controller", "Error");
        routeData.Values.Add("action", "Get");
        routeData.Values.Add("id", "500");
        routeData.Values.Add("message", exception.Message);

        // Avoid IIS7 returning its own stock error pages
        Response.TrySkipIisCustomErrors = true;

        // Call target Controller and pass the routeData.
        System.Web.Http.Controllers.IHttpController errorController = new ErrorController();
        var request = new HttpRequestMessage
        {
            Method = HttpMethod.Get,
            RequestUri = new Uri(Request.Url.AbsoluteUri),
        };

        errorController.ExecuteAsync(
            new HttpControllerContext(GlobalConfiguration.Configuration, routeData, request),
            CancellationToken.None
        ); 
```

TrySkipIisCustomErrors 参考：[http ://www.west-wind.com/weblog/posts/2009/Apr/29/IIS-7-Error-Pages-taking-over-500-Errors](http://www.west-wind.com/weblog/posts/2009/Apr/29/IIS-7-Error-Pages-taking-over-500-Errors)

# java - Sort HashMap with duplicate values

> ID：12738216
> 
> 赞同：4
> 
> 时间：2012-10-05T01:16:56.767
> 
> 标签：java, sorting, hashmap

Hi I am using following code to sort my HashMap, it sorts the map correctly but does not count the repeated values,

```
Map<String, Integer> mymap = new HashMap<String, Integer>();
mymap.put("item1", 5);
mymap.put("item2", 1);
mymap.put("item3", 7);
mymap.put("item4", 1);

Map<String, Integer> tempMap = new HashMap<String, Integer>();
for (String wsState : mymap.keySet()) {
    tempMap.put(wsState, mymap.get(wsState));
}

List<String> mapKeys = new ArrayList<String>(tempMap.keySet());
List<Integer> mapValues = new ArrayList<Integer>(tempMap.values());
HashMap<String, Integer> sortedMap = new LinkedHashMap<String, Integer>();
TreeSet<Integer> sortedSet = new TreeSet<Integer>(mapValues);
Object[] sortedArray = sortedSet.toArray();
int size = sortedArray.length;
for (int i = 0; i < size; i++) {
    sortedMap.put(mapKeys.get(mapValues.indexOf(sortedArray[i])),
            (Integer) sortedArray[i]);
}
for (Map.Entry<String, Integer> entry : mymap.entrySet())
    System.out.println("Item is:" + entry.getKey() + " with value:"
            + entry.getValue());

System.out.println("***");

for (Map.Entry<String, Integer> entry : sortedMap.entrySet())
    System.out.println("Item is:" + entry.getKey() + " with value:"
            + entry.getValue()); 
```

Result is as following (the item 4 is not shown because its value is same as item2's !!!) :

```
Item is:item4 with value:1
Item is:item2 with value:1
Item is:item3 with value:7
Item is:item1 with value:5
***
Item is:item2 with value:1
Item is:item1 with value:5
Item is:item3 with value:7 
```

It is a HashMap and need to be sorted by value. **Expected output is :**

```
Item is:item3 with value:7
Item is:item1 with value:5
Item is:item2 with value:1
Item is:item4 with value:1 
```

OR

```
Item is:item2 with value:1
Item is:item4 with value:1
Item is:item1 with value:5
Item is:item3 with value:7 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T01:18:54.030

You are using `TreeSet<Integer> sortedSet`

SETS by definition will not allow duplicates.

Here is an example that is Sorting by Value like you expect without losing any of the Entries.

```
import java.util.*;

public class Test {

public static Map<String, Integer> sortByValueDesc(Map<String, Integer> map) {
    List<Map.Entry<String, Integer>> list = new LinkedList(map.entrySet());
    Collections.sort(list, new Comparator<Map.Entry<String, Integer>>() {
        @Override
        public int compare(Map.Entry<String, Integer> o1, Map.Entry<String, Integer> o2) {
            return o2.getValue().compareTo(o1.getValue());
        }
    });

    Map<String, Integer> result = new LinkedHashMap<>();
    for (Map.Entry<String, Integer> entry : list) {
        result.put(entry.getKey(), entry.getValue());
    }
    return result;
}

    public static void main(String[] args) {

        HashMap<String, Integer> map = new HashMap<String, Integer>();

        map.put("item1", 1);
        map.put("item2", 2);
        map.put("item3", 1);
        map.put("item4", 7);
        map.put("item5", 3);
        map.put("item6", 4);

        for (Map.Entry<String, Integer> entry : map.entrySet()) {
            System.out.println("Item is:" + entry.getKey() + " with value:"
                    + entry.getValue());
        }

        System.out.println("*******");

        Map<String,Integer> sortedMap = sortByValueDesc(map);

        for (Map.Entry<String, Integer> entry : sortedMap.entrySet()) {
            System.out.println("Item is:" + entry.getKey() + " with value:"
                    + entry.getValue());
        }

    }

} 
```

The result I am Getting is (Now That I check you want greater values to be first):

```
Item is:item4 with value:7
Item is:item2 with value:2
Item is:item3 with value:1
Item is:item1 with value:1
Item is:item6 with value:4
Item is:item5 with value:3
*******
Item is:item4 with value:7
Item is:item6 with value:4
Item is:item5 with value:3
Item is:item2 with value:2
Item is:item3 with value:1
Item is:item1 with value:1 
```

For why you are losing one element here is your problem:

```
//HERE YOU ARE GETTING ALL THE VALUES
List<Integer> mapValues = new ArrayList<Integer>(tempMap.values());
HashMap<String, Integer> sortedMap = new LinkedHashMap<String, Integer>();

//YOU ARE INSERTING THE VALUES TO A TreeSet WHICH WILL REMOVE DUPLICATES
TreeSet<Integer> sortedSet = new TreeSet<Integer>(mapValues); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:24:38.410

我相信你需要treeMap。它不允许重复，并将可比较作为键。如果具有可比性，则根据 compareTo() 进行排序，否则在构造函数中询问比较器。地图不允许重复

```
 Map<String,Integer> mymap = new TreeMap<String,Integer>();
    mymap.put("item1", 5);
    mymap.put("item2", 1);
    mymap.put("item3", 7);
    mymap.put("item4", 1);

for(Map.Entry<String, Integer> entry: mymap.entrySet())
            System.out.println("Item is:" + entry.getKey() + " with value:" + 
                    entry.getValue()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:24:56.907

```
public static void main(String[] args) {
    Set<Item> s = new TreeSet<Item>();
    s.add(new Item("item1", 5));
    s.add(new Item("item2", 1));
    s.add(new Item("item3", 7));
    s.add(new Item("item4", 1));

    for (Item it : s) {
        System.out.println("Item is:" + it.getName() + " with value:"
                + it.getValue());
    }

}

class Item implements Comparable<Item> {
    private Integer value;
    private String name;

    Item(String name, int val) {
        this.name = name;
        this.value = val;
    }

    // getters and sets

    public boolean equals(Object obj) {
        if (obj == null)
            return false;
        if (obj == this)
            return true;
        if (obj.getClass() != getClass())
            return false;

        Item i = (Item) obj;
        if (i.getValue().equals(getValue())
                && i.getName().equals(getName()))
            return true;
        return false;

    }

    public int compareTo(Item o) {
        return getValue().compareTo(o.getValue());
    }

    public boolean equals(Object o) {
        return false;
    }
} 
```

# tuples - Why use tuples?

> ID：12738217
> 
> 赞同：0
> 
> 时间：2012-10-05T01:17:02.310
> 
> 标签：tuples

> **Possible Duplicate:**
> [Why use tuples instead of objects?](https://stackoverflow.com/questions/675237/why-use-tuples-instead-of-objects)

Suppose you are using a programming language that allows you to return multiple values from functions, e.g., `x, y = f(a, b)`.

It seems to me like using a struct/object that has named attributes is generally better than using a tuple, for readability. For example, I think `p.x` is more readable than `p[0]`.

A common use of tuples is for key-value pairs in associative arrays. But to me, `x.key` and `x.value` seems more clear than `x[0]` and `x[1]`.

Is the reason for tuples instead of named types just convenience? This makes me think the syntactic overhead for declaring new types is too high in most programming languages.

# mysql - How to group mysql inner join results from rows into columns

> ID：12738220
> 
> 赞同：10
> 
> 时间：2012-10-05T01:17:30.703
> 
> 标签：mysql, group-by, concat

Maybe my question isn't so clear, please let me explain: What I need is to get a list of all users along with a corresponding client number/wholesaler combination, every client has 1 up to 4 different client number/wholesaler combo

In my db I have 2 tables

```
USERS
id | name
---------
1  | a
2  | b

CLIENT_NUMBERS
id | user_id | number | wholesaler
----------------------------------
1  | 1       | ac1    | aw1
2  | 1       | ac2    | aw2
3  | 2       | bc1    | bw1 
```

Using a simple INNER JOIN I got client rows duplicated, one for each corresponding client number/wholesaler

I've managed to fix the results using GROUP_CONCAT in this query:

```
SELECT a.id AS user_id, a.name AS Name 
GROUP_CONCAT(b.client_no, ', ', b.wholesaler SEPARATOR '; ') AS client_no_wholesaler 
FROM users AS a 
INNER JOIN client_numbers AS b ON a.id = b.user_id 
GROUP BY ID

user_id | name | client_no_wholesaler
--------------------------------------------
1       | a    |  ac1, aw1; ac2, aw2 
2       | b    |  bc1, bw1 
```

So far so good, but I need to "explode" the client number/wholesaler combination into different columns so my results can look like this:

```
user_id | name | client_no_wholesaler1 | client_no_wholesaler2 | ...up to 4
----------------------------------------------------------------------------
1       | a    |  ac1, aw1             | ac2, aw2              |
2       | b    |  bc1, bw1             |                       | 
```

Doing this after getting the query results with a simple PHP explode is not an option because I'm using a class to generate a XLS file and its based on my query result columns, any ideas will be appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:39:04.780

您想要的通常称为“[枢轴](http://en.wikipedia.org/wiki/Pivot_table)”。

以下是您如何在 sql 中使用每个额外列的额外连接对其进行编码：

```
SELECT
    a.id AS user_id,
    a.name AS Name,
    CONCAT(b1.client_no, ', ', b1.wholesaler) AS client_no_wholesaler1,
    CONCAT(b2.client_no, ', ', b2.wholesaler) AS client_no_wholesaler2,
    CONCAT(b3.client_no, ', ', b3.wholesaler) AS client_no_wholesaler3,
    CONCAT(b4.client_no, ', ', b4.wholesaler) AS client_no_wholesaler4
FROM users AS a
JOIN client_numbers AS b1 ON b1.user_id = a.id
LEFT JOIN client_numbers AS b2 ON b2.user_id = a.id and b2.id > b1.id
LEFT JOIN client_numbers AS b3 ON b3.user_id = a.id and b3.id > b2.id
LEFT JOIN client_numbers AS b4 ON b4.user_id = a.id and b4.id > b3.id
GROUP BY 1, 2 
```

请注意，额外连接通过在`ON`额外连接的子句中添加不断增加的 id 条件来避免重复连接。如果 id 不是合适的排序列，请选择其他东西来分隔连接。

# php - 如何将两个imagelink放在yii框架网格的一列中？

> ID：12738230
> 
> 赞同：2
> 
> 时间：2012-10-05T01:19:08.363
> 
> 标签：php, yii

这是我目前拥有的：

```
$columns[] = array(
  'header' => 'Share',
  'type'   => 'html',
  'value'  => "CHtml::link(CHtml::image('http://www.mysite.com/images/icons/fb.jpg'),'#',array())",
); 
```

我想要发生的是，添加 twitter 分享按钮，就在那个 fb 按钮旁边。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:04:45.647

您可以使用 a[`CButtonColumn`](http://www.yiiframework.com/doc/api/1.1/CButtonColumn "http://www.yiiframework.com/doc/api/1.1/CButtonColumn")代替：

```
array(
    'class'=>'CButtonColumn',
    'header'=>'Share',
    'template'=>'{fbButton}{twButton}',
    'buttons'=>array(
        'fbButton'=>array(
            'imageUrl'=>Yii::app()->baseUrl.'/images/icons/facebook-circle.png',
            'url'=>'"http://www.facebook.com"'
        ),
        'twButton'=>array(
            'imageUrl'=>Yii::app()->baseUrl.'/images/icons/twitter-circle.png',
            'url'=>'"http://www.twitter.com"'
        )
    )
), 
```

当然，[`template`](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#template-detail "http://www.yiiframework.com/doc/api/1.1/CButtonColumn#template-detail")决定要在列中显示的按钮，并[`buttons`](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail "http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail")描述每个按钮的配置。所以一般我们指定：

```
'template'=>'{buttonId1}{buttonId2}',
'buttons'=>array(
    'buttonsId1'=>array(/*buttonid1 configuration*/),
    'buttonsId2'=>array(/*buttonid2 configuration*/),
) 
```

对于每个按钮的配置，我们可以指定`label`, `url`, `imageUrl`, `options`, `click`, `visible`，这已经在文档链接中给出`buttons`。使用`click`我们可以指定单击按钮时要调用的 js 函数。

# groovy - 如何检查包含文件的目录是否存在？

> ID：12738245
> 
> 赞同：61
> 
> 时间：2012-10-05T01:22:27.800
> 
> 标签：groovy

我正在使用`groovy`创建一个像`"../A/B/file.txt"`. 为此，我创建了 a`service`并将`file path`要创建的`argument`. 然后，该服务由`Job`. 将`Job`执行在指定目录中创建文件的逻辑。我手动创建了“A”目录。

如何通过代码自动创建“B”目录和“A”目录内的file.txt？

我还需要在创建文件之前检查目录“B”和“A”是否存在。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-05T08:31:22.610

要检查文件夹是否存在，您可以简单地使用以下`exists()`方法：

```
// Create a File object representing the folder 'A/B'
def folder = new File( 'A/B' )

// If it doesn't exist
if( !folder.exists() ) {
  // Create all folders up-to and including B
  folder.mkdirs()
}

// Then, write to file.txt inside B
new File( folder, 'file.txt' ).withWriterAppend { w ->
  w << "Some text\n"
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T01:25:30.157

编辑：从 Java8 开始，你最好使用[`Files`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createDirectories(java.nio.file.Path,%20java.nio.file.attribute.FileAttribute...))类：

```
Path resultingPath = Files.createDirectories('A/B'); 
```

我不知道这是否最终解决了您的问题，但类`File`具有[`mkdirs()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)完全创建文件指定路径的方法。

```
File f = new File("/A/B/");
f.mkdirs(); 
```

# javascript - 使用 jQuery 编写垂直菜单

> ID：12738249
> 
> 赞同：0
> 
> 时间：2012-10-05T01:22:38.893
> 
> 标签：javascript, jquery, css

我在这里开始了一个垂直菜单：http: [//jsfiddle.net/1___/bjXp2/1/](http://jsfiddle.net/1___/bjXp2/1/)

我有几个问题：

1）我如何让'onmouseover'只显示属于我鼠标悬停的.title的.myList，而不是所有.myLists？

2) 对于 .myLists，我想根据它们的大小居中对齐它们。含义：我将鼠标悬停在 .title 上，然后出现一个 .myList。然而，对于大的 .myLists 或小的 .myLists，它们都在我的光标上方和下方显示相同数量的子项。

谢谢！我觉得我在这个菜单上取得了很大的进步。--还有其他jquery垂直菜单的好例子吗？

**编辑**对不起，我可能混淆了一些。我不是在寻找手风琴菜单，而是在寻找像 Ulan Murzatayev 建议的东西。..现在的问题是：我如何处理鼠标移出事件/将 .myList 定位到右侧，以免鼠标移出过早发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:47:14.710

希望这是你想要的：http: [//jsfiddle.net/bjXp2/44/](http://jsfiddle.net/bjXp2/44/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:35:12.903

像这样的东西？

[http://jsfiddle.net/bjXp2/27/](http://jsfiddle.net/bjXp2/27/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:40:25.343

那里有很多可用的示例。您需要做的只是做一个快速的谷歌搜索。

无论如何，这里有一些您可能会发现有用的示例的链接。
[示例 1](http://www.w3csolutions.com/website-resources/category/Vertical-Menu/jQuery-Menu/)
[示例 2](http://www.queness.com/community-news/11376/15-jquery-vertical-menu-examples)

如果您对垂直手风琴菜单样式感兴趣，请查看以下链接
[jQuery Simple Vertical Accordion Menu](http://www.designchemical.com/blog/index.php/jquery/jquery-simple-vertical-accordion-menu/)

# objective-c - 如何在 Objective-C 中实现这一点？为没有 API 的网络应用程序开发应用程序，我如何登录用户？

> ID：12738250
> 
> 赞同：-1
> 
> 时间：2012-10-05T01:22:39.190
> 
> 标签：objective-c, c, screen-scraping

我想为没有 API 的网站开发 iOS 应用程序。用户可以登录本网站查看信息、下载文件。我的应用程序将只是该网站的原生移动界面，从网站下载数据并在应用程序中以原生方式很好地显示它。

因此，该应用程序必须满足以下条件：

1.  能够下载网页数据
2.  能够分析网页数据并从源代码中提取相关信息
3.  能够让用户登录网站并将他们的会话数据存储在应用程序中

有谁知道我怎么能做到这一点，特别是＃3？非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:28:46.557

如果您有权访问服务器代码，您应该编写一个 API 以允许您的应用访问它需要的内容。如果您不这样做，那么将用户信息管理到您无权访问的站点似乎有点阴暗。

# python-2.7 - Python 套接字问题

> ID：12738253
> 
> 赞同：1
> 
> 时间：2012-10-05T01:23:02.077
> 
> 标签：python-2.7

也许我不了解套接字应该如何工作，所以也许有人可以帮助我。我认为以下内容会永远循环打印“Sent Hello. Received: Hello to you!”，但实际上它循环了两次然后挂起。没有超时，对等方重置连接等。只是挂起。

```
import socket

socket_list = []
for i in range(60000, 60002):
    soc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    soc.connect("",i)
    socket_list.append(soc)

while True:
   for soc in socket_list:
        soc.sendall("Hello.")
        msg = soc.recv(1024)
        print "Sent Hello. Received:",msg 
```

连接另一端的代码很简单：

```
import socket
soc = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
soc.bind("localhost",6000x)
while True:
   soc.listen(1)
   conn, addr = soc.accept()
   msg = conn.recv(1024)
   if msg == "Hello":
       conn.sendall("Hello to you!") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:35:14.633

```
for i in range(60000, 60002):
    soc.connect("",i) 
```

在客户端程序中，您在启动时打开两个套接字，然后在程序的整个生命周期中使用这些套接字。

```
while True:
   conn, addr = soc.accept() 
```

在服务器程序中，您`accept()`在主循环的每次迭代中重复一个新连接。这成功地接受了每个端口上的第一个连接，执行一个接收/发送周期，然后重新开始并尝试接受新连接，而不是继续使用现有的套接字。

其中一个程序需要更改。您的客户端程序需要在其 while 循环内调用`socket()`和调用`connect()`，或者您的服务器程序需要将其`listen()`和`accept()`调用移出其 while 循环。

# regex - 除非引用，否则删除行尾注释

> ID：12738254
> 
> 赞同：2
> 
> 时间：2012-10-05T01:23:05.017
> 
> 标签：regex, perl, comments

我需要一个 Perl 正则表达式来删除行尾注释。我觉得我已经用谷歌搜索了这个，但找不到合适的东西。以下是详细信息：

EOL 注释使用井号 (#) 表示

可以使用竖线 (|) 引用任何内容

所以下面有评论：

```
foo bar #baz 
```

但以下没有：

```
foo |quoted###with bars| 
```

下面有一个注释和一个包含注释字符的引用：

```
foo |quoted###with bars| #comment here 
```

我尝试的第一件事是`s/#(?=[^|]*$).*$//`，不幸的是它删除了引用的英镑。下一个不起作用的是`/#(?=[^|]*$).*$//`，因为它在多行引号上失败，如下所示：

```
foo |quote begins here ##still going
        ##and it's still going| #this is a quote, though. 
```

我觉得我可以从[perlfaq6](http://perldoc.perl.org/perlfaq6.html#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file?)中的 C/C++ 注释的正则表达式中收集到一些东西，但是对于我来说只获取我需要的东西（不需要多行注释；）太复杂了。

任何人都可以提供一个删除 EOL 评论但忽略引用的评论字符的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:30:32.173

一种方法：

> `s/(\|[^|]*\|)|#.*/$1||''/eg`

这将`|...|`（包括`|...#...|`）替换为自身，并且`#...`什么都没有。

# html - 我如何浮动父母和孩子，同时让孩子排成一行？

> ID：12738256
> 
> 赞同：3
> 
> 时间：2012-10-05T01:23:31.293
> 
> 标签：html, css, css-float

如何用边框（父级）包裹未知大小（子级）的浮动 div，同时将子级保持在同一行。

问题是，除非父 div 设置为 ，否则`width: 100%;`孩子往往会在另一个下方折叠。

![在此处输入图像描述](../Images/ee4f7f452a67551c9b0d3fa26f9be117.png)

更新：在发布代码时，我想通了，请参阅[jsfiddle](http://jsfiddle.net/26Wwq/)。

我的代码在孩子周围有额外的`<div>`包装。我要么必须删除它们，要么将它们设置为`display: inline;`.

```
<div class="body">
    <div class="parent">
        <div>
            <div class="child"></div>
        </div>
        <div>
            <div class="child"></div>
        </div>
        <div>
            <div class="child"></div>
        </div>
    </div>
</div>​ 
```

感谢其他伟大的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:39:22.777

如果您不将子 div 更改为`display: inline`or `display: inline-block`，它们将垂直堆叠。如果孩子是`float`ed ，他们的大小不会推动父母的界限。如果使用`display: inline`or `display: inline-block`，只要父级的宽度足以容纳所有子级，子级就会内联，并且它们会拉伸父级。

小提琴：http: [//jsfiddle.net/MPCsD/1/](http://jsfiddle.net/MPCsD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:37:13.787

我认为您必须至少将孩子或父母的宽度设置为固定。也许你可以用 java 脚本来测量它们。

# youtube-api - 如何通过 YouTube API 检索我自己的私人播放列表？

> ID：12738262
> 
> 赞同：5
> 
> 时间：2012-10-05T01:24:37.817
> 
> 标签：youtube-api

我正在尝试找到一种方法来从 YouTube 检索我自己的私人播放列表，以便在我自己的个人网站上显示。到目前为止，所有文档似乎都说检索私人用户数据（如私人播放列表）需要您网站的*用户*通过身份验证过程才能提供*自己的*身份验证。

就我而言，我不希望我的*用户*进行身份验证，我希望我的*网站*在每次访问 Youtube Data API 时都对*我自己的帐户进行身份验证，以便检索**我自己的*私人播放列表。

那可能吗？我认为如果我可以为自己的帐户保存身份验证令牌可能是可行的，但显然令牌[更改](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Refreshing_a_Token)了？我应该为自己的帐户获取初始授权令牌的最合适方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:16:12.477

您可以通过 OAuth 2 for Installed Applications 流程一次，然后生成并保存刷新令牌。然后，您的服务器端代码可以在需要代表您进行 API 调用时使用刷新令牌来获取有效的访问令牌。如果您正确编码，这可能对您网站的访问者完全隐藏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-15T05:34:16.830

```
Credential credential = getCredentials();
    youTube = new YouTube.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).setApplicationName("Playlist Web App").build();         
    YouTube.Playlists.List  searchList = youTube.playlists().list("id,snippet,contentDetails");     
    searchList.setFields("etag,eventId,items(contentDetails,etag,id,kind,player,snippet,status),kind,nextPageToken,pageInfo,prevPageToken,tokenPagination");
searchList.setMine(true);
searchList.setMaxResults((long) 10);
PlaylistListResponse playListResponse = searchList.execute();
List<Playlist> playlists = playListResponse.getItems();

   if (playlists != null) {
        Iterator<Playlist> iteratorPlaylistResults = playlists.iterator();
                        if (!iteratorPlaylistResults.hasNext()) {
                            System.out.println(" There aren't any results for your query.");
                        }    
                        while (iteratorPlaylistResults.hasNext()) {    
                            Playlist playlist = iteratorPlaylistResults.next();

                                System.out.println(" Playlist Id : " + playlist.getId());
                                System.out.println(" Title: " + playlist.getSnippet().getTitle());

                        }
                    } 
```

# android - 遍历 ListView 元素并查找/修改特定视图

> ID：12738264
> 
> 赞同：0
> 
> 时间：2012-10-05T01:25:02.737
> 
> 标签：android, android-layout

我想遍历列表视图的视图并在特定视图上停止，以便我可以打开/关闭指示器或完全删除列表元素。如何找到特定的列表视图元素？经过这样的更改后，如果我正在修改它，我如何确保视图将被重绘？删除列表视图元素后是否需要重置适配器才能将其删除？

简而言之，您可以更改/删除单个列表视图元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:39:06.920

对`ListAdapter`（添加/删除项目或更新状态）进行修改，然后调用`notifyDataSetChanged()`以更新`ListView`. 将为每个可见项调用适配器的`getView()`方法，以便可以在该点更新和重绘它。

# php - cakephp date.timezone 晚了几个小时

> ID：12738268
> 
> 赞同：0
> 
> 时间：2012-10-05T01:25:36.500
> 
> 标签：php, cakephp

我已经安装了 cakephp 1.3，它使用以下内容：
Apache 版本：2.2.21
PHP 版本：5.3.8
MySQL 版本：5.5.16。
问题是当我回显以下内容时

`echo date('l jS \of F Y h:i:s A');`
我的时间比我的当地时间早了几个小时（机器时间设置为我的国家时间，即澳大利亚）。
当我在 php.ini 文件中进行更改并设置 date.timezone = UTC + 10 时，我得到了正确的本地时间，但我也得到了很多警告。

**警告：strtotime() [function.strtotime]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在第 515 行的 C:\wamp\www\cakephp\lib\Cake\Cache\Cache.php 中为 '10.0/no DST' 选择了 'Australia/Melbourne'**

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:42:31.133

正如您在帖子中提到的那样，您不能将时区指定为 UTC 的偏移量，例如“UTC+10”。您必须使用有效的时区字符串之一。[在此处](http://in2.php.net/manual/en/timezones.php)选择您所在的大陆，您将获得有效时区字符串的列表。

所以例如。在 core.php 你必须这样做：

```
date_default_timezone_set("Australia/Melbourne"); 
```

将时区字符串更改为您喜欢的任何其他有效时区字符串。顺便说一句，CakeTime::listTimezones() 也会给你时区列表。

编辑：您可能可以将时区指定为 UTC 的偏移量，但不应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:32:26.090

> 如果您从 PHP 中收到与时区相关的错误，请取消注释 app/Config/core.php 中的一行：
> 
> ```
> <?php
> /**
>  * Uncomment this line and correct your server timezone to fix
>  * any date & time related errors.
>  */
>     date_default_timezone_set('UTC'); 
> ```

[http://book.cakephp.org/2.0/en/installation.html#fire-it-up](http://book.cakephp.org/2.0/en/installation.html#fire-it-up)

# mailchimp - 用于电子邮件或 HTML 图像的 MailChimp 图像上传？

> ID：12738271
> 
> 赞同：2
> 
> 时间：2012-10-05T01:25:57.590
> 
> 标签：mailchimp

有谁知道邮件服务器处理包含从 MailChimp 发出的标签的自定义 HTML 消息的电子邮件有多好？将图像托管在 mailchimp 而不是您自己的主机上会更好吗？或者 mailchimp 是否被邮件服务器更好地识别/列入白名单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:20:53.727

事实证明，最好的也是最可能唯一合乎逻辑的解决方案是在您自己的主机或 Amazon CloudFront 上远程托管您的图像（将 IMG 标签放入电子邮件的 HTML 代码中）。由于 cloudfront.net 与您的网站没有关联，因此大多数电子邮件提供商和垃圾邮件过滤器更有可能将该域列入白名单以在电子邮件中显示图像，因此这些图像应该可以正常显示。如果您使用自己的域名，那么您的图像可能会被阻止或隐藏在 HTML 电子邮件中。

另一种解决方案是制作一个简单的 HTML 文件并创建一个目录并包含该 HTML 文件及其图像。然后压缩 HTML 目录，并在每次在您的网站上创建活动时将其自动上传到 MailChimp。然后 MailChimp 应该打开 zip 并使用正确的电子邮件创建活动，并将所有图像托管在他们自己的服务器上。这应该保证图像正确显示并且它们托管在 MailChimps 域和/或服务器上。唯一的麻烦是您每次创建活动时都需要上传它，而 API 不支持上传它们。

# java - Android：如何从设置中设置按钮颜色

> ID：12738276
> 
> 赞同：1
> 
> 时间：2012-10-05T01:26:45.493
> 
> 标签：java, android, sharedpreferences

在我的应用程序中，我想要一个设置页面，您可以在其中将应用程序中按钮的颜色设置为绿色、蓝色或红色。我可以用 SharedPreferences 做到这一点吗？如果是这样，假设我在我的共享首选项中将颜色保存为“BUTTON_COLOR”。如何调用我的活动中的设置来设置按钮颜色？多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:39:35.937

在应用程序中创建按钮的任何地方，都必须检查 SharedPreference 的值并适当地设置按钮颜色。

保存首选项：

```
PreferenceManager.getDefaultSharedPreferences(activity).edit().putInt("COLOR",color); 
```

再次读取它（其中 getInt() 的第二个参数是颜色的默认值）：

```
PreferenceManager.getDefaultSharedPreferences(activity).getInt("COLOR",Color.BLACK); 
```

有关详细信息，请参阅：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:41:05.007

Android SDK 提供`SharedPreferences`类`set`和`get`App 首选项。

这些首选项适用于少量数据，并且有适用于所有数据类型（包括`String`）的方法。

卸载应用程序时会删除首选项。或者，如果用户进入他们的设备设置，找到应用程序并选择“清除缓存”按钮。

您可以通过这种方式设置首选项：

```
SharedPreferences get = getSharedPreferences("MyApp", Context.MODE_PRIVATE);
SharedPreferences.Editor set = get.edit();

set.putInt("BUTTON_COLOR", 0xFF000000);
set.commit(); // You must call the commit method to set any preferences that you've assigned. 
```

您可以通过以下方式检索它们：

```
get.getInt("BUTTON_COLOR", 0xFF000000); // A preference will never return null.  You set a default value as the second parameter. 
```

# ruby-on-rails - Rails - 为多个设计模型配置默认值

> ID：12738283
> 
> 赞同：0
> 
> 时间：2012-10-05T01:27:59.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个使用多个用户模型的应用程序，每个模型都有自己的设计配置和自己的模型。对于我的设置，这比仅使用单个用户模型和角色更有意义，而且我对结果很满意。

但是，我在设计的默认值以及如何在每个模型中覆盖它们时遇到了一些问题。对于 unlock_strategy 或用户在请求密码重置后必须登录的时间，devise 会查看文件 config/initializers/devise.rb。如何在每个模型的基础上设置这些变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T01:37:17.960

模型中的[`#devise`](http://rdoc.info/gems/devise/Devise/Models%3adevise)方法在模块列表之后接受配置选项的散列。就像是：

```
class SomeModel < ActiveRecord::Base
  devise :database_authenticatable, :lockable, :unlock_strategy => :both
end 
```

# php - mysql数据库中的论坛数据

> ID：12738292
> 
> 赞同：1
> 
> 时间：2012-10-05T01:29:17.733
> 
> 标签：php, mysql, forum

所以我正在使用 php 为学校项目制作一个简单的网站。

对于论坛，我会这样做吗？

创建新区域时 > 创建新数据库 当区域中创建新主题时 > 创建新表 当主题中创建新帖子时 > 将行添加到表中

删除区域时 > 删除数据库 删除主题时 > 删除表

等等等等

这会是你为论坛类型的场景所做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:35:39.547

启动项目后，您无需添加表或数据库。设置一个不需要新表而只需要新条目的设计。

你可以做这样的事情

```
areas (id, name)
topics (id, area_id, name)
posts (id, topic_id, title, content) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:41:15.437

对于正常的网站操作，您的数据库模式应该几乎被锁定。您将拥有一个数据库、一个论坛表、一个帖子表、一个用户表等。

如果您搜索，那里有帮助您入门的教程。我刚刚找到了这个：[创建一个简单的 PHP 论坛教程](http://www.phpeasystep.com/workshopview.php?id=12)。

# c# - 如何制作一个阻塞的函数，直到它有数据要在c#中返回

> ID：12738296
> 
> 赞同：3
> 
> 时间：2012-10-05T01:29:37.757
> 
> 标签：c#, readline

如何制作一个返回输出并阻塞直到输出可用的自定义函数？我在想类似的东西`Console.ReadLine()`。像这样的东西：

```
var resp = Output(); //blocks until output is sent.
...
//returns a string once SendOutput is called and hands over the string.
public static string Output() { /* what goes here? */ }
//Is this function even needed? Can I just fire Output somehow?
private static string SendOutput(string msg) { /* what goes here? */ }
...
//Calls sendoutput with the string to send.
SendOutput(msg); 
```

基本上，我正在制作一个在获取数据之前被阻塞的侦听器（就像调用 一样`console.readline`），并且我需要内部代码来制作阻塞器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:12:49.840

您想要的是在其他一些工作完成时发出阻塞方法调用的信号。ManualResetEvent 是实现此行为的好方法；没有循环，一旦工作线程发出完成的信号，返回几乎是瞬时的。

```
class Program
{
    static void Main(string[] args)
    {
        Blocker b = new Blocker();
        Console.WriteLine(b.WaitForResult());
    }
}

public class Blocker
{
    private const int TIMEOUT_MILLISECONDS = 5000;
    private ManualResetEvent manualResetEvent;

    private string output;

    public string WaitForResult()
    {
        // create an event which we can block on until signalled
        manualResetEvent = new ManualResetEvent(false);

        // start work in a new thread
        Thread t = new Thread(DoWork);
        t.Start();

        // block until either the DoWork method signals it is completed, or we timeout (timeout is optional)
        if (!manualResetEvent.WaitOne(TIMEOUT_MILLISECONDS))
            throw new TimeoutException();

        return output;
    }

    private void DoWork()
    {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10; i++)
        {
            sb.AppendFormat("{0}.", i);
        }
        output = sb.ToString();

        // worker thread is done, we can let the WaitForResult method exit now
        manualResetEvent.Set();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T01:51:03.627

线程进程调用并使用后台工作人员在数据可用时通知回来。

```
private void Create_Thread()
{
    //Parameterized function
    Thread wt = new Thread(new ParameterizedThreadStart(this.DoWork));
    wt.Start([/*Pass parameters here*/]);
}

public void DoWork(object data)
{
    Thread.Sleep(1000);
    //Process Data - Do Work Here

    //Call Delegate Method to Process Result Data
    Post_Result(lvitem);
}

private delegate void _Post_Result(object data);

private void Post_Result(object data)
{
    //Process Result
} 
```

# android - 关闭通知点击的旧意图

> ID：12738297
> 
> 赞同：1
> 
> 时间：2012-10-05T01:29:41.830
> 
> 标签：android, android-intent, notifications

我在从本地通知中获取新意图并关闭旧意图时遇到问题

通常我用唯一的“钥匙”开始意图

```
Intent queueIntent = new Intent(this, QueueListViewActivity.class);
queueIntent.putExtra("key","unique");
startActivity(queueIntent); 
```

当我午餐通知意图时，它不会关闭旧的

```
Intent notificationIntent = new Intent(this, QueueListViewActivity.class);
notificationIntent.putExtra("key", "myqueue");
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0); 
```

如果存在，我如何使通知关闭旧意图？

# git - BitBucket - 非快进

> ID：12738300
> 
> 赞同：0
> 
> 时间：2012-10-05T01:29:48.553
> 
> 标签：git, tortoisehg, bitbucket, tortoisegit

很长的解释我的行为，系好安全带。菜鸟在这里:)

我试图与几个朋友分享我的整个项目，而不是分享一个 .zip 文件，我想我会创建一个存储库。我对它们的工作原理知之甚少（老实说，我只是认为您只是通过浏览器上传文件的新版本），我从 BitBucket 开始。我遵循 BitBucket 中的文档并将我的空存储库克隆到

```
C:\Users\Me\repos\name-of-repository 
```

但是，我的实际工作区位于 C:\xampp\htdocs\name-of-project

因此，如果我必须进行任何更改，我必须复制我的整个工作目录并将其替换到 /repos/ 的存储库中。我发现这很烦人，并学会了如何通过修改主变量来更改主目录（我确实设法推动了！成功！）。Home 现在设置为 C:\xampp\htdocs\name-of-project。我尝试了添加文件、提交和最终推送的相同方法，但我现在面临这样的错误：http: [//i.imgur.com/756ea.png](http://i.imgur.com/756ea.png)

我尝试在最后添加+develop 我尝试使用--force，但我使用的是我尝试过的正确语法$git pull = 没有发生任何事情。我已经尝试过 $git merge （我的工作目录与 相比已更新）= 未指定提交且未设置 merge.defaultToUpstream 。

我只想更新我的远程存储库！我一点也不担心它会给正在修改代码的其他人带来问题。我是唯一的，其他人正在关注这些变化。也没有人会分叉它。

真的卡住了，任何帮助表示赞赏！

TortoiseHg、TortoiseGit 也不完全正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:39:48.127

我认为你是从错误的方式处理这个问题。

您是否尝试过将工作目录初始化为 git 存储库？

完成此操作后，您只需将更改推送到您的 bitbucket 存储库。合并两个存储库是关于分布式版本控制*的*事情。

Bitbucket 也可以克隆您的工作目录。

例如

```
cd working
git init 
set up your .gitignore file (optional, but really recommended)
git add .
git commit -m "Initial commit"
git push https://bhavyadaiya@bitbucket.org/bhavyadaiya/yourrepositoryname.git master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:22:22.360

另一个已将更改推送到您的 bitbucket 存储库中。现在您自己的更改已经偏离远程分支，因此您需要将这些更改拉入本地存储库，并将这些更改与您的合并。

```
# I assume you use the git bash environment, not the cmd environment

git fetch                  # get the current state of your bb repo
git diff origin/master     # show the differences between your branch and the remote branch
git diff `git merge-base master origin/master`..origin/master # show the differences introduced by the other branch
git diff `git merge-base master origin/master`..master # show your local changes
git merge origin/master    # merge the other branch into your local branch 
```

# c# - VB.NET 中的数据绑定修改数据库连接

> ID：12738301
> 
> 赞同：1
> 
> 时间：2012-10-05T01:29:49.797
> 
> 标签：c#, vb.net, visual-studio-2010

如果我要复制文件项目然后将其保存到另一台计算机并运行，这里的任何人都知道如何使用 VB.NET 中的数据绑定修改数据库连接。我使用的是microsoft access数据库，出现的错误是microsoft.ace.oledb.12.0 provider没有在本地机器上注册。如何解决此问题，以便每次我需要将我的项目复制到另一台计算机时，该错误将不再发生。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:03:33.773

普通 Windows 系统上未安装 Microsoft.ACE.OLEDB.12.0 驱动程序。如果您使用安装程序，您可以设计方法来安装它或提醒用户手动安装它。这是可再发行下载的链接：http: [//www.microsoft.com/en-us/download/details.aspx? displaylang=en&id=13255](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=13255)

# jquery - jquery UI可拖动句柄不起作用

> ID：12738302
> 
> 赞同：3
> 
> 时间：2012-10-05T01:29:57.910
> 
> 标签：jquery

我遇到了可拖动的问题。我正在制作一个窗口管理器式的系统，并希望拥有它，因此只能通过标题栏拖动窗口。问题是，出于某种原因，它不想做它应该做的事情。即使我清楚地将手柄设置为标题栏，它也允许我拖动所有内容。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link href="CSS/Primary.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="javascript/jquery-1.8.2.js">
</script>
<script type="text/javascript" src="javascript/jquery-ui-1.8.24.custom.min.js">
</script>

<script type="text/javascript">
$(document).ready(function(){
  $("#LoginMinimize").click(function(){
    $("#divLoginBox").toggle();
  });
   $("#LoginClose").click(function(){
    $("#LoginContainer").remove();
  });
$( "#divLoginTitleBar" ).draggable({
    containment: 'window',
    scroll: false,
    handle: '#divLoginTitleBar'

});
});
</script>

<title>HEP Online --- Application Platform</title>

</head>

<body>

<div class="LoginContainer" id="LoginContainer">
<div id="divLoginTitleBar" class="TitleBar">
    Login <div id="divTitleButtonBox" class="TitleButtonBox">
        <img src="images/minimize.png" id="LoginMinimize" height="24px" /> 
        <img src="images/close.png" id="LoginClose" height="24px" /></div>

<div id="divLoginBox" class="LoginBox">
<div id="divLoginContent" class="LoginContent">

<form method="post" action="" id="frmLogin">

<img src="images/loginsplash.png" />

    <table id="tblLoginContent" class="LoginContent">
        <tr>
            <td>Username:</td>
            <td>
            <input maxlength="50" name="txtUsrName" size="20" type="text" /></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td>
            <input maxlength="24" name="txtPassword" size="20" type="password" /></td>
        </tr>
        <tr>
            <td><input name="btnLogin" type="submit" value="Login" /></td>
            <td><input name="btnReset" type="reset" value="Reset" /></td>
        </tr>
    </table>
    </form>
</div>
</div>
</div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:34:41.827

标题栏包含所有其他元素，因此它们也是可拖动的。您需要将所有内容包装在 div 中并将标题栏设置为句柄。

因此，您必须更改 js 以使包装 div 可拖动：

```
$( "#divLoginWindow" ).draggable({
containment: 'window',
scroll: false,
handle: '#divLoginTitleBar'
}); 
```

当然，还要创建那个 div。

```
<div id="divLoginWindow">
<div id="divLoginTitleBar" class="TitleBar">
Login
</div> <div id="divTitleButtonBox" class="TitleButtonBox">
    <img src="images/minimize.png" id="LoginMinimize" height="24px" /> 
    <img src="images/close.png" id="LoginClose" height="24px" /></div>
.... 
```

# cuda - 带有 cuSparse cusparseSnnz 函数的 CUSPARSE_STATUS_INTERNAL_ERROR

> ID：12738305
> 
> 赞同：5
> 
> 时间：2012-10-05T01:30:08.310
> 
> 标签：cuda, sparse-matrix

我正在尝试熟悉 cuSparse 库。在我的简单代码中，函数*cusparseSnnz*返回状态 6，即 CUSPARSE_STATUS_INTERNAL_ERROR。我认为正确安装了 CUDA 驱动程序和 cuSparse 库。如果有人可以帮助我，我将不胜感激。谢谢。

```
cusparseStatus_t status;
cusparseHandle_t handle=0;
cusparseMatDescr_t descr=0;

status = cusparseCreate(&handle);
if (status != CUSPARSE_STATUS_SUCCESS) {
    cout << "CUSPARSE Library initialization failed" << endl;
}
status = cusparseCreateMatDescr(&descr);
if (status != CUSPARSE_STATUS_SUCCESS) {
    cout << "Matrix descriptor initialization failed" << endl;
}
status = cusparseSetMatType(descr, CUSPARSE_MATRIX_TYPE_GENERAL);
if (status != CUSPARSE_STATUS_SUCCESS) {
    cout << "cusparseSetMatType failed" << endl;
}
status = cusparseSetMatIndexBase(descr, CUSPARSE_INDEX_BASE_ZERO);
if (status != CUSPARSE_STATUS_SUCCESS) {
    cout << "cusparseSetMatIndexBase failed" << endl;
}
int nnzPerRow[2];
int nnzTotal;
float tempf[6];
tempf[0] = 1.0;
tempf[1] = 0.0;
tempf[2] = 3.4;
tempf[3] = 0.0;
tempf[4] = 2.2;
tempf[5] = 8.6;
float* d_Temp;
cudaMalloc((void**)&d_Temp, sizeof(float)*6);
cudaMemcpy(d_Temp, tempf, sizeof(float)*6, cudaMemcpyHostToDevice);
status = cusparseSnnz(handle, CUSPARSE_DIRECTION_ROW, 2, 3, descr, d_Temp, 2, nnzPerRow, &nnzTotal);
if (status != CUSPARSE_STATUS_SUCCESS) {
    cout << "nnz calculation failed" << endl;
    cout << "status = " << status << endl;
}
cout << "nnzPerRow[0] = " << nnzPerRow[0] << endl;
cout << "nnzPerRow[1] = " << nnzPerRow[1] << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:16:36.093

我刚刚发现出了什么问题。nnzPerRow 需要位于设备中。

```
int nnzPerRow[2]; 
```

这应该如下所示：

```
int* nnzPerRow=0;
checkCudaErrors(cudaMalloc((void**)&nnzPerRow, sizeof(int)*2)); 
```

# shopify - Shopify 订单网络挂钩

> ID：12738309
> 
> 赞同：14
> 
> 时间：2012-10-05T01:31:05.497
> 
> 标签：shopify, webhooks

我查看了不同的订单 webhook，想知道它们何时被触发。到目前为止，这是我想出的：

1.  `orders/updated`每当订单以任何方式更改时都会触发，包括创建订单（甚至在其被授权和`orders/create`触发之前）、关闭或取消时
2.  `orders/create`当用户授权支付时触发
3.  `orders/paid`当商家接受付款时被解雇
4.  `orders/fulfilled`当商家完成订单时被解雇
5.  `orders/cancelled`订单取消时触发

由于`orders/updated`每当其他钩子被触发时也会触发，似乎添加更新 webhook 足以保持本地数据存储与商店数据同步。但是，我想确认我对这些 webhook 的理解是正确的，即`orders/updated`当订单发生任何变化时总是会触发它是否正确。并且其他 webhook 只是针对更具体的用例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T02:06:21.337

我想说，为了让代码更容易理解，处理适当的 webhook 只是为了让代码更容易理解，这将符合您的最大利益。

如果您所做的只是跟踪非常一般的东西，那可能没问题。

此外，在订单的所有状态更改时，`orders/updated`都会触发 webhook。

# linux - Python 脚本输出参数模板

> ID：12738310
> 
> 赞同：2
> 
> 时间：2012-10-05T01:31:05.510
> 
> 标签：linux, python-2.7

我正在编写一个基本的 Python 脚本，它最终会生成一个字符串，用于在 Linux 命令行上调用其他脚本。

例如：

```
inputFile = "loadsOfData.csv"
outputFile = "results.txt"
doThis = "-p"
doThat = '-a"

scriptCommand = "./myscript" + " " + inputFile + " " + outputFile + " " + doThis + " " + doThat

os.system(scriptCommand) 
```

命令行参数的顺序将来可能会改变，我想检查生成的内容。

在 Python 中是否有某种方法可以指定一个模板，以便轻松更改参数的格式并确保准确性？

真实的例子有比这更多的参数，所以我很高兴能够使用我可以在脚本顶部编辑的一些模板来指定顺序，而不是在 scriptCommand = ... 中复制粘贴所有内容。如果它确实改变了。

PS 实际的 args 来自其他地方，包括 argv，因此不像我的示例中那样硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:48:22.723

您应该使用 python[字符串格式化](http://www.python.org/dev/peps/pep-3101/)。在文件顶部定义要使用的格式，如下所示：

```
commandFormat = "./myscript {0} {1} {2} {3}"
inputFile = "loadsOfData.csv"
outputFile = "results.txt"
doThis = "-p"
doThat = "-a"
scriptCommand = commandFormat.format(inputFile, outputFile, doThis, doThat)
print scriptCommand

>>> './myscript loadsOfData.csv results.txt -p -a' 
```

例如，如果您需要在所有 scriptCommand 中 -a 出现在 -p 之前，请像这样更改 commandFormat 变量中的数字顺序，`commandFormat = "./myscript {0} {1} {3} {2}"`输出将变为：

```
>>> './myscript loadsOfData.csv results.txt -a -p' 
```

# winforms - C#更改winform左上角的图标

> ID：12738312
> 
> 赞同：20
> 
> 时间：2012-10-05T01:31:13.200
> 
> 标签：winforms, icons

我正在尝试将 winform 的左上角图标从默认图标更改为我的图标： ![在此处输入图像描述](../Images/0a22922188228d798a0ab614cfc4579c.png)

我已经通过转到我的项目的属性进行了尝试，然后进入应用程序，在“图标和清单”中设置我自己的图标。

但在那之后，它仍然显示相同的旧默认图标。是不是我做错了什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-05T01:34:21.470

您的表单具有与之关联的*属性（在设计模式下，将焦点放在您的表单上并单击**F4*）。其中一个属性是`Icon`，这就是您要寻找的。

您在应用程序属性中所指的图标是将在 .EXE 生成的文件中使用的图标。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-03T03:39:35.403

您可以使用以下代码为应用程序设置图标：

```
 public MainForm()
    {
        InitializeComponent();
        Icon = Icon.ExtractAssociatedIcon(System.Reflection.Assembly.GetExecutingAssembly().Location);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-02T07:04:14.330

确保您选择的照片是 .ico 格式，然后您可以在 Visual Studio 表单属性中简单地更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T11:42:07.530

这很容易；只需在 Visual Studio 设计器中右键单击您的窗口并单击设置，然后在设置侧边栏中导航到图标部分 - 单击三个点并选择一个 .ico 文件作为您的图标，以显示在您的左上角应用。

# ssrs-2008-r2 - SSRS - 我可以对多值参数进行硬编码吗？

> ID：12738315
> 
> 赞同：0
> 
> 时间：2012-10-05T01:31:19.957
> 
> 标签：ssrs-2008-r2

我面临[级联参数的默认值](http://connect.microsoft.com/SQLServer/feedback/details/268032/default-does-not-get-refreshed-for-cascading-parameters)的已知问题。由于我的参数是在 MDX 中编码的，因此我找不到任何具体的解决方法。

我没有尝试更改参数查询，而是想检查是否有可能为级联或任何参数硬编码 SELECT ALL。

这是我的参数数据集：

```
WITH 
    MEMBER [Measures].[ParameterValue] AS [Organisation].[Cost Centre Code and Description].CURRENTMEMBER.UNIQUENAME 
SELECT  
    [Measures].[ParameterValue]
ON COLUMNS , 
[Organisation].[Cost Centre Code and Description].[Cost Centre Code and Description].ALLMEMBERS ON ROWS 
FROM 
(SELECT STRTOSET(@CC_Caption, CONSTRAINED) ON COLUMNS FROM 
[CUBE] ) 
```

有人知道如何对`SELECT ALL`SSRS 参数进行硬编码吗？

感谢您的任何观点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:09:05.770

它可以在自定义代码中完成。虽然不简单。我在使用 SharePoint 列表作为源时使用过。这里应该适用。我将使用示例“客户端”参数。

1.  创建一个参数@ClientHelper。将其设置为隐藏的、多值的、来自数据集查询的可用值以及来​​自数据集查询的默认值。
2.  创建一个参数@Client。将其设置为可见的，而不是多值，以及“指定值”的可用值。将标签列留空并输入“=Split(Code.RemoveDups(JOIN(Parameters!ClientHelper.Value, “|”)), “|”)”作为值表达式。您可以将默认值设置为您想要的任何值。
3.  请注意，@ClientHelper 在参数列表中必须位于 @Client 之前。

您需要的自定义鳕鱼如下。如果您不需要删除重复，您也许可以更改它以满足您的需要。

```
公共共享函数 RemoveDups(ByVal items As String) As String
将 noDups 调暗为新 System.Collections.ArrayList()

将 SpStr 调暗为 String()
SpStr =拆分（项目，“|”）

For i As Integer=0 To Ubound(Spstr)
如果不是 noDups.Contains(SpStr(i).Replace("&","&").Trim()) 那么
noDups.Add(SpStr(i).Replace("&","&").Trim())
万一
下一个

Dim uniqueItems As String() = New String(noDups.Count-1){}
noDups.CopyTo(uniqueItems)
uniqueItems.Sort(uniqueItems)

暗淡 strRetValue AS String = String.Join("|", uniqueItems)
strRetValue = "全部|" + strRetValue
返回 strRetValue
结束功能

```

现在，您仍然需要在执行级联的数据集查询中放置过滤器和逻辑......但这为您提供了“ALL”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:16:22.453

您能否不转到参数的默认值并使用“从查询中获取值”，然后提供具有所有值的查询？

# javascript - 如何在 SVG 中为椭圆元素添加轮廓/边框？

> ID：12738316
> 
> 赞同：4
> 
> 时间：2012-10-05T01:31:25.933
> 
> 标签：javascript, jquery, svg, vector-graphics, jquery-svg

我是 SVG 的新手。我想知道我可以使用什么属性为 SVG 代码中的椭圆元素添加轮廓/边框？实际上，我正在尝试使用 SVG 和 jQuery 制作交互式图形，因此我需要让某些选定的椭圆元素在事件发生时显示特定颜色（如深红色）的实心轮廓。我想知道如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T06:48:44.870

你的意思是这样的吗？

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="100%" height="100%">
  <ellipse cx="300" cy="80" rx="100" ry="50"
  fill="yellow" stroke="purple" stroke-width="2"/>
</svg> 
```

椭圆有紫色边缘。或者你的意思是一个围绕椭圆的方形盒子，你需要像这样单独做？

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="100%" height="100%">
  <ellipse cx="300" cy="80" rx="100" ry="50" fill="yellow"/>
  <rect x="200" y="30" width="200" height="100"
   fill="none" stroke="purple" stroke-width="2"/>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T08:21:44.273

**在 CSS**中，类似：

```
path {
  fill: none;;
  stroke: #646464;
  stroke-width:1px
  stroke-dasharray: 2,2;
  stroke-linejoin: round;
} 
```

# mongodb - MongoDB 的默认数据库路径是什么？

> ID：12738322
> 
> 赞同：69
> 
> 时间：2012-10-05T01:31:51.783
> 
> 标签：mongodb

我收到一个关于 的错误`dbpath (/data/db/) does not exist`，但`/etc/mongodb.conf`将其命名为`dbpath = /var/lib/mongodb.` 那么，MongoDB 的默认 dbpath 是哪一个？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-05T02:06:59.873

mongodb 的默认 dbpath 是`/data/db`.

没有默认配置文件，因此您需要在开始时指定`mongod`：

```
 mongod --config /etc/mongodb.conf 
```

.. 或使用 MongoDB 的打包安装（例如[Redhat](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)或[Debian/Ubuntu](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/)），它将在服务定义中包含配置文件路径。

注意：要检查运行的 dbpath 和命令行选项`mongod`，请通过`mongo`shell 连接并运行：

```
db.serverCmdLineOpts() 
```

特别是，如果`dbpath`设置了自定义，它将是以下值：

```
db.serverCmdLineOpts().parsed.dbpath           // MongoDB 2.4 and older
db.serverCmdLineOpts().parsed.storage.dbPath   // MongoDB 2.6+ 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-05T01:40:28.707

我在 Ubuntu 上安装了 2.0.7 版本，它默认为`/var/lib/mongodb/`，这也是我放入`/etc/mongodb.conf`文件的内容。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-10T02:53:13.677

对于 Windows 机器，`mongod`通过指定 dbpath 来启动进程：

```
mongod --dbpath \mongodb\data 
```

参考：[管理`mongod`流程](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-05T07:11:52.833

我取决于版本和发行版。

例如，来自 MongoDB 站点的默认下载 pre-2.2 使用：`/data/db`但 Ubuntu 安装曾经使用：`var/lib/mongodb`.

我认为这些现在已经标准化，因此 2.2+ 将只使用`data/db`来自站点上的直接下载或来自 repos 的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-05-05T16:31:41.537

Windows x64 安装程序在安装程序 UI/向导中显示路径。

`mongod.cfg`您可以通过打开文件来确认它稍后使用的路径。我`mongod.cfg`的位于此处`C:\Program Files\MongoDB\Server\4.0\bin\mongod.cfg`（更改您的 MongoDB 版本！

当我打开我的时`mongd.cfg`，我发现了这一行，显示了默认的数据库路径：

```
dbPath: C:\Program Files\MongoDB\Server\4.0\data 
```

但是，这在尝试运行时导致了错误，该错误`mongod`仍然期望找到`C:\data\db`：

`2019-05-05T09:32:36.084-0700 I STORAGE [initandlisten] exception in initAndListen: NonExistentPath: Data directory C:\data\db\ not found., terminating`

你可以传递`mongod`一个`--dbpath=...`参数。就我而言：

```
mongod --dbpath="C:\Program Files\MongoDB\Server\4.0\data" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-04-11T08:55:28.123

在`dbPath`Mongo 中可能会令人困惑。如果您根本不指定`dbPath`（既不作为命令行参数也不在`mongod.conf`文件中），那么它默认为

*   `/data/db`在 Linux 和 macOS 上
*   `\data\db`在 Windows 上（在当前驱动器上）

但是，安装随附的**默认** `mongod.conf`文件使用以下文件：

| 平台 | 包管理器 | 默认`storage.dbPath` |
| --- | --- | --- |
| RHEL / CentOS 和亚马逊 | 百胜 | `/var/lib/mongo` |
| 苏塞 | 齐珀 | `/var/lib/mongo` |
| Ubuntu 和 Debian | 易于 | `/var/lib/mongodb` |
| 苹果系统 | 酿造 | `/usr/local/var/mongodb` |
| 视窗 | 微星 | `C:\Program Files\MongoDB\Server\{release}\data\` |

因此，您必须仔细检查您使用的是什么。

请参阅[运行时数据库配置](https://docs.mongodb.com/manual/administration/configuration/)

# wordpress - Wordpress - 查询自定义字段和排序先进/先出

> ID：12738324
> 
> 赞同：1
> 
> 时间：2012-10-05T01:32:10.617
> 
> 标签：wordpress, custom-fields

我想获取所有某个自定义字段，在本例中为“侧边栏”，并根据第一次输入到最后一次输入进行排序。我找不到任何方法来做到这一点。我唯一能找到的是如何根据自定义字段值进行查询。

此外，“侧边栏”自定义字段中包含图像 URL，因此我无法根据值进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:36:12.150

您唯一的选择是编写一个自定义查询来搜索 wp_postmeta 表并按 meta_id 列排序，尽管这不能保证是您想要的顺序，但它可能会尽可能接近，而无需额外的逻辑（将添加的日期保存为单独的元字段或数组的一部分，然后使用自定义排序）：

```
$sql = $wpdb->prepare("SELECT meta_value FROM $wpdb->postmeta WHERE meta_key = 'sidebar' AND post_id = ? ORDER BY meta_id ASC", $post->ID)
$values = $wpdb->get_col($sql);
foreach ($values as $value){
    echo $value; // custom field value
} 
```

# c# - WPF动画不起作用

> ID：12738325
> 
> 赞同：0
> 
> 时间：2012-10-05T01:32:38.193
> 
> 标签：c#, wpf, wcf, animation

我正在尝试在线程在后台工作时为加载屏幕设置动画，但它不起作用。

我意识到它与调用 Button.Dispatcher 的后台工作人员有关，但是我无法删除它，因为它会导致线程错误。我应该怎么做才能解决这个问题？

下面是我的代码：

```
 private void btnLogin_Click(object sender, RoutedEventArgs e)
        {
            Storyboard sb = (Storyboard)FindResource("Loading");
            sb.Dispatcher.BeginInvoke(new Action(() => sb.Begin()), DispatcherPriority.Normal, null);

            BackgroundWorker bg = new BackgroundWorker();
            bg.DoWork += new DoWorkEventHandler(bg_DoWork);
            bg.RunWorkerAsync();
        }

        private void bg_DoWork(object sender, DoWorkEventArgs e)
        {
            System.Threading.Thread thread = new System.Threading.Thread(new System.Threading.ThreadStart(RunThread));
            thread.Start();            
        }

        private void RunThread()
        {
            btnLogin.Dispatcher.BeginInvoke(new Action(() => TheBackgroundWork()), DispatcherPriority.Normal, null);
        } 
```

更新：

按照 Jay 的建议，我从 Do_Worker 中删除了 UI 调用。不幸的是，我仍然遇到错误：

```
The calling thread cannot access this object because a different thread owns it. 
```

它是由我的网络服务客户端抛出的

以下是更新后的代码：

```
 private WebServiceClient proxy = new WebServiceClient();

        private void btnLogin_Click(object sender, RoutedEventArgs e)
        {
            sb = (Storyboard)FindResource("sbLoading");
            sb.Dispatcher.BeginInvoke(new Action(() => sb.Begin()), DispatcherPriority.Normal, null);

            BackgroundWorker bg = new BackgroundWorker();
            bg.DoWork += new DoWorkEventHandler(bg_DoWork);
            bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bg_RunWorkerCompleted);
            bg.RunWorkerAsync();
        }

        private void bg_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            var u = e.Result;
            if (u != null)
                //pass the data
        }

        private void bg_DoWork(object sender, DoWorkEventArgs e)
        {
            try
            {
                var u = proxy.ToWebService(x,y); //this guy throws an error
                e.Result = u;
            }
            catch
            {
                this.Dispatcher.Invoke(new Action(
                    () => MessageBox.Show("Connection Error", this.Title)), 
                    DispatcherPriority.Normal, null);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:51:45.130

1.  您的`bg_DoWork`方法已经在后台线程上运行，因此无需在其中创建线程。
2.  任何`bg_DoWork`内容都不应触及 UI 元素，也不应与 UI 元素数据绑定。如果您有一些返回数据，请将其打包成一个对象并将其填充到`DoWorkEventArgs.Result`属性中。
3.  为该`BackgroundWorker.RunWorkerCompleted`事件添加另一个处理程序。此方法将在 UI 线程上运行，因此您可以从`RunWorkerCompletedEventArgs`（这将是您在 #2 中分配的结果对象）读取响应数据并根据需要更新 UI。

其美妙之`BackgroundWorker`处在于它将处理线程创建和将数据封送回 UI 线程——不需要任何东西`Dispatcher.Invoke`。

### 更新

作为对您的编辑的响应，Web 服务调用可能会引发异常，但您得到的线程异常是由于尝试`this`从后台线程访问而引起的。

正如您必须将成功结果打包到 中一样`DoWorkEventArgs.Result`，您也需要在其中打包失败结果。

您传回的对象可以是任何东西，因此您可以添加`bool Success`属性、`Exception CaughtException`属性*等内容。*

您将在`RunWorkerCompleted`处理程序中检查这些值，这就是您要显示`MessageBox`.

# database - 使用链接查看数据库中的单个记录

> ID：12738326
> 
> 赞同：0
> 
> 时间：2012-10-05T01:32:47.030
> 
> 标签：database, codeigniter

我在屏幕上显示的每条记录都有一个链接，当我单击链接时，我想在新页面上显示记录的所有详细信息。

基本上，当我单击链接时，我会得到一个带有 id 号的 url。该项目如：

民意调查/index.php/user/vote/59

现在我正在尝试显示该 ID 号的标题和文本。

在我的控制器中，我有一种方法可以做到这一点：

```
public function display_poll($id=0){

    $this->load->helper('form');  
    $this->load->helper('html'); 
    $this->load->model('polls_model');  

    $data['polls_item'] = $this->polls_model->get($id);

    if (empty($data['polls_item']))
    {
        show_404();
    }

    $this->load->helper('html');
    $data['content'] = $this->load->view('user/view', $data, TRUE);
    $data['id'] = $data['polls_item']['id'];
    $data['title'] = $data['polls_item']['title'];
    $data['text'] = $data['polls_item']['text'];

    $this->load->view('user/vote',$data);   

} 
```

在我看来，我这样做是这样的：

```
<html>
    <head>
        <h2>Voting Page:</h2>

<script type="text/javascript" src="<?php echo base_url();?>js/jquery.js"></script>      
</head>

<body>

<?php echo form_open('user/vote'); ?>
<?php echo form_hidden($polls_item['id']); ?>
<?php echo $polls_item['title'] ?>
<?php echo $polls_item['text'] ?>

<?php echo form_close(); ?>

</body>

</html> 
```

在我的模型中，我有这样的功能：

```
function get($id)
{
    $query = $this->db->get_where('polls', array('id'=>$id));
    return $query->row_array();       
} 
```

我收到这种错误：

遇到 PHP 错误

严重性：通知

消息：未定义变量：polls_item

文件名：user/vote.php

行号：27

我怎样才能解决这个问题？对你的帮助表示感谢。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:39:15.437

我不知道你为什么会得到这个，但试试

```
 var_dump($polls_item) ; 
```

在你看来和

```
var_dump($data['polls_item']); 
```

在调用视图之前你的控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:54:06.030

网址

```
polls/index.php/user/vote/59 
```

控制器

```
public function display_poll()
{
    $this->load->helper('form');  
    $this->load->helper('url'); 
    $this->load->helper('html'); 
    $this->load->model('polls_model');  

    $this->uri->segment(3,0); // 0 means default
    $polls_item = $this->polls_model->get($id);

    if (empty($data['polls_item']))
    {
        show_404();
    }
    $data['polls_item'] =   $polls_item;
    $data['content']    =   $this->load->view('user/view', $data, TRUE);
    $data['id']         =   $polls_item['id'];
    $data['title']      =   $polls_item['title'];
    $data['text']       =   $polls_item['text'];

    $this->load->view('user/vote',$data);   
} 
```

# c - 用指针对C中的结构进行排序

> ID：12738327
> 
> 赞同：0
> 
> 时间：2012-10-05T01:32:53.293
> 
> 标签：c, sorting, pointers

我刚从 C 语言开始，对幕后发生的事情知之甚少。我正在为一个数据结构类动态学习它，这使事情变得有点困难。

更新：我已经剥离了程序，并从内存开始。我在那里有分配和解除分配函数，我得到一个 malloc 错误：Q1（9882）malloc：*** 对象 0x7fff59daec08 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

Update2 这是我修改后的代码，它仍然缺少一些东西，我的一些 printf 语句没有出现：

```
#include <stdio.h>
#include<stdlib.h>
#include<math.h>
#include<assert.h>

static int size = 10;

struct student{
    int id;
    int score;
};

struct student* allocate(){
     /*Allocate memory for ten students*/
     struct student *s = malloc(size*(sizeof(struct student)));
     assert(s != 0);
     /*return the pointer*/
     return s;
}

void generate(struct student* students){
    /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/
    srand((unsigned int)time(NULL));
    int id[size];
    int y;

    for (int i = 0; i < size; i++){
        y = rand() % size + 1;
        while(dupe(id, i, y)){
            y = rand() % size + 1;
        }
        id[i] = y;
    }

    for (int j = 0; j < size; j++){
        (students + j)->id = id[j];
        (students + j)->score = rand() % 101;
        printf("ID: %d\tScore: %d\n", (students + j)->id, (students + j)->score);
    }
}

int dupe(int id[], int size1, int i){
    for (int x = 0; x < size1; x++){
        if(id[x] == i)
            return 1;
    }
    return 0;
}

void output(struct student* students){
     /*Output information about the ten students in the format:
              ID1 Score1
              ID2 score2
              ID3 score3
              ...
              ID10 score10*/
    sort(&students);
    for(int x = 0; x < size; x++){
        printf("ID: %d\tScore: %d\n", (students + x)->id, (students + x)->score); //print stmt not showing
    }
}

void sort(struct student* students){
    struct student *sd = allocate();

    struct student *stud;

    for(int i = 0; i < size; i++){
        stud = &students[i];
        sd[stud->id] = *stud;
    }
    for(int x = 0; x < size; x++){
        printf("ID: %d\tScore: %d\n", (sd + x)->id, (sd + x)->score); //print stmt not showing
    }
    students = &sd;
    deallocate(sd);
}

void summary(struct student* students){
     /*Compute and print the minimum, maximum and average scores of the ten students*/

}

void deallocate(struct student* stud){
     /*Deallocate memory from stud*/
    free(stud);
}

int main(){
    struct student* stud = NULL;
    char c[] = "------------------------------\n";
    /*call allocate*/
    stud = allocate();
    /*call generate*/
    generate(&stud);
    /*call output*/
    printf("%s", c);
    output(&stud);
    /*call summary*/

    /*call deallocate*/
    deallocate(stud);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:05:49.810

```
students = &students[x]; 
```

这会改变`students`点的位置，因此下次通过循环时，您将从那里偏移，而不是从一开始。也就是说，你得到`originalstudents[0]`, `originalstudents[1]`, `originalstudents[1+2]`,`originalstudents[1+2+3]`等等。你有同样的问题`sd`。

相反，您想使用不同的变量，例如

```
struct student* st = &students[x];
printf("id = %d\tscore = %d\n", st->id, st->score);
etc 
```

另外，sd 是干什么用的？您似乎无缘无故地分配了一些空间并将学生复制到 sd 。分配的空间没有保存或返回......这是内存泄漏。哦，等等，我明白了..您按照他们的 ID 对 sd 中的学生重新排序。所以你应该在完成后释放内存。但是对于学生和 sd，您需要一个指向数组的指针而不是指向数组元素的指针。您可以使用许多不同的命名约定，但最好使用一致的命名约定。例如：

```
void output(struct Student* students){
    struct Student *idstudents = allocate(); /* sorted by id */
    if (!idstudents)
        /* handle allocation error */;

    for (int x = 0; x < 10; x++){
        struct Student* student = &students[x];
        printf("id = %d\tscore = %d\n", student->id, student->score);
        struct Student* idstudent = &idstudents[student->id];
        *idstudent = *student; /* copy all fields at once */
        printf("id = %d\tscore = %d\n", idstudent->id, idstudent->score);/* pointless here, since we just printed the same info via student */
    }

    for (int x = 0; x < 10; x++){
        struct Student* idstudent = &idstudents[x];
        printf("id = %d\tscore = %d\n", idstudent->id, idstudent->score);
    }
    deallocate(idstudents);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:08:31.530

您的`output()`函数正在滥用指针，因此您正在践踏您的学生数据。尝试这样的事情（假设 ID 是数组索引，因为这就是您使用它们的方式）：

```
struct student* allocate()
{
    /*Allocate memory for ten students*/ 
    struct student *s = malloc(10 * sizeof(struct student)); 
    assert(s != NULL); 
    /*return the pointer*/ 
    return s; 
} 

void deallocate(struct student* stud)
{ 
    /*Deallocate memory from stud*/ 
    free(stud); 
} 

int main()
{ 
    struct student* stud = NULL; 

    /*call allocate*/ 
    stud = allocate(); 

    /*call generate*/ 

    /*call output*/ 
    output(stud);

    /*call summary*/ 

    /*call deallocate*/ 
    deallocate(stud); 

    return 0; 
} 

void output(struct student* students)
{ 
    /*allocate array for sorting*/
    struct student *sd = allocate(); 

    struct student *stud; 

    /*make copy of students in sorted order*/
    for (int x = 0; x < 10; ++x)
    { 
        stud = &students[x]; 
        printf("id = %d\tscore = %d\n", stud->id, stud->score); 
        sd[stud->id] = *stud; 
    } 

    /*output sorted students*/
    for (int x = 0; x < 10; ++x)
    { 
        stud = &sd[x]; 
        printf("id = %d\tscore = %d\n", stud->id, stud->score); 
    } 

    /*deallocate array for sorting*/
    deallocate(sd); 
} 
```

由于您已经对学生人数进行了硬编码，因此您无需在 中动态分配新的学生数组`output()`，只需对原始数组中已有的指针进行排序：

```
void output(struct student* students)
{ 
    /*array for sorting*/
    struct student* sd[10]; 

    struct student *stud; 

    /*sort students*/
    for (int x = 0; x < 10; ++x)
    { 
        stud = &students[x]; 
        printf("id = %d\tscore = %d\n", stud->id, stud->score); 
        sd[stud->id] = stud; 
    } 

    /*output sorted students*/
    for (int x = 0; x < 10; ++x)
    { 
        stud = sd[x]; 
        printf("id = %d\tscore = %d\n", stud->id, stud->score); 
    } 
} 
```

**更新**：既然你已经展示了更多的代码，你仍然在使用指针时犯了一些大错误。正如您所展示的，您的代码甚至不应该编译。试试这个：

```
#include <stdio.h> 
#include <stdlib.h> 
#include <math.h> 
#include <assert.h> 

static const int numStudents = 10; 

struct student
{ 
    int id; 
    int score; 
}; 

struct student* allocate()
{ 
     /*Allocate memory for ten students*/ 
     struct student *s = malloc(numStudents * sizeof(struct student)); 
     assert(s != 0); 
     /*return the pointer*/ 
     return s; 
} 

void generate(struct student* students)
{ 
    /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/ 
    int id[numStudents]; 
    int y; 
    struct student* stud;

    for (int i = 0; i < numStudents; i++)
    { 
        do
        {
          y = rand() % size + 1; 
        }
        while (dupe(id, i, y) != 0);
        id[i] = y; 
    } 

    for (int j = 0; j < numStudents; j++)
    { 
        stud = &students[j];
        stud->id = id[j]; 
        stud->score = rand() % 101; 
    } 
} 

int dupe(int id[], int size, int i)
{ 
    for (int x = 0; x < size; x++)
    { 
        if (id[x] == i) 
            return 1; 
    } 
    return 0; 
} 

void output(struct student* students)
{ 
     /*Output information about the students in the format: 
              ID1 Score1 
              ID2 score2 
              ID3 score3 
              ... 
              ID10 score10*/ 

    struct student* stud;

    for(int x = 0; x < numStudents; x++)
    { 
        stud = &students[x];
        printf("ID: %d\tScore: %d\n", stud->id, stud->score);
    } 
} 

void sort(struct student* students)
{ 
    struct student *sd = allocate(); 
    struct student *stud; 

    for(int i = 0; i < numStudents; i++)
    { 
        stud = &students[i]; 
        sd[stud->id - 1] = *stud; 
    } 

    for(int x = 0; x < numStudents; x++)
    { 
        stud = &sd[x]; 
        students[x] = *stud; 
    } 

    deallocate(sd); 
} 

void summary(struct student* students)
{ 
    /*Compute and print the minimum, maximum and average scores of the ten students*/ 
} 

void deallocate(struct student* stud)
{ 
    /*Deallocate memory from stud*/ 
    free(stud); 
} 

int main()
{ 
    /*seed random number generator*/
    srand(time(NULL)); 

    struct student* stud = NULL; 
    const char* c = "------------------------------\n"; 

    /*allocate students and generate info*/ 
    stud = allocate(); 
    generate(stud); 
    output(stud); 

    printf("%s", c); 

    /*sort students*/ 
    sort(students); 
    output(stud); 

    printf("%s", c); 

    /*display summary*/ 
    summary(stud); 

    /*deallocate students*/ 
    deallocate(stud); 

    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:05:06.807

这个说法

```
students = &students[x]; 
```

修改传入的参数。你已经失去了“学生”所指的东西，这是`struct student []`.

删除此语句并尝试再次运行您的程序。

还有其他错误，但这应该会让你摆脱困境。

指针很难。

# list - 在方案中将包含二进制数的列表转换为十进制和十六进制

> ID：12738331
> 
> 赞同：2
> 
> 时间：2012-10-05T01:34:01.903
> 
> 标签：list, binary, scheme, hex, decimal

我对计划很陌生。我知道如何从十进制转换为二进制，但我无法提供反过来转换的逻辑。我想从二进制数列表中获取一个十进制数。

十进制示例：

```
(decimal '(1 0 1)) ---> 5 
```

十六进制示例：

```
(hexadecimal '(1 0 0 0 1)) ----> 12 
```

到目前为止，我认为可以将列表的最后一个数字乘以 2 ^i，其中 i 表示列表中的位置，因此最后一个数字乘以 1，下一个数字乘以 2，依此类推。最后在每个递归循环中添加这些数字。不知道如何执行这个想法，也不知道它是否会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-07T21:00:12.357

规范中的输入不清楚，但是假设 OP 想要转换从左到右读取的二进制数，我们需要先颠倒数字顺序，以便我们乘坐的第一辆车是最低有效位；将每个后续的 2 幂应用于下一个有效位。为了处理函数内部的反转，可以使用命名的 let ，它允许我们在反转列表后仅递归 let 的主体。Guile Scheme 中的一种方法如下所示：

```
(define (binary->decimal binary-list)
  "Calculate decimal equivalent of list of binary"
  (let loop ((rev-bl (reverse binary-list)))
    (if (null? rev-bl)
        0
        (+ (car rev-bl) (* 2 (loop (cdr rev-bl))))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:05:51.697

你对解决方案的书面描述是正确的——你需要做的就是执行它。几个指针：

*   如果您反转列表，逻辑会容易得多
*   将每个数字的权重和累积的总和作为递归函数的参数传递，使其更简单

你走在正确的轨道上——继续努力。伪代码尝试可能会让您更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T07:12:08.657

```
(defun bin-list-to-dec (lst)
  (reduce (lambda (x y) (+ (* x 2) y)) lst)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T02:07:23.730

```
(define (binary->natural lon)
  (if (null? lon)
      0 
      (+ (car lon) (* 2 (binary->natural (cdr lon)))))) 
```

# python - 使用 Jinja2 grouby 过滤器的属性错误

> ID：12738338
> 
> 赞同：1
> 
> 时间：2012-10-05T01:34:55.443
> 
> 标签：python, filter, group-by, jinja2

试图让 groupby 过滤器工作我得到一个属性错误。我的 groupby 代码如下所示：

```
{% for year, year_purchases in purchases|groupby('PurchaseDate.year')|reverse %}
            <h2 class="year">{{ year }}</h2>
            {% for ... %}
            {% endfor %}
{% endfor %} 
```

其中购买是购买实体的列表：

```
class PurchaseEntity:
    def __init__(self):
        self.PurchaseDate = ''
        self.Orders = []

    def load_from_query(self,result):
        self.PurchaseDate = result.PurchaseDate 
```

我收到以下错误：

```
AttributeError
AttributeError: PurchaseEntity instance has no attribute '__getitem__' 
```

问题似乎出在 environment.py 中：

```
def getitem(self, obj, argument):
"""Get an item or attribute of an object but prefer the item."""
try:
    return obj[argument]
except (TypeError, LookupError): #<-- Here it raises the error
    if isinstance(argument, basestring): #<-- It never reaches here
        try:
            attr = str(argument)
        except Exception:
            pass
        else:
            try:
                return getattr(obj, attr)
            except AttributeError:
                pass
    return self.undefined(obj=obj, name=argument) 
```

我不认为这是 Jinja2 或“groupby”错误，因为 getitem 函数到处都在使用。我用谷歌搜索了它，找不到任何相关的东西。但是，我所做的是更改“除了（TypeError，LookupError）：”行，它适用于任何这种替代方案：

```
except:
except Exception: 
```

我不知道我的类声明是错误的还是我只是遗漏了一些东西，因为我尝试了其他类（由 SQLAlchemy 使用自动加载创建）并且效果很好。有什么建议么？

顺便说一句，发送给 getitem 的参数是：

```
>>> (obj,argument)
(<project.logic.purchase.PurchaseEntity instance at 0x050DF148>, 'PurchaseDate')
>>> obj.PurchaseDate
datetime.datetime(2012, 9, 25, 17, 1, 44) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:43:59.267

尝试使 PurchaseEntity 扩展对象：

```
class PurchaseEntity(object): 
```

不扩展任何内容的基本类在您尝试查找项目时会抛出 AttributeError 并且它们没有。对象抛出 TypeError。

```
>>> class Foo:
...     def foo(self):
...             void    
... 
>>> class Bar(object):
...     def bar(self):
...             void
... 
>>> foo = Foo()
>>> bar = Bar()
>>> foo['foo']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: Foo instance has no attribute '__getitem__'
>>> bar['bar']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'Bar' object has no attribute '__getitem__' 
```

# emacs - 如何改变智能操作员对操作员'-'的行为？

> ID：12738344
> 
> 赞同：1
> 
> 时间：2012-10-05T01:35:13.900
> 
> 标签：emacs, elisp

看起来“智能操作员”次要模式很有趣。.el 可以帮助 c 程序员添加包含某些类型的运算符的空格，例如将 'a+b' 转换为 'a + b'。我只是试了一下。除了以下问题，它运行良好。这是情况。

至于'-' 运算符，它可以用于'a - b' 和'-1'，'-ENOMEM' 的情况。Smart-operator 涵盖了第一个用例。但是，它不适用于后者。这是与这部分相关的代码。

```
(defun smart-operator-- ()
  "See `smart-operator-insert'."
  (interactive)
  (cond ((and c-buffer-is-cc-mode (looking-back "\\- *"))
         (when (looking-back "[a-zA-Z0-9_] +\\- *")
           (save-excursion
             (backward-char 2)
             (delete-horizontal-space)))
         (smart-operator-insert "-" 'middle)
         (indent-according-to-mode))
        (t
         (smart-operator-insert "-")))) 
```

我如何修改代码以使其与“-ENOMEM”案例一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:25:31.143

最后，我有时间来解决这个问题。在 smart-operator.el 中解决这个小问题很有趣。为遇到相同问题的任何人粘贴补丁。

```
--- a/smart-operator.el 2012-11-10 16:25:27.393138909 +0900
+++ b/smart-operator.el 2012-11-10 18:22:18.281490742 +0900
@@ -307,6 +307,10 @@
              (delete-horizontal-space)))
          (smart-operator-insert "-" 'middle)
          (indent-according-to-mode))
+   ((and c-buffer-is-cc-mode (looking-back "[*/%+(><=&^|] *"))
+    (smart-operator-insert "-" 'before))
+   ((and c-buffer-is-cc-mode (looking-back "\\(return\\) *"))
+    (smart-operator-insert "-" 'before))
         (t
          (smart-operator-insert "-")))) 
```

补丁涵盖了所有这些情况。

```
a = -b;
a + -b;
<other binary operators>
return -ENOMEM; 
```

# ssrs-2008 - 如何在 SSRS 中设置矩形的可见性

> ID：12738345
> 
> 赞同：0
> 
> 时间：2012-10-05T01:35:15.840
> 
> 标签：ssrs-2008, reporting-services

我在实现矩形的可见性时遇到了一些困难，我使用这行代码来设置可见性：

```
=IIF(Len(ReportItems!txtCountVolunteer.Value) > 0, true, false) 
```

不幸的是，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:08:39.817

祝你有美好的一天。

看起来你已经在表达式中得到了颠倒的逻辑。矩形有“隐藏”属性，请注意没有“可见”属性。所以矩形的“隐藏”属性的表达式应该是：

```
=IIF(Len(ReportItems!txtCountVolunteer.Value) <= 0, true, false) 
```

# mysql - MySQL连接丢失：系统错误：110

> ID：12738346
> 
> 赞同：6
> 
> 时间：2012-10-05T01:35:36.697
> 
> 标签：mysql, connection

我正在尝试通过专用服务器上的 localhost 连接到我的 mySQL 服务器，但我不断收到错误消息：

```
Lost connection to MySQL server at 'reading initial communication packet', system error: 110 
```

代码：

```
<?php

$link = mysql_connect('localhost', '****', '****'); 
if (!$link) { 
    die('Could not connect: ' . mysql_error()); 
} 
```

我还没有配置防火墙，所以所有端口都应该打开。我需要做什么？我已经检查了其他几个类似的问题，但没有一个能解决我的问题。**我没有远程连接**。

**更新**

好的，我发现了与服务器连接的问题（我连接了两次）。我现在可以连接到服务器，但是当我运行任何查询时，服务器返回 FALSE。我以前使用过此代码并且以前可以使用，但是现在我更改了服务器，它无法正常工作。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:06:42.213

可能是您使用不同的参数连接到您的数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T17:48:06.820

我在服务器 A 上有一个类似的错误代码“110”。从未更改过服务器 A 和 B 上的凭据等。但是，我的问题是一台服务器实际上是通过 MySQL 端口进行通信的：服务器 B 的 3306，并且我最近在服务器 B 上设置了防火墙，以允许从服务器 A 远程访问 MySQL。服务器 A 试图连接到服务器 B MySQL 端口 3306，而网络服务器将超时，发出 MySQL 错误代码和代码行错误。

对我有用的解决方案是：
**sudo ufw status**

检查 MySQL 端口是否在列表中，如果没有，请执行以下操作：
**sudo ufw allow mysql**

这会将 ip4 和 ip6 规则添加到防火墙允许列表中。

祝你好运！

# r - 使用字符串标准拆分列表中的矩阵

> ID：12738359
> 
> 赞同：1
> 
> 时间：2012-10-05T01:37:19.577
> 
> 标签：r, list, matrix, split, unique

我创建了一个包含 105 个矩阵的列表，如下所示：

```
m<-vector("list",105)
for (i in 2:105) {
    m[[i-1]]<-Datos[(x[i-1]+1):x[i],1:14] }
m[[105]]<-Datos[(x[105]+1):533195,1:14] 
```

例如，我的矩阵编号 104 的一部分返回（在列中）：

```
m[[104]]

    ID:                    
     8866 
     8866 
     8866 
     8866 
     8866 
     8866 
     8866 
     8866

  Date: 
     1990-4-15 
     1990-4-16
     1990-4-17
     1990-4-18
     1990-4-15
     1990-4-16
     1990-4-17
     1990-4-18

    Series: 
        APV 
        APV 
        APV 
        APV 
        INV 
        INV 
        INV 
        INV 
```

这些是我的一些矩阵列。我想要的是使用系列列拆分这个矩阵。我认为这就像一个列表，取决于不同系列的数量。在这种情况下有2个：（`APV and INV`注意我不知道每个矩阵的系列名称，所以必须有一个函数可以提取唯一的不同系列）

总而言之，我希望：

```
m[[104]][[1]] returns:

        ID:                    
         8866 
         8866 
         8866 
         8866 

      Date: 
         1990-4-15 
         1990-4-16
         1990-4-17
         1990-4-18

        Series: 
            APV 
            APV 
            APV 
            APV 

And m[[104]][[2]] returns:

        ID:                    
         8866 
         8866 
         8866 
         8866 

      Date: 
         1990-4-15 
         1990-4-16
         1990-4-17
         1990-4-18

        Series: 

            INV 
            INV 
            INV 
            INV 
```

或者，也许您想出了一种更有效的方法来做到这一点。

PD：不知道如何将列放在同一级别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:02:45.927

试试这个：

```
library(plyr)
lapply(m, dlply, "Series") 
```

或者：

```
lapply(m , function(x)split(x, x$Series)) 
```

# php - 返回以特定字母开头的结果

> ID：12738362
> 
> 赞同：2
> 
> 时间：2012-10-05T01:38:25.567
> 
> 标签：php, mysql

变量`$letter`是英文字母。

如何`WHERE`在下面的查询中放置一个子句，以便它只返回`title`以与变量相同的字母开头的结果`$letter`？

```
$letter = $_GET['letter'];

$query2 = "select title, COUNT(*) as titlerows from submission
GROUP BY title  
order by title asc
LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T01:40:19.073

```
$query2 = "select title, COUNT(*) as titlerows from submission WHERE title LIKE '$letter%'
GROUP BY title  
order by title asc
LIMIT $offset, $rowsperpage"; 
```

编辑：

```
$letter = mysql_real_escape_string($_REQUEST['letter']);

$query2 = "SELECT `title`, COUNT(*) as `titlerows` from `submission`
WHERE `title` LIKE '".$letter."%'  
GROUP BY `title` ASC  
LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:55:00.133

```
WHERE `title` LIKE '$title%' 
```

使用 LIKE 然后注意 %，它表示 none 或 all，这将返回所有 title 开头为 $title 值的记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:41:30.700

这应该这样做

```
$letter = $_GET['letter'];

$query2 = "SELECT title, COUNT(*) AS titlerows FROM submission WHERE title LIKE '$letter%'
GROUP BY title  
order by title asc
LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T02:09:09.470

首先，你不应该直接将变量插入到 SQL 语句中，除非你可以 100% 确定它是安全的，即你只是在服务器端定义了它并且它不包含用户可以制作/更改的数据。为了安全起见，通常最好不要将任何变量插入到查询中。

其次，由于其他问题已经提供了答案，我将演示一个更安全的版本：

```
$query = "SELECT * FROM submission WHERE title LIKE '" . mysql_real_escape_string($letter) . "%';"; 
```

`%`在 a 中使用的字符`WHERE ... LIKE ...`将匹配任意数量的字符，类似于`.*`在正则表达式中。另请注意，“_”可用于匹配任何单个字符。

# r - R：保持在 For 循环中生成的值

> ID：12738363
> 
> 赞同：0
> 
> 时间：2012-10-05T01:38:25.847
> 
> 标签：r, function, vector, for-loop

我提前为这个问题道歉，但我看起来很努力并且无法找到解决方案。

如何在变量中由 for 循环生成的值？

例如：

```
myfunction <- function(x=1:5) {
                for(i in 1:length(x)) {
                r<-x[i]
                }
                print(r)
              } 
```

如果我运行上面的代码，我只会得到 x 的最后一个值，在这种情况下是 5。我知道这是因为我每次都通过 for 循环覆盖 r。

我也试过：

```
myfunction <- function(x=1:5) {
                for(i in 1:length(x)) {
                r[i]<-x[i]
                }
                print(r)
              } 
```

但我仍然只是得到最后一个值。

我发现的唯一解决方案是在使用 r<-numeric(length) 之前指定将保存生成值的变量的长度：

```
myfunction <- function(x=1:5) {
                r<-numeric(5)
                for(i in 1:length(x)) {
                r[i]<-x[i]
                }
                print(r)
              } 
```

但是如果我事先不知道要返回的向量的长度，这个解决方案显然是不够的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:44:37.207

你的循环只经过一次，它是 i = length(x)。你可能想要

```
for(i in seq(length(x))){
    # code here
}

# or

for(i in seq_along(x)){
    # code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:15:13.800

您可以初始化一个长度为 0 的向量，然后将值附加到它上面。如果您有数千个文件，这将是低效的，只有几百个应该没问题。

```
myfunction <- function(){
    my_vector <- vector(mode = "numeric", length = 0)
    for( i in 1:400){
        x <- read.csv("my_file")    #add code to read csv file.
        #Say the file has two columns of data you want to compute the correlation
        temp_cor <- cor(x[,1], x[,2])
        my_vector <- c(my_vector, temp_cor)
    }
    return(my_vector) 
```

}

[R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)的第 2 章有很好的关于增长向量的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T04:43:16.210

```
holder <- c()#generating empty vector
x <- (1:5) #generting somthing to loop

for (i in seq_along(x)){ #loop through x
     holder <- c(holder,i*2)#and put it into holder
  }

print(holder) 
```

# java - JFrame不显示输出？

> ID：12738365
> 
> 赞同：0
> 
> 时间：2012-10-05T01:38:39.767
> 
> 标签：java, arrays, class, methods, awt

我是 Java 新手，整个使用数组 + 使用类及其方法来填充和显示数组。我花了过去 2-3 个小时，研究这个并检查谷歌的各种答案，但似乎没有任何帮助，我仍然被困住。在使用数组时，我真的不知道如何使用 rectangle1 类中的方法。

主类：

```
public static void main(String[] args) {
    GameBoard frame = new GameBoard();
} 
```

游戏板类

```
public class GameBoard extends JFrame {

    public GameBoard() {

        JFrame frame = new JFrame();
        frame.setBounds(0, 0, 195, 215);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Rectangle1 board[][] = new Rectangle1[3][3];
        for (int row = 0; row < board.length; row++) {
            for (int col = 0; col < board[row].length; col++) {
                board[row][col] = new Rectangle1(0, 0, 195, 215);
                if ((row + col) % 2 == 0) {
                    Graphics g = null;    
                    board[row][col].paint(g);
                    g.setColor(Color.yellow);
                    g.fillRect(0, 0, 195, 215);
                } else {
                    Graphics h = null;
                    board[row][col].paint(h);
                    h.setColor(Color.red);
                    h.fillRect(0, 0, 195, 215);
                }
                frame.add(board[row][col]);
            }    
        }  

    }
} 
```

矩形 1 类。

```
public class Rectangle1 extends JComponent  {

    /** post:   getX() == x  and  getY() == y
     *          and  getWidth() == w  and getHeight() == h
     *          and  getBackground() == Color.black
     */
    public Rectangle1(int x, int y, int w, int h)  {
        super();
        setBounds(x, y, w, h);
        setBackground(Color.black);
    }

    /** post:   this method draws a filled Rectangle
     *          and  the upper left corner is (getX(), getY()) 
     *          and  the rectangle's dimensions are getWidth() and getHeight()
     *          and  the rectangle's color is getBackground()
     */
    public void paint(Graphics g)  {
        g.setColor( getBackground() );
        g.fillRect(0, 0, getWidth()-1, getHeight()-1);
        paintChildren(g);
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:54:13.270

Firstly, you are fighting the layout manager, calling something like `setBounds(x, y, w, h)` in you `Rectangle` class is going to overridden by the layout manager of the parent container (the frame in this case)

Secondly, you are not responsible for painting, do this;

```
board[row][col].paint(g);
g.setColor(Color.yellow);
g.fillRect(0, 0, 195, 215); 
```

...is wrong. If it doesn't end up with you programming crashing, then your lucky.

While I try and figure out a solution, you might like to take some time and read through

*   [Creating a GUI With JFC/Swing](http://docs.oracle.com/javase/tutorial/uiswing/index.html), and [Laying Out Components Within a Container](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)
*   [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Painting in AWT and Swing](http://www.oracle.com/technetwork/java/painting-140037.html)

While on my rant...

This; public void paint(Graphics g) { g.setColor( getBackground() ); g.fillRect(0, 0, getWidth()-1, getHeight()-1); paintChildren(g); }

is inappropriate. You MUST call `super.paint()`, there's to much going on in the background for you to override this method without calling it's `super`.

In fact, you should avoid overriding `paint` where ever possible and user `paintComponent` instead.

Also, coordinates in Swing are relative to the component. That is, the top/left corner of any component (within the context of the component) is always 0x0

Here's a working example

```
public class TestBoard {

    public static void main(String[] args) {
        new TestBoard();
    }

    public TestBoard() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                new GameBoard();

            }
        });

    }

    public class GameBoard extends JFrame {

        public GameBoard() {

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;

            Rectangle1 board[][] = new Rectangle1[3][3];
            for (int row = 0; row < board.length; row++) {

                gbc.gridx = 0;

                for (int col = 0; col < board[row].length; col++) {
                    board[row][col] = new Rectangle1(195, 215);
                    if ((row + col) % 2 == 0) {
                        board[row][col].setBackground(Color.YELLOW);
                    } else {
                        board[row][col].setBackground(Color.RED);
                    }
                    frame.add(board[row][col], gbc);
                    gbc.gridx++;
                }

                gbc.gridy++;

            }

            frame.pack();
            frame.setVisible(true);

        }
    }

    public class Rectangle1 extends JPanel {

        public Rectangle1(int w, int h) {
            setPreferredSize(new Dimension(w, h));
        }

    }
} 
```

Because of the nature of your requirements, I've been forced to use `GridBagLayout` which is not the simplest of layout managers to use.

`JComponents` are transparent by nature and you are required to fill them, better to use `JPanel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:59:54.507

注释：

1.  `GameBoard`extends`JFrame`但是你`JFrame`在构造函数中创建了一个实例`GameBoard`。你应该做一个或另一个，但不能两者都做。

2.  `Rectangle.paint()`应该是`Rectangle.paintComponent()`。现在您只需创建 Rectangle 对象并将它们添加到容器中，例如 a`JFrame`或 a `JPanel`。它们将被自动绘制。`paint()`如果您要`paintComponent()`扩展`JComponent`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:52:25.700

You are using the `null` Graphics object to paint your window. Instead of using

```
Graphics g = null; Graphics h = null; 
```

Use

```
Graphics g = getGraphics(); Graphics h = getGraphics(); 
```

Most probably this would have given you a `NullPointerException` isn't it?

And more over since your rectangles are inheriting from the `JComponent`, you should not call `paint()` method yourself. Instead call `repaint()` once all of them are added to the frame.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T01:52:49.413

Here is your problem:

```
Graphics g = null;
board[row][col].paint(g); 
```

You calling paint() with a null Graphics which causes a `NullPointerException`

```
public void paint(Graphics g)  {
        g.setColor( getBackground() );
        g.fillRect(0, 0, getWidth()-1, getHeight()-1);
        paintChildren(g);
} 
```

# algorithm - n位计数器摊销分析

> ID：12738378
> 
> 赞同：0
> 
> 时间：2012-10-05T01:39:39.603
> 
> 标签：algorithm, counter, amortized-analysis

假设我们有一个二进制计数器，它支持两种操作：将所有位递增和重置为零。如果单个位的修改或检查需要 Theta(1) 时间，那么如何将计数器实现为位数组，以便初始零计数器上的任何递增和复位操作序列都需要 O(n) 时间？

通过聚合分析，并考虑到并非所有位每次都必须翻转的事实，我能够看到只允许递增的计数器需要 O(n) 时间进行 n 次操作。但我坚持如何实现增量重置计数器。据我所知，翻转就是翻转，没有什么能比平常更快地神奇地使 1111 变为 0000。但是，我确实注意到，通过增量操作，我们不会经常遇到超级昂贵的全 1 情况。

我想真正的问题是，实际上是否有一种*策略*可以使用重置实用程序来实现高效的计数器，或者我只是想*证明*它会变成一个只有增量操作的计数器？我唯一的提示是“保留指向高位 1 的指针”，这似乎暗示了前者。

# asp.net-mvc - MVC POST 到控制器操作并从列表视图传递参数？

> ID：12738380
> 
> 赞同：4
> 
> 时间：2012-10-05T01:39:48.050
> 
> 标签：asp.net-mvc, listview, post, jquery-mobile

我正在做一个项目，另一个开发人员有一些这样的代码......

```
<script type="text/javascript">
    function submitForm() {
        document.forms[0].submit();
    }
</script>       

@foreach (var product in Model)
{
    using (Html.BeginForm("SelectProduct", "Home", new {productId = product.Id}))
    {
    <tr>
        <td>
            <a href="#" id="submit_form" onclick="submitForm();">@product.Id</a>
        </td>
        <td>
            @product.Name
        </td>
    </tr>
    }
} 
```

它构建了一个包含可点击产品 ID 和产品名称的 2 列表。单击 productId 时，它会发布到主控制器上的 SelectProduct 操作

```
[HttpPost]
public ActionResult SelectProduct(Guid productId)
{
   ...
} 
```

我喜欢这个，因为它是一个 POST 并且不会在 url\querystring 中发送 productId。（我改变了这个例子的代码，这些arnt真的productIds和id更喜欢在url中没有这个数据）

但我不喜欢这个，因为...

*   它不起作用，因为它总是发布表单 [0]
*   不知道我喜欢它如何为每个产品创建一个表格
*   它弄乱了我正在处理的jquery mobile listview，格式很奇怪。我不完全确定为什么，但认为是因为形式。

相比之下，我有一个带有锚标签的以下列表视图，并且呈现得很好。

```
<ul data-role="listview" data-inset="true" data-dividertheme="b">
    <li><a href="@Url.Action("Index", "SomeControllerA")">Some Controller A</a> </li>
    <li><a href="@Url.Action("Index", "SomeControllerB")">Some Controller B</a> </li>
    <li><a href="@Url.Action("Index", "SomeControllerC")">Some Controller C</a> </li>
</ul> 
```

所以我的问题是...

如何在不使用单独的重复表单的情况下制作具有相同功能的类似表格/产品列表（即单击 productID 并 POST 到传递 productId 但不在查询字符串中的控制器操作）？

我在想可能只是一种形式，但以某种方式正确的 productID 被传递给控制器​​。这样我就可以在*@foreach (var product in Model)*之外拥有*Html.BeginForm*。

 *我想我正在尝试做一些类似于 LinkBut​​ton 曾经在网格中做的事情。这就像我想要 ActionLinks 但我希望他们发布而不是 GET。

感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:41:07.273

您的代码 a 有许多错误点。我建议使用 ajax 的替代方法

1.使用foreach，您可以在一个页面中制作多个表单。并且在提交时您正在提交第一个表单（`document.forms[0].submit()`）。独自的

重写你的html如下

```
@foreach (var product in Model)
{

<tr>
    <td>
        <a href="#" id="submit_form" onclick="submitForm(@product.Id);"></a>
    </td>
    <td>
        @product.Name
    </td>
</tr>

} 
```

并使用 jquery 对服务器进行 ajax 调用。

```
var productid;
        function submitForm(productid) {

        $.ajax({
            type: 'GET',
            url: "/Home/SelectProduct?productId="+productid,

            contentType: "application/json; charset=utf-8",
            success: function (_results) {
               $("#resultdiv").html(_results);
            },
            error: function (_results) {
            }
        });
    } 
```

并接受 productid 作为查询字符串

```
var ProductId=HttpContext.Request.QueryString["productId"] 
```

2.Still 如果您采用相同的方法......您期望查询字符串作为操作方法中的参数。这是错的

你可以这样接受。（在以下代码段`using (Html.BeginForm("SelectProduct", "Home", new {productId = product.Id}))`中，您添加的 productId 属性可以被接受为服务器端方法中的查询字符串。）

```
var ProductId=HttpContext.Request.QueryString["productId"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:04:31.623

你不能用普通链接（带`<a>`标签）来做`Ajax.ActionLink()`。改用方法。[文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)

**例子：**

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

@Ajax.ActionLink("Click this link", "SelectProduct","Home", new { productId = product.Id }, new AjaxOptions { UpdateTargetId = "DivToUpdateWithResult", HttpMethod = "POST" ,OnComplete = "js_function_to_call_afterComplete();" }) 
```*

# windows-8 - WinRT / Win8 中的 MediaElement 根本不起作用

> ID：12738382
> 
> 赞同：3
> 
> 时间：2012-10-05T01:40:08.127
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我对 WinRT（Windows 8 应用程序）感到非常沮丧。我在最基本的功能上遇到了很多问题，而且没有支持它的文档。

所以，这是我已经发布的关于 WinRT 的系列的下一个问题：

```
<MediaElement Width="500" 
              Height="500"
              Source="ms-appx:///Assets/SampleVideo.wmv" /> 
```

**为什么这不起作用？！！！**

*   没有视频显示。
*   没有播放音频。
*   没有错误信息。
*   没有抛出异常。

**没有引发以下事件：**

*   媒体打开
*   媒体失败
*   媒体结束
*   寻找已完成
*   下载进度已更改
*   BufferingProgressChanged

引发的唯一事件是*CurrentStateChanged*，它在状态为“打开”时发生。就是这样。没有其他事情发生。

我尝试使用这样的流手动执行此操作：

```
var packageLocation = Windows.ApplicationModel.Package.Current.InstalledLocation;
var assetsFolder = await packageLocation.GetFolderAsync("Assets");
var myVideo = await assetsFolder.GetFileAsync("SampleVideo.wmv");
var stream = await myVideo.OpenAsync(FileAccessMode.Read);

_Player.SetSource(stream, myVideo.ContentType);
_Player.Play(); 
```

**这也不起作用。**同样的不活动。

SampleVideo.wmv文件是构建类型*Content*，我可以在 Windows Media Player 和 Zune 中很好地打开它*。*所以视频文件绝对没有问题。但是，我确实尝试了其他文件，如 MP4、AVI 等。没有任何效果。

 *其他人有问题吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:27:31.590

经过 48 小时的研究和痛苦的试错后，我在 MSDN 论坛上找到[了这个链接。](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/44e34afe-f308-4843-b3c6-7f00c55ce65d)

最后，Windows 8 不会对应用程序产生异常。MediaElement 静默失败，而所有其他视频播放器运行良好。

**解决方案**：如果您在任何 Mac 笔记本电脑/台式机上安装了 Bootcamp，则直接前往显卡制造商并下载他们最新的驱动程序。对我来说，我有一台 MacBook Pro 17"，它使用 AMD Radeon 6600m 系列。可以[在此处找到](http://support.amd.com/us/gpudownload/Pages/bootcamp-win7.aspx)64 位版本的驱动程序。

无论如何，我很抱歉浪费了任何人的时间。

感谢@JimO'Neil 提供帮助 :)*

# asp.net - 使用 asp:Literal 和 string.Format 时数据不更新

> ID：12738386
> 
> 赞同：0
> 
> 时间：2012-10-05T01:40:28.103
> 
> 标签：asp.net, vb.net, formatting, string-formatting, itemtemplate

我们使用 string.Format("{0:(###) ###-####}" 在 DetailsView 中显示格式化的电话号码。电话号码的示例是：

(516) 123-4567

```
<asp:TemplateField HeaderText="Primary Phone:" SortExpression="PrimaryPhone">

    <EditItemTemplate>
        <asp:TextBox ID="TextBoxPrimaryPhoneEdit" runat="server" Text='<%# Bind("PrimaryPhone") %>'></asp:TextBox>
    </EditItemTemplate>

    <InsertItemTemplate>
        <asp:TextBox ID="TextBoxPrimaryPhoneInsert" runat="server" Text='<%# Bind("PrimaryPhone") %>'></asp:TextBox>
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:Literal ID="PrimaryPhoneLiteral" runat="server" 
            Text='<%# iif(Len(Eval("PrimaryPhone"))=10,
            string.Format("{0:(###) ###-####}", Int64.Parse(Eval("PrimaryPhone").ToString())),
            Eval("PrimaryPhone")) %>' />
    </ItemTemplate>

    <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

当电话号码正好是 10 个号码时，它的格式很好，它允许用户编辑电话。我们遇到的问题是当用户删除电话号码并尝试单击更新按钮时。即使数据库表列确实允许空值，但在用户在 TextBox 中键入内容之前，不会保存数据。

我在编码中犯了错误吗？我们希望以这种方式设置它，以防用户在单击更新按钮之前清除手机文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:45:01.900

我过去犯的一个错误是，如果文本框为空，您也需要将相应的变量设置为空。

例如，我的代码看起来像：

```
if (TextBox1.Text.Trim() != String.Empty)
{
    myObj.TextContent = TextBox1.Text;
} 
```

但是在控件为空的情况下，需要将对应的变量设置为null：

```
if (TextBox1.Text.Trim() != String.Empty)
{
    myObj.TextContent = TextBox1.Text;
}
else
{
    myObj.TextContent = null;
} 
```

**编辑：**

老实说，我真的只使用代码背后的东西，所以对 aspx 方面不太熟悉（比如模板字段等等）。但无论如何，假设您可以访问所需控件的内容（我将其称为 PhoneNumberTextBox），并假设您有一个名为 UpdateButton 的按钮：

```
protected void UpdateButton_Click(object sender, EventArgs e)
{
    //this event runs on click of the button
    Customer theGuy = new Customer();

    if (PhoneNumberTextBox.Text.Trim() != String.Empty)
    {
        theGuy.PhoneNumber = PhoneNumberTextBox.Text;
    }
    else //the control is empty
    {
        theGuy.PhoneNumber = null;
    }

    CustomerManager.Save(theGuy);
}

public static class CustomerManager
{
    public static void Save(Customer customer)
    {
        using (SqlConnection myconn = new SqlConnection(SQLHelper.SCOnline2ConnStr))
        {
            SqlCommand sqlcmd = new SqlCommand("CustomerManagement.sprocSaveCustomer", myconn);
            sqlcmd.CommandType = CommandType.StoredProcedure;
            sqlcmd.Parameters.Add("@PhoneNumber", SqlDbType.NVarChar);

            sqlcmd.Parameters["@PhoneNumber"].Value =
                (customer.PhoneNumber == null) ?
                (object)DBNull.Value : customer.PhoneNumber;

            myconn.Open();
            sqlcmd.ExecuteNonQuery();
            myconn.Close();
        }
    }
} 
```

# java - 不幸的是，在 OnClick 事件中使用 if 子句时 myapp 已停止

> ID：12738387
> 
> 赞同：1
> 
> 时间：2012-10-05T01:40:27.973
> 
> 标签：java, if-statement, clause

我在创建我的第一个项目时遇到了一个问题，不幸的是，myapp 已停止。这是代码错误：

```
public class MainActivity extends Activity {
Button btnLogin;
EditText txtUsername;
EditText txtPassword;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnLogin=(Button)this.findViewById(R.id.btnLogin);
    btnLogin.setOnClickListener(new View.OnClickListener(){         
            public void onClick(View v) {
            // TODO Auto-generated method stub
            if (txtUsername.getText().toString().equals(txtPassword.getText().toString()))
            {
                  Toast.makeText(MainActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
            }                   
        }           
    });       

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

但是，如果我不使用“If 子句”，则只使用 Toasted.maketext ....show() 就可以了。我认为“If 子句”可能是错误的，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:37:10.697

1.  您的代码没有初始化`txtUsername`变量。你需要这样做，否则你会得到一个`NullPointerException`.

2.  您`txtUsername`在（匿名）内部类中使用变量。为了做到这一点，变量必须是最终变量。

# openstack - 公开一个 OpenStack 映像，供我的所有用户使用

> ID：12738396
> 
> 赞同：0
> 
> 时间：2012-10-05T01:42:02.860
> 
> 标签：openstack, eucalyptus

我配置了 2 节点 Openstack 部署。目前我从 Eucalyptus 网站安装了一张图片。该图像设置为“私有”我想将其设为“公共”，以便 Openstack 部署中的所有用户都可以使用它。我无法完全弄清楚如何做到这一点。

这是 ami 的 euca-describe-image 输出。

IMAGE ami-00000006 centos53-image-bucket/centos.5-3.x86-64.img.manifest.xml 可用私有 x86_64 机器 aki-00000004 ari-00000005 instance-store

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:03:10.063

您还可以使用 Glance CLI 更改图像属性。

利用

```
glance image-list 
```

获取图像列表，它们类似于：

```
glance image-update ########-####-####-####-############ --is-public=true 
```

将其设置更改为公开

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-07T11:40:41.767

openstack 图像集 --public IMAGE_ID

# r - 构建定义引用类的 R 包

> ID：12738402
> 
> 赞同：2
> 
> 时间：2012-10-05T01:43:06.557
> 
> 标签：r, reference-class

我正在创建一个 R 包。该包定义了几个参考类。类之间存在依赖关系，因为一个是基类，另一个是子类。由于这种依赖关系，包文件必须按一定的顺序加载：首先是*基类*，然后是子类。然而，仅凭我的运气，R 会先加载*子类*并抱怨未定义基类。

如何强制包的源文件以特定顺序执行？

我目前的kludge“解决方案”是将所有类定义放入一个源文件中，首先定义基类。说丑。一定有更好的办法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:54:47.047

我认为该`Collate:`领域为 S4 课程做到了这一点，并且在这里也可能有所帮助。来自[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)手册，[第 1.1.1 节](http://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file)

> 当为包安装处理这些 R 代码文件时，“整理”字段可用于控制包中 R 代码文件的整理顺序。默认是根据“C”语言环境进行整理。如果存在，则整理规范必须列出包中的*所有*R 代码文件（考虑可能的特定于操作系统的子目录，请参阅“包子目录”）作为相对于“R”子目录的文件路径的空格分隔列表。需要引用包含空格或引号的路径。将使用特定于操作系统的排序规则字段（“Collat​​e.unix”或“Collat​​e.windows”）而不是“Collat​​e”。

例如 XML 包有

```
Collate: AAA.R DTD.R DTDClasses.R DTDRef.R SAXMethods.S XMLClasses.R
        applyDOM.R assignChild.R catalog.R createNode.R dynSupports.R
        error.R flatTree.R nodeAccessors.R parseDTD.R schema.S
        summary.R tangle.R toString.S tree.R version.R xmlErrorEnums.R
        xmlEventHandler.R xmlEventParse.R xmlHandler.R
        xmlInternalSource.R xmlOutputDOM.R xmlNodes.R xmlOutputBuffer.R
        xmlTree.R xmlTreeParse.R htmlParse.R hashTree.R zzz.R
        supports.R parser.R libxmlFeatures.R xmlString.R saveXML.R
        namespaces.R readHTMLTable.R reflection.R xmlToDataFrame.R
        bitList.R compare.R encoding.R fixNS.R xmlRoot.R serialize.R
        xmlMemoryMgmt.R keyValueDB.R solrDocs.R XMLRErrorInfo.R
        xincludes.R namespaceHandlers.R tangle1.R 
```

# api - 如何使用 Win32 API 找到子窗口的子窗口（3 级深）的子 HWND？

> ID：12738408
> 
> 赞同：4
> 
> 时间：2012-10-05T01:44:22.203
> 
> 标签：api, winapi, findwindow, findwindowex

假设我有一个用于其中一个进程的 Window 层次结构：

```
Main Window               (class name: XYZ_Widget_1)
`- Child Window           (class name: XYZ_Widget_0)
  `- Child-Child Window    (class name: XYZ_Renderer) 
```

如何找到 的 HWND `Child-Child Window`？

我尝试`FindWindow`在类上使用 Win32 API 函数，`XYZ_Renderer`但该`FindWindow`函数找不到子窗口。

然后我尝试使用`FindWindow`to find `Main Window`，它成功了，但之后使用`FindWindowEx`只能找到`Child Window`as`Child-Child Window`不是`Main Window`.

我想我可以更深入一层并在找到 FindWindowEx 时调用`Child Window`它。

但在我这样做之前，我想也许有一种简单的方法可以找到`Child-Child Window`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T01:59:42.883

您必须调用`FindWindowEx()`要下降的每个子级别，将`HWND`在上一个级别中找到的指定为父级，例如：

```
HWND hWnd = FindWindow("XYZ_Widget_1", NULL);
if (hWnd != NULL)
{
    hWnd = FindWindowEx(hWnd, NULL, "XYZ_Widget_0", NULL);
    if (hWnd != NULL)
    {
        hWnd = FindWindowEx(hWnd, NULL, "XYZ_Renderer", NULL);
        // and so on... 
    }
} 
```

没有更简单的方法可以做到这一点。为了简化代码，您可以编写自己的函数，该函数接受类/窗口名称的路径作为输入，并`FindWindow/Ex()`根据需要循环调用每个分支。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T08:49:06.507

调用[`EnumChildWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494.aspx)将父窗口作为`hwndParent`. 您的窗口是类名等于的窗口`XYZ_Renderer`。

该[文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494.aspx)指出：

> 如果子窗口创建了自己的子窗口，**EnumChildWindows**也会枚举这些窗口。

# join - 使用 Hive 在不同列上有效地连接同一张表

> ID：12738414
> 
> 赞同：3
> 
> 时间：2012-10-05T01:45:10.450
> 
> 标签：join, hive, hiveql

我正在努力尽可能有效地解决这个问题。

假设我有一个表**ids**，其中有一列包含整数列表，我们称之为“ids”：

```
ids
0
1
2
3
4
5
6 
```

我还有另一个表**items**，其中有几列整数：

```
item1    item2    item3    item4
5        2        2        4
9        2        1        19
0        25       9        2 
```

我想要做的是从 table2 中选择所有列，但如果值不在“ids”表中，我想要一个 NULL。所以我的结果看起来像这样：

```
item1    item2    item3    item4
5        2        2        4
NULL     2        1        NULL
0        NULL     NULL     2 
```

我可以通过从**项目**中选择并加入每个列的**id来做到这一点：**

```
SELECT CASE WHEN ids1.id IS NOT NULL THEN items.item1 ELSE NULL,
       CASE WHEN ids2.id IS NOT NULL THEN items.item2 ELSE NULL,
       CASE WHEN ids3.id IS NOT NULL THEN items.item3 ELSE NULL,
       CASE WHEN ids4.id IS NOT NULL THEN items.item4 ELSE NULL,
FROM items
LEFT OUTER JOIN ids ids1 ON (ids1.id = items.item1),
LEFT OUTER JOIN ids ids2 ON (ids2.id = items.item2),
LEFT OUTER JOIN ids ids3 ON (ids3.id = items.item3),
LEFT OUTER JOIN ids ids4 ON (ids4.id = items.item4) 
```

不幸的是，当这些表变得很大（数百万行）时，必须加入同一个表 4 次是相当麻烦的。有没有更快或更有效的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:19:12.547

这是一个示例，循环通过对其进行规范化、左连接以针对 id 进行测试，最后将其转回。

```
create table ids ( id int );
insert ids values(0),(1),(2),(3),(4),(5),(6);
create table items (itemid int, item1 int, item2 int, item3 int, item4 int);
insert items select
1,5,2,2,4 union all select
2,9,2,1,19 union all select
3,0,25,9,2;

select *
from (
    select u.itemid,ids.id,u.item
    from items
    unpivot (id for item in (item1,item2,item3,item4)) u
    left join ids on ids.id = u.id
) x
pivot (max(id) for item in (item1,item2,item3,item4)) p 
```

# java - Android：在 SurfaceViev 上移动多个位图

> ID：12738418
> 
> 赞同：2
> 
> 时间：2012-10-05T01:45:36.157
> 
> 标签：java, android, bitmap, draw, surfaceview

我想用手指在表面视图上移动两个简单的位图。使用一个位图，它工作正常，但我无法处理两个位图。我使用 imageview onTouchListener 进行了尝试，但后来我不得不使用 API 级别 11 的 View.setX(float x) 并且我不想超过 API 级别 8。我该如何实现它？

```
 public class ItemClass extends SurfaceView implements SurfaceHolder.Callback, Runnable {

    private SurfaceHolder surface;
    private Paint p = new Paint();
    private Bitmap[] item = new Bitmap[2];
    private int[] coord = new int[2];

    public DrawClass(Context context) {
        super(context);
        getHolder().addCallback(this);
        surface = getHolder();
        item[0] = BitmapFactory.decodeResource(getResources(), R.drawable.img1);
        item[1] = BitmapFactory.decodeResource(getResources(), R.drawable.img2);        
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {}

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

        Thread drawThread = new Thread(this);
        drawThread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {}

    @Override
    public void run() {

        Canvas c;
        while (true) {
            c = null;
            try {
                c = surface.lockCanvas(null);
                synchronized (surface) {
                    onDraw(c);

                }
            } finally {
                if (c != null) {
                    surface.unlockCanvasAndPost(c);
                }
            }
        }

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        coord[0]=(int)event.getX();
        coord[1]=(int)event.getY();

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);

        canvas.drawBitmap(item[0], coord[0], coord[1], null);
        canvas.drawBitmap(item[1], 100, 100, null);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:12:36.623

好的，这是一个简化答案的尝试，假设您使用的是矩形位图（无透明度）。

首先，您需要存储两个对象的 x、y 坐标和宽度、高度。我建议为您的位图创建一个自定义类，而不是当前位图数组 Bitmap[] 项：

```
private class MyImage{
            Bitmap image;
            int x,y,w,h;
        }
private MyImage[] images = new MyImage[2]; 
```

您将不得不相应地更改您的代码，例如。item[0] = BitmapFactory.decodeResource(getResources(), R.drawable.img1); -> 图像[0].image = BitmapFactory.decodeResource(getResources(), R.drawable.img1);

坐标[0] -> 图像[0].x

坐标[1] -> 图像[0].y

您可以从图像中获取宽度和高度属性，例如：

```
images[0].h = images[0].image.getHeight();
images[0].w = images[0].image.getWidth(); 
```

根据您的偏好 - 为这些图像提供固定的 x,y 值，或者您可以在屏幕尺寸内给它们随机值。请参阅示例如何在此处使用 Math.random[如何在 Java 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)并在此处显示大小[以像素为单位获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

然后 onTouchEvent 检查 x,y 是否在您的一个图像内并且是 - 而不是仅移动该图像。就像是：

```
for (int i = 0; i<=images.length; i++){
            //if touch event is inside this image - move it
            if (coord[0] >= (images[i].x) && coord[0] <= (images[i].x+images[i].w) &&
                    coord[1] >= (images[i].y) && coord[1] <= (images[i].y+images[i].h) ){
                //offset the image by the distance of the touch event from the center of the image
                images[i].x += coord[0] - (images[i].x+images[i].w/2);
                images[i].y += coord[1] - (images[i].y+images[i].h/2);
                canvas.drawBitmap(images[i].image, images[i].x, images[i].y, null);
            } else {
                //draw the iamge at its old position
                canvas.drawBitmap(images[i].image, images[i].x, images[i].y, null);
            }
        } 
```

还要考虑您的对象是否可以重叠，如果没有，您需要相应地防止这种情况。

希望这可以帮助。

# javascript - 使用javascript上传之前的zip文件

> ID：12738426
> 
> 赞同：4
> 
> 时间：2012-10-05T01:46:39.120
> 
> 标签：javascript, image, upload, zip

我正在寻找这个问题的 javascript 解决方案。[HTML 压缩文件上传？](https://stackoverflow.com/questions/1939791/html-compress-file-upload)

我发现它在 SO 的其他地方问过，但我更喜欢 javascript 解决方案，因为我广泛使用 html5 来实现拖放等效果。

到目前为止，有问题的文件都是图像。我希望不要一张一张地上传图片。

我也找到了这个 jszip[库](http://stuartk.com/jszip/)，但找不到任何说明如何将其用于上传目的的示例或文档。

# c# - Toast 通知不起作用？

> ID：12738428
> 
> 赞同：3
> 
> 时间：2012-10-05T01:47:47.720
> 
> 标签：c#, windows-runtime, toast, winrt-xaml

当我在我的应用程序中单击一个按钮时，我正在按照几个示例来做一个 toast 通知。我逐步完成了以下示例：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868254.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868254.aspx)

我没有收到任何错误，但是当我运行应用程序时，我没有收到 toast 通知。我在这里创建了一个片段：http: [//codepaste.net/btkzeg](http://codepaste.net/btkzeg)

```
ToastTemplateType toastTemplate = ToastTemplateType.ToastImageAndText01;
XmlDocument toastXml = ToastNotificationManager.GetTemplateContent(toastTemplate);

XmlNodeList toastTextElements = toastXml.GetElementsByTagName("text");
toastTextElements[0].AppendChild(toastXml.CreateTextNode("Hello World!"));

XmlNodeList toastImageAttributes = toastXml.GetElementsByTagName("image");

((XmlElement)toastImageAttributes[0]).SetAttribute("src", "ms-appx:///assets/oil.png");
((XmlElement)toastImageAttributes[0]).SetAttribute("alt", "oil graphic");

IXmlNode toastNode = toastXml.SelectSingleNode("/toast");
((XmlElement)toastNode).SetAttribute("duration", "long");

((XmlElement)toastNode).SetAttribute("launch", "{\"type\":\"toast\",\"param1\":\"12345\",\"param2\":\"67890\"}");

ToastNotification toast = new ToastNotification(toastXml);

ToastNotificationManager.CreateToastNotifier().Show(toast); 
```

如果您有建议，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T02:05:03.380

我弄清楚了这个问题。我需要将我的应用清单设置为 Toast Capable。我还注意到它在模拟器模式下不起作用......但在本地机器模式下它起作用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:59:25.060

此外，请确保您在清单 (Package.appxmanifest) 中设置了“toast 能力”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:58:36.800

在 Package.appxmanifest 文件中，ApplicationUI/Toast 功能应该为 Yes 以显示我们的 toast 通知。

# iphone - 将 NSString 从一个 Tableviewcontroller 传递到另一个

> ID：12738430
> 
> 赞同：0
> 
> 时间：2012-10-05T01:48:00.607
> 
> 标签：iphone, objective-c, xcode

我一直在寻找并尝试解决这个问题几个小时。我知道我犯了一个非常简单的错误，我只是不知道它是什么！

我正在尝试获取输入到两个不同 UITextFields 中的文本并将它们放入另一个 TableViewController 的表中。

我的 NSLog 返回我的 addGuestViewController 正在接收文本输入，但没有将其传输到我的 guestlistViewController。

guestlistViewController.h

```
@interface guestlistViewController : UITableViewController {
    NSString *firstnameInput;
    NSString *lastnameInput;
}
@property (nonatomic, retain) NSString *firstnameInput;
@property (nonatomic, retain) NSString *lastnameInput;

@end 
```

guestlistViewController.m

```
@synthesize firstnameInput;
@synthesize lastnameInput;
NSString *fullname = [NSString stringWithFormat:@"%@ %@", firstnameInput, lastnameInput];

NSArray *array = [[NSArray alloc] initWithObjects: fullname, nil];
NSLog(@"Their name is: "%@", fullname); 
```

addGuestListViewController.h

```
@interface addGuestViewController : UITableViewController

@property NSString *firstnameInput;
@property NSString *lastnameInput;

@end 
```

addGuestListViewController.m

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    firstnameInput = firstname.text;
    lastnameInput = lastname.text;

    if (textField == firstname) {
        [textField resignFirstResponder];
        [lastname becomeFirstResponder];
    } else if (textField == lastname) {
        [textField resignFirstResponder];
        [self performSegueWithIdentifier:@"done" sender:self];
        NSLog(@"Their name is: %@, %@", firstnameInput, lastnameInput);
    }
    return YES;
} 
```

如果有人能告诉我我做错了什么，那将是一个巨大的帮助，因为我对 Objective-C 编程还很陌生。

编辑：

我在想，因为我的 segue 指向导航控制器，它可能会导致问题，但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:03:29.987

您没有设置guestlistViewController 的属性、firstnameInput 和lastnameInput——在textFieldShouldReturn: 方法中，您将文本字段中的值分配给addGuestListViewController 的属性，而不是guestlistViewController 中的属性。您需要实现方法 prepareForSegue:sender:，并在该方法中使用 segue.destinationViewController 获得对 guestlistViewController 的引用。使用该参考，您可以在该视图控制器中设置属性的值。像这样的东西：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     [(guestlistViewController *)[[(UINavigationController *)segue.destinationViewController viewControllers] lastObject] setFirstnameInput:firstnameInput];
     [(guestlistViewController *)[[(UINavigationController *)segue.destinationViewController viewControllers] lastObject] setLastnameInput:lastnameInput];
} 
```

# javascript - 在客户端/服务器之间同步数据

> ID：12738433
> 
> 赞同：0
> 
> 时间：2012-10-05T01:48:19.763
> 
> 标签：javascript, html, node.js, architecture, socket.io

我正在制作一个简单的 html5 游戏用于学习目的。我想通过网络发送尽可能少的数据以保持同步。当我在客户端和服务器之间发送游戏状态时，我只想发送自上次更新以来游戏状态发生的变化，以节省带宽/延迟。

我能想到的唯一方法是在从远程源接收到的每个更新上创建一个“快照”或游戏状态对象的副本，然后在本地操作游戏状态并需要发送到远程源循环遍历游戏状态对象，将每个值与临时游戏状态进行比较，只发送差异......

这是最有效的方法吗？

```
/****************************/
/**** Current game state ****/
gameState = {

    playerOneID: 'XXX-XXX-XXX-XXX',
    playerTwoID: 'YYY-YYY-YYY-YYY',
    elapsedTime: 00007,
    myVariable: 'abcd1234'    
}    

/*******************************************/
/**** saves game state from last update recieved ****/
tmpGameState = {

    playerOneID: 'XXX-XXX-XXX-XXX',
    playerTwoID: 'YYY-YYY-YYY-YYY',
    elapsedTime: 00003,
    myVariable: 'abc123'    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:53:27.487

大多数网络至少将数据发送到最多 1024 字节的数据包中，并且至少在计划离开时发送。

# c# - 无法正确停止 HwndSource Hook

> ID：12738434
> 
> 赞同：2
> 
> 时间：2012-10-05T01:48:28.703
> 
> 标签：c#, .net

如何正确停止钩子？由于挂钩，我无法正确关闭应用程序。

代码背后：

```
protected override void OnSourceInitialized(EventArgs e)
        {
            base.OnSourceInitialized(e);
            IntPtr windowHandle = (new WindowInteropHelper(this)).Handle;
            HwndSource src = HwndSource.FromHwnd(windowHandle);
            src.AddHook(new HwndSourceHook(WndProc));
        }

 private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
        {
            // Handle WM_DEVICECHANGE
            if (msg == 0x0219)
            {
RunService();
    } 
```

我写了类似下面的东西，但它不会正确停止应用程序：

```
private void StopHook()
        {
            IntPtr windowHandle = (new WindowInteropHelper(this)).Handle;
            HwndSource src = HwndSource.FromHwnd(windowHandle);
            src.RemoveHook(new HwndSourceHook(this.WndProc));
        }

protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
        {
            base.OnClosing(e);
            StopService(); // to clear thread
            StopHook();
        } 
```

* * *

更新：

我认为 RunService 导致了问题，但我正在使用 StopService 关闭所有线程。

# objective-c - iOS6：xcode 4.5 中出现重复符号错误

> ID：12738435
> 
> 赞同：0
> 
> 时间：2012-10-05T01:48:58.950
> 
> 标签：objective-c, cordova, ios6

我在运行我的应用程序时遇到问题。

由于重复符号，我收到构建失败。

![在此处输入图像描述](../Images/ba89e449e18b7e33e53b15263e5368b2.png)

我在**`magtek idynamo`**我的应用程序中包含一个 sdk。在我以前的应用程序版本中，我通常将 libMTSCRA.a 添加到库中，并将 MTSCRA.h 添加到我的项目中。根据我的研究，人们认为出现问题是因为我引用了 .h 以及我设法在我的应用程序的 ios5 版本上工作的 .a。令人沮丧..我一直在用头撞墙。

有任何想法吗？

**更新** ![在此处输入图像描述](../Images/163d56bacce16f10b829db54436cd6a9.png) 这是我的框架和库的屏幕截图。libMTSCRA.a 只列出一次。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T15:17:06.323

我也有这个问题，经过很多次，我可以通过删除其他链接器标志=>“-all_load”来解决它

由于这个标志，MagTek 的 2 个库（iphoneos 和 iphonesimulator）同时包含在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:58:16.180

This error doesn't have anything to do with the header files. Instead, it indicates that the listed function **bodies** (usually in the .m, but a part of the static library if you're built them into a static library) are being included twice.

Most likely, you're including the static library twice. It may be that one of those inclusions is indirect; you're including another static library that's also including the static library.

# treeview - JavaFX2 TreeItem 添加到 TreeView 时不显示

> ID：12738440
> 
> 赞同：1
> 
> 时间：2012-10-05T01:50:10.980
> 
> 标签：treeview, javafx-2, javafx

我有一个树视图。我已将上下文菜单添加到树中的项目中，并通过添加节点来对菜单选择做出反应。由于某种原因，我第一次单击上下文菜单时，菜单并没有消失，TreeView UI 也没有更新。如果我再次单击上下文菜单消失，树中添加了 2 个项目。如果我再次进入上下文菜单并单击它通常会在以后每次添加 1 个项目。有什么建议吗？

我使用 TreeItem.getChildren().add() 添加子 TreeItems。这是创建 TreeCell 工厂的代码（创建上下文菜单。

```
public NodeTreeView(NodeView rootNodeView) {
    setRoot(rootNodeView);
    setCellFactory(new Callback<TreeView<String>,TreeCell<String>>() {
        @Override
        public TreeCell<String> call(TreeView<String> p) {
            return new TextFieldTreeCellImpl();
        }
    });
    getSelectionModel().setSelectionMode(SelectionMode.SINGLE);
    getSelectionModel().selectedItemProperty().addListener(this);
}

@Override
public void changed(
        ObservableValue<? extends TreeItem<String>> ov,
        TreeItem<String> deselectedTreeItem,
        TreeItem<String> selectedTreeItem) {
    NodeView nodeView = null;

    nodeView = (NodeView) selectedTreeItem;
    System.out.println("Display properties for " + nodeView.getController().getType());
}

private final class TextFieldTreeCellImpl extends TreeCell<String> {

    @Override
    public void updateItem(String item, boolean empty) {
        super.updateItem(item, empty);
        if (empty) {
            setText(null);
            setGraphic(null);
        } else {
            NodeMenuController nodeMenuController = null;

            nodeMenuController = new NodeMenuController(getController());
            setText(getString());
            setGraphic(getTreeItem().getGraphic());
            setContextMenu(nodeMenuController.getView());
    } 
```

最后，这是菜单项的构建方式：

```
public class NodeMenuController {

private NodeController nodeController;

public NodeMenuController(NodeController controller) {
    this.nodeController = controller;
}

public ContextMenu getView() {
    ContextMenu contextMenu = null;

    contextMenu = new ContextMenu();
    if (ChildMap.hasAllowedChildren(nodeController.getType())) {
        contextMenu.getItems().add(getAddChildMenuItem());
    }
    return contextMenu;
}

private MenuItem getAddChildMenuItem() {
    Menu         menu             = null;
    List<String> allowedChildList = null;

    menu = new Menu("+ Child");
    allowedChildList = ChildMap.get(nodeController.getType());
    for (final String allowedChildType : allowedChildList) {
        MenuItem menuItem = null;

        menuItem = new MenuItem(allowedChildType);
        menuItem.setOnAction(new EventHandler() {
            @Override
            public void handle(Event t) {
                NodeController newNodeController = null;

                newNodeController = new NodeController(new NodeModel(allowedChildType));
                nodeController.add(newNodeController);
            }
        });
        menu.getItems().add(menuItem);
    }
    return menu;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:18:14.893

原来我在选择处理程序中有一个我没有注意到的 NullPointerException。如果有人有这个问题，那是一回事。

# visual-studio-2012 - 有没有办法在 Visual Studio 2012 中大规模组织使用？

> ID：12738441
> 
> 赞同：7
> 
> 时间：2012-10-05T01:50:15.113
> 
> 标签：visual-studio-2012, using

在 Visual Studio 2010 中，我知道您可以使用 PowerCommands 扩展来右键单击->项目和“删除和排序使用”，我还知道您可以在右键单击上下文菜单上基于单个文件组织使用。

我确实找到了创建一个新宏的说明，该宏在整个项目中执行组织 usings 命令来执行此操作，但是并没有走得太远 - 因为我相信[Visual Studio 2012 不支持宏](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/d8410838-085b-4647-8c42-e31b669c9f11/)。

有人对如何做这个集体有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T02:08:05.240

我使用[CodeMaid](http://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496)，它似乎在整个解决方案中都能正常工作。不过不太清楚它是如何在幕后工作的:)

# iphone - 如何在Iphone屏幕上设置一个标志，以便点击时可以回到这个屏幕？

> ID：12738444
> 
> 赞同：0
> 
> 时间：2012-10-05T01:50:44.597
> 
> 标签：iphone

我在 iphone 中有一个项目，其中有很多`UIViewController`. 我想设置一个标志或其他东西来恢复它`UIViewController`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:28:36.030

我发现要重新加载 tableDataSource 的数据，如下所示：

```
 -(void)reloadData:(NSArray *)data andCurrentLevel:(NSInteger) alevel{
    RootViewController *root =[[self.navigationController viewControllers] objectAtIndex:0];
//    RootViewController *root = [[RootViewController alloc]init];
    root.tableDataSource = data;
    [root.tableView reloadData];
    root.CurrentLevel = alevel;
} 
```

在我的按钮中发送短信。我添加了以下几行：

```
 NSArray *data = newDataSource;
    [self reloadData:data andCurrentLevel:newCurrentLevel];
    [self.navigationController popToRootViewControllerAnimated:YES]; 
```

它可以回到我想要的屏幕。但我的导航栏按钮有问题

# sql - What is the maximum number of records i can see in Notepad++?

> ID：12738446
> 
> 赞同：3
> 
> 时间：2012-10-05T01:51:03.867
> 
> 标签：sql, sql-server, sql-server-2008, notepad++, ssis

I have a file with the name ABC.D110111 which is of 10GB size. I have to load this huge data to database table. So i created a DTS package to load from file to table. before loading i just want to see how many records exist in the file. So i opened it in notepad++. It is showing around 2.1 millions (21 lakhs) records.

Since it is a 10GB file, it will definitely have more than 2.1 millions records. But i am able to see only 0.2 millions (2 lakhs) records. Is there any row limitation in Notepad++? If yes, how many rows or how much size?

If load it as it is by running my DTS package, will i get all records or few records?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:55:25.470

If you load it using a DTS package, it will serially process the file chunks at a time. It won't attempt to load everything into memory first, so you will get all your records.

It looks like Notepad++ has a limit of 2G and will load that much of the file without crashing. If you see 2lakhs rows, then each row probably consumes 10K of space.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-31T15:49:47.400

Notepad++ v7.9 行数限制为 25165891

# android - Android 标签片段

> ID：12738447
> 
> 赞同：1
> 
> 时间：2012-10-05T01:51:07.357
> 
> 标签：android, listview, tabs, android-fragments

我的标签片段似乎没有显示任何内容。我知道我的代码中一定缺少某些东西。有人可以帮我吗？下面是我的尝试。

根据 UgglyNoodle 的建议修改

问题：我的片段选项卡没有显示任何内容。

MainActivity.java

```
 public class MainActivity extends SherlockFragmentActivity implements TabListener {
    private Fragment mFragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(true);

        //mFragment = new AppleFragment();

        Tab tab = actionBar.newTab()
                .setText("Apple")
                .setTabListener(this)
                .setIcon(R.drawable.apple);

        actionBar.addTab(tab);

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
         if (mFragment == null) {
                mFragment = new AppleFragment();
                ft.add(android.R.id.content, mFragment);
            } else {
                ft.attach(mFragment);
            }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

AppleFragment.java

```
 public class AppleFragment extends SherlockListFragment{

        static final String URL = "http://api.androidhive.info/pizza/?format=xml";
        // XML node keys
        static final String KEY_ITEM = "item"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_NAME = "name";
        static final String KEY_COST = "cost";
        static final String KEY_DESC = "description";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        return super.onCreateView(inflater, container, savedInstanceState);

        }

        public void onActivityCreated(Bundle savedInstanceState) {

            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);
            }

            ListAdapter adapter = new SimpleAdapter(getActivity(), menuItems,
                    R.layout.list_item,
                    new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                            R.id.name, R.id.desciption, R.id.cost });

            setListAdapter(adapter);    

        }
} 
```

XMLParser.java

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

日志猫：

```
10-05 16:24:30.031: E/AndroidRuntime(19244): FATAL EXCEPTION: main
10-05 16:24:30.031: E/AndroidRuntime(19244): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: android.os.NetworkOnMainThreadException
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.os.Looper.loop(Looper.java:137)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread.main(ActivityThread.java:4512)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at java.lang.reflect.Method.invokeNative(Native Method)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at java.lang.reflect.Method.invoke(Method.java:511)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at dalvik.system.NativeStart.main(Native Method)
10-05 16:24:30.031: E/AndroidRuntime(19244): Caused by: android.os.NetworkOnMainThreadException
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at in.wptrafficanalyzer.actionbarsherlocknavtab.XMLParser.getXmlFromUrl(XMLParser.java:45)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment.onCreate(AppleFragment.java:50)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:834)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1136)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.Activity.performStart(Activity.java:4475)
10-05 16:24:30.031: E/AndroidRuntime(19244):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1943)
10-05 16:24:30.031: E/AndroidRuntime(19244):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:07:44.673

你不需要你的`AppleFragment`课。相反，您可以让您`MainActivity`实施`TabListener`. 这是一些快速代码，可以为您提供基本概念，但我尚未对其进行测试，需要进行一些修复。

```
public class MainActivity extends SherlockFragmentActivity implements TabListener {
    private Fragment mFragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(true);

        Tab tab = actionBar.newTab()
                .setText("Apple")
                .setTabListener(this)
                .setIcon(R.drawable.apple);

        actionBar.addTab(tab);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if (mFragment == null) {
        mFragment = new ArrayListFragment();
        ft.add(R.id.content, mFragment, "some_tag");
    } else {
        ft.attach(mFragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

当您有多个选项卡时，您需要跟踪多个片段，并根据所选选项卡附加和分离正确的片段。

最后，你`ArrayListFragment`应该扩展`ListFragment`，你仍然可以使用`setListAdapter()`等等。

[这个页面](http://www.vogella.com/articles/Android/article.html#fragmentsactionbar)有一个很好的例子，虽然它比我建议的要复杂一些。

# javascript - 匿名函数开头的`$`有什么区别？

> ID：12738449
> 
> 赞同：1
> 
> 时间：2012-10-05T01:51:22.497
> 
> 标签：javascript, jquery, function

> **可能重复：**
> [javascript中的“$”符号是什么意思](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)

`$`匿名函数开头的区别是什么？

**这个例子：**

```
(function() {
  ...
})(); 
```

**对比这个：**

```
$(function() {
  ...
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:00:53.477

```
(function() {})(); 
```

上面的行是创建一个匿名函数，然后立即执行它

```
$(function() {})(); 
```

假设您已加载 jQuery，上面的行会导致错误。这部分 $(function(){}) 将一个匿名函数传递给运行的 jQuery。jQuery 会返回一个 Document 对象给你。因为您有结束括号 ()，所以 Javascript 将尝试将 Document 对象作为函数执行。因为 Document 对象不是函数，所以会引发 TypeError 异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:00:43.307

取自 jQuery 网站：

> 许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

您可以[在此处](http://api.jquery.com/jQuery.noConflict/)阅读所有相关信息。

这正如之前在[这个](https://stackoverflow.com/q/1150381/352449)和[这个](https://stackoverflow.com/q/7083340/352449)stackoverflow 问题中所涵盖的一样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:05:17.550

像所有其他答案一样

```
 $(function(){
          ...
      }); 
```

真的只是

```
 jQuery(function(){

     }); 
```

第二个将相同，它与您示例中的其他类型的函数之间的区别在于，第一个必须从某个地方调用，其中作为 jQuery 版本 - 如果 jQuery 以 HTML 加载，它将自动运行当文件准备好时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T01:53:34.617

您的第一个示例是一个自执行函数，它在定义后立即开始执行，而第二个示例在文档准备好被操作时由 jQuery 执行。

为了更好地理解为什么第一个模式有用，您可以参考[这个 SO answer](https://stackoverflow.com/a/592414/667984)。

您还可以在函数文档中阅读有关将函数传递给 jQuery 的更多[`.ready()`信息](http://api.jquery.com/ready/)。

# caching - 某些 Google CDN 资源的有效期很短

> ID：12738450
> 
> 赞同：1
> 
> 时间：2012-10-05T01:51:33.443
> 
> 标签：caching, google-analytics, cdn, google-plus-one

我正在使用 Google PageSpeed 分析我的页面，但惊讶地发现是 Google 本身带来了错误：

# 此页面的建议

以下可缓存资源具有较短的新鲜生命周期。为以下资源指定至少一周后的到期时间：

*   [https://apis.google.com/js/plusone.js（30](https://apis.google.com/js/plusone.js)分钟）
*   [http://www.google-analytics.com/ga.js（12](http://www.google-analytics.com/ga.js)小时）

似乎 Google 的 +1 和 Analytics 的 CDN 文件具有超短的到期时间，违背了 CDN 的目的。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:35:03.810

CDN 的目的是*分发*内容，从而使其更接近您的用户并减少往返时间 (RTT) 的距离因素，并且不会对 RTT 的其他两个因素产生影响*，*即光速和服务器响应请求所需的时间。

在一般情况下，它通常是静态内容，可以*很容易地*从简单的缓存规则中受益，因为大多数 CDN 没有动态内容生成功能，所以可以很容易地从简单的缓存规则中受益。即，不容易缓存）CDN 上的内容。

至于为什么谷歌选择了相对较短的缓存到期窗口，在*任何*性能改进方面总是需要权衡取舍，尤其是在缓存方面。缓存的最大权衡是可能的最新内容与生成最新内容所需的资源之间的平衡。

这种平衡会因其影响的用户规模以及您可用于生成内容的资源而发生巨大变化。在 Google 的情况下，我猜他们已经决定 30 分钟的窗口足够长，他们可以看到*巨大的*资源优势，但仍然足够短，他们很乐意将自己限制在 30 分钟的最短响应时间来部署新代码.

[这](http://css.dzone.com/articles/caching-fun-and-profit-or-why)是一个有趣的观点，为什么缓存 5 秒也是一个值得的提议，尽管你必须在更新窗口之间取得平衡，我之前提到过。

# javascript - css 树形菜单在 IE8 中不起作用

> ID：12738452
> 
> 赞同：2
> 
> 时间：2012-10-05T01:51:36.033
> 
> 标签：javascript, html, css, menu

我正在使用来自该站点的 CSS 树菜单：[http ://www.thecssninja.com/css/css-tree-menu](http://www.thecssninja.com/css/css-tree-menu)

我似乎无法让它在 IE8 中工作。

在 IE8 中，它显示如下菜单：

![在此处输入图像描述](../Images/681578e00a2c8791a84051154924c1a3.png)

但是在 IE9 中它看起来像这样：

![在此处输入图像描述](../Images/8635635f904dc221d86f2d50728425d7.png)

在该网站的教程中，它说：

> 这在 IE8 中可以很好地工作，但需要一些 JavaScript 才能让 IE8 解释检查过的伪类，我不会讨论这个问题。

有谁知道“需要一些 JavaScript 才能让 IE8 解释检查的伪类”是什么意思？

或者甚至知道让它在 IE8 中工作需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:12:18.647

IE8 不处理伪类、选择器组合器等。永远记住，IE 在现代标准支持方面通常落后于所有其他浏览器几年。所以我们必须使用 javascript 和用于修复 IE 的许多库中的一些，例如样板或现代化工具。

# ruby-on-rails-3 - Rails Mongoid 模型/视图计算

> ID：12738454
> 
> 赞同：1
> 
> 时间：2012-10-05T01:51:57.043
> 
> 标签：ruby-on-rails-3, model, views, mongoid, document-database

我需要通过几个模型的视图来做一些计算。例子：

```
class Teacher
  include Mongoid::Document

  has_many :students
end

class Student
  include Mongoid::Document
  belogns_to :teacher

  field gold_stars, type: Integer
  field silver_stars, type: Integer
  field bronze_stars, type: Integer
end 
```

假设在老师的观点上，我需要汇总 gold_stars、silver_stars 和 brown_stars 的数量。聚合视图中的值的最干净的方法是什么？我猜我会使用 after_update 回调，但我不确定是否有更好的方法。

更新

我想要的是老师显示他所有的学生总共有多少颗金星，然后是银，然后是铜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:25:28.377

这是解决方案

```
teacher = Teacher.first
gold_stars = Student.where(:teacher_id => teacher.id).sum(:gold_stars)
silver_stars = Student.where(:teacher_id => teacher.id).sum(:silver_stars)
bronze_stars = Student.where(:teacher_id => teacher.id).sum(:bronze_stars) 
```

# windows-8 - 在 Windows 应用商店应用程序中归因第三方插件工作的最佳方法是什么

> ID：12738456
> 
> 赞同：1
> 
> 时间：2012-10-05T01:52:06.593
> 
> 标签：windows-8, windows-store-apps

我在我的应用程序中使用博客中的某些插件和代码。我想知道将我的工作归功于他们的正确方法。创建关于页面的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:55:31.310

好吧，不是单独的关于页面本身，而是点击设置弹出窗口（Windows + I 键）

看看一些预加载的应用程序，如天气、金融和旅行，它们在设置面板上都有一个关于部分。天气应用程序甚至有一个单独的选项，可以调用 Image Credits。

可以在[Windows 开发中心](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770544.aspx)找到更具体的指导。

# bash - 如何在变量中获取 bash 命令的输出

> ID：12738460
> 
> 赞同：15
> 
> 时间：2012-10-05T01:52:35.343
> 
> 标签：bash, shell, ubuntu, command-line

我一直在关注一些类似的问题（例如[How to set a variable to output from a command in Bash?](https://stackoverflow.com/questions/4651437/how-to-set-a-bash-variable-equal-to-the-output-from-a-command)），但是接受的答案似乎对我不起作用。我不确定我是否应该破坏别人的问题或发布我自己的副本，所以如果我在这里选错了，请道歉。

我希望在我放在一起的脚本中获得许多命令的输出和退出状态。这是我一直在使用的示例：

```
cmd_output=$(rm $file)
exit_status=$?
if [ "${exit_status}" -eq 0 ]
then
log "Successfully removed the original" ${TAB_LEVEL}
else
fail "Failed to remove the original, the output was: \n ${cmd_output}"
fi 
```

日志和失败函数是：

```
# Usage: fail "Failure message"
function fail {
echo "FATAL ERROR: $1" >> "${LOG_DIR}/${LOG_FILE}"
exit 1
}

# Usage: log "Log message" 3    Where the tab-level is 3.
function log {
if (("${2}" > 0))
then
eval "printf '    %.0s' {1..$2}" >> "${LOG_DIR}/${LOG_FILE}"
fi
echo "$1" >> "${LOG_DIR}/${LOG_FILE}"
return 0
} 
```

在上面的示例中，我使用了 $(cmd) 格式，但我也尝试过使用反引号。

在我的日志文件中，出现故障时我看到的只是：

> 致命错误：无法删除原件，输出为：\n

此外，失败命令的输出会照常显示在屏幕上。我的 cmd_output 变量保持为空是否有一个常见原因？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-05T01:56:05.370

您必须包含特殊标准错误输出流的输出：

```
cmd_output=$(rm "$file" 2>&1) 
```

每个程序都有三个默认流（即编号的文件描述符）：

```
0\. Standard input (where the program normally reads from)
1\. Standard output (where the program normally writes to)
2\. Standard error (where the program normally writes error messages) 
```

`$(...)`因此，要捕获错误消息，我们必须将标准错误输出 (stderr) 重定向到正常的标准输出 (stdout)，然后表达式将捕获该输出。

重定向的语法是通过`>`“运算符”。在它之前你告诉哪个文件描述符重定向（默认为 1，即标准输出）。您可以指定它以重定向到文件。如果你`&`在它后面写一个 & 符号 ( )，你会强制它重定向到另一个文件描述符。因此，在本例中，我们将文件描述符 2 (stderr) 重定向到文件描述符 1 (stdout)。

此外，您还可以使用`<`“运算符”重定向输入，但在这种情况下，默认文件描述符为 0 (stdin)。

另一个观察结果是，将`$file`变量放在双引号之间可能是一种好习惯，以防它包含空格字符。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T02:02:16.713

* **nix 命令一般有两种输出形式：**标准输出（`stdout`）和标准错误（`stderr`）。

`FOO=$(...)`只捕获`stdout`，并且不受阻碍地离开`stderr`。

如果你想`stderr`使用这种语法的内容，你需要给你的命令加上后缀，`2>&1`以便`stderr`合并到`stdout`. （例如像这样`rm $file 2>&1`：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:24:48.020

由于您的`fail`功能刚刚退出，因此简单地执行以下操作会容易得多：

```
set -e  # Abort on failure
exec 2>> "${LOG_DIR}/${LOG_FILE}"  # Append all errors to LOG_FILE
if cmd_output=$(rm $file)
  log "Successfully removed the original" ${TAB_LEVEL}
fi 
```

此代码与原始代码之间的唯一区别是它不打印文本`FATAL ERROR:`。`log`由于简洁是一种美德，完全跳过该功能可能会更好。大声报告错误；默默地成功。

# javascript - If-else statement is not working, would like to ignoreCase in JavaScript

> ID：12738461
> 
> 赞同：0
> 
> 时间：2012-10-05T01:52:42.550
> 
> 标签：javascript, if-statement

Everything else on my page works perfectly. The alert(userinput.value); works perfectly... but the statements do not call the button. The code only returns the valid commands in the else statement.

```
 function btn_go_click(){
           var userinput = document.getElementById("txtcommand");   
           alert(userinput.value);         
           if (userinput.value === ("N" || "North")){
              btn_North_click();                
           }else if (userinput.value === ("E" || "East")){ 
              btn_East_click();
           }else if (userinput.value === ("S" || "South")){
              btn_South_click();
           }else if (userinput.value === ("W" || "West")){ 
              btn_West_click();                       
           }else{
            UpdateText ("Valid commands are \"n\", \"e\", \"s\", \"w\"");                   
          }
       } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T01:56:38.573

The result of `("N" || "North")` will always be `"N"`.

So `if (userinput.value === ("N" || "North"))` is just same as

`if (userinput.value === "N")`, you need to write:

```
 if (userinput.value === "N" || userinput.value === "North") 
```

Or you could write like below (*ignore case*):

```
if (['n', 'north'].indexOf(userinput.value.toLowerCase()) > -1) {

} // ... and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:13:24.217

我知道这应该是一个评论，发表评论太长了。

如果你正在制作一款冒险游戏，你最好制作一个“命令列表”，而不是试图做出巨大的“如果-那么”。

为实例

```
var cmds = [
  {
    keywords: ["n", "north"],
    help: "Move north, if you can.",
    func: move_north
  },
  {
    keywords: ["get", "take"],
    help: "take an object.",
    func: get_object
  }
]; 
```

这种方法还为您提供了内置命令列表和帮助文件。

此外，我喜欢让命令解析器采用 3 个字母的快捷方式，这样我就不必输入整个单词。然而，这只是锦上添花。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:00:09.050

如果您想忽略大小写，最简单的方法是将所有内容都大写。

```
val valueToCompare = userinput.value.toUpperCase(); 
```

然后只需使用大写的所有值（“NORTH”而不是“North”），您甚至不必关心用户输入的大小写。

你的ifs被打破了。这是您修复的代码：

```
function btn_go_click(){
    var userinput = document.getElementById("txtcommand").value.toUpperCase();   
    alert(userinput.value);         
    if (userinput === "N" || userinput === "NORTH") {
        btn_North_click();                
    } else if (userinput === "E" || userinput === "EAST") {  
        btn_East_click();
    } else if (userinput === "S" || userinput === "SOUTH") {
        btn_South_click();
    } else if (userinput === "W" || userinput === "WEST") { 
        btn_West_click();                       
    } else {
        UpdateText ("Valid commands are \"n\", \"e\", \"s\", \"w\"");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T02:03:10.560

如果您想忽略大小写，您可以将所有内容转换为小写或大写，或者使用忽略大小写的正则表达式，例如

```
function btn_go_click(){
    var userinput = document.getElementById("txtcommand");   
    var value = userinput.value.toLowerCase();

    if (value == "n" || value == "north") 
```

或者

```
 var reN = /^(n|north)$/i;

    if (reN.test(value)) 
```

您可能还想从输入中修剪前导和尾随空格，以便改进匹配。

# javascript - 访问通过 AJAX 加载的 XML 数据时，为什么 IE9 会失败并显示错误 (SCRIPT438)？

> ID：12738468
> 
> 赞同：0
> 
> 时间：2012-10-05T01:53:34.593
> 
> 标签：javascript, jquery, ajax, internet-explorer-9

说真的，IE的翻转有什么问题？当我访问通过 AJAX 加载的 XML 数据时，它会引发“对象不支持此属性或方法”错误。我整晚都在寻找原因，但没有成功。

代码没有问题，XML 数据也没有问题，其他浏览器都可以正常工作，实际上它甚至可以在 IE9 中工作，但只有在本地运行时，只要它在 Internet 区域中就会开始抛出错误。人们可能会认为这是区域安全设置，但它甚至不适用于最低安全设置。

调试器显示 XML 数据已成功加载和解析，它显示数据是 type `IXMLDOMDocument2`，而在本地它说它是 type `Document`，查看 jQuery 源代码表明它可能`Microsoft.XMLHTTP`在本地使用，否则`XMLHttpRequest`如果可用，所以这可能与它有关。

我可以通过将数据加载为文本并在之后使用 $.parseXML 来解决这个问题，但我真的很想知道这里发生了什么，这是一个已知的错误，还是我错过了其他东西？

示例（使用 jQuery 1.8.2）：

```
<?xml version='1.0' encoding='utf-8'?>
<root>
    <child>child</child>
</root>

$.ajax({
    url: 'test.xml',
    dataType: 'xml',
    success: function(data)
    {
        alert(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:05:25.130

如果您想将“数据”视为可以发出警报的字符串，请执行以下操作：

```
$.ajax({
    url: 'test.xml',
    dataType: 'text',
    success: function(data)
    {
        alert(data);
    }
}); 
```

如果您正在使用 XML 执行其他操作，我们需要查看您正在尝试执行的操作。

根据您发布的内容（我下载了它），这适用于 IE：

```
$.ajax({
    url: 'test.xml',
    dataType: 'xml',
    success: function (data) {
        alert(jQuery(data).find('child').text());
    }
}); 
```

# java - java3d not working on mac mountain lion

> ID：12738469
> 
> 赞同：2
> 
> 时间：2012-10-05T01:54:05.170
> 
> 标签：java, macos, osx-mountain-lion, java-3d

I've been trying for hours now to make java 3d work on my macbook and I can't figure out what's wrong with it... Here is what I've done:
- I downloaded java3d 1.5 and replaced the original files in /System/Library/Java/Extensions.
- I then installed JOGL following a tutorial in the same (...)/Java/Extensions folder.
- As it still did not work, I decided to try the original version of java3d so I renamed the files.

I'm working on a Mac os x mountain lion with java 1.7.0_07 Here is a result of a java -version:

```
 java version "1.7.0_07"
    Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
    Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

Here is the content of my Java/extensions folder:

```
 AppleScriptEngine.jar   gluegen-rt.jar          j3dutils.jar.new        libAppleScriptEngine.jnilib libgluegen-rt.jnilib            libnewt.jnilib
    MRJToolkit.jar          j3daudio.jar            jai_codec.jar           libJ3D.jnilib               libjogl_desktop.jnilib          mlibwrapper_jai.jar
    QTJava.zip              j3dcore.jar             jai_core.jar            libJ3DAudio.jnilib          libmlib_jai.jnilib              vecmath.jar
    dns_sd.jar              j3dcore.jar.new         jogl-all.jar            libJ3DUtils.jnilib          libnativewindow_awt.jnilib      vecmath.jar.new
    gluegen-java-src.zip    j3dutils.jar            jogl-java-src.zip       libQTJNative.jnilib         libnativewindow_macosx.jnilib 
```

I can compile java 3d codes with javac but here is the result when I try to launch it:

```
 $> java Hello3d
    JavaVM WARNING: JAWT_GetAWT must be called after loading a JVM
    AWT not found
    Exception in thread "main" java.lang.NoClassDefFoundError: apple/awt/CGraphicsDevice
        at javax.media.j3d.GraphicsConfigTemplate3D.<clinit>        (GraphicsConfigTemplate3D.java:55)
        at com.sun.j3d.utils.universe.SimpleUniverse.getPreferredConfiguration(SimpleUniverse.java:368)
        at com.sun.j3d.utils.universe.Viewer.<init>(Viewer.java:348)
        at com.sun.j3d.utils.universe.Viewer.<init>(Viewer.java:298)
        at com.sun.j3d.utils.universe.SimpleUniverse.<init>(SimpleUniverse.java:215)
        at com.sun.j3d.utils.universe.SimpleUniverse.<init>(SimpleUniverse.java:177)
        at com.sun.j3d.utils.universe.SimpleUniverse.<init>(SimpleUniverse.java:88)
        at Hello3d.<init>(Hello3d.java:13)
        at Hello3d.main(Hello3d.java:27)
    Caused by: java.lang.ClassNotFoundException: apple.awt.CGraphicsDevice
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 9 more 
```

The java class that I'm trying to launch comes from [the official tutorial](http://java3d.org/starting.html).

Do you have any idea how I could fix this?
Thanks for your help!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T02:08:43.377

恐怕Java3D 1.5 与较新版本的OSX 不兼容，您无能为力。

我已经分叉了 Java3D 代码并用 JOGL2 后端替换了本机代码后端

你可以在这里找到关于在 OSX 上安装 JOGL2 的信息（那里还有一个 Java3d 论坛）：http: [//jogamp.org/](http://jogamp.org/)

您可以在此处（在下载下）为我的 Java3d 获取预构建的 jar 文件：

[https://github.com/hharrison/](https://github.com/hharrison/)

(j3d-core, j3d-utils, vecmath)

公平警告，目前这只适用于 OSX 上的 Java6，我一直在尝试在 OSX 上调试 Java7 的问题，但没有解决方案的 ETA ......祝你好运！

# mod-rewrite - Mod_rewrite 仅通过子域根重定向到 php 文件

> ID：12738474
> 
> 赞同：2
> 
> 时间：2012-10-05T01:54:40.723
> 
> 标签：mod-rewrite, subdomain

我运行了一个 phpbb3 CMS，并对其进行了很多定制。现在我正在尝试实现这一点，如果有人使用该链接`http://xxx.domain.tld` ，它将在内部重定向到`http://domain.tld/forum.php?subdomain=xxx`

我真正遇到的问题是，如果您现在看到其中的内容，`http://domain.tld/forum.php?subdomain=xxx`则会有一个指向另一个 php 文件的 css 链接，该文件与被调用的 forum.php 位于同一文件夹中。

最好的方法是，如果只有调用它的子域根将内部重定向到 forum.php 并且任何其他请求都将正常处理。

经过我的多次尝试，我最好的解决方案是这个

```
RewriteCond %{HTTP_HOST} ^([a-zA-Z]+)\.domain\.tld$ [NC]  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond %{REQUEST_FILENAME} !^(.*\.(jpg|png|gif|css|js))$  
RewriteRule ^(.*)$ forum.php?subdomain=%1 [L] 
```

但是你可以猜到问题出在动态css文件上，所以我希望你能帮助我^^

此外：对不起我的英语不好x|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:05:00.113

你不能只为生成css的php脚本添加一个例外吗？

像这样：

```
RewriteCond %{HTTP_HOST} ^([a-zA-Z]+)\.domain\.tld$ [NC]  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond %{REQUEST_FILENAME} !^(.*\.(jpg|png|gif|css|js))$  
RewriteCond %{REQUEST_URI} !path_to_css_script\.php$  
RewriteRule ^(.*)$ forum.php?subdomain=%1 [L] 
```

# c# - 为什么要为 SQL 触发器指定所需的参数？

> ID：12738477
> 
> 赞同：1
> 
> 时间：2012-10-05T01:54:54.643
> 
> 标签：c#, sql, sql-server, triggers, clr

在 C# 中为 SQL Server 2008 Express 编写 INSERT 触发器时：我发现需要以下 SqlTrigger 注释：

```
[SqlTrigger(Name = "SomeMethod", Target = TABLE_NAME, Event = "INSTEAD OF INSERT")]
public static void SomeMethod() { ... } 
```

Target 规范似乎是一个烦人的要求。我想让这个触发器可以在各种表上运行。无论如何要避免指定目标，或者在 SQL 的创建期间覆盖它？

与此问题类似： [SQL CLR Trigger - get Target / Table name](https://stackoverflow.com/questions/7564383/sql-clr-trigger-get-target-table-name) 但我希望能够动态设置目标。

我探索这一点的原因是我有一些表现不佳的遗留代码。我希望能够在不关闭装配触发器的情况下诊断潜在的问题。理想情况下，劫持用于它的插件，进行一些诊断，然后传回原始组件。我相信这个 Target 参数限制了我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:18:31.540

[`SqlTriggerAttribute`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqltriggerattribute.aspx)控制针对特定表的触发器注册*。*如果您选择这样做，您可以完全忽略此属性，并手动执行注册。您可以为多个表引用相同的 CLR 触发器代码，只要您[通过 SQL](http://msdn.microsoft.com/en-us/library/ms189799.aspx)进行注册：

```
CREATE TRIGGER SomeMethod1 ON Table1 AFTER  INSERT AS 
EXTERNAL NAME Namespace.SomeMethod
GO
CREATE TRIGGER SomeMethod2 ON Table2 AFTER  INSERT AS 
EXTERNAL NAME Namespace.SomeMethod 
```

`SomeMethod`然后将在对`Table1`或执行插入时调用`Table2`。

* * *

综上所述，但是，如果您的数据库包含多个具有足够相似结构的表，以至于对所有这些表运行相同的触发器代码甚至是有意义的，这通常是一个不好的迹象。Joe Celko 曾经将此问题称为[“属性拆分”](http://www.tdan.com/view-featured-columns/9852)（特别是表拆分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:28:34.980

由于 target 是 Attribute 中的必填字段，因此您需要提供它，并且可以为其提供表名或数据库名，但在运行时不能更改它。您最多可以做的是停止触发器的执行。

参考：http: [//msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqltriggerattribute.target.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqltriggerattribute.target.aspx)

# database-design - 我应该使用更少的表并使用复杂的查询来获取数据还是使用更多的表来简化查询？

> ID：12738481
> 
> 赞同：1
> 
> 时间：2012-10-05T01:55:26.490
> 
> 标签：database-design, database-table

让我们看一个用户正在跟踪的`traffic`情景`cities`。流量每两个小时更新一次，我们必须保留以前的数据来绘制图表。所以我有一张`traffic_stats`看起来像这样的桌子 -

```
traffic_stats(id,city_id,user_id,traffic,created_at) 
```

（给定流量是一个数字）

有一个 stats refresher daemon 获取**唯一** `city_id`的 s，获取这些城市的当前交通统计信息，并将新条目添加到该表本身。守护程序使用此查询来获取`city_id`-

```
SELECT * FROM traffic_stats GROUP BY city_id 
```

`city_id`并为同一个表中的每个添加新条目。每个新条目的`user_id`属性为 0，因为哪个用户订阅了城市并不重要。如果`city_id`在表中，它的 traffic_stats 会被刷新。

在前端，运行以下查询为用户获取数据 -

```
SELECT * FROM 
(SELECT * FROM traffic_stats WHERE user_id = #{session[:user_id]} ORDER BY created_at DESC)
as traffic_for_user_in_descending_order 
GROUP BY city_id 
```

这为city_id 提供了**单个*最新***条目。

这应该可以正常工作，除了如果 100 个用户正在跟踪 200 个独特的城市，那么`traffic stats`表中每两个小时就会有 200 个新条目。那是每天 2400 个条目，并且该表将继续增长。

现在，我可以有一个表，其中包含有关用户正在跟踪的城市的数据，以及另一个表，刷新守护程序添加条目。但我不确定这种方法是否有任何性能优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:22:05.753

最好创建一个单独的*City*表，这样您就可以从中查询不同的城市 ID，而不是在第一个 select 语句中扫描整个表。它也将使读取数据库更容易一些。如果您不想这样做，我建议您使用`SELECT DISTINCT city_id FROM traffic_stats`. 这样，您将检索到更少的信息。

在这种情况下，拥有一个表似乎是合理的，因为您使用信息的应用程序很简单。至于历史数据，最好创建一个单独的表来存储聚合信息。您可以修剪主表，选择并存储特定时间长度（天、周、月等）的平均值，然后通过基于用户 ID 的信息进行更多过滤。这将减少数据库磁盘使用和查询时间。

就我个人而言，我喜欢尽可能地打破常规。它确实可以进行更复杂的查询，但在我看来，它使使用和读取数据库中的信息变得更加容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:54:00.583

您应该在单独的表中拆分`city_id`and ，例如. 然后类似的查询将为您提供守护程序的跟踪城市列表。如果您正确设置了索引、FK 等，则表的不断增长的大小应该无关紧要。`user_id``user_city``SELECT DISTINCT city_id from user_city`

如果`user_id`始终为 0，`traffic_stats`那么`WHERE user_id = #{session[:user_id]}`您的查询如何工作？

使用所有可能索引的复杂查询很好。如果您每天/每周进行统计摘要，那么您还应该创建一个表来存储聚合数据，如 ralls23 建议的那样。这样您就不会读取 stats 表的每一行来生成输出/报告给用户。

# php - 为什么我会收到警告：Mysql_fetch_array() 期望参数 1 是资源，给定的布尔值？

> ID：12738482
> 
> 赞同：-5
> 
> 时间：2012-10-05T01:55:59.267
> 
> 标签：php, mysql, arrays

我知道这已经被问了一百万次，但是我已经阅读了它们，我似乎看不出问题出在哪里。

我正在使用 w3 教程中的选择代码：

```
$con = mysql_connect("$server","#user","$admin");

if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("$db", $con);

$result = mysql_query("SELECT * FROM options");

while($row = mysql_fetch_array($result)) {
  echo $row['copy_right'];
}

mysql_close($con); 
```

然后显示在：

```
<?php $FP->copy_right(); ?> if it matters, 
```

我得到的完整错误是：

> 警告：mysql_fetch_array() 期望参数 1 是资源，在第 112 行的 /Applications/XAMPP/xamppfiles/htdocs/frontcms/app/core/core.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:07:25.947

`"#user"`听起来像是`$user`。

添加错误检查将帮助您了解问题所在。

```
if (!$result) {
  die(mysql_error());
} 
```

**注意：不要引用你的变量。**

```
$con = mysql_connect("$server","#user","$admin"); 
```

应该只是

```
$con = mysql_connect($server, $user, $admin); 
```

和

```
mysql_select_db("$db", $con); 
```

应该只是：

```
mysql_select_db($db, $con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:57:16.133

试试这个，

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) 
```

**[参见 PHP 手册：mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:00:19.233

我猜你有一个拼写错误：

$con = mysql_connect("$server","#user","$admin");

`#user`应该`$user`

# asp.net - asp.net site takes a while to load after restart

> ID：12738490
> 
> 赞同：3
> 
> 时间：2012-10-05T01:56:48.760
> 
> 标签：asp.net, iis-7.5

I have an asp.net 2.0 website running on IIS 7.5\. The default page page_load event takes a while to load after a restart in iis 7.5\. In the bottom it says "waiting for....".
If I hit the default page after without restarting iis it loads very quickly. I cant really post the exact code here. What could be the cause? Is it recompiling the whole website? If so how can I prevent this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T01:58:09.140

This is normal. It is, indeed, recompiling the site. There are several things that can cause a JIT recompile on an ASP.NET site.

More information can be found [here](http://msdn.microsoft.com/en-us/library/ms366723%28v=vs.80%29.aspx). (It's an older version of the documentation. I chose the version of the documentation that is in line with the version of the Frameworkyou specified, but it's the same in all versions.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:02:55.707

您可以通过增加应用程序池的生命周期长度来防止它发生。在 IIS 中，转到应用程序池的文件夹并为您的站点选择池。右键单击，高级设置...，在 Process Model 下找到 Idle Time-out Minutes 并增加时间以匹配您的站点的使用。IE：如果你平均每小时有一个访客，那么 60 分钟就能让它活着。

在 IIS 重置后的第一次，它总是会至少执行一次。

您可以做的另一件事是获得一台速度更快的计算机，但您第一次挂起的次数总是比其他人多。

# twitter - How to build a keyword-related graph from an initial input keyword?

> ID：12738492
> 
> 赞同：0
> 
> 时间：2012-10-05T01:57:33.870
> 
> 标签：twitter, graph, keyword, text-mining, mining

As a beginner text-miner, I really want to ask for advices/guidelines on graph mining, based on a real need of me: build a keyword-related graph from an initial input keyword.

I know the topic is relatively large, so I want to do it for Twitter first: I have harvested a tweet corpus of the keywords "survey" and "market". I want to mine from that corpus to build a graph of keywords related to "survey" or "market".

I have tried using NodeXL and NLTK but I couldn't do what I want.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:53:23.090

我不太确定你的目标是什么，但这里有一些建议。
对于可以构建的图形类型，您有多种选择。

*   您可以构建一个二分图，一侧是推文，另一侧是关键词。
*   你可以建立一个网络，其中顶点是推文，边代表一个通用术语
*   或者您可以构建一个网络，其中顶点是关键字，边表示关键字出现在同一条推文中

这一切都取决于你试图发现什么。

查看[http://www.kdnuggets.com/websites/twitter-analytics-data-mining.html](http://www.kdnuggets.com/websites/twitter-analytics-data-mining.html)获取一些建议

IEEE 和/或 ACM 还发表了许多关于 Twitter 的基于图的挖掘的优秀论文

# python - SQLalchemy specify which index to use

> ID：12738499
> 
> 赞同：14
> 
> 时间：2012-10-05T01:58:25.787
> 
> 标签：python, sql, indexing, sqlalchemy

Is there a way in SQLalchemy to tell the query which index to use?

The reason I need this is that the SQL queries it generates use the "wrong" index - there exists an index for exactly the two fields that I have and it doesn't use it.

Thanks!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-05T02:26:11.757

我认为您可以为此使用[with_hint()](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.with_hint)。

例如

```
session.query(Model).with_hint(Model, 'USE INDEX col1_index') 
```

老实说，我真的不知道这一点。[我通过在他们的ORM 测试](https://github.com/sqlalchemy/sqlalchemy/blob/master/test/orm/test_query.py)中找到“使用索引”来发现它。

# java - Neo4j 索引找不到节点

> ID：12738501
> 
> 赞同：0
> 
> 时间：2012-10-05T01:59:20.127
> 
> 标签：java, indexing, nullpointerexception, neo4j

我尝试按照文档进行操作，最终得到了 Neo4j 1.8 的这段代码：

```
graphDB = new GraphDatabaseFactory()
            .newEmbeddedDatabaseBuilder( BASE_FOLDER + NEO4J_PATH )
            .newGraphDatabase();

registerShutdownHook();

//Check if there are any indexes
System.out.println(Arrays.toString(graphDB.index().nodeIndexNames()));
Index<Node> testIndex = graphDB.index().forNodes("test");

Transaction tx = graphDB.beginTx();
try {
    String nameKey = "name";
    String nameValue = "Gevorg";

    //The following 3 lines will be commented out 
    //when I run the program the second time
    Node me = graphDB.createNode();
    me.setProperty(nameKey, nameValue);
    testIndex.add(me, nameKey, nameValue);

    Node meAgain = testIndex.get(nameKey, nameValue).getSingle();
    System.out.println(meAgain.getProperty(nameKey));

} finally {
    tx.finish();
} 
```

这将按预期打印以下内容：

```
[] //There is no index at the very beginning
Gevorg 
```

程序终止后，我注释了节点/索引的创建并再次运行程序以命中 NullPointerException（meAgain 为空）。索引被正确检索，因为程序`[test]`首先打印但随后`Node meAgain = testIndex.get(nameKey, nameValue).getSingle();`无法检索节点。我尝试了使用和不使用事务。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:32:12.780

在调用之前，您需要将您的 Tx 标记为成功`tx.finish`

```
tx.success() 
```

高温高压

/彼得

# macos - Detect Caps Lock Key Down & Up Events using CGEvent

> ID：12738502
> 
> 赞同：1
> 
> 时间：2012-10-05T01:59:22.517
> 
> 标签：macos, cocoa, keyboard-events

Is there a way to detect when the Caps Lock key is pressed down or released? I'm not talking about Caps Lock flag being on or off. I'm talking about if there are key up or down events which I can monitor in CGEvent (doesn't have to be CGEvent, can be another API).

I know it should be possible on OS/Software level because in *System Preferences > Keyboard > Modifier Keys...* it's possible to make Caps Lock act like a Command button. Which means OS X knows when Caps Lock is Up or Down.

# sql - Is it possible to use a custom field in where or having clause in SQL Server?

> ID：12738503
> 
> 赞同：1
> 
> 时间：2012-10-05T01:59:25.607
> 
> 标签：sql, sql-server, sql-server-2008-r2

I'm trying the following SQL query:

```
 select (execution_end_timestamp - execution_queued_timestamp) as totalTime, execution_queued_timestamp from exec_queue
  where execution_name like '%Generate%'
  and execution_queued_timestamp > '2012-10-04 20:00:00.000'
  having totalTime < '1900-01-01 00:00:06.000' 
```

I've tried using the totalTime in the where and having clause and in both cases it doesn't work. I also tried datediff hoping that might work, but it had identical results.

Is there a trick where you can use a computed field in a where or having clause? Googling around hasn't turned up anything except in cases where an aggregating function is used.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:01:44.460

不，子句中不允许使用别名`WHERE`，请尝试，

```
select (execution_end_timestamp - execution_queued_timestamp) as totalTime, execution_queued_timestamp 
from exec_queue
where execution_name like '%Generate%' AND
      execution_queued_timestamp > '2012-10-04 20:00:00.000' AND
      (execution_end_timestamp - execution_queued_timestamp) < '1900-01-01 00:00:06.000' 
```

对and子句`ALIAS`不起作用的原因，`WHERE``HAVING`

*   首先形成中所有表的乘积`from clause`。
*   然后`where clause`评估 以消除不满足 search_condition 的行。
*   接下来，使用 中的列对行进行分组`group by clause`。
*   `having claus`然后，排除 e 中不满足 search_condition 的组。
*   接下来，`select clause`评估目标列表中的表达式。
*   如果`distinct keyword`select 子句中存在 in，则现在消除重复行。
*   在`union`评估每个子选择之后进行。
*   最后，结果行根据`order by clause`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T02:08:19.140

我曾经有指向 SQL-92、99 和 2003 ISO 标准的链接，但现在可以使用[此链接](http://blog.sqlauthority.com/2009/04/06/sql-server-logical-query-processing-phases-order-of-statement-execution/)。

基本上，查询执行的顺序是

```
1\. FROM/JOIN
2\. WHERE/ON   -- exception for LEFT JOIN
3\. GROUP BY (incl. CUBE, ROLLUP, GROUPING SETS)
4\. HAVING
5\. SELECT
6\. DISTINCT
7\. ORDER BY 
```

因此，您为 SELECT 列创建的别名对 WHERE 和 HAVING 阶段不可见。它实际上只是表达式的复制和粘贴，非常琐碎。边缘情况可能是当您处理长而复杂的公式时，子查询可能会更好，例如

```
select totalTime,
       execution_queued_timestamp
from (
    select (execution_end_timestamp - execution_queued_timestamp) as totalTime,
           execution_queued_timestamp
    from exec_queue
    where execution_name like '%Generate%'
      and execution_queued_timestamp > '2012-10-04 20:00:00.000'
) x
where totalTime < '1900-01-01 00:00:06.000' 
```

我给你一个提示。SQL Server 实际上*知道*将 WHERE 过滤器带入内部查询并将其应用于基表，因此不会损失性能！

# c++ - 从`&`获取模数

> ID：12738508
> 
> 赞同：1
> 
> 时间：2012-10-05T02:00:03.650
> 
> 标签：c++

> **可能重复：**
> [为什么需要模运算符？](https://stackoverflow.com/questions/10097534/why-is-modulo-operator-necessary)

我需要帮助了解如何`&`给出模数？我正在[分配](https://stackoverflow.com/questions/12594208/c-program-to-determine-levels-size-of-cache)使用内存访问时间来确定缓存大小。目前，对于 L3 大小，我得到了奇怪的结果。我认为这与`&`仅适用于 2 的幂或类似的东西有关吗？所以我想了解它实际上是如何工作的

```
lengthMod = 1024/sizeof(int) - 1;
for (unsigned int k = 0; k < REPS; k++) {
    data[(k * 16) & lengthMod]++;
} 
```

会`&`一直工作吗？还是它只适用于某些值？其他值实际上会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:02:01.027

`&`是二元“与”运算符。模数的运算符是`%`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:08:43.250

为了扩展其他答案，如果您取正数的模数和 2 的正幂（即 2`a % b`的`b`幂和`a`并且`b`是正数），您可以有效地将运算符替换为`%`运算`&`符（并从中减去 1 b，所以它变成`a & (b - 1)`)。

这是因为`&`运算符进行了逐位掩码，并且数字模 2 的幂的结果将只是该数字的低位。

这仅在右手参数是 2 的幂并且两个数字都是正数时才有效。否则，使用`%`运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:03:41.387

&在两个值之间进行按[位和运算。](https://en.wikipedia.org/wiki/Bitwise_operation#AND)对于模数，您需要使用 % 运算符：

```
int x = 23 % 7; // x = 2 
```

# parsing - Jsoup解析，400错误

> ID：12738512
> 
> 赞同：1
> 
> 时间：2012-10-05T02:00:26.073
> 
> 标签：parsing, jsoup

我正在编写一个程序，该程序可以访问网页，查找并下载所有图像和常见文档（.docx .pdf 等），然后访问页面上的每个链接并执行相同操作。我遇到的问题是，当我深入解析链接时，jsoup 出现 400 个错误： `Exception in thread "main" org.jsoup.HttpStatusException: HTTP error fetching URL. Status=400, URL=http://www.somerandomurl.com`

代码：

```
Document doc = Jsoup.connect(urlstring).userAgent("Chrome").get(); 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:29:46.013

您如何解析链接（请提供更多代码）？通常有必要使用绝对链接而不是简单属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T09:44:17.000

这可能是您的网址中可能存在的重音或特殊字符的问题。

# string - 给定损坏的字符串时如何获得正确的字符串

> ID：12738514
> 
> 赞同：1
> 
> 时间：2012-10-05T02:00:46.357
> 
> 标签：string

以下是关于 Glassdoor 的一个面试问题，我没有找到一个好的解决方案。

给定一个长度为 25 的字符串，由字母（小写和大写）和数字组成。现在，在这个字符串中，一些大写字母是小写的。所以它变成了一个损坏的字符串。假设有一个黑盒函数返回一个整数，比如 13 或 14，它表示输入字符串是正确的，否则它会引发异常。给定这个损坏的字符串，如何找到正确的原始字符串？

有人对这个问题有想法吗？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:11:44.297

假设黑盒函数（假设它也适用于子字符串）声明如下：

```
 public Integer isCorrectString(String value) throws Exception; 
```

我们可以编写一个小循环来纠正您的 25 长度字符串，如下所示：

```
 String inputString ="abcd...";
    for(int i=1; i<=25; i++){
            try{
                   isCorrectString(inputString.substring(0, i));
             }catch(Exception ex) {
                  //change the char at ith position to upper case as its incorrect
                  inputString = inputString.substring(0, i-1)+
                          inputString.substring(i-1, i).toUpperCase()+
                          inputString.substring(i+1);

             }
     } 
```

循环后，`inputString`应予以纠正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:16:05.863

直接的解决方案是将输入字符串中的小写字母更改为大写，并检查黑盒函数是否返回整数值（不例外）。应检查每个组合。最坏情况下的组合数是 2 的 25 次幂减 1

# android - 单击 ListView 上的 ImageButton 时，MVVMCross 是否可以更改选择器？

> ID：12738516
> 
> 赞同：2
> 
> 时间：2012-10-05T02:01:03.337
> 
> 标签：android, listview, xamarin.android, selector, mvvmcross

问题和不使用 MVVMCross 编程是一样的，但是不知道有没有“跨平台”的解决方案：

在 MvxBindableListView（或 ListView）上使用 ImageButton 时，我们必须放置一些选项才能在此按钮上使用操作：

```
 <ImageButton
            ...
            android:focusable="false"
            android:clickable="true" 
            ...
            local:MvxBind="'Click':{'Path':'Command1'}}"
          /> 
```

使用这些参数，按钮会对“Command1”做出反应。但问题是 ListView 的“视觉选择器”没有改变。

我们举个例子：

当 ListView 中有 5 行时，第一行被选中。我触摸第 3 行的 ImageButton，“Command1”会做出反应（与 ListView 的第 3 项），但选择器将停留在第一行。

所以，在 Android 中，我们必须这样写一些代码：

```
_imagebutton.Click += (object sender, EventArgs eventsArgs) =>
    {
        View v = ...
        MvxBindableListView l = ...
        int p = l.GetPositionForView(...);
        l.PerformItemClick(..., p, p); 
     }; 
```

使用这段代码，选择了正确的项目并且行为是正确的（只要我不想使用 ItemClick 触发真实事件）。但是这个解决方案是“Android方式”而不是真正的跨平台（我让你想象一下初始化所有这些东西的可怕代码）

有人有更好的解决方案吗？

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:51:56.263

在某种程度上，这感觉就像这只是“UI 眼睛糖果”——因此属于“视图关注”的范围——因此 mvvmcross 通常不会尝试跨平台。

但是...我认为有办法。

如果 ViewModel 中的命令处理程序也在 ViewModel 上设置了 CurrentSelectedPosition 整数，则每个 UI 都可以将 ViewModel 中的 SelectedItemPosition 绑定到每个 ui 中的每个列表 - 这应该会导致 UI 本地更新选择。

我认为这会起作用......但在 Android 上它需要一些绑定：

```
public class MvxAdapterViewSelectedItemPositionTargetB-inging : MvxBaseAndroidTargetBinding
{
    private readonly AdapterView _adapterView;

    public MvxAdapterViewSelectedItemPositionTargetBinging(AdapterView adapterView)
    {
        _adapterView = adapterView;
        _adapterView.ItemSelected += AdapterViewOnItemSelected;
    }

    public override void SetValue(object value)
    {
        _adapterView.SetSelection((int)value);
    }

    private void AdapterViewOnItemSelected(object sender, AdapterView.ItemSelectedEventArgs itemSelectedEventArgs)
    {
        FireValueChanged(itemSelectedEventArgs.Position);
    }

    public override MvxBindingMode DefaultMode
    {
        get
        {
            return MvxBindingMode.TwoWay;
        }
    }

    public override Type TargetType
    {
        get
        {
            return typeof(Int32);
        }
    }

    protected override void Dispose(bool isDisposing)
    {
        if (isDisposing)
        {
            if (_adapterView != null)
            {
                _adapterView.ItemSelected -= AdapterViewOnItemSelected;
            }
        }
        base.Dispose(isDisposing);
    }
} 
```

注册使用：

```
 registry.RegisterFactory(new MvxCustomBindingFactory<AdapterView>("SelectedItemPosition", adapterView => new MvxAdapterViewSelectedItemPositionTargetBinging(adapterView))); 
```

并绑定到 axml 中的 UI，例如：

```
<Mvx.MvxBindableListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="{'ItemsSource':{'Path':'Emails'},'SelectedItemPosition':{'Path':'CurrentSelectedPosition'}}"
    local:MvxItemTemplate="@layout/listitem_email"
/> 
```

我使用 ViewModel 列表项所在的电子邮件列表测试了这个想法：

```
 public class SimpleEmail
    {
        public EmailViewModel Parent { get; set; }
        public string From { get; set; }    
        public string Header { get; set; }    
        public string Message { get; set; }    
        public ICommand Command1
        {
            get
            {
                return new MvxRelayCommand(() => Parent.CurrentSelectedPosition = Parent.Emails.IndexOf(this));
            }
        }
    } 
```

*   但显然这只是一个演示......

* * *

注意：我在上面的代码中使用了选定的位置而不是选定的对象 - 因为我知道您使用的列表很长！

* * *

如果您想考虑对仅适用于 android 的代码采用不同的方法，那么我认为您可以通过从 Mvx.MvxBindableListView （也可能是列表项）继承并使用这些类以可能不那么痛苦的方式更新选择来做到这一点.

# c# - 在 C# 中设置 Linux 文件的时间戳

> ID：12738517
> 
> 赞同：1
> 
> 时间：2012-10-05T02:01:11.597
> 
> 标签：c#, linux, timestamp

有谁知道如何使用 C# 将 Linux（文本）文件的时间戳设置为任意值，不一定是当前时间？

例如，我可以运行代码来更改 to 的时间戳`filepath/foobar`吗`Thu 04 Oct 1995 09:15:00 AM CDT`？

优选地，这对访问的和修改的戳都有效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:08:34.340

如果我理解您想要使用 File.SetLastWriteTime() 的问题。更多信息可以在这里找到[http://msdn.microsoft.com/en-us/library/system.io.file.setlastwritetime.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.setlastwritetime.aspx)

# http - HTTP 响应标头在没有传输编码和内容长度的情况下是否有效？

> ID：12738519
> 
> 赞同：8
> 
> 时间：2012-10-05T02:01:50.327
> 
> 标签：http, http-headers

即使不包含 Content-Length 或 Transfer-Encoding，HTTP 响应标头（如下所示）是否合法？

```
- Http: Response, HTTP/1.1, Status: Ok, URL: /AAA/B.json
  ProtocolVersion: HTTP/1.1
  StatusCode: 200, Ok
  Reason: OK
  Expires:  Fri, 05 Oct 2012 01:41:30 GMT
  Date:  Fri, 05 Oct 2012 01:40:46 GMT
  Vary:  Accept-Encoding
  Accept-Ranges:  bytes
  Cache-Control:  public, max-age=43
  Server:  Noelios-Restlet-Engine/1.1.10
  ContentType:  application/json;charset=UTF-8
  ContentEncoding:  gzip
  Connection:  close
  X-Served-By:  85.111
  HeaderEnd: CRLF 
```

我希望看到 Content-Length 或 Transfer-Encoding，但它们都不存在。

我阅读了 HTTP-RFC，但仍然不确定。

@CodeCaster，我确实阅读了 RFC 第 4.4 节，但仍不清楚，如您所见，响应标头用于返回 json 流，因此：

*   第 4.4 节，规则 1 定义不得包含消息正文，似乎不适用于我的情况。
*   第 4.4 节，规则 4，对此不确定，但由于我在响应标头中没有看到“multipart/byteranges” - 这是否意味着该规则不适用于我？
*   第 4.4 节规则 5，这对我来说很不清楚，因为标题实际包含“连接：关闭”，是否相关？

那么，还有什么意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:17:39.663

Yes, it is valid. There are five ways to determine the message length:

> [RFC 2616 Section 4.4\. Message Length](https://www.rfc-editor.org/rfc/rfc2616#section-4.4):

> The transfer-length of a message is the length of the message-body as it appears in the message; that is, after any transfer-codings have been applied. When a message-body is included with a message, the transfer-length of that body is determined by one of the following (in order of precedence):

> 1.  Any response message which "MUST NOT" include a message-body (such as the 1xx, 204, and 304 responses and any response to a HEAD request) is always terminated by the first empty line after the header fields, regardless of the entity-header fields present in the message.

> 2.  If a Transfer-Encoding header field (section 14.41) is present and has any value other than "identity", then the transfer-length is defined by use of the "chunked" transfer-coding (section 3.6), unless the message is terminated by closing the connection.

> 3.  If a Content-Length header field (section 14.13) is present, its decimal value in OCTETs represents both the entity-length and the transfer-length. The Content-Length header field MUST NOT be sent if these two lengths are different (i.e., if a Transfer-Encoding header field is present). If a message is received with both a Transfer-Encoding header field and a Content-Length header field, the latter MUST be ignored.

> 4.  If the message uses the media type "multipart/byteranges", and the transfer-length is not otherwise specified, then this self- delimiting media type defines the transfer-length. This media type [M]UST NOT be used unless the sender knows that the recipient can parse it; the presence in a request of a Range header with multiple byte- range specifiers from a 1.1 client implies that the client can parse multipart/byteranges responses.

> ```
>  A range header might be forwarded by a 1.0 proxy that does not 
> ```

```
 understand multipart/byteranges; in this case the server MUST
   delimit the message using methods defined in items 1,3 or 5 of
   this section. 
```

> 5.  By the server closing the connection. (Closing the connection cannot be used to indicate the end of a request body, since that would leave no possibility for the server to send back a response.)

# delphi - 从外部过程填充 RichEdit

> ID：12738523
> 
> 赞同：0
> 
> 时间：2012-10-05T02:02:30.730
> 
> 标签：delphi, delphi-xe, richedit

我编写了一个根据输入填充 RichEdit 组件的过程。

```
procedure LoadCPData(ResName: String);
begin
  ResName := AnsiLowercase(ResName) + '_data';
  rs := TResourceStream.Create(hInstance, ResName, RT_RCDATA);
  try
    rs.Position := 0;
    info.reMeta.Lines.LoadFromStream(rs);
  finally
    rs.Free;
  end;
end; 
```

注意：上述过程存储在一个`.pas`名为 Functions 的外部文件中。

当我在表单中调用该过程时，RichEdit 仍然为空。但是，如果我将该代码块放在表单本身中，RichEdit 组件会按预期填充数据而不会出现问题。`case`现在我可以将上面的代码块放在表单本身中，但我计划在一个语句中多次使用该过程。

为了使我的程序起作用，我需要包括什么？

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:45:02.620

我们使用`TJvRichEdit`控件代替，`TRichEdit`以便我们可以支持嵌入的 OLE 对象。这应该与`TRichEdit`.

```
procedure SetRTFData(RTFControl: TRichEdit; FileName: string);
var
  ms: TMemoryStream;
begin
  ms := TMemoryStream.Create;
  try
    ms.LoadFromFile(FileName);
    ms.Position := 0;
    RTFControl.StreamFormat := sfRichText;
    RTFControl.Lines.LoadFromStream(ms);
    ms.Clear;

    RTFControl.Invalidate;

    // Invalidate only works if the control is visible.  If it is not visible, then the
    // content won't render -- so you have to send the paint message to the control
    // yourself.  This is only needed if you want to 'save' the content after loading
    // it, which won't work unless it has been successfully rendered at least once.
    RTFControl.Perform(WM_PAINT, 0, 0);
  finally
    FreeAndNil(ms);
  end;
end; 
```

我从另一个例程中改编了这个，所以它不是我们使用的完全相同的方法。我们从数据库流式传输内容，因此我们从不从文件中读取。但是我们确实将字符串写入内存流以将其加载到 RTF 控件中，所以这本质上是做同样的事情。

# java - 无缘无故的负整数，cos，sin。

> ID：12738528
> 
> 赞同：1
> 
> 时间：2012-10-05T02:03:15.117
> 
> 标签：java, trigonometry

在java中，我试图用cos和sin对数字进行运算，但我不断得到负变量，有人能解释为什么吗？

这是我的代码：

```
double velocity_x=22*Math.sin(10);

double velocity_y=22*Math.cos(10); 
```

他们都分别返回velocity_x=-11.968464439566135

和velocity_y=-18.459573639681953

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T02:03:43.090

`sin()`and的参数`cos()`是*弧度*，而不是度数。要转换，乘以 π/180：

```
double velocity_x = 22 * Math.sin(10 * Math.PI / 180); 
```

# python - 我如何将我的 python 代码放在一起，以便菜单选项运行不止一次？

> ID：12738536
> 
> 赞同：-3
> 
> 时间：2012-10-05T02:04:07.440
> 
> 标签：python, list, function, methods

我希望菜单运行多个，但是当它运行第二次或第三次时，我希望每次程序运行时都更新分数列表。我遇到的问题是在我将新分数添加到列表后，新添加的分数在我第二次运行程序时没有显示出来。我猜那是因为分数列表在while循环内更​​新。有谁知道如何解决这一问题？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:26:55.880

我还不能发表评论，所以我将不得不在答案中留下这个。首先，您帖子中的缩进是否正确。如果不是，那是因为属于 while 循环的所有行都需要缩进。此外，这更像是一种格式设置，但是您应该将函数定义移到所有代码之上，或者将它们放在单独的文件中。我还注意到在你的 for 循环中，你做了很多不需要做的索引的引用。例如 averageScores() 可以写成如下：

```
def averageScores():
    s = 0
    for i in scores:
        s += i
    avgScore = s / len(scores)
    print("The average score is: " + str(avgScore)) 
```

我还注意到，当您在 elif 子句下调用 addScores() 时，您实际上并没有将结果存储到任何东西，您希望该行读取`scores.append(addScores())`

# salesforce - 带有可选时间部分的 Salesforce 日期/时间值

> ID：12738538
> 
> 赞同：2
> 
> 时间：2012-10-05T02:05:00.487
> 
> 标签：salesforce, apex-code, visualforce

在我的 Salesforce 应用程序中，我希望用户输入**日期/时间**值，但时间部分是可选的。有什么办法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:41:49.147

As a solution, rather than using custom object filed type DateTime value, I have keep separate Date value and Time value in VF controller level and with the compose those values make a DateTime.

Apex code is as bellow,

```
 // Compos DateTime with Date & Time values 
    this.jobOccurrence.Date_Time_Sampled__c = DateTime.parse(this.dateSampled.trim() + ' ' + this.timeSampled.trim()); 
```

VisualForce code is as bellow,

```
<apex:page>

   <!-- Style sheet for timepicker -->
   <link rel="stylesheet" media="all" type="text/css" href="{!URLFOR($Resource.jquery_ui_custom)}" />

   <style>
       #ui-datepicker-div, .ui-datepicker{ font-size: 70%; }     
      .ui-timepicker-div .ui-widget-header { margin-bottom: 8px; }
      .ui-timepicker-div dl { text-align: left; }
      .ui-timepicker-div dl dt { height: 25px; margin-bottom: -25px; }
      .ui-timepicker-div dl dd { margin: 0 10px 10px 65px; }
      .ui-timepicker-div td { font-size: 90%; }
      .ui-tpicker-grid-label { background: none; border: none; margin: 0; padding: 0; 

   </style>

   <!-- javascript for timepicker -->
   <script type="text/javascript" src="{!URLFOR($Resource.jquery)}"></script>
   <script type="text/javascript" src="{!URLFOR($Resource.jquery_ui_custom_min)}"></script>
   <script type="text/javascript" src="{!URLFOR($Resource.jquery_ui_timepicker_addon)}"></script>

   <script type="text/javascript">  

     /* Set Timepicker to component */    
     function setTimepicker(componentObj) {      
      $(componentObj).timepicker({ show24Hours: false, timeFormat: 'hh:mm TT', ampm: true});          
     }
   </script> 

 <apex:form id="frmMain">

   <!-- Date -->                       
   <apex:inputText value="{!dateSampled}" onfocus="DatePicker.pickDate(false, this.id, false);"/>
   <!-- Time --> 
   <apex:inputText value="{!timeSampled}" onfocus="setTimepicker(this);"/> 

 </apex:form>

</apex:page> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:28:22.907

您能否不使用两个字段（一个日期和另一个时间文本字段）。然后将这些字段连接成一个日期时间公式字段。这不会有帮助吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T06:24:01.270

如果时间是可选的，只需使用 00 ：

```
Datetime myDate = datetime.newInstance(2012, 10, 5, 00, 00, 0); 
```

# php - jquery + php的麻烦

> ID：12738541
> 
> 赞同：0
> 
> 时间：2012-10-05T02:05:06.713
> 
> 标签：php, jquery, html, validation

我试图让我的代码在未填写用户名字段和密码字段时显示错误消息。当我使用 If(isset) 时它不起作用，但是当我使用 if (普通代码) 时它似乎起作用。任何帮助将不胜感激。

这是代码：

登录.php

```
<?php

if (isset($_POST['log_username']) && isset($_POST['log_password'])){

    $log_uname = preg_replace('#[^A-za-z0-9]', '', $_POST["log_username"]);
    $log_password = preg_replace('#[^A-za-z0-9]#i', '', $_POST["log_password"]);

    //get user from database
    $sql = mysql_query("SELECT * FROM users WHERE username='$log_uname' AND password='$log_password' LIMIT 1");

    //check user existance
    $userCount = mysql_num_rows($sql);

    if ($userCount == 1) {

        while($row = mysql_fetch_array($sql)){

            $id = $row["id"];

        }
        $_SESSION['id'] = $id;
        $_SESSION['log_username'] = $log_uname;
        $_SESSION['log_password'] = $log_password;

    }else{

        die (msg1(0, "Information Incorrect"));

    }

}

function msg1($status1,$txt1){

    return '{"status1":'.$status1.',"txt1":"'.$txt1.'"}';

}
?> 
```

登录.js

```
$(document).ready(function (){

    $('.login_form').submit(function(e) {

        login();
        e.preventDefault();

    });

    function login(){
    hideshow1('loading1',1);
    error1(0);

    $.ajax({

        type: "POST",
        url: "php/login.php",
        data: $('.login_form').serialize(),
        dataType: "json",
        success: function(msg1){
            if(parseInt(msg1.status1)==1){
                window.location=msg1.txt1;
            }
            else if (parseInt(msg1.status1)==0){

                error1(1,msg1.txt1);

            }
            hideshow1('loading1',0)
        }

    });
    }

    function hideshow1(el,act){
        if(act) $('#'+el).css('visibility','visible');
        else $('#'+el).css('visibility','hidden');
    }
    function error1(act,txt1){
        hideshow1('error1',act);
        if(txt1) $('#error1').html(txt1);
    }

}); 
```

最后一个 Index.php

```
 <?php include ("php/head.php");?>
<div id="wrapper">

    <div id="container">

        <div id="intro">

            <h2><center>Are you a member? Login ...</center></h2>
            <h3><center>And enjoy hundreds of services.</center></h3>

            <div id="log_form">

                <form action="php/login.php" method="POST" class="login_form">

                    <input type="text" size="25" name="log_username" id="login_txt" placeholder="Your Username">
                    <input type="password" size="25" name="log_password" id="login_pass" placeholder="Your Password">
                    <label id="check"><input type="checkbox" name="checkbox"> Remember Me</label>
                    <input type="submit" name="submit1" id="login_sub" value="LogIn">
                    <img id="loading1" src="images/ajax-loader.gif" alt="working.." />

                <script>

                $("#login_txt,#login_pass").click(function (e) {

                    e.preventDefault();

                    $('#error1').fadeOut('fast', function () {

                            $(this).show();
                            $(this).css("visibility","hidden");             
                    });

                });

                </script>

                </form>

                <div id="error1"></div>

            </div>

            <div id="new_users">

                <h4 class="h4_users">New Users ...</h4>

                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>

            </div>

        </div>

        <div id="register">

            <h2><center>Sign up Below ...</center></h2>
            <h3><center>Easy, fast and free!</center></h3>

                <form action="php/register.php" method="POST" name="form" class="form">
                   <input type="text" size="25" name="fname" placeholder="First Name" id="fname" >
                   <input type="text" size="25" name="lname" placeholder="Last Name">
                   <input type="text" size="25" name="username" placeholder="Username">
                   <input type="text" size="25" name="email" placeholder="Email">
                   <input type="text" size="25" name="email2" placeholder="Repeat Email">
                   <input type="password" size="25" name="password" placeholder="Password">
                   <input type="password" size="25" name="password2" placeholder="Repeat Password">
                   <input type="submit" name="submit" id="sub" value="Sign Up!">
                   <img id="loading" src="images/ajax-loader.gif" alt="working.." />
                </form>

                <script>

                $('#fname').click(function (e) {

                    e.preventDefault();

                    $('#error').fadeOut('fast', function () {

                            $(this).show();
                            $(this).css("visibility","hidden");             
                    });

                });

                </script>

            <div id="error"></div>

        </div>

    </div>

    <?php include("php/footer.php");?>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:06:41.157

提交表单时，即使值为空，密钥仍然会被发送 - 在这种情况下`$_POST['log_uname']`是一个空字符串。

尝试使用[`empty`](http://php.net/empty)而不是`isset`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:14:17.853

```
if (array_key_exists('submit1', $_POST)) {
if (isset($_POST['log_username']) && isset($_POST['log_password'])){ 
//other codes
}
} 
```

试试这个，但你可以在你的表单中将“submit1”更改为更好的名字**name="login_in"**

# jquery - 向现有的彩盒调用添加回调？

> ID：12738547
> 
> 赞同：3
> 
> 时间：2012-10-05T02:06:10.413
> 
> 标签：jquery, callback, colorbox

当单击“iframe”类的链接时，我有一个现有的调用来打开 iframe 颜色框：

`$(".iframe").colorbox({iframe:true, width:"200px", height:"500px"});`

我想给这个颜色框添加一个回调，以便在它即将打开时触发一个函数：

`onOpen:function(){ alert('colorbox is about to open'); }`

但是这段代码去哪里了？我尝试将它添加到 colorbox() 但整个事情都失败了。我有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T02:14:49.893

它作为一个选项如下：

```
$(".iframe").colorbox({iframe:true, width:"200px", height:"500px",onOpen:function(){ alert('colorbox is about to open'); }}); 
```

或者

```
$(".iframe").colorbox({iframe:true, width:"200px", height:"500px",onOpen:openCallBack});

function openCallBack(){
//do something here
} 
```

[这](http://jsfiddle.net/4CNN8/)是一个工作示例。

# php - PHP - 修剪部分 URL

> ID：12738552
> 
> 赞同：-1
> 
> 时间：2012-10-05T02:06:24.480
> 
> 标签：php, trim

> **可能重复：**
> [从任何 Youtube URL 获取 Youtube ID 的正则表达式模式](https://stackoverflow.com/questions/9594943/regex-pattern-to-get-youtube-id-from-any-youtube-url)

我想知道如何修剪 URL 的一部分，例如“ [http://www.youtube.com/watch?v=I4_3PVFSUxE&feature=plcp](http://www.youtube.com/watch?v=I4_3PVFSUxE&feature=plcp) ”，它只会输出“I4_3PVFSUxE”。

所以我想获取“v=”之后的代码并删除之后的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:09:08.033

你可以用...

```
$query = parse_url($url, PHP_URL_QUERY);

parse_str($query, $queryParts);

$v = $queryParts['v'];

if (get_magic_quotes_gpc()) {
    $v = stripslashes($v);
} 
```

[键盘](http://codepad.org/G1YxgbyJ)。

# elasticsearch - 我可以为 ElasticSearch 索引设置 TTL 吗？

> ID：12738556
> 
> 赞同：2
> 
> 时间：2012-10-05T02:06:58.000
> 
> 标签：elasticsearch

我可以为模板中的一个类型设置一个 ttl，但我可以为整个索引设置一个 ttl 吗？嗯...我可以通过一些猜测和检查来测试它。如果我找到答案，我会解决这个问题并发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T20:52:52.910

ES 内部无法自动删除索引。您必须通过 API 与您的客户端处理该问题。

# jquery - 如何让 div 像漂浮的气球一样上下移动

> ID：12738558
> 
> 赞同：2
> 
> 时间：2012-10-05T02:07:02.837
> 
> 标签：jquery

**概述**

我想要一个 div 缓慢地上下移动，看起来像一个漂浮在空中的气球。

**发现**

我想出了这个并记下附加到它的外部脚本：[链接](http://jsfiddle.net/FLMp8/1/)

**问题**

一，它不是很光滑，看起来像破了。二，如您所见，图像在上下移动时看起来像是被压扁了。我怎样才能让它顺利移动，或者有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T02:47:45.430

好的，那你可以试试：

```
 var baloon = $('#baloon');
   function runIt() {
       baloon.animate({top:'+=20'}, 1000);
       baloon.animate({top:'-=20'}, 1000, runIt);
   }

   runIt(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:16:55.593

我建议使用 css3 动画。您可以在这里查看一些示例和教程：http: [//www.w3schools.com/css3/css3_animations.asp](http://www.w3schools.com/css3/css3_animations.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:28:02.003

如果你想要更多的支持，那么只需要支持 CSS3 的浏览器，试试 jQuery 的 slideUp 动画：[http ://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T14:30:45.147

你也可以使用这个 jQuery 库

[http://www.inwebson.com/demo/jqfloat/](http://www.inwebson.com/demo/jqfloat/)

# javascript - Masonry javascript插件出现“未定义”错误

> ID：12738564
> 
> 赞同：2
> 
> 时间：2012-10-05T02:07:29.590
> 
> 标签：javascript, jquery, jquery-masonry, typeerror, referenceerror

我正在使用[Vanilla Masonry](http://vanilla-masonry.desandro.com/docs/intro.html)（原始 JS，非 jQuery 版本），如下所示：

在头部：

```
<script id="masonry" type="text/javascript" src="resources/js/masonry.js"></script> 
```

体内：

```
<script>
window.onload = function() {
  var wall = new Masonry( document.getElementById('ext-component-3'), {
    columnWidth: 145
  });
};
</script> 
```

但我不断得到：

```
Uncaught ReferenceError: Masonry is not defined 
Uncaught TypeError: Cannot call method 'appendChild' of undefined 
```

有谁知道我的设置可能有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T02:12:00.740

我查看了 masonry.js 代码。

您需要将对砌体文件的引用移动到页面底部（在结束 body 标记之前）。

或者至少在打开的正文标签下方。

它试图将Child 附加到尚未加载到头部的body 标记中。

# delphi - TMediaPlayerControl 视频大小

> ID：12738567
> 
> 赞同：1
> 
> 时间：2012-10-05T02:07:47.987
> 
> 标签：delphi, firemonkey, delphi-xe3

早上好家伙！

我目前正在试验 XE3，我有兴趣使用`FM2`. 我面临一个关于视频规模的问题，或者更确切地说，似乎完全缺乏对它的支持。

我在表格中添加了 a`TMediaPlayer`和 a`TMediaPlayerControl`并将它们连接起来。然后我添加了一个具有简单播放/停止功能的按钮，以及另一个用于加载视频文件的按钮。但是，播放的每个视频都以实际分辨率播放（尽管 align 设置为`alClient`）。我已经尽可能地查看了文档和源代码，但我似乎找不到任何缩放或重新调整实际视频区域大小的方法。**唯一**的例外是如果我将实际窗口的大小调整为小于视频区域，此时它将在保持纵横比的同时缩小。

作为附加说明，视频区域出现在所有标准控件之上，无论它是否“发送回”。

至少，我很感激任何关于使用新的`FM²`/Firemonkey2 XE3 媒体组件调整或缩放视频区域的输入。目前是否有可能，还是我们将等待补丁来改进实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:11:22.297

目前 FM2 的内置实现不支持拉伸视图。

解决这个问题实际上是解决这个*错误*......对不起，这将是一个很长的帖子:)

将视频大小调整为包含控件（通常是 a `TMediaPlayerControl`）的魔法是在`TMedia.UpdateMediaFromControl`方法中完成的，更准确地说是在特定于平台的`TMedia`-descendant 中`UpdateMediaFromControl`（`TWindowsMedia.UpdateMediaFromControl`在 win 上）。

该方法用于`TRectF.Fit`将视频大小调整为控件的客户区。该方法只支持缩小，不支持放大。所以你可能想改变这个......

我的*解决方案*可能并不完美，但它适用于我......

1.  通过从 FM2 复制粘贴您的平台特定实现来创建您自己的`TMedia`后代 ( `TMyMedia`)。（例如。`FMX.Media.Win.TWindowsMedia`）。遗憾的是，创建后代类将不起作用，因为 Embarcadero 开发人员将所有必要的字段设为私有，因此后代类将无法访问它们。确保复制粘贴所有方法并保持原样。
2.  仅更新`UpdateMediaFromControl`：

    ```
    procedure TMyMedia.UpdateMediaFromControl;
    var
      P: TPointF;
      R: TRect;
      Bounds: TRectF;
      Form: TCommonCustomForm;

      // this is just an updated version of TRecF.Fit to support scaling up      
      function MyRectFit(var R: TRectF; const BoundsRect: TRectF): Single;
      var
        ratio: Single;
      begin
        Result := 1;
        if BoundsRect.Width * BoundsRect.Height = 0 then
          Exit;

        if (R.Width / BoundsRect.Width) > (R.Height / BoundsRect.Height) then
          ratio := R.Width / BoundsRect.Width
        else
          ratio := R.Height / BoundsRect.Height;

        // UPDATED
        R := RectF(0, 0, R.Width / ratio, R.Height / ratio);

        Result := ratio;
        RectCenter(R, BoundsRect);
      end;

    begin
      if FWnd <> 0 then
      begin
        if (Control <> nil) and not(csDesigning in Control.ComponentState) and
          (Control.ParentedVisible) and (Control.Root <> nil) and 
          (Control.Root.GetObject is TCommonCustomForm) then
        begin
          Form := TCommonCustomForm(Control.Root.GetObject);
          P := GetVideoSize;
          Bounds := TRectF.Create(0, 0, P.X, P.Y);

          // UPDATED:
          // Bounds.Fit(RectF(0, 0, Control.AbsoluteWidth, Control.AbsoluteHeight));
          MyRectFit(Bounds, RectF(0, 0, Control.AbsoluteWidth, Control.AbsoluteHeight));

          Bounds.Offset(Control.AbsoluteRect.Left, Control.AbsoluteRect.Top);
          SetParent(FWnd, FmxHandleToHWND(Form.Handle));
          SetWindowPos(FWnd, 0, Bounds.Round.Left, Bounds.Round.Top, Bounds.Round.Width,
                       Bounds.Round.Height, 0);
          R.Create(0, 0, Bounds.Round.Width, Bounds.Round.Height);
          if FVMRWindowlessControl <> nil then
            FVMRWindowlessControl.SetVideoPosition(nil, @R);
          ShowWindow(FWnd, SW_SHOW)
        end
        else
          ShowWindow(FWnd, SW_HIDE)
      end;
    end; 
    ```

3.  诀窍完成了，让我们让 FM2 使用它。FM2 使用一个`TMediaCodecManager`类来配对媒体类型（win 上的文件扩展名）和`TCustomMediaCodec`-descendant(s) 来播放它。Windows 实现`TWindowsMediaCodec`用于所有支持的媒体文件格式。`TCustomMediaCodec`只有一种方法：`CreateFromFile`应该创建一个`TMedia`-descendant 类来播放媒体文件。您将必须创建自己的`TCustomMediaCodec`后代以利用您自己的`TMyMedia`...

    ```
    type
      TMyMediaCodec = class(TCustomMediaCodec)
      public
        function CreateFromFile(const AFileName: string): TMedia; override;
      end;

    function TMyMediaCodec.CreateFromFile(const AFileName: string): TMedia;
    begin
      // LeftStr is for the extension trick - see later
      Result := TMyMedia.Create(LeftStr(AFileName, Length(AFileName) - 4));
    end; 
    ```

4.  让我们告诉`TMediaCodecManager`使用我们的*“编解码器”* ...`FMX.Media.Win`将所有支持的媒体文件扩展名添加到该`initialization`部分的列表中，并且无法删除或更改它们，因此我们将解决这个问题。注册我们自己的扩展，例如。`.###`与我们的`TMyMediaCodec`.

    ```
    TMediaCodecManager.RegisterMediaCodecClass('.###', 'My Media Codec', TMediaType.Video, TMyMediaCodec); 
    ```

5.  要使用它，您必须`.###`在分配时将扩展名附加到所有媒体文件名`TMediaPlayer.FileName`，当然，在尝试播放文件之前必须删除此扩展名（见`TMyMediaCodec.CreateFromFile`上文）。

    ```
    MediaPlayer1.FileName := OpenDialog1.FileName + '.###'; 
    ```

6.  当调用`TMediaCodecManager.GetFilterString`支持的媒体文件类型列表时，我们必须`.###`在使用列表之前手动删除扩展名，例如。在`TOpenDialog.Filter`.

我知道这个解决方案可能不是最优雅的，但它对我有用，直到 Embarcadero 愿意更新 FM2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-19T10:04:08.730

如果您无法访问源代码，您可以编写一个类助手：

```
unit mediaPlayerStretchFix;

interface
uses windows,FMX.Platform.Win,FMX.Media.Win,FMX.Forms, system.types, fmx.controls,
     system.Classes,directshow9;

type

  TMediaPlayerTurbo = class helper for TWindowsMedia
  private
    function getFWnd: HWND;
    function getFControl: TControl;
    function getVMRWC: IVMRWindowlessControl9;
    property leFWnd:HWND read getFWnd;
    property leControl:TControl read getFControl;
    property leFVMRWindowlessControl:IVMRWindowlessControl9 read getVMRWC;
  public
    procedure Stretch;
  end;

implementation

procedure TMediaPlayerTurbo.Stretch;
var
  P: TPointF;
  R: TRect;
  Bounds: TRectF;
  Form: TCommonCustomForm;

  // this is just an updated version of TRecF.Fit to support scaling up
  function MyRectFit(var R: TRectF; const BoundsRect: TRectF): Single;
  var
    ratio: Single;
  begin
    Result := 1;
    if BoundsRect.Width * BoundsRect.Height = 0 then
      Exit;
    if (R.Width / BoundsRect.Width) > (R.Height / BoundsRect.Height) then
      ratio := R.Width / BoundsRect.Width
    else
      ratio := R.Height / BoundsRect.Height;

    // UPDATED
    R := RectF(0, 0, R.Width / ratio, R.Height / ratio);

    Result := ratio;
    RectCenter(R, BoundsRect);
  end;

begin
  if leFWnd <> 0 then
  begin
    if (leControl <> nil) and not(csDesigning in Control.ComponentState) and
      (Control.ParentedVisible) and (Control.Root <> nil) and
      (Control.Root.GetObject is TCommonCustomForm) then
    begin
      Form := TCommonCustomForm(Control.Root.GetObject);
      P := self.GetVideoSize;
      Bounds := TRectF.Create(0, 0, P.X, P.Y);

      // UPDATED:
      // Bounds.Fit(RectF(0, 0, Control.AbsoluteWidth, Control.AbsoluteHeight));
      MyRectFit(Bounds, RectF(0, 0, Control.AbsoluteWidth, Control.AbsoluteHeight));

      Bounds.Offset(Control.AbsoluteRect.Left, Control.AbsoluteRect.Top);
      SetParent(leFWnd, FmxHandleToHWND(Form.Handle));
      SetWindowPos(leFWnd, 0, Bounds.Round.Left, Bounds.Round.Top, Bounds.Round.Width,
                   Bounds.Round.Height, 0);
      R.Create(0, 0, Bounds.Round.Width, Bounds.Round.Height);
      if leFVMRWindowlessControl <> nil then
        leFVMRWindowlessControl.SetVideoPosition(nil, @R);
      ShowWindow(leFWnd, SW_SHOW)
    end
    else
      ShowWindow(leFWnd, SW_HIDE)
  end;
end;

function TMediaPlayerTurbo.getFControl: TControl;
begin
  result:=TControl(fCOntrol);
end;

function TMediaPlayerTurbo.getFWnd: HWND;
begin
  result:=self.fWnd;
end;

function TMediaPlayerTurbo.getVMRWC: IVMRWindowlessControl9;
begin
  result:=self.FVMRWindowlessControl;
end;

end. 
```

测试：

```
var
  mp:TWindowsMedia
begin
  mp:=TWindowsMedia.create(filename);
  mp.Control:=videoframe;
  mp.Play;
  mp.Stretch;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-24T15:03:44.727

For a real stretch, I suggest the following changes to the MyRectFit function:

```
 function MyRectFit(var R: TRectF; const BoundsRect: TRectF): Single;
  var
    RatioX, RatioY: Single;
  begin
    Result := 1;
    if BoundsRect.Width * BoundsRect.Height = 0 then
      Exit;

    RatioX := R.Width / BoundsRect.Width;
    RatioY := R.Height / BoundsRect.Height;
    R := RectF(0, 0, R.Width / RatioX, R.Height / RatioY);

    Result := RatioX;
    RectCenter(R, BoundsRect);
  end; 
```

# ssrs-2008 - 如何检查 SSRS 文本框是否为空

> ID：12738569
> 
> 赞同：19
> 
> 时间：2012-10-05T02:07:56.623
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

如何检查 SSRS 2008 中的文本框是否为空？我已经尝试过这段代码，但它不起作用。

```
IIF(ReportItems!txtCountVolunter.Value = "", false, true) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T12:16:36.227

尝试以下操作：

```
=IIF(Len(ReportItems!txtCountVolunteer.Value) <= 0, true, false) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-05T12:36:37.447

你应该使用这个表达式

```
=IIF(IsNothing(Fields!UserEmail.Value) OR Fields!UserEmail.Value = "",
 "Empty", "Not Empty") 
```

第一个： IsNothing(Fields!UserEmail.Value) 检查字段值是否为 NULL 第二个：Fields!UserEmail.Value = "" 检查字段值是否为空 ""

所以你需要他们两个来检查值是空还是空。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T02:58:55.023

试试这样的 IsNothing 函数：

```
IIF(IsNothing(ReportItems!txtCountVolunter.Value), "empty", "not empty") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-09T11:57:05.527

检查是否为空

```
=IIF(IsNothing(ReportItems!txtCountVolunteer.Value),true, false) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-16T20:55:22.707

虽然在此之前的答案是正确的，但它们有点多余。仅此就足够了：

```
=String.IsNullOrEmpty(Fields!txtCountVolunteer.Value) 
```

要确定该值是否不为空：

```
=NOT String.IsNullOrEmpty(Fields!txtCountVolunteer.Value) 
```

如果您使用表达式来指示可见性，请记住，当字段应**隐藏**时，表达式应评估为真（默认为可见）。在我意识到这一点之前，我花了一个小时的大部分时间来解决我自己的表情。

在我的示例中，如果我有一个空字符串值或空字符串值，我将隐藏批号：[可见性表达式屏幕截图](https://i.stack.imgur.com/6WD6g.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-18T00:26:21.627

对于那些来自 .NET 世界并且您想要检查非空并说为了参数而想要值 0 而不是空白的人！

```
=IIf(String.IsNullOrEmpty(ReportItems!txtCountVolunteer.Value), 0, ReportItems!txtCountVolunteer.Value) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-13T05:00:29.527

如果您在数据集中使用转换和空值，则可以执行此操作（我已将存储过程作为源）：

```
=CInt(IIF(Parameters!Seller_id.Value = "" , "-1" , Parameters!Seller_id.Value)) 
```

然后在存储过程中添加条件

```
([some_field]=@param or @param=-1) 
```

# python - Python在循环中更改函数定义？

> ID：12738575
> 
> 赞同：0
> 
> 时间：2012-10-05T02:08:29.267
> 
> 标签：python

我想知道是否可以执行以下操作：如果一个函数将一个函数作为参数，我可以制作它以便可以在循环中更改内部函数的参数吗？

我有一个函数，它接受任何函数 f 并将其集成到 a、b 上。问题是如果我在一个循环中想要整合 cos(1* x) 然后 cos(2*x) ....cos(N*x) 我不知道如何让我的第一个函数明白当我说积分（f（i），a，b）我不是说积分cos（1）或cos（2）而是cos（1*x）或cos（2*x）等等。

例如：

```
def integrate(f,a,b):
 h = float(b-a)/10;
 I = 0;
 for i in range(10):
   I+= f(h*i);   <----(1)
return I;

A = zeros(N);
for k in range(N):
  A[k] = integrate(cos(k), a,b)   <-----(2) 
```

我想要的是调用 (2) 中的 cos(k)，使得在 (1) 中它变为 f(k * h * i)，这对您有意义吗？我想通过改变（2）来改变（1）的参数。我需要这个用于我正在做的傅立叶级数函数。它目前的工作方式是在括号内调用 cos() 而不是使用 (k * h* i) 调用 cos(k)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:21:24.943

你可以这样做[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)：

```
import functools

def cos_(k, x):
    return cos(k * x)

#...
A[k] = integrate(functools.partial(cos_, k), a, b) 
```

此外，Python 不需要分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:16:15.270

您*没有*将函数传递给`integrate`，而是将返回的值传递给`cos(k)`. 如果我正确理解您的目标，这应该可以通过传递[lambda（匿名函数）](http://docs.python.org/reference/expressions.html#lambda)来解决：

```
def integrate(f, a, b):
    h = float(b-a)/10
    I = 0;
    for i in range(10):
        I += f(h*i)

    return I

A = zeros(N)
for k in range(N):
    A[k] = integrate(lambda x: cos(k*x), a, b) 
```

`def`如果这很难阅读，您可以使用关闭的“正常” d 函数完成等效的结束`k`：

```
A = zeros(N)
for k in range(N):
    def callback(x):
        return k*x

    A[k] = integrate(callback, a, b) 
```

（代码未测试）

# java - 如何在 Textpad 中使用 Html 解析器？

> ID：12738579
> 
> 赞同：0
> 
> 时间：2012-10-05T02:08:41.577
> 
> 标签：java, html, parsing, classpath, textpad

我不是 Java 的新手，我在大学时学习了 Java。我目前正在做一个从在线网页抓取数据的小程序。我进行谷歌搜索，发现 html 解析器是一种简单的方法。

我的问题是如何设置类路径，并在 TextPad 中导入 html 解析器库？

- - - 我的答案 - - - - - - - - - - - - - - - - - - - - - -----

我找到了解决这个问题的方法。我想我应该把它贴到这里，以防其他人和我有同样的问题。

我不知道这是否是解决这个问题的合适方法。这里是。

我找到了一个链接 [http://htmlparser.sourceforge.net/javadoc/doc-files/using.html](http://htmlparser.sourceforge.net/javadoc/doc-files/using.html)

我下载了 htmlparser zip 文件，并将 lib 文件夹解压缩到我的 C 盘。我在 CMD 中运行这一行。（我使用的是基于 Windows 的系统。）设置 CLASSPATH=C:\lib\htmlparser.jar;C:\lib\htmllexer.jar;%CLASSPATH% 然后它可以工作。

我猜这一行是为了将新的 .jar 文件添加到旧的类路径中。%CLASSPATH% 表示您的旧类路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:43:07.517

我做了相当多的屏幕抓取，发现 Java 太麻烦了。以我的经验，宁愿使用 Groovy 来筛选数据。你不需要摆弄讨厌的类路径。由于 groovy 是 Java 的 dsl，而且您知道 Java，它将非常简单。您还可以将 Textpad 用作编辑器。

例如：

```
def slurper = new XmlSlurper()
def htmlParser = slurper.parse("http://stackoverflow.com")

htmlParser.'**'.findAll{ it.@class == 'question-hyperlink'}.each {
   println it
} 
```

以上代码来自一篇博文：http: [//www.maclovin.de/2010/02/robust-html-parsing-the-groovy-way/](http://www.maclovin.de/2010/02/robust-html-parsing-the-groovy-way/)

# c# - C# MySQL 更新 - Datagridview

> ID：12738583
> 
> 赞同：0
> 
> 时间：2012-10-05T02:09:01.330
> 
> 标签：c#, mysql, datagridview, insert-update

在`C#`Windows 窗体中，我有两个按钮；查询和更新。在那个表格上是`datagridview`我放置 MySQL 结果的地方。在分离中，当我单击 Query 时，我得到了正确的结果。当我更改中的值`datagrid`并单击更新时，MySQL 会收到这些更新。但是，当我返回单击查询以从 MySQL 表中获取最新更改时，它`datagridview`是空白的。我必须关闭表单并重新单击查询才能最终出现。

这是没有正确调用 da.update() 或在“查询”按钮中错误地引用某些内容的功能吗？

这是来自winform的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;
using System.Data.Odbc;
using System.Data.SqlClient;

namespace GridAdjustments
{
    public partial class Form3 : Form
    {
        private MySqlDataAdapter da;        // Data Adapter
        private DataSet ds;                 // Dataset
        private string sTable = "Portfolio";  // Table Name

        public Form3()
        {
            InitializeComponent();
        }

        private void Query_Click(object sender, EventArgs e)
        {
            string connectionString = "SERVER=localhost;" +
                                      "UID=xxxxxx;" +
                                      "PASSWORD=xxxxx;" +
                                      "DATABASE=test";

            MySqlConnection conn = null;

            try
            {    
                conn = new MySqlConnection(connectionString);

                conn.Open();
                da = new MySqlDataAdapter("SELECT * FROM books;", conn);
                ds = new DataSet();
                da.Fill(ds, sTable);
                conn.Close(); 
            }
            catch (MySql.Data.MySqlClient.MySqlException ex)
            {
                MessageBox.Show(ex.Message);
                conn.Close();
            }
            finally
            {
                dataGridView1.Refresh();

                dataGridView1.DataSource = ds;
                dataGridView1.DataMember = sTable;

            }  
        }

        private void Update_Click(object sender, EventArgs e)
        {
            MySqlCommandBuilder cmb = new MySqlCommandBuilder(da);

            da.Update(ds, sTable);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T21:50:15.457

您的方法适用于您在此处的简单查询 - 但假设您希望在表单上包含作者的 URL，如下所示：

"SELECT books.*, trim(author.URL) as WebSite FROM books left join author on books.AuthorID = author.RecordID group by books.name;

我添加了 Trim() 和 AS，因为 MySQLConnector 不支持一次编辑多个表，并使其成为计算字段有效 - 直到您想要刷新它。

现在要记住这一点，因为我还没有提出解决方案，但我一直在挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:19:33.440

尝试更改您的代码，并检查它是否适合您。

```
private void Query_Click(object sender, EventArgs e)
{
    try
    {    
        MySqlConnection conn = new MySqlConnection(connectionString);
        conn.Open();
        da = new MySqlDataAdapter("SELECT * FROM books;", conn);
        ds = new DataSet();
        da.Fill(ds, sTable);
        conn.Close(); 
    }
    catch (MySql.Data.MySqlClient.MySqlException ex)
    {
        MessageBox.Show(ex.Message);            
    }
    finally
    {
        dataGridView1.Refresh();

        dataGridView1.DataSource = ds;
        dataGridView1.DataMember = sTable;

        if (conn.State == System.Data.ConnectionState.Open)
            conn.Close();
    }  
}

private void Update_Click(object sender, EventArgs e)
{
    try
    { 
        MySqlConnection conn = new MySqlConnection(connectionString);
        conn.Open();

        MySqlCommandBuilder cmb = new MySqlCommandBuilder(da);
        cmb.Connection = conn;
        da.Update(ds, sTable);
    }
    catch (MySql.Data.MySqlClient.MySqlException ex)
    {
        MessageBox.Show(ex.Message);            
    }
    finally
    {           
        if (conn.State == System.Data.ConnectionState.Open)
            conn.Close();
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-06T18:11:22.210

试试这个。更新后重新绑定您的数据源以刷新您的 DG。

```
 private void Update_Click(object sender, EventArgs e)
    {
        MySqlCommandBuilder cmb = new MySqlCommandBuilder(da);

        da.Update(ds, sTable);

        dataGridView1.DataSource = ds;      

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T14:28:58.247

不是最干净的，但这是一个工作示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using MySql.Data;
using MySql.Data.MySqlClient;

namespace TryMariaDB_DataGridView
{
    public partial class Form1 : Form
    {
        private MySqlDataAdapter MyDA = new MySqlDataAdapter();
        private BindingSource bSource = new BindingSource();
        private DataSet dataSet = new DataSet();
        private DataTable table = new DataTable();

        public Form1()
        {
            InitializeComponent();
        }

        private void MySQL_ToDatagridview()
        {
            string connectionString = "server = localhost; userid = root; database = BirdWatching; port = 3306; password = xxxxxx";
            MySqlConnection mysqlCon = new MySqlConnection(connectionString);
            mysqlCon.Open();

            //select command has to include the primary key column, otherwise update command will fail
            //as it does not know exactly what row is updated.
            MyDA.SelectCommand = new MySqlCommand("SELECT * from bird", mysqlCon);
            MyDA.Fill(table);   
            bSource.DataSource = table;
            dataGridView1.DataSource = bSource;
        }

        private void buttonSubmit_Click(object sender, EventArgs e)
        {
            //calling the command builder will generate an update command for you
            MySqlCommandBuilder cb = new MySqlCommandBuilder(MyDA);
            MyDA.Update(table);
        }

        private void buttonReload_Click(object sender, EventArgs e)
        {
            table.Clear();
            MySQL_ToDatagridview();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            MySQL_ToDatagridview();
        }
    }
} 
```

# javascript - Ajax 无限循环

> ID：12738585
> 
> 赞同：0
> 
> 时间：2012-10-05T02:09:07.983
> 
> 标签：javascript, html, ajax

我有一些 AJAX 代码，我想每 1 秒继续运行一次。我将此添加到我的 HTML 页面中，以查看它是否会自行更新，但我必须刷新才能看到更改。

```
 while (1) {
            getTime();
        } 
```

这无法继续更新，它从未更新我的文本。让 Ajax 一遍又一遍地做某事的方法是什么？

这是getTime()：

```
 function getTime() {
            if (str=="") {
                document.getElementById("txtHint").innerHTML="";
                return;
            } 

            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            } else {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                }
            }

            xmlhttp.open("GET","auction.php?getTime=1",true);
            xmlhttp.send();

            setTimeout(getTime, 1000);
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:10:12.510

重复性任务通常在 javascript 中使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

> `window.setInterval` 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

在你的例子中，那将是

```
setInterval(getTime, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:10:28.660

[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)可能是您最好的选择 - 或者，`setTimeout`在 AJAX 成功时反复重置自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:11:12.467

```
setInterval(getTime, 1000); // Run getTime() every second
setInterval(getTime, 200);  // Run getTime() every 200 milliseconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T02:11:17.410

您的代码是一个无限循环，并且将进入浏览器可以很快处理的来自 js 的打开连接的限制数量。

用来`window.setInterval`做这样的事情。

```
window.setInterval(getTime, 1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T02:12:53.180

```
function getTime(){
     setTimeout(getTime, [interval]);
} 
```

这应该这样做。

# python - python epoll和非阻塞

> ID：12738590
> 
> 赞同：0
> 
> 时间：2012-10-05T02:10:12.777
> 
> 标签：python, nonblocking, epoll

简单的client-server socket学习代码，server-end是：

```
import socket,select,time

s = socket.socket()

host = socket.gethostname()
port = 1234
s.bind((host,port))
s.listen(50)
s.setblocking(0)              # (1)

fdmap = {s.fileno():s}

p = select.epoll()
p.register(s)
while True:
    events = p.poll()
    for fd,event in events:
       if fd is s.fileno():
           c,addr = s.accept()
           c.setblocking(0)                    #(2)
           print('Got connection from: ',addr)
           p.register(c)
           fdmap[c.fileno()] = c 
       elif event & select.EPOLLIN:
           data = fdmap[fd].recv(1024)
           if not data:
               print('disconnected')
               p.unregister(fd)
               del fdmap[fd]
           else:
               print(data) 
```

客户端是

```
import socket,time

s = socket.socket()

host = socket.gethostname()
port = 1234

s.connect((host,port))
print(s.send(b'hello server')) 
```

我的问题是：
1.AFAIK 在 IO 多路复用模型中，epoll.poll 会阻塞，直到一个套接字可用，所以在对其进行操作时，它不应该阻塞（应该直接返回），那么为什么我们应该调用 setblocking( 0）在（1），（2）中，目的是什么？我试过把它们关掉，它仍然有效

2.客户端运行时可能会很慢，大约1s后输出12（这是它发送到服务器的字节），我通过使用time.time（）一个一个语句来分析它，然后发现s .connect((host,port)) 通常需要大约 1s，我哪里错了？（这发生在 poll/epoll 上，当使用 select 时，客户端运行速度非常快）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:36:35.463

如果您查看[文档](http://docs.python.org/library/select.html#select.epoll.poll)，您会看到 epoll`poll`函数带有一个`timeout`参数，默认为`-1`表示无限期等待。如果将超时设置为零，它将立即返回。

至于延迟`connect`可能是因为`connect`必须对主机名进行 DNS 查找才能找到 IP 地址。

# html - 在 div 内的 span 内对齐图像和文本

> ID：12738592
> 
> 赞同：1
> 
> 时间：2012-10-05T02:10:21.050
> 
> 标签：html

我正在疯狂地尝试完成这项工作，这就是我试图完成的结果：

![在此处输入图像描述](../Images/5ba5c32058b313f31fefa0f450ca7190.png)

```
 <div style="float: left;width:400px;border:1px;">
        <span><img src="" style="width: 60px;height: 60px;" /><br />SQL Server 2005</span>
        <span><img src="" style="width: 60px;height: 60px;" /><br />SQL Server 2008</span>
        <span><img src="" style="width: 60px;height: 60px;" /><br />Ruby on Rails</span>
    </div> 
```

只是想不通，有人会猜吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:34:27.047

这应该做你想要的：

```
<div style="width:400px;border:1px;">
   <div style="width:120px; float:left; text-align:center;">
        <img src="" style="width: 60px;height: 60px;" />
        <br/>
        <span>SQL Server 2005</span>
    </div>
    <div style="width: 120px; float:left; text-align:center;">
        <img src="" style="width: 60px;height: 60px;" />
        <br/>
        <span>SQL Server 2008</span>
    </div>
    <div style="width: 120px; float:left; text-align:center;">
        <img src="" style="width: 60px;height: 60px;" />
        <br/>
        <span>Ruby on Rails</span>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:19:41.673

HTML：

```
<div id="row">
    <span><img src="" /><br />SQL Server 2005</span>
    <span><img src="" /><br />SQL Server 2008</span>
    <span><img src="" /><br />Ruby on Rails</span>
</div> 
```

CSS：

```
div#row {
  overflow: hidden; /*This is a clearfix because all it's children are floated*/
  width: 400px;
  border: 1px solid #000000;
}

div#row span {
  display: block;
  float: left;
  width: 60px;
  margin: 0 36px;
}

div#row span img {
  display: block;
  width: 58px;
  height: 58px;
  border: 1px solid #000000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:18:38.843

浮动剩下的所有跨度，此刻它们都在彼此下方。

# c++ - seekg 和 seekp : seek(streampos pos) 和 seek(streamoff off, ios::beg) 之间的区别

> ID：12738594
> 
> 赞同：1
> 
> 时间：2012-10-05T02:11:10.910
> 
> 标签：c++, iostream, standard-library, seek

如果我们查看 istream 和 ostream 的文档，我们有以下功能：

```
istream& seekg ( streampos pos );
istream& seekg ( streamoff off, ios_base::seekdir dir );

ostream& seekp ( streampos pos );
ostream& seekp ( streamoff off, ios_base::seekdir dir ); 
```

我想知道为什么每次都有两种形式的功能，而不仅仅是：

```
istream& seekg ( streamoff off, ios_base::seekdir dir = ios_base::beg );
ostream& seekp ( streamoff off, ios_base::seekdir dir = ios_base::beg ); 
```

拥有这两个功能而不是标准的四个功能有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:50:48.337

`streampos`是一个 typedef ，`std::fpos<std::char_traits<char>::state_type>`它保存流中的当前位置以及当前的移位状态。多字节编码方案（例如 shift-jis）具有与状态相关的编码。这基本上意味着，根据前面的字符序列，您解释流中某个字节的方式可能会有所不同。`streampos`您不仅可以在流中保持一个位置，而且还可以存储流中该点的移位状态。此外，由于换行符等在不同系统上的解释不同，因此文本文件中的逻辑位置可能与其实际物理位置不同。`streampos`这些是不能是简单整数类型的一些原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:28:40.443

iostreams 库相当复杂和复杂。类型`streampos`和`streamoff`是*实现定义*的，并且不需要实现以使它们以您似乎建议的方式相关的整数。

例如，一个实现提供更大、更强大的代理对象是可行的，它们分别代表位置和偏移的概念，在这种情况下，用户可能希望能够直接使用这样的对象进行搜索，而不是通过转换一个手动进入另一个。

# php - 制作字符串 int 并检查字符串是否不是 int 的最佳实践

> ID：12738597
> 
> 赞同：3
> 
> 时间：2012-10-05T02:11:18.783
> 
> 标签：php

我有以下代码：

```
<?php

function s2int($pinned_id) { 
$action="aaa";
if ( $action && is_numeric($pinned_id) && (float)$pinned_id==(int)$pinned_id) {
   /**
   * @param [string] $action is setted
   * @param [int/string as int] $pinned_id is setted
   */
echo "-chekpoint- $pinned_id\n";
    $pinned_id = (int)$pinned_id;
} 
else { echo "-passpoint- $pinned_id\n";}
return $pinned_id;
}

echo s2int("000010")."\n";
echo s2int(10.00001)."\n";
echo s2int(10)."\n";
echo s2int("10")."\n";
echo s2int("0")."\n";
echo s2int("a")."\n";
echo s2int("a10")."\n";
echo s2int("10a")."\n";
echo s2int("0x1A")."\n";
echo s2int("-100")."\n"; 
```

输出：

```
-chekpoint- 000010
10
-passpoint- 10.00001
10.00001
-chekpoint- 10
10
-chekpoint- 10
10
-chekpoint- 0
0
-passpoint- a
a
-passpoint- a10
a10
-passpoint- 10a
10a
-chekpoint- 0x1A
0
-chekpoint- -100
-100 
```

预期输出：

```
-chekpoint- 000010
10
-passpoint- 10.00001
10.00001
-chekpoint- 10
10
-chekpoint- 10
10
-chekpoint- 0
0
-passpoint- a
a
-passpoint- a10
a10
-passpoint- 10a
10a
-passpoint- 0x1A
0x1A
-chekpoint- -100
-100 
```

什么是使 s2int 返回正确的 (int) 变量并在变量无法转换为 (int) 时采取行动的最佳实践（如果输入是十六进制，您会看到结果意外？

[http://codepad.org/lN84HKzV](http://codepad.org/lN84HKzV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:18:56.643

我会为此使用[`filter_var()`](http://sg2.php.net/filter_var)：

```
if (false === ($x = filter_var($pinned_id, FILTER_VALIDATE_INT))) {
    echo "Could not convert $pinned_id to an integer";
}
// $x is an integer 
```

的情况`000010`不明确，因为它也可能表示八进制；但如果你想要一个 10 基数，你必须去掉任何前导零：

```
$num = preg_replace('/^0+(\d+)/', '\\1', $pinned_id);
if (false === ($x = filter_var($num, FILTER_VALIDATE_INT))) {
    echo "Could not convert $pinned_id to an integer";
}
// $x is an integer 
```

如果您还想允许十六进制：

```
if (false === ($x = filter_var($num, FILTER_VALIDATE_INT, array(
    'flags' => FILTER_FLAG_ALLOW_HEX,
))) {
    echo "Could not convert $pinned_id to an integer";
}
// $x is an integer 
```

**编辑**

您也可以选择以下`preg_match()`路线：

```
function s2int($pinned_id) { 
    echo "/$pinned_id/  ";
    if (!preg_match('/^-?\d+$/', $pinned_id)) {
        echo "Could not convert $pinned_id to an integer";
        return false;
    }
    return (int)$pinned_id;
} 
```

*由于某种原因，这不会在键盘上运行，但它应该在任何其他系统上运行*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:59:28.387

```
function s2int($pinned_id) {
// use regex (regular expression)
$pattern = "/[a-zA-Z.]/";
$bool = preg_match($pattern, $pinned_id);

// check if $pinned_id is without any character in the $pattern
if ( $bool == false ) {
    /**
     * @param [string] $action is setted
     * @param [int/string as int] $pinned_id is setted
     */
    echo "-chekpoint- $pinned_id<br />";
    $pinned_id = (int)$pinned_id;
} else { 
    echo "-passpoint- $pinned_id<br />";
}
    return $pinned_id;
} 
```

# algorithm - 切比雪夫质心，在边缘情况下显然失败

> ID：12738602
> 
> 赞同：0
> 
> 时间：2012-10-05T02:11:57.073
> 
> 标签：algorithm, debugging, math, testcase

我试图找到切比雪夫距离下的一组点的质心。我编写了一个程序，该程序显然适用于我尝试过的情况，但显然对我无法访问的某些边缘情况给出了错误的答案。[元备注：我会标记这个作业，但标签已被淘汰]

为了达到目的，质心是与一组点具有最小平均距离的点。二维上两点 p 和 q 的切比雪夫距离为

![切比雪夫距离](../Images/f73d6439c6f4719e89f77dc30f5e0a02.png)

此外，我仅限于具有积分坐标的点。

这是我的代码：

```
sum_x=0; sum_y=0
for p in points:
    sum_x = sum_x + p[0]
    sum_y = sum_y + p[1]
center_x = int(sum_x/N)
center_y = int(sum_y/N)

directions = [(-1,-1),
     (-1,0),
     (-1,1),
     (0,-1),
     (0,0),
     (0,1),
     (1,-1),
     (1,0),
     (1,1)]

distances = [0] * len(directions)
for p in points:
    for i in range(len(directions)):
        distances[i] = distances[i] + max(abs(center_x+directions[i][0]-p[0]),abs(center_y+directions[i][1]-p[1]))

best_direction = min(range(len(directions)), key = lambda i:distances[i])

print "centroid = (", center_x+directions[best_direction][0],",", center_y+directions[best_direction][1],")"

print "total distance = ", distances[best_direction] 
```

这是我的理由：切比雪夫度量与二维旋转下的曼哈顿距离相同。我基本上找到曼哈顿质心，这与点的常规平均值相同，然后在相邻的积分点中搜索以获得实际的切比雪夫质心。但我似乎无法在我的代码中找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:31:01.473

你的理由在一个方面是不正确的。曼哈顿质心*不是*点的平均值。例如，取点集 (0, 0)；(1, 0); (100, 0)。平均值为 (33.66, 0)，但我们可以通过选择 (1, 0) 来做得更好。再做几个例子，你应该很容易看到真正的答案。

此外，您提到 Chebyshev 度量等效于*旋转下*的曼哈顿距离，但您不会在代码中的任何位置旋转点。这似乎至少不一致：您不应该在旋转空间中计算曼哈顿质心吗？

# java - 尝试在 Apache Tomcat 上从 Eclipse 运行 Servlet 项目时出现 java.lang.NullPointerException

> ID：12738606
> 
> 赞同：1
> 
> 时间：2012-10-05T02:12:50.053
> 
> 标签：java, jsp, servlets

尝试使用 Apache Tomcat 7(http://localhost:8080/MyProject/project/) 运行我的项目时不断收到此错误，并且不知道为什么它仍然是 NullPointer：

> java.lang.NullPointerException com.myproject.doGet(MyProjectListServlet.java:36) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

**MyProjectListServlet.java：**

```
package com.myproject;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/project/")
public class MyProjectListServlet extends HttpServlet {

    @Inject
    private MyProjectRepository itemsRepo;

    public MyProjectListServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        request.setAttribute("items", itemsRepo.listItems());

        getServletContext().getRequestDispatcher("/WEB-INF/pages/item-list.jsp").forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

**MyProjectRepositoryImpl.java**

```
package com.myproject;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class MyProjectRepositoryImpl implements MyProjectRepository {

    private int count;
    private Map<String, MyItem> idToMyItemMap = new HashMap<String, MyItem>();

    public MyProjectRepositoryImpl(){
        synchronized(this){
            items(item("aaa", "bbb", "111", "222", "zzz"),
                    item("ccc", "ddd", "333", "444", "xxx"));
        }
    }

    private MyItem item(String str1, String str2, String str3, String str4, String str5){
        return new MyItem("" + (count++), str1, str2, str3, str4, str5);
    }

    private void items(MyItem... items){
                for(MyItem item : items){
                    doAddMyItem(item);
                }
    }

    private void doAddMyItem(MyItem item){
        synchronized(this){
            this.idToMyItemMap.put(item.getId(), item);
        }
    }

    @Override
    public MyItem lookupMyItemById(String id) {
        // TODO Auto-generated method stub
        synchronized(this){
            return this.idToMyItemMap.get(id).cloneMe();
        }
    }

    @Override
    public void addMyItem(String str1, String str2, String str3, String str4, String str5) {
        // TODO Auto-generated method stub
        doAddMyItem(item(str1, str2, str3, str4, str5));

    }

    @Override
    public void updateMyITtem(String id, String str1, String str2, String str3, String str4, String str5) {
        // TODO Auto-generated method stub
        MyItem item = item(str1, str2, str3, str4, str5);
        synchronized(this){
            item.setId(id);
            this.idToMyItemMap.put(id, item);
        }
    }

    private List<MyItem> doListMyItems(){
        List<MyItem> items;
        synchronized(this){
            items = new ArrayList<MyItem>(this.idToMyItemMap.size());
            for(MyItem item : this.idToMyItemMap.values()){
                items.add(item.cloneMe());
            }
        }
        return items;
    }

    @Override
    public void removeMyItem(String id) {
        // TODO Auto-generated method stub
        synchronized(this){
            this.idToMyItemMap.remove(id);
        }
    }

    @Override
    public List<MyItem> listItems() {
        // TODO Auto-generated method stub
        List<MyItem> items = doListMyItems();
         Collections.sort(items, new Comparator<MyItem>(){
             public int compare(MyItem itemA, MyItem itemB){
                 return itemA.getId().compareTo(itemB.getId());
             }
         });
         return items;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:18:35.580

你的`private MyProjectRepository itemsRepo;`还没有被实例化。

# android - Android 事件时间监听器

> ID：12738613
> 
> 赞同：1
> 
> 时间：2012-10-05T02:13:56.567
> 
> 标签：android

我会用 SPen SDK 的 SPenTouchListener 来实现一个方法。监听器工作正常，但我会在用户第一次触摸后每 10 毫秒捕获一次触摸数据（坐标等），因为用户按下了另一个按钮。我怎么能这样做？这是侦听器代码的一部分：

```
public boolean onTouchPen(View view, MotionEvent event) {
            updateTouchUI(event.getX(), event.getY(), event.getPressure(), event.getAction(), "Pen");
            }

private void updateTouchUI(float x, float y, float pressure, int action, String tool){
    mX.setText("X : " + String.format("%.2f", x));
    mY.setText("Y : " + String.format("%.2f", y));
    mPressure.setText("Pressure : " + String.format("%.3f", pressure)); 
} 
```

换句话说，我想每 10 毫秒调用一次*updateTouchUI*，因为用户在活动中按下了一个按钮。我也想每次都捕获时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:10:29.550

您可以创建一个`Handler`

```
private Handler mHandler = new Handler();
public void updateUI() {
        mHandler.postDelayed(mUpdateTimeTask, 10); //10ms
    }  

    /**
     * Background Runnable thread
     * */
    private Runnable mUpdateTimeTask = new Runnable() {
           public void run() {
      updateTouchUI (param...); //Your function

               // Running this thread after 10 milliseconds
               mHandler.postDelayed(this, 10);
           }
    }; 
```

并添加 `updateUI()`您想要的 onClickEvent`Button`

# c++ - C++ 中 string::substr() 的运行时间是多少？

> ID：12738619
> 
> 赞同：1
> 
> 时间：2012-10-05T02:14:52.823
> 
> 标签：c++, algorithm, substring

> **可能重复：**
> [std::string::substr 成员函数的复杂性是多少？](https://stackoverflow.com/questions/12449298/what-is-the-complexity-of-stdstringsubstr-member-function)

我正在尝试对常见的子字符串问题进行天真的解决方案。为此，我首先找到第一个字符串的所有子字符串并将它们添加到哈希集中。然后，我找到第二个字符串的子字符串，看看它们是否存在于哈希集中，如果长度大于当前最大子字符串，则调整最长的子字符串。我想知道的是：就`str1`（假设`str1`有长度`n`）的长度而言，substr 的运行时间是多少？

```
#include<hash_set>

string longestCommonSubstring(string str1, string str2) {
    hash_set<string> substrings;
    string maxSubstring = "";
    int maxLength = 0;

    for (int i = 0; i < str1.size(); i++) {
        for (int j = i+1; j < str1.size(); j++) {
            substrings.insert(str1.substr(i,j-i));
        }
    }

    for (int i = 0; i < str2.size(); i++) {
        for (int j = i+1; j < str2.size(); j++) {
            if (substrings.find(str2.substr(i,j-i)) != substrings.end()) {
                if (j-i > maxLength) {
                    maxSubstring = str2.substr(i,j-1);
                    maxLength = j - i;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:23:12.383

没有指定的复杂性`substr`，但`string`具有恒定时间随机访问，并`substr`创建一个给定长度的新字符串，因此基本上是复制那么多字符的成本。

请注意，GCC`std::string`使用引用计数实现（非法），因此制作副本的实际成本可能会因您的实现而异。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T02:23:13.340

编辑：对不起，我误解了这个问题（我没有正确阅读这个问题）。

时间复杂度取决于硬件，但可以合理地假设它与请求的子字符串的长度成正比。

该函数所做的只是创建原始字符串的一部分的副本。

# php - 在 PHP 中，如何检查某个循环使用了多少内存

> ID：12738620
> 
> 赞同：2
> 
> 时间：2012-10-05T02:15:21.127
> 
> 标签：php, benchmarking

我目前正在制作一个 PHP 计时器，用于检查某种做某事的方式与完成相同工作的另一件事相比需要多少时间，基本上是基准测试。

现在，我还想让这个工具能够判断这种特定的执行方式占用了多少内存。

因此，有关更多信息，我正在使用 microtime 来检查开始时间，在该代码上执行 200 万次循环，然后用一些数学计算另一个 microtime 来检查它花费了多少时间，所以我想做的是，在外面微时间范围，还检查内存使用情况。

这是我当前的代码：

```
// Set the amount of loops to do, default is 2000
$loops = 2000;
$start_time = microtime(true); // Start the timer

for($i = 0; $i < $loops; $i++) {
    // Code to test
}

$total_time = microtime(true) - $start_time; // Stop the timer, and figure out the total

ob_end_flush();   // Enable output again
echo $total_time; // Echo the timer's result
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T02:46:57.817

如果您至少使用 5.2，`memory_get_peak_usage()`应该可以正常工作。

[http://php.net/manual/en/function.memory-get-peak-usage.php](http://php.net/manual/en/function.memory-get-peak-usage.php)

您可以在循环之前调用它一次以了解直到该点的基线，然后再调用一次以查看循环执行期间的峰值。

正在修改您的代码...

```
// Set the amount of loops to do, default is 2000
$loops = 2000;
$base_mem = memory_get_peak_usage();
$start_time = microtime(true); // Start the timer

for($i = 0; $i < $loops; $i++) {
    // Code to test
}
$end_time = microtime(true);  // Stop the timer
$extra_mem = memory_get_peak_usage();

// figure out the totals
$total_time = $end_time - $start_time;
$total_mem = $extra_mem - $base_mem;

ob_end_flush();   // Enable output again
echo "Total Time: $total_time\n";
echo "Total Mem Above Basline: $total_mem bytes\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T02:18:53.870

`memory_get_usage`当您认为进程处于高峰时，您可以使用(http://php.net/manual/en/function.memory-get-usage.php)。

或者你也可以偶尔调用它并记录任何最高值......或者你喜欢。

但这是在一个过程中。您是在谈论一个 PHP 进程“A”检查另一个 PHP 进程的内存使用情况吗？

如果是这样的话：

```
$myPID = getmypid();
$stats = explode("\n", shell_exec('pmap $(pgrep php) | grep \'total\\|\\:\''));
for ($i = 0; $i < count($stats); $i += 2) {
    if (strpos($stats[$i], "$myPID") === false) {
        preg_match('/\d+/', $stats[$i+1], $preRes);
        $res = $preRes[0];
    }
}
//if $res has a value, that value is the kilobytes of memory being used by the other PHP process 
```

这个解决方案有一个问题：如果你总共运行了 2 个以上的 php 进程，你不能保证你会得到正确的进程。

为了解决这个问题，首先运行另一个进程，获取它的 PID，然后将它作为参数传递给这个进程。如果您有要检查的进程 PID，您可以这样做：

```
$stats = explode("\n", shell_exec('pmap $(pgrep php) | grep \'total\\|\\:\''));
for ($i = 0; $i < count($stats); $i += 2) {
    if (strpos($stats[$i], "$otherPID") === 0) {
        preg_match('/\d+/', $stats[$i+1], $preRes);
        $res = $preRes[0];
    }
}
//$res contains the result you want in kilobytes 
```

您也可以检查所有不是您的进程的内存：

```
$myPID = getmypid();
$stats = explode("\n", shell_exec('pmap $(pgrep php) | grep \'total\\|\\:\''));
for ($i = 0; $i < count($stats) - 1; $i += 2) {
    if (strpos($stats[$i], "$myPID") === false) {
        preg_match('/\d+/', $stats[$i+1], $preRes);
        $res[] = $preRes[0];
    }
} 
```

因此，要获得最大的内存使用量，只需保留一个 $max 变量并继续检查它。

# batch-file - 从远程文件夹批量增加文件名

> ID：12738624
> 
> 赞同：0
> 
> 时间：2012-10-05T02:16:29.627
> 
> 标签：batch-file, rename, batch-rename

我想在 Windows 批处理或 powershell 脚本中使用日期和自动增量编号重命名 .TXT 文件。即 20121004ABC.txt、20121004ABC_02.txt、20121004ABC_03.txt。. .

棘手的部分是这些文件在上传时会移动到不同的文件夹。如果文件在存档文件夹中具有相同的日期，我希望递增的数字继续......

SO 20121004ABC.txt, 20121004ABC_02.txt, 20121004ABC_03.txt 被上传并移动到 C:\return\archive 那天晚些时候 4 个新的 .txt 文件被放入 c:\return，我想运行一个批处理文件来命名它们20121004ABC_04.txt、20121004ABC_05.txt、20121004ABC_06.txt、20121004ABC_07.txt

第二天，递增的数字将重新启动，20121005ABC.txt，20121004ABC_02.txt 到目前为止，我有：

```
setlocal enabledelayedexpansion
SET date=%date:~-4,4%%date:~-10,2%%date:~-7,2%
set /a count=0
for /f "tokens=*" %%a in ('dir /b /od *.txt') do (
ren %%a %date%_0!count!.txt
set /a count+=1
) 
```

但这显然只是一个开始，并没有回答我的很多问题！

- 不会继续从存档文件夹中增加数字 - 我相信循环功能和覆盖其他文件等存在一些未知问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:53:04.580

正如我提到的，我对编码和学习很陌生。我想出了一种技术来解决我的问题，它可能很混乱，但似乎可以解决问题！我想分享其他人有类似问题的情况。此外，如果有人对此代码有任何批评，请这样做，我会将其视为建设性的批评，并很乐意在我这边改进代码。

另外，正如另一点可能有用也可能没有帮助，我使用 SQL 查询来导出 txt 文件，然后使用 Cygwin

谢谢！

```
c:\cygwin\bin\bash C:\s3\return\split.sh 'Shell Script to Split DB Export file into 25000 line Pieces
CD C:\s3\return\Returned_ARCHIVED 'Directory of Archive of Files To continue Counting from
for /f "tokens=*" %%a in ('dir /b /od') do set newest=%%a 'Newest File in Archive Directory
Set Name=%newest:~0,8% 'Take only the important part of the File name
Set /a FileNum=%newest:~12,2% 'Take only the incremental number part off the filename
SET date=%date:~-4,4%%date:~-10,2%%date:~-7,2%
If %date% == %Name% (set /a count=%filenum%+1) Else (set /a count=0) 

'if the latest file in the archive is from today date +1 ifnot Start at 0

cd C:\s3\return 'Directory if Files that need renamed
for /f "tokens=*" %%a in ('dir /b /od ABC_*') do (
ren %%a %date%ABC_0!count!.txt
set /a count+=1
) 
```

PS：请给我一些声誉，这样我就可以将他们提供给我的帮助归功于其他人！

谢谢！

# javascript - 3 个问题 Jquery readmore 插件让我很困惑

> ID：12738626
> 
> 赞同：0
> 
> 时间：2012-10-05T02:16:37.423
> 
> 标签：javascript, jquery, jquery-plugins

我在下面的其他示例 jquery 代码中看到，为什么他像这样制作变量

**var moreLink = $('.truncate_more_link', obj);**
为什么不 **var moreLink = $('.truncate_more_link');**

我对 minTrail 在默认对象中的作用感到困惑？

在下面这个例子中，他的意思是什么，为什么 body.length - 1 呢？

**var str2 = body.substring(splitLocation, body.length - 1);**

当我们想在适当的条件下使用 indexof 时的最后一件事......？？

## 完整的代码示例：

```
(function($){  
 $.fn.truncate = function(options) {  

  var defaults = {  
   length: 300,  
   **minTrail: 20,**  
   moreText: "more",  
   lessText: "less",  
   ellipsisText: "..."  
  };  

  var options = $.extend(defaults, options);  

  return this.each(function() {  
   obj = $(this);  
   var body = obj.html();  

   if(body.length > options.length + **options.minTrail**) {  
    var splitLocation = body.indexOf(' ', options.length);  
    if(splitLocation != -1) {  
     // truncate tip  
     var splitLocation = body.indexOf(' ', options.length);  
     var str1 = body.substring(0, splitLocation);  
     **var str2 = body.substring(splitLocation, body.length - 1);**  
     obj.html(str1 + '<span class="truncate_ellipsis">' + options.ellipsisText +   
      '</span>' + '<span  class="truncate_more">' + str2 + '</span>');  
     obj.find('.truncate_more').css("display", "none");  

     // insert more link  
     obj.append(  
      '<div class="clearboth">' +  
       '<a href="#" class="truncate_more_link">' +  options.moreText + '</a>' +   
      '</div>'  
     );  

     // set onclick event for more/less link  
     **var moreLink = $('.truncate_more_link', obj);**  
     **var moreContent = $('.truncate_more', obj);**  
     **var ellipsis = $('.truncate_ellipsis', obj);**  
     moreLink.click(function() {  
      if(moreLink.text() == options.moreText) {  
       moreContent.show('normal');  
       moreLink.text(options.lessText);  
       ellipsis.css("display", "none");  
      } else {  
       moreContent.hide('normal');  
       moreLink.text(options.moreText);  
       ellipsis.css("display", "inline");  
      }  
      return false;  
       });  
    }  
   } // end if  

  });  
 };  
})(jQuery); 
```

***谢谢希望你的回答！！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:36:20.947

第一件事

> var moreLink = $('.truncate_more_link', obj);
> 
> 为什么不 var moreLink = $('.truncate_more_link');

obj 是上下文..`obj = $(this);` 所以它只会获取带有 class=truncate_more_link 的后代元素

jQuery，您可以在上下文中传递，它的工作方式与使用 find.. 相同，因此相当于

```
$('.truncate_more_link', obj); 
```

将会

```
$(obj).find('.truncate_more_link'); 
```

第二件事

> 为什么 body.length - 1 呢？
> 
> var str2 = body.substring(splitLocation, body.length - 1);

`var body = obj.html();`意味着它获取当前元素内的所有内容..`body.length - 1`等于内容中的最后一个字符..因为它的索引为 0 - 所以子字符串一直从`splitlocation`索引开始直到结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:32:31.583

.truncate_more 是一个类，因此可能有超过 1 个元素具有同一个类。

现在，如果您注意到以下内容正在返回匿名函数返回的值。

```
 return this.each(function() {  
   obj = $(this);  
   .....................
   ...........................
   ..................................
   }); 
```

以上将对每个具有类名 .truncate_more 的元素执行

所以这个语句 lopps( 遍历所有类为 .truncate_more 的元素。

所以这`var moreLink = $('.truncate_more_link', obj);`将一个一个地分配元素，`var morelink`并最终为它们设置点击处理程序。

关于你的第二次困惑

```
var str2 = body.substring(splitLocation, body.length - 1); 
```

由于 body 是一个数组并且索引为 0，因此要访问 body 中的第一个字符，使用此语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T07:09:14.983

先来看看吧。。

```
var moreLink = $('.truncate_more_link', obj) 
```

它选择了具有上下文 obj 的特定类 truncate_more_link 有自己的父级。

第二..

```
var str2 = body.substring(splitLocation, body.length - 1);

     find the substring on splitlocation in context  with length the body minus 1; 
```

# objective-c - Xcode 应用程序属性列表路径 - 应用程序主目录？

> ID：12738629
> 
> 赞同：0
> 
> 时间：2012-10-05T02:17:21.717
> 
> 标签：objective-c, xcode, path, directory, plist

我是 Objective-c 的新手，想了解如何设置应用程序主目录的文件路径。对于测试和开发，我一直在我的硬盘驱动器上手动放入属性列表的路径，但现在我想捆绑它 - 或者只是存档并分发它以作为没有 Xcode 测试构建的应用程序进行测试......我已经一直在用这个...

```
NSString* pListPath = @"/Users/-----/Saves/Resourcing/resourcingProperties.plist";
NSMutableDictionary *pListDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:pListPath];
NSMutableDictionary* interfaceKeysDictionary = [pListDictionary valueForKey:@"Interface Keys"];
NSMutableDictionary* valueSavesDictionary = [pListDictionary valueForKey:@"Value Saves"]; 
```

将应用程序捆绑为我的应用程序文件夹中的独立应用程序后，如何使用应用程序主目录的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:26:54.533

对于您要执行的操作，您不希望或不需要直接读取 plist 文件。你只需调用：

```
NSBundle* mainBundle = [NSBundle mainBundle]; // or [NSBundle bundleWithIdentifier]
NSDictionary* infoDict = [mainBundle infoDictionary];
NSMutableDictionary* plistDictionary = [NSMutableDictionary dictionaryWithDictionary:infoDict]; 
```

然后，您可以根据需要在代码中添加它。

# javascript - 如何实现 jQuery - prettyCheckable？onClick 事件不起作用

> ID：12738635
> 
> 赞同：1
> 
> 时间：2012-10-05T02:18:44.403
> 
> 标签：javascript, jquery, css

我正在尝试实现 jQuery prettyCheckable 并且真的我有一个很好的风格：D，但 onclick 事件停止为我工作。我需要在我的输入复选框中的 onclick 事件来调用该函数。

此复选框成功：

```
<input id="checkId" type="checkbox" onClick="myFunction()"  />

function myFunction() {alert('works! :D');} 
```

这个复选框很漂亮，但是 onClick 事件不起作用：

```
$('input.checkStyle').prettyCheckable();

<input id="checkId" type="checkbox" class="checkStyle" onClick="myFunction()"  />

function myFunction() {alert('not work :(');} 
```

关于 prettyCheckable 的更多信息：http: [//arthurgouveia.com/prettyCheckable/](http://arthurgouveia.com/prettyCheckable/)

谢谢，对不起我的英语！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:33:36.697

它不会触发，因为您没有点击它。您正在单击可样式化的占位符跨度。要检测复选框输入的更改，请使用 jquery 更改事件而不是侦听单击。

```
$('input.checkStyle').prettyCheckable();

$('#checkId').on('change', myFunction);

function myFunction() {alert('not work :(');} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:37:01.023

正如@Jonathan Chow 所说，您可能忘记在标签之间放置 Javascript / Jquery 代码，如下所示：

```
<script type="text/javascript">
    function myFunction() {
        alert('WORKS');
    }
</script>
<input id="checkId" type="checkbox" class="checkStyle" onClick="myFunction()"  />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

但是，需要注意的是：

当您使用 jQuery 时，您不一定需要“ **onClick** ”属性，该属性旨在简化 DOM 的操作和访问。

因此，解决方案可以重写如下：

```
<script type="text/javascript">
    $('#checkId').click(function() {
         alert('WORKS');
    });
</script>
<input id="checkId" type="checkbox" class="checkStyle"  />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

此时，您所要做的就是使用 jQuery **prettyCheckable**函数（前提是已加载），一切就绪。这方面的一个例子是：

```
<script type="text/javascript">
    $('#checkId').click(function() {
         $(this).prettyCheckable();
    });
</script>
<input id="checkId" type="checkbox" class="checkStyle"  />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:12:37.643

我不是 100% 确定你需要在这里完成什么。如果您想检测您的复选框或单选何时被选中（当您单击它时会发生这种情况），您应该将 on change 事件添加到它。

首先，在 HTML 上创建输入并导入 prettyCheckable CSS 和 JS 文件。

```
<input id="checkId" type="checkbox" class="checkStyle"  />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后，在适当的 javascript 标记上，初始化插件，定义您的函数，然后使用适当的选择器将 .on('change') 事件添加到其中。

```
<script type="text/javascript">

  $('#checkId').prettyCheckable();

  function myFunction() {alert('Works!')}; 

  $('#checkId').on('change', myFunction);

</script> 
```

这应该可以解决问题。

# c# - 需要在变量中显示连接信息

> ID：12738642
> 
> 赞同：2
> 
> 时间：2012-10-05T02:19:17.787
> 
> 标签：c#, ado.net

我有连接字符串

SqlConnection con = new SqlConnection();

其中 con 包含来自 DLL 或 app.config 的连接字符串信息。

现在我想用不同的变量显示每一件事。

例如：

```
var connectionString = "Data Source=172.16.0.9;Initial Catalog=whiziblesem;UserID=mppuser;Password=mppuser"; 
```

预期输出：

```
 a = server name
        b = Database name
        c = username
        d = password 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T02:24:04.243

使用**SqlConnectionStringBuilder**类：

```
var builder = new SqlConnectionStringBuilder(connectionString); 
```

用法：

```
Console.WriteLine("Data Source: {0}", builder.DataSource);
Console.WriteLine("Initial Catalog: {0}", builder.InitialCatalog);
Console.WriteLine("User ID: {0}", builder.UserID);
Console.WriteLine("Password: {0}", builder.Password);
///... 
```

# c++ - 我应该使用什么来创建将 QMimeData 封装在 Qt 和 C++ 中的 QGraphicsView 覆盖？

> ID：12738650
> 
> 赞同：2
> 
> 时间：2012-10-05T02:20:55.870
> 
> 标签：c++, qt

我想为图形视图创建一个叠加层。目前我正在使用`QDrag`which封装mime数据的`setMimeData()`方法，我可以设置一个QPixmap，当我拖动它时跟随鼠标指针。

问题是我必须按住鼠标左键才能工作。现在用户点击一个按钮，她必须按住左按钮将图形拖到所需区域并释放按钮。在实践中，这是非常不直观的。

我想让用户单击一个按钮并释放鼠标按钮，然后图形跟随鼠标指针指向用户想要放置的位置，然后她再次单击鼠标并将图形放置在那里。但是，作为 Qt 的初学者，我不知道我可以使用哪个类来完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T19:18:51.583

您可以`QGraphicsItem`在场景上发生鼠标单击时创建一个，然后在跟踪鼠标时简单地移动它。

# ios - 在 iOS 中使用 PKCS7 进行加密和解密

> ID：12738651
> 
> 赞同：2
> 
> 时间：2012-10-05T02:21:05.910
> 
> 标签：ios, openssl

我有一个证书文件 crt 和私钥 pfx 文件。

我需要加密要发送到服务器的文本。在服务器端，他们使用 PKCS7 加密和解密方法。

在iOS端怎么做？

[我从https://github.com/st3fan/ios-openssl](https://github.com/st3fan/ios-openssl)添加了 openssl

我发现`PKCS7_encrypt`并`PKCS7_decrypt`在 openssl 标头中。

但是，我不知道如何使用它。

如果有人已经知道如何在 iOS 上使用 PKCS7 进行加密和解密，请指导我。

谢谢

# machine-learning - 为什么 Weka 的 Experimenter 没有显示所有 10 折的结果？

> ID：12738658
> 
> 赞同：2
> 
> 时间：2012-10-05T02:22:55.430
> 
> 标签：machine-learning, weka

我正在使用 Weka 对一组数据运行决策树分类器。我正在使用 10 折交叉验证，我想知道十折中每一个的准确度。在 Explorer 上的分类下，我可以得到一个很长的测试数据预测列表。这意味着我必须手动将所有 + 相加。

这将需要很长时间，尤其是在有大量数据的情况下。同样也很容易出错。

在 Experimenter 下，我可以在相同的数据上设置一个 10 倍交叉验证分类器（重复 1 次）。我可以将“行”设置为“折叠”，然后当我转到“列”并将其设置为“数字不正确”时，它只显示十个折叠中的 6 个。

那么我如何获得所有 10 折的正确数字，为什么要这样做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T10:16:40.833

在分析选项卡中，您应该选择：

1）行：**折叠**

2）列：您必须选择**运行**、**折叠**和**您想要的结果**。

如果您省略第二部分中的选项之一，您将只能看到部分信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:52:19.587

据我了解，Weka 这样做的方式是，在 K 折交叉验证 (CV) 中，单折的单个准确度没有那么有意义。K-fold CV 的整个想法是将数据简单地拆分为 K 个子集，然后依次省略每个折叠以进行验证。然后将验证误差计算为K 倍的**平均值，这是对我们学习算法误差的****无偏估计**。

有关详细信息，请参阅以下链接： [https ://alliance.seas.upenn.edu/~cis520/wiki/index.php?n=Lectures.Overfitting](https://alliance.seas.upenn.edu/~cis520/wiki/index.php?n=Lectures.Overfitting)

# symfony - 如何创建一个从关系中获取实体列表的 Symfony2 实体字段？

> ID：12738663
> 
> 赞同：1
> 
> 时间：2012-10-05T02:23:37.367
> 
> 标签：symfony, symfony-forms, doctrine-query

我有 3 个实体：公司、部门和用户用户与公司有一对多的关系。部门与公司和用户有分离的多对一关系

目标是让每个部门配置不同的部门，并且用户能够（在他们的个人资料中）从属于他们公司的部门中进行选择。

我正在尝试使用内置[实体](http://symfony.com/doc/2.0/reference/forms/types/entity.html)字段类型来完成此操作。我的问题是，当 Symfony 呈现该字段时，用户可以选择任何部门，而不仅仅是属于该用户公司的部门。

我尝试[使用自定义查询](http://symfony.com/doc/2.0/reference/forms/types/entity.html#using-a-custom-query-for-the-entities)，但我收到 $company 不存在的错误（即使我的函数中有它）。我认为这是因为自定义查询在一个闭包中，它有自己的范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:27:15.507

您使用自定义查询的建议是完全正确的。要在自定义查询范围内使用对象，您必须使用**use**语句。例如：

```
 $company = $user->getCompany();

    $builder->add('department', 'entity', array(
        'class' => 'YourSpecialBundle:Department',
        'property' => 'name',
        'query_builder' => function(EntityRepository $er) use($company) {
             return $er->createQueryBuilder('r')
                     ->where('r.company = :company')
                     ->setParameter("company", $company);
         }
    )); 
```

如果需要定义多个过滤器：

```
 $company = $user->getCompany();

    $builder->add('department', 'entity', array(
        'class' => 'YourSpecialBundle:Department',
        'property' => 'name',
        'query_builder' => function(EntityRepository $er) use($company) {
             return $er->createQueryBuilder('r')
                     ->where('r.company = :company AND r.active = :active')
                     ->setParameter(array(
                            "company" => $company,
                            "active" => true
                     ));
         }
    )); 
```

# xml - 忽略 html 标签的 CDATA 不起作用

> ID：12738664
> 
> 赞同：1
> 
> 时间：2012-10-05T02:23:40.267
> 
> 标签：xml, parsing, cdata

嗨，我正在将消息传递给 XML 中的属性。xml 是'emailBodyXML'，我想接收消息的属性是'body'。我传递的消息包含在变量“emailBody”中。

我有这个代码：

```
emailBodyXML.selectSingleNode("//email").setAttribute("body", "<![CDATA[" + emailBody + "]]>"); 
```

我将 cdata 放入其中是因为我希望它忽略 emailBody 可能包含的 html 标签。但是当我调试它时， html 标签被转换为`&lt;`or `&gt;`。我不喜欢它被转换成那样。我希望它仍然显示“<”和“>”。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:56:26.297

你不能有`<`一个属性值，所以你的`<![CDATA[`... 是无效的。`<`如果不使用实体 for （以及引号、& 符号等），您将无法将标记放在属性值中。你最好的选择是`CDATA`在一个元素中使用。

[http://www.w3.org/TR/2008/REC-xml-20081126/#attdecls](http://www.w3.org/TR/2008/REC-xml-20081126/#attdecls)

例子：

```
<body><![CDATA[<p>HTML MARKUP GOES HERE.</p>]]></body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T14:32:42.473

现在这对于 HTML 来说已经*过时了。*[https://developer.mozilla.org/en-US/docs/Web/API/CDATASection#Specifications](https://developer.mozilla.org/en-US/docs/Web/API/CDATASection#Specifications)说：

> 请注意，不应在 HTML 中使用 CDATA 部分；它们仅适用于 XML。

也可以看看

# javascript - 通过 jquery 添加另一个背景图像

> ID：12738668
> 
> 赞同：0
> 
> 时间：2012-10-05T02:23:53.167
> 
> 标签：javascript, jquery, css, background

我想在我的 div 元素中添加另一个背景图像，但是我不想简单地覆盖现有的，我想有多个背景，所以它应该在第一个下面添加新的背景 url。

这是原始 CSS 的样子..

```
#cover-art {
    background:
        url('http://beta.mysite.net/img/banner1.png') top left no-repeat,
    padding:250px 0 0;
} 
```

我想通过 jquery 做的是在第一个下面添加另一个图像 url 行，如下所示......

```
#cover-art {
    background:
        url('http://beta.mysite.net/img/banner1.png') top left no-repeat,
            url('http://beta.mysite.net/img/banner2.png') top left no-repeat,
    padding:250px 0 0; 
```

}

另外需要注意的是#cover-art css 在外部样式表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:56:11.170

干得好。请记住，这不适用于许多超过几年的浏览器：

```
var _oCurr = jQuery('#cover-art');
var _sBg = _oCurr.css('background-image');
_oCurr.css('background-image', _sBg + ', url(/img/banner2.png)'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:26:57.953

试试这个：

```
var $el = $('#cover-art');
var bg = $el.css('background-image'); // old image
$el.css('background-image', bg +','+ 'img/banner2.png'); // add new image 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:44:09.913

~~最后我检查了一下，一个元素上不能有两个背景图像。~~
CSS3 允许您这样做，但它不适用于某些浏览器。 [这是兼容性图表](http://caniuse.com/#feat=multibackgrounds)。

我建议您在其中创建另一个元素`#cover-art`，并将相同的 CSS 应用于其子元素，但背景图像除外。

所以例如

```
<div id="covert-art">
    <div id="child"></div>
</div> 
```

`#child'`s 背景图像将在父级 ( `#cover-art`)上方

以[这个小提琴](http://jsfiddle.net/Gavjw/)为例。

# c - ISR和多线程程序中的C'Volatile'关键字？

> ID：12738672
> 
> 赞同：10
> 
> 时间：2012-10-05T02:24:56.530
> 
> 标签：c, multithreading, embedded

我读到了 C`volatile`关键字在内存映射硬件寄存器、ISR 和多线程程序中的用法。

1) 注册

```
uint8_t volatile * pReg;
while (*pReg == 0) { // do sth } // pReg point to status register 
```

2) ISR

```
int volatile flag = 0;
int main() 
{
    while(!flag) { // do sth }
}
interrupt void rx_isr(void)
{
    //change flag
} 
```

3) 多线程

```
int volatile var = 0;
int task1()
{
    while (var == 0) { // do sth }
}
int task2()
{
    var++;
} 
```

我可以看到为什么编译器会错误地优化`while`情况 1）如果`volatile`不存在，因为变量更改是由*硬件进行的，编译器可能看不到**代码*对变量的任何更改。

**但是对于案例 2) 和 3)，为什么需要 volatile 呢？**在这两种情况下，变量都被声明为*global*，编译器可以看到它在多个地方使用。`while`那么，如果变量不是，为什么编译器会优化循环`volatile`呢？

是因为编译器的设计不知道“异步调用”（在 ISR 的情况下）还是多线程？但这不可能，对吧？

此外，case 3) 看起来像一个没有`volatile`关键字的多线程中的普通程序。假设我为全局变量添加了一些锁定（无`volatile`关键字）：

```
int var = 0;
int task1()
{
    lock();   // some mutex
    while (var == 0) { do sth }
    release()
}
int task2()
{
    lock();
    var++;
    release();
} 
```

对我来说这看起来很正常。那么我真的需要`volatile`多线程吗？**为什么我以前从未见过`volatile`将限定符添加到变量以避免多线程程序中的优化**？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T05:09:58.293

使用`volatile`关键字的主要目的是防止编译器生成使用 CPU 寄存器作为表示变量的更快方式的代码。这会强制编译的代码**在每次访问**变量时访问 RAM 中的确切内存位置，以获取它的最新值，该值可能已被另一个实体更改。通过添加`volatile`，我们确保我们的代码知道其他任何人（如硬件或 ISR）对变量所做的任何更改，并且不会发生一致性问题。

在没有`volatile`关键字的情况下，编译器尝试通过将变量的内容从 RAM 读取到 CPU 寄存器**一次**并在循环或函数中使用该缓存值来生成更快的代码。访问 RAM 可能比访问 CPU 寄存器慢几十倍。

我有过第 1 项和第 2 项的经验，但我认为您不需要像`volatile`在多线程环境中那样定义变量。添加锁定/解锁机制是解决同步问题所必需的，与内容无关`volatile`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T14:52:31.097

> 是因为编译器的设计不知道“异步调用”（在 ISR 的情况下）还是多线程？但这不可能，对吧？

是的，就是这样。

在 C 中，编译器没有并发的概念，因此允许重新排序和缓存内存访问，只要来自单个线程的视图无法注意到差异。

这就是为什么您需要 volatile （阻止对变量进行这种优化）、内存屏障（在程序的单个点为所有变量阻止它）或其他形式的同步，例如锁定（通常充当内存屏障）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T02:34:15.807

编译器确实允许除非满足某些特定条件，否则没有其他任何*东西会更改您的变量。*其中之一是可变访问；其他是某些编译器障碍。

您可能想到的编写多线程代码的天真方法确实容易出错，并且会被视为未定义的行为。如果你有正确的多线程代码，那么优化仍然是合法的（比如在你的 final`task1`中，循环仍然是 UB 并且可能被抛出），或者同步原语*将*包含必要的障碍（通常在一些原子的胆量中）变量）。

总结一下，这里是多线程示例的更正版本：

```
 for (;;)
 {
     lock();
     if (var != 0) { unlock(); break; }
     unlock();
 } 
```

该`unlock()`函数的实现引入了一个编译器屏障，它确保循环不能被优化掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:43:41.590

您可以通过使用屏障自由地避免多线程软件中的易失性变量。您可以在 linux 内核源代码中找到许多示例。还使用障碍而不是 volatile 允许编译器生成更高效的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-23T08:43:32.267

至于情况2），

我在您的问题中多次编写了与案例2）相同的代码，并且没有遇到任何问题。我认为这是因为现代编译器可以处理这种情况。比如说，编译器可以“看到”我在“rx_isr”中更改了“flag”，并且没有添加任何优化。但是，由于以下原因，这是不安全的：

1）您的编译器的优化级别，可能会影响以下原因 3）

2）调用你的isr的方法，可能是一个函数指针不在编译器的视图中

3) 编译器实现，不同的编译器可能对“see flag changed in isr”有不同的定义

...

所以，为了最大程度的安全和便携，只要加上“volatile”就行了。

# visual-studio-2010 - Flex 和 Visual Studio 开发环境

> ID：12738674
> 
> 赞同：0
> 
> 时间：2012-10-05T02:24:57.593
> 
> 标签：visual-studio-2010, apache-flex, flexbuilder

我的开发团队需要将 Adob​​e Flex（图表动画）添加到他们的 .NET 4 MVC 2 (Visual Studio 2010) 应用程序中，我正在尝试为此制定实际的开发环境要求。我的主要问题是关于 Adob​​e Flex/Flash Builder？

如果我错了，请纠正我，但这是我认为我们需要的：

*   所有 MSFT 开发工具 (Visual Studio 2010 SP1)
*   弹性 SDK
*   用于 Visual Studio 和 Flex IDE 集成的[Ensemble Tofino](http://www.adobe.com/devnet/flex/articles/flex_tofino_visualstudio.html)
*   Adobe Flex/Flash 生成器？（我需要这个吗？）

其他人可以看到我可能遗漏的任何东西吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:12:09.710

好的，在常见问题解答中找到了答案

我可以免费构建和部署 Flex 应用程序吗？是的。没有与 Flex 相关的部署许可费用。仅使用免费的 Flex SDK，您就可以免费构建和部署 Flex 应用程序。为了获得更高效的开发体验，您可能还想使用 Flash Builder 4.6，它的起价为 249 美元。您可以免费试用 Flash Builder 4.6 Premium 60 天。使用开源 BlazeDS，您可以利用高速二进制数据传输和实时数据推送。

# wso2 - 我在 WSO2 BAM 中看不到 AS 统计信息

> ID：12738675
> 
> 赞同：-2
> 
> 时间：2012-10-05T02:25:08.170
> 
> 标签：wso2, wso2bam

我使用以下说明配置 AS 5.0.0：- [http://docs.wso2.org/wiki/display/BAM200/Setting+up+Service+Statistics+Data+Agent](http://docs.wso2.org/wiki/display/BAM200/Setting+up+Service+Statistics+Data+Agent)和 BAM 使用：[http://docs。 wso2.org/wiki/display/BAM200/Service+Statistics+Toolbox](http://docs.wso2.org/wiki/display/BAM200/Service+Statistics+Toolbox)

当我在 AS 中调用服务 Helloworld 时，我使用资源管理器看到了 cassandra 集群内的数据，但在仪表板中我只能看到任何信息：

没有可用数据。请访问我们的文档以了解如何配置 AS 监控

为什么我可以看到 cassandra 中的数据，但 Dashboard 看不到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:26:51.040

也许在 hive 分析运行期间发生了一些事情，导致汇总数据没有正确写入 H2 数据库？脚本执行过程中是否有任何错误？如果您已将摘要数据库更改为 MySQL，则需要将存储库位置中的 master-datasources.xml 更改为您的 MySQL 数据库，以便小工具从该数据库中获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:55:30.923

如果您在 AS 端更改了流名称，请将 hive 脚本中的“cassandra.cf.name”更改为相同的值。因为在 BAM 端，我们将数据保存在名称与您的流名称相同的 CF 中。

# windows-8 - 如何在 HTML5/JS Metro 应用程序中复制 VariableSizedWrapGrid XAML 控件？

> ID：12738676
> 
> 赞同：0
> 
> 时间：2012-10-05T02:25:25.770
> 
> 标签：windows-8, microsoft-metro

有一个称为 VariableSizedWrapGrid 的 XAML 控件，它在其中整齐地排列不同大小的项目。

“提供了一个网格样式的布局面板，其中每个图块/单元格可以根据内容变化大小”

不幸的是，这个控件在 WinJS 中不可用，只有 XAML，但我想复制它。关于如何在 HTML5/JS Metro 应用程序中最好地复制它的任何想法？

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh969155](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh969155)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:18:19.290

WinJS.UI.ListView 控件支持“可变大小”项，但它相当复杂（详情见文末[）](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781224.aspx)。

但是，在更基本的布局级别，您可以尝试使用弹性框。我不认为它与布局完全一样，但它应该能让你接近。不同模式的详细信息在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh673531.aspx)，一个很好的动手操作在[这里](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_flex.htm)（在 IE 中查看）

# regex - 在 pnotepad 中使用正则表达式替换下划线替换空格

> ID：12738677
> 
> 赞同：0
> 
> 时间：2012-10-05T02:25:39.930
> 
> 标签：regex, replace, programmers-notepad

在 pnotepad 中，它具有正则表达式替换功能。

我想要做的是用下划线替换 POST 变量中的所有空格。

例如，假设我有一个名为`$_POST['Apples And Pears']`.

我正在尝试找出正则表达式替换以将其转换为`$_POST['Apples_And_Pears']`.

任何帮助都会很棒，我知道如何使用所有空格来执行此操作，但不知道仅在 POST 变量中的空格。

我需要这个，因为我需要执行此操作的 PHP 文件中有很多 POST 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:09:43.953

我不确定 pnotepad 的语法，但[粗略一看](http://pnotepad.org/docs/search/regular_expressions)，它看起来 pnotepad 遵守 PCRE，所以替换它：

```
((?<=\$_POST\[[^[]*) ) 
```

有了这个：

```
_ 
```

（我添加了一组不必要的括号，只是为了显示末尾的空格。）

这使用了一个肯定的后向断言来表示，“如果我是一个空格字符并且在我后面是一串以 开头的非`[`字符`$_POST[`，那么替换我。”

如果这不起作用，问题可能是，像许多引擎一样，pnotepad 不支持任意长度的后向断言。在这种情况下，您必须替换它：

```
(?:(\$_POST\[[^[]*) ) 
```

有了这个：

```
$1 
```

并手动不断更换，直到无法更换为止。

# javascript - 使用 Ember.js，处理键盘事件的一些常见模式是什么？

> ID：12738679
> 
> 赞同：0
> 
> 时间：2012-10-05T02:26:04.927
> 
> 标签：javascript, model-view-controller, web-applications, ember.js, design-patterns

我正在尝试做的事情：

想象在浏览器中有一个 div 数组，这些 div 会根据用户请求进行实例化或删除。当按下左箭头或右箭头键时，div 应该向左或向右移动。

我目前（制作不佳）的解决方案：

事件处理和委托：

```
function onDocumentKeyDown( event ){
     switch ( event.keyCode ){
            case 37: App.objectsView.scrollLeft(); break;
            case 39: App.objectsView.scrollRight(); break;
     }
}

// add event listener to document
function addEventListeners() {
    document.addEventListener( 'keydown', onDocumentKeyDown, false );
}
addEventListeners(); 
```

应用程序容器视图：

```
App.objectsView = Ember.ContainerView.create({

    childViews: [],

    // CRUD stuff
    createView: function(){ ... },

    deleteView: function(){ ... }, 

    updateView: function(){ ... },

    // navigation stuff
    scrollRight: function(){
        this.scroll('right')
    },

    scrollLeft: function(){
        this.scroll('left')
    },

    scroll: function( direction ){
        this.get('childViews').forEach( function( key ){
            var object = key;
            object.move( direction );
        }, this)
    },

}); 
```

应用程序视图类（为了完整性，并不那么相关）：

```
App.ObjectView = Ember.View.extend( Animation, {

    ...

    move: function( param ){ ... }

}); 
```

*注意，大多数 dom 选择和更改 css 属性逻辑是通过 Animation mixin 引入到视图中的。

如您所见，我真的不喜欢这种实现，因为：

1.  每个键事件都绑定到容器视图中的特定函数，如果我希望键 37 在某些上下文中做一件事而在另一个上下文中做其他事情（例如鼠标箭头所在的位置）怎么办？

2.  onDocumentKeyDown 函数被添加到文档中，我不能确切地说出原因，但它看起来对我来说很刺耳。

3.  ObjectsView 具有管理实例化*和*事件委托的逻辑。Ember 中的 containerView 是否甚至意味着处理导航逻辑？（我可以将它们分成两个不同的功能，但如果事件以相同的方式处理，那么它们似乎是道德上等价的解决方案）。

Ember 或任何 JS MV* 框架中是否有任何常用模式通过某种单实例中央集线器处理关键事件，然后根据应用程序状态传播到系统的其他部分？还有这个 Ember 路由器概念，它是否适合这里？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:42:23.500

为了使用 Ember 处理键盘事件，我们借鉴了 Flame.js 中的 EventManager 实现。也许你可以得到类似的灵感：[https ://github.com/flamejs/flame.js/blob/master/mixins/event_manager.js](https://github.com/flamejs/flame.js/blob/master/mixins/event_manager.js)

# xml - DTD 元素内容

> ID：12738683
> 
> 赞同：0
> 
> 时间：2012-10-05T02:26:22.037
> 
> 标签：xml, dtd

在 dtd 中，是否可以具有以下类型的元素：

```
<!ELEMENT name (EMPTY|CDATA)> 
```

这样我们就可以拥有这样的东西：

```
<name/> or <name>DFGHJKHGF</name> 
```

??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:32:50.680

与您的[其他问题](https://stackoverflow.com/questions/12736648/dtd-element-empty-and-any/12736830#12736830)类似，如果您将内容定义为`#PCDATA`元素仍然可以为空。

例子：

```
<!DOCTYPE doc [
<!ELEMENT doc (name+)>
<!ELEMENT name (#PCDATA)>
]>
<doc>
    <name/>
    <name>DFGHJKHGF</name>
</doc> 
```

查看规范以获取更多信息：[http ://www.w3.org/TR/2008/REC-xml-20081126/#elemdecls](http://www.w3.org/TR/2008/REC-xml-20081126/#elemdecls)

# c# - Windows 8 本地存储

> ID：12738685
> 
> 赞同：2
> 
> 时间：2012-10-05T02:26:54.717
> 
> 标签：c#, windows-8, microsoft-metro, data-storage

我进行了很多搜索，但没有找到关于 Windows 8 Metro 应用程序本地存储的任何内容。有谁知道创建具有基本`save()`和`load()`功能的本地存储数据库的任何简单方法？
我需要的只是将一些绑定`XAML`到一些数据（标题、描述等）。在使用隔离存储系统之前，我已经制作了 windows phone 7 应用程序，但显然它与 windows 8 不同......文档也没有太大帮助>。<任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T02:44:30.150

您有一系列可用的选项，并且您应该查看一些代码示例 - 特别是 Windows 开发中心的应用[程序](http://dev.windows.com)[数据示例](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)

您可以使用应用程序文件存储、本地数据（存储在设备上的字典）、漫游数据（存储在云中的字典）——所有这些都可以通过[Windows.Storage.ApplicationData.Current](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.current.aspx)访问。例如，

```
Windows.Storage.ApplicationData.Current.LocalSettings.Values["FirstName"] = "Joe" 
```

除此之外，您还可以引入 SQLite 用于进程内管理的关系类型存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:38:07.320

粗略检查一下，Lex.Db 似乎相当不错。我刚刚在一个 win rt 项目中对其进行了测试。它在 nuget 上可用。 [https://github.com/demigor/lex.db](https://github.com/demigor/lex.db)

# elasticsearch - 将现有的 ElasticSearch 索引重新索引到更新的模板

> ID：12738689
> 
> 赞同：2
> 
> 时间：2012-10-05T02:27:50.260
> 
> 标签：elasticsearch

有没有办法使现有索引或一组索引重新索引以匹配最新版本的匹配模板？通过重新索引，我的意思是更改它们的映射和设置以匹配模板中的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T05:59:41.143

恕我直言，你不能轻易做到。也就是说，有一个功能请求可以在将来提供帮助，但前提是您没有禁用 _source。

[https://github.com/elasticsearch/elasticsearch/issues/1077](https://github.com/elasticsearch/elasticsearch/issues/1077)

与此同时，您可以做的是使用脚本扫描和滚动您的索引并在另一个索引中重新索引它。

高温高压

# java - 如何在 Java 中编写原子函数？

> ID：12738691
> 
> 赞同：0
> 
> 时间：2012-10-05T02:28:12.953
> 
> 标签：java, multithreading, threadpool, atomic

我正在用 Java 编程。我有一个作业池 ( `BlockingQueue`)，一些线程会监视这个池。当有一个新工作时，线程会尝试接受这个工作。该作业执行一些任务，因此我不希望操作系统在该作业尚未完成时为其他线程占用 CPU。这意味着我希望我的工作是一项原子工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:36:40.370

我不认为这是可能的。您不能从 Java 代码更改操作系统级别的 CPU 调度。你能做的最好的事情就是给你的线程高优先级。但是退一步。通过使其成为 ATOMIC 你想要什么？Java 提供同步以确保当一个线程在其中时另一个线程不会进入某个代码块。

# haskell - 阴谋集团不可挽回地破裂；接下来我可以尝试什么？

> ID：12738695
> 
> 赞同：3
> 
> 时间：2012-10-05T02:29:01.283
> 
> 标签：haskell, cabal

我既不能使用 cabal 安装或更新软件包，事实上，我收到 Cabal '无法使用'的消息。我被困在 Cabal-1.10。

所以，我有了手动安装一些软件包的想法。

首先我尝试了“目录”：但不，这需要 Distribution.Simple 被报告为“缺失”。

该问题可以通过手动安装新版本的 Cabal 来解决：1.16.0.1。

但是不，那失败了，因为它找不到“目录”。

因此，要安装“目录”，我必须有 Cabal；要安装 Cabal，我必须有“目录”。

这是递归，但不是我们想要的方式！

除了完全卸载和重新安装 Haskell 平台之外，还有其他解决这种循环依赖的选项吗？

（顺便说一下，我正在运行 Windows 7）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T02:43:23.677

如果您一直在本地安装所有内容（推荐的方式），只需核对 GHC 目录即可。我不知道这是在 Windows 上的什么位置，但在 *nix 中它是`~/.ghc`，如果这给出了提示。如果您一直在全局安装软件包，那么可以，重新安装平台（或只是 GHC）。

将来，如果您不让 cabal（重新）安装[此列表](http://www.haskell.org/ghc/docs/latest/html/libraries/index.html)中的任何软件包，您将拥有更好的时光。您可能会考虑升级`cabal-install`，因为较新的版本对重新安装要保守得多。

# ruby-on-rails - 基于载波直接的记录值的上传路径

> ID：12738700
> 
> 赞同：2
> 
> 时间：2012-10-05T02:30:12.923
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, gem, carrierwave

我想为 Carrier wave Direct 配置上传路径，我用它来将文件直接上传到 Amazon s3。在 app/uploaders/myuploader.rb 中，我有，

```
def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end 
```

我想修改它，使路径看起来像
“uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{User.name}”。
所以它会像
“uploads/Users/avatar/michael_jordan/..”这样的东西，
其中 User 是安装上传器的模型。

我已经在 github ( [https://github.com/dwilkie/carrierwave_direct](https://github.com/dwilkie/carrierwave_direct) ) 中浏览了 Carrier wave Gem 的源代码，但我不知道如何将值从活动模型对象传递给上传者以创建上传路径（亚马逊 s3 的密钥）。有没有办法做到这一点？

谢谢！
龙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:24:44.257

好的。一个月后我被迫解决同样的问题，这次我解决了。在这里发布我的解决方案，以便它可以帮助遇到同样问题的其他人，1）覆盖 store_dir 使其返回一个空字符串，

```
def store_dir
 ""
end 
```

2）到达您的控制器并将您的首选键分配给您的上传器对象的“键”属性，例如，

```
 @uploader = @player.avatar 
  @uploader.key =@player.name +"/\${filename}"
  #say if player name in is jordan and the filename is jordan.jpg.
  #the uplaod path  now will be   
  #http://bucketname/jordan/jordan.jpg. 
```

这里 player 是模型对象，avatar 是安装上传器的属性，键将设置为播放器名/文件名。

这就是我要找的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:19:39.237

如果`model.name`不起作用，您可以尝试使用[#read_attribute](http://apidock.com/rails/ActiveRecord/Base/read_attribute)方法直接访问名称字段

所以你的 store_dir 方法看起来像

```
def store_dir
  uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.send(:name)}
end 
```

但我相信`model.name`应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T04:41:14.303

第一个提供的解决方案对我不起作用。经过一整天的故障排除后，我检查了动态创建密钥的代码：

[https://github.com/dwilkie/carrierwave_direct/blob/master/lib/carrierwave_direct/uploader.rb](https://github.com/dwilkie/carrierwave_direct/blob/master/lib/carrierwave_direct/uploader.rb)

```
# as defined in carrierwave_direct/uploader.rb
def key
  return @key if @key.present?
  if present?
    self.key = URI.parse(URI.encode(url, " []+()")).path[1 .. -1] # explicitly set key
  else
    @key = "#{store_dir}/#{guid}/#{FILENAME_WILDCARD}"
  end
  @key
end 
```

嘘。我没有尝试覆盖此方法，而是直接在上传器中覆盖了 store_dir 和 guid 方法：

```
def store_dir
  "#{model.group.id}/photos"
end

def guid
  Time.now.utc.strftime("%Y-%m-%d-%H%M%S")
end 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-07-26T21:06:52.367

[https://github.com/gilcierweb/CMS-Rails](https://github.com/gilcierweb/CMS-Rails)

```
# app/uploads/galeria_imagem_uploader.rb
class GaleriaImagemUploader < CarrierWave::Uploader::Base
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}#{model.galeria_id}"
  end
end

# app/models/adm/galeria_imagem.rb    
class Adm::GaleriasImagem < ActiveRecord::Base
  belongs_to  :galeria, :polymorphic => true
  validates   :galeria, presence: true
  # GaleriasImagem uploader using carrierwave
  mount_uploader :imagem, GaleriaImagemUploader
end

# app/models/adm/galeria.rb   
class Adm::Galeria < ActiveRecord::Base
  has_many    :galerias_imagens, :inverse_of => :galeria, :dependent => :destroy
  # enable nested attributes for galerias_imagens through galeria class
  accepts_nested_attributes_for :galerias_imagens, allow_destroy: true
end

# app/controllers/adm/galerias_controller.rb 
class Adm::GaleriasController < ApplicationController
  def create
    @adm_galeria = Adm::Galeria.new(adm_galeria_params)
    respond_to do |format|
      if @adm_galeria.save       
        # to handle multiple images upload on create
        if params[:adm_galeria][:imagem]
        params[:adm_galeria][:imagem].each { |image|
          @adm_galeria.galerias_imagens.create(imagem: image)}
        end
        format.html { redirect_to @adm_galeria, notice: 'Galeria was successfully created.' }
        format.json { render :show, status: :created, location: @adm_galeria }
      else
        format.html { render :new }
        format.json { render json: @adm_galeria.errors, status: :unprocessable_entity }
      end
    end
  end
end

# app/controllers/adm/galerias_imagens_controller.rb
class Adm::GaleriasImagensController < ApplicationController
  def create
    @adm_galerias_imagem = Adm::GaleriasImagem.new(adm_galerias_imagem_params)
    @adm_galerias_imagem.save
  end
end 
```

# php - Shell_exec 锁定浏览器

> ID：12738701
> 
> 赞同：0
> 
> 时间：2012-10-05T02:30:22.050
> 
> 标签：php, shell-exec

我在 XAMPP 环境中的 Windows 机器上运行 PHP。我使用 AJAX 请求将电影从 MP4 转换为 OGG

```
function convertMovie(movieName) {
    $.ajax({
       url: 'movieManagement.php?queryType=convertMovie&value='+movieName,
       async: true
    });
} 
```

对于 PHP 代码

```
function convertMovie($value) {
    $command = "psexec -d php ".getcwd()."\\movieConverter.php ".$value." > nul 2<&1";
    shell_exec($command);
} 
```

在电影转换器中，代码类似于

```
//some more code here
if ($fileExtension === 'mp4' || $fileExtension === 'MP4') {
            $newFileName = $serverAddress . $tempFileName . "ogg";
            $executeCommand = 'psexec -d '.getcwd() . '\\ffmpeg -i "' . $oldFileName . '" "' . $newFileName . '" > '.$serverAddress.'nul 2>$1';
        }
        shell_exec($executeCommand); 
```

现在我的问题是每次我破坏这个浏览器时都会像永远一样等待 ajax 调用返回，但是，如果我在命令 shell 中单独运行这些命令，它们就可以正常工作。我只希望电影转换在后台工作并且浏览器保持免费

我知道这个问题至少被问了 1000 次，但我找不到具体的答案。对不起我的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:38:37.763

您可以在后台运行该进程（无论如何在 Linux 上），方法是使用以下命令结束它`&`：

```
shell_exec($command . ' &'); 
```

# web-applications - 将 Web 应用程序的 war 文件分解为不同的组件

> ID：12738704
> 
> 赞同：0
> 
> 时间：2012-10-05T02:30:47.123
> 
> 标签：web-applications, architecture, war

如何将一个巨大的战争文件拆分成多个组件（多个战争文件）。有没有这方面的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:33:38.053

巨大有多大？为什么这成为你的问题？

那么这些部分将是单独的服务吗？

只有一种方法：拿一把铲子开始挖掘。

*为什么*战争如此巨大？WEB-INF/lib 中有很多 JAR 吗？您将遇到的问题是依赖关系。如果每个单独的 WAR 都需要所有 JAR，那么您将拥有许多巨大的 WAR 而不是一个，因为您必须复制 JAR。

如果 WEB-INF/classes 文件夹中的 .class 文件相互依赖，您将无法将它们分开。

# jquery - jQuery延迟加载：图像延迟加载后调用Javascript函数

> ID：12738706
> 
> 赞同：2
> 
> 时间：2012-10-05T02:31:05.000
> 
> 标签：jquery, image, lazy-loading

我正在使用 Mika Tuupola 的 jQuery 延迟加载。

每次延迟加载图像后是否可以调用函数。

我打算做的是跟踪图像被查看的次数。因此，如果图像是延迟加载的，则意味着用户已经看到了图像，我将通过在后台执行 HTTP GET 将数据库上的计数器增加 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:46:15.070

查看源码，发现了两个未记录的回调选项：`appear`在加载图片之前`load`调用，在图片加载之后调用。参数是图像元素、卸载图像的数量和选项对象。

# html - CSS背景图像对齐问题

> ID：12738710
> 
> 赞同：0
> 
> 时间：2012-10-05T02:32:00.807
> 
> 标签：html, css, image, background

我的背景图像不会在此代码中的 div 之间对齐 - 我尝试清除它们无济于事。任何人都知道是什么原因造成的，或者我怎样才能让它工作？为方便起见，html 中的 CSS。

```
<div class="header" style="height:200px; background-image: url(bg.png); margin:-8px;">
<img src="logo.png" style="margin-left:auto; margin-right:auto;" />
</div>

<div style="text-align:center;">
    <div style="background-image: url(bg.png);background-position:center;  
display:inline-block; width:90px; border-bottom-left-radius: 20px;">Div 1</div>
    <div style="background-image: url(bg.png);background-position:center;  
display:inline-block; width:400px;margin:-4px;">Div 2</div>
    <div style="background-image: url(bg.png);background-position:center;  
display:inline-block; width:90px;border-bottom-right-radius: 20px;">Div 3</div>
</div> 
```

这是一个小提琴：http: [//jsfiddle.net/FphKk/](http://jsfiddle.net/FphKk/)

图片：http: [//i.imgur.com/YLVpI.png](http://i.imgur.com/YLVpI.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:10:13.153

您的边距正在移动 div，因此它们的背景会导致条纹错位：

没有边距：[小提琴在这里](http://jsfiddle.net/NotInUse/FphKk/3/)

除了创建具有设定宽度的容器 div 之外，还添加了内联块并删除了边距 - 否则条纹会根据窗口宽度不对齐。

[在这里提琴](http://jsfiddle.net/NotInUse/FphKk/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:42:01.337

我看不到任何背景图片，但据我所知， 2nd`<div>`不会在 1st 和 3rd 之间对齐`<div>`，因为您使用`display:inline-block;`的是`display:inline;`.

[http://jsfiddle.net/bcnobel/FphKk/1/](http://jsfiddle.net/bcnobel/FphKk/1/)

老实说，我不知道这对您的背景图片的位置有什么影响，因为您没有为图片设置完整的网址。
我会在您更改网址后立即进行调查。

# c++ - cuda 内存分配 cudaMalloc

> ID：12738711
> 
> 赞同：1
> 
> 时间：2012-10-05T02:32:01.620
> 
> 标签：c++, c, cuda

我有一个非常简单的问题，但我不明白。我正在使用 4.2 cuda。

我有以下代码：

在我的 cudaClass.h 中：

```
unsigned char *dev_trimapExpanded; 
```

在我的 cudaClass.cpp 中：

```
void cudaClass::expansionTrimap() {
    printf("dev_trimapExpanded %d before function \n", dev_trimapExpanded);
    //Call cuda function
    cudaError_t cudaStatus = expansionTrimapCuda(dev_trimapExpanded, width, height);
    if (cudaStatus != cudaSuccess) {
        fprintf(stderr, "expansionTrimapCuda failed!\n");
    }

    printf("dev_trimapExpanded %d after function \n", dev_trimapExpanded);
} 
```

在我的文件 kernel.cu 我有：

```
cudaError_t expansionTrimapCuda(unsigned char *dev_trimapExpanded, size_t width, size_t height)
{
    size_t size = width*height;

    cudaError_t cudaStatus;

    // Choose which GPU to run on, change this on a multi-GPU system.
    cudaStatus = cudaSetDevice(0);
    if (cudaStatus != cudaSuccess) {
        fprintf(stderr, "cudaSetDevice failed!  Do you have a CUDA-capable GPU installed?");
        return cudaStatus;
    }

    printf("dev_trimapExpanded %d before cudaMalloc \n", dev_trimapExpanded);
    cudaStatus = cudaMalloc((void**)&dev_trimapExpanded, size);
    if (cudaStatus != cudaSuccess) {
        fprintf(stderr, "cudaMalloc dev_trimapExpanded failed!");
        return cudaStatus;
    }
    printf("dev_trimapExpanded %d after cudaMalloc \n", dev_trimapExpanded);

    return cudaStatus;
} 
```

输出是：

```
dev_trimapExpanded 0 before function
dev_trimapExpanded 0 before cudaMalloc
dev_trimapExpanded 93323264 after cudaMalloc
dev_trimapExpanded 0 after function 
```

在 cudaMalloc 调用之前，我的指针的地址是 0，这是正常的，但我不明白为什么函数之后的地址是 0。指针 dev_trimapExpanded 的地址不应更改。cudaMalloc 的范围仅在函数中吗？内存也不是免费的。如何在不同的内核调用之间跟踪我的全局内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:51:21.977

行为是绝对正确的，您的问题是，您正在“按值”传递指针，而不是在调用函数时“按引用”传递。所以现在发生的事情是，当函数被调用时，你的指针被复制了，副本的值在函数内部发生了变化，但是当函数完成时，旧指针根本不受影响（因为所有的变化只发生在副本）。

为你的函数头试试这个：

```
cudaError_t expansionTrimapCuda(unsigned char *& dev_trimapExpanded, ... ) 
```

另请参阅：[指针的指针/指针的引用](http://www.codeguru.com/cpp/cpp/cpp_mfc/pointers/article.php/c4089/PointertoPointer-and-ReferencetoPointer.htm)

# sql - 在 Excel vba 中更新 ActiveX 按钮上的标题

> ID：12738712
> 
> 赞同：0
> 
> 时间：2012-10-05T02:32:13.243
> 
> 标签：sql, excel, button, activex, caption

我正在尝试更新 Excel 电子表格上 ActiveX 控件按钮的标题，以注意与单击事件关联的代码正在运行。该代码从 azure 数据库中提取数据，因此按下按钮会在 5-10 秒延迟的任何地方触发。

我的原始代码有一个基本上看起来像这样的子代码：

```
Sub GetInfofromDB()
  btnUpdate.Caption = "Updating...."
  <<code to get data from azure db>>
  btnUpdate.Caption = "Update List" 'reverts button to standard text
End Sub 
```

但是按钮标题永远不会改变。组合框更新有效。

我将标题更新分成自己的子项，然后在按下按钮时按顺序调用每个子项并获得相同的行为，没有按钮更新。

如果我用标题更新调用 sub 而没有调用数据更新，则按钮更新成功。

因此，每个部分都是独立工作的，但不是在它们连续发生时。想法如何让我的按钮在数据调用之前更新？

谢谢。标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:46:37.970

更改标题后尝试添加 aaplication.screenupdating = true 。

下面的代码对我有用。使用 DoEvents

```
Private Sub CommandButton1_Click()
CommandButton1.Caption = "true"
DoEvents
Application.ScreenUpdating = True

For i = 1 To 2
    Application.Wait (Now + TimeValue("0:00:1"))
Next i

CommandButton1.Caption = "False"
End Sub 
```

# javascript - Javascript Date getSeconds 返回 0

> ID：12738715
> 
> 赞同：0
> 
> 时间：2012-10-05T02:32:31.940
> 
> 标签：javascript, date, time, milliseconds, seconds

以下：

```
var a = new Date(2012,1,1);
alert(a);
alert(a.getSeconds());
a = new Date(a.getTime() + (180 * 1000)); // adds 3 seconds.
alert(a);
alert(a.getSeconds());​ 
```

结果是 ：

> 2012 年 2 月 1 日星期三00:00:00 GMT-0200 (Horário brasileiro de verão) 0 2012 年 2 月 1 日星期三**00:03:00 GMT-0200 (** **Horário** brasileiro de verão) **0**

 ****我的 3 秒在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:35:35.003

你增加了 3 分钟，而不是 3 秒。

改变

```
a = new Date(a.getTime() + (180 * 1000)); // adds 3 seconds. 
```

至

```
a = new Date(a.getTime() + (3 * 1000)); // adds 3 seconds. 
```****

# iphone - 如何处理这个 NSString？

> ID：12738718
> 
> 赞同：0
> 
> 时间：2012-10-05T02:32:58.717
> 
> 标签：iphone, objective-c, ios

我从 API 读取数据并看到以下字符串：`text = "\n\Ufeff211419";`

怎样才能处理它有结果：`211419`？我使用`trim`了 of 的功能`NSString`，但它不起作用。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:42:22.293

试试这个，

```
NSString *strippedString=@"";
    NSString *originalString = @"1This is my string.#/hfg34y387t59hguhfytfrg64r34nfr31234";
    for (int i=0; i<[originalString length]; i++) {
        if (isdigit([originalString characterAtIndex:i])) {
            strippedString=[NSString stringWithFormat:@"%@%c",strippedString,[originalString characterAtIndex:i]];

        }
    }
    NSLog(@"string is%@",strippedString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:35:25.253

`substringFromIndex`或者`substringToIndex`会有所帮助！

# c# - 为什么这个方法找不到这个 GridViewDataRow 的列？

> ID：12738720
> 
> 赞同：-1
> 
> 时间：2012-10-05T02:33:07.530
> 
> 标签：c#, gridview

我有一个试图转换为 DataTable 的 GridView。我不能为此 DataTable 使用 GridView 的 DataSource。我发现下面的方法是最常用的解决此任务的方法，但由于某种原因，下面的方法不断抛出“找不到第 0 列”的 IndexOutOfRangeException。这是代码：

> ```
>  DataSet ds = new DataSet("Student");
>     DataTable dt = new DataTable(String.Format("{0}For{1}", gv.ID.Substring(2, gv.ID.Length - 2), year));
>     for (int j = 0; j < gv.Rows.Count; j++)
>     {
>         DataRow dr;
>         GridViewRow row = gv.Rows[j];
>         dr = dt.NewRow();
>         for (int i = 0; i < row.Cells.Count; i++)
>         {
>             dr[i] = row.Cells[i].Text; //***EXCEPTION IS THROWN HERE***
>         }
>         dt.Rows.Add(dr);
>     }
>     ds.Tables.Add(dt); 
> ```

每行有 18 个单元格。

提前感谢您的帮助。

**解决方案** 我接受了 CptSupermrkt 的建议，并在第一个“for”循环之前实现了这段代码，并且该方法继续运行，没有抛出异常：

```
 DataColumn dc;
    foreach (var item in gv.Columns)
    {
        dc = new DataColumn(item.ToString());
        dt.Columns.Add(dc);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:43:38.637

您定义的 DataTable 也没有定义任何列，因此您从 dt.NewRow() 获得的行没有列。因此试图访问列的索引是行不通的。

我认为您需要创建的 DataTable 具有与 GridView 相同的列。

```
DataTable dt = new DataTable(String.Format("{0}For{1}", gv.ID.Substring(2, gv.ID.Length - 2), year));

DataColumn idCol = new DataColumn("ID");
DataColumn nameCol = new DataColumn("Name");
//etc.

dt.Columns.Add(idCol);
dt.Columns.Add(nameCol);
//etc. 
```

然后，当您在 DataTable 上创建 use NewRow() 时，该行将包含列，您可以在尝试在其余代码中进行操作时访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:39:16.803

看起来这是导致问题的 dr[i] 。新创建的 DataRow dr 没有第 0 列。

# asp.net-mvc - 编辑时可以允许 datetime num 吗？

> ID：12738726
> 
> 赞同：0
> 
> 时间：2012-10-05T02:34:43.050
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我遇到了一个问题。`datetime`那就是我在模型中用实体定义了一个属性并允许为空。像这样

```
class T_NAME 
[key] int key 
 Datetime F_DATE  
 string F_NAME 
```

我使用这个模型的默认视图来创建。我打算先添加此记录并稍后修改日期，但它显示该字段是必需的（我允许`null @database`）。

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:42:05.253

将您的财产更改为`nullable`

```
public class T_Name
{
  [Key]
  public int Key { set;get;}
  public DateTime? F_Date { set;get;}
  public string F_Name { set;get;}
} 
```

# ajax - jQuery mobile、AJAX、Mustache 未正确呈现

> ID：12738728
> 
> 赞同：1
> 
> 时间：2012-10-05T02:35:27.733
> 
> 标签：ajax, jquery-mobile, mustache

我正在使用 jQuery Mobile 通过 AJAX 发布到服务器。响应以 JSON 形式接收，我尝试使用 Mustache 模板显示该响应。一切正常，但 jQuery 没有正确呈现，例如，它没有将类、样式等添加到呈现的模板中。

加载模板并发布：

```
 $('#continueToHome').click(function() { // called on button click
        // call ajax, send no params, receive json
    $.post("http://localhost:3000/app_login.json", "", function(result){
        // load template
        var template = $('#personTpl').html();
        // render data into template
        var html = Mustache.to_html(template, result);
        // append to page
        $('#sampleArea').html(html);
    });
    // display page
     $.mobile.changePage( "#page-homepage", { transition: "slide"} );
    });` 
```

的HTML：

```
 <script id="personTpl" type="text/template">
       <h1>{{first_name}} {{last_name}}</h1>
       Email: {{email}} <br> 
       <h3>Smifrs</h3> 
       <ul data-role=listview>
       {{#usmifrs}}<li><a href=#>{{name}}</a></li>
       {{/usmifrs}}</ul>
    </script>
    <div id="sampleArea"></div> 
```

问题是它不能正确显示。当我有一个带有'data-role=listview'的常规'ul'元素时，jQuery会为'li'标签注入class='ui-listview'、div和样式，但是当我使用我的模板时它不会发生。

我想我应该以某种方式重新加载页面，但我找不到如何。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T03:15:46.883

只需触发节点上的“创建”事件。为我工作。

[http://andymatthews.net/read/2012/05/17/Dynamically-creating-jQuery-Mobile-radio-buttons-with-Mustache](http://andymatthews.net/read/2012/05/17/Dynamically-creating-jQuery-Mobile-radio-buttons-with-Mustache)

# javascript - 为什么在一个算为onmouseout的范围内移动？

> ID：12738737
> 
> 赞同：0
> 
> 时间：2012-10-05T02:36:47.500
> 
> 标签：javascript, html, mouseevent

我在这里创建了我的示例[http://jsfiddle.net/Dgc5y/](http://jsfiddle.net/Dgc5y/)

我只想做的是，当我将鼠标悬停在链接上时，会出现一个弹出窗口。然后我可以转到此弹出窗口以单击更多内容，如果我选择不这样做，它会在我搬出时自行关闭。

问题是，当我移过此弹出窗口中的链接时，它会触发 mouseout 并自行关闭。

我最终使用了一些 hacky 修复（如示例中所示）

我想知道正确的方法，请帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:42:23.690

一些浏览器将鼠标*下方*显示的内容处理为鼠标悬停。

（我有一个非常巧妙的东西，涉及一个想象图和一个小心放置的鼠标指针可以导致整个事情进入一个闪烁的循环。）

但是，我没有真正好的解决方案。我最终在 Javascript 中使用了信号量。当我的弹出窗口打开时，我设置了信号量，然后在`mouseover`其他元素的事件中，我检查信号量是否设置，如果是，我保释。

希望有人提供更好的解决方案——我可以使用它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:43:01.810

您正在使用 jQuery，因此您不妨跳过`on*`属性，开始编写[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。因此，请记住这一点，只需使用 jQuery[`mouseleave`](http://api.jquery.com/mouseleave/)事件而不是`mouseout`事件。

HTML：

```
<div>
    <a class="trigger" href="#" >This is what you want</a>
    <span class="tooltip" id="popup2" >
        <a href="#">ZOMG it works</a>
    </span>
</div> 
```

JavaScript

```
$('a.trigger').mouseenter(function () {
    $('#popup2').show();
});

$('span.tooltip').mouseleave(function () {
    $('#popup2').hide();
});​ 
```

[http://jsfiddle.net/mattball/UwmhX](http://jsfiddle.net/mattball/UwmhX)

更多阅读：[http ://www.quirksmode.org/js/events_mouse.html#mouseenter](http://www.quirksmode.org/js/events_mouse.html#mouseenter)

# java - 将多个文档合并为一个 PDF 文档

> ID：12738741
> 
> 赞同：0
> 
> 时间：2012-10-05T02:37:01.467
> 
> 标签：java, pdf, birt

我有一个要求，我必须将多个文档（Tiff、DOC、PDF、PNG、JPEG）合并到一个 PDF 文件中。知道如何使用 java 进行此合并（建议使用 API、jar、框架）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:40:23.507

您可以使用 XSL-FO 或 iText 在 Java 中创建 PDF。前者是 XML 转换解决方案；后者是内存中的 Java 库。

您可以使用 POI（我没有运气 - 糟糕的东西）或 docx4j 阅读 Word 文档。

你自己和其他人在一起。也许别人会比我知道的更多。

# css - 将 CSS 文本阴影应用于 IE 中的文本

> ID：12738745
> 
> 赞同：0
> 
> 时间：2012-10-05T02:37:16.920
> 
> 标签：css

我在 CSS 中使用了文本阴影来平滑字体，除了 IE 之外，它在几乎所有东西中看起来都很棒。CSS是：

```
#navigation li {
display: inline;
list-style: none;
display: block;
float: left;
width: 15em;
height: 2em;
text-align: center;
padding: .5em 0 0 0;
margin: 0;
border-left: .0625em solid #FFF;
border-right: .1em solid #CCC;
text-shadow: .0625em .0625em .0625em #ffffff;
filter: dropshadow(color=#ffffff, offx=1, offy=1);
filter: glow(color=black,strength=1); 
```

}

在 IE 中，文本如下所示：[https ://www.dropbox.com/s/578y9y8fjvlx072/Screen%20Shot%202012-10-04%20at%2010.33.11%20PM.png](https://www.dropbox.com/s/578y9y8fjvlx072/Screen%20Shot%202012-10-04%20at%2010.33.11%20PM.png)

但是，在 Safari、Chome、FireFox 和 Opera 中，它看起来像这样：[https ://www.dropbox.com/s/hvunkc4ql8ry0u5/Screen%20Shot%202012-10-04%20at%2010.33.23%20PM.png](https://www.dropbox.com/s/hvunkc4ql8ry0u5/Screen%20Shot%202012-10-04%20at%2010.33.23%20PM.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:06:35.190

试试这个 CSS 属性：

```
 filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=1, OffY=1, Color=#ffffff); 
```

在 IE 中试试这个演示：http: [//jsfiddle.net/ongisnade/Dw7kz/](http://jsfiddle.net/ongisnade/Dw7kz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:43:24.657

Explorer 使用不同的引擎呈现方法，因此您看到的实际上是一个特性。

您可以尝试设置`strength=0`，它应该正确显示。

# r - 在 R 库中搜索函数

> ID：12738746
> 
> 赞同：5
> 
> 时间：2012-10-05T02:37:18.720
> 
> 标签：r, search

论坛新手。有没有办法在 R 中的特定库中搜索函数？

假设我想要“图形”库中所有函数的列表。会怎么做？

如果我想查找有关“plot”命令的特定文档，我在使用 help.search("plot") 时找不到文档。它为我提供了来自不同库的所有其他功能。我只想在寻找特定功能时能够找到并缩小搜索范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T02:54:56.597

要获得包中所有功能的列表以及指向其文档的链接，请执行以下操作：

```
help(package = "graphics") 
```

这当然假设您已经安装了该软件包。

* * *

对于您的其他问题：

如果您已经知道要查找的函数的名称，请不要使用`help.search("plot")`but `help("plot")`。顾名思义，`help.search`搜索所有文档并返回每个命中，非常类似于 Google 搜索。

最后，知道你可以使用：

*   `?plot` 作为快捷方式`help("plot")`
*   `??plot`作为`help.search("plot")`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T02:41:10.133

这是包装图形的示例：

```
library(graphics)   #first load the package 
OBJS <- objects("package:graphics")    #use objects to look at all objects
DS <- data(package="graphics")[["results"]][, "Item"]   #find the data sets
OBJS[!OBJS %in% DS]  #compare to data sets 
```

在这里它被包装为函数：

```
funs <- function(package) {
    pack <- as.character(substitute(package))[1]
    require(pack, character.only = TRUE)
    OBJS <- objects(paste0("package:", pack)) 
    DS <- data(package=pack)[["results"]][, "Item"]  
    OBJS[!OBJS %in% DS]  
}

funs(graphics) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T02:55:08.667

* * *

Brian Ripley 在 [R-help上的回答](https://stat.ethz.ch/pipermail/r-help/2003-April/031666.html)

> `ls("package:ts")`
> 
> 将列出包中的所有对象（我认为包而不是库的意思是：库是包含已安装包的目录）。
> 
> 如果您真的想了解包中的功能（而不是所有对象），请尝试
> 
> `lsf.str("package:ts")`
> 
> 这也给出了调用序列。

* * *

## [未知R](http://cran.r-project.org/web/packages/unknownR/)

我还将介绍[unknownR](http://cran.r-project.org/web/packages/unknownR/) 包。[这里](http://www.londonr.org/unknownR.pdf)有一个很好的演示。

它是一个搜索功能顶级包的工具（帮助您了解未知的未知数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T04:51:45.090

如果您正在寻找 package 中的功能`foo`，有时`??foo`效果很好。

# javascript - 分配给变量后使用 var 声明变量

> ID：12738747
> 
> 赞同：3
> 
> 时间：2012-10-05T02:37:36.430
> 
> 标签：javascript

> **可能重复：**
> [重新声明javascript变量有什么好处吗？](https://stackoverflow.com/questions/1864013/is-there-any-advantage-of-redeclaring-javascript-variables)

为什么下面的代码显示 1 而不是 undefined：

```
a = 1;
var a;
alert(a); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T02:40:49.783

1)`var`不重新声明或删除变量

2) 即使这样做了，您的代码也会使用 javascript 提升规则重写*（任何变量或函数声明都会移动到最近的封闭函数的顶部），如下所示：

```
var a;
a = 1;
alert(a); 
```

（*有效重写；请参阅 RobG 的关于输入执行上下文的评论和链接以进行澄清）

# java - 记录 log4j 和 Null 对象

> ID：12738751
> 
> 赞同：0
> 
> 时间：2012-10-05T02:38:51.667
> 
> 标签：java, logging, log4j, nullpointerexception

我想知道我能否避免 _log.info 中的 NullPointerException。我有 1 个空对象（obj），然后

```
_log.info("obj id: " + obj.objId()); 
```

在这种情况下，我想要 _log 打印输出 obj.objId() 为 null 并且不抛出异常：-？有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:44:15.080

这不是 log4j 的问题，而是您的程序的问题

你可以按照......的方式做一些事情。

```
_log.info("obj id: " + (obj == null ? null : obj.objId())); 
```

我认为问题不在于 ID 为空，我认为，从您所说的来看，它`obj`是空的，因此对的引用`obj.objId()`导致了 NPE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:43:14.277

怎么样：`_log.info(String.format("obj id: %s", (obj == null ? obj : obj.objId())));`？

# php - 允许 file_get_conents 文件，但不允许浏览目录？

> ID：12738753
> 
> 赞同：0
> 
> 时间：2012-10-05T02:39:09.263
> 
> 标签：php, apache

在我的`public_html`文件夹中，我有一些这样的代码：

```
echo file_get_contents('files/123.txt'); 
```

用户可以查看子文件夹中的文本文件。但是，是否可以使用 apache 来阻止`files`通过浏览器对文件夹的传入请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:45:04.640

在您的 Apache 配置中，您可以添加：

```
<Directory /path/to/files/>
    Order Deny,Allow
    Deny from All
</Directory> 
```

[http://httpd.apache.org/docs/2.4/mod/core.html#directory](http://httpd.apache.org/docs/2.4/mod/core.html#directory)

我相信允许 file_get_contents 是 PHP 的问题，而不是 Apache 的问题。

但是一旦你这样做了，一定要记得重新启动 Apache！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:44:30.463

您正在寻找 Directory 和 Deny Apache 指令：

[http://httpd.apache.org/docs/2.2/howto/access.html](http://httpd.apache.org/docs/2.2/howto/access.html)
[http://httpd.apache.org/docs/current/mod/mod_access_compat.html#deny](http://httpd.apache.org/docs/current/mod/mod_access_compat.html#deny)

这里的好例子：[http ://httpd.apache.org/docs/2.2/sections.html](http://httpd.apache.org/docs/2.2/sections.html)

# operating-system - 关于内核空间的问题

> ID：12738756
> 
> 赞同：0
> 
> 时间：2012-10-05T02:39:23.903
> 
> 标签：operating-system

1.每个进程都有自己的虚拟地址空间，内核也有自己的，内核是一堆进程，是不是每个内核进程都有自己的虚拟地址空间？

2.在32位架构系统中，每个进程都有4GB的虚拟地址空间，内核空间的大小是多少？

一个用户空间的3.0x00000000-0xffffffff被内核占用，但是它们是不同的空间，这是如何实现的？

4.为什么内核需要将某些东西复制到自己的空间中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:20:57.010

> 每个进程都有自己的虚拟地址空间，内核也有自己的，内核是一堆进程，这是否意味着每个内核进程都有自己的虚拟地址空间？

内核可能没有特殊的内核进程。它甚至可能没有特殊的内核线程。例如，MSDOS 中没有，无论它是多么原始的操作系统。它所拥有的只是 ISR、用于各种事物的大量内部代码（例如文件系统驱动程序、内存管理器等）以及用于应用程序的系统调用 API。

操作系统的某些功能可以由（或，IOW，委托给）用户进程提供。这就是微内核的想法。与常规进程相比，这些专用进程可能具有额外的特权。

在这种情况下，内核几乎是一组可由用户进程以某种方式调用的子例程（DOS 就是这样，除了没有进程并且所有东西都有一个地址空间）。内核仍然必须可供所有人访问，因此，它所在的内存在所有地址空间之间共享（例如，通过页面转换）。每个内核都有这样一个公共/共享部分。

> 在 32 位架构系统中，每个进程都有 4GB 的虚拟地址空间，内核空间的大小是多少？

这取决于 CPU 和内核实现。32 位 Windows 通常为地址空间的用户和内核部分保留 2GB。如果需要，可以将其覆盖为用户 3GB 和内核 1GB。

> 一个用户空间的0x00000000-0xffffffff被内核占用，但是它们是不同的空间，这是如何实现的？

这取决于 CPU 的 MMU。使用 x86 上的页表，您可以组织整个虚拟地址空间，使得在进程/线程切换期间只有一部分更改其到物理内存（这是用户部分）的映射，而另一部分仍然是相同（这是共享内核部分）。

通常，从 CPU 的角度来看，只有一个虚拟地址空间。但是将其部分称为单独的用户和内核虚拟地址空间是很常见的。

> 为什么内核需要将某些东西复制到自己的空间中？

它如何从进程中获取输入，例如系统调用参数？但最重要的是，如果它必须异步执行一些长时间的输入处理，只接受输入，让调用者继续，然后在工作完成时向调用者发出信号怎么办？调用进程可以自由地修改或释放它刚刚传递给内核的数据缓冲区。内核可能不太“高兴”地观察它正在处理的数据发生变化或消失。如果进程中有多个线程，即使是同步调用也会出现这个问题，因为另一个线程可以改变缓冲区，而内核正在使用它。

将数据复制到地址空间的内核部分或将其保存在地址空间的内核部分中可能还有其他原因。

# c++ - Q. “R with indicator”和“c++ with for”之间的速度

> ID：12738758
> 
> 赞同：0
> 
> 时间：2012-10-05T02:40:15.080
> 
> 标签：c++, r, rcpp

感觉下面的R代码速度不错。有什么方法可以提高使用 c++ 的速度吗？我觉得我的 c++ 代码并没有那么快。

```
#R-code
> s<-5
> t<-2
> y<-c(1,2,3,4,5)
> r<-c(1,5,5,3,3)
> 
> sindex<-r[r==s]
> tindex<-r[r==t]
> 
> 
> res<-sum(y[sindex])+sum(y[tindex])
> 
> sindex
[1] 5 5
> tindex
numeric(0)
> 
> res
[1] 10

#c++
res1=0; res2=0;
for(i=0;i<n;i++){
if(r[i]==s){
    res1=res1+y[s];
}
if(r[i]==t){
    res2=res2+y[t];
}
}
res=res1+res2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:22:22.207

R 中的矢量化（sum 是矢量化函数）在 C 中在后台运行。通常足够快...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:48:38.057

你可以试试这个：

```
res = 0;
for (i = 0; i < n; i++)
     if (r[i] == s || r[i] == t)
          res += y[i];   // y[s] or y[t] seems incorrect 
```

不要指望它会更快。

# c++ - C++ 函数返回数组

> ID：12738762
> 
> 赞同：2
> 
> 时间：2012-10-05T02:40:31.243
> 
> 标签：c++, arrays, pointers, return

我对 C++ 有点陌生。我习惯用 Java 编程。这个特殊的问题给我带来了很大的问题，因为 C++ 在处理数组时不像 Java。在 C++ 中，数组只是指针。

但是为什么这段代码：

```
#include <iostream>
#define SIZE 3
using namespace std;

void printArray(int*, int);
int * getArray();
int ctr = 0;

int main() {
  int * array = getArray();

  cout << endl << "Verifying 2" << endl;
  for (ctr = 0; ctr < SIZE; ctr++)
    cout << array[ctr] << endl;

  printArray(array, SIZE);
  return 0;
}

int * getArray() {
  int a[] = {1, 2, 3};
  cout << endl << "Verifying 1" << endl;
  for (ctr = 0; ctr < SIZE; ctr++)
    cout << a[ctr] << endl;
  return a;
}

void printArray(int array[], int sizer) {
  cout << endl << "Verifying 3" << endl;
  int ctr = 0;
  for (ctr = 0; ctr < sizer; ctr++) {
    cout << array[ctr] << endl;
  }
} 
```

打印出验证 2 和验证 3 的任意值。也许这与数组真正作为指针处理的方式有关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T02:42:48.653

问题是您不能返回本地数组：

```
int a[] = {1, 2, 3};
...
return a; 
```

是无效的。您需要`a`在返回之前复制到动态内存中。目前，由于是在*自动*`a`存储中分配的，因此一旦函数返回，数组的内存就会被回收，从而使返回的值无效。Java 没有同样的问题，因为包括数组在内的所有对象都是在动态存储中分配的。

 *更好的是，您应该避免使用数组来支持旨在替换它们的 C++ 类。在这种情况下，使用 a`std::vector<int>`将是更好的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T02:48:59.293

因为您的数组是堆栈分配的。从 Java 迁移到 C++，您必须非常小心对象的生命周期。在 Java 中，所有内容都是堆分配的，并且在没有对它的引用时进行垃圾收集。

然而，在这里，您定义了一个堆栈分配的数组 a，当您退出函数 getArray 时该数组被销毁。这是向量优于普通数组的（许多）原​​因之一——它们为您处理分配和释放。

```
#include <vector>

std::vector<int> getArray() 
{
    std::vector<int> a = {1, 2, 3};
    return a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:55:28.200

内存中有两个地方可以存放变量：栈和堆。堆栈包含在方法中创建的局部变量。堆在其他条件下保存其他变量，例如静态变量。

当您在其中创建`a`时，`GetArray()`这是一个存储在堆栈中的局部变量，并且`a`是指向该位置的指针。当方法返回指针时，堆栈的该层被释放（包括指针指向的实际值）。

相反，您需要动态分配数组，然后值将在函数返回时不会清除的堆中，`a`并将指向它们那里。

```
int * GetArray() {
  int* a = new int[3];
  a[0] = 1;
  a[1] = 2;
  a[2] = 3;
  cout << endl << "Verifying 1" << endl;
  for (int ctr = 0; ctr < 3; ctr++)
    cout << a[ctr] << endl;
  return a;
} 
```

现在，您在函数之间传递这些整数的地址，而值都位于堆中，直到程序结束或（最好）`delete`它们才被释放。*

# database - DB2：如何备份 DB2 数据库？

> ID：12738765
> 
> 赞同：0
> 
> 时间：2012-10-05T02:41:11.600
> 
> 标签：database, db2, backup

WINDOWS 7 上的 DB2 v10.1 数据库。

有人可以分享有关创建 DB2 的数据库备份的信息吗？我找不到详细的说明。

提前感谢您在此问题上的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:48:50.043

在 db2cmd 窗口中输入 \DB2 HELP BACKUP\ 以获得更完整的命令语法。该命令的最简单形式是

```
DB2 BACKUP DATABASE <database name> 
```

9.7 和 10.1 中的 Optim Studio 和 9.7 中的 Control Center 也有 GUI 来帮助完成这些任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:43:59.583

您是否尝试过查看文档？也许是“数据恢复参考”？

[http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0006150.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0006150.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T21:12:05.513

对于本地备份，您可以使用其他答案中也提供的简单命令行命令：

```
db2 backup database <name> 
```

如果您想要一个更适合“企业”的自动化解决方案，那么您应该研究 IBM Tivoli Storage Manager。DB2 支持在不中断本地数据库工作的情况下使用增量备份对网络存储的 TSM 进行动态备份。即您可以在备份运行时运行查询。

对于 TSM，您需要在数据库上启用日志归档，您可以使用以下命令执行此操作：

```
db2 update db cfg using LOGARCHMETH1 TSM 
```

启用日志归档后，您可以创建备份脚本并安排它：

```
set DB2INSTANCE=DB2
"C:\IBM\ProductName\db2\BIN\db2cmd.exe" /c DB2.EXE backup db WPSDB user <DOMAINUSERNAME> using <DOMAINUSERPASSWORD> online use tsm include logs 
```

这是完整教程的链接：http: [//www.codeyouneed.com/db2-backup-using-tsm/](http://www.codeyouneed.com/db2-backup-using-tsm/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T10:05:57.470

**有关配置 DB2 备份的详细分步指南，您可以参考：**

[用于 TSM v7.1 的 AIX(x64) 备份配置上的 DB2 v9.7](http://tsmtools.co.nf/db2_bkp.html)

每一步表单的规划、准备和执​​行都用图表进行解释。

基本步骤是：

1.  从护照优势下载基于 db2level 的适当 TSM API 32/64 位
2.  提取 TSMCLI_AIX.tar
3.  以root身份登录并输入“SMITTY INSTALL”
4.  选择所需的组件：

    **tivoli.tsm.client.ba.64bit**， **tivoli.tsm.client.api.64bit**等。

如果不使用 TSM 客户端 GUI，则无需安装

```
Tivoli.tsm.client.jbb.64bit
Tivoli.tsm.filepath 
```

5.  现在应用链接中提到的步骤作为示例，根据您的环境配置文件级别和 DB2 级别备份。

# javascript - Chrome 挂在 window.print() 但不是 Ctrl+P

> ID：12738766
> 
> 赞同：0
> 
> 时间：2012-10-05T02:41:36.877
> 
> 标签：javascript, google-chrome, printing

使用 Chrome 版本 22.0.1229.79 m

我们通过以下方式为用户提供一种从 Javascript 菜单打印当前页面的方法： `javascript:window.print();`

这在 IE 和 FF 中效果很好，但在 Chrome 上，页面会在打印预览弹出之前挂起 30 秒。有趣的是，Ctrl+P 或从 Chrome 菜单打印可以立即工作（所以它通常不会打印，只是使用 Javascript 调出打印预览）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:08:04.147

事实证明，我有一个 30 秒的超时，因为网站的一个不相关的功能阻止了打印 Javascript 的执行。FF 和 IE 运行两者都没有问题，但显然 Chrome 的线程逻辑阻止它启动，直到另一个 30 秒超时。

没有完全解决，但这是一个红鲱鱼......感谢您的帮助

# c# - 在图形对象上绘制的不可见控件

> ID：12738772
> 
> 赞同：1
> 
> 时间：2012-10-05T02:42:16.477
> 
> 标签：c#, winforms, graphics

我有一种方法可以禁用或启用一些自定义控件，然后使用图形对象来绘制线条和矩形。

该方法的要点：

```
void MyMethod()

{

//...

mycontrol.enabled = false;

mycontrol.visible = false;

mycontrol.Invalidate();

mycontrol.Update();

GraphicsObject.DrawLines();

//...

} 
```

在此方法返回后，屏幕看起来很棒。我在控件曾经存在的地方有矩形和线条。

但是，在单击事件处理程序返回之后（它调用了上述方法）。应该不可见的控件绘制在线条和矩形上（将这些区域留空 - 与背景表单颜色相同）。

有没有什么办法解决这一问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:10:12.677

正如我在评论中提到的，如果您在对象上绘图，如果您不使用[OnPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法或[Paint 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)，您的自定义绘图将不会自动重绘。根据您所绘制的内容，您可以执行类似的操作（*我假设您正在绘制表单*）。

```
void MyMethod() 
{ 
    //... 
    mycontrol.enabled = false; 
    mycontrol.visible = false; 
    mycontrol.Invalidate(); 
    mycontrol.Update(); 
    this.Invalidate(); 
} 

private void Form1_Paint(object sender, PaintEventArgs e)
{
    //Conditional Logic to determine what you are drawing
    // myPoints is a Point array that you fill elsewhere in your program

    e.Graphics.DrawLines(new Pen(Brushes.Red), myPoints);

} 
```

# plsql - oracle 10g 和定义指令

> ID：12738777
> 
> 赞同：1
> 
> 时间：2012-10-05T02:42:49.497
> 
> 标签：plsql, oracle10g

我想在属于数据库主页的 SQL 窗口中编译这个 PL/SQL 程序：

```
DEFINE p_annual_sal=60000
DECLARE
     v_sal NUMBER(9,2):=&p_annual_sal;
BEGIN
     v_sal:=v_sal/12;
     DBMS_OUTPUT.PUT_LINE('The monthly salary is '|| TO_CHAR(v_sal));
END; 
```

当我点击运行时，我收到以下消息：

> ORA-00900: 无效的 SQL 语句

即使它在命令行的 SQL*Plus 下工作，它可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:44:53.577

它在 SQL*Plus 中工作，因为`DEFINE`它是一个 SQL*Plus 命令。

当您提到“数据库主页”时，我相信您指的是 Oracle Apex 的 SQL 命令窗口，它可以运行 SQL 和 PL/SQL 代码，但不能运行 SQL*Plus 命令。

您可以改为执行此操作 - Apex 将提示您输入绑定变量（如果有）：

```
DECLARE
     v_sal NUMBER(9,2):= :p_annual_sal;
BEGIN
     v_sal:=v_sal/12;
     dbms_output.put_line('The monthly salary is '|| TO_CHAR(v_sal));
END; 
```

# select - 有没有办法把它压缩成 2 列？计数（列名）

> ID：12738778
> 
> 赞同：1
> 
> 时间：2012-10-05T02:42:52.177
> 
> 标签：select, count, where

```
SELECT COUNT(title) AS SH
FROM movies
where genre = 'SH';

SELECT COUNT(title) AS CH
FROM movies
where genre = 'CH';

SELECT COUNT(title) AS ADV
FROM movies
where genre = 'ADV';

SELECT COUNT(title) AS COM
FROM movies
where genre = 'COM';

SELECT COUNT(title) AS DR
FROM movies
where genre = 'DR';

SELECT COUNT(title) AS SF
FROM movies
where genre = 'SF' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:54:18.250

```
SELECT count(*), genre
FROM movies
GROUP BY genre; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:52:36.270

你的意思是这样吗？

从电影中选择流派，计数（标题）按流派分组

# python - 如何在两个相等长度的排序列表中找到重复项的第一个实例的位置

> ID：12738781
> 
> 赞同：2
> 
> 时间：2012-10-05T02:43:00.617
> 
> 标签：python, list

我有两个相同长度的随机列表，范围为 0 到 99。

```
lista = [12,34,45,56,66,80,89,90]

listb = [13,30,56,59,72,77,80,85] 
```

我需要找到重复数字的第一个实例，以及它来自哪个列表。在这个例子中，我需要在 listb 中找到数字 '56'，并获取索引`i = 2`

谢谢。

更新：运行几次后，我得到了这个错误：

```
 if list_a[i] == list_b[j]:
IndexError: list index out of range 
```

就像@Asterisk 建议的那样，我的两个列表长度相等且已排序， i 和 j 在开头都设置为 0。该位是遗传交叉代码的一部分：

```
 def crossover(r1,r2):
    i=random.randint(1,len(domain)-1) # Indices not at edges of domain
    if set(r1) & set(r2) == set([]): # If lists are different, splice at random
      return r1[0:i]+r2[i:]
    else: # Lists have duplicates
      # Duplicates At Edges
      if r1[0] == r2[0]: # If [0] is double, retain r1
        return r1[:1]+r2[1:]
      if r1[-1] == r2[-1]: # If [-1] is double, retain r2
        return r1[:-1]+r2[-1:]
      # Duplicates In Middle
      else: # Splice at first duplicate point
        i1, i2 = 0, 0
        index = ()
        while i1 < len(r1):
          if r1[i1] == r2[i2]:
            if i1 < i2:
              index = (i1, r1, r2)
            else:
              index = (i2, r2, r1)
            break
          elif r1[i1] < r2[i2]:
            i1 += 1
          else:
            i2 += 1
      # Return A Splice In Relation To What List It Appeared First
      # Eliminates Further Duplicates In Original Lists
      return index[2][:index[0]+1]+index[1][index[0]+1:] 
```

该函数接受 2 个列表并返回一个。domain 是 10 个元组的列表：(0,99)。

正如我所说，错误不会每次都发生，只会偶尔发生一次。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:48:01.363

我不是 python 人，但这是一个算法问题......

您维护每个列表的索引，并查看这两个列表位置的元素。

无论哪个列表在当前位置具有最小元素，您都将移动到该列表中的下一个元素。

当您找到一个与另一个列表的当前元素相同的元素时，这就是您的最小副本。

如果您到达任一列表的末尾，则没有重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:48:08.230

如果您要查找所有重复项，则可以使用以下内容：

```
list_a = [12,34,45,56,66,80,89,90]
list_b = [13,30,56,59,72,77,80,85]

set_a = set(list_a)
set_b = set(list_b)

duplicates = set_a.intersection(set_b)
# or just this:
# duplicates = [n for n in list_a if n in list_b]

for duplicate in duplicates:
    print list_a.index(duplicate) 
```

要获取任一列表中重复项的最小索引：

```
a_min = min(map(list_a.index, duplicates))
b_min = min(map(list_b.index, duplicates))

if a_min < b_min:
    print 'a', a_min, list_a[a_min]
else:
    print 'b', b_min, list_b[b_min] 
```

如果没有，这应该会更好一些：

```
duplicate = None

for n in set_a:
    if n in set_b:
        duplicate = n
        break

if duplicate is not None:
    print list_a.index(duplicate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:21:54.287

只需扫描位置 0 的所有列表，然后是 1，然后是 2，... 跟踪您所看到的内容（您可以在 O(1) 时间内查询一个集合）。

```
def firstDuplicate(*lists):
    seen = {}
    for i,tup in enumerate(zip(*lists)):
        for listNum,value in enumerate(tup):
            position = (listNum,i)
            if value in seen:
                return value, [seen[value], position]
            else:
                seen[value] = position 
```

演示：

```
>>> value,positions = firstDuplicate(lista,listb)
>>> value
56
>>> positions
[(1, 2), (0, 3)] 
```

（还没有推广到 N 个列表...。需要稍作调整才能使用 a `defaultdict(set)`，将所有索引作为元组插入在一起，然后检查重复项。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T03:14:14.403

```
lista = [12,34,45,56,66,80,89,90]

listb = [13,30,56,59,72,77,80,85]

i, j = 0, 0
while i < len(lista):    
    if lista[i] == listb[j]:
        if i < j:
            print i, lista
        else:
            print j, listb
        break
    elif lista[i] < listb[j]:
        i += 1
    else:
        j += 1

>>> 
2 [13, 30, 56, 59, 72, 77, 80, 85] 
```

假设：两个列表具有相同的长度，并且它们已排序

# sql - 计算gpa oracle pl sql

> ID：12738782
> 
> 赞同：1
> 
> 时间：2012-10-05T02:43:02.347
> 
> 标签：sql, oracle, plsql

我是 pl/sql 的菜鸟。我正在尝试使用 pl sql 计算 gpa。我创建了一个表，其中包含带有值的等级。

```
SSN             CNO           GRADE
--------------- -------- ----------
55555           cs101             1
55555           math101           4
55555           bio101            1
55555           cgdd101           3
55555           swe203            3
55555           eng101            3
11111           bio101            4
11111           cgdd101           4
55555           cs101             1
55555           math101           4
55555           bio101            1 
```

我正在尝试使用以下 pl sql 函数计算 gpa，但出现以下错误。

```
55555           eng101            3

36 rows selected.

SQL> create or replace function get_count
  2  return is
  3  declare
  4  v_count number;
  5  begin
  6  select count(*) into v_count from grade;
  7  return grade;
  8
  9  end;
 10  /

Warning: Function created with compilation errors.

SQL> show errors
Errors for FUNCTION GET_COUNT:

LINE/COL ERROR
-------- -----------------------------------------------------------------
2/8      PLS-00103: Encountered the symbol "IS" when expecting one of the
         following:
         <an identifier> <a double-quoted delimited-identifier> self
         long double ref char time timestamp interval date binary
         national character nchar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:47:59.237

您的函数缺少返回数据类型，例如：

```
create or replace function get_count
return NUMBER is
v_count number;
... 
```

此外，您不需要`declare`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:49:32.137

尝试这个

```
CREATE OR REPLACE FUNCTION GET_COUNT
   RETURN NUMBER
IS
   V_COUNT   NUMBER;
BEGIN
   SELECT COUNT (*)
     INTO V_COUNT
     FROM GRADE;
   RETURN V_COUNT;
END; 
```

# java - Struts2 中实际排除的 excludeParams 是什么？

> ID：12738796
> 
> 赞同：2
> 
> 时间：2012-10-05T02:44:47.170
> 
> 标签：java, parameters, struts2

我是这个领域的新手。当我在 S2 中浏览拦截器基础知识时，我遇到了`struts-default.xml`并且对列表有点困惑`excludeParams`。任何人都可以向我解释下面的代码以及每个参数的一点点吗？

```
<interceptor-ref name="params">
                <param name="excludeParams">dojo\..*,^struts\..*,^session\..*,^request\..*,^application\..*,^servlet(Request|Response)\..*,parameters\...*</param>
</interceptor-ref> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:09:28.137

好吧，这是框架提供的一项功能，可让您决定是否需要所有参数或某些选定参数。

您可以使用此功能来决定，它有时非常有用，您希望某些特定属性在您的操作类中被接受。

默认情况下`Param interceptor`设置值堆栈上的所有参数。

此拦截器通过调用从值堆栈获取所有参数`ActionContext#getParameters()`并将它们设置在值堆栈上`ValueStack#setValue(String, Object)`，通常会导致表单请求中提交的值应用于值堆栈中的操作。

在 XWork 的底层提供`MethodFilterInterceptor`，因此能够处理 excludeMethods / includeMethods 参数。

这是 Struts2 提供的处理跨站请求伪造 (CSRF) 的机制之一。

看一下

1.  [参数拦截器](http://struts.apache.org/2.3.4/docs/parameters-interceptor.html)
2.  [方法过滤器拦截器](http://struts.apache.org/2.2.3/xwork-core/apidocs/com/opensymphony/xwork2/interceptor/MethodFilterInterceptor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:51:52.547

请参阅[文档](http://struts.apache.org/2.0.14/docs/parameters-interceptor.html)- 通过设置其 excludeParams 属性，可以强制此拦截器忽略参数。此属性接受以逗号分隔的正则表达式列表。当这些表达式中的任何一个与参数的名称匹配时，拦截器将忽略该参数。Struts 定义的拦截器栈已经排除了一些参数：

```
 dojo\..* (anything parameter whose name contains "dojo.")
   ^struts\..* (any parameter whose name starts with "struts.") 
```

# excel - 如何在 MS word 中放置多个 QR 码？

> ID：12738801
> 
> 赞同：1
> 
> 时间：2012-10-05T02:46:02.193
> 
> 标签：excel, labels

我是一名教师和跑步教练，我真的可以使用你的帮助。我正在尝试使用 Excel 格式的数据（跑步者姓名、学校、年级的列，以及使用相同信息生成该特定 QR 码图像的 URL 的 QR 生成器的链接。[例如，请参见此处。](http://chart.apis.google.com/chart?cht=qr&chs=350x350&chl=MECARD%3aN%3aCharles%20Adams;ORG%3aXYZ%20Co.;TEL:123456789;EMAIL%3aca@xyz.com;ADR:88%20Broad%20Street,%20New%20York,%20NY%2010004,%20USA;URL%3ahttp://www.xyz.com;NOTE%3achadams%20in%20twitter;;)）。这将用于 MS Word 中标签的邮件合并。

我正在寻找的最终产品是一组带有跑步者姓名、学校和二维码的 Avery 标签。这样一来，每位跑者都会佩戴一个特定的标签，在他们冲过终点线后，我可以使用手机上的二维码应用程序扫描他们的信息。

这对我学校的许多老师来说也有很​​多用途：我们可以使用这些 QR 码跟踪学生物品，例如平装书、文件夹和作业。

感谢您提供的任何帮助！

最好的，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:30:25.473

谢谢回答我的问题！我很感激你给了我这个谜题的线索。

**这是我所做**的： [这是我使用的网站。](http://qrexplore.com/generate/).
获得`.png`文件后，我可以在查看文件夹时通过 Windows 打印图片功能将它们以 9 个一组的形式打印到标签纸（我必须自己切碎）上。`Lo`并且`behold`，每个孩子都会得到一个`QR code`印在它下面的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:44:45.663

只需使用其中一个在线 QR 码生成器，如 www.qrstuff.com 并下载您生成的每个 QR 码的图像，然后设置一个 Word 文档，其中包含您正在使用的标签表的模板（例如 Avery 表，Word 有模板），然后将您下载的二维码图像导入模板并打印。

# c++ - 分层窗口：为什么边缘会自动变圆？

> ID：12738802
> 
> 赞同：0
> 
> 时间：2012-10-05T02:46:05.547
> 
> 标签：c++, winapi, rounded-corners

我正在尝试将`hbitmap`a`layeredwindow`直接绘制到屏幕上。这现在也可以正常工作，但图像的左上角*始终*是圆形的。

我正在创建窗口：

```
 HWND hWnd = CreateWindowEx(WS_EX_LAYERED | WS_EX_TRANSPARENT
        , szWindowClass, 0, 
        WS_VISIBLE
        , 150,250, width, height, 0, NULL, hInstance, NULL); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:19:45.737

您正在使用`WS_VISIBLE`as 窗口样式，相当于`WS_OVERLAPPED | WS_VISIBLE`. 重叠的窗户顶部有圆角。

改为使用`WS_POPUP | WS_VISIBLE`。

# javascript - 如何清除过滤器 - AngularJS

> ID：12738805
> 
> 赞同：10
> 
> 时间：2012-10-05T02:46:38.237
> 
> 标签：javascript, angularjs

我对 AngularJS 很陌生，今天正在玩过滤器。我能够应用`filter`过滤器以仅显示与选择菜单中的条件匹配的行。但是，我无法向按钮添加“清除过滤器”功能。单击按钮时如何重置过滤器？

在下面的 Plunker 中，您可以看到我在尝试实现此目的时使用的代码： [Plunker - AngularJS 示例](http://plnkr.co/edit/5Wz6LA)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-04-09T00:23:16.253

该`ng-click`指令可用于将过滤器模型设置为任何 false-but-not- Javascript 值，`false`例如`''`、或。`undefined``null``{}`

在以下代码中，单击`div`将重置`customFilter`模型。

```
<input type="text" ng-model="customFilter" />
<div ng-click="customFilter = undefined">
    Clear Filter
</div> 
```

[这是使用 Angular v1.4.1 的 Plunker 项目的更新分支的链接](http://plnkr.co/edit/DpwlHE?p=preview)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-05T03:50:22.640

您可以使用`ng-click`绑定单击处理程序来清除`query`范围内的变量。

[http://plnkr.co/edit/p1DnoV](http://plnkr.co/edit/p1DnoV)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-31T12:22:29.060

如果您使用 ng-table 过滤器，此示例将帮助您清除过滤器

```
<table ng-table="tableParams" show-filter="true" class="table table-striped table-bordered table-condensed table-hover cf">
    <tbody>
        <tr ng-repeat="tableData in $data">
            <td data-title="'Name'" filter="{Name:'text'}" sortable="'{Name}'" />
        </tr>
    </tbody>
</table> 
```

**您可以从ng-click**清除过滤器，如下所示

```
$scope.tableParams.parameters({ filter: {}, sorting: {}, page: 1 }); 
```

# php - AJAX 没有循环

> ID：12738809
> 
> 赞同：0
> 
> 时间：2012-10-05T02:47:54.487
> 
> 标签：php, javascript, html, ajax

我有这个 html 和 ajax 文件，但它并没有像我想要的那样每秒更新一次。我希望它每秒调用 getTime()。它只做一次，然后什么也不做。

有什么想法吗？谢谢。

```
<head>
    <title>Auction</title>
    <script type="text/javascript">
        function getTime() {
            if (str=="") {
                document.getElementById("txtHint").innerHTML="";
                return;
            } 

            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            } else {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                }
            }

            xmlhttp.open("GET","functions.php?action=getCurrentTime&id=13",true);
            xmlhttp.send();

            setTimeout(getTime, 1000);
        }

        window.setInterval(getTime, 1000);
    </script>
</head>
<body>
    <?php beginGetAllInfo(); ?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:01:56.483

根据您的示例代码，内部发生的第一件事`getTime()`是检查名为的变量`str`是否为空，如果是，则从函数返回。`str`未定义（在您的示例代码中），因此它应该返回。尝试删除该`if`语句，或初始化`str`为不会导致语句失败的内容。

此外，您有两个语句将（最终）导致您的代码每秒执行两次： `setTimeout(getTime, 1000);` 和 `window.setInterval(getTime, 1000);`

第一个，`setTimeout()`将在 1 秒后执行一次代码。但是，每次执行该`getTime()`方法时都会执行此操作 - 因此理论上它应该每秒运行一次。第二个，`setInterval()`将以 1 秒的间隔执行代码。因此，您的代码将始终每 1 秒执行一次。

我建议要么删除`setTimeout()`内部的线`getTime()`，要么将 更改`setInterval()`为 a `setTimeout()`（可以这么说，让球滚动）。

# php - 将有限数量的变量值传递给方法的最佳实践

> ID：12738813
> 
> 赞同：0
> 
> 时间：2012-10-05T02:48:10.153
> 
> 标签：php

我正在为联系人管理创建一个类，我很好奇是否有人有任何创意可以传递选项以使某些列`ORDER BY`在 MySQL 中可排序。

有 5 列。ID、名字、姓氏、电话号码、电子邮件。

所有这些都需要是可排序的升序和降序。显而易见的答案就是传递一个字符串，例如“firstname DESC”——但似乎有点打开，并且想让类更具限制性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:03:59.250

最安全的方法是使用只能保存某些值的对象：

```
function getUser(UserSortOption $sortOrder) {
    ...
    $sql .= $sortOrder->getField() . $sortOrder->getDirection();
    ...
}

getUser(new UserSortOption(UserSortOption::FIRSTNAME, UserSortOption::DESC)); 
```

为您提供严格类型和枚举的所有优势。尽管必须为每个函数参数定义、测试和包含一个单独的类，但这可能有点过头了。

否则，您必须检查函数内部：

```
function getUser(array $sort) {
    $sortField = key($sort);
    $sortDirection = current($sort);

    if (!in_array($sortField, array('Firstname', ...))) {
        throw new InvalidArgumentException("Invalid value $sortField for sort parameter");
    }

    ...
}

getUser(array('Firstname' => 'desc')); 
```

# c# - LiNQ 有不同的结果

> ID：12738814
> 
> 赞同：3
> 
> 时间：2012-10-05T02:48:14.723
> 
> 标签：c#, .net, linq

我调用了这个类`Variables`，它有多个成员，其中一个被称为`Name`字符串。假设我有一个`List<Variables>`. 这有`Names`, `X`, `Y`, `Y`.`Z`

```
string variableName = 'Y';

int _totalCount = (from p in variableList
                    where p.Name == variableName
                    select p.Name).Count();

int _totalCount2 = variableList.Select(x => x.Name == variableName).Count(); 
```

问题：为什么`_totalCount`退货`2`（*这是我想要的*）而`_totalCount2`退货`4`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T02:50:41.580

因为`Select`没有做你认为它做的事情：它是一个*投影*，而不是一个*过滤器*。该表达式`x => x.Name == variableName`是针对列表中的每个项目计算的。你会得到`{False, True, True, False}`. 然后`Count()`调用结果，返回`4`.

过滤是使用带有`Where`谓词的方法完成的：

```
int _totalCount2 = variableList.Where(x => x.Name == variableName).Count(); 
```

# jquery - jQuery clearTimeout 不起作用？

> ID：12738818
> 
> 赞同：0
> 
> 时间：2012-10-05T02:48:44.550
> 
> 标签：jquery, settimeout, clearinterval

我正在尝试清除此超时，以便在单击此按钮时重新启动，但是它不起作用：\

```
var confirmAlbumDelete;
$("body").on("click", ".upload-result-wrapper .top-details .delete", function(){

    clearTimeout(confirmAlbumDelete);

    $this = $(this);
    $this.text("Yes, Delete Album").addClass("confirm-delete");

    confirmAblumDelete = setTimeout(function(){$this.text("Delete Album").removeClass("confirm-delete")},10000);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:52:15.970

您拼错了变量名：

```
confirmAblumDelete = setTimeout
        ^^ 
```

# c# - 应用程序外观模式的最佳实践

> ID：12738819
> 
> 赞同：3
> 
> 时间：2012-10-05T02:48:50.550
> 
> 标签：c#, .net, design-patterns, facade

我有一个多层 SOA 应用程序和一个包含 100 多个表的数据库。我正在为我的数据层使用实体框架，它负责所有 CRUD 操作。

我有 1 个外观类，它托管在服务上，可由客户端应用程序调用。

这个外观类包含诸如

```
private void DoSomething()
{
  //insert to table1
  //insert to table 2
  //delete from table 3
  //more CRUD operations
} 
```

并且外观类基本上充满了类似于 DoSomething() 的其他方法

所以客户端基本上会创建一个外观类的实例，并获得对所有这些方法的访问权限。

我现在的问题是，这是外观模式的最佳实践吗？我觉得外观类太“重”了，如果我的应用程序规模更大，我不确定它是否会影响性能。

如果我有很多方法，创建外观类的实例会是一项非常昂贵的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:13:53.767

好吧，Facade 非常适合 SOA 架构，因为它将子系统封装为一个对象，并为您的客户提供所有业务对象和服务的聚合接口。它还减少了架构中的耦合。我认为您的方法并不繁重，并且不会影响系统的可扩展性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:08:28.903

> 如果我有很多方法，创建外观类的实例会是一项非常昂贵的操作吗？

假设在构造过程中没有调用这些方法，它们应该对对象的“重量”没有影响。我的理解是，一种不做任何事情的方法不会出于实际目的而消耗内存或周期。

（作为旁注，有一些技术限制不会为您的问题增加价值。请参阅[C# 类可以有多少方法](https://stackoverflow.com/questions/1415665/how-many-methods-can-a-c-sharp-class-have)）

让你的门面为你工作！一个好的做法是假设您将它交给其他人并询问“这是否清楚地描述了我的 API 的功能是什么？”。60 听起来像是达到了我个人偏好的上限，但这仍然只是 15 个对象的 CRUD。

将外观视为一个统一的接口，可以让您腾出时间来创建更简洁和复杂的服务（反过来，它应该封装更简洁的存储库，而这些存储库又应该将更简洁的数据记录封装在表中，将 BLOBS 封装在存储桶中等） .

# php - 将 javascript 发布到 mysql 数据库中

> ID：12738820
> 
> 赞同：0
> 
> 时间：2012-10-05T02:48:52.357
> 
> 标签：php, mysql

我正在尝试将 JavaScript/CSS/代码插入 MYSQL 数据库。Adcode 正在从 textarea 传递到下面的 PHP 代码，在插入成功后，adname 成功，但 adcode 为空白..

问题/问题：

1.  为什么将空白代码输入数据库而不是传递的代码
2.  这样做最有效的原因是什么？
3.  如何同时传递 Adname 和 Adcode 以及 UPDATE。

我的第一个代码：第 1 版（以下代码的第 2 版中的固定问题/问题 1）

```
// Insert ad into database
    $ad = mysql_real_escape_string($_POST['adcode']);
    $insert = "INSERT INTO ads (adname, adcode) VALUES ('".$_POST['adname']."', '".$_POST['$ad']."')";
    $doit = mysql_query($insert); 
```

我当前的代码：版本 2（针对问题一和二）

```
if ($_GET['action'] == "editad") {  // Edit AD
    $newadcode = mysql_real_escape_string($_POST['adcode' . $ID]);
    $doedit = "UPDATE `adgate`.`ads` SET `ads`.`adcode` = '$newadcode' WHERE `ads`.`ID` = '$ID' LIMIT 1" or die(mysql_error());
    $retval = mysql_query( $doedit, $connection );
    if(! $retval )
    {
        die('Could not update data: ' . mysql_error());
    }
    echo "Updated data successfully\n";
    //header("Location: displayads.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:50:27.050

尝试：

```
$adname = mysql_real_escape_string($_POST['adname']);
$adcode = mysql_real_escape_string($_POST['adcode']);
$insert = "INSERT INTO ads (adname, adcode) VALUES ('".$adname."', '".$adcode."')";
$doit = mysql_query($insert); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:51:41.993

发现错误：

```
$ad = mysql_real_escape_string($_POST['adcode']);
^^^
... "... VALUES ('".$_POST['adname']."', '".$_POST['$ad']."')";
                                            ^^^^^^^^^^^^^ 
```

在开发过程中启用错误报告！这会引发一个很好的警告。

# iphone - UICollectionViewLayoutAttributes 子类在自定义属性中返回 nil

> ID：12738824
> 
> 赞同：13
> 
> 时间：2012-10-05T02:49:58.337
> 
> 标签：iphone, ios, ios6

我对 UICollectionViewLayoutAttributes 类进行了子类化并添加了一些自定义属性。

在我的自定义 UICollectionViewLayout 类中，我将覆盖静态 `+ (Class)layoutAttributesClass` 并返回我的新属性类。

在我的 UICollectionViewLayout 类中，我覆盖了`-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect`并将值设置为自定义属性。

我可以在那里检查属性类，并查看自定义属性是否设置正确。

所以，最后我需要在 UICollectionViewCell 中检索这些属性，所以我重写`-(void) applyLayoutAttributes:(UICollectionViewLayoutAttributes *)layoutAttributes`以获取自定义 UICollectionViewLayoutAttributes 类中的值，但它们是 nil。好像我从来没有设置它们一样。

所有其他属性都可以正常工作，包括转换等。很明显，我做错了什么。请指教。

包括我的自定义类的 HeaderFile

```
@interface UICollectionViewLayoutAttributesWithColor : UICollectionViewLayoutAttributes

@property (strong,nonatomic) UIColor *color;

@end 
```

这是实现。如您所见，没有什么特别的

```
@implementation UICollectionViewLayoutAttributesWithColor

@synthesize color=_color;

@end 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-18T17:59:52.310

你会很高兴知道答案很简单。您只需要覆盖 copyWithZone: 因为 UICollectionViewAttributes 实现了 NSCopying 协议。发生的事情是 Apple 代码正在复制您的自定义属性对象，但由于您尚未实现 copyWithZone，因此您的自定义属性不会被复制到新对象。这是您需要执行的操作的示例：

```
@interface IRTableCollectionViewLayoutAttributes : UICollectionViewLayoutAttributes {
    CGRect _textFieldFrame;
}

@property (nonatomic, assign) CGRect  textFieldFrame;

@end 
```

和实施：

```
- (id)copyWithZone:(NSZone *)zone
{
    IRTableCollectionViewLayoutAttributes *newAttributes = [super copyWithZone:zone];
    newAttributes->_textFieldFrame = _textFieldFrame;

    return newAttributes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:11:27.960

删除自定义值的问题是因为我们必须实现 -copyWithZone: 因为 UICollectionViewLayoutAttributes 实现并使用 NSCopying

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T02:04:24.783

听起来您正在尝试将布局属性应用于单元格。可以这样做：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    //Get Cell
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];

    //Apply Attributes
    UICollectionViewLayoutAttributes* attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
    [cell applyLayoutAttributes:attributes];

    return cell;
} 
```

但是，在我的 UICollectionView 实现中，我只是将自定义属性添加到我的 UICollectionViewCell 子类而不是 UICollectionViewLayoutAttributes 子类中。我认为在大多数情况下子类化 UICollectionViewCell 更有效：

```
@interface ColoredCollectionCell : UICollectionViewCell
@property (strong,nonatomic) UIColor *color;
@end

@implementation ColoredCollectionCell
// No need to @synthesize in iOS6 sdk
@end 
```

在您的集合视图控制器中：

```
- (UICollectionViewCell*)collectionView:(UICollectionView*)cv cellForItemAtIndexPath:(NSIndexPath*)indexPath
{
    //Get the Cell
    ColoredCollectionCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];

    //Get the color from Array of colors
    UIColor *thisColor = self.colorsArray[indexPath.item];

    //Set cell color
    cell.color = thisColor;

    return cell;

} 
```

# java - 如何从 Java 调用 scikit-learn 分类器？

> ID：12738827
> 
> 赞同：34
> 
> 时间：2012-10-05T02:50:26.177
> 
> 标签：java, python, jython, scikit-learn

我有一个使用 Python 的 scikit-learn 训练的分类器。如何使用 Java 程序中的分类器？我可以使用 Jython 吗？有没有办法在 Python 中保存分类器并在 Java 中加载它？还有其他使用方法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-05T09:05:29.017

您不能使用 jython，因为 scikit-learn 严重依赖具有许多已编译 C 和 Fortran 扩展的 numpy 和 scipy，因此无法在 jython 中工作。

在 java 环境中使用 scikit-learn 的最简单方法是：

*   将分类器公开为 HTTP / Json 服务，例如使用诸如[烧瓶](http://flask.pocoo.org/)或[瓶子](http://bottlepy.org/docs/dev/)或[檐口](http://packages.python.org/cornice/)之类的微框架，并使用 HTTP 客户端库从 java 调用它

*   在 python 中编写一个命令行包装应用程序，它使用诸如 CSV 或 JSON（或一些较低级别的二进制表示）之类的格式读取 stdin 上的数据并在 stdout 上输出预测，并从 java 调用 python 程序，例如使用[Apache Commons Exec](http://commons.apache.org/exec/tutorial.html)。

*   使python程序输出在拟合时学习的原始数值参数（通常作为浮点值数组）并在java中重新实现预测函数（这对于预测通常只是一个阈值点积的线性预测模型来说通常很容易） .

如果您还需要在 Java 中重新实现特征提取，则最后一种方法将做更多的工作。

最后，您可以使用实现所需算法的 Java 库（例如 Weka 或 Mahout），而不是尝试使用 Java 中的 scikit-learn。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-08-10T16:31:57.537

为此目的有[JPMML项目。](https://github.com/jpmml)

[首先，您可以直接从 python 使用sklearn2pmml](https://github.com/jpmml/sklearn2pmml)库将 scikit-learn 模型序列化为 PMML（内部是 XML），或者先将其转储到 python 中，然后使用java 中[的 jpmml-sklearn](https://github.com/jpmml/jpmml-sklearn)或从该库提供的命令行进行转换。接下来，您可以在 Java 代码中使用[jpmml-evaluator加载 pmml 文件、反序列化和执行加载的模型。](https://github.com/jpmml/jpmml-evaluator)

这种方式并非适用于所有 scikit-learn 模型，但适用于其中的[许多](https://github.com/jpmml/jpmml-sklearn#features)模型。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-04T16:26:02.913

您可以使用搬运工，我已经测试了 sklearn-porter ( [https://github.com/nok/sklearn-porter](https://github.com/nok/sklearn-porter) )，它适用于 Java。

我的代码如下：

```
import pandas as pd
from sklearn import tree
from sklearn_porter import Porter

train_dataset = pd.read_csv('./result2.csv').as_matrix()

X_train = train_dataset[:90, :8]
Y_train = train_dataset[:90, 8:]

X_test = train_dataset[90:, :8]
Y_test = train_dataset[90:, 8:]

print X_train.shape
print Y_train.shape

clf = tree.DecisionTreeClassifier()
clf = clf.fit(X_train, Y_train)

porter = Porter(clf, language='java')
output = porter.export(embed_data=True)
print(output) 
```

就我而言，我使用的是 DecisionTreeClassifier，输出

> 打印（输出）

是以下代码作为控制台中的文本：

```
class DecisionTreeClassifier {

  private static int findMax(int[] nums) {
    int index = 0;
    for (int i = 0; i < nums.length; i++) {
        index = nums[i] > nums[index] ? i : index;
    }
    return index;
  }

  public static int predict(double[] features) {
    int[] classes = new int[2];

    if (features[5] <= 51.5) {
        if (features[6] <= 21.0) {

            // HUGE amount of ifs..........

        }
    }

    return findMax(classes);
  }

  public static void main(String[] args) {
    if (args.length == 8) {

        // Features:
        double[] features = new double[args.length];
        for (int i = 0, l = args.length; i < l; i++) {
            features[i] = Double.parseDouble(args[i]);
        }

        // Prediction:
        int prediction = DecisionTreeClassifier.predict(features);
        System.out.println(prediction);

    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-16T13:05:25.480

以下是 JPMML 解决方案的一些代码：

--Python部分--

```
# helper function to determine the string columns which have to be one-hot-encoded in order to apply an estimator.
def determine_categorical_columns(df):
    categorical_columns = []
    x = 0
    for col in df.dtypes:
        if col == 'object':
            val = df[df.columns[x]].iloc[0]
            if not isinstance(val,Decimal):
                categorical_columns.append(df.columns[x])
        x += 1
    return categorical_columns

categorical_columns = determine_categorical_columns(df)
other_columns = list(set(df.columns).difference(categorical_columns))

#construction of transformators for our example
labelBinarizers = [(d, LabelBinarizer()) for d in categorical_columns]
nones = [(d, None) for d in other_columns]
transformators = labelBinarizers+nones

mapper = DataFrameMapper(transformators,df_out=True)
gbc = GradientBoostingClassifier()

#construction of the pipeline
lm = PMMLPipeline([
    ("mapper", mapper),
    ("estimator", gbc)
]) 
```

--JAVA部分--

```
//Initialisation.
String pmmlFile = "ScikitLearnNew.pmml";
PMML pmml = org.jpmml.model.PMMLUtil.unmarshal(new FileInputStream(pmmlFile));
ModelEvaluatorFactory modelEvaluatorFactory = ModelEvaluatorFactory.newInstance();
MiningModelEvaluator evaluator = (MiningModelEvaluator) modelEvaluatorFactory.newModelEvaluator(pmml);

//Determine which features are required as input
HashMap<String, Field>() inputFieldMap = new HashMap<String, Field>();
for (int i = 0; i < evaluator.getInputFields().size();i++) {
  InputField curInputField = evaluator.getInputFields().get(i);
  String fieldName = curInputField.getName().getValue();
  inputFieldMap.put(fieldName.toLowerCase(),curInputField.getField());
}

//prediction

HashMap<String,String> argsMap = new HashMap<String,String>();
//... fill argsMap with input

Map<FieldName, ?> res;
// here we keep only features that are required by the model
Map<FieldName,String> args = new HashMap<FieldName, String>();
Iterator<String> iter = argsMap.keySet().iterator();
while (iter.hasNext()) {
  String key = iter.next();
  Field f = inputFieldMap.get(key);
  if (f != null) {
    FieldName name =f.getName();
    String value = argsMap.get(key);
    args.put(name, value);
  }
}
//the model is applied to input, a probability distribution is obtained
res = evaluator.evaluate(args);
SegmentResult segmentResult = (SegmentResult) res;
Object targetValue = segmentResult.getTargetValue();
ProbabilityDistribution probabilityDistribution = (ProbabilityDistribution) targetValue; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-11T12:50:16.663

我发现自己处于类似的境地。我会推荐创建一个分类器微服务。您可以有一个在 python 中运行的分类器微服务，然后通过一些 RESTFul API 公开对该服务的调用，从而产生 JSON/XML 数据交换格式。我认为这是一种更清洁的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-21T17:57:05.530

或者，您可以从经过训练的模型生成 Python 代码。这是一个可以帮助您解决问题的工具[https://github.com/BayesWitnesses/m2cgen](https://github.com/BayesWitnesses/m2cgen)

# c - 没有从 C 中的 getchar 获得正确的变量赋值

> ID：12738830
> 
> 赞同：-1
> 
> 时间：2012-10-05T02:50:46.587
> 
> 标签：c, getchar, putchar

我正在编写一个简单的计算程序，但是我可以使用的唯一字符串处理函数是 getchar 和 putchar。现在我只是试图将输入中的数字分配给变量，但是当我打印变量时它是一些随机数。例如，我在控制台中输入 3，输出为 505110。任何帮助将不胜感激。谢谢你。

```
#include <stdio.h>
#include "math.h"

int addFunction( int, int);
int subtractFunction(int, int);
int multiplyFunction(int, int);
int modulusFunction(int, int);
float divideFunction(float, float);

int main(int argc, const char * argv[])
{

int iochar = 0;
char num1 = 0, num2 = 0, continuePrompt, operator = 0;

do {
    iochar = getchar();
    getchar();

    if ((iochar >= 0) && (iochar <= 20000)) {
        num1 = iochar; 
    }

    if ((iochar == '+') || (iochar == '-') || (iochar == '*') || (iochar == '/') || (    iochar == '%')) {
        operator = iochar; 
    }

    if ((num1 >= 0) || ((iochar >= 0) && (iochar <= 20000))){
        num2 = iochar;
    }

    switch (operator) {

        case '+':
            iochar = addFunction(num1, num2);
            break;

        case '-':
            iochar = subtractFunction(num1, num2);
            break;

        case '*':
            iochar = multiplyFunction(num1, num2);
            break;

        case '%':
            iochar = modulusFunction(num1, num2);
            break;

        case '/':
            iochar = divideFunction(num1, num2);
            break;

    }

    putchar(iochar);

    printf("Would you like to make another calulation? (y or n)");
    scanf("%c", &continuePrompt);

} while (continuePrompt != 'n');
return 0;
}

int addFunction(int x, int y){
    return x + y;
}

int subtractFunction(int x, int y){
     return x - y;
}

int multiplyFunction(int x, int y){
    return x * y;
}

int modulusFunction(int x, int y){
    return x % y;
}

float divideFunction(float x, float y){
    return x / y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:13:17.537

代码工作完全正确。当您在 ASCII 中输入“3”时，它实际上是十六进制值`0x33`，您将在 dec (%d) 中打印该值，因此您将`51`在输出中看到 a。

现在您无法使用输入的换行符，因此`getchar()`在第二遍时跳过输入并假设您传入了一个`'\n'`ASCII，它是十六进制的`0xa`，因此`10`接下来会打印。

您不打印任何换行符或空格，因此您将在输出中看到：

```
3 (I entered that)
5110 (the output from '3''\n') 
```

要解决主要问题，请使用换行符：

```
int main(int argc, const char * argv[])  {
    int iochar, num1, num2;  
    char continuePrompt = 0, operator;
    do {
      iochar = getchar();  // Get input from user
      getchar(); //Consume new line character 
```

当你打印这些值时，你会得到[ASCII](http://www.asciitable.com/)值，所以如果你想要 dec，你很好，如果你想要它的字符：

```
printf("%c", num1); 
```

如果你想用十六进制（0x??）

```
printf("%#x", num1); 
```

此外，我会打印一个新行或空格或更有用的东西，然后只是一个输出字符串来帮助找到这样的问题。

最后这个条件：

```
while (continuePrompt != 'no'); 
```

是错的。这不可能发生，检查'n'，你不能在单个字符中包含'no'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:55:13.290

使用`%c`代替`%d`

IE

```
printf("%c", num1); 
```

此外，您应该初始化变量。

IE

```
int iochar=0, num1=0, num2=0;
char continuePrompt = 0, operator=0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:10:01.647

由于您只允许使用`putchar`and `getchar`，因此我假设您不允许使用`printf`来呈现结果。为了使用实际数字，`putchar`您必须获取每个数字并将其转换为正确的 ASCII 值。

幸运的是，这很简单，因为

```
digitRepresentationASCIIValue == singleDigitValue + '0'; 
```

但是，这仅适用于单个数字。因此，您必须获取数字的长度并`putchar`用于每个数字。这很简单：

```
void putNumber(int num){
    int order = 1; // even zero has at least one digit
    int tmp = num; // even zero has at least one digit

    while(tmp /= 10)
        order *= 10; // count digits

   if(num < 0)
       putchar('-'); // sign

    while(order > 0){
        // put a single digit, see above how to calculate the ASCII value
        putchar('0' + ( ( num / order ) % 10));
        order /= 10;
    }
} 
```

为了实际读取值，您必须完全相反：检查提供的字符是否`getchar`是数字，并修改您当前的数字：

```
int num[2] = {0,0};
int currentNum = 0;
int iochar = getchar();

while(!isNewline(iochar) && iochar != EOF){
    if(isDigit(iochar)){
        num[currentNum] = num[currentNum] * 10 + iochar - '0';
    }
    else if(isOperator(iochar)){
        if(currentNum == 1)
            num[0] = operate(num[0],num[1],operator);
        else
            currentNum = 1;
        operator = iochar;
        num[1] = 0;
    }
    iochar = getchar();
} 
```

`isDigit`，`isNewline`并`isOperand`留作练习，这三个都非常简单，但它们会让您更好地了解 ASCII 值。`operate`包含您的`switch`陈述。

请注意，我使用了`int num[2] = {0,0};`. 这使得（除了`currentNum`）可以编写类似的东西

```
3 + 3 + 3 / 9
```

请注意，所有运算符都是从左到右计算的，因此上面示例的结果将是 1 而不是 6.3333333。

### 练习：

不要在这里发布您的解决方案，而是自己做，因为它们应该可以帮助您提高 ASCII/char 技能。对于某些练习，[ASCII 表](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)可能会有所帮助。

1.  解释为什么数字表示如此简单。提示：ASCII 中定义的数字在哪里以及按什么顺序定义？如果增加 char 的值会发生什么？
2.  实现缺失`isDigit`的`isNewline`和`isOperand`。
3.  输入的代码没有注释，尤其是这一行缺少注释：

    ```
     num[currentNum] = num[currentNum] * 10 + iochar - '0'; 
    ```

    那里究竟发生了什么？如果`num[currentNum]`目前对您来说太复杂了，只需使用 num1 并在读取第二个之前打印该值。提示：看看练习#1。

4.  即使以正确的顺序计算运算符（加法之前的乘法），结果也不会是 6.333333 而是 6。这是为什么呢？在你当前的程序中你必须改变什么？

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-05T02:53:15.627

首先，您需要从“getchar”转换输入，因为它是一个 ascii 输入。

```
 iochar = atoi(getchar()); 
```

然后您可以将其与整数值进行比较。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-05T02:59:29.360

首先，返回值`getchar`is `char`，提升为`int`。所以，请使用`char`变量来存储它。

其次，要将输入转换`char`为`int`，请使用以下内容：

```
int num1 = iochar - '0'; 
```

# android - 没有数据库锁！在安卓中

> ID：12738834
> 
> 赞同：2
> 
> 时间：2012-10-05T02:51:36.413
> 
> 标签：android, android-sqlite

我最近一直收到这个错误，我知道原因，但我不知道如何解决它。

这是来自 logcat 的错误：

```
10-05 02:34:00.177: E/SQLiteDatabase(1111): close() was never explicitly called on database '/data/data/standard.internet.marketing.mymovingfriend/databases/mymovingfriend' 
10-05 02:34:00.177: E/SQLiteDatabase(1111): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at standard.internet.marketing.mymovingfriend.SQLHandler.open(SQLHandler.java:178)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at standard.internet.marketing.mymovingfriend.ListMovingNames$1.onClick(ListMovingNames.java:71)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.view.View.performClick(View.java:3511)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.view.View$PerformClick.run(View.java:14105)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.os.Handler.handleCallback(Handler.java:605)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.os.Looper.loop(Looper.java:137)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at java.lang.reflect.Method.invoke(Method.java:511)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-05 02:34:00.177: E/SQLiteDatabase(1111):     at dalvik.system.NativeStart.main(Native Method)
10-05 02:34:00.216: E/System(1111): Uncaught exception thrown by finalizer
10-05 02:34:00.226: E/System(1111): java.lang.IllegalStateException: Don't have database lock!
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
10-05 02:34:00.226: E/System(1111):     at android.util.LruCache.trimToSize(LruCache.java:197)
10-05 02:34:00.226: E/System(1111):     at android.util.LruCache.evictAll(LruCache.java:285)
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
10-05 02:34:00.226: E/System(1111):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
10-05 02:34:00.226: E/System(1111):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
10-05 02:34:00.226: E/System(1111):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
10-05 02:34:00.226: E/System(1111):     at java.lang.Thread.run(Thread.java:856) 
```

这是活动的代码

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selectorcreatemove);

        allFunctions();
    }

    private void allFunctions() {
        addMove = (Button) findViewById(R.id.bAddMove);
        etAddMove = (EditText) findViewById(R.id.etMoveName);

        MoveList = (ListView) findViewById(R.id.lvMoveItems);
        SQLHandlerview = new SQLHandler(this);

        SQLHandlerview = new SQLHandler(ListMovingNames.this);
        SQLHandlerview.open();

        cursor = SQLHandlerview.getMove();
        startManagingCursor(cursor);

        String[] from = new String[]{SQLHandler.KEY_MOVENAME};
        int[] to = new int[]{R.id.text};

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
        MoveList.setAdapter(cursorAdapter);
        SQLHandlerview.close();

        addMove.setOnClickListener(new OnClickListener() {

            @SuppressLint("NewApi")
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String ssmoveName = etAddMove.getText().toString();
                int x = ssmoveName.length() - 1;
                if (ssmoveName.isEmpty() || Character.isWhitespace(ssmoveName.charAt(0)) || Character.isWhitespace(ssmoveName.charAt(x))) {
                    Toast.makeText(ListMovingNames.this, 
                            "Please enter a valid name! Avoid giving a blank name or white space at the beginning or end of the name", 
                            Toast.LENGTH_LONG).show();
                }else{
                    try {
                        SQLHandler check = new SQLHandler(ListMovingNames.this);
                        check.open();
                        String scheck = check.checkMove(ssmoveName);
                        check.close();
                        if (scheck.equals(ssmoveName)) {
                            Toast.makeText(ListMovingNames.this, "Move name already exist please give a different name", Toast.LENGTH_LONG).show();
                        } else{
                            SQLHandler entry = new SQLHandler(ListMovingNames.this);
                            entry.open();
                            entry.createMove(ssmoveName);
                            entry.setTodo(ssmoveName);
                            Toast.makeText(ListMovingNames.this, "Okay", Toast.LENGTH_SHORT).show();
                            entry.close();
                            Intent i = new Intent(getApplicationContext(), StartMoving.class);
                            i.putExtra("moveName", ssmoveName);
                            startActivity(i);
                        }
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        SQLHandler entry = new SQLHandler(ListMovingNames.this);
                        entry.open();
                        entry.createMove(ssmoveName);
                        entry.setTodo(ssmoveName);
                        entry.close();
                        Intent i = new Intent(getApplicationContext(), StartMoving.class);
                        i.putExtra("moveName", ssmoveName);
                        startActivity(i);
                    }
                }
            }
        });

        MoveList.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, final View view, int position,
                    long id) {
                // TODO Auto-generated method stub
                move = ((TextView) view).getText().toString();
                Intent i = new Intent(getApplicationContext(), StartMoving.class);
                i.putExtra("moveName", move);
                startActivity(i);               
            }
        });

      }
} 
```

每次调用这行代码时都会出现错误。`entry.setTodo(ssmoveName);` 这个方法调用来自我的数据库处理程序。

```
public long setTodo(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_TODOMOVE, smovename);
        cv.put(KEY_CB1, "Not Done");
        cv.put(KEY_CB2, "Not Done");
        cv.put(KEY_CB3, "Not Done");
        cv.put(KEY_CB4, "Not Done");
        cv.put(KEY_CB5, "Not Done");
        cv.put(KEY_CB6, "Not Done");
        cv.put(KEY_CB7, "Not Done");
        cv.put(KEY_CB8, "Not Done");
        cv.put(KEY_CB9, "Not Done");
        cv.put(KEY_CB10, "Not Done");
        cv.put(KEY_CB11, "Not Done");
        cv.put(KEY_CB12, "Not Done");
        cv.put(KEY_CB13, "Not Done");
        cv.put(KEY_CB14, "Not Done");
        cv.put(KEY_CB15, "Not Done");
        cv.put(KEY_CB16, "Not Done");
        cv.put(KEY_CB17, "Not Done");
        cv.put(KEY_CB18, "Not Done");
        cv.put(KEY_CB19, "Not Done");
        cv.put(KEY_CB20, "Not Done");
        cv.put(KEY_CB21, "Not Done");
        cv.put(KEY_CB22, "Not Done");
        cv.put(KEY_CB23, "Not Done");
        cv.put(KEY_CB24, "Not Done");
        cv.put(KEY_CB25, "Not Done");
        cv.put(KEY_CB26, "Not Done");
        cv.put(KEY_CB27, "Not Done");
        cv.put(KEY_CB28, "Not Done");
        cv.put(KEY_CB29, "Not Done");
        cv.put(KEY_CB30, "Not Done");
        cv.put(KEY_CB31, "Not Done");
        cv.put(KEY_CB32, "Not Done");
        cv.put(KEY_CB33, "Not Done");
        cv.put(KEY_CB34, "Not Done");
        cv.put(KEY_CB35, "Not Done");
        cv.put(KEY_CB36, "Not Done");
        cv.put(KEY_CB37, "Not Done");
        cv.put(KEY_CB38, "Not Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    } 
```

无论如何，这是我的数据库处理程序。

```
public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";
    public static final String KEY_ROOMWEIGHT = "roomweight";

    public static final String KEY_ITEMMOVEHOLDER = "itemmoveholder";
    public static final String KEY_ITEMNAME = "itemname";
    public static final String KEY_ITEMVALUE = "itemvalue";
    public static final String KEY_ROOMHOLDER = "roomholder";
    public static final String KEY_ITEMWEIGHT = "itemweight";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";
    public static final String KEY_ID3 = "_id";
    public static final String KEY_ID4 = "_id";
    public static final String KEY_MOVEDATE = "movedate";
    public static final String KEY_TOTALMOVEWEIGHT = "totalmoveweight";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_TODOMOVE = "todomove";
    public static final String KEY_CB1 = "cb1";
    public static final String KEY_CB2 = "cb2";
    public static final String KEY_CB3 = "cb3";
    public static final String KEY_CB4 = "cb4";
    public static final String KEY_CB5 = "cb5";
    public static final String KEY_CB6 = "cb6";
    public static final String KEY_CB7 = "cb7";
    public static final String KEY_CB8 = "cb8";
    public static final String KEY_CB9 = "cb9";
    public static final String KEY_CB10 = "cb10";
    public static final String KEY_CB11 = "cb11";
    public static final String KEY_CB12 = "cb12";
    public static final String KEY_CB13 = "cb13";
    public static final String KEY_CB14 = "cb14";
    public static final String KEY_CB15 = "cb15";
    public static final String KEY_CB16 = "cb16";
    public static final String KEY_CB17 = "cb17";
    public static final String KEY_CB18 = "cb18";
    public static final String KEY_CB19 = "cb19";
    public static final String KEY_CB20 = "cb20";
    public static final String KEY_CB21 = "cb21";
    public static final String KEY_CB22 = "cb22";
    public static final String KEY_CB23 = "cb23";
    public static final String KEY_CB24 = "cb24";
    public static final String KEY_CB25 = "cb25";
    public static final String KEY_CB26 = "cb26";
    public static final String KEY_CB27 = "cb27";
    public static final String KEY_CB28 = "cb28";
    public static final String KEY_CB29 = "cb29";
    public static final String KEY_CB30 = "cb30";
    public static final String KEY_CB31 = "cb31";
    public static final String KEY_CB32 = "cb32";
    public static final String KEY_CB33 = "cb33";
    public static final String KEY_CB34 = "cb34";
    public static final String KEY_CB35 = "cb35";
    public static final String KEY_CB36 = "cb36";
    public static final String KEY_CB37 = "cb37";
    public static final String KEY_CB38 = "cb38";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";
    private static final String DATABASE_TABLE3 = "movingitems";
    private static final String DATABASE_TABLE4 = "todolist";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_TOTALMOVEWEIGHT + " TEXT NOT NULL, " + 
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOMWEIGHT + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_3 = "CREATE TABLE " + DATABASE_TABLE3 + " (" + 
            KEY_ID3 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ITEMNAME + " TEXT NOT NULL, " + 
            KEY_ITEMVALUE + " TEXT NOT NULL, " +
            KEY_ROOMHOLDER + " TEXT NOT NULL, " +   
            KEY_ITEMWEIGHT + " TEXT NOT NULL, " +
            KEY_ITEMMOVEHOLDER + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_4 = "CREATE TABLE " + DATABASE_TABLE4 + " (" + 
            KEY_ID4 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_TODOMOVE + " TEXT NOT NULL, " +
            KEY_CB1 + " TEXT NOT NULL, " +
            KEY_CB2 + " TEXT NOT NULL, " +
            KEY_CB3 + " TEXT NOT NULL, " +
            KEY_CB4 + " TEXT NOT NULL, " +
            KEY_CB5 + " TEXT NOT NULL, " +
            KEY_CB6 + " TEXT NOT NULL, " +
            KEY_CB7 + " TEXT NOT NULL, " +
            KEY_CB8 + " TEXT NOT NULL, " +
            KEY_CB9 + " TEXT NOT NULL, " +
            KEY_CB10 + " TEXT NOT NULL, " +
            KEY_CB11 + " TEXT NOT NULL, " +
            KEY_CB12 + " TEXT NOT NULL, " +
            KEY_CB13 + " TEXT NOT NULL, " +
            KEY_CB14 + " TEXT NOT NULL, " +
            KEY_CB15 + " TEXT NOT NULL, " +
            KEY_CB16 + " TEXT NOT NULL, " +
            KEY_CB17 + " TEXT NOT NULL, " +
            KEY_CB18 + " TEXT NOT NULL, " +
            KEY_CB19 + " TEXT NOT NULL, " +
            KEY_CB20 + " TEXT NOT NULL, " +
            KEY_CB21 + " TEXT NOT NULL, " +
            KEY_CB22 + " TEXT NOT NULL, " +
            KEY_CB23 + " TEXT NOT NULL, " +
            KEY_CB24 + " TEXT NOT NULL, " +
            KEY_CB25 + " TEXT NOT NULL, " +
            KEY_CB26 + " TEXT NOT NULL, " +
            KEY_CB27 + " TEXT NOT NULL, " +
            KEY_CB28 + " TEXT NOT NULL, " +
            KEY_CB29 + " TEXT NOT NULL, " +
            KEY_CB30 + " TEXT NOT NULL, " +
            KEY_CB31 + " TEXT NOT NULL, " +
            KEY_CB32 + " TEXT NOT NULL, " +
            KEY_CB33 + " TEXT NOT NULL, " +
            KEY_CB34 + " TEXT NOT NULL, " +
            KEY_CB35 + " TEXT NOT NULL, " +
            KEY_CB36 + " TEXT NOT NULL, " +
            KEY_CB37 + " TEXT NOT NULL, " +
            KEY_CB38 + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        cv.put(KEY_TOTALMOVEWEIGHT, "0");
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public long setTodo(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_TODOMOVE, smovename);
        cv.put(KEY_CB1, "Not Done");
        cv.put(KEY_CB2, "Not Done");
        cv.put(KEY_CB3, "Not Done");
        cv.put(KEY_CB4, "Not Done");
        cv.put(KEY_CB5, "Not Done");
        cv.put(KEY_CB6, "Not Done");
        cv.put(KEY_CB7, "Not Done");
        cv.put(KEY_CB8, "Not Done");
        cv.put(KEY_CB9, "Not Done");
        cv.put(KEY_CB10, "Not Done");
        cv.put(KEY_CB11, "Not Done");
        cv.put(KEY_CB12, "Not Done");
        cv.put(KEY_CB13, "Not Done");
        cv.put(KEY_CB14, "Not Done");
        cv.put(KEY_CB15, "Not Done");
        cv.put(KEY_CB16, "Not Done");
        cv.put(KEY_CB17, "Not Done");
        cv.put(KEY_CB18, "Not Done");
        cv.put(KEY_CB19, "Not Done");
        cv.put(KEY_CB20, "Not Done");
        cv.put(KEY_CB21, "Not Done");
        cv.put(KEY_CB22, "Not Done");
        cv.put(KEY_CB23, "Not Done");
        cv.put(KEY_CB24, "Not Done");
        cv.put(KEY_CB25, "Not Done");
        cv.put(KEY_CB26, "Not Done");
        cv.put(KEY_CB27, "Not Done");
        cv.put(KEY_CB28, "Not Done");
        cv.put(KEY_CB29, "Not Done");
        cv.put(KEY_CB30, "Not Done");
        cv.put(KEY_CB31, "Not Done");
        cv.put(KEY_CB32, "Not Done");
        cv.put(KEY_CB33, "Not Done");
        cv.put(KEY_CB34, "Not Done");
        cv.put(KEY_CB35, "Not Done");
        cv.put(KEY_CB36, "Not Done");
        cv.put(KEY_CB37, "Not Done");
        cv.put(KEY_CB38, "Not Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public void setMoveDate(String smovedate, String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVEDATE, smovedate);
        ourDatabase.update(DATABASE_TABLE1, cv, KEY_MOVENAME + "='" + smovename + "'", null);
    }

    public void setRoomWeight(String sroomweight, String smovename, String sroomname){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMWEIGHT, sroomweight);
        ourDatabase.update(DATABASE_TABLE2, cv, KEY_ROOMMOVEHOLDER + "='" + smovename + "'" + " AND " + KEY_ROOM + "='" + sroomname + "'", null);
    }

    public void updateTodo(String todoMove, int todoName, String todoValue){
        ContentValues cv = new ContentValues();
        String[] stodo = new String[]{KEY_CB1, KEY_CB2, KEY_CB3, KEY_CB4, KEY_CB5, KEY_CB6, KEY_CB7, KEY_CB8, KEY_CB9, KEY_CB10
                , KEY_CB11, KEY_CB12, KEY_CB13, KEY_CB14, KEY_CB15, KEY_CB16, KEY_CB17, KEY_CB18, KEY_CB19, KEY_CB20
                , KEY_CB21, KEY_CB22, KEY_CB23, KEY_CB24, KEY_CB25, KEY_CB26, KEY_CB27, KEY_CB28, KEY_CB29, KEY_CB30
                , KEY_CB31, KEY_CB32, KEY_CB33, KEY_CB34, KEY_CB35, KEY_CB36, KEY_CB37, KEY_CB38};
        cv.put(stodo[todoName], todoValue);
        ourDatabase.update(DATABASE_TABLE4, cv, KEY_TODOMOVE + "='" + todoMove + "'", null);
    }

    public long todoList(String todoitem){
        ContentValues cv = new ContentValues();
        cv.put(todoitem, "Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        return cursor;
    }

    public String getTodo(String m, int tn){
        String[] columns = new String[]{KEY_ID4, KEY_TODOMOVE, KEY_CB1, KEY_CB2, KEY_CB3, KEY_CB4, KEY_CB5, KEY_CB6, KEY_CB7, KEY_CB8, KEY_CB9, KEY_CB10
                , KEY_CB11, KEY_CB12, KEY_CB13, KEY_CB14, KEY_CB15, KEY_CB16, KEY_CB17, KEY_CB18, KEY_CB19, KEY_CB20
                , KEY_CB21, KEY_CB22, KEY_CB23, KEY_CB24, KEY_CB25, KEY_CB26, KEY_CB27, KEY_CB28, KEY_CB29, KEY_CB30
                , KEY_CB31, KEY_CB32, KEY_CB33, KEY_CB34, KEY_CB35, KEY_CB36, KEY_CB37, KEY_CB38};
        Cursor c = ourDatabase.query(DATABASE_TABLE4, columns, KEY_TODOMOVE + "= '" + m + "'", null, null, null, null);

        if (c != null) {
            c.moveToFirst();
            String toDo = c.getString(tn);
            return toDo;
        }
        return null;
    }   

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T03:21:45.933

看来你从来没有靠近`ourDatabase`过`SQLHandler.close()`。

```
public void close() {
    ourDatabase.close();// may be you should add this
    ourHelper.close();
} 
```

更重要的是，我认为您应该重用 SQLHandler 对象，只需将其作为字段变量即可。问题可能是由频繁打开/关闭引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:53:00.337

我发现如果你多次使用 open() 和 close() 会有一个变化你的程序将无法处理它，所以我的建议是只创建你的 SQLiteOpenHelper open() 和 close() 的一个实例所以我所做的是我创造了一个这样的`SQLHandler`东西。

```
SQLHandler newentry = new SQLHandler(context);
newentry.open(); 
```

然后将此代码插入`onResume() and onPause()`

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        newentry.open();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        newentry.close();
    } 
```

# ruby - 好的 ruby yaml 库

> ID：12738839
> 
> 赞同：2
> 
> 时间：2012-10-05T02:52:08.703
> 
> 标签：ruby, yaml

我正在尝试读取与此类似的 yaml 文件

```
SLTs:
      - requests: 600
        concurrency: 50
        targets:
          99%: < 100
          Requests per second: > 500 
```

请注意，键“每秒请求数”中有空格。我已经阅读了 yaml.org 中的 yaml 规范，似乎没问题。

Ruby 1.9.2 带有 2 个 yaml 库 psych 和 syck。心理无法读取此文件

```
couldn't parse YAML at line 132 column 37 (Psych::SyntaxError) 
```

Syck 能够解析它，但它不能与延迟作业（我系统的另一个组成部分）一起正常工作。

我尝试了 1.9.3 并获得了类似的结果。

可以使用 YAML::ENGINE.yamler = ... 更改 YAML 的引擎，但我宁愿不为每种情况更改引擎，而是使用在两种情况下都能正常工作的库。

我搜索了它，但找不到任何东西，所以我的问题是：存在比 Ruby 标准库中更好的库来处理 YAML 吗？我只需要读取文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:10:15.763

导致问题的不是键中的空格，而是值：`> 500`。[`>`表示折叠样式的标量](http://yaml.org/spec/1.1/#>%20folded%20style/)- 错误是说后面`>`应该只有注释或换行符。

您需要转义哈希值：

```
 99%: '< 100'
 Requests per second: '> 500' 
```

# youtube-api - 检索到的视频列表与 YouTube 结果不匹配 - 不是缓存问题？

> ID：12738843
> 
> 赞同：0
> 
> 时间：2012-10-05T02:53:04.427
> 
> 标签：youtube-api

我正在使用 YouTube API 捕获视频列表的功能。我很好奇为什么 API 的响应与我在 YouTube 上看到的不匹配。我已阅读参考资料[https://developers.google.com/youtube/2.0/reference](https://developers.google.com/youtube/2.0/reference)并且我不认为这是一个缓存问题，因为相关视频已有多年历史。

例如，请考虑以下链接：[http ://www.youtube.com/results?search_query=Gramatik](http://www.youtube.com/results?search_query=Gramatik)

返回的前 10 个结果：

*   只是贾敏
*   太多的爱
*   穆伊·安基洛
*   精心策划的事件
*   液化
*   当我玩得公平的时候
*   固化
*   克服重力
*   静夜 (Gramatik Remix)
*   如此多的爱（再次，不同的视频虽然）

相比之下，请考虑以下 API 查询：[https ://gdata.youtube.com/feeds/api/videos?q=Gramatik&alt=json&prettyprint=true](https://gdata.youtube.com/feeds/api/videos?q=Gramatik&alt=json&prettyprint=true)

前 10 名结果：

*   只是Jammin'
*   太多的爱
*   穆伊·安基洛
*   液化
*   当我玩得公平的时候
*   固化
*   静夜 (Gramatik Remix)
*   如此多的爱（不同）
*   打那个 Jive
*   Cydonia 骑士 (Gramatik Remix)

为什么会出现差异？据我所知，我的查询应该返回相同的结果。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:53:37.900

服务略有不同。对于每种服务，信号的权重不同。您应该期望热门视频是相同的。

# html - CSS 中的 4 列页脚

> ID：12738847
> 
> 赞同：0
> 
> 时间：2012-10-05T02:53:40.413
> 
> 标签：html, css

我正在用 CSS 开发一个 4 列的页脚，但是在与这个搏斗了几个小时之后，有两件事我无法实现。

1）在后续三列中复制第一列的填充

2) 将垂直边框延伸整个 250px。

有没有人有任何想法？这是我的代码

[http://jsfiddle.net/FdHAR/](http://jsfiddle.net/FdHAR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:18:27.140

最好的办法是添加一个类，可能`footer-column`，您将其应用于每个`divs`. 然后把这四个`divs`放在一个`div`班级里`footer`。你的结构看起来像这样：

```
<div class="footer">
  <div class="footer-column" id="footer_column1">...</div>
  <div class="footer-column" id="footer_column2">...</div>
  <div class="footer-column" id="footer_column3">...</div>
  <div class="footer-column" id="footer_column4">...</div>
</div> 
```

显然，我们需要更改样式以使其看起来正确。

## 填充

让我们首先解决填充问题：您真正需要做的就是选择类并在其上添加一些`padding-left`内容`padding-right`。它将以这种方式自动将相同的填充应用于每个填充。此外，为了让它们并排出现，我们需要`float`它们。这样的事情会做：

```
.footer-column {
  float: left; // Push the div as far up-left as it can be put 
  width: 25%; // Make sure to subtract the padding
  padding: 10px; // We want padding on all sides to make things look nice
} 
```

现在已经完成了，让我们修复边界。

## 垂直边框

这有点困难，除非您知道页脚的整体高度。无论哪种方式，我们都可以使用 CSS 选择器`:first-child`来应用边框。这应该这样做：

```
.footer-column {
  ...
  border-left: 1px solid black; // Whatever border you want goes here.
}

.footer-column:first-child {
  border-left: none;
} 
```

如果您知道页脚的高度，则可以强制该高度，并且边框会正常工作。

```
.footer-column {
  ...
  height: 250px; // Force the box to be 250px tall
} 
```

如果您不知道页脚的高度，则必须使用其他样式和可能的 javascript。但我假设你这样做，因为你在问题中陈述了一个特定的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:08:49.647

你想使用`display: table`和`display: table-cell`：http: [//jsfiddle.net/FdHAR/3/](http://jsfiddle.net/FdHAR/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:25:14.340

1) 添加

```
padding-left: 15px; 
```

to #col2,3,4 将文本移出垂直白条。您可能需要使用该值来获得您正在寻找的确切间距。

2）添加高度：250px；到 #container4 以使其大小合适。

警告：这是在对 safari 进行了几分钟调整之后——您的浏览器可能会有所不同......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T03:37:23.523

玩了一下，我认为这更接近您想要的，并且应该在浏览器中运行良好。我建议在页脚上使用固定宽度或最小宽度（`<footer>`是 html5）。

[jsFiddle](http://jsfiddle.net/FdHAR/4/)

一些建设性的反馈：

*   尝试尽可能多地结合你的风格。无需跨相似元素重新编写和重新设置填充等。
*   你有 div，在 div 里面，但是却把它们当作列。一种更简单的方法是使用列表并将每个列表项视为一列。如果你想做 div，那么不要把它们放在一起。
*   我喜欢使用 em 来设置字体大小或行高，但使用 px 来设置其他任何东西。（个人喜好，有道理，因为它是您通常工作的屏幕）
*   尝试仅设置 1 或 2 个特定的严格尺寸，然后使用其中的百分比。一个好的想法是将页脚字体大小设置为 1.2em，然后 h1 可以是字体大小的 130%，更小的可以是 80%。这也适用于宽度等（每列是父级的 25%）。
*   一个 jsFiddle 提示，你不需要把整个 html 文档放在那里，只是你想要摆弄的部分，对于 css 和 jquery 一样，删除 ,.

# php - Jquery提交没有发布任何东西

> ID：12738848
> 
> 赞同：0
> 
> 时间：2012-10-05T02:54:00.540
> 
> 标签：php, jquery, forms, yii

我有一个表单，我想使用 jQuery 来更改它的操作并将其发布到另一个 php。

这就是我所做的......它一直告诉我我没有发布任何东西......我确实提交了表格并发布了它。

我的脚本：

```
<script>
function facebook(){
$("#first-form").attr("action", "/yiiauth/default/authenticatewithfacebook");
$('#first-form').submit();
}

function gmail(){
$("#first-form").attr("action", "/yiiauth/default/authenticatewithgoogle");
$('#first-form').submit();
}
</script> 
```

我的 php 来处理这个表单：

```
 public function actionAuthenticatewithfacebook($provider="facebook") {

        $hybridauth_config =Yiiauth::hybridAuthConfig();

        $error = false;
        $user_profile = false;
        try{
        // create an instance for Hybridauth with the configuration file path as parameter
            $hybridauth = new Hybrid_Auth( $hybridauth_config );

            $adapter = $hybridauth->authenticate( $provider );
            $user_profile = $adapter->getUserProfile();

        }
        catch( Exception $e ){
            // Display the recived error
            switch( $e->getCode() ){ 
                case 0 : $error = "Unspecified error."; break;
                case 1 : $error = "Hybriauth configuration error."; break;
                case 2 : $error = "Provider not properly configured."; break;
                case 3 : $error = "Unknown or disabled provider."; break;
                case 4 : $error = "Missing provider application credentials."; break;
                case 5 : $error = "Authentification failed. The user has canceled the authentication or the provider refused the connection."; break;
                case 6 : $error = "User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again."; 
                         $adapter->logout(); 
                         break;
                case 7 : $error = "User not connected to the provider."; 
                         $adapter->logout(); 
                         break;
            } 

        }

        // workOnUser returns an user object
        if ( is_object ($user_profile) ){
        $user = $this->workOnUser($provider,$user_profile->identifier); 
            if ( $this->autoLogin($user) ){

if (Yii::app()->user->returnUrl === Yii::app()->request->scriptUrl)
                {
                        if (isset($_SERVER['HTTP_REFERER']))
                        {
                                Yii::app()->user->setReturnUrl($_SERVER['HTTP_REFERER']);
                        }
                }
else{
Yii::app()->user->setReturnUrl('');
}

       if(isset($_POST['Prequestions'])|| isset($_POST['Prequestions[name]']))
       {
       $questions = new Questions;
       $questions->attributes=$_POST['Prequestions'];
       $questions->save();

       }else{
       throw new CHttpException(404,"Whoops, sorry we can't find the page you requested.");
}

$returnUrl = Yii::app()->user->returnUrl;
Hybrid_Auth::redirect($returnUrl);  

                }else{
                    // this is where u go otherwise
                    $this->render('authenticatewith',array('error'=>$error,'user_profile'=>$user_profile ) );
                    }
            }else{
                    echo "Something wrong with ".$provider;
                }
} 
```

这是我表格中的一个示例....

```
<label for="Prequestions_name">Title</label>
<input id="title" type="text" value="" name="Prequestions[name]" style="width:420px;" maxlength="256" size="256"> 
```

....现在它确实重定向到我的 actionAuthenticatewithfacebook，但没有向它发布任何内容....

# javascript - 低延迟 websocket html 5 游戏的数据包大小

> ID：12738853
> 
> 赞同：4
> 
> 时间：2012-10-05T02:55:08.530
> 
> 标签：javascript, html, node.js, websocket, socket.io

我正在制作一个 HTML 5 国际象棋游戏。我用一个长度（大小）为 64 的无符号 8 位二进制数组来表示棋盘。因为国际象棋棋盘上有 64 个位置。

```
var board = Uint8Array(64); 
```

每个棋子通过（显然）8 位无符号整数在棋盘上表示。然后在客户端上，有一个将片段的二进制表示与文本字符串相关联的映射，例如：

```
var pieceMap = { 01: 'BlackKnight', 112: 'WhitePawn', 6: 'BlackRook' ... } 
```

数据是通过socket.io连接发送的（假设我们使用的是websockets），我认为是TCP吗？所以问题是： **TCP 是否会发送与我提供给它的数据一样小的数据包（带有 TCP 开销）或者 TCP 是否具有最小数据包大小并将我的 200 字节数据包作为 1024 字节数据包发送？**

为什么如此痴迷于尺寸？我知道这没关系，但我将其用于学习体验，在未来的游戏中我将使用它来降低延迟......我知道国际象棋不需要低延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:20:54.573

成帧的数据包，根据 RFC 的指示：

[https://www.rfc-editor.org/rfc/rfc6455#section-5](https://www.rfc-editor.org/rfc/rfc6455#section-5)

每条消息的开销最多为 10 个字节，或者每个消息片段更少。每个片段发送多少字节由有效载荷长度（帧的一部分）决定。不过，片段可能非常大。除非您发送非常大的消息，否则我认为这不是问题。

根据成帧和分片的工作方式，如果成帧 + 数据仅在 100 字节左右，则不应发送/接收 1024 字节的数据。

我的猜测是，某些实现可能会有细微的差别，但你不应该过多关注这样的细节，除非你开始看到我们的应用程序存在压力问题。

## “过早的优化是万恶之源” Donald Knuth

另一个细节：如果你真的想要非常低的延迟，你就必须开始研究使用 UDP 或多播之类的东西。问题是：websockets 不支持这些。减少数据包大小对于网络来说并不是唯一重要的事情，而只是其中的一部分……根据我对 socket.io 的经验，CPU 成为带宽之前小消息的瓶颈，RAM 也可能会受到很大的打击在带宽之前以及当消息处于低千位时。当然，这完全取决于您的应用程序，我只是在谈论经验经验。

# javascript - 如何只附加一次ajax数据？

> ID：12738855
> 
> 赞同：0
> 
> 时间：2012-10-05T02:55:08.610
> 
> 标签：javascript, jquery

当用户选择下拉菜单时，我正在尝试将新返回的数据附加到我的选择标签

```
obj.prototype.getText=function(){
    codes....
    call ajax....

             ajax.callback=function(data){
                   $('#option').append(data);
            }

        }

$('#dropdown').on('change', function(){
    obj.getText()
}) 
```

我的问题是我只想在用户第一次单击下拉菜单时附加数据。只要用户不断单击下拉菜单，我的代码就会继续将更多相同的数据附加到我的#option...

有没有办法解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:59:52.740

使用`.one()`而不是`.on()`. 一旦触发事件一次，它就会自行解除绑定：

```
$('#dropdown').one('change', obj.getText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:58:23.113

您可以简单地删除 on change 事件，因此不再触发它。

```
$('#dropdown').off('change'); 
```

我还会研究“运行一次”命令的概念。这不是我在这里真正推荐的，但展望未来，知道这是一件很酷的事情。underscore.js[做得很好](http://underscorejs.org/docs/underscore.html#section-64)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:57:31.590

您需要[关闭](http://api.jquery.com/off/)处理程序。

像这样的东西。

```
$('#dropdown').on('change', function(){
    obj.getText()
    $('#dropdown').off('change');
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T02:59:58.313

这可能是最好的方法，轮到事件处理程序，或者您可以始终将布尔值存储在隐藏字段中，例如

```
 <input type="hidden" id="hidAleadyAppended" /> 
```

然后在附加一次后将其设置为true。

这样，如果您需要知道它是否已经附加在其他代码中，这是一种快速可靠的检查方法

# c# - 多线程 - 新线程与线程池

> ID：12738856
> 
> 赞同：1
> 
> 时间：2012-10-05T02:55:11.773
> 
> 标签：c#, threadpool

我在几个博客中读到，我们应该为长时间运行或阻塞任务创建自己的线程，而不是从线程池中消耗。

我的问题：如果我将 setmaxthreads 设置为 250 并且我有 25 个长时间运行的任务，我还应该创建自己的线程吗？我还有其他小任务的剩余线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:59:22.247

如果它们是长时间运行的任务，则*根本不*应该使用 ThreadPool。你真的不应该通常调整线程池设置；当然不能避免这种情况。请注意，线程池大小受到限制是有原因的；一次运行太多线程也是一件坏事。

所以，让 ThreadPool 做它应该做的事情，并为你的长时间运行的任务创建你自己的线程。（假设您没有创建数十个或数百个这些；在这种情况下，您会遇到不同的问题）

# xml - 从 XML 加载 OOP 结构--如何设计代码

> ID：12738864
> 
> 赞同：3
> 
> 时间：2012-10-05T02:55:39.480
> 
> 标签：xml, oop

我有一个由许多类组成的结构，有点像这样：

*   文档
    *   轨道（每个文档可以有多个轨道）
        *   剪辑（每个轨道可以有多个剪辑）
    *   （未来可能会增加其他类型）

我将这些文档存储为 XML，如下所示： <Document><Track><Clip>...</Clip></Track></Document>

在每个类中，我都有一个**toXML()**方法，它以 XML 形式描述其内容。**Document::toXML()**负责对其子级调用**toXML()**并组合结果。这样，在我看来，节省是非常微不足道的并且很容易扩展。

但是现在我在如何设计加载代码方面遇到了麻烦。

我能想到的方法有两种：

**1： Document::fromXML()**中的巨大 if 语句，类似于：

```
// Pseudo code
for each element {
   if element.name == "Track" createTrack(element)
   if element.name == "Clip" createClipOnLastTrack(element)
   // .. more statements for new types
} 
```

2：一个“加载器”类，它保留所有类型的加载方法，例如：

```
// Track.fromXML will be responsible for calling Clip.fromXML
Loader.register("Track", &Track.fromXML)
Loader.register("OtherType", &OtherType.fromXML)
// More register() calls for new types

for each element {
   // Call appropriate method based on tag name
   Loader.load(element.name, element)
} 
```

我不太喜欢#1，感觉很笨拙。#2 感觉更好，但我不确定它是否是一个好的设计。

是吗？是否有其他一些常见/流行的方式将 XML 文档转换为一组实际的对象实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:53:25.420

根据我对您问题的了解，我认为第一种方法是合理的。第二种方法似乎比必要的更复杂，除非您确信映射将始终保持简单并且您将进行大量映射更改。

不过，为了给出更全面的答案，我将介绍三种我会在您的职位上考虑的方法。每种方法都因耦合性和复杂性而异，其中两种您已经基本介绍过，但我将进一步充实。我不认为它们中的任何一个是“权威解决方案”，因为我不知道您的问题的全部范围，但我认为它们值得一提。

* * *

**我会考虑的最高耦合、最简单的方法**是、 和中的一组静态工厂函数`Document`，这基本上是您提到的第一个选项。*我*还没有看到这种方法被大量使用，但其他开发人员可能已经使用过。它对我有一种 Ruby/感觉（这不是判断，只是一个随机的想法）。`Track``Clip`*`ActiveRecord`*

 *```
//all examples are C++ish pseudo-code
Document* Document::fromXML(SomeXMLStream* stream) { 
    Document* doc = new Document();
    //read the details specific to Document, populate *doc

    //for each <Track> child in the stream...
    Track* track = Track::fromXML(stream);
    //add the track to *doc

    return doc;
}

Track* Track::fromXML(SomeXMLStream* stream) { 
    Track* track = new Track();
    //similar steps here

    //for each <Clip> child in the stream...
    Clip* clip = Clip::fromXML(stream);
    //and so on

    return track;
}

//similar code for Clip::fromXML(...) 
```

高耦合（即了解 XML 的类）为您提供了将逻辑放在`fromXML`逻辑旁边的优势，`toXML`因为将编写器和读取器定义在同一个地方是合理且方便的。XML 布局的更改需要进行两项更改（一项在 中`fromXML`，另一项在 中`toXML`），但更改发生在一个文件中。

这种方法的缺点与`toXML`在类本身中编码所带来的缺点相同：您最好喜欢 XML 的原样，因为它将是硬编码的。但是，如果您致力于您的`toXML`实施，我认为与`fromXML`.

* * *

**我将考虑的第二种方法**引入了反序列化器（或映射器或编组器或您喜欢称它们的任何名称）作为 XML 的仲裁器。XML 和模型之间的耦合从`Document`、`Track`、`Clip`和 移到这些反序列化器中。我已经看到这种方法经常“在现场”用于手写和自动生成的代码。

```
Document* DocumentDeserializer::fromXML(SomeXMLStream* stream) {
    Document *doc = new Document();
    //read the details specific to Document, populate *doc

    //for each <Track> child in the stream...
    Track* track = TrackDeserializer::fromXML(stream);
    //add the track to *doc

    return doc;
}

//similar code for Track and Clip 
```

这种方法的明显缺点是，现在您在类中编写 XML，`toXML`但使用反序列化器读取它，因此对 XML 布局的更改意味着对两个类的更改。如果`toXML`被移动到同一个类（可能称为 classes `<ModelClassName>XMLMapper`），这个缺点就消失了。

这种方法的一个小缺点是它使模型类和 XML 的同步变得更加复杂，因为每次更改都需要修改一对文件（模型类和反序列化器类）。仅仅从模型类中获取 XML 代码可能是值得的。

从这种方法中获得的解耦简化了模型类，并允许您在未来的输入和输出方面具有更大的灵活性，例如使用 XML 以外的东西来存储和传输对象。它还将特定于 XML 的代码封锁在自己的文件集中。

* * *

**我考虑的最低耦合、最复杂的方法**类似于刚才提到的反序列化器/映射器方法，但映射细节以更具声明性的方式抽象出来——类似于您的第二种方法。`luabind`我已经看到在其他“C++ 到脚本语言”映射中使用了这种方法。

```
void DocumentDeserializer::configureDeserializer() { 
    //XMLMapping<T> is a templated mapping class that 
    //maps an element name to a field of T and deserializer function.
    XMLMapping<Document>::registerElementMapping("track", &Document::tracks, &TrackDeserializer::fromXML); 

    //Example of registering a new element that doesn't need a special deserializer.
    XMLMapping<Document>::registerElementMapping("name", &Document::name);

}

Document* DocumentDeserializer::fromXML(SomeXMLStream* stream) {
    Document *doc = new Document();

    //Allow the mapper to handle the details.
    XMLMapping<Document>::map(stream, doc);
    return doc;
 }

//similar code for Track and Clip 
```

XML 和模型类之间的耦合仍然存在于代码中，但现在它在一个地方（ ）声明`configureDeserializer`并在另一个地方（ ）执行`fromXML`。这种分离简化了以后添加新元素的过程，因为现在只需在映射列表的末尾添加一行。

缺点是未知的数量，`XMLMapping<T>`类：它必须处理多少复杂性？它应该处理 getter 和 setter 方法还是直接与字段对话？它如何处理具有特殊格式的字符串值，比如日期？如果需要读取两个元素来填充一个字段，或者一个元素填充两个字段怎么办？尽管映射方法*可能*很方便，但要使其工作可能需要很长时间，而且在前两种方法中易于编码的案例可能很难在这种方法中转换为映射。

* * *

所以这是我会考虑的三种方法。基于这些，您可以提出很多替代方案（例如，使用像 Lua 这样的脚本语言来管理第二种方法中的映射），我敢肯定有一些我没有考虑过的方法，但是我希望这仍然可以让您思考一些问题，并且您最终能够找到自己满意的解决方案。*

# android - 如何获取在android的主屏幕启动器中找到的所有已安装快捷方式的列表

> ID：12738865
> 
> 赞同：13
> 
> 时间：2012-10-05T02:55:40.090
> 
> 标签：android, icons, shortcut, android-launcher

我想以编程方式获取主屏幕启动器中所有已安装快捷方式的列表。我在网上找到了很多片段，但没有一个提供正确的输出

对于这个片段：

```
Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);
ArrayList<Intent> intentList = new ArrayList<Intent>();
Intent intent=null;
String launchers="";
final PackageManager packageManager=getPackageManager();
for(final ResolveInfo resolveInfo:packageManager.queryIntentActivities(shortcutsIntent,   0)) {
launchers=launchers+"\n"+resolveInfo.activityInfo.packageName;
intent=packageManager
         .getLaunchIntentForPackage(resolveInfo.activityInfo.packageName);
intentList.add(intent);    
} 
```

这仅提供预设的快捷方式，如联系人、浏览器等。不完全是在主屏幕中找到的内容。

而这个片段：

```
 PackageManager pm = getPackageManager();
    Intent i = new Intent("android.intent.action.MAIN");
    i.addCategory("android.intent.category.HOME");
    List<ResolveInfo> lst = pm.queryIntentActivities(i, 0);
    if (lst != null) {
       for (ResolveInfo resolveInfo : lst) {  
           }
       }
    } 
```

仅提供默认启动器 com.android.launcher。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T10:38:12.020

我的回答可能会迟到，但可能对其他人有用。

检查我的代码：

```
if (Build.VERSION.SDK_INT <8) 
{ 
url = "content://com.android.launcher.settings/favorites?Notify=true"; 
} 
else 
{ 
url = "content://com.android.launcher2.settings/favorites?Notify=true"; 
} 

ContentResolver resolver = getContentResolver(); 
Cursor cursor = resolver.query (Uri.parse(url), null, null, null, null); 
```

# java - 通过堆栈跟踪进行 Java 反射

> ID：12738866
> 
> 赞同：1
> 
> 时间：2012-10-05T02:55:48.683
> 
> 标签：java, reflection, stack-trace

在 Java 中，可以编写如下代码来查询堆栈：

```
StackTraceElement[] stack = Thread.currentThread().getStackTrace();
for (StackTraceElement frame : stack) {
    System.out.println(frame.getClassName() + "." + frame.getMethodName());
} 
```

是否可以获得堆栈的反射视图，而不仅仅是获取类和方法的名称，而是获取类和方法实例？如果一个类中的两个方法共享一个名称（具有不同的参数），我可以在堆栈上区分它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:58:01.430

这`Class`很容易。使用[`Class.forName(String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)：

```
StackTraceElement[] stack = Thread.currentThread().getStackTrace();
for (StackTraceElement frame : stack) {
    String fqcn = frame.getClassName();
    Class<?> clazz = Class.forName(fqcn);
} 
```

> 如果一个类中的两个方法共享一个名称（具有不同的参数），我可以在堆栈上区分它们吗？

我不这么认为，因为返回的方法名称`StackTraceElement#getMethodName()`不包含参数编号和类型信息，这是您需要区分具有相同名称的方法的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T03:06:35.360

> 是否可以获得堆栈的反射视图，而不仅仅是获取类和方法的名称，而是获取类和方法实例？

您可以`Class`通过调用`Class.forName`类字符串来获取实例；见马特鲍尔的回答。（嵌套/内部/匿名类可能有点棘手......）

> 如果一个类中的两个方法共享一个名称（具有不同的参数），我可以在堆栈上区分它们吗？

仅当您拥有源代码时，您的应用程序才会使用调试信息进行编译，并且它能够解析它以找出哪些行号对应于哪些方法重载。最后一个需要大量的工作来实现，而且计算成本很高。

（这种方法也存在理论上的问题。可以在一行上编写具有多个方法重载的 Java 源代码。如果这样做，将无法将方法与堆栈跟踪中的信息区分开来。）

# vb.net - 将其启用属性设置为 false 时的组合框问题

> ID：12738870
> 
> 赞同：0
> 
> 时间：2012-10-05T02:57:07.170
> 
> 标签：vb.net, combobox

程序员们，我有以下问题，但让我向您解释一下我的应用程序当它更改为 False 时，但我有一个问题，就在我单击 Combo 它被锁定的那一刻，我的意思是属性更改为 False，我有以下代码。

```
Private Sub cbResp1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cbResp1.Click

    Select Case cbResp1.Text
        Case Is = "Buena"
            Correctas = Correctas + 1
        Case Is = "Mala"
            Correctas = Correctas
    End Select

    Me.cbResp1.Enabled = False

End Sub 
```

希望你能帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:19:19.577

让我告诉你，我已经修好了！看看这个事件。问题是我试图在它被点击时锁定它，但我不得不在 SelectedIndexChanged 事件中对锁定进行编程。感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:17:24.623

尝试这个...

```
Private Sub cbResp1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cbResp1.Click
    Select Case cbResp1.Text
        Case "Buena"
            Correctas = Correctas + 1
            Me.cbResp1.Enabled = False
        Case "Mala"
            Me.cbResp1.Enabled = False
    End Select
End Sub 
```

# apache - Apache没有连接，因为目标机器拒绝它

> ID：12738874
> 
> 赞同：0
> 
> 时间：2012-10-05T02:57:32.940
> 
> 标签：apache, ubuntu, apache2

我的本地网络上有一个 apache 服务器。但是，我收到错误消息：无法建立连接，因为目标机器主动拒绝了它 192.168.1.*。

我也尝试在我的服务器上使用 wget localhost ，即使这样也得到目标机器主动拒绝连接的错误。

我已经停止了shorewall、ufw、denyhosts 和ossec 服务，但仍然没有运气。关于其他尝试的任何想法？

会不会是我的 ISP 封锁了 80 端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:20:01.660

看看你有没有类似的东西

```
<Location /server-status>
    SetHandler server-status
    Order Allow,Deny
    Deny from  192.168.16.100
    Allow from 192.168.16.0/24
</Location> 
```

不需要全盘否定。事实上它会搞砸，因为一切都会匹配所有，因此被拒绝（我认为 Apache 正试图变得聪明并做一些愚蠢的事情）。我一直发现 Apache 的 Order、Allow 和 Deny 指令令人困惑，因此请始终将表格中的内容可视化（取自文档）：

```
Match      | Allow,Deny result   | Deny,Allow result
-------------------------------------------------------
Allow only | Allowed             | Allowed
Deny only  | Denied              | Denied
No match   | Default: Denied     | Default: Allowed
Match both | Final match: Denied | Final match: Allowed 
```

通过以上设置：

来自 192.168.16.100 的请求得到“同时匹配”并因此被拒绝。来自 192.168.16.12 的请求得到“仅允许”，因此被允许。来自 123.123.123.123 的请求得到“不匹配”并因此被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:36:53.953

我想通了...它与zend-server有关。我卸载了它并重新启用了 php5 和 apache2 并且它正在工作。

# ms-access - MS Access 查询-字符串聚合

> ID：12738877
> 
> 赞同：0
> 
> 时间：2012-10-05T02:58:18.100
> 
> 标签：ms-access

在 MS Access 中寻找以下问题的查询-

以下是我的数据集，其中最后一行在 Value 列中为 NULL。此外，通过对每个 Name+Office+Person+Category 执行 Max(Value)，我提取了这些数据以避免多行具有值

```
ID  Name    Office  Person  Category    Value
1   FMR    Americas Ben       Global    7
1   FMR    London   Ben       Global    5
1   FMR    London   Ben       Overall   4.2
156 Asset  London   Ben       Global    13
156 Asset   London  Ben       Overall   
157  WSR    Paris   Zen       Global      2 
```

我的预期结果集如下 - 我期待交叉标记或任何指示 ID、姓名、办公室、人员组合具有全局/总体类别值或不在单行中的值。我知道它有点类似于“字符串聚合”

```
ID  Name    Office  Person  Global  Overall
1   FMR     Americas Ben      X 
1   FMR     London   Ben      X       X
156 Asset   London   Ben      X 
157  WSR    Paris    Zen      X 
```

感谢您的投入..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:03:54.353

首先，获取唯一 id/name/office 组合的列表：

```
SELECT DISTINCT ID, Name, Office, Person
FROM TableName 
```

接下来，为每个类别创建子查询： 对于全局：

```
SELECT ID, Name, Office, Person
FROM TableName
WHERE Category="Global" 
```

对于整体：

```
SELECT ID, Name, Office, Person
FROM TableName
WHERE Category="Overall" 
```

最后，将子查询左连接到主查询，并使用表达式显示 X：

```
SELECT DISTINCT ID, Name, Office, Person
    Iif(Global.ID Is Not Null, "X") AS IsGlobal,
    Iif(Overall.ID Is Not Null, "X") AS IsOverall
FROM (TableName
LEFT JOIN (
    SELECT ID, Name, Office, Person
    FROM TableName
    WHERE Category="Global"
) AS Global 
ON TableName.ID=Global.ID
    AND TableName.Name=Global.Name
    AND TableName.Office=Global.Office
    AND TableName.Person=Global.Person)
LEFT JOIN (
    SELECT ID, Name, Office, Person
    FROM TableName
    WHERE Category="Overall"
) AS Overall
ON TableName.ID=Overall.ID
    AND TableName.Name=Overall.Name
    AND TableName.Office=Overall.Office
    AND TableName.Person=Overall.Person 
```

将子查询另存为 Access 查询并按名称引用已保存的查询，而不是在此查询中包括整个子查询，可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:30:50.910

我玩了一下这个。我创建了两个选择查询全局和总体

全球的

从 [YourTable] WHERE Category="Global" AND 值不为空时，选择 ID、姓名、办公室、人员、类别作为全球

全面的

从 [YourTable] WHERE Category="Overall" AND Value IS NOT NULL 中选择 ID、姓名、办公室、人员、类别作为整体

然后我创建了一个新查询来加入选择查询

选择 g.ID、g.Name、g.Office、g.Person、Global、Overall 从全局 g LEFT JOIN 整体 o ON g.ID = o.ID AND g.Name = o.Name AND g.Office = o。办公室 AND g.Person = o.Person

希望这可以帮助。

# python - 何时或为什么在 Python 中使用相对导入

> ID：12738889
> 
> 赞同：29
> 
> 时间：2012-10-05T02:59:32.037
> 
> 标签：python, import, module, package

是否有关于何时在 Python 中使用相对导入的任何规则或指南？我一直在使用它们，就像在 Flask Web 框架中一样。在搜索这个主题时，我只看到关于如何使用相对导入的文章，但没有看到*为什么*。

那么使用是否有一些特殊的好处：

```
from . import x 
```

而不是：

```
from package import x 
```

此外，我注意到[一个相关的 SO 帖子](https://stackoverflow.com/a/5811548/1918127)提到不鼓励相对导入。然而人们仍然继续使用它们。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-05T03:03:28.260

查看[PEP 328 关于相对进口的部分](http://www.python.org/dev/peps/pep-0328/#rationale-for-relative-imports)

理由似乎是这样写的：

> 介绍了几个用例，其中最重要的是能够重新排列大包的结构而无需编辑子包。此外，包内的模块在没有相对导入的情况下无法轻松导入自身。

# c# - 无法在asp.net C#中将数据插入数据库

> ID：12738890
> 
> 赞同：1
> 
> 时间：2012-10-05T02:59:34.653
> 
> 标签：c#, asp.net, sql-insert

我是 C# 编程的新手，所以如果有人可以帮助我，我将不胜感激。我知道有类似的问题，但我仍然找不到我的问题的解决方案。我正在开发一个模拟系统，当用户购买产品时，系统将存储所有交易细节。问题是，我无法将数据插入数据库。这是代码：

```
using (SqlConnection conn = new SqlConnection
    (ConfigurationManager.ConnectionStrings["database"].ConnectionString))
{
    string QueryA = "@Insert into TransDetails(AccountNumber,Amount,Provider" 
        + ",Mobile Number,TransNum,TransDate, Status) "
        + " Values (@AccountNumber,@Amount,@Provider,@Mobile Number," 
        + "@TransNum,@TransDate,@Status";

    using (SqlCommand cmd = new SqlCommand("InsertRecord", conn))
    {
        conn.Open();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = QueryA;
        cmd.Parameters.AddWithValue("@AccountNumber", acc.Text);
        cmd.Parameters.AddWithValue("@Amount", lblAmount.Text);
        cmd.Parameters.AddWithValue("@Provider", lblProvider.Text);
        cmd.Parameters.AddWithValue("@Mobile Number", lblNumber.Text);
        cmd.Parameters.AddWithValue("@TransNum", lblTrans.Text);
        cmd.Parameters.AddWithValue("@TransDate", lblDate.Text);
        cmd.Parameters.AddWithValue("@Status", status.Text);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
        }
        catch
        {
            lblMessage.Text = "Error";
        }
        finally
        {
            conn.Close();
        }
    }
} 
```

门店流程如下：

```
 ALTER PROCEDURE InsertRecord1

    @AccountNumber int,
    @Amount nchar(10),
    @Provider nchar(10),
    @MobileNumber int,
    @TransNum nchar(10),
    @TransDate date,
    @Status nchar(10)

    AS
    Insert into TransDetails(AccountNumber,Amount,Provider,MobileNumber,TransNum,TransDate,Status) 
    Values (@AccountNumber,@Amount,@Provider,@MobileNumber,@TransNum,@TransDate,@Status)

    return 
```

非常感谢任何帮助。P/S：我不知道为什么存储过程的开头以“alter”开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:10:06.117

我可能读错了，但看起来您的存储过程根本没有使用。尝试注释掉“cmd.CommandText = QueryA;” 并替换 "cmd.CommandText = "InsertRecord1";" 并将 CommandType 更改为 StoredProcedure。

顺便说一句，QueryA 最后缺少一个括号。但是，整个事情是不必要的，因为您有一个执行相同操作的存储过程，并且几乎总是更可取的是使用存储过程而不是嵌入式 DML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:01:38.533

`Mobile Number`您必须在括号中转义

```
Insert into TransDetails(AccountNumber,Amount,Provider,[Mobile Number],... 
```

并删除你的空间`parameter`

```
...,@MobileNumber,@TransNum,@TransDate,@Status 
```

并更改命令参数中的参数名

```
cmd.Parameters.AddWithValue("@MobileNumber", lblNumber.Text); 
```

但看到你的`stored procedure`，列`Mobile Number`之间没有空格。您的查询中是否存在拼写错误`QueryA`？如果是，则删除其上的空格（*也在参数名称上*）

```
Insert into TransDetails(AccountNumber,Amount,Provider,MobileNumber,... 
```

或者

将您的更改`CommandType.Text`为`CommandType.StoredProcedure`并删除此行，

```
cmd.CommandText = QueryA; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:06:53.920

您使用了错误的`SqlCommand`构造函数重载。根据 MSDN：

> new SqlCommand(string, SqlConnection) 使用查询文本和 SqlConnection 初始化 SqlCommand 类的新实例。

您需要做的是将您的`CommandType`for sql 命令设置为`CommandType.StoredProcedure`and not use ，或者使用而不使用您的存储过程来`QueryA`初始化 sql 命令。`QueryA`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T03:09:44.787

你可以试试这个：

```
using (SqlConnection conn = new SqlConnection (ConfigurationManager.ConnectionStrings["database"].ConnectionString))
        {                
            conn.Open();
            SqlCommand cmd = new SqlCommand("InsertRecord1", conn);

            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.AddWithValue("@AccountNumber", acc.Text);
            cmd.Parameters.AddWithValue("@Amount", lblAmount.Text);
            cmd.Parameters.AddWithValue("@Provider", lblProvider.Text);
            cmd.Parameters.AddWithValue("@Mobile Number", lblNumber.Text);
            cmd.Parameters.AddWithValue("@TransNum", lblTrans.Text);
            cmd.Parameters.AddWithValue("@TransDate", lblDate.Text);
            cmd.Parameters.AddWithValue("@Status", status.Text);

            try
            {                        
                cmd.ExecuteNonQuery();
            }
            catch
            {
                lblMessage.Text = "Error";
            }
            finally
            {
                conn.Close();
            }
        } 
```

虽然我不使用 SQL 命令、适配器...等。访问 SQL 数据库中的数据。我更喜欢 Microsoft Data Access ApplicationBlocks，它是 Microsoft 提供的易于使用的库，用于从 SQL Server 访问数据。

**下载** 你可以在这里下载[http://download.microsoft.com/download/VisualStudioNET/daabref/RTM/NT5/EN-US/DataAccessApplicationBlock.msi](http://download.microsoft.com/download/VisualStudioNET/daabref/RTM/NT5/EN-US/DataAccessApplicationBlock.msi)

**简介** [http://www.4guysfromrolla.com/articles/062503-1.aspx](http://www.4guysfromrolla.com/articles/062503-1.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T04:24:58.190

如您所见，SQL 语句的开头有**@ 。**

此外，您并没有真正使用存储过程。

# c++ - 如何在一定数量的小数位后截断浮点数（无舍入）？

> ID：12738892
> 
> 赞同：12
> 
> 时间：2012-10-05T02:59:36.937
> 
> 标签：c++, c, printf

我正在尝试以`684.545007`2 点精度打印数字*，因为数字*在`684.54`.

当我使用

```
var = 684.545007;
printf("%.2f\n",var); 
```

它输出`684.55`，但我想得到的是`684.54`。

有谁知道我该如何纠正这个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-05T03:05:31.300

您正在寻找的是*truncation*。这应该有效（至少对于不是很大的数字）：

```
printf(".2f", ((int)(100 * var)) / 100.0); 
```

转换为整数会截断小数部分。

[`trunc`](http://en.cppreference.com/w/cpp/numeric/math/trunc)在 C++11 或 C99 中，您可以为此目的使用专用函数（来自标头`<cmath>`或`<math.h>`. 这将避免对适合整数类型的值的限制。

```
std::trunc(100 * var) / 100     // no need for casts 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T12:54:32.817

这是我的方法。它看起来很难看，但在大多数情况下确实有效，例如 var 可以大于 int，可以为零或奇怪的“-0”。但它不处理无穷大和 NaN。

```
double var = 684.545007; // or whatever
double var_trunc = var>=0\. ? floor(var*100.)/100\. : ceil(var*100.)/100.;
printf ("%g\n", var_trunc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:22:47.900

```
printf("%.2f\n", var - 0.005); 
```

# javascript - 使用 jQuery 的多个 div 创建/销毁错误

> ID：12738897
> 
> 赞同：0
> 
> 时间：2012-10-05T03:00:42.590
> 
> 标签：javascript, jquery, html, css, webkit

我有一个奇怪的但在 Webkit 浏览器上混合了 CSS3/HTML5/Javascript（虽然没有尝试过其他任何东西）。

试试这个小提琴：http: [//jsfiddle.net/tbergeron/XHQxH/](http://jsfiddle.net/tbergeron/XHQxH/)

尽可能快地将鼠标悬停在多个“图块”上，您会发现它有时会停止工作。

javascript代码是：

```
 $('.tile').one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
    var tile = this;

    // Hide Title label
    $(tile).find('.title').hide();

    var bigTileHtml = '<div class="bigTile">';
    bigTileHtml = bigTileHtml + '<div class="title">Tile Title Holy Cow Yeah</div>';
    bigTileHtml = bigTileHtml + '<div class="description">Tile description goes here.</div>';
    bigTileHtml = bigTileHtml + '</div>';

    // Create a new bigTile
    var bigTile = $(bigTileHtml).appendTo('.tiles');

    // Sets bigTile's position
    var position = $(this).position();
    bigTile.css('top', position.top + 4);
    bigTile.css('left', position.left + 4);

    bigTile.mouseout(function() {
        // Show Title label
        $(tile).find('.title').show();
        bigTile.remove();
    });

    bigTile.show();
}); 
```

对于 HTML/CSS（这对诊断不太有用），请检查我在那里链接的小提琴。

编辑：问题似乎是“webkitTransitionEnd”只被触发一次。所以下次过渡结束时，什么都不会被调用。我想知道：**有没有办法重置此行为，以便在它结束时重置并可以再次触发？**

所以要恢复，当您多次将鼠标悬停在许多瓷砖上时，它会停止显示粉红色的 div。

感谢任何可以花一些时间帮助我的人的帮助。

/汤米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:37:41.217

粉红色的 div 只显示一次，因为您的函数只为每个图块调用一次。这是因为您正在使用[one()](http://api.jquery.com/one/)事件处理程序。

您的代码执行以下操作：

*   在平铺悬停时，它会执行 CSS 动画
*   动画完成后，触发事件侦听器功能（但仅在每个图块的动画第一次结束时）
*   您的事件侦听器函数创建粉红色磁贴并向此新磁贴添加事件侦听器，以在光标离开磁贴时触发
*   当这个功能被触发时，粉红色的瓷砖被删除

所有这些都可以通过 css3 来实现。我已经更新了您的 jsfiddle 代码，以向您展示如何仅使用 css3 使用悬停和转换来执行此操作。然后，如果您愿意，可以使用一些 javascript 动态更新悬停图块的内容：http:
[//jsfiddle.net/XHQxH/9/](http://jsfiddle.net/XHQxH/9/)

# sqlite - 如何删除sqlite中的最后10条记录

> ID：12738898
> 
> 赞同：6
> 
> 时间：2012-10-05T03:00:55.943
> 
> 标签：sqlite

在 Sqlite 中，我可以知道如何删除最后 10 条记录吗？我已经编写了以下编码，但似乎根本不起作用。

```
delete from tb_news where newsid = (SELECT newsid from tb_news order by newsid asc limit 10) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T03:07:59.753

您可以使用

```
 delete from tb_news where newsid IN 
(SELECT newsid from tb_news order by newsid desc limit 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:05:05.083

将您的 SQL 语句更改为以下内容。

```
delete from tb_news where newsid IN (SELECT newsid from tb_news order by newsid DESC limit 20) 
```

旁注：sqllite 可能不支持子查询中的 LIMIT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:22:22.143

你试过了吗？

```
delete from tb_news where newsid IN (SELECT newsid from tb_news order by newsid asc limit 20) 
```

我不知道你的表结构，但也许它应该是 DESC 而不是 ASC。我的意思是 DESC 会给你最大的 ID（所以，最新的）。

# ruby-on-rails - 链接到 json 方法，“未定义的方法 `stringify_keys'”

> ID：12738900
> 
> 赞同：0
> 
> 时间：2012-10-05T03:01:32.340
> 
> 标签：ruby-on-rails, json, hyperlink, format

我有一个控制器，我想要 2 个响应，通用 html 和 json。在我看来，我想要一个指向上述 json 的链接。我在 apidoc 中看到，有人说你通过这样做来完成在 link_to 中指定格式的操作。

```
<h3><%= link_to "Indexes" , 
        params.merge({:format => "json"}) , 
       state_laws_path %></h3> 
```

但是，每次我访问此链接所在的页面（ state_laws/index.html.erb ）时，我都会收到以下错误。

```
undefined method `stringify_keys' for "/state_laws":String

Extracted source (around line #3):
1: <h2>State Laws</h2>
2: <h3><%= link_to "Create State Law", new_state_law_path %></h3>
3: <h3><%= link_to "Indexes" , 
           params.merge({:format => "json"}) , 
           state_laws_path %>    </h3>
4: <ul id="state_laws">
5:   <% @state_laws.each do |law| %>
6:       <li class="<%= cycle("odd", "even") %>"> 
```

有没有人知道如何告诉我的视图我想要一个链接，该链接将使用 json 格式转到控制器的索引操作？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:03:50.587

尝试这个：

```
<%= link_to "Indexes", state_laws_path(params.merge(:format => "json")) %> 
```

将参数传递给该`state_laws_path`方法将使其返回包含它们的 URL。例如，如果您的参数包含`{:foo => "bar"}`并且您的 state_laws_path 是`"/state_laws"`，则上述调用将返回路径`"/state_laws.json?foo=bar"`

# c# - SQL Server 或 NHibernate 截断文本

> ID：12738902
> 
> 赞同：0
> 
> 时间：2012-10-05T03:01:34.113
> 
> 标签：c#, sql-server, asp.net-mvc-3, nhibernate

我有一个 MVC 3 项目。在 sql server 中，我有一个名为 NewsContent 的字段，它是一个文本字段。

这是模型中属性的定义：

```
 [Display(Name = "Content")]
    [DataType(DataType.MultilineText)]
    [AllowHtml]
    public virtual string NewsContent { set; get; } 
```

当我将其保存到数据库时，它会被截断。那么它`Text`为什么会被截断？

我该如何解决？

我可以在调试器中看到该对象包含所有文本，当我查看数据库时它被截断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:12:21.850

尝试这个：

```
Map(x => x.NewsContent).CustomType("StringClob").CustomSqlType("nvarchar(max)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:59:47.183

在某些 NHibernate 版本中，由于底层 ADO.NET 在某些情况下具有此行为，因此会出现这种截断行为。这在 NH 3.3 中进行了更改，因此如果字符串长于允许的长度，NHibernate 将抛出异常。

以上适用于使用 MS SQL Server 作为数据库的情况。如果你正在使用这个数据库，或者在这个版本的 NHibernate 中仍然看到这个问题，应该认为是应该修复的 bug。请报告。

# sql - SQL/ORACLE 缺少关键字

> ID：12738908
> 
> 赞同：0
> 
> 时间：2012-10-05T03:02:54.267
> 
> 标签：sql, oracle, syntax, ora-00905

我正在处理一个 sql 文件，试图制作一个脚本，该脚本可以带回显示的表中的所有数据或表中的所有数据加上 3 个月的数据。我不断收到一条错误消息， `error 00905 missing keyword`但我不明白为什么。

我查看了语法，这一切对我来说都是正确的。我会在它说发生错误的地方放置一个标记（在第一个内部连接处）。我更改了所有表名以使其看起来更好，因为它超出了语法。

任何帮助都会非常感谢。这只是代码的一部分，但我确信它必须在这里。

```
WHEN Table_typ_cde = '1' -- Pulling all data --
  THEN
    INNER JOIN  Table   acp ON Table_oid = Table_oid
    INNER JOIN  Table   loss ON Table_oid = Table_oid
    LEFT OUTER JOIN Table veh ON Table_oid = Table_oid and Table_nbr=1
    INNER JOIN Table   brnch ON Table_OID = Table_oid
    INNER JOIN Table   a ON Table_OID = Table_oid
    INNER JOIN Table   c Table_OID = Table_oid
    INNER JOIN Table   s ON Table_OID = Table_oid
    INNER JOIN Table   r ON Table_OID = Table_oid
    INNER JOIN Table   grp ON Table_oid = Table_oid
    INNER JOIN Table on Table_id = Table_id
    WHERE Table_ID <> 2
 WHEN Table_cde = '2' -- Pulling all data within the last 3 months along with all present data --
 THEN
    INNER JOIN  Table   acp ON Table_oid = Table_oid
    INNER JOIN  Table   loss ON Table_oid = Table_oid
    LEFT OUTER JOIN Table veh ON Table_oid = Table_oid and Table_nbr=1
    INNER JOIN Table   brnch ON Table_OID = Table_oid
    INNER JOIN Table   a ON Table_OID = Table_oid
    INNER JOIN Table   c ON Table_OID = Table_oid
    INNER JOIN Table   s ON Table_OID = Table_oid
    INNER JOIN Table   r ON Table_OID = Table_oid
    INNER JOIN Table   grp ON Table_oid = Table_oid
    INNER JOIN Table on Table_id = Table_id
    WHERE Table_ID <> 2
    AND df.DATE_CREATED BETWEEN ADD_MONTHS(SYSDATE, -6)
    AND sysdate
END                                         
) core 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:14:06.490

你不能破坏`JOIN`using `CASE`。我在您的查询的某些部分中看到了这一点，

```
THEN
   INNER JOIN  Table   acp ON Table_oid = Table_oid
   INNER JOIN  Table   loss ON Table_oid = Table_oid 
```

这是错误的，您必须在`INNER JOIN`关键字之前提供表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:38:25.893

您有两组看似相等的连接。然后你有一个你希望有条件地应用的日期过滤器。您需要在 WHERE 子句而不是 FROM 中应用它。有些像这样

```
FROM  ... INNER JOIN  Table   acp ON Table_oid = Table_oid
    INNER JOIN  Table   loss ON Table_oid = Table_oid
    LEFT OUTER JOIN Table veh ON Table_oid = Table_oid and Table_nbr=1
    INNER JOIN Table   brnch ON Table_OID = Table_oid
    INNER JOIN Table   a ON Table_OID = Table_oid
    INNER JOIN Table   c ON Table_OID = Table_oid
    INNER JOIN Table   s ON Table_OID = Table_oid
    INNER JOIN Table   r ON Table_OID = Table_oid
    INNER JOIN Table   grp ON Table_oid = Table_oid
    INNER JOIN Table on Table_id = Table_id
WHERE Table_ID <> 2
    AND (Table_cde = '1' 
          or ( Table_cde = '2' 
          and df.DATE_CREATED BETWEEN ADD_MONTHS(SYSDATE, -6) AND sysdate )) 
```

# javascript - 旋转图像脚本不保留预设类

> ID：12738910
> 
> 赞同：0
> 
> 时间：2012-10-05T03:03:18.963
> 
> 标签：javascript, jquery, image, class, rotator

我使用脚本来旋转存储在无序列表中的各种图像。该脚本正在运行，但似乎删除了应用于特定 Li 的预设类。我希望脚本完全按照当前的方式工作，但不删除我在 Li 上设置的类。有人可以提供一些建议或修改吗？谢谢你。请参阅此处的示例小提琴：

```
http://jsfiddle.net/trobbins26/5U4Cr/5/ 
```

或以下脚本：

```
function theRotator() {
        //Set the opacity of all images to 0
        $('div.rotator ul li').css({opacity: 0.0});

        //Get the first image and display it (gets set to full opacity)
        $('div.rotator ul li:first').css({opacity: 1.0});

        //Call the rotator function to run the slideshow, 6000 = change to next image after 6 seconds

        setInterval('rotate()',4000);

        }

        function rotate() {    
        //Get the first image
        var current = ($('div.rotator ul li.show')?  $('div.rotator ul li.show') : $('div.rotator ul li:first'));

        if ( current.length == 0 ) current = $('div.rotator ul li:first');

        //Get next image, when it reaches the end, rotate it back to the first image
        var next = ((current.next().length) ? ((current.next().hasClass('show')) ? $('div.rotator ul li:first') :current.next()) : $('div.rotator ul li:first'));

        //Un-comment the 3 lines below to get the images in random order

        //var sibs = current.siblings();
        //var rndNum = Math.floor(Math.random() * sibs.length );
        //var next = $( sibs[ rndNum ] );

        //Set the fade in effect for the next image, the show class has higher z-index
        next.css({opacity: 0.0})
        .addClass('show')
        .animate({opacity: 1.0}, 500);

        //Hide the current image
        current.animate({opacity: 0.0}, 1000)
        .removeClass('show');

        };
setTimeout(function(){
        $(document).ready(function() {        
            //Load the slideshow
            theRotator();
            $('div.rotator').fadeIn(500);
            $('div.rotator ul li').fadeIn(500); // tweek for IE
        });
        }, 500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:40:41.560

这个脚本不是问题，你必须有另一个脚本剥离类。但是，我必须提到，您的列表项目前没有任何“预设”类。唯一应用的类是预期的“显示”类。正如预期的那样，此类正在被正确删除。

我已经用两个类（提供背景颜色以强调）复制了您的滑块，以证明这确实有效。我没有更改任何 jquery。

在此处查看演示：http: [//fluidev.com/stack/rotate.html](http://fluidev.com/stack/rotate.html)

# javascript - 使用 Node.js 的数据库继承模型

> ID：12738911
> 
> 赞同：5
> 
> 时间：2012-10-05T03:03:19.837
> 
> 标签：javascript, database, node.js, postgresql, inheritance

使用 Node.js 和类似 SQL 的数据库，在实现数据库继承模型时我有哪些选择？我环顾四周，似乎由于 Node.js 中 noSQL 数据库的流行，数据库继承被忽略了。

我正在尝试完成一件非常简单的事情：根据一些业务规则扩展用户表。为简单起见，我想添加属性不同的 Reader 和 Moderator 表和类。这是使用 NHibernate 在 .NET 中相对容易完成的事情。我可以在不使用将所有内容粘贴在同一张表中的情况下获得相同的结果吗？如果没有，最好的选择是什么？

顺便说一句，我通过 Sequelize 将 Node.js 与 PostreSQL 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T03:19:41.023

我还没有看到支持继承的 SQL 数据库的 ORM。即便如此，我相信由于 JS 的性质，您可能会喜欢其他机会（我当然喜欢）：

使用[jugglingdb](https://github.com/1602/jugglingdb)（我推荐的那个），再加上[underscore.js](http://underscorejs.org)（大多数 node.js 程序员应该注意的东西），你可以做如下的事情：

```
var user_common_properties = {
    name:         String,
    bio:          Schema.Text,
    approved:     Boolean,
    joinedAt:     Date,
    age:          Number
};
var User = schema.define('User', user_common_properties);

var Moderator = schema.define('Moderator', _.extend(user_common_properties, {
    power : String,
    level : Number
}));
var Reader = schema.define('Moderator', _.extend(user_common_properties, {
    lurker : Boolean
})); 
```

虽然我同意它不一样，但没有理由认为这很糟糕 :) 我认为它非常类似于 JavaScript。

此外，如果您想重用方法/验证，您可以！只需将其分配给它们（重复使用函数），或者如果您想重复使用一堆函数，请将它们添加到一个对象，然后扩展 Reader 和 Moderator 对象。例如...

```
var repeated_methods = {
    first : function () { },
    second: function () {}
};
//I want to reuse this for both User and Moderator but not for Reader...
User = _.extend(User, repeated_methods);
Moderator = _.extend(Moderator, repeated_methods); 
```

这是非常灵活的，并且允许有关系（行为），这对于横向重用非常有用。

# c# - 使用关闭函数带来的 sql 连接

> ID：12738916
> 
> 赞同：0
> 
> 时间：2012-10-05T03:04:20.917
> 
> 标签：c#

> **可能重复：**
> [在“使用”块中，SqlConnection 是否在返回或异常时关闭？](https://stackoverflow.com/questions/4717789/in-a-using-block-is-a-sqlconnection-closed-on-return-or-exception)

这会`using`关闭`_connection`吗？

```
using(SqlConnection _connection = Class1.GetSqlConnection())  
{   //code inside the connection
}

//connection should be closed/ended? 
```

我只是想知道，因为`GetSqlConnection()`它是一个静态函数，`Class1`并且整个连接可能不会关闭，因为它正在调用外部类的静态函数而不是直接调用？

```
 using(SqlConnection _connection = new SqlConnection(_connectionString)
 {   //code inside the connection
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:07:57.883

该`using`语句不关心变量如何获取其值——无论是来自静态函数、成员函数、`new`运算符还是任何其他方式。一旦`using`到达的右括号，`Dispose()`就会调用变量上的方法，如果它是一个`IDbConnection`实例，则关闭连接，或者`IDisposable`在处理时执行其他任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:13:20.767

是的，它确实。

这是实现该`GetSqlFunction`方法的另一种方法，以便您具有更明确的行为：

```
public class Class1
{
    private static SqlConnection GetSqlConnection() { /* unchanged */ }

    public static void UseSqlConnection(Action<SqlConnection> action)
    {
        using (var connection = Class1.GetSqlConnection())
        {
            action(connection);
        }
    }
} 
```

然后你这样称呼它：

```
Class1.UseSqlConnection(c =>
{
    /* use connection here */
}); 
```

然后，您可以扩展此方法以使用现有连接或创建新连接，具体取决于您喜欢的语义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:08:31.490

是的，设计使然。

当`using`块结束时，块用于处理一次性物品的处置。对`Dispose()`一个对象意味着释放该对象的所有资源。对于诸如 的对象`SqlConnection`，这将关闭它们的连接。

# card.io - 将 card.io 与基于 Web 的应用程序集成

> ID：12738918
> 
> 赞同：3
> 
> 时间：2012-10-05T03:04:33.347
> 
> 标签：card.io

我们更喜欢将基于 Web 的应用程序与 jquery.mobile 一起使用，因为它们可以按需升级，而且麻烦更少。是否有可以通过 ajax 从我们的基于 Web 的应用程序调用以使用 card.io 服务的 api？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T03:31:55.927

恐怕不是。为了提供响应迅速、可靠的用户体验，card.io 实际上会检查许多视频帧以选择高质量的视频帧进行处理。我们还在客户端处理它们，因为对于大图像，网络往返的延迟可能很重要。

这一切都需要非常重要的客户端工作。移植到 html 有两个直接的问题：(1) 性能和 (2) 相机 API。

## 表现

Javascript 解释器很快，但是在进行图像处理时，本机代码是一个巨大的帮助。（card.io 使用 GPU、ARM 矢量协处理器，并在一些地方进行组装。）通过 Canvas 访问 GPU 会有所帮助，但并非所有算法都适合 GPU 处理。随着时间的推移，性能将继续变得不那么重要，但现在这是一个重大挑战。

## 相机 API

移动浏览器对相机 API 的支持非常不均衡，并且（据我所知，在撰写本文时），没有一个主要的移动浏览器（移动 Safari、Chrome、Firefox）提供完整的实时视频访问，并且对分辨率进行了足够的控制来处理流可行。再次，希望这会改变。

我希望有朝一日会有 card.io 的移动网络版本，但它现在肯定不可用（尽管我们确实有一个 Phone Gap 插件。）

# python - 在 python 列表中随机选择

> ID：12738919
> 
> 赞同：-3
> 
> 时间：2012-10-05T03:04:36.230
> 
> 标签：python, random

我正在尝试用python制作一个日语学习程序。它将从列表中随机显示一个单词，但只显示一次，直到所有单词都被使用。显示每个单词后，用户将输入翻译。如果它错了，它会这样说，并在所有单词都用完后显示的累加器中加一个。如果它是正确的，也是如此。

我很感激有关如何**随机化单词**并**确保它们只显示一次**的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:06:17.867

> 我需要帮助的部分是随机化单词并确保它们只显示一次。

在开始之前，[将 words 列表随机化](https://stackoverflow.com/questions/1022141/best-way-to-randomize-a-list-of-strings-in-python)，然后按顺序对其进行迭代。

```
import random

words = ['foo', 'bar', 'baz', 'quux']
random.shuffle(words)

for word in words:
    # TODO prompt for translation
    print word 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:07:21.467

我对 python 不是很熟悉，所以我不知道你可用的确切语法或数据结构。我的基本想法是将成对的单词放在一个列表中（每个元素都是一对日语单词及其英文翻译），打乱列表，然后遍历列表以显示它们。

我希望这是有道理的，并有所帮助。

# python - pexpect 需要在不启动 bash shell 的情况下使用管道，因为 bash shell 不理解该命令

> ID：12738929
> 
> 赞同：0
> 
> 时间：2012-10-05T03:06:27.700
> 
> 标签：python, bash, pexpect

我想用 pexpect 做类似的事情

```
echild = pexpect.spawn('/bin/bash -c "sysinfo -v | grep "SCM"')
fout = file('/home/kiva/release_file.txt' , 'w+')
child.logfile = fout 
```

问题是我想将该命令输出到一个文本文件中，但我必须启动一个 shell，因为我们不能在 spawn() 中使用管道。bash shell 不理解 sysinfo -v 并抱怨它。

你们有什么想法或知道一种方法可以在不打开 bash 终端的情况下将所需的输出放入文件中吗？我可以通过只使用 spawn() 方法而不使用 grep 来解决问题，但我想要完全匹配，因此 grep 是必要的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:11:07.640

从您的简短示例中，我看不出为什么您特别需要使用 pexpect 来实现这一目标。我会走的`Popen`路。这是一个可能有用的链接：

[更换外壳管道 - Popen](http://docs.python.org/library/subprocess.html#replacing-shell-pipeline)

# ruby - 如何在 pry 中运行带有参数的文件

> ID：12738930
> 
> 赞同：4
> 
> 时间：2012-10-05T03:06:31.097
> 
> 标签：ruby, pry

我可以像这样启动命令行应用程序的撬动会话

```
pry -r ./todo.rb 
```

但是，如果我想调用列表函数

```
pry -r ./todo.rb list 
```

我收到一条错误消息。

不用撬，我调用列表函数

```
ruby todo.rb list 
```

这是错误信息

```
/Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/repl_file_loader.rb:16:in `initialize': No such file: /Users/michaeljohnmitchell/Sites/todo/bin/list (RuntimeError)
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/pry_class.rb:161:in `new'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/pry_class.rb:161:in `load_file_through_repl'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/cli.rb:162:in `block in <top (required)>'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/cli.rb:65:in `call'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/cli.rb:65:in `block in parse_options'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/cli.rb:65:in `each'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/lib/pry/cli.rb:65:in `parse_options'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/gems/pry-0.9.10/bin/pry:16:in `<top (required)>'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/bin/pry:19:in `load'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@global/bin/pry:19:in `<main>' 
```

**源代码**

```
TODO_FILE = 'todo.txt'

def read_todo(line)
  line.chomp.split(/,/)
end

def write_todo(file,name,created=Time.now,completed='')
  file.puts("#{name},#{created},#{completed}")
end

command = ARGV.shift

case command
when 'new'
  new_task = ARGV.shift

  File.open(TODO_FILE,'a') do |file|
    write_todo(file,new_task)
    puts "Task added."
  end
when 'list'
  File.open(TODO_FILE,'r') do |file|
    counter = 1
    file.readlines.each do |line|
      name,created,completed = read_todo(line)
      printf("%3d - %s\n",counter,name)
      printf("      Created   : %s\n",created)
      unless completed.nil?
        printf("      Completed : %s\n",completed)
      end
      counter += 1
    end
  end
when 'done'
  task_number = ARGV.shift.to_i
  binding.pry

  File.open(TODO_FILE,'r') do |file|
    File.open("#{TODO_FILE}.new",'w') do |new_file|
      counter = 1
      file.readlines.each do |line|
        name,created,completed = read_todo(line)
        if task_number == counter
          write_todo(new_file,name,created,Time.now)
          puts "Task #{counter} completed"
        else
          write_todo(new_file,name,created,completed)
        end
        counter += 1
      end
    end
  end
  `mv #{TODO_FILE}.new #{TODO_FILE}`
end 
```

**更新**

当我尝试

```
pry -r ./todo.rb -e list 
```

我收到以下错误

```
NameError: undefined local variable or method `list' for main:Object 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T03:16:49.320

来自`pry --help`：

> `-e, --exec`会话开始前在上下文中执行的一行代码

因此，如果您的`list`方法已定义`main`（如果您不知道，可能是），那么您可以这样做：

`pry -r ./todo.rb -e list`

* * *

# 更新

Pry 不允许您为它加载的脚本传递参数（或者至少它没有记录）。但一切都没有丢失，你可以`pry`从你的脚本中调用。只需将其放在您要检查的任何地方：

```
require 'pry'; binding.pry 
```

这将产生一个可以访问所有局部变量和方法的 pry 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T08:22:26.357

我认为你可以使用：
`ruby -rpry ./todo.rb -e list`

# php - 是否可以在 Fuelphp 上使用 ORM 自定义选择字段？

> ID：12738933
> 
> 赞同：0
> 
> 时间：2012-10-05T03:06:44.327
> 
> 标签：php, orm, fuelphp

当我想使用 ORM 查询表时遇到问题，例如我有带有字段 id、作者、文本的文章表。

我的代码是这样的：

```
// Single where
$article = Model_Article::find()->where('id', 4);
print_r($article); 
```

那不是代码将获取表格文章上的所有字段，就像`select * from article where id = 4`

尝试可能性

```
$article = Model_Article::find(null, array('id','title'))->where('id', 3); 
```

回应是

```
object(Orm\Query)#89 (14) {
  ["model":protected]=>
  string(10) "Model_Article"
  ["connection":protected]=>
  NULL
  ["view":protected]=>
  NULL
  ["alias":protected]=>
  string(2) "t0"
  ["relations":protected]=>
  array(0) {
  }
  ["joins":protected]=>
  array(0) {
  }
  ["select":protected]=>
  array(1) {
    ["t0_c0"]=>
    string(5) "t0.id"
  }
  ["limit":protected]=>
  NULL
  ["offset":protected]=>
  NULL
  ["rows_limit":protected]=>
  NULL
  ["rows_offset":protected]=>
  NULL
  ["where":protected]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(9) "and_where"
      [1]=>
      array(3) {
        [0]=>
        string(5) "t0.id"
        [1]=>
        string(1) "="
        [2]=>
        int(3)
      }
    }
  }
  ["order_by":protected]=>
  array(0) {
  }
  ["values":protected]=>
  array(0) {
  }
} 
```

那不是返回 id 或标题字段。

但是当我尝试添加 get_one() 方法时

```
$article = Model_Article::find(null, array('id','title'))->where('id', 3)->get_one(); 
```

id 是 return ，但 title 不是，另一个字段，我不知道为什么？

**参考**

1.  [ORM 讨论 FuelPHP](http://fuelphp.com/forums/topics/view/7076)据说 ORM 目前将选择所有列，目前没有计划改变它。

**我的问题**

1.  像这样使用 ORM 选择自定义字段`select id,owner from article where id = 4`，它将仅返回 id 和所有者，是否可以在 FUELPHP 上使用 ORM 来获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:47:59.947

不使用

```
Model_Article::find()-> 
```

但使用

```
Model_Article::query()-> 
```

第一个有效，但被认为是一种错误情况，可能会在未来的版本中发生变化。

从 1.4 版开始，ORM 支持部分选择，使用

```
Model::query()->select('id', 'value')-> 
```

find() 的第二个参数是查找条件的数组，例如 'where' 或 'order_by' 子句。不支持在此数组中选择列名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:33:33.920

Orm\Model 获取所有列，因为它无法处理不完整/部分对象。

如果您想要自定义查询，请不要使用 ORM，请使用查询构建器。

```
DB::select('id','title')->from(Model_Article::table())->where('id', 4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T07:38:51.650

如果您试图找出查询“select * from article where id = 4”之类的结果

```
$article = Model_Article::find()->where('id', 4)->get_one();

print_r($article); 
```

还有一个你应该理解的概念 get_one() 只返回一个记录（作为一个对象）。get() 返回多条记录（以对象数组的形式）。

如果您的字段未显示，请检查模型 Model_Article 。当您没有在属性列表中声明字段时，可能会出现此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:32:34.523

Fuelphp 已经发布了新版本，您可以查看此文档，在我的情况下，fuelphp 版本是 1.2，无法使用 orm 选择自定义字段。

使用 orm 选择自定义字段从 1.4 版开始可用

[http://fuelphp.com/docs/packages/orm/crud.html](http://fuelphp.com/docs/packages/orm/crud.html)

```
// Find only some columns
Model_Article::query()->select('id', 'name');
Model_Article::find('all', array('select' => array('id', 'name'))); 
```

# wolfram-mathematica - 如何为 Mathematica 8 的 DictionaryLookup 设置默认语言

> ID：12738934
> 
> 赞同：1
> 
> 时间：2012-10-05T03:06:46.230
> 
> 标签：wolfram-mathematica

Mathematica 8 的`DictionaryLookup`函数`"English"`默认用作语言。有没有办法将默认语言设置为`"BritishEnglish"`or `"Spanish"`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:17:17.200

似乎没有此选项，但您可以修改 的定义`DictionaryLookup`以适合您。

我将使用的方法依赖于 DownValues 的自动排序，并且是为版本 7 编写的，因此可能需要调整。您可以查看`DownValues[DictionaryLookup]`该函数的编写方式，因为它是顶级*Mathematica*代码。

```
$dictionaryLanguage = "Spanish";

Unprotect[DictionaryLookup];

DictionaryLookup[pat : Except[_List], x___] /;
  ! TrueQ[$dicLang] && ValueQ[$dictionaryLanguage] :=
 Block[{$dicLang = True},
  DictionaryLookup[{$dictionaryLanguage, pat}, x]
  ]

DownValues[DictionaryLookup] = 
  RotateRight @ DownValues[DictionaryLookup];

Protect[DictionaryLookup]; 
```

使用此定义，如果`$dictionaryLanguage`设置了该值，则该值将用于语言。您可以使用 恢复默认行为`$dictionaryLanguage =.`。例子：

```
$dictionaryLanguage = "Spanish";

DictionaryLookup["*orac*", 3] 
```

> {"adoración", "aminoración", "colaboración"}

```
$dictionaryLanguage =.;

DictionaryLookup["*orac*", 3] 
```

> {“coracle”、“coracles”、“Horace”}

知道你打电话也在`DictionaryLookup`. 您可以为这样的语言加载字典：

```
DataPaclets`Dictionary`ReloadDictionary["Dutch"] 
```

将数据放在`DataPaclets`Dictionary`$Dictionary`. 示例搜索：

```
Pick[#, # ~StringMatchQ~ "*fzand*"] ~Take~ 4 & @ DataPaclets`Dictionary`$Dictionary 
```

> {“afzand”、“afzandde”、“afzandden”、“afzanderij”}

等效`DictionaryLookup`查询：

```
DictionaryLookup[{"Dutch", "*fzand*"}, 4] 
```

> {“afzand”、“afzandde”、“afzandden”、“afzanderij”}

如果您经常使用这些工具，您可以在上下文路径中使用它们：

```
AppendTo[$ContextPath, "DataPaclets`Dictionary`"] 
```

然后你可以使用`ReloadDictionary`和`$Dictionary`原样，没有上下文名称。

# c# - 如何在执行完成后立即终止 sqlcmd？

> ID：12738936
> 
> 赞同：31
> 
> 时间：2012-10-05T03:07:07.017
> 
> 标签：c#, batch-file, sqlcmd

我在 C# 中创建了一个进程来执行`sqlcmd /S <servername> /d <dbname> /E /i`以运行创建表、视图、存储过程的 sql 脚本。

问题是执行完成后进程不会终止。我想知道如何在操作完成后立即终止 sqlcmd。

是否有任何我可以指定以立即终止进程的 sqlcmd 输入参数，或者我可以直接在 C# 中执行它？

**更新**

这是我用来执行该过程的 C# 代码。

```
foreach (var file in files)
{
    ////var begin = DateTime.Now;
    ////context.TrackBuildWarning(string.Format("Start exec sql file at {0}.", DateTime.Now));

    Process process = new Process();
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.RedirectStandardOutput = true;
    process.StartInfo.RedirectStandardError = true;
    process.StartInfo.CreateNoWindow = true;
    process.StartInfo.FileName = "sqlcmd.exe";
    process.StartInfo.Arguments = string.Format("-S {0} -d {1} -i \"{2}\" -U {3} -P {4}", sqlServerName, databaseName, file, sqlUserName, sqlPassword);
    process.StartInfo.WorkingDirectory = @"C:\";
    process.Start();
    process.WaitForExit(); // if I comment out this code it will execute much faster

    ////context.TrackBuildWarning(string.Format("Finished exec sql file at {0} total time {1} milliseconds.", DateTime.Now, DateTime.Now.Subtract(begin).TotalMilliseconds));
} 
```

如您所见，我有评论说，如果我删除（或评论）`process.WaitForExit()`它会执行得更快。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-02-05T15:32:44.800

只需使用 -Q （大写）。

此命令选择“asd”并立即退出： `sqlcmd -S (local) -Q "select('asd')"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-06T09:40:10.023

简单地使用这个语法：

sqlcmd -q“退出（命令）”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:41:05.527

您的 SQL 文件末尾是否有退出或退出？

有关 sqlcmd 命令，请参见[此处](http://msdn.microsoft.com/en-us/library/ms165702%28v=sql.105%29.aspx)。

# php - 使 PHP 结果全部小写

> ID：12738940
> 
> 赞同：-3
> 
> 时间：2012-10-05T03:08:00.207
> 
> 标签：php

> **可能重复：**
> [有没有办法以小写形式获取类别名称？](https://stackoverflow.com/questions/4289325/is-there-a-way-to-get-a-categorys-name-in-lowercase)

此代码当前从 MYSQL 中获取参与者数据，然后将其打印出来。

有没有办法编辑下面的代码，以便 a href 链接结果都是小写字母？

```
$TMPL['actor'] = '';
    foreach(explode(', ', $TMPL['actors']) as $v)
    $TMPL['actor'] .= '<a href="/actor/'.str_replace("+", "-", urlencode($v)). '">'.$v.'</a> <br />';       
    $actors .= $skin->make(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:09:29.113

使用 PHP 函数[`strtolower()`](http://us3.php.net/strtolower "strtolower()")。

还有[`strtoupper()`](http://us3.php.net/manual/en/function.strtoupper.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:10:23.223

```
$TMPL['actor'] = '';
    foreach(explode(', ', $TMPL['actors']) as $v)
    $TMPL['actor'] .= '<a href="/actor/'.strtolower(str_replace("+", "-", urlencode($v))). '">'.$v.'</a> <br />';       
    $actors .= $skin->make(); 
```

使用php的[`strtolower`](http://php.net/manual/en/function.strtolower.php)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:11:24.607

`strtoupper(string $str)`— 将字符串设为大写

`strtolower(string $str)`— 将字符串设为小写

# java - 为什么我的 Ant 删除不起作用？

> ID：12738941
> 
> 赞同：0
> 
> 时间：2012-10-05T03:08:03.283
> 
> 标签：java, ant

使用蚂蚁 1.8.0

```
<target name="main">
    <delete includeEmptyDirs="true">
        <fileset dir="target/xxx/WEB-INF/lib" casesensitive="yes">
            <filename name="junit-*.jar"/>
            <filename name="gin-*.jar"/>
        </fileset>
    </delete>
</target> 
```

当我运行这个 Ant 脚本时，什么都没有发生，如果我只留下一个似乎它可以工作。我检查了 Ant 文件集类型，[http:](http://ant.apache.org/manual/Types/fileset.html) //ant.apache.org/manual/Types/fileset.html ，似乎两个无关紧要。

那么任何人都可以告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:18:23.567

删除不成功，因为您的文件与您指定的*两个选择器都不匹配。*`filename`从[文档](http://ant.apache.org/manual/Types/fileset.html)：

> 如果 FileSet 中的任何选择器未选择该文件，则该文件不被视为 FileSet 的一部分。这使得 FileSet 等效于 <and> 选择器容器。

# google-app-engine - netbeans 7.2 中的 Google App Engine 服务器错误，缺少属性 jvmargs 的值

> ID：12738943
> 
> 赞同：1
> 
> 时间：2012-10-05T03:08:05.097
> 
> 标签：google-app-engine

我正在尝试在 Netbeans 7.2 上使用 Google App Engine。我从[http://kenai.com/downloads/nbappengine/NetBeans7.2/](http://kenai.com/downloads/nbappengine/NetBeans7.2/)获得插件，但是当我运行它时，我得到“属性 jvmargs 的缺失值”。

我使用示例项目，所以应该没有任何问题。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:52:08.143

检查并确保您的 PATH 环境变量包含 Program Files/Java/jdk.#.#_##/bin 目录。如果它指向其他东西，它可能无法正常工作，这就是我的问题所在。确保您的项目使用 6 JDK 或更低版本，因为谷歌应用引擎目前不支持 JDK 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:27:31.653

在某处发现一个帖子说使用 Netbeans 6.7 的插件，该插件主要在 Netbeans 7.2.1 中工作。

```
必须执行以下操作才能使其正常工作。
- 转到插件->设置并添加
  http://kenai.com/downloads/nbappengine/1.0_NetBeans671/updates.xml
- Goto Plugin->Available Plugins 搜索 Google 并安装所有 appengine 插件
- 在 services 下创建 appengine 服务器
- 为 appengine 以外的应用服务器创建一个新项目（我使用 glassfish）
- 项目创建后转到属性->运行并切换到应用引擎
- 将 false 添加到 appengine-web.xml

我正在运行 Windows 8、Netbeans 7.2.1、jdk1.7.0_11

```

# spring-security - 从用户名加载用户详细信息

> ID：12738947
> 
> 赞同：0
> 
> 时间：2012-10-05T03:08:42.750
> 
> 标签：spring-security, ldap, grails-2.0

我有一个带有用户参考的域类：

```
class MyThing {
    MyUser createdBy
    //... 
```

通过使用 Spring Security 插件，我有一个相当[基本的 Person 类设置](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/4%20Required%20and%20Optional%20Domain%20Classes.html#4.1%20Person%20Class)，除了我试图从参考中获取用户的电子邮件地址。使用`springSecurityService.principal`效果很好，但*仅*适用于当前登录的用户。

如何获取用户的电子邮件地址？

如果我不能简单地通过用户名引用“查找”，那么是否可以扩展我的 Person 类以从 LDAP 插件获取电子邮件地址并保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:58:20.760

我通过首先向我的 Person 类添加一个 email 属性来解决我的问题。

```
class MyUser {
    String username
    String email 
```

然后通过使用 ldap 模板属性映射，我能够提取电子邮件以及用户名。

```
tokens.add(attributes.get("sAMAccountName").get().toString());
tokens.add(attributes.get("mail").get().toString()); 
```

从那里它只是得到财产`createdBy.email`

# php - 用户名检查页面

> ID：12738954
> 
> 赞同：0
> 
> 时间：2012-10-05T03:09:41.873
> 
> 标签：php, javascript, ajax, mysqli

我正在创建一个系统来检查（通过 AJAX）是否已经使用了给定的用户名。如果是这样，那么它会相应地提醒用户。我的系统基于[本](http://youhack.me/2010/05/04/username-availability-check-in-registration-form-using-jqueryphp/)教程，并尝试将其调整到我的站点。

```
$(document).ready(function()//When the dom is ready
{
  $("#username").change(function()
  { //if theres a change in the username textbox

    var username = $("#username").val();//Get the value in the username textbox
    if(username.length > 3)//if the lenght greater than 3 characters
    {
      $("#availability_status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');
      //Add a loading image in the span id="availability_status"

      $.ajax({  //Make the Ajax Request
        type: "POST",
        url: "ajax_check_username.php",  //file name
        data: "username="+ username,  //data
        success: function(server_response){

          $("#availability_status").ajaxComplete(function(event, request){

            if(server_response == '0')//if ajax_check_username.php return value "0"
            {
              $("#availability_status").html('<img src="available.png" align="absmiddle"> <font color="Green"> Available </font>  ');
              //add this image to the span with id "availability_status"
            }
            else  if(server_response == '1')//if it returns "1"
            {
              $("#availability_status").html('<img src="not_available.png" align="absmiddle"> <font color="red">Not Available </font>');
            }

          });
        }

      });

    }
    else
    {

      $("#availability_status").html('<font color="#cc0000">Username too short</font>');
      //if in case the username is less than or equal 3 characters only
    }
    return false;
  });
}); 
```

**ajax_check_username.php - 这里是我认为我有问题的地方！**

```
<?php
include ("inc/db/db.php");

if($stmt = $mysqli->prepare('SELECT NULL FROM `bruger` WHERE `brugernavn` = ?'))
{
  $stmt->bind_param('s', $brugernavn);
  $brugernavn = $_POST["brugernavn"];
  $stmt->execute();
  $stmt->store_result();
  $count = $stmt->num_rows;
  $stmt->close();
  if($count = 0)
  {
    echo '1';
  }
  else
  {
    echo '2';
  }
}
?>

<tr>
  <td><p>Brugernavn</p></td>
  <td><input type="text" name="brugernavn" id="username"></td>
  <td><span id="availability_status"></span></td>
</tr> 
```

**注意** 我认为我在我的 php 中犯了错误，所以这可能是为什么它不费心去做我想做的事.. 但这只是我想的时候。

当我需要检查数据库中的用户名时，这就是我的 html 查找的内容。这就是我完全没有错误的方式。必须说我以前从未玩过 ajax 或 javascript。所以如果你能进一步帮助我，那将是一个很大的帮助。

随意询问是否还有更多您想知道的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:16:21.323

这`if($count = 0)`应该是`if($count == 0)`如果这会影响您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:18:57.983

您在使用它`$brugernavn` *后进行分配。*

```
$stmt->bind_param('s', $brugernavn);
$brugernavn = $_POST["brugernavn"]; 
```

* * *

在这里使用`ajaxComplete`没有用：

```
$("#availability_status").ajaxComplete(function(event, request){ 
```

* * *

您正在分配应该比较的位置：

```
if($count = 0) 
```

* * *

您的 Javascript 需要一个`0`or `1`，但您的 PHP 脚本输出一个`1`or `2`。

# java - Java中的持续时间差异

> ID：12738956
> 
> 赞同：0
> 
> 时间：2012-10-05T03:10:04.737
> 
> 标签：java, time

> **可能重复：**
> [Java：空循环使用多少时间？](https://stackoverflow.com/questions/7271147/java-how-much-time-does-an-empty-loop-use)

看看以下内容：

```
for (int j = 0 ; j < 5 ; j++) {     
    long t1 = System.currentTimeMillis();
    for (int i = 0 ; i < 10000000 ; i++)
        ; // intentionally empty
    long t2 = System.currentTimeMillis();
    System.out.println (t2 - t1);
} 
```

输出（许多可能之一）：

> 2
> 11
> 0
> 0
> 0

如果你多次运行这个程序，你会发现输出的前两个数字*总是*非零，而所有其他数字确实是 0。此外，第二个数字通常看起来比第一个大。即使我们循环更高，这似乎也成立，比如直到`j < 100`。**这有什么具体原因吗？**当然，毫秒一般来说可能不会有太大的不同，但我只是好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:18:25.047

这会产生你想要的结果吗？

```
long t1 = System.currentTimeMillis();
for (int j = 0 ; j < 5 ; j++) {     
        for (int i = 0 ; i < 10000000 ; i++){}
        long t2 = System.currentTimeMillis();
        System.out.println(t2 - t1);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:24:52.300

HotSpot JIT 做了几个优化循环——它首先将代码编译成半优化的机器版本，甚至只是解释它。然后它看到第二个循环实际上是一个热点，并使用更积极的优化重新编译代码。编译过程可能是性能的第二个高峰。然后它执行一个优化版本，它什么都不做，所以你得到全零。如果你用`-server`它运行代码，可能会更早地编译代码，你会得到不同的结果。运行它`-Xint`以查看每个循环迭代的均匀性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:17:29.140

第二个循环是空的，可以优化掉。由于 JVM 需要一些时间来实现这一事实，所以一开始并没有这样做。也许优化的时间是花在第二次运行上。

# javascript - 为什么javascript的返回有用？

> ID：12738965
> 
> 赞同：-1
> 
> 时间：2012-10-05T03:11:24.717
> 
> 标签：javascript, return

在许多站点中，函数和对象返回值。为什么`return`重要？

```
Slider.prototype.setCurrent = function( dir ) {

    var pos = this.current;

    pos += ( ~~( dir === 'next' ) || -1 );
    this.current = ( pos < 0 ) ? this.imgsLen - 1 : pos % this.imgsLen;

    return pos;
} 
```

在上面的例子中，为什么不返回`this.current`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:14:13.860

`this.current`设置后修改`pos`：

```
this.current = ( pos < 0 ) ? this.imgsLen - 1 : pos % this.imgsLen; 
```

`pos`存储 的旧值`this.current`，因此返回`this.current`而不是`pos`不会产生相同的结果。

# jasper-reports - 如何使用 Ireport 中的字段数据库从 db 服务器获取 URL 图像？

> ID：12738966
> 
> 赞同：0
> 
> 时间：2012-10-05T03:11:40.913
> 
> 标签：jasper-reports, ireport

我正在使用 ireport 3.7.6。我在数据库中有字段图像。我想使用字段图像来显示来自服务器的图像。当我将 $F{images} 放在图像表达式中时。这些图像没有出现在我的报告中。

有人知道这件事吗？请帮我。：（：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T09:12:01.617

将字段类型设置为 java.io.InputStream 并将图像表达式类型设置为 java.awt.Image 它将起作用..

# c++ - 模板函数继承

> ID：12738967
> 
> 赞同：0
> 
> 时间：2012-10-05T03:11:44.887
> 
> 标签：c++

当基类 A 是抽象类时，除了整个类层次结构中通用的几个函数......并且声明了类 B：

```
template <class widgetType> class B : public A { ... }; 
```

并声明 C 类：

```
class C : public B<myWidget> { ... }; 
```

是否有任何理由在 A 中声明的某些函数不会继承到 C 类？

我在 A 中实现了两个同名但参数不同的（虚拟）函数，其中一个在 C 中被覆盖。当我尝试使用类 C 的实例访问非覆盖函数时，编译器找不到它。我看不出有什么问题......所以我很想知道是否有关于模板和继承的特殊规则我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:50:25.770

> 同名但参数不同

你遇到了函数隐藏。如果一个类定义了一个与基类中的方法同名的方法，无论它是否是覆盖，该方法都会对基类隐藏其他方法。模板与它无关。

当编译器尝试解析函数名时，它首先在派生最多的类的上下文中查找。如果它找到那里定义的名称，它将停止深入查找，并且只考虑在同一级别定义的那些名称。

# java - AWS 使用 Hadoop API 增加 map 和 reducers

> ID：12738972
> 
> 赞同：1
> 
> 时间：2012-10-05T03:12:22.280
> 
> 标签：java, hadoop, amazon-ec2, amazon-web-services, mapreduce

我在 AWS 服务器上运行 WordCount 示例。我想测试我的输出并分析它们。我想增加编号。映射器和没有。减速器，也没有。块。

我怎样才能达到同样的效果？

我必须设置否。创建工作时映射器/减速器的数量？或者我必须添加一些代码？我正在使用java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:32:27.517

您可以在 Java 程序的 main 函数中设置映射器和缩减器的数量，该程序分别使用 JobConf`conf.setNumMapTasks(int num)`和启动 MapReduce 作业。`conf.setNumRedTasks(int num)`

对于映射器，请注意[api 中的以下内容：](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/JobConf.html#setNumMapTasks%28int%29)

`"This is only a hint to the framework. The actual number of spawned map tasks depends on the number of InputSplits generated by the job's InputFormat.getSplits(JobConf, int). A custom InputFormat is typically used to accurately control the number of map tasks for the job."`

显式设置输入块的数量有点困难。输入的拆分方式取决于`InputFormat`您使用的方式和`InputSplits`它使用的对应方式。如果您希望操纵输入的拆分方式，则必须制作自己的自定义 InputFormat/InputSplits。

# javascript - RIA 中跨浏览器的键盘快捷键约定、可访问性

> ID：12738973
> 
> 赞同：0
> 
> 时间：2012-10-05T03:12:24.907
> 
> 标签：javascript, keyboard-shortcuts, accessibility, ria

创建基于浏览器的基于单页浏览器的 RIA。希望广泛使用键盘快捷键。起初，我的重点是喜欢点击替代方法的专业用户，并希望它可以在各种浏览器中工作。研究时，我现在看到一整篇关于支持物理可访问性的文献，恐怕这可能成为硕士论文，而不是一天的工作。

是否有关于哪些键的简明指南

*   可以跨浏览器使用（例如，不要覆盖 Mac 上的 Cmd+W 或 Windows 上的 Ctrl+P）
*   通常用于某些目的（例如 Cmd+Z/Ctrl+Z = Undo 是显而易见的）
*   在通用可访问性标准中确定

例如，不熟悉所有浏览器或具有不同功能的替代设备，如果我可以查看一个网格以确保我不会意外疏远一群原本满足的用户，那就太好了。

我可以找到很多关于键映射机制的链接（Mousetrap.js 简单有效，顺便说一句），但关于跨浏览器和人类可用性部分的约定/指南/标准的链接不多，例如这些链接：

*   [捕鼠器.js](http://craig.is/killing/mice)
*   [KeyMap.js](https://github.com/madrobby/keymaster)
*   SO：[Web 应用程序的 Javascript 键盘快捷键](https://stackoverflow.com/questions/5836596/javascript-keyboard-shortcuts-for-web-application)
*   SO：[这是最好的 Javascript 键盘事件库。（热键，快捷方式）](https://stackoverflow.com/questions/2353417/which-is-the-best-javascript-keyboard-event-library-hotkeys-shortcuts)
*   SO： [使用 JavaScript 进行强大的键盘快捷键处理](https://stackoverflow.com/questions/611326/robust-keyboard-shortcut-handling-using-javascript)
*   SO： [浏览器中是否有用于键盘绑定的开源库JS？](https://stackoverflow.com/questions/10740011/is-there-an-open-source-library-js-for-keyboard-binding-in-the-browser)

如果重要，jQuery（或任何其他有用的库）就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:52:04.523

DHTML 样式指南是根据各种利益相关者的意见开发的，它为各种 RIA 小部件推荐了键盘模型：http: [//dev.aol.com/dhtml_style_guide/](http://dev.aol.com/dhtml_style_guide/)

这些已被 W3C 的 WAI-ARIA 1.0 最佳实践采用： [http ://www.w3.org/WAI/PF/aria-practices](http://www.w3.org/WAI/PF/aria-practices)

展望未来，我认为我们所有人都必须遵循这些建议。如果我们都在同一个页面上，这将减少冲突的可能性，并将最大限度地减少用户必须记住的独特键盘模型的数量。

# model-view-controller - 从 Symfony2 控制器中删除 Doctrine 生命周期事件

> ID：12738974
> 
> 赞同：6
> 
> 时间：2012-10-05T03:12:32.503
> 
> 标签：model-view-controller, events, symfony, doctrine, doctrine-orm

我希望从控制器中删除[Doctrine Extensions 生命周期事件侦听](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/lib/Gedmo/Tree/TreeListener.php)器。

我需要删除更新事件的侦听器，因为我需要一次更新树中的所有节点。图书馆不支持的东西，但可以通过直接设置正确的左，右，水平等来实现......

甚至可以从控制器中删除生命周期吗？这种情况有什么可能的解决方案。

我认为这样的事情可能会奏效，但它没有

```
$evm = $em->getEventManager();

$listener = new \Gedmo\Tree\TreeListener();
$evm->removeEventListener( array( 'postUpdate' ), $listener ); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T13:40:50.340

是的，它会起作用，但是使用了不同的事件：

```
$listenerInst = null;
$em; /* entity manager */
foreach ($em->getEventManager()->getListeners() as $event => $listeners) {
    foreach ($listeners as $hash => $listener) {
        if ($listener instanceof WantedListenerClass) {
            $listenerInst = $listener;
            break 2;
        }
    }
}
$listenerInst || die('Listener is not registered in the event manager');
// then you can remove events you like:
$evm = $em->getEventManager();
$evm->removeEventListener(array('onFlush'), $listenerInst); 
```

# jquery - 未使用 jstree 加载子元素

> ID：12738980
> 
> 赞同：1
> 
> 时间：2012-10-05T03:13:45.650
> 
> 标签：jquery, ajax, json, jstree

我是 jstree 的新手，并试图通过 JSON url 加载树。子元素存在于另一个 URL 中以访问该 url，父 id 需要附加到基本 url。我得到的是根节点，而不是子元素。

```
<html>
  <head>    
    <script src="jquery.js"></script>
    <script src="jquery.jstree.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script>
    $(function () {
            var list=[];
           var list2=[];
           var genreId=6628;
           var state="";
             var name=[];
             var j=0;
           $("#geo").click(function(n){
         var url="my url";
              if (n){  
                            name[0]=0;
                             if(name[j] !="undefined"){  
                             //alert(n.attr("name"));  
                             genreId=name[j]; 
                             j++; 
                             } 
                             } 
                             url=url+genreId;   
                $.getJSON(url,function(data){
                   var docs= data.response.docs;
                   for (var i = 0; i < docs.length; i++) {
                    var state= "closed";
                       list2.push({"data": docs[i].description ,"attr" : { "name" : docs[i].id },"state":state});
                      name[i]=docs[i].id;
                   }
            });
                $("#demo1").jstree({
                   "json_data" : {
                    "data" : list2
                }, 
                "plugins" : [ "themes", "json_data", "ui" ]
          });      
       });
       });  
    </script>
  </head>
  <body>
    <button id="geo">get json</button>
        <div id="demo1"></div>
  </body>
</html> 
```

# python - Django：使用用户查询模型 M2M

> ID：12738983
> 
> 赞同：0
> 
> 时间：2012-10-05T03:14:00.547
> 
> 标签：python, django, django-queryset

我有一个模型房子，房子有很多用户（称为所有者），我正在寻找用户拥有的所有房子（特别是登录用户），如下：

```
House.objects.filter(owners__contains=request.user) 
```

产生一个无效的查找错误，我假设这是因为它是为了做一个 LIKE。虽然我不确定我还能如何检索这些数据。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:18:54.307

正确的代码：

```
House.objects.filter(owners=request.user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:27:17.623

您还可以根据模型的定义方式使用以下内容：

```
request.user.house_set.all() 
```

这使您不必导入`House`到当前范围。

请注意，如果您使用 related_name 定义了多对多，您将使用它而不是`house_set`.

# java - 为什么我的 Opteron 内核每个都只以 75% 的容量运行？（25% CPU 空闲）

> ID：12738991
> 
> 赞同：4
> 
> 时间：2012-10-05T03:16:00.163
> 
> 标签：java, numa

我们刚刚交付了功能强大的 32 核 AMD Opteron 服务器，容量为 128Gb。我们有 2 个 6272 CPU，每个 CPU 有 16 个内核。我们正在 30 个线程上运行一个长时间运行的大型 java 任务。我们开启了针对 Linux 和 java 的 NUMA 优化。我们的 Java 线程主要使用该线程私有的对象，有时会读取其他线程将要读取的内存，并且非常偶尔会写入或锁定共享对象。

我们无法解释为什么 CPU 内核有 25% 空闲。以下是“top”的转储：

```
顶部 - 23:06:38 上升 1 天，23 分钟，3 个用户，平均负载：10.84、10.27、9.62
任务：总共 676 个，1 个正在运行，675 个正在睡觉，0 个停止，0 个僵尸
中央处理器：64.5%us、1.3%sy、0.0%ni、32.9%id、1.3%wa、0.0%hi、0.0%si、0.0%st
内存：总共 132138168k，已使用 131652664k，可用 485504k，92340k 缓冲区
交换：总计 5701624k，已使用 230252k，免费 5471372k，缓存 13444344k
...
top - 22:37:39 up 23:54, 3 个用户，平均负载：7.83, 8.70, 9.27
任务：总共 678 个，1 个正在运行，677 个正在睡觉，0 个停止，0 个僵尸
CPU0：75.8%us，2.0%sy，0.0%ni，22.2%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU1：77.2%us，1.3%sy，0.0%ni，21.5%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU2：77.3%us，1.0%sy，0.0%ni，21.7%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU3：77.8%us，1.0%sy，0.0%ni，21.2%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU4：76.9%us，2.0%sy，0.0%ni，21.1%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU5：76.3%us，2.0%sy，0.0%ni，21.7%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU6：12.6%us，3.0%sy，0.0%ni，84.4%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU7：8.6%us，2.0%sy，0.0%ni，89.4%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU8：77.0%us，2.0%sy，0.0%ni，21.1%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU9：77.0%us，2.0%sy，0.0%ni，21.1%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU10：77.6%us，1.7%sy，0.0%ni，20.8%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU11：75.7%us，2.0%sy，0.0%ni，21.4%id，1.0%wa，0.0%hi，0.0%si，0.0%st
CPU12：76.6%us，2.3%sy，0.0%ni，21.1%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU13：76.6%us，2.3%sy，0.0%ni，21.1%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU14：76.2%us，2.6%sy，0.0%ni，15.9%id，5.3%wa，0.0%hi，0.0%si，0.0%st
CPU15：76.6%us，2.0%sy，0.0%ni，21.5%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU16：73.6%us，2.6%sy，0.0%ni，23.8%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU17：74.5%us，2.3%sy，0.0%ni，23.2%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU18：73.9%us，2.3%sy，0.0%ni，23.8%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU19：72.9%us，2.6%sy，0.0%ni，24.4%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU20：72.8%us，2.6%sy，0.0%ni，24.5%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU21：72.7%us，2.3%sy，0.0%ni，25.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU22：72.5%us，2.6%sy，0.0%ni，24.8%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU23：73.0%us，2.3%sy，0.0%ni，24.7%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU24：74.7%us，2.7%sy，0.0%ni，22.7%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU25：74.5%us，2.6%sy，0.0%ni，22.8%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU26：73.7%us，2.0%sy，0.0%ni，24.3%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU27：74.1%us，2.3%sy，0.0%ni，23.6%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU28：74.1%us，2.3%sy，0.0%ni，23.6%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU29：74.0%us，2.0%sy，0.0%ni，24.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU30：73.2%us，2.3%sy，0.0%ni，24.5%id，0.0%wa，0.0%hi，0.0%si，0.0%st
CPU31：73.1%us，2.0%sy，0.0%ni，24.9%id，0.0%wa，0.0%hi，0.0%si，0.0%st
内存：总共 132138168k，已使用 131711704k，可用 426464k，88336k 缓冲区
交换：总计 5701624k，已使用 229572k，免费 5472052k，缓存 13745596k

  PID 用户 PR NI VIRT RES SHR S %CPU %MEM TIME+ 命令
13865 根 20 0 122g 112g 3.1g S 2334.3 89.6 20726:49 java
27139 杰恩 20 0 15428 1728 952 S 2.6 0.0 0:04.21 顶部
27161 系统管理员 20 0 15428 1712 940 R 1.0 0.0 0:00.28 顶部
   33 根 20 0 0 0 0 S 0.3 0.0 0:06.24 ksoftirqd/7
  131 根 20 0 0 0 0 S 0.3 0.0 0:09.52 事件/0
 1858 根 20 0 0 0 0 S 0.3 0.0 1:35.14 kondemand/0

```

Java 堆栈的转储确认没有任何线程位于使用锁的少数地方附近，也没有任何靠近任何磁盘或网络 i/o 的地方。

我很难找到关于“空闲”与“等待”的“顶部”含义的清晰解释，但我得到的印象是“空闲”意味着“没有更多需要运行的线程”，但这在我们的案例。我们正在使用“Executors.newFixedThreadPool(30)”。有大量待处理的任务，每个任务持续 10 秒左右。

我怀疑解释需要对NUMA有很好的理解。当 CPU 等待非本地访问时，您会看到“空闲”状态吗？如果不是，那么解释是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:35:53.873

这可能是很多事情：

*   这可能是线程之间对共享数据的访问权的争用。这可能采取锁争用的形式，或者由于读或写障碍导致的额外内存流量，尽管后者不太可能产生这些症状。

*   您正在泄漏工作线程；例如，它们偶尔会死去而没有被替换。

*   执行程序本身可能存在瓶颈；例如，它可能对通过安排下一个任务完成的任务响应不够快。

*   瓶颈可能是垃圾收集器，特别是如果您没有启用并行收集。

* * *

[本页](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#numa)讨论了 Java 的 NUMA 增强，并提到了 NUMA-aware GC 开关。试试看。另请查看该页面上的其他 GC 调整建议。

这个问题解释了进程状态：[在linux中，“top”命令中的所有值是什么意思？](https://stackoverflow.com/questions/307502/in-linux-what-do-all-the-values-in-the-top-command-mean).

我认为处理器总结中“wa”和“idle”时间的区别在于，“wa”表示处理器有线程处于“D”状态；即等待磁盘I/O。相比之下，所有线程都在“S”状态等待的处理器将被视为“空闲”。（从这个角度来看，等待锁的线程将处于 S 状态。）

您也可以尝试`top -H`单独显示线程。

# postgresql - Postgres GIST 与 Btree 索引

> ID：12738997
> 
> 赞同：19
> 
> 时间：2012-10-05T03:17:14.373
> 
> 标签：postgresql, postgis

继我之前关于这个主题的问题之后，[Postgres 结合了多个索引](https://stackoverflow.com/questions/12701193/postgres-combining-multiple-indexes)：

我在 Postgres 9.2（带有 postgis）上有下表：

```
CREATE TABLE updates (
    update_id character varying(50) NOT NULL,
    coords geography(Point,4326) NOT NULL,
    user_id character varying(50) NOT NULL,
    created_at timestamp without time zone NOT NULL
); 
```

我正在表上运行以下查询：

```
select * 
from updates 
where ST_DWithin(coords, ST_MakePoint(-126.4, 45.32)::geography, 30000) 
and user_id='3212312' 
order by created_at desc
limit 60 
```

因此，鉴于此，我应该为（coords + user_id）、GIST 还是 BTree 使用什么索引？

```
CREATE INDEX ix_coords_user_id ON updates USING GIST (coords, user_id); 
```

或者

```
CREATE INDEX ix_coords_user_id ON updates (coords, user_id); 
```

我读到 BTree 的性能比 GIST 好，但我是否被迫使用 GIST，因为我使用的是 postgis 地理字段？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T03:20:45.850

如果您想使用除常规 b-tree 索引（或哈希索引，但实际上不应使用）之外的任何索引方法，则必须使用 GiST。PostGIS 索引需要 GiST。

B-tree 索引只能用于涉及相等或排序的基本操作，例如`=`、`<`、`<=`、`>`、`>=`、`<>`和。虽然您可以在几何对象（点、区域等）上创建 b-tree 索引，但它实际上只能用于相等，因为排序比较对于此类对象通常没有意义。需要一个 GiST 索引来支持更复杂和更一般的比较，如“包含”、“相交”等。`BETWEEN``IN``>`

您可以使用该[`btree_gist`扩展](http://www.postgresql.org/docs/current/static/btree-gist.html)为 GiST 启用 b-tree 索引。它比常规的 b-tree 索引要慢得多，但允许您创建一个多列索引，其中包含仅 GiST 类型和常规类型，如`text`,`integer`等。

* * *

在这些情况下，您确实需要使用`explain analyze`（[explain.depesz.com](http://explain.depesz.com/)对此很有用）来检查 Pg 如何使用您创建的各种索引和索引组合。在多列索引中尝试不同的列排序，看看两个或多个单独的索引是否更有效。

我强烈怀疑在这种情况下，您将使用多列 GiST 索引获得最佳结果，但我会尝试几种不同的索引和索引列排序组合来查看。

# javascript - 单击单元格内的链接时抑制 Kendo UI Grid 可选事件

> ID：12738998
> 
> 赞同：0
> 
> 时间：2012-10-05T03:17:19.990
> 
> 标签：javascript, datagrid, kendo-ui

我有一个带有链接的剑道网格，我也将其设置为可选择的，这里的片段：

```
columns: [{
    field: 'link', title: 'Link',
    template: '<a href="${link}">Click Here</a>'
}],
...
selectable: 'row',
change: function(e) {
    var rowUid = this.select().data('uid');
    rowDs = this.dataSource.getByUid(rowUid);
    console.log('Went (1): ' + rowDs);
    return false;
} 
```

当我单击外部链接`<a>`时，我也选择了该行。有什么办法可以抑制可选择的事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:55:23.467

您还可以通过为列指定 CSS 类来检测触发点击的元素。然后，您将在更改事件中放置一个 if 语句来检测是否单击了该列：

```
columns: [
  {
    title: ' ',
    command: {
      text: 'My Button',
        click: function (e) {
          e.preventDefault();

          //GET SELECTED DATA
          var data = this.dataItem($(e.currentTarget).closest('tr'));

          //DO SOMETHING
        }
      },
      attributes: {
        'class': 'actions'
      }
  }
] 
```

然后在更改中，您将拥有以下内容：

```
change: function (e) {
  //GET TRIGGER SOURCE TO DETERMINE IF ACTION CLICKED
  var eventTarget = (event.target) ? $(event.target) : $(event.srcElement);
  var isAction = eventTarget.parent().hasClass('actions');

  //SELECT ITEM IF APPLICABLE
  if (!isAction) {
    var grid = e.sender;
    var dataItem = grid.dataItem(this.select());
    if (dataItem) {
      //DO SOMETHING
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T03:26:10.517

我刚刚偶然发现了一个 Kendo UI 开发人员的论坛帖子，上面写着“无法阻止网格的选择” [（链接）](http://www.kendoui.com/forums/ui/grid/prevent-detail-button-to-select-row.aspx)。我想这意味着我将不得不解决这个问题。

编辑：我实际上只是想获取行的 uid 属性，以便可以从数据源中选择选定的数据项。我发现您可以在定义列模板时获取它，

```
columns: [{
    field: 'link', title: 'Link',
    template: '<a href="#" data-rowSpecificUid="${uid}">Manual Edit Link</a>'
}], 
```

并使用它来检索选定行的数据项。

```
var selectedRow = $('#gridId').data('kendoGrid').dataSource.getByUid(rowUid); 
```

*将在一段时间内关闭这个问题，以防其他人可以提供帮助。*