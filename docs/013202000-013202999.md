# StackOverflow 问答 13202000-13202999

# php - “new SoapClient()”的 PHP 不是那么致命的错误

> ID：13202007
> 
> 赞同：2
> 
> 时间：2012-11-02T19:44:30.123
> 
> 标签：php, soap-client

我有这个片段运行：

```
foreach($config as $wsInfo){
  try{
    $soapClient = new SoapClient($wsInfo['url'], 
                                 array('encoding'=>'ISO-8859-1'));

    //  Some more code that I commented out.

  }
  catch(Exception $e){
    echo "EXCEPTION: \n" . $e->getMessage();
    // log it, etc.
  }
} 
```

当我运行该程序时，Web 服务 URL 会以身份验证错误响应我（在开发阶段这是可以的）。

我注意到的异常行为是，虽然我对此有所期待：

```
$ php scan.php -p=/ -c=config.yml
EXCEPTION: 
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL"
EXCEPTION: 
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL" 
```

它给了我这个：

```
$ php scan.php -p=/ -c=config.yml
PHP Fatal error:  SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL"
 in /home/me/project/DFPushSOAP.php on line 34
EXCEPTION: 
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL"
PHP Fatal error:  SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL"
 in /home/me/project/DFPushSOAP.php on line 34
EXCEPTION: 
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://webservices.myserver.com/api.asmx?WSDL' : failed to load external entity "http://webservices.myserver.com/api.asmx?WSDL" 
```

为什么“PHP 致命错误”没有杀死程序？为什么它会逃避 try/catch 块？

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:54:48.230

我遇到了同样的问题，并在[https://bugs.php.net/bug.php?id=47584](https://bugs.php.net/bug.php?id=47584)找到了解决方案。

首先，您应该设置`exceptions`选项以强制 SoapClient 抛出异常：

```
 $soapClient = new SoapClient($wsInfo['url'], array('encoding'=>'ISO-8859-1'
                                                       'exceptions' => true )); 
```

在我的情况下，xdebug 强制产生致命错误而不是可捕获的异常。因此，您应该尝试为 SoapClient 创建禁用 xdebug：

```
 if(function_exists('xdebug_disable')){ xdebug_disable(); };
    $soapClient = new SoapClient($wsInfo['url'], array('encoding'=>'ISO-8859-1'
                                                       'exceptions' => true ));
    if(function_exists('xdebug_enable')){ xdebug_enable(); }; 
```

希望这对你有帮助^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T09:54:11.597

暂时禁用 xdebug 的解决方案对我不起作用（运行*PHP 7.0.12 / amd64）*并启用 xdebug）。

[https://bugs.php.net/bug.php?id=47584](https://bugs.php.net/bug.php?id=47584)中提到的错误的答案显示了带有自定义临时错误处理程序的解决方案。请参阅 _ [2012-10-03 09:36 UTC] james dot silver at computerminds dot co dot uk_ 的帖子。

作为一种肮脏的解决方法，您可以停用`error_reporting()`

```
$level = error_reporting();
error_reporting(0);
$soapClient = new SoapClient($wsInfo['url'], array(
    'encoding'=>'ISO-8859-1'
    'exceptions' => true )
);
error_reporting($level); 
```

但是自定义错误处理程序看起来更令人愉快。见[https://stackoverflow.com/a/12565073/4351778](https://stackoverflow.com/a/12565073/4351778)

# python - 将参数传递给 QTimer 超时信号？

> ID：13202014
> 
> 赞同：2
> 
> 时间：2012-11-02T19:44:50.810
> 
> 标签：python, qt, pyqt, scheduled-tasks

我正在使用 Python 和 PySide（PyQt 替代方案）。我有一个在后台运行的应用程序，我想使用 QTimer 来安排一些要执行的任务。

但是，我需要 QTimer 在我的程序中调用一个方法，但是这个方法需要“初始化参数”来指定方法应该做什么。

我是否正确地认为我需要继承 QTimer 并覆盖 the`timeout`或`start`方法？如果是这样，那是哪一个，我将如何处理？我几乎没有覆盖现有方法的经验，而且谷歌搜索也没有得到很多结果（有一些我不明白的 C++ ）。我已经设法做了一些事情（例如，我覆盖了该`start()`方法，但是原始 start 方法的代码没有执行（可以理解），我不知道该代码应该是什么。

还是有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:00:31.050

> 但是，我需要 QTimer 在我的程序中调用一个方法，但是这个方法需要“初始化参数”来指定方法应该做什么。

初始化参数是否改变？我可能会做一些涉及[functools.partial](http://docs.python.org/2/library/functools.html)的事情来绑定一些参数，所以如果你有这个

```
import functools
from PySide.QtCore import QTimer

def onTimer(initParams):
    # use initParams
    # your code here...

myInitParams = "Init!"
timerCallback = functools.partial(onTimer, initParams=myInitParams)
myTimer = QTimer()
myTimer.timeout.connect(timerCallback)
myTimer.start( 1000) #once a sec

#Your QApplication goes below... 
```

如果您想根据应用程序的某些当前条件提供**不同的**初始化参数，您可能会更好地使用基于特定项目何时更改的自定义信号/插槽。或者保持我在其他地方修改 initParams 的“当前”状态。

# android - Android - 设计时访问自定义属性

> ID：13202016
> 
> 赞同：2
> 
> 时间：2012-11-02T19:44:54.883
> 
> 标签：android

在**Android**中 - 有没有办法在设计时访问自定义属性。我有一个具有自定义属性的自定义视图。我希望能够访问在设计时为视图定义的任何自定义属性。

所有定义的属性在运行时都可以正常工作，我想知道如何在设计时做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T07:00:14.550

这可能有点晚了……

您可以使用 AttributeSet 读取视图构造函数中的所有属性。

```
public class myView extends LinearLayout{

    private String mCaption;

    public myView(Context context,AttributeSet attrs){
        super(context,attrs);

        mCaption = attrs.getAttributeValue("http://schemas.android.com/apk/res/com.example.myView","myAttribute");
        TextView tv = new TextView(context);
        this.addView(tv);
        tv.setText(mCaption);
    }
} 
```

但这仅读取原始值，没有解析引用等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:48:34.523

好吧，这是用令人困惑的方式措辞。您是否尝试在运行时更改放入视图的内容？如果是这样，在标准活动中，在您的 setContentView(...) 之后，您可以执行以下操作

```
Button button = (Button)findViewById(R.id.reallyAwesomeSauceButton); 
button.setText("Click me!"); 
```

只需查看 Android 文档，了解您可以在运行时使用视图做什么。有不少

# xcode - Xcode 在应用程序中保存照片

> ID：13202017
> 
> 赞同：0
> 
> 时间：2012-11-02T19:44:55.990
> 
> 标签：xcode, string, save, photo

我正在开发一个顶部有图像视图的应用程序，它占据了屏幕的三分之一。我的问题是，我希望能够让用户按下一个按钮并选择他/她喜欢的任何照片并拥有应用程序保存它。这样，当他们关闭应用程序并重新打开时，照片仍然存在。我是 xcode 的新手，如果那里已经存在这样的问题，我深表歉意。我找不到我要找的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:32:00.453

为了实现这一点，您需要：

1.  要求用户从他的库中选择一个图像（[这里是如何](http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/)）
2.  将用户选择的图像保存到您应用的沙箱中（[方法](https://stackoverflow.com/questions/2264039/uiimage-saving-image-with-file-name-on-the-iphone)如下）
3.  在启动时将该图像加载到 UIImageView 中（[这是保存/加载少量数据的方法](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)，在您的情况下，您只需要保存图像的位置即可在启动时加载它）

# iphone - 关闭隐藏的 UIViewController -- iOS

> ID：13202020
> 
> 赞同：2
> 
> 时间：2012-11-02T19:45:11.477
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uitabbarcontroller

我试图弄清楚如何关闭当前隐藏的视图控制器，即源自模态 segue 的视图正在覆盖它。

这是我的情况：我只允许在我的应用程序中更改一个视图的方向。让我们将该视图称为视图 A。当视图 A 变为横向时，它会转到另一个视图控制器，然后当它返回纵向时，我只是关闭横向视图控制器。

问题是：视图 A 嵌入在 tabBarController 中，它始终是第一个加载的视图。如果用户以横向加载应用程序，视图 A 仍会以纵向显示，即使它显然是横向的（这很好）。但是，当我对横向视图进行定向并返回视图 A 时，tabBar 卡在横向。

所以在这里我决定有一个 introView 控制器来确定应用程序是横向还是纵向，然后加载横向视图或视图 A（纵向视图）。现在，我可以每次都在两个视图之间切换，但我听说这是不好的做法（即视图控制器正在堆叠并不断创建新实例）。

我想从视图层次结构中删除介绍视图控制器，然后在视图 A 控制器和横向视图控制器之间保持相同的范例。有谁知道如何实现这一目标？

# actionscript-3 - flex 移动的下拉列表。以编程方式检测用户按下的位置并设置 selectedItem

> ID：13202021
> 
> 赞同：0
> 
> 时间：2012-11-02T19:45:12.323
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在尝试在 Flex Mobile 上使用下拉列表。现在，从技术上讲，我知道您不应该将它用于 Flex Mobile 项目。Adobe 不鼓励使用它，但我的应用程序需要它。这是我尝试过的-

```
 <s:DropDownList id="industry" width="160" height="35"
                                    change="onDropDownChange(event)"  click="onDropDownClick(event)"/>

protected function onDropDownIndexChange(event:IndexChangeEvent):void
                {   //removeEventListener(event:IndexChangeEvent);
                    industry.selectedIndex =industry.selectedItem;
                }

protected function onDropDownClick(event:Event):void {
                    industry.openDropDown();
                    //industry.selectedItem=industry.selectedIndex ;
                    industry.addEventListener(IndexChangeEvent.CHANGE, onDropDownIndexChange );
                }

protected function onDropDownChange(event:IndexChangeEvent):void {

                trace(industry.selectedIndex);
                trace(industry.selectedItem);
                event.target.listData = industry.selectedItem;
} 
```

我无法注册单击下拉菜单。而且我不知道如何检测菜单上的触摸（或单击）事件来设置它。感谢您的阅读和您的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:08:41.040

冒着听起来自我放纵的风险；使用[Flextras Mobile DropDownList](https://www.flextras.com/index.cfm?event=ProductHome&productID=21)。它可以免费用于生产（但如果您需要资源或帮助，则必须付费）。

这是我们[基于网络的示例](https://www.flextras.com/MobileComponents/Samples/MobileDropDownList/)。我们有几个不同的渲染器和皮肤。为了使 DropDown 看起来像标准的移动下拉菜单，我们建议使用 Radio Button Renderer 和我们的 Pop Up Skin 2。

Flex 的默认下拉列表存在触摸交互问题，尤其是在单击下拉列表时。要创建自己的版本，您必须解决这些问题。我们创建了一堆自定义皮肤，并添加了一些额外的属性/样式。

# javascript - 数组中缺少元素

> ID：13202022
> 
> 赞同：2
> 
> 时间：2012-11-02T19:45:24.463
> 
> 标签：javascript, node.js, zombie.js

我是 Node.js 的新手。我正在使用zombie.js 从几个网站上抓取网页标题。下面是我的代码：

```
var Browser = require("zombie");
var util = require("util");
halt = require('delayed');
title = [];
url = [ 'http://www.apple.com', 'http://www.microsoft.com', 'http://www.dell.com' ];

function getTitles(url){
    //console.log('Start scraping title');
    var length = url.length;
    console.log('Total Site to Scrape: '+length);
    label = 1;
    for(var i=0;i<length;i++){
        browser = new Browser()
        browser.runScripts = false
        browser.setMaxListeners(0);
        browser.visit(url[i], function(e, browser, status, errors) {
        browser.wait(function(){
            title[i] = browser.text('html > head > title');
            console.log(label+': '+title[i]);
            browser.close();
            label++;
        });
        });
    };  
}

getTitles(url);

halt.delay(function () {
    console.log('Array Length: '+title.length)
    console.log('Array Content: '+title)
}, 10) 
```

下面是代码的输出：

```
Total Site to Scrape: 3
1: Apple
2: Dell Official Site - The Power To Do More | Dell
3: Microsoft Home Page | Devices and Services
Array Length: 4
Array Content: ,,,Microsoft Home Page | Devices and Services 
```

我不明白的部分：

1.  为什么返回的数组长度是 4 而不是 3？只有三个网址
2.  为什么数组内容只返回最后一个元素？另外两个缺失的元素在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:39:27.273

我不熟悉僵尸，但我很确定这是一个关闭问题。`i`当你认为它是时，它不是你认为的那样。请参阅此答案：[循环内的 JavaScript 闭包 -](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)有关闭包的一些信息的简单实用示例。基本上发生的事情是即使您的请求是异步的，您的循环仍在继续，它们没有完成，所以当它们返回时，您已经遍历了所有 3 个 URL，现在您已经有了三个元素......然后它会插入所有 3值到第 4 个元素。最后一个赢了，所以微软就是你所看到的。

# jquery - Jquery验证条件日期比较

> ID：13202025
> 
> 赞同：0
> 
> 时间：2012-11-02T19:45:38.670
> 
> 标签：jquery, date, jquery-validate

对日期比较进行以下验证，当输入无效日期时有效，即结束日期早于开始日期。但问题是，当没有输入日期时，验证也会启动。

如果同时输入了开始日期和结束日期，我只想使用验证。

```
 $j("#Form1").validate(
    {

        rules:
            {
                content_0$leftcolumn_0$whiteboxplaceholder_0$exportFilterFromActivityDate: {
                    date: true,
                    required: false
                },
                content_0$leftcolumn_0$whiteboxplaceholder_0$exportFilterToActivityDate: {
                    date: true,
                    required: false,
                    isAfterStartDate: "#content_0_leftcolumn_0_whiteboxplaceholder_0_exportFilterFromActivityDate"
                },
                content_0$leftcolumn_0$whiteboxplaceholder_0$exportFilterFromFinalApprovalDate: {
                    date: true,
                    required: false
                },
                content_0$leftcolumn_0$whiteboxplaceholder_0$exportFilterToFinalApprovalDate: {
                    date: true,
                    required: false,
                    isAfterStartDate: "#content_0_leftcolumn_0_whiteboxplaceholder_0_exportFilterFromFinalApprovalDate"
                }
            }
    }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T20:22:17.893

也许先使用条件函数？

```
if( ($('#dateA').val()!='') && ($('#dateB').val()!='') ){

    $j("#Form1").validate({Validate....});

} 
```

# node.js - 使用 Node.js 关闭 Mongoose 连接

> ID：13202030
> 
> 赞同：2
> 
> 时间：2012-11-02T19:45:57.817
> 
> 标签：node.js, mongoose

我有一台服务器启动并运行，没有抛出任何错误。我正在从 mongodb 流式传输数据。当数据完成流式传输时，我想调用“关闭”，然后断开 mongo 数据库。

以下是我拥有的代码。当我尝试连接到服务器时，第一个请求成功，但任何其他请求都失败。

当我试图检查 mongodb 是否被断开时，我发现它不是。

你如何使用 a`mongoose.connection.close()`以及它什么时候会失败？

```
var http = require('http')
  , url = require('url')
  , mongoose = require('mongoose')
  , Schema = mongoose.Schema
  , server, n;

server = http.createServer(function(request, response) {
  var path = url.parse(request.url).pathname.slice(0, 4);
  n = url.parse(request.url).pathname.slice(5);

  // connect to mongo
  mongoose.set('debug', true);
  mongoose.connect('localhost', 'lotsOfNumber');
  mongoose.connection.on('error', function(err) {
    console.error('connection error: ' + err);
  });

  mongoose.connection.on('open',function() {

    var stuff = mongoose.model('numbersHere', new Schema({serialNumber: Number}, {safe: true}));

    switch (path) {

      case '/slq':

        var stream = stuff.find({}).limit(1).skip(n).sort('field value').stream();

        stream.on('error', function(err) {
          console.error("Error trying to stream from collection:" + err);
        });

        stream.on('data', function(doc) {
          response.writeHead(200, {'Content-Type': 'text/plain'});
          response.write(doc.value.toString() + '\n', 'utf8');
          response.end();
        });

        stream.on('close', function() {
          mongoose.connection.close();
          mongoose.connection.on('close', function() {console.log('closed');});
        });

        break;

      default:
        console.log('nothing');
        mongoose.connection.close();
        break;
    }
  });
});

server.listen(8080); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T21:53:14.353

我一直使用这样的模式：

```
mongoose.connect('localhost', 'lotsOfNumber');
...
mongoose.disconnect(); 
```

但是你不应该像你一样在每个请求上连接和断开连接。相反，在应用程序启动期间连接并在关闭期间断开连接。

`mongoose.connect`打开并发请求可以共享的连接池。

# javascript - 使用 jQuery 解析 JSON 时出现错误：NOT_FOUND_ERR：Chrome 中的 DOM 异常 8

> ID：13202033
> 
> 赞同：1
> 
> 时间：2012-11-02T19:46:01.650
> 
> 标签：javascript, jquery

我在使用 JSFiddle 和 Chrome 的控制台中收到此错误：http: [//jsfiddle.net/YdM8n/2/](http://jsfiddle.net/YdM8n/2/)尝试使用 jQuery 解析 Flickr 提要时。

代码：

```
// a flickr rss feed i am trying to parse.
var yql3 = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D%22http%3A%2F%2Fapi.flickr.com%2Fservices%2Ffeeds%2Fphotos_public.gne%3Fid%3D76250020%40N04%26lang%3Den-us%26format%3Drss_200%22&format=json&diagnostics=true&callback=?";

$.getJSON(yql3, function(cbfunc) {

    var eachImageArr = $(cbfunc.query.results.rss.channel.item);

    $(eachImageArr).each(function() {
        $('body').append(this.description);
    });

});​ 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:51:41.487

问题是在数组的第 18 个元素中，描述实际上是一个数组，第一个元素是您所期望的，第二个元素是另一个对象。

```
description: Array[2]
0: "            <p><a href="http://www.flickr.com/people/jonathanbell/">jonathanbell.ca</a> posted a photo:</p>↵    ↵&lt;p><a href="http://www.flickr.com/photos/jonathanbell/7290239398/" title="120405_sophia_004"><img src="http://farm8.staticflickr.com/7075/7290239398_3c4b7905da_m.jpg" width="180" height="240" alt="120405_sophia_004" /></a></p>↵↵<p>sophia dishaw</p>"
1: Object
    content: "<p>sophia dishaw</p>"
    type: "html" 
```

我对 flickr api 不够熟悉，无法告诉您第二个字段是什么，但它似乎是一个名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:12:54.683

如果您查看返回的实际 JSON，您会注意到该`description`项目的可能格式可以是：

```
"description": ["html stuff", {some object}] 
```

在遍历每个描述时，您可以检查它是否是一个数组，如果是，则将`[0]`索引附加到正文。就像是：

[http://jsfiddle.net/YdM8n/5/](http://jsfiddle.net/YdM8n/5/)

```
var eachImageArr = cbfunc.query.results.rss.channel.item;

$.each(eachImageArr, function() {
    if ($.isArray(this.description)) {
        $("body").append(this.description[0]);
    } else {
        $("body").append(this.description);
    }
}); 
```

但显然，API 需要进行更多调查，以确保不会发生其他特殊情况……或者至少尝试解释类似的情况。

# php - 脚本不上传照片

> ID：13202034
> 
> 赞同：0
> 
> 时间：2012-11-02T19:46:04.333
> 
> 标签：php, mysql

好的，所以我有一个脚本，它从表单中获取数据插入数据库并上传图片，它将所有信息插入数据库但不上传图片。

代码如下，我对 PHP 很陌生，非常感谢您的建议。

谢谢 ：-）

```
//This is the directory where images will be saved 
 $target = "../restaurants/images/"; 
 $target = $target . basename( $_FILES['photo']); 

 //This gets all the other information from the form 
 $rest_name=$_POST['rest_name']; 
 $address1=$_POST['address1']; 
 $address2=$_POST['address2']; 
 $town=$_POST['town']; 
 $postcode=$_POST['postcode'];
 $open_time=$_POST['open_time']; 
 $halal=$_POST['halal'];
 $deliver_areas=$_POST['deliver_areas'];
 $deliver_time=$_POST['deliver_time'];
 $type=$_POST['type'];    
 $photo=($_FILES['photo']); 

  mysql_select_db(restaurants);

 //Writes the information to the database 
    mysql_query("INSERT INTO `restaurants` VALUES ('', '$rest_name', '$address1', '$address2', '$town', '$postcode', '$open_time', '$halal', '$deliver_areas', '$deliver_time', '$type', '$photo')") ;  
    if( mysql_errno() != 0){
     // mysql error
     // note: message like this should never appear to user, should be only stored in log
     echo "Mysql error: " . htmlspecialchars( mysql_error());
     die();
}

 //Writes the photo to the server 
 if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 

 { 

 //Tells you if its all ok 
header('Location: add-restaurant.php?added');
 } 
 else { 

 //Gives and error if its not 
header('Location: add-restaurant.php?fail');
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:29:49.200

使用以下代码。希望它会帮助你。

```
if ($_FILES["photo"]["size"] < 30000) // specify file size here file size 
{
  if ($_FILES["photo"]["error"] > 0)
{
echo "Return Code: " . $_FILES["photo"]["error"] . "<br />";
}
else
{

if (file_exists("../restaurants/images/" . $_FILES["photo"]["name"]))
  {
  echo $_FILES["photo"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["photo"]["tmp_name"],"../restaurants/images/" . $_FILES["photo"]["name"]);     
$rest_name=$_POST['rest_name']; 
$address1=$_POST['address1']; 
$address2=$_POST['address2']; 
$town=$_POST['town']; 
$postcode=$_POST['postcode'];
$open_time=$_POST['open_time']; 
$halal=$_POST['halal'];
$deliver_areas=$_POST['deliver_areas'];
$deliver_time=$_POST['deliver_time'];
$type=$_POST['type'];  
$photo=$_FILES["photo"]["name"]  ;  

mysql_select_db(restaurants);
//Writes the information to the database 
mysql_query("INSERT INTO `restaurants` VALUES ('', '$rest_name', '$address1', '$address2', '$town', '$postcode', '$open_time', '$halal', '$deliver_areas', '$deliver_time', '$type', '$photo')") ;  
if( mysql_errno() != 0)
{
 // mysql error
 // note: message like this should never appear to user, should be only stored in log
 echo "Mysql error: " . htmlspecialchars( mysql_error());
 die();

}

  }
}
} 
```

# c# - x64 上的 VS 2012 性能分析器

> ID：13202037
> 
> 赞同：2
> 
> 时间：2012-11-02T19:46:14.620
> 
> 标签：c#, visual-studio-2010, visual-studio

有没有人尝试在 x64 机器上运行的 Visual Studio 2012（64 位）中分析 WCF Web 服务或任何 C# 项目？我在分析时无法加载 WoW64 符号和 dll。它配置文件，但由于失败，报告并没有真正包含数据。

> 无法加载 C:\Windows\SysWOW64\ntdll.dll 的符号 无法加载 C:\Windows\SysWOW64\mscoree.dll 的符号 无法加载 C:\Windows\Microsoft.NET\Framework\v4.0.30319\ 的符号mscoreei.dll 无法加载 C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll 的符号 无法加载 C:\Windows\SysWOW64\kernel32.dll 的符号 无法加载 C:\Windows 的符号\Microsoft.NET\Framework\v4.0.30319\clrjit.dll 为 C:\Windows\SysWOW64\KernelBase.dll 加载符号失败 为 C:\Windows\System32\ntdll.dll 加载符号失败 为 C 加载符号失败:\Windows\System32\wow64.dll

# asp.net - aspnet 会话丢失了所有回发，只是在 Firefox 中

> ID：13202045
> 
> 赞同：2
> 
> 时间：2012-11-02T19:46:39.617
> 
> 标签：asp.net, session

长话短说，在 Chrome 或 IE 中，我可以在我的网络应用程序上刷新我的心内容，会话仍然存在。在 Firefox 中，每次回发都会丢失会话（在 Global.asax 中调用 Session_End 方法）。

有什么建议么？这显然听起来像是浏览器配置问题......但我看不到任何会导致这种行为的东西。

更新：

所以事实证明是我的代码处理了浏览器的关闭。出于某种原因，在 Firefox 中，window.onunload 事件在每次回发时都会被触发（这称为结束会话的方法）。现在我必须弄清楚为什么 Firefox 会这样。每天我都少喜欢firefox了！

更新 2：原来使用 onunload 的行为与 Firefox 中记录的一样，但 Chrome 只是更聪明一些，仍在调查中，但我会将这个问题标记为已回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:50:16.970

我会确保您没有在 Firefox 中[禁用 cookie 。](http://support.mozilla.org/en-US/kb/enable-and-disable-cookies-website-preferences)根据 MSDN 的[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)：

> 默认情况下，SessionID 值存储在 cookie 中。

# android - Eclipse 更新后不工作

> ID：13202048
> 
> 赞同：0
> 
> 时间：2012-11-02T19:46:59.033
> 
> 标签：android, eclipse, ubuntu-12.04, adt

在 Eclipse 中，所有功能都丢失了。属性中只剩下 5 个选项卡：常规、帮助、安装/更新、运行/调试、团队。Eclipse 以 txt 格式打开所有 *.java 和 *.xml 文件（不突出显示）

我是 Eclipse 的新手，它可能很简单。但我认为它的发生是因为其中一个插件。我不知道如何检查它。在它发生之前，我更新了 Android 插件并重新启动。我不记得了，可能我也更新了其他东西。

Ubuntu 12.04、Eclipse 3.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:12:20.140

先试试这个：使用 -clean 命令行参数启动 Eclipse，这将清除缓存的插件信息。启动将需要更长的时间，但您只需执行一次。

如果这没有帮助，请转到帮助/关于。单击安装详细信息按钮。弹出的窗口有一个“安装历史”按钮，您可以在其中查看更改的内容。您还可以将更改还原。

# containers - 容器和包装器的区别

> ID：13202050
> 
> 赞同：17
> 
> 时间：2012-11-02T19:47:06.280
> 
> 标签：containers, wrapper

在编程语言（例如Java）中，`container`和之间有什么区别`wrapper`（或有区别）。我听说这两个术语都含糊其辞。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-02T19:54:47.687

在编程语言中，**容器**一词通常用于可以包含多个元素的结构，例如*Map*、*Set*或*List*。这些结构通常提供类似 的方法`contains`，如果对象可以包含多个项目，则这些方法在语义上是合适的。

相反，**包装器**是包装单个对象以提供更多功能和接口的东西。典型的例子是`Integer`Java中封装了基类型的类`int`。

# java - Java 字符串对象是字符数组吗？

> ID：13202051
> 
> 赞同：9
> 
> 时间：2012-11-02T19:47:08.160
> 
> 标签：java, arrays, string, object, chars

我是 Java 新手，并试图了解该语言的要领和基础知识。

***说 Java 字符串对象本质上是一个定义为不可变字符数组的类是否准确？***

我问这个是因为与 char 数组和字符串类相比，我对规范有点困惑......

[JLS 10.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.9)

> 10.9 字符数组不是字符串 在 Java 编程语言中，与 C 不同，char 数组不是字符串，而且字符串和 char 数组都不会以 '\u0000'（NUL 字符）结尾。String 对象是不可变的，也就是说，它的内容永远不会改变，而 char 数组具有可变元素。String 类中的 toCharArray 方法返回一个字符数组，该数组包含与 String 相同的字符序列。StringBuffer 类在可变字符数组上实现了有用的方法。

[JLS 4.3.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.3)

> 4.3.3 类字符串 String 类的实例表示 Unicode 代码点的序列。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T19:50:08.290

> 说 Java 字符串对象本质上是一个定义为不可变字符数组的类是否准确？

不，Java String 对象是（目前 - 这是我收集的可能正在更改的实现细节）一个*包含*几个字段的类：

*   A`char[]`包含实际字符
*   数组的起始索引
*   一个长度
*   一个缓存的哈希码，延迟计算

索引和长度的原因是几个字符串可以包含对相同的引用`char[]`。这被一些操作使用，例如`substring`（在许多实现中，无论如何）。

The important thing is the API for `String` though - which is very different to the API for an array. It's the API you would think of when you take the JLS definition into account: a `String` represents a sequence of Unicode code points. So you can take a subsequence (`Substring`), find a given subsequence (`indexOf`), convert it to an upper case sequence etc.

In fact the JLS would be slightly more accurate to call it a sequence of UTF-16 code units; it's entirely possible to construct a string which isn't a *valid* sequence of Unicode code points, e.g. by including one half of a "surrogate pair" of UTF-16 code units but not the other. There are parts of the API which *do* deal with the `String` in terms of code units, but frankly *most* developers spend *most* of the time treating strings as if non-BMP characters didn't exist.

# php - 使用 PHP 将变量添加到 mysql select 语句会破坏语句

> ID：13202054
> 
> 赞同：1
> 
> 时间：2012-11-02T19:47:13.710
> 
> 标签：php, mysql

我在 php 页面上使用了以下代码，我正试图让它工作，它运行第一个查询很好（这是一个插入）并将正确的值返回给 $orderid
但它不会返回接下来选择查询的任何内容，如果我取出变量 $myorderid 并输入一个数字，它将返回预期的结果，但是一旦我尝试使用变量，它什么也不返回。
我尝试过使用 mysql_escape_string、sprintf 和现在的 intval 方法，但似乎没有任何效果。
mysql 没有返回错误，只是一个空的结果集。

```
mysql_query($sSQL) or print(mysql_error());
$orderid = mysql_insert_id();

$myorderid =    $orderid;
$myquery = "SELECT cartOrderID, Sum(pDonationAmt) as amount 
FROM products INNER JOIN cart ON ( cartProdID = pID ) 
WHERE cartOrderID = " . intval($myorderid). " GROUP BY cartOrderID ";

$myresults = mysql_query($myquery);
while ($row = mysql_fetch_assoc($myresults)) 
  { error_log('orderid inserted is:.$orderid.' OrderID in   mysql:'.$row['cartOrderID'].' and the total is: '.$row['amount'], 3, 'inc/atestingdata.txt'); } 
```

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:49:16.353

尝试`intval($myorderid)`用引号括起来`'`，

```
 $myquery = "SELECT cartOrderID, Sum(pDonationAmt) as amount 
 FROM products INNER JOIN cart ON ( cartProdID = pID ) 
 WHERE cartOrderID = '" . intval($myorderid). "' GROUP BY cartOrderID "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:59:16.803

旧的“回声”可以帮助...尝试：

```
$myquery = "SELECT cartOrderID, Sum(pDonationAmt) as amount 
 FROM products INNER JOIN cart ON (pID = cartProdID) 
 WHERE cartOrderID = $orderid GROUP BY cartOrderID ";
echo $myquery; 
```

# cakephp - Cakephp 2.2 没有 mod_rewrite 重定向错误

> ID：13202057
> 
> 赞同：0
> 
> 时间：2012-11-02T19:47:34.863
> 
> 标签：cakephp, mod-rewrite, cakephp-2.2

我做了所有设置，不使用 mod_rewrite Apache 2.2 和 CakePHP。

Apache2 启动并运行，Cake 似乎也在运行。如果我去`http://127.0.0.1/cake/index.php`，所有绿色标签（使用 PostgreSQL 9.1）。我按照教程[创建了博客项目](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)并在`/var/www/cake/app/Controller/PostsController.php`（也有`CakeController`和文件） 创建了控制器文件。`AppController``PagesController`

正如教程所说，在模型目录中，我得到了 Post.php 和 AppModel。在 View 文件夹中，我创建了 Posts 文件夹以及文件 index.ctp 和 view.ctp。

当我键入一个 URL时，`http://127.0.0.1/cake/index.php?url=/posts/`它会转到 Cake 主文件夹的 index.php。它重定向到那里！例如，如果我将 URL 更改为`http://127.0.0.1/cake/index.php?url=/posts/view/1`（如教程）相同的内容。这张照片出了什么问题？

我的环境是 Debian 6.0-6 64bits。Apache2.2（随 SO 一起安装）、CakePHP 2.2.3 和 PHP 5.2.8（或更高版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:01:32.537

你确定这`mod_rewrite`是在重写吗？您可以发布您的 .htaccess 文件的内容 - 顶级目录中的一个（即 htdocs）和您的`app/webroot`目录中的一个吗？您的顶级目录是其中包含`app`和`lib`的目录。我怀疑你`RewriteRule`的两者都是错误的。无论如何，如果您没有更改这些文件，那肯定是错误的。:) 您不应该更改*中间* `.htaccess`文件 - `app`.

这已经在这里得到解答[，](https://stackoverflow.com/questions/1334746/htaccess-for-cakephp) CakeBook 在这里进行了[解释](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#apache-and-mod-rewrite-and-htaccess)。但我个人使用了一些不同的设置：

**/var/www/test.cake.lan/htdocs/.htaccess**

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^$ /app/webroot/ [L]
    RewriteRule (.*) /app/webroot/$1 [L]
</IfModule> 
```

**/var/www/test.cake.lan/htdocs/app/.htaccess**

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

**/var/www/test.cake.lan/htdocs/app/webroot/.htaccess**

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ /app/webroot/index.php?url=$1 [QSA,L]
</IfModule> 
```

# c - 为什么 MsgPack 键是 msgpack_object 类型的？

> ID：13202058
> 
> 赞同：0
> 
> 时间：2012-11-02T19:47:39.360
> 
> 标签：c, msgpack

在 MsgPack 的 C API 中，为什么键（例如 msgpack_object_kv 的键字段）是 msgpack_object 类型的？

[https://github.com/msgpack/msgpack-c/blob/master/src/msgpack/object.h](https://github.com/msgpack/msgpack-c/blob/master/src/msgpack/object.h)

为什么他们不只是 msgpack_object_raw？它们可以是任何类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:00:54.067

*它们可以是任何类型吗？*

是的。这正是键被表示为`msgpack_object`-s 的原因。

如果您查看[地图格式规范](http://wiki.msgpack.org/display/MSGPACK/Format+specification#Formatspecification-Maps)，您可以看到地图由`N`= 地图中的对数定义，其中：

> 奇数元素是键，键的下一个元素是它的关联值

因此，您可以自由使用任何类型的对象作为键。

这是一个示例（由 2 对组成的地图）来自`test/msgpackc_test.cpp`：

```
unsigned int map_size = 2;
/* ... */
msgpack_pack_map(&pk, map_size);
msgpack_pack_true(&pk);
msgpack_pack_false(&pk);
msgpack_pack_int(&pk, 10);
msgpack_pack_int(&pk, -10); 
```

如您所见，第一个键是 a `MSGPACK_OBJECT_BOOLEAN`，第二个键是 a `MSGPACK_OBJECT_POSITIVE_INTEGER`。

# wso2 - 连接到授权服务时的 wso2 身份服务器 axisfualt 消息

> ID：13202060
> 
> 赞同：1
> 
> 时间：2012-11-02T19:47:48.847
> 
> 标签：wso2, axis2, identity, wso2is

我一直在关注[http://hasini-gunasinghe.blogspot.com/2011/12/entitlement-service-xacml-pdp-as-web.html](http://hasini-gunasinghe.blogspot.com/2011/12/entitlement-service-xacml-pdp-as-web.html)上的博客，但每次尝试我都无法连接到身份服务器以下错误：

```
org.apache.axis2.AxisFault: Connection has been shutdown: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
        at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:78)
        at org.apache.axis2.transport.http.AxisRequestEntity.writeRequest(AxisRequestEntity.java:84)
        at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:499)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.authenticator.stub.AuthenticationAdminStub.login(AuthenticationAdminStub.java:659)
        at EntitlementClient.login(EntitlementClient.java:109)
        at EntitlementClient.main(EntitlementClient.java:79)
Caused by: com.ctc.wstx.exc.WstxIOException: Connection has been shutdown: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter m
ust be non-empty
        at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1692)
        at com.ctc.wstx.sw.BaseStreamWriter.close(BaseStreamWriter.java:288)
        at org.apache.axiom.util.stax.wrapper.XMLStreamWriterWrapper.close(XMLStreamWriterWrapper.java:46)
        at org.apache.axiom.om.impl.MTOMXMLStreamWriter.close(MTOMXMLStreamWriter.java:188)
        at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:197)
        at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
        ... 19 more
Caused by: javax.net.ssl.SSLException: Connection has been shutdown: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be
 non-empty
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.checkEOF(SSLSocketImpl.java:1293)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.checkWrite(SSLSocketImpl.java:1305)
        at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:43)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)
        at org.apache.commons.httpclient.ChunkedOutputStream.flush(ChunkedOutputStream.java:191)
        at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:99)
        at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
        at com.ctc.wstx.sw.BufferingXmlWriter.close(BufferingXmlWriter.java:194)
        at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1690)
        ... 24 more
Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:190)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1649)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1612)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1595)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1521)
        at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:64)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)
        at org.apache.commons.httpclient.ChunkedOutputStream.flush(ChunkedOutputStream.java:191)
        at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:99)
        at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
        at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:311)
        at org.apache.axiom.util.stax.wrapper.XMLStreamWriterWrapper.flush(XMLStreamWriterWrapper.java:50)
        at org.apache.axiom.om.impl.MTOMXMLStreamWriter.flush(MTOMXMLStreamWriter.java:198)
        at org.apache.axis2.databinding.ADBDataSource.serialize(ADBDataSource.java:91)
        at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
        at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:563)
        at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
        at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
        at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
        at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
        ... 20 more
Caused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:57)
        at sun.security.validator.Validator.getInstance(Validator.java:161)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:108)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:204)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:632)
        at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
        ... 36 more
Caused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:183)
        at java.security.cert.PKIXParameters.<init>(PKIXParameters.java:103)
        at java.security.cert.PKIXBuilderParameters.<init>(PKIXBuilderParameters.java:87)
        at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:55)
        ... 48 more 
```

我不知道为什么这一直出现，前一分钟一切都很好，然后我得到了这个。请帮忙，我正在尝试使用 wso2 产品，但缺乏支持是一项艰巨的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T18:42:44.570

请在您的课程中添加以下代码。这对我来说可以。双反斜杠在下面的寻址中很重要。

```
private AuthenticationAdminStub authstub = null;
System.setProperty("javax.net.ssl.trustStore","C:\\Tools\\wso2is-5.1.0\\wso2is-5.1.0\\repository\\resources\\security\\wso2carbon.jks");
System.setProperty("javax.net.ssl.trustStorePassword", "wso2carbon");
boolean loggedIn = authstub.login("admin", "admin", "localhost"); 
```

# c++ - 在 stl::set 中查找元素 based on member variable of object I have tried searching for this but couldn't really find a proper answer. I have a stl::set of a custom class I made. The class looks like class myObjec 问问题 问问题 2012-11-02T19:48:24.740 551 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have tried searching for this but couldn't really find a proper answer. I have a stl::set of a custom class I made. The class looks like class myObject{ public: int a; int b; int c; // constructor and operator < () } The < comparison is based on b and c but I want to find elements in the set by a. Is there a way to do that other than performing a linear search by iterating over the set and checking for myObject.a? I am trying to get a sorted container of myObject but I need to be able to find elements in that container by the identifier a which is not really involved in the < comparison. You can do it using boost::multi_index_container class myObject { public: int a; int b; int c; bool operator < (const myObject& obj) const { return b < obj.b; } }; using namespace boost::multi_index; typedef multi_index_container< myObject, indexed_by< ordered_unique <identity<myobject>>, // index by operator < ordered_unique <member<myobject, int,="" &myobject::a="">> // index by member a > > SetOfmyObjects; typedef SetOfmyObjects::nth_index<0>::type SetIndex_b; typedef SetOfmyObjects::nth_index<1>::type SetIndex_a; ... SetOfmyObjects s; const SetIndex_b& index_b = s.get<0>(); SetIndex_b::iterator it_b; for (it_b = index_b.begin(); it_b != index_b.end(); ++it_b) // ordered by b const SetIndex_a& index_a = s.get<1>(); SetIndex_a::iterator it_a; for (it_a = index_a.begin(); it_a != index_a.end(); ++it_a) // ordered by a c++stlset 4 1 回答 1 This answer is useful 2 你可以使用 boost::multi_index_container class myObject { public: int a; int b; int c; bool operator < (const myObject& obj) const { return b < obj.b; } }; using namespace boost::multi_index; typedef multi_index_container< myObject, indexed_by< ordered_unique <identity<myobject>>, // index by operator < ordered_unique <member<myobject, int,="" &myobject::a="">> // index by member a > > SetOfmyObjects; typedef SetOfmyObjects::nth_index<0>::type SetIndex_b; typedef SetOfmyObjects::nth_index<1>::type SetIndex_a; ... SetOfmyObjects s; const SetIndex_b& index_b = s.get<0>(); SetIndex_b::iterator it_b; for (it_b = index_b.begin(); it_b != index_b.end(); ++it_b) // ordered by b const SetIndex_a& index_a = s.get<1>(); SetIndex_a::iterator it_a; for (it_a = index_a.begin(); it_a != index_a.end(); ++it_a) // ordered by a 于 2012-11-02T20:21:59.313 回答 Related 1 java - 通过 Facebook ID 查询 Facebook FQL 5 c# - 我可以在 Linq Comparable 中使用 TryParse 吗？ 1 python - 为什么我的输出是空白的？ 1 entity-framework - 如何在 linq 查询中搜索多个关键字 1 java - 如何在考虑到 Stroke 的情况下计算路径边界框 3 java - Java 正则表达式（标点符号） 1 android - 带有 NoActionBar 的菜单按钮 1 c# - Teamforge actions 1 c# - SqlConnection 与 Sql 会话。他们的一生重合吗？ 1 css - Inline CSS produces different result then an equivalent CSS class Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</member<myobject,></identity<myobject></member<myobject,></identity<myobject>

> ID：13202067
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c++, stl, set

I have tried searching for this but couldn't really find a proper answer. I have a stl::set of a custom class I made.

The class looks like

```
class myObject{

public:
  int a;
  int b;
  int c;

// constructor and operator < ()
} 
```

The < comparison is based on `b` and `c` but I want to find elements in the set by `a`. Is there a way to do that other than performing a linear search by iterating over the set and checking for `myObject.a`? I am trying to get a sorted container of `myObject` but I need to be able to find elements in that container by the identifier `a` which is not really involved in the < comparison.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:21:59.313

你可以使用 boost::multi_index_container

```
class myObject
{
public:
    int a;
    int b;
    int c;
    bool operator < (const myObject& obj) const
    { return b < obj.b; }
};

using namespace boost::multi_index;
typedef multi_index_container<
    myObject,
    indexed_by<
        ordered_unique<identity<myObject> >, // index by operator <
        ordered_unique<member<myObject, int, &myObject::a> > // index by member a
  > 
> SetOfmyObjects;

typedef SetOfmyObjects::nth_index<0>::type SetIndex_b;
typedef SetOfmyObjects::nth_index<1>::type SetIndex_a; 
```

...

```
 SetOfmyObjects s;
    const SetIndex_b& index_b = s.get<0>();
    SetIndex_b::iterator it_b;
    for (it_b = index_b.begin(); it_b != index_b.end(); ++it_b)
        // ordered by b
    const SetIndex_a& index_a = s.get<1>();
    SetIndex_a::iterator it_a;
    for (it_a = index_a.begin(); it_a != index_a.end(); ++it_a)
        // ordered by a 
```

# vb.net - Lambda OrderBy 方法

> ID：13202068
> 
> 赞同：8
> 
> 时间：2012-11-02T19:48:33.587
> 
> 标签：vb.net, linq, lambda

我有一个图形类来检测我正在编写的某些业务逻辑中的循环依赖关系。我的绘图类构建了知道与其他节点的关系的节点。

我有 nodeList 作为 List(of Objects) 每个都有一个 List(of String)

我在想下面的代码行会产生正确的排序。我想错了。

```
nodeList.OrderByDescending(Function(x) x.Count) 
```

我想按 List(of String).Count 以降序重新排序我的 nodeList。

```
my List(of Object)
(0) | Count = 3
(1) | Count = 5
(2) | Count = 2

My desired output List(of Object)
(0) | Count = 5
(1) | Count = 3
(2) | Count = 2 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T19:52:25.567

`OrderByDescending`不会就地重新排序列表。它*返回*一个枚举器，您可以使用它来获取新的有序列表。您需要使用`.ToList()`来替换原始列表：

```
 nodeList = nodeList.OrderByDescending(Function(x) x.Count).ToList() 
```

# tsql - 如何根据另一个表中存在的另一个日期列更新日期字段的日期和月份？

> ID：13202070
> 
> 赞同：0
> 
> 时间：2012-11-02T19:48:34.803
> 
> 标签：tsql

> 我有两张桌子，即租户和单位。
> 
> dtleaseto 是租户表中的列。dtmovein 是单元表中的列。
> 
> 我只需要更新 dtleaseto 中存在的日期的月份和日期，即 dtmovein 前一天的时间段的月份和日期。
> 
> **例如，假设我的dtlease to 是****12** / 20 /2012 ，dtmovein 是 01/01/2011，那么我更新的 dtleaseto 将是 12/31/2012 。
> 
>  ***租户和单位之间的关系是tenant.hunit = unit.hmy
> 
> 在此先感谢您的帮助！！！:)**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:19:45.660

似乎你可能想要这样的东西：

```
UPDATE t
  SET dtleaseto = CONVERT(date, CAST(YEAR(t.dtleaseto) AS CHAR(4)) -- Year of dtleaseto
  +SUBSTRING(CONVERT(CHAR(8),DATEADD(day,-1,u.dtmovein),112),5,4)) -- MMDD part of dtmovein-1 day
FROM tenant t
JOIN unit u on t.hunit = u.hmy 
```**

# bash - 如何使用 Bash“读取”命令保护读取？

> ID：13202074
> 
> 赞同：13
> 
> 时间：2012-11-02T19:48:51.037
> 
> 标签：bash

你知道有一个内置的 Bash 命令，叫做`read`. 如果我想在我的脚本中这样做怎么办：

```
read PASSWROD 
```

当它提示我输入时，我的所有输入都是可见的。是否有替代命令可以使输入不可见。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T19:57:44.237

是时候学习如何手动 bash（在[`bash`](http://www.gnu.org/software/bash/manual/bash.html)手册中，即；这是来自 Bash 4.1 版）。相关选项是`-s`。

> ### [读](https://www.gnu.org/software/bash/manual/bash.html#index-read)
> 
> `read [-ers] [-a aname] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt]`
> 
> `[-t timeout] [-u fd] [name ...]`
> 
> 从标准输入中读取一行，或者从作为选项参数提供的文件描述符 fd 中读取一行`-u`，并将第一个单词分配给第一个名称，将第二个单词分配给第二个名称，依此类推，剩下的单词和分配给姓氏的中间分隔符。如果从输入流中读取的单词少于名称，则剩余的名称将分配为空值。IFS 变量值中的字符用于将行拆分为单词。反斜杠字符`\`可用于删除下一个字符读取和行继续的任何特殊含义。如果未提供名称，则将读取的行分配给变量 REPLY。返回码为零，除非遇到文件结尾、读取超时（在这种情况下，返回码大于 128），或者提供了无效的文件描述符作为`-u`.
> 
> 选项（如果提供）具有以下含义：
> 
> `-a aname`单词被分配给数组变量 aname 的顺序索引，从 0 开始。在分配之前，所有元素都从 aname 中删除。其他名称参数被忽略。
> 
> `-d delim`delim 的第一个字符用于终止输入行，而不是换行符。
> 
> `-e`Readline（参见第 8 章 [命令行编辑]，第 93 页）用于获取行。Readline 使用当前（或默认，如果行编辑之前未激活）编辑设置。
> 
> `-i text`如果使用 Readline 读取行，则在开始编辑之前将文本放入编辑缓冲区。
> 
> `-n nchars`read 在读取 nchars 字符后返回，而不是等待完整的输入行，但如果在分隔符之前读取的 nchars 个字符少于 nchars，则使用分隔符。
> 
> `-N nchars`read 在准确读取 nchars 字符后返回，而不是等待完整的输入行，除非遇到 EOF 或读取超时。输入中遇到的分隔符字符不会被特殊处理，并且在读取 nchars 字符之前不会导致 read 返回。
> 
> `-p prompt`在尝试读取任何输入之前显示提示，不带尾随换行符。仅当输入来自终端时才会显示提示。
> 
> `-r`如果给出此选项，则反斜杠不会充当转义字符。反斜杠被认为是该行的一部分。特别是，反斜杠换行对不能用作续行。
> 
> `-s`静音模式。如果输入来自终端，则不会回显字符。
> 
> `-t timeout` 如果在 timeout 秒内未读取完整的输入行，则导致读取超时并返回失败。timeout 可以是一个小数，小数点后面有一个小数部分。此选项仅在 read 正在从终端、管道或其他特殊文件读取输入时有效；从常规文件读取时它没有效果。如果 timeout 为 0，如果输入在指定的文件描述符上可用，则 read 返回成功，否则失败。如果超时，退出状态大于 128。
> 
> `-u fd`从文件描述符 fd 读取输入。

* * *

因此，修正错字后，您需要：

```
read -s -p "Password: " PASSWORD 
```

您可能希望`echo`在它之后立即添加一个，因为换行符也没有回显（尽管它不包含在密码中）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T19:55:06.100

您可以使用以下几行：

```
stty -echo
read -p "Password: " passw; echo
stty echo 
```

这将`echo`在密码读取之间打开和关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T19:55:00.070

您可以使用终端设置来关闭回声：

```
#!/bin/bash
# Disable echo
stty -echo

#Prompt and read password
printf "Password: "
read PASSWORD

# Turn echo back on
stty echo
printf "\n" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T00:55:03.150

```
read -s -p "Password: " passw 
```

在 bash 上工作

# c++ - C++11 或 boost 是否带有 char* 的散列函数？

> ID：13202075
> 
> 赞同：1
> 
> 时间：2012-11-02T19:48:52.573
> 
> 标签：c++, hash

我想在 unordered_map 中使用 C 风格的字符串。C++11 或 Boost 是否附带任何可以完成这项工作的东西？我能找到的最好的方法是 boost::collat​​e::hash，但我不想处理语言环境，而且我怀疑语言环境正确会使其变慢。所以我倾向于只使用 MurmurHash3。

如果您好奇，我想使用 C 风格的字符串而不是 std::string，因为大多数键都是字符串文字，这样我可以避免大量的分配和复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:56:37.143

不，事实并非如此，所以我最终使用了 Murmur 哈希。

# java - 添加 GWT 可视化库？

> ID：13202077
> 
> 赞同：0
> 
> 时间：2012-11-02T19:48:54.370
> 
> 标签：java, gwt

我正在尝试将 gwt-visualization 库导入到我的 java 项目中。我在一个名为 gwt-visualization-1.1.2.zip 的文件夹中下载了 API。我解压缩了它，现在我不知道如何处理这些文件。在我的 Eclipse 程序文件中是否有我应该移动 gwt-visualizations.jar 文件的位置？

我已经把它放在我的 .java 文件中......

```
import com.google.gwt.visualization.client.AbstractDataTable;
import com.google.gwt.visualization.client.VisualizationUtils;
import com.google.gwt.visualization.client.DataTable;
import com.google.gwt.visualization.client.Selection;
import com.google.gwt.visualization.client.AbstractDataTable.ColumnType;
import com.google.gwt.visualization.client.events.SelectHandler;
import com.google.gwt.visualization.client.visualizations.PieChart;
import com.google.gwt.visualization.client.visualizations.PieChart.Options; 
```

这在我的 .xml 文件中......

```
<inherits name='com.google.gwt.visualization.Visualization'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:38:44.493

只需在项目的构建路径中包含 gwt-visualizations.jar。

1.  转到项目的属性
2.  导航到 Java 构建路径
3.  转到标签库
4.  找到“添加外部 JAR ..”按钮
5.  添加可视化 jar

# java - 从 resolveException 访问模型

> ID：13202081
> 
> 赞同：0
> 
> 时间：2012-11-02T19:49:05.293
> 
> 标签：java, spring, file-upload

我是 Spring MVC 的初学者。我正在努力在控制器中实现 HandlerExceptionResolver 接口，以便它可以捕获 MaxUploadSizeExceededException。在此异常期间，我想将用户重定向到原始页面，该页面是特定记录 ID 的通用视图页面。

上传文件时，原始 id 在模型中传递。然而，当它到达 resolveException 方法时，似乎我不再有权访问该模型。

有没有办法通过检索模型的 id 将用户重定向到原始视图？

看起来棘手的部分是这种特殊类型的异常发生在它到达控制器之前。所以我不能在控制器中使用 try/catch 块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T15:44:55.203

如评论中所述，我目前在遇到 maxfilesize 异常时将用户重定向到通用错误消息页面。我会暂时将此答案标记为正确。

# ios - 在 iPhone 应用程序中单击按钮时显示拨号屏幕

> ID：13202082
> 
> 赞同：0
> 
> 时间：2012-11-02T19:49:09.327
> 
> 标签：ios

我的应用程序中有一个要求，那就是-单击按钮时，我们必须使拨号屏幕（呼叫屏幕）显示为下一个视图。有可能这样做吗？请建议我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:59:30.930

不能将拨号屏幕作为新视图打开。您只能离开您的程序并作为新进程打开默认的 iphone 对话屏幕（此时您的应用程序将在后台）。为此，请使用此代码拨打号码：

```
NSURL *phoneURL = [NSURL URLWithString:@"tel:12342333"];
[[UIApplication sharedApplication] openURL:phoneURL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:14:50.793

对于这个问题的更多读者，iOS 中的两个应用程序可以交互，本[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)展示了如何使用 iOS 中的 URL 方案完成此操作的演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:55:54.783

例如在您的操作按钮块中：

```
NSMutableString *phone = [[@"+ 12 34 567 89 01" mutableCopy] autorelease];
[phone replaceOccurrencesOfString:@" " 
                       withString:@"" 
                          options:NSLiteralSearch 
                            range:NSMakeRange(0, [phone length])];
[phone replaceOccurrencesOfString:@"(" 
                       withString:@"" 
                          options:NSLiteralSearch 
                            range:NSMakeRange(0, [phone length])];
[phone replaceOccurrencesOfString:@")" 
                       withString:@"" 
                          options:NSLiteralSearch 
                            range:NSMakeRange(0, [phone length])];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", phone]];
[[UIApplication sharedApplication] openURL:url]; 
```

# python - Beautiful Soup 为特定的 div 找到孩子

> ID：13202087
> 
> 赞同：41
> 
> 时间：2012-11-02T19:49:20.390
> 
> 标签：python, parsing, beautifulsoup

我试图用 Python->Beautiful Soup 解析一个看起来像这样的网页：![在此处输入图像描述](../Images/594841035c5404fa6f42899331a39c2d.png)

我正在尝试提取突出显示的 td div 的内容。目前我可以通过

```
alltd = soup.findAll('td')

for td in alltd:
    print td 
```

但我试图缩小范围以搜索“tablebox”类中的 tds，它仍然可能返回 30+，但比 300+ 更易于管理。

如何提取上图中突出显示的 td 的内容？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-02T19:58:47.480

知道 BeautifulSoup 在一个元素中找到的任何元素仍然具有与该父元素相同的类型是很有用的——也就是说，可以调用各种方法。

因此，对于您的示例来说，这有点工作代码：

```
soup = BeautifulSoup(html)
divTag = soup.find_all("div", {"class": "tablebox"})

for tag in divTag:
    tdTags = tag.find_all("td", {"class": "align-right"})
    for tag in tdTags:
        print tag.text 
```

`td`这将打印所有具有“align-right”类的标签的所有文本，这些标签的父`div`类具有“tablebox”类。

# java-ee-6 - 在无状态 ejb 中使用静态方法有意义吗？

> ID：13202091
> 
> 赞同：3
> 
> 时间：2012-11-02T19:49:53.400
> 
> 标签：java-ee-6, ejb-3.1

状态 ejb 旨在实现幂等性，并且不存储以前的用户交互。这对我来说听起来像是一种静态方法。

所以而不是拥有

```
 public void save(Entity e) { em.persist(e); } 
```

安全吗

```
 public static void save(Entity e) { em.persist(e); } 
```

在 EJB 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:58:26.927

不，因为静态方法不参与容器管理的事务、AOP、安全等。顺便说一句，您的第二个示例不会编译，`em`是由应用程序服务器注入的，它不能是静态的（？）

也没有这样的要求，即无状态 EJB 应该是幂等的并且没有状态（尽管有名称）。更不用说一旦你开始使用`static`方法，你就根本不需要 EJB...

# java - 拆分 METAR/TAF

> ID：13202096
> 
> 赞同：5
> 
> 时间：2012-11-02T19:50:11.527
> 
> 标签：java, regex

我得到以下输入，我想将其分成四个部分：

```
-
KPDX 021453Z 16004KT 10SM FEW007 SCT060 BKN200 11/09 A3002 RMK
     AO2 SLP166 T01060094 55008
TAF AMD KPDX 021453Z 0215/0312 10005KT P6SM FEW006 SCT060 BKN150
     FM021800 11005KT P6SM SCT050 OVC100
     FM022200 11007KT P6SM -RA OVC050
     FM030500 12005KT P6SM -RA OVC035
KSEA 021453Z 15003KT 10SM FEW035 BKN180 11/09 A3001 RMK AO2
     SLP168 60000 T01110089 58010
TAF AMD KSEA 021501Z 0215/0318 14004KT P6SM SCT020 BKN150
     FM021800 16005KT P6SM SCT025 OVC090
     FM030100 19005KT P6SM OVC070
     FM030200 15005KT P6SM -RA OVC045
     FM030600 16007KT P6SM -RA BKN025 OVC045 
```

它是 METAR，然后是 TAF，然后是 METAR，然后是 TAF。

输入规则：

1.  机场代码可以更改，但应始终为 3 或 4 个字母。
2.  METARS 将以机场代码或“SPECI”开头，后跟机场代码 (SPECI KPDX)。
3.  TAF 将以机场代码或“TAF AMD”开头，后跟机场代码 (TAF AMD KPDX)。
4.  在任何报告中，机场代码后面总是跟日期时间戳。
5.  在 TAF 中，日期时间戳后面总是跟着有效时间（例如 0215/0318）。
6.  报告可能少至 2 个，也可能多于 4 个。
7.  任何报告都可能只是一行。

我想自己获取每个报告，所以我`^(\\w+.*?)(?:^\\b|\\Z)`在以下代码中使用正则表达式：

```
ArrayList<String> reports = new ArrayList<String>();
Pattern pattern = Pattern.compile( "^(\\w+.*?)(?:^\\b|\\Z)", Pattern.DOTALL|Pattern.MULTILINE );
Matcher matcher = pattern.matcher( input );
while( matcher.find() )
    reports.add( new String( matcher.group( 1 ).trim() ) ); 
```

效果很好，我得到 4 个结果：

1：

```
KPDX 021453Z 16004KT 10SM FEW007 SCT060 BKN200 11/09 A3002 RMK
     AO2 SLP166 T01060094 55008 
```

2：

```
TAF AMD KPDX 021453Z 0215/0312 10005KT P6SM FEW006 SCT060 BKN150
     FM021800 11005KT P6SM SCT050 OVC100
     FM022200 11007KT P6SM -RA OVC050
     FM030500 12005KT P6SM -RA OVC035 
```

3：

```
KSEA 021453Z 15003KT 10SM FEW035 BKN180 11/09 A3001 RMK AO2
     SLP168 60000 T01110089 58010 
```

4：

```
TAF AMD KSEA 021501Z 0215/0318 14004KT P6SM SCT020 BKN150
     FM021800 16005KT P6SM SCT025 OVC090
     FM030100 19005KT P6SM OVC070
     FM030200 15005KT P6SM -RA OVC045
     FM030600 16007KT P6SM -RA BKN025 OVC045 
```

我遇到了我的正则表达式失败的情况。有时，TAF 行会运行太长并且会被包裹（我无法控制），所以它可能看起来像（注意“TAF AMD PDX”下方的“BKN150”）：

```
-
KPDX 021453Z 16004KT 10SM FEW007 SCT060 BKN200 11/09 A3002 RMK
     AO2 SLP166 T01060094 55008
TAF AMD KPDX 021453Z 0215/0312 10005KT P6SM FEW006 SCT060
BKN150
     FM021800 11005KT P6SM SCT050 OVC100
     FM022200 11007KT P6SM -RA OVC050
     FM030500 12005KT P6SM -RA OVC035
KSEA 021453Z 15003KT 10SM FEW035 BKN180 11/09 A3001 RMK AO2
     SLP168 60000 T01110089 58010
TAF AMD KSEA 021501Z 0215/0318 14004KT P6SM SCT020 BKN150
     FM021800 16005KT P6SM SCT025 OVC090
     FM030100 19005KT P6SM OVC070
     FM030200 15005KT P6SM -RA OVC045
     FM030600 16007KT P6SM -RA BKN025 OVC045 
```

发生这种情况时，我得到 5 个结果：

1：

```
KPDX 021453Z 16004KT 10SM FEW007 SCT060 BKN200 11/09 A3002 RMK
     AO2 SLP166 T01060094 55008 
```

2：

```
TAF AMD KPDX 021453Z 0215/0312 10005KT P6SM FEW006 SCT060 
```

3：

```
BKN150
     FM021800 11005KT P6SM SCT050 OVC100
     FM022200 11007KT P6SM -RA OVC050
     FM030500 12005KT P6SM -RA OVC035 
```

4：

```
KSEA 021453Z 15003KT 10SM FEW035 BKN180 11/09 A3001 RMK AO2
     SLP168 60000 T01110089 58010 
```

5：

```
TAF AMD KSEA 021501Z 0215/0318 14004KT P6SM SCT020 BKN150
     FM021800 16005KT P6SM SCT025 OVC090
     FM030100 19005KT P6SM OVC070
     FM030200 15005KT P6SM -RA OVC045
     FM030600 16007KT P6SM -RA BKN025 OVC045 
```

任何人都可以找出一个正则表达式来正确分割这个奇怪的情况吗？或者，我可以在运行正则表达式之前尝试删除输入字符串中的问题换行符，但我不知道如何检测它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:57:54.050

您可以从以字母开头的行开始。然后收集至少一行，以五个空格开头（您可以轻松地将该条件放宽为至少一个空格字符或其他内容）。然后一直到以单词字符开头的下一行。

```
"^(\\w+.*?^[ ]{5}.*?)(?:^\\b|\\Z)" 
```

周围的`[]`空间不是必需的，但我喜欢将它们包括在内以提高可读性。如果您只想断言有一行以任何空格开头，请替换`[ ]{5}`为`\\s`.

请注意，您不必使用捕获组。前瞻将确保您在新报告或文件末尾之后的位置结束：

```
"^\\w+.*?^[ ]{5}.*?(?=^\\b|\\Z)" 
```

这稍微更有效，并且稍微清理了以下代码（因为您可以使用完整匹配而不是检索组。

**更新：**

为了适应单行报告的可能性（并且通常），更改结束条件`^\\b`以匹配新报告的开头更加容易。根据评论中给出的格式描述，您可以使用：

```
"^\\w+.*?(?=^(?:SPECI\\s|TAF\\sAMD\\s)?[A-Z]{3,4}\\s\\d+Z|\\Z)" 
```

这要求新报告以“可选 SPECI”-“3 或 4 个字母”-“时间戳”或“可选 TAF AMD”-“3 或 4 个字母”-“时间戳”开头。

# php - 我应该在 MySQL 中使用什么数据类型来存储 XSD 格式的日期时间？

> ID：13202098
> 
> 赞同：1
> 
> 时间：2012-11-02T19:50:21.923
> 
> 标签：php, mysql, datetime, datetime-format, type-conversion

我一直在考虑这两个选项：

**选项A：** 使用`DATETIME`字段并在从字段中拉出后将其转换为xsd格式

**选项 B：** 使用`VARCHAR`字段并将其转换为 xsd 格式，然后再将其插入字段

也许这两个选项同样有效，但也许还有一个我还没有考虑过的选项 C。

如果它有所作为，那就是我正在制作的桌子的要求。该字段的数据定义如下：

`A date in xsd:dateTime format: [-]CCYY-MM-DDThh:mm:ss[Z|(+|-)hh:mm]`

例子： `2001-10-26T21:32:52`

我将使用 php 来读取和写入这个数据库，我知道 mysql 和 php 都有大量的日期/时间函数。

在这种情况下，最好的数据类型和读/写方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:56:12.947

这取决于您需要对该专栏做什么，以及您要进入的内容。

例如，如果您必须在查询中操作值，那么 a`DATETIME`看起来不错，但是如果您需要将其输出回 XSD，那么时区中的信息是否相关？因为即使您使用 正确阅读`CONVERT_TZ()`，日期时间列也会丢失您的信息。

因此，如果您需要“时间点”，请将其转换为 UTC 并将其存储为日期时间。如果您还需要以相同方式重新生成它，请将 TZ 存储在辅助列中。

如果你对这些信息什么都不做，那就保持原样`VARCHAR`——你仍然可以改变想法。“仅限日期时间列”是您无法摆脱的唯一选择。

# oracle - 检查 varchar 是否是 Oracle 表单中的数字

> ID：13202105
> 
> 赞同：1
> 
> 时间：2012-11-02T19:51:16.083
> 
> 标签：oracle, oracle10g, oracleforms

如何检查 varchar 是数字还是包含 Oracle 表单中的任何特殊字符。

我尝试使用下面的代码，但它给了我逻辑错误

```
declare
    v_valid varchar2(15);
begin
    v_valid := :HEADERS.REFERENCE ;
If NOT v_valid IN ('0','1','2','3','4','5','6','7','8','9') then
        message('Characters or Special Symbols are not allowed here');
end if; 
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:43:20.337

尝试将其转换为数字并捕获异常。

```
 vVarchar varchar2(15) := '15';
    nNumber number;
    BEGIN
        nNumber := to_number(vVarchar);         
        message('Success!!');
    EXCEPTION WHEN VALUE_ERROR THEN
        message('Characters or Special Symbols are not allowed here');
    END; 
```

~~这实际上就是你正在做的事情~~，`If v_valid NOT Between '0' AND '9' then`你会遇到很多这样的输入问题：`'2aas', '9&%$'`

考虑`:HEADERS.REFERENCE`在对象的属性中更改为数​​字，应该更容易。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T20:29:50.870

我能够解决它。这是代码

```
declare
    v_valid varchar2(15);
begin
    v_valid := :HEADERS.REFERENCE ;
If v_valid NOT Between '0' AND '9' then
        message('Characters or Special Symbols are not allowed here');
end if; 
end; 
```

# java - PGoolingDataSource 的数据库池？

> ID：13202107
> 
> 赞同：4
> 
> 时间：2012-11-02T19:51:28.733
> 
> 标签：java, postgresql, jdbc, connection-pooling

当我使用 PGPoolingDataSource 类创建数据库池时遇到问题，一段时间后，当许多用户正在工作并且没有显示错误时，池会关闭

创建池的类的代码是：

```
public class PgConexion {
    private static PgConexion _instancia = new PgConexion(); // instancia de la clase
    private Configuracion config;
    private PGPoolingDataSource source;

    /**
     * instancia la clase y carga las opciones de configuracion
     */
    public PgConexion() {
        final URL archivo = Constantes.RUTA_CONFIG;

        if(archivo != null){
            config = new Configuracion(archivo);
        }
    }

    /**
     * regresa la instancia del pool de conexiones
     * @return
     */
    public static PgConexion getInstance() {
        return _instancia;
    }

    /**
     * crear la conexion la conexion
     * @return
     * @throws SQLException
     */
    public void crearConexion() throws SQLException{
        source = new PGPoolingDataSource(); 

        // configuracion del pool
        source.setDataSourceName("Logistica");
        source.setServerName(config.get("servidor_sql"));
        source.setPortNumber(Integer.parseInt(config.get("puerto_sql")));
        source.setDatabaseName(config.get("bd_sql"));
        source.setUser(config.get("usuario_sql"));
        source.setPassword(config.get("contrasena_sql"));
        source.setMaxConnections(30);
    }

    /**
     * devuelve la conecion a utilizar
     * @return
     * @throws SQLException
     */
    public Connection nuevaConexion() throws SQLException{
        if(source == null){
            crearConexion();
        }

        // genero la conexion de la lista del pool
        return source.getConnection();
    }

    /**
     * Cierra las conexiones y libera los recursos
     */
    public void cerrarConexion(){
        source.close();
    }
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T00:35:57.867

正如[JDBC 文档所解释的，使用](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/PGPoolingDataSource.html)**PGPoolingDataSource**不是一个好主意。

基本问题是**getConnection()**的调用将被阻止，直到达到连接限制时关闭连接。

您已将值 30 设置为并发连接的最大数量，因此如果打算打开第 31 个，它将导致线程阻塞进行调用。

可能的解决方案：

*   如果您确定实际并发连接数上限，请增加**maxConnections 。****您还应该检查postgresql.conf**中的服务器端连接限制。
*   使用[PGSimpleDataSource](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/PGSimpleDataSource.html)。根据应用程序的类型，不使用连接池（因此每次都创建连接）不会有问题。
*   如果你真的需要一个连接池，只需在 Java 级别实现你自己的。

编辑：您可以通过简单地运行来检查打开的连接数量：

```
SELECT * FROM pg_stat_activity 
```

每一行都是一个连接（包括来自 pgAdmin 和查询分析器的连接）。如果您确定连接数不应该增加到上限（但确实如此），那么您可能遇到了某种连接泄漏问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:44:11.223

如果我的经验适用，问题可能不在这里，而是您的客户并不总是出于某种原因关闭他们的连接 - 通常是因为在错误处理场景中忘记这样做。

处理这种情况的最佳方法因情况而异。如果客户端是你自己的代码，那和客户端是未知组织中不知名的人编写的代码有很大不同。

# linux - gnuplot 读取 unix 时间戳

> ID：13202108
> 
> 赞同：16
> 
> 时间：2012-11-02T19:51:29.217
> 
> 标签：linux, gnuplot

我有一个包含这种格式数据的文件：

```
1351649601.045 421 2945
1351649601.684 1036 28591
1351649603.310 128 1620
1351649603.413 93 0
1351649603.375 132 1762
1351649603.318 218 1761
1351649603.434 412 176
1351649603.441 520 5780
1351649603.480 565 11070
1351649603.556 644 11535

gnuplot> set term png
Terminal type set to 'png'
gnuplot> set output "output.png"
gnuplot> plot "data.txt" using 1:2 with lines 
```

但是，gnuplot 无法正确读取日期。你有什么想法？

**解决了：**

```
set term png xffffff
set output "output.png"
set size 17,17
set title "HTTP payload size and response time"
set style data fsteps
set xlabel "Date"
set timefmt "%s"
set format x "%m/%d/%Y %H:%M:%S"
set xdata time
set ylabel "Payload/Response time"
set grid
set key left
plot 'response' usi 1:2 with linespoints 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T22:46:53.393

抱歉，似乎无法删除。本来打算建议：

```
set xdata time
set timefmt "%s"
set format x "%m/%d/%Y %H:%M:%S"
plot "file.txt" using 1:2 with linespoints 
```

但它会截断分数并从线上删除点。

# java - 编译 PlayN Flash 样本

> ID：13202110
> 
> 赞同：1
> 
> 时间：2012-11-02T19:51:34.727
> 
> 标签：java, maven, playn

我一直在按照[本](https://github.com/consiliens/blog/wiki/Compiling-PlayN-Flash)指南在 eclipse indigo 中启动和运行。在此过程中遇到了一些重大问题（最大的是切换到 gwt 2.3），但我设法让它编译 as 文件。问题是当它开始创建 swf 时，我得到了这个 flash 编译错误：

```
 C:\Users\ted\AppData\Local\Temp\1351877287607-0\testsgameflash.as(145): col: 220 Error: Incorrect number of arguments.  Expected no more than 1.

function $replace_0(this$static,from,to){var regex;if(from<256){regex=toPowerOfTwoString(from);regex='\\x'+'00'.substring(regex.length)+regex}else{regex=String.fromCharCode(from)}return this$static.replace(RegExp(regex,'g'),String.fromCharCode(to))}

C:\Users\ted\AppData\Local\Temp\1351877287607-0\testsgameflash.as(146): col: 131 Error: Incorrect number of arguments.  Expected no more than 1.

function $replaceAll(this$static,regex,replace){replace=__translateReplaceString(replace);return this$static.replace(RegExp(regex,'g'),replace)} 
```

看起来它将值转换为“RegExp”，而不是创建 RegExp 的新实例。我不确定哪里出了问题，我只是想知道我能做些什么来修复它并编译所有内容

# c++ - 将一个迭代器的值赋给另一个迭代器 C++

> ID：13202114
> 
> 赞同：6
> 
> 时间：2012-11-02T19:51:47.047
> 
> 标签：c++, dictionary, stl, iterator

假设我有一个迭代器`it`，它指向`map`.
我还有另一个迭代器`it1`，我想做这样的事情

```
it1 = it + 1; 
```

我们如何在 C++ 中实现这一点，因为上面的语句在 C++ 中给出了错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:56:13.317

在 C++11 中，你说`auto it1 = std::next(it, 1);`.

在此之前，您必须说：

```
std::map<K, T>::iterator it1 = it;
std::advance(it1, 1); 
```

别忘了`#include <iterator>`。

# iphone-5 - 适用于 iPhone 5 屏幕的 Flex 移动应用程序

> ID：13202116
> 
> 赞同：2
> 
> 时间：2012-11-02T19:52:01.387
> 
> 标签：iphone-5, flex-mobile

我刚刚在 iPhone 5 上测试了我的第一个 Flex 移动应用程序，但我假设它不适合新的 4" 屏幕。有人知道这是否已经可行吗？（使用 Flex 4.6 SDK）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T13:18:09.663

这有点愚蠢，但它有效。首先，确保[在 Flash Builder eclipse 插件目录中安装](http://helpx.adobe.com/flash-builder/kb/overlay-air-sdk-flash-builder.html)[了最新的 AIR SDK](http://www.adobe.com/devnet/air/air-sdk-download.html) 。这将确保以下技巧确实有效。

现在，转到您的项目主 MXML 文件（如果您正在构建一个基于视图的项目，该项目将是一个 ViewNavigatorApplication 类实例）。在打开的 ViewNavigatorApplication 标记中，为 splashScreenImage 放置一个值为“@Embed('Default-568h@2x.png')”的属性。它应该看起来像这样……</p>

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                        xmlns:s="library://ns.adobe.com/flex/spark"
                        firstView="views.myFirstView"
                        splashScreenImage="@Embed('Default-568h@2x.png')"> 
```

现在，制作一个 640w x 1136h 的初始屏幕 png 并将其命名为“Default-568h@2x.png”。将该图像文件放在项目的根目录（可能是您的“src”目录）中。为您的 iPhone 5 目标编译，瞧！

事实证明，AIR 会寻找较大的初始屏幕文件作为您定位 iPhone 5 屏幕尺寸的指标。app.xml 文件中没有设置。代码中没有属性。就是那个 splashScreenImage 文件名。

这很明显，对吧？

至于为不同的屏幕尺寸创建不同的布局，Rich Tretola 有一本非常便宜的书，iOS Applications with Flex 4.5，它讨论了使用@media 查询的响应式设计。[他的网站上有一段可能会有所帮助的摘录](http://blog.everythingflex.com/2011/08/18/styling-air-applications-for-ios-part-1/)……但这本书便宜、实用且易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T07:25:03.563

您可以像这样动态更改启动画面：

```
<?xml version="1.0" encoding="utf-8"?>
<s:SplashScreenImage xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark">  

    <fx:Script>
        <![CDATA[
            override public function getImageClass(aspectRatio:String, dpi:Number, resolution:Number):Class 
            {
                var x:Number = Capabilities.screenResolutionX;
                var y:Number = Capabilities.screenResolutionY;

                // HTC
                if ((x == 480) && (y == 800)) return img_480_800.source;

                // iPhone 5
                if ((x == 640) && (y == 1136)) return img_1080_1920.source;

                // iPhone 4
                if ((x == 640) && (y == 960)) return img_640_960.source;

                // Samsung galaxy s3
                if ((x == 720) && (y == 1280)) return img_720_1280.source;

                // Samsung galaxy s4
                if ((x == 1080) && (y == 1920)) return img_1080_1920.source;

                // Default
                return img_1080_1920.source;
            } 
        ]]>
    </fx:Script>

    <s:SplashScreenImageSource id="img_480_800" source="@Embed('Default_480_800.png')"/>
    <s:SplashScreenImageSource id="img_640_960" source="@Embed('Default@2x.png')"/>
    <s:SplashScreenImageSource id="img_720_1280" source="@Embed('Default_720_1280.png')"/>
    <s:SplashScreenImageSource id="img_1080_1920" source="@Embed('Default-568h@2x.png')"/>

</s:SplashScreenImage> 
```

……

```
splashScreenImage="DynamicSplashScreen" 
```

# excel - 冻结 Excel UDF 结果或加快速度（很多！）？

> ID：13202117
> 
> 赞同：1
> 
> 时间：2012-11-02T19:52:10.477
> 
> 标签：excel, vba

Excel 2010，Windows 7

我有一个很慢的UDF。它目前正在 4,500 个单元中使用，这可能是一个问题……但是如果 UDF 不能有效地使用几次以上会有什么好处？无论如何，表格计算只需不到 33 秒，结果不会“粘住”，所以如果我离开表格然后返回表格，单元格都是空白的，需要再次重新计算！这是UDF：

```
 Function SumEmployee(EmployeeName As String, ProgramCode As String, Optional bVolatile As Boolean) As Double
'Written tightly to keep execution as fast as possible. Search every sheet for the first instance of the given employee name and the first instance of
'the given program gl-code.  This will give a row-column (the intersection of the row & column) and the value in that cell location
'will be added up for each sheet in the workbook.  The final summed result is returned.
Dim lRow As Long, lCol As Long, wksSheet As Worksheet

Application.Volatile (bVolatile)  'http://msdn.microsoft.com/en-us/library/office/bb687891.aspx
SumEmployee = 0
For Each wksSheet In Worksheets
    With wksSheet
        If InStr(1, .Name, gTS_Sheet, vbTextCompare) > 0 And bVolatile Then  'Only pull from the TS Summary sheets when HS is visible
            On Error Resume Next  'Errors are part of the routine so this is purposeful
            lRow = .Range("A2:D100").Find(ProgramCode, , xlValues, xlWhole).Row
            lCol = .Range("C2:DA12").Find(EmployeeName, , xlValues, xlWhole).Column
            'If there were no errors then the items were found so sum new value otherwise skip and move to the next sheet
            If Err.Number = 0 Then
                SumEmployee = SumEmployee + .Cells(lRow, lCol).Value2  'No errors so get the value in the cell & add to the running total
            Else
                Err.Clear
            End If
            On Error GoTo 0  'Resume normal error handling
        End If
    End With
Next wksSheet
End Function 
```

这是使用 UDF 的工作表的代码：

```
Option Explicit

Private Sub Worksheet_Activate()
'Sheet is active so allow the UDF to function.
    ActiveWorkbook.Names("IsVolatile").RefersToR1C1 = "=TRUE"
End Sub

Private Sub Worksheet_Deactivate()
'Leaving sheet so turn off UDF updating so rest of the wkbk won't lag.
    ActiveWorkbook.Names("IsVolatile").RefersToR1C1 = "=FALSE"
End Sub 
```

这是 UDF 在单元格中的外观（请注意，前两个参数随着 UDF 放置在相邻单元格中而变化）：

```
=SumEmployee(D$5,$A6,IsVolatile) 
```

其中第一个参数是要搜索的员工姓名，第二个参数是要搜索的财务 GL 代码。第三个参数 IsVolatile 告诉函数只有在它所在的工作表可见时才运行（在我的应用程序的上下文中）。

UDF 在工作表“Master”中。其他表格是一个月的数据，顶部有员工姓名（每列一个员工姓名），左侧有 GL 代码（每行一个 GL 代码），因此形成了一个网格。行/列的交叉点是员工为该 GL 代码（特定程序）工作的小时数。UDF 会搜索员工和计划，因为它们可能每月都会发生变化，也就是说，新计划可能会在年中开始，因此它不会出现在较早的表格中。与员工一样，他们可以每月来来去去，因此 .Find 方法但我认为这可能是导致速度下降的原因——这就是为什么我使用指定范围的 ROUGHLY where 来搜索行或列而不是 .Find 。整个工作表的单元格。

1.  有可能加快这个速度吗？
2.  如何使结果“坚持”到下一次刷新？

谢谢你。

# c# - 起订量和互操作类型：在 VS2012 中有效，在 VS2010 中失败？

> ID：13202120
> 
> 赞同：11
> 
> 时间：2012-11-02T19:52:14.637
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, moq, excel-interop

我有一个包含大约 500 个单元测试的 .NET 库项目。所有这些测试在 Visual Studio 2012 中运行良好。但是，我的一些测试在 Visual Studio 2010 中失败了。在这些失败的测试中，我使用**Moq**来模拟来自`Microsoft.Office.Interop.Excel`. 尝试访问这些模拟互操作类型时，测试立即失败：

```
Error: Missing method 'instance class Microsoft.Office.Interop.Excel.Range [ExcelAddIn.Core] Microsoft.Office.Interop.Excel.ListRow::get_Range()' from class 'Castle.Proxies.ListRowProxy'. 
```

这个异常意味着我忘记在我的模拟上设置适当的属性获取器。事实并非如此：

```
_listRowMock.Setup(m => m.Range).Returns(_rangeMock.Object); 
```

现在我可以想象最小起订量可能不适用于互操作类型。但我觉得最令人费解的是，这些测试在 Visual Studio 2012 中运行良好，但在 Visual Studio 2010 中却失败了。

为什么我的 Visual Studio 会影响我的代码行为？

**更新：2012 年 3 月 11 日**

好的，所以我把它归结为：

*   我有两个项目；核心和 Core.UnitTest。Core 是实际的库，而 Core.UnitTest 是 Core 库的单元测试项目。
*   这两个项目都引用了启用了嵌入互操作类型的 Microsoft.Office.Interop.Excel。
*   因为启用了 EIT，所以两个项目都包含它们自己的 Microsoft.Office.Interop.Excel 库“视图”。该视图包括在各自项目中使用的所有类、方法和属性。
*   因为这两个项目使用 Microsoft.Office.Interop.Excel 的不同类、方法和属性，所以两个库的嵌入类型不同。例如，Core 中的 ListRow 具有 Index 和 Range 属性，而 Core.UnitTest 中的 ListRow 仅具有 Range 属性。
*   虽然这两种类型不同并且不共享一个公共接口或超类，但它们是**[等价](http://msdn.microsoft.com/en-us/library/dd997297.aspx)**的。这意味着 CLR 会将它们视为相同，并允许您跨程序集边界使用这些类型。例如，Core.UnitTest 中的 ListRow 实例在传递给 Core 库中的方法时可以正常工作。共享的 Range 属性将起作用，而缺少的 Index 属性将在访问时引发 MissingMethodException。
*   上述行为甚至适用于模拟类型。Mock[Excel.ListRow] 的模拟对象在跨越程序集边界时可以正常工作。
*   不幸的是，前一点中描述的行为仅在我在 Visual Studio **2012**中构建程序集时才有效。**当我在 Visual Studio 2010**中构建我的程序集并调试我的代码时，我可以看到模拟的 ListRow 实例被传递到我的核心项目的方法中。当实例越过程序集边界时，ListRow 的所有方法和属性都将失去其实现并抛出 MissingMethodExceptions。
*   现在对于有趣的部分，我实际上设法通过确保 ListRow 的两种嵌入式类型对齐来缓解这个问题。例如，为了让编译器在两个项目中创建相同的 ListRow 视图，我确保在我的 UnitTest 项目中使用了完全相同的方法和属性。这意味着添加虚拟行，例如：var dummy = listRow.Index。一旦我让编译器创建了我的嵌入式 ListRow 类型的相同视图，该实例就可以跨越程序集边界而不会丢失其实现。

但问题仍然存在：是什么导致了 Visual Studio 2010 和 Visual Studio 2012 之间的这种行为差异？

**更新：2012 年 9 月 11 日**

**演示解决方案**： http: [//temp-share.com/show/KdPf6066h](http://temp-share.com/show/KdPf6066h)

我创建了一个小解决方案来演示效果。该解决方案由一个库和一个 UnitTest 项目组成。两者都引用了启用 EIT 的 Microsoft.Office.Interop.Excel.Range。该测试在 VS2012 中运行良好，但在 VS2010 中抛出 MissingMethodException。在测试中取消注释虚拟行将使其在 VS2010 中工作。

**最后更新：29-12-2012**

我为迟到的更新道歉。我的一位同事找到了一个解决方案，但是我无法在我的机器上重现它。与此同时，我们公司已经切换到 TFS2012，所以这对我来说不再是一个阻塞问题。我的同事得出的两个最重要的结论是：

*   “任何 CPU”平台的语义已从 Visual Studio 2010 更改为 Visual Studio 2012。这将导致生成不同的 .DLL，具体取决于您使用的是 VS2010 还是 VS2012。
*   这两个项目都引用了不同版本的 Microsoft.Office.Interop.Excel。

我检查了我的项目并整理了参考资料，但没有任何区别。之后，我在 VS2010 和 VS2012 中尝试了不同的平台变体，但未能产生令人满意的结果。我会接受杰里米的回答，因为它是最有帮助的。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T03:44:57.700

**编辑：**当我在 Visual Studio 2012 中尝试它并以 .Net 4.0 为目标时，它对我有用，只使用 .Net PIA 而不是 COM ref。相同的解决方案在 VS2010 中不起作用。

VS2010 加载版本的 10.0.30319.1`Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll's`和 VS2012 加载版本的 11.0.50727.1。您可以在“模块”窗口中看到不同的版本。

* * *

**我设法让它在 VS2010 中工作：**

![在此处输入图像描述](../Images/e304a23645135d6d60f7a70fce6bdd61.png)

这是我的解决方案[http://temp-share.com/show/Pf3Ypip62](http://temp-share.com/show/Pf3Ypip62)为大家提供方便。它包含所有起订量参考。我有 Excel 2007（即 v12） - 所以请调整对 Office 14 的引用。

带有待测试方法的项目必须`Microsoft.Office.Interop.Excel`通过 .Net 参考选项卡使用 PIA。

在单元测试项目中，您必须`Microsoft Excel 1X.0 Object Library`通过 COM 引用选项卡使用 - 它是一个 ActiveX。

> 令人困惑的是在解决方案资源管理器中它们都被称为：Microsoft.Office.Interop.Excel

还有一个我不知道如何解决的警告 - 你必须使用 .Net 3.5 框架**，我实际上希望微软在 2012 年修复它，**因为我无法解决如何处理 .Net 4.0 中的所有项目. 一些针对 .Net 3.5 和 4.0 的混合项目的解决方案是可以的。

我遇到了很多麻烦，请参阅此处[如何在模拟 Excel.worksheet 时避免使用动态？](https://stackoverflow.com/questions/10843188/how-do-i-avoid-using-dynamic-when-mocking-an-excel-worksheet/12576300#12576300) 并且还看到我问的这个问题：[Mocked object doesn't have all properties shown in Intellisense - 在一个项目中，但在另一个项目中](https://stackoverflow.com/questions/9816243/mocked-object-doesnt-have-all-properties-shown-in-intellisense-in-one-project)。

无论如何，这是让它在 VS 2010 中工作的方法。我很高兴它在 2012 年得到解决！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T21:57:30.250

我试图重现这一点，对我来说，即使在 VS 2012 中它也不起作用。

当您使用“Embed Interop Types”编译项目时，C# 编译器会生成一个内部类型，该类型只有您正在访问的成员，而实现实际上似乎使用 IDispatch 通过 id 调用 COM 对象的方法。

根据您的描述，我了解到您在 VS 2012 中的测试项目*无法*访问属性（甚至无法模拟它们），但测试仍然成功，并且测试项目中生成的类型*确实*具有这些成员。

如果这确实是您遇到的情况，您能否查看您的测试 .dll 的内容并查看互操作类型是如何生成的？您可以使用诸如`ildasm.exe`.

如果测试 .dll 中的互操作类型包含所有成员，即使是您在测试中未访问的成员，这可能会提示差异与 VS 2012 中生成互操作类型的方式有关。

此外，如果您可以附加一个小的最小 VS 2012 解决方案来重现该问题，它可能对诊断有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T06:46:53.187

首先在 VS2010 中向项目添加库时检查，确保您创建了模拟对象，如

```
Mock<DocumentService> _mock = new Mock<DocumentService>(); 
```

.NET 4.0 还允许将主互操作程序集嵌入到您的程序集中，这样您就不需要将它们与您的应用程序一起部署。在 VS2010 中打开程序集中的属性选项卡并检查 Embed Interop types.mkae 确保其为真。

并实例化excel，`Excel.Application xlapp = new Excel.Application();`

希望它会工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-13T00:00:53.683

我发现，至少在 VS2015 中，我仍然可以将互操作类型嵌入到我的测试程序集中，但是在我的测试项目中的 PIA 程序集引用上将“Embed”设置为 false，我没有对此进行复制。

# hyperlink - 如何将链接名称复制到标题

> ID：13202123
> 
> 赞同：0
> 
> 时间：2012-11-02T19:52:36.453
> 
> 标签：hyperlink, copy, title

我想问怎么改标题

```
<a href="#" title="here">name</a> 
```

所以我想让链接名称自动复制到标题

所以如果我做这个代码

```
<a href="#">title link</a> 
```

至

```
<a href="#" title="title link">title link</a> 
```

如何在 php 或 javascript 中做到这一点

我知道一些 php

但需要在数据库链接中生成所有单词或为每个链接变量生成 $

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:59:08.073

我建议：

```
function textToTitle(elem, attr) {
    if (!elem || !attr) {
        // if function's called without an element/node,
        // or without a string (an attribute such as 'title',
        // 'data-customAttribute', etc...) then returns false and quits
        return false;
    }
    else {
        // if elem is  a node use that node, otherwise assume it's a
        // a string containing the id of an element, search for that element
        // and use that
        elem = elem.nodeType == 1 ? elem : document.getElementById(elem);
        // gets the text of the element (innerText for IE)
        var text = elem.textContent || elem.innerText;
        // sets the attribute
        elem.setAttribute(attr, text);
    }
}

var link = document.getElementsByTagName('a');

for (var i = 0, len = link.length; i < len; i++) {
    textToTitle(link[i], 'title');
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HW4SM/)。

由于提供简洁的 jQuery 选项似乎很传统：

```
$('a').attr('title', function() { return $(this).text(); }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HW4SM/6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:03:23.160

如果您不想使用库：

```
var allLinks = document.getElementsByTagName('a');
for(var i = 0; i < allLinks.length; i++){
    allLinks[i].title = allLinks[i].innerHTML;
} 
```

由于您想对页面上的一个元素执行所有这些操作，请考虑使用以下内容：

```
var allLinks = document.getElementById('myelement').getElementsByTagName('a'); // gets all the link elements out of #myelement
for ( int i = 0; i < allLinks.length; i++ ){
    allLinks[i].title = allLinks[i].innerHTML;
} 
```

实际上，这与以前大致相同，但我们正在更改输入元素。

或者，假设您使用 jQuery，您可以执行以下操作：

```
$('a').each(function(){ // runs through each link element on the page
    $(this).attr('title', $(this).html()); // and changes the title to the text within itself ($(this).html())
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:57:20.523

在 JQuery 中，您可以通过了解当前标记并使用 .attr() 功能来更改属性。类似`$('a').attr('title', 'new_title');` [http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# java - 为 java 应用程序生成存根

> ID：13202127
> 
> 赞同：0
> 
> 时间：2012-11-02T19:53:16.313
> 
> 标签：java, xml

我正在使用 JPA2 和 Hibernate 4.0 构建一个 Java 应用程序 我有一个 XML 文件，描述了 API 作为输入或作为输出提供的复杂数据类型。示例如下。我想使用这个 XML 来生成可以在我的 API 中用作参数和返回类型的 java 类（或 jar）。我还想把这个 jar 放在 SpringMVC 驱动的前端中，这样我就可以使用这些类型来附加数据来调用我的 API。如果需要，我可以更改 XML 的格式。我可以为此使用什么工具。我不会编写此 XML 以在我的 API 或任何其他代码中提及，该工具应该让我创建存根然后忘记 XML。

```
 <documentation target="loginValidation" >
    Returns the result of login validation.
    Will return LoginValidationResults object if login correct, else a null object.
  </documentation>  
  <operation name="loginValidation">
    <input target="LoginValidationArgs" />
    <output target="LoginValidationResults" />
  </operation>

  <structure name="LoginValidationArgs">
    <member name="userName" target="String" />
    <member name="hashedPassword" target="String" />
    <member name="schoolID" target="PositiveInteger" />
  </structure>
  <required target="LoginValidationArgs$schoolID" />
  <required target="LoginValidationArgs$userName" />
  <required target="LoginValidationArgs$hashedPassword" />

  <structure name="LoginValidationResults">
    <member name="userID" target="PositiveInteger" />
    <member name="userType" target="String" />
    <member name="userDisplayName" target="String" />
    <member name="schoolID" target="Long" />
  </structure>
  <required target="LoginValidationResults$schoolID" />
  <required target="LoginValidationResults$userID" />
  <required target="LoginValidationResults$userType" />
  <required target="LoginValidationResults$userName" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:06:28.447

看看我对类似但不重复的[问题的回答](https://stackoverflow.com/questions/11904803/generating-java-code-from-xml-in-eclipse)

答案是使用 Eclipse 的 M2T-JET。这就是它的设计和建造目的。

# c++ - 我在处理我创建的这个对象时遇到错误

> ID：13202129
> 
> 赞同：0
> 
> 时间：2012-11-02T19:53:48.837
> 
> 标签：c++, visual-studio-2010

我似乎无法弄清楚这一点，它可能很简单。我有一个客户类，我正在尝试创建一个对象表单，但它不工作我得到一个未声明的标识符错误和一个语法错误；在标识符 c1 之前丢失。谢谢

```
class Customer{
    string customerID;
    string list;
public:
    Customer(void);
    ~Customer(void);

    string getcustomerID(){
        return customerID;
    }
    string getList(){
        return list;
    }
    void setcustomerID(string x){
        customerID = x;
    }
    void setList(int x){
        if(x==1)
            list = "bread";
        if(x==2)
            list = "eggs";
        if(x==3)
            list = "cheese";
    }

};

void checkout(){

    srand(time(NULL));
    int random = rand() % 3 + 1;

    Customer c1;
    c1.setcustomerID(0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:59:18.433

您需要一个默认构造函数（和一个析构函数）。如果您想要一个非常简单的（并使其编译），只需执行以下操作：

```
Customer() {}
~Customer() {} 
```

编辑：KerrekSB 是对的，在这种特殊情况下，最好不要定义或声明它们中的任何一个。

# wpf - 将 ListBox 选定颜色绑定到 SelectedItem 的属性

> ID：13202131
> 
> 赞同：0
> 
> 时间：2012-11-02T19:53:57.960
> 
> 标签：wpf, xaml, data-binding, windows-8

我有一个`ListBox`绑定到`ObservableCollection<ToDoCategory>`as的控件`ItemsSource="{Binding Categories}`。里面`ToDoCategory`有`CategoryName`and `CategoryColor`（两个字符串）。`CategoryName`绑定在`ItemTemplate`. 现在，我想做的是更改`ListBox`基于`CategoryColor`. 我已经有要刷的字符串，`IValueConverter`它返回`SolidColorBrush`字符串。它也在页面资源中正确定义。我知道我需要改变`ItemContainerStyle`。目前，我有这样的事情：

```
<Style x:Key="CategoryListBoxContainerStyle" TargetType="ListBoxItem">
Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="ListBoxItem">
            <Border...>
            <VisualStateManager.VisualStateGroups>
                <VisualState x:Name="Selected">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding CategoryColor, Converter=StringToBrushConverter}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedForegroundThemeBrush}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                .
                .
                .
</style> 
```

这行不通。如何将 InnerGrid 的背景绑定`CategoryColor`到`ToDoCategory`?

# java - 与集合对象比较

> ID：13202139
> 
> 赞同：-1
> 
> 时间：2012-11-02T19:54:45.533
> 
> 标签：java

如何与我的项目中的 ArrayList 对象进行比较我想像这样检查

```
ArrayList al=new ArrayList();
al.add(".net");
al.add("java");
 ArrayList list=new ArrayList();
   list.add(".net");
    list.add("java");
      list.add("iphone") 
```

现在我想比较 al 和 list 并且我想要输出是 iphone 请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:56:38.063

你需要使用[`removeAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)方法

```
list.removeAll(a1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:58:21.103

`aCollection.removeAll(otherCollection)` 将从包含在 otherCollection 中的 aCollection 中删除所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:56:59.963

```
for (int i = 0; i <al.size(); i++) {
for (int j = 0; j < list.size(); j++) {
  if((list.get(i).equals(list.get(j)) )
} 
} 
```

# api - 一组用于多个站点的 yelp api 访问密钥？钥匙适用于一个而不适用于另一个

> ID：13202142
> 
> 赞同：0
> 
> 时间：2012-11-02T19:54:56.757
> 
> 标签：api, key, yelp

我有两个站点都使用相同的 yelp api 访问密钥。那样行吗？事实上，当我在同一个开发盒上运行两个站点时 - 即相同的 IP - 密钥适用于一个站点而不是另一个站点。此外，密钥适用于该站点的开发人员，但不适用于实时站点 - 有什么理由与 API 或只是我的错误有关？如果我需要多个访问密钥，我该如何获取它们，因为管理 api 访问似乎一次只允许我一组。

当他们失败时，我在 dev 上收到此错误： Array ( [error] => Array ( [text] => Signature was invalid [id] => INVALID_SIGNATURE [description] => Invalid signature. Expected signature base string: GET ... .

跟踪认为我的代码尚未显示代码或对 yelp 的调用的任何差异，实际上我只是从功能站点的文件夹中复制了代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:11:00.170

在与其他搜索进行进一步测试后，发现当 saerch 失败时我得到了提到的错误，但有时我得到结果并且没有错误。所以错误信息非常具有误导性。签名有效。

但是为了为业务呼叫工作，必须首先对业务 ID 进行 url 编码 - 我发现在包含重音字符的 ID 上它失败了，但在其他 ID 上却没有。我想这关闭了这个问题。

# c# - 防止平板电脑在应用程序运行时休眠

> ID：13202146
> 
> 赞同：5
> 
> 时间：2012-11-02T19:55:00.150
> 
> 标签：c#, windows-8, tablet, power-saving

我正在尝试编写一个 Windows 8 平板电脑应用程序，该应用程序通常可以在接收输入之间花费几分钟。

问题是，如果我不一直触摸屏幕，省电模式就会启动，屏幕会自动变黑，这会扰乱应用程序的用户。

有没有办法让我的应用程序阻止激活节电程序，或者至少延长激活节电程序所需的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T20:08:37.540

您应该使用[DisplayRequest 类](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)来防止屏幕关闭。

> 显示视频或在没有用户输入的情况下长时间运行的应用程序可以通过调用 DisplayRequest::RequestActive 请求显示保持开启。激活显示请求后，设备的显示屏会在应用可见时保持打开状态。当用户将应用程序移出前台时，系统会停用应用程序的显示请求，并在应用程序返回前台时重新激活它们。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2014-12-30T02:10:47.700

在个性化设置中转到您的屏幕保护程序。选择无。

# sql - 我如何将这个想法表达到数据库设计中？

> ID：13202148
> 
> 赞同：3
> 
> 时间：2012-11-02T19:55:06.327
> 
> 标签：sql, database, relational-database

我是数据库设计的新手，我正在尝试建立一个购物系统数据库。

假设我们有一个 Customer 表和一个 Staff 表。

要求是：

1.  让部分客户享有“退换货”的特权。
2.  允许部分员工有权处理退款。

我的想法是**简单地添加一个带有布尔值的列来“标记”哪个客户或哪个员工有权限？**

解决这个问题是否正确？有什么潜在的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:09:25.637

这对于简单的设计是正确的。但是，如果您希望能够扩展您的网站，或者您的需求随着时间的推移而增长，您可能需要允许更详细的权限。在这种情况下，需要一个 user_permissions 表和一个 employee_permission 表。

# string - 如何在 perl 中打印哈希？

> ID：13202149
> 
> 赞同：0
> 
> 时间：2012-11-02T19:55:06.413
> 
> 标签：string, perl, hash, dereference

如何打印 $stopwords？它似乎是一个字符串（$），但是当我打印它时，我得到：“HASH（0x8B694）”，每次运行时内存地址都会发生变化。

我正在使用 Lingua::StopWords，我只是想打印它正在使用的停用词，所以我确定那里有哪些停用词。我想打印这两个文件。

我需要如何尊重 $stopwords 吗？

这是代码：

```
use Lingua::StopWords qw( getStopWords );

open(TEST, ">results_stopwords.txt") or die("Unable to open requested file.");
my $stopwords = getStopWords('en');

print $stopwords; 
```

我试过了：

```
my @temp = $stopwords;
print "@temp"; 
```

但这不起作用。帮助！

最后一点：我知道 Lingua::StopWords 有一个停用词列表，但我使用的是 (en)，我只是想绝对确定我使用的是什么停用词，这就是我想打印它的原因理想情况下，我想将其打印到文件部分我应该已经知道如何操作的文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T19:59:39.500

`$`不代表字符串。它表示一个标量，可以是字符串、数字或引用。

`$stopwords`是一个哈希引用。要将其用作哈希，您将使用`%$stopwords`.

`Data::Dumper`用作打印哈希内容的快速方法（通过引用传递）：

```
use Data::Dumper;
...
print Dumper($stopwords); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T19:58:50.393

取消引用 hashref ：

```
%hash = %{$hashref};  # makes a copy 
```

所以迭代键值

```
while(($key,$value)=each%{$hashref}){
    print "$key => $value\n";
} 
```

或（效率较低但具有教学目的）

```
for $key (keys %{$hashref}){
    print "$key => $hashref->{$key}\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T20:49:16.143

看看[Data::Printer](https://metacpan.org/module/Data%3a%3aPrinter)作为 Data::Dumper 的一个不错的替代品。它将为您提供漂亮的打印输出以及有关对象提供的方法的信息（如果您正在打印对象）。因此，每当您不知道自己拥有什么时：

```
use Data::Printer;
p( $some_thing ); 
```

你会惊讶于它的方便程度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:59:44.623

`getStopWords`返回一个哈希**ref——**一个哈希的引用——所以你可以通过在前面加上`%`. 而且您实际上只想要它的键，而不是它的值（都是`1`），因此您将使用该`keys`函数。例如：

```
print "$_\n" foreach keys %$stopwords; 
```

或者

```
print join(' ', keys %$stopwords), "\n"; 
```

你也可以跳过临时变量`$stopwords`，但是你需要把`getStopWords`调用用大括号括起来`{...}`，这样 Perl 才能知道发生了什么：

```
print join(' ', keys %{getStopWords('en')}), "\n"; 
```

# ruby - 是否有提供解析序数方法的 Ruby gem 或库？

> ID：13202150
> 
> 赞同：5
> 
> 时间：2012-11-02T19:55:13.900
> 
> 标签：ruby, gem

我正在寻找一种在 Ruby 中解析序数（第一、第二、第三等）并将它们转换为整数的方法。你知道有什么图书馆可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:55:13.900

当我意识到[`chronic`](https://github.com/mojombo/chronic)gem 将其作为解析日期过程的一部分时，我问了这个问题的一半。安装 gem 后，您可以很容易地将序数转换为整数：

```
irb(main):001:0> require 'chronic'
=> true
irb(main):002:0> Chronic::Numerizer.numerize("eighty-fifth").to_i
=> 85 
```

* * *

**编辑：**不幸的是，似乎`chronic`没有正确解析序数“秒”：

```
irb(main):003:0> Chronic::Numerizer.numerize("twenty-second").to_i
=> 20 
```

这样做的原因是它`chronic`旨在解析日期和时间，而“秒”在该上下文中可以是序数或时间单位。要解决此问题，您可以使用以下行猴子 patch`chronic`的`Numerizer`类：

```
Chronic::Numerizer::ORDINALS.insert(1, ['second', '2']) 
```

现在它起作用了：

```
irb(main):005:0> Chronic::Numerizer.numerize("eighty-second").to_i
=> 82 
```

但是，如果您实际上是`chronic`出于预期目的使用它，您可能不想搞砸它的内部结构。[在这种情况下，您可以将源代码](https://github.com/mojombo/chronic/blob/master/lib/chronic/numerizer.rb)复制到`Chronic::Numerizer`一个新类中并改用该类。不要忘记添加`['second', '2']`到`ORDINALS`新类中的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:49:18.477

如果 Chronic 不适合您的用例，那么有一个名为[numerouno](http://rubygems.org/gems/numerouno)的 gem似乎专门针对此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T12:52:14.393

要正确解析序数“第二个”：您现在必须使用此行修改 Numerizer 类

```
SINGLE_ORDINALS.insert(1, ['second', 2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:06:13.590

我一直在使用一个名为 deordinalize ( [https://rubygems.org/gems/deordinalize](https://rubygems.org/gems/deordinalize) ) 的 gem，它似乎可以很好地解决问题 - 只需确保在调用之前小写即可；

```
>> require 'deordinalize'
>> 'Forty-Second'.downcase.deordinalize
=> 42 
```

# heroku - 运行多个 Web 进程时的性能

> ID：13202151
> 
> 赞同：1
> 
> 时间：2012-11-02T19:55:14.583
> 
> 标签：heroku

我正在开发 Rails 应用程序，但我对所看到的内容感到困惑。我是新手，所以我可能会误解这些信息。当我运行一个 web 进程时，我得到了很好的结果。但是当我启动网络进程时，我没有得到我期望的结果。我正在尝试计算我需要在生产中运行多少，以便确定我的成本。

基于 New Relic，我在一个 Heroku Dyno 上以每分钟 3000 个请求（或每秒约 50 个请求）的速度每个请求的响应时间为 40-60 MS。一切运行良好，甚至没有推送 Web 进程。Blitz 上的一些响应在 1 秒时超时，但我希望是因为我正在尽可能多地通过一个 Dyno。

现在我尝试启动 Dyno's。先到 10，再到 50。我再次用 Blitz 冲，得到和上面一样的结果。运行 50 台测功机时，我用 250 个并发用户对网站进行闪电战，我得到的响应时间为 2 或 3 秒。New Relic 正在读取与一台测功机相同的流量，每秒 3000 个请求，请求时间为 60MS。Blitz 的响应时间为 3 秒，最高速度为 50 到 60 rps。

在日志中，我可以看到活动在不同的 Web 进程之间很好地分开。我只是针对主页进行测试，而不是访问任何外部服务或数据库调用。我没有使用缓存。

我不明白为什么单个 Web 进程每秒可以轻松处理多达 60 个请求（每次 Blitz），但是当增加到 10 甚至 50 个 Web 进程时，我没有获得任何额外的性能。我做了好几次闪电战来增加并发用户。

有人对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:56:58.620

我最终从我的应用程序中删除了应用程序服务器 Unicorn 并将其重新添加。现在，我在一台测功机上每秒获得 225 次点击，同时有 250 个并发用户。运行多个 Dyno 似乎也可以正常工作。一定是设置应用服务器时出错。不过，从来没有追查过确切的错误。

# c++ - Natvis Visual Studio 2012 Boost 向量和矩阵

> ID：13202157
> 
> 赞同：2
> 
> 时间：2012-11-02T19:55:39.420
> 
> 标签：c++, boost, visual-studio-2012, debuggervisualizer

我已经下载并安装了 cppvisualizers，以便更好地处理 Visual Studio 2012 中的 boost 数据结构。

[https://cppvisualizers.codeplex.com/](https://cppvisualizers.codeplex.com/)

它不支持 boost::numeric::ublas::vector 和 boost::numeric::ublas::matrix 所以我尝试按照此处提供的关于 natvis 支持的说明进行操作：http://code.msdn.microsoft [。 com/windowsdesktop/Writing-type-visualizers-2eae77a2](http://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2)

我在 \Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers 中添加了一个名为 ublas.natvis 的文件。它包含以下代码：

```
 <?xml version="1.0" encoding="utf-8"?>

    <AutoVisualizer xmlns="http://schemas.microsoft.com/vstudio/debugger/natvis/2010">

      <Type Name="boost::numeric::ublas::vector&lt;*&gt;">
        <DisplayString>"UBLAS Vector: Test Failure"</DisplayString>
        <Expand>
          <Item Name="[size]">_Mylast - _Myfirst</Item>
          <Item Name="[capacity]">_Myend - _Myfirst</Item>
          <ArrayItems>
            <Size>_Mylast - _Myfirst</Size>
            <ValuePointer>_Myfirst</ValuePointer>
          </ArrayItems>
        </Expand>
      </Type>

      <Type Name="std::vector&lt;*&gt;">
        <DisplayString>"STD Vector: Test Success"</DisplayString>
        <Expand>
          <Item Name="[size]">_Mylast - _Myfirst</Item>
          <Item Name="[capacity]">_Myend - _Myfirst</Item>
          <ArrayItems>
            <Size>_Mylast - _Myfirst</Size>
            <ValuePointer>_Myfirst</ValuePointer>
          </ArrayItems>
        </Expand>
      </Type>

    </AutoVisualizer> 
```

可视化器能够成功检测到我的 std::vector 自定义字符串。但是，当我将鼠标悬停在 boost::numeric::ublas::vector 上时没有运气。您能否指导我设置用于提升向量和矩阵的调试器可视化工具。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T13:33:44.600

您应该为 Visual Studio 2012 启用 Natvis 诊断，如您的文章 ( [http://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2](http://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2) ) Natvis 诊断中所述，这对调试 cppvisualizers 有很大帮助。

更新：

`%USERPROFILE%\My Documents\Visual Studio 2012\Visualizers\`矢量和矩阵的可视化工具（只需使用此内容创建 .natvis 文件）

```
<?xml version='1.0' encoding='utf-8'?>
<AutoVisualizer xmlns="http://schemas.microsoft.com/vstudio/debugger/natvis/2010">

<Type Name="boost::numeric::ublas::unbounded_array&lt;*,*&gt;">
    <DisplayString>{{ size={size_} }}</DisplayString>
    <Expand>
        <Item Name="[size]">size_</Item>
        <ArrayItems>
            <Size>size_</Size>
            <ValuePointer>data_</ValuePointer>
        </ArrayItems>
    </Expand>
</Type>

<Type Name="boost::numeric::ublas::vector&lt;*&gt;">
    <DisplayString>{data_}</DisplayString>
    <Expand>
        <ExpandedItem>data_</ExpandedItem>
    </Expand>
</Type>

<Type Name="boost::numeric::ublas::matrix&lt;*&gt;">
    <DisplayString>{{ size={size1_}x{size2_} }}</DisplayString>
    <Expand>
        <ExpandedItem>data_</ExpandedItem>
    </Expand>
</Type>

</AutoVisualizer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:17:12.267

试试`<Type Name="boost::numeric::ublas::vector&lt;*,*&gt;">`吧。

# objective-c - 为什么我不应该继承 UIButton？

> ID：13202161
> 
> 赞同：36
> 
> 时间：2012-11-02T19:55:59.403
> 
> 标签：objective-c, ios, uibutton, uikit, subclass

我已经问了几个关于子类化 a 的堆栈溢出问题`UIButton`，并且有几个人告诉我我不应该子类化 a `UIButton`。

子类化 a 的负面影响是`UIButton`什么？而且我知道这很模糊，但是子类化 a 的其他替代方法是`UIButton`什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-02T20:01:35.123

Cocoa 框架采用对象组合模式比传统的类层次结构更合适的方法。

一般来说，这意味着 UIButton 上可能有一个属性，您可以在其中设置另一个对象来处理按钮的各个方面。这是“自定义”按钮工作方式的首选方式。

这种模式的主要原因之一是许多库组件创建按钮并且不知道您希望它们创建子类的实例。

# 编辑，你自己的工厂方法

我注意到您上面的评论是，当您在应用程序中的多个按钮上使用相同的按钮配置时可以节省时间。这是使用工厂方法设计模式的好时机，在 Objective-C 中，您可以[使用 Category 来实现它，](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/programmingwithobjectivec/customizingexistingclasses/customizingexistingclasses.html)因此它可以直接在 UIButton 上使用。

```
@interface UIButton ( MyCompanyFactory )
+(UIButton *) buttonWithMyCompanyStyles;
@end
@implementation UIButton
+(UIButton *) buttonWithMyCompanyStyles {
    UIButton *theButton = [UIButton buttonWithType:UIButtonTypeCustom];
    // [theButton set...
    return theButton;
}
@end 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-02T20:20:15.660

这是因为`UIButton`它有点特殊，因为它需要一些复杂性/微妙性/限制（即您需要定义的额外覆盖，特别是`+buttonWithType:`），以便它按预期工作。它比平常更多`-initWithFrame:`（并且`-initWithCoder:`，如果在 XIB 中使用）。IDK 为什么框架作者允许这些细节泄露到我们的领域，但这是我们现在必须处理的事情。限制是您的实现不得依赖（即扩展）预设的系统按钮样式；您必须假设`UIButtonTypeCustom`作为子类的起点`UIButton`。

* * *

[关于实现一个子类`UIButton`](https://web.archive.org/web/20170807002448/http://www.cocoabuilder.com:80/archive/cocoa/284622-how-to-subclass-uibutton.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-10T19:13:17.380

如果您只是在使用自己的“子视图”寻找更轻量级的东西，则应该将 UIControl 子类化。UIButton 是 UIControl 的子类，可以处理事件，例如：

```
[mySubclassedButtonFromUIControl addTarget:self action:@selector(_doSomething:) forControlEvents:UIControlEventTouchUpInside]; 
```

UIControl 是 UIView 的子类，因此您可以在 UIControl 子类包含的任何视图上干净地 layoutSubviews 并避免 UIButton 附带的不必要的视图。从本质上讲，您只是在创建自己的“UIButton”，但您不必处理您并不真正想要或不需要的行为和功能。

# .net - MAF (System.AddIn) 属性是一个集合

> ID：13202164
> 
> 赞同：1
> 
> 时间：2012-11-02T19:56:15.313
> 
> 标签：.net, c#-4.0, maf, system.addin

我正在尝试使用 .NET4 System.AddIn 命名空间编写 MAF 插件。AddIn 有一个属性，它是一个名为“ReportParameters”的自定义类型的集合；AddIn 上还有其他属性，它们是 mscorlib 中包含的本机类型（即：整数、布尔值、字符串等），我从下面的代码片段中省略了这些属性，因为它们工作正常。我正在努力使用将 ReportParameters IListContract 转换为 IList 的 Host 和 AddIn 端适配器，反之亦然。任何帮助，将不胜感激。我的管道当前定义如下（参见 Host Adapter 中的注释）：

**合同组装**

```
[AddInContract]
public interface IReportComponentContract: IContract
{
    IListContract<IReportParameterContract> ReportParameters { get; set; }
    bool GenerateReport();
}

public interface IReportParameterContract: IContract
{
    string Name { get; set; }
    string Value { get; set; }
} 
```

**插件视图程序集**

```
[AddInBase]
public interface IReportComponent
{
    IList<IReportParameter> ReportParameters { get; set;}
    bool GenerateReport();
}

public interface IReportParameter
{
    string Name { get; set; }
    string Value { get; set; }
}

public class ReportParameter : IReportParameter
{
    public string Name
    {
        get;
        set;
    }

    public string Value
    {
        get;
        set;
    }
} 
```

**AddIn 主机适配器组件**

```
[AddInAdapter]
public class ReportComponentViewToContractAddInAdapter: ContractBase, IReportComponentContract
{
    IReportComponent_view;

    public ReportComponentViewToContractAddInAdapter(IReportComponent view)
    { 
        _view = view;
    }

    public IListContract<IReportParameterContract> ReportParameters
    {
        get
        {
            return CollectionAdapters.ToIListContract<IReportParameter, IReportParameterContract>(_view.ReportParameters, ReportParameterAddInAdapter.ViewToContractAdapter, ReportParameterAddInAdapter.ContractToViewAdapter); 
        }
        set
        {
            _view.ReportParameters = CollectionAdapters.ToIList<IReportParameterContract, IReportParameter>(value, ReportParameterAddInAdapter.ContractToViewAdapter, ReportParameterAddInAdapter.ViewToContractAdapter); 
        }
    }

    public bool GenerateReport()
    {
        return _view.GenerateReport();
    }

    internal IReportComponent GetSourceView()
    {
        return _view;
    }
}

public class ReportParameterAddInAdapter
{
    internal static IReportParameter ContractToViewAdapter(IReportParameterContract contract)
    {
        if (!System.Runtime.Remoting.RemotingServices.IsObjectOutOfAppDomain(contract) &&
            (contract.GetType().Equals(typeof(ReportParameterViewToContractAddInAdapter))))
        {
            return ((ReportParameterViewToContractAddInAdapter)(contract)).GetSourceView();
        }
        else
        {
            return new ReportParameterContractToViewAddInAdapter(contract);
        }
    }

    internal static IReportParameterContract ViewToContractAdapter(IReportParameter view)
    {
        if (!System.Runtime.Remoting.RemotingServices.IsObjectOutOfAppDomain(view) &&
            (view.GetType().Equals(typeof(ReportParameterContractToViewAddInAdapter))))
        {
            return ((ReportParameterContractToViewAddInAdapter)(view)).GetSourceContract();
        }
        else
        {
            return new ReportParameterViewToContractAddInAdapter(view);
        }
    }
}

public class ReportParameterContractToViewAddInAdapter : IReportParameter
{
    private IReportParameterContract _contract;
    private ContractHandle _handle;

    public ReportParameterContractToViewAddInAdapter(IReportParameterContract contract)
    {
        _contract = contract;
        _handle = new ContractHandle(contract);
    }

    public string Name 
    { 
        get { return _contract.Name; }
        set { _contract.Name = value; }
    }

    public string Value 
    { 
        get { return _contract.Value;}
        set { _contract.Value = value; } 
    }

    internal IReportParameterContract GetSourceContract()
    {
        return _contract;
    }
}

public class ReportParameterViewToContractAddInAdapter : ContractBase, IReportParameterContract
{
    IReportParameter _view;

    public ReportParameterViewToContractAddInAdapter(IReportParameter view)
    {
        _view = view;
    }

    public virtual string Name
    { 
        get { return _view.Name; }
        set { _view.Name = value; }
    }

    public virtual string Value
    { 
        get { return _view.Value; }
        set { _view.Name = value; }
    }

    internal IReportParameter GetSourceView()
    {
        return _view;
    }
} 
```

**主机视图程序集**

```
public interface IReportComponent
{
    IList<IReportParameter> ReportParameters { get; set; }
    bool GenerateReport();
}

public interface IReportParameter
{
    string Name { get; set; }
    string Value { get; set; }
}

public class ReportParameter : IReportParameter
{
    public string Name
    {
        get;
        set;
    }

    public string Value
    {
        get;
        set;
    }
} 
```

**主机适配器组件**

```
[HostAdapter]
public class ReportComponentContractToViewHostAdapter: IReportComponent
{
    IReportComponentContract _contract;
    ContractHandle _lifetime;

    public ReportComponentContractToViewHostAdapter(IReportComponent contract)
    {
        _contract = contract;
        _lifetime = new ContractHandle(contract);
    }

    public IList<IReportParameter> ReportParameters
    {
        get 
        {
            return CollectionAdapters.ToIList<IReportParameterContract, IReportParameter>(_contract.ReportParameters, ReportParameterHostAdapter.ContractToViewAdapter, ReportParameterHostAdapter.ViewToContractAdapter); 
        }
        set 
        {
            _contract.ReportParameters = CollectionAdapters.ToIListContract<IReportParameter, IReportParameterContract>(value, ReportParameterHostAdapter.ViewToContractAdapter, ReportParameterHostAdapter.ContractToViewAdapter); 
        }
    }

    public  bool GenerateReport()
    {
        return _contract.GenerateReport();
    }

}

internal class ReportParameterContractToViewHostAdapter : IReportParameter
{
    private ContractHandle _handle;
    private IReportParameterContract _contract;

    public ReportParameterContractToViewHostAdapter(IReportParameterContract contract)
    {
        _contract = contract;
        _handle = new ContractHandle(contract);
    }

    public string Name
    {
        get { return _contract.Name; }
        set { _contract.Name = value; }
    }

    public string Value
    {
        get { return _contract.Value; }
        set { _contract.Value = value; }
    }

    internal IReportParameterContract GetSourceContract()
    {
        return _contract;
    }
}

public class ReportParameterHostAdapter
{
    internal static IReportParameter ContractToViewAdapter(IReportParameterContract contract)
    {
        if (!System.Runtime.Remoting.RemotingServices.IsObjectOutOfAppDomain(contract) &&
            (contract.GetType().Equals(typeof(ReportParameterViewToContractHostAdapter))))
        {
            return ((ReportParameterViewToContractHostAdapter)(contract)).GetSourceView();
        }
        else
        {
            return new ReportParameterContractToViewHostAdapter(contract);
        }
    }

    internal static IReportParameterContract ViewToContractAdapter(IReportParameter view)
    {
        if (!System.Runtime.Remoting.RemotingServices.IsObjectOutOfAppDomain(view) &&
            (view.GetType().Equals(typeof(ReportParameterContractToViewHostAdapter))))
        {
            return ((ReportParameterContractToViewHostAdapter)(view)).GetSourceContract();
        }
        else
        {
            return new ReportParameterViewToContractHostAdapter(view);
        }

    }
}

public class ReportParameterViewToContractHostAdapter: ContractBase, IReportParameterContract
{
    private IReportParameter _view;

    public ReportParameterViewToContractHostAdapter(IReportParameter view)
    {
        _view = view;
    }

    public virtual string Name
    {
        get { return _view.Name; }
        set { _view.Name = value; }
    }

    public virtual string Value
    {
        get { return _view.Value; }
        set { _view.Value = value; }
    }

    internal IReportParameter GetSourceView()
    {
        return _view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:41:58.113

[按照这个](http://msdn.microsoft.com/en-us/library/bb384207.aspx)MSDN 演练中讨论的示例，我能够自己解决这个问题。基本上，我在上面的代码示例中只有一半等式。在 AddView 适配器和 HostView 适配器中，您需要针对给定的报告参数执行从视图到合同的转换以及从视图到合同的转换。我已经更新了问题中的代码示例，希望它可以在其他人有这种需要时节省一些时间。

# r - Melt/dcast/melt 边距不起作用

> ID：13202167
> 
> 赞同：0
> 
> 时间：2012-11-02T19:56:25.920
> 
> 标签：r

我有一个定义如下的数据框（实际上有 200 多个变量）：

```
class_level var1 var2
          1    4    7
          1    6    7
          1    7    6
          4    3    1
          4    1    3 
```

其中 class_level 为 1 或 4，var1 和 var2 的值为 1-7，它们是来自调查的类李克特响应水平。

我想要一个数据框，其中包含按类级别对每个 var 进行的按级别计数，每个变量都有一个总计行，例如：

```
class_level variable Levels Students
          1     var1      1       10  
          1     var1      2        7  
          1     var1      3       28  
          1     var1      4       15  
          1     var1      5       54  
          1     var1      6       38  
          1     var1      7       16
          1     var1  Total      168  
          4     var1      1       58
          .        .      .        .
          .        .      .        .
          .        .      .        .
          4     var1      7       33
          4     var1  Total      294 
```

我尝试了以下方法：

```
df.m <- melt( df, id.vars=c("class_level"), na.rm=TRUE )
head(df.m)
#  class_level variable value
#1           4     var1     4
#2           4     var1     6
#3           1     var1     7
#4           4     var1     3
#5           1     var1     5
#6           4     var1     6

df.c <- dcast( df.m, class_level+variable ~ value,
               fun.aggregate=length, 
               subset=.(variable %in% c("var1","var2")),
               margins=TRUE
             )
head(df.c)
#  class_level variable 1 2  3  4  5   6   7 (all)
#1           1     var1 1 1  8 24 56 101  32   223
#2           1     var2 2 4  4 22 49  79  56   216
#3           4     var1 4 5 11 38 91 114  76   339
#4           4     var2 2 6 11 35 73  98 106   331

df.o <- melt( df.c, id.vars=c("class_level","variable"),
              variable.name="Levels", value.name="Students"
            )
head(df.o)
#  class_level variable Levels Students
#1           1     var1      1        1
#2           1     var2      1        2
#3           4     var1      1        4
#4           4     var2      1        2
#5           1     var1      2        1
#6           1     var2      2        4 
```

如您所见，这会按每个变量的级别生成计数，但没有总计行。如何获取最终数据集 (df.o) 中的总计行。任何帮助将不胜感激。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:52:43.057

我会倾向于使用`plyr`来帮助：

```
df.m <- melt( df, id.vars=c("class_level"), na.rm=TRUE )
df.m$value <- factor(df.m$value, levels=1:7) # To ensure 0 counts as well
df.c <- ddply(df.m, .(class_level, variable),
             function(x) c(table(df.m$value), Total=length(df$m.value)))
df.o <- melt(df.c, id.vars=c("class_level", "variable")) 
```

# python - 在 mysql 中存储 python timedelta 值的最佳方法是什么？

> ID：13202168
> 
> 赞同：8
> 
> 时间：2012-11-02T19:56:32.910
> 
> 标签：python, mysql, datetime-format, timedelta, python-datetime

我需要在 mysql 环境中存储正常运行时间。正常运行时间可以从几个小时到一年以上不等。我正在考虑为 mysql 使用 DATETIME 类型。我正在使用 python，正常运行时间来自

```
def convertdate(lastrestart):
   # now in datetime
   nowdt=datetime.now()

   # last_restarted in datetime
   lastrestarted_dt=datetime.strptime(lastrestart, "%Y-%m-%d %H:%M:%S")

   # timedelta in datetime! 
   uptimeInDT=nowdt-lastrestarted_dt

   #timedelta in seconds
   secondsUptime=uptimeInDT.seconds

   # string conversion wont work so much for a datetime field.
   print str(uptimeInDT) 
```

这是完成这项工作的最佳方式吗？我可以使用其他解决方案吗？mysql 中的 SEC_TO_TIME() 范围较小，无法工作，从 sec 到 datetime 没有函数。也许我应该节省时间并习惯它。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T21:00:06.010

MySQL 不提供一流的 INTERVAL 类型，该类型将是 Python 的`timedelta`.

因此，为了**存储**增量，我建议简单地将差异以秒为单位存储在一个足够大的整数字段中以容纳您的最大期望值。

以*“这么多天、几小时、几分钟等”***显示**增量。格式——这似乎是你正在寻找的——我建议在客户端代码中这样做。 对象可以很好地字符串化，或者您可以根据需要滚动自己的格式化程序。*`timedelta`*

 *如果您在 SO 中搜索尝试格式化间隔的人（“X 秒前”或“X 周前”），您将看到相关的方法和工具包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:04:48.717

我建议您采用自己的建议，只需节省几秒钟。

根据我的经验，存储 UNIX 时间戳（自 *nix 纪元以来的秒数）几乎总是比实际日期更容易，因为它总是很容易使用。

[http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

然后在输出前的最后一刻格式化数据。

秒是一种非常有用的存储时间的方式，习惯吧！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:13:33.743

使用数据库中的时间时，通常最好使用数据库的当前时间而不是系统的当前时间。如果您只想从数据库中获取当前的正常运行时间并显示它，我会在 SQL 查询中这样做。

```
SELECT NOW()-lastrestart AS uptime FROM ... 
```

这将以秒为单位返回正常运行时间。

至于`lastrestart`字段，我会使用 MySQL`TIMESTAMP`类型。以下是一些原因：

*   [何时使用日期时间或时间戳](https://stackoverflow.com/questions/5989539/when-to-use-datetime-or-timestamp)*

# r - 用于显示真/假阳性的 R 图

> ID：13202173
> 
> 赞同：1
> 
> 时间：2012-11-02T19:56:53.540
> 
> 标签：r, plot

我正在寻找一种方法来绘制我的数据。假设您有许多生成排名列表的算法，以及一个将列表中的每个项目识别为真或假的分类器。我怎样才能生成一个图表，将每个算法放在一起，每个等级都有自己的正方形堆叠如下：

```
 __   __
 3   |TP| |FP|
     |__| |__|
 2   |FP| |TP|
     |__| |__|
 1   |TP| |TP|
     |__| |__|
      a    b 
```

例如，TP 可以涂成绿色，FP 可以涂成红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:17:26.010

您可以`ggplot2`用于绘制[堆积条形图](https://stackoverflow.com/questions/9563368/create-stacked-percent-barplot-in-r)。然而，比较算法的真/假阳性/阴性的更好方法是[精确/召回（与选择性/特异性相同）](http://cran.r-project.org/web/packages/rocplus/vignettes/rocplus.pdf)图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-18T16:04:07.357

使用 base R 函数可以很容易地完成它`heatmap()`。

尝试这个：

```
# Dataframe with TRUE/FALSE items
mydf <- data.frame(a = c(T, F, T), b = c(T, T,F))

# Transform booleans into 1s and 0s, and plot heatmap
heatmap(apply(mydf, 2, as.integer),
        col = c("red", "lightgreen"),
        xlab = "Algorithm", 
        ylab = "Item", 
        main = "False positives in red", 
        Rowv = NA, 
        Colv = NA,
        scale = "column") 
```

[![使用 R 生成的真/假热图图](../Images/e290ce2e53dee1fe792f5e28158f099c.png)](https://i.stack.imgur.com/6dgd9.png)

# c++ - 编写返回 C++ 对象的函数的最佳方法是什么？

> ID：13202174
> 
> 赞同：5
> 
> 时间：2012-11-02T19:56:56.000
> 
> 标签：c++, return-value, return-value-optimization

> **可能重复：**
> [如何在 C++ 中“返回一个对象”](https://stackoverflow.com/questions/3350385/how-to-return-an-object-in-c)

大家好！

如果我需要从函数返回一个对象（而且它不是getter，而且由于某种原因这个函数不能作为构造函数实现，例如有一个具有相同签名和不同语义的构造函数），如何更好地实现这个？

例如，可以提出以下选项：

1）返回一个对象本身：

```
MyClass GetMyClass() {
    MyClass a;
    ...
    return a;
} 
```

在大多数情况下，RVO会执行[http://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization)，不会调用复制构造函数，也不会产生开销。这种方法的缺点是，尽管有 RVO，但您必须指定 MyClass 的复制构造函数，但正如 Google C++ Style Guide 中所述...

> C++ 中对象的隐式复制是错误和性能问题的丰富来源。

2) 返回指向对象的指针：

```
MyClass* GetMyClass() {
    MyClass* a= new MyClass();
    ...
    return a;
} 
```

在这种情况下，由于在堆上分配内存会产生开销。由于 malloc 系统调用，这以某种方式减慢了程序的速度。此外，您应该在此函数之外释放内存，这意味着分配和释放在不同的逻辑单元中执行。如此处所述，[为什么函数中的 malloc 内存并在外部释放它是一个坏主意？](https://stackoverflow.com/questions/2549981/why-malloc-memory-in-a-function-and-free-it-outside-is-a-bad-idea)这通常是一个坏主意。

3）通过引用或指针传递值：

```
void GetMyClass(MyClass& a) {
    ...
} 
```

在这种情况下，代码变得丑陋且可读性差

最佳做法是什么？你在你的项目中使用哪一个？当你在一个大项目上工作时，哪些标准是最重要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:11:25.853

二是非常简单。是的， malloc 可能会很慢，但是对您来说有关系吗？您需要从某个地方为该对象提供空间。另请注意您指出的问题中的答案，只有跨逻辑单元才会出现问题。看看你是否有问题，然后尝试修复它而不是预先优化。

您可能会制作自己的 new 版本，该版本使用免费商店并自行管理资源。但是，除非您已经测量并发现新问题是一个问题，否则它很容易出错。

一种可以帮助改善释放指针问题的方法是使用[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)。这样你就不必担心释放对象，只要你总是通过智能指针使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:13:03.733

您忽略了返回移动可构造对象的明显机会：在许多情况下，返回值可能仍会减少开销，但您不会冒意外复制的风险。在 C++ 2011 不可用的地方，我会让类型可复制并按值返回。

如果移动和复制都不是一个选项，我会返回一个指针。当然，我不会返回一个裸指针，而是一个`std::unique_ptr<T>`（或`std::auto_ptr<T>`在不可用的情况下）：使用智能指针可以避免内存泄漏的风险，但是选择轻量级指针而不是例如 ，`std::shared_ptr<T>`并不能做出最终的策略决定关于如何维护对象。在需要以某种有趣的方式释放对象的情况下，它可能带有一个删除器。

# javascript - 如何更新动态 URL 的 URL

> ID：13202177
> 
> 赞同：3
> 
> 时间：2012-11-02T19:57:05.433
> 
> 标签：javascript, html, dom, addthis, sharethis

ShareThis 似乎没有办法更新支持 html5 历史记录或 ajax 驱动的站点动态更改的 URL。

我尝试使用此功能对其进行更新，但 URL 仍然是原始的：

```
function initShareThis(){
    var el = document.getElementById("lotShareThis");
    var target = el.firstChild;
    for (var i in stWidget.shareables) {
        if (stWidget.shareables[i].element === target) {
            stWidget.shareables[i].url = window.location.href;
            break; 
        } 
    }
    el.firstChild.onclick();
} 
```

我也试过这个但没有任何效果：

```
 stWidget.addEntry({
        "url": document.location.href,
        "title":document.title
    }); 
```

遇到这种情况的人有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:23:34.927

如果您想使用 AddThis 进行尝试，您可以通过更新页面的标题和历史记录来更改标题和 url，如下所示：

```
var title = "New Title"
window.document.title = title;
window.history.pushState({path: href}, title, href); 
```

然后你只需要打电话：

```
addthis.toolbox('[selector for AddThis buttons]'); 
```

这将强制所有共享按钮自行更新并使用指定的新标题/网址。如果您仍在为 ShareThis 苦苦挣扎，请尝试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-15T14:08:04.963

```
stWidget.shareables[0].url = window.location.href; 
```

# css - Primefaces 为特定 p:growl 自定义定位

> ID：13202179
> 
> 赞同：11
> 
> 时间：2012-11-02T19:57:18.090
> 
> 标签：css, primefaces, growl

我正在使用 PrimeFaces 3.3.1。我可以通过以下方式自定义咆哮：

```
.ui-growl {
    position:absolute;
    top:50%;
    left:50%;
    z-index:9999;
} 
```

但它定制了所有的咆哮。我只需要定制一个特定`<p:growl>`的 . 我的意思是，我只想将一个咆哮放在中心，其余的放在右上角。怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T16:51:22.197

正如您从生成的 HTML 中看到的那样，该`growl`组件没有保存您的实际咆哮数据。出现在角落的消息由 div 元素保存：

```
<div id="your_growl_id + _container"> 
```

所以咆哮的正确css选择器是：

```
div[id="growlForm1:growlCenter_container"] {} 
```

（我假设您的咆哮组件放置在相同的形式中）。最后，正如您在帖子中指出的那样，如果您的页面上有两个咆哮组件：

```
<h:form id="growlForm1">
    <p:growl id="growlCenter" showDetail="true" sticky="true" />
    <p:growl id="growlRight" showDetail="true" sticky="true" />  
</h:form> 
```

只需为居中和非居中的咆哮容器分配所需的 css 属性：

```
div[id="growlForm1:growlRight_container"] {
    position:absolute;
    top:20px;
}
div[id="growlForm1:growlCenter_container"] {
    position:absolute;
    top:20px;
    left:40%;
} 
```

*请注意，您可以`prependId="false"`使用`<h:form/>`. 这将简化 css 选择器。*但建议不要使用它，请参阅[UIForm with prependId="false" break <f:ajax render>](https://stackoverflow.com/questions/7415230/uiform-with-prependid-false-breaks-fajax-render)

# asp.net - 防止 asp.net 页面在子文件夹中执行

> ID：13202184
> 
> 赞同：1
> 
> 时间：2012-11-02T19:57:28.467
> 
> 标签：asp.net, security, iis, iis-6

我有一个 dotnet 站点，其中包含一个映射到另一台服务器上的文件共享的虚拟目录 (/ArticleImages)。很多人都可以访问文件共享，因此，作为一项安全措施，我不希望在此文件夹中执行任何 asp.net 页面（例如，将 default.aspx 放在文件共享中并浏览到 site.com/ArticleImages /default.aspx 不应该提供服务，或者最好作为简单的下载而不是执行）。

我正在使用 IIS 6.0 并添加了虚拟目录。如果我从此文件夹中删除应用程序，它会使用父应用程序并抱怨它无法读取 web.config。如果我将应用程序添加到此文件夹，即使我删除了所有应用程序扩展，它也会抱怨 svc-xyzzy（用于访问共享的帐户）无权访问 'C:\WINDOWS\Microsoft.NET\Framework\ v2.0.50727\临时 ASP.NET 文件'。

如何拥有不执行 dotnet 代码的应用程序的子文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:17:26.380

如果运行您的应用程序池的用户可以读取文件共享（默认为网络服务），您可以完全删除虚拟目录并创建一个 ASP.NET 应用程序，将文件流式传输到浏览器。如果您使用的是 MVC，它只是返回一个文件结果。这有一个额外的好处，您将能够限制用户下载文件。即您可以要求用户登录或具有某些权限才能下载文件。还要确保您测试路径遍历，您不希望用户输入 ../../filename 来下载他们不允许的文件。

**选项 1：ASP.NET MVC**

```
public ActionResult Download(string file)
{
    // Check for directory traversal attack
    if(file.IndexOf('\\') > -1 || file.IndexOf('/') > -1)
    {
        return new HttpNotFoundResult();
    }

    file = System.IO.Path.Combine("\\FILE_SHARE_FOLDER\\", file);

    if(!System.IO.File.Exists(file))
    {
        return new HttpNotFoundResult();                
    }

    return this.File(file, GetMimeType(file));
} 
```

**选项 2：网络表单**

```
private void DownloadFile(string file)
{
    // Check for directory traversal attack
    if(file.IndexOf('\\') > -1 || file.IndexOf('/') > -1)
    {
        Response.StatusCode = 404;
        Response.End();
    }

    file = System.IO.Path.Combine("\\FILE_SHARE_FOLDER\\", file);

    if (!System.IO.File.Exists(file))
    {
        Response.StatusCode = 404;
        Response.End();
    }

    Response.ContentType = GetMimeType(file);
    Response.TransmitFile(file);
} 
```

**注意**您将需要一种方法来获取 MVC 和 Webforms 的 MIME 类型（[来自 KodeSharp 的 MIME 类型方法](http://kodesharp.blogspot.com/2008/04/c-get-mimetype-from-file-name.html)）

```
private string GetMimeType(string fileName)
{
    string mimeType = "application/unknown";
    string ext = System.IO.Path.GetExtension(fileName).ToLower();
    Microsoft.Win32.RegistryKey regKey = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(ext);
    if (regKey != null && regKey.GetValue("Content Type") != null)
        mimeType = regKey.GetValue("Content Type").ToString();
    return mimeType;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:26:05.067

您可以检查`global.asax`请求，如果来自您不允许的目录，则停止处理：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    string cTheFile = HttpContext.Current.Request.Path;

    if(cTheFile.StartsWith("/articleimages", StringComparison.CurrentCultureIgnoreCase)
    {
        HttpContext.Current.Response.TrySkipIisCustomErrors = true;
        HttpContext.Current.Response.Write("Please start from home page");
        HttpContext.Current.Response.StatusCode = 403;
        HttpContext.Current.Response.End();
        return ;
    }   
} 
```

当然，您可以简单地`web.config`在目录中放置一个额外的内容：

```
<configuration>
    <system.web>
      <authorization>
        <deny users="*" />
      </authorization>
    </system.web>
</configuration> 
```

但如果他们可以删除它作为代码没有用。

# http - 为什么我的 HTTP 请求（气泡包装）无法在 Grand Central Dispatch 队列中执行？

> ID：13202185
> 
> 赞同：1
> 
> 时间：2012-11-02T19:57:38.390
> 
> 标签：http, asynchronous, grand-central-dispatch, rubymotion

我在我的 RubyMotion 应用程序中这样做：

```
Dispatch::Queue.concurrent('google').async {
  BubbleWrap::HTTP.get("http://google.com") do |response|
    p response.body.to_str
  end
} 
```

此调用未完成。

但是，如果我将 BubbleWrap 代码放在 Dispatch 队列之外，它就可以正常完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:51:06.317

`BubbleWrap::HTTP`是 over 的抽象`NSURLConnection`，它依赖于[RunLoop](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)进行异步处理。不幸的是，没有在 GCD 队列上设置 RunLoop，而且我还没有弄清楚如何在 GCD 队列上启动 runloop。当我需要上述内容时，我求助于实例化一个 new `NSThread`，并手动启动了运行循环：

```
action = lambda do
  runLoop = NSRunLoop.currentRunLoop

  BW::HTTP.get("http://www.google.com") do |response|
    NSLog("Fetched Google!")
  end

  runLoop.run
end

thread = NSThread.alloc.initWithTarget action, selector:"call", object:nil
thread.start 
```

这个答案是[我关于同一主题](http://www.subsis.dk/14/how-to-use-bubblewraphttp-in-a-background-thread)的博文和[Cocoa In The Shell 的重述](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)

# windows - 将应用程序快捷方式固定到 Windows (7,8) 任务栏

> ID：13202190
> 
> 赞同：5
> 
> 时间：2012-11-02T19:57:59.933
> 
> 标签：windows, icons, shortcut, taskbar

我想编写一个程序，将 Microsoft WORD、EXCEL 和 POWERPOINT 等应用程序固定到 Windows 7 或 8 上的任务栏。我找到了托管快捷方式的目录 (%APPDATA%\Microsoft\Internet Explorer\Quick Launch\User固定\任务栏）；但是，当我创建快捷方式并将其移动到该文件夹​​时，该图标不会出现在任务栏中。此外，从该文件夹中删除文件不会从任务栏中删除图标，它只是将图标与任何快捷方式取消关联。下次单击该图标时，它将显示一条消息，询问您是否要删除固定的项目。我想自动化这些过程，因为我每天在多台计算机上使用它们很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:58:36.467

在别处找到我的答案。VBScript 是要走的路！ [http://www.codeproject.com/Articles/185512/Programmatically-PIN-shortcut-onto-Taskbar-on-Win7](http://www.codeproject.com/Articles/185512/Programmatically-PIN-shortcut-onto-Taskbar-on-Win7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T16:26:57.117

老问题，但我也在寻找一种方法来做到这一点，这种方法似乎比使用 VB 简单得多。

创建一个新的快捷方式并将目标设置为：cmd.exe /c "path\to\script.bat"。然后，您可以像其他快捷方式一样右键单击并固定它。

从这里得到解决方案： [http ://www.mysysadmintips.com/windows/clients/343-pin-bat-files-to-windows-8-start-screen](http://www.mysysadmintips.com/windows/clients/343-pin-bat-files-to-windows-8-start-screen)

# c - 从 Emacs 中编译程序？

> ID：13202192
> 
> 赞同：3
> 
> 时间：2012-11-02T19:58:13.420
> 
> 标签：c, emacs, compilation, clang, eshell

在 emacs 中编译程序的最佳方法是什么？我目前正在打开一个单独的缓冲区，`C-x 3`并在其中运行 eshell，`M-x eshell`然后直接调用 make 或 clang；大多数时候我确实有一个 Makefile 设置。

`M-x compile`使用vs 在 eshell 中运行 make运行编译过程有什么好处吗？还有其他方法可以做到这一点，这些方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T20:44:10.473

最简单的方法是使用 Emacs 内置`compile`命令。`M-x compile`你应该没问题。然后，您可以编辑将要运行的命令（默认情况下`make -k`），然后按回车键运行编译。然后，Emacs 将解析输出，如果发现任何错误，它们将链接到源文件，以便您可以在缓冲区中打开它们。

关于它的积极因素是：

*   解析输出缓冲区
*   在调用之间记忆编译命令
*   编译输出显示在未选择的缓冲区中，您可以快速编辑正在处理的文件并修复任何愚蠢的错误。
*   `M-n`并按*错误消息*`M-p`滚动

 *大多数这些特性是由`compilation-minor-mode`次要模式提供的，但不是实际的编译命令和缓冲区。一旦你运行了一个编译命令，`eshell`你可能会通过将次要模式设置为`compilation-minor-mode`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:33:41.640

由于以下原因，我个人更喜欢在[多术语](http://emacswiki.org/emacs/MultiTerm)`make`中运行或您使用的任何命令进行编译：

*   它就像`M-x``compile``RET`您激活 `compilation-shell-minor-mode`( `M-p`, `C-``, ...) 一样。

*   但显然，您可以使用其他命令，例如

    ```
    mkdir build
    cd build
    ./configure --with-another-option 
    ```

    当然，你可以从 Emacs 做到这一点，但我更喜欢这种东西的 shell 交互。

而imo，主要缺点`M-x``compile`是，如果您正在编辑位于另一个目录中的文件， `Makefile`那么您必须`M-x``compile`在正确的目录中使用，然后`M-x``recompile`. 但是，如果您想，说 to `make clean && make`，那么您将不得不切换到正确的目录，执行此操作，然后切换回来。

但是`term.el`也有它自己的缺点，它使用了一种不可移植的hacky方式来跟踪当前目录。*

# python - Python 不会为在类的构造函数之外实例化的对象分配新空间——预期的行为？

> ID：13202198
> 
> 赞同：1
> 
> 时间：2012-11-02T19:58:27.137
> 
> 标签：python, memory-management

> **可能重复：**
> [Python：类和实例属性之间的区别](https://stackoverflow.com/questions/207000/python-difference-between-class-and-instance-attributes)

今天在工作中，我用 pdb 花了大约三个小时试图找出为什么对象上的字典没有保存正确的值。

这是正在发生的事情的一个很好的模板：

```
class A:
    prop = {}
    def __init__(self, test):
        temp = self.method(test)

        for i in temp.keys():
            self.prop[i] = temp[i]

    def method(self, test):
        return ({ 'x': test, 'y': test })

a = A(3)
b = A(4)

print a.prop
print b.prop 
```

将返回

```
{'y': 4, 'x': 4}
{'y': 4, 'x': 4} 
```

我将问题归咎于第二行。我检查了a.prop和b.prop的内存位置，它们是相同的。

因为它是在类中实例化的，在初始化器/构造器之外，它为每个属性分配新空间，但为 prop 分配新空间，并在其中存储相同的内存位置。因此，a 和 b 上的所有其他属性都是正确的（不同的），除了那些被定义为对象的属性。

这是预期的行为吗？我知道这就是它在说 C++ 之类的东西时的工作方式（因为在那时，它们有点静态，对吧？）。

有人可以向我解释为什么 python 会这样对待它吗？当您可以将其指定为静态时，是否有特定的应用程序？

# rabbitmq - 消息代理与 MOM（面向消息的中间件）

> ID：13202200
> 
> 赞同：31
> 
> 时间：2012-11-02T19:58:39.160
> 
> 标签：rabbitmq, message-queue, amqp, messagebroker, mom

对于消息代理（例如 RabbitMQ）和面向消息的中间件之间的区别，我有点困惑。除了维基百科上的内容外，我找不到太多信息。在搜索 MOM 时，我找到有关 AMQP 的信息，这些信息表明是 MOM 的协议。这是什么意思？那么妈妈是什么？我还读到 RabbitMQ 实现了 AMPQ 协议。那么为什么这会使 RabbitMQ 成为消息代理？消息代理和 MOM 是一回事吗？

希望有人能解开我的困惑。谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-05-03T09:00:45.747

概述 -

*   **协议**-一组规则。
*   **AMQP** - AMQP 是一个开放的互联网协议，用于可靠地发送和接收消息。
*   **MOM**（面向消息的中间件）- 是一种方法，一种分布式系统架构，即整个分布式系统的中间层，其中有很多内部通信（一个组件正在查询数据，然后需要将其发送给另一个组件，它将对数据进行一些处理），因此组件必须在它们之间共享信息/数据。
*   **消息代理**- 是处理消息（发送和接收）的任何系统（在 MOM 中），或者更准确地说，它将消息路由到特定的消费者/接收者。消息代理通常构建在 MOM 之上。MOM 提供应用程序之间的基本通信，以及诸如消息持久性和保证交付之类的东西。“消息代理是面向消息的中间件的构建块。”
*   **Rabbitmq** - 消息代理；一个 MOM 实现；AMQP 的开源实现；根据维基百科：

    > RabbitMQ 是一个开源消息代理软件（有时称为面向消息的中间件），它实现了高级消息队列协议 (AMQP)。

* * *

如你所问：

**在搜索 MOM 时，我找到有关 AMQP 的信息，这些信息表明是 MOM 的协议。这是什么意思？**

MOM 是关于在（分布式）系统组件之间拥有消息传递中间件（中间层），而 AMQP 是用于可靠发送和接收消息的协议（规则集）。因此，MOM 实现（即 Rabbitmq）可能会使用 AMQP。

**那么妈妈是什么？**

Message-Oriented-Middleware - 是一种方法，一种分布式系统架构，即整个分布式系统的中间层，其中有很多内部通信（一个组件正在查询数据，然后需要将其发送到另一个组件，这将对数据进行一些处理），因此组件必须在它们之间共享信息/数据。简而言之，它是一种设计系统的方式，例如：根据我们需要开发一个分布式系统的总体要求，以及一些内部通信。MOM 架构/决策的最大优势是组件的解耦，即如果我们要更改数据查询组件，它不会对数据处理组件产生影响，因为它们通过 MOM 进行通信（例如

最后的 MOM 只是一个设计决策，我们使用中间件来粘合我们的系统（分布式）组件，中间件用于处理它们之间的通信，以消息的形式（即 JSON）。要实现面向消息的中间件，我们需要更多特定规则集，即消息将如何发布、使用、确认如何工作、消息的生命周期直到被使用、消息的持久性等. AMQP 基本上是这些规则集，即用于实现 MOM 的标准/协议，即使用 AMQP 的消息传递系统，意味着它受所述规则的限制。来自维基百科：

> AMQP 要求消息传递提供者和客户端的行为达到不同供应商的实现可互操作的程度，就像 SMTP、HTTP、FTP 等创建可互操作的系统一样。

**我还读到 RabbitMQ 实现了 AMPQ 协议。那么为什么这会使 RabbitMQ 成为消息代理？**

是的，Rabbitmq 是一个消息代理（发布者 -> 交换 -> 队列 -> 消费者）。它是一个开源 AMQP 实现，即一个消息传递系统/代理，它仅限于 AMQP（AMQP 规则）——可以使用 Rabbitmq 作为中间件，因此可以使用 MOM。

AMQP - 只是一组规则，即消息将如何发布、保存（在队列中）、使用、传递确认等。

**消息代理和 MOM 是一回事吗？**

简单来说，是的。如果我们需要为我们的分布式系统进行 MOM 设计，我们可以简单地使用 Rabbitmq（一个消息代理；一个 AMQP 实现）作为中间件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-04T10:59:33.537

“MOM”广义上是指可以将“消息”从一个用户空间应用程序传递到另一个用户空间应用程序的任何技术。与流相比，消息通常被理解为一条离散的信息。

MOM 产品过去非常庞大和复杂：CORBA、JMS、TIBCO、WebsphereMQ 等，并且试图做的不仅仅是简单地传递消息。

代理是一组特定的路由和排队模式，我们通常在 MOM 中专门使用术语“代理”（与 HTTP、电子邮件、XMPP 等相比）。路由意味着，一条消息到达一个对等点，再到其中一个许多对等点，对所有对等点，等等。排队意味着消息被保存在内存或磁盘中，直到它们可以被传递（并且在某些情况下，被确认）。

AMQP 用于指定这些代理模式，因此应用程序可以依赖任何与 AMQP 兼容的代理程序的一致行为（因此 RabbitMQ 和 OpenAMQ 在客户端应用程序中看起来非常相似，就像两个 HTTP 或两个 XMPP 服务器看起来一样）。AMQP/1.0 仅指定节点之间的连接，因此您无法保证行为。这使得 AMQP/1.0 对公司来说更容易实施，但不提供互操作性。

ZeroMQ 是面向消息的中间件，它像 AMQP/1.0 一样定义片段之间的连接，而不是中央代理的行为。然而，使用 0MQ 编写 MOM 代理相对容易，我们已经完成了其中的一些（如 Majordomo）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-04T09:52:04.257

消息代理是一种（非常流行的）MOM。另一种 MOM 是无代理 MOM，例如 ZeroMQ。使用基于代理的 MOM，所有消息都转到一个中心位置：代理，然后从那里分发。Brokerless MOM 通常允许点对点消息传递（但也不排除中央服务器的选项）。

AMQP 是基于代理的 MOM 协议定义（至少是 1.0 之前的所有版本，它演变为更通用的 MOM），并且有几个不同的消息代理实现该协议，RabbitMQ 只是其中之一。

# web-services - 如何在云中处理 CPU 密集型 Web 服务请求？

> ID：13202201
> 
> 赞同：-1
> 
> 时间：2012-11-02T19:58:40.773
> 
> 标签：web-services, google-app-engine, concurrency, cloud, rackspace

**背景：**我正在运行一个 Web 服务，其中每个请求都涉及大量计算（在四核机器上最多 10 秒）。

每个请求可以分解为大约 150 个独立的（同样小的）子任务。

**我所追求的：我**正在寻找一种托管服务，它允许我以可扩展的方式有效地服务这些类型的请求。

**我所考虑的：**我研究了 Google App Engine 和 Rackspace。

在我看来，GAE 似乎适用于简单的请求，需要少量资源来处理。Rackspace 之类的问题是我无法提前知道我可能需要多少个 vCPU（即使我知道未来的峰值会有多大，我也不想坐 40 台服务器闲置其余的时间）

**问题：**

1.  是否可以通过以下方式使用 GAE：

    1.  对于每个请求，将其拆分为 150 个子任务

    2.  通过对同一个 webapp 执行 150 个并发 HTTP 请求来独立处理所有子任务（但通过不同的方法）

    3.  从“子结果”中收集结果并返回对原始请求的响应。

2.  GAE 的 Map Reduce 是否有任何帮助？

3.  还有其他更适合这项任务的服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:59:37.487

1.  是的，这是可能的。通常的方法是使用[Task Queue](https://developers.google.com/appengine/docs/java/taskqueue/overview)，可能通过[DeferredTask](https://stackoverflow.com/questions/7505116/java-gae-deferredtask-example)助手类。

    1.3 正常的网络请求（对前端实例）被限制在 30 秒，因此以同步方式执行此操作并不能保证成功。另请注意，实例被人为地限制为执行 10 个并行请求（如果启用了多线程）。

2.  是的，这是[map reduce](http://code.google.com/p/appengine-mapreduce/)的工作。但请注意，map reduce 是异步的——你给它任务去做，它会在未来的某个时候完成。

3.  考虑到您需要的处理，您可能需要查看[GAE 后端](https://developers.google.com/appengine/docs/java/backends/overview)（它们长期运行[多线程](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager)并且具有[不同的大小](https://developers.google.com/appengine/docs/java/config/backends#Instance_Classes)）。如果您需要更多的处理能力，那么您可能需要查看[Compute Engine](https://cloud.google.com/products/compute-engine)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:45:07.133

除非所有这 150 个子任务都是只读活动，否则试图在单个线程中运行它们是不安全的。Web 请求是不可靠的——人们可以取消，如果花费太长时间点击刷新，在中间关闭窗口，或者由于网络问题而超时。同样，后台 HTTP 请求也可能有一大堆问题。标准的解决方案是让您的前端代码简单地构建一个需要完成的事情的列表，以便它可以快速返回给用户，并让后端“工作人员”进程处理（可能不可靠的）子任务. 根据您的应用程序正在执行的操作，您可能会将用户弹回到一个“工作”屏幕（例如搜索机票），他们可以在其中**安全地**等待结果出来，或者它可能只是作为“待处理”的工作（比如从亚马逊订购东西）被塞进去。

有无数种不同的方式来处理这个基本的工作流程。如果您坚持使用 Google App Engine，他们有一个“任务队列”作为[平台](https://developers.google.com/appengine/docs/python/taskqueue/)的一部分- 提供了用于创建和调度后台任务的简单机制。如果您使用 Rackspace，他们的云产品就不是一个统一的平台，因此您必须创建自己的队列或让一个队列插入您的设置。

# ios6 - layoutAttributesForItemAtIndexPath - 什么时候调用？

> ID：13202207
> 
> 赞同：2
> 
> 时间：2012-11-02T19:58:54.860
> 
> 标签：ios6, uicollectionview

我目前正在玩一些新 UICollectionView 的演示项目。大多数演示都覆盖`layoutAttributesForItemAtIndexPath`了那里的子类。但是在该示例之一中从未调用该方法。

从Apple docs我知道我必须覆盖`layoutAttributesForItemAtIndexPath`

我无法弄清楚在哪种情况下调用此方法。

这种方法仅适用于特殊情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:28:08.633

也许您可以在 Apple 文档中找到，子类必须同时覆盖 layoutAttributesForElementsInRect 和 layoutAttributesForItemAtIndexPath 阅读：

```
 layoutAttributesForElementsInRect:

    Returns the layout attributes for all of the cells and views in the specified rectangle.
    - (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
    Parameters

    rect

        The rectangle (specified in the collection view’s coordinate system) containing the target views.

    Return Value

    An array of UICollectionViewLayoutAttributes objects representing the layout information for the cells and views. The default implementation returns nil.
    Discussion

    Subclasses must override this method and use it to return layout information for all items whose view intersects the specified rectangle. Your implementation should return attributes for all visual elements, including cells, supplementary views, and decoration views.

    When creating the layout attributes, always create an attributes object that represents the correct element type (cell, supplementary, or decoration). The collection view differentiates between attributes for each type and uses that information to make decisions about which views to create and how to manage them.
    Availability

        Available in iOS 6.0 and later.

    Declared In
    UICollectionViewLayout.h 
```

# php - 如何使用 php 或 perl 正确地将视频文件流式传输到网络

> ID：13202212
> 
> 赞同：0
> 
> 时间：2012-11-02T19:59:06.587
> 
> 标签：php, perl, streaming, video-streaming, embedded-video

所以我是 Perl 和 Web 开发的新手，但我希望能就以下问题获得一些指导。

服务器 1 正在为我转码视频，并有一个 api 端点供我访问。它会给我想要推送到网络的文件流。因此，为了解决这个问题，可以说它是在以下位置访问的：

```
server1:123\video_stream 
```

Server2 是我的网络服务器，我想要一个页面让我们访问这个视频流文件

```
server2:80\web_stream 
```

我在 php 中看到你可以这样做`readfile("server1:123\video_stream)`，但整个 video_stream 将在输出到页面之前被读入内存......或者我被告知。

我还在 Perl 中看到 ffmpeg 输出可以通过`open(DATA, $ffmpegProcess)`然后打印从该流读取的缓冲区到 web_stream 页面进行路由...

这一切都假设关于视频属性的标题信息是正确的。

是否像向服务器 1 发出 curl 请求并返回流输出一样简单，就像我已经使用 ffmpeg 输出一样？

我不是在寻找完整的解决方案，只是寻找最佳和最正确方法的一些方向。也许 php 和 Perl 根本就不是处理这个问题的正确工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:20:46.590

[ffserver](http://ffmpeg.org/ffserver.html)似乎是更好的工具。它是 ffmpeg 家族的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:19:12.627

PHP readfile() 是一个很好的方法来做到这一点。如果您阅读[PHP 手册页](http://php.net/manual/en/function.readfile.php)，讨论会告诉您如何处理分块读取文件和处理内存问题的不同可能性。

# asp.net-mvc - MVC HttpPost 修改模型并替换视图

> ID：13202216
> 
> 赞同：2
> 
> 时间：2012-11-02T19:59:23.577
> 
> 标签：asp.net-mvc, ajax.beginform

有人可以帮我理解这一点。我有以下代码：

控制器

```
public ActionResult Stuff(PersonModel model)
{
    model.Address = "Some Address";

    return PartialView("_Registration", model);
} 
```

风景

```
 @Ajax.BeginForm("Stuff", new AjaxOptions(){ HttpMethod="POST", UpdateTargetId="the_form", InsertionMode=InsertionMode.Replace, OnSuccess="Stuff"  })
{
    <div id="the_form">
        @{Html.RenderPartial("_Registration", new TypeScriptTest.Models.PersonModel());}
    </div>

    <input type="submit" value="Get Addreess" />
} 
```

局部视图

```
@model TypeScriptTest.Models.PersonModel

<table>
    <tr>
        <td>
            Name: 
        </td>
        <td>
            @Html.TextBoxFor(c => c.Name)
        </td>
    </tr>
    <tr>
        <td>
            Address: 
        </td>
        <td>
             @Html.TextBoxFor(c => c.Address)
        </td>
    </tr>
</table> 
```

数据与我在两个字段中键入的任何内容一起发布。但随后我将 Address 属性值替换为“Some Address”并返回一个 PartialView，我希望得到一个替换旧视图的新视图。这可能会发生，但替换旧的视图不包括新的“某些地址”值。它看起来与我发布的视图完全相同。

我有一个解决方法，但我想了解这里发生了什么。我的解决方法如下：

```
public ActionResult Stuff(PersonModel model)
{
    model.Address = "Some Address";

    var v = PartialView("_Registration");

    var view = v.ViewEngineCollection.OfType<System.Web.Mvc.RazorViewEngine>().Single().FindPartialView(new ControllerContext(HttpContext, RouteData, this), "_Registration", false);

    var result = new PartialViewResult() { View = view.View };

    result.ViewData.Model = model;

    return result;
} 
```

在这里，我可以使用 false 作为 FindPartialView 中的最后一个参数来绕过缓存。将此参数设置为 true 会导致与讨论中的问题相同的问题。

为什么会发生这种情况以及解决此问题的正确方法是什么？我的解决方法工作正常，但我想了解这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:22:19.017

如果您仍然感兴趣，这是因为从表单提交的值存储在 ModelState 中，并且在呈现 HtmlHelpers 时，ModelState 中的任何值都优先于您当前的模型对象值。

如果要更改用户提交的值，则可以清除 modelState 或清除要更改的单个属性的条目。（清除模型状态时要小心，因为这也会清除任何提交值的错误，至少您可能希望在手动修改之前确保 ModelState 有效）

我猜想通过您的工作，您最终将拥有一个没有提交值的干净 ModelState。

您可能还会发现类似问题的答案很有用：[Asp.net MVC ModelState.Clear](https://stackoverflow.com/questions/1775170/asp-net-mvc-modelstate-clear)

# javascript - JavaScript 文档执行命令

> ID：13202219
> 
> 赞同：2
> 
> 时间：2012-11-02T19:59:29.210
> 
> 标签：javascript, command, exec

也许您听说过 JavaScript Document 的`execCommand()`功能，我们经常使用它来制作富文本编辑器。之前它的名声很差，因为 Internet Explorer 与它的工作方式不同。这是我的问题。

1.  今天，所有的元素都`execCommand`适用于所有浏览器吗？像另存为，粗体，斜体等......？

2.  如果你想做一个富文本编辑器， `execCommand`今天是合适的选择吗？

3.  你能给我一个网站，在那里我可以找到这个功能提供的所有元素吗？因为我访问了一些，但它们只是显示粗体、斜体和其他。我想要完整的更新列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:10:23.703

[Quirksmode](http://www.quirksmode.org/dom/execCommand.html)有一个（旧的）兼容性表`document.execCommand`。

我认为最好的方法是结合`execCommand`选择/范围和 DOM 操作来实现富文本编辑器。

**编辑**：

*   [`window.getSelection()`](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)
*   [`document.selection`](http://msdn.microsoft.com/en-us/library/ie/ms535869%28v=vs.85%29.aspx)

相关问题：

*   [如何修改javascript中的文档选择？](https://stackoverflow.com/questions/2075304/how-to-modify-the-document-selection-in-javascript)
*   [JavaScript 选择/范围框架](https://stackoverflow.com/questions/2134482/javascript-selection-range-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:24:06.760

我有类似的要求，并且遇到了丰富的此类命令来源。这个列表是详尽的，IMO，并且还提供与各种浏览器的兼容性。

[http://help.dottoro.com/larpvnhw.php](http://help.dottoro.com/larpvnhw.php)

我根本无法让它与 Chrome 一起工作，而一些与 IE 一起工作，所有命令在 Firefox 上运行顺利。

希望这可以帮助。

# php - 使用 Google API 操作组织的日历

> ID：13202224
> 
> 赞同：3
> 
> 时间：2012-11-02T19:59:38.833
> 
> 标签：php, rest, google-api, google-calendar-api

我正在尝试了解如何使用 v3 API 将 Google 日历与本地非营利组织的现有应用程序集成。

目的如下：我们的组织有一个通用的公共 Google 日历（带有 Google 帐户），访问者和活跃的志愿者都可以订阅或显示在他们自己的日历中。我们正在开发一个简单的管理 Web 应用程序（用 PHP 编写），可以在其中创建和管理任务组。核心功能是计划会议（并管理这些会议的笔记，但这与问题无关。）。计划会议时会通过电子邮件通知用户。如果可以以编程方式将计划中的会议添加到 Google 日历中，那也将非常好。我现在必须为每个计划的会议手动执行此操作。

我已经在[developer.google.com](http://developers.google.com)上阅读文档和 php 库的 Google 代码页面已经两天了，我发现自己迷失在不同的身份验证方案、帐户类型、密钥等等中，以至于我我开始认为这不是一个预期的用例。

回到我的问题的核心：我需要访问组织的 Google 日历，并且能够发布活动，而无需任何人工交互。这甚至可能吗？如果是这样，我需要在 Google API 控制台中创建哪个帐户（网络应用程序、服务帐户或已安装的应用程序？）？我将如何验证应用程序？我是否需要以某种方式授予应用程序的权限？有没有我可以参考的例子（可能使用不同的 API？）？

从我所见，与 Google 文档中所有示例的关键区别在于，我不想修改当前或最终用户的日历，而是修改相同的日历，无论登录用户如何。（Google api 不会发生用户身份验证，我们推出了自己的。）重定向/用户同意机制对我来说并不完全有用。

在[这个](https://stackoverflow.com/questions/11289050/integrate-my-website-with-google-calendar/11303576#11303576)问题中，提问者试图实现类似的目标。但是没有提供完整的答案。我似乎找不到接受的回复中提到的一些来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T14:05:47.197

您应该可以从这里的示例代码开始：[https ://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php)

并参考这里：[https ://developers.google.com/google-apps/calendar/v3/reference/events/quickAdd#examples](https://developers.google.com/google-apps/calendar/v3/reference/events/quickAdd#examples)

关于身份验证，您需要访问[https://code.google.com/apis/console?api=calendar](https://code.google.com/apis/console?api=calendar)以创建和获取相关密钥，但不是很清楚，因此您可能需要玩一下。

我为 API 访问创建了一个“服务帐户”，它为我提供了客户端 ID 并让我下载了一个私钥，但如果不进一步尝试，我不确定它如何应用于上面链接的代码示例。

**编辑**

我刚刚发现了一些仍然有效的旧代码，它们使用 ZendGdata-1.10.2 库在日历中创建事件：

```
//for Google Calendar
set_include_path('./ZendGdata-1.10.2/library');

function createAlert($message, $date) {

    $google = array();  

    // Define credentials for the Google Calendar account
    $google['GCAL_USER'] = "info@example.com";
    $google['GCAL_PASS'] = "password123";

    // Include Zend GData client library
    require_once 'Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Gdata');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
    Zend_Loader::loadClass('Zend_Gdata_Calendar');

    // Get Google Calendar service name (predefined service name for calendar)
    $service = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;

    // Authenticate with Google Calendar
    $client = Zend_Gdata_ClientLogin::getHttpClient($google['GCAL_USER'], $google['GCAL_PASS'], $service);

    date_default_timezone_set('GMT');

    // Create a calendar object
    $calendar = new Zend_Gdata_Calendar($client);
    // Create a new event
    $event = $calendar->newEventEntry();

    $event->title = $calendar->newTitle($message);
    // Add our message as the event content
    $event->content = $calendar->newContent($message);

    $when = $calendar->newWhen();

    // Min time is 5 mins away
    if ($date == "" || strtotime('+5 minute') >= strtotime($date)+300) {
        $when->startTime = date("c", strtotime('+5 minute'));
        $when->endTime = date("c", strtotime('+10 minute'));
    } else {
        $when->startTime = date("c", strtotime($date)+300);
        $when->endTime = date("c", strtotime($date)+600);
    }

    $event->when = array($when);

    // Setup reminders for event
    $reminder = $calendar->newReminder();
    $reminder->method = "all";
    $when = $event->when[0];
    $when->reminders = array($reminder);

    // Send the new event to be added to Google Calendar
    if (defined('GCAL_ID')) {
        $newEvent = $calendar->insertEvent($event, 'http://www.google.com/calendar/feeds/' . $google['GCAL_ID'] . '/private/full');
    } else {
        $newEvent = $calendar->insertEvent($event);
    }
    // Check response
    if (stripos($newEvent->id->text, "http://www.google.com/calendar/feeds/". str_replace('@', '%40', $google['GCAL_ID']) ."/private/full/") !== false) {
        return "Sent!\n";
    } else {
        return $newEvent->id->text;
    }
} 
```

# sql - 当按高行数过滤时，SQL 存储过程运行速度极慢

> ID：13202227
> 
> 赞同：3
> 
> 时间：2012-11-02T20:00:07.997
> 
> 标签：sql, performance, stored-procedures

这个查询是从一个非常长的动态后续存储过程生成的——该过程返回从给定索引开始的请求记录数，以显示在 Telerik Radgrid 中，有效地处理分页。存储过程输出的简化版本：

```
SELECT r.* FROM (
       SELECT ROW_NUMBER() OVER(ORDER BY InventoryId DESC) as row,
       v.* FROM vInventorySearch v
       ) as R WHERE [ROW] BETWEEN 1 AND 10 
```

当“BETWEEN”子句介于 1 和 10 之间时，它会在几分之一秒内运行，但如果它介于 10000 和 1010 之间，则执行几乎需要整整一分钟。

我觉得我可能在这里遗漏了一些基本的东西，但在我看来，我检索哪 10 条记录并不重要，它应该花费相同的时间。

感谢您的任何意见，我期待着尴尬！

* * *

解决方案，由 Martin Smith 提供（下）：

```
SELECT r.*, inv.* FROM 
(
    SELECT ROW_NUMBER() OVER(ORDER BY InventoryId DESC) as row, v.InventoryID
    FROM vInventorySearch v
    WHERE 1=1 
) as R 
inner join vInventory inv on r.InventoryID = inv.InventoryID
WHERE [ROW] BETWEEN 10001 AND 10010 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:04:52.127

对于较高的行数，分页`ROW_NUMBER`确实效率很低。

有时最好将其拆分一下并`ROW_NUMBER`在窄索引上进行查询以检索匹配的 PK，并将连接返回到基表以检索丢失的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:04:42.380

SQL 2012 有更高效的分页机制

[http://stevestedman.com/2012/04/tsql-2012-offset-and-fetch/](http://stevestedman.com/2012/04/tsql-2012-offset-and-fetch/)

SELECT DepartmentID, Revenue, Year FEVENUE ORDER BY Year, DepartmentID ASC OFFSET 10 ROWS FETCH NEXT 10 ROWS ONLY;

# php - 您的 SQL 语法有错误？单独工作，但加倍时出错

> ID：13202230
> 
> 赞同：0
> 
> 时间：2012-11-02T20:00:27.763
> 
> 标签：php, mysql, sql, syntax, mysqli

对此有点困惑，当我注释掉第二个查询时，我没有收到任何错误，第一个查询运行正常，但是当添加第二个查询（基本上相同的查询）时，我发现你的 sql 语法有错误。有点不确定为什么，感谢任何帮助，也许有更好的方法让我进行查询，谢谢。

SQL 错误 [mysqli]

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行 [1064] 的 '' 附近使用正确的语法

SQL

从 forum_users 选择用户名 WHERE user_id =

回溯

```
$challengingClan = $results->get('challengingClan');
$query = "SELECT username FROM forum_users WHERE user_id = $challengingClan";
$user1 = $db->sql_query($query);
$user1 = $db->sql_fetchrow($user1);

$opposingClan = $results->get('opposingClan');
$query = "SELECT username FROM forum_users WHERE user_id = $opposingClan";
$user2 = $db->sql_query($query);
$user2 = $db->sql_fetchrow($user2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:18:46.663

很可能`$results->get('opposingClan')`没有返回任何东西。这应该很容易调试:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T20:14:44.067

这是因为你告诉变量 $results 和 $query 是两个不同的东西改变其中之一

# mysql - 嵌套循环而不同

> ID：13202236
> 
> 赞同：1
> 
> 时间：2012-11-02T20:00:52.720
> 
> 标签：mysql, loops, stored-procedures

我有一张包含以下 COLS 的表：州、市、邮编

我想查找所有包含相同州、城市和 zip 的记录以获取一些统计信息。

我的想法是对州进行不同的查找以在表格中构建州列表，然后使用该州来识别该州内的每个城市，然后使用州和城市的组合来识别邮编，最后使用该组合州、城市、邮编运行计算。IE。计算所有具有共同州、城市、邮政编码的记录，并确定每个邮政编码的州记录百分比。

我想创建一个存储过程来循环遍历整个表，对包含相同州、城市和 zip 的每组记录运行我的计算。

任何方向性的轻推或推动将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:09:12.570

这个怎么样：

```
 SELECT COUNT(*) count, SUM(population)  population, state, city, zip
     FROM tab
 GROUP BY state, city, zip WITH ROLLUP 
```

这应该为您提供按城市/州/邮编划分的记录数和人口摘要，并按州/城市、州和整体汇总汇总。

这是一个包含几个地方的sqlfiddle。 [http://sqlfiddle.com/#!2/b6c2e/1/0](http://sqlfiddle.com/#!2/b6c2e/1/0)

（我不确定您要处理哪些统计数据，所以我将人口作为猜测。）

# php - 使用 PHP 显示用户上传的个人资料图片

> ID：13202237
> 
> 赞同：0
> 
> 时间：2012-11-02T20:01:01.157
> 
> 标签：php

我有一个网站，用户可以在其中上传他们的个人资料图片，并且我已将图片存储在一个文件夹中，并且他们的链接反映在数据库中 我如何在必须显示照片的地方显示该链接？

上传照片的代码

```
 define ("MAX_SIZE","1000"); 
    function getExtension($str)
    {
         $i = strrpos($str,".");
         if (!$i) { return ""; }
         $l = strlen($str) - $i;
         $ext = substr($str,$i+1,$l);
         return $ext;
    }

    $errors=0;
    $image=$_FILES['image']['name'];

    if ($image) 
    {

$filename = stripslashes($_FILES['image']['name']);
$extension = getExtension($filename);
$extension = strtolower($extension);
if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") 
    && ($extension != "gif")&& ($extension != "JPG") && ($extension != "JPEG") 
    && ($extension != "PNG") && ($extension != "GIF")) 
{
    echo '<h3>Unknown extension!</h3>';
    $errors=1;
}
else
{
    $size=filesize($_FILES['image']['tmp_name']);

    if ($size > MAX_SIZE*1024)
    {
        echo '<h4>You have exceeded the size limit!</h4>';
        $errors=1;
    }

    $image_name=time().'.'.$extension;
    $newname="photo/".$image_name;

    $copied = copy($_FILES['image']['tmp_name'], $newname);
    if (!$copied) 
    {
        echo '<h3>Copy unsuccessfull!</h3>';
        $errors=1;
    }
    else echo '<h3>uploaded successfull!</h3>';

    //mysql_query("insert into tutor (photo) values('".$newname."')");
    $myphoto= ".$newname.";
} 
```

插入代码

```
 $mysqli = new mysqli("localhost", "***", "***", "***");
    if ($mysqli->connect_errno) {
        echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " .                         $mysqli->connect_error;
    }

    /* Prepared statement, stage 1: prepare */
    if (!($stmt = $mysqli->prepare("INSERT INTO `table` (`photo` ) VALUES (  ?)"))) {
        echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }

    /* Prepared statement, stage 2: bind and execute */

    if (!$stmt->bind_param('s',$myphoto )) {
        echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }

    if (!$stmt->execute()) {
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:17:32.290

您需要以某种方式将您的用户链接到图片，例如将外键添加到您的用户表，然后将当前用户 ID 与图片一起插入。

在您的上传/插入页面中，您最终会得到类似于

```
// Assuming you're saving your logged in user's data in sessions
$current_user_id = $_SESSION['user_id'];
// Assuming you already have a $mysqli variable with an open connection
$mysqli->exec("INSERT INTO picture_table SET user = $current_user_id, picture = '$picture_file';"); 
```

然后，在您的个人资料/显示页面上，您必须使用类似于

```
// Assuming you already have a $mysqli variable with an open connection
$q = $mysqli->query("SELECT picture WHERE user = $current_user_id");
$row = $q->fetch_object();

printf('<img src="http://yoursite.com/yourpath/%s"  />', $row->picture); 
```

# vba - 带有预定义快捷键的插件？

> ID：13202240
> 
> 赞同：1
> 
> 时间：2012-11-02T20:01:12.143
> 
> 标签：vba, excel

首先，这一切都在 Excel 2007 中，仅供参考。

我正在尝试设置一个加载项，它将使用快捷键来运行一个简单的宏。我想定义那个快捷键，这样我就可以简单地告诉我的用户按“ctl+alt+l”来运行宏，希望我的团队尽量减少解释，因为用户界面会统一。

我设置快捷键的代码就在这里：

```
Sub LiteralizeShortcutKey()

    Application.OnKey "%^l", "Literalize"

End Sub 
```

当我运行宏时，它工作得很好。

然后，我创建一个工作簿宏以在打开 excel 文件时自动加载。

```
Private Sub Workbook_Open()
    LiteralizeShortcutKey
End Sub 
```

当我打开工作簿时，这工作正常。但是当我将工作簿导出到 .xlam 然后将其加载到另一个工作簿中时，一切都崩溃了。我的小 LiteralizeShortcutKey() Sub 不会加载，所以我不能使用我预定义的快捷键。

想法？

# wordpress - 如何使用 slug 从类别中获取帖子？

> ID：13202245
> 
> 赞同：12
> 
> 时间：2012-11-02T20:01:34.197
> 
> 标签：wordpress

我有自己的主题，我想在我的主页上显示特定类别的帖子。

到目前为止，我已经实现了这样的目标：

```
<?php
    global $post;
    $args = array( 'numberposts' => 10, 'category' => 6 );
    $posts = get_posts( $args );
    foreach( $posts as $post ): setup_postdata($post); 
?>

    <divs with the_title() the_excerpt() etc ></div>

<?php 
    endforeach; 
?> 
```

但是，如果我想通过它的 slug 来获取类别呢？或者是否可以从管理面板中简单地制作一个类别选择框？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-03T08:32:50.280

将您的*`category`*参数替换为**`category_name`**

```
<?php
    global $post;
    $args = array( 'numberposts' => 10, 'category_name' => 'cat-slug' );
    $posts = get_posts( $args );
    foreach( $posts as $post ): setup_postdata($post); 
?>

<divs with the_title() the_excerpt() etc ></div>

<?php endforeach; ?> 
```

欲了解更多信息：[http ://codex.wordpress.org/Class_Reference/WP_Query#Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-05T09:51:22.227

假设您有类别名称“冰蛋糕”和类别 slug 为“冰蛋糕”，那么我们检索“冰蛋糕”类别下的帖子的代码如下：

```
<?php
              $args = array( 'posts_per_page' => 3,
               'category_name' => 'ice-cakes' );

              $icecakes = get_posts( $args );
              foreach ( $icecakes as $post ) : setup_postdata( $post ); ?>
                  <li>
                      <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                  </li>
              <?php endforeach; 
              wp_reset_postdata(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-21T08:28:35.170

假设您的类别slug`get_posts`是`ice-cake`

```
$args = array('numberposts' => 10, 'category' => 'ice-cake');
$posts = get_posts($args); 
```

欲了解更多信息：[https ://developer.wordpress.org/reference/functions/get_posts/](https://developer.wordpress.org/reference/functions/get_posts/)

# c# - 创建安装程序包 Visual Studio 2010

> ID：13202247
> 
> 赞同：2
> 
> 时间：2012-11-02T20:01:53.753
> 
> 标签：c#, visual-studio-2010, .net-4.0, installation

我有一个需要 .net 版本 4 才能运行的 C# 应用程序。我知道如何使用 Visual Studio 附带的 Visual Stuido 安装程序安装项目创建基本安装程序，并且可以很好地安装我的应用程序，但是，我无法检查客户端计算机中是否已安装 .net 版本 4 和如果不安装它。有没有人有什么建议？除了这种方法，我还应该使用其他方法吗？购买 InstallShield 许可证不是一种选择，因为这太贵了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:05:55.433

您应该遵循MSDN 上的[本指南](http://msdn.microsoft.com/en-us/library/ee942965%28v=vs.100%29.aspx)。它应该告诉您有关创建安装程序以检查 .NET 4 的知识。

总而言之，如果您将其设置为先决条件，安装程序将检查它是否已安装。

# excel - 将 Excel 工作表行合并到同一工作簿中的一个工作表中

> ID：13202251
> 
> 赞同：2
> 
> 时间：2012-11-02T20:02:22.177
> 
> 标签：excel, xlsx, xlsm

我有一个 Excel 工作簿，其中包含多个工作表（按团队成员姓名）。每个团队成员都维护一个项目/任务列表。每个工作表中的所有列标题都是相同的。

我需要同一工作簿中的工作表，该工作表将每个团队成员工作表中的所有项目合并在一起进行一次审查，而不是经理不得不在多个选项卡之间跳转。

合并的（主工作表）工作表需要随着员工在单元格内的更改或添加/删除行而自动更新。

MS Excel 2007 中是否有启用此功能的宏或函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:24:27.863

我相信你可以在没有宏的情况下做到这一点：

[http://support.microsoft.com/kb/213933](http://support.microsoft.com/kb/213933)

正如这篇文章中的评论者所提到的，出于存档原因，我将解释链接中的内容。那里的函数是 INDIRECT()，它需要一个以字符串形式给出的地址并返回它的内容。它将允许您跨工作表执行计算。

# html - 浮动和扩展问题

> ID：13202253
> 
> 赞同：3
> 
> 时间：2012-11-02T20:02:32.080
> 
> 标签：html, css, expand

我不是一个经验丰富的 html 编码器，所有这些都是在没有任何专业帮助的情况下完成的，所以结果看起来很古怪。网站：www.cakery.co.il/beta 我有浮动和展开问题（如 Dreamweaver 所述） - 当我进入我的网站并尝试调整窗口大小时，顶部（蓝色）功能区和底部功能区被切断看起来很奇怪。

我怎样才能解决这个问题？

例如，这是 css 中的顶部功能区代码：

```
#blue_decoration {
    height: 85px;
    background-image: url(_images/top_stripe.png);
} 
```

我会很感激你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:24:55.803

如果没有看到其余的情况，很难确切地看到问题是什么，但我仍然可以给出一些指示。

如果您愿意，我会 PM 链接，但您可以轻松复制粘贴以下内容以自己查看：

```
<!DOCTYPE html>
<head>
<meta charset="utf-8" />        
<title></title>
    <style>
    #blue_decoration {
        height: 85px;
        background-image: url('http://upload.wikimedia.org/wikipedia/commons/a/aa/Air_Force_Good_Conduct_Medal_ribbon.png');
    }
    #bottom_blue_decoration {
        height: 30%;
        background-image: url('http://upload.wikimedia.org/wikipedia/commons/a/aa/Air_Force_Good_Conduct_Medal_ribbon.png');
    }

</style>
</head>
<body>
<header id="blue_decoration"> Hello World</header><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<footer id="bottom_blue_decoration"> don't collapse me! </footer>
</body>
</html> 
```

您可能会注意到它在屏幕上重复出现，没有很多问题。但是，没有与样式相关的职位；相反，它取决于内容不崩溃。可以说，指定顶部和底部定位可能会更好。另一件事是您可能正在重用 id - 严格来说，应该在给定页面上只使用一次。这很容易解决 - 只需将该样式指定为一个类（使用点而不是哈希）并使用关键字 class 而不是 id 调用它。

尝试使用背景大小的非绝对值，而是使用响应百分比。一个重要的问题是：您是否希望任何内容涵盖此背景？如果您希望它是没有任何内容的图像，您最终可能会更好地使用`<img>`标签......

# c - 即使在调用 exit() 函数后，c 中的进程也没有退出

> ID：13202255
> 
> 赞同：2
> 
> 时间：2012-11-02T20:02:48.637
> 
> 标签：c

当我意识到我的程序没有退出时，我正在练习系统编程中的管道。我添加`exit()`了孩子和父母，但孩子仍然没有退出。请帮助...这是代码：

```
#include<stdlib.h>
#include<stdio.h>
#include<unistd.h>
//#include "apue.h"

main() {
        int n,max=20;
        pid_t pid;
        int fd[2];
        char line[max];
        int i;
        for(i=0;i<20;i++) {
            line[i]='\0';
        }

        if(pipe(fd)<0) {
            perror("pipe error");
        }
        if((pid=fork())<0) {
            perror("fork error");
        }
        else if(pid > 0) {
            close(fd[0]);
            write(fd[1], "hello world\n", 12);
            exit(1);
        } else {
            close(fd[1]);
            read(fd[0], line, max);
        }
        puts(line);
        exit(1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:42:23.827

首先，fork 在子节点中返回 0 而不是在父节点中。所以，当你写

> 否则如果（pid > 0）{
> 
> > ```
> >  close(fd[0]);
> >        write(fd[1], "hello world\n", 12);
> >         exit(1); } 
> > ```

您处于父进程中。要在子进程空间中，您应该使用`else if(pid **==** 0)`

您应该做的第二件事是确保一切正常，您不应该在子进程代码空间中调用 function `exit()`。您最好在父进程中等待您的子进程。为此，您应该`wait()`在父进程中使用该功能。

好的代码是：

```
main() {
    int n,max=20;
    pid_t pid;
    int fd[2];
    char line[max];
    int i;
    int status;
    for(i=0;i<20;i++) {
        line[i]='\0';
    }
        if(pipe(fd)<0) {
        perror("pipe error");
    }
    pid=fork();
    if(pid <0) {
        perror("fork error");
    }
    else if(pid == 0) { // Here is the child process
        close(fd[0]);
        write(fd[1], "hello world\n", 12);
        **// Do not kill child process because is dangeorus to do this when you use pipes**
    } else { // Parrent process
        close(fd[1]);
        read(fd[0], line, max);
        puts(line);

        wait(&status);      // Wait the child process to end its job

    }

  return 0; 
```

}

# http - 最佳实践：用户的 HTTP 代码超出使用限制

> ID：13202258
> 
> 赞同：1
> 
> 时间：2012-11-02T20:02:54.000
> 
> 标签：http, http-headers, error-code

这是一个有点简单的问题，但遗憾的是，到目前为止我还没有找到具体的答案。

我们正在构建一个 API（我们还没有投入生产），它在用户认证等之后返回大量数据。API 系统每秒和每小时跟踪用户的使用情况。当用户超出这些限制中的任何一个时，服务器不会返回任何内容和一些 http 错误代码。

目前，我正在使用 406 Not Acceptable，但我认为这不是最好的代码。有人建议超过 509 带宽限制将是一个很好的，但我想知道是否有一个代码可以被认为是适合我的情况的最佳实践。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:21:18.917

想到状态码 429：

> [RFC 6585，第 4 节](https://www.rfc-editor.org/rfc/rfc6585#section-4)：429 请求过多

> 429 状态码表示用户在给定时间内发送了太多请求（“速率限制”）。

> 响应表示应该包含解释条件的详细信息，并且可以包含一个 Retry-After 标头，指示在发出新请求之前要等待多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:12:23.150

好吧，既然您没有找到适用的错误代码，我猜应该没有。在这种情况下，如果我是你，我会使用你的 406 或类似的东西，只是决定一些东西并继续使用它。浏览器无论如何都不关心，API 被人们使用，他们会接受你返回的任何代码并推断这是一条规则——“如果我超过使用量，我会得到 406”。我认为魔术数字是什么并不重要。

# c++ - 基于用户输入的运行时函数规范

> ID：13202259
> 
> 赞同：4
> 
> 时间：2012-11-02T20:03:14.967
> 
> 标签：c++, runtime, user-input, function-call

好的，自从我用 C++ 编写任何大的东西以来已经有一段时间了，而且我已经习惯了更现代语言的一些细节。这是一个一直在唠叨我的问题，我相信那里有一个答案。有没有办法在运行时调用用户指定为字符串的函数？无需求助于某种大规模的 switch/if 块？

我所处的情况归结为：我已经用 C++ 解决了一大堆与数学相关的问题，并指定为“Problem1.cpp/Problem1.h”、“Problem2.cpp/Problem2” .h”等。每个问题都有一个名为`problemX()`（`X`问题的编号在哪里）的函数，它启动了解决方案。在程序开始时，我想问用户“你想解决哪个问题？” 他们会指定一个数字。然后，我想调用适当的`problemX()`函数，而不必使用大量硬编码的 switch 语句（或 if 语句，或函数指针的索引数组等）。

我确信这一定是可能的，但我就是不记得如何去做。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T20:06:00.643

[`unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)字符串到函数指针。

调整用户输入以确保它都是小写的（或者如果你喜欢大喊大写），然后只需查找函数。如果存在就调用它，否则出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:23:16.660

C++ 在语言中没有自动编译或运行时反映其代码。许多库框架确实具有库中符号的运行时反射。

所以解决方案1：将您的问题放入他们自己的动态库中，并让主程序动态加载它们并查找它们导出的符号名称。

解决方案 2：用命名对象替换原始 C 样式函数。所以你可能有：

```
class Problem;
void RegisterProblem( std::string name, Problem const* problem );
std::map< std::string, Problem const* >& GetProblems();
class Problem
{
protected:
  Problem( std::string name ): RegisterProblem( std::move(name), this ) {}
  virtual void operator() const = 0;
  virtual ~Problem() {}
};
class Problem1: public Problem
{
public:
  Problem1():Problem("Problem1") {}
  virtual void operator() const { /* implementation */ }
};

// in .cpp file:
Problem1 problem1Instance();

void RegisterProblem( std::string name, Problem const* problem )
{
  GetProblems()[name] = problem;
}

std::map< std::string, Problem const* >& GetProblems()
{
  static std::map< std::string, Problem const* > problemMap;
  return problemMap;
}

int main()
{
  // parse user input to get this string:
  std::string testInput = "Problem1";

  // run the problem determined by testInput:
  Problem* prob = GetProblems()[testInput];
  Assert(prob);
  (*prob)();
} 
```

上面我们有一些写得很糟糕的代码，它们有自注册问题（在静态映射中注册），以及一个执行字符串指定的任何问题的 main()。

我认为更清洁的一种方法是：

```
// In RegisterProblem.h:
// these two have obvious implementations:
std::map< std::string, std::function<void()> >& GetProblems(); 
bool RegisterProblem( std::string s, std::function<void()> ); // always returns true

// In problem1.cpp:
void Problem1(); // implement this!
bool bProblem1Registered = RegisterProblem( "Problem1", Problem1 );
// In problem2.cpp:
void Problem2(); // implement this!
bool bProblem2Registered = RegisterProblem( "Problem2", Problem2 );

// etc

// in main.cpp:
int main(int argc, char** argv)
{
  if (argc == 0)
    return -1; // and maybe print help
  auto it = GetProblems().find( argv[1] );
  if (it == GetProblems().end())
    return -1; // and maybe print help
  it->second(); // call the problem
} 
```

我们去掉了不必要的类层次结构，只维护字符串和`void()`函数之间的映射。这个map的维护分散到每个写函数的地方，所以没有中心列表或者if语句。

我不会使用像上面那样粗糙的代码来发布任何东西，但我希望你能明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:17:55.540

您应该使用 an`std::map<std::string,_function_pointer_defined_by_you>`将函数的名称存储为键，并将函数指针存储为值。您也可以使用`std::unordered_map<std::string,_function_pointer_defined_by_you>`，类似于`std::hash_map`. 如果你可以使用 C++11，你会`std::unordered_map`在头文件`<unordered_map>`中找到 at，如果你不能在`<tr1/unordered_map>`. 有关 map 和 unordered_map 的文档可以在以下位置找到：

*   [http://cplusplus.com/reference/stl/map/](http://cplusplus.com/reference/stl/map/)
*   [http://cplusplus.com/reference/stl/unordered_map/](http://cplusplus.com/reference/stl/unordered_map/)

# php - 如何在另一个查询的while循环中执行第二个PDO mysql查询？

> ID：13202261
> 
> 赞同：2
> 
> 时间：2012-11-02T20:03:19.760
> 
> 标签：php, mysql, pdo

所以我在使用 PDO MySQL 时遇到的一个问题是，如果我运行这样的查询：

```
$db->pquery("SELECT `category_id`, `category_name` FROM `database_categorys` ORDER BY `category_name` ASC");
while ($category = $db->fetch())
{
} 
```

在while循环内我不能做另一个查询，否则它会取消以前的查询，有没有办法解决这个问题？

这是我的 pquery 顺便说一句：

```
// A plain query
public function pquery($sql)
{
    $this->STH = $this->database->prepare($sql);  

    $this->counter++;

    return $this->STH->execute();
} 
```

还有我的 fetch 功能：

```
public function fetch()
{
    $this->STH->setFetchMode(PDO::FETCH_ASSOC); 
    return $this->STH->fetch();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:28:32.273

这不是 PDO 限制，而是 MySQL 客户端库的限制。MySQL 一次只支持一个查询。当第一个查询仍然有一个打开的游标（即它仍然有要返回的结果）时，您不能执行另一个查询。

您有以下选择：

*   使用[PDOStatement::fetchAll()](http://php.net/manual/en/pdostatement.fetchall.php)并将外部查询的整个结果集收集到 PHP 数组中。这样就完成了外层查询的查询结果。然后，您可以遍历数组并为每个循环迭代运行额外的 SQL 查询。

    但是为外部结果集的每个循环迭代运行一个新查询效率不高。这是杀死应用程序性能的好方法。

    有人将此称为[N+1 选择问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)，因为您运行第一个选择，它返回 N 行，然后您根据第一个选择的结果运行 N 个选择。

*   如果您使用 MySQL，请使用[PDO::MYSQL_ATTR_USE_BUFFERED_QUERY](http://us3.php.net/manual/en/ref.pdo-mysql.php)，它基本上做同样的事情，下载所有行，并在内部保存在一个数组中。然后后续调用`fetch()`只是迭代缓冲的结果。

    但这也涉及到 N+1 Selects 反模式。

*   最好编写一个 SQL 查询来获取您想要的值。根据您的评论猜测，您需要 category_id 匹配的另一个表中的类别和相关行数。以下是此类 SQL 查询的示例：

    ```
    $db->pquery("SELECT c.`category_id`, c.`category_name`, COUNT(*) AS `count`
    FROM `database_categorys` AS c 
    LEFT OUTER JOIN `other_table` AS t ON t.category_id = c.category_id
    GROUP BY c.category_id
    ORDER BY c.`category_name` ASC"); 
    ```

联接是 SQL 的基本组成部分。如果您尝试使用 SQL 而不学习使用连接，这就像使用 PHP 而不学习使用`while`循环一样。

从这里开始： [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:05:09.863

在第一个查询`while loop or fetching of records`完成后尝试进行第二个查询。

**编辑：**

您需要使用`JOIN`它，或者使用`IN`. 这是[手册](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# javascript - 我想要有可以搜索我的图像的链接

> ID：13202264
> 
> 赞同：1
> 
> 时间：2012-11-02T20:03:26.950
> 
> 标签：javascript, jquery, html, image, search

我的网页上有“标签”，点击后您可以看到相应的图片。示例：我单击 Dogs 链接，然后在我的画廊中看到 Dogs 的图像。像这样的东西：

```
<a href="#" rel="dog">Show Dogs</a>

<script>
$('#filter a').click(function() {
    if($(this).attr('rel')) {
        $('img').hide().filter('[class="' + $(this).attr('rel') + '"]').show();
        $('img').show();
    }

return false; 
```

});​

```
<img src="http://www.petliferadio.com/doggydog.jpg" class="dog"> 
```

但是，它对我不起作用。会有更简单/更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:05:50.210

检查空值..

```
 if($(this).attr('rel')) { 
```

应该

```
 if($(this).attr('rel') != '') {
        $('img').hide();
        $('.' + $(this).attr('rel')).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:05:33.987

隐藏所有图像，然后使用 jquery 中的类选择器仅显示所需的图像。

```
$('#filter a').click(function() {
    if($(this).attr('rel')) {
        $('img').hide();
        $('img.'+$(this).attr("rel)).show();
    }

return false;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:07:00.270

```
$('#filter a').on('click', function() {
    var cat = $(this).attr('rel');
    if(cat.length) $('img').hide().filter('.'+cat).show();
});​ 
```

点击锚点时，从锚点的`rel`属性中获取类别（简称为“猫”），如果类别有，即不为空，隐藏所有图像，然后根据与前一个属性`length`匹配的类过滤图像，并`rel`显示那些图像。

# wordpress - 结合 Wordpress 主题

> ID：13202268
> 
> 赞同：3
> 
> 时间：2012-11-02T20:03:44.377
> 
> 标签：wordpress, themes

有没有办法在不使用以不同主题呈现页面的插件的情况下组合两个 Wordpress 主题，如果有，最有效的方法是什么？是否像将一个主题的 function.php（和其他文件）复制并粘贴到第一个主题中一样简单？我做一个儿童主题吗？

我正在尝试为全球清洁能源计划建立一个数据库，并且喜欢我购买的一个主题的地图功能。但是，一旦通过地图，主题就不是很人性化，无法容纳很多信息。这是第二个主题的用武之地。如果可能，我想保留两个主题的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:01:28.310

肯定有一种方法可以做到这一点，如果它只是您想要的第一个主题的地图功能和第二个主题的视觉效果，您似乎需要将其导入第二个主题。

子主题往往只适用于 css，如果您的第一个主题不能包含大量信息，听起来好像缺少一些标记，所以简单地制作子主题似乎不是一种选择。

此外，导入整个 functions.php 文件可能会与某些地方的现有文件发生冲突，因此这也不是一个好主意。

您基本上必须从第一个主题中提取地图，首先使用像firebug这样的程序并右键单击浏览器中的元素然后在firebug中检查，这将使您了解您需要哪些HTML元素为了使地图存在，可能需要一些 CSS 来查看检查器中的内容。接下来，您将不得不查看functions.php 文件以找到您需要的代码，不幸的是，没有一个简单的方法可以做到这一点。

您能否链接相关主题或分享一些代码？

# java - 安卓数据库（SQLite）连接

> ID：13202269
> 
> 赞同：1
> 
> 时间：2012-11-02T20:03:59.350
> 
> 标签：java, android, database, sqlite

我正在尝试创建一个 android 应用程序，该应用程序可以使用他选择的名称存储用户位置（手机信号塔代码），例如手机信号塔代码是 405673，我想将其存储为“家”位置。所以，基本上我的程序包含以下模块

1.  获取用户塔代码。
2.  创建一个数据库。
3.  从用户那里获取位置名称的输入字符串。
4.  将这些值存储在数据库中。
5.  在请求时显示这些值。

模块 1 和 2 分别完美地工作，但是当我将它们集成时，我得到一个致命的 main 和一个空指针异常。

我的代码如下

```
package my.project.mil;

import android.content.Context;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Cbdata extends MainActivity {

    public String str;

    public void onReceive(Context context, Intent intent) {
        //---get the CB message passed in---
        Bundle bundle = intent.getExtras();        
        SmsCbMessage[] msgs = null;
        str = "";            
        if (bundle != null)  {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsCbMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++) {
                msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
                str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }}
}

    SQLiteDatabase cd = openOrCreateDatabase("mydata", MODE_WORLD_READABLE, null);

Button submit;
Button viewdb;
EditText name;

@Override
public void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.seventh);

    viewdb = (Button) findViewById(R.id.viewdb);
    submit = (Button) findViewById(R.id.submit);
    name = (EditText) findViewById(R.id.name);

    submit.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {

            String locname = name.getText().toString();
            if (locname.length()>0)
            {

                cd.execSQL("CREATE TABLE IF NOT EXITSTS MLITable     (CblocationCode INT(10), CblocationName VARCHAR);");
                cd.execSQL("INSERT INTO MLITable VALUES (' ',' ');" +str +locname);
                Toast.makeText(getBaseContext(), "value successfully entered.", Toast.LENGTH_LONG).show();
            }
            else
            {
                Toast.makeText(getBaseContext(), "Please enter the location name, for example 'Home'.", Toast.LENGTH_LONG).show();
            }

        }
    });

    cd.close();

    viewdb.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            // here comes the code for viewing the database

        }
    });
}

} 
```

我的logcat如下

![日志猫](../Images/af500f079d63a7bab0315d8580410f5e.png)

有趣的是，我删除了数据库命令以查看我的代码是否正常工作，由此我可以得出结论，我在数据库连接线中犯了一个错误。

现在，我的查询是

1.  为什么我的数据库连接出现空点异常错误，我该如何解决？
2.  我使用以下代码将值插入表中，

    cd.execSQL("如果不存在则创建表 MLITable (CblocationCode INT(10), CblocationName VARCHAR);"); cd.execSQL("INSERT INTO MLITable VALUES (' ',' ');" +str +locname); 将用户值传递给我的数据库的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:09:42.347

CREATE 语句`EXISTS`拼写错误。

INSERT 语句应为

```
cd.execSQL("INSERT INTO MLITable VALUES('" + str + "', '" + locname + "');"); 
```

但我认为最可能的原因是`openOrCreateDatabase`调用没有运行，所以没有分配给`cd`.

# java - 通过Java中的套接字损坏的字符串

> ID：13202271
> 
> 赞同：3
> 
> 时间：2012-11-02T20:04:04.767
> 
> 标签：java, jakarta-ee

我在通过 Java 中的套接字传输字符串时遇到问题。当我尝试从服务器接收数据时，数据已成功传输，但已损坏。我不知道出了什么问题。

这是客户端的代码：

```
public String getUserNameServerResult(String userNameParameter) {
    Socket socket;
    BufferedReader socketReader;
    PrintWriter socketWriter;
    String userNameResultParameter = null;
    try {
        socket = new Socket(HOST_NAME, PORT_NUMBER);
        socket.setSoTimeout(SERVER_REQUEST_TIMEOUT);
        socketReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        socketWriter = new PrintWriter(socket.getOutputStream());
        socketWriter.println(numberRequest);
        socketWriter.flush();
        socketWriter.println(userNameParameter);
        socketWriter.flush();
        userNameResultParameter = socketReader.readLine();
        socketReader.close();
        socketWriter.close();
        socket.close();
        System.out.println(userNameResultParameter);
    } catch(IOException ioEx) {
        ioEx.printStackTrace();
    }
        return userNameResultParameter;
} 
```

readLine() 方法中的读取行传输了损坏的字符串。

这是服务器的一段代码：

```
public synchronized void run(){
    System.out.println(new Date().toString()+" :\nAccepted client: "
            +socket.getInetAddress()+":"+socket.getPort()+"\n");
    try {
        while(!isInterrupted()) {
            String numberRequest = socketReader.readLine();
            if(numberRequest == null) {
                break;
            }
            switch(numberRequest) {
                case "1":    // Determines if the user name exists in the Database.
                    String userName = socketReader.readLine(); 
                    boolean isUserName = ServerRequest.isUserNameExists(userName);
                    socketWriter.println(isUserName);
                    socketWriter.flush();
                    break;
                default: break;
            }
        }
    } catch(IOException ex) {
        System.err.println(ex.getMessage());
    }
} 
```

“isUserName”变量被传输并在客户端中被破坏。

你能帮忙解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:52:03.540

`isUserName`是一个`boolean`。也许你的意思是`socketWriter.println(userName);`？

请使用下面的代码向我们展示损坏的字符串是什么样的！

```
System.out.println(userNameResultParameter);
System.out.print("Chars:");
for (char c : userNameResultParameter.toCharArray())
    System.out.print(" 0x" + Integer.toHexString((int)c)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:00:23.703

我认为，问题在于`InputStreamReader`. 默认情况下，读者假设传入字符数据的编码是您平台的默认编码，但是`Writer`（在服务器端）发送的是 UTF-8 数据。

尝试构建`InputStreamReader`这样的：

`new InputStreamReader(socket.getInputStream(), "UTF-8")`

# c# - 在可变长度字符串的末尾添加固定数量的空格

> ID：13202275
> 
> 赞同：6
> 
> 时间：2012-11-02T20:04:22.473
> 
> 标签：c#

我有一个字符串说消息，其长度不可变。但无论长度是多少，在开始另一种方法之前，我都必须添加 35 个空格。

请建议？

谢谢！

Ex - String = "abc" ，应该变成 "abc" + 35 个空格；

无论字符串是什么，我都需要在字符串末尾“追加”35 个空格。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T20:06:56.990

这应该可以解决问题：

```
message = message.PadRight(message.Length + 35, ' '); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T20:07:51.410

```
string s = "abc";
s += new string(' ', 35); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T20:08:01.437

```
string paddedValue = string.Format("ABC{0}", new String(" ", 35)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T20:08:03.937

为了在 C# 和 VB.net 中填充字符串，可以使用 String 对象的 PadRight 方法：

它有两个重载：

```
String.PadRight(Int32 NumOfChars)
String.PadRight(Int32 NumOfChars, char Char) 
```

前：

```
string myString = "abc".PadRight(numOfChars, charToPadWith); 
```

或者

```
myString = myString.PadRight(numOfChars, charToPadWith); 
```

文档：http:
[//msdn.microsoft.com/en-us/library/system.string.padright.aspx](http://msdn.microsoft.com/en-us/library/system.string.padright.aspx)

# ruby - 需要正则表达式 html 帮助

> ID：13202282
> 
> 赞同：-5
> 
> 时间：2012-11-02T20:04:55.360
> 
> 标签：ruby, regex, ruby-on-rails-3.2

我有一个 HTML 响应正文/字符串。该 html 内容的一部分是这些字符串 -

```
<h2><a href="javascript:;" class="user-name-class">MY_USER_NAME<b></b></a></h2>

["media_detail","init",[false,"",null,true,1,4,"99999_XXXXX_99999",11836530,"00076f7474727febc37a8825d373a5be","\/p\/LdvJWSF-6b\/","\/accounts\/login\/"]], 
```

从这些我需要提取`MY_USER_NAME`和`99999_XXXXX_99999`

我会感谢正则表达式摇滚明星的帮助。这是在 ruby​​ 1.9.3 中。谢谢。

更新：我们正在使用正则表达式，因为这不是实时完成的，所以性能不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:20:46.063

第一个是 HTML，所以你应该用 HTML 解析它，另一个是 JSON，所以你可以使用一些 JSON 库。不要使用正则表达式。[这是邪恶的](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:42:39.713

You can use

```
s.split(/"user-name-class">/)[1].split(/</)[0] 
```

(see [this demo](http://ideone.com/U1yL9g))

and

```
s.split(/\["media_detail"/)[1].split(/\[/)[1].split(/"?,"?/)[6] 
```

(see [this demo](http://ideone.com/bm2FQk))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:33:27.820

如果您不想使用 HTML/JSON 库，您可以通过以下方式获取第一个库：

```
str.gsub!(/<.*?>/, '') 
```

要对第二个进行正则表达式，您将不得不告诉我们更多关于字符串格式的信息……什么是一致的，什么不是，等等。

# c++ - 使用外部SDK时如何调试不触发回调函数？

> ID：13202285
> 
> 赞同：0
> 
> 时间：2012-11-02T20:05:08.227
> 
> 标签：c++, visual-studio-2010, sockets, visual-c++, visual-studio-2005

我正在尝试实施一个使用[NatNet SDK](http://www.naturalpoint.com/optitrack/products/natnet-sdk/)的项目，这是一个用于连接光学跟踪相机软件的 SDK。

我的问题如下：我正在尝试使用最简单的示例连接到服务器，但是当我在 VS2010 下编译它和运行提供的 exe 时，它​​的行为不同。SDK解决方案和编译版本来自VS2005。

程序中有一行设置回调。

```
theClient->SetDataCallback( DataHandler, theClient );   // this function will receive data from the server 
```

问题是，如果我在 VS2010 下编译项目，它可以正常编译并运行正常，但不会触发回调，客户端认为没有任何反应。

如果我重新编译一个测试服务器应用程序，新的编译客户端将与新的编译服务器一起工作。

以下是不同编译客户端和服务器如何运行的小总结。

*   原始客户 - ARENA => OK
*   原始客户端 - 原始服务器 => 好的
*   原始客户端 - VS2010 编译服务器 => 不工作，只接收一行
*   VS2010 编译客户端 - ARENA => 不工作，没有收到任何东西
*   VS2010 编译客户端 - 原始服务器 => 不工作，不
*   接收任何东西 VS2010 编译的客户端 - VS 2010 编译的服务器 => OK

对于这种级别的 Visual Studio 版本差异，我真的没有经验，我不知道如何调试非触发回调。由于我被迫连接到提供的软件 (ARENA)，我不能像使用示例服务器解决方案那样重新编译它。

您能帮忙解答以下问题吗？

*   VS2005 和 VS2010 之间有什么区别是什么使这些回调函数不能与彼此编译的版本一起使用？
*   是否可以通过简单的构建设置来修复它？如果没有，我该如何调试问题发生的地方？
*   最后，你会推荐我使用纯基于套接字的实现而不是 SDK，因为他们已经提供了一个，而且现在似乎还没有针对几个 Visual Studio 版本更新 SDK？

# javascript - 我需要一些代码来动画我的精灵

> ID：13202287
> 
> 赞同：0
> 
> 时间：2012-11-02T20:05:11.160
> 
> 标签：javascript, animation, sprite

我尝试了很多不同的东西，但似乎没有任何效果，所以我希望这里有人有空闲时间并想提供帮助。我正在尝试为精灵条的动画创建 javascript，该动画具有 11 个垂直堆叠的图像，每帧为 640 x 889。我希望动画在窗口打开时开始并在帧中来回运行 3 次然后停止. 有 11 帧，序列应该是 1....11 然后 11...1，3 次，总共需要 3 秒来完成三个循环。在此先感谢您的帮助。

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <script src="jquery-1.8.2.js"></script>
    <meta name ="viewport" content = "width=640, user-scalable=yes">
    <link rel="stylesheet" href="animate.css"/>
    <title>Website</title>
</head>
<body>
    <div id="bmw-glow">
    <script type="text/javascript">
    var fps          = 11,
    currentFrame = 0,
    totalFrames  = 11,
    elem         = document.getElementById("bmw-glow"),
    currentTime  = new Date().getTime();

(function animloop(time){
  var delta = (time - currentTime) / 1000;

  currentFrame += (delta * fps);

  var frameNum = Math.floor(currentFrame);

  if (frameNum >= totalFrames) {
    currentFrame = frameNum = 0;
  }

  requestAnimationFrame(animloop);

  elem.style.backgroundPosition = "0 -" + (frameNum * 889) + "px";

  currentTime = time;
})(currentTime);
</script>
</div>
</body>
</html> 
```

CSS：

```
#bmw-glow {
  width: 640px;
  height: 889px;
  margin: 0px;
  background: url("images/Social/Social_6_S.jpg");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:41:18.917

你的问题是 requestAnimationFrame 没有定义。并非所有浏览器都实现了它。

[我在这里](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)找到了一个垫片

```
 // shim layer with setTimeout fallback
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})(); 
```

并更新了你的[小提琴](http://jsfiddle.net/xtQDn/3/)

现在它做了一些事情，但我不认为这正是你的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:48:27.733

扩展马特的答案：http: [//jsfiddle.net/Shmiddty/xtQDn/5/](http://jsfiddle.net/Shmiddty/xtQDn/5/)

首先，您需要“屏蔽”动画，以便一次只能看到一帧。为此，只需将容器的宽度和高度设置为一帧的大小：

```
#bmw-glow {
  width: 104px;
  height: 144.45px; /* Fractional pixels are not good. */
  margin: 0px;
  background: url("http://i45.tinypic.com/4qj0b5.jpg") no-repeat;
} 
```

其次，我修改了使我们当前帧为绝对正弦波的代码。这给了我们一点放松，这可能不是所有情况都需要的，但我认为这种情况很好。

```
var freq     = 1,  //frequency of the animation. Roughly how many times per second it should loop. Higher number is faster, lower number is slower.
currentFrame = 0,
totalFrames  = 11,
deltaFrame   = 1,
frameStep    = 1589 / totalFrames,
elem         = document.getElementById("bmw-glow"),
currentTime  = new Date().getTime();

(function animloop(time){
  var delta = (time - currentTime) / 1000;

  currentFrame += (delta);

  var frameNum = Math.floor(Math.abs(Math.sin(currentFrame*freq) * totalFrames));

  requestAnimFrame(animloop);

  elem.style.backgroundPosition = "0 -" + (frameNum * frameStep) + "px";

  currentTime = time;
})(currentTime); 
```

显然，在这个例子中，有一些抖动，因为我们正在处理小数像素。我相信您上传到 tinypic 的图片已按比例缩小，这就是发生这种情况的原因。

# jquery - 使用 jQuery 从表单获取数据并写入 cookie

> ID：13202288
> 
> 赞同：0
> 
> 时间：2012-11-02T20:05:11.347
> 
> 标签：jquery, cookies, get

有点 jQuery 菜鸟，但感谢 StackOverflow 快速学习。

谁能给我代码，从表单中获取数据并使用 jQuery 将其写入 cookie（不是会话 cookie）。我正在从这里加载 jQuery cookie 插件：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

我还想知道当DOM准备好时是否必须加载我的代码，就像以前使用php一样，我首先加载了cookie。我还无法理解 DOM。

# 提前致谢。

好的，这是当前代码，感谢下面的回复。虽然我无法让 cookie 工作，但未注释时警报工作正常：

```
 <form id="myform">
              <fieldset>
                <h3>Search</h3>
                <p>
                  <label>Your search *</label>
                  <input type="text" id="mysearch" pattern="[a-zA-Z ]{5,}" maxlength="30" />
                </p>
                <fieldset>
                    <input type="range" id="range" min="1" max="30" value="10"  />
                    <input type="range" id="range2" min="30" max="9000" value="2000"  />
                 </fieldset>

                <button id="subbtn" type="submit">Submit form</button>
                <button type="reset">Reset</button>
              </fieldset>
            </form>

        $(function() {
        // initialize tooltip
        $(".imgwrap").tooltip({ 
        //$(".tooltip").tooltip({ effect: 'slide'});
           // tweak the position
           offset: [10, 2],

           // use the "slide" effect
           effect: 'slide'

        // add dynamic plugin with optional configuration for bottom edge
        }).dynamic({ bottom: { direction: 'down', bounce: true } });
        });

        //this one loads the form validator
        $("#myform").validator();

        //this one for the slider
        $(":range").rangeinput();

    $("#subbtn").on("click", function () {
    // alert("Cookie!");
        $.cookie('Searchitem', $("#mysearch").val(), { expires: 365 });
    }); 
```

任何想法为什么我的 cookie 没有设置？浏览器设置为接受，我正在使用 Firebug 进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:17:04.200

持久 cookie 与会话 cookie 相同，只是它有一个过期日期，所以它会一直存在。

这会将文本输入的值写入 365 天后过期的 cookie：

```
 <input id="txt" type="text" value="foo" />
    <input id="btn" type="button" value="write cookie" /> 
```

...

```
 $(document).ready(function () {
        $("#btn").on("click", function () {
            $.cookie('myCookie', $("#txt").val(), { expires: 365 });
        });
    }); 
```

**编辑**

每个更新问题的新代码：

```
 $(function () {

        // initialize tooltip
        $(".imgwrap").tooltip({
            //$(".tooltip").tooltip({ effect: 'slide'});
            // tweak the position
            offset: [10, 2],

            // use the "slide" effect
            effect: 'slide'

            // add dynamic plugin with optional configuration for bottom edge
        }).dynamic({ bottom: { direction: 'down', bounce: true} });

        //this one loads the form validator
        $("#myform").validator();

        //this one for the slider
        $(":range").rangeinput();

        $("#subbtn").on("click", function () {
            // alert("Cookie!");
            $.cookie('Searchitem', $("#mysearch").val(), { expires: 365 });
        });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:16:03.200

我从您的标记中假设您想使用 GET 提交表单。您可以使用[此处](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)描述的方法来提取 URL 字符串值。

然后只需将值设置为cookie：

```
$.cookie('mycookie', getParameterByName('varname'), {expires: 100}); 
```

您可以像这样检查 cookie 的值：

```
console.log($.cookie('mycookie')); 
```

# c++ - 删除 decltype 中的引用（返回 T 而不是 T&，其中 T& 是 decltype）

> ID：13202289
> 
> 赞同：63
> 
> 时间：2012-11-02T20:05:12.673
> 
> 标签：c++, templates, c++11, type-deduction

（如果您是 C++11 专业人士，请跳至粗体段落。）

假设我想编写一个模板方法，该方法调用并返回传递的对象的结果，该对象的类型是模板参数：

```
template<ReturnType, T>
ReturnType doSomething(const T & foo) {
    return foo.bar(); // EDIT: Might also be an expression introducing a temp val
} 
```

所以`T`必须有一个方法`ReturnType T::bar() const`才能在这样的调用中使用：

```
struct MyClass {
    ...
    int bar() const;
    ...
};
...
MyClass object;
int x = doSomething<int, MyClass>(object); 
```

由于类型推导，我们不必写`MyClass`感谢，调用变为：

```
int x = doSomething<int>(object); 
```

但是省略`<int>`也会导致编译错误，因为该方法不需要返回 int 以便`x`之后分配（例如，它可以返回`char`）。

在 C++0x/11 中，我们可以使用`auto`and来推断模板方法的返回类型：`decltype`

```
template<T>
auto doSomething(const T & foo) -> decltype(foo.bar()) {
    return foo.bar(); // EDIT: Might also be an expression introducing a temp val
} 
```

编译器现在将找出类型`foo.bar()`是什么，并将其用作返回类型。对于我们的具体类`MyClass`，这将是一个`int`，以下就足够了：

```
int x = doSomething(object); 
```

**现在我的问题：**

如果 MyClass 定义`bar()`为返回一个`int&`，则返回类型`doSomething(object)`也将是一个`int&`= `decltype(foo.bar())`。这是一个问题，因为 G++ 现在符合我正在*返回对临时的引用*。

我怎样才能解决这个问题？有没有`remove_reference`可以像这样使用的东西`remove_reference(decltype(foo.bar()))`？

我想只声明一个辅助方法，它接受 a`T&`并返回 a`T`然后定义返回类型`doSomething`to `decltype(helper(foo.bar()))`。但必须有更好的方法，我感觉到了。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-02T20:14:56.217

要删除参考：

```
#include <type_traits>

static_assert(std::is_same<int, std::remove_reference<int&>::type>::value, "wat"); 
```

在你的情况下：

```
template <typename T>
auto doSomething(const T& foo)
    -> typename std::remove_reference<decltype(foo.bar())>::type
{
    return foo.bar();
} 
```

* * *

为了清楚起见，请注意，返回引用就可以了：

```
#include <type_traits>

struct f
{
    int& bar() const
    {
        static int i = 0;
        return i;
    } 
};

template <typename T>
auto doSomething(const T& foo)
    -> decltype(foo.bar())
{ 
    return foo.bar();
}

int main()
{
    f x;
    return doSomething(x);
} 
```

返回的引用可以简单地传递而不会出错。您在评论中的示例是它变得重要和有用的地方：

```
template <typename T>
auto doSomething(const T& foo)
    -> decltype(foo.bar())
{ 
    return foo.bar() + 1; // oops
} 
```

# php - Getting my jQuery to work on .load() pages

> ID：13202300
> 
> 赞同：0
> 
> 时间：2012-11-02T20:05:43.077
> 
> 标签：php, javascript, jquery

I'm trying to get my javascript to work on pages I load through the .load command.

```
$("#loadingDockShotPg").load("include/shot_comments.php"); 
```

I'm doing this to load a subsection of a page, but the problem is, the div within the newly loaded page isn't being affected by my jQuery file that I have in the parent file. What is a better way to load content so that the newly injected can be affected by my javascript?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:10:50.083

I'm assuming that you're issue is with event listeners.

If, for example you're using:

```
$('.something').click(function(){ 
   // DO SOMETHING 
}); 
```

Try changing it out for:

```
$(document).on('click','.something',function(){ 
   // DO SOMETHING 
}); 
```

This way the jQuery will listen for any clicks on the document and apply the action to events that match clicking on the `.something` object.

# python - 在 Emacs 中使用ropemacs 和 python.el 进行自动补全

> ID：13202302
> 
> 赞同：3
> 
> 时间：2012-11-02T20:05:43.890
> 
> 标签：python, emacs, autocomplete, rope, ropemacs

如何设置自动完成以`python.el`在 Emacs 24 中使用ropemacs？

我的`.emacs`文件中有以下内容

```
; Auto-complete:
; --------------------------
(add-to-list 'load-path "~/.emacs.d/auto-complete/auto-complete-1.3.1")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/auto-complete/auto-complete-1.3.1/dict")
(ac-config-default)

; Auto-complete rope integration:
; --------------------------
(ac-ropemacs-initialize)
(add-hook 'python-mode-hook
      (lambda ()
    (add-to-list 'ac-sources 'ac-source-ropemacs))) 
```

但这似乎不足以自动完成 Python 方法、类成员等（在自动完成工具提示上）。

例如

```
my_text = "hello world"
my_text. 
```

不显示 String 类的任何可能的自动完成。

使用上述配置，自动完成本身适用于通用自动完成（和目录）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T08:56:25.910

如果我可以建议，如果您只想自动完成和文档帮助，请尝试使用[emacs-jedi 。](https://github.com/tkf/emacs-jedi)

它~~相对较新，并且在早期开发阶段~~已经成熟且足够可靠，可以使用，比绳索路线好得多。

# java - JSONParser 无法解析为类型

> ID：13202304
> 
> 赞同：8
> 
> 时间：2012-11-02T20:05:47.443
> 
> 标签：java, android

尝试遵循本教程：[教程](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

尝试像这样使用**JSONParser**：

```
// Creating JSON Parser object
JSONParser jParser = new JSONParser(); 
```

但是 Eclipse 给了我`JSONParser cannot be resolved to a type`.

该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T20:12:24.183

JSONParser 类在教程中较低，看起来像这样......

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

我会考虑查看杰克逊图书馆[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

# c# - 可以使用 asp.net c# 应用程序自动创建 Exchange 2003 邮箱吗？

> ID：13202311
> 
> 赞同：1
> 
> 时间：2012-11-02T20:06:29.680
> 
> 标签：c#, asp.net, powershell, exchange-server

我写了一个在活动目录中创建用户的 asp.net C# 网站，但我也想自动创建邮箱。交换服务器是 2003 年，我需要自动创建邮箱、邮箱所在的存储以及该用户的邮箱配额策略。有谁知道这是否可能，或者交换服务器必须是 2007/2010 年吗？如果可能的话，你能指出我正确的方向吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:30:19.280

为什么不直接下载。您有一个运行和设置 Outlook 的小型 exe。这将允许更多的自由。

# orchardcms - 在 Orchard CMS 管理页面中找不到 jQuery

> ID：13202312
> 
> 赞同：2
> 
> 时间：2012-11-02T20:06:32.893
> 
> 标签：orchardcms

当我进入 ShellRoute.cs 中的 Orchard CMS 管理区域时出现错误。

```
The controller for path '/Modules/Orchard.jQuery/scripts/jquery.js' was not found or does not implement IController. 
```

我刚刚从 1.5.1 升级到 1.6。它在升级后立即工作，我不确定发生了什么变化。这条路不存在。jQuery 的路径是 /Modules/Orchard.jQuery/Scripts/jquery-1.8.2.min.js。

编辑：我在打电话

```
Script.Require("jQuery"); 
```

这导致

```
<script src="/Modules/Orchard.jQuery/scripts/jquery.js" type="text/javascript"></script> 
```

我在我的 Orchard.jQuery/ResourceManifest.cs 中定义了这个

```
manifest.DefineScript("jQuery").SetUrl("jquery-1.8.2.min.js", "jquery-1.8.2.js").SetVersion("1.8.2")
            .SetCdn("//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js", "//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js", true); 
```

我将 jquery-1.8.2.min.js 作为 jquery.min.js 进行了一些测试。也许它仍然以某种方式引用它？它是在某个地方编译的吗？我已经多次清理并重建了 Visual Studio 中的所有内容。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:09:40.073

做 Script.Require("jQuery").AtHead();. 但是，它应该可以在没有 AtHead 的情况下工作，如果没有，您应该提交一个错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-27T07:05:35.783

它看到缺少 jQuery 参考，所以如果你打开**WebMatrix**并安装 jquery，那么 Orchard 就可以了

[![在此处输入图像描述](../Images/999767d71190e4e8092a4d72e96760c7.png)](https://i.stack.imgur.com/W3R4M.png)

[![在此处输入图像描述](../Images/f2d50c8d1b7e871123bfc1353b3260bd.png)](https://i.stack.imgur.com/woElI.png)

# git - Git解压错误

> ID：13202313
> 
> 赞同：0
> 
> 时间：2012-11-02T20:06:46.327
> 
> 标签：git, version-control

当我尝试推送时，我收到此输出/错误：

```
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 322 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
error: unpack failed: unpack-objects abnormal exit 
```

作为前言，我已阅读并尝试在[此线程](https://stackoverflow.com/questions/1918524/error-pushing-to-github-insufficient-permission-for-adding-an-object-to-reposi)中进行修复。但是，与该线程不同的是，我的输出没有提及权限。结果，修复不起作用。

有人对如何解决此问题有任何建议吗？任何和所有的帮助将不胜感激。

# android - Android - 启动意图

> ID：13202318
> 
> 赞同：0
> 
> 时间：2012-11-02T20:06:59.423
> 
> 标签：android, android-intent

在搜索如何启动 Intents 时，有些人列出如下。

您可以使用以下几行启动 Intent 吗？你会怎么做？

显示设置

```
#Intent;component=com.android.settings/.DisplaySettings;end 
```

声音设置

```
#Intent;component=com.android.settings/.SoundSettings;end 
```

无线设置

```
#Intent;component=com.android.settings/.WirelessSettings;end 
```

拨号器

```
#Intent;component=com.android.contacts/.DialtactsActivity;end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:16:05.850

对于第一行，它将是

```
Intent i = new Intent();
i.setClassName("com.android.settings", "com.android.settings.DisplaySettings");
startActivity(i); 
```

其余的将与此类似。

# ruby-on-rails-3 - 无法将哈希转换为整数 - 尝试选择随机记录

> ID：13202319
> 
> 赞同：1
> 
> 时间：2012-11-02T20:07:07.930
> 
> 标签：ruby-on-rails-3

我正在尝试选择一个随机记录，但唯一的工作方法似乎是一种可怕的性能负担。

第一次尝试，使用 Postgres 中的 RANDOM 函数 - 抛出“无法将哈希转换为整数”

```
 assigned_specialist = User.specialists.legal_for(coach_section).experienced_in(critique.discipline_id).first(:order => "RANDOM()")
   return assigned_specialist.id 
```

第二次尝试，使用[这里讨论的偏移方法。](https://stackoverflow.com/questions/2752231/random-record-in-activerecord)还会导致“无法将哈希转换为整数”

```
 legal_specialists = User.specialists.legal_for(coach_section).experienced_in(critique.discipline_id)

  offset = rand(legal_specialists.count)
  assigned_specialist = legal_specialists.first(:offset => offset)
  return assigned_specialist.id 
```

最后一次尝试，使用数组样本方法，该方法有效但似乎很糟糕。

```
 legal_specialists = User.specialists.legal_for(coach_section).experienced_in(critique.discipline_id)
  assigned_specialist = legal_specialists.sample
  return assigned_specialist.id 
```

平心而论，系统中只有大约 20 名专家，因此阵列采样方法可能永远不会造成任何问题，但我仍然想了解这里发生了什么。

**编辑**：这是我定义的范围：

```
scope :specialists, where(:role_id => 2)
scope :legal_for, lambda { |coach_section| where("section_id != ?", coach_section) }
scope :experienced_in, lambda { |discipline_id|
  discipline = Discipline.find(discipline_id)
  discipline.users
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:10:54.963

关于什么 ：

```
User.specialists.legal_for(coach_section).experienced_in(critique.discipline_id).sample 
```

它确实查询了所有表，所以你只有一个更短的版本......想知道是否有更好的方法来做到这一点！

编辑：你试过这个吗？它应该工作：

```
assigned_specialist = User.specialists.legal_for(coach_section).experienced_in(critique.discipline_id).order("RANDOM()").first 
```

看看这里的线程：[Rails 3：获取随机记录](https://stackoverflow.com/questions/5342270/rails-3-get-random-record)。它显示了不同的方法来做到这一点

另请查看此 gem：[https](https://github.com/spilliton/randumb) ://github.com/spiilliton/randumb 似乎以一种干净的方式实现了您想要做的事情

编辑：用这个替换？

```
scope :experienced_in, lambda { |discipline_id| joins(:habtm_models).where(habtm_models: {discipline_id: discipline_id})} 
```

这样你的作用域就会给你一个`ActiveRecord::Relation`对象。我假设`User`模型`has_many :habtm_models`所以用真实姓名替换！

# pandas - 熊猫 to_datetime 产生令人困惑的结果

> ID：13202326
> 
> 赞同：0
> 
> 时间：2012-11-02T20:07:37.490
> 
> 标签：pandas

我在 pandas.to_datetime 函数中看到了一个奇怪的行为。如果我输入一个字符串，我会得到正确的日期：

```
In [100]: pandas.to_datetime(' 2012-10-19 16:32:35')
Out[100]: datetime.datetime(2012, 10, 19, 16, 32, 35) 
```

但是，我有一个数据集，其中包含一个日期时间列，其中的字符串格式与上面第 100 行中的字符串格式相同：

```
In [101]: data_frame = pandas.read_csv('my_data.csv', header=None, names=['bid', 'datetime'])
In [102]: data_frame.ix[0]

Out[102]:
bid                                    428916
datetime                  2012-10-19 16:32:35  # NOTE: THIS IS A STRING
Name: 0 
```

当我尝试将 datetime 列设置为时间戳时，我得到一个非常奇怪的 datetime 对象：

```
In [102]: data_frame['datetime'] = pandas.to_datetime(data_frame['datetime'])
In [103]: data_frame.ix[0]
Out [103]: 
bid                                    428916
datetime                  1970-01-16 80:32:35  # SEE THIS
Name: 0 
```

所以要么我误解了 to_datetime 的工作方式（很可能），要么这是意外的行为（不太可能）。它是哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:48:04.483

我怀疑问题出在打印 numpy datetime64[ns] 对象上。如果您将这些有趣的日期值转换回 pandas Timestamp 对象，它们看起来很正常。

```
pandas.Timestamp(data_frame.ix[0]['datetime']) 
```

应该给出一个正常的结果。

# .net - 如何获得 IPropagatorBlock 喂自己停下来？

> ID：13202328
> 
> 赞同：3
> 
> 时间：2012-11-02T20:07:56.307
> 
> 标签：.net, task-parallel-library, tpl-dataflow

让我们假设我从一个[`TransformBlock<Uri, string>`](http://msdn.microsoft.com/en-us/library/hh194782.aspx)（它本身是一个实现[`IPropagatorBlock<Uri, string>`](http://msdn.microsoft.com/en-us/library/hh194827.aspx)）开始，它接受`Uri`然后在 a 中获取内容`string`（这是一个网络爬虫）：

```
var downloader = new TransformBlock<Uri, string>(async uri => {
    // Download and return string asynchronously...
}); 
```

一旦我将内容包含在字符串中，我就会解析它以获取链接。由于一个页面可以有多个链接，我使用 a[`TransformManyBlock<string, Uri>`](http://msdn.microsoft.com/en-us/library/hh194784.aspx)将单个结果（内容）映射到多个链接：

```
// The discovered item block.
var parser = new TransformManyBlock<string, Uri>(s => {
    // Parse the content here, return an IEnumerable<Uri>.
}); 
```

解析器的关键是它可以传回一个空序列，表明没有更多项目需要解析。

但是，这仅适用于树的一个分支（或网络的一部分）。

然后我将下载器链接到解析器，然后返回到下载器，如下所示：

```
downloader.LinkTo(parser);
parser.LinkTo(downloader); 
```

现在，我知道我可以让所有东西都停止在块*之外*（通过调用[`Complete`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.idataflowblock.complete.aspx)其中一个），但是我怎样才能从块*内*发出信号表明它已经完成？

还是我必须自己以某种方式管理这种状态？

现在，它只是挂起，因为在下载并解析了所有内容之后，下载程序块被饿死了。

这是一个完全包含的测试方法，它在调用时挂起`Wait`：

```
[TestMethod]
public void TestSpider()
{
    // The list of numbers.
    var numbers = new[] { 1, 2 };

    // Transforms from an int to a string.
    var downloader = new TransformBlock<Tuple<int, string>, string>(
        t => t.Item2 + t.Item1.ToString(CultureInfo.InvariantCulture),

        // Let's assume four downloads to a domain at a time.
        new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 4 }
    );

    // Gets the next set of strings.
    var parser = new TransformManyBlock<string, Tuple<int, string>>(s => {
        // If the string length is greater than three, return an
        // empty sequence.
        // This is the signal for this branch to stop.
        if (s.Length > 3) return Enumerable.Empty<Tuple<int, string>>();

        // Branch out.
        return numbers.Select(n => new Tuple<int, string>(n, s));
    }, 
    // These are simple transformations/parsing, no need to not parallelize.
    // The dataflow blocks will handle the task allocation.
    new ExecutionDataflowBlockOptions {
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
    });

    // For broadcasting to an action.
    var parserBroadcaster = new BroadcastBlock<Tuple<int, string>>(
        // Clone.
        t => new Tuple<int, string>(t.Item1, t.Item2));

    // Indicate what was parsed.
    var parserConsumer = new ActionBlock<Tuple<int, string>>(
        t => Debug.WriteLine(
            string.Format(CultureInfo.InvariantCulture, 
                "Consumed - Item1: {0}, Item2: \"{1}\"",
            t.Item1, t.Item2)));

    // Link downloader to parser.
    downloader.LinkTo(parser);

    // Parser to broadcaster.
    parser.LinkTo(parserBroadcaster);

    // Broadcaster to consumer.
    parserBroadcaster.LinkTo(parserConsumer);

    // Broadcaster back to the downloader.
    parserBroadcaster.LinkTo(downloader);

    // Start the downloader.
    downloader.Post(new Tuple<int, string>(1, ""));

    // Wait on the consumer to finish.
    parserConsumer.Completion.Wait();
} 
```

其输出（如预期的那样，在挂起之前）是：

```
Consumed - Item1: 1, Item2: "1"
Consumed - Item1: 2, Item2: "1"
Consumed - Item1: 1, Item2: "11"
Consumed - Item1: 2, Item2: "11"
Consumed - Item1: 1, Item2: "12"
Consumed - Item1: 2, Item2: "12"
Consumed - Item1: 1, Item2: "111"
Consumed - Item1: 2, Item2: "111"
Consumed - Item1: 1, Item2: "112"
Consumed - Item1: 2, Item2: "112"
Consumed - Item1: 1, Item2: "121"
Consumed - Item1: 2, Item2: "121"
Consumed - Item1: 1, Item2: "122"
Consumed - Item1: 2, Item2: "122" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:34:53.353

TPL 数据流框架没有任何东西可以开箱即用地处理这个问题。这更像是一个状态管理问题。

也就是说，关键是跟踪已下载的 URL，以及仍需要下载的 URL。

处理这个问题的理想地方是解析器块；这是您拥有内容（将转换为更多下载链接）和下载内容的 URL 的地方。

处理上面的示例，需要引入一种捕获下载结果以及从中下载它的 URI 的方法（我会使用 a[`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)但它会使事情变得太混乱）：

```
public class DownloadResult
{
    public Tuple<int, string> Uri { get; set; }
    public string Content { get; set; }
} 
```

从那里开始，下载块几乎相同，只是更新为输出上述结构：

```
[TestMethod]
public void TestSpider2()
{
    // The list of numbers.
    var numbers = new[] { 1, 2 };

    // Performs the downloading.
    var downloader = new TransformBlock<Tuple<int, string>, DownloadResult>(
        t => new DownloadResult { 
            Uri = t, 
            Content = t.Item2 + 
                t.Item1.ToString(CultureInfo.InvariantCulture) 
        },

        // Let's assume four downloads to a domain at a time.
        new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 4 }
    ); 
```

解析器的使用者不需要更改，但*需要*提前声明，因为解析器必须向使用者发出信号，它应该停止使用，我们希望在传递给解析器的闭包中捕获它：

```
// Indicate what was parsed.
var parserConsumer = new ActionBlock<Tuple<int, string>>(
    t => Debug.WriteLine(
        string.Format(CultureInfo.InvariantCulture, 
            "Consumed - Item1: {0}, Item2: \"{1}\"",
            t.Item1, t.Item2))); 
```

现在必须引入状态管理器：

```
// The dictionary indicating what needs to be processed.
var itemsToProcess = new HashSet<Tuple<int, string>>(); 
```

起初，我想只使用 a ，但是由于必须围绕删除*和*[`ConcurrentDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)多次添加执行原子操作，它没有提供所需的内容。一个简单的[陈述](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)是最好的选择。*[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)*

 *解析器是变化最大的。它正常解析项目，但也原子地执行以下操作：

*   从状态机中删除 URL ( `itemsToProcess`)
*   将新 URL 添加到状态机。
*   如果在处理完上述内容后状态机中不存在任何项目，则通过调用[接口](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.idataflowblock.aspx)上的[`Complete`方法向消费者块发出信号通知它已完成](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.idataflowblock.complete.aspx)[`IDataflowBlock`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.idataflowblock.aspx)

看起来像这样：

```
// Changes content into items and new URLs to download.
var parser = new TransformManyBlock<DownloadResult, Tuple<int, string>>(
    r => {
        // The parsed items.
        IEnumerable<Tuple<int, string>> parsedItems;

        // If the string length is greater than three, return an
        // empty sequence.
        // This is the signal for this branch to stop.
        parsedItems = (r.Uri.Item2.Length > 3) ? 
            Enumerable.Empty<Tuple<int, string>>() :
            numbers.Select(n => new Tuple<int, string>(n, r.Content));

        // Materialize the list.
        IList<Tuple<int, string>> materializedParsedItems = 
            parsedItems.ToList();

        // Lock here, need to make sure the removal from
        // from the items to process dictionary and
        // the addition of the new items are atomic.
        lock (itemsToProcess)
        {
            // Remove the item.
            itemsToProcess.Remove(r.Uri);

            // If the materialized list has zero items, and the new
            // list has zero items, finish the action block.
            if (materializedParsedItems.Count == 0 && 
                itemsToProcess.Count == 0)
            {
                // Complete the consumer block.
                parserConsumer.Complete();
            }

            // Add the items.
            foreach (Tuple<int, string> newItem in materializedParsedItems) 
                itemsToProcess.Add(newItem);

                // Return the items.
                return materializedParsedItems;
            }
        }, 

        // These are simple transformations/parsing, no need to not 
        // parallelize.  The dataflow blocks will handle the task 
        // allocation.
        new ExecutionDataflowBlockOptions {
            MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
        }); 
```

广播者和链接是相同的：

```
// For broadcasting to an action.
var parserBroadcaster = new BroadcastBlock<Tuple<int, string>>(
    // Clone.
    t => new Tuple<int, string>(t.Item1, t.Item2));

// Link downloader to parser.
downloader.LinkTo(parser);

// Parser to broadcaster.
parser.LinkTo(parserBroadcaster);

// Broadcaster to consumer.
parserBroadcaster.LinkTo(parserConsumer);

// Broadcaster back to the downloader.
parserBroadcaster.LinkTo(downloader); 
```

启动块时，状态机必须在将根传递给[`Post`方法](http://msdn.microsoft.com/en-us/library/hh194836.aspx)之前使用要下载的 URL 进行初始化：

```
// The initial post to download.
var root = new Tuple<int, string>(1, "");

// Add to the items to process.
itemsToProcess.Add(root);

// Post to the downloader.
downloader.Post(root); 
```

并且对[类上的](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)[`Wait`方法](http://msdn.microsoft.com/en-us/library/dd235635.aspx)的调用是相同的，现在将在不挂起的情况下完成：[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)

```
 // Wait on the consumer to finish.
    parserConsumer.Completion.Wait();
} 
```*

# javascript - Javascript 不能从同一个类调用交叉方法

> ID：13202337
> 
> 赞同：1
> 
> 时间：2012-11-02T20:08:37.493
> 
> 标签：javascript, oop, object

我正在尝试在同一个类的另一个方法中访问我的类的“渲染”方法。但是得到了错误

> “未捕获的类型错误：对象 [对象窗口] 没有方法‘渲染’”

这是我的代码：

```
 function myObject(options) {
    this.top_offset = 100;
    this.right_offset = 50;
};

myObject.prototype.render = function() {
    alert ("render");
};

myObject.prototype.getContent = function(data, params) {
    // do something with the data
    alert('done');
    // !not working here!
    this.render();
} 
```

知道我做错了什么吗？谢谢 ！

**编辑**

下面的示例正在运行，与我的真实代码的区别在于我在异步调用（get）之前实例化对象，并且我的对象的方法用作回调函数。

```
// using the object
var o = new myObject('plop');

$.getJSON(url, toSend, function(data) {
    }).success(function(e) {
    myObject.getContent(e)
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:55:13.127

**更新：** 同时我看到你发布的代码，我看到你已经在一个匿名函数上调用你的回调。那我想我得再想一想了。
到目前为止，我很困惑。

* * *

好的，所以您已经在`getContent()`通过回调调用的问题下方发表了评论。
所以你的代码看起来有点像这样，我假设：

```
$.post(url, data, myObj.getContent); 
```

重要的是要了解 JavaScript 并没有真正的方法。它具有功能，并且功能可以作为对象的属性分配，但这并不意味着这些功能将以任何方式“属于”这些对象。

简单地说，函数的内部可以在*调用*（而不是声明）函数“作为方法”`this`时指向点左侧的对象；或全局对象（窗口），如果您“不作为方法”调用该函数；或者它甚至可以指向其他对象任意对象，如果您使用告诉函数绑定或运行它 - 这可以通过使用来自: , ,的一些“方法”来完成。*`Function.prototype``call``apply``bind`*

 *您可以通过创建一个匿名函数来解决您的问题，该函数将调用 `getContent()`您的对象作为它的激活对象，如下所示：

```
var cb = function(){ myObj.getContent(); }
$.post(url, data, cb); 
```

或通过显式绑定您的函数以将您的对象作为其运行`this`：

```
$.post(url, data, myObj.getContent.bind(myObj); ) 
```

第二种选择更安全，因为如果`myObj`变量的值在这段代码运行和回调被调用之间发生变化，你最终可能会调用`getContent()`错误的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:13:31.560

在这里工作：

[http://jsfiddle.net/NKkzb/](http://jsfiddle.net/NKkzb/)

```
function myObject(options) {
    this.top_offset = 100;
    this.right_offset = 50;
};

myObject.prototype.render = function() {
    alert ("render");
};

myObject.prototype.getContent = function(data, params) {
    // do something with the data
    alert('done');
    // !not working here!
    this.render();
}

var a = new myObject();
a.getContent();​ 
```

猜测你没有正确调用你的对象*

# php - 在 PHP 中解析自定义搜索语法？

> ID：13202344
> 
> 赞同：1
> 
> 时间：2012-11-02T20:09:23.747
> 
> 标签：php, algorithm, parsing

有一个网站有一个定制的查询语言，可以像这样传递：

```
o:target o:creature (r:mythic or r:rare) t:"artifact creature" 
```

现在，我知道我*可以*使用一个相当复杂的正则表达式来解析类似的代码文件......但是可能有多达五十种不同的查询方式，当人们使用嵌套括号来搜索时，这会变得非常糟糕为了这些事。

那么：是否有一个 PHP 库可以自动解析这些字符串？或者是否有解析此类潜在复杂事物的最佳实践？（我正在寻找 YAML，这似乎很复杂，但这可能就是答案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:13:06.497

这比您想象的要复杂一些，特别是如果您要使用这样的括号子表达式，但是您可能需要将其分解为逻辑术语并将其推送到诸如[RPN/postfix](http://en.wikipedia.org/wiki/Reverse_Polish_notation)之类的堆栈中使用改进的[Shutting-Yard 算法的](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)[符号算术](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。

根据您在声明中的明确判断，`or`我假设其他所有内容都应该`and`在搜索查询中一起编辑。为此，我们将表示`and`as`+`和`or`as `*`，您的表达式将等效于：

```
o:target + o:creature + ( r:mythic * r:rare ) + t:"artifact creature" 
```

在 RPN/postfix 中应该是这样的

```
o:target o:creature + r:mythic r:rare * + t:"artifact creature" + 
```

您可能希望使用 strtok [使用特殊情况来处理没有前导/尾随空格以及匹配引号的括号] 来遍历字符串，以构建一个逻辑结构，然后您可以使用该结构以您使用的任何语言构建查询表达式喜欢。

这样做可能有点复杂，但最终理论上您可以无限嵌套语句，以及合并其他运算符或函数。

# ide - SSMS 2012 基于什么外壳，如何使主题变暗？

> ID：13202350
> 
> 赞同：14
> 
> 时间：2012-11-02T20:10:13.173
> 
> 标签：ide, themes, ssms, ssms-2012

我有一个*黑暗*的查询编辑环境，但对象资源管理器和其他元素默认为白色背景。我真的很喜欢`VS 2012`深色主题，并希望有人知道一种让`SSMS 2012`UI 元素变暗的方法。

我用谷歌搜索无济于事。似乎没有太多关于 SSMS 和主题的文档。我想所有`SQL`的人都喜欢它简单明了。

如何使 SSMS 2012 上的 UI 元素变暗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:26:04.593

`SSMS 2012`是基于`VS 2010`. 有一个`VS 2010`名为*Color Themes Extension*的扩展名，但 SSMS 没有*Extensions*菜单项，因此您必须手动将扩展名复制到`{$SqlServerPath}/Tools/Binn/ManagementStudio/Extensions`.

然后，您可以安装一个名为 的主题`Expression`，这是一个基于 Microsoft Expression 产品线的*深色主题，适用于 SSMS，但不幸的是，对象资源管理器的背景等一些控件将保持白色。*

在[这个博客](http://blog.bagearon.com/2012/03/sql-server-management-studio-2012-color-themes-extension-support/)上有详细的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T16:37:07.547

我无法按照[Brad 的博客](http://blog.bagearon.com/2012/03/sql-server-management-studio-2012-color-themes-extension-support/)中的解释让它工作。所以对于那些两者都做不到的人；

*   创建一个带有`.vssettings`扩展名的新文件（如：SQLofObsidian.vssettings）
*   [在这里](http://www.jimmcleod.net/files/SQL-of-Obsidian.vssettings.txt)复制整个`XML`
*   使用文本编辑器打开您之前创建的文件
*   粘贴您之前复制的 XML 并保存文件
*   打开 SSMS 2012 和；工具 -> 导入和导出 -> 导入选定的环境.. -> 不，只是.. -> 浏览并选择`.vssettings`文件

在最后一步中，您可以备份当前设置以在出现问题时回滚

# java - 在恒定时间内生成唯一随机数列表

> ID：13202353
> 
> 赞同：3
> 
> 时间：2012-11-02T20:10:25.357
> 
> 标签：java, algorithm, random

我需要从 1 到 1,000,000 范围内的 100 个随机数。编号必须唯一，不能重复。它类似于[this question](https://stackoverflow.com/questions/196017/unique-random-numbers-in-o1)，但我的范围太大而无法从中创建数组。

我需要多次生成这 100 个随机数，因此生成需要尽可能快，最好是 O(1)。最快的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:12:34.307

我会使用 HashSet 和[Mersenne Twister](http://www.cs.gmu.edu/~sean/research/mersenne/MersenneTwisterFast.java)。

代码：

```
 MersenneTwisterFast ran = new MersenneTwisterFast();
    long time = System.nanoTime();
    Set set = new HashSet(100);
    while( set.size()<100) {
        set.add(ran.nextInt(1000000));
   }

System.out.println(System.nanoTime()-time+" : nano");
System.out.println(set.size()); 
```

输出是：

320000：纳米

100

够快吗？是的，这是 O(1)，因为你总是做 100 个数字。

当心[生日悖论](https://stackoverflow.com/questions/2766910/can-someone-please-clarify-the-birthday-effect-for-me)，在这里你从 1000000 中选择 100，没关系，但如果你将 100 提高到更高，则需要的时间会越来越长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:22:06.453

将您的范围分成 100 个部分，并从每个子范围中生成一个随机数。我认为它会在你的情况下正常工作。

或者，生成随机数并将它们放入 HashSet 中。当 HashSet 的大小为 100 时，你会中断。

虽然如果你想生成 100 个随机数，它总是 O(1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:22:26.927

在这里创建一个随机。

```
 Random generator = new Random(); 
```

并创建一个计时器类以每 x 秒执行一次函数

```
 int d = 1000; //milliseconds 
 ActionListener t = new ActionListener() {
  public void actionPerformed(ActionEvent e) {
      //...Number genration task Here

  for (int idx = 1; idx <= 10; ++idx){
  int r = generator.nextInt(1000000);
  log("Generated : " + r);
  }
  }
  };
  new Timer(a,t).start() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:26:39.493

免责声明：此解决方案仅在可能生成的数字数量大大超过您必须生成的数字数量时才有效！

编辑：如果您愿意，您也可以将此确切代码与 Mersenne Twister 一起使用

```
import java.util.HashSet;
import java.util.Iterator;
import java.util.Random;

public class MakeRand {
    private static final HashSet<Integer> theNumbers = new HashSet<Integer>();
    private static final Random myRandom = new Random();

    private static void addNumber() {
         int newNumber = -1;
         do {
            newNumber = myRandom.nextInt(1000000) + 1;
         } while(theNumbers.contains(newNumber));

         theNumbers.add(newNumber);
    }

    public static void populate(int howMany) {
        for (int i = 0; i < howMany; i++) {
            addNumber();
        }
    }

    public static void main(String args[]) {
        populate(100);

        Iterator<Integer> iter = theNumbers.iterator();
        while(iter.hasNext()) {
            Integer current = iter.next();
            System.out.println(current);
        }
    }
} 
```

# for-loop - 批处理循环字符串比较

> ID：13202355
> 
> 赞同：1
> 
> 时间：2012-11-02T20:10:28.207
> 
> 标签：for-loop, batch-file, comparison

```
SET CLIENTS=blah1:blah2

for %%x in (%CLIENTS::= %) do (
SET client=%%x
echo %client%;
if "%1"==%client% goto end
)
:end 
```

我希望首先比较 blah1 和 %1，然后再比较 blah2 和 %2。但是，%client% 只会分配给 blah2。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:47:43.267

循环内变量的扩展`FOR`需要您**启用延迟扩展**以强制变量在运行时扩展，而不是在解析时扩展。阅读`HELP SET`以获取更多信息。

并尝试将您的代码更改为

```
@echo off
setlocal enabledelayedexpansion
SET CLIENTS=blah1:blah2
set CLIENTS=%CLIENTS::= %
for %%x in (%CLIENTS%) do (
  SET client=%%x
  echo !client!;
  if "%1"=="!client!" goto end
  )
:end 
```

请注意，该变量的引用语法略有不同`!client!`，而不是`%client%`. *延迟环境变量扩展允许您在执行时使用不同的字符（感叹号）来扩展环境变量。*

# regex - Intellij Idea：如何将美元符号放在被替换的内容上

> ID：13202356
> 
> 赞同：18
> 
> 时间：2012-11-02T20:10:27.167
> 
> 标签：regex, intellij-idea, replace

当你有一个替换并且你想用包含 $ 的东西替换文本时，你会得到一个格式错误的替换字符串（解释器认为它是一个变量引用）。$$ 不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-04T09:54:15.403

如正则[表达式语法参考](http://www.jetbrains.com/idea/webhelp/regular-expression-syntax-reference.html)中所述- 您可以使用`\\$`转义 $ 符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-22T17:03:34.097

`\ $1` 如果来自 JetBrains 的 IDE，您需要在斜杠和符号美元之间输入空格字符

# facebook-opengraph - open graph (#15) 必须使用应用程序 access_token 调用此方法。然后2500

> ID：13202362
> 
> 赞同：0
> 
> 时间：2012-11-02T20:10:38.757
> 
> 标签：facebook-opengraph

我正在尝试向 Facebook 发布一个新的开放图形操作，但我似乎无法获得正确的 access_token。我已经尝试过应用程序和用户令牌。每次错误告诉我使用另一个。

我实际上使用的是 django_facebook，但对于这个示例，我将只使用原始 http。（顺便说一句，这些应用程序 ID/秘密都是伪造的，无需编辑。）

对于这个例子，我有一个正常工作的开放图形对象，称为“promotion”，我在上面运行了调试器，一切都很好。它适用于这样的网站：http: [//mysite.com/promotion/66306/](http://mysite.com/promotion/66306/) 然后我有一个新的开放图形操作类型（例如），称为 myaction，我已在 Facebook 注册。

这是我尝试过的...

**第 1 步：获取应用访问令牌**

```
https://graph.facebook.com/oauth/access_token?client_id=1111111111&client_secret=my11app22secret&grant_type=client_credentials 
```

返回这个：

```
access_token=1111111111|someapptoken 
```

**第 2 步：获取用户令牌**

通过去这里：[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/) 选择我的应用程序，获取访问令牌，并获得权限**publish_actions**

```
Access Token:someLongUserToken 
```

**第 3 步：尝试使用用户令牌**

```
curl -X POST -F 'promotion=http://mysite.com/promotion/66306/' -F 'access_token=someLongUserToken' https://graph.facebook.com/me/myapp:myaction
{"error":{"message":"(#15) This method must be called with an app access_token.","type":"OAuthException","code":15}} 
```

**第 4 步：尝试使用应用令牌**

```
curl -X POST -F 'promotion=http://mysite.com/promotion/66306/' -F 'access_token=1111111111|someapptoken' https://graph.facebook.com/me/myapp:myaction
{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

现在一个很大的线索可能是我的操作类型还没有得到“批准”，但是我是应用程序的管理员，所以它应该可以工作，不是吗？

```
Approval Status:
Unsubmitted
This Action Type must be submitted for review in order for it to be available to all users. This Action Type is available to admins and developers of the app. 
```

我错过了什么？

谢谢！-杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:20:49.890

检查操作的设置 - 您可以启用一个选项，该选项要求只能使用应用访问令牌进行发布 - 如果您启用了该选项，则 #15 消息是正确的。

您也不能将应用程序访问令牌与`/me`快捷方式一起使用，因为“我”是指您正在使用其访问令牌的当前登录用户 - 如果您使用的是应用程序访问权限，则需要指定用户 ID在路径中而不是使用`/me/`

# php - Basecamp API POST 调用不起作用

> ID：13202363
> 
> 赞同：0
> 
> 时间：2012-11-02T20:10:39.377
> 
> 标签：php, api, rest, curl, basecamp

我正在尝试简单地将待办事项添加到待办事项列表中。我在这里有一个非常基本的功能，我知道它是身份验证，如果我的密码错误，它确实会给我权限被拒绝错误。当我使用所有正确的信息运行它时，它返回一个空字符串，而不是它在 Create Todo 下描述的内容[，](https://github.com/37signals/bcx-api/blob/master/sections/todos.md)并且不添加任务。

我可以按预期进行 GET 操作，但 POST 似乎没有任何效果

这是否有问题，或者以其他方式获取有关工作内容的更详细信息？

```
 $username = [REDACTED];
    $password = [REDACTED];
    $userid = [REDACTED];

    $projectid = [REDACTED];
    $todolistid = [REDACTED];

    $todo = "make basecamp integration work!";
    $due = date('Y-m-d' , strtotime('+3 weeks'));

    $url = "https://basecamp.com/".$userid."/api/v1/projects/".$projectid."/todolists/".$todolistid."/todos.json";

    $data = '{
      "content": "'.$todo.'",
      "due_at": "'.$due.'",
      "assignee": {
        "id": '.$userid.',
        "type": "Person"
      }
    }';

    $cheaders = array(
        'User-Agent: '.$username,
        'Content-Type: application/json; charset=utf-8'
        );

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($curl, CURLOPT_USERPWD, $username.":".$password);
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_VERBOSE, true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_HTTPHEADER,$cheaders);

    if ($data){
        curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
    }

    var_dump( curl_exec($curl) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T12:57:39.323

我目前正在从事一个类似的项目，这是我到目前为止所拥有的，也许它会帮助你：

**检索项目数据**

```
$appName = 'AppName';
$appContact = 'MyAddress';

$basecampAccountId = 'MyAccountID';
$basecampUsername = 'MyUsername';
$basecampPassword = 'MyPassword';
$baseUrl = "https://basecamp.com/XXXXXXXXXX/api/v1";

$url= $baseUrl.'/projects.json';
$credentials = "$basecampUsername:$basecampPassword";
$helloHeader = "User-Agent: $appName ($appContact)";

/*echo $url.'<br>';                                     //Echoes the url of the imported projects
/*echo $credentials.'<br>';*/                           //Echoes the credentials of the person signed in
/*echo $helloHeader.'<br>';*/                           //Echoes the email address of the person signed in

$ch = curl_init($url);
    curl_setopt($ch, CURLOPT_USERPWD, $credentials);
    // curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);     //optional
    curl_setopt($ch, CURLOPT_MAXREDIRS, 3);             //optional
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);     //optional
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);        //optional
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);       //optional
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);

    curl_setopt($ch, CURLOPT_HTTPGET, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array($helloHeader));

    $response = curl_exec($ch);
    $errno = curl_errno($ch);
    $error = curl_error($ch);
    curl_close($ch); 
```

**检索待办事项列表项**

```
$todo = $response;
$todophp = json_decode($todo);

echo "$response";
echo "<br/><br/>";
print_r(array_values($todophp));
echo "<br/><br/>";

foreach($todophp as $tododata)
{   
    echo "<ul>";
    echo "<li>".$tododata->name."</li>";
    echo "<li>".$tododata->id."</li>";
    echo "<li>".$tododata->description."</li>";
    /*echo "<li>".$tododata->;*/

    $url= $baseUrl.'/projects/'.$tododata->id.'/todolists.json';
$ch = curl_init($url);
    curl_setopt($ch, CURLOPT_USERPWD, $credentials);
    // curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);     //optional
    curl_setopt($ch, CURLOPT_MAXREDIRS, 3);             //optional
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);     //optional
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);        //optional
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);       //optional
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);

    curl_setopt($ch, CURLOPT_HTTPGET, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array($helloHeader));

    $response = curl_exec($ch);
    $errno = curl_errno($ch);
    $error = curl_error($ch);
    curl_close($ch);

    // print_r($response);

    $todo = $response;
    $todophp = json_decode($todo);

    $todo_remain = $todophp[0]->remaining_count;
    $todo_completed = $todophp[0]->completed_count;
    $todo_total = $todo_remain + $todo_completed;

    echo "<BR>";
    echo "<BR>";
    echo "Remaining To-Do Items:";
    echo "<BR>";
    echo $todo_remain;
    echo "<BR>";
    echo "Completed To-Do Items:";
    echo "<BR>";
    echo $todo_completed;
    echo "<BR>";
    echo "Total To-Do Items:";
    echo "<BR>";
    echo $todo_total;
    echo "<BR>";
    echo "Remaining percentage is: <BR>";
    echo round(($todo_remain/$todo_total)*100);
    echo "%";
    echo "<BR>";
    echo "Completed percentage is: <BR>";
    echo round(($todo_completed/$todo_total)*100);
    echo "%";

    echo "</ul>";
} 
```

让我知道 ;) 祝你好运玩得开心（不要忘记更改凭据等）

# java - EclipseLink MOXy 2.5.0 快照不兼容需要将属性添加到 proporder

> ID：13202366
> 
> 赞同：2
> 
> 时间：2012-11-02T20:10:45.180
> 
> 标签：java, json, eclipselink, moxy

我的启用 Maven 的项目一切正常。

但是当我今天重建它时，测试开始失败并出现错误

```
the property or field count on the class org.musicbrainz.mmd2.DiscList 
is required to be included in the propOrder element of the XmlType annotation 
```

没有代码发生变化，所以我认为 eclipselink MOXy 2.5 snaphot jar 中发生了一些变化。

我可以通过从 oxml.xml 中删除有问题的映射来解决它

```
<java-type name="DiscList">
    <java-attributes>
        <xml-element java-attribute="count" name="disc-count"/>
    </java-attributes>
</java-type> 
```

但后来我得到的 json 不正确（因为我需要将 count 重命名为 disc-count）。

我可以通过修改我的 DiscList.java 类并按照异常的建议添加到 propOrder 来修复它

IE

从

```
@XmlType(name = "", propOrder = {
    "disc"    
}) 
```

到

```
@XmlType(name = "", propOrder = {
    "disc","count"
}) 
```

但这很痛苦，因为这些类是从模式自动生成的，我不想在每次模式更改时都手动编辑它们。

所以问题真的是 MOXy 发生了什么变化，这个变化是否引入了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:01:10.760

[**我们在 2.4.2 和 2.5.0 版本中对EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)进行了此更改（这两个流目前都在开发中）。进行此更改以反映 JAXB 参考实现中的相应行为。

**相关错误**

*   [http://bugs.eclipse.org/372276](http://bugs.eclipse.org/372276)

**推荐修复**

如果您在外部映射文件中添加新映射（这有点罕见，因为您必须通过注释显式删除映射 - [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-属性.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)）。然后，您还需要覆盖`propOrder`外部映射文件中的 。

```
<java-type name="DiscList">
    <xml-type prop-order="disc count"/>
    <java-attributes>
        <xml-element java-attribute="count" name="disc-count"/>
    </java-attributes>
</java-type> 
```

**向我们发送您的反馈**

我们希望获得有关我们所做更改的反馈，尤其是仍在开发中的流。最好的机制是：

*   EclipseLink 论坛： **[http ://www.eclipse.org/forums/index.php?t=thread&frm_id=111](http://www.eclipse.org/forums/index.php?t=thread&frm_id=111)**
*   EclipseLink 用户邮件列表： **eclipselink-users AT eclipse.org**
*   输入错误： **[https ://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)**

**了解更多信息**

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)

* * *

**更新**

> 感谢您的回答，尽管我不相信仅仅因为我想重命名它就要求我向道具订单添加元素是一种改进。我不知道为什么 count 还没有在 proplist 中我没有把它拿出来，只是在使用 JAXB 自动创建类时没有添加它。

如果您的 Java 类是从 XML 模式生成的并且`count`对应于 XML 元素，那么它应该按 prop 顺序排列。MOXy 使用与参考实现相同的 XJC 代码，如果不完整，JAXB RI 也会引发异常，`propOrder`所以我不确定哪种情况会排除它。您介意发布生成的课程吗？我想看看这里是否有实际的错误。

> 如果 eclipselink maven 存储库是可浏览的，那也会很有用，download.eclipse.org/rt/eclipselink/maven.repo 页面没有给出对快照所做更改的任何指示。

我们正在努力改进我们的 Maven 设置。我建议将此作为针对`build`组件的增强请求输入：

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

# parsing - 如何使 Attoparsec 解析器成功而不消耗（如 parsec lookAhead）

> ID：13202371
> 
> 赞同：5
> 
> 时间：2012-11-02T20:10:53.017
> 
> 标签：parsing, haskell, attoparsec

我写了一个快速的 attoparsec 解析器来遍历一个 aspx 文件并删除所有样式属性，它工作正常，除了其中一个我无法弄清楚如何在`>`不消耗它的情况下使其成功匹配。

这是我所拥有的：

```
anyTill = manyTill anyChar
anyBetween start end = start *> anyTill end

styleWithQuotes = anyBetween (stringCI "style=\"") (stringCI "\"")
styleWithoutQuotes = anyBetween (stringCI "style=") (stringCI " " <|> ">")
everythingButStyles = manyTill anyChar (styleWithQuotes <|> styleWithoutQuotes) <|> many1 anyChar 
```

我理解这部分是因为我如何在所有内容中使用 manyTillButStyles，这就是我积极地将所有样式的东西放在地上的方式，但`styleWithoutQuotes`我需要它以匹配“>”作为结尾，但不消耗它，以秒为单位我本来会这样做`lookAhead ">"`，但我不能在 attoparsec 中这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:08:42.587

同时，在[attoparsec](http://hackage.haskell.org/package/attoparsec)[`lookAhead`](http://hackage.haskell.org/package/attoparsec-0.13.0.0/docs/Data-Attoparsec-Combinator.html#v:lookAhead)中添加了组合器，因此现在可以使用or来实现目标。`lookAhead (char '>')``lookAhead (string ">")`

以下是引入之前的解决方法。

* * *

您可以使用 构建非消耗解析器[`peekWord8`](http://hackage.haskell.org/packages/archive/attoparsec/0.10.2.0/doc/html/Data-Attoparsec-ByteString.html#v:peekWord8)，它只查看下一个字节（如果有）。因为`ByteString`有一个`Monoid`实例，`Parser ByteString`所以是一个`MonadPlus`，你可以使用

```
lookGreater = do
    mbw <- peekWord8
    case mbw of
      Just 62 -> return ">"
      _ -> mzero 
```

（62 是 的代码点`'>'`）要么找到 a`'>'`而不消耗它，要么失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T23:57:32.410

```
anyBetween start end = start *> anyTill end 
```

您的`anyBetween`解析器会吃掉它的最后一个字符，因为`anyTill`它的设计目的是解析到一个结束标记，但假设您不想在输入中保留右大括号以再次解析。

请注意，您的`end`解析器都是单字符解析器，因此我们可以更改功能以使用它：

```
anyBetween'' start ends = start *> many (satisfy (not.flip elem ends)) 
```

但`many`不如 Attoparsec's 高效`takeWhile`，你应该尽可能多地使用它，所以如果你已经完成了

```
import qualified Data.Attoparsec.Text as A 
```

然后

```
anyBetween' start ends = start *> A.takeWhile (not.flip elem ends) 
```

应该做的伎俩，我们可以重写

```
styleWithoutQuotes = anyBetween' (stringCI "style=") [' ','>'] 
```

如果你想让它吃，`' '`但不是`'>'`你可以在之后明确吃空间：

```
styleWithoutQuotes = anyBetween' (stringCI "style=") [' ','>'] 
                     <* A.takeWhile isSpace 
```

## 追求更多`takeWhile`

也许`styleWithQuotes`也可以通过重写来使用`takeWhile`，所以让我们在`anyBetween`. 它们从一个起始解析器到一个结束字符，并且有包容性和排他性版本：

```
fromUptoExcl startP endChars = startP *> takeTill (flip elem endChars)
fromUptoIncl startP endChars = startP *> takeTill (flip elem endChars) <* anyChar 
```

但我认为从你所说的，你想`styleWithoutQuotes`成为一个混血儿；它吃`' '`但不吃`>`：

```
fromUptoEat startP endChars eatChars = 
            startP 
            *> takeTill (flip elem endChars) 
            <* satisfy (flip elem eatChars) 
```

（所有这些都假设您的结束字符列表中有少量字符，否则`elem`效率不高 -`Set`如果您要检查像字母表这样的大列表，则会出现一些变体。）

现在进行重写：

```
styleWithQuotes' = fromUptoIncl (stringCI "style=\"") "\""
styleWithoutQuotes' = fromUptoEat (stringCI "style=") " >" " " 
```

## 整体解析器

`everythingButStyles`以`<|>`某种方式使用，这意味着如果它没有找到`"style"`它会回溯然后拿走所有东西。这是一个可能很慢的例子。问题是我们失败得很晚 - 在输入字符串的末尾，这是一个糟糕的时间来选择我们是否应该失败。让我们全力以赴尝试

1.  如果我们要失败，就直接失败。
2.  最大限度地使用来自[Data.Attoparsec.Text.Internal的更快的解析器](https://github.com/bos/attoparsec/blob/master/Data/Attoparsec/Text/Internal.hs)

想法：直到我们得到一个 s，然后如果那里有一个样式，则跳过该样式。

```
notStyleNotEvenS = takeTill (flip elem "sS") 
skipAnyStyle = (styleWithQuotes' <|> styleWithoutQuotes') *> notStyleNotEvenS 
               <|> cons <$> anyChar <*> notStyleNotEvenS 
```

通常`anyChar`是`s`or `S`，但再次检查是没有意义的。

```
noStyles = append <$> notStyleNotEvenS <*> many skipAnyStyle 

parseNoStyles = parseOnly noStyles 
```

# python - 无法在 virtualenv 中安装和使用 django 1.0

> ID：13202373
> 
> 赞同：0
> 
> 时间：2012-11-02T20:11:00.973
> 
> 标签：python, django, virtualenv, virtualenv-commands

嗨，我正在尝试安装 django 1.0，我可以在 virtualenv 中安装最新版本的 django，`pip install django`但我不需要它，我只想安装 django 1.0，因为我必须做一些简单的工作。

我尝试过以下事情，但最后它使用了安装在我的系统上的 django1.4，没有任何 virtualenv，以下是我尝试过的：

```
-laptop:/var/www/python_virtualenv$ virtualenv newenv
 New python executable in newenv/bin/python
Installing   distribute.............................................................................................................................................................................................done. 
```

安装 pip……完成。

然后在 cd 到 newenv 之后，激活并安装我使用以下命令下载的 django 1.0：

```
hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ source bin/acivate
bash: bin/acivate: No such file or directory
hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ source bin/activate
(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ sudo python /home/hafiz/Downloads/Django-1.0.4/setup.py install
running install
running build
running build_py
running build_scripts
running install_lib
running install_scripts
changing mode of /usr/local/bin/django-admin.py to 775
running install_data
running install_egg_info
Removing /usr/local/lib/python2.7/dist-packages/Django-1.0.4.egg-info
Writing /usr/local/lib/python2.7/dist-packages/Django-1.0.4.egg-info
(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ 
```

然后使用以下方法创建项目：

```
(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ sudo python /usr/local/bin/django-admin.py startproject proj 
```

然后 cd 到 proj 然后使用以下命令启动服务器：

```
(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv/proj$ sudo python manage.py runserver 0.0.0.0:8080
  Validating models...

  0 errors found
  Django version 1.4, using settings 'proj.settings'
  Development server is running at http://0.0.0.0:8080/
  Quit the server with CONTROL-C. 
```

但可以看出，django 开始是 Django 1.4 版，使用设置'proj.settings'，所以我做错了。我不得不做一些简单的事情，但遇到了这个问题，所以如果有人曾经能理解这个问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:17:22.780

当您这样做时`sudo python /home/hafiz/Downloads/Django-1.0.4/setup.py install`，该命令将作为 执行`root`，它不会使用 virtualenv（幸运的是！），因此这会在系统范围内安装，而不是在 virtualenv 中，这违背了 virtualenv 的目的（请参阅@miki725 的评论）。

您实际上可以通过查看安装的输出来确认这一点（请参阅millimoose 的评论）

```
changing mode of /usr/local/bin/django-admin.py to 775 
```

您运行的所有其他命令也是如此。 

## 结论：

`sudo`您应该从所有命令中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:18:03.960

也许您可以尝试使用[pip](http://www.pip-installer.org/en/latest/)安装 django，如下所示：

```
pip install https://www.djangoproject.com/download/1.0.4/tarball/ 
```

# c# - 快速查找指定文本的行

> ID：13202374
> 
> 赞同：0
> 
> 时间：2012-11-02T20:11:14.260
> 
> 标签：c#, excel

好的，所以我有一个非常大的 Excel 表，我需要在其中找到具有指定文本字符串的行。此表的大小约为 10,000 行。我目前正在做这样的事情：

```
 sheet = workbook.ActiveSheet;

  // FIND the tape id in column: __________
        int cellRow = 0;
        int x = 0;
        for (x = 1; x <= 1000000; x++)
        {
            if (sheet.Cells[43][x].text.Contains(tapeID))
            {
                cellRow = x;
                break;
            }
        } 
```

问题是这种情况持续了相当长的一段时间......因此对于我的需求来说太慢了。我尝试执行 sheet.find() 方法，但它返回了一大堆错误的单元格.....有人可以帮我实现 sheet.find 或告诉我更快的方法吗？

我实现了这样的查找：

```
 sheet = workbook.ActiveSheet;
           Microsoft.Office.Interop.Excel.Range currentFind = currentFind = sheet.Cells.Find(tapeID, Type.Missing,
    Microsoft.Office.Interop.Excel.XlFindLookIn.xlValues, Microsoft.Office.Interop.Excel.XlLookAt.xlPart, 
    Microsoft.Office.Interop.Excel.XlSearchOrder.xlByRows, Microsoft.Office.Interop.Excel.XlSearchDirection.xlNext, false,
    Type.Missing, Type.Missing); 
```

但是当我用 string value = currentFind[0][0].Text 查看里面的内容时

我得到了错误的单元格......excel在这里使用零寻址吗？......去调​​查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:40:07.057

令人沮丧的是，我只是为查找功能使用了错误的索引。我对此感到有点羞愧，所以我们会忘记它发生过。

干杯

# sql - 如何编写这个 SQL 来链接 DB2 中的数据？

> ID：13202376
> 
> 赞同：0
> 
> 时间：2012-11-02T20:11:17.430
> 
> 标签：sql, db2

例如，有两列 - ID1 和 ID2 相互链接。这些 ID 可能与表中的其他 ID 相关联。

```
ID1         ID2
------------------
001         002
001         003
004         005
002         006
005         007 
```

上表中，001、002、003、006是联动的，004、005、007是联动的。

是否可以在 SQL for DB2 中查询此信息？

格式类似于以下：

```
Group       ID
--------------
1           001
1           002
1           003
1           006
2           004
2           005
2           007 
```

另一方面，如果再向表中添加一条记录 (008, 007)

```
ID1         ID2
------------------
001         002
001         003
004         005
002         006
005         007
008         007  (Newly added) 
```

预期结果将是：

```
Group       ID
--------------
1           001
1           002
1           003
1           006
2           004
2           005
2           007
2           008 
```

因为 004, 005, 007, 008 是链接的。

DB2 版本是 9.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:49:42.997

你当然可以！它需要一个递归查询：

```
WITH Recur (grp, root, leaf) as (SELECT ROW_NUMBER() OVER(ORDER BY root.id1), 
                                        CAST(NULL as CHAR(3)), 
                                        root.id1
                                 FROM Linked as root
                                 EXCEPTION JOIN Linked as leaf
                                 ON leaf.id2 = root.id1
                                 GROUP BY root.id1
                                 UNION ALL 
                                 SELECT grp, leaf, id2
                                 FROM Recur 
                                 JOIN Linked
                                 ON id1 = leaf)

SELECT grp, leaf 
FROM Recur
ORDER BY grp, leaf 
```

（在我的本地 iSeries 上测试，并且有一个有效的[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/ef43f/11/1)，它必须使用`LEFT JOIN`-style 异常才能在 SQL Server 中工作）

产生预期的输出：

```
grp   leaf
=============
1     001 
1     002 
1     003 
1     006 
2     004 
2     005 
2     007 
```

# mysql - Symfony2、Doctrine 和 MySQL：如何生成发票编号

> ID：13202382
> 
> 赞同：4
> 
> 时间：2012-11-02T20:12:07.320
> 
> 标签：mysql, symfony, doctrine

使用 Symfony2.0、Doctrine 和 MySQL，我需要根据以下格式自动生成相关发票编号：

年/自增

例如，2012 年的发票：

```
2012/00000001
2012/00000002
2012/00000003 
```

ETC...

该发票编号将使用`invoice_number`我的 MySQL 数据库中的采购表中的一个字段进行存储。

问题是，我如何查询数据库以返回特定年份的最后一个自增数？

换句话说（伪代码）：

```
function new_invoice(){
    $year = today.year;
    select last invoice_number where year = $year;
    $new_invoice_number = increment invoice_number;
    store $year . "/" . $new_invoice_number;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T20:47:48.833

首先，symfony2 和教义2 都不是您的问题和解决方案的一部分。其次，您可能需要考虑将 a 存储`/`在您的 invoice_number 中，主要是因为您需要为此字段设置一个 varchar，它在索引和查询项目等方面的性能比整数差。

也就是说，您想要的可以通过多种方式实现，具体取决于您的需求：

**选择最后一个条目，加一，保存**

这是一种解决方案，仅当您没有太多写入购买表或这些写入由一个进程（例如，批处理）完成时才有效，您可以在其中等待一个项目被写入，如果成功写入下一个一。

只需从数据库中选择最后一个条目，获取`invoice_number`，递增一，保存。如果年份不同，请从一个开始。

当然，如果你每秒有很多写入，你就会遇到麻烦，因为在你写一行的那一刻，另外两个可能已经读取了旧的最后一个 invoice_number，将它加一并尝试存储它（导致错误，因为他们需要是独一无二的）。

**读取时动态计算**

如果您不需要`invoice_number`经常使用此解决方案，则此解决方案效果很好。你可以对一个想法有一个正常的 auto_increment 。对于每一年，您将去年的最后一个 id 存储在一些帮助表中。当您读取一行时，您可以通过获取年份、上一年的最后一个 id 并从 auto_increment 中减去它来计算 id。

开销当然是您每次都需要计算发票。根据您实际实现它的方式以及数据库负载是什么，这可能从不明显到非常慢。

**让 invoice_number 为空，然后计算**

这可以通过许多不同的方式完成，如果您不想摆弄事务等，捕获失败的写入等，这是一个非常简洁的解决方案。这个想法是首先使用空的 invoice_number 存储数据，然后在保存数据时计算 invoice_number 并更新数据集。

您可以将其与之前的想法结合起来，像上面描述的那样计算 invoice_number，然后用这个数字更新数据集，而不是每次都重新计算。您还可以有一个 cronjob 或寻找具有空 invoice_number 的行的东西，以及仅由该 cronjob 使用的助手表中的计数器之类的东西。他拿起计数器，增加它，使用这是数据集的新发票，并保存计数器和数据集。

**尝试，重复错误**

这是一个丑陋的解决方案，但它可以工作并且在某些情况下可能没问题。您选择最后一个 invoice_number，将其加一，保存当前数据集。如果失败，则重复该过程。你这样做直到你成功储蓄。您需要确保在实际数据库上进行选择（doctrine2 可能会缓存结果，这意味着您始终获取旧数据集，增加相同的数字并因此一遍又一遍地遇到相同的错误）并且如果您有一些 master/从站设置不适用于从站，因为它可能不是最新的。

我不喜欢这个解决方案，但正如所说，这是值得考虑的。

**一年一桌**

每年可以将数据保存在一个表中。这样你就可以使用 auto_increment。当然，外键会变得混乱，并且在许多表上进行选择并不比只有一张表那么容易。您当然可以引入一个组合所有这些表的视图。

**使用存储过程**

我从来都不是存储过程的粉丝，主要是因为它将逻辑从应用程序带到数据库，因此更难掌握正在发生的事情（“这个值从何而来？”）。但是您可以有一些存储过程来计算`invoice_number`并将其与其他值一起存储在`INSERT INTO`

**只需使用 auto_increment**

如果你只使用 auto_increment，你会为自己省去很多麻烦。您始终可以将年份保存在另一列中并将两者一起显示。当然，如果您的要求来自产品所有者，这可能是不可能的。但是，如果您有任何方法可以做到这一点，请尝试一下！

**...**

可能还有更多。这些只是我的想法。

# sql-server - 返回映射类的列表 - 实体框架

> ID：13202383
> 
> 赞同：1
> 
> 时间：2012-11-02T20:12:11.173
> 
> 标签：sql-server, asp.net-mvc, entity-framework

我有这个类链接到 SQL Server 中的视图：

```
[Table("V_Clients")]
public class Client
{
    [Key]
    public int ClientId { get; set; }
    public short BranchId { get; set; }
    public string CorporateName { get; set; }
    public string TIN { get; set; }
    public string Address { get; set; }
    public string Phone { get; set; }
    public string Id { get; set; }//NroCi
    public short CityId { get; set; }
    public short ZoneId { get; set; }
    public short SubZoneId { get; set; }
    public short VendorId { get; set; }
    public short PriceListId { get; set; }
    public short CollectorId { get; set; }

    [ForeignKey("BranchId")]
    public virtual Branch Branch { get; set; }

    [ForeignKey("CityId")]
    public virtual City City { get; set; }

    [ForeignKey("ZoneId")]
    public virtual Zone Zone { get; set; }

    [ForeignKey("SubZoneId")]
    public virtual SubZone SubZone { get; set; }

    [ForeignKey("VendorId")]
    public virtual Vendor Vendor { get; set; }

    [ForeignKey("PriceListId")]
    public virtual PriceList PriceLists {get;set;}

    [ForeignKey("CollectorId")]
    public virtual Collector Collector { get; set; }
} 
```

但是当我尝试像这样列出它时：

```
public ActionResult Index()
    {
        var clients = db.Clients.Include(c => c.Branch).Include(c => c.City).Include(c => c.Zone).Include(c => c.SubZone).Include(c => c.Vendor).Include(c => c.PriceLists).Include(c => c.Collector);
        return View(clients.ToList());
    } 
```

什么都没发生。会不会是因为人际关系？

注意：所有类都链接到视图，并且可以与除我的`Client`类之外的其他类一起正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:20:49.390

尝试将字符串传递给 Include()。前任：

`var clients = db.Clients.Include("Branch").Include("City");`

# c++ - 保持 std::multiset 中相等元素的插入顺序

> ID：13202384
> 
> 赞同：1
> 
> 时间：2012-11-02T20:12:17.557
> 
> 标签：c++, stl, multiset, strict-weak-ordering

我有一个 std::multiset 排序的自定义对象。多重集中的两个相等对象（基于 < 运算符）可能包含一些不相等的字段。在这种情况下，我需要保持在 multiset<> 中插入对象的顺序。

我知道如果我使用的是 C++11，这不是问题，但目前还不是。

我看到的另一个解决方案使用类中的时间戳字段 using `<ctime>`，但分辨率为 1 秒。如果我在同一秒内有 2 次插入，那么我不能在比较操作中使用时间戳。我们没有/不能在这个项目上使用 boost::chrono。

我可以使用另一种方法来确保维护插入顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:15:32.600

我只是使用一个每次插入新项目时递增的计数器，并将其用作插入时比较的最后一个字段。在典型情况下，您需要使计数器成为管理集合的类的静态成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:32:01.443

这是一个疯狂的想法：正如@Jerry 建议的那样，维护一个柜台。由于对象和计数器对是唯一的，我们现在可以使用一个集合（按字典顺序排列）。然后我们使用`lower_bound`找到插入点并计算下一个计数器值：

```
unsigned int const uimax = std::numeric_limits<unsigned int>::max();

typedef std::set<std::pair<T, unsigned int>> pair_set;

void counted_insert(pair_set & s, T const & t)
{
    pair_set::iterator it = s.lower_bound(std::make_pair(t, uimax));

    if (it == s.begin() || !(*--it == t))
    {
        s.insert(it, std::make_pair(t, 0));
    }
    else
    {
        s.insert(it, std::make_pair(t, it->first + 1));
    }
} 
```

# django - 没有找到带有参数“（）”和关键字参数“{}”的 Django Reverse

> ID：13202385
> 
> 赞同：168
> 
> 时间：2012-11-02T20:12:21.187
> 
> 标签：django, django-testing

嗨，我有一个令人愤怒的问题。

我有一个这样的网址模式：

```
# mproject/myapp.urls.py

url(r'^project/(?P<project_id>\d+)/$','user_profile.views.EditProject',name='edit_project'), 
```

它在浏览器中运行良好，但对于测试，当我在 shell 中执行此操作时：

```
from django.test import Client
from django.core.urlresolvers import reverse

client= Client()
response = client.get(reverse('edit_project'), project_id=4) 
```

我得到了可怕的：

```
NoReverseMatch: Reverse for 'edit_project' with arguments '()' and keyword arguments '{}' not found. 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2012-11-02T20:16:05.147

您必须指定`project_id`：

```
reverse('edit_project', kwargs={'project_id':4}) 
```

文档[在这里](https://docs.djangoproject.com/en/dev/ref/urlresolvers/#django.core.urlresolvers.reverse)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-01-22T16:12:36.550

解决方案@miki725 是绝对正确的。或者，如果您想使用`args`属性而不是`kwargs`，那么您可以简单地修改您的代码，如下所示：

```
project_id = 4
reverse('edit_project', args=(project_id,)) 
```

这方面的一个例子可以在[文档](https://docs.djangoproject.com/en/2.1/topics/http/urls/#examples)中找到。这基本上做同样的事情，但属性作为参数传递。请记住，传递的任何参数都需要在反转之前分配一个值。只需使用正确的命名空间，在本例中为`'edit_project'`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-21T16:45:02.050

当我尝试使用反向生成激活链接并通过电子邮件发送时，这个问题让我非常头疼。所以我认为从tests.py来看是一样的。执行此操作的正确方法如下：

```
from django.test import Client
from django.core.urlresolvers import reverse

#app name - name of the app where the url is defined
client= Client()
response = client.get(reverse('app_name:edit_project', project_id=4)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-18T10:28:15.103

功能`resolve_url`也更直接

```
from django.shortcuts import resolve_url

resolve_url('edit_project', project_id=4) 
```

[有关此快捷方式的文档](https://github.com/django/django/blob/main/django/shortcuts.py#L102)

# c# - 首次在 WebMatrix (C#) 中测试 AJAX，服务器返回内部错误 500

> ID：13202395
> 
> 赞同：0
> 
> 时间：2012-11-02T20:13:23.917
> 
> 标签：c#, javascript, jquery, ajax, webmatrix

这应该是一个容易解决的问题，我以前从来没有弄乱过 AJAX ......

我在第一次测试 AJAX 时遇到问题。

在我看来，一切都是正确的，根据在线示例，这应该有效，但显然并非如此。

（请记住，这只是一个测试，看看我是否可以让它工作，我知道使用服务器端进行这种简单的计算是荒谬的）。

我不打算包含标题的 html，因为它在不同的布局页面中并呈现，但我向您保证那里有必要文件的正确路径。

无论如何，如果需要，我的设置是以这种方式设置的，以便将来实现和增长（当前使用这 4 个不同的文件）：

**HTML (default.cshtml)：**

```
 ///Simple AJAX test to multiply to user set numbers on server side
    ///and return the result.

    <h1>Welcome to Us</h1> 

<p>
Lorem Ipsum Porem Lorem Ipsum Porem 
</p>
<p>
    Choose a number from the first list,
    then a number from the second list
    and they will be multiplied together
    using AJAX on the server side, then
    updated on the page, all without having
    to resubmit the form or reload the page!
</p>
<button id="btn1" name="btn1">1</button><button id="btn2" name="btn2">2</button><button id="btn3" name="btn3">3</button><button id="btn4" name="btn4">4</button><button id="btn5" name="btn5">5</button><br/>
<span>First Number:&nbsp;</span><span id="firstNumber" style="height: 20px; width: 20px; margin-bottom: 10px; color: #f00;"></span><br/><br/>
<button id="2btn1" name="2btn1">1</button><button id="2btn2" name="2btn2">2</button><button id="2btn3" name="2btn3">3</button><button id="2btn4" name="2btn4">4</button><button id="2btn5" name="2btn5">5</button><br/>
<span>Second Number:&nbsp;</span><span id="secondNumber" style="height: 20px; width: 20px; margin-bottom: 10px; color: #f00;"></span><br/><br/>
<button id="Compute" name="Compute">Compute</button><br/><br/>
<span>Result:&nbsp;</span><span id="result" style="height: 20px; width: 20px; margin-bottom: 10px; color: #2ba03a;"></span><br/><br/> 
```

**第一个 JavaScript 文件 (Main.js)：**

```
$(document).ready(function () {

    /////////FIRST NUMBER/////////////
    $("#btn1").click(function () {
        $("#firstNumber").html("1");
    });
    $("#btn2").click(function () {
        $("#firstNumber").html("2");
    });
    $("#btn3").click(function () {
        $("#firstNumber").html("3");
    });
    $("#btn4").click(function () {
        $("#firstNumber").html("4");
    });
    $("#btn5").click(function () {
        $("#firstNumber").html("5");
    });

    /////////SECOND NUMBER/////////////
    $("#2btn1").click(function () {
        $("#secondNumber").html("1");
    });
    $("#2btn2").click(function () {
        $("#secondNumber").html("2");
    });
    $("#2btn3").click(function () {
        $("#secondNumber").html("3");
    });
    $("#2btn4").click(function () {
        $("#secondNumber").html("4");
    });
    $("#2btn5").click(function () {
        $("#secondNumber").html("5");
    });

    $("#Compute").click(function () {
        var num1 = $("#firstNumber").text();
        var num2 = $("#secondNumber").text();

        compute(num1, num2);
    });
}); 
```

**第二个 JavaScript 文件 (TestAjax.js)：**

```
var xmlhttp;
function loadXMLDoc (url, cfunc)
{
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = cfunc;
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}
function compute(number1, number2)
{
    loadXMLDoc("/TestAjax.cshtml?numb1=" + number1 + "&numb2=" + number2, function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("result").innerHTML = xmlhttp.responseText;
        }
    });
} 
```

**最后，服务器端的 cshtml 文件（TestAjax.cshtml）：**

```
@{
    int numb1 = Request["numb1"];
    int numb2 = Request["numb2"];

    int resultNumb = numb1 * numb2;

    return(resultNumb);
} 
```

**如果它有帮助（我认为它可能），服务器会响应：**

```
GET http://localhost:14950/TestAjax.cshtml?numb1=4&numb2=2 500 (Internal Server Error) 
```

我可以看到这些值在这里变成了查询字符串，但是......

它在第二个 JavaScript 文件 (xmlhttp.send();) 的第 15 行出错，但对我来说这意味着它不喜欢它给出的某些数据（或者该行的语法不好，我对此表示怀疑，但我是 AJAX 的新手，所以......）。无论如何，应该是我忽略的一些简单的东西，但我找不到它是什么。

谢谢你的帮助！我真的很想开始在我的程序员工具箱中添加一些 AJAX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:48:30.203

我认为您不能像那样直接访问视图。

我过去所做的是在项目中添加一个 Ajax 控制器，在 Views/Shared 文件夹中添加一个空白的 _AjaxLayout.cshtml，在 Views/Ajax 文件夹中添加一个 _View_Start.cshtml，将 Layout 设置为“~/视图/共享/_AjaxLayout.cshtml”文件。

在您的控制器中，您添加一个操作（“TestAjax”），然后您可以将您的 TestAjax.cshtml 文件放入 Views/Ajax 中。

要访问它，URL 将是 /Ajax/TestAjax?numb1=4&numb2=2

如果可以调试它并确保在尝试将其集成到页面之前获得预期的结果，那么直接在浏览器中点击您的 Ajax URL 是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:17:54.120

好吧，我最终要做的主要是两件事。

1.  解析 cshtml 文件 (TestAjax.cshtml) 中的两个变量（强制转换不起作用）

&

2 return(resultNumb) 显然与 AJAX 不正确。我不得不用以下内容替换它：@：@resultNumb

我很乐意接受任何向我展示以下任何内容的答案：

1.  如何使用 AJAX 仅发送一个值或一行，而不是整个页面（如果可能）

2.  如何在 AJAX 返回中对多行进行分组（例如“@:”之后的内容）

3.  几乎就是“@:”的意思。

# javascript - 在浏览器中解压缩作为来自 Node.js 的静态文件的 JSON 数据文件

> ID：13202399
> 
> 赞同：1
> 
> 时间：2012-11-02T20:13:34.760
> 
> 标签：javascript, ajax, node.js, gzip, http-compression

与[这篇文章](https://stackoverflow.com/questions/8350749/gzipped-json-file-not-decompressing)类似，需要向浏览器发送一个 30MB 的大 JSON 文件，压缩到 3MB。（是的，是的，解压缩的过程很大而且很密集，但最好将其作为静态文件提供一次，而不是像对 REST API 进行 150 次单独的 AJAX 调用，并且这里有一点前期加载时间是可以的）。

和原帖一样，它是一个静态文件，所以可以提前压缩（所以服务器不需要在每次请求时压缩它）。此外，可以从服务器上的公共目录中提供它，在 Node.js / Express.js 中我已将其标记为静态：

`app.use(express.static(__dirname + "/public"));`

一位评论者回答：

*“也可以预压缩你的 JSON，然后告诉 Apache 提供带有适当标题的文件，以避免一直重新压缩。”*

**问题1：** 在Node/Express中我该如何做，即告诉Node告诉浏览器文件是gzip格式，以便浏览器自动解压缩？

另一个答案评论*“......但请检查浏览器是否支持压缩”*，这引发了另一个问题？

**问题 2：** ~大多数~现代浏览器有解压缩内容的能力吗？还是我最好只包含一个用于解压缩的 javascript 库，通过 Ajax 作为二进制文本获取数据，并始终在我自己的代码中解压缩它而不是浏览器的本机实用程序？

（出于我的目的，排除一些旧浏览器是可以的，例如放弃 IE6 可以，放弃对 IE9 的支持则不行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:17:26.523

如果有`Content-Encoding`标头，浏览器应自动解压缩服务器响应。

使用 node.js，您可以使用标头提供已压缩的文件：

```
Content-Encoding: gzip 
```

IE：

```
res.setHeader( "Content-Encoding", "gzip" ); 
```

现代浏览器支持 gzip，对于较旧的浏览器，请查看[http://www.schroepl.net/projekte/mod_gzip/browser.htm](http://www.schroepl.net/projekte/mod_gzip/browser.htm)

# jquery - jQuery 循环 + Fancybox 插件框架大小问题

> ID：13202400
> 
> 赞同：0
> 
> 时间：2012-11-02T20:13:43.250
> 
> 标签：jquery, fancybox, jquery-cycle

我正在尝试将 jQuery Cycle 插件与 Fancybox 插件一起使用。此时几乎一切都在工作。fancybox 打开，显示内容，内容循环。我遇到的问题是容器没有自动调整大小以适应图像。我的代码：

```
<script type="text/javascript" src="/assets/scripts/jquery.cycle.lite.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#launcher").fancybox({
        autoScale: true
    });
})
$(function(){
    $('#slides').cycle({ 
    timeout:    8000,
    speed:      1000,
    pause: true,
    containerResize: 1,
    fit: 1
    });
});
</script>

   <div id="launcher">
      <div id="slides">
          <img src="/assets/images/VideoSlides/slide1.png">
          <img src="/assets/images/VideoSlides/slide2.png">
          <img src="/assets/images/VideoSlides/slide3.png">
      </div>
   </div> 
```

如您所见，我尝试将各种属性添加到函数中以强制其自动调整大小，但它们没有任何效果。设置任一 div 的样式都会相应地调整框架的大小，但我宁愿没有固定大小的框架。以前有人做过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:01:03.017

我认为没有简单的解决方案如何组合这两个插件，以便在 Cycle 更改下一个图像之前，fancyBox 会调整大小。

但是，fancyBox2 已经内置了幻灯片，为什么不用它来代替呢？您可以在开始时使用“autoPlay”选项激活它，并使用“playSpeed”来改变速度。快速示例：

```
$("#launcher").click(function() {

    $.fancybox.open( $("#slides img"), {
        autoPlay   : true,
        playSpeed  : 2000,
        prevEffect : 'fade',
        nextEffect : 'fade'
    });

    return false;
}); 
```

见 - [http://jsfiddle.net/3SQt4/](http://jsfiddle.net/3SQt4/)

# asp.net-mvc - 解决 MVC 4 Razor 中的错误

> ID：13202401
> 
> 赞同：0
> 
> 时间：2012-11-02T20:13:45.837
> 
> 标签：asp.net-mvc, razor

在 .cs 文件中，当您遇到诸如“找不到类型或命名空间名称‘产品’（您是否缺少 using 指令或程序集引用？）”之类的错误时

您右键单击它并选择解决以自动添加缺少的程序集引用。在 razor .cshtml 中，你是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:18:05.807

您将`using`语句添加到剃刀视图。

```
@using YourNameSpaceIfExists.Products 
```

如果您不想在要使用此类的每个视图中键入完整路径 (NamespaceName.className)，则可以将这些命名空间全局添加到**Views 文件夹中可用的 web.config 中**。您将在页面部分下看到命名空间部分。将您的命名空间添加到 l

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Optimization"/>
      <add namespace="System.Web.Routing" />
      <add namespace="YourNameSpaceNameHere"/>
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

现在在您的视图中，您可以简单地使用类名

```
@model Product 
```

# java - JAVA 没有 if 的其他方法？

> ID：13202402
> 
> 赞同：-2
> 
> 时间：2012-11-02T20:13:47.697
> 
> 标签：java

我有这个代码用于分配。当我编译它时，我得到

```
grades.java:18: error: 'else' without 'if'
    else
    ^
1 error 
```

这是代码：

```
public class grades
{
    public static void main (String [] args)
    {
        int gradeone=75;
        int gradetwo=80;
        int testscore= ((gradeone + gradetwo)/2);
        char grade;
        System.out.println("\n" + "your test score is" + testscore);
        if(testscore >= 90 )
      grade='A';
    elseif(testscore >= 80 );
      grade='B';
    elseif(testscore >= 70 );
      grade='C';
    elseif(testscore >= 65 );
      grade='D';
    else
      grade='F';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:09:55.873

正如其他人已经提到的那样，语法是***else if*** - 注意空格。

此外，我*强烈建议*您坚持传统的编码风格，直到您对自己的技能更有信心。

A) 现在，在使用块和语句时使用大括号语法。您的代码将更具可读性，并且您将能够更轻松地识别语法错误。虽然技术上不需要，但您将面临不带括号确定局部变量和方法范围的挑战。

```
 public static void main( String[] args ) {
    int gradeOne = 75, gradeTwo = 80, testScore = ( ( gradeOne + gradeTwo ) / 2 );
    char grade;

    if( testScore >= 90 ) {
        grade = 'A';
    } else if( testScore >= 80 ) {
        grade = 'B';
    } else if( testScore >= 70 ) {
        grade = 'C';
    } else if( testScore >= 65 ) {
        grade = 'D';
    } else {
        grade = 'F';
    }
    System.out.println( "\n" + "your test score is: " + testScore );
} 
```

B）当您不确定语法时，请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)以获得答案......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:16:25.900

`else if`代替，`elseif`你不应该`;`在行尾`else if`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:15:53.667

去掉后面的分号`else if`。这种错误是由于*空语句*而发生的，如果条件满足，它将执行分号，然后执行其他代码（ ）不进行`grade = 'B';`任何评估，这将分隔`if``else`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T20:16:35.760

Java 没有运算符`elseif`。你必须改写`else if`。因此，java 编译器与您的代码混淆，无法找到与`if`您的`else`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T20:39:15.667

将“else if”替换为 elseif 并删除 if 表达式后的逗号。然后您的代码将与以下完美运行的代码相同:)

```
public class check {
    public static void main (String [] 
        int gradeone=75;
        int gradetwo=80;
        int testscore= ((gradeone + gradetwo)/2);
        char grade;
        System.out.println("\n" + "your test score is" + testscore);
        if(testscore >= 90 )
            grade='A';
        else if(testscore >= 80 )
            grade='B';
        else if(testscore >= 70 )
            grade='C';
        else if(testscore >= 65 )
            grade='D';
        else
            grade='F';    
} 
```

# android - 尝试使用电子邮件地址获取联系人 _ID

> ID：13202403
> 
> 赞同：1
> 
> 时间：2012-11-02T20:13:49.733
> 
> 标签：android, contacts, android-contacts

我知道聚合联系人 _ids 不是静态的，但可能会随着时间的推移而变化（请参阅：[Google Group Discussion](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/zS3Ipmf-lsk)）。

因此，在我的应用程序中，我存储了内容查找键和所选联系人的当前 ID。

我要做的是：当一条消息来自特定的电子邮件地址时，查询电话联系人并查看来自电子邮件地址的联系人是否与其中任何一个相关联，然后将该联系人与我存储的联系人进行比较，首先做使用我存储的联系人 _id 和查找键的新查询来获取当前联系人 _id。

以下是我尝试使用电子邮件地址查找联系人 _id 的方式：

```
String[] projection = {
    ContactsContract.Contacts.LOOKUP_KEY,
    ContactsContract.Contacts._ID
}

uri = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Email.CONTENT_LOOKUP_URI, Uri.encode(data)); //data = email address
cur = resolver.query(uri, projection, null, null, null);

if (cur != null){
    while (cur.moveToNext()){
        msg.set_contact(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY)), cur.getLong(cur.getColumnIndex(ContactsContract.Contacts._ID)));
    }
} 
```

上面的代码的工作原理是它发现电子邮件地址与电话上的联系人相关联。

问题：我想我得到的是原始电子邮件地址条目的 _id，而不是整个联系人的 _id。因为当我刷新存储的联系人 _id 并将其与从上面返回的内容进行比较时，它们不匹配，即使我已确认该电子邮件与我存储的联系人相关联。

以下是我查找存储的联系人的方式：

```
String[] projection = {
    ContactsContract.Contacts.LOOKUP_KEY,
    ContactsContract.Contacts._ID
}

Uri uri = ContactsContract.Contacts.getLookupUri(contact_id, contact_lookup);

Cursor cur = resolver.query(cLookupUri, projection, null, null, null);
if(cur != null){
    while (cur.moveToNext()){
        msg.set_contact(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY)), cur.getLong(cur.getColumnIndex(ContactsContract.Contacts._ID)));
    }
} 
```

我究竟做错了什么？基本上我只想获取与传入电子邮件地址关联的任何联系人的contact_id ...

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-17T17:00:06.950

```
 public Long getContactIdByEmail(String email) {
        Uri uri = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Email.CONTENT_FILTER_URI, Uri.encode(email));
        String name = "?";
        long contactId =0;

        ContentResolver contentResolver = v.getContext().getContentResolver();
        Cursor contactLookup = contentResolver.query(uri, new String[] {ContactsContract.Data.CONTACT_ID, ContactsContract.Data.DISPLAY_NAME }, null, null, null);

        try {
            if (contactLookup != null && contactLookup.getCount() > 0) {

                contactLookup.moveToNext();
                name = contactLookup.getString(contactLookup.getColumnIndex( ContactsContract.Data.DISPLAY_NAME ));
                contactId = contactLookup.getLong(contactLookup.getColumnIndex(ContactsContract.Data.CONTACT_ID));

            }
        } finally {
            if (contactLookup != null) {
                contactLookup.close();
            }
        }

        return contactId;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:32:59.570

尝试这个：

查询 ContactsContract.Contacts.Entity。选择 MIMETYPE = "vnd.android.cursor.dir/email_v2" 和 DATA1 = 传入电子邮件地址。

这将返回一个表，其中包含每个原始联系人的一行，其电子邮件地址与传入地址匹配，但该行还将包含原始联系人的聚合联系人 ID。由此，您可以查询 ContactsContract.Contacts 以找到 LOOKUP_KEY。

# svg - 在圆弧d3js内对齐文本

> ID：13202407
> 
> 赞同：2
> 
> 时间：2012-11-02T20:14:07.073
> 
> 标签：svg, d3.js

我正在尝试绘制一个带有同心圆的图表，其中半径将定义各个点之间的距离。我希望特定距离的所有点的标签都出现在相应的外壳内。我正在使用 d3 来绘制图形。除了我无法弄清楚如何确保文本呈现良好并与具有恒定字符宽度和字符间距的基线对齐之外，我已经完成了所有工作。我花了一整天的时间试图弄清楚，任何帮助将不胜感激。

这是[JSFiddle](http://jsfiddle.net/je_et/eaLEr/)

这是javascript代码

```
var dataset = [{label:"Hello1", value:5},{label:"Hello2", value:10 {label:"Hello3",value:15},{label:"Hello4", value:20},{label:"Hello5", value:25}];

var arc = d3.svg.arc()
  .innerRadius(function(d,i){return i*35;})
  .outerRadius(function(d,i){return (i*35+30);})
  .startAngle(0)
  .endAngle(2 * Math.PI);

var svg = d3.select("body").append("svg")
  .attr("width", 960)
  .attr("height", 500)
  .selectAll("g")
  .data(dataset)
  .enter()
  .append("g")
  .attr("transform", "translate(480,250)");

var arcs = svg.append("path")
  .attr("fill","red")
  .attr("id", function(d,i){return "s"+i;})
  .attr("d",arc);

var thing = svg.append("g")
  .attr("id","thing")
  .style("fill","navy");

thing.append("text")
  .style("font-size",20)
  .attr("dy",function(d,i){return 20;})
  //.attr("alignment-baseline","middle")
  .append("textPath")
  .attr("textLength",function(d,i){return 90-i*5 ;})
  .attr("xlink:href",function(d,i){return "#s"+i;})
  .attr("startOffset",function(d,i){return 3/20;})
  .text(function(d){return d.label;}) 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:06:39.673

你的意思是这样的：

[http://jsfiddle.net/wcWUE/](http://jsfiddle.net/wcWUE/)

我改变的只是：

```
thing.append("text")
  .style("font-size",20)
  .append("textPath")
  .attr("textLength",function(d,i){return 90-i*5 ;})
  .attr("xlink:href",function(d,i){return "#s"+i;})
  .attr("startOffset",function(d,i){return 3/20;})
  .attr("dy","-1em")
  .text(function(d){return d.label;}) 
```

我还颠倒了环的顺序，这样遮挡就不是问题了。

我认为您可以制作一个单独的路径集合，可能只是在一个部分中定义以绘制文本。

但我不确定这个结果是否是你想要的？

# c# - 在 C#.NET 中使用 youtube api 和 oauth2 的当前说明？

> ID：13202410
> 
> 赞同：2
> 
> 时间：2012-11-02T20:14:17.067
> 
> 标签：c#, youtube-api, oauth-2.0

我一直在摸索各种文档和库页面，但还没有找到最新的东西，而且我尝试过的示例甚至都无法编译。我猜 v3 是实验性的，甚至还有真正的文档和示例吗？

这些没有帮助： [https ://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

[http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples](http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples) （一堆丢失的东西 Google.Apis.Samples 是什么？任务列表？ )

[https://developers.google.com/youtube/v3/](https://developers.google.com/youtube/v3/)

我应该采取完全不同的策略吗？使用版本 2（我猜没有 oauth）？我需要做的就是服务器端身份验证和视频上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:33:10.827

oauth2 一直失败，直到我更改了我的客户端 Secret。然后突然它起作用了。不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:26:52.063

您是否尝试过使用 Google 提供的强类型包装类？

## 用于 Google API 的强类型库

> 基础 API 是一个强大的 API，它允许您与所有支持发现的 Google 服务进行交互。如果您很高兴没有强类型 API 并使用动态接口，那么这个 API 很好。
> 
> 我们认识到，许多开发人员希望使用强类型接口访问我们的 API 套件，这不仅是为了您通过 IDE 和代码完成获得的好处，还因为它为 Google 服务提供了一个经过编译器验证的严格接口。
> 
> 因此，有一组可用于所有 Google 服务的强类型库。你可以在这里找到这些库：
> 
> [为 Google 服务生成的库。](https://code.google.com/p/google-api-dotnet-client/wiki/APIs)

可以在[此处](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_OAuth2_API)找到 OAuth2 的特定 API 。

# sql-server - 在 CAST 期间处理糟糕的日期

> ID：13202413
> 
> 赞同：0
> 
> 时间：2012-11-02T20:14:33.740
> 
> 标签：sql-server, tsql

如何优雅地处理整个表中随机的错误日期整数？例如，我有时会在其中看到一些 9999999999，因此这个查询会爆炸。在这些情况下，我只想生成 1900 日期，而不是像这样停止：

```
Select convert(date,CAST(trandate as varchar(8))),
       convert(date,CAST(duedate as varchar(8))), 
        ...

FROM  SomeTable 
```

这些字段的有效日期在该表中如下所示：20100924 并且当他们点击此查询时工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:24:42.480

您可以使用 sql server 中的 isdate 内置函数来检查某些内容是否可以转换为日期，然后进行处理。

例子：

```
declare @mytable table (thedate varchar(20))
insert into @mytable values ('20100924')
insert into @mytable values ('99999')

select 
case when isdate(thedate)=1 then
    CAST(thedate as datetime)
else null end as foo
from @mytable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:24:23.430

您可以使用与`CASE`结合的表达式`ISDATE`来处理：

```
SELECT CASE 
    WHEN ISDATE(MyDate) = 0 
    THEN '19000101' 
    ELSE CAST(MyDate AS varchar(8)) 
END 
AS MyCorrectDate 
```

# php - php 数组中用于数据对象的可疑语法问题

> ID：13202416
> 
> 赞同：0
> 
> 时间：2012-11-02T20:14:50.603
> 
> 标签：php, arrays, pdo

使用[netnuts 建议](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)的使用数据对象进行数据库访问的指南，特别是与未命名占位符相关的指南

```
# the data we want to insert
$data = array('Cathy', '9 Dark and Twisty Road', 'Cardiff');
$STH = $DBH->("INSERT INTO folks (name, addr, city) values (?, ?, ?);
$STH->execute($data); 
```

不幸的是，似乎对代码产生了解析错误

```
# the data we want to insert
$data = array($first_name, $second_name, $email_from, $telephone, $dateofbirth, $addresslone, $addressltwo, $townnm, $countynm, $typeapp, $issubscribed);
$STH = $DBH->("INSERT INTO members (fname, sname, email, phone, dob, addressl1, addressl2, town, county, type, subscribed) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
$STH->execute($data); 
```

> 解析错误：语法错误，意外的 '('，在第 82 行的 /HTMLADDRESS.php 中需要 T_STRING 或 T_VARIABLE 或 '{' 或 '$'

第 82 行特别是以将变量 $DBH 分配给 $STH 开始的行

我还执行了这段代码，数据数组中的所有变量都用引号括起来，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:24:40.167

什么

> 解析错误：语法错误，意外的 '('，在第 82 行的 /HTMLADDRESS.php 中需要 T_STRING 或 T_VARIABLE 或 '{' 或 '$'

告诉你的是，在`->`它不期望 a之后`(`，这是正确的，因为应该有一个方法调用。

它应该是

```
# the data we want to insert
$data = array($first_name, $second_name, $email_from, $telephone, $dateofbirth, $addresslone, $addressltwo, $townnm, $countynm, $typeapp, $issubscribed);
$STH = $DBH->prepare("INSERT INTO members (fname, sname, email, phone, dob, addressl1, addressl2, town, county, type, subscribed) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
$STH->execute($data); 
```

它是 netnuts 代码中的一个错误。

# web-applications - 反应式编程、缩放和 Meteor

> ID：13202421
> 
> 赞同：1
> 
> 时间：2012-11-02T20:15:08.887
> 
> 标签：web-applications, meteor, reactive-programming, horizontal-scaling

我们正在为我们的新一代企业级系统评估 Meteor。令人惊叹的内置功能之一是客户端中的每个数据模型都绑定到数据库中的模型，并在服务器更新时更新。但我担心可扩展性。

使数百万连接用户失效所需的架构是什么？

我想基本问题是数据库如何绑定到服务器和客户端上的模型。进一步推断，假设我们有多个网络服务器在运行，还有一个数据库。是否支持？如果是这样，怎么做？如果有人能描述实现它的底层技术，那将有很大帮助。

我想这可能是扩展任何使用响应式模型的 Web 应用程序的一般问题。首先，这是真的——任何关于它的讨论也很棒（实现它的最佳设计是什么？）。

其次，特别是 Meteor，因为它看起来更加单一（在“一切都为您完成”的意义上），我们正在寻找更多的可见性来帮助我们了解内部（无需阅读整个代码库）并帮助我们做出决定。

非常感谢，里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:38:12.187

> 假设我们正在运行多个网络服务器和一个数据库。是否支持？

是的，为了给大一新生提供方便（这对新项目很重要），meteor 里面嵌入了一个 MongoDB 服务器，当你使用“meteor”命令启动 web 服务器时，它也启动了一个 MongoDB 服务器，它的端口是两个添加Web服务器的端口......它很容易启动。此外，它提供了一种更改此行为的方法，请参阅[此问题](https://stackoverflow.com/questions/13115723/how-can-i-share-mongodb-collections-between-meteor-apps/13132815#13132815)

因此，您可以在多个 Web 服务器之间共享一个数据库。

至于第二个问题，如你所见，流星很酷，就像魔法一样，但是有一个价格，所有的魔法都是有代价的，它在内部为你做了很多事情，它就像一个黑匣子，在某些情况下，如果你不知道里面发生了什么，这会让你发疯！因此，如果您想在大型正式项目中使用它，请小心！特别是它太年轻了，甚至文档都不够全面和详细，而且它正在迅速变化，它的开发人员可能太忙于开发新功能，他们没有时间回答你的问题......我在内部使用流星没有限制要求的项目，没关系，一个真正的数百万用户的项目？我认为现在这不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:49:40.533

[谷歌集团](https://groups.google.com/forum/?fromgroups=#!topic/meteor-core/YuwlABBB248)的大卫格拉瑟的回答：

> 简短的回答是：如果 Meteor 无法扩展，我们在平台上所做的任何其他工作都将被浪费。数据库连接器的当前实现本质上是数据库连接器代码的原始草案。它现在非常适合开发，我们将确保它很快适用于大规模改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T16:01:32.490

我一直在研究 Meteor 的缩放问题，我可以添加一些很棒的改进。

[智能收藏](http://meteorhacks.com/introducing-smart-collections.html)是其中的核心。它是 Meteor 的全新 mongodb 驱动程序实现。

Smart Collection[提供基于 MongoDB Oplog 的扩展支持](http://meteorhacks.com/lets-scale-meteor.html)。这是扩展流星应用程序的完美方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-12T23:48:41.303

截至 2015 年 5 月 12 日，Meteor mongo 集合在规模上做得很好。这来自 Smart Collections 官方页面：“Smart Collection 现已退役，Meteor 的 Collection 实现已经修复了大多数性能瓶颈。它也像 Smart Collections 一样使用 MongoDB oplog。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-25T13:13:32.767

想提供一个更新的答案：

> 向客户端发送最少量的数据有助于加快 sub/pub 进程，并有助于防止意外数据泄露。这就是为什么仅指定客户端需要的字段是发布功能的最佳实践的原因。设置限制是明智的，尤其是对于理论上可能具有无限列表的视图。当限制查询的结果集时，通常也会对查询进行排序。因此，牢记索引对性能至关重要。

您还可以增加 MongoDB 的内存，使用 Kadira 和 Compose 等工具也有助于扩展。上面的引用和更多提示可以在这个[关于扩展真正的流星应用程序的案例研究中找到。](http://blog.differential.com/scaling-meteor-to-20000-users-in-7-days/)

# vim - 固定行的相对行号

> ID：13202422
> 
> 赞同：1
> 
> 时间：2012-11-02T20:15:17.357
> 
> 标签：vim

我正在使用vim来管理一个程序会使用的数据文件，数据文件的格式如下：

```
<Header line 1>
<Header line 2>
<Header line 3>
<Data line 1>
<Data line 2>
...
<Data line N> 
```

使用这种我无法更改的格式，数据值直到文件中的第 4 行才开始。但是，程序的输出是按数字引用数据值，这使得很难快速搜索文件以找到正确的行。我尝试了 vim 7.3+ 的`:set relativenumber`( `:set rnu`) 选项，但它旨在不断更新用于计算相对行号的基线。

我想知道是否有办法在第 3 行修复基线，以便第 4、5 和 6 行将显示为第 1、2 和 3 行（与程序输出一致）。任何帮助，将不胜感激！

**更新：**我最终做的是在源代码中手动添加这个选项。只需要很少的改动；我所做的只是将所有代码复制`:set relativenumber`到一个名为的新选项`:set fixednumber`中，然后禁用在行更改时自动更新行号的部分（此部分在 vim 源文件 move.c 中）。现在有三种互斥模式：

```
:set number -- normal line numbers  
:set relativenumber -- automatically updating relative numbers  
:set fixednumber -- relative line numbers that are fixed against the currently selected row when the option was set 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:42:49.107

No. The `0` in `relativenumber` is always the line on which your cursor is and the `1` in `number` is always line `1` of the buffer/file.

You could, however, open a new window with only the lines `4` -> `N` and work there.

Or add a `+3` to each "jump to line *n*"…

With this mapping:

```
nnoremap <F9> :3+ 
```

you'd just need to hit `<F9>`, type the line number and hit `<Enter>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:46:18.283

Vim 旨在按原样编辑文本文件，因此需要进行一些变形才能满足您的需求。

`G`您可以在数据文件的缓冲区中重新定义命令，如下所示：

```
:nnoremap <buffer> G :<C-u>execute (v:count ? v:count + 3 : line('$'))<CR> 
```

但是，数字列仍将关闭。要纠正这个问题，您必须在加载缓冲区时删除三个初始标题行（可能将它们存储在缓冲区局部变量中），并在保存缓冲区之前短暂地重新插入它们。这可以通过 autocmds 来实现，但要做到正确有点棘手。

另一种选择是使用像[NarrowRegion](http://www.vim.org/scripts/script.php?script_id=3075)这样的插件，它在暂存缓冲区中打开选定的范围，并在保存时同步内容。

# c# - 如何在 C# 中从 POST 正文中保存视频/MP4

> ID：13202431
> 
> 赞同：2
> 
> 时间：2012-11-02T20:15:55.450
> 
> 标签：c#, asp.net

我已经使用 HTTP POST 在 IP 摄像机（Sercomm RC8021）上设置了运动检测。检测到运动后，相机会启动 HTTP POST，在帖子正文中附加一个 MP$ 视频。我有一个带有 C# 代码隐藏的 ASP.NET 页面，试图保存文件：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        String filename = "~/MotionDetectAttachment.mp4";
        this.Context.Request.SaveAs(Server.MapPath(filename), false);
    } 
```

问题是服务器将 HTTP 500 代码发送回相机并且文件未保存。使用wireshark，通信似乎很好，直到wireshark用“TCP Window Full”标记一个数据包，然后是一系列ZeroWindow和Keep-Alive消息。最终连接被重置，摄像机记录来自服务器的 500 响应。

关于我做错了什么的任何想法？类似问题的其他答案是指 SaveAs 是一种保存到文件的方法，但我读到的其他问题都没有提到 wireshark 问题。

摄像头日志示例：

> 2012 年 11 月 2 日 11:38:35 HTTP-POST：无法发布文件 [HTTP 错误代码：500]。
> 2012 年 11 月 2 日 11:38:03 警报：检测到运动。

Wireshark 日志中的部分 HTTP 标头：

> POST /PFDemo/MotionDetectAttachment.aspx?cameraID=1 HTTP/1.0
> 主机：{正确
> 的主机 IP} 内容类型：视频/mp4
> 内容长度：158689
> 授权：基本
> 连接：关闭
> X-EventInfo：motion,71,md_window3

（X-EventInfo 值来自相机）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:23:14.570

您是否更改了 maxRequestLength 和 executionTimeout 的默认值？即使你有你可能仍然有问题。

Jon Galloway 就此写了一篇[出色的文章](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)。

maxAllowedContentLength 也开始发挥作用。[这个 SO question](https://stackoverflow.com/questions/6327452/which-gets-priority-maxrequestlength-or-maxallowedcontentlength)的答案可能会有所帮助。

# android - 对话框显示两次

> ID：13202434
> 
> 赞同：0
> 
> 时间：2012-11-02T20:16:03.310
> 
> 标签：android, android-layout

在我的 android 应用程序中，我在 OnCreate 函数中有以下代码：

```
txtUsername.setOnKeyListener(new OnKeyListener() {

        public boolean onKey(View arg0, int arg1, KeyEvent arg2) {
            // TODO Auto-generated method stub

            String Username = txtUsername.getText().toString();

            if (arg1 == KeyEvent.KEYCODE_ENTER) {
                DontShowDialog = false;
                if ((Username.toLowerCase().endsWith("blabla.com") == false && Username.toLowerCase().endsWith("blabla-bla.nl") == false) || validateEmail(Username) == false) {
                    final Dialog dialog = new Dialog(arg0.getContext());
                    dialog.setContentView(R.layout.startdialog);
                    dialog.setTitle("Warning 1");

                    Button btOk = (Button) dialog.findViewById(R.id.btOk);
                    btOk.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            DontShowDialog = true;
                            dialog.dismiss();

                            return;
                        }
                    });

                    if (DontShowDialog == false) {
                        dialog.show();
                    }
                    return false;
                }
            }

            txtUsername.clearFocus();
            txtPassword.setNextFocusDownId(txtPassword.getId());
            return false;
        }
    }); 
```

当用户点击 NEXT 按钮并且用户名不正确时，会显示一个对话框，可以通过 OK 按钮取消该对话框。但是....点击确定按钮后，对话框再次显示...我不想要那个。

为什么会这样？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:51:26.930

通过`false`在您的`onKey()`事件中返回，您是在告诉 Android`KeyEvent`没有使用 - 所以我的猜测是，将 return 语句更改为`true`可能会解决问题，因为 Android 会知道该事件已被使用，并且它不会重新进入该`onKey()`方法. 如果您可以尝试并分享结果，那就太好了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:03:02.717

解决了。

移动了这条线

```
DontShowDialog = true; 
```

从 OnClick 部分

将 onClick 下面的 if-then 更改为：

```
if (DontShowDialog == false) {
                        dialog.show();
                        DontShowDialog = true;
                        return false;
                    } 
```

# delphi - 当服务器更新但未断开连接并重新连接时如何刷新客户端上的查询

> ID：13202439
> 
> 赞同：2
> 
> 时间：2012-11-02T20:16:19.517
> 
> 标签：delphi, firebird

我使用 firebird IBdatabase、IBquery 开发了一个客户端/服务器数据库应用程序。当其中一个具有更新/插入查询时，我需要知道如何刷新服务器和客户端上的数据。原因是当我在客户端上运行查询时，将记录插入表后，新记录不会反映在查询中。直到我断开连接并重新连接 agin 我使用一个 firebird db，带有 interbase vcl，在 Delphi XE2 中开发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:59:02.713

您不必断开连接，但必须刷新（或关闭并重新打开）IBQuery。大多数数据库都是这种情况。

如果您不希望这样做，则必须从数据库向所有客户端发送通知。我不知道这是否可以从 FireBird 中实现，但数据库这样做并不常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:58:41.603

您的选择查询的事务类型可能是快照。您可以在每次要刷新时启动新的快照事务，也可以使用已提交的事务类型。

# java - 从总和为零的n个元素数组中选择k个元素的算法

> ID：13202447
> 
> 赞同：0
> 
> 时间：2012-11-02T20:16:39.813
> 
> 标签：java, c++, algorithm

> **可能重复：**
> [子集和问题](https://stackoverflow.com/questions/6012963/subset-sum-problem)

我有一个包含 n 个元素的数组。从n中找出k个对应总和为零的元素？？

假设有 5 个元素{ 7, 5 ,-2,8 ,-5} 且 k=3 的数组，则解为 7,-2,-5。数组和 k 是用户定义的

存在运行时间 O(2^k) 即 2 的 k 次方的递归解。

谁能推荐更好的解决方案？？

# android - 如何减小列表视图的大小？

> ID：13202448
> 
> 赞同：0
> 
> 时间：2012-11-02T20:16:47.913
> 
> 标签：android

我有一个包含图像的列表视图。当用户向下滚动时，图像会自动加载。但过了一会儿，列表变得太大了。我怎样才能修剪它？

我试过`removeViews(int start, int end)`了，但似乎没有什么不同。

什么是最好的修剪它，所以它不会变得太大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:35:29.277

> 我怎样才能修剪它？

中的可用行数`ListView`取决于`getCount()`您的适配器。您是设置适配器的人，因此您对`getCount()`返回的内容直接或间接负责。

> 我的意思是滚动条光标变得非常小

如果您不希望 中有那么多行`ListView`，请不要创建具有这么多行的适配器。

也欢迎您更改适配器内部的数据，然后调用`notifyDataSetChanged()`. `ListView`如果这样做时`getCount()`返回的数字比以前小，则“滚动条光标”可能会更大。

# php - 获取 MySQL 查询结果的 PHP 页面

> ID：13202452
> 
> 赞同：1
> 
> 时间：2012-11-02T20:17:00.980
> 
> 标签：php, mysql

我不知道如何编写 PHP，但我监督的网站之一使用它。我想要一个根据当前数据自动更新的饼图。我知道如何编写将绘制图表的 HTML，但不知道如何让我的 MySQL 语句与数据交互。这是我要运行的一段代码：

```
SELECT
pc.shortname Name,
Count(qa.factor) Count

FROM
stable_host pc,
stable_area pq,
stable_area_front qa

WHERE
pc.id = pq.host
AND pq.id = qa.area
AND ((pq.name='Signal1') OR (pq.name='Signal5'))

GROUP BY pc.shortname

ORDER BY pc.shortname 
```

当我运行这个脚本时，它给了我以下输出：

```
Category1   62
Category2   53
Category3   35
Category4   38 
```

我的问题是：我如何获得输出，所以它只显示数字，逗号分隔？（例如：“62,53,35,38”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:23:33.803

```
 SELECT GROUP_CONCAT(count(qa.factor) SEPARATOR ',') count 
```

我相信这就是你要问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:21:32.057

你可以使用：

```
<?php 
$dsn = '';
$username = '';
$password = '';
$query = "Paste your query here";

try {
  $pdo = new PDO($dsn, $username, $password);
  $pdo->prepare($query);
} catch(PDOException $e) {
    die("Could not connect to the database\n");
}
    $results = $pdo->fetchAll();
if(count($results) > 0) {
    $array = array(); 
    foreach($queryResult as $row) {
      $array[] = $row['Count'];
    }
    $commaDelimitedString = implode(',',$array);
} // No need for end PHP tag, they cause problems. 
```

这： - 连接到数据库（或尝试） - 运行您的查询 - 创建一个空数组 - 循环您的结果 - 获取“计数”列并将其添加到数组的末尾 - 将数组压缩为逗号分隔细绳。

查看此处（http://wezfurlong.org/blog/2004/may/first-steps-with-pdo/ 和[http://www.electrictoolbox.com/php-pdo-bound-placeholders/](http://www.electrictoolbox.com/php-pdo-bound-placeholders/)）以获取有关PDO 的使用以及连接到数据库所需的内容（显然，不要发布这些详细信息）

它可能看起来令人生畏，但一次只走一步。如果您有更多问题，请提出。

# node.js - express：保持所有 DRY 创建一个 mongoose 连接模块（使用新的 createConnection 方法）

> ID：13202460
> 
> 赞同：1
> 
> 时间：2012-11-02T20:17:32.310
> 
> 标签：node.js, mongodb, express, mongoose

这是我实际的数据库连接模块：

```
var mongoose = require('mongoose'),
  conn = mongoose.createConnection('localhost', 'doto');

conn.on('error', function (err) {
  console.log('Error! DB Connection failed.');
});

conn.once('open', function () {
  console.log('DB Connection open!');
});

module.exports = conn; 
```

还有一个我用它的地方

```
exports.list = function (req, res) {
  var conn = require('../lib/db_connection');

  conn.once('open', function () { // if i dont wrap with this, the page will not be rendered...
    conn.db.collectionNames(function (err, names) {
      res.render('list_collections', {
        title: 'Collections list',
        collections_names: names
      });
    });
  });
} 
```

我的问题是：我真的需要每次都使用 conn.once 吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:55:31.233

您应该移动`require`函数的外部，以便在您的应用程序加载时打开连接，而不是等到第一个请求。

```
var conn = require('../lib/db_connection');
exports.list = function (req, res) {
  conn.db.collectionNames(function (err, names) {
    res.render('list_collections', {
      title: 'Collections list',
      collections_names: names
    });
  });
} 
```

# java - 如何从wsdl获取方法和参数

> ID：13202462
> 
> 赞同：1
> 
> 时间：2012-11-02T20:17:33.803
> 
> 标签：java, web-services, methods, parameters, wsdl

我需要做的是：

在 java 中，我需要从 wsdl 获取方法的名称和 Web 服务的参数，以便稍后在表单中显示它们。

有没有这样做的图书馆？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:33:49.367

对于所有正在寻找这样的东西的人，我在这里找到了它：

[https://groups.google.com/forum/?fromgroups=#!topic/soa-model/OKQBRoY9H8I](https://groups.google.com/forum/?fromgroups=#!topic/soa-model/OKQBRoY9H8I)

它使用 predic8。工作得很好

# java - 带有 Fragment 和 Activity 的 FragmentActivity TabHost

> ID：13202464
> 
> 赞同：6
> 
> 时间：2012-11-02T20:17:55.273
> 
> 标签：java, android, user-interface

我必须在我的应用程序中实现这样的图表层次结构。

![等级制度](../Images/c928e5ffc66813c69e48fb308def21ba.png)

我有 5 个标签`TabHost`。其中之一应该是`Activity`特定行为的原因。这只有一个 Activity 应该同时具有：**横向**和**纵向**，但`Fragments`应该只有一个（纵向）。

每个纵向布局都应该在下面有标签，但是这个 Activity 不应该。我设法用里面的 5 个片段来完成它`TabHost`，但我发现，我只能用一个 Activity 和 4 个片段，或者用所有 5 个 Activity 来做到这一点。

有 5 个活动（FragmentActivities）不会有问题，但我更喜欢有 Fragments。我认为，我应该扩展`FragmentActivity`和`TabActivity`in `MyTabActivity`（它是带有 TabHost 的 Activity），但我不能在 JAVA 中扩展两个类。不幸的是没有这样的课程`TabFragmentActivity`:-)

所以我的问题是：**是否有可能获得如上图所示的效果**？

PS也许我错过了重要的东西，因为我刚刚开始使用Java / Android - 这可能是一个线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:54:44.763

你有一个解决方案来解决你的问题：http: [//droidapp.co.uk/2012/05/25/android-dev-actionbarsherlock-tabs-viewpager/](http://droidapp.co.uk/2012/05/25/android-dev-actionbarsherlock-tabs-viewpager/) 这里是源代码： [https ://bitbucket.org/ owentech/abstabsviewpager/](https://bitbucket.org/owentech/abstabsviewpager/)

这是

这是一个使用操作栏、选项卡、viewpager 和 Fragments 的教程......并支持 >2.3，因此它似乎可以解决您的所有需求。

# jquery - 错误时重用jquery jqXHR ajax成功回调

> ID：13202466
> 
> 赞同：1
> 
> 时间：2012-11-02T20:17:57.830
> 
> 标签：jquery, ajax, callback, reusability, jqxhr

我希望在它的错误/失败函数中重新使用用于 jquery ajax 调用的成功/完成函数。

我需要处理的场景是，当用户尝试执行其帐户无权执行的操作时，Web 服务器返回错误，所有错误都通过相同的错误处理函数运行，该函数具有特殊的权限情况错误。当用户尝试访问他们无权访问/修改的内容时，它会创建一个弹出窗口，他们可以在其中输入登录信息并再次运行之前的请求，我存储了之前的请求，因此他们发送的所有信息都是存储。我遇到的问题是再次发送请求并确保将响应路由回适当的回调函数。

错误函数可以访问与请求关联的 jqXHR 对象，我想知道是否可以获取与该 jqXHR 关联的回调函数并将它们附加到新请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:30:55.563

我从来没有尝试过，但理论上它应该在 jQuery 1.5+ 中工作，`this`如果你不设置上下文，它是对传入选项的引用。

```
$.ajax({
    ... ajax options ...
    // context: el <--- DO NOT USE THIS OPTION    
    error: function() {
        $.ajax(this);
    }
}); 
```

# javascript - 关联数组查找（来自 Three.js 中的代码）

> ID：13202468
> 
> 赞同：2
> 
> 时间：2012-11-02T20:18:03.167
> 
> 标签：javascript, three.js, associative-array

我正在查看three.js中的代码，特别是创建球体的THREE.SphereGeometry方法： [https ://github.com/mrdoob/three.js/blob/master/src/extras/geometries/SphereGeometry.js](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/SphereGeometry.js)

有两组循环 - 我正在看第二组。

我的问题是：创建了一个数组数组，称为顶点。在这个数组中添加了对象数组。

稍后，使用索引检索单个对象，具体而言：

```
var v1 = vertices[ y ][ x + 1 ]; 
```

然后，就在此之下，似乎再次引用了该对象，但语法如下：

```
var n1 = this.vertices[ v1 ].clone().normalize(); 
```

尽我所能，这对我来说似乎是一个错误..不会`this.vertices[v1]`返回未定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:31:45.750

我*认为*让这令人困惑的是`this.vertices`vs `vertices`。它们实际上是两种不同的结构。

```
// first loop
for (...) {
    /* ... */

    // this.verticies will have every vertex
    this.vertices.push( vertex );

    verticesRow.push( this.vertices.length - 1 );
    /* ... */
}

// notice we pushed a row of vertices to `vertices` not `this.verticies`
vertices.push( verticesRow );

// second loop
for (...)  for (...) {
    // grab the vertex from the local list
    var v1 = vertices[ y ][ x + 1 ];

    // use it to grab something from the object's list
    var n1 = this.vertices[ v1 ].clone().normalize();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:25:59.703

我不知道那个具体的例子，但这是一个人为的数据结构，它是有效的，不一定是错误。

```
x = 1
y = 2

vertices = ["","",["","x",3],"the third element"]

var v1 = vertices[y][x+1] // v1 is `3`

var n1 = this.vertices[v1]

alert(n1)
// alerts `the third element` 
```

# excel - 克服 256 个字符的 Excel Vlookup 功能限制的方法

> ID：13202473
> 
> 赞同：15
> 
> 时间：2012-11-02T20:18:21.777
> 
> 标签：excel, vlookup

我有一个包含多个值的 excel 数组。有些少于 256 个字符，有些长度大于 256。

当我尝试使用示例字符串进行 VLookup 时，当它与少于 256 个字符的行匹配时，我可以获得结果。对于超过 256 个字符的行，它返回一个“#N/A”。

有没有办法使用 Vlookup 或使用 Excel 中的其他一些内置函数来克服这个限制？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T22:43:00.947

如果您像这样使用 VLOOKUP

`=VLOOKUP(A2,D2:Z10,3,FALSE)`

即在 D2:D10 中查找 A2 并从 F2:F10 返回结果然后尝试使用此公式

`=INDEX(F2:F10,MATCH(TRUE,INDEX(D2:D10=A2,0),0))`

根据需要更改范围

**编辑：**

我在这里模拟了一个示例 - A2:A10 中的值与 G2:G10 相同，但顺序不同。每个值的长度显示在 B 列中，C 列中的 VLOOKUP 在 col A 值 > 255 个字符时失败，但 col D 中的 INDEX/MATCH 公式在所有情况下都有效

[https://www.dropbox.com/s/fe0sb6bkl3phqdr/vlookup.xls](https://www.dropbox.com/s/fe0sb6bkl3phqdr/vlookup.xls)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-02T13:47:45.337

我有同样的问题，我写了这个自定义的原始 vlookup。它不关心单元格值的长度。

```
Function betterSearch(searchCell, A As Range, B As Range)
        For Each cell In A
            If cell.Value = searchCell.Value Then
                    betterSearch = B.Cells(cell.Row, 1)
                    Exit For
            End If
            betterSearch = "Not found"
        Next

End Function 
```

PS 不禁想知道为什么专业人士编写的原始 VLOOKUP 在这种特殊情况下实现起来比这个 10 行 func 更差？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-25T12:18:49.880

这是一个替代品的拖累，并且与上面不同的`Match()`是，它也是优化的 vba 代码。`betterSearch`

```
Public Function Match2(search As String, lookupArray As Range, Optional match_type As Integer = 0) As Long
  Application.Volatile
  Dim vArray As Variant
  vArray = lookupArray.Value
  For i = 1 To UBound(vArray, 1)
    If match_type = 0 Then
      If search = vArray(i, 1) Then
        Match2 = i
        Exit Function
      End If
    Else
      If match_type = -1 Then
        If search <= vArray(i, 1) Then
          Match2 = i
          Exit Function
        End If
      Else
        If search >= vArray(i, 1) Then
          Match2 = i
          Exit Function
        End If
      End If
    End If
  Next
End Function 
```

用法：

```
Index(rangeA, Match2(LookupValue, LookupRange, 0) 
```

上面Ans说：

> 不禁想知道为什么专业人士编写的原始 VLOOKUP 在这种特殊情况下的实现比这个 10 行 func 更差？

优化和性能。如果您将字符数限制为 255，这仅需要 CPU 上的 2 次操作，而可变长度字符串的比较在 CPU 上需要更多步骤，因为您必须重复比较 255 个字符宽度。像 VBA 这样的编程语言使这一点变得模糊不清，因为所有子操作都已为您处理好。

例如，要比较两个固定长度为 5 的字符串“Hello”和“abc”，那么我们只需在 CPU 上执行以下操作：

```
 0100100001100101011011000110110001101111 //Hello
-  0110000101100010011000110000000000000000 //abc
= -0000000000011000111111001111011010010100 //-419231380 
```

现在您可以简单地询问结果是`< 0`、`> 0`还是`= 0`近似 0。这可以在 2 个 CPU 操作中完成。如果单元格是可变长度的（以及公式也是），那么首先你必须使用 CPU 用 0 填充值的末尾以使字符串具有相同的长度，然后才能执行操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-10T21:29:05.057

XLookup 不再有这样的限制。我能够用它查找 > 500 个字符。

# sql-server - 如何从用 C# 编写的 cmdlet 执行 tsql 脚本

> ID：13202474
> 
> 赞同：0
> 
> 时间：2012-11-02T20:18:24.680
> 
> 标签：sql-server, tsql, powershell-2.0, cmdlet

我想从用 c# 编写的自定义 cmdlet 执行 tsql 脚本。你能推荐我最好的做法吗？

我有一些 .sql 脚本，在我的 cmdlet 中，我需要按特定顺序遍历它们并执行每个 sql 脚本。如果可能的话，我还需要在事务中运行所有脚本。

而且我需要远程执行脚本。这意味着，执行 cmdlet 的机器上可能没有安装 sql server。

目标 sql 服务器为 2008、2008R2、2012。

我已经阅读了一些方法，但我仍然不确定什么是最好的。

提前致谢

# ruby-on-rails - 地理编码：所有 rake 任务不工作

> ID：13202479
> 
> 赞同：1
> 
> 时间：2012-11-02T20:18:45.413
> 
> 标签：ruby-on-rails, mongoid, rails-geocoder

我正在使用 Mongoid 和地理编码器。我有一个嵌入式文档/模型，我需要对其进行地理编码，并且 rake 任务地理编码：所有都不起作用。如果我保存单个对象，则地理编码有效。

Location 模型嵌入在 Account 模型中。当我跑步时；

```
 rake geocode:all CLASS=Location 
```

没有错误，但它什么也没做。如果我跑；

```
rake geocode:all CLASS=Account 
```

我收到此错误；

```
rake aborted!  undefined method `not_geocoded' for Account:Class 
```

任何人都可以帮忙吗？

# ios - 在 iOS 上的 OpenFrameworks 中使用 videoGrabber 和 ofMesh

> ID：13202482
> 
> 赞同：1
> 
> 时间：2012-11-02T20:18:53.887
> 
> 标签：ios, openframeworks

第一次在 iOS 上潜入 OF ......令人兴奋！作为第一次运行，我试图将我之前制作的应用程序移植到 iOS 应用程序中。它对来自摄像机的视频产生了一种非常简单的类似 rutt etra 的效果。我将它作为 Mac 应用程序运行，但我似乎无法让它在我的 iPhone 上正确显示。网格正在绘制，但我认为我没有将像素值从相机获取到 vidPixels 以更改网格的颜色。我基于 OF iOS 0072 中的 videoGrabberExample。我在运行 Xcode 4.5.2 的 MacBook Pro 10.7.5 上。

任何人都可以看看这个，让我知道我是否做错了什么？:) 提前非常感谢。

代码：

测试应用程序.mm

```
#include "testApp.h"
#include "ofGLUtils.h"
#include "ofGLRenderer.h"

//--------------------------------------------------------------
void testApp::setup(){  
ofxiPhoneSetOrientation(OFXIPHONE_ORIENTATION_LANDSCAPE_RIGHT);

ofSetFrameRate(30);

grabber.initGrabber(480, 360);

yStep = 5;
xStep = 5;

  //  drawRuttEtra = false;

ofBackground(0, 0, 0);

}

//--------------------------------------------------------------
void testApp::update(){
//ofBackground(255,255,255);

grabber.update();

if(grabber.isFrameNew()){
vidPixels = grabber.getPixelsRef();
}

}

//--------------------------------------------------------------
void testApp::draw(){   

glEnable(GL_DEPTH_TEST);

    ofMesh mesh;

    int rowCount = 0;
    for (int y = 0; y<grabber.height; y+=yStep){
        ofNoFill();
        mesh.setMode(OF_PRIMITIVE_LINE_STRIP);

        if (rowCount % 2 == 0) {
            for (int x = 0; x < grabber.width; x += xStep){
                ofColor curColor = vidPixels.getColor(x, y);
                mesh.addColor(ofColor(curColor));
                mesh.addVertex(ofVec3f(x,y, curColor.getBrightness() * 0.3));
            }
        } else {
            for (int x = grabber.width-1; x >= 0; x -= xStep){
                ofColor curColor = vidPixels.getColor(x, y);
                mesh.addColor(ofColor(curColor));
                mesh.addVertex(ofVec3f(x,y, curColor.getBrightness() * 0.3));                    }
        }
        rowCount++;
    }
    mesh.draw();
   // grabber.draw(0,0);
} 
```

测试应用程序.h

```
#pragma once

#include "ofMain.h"
#include "ofxiPhone.h"
#include "ofxiPhoneExtras.h"

class testApp : public ofxiPhoneApp{

public:
    void setup();
    void update();
    void draw();
    void exit();

    void touchDown(ofTouchEventArgs & touch);
    void touchMoved(ofTouchEventArgs & touch);
    void touchUp(ofTouchEventArgs & touch);
    void touchDoubleTap(ofTouchEventArgs & touch);
    void touchCancelled(ofTouchEventArgs & touch);

    void lostFocus();
    void gotFocus();
    void gotMemoryWarning();
    void deviceOrientationChanged(int newOrientation);

    ofVideoGrabber grabber;
    ofTexture tex;
    unsigned char * pix;

    //rutt etra effect

    int yStep;
    int xStep;
    bool drawRuttEtra;

    ofPixels vidPixels;

}; 
```

主要.mm

```
#include "ofMain.h"
#include "testApp.h"

int main(){
ofSetupOpenGL(1024,768, OF_FULLSCREEN);         // <-------- setup the GL context
ofRunApp(new testApp);
} 
```

我尝试进行一些调试以查看可能发生的情况。

我想确保 ifFrameNew() 有效。试：

```
if(grabber.isFrameNew()){  
   cout<< "i'm grabbing new pixels!" << endl;  
vidPixels = grabber.getPixelsRef();  
} 
```

打印“我正在抓取新像素！”，这样如果块正在工作。

在我的双 for 循环中，如果我计算 vidPixels.getColor(x,y) 的值

```
cout<<vidPixels.getColor(x,y) << endl; 
```

我得到了所有 255 ......这让我觉得 grabber.getPixelsRef() 没有按我认为的那样工作。

有任何想法吗？

# python - 重定向到通过 ssh 启动的远程 python 应用程序的文件输出

> ID：13202483
> 
> 赞同：2
> 
> 时间：2012-11-02T20:18:55.583
> 
> 标签：python, bash, ssh, stdout, pid

[编辑]

我在需要调试的远程服务器中有一个 python 应用程序，当我在本地运行该应用程序时，它会打印一些我需要监视的调试信息（包括 python 回溯）。

感谢[jeremy](https://stackoverflow.com/users/1356721/jeremy) ，我必须使用*tail -F*监控输出文件并研究他的代码，我在[这里](http://jimmyg.org/blog/2009/working-with-python-subprocess.html)找到了他的命令的以下变体：

```
ssh root@$IP 'nohup python /root/python/run_dev_server.py &>> /var/log/myapp.log &' 
```

这让我几乎完全得到了我想要的东西，登录信息和 python 回溯，但是我没有得到任何我需要的使用python*打印*显示的信息。

所以我也尝试了他的命令：

```
ssh root@$IP 'nohup python /root/python/run_dev_server.py 2>&1 >> /var/log/myapp.log &' 
```

它在文件中记录程序的*打印*输出以及日志信息，但是所有的回溯都丢失了，所以我无法调试 python 异常。

有没有办法可以捕获应用程序产生的所有信息？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:24:35.083

我建议做这样的事情：

```
/usr/bin/nohup COMMAND  ARGS 2>&1 >> /var/log/COMMAND.log &
/bin/echo $! > /var/run/COMMAND.pid 
```

nohup 在您的终端/ssh 会话关闭后保持进程处于活动状态，>> 会将所有 stdout 和 stderr 保存到 /var/log/COMMAND.log 供您稍后使用“tail -f”。

要获得堆栈跟踪输出（您可以将其打印到标准输出，或者做一些花哨的事情，例如通过电子邮件发送它），请将以下几行添加到您的 python 代码中。

```
    导入系统
    导入回溯
    _old_excepthook = sys.excepthook
    def myexcepthook(exctype, value, tb):
            # if exctype == KeyboardInterrupt: # 处理键盘事件
            # 现在打印到标准输出，但可以在这里发送电子邮件或任何内容。
            打印 traceback.print_tb(tb);
            _old_excepthook(exctype, value, traceback)
    sys.excepthook = myexcepthook

```

这将捕获所有异常（包括键盘中断，所以要小心）

# d3.js - d3.js 多y轴折线图

> ID：13202485
> 
> 赞同：2
> 
> 时间：2012-11-02T20:18:56.100
> 
> 标签：d3.js

我制作了一个带有多个 y 轴值的图表，这些值被绘制为圆形。我现在想用线条（基本上是折线图）连接每个 y 轴值集。

我认为我的错误在于我如何尝试定义 y 轴线值：

```
 var line = d3.svg.line()
                     .x(function(d) { return x(d.x); })
                     .y(function(d) { return y(d.y1, d.y2, d.y3); }); 
```

这是我的数据集：

```
var dataset = [
      {x: d3.time.hour.utc.offset(now, -5), y1: 1, y2: 3, y3: 2}, 
      {x: d3.time.hour.utc.offset(now, -4), y1: 2, y2: 2, y3: 4},
      {x: d3.time.hour.utc.offset(now, -3), y1: 3, y2: 3, y3: 1},
      {x: d3.time.hour.utc.offset(now, -2), y1: 4, y2: 1, y3: 2},
      {x: d3.time.hour.utc.offset(now, -1), y1: 5, y2: 5, y3: 3},
      {x: now, y1: 6, y2: 4, y3: 3},
    ]; 
```

这是我现在图表的完整示例：http: [//jsbin.com/edikeg/1/edit](http://jsbin.com/edikeg/1/edit)

我已经阅读了 line() 方法 api 参考，但不确定还有什么可以尝试的。如果有人可以推荐最好的方法来实现这一点，以及任何附加的 d3.js 开始提示或初学者资源，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:48:53.830

首先，您的数据集采用非最佳格式。更好的格式是为每个线/点集创建一个对象：

```
var dataset = [
    [
        {x: d3.time.hour.utc.offset(now, -5), y: 1}, 
        {x: d3.time.hour.utc.offset(now, -4), y: 2}, 
        {x: d3.time.hour.utc.offset(now, -3), y: 3}, 
        {x: d3.time.hour.utc.offset(now, -2), y: 4}, 
        {x: d3.time.hour.utc.offset(now, -1), y: 5}, 
        {x: now, y: 1}
    ],
    [
        // y2-values paired with x-values
    ],
    [
        // y3-values paired with x-values
    ]
]; 
```

你为什么问？因为使用 d3 创建对象和对象组会更容易。如果需要，您也可以编写一个 map 函数将当前数据转换为这种格式。

现在，您的数据采用更简单的格式，用于创建线条和圆圈的代码将不依赖于数据集中的项目数。在这里查看一个工作的、重写的版本：

[http://jsbin.com/edikeg/3/edit](http://jsbin.com/edikeg/3/edit)

**发生了什么的基本解释：**

对于数据集中的每个项目，我们创建`g.line`a`pathContainer`来保存每个路径及其每个圆点。

```
 var pathContainers = svg.selectAll('g.line')
    .data(dataset);

  pathContainers.enter().append('g')
    .attr('class', 'line'); 
```

然后，在每个 中`pathContainer`，我们创建一个`path`.

```
 pathContainers.selectAll('path')
    .data(function (d) { return [d]; }) // continues the data from the pathContainer
    .enter().append('path')
      .attr('d', d3.svg.line()
        .x(function (d) { return xScale(d.x); })
        .y(function (d) { return yScale(d.y); })
        .interpolate('monotone')
      ); 
```

最后，我们`circle`为每个数据集中的每个点创建一个`pathContainer`

```
 pathContainers.selectAll('circle')
    .data(function (d) { return d; })
    .enter().append('circle')
    .attr('cx', function (d) { return xScale(d.x); })
    .attr('cy', function (d) { return yScale(d.y); })
    .attr('r', 5); 
```

希望这可以帮助！

# python - Tasty-Pie - 拉入相关领域，而不使用 full=True？

> ID：13202486
> 
> 赞同：2
> 
> 时间：2012-11-02T20:19:06.207
> 
> 标签：python, django, rest, tastypie, python-requests

我有一个使用 Python 请求来查询启用 Tasty-Pie 的 Django 应用程序的应用程序。

我有一个名为 Application 的模型，具有相应的 Tasty-Pie 资源。

这个模型/资源有几个外键，将应用程序链接到其他模型（例如二进制、主机、托管等）

我正在使用 Tasty-Pie 过滤器来获取应用程序的子集，然后我想打印一个漂亮的应用程序表，以及来自这些相关模型的一些字段。

现在，我正在使用以下内容来获取应用程序表：

```
def get_applications(self, parsed_args):
    r = requests.get('http://foobar.com:8000/api/v1/application/?name__iregex={0}&format=json'.format(parsed_args.applications))
    print(r.url)
    return r  
def application_iter(self, parsed_args):
    for application in self.get_applications(parsed_args).json['objects']:
        yield (application['name'], application['author'], application['some_other_field'])
def take_action(self, parsed_args):
    return(('Name', 'Author', 'Some Other Field),
            self.application_iter_iter(parsed_args),
        ) 
```

我的问题是，拉入所有相关领域的“推荐”或惯用方式是什么？有没有办法扩展上述内容来做到这一点？

我得到的印象`full=True`是一种不好的做法，并且使用资源 URI 是一种更好的方法。

我怎样才能做到这一点，同时尽量减少请求和数据库命中的数量？

干杯，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:15:27.383

为什么你认为 full=True 不好？

[https://django-tastypie.readthedocs.org/en/latest/resources.html#why-resource-uris](https://django-tastypie.readthedocs.org/en/latest/resources.html#why-resource-uris)

> 除了意识形态，你应该使用适合你的任何东西。如果您喜欢更少的请求和更少的端点，可以使用 full=True，但请注意每种方法的后果。

如果它可以清晰地阅读并且可以执行您想要的操作，您可以做任何您喜欢的事情。开发人员可以使用“full = True”

# javascript - 打开一个空白窗口，写入它，然后选择写入的文本

> ID：13202487
> 
> 赞同：4
> 
> 时间：2012-11-02T20:19:17.750
> 
> 标签：javascript

我正在尝试使用 Javascript 打开一个空白窗口，向其中写入文本，然后自动选择我编写的文本。

我有：

```
var myWindow=window.open('');
myWindow.document.write("hey");
myWindow.select(); 
```

它打开窗口并写入文本，但不选择它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T20:32:39.123

这应该这样做：

```
var myWindow=window.open('');
myWindow.document.write("<div id='hello'>hey<div>");
var range = myWindow.document.createRange();
range.selectNode(myWindow.document.getElementById('hello'));
myWindow.getSelection().addRange(range);
myWindow.select(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T02:28:51.757

```
 var popup = window.open('message.html',"'" + name + "'",'height=300,width=300,location=no,resizable=yes,scrollbars=yes');       
  var element = document.createElement('div');
  element.setAttribute('id', 'mydiv');
  element.appendChild(document.createTextNode('blah blah'));

  popup.window.onload = function() {

      var win = popup.document.body;
      win.appendChild(element);
      var el = popup.window.document.getElementById('mydiv').innerHTML;
      alert(el); //tested - ouputs 'blah blah'

 }; 
```

# geometry - 从多边形中减去矩形

> ID：13202491
> 
> 赞同：3
> 
> 时间：2012-11-02T20:19:52.183
> 
> 标签：geometry, computational-geometry

我正在寻找一种算法，该算法将从一个简单的凹多边形中减去一个矩形并返回剩余的多边形。如果矩形包围了多边形，则余数为空。在大多数情况下，看起来矩形和多边形之间至少会共享一条边。

我一直在互联网上挖掘，但我没有找到一个好的线索。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T02:30:20.643

这很容易：找到矩形和简单多边形的边缘之间的交点，并在那里切割线段。这不需要空间搜索结构，因为多边形的 4 条边是一个常数因子，因此在线性时间内运行。

然后计算所有段的约束 Delaunay 三角剖分，并使用种子点来增长区域。适当地组合区域（简单多边形内部的三角形减去矩形内部的三角形减去外部的三角形。剩下的三角形是你的结果，边界边缘是结果多边形的边缘。

编辑：如果答案太短，我很抱歉。下图显示了这个想法。
a）两个输入多边形
b）插入（切割）段后的 CDT
c）生长区域
d）绿色区域减去红色区域
e）d 区域的边界边缘。

![在此处输入图像描述](../Images/a581c19292b97025b528bcd11110a475.png)

# c - malloc() 的最大大小

> ID：13202492
> 
> 赞同：1
> 
> 时间：2012-11-02T20:20:07.077
> 
> 标签：c, visual-studio, malloc, heap-memory

> **可能重复：**
> [malloc 可以分配的最大内存！](https://stackoverflow.com/questions/2798330/maximum-memory-which-malloc-can-allocate)

我怎么知道我可以占用的堆的最大大小`malloc()`。我使用 MS Visual Studio 2010。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T20:27:17.620

有一些依赖于操作系统的方法可以确定您的进程有多少虚拟内存可用，但我不知道如何在 Windows 上执行此操作。但是，您可以通过进行一次搜索+减半搜索，使用更大的参数调用 malloc 直到它失败，然后返回它所拒绝的值来找到它。就像是

```
for(i=1; v=malloc(i); i<<=1) free(v); 
```

至此，您知道 i/2 字节是可以的，而 i 字节是不行的。现在对实际最大值进行二等分搜索：

```
for(a=(i>>1), b=i; a < b-1;)
{
    c=(a+b)>>1;
    if(v=malloc(c)) { a=c; free(v); }
    else b=c;
} 
```

此时，`a`是您可以成功分配的最大金额。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T20:22:32.250

好吧，为什么不看看它的论点`size_t`...... 因此，您可以分配`size_t`(范围内的任何内容也可以，但无论如何`SIZE_MAX`它都是基于的，如果不是，则 s 签名仍然是您必须处理的)。`size_t``malloc`

您的问题有点不清楚，但是如果您实际上是在问最大堆大小是多少，那么理论上，它是由本机指针大小决定的。例如，在 32 位系统上，指针可以保存 0 到 2^32-1 之间的任何地址（当然，地址 0 通常不是有效的）。

当然，在实践中，必须考虑一些细节，其中大部分是特定于操作系统的。机器中安装了多少物理内存 (RAM)？如果您的操作系统使用虚拟地址，那么这会使事情变得复杂，因为您不再受物理 RAM 的限制（尽管性能会随着不断的分页而急剧下降）。

在考虑程序可以在给定平台上分配多少时，它有助于理解[虚拟地址空间的工作原理。](http://en.wikipedia.org/wiki/Virtual_address_space)

# java - 双重查找地图

> ID：13202495
> 
> 赞同：2
> 
> 时间：2012-11-02T20:20:29.387
> 
> 标签：java, data-structures

> **可能重复：**
> [Map<K1, K2, V> 的任何实现，即两个键？](https://stackoverflow.com/questions/311103/any-implementation-of-mapk1-k2-v-i-e-two-keys)

我需要将名称和 ID 存储为键值对。但是，我有时需要在我的程序中同时按名称和 ID 进行查找。我不想创建两个 HashMap（或者通过存储 name-id 和 id-name 对来增加内存消耗）

什么是适合它的数据结构？java中是否有为此的标准实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:43:31.740

You can use also guava's [BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html). And to get the inverse map is as simple as:

```
BiMap<Integer, String> biMap = HashBiMap.create();
biMap.put(1, "a");
biMap.put(2, "b");
BiMap<String, Integer> invertedMap = biMap.inverse(); //to get the name,id map 
```

The only constraint is that your keys and values should be unique.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:43:11.647

Guava has [`HashBiMap`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap) which keeps track of both directions of a mapping for you. Currently, its implementation basically just maintains a `HashMap` in each direction, but the next release will use a custom data structure saving something like ~38% on memory.

Essentially, `HashBiMap` behaves exactly like a `Map`, except that it rejects duplicate values, and you can get a view of the other direction -- values to keys -- by calling `inverse()`.

(Disclosure: I contribute to Guava.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:24:45.053

Commons-Collections 有您可以使用的 BidiMap：

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/BidiMap.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/BidiMap.html)

# objective-c - 除了泄漏之外的其他东西会导致内存在 Objective-C 中无限增长吗？

> ID：13202497
> 
> 赞同：0
> 
> 时间：2012-11-02T20:20:34.697
> 
> 标签：objective-c, memory-management, instruments

我有一个游戏循环，我把它放在另一个循环中，如下所示：

```
 for (int i = 1; i <= 10000; i++)
 {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    Game *game = [[Game alloc] init];
    while ([game isActive])
       [game nextRound];
    [game release];

    [pool release]; 
 } 
```

但我在活动监视器中注意到实际使用的内存无限增长，当应用程序达到大约 1GB 内存时最终崩溃。Instruments 没有报告任何泄漏。clang 静态分析器也没有报告泄漏。

我的问题是：

1.  仪器是否总能发现所有内存泄漏？
2.  内存无限增加还有其他原因吗？

**编辑：**

正如@Phillips 所指出的，原因是僵尸标志！关闭后，内存占用如预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:29:42.757

Instruments 也可以用来查看内存分配。当您的记忆增长时，请尝试查看活动对象的数量，看看哪些东西仍然处于活动状态。

这不一定是导致内存增长的泄漏。例如，如果您在此期间创建了一些`nextRound`保留对象的`Game`对象，那么在您发布的代码中释放它可能不会导致`dealloc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:24:53.070

你有一个很大的while循环，里面没有自动释放池。尝试

```
while ([game isActive]) {
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
   [game nextRound];
   [pool release];
} 
```

# php - 使用 PHP 将字符串与可能的单词进行比较

> ID：13202498
> 
> 赞同：0
> 
> 时间：2012-11-02T20:20:38.217
> 
> 标签：php

我有一个小的个人项目，我正在努力完成。我需要获取一串字符并尝试从所述字符串的变体中“创建”单词；检查带有已知单词列表的文本文件（单词由新行分隔）。

总之：

*   用户提供字符串 $chars_provided（即“jdlwhfushfmgh”），
*   然后分解 $chars_provided
*   爆炸的 $chars_provided 是随机排列的，以尝试从所述字符串创建单词
*   根据字典文本文件创建了检查/验证的单词以确保它们存在
*   结果以创建单词的字符数显示，限制为 100 个单词。

我脑子里有这个概念，只是不知道应该怎么做，我只是在寻找可以向我解释这个过程的人。

```
<?php

// list of words, one per line
$dictionary = file_get_contents('dictionary.txt');

// provided characters, in the end by user
$chars_provided = "a,t,w,q,u,i,f,d,s,b,v,x,o";

// count the total # of characters
$chars_count = strlen($chars_provided);

// display given information so far
echo "The letters '$chars_provided' were entered, totaling $chars_count letters.";

// explode the characters by using the comma designator
$break_chars = explode(",", $chars_provided);

foreach ($break_chars as $letter) {
    echo "$letter[0]";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:27:14.267

如果您获取字典中每个单词的字母计数，保留它，然后匹配用户输入的字符计数，这会更容易。

例如，对于“aaab”，任何少于（或等于）3 个“a”、少于（或等于）1 个“b”且没有其他字符的单词都将匹配。

```
//// 1\. Grab letter counts for your user input.

$user_input_chars = 'abcdefg'; // for example
$user_in_letter_counts = get_letter_counts($user_input_chars);

// $letters[$char][$num] will contain all words that have exactly $num number of $char characters
$letters = array('a' => array(), 'b' => array(), /* ...,*/ 'z' => array());

//// 2\. Generate list of words with at least $number_of quantity of $letter characters
//     (only have to be done once for any amount of user input if you keep this in memory)
foreach ($words as $word){
    // get letter counts for each type of character for this word
    $letter_counts = get_letter_counts($word);
    // store in array of letters and count
    foreach($letter_counts as $letter => $number_of){
        // we already have a word that had $number_of $letter characters; add word to existing array
        if (isset($letters[$letter][$number_of])){
            $letters[$letter][$number_of][] = $word;
        } // make array to record that this word has $number_of $letter characters
        else {
            $letters[$letter][$number_of] = array($word);
        }
        $number_of--;
    }
}

//// 3\. Find matching words.
$potential_words = array();
foreach ($letters as $letter => $arr){
    foreach($arr as $num => $words){
        // if this array has less than or equal to the number of $letter characters that the user input has,
        // add the words to the potential match list for that character
        if ($num <= $arr[$user_in_letter_counts[$letter]]){
            $potential_words[$letter] = array_merge($potential_words[$letter], $words);
        }
    }
}

// the words must have met the requirement for each character, so only grab words that satisfy all conditions
$all_matching_words = array_intersect($potential_words['a'], $potential_words['b'], /* ..., */ $potential_words['z']);

// (It should be trivial to just grab 100 of these.)

function get_letter_counts($word){
    $result = array();
    $result['a'] = substr_count($my_word, 'a');
    $result['b'] = substr_count($my_word, 'b');
    // ...
    $result['z'] = substr_count($my_word, 'z');
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:42:33.180

Hope you can use this.

```
$file = file_get_contents("dictionary.txt");
    $SearchString = "jdlwhfushfmgh/maybeasencondword";
    $breakstrings = explode('/',$SearchString);

    foreach ($breakstrings as $values)
    {
        if(!strpos($file, $values))
        {
            echo $values." string not found!\n";
        }
        else
        {
            echo $values." string Found!\n";
        } 
```

# javascript - 为什么`1 && true`得到一个bool值`true`，而`0 && true`得到一个数字`0`？

> ID：13202499
> 
> 赞同：5
> 
> 时间：2012-11-02T20:20:40.140
> 
> 标签：javascript

为什么`1 && true`得到一个布尔值`true`，却`0 && true`得到一个数字`0`？我在 Chrome 控制台和 Firebug 中对其进行了测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:22:59.707

因为如果为 false 则`expr1 && expr2`返回`expr1`，否则返回`expr2`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T20:22:51.123

因为这就是 Javascript 中逻辑运算符的[行为](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)方式。

附加参考：[ECMA 262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，第 83 页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T20:24:10.667

&& 运算符通常称为逻辑与。如果第一个操作数为 false、null、undefined、"" 或数字 0，则返回第一个操作数。否则，它返回第二个操作数

# php - 从变量更新数组

> ID：13202500
> 
> 赞同：0
> 
> 时间：2012-11-02T20:20:45.163
> 
> 标签：php, arrays, variables

我有一个存储在变量中的数组值的“路径”，我正在尝试设置该值。我想做的是：

```
$array['Breaks'][1]['In'] = "XXX"; 
```

但是，我已经`['Breaks'][1]['In']`存储在一个变量中。所以我本质上是在尝试做这样的事情：

```
$path = "['Breaks'][1]['In']";
$array.$path = "XXX"; 
```

但这不起作用，我不完全确定如何使这项工作正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:14:07.133

只要用户无法修改路径字符串或以前无法解析路径字符串，您就可以这样做：

```
eval("\$array".$path." = 'Value';"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:26:25.220

尝试将 $path 变量的每个组件提取到它自己的变量中，或者提取到一个数组中（下面的 $pathArray）。因此，如果您将 $pathArray[0] 设置为“Breaks”，将 $pathArray[1] 设置为 1，等等，您可以执行以下操作：

```
$array[$pathArray[0]][$[pathArray[1]][$[pathArray[2]] = "XXX"; 
```

尽管这似乎是一种不寻常的处理方式，但可能值得完全重新考虑您的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:30:51.277

尝试这样做，

```
//This solution works if you are sure the length of $path_arr is going to be 3
$path = "['Breaks'][1]['In']";
$path_arr = explode(']', str_replace(array("['", "'", "["), '', $path)); 

$array[$path_arr[0]][$path_arr[1]][$path_arr[2]] = "XXX";
var_dump($array); 
```

[演示](http://codepad.org/EswThZsV)

# python - tkinter 文件 I/O 中断 pythonw.exe 拖放

> ID：13202507
> 
> 赞同：1
> 
> 时间：2012-11-02T20:21:07.250
> 
> 标签：python, tkinter, pythonw

每当我像下面的代码一样将文件读取添加到 python tkinter gui 时，当我将 .py 文件拖放到 python.exe 或 pythonw.exe 中时，程序将不会执行。我在 Windows XP 中，使用 Python 3.2。

```
from tkinter import *

if __name__ == '__main__':
    root = Tk()
    f = open('hello.txt', 'r')
    t = f.read()
    f.close()
    w = Label(root, text=t)
    w.pack()
    root.mainloop() 
```

我发现如果我将 pythonw.exe 设置为 .py 文件的默认程序然后双击该文件，或者在 cmd 中调用它，它会起作用，但我确实需要通过拖放来执行它。这是一个已知的错误？提前致谢！

# mysql - MySQL 使用 LEFT JOIN 从 2 个表（非关系）中获取行

> ID：13202508
> 
> 赞同：0
> 
> 时间：2012-11-02T20:21:07.667
> 
> 标签：mysql, left-join

我有以下 2 张桌子

**表文章**：

```
id  subject     tags
---------------------
1   subject-1   2,4,5
2   subject-2   3,5
3   subject-3   1,2
4   subject-4   2,3,4
5   subject-5   3 
```

**表标签**：

```
id  tag_name
---------------------
1   php
2   jQuery
3   css
4   mysql
5   java 
```

我正在尝试获得类似的结果

```
id => 1, subject => subject-1, tag_names => jQuery,mysql,java
id => 2, subject => subject-2, tag_names => css,java
id => 3, subject => subject-3, tag_names => php,jQuery 
```

这是我当前的尝试，它仅返回第一个标签（例如，第 1 行的 2 而不是 2、4、5）

```
 1    SELECT
 2        table_article.id,
 3        table_article.subject,
 4        GROUP_CONCAT(table_tags.tag_name) AS tag_names
 5    FROM
 6        table_article
 7    LEFT JOIN
 8        table_tags
 9    ON
10        (table_tags.tag_id IN (table_article.tags))
11    GROUP BY
12        table_article.id
13    LIMIT
14        3 
```

结果是

```
id => 1, subject => subject-1, tag_names => jquery
id => 2, subject => subject-2, tag_names => css
id => 3, subject => subject-3, tag_names => php 
```

问题发生在**第 10 行**-> `IN (table_article.tags)`。

我只是不知道我该如何解决这个问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:38:01.893

您不能使用恰好包含逗号的字符串作为离散值列表。

换句话说：

```
ON table_tags.tag_id IN (2,4,5) 
```

和这个不一样：

```
ON table_tags.tag_id IN ('2,4,5') 
```

像 '2,4,5' 这样的字符串的数值是初始数字部分，第一个非数字字符之后的余数被忽略。所以字符串 '2,4,5' 的数值为 2。这不会是一个错误，但它不会让你得到你想要的，这是与逗号分隔的任何值的匹配列表。

MySQL 有一个内置函数[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)，它可以理解包含逗号分隔值的字符串。该函数返回匹配值的位置，如果没有找到匹配，则返回 0。

```
ON FIND_IN_SET(table_tags.tag_id, '2,4,5') > 0 
```

但这不能使用索引，它会迫使您运行表扫描，这会降低您的性能。需要明确的是，我不建议在连接条件下使用此功能。

答案是：**不要将标签存储在逗号分隔的列表中。** 请参阅我的答案，[在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

正如@Martin Lyne 建议的那样，将每行一个标签存储在一个单独的表中。这样，您可以查找正确的标签，`=`甚至可以索引列以获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:32:13.123

我以前没有在 ON 中看到过 IN（不是说它无效），但我会这样做`ON table_tags.tag_id = table_article.tags)`

所以你最终得到了多行

```
subject-1, query
subject-1, css
subject 2, query 
```

然后`GROUP BY`将压缩表格并`GROUP_CONCAT`获取所有丢失的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:35:27.280

好吧，我会`IN`在这种情况下使用，它不起作用，替换它，`FIND_IN_SET(table_tags.tag_id, table_article.tags) > 0`你会没事的。尽管您确实应该对此进行规范化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:46:46.977

正如其他人所说，这不是一个好的设计。

相反，您可以通过以下方式更改表格设计：

```
table_article
   id
   subject

article_tag
   article_id
   tag_id

table_tags
   id
   tag_name 
```

这样生活会容易得多:-)

# ruby-on-rails - 睡在控制器里

> ID：13202509
> 
> 赞同：5
> 
> 时间：2012-11-02T20:21:10.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

在我的 Rails 控制器方法中，当用户提交表单时执行，有一个 Ruby 代码`sleep(60)`，告诉它等待一分钟。一个用户提交表单，当执行“休眠”时，另一个用户提交表单。第二个用户是否必须等待第一个用户完成，或者控制器的执行是否会为第二个用户开始？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T20:26:01.573

两个用户将只等待 60 秒，他们不会相互依赖。由于请求将分别为彼此处理。因此没有依赖

# php - 社交媒体按钮使网站停止运行？

> ID：13202510
> 
> 赞同：0
> 
> 时间：2012-11-02T20:21:10.453
> 
> 标签：php, wordpress, facebook-like, facebook-social-plugins, latency

我一直在开发一个针对移动设备优化的 Wordpress 主题，它在我测试过的网站上加载速度非常快。这些站点每天有超过 10K 的访问者，因此它们的站点并不小，但它们的服务器设置很棒（s3、多个专用服务器和负载平衡）。

我们在另一个平均有 600 名用户一次 ping 站点的站点上激活了主题。此外，它们只有一个专用服务器，没有负载平衡。当我们激活主题时，网站突然停止了。同样的问题发生在其他两个具有相似流量和托管的站点上。

在对主题进行一些延迟测试后，我注意到社交媒体按钮平均需要 7-9 秒才能加载。这是唯一让我觉得可能导致问题的原因。

有没有人看到与 Facebook 的 Like 按钮或 Tweet 按钮相关的这些类型的问题？

# javascript - 是否可以在不使用 JavaScript 中的外部库的情况下实现触摸侦听器/处理程序？

> ID：13202511
> 
> 赞同：1
> 
> 时间：2012-11-02T20:21:15.000
> 
> 标签：javascript, listeners

我正在尝试在 3D 图形上实现触摸界面，以允许用户在基于触摸的设备上旋转它，但是我不完全确定该怎么做。用于旋转 3D 图形的代码不使用侦听器，而是直接调用某些函数进行旋转。

如果我添加常规鼠标侦听器和处理程序，基于平板电脑的浏览器是否能够将用户的触摸输入解释为鼠标输入？

如果没有，是否有一种简单的方法可以在不使用 JQuery Mobile 等外部库的情况下实现触摸控制？

# c# - c#命名空间名称找不到

> ID：13202514
> 
> 赞同：2
> 
> 时间：2012-11-02T20:21:30.313
> 
> 标签：c#, namespaces

我正在尝试在 Visual Studio 2010 中使用此代码[http://msdn.microsoft.com/en-us/library/bew39x2a.aspx](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)为 Windows Phone 创建一个异步客户端，但使用 IPHostEntry 和 BeginConnect 之类的东西时出现 22 个错误我完全复制了代码。有任何想法吗？

谢谢

**编辑**
我得到的三种不同类型的错误如下。其中大多数是带有sockets.socket的第三个

错误 1 ​​找不到类型或命名空间名称“IPHostEntry”（是否缺少 using 指令或程序集引用？）
错误 2 当前上下文中不存在名称“Dns”
错误 3 System.Net.Sockets.Socket ' 不包含 'BeginConnect' 的定义，并且找不到接受类型为 'System.Net.Sockets.Socket' 的第一个参数的扩展方法 'BeginConnect'（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:22:42.640

您可能缺少参考。验证是否已将适当的 DLL 标识为项目引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:19:26.373

我今天遇到了同样的问题。我想是因为 VS2010 Express WP 使用 2.0 .NET 框架创建我的项目，我不知道为什么，我想使用 7.8，但我只能在 7.0 和 7.1 之间选择。我无法更改.Net框架版本以使用4.0 / 4.5，我只有一个选择，它是windows phone 7.1，我不能单独选择框架的版本......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:28:34.227

您应该检查您的项目是否使用了正确版本的 .Net。在 .net 4.0 中有“客户端”和“完整”版本。通常，当您在 Visual Studio 中创建新的 .Net 项目时，会创建该项目并引用“客户端配置文件”.net。老实说，这让我每次。

您可以通过执行以下操作来更改此设置 (Visual Studio 2010)：

1.  在 Visual Studio 解决方案资源管理器中右键单击项目并选择“属性”
2.  确保选择了“应用程序”选项卡
3.  查看/将“目标框架：”从“.NET Framework _ Client Profile”更改为“.NET Framework _”
4.  重建你的项目:-)

这是一个很好的链接，解释了客户端配置文件和完整配置文件之间的区别：[Microsoft .NET 4.0 完整框架和客户端配置文件之间的差异](https://stackoverflow.com/questions/2759228/difference-between-net-4-client-profile-and-full-framework-download)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:22:35.327

代码`namespace`在声明类之前缺少 a 。

```
 namespace YourNamespace
    {
        // State object for receiving data from remote device.
         public class StateObject { ... 
```

此外，您可能缺少代码使用的名称空间。单击用红色波浪线突出显示的类并按下`ctrl + .`它应该会给出命名空间的建议。

# python - 编写 gzip 格式压缩的 ElementTree

> ID：13202516
> 
> 赞同：2
> 
> 时间：2012-11-02T20:21:32.230
> 
> 标签：python, gzip, elementtree

`gzip`我正在尝试以格式编写我的 xml 的特定子树。以下`Python`代码将常规 xml 写入文件，我不确定如何对其添加压缩

```
import os, time, gzip
import xml.etree.cElementTree as ET
from xml.etree.cElementTree import ElementTree

. . . 

ElementTree(child).write('outputFile.xml') 
```

我想写一个`outputFile.xml.gz`可以用普通应用程序打开的文件。请记住，我是 Python 新手...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:31:36.977

ElementTree.write() 可以传递一个为写入而打开的文件对象。

```
import os, time, gzip
import xml.etree.cElementTree as ET
from xml.etree.cElementTree import ElementTree

. . . 

f = gzip.open('/home/joe/file.txt.gz', 'wb')
ElementTree(child).write(f) 
f.close() 
```

来自[http://docs.python.org/2/library/gzip.html](http://docs.python.org/2/library/gzip.html)和[http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree)。

# plugins - 如何在自定义 gradle 插件中迭代 gradle 依赖项？

> ID：13202522
> 
> 赞同：6
> 
> 时间：2012-11-02T20:22:04.477
> 
> 标签：plugins, gradle

我已遵循本指南：

[http://www.gradle.org/docs/current/userguide/custom_plugins.html](http://www.gradle.org/docs/current/userguide/custom_plugins.html)

创建具有以下结构/文件的独立 gradle 插件：

```
 my-gradle-plugin
    > src
     > main
      > java
       > com
        > mygroup
         > MyGradlePlugin.groovy
    > build.gradle
    > settings.gradle 
```

**构建.gradle**：

```
apply plugin: 'groovy'

dependencies {
  compile gradleApi()
  groovy localGroovy()
}

apply plugin: 'maven'
repositories {
  mavenCentral()
}

group = 'com.mygroup'
version = '1.0.0-SNAPSHOT' 
```

**MyGradlePlugin.groovy**：

```
package com.mygroup

import org.gradle.api.*

class MyGradlePlugin implements Plugin<Project> {

  void apply(Project project) {
    print " project.name " + project.name + "\n"
    print " project.dependencies " + project.dependencies + "\n"
     // How do we iterate each dependency and print artifactId, group, version??
     // project.dependencies.each {
     //        compile(it) {
     //        print it.next()
     //        print it.name
     //      }
     //    }
   project.configurations.each {
  print it.dump()

}
   }
  } 
```

在另一个项目中，我使用/应用这个插件：

```
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'eclipse'

repositories {
  mavenLocal()
}

buildscript {
  repositories {
    mavenLocal()
  }
  dependencies {
    classpath group: 'com.mygroup', name: 'my-gradle-plugin', version: '1.0.0-SNAPSHOT'
  }
}

dependencies {
  compile group: 'commons-codec', name: 'commons-codec', version: '1.4'
  compile group: 'commons-beanutils', name: 'commons-beanutils', version: '1.7.0'
}

install.doLast {
 apply plugin: 'my-gradle-plugin'

} 
```

但是如何从**MyGradlePlugin.groovy**中的 apply 方法迭代公共依赖项并打印它们的坐标（artifactId、groupId、version）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T20:03:12.833

我知道这是一个老问题，但由于没有选定的答案，我将举一个我用过的例子。这是基于 gradle docs 第 49.8.2.2 节中的示例。

我用它来做自定义依赖解析，但你可以在依赖迭代中做任何你想做的事情。请注意，这是有效的，因为它传递了一个在配置阶段之后执行的闭包。

插件代码：

```
package com.overtherainbow

import org.gradle.api.Project
import org.gradle.api.Plugin
import org.gradle.api.artifacts.DependencyResolveDetails

class DefaultVersionPlugin implements Plugin<Project> {

    // This is where dependency versions are defined
    def defaultVersionsMap = [
        'javax.servlet:servlet-api' : '2.5',
        'log4j:log4j' : '1.2.16']

    void apply(Project project) {
        project.configurations.all {
            resolutionStrategy.eachDependency {
                DependencyResolveDetails details -> resolveDependencyVersion(project, details)
            }
        }
    }

    def resolveDependencyVersion(Project project, DependencyResolveDetails details) {
        if (details.requested.version == 'default') {
            def version = resolveDefaultVersion(project, details.requested.group, details.requested.name)
            details.useVersion version
        }
    }

    def resolveDefaultVersion(Project project, String group, String name) {
        project.logger.debug("Resolving default dependency for $group:$name")
        println "Resolving default dependency for $group:$name"
        defaultVersionsMap["$group:$name"]
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T08:00:35.747

问题是依赖关系图只有在项目完全评估后才可用。这就是为什么你不能在`apply`方法中直接依赖它。您必须使用该`afterEvaluate`方法推迟执行。以下代码可以解决问题：

```
class MyGradlePlugin implements Plugin<Project> {

  void apply(Project project) {
    project.afterEvaluate {
      println "  Project:" + project.name
      project.configurations.each { conf ->
        println "    Configuration: ${conf.name}"
        conf.allDependencies.each { dep ->
          println "      ${dep.group}:${dep.name}:${dep.version}"
        }
      }
    }
  }

} 
```

**更新**：在评论和聊天中的问题更新和讨论之后，您还可以执行以下操作：

```
class MyGradlePlugin implements Plugin<Project> {

  void apply(Project project) {
    project.tasks.findByName('install')?.doLast {
      ...
    }
  }

} 
```

# java - Objectify4 所需的罐子

> ID：13202533
> 
> 赞同：0
> 
> 时间：2012-11-02T20:22:36.120
> 
> 标签：java, google-app-engine, objectify

我们有一个刚刚移植到 AppEngine 的遗留系统。所以现在我们需要使用 Objectify4，但是我们拥有的遗留应用程序还没有*“mavenized”*，所以我们手动添加 jars。需要将所有 jarts 放在`WEB-INF/lib`文件夹中，以便`Objectify`jars 及其依赖项将起作用。

我们在类路径中设置的当前 AppEngine 版本是 1.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:57:22.807

您可以在此处从 Maven 存储库下载构建：

> [https://objectify-appengine.googlecode.com/svn/maven/com/googlecode/objectify/objectify/](https://objectify-appengine.googlecode.com/svn/maven/com/googlecode/objectify/objectify/)

话虽如此，这些文件似乎没有任何保证，因此请自行决定使用。

根据您计划多长时间部署产品，现在使用 v3 构建服务可能比 v4 更有意义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T20:40:17.583

引用 Objectify 文档：

> 将 objectify-NNNjar 添加到项目的 WEB-INF/lib 目录中。没有其他 jar 依赖项。

编辑：通过浏览源代码，这些 jar 文件位于 Maven 存储库中。例如，[在这里](http://code.google.com/p/objectify-appengine/source/browse/?repo=maven#git/com/googlecode/objectify/objectify/4.0a4%253Fstate%253Dclosed)您可以找到 objectify-4.0a4.jar。

希望这可以帮助！

# git - 在全新的 Git 存储库上执行新的代码审查

> ID：13202535
> 
> 赞同：2
> 
> 时间：2012-11-02T20:22:47.750
> 
> 标签：git, code-collaborator

我想对一个全新的存储库进行代码审查。这意味着我希望审查所有代码，而不仅仅是其中的一部分。但是，当我输入：

```
 ccollab addgitdiffs 1234 0000..HEAD 
```

我得到：

```
fatal: ambiguous argument '0000..HEAD': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions
No files to review! 
```

你如何审查一个全新的 git 存储库？我尝试上传代码的 tar 文件，但无法正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:11:24.430

这个新存储库的代码来自另一个位置。我从第一个变更集到最后一个变更集进行了审查。这似乎奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T08:24:09.567

我使用代码协作者，您可以为此使用“空”git commit：

```
ccollab addgitdiffs new 4b825dc642cb6eb9a060e54bf8d69288fbee4904..HEAD 
```

# java - 连接表与元数据的 Hibernate 映射

> ID：13202537
> 
> 赞同：2
> 
> 时间：2012-11-02T20:22:50.980
> 
> 标签：java, hibernate, join

我试图弄清楚如何通过一个包含一些元数据的连接表来映射两个表之间的关系。简而言之，三个表格代表一个表单的页面，每个页面可以包含任意数量的元素（问题）。出于某种原因，最初的开发人员决定元素可以用于多个表单。这意味着用于对页面上的元素进行排序的权重列位于连接表中。

![在此处输入图像描述](../Images/8410545b69c834844443dad2f3d0d2f9.png)

我如何在 XML 中映射它？（注释不是一种选择。）

对于连接表，我想是这样的：

```
<class name="com.foo.bar.model.db.ApplicationPageElements"  
       table="APPLICATION_PAGE_ELEMENTS">
    <composite-id name="id" class="com.foo.bar.model.db.ApplicationPageElementsKey">
        <key-property name="pageId" column="page_id"/>
        <key-property name="elementId" column="element_id"/>
    </composite-id>
    <property name="weight" type="java.lang.Long">
        <column name="WEIGHT" precision="0" />
    </property>
</class> 
```

我的直觉让我想从 ApplicationPage 方面做这样的事情：

```
<set name="applicationElements" table="applicationPageElement">
    <key column="page_id"/>
    <many-to-many column="element_id" unique="true"
          class="com.foo.bar.model.db.ApplicationElements" />        
</set> 
```

这就是我所有的下巴松弛，盯着屏幕，抽泣的地方。

我们使用 .hbm.xml 文件来映射我们的数据库。我们还决定不更改我们的数据库。

关于如何在 XML 中映射它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:19:26.340

与其将 application_page 和 application_element 之间的关系视为多对多的关系，不如将其视为从 application_page 到 ApplicationPageElements 的一对多关系以及从 application_element 到 ApplicationPageElements 的一对多关系。

在您的 application_page xml 映射中添加：

```
<set name="applicationElements" inverse="true">
    <key column="page_id"/>
    <one-to-many class="ApplicationPageElements"/>
</set> 
```

page_id 构成连接表的主键的一部分。因此，将集合标记为反向。

您对连接表的映射是正确的。但是，通过上述更改连接表的当前映射，您可以从 application_page 导航到 ApplicationPageElements。要从 application_page 导航到 application_element（通过 ApplicationPageElements），请在连接表映射中添加多对一关系。

```
<class name="com.foo.bar.model.db.ApplicationPageElements"  
       table="APPLICATION_PAGE_ELEMENTS">
    <composite-id name="id" class="com.foo.bar.model.db.ApplicationPageElementsKey">
        <key-property name="pageId" column="page_id"/>
        <key-property name="elementId" column="element_id"/>
    </composite-id>
    <property name="weight" type="java.lang.Long">
        <column name="WEIGHT" precision="0" />
    </property>
    <many-to-one name="elements" class="ApplicationElements" 
    column="element_id" not-null="true" insert="false" update="false"/>
    <many-to-one name="page" class="ApplicationPage" 
    column="page_id" not-null="true" insert="false" update="false"/>
</class> 
```

请注意，在上述多对一映射中，插入和更新属性设置为 false。这是必要的，因为列被映射两次，一次在复合键中（负责插入值），另一次用于多对一关联。

上述用例在《Java Persistence with Hibernate》一书中有详细提及。

# php - 用javascript循环一个ajax函数

> ID：13202538
> 
> 赞同：0
> 
> 时间：2012-11-02T20:22:59.703
> 
> 标签：php, javascript, jquery, ajax

我有一个正在循环的数组，每个数组都需要通过一个 ajax/php 函数。但是，这似乎不起作用。你能告诉我这样做的正确方法吗？

```
for (var i = 0; i < arr.length; i++) {
    $.ajax({
        type: "POST",
        data: "data=" + arr[i],
        url: "proxy.php",
        success: function(msg){
            $("#test").html(msg+msg);
        }
    });
} 
```

id "test" 需要包含从 php 获得的所有 val。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:26:46.050

`.html()`用您传入的内容替换当前内容。相反，您需要添加内容。

```
$("#test").append(msg,"<br />"); 
```

# android - 如何在 monodroid 中获取所选项目的标题和描述？

> ID：13202549
> 
> 赞同：0
> 
> 时间：2012-11-02T20:23:43.853
> 
> 标签：android, xamarin.android

我创建测试适配器并将项目设置为 ListView

```
 objListView.Adapter = new TestAdapter(this, this, objItems); 
```

我尝试获得点击的项目标题

```
 .
     .
     .
     objListView.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>(objListView_ItemClick);

    void objListView_ItemClick(object sender, AdapterView.ItemClickEventArgs e)
    {
        // how can I get Item title  ?          
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:04:46.380

在您的 TestAdapter 实现中，您应该有一个名为 GetItemId 的方法来获取该对象的 id，或者您可以让您自己的方法返回所选对象，例如：

```
public YourObject GetObject(int position)
{ 
    return this.objItems.ElementAt(position)
} 
```

然后，在您的 objListView_ItemClick 方法中，您可以使用 GetObject 方法来获取数据。接下来，创建一个新的 Intent 实例并使用 PutExtra(string name, object o) 将数据传递给 Activity。

```
void objListView_ItemClick(object sender, AdapterView.ItemClickEventArgs e)
{
    var item= ((TestAdapter)objListView.Adapter).GetObject(e.position);
    var intent = new Intent(this, typeof(YourActivity));
    intent.PutExtra("Name", item.Title);
    intent.PutExtra("Description", item.Description);
    //Do whatever you want next.
} 
```

# c++ - 不完整的类型，前向声明

> ID：13202550
> 
> 赞同：1
> 
> 时间：2012-11-02T20:23:57.080
> 
> 标签：c++, struct, forward-declaration

我只是在学习 C++，我遇到了很多问题。现在我正在尝试使用堆和哈希表来实现频率队列，因此我正在尝试为哈希表条目和堆条目创建结构。我所做的是...

```
 1 #include<iostream>
  2 #include<string>
  3 #include "freqq.h"
  4
  5 using namespace std;
  6
  7 
  8 
  9
 10 struct _hashEntry {
 11   string word;
 12   int heapPstn;
 13 };
 14
 15 struct _heapEntry {
 16   int frequency;
 17   hashEntry* wordInHash;
 18 };

^^ the .cpp, 
 1 #define FREQQ_H_
  2 #include <string>
  3
  4 using namespace std;
  5
  6 class FreqQ {
  7  public:
  8   struct _heapEntry;
  9   typedef struct _heapEntry heapEntry;
 10
 11   struct _hashEntry;
 12   typedef struct _hashEntry hashEntry;
 13 
```

^^ .h 。为了简单起见，我已经消除了其他方法。

我收到错误无效使用不完整类型âstruct FreqQ::_heapEntryâfreqq.h:8:10：错误：前向声明âstruct FreqQ::_heapEntryâ

而且我无法弄清楚为什么我的生活。

有任何想法吗？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:27:03.683

我不明白。您是在 .cpp 中定义您的`_hashEntry`和结构吗？`_heapEntry`

将结构声明移动到声明之前的 .h 中`class FreqQ`，其中使用了结构。

# testing - HttpUnit 不尊重 web.xml 中的加载启动

> ID：13202552
> 
> 赞同：1
> 
> 时间：2012-11-02T20:24:01.587
> 
> 标签：testing, servlets, http-unit, servletunit

我仍在尝试了解 httpunit 类体系结构的工作原理，但我遇到了一个问题，即当我使用 ServletRunner 时，我没有看到 web.xml 中的“加载启动”指令得到遵守。有没有一种标准的方法来完成这项工作，或者这是一个错误？

这是我用来尝试获得工作示例的一些概念验证代码：

```
ServletRunner     servletRunner = new ServletRunner(TestVariables.WEB_XML_REL_PATH);
WebConversation   conv          = new WebConversation();
ServletUnitClient client        = servletRunner.newClient();
WebRequest        request       = new PostMethodWebRequest(
        TestVariables.HTTP_UNIT_LOGGER_SERVLET_URL);
InvocationContext iContext      = client.newInvocation(request); 
```

# c# - 如何为 PDF 模板创建签名字段？

> ID：13202555
> 
> 赞同：3
> 
> 时间：2012-11-02T20:24:10.700
> 
> 标签：c#, java, python, .net, pdf

我一直在搜索[itextsharp](http://itextpdf.com/)类：

[http://api.itextpdf.com/itext/](http://api.itextpdf.com/itext/)

我发现你可以创建按钮、复选框、单选按钮、文本框：

![在此处输入图像描述](../Images/7d47db751e82ff7ec5667f373ba09fd7.png)

但我不明白为什么你不能创建一个签名框？**或者你可以吗？**它是 PDF 模板的标准对象库的一部分。您可以使用 adobe acrobat 本身创建此对象。

**是否有可以为 PDF 创建签名框的库/工具？**

当我说签名时，我的意思是我需要用户能够在生成的 PDF 上签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:19:11.790

请阅读[http://itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures)，更具体地说，第 2.3.2 节题为“使用 iText 以编程方式创建签名字段”。

但是，您还需要阅读第 2.4.4 节，标题为“普通和证明签名”：

ISO-32000-1 规定 PDF 文档可能包含以下标准类型的签名：

*   一个或多个批准签名——...
*   最多一个认证签名——...
*   最多两个使用权签名——这些是使用例如 Adob​​e 专有的私钥创建的签名。当 PDF 文档使用 Adob​​e 的密钥使用使用权签名进行签名时，该文档将启用阅读器。Adobe Reader 将解锁某些使用权限，例如允许您在本地保存填写的表格。其他供应商可以使用他们的私钥来强制执行类似的使用权限。这种类型的签名超出了本文的范围。

如果您想创建最终用户可以签名的文档，而不需要除 Adob​​e Reader 之外的任何其他软件，您的文档需要“启用 Reader”。由于数字签名白皮书中解释的原因，您需要 Adob​​e 软件来执行此操作。任何不同于 Adob​​e 的第三方使用 Adob​​e 的私钥都是违法的。

*额外说明：* 请注意，数字签名和签名字段所涉及的不仅仅是允许最终用户“签署他的名字”。他总是需要私钥来签署文件。假设这不是您的问题的意思，假设您希望人们在文本字段中填写他们的姓名，那么您仍然需要阅读器启用文档，除非最终用户使用其中一个最新版本的 Adob​​e Reader 解锁了保存已填写表格的可能性。

*最后一句话：* 现在我看到你需要人们“画”他们的签名。这不是一个有效的数字签名，您不能提供一个字段来添加这样的假签名。添加这样的虚假签名需要在最终用户使用的查看器中提供。如果您想知道为什么这些签名是假的并且没有任何法律价值，请观看此演示：[http ://www.youtube.com/watch?v=VYK45lhLr8I](http://www.youtube.com/watch?v=VYK45lhLr8I)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T21:17:45.230

您可以使用 iText 创建一个空的签名字段，如iText in Action, 2nd edition中的示例[SignatureField中所述。](http://itextpdf.com/examples/iia.php?id=221)该示例应该可以使用 iTextSharp 轻松转换为 C#。您是否需要这样的签名，取决于 PDF 查看器及其版本。

# asp.net-mvc - 休眠引导性能

> ID：13202558
> 
> 赞同：1
> 
> 时间：2012-11-02T20:24:22.327
> 
> 标签：asp.net-mvc, performance, nhibernate, guid

在 nHibernate 中使用 GUID 而不是整数标识作为表主键会有什么开销？

使用的主要原因是在面向用户的数据上混淆了表 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:16:21.643

*对GetById*、*查找*前 50 个过滤记录、*Delete*、*Update* ...等操作的日常级别的影响为零。根本没有可测量的差异。

影响很大的是数据库**存储**。整数存储在 4 个字节中，Guid 消耗 16 个字节。因此，每百万行您将需要多 12 MB 的存储空间。如果此类实体引用其他实体，则每个引用的表需要另外 12 MB。当这些列用于索引时......空间可能会越来越大。

因此，在更大的范围内，SQL Server 将不得不扫描更大的数据。例如，MS SQL Server 确实针对 int 类型进行了优化。（包括 bigint、shortint、tinyint）。

*但是，老实说，我们同时使用了这两种方法，而性能问题总是在其他地方......*

如果可能的话，我每次都会根据 **int投票给主键。**

而是稍后将 MVC 路由从 controller\action\id 更改为其他内容，但保持 ids int。您可以将 GUID 作为属性引入（占用一些空间，但仅占用一些空间，而不是在引用的表中）并将路由更改为*controller\actin\uniqueGuid*，如果确实需要混淆用户，您将在业务层上调用 GetByGuid。

# objective-c - 通过关键字查找相关音频

> ID：13202560
> 
> 赞同：1
> 
> 时间：2012-11-02T20:24:26.737
> 
> 标签：objective-c, algorithm, artificial-intelligence, match, keyword

我开始实现一个 iphone 应用程序，其中包含音频课程。我的应用程序连接到日历和地图，因此它从用户（地点、约会或会议）中获取，他在日历中编写或在地图中签入。然后，我会向他展示相关的课程。我的问题是：是否有任何算法可以让用户找到相关课程。请注意，每节课都包含关键字，我想将它们与用户输入相匹配。

谢谢你，我很感激任何对我有帮助的信息:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:15:34.423

我只是创建一个单独的数据库，其中包含一组关键字并以某种方式指定其关联的音频文件资源。IOW、NSArray 和 NSString 应该可以让您自己快速实现。

# python - Python - 将字符串拆分为成对字符列表

> ID：13202562
> 
> 赞同：0
> 
> 时间：2012-11-02T20:24:33.027
> 
> 标签：python, string, list, hex

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)
> [按字符数拆分字符串](https://stackoverflow.com/questions/7111068/split-string-by-count-of-characters)

我有一个字符串（十六进制），例如：

```
717765717777716571a7202020 
```

我需要把它变成以下格式：

```
0x71,0x77,0x65,0x71,0x77,0x77... 
```

我不确定最好的方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T20:28:47.367

```
>>> s = '717765717777716571a7202020'
>>> ['0x' + s[i:i+2] for i in range(0, len(s), 2)]
['0x71', '0x77', '0x65', '0x71', '0x77', '0x77', '0x71', '0x65', '0x71', '0xa7', '0x20', '0x20', '0x20'] 
```

如果您想要一个逗号分隔的字符串作为结果，您可以使用以下内容：

```
>>> ','.join('0x' + s[i:i+2] for i in range(0, len(s), 2))
'0x71,0x77,0x65,0x71,0x77,0x77,0x71,0x65,0x71,0xa7,0x20,0x20,0x20' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:07:57.197

其他方式。

```
s = '717765717777716571a7202020'

print ','.join('0x'+''.join(d) for d in zip( *[iter(s)]*2 )) 
```

输出：

```
0x71,0x77,0x65,0x71,0x77,0x77,0x71,0x65,0x71,0xa7,0x20,0x20,0x20 
```

# powershell - 删除文件名中第二个空格右侧的字符

> ID：13202572
> 
> 赞同：0
> 
> 时间：2012-11-02T20:25:10.260
> 
> 标签：powershell

我将始终将文件从外部服务器复制到本地服务器。文件名采用以下格式：

```
Example 1     Invoice MM500780 10 26 2012 3 52 15 PM.PDF
Example 2     Invoice PS100679-02 10 30 2012 9 31 35 AM.PDF
Example 3     Return RTN001116 10 26 2012 8 59 56 AM.PDF 
```

我想通过修剪第二个空格（代表日期和时间）之后的任何字符来重命名所有文件。文件名应为：

```
Example 1     Invoice MM500780.PDF
Example 2     Invoice PS100679-02.PDF
Example 3     Return RTN001116.PDF 
```

无论如何我可以创建一个powershell文件并通过任务管理器运行它吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:57:45.747

尝试：

```
dir c:\mydir -filter *.pdf | 
% {rename-item -path $_.fullname -newname ( ($_.name.split('')[0..1] -join ' ' ) + $_.Extension )} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:39:42.963

根据 Christian 的帖子，这是他的代码，适用于使用 Regex 模式匹配。

```
[regex]$regex = "\A\S*[\s]\S*"

dir c:\mydir -filter *.pdf | % {rename-item -path $_.fullname -newname ($regex.matches($_.BaseName)[0].value + $_.Extension )} 
```

更改正则表达式以更改命名模式。使用正确的模式，您应该能够提取原始名称的任何部分以用作新名称。模式是 \A 字符串的开头，\S 非空白字符（* 任意数字），\s 空白，\S 非空白字符（* 任意数字）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:39:59.907

我相信你正在寻找的是这些方面的东西？

[使用 PowerShell 拆分字符串并对每个令牌执行一些操作](https://stackoverflow.com/questions/11348506/split-string-with-powershell-and-do-something-with-each-token)

基本上，您将在空格处拆分文件名，然后将文件重命名为第一个和第二个标记中的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:57:46.300

这个 powershell one liner 应该可以满足您的需求。

```
Get-ChildItem | %{$splitName = $_.Name.Split(" ", 3); if($splitName.Length -gt 2) {$finalName = [string]::Join("",[string]::Join(" ",$splitName[0],$splitName[1]),$_.Extension); Rename-Item -Path $_.FullName -NewName $finalName}} 
```

# r - 替代不区分“数字”和“整数”的 class()

> ID：13202573
> 
> 赞同：3
> 
> 时间：2012-11-02T20:25:29.560
> 
> 标签：r

给定一个data.frame，我想测试所有列是否属于同一个“类”。如果他们是，我想保留 data.frame 原样。如果不是，我想保留与第一个变量类匹配的所有列，并删除任何不属于该类的列。唯一的例外是，就我的目的而言，整数和数字是相等的。

例如：

```
dat <- data.frame(numeric,numeric,integer,factor) 
```

将会：

```
data.frame(numeric,numeric,integer) 
```

此外

```
dat <- data.frame(character,character,integer) 
```

将会：

```
data.frame(character,character) 
```

最后：

```
dat <- data.frame(numeric,numeric,numeric,factor) 
```

将会：

```
data.frame(numeric,numeric,numeric) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:43:03.893

我会这样做：

```
dat <- data.frame(
  a=as.integer(1:26), b=as.integer(26:1), c=as.numeric(1:26), d=as.factor(1:26)
) 
```

创建两个辅助函数：

```
is.numint <- function(x)is.numeric(x) || is.integer(x)
is.charfact <- function(x)is.character(x) || is.factor(x) 
```

仅返回数字列：

```
head(dat[, sapply(dat, is.numint)])
    a  b  c
1   1 26  1
2   2 25  2
3   3 24  3
4   4 23  4
5   5 22  5 
```

仅返回因子列：

```
head(dat[, sapply(dat, is.charfact), drop=FALSE])
  d
1 1
2 2
3 3
4 4
5 5
6 6 
```

* * *

结合这种方法，并重写你的函数：

```
dropext <- function(x){
  is.numint <- function(x)is.numeric(x) || is.integer(x)
  is.charfact <- function(x)is.character(x) || is.factor(x)
  cl <- rep(NA, length(x))
  cl[sapply(x, is.numint)] <- "num"
  cl[sapply(x, is.charfact)] <- "char"
  x[, cl == unique(cl)[1], drop=FALSE]
}

dropext(dat)
    a  b  c
1   1 26  1
2   2 25  2
3   3 24  3
4   4 23  4
5   5 22  5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T21:04:31.463

怎么样：

```
if(length(unique(cl <- sapply(dat, class))) > 1 && 
   any(!sapply(dat, is.numeric))) {
    dat <- dat[ , which(cl == cl[1]), drop = FALSE]
} 
```

这假设在以下示例中：

```
dat2 <- data.frame(A = factor(sample(LETTERS, 26, replace = TRUE)),
                   B = factor(sample(LETTERS, 26, replace = TRUE)),
                   C = sample(LETTERS, 26, replace = TRUE),
                   dat, stringsAsFactors = FALSE)

> sapply(dat2, class)
               A                B                C 
        "factor"         "factor"      "character" 
as.integer.1.26\. as.integer.26.1\. as.numeric.1.26\. 
       "integer"        "integer"        "numeric" 
```

您**只**需要因子变量，即您想要区分字符变量和因子变量 - 这就是您的代码似乎要做的事情。

对于这个例子，我使用

```
if(length(unique(cl <- sapply(dat2, class))) > 1 &&
   any(!sapply(dat2, is.numeric))) {
    dat2 <- dat2[ ,which(cl == cl[1]), drop = FALSE]
} 
```

这导致

```
> head(dat2)
  A B
1 D G
2 P D
3 C T
4 X F
5 N R
6 A E
> sapply(dat2, class)
       A        B 
"factor" "factor" 
```

上`dat`，上面的`if()`语句不会改变`dat`：

```
>     if(length(unique(cl <- sapply(dat, class))) > 1 && 
+         any(!sapply(dat, is.numeric))) {
+         dat <- dat[ , which(cl == cl[1]), drop = FALSE]
+     }
> head(dat)
  as.integer.1.26\. as.integer.26.1\. as.numeric.1.26.
1                1               26                1
2                2               25                2
3                3               24                3
4                4               23                4
5                5               22                5
6                6               21                6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:18:37.057

感谢您的评论和您的回答，最后我只需要一个不区分整数和数字的 class() 函数。这可以通过一个简单的包装器来完成。

```
class.wrap <- function(x) {
test <- class(x) 
if(test == "integer") test <- "numeric"
return(test)
} 
```

# iphone - UIView 动画在新的视图控制器被压入堆栈后继续运行

> ID：13202574
> 
> 赞同：2
> 
> 时间：2012-11-02T20:25:30.180
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uiviewanimation

*解决了。可笑的尴尬。我没有使用实例变量，我在实现中的花括号之外声明了它。*

真的很挣扎。我有一个管理动画倒数计时器的视图控制器。该动画使用递归 UIView 动画和一个简单的 int ivar 递减。类似于以下内容（这是一个简化的片段）：

```
- (void) animate {
  [UIView animateWithDuration:0.75f
                        delay:0.25f
                      options:UIViewAnimationCurveEaseInOut
                   animations:^{ aView.center = newCenter;
                               counter--; } 
                   completion:^(BOOL finished) {
                            if (counter != 0) [self animate]; }];
} 
```

在倒计时期间，用户可以滑动进入下一步，而不是等待计时器完成倒计时。当用户滑动一个新的视图控制器时——当前视图控制器的一个新实例——被推送到堆栈上，并带有下一步的值：

```
TimerViewController * vc = (TimerViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"Timer"];
[vc setTask: _task + 1];
[self.navigationController pushViewController:vc animated:YES]; 
```

新的视图控制器滑入到位并开始倒计时，但前一个视图控制器继续动画，在调试器中我可以清楚地看到这个视图控制器的另一个实例，我会弹出返回的那个，仍在运行它动画，这会导致 aView 不规则地移动。两个不同的视图控制器实例正在为同一个 aView 实例设置动画？

如何从堆栈中的前一个视图控制器停止动画？我正在设置`counter = 0`和`viewWillDisappear`其他各种绝望的事情都无济于事，我错过了这里真正起作用的东西。

非常感谢任何帮助。

**更新 1**（添加`viewWillDisappear`实现）：

```
-(void) viewWillDisappear:(BOOL)animated {
   [super viewWillDisappear:animated];
   counter = 0;
} 
```

**更新 2（编辑以显示实例）**

我验证了显而易见的事实，即有多个 TimerViewController 实例和它们自己的 aView 实例。我在`animations`块期间添加了日志记录以显示当前实例、任务和计数器值。

```
2012-11-03 10:28:19.930 develop.[4362:907] [0x1f5a38f0]NiceTimer:viewWillAppear
2012-11-03 10:28:19.940 develop.[4362:907] [0x1f5a38f0](0)>03:00
2012-11-03 10:28:21.149 develop.[4362:907] [0x1f5a38f0](0)>02:59
2012-11-03 10:28:22.161 develop.[4362:907] [0x1f5a38f0](0)>02:58
2012-11-03 10:28:23.170 develop.[4362:907] [0x1f5a38f0](0)>02:57
2012-11-03 10:28:24.183 develop.[4362:907] [0x1f5a38f0](0)>02:56
2012-11-03 10:28:25.210 develop.[4362:907] [0x1f5a38f0](0)>02:55
2012-11-03 10:28:26.221 develop.[4362:907] [0x1f5a38f0](0)>02:54
2012-11-03 10:28:26.694 develop.[4362:907] ---swipe---
2012-11-03 10:28:26.698 develop.[4362:907] delegate:niceTimerViewControllerDidSwipe:duringTask
2012-11-03 10:28:26.713 develop.[4362:907] [0x1f5a38f0]NiceTimer:viewWillDisappear
2012-11-03 10:28:26.715 develop.[4362:907] [0x1f5b0ac0]NiceTimer:viewWillAppear
2012-11-03 10:28:26.720 develop.[4362:907] [0x1f5b0ac0](1)>02:00
2012-11-03 10:28:27.096 develop.[4362:907] [0x1f5a38f0]NiceTimer:viewDidDisappear
2012-11-03 10:28:27.099 develop.[4362:907] [0x1f5a38f0](0)>01:59
2012-11-03 10:28:27.748 develop.[4362:907] [0x1f5b0ac0](1)>01:58
2012-11-03 10:28:27.754 develop.[4362:907] [0x1f5a38f0](0)>01:57
2012-11-03 10:28:28.754 develop.[4362:907] [0x1f5b0ac0](1)>01:56
2012-11-03 10:28:28.763 develop.[4362:907] [0x1f5a38f0](0)>01:55
2012-11-03 10:28:29.764 develop.[4362:907] [0x1f5b0ac0](1)>01:54
2012-11-03 10:28:29.770 develop.[4362:907] [0x1f5a38f0](0)>01:53
2012-11-03 10:28:30.542 develop.[4362:907] ---swipe---
2012-11-03 10:28:30.545 develop.[4362:907] delegate:niceTimerViewControllerDidSwipe:duringTask:1
2012-11-03 10:28:30.560 develop.[4362:907] [0x1f5b0ac0]NiceTimer:viewWillDisappear
2012-11-03 10:28:30.562 develop.[4362:907] [0x1f5ac3d0]NiceTimer:viewWillAppear
2012-11-03 10:28:30.567 develop.[4362:907] [0x1f5ac3d0](2)>05:00
2012-11-03 10:28:30.593 develop.[4362:907] [0x1f5a38f0](0)>04:59
2012-11-03 10:28:30.601 develop.[4362:907] [0x1f5a38f0](0)>04:58
2012-11-03 10:28:30.617 develop.[4362:907] [0x1f5a38f0](0)>04:57
2012-11-03 10:28:30.620 develop.[4362:907] [0x1f5a38f0](0)>04:56 
```

抱歉这么久，但这确实表明发生了什么。滑动后有推送（帖子顶部的代码）。我希望任务增加（0）>转到（1）>并保持不变，直到下一次滑动。相反，我看到堆栈上的每个先前实例都使用当前计数器的值继续触发。**每个先前实例的动画都针对当前计数器继续**

**更新 3**

我实现了一个在滑动处理程序中调用的委托，TVC1 是在推送时传递给 TVC2 等的委托。委托将计数器设置为 0，称为 removeAllAnimations 等，但没有效果。我真的以为这会做到。在这一点上，我认为我走错了路，试图以这种方式解决它。做了一个新项目，简单的实现，以确保它不是应用程序中的其他东西。

```
-(void)timerViewControllerDidSwipe:(TimerViewController *)controller duringTask:(int)task {

    NSLog(@"timerViewControllerDidSwipe:duringTask:%d", task);
    counter = 0;
    [self.aView.layer removeAllAnimations];
    [self.view.layer removeAllAnimations];
    aView = nil;

    // This is showing everything I tried
} 
```

**更新 4**

**我发现了问题！**所有实例都引用相同的 int。我不知道这怎么可能，整数不是特定于类的实例？

```
2012-11-03 13:16:49.336 develop.[4656:907] [animate:0x1ed8c790](1)>02:46
2012-11-03 13:16:49.340 develop.[4656:907] **[^anim:0x1ed8c790](1)>166(duration=0x6a748)**
2012-11-03 13:16:49.344 develop.[4656:907] [^after:0x1eddb8c0](0)>166
2012-11-03 13:16:49.352 develop.[4656:907] [animate:0x1eddb8c0](0)>02:45
2012-11-03 13:16:49.356 develop.[4656:907] **[^anim:0x1eddb8c0](0)>165(duration=0x6a748)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:03:01.720

在将 TimerViewController 推送到导航堆栈之前，请尝试删除所有正在运行的动画：

```
[aView.layer removeAllAnimations]; 
TimerViewController * vc = (TimerViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"Timer"];
[vc setTask: _task + 1];
[self.navigationController pushViewController:vc animated:YES]; 
```

另外，请确保您已导入`<QuartzCore/QuartzCore.h>`，否则您将收到以下错误：`Receiver type 'CALayer' for instance message is a forward declaration`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T23:16:37.467

固定的。不能更尴尬了。基本语法问题。我没有用花括号将变量声明括起来。我这样做了：

```
@implementation TimerViewController 

int counter;

- (void) aMethod { }

@end 
```

而不是这个：

```
@implementation TimerViewController {

int counter;

}

- (void) aMethod { }

@end 
```

我希望我的错误会帮助别人！我永远不会想到的。一个我不会再犯的错误。

# php - 使用 Codeigniter 和 Active Record 查询动态构建表单

> ID：13202576
> 
> 赞同：0
> 
> 时间：2012-11-02T20:25:34.487
> 
> 标签：php, codeigniter, activerecord, form-generator

### 模型

```
 function get_prices() 
    {
        $table_by_product = 'printer_businesscards'; //replace with URI Segment

        //Get all the columns in the table set by the page URI of $table_by_product variable 
        $get_all_col_names = $this->db->list_fields($table_by_product);

        //Loop through the column names. All names starting with 'O_' are optional fields for the 
        //current product. Get all Distinct values and create a radio button list in form.
        foreach ($get_all_col_names as $key => $value) {
            //get all o_types for the product by column name
            if ($all_O_types = preg_match('/O_/', $value)) 
                {
                $O_types = array($value);
                foreach ($O_types as $O) {
                        //echo $O;
                        $this->db->select($O);
                        $this->db->distinct();
                        $qO = $this->db->get($table_by_product);
                        $qO_Array = $qO->result_object();
                    }
                } 
            //Get all x_types for the product by column name. All 'X_' types are specific product options.
            //Create a dropdown menu with all DISTINCT product options.
            if ($all_X_types = preg_match('/X_/', $value)) 
                {
                $X_types = array($value);
                    foreach ($X_types as $X) {
                        //echo $X;
                        $this->db->select($X);
                        $this->db->distinct();
                        $qX = $this->db->get($table_by_product);
                        $qX_Array = $qX->result_object();
                    }
                }       
        }
        return array($qX_Array,$qO_Array);
    }
} 
```

所以每个产品都有不同的选项，但所有产品选项都以“X_”或“O_”为前缀。我需要获取`DISTINCT`“X_”和“O_”的每个 COLUMN 的值，并且在任何视图中我需要使用这些值构建一个表单。下面看一下数组：

```
array (size=3)
  0 => 
    object(stdClass)[19]
      public 'X_SIZE' => string '1.75x3' (length=6)
  1 => 
    object(stdClass)[20]
      public 'X_SIZE' => string '1.75x3.5(slim)' (length=14)
  2 => 
    object(stdClass)[21]
      public 'X_SIZE' => string '2x3' (length=3)
array (size=3)
  0 => 
    object(stdClass)[17]
      public 'X_PAPER' => string '14ptGlossCoatedCoverwithUV(C2S)' (length=31)
  1 => 
    object(stdClass)[18]
      public 'X_PAPER' => string '14ptPremiumUncoatedCover' (length=24)
  2 => 
    object(stdClass)[24]
      public 'X_PAPER' => string '16ptDullCoverwithMatteFinish' (length=28)
array (size=2)
  0 => 
    object(stdClass)[23]
      public 'X_COLOR' => string '1000' (length=4)
  1 => 
    object(stdClass)[22]
      public 'X_COLOR' => string '1002' (length=4)
array (size=4)
  0 => 
    object(stdClass)[20]
      public 'X_QTY' => string '100' (length=3)
  1 => 
    object(stdClass)[21]
      public 'X_QTY' => string '250' (length=3)
  2 => 
    object(stdClass)[17]
      public 'X_QTY' => string '500' (length=3)
  3 => 
    object(stdClass)[19]
      public 'X_QTY' => string '1000' (length=4)
array (size=3)
  0 => 
    object(stdClass)[25]
      public 'O_RC' => string 'YES' (length=3)
  1 => 
    object(stdClass)[26]
      public 'O_RC' => string 'NO' (length=2)
  2 => 
    object(stdClass)[27]
      public 'O_RC' => string 'NA' (length=2) 
```

我的电流`MODEL`只是回到我`X_QTY`的`O_RC`视野。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:56:13.510

您只返回每个的最后一个结果对象；即，您正在设置

```
$qO_Array = $qO->result_object(); 
```

到一个变量，它应该是：

```
$qO_Array[] = $qO->result_object(); 
```

得到他们所有人

顺便说一句-您是否有特定原因调用 result_object() 而不是通常的 result() 或 result_array()？这不一定是错的，但我想知道你是否故意这样做？

# asp.net - 在数据库表中存储字节数组的最节省空间的方法 - ASP.NET

> ID：13202578
> 
> 赞同：2
> 
> 时间：2012-11-02T20:25:57.643
> 
> 标签：asp.net, sql, sql-server-2008, compression, sharpziplib

现在我们有一个数据库表（SQL Server 2008 R2），它在图像类型列中存储上传的文件（PDF、DOC、TXT 等）。用户从 ASP.NET 应用程序上传此文件。我的项目是处理这个表的增长大小，并且在此过程中我提出了几个问题。

1.  在数据库方面，我发现图像列类型据说有点贬值？我是否会从切换到 varbinary(max) 获得任何好处，或者我应该说 varbinary(5767168)，因为这是我的文件大小上限，或者我也可以让它保持为图像类型，只要空间效率是担心的？

2.  在应用程序端，我想压缩字节数组。微软内置的 GZip 有时会使文件变大而不是变小。我切换到 SharpZipLib，它好多了，但我仍然偶尔会遇到同样的问题。在我大规模实施之前，有没有办法找出平均文件压缩节省？我很难找出他们使用的底层算法。

3.  是否值得编写我自己的 Huffman 代码算法，或者在压缩文件偶尔比原始文件大的情况下会出现同样的问题？

作为参考，以防万一，这是我的应用程序中的代码：

```
 using ICSharpCode.SharpZipLib.GZip;

    private static byte[] Compress(byte[] data)
    {
        MemoryStream output = new MemoryStream();

        using (GZipOutputStream gzip = new GZipOutputStream(output))
        {
            gzip.IsStreamOwner = false;
            gzip.Write(data, 0, data.Length);
            gzip.Close();
        }
        return output.ToArray();
    }

    private static byte[] Decompress(byte[] data)
    {
        MemoryStream output = new MemoryStream();
        MemoryStream input = new MemoryStream();
        input.Write(data, 0, data.Length);
        input.Position = 0;

        using (GZipInputStream gzip = new GZipInputStream(input))
        {
            byte[] buff = new byte[64];
            int read = gzip.Read(buff, 0, buff.Length);

            while (read > 0)
            {
                output.Write(buff, 0, read);
                read = gzip.Read(buff, 0, buff.Length);
            }

            gzip.Close();
        }
        return output.ToArray();
    } 
```

提前感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:08:00.443

那不是字节数组，那是 BLOB。10 年前，您会使用 IMAGE 数据类型。

现在，使用 VARBINARY(MAX) 效率更高 我真的建议人们使用 FILESTREAM 来处理 VarBinary(Max)，因为它可以很容易地备份数据库（没有 blob）。

请记住，使用本机格式（不压缩）将允许全文搜索。如果您考虑一下，这是非常不可思议的。您必须从 Adob​​e 安装一些 iFilter 才能在 PDF 中进行搜索。但它是一个杀手级功能，我不能没有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:16:57.637

我讨厌成为一个混蛋并回答我自己的问题，但我想我会将我的发现总结为一个完整的答案，以供其他希望在数据库中高效存储文件/图像数据的人使用：

*** 使用 varbinary(MAX) 与 Image？**

使用 varbinary(MAX) 的原因有很多，但其中最重要的是 Image 已被弃用，并且在未来的 SQL 版本中将完全删除它。不使用它开始任何新项目只是将未来的问题扼杀在萌芽状态。

根据这个问题中的信息：[SQL Server table structure for storage a large number of images](https://stackoverflow.com/questions/1820374/sql-server-table-structure-for-storing-a-large-number-of-images)， varbinary(MAX) 有更多的操作可用。

Varbinary(MAX) 很容易通过使用 SQL 参数从 .NET 应用程序流式传输。负数是“MAX”长度。像这样：

```
SQLCommand1.Parameters.Add("@binaryValue", SqlDbType.VarBinary, -1).Value = compressedBytes; 
```

*** 使用什么压缩算法？**

在这个问题上，我真的离一个体面的答案不远了。我使用 ICSharpCode.SharpZipLib.Gzip 并发现它比内置的压缩​​功能具有更好的性能，只需在一堆东西上运行它并进行比较即可。

**我的结果：**

我将总文件大小减少了大约 20%。不幸的是，我拥有的很多文件都是压缩得不好的 PDF，但仍然有一些好处。已经压缩的文件类型（显然）不太幸运。

# php - 如何根据主查询对表中的项目进行计数？

> ID：13202580
> 
> 赞同：0
> 
> 时间：2012-11-02T20:26:00.040
> 
> 标签：php, mysql, pdo

好的，伙计们说我目前正在做这个查询：

```
SELECT `category_id`, `category_name` 
FROM `database_categorys` 
ORDER BY `category_name` ASC 
```

现在我想计算一个名为“database_items”的表中的所有行，其中项目表的类别 ID 等于当前行的类别 ID。

我猜是某种连接或嵌套查询，但我无法用正确的语法来做这件事。

这样在呼应出来时我可以这样做：

```
<category name> <total items in category number> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:29:02.657

```
SELECT c.`category_id`, c.`category_name`, count(i.`category_id`)
FROM `database_categorys` c
LEFT OUTER JOIN `database_items` i on c.`category_id` = i.`category_id`
GROUP BY c.`category_id`, c.`category_name`
ORDER BY c.`category_name` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:30:10.057

我会使用这样的子查询：

```
SELECT 
    `category_id`, `category_name`,
    (SELECT count(1) from database_items i where i.category_id = c.category_id)
FROM `database_categorys` c 
ORDER BY `category_name` ASC 
```

# html - 堆叠 s 水平

> ID：13202582
> 
> 赞同：0
> 
> 时间：2012-11-02T20:26:01.403
> 
> 标签：html, css

我已经设置了 JsFiddle[示例](http://jsfiddle.net/AJNym/)

```
<div id="fsUploadProgress">
   <div class="progressWrapper" id="SWFUpload_0_2" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0144111111111111111.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_2_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_3" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0145.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_3_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_2" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo01441111.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_2_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_3" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0145.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_3_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_2" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0144111111.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_2_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_3" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0145.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_3_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_2" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0144.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_2_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_3" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0145.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_3_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_2" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0144.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_2_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
   <div class="progressWrapper" id="SWFUpload_0_3" style="opacity: 1; ">
      <div class="progressContainer blue">
         <a class="progressCancel" href="#" style="visibility: hidden; "> </a>
         <div class="progressName">Photo0145.jpg</div>
         <div class="progressBarStatus">Complete.</div>
         <div class="progressBarComplete" style=""></div>
         <div id="SWFUpload_0_3_deleteDiv" class="remove" style="text-align: right; ">
            <a href="javascript:void(0);">x</a>
         </div>
      </div>
   </div>
</div> 
```

如果您在示例中看到有时它部分显示在一行中，其余部分显示下一行，我希望所有类“progressContainer”的 Div 应该完全显示在一行中。

对不起，我是css的新手，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:38:19.467

添加`.progressWrapper`

```
margin-right:auto;
float:left; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:39:09.787

与其将 div 设置为 ，不如`display:inline;`将它们设置为`display: inline-block;`，它们将开始表现。你需要调整你的宽度等来品尝。享受。

比浮动更好，除非您需要支持旧版本的 IE。

# memory - 应用程序占用太多内存直到崩溃！（苹果手机）

> ID：13202583
> 
> 赞同：0
> 
> 时间：2012-11-02T20:26:12.183
> 
> 标签：memory, xcode4, uiviewcontroller, uiimageview, xcode-instruments

我是开发的初学者，我正在制作一个有大约 150 个 ViewControllers 的应用程序！每个都有一个 UIImageView。

我一直在做一些测试，在 iPhone 上使用该应用程序一段时间后，当我继续查看 ViewControllers 时它会崩溃。

我一直在仪器中对此进行分析，并且没有泄漏，但是我的内存分配不断增加，当我继续在 iPhone 上查看 ViewControllers 时，使用量只会不断增加直到崩溃。

我认为很明显它正在崩溃，因为该应用程序只是占用了太多内存。

那么任何人都可以解释如何释放视图控制器以释放内存，这样就不会发生崩溃

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:10:08.123

您需要问自己的第一个问题是为什么需要 150 个 ViewController。您想呈现 150 张不同的图像吗？如果是这样，那么多个 ViewControllers 不是要走的路。您可能需要使用包含您的图像的 UIScrollView（当然，不是所有的图像。使用延迟加载）。

在您的情况下可能发生的情况是每次需要显示新的 ViewController 时都调用“pushViewController”，但这不会释放以前的 ViewController。它只是简单地堆叠所有以前的 ViewController 并保留它们的指针。

你看，导航控制器的工作方式是它们有一个视图控制器数组。每次你呈现一个新的视图控制器时，它都会被添加到数组的末尾。当您单击“返回”或调用“popViewController”时，数组的最后一项被删除（然后自动从内存中释放）。

请参阅[此](https://stackoverflow.com/questions/7304947/xcode-uiscrollview-and-pagination)问题和[此](https://stackoverflow.com/questions/13122199/array-of-images-display-in-uiscrollview-and-paging-successfully-but-can-not-prop)问题以了解如何创建 UIScrollView 以滚动图像。

# ruby-on-rails - 订票引擎导轨

> ID：13202585
> 
> 赞同：0
> 
> 时间：2012-11-02T20:26:21.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我正在尝试设置一个 Rails 应用程序来处理电子场地的票务预订系统。有人对架构、宝石或一般方法有任何建议吗？将不胜感激的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:44:31.723

Are you already know RoR yet? If not, try this tutorial [Rails turotial](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book), then you can build your application, because only you know what you need, so keep learning and building and if you have trouble or problem then go to stackoverflow and ask, so people can help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T19:03:04.703

到目前为止，我只找到[了这个](https://github.com/zendesk/zendesk_api_client_rb)通过它的 API 与 Zendesk 站点集成的

# java - 按下恢复时JFrame非常小

> ID：13202593
> 
> 赞同：2
> 
> 时间：2012-11-02T20:27:00.060
> 
> 标签：java, swing, jframe

我的问题是为什么当我按下*恢复时*（在 Windows 平台上）`JFrame`它非常小（见下面的截图）。

我使用有关JFrame*状态的代码：*

```
this.setExtendedState(View.MAXIMIZED_BOTH); 
```

我需要用`setMinimumSize()`吗？

![在此处输入图像描述](../Images/d900d75e72423780ade00fc203724842.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:22:07.710

确保在**AFTER 之后**`this.setExtendedState(JFrame.MAXIMIZED_BOTH)`执行。此外，如果您有电话，请确保它在电话**之后**执行。 **`setVisible(true)``setResizable(false)`**`setExtendedState()`****

 ***** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T11:03:40.313

我想没有人理解他的问题。他不想最大化它，他希望当他按下“Restore Down”时，窗口不会变得那么小。因此，您需要做的是，“向下还原”将窗口恢复到按下“最大化”之前的先前大小。

所以我做的是这个

```
int Width = (int) java.awt.Toolkit.getDefaultToolkit().getScreenSize().getWidth();
int Height = (int) java.awt.Toolkit.getDefaultToolkit().getScreenSize().getHeight();
this.setSize(Width-100,Height-100);
this.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

因此，每次按下“Restore Down”时，第一次，尺寸将是屏幕尺寸 - 宽度和高度均为 100 像素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T21:14:57.180

什么课`View`？

如果您尝试将`JFrame`大小设置为最大值，请执行此操作（注意我使用了`JFrame`类中可用的静态变量而不是`View`）：

```
JFrame frame=...;
frame.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T03:04:46.080

由于这是我的问题的第一个也是最准确的问题，我将在这里添加我发现的内容。我知道它已经 3 岁了，但我的回答可能会在未来对某人有所帮助。我的问题和上面一样。当我构建我使用的 Jframe 时：

```
frame.setExtendedState(java.awt.Frame.MAXIMIZED_BOTH); 
```

当我单击“还原”按钮时，窗口非常小，位于屏幕的左上角。我通过调用解决了这个问题：

```
frame.setBounds(100, 100, 450, 300); 
```

在 setVisible(true) 之后。这是我编辑后的代码，原始代码是使用 Eclipse WindowBuilder 创建的。我只是在编辑它之后。下面是完整的代码：

```
public class MainWindow extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MainWindow frame = new MainWindow();
                    frame.setVisible(true);
                    frame.setBounds(100, 100, 450, 300);
                    frame.setExtendedState(java.awt.Frame.MAXIMIZED_BOTH);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public MainWindow() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //setExtendedState(java.awt.Frame.MAXIMIZED_BOTH);
        //setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
    }

} 
```

基本上在 Jframe 变得可见之后发生了什么（据我所知），它首先设置为 450x300 的大小，然后立即将大小更改为最大化。现在，当您按下还原按钮时，它会将其设置为 450x300 大小。我目前正在寻找一种方法来覆盖用于将窗口大小设置为以前大小的方法（在达到最大值之前），但我还没有到需要询问的地步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-06T10:02:00.923

```
 appFrame = new JFrame("BufferedImage layers");
    Dimension asRestoredDown = new Dimension(400,400);//first time restored
    appFrame.setMinimumSize(asRestoredDown);
    appFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    appFrame.setExtendedState(appFrame.getExtendedState() | JFrame.MAXIMIZED_BOTH); 
```****

# javascript - Telerik 列表框，长无序的 HTML 列表，使用 javascript 跳转到值

> ID：13202596
> 
> 赞同：0
> 
> 时间：2012-11-02T20:27:12.773
> 
> 标签：javascript, telerik, html-lists

我有一个很大的无序列表（超过 400 项）。该列表出现在 Telerik 的可滚动列表框中（我不确定这是否重要）。

我希望用户在文本框中输入一个值。如果他们在文本框中键入的值在无序列表中，我想使用 Javascript 跳转到该项目。浏览器中的 HTML 是这样的——

```
<ul class=​"MyList">​
    <li id=​"id1">​
        <span>item 1​&lt;/span>​
    </li>​
    <li id=​"id2">​
        <span>item 2​&lt;/span>​
    </li>​
    <li id=​"id3">​
        <span>item 3</span>​
    </li>​

...

    <li id=​"id499">​
        <span>item 499</span>​
    </li>​
</ul>​ 
```

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:31:02.297

您可能正在寻找[自动完成](http://www.telerik.com/help/silverlight/radcombobox-features-autocomplete.html)功能。

> 自动完成是许多浏览器、程序和控件提供的功能。它涉及程序预测用户想要输入的单词或短语，而无需用户实际完全输入。RadComboBox 具有完整的自动完成支持 - 当您在输入区域中键入时，组合框会返回当前键入文本的相对匹配。

# java - 比较两个不同 List 中的元素，它们是不同的对象

> ID：13202598
> 
> 赞同：1
> 
> 时间：2012-11-02T20:27:36.440
> 
> 标签：java

我将发布我的代码，但只需更改名称。当我可以添加更多信息时，我会添加评论。

```
List<AbstractA> foo = bar.getFoo; // This returns an ArrayList<E> with two objects. Each object has an ID and Price. 

List<Name> names = null;
try{
   names = someClass.getNames(); // This returns an ArrayList<E> with 10 Name objects. Each one has an ID, name, description
}catch(Exception e){
   Log.warn(e);
} 
```

我的主要目标是比较这两个列表。我有...

```
Iterator<Name> object = names.iterator();
while(object.hasNext()){
   Name j = object.next(); // assign next name
   System.out.println("j.getId(): " + j.getId()); // This provides me the Id
   System.out.println("foo.contains(j.getId()) " + foo.contains(j.getId())); // Keeps spitting out false but I want it to be true

   if(foo.contains(j.getId())){
      object.remove(); //remove name out of Names list
   }
} 
```

我不确定这是否对我正在尝试做的事情有很大的意义。这个程序中有两个 bean 代表 foo 和 name。所以它们是不同的对象，我认为这可能是问题所在。

有什么建议么？对不起，如果这很模糊......

我的主要问题是，如果我想比较这两个列表中的一个元素，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:32:34.063

[List.contains(...)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)使用[equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)进行比较：

> 更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。

equals() 不需要两个对象是同一个类，所以你可以像这样覆盖它：

```
class Name {

    // Stuff

    @Override
    bool equals(Object other) {
        if(other instanceof Name) {
            Name otherName = (Name)other;
            // Compare this and otherName, return true or false depending
            // on if they're equal
        } else if (other instanceof AbstractA) {
            AbstractA otherAbstractA = (AbstractA)other;
            // Compare this and otherAbstractA, return true or false depending
            // on if they're equal
        } else {
            return false;
        }
    }
} 
```

您可能希望为两者都覆盖 equals()，以便 a.equals(b) == b.equals(a)。

如果您发现自己经常这样做，那么他们都实现的抽象类可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:35:17.543

> foo.contains(j.getId()))

`foo`是`List<AbstractA>`并且`j.getId()`是（我猜） a `String`。由于[`List.contains`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)使用该方法，除非您以奇怪的方式定义，否则`equals`永远不会。`true``AbstractA.equals`

最好的办法是编写自己的方法来遍历列表并进行比较。您可以使用`Guava`，但仅此而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:33:41.830

您可能想要两个地图而不是列表。

对于`foo`：

```
key: id
value: Object of AbstractA 
```

对于`names`：

```
key: id
value: Name object 
```

然后您可以比较密钥（在您的情况下为 id）

我希望我对你的理解是正确的。

# android - Android 和 SQLite：何时使用分号结束语句？

> ID：13202600
> 
> 赞同：13
> 
> 时间：2012-11-02T20:27:43.180
> 
> 标签：android, sqlite

如果你在 Android 上使用 SQLite 的`rawQuery()`or`execSQL()`方法，你应该在什么时候使用分号来结束你的语句？

例如，在[本教程](http://www.vogella.com/articles/AndroidSQLite/article.html)中，作者在 create table 语句（通过 execSQL）上使用了分号，但在 select 语句（通过 rawQuery）上没有使用。例如：

创建表语句：

```
private static final String DATABASE_CREATE = "create table "
      + TABLE_COMMENTS + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_COMMENT
      + " text not null);";
database.execSQL(DATABASE_CREATE); 
```

选择语句：

```
Cursor cursor = getReadableDatabase().
  rawQuery("select * from todo where _id = ?", new String[] { id }); 
```

是否使用该`execSQL()`方法的语句末尾需要分号，但使用该`rawQuery()`方法的语句不需要？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T20:30:51.290

SQLite 语句以分号 ( `;`) 结束。如果指定了一个，则表示它是命令的结尾，并且该分号后面可以有更多命令。如果未指定分号，则将整个字符串视为命令。

在这种情况下，`CREATE`语句中的分号无关紧要，因为它后面没有任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T20:31:37.337

我从来没有在两者中使用过分号并且它有效

# javascript - $('#email').submit() 不工作

> ID：13202603
> 
> 赞同：0
> 
> 时间：2012-11-02T20:27:58.733
> 
> 标签：javascript, modal-dialog

> **可能重复：**
> [提交不是javascript中的函数](https://stackoverflow.com/questions/833032/submit-is-not-a-function-in-javascript)
> [如何使用JS提交表单](https://stackoverflow.com/questions/12876293/how-to-submit-form-using-js)

我有一个联系表单，用户点击提交时应该发生的事情，打开一个对话框，他们点击确定，然后表单提交。但是，当您单击确定时，它只是关闭对话框并且不提交表单。您可以前往[此处](http://mcgehee.ace-onecomputers.com/)测试代码。

Javascript/jQuery: //

```
function go_there(){

    $.prompt('<b>DISCLAIMER</b> <span style="font-weight:normal">TEXT WILL GO HERE</span>',{
       buttons: { Ok: true, Cancel: false}, 
       callback: function(e,v,m,f){
          if(v){

                 $('#email').submit()

          }else{

          }
       }
   });

}

//]]>  

</script> 
```

HTML：//

```
<form method="post" action="nlphpmail.php" id="email">
            <input type="hidden" name="subject" id="subject" value="Feedback form" />
                <fieldset>
                    <div class="formfield">
                        <label class="text title" for="contact_who">Name</label>
                        <input type="text" class="text required" name="contact_who" id="contact_who" value="">
                    </div><!-- /.formfield -->
                    <div class="formfield">
                        <label class="text title" for="contact_sendto">Email address</label>
                        <input type="text" class="text required email" name="contact_sendto" id="contact_sendto" value="">
                    </div><!-- /.formfield -->
                    <div class="formfield">
                        <label class="text title" for="contact_phone">Phone</label>
                        <input type="text" class="text required" name="contact_phone" id="contact_phone" value="">
                    </div><!-- /.formfield -->
                    <div class="formfield">
                        <label class="text title" for="contact_message">Message</label>
                        <textarea name="contact_message" class="required" id="contact_message"></textarea>
                    </div><!-- /.formfield -->
                </fieldset>
                <div class="formfield">
  <button class="button" id="submit" value="send" type="button" name="submit" onClick="go_there();">Send</button>
                </div>
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:40:33.340

让“提交”按钮成为一个`input type="button"`而不是`input type="submit"`. 将 onclick 添加到实际提交表单的“确定”按钮。此外，正如 Musa 所提到的，不要设置任何 id 为“提交”的东西。

# objective-c - 在 UITableViewCell 中自定义绘制 UIView

> ID：13202605
> 
> 赞同：1
> 
> 时间：2012-11-02T20:28:11.687
> 
> 标签：objective-c, ios5

我有一个修改后的 UIView，用于显示富文本 (NSAttributedString)。我正在将 UIView 添加到我的 UITableViewCell 并且正在执行 drawRect。我重写了该方法以显示文本。

问题是在第 3 行它写了我想要的文本，但在它下面的旧文本仍然存在。

所有其他细胞也是如此。

如何清除每个单元格的 UIView？

这是我的drawrect

```
- (void)drawRect:(CGRect)rect
{
   [super drawRect:rect];
   CGContextRef context = UIGraphicsGetCurrentContext();
   CGContextClearRect(context, self.bounds);
   CGContextSetTextMatrix(context, CGAffineTransformIdentity);
   CGContextTranslateCTM(context, 0, self.bounds.size.height);
   CGContextScaleCTM(context, 1.0, -1.0);

   CGMutablePathRef path = CGPathCreateMutable(); //1
   CGPathAddRect(path, NULL, self.bounds );

   CTFramesetterRef framesetter =
   CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)self.attString); 

   CTFrameRef frame =

   CTFramesetterCreateFrame(framesetter,

                         CFRangeMake(0, [self.attString length]), path, NULL);

   CTFrameDraw(frame, context); //4
   CFRelease(frame); //5
   CFRelease(path);
   CFRelease(framesetter);

} 
```

这是我在 cellforrowatindexpath 中添加它的方式：

```
 NSAttributedString* attrString = [p attrStringFromMarkup:[NSString stringWithFormat:@"%@%@ %@%@ %@%@", @"<font color=\"black\">", userName, @"<font color=\"gray\">",actionType,  @"<font color=\"black\">", object]];
CGRect rect = CGRectMake(0, 0, 249, 50);
CTView *aView = [[CTView alloc]initWithFrame:rect];
[aView setBackgroundColor:[UIColor clearColor]];
[(CTView*)aView setAttString: attrString];
[cell.feedView addSubview:aView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:46:55.767

您应该在创建 UITableViewCell 后只创建一次 CTView，然后将其与单元格一起使用。否则，您将多次将 CTView 添加到同一个单元格。

代码应如下所示：

```
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
   cell = [[MyTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

   CGRect rect = CGRectMake(0, 0, 249, 50);
   CTView *aView = [[CTView alloc]initWithFrame:rect];
   [aView setBackgroundColor:[UIColor clearColor]];
   [aView setTag:kCTViewTag];
   [cell.feedView addSubview:aView];
}

// Configure the cell...
 NSAttributedString* attrString = [p attrStringFromMarkup:[NSString stringWithFormat:@"%@%@ %@%@ %@%@", @"<font color=\"black\">", userName, @"<font color=\"gray\">",actionType,  @"<font color=\"black\">", object]];

CTView* view = (CTView*)[cell viewWithTag:kCTViewTag];
[view setAttString:attrString]; 
```

该`setAttString`方法应该调用`[self setNeedsDisplay]`.

# iphone - 如果应用程序在多任务处理中关闭，有什么方法吗？

> ID：13202607
> 
> 赞同：0
> 
> 时间：2012-11-02T20:28:23.267
> 
> 标签：iphone, objective-c, ios

有没有类似的方法：wasTerminated 或类似的方法？如果他已完全关闭应用程序的多任务处理，我想向用户显示警报表。目前我已经在 中实现了我的代码`DidEnterBackround`，但是还有其他方法可以解决这个问题吗？这对我来说非常有用。

对不起，我是新手，我没有在网上找到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:40:32.043

后台应用程序可以随时终止，应用程序无法判断它是由用户（通过多任务切换器）还是由系统终止的。

您唯一的通知是 –applicationDidEnterBackground:、–applicationWillEnterForeground: 和 –application:didFinishLaunchingWithOptions:。通过这些通知，您可以判断某个后台任务是否已完成，但您无法判断您的应用程序是如何终止的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:31:18.873

您想在用户下次启动您的应用程序时，还是在应用程序被终止时向用户显示消息。如果应用程序是通过双击主页按钮并杀死它而被杀死的，如果你想找出它，那是不可能的。

但是如果应用程序被杀死并且用户再次启动应用程序，那么您将知道应用程序是重新启动还是激活。

方法

```
-(void)applicationWillEnterForeground:(UIApplication *)application{
NSLog(@"Entering foreground"); 
```

}

如果它从后台变为活动状态，将被调用。

除此以外，

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
} 
```

将在您可以放置​​警报视图的位置调用。

您可以轻松地尝试这些情况并找出一种方法来做您想做的事。

# exception - 如何正确处理这些异常？

> ID：13202615
> 
> 赞同：0
> 
> 时间：2012-11-02T20:28:44.603
> 
> 标签：exception, testing, junit, exception-handling

在以下方法中，我需要处理是否传入了 null 但我不确定如何处理。我该如何处理，这样这个方法才能通过 JUnit 测试？

```
 public Album(String name) {

     if(name==null){

        // what do I do here?
     }
     this.name = name;
     this.images = new ArrayList<Image>();

     } 
```

在这种方法中，如果传入的索引为负数或大于它从中获取的数组列表的大小，我该如何处理？

```
 public Image getImage(int index) {
    if (index < 0 || index > images.size()) {

          // how to handle here?

    }
        return images.get(index);

} 
```

我已经为这两种方法尝试了各种方法，但这些方法一直未能通过 JUnit 测试。谢谢你能给我的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:39:51.790

```
if(name==null){
     throw new IllegalArgumentException("name");
} 
```

虽然我个人认为直接投掷没有任何问题`NullPointerException`。

```
if (index < 0 || index > images.size()) {
  throw new ArrayIndexOutOfBounds(index);
} 
```

但你知道吗？`images.get(index)`也会扔掉它，所以不要先检查它。更少的代码阅读和测试。事实上，你已经犯了一个错误。您的先决条件将`index`等于`images.size()`。应该有的`index >= images.size()`。

# c# - 检查记录列是否有一些特殊值

> ID：13202621
> 
> 赞同：1
> 
> 时间：2012-11-02T20:29:23.553
> 
> 标签：c#, asp.net, sql

我想检查某些字段是否具有某些唯一值 - 例如，我想检查表中的 field1、field2 是否具有“YES”值。如果它们都具有“是”，那么我想调用某个函数，但如果其中一个具有“否”值，那么我想调用其他函数。请注意，在我的 select 语句中，我从查询字符串中传递了一个 ID。我怎样才能做到这一点？

```
protected void Check_ItemUpdated(object sender, DetailsViewUpdatedEventArgs e) {
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELECT ID, Field1, Field2 from MyTabel WHERE ID = '" + Request.QueryString["ID"] + "'", con);
    DataTable dt = new DataTable();
    da.Fill(dt);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:46:51.313

如果您只需要确定给定记录中**是否**存在一组特定**的条件**，那么我建议您在数据库端进行此检查，然后使用`ExecuteScalar`来获取结果：

```
using(SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString))
{
    using(SqlCommand cmd = new SqlCommand("SELECT count(*) from MyTabel WHERE ID =@ID And (Field1='Yes' And Field2='Yes')" , con))
    {
        cmd.parameters.Add("@ID",Request.QueryString["ID"]);

        con.open();

        int result = cmd.ExecuteScalar();

        con.close();

        if(result == 1)
            // condition exists
            // so call success function
        else
            // call failure function
    }
} 
```

*更新：*

这可能与问题没有直接关系，但要从中获取记录 ID `detailsView`，您需要执行 2 个步骤：

1.  将 的`datakeynames`属性设置为`detailsView`表的主键名称 - 在本例中为`ID`.

    ```
    <asp:detailsview datakeynames="ID" 
    ```

2.  现在您可以通过以下方式访问选定的 ID

    ```
    int id = (int)detailsView.SelectedValue; 
    ```

在这里查看更多[信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.selectedvalue.aspx)。

# .htaccess - 如何添加指向根目录外文件夹的子域.htaccess

> ID：13202622
> 
> 赞同：1
> 
> 时间：2012-11-02T20:29:23.427
> 
> 标签：.htaccess, dns

我想要一个指向普通公共根文件夹之外的文件夹的子域。

```
httpdocs/
sub_dom/ 
```

所以说“admin.domain.com”指向“sub_dom”，而“domain.com”指向常规的httpdocs文件夹。

1.  这可能吗
2.  是否有更好的解决方案（例如，以另一种方式做会更好/更可取）

目前 htaccess 文件包含这个，但它似乎没有做的伎俩：

```
RewriteCond %{HTTP_HOST} ^admin\.domain\.com$
RewriteRule ^/(.*) /var/www/vhosts/domain.com/sub_dom/admin/ [redirect,last] 
```

第二行很可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:04:35.727

> 这可能吗

它在虚拟主机或服务器配置中。`/sub_dom/`除非您已经可以通过常规域访问该目录，否则无法使用 htaccess 文件。您无法使用 htaccess 文件访问*文档根目录之外的任何目录。*

> 是否有更好的解决方案（例如，以另一种方式做会更好/更可取）

正确的做法是创建一个新的虚拟主机。您的旧虚拟主机应该具有类似这样的服务器名称：

```
ServerName domain.com
ServerAlias www.domain.com 
```

在您的新虚拟主机中，您有：

```
ServerName admin.domain.com 
```

还有一个：

```
DocumentRoot /path/to/sub_dom/ 
```

[Apache 文档有一个设置 vhosts 的](http://httpd.apache.org/docs/2.2/vhosts/examples.html)教程。

或者，您可以从常规域创建别名，例如：

```
Alias /sub_dom /path/to/sub_dom 
```

然后您可以在 domain.com 文档根目录 (httpdocs) 中使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^admin\.domain\.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/sub_dom%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/sub_dom%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/sub_dom%{REQUEST_URI} -s
RewriteRule ^ /sub_dom%{REQUEST_URI} [L] 
```

但是，你也可以直接搬进`/sub_dom/`去`httpdocs`，它会达到同样的效果。

# tfs - 如何使用 MiniProfiler 在 TFS 2010 中构建 MVC4 项目？

> ID：13202626
> 
> 赞同：1
> 
> 时间：2012-11-02T20:29:42.587
> 
> 标签：tfs, msbuild, asp.net-mvc-4, mvc-mini-profiler

我有一个在 TFS 中构建的 ASP.NET MVC4 项目。由于将 MiniProfiler 添加到项目中，构建失败如下：

```
CA0001 : The following error was encountered while reading module 'MiniProfiler': 
Assembly reference cannot be resolved: System.Web.Mvc, Version=3.0.0.0, 
Culture=neutral, PublicKeyToken=31bf3856ad364e35.

CA0058 : The referenced assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35' could not be found. This assembly is required for 
analysis and was referenced by: D:\Builds\...\my.dll, 
D:\...\packages\MiniProfiler.2.0.2\lib\net40\MiniProfiler.dll. 
```

DotPeek 向我展示 MiniProfiler 确实引用了 System.Web.Mvc 版本 3.0.0.0

有没有人遇到过这个问题？有解决办法吗？

我会在构建服务器上安装 MVC3，但是我没有管理员权限。下周有人可以为我做，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:58:44.397

造成这种情况的原因实际上是代码分析。我们将分析设置为在构建时运行，并且构建服务器由于某种原因在分析期间无法加载所需的程序集。我仍然不确定根本原因，但关闭代码分析解决了这个问题。

# time-series - 有没有办法总结很多时间序列的特征？

> ID：13202629
> 
> 赞同：0
> 
> 时间：2012-11-02T20:30:04.360
> 
> 标签：time-series

我实际上是在尝试检测由许多较小的子区域（在我的情况下为像素）组成的一个非常大的区域的时间序列特征。我对此了解不多，所以我能想出的唯一方法是整个区域的平均时间序列，尽管我知道这肯定会通过平均来隐藏许多特征。

我只是想知道是否有任何广泛使用的技术可以检测一组时间序列的共同特征？像模式识别或时间序列分类？

非常感谢任何想法/建议！

谢谢！

一些额外的解释：我正在处理几年的遥感图像，时间步长为 7 天。所以对于每个像素，都有一个相关的时间序列，在不同的日期从这个像素中提取值。所以如果我定义一个由许多像素组成的区域，有没有办法检测或提取一些共同特征来表征所有或大部分该区域内像素的时间序列？例如时间序列的形状，或者值明显增加的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:14:41.393

您可以计算像素的相关矩阵。这只是：

```
corr = np.zeros((npix,npix))
for i in range(npix):
    for j in range(npix):
        corr(i,j) = sum(data(i,:)*data(j,:))/sqrt(sum(data(i,:)**2)*sum(data(j,:)**2)) 
```

如果您想要更多信息，您可以将其计算为时间的函数，即将您的时间序列划分为块（例如分钟）并计算每个块的相关性。然后您可以看到相关性如何随时间变化。

如果相关性变化很大，您可能对像素的互功率谱更感兴趣。这被定义为

```
cpow(i,j,:) = (fft(data(i,:))*conj(fft(data(j,:))) 
```

这将告诉您有多少像素`i`并`j`倾向于在不同的时间尺度上一起变化。例如，它们可以在一秒 (1 Hz) 的时间尺度上一致移动，但也可以在 10 秒的时间尺度上发生变化，这些变化彼此不相关。

这一切都取决于你需要什么，真的。

# java - 如何从 Servlet 中获取 JSP 页面的内容？

> ID：13202640
> 
> 赞同：0
> 
> 时间：2012-11-02T20:31:09.963
> 
> 标签：java, jsp, servlets

我需要从 servlet 获取 jsp 页面的内容，而无需重定向或转发，例如用于安全问题的文件，我将处理 HTML 并将新生成的 HTML 写入 servlet 响应中。我怎样才能做到这一点？

我正在尝试做的一个例子：

```
if (request.getParameter("pageName").equals("index")) {
    //get index.jsp content and process it...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:44:52.387

您不能在 servlet 中执行此操作，但您可以在过滤器中的 doFilter 方法中执行此操作。您需要为响应对象提供一个包装器，就像他们在[此处](http://onjava.com/pub/a/onjava/2003/11/19/filters.html)所做的那样。

# arrays - 将数组（由“表”生成）转换为 r 或 s-plus 中的数据框

> ID：13202641
> 
> 赞同：0
> 
> 时间：2012-11-02T20:31:11.460
> 
> 标签：arrays, r

我正在尝试将由“表”函数生成的数组转换为函数内的普通数据框。我试过了`as.data.frame`，得到了`is.data.frame=TRUE`。但是，该对象仍然是一个带有额外暗淡的数组。当我将它与数据框合并时，这会导致问题，并且我最终会得到具有数组维度的数据框的单列。如何将对象强制转换为简单的数据框？额外的暗淡仅包含行名。我尝试将 rownames 设置为 null 无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:41:32.020

如果您可以提供一个可重复的示例，将会有所帮助，但我之前也遇到过这个问题。有很多解决方案，没有一个是完美的。

```
DF <- as.data.frame(as.matrix(table(whatev))) ## makes a data frame w/ one column
                                              ## and rownames = names(table)
DF$V2 <- rownames(DF)            ## or as.numeric(rownames(DF)) if you want
rownames(DF) <- NULL             ## no need for them anymore 
```

还

```
DF <- data.frame(V1 = as.vector(names(table(whatever))), V2 = as.numeric(table(w.e)) 
```

# c++ - 避免虚拟调用循环的模式

> ID：13202642
> 
> 赞同：0
> 
> 时间：2012-11-02T20:31:27.543
> 
> 标签：c++, design-patterns

在我的游戏中，我通常让每个 NPC / 物品等都派生自一个基类“实体”。然后他们基本上都有一个名为“更新”的虚拟方法，我会在每一帧为我的游戏中的每个实体分类。我假设这是一个有很多缺点的模式。还有哪些其他方法可以在整个游戏中管理不同的“游戏对象”？还有其他众所周知的模式吗？我基本上是在寻找比从基类派生的所有东西更好的模型，这将跨越一个巨大的继承树和无处不在的虚函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:44:25.480

There is another pattern that involves inheriting for behaviour instead.

For example: A sword (in a fantasy-styled game) could inherit from `Describable` to make it being able to be described to the player; It will also inherit from `DoDamage` which handles passing out damage; It further inherits from `Grabable` so the player can "grab" it.

A piece of armour in turn could inherit from `DamageReduction` to lower damage given, as well as `Wearable` so the player could wear it.

Instead of a big and deep inheritance tree, you get many smaller and shallower inheritance trees. The drawback is of course that you have to create lots of classes, and think about the different behaviour and events that can happen.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:27:01.777

让您的对象在未来的某个时间点请求更新。

```
struct UpdateToken {
  UpdateToken() {}
  /* ... */
};
class Updater {
  // ...
  struct UpdateEntry
  {
    UpdateToken token;
    Time when;
    bool repeats;
    Time frequency
    std::function<void()> callback;
  };
  // Various indexes into a collection of UpdateEntries
  // sorted by when and by token so you can look up both ways quickly
public:
  UpdateToken RegisterUpdate( Time t, std::function<void()> callback ); // once after time t
  UpdateToken RegularUpdate( Time t, std::function<void()> callback ); // every time t

  void UnregisterUpdate( UpdateToken );
};
Updater* GetUpdater();

// use:
class Foo
{
  UpdateToken token;

  void DoUpdate()
  {
    std::cout << "I did it!\n";
  }

  void PlanRepeatingUpdate( Time t )
  {
    if (!GetUpdater())
      return;
    if (token.valid())
      GetUpdater()->UnregisterUpdate(token);
    token = GetUpdater()->RegularUpdate( t, [&]()->void
    {
      this->DoUpdate();
    });
  }
  ~Foo() { if (token.valid() && GetUpdater()) GetUpdater()->UnregisterUpdate(token); }
}; 
```

这里我们有一个未来事件的来源（Updater()）和 j 个随机类 Foo，它可以在其中注册一个回调以进行一次重复或一系列重复。

您可以在 0.1 秒、1 秒或 1 小时内请求更新。如果您碰巧被销毁，或者不希望更新，您可以取消注册它，它永远不会到达。

Updater 需要付出一些努力，以便它既可以快速找到下一个要调用的事件，又可以通过令牌找到更新。我见过一个 Boost 双索引容器，或者您可以通过拥有一个主要的 std::set （或无序集）和第二组迭代器来手动处理它，这些迭代器具有唯一的排序，您可以管理小心（您必须注意是什么使迭代器无效，并确保迭代器集不包含任何无效内容）。

上面还有效地使用了全局 Updater() 实例，这通常并不理想。

# html - 使用具有显式基础的相对 url 是一种不好的做法吗？

> ID：13202643
> 
> 赞同：2
> 
> 时间：2012-11-02T20:31:28.060
> 
> 标签：html, url, url-rewriting, relative-url

对动态站点使用具有显式基础的相对 url 是一种不好的做法吗？

例如，像这样一个：

```
<base href="http://my-site.com/mount-point-of-site">
...
<img src='/my-page/my-image.jpg'></img> 
```

我需要它，因为站点的挂载点可能会随着时间的推移而更改，并且我需要保持用户生成的类似 wiki 的内容的引用完整性（指向相关页面的链接、相对图像路径……）。

但我从未见过将这种技术用于动态 Web 应用程序，通常它是在服务器端处理的。

这种技术有什么特定的缺点，以后可能会咬我吗？SEO，跨浏览器/移动兼容性，其他一些方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:42:35.347

I get what you're saying about applications not using absolute urls. You'll typically set the base url in a config file, not as a meta tag in that instance.

Best practice? Always use absolute urls incase anyone links to your stuff, or scrapes your links, things will still point to your site instead of their site.

SEO folks will agree with the absolute url rule.

# python - 如何将 Unicode 字符串作为参数传递给 urllib.urlencode()

> ID：13202649
> 
> 赞同：0
> 
> 时间：2012-11-02T20:31:47.450
> 
> 标签：python

我正在使用 Microsoft 的免费翻译服务将一些印地语字符翻译成英语。他们没有为 Python 提供 API，但我从以下网站借用了代码：t​​inyurl.com/dxh6thr

我正在尝试使用此处描述的“检测”方法：tinyurl.com/bxkt3we

'hindi.txt' 文件以 unicode 字符集保存。

```
>>> hindi_string = open('hindi.txt').read()
>>> data = { 'text' : hindi_string }
>>> token = msmt.get_access_token(MY_USERID, MY_TOKEN)
>>> request = urllib2.Request('http://api.microsofttranslator.com/v2/Http.svc/Detect?'+urllib.urlencode(data))
>>> request.add_header('Authorization', 'Bearer '+token)
>>> response = urllib2.urlopen(request)
>>> print response.read()
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">en</string>
>>> 
```

响应显示翻译器检测到“en”，而不是“hi”（用于印地语）。当我检查编码时，它显示为“字符串”：

```
>>> type(hindi_string)
<type 'str'> 
```

作为参考，这里是 'hindi.txt' 的内容：

```
हाय, कैसे आप आज कर रहे हैं। मैं अच्छी तरह से, आपको धन्यवाद कर रहा हूँ। 
```

我不确定使用 string.encode 或 string.decode 是否适用于此。如果是这样，我需要从/到编码/解码什么？将 Unicode 字符串作为 urllib.urlencode 参数传递的最佳方法是什么？如何确保将实际的印地语字符作为参数传递？

谢谢你。

** 附加信息 **

我尝试按照建议使用 codecs.open() ，但出现以下错误：

```
>>> hindi_new = codecs.open('hindi.txt', encoding='utf-8').read()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\codecs.py", line 671, in read
    return self.reader.read(size)
  File "C:\Python27\lib\codecs.py", line 477, in read
    newchars, decodedbytes = self.decode(data, self.errors)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xff in position 0: invalid start byte 
```

这是 repr(hindi_string) 输出：

```
>>> repr(hindi_string)
"'\\xff\\xfe9\\t>\\t/\\t,\\x00 \\x00\\x15\\tH\\t8\\tG\\t \\x00\\x06\\t*\\t \\x00
\\x06\\t\\x1c\\t \\x00\\x15\\t0\\t \\x000\\t9\\tG\\t \\x009\\tH\\t\\x02\\td\\t \
\x00.\\tH\\t\\x02\\t \\x00\\x05\\t'" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:18:40.300

您的文件是`utf-16`，因此您需要在发送内容之前对其进行解码：

```
hindi_string = open('hindi.txt').read().decode('utf-16')
data = { 'text' : hindi_string.encode('utf-8') }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:42:01.687

您可以尝试使用以下方法打开文件`codecs.open`并对其进行解码`utf-8`：

```
import codecs

with codecs.open('hindi.txt', encoding='utf-8') as f:
    hindi_text = f.read() 
```

# java - compareTo() 方法如何比较字符串？

> ID：13202650
> 
> 赞同：3
> 
> 时间：2012-11-02T20:31:53.003
> 
> 标签：java, string, interface, comparable, compareto

例如，如果我要比较字符串“Hello”和“World”。

它怎么知道 Hello 大于 World？

我唯一能想到的是，也许它使用 ASCII 表作为参考？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T20:33:30.073

*它按字典顺序*比较两个字符串。在[String API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)中检查此处。

> 如果两个字符串不同，则它们在某个索引处具有不同的字符，该索引是两个字符串的有效索引，或者它们的长度不同，或两者兼而有之。如果它们在一个或多个索引位置具有不同的字符，则设 k 为此类索引中的最小；然后，在位置 k 处的字符具有较小值的字符串（通过使用 < 运算符确定）按字典顺序位于另一个字符串之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:34:42.223

所有大写字母都在小写字母之前，因此：

```
"Be".compareTo("ay"); 
```

将返回一个负值，这意味着“小于”。

# c# - 无法读取另一个 DataTableReader 中的 DataTableReader

> ID：13202660
> 
> 赞同：0
> 
> 时间：2012-11-02T20:32:40.783
> 
> 标签：c#, ado.net

期待您对以下代码提出建议的朋友。不是采用 dtr1(DatatableReader)，而是采用外部循环 dtr(DataTableReader) 表。

```
protected void GetStudReport(Object o, EventArgs e)
{
    if (mycon.State != ConnectionState.Open)
    {
        List<string> lstQstn = new List<string>();

        mycon.Open();
        cmd = new MySqlCommand("SELECT * from scord_mark_table where stu_ID='" + drpDnSearch3.SelectedValue + "'", mycon);
        MySqlDataReader rdr1=cmd.ExecuteReader();
        DataSet ds=new DataSet();
        DataTable dtScrTbl=new DataTable();
        dtScrTbl.Load(rdr1);
        ds.Tables.Add(dtScrTbl);
        rdr1.Close();
        cmd = null;

        int i = 0;
        Dictionary<string, string> dctSub = new Dictionary<string, string>();
        **using (DataTableReader dtr = ds.CreateDataReader())**
        {
            while (dtr.Read())
            {
                lstQstn.Add(dtr["test_id"].ToString());

                while (i <= lstQstn.Count())
                {
                    MySqlCommand cmd2 = new MySqlCommand("SELECT test_id,subject_id from qution_no_table where test_id='" + lstQstn[i].ToString() + "'", mycon);
                    MySqlDataReader rdr2 = cmd2.ExecuteReader();
                    DataTable dtQsNoTbl = new DataTable();
                    dtQsNoTbl.Load(rdr2);
                    ds.Tables.Add(dtQsNoTbl);

                    **using (DataTableReader dtr1 = ds.CreateDataReader())** 
                    {

                        while (dtr1.Read())
                        {
                            dctSub.Add(dtr1["test_id"].ToString(), dtr1["subject_id"].ToString());    // **here it is taking table scord_mark_table instead of dtr1's qution_no_table** 
                        }
                        rdr2.Close();
                        break;
                    }
                }
                //cmd2 = null;
                i++;

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:01:52.350

不，它不是 - 它返回一个新的`DataTableReader`挂钩到所有现有表（包括您在第一个循环之前创建的表）。

尝试指定`DataTable`您希望读者附加到的：

```
using (DataTableReader dtr = ds.CreateDataReader(dtScrTbl)) 
```

和

```
using (DataTableReader dtr1 = ds.CreateDataReader(dtQsNoTbl)) 
```

# c# - WPF画布创建对象

> ID：13202661
> 
> 赞同：2
> 
> 时间：2012-11-02T20:32:49.983
> 
> 标签：c#, wpf, object, canvas

我正在使用 WPF 和 C#，并且我有一个带有矩形的画布（就像一个迷宫）。现在我想创建一个在这个迷宫中移动（在算法的帮助下）的角色。因此，我创建了一个名为 character 的新类，但我的问题从这里开始：如何在画布上创建一个对象，该对象具有图像、位置并且可以访问角色类中的方法和属性？所以最后的事情应该是这样的：

```
private class MainWindow
{

   //Here the canvas is made visible and the rectangles are being drawn on the canvas

   //Then a method should start to create the character and move him through the maze

   //it should look like (character.move(1) so the character moves one step forward etc.)

}

private class Character
{
//here are the methods and attributes the character should have
} 
```

提前感谢，对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:58:11.887

如果你从相反的方向看问题，解决起来会容易得多。

创建您的角色对象，将其连接起来，以便一切都按照您在数据（模型）中的预期工作。然后，您需要添加表示角色位置的属性，例如

```
public int XCoordinate { get; set; }
public int YCoordinate { get; set; } 
```

确保移动是在*模型端*完成的。如果你试图根据视觉显示来驱动运动，它会使程序过于复杂。

接下来，在画布中定义角色的视图，如下所示：

```
<Canvas ...>
    <Image Canvas.Left="{Binding XCoordinate}" Canvas.Top="{Binding YCoordinate}" .../>
</Canvas> 
```

最后，确保您的绑定语法是正确的（您是否设置了 DataContext？）并确保设置 NotifyPropertyChanged 以适应口味（这两者在其他地方都有很好的介绍）。然后，您将设置一个整齐划分的模型和视图，并且应该更容易专注于运动逻辑或您想要的任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:14:28.480

第一步是定义`Character`类的属性和方法。这将包括（正如您在问题中指出的那样）一种`Move(Position newPosition)`方法。`Position`可以是[`Point`结构](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)的包装器。该类`Character`还需要包含对存在角色的 Canvas 的引用。这是必需的，因为当您调用 'character.Move(position)` 时，可以在角色当前关联的画布中移动角色。

此外，`MainWindow`可以包含对字符或字符集合的引用（以防您需要多个字符）。实际的创建可以是在初始化期间，`MainWindow`也可以是[惰性](http://en.wikipedia.org/wiki/Lazy_initialization)的。初始化后，您的算法可以在字符实例上工作。

# javascript - javascript中的意外关闭结果

> ID：13202663
> 
> 赞同：0
> 
> 时间：2012-11-02T20:33:02.960
> 
> 标签：javascript, closures

```
exports.list = function(callback){

  var result = model.find({}, function(err, objects){
    callback(null, objects)
  });
  return result;
} 
```

**问**：为什么上面的代码是闭包？是因为函数参数调用了`callback`嵌套在其中的函数吗？

**问**：这是否会导致无限循环，因为函数通过其参数调用自身？

**问**`callback`：如果没有在任何地方定义，上述函数会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:32:10.137

其他人已经回答了你的大部分问题。但是，从您的评论中，我看到您可能仍然对最后一个问题感到困惑：

*   **问：**如果没有在任何地方定义回调，上述函数会起作用吗？

答：`callback`在上面的代码中已经定义了。这`callback`是定义的位置：

```
exports.list = function(callback){ // <---- the callback variable defined here

  var result = model.find({}, function(err, objects){
    callback(null, objects) // <-- callback is used here
  });
  return result;
} 
```

现在，按照“定义”这个词的严格含义，回调被定义为`eports.list()`. 如果您传递除函数以外的任何内容（或什么都不传递），`exports.list()`则从技术上讲，回调仍然是“定义的”，但它的值不会是函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:36:08.220

它是一个闭包，因为`callback`在 model.find() 代码中从分配给的封闭函数范围内捕获`exports.list`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:18:33.577

**问：**为什么上面的代码是一个闭包？是不是因为函数参数调用了嵌套在里面的函数回调？

**答：**正如 Mike 所解释的，一旦在函数内部使用了外部变量，您就创建了一个闭包。

**问：**这会导致无限循环吗

**答：**我假设`function(err, objects)`模型只会触发一次，所以不会。如果您调用`callee`（或自己） ，您将创建一个无限循环

**问：**如果没有在任何地方定义回调，上述函数会起作用吗？

**A：**你会得到一个错误`ReferenceError: callback is not defined`

# apache-flex - 在 Flex mobile 中开发时如何区分手机和平板电脑？

> ID：13202667
> 
> 赞同：2
> 
> 时间：2012-11-02T20:33:35.097
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6, flex-mobile

我在 Flex 移动纸牌游戏中使用[applicationDPI ：](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html)

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark"
    firstView="views.Menu"
    applicationDPI="160"
    initialize="init()">

    <fx:Style source="Preferans.css" />

    <fx:Script>
        <![CDATA[
            import spark.core.ContentCache;
            public static const AVATAR_CACHE:ContentCache = new ContentCache();

            public static var SCALE:Number;

            public function init():void {
                SCALE = runtimeDPI / applicationDPI;
            }   
        ]]> 
    </fx:Script>
</s:ViewNavigatorApplication> 
```

并在此基础上提供 3 种不同分辨率的资产：

```
<fx:Declarations>
    <s:MultiDPIBitmapSource id="BACK"
        source160dpi="@Embed('assets/icons/low-res/back.png')"
        source240dpi="@Embed('assets/icons/mid-res/back.png')"
        source320dpi="@Embed('assets/icons/high-res/back.png')"/>
</fx:Declarations> 
```

结果仍然看起来不太好，例如，当我在 Flash Builder 4.6 中选择 iPad 模拟器时：

![在此处输入图像描述](../Images/f274fec4341e42e593906d6b652462b8.png)

虽然选择 Google Nexus One 会产生更好的结果：

![在此处输入图像描述](../Images/9651ea08256a692368778fe47ac263bc.png)

在这里做什么，用什么来检测手机和平板设备？

检查屏幕分辨率在这里没有帮助 - 请参阅上面的 iPad 示例（低分辨率，但大屏幕）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-18T09:13:15.450

```
 public static function get isTablet():Boolean  
    { 

       var deviceWidth:Number = Capabilities.screenResolutionX / Capabilities.screenDPI;

       var deviceHeight:Number = Capabilities.screenResolutionY / Capabilities.screenDPI;

       var diagonalInches:Number = Math.sqrt((deviceWidth * deviceWidth)+ (deviceHeight *    deviceHeight));
      if(diagonalInches>=7)
          return true;
      else
          return false;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T22:46:55.587

对于我为工作所做的项目，我必须评估完全相同的问题。为此，我创建了一个在 app init 上运行的新类，它将评估设备并做出一些决定。

本质上，我这样做了

```
var deviceWidth:Number = Capabilities.screenResolutionX / Capabilities.screenDPI;
var deviceHeight:Number = Capabilities.screenResolutionY / Capabilities.screenDPI; 
```

这将为您提供大多数设备上的设备宽度和高度。然而，screenDPI 属性并不总是准确的，因此这不会 100% 起作用。但是，它经常起作用，我认为这不是问题。

从那里，我做了一些研究。我发现手机不再是手机，而是开始成为平板电脑。没有标准的方法，所以我选择了我能找到的最小的流行平板电脑（当时是黑莓 Playbook 或 Kindle Fire，不记得是哪个），并使用屏幕的尺寸作为手机和平板电脑之间的断点。

```
if ( deviceWidth >= fireWidth && deviceHeight >= fireHeight ) {
    isTablet = true;
}
else {
    isPhone = true;
} 
```

这显然是伪代码，但你明白了。我还进行了一些检查以区分每个平台（iOS、Android 和桌面），如果是 iOS，我手动设置它是平板电脑还是手机，因为那里的设备领域有限。

从那里，我有两个接口。一种用于手机，一种用于平板电脑。在`addedToStage` 我的 Application 类的函数中，我使用`isPhone`和`isTablet`检查来选择要加载的接口。

可能不是它应该如何完成，也不是万无一失的。不幸的是，据我所知，这是我们在 Adob​​e AIR 中最接近具有设备特定接口的通用应用程序。

# c++ - GDB 7.5 (OS X)：无法从库函数访问源代码

> ID：13202668
> 
> 赞同：3
> 
> 时间：2012-11-02T20:33:36.187
> 
> 标签：c++, macos, debugging, gdb

gdb 新手，所以我希望我没有忽略一些明显的东西……（如果我这样做了，也许一个好心的人会指出它吗？；）

我正在 OS X Lion 下调试 GCC C++ 应用程序。由于它在 STL 上相当繁重，我真的很想使用支持 python 的 GDB 版本（即 >=v7）来漂亮地打印容器。我的应用程序被分成一个后端库 (.dylib) 来完成所有繁重的工作，以及一个非常简单的前端应用程序。所有源代码和二进制文件都在一个公共源路径下，并且所有内容都已使用调试符号编译（我尝试了 -g 和 -ggdb）。

在 XCode 中使用 GDB 版本（标识为“GNU gdb 6.3.50-20050815（Apple 版本 gdb-1820）”），在回溯中显示帧的源代码行按预期开箱即用，无论各自是否调用发生在前端应用程序或后端库中：

(gdb) f 12

#12 0x000000010002ddc5 in FL3D::Resource::createMesh_ (this=0x7fff5fbff7c8, fl3d=@0x7fff5fbff1f8, id=) at /Development/workspace/fl3d/libfl3d/resource.cpp:234

第234章

(gdb)

到目前为止，一切都很好。另一方面，GDB 7.5 和 7.4.1 拒绝向我提供库中的任何源代码行：

(gdb) f 12

#12 0x000000010002ddc5 in FL3D::Resource::createMesh_(FL3D::FL3DParser&, std::string) () 来自 /Development/workspace/fl3d/libfl3d/build/libfl3d.dylib

(gdb)

我对给出的不同响应感到非常困惑——gdb6 打印到源文件的正确路径和正确的行，而 gdb7 获得了正确的函数原型（据说是从 .dylib 的调试符号中读取的？），但没有似乎对来源一无所知。有趣的是，它确实显示了前端 main() 函数中调用的相应源代码行！

我已经尝试使用“dir libfl3d”手动设置库源文件的路径，但这并没有改变任何东西。我还注意到，当我运行应用程序时，gdb6 多次说“读取共享库的符号”，而 gdb7 没有——但这些符号似乎不是问题，因为它们似乎都被两个版本正确解决了？

我在这里束手无策。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:26:18.920

Apple gdb 正在显示调试信息，因为它知道如何在此平台上查找和解析 DWARF。您显示的 gdb 版本 7 是一个 gdb，它不知道如何在 Mac OS X 系统上找到 DWARF 调试信息——您在上面显示的输出是 no-debug-info 的样子。我的猜测是 FSF gdb 版本 7 对 Mac OS X 的支持并没有引起很多关注，我会犹豫是否推荐在这个平台上使用它。

正如*bames53 所*指出的，此时您最好在 Mac OS X 上使用 LLDB。所有支持工作都在调试器中进行，Objective-C / C++ 容器支持正在迅速添加到 LLDB 而不是 gdb。Apple 提供的 gdb 正在报废，未来所有用户都将切换到 LLDB。

试试 lldb。它有点不同，但它非常好。有一个备忘单，很多人一开始觉得很有用，它显示了 gdb 和 lldb 命令等价。 [http://lldb.llvm.org/lldb-gdb.html](http://lldb.llvm.org/lldb-gdb.html)

# sql - SQL 选择内联表值函数中的视图性能

> ID：13202671
> 
> 赞同：0
> 
> 时间：2012-11-02T20:34:00.053
> 
> 标签：sql, sql-server, query-optimization, database-performance

我有一个查询需要大约 14 分钟才能使用从链接服务器上的视图中选择的内联表值函数完成。但是，如果将此查询更改为删除该函数并直接从查询中选择，它将在大约 20 秒内完成。

功能：

```
CREATE FUNCTION [dbo].[fn_GetView](CompanyCharacters VARCHAR(4))
RETURNS TABLE
AS
RETURN
(
    SELECT DISTINCT
           [Some Rows]
    FROM   LinkedServer.Database.dbo.LinkedView
    WHERE  Co_char = RIGHT(REPLACE('0', 4) + 
                           CAST(@CompanyCharacters AS VARCHAR(4)), 4)
) 
```

需要 14 分钟的查询：

```
SELECT DISTINCT
       [Some Rows]
FROM   fn_GetSomeCompanyData() AS Comp
       JOIN CustomerData ON Comp.ID = CustomerData.CompID
       JOIN fn_GetView('MSF') AS gv ON gv.CompanyChar = Comp.CompanyChar
                                    AND gv.FirstName = Comp.FirstName
                                    AND gv.FirstName = Comp.FirstName 
```

更改的查询需要 20 秒：

```
SELECT DISTINCT
       [Some Rows]
FROM   fn_GetSomeCompanyData() AS Comp
       JOIN CustomerData ON Comp.ID = CustomerData.CompID
       JOIN LinkedServer.Database.dbo.LinkedView AS gv ON gv.CompanyChar = Comp.CompanyChar
           AND gv.FirstName = Comp.FirstName
           AND gv.FirstName = Comp.FirstName
           AND gv.Co_char = RIGHT(REPLACE('0', 4) + 'MSF', 4)
WHERE [Some Data Filtering] 
```

有人知道为什么会这样吗？是否有最好的方法来更改查询，使其快速但仍能保留该功能？

# java - java构造函数中的if/else语句

> ID：13202672
> 
> 赞同：3
> 
> 时间：2012-11-02T20:34:01.813
> 
> 标签：java, constructor

当我在 Setters 中只有 if/else 条件时，该程序无法运行。我得到一个提示，我也必须在构造函数中使用它们。有人可以向我解释..为什么？

另一个问题：您是否将 if/else 语句放在构造函数或设置器中？

**//构造函数**

```
 public Invoice(String partNumber, String partDescription, int quantity,
        double pricePerItem) {
    super();
    this.partNumber = partNumber;
    this.partDescription = partDescription;

    if (quantity <= 0)
        quantity = 0;
    else
        this.quantity = quantity;

    if (pricePerItem <= 0)
        pricePerItem = 0.0;
    else
        this.pricePerItem = pricePerItem;
} 
```

**//二传手**

```
 public void setQuantity(int quantity) {
    if (quantity <= 0)
        this.quantity = 0;
    else
        this.quantity = quantity;
}

public double getPricePerItem() {
    return pricePerItem;
}

public void setPricePerItem(double pricePerItem) {

    if (pricePerItem != 0.0)
        this.pricePerItem = 0.0;

    else
        this.pricePerItem = pricePerItem;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T20:38:17.183

最好的办法是将 if/else 语句放在 setter 中，并在构造函数中使用 setter。这样你的逻辑就在一个地方，而且更容易维护。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T20:36:52.770

您需要将它们放在构造函数中，否则数据也可能在那里无效。当然，您可以通过在构造函数中调用设置器来避免冗余代码！

它们在构造函数中不起作用的原因是因为你需要做`this.quantity = 0;`而不是`quantity = 0;`

从构造函数中调用 setter 的示例：

```
public Invoice(String partNumber, String partDescription, int quantity,
               double pricePerItem) {
    super();
    this.partNumber = partNumber;
    this.partDescription = partDescription;

    // call Setter methods from within constructor
    this.setQuantity(quantity);
    this.setPricePerItem(pricePerItem);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T20:36:32.300

将 if/else 语句放在构造函数和 setter 中是有效的，经常使用。它确保对象永远不会处于无效状态。

正如 John3136 在评论中指出的那样，从构造函数中调用 setter 以减少重复代码的数量是一个好主意。

您的构造函数的 if/else 块仍然存在错误。

```
 if (quantity <= 0)
    quantity = 0;    //  <-- this is setting the parameter passed to 0
else
    this.quantity = quantity;  // <-- this.quantity is only ever set if quantity is > 0. 
```

您将要更改 to 的主体`if`或 `this.quantity`删除 the`else`并始终`this.quantity = quantity`在`if`

设计建议：考虑在收到数量 < 0 或价格 < 0 而不是默认为 0 时抛出 IllegalArgumentException。这取决于您的具体要求，但为 -1 对象创建发票似乎应该是一个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T20:37:57.410

> . 我得到一个提示，我也必须在构造函数中使用它们。有人可以向我解释..为什么？

最有可能避免代码重复。

> 另一个问题：您是否将 if/else 语句放在构造函数或设置器中？

即使你把它放在构造函数中，你也需要它们`setters`。

顺便说一句，`if/else statements`是**验证**

# javascript - 如何保存网页以继续离线工作？

> ID：13202674
> 
> 赞同：1
> 
> 时间：2012-11-02T20:34:41.273
> 
> 标签：javascript, html, iframe, offline

> **可能重复：**
> [用本地存储保存 div 的内容，并在另一个页面上显示](https://stackoverflow.com/questions/12168734/save-content-of-div-with-local-storage-and-display-on-another-page)

我已经构建了一个网页，它在 iframe 中加载数据并允许用户从中绘制图表。演示页面在[这里](http://usermanagedsolutions.com/Demos/Pages/MiniBIEditMode.aspx)。

在用户加载数据并绘制图表后，我想让他们能够将页面保存到他们的计算机并继续离线使用（通常在不同的图表类型之间切换）。有没有办法做到这一点？

我考虑过但似乎不起作用的东西：

*   浏览器另存为 .html => 仅保存页面源。
*   Internet Explorer 另存为 .mht => 保存页面源和外部文件（脚本、css）但不保留 iframe 内容。
*   保存页面 innerHTML => 保存包括 iframe 在内的内容，但不保留外部脚本。

**[更新]**有几个人提到了另一个帖子：“将div的内容保存到本地存储，并显示在另一个页面上”。这不是我要找的，我需要保存**内容和交互**（脚本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:38:06.247

*浏览器保存*只保存最初加载的 HTML，它不保存状态。您需要获取正文的 innerHTML，对其进行字符串化并使用 HTML5 本地存储。

参见：[用本地存储保存 div 的内容，并在另一个页面上显示](https://stackoverflow.com/questions/12168734/save-content-of-div-with-local-storage-and-display-on-another-page)

# forms - Symfony2 表单构建器在字段之间添加字段

> ID：13202679
> 
> 赞同：0
> 
> 时间：2012-11-02T20:35:25.127
> 
> 标签：forms, symfony

我有一个要添加字段的表单构建器对象。如何在 2 个现有字段之间添加一个字段：

```
$formBuilder->add('name',...)
            ->add('phone',...);

//Somehow here add an 'email' field between the 'name' and 'phone' field

$form = $formBuilder->getForm(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T01:16:34.843

您可以通过使用树枝部分呈现表单来更改顺序。

```
{{ form_row(form.name) }}
{{ form_row(form.email) }}
{{ form_row(form.phone) }} 
```

# jquery - 使用带有 Ajax 和历史记录的 jQuery 工具选项卡并尝试链接到选项卡中的内容

> ID：13202681
> 
> 赞同：1
> 
> 时间：2012-11-02T20:35:26.963
> 
> 标签：jquery, ajax, tabs, history

我正在使用 jQuery Tools Tabs 功能通过 Ajax 将内容加载到我的页面上。我还有一个下拉菜单，需要在加载时连接内容。有关选项卡实用程序的所有内容都正常工作。但是，有没有人知道如何在内容加载时转到特定的锚点或 div 标签？通常，您的选项卡具有与其相应文档一起使用的按钮，这就是它们的加载方式，但是您可以从理论上执行以下操作：

```
$(function() {
var initab = 0;
var initab2 = 0;
var lhash = window.location.hash;
if (lhash) { 
    lhash.match(/^#(\d+)-(\d+)/);
    initab = RegExp.$1 - 1;
    initab2 = RegExp.$2 - 1;
}

$("ul.tabs").tabs("> .pane",{initialIndex:initab});
$("ul.tabs2").tabs("> .pane2",{initialIndex:initab2});    
$('ul li a').click(function () {location.hash = $(this).attr('href');}); 
```

});

这会激活一组不同的选项卡并支持两个选项卡之间的历史记录，以创建一个可重复使用的 url 供用户添加书签。我想做类似的事情，但不是第二组选项卡，而是尝试连接到内容中的锚点或潜水标签。我很感激任何建议。谢谢

# c# - 在后台 WPF 中更新列表框

> ID：13202683
> 
> 赞同：1
> 
> 时间：2012-11-02T20:35:31.277
> 
> 标签：c#, wpf, multithreading, listbox, backgroundworker

我正在尝试制作一个类似超级终端的程序，但我无法让串行端口获取一条线并将其发布在后台的列表框中。在下面的示例中，它将冻结整个程序，而 for 循环运行 100 次，然后吐出所有 100 行...我希望它逐行更新，但我不确定它为什么这样做。

我也尝试过 backgroundworker 但它似乎做了同样的事情。

提前致谢...

```
 static System.Threading.Thread thread;
    public void button2_Click(object sender, RoutedEventArgs e)
    {
        if(Sp.IsOpen){
            stop = false;

            thread = new System.Threading.Thread(
                new System.Threading.ThreadStart(
                  delegate()
                  {
                    System.Windows.Threading.DispatcherOperation
                      dispatcherOp = listBox1.Dispatcher.BeginInvoke(
                      System.Windows.Threading.DispatcherPriority.Normal,
                      new Action(
                        delegate()
                        {
                            for(int y = 0; y <100; y++)
                            {
                                String line = Sp.ReadLine();
                                listBox1.Items.Add(line);
                            }
                        }
                               ));

              }
          ));
            thread.Start();

        }else{
            item.Content = ("No Comm Ports are Open");
            item.IsSelected = true;
            listBox1.Items.Add(item);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:09:16.873

您正在`SP.ReadLine`UI 线程中运行代码。

我已将您的代码分成三种方法，而不是一大堆代码。

```
private Thread _thread;

private void Kickoff()
{
    _thread = new Thread(() => ScheduleWork(listBox1));
    thread.Start();
}

private void ScheduleWork(ListBox box)
{
    box.Dispatcher.BeginInvoke((Action)() => Fill(box));
}

private void Fill(ListBox box)
{                           
    for(int y = 0; y <100; y++)
    {
        String line = Sp.ReadLine();
        listBox1.Items.Add(line);
    }
} 
```

在这个澄清的版本中，有三种方法

1.  **Kickoff**，它创建并运行新线程
2.  **ScheduleWork**，它运行`_thread`并安排填充
3.  **Fill**，它实际上执行您打算运行的工作`_thread`

问题是**Kickoff**在 UI 线程上运行，**ScheduleWork**在 上运行`_thread`，而**Fill**在 UI 线程上运行。

[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/ms591206.aspx)本质上的意思是“只要你想调度它，就采用这个方法并在 UI 线程上运行它，kthxbai。” 所以你的代码*都在 UI 线程上运行*。

您需要执行以下操作

```
private Thread _thread;

private void Kickoff()
{
    _thread = new Thread(() => ScheduleWork(listBox1));
    thread.Start();
}

private void ScheduleWork(ListBox box)
{                  
    for(int y = 0; y <100; y++)
    {
        String line = Sp.ReadLine();
        box.Dispatcher.BeginInvoke((Action<string>)(str) => 
            listBox1.Items.Add(str),
            line);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:40:47.870

我认为正在发生的事情是您的线程优先于 GUI 线程。您必须让线程休眠，以便 GUI 可以更新，否则它只会排队一堆更新，然后在事件结束并且程序处于空闲状态时处理该队列。将其设置为较低的优先级可能不是一个好方法。

就个人而言，我会将 COM 端口逻辑移动到一个对象中，并在它自己的线程上工作。然后，您可以在计时器上轮询该对象的属性，以查看是否有任何数据可供读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:03:18.100

您无法从后台线程更新 UI。尝试将这一行更改为

```
listBox1.Dispatcher.BeginInvoke(DispatcherPriority.Render, ()=>listBox1.Items.Add(line)); 
```

尝试使用[MSDN: DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)来更改线程的优先级。

# java - 从某一点看的具体方向：如果“坡度”不够，那又是什么？

> ID：13202686
> 
> 赞同：0
> 
> 时间：2012-11-02T20:35:54.507
> 
> 标签：java, point, angle

计划是计算两点（字符和光标）之间的斜率，将其转换为与水平方向的角度，并根据该角度切换到特定的字符精灵，使其看起来指向光标（例如：0-30 度，一个精灵。30-60 度，另一个精灵。60-90 另一个，等等）。后来我遇到的问题是斜坡可以在某种程度上相互镜像。

我意识到（现在看起来很明显）的问题是，将字符放在 A 点，将光标放在 B 点将具有与字符 B 点和光标在 A 点相同的斜率/角度。它无法知道方向指向。

![我的问题的插图](../Images/a1f50c17cab076b514c3531e71e8522a.png)

我不知道从这里做什么。最简单的解决方案是拥有它，这样就不会通过这种方式找到玩家的方向（无论它是面向右侧还是左侧），而是通过箭头键，但我将其保存为最后的手段它会导致快速瞄准的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:52:34.757

```
double deltaX = point1.x - point2.x;
double deltaY = point1.y - point2.y;
double angleInRadians = java.lang.Math.atan2(deltaX, deltaY);
double length = java.lang.Math.sqrt(deltaX * deltaX + deltaY * deltaY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:45:09.110

您应该能够使用精灵/光标位置以及斜率来解决这个问题。

伪代码：

```
if(slope is positive and cursor is to the right of sprite)
{
   sprite should face right (first quadrant, 0-90 degrees)
}
else if( slope is positive and cursor is to the left of sprite)
{
   sprite should face left (third quadrant, 180-270 degrees)
} 
//etc 
```

# ruby-on-rails - Rails 不会从 lib 加载我的模块

> ID：13202690
> 
> 赞同：4
> 
> 时间：2012-11-02T20:35:59.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module

我在我的 Rails 3.2 应用程序的 lib 文件夹中有一堆自定义类：即扩展 ActiveRecord 等。一切正常。

但是我正在尝试向 FileUtils 添加几个自定义方法，即

```
module FileUtils
  def last_modified_file(path='.')
     # blah ...    
  end
end 
```

我把它放在 lib/file_utils.rb 在我的 application.rb 我有

```
config.autoload_paths += %W(#{config.root}/lib) 
```

我的其他自定义类已加载，但未加载模块。

我读到（[从 Rails 3 中的 lib 文件夹加载模块/类的最佳方法？](https://stackoverflow.com/questions/3356742/best-way-to-load-module-class-from-lib-folder-in-rails-3)）我应该在模块内定义一个类，以便 Rails 拾取它并根据 FileUtils.class - 它应该是 Object < BasicObject .

所以我尝试了

```
module FileUtils
  class Object 
    def last_modified_file(path='.')
       # blah ...    
    end
  end
end 
```

但这也行不通。

但是，当我启动 irb 并粘贴我的代码时，它有效地将我的新代码放入对象中并重新包含我的模块 - 它工作正常。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T20:45:50.313

你的补丁永远不会被加载，因为只有在 Rails 找不到常量时才会调用自动加载。由于该`FileUtils`常量已经存在，因此永远不会调用自动加载器，并且永远不会加载您的文件。

只需从初始化程序中要求它。

```
require File.join(Rails.root, "lib/file_utils.rb") 
```

# sql-server-2008 - 按 nvarchar 分组

> ID：13202691
> 
> 赞同：0
> 
> 时间：2012-11-02T20:35:59.867
> 
> 标签：sql-server-2008, tsql, group-by, nvarchar

首先，对不起我的英语，我会尽量以最好的方式解释。

有没有办法按`nvarchar`SQL Server 2008 中的类型列分组？

我会更好地解释它：（至少我尝试）

如果我有这样的表：

```
ID  Quantity   City   Code   WebSiteLink
__  ________   ____   ____   __________
1      10      Milan   R2    home/images/1.jpg
2      20      Milan   R2    home/images/2.jpg
3      30      Rome    R2    home/images/3.jpg
4      55      Rome    R2    home/images/4.jpg
5      4       Naple   R2    home/images/5.jpg
6      1       London  R2    home/images/6.jpg
7      30      London  R2    home/images/7.jpg
8      40      London  R2    home/images/8.jpg 
```

我可以对所有列进行分组，除非`WebSitelink`它是一种`nvarchar`类型。

我的需要是获得一个随机的 img 链接，可以通过查询来完成吗？

我不想使用存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:41:07.840

要获得随机链接，您可以使用以下内容：

```
SELECT TOP (1) WebSiteLink
FROM YourTable
ORDER BY NEWID(); 
```

`WHERE`如果您对随机 img 链接有更具体的需求，您可以添加一个子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:43:10.200

> My need is to get a random img link:

For example, if you need a random image for each code, e.g. `GROUP BY code`, you can use this query:

```
 SELECT Code, (SELECT TOP(1) A.WebSiteLink
                  FROM tbl A
                 WHERE A.Code = B.Code
              ORDER BY NEWID()) RandomWebSiteLink
    FROM tbl B
GROUP BY Code 
```

Or the windowing function. Here is "groups by" City, Code and shows one random WebSiteLink

```
 SELECT City, Code, WebSiteLink
    FROM
       (
  SELECT City, Code, WebSiteLink,
         Row_Number() OVER (Partition by City, Code
                            Order by NewID()) RowNum
    FROM tbl
       ) X
   WHERE RowNum = 1; 
```

# sql - 从表值函数的输出中更新一组数据

> ID：13202697
> 
> 赞同：1
> 
> 时间：2012-11-02T20:36:17.790
> 
> 标签：sql, sql-server, sql-server-2005, sql-server-2008-r2

我正在尝试编写一个查询，将重复的客户端记录合并到一条记录中。现在我只是在建立一个映射表来知道我应该用什么映射。

这是我写的两个函数来帮助我

```
CREATE FUNCTION FindDuplicateClients ()
RETURNS TABLE AS RETURN 
(
    select distinct CLIENT_GUID 
    from CLIENTS c
    inner join
    (
        select FIRST_NAME, LAST_NAME, HOME_PHONE
        from CLIENTS
        group by FIRST_NAME, LAST_NAME, HOME_PHONE
        having COUNT(*) > 1
    ) t on c.FIRST_NAME = t.FIRST_NAME and c.LAST_NAME = t.LAST_NAME and c.HOME_PHONE = t.HOME_PHONE)
go

--Find other clients that map to this client
CREATE FUNCTION FindDuplicateClientsByClient (@Client uniqueidentifier)
RETURNS TABLE AS RETURN 
(
    select distinct CLIENT_GUID 
    from CLIENTS c
    inner join
    (
        select x.FIRST_NAME, x.LAST_NAME, x.HOME_PHONE
        from CLIENTS x
        inner join 
        (
            select FIRST_NAME, LAST_NAME, HOME_PHONE
            from CLIENTS
            where CLIENT_GUID = @Client
        ) y on x.FIRST_NAME = y.FIRST_NAME and x.LAST_NAME = y.LAST_NAME and x.HOME_PHONE = y.HOME_PHONE
        group by x.FIRST_NAME, x.LAST_NAME, x.HOME_PHONE
        having COUNT(*) > 1
    ) t on c.FIRST_NAME = t.FIRST_NAME and c.LAST_NAME = t.LAST_NAME and c.HOME_PHONE = t.HOME_PHONE
    where CLIENT_GUID <> @Client)
go 
```

第一个函数成功返回所有`CLIENT_GUID`有超过 1 条记录的，第二个你传入一个 GUID，它返回共享“公共信息”的所有其他 guid（在这种情况下是名字、姓氏和家庭电话）

问题是填写我的映射表。我需要遵循一些规则来优先考虑某些重复项。例如，任何有交易的人都不需要`CLIENT_GUID`更改，但他们可以将其他 GUID 合并到他们中（如果其他 GUID 没有交易）

```
--Create Mapping table
select CLIENT_GUID, CAST(null as uniqueidentifier) as NEW_CLIENT_GUID
into #mapping
from FindDuplicateClients()

--Do not map people who have transactions
update #mapping
set NEW_CLIENT_GUID = CLIENT_GUID
where CLIENT_GUID in (select CLIENT_GUID from trnHistory) 
```

现在这是我遇到麻烦的地方。我不知道如何获取`NEW_CLIENT_GUID`在上一个查询中设置的人员列表，`FindDuplicateClientsByClient`针对该 GUID 运行，并将`NEW_CLIENT_GUID`任何结果设置为`NEW_CLIENT_GUID`在不使用游标的情况下输入到函数中的任何结果。

这是我想出的使用光标的方法

```
declare cur cursor LOCAL FAST_FORWARD for select NEW_CLIENT_GUID from #mapping where NEW_CLIENT_GUID is not null
declare @NEW_CLIENT_GUID uniqueidentifier

open cur
fetch next from cur into @NEW_CLIENT_GUID
while @@fetch_status = 0
begin
    update #mapping
    set NEW_CLIENT_GUID = @NEW_CLIENT_GUID
    where CLIENT_GUID in (select CLIENT_GUID from FindDuplicateClientsByClient(@NEW_CLIENT_GUID)) --Find duplicates to this record
        and NEW_CLIENT_GUID is null --Do not reassign values that are already set (ie: duplicates that have transactions)

    fetch next from cur into @NEW_CLIENT_GUID
end 

close cur
deallocate cur 
```

对我来说，迭代每个`#mapping`具有值集的结果对我来说似乎不正确。这样做的正确方法是什么？我正在使用 SQL Server 2008 R2，但我希望它也与 SQL Server 2005 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:01:15.690

已经两天了，没有答案，我只是坚持使用光标解决方案，因为它的性能足以满足我的需要。

我确实使用了不同的方法，当我不得不第二次循环查找未在上一次传递中映射的人时，但它只是一个 while 循环，其行为与前一个光标完全相同。

```
declare @tmpGuid uniqueidentifier
select @tmpGuid = CLIENT_GUID from #mapping where NEW_CLIENT_GUID is null 
while @@ROWCOUNT > 0
begin   
  --Set the first unset guid to itself
  update #mapping
  set NEW_CLIENT_GUID = @tmpGuid
  where CLIENT_GUID = @tmpGuid

  --set all other duplicates to the guid we just used.
  update #mapping
  set NEW_CLIENT_GUID = @tmpGuid
  where CLIENT_GUID in (select CLIENT_GUID from FindDuplicateClientsByClient(@tmpGuid))
       and NEW_CLIENT_GUID is null

  --get next guid
  select @tmpGuid = CLIENT_GUID from #mapping where NEW_CLIENT_GUID is null 
end
set nocount off
go 
```

# git - 什么时候应该使用 git 孤立分支？

> ID：13202705
> 
> 赞同：37
> 
> 时间：2012-11-02T20:37:08.313
> 
> 标签：git

`git checkout --orphan`Git 可以使用命令在同一个 repo 中托管多个 DAG 。一个经常被引用的用例 git 的这个特性是为 docs 或 GitHub`gh-pages`孤立分支保留单独的分支以创建静态网站。

还有其他理由在 git 中使用孤立分支吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T21:03:58.390

另一种可能的用途是将多个存储库合并为一个。几个例子：

*   [http://www.gelato.unsw.edu.au/archives/git/0506/5511.html](http://www.gelato.unsw.edu.au/archives/git/0506/5511.html)
*   [http://jasonkarns.com/blog/merge-two-git-repositories-into-one/](http://jasonkarns.com/blog/merge-two-git-repositories-into-one/)
*   [合并多个 git 存储库](https://stackoverflow.com/questions/277029/combining-multiple-git-repositories)

在这些情况下，您将在同一个存储库中拥有两个单独的 DAG，然后再将它们合并到一个统一的树中。因此，这不是一个长期使用，而是一个暂时通过在同一存储库中具有单独 DAG 的状态的操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-05-30T13:07:53.250

[`git`在线文档](https://git-scm.com/docs/git-checkout)的另一个用例：

> 当您想从提交中发布树而不暴露其完整历史时，这可能很有用。您可能希望这样做以发布一个项目的开源分支，该项目的当前树是“干净的”，但其完整历史记录包含专有或其他受累的代码位。

# bash - Sed：获取以某个前缀开头的行

> ID：13202715
> 
> 赞同：24
> 
> 时间：2012-11-02T20:38:12.877
> 
> 标签：bash, sed, awk

我有文件黑莓jad文件：

```
RIM-COD-URL-12: HelloWorld-12.cod
RIM-COD-Size: 68020
RIM-MIDlet-Icon-2-1: ____HOVER_ICON_res/icon/blackberry/icon-68.png,focused
RIM-COD-URL-11: HelloWorld-11.cod
RIM-MIDlet-Icon-Count-2: 1
RIM-COD-URL-10: HelloWorld-10.cod
RIM-MIDlet-Icon-Count-1: 1
MIDlet-Vendor: Vasia Pupkin
RIM-MIDlet-Icon-1-1: res\icon\blackberry\____HOVER_ICON_icon-68.png,focused
Manifest-Version: 1.0
RIM-MIDlet-Flags-1: 0
RIM-COD-SHA1-38: 9a c8 b3 35 72 de 34 5e 7a 0a 5b 9e c3 3a 65 4c 20 0f 8e 50 
```

我只想让行以`RIM-COD-`.

你能为我提供解决方案吗`awk`？`sed`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-02T20:39:17.670

使用`sed -n`并仅打印与 RIM-COD 匹配的行。

```
sed -n -e '/^RIM-COD-/p' yourfile.txt 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-02T20:44:09.833

尝试这样做：

```
awk '/^RIM-COD/' file.txt 
```

或者

```
grep "^RIM-COD" file.txt 
```

或者

```
sed -n '/^RIM-COD/p' file.txt 
```

# forms - Struts 1.3：提交后请求属性丢失

> ID：13202717
> 
> 赞同：1
> 
> 时间：2012-11-02T20:38:18.120
> 
> 标签：forms, validation, httprequest, struts-1

我有两个 jsp 页面，比如说`form.jsp`和`myForm.jsp`.

在第一页 form.jsp 中，有一个单选按钮组（表单名称为“form”）。

当用户提交此表单时，会从数据库中检索一些信息，并使用这些信息构建 myForm.jsp 中的表单（表单名称为“myForm”）。

问题是，当提交第二个表单时，只显示错误，而不显示从 db 值创建的表单字段。例如，我从数据库中检索两个单选按钮 (property="prop") 的标签和值。

在`struts-config.xml`中，我有：

```
<form-bean name="myForm" type="org.apache.struts.validator.MyValidatorActionForm">
<form-property name="prop" type="java.lang.Integer"></form-property>
</form-bean>

<action path="/form" input="/jsp/home.jsp" name="form" scope="request" type="myPackage.LoadInfo">

<forward name="Success" path="/jsp/myForm.jsp"/>  
<forward name="Failure" path="/jsp/home.jsp" />     
</action>

 <action path="/myForm" input="/jsp/myForm.jsp" name="myForm" validate="true" scope="request" type="myPackage.MyValidatorAction"> 
<forward name="Success" path="/jsp/success.jsp"/>  
<forward name="Failure" path="/jsp/failure.jsp"/>
</action> 
```

在`myForm.jsp`：

```
<html:form action="/myForm">
 <div><label>*&nbsp;<bean:message key="myForm.label"/></label>
<c:forEach var="propTypes" items="${props}">
<html:radio property="prop" value="${propTypes.value}">${propTypes.label}
     </html:radio>
     </c:forEach>
&nbsp;&nbsp;<html:errors property="prop" />
 </div>
<div><html:submit><bean:message key="myForm.label2"/></html:submit></div>
 </html:form> 
```

在`validation.xml`：

在没有选择任何单选按钮的情况下提交表单后，会显示错误，但不会显示单选按钮。

我如何维护所有请求属性？我也尝试使用范围会话，但没有任何改变：

```
 <action path="/myForm" input="/jsp/myForm.jsp" name="myForm" validate="true" scope="session" type="myPackage.MyValidatorAction"> 
<forward name="Success" path="/jsp/success.jsp"/>  
<forward name="Failure" path="/jsp/failure.jsp"/>
</action> 
```

我通过使用解决了：

```
request.getSession().setAttribute("props", props); 
```

`LoadInfo`在表单显示之前调用的Action 。

在`myForm.jsp`我使用：

```
 request.getSession().getAttribute("props"); 
```

而在 struts-config.xml 中，范围仍然是请求。

然而，这不是一个好的解决方案，因为不同的浏览器选项卡共享同一个会话。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:05:04.923

您的 jsp 页面中的表单字段应该在 ActionForm 类中具有相应的属性。

因此，如果您的 jsp 有以下单选按钮

```
<html:radio name="myForm" property="name"> 
```

您需要在您的操作表单中有一个相应的属性，如下所示，并确保您有 getter 和 setter：

```
public class MyClass{
private String name; 
public String getName()
{ 
   return name; 
}
public void setName(String name){
   this.name = name; 
} 
```

如果您以这种方式进行设置，当您的页面刷新时，用户输入的值应该仍然存在。

# ios - 故事板静态 UITableViewCell 中的 UITextField 不接受输入

> ID：13202721
> 
> 赞同：0
> 
> 时间：2012-11-02T20:38:37.493
> 
> 标签：ios, keyboard, uitextfield, storyboard

我在 Xcode 4.5.2 中使用情节提要创建了一个包含 UITextField 的静态 tableview 单元格（这也发生在 4.6 DP1 中）。点击 UITextField 会调出键盘，但文本字段不接受来自键盘的输入。如果我以编程方式将文本添加到字段中，则会出现文本，但我仍然无法通过键盘（或在使用模拟器时通过主键盘）添加文本。唯一在键盘上起作用的键是“删除”键。有没有人经历过这种情况并知道可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:48:29.503

textField 是否具有 IBOutlet 属性，并且您在情节提要中连接 IBOutlet？

# ruby-on-rails - Rails 中用于按字段搜索的自定义路线

> ID：13202728
> 
> 赞同：1
> 
> 时间：2012-11-02T20:39:22.843
> 
> 标签：ruby-on-rails, routes

我想向 Rails 应用程序添加一条路线，这样我就可以通过 id 以外的其他字段进行搜索（并且仍然可以通过 id 进行搜索）

```
def bycode
  @plot = Plot.find_by_code(params[:code])
  respond_to do |format|
    if !plot.nil?
      format.json {render json: @plot}
    else
      format.json
    end
  end
end 
```

在 routes.rb 中：

```
resources :plots do
  get 'bycode/:code' => 'plots#bycode'
end 
```

在 $ rake 路线中，我得到：

```
GET    /plots/:plot_id/bycode/:code(.:format) plots#bycode 
```

我只想能够做到

```
http://myapp.com/plots/bycode?code=codename 
```

或类似的东西

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:42:05.020

如果你使用 RESTful 路由怎么办 ( `http://myapp.com/plots/<code>`)

在你的控制器中

```
@plot = Plot.where(code: params[:id]).first || Plot.find(params[:id]) 
```

# google-chrome - 从首选项文件中枚举 Chrome 扩展和插件

> ID：13202730
> 
> 赞同：0
> 
> 时间：2012-11-02T20:39:40.060
> 
> 标签：google-chrome, google-chrome-extension

我正在开发一个 C++ 项目，该项目将读取 Chrome 首选项文件并从中枚举扩展和插件。

主要要求是只有那些扩展程序和插件显示在我的应用程序中`chrome://extensions`并且`chrome://plugins`应该由我的应用程序使用/显示。

1.  有谁知道扩展的哪个设置决定它是否显示在下面`chrome://extensions`？我找不到背后的逻辑...

2.  有人知道将插件分组的规则集`chrome://plugins`吗？是名称，版本还是......我也找不到背后的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:57:39.110

这只是部分答案，但据我所知，没有设置可以阻止从`chrome://extensions`选项卡中显示扩展程序 - 安装的所有内容都会出现（您可以隐藏工具栏中显示的图标，但所有内容都将在`chrome://extensions`. （再次，根据我所阅读的内容和我有限的经验），所有已安装的扩展都出现在`chrome://extensions`（这主要是出于安全原因）。

关于插件，您指的是哪个特定的分组？我的分组似乎发生在同一个包中有多个文件时（包括 Firefox 插件，很奇怪）。有关更多详细信息，请参见[此处，如果没有您要查找的具体内容，请见谅:)](http://productforums.google.com/forum/#!topic/chrome/jzagvx7wvgw)

# winforms - 什么决定了 Visual Studio 中哪个项目位于顶部

> ID：13202737
> 
> 赞同：0
> 
> 时间：2012-11-02T20:40:07.053
> 
> 标签：winforms

所以我有一个带有选项卡控件的表单，它占据了整个视图。我有 3 个按钮，我一直设法在此选项卡控件之上。我有一个始终位于选项卡控件下方的第四个按钮。我如何像其他人一样始终处于领先地位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:49:26.350

尝试用鼠标右键单击 TabControl（不是 TabPage），然后从菜单中选择`Send to Back`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:43:35.327

控件在同一容器中出现的顺序（视觉和交互）由它们的“z 顺序”确定。术语 z 顺序是指第 3 维，即深度，通常称为 z 轴。

在 WinForms 中，z 顺序由控件添加到 ControlsCollection（即 Control.Controls）的顺序决定。

在查看表单的设计器视图时，您可以通过打开“文档大纲视图”来查看控件的 z 顺序（以及容器分组）。这列出了每个控件和每个容器。它们按容器缩进，z 顺序是它们出现的顺序。您可以使用向上和向下按钮以 z 顺序向上或向下移动所选项目。

# jquery - HTML 选项卡式表单滑动

> ID：13202742
> 
> 赞同：4
> 
> 时间：2012-11-02T20:40:24.257
> 
> 标签：jquery, html, forms, twitter-bootstrap, jquery-easing

我有一个三页的注册表单，分为三个选项卡，这些选项卡都是在引导程序上开发的。在验证当前页面后，我想将一页滑入另一页。这是我的意思的工作[演示。](http://bootstrap.pk/demo/TabSlidingForms/)我尝试实现这个演示，但代码太不同了，我无法正确复制。因此，这里演示了我到目前为止所拥有的内容：[bin](http://jsbin.com/asarek/1/edit)。如您所见，在第一个选项卡正确验证之前，第二个和第三个选项卡被禁用。选择一个选项并单击继续后，我希望它滑入第二个选项卡。我试过这样的事情：

```
$(".tab-content div").animate({left: "0px"}, { duration: 350, easing: 'easeInOutCirc' }); 
```

但这不起作用，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T04:14:24.140

我已经在[http://jsfiddle.net/technotarek/ymxn4/](http://jsfiddle.net/technotarek/ymxn4/)上对 jsFiddle 进行了研究。

修改后的 JS 全文如下。请注意，小提琴包含一些新的 CSS。我还修改了 HTML，但除了 #tab-container div 之外，这一切都只是为了外观。[根据http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)上的文档，该解决方案以推荐的方式与 Twitter Bootstrap 一起使用

```
var selector;
var selectorID;

activateTab('#myTab a:first');

function activateTab(selectorID) 
{
    $(selectorID).tab('show')
        .closest('.disabled').removeClass('disabled');    
}

function deactivateTab(selector) 
{
    $(selector).off('click.twbstab')
        .closest('li').addClass('disabled');
}

$('.btn-demo').on('click',function() {
    selector = '#myTab a[href="'+$(this).data('activate')+'"]';
    selectorID = $(selector).attr('href');
});

var val1 = $('#frmtype1').validate(
{
    errorPlacement: function(error, element) {}, 
    // prevent the standard error message from showing, rather you use the inline-text
    rules: {
        'Reg_type': {
            required: true
        }
    }
});

// validate 1st form
$('#frmtype1').submit(function(e) 
{
    // validate the first page
    if(val1.form()) {
        $('.help-inline').hide();
        activateTab(selector);
    } else {
        $('.help-inline').show();
    }
    return false;
});

// validate 2nd form
$('#frmtype2').submit(function(e) 
{
    // validate the second page
    activateTab(selector);
    return false;
});

// if 2nd or 3rd tab is clicked, validate as if the form was submitted
$('#myTab li:eq(1) a, #myTab li:eq(2) a').click(function(e) 
{
    selectorID = $(this).attr('href');
    // validate the first page
    if(val1.form()) {
        $('.help-inline').hide();
        activateTab(this);
        $(selectorID).tab('show');
    } else {
        $('.help-inline').show();
    }
    return false;
});

// re-position all tab-panes, except the active pane, so that they are prepared for the slide effect
$(".tab-pane").css("position", "relative");
$(".tab-pane").not(".active").animate({
    left: "1000px"
});

// perform slide effect
$('a[data-toggle="tab"]').on('show', function (e) {
    lastPane = $(e.relatedTarget).attr('href');
    $(lastPane).animate({left: "1000px"}, 300)
    currPane = $(e.target).attr('href');
    $(currPane).animate({left: "0px"}, 300);
});
​ 
```

让一切正常工作的关键是在脚本的最后（以“// re-position...”开头）。请注意，您的原始代码不起作用的部分原因是您没有包含演示中使用的缓动库（根据@forty-two 的评论），还因为演示中的代码用于创建选项卡效果与 Twitter Bootstrap 中选项卡的工作方式根本不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T07:45:01.033

你所拥有的几乎就在那里

这个想法是您将您的 div 并排放置，并在您通过选项卡时将它们一起滑动。

为了让它工作，给每个 div 一个起点，例如 0px、400px、800px 和 position: relative：

```
 <div class="tab-pane active" id="options" style="left: 0; position: relative;">

    <div class="tab-pane" id="information" style="left: 400px; position: relative;"> 
```

在提交幻灯片中，通过动画 left 属性将所有 div 向左移动 400px：

```
 $(".tab-content div#options").animate({left: "-400px"}, { duration: 350, easing: 'easeInOutCirc' }); 

        $(".tab-content div#information").animate({left: "0px"}, { duration: 350, easing: 'easeInOutCirc' }); 
```

请注意，我将选择器更改为针对特定 div 而不是 tab-content 下的所有 div。

这是[带有我的更改的 bin](http://jsbin.com/asarek/13/edit)的链接。

我刚刚做了前两个 div，但你应该从中得到想法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T14:05:28.297

看看你的代码的这个修改版本：

[http://jsbin.com/asarek/21/edit](http://jsbin.com/asarek/21/edit)

特别是，我添加了一些 CSS 和 JS 以使其更接近您提供的示例：

JS：

```
var currentPanel = jQuery(this).parent();
$(".tab-content").animate({left: "-"+currentPanel.width()+"px"}, { duration: 350, easing: 'easeInOutCirc' }); 
```

该代码将选项卡内容相对于 this 的宽度向左移动`currentPanel`，在本例中是您的第一个表单。您需要做的是为每个面板定义宽度，并根据每个面板的位置将其父容器 ( `.tab-content`) 移动到左侧。

CSS 将所有面板放在同一行（使用 inline-block）。它使用一个额外的包装器来包含`tab-content`和隐藏溢出。

CSS

```
 .tab-wrapper
    {
     overflow:hidden;
     width:500px;
    }
    .tab-content
    {
      position:relative;
      white-space:nowrap;
      overflow:visible;
    }
    .tab-content .tab-pane
    {
      display:inline-block;
    } 
```

我的示例没有将滑动效果合并到标签点击中。您提供的示例通过检查单击了哪个链接来做到这一点。`selector`您可以通过检查参数并根据应显示的面板向左滑动来以相同的方式执行此操作。如果您希望我进一步说明这些，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T20:57:46.307

[**JS斌**](http://jsbin.com/asarek/6/)

我发现你的问题...

```
 $(".tab-content div").css({position: 'absolute'}).animate({left: "-400px"}, 350); 
```

首先，您的 Div 需要绝对定位。在 CSS 中更容易完成。

```
.tab-content div {position:absolute;} 
```

其次使用类似的东西

```
"-400px" 
```

将 div 从其原始位置移动 -400px，其中

```
"400px" 
```

将 div 从 0 移动到 400px，将其降落到 +400px。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T03:12:20.870

jQuery UI 效果“Slide”和“Drop”是否满足您的要求？它们应该是可配置的（左右两侧）。

# javascript - 自动 jquery scrollTo 导航

> ID：13202749
> 
> 赞同：0
> 
> 时间：2012-11-02T20:40:54.133
> 
> 标签：javascript, jquery, scrollto

> [http://jsbin.com/ifutav/2/edit](http://jsbin.com/ifutav/2/edit)

我想使用[http://balupton.github.com/jquery-scrollto/demo/](http://balupton.github.com/jquery-scrollto/demo/)自动滚动相关导航链接。使用下面的代码，这是我得到的错误：`Uncaught Error: Syntax error, unrecognized expression: #/article/`这显然是由斜杠（这是 ajax 插件中必需的命名空间）引起的，当我删除它们时，错误消失但仍然不起作用：http：// jsbin.com/ifutav/3/edit 但`e.preventDefault()`确实如此。所以很明显这里发生了两个错误：

1.  jQuery 不喜欢这个`href`值
2.  scrollTo 无法正常工作

# HTML：链接

```
<nav id="nav">
  <ul>
    <li><a href="#/item-1/">Item 1</a></li>
    <li><a href="#/item-2/">Item 2</a></li>
    <li><a href="#/item-3/">Item 3</a></li>
    <li><a href="#/item-4/">Item 4</a></li>
  </ul>
</nav> 
```

# HTML：元素

```
<section id="/item-1/"></section>
<section id="/item-2/"></section>
<section id="/item-3/"></section>
<section id="/item-4/"></section> 
```

# Javascript

```
$('nav ul li a[href^="#"]').each(function() {

  // store values so it doesn't have to execute onclick
  var $this = $(this),
      value = $this.attr('href'),
      element = $(value);

  $this.click(function(e) {

    // prevent default scrolling
    e.preventDefault();

    // scrollTo element
    element.scrollTo();
  });
}); 
```

我不知道这两个方面背后的原因，但我认为它们是某种类型错误？我...

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:53:12.747

两件事：1）从你的href和id中删除正斜杠。2) 如果您使用的是[http://balupton.github.com/jquery-scrollto/demo/](http://balupton.github.com/jquery-scrollto/demo/)那么方法 ScrollTo 需要一个大写的 S：`element.ScrollTo();`

请参阅工作示例：http: [//jsfiddle.net/dBh3W/](http://jsfiddle.net/dBh3W/)

# javascript - 这是什么javascript结构？

> ID：13202752
> 
> 赞同：-6
> 
> 时间：2012-11-02T20:41:13.210
> 
> 标签：javascript, jquery

我在几个 JS 结构之间有些混淆，其中之一就是这个：http: [//pastebin.com/uZD9dfCH](http://pastebin.com/uZD9dfCH)

那是什么？那是一堂课吗？一个函数？jquery的扩展？

我无法理解所有这些 JS 结构之间的区别。

任何帮助将不胜感激：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:44:00.363

That's a shortcut for `$( document ).ready( function () { /* Code here */ } )`

# java - libgdx touchUp 事件

> ID：13202753
> 
> 赞同：4
> 
> 时间：2012-11-02T20:41:26.517
> 
> 标签：java, events, libgdx, actor, stage

我正在使用带有舞台的演员作为按钮。我可以检测到何时touchDown/touchUp事件在actor上发生得很好，但是当用户点击actor然后继续将他们的手指从actor上拖动时，touchUp事件永远不会触发。我尝试改用退出事件，但它永远不会触发。在我的程序中，touchUp/touchDown 事件决定了移动以及按钮颜色，这取决于按钮是否被按下。所以我留下了一个永久“按下”的按钮，直到它再次被向下/向上点击。

我正在使用的代码示例：

```
stage.addListener(new InputListener() {

    public boolean touchDown (InputEvent event, float x, float y, int pointer, int button) {
        Actor actor = stage.hit(x, y, true);
        if (actor != null){
            System.out.println("touchDown: " + actor.getName().toString()); 
        }
        return true;
    }

    public void touchUp (InputEvent event, float x, float y, int pointer, int button) {
        Actor actor = stage.hit(x, y, true);
        if (actor != null){
                System.out.println("touchUp: " + actor.getName().toString());           
                }
        }

    public void exit(InputEvent event, float x, float y, int pointer, Actor toActor){
        System.out.println("exit");
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-02T05:28:30.650

如果你改变

```
stage.addListener(new InputListener() {}); 
```

至

```
stage.addListener(new ClickListener() {}); 
```

它会识别 TouchUp 调用。它仍然能够处理 TouchDown 和 Exit 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:30:35.423

我有同样的问题。我通过创建`boolean isDown`变量作为我的 GameScreen 类的字段来修复它。**每当我的背景图像**上发生 touchDown 时，我将 isDown 变量设为 true，而当 touchUp 发生时 - isDown = false。这样touchUp总是会发生。然后仍然在我的 GameScreen 渲染方法中检查 isDown 是否为真，如果是，我检查触摸是否与我的演员相交：

```
if (isDown) {
   if (pointIntersection(myActor, Gdx.input.getX(), Gdx.input.getY())) {
                // do something
   }
} else {
  // reverse the effect of what you did when isDown was true
} 
```

其中 pointIntersection 方法是：

```
public static boolean pointIntersection(Image img, float x, float y) {
    y = Gdx.graphics.getHeight() - y;
    if (img.x <= x && img.y <= y && img.x + img.width >= x && img.y + img.height >= y)
        return true;

    return false;
} 
```

这是我发现的唯一解决方法。不过，它不是很漂亮，但对我有用。

# php - 如果 foreach 循环没有输出任何值，我如何让一段代码运行？

> ID：13202757
> 
> 赞同：-1
> 
> 时间：2012-11-02T20:41:34.880
> 
> 标签：php, logic

我有一个数组，我已将其放入 foreach 循环中，其中数组的每个值都将输出给用户。如果用户输入了搜索查询，则将再次检查该值作为正则表达式，仅在匹配时返回，否则仅输出该值。

我遇到的问题是，如果无条件或正则表达式条件输出都没有输出任何内容，我无法弄清楚如何制作有条件的“未找到结果”输出。代码如下。

```
foreach ($result as $value)
{
    // check to see if query term is set and if so run regex comparison
    if (isset($pattern))
    {
        if (preg_match("/^$pattern/i", $value)) 
        {
            echo $value;
            echo "<br />";
        }   
    }

    // if query is not set, simply output the value
    else
    {
        echo $value;
        echo "<br />";
    }

    // and if there has been no output for either the regex conditional, or other output,                   
    // I want output "no results". How?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:46:11.210

在您的代码段添加之前：

```
if(empty($result)) {
  echo 'no results';
} else {
  //the rest of your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:05:40.523

如果我理解正确，这就是您需要的：

```
$found = false;    
foreach ($result as $value)
{
  if (isset($pattern))
  {
    if (preg_match("/^$pattern/i", $value)) 
    {
      $found = true;
      echo $value;
      echo "<br />";
    }   
  }

  // if query is not set, simply output the value
  else
  {
    $found = true;
    echo $value;
    echo "<br />";
  }
}

if($found)
{
  echo "Sorry, nothing found.";
} 
```

# algorithm - 将两个多项式相乘

> ID：13202758
> 
> 赞同：8
> 
> 时间：2012-11-02T20:41:40.693
> 
> 标签：algorithm

这是一些面试问题中提出的问题。

给定三个多项式 f(x)、g(x)、h(x)，其中系数是二进制的。给出 [f(x)*g(x)] mod h(x) [所有运算以二进制系数]

多项式以这种格式给出…… x3 + x + 1 给出为“1011”。编写一个程序 char* multmod (char *f, char *g, char *h) 将输出多项式... (f*g) mod h

可能是什么方法？我们可以在位级别做点什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T00:36:49.600

**动机**

这里的二进制系数意味着系数是模 2，在字段 Z_2 中，或者只是取值 0 和 1 并像位一样操作。这并不意味着系数是以二为底的任意整数。它们*是*二进制的（正好取两个值），而不是简单地用二进制数字系统表示。

牢记这一点，这个问题很容易回答，是的，异或和（左）移位的按位运算就足够了。虽然不需要回答这个问题，但这个问题是由密码学引起的。它演示了散列中常用的一些按位运算与一些加密方案和抽象代数之间的联系，因此可以在密码分析中利用关于有限域上多项式的结果。将乘积取模另一个多项式是为了防止结果的次数超过一定的限制。机器寄存器上的操作自然会溢出。

**添加**

首先我们来谈谈加法。由于系数是模 2，因此加上`x + x = 2x = 0x = 0`. `2 mod 2 = 0`因此，只要有两个相同的术语，它们就会取消，而当只有一个时，它会持续存在。这是与 相同的行为`XOR`。例如，添加`(x^4 + x^2 + 1) + (x^3 + x^2):`

```
(1x^4+0x^3+1x^2+0x^1+1x^0)+(0x^4+1x^3+1x^2+0x^1+0x^0) = (1x^4+1x^3+0x^2+0x^1+1x^0) 
```

或者，仅使用紧凑系数表示法，

```
10101 XOR 01100 = 11001 
```

**乘法**

乘以`x`将每一项的幂增加一。在紧凑表示法中，这相当于左移。

```
(1x^4+0x^3+1x^2+0x^1+1x^0) * x = (1x^5+0x^4+1x^3+0x^2+1x^1+0x^0)
10101 << 1 = 101010 
```

所以，多项式相乘`f(x) * g(x)`我们可以分别乘以`f(x)`的每一项`g(x)`，每一项等价于移位，然后相加，加法等价于异或。让我们相乘`(x^4 + x^2 + 1) * (x^3 + x^2)`

```
(x^4 + x^2 + 1) * (x^3 + x^2) = (x^4 + x^2 + 1)*x^3 + (x^4 + x^2 + 1) *x^2
(10101 << 3) XOR (10101 << 2) = 10101000 XOR 01010100 = 11111100 
```

所以，答案是`x^7 + x^6 + x^5 + x^4 + x^3 + x^2`。

**模减少**

减少模数`h(x)`也相当容易。它当然*不需要*你记住如何进行长除法。像乘法一样，我们将逐项进行。让我们继续同一个例子，取模`h(x) = x^5 + x`

```
(x^7 + ... + x^2) mod (x^5+x) = [x^7 mod (x^5+x)] + ... + [x^2 mod (x^5+x)] 
```

现在，如果 的 度数小于的度数`n`，这里是 5，那么就没有什么可做的了，因为不会除。`x^n``h(x)``h(x)``x^n`

```
[x^2 mod (x^5+x)] = x^2 or 00000100
[x^3 mod (x^5+x)] = x^3 or 00001000
[x^4 mod (x^5+x)] = x^4 or 00010000 
```

当度数相等时，我们可以说`h(x)`除以`x^n`一次，并且我们已经超过了 的剩余项`h(x)`。我们已经超过而不是低于几乎无关紧要，从`-1 mod 2 = 1`. 这里，

```
x^5 = (x^5 + x) – x, so
[x^5 mod (x^5+x)] = x, or 00000010 
```

一般来说，[x^n mod h(x)] = [h(x)-x^n] 当`n = degree(h)`. 在紧凑的形式中，这相当于关闭第`n`th 位，这可以通过将 的表示`h(x)`与 的表示进行异或来完成`x^n`：

```
00100010 XOR 00100000 = 00000010. 
```

当`x^n`度数大于`h(x)`我们可以乘以`h(x)`使`x^k`度数匹配时，并像前面的情况一样继续。

x^6 = (x^5 + x)*x – (x)*x = -x^2，所以 [x^6 mod (x^5+x)] = x^2，或 00000100，或紧凑形式 (00100010 << 1) 异或 (00100000 << 1) = 00000100

但是，更有效的是，只需转换先前的答案，我们将这样做`x^7`：

```
[x^7 mod (x^5+x)] = x^3, or 00001000 
```

所以为了收集，我们需要将这些结果相加，这在紧凑表示中是 XOR-ing。

```
x^2 + x^3 + x^4 + x + x^2 + x^3 = x^4 + 2x^3 + 2x^2 + x = x^4 + x, or
00000100 XOR 00001000 XOR 00010000 XOR 00000010 XOR 00000100 XOR 00001000 = 00010010 
```

**结束语**

我们可以要求[Wolfram Alpha](http://www.wolframalpha.com/input/?i=%28%28x%5E4+%2B+x%5E2+%2B+1%29+*+%28x%5E3+%2B+x%5E2%29%29++%2F+%28x%5E5%2Bx%29)通过长除法为我们验证这个结果。给出的余数是`x^4 - x`，这相当于`x^4 + x`系数模 2 时。

可以组合逐项乘法和取模步骤，例如乘以`x`和取模乘积，以获得更有效的算法，如果乘积的次数至少为 的次数，这将是移位和异或`h(x)`。然后重复结果，乘以`x`并取模，并记录乘以的答案`x^2`。等等……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:00:16.767

这是一个知识问题。基本上，除非你要么像高斯一样聪明，或者你已经知道同余数学，也称为“模算术”，否则你就完蛋了。你可能想读一本书来了解这些东西是 Allenby 的“Introduction to Number Theory with Computing”。

最终的关键知识是可以通过多种方法计算同余，其中最好的是相当古老的“平方和乘法”方法。基本上，每当你有一个二进制 1 时，你都是平方和倍数，但是当你有一个 0 时，你只是平方。完整的算法和解释在第页。艾伦比 79 号。

另一种方法是使用中文剩余Thereom，这可能是提问者的目标。

你在哪里申请？国家安全局？洛斯阿拉莫斯？这是一个相当棘手的问题。

* * *

太好了，因为是唯一真正回答问题的人而被否决。在这里要明确一点：毫无疑问，面试官期待利用平方和乘法算法，正如我上面所说的。在 RSA/密码算法中使用平方和乘法来进行快速模运算。见第 225 用于描述该算法和 RSA 应用程序：[RSA 状态的多项标准产品的实现](http://www.ijrcct.org/index.php/ojs/article/download/75/59)。面试官可能在 RSA 上工作，这就是他知道这种方法的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:02:10.340

你本质上在做的是二进制操作。你可以看看你的 CPU 是如何实现这样的操作的。

[http://en.wikipedia.org/wiki/Multiplication_algorithm](http://en.wikipedia.org/wiki/Multiplication_algorithm) http://en.wikipedia.org/wiki/Modulo_operation

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T21:25:43.883

这看起来像一个简单的多项式乘法和长除法问题。只需将多项式相乘，然后将它们相除。使用两个嵌套的 for 循环，乘法非常简单，对于长除法，请参见：

[http://www.sosmath.com/algebra/factor/fac01/fac01.html](http://www.sosmath.com/algebra/factor/fac01/fac01.html)

[http://en.wikipedia.org/wiki/Polynomial_long_division](http://en.wikipedia.org/wiki/Polynomial_long_division)

# html - Twitter Bootstrap 弹出框内的 HTML

> ID：13202762
> 
> 赞同：306
> 
> 时间：2012-11-02T20:42:13.600
> 
> 标签：html, twitter-bootstrap, popover

我试图在引导弹出窗口中显示 HTML，但不知何故它不起作用。我在这里找到了一些答案，但它对我不起作用。如果我做错了什么，请告诉我。

```
<script>
  $(function(){
    $('[rel=popover]').popover({ 
      html : true, 
      content: function() {
        return $('#popover_content_wrapper').html();
      }
    });
  });
</script>

<li href="#" id="example" rel="popover" data-content="" data-original-title="A Title"> 
    popover
</li>

<div id="popover_content_wrapper" style="display: none">
    <div>This is your div content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2012-11-02T22:27:18.017

你不能使用`<li href="#"`，因为它属于`<a href="#"`这就是它不起作用的原因，改变它，一切都很好。

这是正在工作的**[JSFiddle](http://jsfiddle.net/qy9Az/2760/)**，它向您展示了如何创建引导弹出窗口。

代码的相关部分如下：

**HTML：**

```
<!-- 
Note: Popover content is read from "data-content" and "title" tags.
-->
<a tabindex="0"
   class="btn btn-lg btn-primary" 
   role="button" 
   data-html="true" 
   data-toggle="popover" 
   data-trigger="focus" 
   title="<b>Example popover</b> - title" 
   data-content="<div><b>Example popover</b> - content</div>">Example popover</a> 
```

**JavaScript：**

```
$(function(){
    // Enables popover
    $("[data-toggle=popover]").popover();
}); 
```

顺便说一句，您总是需要至少`$("[data-toggle=popover]").popover();`启用弹出框。但`data-toggle="popover"`你也可以使用`id="my-popover"`or代替`class="my-popover"`。只要记住使用 eg:`$("#my-popover").popover();`在这些情况下启用它们。

这是完整规范的链接： **[Bootstrap Popover](https://getbootstrap.com/docs/3.4/javascript/#popovers)**

**奖金：**

如果由于某种原因您不喜欢或无法从`data-content`and`title`标签中读取弹出窗口的内容。您还可以使用隐藏的 div 和更多的 JavaScript。这是一个**[例子](http://jsfiddle.net/qy9Az/2761/)**。

* * *

## 回答 #2

> 赞同：298
> 
> 时间：2013-05-02T10:34:54.970

你可以使用属性`data-html="true"`：

```
<a href="#" id="example"  rel="popover" 
    data-content="<div>This <b>is</b> your div content</div>" 
    data-html="true" data-original-title="A Title">popover</a> 
```

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2014-10-16T16:00:34.887

以可重用方式指定弹出内容的另一种方法是创建一个新的数据属性`data-popover-content`，并像这样使用它：

HTML：

```
<!-- Popover #1 -->
<a class="btn btn-primary" data-placement="top" data-popover-content="#a1" data-toggle="popover" data-trigger="focus" href="#" tabindex="0">Popover Example</a>

<!-- Content for Popover #1 -->
<div class="hidden" id="a1">
  <div class="popover-heading">
    This is the heading for #1
  </div>

  <div class="popover-body">
    This is the body for #1
  </div>
</div> 
```

JS：

```
$(function(){
    $("[data-toggle=popover]").popover({
        html : true,
        content: function() {
          var content = $(this).attr("data-popover-content");
          return $(content).children(".popover-body").html();
        },
        title: function() {
          var title = $(this).attr("data-popover-content");
          return $(title).children(".popover-heading").html();
        }
    });
}); 
```

当您有大量 html 放入弹出框时，这会很有用。

这是一个示例小提琴：http: [//jsfiddle.net/z824fn6b/](http://jsfiddle.net/z824fn6b/)

* * *

## 回答 #4

> 赞同：87
> 
> 时间：2012-11-02T21:59:55.223

您需要创建一个启用了 html 选项的弹出框实例（将其放在弹出框 JS 代码之后的 javascript 文件中）：

`$('.popover-with-html').popover({ html : true });`

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-02-17T13:26:25.877

我在列表中使用了弹出窗口，我通过 HTML 举了一个例子

```
<a type="button" data-container="body" data-toggle="popover" data-html="true" data-placement="right" data-content='<ul class="nav"><li><a href="#">hola</li><li><a href="#">hola2</li></ul>'> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-01-14T16:58:31.710

您只需要放入`data-html="true"`链接弹出框。会工作的。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-08-02T06:51:41.570

这是一个老问题，但这是另一种方式，使用 jQuery 重用弹出框并继续使用原始引导数据属性以使其更具语义：

### 链接

```
<a href="#" rel="popover" data-trigger="focus" data-popover-content="#popover">
   Show it!
</a> 
```

### 要显示的自定义内容

```
<!-- Let's show the Bootstrap nav on the popover-->
<div id="list-popover" class="hide">
    <ul class="nav nav-pills nav-stacked">
        <li><a href="#">Action</a></li>
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li><a href="#">Separated link</a></li>
    </ul>
</div> 
```

### Javascript

```
$('[rel="popover"]').popover({
    container: 'body',
    html: true,
    content: function () {
        var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
        return clone;
    }
}); 
```

摆弄完整的例子：http: [//jsfiddle.net/tomsarduy/262w45L5/](http://jsfiddle.net/tomsarduy/262w45L5/)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-06-19T03:10:49.797

[这是对杰克的优秀答案](https://stackoverflow.com/a/26408903/3786856)的轻微修改。

以下内容确保没有 HTML 内容的简单弹出框不受影响。

JavaScript：

```
$(function(){
    $('[data-toggle=popover]:not([data-popover-content])').popover();
    $('[data-toggle=popover][data-popover-content]').popover({
        html : true,
        content: function() {
          var content = $(this).attr("data-popover-content");
          return $(content).children(".popover-body").html();
        },
        title: function() {
          var title = $(this).attr("data-popover-content");
          return $(title).children(".popover-heading").html();
        }
    });
}); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-06-27T08:10:10.647

我真的很讨厌将长 HTML 放在属性中，这是我的解决方案，简单明了（替换 ? 为您想要的任何内容）：

```
<a class="btn-lg popover-dismiss" data-placement="bottom" data-toggle="popover" title="Help">
    <h2>Some title</h2>
    Some text
</a> 
```

然后

```
var help = $('.popover-dismiss');
help.attr('data-content', help.html()).text(' ? ').popover({trigger: 'hover', html: true}); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-03-12T19:37:21.007

在最新版本的 bootstrap 4.6 上，您可能还需要`sanitize:false`用于添加复杂的 html。

```
$('.popover-with-html').popover({ html : true, sanitize : false }) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-04T07:43:01.983

您可以更改文件'ui-bootstrap-tpls-0.11.0.js'中的'template/popover/popover.html'写：“bind-html-unsafe”而不是“ng-bind”

它将显示所有带有 html 的弹出框。*它不安全的html。仅在您信任 html 时使用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-19T01:43:15.697

您可以使用 popover 事件，并通过属性 'data-width' 控制宽度

```
$('[data-toggle="popover-huongdan"]').popover({ html: true });
$('[data-toggle="popover-huongdan"]').on("shown.bs.popover", function () {
    var width = $(this).attr("data-width") == undefined ? 276 : parseInt($(this).attr("data-width"));
    $("div[id^=popover]").css("max-width", width);
});
```

```
 <a class="position-absolute" href="javascript:void(0);" data-toggle="popover-huongdan" data-trigger="hover" data-width="500" title="title-popover" data-content="html-content-code">
 <i class="far fa-question-circle"></i>
 </a>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-04T14:30:39.940

实际上，如果您将 Bootstrap5 与 Django 一起使用，那么他们将内容作为字符串传递的方法是完美的，并且符合 Django 的模板包含。您可以使用所需的任何部分 HTML 创建一个模板文件，例如，对于 Bootstrap5 似乎没有 X-editable 似乎可以工作，所以您可能希望将行编辑与 Ok|Cancel 按钮一起作为内容. 无论如何，这就是我的意思：

```
 <button data-bs-content="{% include './popover_content.html' %}" type="button" class="btn btn-lg btn-danger" data-bs-toggle="popover" title="Popover title" >
  Click to toggle popover
 </button> 
```

我的`settings.py`模板部分如下所示：

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,     # True is necessary for django-bootstrap5 to work!
        'OPTIONS': {
            'debug': True,
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
] 
```

我将（每个应用程序的）模板保存在一个`<project dir>/templates/<app name>`文件夹中。我就在上面的示例代码经过测试的地方`MyMainApp/popover_content.html`旁边。`MyMainApp/home.html`但是，如果您将模板保存在每个应用程序的 Django 文件夹中，那么您需要将“MyApp/templates”添加到`TEMPLATES[0]{'DIRS': ['MyApp/templates', 'MyApp2/templates']}`列表中。

因此，至少这将使您能够将弹出框 HTML 放入通常的、语法高亮的 Django 模板格式，并充分利用 Django 模板的模块化到组件中。

我个人打算用它来制作一个可编辑的标签（我的应用程序中一些数据的标题和描述字段）。

一个缺点是，如果在包含： `"{% include './popover_content.html' %}", then you must use single quotes all throughout the` popover_content.html` 模板时使用双引号 (")。

您还需要为弹出框启用 html，因此您的站点范围的弹出框初始化程序将变为：

```
<script type="text/javascript">
  $(document).ready(() => {
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    var popoverList = popoverTriggerList.map(
      function (popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl, {
          html: true,
        });
      });
  });
</script> 
```

这是（无样式的）结果。总之，使用默认提供的字符串传入方法，并传入一个包含的Django模板文件。问题解决了！

[![在此处输入图像描述](../Images/a35f5aca89e9fe39c52157e353059f22.png)](https://i.stack.imgur.com/wxHh2.png)

# c# - Custom atomic UPDATE commands inside SaveChanges()

> ID：13202765
> 
> 赞同：1
> 
> 时间：2012-11-02T20:42:28.850
> 
> 标签：c#, entity-framework, transactions, dapper, savechanges

For various reasons I need to be able to do several custom SQL `UPDATE` commands when I call `SaveChanges` on a `DbContext`. I want this to happen atomically so either both the regular `SaveChanges` and the SQL succeeds, or neither does.

I don't know how to accomplish this though. What I've tried so far is this and various variations:

[EF transactions — Gist](https://gist.github.com/4004127)

The error here is (on the `ExecuteSqlCommand` call):

> ExecuteNonQuery requires the command to have a transaction when the connection assigned to the command is in a pending local transaction.

Okay, fair enough. The `ExecuteSqlCommand` doesn't have an overload that accepts a transaction though. So, I installed the Dapper package and replaced the offending line with this Dapper call and I pass in the transaction:

```
this.Database.Connection
  .Execute("insert into Tests (Foo, Bar) values ('test', 2)", 
  transaction: tran); 
```

but now the error happens on `base.SaveChanges()` and it gives me the following:

> SqlConnection does not support parallel transactions.

So apparently `SaveChanges` always creates a new transaction even though I created one on the connection of the datacontext already?

Is there any way in which I can accomplish what I want?

I'm using Entity Framework 5.0 Code First.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:37:23.460

环绕`TransactionScope`所有操作。此类是 .NET 事务的通用抽象。EF 和`SqlConnection`'s 将自动登记。请务必寻找最佳实践，因为存在一些陷阱，例如意外触发分布式事务。

# xslt - XSLT 1.0 - 从变量中删除重复节点

> ID：13202771
> 
> 赞同：0
> 
> 时间：2012-11-02T20:42:41.740
> 
> 标签：xslt, xslt-1.0

我已经看过很多关于此的帖子，但没有一个可以帮助我找出我的问题。

测试1.xml

```
<table>
    <row>
        <col1>A</col1>
    </row>
    <row>
        <col1>B</col1>
    </row>
    <row>
        <col1>C</col1>
    </row>
</table> 
```

测试2.xml

```
<table>
    <row>
        <col1>A</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>B</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>A</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>C</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>A</col1>
        <col2>DEF</col2>
    </row>

</table> 
```

测试.xsl (XSLT 1.0)

```
<xsl:variable name="input" select="document('test1.xml')/>

<xsl:template match="/">
    <xsl:apply-templates select="$input" mode="special"/>
</xsl:template>

<xsl:template match="node()|@" mode="special">
    <xsl:copy>
        <xsl:apply-templates select="node()|@" mode="special"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="Row" mode="special">
    <xsl:variable name="cols" select="document('test2.xml')/Table/Row[current()/Col1 = Col1]/Col2"/>
    <xsl:variable name="unique_cols" select="$cols[not(. =  preceding-sibling::*)]"/>

    <!-- Debug -->
    <xsl:for-each select="$unique_cols">
        <xsl:copy-of select="."/>
    </xsl:for-each>
    ----
</xsl:template> 
```

预期输出：

```
<col2>ABC</col2>
<col2>DEF</col2>
----
<col2>ABC</col2>
----
<col2>ABC</col2> 
```

电流输出：

```
<col2>ABC</col2>
<col2>ABC</col2>
<col2>DEF</col2>
----
<col2>ABC</col2>
----
<col2>ABC</col2> 
```

$unique_cols 中的 col2 值应该根据 col1 值不同。如果可以在 $cols 中选择唯一的 col2 值，那就更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:39:45.247

**只需更换**：

```
 <xsl:variable name="unique_cols" select="$cols[not(. =  preceding-sibling::*)]"/> 
```

**与**：

```
 <xsl:variable name="unique_cols" select=
         "$cols[not(../col1 =  ../preceding-sibling::*/col1)]"/> 
```

**完整的转换（最初更正以修复大量词汇错误）现在变为（也使用我自己的文件-Uris）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="input" select=
      "document('file:///c:/temp/delete/test1.xml')"/>

    <xsl:template match="/">
        <xsl:apply-templates select="$input" mode="special"/>
    </xsl:template>

    <xsl:template match="node()|@*" mode="special">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" mode="special"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="row" mode="special">
        <xsl:variable name="cols" select=
        "document('file:///c:/temp/delete/test2.xml')
             /table
               /row[current()/col1 = col1]
                 /col2"/>
        <xsl:variable name="unique_cols" select=
             "$cols[not(../col1 =  ../preceding-sibling::*/col1)]"/>

        <!-- Debug -->
        <xsl:for-each select="$unique_cols">
            <xsl:copy-of select="."/>
        </xsl:for-each>
        ----
    </xsl:template>
</xsl:stylesheet> 
```

文件是：

c:/temp/delete/test1.xml:

```
<table>
    <row>
        <col1>A</col1>
    </row>
    <row>
        <col1>B</col1>
    </row>
    <row>
        <col1>C</col1>
    </row>
</table> 
```

和： c:/temp/delete/test2.xml：

```
<table>
    <row>
        <col1>A</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>B</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>A</col1>
        <col2>ABC</col2>
    </row>
    <row>
        <col1>C</col1>
        <col2>ABC</col2>
    </row>
</table> 
```

**当对任何 XML 文档（未使用）执行转换时，会产生所需的正确结果**：

```
<table>

   <col2>ABC</col2>
        ----

    <col2>ABC</col2>
        ----

    <col2>ABC</col2>
        ----

</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:37:15.077

我想我可能已经根据另一篇帖子（https://groups.google.com/forum/?fromgroups#!topic/microsoft.public.xsl/i8FwJUD0r8U）上提供的答案弄清楚了这一点。

```
<xsl:variable name="cols" select=
   "document('test2.xml')/table/row[current()/col1 = col1]/col2[not(. = ../preceding-sibling::*/col2[current()/col1 = ../col1])]"/> 
```

这似乎将唯一的 col2 值选择到 $cols 中，从而消除了对第二个变量的需要。

# iphone - NodeJS Node-apn implementation as daemon

> ID：13202772
> 
> 赞同：0
> 
> 时间：2012-11-02T20:42:43.427
> 
> 标签：iphone, ios, node.js, push-notification, apple-push-notifications

I have a node-apn nodejs script running as a daemon on AmazonWS. The daemon runs fine and the script stays up and comes back when it goes down but I believe I am having a synchronous execution and exiting issue with node.js. When I release the process with process.exit(); even though all console.logs output saying they have sent my messages, they never are received on the phone. I decided to remove the exit and let the process "hang" after execution and all messages were sent successfully. This led me to do the following implementation using an ASYNC function, but the same result seems to be happening. Can anyone provide insight to this? There are no errors being thrown from APN or anywhere else.

```
function closeDB()
{ 

    connection.end(function(err) {
    if (err) {
        console.log("ERROR: " + util.inspect(err, false, 5));
        process.exit(1);
    } 

    console.log("APNS-PUSH: COMPLETED.");
});

setTimeout(function(){process.exit();}, 50);

} // End of closeDB()

function apnsError(err, notification)
{
console.log(err);
console.log(notification);
closeDB();
}  

function async(arg, callback) 
{
apnsConnection.sendNotification(arg);
console.log(arg); 
setTimeout(function() { callback(1); }, 100);
} 

/**
* Our MySQL query callback.
*/
function queryCB(err, results) 
{

//error in our all, report and exit
if (err) {
    console.log("ERROR: " + util.inspect(err, false, 5));
    closeDB();
} 

if(results.length == 0)
{
    closeDB();
}

var notes = [];
var count = 0;

try {
    for( var i = 0; i < results.length; i++ ) {
        var myDevice = new apns.Device(results[i]['udid']);

        var note = new apns.Notification();

        note.expiry = Math.floor(Date.now() / 1000) + 3600; // Expires 1 hour from now.
        note.badge = results[i]["notification_count"];
        note.sound = "ping.aiff";
        note.alert = results[i]["message"];
        note.device = myDevice;

        connection.query('UPDATE `tbl_notifications` SET `sent`=1 WHERE `id`=' + results[i]["id"] , function(err, results) {
                if(err)
                {
                    console.log("ERROR: " + util.inspect(err, false, 5));
                }
            });

        notes.push(note);
    }
} catch( err ) {
    console.log('error: ' + err)
}

console.log(notes.length);

notes.forEach(function(nNode) {
    async(nNode, function(result) {
        count++;
        if(count == notes.length) {
            closeDB();
        }
    })
});         

} // End of queryCB() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:28:05.750

我有同样的问题，杀死进程也杀死了打开的套接字连接并且不允许发送通知。我提出的解决方案不是一个理想的解决方案，但它也适用于您的情况。我查看了[node-apn](https://github.com/argon/node-apn)代码，发现 Connection 对象继承自[EventEmitter](http://nodejs.org/api/events.html#events_emitter_emit_event_arg1_arg2)，因此您可以像这样监视对象上的事件：

```
var apnsConnection = new apn.Connection(options)

apnsConnection.sendNotification(notification)

apnsConnection.on('transmitted', function(){
    console.log("Transmitted")
    callback()
})

apnsConnection.on('error', function(){
    console.log("Error")
    callback()
}) 
```

这是监视发送通知的套接字，所以我不知道它在确定通知何时成功传递到 Apple 的 APNS 服务器时有多准确，但它对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:03:19.087

您看到此问题的原因是，当您使用`#pushNotification`它时，它会在模块内缓冲通知并处理异步发送。

侦听“已传输”是有效的，并且在将通知写入套接字时发出。但是，如果您的目标是在发送所有通知后关闭套接字，那么完成此操作的最简单方法是`connectionTimeout`在创建连接时使用该属性。

只需设置`connectionTimeout`为 1000（毫秒）左右，并假设您没有打开其他连接，那么该过程将自动退出。或者您可以在事件上设置事件侦听器并从那里`timeout`调用。`process.exit()`

# ruby - How might I match a string in ruby without using regular expressions?

> ID：13202775
> 
> 赞同：0
> 
> 时间：2012-11-02T20:42:55.997
> 
> 标签：ruby

Currently, I'm doing this:

```
(in initialize)
 @all = Stuff.all.each.map {|t| t.reference_date }
 @uniques = @all.uniq

results = []
@uniques.each do |k|
  i = 0
  @all.each do |x|
    i += 1 if x =~ %r{#{x}}
  end
  results << [k, i]
end 
```

And that's fine. It's going to work. But I like to avoid regular expressions when I can. I think they are a bit feo. That's spanish for ugly.

EDIT-- actually, that's not working because ruby "puts" the date as a numbered format like `2012-03-31` when the date object is placed inside of a string (as a variable, here), but its really a date object, so this worked:

```
if x.month == k.month && x.day == k.day
  i += 1
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:02:01.530

您只需 1 行就可以完成（如果我的问题当然是正确的）：

```
array = %w(a b c d a b d f t z z w w)
# => ["a", "b", "c", "d", "a", "b", "d", "f", "t", "z", "z", "w", "w"]
array.uniq.map{|i|[i, array.count(i)]}
# => [["a", 2], ["b", 2], ["c", 1], ["d", 2], ["f", 1], ["t", 1], ["z", 2], ["w", 2]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:33:28.340

您可以采取一些措施来避免*出现*正则表达式，即使用`Regexp.union`. 您可能想要这样做的原因是速度。构造良好的正则表达式比迭代列表更快，尤其是大列表。而且，通过允许您的代码构建正则表达式，您不必维护一些丑陋（feo）的东西。

例如，这是我在不同代码块中所做的事情：

```
words = %w[peer_address peer_port ssl ssl_protocol ssl_key_exchange ssl_cipher]
regex = /\b(?:#{ Regexp.union(words).source })\b/i
=> /\b(?:peer_address|peer_port|ssl|ssl_protocol|ssl_key_exchange|ssl_cipher)\b/i 
```

这使得维护正则表达式变得微不足道。并且，尝试使用它来查找文本中的子字符串以防止迭代，它会给你留下深刻印象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:06:16.370

```
results = Hash.new(0)
@all.each{|t| results[t] += 1}
# stop here if a hash is good enough.
# if you want a nested array:
results = results.to_a 
```

这是获取可枚举元素频率的标准方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:47:36.533

如果通配符对您有用，请尝试[`File.fnmatch`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-fnmatch)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T07:35:00.593

从您的代码中，我感觉到您想要获取每个`reference_date`. 这可以通过直接使用 ActiveRecord 和 SQL 来实现，而不是提取整个故事，然后在 Ruby 中执行耗时的操作。

如果您使用的是 Rails 2.x，则可以使用以下内容：

```
Stuff.find(:all, :select => "reference_date, COUNT(*)", :group => "reference_date") 
```

或者如果您使用的是 Rails 3，那么您可以将其简化为

```
Stuff.count(:group => "reference_date") 
```

# c# - What causes the extra blank line after menu items in my ASP.NET Menu under IE8?

> ID：13202779
> 
> 赞同：0
> 
> 时间：2012-11-02T20:43:09.743
> 
> 标签：c#, asp.net, internet-explorer-8, aspmenu-control

I am using asp:Menu for the first time and running into a problem.

I have a horizontal menu with four options. The third option is "Filter". Hovering over "Filter" produces a vertical drop-down menu with several options, two of which are "Filter Category One" and "Filter Category Two". The dropdown menu with those options looks fine until I hover over one of the options (such as "Filter Category One") that has children.

At that time a blank line appears under "Filter Category One" at the same time that its own menu options (children) appear off to the right. Also a blank line appears at the bottom of the level-3 menu, which is the child menu that appears when I hover over "Filter Category One". In other words, the menu with the options Filter 1.1, Filter 1.2, and Filter 1.3 (see below) has a blank line below Filter 1.3.

I suspect (but am not positive) that the blank line between Filter Category One and Filter Category Two when hovering over Filter Category One has the same cause as the extra blank line that appears after Filter 1.3.

My customer uses only IE 8\. I browsed using Firefox and Chrome and did not experience this particular problem. (Many other problems showed up, but not this particular one.)

I've found complaints about asp:Menu and IE8 at stackoverflow and elsewhere, but I have not seen a complaint identical to mine.

I would appreciate any help.

I'll be happy to attach a pic if there is a way to upload one.

FOLLOW-UP: We use IE8 Quirks Mode. The problem disappears in IE 8 Standards or IE 7 Standards mode (though other problems appear).

```
<asp:Menu 
                    OnMenuItemClick="Menu_ItemSelected"
                    Orientation="Horizontal" 
                    ID="MainMenu" 
                    runat="server" 

                    StaticDisplayLevels="1"

                    DynamicHoverStyle-BackColor="LightGray" 
                    DynamicHoverStyle-BorderColor="Black"
                    DynamicHoverStyle-BorderStyle="Solid" 
                    DynamicHoverStyle-BorderWidth="1" 

                    StaticMenuItemStyle-BorderColor="gray"
                    StaticMenuItemStyle-BorderWidth="1" 
                    StaticMenuItemStyle-BorderStyle="Solid" 
                    StaticMenuItemStyle-HorizontalPadding="15px" 

                    DynamicMenuStyle-BorderColor="Black"
                    DynamicMenuStyle-BorderStyle="Solid" 
                    DynamicMenuStyle-BorderWidth="1" 
                    DynamicMenuStyle-BackColor="WhiteSmoke"
                    DynamicMenuStyle-HorizontalPadding="0" 

                    DynamicMenuItemStyle-HorizontalPadding="5"
                    DynamicMenuItemStyle-Font-Size="X-Small"

                    >
                    <Items>
                        <asp:MenuItem Text="Home" NavigateUrl="javascript:mainPage_Click()" />
                        <asp:MenuItem Text="Job Details" NavigateUrl="javascript:jobDetailsPage_Click()" />

                        <asp:MenuItem Selectable="false" Text="Filter">

                            <asp:MenuItem Selectable="true" Text="Clear Filter"/>

                            <asp:MenuItem Selectable="false" Text="Filter Category One">
                                <asp:MenuItem Selectable="true" Text="Filter 1.1"/>
                                <asp:MenuItem Selectable="true" Text="Filter 1.2"/>
                                <asp:MenuItem Selectable="true" Text="Filter 1.3"/>
                            </asp:MenuItem>

                            <asp:MenuItem Selectable="false" Text="Filter Category Two">
                                <asp:MenuItem Selectable="true" Text="Filter 2.1"/>
                                <asp:MenuItem Selectable="true" Text="Filter 2.2"/>
                                <asp:MenuItem Selectable="true" Text="Filter 2.3"/>
                            </asp:MenuItem>

                        </asp:MenuItem>

                        <asp:MenuItem Text="Help" NavigateUrl="ITOBPSLADB_help.htm" Target="_blank" />                            
                    </Items>
                </asp:Menu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:19:29.113

无法在兼容性视图中使用以下代码和 IE8 复制您的问题。请更正我的文档类型或此处与您的不同的任何内容，以便此代码在 IE8 中也中断/显示空白行。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication3._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
     <asp:Menu 
                    OnMenuItemClick="Menu_ItemSelected"
                    Orientation="Horizontal" 
                    ID="MainMenu" 
                    runat="server" 

                    StaticDisplayLevels="1"

                    DynamicHoverStyle-BackColor="LightGray" 
                    DynamicHoverStyle-BorderColor="Black"
                    DynamicHoverStyle-BorderStyle="Solid" 
                    DynamicHoverStyle-BorderWidth="1" 

                    StaticMenuItemStyle-BorderColor="gray"
                    StaticMenuItemStyle-BorderWidth="1" 
                    StaticMenuItemStyle-BorderStyle="Solid" 
                    StaticMenuItemStyle-HorizontalPadding="15px" 

                    DynamicMenuStyle-BorderColor="Black"
                    DynamicMenuStyle-BorderStyle="Solid" 
                    DynamicMenuStyle-BorderWidth="1" 
                    DynamicMenuStyle-BackColor="WhiteSmoke"
                    DynamicMenuStyle-HorizontalPadding="0" 

                    DynamicMenuItemStyle-HorizontalPadding="5"
                    DynamicMenuItemStyle-Font-Size="X-Small"

                    >
                    <Items>
                        <asp:MenuItem Text="Home" NavigateUrl="javascript:mainPage_Click()" />
                        <asp:MenuItem Text="Job Details" NavigateUrl="javascript:jobDetailsPage_Click()" />

                        <asp:MenuItem Selectable="false" Text="Filter">

                            <asp:MenuItem Selectable="true" Text="Clear Filter"/>

                            <asp:MenuItem Selectable="false" Text="Filter Category One">
                                <asp:MenuItem Selectable="true" Text="Filter 1.1"/>
                                <asp:MenuItem Selectable="true" Text="Filter 1.2"/>
                                <asp:MenuItem Selectable="true" Text="Filter 1.3"/>
                            </asp:MenuItem>

                            <asp:MenuItem Selectable="false" Text="Filter Category Two">
                                <asp:MenuItem Selectable="true" Text="Filter 2.1"/>
                                <asp:MenuItem Selectable="true" Text="Filter 2.2"/>
                                <asp:MenuItem Selectable="true" Text="Filter 2.3"/>
                            </asp:MenuItem>

                        </asp:MenuItem>

                        <asp:MenuItem Text="Help" NavigateUrl="ITOBPSLADB_help.htm" Target="_blank" />                            
                    </Items>
                </asp:Menu>
    </div>
    </form>
</body>
</html> 
```

# android - 如何从 InputMethodService 获取窗口？

> ID：13202786
> 
> 赞同：4
> 
> 时间：2012-11-02T20:43:51.660
> 
> 标签：android, android-view, android-windowmanager

是否可以获取特定视图（或`PopupWindow`）的 Window 对象？

**我的应用是一个键盘，所以它是一个服务（一个`InputMethodService`），而不是一个活动。**因此我不能使用`Activity.getWindow()`. 但是，它有视图，所以它大概也有一个窗口，不是吗？我如何得到它？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:50:14.543

我找到了解决方案：

```
 InputMethodService ims;
    ...
    Dialog dialog = ims.getWindow();
    Window window = dialog.getWindow(); 
```

或者简单地说：

```
 Window window = ims.getWindow().getWindow(); 
```

（这适用于 InputMethodService，不一定适用于其他服务。）

# java - 在 JSCH 中创建新目录之前如何检查目录是否存在

> ID：13202789
> 
> 赞同：10
> 
> 时间：2012-11-02T20:43:59.210
> 
> 标签：java, directory, jsch

如何在使用 JSCH SFTP API 创建新目录之前检查目录是否存在？我正在尝试使用`lstat`，但不确定它是否能完成我需要的工作。提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-21T12:41:09.670

这就是我在[JSch](http://www.jcraft.com/jsch/)中检查目录存在的方式。

如果目录不存在则创建目录

```
ChannelSftp channelSftp = (ChannelSftp)channel;
String currentDirectory=channelSftp.pwd();
String dir="abc";
SftpATTRS attrs=null;
try {
    attrs = channelSftp.stat(currentDirectory+"/"+dir);
} catch (Exception e) {
    System.out.println(currentDirectory+"/"+dir+" not found");
}

if (attrs != null) {
    System.out.println("Directory exists IsDir="+attrs.isDir());
} else {
    System.out.println("Creating dir "+dir);
    channelSftp.mkdir(dir);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-02T21:20:13.370

在这种情况下，最好只进行创建并处理错误。这样操作是原子的，并且在 SSH 的情况下，您还可以节省大量的网络流量。如果您先进行测试，则有一个时间窗口，在此期间情况可能会发生变化，无论如何您都必须处理错误结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-30T13:03:12.907

我在更广泛的背景下重复相同的答案。检查目录是否存在并创建新目录的特定行是

```
 SftpATTRS attrs;
            try {
                attrs = channel.stat(localChildFile.getName());
            }catch (Exception e) {
                channel.mkdir(localChildFile.getName());
            } 
```

笔记。这`localChildFile.getName()`是您要检查的目录名称。整个类附在下面，它将目录的文件或内容递归地发送到远程服务器。

```
import com.jcraft.jsch.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.*;

/**
 * Created by krishna on 29/03/2016.
 */
public class SftpLoader {
private static Logger log = LoggerFactory.getLogger(SftpLoader.class.getName());

ChannelSftp channel;
String host;
int    port;
String userName ;
String password ;
String privateKey ;

public SftpLoader(String host, int port, String userName, String password, String privateKey) throws JSchException {
    this.host = host;
    this.port = port;
    this.userName = userName;
    this.password = password;
    this.privateKey = privateKey;
    channel = connect();
}

private ChannelSftp connect() throws JSchException {
    log.trace("connecting ...");

    JSch jsch = new JSch();
    Session session = jsch.getSession(userName,host,port);
    session.setPassword(password);
    jsch.addIdentity(privateKey);
    java.util.Properties config = new java.util.Properties();
    config.put("StrictHostKeyChecking", "no");
    session.setConfig(config);
    session.connect();
    Channel channel = session.openChannel("sftp");
    channel.connect();
    log.trace("connected !!!");
    return (ChannelSftp)channel;
}

public void transferDirToRemote(String localDir, String remoteDir) throws SftpException, FileNotFoundException {
    log.trace("local dir: " + localDir + ", remote dir: " + remoteDir);

    File localFile = new File(localDir);
    channel.cd(remoteDir);

    // for each file  in local dir
    for (File localChildFile: localFile.listFiles()) {

        // if file is not dir copy file
        if (localChildFile.isFile()) {
           log.trace("file : " + localChildFile.getName());
            transferFileToRemote(localChildFile.getAbsolutePath(),remoteDir);

        } // if file is dir
        else if(localChildFile.isDirectory()) {

            // mkdir  the remote
            SftpATTRS attrs;
            try {
                attrs = channel.stat(localChildFile.getName());
            }catch (Exception e) {
                channel.mkdir(localChildFile.getName());
            }

            log.trace("dir: " + localChildFile.getName());

            // repeat (recursive)
            transferDirToRemote(localChildFile.getAbsolutePath(), remoteDir + "/" + localChildFile.getName());
            channel.cd("..");
        }
    }

}

 public void transferFileToRemote(String localFile, String remoteDir) throws SftpException, FileNotFoundException {
   channel.cd(remoteDir);
   channel.put(new FileInputStream(new File(localFile)), new File(localFile).getName(), ChannelSftp.OVERWRITE);
}

public void transferToLocal(String remoteDir, String remoteFile, String localDir) throws SftpException, IOException {
    channel.cd(remoteDir);
    byte[] buffer = new byte[1024];
    BufferedInputStream bis = new BufferedInputStream(channel.get(remoteFile));

    File newFile = new File(localDir);
    OutputStream os = new FileOutputStream(newFile);
    BufferedOutputStream bos = new BufferedOutputStream(os);

    log.trace("writing files ...");
    int readCount;
    while( (readCount = bis.read(buffer)) > 0) {
        bos.write(buffer, 0, readCount);
    }
    log.trace("completed !!!");
    bis.close();
    bos.close();
} 
```

# r - 如何在条形图右侧放置分类标签？

> ID：13202790
> 
> 赞同：1
> 
> 时间：2012-11-02T20:43:59.647
> 
> 标签：r, lattice

在默认的 Lattice 条形图中，分类变量标签放置在左侧。我也想把它们放在右边。我可以使用 来操作数字刻度和标签的位置`scales`，但在移动分类标签方面没有成功。研究`help(barchart)`和萨卡的书并没有得出答案（这并不是说答案不存在）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:54:01.750

你的`scales`论点是正确的。尝试添加`alternating = 3`到 y 比例参数列表。

```
barchart(variety ~ yield, data = barley, groups = year, stack = TRUE,
         ylab = "Barley Yield (bushels/acre)",
         scales = list(x = list(rot = 45), y = list(alternating = 3)),
         horizontal = TRUE) 
```

![在此处输入图像描述](../Images/85607f9c678630b0e42fb2e5b418bdf7.png)

# java - change the reference passed to function in java

> ID：13202797
> 
> 赞同：0
> 
> 时间：2012-11-02T20:44:38.437
> 
> 标签：java

I know that we cannot change the reference passed to a function such as

```
void fun(dog a){
 a=null;
} 
```

After executing the function

```
main(String[] args){

 dog a=new dog();
 fun(a);
} 
```

the dog a is not changed. So I was wondering how can we change the reference a to null inside a function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:46:11.967

你不能。你能做的最接近的事情是

```
 Dog fun(Dog a) {
   return null;
 }

 public static void main(String[] args){
   Dog a = new Dog();
   a = fun(a);
 } 
```

（除其他外，这种限制可以减少“远处的诡异动作”——例如，局部变量引用*只能*作为显式赋值的结果而改变。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:46:31.337

Java 是按值传递，其中传递引用的*值*，因此新的引用值将作为参数传递。当此引用指向方法内的新对象时，引用的更改不会反映在方法外的对象上。

您可能需要执行以下操作来对`null`.

```
Object fun(){
 return null;
}

main(String[] args){

 dog a=new dog();
 a=fun();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:47:40.593

Java 严格来说是一种按值传递的语言（[有关详细信息，请参阅此](http://javadude.com/articles/passbyvalue.htm)内容）。简而言之，这意味着，当您将对象引用传递给方法时，会为该方法创建引用的副本。因此，您为使函数中的引用无效所做的任何事情都只是使引用变量的本地副本无效，而它所指向的对象仍保留在内存中，安全无虞。

我想一个简单的类比就像有两条平行的街道通向同一栋建筑。您可以摧毁其中一条道路，但这对建筑物或另一条道路没有影响。

# python - Python 代码：几何布朗运动 - 怎么了？

> ID：13202799
> 
> 赞同：9
> 
> 时间：2012-11-02T20:44:51.657
> 
> 标签：python, finance, random-walk, stochastic

我对 Python 很陌生，但是对于大学的论文，我需要应用一些模型，最好使用 Python。我花了几天时间处理我附加的代码，但我真的无能为力，出了什么问题，它没有创建一个看起来像标准布朗运动的随机过程。我的 mu 和 sigma 等参数（预期收益或漂移和波动率）往往只会改变噪声过程的斜率。那是我的问题，一切看起来都像噪音。希望我的问题足够具体，这是我的代码：

```
import math
from matplotlib.pyplot import *
from numpy import *
from numpy.random import standard_normal

'''
geometric brownian motion with drift!

Spezifikationen:

    mu=drift factor [Annahme von Risikoneutralitaet]
    sigma: volatility in %
    T: time span
    dt: lenght of steps
    S0: Stock Price in t=0
    W: Brownian Motion with Drift N[0,1] 
'''

T=1
mu=0.025
sigma=0.1
S0=20
dt=0.01

Steps=round(T/dt)

t=(arange(0, Steps))
x=arange(0, Steps)
W=(standard_normal(size=Steps)+mu*t)### standard brownian motion###
X=(mu-0.5*sigma**2)*dt+(sigma*sqrt(dt)*W) ###geometric brownian motion####
y=S0*math.e**(X)

plot(t,y)

show() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T21:19:40.733

根据[维基百科](http://en.wikipedia.org/wiki/Geometric_Brownian_motion#Solving_the_SDE)，

![在此处输入图像描述](../Images/2c413b373e474eb186a8f5cada715bc5.png)

所以看来

```
X=(mu-0.5*sigma**2)*t+(sigma*W) ###geometric brownian motion#### 
```

而不是

```
X=(mu-0.5*sigma**2)*dt+(sigma*sqrt(dt)*W) 
```

* * *

由于`T`代表时间范围，我认为`t`应该是

```
t = np.linspace(0, T, N) 
```

* * *

现在，根据这些 Matlab 示例（[此处](http://www-math.bgsu.edu/z/sde/matlab/wiener.m)和[此处](http://web.iitd.ac.in/~dharmar/soft/geometric_brownian.m)），它出现

```
W = np.random.standard_normal(size = N) 
W = np.cumsum(W)*np.sqrt(dt) ### standard brownian motion ### 
```

不是，

```
W=(standard_normal(size=Steps)+mu*t) 
```

请检查数学，但是，我可能是错的。

* * *

所以，把它们放在一起：

```
import matplotlib.pyplot as plt
import numpy as np

T = 2
mu = 0.1
sigma = 0.01
S0 = 20
dt = 0.01
N = round(T/dt)
t = np.linspace(0, T, N)
W = np.random.standard_normal(size = N) 
W = np.cumsum(W)*np.sqrt(dt) ### standard brownian motion ###
X = (mu-0.5*sigma**2)*t + sigma*W 
S = S0*np.exp(X) ### geometric brownian motion ###
plt.plot(t, S)
plt.show() 
```

产量

![在此处输入图像描述](../Images/88d298965c791f08fade05740fba6c8b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T12:28:11.370

一个使用高斯定律参数化的附加实现，虽然是正常的函数（而不是标准正常），有点短。

```
import numpy as np

T = 2
mu = 0.1
sigma = 0.01
S0 = 20
dt = 0.01
N = round(T/dt)
# reversely you can specify N and then compute dt, which is more common in financial litterature

X = np.random.normal(mu * dt, sigma* np.sqrt(dt), N)
X = np.cumsum(X)
S = S0 * np.exp(X) 
```

# android - 如何在 Android 上指定仅适用于手机或平板电脑的活动

> ID：13202805
> 
> 赞同：32
> 
> 时间：2012-11-02T20:45:15.583
> 
> 标签：android, android-activity, android-manifest

我正在查看[Google I/O Session 2012 应用程序](http://code.google.com/p/iosched/ "iosched源代码")并遇到了这个 TODO

```
// TODO: use <meta-data> element instead
private static final Class[] sPhoneActivities = new Class[]{
        MapActivity.class,
        SessionDetailActivity.class,
        SessionsActivity.class,
        TrackDetailActivity.class,
        VendorDetailActivity.class,
};

// TODO: use <meta-data> element instead
private static final Class[] sTabletActivities = new Class[]{
        MapMultiPaneActivity.class,
        SessionsVendorsMultiPaneActivity.class,
};

public static void enableDisableActivities(final Context context) {
    boolean isHoneycombTablet = isHoneycombTablet(context);
    PackageManager pm = context.getPackageManager();

    // Enable/disable phone activities
    for (Class a : sPhoneActivities) {
        pm.setComponentEnabledSetting(new ComponentName(context, a),
                isHoneycombTablet
                        ? PackageManager.COMPONENT_ENABLED_STATE_DISABLED
                        : PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                PackageManager.DONT_KILL_APP);
    }

    // Enable/disable tablet activities
    for (Class a : sTabletActivities) {
        pm.setComponentEnabledSetting(new ComponentName(context, a),
                isHoneycombTablet
                        ? PackageManager.COMPONENT_ENABLED_STATE_ENABLED
                        : PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP);
    }
} 
```

这让我想知道如何执行该 TODO。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-02T20:45:15.583

我想出了这种方法（注意：这是在[Google I/O Session 2012 应用程序](http://code.google.com/p/iosched/ "iosched源代码")UIUtilis.java 之后建模的）：

在`AndroidManifest.xml`定义`Activity`中包括`<meta-data>`：

```
<!-- Note: specify the target device for Activities with target_device meta-data of "universal|phone|tablet"
           see UIUtils.java (configureDeviceSpecificActivities) for more details. -->

<!-- Activities for both phones and tablets -->
<activity android:name=".ui.AccountActivity" 
          android:configChanges="orientation|keyboardHidden" 
          android:label="@string/app_name"
          android:theme="@style/Theme.Accounts">
          <meta-data android:name="target_device" android:value="universal"/>
</activity>

<!-- Activities for tablets -->
<activity android:name=".ui.CoolMultipaneActivity"
          android:label="@string/app_name">
          <meta-data android:name="target_device" android:value="tablet"/> 
```

努力放在方法上`configureDeviceSpecificActivities(Context context)`

```
/**
 * Enables and disables {@linkplain android.app.Activity activities} based on their "target_device" meta-data and
 * the current device. Add <meta-data name="target_device" value="tablet|phone|universal" /> to an activity to
 * specify its target device.
 * @param context the current context of the device
 * @see #isHoneycombTablet(android.content.Context)
 */
public static void configureDeviceSpecificActivities(Context context) {
    final PackageManager package_manager = context.getPackageManager();
    final boolean is_honeycomb_tablet = isHoneycombTablet(context);
    try {
        final ActivityInfo[] activity_info = package_manager.getPackageInfo(context.getPackageName(),
                PackageManager.GET_ACTIVITIES | PackageManager.GET_META_DATA).activities;
        for (ActivityInfo info : activity_info) {
            final String target_device = info.metaData.getString("target_device");
            if (target_device == null) break;
            target_device = target_device.toLowerCase(Locale.US);
            final boolean is_for_tablet = target_device.equals("tablet");
            final boolean is_for_phone = target_device.equals("phone");
            final String class_name = info.name;
            package_manager.setComponentEnabledSetting(new ComponentName(context, Class.forName(class_name)),
                    is_honeycomb_tablet && is_for_phone
                            ? PackageManager.COMPONENT_ENABLED_STATE_DISABLED
                            : !is_honeycomb_tablet && is_for_tablet
                            ? PackageManager.COMPONENT_ENABLED_STATE_DISABLED
                            : PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                    PackageManager.DONT_KILL_APP);
        }
    } catch (PackageManager.NameNotFoundException error) {
        Ln.w(error.getCause());
    } catch (ClassNotFoundException error) {
        Ln.w(error.getCause());
    }
} 
```

`GET_META_DATA`有趣的事实：没有标志它就不起作用，因为`metaData`如果你不包含那个标签，它将总是返回为空。

最后一步是调用这个方法，可能是在`onCreate`你最初的`Activity`

```
@Override
protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    // Anything else you want to do in the onCreate callback

    // Set up to use the appropriate Activities for the given device
    UIUtils.configureDeviceSpecificActivities(this);
} 
```

现在，您可以拥有`Activity`专为手机和平板电脑设计的 s，以应对仅更改布局并且可能包含更多`Fragment`s 还不够的时代。

注意：如果您看到警告，`final String class_name = info.packageName + info.name;`可能必须这样做。`final String class_name = info.name;`

注意（2）：`final String target_device = info.metaData.getString("target_device", "").toLowerCase();`应该是为了向后兼容 API 12。

```
String target_device = info.metaData.getString("target_device");
if (target_device == null) break;
target_device = target_device.toLowerCase(); 
```

注意（3）：`target_device.toLowerCase();`隐式使用默认语言环境。改为使用`target_device.toLowerCase(Locale.US)`。并在上面的代码中进行了所有更改。

# parsing - 编译器设计：“变量未声明”是语法错误还是语义错误？

> ID：13202808
> 
> 赞同：5
> 
> 时间：2012-11-02T20:45:34.323
> 
> 标签：parsing, compiler-construction, semantics, syntactic-sugar, typechecking

这种类型的错误是在类型检查期间还是在解析输入时产生的？应该在什么类型下解决错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:44:46.847

我认为这是一个语义错误，因为即使您使用的是以前未绑定的标识符，您的语言也能很好地解析——即句法分析只检查程序的格式是否正确。语义分析实际上检查您的程序是否具有有效的含义——例如绑定、作用域或类型。正如@pst 所说，您可以在解析期间进行范围检查，但这是一个实现细节。AFAIK 旧的编译器曾经这样做是为了节省一些时间和空间，但我认为今天这种方法是有问题的，如果你没有一些硬性能/内存限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T09:12:37.283

该程序符合语言语法，因此在语法上是正确的。语言语法不包含诸如“必须声明标识符”之类的任何语句，并且确实没有任何方法可以这样做。在 Algol-68 项目中，按照这些思路构建两级语法的尝试失败了，据我所知，此后一直没有尝试过。

每一个的*含义（*如果有的话）是一个*语义*问题。Frank deRemer 将此类问题称为“静态语义”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T13:51:39.540

在我看来，这不是严格意义上的语法错误——也不是语义错误。如果我要为静态类型的编译语言（如 C 或 C++）实现此功能，那么我不会将检查放入解析器（因为解析器实际上无法检查此错误），而是放入代码生成器（编译器中遍历抽象语法树并将其转换为汇编代码的部分）。所以在我看来，它介于语法和语义错误之间：它是一个语法相关的错误，只能通过对代码进行语义分析来检查。

然而，如果我们考虑一种原始脚本语言，其中直接执行 AST（无需编译为字节码且没有 JIT），那么评估器/执行器函数本身会遍历 AST 并找到未声明的变量 - 在这种情况下，它将是运行时错误。不同之处在于“AST_walk()”例程位于程序生命周期的不同部分（编译时间和运行时），语言是脚本还是编译语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:06:05.710

对于需要声明标识符的语言（有很多），具有未声明标识符的程序格式错误，因此缺少声明显然是语法错误。

处理这个问题的常用方法是将有关符号的信息合并到符号表中，以便解析可以使用这些信息。

以下是标识符类型如何影响解析的几个示例：

# C / C++

一个经典案例：

```
(a)-b; 
```

取决于`a`，这是强制转换或减法：

```
#include <stdio.h>

#if TYPEDEF
typedef double a;
#else
double a = 3.0;
#endif

int main() {
  int b = 3;
  printf("%g\n", (a)-b);
  return 0;
} 
```

因此，如果`a`根本没有声明，编译器必须将程序拒绝为语法错误（这正是标准使用的词。）

# XML

这个很简单：

```
<block>Hello, world</blob> 
```

这是格式不正确的 XML，但无法使用 CFG 检测到。（尽管如此，所有 XML 解析器都会正确地拒绝它，因为它是格式错误的。）对于 HTML/SGML，在某些明确定义的情况下可能会省略结束标记，解析比较棘手，但仍然具有确定性；同样，标签的精确声明将决定有效输入的解析，并且很容易提出根据声明进行不同解析的输入。

# 英语

好吧，不是编程语言。我有很多其他编程语言示例，但我认为这可能会触发其他一些直觉。

考虑两个语法正确的句子：

```
The sheep is in the meadow.
The sheep are in the meadow. 
```

现在，怎么样：

```
The cow is in the meadow.
(*) The cow are in the meadow. 
```

第二句话是可以理解的，尽管模棱两可（名词或动词是错的吗？）但在语法上肯定是不正确的。但是为了知道那个（和其他类似的例子），我们必须知道它`sheep`有一个无标记的复数。确实，许多动物都有无标记的复数形式，所以我认为以下所有内容都是合乎语法的：

```
The caribou are in the meadow.
The antelope are in the meadow.
The buffalo are in the meadow. 
```

但绝对不是：

```
(*) The mouse are in the meadow.
(*) The bird are in the meadow. 
```

等等

* * *

似乎有一个普遍的误解，即由于句法分析器*使用*上下文无关语法分析器，因此语法分析*仅限*于解析上下文无关语法。这是不正确的。

在 C（和家族）的情况下，语法分析器使用符号表来帮助它解析。在 XML 的情况下，它使用标签堆栈，而在泛化 SGML（包括 HTML）的情况下，它也使用标签声明。因此，作为一个整体考虑的语法分析器比 CFG 更强大，而 CFG 只是分析的一部分。

给定程序通过语法分析的事实并不意味着它在语义上是正确的。例如，语法分析器需要知道是否是类型`a`才能正确解析被减去，在它是一个变量的情况下。这些验证可以在构建解析树后的类型分析期间发生，但它们仍然是编译时错误。`(a)-b``a``a``b``a`

# sql - 为 WHERE 序列中的每个元素向 SQL 查询添加行

> ID：13202809
> 
> 赞同：4
> 
> 时间：2012-11-02T20:45:34.100
> 
> 标签：sql, postgresql

我有如下 SQL 查询：

```
SELECT store_id, SUM(quantity_sold) AS count
FROM sales_table
WHERE store_id IN ('Store1', 'Store2', 'Store3')
GROUP BY store_id; 
```

这将为每个在 中具有行的商店返回一行`sales_table`，但不为没有的商店返回一行。我想要的是每家商店一行，如果没有记录，则带有`0`for 。`count`

假设我无权访问`stores`表格，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T20:48:17.427

```
with stores (store_id) as (
   values ('Store1'), ('Store2'), ('Store3')
)
select st.store_id, 
       sum(sal.quantity_sold) as cnt
from stores st
  left join sales_table sal on sal.store_id = st.store_id
group by st.store_id; 
```

如果您确实有一个`stores`表，那么只需对该表进行外连接，而不是使用公用表表达式 ( `with ..`) 来“组合”。

这也可以在没有 CTE（公用表表达式）的情况下编写：

```
select st.store_id, 
       sum(sal.quantity_sold) as cnt
from (
  values ('Store1'), ('Store2'), ('Store3')
) st
  left join sales_table sal on sal.store_id = st.store_id
group by st.store_id; 
```

（但我发现 CTE 版本更容易理解）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:02:32.693

您可以使用[`unnest()`](http://www.postgresql.org/docs/9.2/static/functions-array.html)从数组元素生成行。

```
SELECT store, sum(sales_table.quantity_sold) AS count
FROM unnest(ARRAY['Store1', 'Store2', 'Store3']) AS store
LEFT JOIN sales_table ON (sales_table.store_id = store)
GROUP BY store; 
```

# installation - 无法在 Ubuntu 12.04 上安装 JPype

> ID：13202820
> 
> 赞同：2
> 
> 时间：2012-11-02T20:46:25.283
> 
> 标签：installation, 64-bit, neo4j, ubuntu-12.04, jpype

我咨询过这个： [Cannot install JPype on ubuntu 12.04 64 bit](https://stackoverflow.com/questions/11949160/cannot-install-jpype-on-ubuntu-12-04-64-bit)

我在这里学习教程： [https ://github.com/johanlundberg/neo4j-django-tutorial](https://github.com/johanlundberg/neo4j-django-tutorial)

看来我在安装 JPype 时仍然遇到问题，尽管已经完成了该答案中的两件事：

`sudo apt-get install python-jpype`

和

`sudo apt-get install python-dev`

当我运行时，我得到的错误

`python neo4jtut/manage.py syncdb`

告诉我模块不存在，与

`home/username/djangoenv/local/lib/python2.7/site-packages/neo4j/_backend.py", line 83, in <module> import jpype, os ImportError: No module named jpype`

谁能告诉这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:52:10.480

您是否尝试像教程中那样安装它？例如，没有 virtualenv `sudo pip install /path/to/JPype-0.5.4.2.zip`，？

除了 - 你考虑[过 neo4django](https://github.com/scholrly/neo4django)吗？

# c# - 如何通过 Html Post 功能发送

> ID：13202826
> 
> 赞同：0
> 
> 时间：2012-11-02T20:47:12.070
> 
> 标签：c#, php, html

我一直在用 c# 编写一个应用程序，它的数据是通过 get 函数发送的

就像这样

```
Http://www.myweb.com/co.php?a=10&b=20 
```

我是 c# web 编程的新手，所以我想知道如何通过 post 函数发送相同的数据。因为如果我在 php 文件中使用 $_POST 它不会得到值，我研究了一下，发现 POST 函数在正文中而不是在 URL 中获取数据。

我只是将程序从 GET TO POST 转换。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:52:49.187

您可以使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx), 适当地设置[`Method`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx)和[`ContentType`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contenttype.aspx)属性：

```
var request = (HttpWebRequest)WebRequest.Create("http://www.myweb.com/co.php");

// your choice of encoding, I just picked ASCII here
var body = System.Text.Encoding.ASCII.GetBytes("a=10&b=20");

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = body.Length;

using (var stream = request.GetRequestStream()) {
    stream.Write(body, 0, body.Length);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:00:17.873

如果您的目标是 .NET 4.5，我建议您使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)如果不是，那么我会使用[WebClient](http://msdn.microsoft.com/de-de/library/system.net.webclient.aspx)：

```
WebClient webClient = new WebClient();

NameValueCollection values = new NameValueCollection();
values.Add("FirstName", "John");
values.Add("LastName", "Smith");
values.Add("Age", "46");

webClient.UploadValues("http://example.com/", values); 
```

# css - 用 h3 样式覆盖链接 CSS

> ID：13202827
> 
> 赞同：1
> 
> 时间：2012-11-02T20:47:19.900
> 
> 标签：css

我正在一个页面上显示图像，然后在底部有文本，该文本是指向特定页面的链接。

默认情况下，链接是灰色的，但我想覆盖它并让文本采用 h3 样式。

这是CSS：

```
h3{
color: #a60000;
font-size: 20px;
font-weight: normal;
font-style: normal;
font-family: mpluslight;
}

a {
color: #CCC;
font-weight: normal;
} 
```

这是HTML：

```
<h3><a href="http://mydomain.gr/">Personal Training</a></h3> 
```

我尝试将 h3 值更改为 '!important' 但这没有用。

我试图避免使用内联 CSS。尽量保持我的代码干净。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:48:18.100

您将需要这样做：

```
h3 a { color: #a60000; } 
```

...或者可能是这样的：

```
h3 a { color: inherit; } 
```

# javascript - 2 “onmouseover” 打破页面的工作

> ID：13202828
> 
> 赞同：0
> 
> 时间：2012-11-02T20:47:22.850
> 
> 标签：javascript, html

您好，我正在使用一个简单的代码在鼠标悬停时更改图片；

```
<A href="http://www.x.com" onmouseover="document.Same_size_LINK.src='rist.jpg'" onmouseout="document.Same_size_LINK.src='ist.jpg'">
<IMG SRC="ist.jpg" NAME="Same_size_LINK" WIDTH=296 HEIGHT=85 BORDER=0 >

</A> 
```

代码。它工作得很好，但是当我尝试使用其中两个代码时，它们都不起作用。

```
<A href="http://www.x.com" onmouseover="document.Same_size_LINK.src='r.jpg'" onmouseout="document.Same_size_LINK.src='d.jpg'">
<IMG SRC="d.jpg" NAME="Same_size_LINK" WIDTH=296 HEIGHT=105 BORDER=0 >

</A><br><br>

<A href="http://www.y.com" onmouseover="document.Same_size_LINK.src='rist.jpg'" onmouseout="document.Same_size_LINK.src='ist.jpg'">
<IMG SRC="ist.jpg" NAME="Same_size_LINK" WIDTH=296 HEIGHT=85 BORDER=0 >

</A> 
```

我无法解决这个问题，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:50:11.520

您需要区分名称，或者更好的是，使用 document.getElementById 并向图像添加唯一 ID

```
<A href="http://www.x.com" onmouseover="document.getElementById('Same_size_LINK-1').src='r.jpg'" onmouseout="document.getElementById('Same_size_LINK-1').src='d.jpg'">
<IMG SRC="d.jpg" id="Same_size_LINK-1" WIDTH=296 HEIGHT=105 BORDER=0 >
</A><br><br>

<A href="http://www.y.com" onmouseover="document.document.getElementById('Same_size_LINK-2').src='rist.jpg'" onmouseout="document.getElementById('Same_size_LINK-2').src='ist.jpg'">
<IMG SRC="ist.jpg" id="Same_size_LINK-2" WIDTH=296 HEIGHT=85 BORDER=0 >

</A> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:53:04.113

做这个：

```
<a href="http://www.x.com" 
   onmouseover="document.Same_size_LINK_1.src='r.jpg'"
   onmouseout="document.Same_size_LINK_1.src='d.jpg'">
<img src="d.jpg" name="Same_size_LINK_1" width="296" 
   height="105" border="0" />
</a>

<br /><br />

<a href="http://www.y.com" 
   onmouseover="document.Same_size_LINK_2.src='rist.jpg'"
   onmouseout="document.Same_size_LINK_2.src='ist.jpg'">
<img src="ist.jpg" name="Same_size_LINK_2" width="296" 
   height="105" border="0" />
</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:05:41.430

首先，欢迎来到未来！你在辐射避难所过得怎么样？对世界没有在 99 年结束感到失望？

其次，javascript 不是必需的。你可以这样做：http: [//jsfiddle.net/Shmiddty/Eg6wV/](http://jsfiddle.net/Shmiddty/Eg6wV/)

HTML：

```
<a href="http://www.x.com" class="image-button" id="button-x"/>
<a href="http://www.y.com" class="image-button" id="button-y"/>​ 
```

CSS：

```
.image-button{
    display:block;
    width:296px;

}
#button-x{
    height:105px;
    margin-bottom:1em;
    background:url(http://placehold.it/296x105/) no-repeat;
}
#button-x:hover{
    background:url(http://placekitten.com/296/105) no-repeat;
}
#button-y{
    height:85px;
    background:url(http://placehold.it/296x85/) no-repeat;
}
#button-y:hover{
    background:url(http://placekitten.com/296/85) no-repeat;
} 
```

# c - malloc() 中断循环

> ID：13202836
> 
> 赞同：-2
> 
> 时间：2012-11-02T20:48:03.693
> 
> 标签：c, heap-memory

为什么下面的代码直接显示了 Mb 占用的堆：

```
int Mb = 0;
while ( malloc(1<<20)) ++Mb;
printf("Allocated %d Mb total\n", Mb); 
```

是什么意思`1<<20`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:50:19.877

> 是什么意思`1<<20`？

向左移动 20 位的 1，也称为 2^20 = 1048576。`<<`是向左移动的位移运算符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T20:50:23.253

这意味着`2^20`这是1 MB。所以它计算MB的数量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T20:50:38.877

这是一个按位左移运算符。这意味着它需要一位（例如二进制 00000001，除了 31 前导 0），然后将该位向左移动 20 个位置，留下 2^20。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T21:11:58.650

关于“为什么下面的代码直接显示Mb占用的堆”

```
int Mb = 0;
while ( malloc(1<<20)) ++Mb;
printf("Allocated %d Mb total\n", Mb);
What is meant by 1<<20? 
```

[`malloc()`](http://linux.die.net/man/3/malloc)您正在计算尝试分配 1MB（2^20 字节，其他答案讨论移位运算符）时返回非空值的次数。动态保留的内存在堆中分配，因此它计算堆可用的 MB 数。

虽然我不确定这个估计的精度，因为`malloc`它不只是以精确指示的大小移动指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T20:57:22.273

在具有虚拟内存的现代操作系统（例如大多数 Unix、Linux、Windows）上，此代码实际上会向您显示虚拟内存大小的限制或过度使用限制（以先到者为准），而不是堆分配大小。它不断地分配更多的内存而不接触它，这样做时会造成小的内存泄漏（除非`malloc`是预先初始化分配的内存的调试变体之一；然后，如果在 Linux 上运行，OOM 杀手可能会在它到达之前杀死它`printf`)

在没有虚拟内存的（可能是现代的）操作系统上，它会显示在系统内存不足和一切崩溃和不正常烧毁之前可以分配多少内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T21:01:26.423

这将在每次更改时打印 MB 的值

> 整数 Mb = 0;
> 
> > 而 ( malloc(1<<20))
> > 
> > > printf("已分配 %d Mb 总计\n", ++Mb);

1 << 20 是 1 MB 的值（例如表示 2^20 ）：[http ://en.wikipedia.org/wiki/Megabyte](http://en.wikipedia.org/wiki/Megabyte)

# android - 仅在 HTC Sensation XL 上获取数据库调用递归错误

> ID：13202837
> 
> 赞同：0
> 
> 时间：2012-11-02T20:48:09.260
> 
> 标签：android, sql, sqliteopenhelper

我正在开发一个像本教程一样导入数据库的应用程序：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

这在大多数设备上都可以正常工作，只有在 HTC Sensation XL 上不起作用。

感谢您的帮助

这是错误代码

11-02 21:35:33.748: W/System.err(14878): java.lang.IllegalStateException: getReadableDatabase 递归调用 11-02 21:35:33.748: W/System.err(14878): 在 android.database。 sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:245) 11-02 21:35:33.748: W/System.err(14878): at.klettern.database.DatabaseHelper.createDataBase(DatabaseHelper.java:54) 11-02 21:35:33.748: W/System.err(14878): at.klettern.database.DatabaseHelper.onCreate(DatabaseHelper.java:148) 11-02 21:35:33.758: W/System.err(14878):在 android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:183) 11-02 21:35:33.758: W/System.err(14878): 在 android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java: 249) 11-02 21:35:33.758: W/System.err(14878): at.klettern.database.DatabaseRouten.(DatabaseRouten.java:39) 11-02 21:35:33.758: W/System.err(14878): at.klettern.wachauclimbing.SplashActivity.onCreate(SplashActivity.java:28) 11-02 21:35:33.758: W/ System.err(14878): 在 android.app.Activity.performCreate(Activity.java:4531) 11-02 21:35:33.768: W/System.err(14878): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation .java:1071) 11-02 21:35:33.768: W/System.err(14878): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150) 11-02 21:35:33.768: W/System .err(14878): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229) 11-02 21:35:33.768: W/System.err(14878): 在 android.app.ActivityThread.access$600(ActivityThread .java:139) 11-02 21:35:33.768: W/System.err(14878): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261) 11-02 21:35:33.778: W /系统。错误（14878）：在 android.os.Handler.dispatchMessage（Handler.java:99）11-02 21:35:33.778：W/System.err（14878）：在 android.os.Looper.loop（Looper.java :154) 11-02 21:35:33.778: W/System.err(14878): 在 android.app.ActivityThread.main(ActivityThread.java:4945) 11-02 21:35:33.778: W/System.err (14878): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-02 21:35:33.778: W/System.err(14878): 在 java.lang.reflect.Method.invoke(Method.java :511) 11-02 21:35:33.788: W/System.err(14878): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788 : W/System.err(14878): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 11-02 21:35:33.788: W/System.err(14878): 在 dalvik。 system.NativeStart.main（本机方法）35:33.778: W/System.err(14878): 在 android.os.Looper.loop(Looper.java:154) 11-02 21:35:33.778: W/System.err(14878): 在 android.app .ActivityThread.main(ActivityThread.java:4945) 11-02 21:35:33.778: W/System.err(14878): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-02 21:35: 33.778: W/System.err(14878): 在 java.lang.reflect.Method.invoke(Method.java:511) 11-02 21:35:33.788: W/System.err(14878): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal.os.ZygoteInit.main(ZygoteInit. java:551) 11-02 21:35:33.788: W/System.err(14878): 在 dalvik.system.NativeStart.main(本机方法)35:33.778: W/System.err(14878): 在 android.os.Looper.loop(Looper.java:154) 11-02 21:35:33.778: W/System.err(14878): 在 android.app .ActivityThread.main(ActivityThread.java:4945) 11-02 21:35:33.778: W/System.err(14878): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-02 21:35: 33.778: W/System.err(14878): 在 java.lang.reflect.Method.invoke(Method.java:511) 11-02 21:35:33.788: W/System.err(14878): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal.os.ZygoteInit.main(ZygoteInit. java:551) 11-02 21:35:33.788: W/System.err(14878): 在 dalvik.system.NativeStart.main(本机方法)main(ActivityThread.java:4945) 11-02 21:35:33.778: W/System.err(14878): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-02 21:35:33.778: W /System.err(14878): at java.lang.reflect.Method.invoke(Method.java:511) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551 ) 11-02 21:35:33.788: W/System.err(14878): at dalvik.system.NativeStart.main(Native Method)main(ActivityThread.java:4945) 11-02 21:35:33.778: W/System.err(14878): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-02 21:35:33.778: W /System.err(14878): at java.lang.reflect.Method.invoke(Method.java:511) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551 ) 11-02 21:35:33.788: W/System.err(14878): at dalvik.system.NativeStart.main(Native Method)ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 11 -02 21:35:33.788：W/System.err（14878）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-02 21:35:33.788: W/System.err(14878): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 11 -02 21:35:33.788：W/System.err（14878）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:11:47.180

此设备上运行的是什么 android 版本？[我在 Android 2.1 或更低版本中发现了一些致命错误。]

否则，我已经能够蚕食大部分（如果不是全部）您引用的教程，并且它从 2.2 及更高版本开始完美运行。

# forms - mailto后如何重置表格？

> ID：13202843
> 
> 赞同：0
> 
> 时间：2012-11-02T20:48:47.620
> 
> 标签：forms, action, reset, mailto

第一个问题！很高兴来到这里。:)

我设置了一个表单来验证输入，然后如果所有字段都有效，则将输入的信息发送到电子邮件：

```
<form onsubmit="return validateForm()" action="mailto:someemail@me.com" method="post" enctype="text/plain"> 
```

一切都很好！但是现在我需要在信息传输到电子邮件后重置表单（因为我的表单隐藏在同一页面上，用户可以再次单击按钮使表单出现并且上次的信息仍然存在）。我无法在我的 validateForm() 中添加一行来重置它，因为这发生在信息传输之前，导致电子邮件丢失输入的信息。我也不能强制页面重置表单onload，因为我的网页在提交后没有重新加载，我当然不想设置一个计时器来清除它。

所以我的问题是，在输入的信息传输到电子邮件后，如何仅使用 HTML 和 JavaScript 重置表单？

谢谢！

# javascript - JavaScript 日期比较奇怪

> ID：13202844
> 
> 赞同：1
> 
> 时间：2012-11-02T20:48:58.480
> 
> 标签：javascript

我对 JavaScript 日期比较有疑问。我为 10 月 31 日创建了一个 Date 对象，为 11 月 1 日创建了另一个对象，但 getTime() 为每个返回相同的数字，并且大于/小于运算符也认为日期相等。这是我的代码：

```
d1 = new Date(2012, 10, 31, 0, 0, 0, 0);
d2 = new Date(2012, 11, 1, 0, 0, 0, 0);
document.write(d1.getTime() + "<br />");
document.write(d2.getTime() + "<br />");
document.write((d1 < d2) + "<br />");
document.write((d1 > d2) + "<br />"); 
```

这是输出：

```
1354320000000
1354320000000
false
false 
```

相同的代码在其他月末也能正常工作，似乎只是这两个日期导致了问题。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:50:55.670

11 月 ( `10`) 没有 31 天，因此它将换行到 12 月 ( `11`) 1 日。

```
new Date(2012, 10, 31, 0, 0, 0, 0)
//Sat Dec 01 2012 00:00:00 GMT+0200 (FLE Standard Time)

//more wrapping:
new Date(2012, 10, 35, 0, 0, 0, 0)
//Wed Dec 05 2012 00:00:00 GMT+0200 (FLE Standard Time) 
```

# python - 从 Django UserCreateForm 中删除 help_text

> ID：13202845
> 
> 赞同：31
> 
> 时间：2012-11-02T20:49:02.540
> 
> 标签：python, django, django-models, django-registration

可能是一个糟糕的问题，但我正在使用 Django 的 UserCreationForm（稍作修改以包含电子邮件），并且我想删除 Django 自动显示在 HTML 页面上的 help_text。

在我的 HTML 页面的注册部分，它有用户名、电子邮件、密码 1 和密码 2 字段。但在用户名下方是“必需的。30 个字符或更少。字母、数字和 @... 仅限。” 在密码确认（密码 2）下，显示“输入与上述相同的密码进行验证”。

我该如何删除这些？

```
#models.py
class UserCreateForm(UserCreationForm):
    email = forms.EmailField(required=True)

    def save(self, commit=True):
        user = super(UserCreateForm, self).save(commit=False)
        user.email = self.cleaned_data['email']
        if commit:
            user.save()
        return user

    class Meta:
        model = User
        fields = ("username", "email", "password1", "password2")
        exclude = ('username.help_text')

#views.py
def index(request):
    r = Movie.objects.all().order_by('-pub_date')
    form = UserCreateForm()
    return render_to_response('qanda/index.html', {'latest_movie_list': r, 'form':form},     context_instance = RequestContext(request))

#index.html
<form action = "/home/register/" method = "post" id = "register">{% csrf_token %}
    <h6> Create an account </h6>
    {{ form.as_p }}
    <input type = "submit" value = "Create!">
    <input type = "hidden" name = "next" value = "{{ next|escape }}" />
</form> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-02T21:08:34.097

您可以将`help_text`字段设置为无`__init__`

```
from django.contrib.auth.forms import UserCreationForm
from django import forms

class UserCreateForm(UserCreationForm):
    email = forms.EmailField(required=True)

    def __init__(self, *args, **kwargs):
        super(UserCreateForm, self).__init__(*args, **kwargs)

        for fieldname in ['username', 'password1', 'password2']:
            self.fields[fieldname].help_text = None

print UserCreateForm() 
```

输出：

```
<tr><th><label for="id_username">Username:</label></th><td><input id="id_username" type="text" name="username" maxlength="30" /></td></tr>
<tr><th><label for="id_password1">Password:</label></th><td><input type="password" name="password1" id="id_password1" /></td></tr>
<tr><th><label for="id_password2">Password confirmation:</label></th><td><input type="password" name="password2" id="id_password2" /></td></tr>
<tr><th><label for="id_email">Email:</label></th><td><input type="text" name="email" id="id_email" /></td></tr> 
```

如果您进行了太多更改，在这种情况下，最好只覆盖这些字段，例如

```
class UserCreateForm(UserCreationForm):
    password2 = forms.CharField(label=_("Whatever"), widget=MyPasswordInput 
```

但在你的情况下，我的解决方案会很好用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-05-14T19:05:43.517

另一个更简洁的选择是在 Meta 类中使用 help_texts 字典。例子：

```
class UserCreateForm(UserCreationForm):
    ...
    class Meta:
        model = User
        fields = ("username", "email", "password1", "password2")
        help_texts = {
            'username': None,
            'email': None,
        } 
```

更多信息在这里：[https ://docs.djangoproject.com/en/1.11/topics/forms/modelforms/#overriding-the-default-fields](https://docs.djangoproject.com/en/1.11/topics/forms/modelforms/#overriding-the-default-fields)

适用于用户名和电子邮件，但不适用于密码 2。不知道为什么。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-13T12:37:15.427

您可以像这样将 css 类添加到registration_form.html 文件中。

```
<style>

.helptext{
  visibility: hidden;
}

</style>
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-06-17T17:11:52.997

简单的 CSS 解决方案。

```
<style>
     #hint_id_username, #hint_id_password1 {
         display: none;
     }
</style> 
```

当表单呈现检查页面源代码时，您将看到每个帮助文本的 id。比如`hint_id_username`对于每个表单域。使用上面的 CSS 隐藏文本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-08-05T13:43:12.607

我有一个类似的问题。根据其中一条评论，这是阅读文档后的解决方案。

```
class UserCreateForm(UserCreationForm):
    password1 = forms.CharField(label='Enter password', 
                                widget=forms.PasswordInput)
    password2 = forms.CharField(label='Confirm password', 
                                widget=forms.PasswordInput)
    class Meta:
        model=User
        fields=("username","email","first_name",
                "last_name","password1","password2")
        help_texts = {
            "username":None,
        } 
```

基本上，我们正在尝试做的是通过为我们的新类表单重新创建密码字段来覆盖自动设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-03T11:07:05.720

或者只是遍历表单字段并省略输出“field.help_text”

```
{% for field in form %}
    <div class="fieldWrapper">
        {{ field.errors }}
        {{ field.label_tag }} {{ field }}
        <!--
        {% if field.help_text %}
           <p class="help">{{ field.help_text|safe }}</p>
        {% endif %}
        -->
    </div>
{% endfor %} 
```

Django 文档： [https ://docs.djangoproject.com/en/3.0/topics/forms/#looping-over-the-form-s-fields](https://docs.djangoproject.com/en/3.0/topics/forms/#looping-over-the-form-s-fields)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-24T16:58:22.547

对于那些想要更改密码 1 和 2 的默认文本而无需重新创建默认模型的人，可以尝试像我一样做。只需在您的类元下面添加这个初始化函数。

```
def __init__(self, *args, **kwargs):
      super().__init__(*args, **kwargs)
      self.fields['password1'].help_text='Your text'
      self.fields['password2'].help_text='Your text' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-15T14:18:21.163

只需转到 UserCreationForm 并进行所需的更改。

非常简单的按住键盘上的控制按钮并点击 UserCreationForm 您将获得 UserCreationForm 根据您的需要进行所需的更改并保存它。正如我在下面的示例中为我所做的那样，我评论了帮助内容。

```
 error_messages = {
    'password_mismatch': _("The two password fields didn't match."),
}
password1 = forms.CharField(
    label=_("Password"),
    strip=False,
    widget=forms.PasswordInput,
    # help_text=password_validation.password_validators_help_text_html(),
)
password2 = forms.CharField(
    label=_("Password confirmation"),
    widget=forms.PasswordInput,
    strip=False,
    help_text=_("Enter the same password as before, for verification."),
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-24T16:20:32.563

只需覆盖该字段的 help_text 属性。

例如

```
username = forms.CharField(help_text=None) 
```

您无需更改任何其他参数。它会正常工作。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-06-04T10:47:29.923

添加此 CSS 以删除帮助文本。

```
<style>
    .helptext {
      visibility: hidden;
    }
    body > main > form > ul > li{
      display: none;
    }
 </style> 
```

# c# - 开发 Android Web 应用程序与原生应用程序

> ID：13202846
> 
> 赞同：0
> 
> 时间：2012-11-02T20:49:07.957
> 
> 标签：c#, android, mobile

我是移动开发的新手，我已经阅读了 Native app Vs Mobile app pro's and con's，但我想要一些关于在构建我的移动应用程序时应该采取的路径的建议。

基本上后端是用 .NET 编写的，桌面应用程序是用 C# 编写的（我正在为桌面应用程序构建一个移动版本）。应用程序本身将需要互联网连接，而不是其他（想想谷歌搜索/facebook）。考虑到这一点，我应该将应用程序编写为 C# 中的移动 Web 应用程序还是为 android 构建本机应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:53:18.887

原生 Android 应用程序通常是用 Java 编写的。Monodroid 允许您用 C# 编写它们，但我不确定项目的状态。

HTML5/JS 应用程序是使用 HTML5/JS/CSS 编写的，通常包含像 Phonegap 这样的工具包。

既然您了解优缺点，我认为最好选择一个可以最好地利用您的技能的平台。是 HTML5/JS 还是 Java（或通过 Monodroid 使用 C#）。

# jquery - Bootstrap 下拉菜单在附加到不同的位置后停止工作 我正在为管理员审查提交的目标的应用程序页面工作。每个目标都是3 个不同表格中的一个。“review”、“complete”和“submitted”是三个表。 每个都有一个 btn 组，可以根据当前的状态选择批准、恢复或拒绝。当状态改变时，包含的目标被删除并附加到适当的表中。 当它移动 btn- 问问题 问问题 2012-11-02T20:49:08.887 637 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在为管理员审查提交的目标的应用程序页面工作。每个目标都是3 个不同表格中的一个。“review”、“complete”和“submitted”是三个表。 每个都有一个 btn 组，可以根据当前的状态选择批准、恢复或拒绝。当状态改变时，包含的目标被删除并附加到适当的表中。 当它移动 btn-group 下拉列表然后停止工作。我认为它可能需要在.dropdown();附加后添加，但我无法使其工作。 不确定如何使用服务器端数据的这个 b/c 设置 JSfiddle。有人对我有什么建议吗？ 这是一个包含我所有当前代码的 JSfiddle：http: //jsfiddle.net/xKLN4/ approve: function(clicked) { var id = clicked.attr('data-id'); $.post('',{ 'id' : id, 'trainee_id' : 'id?>', 'status' : 'completed' //or whatever it should be, one of 'submitted'|'completed'|'review' }, function(data, textStatus){ console.log('Post return data:'); console.log(data); var status = data.status_translated; var lbl = $('.label-'+data.object.objective_id); lbl.fadeOut('fast'); lbl.attr('class','label label-'+data.object.status+' label-'+data.object.objective_id) .text(data.object.status_translated) .fadeIn('fast'); clicked.closest('tr').children('td, th') .animate({ padding: 0 }) .wrapInner('') .children() .slideUp(function() { $(this).closest('tr').remove(); }); var row = clicked.closest('tr').html(); $('#approve-objectives-completed > tbody:last').append(''+row+'') .children('.dropdown-toggle') .dropdown(); }); }, 编辑添加代码 由于正在添加的 div，下拉菜单不起作用wrapInner('') td一种解决方案是在将所有内容复制到新行后删除最后一个 div ... approve: function(clicked) { clicked.closest('tr').children('td, th') .animate({ padding: 0 }) .wrapInner('') .children() .slideUp(function() { $(this).closest('tr').remove(); }); var row = clicked.closest('tr').html(); $('#approve-objectives-completed > tbody:last').append(''+row+'') //Remove div var $lastTdDiv = $('#approve-objectives-completed > tbody > tr:last > td:last > div'); var contents = $lastTdDiv.contents(); $lastTdDiv.replaceWith(contents); 这是我在“批准”功能中更改的jsFiddle jquerydrop-down-menutwitter-bootstrap 4 1 回答 1 This answer is useful 2 由于正在添加的 div，下拉菜单不起作用wrapInner('') td一种解决方案是在将所有内容复制到新行后删除最后一个 div ... approve: function(clicked) { clicked.closest('tr').children('td, th') .animate({ padding: 0 }) .wrapInner('') .children() .slideUp(function() { $(this).closest('tr').remove(); }); var row = clicked.closest('tr').html(); $('#approve-objectives-completed > tbody:last').append(''+row+'') //Remove div var $lastTdDiv = $('#approve-objectives-completed > tbody > tr:last > td:last > div'); var contents = $lastTdDiv.contents(); $lastTdDiv.replaceWith(contents); 这是我在“批准”功能中更改的jsFiddle 于 2012-11-05T21:19:14.060 回答 Related 1 asp.net-mvc-3 - Autofac MultiTenant - 我如何路由到子域？ 4 c - C 两个函数合二为一 2 javascript - 谷歌地图多边形是否被索引/我如何参考它们的索引？ 1 ember.js - BoundView 和 UnboundView 回顾 2 java - java - 如何在Java Web应用程序中使数据库参数可配置？ 1 jquery-ui - Jquery UI 滑块 - Tubeplayer 插件的 Seekbar 1 sql - 更改 postgres 数据库中某些值的部分字符串 3 c++ - 数组的名称是右值吗？ 1 r - R - 在使用注释时向 ggmap (ggplot2) 添加图例 1 java - java.io.File.toURI() IO 绑定？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13202847
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

我正在为管理员审查提交的目标的应用程序页面工作。每个目标都是`<tr>`3 个不同表格中的一个。“review”、“complete”和“submitted”是三个表。

每个都有一个 btn 组，`<tr>`可以根据当前的状态选择批准、恢复或拒绝。当状态改变时，包含的目标被删除并附加到适当的表中。

当它移动 btn-group 下拉列表然后停止工作。我认为它可能需要在`.dropdown();`附加后添加，但我无法使其工作。

不确定如何使用服务器端数据的这个 b/c 设置 JSfiddle。有人对我有什么建议吗？

这是一个包含我所有当前代码的 JSfiddle：http: [//jsfiddle.net/xKLN4/](http://jsfiddle.net/xKLN4/)

```
 approve: function(clicked) {
        var id = clicked.attr('data-id');
        $.post('<?=URL::to('supervisor/approve_objective')?>',{
            'id' : id,
            'trainee_id' : '<?=$trainee->id?>',
            'status' : 'completed' //or whatever it should be, one of 'submitted'|'completed'|'review'
        },
        function(data, textStatus){
            console.log('Post return data:');
            console.log(data);
            var status = data.status_translated;
            var lbl = $('.label-'+data.object.objective_id);
                    lbl.fadeOut('fast');
                    lbl.attr('class','label label-'+data.object.status+' label-'+data.object.objective_id)
                       .text(data.object.status_translated)
                       .fadeIn('fast');
                       clicked.closest('tr').children('td, th')
                               .animate({ padding: 0 })
                               .wrapInner('<div />')
                               .children()
                               .slideUp(function() { $(this).closest('tr').remove(); });

                    var row = clicked.closest('tr').html();

                    $('#approve-objectives-completed > tbody:last').append('<tr>'+row+'</tr>')
                                                                   .children('.dropdown-toggle')
                                                                   .dropdown();

        });

    }, 
```

编辑添加代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:19:14.060

由于正在添加的 div，下拉菜单不起作用`wrapInner('<div />')`

`td`一种解决方案是在将所有内容复制到新行后删除最后一个 div ...

```
approve: function(clicked) {

      clicked.closest('tr').children('td, th')
             .animate({ padding: 0 })
             .wrapInner('<div />')
             .children()
             .slideUp(function() { $(this).closest('tr').remove(); });

      var row = clicked.closest('tr').html();

      $('#approve-objectives-completed > tbody:last').append('<tr>'+row+'</tr>')

      //Remove div       
      var $lastTdDiv = $('#approve-objectives-completed > tbody > tr:last > td:last > div');  
      var contents = $lastTdDiv.contents();
      $lastTdDiv.replaceWith(contents); 
```

这是我在“批准”功能中更改的[jsFiddle](http://jsfiddle.net/9mYZD/1/)

# audio - 在 Python 3 中读取 ID3 标签

> ID：13202849
> 
> 赞同：3
> 
> 时间：2012-11-02T20:49:12.623
> 
> 标签：audio, python-3.x, metadata, id3

我被困住了。我正在尝试找到一种在 Python 3 中读取 MP3 和 FLAC 文件中的 ID3 标签的方法。无论我走到哪里，答案都是关于一些仅适用于 Python 2 的库或模块，包括[我在这个主题上找到的问题](https://stackoverflow.com/questions/736813/how-to-read-id3-tag-in-an-mp3-using-python)在 StackOverflow 上。有谁知道适用于 Python 3 的模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T14:47:00.387

看看这个名为[stagger](https://code.google.com/p/stagger/)的项目！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T16:53:36.037

我有同样的问题，所以我写了自己的库，支持 MP3 和 OGG 文件，看看文档：

[http://pytag.rtfd.org](http://pytag.rtfd.org)

# express - 布局：false 在 express.js 3 中不起作用？

> ID：13202850
> 
> 赞同：0
> 
> 时间：2012-11-02T20:49:14.387
> 
> 标签：express, pug

在 express.js 中渲染视图时，我尝试跳过渲染布局。我使用翡翠作为我的模板语言。我使用的代码：

```
res.render("show", { job: data, layout: false }); 
```

有什么建议吗？它不断渲染布局....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:47:07.650

我不是 100% 确定，但我认为这是现在的默认设置。

否则尝试：

```
app.set('view options', {
    layout: false
}); 
```

# c# - 条件为假，但执行了 if 语句中的代码

> ID：13202855
> 
> 赞同：3
> 
> 时间：2012-11-02T20:49:25.280
> 
> 标签：c#, if-statement

我有以下方法：

```
public bool ConnectAsync()
{
    if (IsConnected)
        throw new InvalidOperationException("Socket is already connected");

    if (IsConnecting)
    {
        throw new InvalidOperationException("Attempt to connect in progress");
    }

    . . .
} 
```

在哪里：

```
 private readonly object padLock = new object();

    private bool isConnecting = false;

    public bool IsConnected
    {
        get
        {
            lock (padLock)
            { return socket.Connected; }
        }
    }

    public bool IsConnecting
    {
        get
        {
            lock (padLock)
            { return isConnecting; }
        }

        private set
        {
            lock (padLock)
            { isConnecting = value; }
        }
    } 
```

![在此处输入图像描述](../Images/5c444246b36610fc6b399884350ed49e.png)

如果我的变量 isConnecting 为 false，为什么会执行 if 语句中的代码？

**编辑**：
如果我使用归档`isConnecting`而不是属性，`IsConnecting`我有相同的行为。代码在任何地方的同一个线程中运行。

**编辑 2**：

最后这有效：

```
lock (padLock)
{
    if (IsConnecting)
        throw new InvalidOperationException("Attempt to connect in progress");
} 
```

这有效：

```
{
    if (IsConnecting)
        throw new InvalidOperationException("Attempt to connect in progress");
} 
```

**但为什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:52:04.447

这可能是调试器和多线程的问题，尝试将锁放在 if 语句的外部而不是属性内部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T03:42:11.973

您在调试器中的表达式窗口是触发异常的窗口，而不是您的代码。删除表达式（或监视），它应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T19:31:40.893

这个答案解释了我遇到的问题： [https ://stackoverflow.com/a/27552124/1830461](https://stackoverflow.com/a/27552124/1830461)

编译为 64 位的这种格式的某些内容可能会导致调试器单步执行 if 语句：

```
 if (falseCondition) 
            throw new Exception(); 
        try { }  catch { } 
```

这是 Visual Studio 中的一个错误。代码实际上并未执行。解决方案是忽略它并继续单步执行代码。在它上面加上一个 lock 语句可以修复它，因为它不再是那种格式。

# forms - Chrome 弄乱了电子邮件/密码帐户设置网页

> ID：13202858
> 
> 赞同：0
> 
> 时间：2012-11-02T20:49:44.213
> 
> 标签：forms, google-chrome, google-chrome-devtools, change-password, html-input

帐户设置页面有一个电子邮件和密码字段，因此您可以对其进行编辑。但是，仅在 Chrome 浏览器中，如果您在登录时告诉 Chrome 记住您的用户名/密码，则帐户设置页面的行为很有趣。我已将问题简化为这个网页：

```
<form>      
  <input type="email" name="test" value="me@example.com"/>
  <input type="password" name="test2" value="mypass"/>
</form> 
```

发生的情况是，这 2 个字段以黄色突出显示。如果您以任何方式更改电子邮件字段，密码字段将被删除！不管他们叫什么名字。它基本上是存储密码的任何文本输入字段之后的下一个密码类型字段。如何阻止密码字段被删除？

我提出的解决方法是在两者之间添加另一个密码类型字段并添加`style="display:none"`. 但这很丑陋，有没有一种适当的方法可以以这种方式处理 Chrome？

# c++ - 获取与地图中的查询匹配的所有键

> ID：13202864
> 
> 赞同：0
> 
> 时间：2012-11-02T20:50:17.290
> 
> 标签：c++, stl, map

假设我在地图中有多个具有相同值的键。那么在这种情况下，我如何检索与查询匹配的所有键。

或者，是否有可能告诉查找操作搜索特定值。
我正在使用`std::map`C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:56:29.000

像这样的东西对你有用吗：

```
void FindKeysWithValue(Value aValue, list<Key>& aList)
{
    aList.clear();

    for_each(iMap.begin(), iMap.end(), [&] (const pair<Key, Value>& aPair)
    {
        if (aPair.second == aValue)
        {
            aList.push_back(aPair.first);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:56:42.243

唯一的方法是遍历地图。

此链接可能有用：[反向地图查找](https://stackoverflow.com/questions/5749073/reverse-map-lookup)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:57:39.237

关联容器可能对您没有太大帮助，因为`std::map<K, V>`键恰好是唯一的，并且您选择的查询与您使用的排序关系匹配的机会可能不会太高。如果顺序匹配，您可以使用`std::map<K, V>`成员`lower_bound()`和`upper_bound()`。因为`std::multimap<K, V>`你也可以使用`equal_range()`.

一般来说，即，如果您的查询与订单无关，您可以使用它`std::copy_if()`来获取与谓词匹配的对象序列：

```
Other other;
// ...
std::vector<Other::value_type> matches;
std::copy_if(other.begin(), other.end(), 
             std::back_inserter(matches), predicate); 
```

当复制元素太昂贵时，您可能应该考虑使用`std:find_if()`：

```
for (auto it(other.begin());
    other.end() != (it = std::find_if(it, other.end(), predicate));
    ++it) {
   // do something with it
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T21:01:04.387

如果您想要快速访问并且您不介意使用更多空间，那么您可以维护另一个映射，该映射被存储为值，键。在您的情况下，您需要处理重复的值（您将作为键存储）。

不是一个好主意，但绝对是一个选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T21:02:51.207

A`map`用于有效查找键。基于值的查找效率不高，您基本上必须遍历地图，自己提取匹配项：

```
for(map<A,B>::iterator i = m.begin(); i != m.end(); i++)
    if(i->second == foo)
        you_found_a_match(); 
```

如果你打算经常这样做，你可以用另一种方式建立一个多图映射，这样你就可以有效地执行基于值的查找：

```
multimap<B,A> reverse;
for(map<A,B>::iterator i = m.begin(); i != m.end(); i++)
    reverse.insert(pair<B,A>(i->second,i->first)); 
```

您现在可以轻松找到具有给定值的键：

```
matches = reverse.equal_range(value);
for(multimap<B,A>::iterator i = matches.first; i != matches.second; i++)
    A & key = i->second; 
```

如果这些映射不会持续增长，那么简单地维护一个向量 > 可能会更有效，根据该值为其定义一个比较器，然后使用 equal_range 代替。

# javascript - Flexslider 的固定尺寸

> ID：13202867
> 
> 赞同：19
> 
> 时间：2012-11-02T20:50:35.007
> 
> 标签：javascript, html, css, flexslider

我正在使用 Flexslider 从 API 中提取不同大小的产品图像。我一直把它们扔进 Flexslider 的`<ul>`，但是这些不同的图像尺寸不能很好地播放。当图像具有不同的高度时，Flexslider 可以很好地制作动画，但我希望 Flexslider 具有固定的高度和宽度以适合我的布局。我已经尝试将整个东西放入一个 fixed-size`<div>`中，但 Flexslider 完全忽略它并溢出到布局的其余部分。有没有办法调整图像大小以适应 Flexslider 不调整大小？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-02T21:51:25.030

假设您想要 200 x 200 像素的固定大小。将这些属性添加到 flexslider.css 文件中的以下选择器中，您应该很高兴：

```
.flexslider {
    width: 200px;
    height: 200px;
}

.flexslider .slides img {
    width: 200px;
    height: 200px;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-12T05:07:35.473

具有类“.flex-viewport”的元素是幻灯片的容器，该元素使他的高度适应集合中较高的图像，诀窍是将所有图像高度设置为 0，除了当前幻灯片中的那个当幻灯片交换位置时，​​在带有“.flex-active-slide”类的 li 元素内，该 flexslider 脚本切换，关于这个技巧的唯一坏处是，类的切换发生在新幻灯片放在新位置之后然后发生口吃，但您可以通过使用一些javascript将一些toggleClass绑定到触发幻灯片更改的同一事件来处理，这会有所帮助。

```
.flex-viewport  li:not(.flex-active-slide) img{ 

height: 0 !important;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-11T05:40:11.773

通过脚本更改宽度说你的宽度为 400

```
$('.flex_up').flexslider({
    animation: "slide",
    animationLoop: false,
    itemWidth: 400,
    itemMargin: 5,
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-29T17:04:28.993

消除

```
smoothHeight: true, 
```

从

```
 jQuery('#slider').flexslider({
            animation: "slide",
            controlNav: false,
            animationLoop: false,
            prevText: "",           
                    nextText: "",
            slideshow: false,
                    smoothHeight: true,
                    animateHeight: false,
            sync: "#carousel",
            start: function(){
                 jQuery('#slider ul.slides img').show(); 
            },
          }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T23:26:59.793

使用特定 div 的样式选项设置大小，如下所示，有两个不同大小的滑块：

```
<div class="flexcontainer">
    <div id="first-slider" class="flexslider" style:"width:100px">
        <ul class="slides">
        ...
        </ul>
    </div> 
    <div id="second-slider" class="flexslider" style:"width:200px">
        <ul class="slides">
        ...
        </ul>
    </div> 
</div> 
```

# java - 未找到 java.nio 的最新添加；使用 java 1.7.0_9

> ID：13202871
> 
> 赞同：1
> 
> 时间：2012-11-02T20:50:46.257
> 
> 标签：java, package, java-7, java.nio.file

所以我正在使用 Java SE 1.7.0_9（我认为是最新版本），我正在尝试使用 java.nio.file.Files 类来处理文件。但是，每当我尝试访问 Java 版本 7 中添加到 java.nio 包中的类之一（例如 .file 或 .attribute）时，编译器都会返回此错误：

```
attend.java:4: package java.nio.file does not exist
import java.nio.file.*;
^
attend.java:5: package java.nio.file.attribute does not exist
import java.nio.file.attribute.*;
^
2 errors 
```

我想也许我对我使用的版本有误，所以我检查了我的版本，它返回了这个：

```
[04:31 PM]java: java -version
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

老实说，我无法弄清楚发生了什么。谁可以帮我这个事？

**编辑：**我还想指出，Java SE 7 中引入的新的 try-with-resources 语句也让我的编译器抱怨它不是一个有效的语句。就好像我根本没有真正使用 Java SE 7，这非常令人沮丧。

**已解决：**事实证明，虽然这些机器运行的是 Java SE 1.7.0_9，但它们默认使用 1.6.0_37 版本的 javac 编译器。我需要做的就是弄乱路径以确保它转到 1.7.0 版本。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:21:20.107

显然，您根本没有使用 JDK 1.7 进行编译，而是使用了更早的 JDK。检查您的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:28:35.193

另一个更牵强的错误是您让 JDK 1.7 编译为 1.6。这是一个编译器命令行选项、IDE 选项、maven 选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T20:54:13.243

检查您是否引用了正确的 JDK。如果您使用的是 Eclipse，则应在“属性”-“Java 构建路径”-“库”中指定它

# java - 如何对hadoop map resuce作业的键使用相似度算法

> ID：13202876
> 
> 赞同：1
> 
> 时间：2012-11-02T20:51:45.040
> 
> 标签：java, hadoop, mapreduce, cascading

我需要实现以下问题：我正在获取类型的数据

```
public class Data{   
  private String key;
  private String valueData;
} 
```

我需要编写一个 map reduce 作业来获取所有**唯一**键，每个键都有一个（随机）valueData。hadoop 听起来很简单，是的，我知道如何实现这一点。

但真正的问题是，我还需要减少所有“**相似**”键。并且输出应该是与**dataValue之一相似的****键**之一

 **在 hadoop 中实现这一点的最佳方法（以及如何）是什么？我还希望能够灵活地更改相似度算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:07:04.630

看看这项`MinHashing`技术，它与 MapReduce 一起广泛用于此任务。

相似性度量是绑定的`Jaccard`，不确定是否有其他方法。但是，一旦您计算了近键，您就可以使用另一个指标来衡量它们之间的相似性，因为 minhashing 大大减少了您的搜索空间。

您可以在维基百科上阅读更多信息：[http ://en.wikipedia.org/wiki/MinHash](http://en.wikipedia.org/wiki/MinHash)

Mahout 有一个`MinHash`聚类算法，你可以看看那里。它很容易理解，并具有多种散列算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:19:37.083

您基本上需要想出一个函数，`f`，这样，尽可能地：

```
f(A) = f(B) if and only if A and B are "similar" 
```

现在，您能够遵守的严格程度完全取决于这些值的确切域是什么，以及您的相似性指标是什么，但这是目标。

例如，如果键是实数，那么我可能会选择`f(x) = round(x)`. 对于非常接近的 x 值，很可能`f(x)`相同，但也可能不同，例如 2.45 和 2.55。但也许你可以允许这种“足够好”。

然后，您可以将减少步骤的关键作为此函数的输出。

我还要补充一点，对于特定的相似性指标和特定的聚类方法，还有许多其他复杂的技术——如果你提供更多关于你希望使用的指标类型的详细信息，也许我可以为你指出其中之一，或者“相似”键到底是什么。**

# css - Css div 相对但绝对

> ID：13202879
> 
> 赞同：0
> 
> 时间：2012-11-02T20:51:55.163
> 
> 标签：css, twitter-bootstrap, overlay, caption

我想制作一个 div 子元素作为所有父内容的覆盖，父宽度固定。（一个例子可能是您通常在照片库上看到的 js 标题）

HTML：

```
<div class="parent">
<div class="child">child</div>
<div class="overlay">overlay them</div>
</div> 
```

CSS：

```
.parent{
width:300px;
max-width:300px;
}
.child{
width:100%;
min-width:100%;
position:relative;
}
.overlay{
position: /*?? to make it cover like overlay all the .child so all the .parent content*/

} 
```

jsfiddle：http: [//jsfiddle.net/ttUgM/1/](http://jsfiddle.net/ttUgM/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:55:07.930

尝试给`.parent`a`position:relative`和`.overlay`a`position:absolute`这将允许您定位`.overlay`相对于`.parent`. 那是你要的吗？

# visual-studio-2010 - 当 IE 在 Visual Studio 2010 中启动调试时，有没有办法让它直接进入私密浏览？

> ID：13202883
> 
> 赞同：0
> 
> 时间：2012-11-02T20:52:18.737
> 
> 标签：visual-studio-2010, internet-explorer

调试时缓存js文件似乎重复出现问题。即使我确保在再次开始调试之前停止开发服务器。我还检查了文件是否标记为“内容”和“始终复制”。我希望默认为私密浏览可能会有所帮助。

有没有办法让它在由 Visual Studio 启动时直接启动以进行私密浏览？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:42:15.920

[http://blog.meidianto.com/2010/08/01/vs2010-tips-14-how-change-the-default-browser-used-in-debugging-asp-net-mvc-2-application/](http://blog.meidianto.com/2010/08/01/vs2010-tips-14-how-change-the-default-browser-used-in-debugging-asp-net-mvc-2-application/)

[http://blog.meidianto.com/wp-content/uploads/2010/08/image1.png](http://blog.meidianto.com/wp-content/uploads/2010/08/image1.png)

但我基本上在 url 前面的命令行参数之前添加了 -private

# wpf - 从数据类中分离 WPF 对话框

> ID：13202888
> 
> 赞同：1
> 
> 时间：2012-11-02T20:52:54.383
> 
> 标签：wpf, ado.net, refactoring, modal-dialog

我有一个使用 WPF 的小型 .NET 4 程序，它大量使用 ADO.NET。我现在必须重构代码以将 SQL 数据访问/处理与“主窗口”WPF 窗口分开。目前，在 DataSet 构建代码中有很多数据完整性检查，这（可能）会引发相当多的模式警告对话框（如使用 MessageBox.Show()）。我想在这里“做正确的事”，并将数据处理与窗口显示分开。（或者从纯粹的“数字运算类”中弹出模式对话框不是那么糟糕吗？）我应该怎么做？任何指向文章/概念的指针将不胜感激 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:04:37.540

您使用的是数据对象还是仅使用数据集？如果您正在使用数据对象，请用于`IDataErrorInfo`实现验证，然后在 WPF 控件中启用验证，而不是弹出消息框。这是一篇关于数据集和验证的好文章 -[在 WPF 中显示数据验证消息](http://blogs.msdn.com/b/bethmassi/archive/2008/06/27/displaying-data-validation-messages-in-wpf.aspx)。

# c# - 网格中的 Extjs 分页工具栏不起作用

> ID：13202893
> 
> 赞同：0
> 
> 时间：2012-11-02T20:53:48.003
> 
> 标签：c#, asp.net, extjs, paging, toolbar

我已经搜索过这个问题的高低......我发现很多人都有同样的问题，但没有一个明确的解决方案......基本上我在extjs上有一个网格......它从sqldb获取数据。它使用 json 加载良好。“但是”......当尝试实现分页时，这就是它变得混乱的地方......

1.  pagesize 设置为 5... 这意味着第一页应该只显示 5 条记录，但我的网格显示了整个记录

2.  即使“下一步”按钮存在，它在技术上也不起作用，因为整个记录已经在第一页上

3.  我设置 page.loadPage(2)... 并且消息显示“正在显示第二页”，但它实际上是在显示整个记录

4.  “Page _ of 6”中的页码始终为空白。见下图...

    ![在此处输入图像描述](../Images/3104027535f6fe04debea49c1a73fbd9.png)

下面是我的店...

```
 var store = Ext.create('Ext.data.Store', {
        storeId: 'myData',
        pageSize: 5,
        autoLoad: true,
        method: "POST",
        remoteSort: true,
        fields: [
    { name: 'Q1', type: 'int' },
    { name: 'Q2', type: 'int' },
    { name: 'Q3', type: 'int' },
    { name: 'Q4', type: 'int' },
    { name: 'Q5', type: 'int' },
    { name: 'Improvements', type: 'string' },
    { name: 'Comments', type: 'string' }
    ],

        sorters: [
        {
            property: 'Q1',
            direct: 'ASC'
        }
     ],

        proxy: {
            type: 'ajax',
            url: 'GridView/writeRecord',
            reader: {
                type: 'json',
                totalProperty: "count",
                root: "myTable"
            }
        },
        autoLoad: { params: { start: 0, limit: 5} }   

    });

    this.grid = Ext.create('Ext.grid.Panel', {
        title: ' ',
        trackMouseOver: true,
        disableSelection: true,
        autoHeight: true,
        store: store,
        loadMask: true,
        height: 500,
        width: 800,
        renderTo: Ext.getBody(),
        columns: [

        { header: 'Q1',
            sortable: true, dataIndex: 'Q1'
        },
        { header: 'Q2',
            sortable: true, dataIndex: 'Q2'
        },
        { header: 'Q3',
            sortable: true, dataIndex: 'Q3'
        },
        { header: 'Q4',
            sortable: true, dataIndex: 'Q4'
        },
        { header: 'Improvements', flex: 1,
            sortable: true, dataIndex: 'Improvements'
        },
        { header: 'Comments', flex: 1,
            sortable: true, dataIndex: 'Comments'
        }
    ],
        bbar: Ext.create('Ext.PagingToolbar', {
            store: store,
            displayInfo: true,
            preprendButtons: true,
            displayMsg: 'Displaying Surveys {0} - {1} of {2}',
            emptyMsg: "No Surveys to display"

        })
    }); 
```

这是我的 JSON ......它实际上有 30 条记录，但我把它剪掉了......

```
 {
  "count": 30,
  "myTable": [
  {
  "Q1": "1",
  "Q2": "1",
  "Q3": "1",
  "Q4": "1",
  "Improvements": "",
  "Comments": "1"
},
{
  "Q1": "3",
  "Q2": "2",
  "Q3": "2",
  "Q4": "2",
  "Improvements": "This is A very long comment. What do you think?",
  "Comments": "Agreed"
},
{
  "Q1": "4",
  "Q2": "2",
  "Q3": "4",
  "Q4": "3",
  "Improvements": "Hello2",
  "Comments": "Hello2"
},
{
  "Q1": "3",
  "Q2": "2",
  "Q3": "2",
  "Q4": "1",
  "Improvements": "Hello4",
  "Comments": "Hello4"
} 
```

] }

另外，如果它有帮助，这就是我获得 Json 的方式

```
 string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM ITable";
        conn.Open();
        SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);
        SqlCommand comd = new SqlCommand(sqlquery, conn);
        DataSet myData = new DataSet();
        cmd.Fill(myData, "myTable");

        comd.CommandText = "SELECT COUNT(*) FROM ITable";
        Int32 count = (Int32)comd.ExecuteScalar();

        comd.ExecuteNonQuery();
        conn.Close();

        var results = (new

        {

            TotalNumber = count,

            myTable = myData

        });

        return JsonConvert.SerializeObject(new { count=count, myTable = myData.Tables[0] }, Formatting.Indented,
                        new JsonSerializerSettings
                        {
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        }); 
```

我知道我的 Json 是对的……它读取了 30 条记录，因为它说“显示 30 条记录”……我只是不知道我做错了什么……这不可能是浏览器问题……为什么它把所有东西都放在一页上？有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:01:01.400

使用分页工具栏时，服务器应该为您分页数据。您不会一次将所有记录都提供给它。

分页工具栏将发送请求每个页面的请求，并且服务器应该只返回该页面的记录。

如果您想使用内存数据进行分页（一次获取所有数据，您必须实现自己的，或使用其中一个扩展。

[请参阅http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging)上的“使用本地数据分页”部分

因此，要按预期使用它，您必须更改服务器代码以考虑`start`和`limit`HTTP 参数

# jquery - jquery 报告悬停在什么元素上

> ID：13202894
> 
> 赞同：1
> 
> 时间：2012-11-02T20:53:52.160
> 
> 标签：jquery, hover, nodename

我正在尝试构建一个迷你检查器工具，它只报告被悬停的元素、它的 ID 和它拥有的任何类。

我构建了一个包含 4 个嵌套元素的演示页面：
**html > body > outerContainer > innerContainer**

我已经设法让它以一种方式工作，当从外部元素到内部元素时，它会正确报告信息，但是当反过来时，报告的元素是前一个元素。

看到它在行动 - [http://jsfiddle.net/sygad/kmJ5s/](http://jsfiddle.net/sygad/kmJ5s/)

```
<head>

    <meta charset="utf-8">

    <title>Element Hover</title>

    <style>

        html                {margin:0; padding:40px 20px 0; background:#333; font:0.9em/1.1em "Arial", sans-serif}
        body                {margin:0; padding:0 0 10px; background:#555}

        #outerContainer     {margin:20px; padding:0; background:#777; width:240px; height:260px;}
        #innerContainer     {margin:20px; padding:0; background:#999; width:200px; height:200px;}

        p#info              {position:absolute; top:0; left:0}
        p                   {margin:0; padding:0; color:white}

    </style>

</head>

<body>

    <p id="info">Current element: <span></span></p>

    <p>Body</p>

    <div id="outerContainer">
        <p>Outer</p>

        <div id="innerContainer">
            <p>Inner</p>
        </div>

    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>

    <script>

        //Initialise
        var nodeName = '';
        var ids = '';
        var classes = '';

        $('*').hover(function(e)
        {
            //Clear
            nodeName = '';
            ids = '';
            classes = '';

            nodeName = $(this).context.nodeName.toLowerCase();

            if ($(this).attr('id') != undefined)
            {
                ids = ' #' + $(this).attr('id');
            }

            if ($(this).attr('class') != undefined)
            {
                classes = ' .' + $(this).attr('class');
            }

            $('p#info span').text(nodeName+ids+classes)
        })
    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:57:01.190

尝试使用`$(e.currentTarget)`而不是`$(this)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:08:06.343

您需要注意以下项目，

1.  您应该真正实现这一点`onmousemove`，因为当您从父元素移入子元素并离开子元素时，它不会为父元素更新，因为您永远不会进入/离开父元素。
2.  你应该使用`e.target`而不是`this`
3.  清除全局变量，因为它可能会延续到下一个元素。

**演示：http:** [//jsfiddle.net/kmJ5s/8/](http://jsfiddle.net/kmJ5s/8/)

```
var nodeName = '';
var ids = '';
var classes = '';

$('*').mousemove(function(e) {
    nodeName = '';
    ids = '';
    classes = '';
    var _this = e.target;
    nodeName = _this.nodeName.toLowerCase();

    if (_this.id) {
        ids = ' #' + _this.id;
    }

    if (_this.className) {
        classes = ' .' + _this.className;
    }

    $('p#info span').text(nodeName + ids + classes)
}); 
```

# windows - 如何在 DOS 批处理脚本中生存“延迟变量扩展”

> ID：13202895
> 
> 赞同：1
> 
> 时间：2012-11-02T20:53:56.643
> 
> 标签：windows, batch-file

这是我的脚本：

```
@echo off
setlocal

for /f %%i in ('echo aaa/') do set REPO=%%i
if "%REPO%"=="" (
  echo No input
) else (
  echo %REPO:~-1%
  echo %REPO:~0,-1%
  if %REPO:~-1%==/ set REPO=%REPO:~0,-1%
  echo %REPO%
)

endlocal 
```

请注意：

```
c:\dev\shunra\GlobalLibrary\Server>c:\Utils\hgbackup.cmd
/
aaa
aaa/

c:\dev\shunra\GlobalLibrary\Server> 
```

到底是怎么回事？

**编辑**

请注意，我正在为 REPO 分配一些评估为“aaa”的东西，因此我希望它打印“aaa”，而不是“aaa/”。它让我疯狂。

**编辑2**

显然，这是罪魁祸首（来自 set 命令的帮助）：

```
Finally, support for delayed environment variable expansion has been
added.  This support is always disabled by default, but may be
enabled/disabled via the /V command line switch to CMD.EXE.  See CMD /?

Delayed environment variable expansion is useful for getting around
the limitations of the current expansion which happens when a line
of text is read, not when it is executed.  The following example
demonstrates the problem with immediate variable expansion:

    set VAR=before
    if "%VAR%" == "before" (
        set VAR=after
        if "%VAR%" == "after" @echo If you see this, it worked
    )

would never display the message, since the %VAR% in BOTH IF statements
is substituted when the first IF statement is read, since it logically
includes the body of the IF, which is a compound statement.  So the
IF inside the compound statement is really comparing "before" with
"after" which will never be equal.  Similarly, the following example
will not work as expected:

    set LIST=
    for %i in (*) do set LIST=%LIST% %i
    echo %LIST%

in that it will NOT build up a list of files in the current directory,
but instead will just set the LIST variable to the last file found.
Again, this is because the %LIST% is expanded just once when the
FOR statement is read, and at that time the LIST variable is empty.
So the actual FOR loop we are executing is:

    for %i in (*) do set LIST= %i

which just keeps setting LIST to the last file found.

Delayed environment variable expansion allows you to use a different
character (the exclamation mark) to expand environment variables at
execution time.  If delayed variable expansion is enabled, the above
examples could be written as follows to work as intended:

    set VAR=before
    if "%VAR%" == "before" (
        set VAR=after
        if "!VAR!" == "after" @echo If you see this, it worked
    )

    set LIST=
    for %i in (*) do set LIST=!LIST! %i
    echo %LIST% 
```

但是我尝试使用该`!`标志，但它仍然对我不起作用。我再次使用 get `!`print on the screen 或错误的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T01:23:13.443

正如评论中所讨论的，在您编辑的问题中，您需要延迟扩展。

必须先启用延迟扩展，然后才能使用它。在批处理脚本中，您可以使用`setlocal enableDelayedExpansion`

```
@echo off
setlocal enableDelayedExpansion

for /f %%i in ('echo aaa/') do set REPO=%%i
if "%REPO%"=="" (
  echo No input
) else (
  echo %REPO:~-1%
  echo %REPO:~0,-1%
  if %REPO:~-1%==/ set REPO=%REPO:~0,-1%
  echo !REPO!
)

endlocal 
```

**编辑**

如果 IN() 子句被更改以致 REPO 未定义，则上述操作失败。例如：`in (echo.)`

它失败是因为整个 IF/ELSE 构造必须具有有效的语法，即使它不会执行 ELSE 子句。

如果 REPO 未定义，则

```
if %REPO:~-1%==/ set REPO=%REPO:~0,-1% 
```

扩展到

```
if ~-1REPO:~0,-1 
```

这是无效的语法。

通过使用延迟扩展再次解决了该问题。

```
@echo off
setlocal enableDelayedExpansion

for /f %%i in ('echo.') do set REPO=%%i
if "%REPO%"=="" (
  echo No input
) else (
  echo %REPO:~-1%
  echo %REPO:~0,-1%
  if !REPO:~-1!==/ set REPO=%REPO:~0,-1%
  echo !REPO!
)

endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:23:11.793

> 请注意，我正在为 REPO 分配一些评估为“aaa”的东西

实际上，你*有条件*地分配了一些东西。您是否测试过 then-part 是否实际执行（例如，`echo If Entered`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T19:04:18.183

这对我有用（只是我整个脚本的摘录）

```
choice /C 1234567H /M "Select an option or ctrl+C to cancel"
set _dpi=%ERRORLEVEL%

if "%_dpi%" == "8" call :helpme && goto menu 

for /F "tokens=%_dpi%,*" %%1 in ("032 060 064 096 0C8 0FA 12C") do set _dpi=%%1
echo _dpi:%_dpi%: 
```

# javascript - 取决于所选文本的动态扩展上下文菜单

> ID：13202896
> 
> 赞同：20
> 
> 时间：2012-11-02T20:53:57.080
> 
> 标签：javascript, google-chrome-extension, contextmenu

我正在尝试根据所选内容在 Chrome 上下文菜单上创建条目。我在 Stackoverflow 上发现了几个关于此的问题，所有问题的答案都是：使用带有“mousedown”侦听器的内容脚本，该侦听器查看当前选择并创建上下文菜单。

我实现了这个，但它并不总是有效。有时所有日志消息都说上下文菜单已按我的意愿进行了修改，但出现的上下文菜单没有更新。

基于此，我怀疑这是一种竞争条件：有时 chrome 在代码完全运行之前就开始渲染上下文菜单。

我尝试将 eventListener 添加到“contextmenu”和“mouseup”。后者在用户用鼠标选择文本时触发，因此它会在上下文菜单出现之前（甚至几秒钟）更改上下文菜单。即使使用这种技术，我仍然看到同样的错误发生！

这在 Chrome 22.0.1229.94 (Mac) 中经常发生，偶尔在 Chromium 20.0.1132.47 (linux) 中发生，并且在 Windows (Chrome 22.0.1229.94) 上尝试 2 分钟后没有发生。

究竟发生了什么？我该如何解决？还有其他解决方法吗？

* * *

这是我的代码的简化版本（不是那么简单，因为我保留了日志消息）：

# 清单.json：

```
{
  "name": "Test",
  "version": "0.1",
  "permissions": ["contextMenus"],
  "content_scripts": [{
    "matches": ["http://*/*", "https://*/*"],
    "js": ["content_script.js"]
  }],
  "background": {
    "scripts": ["background.js"]
  },
  "manifest_version": 2
} 
```

# content_script.js

```
function loadContextMenu() {
  var selection = window.getSelection().toString().trim();
  chrome.extension.sendMessage({request: 'loadContextMenu', selection: selection}, function (response) {
    console.log('sendMessage callback');
  });
}

document.addEventListener('mousedown', function(event){
  if (event.button == 2) {
    loadContextMenu();
  }
}, true); 
```

# 背景.js

```
function SelectionType(str) {
  if (str.match("^[0-9]+$"))
    return "number";
  else if (str.match("^[a-z]+$"))
    return "lowercase string";
  else
    return "other";
}

chrome.extension.onMessage.addListener(function(msg, sender, sendResponse) {
  console.log("msg.request = " + msg.request);
  if (msg.request == "loadContextMenu") {
    var type = SelectionType(msg.selection);
    console.log("selection = " + msg.selection + ", type = " + type);
    if (type == "number" || type == "lowercase string") {
      console.log("Creating context menu with title = " + type);
      chrome.contextMenus.removeAll(function() {
        console.log("contextMenus.removeAll callback");
        chrome.contextMenus.create(
            {"title": type,
             "contexts": ["selection"],
             "onclick": function(info, tab) {alert(1);}},
            function() {
                console.log("ContextMenu.create callback! Error? " + chrome.extension.lastError);});
      });
    } else {
      console.log("Removing context menu")
      chrome.contextMenus.removeAll(function() {
          console.log("contextMenus.removeAll callback");
      });
    }
    console.log("handling message 'loadContextMenu' done.");
  }
  sendResponse({});
}); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-02T21:17:49.037

`contextMenus`API 用于*定义*上下文菜单条目。它不需要在上下文菜单打开之前调用。因此，不要在 contextmenu 事件上创建条目，而是使用该**`selectionchange`**事件来不断更新 contextmenu 条目。

我将展示一个简单的示例，它只在上下文菜单条目中显示选定的文本，以显示条目同步良好。

使用此内容脚本：

```
document.addEventListener('selectionchange', function() {
    var selection = window.getSelection().toString().trim();
    chrome.runtime.sendMessage({
        request: 'updateContextMenu',
        selection: selection
    });
}); 
```

在后台，我们将只创建一次上下文菜单条目。之后，我们更新上下文菜单项（使用我们从中获得的 ID [`chrome.contextMenus.create`](http://developer.chrome.com/extensions/contextMenus.html#method-create)）。
选择为空时，如果需要，我们会删除上下文菜单条目。

```
// ID to manage the context menu entry
var cmid;
var cm_clickHandler = function(clickData, tab) {
    alert('Selected ' + clickData.selectionText + ' in ' + tab.url);
};

chrome.runtime.onMessage.addListener(function(msg, sender, sendResponse) {
    if (msg.request === 'updateContextMenu') {
        var type = msg.selection;
        if (type == '') {
            // Remove the context menu entry
            if (cmid != null) {
                chrome.contextMenus.remove(cmid);
                cmid = null; // Invalidate entry now to avoid race conditions
            } // else: No contextmenu ID, so nothing to remove
        } else { // Add/update context menu entry
            var options = {
                title: type,
                contexts: ['selection'],
                onclick: cm_clickHandler
            };
            if (cmid != null) {
                chrome.contextMenus.update(cmid, options);
            } else {
                // Create new menu, and remember the ID
                cmid = chrome.contextMenus.create(options);
            }
        }
    }
}); 
```

为了使这个例子简单，我假设只有一个上下文菜单条目。如果您想支持更多条目，请创建一个数组或散列来存储 ID。

## 尖端

*   **优化**- 为减少`chrome.contextMenus`API 调用次数，缓存参数的相关值。然后，使用简单的`===`比较来检查 contextMenu 项是否需要创建/更新。
*   **调试**- 所有`chrome.contextMenus`方法都是异步的。要调试您的代码，请将回调函数传递给[`.create`](http://developer.chrome.com/extensions/contextMenus.html#method-create)、[`.remove`](http://developer.chrome.com/extensions/contextMenus.html#method-remove)或[`.update`](http://developer.chrome.com/extensions/contextMenus.html#method-update)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-14T14:03:22.437

MDN 文档`menus.create()`，“标题”参数

> 您可以在字符串中使用“%s”。如果您在菜单项中执行此操作，并且在显示菜单时在页面中选择了某些文本，则所选文本将插入到标题中。

[https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/create](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/create)

因此

```
browser.contextMenus.create({
  id: 'menu-search',
  title: "Search '%s'",  // selected text as %s
  contexts: ['selection'], // show only if selection exist
}) 
```

# html - 使用相对定位时将元素的宽度设置为比父元素更宽

> ID：13202898
> 
> 赞同：0
> 
> 时间：2012-11-02T20:54:05.143
> 
> 标签：html, css, css-position

我有一个元素（在我的例子中是 HR 标签），它需要与浏览器一样宽，但也比它的父容器宽。但是，它仍然需要保持相对定位，以便它随着页面垂直滚动。问题是我的父 div 也必须具有相对定位（由于其他正在工作的布局）。

我能够解决这个问题的唯一方法是将 HR 标签的宽度设置为 3000 像素，左侧位置为 -1000 像素。这可行，但它向页面添加了一个水平滚动条（以显示 3000px 宽度）。有没有办法干净地完成这个（没有水平滚动条）？[你可以在http://jsfiddle.net/UGwst/](http://jsfiddle.net/UGwst/)看到我的小提琴。

这是HTML：

```
<div id="layout-wrapper">
  <p>Above Content</p>
  <div id="content-wrapper">
    <p>Top Content Here</p>
    <hr class="rule" />
    <p>Bottom Content Here</p>
  </div>
</div>​ 
```

这是CSS：

```
#content-wrapper {
  width: 400px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 8px;
  background-color: #ddd;
  position: relative;
}
.rule {
  background-color: #dbb328;
  height: 5px;
  position: relative;
  left: -1000px;
  width: 3000px;
}
​ 
```

我意识到这里还有几个其他类似的问题[，](https://stackoverflow.com/questions/5581034/is-there-are-way-to-make-a-child-divs-width-wider-than-the-parent-div-using-css)但似乎并不能完全解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:57:00.887

尝试

```
body {overflow-x: hidden;} 
```

消除水平滚动条。根据这个答案，它甚至可以在 IE6 - [CSS - 只有水平溢出？](https://stackoverflow.com/questions/1336600/css-only-horizontal-overflow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:57:29.297

`position:relative`在父级上使用。

在 HR 上使用`position:absolute`，这样 HR 就绑定到父级并随之滚动。

要隐藏滚动条`overflow:hidden`，请在外包装或 BODY 上使用。

# c# - 只停止一个线程

> ID：13202902
> 
> 赞同：-1
> 
> 时间：2012-11-02T20:54:38.050
> 
> 标签：c#, multithreading, thread-safety, threadpool, thread-sleep

我的应用程序中有很多线程，如何只停止其中一个线程？如果我使用`Thread.Sleep()`它停止整个应用程序，我只想停止一个线程。我怎么做？我正在使用 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:07:09.573

当您使用时，`Thread.Sleep()`您只停止调用此方法的线程。如果您的主线程（即 UI 线程）调用`Thread.Sleep()`，则应用程序冻结（实际上其他线程继续工作，但 UI 没有刷新）。所以，如果你想停止某个线程，那么：

*   它不应该是主线程
*   只需调用`Thread.Sleep()`该线程

示例（假设此代码在主线程上执行）：

```
ThreadPool.QueueUserWorkItem(DoSomething);
Thread.Sleep(1000); // this will freeze application 
```

这是一个回调（在后台线程上执行）：

```
static void DoSomething(object state)
{
    Thread.Sleep(5000); // this will not freeze application
} 
```

# zend-db - ZendFramework 2：语法错误或访问冲突：1066 不是唯一的表/别名：

> ID：13202905
> 
> 赞同：2
> 
> 时间：2012-11-02T20:55:17.713
> 
> 标签：zend-db, zend-framework2, zend-paginator

我是 Zendframework 2 的新手。我正在尝试加入两个表并显示结果。

两张表是。作品和艺术家。这些表是根据艺术家 ID 连接的。

第 1 步> 在模型第 2 步中创建 2 个类（作品、艺术家）> 在 WorksTable 我有以下代码

```
class WorksTable extends AbstractTableGateway
{
     protected $table ='works';

    public function __construct(Adapter $adapter)
        {

        $this->adapter = $adapter;
        $this->resultSetPrototype = new HydratingResultSet(
                new ArraySerializableHydrator(),
                new Works()
        );
        $this->resultSetPrototype->buffer(); 
        $this->initialize();
    }

    public function fetchAll()
    {
        $select = $this->getSql()->select();
        $select->join('works','artists.artist_id = artist_id ');

        //create paginator object to display records
        $paginator =  new Paginator(
                new DbSelect($select, $this->adapter, $this->resultSetPrototype)
        );

        return $paginator;

    }

} 
```

STEP 3> 在控制器中，我定义了以下代码

```
public function searchAction()
    { 
        $request = $this->getRequest();
        $paginator = $this->getWorksTable()->fetchAll();
 //         $paginator->setItemCountPerPage(12);
        $vm = new ViewModel(array(
                'poster' => $paginator,
        ));
        $vm->setVariable('paginator', $paginator);
        return $vm;   
    } 
```

对于语句 $paginator->setItemCountPerPage(12); 得到错误

信息：

```
SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'works' 
```

有没有人遇到过这个错误？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:44:33.533

您将`works`表连接到自身，mysql 将其视为连接但具有相同名称的两个单独的表，因此出现错误。

为您加入的表使用别名：

```
$select = $this->getSql()->select();
$select->join(array('w' => 'works'),'artists.artist_id = artist_id '); 
```

但看起来那里只是错字，表格应该是`artists`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T04:53:13.117

没有使用`artists`表开始查询。也没有`works`在连接时使用表。

```
 use Zend\Paginator\Adapter\DbSelect;
 use Zend\Db\Sql\Sql;
 public function fetchAll()
 {
    $sql = new Sql($this->tableGateway->getAdapter());
    $select = new Select();
    $select->from("artists");
    $select->columns(array('*'));
    $select->join('works','artists.artist_id = works.artist_id',array('your_wanted_column_names,don't mention again artist_id here because there should be a error'));

    $paginator =  new Paginator(
            new DbSelect($select, $this->adapter, $this->resultSetPrototype)
    );

    return $paginator; 
```

# regex - 为 expressjs 应用正则表达式

> ID：13202907
> 
> 赞同：1
> 
> 时间：2012-11-02T20:55:23.023
> 
> 标签：regex, node.js, express

我需要处理这样的请求：

```
/key/6435.254.53538 
```

我写了在 RegexPal 中工作的正则表达式

```
(([0-9]+\.?)+) 
```

我在 Express.js 中创建处理程序

```
/key/:key(([0-9]+\.?)+) 
```

但它只返回密钥的最后一部分

```
req.params.key == '53538' 
```

如何检索完整密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:57:09.050

问题似乎是您不小心捕获了数字，并且只返回了最后一次捕获。尝试：

```
/key/:key((?:[0-9]+\.?)+) 
```

或者

```
/key/:key(((?:[0-9]+\.?)+)) 
```

或者：

```
/key/:key([\d.]+) 
```

唯一的区别是它允许领先和连续的时期。如果你知道这永远不会发生，或者不是问题，那么这个正则表达式更容易阅读。

# uiimageview - 通过 AutoLayout 增大或缩小 UIImageView 框架以适应整个 iPhone 屏幕？

> ID：13202911
> 
> 赞同：0
> 
> 时间：2012-11-02T20:55:58.843
> 
> 标签：uiimageview, ios6, autolayout

所以我仍然习惯于 iOS 6 中的 Auto Layout 世界，这是一个有趣的（或者用简单的英语 - 艰难的）迁移来自字符串和支柱。

我有一个 UIImageView，它是我正在开发的游戏的背景。这是 Interface Builder 中常规 3.5 英寸 Retina 显示屏的外观：

![iphone 4 视网膜显示屏](../Images/131b839d36e21bb39b64b23c249f32bf.png)

但是，如果我将内容视图的“模拟指标”字段中的“大小”弹出窗口更改为“Retina 4 全屏”，我会看到以下内容：

![iphone 5 视网膜显示屏](../Images/a42bf3849df5efe46054e0982a5bae3e.png)

并且你可以看到沿着模拟 iPhone 5 屏幕的底部边缘出现了丑陋的黑条。这个同样丑陋的黑条会显示在 iPhone 5 模拟器中运行的已编译应用程序上。

是否有任何属性或约束我可以通过 Interface Builder 应用，以使 UIImageView 的框架正确地调整大小以适应适当的 iPhone 设备屏幕尺寸？

还是我必须通过代码输入约束？（啊）

我已经观看了三个 WWDC 视频，如果工程师讨论了调整视图大小以适合父级的主题，他们一定很快就忽略了它，因为我还没有找到或听说过一个体面的方法来获得 UIImageView和 NSImageView 在 iOS 和 MacOS 端正确调整其父视图的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:02:50.613

从您在此处显示的内容来看，我认为您想要做的是将图像拖动到超级视图的底部，以便它占据您想要的所有空间。在 IB 视图的右下角，您将看到一个小的灰色药丸形按钮，包含 3 个按钮。单击中间的一个（一旦您选择了 imageView）。它看起来有点像这样：|--|。它将显示一个约束列表。完成后，选择“Bottom Space to Superview”。然后，您应该能够在手机之间切换并自动调整图像大小。

# bash - 通过 ssh 运行交互式 Bash 命令

> ID：13202912
> 
> 赞同：2
> 
> 时间：2012-11-02T20:56:03.030
> 
> 标签：bash, ssh, chef-infra

我正在尝试使用厨师自动化我的服务器配置过程。由于我不想以 root 身份运行 chef，我需要一个 chef/deployer 用户。但我不想手动创建这个用户。相反，我想自动化这一步。所以我尝试编写脚本，但遇到了一个问题：

问题是如果我跑

```
>ssh root@123.345.345.567 '/bin/bash -e' < ./add_user.sh 
```

其中 add_user 包含

```
//..if the username doesnt exist already
adduser $USERNAME --gecos '' 
```

我从来没有看到命令的输出或提示。

1.  有没有办法以这种方式运行交互式命令？
2.  有没有更好的方法以自动方式添加用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:37:07.067

尝试这个：

```
ssh -t root@<ipaddress> adduser $USERNAME --gecos 
```

不知道为什么您`$`在原始示例中的 IP 地址中有一个 - 这可能会导致`ssh`连接失败，但由于您没有指出这种故障，我假设这只是一个错字。

由于`add_user.sh`只是一个简单的命令，不需要显式运行`bash`或重定向的额外复杂性，只需`adduser`通过`ssh`.

最后，由于`$USERNAME`很可能是在本地端而不是在远程端定义的，因此即使您可以让原始命令“按照您说的做”，您最终也会`adduser --gecos`在远程端运行，这不是你的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:58:30.780

尝试使用：

```
ssh -t root@$123.345.345.567 '/bin/bash -e' < ./add_user.sh 
```

反而。

# ruby-on-rails - Rails 应用程序到独立包，包括 gem 依赖项

> ID：13202915
> 
> 赞同：0
> 
> 时间：2012-11-02T20:56:14.247
> 
> 标签：ruby-on-rails, package

是否可以制作包含所有 gem 依赖项的 Rails 应用程序包（如 Heroku slug）？

然后将包复制到远程服务器，进入其目录并执行“bundle exec rails s”、“bundle exec sidekiq”或其他任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:41:12.390

我不确定这是否那么容易，但是您可以使用`bundle package`将所有 gem 文件放在一个地方以便以后轻松安装...

```
bundle package(1) bundle-package.1.html
      Package the .gem files required by  your  application  into  the
      vendor/cache directory 
```

可以选择捆绑安装以使用这些供应商提供的 gem。它现在让我忘记了，但文档应该把它打开。

# bluetooth - 蓝牙适配器和 iOS 模拟器

> ID：13202916
> 
> 赞同：0
> 
> 时间：2012-11-02T20:56:20.893
> 
> 标签：bluetooth, ios-simulator

我按照 Apple 技术说明上的说明购买了 IOGEAR GBU521 蓝牙加密狗：

[http://developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

我还按照指示对其进行了配置，并且正在尝试使温度传感器演示工作，但设置下的蓝牙似乎永远不会打开（继续旋转）。查看控制台，这是我所看到的：

2012-11-02 4:17:08.114 PM 首选项 [862]：BTM：设置可发现状态启用 2012-11-02 4:17:08.114 PM 首选项 [862]：BTM：设置可连接启用 2012-11-02 4： 17:08.115 PM 首选项 [862]：BTM：启用设备扫描 2012-11-02 4:17:08.115 PM 首选项 [862]：BTM：无法开始扫描，出现错误 111

有什么想法吗？我见过有人问过这个问题，但有没有人用这种方法工作？

最好的，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:34:15.550

扔掉 IOGEAR 并拿起 Cirago BTA8000。

除了 Cirago BTA8000 和 MediaLink 4.0 适配器，我还购买了您提到的 IOGEAR。事实证明，尽管我的 MacBook 内置了完全相同的芯片，但基于 Broadcom 芯片的任何东西都不起作用，这意味着 MediaLink 和 IOGEAR 不起作用。我的 Cirago 货物今天早上刚到，iOS 模拟器中的蓝牙滑块在不到一秒的时间内就弹到“ON”。

如果您想进行实验，我很想听听其他非博通芯片是否也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:22:56.663

我刚从亚马逊买了一个 GBU521 来升级我的 MacBook8,3 中的 BT

我有同样的问题，它没有出现。阅读您引用的同一篇文章（[TN2295](https://developer.apple.com/library/ios/technotes/tn2295/_index.html)），我做了一篇`sudo nvram bluetoothHostControllerSwitchBehavior="always"`告诉系统如果插入蓝牙控制器，则始终切换到蓝牙控制器。

`default`选项：

> 当连接新的 HCI 时，如果新模块不是 Apple 模块，内置驱动程序只会断开与内置 HCI 的连接并连接到外部 HCI。

我推测因为供应商 ID 匹配 ( `0xa5c`)，所以它没有切换到新的加密狗。将其设置为`always`会导致 OSX 始终切换到新的 BT 适配器。[TN2295](https://developer.apple.com/library/ios/technotes/tn2295/_index.html)中的以下声明证实了这一点：

> 打开系统信息应用程序以验证系统蓝牙驱动程序是否与**内置蓝牙主机控制器**接口 (HCI) 匹配。对于 Hardware->Bluetooth 设置，验证**供应商 ID 是否为 "0x5AC"**。

更新后重新启动`nvram`，我能够重新配对我的所有设备而不会发生任何事故。

[但是，由于TN2295](https://developer.apple.com/library/ios/technotes/tn2295/_index.html)中的以下声明，这**不适**用于 iOS BT LE 开发：

> 如果系统蓝牙控制器与蓝牙 LE USB 适配器匹配，则 iOS 模拟器将无法使用外部蓝牙控制器进行蓝牙 LE 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T04:02:28.260

实际上，您可以修改此处找到的`Info.plist`内部`BroadcomBluetoothHostControllerUSBTransport.kext`：

> /System/Library/Extensions/IOBluetoothFamily.kext/Contents/PlugIns/BroadcomBluetoothHostControllerUSBTransport.kext/Contents/Info.plist...

只需复制另一个 Broadcom 字典并对其进行修改或使用以下添加到`Info.plist`. 您需要以管理员身份执行此操作（即`sudo nano`复制`vi`原始文件后的此文件）。

```
 <key>Add an appropriate name here</key>
    <dict>
        <key>CFBundleIdentifier</key>
        <string>com.apple.iokit.BroadcomBluetoothHostControllerUSBTransport</string>
        <key>IOClass</key>
        <string>BroadcomBluetoothHostControllerUSBTransport</string>
        <key>IOProviderClass</key>
        <string>IOUSBDevice</string>
        <key>idProduct</key>
        <integer>8680</integer>
        <key>idVendor</key>
        <integer>2652</integer>
    </dict> 
```

编辑后可能需要重新启动。在 2012 MacBook Pro 上执行此操作，运行 XCode，它允许访问 iOS 模拟器中的蓝牙加密狗！

我希望这有帮助！

# python - 使 CGI 脚本工作（Apache、Python、MySQL）

> ID：13202917
> 
> 赞同：-1
> 
> 时间：2012-11-02T20:56:23.337
> 
> 标签：python, mysql, apache

你能帮我从 MySQL 中读取一些字符串并在我的网络浏览器中显示它们吗？这仅适用于我的本地主机。

我收到以下信息：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员，[未提供地址] 并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

至于我的文件 hello.py，它位于此处：

```
root@ubuntu:/var/www/test1.my/www/cgi-bin# ls -l
total 8 
```

它的属性如下：

```
-rwxr-xr-x 1 root root 465 Nov 2 23:30 hello.py
-rwxr-xr-x 1 root root 186 Nov 2 15:59 hello.py~ 
```

你能给我一些提示要解决什么吗？

[这些是我的配置文件](https://skydrive.live.com/redir?resid=8CDFFBA921B002FE!109&authkey=!AC8_eLcI60sJGcg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:08:45.967

据我所知，您需要在写入`Content-Type`-header后输出一个空行`hello.py`：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import MySQLdb
print "Content-Type: text/html\n"                  
#   newline after headers!    ^^ 
print "<html><head><title>Книги</title></head>"
... 
```

此外，您应该检查 apache 错误日志（通常位于`/var/log/apache/error.log`）以获取有关该错误的更多信息。

# android - 如何在android中以编程方式编辑应用程序主题的属性

> ID：13202921
> 
> 赞同：1
> 
> 时间：2012-11-02T20:56:32.877
> 
> 标签：android, android-layout

在我的应用程序中，我允许用户选择背景颜色、字体大小。一旦选择了这些，这个新的背景颜色将适用于活动和应用程序中的每个视图。

那么如何更改此背景颜色以将其应用于活动中的所有视图？

我想将其作为应用程序主题属性来实现。这意味着每当我的应用程序启动时，更改的颜色都应该反映在我的应用程序的每个活动的视图上。

有没有一种简单的方法可以做到这一点？否则，我将不得不为每个视图单独设置背景颜色属性。

此问题的所有相关帖子都讨论了在预先存在的主题之间进行的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:15:16.967

获得用户选择的背景颜色后，您可以将其保存在共享首选项中。然后，在每个活动的 onCreate 中，您可以接收 sharedpreference 值并设置背景颜色。

设置背景颜色很简单：

```
view.setBackgroundColor(Color.GREEN); 
```

使用共享首选项：

```
SharedPreferences sp = getSharedPreferences("color", MODE_PRIVATE);

String color = sp.getString("colorChoice", "BLACK"); 
```

上面的代码声明了一个 sharedpreferences 类型的变量：“color”就像组一样。然后，您声明一个调用 sp.getString() 的字符串变量：“BLACK”是默认值。

并保存到共享首选项：

```
Editor edit = sp.edit();
edit.putString("colorChoice", "Whatever the user selects here");
edit.commit(); 
```

当用户选择他们想要的背景颜色时，可以使用上面的代码。

现在，如果您希望它适用于活动中的所有视图，只需创建一个以视图作为参数的方法（然后您需要为每个视图调用此方法），或者使用视图组并调用其子视图。像这样的东西：

```
 private void unbindDrawables(View view){
    if (view.getBackground() != null){
        view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup){
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++){
            unbindDrawables(((ViewGroup) view).getChildAt(i));

        }//for loop
        try {
            ((ViewGroup) view).removeAllViews();
        } catch (UnsupportedOperationException e) {
            e.printStackTrace();
        }
    } 
```

请注意，此方法不设置背景颜色。这只是使用视图组并递归调用每个视图的示例。上述方法用于清除视图，特别是位图。

# java - 在 Java 中高效地读取/写入键/值对到文件

> ID：13202923
> 
> 赞同：2
> 
> 时间：2012-11-02T20:56:35.900
> 
> 标签：java, file, io

我正在寻找关于什么可能是写入/读取大型（10,000,000+）组键/值对的最有效方法的想法，每个键/值对由一个任意长度的字符串后跟一个长整数到/从一个文件组成爪哇。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:59:39.390

这就是属性 API 的用途：

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

请注意，有一些方法可以对 InputStreams、OuputStreams、PrintStreams 以及不同类型的 Readers 和 Writers 进行操作。

*   [JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)
*   [甲骨文教程](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)
*   [简单示例](http://www.mkyong.com/java/java-properties-file-examples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:48:55.467

使用 DataInput/OutputStream 包装一个 BufferedInput/OuputStream 包装一个 FileInput/OutputStream 对我来说产生可接受的性能。感谢所有的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:05:16.343

假设键和值由​​一些分隔符分隔。

1.  `BufferedReader`使用'`readLine()`方法读取整行。
2.  按分隔符拆分字符串并随身携带地图！

这是最简单且极其有效（如果不是最）的方式！

[请参阅它的 commons-io 包装器](http://www.kodejava.org/examples/53.html):)

只是不要显式地 flush()，让 close() 方法来做吧:)

# javascript - 适用于 Rails 3 的双面多选

> ID：13202929
> 
> 赞同：1
> 
> 时间：2012-11-02T20:57:06.830
> 
> 标签：javascript, jquery, ruby-on-rails, gem

我需要 Rails (3.2.8) 中的双面多选框，就像这里一样：

[http://www.stevefenton.co.uk/Content/Jquery-Two-Sided-Multi-Selector/](http://www.stevefenton.co.uk/Content/Jquery-Two-Sided-Multi-Selector/)

但是，我不能让它与 Rails 一起使用，而且它的文档记录很差，我不得不放弃那个。（它显示但按钮不起作用，即使在新的 Rails 应用程序上也是如此）

有谁知道类似的 jquery 或 gem 解决方案可以与 rails 一起使用？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T01:25:20.887

你可以试试这个：http: [//quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)

或者这是另一个： http: [//loudev.com/](http://loudev.com/)

然后在 Rails 视图中创建类似于以下内容的选择（“多个”部分对于任何一个插件都很重要）：

```
<%= f.select(:country, "country_id", Country.all.collect {|c| [ c.name, c.id ] }, {:include_blank => false}, {:class => "multiselect", :multiple => "multiple"}) %> 
```

并且在您的视图中还有以下 JavaScript：

```
<script>
$(document).ready(function (){
     $(".multiselect").multiselect();  // If you're using the quasipartikel one
     $('.multiselect').multiSelect();  // If you're using the loudev.com one
});
</script> 
```

# r - 在数据帧上聚合 lowess()

> ID：13202931
> 
> 赞同：2
> 
> 时间：2012-11-02T20:57:14.880
> 
> 标签：r, aggregate

所以我有一个包含四列的数据框：课程 ID、用户 ID、日期（整数）和收到的累积积分。我想要做的是，对于每个用户课程对，用于`lowess`平滑课程所有日子的累积分数。该`lowess`函数接受一个向量，应用一个平滑算法，然后返回两个向量`x`，然后`y`......我只对`y`向量感兴趣。

我的第一个想法是

```
aggregate(df$CumulativePointsReceived, 
          list(df$UserID, df$CourseID),
          function(x) lowess(x)$y) 
```

但这会返回一个基本不可用的数据框，其中第三列是这些向量的列表。我想要的是一个与输入 df 完全相同的数据框，但每个用户课程日都有一列平滑点值。我确定有一种非循环方式可以做到这一点，但我似乎无法以正确的方式思考它。提前致谢...

这是原始 df 中第一个用户课程对的 dput。我会放更多，但每个用户课程需要 110 天，但它变得非常大。

```
structure(list(CourseID = c(6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L, 6567146L,
6567146L), UserID = c(4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L, 4759679L,
4759679L), DayInCourse = 1:110, CumulativePointsReceived = c(0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 47, 47, 47, 47, 47, 47, 47, 47,
47, 47, 47, 47, 47, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107,
107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107, 107)), .Names =     c("CourseID",
"UserID", "DayInCourse", "CumulativePointsReceived"), row.names =     c(46085L,
46118L, 46120L, 46133L, 46102L, 46086L, 46182L, 46184L, 46159L,
46139L, 46088L, 46090L, 46144L, 46161L, 46187L, 46113L, 46177L,
46193L, 46151L, 46143L, 46126L, 46121L, 46104L, 46170L, 46128L,
46131L, 46167L, 46098L, 46127L, 46178L, 46101L, 46129L, 46152L,
46175L, 46093L, 46122L, 46096L, 46136L, 46106L, 46116L, 46148L,
46173L, 46189L, 46117L, 46172L, 46162L, 46164L, 46108L, 46091L,
46112L, 46135L, 46181L, 46190L, 46171L, 46169L, 46100L, 46141L,
46103L, 46168L, 46110L, 46107L, 46089L, 46154L, 46165L, 46125L,
46163L, 46147L, 46166L, 46183L, 46160L, 46150L, 46097L, 46115L,
46157L, 46194L, 46138L, 46188L, 46153L, 46155L, 46179L, 46180L,
46191L, 46095L, 46176L, 46111L, 46105L, 46142L, 46087L, 46109L,
46158L, 46145L, 46114L, 46192L, 46140L, 46146L, 46174L, 46094L,
46124L, 46149L, 46119L, 46186L, 46130L, 46134L, 46156L, 46185L,
46099L, 46123L, 46137L, 46132L, 46092L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:42:17.253

您可以使用基本 R 函数来执行此操作。例如

```
lapply(split(df, list(df$UserID, df$CourseID)),
       function(x) with(x, lowess(DayInCourse, CumulativePointsReceived))$y) 
```

返回：

```
$`4759679.6567146`
  [1]  40.92152  42.50447  44.08898  45.67481  47.26167  48.84919
  [7]  50.43697  52.02450  53.61120  55.19639  56.77928  58.35896
 [13]  59.93435  61.50424  63.06724  64.62175  66.16596  67.69780
 [19]  69.21547  70.71909  72.20948  73.68773  75.15522  76.61367
 [25]  78.06516  79.51217  80.95767  82.40508  83.85843  85.32230
 [31]  86.80193  88.30315  89.83235  91.39619  93.00115  94.65248
 [37]  96.35240  98.75650 100.73124 102.31467 103.55841 104.51780
 [43] 105.24556 105.78855 106.18658 106.47246 106.67275 106.80862
 [49] 106.89685 106.95067 106.98051 106.99458 106.99936 107.00000
 [55] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [61] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [67] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [73] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [79] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [85] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [91] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
 [97] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
[103] 107.00000 107.00000 107.00000 107.00000 107.00000 107.00000
[109] 107.00000 107.00000 
```

我们可以修改此方法以包括转换步骤：

```
out <- lapply(split(df, list(df$UserID, df$CourseID)),
              function(x) transform(x, smooth = lowess(DayInCourse,         
                                    CumulativePointsReceived)$y))

> head(out[[1]])
      CourseID  UserID DayInCourse CumulativePointsReceived   smooth
46085  6567146 4759679           1                        0 40.92152
46118  6567146 4759679           2                        0 42.50447
46120  6567146 4759679           3                        0 44.08898
46133  6567146 4759679           4                        0 45.67481
46102  6567146 4759679           5                        0 47.26167
46086  6567146 4759679           6                        0 48.84919 
```

由于您只提供了一个课程/用户组合，因此结果是一个只有一个组件的列表。在现实世界的示例中，列表将包含更多组件。在这种情况下做

```
final <- do.call(rbind, out) 
```

该`aggregate()`步骤失败的原因是您正在传递`lowess()`一个数据框，并且它需要两个向量`x`和`y`. 我认为这不是正确的方法。除非您想学习**plyr** ，否则手动进行拆分-应用-组合将是可行的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:12:31.567

我认为这会更容易`plyr`：

```
df <- ddply(df, .(CourseID, UserID), transform,
        smoothed = lowess(DayInCourse, CumulativePointsReceived)$y) 
```

的一般理念`plyr`是“拆分-应用-组合”。该`ddply`函数的语法（它接受一个数据框并返回一个数据框——还有其他用于数组或列表的函数）是

```
ddply(dataframe, field-list, function, function-args) 
```

然后，该函数将数据帧拆分为行块，其中指定的字段的所有值`field-list`都相同。然后，它采用这些块中的每一个并应用这些函数调用的`function`任何其他`function-args`结果，然后将它们组合到单个数据帧中。

这是一个例子：

```
ddply(mtcars, "cyl", colMeans) 
```

在这种情况下， colMeans 是一个函数，它取数据帧中每一列的平均值，因此对于 的每个值分别取平均值`cyl`。

您还可以指定自己的功能：

```
ddply(mtcars, "cyl", function(df) c(hp.mean=mean(df$hp), hp.sd=sd(df$hp))) 
```

现在来解释一下`transform`。`transform`是一个方便的功能，可以在没有丑陋索引的情况下向数据框添加新列。比较以下两个相同的调用：

```
Orange$score <- Orange$age * Orange$circumference^2

Orange <- transform(Orange, score = age * circumference^2) 
```

第二个版本更易于阅读且不易出错。从这个例子可以看出，for 的语法`transform`是

```
tranform(dataframe, myname2 = some-value, myname2 = some-other-value) 
```

等等。

`transform`当用作`plyr`. 在我上面给出的示例中，`smoothed = lowess(DayInCourse, CumulativePointsReceived)$y)`只是传递给转换的附加参数，因此对于`x`拆分数据帧中的每个块，`ddply`应用`transform`为

```
transform(x, smoothed = lowess(DayInCourse, CumulativePointsReceived)$y)) 
```

然后合并结果。

# iphone - 将 CGImage 绘制到 Bitmap 上下文中，并预先将 UIBezierPath 绘制到上下文中

> ID：13202933
> 
> 赞同：4
> 
> 时间：2012-11-02T20:57:23.123
> 
> 标签：iphone, ios, xcode, uibezierpath, cgbitmapcontextcreate

这是我的第一个问题，所以请多多包涵！

我基本上是在尝试写一个简单的绘图应用程序，我之前使用过Core Graphics，唯一的问题是它太慢了，当我用手指绘图时它会滞后，非常糟糕！

所以，现在我正在尝试使用 UIBezier 路径进行绘制，据我所知，它的速度要快得多，就是这样！

当我使用 Core Graphics 时，为了保持绘图速度，我正在绘制我创建的自定义位图上下文，该上下文在我绘制时不断更新。

因此，我绘制到我的自定义位图上下文，然后使用 - 将 CGImageRef 设置为在该上下文中绘制的内容 -

```
cacheImage = CGBitmapContextCreateImage(imageContext); 
```

然后使用 - 将其拉回到位图上下文中 -

```
CGContextDrawImage(imageContext, self.bounds, cacheImage); ) 
```

我也这样做了，所以当我改变所绘制线条的颜色时，绘图的其余部分保持之前绘制的状态，如果这有意义的话。

现在我遇到的问题是这个。

我试图绘制 UIBezier 路径到我的图像上下文使用 -

```
imageContext = UIGraphicsGetCurrentContext();

UIGraphicsPushContext(imageContext);

[path stroke];

if(imageContext != nil){
    cacheImage = CGBitmapContextCreateImage(imageContext);  //invalid context here so added to solve

}

CGContextScaleCTM(imageContext, 1, -1); // using this as UIBezier 

CGContextDrawImage(imageContext, self.bounds, cacheImage); // draws the current context;

[path removeAllPoints];

CGImageRelease(cacheImage); // releases the image to solve memory errors. 
```

路径是我的 UIBezierPath。所有的路径设置都是在 touches 开始和 touched 移动然后调用 [self setNeedsDisplay] 中完成的；调用drawRect。

发生的事情是，当我绘制时，它要么没有正确地将 CGImageRef 绘制到上下文中，要么就是这样，但是当它捕获缓存图像时，它从某个地方捕获了一个白色背景，而不仅仅是路径，因此它粘贴在整个最后一条路径与白色背景填充一起绘制的图像，因此即使视图背景颜色为 clearColor，您也看不到为构建图像而绘制的最后一条路径。

我真的希望我说得通，我只是在这上面花了太多时间，这让我完全筋疲力尽。这是我正在使用的绘图方法 -

这将创建图像上下文 -

```
 -(CGContextRef) myCreateBitmapContext: (int) pixelsWide:(int) pixelsHigh{

    imageContext = NULL;

    CGColorSpaceRef colorSpace; // creating a colorspaceref
    void *          bitmapData; // creating bitmap data
    int             bitmapByteCount; // the bytes per count
    int             bitmapBytesPerRow; // number of bytes per row

    bitmapBytesPerRow   = (pixelsWide * 4); // calculating how many bytes per row the context     needs
    bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh); // how many bytes there are in     total

    colorSpace = CGColorSpaceCreateDeviceRGB(); // setting the colourspaceRef

    bitmapData = malloc( bitmapByteCount ); // calculating the data

    if (bitmapData == NULL)
    {
        //NSLog(@"Memory not allocated!");
        return NULL;
    }

    imageContext = CGBitmapContextCreate (bitmapData,
                                          pixelsWide,
                                          pixelsHigh,
                                          8, // bits per component
                                          bitmapBytesPerRow,
                                          colorSpace,kCGImageAlphaPremultipliedLast);

    if (imageContext== NULL)
    {
        free (bitmapData);
        NSLog(@"context not created allocated!");
        return NULL;
    }
    CGColorSpaceRelease( colorSpace ); //releasing the colorspace

    CGContextSetRGBFillColor(imageContext, 1.0, 1.0, 1.0, 0.0); // filling the bitmap with a     white background
    CGContextFillRect(imageContext, self.bounds);
    CGContextSetShouldAntialias(imageContext, YES); 

    return imageContext; 
    } 
```

这是我的画——

```
 -(void)drawRect:(CGRect)rect
{

    DataClass *data = [DataClass sharedInstance];

    [data.lineColor setStroke];
    [path setLineWidth:data.lineWidth];
    imageContext = UIGraphicsGetCurrentContext();

    UIGraphicsPushContext(imageContext);

    [path stroke];

    if(imageContext != nil){
        cacheImage = CGBitmapContextCreateImage(imageContext);  
    }

    CGContextScaleCTM(imageContext, 1, -1); // this one

    CGContextDrawImage(imageContext, self.bounds, cacheImage); // draws the current     context;

    [path removeAllPoints];

    CGImageRelease(cacheImage); // releases the image to solve memory errors.

}

 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    DataClass *data = [DataClass sharedInstance];

    CGContextSetStrokeColorWithColor(imageContext, [data.lineColor CGColor]);

    ctr = 0;
    UITouch *touch2 = [touches anyObject];
    pts[0] = [touch2 locationInView:self];

}

 -(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];

    ctr++;
    pts[ctr] = p;
    if (ctr == 4)
    {

        pts[3] = CGPointMake((pts[2].x + pts[4].x)/2.0, (pts[2].y + pts[4].y)/2.0); // move     the endpoint to the middle of the line joining the second control point of the first Bezier     segment and the first control point of the second Bezier segment
        [path moveToPoint:pts[0]];
        [path addCurveToPoint:pts[3] controlPoint1:pts[1] controlPoint2:pts[2]]; // add a     cubic Bezier from pt[0] to pt[3], with control points pt[1] and pt[2]
        //[data.lineColor setStroke];

        [self setNeedsDisplay];
        // replace points and get ready to handle the next segment
        pts[0] = pts[3];
        pts[1] = pts[4];
        ctr = 1;
    }
}

 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    [path removeAllPoints];
    [self setNeedsDisplay];
    ctr = 0;
} 
```

'path' 是我的 UIBezierPath 'cacheImage' 是 CGImageRef 'imageContext' 是 CGContextRef

任何帮助深表感谢！如果您能想到更好的方法，请告诉我！但是，我确实需要缓存图像具有透明背景，因此它只是可见的路径，因为稍后我将在此工作时应用一些东西！

*编辑*此外，我每次都删除点以保持绘图速度，所以你知道！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:44:11.723

嗯，这是个大问题。一个潜在的线索是验证您是否准确地绘制了您需要的东西（而不是一直绘制整个图像），并将不变位图与那些在多个层之间主动变异的区域/矩形区分开来。

# trac - Trac模板系统

> ID：13202935
> 
> 赞同：0
> 
> 时间：2012-11-02T20:57:27.627
> 
> 标签：trac

我正在尝试了解模板系统。有一个带有以下自述文件的 /template 目录：

> 不建议在安装后对这些文件进行本地修改，因为它们可能会在安装新的 Trac 版本期间丢失。
> 
> 作为替代方案，您可以复制要修改的模板并将它们放置在 Trac 环境的 templates/ 目录中或`[inherit] templates_dir`设置下的 trac.ini 文件中指定的位置（前者优先于后者）。

这会很好 - 我可以将我的项目的模板很好地分隔在与我的项目相同的路径中。但是这个目录只包含部分模板，例如在这个路径中修改工单模板是不可能的。

那么修改Trac模板的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:29:02.637

通常不鼓励这样做，因为本地/自定义模板优先，如果上游版本有重大变化，这可能会成为阻碍。您永远不会收到有关更改模板的警告，并且您必须在每个新模板的基础上重新构建模板自定义。

无论如何，从源代码的新模板副本开始。`templates`模板可以在各个 Trac 领域的子目录中找到（即`ticket/templates`, `versioncontrol/templates`, `wiki/templates`），并将其全部直接放入`<env>/templates`（最初为空）或根据您的 [inherit] 配置在多个 Trac 环境中重用它们。

由于 Trac-0.11 Trac 使用 Genshi 模板引擎。请参阅它自己的关于可用语法[的 wiki 文档。](http://genshi.edgewall.org/wiki/Documentation/xml-templates.html)

# python - 使用 python 的 doc、docx 或 rtf 文件中的页数

> ID：13202944
> 
> 赞同：4
> 
> 时间：2012-11-02T20:57:45.027
> 
> 标签：python, linux, ms-word, rtf

我想使用 python 计算 RTF 或 MS Word 文档中的页数。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:01:00.593

并非没有渲染实际页面。

页数取决于许多因素，例如所使用字体的大小、页面上所有四个方向的边距以及插入任何其他大小的工件（例如图像）。

因此，您需要做的是在某种 RTF 库中呈现文档，并让该库告诉您有多少页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:03:29.643

您可以启动 Word，并使用 OLE 自动化来[询问它](http://support.microsoft.com/kb/293861)的页数。

# c - 防止宏的 GCC 警告“未使用计算的值”

> ID：13202948
> 
> 赞同：5
> 
> 时间：2012-11-02T20:58:25.243
> 
> 标签：c, gcc, gcc-warning

我正在开发一个支持错误处理的宏。

```
#define Try(e, call)   ( (e == OK) && ((e = call) != OK) ) 
```

它可以用作 if 语句的表达式：

```
if (Try(err, SomeFunction(foo, bar))) {
    // Entered only if err was OK before the if-statement and SomeFunction()
    // returned a non-OK value.
} 
```

`err`如果在 if 语句之前已经不正常，则不会调用该函数。if-statement 之后`err`会被设置为返回值`SomeFunction()`。

到现在为止还挺好。但是我也想使用没有 if 语句的宏：

```
Try(err, SomeFunction(foo, bar)); 
```

在这种情况下，GCC 会给出以下警告：

```
warning: value computed is not used [-Wunused-value] 
```

这就是我的问题所在：如何重写宏以使 GCC 不会产生此警告。我知道可以使用标志禁用警告（但我想为其他代码保持启用状态）或将结果显式转换为`void`. 以下语句代码不会产生警告：

```
(void) Try(err, SomeFunction(foo, bar)); 
```

`Try()`但是为每个前缀加上`void`演员表远非理想。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T21:10:20.257

您可以像这样使用三元运算符：

```
( (e == OK) ? ((e = call) != OK) : (e == OK) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:11:17.963

我会去做这样的事情

```
inline
bool notOK(int err) {
  return err != OK;
}

#define Try(e, call)   ( !notOK(e) && notOK(e = call) ) 
```

通常编译器不会抱怨未使用的函数返回值。

出于调试目的，可能还需要添加“实例化”

```
bool notOK(int err); 
```

在 .c 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:15:28.693

只是一个想法。

```
static inline int identity (int x) { return x; }
#define Try(e, call)   (identity ((e == OK) && ((e = call) != OK))) 
```

您可能想要`#define inline __inline__`或`#define inline /*nothing*/`使用非 gcc 编译器。

# qt - Qt 生成多个 .so 文件 - 使用哪一个？

> ID：13202952
> 
> 赞同：0
> 
> 时间：2012-11-02T20:58:45.310
> 
> 标签：qt, dll, shared-libraries

我正在学习*共享对象 (.so)* /*动态链接库 (.dll)*。因为我在 Linux 上只有*.so*文件是相关的。无论如何，当我编译一个共享库时，我会得到多个*.so*文件——其中大部分只是链接。这是一个屏幕截图：

![在此处输入图像描述](../Images/56b2fd9080c00365765e0e4e5e04f494.png)

然后我创建了另一个 Qt 控制台应用程序项目来测试这个 SO。我已经设置了所有头文件，将每个 .so 文件从以前的屏幕截图复制到这个新项目并添加

```
LIBS += "libAritmeticnoKodiranjeDLL.so" 
```

到项目设置。如果我编译项目，它就可以了。但是在运行我的测试应用程序时，我收到了这个错误：

*./DLLTester：加载共享库时出错：libAritmeticnoKodiranjeDLL.so.1：无法打开共享对象文件：没有这样的文件或目录*

问题出在哪里，为什么我会得到这么多 .so 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:27:17.830

做就是了：

```
LIBS += -lAritmeticnoKodiranjeDLL 
```

库前缀（“lib”）和后缀（“.so”）的细节将由链接器处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:32:10.450

请注意，除了一个之外的所有文件都只是符号链接，而实际文件是具有最精确版本的文件。这是为了支持不同版本的库，当版本未完全定义时，符号链接确定使用哪个确切版本。如果您要将库安装到系统库文件夹，这很重要，但如果您只是随应用程序分发一个非共享版本，那么您可以使用不带版本号的名称。

使用自定义库运行应用程序时，您需要将目录添加到 LD_LIBRARY_PATH 环境变量，以便运行时链接器找到它们。请参阅[https://stackoverflow.com/search?q=LD_LIBRARY_PATH](https://stackoverflow.com/search?q=LD_LIBRARY_PATH)。对于故障排除，您可以运行`ldd yourprogram`以查看实际加载了哪些共享库，并`echo $LD_LIBRARY_PATH`让您确保 LD_LIBRARY_PATH 是您认为的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-16T19:51:28.727

根据我目前的经验，我可以肯定地确认在 Linux（Ubuntu 16.04）下使用 QtCreator 4.0.3 和 Qt 5.7 构建共享库时（使用`TEMPLATE = lib`），然后生成的目标是`libName.so`（当`CONFIG += unversioned_libname`）或`libNAME.so.1.0.0`（当`CONFIG`不变时）。但是，使用相同环境构建的应用程序在链接期间正确链接到该库`LIBS += -Lfolder -lNAME`（制作文件）。我花了 2 个工作日来弄清楚这一切。唯一的方法是手动更改生成的 .so 文件的名称以适应应用程序的请求。`linName.so.1``error while loading shared libraries: libNAME.so.1: cannot open shared object file: No such file or directory``libName.so.1`

# json.net - 无法将 Newtonsoft.Json.Linq.JProperty 转换为 Newtonsoft.Json.Linq.JToken

> ID：13202953
> 
> 赞同：3
> 
> 时间：2012-11-02T20:58:49.840
> 
> 标签：json.net, jira

我正在尝试构建 Mike Jansen 的[JIRA REST Client](https://answers.atlassian.com/questions/20204/jira-rest-client-for-net-collaboration)，并且我正在尝试获取 JIRA 版本信息。我是 JSON 新手，所以我不确定这只是格式问题还是什么。

调试时，我有以下令牌：

```
{[
  {
    "self": "https://<company>.atlassian.net/rest/api/2/version/10101",
    "id": "10101",
    "name": "2012.3",
    "archived": false,
    "released": false,
    "releaseDate": "2012-10-08"
  },
  {
    "self": "https://<company>.atlassian.net/rest/api/2/version/10200",
    "id": "10200",
    "name": "2012.4",
    "archived": false,
    "released": false
  }
]} 
```

和下面的代码行

```
token.Children().Values<T>() 
```

抛出以下错误

```
Cannot cast Newtonsoft.Json.Linq.JProperty to Newtonsoft.Json.Linq.JToken 
```

在尝试将两个版本标记转换为相应的 JiraVersion 类时：

```
using System;
namespace JiraRestClient
{
    public class JiraVersion : JiraObjectBase, IJiraVersion
    {
        public JiraVersion(IJiraRestResponse jiraResponse) : base(jiraResponse) { }
        public string Id { get { return Get<string>("Id", "id"); } }
        public string Name { get { return Get<string>("Name", "name"); } }
    }
} 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:59:16.413

熟悉 JSON 的人可能很快注意到它实际上是格式问题（包含数组的额外花括号）。就像我说的，我是 JSON 新手，但我的研究的最终结果是 JsonWrapper.TryGetPath(...) 方法尝试遍历 JObject 树并且在检索的是数组时不会生成格式正确的 JSON .

我的解决方案是通过从解决方案中删除 JSON.Net 并仅依赖于 RestSharp（只是因为它使发出请求变得如此容易）和 System.Web.Script.Serialization.JavaScriptSerializer().Deserialize(response.Content ） 方法。

# android - 仅在经过时间时发送 Intent onUpdate

> ID：13202957
> 
> 赞同：0
> 
> 时间：2012-11-02T20:59:05.347
> 
> 标签：android, android-appwidget, onupdate

我仍处于学习用 Java 为 Android 编程的第一步。所以我的问题对于一些更有经验的程序员来说可能很明显，但我真的找不到任何有用的或具体的例子。

无论如何，我有一个小部件。我想在调用我的 onUpdate 时发送通知，因为 android:updatePeriodMillis 已经发生。我知道如何在使用 setOnClickPendingIntent 单击按钮时获得通知。但是只有当计时器用完时，我才知道该怎么做。

我的一些代码：

```
@Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        Toast.makeText(context, "onUpdate", Toast.LENGTH_SHORT).show();
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.activity_app_widget);
        Intent configIntent = new Intent(context, FrontPage.class);
        configIntent.setAction(ACTION_WIDGET_CONFIGURE);
        Intent active = new Intent(context, AppWidget.class);
        active.setAction(ACTION_WIDGET_RECEIVER);
        active.putExtra("msg", "Message for Button 1");

        Intent activeButtonTwo = new Intent(context, AppWidget.class);
        activeButtonTwo.setAction(ACTION_WIDGET_RECEIVER2);
        activeButtonTwo.putExtra("msg", "Message for Button 2");

        Intent updateNotification = new Intent (context, AppWidget.class);
        updateNotification.setAction(ACTION_UPDATE);

        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        PendingIntent actionPendingIntent2 = PendingIntent.getBroadcast(context, 0, activeButtonTwo, 0);
        PendingIntent configPendingIntent = PendingIntent.getActivity(context, 0, configIntent, 0);

        remoteViews.setOnClickPendingIntent(R.id.buttonPrevious, actionPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.buttonNext, actionPendingIntent2 );
        remoteViews.setOnClickPendingIntent(R.id.buttonGoToApp, configPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

    } 
```

这是我的 onReceive()：

```
@Override    
public void onReceive(Context context, Intent intent)
        {   

            // v1.5 fix that doesn't call onDelete Action
                    final String action = intent.getAction();
                    if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
                        final int appWidgetId = intent.getExtras().getInt(
                                AppWidgetManager.EXTRA_APPWIDGET_ID,
                                AppWidgetManager.INVALID_APPWIDGET_ID);
                        if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
                            this.onDeleted(context, new int[] { appWidgetId });
                        }
                    } else {
                        // check, if our Action was called
                        if (intent.getAction().equals(ACTION_WIDGET_RECEIVER) || intent.getAction().equals(ACTION_WIDGET_RECEIVER2)) {
                            String msg = "null";
                            try {
                                msg = intent.getStringExtra("msg");
                            } catch (NullPointerException e) {
                                Log.e("Error", "msg = null");
                            }
                            Toast.makeText(context, msg, Toast.LENGTH_SHORT).show();

                            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intent, 0);
                            NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
                            Notification noty;
                            if(intent.getAction().equals(ACTION_WIDGET_RECEIVER)){
                                noty = new Notification(R.drawable.ic_launcher, "Button 1 clicked", System.currentTimeMillis());
                            }
                            else
                            {
                                noty = new Notification(R.drawable.ic_launcher, "Button 2 clicked", System.currentTimeMillis());
                            }
                            noty.setLatestEventInfo(context, "Notice", msg, contentIntent);
                            notificationManager.notify(1, noty);

                        } else {
                            // do nothing
                        }

                        super.onReceive(context, intent);
                    }
    } 
```

所以长话短说，我只想在我的计时器到时才向我的 onReceive 方法发送一个特定的 Intent。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:47:05.973

如果您不想在设备休眠时更新，最好使用 AlarmManager。（参见[http://developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)）例如，像这样：

```
 AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.setInexactRepeating(AlarmManager.RTC, System.currentTimeMillis() + YOUR_UPDATE_INTERVAL,
                YOUR_UPDATE_INTERVAL, intent); 
```

intent 是您设置 Action 的 PendingIntent。

# objective-c - 将双十进制转换为十六进制、二进制和八进制字符串

> ID：13202964
> 
> 赞同：2
> 
> 时间：2012-11-02T20:59:45.307
> 
> 标签：objective-c, math

是否有自定义或标准库可以与目标 c 一起使用，将十进制浮点值转换为十六进制、二进制和八进制 NSStrings？

我一直在环顾四周，但只能通过使用以下方法找到如何转换另一个方向（从其他所有方向转换为十进制）：`double result = (double)strtoll(myHexString.UTF8String, NULL,16)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:03:33.460

至于八进制和十六进制，您可以利用以下事实：您可以使用 %x 和 %o 说明符将数字格式化为十六进制和八进制：

```
NSString* str=[NSString stringWithFormat: @"Hex: %x Octal: %o",14,14]; 
```

但这仅适用于整数部分，因此您可以使用整数。如果您还想要小数部分，则要获得固定点，您需要实现算法，对于二进制也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T15:48:45.550

为了补充前面的答案，格式说明符 %x 只允许处理整数值。如果你得到一个大于最大整数值的十进制值，你可以使用 long long 通过这种方式转换你的 double 值：`NSString * hexString = [NSString stringWithFormat:@"%llx", (long long)doubleValue];`

# c# - 匹配重复模式

> ID：13202969
> 
> 赞同：0
> 
> 时间：2012-11-02T21:00:34.983
> 
> 标签：c#, regex

我目前正在尝试在以下输入中匹配和捕获文本：

```
field: one two three field: "moo cow" field: +this 
```

我可以匹配`field:`，`[a-z]*\:`但是我似乎无法匹配其余的内容，到目前为止，我的尝试只导致捕获所有我不想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:04:28.687

如果您知道它总是字面意思`field:`，则绝对不需要正则表达式：

```
var delimiters = new String[] {"field:"};
string[] values = input.Split(delimiters, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

但是，根据您的正则表达式，我假设名称`field`可以有所不同，只要它位于冒号前面。您可以尝试捕捉一个单词`:`，然后捕捉到下一个单词的所有内容（使用前瞻）。

```
foreach(Match match in Regex.Matches(input, @"([a-z]+):((?:(?![a-z]+:).)*)"))
{
    string fieldName = match.Groups[1].Value;
    string value = match.Groups[2].Value;
} 
```

正则表达式的解释：

```
(     # opens a capturing group; the content can later be accessed with Groups[1]
[a-z] # lower-case letter
+     # one or more of them
)     # end of capturing group
:     # a literal colon
(     # opens a capturing group; the content can later be accessed with Groups[2]
(?:   # opens a non-capturing group; just a necessary subpattern which we do not
      # need later any more
(?!   # negative lookahead; this will NOT match if the pattern inside matches
[a-z]+:
      # a word followed by a colon; just the same as we used at the beginning of
      # the regex
)     # end of negative lookahead (not that this does not consume any characters;
      # it LOOKS ahead)
.     # any character (except for line breaks)
)     # end of non-capturing group
*     # 0 or more of those
)     # end of capturing group 
```

所以首先我们匹配`anylowercaseword:`。然后我们一次再匹配一个字符，每个字符都检查这个字符不是`anotherlowercaseword:`. 使用捕获组，我们稍后可以分别找到字段的名称和字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:03:12.520

不要忘记您实际上可以匹配正则表达式中的文字字符串。如果你的模式是这样的：

```
field\: 
```

您将按字面意思匹配“字段：”，仅此而已。

# c++ - 有人可以向我解释为什么在 LLVM 的以下代码中存在具有相同操作数的不等式测试吗？

> ID：13202974
> 
> 赞同：3
> 
> 时间：2012-11-02T21:01:00.723
> 
> 标签：c++, comparison, llvm, operator-keyword, relational

我的同事向我展示了[LLVM 源代码](http://llvm.org/svn/llvm-project/llvm/trunk/lib/ExecutionEngine/Interpreter/Execution.cpp)中的以下宏：

```
#define IMPLEMENT_UNORDERED(TY, X,Y)                                         \
    if (TY->isFloatTy()) {                                                   \
        if (X.FloatVal != X.FloatVal || Y.FloatVal != Y.FloatVal) {          \
            return Dest;                                                     \
        }                                                                    \
    } else if (X.DoubleVal != X.DoubleVal || Y.DoubleVal != Y.DoubleVal) {   \
            Dest.IntVal = APInt(1,true);                                     \
            return Dest;                                                     \
} 
```

以下是他们如何使用这个宏：

```
static GenericValue executeFCMP_UEQ(GenericValue Src1, GenericValue Src2,
                                    Type *Ty) {
    GenericValue Dest;
    IMPLEMENT_UNORDERED(Ty, Src1, Src2)
    return executeFCMP_OEQ(Src1, Src2, Ty);
} 
```

下面你可以看到[GenericValue](http://llvm.org/svn/llvm-project/llvm/trunk/include/llvm/ExecutionEngine/GenericValue.h)的定义：

```
struct GenericValue {
    union {
        double          DoubleVal;
        float           FloatVal;
        PointerTy       PointerVal;
        struct { unsigned int first; unsigned int second; } UIntPairVal;
        unsigned char   Untyped[8];
    };
    APInt IntVal;   // also used for long doubles

    GenericValue() : DoubleVal(0.0), IntVal(1,0) {}
    explicit GenericValue(void *V) : PointerVal(V), IntVal(1,0) { }
}; 
```

我的问题是为什么宏内部有以下不等式测试：

```
X.FloatVal != X.FloatVal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T21:05:51.893

我猜他们会测试 NaN （不是数字）：如果`x`有 NaN 值，则`x != x`产量`true`.

# javascript - Div 在另一个 Div 中的相对位置

> ID：13202978
> 
> 赞同：0
> 
> 时间：2012-11-02T21:01:23.357
> 
> 标签：javascript, jquery, html, position

如何获得 Div 相对于其父 Div 的位置？使用`.position()`and`.offset()`总是给我它在文档中的位置。

* * *

**HTML：**

```
<div id="frame">
   <div id="inner"></div>
</div> 
```

* * *

**CSS：**

假设`frame`以`margin: auto;`和为中心`width: 1024px`。

`inner`有和。`left: 300px;`_`top: 200px``position: relative;`

**我想要的是：**

一个很好的功能，用于获取`inners`的位置数据`300`和`200`（例如，`px`在使用时不使用`.css('left')`等。

有没有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:04:41.150

如果你给父级一个“相对”的“位置”，那么 using`.position()`应该是它在父级内部的位置。

Using`.offset`实际上应该**始终**根据 为您提供其位置`document`，而 using`.position`根据其“位置”不是“静态”（默认）的第一个父级为您提供其“位置”。

以下是示例：

[http://jsfiddle.net/Z2VNx/](http://jsfiddle.net/Z2VNx/)

[http://jsfiddle.net/Z2VNx/1/](http://jsfiddle.net/Z2VNx/1/)

第一个示例用于`<br />`在容器顶部添加空间，而第二个示例用于`padding-top`在容器顶部添加空间。两者都返回一个大于`0`孩子`top`位置的值。

唯一的问题是`position`在计算孩子的位置时没有考虑孩子的边距、填充和边框。这是因为所有这些都是元素的一部分，所以即使您可能看不到它们，它们也不会包含在元素的位置计算中。因此，当然，根据您想要查看其位置的元素的确切部分，您需要将其添加到`.position`. 有些人希望“位置”返回到边框的左上角位置，这意味着添加边距。像这样的东西：

[http://jsfiddle.net/Z2VNx/2/](http://jsfiddle.net/Z2VNx/2/)

# xml - XML 子/兄弟解析

> ID：13202980
> 
> 赞同：2
> 
> 时间：2012-11-02T21:01:27.743
> 
> 标签：xml, haskell, yesod

我从[这个](https://stackoverflow.com/questions/13187807/text-xml-cursor-lost-in-the-types)问题继续这个问题。任务是在`mb`节点中搜索具有特定值的 ，然后过滤掉与元素中的`model` `attribute`不匹配的节点。过滤后，我需要从. 我已经取得了一些进展。我能够匹配并捕获属性的值。`value` `attribute``dmiattr``rev` `attribute``model` `attribute``rev`

但是我很难深入到孩子身上`dmiattr`。我想我几乎拥有所有正确的功能，也许不是正确的组合子。也许我的代码逻辑也很不稳定。我不确定哪里出了问题。反馈同意。

```
import Text.XML
import Text.XML.Cursor
import qualified Data.Text as T

getProfiles :: AdviseConf -> IO () -- AdviseResult
getProfiles  (AdviseConf model mb) = do
   doc <- Text.XML.readFile def xmlFile
   let cursor = fromDocument doc
   _ <- Prelude.writeFile "test.txt" $
        show                         $
        cursor                       $//
        check findNode               &.// -- &//
        attributeIs "model" "460"    &.//
        check findMB                 &.//
        followingSibling             &.//
        attributeIs "value" "GF615M-P33  (MS-7597)" &.//
        attribute "rev"
   return ()

findNode :: Cursor -> Bool
findNode c = case (attribute "rev" c) of
              []  -> False
              otherwise -> True

findMB :: Cursor -> Bool
findMB c = case ( attribute "value"  c) of
            [] -> False
            otherwise -> True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:05:09.860

我没有遵循您代码中的所有细节（`followingSibling`例如，的目的是什么？）。但我认为这让你非常接近你正在寻找的东西：

```
{-# LANGUAGE OverloadedStrings #-}
import Text.XML
import Text.XML.Cursor

main = do
   doc <- Text.XML.readFile def "test.xml"
   let cursor = fromDocument doc
   print $
        cursor                       $//
        hasAttribute "rev"           >=>
        attributeIs "model" "460"    &.//
        check (\c -> c $// element "dmiattr"
                       >=> attributeIs "value" "GF615M-P33  (MS-7597)") >=>
        attribute "rev" 
```

请注意，该`check`函数的参数返回一个列表。如果该列表为空，则将其视为与 相同`False`，因此检查失败。

# android - 在 Android 应用程序中获取 JSON 的异常

> ID：13202982
> 
> 赞同：1
> 
> 时间：2012-11-02T21:01:40.487
> 
> 标签：android, json

我正在开发一个从网络服务器获取 JSON 然后在图表中显示数据的 Android 应用程序。

这是日志猫，谁能解释一下错误是什么？

```
10-28 02:30:01.653: D/gralloc_goldfish(5043): Emulator without GPU emulation detected.
10-28 02:30:04.393: D/AndroidRuntime(5043): Shutting down VM
10-28 02:30:04.393: W/dalvikvm(5043): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
10-28 02:30:04.433: E/AndroidRuntime(5043): FATAL EXCEPTION: main
10-28 02:30:04.433: E/AndroidRuntime(5043): java.lang.IllegalStateException: Could not     execute method of the activity
10-28 02:30:04.433: E/AndroidRuntime(5043):     at     android.view.View$1.onClick(View.java:3039)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at     android.view.View.performClick(View.java:3480)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.view.View$PerformClick.run(View.java:13983)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.os.Handler.handleCallback(Handler.java:605)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.os.Looper.loop(Looper.java:137)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.app.ActivityThread.main(ActivityThread.java:4340)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at     java.lang.reflect.Method.invokeNative(Native Method)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at java.lang.reflect.Method.invoke(Method.java:511)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at     dalvik.system.NativeStart.main(Native Method)
10-28 02:30:04.433: E/AndroidRuntime(5043): Caused by:     java.lang.reflect.InvocationTargetException
10-28 02:30:04.433: E/AndroidRuntime(5043):     at java.lang.reflect.Method.invokeNative(Native Method)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at java.lang.reflect.Method.invoke(Method.java:511)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at     android.view.View$1.onClick(View.java:3034)
10-28 02:30:04.433: E/AndroidRuntime(5043):     ... 11 more
10-28 02:30:04.433: E/AndroidRuntime(5043): Caused by: java.lang.NullPointerException
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.graph.LineGraph.getIntent(LineGraph.java:27)
10-28 02:30:04.433: E/AndroidRuntime(5043):     at android.graph.GraphAChartEngineActivity.lineGraphHandler(GraphAChartEngineActivity.java:35)
10-28 02:30:04.433: E/AndroidRuntime(5043):     ... 14 more
10-28 02:30:07.945: I/Process(5043): Sending signal. PID: 5043 SIG: 9 
```

# php - APNS 不发送响应也不发送推送通知

> ID：13202983
> 
> 赞同：0
> 
> 时间：2012-11-02T21:01:43.400
> 
> 标签：php, stream, push, apple-push-notifications

[苹果的文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW4)说：

> “如果您发送通知，而 APNs 发现通知格式错误或无法理解，它会在断开连接之前返回一个错误响应数据包。（如果没有错误，APNs 不会返回任何内容。）图 5-3 描述了以下格式错误响应数据包。”

这让我相信，APNS 不会发回东西的唯一原因是我发送给他们的东西格式是否正确。但是，当我试图为他们的响应而担心时，我得到一个长度为 0 的字符串，并且当 unpacked 变为 null 时，我认为这意味着没有任何东西被写回给我。

我流被打开`stream_socket_client()`并且没有返回 false 或抛出异常。我知道我的 fwrite 也成功地向该流写入了 154 个字节。为什么苹果没有回应？

以下是连接到 APNS 的代码：

```
function openConnection() {
    $streamContext = stream_context_create();
    stream_context_set_option($streamContext, 'ssl', 'local_cert', $this->APNS_CERT);
    stream_context_set_option($streamContext, 'ssl', 'passphrase', $this->Password);
    $apns = stream_socket_client('ssl://' . $this -> APNS_HOST . ':' . $this -> APNS_PORT, $error, $errorString, 60, STREAM_CLIENT_CONNECT, $streamContext);
    return $apns;
} 
```

然后，在调用 openConnection 之后的下一个方法中：

```
//open the connection to use with apple.
$apns = $this->openConnection();

$alert = $message['alert'];
$badge = $message['badge'];
$deviceToken = $message['deviceToken'];

$payload['aps'] = array(
    'alert' => $message['alert'],
    'badge' => $message['badge'],
    'sound' => $message['sound']
);

if ($message['extraPayload'] != null) {
    $payload['acme'] = $message['extraPayload'];
}

$encodedString = json_encode($payload);

//create message
$apnsMessage = chr(1) . pack("N", $message['identifier']) . pack("N", $message['expire']) . pack("n", 32) . pack('H*', str_replace(' ', '', $message['deviceToken'])) . pack("n",strlen($encodedString)) . $encodedString;

$write = fwrite($apns, $apnsMessage);
echo $write;
//the echo was just to see if it wrote.

if (!$apns) {
    socket_close($apns);
    fclose($apns);

    echo "connection to APNS was lost.";
}

//look for changes. $null=null because some bug doesn't just let you pass null.
$null = null;
$changedStreams = stream_select($streamArray, $null, $null, 0, 1000000);

//check if it is actually false
if ($changedStreams === false) {
    //close stream when done.
    socket_close($apns);
    fclose($apns);

    echo "No response from APNs";
} elseif ($changedStreams > 0) {
//then check if what they sent back is an error and grab the error packet
$responseBinary = fread($apns, 6);
var_dump($responseBinary);

//check that it's the right thing
if ($responseBinary != false || strlen($responseBinary) == 6) {
    //convert it from it's binary stream state and print.
    $response = unpack('Ccommand/Cstatus_code/Nidentifier', $responseBinary);
    var_dump($response);

    //close stream when done.
    socket_close($apns);
    fclose($apns);
    }
} else {
    echo "Apple failed to respond, message was not sent.";
} 
```

最后`var_dump`是`NULL`.

编辑：

原来这是一个凭证冲突的错误。它是通过创建一个新的 pem 文件来解决的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:18:56.913

从该页面：

您应该定期与反馈网络服务器连接，并获取那些反复报告失败交付尝试的设备的当前列表。然后您应该停止向与这些应用程序关联的设备发送通知。有关详细信息，请参阅“反馈服务”。

反馈服务

通过类似于用于发送推送通知的二进制接口访问反馈服务。您通过feedback.push.apple.com，端口2196访问生产反馈服务；您可以通过 feedback.sandbox.push.apple.com 的 2196 端口访问沙盒反馈服务。与推送通知的二进制接口一样，您必须使用 TLS（或 SSL）来建立安全的通信通道。这些连接所需的 SSL 证书与为发送通知而配置的证书相同。要建立受信任的提供者身份，您应该在连接时使用点对点身份验证将此证书提供给 APN。

# ios - 在 windows 7 上的 flash cs5 中使用 ios 元素

> ID：13202987
> 
> 赞同：0
> 
> 时间：2012-11-02T21:01:57.063
> 
> 标签：ios, flash-cs5

我准备在 Windows 7 上使用 flash cs5 制作一个 iphone 应用程序。

我的问题是如何在 flash cs5 中使用 ios ui 元素输入、滚动、键盘、选择、选项、开关等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:14:27.743

如果您使用除 Xcode 之外的任何 sdk，则必须手动添加 gui 元素。

你在这里：[iOS6 GUI PSD](http://www.teehanlax.com/downloads/ios-6-gui-psd-iphone-5/)

# ruby-on-rails - 带有自定义处理器的 CarrierWave 未注册

> ID：13202992
> 
> 赞同：7
> 
> 时间：2012-11-02T21:02:21.540
> 
> 标签：ruby-on-rails, ruby, version, carrierwave

我正在使用[carrierwave](https://github.com/jnicklas/carrierwave)上传视频，然后有一个名为thumb的版本，带有一个自定义处理器，可以获取视频并使用streamio-ffmpeg创建屏幕截图。视频和文件均已正确上传，但是在调用 uploader.url(:thumb) 时，我得到：

> ArgumentError：版本拇指不存在！

## 视频上传器.rb

```
require 'carrierwave/processing/mime_types'
require 'streamio-ffmpeg'

class VideoUploader < CarrierWave::Uploader::Base
    include CarrierWave::VideoConverter
    include CarrierWave::MimeTypes

    process :set_content_type

    storage :file

    version :thumb do
            process :create_thumb

            #def full_filename(for_file)
            #        "thumb_#{File.basename(for_file, File.extname(for_file))}.png"
            #end
    end

    def create_thumb
            cached_stored_file! if !cached?

            movie = FFMPEG::Movie.new(current_path)

            dirname = File.dirname(current_path)

            thumb_path = "#{File.join(dirname, File.basename(path, File.extname(path)))}.png"

            movie.screenshot(thumb_path, :seek_time => 5)
            File.rename thumb_path, current_path
    end

    def file_identifier
            model[:video]
    end

    # Override the directory where uploaded files will be stored.
    # This is a sensible default for uploaders that are meant to be mounted:
    def store_dir
            return "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.user_id}/#{model.id}"
    end
end 
```

然后 model.video_url(:thumb) 返回参数错误。我不知道该怎么做或为什么版本没有注册任何帮助会很好，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:38:22.033

# 使固定

导致错误的原因是重新启动服务器但没有重新启动 Rails 控制台。一旦我这样做了，参数错误就消失了，但我走错了路。所以我没有评论

```
 def full_filename(for_file)
                "thumb_#{File.basename(for_file, File.extname(for_file))}.png"
        end 
```

并使用

```
[model].video.recreate_versions! 
```

纠正路径或命名方案中可能发生的任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:29:08.660

您的 create_thumb 方法中的某个步骤很可能失败，因此拇指永远不会创建并且没有 URL。您的日志中是否有任何异常？

也许您需要指定 FFMPEG 二进制位置：

```
FFMPEG.ffmpeg_binary = '/usr/local/bin/ffmpeg' 
```