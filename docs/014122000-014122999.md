# StackOverflow 问答 14122000-14122999

# javascript - 移动设备的滚动问题（在自动完成列表中）

> ID：14122000
> 
> 赞同：0
> 
> 时间：2013-01-02T12:25:29.157
> 
> 标签：javascript, android, html, scroll, iscroll4

我有一个自动完成列表，在列表中我使用 iscroll 4 的滚动：[http](http://cubiq.org/iscroll-4) ://cubiq.org/iscroll-4 for Mobile。（Html5 + PhoneGap for Android）

在输入中写一个字母时（自动完成已打开）我调用了一个刷新滚动的函数，因为每次写一个字母列表的大小都会改变。

我的刷新功能：

```
function RefreshScroll() {
    MyScroll.scrollToElement('li:nth-child(1)', 100)// Jump to the first element
    setTimeout(function () {
        MyScroll.refresh();// Refresh scroll bar -function of iscroll 4
    }, 0);
} 
```

我的卷轴：

```
document.addEventListener('DOMContentLoaded', LoadScroll, false);

var myScroll;

function LoadScroll() {
    document.addEventListener('touchmove', function (e) { e.preventDefault(); });
    myScroll= new iScroll('wrapper');
} 
```

我有几个问题：

1.  我第一次按下键盘字母时，列表会出现而不滚动，只有在单击第二个字母时才会出现滚动。

2.  第二次出现滚动并且我向下滚动时，当到达列表的末尾而不是向后跳时，他随着列表的继续而下降。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:00:16.900

最后我以这种方式解决了这个问题：

因为自动完成需要时间来填充，所以我只在一段时间后刷新滚动。

我改变了功能：

```
function RefreshScroll() {
    setTimeout(function () {
        MyScroll.scrollToElement('li:nth-child(1)', 100)
        setTimeout(function () {
            MyScroll.refresh();
        }, 0);
    }, 200);
} 
```

这解决了这**两个**问题，可能每次加载上**一个**列表滚动时

# arrays - 用汇编语言写入数组的问题

> ID：14122002
> 
> 赞同：0
> 
> 时间：2013-01-02T12:25:54.863
> 
> 标签：arrays, assembly, x86, dos

我正在尝试学习汇编语言，但我在写入数组时遇到了一个简单的问题。我的程序应该读取命令行参数，显示它们并写入数组。在下面的代码中，有一个标记的行。如果我用这行注释程序编译它可以正常工作，但如果我取消注释它，它会在显示几个字符后挂起。这里有什么问题？当参数行较短但此数组应足够大以包含整个命令行时，它可以工作。我在这里错过了什么吗？

```
 assume cs:kod, ds:dane 

kod     segment
.286

start:  

mov     ax,seg wstos
mov     ss,ax
mov     sp,offset wstos                               

xor     cx,cx
xor     ax,ax    
mov     si,80h 
mov     dl,[si]
mov     cl,dl
mov     ah,2h
int     21h
inc     si
xor     di,di

petla:
    inc     si
    mov     dl,[si]
    ;mov        [tablica + di],dl  <<<< this line
    test    dl,dl
    jz      sprawdz
    int     21h
    inc     di
    dalej:
loop    petla

sprawdz:
    mov     al,[si+1]
    cmp     al,0
    jne     dalej

koniecprogramu:
mov     ax,4c00h  
int     21h

dane    segment
    tablica     db  128 dup(0)
dane    ends

stos1   segment STACK
    dw  256 dup(?)
    wstos   dw  ?
stos1   ends 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:53:40.897

“mov [tablica + di]” ES 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:58:22.880

我认为`offset tablica == 0`，还有 ds==cs。至少它必须是，如果这些行按预期工作：

```
mov si, 80h
mov al, [si]; 
```

为了使其兼容，必须初始化 ds （在这种情况下，使用 访问命令行`mov al,cs:[si]`，或者您可以通过注释 2 行将数据简单地留给代码段：

```
;dane    segment
    tablica     db  128 dup(0)
;dane    ends 
```

# sql - 使用 SUM 函数在 SQL 中连接表

> ID：14122005
> 
> 赞同：4
> 
> 时间：2013-01-02T12:25:59.343
> 
> 标签：sql, inner-join, sql-server-2012

我正在使用 SQL Server 2012 并有以下表格：`Ownership`、、、`Property``Person`

该表`Person`包含有关人的信息，例如名字，姓氏，并且该表具有`PersonId`作为主键。

该表`Property`包含有关属性的信息，例如属性区域，属性描述..并且该表具有`PropertyId`作为主键

因为每个人可以拥有不止一个财产，并且每个财产的所有权可以不止一个人，所以我们之间存在多对多的关系`Person`和`Property`

所以我创建了表`Ownership`来打破这种关系，所以这个表有`PersonId`和`PropertyId`作为外键，以及以下列：`PropertyId`作为“主键” `StartDate`、`EndDate`和`OwnershipPercent`。

`Start Date``End Date`指财产为某人所有的期间，指`OwnershipPercent`该人在该财产中的份额。

现在我要写一个查询来返回任何一个人同时拥有超过 100% 的财产

例如：

从 2010 年 1 月 1 日到 2012 年 1 月 1 日，财产`Id=1`属于 #1 的人，他在该财产中的份额为 90%，并且该财产也属于另一个从 2010 年 1 月 1 日到 1- 的 #2 1-2012 年，他在该财产中的份额为 80%.. 正如我们看到的，如果我们同时求和 90+80=170%，这是错误的（因为它会同时小于 100%）

我写了以下查询：

```
SELECT A.PropertyId
FROM Ownership A INNER JOIN Ownership B
ON a.PersonId <> b.PersonId
AND A.PropertyId = B.PropertyId
AND A.StartDate <= B.EndDate
AND A.EndDate >= B.StartDate
group by A.PropertyId
Having (sum(A.OwnershipPercent)) <=100; 
```

但是如果我们有一个属于 5 个人的财产，它会产生 (5×4)=20 的总和，这是错误的

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:03:33.903

我认为在所有权表上加入的方法不太正确。我知道您正在尝试做什么，但是加入正在创建一对所有者。相反，您想考虑一组所有者。

我的方法是创建一个表格，其中包含每个属性的所有重要日期。这将是 OwnerShip 表中的 StartDate 和 EndDate。然后，让我们看看这些日期的所有权百分比：

```
select os.PropertyId, thedate, SUM(os.OwnershipPercent)
from ((select PropertyId, StartDate as thedate
       from ownership
      )union
      (select PropertyId, EndDate
       from ownership
      )
     ) driver join
     OwnerShip os
     on driver.PropertyId = os.PropertyId and
        driver.thedate between os.StartDate and os.EndDate
group by os.PropertyId, thedate
having SUM(os.OwnershipPercent) <= 100  -- Do you really want > 100 here? 
```

一个关键区别是此查询聚合了 PropertyId 和日期。这是有道理的，因为所有权的数量会随着时间而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:54:39.837

`DISTINCT`会做对的，

```
SELECT A.PropertyId
FROM Ownership A INNER JOIN Ownership B
ON a.PersonId <> b.PersonId
AND A.PropertyId = B.PropertyId
AND A.StartDate <= B.EndDate
AND A.EndDate >= B.StartDate
group by A.PropertyId
Having (sum(distinct A.OwnershipPercent)) <=100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:29:12.947

以下类似于[@Gordon Linoff 的建议](https://stackoverflow.com/a/14124240/297408)，因为它还将范围列表“分解”为开始和结束日期列表。但是，它在结果列表上使用了不同的技术。它还假设只有开始日期包括在内，而结束日期不包括在内。

```
WITH unpivoted AS (
  SELECT
    PropertyId,
    EventDate,
    OwnershipPercent,
    PercentFactor = CASE EventDateType WHEN 'EndDate' THEN -1 ELSE 1 END
  FROM Ownership
  UNPIVOT (
    EventDate FOR EventDateType IN (StartDate, EndDate)
  ) u
)
, summedup AS (
  SELECT DISTINCT
    PropertyId,
    EventDate,
    TotalPercent = SUM(OwnershipPercent * PercentFactor)
                   OVER (PARTITION BY PropertyId ORDER BY EventDate)
  FROM unpivoted
)
SELECT
  s.EventDate,
  s.TotalPercent,
  o.PropertyId,
  o.PersonId,
  o.StartDate,
  o.EndDate,
  o.OwnershipPercent
FROM summedup s
  INNER JOIN Ownership o
     ON s.PropertyId = o.PropertyId
    AND s.EventDate >= o.StartDate
    AND s.EventDate <  o.EndDate
WHERE TotalPercent > 100  -- changed from the original "<= 100"
                          -- based on the verbal description
; 
```

为了解释这是如何工作的，我假设 的内容`Ownership`如下：

```
PropertyId PersonId StartDate  EndDate    OwnershipPercent
---------- -------- ---------- ---------- ----------------
1          1        2010-01-01 2012-01-01 80
1          2        2011-01-01 2011-03-01 20
1          3        2011-02-01 2011-04-01 10
1          4        2011-05-01 2011-07-01 40 
```

现在，您可以看到，在反透视的第一步，不仅原始表的每一行都被替换为两行，而且每个百分比值都被标记为增量（`PercentFactor = 1`）或减量（`PercentFactor = -1`），具体取决于它是否与开始日期或结束日期一起出现。因此，`unpivoted`CTE 评估为以下结果集：

```
PropertyId EventDate  OwnershipPercent PercentFactor
---------- ---------- ---------------- -------------
1          2010-01-01 80               1
1          2011-01-01 20               1
1          2011-02-01 10               1
1          2011-03-01 20               -1
1          2011-04-01 10               -1
1          2011-05-01 40               1
1          2011-07-01 40               -1
1          2012-01-01 80               -1 
```

在这一点上，这个想法基本上是计算`OwnershipPercent`at every `EventDate`for every的运行总计`PropertyId`，同时考虑值是增加还是减少。（实际上，您可以在第一阶段将符号合并到`OwnershipPercent`中，而不是分配单独的列`PercentFactor`。我选择后者是为了更好地说明这个想法，但如果您更喜欢前者，则应该没有性能损失。）而且这个是计算运行总数后得到的结果（这是第二个 CTE, `summedup`, 所做的）：

```
PropertyId EventDate  TotalPercent
---------- ---------- ------------
1          2010-01-01 80
1          2011-01-01 100
1          2011-02-01 110
1          2011-03-01 90
1          2011-04-01 80
1          2011-05-01 120
1          2011-07-01 80
1          2012-01-01 0 
```

但是请注意，此结果集可能包含重复的行。特别是，对于相同的`PropertyId`，如果某些范围同时开始或结束，或者某些范围恰好在另一个范围的开始日期结束，则会出现这种情况。这就是为什么你可以看到在这个阶段使用了 DISTINCT。

既然关键日期的总百分比值是已知的，那些不超过 100 的值就可以被过滤掉，其余的则重新加入，`Ownership`以访问对获得的总数有贡献的所有权的详细信息。因此，主查询为您提供了最终结果：

```
EventDate  TotalPercent PropertyId PersonId StartDate  EndDate    OwnershipPercent
---------- ------------ ---------- -------- ---------- ---------- ----------------
2011-02-01 110          1          1        2010-01-01 2012-01-01 80
2011-02-01 110          1          2        2011-01-01 2011-03-01 20
2011-02-01 110          1          3        2011-02-01 2011-04-01 10
2011-05-01 120          1          1        2010-01-01 2012-01-01 80
2011-05-01 120          1          4        2011-05-01 2011-07-01 40 
```

[您还可以在 SQL Fiddle](http://sqlfiddle.com/#!6/9203d/1)查看（以及玩弄）此查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:44:38.097

您可能需要此请求

```
SELECT PropertyID,
FROM dbo.Ownership
GROUP BY PropertyID, StartDate, EndDate
HAVING COUNT(PersonID) > 1 
  AND SUM(OwnershipPercent) <= 100 --in your question you want > 100 
```

# spring-webflow - 如何在 FlowScope 中获取变量？

> ID：14122006
> 
> 赞同：2
> 
> 时间：2013-01-02T12:26:00.307
> 
> 标签：spring-webflow

在我的 Spring web flow 中，我有一个`FlowScope`名为“action”的变量，我想在验证方法中检查这个变量；

```
\\\\\\
    if(action=="copy"){
    doCopy;
    }else{
    doOther;
    } 
\\\\\\\ 
```

但我不知道如何调用“动作”变量。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:52:41.993

你不能像这样访问它：

```
RequestContext rc = RequestContextHolder.getRequestContext();
String action = (String) rc.getFlowScope().get("action"); 
```

或者，如果您知道类型，则无需类型转换：

```
String action = rc.getFlowScope().getString("action"); 
```

# cookies - WIF SessionAuthenticationModule CookieHandler 不写入 FedAuth cookie

> ID：14122008
> 
> 赞同：2
> 
> 时间：2013-01-02T12:26:04.150
> 
> 标签：cookies, wif, federated-identity

在某些情况下，我无法让 Windows Identity Framework 写入 FedAuth cookie。我正在着手开发一套 MVC4 网站，这些网站已经使用 WIF 并成功地为自己的域编写了 FedAuth cookie。现在我正在尝试为我的套件中的每个域编写 cookie。

在我的开发机器上，我有三个由 IIS7.5 本地托管的网站（app1.mycompany.com、app2.mycompany.com 和 app3.DIFFDOMAIN.com）。当我登录 app1 时，我将 cookie 的域设置为“mycompany.com”，这意味着app1 和 app2*都是*联合的，但我找不到包含 app3 的好方法。

```
FederatedAuthentication.SessionAuthenticationModule
                       .CookieHandler.Domain = "mycompany.com". 
```

到目前为止我注意到/尝试过的事情：

1.  在 app1 中，我可以设置 Domain = "app1.mycompany.com" 或 "mycompany.com" 并写入 cookie，但如果我将其设置为其他任何内容，则不会写入 cookie，*因此必须对域进行一些底层验证写入 cookie 时的属性*。真的吗？？

2.  我在 app3 中编写了一个 API 服务，以便从`https://app3.DIFFDOMAIN.com/fedauth`设置 Domain = "DIFFDOMAIN.com" 的 app1（例如）调用。

    *   当我从浏览器调用 api 时，cookie 被写入。
    *   当我使用休息客户端从 app1 调用 api 时，cookie*没有被*写入。
    *   当我从 app1 RedirectPermanent 到 app3 url 时，cookie 被写入（但我真的不想重定向）。

**所以我想我在问为什么在使用休息客户端时没有写入 cookie，以及我应该如何在所有域上联合身份验证**？

谢谢，
约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:28:20.980

我不确定我得到了你。一般而言，WIF SAM 模块负责处理 FedAuth cookie。如果在您的网络配置中正确配置它，它会自动执行此操作。FedAuth cookie 包含已发布的 STS 令牌。FAM 模块正在拦截所有请求并将那些需要授权的请求重定向到 STS。在 STS 上进行身份验证后，SAM 模块正在创建 cookie 或与 session 组合（取决于配置）并将其放置在特定域下的客户端浏览器中。SAM 和 WAF 不负责在所有域上联合身份验证，但 STS 负责。STS 将其自己的 cookie 放置在客户端浏览器中，因此对于来自不同域的每个成功调用，STS 现在将依赖于用户登录的那个 cookie，并会自动将令牌发送到具有一组声明的该域。

您必须为所有域设置配置。仅此而已，其他是WIF的业务。其次是设置你的STS，你可以在网上找到样品。

要详细了解完整的过程，请查看这篇精彩的文章：http: [//msdn.microsoft.com/en-us/magazine/ff872350.aspx](http://msdn.microsoft.com/en-us/magazine/ff872350.aspx)

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T08:08:52.853

看来您缺少 2 点（尝试获取有关它们的[更多信息](https://msdn.microsoft.com/en-us/magazine/ff872350.aspx)以获得更清晰的视图）：

*   **cookie 的工作原理以及它们的用途**。尝试为任何其他客户端设置 cookie，而不是您正在与之通信的任何其他客户端，或者为您的任何其他域设置 cookie 被认为是不安全的。当您的联合应用程序存储身份验证数据时，它会将其转换为 FedAuth cookie，然后发送到经过身份验证的客户端。客户端在后续请求中将 cookie 发送回，服务器将其解包以“了解”用户的身份验证。

*   **联合身份验证的工作原理**。您环境中的每个联合应用程序 (RP) 都要求 STS 服务对用户进行身份验证。STS 向 RP 发送一个身份验证令牌，RP 以某种方式存储它以便能够区分它的用户。

这两种关系*是一对一的*。客户端-应用程序和应用程序-STS。无需与其他任何人共享一个客户端会话的身份验证信息。为什么？客户端使用 STS 进行身份验证，STS 将此信息发送到任何想要验证此客户端的 RP。应用程序之间不共享信息，仅与单个 STS 共享。

# session - 会话 RemoveAt 从 Gridview 按钮

> ID：14122010
> 
> 赞同：0
> 
> 时间：2013-01-02T12:26:08.107
> 
> 标签：session, indexing

我有一个会话并且正在填写项目列表。

这显示在网格视图上，基本上是一个带有产品的购物车。

现在我怎样才能从 gridview 中删除按钮的当前索引，以便我可以从会话中删除该项目。

我正在使用 Session["Cart"].RemoveAt() 方法，但不知道需要传递哪些参数才能获取项目的当前索引。

((List)Session["Cart"]).RemoveAt(Convert.ToInt32(gvCart.SelectedIndex));

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:34:30.270

你可以使用gridview的RowCommand

```
protected void gvCart_RowCommand(object sender, GridViewCommandEventArgs e)
{
       ((List)Session["Cart"]).RemoveAt(Convert.ToInt32(e.CommandArgument));
} 
```

# php - 将行列表从一个表传输到另一个表

> ID：14122012
> 
> 赞同：1
> 
> 时间：2013-01-02T12:26:14.567
> 
> 标签：php, mysql, sql, pdo, mysqli

我到处搜索，但找不到可行的解决方案。也许我不会以正确的方式解决这个问题。我有一个 ID 数组中的逗号分隔值列表，它引用了“temp_image”表中的 image_id。现在我需要在该数组中选择有关具有 image_id 的所有图像的所有信息，并将它们从“temp_image”表转移到“images”表。

$IMgids = 数组（1,2,3,4,5,9）；等我的查询如何？我的 where 子句应该是什么样的。我对转移一行感到满意，但在这种情况下，它可能多达 50 行。有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:32:47.793

从您发布的少量信息中，我会说您需要这两个细节：

1.  子句的`IN`运算符`WHERE`，以便您可以一次引用数组引用的所有条目：`SELECT ... FROM ... WHERE id IN (1,2,3,4,5,9);`. 您可能希望使用 phps`implode()`函数在子句内构造 id 集：`implode(',',$IMgids)`

2.  将多行插入到另一个表中的表中的子查询原理。为此请查阅 mysql（在线）文档。像这样的东西：`INSERT INTO images (SELECT * FROM temp_images WHERE...);`

# javascript - 检测元素是否可见（不使用 jQuery）

> ID：14122013
> 
> 赞同：16
> 
> 时间：2013-01-02T12:26:17.557
> 
> 标签：javascript, html, cross-browser, dom-events

我正在尝试在不使用 jquery 的情况下检测我提供 id 的 html 元素是否可见。

**上下文：**

在忘记用户密码页面中，我有一个表单，用户在其中输入他的登录名并单击提交。之后，如果他设置了一个挑战问题，它将被显示，他将能够回答这个问题并再次提交。（之前的按钮相同）。

**我的问题：**

当用户点击提交时，在 IE 中，如果他多次点击，每点击一次就会收到一封电子邮件。

**我的想法：**

单击此提交按钮后，我想禁用该按钮，但只有在两个条件正确的情况下才能禁用它：

1.  如果用户已经提交了他的登录名（没有错误）。
2.  用户注册了一个挑战问题并且他回答正确。

我无法更改已完成的过程，因此我考虑在答案字段中添加一个 id 并检查它是否可见。如果是并且用户单击提交按钮，我想在标签上应用属性禁用按钮。我不知道如何在不使用 jquery 的情况下做到这一点。

使用 jQuery 我可以做这样的事情：

```
if($('#secretAns').is(':visible')) {
    //i think it could be the solution 
    $('#general_Submit.Label').attr( disabled, disabled );

} 
```

申请：

```
<div id="secretAns" class="loginTxtFieldWrapper">
    <font color='red'>*</font><input type="text" name="secretAns" />
    <input type="hidden" name="isAnswerPage" value="1"/>
</div>
<p id="loginSubmitLink">
    <input id="general_Submit.Label" type="submit" value="general_Submit.Label" />" />
</p> 
```

我发现很难搜索纯 Javascript 解决方案，因为每个人都倾向于使用 jQuery，而我不能在我的应用程序中使用它，所以如果有人可以帮助我使用纯 Javascript 来做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T12:37:15.603

谷歌帮助我了解了 jQuery 是如何做到的，你也可以这样做：

> **在 jQuery 1.3.2 中，如果浏览器报告的offsetWidth**或**offsetHeight**大于 0，则元素可见。

[发行说明](http://docs.jquery.com/Release%3ajQuery_1.3.2#%3avisible.2F%3ahidden_Overhauled)

搜索源代码给了我这个：

```
// The way jQuery detect hidden elements, and the isVisible just adds "!".
elem.offsetWidth === 0 && elem.offsetHeight === 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:45:51.883

请看这是习惯性的很少代码可能有用

```
<!DOCTYPE html>
<html>
<body>
<div id="one" style="visibility: hidden;">The content of the body element is displayed in your browser.
</div>

<div id="two" style="visibility: visible;"> I'm Cool
</div>

<div onclick="push();"> Click me </div>
<script>
function push() {
a = document.getElementById("one").style.visibility;
alert("one "+a);

b = document.getElementById("two").style.visibility;
alert("one "+b);
}
</script>
</body>
</html> 
```

上面的代码使用 U 所需的 ID 给出了 div 的可见性状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:58:27.910

当我在考虑禁用按钮时，我在这里写下我对解决这个问题的想法是错误的，因为让它工作起来真的很昂贵。这样，在研究，测试了一些想法并阅读了@gdoron和@AmeyaRote带来的想法之后，我想出一个简单的解决方案是在点击后隐藏“提交”按钮（页面刷新，检查验证并该按钮在此过程后再次可用）。因此，这里是解决问题的解决方案，以避免用户在提交按钮上多次单击，对于这种我无法禁用它的特殊情况（如果我在单击后禁用，则不会提交表单）：

**的HTML**

我刚刚添加了 onclick 属性，该属性调用了我创建的用于隐藏按钮的 javascript 函数：

```
<p id="loginSubmitLink">
    <input id="general_Submit.Label" type="submit" onclick ="avoidDoubleSubmit();" value="general_Submit.Label" />" />
</p> 
```

**Javascript**

```
function avoidDoubleSubmit() {
    <c:if test="${not empty secretQues}">
        event_addEvent(window,'load',function(){document.ResetPasswordForm.secretAns.focus();});
        document.getElementById('general_Submit.Label').style.display ='none';
    </c:if>
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-18T06:48:18.193

这是我前段时间写的。据我所知，这处理了很多案例。这实际上检查了用户是否在当前状态下看到了该元素。

检查显示、可见性、不透明度、溢出怪癖并递归执行，直到我们到达文档节点。

```
function isVisible(el) {
        while (el) {
            if (el === document) {
                return true;
            }

            var $style = window.getComputedStyle(el, null);

            if (!el) {
                return false;
            } else if (!$style) {
                return false;
            } else if ($style.display === 'none') {
                return false;
            } else if ($style.visibility === 'hidden') {
                return false;
            } else if (+$style.opacity === 0) {
                return false;
            } else if (($style.display === 'block' || $style.display === 'inline-block') &&
                $style.height === '0px' && $style.overflow === 'hidden') {
                return false;
            } else {
                return $style.position === 'fixed' || isVisible(el.parentNode);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T12:44:47.983

在 general_Submit.Label 按钮上单击调用函数 Callfun() 然后禁用按钮

```
<input id="general_Submit.Label" onclick="Callfun()" type="submit" value="<ezmi18n:message key="general_Submit.Label" />" />

    function Callfun()
    {
     document.getElementById("general_Submit.Label").disabled = true;
    } 
```

# jquery - 仅为用户禁用滚动

> ID：14122014
> 
> 赞同：3
> 
> 时间：2013-01-02T12:26:21.830
> 
> 标签：jquery, html, css, scroll

我正在尝试创建一个用户无法滚动的页面（意味着没有鼠标滚轮、没有空间、没有光标向下等）。当站点本身保持滚动时：如果触发了特定事件，即触发了按钮，则应该发生滚动。

我做了一些研究，不仅在stackoverflow上，而且在不同的论坛上。有传言说这是不可能的，实现禁用滚动的方法是`overflow:hidden`

好吧，这对我来说是错误的：http: [//fk-agency.com/](http://fk-agency.com/)

有谁知道这是怎么做到的？

我个人的做法是：

创建一个高度仅为视口大小的 100% 的站点，然后通过 css 动画或 jQuery 在其他 div 中滑动。但这对我来说似乎很糟糕。

**编辑**：

我尝试使用该`overflow:hidden`属性，但遇到滚动不起作用的问题。

这是我的项目的一个实时示例，不包括以下必要的代码：

[例子](http://www.antaw.de/Bewerbung2)

这是一个没有溢出的：隐藏

[示例 2](http://www.antaw.de/be)

**编辑#2**

我不知道为什么，但突然它起作用了。

我申请`overflow: hidden`并`body`使用以下脚本通过指定它的 id 滚动到一个元素。都好。非常感谢 lukasgeiter，他提到了这个问题。

**脚本**

```
function scroll(target){
// target should be like "#id"
        $('html, body').animate({
            scrollTop: $(target).offset().top
        }, 500);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:57:17.687

对我来说，可以使用`overflow:hidden;`并且这个网站就是这样做的......如果这还不够并且滚轮/箭头/空格仍然有效，您必须为不同的键和滚轮设置处理程序，然后使用`e.preventDefault()`或`return false`阻止它们.

例如：

```
$(window).on("mousewheel", function(e){
    e.preventDefault();
}); 
```

# jms - 多个 jms 服务器的单个 jms 使用者

> ID：14122020
> 
> 赞同：1
> 
> 时间：2013-01-02T12:27:02.217
> 
> 标签：jms, weblogic, middleware

我正在使用分布式 jms 队列，weblogic 是我的应用服务器。我的集群环境中部署了三个 jms 服务器。例如，生产者只需使用队列 jndi 查找 'udq' 的名称发送消息。现在我已经为每个 jms 服务器关联了一个消费者，并且我能够使用该消息，到目前为止没有问题。

这是一个问题，我可以让一个消费者来使用来自 3 个 jms 服务器的消息吗？weblogic 允许使用以下语法为目标查找命名 jndi @

```
 qsession1 = qcon1.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
            qsession2 = qcon2.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
            qsession3 = qcon3.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);

            queue1 = (Queue)ctx.lookup("JMSServer-1@UDQ");
            queue2 = (Queue)ctx.lookup("JMSServer-2@UDQ");
            queue3 = (Queue)ctx.lookup("JMSServer-3@UDQ");
            qreceiver1 = qsession1.createReceiver(queue1);
            qreceiver2 = qsession2.createReceiver(queue2);
            qreceiver3 = qsession3.createReceiver(queue3);
            qreceiver1.setMessageListener(this);
            qreceiver2.setMessageListener(this);
            qreceiver3.setMessageListener(this);

            qcon1.start();
            qcon2.start();
            qcon3.start(); 
```

我只为上述消费者实现了一个 OnMessage。这不起作用。有什么建议请..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:11:45.967

不，您不能让消费者从多个 JMS 服务器接收消息。消费者只能从一个 JMS 服务器接收消息。您需要创建多个消费者来接收来自多个 JMS 服务器的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T10:51:02.580

您可以使用“队列转发”功能。来自 wls 10.3 的在线文档：

“队列成员可以通过在管理控制台中配置转发延迟属性将消息转发给其他队列成员，默认情况下禁用该属性。该属性定义了一个分布式队列成员有消息但没有消息的时间量，以秒为单位。消费者将等待，然后再将其消息转发给其他拥有消费者的队列成员。”

这里有一个链接：[http ://docs.oracle.com/cd/E13222_01/wls/docs103/jms/dds.html#wp1260816](http://docs.oracle.com/cd/E13222_01/wls/docs103/jms/dds.html#wp1260816)

您可以从每个队列的管理中配置此功能。

# php - 使用 PlUpload 和 Expiring Amazon S3 Link 将文件上传到 Amazon

> ID：14122021
> 
> 赞同：1
> 
> 时间：2013-01-02T12:27:03.803
> 
> 标签：php, amazon-s3, file-upload, plupload

我使用[此](https://github.com/moxiecode/plupload/blob/master/examples/jquery/s3.php)示例代码直接将 plupload 工作到 Amazon S3。我使用临时凭证获得了[直接浏览器到 S3 上传。](https://github.com/carsonmcdonald/direct-browser-s3-upload-example)

现在我需要**生成即将过期的 Amazon S3 Link**并使用这些临时凭证来**实施 Plupload**。即我需要混合上面提到的两种情况。所以我生成了url并将其作为url放在下面的代码中。

```
<script type="text/javascript">
$(function() {
$("#uploader").plupload({
    runtimes : 'flash,silverlight',
    url : 'TEMPORARY URL',
    max_file_size : '10mb',

    multipart: true,
    multipart_params: {
        'key': '${filename}', 
        'Filename': '${filename}',
        'acl': 'public-read',
        'Content-Type': 'image/jpeg',
        'success_action_status': '201'
    },
    file_data_name: 'file',
    multiple_queues: true,
    filters : [
        {title : "JPEG files", extensions : "jpg"}
    ],
    flash_swf_url : '../../js/plupload.flash.swf',
    silverlight_xap_url : '../../js/plupload.silverlight.xap'
});
});
</script> 
```

生成即将过期的 Amazon S3 链接

```
<?php 
$S3_KEY='S3 Key Here';
$S3_SECRET='S3 Secret Here';
$S3_BUCKET='/uploadtestbucket';

$EXPIRE_TIME=(60 * 5); // 5 minutes
$S3_URL='http://s3.amazonaws.com';

$objectName='/' . $_GET['name'];

$mimeType=$_GET['type'];
$expires = time() + $EXPIRE_TIME;
$amzHeaders= "x-amz-acl:public-read";
$stringToSign = "PUT\n\n$mimeType\n$expires\n$amzHeaders\n$S3_BUCKET$objectName";
$sig = urlencode(base64_encode(hash_hmac('sha1', $stringToSign, $S3_SECRET, true)));

$url = urlencode("$S3_URL$S3_BUCKET$objectName?    AWSAccessKeyId=$S3_KEY&Expires=$expires&Signature=$sig");

echo $url;
?> 
```

但我收到了这个错误

> IO 错误。错误 #2032

我的参考链接是

*   [如何使 Plupload 直接上传到 Amazon S3？](https://stackoverflow.com/questions/4639471/how-do-i-make-plupload-upload-directly-to-amazon-s3)
*   [使用 Plupload HTML5 运行时直接上传到 Amazon S3](https://stackoverflow.com/questions/8463694/upload-directly-to-amazon-s3-using-plupload-html5-runtime)

我的代码有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T12:56:09.763

检查您的政策，也许它没有正确设置并且您正在发送“额外输入”。尝试使用浏览器的控制台并切换到网络面板 - 找到向亚马逊发出的 http 请求并检查响应，它会显示错误。

# c# - XML 反序列化：使用列表

> ID：14122023
> 
> 赞同：2
> 
> 时间：2013-01-02T12:27:20.517
> 
> 标签：c#, xml, properties, deserialization

我有以下 XML 文件格式。我想将跟随反序列化为对象，但它不起作用。我在反序列化“字段”时遇到问题。

```
<ExportDefinition>
  <DestinationDir>C:\Export\</DestinationDir>
  <LevelID>102</LevelID>
  <Metadata>
    <Field>
        <Source>CreateDate</Source>
        <DataType>DateTime</DataType>
    <Field>
    <Field>
        <Source>UserName</Source>
        <DataType>Text</DataType>
    <Field>
  </Metadata>
</ExportDefinition>

static void Main(string[] args)
{
   string xmlFile = @"C:\cobra_exp_def.xml";
   FileStream ReadFileStream = new FileStream(xmlFile, FileMode.Open, FileAccess.Read, FileShare.Read);

  XmlSerializer SerializerObj = new XmlSerializer(typeof(ExportDefinition));
  ExportDefinition LoadedObj = (ExportDefinition)SerializerObj.Deserialize(ReadFileStream);

  ReadFileStream.Close();
}

public class ExportDefinition
{
   [XmlElement]
   public string DestinationDir { get; set; }

   [XmlElement]
   public string LevelID { get; set; }
}

public class Metadata
{
   private List<Field> list = new List<Field>();

   [XmlElement]
   public List<Field> Metadata { get { return list; } set { list = value; } }
}

public class Field
{
  [XmlElement]
  public string Source { get; set; }

  [XmlElement]
  public string DataType { get; set; }
} 
```

# 解决方案

终于设法将其与以下内容一起使用：

```
[XmlArray("Metadata"), XmlArrayItem("Field", typeof(Field))]
        public List<Field> Metadata
        {
            get { return (_fields); }
            set { _fields = value; }
        } 

        private List<Field> _fields = new List<Field>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:32:14.900

是`InnerException`：

> “第 12 行位置 12 上的‘字段’开始标签与‘元数据’的结束标签不匹配。第 13 行，位置 5。”

这是完全正确的；xml 无效。它应该是：

```
<Field>
    <Source>CreateDate</Source>
    <DataType>DateTime</DataType>
</Field>  <!-- EDITED HERE -->
<Field>
    <Source>UserName</Source>
    <DataType>Text</DataType>
</Field>  <!-- EDITED HERE --> 
```

总是看着`InnerException`。如果它有一个`InnerException`，也看看那个。

您还需要向 中添加一个`Metadata`属性`ExportDefinition`，并`EmlElement("Field")]`在其中的列表属性上使用`Metadata`。

或者更简单地说，完全删除`Metadata`该类：

```
public class ExportDefinition
{
   [XmlElement]
   public string DestinationDir { get; set; }

   [XmlElement]
   public string LevelID { get; set; }

   private List<Field> list = new List<Field>();

   [XmlArray("Metadata")]
   [XmlArrayItem("Field")]
   public List<Field> Items { get { return list; } }
} 
```

# java - 保存 ViewScoped bean 的状态

> ID：14122026
> 
> 赞同：0
> 
> 时间：2013-01-02T12:27:29.277
> 
> 标签：java, jsf-2

我正在使用**Mojarra 2.1.6**实现构建一个 JSF 应用程序。我的应用程序屏幕是`@ViewScoped`，每个 bean 都从一个视图销毁到另一个视图。我还想要一种导航栏或面包屑，这样用户就可以使用它从一个页面返回到另一个页面。为了实现这一点，我正在使用 Primefaces `p:button`，以这种方式：

```
<h:panelGroup
      rendered="#{!navigationManager._DisableNavigationButtons}">
<p:toolbar>
    <p:toolbarGroup>
        <ui:repeat value="#{navigationManagerSystem._Navegables}"
                                        var="item">
            <p:button value="#{item._Title}" outcome="#{item._IncludePath}">
                <f:param name="params" value="#{item._NavigationParams}" />
            </p:button>
        </ui:repeat>
        <p:button disabled="true"
            value="#{navigationManagerSystem._Navegable._Title}" />
    </p:toolbarGroup>
</p:toolbar> 
```

正如你在这段代码中看到的，它基本上是一个带有按钮的工具栏，这个按钮保存旧的 url，所以当用户点击其中一个时，他可以返回。

但是，我的问题是我有一些页面正在接收视图参数，我想做一些通用的事情，所以最好的办法是将参数保存在`java.util.List`（**navigationManagerSystem**是一个`@SessionScoped`bean）中，以便在用户单击按钮时恢复它们回去，达到老豆状态。

但是上面的例子是行不通的，即使是目标页面也是这样写的

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui"
template="/templates/general_template.xhtml">

<ui:define name="metadata">
    <f:metadata>
        <f:viewParam id="user" name="user"
            value="#{navegableUserData._ParamUser}" required="true"
            requiredMessage="User is required" />
        <f:viewParam id="params" name="params"
            value="#{navegableUserData._NavigationParams}" />
        <f:event type="preRenderView"
            listener="#{navegableUserData.initialize}" />
    </f:metadata>
    <h:message for="user" />
</ui:define>

<ui:define name="general_content">
    <p:outputPanel autoUpdate="false" id="Datos_Loged" name="Datos_Loged"
        layout="block">
        <h:form id="SystemUserForm">
            <ui:include
                src="/system/manage_user/content/edit_user/system_user_data/system_user.xhtml" />
        </h:form>
    </p:outputPanel>
</ui:define> 
```

`_NavigationParams`setter 没有被调用，我有一个转换异常。我不知道在 JSF 中是否有更好的方法来做到这一点，也许是维护`@ViewScoped`bean...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:51:01.027

f:viewParam, f:param 管理 GET 参数的设置、转换和验证。因此，url 将类似于 newPage.jsf?param=10。如果您尝试将类列表放入 get 参数中，则会出现错误，因为 get 参数必须是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:14:17.010

我认为解决方案可以是不直接通过视图传递参数。只需将它们托管到**navigationManager** bean 中，该 bean`@SessionScoped`控制按钮队列。无论如何，我需要知道单击了哪个按钮才能从我的`@ViewScoped`bean 中恢复参数，通过视图的索引值就足够了，不是吗？

这样，我还可以删除单击后的按钮，以保持面包屑更新。

无论如何，欢迎其他想法。

# image - 如何在 wp7 中添加 8 位深度的 GIF 图像？

> ID：14122029
> 
> 赞同：0
> 
> 时间：2013-01-02T12:27:38.443
> 
> 标签：image, windows-phone-7, gif

我有一些 8 位深度和 24 位深度 GIF 图像的图像。虽然它支持 24 位深度 GIF 图像，但根本没有显示 8 位深度图像。

我已将 appmanifest BitsPerPixel=32 更改为无法正常工作。任何人都可以告诉如何修复它。thanx

# mysql - 如何从我的 MySQL 表中删除约束？

> ID：14122031
> 
> 赞同：286
> 
> 时间：2013-01-02T12:27:45.237
> 
> 标签：mysql, foreign-keys, constraints, alter

我想从我的表中删除约束。我的查询是：

```
ALTER TABLE `tbl_magazine_issue` 
DROP CONSTRAINT `FK_tbl_magazine_issue_mst_users` 
```

但我得到一个错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`FK_tbl_magazine_issue_mst_users`在第 1 行的“约束”附近使用正确的语法

* * *

## 回答 #1

> 赞同：462
> 
> 时间：2013-01-02T12:35:05.947

Mysql 有一个特殊的语法来删除外键约束：

```
ALTER TABLE tbl_magazine_issue
  DROP FOREIGN KEY FK_tbl_magazine_issue_mst_users 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-08-19T15:40:52.787

我有同样的问题，我必须用这段代码来解决：

```
ALTER TABLE `table_name` DROP FOREIGN KEY `id_name_fk`;
ALTER TABLE `table_name` DROP INDEX  `id_name_fk`; 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-01-02T12:35:42.890

`DROP CONSTRAINT`在 MySQL中没有这样的东西 。在您的情况下，您可以`DROP FOREIGN KEY`改用。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-01-06T10:58:33.523

如果约束不是外键，例如。使用 'UNIQUE CONSTRAINT (colA, colB)' 添加一个，然后它是一个可以使用删除的索引`ALTER TABLE ... DROP INDEX ...`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-05-04T17:34:06.753

为罗伯特·奈特的回答添加一点，因为帖子的标题本身没有提到外键（并且因为他没有完整的代码示例，并且因为 SO 的评论代码块没有显示以及答案的代码块），我将添加它以获得**独特的**约束。这些中的任何一个都可以消除约束：

```
ALTER TABLE `table_name` DROP KEY `uc_name`; 
```

或者

```
ALTER TABLE `table_name` DROP INDEX `uc_name`; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-02-20T13:12:34.503

也很好，您可以暂时禁用 mysql 数据库中的所有外键检查： `SET FOREIGN_KEY_CHECKS=0;` 并再次启用它： `SET FOREIGN_KEY_CHECKS=1;`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-25T09:48:15.283

一些 ORM 或框架使用与 default 不同的外键命名约定`FK_[parent table]_[referenced table]_[referencing field]`，因为它们可以更改。

例如，Laravel`[parent table]_[referencing field]_foreign`用作命名约定。您可以使用此查询显示外键的名称，如下[所示](https://stackoverflow.com/a/201678/4593376)：

```
SELECT CONSTRAINT_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE 
WHERE REFERENCED_TABLE_SCHEMA = '<database>' AND REFERENCED_TABLE_NAME = '<table>'; 
```

然后通过运行前面提到的 DROP FOREIGN KEY 查询及其正确名称来删除外键。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-08-30T15:33:55.780

对于那些使用 MariaDB 来这里的人：

请注意，MariaDB 通常允许使用 DROP CONSTRAINT 语句，例如删除检查约束：

```
ALTER TABLE table_name
DROP CONSTRAINT constraint_name; 
```

[https://mariadb.com/kb/en/library/alter-table/](https://mariadb.com/kb/en/library/alter-table/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-20T21:38:45.360

删除约束的最简单方法是使用[MySQL 8.0.19](https://dev.mysql.com/doc/refman/8.0/en/alter-table.html)`ALTER TABLE tbl_name DROP CONSTRAINT symbol;`中引入的语法：

> 从 MySQL 8.0.19 开始，ALTER TABLE 允许更通用（和 SQL 标准）语法来删除和更改任何类型的现有约束，其中约束类型由约束名称确定

```
ALTER TABLE tbl_magazine_issue DROP CONSTRAINT FK_tbl_magazine_issue_mst_users; 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=89f4edf56b6cb1f6545fb7b0c4f663c0)**

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-06-22T06:38:11.997

1.  转到表的结构视图

2.  您将在顶部看到 2 个选项 a.Table 结构 b。**关系视图**。

3.  现在点击**Relation view**，在这里你可以删除你的外键约束。你会在这里得到所有的关系。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2015-05-03T06:30:35.140

这将适用于 MySQL 以消除约束

```
alter table tablename drop primary key;

alter table tablename drop foreign key; 
```

# c# - 从 Excel 文件加载数据并加载到临时表中

> ID：14122035
> 
> 赞同：3
> 
> 时间：2013-01-02T12:27:57.180
> 
> 标签：c#, .net, sql-server, sql-server-2008

我正在尝试将 Excel 文件加载到临时表中，以便可以在临时表中执行一些操作。

我正在使用以下语句打开 excel 文件。但现在我需要将它加载到临时表中。

```
SELECT A.*
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                'Excel 12.0;Database=D:\b1.xlsx; hdr=yes',
                'SELECT * FROM [Co Contact$]') AS A; 
```

我想要做的是这样的事情

```
select top 0 *
into #mytemptable
from A 
```

我需要在不声明临时表的情况下执行此操作，而无需指定 excel 文件中列的名称。（因为excel文件可能包含近百列）

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:07:55.737

假设您的第一个语句有效，要将其放入临时表中，您需要执行以下操作：

```
SELECT A.*
INTO #MyTempTable
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                'Excel 12.0;Database=D:\b1.xlsx; hdr=yes',
                'SELECT * FROM [Co Contact$]') AS A; 
```

然后你可以玩#mytemptable

```
Select * From #mytemptable; 
```

# php - 无法使用我的用户名以外的 facebook 登录

> ID：14122040
> 
> 赞同：1
> 
> 时间：2013-01-02T12:28:17.423
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试使用我的应用程序使用 facebook 创建登录名。问题是我可以使用我的 facebook 用户 ID 访问该应用程序，但不能使用其他人。它说发生了错误。下面是我的代码，任何人都可以检查它并让我知道我做错了什么吗？

```
public function fbverifyAction(){

        $facebook = new Facebook(array(
                  'appId'  => 'xxxxxx',
                  'secret' => 'xxxxxxxxx',
                   'cookie' => false,
           ));
         $user = $facebook->getUser();   
         if ($user) {
                 $uid = $facebook->getUser();
         $me = $facebook->api('/me');
                 $db = Zend_Registry::get('dbadapter');
          $select = new Zend_Db_Select($db);    
          $select = $db->select();
          $select = $db->select();
          $select->from(array('owner' => 'owner'),array             ('idowner','username','firstname','password','fb_config'));
          $select->where('owner.fb_config = ?',$me['id']);
          $stmt = $select->query();
          $result = $stmt->fetchAll();
        if(count($result) > 0)
        {
           $usr = $result[0]['username'];
            $pass = $result[0]['password'];
            $url1 = $this->address."access/verify?   username=$usr&password=$pass";
         }
        else
        {    
            $uid = $facebook->getUser();
                     $permissions = $facebook->api(
                                    '/me/permissions ',
                                            'GET',
                                    array(
                                 'access_token' => $facebook->getAccessToken()
                                ));
                             $perdetails['firstname'] =$permissions['first_name'];
                            $perdetails['lastname']=$permissions['last_name'];
                            $perdetails['username']=$permissions['username'];
                            $perdetails['fb_config']=$permissions['id'];
                            $db->insert('owner', $perdetails);

        }

            echo "<script type='text/javascript'>top.location.href = '$url1';</script>"; 
                            }
        else {
           echo '<script>top.location.href="'.$facebook->getLoginUrl().'";</script>';

       }
    } 
```

# wpf - 使用 MVVM 在 wpf 的组合框中取消选择

> ID：14122043
> 
> 赞同：1
> 
> 时间：2013-01-02T12:28:29.947
> 
> 标签：wpf, mvvm, combobox

我有一个列表类型的组合框。我通过数据上下文绑定了 ItemsSource 和 ItemSelected。如果所选项目已更改，则我会显示一条确认用户操作的弹出消息。单击“确定”后，选择会更改。但是单击取消时，应取消选择并保留上一个项目。下面是绑定到组合框的 SelectedItem 的属性。

```
Public SomeClass Sel
{
  get
  {
    return _sel;
  }
  set
  {
    if (_sel != value)
    {
      var sview = _sel;

      if (Compare())
      {
        _sel = value;

        if (Sel != null)
          IsDefault = Sel.IsDefault;
        OnPropertyChanged(() => Sel);
      }
      else
      {
        MessageBoxResult result = MessageBox.Show("Message.", "Owb Message", MessageBoxButton.OKCancel);
        if (result == MessageBoxResult.OK)
        {
          _sel = value;
          if (Sel != null)
            IsDefault = Sel.IsDefault;
          OnPropertyChanged(() => Sel);
        }
        else
        {
          Application.Current.Dispatcher.BeginInvoke(new Action(() =>
          {
            _sel = sview;
            OnPropertyChanged("Sel");
          }), DispatcherPriority.Send, null);
          return;
        }
      }
    }
  }
} 
```

组合框位于弹出窗口中。那么 Dispatcher 对象在这种情况下会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:58:15.787

我猜选择的值*被*保留，但视图没有正确更新。

看看这篇文章： http: [//www.codeproject.com/Articles/407550/The-Perils-of-Canceling-WPF-ComboBox-Selection](http://www.codeproject.com/Articles/407550/The-Perils-of-Canceling-WPF-ComboBox-Selection)。基本上，.Net 3.5 中确实存在的少数解决方法在 .Net 4.0 中不再适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:20:13.937

作为一般规则，如果您的视图模型中泄漏了视觉控件，那么您将走上一条您不想走的路。

创建一个拦截 ComboBox 的 OnChanged 事件并启动消息框的 Behavior。[这是使用行为](http://wpftutorial.net/Behaviors.html)的教程

这会将所有 UI 逻辑保留在 UI 中，并让您的视图模型来管理数据和验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:43:58.053

它现在像魔术一样工作！我错过了在调用调度程序之前设置值。_sel = sview

# jquery - BxSlider - 获取第一张和最后一张幻灯片

> ID：14122047
> 
> 赞同：1
> 
> 时间：2013-01-02T12:28:41.267
> 
> 标签：jquery, slider, bxslider

我正在使用[BxSlider](http://bxslider.com/options)制作滑块。我已将其设置为当时显示 3 张幻灯片。工作正常。现在我试图通过计算当前和总幻灯片数来获得第一张和最后一张幻灯片。目前我总共有 10 张幻灯片 - 这个数字可能会有所不同 - （当时显示 3 张），所以我的功能不起作用。如果我显然有六或九张幻灯片，它就可以工作。

我对获得第一张和最后一张幻灯片感兴趣的原因是因为我将分别隐藏最后一张和正确的链接。在这里看我的[小提琴](http://jsfiddle.net/CKxg9/12/)。我的功能是这样的：

```
function LastSlide() {
            var total = slider.getSlideCount();
            var current = slider.getCurrentSlide() + 1;
            var lastslide = total / current;
            if (current == lastslide) { // Last slide
               //run stuff
            }
        } 
```

- 但是当 lastslide 得到小数时，坏事就开始发生了。有人知道如何解决这个问题吗？请参阅 bxSlider 文档的第一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:37:08.627

我不确定您到底为什么要执行 LastSlide 的事情 - 我认为您可以从函数中删除该变量，因为除法不是您需要的正确函数。

此外，您的小提琴永远不会显示“向左走”，因为它仅在当前等于 lastslide 时才会出现，而这种情况永远不会发生。

这是使功能正常工作的一个非常简单的小提琴：http: [//jsfiddle.net/CKxg9/14/](http://jsfiddle.net/CKxg9/14/)

名字也很混乱。我的意思是当前幻灯片计数 1（3 个 DIVS）、2（6 个 DIVS），幻灯片总数为 10（在我的情况下我使用了 14 个），这应该是 DIVS 而不是幻灯片。所以如果你真的想使用你可以使用的最后一个东西：

```
var total = Math.ceil(slider.getSlideCount()/3); 
```

这意味着如果您有 10 个 DIVS 并且您想一次滑动 3 个，您将有 4 个幻灯片 (1-3,4-6,7-9,10) 现在您可以使用

```
if (current == total) {
    $('#right').hide();
} else {
    $('#right').show();
} 
```

这是使用第二种方法的小提琴：http: [//jsfiddle.net/CKxg9/15/](http://jsfiddle.net/CKxg9/15/) 您当然可以删除lastslide，因为这没有做任何事情..

当 current > 1 时，您仍然需要在某处初始化 $('#left').show() ...

这应该可以帮助您解决问题 - 我希望..

# java - 循环时递减增量器

> ID：14122050
> 
> 赞同：1
> 
> 时间：2013-01-02T12:28:46.947
> 
> 标签：java, for-loop

我试图在java循环中满足条件时减少增量器，例如：假设我们有一个包含许多（升序排序的）整数的ArrayList，当我遇到2个或更多后续相等的整数时，我想合并它们：

```
for(int i=0; i<intArr.size();i++){

 if(intArr.get(i).equals(intArr.get(i+1))){
    intArr.set(i,(intArr.get(i) + intArr.get(i+1)));
    intArr.remove(i+1);
    i--;
 }

} 
```

消息底部的更具体示例。

这将失败，增量器 (i) 将“临时”设置为 (i--)，但当它返回 for 行时，它将具有其原始值。HD你知道如何减少 i 以便在下一次迭代中我仍然可以比较（i==i+1？）谢谢

```
public class Test
{
  private static final long serialVersionUID = 1L;

  public static void main(String[] args)
  {

    ArrayList<Integer> intArray = new ArrayList<Integer>();
    intArray.add(1);
    intArray.add(2);
    intArray.add(3);
    intArray.add(4);
    intArray.add(4);
    intArray.add(4);
    intArray.add(5);
    intArray.add(6);
    intArray.add(7);
    intArray.add(8);
    intArray.add(9);
    intArray.add(9);
    intArray.add(9);
    intArray.add(9);
    intArray.add(10);
    intArray.add(11);
    intArray.add(12);
    intArray.add(12);

    for (int i = 0; i < (intArray.size() - 1); i++)
    {
      if (intArray.get(i).equals(intArray.get(i + 1)))
      {
        intArray.set(i, (intArray.get(i) + intArray.get(i + 1)));
        intArray.remove(i + 1);
        i--;
      }
    }

    for (int i = 0; i < intArray.size(); i++)
    {
      System.out.println(intArray.get(i));
    }
  }

} 
```

印刷：

```
1
2
3
8
4
5
6
7
8
18
18
10
11
24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:38:41.860

`Iterator.remove`我建议使用折叠条纹，而不是杂耍索引：

```
final List<Integer> intArr = new ArrayList(Arrays.asList(1,1,2,2,2,4,5,7));
Integer previous = null;
for (Iterator<Integer> iter = intArr.iterator(); iter.hasNext();) {
  final int curr = iter.next();
  if (previous == null) previous = curr;
  else if (previous == curr) iter.remove();
  else previous = curr;
}
System.out.println(intArr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:44:44.560

那是因为当它找到前两个 4 时，它会将它们更改为 8。现在，当第三个 4 出现时，数组是

1 2 3 **8 4** 5 6 。. .

所以这一次，它检查是否 (8 == 4)，这是错误的。所以它跳过了接下来的 4 个！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:44:52.470

哦，男孩......你的编码风格不干净......这样会出现很多错误。

1）你不应该使用自动装箱。尤其是在与 == 进行比较时

2）当您编写示例时，添加所有详细信息以便它可以实际运行（这还包括许多有用的提示，例如您正在使用哪些支持列表等）[编辑：我看到您扩展了您的问题]

3) 了解 ++i 和 i++ 之间的区别（实际上并不相关，但在其他情况下可能会有所帮助

4) 当 [i] 和 [i+1] 相等时，为什么要跳回去？

5) 后备列表（在您的情况下为 intArr）在从中删除项目时可能无法跟上顺序。

6) 考虑用于存储唯一值的集合或映射。使用 HashSet 或 TreeSet 包括元素的排序/排序

7）您仍然想以老式方式使用它，使用 while 循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T12:32:47.023

如果您的条件变量在每次 for 迭代中都没有递增，则可以使用 while 循环。它还提高了可读性。

```
int i = 0;
while((i-1)<intArr.size())
{
  if(intArr.get(i).equals(intArr.get(i+1)))
  {
    intArr.set(i,(intArr.get(i) + intArr.get(i+1)));
    intArr.remove(i+1);
  }
  else
  {
    i++;
  }
} 
```

# ios - 在 iOS 中创建 sqlite 数据库

> ID：14122055
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:29:20.613
> 
> 标签：ios, sqlite

如何获取在 iOS 中创建数据库的数据库路径？我知道如何执行查询，但我想首先从文档目录创建数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:31:49.440

尝试这个

```
-(void)copyDatabaseIfNeeded
{
    @try
    {
        NSFileManager *fmgr=[NSFileManager defaultManager];
        NSError *error;
        NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
        NSString *path=[paths objectAtIndex:0];
        dbPath=[path stringByAppendingPathComponent:@"Data.sqlite"];
        if(![fmgr fileExistsAtPath:dbPath]){
            NSString *defaultDBPath=[[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"Addict.sqlite"];
            if(![fmgr copyItemAtPath:defaultDBPath toPath:dbPath error:&error])
                NSLog(@"failure message----%@",[error localizedDescription]);
        }

    }
    @catch (NSException *exception)
    {
        NSLog(@"Exception: %@", exception);
    }

}

-(NSString *)getDBPath
{
    //Search for standard documents using NSSearchPathForDirectoriesInDomains
    //First Param = Searching the documents directory
    //Second Param = Searching the Users directory and not the System
    //Expand any tildes and identify home directories.
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"Data.sqlite"];
}

-(void)openDatabase
{
    [self copyDatabaseIfNeeded];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        //Database Opened
        NSLog(@"Database opened");
    }
    else
    {
        NSLog(@"Database cannot be opened");
    }
}

-(void)closeDatabase
{
    sqlite3_close(database);
} 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:32:15.250

```
// Database handling
NSString *databaseFile = [[NSBundle mainBundle] pathForResource:@"DBname" ofType:@"sqlite"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *dbPath = [basePath stringByAppendingPathComponent:[NSString stringWithFormat:@"DBname.sqlite"]];
NSFileManager *fm=[NSFileManager defaultManager];   
if(![fm fileExistsAtPath:dbPath]){
    [fm copyItemAtPath:databaseFile toPath:dbPath error:nil];
} 
```

也许这会对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:53:33.250

使用以下代码设置您的 Sqlite 路径

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
 databaseName=@"yourfileName.sqlite";
 NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDir = [documentPaths objectAtIndex:0];
 databasePath = [documentsDir stringByAppendingPathComponent:databaseName]; 
[self checkAndCreateDatabase]; 

}
-(void) checkAndCreateDatabase {

BOOL success;

NSFileManager *fileManager = [NSFileManager defaultManager];

success = [fileManager fileExistsAtPath:databasePath];

if(success) return;
else
    printf("NO File found");

NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:41:33.873

是的，我得到了答案，谢谢。//这里可以帮助你从数据库中选择数据

```
-(NSMutableDictionary*)SelectAllData
{

   AppDelegate *AppDel=(AppDelegate *)[[UIApplication sharedApplication]delegate];
     [AppDel checkAndCreateDatabase];
    NSMutableArray *itemArray =[[[NSMutableArray alloc]init] autorelease];
    if(sqlite3_open([AppDel.databasePath UTF8String],&database) == SQLITE_OK)
        {
             NSString *sql =[NSString stringWithFormat:@"Select *from table"];

             sqlite3_stmt *selectstmt;

             if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) 
                 {
                      while(sqlite3_step(selectstmt) == SQLITE_ROW) 
                          {
                               NSMutableDictionary *dicOfItem=[[NSMutableDictionary alloc]init];
                               [dicOfItem setValue:[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)] forKey:@"_id_article"];
                               [dicOfItem setValue:[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)] forKey:@"type"];
                               [dicOfItem setValue:[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)] forKey:@"Id"];

                               [itemArray addObject:dicOfItem];
                               [dicOfItem release];
                              }

                      sqlite3_close(database); 
                     }
            }

    else
         sqlite3_close(database); 
    //Even though the open call failed, close the database connection to release all the memory.
    NSMutableDictionary *dictresp = [NSMutableDictionary dictionaryWithObjectsAndKeys:itemArray,@"objects", nil];
    return dictresp;
} 
```

//这里可以帮助你从数据库中插入数据

```
- (void) insert_intable
{

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate checkAndCreateDatabase];

    for(int i=0;i<[[articleDict objectForKey:@"objects"] count];i++)
    {

  if (sqlite3_open([[appDelegate databasePath] UTF8String], &database) == SQLITE_OK) {

        insertStmt=nil;
        if(insertStmt == nil) {
            NSString *sqlTmp=[NSString stringWithFormat:@"Insert into table(Type,Category_id) Values('%@','%@')",articleType,catID];

            const char *sqlStmt=[sqlTmp UTF8String];
            int returnValue = sqlite3_prepare_v2(database, sqlStmt, -1, &insertStmt, NULL);
            if (returnValue==SQLITE_OK) {
                  NSLog(@"Success");
            } else {   
                  NSLog(@"Unsuccess");
            }
             sqlite3_step(insertStmt);
             sqlite3_finalize(insertStmt);
            sqlite3_close(database);
        }
    }

    }        

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T12:37:21.567

尝试这个 ：

```
// Get data
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent:@"dbFileName.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if(![filemgr fileExistsAtPath:databasePath])
{
     NSData *content = [[NSData alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"dbFileName" ofType:@"db"] options:NSDataReadingMapped error:nil];
    [content writeToFile:databasePath options:NSDataWritingAtomic error:nil];
} 
```

# c - Linux 上的 UDP 套接字；发送成功但无法接收大缓冲区

> ID：14122056
> 
> 赞同：2
> 
> 时间：2013-01-02T12:29:24.147
> 
> 标签：c, sockets

我有两台机器，我希望它们都使用 C 编程语言下的套接字进行通信。

我开发了两个样本来代表双方，但我注意到如果它们小于某个数字，我可以成功发送数据。

我测试过但不起作用的大小是发送和接收 2048 字节，相反，对于其他较小的大小，例如 258 字节、1KByte，它可以正常工作。

经过一番调查，我发现发送操作没有错误，而对于接收，我根本没有得到任何东西。

我已经检查了两台机器上的发送和接收缓冲区大小，我想它们已经足够了。

这是我的代码的第一面：

```
/* UDP client in the internet domain */
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <assert.h>

#define BUFF_SIZE               1800
#define MOBIPASS_L2_IP_ADDRESS  "192.168.13.53"
#define MOBIPASS_L2_PORT_NUM    12001

#define BRIDGE_IP_ADDRESS       "192.168.13.30"
#define BRIDGE_PORT_NUM         12000

#define RESTRICT_SRC_DST_NUM        1
#define TEN_MSEC                    10000

void error(const char *);
void adjustSockParam (int sockFD);

int main(int argc, char *argv[])
{
#if RESTRICT_SRC_DST_NUM

    int bridge_sock_fd = -1, n =-1;
    struct sockaddr_in server_mobipass, client_bridge;
    char buffer[BUFF_SIZE];
    char* choice = NULL;
    size_t size = 1;

    /* create socket descriptor at client machine*/
    bridge_sock_fd= socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (bridge_sock_fd < 0) error("socket");

    /* *********************************************************
     * prepare source information of the socket file descriptor
     * *********************************************************
     */
    client_bridge.sin_family = AF_INET;
    client_bridge.sin_addr.s_addr=inet_addr(BRIDGE_IP_ADDRESS) ;
    client_bridge.sin_port = htons(BRIDGE_PORT_NUM);
    if( bind( bridge_sock_fd, (struct sockaddr *) &client_bridge, sizeof ( client_bridge ) ) < 0 )
    {
        error( "bind" );
    }

    /* *********************************************************
     * prepare destination information of the socket file descriptor
     * *********************************************************
     */
    server_mobipass.sin_family = AF_INET;
    server_mobipass.sin_addr.s_addr=inet_addr(MOBIPASS_L2_IP_ADDRESS) ;
    server_mobipass.sin_port = htons(MOBIPASS_L2_PORT_NUM);
    if( connect( bridge_sock_fd, (struct sockaddr *) &server_mobipass, sizeof ( server_mobipass ) ) < 0 ) {
        error("connect");
    }

    adjustSockParam(bridge_sock_fd);
    do
    {
        printf("sending traffic?[y/n]\n");
        getline(&choice,&size,stdin);
        if(*choice=='n')
            break;

        strncpy( buffer,
                    "Hello Mobipass, this is bridge :)\n",
                    sizeof(buffer));
        n = send( bridge_sock_fd, buffer, sizeof(buffer), MSG_CONFIRM  );
        if( n < 0 )
        {
            error( "send" );
        }

        assert(n == sizeof(buffer));

        usleep(TEN_MSEC);
        /*memset(buffer,0 , sizeof(buffer));

        if( recv( bridge_sock_fd, buffer, sizeof(buffer), 0 ) < 0 )
        {
            error( "recv" );
        }
        else
        {
            printf("Msg received from mobipass is:\n%s",buffer);
        }*/

    }while(*choice == 'y' || *choice == 'Y');

    close( bridge_sock_fd );

#else
   int tx_sock, n, rx_sock;
   unsigned int srv_length;
   struct sockaddr_in server_mobipass, from, server_bridge;
   char buffer[256];

   /* create socket descriptor at client machine*/
   tx_sock= socket(AF_INET, SOCK_DGRAM, 0);
   if (tx_sock < 0) error("socket");

   srv_length=sizeof(struct sockaddr_in);

   /*prepare server (peer entity) of UDP connection*/
   server_mobipass.sin_family = AF_INET;
   server_mobipass.sin_addr.s_addr=inet_addr(MOBIPASS_L2_IP_ADDRESS) ;
   server_mobipass.sin_port = htons(MOBIPASS_L2_PORT_NUM);

   printf("Please enter the message: ");
   bzero(buffer,256);
   fgets(buffer,255,stdin);

   n=sendto(tx_sock,buffer,
            strlen(buffer),0,(const struct sockaddr *)&server_mobipass,srv_length);
   if (n < 0) error("Sendto");

   rx_sock= socket(AF_INET, SOCK_DGRAM, 0);
   if (rx_sock < 0) error("socket");

   server_bridge.sin_family =  AF_INET;
   server_bridge.sin_addr.s_addr = inet_addr(BRIDGE_IP_ADDRESS);
   server_bridge.sin_port = htons(BRIDGE_PORT_NUM);
   if (bind(rx_sock,(struct sockaddr *)&server_bridge,srv_length)<0)
          error("binding");

   n = recvfrom(rx_sock,buffer,256,0,(struct sockaddr *)&from, &srv_length);
   if (n < 0) error("recvfrom");

   /*print to stdout what have been received*/
   write(1,"Got an ack: ",12);
   write(1,buffer,n);

   /* close sockets */
   close(rx_sock);
   close(tx_sock);

#endif /* RESTRICT_SRC_DST_NUM */
   return 0;
}

void error(const char *msg)
{
    perror(msg);
    exit(0);
}

void adjustSockParam (int sockFD)
{

    int option_value;
    socklen_t option_len = sizeof(option_value);

    /** Adjust Send Buffer Size**/
    if( getsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, &option_len)< 0)
    {
        error("get Socket Option error:");
    }
    printf("Initial SO_SNDBUF: option_len = %d option_value = %d\n",option_len,option_value);

    /*option_value = 2048;
    if( setsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, option_len)< 0)
    {
        error("get Socket Option error:");
    }

    if( getsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, &option_len)< 0)
    {
        error("get Socket Option error:");
    }
    printf("Final SO_SNDBUF: option_len = %d option_value = %d\n",option_len,option_value);*/

    /** Adjust Receiver Buffer Size **/
    if( getsockopt(sockFD, SOL_SOCKET, SO_RCVBUF,
               &option_value, &option_len)< 0)
        {
            error("get Socket Option error:");
        }
        printf("Initial SO_RCVBUF: option_len = %d option_value = %d\n",option_len,option_value);
} 
```

这是我的代码的第二面：

```
#include <sys/types.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <string.h>
#include <netdb.h>
#include <stdio.h>
#include <assert.h>

#define BUFF_SIZE               1800
#define MOBIPASS_L2_IP_ADDRESS  "192.168.13.53"
#define MOBIPASS_L2_PORT_NUM    12001

#define BRIDGE_IP_ADDRESS       "192.168.13.30"
#define BRIDGE_PORT_NUM         12000

#define DUMP                        0
#define ACT_AS_STRING               0
#define RESTRICT_SRC_DST_NUM        1
#define TEN_MSEC                    10000

#if DUMP
    #define DUMP_BUFFER(buf,len)                \
    {                                           \
        int i;                                  \
        for(i = 0; i < len; i++)                \
            printf("buf[%d] = 0x%x",i,buf[i]);  \
    }
#else
    #define DUMP_BUFFER(buf,len)        printf("received len=%d\n",len)
#endif

void adjustSockParam (int sockFD);
void error(const char *msg)
{
    perror(msg);
    exit(0);
}

int main(int argc, char *argv[])
{
#if RESTRICT_SRC_DST_NUM
    int mobipass_sock_fd = -1;
    struct sockaddr_in server_mobipass, client_bridge;
    char buffer[BUFF_SIZE];
    int recivedBytes=-1;

    printf("size of buffer = %d\n",sizeof(buffer));
    /* create socket descriptor at client machine*/
    mobipass_sock_fd= socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (mobipass_sock_fd < 0) error("socket");

    /* *********************************************************
     * prepare source information of the socket file descriptor
     * *********************************************************
     */
    client_bridge.sin_family = AF_INET;
    client_bridge.sin_addr.s_addr=inet_addr(MOBIPASS_L2_IP_ADDRESS) ;
    client_bridge.sin_port = htons(MOBIPASS_L2_PORT_NUM);
    if( bind( mobipass_sock_fd, (struct sockaddr *) &client_bridge, sizeof ( client_bridge ) ) < 0 )
    {
        error( "bind" );
    }

    /* *********************************************************
     * prepare destination information of the socket file descriptor
     * *********************************************************
     */
    server_mobipass.sin_family = AF_INET;
    server_mobipass.sin_addr.s_addr=inet_addr(BRIDGE_IP_ADDRESS) ;
    server_mobipass.sin_port = htons(BRIDGE_PORT_NUM);
    if( connect( mobipass_sock_fd, (struct sockaddr *) &server_mobipass, sizeof ( server_mobipass ) ) < 0 ) {
        error("connect");
    }

    adjustSockParam(mobipass_sock_fd);

    printf("waiting for message from bridge:\n");
    do{
        memset(buffer,0 , sizeof(buffer));
        recivedBytes = recv( mobipass_sock_fd, buffer, sizeof(buffer), 0 );
        if( recivedBytes  < 0 )
        {
            error( "recv" );
        }
        else
        {
            assert(recivedBytes == sizeof(buffer));
            DUMP_BUFFER(buffer,recivedBytes);
#if ACT_AS_STRING
            printf("Msg received from bridge is:\n%s",buffer);
#endif
        }
        usleep(TEN_MSEC);
#if ACT_AS_STRING
        strncpy( buffer,
                    "Hello Bridge, this is mobipass :)\n",
                    sizeof(buffer));
        if( send( mobipass_sock_fd, buffer, sizeof(buffer), 0 ) < 0 )
        {
            error( "send" );
        }
#endif
    }while(1);

    close( mobipass_sock_fd );

#else
    int tx_sock, n, rx_sock;
    unsigned int srv_length;
    socklen_t fromlen;
    struct sockaddr_in server_mobipass, from, server_bridge;
    char buf[1024];

    rx_sock=socket(AF_INET, SOCK_DGRAM, 0);
    if (rx_sock < 0) error("Opening socket");
    else printf("Creating rx udp socket\n");

    srv_length = sizeof(server_mobipass);
    bzero(&server_mobipass,srv_length);

    server_mobipass.sin_family=AF_INET;
    server_mobipass.sin_addr.s_addr=inet_addr(MOBIPASS_L2_IP_ADDRESS);
    server_mobipass.sin_port=htons(MOBIPASS_L2_PORT_NUM);

    if (bind(rx_sock,(struct sockaddr *)&server_mobipass,srv_length)<0)
    error("binding");
    else
    printf("Binding a socket to a server IP address\n");
    fromlen = sizeof(struct sockaddr_in);

    tx_sock=socket(AF_INET, SOCK_DGRAM, 0);
    if (tx_sock < 0) error("Opening socket");
    else printf("Creating tx udp socket\n");

    server_bridge.sin_family=AF_INET;
    server_bridge.sin_addr.s_addr=inet_addr(BRIDGE_IP_ADDRESS);
    server_bridge.sin_port=htons(BRIDGE_PORT_NUM);

    while (1)
    {
    printf("waiting for a message from client side:\n");
    n = recvfrom(rx_sock,buf,1024,0,(struct sockaddr *)&from,&fromlen);
    if (n < 0) error("recvfrom");

    write(1,"Message received from eNB machince:\n",36);
    write(1,buf,n);

    n = sendto(tx_sock,"hello eNB, I am mobipass\n",27,
              0,(struct sockaddr *)&server_bridge,fromlen);
    if (n  < 0) error("sendto");
    }

#endif
    return 0;
 }

void adjustSockParam (int sockFD)
{

    int option_value;
    socklen_t option_len = sizeof(option_value);

    /** Adjust Send Buffer Size**/
    if( getsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, &option_len)< 0)
    {
        error("get Socket Option error:");
    }
    printf("Initial SO_SNDBUF: option_len = %d option_value = %d\n",option_len,option_value);

/*  option_value = 2048;
    if( setsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, option_len)< 0)
    {
        error("get Socket Option error:");
    }

    if( getsockopt(sockFD, SOL_SOCKET, SO_SNDBUF,
           &option_value, &option_len)< 0)
    {
        error("get Socket Option error:");
    }
    printf("Final SO_SNDBUF: option_len = %d option_value = %d\n",option_len,option_value);*/

    /** Adjust Receiver Buffer Size **/
    if( getsockopt(sockFD, SOL_SOCKET, SO_RCVBUF,
               &option_value, &option_len)< 0)
        {
            error("get Socket Option error:");
        }
        printf("Initial SO_RCVBUF: option_len = %d option_value = %d\n",option_len,option_value);
} 
```

这是第一面的输出：

```
Initial SO_SNDBUF: option_len = 4 option_value = 112640
Initial SO_RCVBUF: option_len = 4 option_value = 112640
sending traffic?[y/n]
y
sending traffic?[y/n]
y 
```

这是第二面的输出：

```
size of buffer = 1800
Initial SO_SNDBUF: option_len = 4 option_value = 1048576
Initial SO_RCVBUF: option_len = 4 option_value = 1048576
waiting for message from bridge: 
```

我不确定我在这里做错了什么。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:36:03.810

虽然 UDP 数据报包的大小可能高达 64K（16 位数据长度字段），但通常的底层数据链路技术 - 以太网 - 具有 1500 字节的帧大小。IP 标头至少少 20 个字节，UDP 标头少 8 个字节，只剩下 1472 个字节用于 UDP 有效负载，可以在没有 IP 分段的情况下发送，这通常会导致问题，例如数据包只是丢弃在某个地方。

正是出于这个原因，大多数基于 UDP 的协议都会限制数据报的大小。

# java - ResultSet.getArray(colName) 可以返回 null 吗？

> ID：14122057
> 
> 赞同：0
> 
> 时间：2013-01-02T12:29:30.080
> 
> 标签：java, sql, postgresql

[http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getArray(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getArray(java.lang.String))

似乎没有提到这种可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:33:16.240

`SQLException`不。如果列不存在，它会抛出。

如果您正在考虑该列存在并且其所有值都为空，那么它将返回一个空值数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T14:05:32.953

是的，如果该列在数据库中为 NULL，则 ResultSet::getArray 将返回 null。

# javascript - Javascript全局变量范围问题

> ID：14122066
> 
> 赞同：6
> 
> 时间：2013-01-02T12:30:00.387
> 
> 标签：javascript, scope, global-variables

我遇到了一个奇怪的 Javascript 范围问题（请参阅[JSFiddle](http://jsfiddle.net/WaNpK/1/)）：

```
var someGlobal = 3;

function someF() {
    // undefined issue
    alert(someGlobal);
    var someGlobal = 5;
    // Displays 5
    alert(someGlobal);
}

function someF2() {
    // Displays 3, why?
    alert(someGlobal);
}

someF();
someF2(); 
```

为什么 Javascript 不抛出未定义的问题`someF2()`？怎么`someF2()`能访问`someGlobal`，又`someF()`不能呢？如何确保在函数中可以访问全局变量？

**评论：**

在这两种情况下，函数都是从调用开始的`alert(someglobal)`，为什么一个函数会抛出未定义的问题而另一个不会呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:33:33.170

`someF`创建一个新的（局部范围的）变量，称为`someGlobal`（它掩盖了 global `someGlobal`）并为其分配一个值。它不会触及全局`someGlobal`（尽管无法访问它，因为范围内还有另一个同名的变量）。

`var`语句被提升，因此对*所有*的都`someGlobal`被屏蔽（不仅仅是在语句之​​后）。本地的值是直到一个值被分配给它。*`someF``var``someGlobal``undefined`*

 *`someF2`访问原始（未触及）的 global `someGlobal`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T12:33:09.293

由于您要声明一个具有相同名称的局部变量。因此，它将值分配给局部变量。只需从 someF() 中的 var someGlobal 中删除 var 就可以了。

```
var someGlobal = 3;

function someF() {
    // undefined issue
    alert(someGlobal);
    someGlobal = 5; // <-- orignially var someGlobal = 5
    // Displays 5
    alert(someGlobal);
}

function someF2() {
    // Should display 5 now
    alert(someGlobal);
}

someF();
someF2(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:33:22.607

someF2 显示 3，因为它仍然**是**3。

在 someF() 中，您创建了一个恰好与 someGlobal 同名的新变量。这对原始的 someGlobal 没有任何作用，它只是**在本地**创建一个新变量来函数 someF，该变量在该函数结束时消失。

所以你有局部变量（例如在 someF 中用 var 创建）和全局变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T13:01:21.183

这是一个如何使用内部变量和全局变量的`someF`示例`this`。

```
var someGlobal = 3;

function someF() {

    // Displays 3
    alert(someGlobal);
    this.someGlobal = 5;
    someGlobal = 5;
    // Displays 5
    alert(this.someGlobal);
}

function someF2() {
    // Displays 5
    alert(someGlobal);
}

someF();
someF2(); 
```

​</p>*

# xpath - 如何在 XPath 或 XQuery 中计算加权平均值？

> ID：14122069
> 
> 赞同：3
> 
> 时间：2013-01-02T12:30:11.220
> 
> 标签：xpath, xquery, orbeon, xforms, xpath-2.0

我需要以 XForms 形式计算一个简单的加权平均值。如何使用 XPath 和/或 XQuery 以优雅和声明性的方式做到这一点？

[编辑] 这是源 XML 文档：

```
<Examens>
    <Examen>
        <ExamenId>1</ExamenId>
        <Coef>1</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>4</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur>4.2</Valeur>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>3.8</Valeur>
            </Note>
        </Notes>
    </Examen>
    <Examen>
        <ExamenId>2</ExamenId>
        <Coef>2</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>5</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur/>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>3.5</Valeur>
            </Note>
        </Notes>
    </Examen>
    <Examen>
        <ExamenId>3</ExamenId>
        <Coef>3</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>6</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur>5.4</Valeur>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>2</Valeur>
            </Note>
        </Notes>
    </Examen>
</Examens> 
```

以下代码段正确显示了值 (= `./Valeur`) 和权重 (= `./../../Coef`) ：

```
<xforms:repeat nodeset="$currentBranche//Note[EleveId=$currentEleveId]">
     <xforms:output ref="./Valeur"/>
     <xforms:output ref="./../../Coef"/>
</xforms:repeat> 
```

顺便说一句，我还需要排除`Valeur`空字符串的节点。例如，在下面使用 XPath`avg()`函数的简单平均计算中，如果一个节点的内容是空字符串，我会得到一个错误（“无法将 '' 转换为 double”）。这是一个问题，因为节点存在（它是模型实例的一部分）并且当用户尚未输入值时该值是空字符串。

```
<xforms:output ref="round(avg($currentBranche//Note[EleveId=$currentEleveId]/Valeur)*100) div 100"/> 
```

[编辑]

正确的计算是：

如果 EleveId=100 : 加权平均 = (1*4+2*5+3*6) / (1+2+3) =
5.333 如果 EleveId=101 : 加权平均 = (1*4.2+3*5.4) / ( 1+3) = 5.1
如果 EleveId=102 ：加权平均 = (1*3.8+2*3.5+3*​​2) / (1+2+3) = 2.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:27:46.063

**在 XPath 1.0 中使用**：

```
 sum($currentBranche//Note[EleveId=$currentEleveId]/Valeur[number(.)=number(.)])

 div

  count($currentBranche//Note[EleveId=$currentEleveId]/Valeur) 
```

**在 Xpath 2.0 (XQuery) 中使用**：

```
round(avg($currentBranche//Note[EleveId=$currentEleveId]/Valeur
                                             [number(.)=number(.)])*100
      ) div 100 
```

**如果`Valeur`保证所有值都可以转换为`xs:decimal`，则使用：**

```
avg($currentBranche//Note[EleveId=$currentEleveId]/Valeur
                                                 [castable as xs:decimal]
                                                    /xs:decimal(.)
   ) 
```

在这种情况下，不会有（明显的）精度损失，您可以稍后使用该`format-number()`函数来获取小数点后所需的位数。

* * *

**二、产生“加权平均”**：

**鉴于提供的 XML 文档**：

```
<Examens>
    <Examen>
        <ExamenId>1</ExamenId>
        <Coef>1</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>4</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur>4.2</Valeur>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>3.8</Valeur>
            </Note>
        </Notes>
    </Examen>
    <Examen>
        <ExamenId>2</ExamenId>
        <Coef>2</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>5</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur/>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>3.5</Valeur>
            </Note>
        </Notes>
    </Examen>
    <Examen>
        <ExamenId>3</ExamenId>
        <Coef>3</Coef>
        <Notes>
            <Note>
                <EleveId>100</EleveId>
                <Valeur>6</Valeur>
            </Note>
            <Note>
                <EleveId>101</EleveId>
                <Valeur>5.4</Valeur>
            </Note>
            <Note>
                <EleveId>102</EleveId>
                <Valeur>2</Valeur>
            </Note>
        </Notes>
    </Examen>
</Examens> 
```

**这个 XPath 2.0 表达式产生加权平均值：**

```
 for $elevId in distinct-values(/*/*/*/*/EleveId)
    return
      round(100*
             (sum(/*/*/*/Note
                    [EleveId eq $elevId
                   and number(Valeur) eq number(Valeur)
                     ]
                      /(Valeur * ../../Coef)
                  )
            div
              sum(/*/*/*/Note
                    [EleveId eq $elevId
                   and number(Valeur) eq number(Valeur)
                    ]
                     /../../Coef
                  )
              )
           )
    div 100 
```

**并产生预期的正确结果**：

```
5.33 5.1 2.8 
```

# java - Calendar.MONTH 返回 2\. 如何返回 02

> ID：14122071
> 
> 赞同：1
> 
> 时间：2013-01-02T12:30:16.043
> 
> 标签：java

`String.valueOf(Calendar.getInstance().get(Calendar.MONTH) + 1)`返回 1 而不是 01。我怎样才能使用这个结果将是 02、03、04 而不是 2、3、4

我知道`Calendar.MONTH`返回数字从 0 到 11

> [http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#MONTH](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#MONTH)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:32:08.800

这是格式问题。为什么不调查[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)？还是[String.format()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)？

（请注意，`SimpleDateFormat`存在线程安全问题，推荐使用[Joda-Time](http://joda-time.sourceforge.net/)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T12:32:32.890

您可以改用

```
String.format("%02d", ...) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T12:33:30.860

使用简单日期格式：

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("MM");
    System.out.println(dateFormat.format(date)); 
```

而且我还建议使用[Joda Time](http://joda-time.sourceforge.net/)而不是 Java Calendar。

# boost - 何时使用同步或异步连接？

> ID：14122074
> 
> 赞同：1
> 
> 时间：2013-01-02T12:30:26.977
> 
> 标签：boost, asynchronous, connection

我想知道连接客户端-服务器的最佳选择是什么。

我不得不说我正在使用 boost，我不**知道如何**去做，但是**什么时候**，发送，接收和连接。有人可以帮我吗？

# html - 博文中的跳转链接

> ID：14122075
> 
> 赞同：0
> 
> 时间：2013-01-02T12:30:31.763
> 
> 标签：html

我正在使用`blogger.com`我的帖子

我有一篇文章（这是我在博客中的第一篇文章）。

我的链接很少（大约 4 个），我想将它们链接到页面的不同部分。我已经对此进行了谷歌搜索，这就是我发现的。

假设我的菜单有 4 个链接，我想为我的第一个链接创建跳转链接。

在第一个链接，我必须写

```
<a href="http://xxx.blogspot.com/2013/01/xxx.html#link1">Link1</a> 
```

在我希望用户结束的地方，我必须写，

```
<a name="link1">Link1</a> 
```

我做了完全相同的事情，但是当我单击链接时它什么也没做。有人可以帮助我吗？

编辑 ::: 这是帖子顶部的链接，我有指向页面其他部分的链接..

```
<a href="http://mv.blogspot.com/2013/01/xyz.html#screenshots">ScreenShots</a> 
```

这是我希望用户去的部分，当他们点击上面的屏幕截图时..

```
<a name="screenshots">ScreenShots</a> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:33:41.923

所有信息都可以在[w3schools找到](http://www.w3schools.com/html/html_links.asp)

这是我刚刚生成的名为“hello.html”的 html 文件（演示有点冗长）如果您将其粘贴到文本编辑器中并生成一个文件，您将得到与我相同的结果。在浏览器中打开 html 页面时，滚动到底部，您将看到一个超链接。当您单击该超链接时，它会将您带回页面顶部，并且 url 将更改为`.../hello.html#tips` . 如果没有足够的文本在页面上显示“运动”，它**可能**看起来好像什么也没做。

```
<!DOCTYPE html>
<html>
<body>

<br /> 
<a id="tips">Useful Tips Section</a> 
<ul>
Tip 1  
</ul
<br />
<p>If you set the target attribute to "_blank", the link will open in a new browser window/tab.</p>
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.

<a id="tips">Useful Tips Section</a> 
Tip 1
<br />
<a href="hello.html#tips">
Visit the Useful Tips Section</a>

<br />
 <a href="#tips">Visit the Useful Tips Section</a> 

</body>
</html> 
```

# c# - 1 个视图中的 2 个模型 MVC4

> ID：14122076
> 
> 赞同：0
> 
> 时间：2013-01-02T12:30:39.380
> 
> 标签：c#, linq, razor, asp.net-mvc-4

我有两个模型，如下所示：

一：

```
 [Validator(typeof(BlogPostValidator))]
    public partial class BlogPostModel : BaseNopEntityModel
    {
        public BlogPostModel()
        {
            Tags = new List<string>();
            Comments = new List<BlogCommentModel>();
            AddNewComment = new AddBlogCommentModel();
        }

        public string SeName { get; set; }

        public string Title { get; set; }

        public string Body { get; set; }

        public bool AllowComments { get; set; }

        public int NumberOfComments { get; set; }

        public DateTime CreatedOn { get; set; }

        public IList<string> Tags { get; set; }

        public IList<BlogCommentModel> Comments { get; set; }
        public AddBlogCommentModel AddNewComment { get; set; }

        public BlogCommentModel blogcommentmodel { get; set; }
    } 
```

二：

```
 public partial class BlogCommentModel : BaseNopEntityModel
    {
        public int CustomerId { get; set; }

        public string CustomerName { get; set; }

        public string CustomerAvatarUrl { get; set; }

        public string CommentText { get; set; }

        public DateTime CreatedOn { get; set; }

        public bool AllowViewingProfiles { get; set; }

        public int CommentParentID { get; set; }

        public IList<BlogComment> ChildCommentList { get; set; }//netra
    } 
```

我想利用**BlogCommentModel中的****ChildCommentList**来显示嵌套评论。

 **我的观点：

```
@model BlogPostModel
@using Nop.Web.Models.Blogs;
 @if (Model.AllowComments)
        {
            <div class="clear">
            </div>
            <fieldset class="new-comment" id="addcomment">
                <legend class="title">@T("Blog.Comments.LeaveYourComment")</legend>
                @using (Html.BeginForm())
                {
                    <div>
                        <div class="message-error">@Html.ValidationSummary(true)</div>
                        @{
                    string result = TempData["nop.blog.addcomment.result"] as string;
                        }
                        @if (!String.IsNullOrEmpty(result))
                        {
                            <div class="result">@result</div>
                        }
                        <div class="forms-box">
                            <div class="inputs">
                                @Html.LabelFor(model => model.AddNewComment.CommentText)
                                <div class="input-box">
                                    @Html.TextAreaFor(model => model.AddNewComment.CommentText, new { @class = "comment-text" })
                                </div>
                                @Html.ValidationMessageFor(model => model.AddNewComment.CommentText)
                            </div>
                            @if (Model.AddNewComment.DisplayCaptcha)
                            {
                                <div class="captcha-box">
                                    @Html.Raw(Html.GenerateCaptcha())
                                </div>
                                <div class="clear">
                                </div>
                            }
                        </div>
                        <div class="clear">
                        </div>
                        <div class="buttons">
                            <input type="submit" name="add-comment" class="button-1 blog-post-add-comment-button" value="@T("Blog.Comments.SubmitButton")" />
                        </div>
                    </div>
                }
            </fieldset>
                if (Model.Comments.Count > 0)
                {
            <div class="clear">
            </div>
            <div class="comment-list">
                <div class="title">
                    @T("Blog.Comments")
                </div>
                <div class="clear">
                </div>
                @foreach (var comment in Model.Comments)
                {
                    <div class="blog-comment">
                        <div class="comment-info">
                            <div class="user-info">
                                @if (comment.AllowViewingProfiles)
                                {
                                    <a href="@Url.RouteUrl("CustomerProfile", new { id = comment.CustomerId })" class="username">@(comment.CustomerName)</a>
                                }
                                else
                                {
                                    <span class="username">@(comment.CustomerName)</span>
                                }
                                <div class="avatar">
                                    @if (!String.IsNullOrEmpty(comment.CustomerAvatarUrl))
                                    {
                                        <img src="@(comment.CustomerAvatarUrl)" class="avatar-img" title="avatar" alt="avatar" />
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="comment-content">
                            <div class="comment-time">
                                @T("Blog.Comments.CreatedOn"): <span class="stat-value">@comment.CreatedOn.ToString("g")</span>
                            </div>
                            <div class="comment-body">
                                @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(comment.CommentText, false, true, false, false, false, false))
                            </div>
                        </div>
                        @Html.Widget("blogpost_page_inside_comment")
                    </div>
                    <div class="clear">
                    </div>
                    <div>
                     @foreach(var childcomments in Model.blogcommentmodel.ChildCommentList)
                     {
                      @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(childcomments.CommentText, false, true, false, false, false, false))
                     }
                    </div>
                }
                <div class="buttons">
                    <input type="submit" id="replyto" name="reply-comment" class="button-1 blog-post-add-comment-button" value="@T("Blog.Comments.ReplyButton")" />
                </div>
            </div>
                }
        } 
```

发生错误：

```
@foreach(var childcomments in Model.blogcommentmodel.ChildCommentList)
                         {
                          @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(childcomments.CommentText, false, true, false, false, false, false))
                         }
                        </div>
                    } 
```

用户代码未处理 NullReferenceException -{“对象引用未设置为对象的实例。”}

我的 ActionResult 控制器代码：

```
public ActionResult BlogPost(int blogPostId)
        {
            if (!_blogSettings.Enabled)
                return RedirectToRoute("HomePage");

            var blogPost = _blogService.GetBlogPostById(blogPostId);
            if (blogPost == null ||
                (blogPost.StartDateUtc.HasValue && blogPost.StartDateUtc.Value >= DateTime.UtcNow) ||
                (blogPost.EndDateUtc.HasValue && blogPost.EndDateUtc.Value <= DateTime.UtcNow))
                return RedirectToRoute("HomePage");

            var model = new BlogPostModel();
            **PrepareBlogPostModel(model, blogPost, true);**

            return View(model);
        } 
```

在上述 ActionResult 中调用的以下方法：

```
 [NonAction]
        protected void PrepareBlogPostModel(BlogPostModel model, BlogPost blogPost, bool prepareComments)
        {
            if (blogPost == null)
                throw new ArgumentNullException("blogPost");

            if (model == null)
                throw new ArgumentNullException("model");

            model.Id = blogPost.Id;
            model.SeName = blogPost.GetSeName();
            model.Title = blogPost.Title;
            model.Body = blogPost.Body;
            model.AllowComments = blogPost.AllowComments;
            model.CreatedOn = _dateTimeHelper.ConvertToUserTime(blogPost.CreatedOnUtc, DateTimeKind.Utc);
            model.Tags = blogPost.ParseTags().ToList();
            model.NumberOfComments = blogPost.ApprovedCommentCount;
            model.AddNewComment.DisplayCaptcha = _captchaSettings.Enabled && _captchaSettings.ShowOnBlogCommentPage;
            if (prepareComments)
            {
               // var blogchildcomment = _blogService.GetAllChildComments();
                var blogComments = blogPost.BlogComments.Where(pr => pr.IsApproved).OrderBy(pr => pr.CreatedOnUtc);
                foreach (var bc in blogComments)
                {
                    var commentModel = new BlogCommentModel()
                    {
                        Id = bc.Id,
                        CustomerId = bc.CustomerId,
                        CustomerName = bc.Customer.FormatUserName(),
                        CommentText = bc.CommentText,
                        CreatedOn = _dateTimeHelper.ConvertToUserTime(bc.CreatedOnUtc, DateTimeKind.Utc),
                        AllowViewingProfiles = _customerSettings.AllowViewingProfiles && bc.Customer != null && !bc.Customer.IsGuest(),
                        CommentParentID = bc.CommentParentID,//Netra
                    };
                    //Netra
                    var comments = _blogService.GetBlogComments(bc.CommentParentID);
                    if (comments != null)
                    {
                        commentModel.ChildCommentList = new List<BlogComment>(); 
                        foreach (var cmnt in comments)
                        {
                            commentModel.ChildCommentList.Add(cmnt);
                        }
                    }

                    if (_customerSettings.AllowCustomersToUploadAvatars)
                    {
                        var customer = bc.Customer;
                        string avatarUrl = _pictureService.GetPictureUrl(customer.GetAttribute<int>(SystemCustomerAttributeNames.AvatarPictureId), _mediaSettings.AvatarPictureSize, false);
                        if (String.IsNullOrEmpty(avatarUrl) && _customerSettings.DefaultAvatarEnabled)
                            avatarUrl = _pictureService.GetDefaultPictureUrl(_mediaSettings.AvatarPictureSize, PictureType.Avatar);
                        commentModel.CustomerAvatarUrl = avatarUrl;
                    }
                    model.Comments.Add(commentModel);
                }
            }
        } 
```

BlogComment 是描述属性的类。

```
 public partial class BlogComment : CustomerContent
    {
        /// <summary>
        /// Gets or sets the comment text
        /// </summary>
        public virtual string CommentText { get; set; }

        /// <summary>
        /// Gets or sets the blog post identifier
        /// </summary>
        public virtual int BlogPostId { get; set; }

        /// <summary>
        /// Gets or sets the blog post
        /// </summary>
        public virtual BlogPost BlogPost { get; set; }

        public virtual int CommentParentID { get; set; } //netra
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:34:28.950

所以你在某处有一个空值——你需要找出什么是空值并使它不为空；或将 Razor 代码更改为：

```
@if(Model.blogcommentmodel != null && Model.blogcommentmodel.ChildCommentList != null)
{
  @* original @foreach statement here *@
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:34:49.997

我的第一个猜测是您需要为模型创建一个默认构造函数。在构造函数中，设置`ChildCommentList = new List<BlogComment>();`.

看起来你没有在你的控制器中设置它，你设置模型的方式会导致 ChildCommentList 仍然为空。使用该默认构造函数，如果您错过在某处设置它，您将不必担心代码会像这样被破坏。

为了回答 wnetra 的评论，构造函数位于 BlogcommentModel 类上。所以你需要这样的东西：

```
public class BlogcommentModel {
    /* All of the property declarations */
    public IList<BlogComment> ChildCommentList { get; set; }

    /* Constructor for the BlogcommentModel class */
    public BlogcommentModel() {
        ChildcommentList = new List<BlogComment>();
    }
} 
```

任何引用对象都应始终在默认构造函数中实例化，以确保在尝试在代码中引用它们时它们不会为空。

另请参阅 Andras 关于`!= null`尝试在代码中引用引用对象时总是做的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:32:24.690

我从 BlogCommenmodel 中删除了以下代码：

```
//public int CommentParentID { get; set; }

    //public IList<BlogComment> ChildCommentList { get; set; }//netra

    //public BlogCommentModel()
    //{
    //    ChildCommentList = new List<BlogComment>();
    //} 
```

并在 BlogPostModel 中引入

```
 [Validator(typeof(BlogPostValidator))]
public partial class BlogPostModel : BaseNopEntityModel
{
    public BlogPostModel()
    {
        Tags = new List<string>();
        Comments = new List<BlogCommentModel>();
        AddNewComment = new AddBlogCommentModel();
        ChildCommentList = new List<BlogComment>();
    }

    public string SeName { get; set; }

    public string Title { get; set; }

    public string Body { get; set; }

    public bool AllowComments { get; set; }

    public int NumberOfComments { get; set; }

    public DateTime CreatedOn { get; set; }

    public IList<string> Tags { get; set; }

    public IList<BlogCommentModel> Comments { get; set; }
    public AddBlogCommentModel AddNewComment { get; set; }

    //Netra
    public int CommentParentID { get; set; }

    public IList<BlogComment> ChildCommentList { get; set; }//netra

   // public BlogCommentModel blogcommentmodel { get; set; }
} 
```

在视图中：

```
<div>
                            @if (Model.ChildCommentList != null)
                            {
                                foreach (var childcomments in Model.ChildCommentList)
                                {
                                    @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(childcomments.CommentText, false, true, false, false, false, false))
                                }
                            }
                        </div> 
```**

# kernel - 运行 Debian 的 TS-7500 板上的 ttyACM* 端口

> ID：14122084
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:31:13.610
> 
> 标签：kernel, tty

当我将 Arduino Mini 连接到运行 Debian ( *Linux ts7500 2.6.24.4* ) 的 TS-7500 板时，它不会显示为 ACM 端口。

**dmesg**给出以下输出

`[14090.3000] usb 2-1: new full speed USB device using str8100-ohci and address 6` `[14090.4900] usb 2-1: configuration #1 chosen from 1 choice`

我在[这里](http://tech.dir.groups.yahoo.com/group/ts-7000/message/21633)读到我必须重新编译内核。如果是这样建议一些链接，否则我该如何解决这个问题？

**编辑**：运行后`modprobe cdc_acm`，dmesg 显示以下输出，

```
usbcore: registered new interface driver cdc_acm
cdc_acm: v0.26:USB Abstract Control Model driver for USB modems and ISDN adapters 
```

但仍然没有在 /dev 中分配任何端口（例如**ttyACM0 ）。**我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:18:53.630

尝试 modprobe **ehci-hcd**或**ohci-hcd**和**uhci-hcd**。您必须确保在内核中编译了对这些 USB 功能的支持。

此处描述了如何编译内核[TS-7500 Kernel_Compile_Guide](http://wiki.embeddedarm.com/wiki/TS-7500#Kernel_Compile_Guide)。它运作良好。

# android - 确定 Activity 是否被 Notification 调用

> ID：14122085
> 
> 赞同：7
> 
> 时间：2013-01-02T12:31:21.360
> 
> 标签：android, notifications, android-pendingintent

我正在使用带有各种**选项卡的****Activity**。从应用程序的不同部分，创建通知以告诉用户某些事情发生了变化。当用户单击**Notification**时，我现在设法调用**Activity**。但是我如何确定一个**活动**是在运行时以“正常”方式创建的，还是通过点击通知创建的？

 ******（根据点击的通知，我想转发到另一个选项卡而不是显示主选项卡。）

```
Intent intent = new Intent(ctx, MainActivity.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(ctx, 0, intent, 0);

        // TODO: Replace with .Build() for api >= 16
        Notification noti = new Notification.Builder(ctx)
                .setContentTitle("Notification"
                .setContentText(this.getName())
                .setSmallIcon(R.drawable.icon)
                .setContentIntent(pendingIntent)
                .setDefaults(
                        Notification.DEFAULT_SOUND
                                | Notification.DEFAULT_LIGHTS)
                .setAutoCancel(true)
                .getNotification();

        NotificationManager notificationManager = (NotificationManager) ctx
                .getSystemService(Context.NOTIFICATION_SERVICE);

        // Hide the notification after its selected
        notificationManager.notify(this.getId(), noti); 
```

这成功调用了我的 MainActivity。但是当 Activity 被触发时，是否有一些方法被调用`pendingIntent`？

**考虑在Main Activity**中定义这样的东西：

```
onTriggeredByNotification(Notification noti){
     //determinte tab, depending on Notification.
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T12:45:00.290

从通知中传递一个布尔值并在活动的 onCreate 方法中检查相同的值。

```
 Intent intent = new Intent(ctx, MainActivity.class);
 intent.putExtra("fromNotification", true); 
```

...

```
if (getIntent().getExtras() != null) {
  Bundle b = getIntent().getExtras();
  boolean cameFromNotification = b.getBoolean("fromNotification");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:37:08.493

您可以在**通知中尝试此操作**

```
Intent intent=new Intent();
intent.setAction("Activity1"); 
```

在**Activity**覆盖`onNewIntent()`方法和获取操作中，您可以确定是否调用了活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:39:35.530

比使用@ricintech 指定的意图的保留操作字段更好，您可以在待处理的意图中使用额外的参数，并在您的`onCreate`方法和`onNewIntent`活动中的方法中检测它。******

# objective-c - 在 Core Data 中执行计算的链式表达式

> ID：14122086
> 
> 赞同：2
> 
> 时间：2013-01-02T12:31:21.077
> 
> 标签：objective-c, ios, sqlite, core-data, nsexpression

首先：新年快乐:-)

## 我想要做什么

我试图在核心数据中划分两个属性，然后计算这些划分的平均值。属性由关键路径（例如，、、`eur`）`usd`指定`aud`。

**示例：** 我有以下数据集：

```
date         eur   usd    aud
------------------------------
2010-01-01   0.5   1.0    1.5
2010-01-02   0.6   1.1    1.6
2010-01-03   0.4   1.0    1.3 
```

除以两个属性，例如 eur / usd 与以下结果...

```
divide eur / usd:
------------------
2010-01-01   0.5
2010-01-02   0.54
2010-01-03   0.4 
```

...然后计算这些数字的平均值`(0.5 + 0.54 + 0.4)/3 = 0.48`

## 我的代码

由于我想让这些计算直接由 Core Data 执行，我创建了以下表达式并获取请求：

```
NSExpression *fromCurrencyPathExpression = [NSExpression
    expressionForKeyPath:fromCurrency.lowercaseString];
NSExpression *toCurrencyPathExpression   = [NSExpression
    expressionForKeyPath:toCurrency.lowercaseString]; 
NSExpression *divisionExpression = [NSExpression
   expressionForFunction:@"divide:by:"
   arguments:@[fromCurrencyPathExpression,
   toCurrencyPathExpression]];

NSExpression *averageExpression = [NSExpression expressionForFunction:@"average:"
   arguments:@[divisionExpression]];

NSString *expressionName = @"averageRate";
NSExpressionDescription *expressionDescription = 
   [[NSExpressionDescription alloc] init];
expressionDescription.name = expressionName;
expressionDescription.expression = averageExpression;
expressionDescription.expressionResultType= NSDoubleAttributeType;

NSFetchRequest *request = [NSFetchRequest 
   fetchRequestWithEntityName:NSStringFromClass([self class])];
NSPredicate *predicate =
   [NSPredicate predicateWithFormat:@"date >= %@ AND date <= %@",startDate,fiscalPeriod.endDate];

request.predicate = predicate;
request.propertiesToFetch = @[expressionDescription];
request.resultType = NSDictionaryResultType;

NSError *error;
NSArray *results = [context 
    executeFetchRequest:request error:&error]; 
```

## 问题

但是，在运行应用程序时，它会崩溃并显示错误消息：

```
Unsupported argument to sum : (
    "eur / usd" 
```

我的代码有什么问题？如何链接这两个计算并让它们直接在 Core Data 中执行？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T20:46:34.977

似乎“收集”函数表达式 like`@average`只能与键路径一起使用，但不能与其他通用表达式结合使用 as `propertiesToFetch`。我没有这方面的参考资料，但其他人也注意到了这个问题：

*   [使用另一个表达式作为 sum 的参数从 NSManagedObject 获取聚合数据：表达式](https://stackoverflow.com/questions/13879025/fetch-aggregate-data-from-nsmanagedobject-using-another-expression-as-argument-t)
*   [使用 CoreData 执行乘法（聚合）：如何？](https://stackoverflow.com/questions/8985194/performing-multiplication-aggregation-with-coredata-how-to)

因此，您可以分两步进行：首先执行一个 fetch 请求，该请求返回一个包含所有除法结果的数组：

```
NSExpression *fromCurrencyPathExpression = [NSExpression
                                            expressionForKeyPath:@"eur"];
NSExpression *toCurrencyPathExpression   = [NSExpression
                                            expressionForKeyPath:@"usd"];
NSExpression *divisionExpression = [NSExpression
                                    expressionForFunction:@"divide:by:"
                                    arguments:@[fromCurrencyPathExpression,
                                    toCurrencyPathExpression]];

NSString *expressionName = @"ratio";
NSExpressionDescription *expressionDescription =
[[NSExpressionDescription alloc] init];
expressionDescription.name = expressionName;
expressionDescription.expression = divisionExpression;
expressionDescription.expressionResultType= NSDoubleAttributeType;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Entity"];

request.propertiesToFetch = @[expressionDescription];
request.resultType = NSDictionaryResultType;

NSError *error;
NSArray *ratios = [context executeFetchRequest:request error:&error]; 
```

结果是一个字典数组：

```
(lldb) po ratios
(NSArray *) $0 = 0x00000001001170f0 <_PFArray 0x1001170f0>(
{
    ratio = "0.5454545454545454";
},
{
    ratio = "0.4";
},
{
    ratio = "0.5";
}
) 
```

此外，使用“-com.apple.CoreData.SQLDebug 1”选项可以看到划分已经在 SQLite 级别执行：

```
sql: SELECT  t0.ZEUR /  t0.ZUSD FROM ZENTITY t0 
```

然后，您可以使用键值编码计算内存中所有比率的平均值：

```
NSNumber *average = [ratios valueForKeyPath:@"@avg.ratio"]; 
```

结果是

```
(lldb) po average
(NSNumber *) $0 = 0x000000010012fd60 0.4818181818181818 
```

# model-view-controller - EXTJS 4.1 MVC：如何在控制器中为网格插件添加监听器

> ID：14122088
> 
> 赞同：0
> 
> 时间：2013-01-02T12:31:28.317
> 
> 标签：model-view-controller, controller, extjs4.1, addeventlistener

[我找到了在EXTJS MVC](http://docs.sencha.com/ext-js/4-1/#!/guide/mvc_pt2)中实现组件侦听器的方法。但是我找不到在控制器上为网格插件添加侦听器的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-29T11:59:43.783

这已经得到解答，虽然专门针对 rowEditing 插件，但它应该适用于任何插件： [Ext JS 4 - How to control rowEditor inside controller](https://stackoverflow.com/questions/11914525/ext-js-4-how-to-control-roweditor-inside-controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:41:39.110

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T20:00:17.073

下面的例子对我有用。也就是说，我现在可以在我的控制器中处理插件事件。由于我正在开发自定义插件，而您使用的是打包插件，因此您的方法会有所不同。我认为您应该扩展您想要使用的插件，从我的示例中添加“mixins”和“relayEvents”概念。您还可以为您正在使用的插件创建覆盖。

```
Ext.define( "Ext.ux.MyController", {
    extend: "Ext.app.Controller",
    init: function() {
        this.control( {
            "mycomponentxtype": {
                "load": function(){ ... },
                "unload": function(){ ... }
            }
        } )
    }
} );

Ext.define( "Ext.ux.MyPlugin", {
    extend: "Ext.AbstractPlugin",
    alias: "plugin.myplugin",

    mixins: [
        "Ext.util.Observable"
    ],

    config: {
        ...
    },

    init: function( myComponent ) {
        var me = this;  

        // contruction of the mixin is required.
        me.mixins["Ext.util.Observable"].constructor.call( me );

        myComponent.relayEvents( me, [ "load", "unload" ] );

        .
        .
        .
    }
} ); 
```

尽管最初的问题是从 2013 年初开始的。我在 2014 年年中来到这篇文章寻找足够的答案但没有找到。这基本上就是我解决问题的方式。我希望它有帮助！

# android - 在 Android 上使用 asynctask 的 Webview

> ID：14122089
> 
> 赞同：4
> 
> 时间：2013-01-02T12:31:36.633
> 
> 标签：android, webview, android-asynctask, android-webview, loading

我想这样做，进度对话框等待**webview**上的加载项。我该怎么做`dialog.dismiss()`取决于在**webview**上加载项目的事件？

```
 public class asynctask extends  AsyncTask<Void, Void, Void> {

    private ProgressDialog dialog = new ProgressDialog(WebActivity.this);

  @Override
  protected void onPostExecute(Void result) {
      // TODO Auto-generated method stub 
```

**在那里我该怎么做？？**

```
 dialog.dismiss(); 
```

**对话框消失，无需等待**

```
 }
 @Override 
 protected void onPreExecute() {
      // TODO Auto-generated method stub
        dialog.setMessage("Loading..Please wait.");

        dialog.show();
        dialog.setCanceledOnTouchOutside(false);
     }

@Override
protected Void doInBackground(Void... params) {
      // TODO Auto-generated method stub

      return null;
     }

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);

    Bundle extras = getIntent().getExtras();
    String url=extras.getString("adres");

    webView.setWebViewClient(new WebViewClient());
    webView.loadUrl(url);

    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    new asynctask().execute(); 
```

}

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T13:19:54.860

不要使用 AsyncTask，因为你不负责加载 webview。如果你想显示一个进度对话框，这里是如何做到的。

```
private ProgressDialog dialog = new ProgressDialog(WebActivity.this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);
    webView = (WebView) findViewById(R.id.webView1);

    Bundle extras = getIntent().getExtras();
    String url=extras.getString("adres");

    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {                  
            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }
    });
    dialog.setMessage("Loading..Please wait.");
    dialog.setCanceledOnTouchOutside(false);
    dialog.show();
    webView.loadUrl(url);

    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
} 
```

这个想法是您显示对话框，开始加载 url，当 web 客户端看到页面已完成加载时，它会关闭对话框。

# php - Varnish 和 PHP 会话验证

> ID：14122096
> 
> 赞同：2
> 
> 时间：2013-01-02T12:32:04.717
> 
> 标签：php, session, cookies, varnish

我运行一个很大程度上依赖于会话的站点，我想在它前面放置**Varnish**。

用户*可能*会在第一次请求时获得 Set-Cookie 标头，这取决于他输入的 URL。

使用PHP 的`session_start`。

如果 Varnish 在前面，我如何确保来自客户端的 Cookie 标头实际上与有效的 PHP 会话相关？

如果客户端没有发送 Cookie 标头，我可以轻松地将其发送到后端以获取`Set-Cookie`.

现在我使用一个 AJAX 请求，它为每个页面返回一个 Set-Cookie 标头，它应该为用户（无效）验证 Cookie，它似乎适用于 95% 的访问者。缺失的 5% 令人头疼。

有没有广泛使用的方法来解决这个问题？

# php - 将 CSV 文件解析为二维数组

> ID：14122105
> 
> 赞同：0
> 
> 时间：2013-01-02T12:32:26.150
> 
> 标签：php, arrays, parsing, csv

我的目标是将第一个索引（csv 中每一行的第一个值）放入下拉 html`select`列表中。

测试.csv

```
mark, blue, tall,
mike, black, short 
```

索引.php

```
<?php
$handle = fopen("csv/food.csv", "r");

while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    echo "<pre>";
    print_r($data);
    echo "<pre>";
}
?> 
```

输出

```
Array
(
    [0] => mark
    [1] => blue
    [2] => tall
    [3] => mike
    [4] => black
    [5] => short
) 
```

如果我在高后删除逗号，则输出

```
Array
(
    [0] => mark
    [1] => blue
    [2] => tall
mike
    [3] => black
    [4] => short
) 
```

**期望的输出**

```
Array
(
    [0][0] => mark
    [0][1] => blue
    [0][2] => tall
    [1][0] => mike
    [1][1] => black
    [1][2] => short
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:55:19.570

得到它的工作：

```
<select name="list" > 
<?php 
$file = fopen("food.csv", "r"); 

while (!feof($file) ) { 
    $lines = fgetcsv($file, 1024);?> 
    <option value="<?php print $lines[0] ?>"> <?php print $lines[0] ?> </option> 
<?php } ?>
</select>
<?php 
fclose($file); 
?> 
```

# ios - 记住我目前的看法

> ID：14122106
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:32:27.333
> 
> 标签：ios, uiview

我实际上写了一个切换一些 UIViews 的方法。当我输入方法时，我必须知道哪个是我当前的视图，以便从超级视图中准确删除这个视图。为此，我在头文件中声明了一个属性：

```
@property (weak, nonatomic) UIView *currentView; 
```

在我的方法中更改为某个视图后，我想将此视图分配给属性，以便在我再次进入该方法时使用它，并在请求时从超级视图中删除此视图。该方法如下所示：

```
...
nextView = [self loadNextView]; // the view is loaded from a NIB here
if (self)
{
    [self viewWillDisappear:YES];
    [[self currentView] removeFromSuperview];
    [[self view] addSubview:nextView];
    [self currentView] = [self nextView];
... 
```

不幸的是，编译器告诉我 currentView 在这里不可分配。是否有另一种希望更好的方式来记住当前观点以达到我的目的，或者我应该使用完全不同的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:34:01.773

您不能分配给函数或方法调用的值（它返回一个右值）。您必须使用属性访问器语法：

```
self.currentView = [self nextView]; 
```

或显式调用设置器：

```
[self setCurrentView:[self nextView]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:34:20.123

试试这个

代替

```
[self currentView] = [self nextView]; 
```

和

```
self.currentView = [self nextView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:35:04.077

而不是以下行，

```
[self currentView] = [self nextView]; 
```

执行以下操作：

```
[self setCurrentView:[self nextView]]; 
```

# mysql - 如何根据本地服务器时间获取每个状态的基于时间的数据？

> ID：14122113
> 
> 赞同：2
> 
> 时间：2013-01-02T12:32:52.970
> 
> 标签：mysql, sql, timezone

我有以下表格和相关列：

```
state
    id int
    name text
    utc_offset int (minutes)

sale
    id int
    state_id int
    created datetime
    amount decimal(8,2) 
```

放入该`created`列的值是本地服务器时间，状态 id = 1。

如何获得每个州每天的总销售额？

有没有更好的方法来处理时区数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:59:30.460

您的解决方案不适用于具有多个时区的州。

通常，最佳实践是将每个日期时间作为 UTC 存储在数据库中。然后，您使用客户端的时区（通常在 Web 应用程序中很容易获得）对其进行格式化，以便在他们自己的本地时区中显示给用户。

因此，您不会存储州时间偏移量，并且您每天按州查询的销售额将更加直接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:37:47.137

我不知道 MySQL 的语法，但这是在正确的轨道上吗？

```
SELECT sale.name AS name, 
    adddate(sale.created. interval (state.utc_offset - (select utc_offset from state where id = 1)) minute) AS date, 
    SUM(amount) AS total_amount
FROM sale
JOIN state ON sale.state_id = state.id
GROUP BY name,date; 
```

注意：像这样存储 utc_offset 充其量是草率的，因为 utc_offset 在世界许多地方每年更改两次。存储时区名称通常是更好的做法，并使用实际的时区操作库为您进行日期计算。

**编辑**

我对时区处理的建议是修改您的状态表，如下所示：

```
state
    id int
    name text
    tz varchar 
```

然后按如下方式更新您的查询：

```
SELECT sale.name AS name,
    CAST(CONVERT_TZ(sale.created,'utc',state.tz) AS DATE) AS date,
    SUM(amount) AS total_amount
FROM sale
JOIN state ON sale.state_id = state.id
GROUP BY name,date; 
```

# java - 如何将 int32Array 转换为 java int []？

> ID：14122114
> 
> 赞同：2
> 
> 时间：2013-01-02T12:32:55.320
> 
> 标签：java, itk

我有：

```
int32Array hh = int32Array.frompointer(img.getBufferAsInt32()); 
```

这是由于采用了指向 simpleitk 图像数据的指针。谁能帮我把这个数组类型转换成一个普通的java数组？

**编辑**

我尝试了另一种方法，我从 itkImage 类继承并获得指向图像缓冲区的 Cptr 指针，只要我还在 Java 中找到了一个内存指针类，我可以从中获取我的数组

```
 com.sun.jna.Pointer ptr = new com.sun.jna.Memory(2 * 512 * 512);
       // ptr.share(_pointer);
        int testarr[] = new int[512 * 512];
        ptr.read(_pointer, testarr, 0, testarr.length); 
```

现在的问题是如何将 Cptr 指针复制到 Java 指针中（等号运算符不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:23:19.677

创建一个与前一个大小相同的新数组并键入 int，将所有数据从旧数组复制到新数组，同时使用 (int) 将其转换为 int。

```
 int[] newArray = new int[hh.length];

    for(int i=0; i<hh.length; i++){
        array[i] = (int)hh[i];
    } 
```

# c# - 如何实现一个多层次的微软记者

> ID：14122116
> 
> 赞同：0
> 
> 时间：2013-01-02T12:33:02.920
> 
> 标签：c#, asp.net, webforms, report

我的一份报告需要以多层次的方式显示数据。

数据结构类似于 Org>Prog>Event。

假设我有原始数据源，例如：

```
OrgId|ProgId|EventId|PlanValue
1    |A     |Z      |10
1    |A     |Y      |20
2    |A     |Z      |5
3    |A     |F      |2
3    |B     |Z      |3 
```

Reprot Layout：使用第 1 列放置所有不同的 id，但用不同的颜色来区分 id 类型。

所以蓝色是Orgid；红色是 Progid；绿色是 EventId

在该报告中，我需要查看一个组织的总计划价值、该组织的一项计划的总计划价值和一个组织活动的总计划价值。

```
OrgId/ProgId/EventId|PlanValue
1(blue)             |30
A(red)              |30
Z(green)            |10
Y(green)            |20
________________________
2(blue)             |5
A(red)              |5
Z(green)            |5
________________________
3(blue)             |5
A(red)              |2
F(green)            |2
B(red)              |3
Z(green)            |3 
```

任何教程或想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:36:53.237

我认为您不需要认为它复杂化，其中棘手的部分是根据需要获取数据，并且您可以使用类似的 sql，如下所示，[sqlfiddle](http://sqlfiddle.com/#!3/6feee/8)

```
select ORGID,'','', SUM(PLANVALUE) as total from table1
group by ORGID
union all
select ORGID,ProgId,'',  SUM(PLANVALUE) as total from table1
group by ORGID,ProgId
union all
select ORGID,ProgId,EventId,  SUM(PLANVALUE) as total from table1
group by ORGID,ProgId,EventId 
```

如果您已经拥有原始数据，例如 dataTable all Entity list，您可以使用 LinQ 获得相同的结果。获得所需的结果后，只需按需要对其进行排序并绑定用于着色和分隔符的中继器，您可以使用 ProgId != "" 之类的条件语句？“颜色：蓝色”：“颜色：红色”。

# c# - 如何根据给定的二进制图像分割任何对象的一部分以进行计数？

> ID：14122121
> 
> 赞同：2
> 
> 时间：2013-01-02T12:33:23.123
> 
> 标签：c#, image-processing, computer-vision, emgucv

**目标：**我想![在此处输入图像描述](../Images/93548fc6ea32903ffd182267c36790f5.png)从下图中数数。

![在此处输入图像描述](../Images/90b34458f3f2dc8029df624fd669e045.png)

有什么想法可以在这里发挥作用？

我试过了`FindContour()`。它返回边界。此外，我需要使用这些轮廓点。使用 matchShape() 和 Contour.slice() 没有帮助。任何适用于这种情况的示例都将非常有帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:12:52.183

基本上，执行归一化互相关并找到相关峰值。为了改善您的结果，您需要重新考虑/重做您正在展示的这张图片的早期步骤。您需要考虑您是否真的采取了最好/正确的步骤来实现它。

这是裁剪为原始大小的归一化交叉关系结果，以及结果大于 0.35 的非黑点（我使用的实现产生范围 [-1, 1] 内的值）。

![在此处输入图像描述](../Images/daed862a577cbf5b03466f82ecd90b21.png) ![在此处输入图像描述](../Images/b016db38224180022fed8c7ee4e8da7c.png)

正确的图像被简单地二值化，并给出了 5 个分量，这就是你的结果。

# c# - 进程无法访问文件 'D:\test.txt'

> ID：14122124
> 
> 赞同：-5
> 
> 时间：2013-01-02T12:33:28.757
> 
> 标签：c#

我有 ac# 代码，我需要在单击按钮后将信息记录在 txt 文件中。文件被创建，但 write 方法抛出异常错误：

写法：

```
public static void writelogfile(string text) 
{ 
    StreamWriter sw = logfile.AppendText(); 
    sw.WriteLine(text); 
    sw.Close(); 
} 
```

文件创建方法：

```
string filename = "loging-" + DateTime.Now.ToString("yyyyMMdd-HHmmss") + ".txt"; 
logfile = new FileInfo("D:Log\\" + filename); //for QA 
logfile.Create(); 
```

方法中用于记录信息的实际行：

```
writelogfile("userid: " + id); 
```

> 该进程无法访问文件“D:test.txt”，因为它正被另一个进程使用。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs , String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize) at System.IO.StreamWriter.. (String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)*DisplayClass1.b* _0() 在 Microsoft.SharePoint.SPSecurity.<>c_ *DisplayClass4.b* _2() 在 Microsoft.SharePoint.Utilities.SecurityContext.RunAsProcess(CodeToRunElevated secureCode) 在 Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(WaitCallback secureCode, Object param ) 在 Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(CodeToRunElevated secureCode) 在 Blocked_listupdate.VisualWebPart1.VisualWebPart1UserControl.btnupdate_Click(Object sender, EventArgs e)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:40:21.030

您说文件已创建，但我不明白如何创建？鉴于以下行

```
logfile = new FileInfo("D:Log\\" + filename); //for QA 
```

该路径无效 - 冒号后需要有一个反斜杠。如果愿意，您也可以使用 @ 前缀，这样就不需要双反斜杠。

例如：

```
var file = new FileInfo(@"D:\Log\Something" + filename); 
```

此外，您的错误堆栈跟踪与发布的代码不匹配，如果您的代码可以通过，文件名中应该有一个日期时间。堆栈跟踪显示该文件具有名称`test.txt`

如果没有其他问题，更正路径*应该可以*解决*此*问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:14:20.320

这个 IOException...

> 该进程无法访问文件“D:test.txt”，因为它正被另一个进程使用

..is 正如例外所说，是因为您尝试使用已经有锁的文件。您可以使用[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)的 Find Handle 或 DLL来确定哪个进程拥有锁。

ProcessExplorer 很可能会告诉您它的两件事之一

1.  您在尝试登录时正在使用一些文件实用程序检查日志。
2.  它是你的应用程序有锁。这意味着，有多个线程正在写入日志。由于它托管在 Sharepoint 中，因此如果两个请求尝试记录错误，则可能会发生这种情况。

如果它是第一个答案很简单，请关闭导致问题的应用程序。

如果是第二个，怀疑是因为您的评论*有时会记录，但有时我会收到错误消息*，您有几个选择。最简单的就是在写的时候阻塞

私有只读对象 logLock = new object();

```
public static void writelogfile(string text) 
{ 

    lock(myLock)
        {
           //Using instead of close in case there's an error with WriteLine
           using(StreamWriter sw = logfile.AppendText()) 
           { 
            sw.WriteLine(text); 
           }
        }
} 
```

问题是，如果发生大量日志记录的主要问题，所有请求都必须等待日志记录。

另一种方法是在后台线程中写入文件，但要消除 IO 争用。例如，您改为写入队列并定期检查队列并将队列刷新到日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T16:38:48.397

通过使用`logfile.Create();`StreamWriter 创建。您需要关闭流写入器（或使用它创建的写入器），否则您将遇到两个 StreamWriters 尝试写入同一个文件的问题。

只需更改`logfile.Create()`为`using( logfile.Create() ){}`并且应该处理新创建的 StreamWriter。或者，您可以分配`sw`给该`Create()`方法，然后将其传递给该`writelogfile()`方法：`StreamWriter sw = logfile.Create()`

# sql - 在SAS SQL中获取表的最后一行

> ID：14122127
> 
> 赞同：1
> 
> 时间：2013-01-02T12:33:35.667
> 
> 标签：sql, sas

您好，我正在执行以下数据步骤，提取表格的最后一行。我怎么能在 a 中做同样的事情`proc sql`，如果我可以直接访问最后一行，我希望它会快得多？

```
data refTable;
    set vhd(keep= v69c1ec v69dhec v69nbms fixing where=(fixing = 'continu')) end=eof;
    if eof then output;
    by v69dhec v69nbms;
run; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:29:57.647

不，不可能在 SQL 中重现此行为。SQL 中没有自然意义上的“行顺序”。请注意，您**不是**在访问“表格的最后一行”；在应用子句**后**，您将获得最后一个符合条件的行。`WHERE`

如果你真的得到最后一行，一个更快的 SAS 技术是使用`POINT=`and`NOBS=`选项，如下所示：

```
data refTable;
    get_me = nobs;
    set vhd(keep=v69c1ec v69dhec v69nbms fixing) point=get_me nobs=nobs;
    output;
    stop;
run; 
```

请注意，这仅在您**不**包含`WHERE`子句时才有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:24:10.197

据我所知，您不能`proc sql`直接使用访问最后一行。该过程是对数据进行排序，然后使用 选择第一行`outobs = 1`。

[这里](https://stackoverflow.com/questions/7957138/how-do-you-print-the-last-observation-of-a-sas-data-set)的这个问题解释了如何在 SAS 中有效地获取最后一行。基本上，询问 SAS 数据集中有多少条记录，然后直接跳到那条记录。

# php - Magento 集合 - 使用 addAttributeToFilter 嵌套 where 子句

> ID：14122133
> 
> 赞同：1
> 
> 时间：2013-01-02T12:34:01.690
> 
> 标签：php, mysql, zend-framework, magento, where-clause

我正在尝试将多个过滤器添加到我可以在基本级别上执行的 magento 集合中。我真正想做的是能够通过许多嵌套过滤器来过滤集合，这些过滤器可以是任何级别的深度。例如，我知道我可以使用以下代码添加多个过滤器：

```
$collection->addAttributeToFilter('example_attribute', array('eq' => 1)); 
```

我想要做的是拥有可以相互嵌套的过滤器（AND & OR）。我不确定 Magento 收藏是否已经允许您这样做，但我无法在网上找到任何示例。

提供更多细节和示例：我需要过滤一个集合，其中等效 SQL（忽略我需要的选定字段和 JOINS）将是：

```
SELECT .........

WHERE 

(attribute1 = 1
OR 
atttribute2 = 'yes')

AND
qty > 5

AND(
  (attribute3 != 'no'
  AND 
  attribute4 = 50 )
  OR
  (attribute3 != 'no'
  AND 
  attribute6 > 50 )
  ) 
```

这只是一个简单粗略的示例，但基本问题是如何嵌套任意数量的过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:59:12.900

您可以使用如下代码使用 OR 条件：

```
$collection->addAttributeToFilter(array(
array('attribute'=> 'someattribute','like' => 'value'),
array('attribute'=> 'otherattribute','like' => 'value'),
array('attribute'=> 'anotherattribute','like' => 'value'),
)); 
```

编辑：使用它，您应该能够在查询中至少执行 AND 和 OR 条件。似乎标准行为不允许嵌套 AND OR 条件。所以我假设你需要为此编写一个自定义查询。如需进一步参考，请检查文件 Mage_Eav_Model_Entity_Collection_Abstract，其中定义了方法 addAttributeToFilter。

# wix - 如何确保我的 MSI 安装了降级库？

> ID：14122136
> 
> 赞同：3
> 
> 时间：2013-01-02T12:34:14.683
> 
> 标签：wix, windows-installer

我有一个设置我的应用程序的 MSI。它只有一个组件，并且仅安装到 %PROGRAMFILES%（无共享二进制文件）。简化，看起来像这样

```
Msi file, Monday build:
    Program.exe  (v1.0.0)
    ThirdPartyLibrary.dll  (v2.0.1) 
```

现在，如果我发现程序中的错误是由于我将 ThirdPartyLibrary dll 从 v2.0.0 升级到 v2.0.1 导致的，从而恢复对 v2.0.0 的引用，我的 MSI 似乎不会自动替换安装目录？

```
Msi file, Tuesday build:
    Program.exe  (v1.0.0)
    ThirdPartyLibrary.dll  (v2.0)  <- downgraded 
```

确保程序文件夹始终包含我的设置中的二进制文件的最佳做法是什么？我应该 a) 在复制新文件之前擦除安装目录中的所有内容吗？有没有我可以使用的选项（在 Wix 中）使 msi 强制覆盖所有文件而不管版本如何？

如果我从设置中删除一个文件（如果在运行时存在会导致错误的文件），那么在设置之后拥有一个工作程序的唯一方法是先删除所有文件怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:18:50.157

您可以使用 msi 技巧。在 msi 数据库的文件表中，编辑版本列并输入更高的版本，例如 3.0。这样，您将利用文件版本控制规则。

# c# - 如果我将其移至新线程，则无法填写我的列表

> ID：14122140
> 
> 赞同：1
> 
> 时间：2013-01-02T12:34:24.443
> 
> 标签：c#

我正在使用`SafeFileEnumerator`类来搜索文件夹根目录中的文件，该类仅从具有权限的位置返回文件，因此我成功使用了它。

当我尝试以这种方式填写我的列表时，一切正常：

```
 List<string> list = new List<string>();
                    list = SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath,
                        "*.*", SearchOption.AllDirectories).ToList(); 
```

但在这种情况下，我的 GUI 冻结了，所以我将它移动到新线程，在这种情况下什么也没有发生，我想知道为什么：

```
private void btnAddDir_Click(object sender, EventArgs e)
{
    List<string> list = new List<string>();
    string fileToAdd = string.Empty;
    List<string> filesList = new List<string>();
    dialog = folderBrowserDialog1.ShowDialog();
    tbAddDir.Text = folderBrowserDialog1.SelectedPath;
    string pathToSearch = folderBrowserDialog1.SelectedPath;
    if (dialog == DialogResult.OK)
    {
        toolStripStatusLabel.Text = "Search for pcap files...";
        groupBoxRootDirectory.Enabled = false;
        btnStart.Enabled = false;                

        ThreadStart starter = delegate
        {
            list = SafeFileEnumerator.EnumerateFiles(pathToSearch, "*.pcap", SearchOption.AllDirectories).ToList();
        };

        Thread t = new Thread(starter);
        t.IsBackground = true;
        t.Start();

        if(list.Count != 0)
            AddFilesToListBox(list);
    }
} 
```

**SafeFileEnumerator 类代码：**

```
public static class SafeFileEnumerator
{
    public static IEnumerable<string> EnumerateDirectories(string parentDirectory, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var directories = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                directories = Directory.EnumerateDirectories(parentDirectory).SelectMany(x => EnumerateDirectories(x, searchPattern, searchOpt));
            }
            return directories.Concat(Directory.EnumerateDirectories(parentDirectory, searchPattern));
        }
        catch (UnauthorizedAccessException ex)
        {
            return Enumerable.Empty<string>();
        }
    }

    public static IEnumerable<string> EnumerateFiles(string path, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var dirFiles = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                dirFiles = Directory.EnumerateDirectories(path).SelectMany(x => EnumerateFiles(x, searchPattern, searchOpt));
            }

            return dirFiles.Concat(Directory.EnumerateFiles(path, searchPattern));
        }
        catch (UnauthorizedAccessException ex)
        {
            return Enumerable.Empty<string>();
        }
    }
} 
```

在我的列表充满文件之后：

```
private void AddFilesToListBox(List<string> filesList)
{
    string fileToAdd = string.Empty;
    Editcap editcap = new Editcap();
    Capinfos capinfos = new Capinfos();
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork +=
        (s1, e1) =>
        {
            foreach (string fileName in filesList)
            {
                FileInfo fileInfo = new FileInfo(fileName);
                if (checkFileCreationDate(fileInfo))
                {
                    if (editcap.isWiresharkFormat(fileInfo.FullName))
                    {
                        if (editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            addFileToListBox(fileInfo.FullName, capinfos.getFileDuration(fileInfo.FullName));
                        }
                        else if (!editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            fileToAdd = editcap.getNewFileName(fileInfo.FullName);

                            if (new FileInfo(fileToAdd).Exists && !fileInfo.Exists)
                            {
                                addFileToListBox(fileToAdd, capinfos.getFileDuration(fileInfo.FullName));
                            }
                        }
                    }
                }

                //this.Invoke((MethodInvoker)delegate { lvFiles.Items[lvFiles.Items.Count - 1].Selected = true; });
                toolStripStatusLabel.Text = string.Format("{0} files were added", lvFiles.Items.Count);
            }

            //this.Invoke((MethodInvoker)delegate { lvFiles.Items[lvFiles.Items.Count - 1].Selected = true; });
        };

    backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
    (s1, e1) =>
    {
        groupBoxRootDirectory.Enabled = true;
        btnClear.Enabled = true;
        if (lvFiles.Items.Count != 0)
            btnStart.Enabled = true;
        toolStripStatusLabel.Text = string.Format("{0} files were added", lvFiles.Items.Count);

        if (tbAddDir.Text != "")
        {
            listener = new FileListener();
            listener.startListener(tbAddDir.Text);
            listener._newFileEventHandler += listener_newFileEventHandler;
        }
    });

    backgroundWorker.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:04:20.950

> 在 t.start() 之后我调用 AddFilesToListBox(list);

您没有实现[异步模式](http://msdn.microsoft.com/en-us/library/jj152938.aspx)。

在`t.Start();`被调用之后，线程还没有完成它的工作，所以在你调用的时候你的列表仍然是空的`AddFilesToListBox`。实现异步模式并`AddFilesToListBox`在线程完成工作后调用。

# visual-studio-2010 - Windows Azure 项目未加载

> ID：14122148
> 
> 赞同：0
> 
> 时间：2013-01-02T12:34:50.153
> 
> 标签：visual-studio-2010, asp.net-mvc-2, azure

当我**在 Emulator 上运行 Azure Project**时，我遇到了下面提到的问题。

1.  下面提到的错误弹出窗口并不总是出现。

2.  时不时出现

3.  有时我的 Azure 项目会按预期加载，但有时不会

为什么 ？

**我的环境如下：**

1.  与 2010 年 SP 1

2.  MVC 2 项目

3.  适用于 Microsoft Visual Studio 2010 的 Windows Azure 工具 - 2012 年 10 月 v1.8.51019.1603

**错误如下图：**

![在此处输入图像描述](../Images/88a508b6b8afb570088e779050f51776.png)

**我的 Azure 项目如下：**

![在此处输入图像描述](../Images/8a6b0d674db8842157c45b287d5c222b.png)

**IISConfigurator 上的错误消息**

```
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:39.516] Started iisconfigurator with args /start
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:39.532] StartForeground selected. Check if an instance is already running
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:39.563] Starting service WAS
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:39.813] Starting service w3svc
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:39.828] Starting service apphostsvc
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:40.764] Setting registry key for cloud drive to path:C:\Users\sampath\AppData\Local\dftmp\wadd
IISConfigurator Information: 0 : [00005740:00000001, 2013/01/02 12:14:40.858] IISConfigurator is running
IISConfigurator Information: 0 : [00005740:00000006, 2013/01/02 12:14:40.998] Clean operation called over WCF interface with prefix 'deployment18('
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.64] Deploying sites from package path D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web.Azure\csx\Debug\roles\PawLoyalty.Web with given optional destination directory 
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.64] Using full IIS appdomain
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.687] Creating site named deployment18(2790).PawLoyalty.Web.Azure.PawLoyalty.Web_IN_0_Web for modelled site name Web
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.687] Deploying site named deployment18(2790).PawLoyalty.Web.Azure.PawLoyalty.Web_IN_0_Web
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.687] Using package path D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web\ which exists? True
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:11.687] Adding binding 127.255.0.0:82:www.pawloyalty.com to site deployment18(2790).PawLoyalty.Web.Azure.PawLoyalty.Web_IN_0_Web
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:12.545] Add access for appPool d3f7f918-51ee-4c8b-b113-18bdf8ff08c9 to runtime api instance deployment18(2790).PawLoyalty.Web.Azure.PawLoyalty.Web_IN_0 for SID 
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:12.794] Add access for appPool d3f7f918-51ee-4c8b-b113-18bdf8ff08c9 to site directory D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web\ for SID 
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:12.794] Adding access to users IUSR and NT AUTHORITY\NETWORK SERVICE to path D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web\
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.371] Added access to users IUSR and NT AUTHORITY\NETWORK SERVICE to path D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web\
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.371] Add access to NetworkService to web.config
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.387] Add access for appPool d3f7f918-51ee-4c8b-b113-18bdf8ff08c9 to cloud drive directory C:\Users\sampath\AppData\Local\dftmp\wadd for SID 
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.387] Deploy Complete
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.387] Add read access to runtime base dir
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.387] Adding access to IIS_IUSRS to D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web.Azure\csx\Debug\roles\PawLoyalty.Web\base
IISConfigurator Information: 0 : [00005740:00000007, 2013/01/02 12:15:13.917] Added access to IIS_IUSRS to physical path D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web.Azure\csx\Debug\roles\PawLoyalty.Web\base
IISConfigurator Information: 0 : [00005740:00000010, 2013/01/02 12:15:13.964] Wait for all sites to be setup in IIS
IISConfigurator Information: 0 : [00005740:00000010, 2013/01/02 12:15:14.151] All sites and app pools are ready, wait for sites complete. 
```

当我单击**PawLoyalty.Web.Azure -> 属性 -> Web**时，如下所示

![在此处输入图像描述](../Images/b2d14838a1ea3d2171f1e1159a374eaf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:47:54.230

启用 IISExpress 并重试。如果它不起作用，请检查评论中提到的日志。

# java - 用于存储 Java 应用程序中使用的少量数据的数据库

> ID：14122150
> 
> 赞同：0
> 
> 时间：2013-01-02T12:34:55.557
> 
> 标签：java, database

我正在用 java 开发客户端/服务器应用程序。
我需要存储所有用户的 ID、密码等以用于登录、文档共享和聊天目的。
我不想安装任何 DBMS，因为我只需要 1 或 2 个表，大约有一千个条目。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:36:37.883

为什么不使用JDK 附带的[JavaDb作为标准？](http://www.oracle.com/technetwork/java/javadb/index.html)您可以在 JVM 中运行它并持久保存到文件系统。它是一个 SQL 数据库，所以如果您熟悉 RDBMS，它应该很容易集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:36:46.017

您可以将数据写入服务器上的本地文件，然后从那里读取，但效率很低。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:38:02.593

查看[HSQLDB](http://hsqldb.org)或[H2 数据库](http://www.h2database.com/html/main.html)。两者都将满足您的需求

两者都具有丰富的 SQL 功能集，可以嵌入式或独立运行，并且内存占用很小。就个人而言，我更喜欢 HSQLDB 而不是 H2，但不是出于特定原因。

# ios - 以锚点为右端的 UIImageView 旋转

> ID：14122156
> 
> 赞同：0
> 
> 时间：2013-01-02T12:35:10.770
> 
> 标签：ios, uiimageview, rotation, uiviewanimation

在我的应用程序中，我需要在顺时针方向旋转 0-90（度）之间的图像，反之亦然。首先，我正在创建一个图像视图

```
self.needleImageView  = [[UIImageView alloc]initWithFrame:CGRectMake(300,155, 15,150)];
self.needleImageView.layer.anchorPoint = CGPointMake(0.5,1.0);// Shift the Needle center point to one of the end points of the needle image.
self.needleImageView.backgroundColor = [UIColor clearColor];
self.needleImageView.image = [UIImage imageNamed:@"Arrow.png"];
[self.view addSubview:self.needleImageView]; 
```

使用此代码，图像将沿垂直方向进入。要获得水平方向的图像，我正在应用 CGAffineTransformMakeRotation(-M_PI/2);

```
self.needleImageView.transform=CGAffineTransformMakeRotation(-M_PI/2); 
```

在此之后旋转图像，我使用以下动画代码 // 使用自动反转从 0-90 旋转，在完成动画以将图像保持在原始位置后，我已经完成了代码

```
 [UIView animateWithDuration: 0.8f
                      delay: 0.0f
                    options: (UIViewAnimationOptionAutoreverse)
                 animations: ^{
                     self.needleImageView.transform = CGAffineTransformRotate(self.needleImageView.transform,M_PI/2);
                 }
                 completion: ^(BOOL finished) {
                     self.needleImageView.transform = CGAffineTransformRotate(self.needleImageView.transform,-M_PI/2);
                 }]; 
```

当我运行此代码时，图像处于水平位置，一旦我单击动画按钮应用动画，图像旋转将从 270 度到 0 度开始，反之亦然..在动画图像定位在 270 度（垂直）之后

我希望图像仅在 0-90 度之间旋转。请运行此代码，以便您可以清楚地理解我的问题任何帮助请...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:44:42.273

这应该可以解决问题：

```
 self.needleImageView1.transform = CGAffineTransformIdentity
 //now animation 
```

请注意，如果你有`UIViewAnimationOptionAutoreverse`那么`no use`for `completion block`。

# java - 将 int 映射到布尔值

> ID：14122157
> 
> 赞同：1
> 
> 时间：2013-01-02T12:35:12.017
> 
> 标签：java, dozer

Dozer(v. 5.3.2) 可以将 int 类型映射到 Boolean(Wrapper) 类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:39:18.583

通过粗略阅读文档，您可以通过 custom 将几乎任何东西映射到任何东西`BeanMapping`，所以......“是的”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:48:03.563

```
 public class NewDozerConverter 
    extends DozerConverter<Integer, Boolean> {

  public NewDozerConverter() {
    super(Integer.class, Boolean.class);
  }

  public Boolean convertTo(Integer source, Boolean destination) {
    if (source > 1) {
      return Boolean.TRUE;
    } else if (source < 0) {
      return Boolean.FALSE;
    }
    throw new IllegalStateException("Unknown value!");
  }

  public Integer convertFrom(Boolean source, Integer destination) {
    if (Boolean.TRUE.equals(source)) {
      return 1;
    } else if (Boolean.FALSE.equals(source)) {
      return 0;
    }
    throw new IllegalStateException("Unknown value!");
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:41:29.330

是的....您可以将 int 类型映射到 Boolean 或任何其他数据类型。对于这种映射，您需要[自定义转换器](http://dozer.sourceforge.net/documentation/customconverter.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-19T10:08:31.920

如果您只需要将 0 和 1 分别映射为 false 和 true，则 Dozer 开箱即用即可处理。如果要将 0 映射为 false 并将任何其他值映射为 true，则需要[自定义转换器](http://dozer.sourceforge.net/documentation/customconverter.html)。

# c - 从符号表中读取变量的类型、地址、大小。它是使用 gnu 工具（如 gmake 或 gcc）构建的

> ID：14122159
> 
> 赞同：0
> 
> 时间：2013-01-02T12:35:33.537
> 
> 标签：c, linux, linux-kernel, gdb, centos

我们正在尝试为特定环境实现定制的 gdb 工具。我们有 Linux-Centos 操作系统。

尝试通过一些自定义来实现 gdb 功能。我们的工具将附加到 PID（已经运行的进程），它将开始调试会话。我们想读取符号信息（符号表）并打印尽可能多的符号信息（主要是数据类型、地址和大小）。

我们可以在 gdb 中使用 readelf、file 命令读取符号表，并且可以打印一些与局部/全局变量相关的信息。但是我们无法找到打印变量地址和大小的确切命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:40:14.337

您可以在 gdb 的表达式中使用**ptype**命令和**sizeof ：**

```
(gdb) ptype exit
type = int ()
(gdb) print sizeof(argc)
$1 = 4 
```

这当然需要 debuginfo 而不仅仅是符号表可用，例如对于 ELF，这需要**.debug_{aranges,info,abbrev,...}**部分而不仅仅是**.shstrtab**、**.symtab**和**.strtab**。

# android - 在列表视图中单击更新两个表并传递更新参数

> ID：14122162
> 
> 赞同：0
> 
> 时间：2013-01-02T12:35:43.700
> 
> 标签：android, sqlite, android-listview, android-activity, onitemclicklistener

固特异给大家。

好吧，这就是问题所在，我想了解列表视图的逻辑，以及如何检索其中单击的项目的信息。

我已经完成并定制了一堆教程来做这个应用程序，现在我试图弄清楚我在这个丑陋和肮脏的代码中做了什么。

我有一个活动，它列出了一系列问题，在您选择一个类别后，选择一个问题，将您带到下一个活动，其中列出了一些答案，用户可以选择一个。我只想列出用户必须回答的那些问题，而不是全部，所以我在类别表中添加了一个名为“fatta”的新列 - 英文中的“done”，我想在何时更改为 1用户单击该问题的答案。

所以这个想法是传递问题的 id，所以在我列出所有答案的活动中，我可以更新答案和问题表，将“完成字段”设置为 1。

但出了点问题。这是代码：

**活动：**

```
public class sondaggioActivity extends ListActivity{
    private static final String strdomanda = null;
    private pollDataSource datasource;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maindomanda);

        long domanda = getIntent().getExtras().getLong("domanda"); 
        TextView text = (TextView) findViewById(R.id.domanda);
        String strdomanda = Long.toString(domanda);
    //   text.setText(strcategory);

        datasource = new pollDataSource(this);
        datasource.open();

        Cursor values = datasource.getTestoRisposte(strdomanda);
    // data?    if (values.moveToFirst()) 

    //       System.out.println(values.getString(values.getColumnIndex("sondid"))); 

        String[] categorieColumns =
            {
                MySQLiteHelper.COLUMN_RISPOSTA   // Contract class constant containing the word column name

            };

            int[] mWordListItems = { R.id.categoria_label };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                getApplicationContext(),               // The application's Context object
                R.layout.single_list_item,             // A layout in XML for one row in the ListView
                values,                                // The result from the query
                categorieColumns,                      // A string array of column names in the cursor
                mWordListItems,                        // An integer array of view IDs in the row layout
                0);                                    // Flags (usually none are needed)

       setListAdapter(adapter);
    //values.close(); 
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

    datasource.setRispostaSelezionata(Long.toString(id));

    datasource.setDomandaFatta(strdomanda);
    datasource.close();

    finish();

    }

} 
```

正如您在最后看到的那样`onListItemClick`，我使用`strdomanda`我在顶部定义`private static final String strdomanda = null;`的**数据源是这样**的：

```
public class pollDataSource {
    // Database fields
      private SQLiteDatabase database;
      private MySQLiteHelper dbHelper;
      private String[] allCategorieColumns = { MySQLiteHelper.COLUMN_ID,
          MySQLiteHelper.COLUMN_PREF, MySQLiteHelper.COLUMN_NOME };   
      private String[] allSondaggiColumns = { MySQLiteHelper.COLUMN_ID,
              MySQLiteHelper.COLUMN_CATID,MySQLiteHelper.COLUMN_WEBID,MySQLiteHelper.COLUMN_FATTA, MySQLiteHelper.COLUMN_DOMANDA };   
      private String[] allRisposteColumns = { MySQLiteHelper.COLUMN_ID, 
              MySQLiteHelper.COLUMN_SONDID,MySQLiteHelper.COLUMN_WEBID, MySQLiteHelper.COLUMN_RISPOSTA, 
              MySQLiteHelper.COLUMN_SELEZIONATA };

      public pollDataSource(Context context) {
            dbHelper = new MySQLiteHelper(context);
          }

      public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

      public void close() {
            dbHelper.close();
          }

      public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 

      public void deleteCategoria(categorie categoria) {
            long id = categoria.getId();
            System.out.println("Categoria cancellata, id: " + id);
            database.delete(MySQLiteHelper.TABLE_CATEGORIE, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          }

      public sondaggi createSondaggio(String domanda, int catid, int webid) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_DOMANDA, domanda);
            values.put(MySQLiteHelper.COLUMN_CATID, catid);
            values.put(MySQLiteHelper.COLUMN_WEBID, webid);
            values.put(MySQLiteHelper.COLUMN_FATTA, "0");
            long insertId = database.insert(MySQLiteHelper.TABLE_SONDAGGI, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            sondaggi newSondaggio = cursorToSondaggi(cursor);
            cursor.close();
            return newSondaggio;
          }

      public void deleteSondaggio(sondaggi sondaggio) {
            long id = sondaggio.getId();
            System.out.println("Sondaggio cancellato, id: " + id);
            database.delete(MySQLiteHelper.TABLE_SONDAGGI, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          } 

      public Cursor getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
           // cursor.close();
            return cursor;
          }

      public Cursor getDomanda(String id) {
            List<sondaggi> domande = new ArrayList<sondaggi>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                    allSondaggiColumns,
                    MySQLiteHelper.COLUMN_ID + "=?",
                    new String[] { id }, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              sondaggi sondaggio = cursorToSondaggi(cursor);
              domande.add(sondaggio);
              cursor.moveToNext();
            }

            return cursor;
          }

      private categorie cursorToCategorie(Cursor cursor) {
          categorie categorie = new categorie();
          categorie.setId(cursor.getLong(0));
          categorie.setPreferita(cursor.getLong(1));
          categorie.setNome(cursor.getString(2));
            return categorie;
          }

      private sondaggi cursorToSondaggi(Cursor cursor) {
          sondaggi sondaggi = new sondaggi();
          sondaggi.setId(cursor.getLong(0));
          sondaggi.setDomanda(cursor.getString(1));
          sondaggi.setCatid(cursor.getLong(2));
          sondaggi.setwebid(cursor.getLong(3));
          return sondaggi;
          }

    public Cursor getAllDomandeCategoria(String catid) {
        List<sondaggi> domande = new ArrayList<sondaggi>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns,
                MySQLiteHelper.COLUMN_CATID + "=?",
                new String[] { catid }, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
          sondaggi sondaggio = cursorToSondaggi(cursor);
          domande.add(sondaggio);
          cursor.moveToNext();
        }

        return cursor;
    }

    public Cursor getTestoRisposte(String strdomanda) {

        List<testo_risposte> domande = new ArrayList<testo_risposte>();    
        Cursor cursor = database.query(MySQLiteHelper.TABLE_TESTORISPOSTE,
                allRisposteColumns,
                MySQLiteHelper.COLUMN_SONDID + "=?",
                new String[] { strdomanda }, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
         testo_risposte sondaggio = cursorToTestoRisposte(cursor);
          domande.add(sondaggio);
          cursor.moveToNext();
        }

        return cursor;
    }

    private testo_risposte cursorToTestoRisposte(Cursor cursor) {
        testo_risposte testo_risposte = new testo_risposte();
        testo_risposte.setId(cursor.getLong(0));
        testo_risposte.setCatid(cursor.getLong(1));
        testo_risposte.setWebid(cursor.getLong(4));
        testo_risposte.Setselezionata(cursor.getLong(2));
        testo_risposte.setDomanda(cursor.getString(3));
     return testo_risposte;
    }

    public void setRispostaSelezionata(String id) {     
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_SELEZIONATA, "1");
        database.update(MySQLiteHelper.TABLE_TESTORISPOSTE,values,MySQLiteHelper.COLUMN_ID + "=?", new String[] { id });    
    }

    public void setDomandaFatta(String strdomanda) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_FATTA, "1");
        database.update(MySQLiteHelper.TABLE_SONDAGGI,values,MySQLiteHelper.COLUMN_ID + "=?", new String[] { strdomanda });

    }

} 
```

但是当我运行活动时，只有第一个更新很好，另一个，我想“停用”问题的那个......什么都不做......我想我通过 strdomanda 的方式不是好方法。有什么帮助吗？建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:03:34.480

已解决：我弄错了这一行：

```
private static String strdomanda = null; 
```

我已经删除了该`Final`属性，并且我已经删除了同一变量的另一个声明......现在它可以工作了。

# ios - Cocos2d 游戏无法在某些设备上启动

> ID：14122163
> 
> 赞同：0
> 
> 时间：2013-01-02T12:35:49.023
> 
> 标签：ios, ipad, crash, cocos2d-iphone

我发布了一款基于 Cocos2d 框架开发的 iPad 游戏。我已经在许多设备 iPad 3 和 iPad 2 上测试了游戏，从未遇到任何问题。

现在我收到了一些报告，称它在某些设备上无法正常启动。人们说他们看到的是 default.png 图像，然后应用程序正在关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:49:21.190

没有崩溃报告，这只是一个猜谜游戏。

一定要尝试重现您身边的问题。

可能出现的问题：

```
1\. If the app takes too long to launch it will be closed by iOS. 
2\. If it does not have enough memory it will not launch as well. 
```

尝试以下操作：

```
I. Open many other heavy apps in the background so there is not much memory.
See how it affects your app launch. 

II. During launch try to use as many fast taps as possible and fast gestures. 
There is possibility that very early taps are not serviced properly or at all  
and that can cause the crash.

III. Test on many devices as you can - especially low end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:40:29.873

我发现了这个问题，这与在不可用的旧设备上运行的社交框架有关。

# php - PHP preg_match 获取最后一项

> ID：14122169
> 
> 赞同：3
> 
> 时间：2013-01-02T12:36:16.243
> 
> 标签：php, preg-match

我有一个带有项目列表的 PHP 字符串，我想得到最后一个。

现实要复杂得多，但归结为：

```
$Line = 'First|Second|Third';
if ( preg_match( '@^.*|(?P<last>.+)$@', $Line, $Matches ) > 0 )
{
    print_r($Matches);
} 
```

我希望`Matches['last']`包含“第三”，但它不起作用。相反，我让 Matches[0] 包含完整的字符串，仅此而已。我究竟做错了什么？

请不要解决方法，我可以自己做，但我真的很想和 preg_match 一起工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:42:25.227

你有这个：

```
'@^.*|(?P<last>.+)$@'
     ^ 
```

...但我想您正在寻找*文字* `|`：

```
'@^.*\|(?P<last>.+)$@'
     ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:42:34.813

如果您的语法总是有点相同，我的意思是使用`|`as 分隔符，如果您喜欢，您可以执行以下操作。

```
$Line = 'First|Second|Third' ;
$line_array = explode('|', $Line);
$line_count = count($line_array) - 1;

echo $line_array[$line_count]; 
```

或者

```
$Line = 'First|Second|Third' ;
$line_array = explode('|', $Line);
end($line_array);

echo $line_array[key($line_array)]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:43:07.677

只需使用：

```
 $Line = 'First|Second|Third' ;
   $lastword = explode('|', $line);
    echo $lastword['2']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T19:28:18.307

**获取最后一场比赛的 PHP preg_match 示例：**

```
<?php
  $mystring = "stuff://sometext/2010-01-01/foobar/2016-12-12.csv";
  preg_match_all('/\d{4}\-\d{2}\-\d{2}/', $mystring, $matches);
  print_r($matches);
  print("\nlast match: \n");
  print_r($matches[0][count($matches[0])-1]);
  print("\n");
?> 
```

**打印返回的整个对象和最后一个匹配项：**

```
Array
(
    [0] => Array
        (
            [0] => 2010-01-01
            [1] => 2016-12-12
        )

)

last match: 
2016-12-12 
```

# android - 缺少 Android 布局编辑器

> ID：14122172
> 
> 赞同：1
> 
> 时间：2013-01-02T12:36:29.033
> 
> 标签：android

我现在尝试在 Eclipse 中打开我的布局 xml 文件。我只得到错误

```
No XML content. Please add a root view or layout to your document. 
```

想知道为什么这是个问题，我的 xml 文件是正确的，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget32"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#e4e8ed">

    <Logic.TouchImageView
        android:id="@+id/right_finger"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

我试图右键单击 .xml 文件，然后使用 .xml 打开它`Android Layout Editor`，但在我的列表中找不到这个编辑器。我还尝试从“文件关联”下的“首选项”菜单中添加它，但此处未显示编辑器。唯一与 android 相关的 xml 编辑器是：

*   Android 二进制 XML 编辑器
*   Android 通用 XML 编辑器
*   Android 导出编辑器
*   Android 清单编辑器

有人知道为什么会这样吗？布局编辑器的bug太多了，如果google不更新的话我觉得这个工具很难用。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:39:21.267

尝试通过SDK管理器更新android工具，我曾经遇到过这个问题，更新到最新版本已修复

# mysql - 如何在 Delphi 7 中将 FastReport 与 MySQL 5.5 连接？

> ID：14122173
> 
> 赞同：0
> 
> 时间：2013-01-02T12:36:32.040
> 
> 标签：mysql, delphi, delphi-7, fastreport

我使用 Zeos 将 MySQL 5.5 连接到我的 Delphi 应用程序，这就是为什么这个 MySQL 版本无法使用其本机驱动程序正确连接到 Delphi 7。

我只是无法使用这个驱动程序（Delphi 的本机驱动程序）连接到 MySQL，因为我在 Delphi 7 中也不能。

我想知道连接它的解决方案，当然，使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:35:02.407

显然，Delphi 7 的原生 Borland dbExpress 驱动程序只支持真正古老的 MySQL 版本。但是，在 Google 上搜索[*mysql 5 delphi driver*](http://www.google.com/search?q=mysql+5+delphi+driver)会发现几个第三方驱动程序，例如[Just Software Solutions 的 dbxOpenMySQL5 驱动程序](http://www.justsoftwaresolutions.co.uk/delphi/dbexpress_and_mysql_5.html)。它是为 MySQL v5.0 编写的，但我认为至少值得尝试使用 v5.5。

[Devart](http://www.devart.com/dbx/mysql/)还有一个商业 MySQL dbExpress 驱动程序，它被明确[记录](http://www.devart.com/dbx/mysql/compatibility.html)为支持 MySQL 5.5 和 Delphi 7。

# java - 如何使用java从谷歌应用引擎下载上传的blob文件

> ID：14122178
> 
> 赞同：0
> 
> 时间：2013-01-02T12:36:58.067
> 
> 标签：java, google-app-engine

我已经上传了一个文件作为 blob 存储，并从本指南[Uploading file to Google App engine](https://developers.google.com/appengine/docs/java/blobstore/overview#Complete_Sample_App)存储在 Google 应用引擎中。现在我试图显示文件名，当用户点击文件时，相应的文件将被下载。我不知道如何像我最初上传的那样下载 blob 文件。我试过了，

```
 Query query = new Query("__BlobInfo__");
 query.addFilter("filename", Query.FilterOperator.EQUAL, req.getParameter("name"));
 DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
 PreparedQuery pq = datastore.prepare(query);
 List<Entity> entList = pq.asList(FetchOptions.Builder.withLimit(1));
 if (entList.size() > 0) {
 BlobKey blobKey = new BlobKey(entList.get(0).getKey().getName());
 BlobInfoFactory bi = new BlobInfoFactory();
 String fname = bi.loadBlobInfo(blobKey).getFilename();
 if (fname.contains(".mp3") || fname.contains(".aac")) {
 res.setContentType("application/octet-stream");
 res.setHeader("Content-Type", "save as filename=" + fname); 
```

但不知道如何处理上面的代码。请给我一个想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:26:18.327

参见 BlobstoreService 的函数[serve](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#serve%28com.google.appengine.api.blobstore.BlobKey,%20HttpServletResponse%29)。概述还有一个用于[服务 blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)的部分。

# android - Android中带有复选框的对话框

> ID：14122183
> 
> 赞同：0
> 
> 时间：2013-01-02T12:37:11.253
> 
> 标签：android

我找到了带有复选框的对话框示例：

```
final int DIALOG_ITEMS = 1;
    String data[] = { "one", "two", "three", "four" };
    @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            Button but1=(Button) findViewById(R.id.button1);
            but1.setOnClickListener(new OnClickListener() 
            {
                @Override
                public void onClick(View arg0) 
                {
                     showDialog(DIALOG_ITEMS);
                }
            }); 
        }

        protected Dialog onCreateDialog(int id) {
            AlertDialog.Builder adb = new AlertDialog.Builder(this);

              adb.setTitle(R.string.items);
              adb.setSingleChoiceItems(data, -1, myClickListener);

          }

          OnClickListener myClickListener = new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
              ListView lv = ((AlertDialog) dialog).getListView();
              if (which == Dialog.BUTTON_POSITIVE)
                Log.d(LOG_TAG, "pos = " + lv.getCheckedItemPosition());
              else
                Log.d(LOG_TAG, "which = " + which);
            }
          }; 
```

Eclipse 注意两个错误：

> 1) AlertDialog.Builder 类型中的 setSingleChoiceItems(int, int, DialogInterface.OnClickListener) 不适用于参数 (String[], int, View.OnClickListener) MainActivity.java /master/src/com/example/hotdog_master 第 98 行Java 问题
> 
> 2）View.OnClickListener(){}必须实现继承的抽象方法View.OnClickListener.onClick(View) MainActivity.java /master/src/com/example/hotdog_master line 104 Java问题

你能帮助理解什么是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:41:09.287

将您的 OnClickListener 更改为：

```
 DialogInterface.OnClickListener myClickListener = new 
                                   DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
              ListView lv = ((AlertDialog) dialog).getListView();
              if (which == Dialog.BUTTON_POSITIVE)
                Log.d(LOG_TAG, "pos = " + lv.getCheckedItemPosition());
              else
                Log.d(LOG_TAG, "which = " + which);
            }
          }; 
```

并将`AlertDialog.Builder` 实例创建为：

```
AlertDialog.Builder adb = new AlertDialog.Builder(Your_Current_Activity.this); 
```

**编辑 ：**

将您的方法更改`onCreateDialog`为：

```
protected Dialog onCreateDialog(int id) {
    AlertDialog.Builder adb = new AlertDialog.Builder(MainActivity.this);

      adb.setTitle(R.string.items);
      adb.setSingleChoiceItems(data, -1, myClickListener);

       AlertDialog dialog = builder.create();
       dialog.show();
      return super.onCreateDialog(id);  //<<<< add return here

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:40:27.057

将上面的代码更改如下：

```
DialogInterface.OnClickListener myClickListener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
              ListView lv = ((AlertDialog) dialog).getListView();
              if (which == Dialog.BUTTON_POSITIVE)
                Log.d(LOG_TAG, "pos = " + lv.getCheckedItemPosition());
              else
                Log.d(LOG_TAG, "which = " + which);
            }
          }; 
```

您已经为 Button Click 导入了 View.OnClickListener，并且 eclipse 也将下面的 onClickListener 检测为 View.onClickListener()。所以通过添加 DialogInterface.OnClickListener 来保持差异化

# forms - 如何在整数字段类型中禁用舍入模式？

> ID：14122184
> 
> 赞同：2
> 
> 时间：2013-01-02T12:37:11.517
> 
> 标签：forms, symfony, integer

有没有办法在 Symfony2.0 的整数字段类型中禁用舍入模式？插入浮点数时，我需要得到一个错误，而不是一个四舍五入的整数。

# java - 如何使用 Java 使用 Selenium 运行 ghostdriver

> ID：14122185
> 
> 赞同：10
> 
> 时间：2013-01-02T12:37:12.080
> 
> 标签：java, selenium-webdriver, webdriver, phantomjs, ghostdriver

我想`phantomJS`用于一些网络测试，我遇到过`GhostDriver`（[https://github.com/detro/ghostdriver](https://github.com/detro/ghostdriver)）。我已经使用自述文件中的说明构建了它，并且可以在指定的端口上运行它，但是我不确定如何从我的 java 代码中访问 Web 驱动程序。为了澄清，我在 ruby​​ 中看到了这个例子：

```
 caps = {
  :browserName => "phantomjs",
  :platform => "LINUX"
   }

urlhub = "http://key:secret@hub.testingbot.com:4444/wd/hub"

client = Selenium::WebDriver::Remote::Http::Default.new
client.timeout = 120

@webdriver = Selenium::WebDriver.for :remote, :url => urlhub, :desired_capabilities => caps, :http_client => client
@webdriver.navigate.to "http://www.google.com/"
puts @webdriver.title
@webdriver.save_screenshot("./screenshot.png")
@webdriver.quit 
```

我只是不确定如何从 java 做同样的事情。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T10:44:22.820

只是为了澄清其他可能会看到这一点的人，从 java 运行它：

```
DesiredCapabilities caps = new DesiredCapabilities();
caps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY,
                "/Path/to/bin/phantomjs");                  
driver = new PhantomJSDriver(caps); 
```

然后它可以像通常的 WebDriver 一样使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T00:08:44.063

我相信这个链接会回答你的问题。您将需要 Selenium 2.28.0 和 PhantomJS 1.8。我已经对此进行了测试，它的工作原理与宣传的一样，尽管我的测试是先行的。请注意，您需要下载 Selenium zip 文件以获取包含绑定的 jar。Maven 存储库尚未包含它。

[http://ivandemarino.me/2012/12/04/Finally-GhostDriver-1-0-0/](http://ivandemarino.me/2012/12/04/Finally-GhostDriver-1-0-0/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-21T09:37:21.563

首先下载PhantomJSDriver的exe文件。不需要安装，只需从[http://phantomjs.org/download.html](http://phantomjs.org/download.html)下载这个文件，并在给定的代码中简单地给出 exe 文件的路径。

```
 public class Browserlaunch {
    public static void main(String[] args) {
        DesiredCapabilities DesireCaps = new DesiredCapabilities();
        DesireCaps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY, "C:/Drivers/phantomjs/bin/phantomjs.exe");
        WebDriver driver=new PhantomJSDriver(DesireCaps);
        driver.get("http://google.com");

   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-02T14:28:49.260

只设置系统属性：

```
System.setProperty("phantomjs.binary.path", "lib/phantomjs.exe");
WebDriver driver = new PhantomJSDriver(); 
```

# android - 如何使用 Selenium android 驱动程序检查 android 设备/模拟器中的对象属性以进行自动化测试？

> ID：14122194
> 
> 赞同：1
> 
> 时间：2013-01-02T12:38:02.733
> 
> 标签：android, android-emulator, firebug, selenium-webdriver

我们有一个仅在移动设备的默认浏览器中打开的移动 Web 应用程序。因此很难获得使用 selenium android 驱动程序进行自动化测试的对象的属性 [ID/Class/Xpath..]。目前我正在做一种相反的方式来收集页面中对象的所有属性。但这是非常乏味的。是否有任何其他实用程序可以像 firefox 中的 firebug 一样获取元素的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:10:03.803

我已经开始使用 xpath 查看器来运行 chrome，效果很好

它允许您查看页面上任何元素的 xpath 和 css 路径。

我相信其他浏览器也有很多类似的插件。

例如[XPath Checker](https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/)，它允许您查看 xpath

[FireFinder](http://robertnyman.com/2009/05/12/firefinder-for-firebug-an-extension-to-quickly-find-elements-matching-your-css-selectors-or-xpath-expressions/)还允许您查找 xpaths 和 css 路径..

我个人建议css选择器会更好，它们会不那么脆弱。

# python - 嵌套函数比 Python 中的全局函数快吗？

> ID：14122195
> 
> 赞同：7
> 
> 时间：2013-01-02T12:38:06.887
> 
> 标签：python, performance-testing, nested-function

我更喜欢在 Python 中尽可能使用嵌套函数而不是方法或全局函数。所以我决定测试它们的性能，因为它接缝当你在另一个函数中定义一个函数时，每次调用外部函数时定义内部函数都会产生开销。

充其量我希望全局函数稍微快一点，但令人惊讶的是嵌套函数更快。有谁知道为什么？

这是我的代码：

```
from time import clock

def a(n):
    return n + 1

def b1(loopcount):
    return sum([a(n) for n in range(loopcount)])

def b2(loopcount):
    def a(n):
        return n + 1
    return sum([a(n) for n in range(loopcount)])

powers = [5, 6, 7]
b1times = []
b2times = []
print "   ", "".join(["{:^10d}".format(n) for n in powers])    
for i in range(5):
    for power in powers:
        t = clock()
        b1(10**power)
        b1times.append(clock() - t)
    for power in powers:
        t = clock()
        b2(10**power)
        b2times.append(clock() - t)
    print "b1:", "".join(["{:^10.5f}".format(n) for n in b1times])
    print "b2:", "".join(["{:^10.5f}".format(n) for n in b2times])
    print ""
    b1times = []
    b2times = [] 
```

这是我电脑上的结果：

```
 5         6         7
b1:  0.08200   0.82773   8.47946
b2:  0.06914   0.79637   8.18571

b1:  0.07332   0.82139   8.68262
b2:  0.06547   0.82088   8.19606

b1:  0.07963   0.82625   9.65037
b2:  0.06617   0.82027   8.21412

b1:  0.07630   0.82112   8.49082
b2:  0.06541   0.80686   8.20532

b1:  0.12328   0.87034   8.42964
b2:  0.07059   0.79717   8.24620 
```

**更新：**使用@Janne Karila 的评论

现在我更多地调用 b1 和 b2，b1 变得更快。所以正如@Kos 和@Pavel Anossov 在他们的回答中所说，有几个因素会影响这里的速度，你不能做出一般性的陈述。
谢谢大家！

```
from time import *

def a1(n):
    return n + 1

def b1(n):
    return a1(n)

def b2(n):
    def a2():
        return n + 1
    return a2()

powers = [4, 5, 6]
b1times = []
b2times = []
print "   ", "".join(["{:^10d}".format(n) for n in powers])    
for i in range(5):
    for power in powers:
        t = clock()
        sum([b1(n) for n in range(10**power)])
        b1times.append(clock() - t)
    for power in powers:
        t = clock()
        sum([b2(n) for n in range(10**power)])
        b2times.append(clock() - t)
    print "b1:", "".join(["{:^10.5f}".format(n) for n in b1times])
    print "b2:", "".join(["{:^10.5f}".format(n) for n in b2times])
    print ""
    b1times = []
    b2times = [] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T12:47:07.693

这里有几个部分有影响：

1）定义函数（创建函数对象）
的时间，2）按名称查找函数对象
的时间，3）实际调用函数的时间。

您的全局函数示例使用*1)*更快（无需`a`在每次调用中重新定义`b1`）。但是，在*2)*中速度较慢，因为全局变量查找比本地查找慢。

那我们为什么不能两者兼得？

我已经使用使用全局函数的解决方案[扩展了您的基准测试](http://ideone.com/SHMETg)，但避免使用局部变量进行全局查找。它似乎是我机器上三个中最快的：

```
 5         6         7
b1:  0.04147   0.44421   4.46508
b2:  0.03399   0.43321   4.41121
b3:  0.03258   0.41821   4.25542

b1:  0.03240   0.42998   4.39774
b2:  0.03320   0.43465   4.42229
b3:  0.03155   0.42109   4.23669

b1:  0.03273   0.43321   4.37266
b2:  0.03326   0.43551   4.42208
b3:  0.03137   0.42356   4.25341

b1:  0.03253   0.43104   4.40466
b2:  0.03401   0.43719   4.42996
b3:  0.03155   0.41681   4.24132

b1:  0.03244   0.42965   4.37192
b2:  0.03310   0.43629   4.42727
b3:  0.03117   0.41701   4.23932 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-02T12:46:30.247

LOAD_GLOBAL 比 LOAD_FAST 慢得多。

# b1

```
 5           0 LOAD_GLOBAL              0 (sum)
              3 BUILD_LIST               0
              6 LOAD_GLOBAL              1 (range)
              9 LOAD_FAST                0 (loopcount)
             12 CALL_FUNCTION            1
             15 GET_ITER
        >>   16 FOR_ITER                18 (to 37)
             19 STORE_FAST               1 (n)
             22 LOAD_GLOBAL              2 (a)
             25 LOAD_FAST                1 (n)
             28 CALL_FUNCTION            1
             31 LIST_APPEND              2
             34 JUMP_ABSOLUTE           16
        >>   37 CALL_FUNCTION            1
             40 RETURN_VALUE 
```

# b2

```
 8           0 LOAD_CONST               1 (<code object a at 01E57A40, ...>)
              3 MAKE_FUNCTION            0
              6 STORE_FAST               1 (a)

 10           9 LOAD_GLOBAL              0 (sum)
             12 BUILD_LIST               0
             15 LOAD_GLOBAL              1 (range)
             18 LOAD_FAST                0 (loopcount)
             21 CALL_FUNCTION            1
             24 GET_ITER
        >>   25 FOR_ITER                18 (to 46)
             28 STORE_FAST               2 (n)
             31 LOAD_FAST                1 (a)
             34 LOAD_FAST                2 (n)
             37 CALL_FUNCTION            1
             40 LIST_APPEND              2
             43 JUMP_ABSOLUTE           25
        >>   46 CALL_FUNCTION            1
             49 RETURN_VALUE 
```

每次创建函数的差异是否弥补取决于函数（以及您使用 LOAD_GLOBAL 的次数）。

创建对全局函数的局部引用以在内部循环中使用是一种相对常见的优化：

```
def a(n):
    return n + 1

def b1(loopcount):
    local_a = a
    return sum([local_a(n) for n in range(loopcount)]) 
```

这应该仍然比查找全局函数更快，并且比嵌套函数更易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:39:00.783

一般来说，不，因为每次运行外部函数时，都必须重新定义内部函数。

也就是说，性能真的无关紧要，除非你能证明它确实如此（例如，一个特定的循环太慢并导致性能问题） - 所以我建议使用最易读的东西 - 过早的优化是一件坏事。

也就是说，我认为全局函数可能是一个更好的解决方案，因为它们更容易在你的代码中重用，而且我会说更具可读性——毕竟，*flat 比 nested 更好*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:57:39.767

我认为这是由python中搜索对象定义的顺序引起的。

每当解释器遇到一个对象名时，它会首先搜索本地对象定义字典，该字典记录了对象名和对象本身的映射关系。如果在本地字典中找不到，则为全局字典，然后是内置字典。

而且，python 中的所有东西都是对象，包括函数。

# c# - 从 mysql 更新组合框中的值

> ID：14122199
> 
> 赞同：0
> 
> 时间：2013-01-02T12:38:19.400
> 
> 标签：c#, mysql, datagridview, combobox

我的 datagridview 中有一个`ComboBoxColumn`，绑定到它们的数据来自另一个表。数据可以随时更新，因此我想在`ComboBoxColumn`从另一个表添加/更新数据时自动更新数据。

我试过使用 -

```
ScripterCombo.DataSource = updatedUserList; 
```

`updatedUserList`是我要应用到的数据列表`ComboBoxColumn`，我已经设置`DataSource`了`ComboBoxColumn`。不幸的是`ComboBoxColumn`永远不会更新。我需要重新加载整个应用程序以查看更改。

更新 -

对不起，我没有使用列表来存储数据，我使用的是字符串数组。基本上我连接到后端服务器并遍历“用户”列中的所有名称：

```
MySqlConnection(Constants.serverInfo))
            {
                getNumberOfUsers.Open();

                using (MySqlCommand requestCommand = new MySqlCommand("SELECT COUNT(*) FROM userlist", getNumberOfUsers))
                {
                    MySqlDataReader userReader = requestCommand.ExecuteReader();

                    while (userReader.Read())
                    {
                        iNumberOfUsers = userReader.GetInt32(0);               // Pull the number of Owners from the backend.
                        strListOfUsers = new string[iNumberOfUsers];          // Make sure the owner list can hold the value pulled from the backend. 
                    }
                    userReader.Close();
                }
                getNumberOfUsers.Close();
            }

            // Get the names of the users 
            using (MySqlConnection getUsersNames = new MySqlConnection(Constants.serverInfo))
            {
                getUsersNames.Open();

                using (MySqlCommand requestCommand = new MySqlCommand("SELECT username FROM userlist", getUsersNames))
                {
                    MySqlDataReader userReader = requestCommand.ExecuteReader();

                    for (int i = 0; i < iNumberOfUsers; i++)
                    {
                        while (userReader.Read())
                        {
                            strListOfUsers[i] = userReader.GetString(0); ;                  // Add the user to the list of users. 
                            i++;                                                
                        }
                    }
                    userReader.Close();
}
getUsersNames.Close();
} 
```

我有另一个类，它从不同的表中获取数据并将其显示在 datagridview 中。然后，我将用户数组提供给上述类，并创建一个显示所有用户名的 datagridcombobox 列。这按预期工作，因为它显示用户列表，然后在用户更改时更新主表。

但是，如果我将用户添加到列表中，我再次调用上面的代码以获取更新的列表，然后使用此列表将列表提供给组合框列 -

```
 ScripterCombo.DataSource = updatedUserList; 
```

不幸的是，这不会更新组合框，但是当我在运行它后检查 DataSource 时，它​​会显示新添加的用户。它只是不想显示它。

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:41:40.163

尝试添加`ToList()`

```
ScripterCombo.DataSource = updatedUserList.ToList(); 
```

# php - 微调超时的similar_percent查询

> ID：14122208
> 
> 赞同：0
> 
> 时间：2013-01-02T12:39:03.467
> 
> 标签：php, similarity

我正在寻找一种更有效的方法来比较值。

这就是我正在做的事情。我解析日志并将值存储在数据库中，每个值大约为 500 个字符。它的基本作用是将错误存储在日志中，因此当我阅读下一封电子邮件时，我会检查错误是否与之前的任何错误相同。如果是我将它们组合在一起。

所以每次我遇到一个独特的错误时，它都会存储在错误表中。每阅读一封新电子邮件，我都会提取错误的 500 个字符，比较它以查看它是否相同或接近（通常为 95%），如果是相同的错误，它会将`email_id`和存储`error id`在一个名为 的链接表中`error_link`。我还在电子邮件表中存储了更多详细信息，但这并不重要。

所以假设我有 5 封电子邮件

电子邮件 1 是`error1`
电子邮件 2 是`error2`
电子邮件 3 是`error1`
电子邮件 4 是`error3`
电子邮件 5 是`error2`

在第一个循环中，它将添加`error 1`到错误表中。

电子邮件 1：在我设置的错误表中`error_id=1`，`error_text="error1"`。在`error_link`我设置的表中`email_id=1`，`error_id=1`。

电子邮件 2：在我设置的错误表中`error_id=2`，`error_text="error2"`。在`error_link`我设置的表中`email_id=2`，`error_id=2`。

电子邮件 3：在错误表中，我没有做任何事情，因为我找到了与`error_id=1`. 在`error_link`我设置的表中`email_id=3`，`error_id=1`。

电子邮件 4：在我设置的错误表中`error_id=3`，`error_text="error3"`。在`error_link`我设置的表中`email_id=4`，`error_id=3`。

电子邮件 5：在错误表中，我没有做任何事情，因为我找到了与`error_id=2`. 在`error_link`我设置的表中`email_id=5`，`error_id=2`。

我使用的代码从当前电子邮件中获取 500 个字符的片段，然后遍历错误表并运行此脚本：

```
similar_text($snippet_new_pre, $snippet_text, $similar_percent);

if ($similar_percent > 95)
{
   echo "We have a match";
} 
```

现在的问题是查询非常繁重，尤其是当查询变大时，我有时会得到`PHP Fatal error: Maximum execution time of 20 seconds exceeded`.

我尝试将其设置为`0`并有所帮助，但有时会卡住。我不确定是否会发生这种情况，因为整个脚本中包含的时间超过了这个时间，或者它是否是下面 1 个查询的实际代码。

```
similar_text($snippet_new_pre, $snippet_text, $similar_percent); 
```

它确实指的是那条线，我想知道我是否只是在电子邮件较少时更频繁地进行查询，它会修复它，还是我需要改进实际查询本身并使其更智能？

如果我必须做一个更好的查询而不是减小它比较任何想法的字符的大小，我想只在前 100 个字符上运行查询，如果它有 > 60% 则运行完整的 500 个字符的查询，从而做很多对那些不接近匹配但不确定这是否有帮助的计算较少。

# delphi - Delphi XE2/2007 和 LibXML

> ID：14122213
> 
> 赞同：3
> 
> 时间：2013-01-02T12:39:09.523
> 
> 标签：delphi, libxml2

不同机器上的 IDE 都是 WinXP。`LibXML2.dll`从 2010 年到 2012 年，两台机器的版本/日期各不相同。

我正在`libxml2.pas`从 SourceForge (2.7.3) 安装我在 XE2 上创建了 3 个应用程序、一个控制台和一个 VCL 表单，在 D2007 上创建了一个 VCL 表单。

如果我没有在`Libxml2.dll`我的应用程序运行中引用一个函数，如果我引用一个函数，例如`Doc:=xxmlParseFile(xnldocptr)`应用程序在启动时崩溃`InitUnits`。

```
program Project25;

uses
  Forms,

      Unit26 in 'Unit26.pas' {Form26};

    {$R *.res}

begin<---------- Access violation here
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm26, Form26);
  Application.Run;
end. 
```

![影音讯息](../Images/d84782ac9822f40e59f612e8f8c2113c.png)

//主要公司使用Libxml2；

```
{$R *.dfm} 

procedure TForm26.FormCreate(Sender: TObject); var Doc: xmlDocPtr; 
begin 
 Doc:=xmlParseFile('c:\a.xml'); 
 xmlFreeDoc(Doc); 
end 
```

我可以看到模块 LibXML2 已加载。

我是在做傻事还是错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:49:33.383

`LIBXML2.DLL`本身取决于其他 2 个 DLL：`ICONV.DLL`和`ZLIB1.DLL`

[您可以在此处](ftp://ftp.zlatkovic.com/libxml/)下载这些 dll 的最新版本

确保这些 DLL 驻留在与您的 delphi 可执行文件相同的路径上。

我已经在 W7/Delphi XE 下测试了你的项目，但我没有收到 AV。

# iphone - 如何管理大量的 MapViewAnnotations

> ID：14122218
> 
> 赞同：1
> 
> 时间：2013-01-02T12:39:28.010
> 
> 标签：iphone, annotations

我有一个带有大量注释（8000+）的 MapView。在所有注释可见的情况下滚动地图会降低性能。所以，我想在可见区域隐藏一些注释。我在论坛上找到了[这个](https://stackoverflow.com/questions/4776341/handling-large-quantity-of-mkmapview-annotations/ "这个线程”")帖子，但它并没有解决我的问题。

我通过编写这段代码尝试了另一种解决方案

```
- (void)mapView:(MKMapView *)_mapView regionDidChangeAnimated:(BOOL)animated
{
    NSSet *annoSet = [[NSSet alloc] initWithSet:[_mapView annotationsInMapRect:_mapView.visibleMapRect]];
    NSMutableSet *annotationsSet = (NSMutableSet *)annoSet;

    NSLog(@"Annos: %i", [annotationsSet count]);

    if([annotationsSet count]>500)
    {
        for(MapViewAnnotation* annotation in annotationsSet)
        {
            [[_mapView viewForAnnotation:annotation] setHidden:YES];
        }
    }
} 
```

这行得通，但是在该操作之后，mapView 几乎完全崩溃了，我可以改进什么？

编辑：

我的新代码如下所示：

```
- (void)mapView:(MKMapView *)_mapView regionDidChangeAnimated:(BOOL)animated
{
    NSSet *annoSet = [[NSSet alloc] initWithSet:[_mapView annotationsInMapRect:_mapView.visibleMapRect]];
    //NSMutableSet *annotationsSet = (NSMutableSet *)annoSet;

    NSLog(@"Annos: %i", [annoSet count]);

    if([annoSet count]>500)
    {
        for(MapViewAnnotation* annotation in annoSet)
        {
            [[_mapView viewForAnnotation:annotation] setHidden:YES];
        }

    }
    else if([annoSet count] <= 500)
    {
        for(MapViewAnnotation* annotation in annoSet)
        {
            [[_mapView viewForAnnotation:annotation] setHidden:NO];
        }

    }
} 
```

但我不想将所有注释隐藏在 visibleRect 中，只是其中的几个。知道如何以有效的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:07:50.480

您正在寻找的是一种对注释进行聚类的方法，这意味着在有多个注释非常接近的情况下显示单个注释。如果你想把它做对，这可能会有点复杂，但是如果你搜索网络，你会发现几个讨论聚类策略和算法的地方。我已经链接到下面的一些。

[Applidium 网站上的这篇博](http://applidium.com/en/news/too_many_pins_on_your_map/)文讨论了一种这样的策略，现在 Github 上有几个项目（[mapkit-clusters](https://github.com/j4n0/mapkit-clusters)、[kingpin](https://github.com/j4n0/mapkit-clusters)、[RevClusterMap](https://github.com/RVLVR/REVClusterMap)）可以为您处理集群问题。如果不出意外，看看代码，你就会知道如何处理这个问题。

然而，当我的团队正在解决这个问题时，我们采用了 WWDC 视频之一中描述的解决方案（我认为是[这个](https://developer.apple.com/videos/wwdc/2011/?id=111)（需要开发者帐户）），我们对其进行了一些修改以提高性能。

请注意，您可能必须找到一种方法让用户知道他们何时单击了集群注释。我们使用一个自定义标注来做到这一点，该标注列出了该单个注释表示的所有注释。

# java - Eclipse - 我在我的 Window-Preferences 中设置了 Java 1.6，但编译器给出了关于 @Override 的错误

> ID：14122220
> 
> 赞同：0
> 
> 时间：2013-01-02T12:39:29.537
> 
> 标签：java, android, eclipse

有谁知道为什么会这样？我似乎设置了 Java 1.6，但我仍然收到`@Override`错误，好像系统认为我在 1.5 上，这很奇怪。

关于为什么会发生这种情况的任何想法？

**编辑**

错误信息是

> `method(parametertypes)`类型的方法`Type`必须覆盖超类方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:46:02.820

您需要同时设置合规级别

![在此处输入图像描述](../Images/d9e4c7c8e25be2acc6a2e46264517ffb.png)

并添加适当的 JRE 库（右键单击项目并选择“属性”以获取下面的屏幕）

![在此处输入图像描述](../Images/f35ecf53df327eeace01d5f99cc64d1b.png)

完成上述步骤后，您可能需要“清理”项目（Project > Clean...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:44:39.530

如果您还没有，请导航到`Window`-> `Preferences`-> `Java`->`Compiler`并将编译器合规级别设置为 1.6。

这假设您已经在项目的构建路径上设置了 1.6。

# ruby-on-rails - Rspec 测试应该通过但失败

> ID：14122225
> 
> 赞同：3
> 
> 时间：2013-01-02T12:39:59.773
> 
> 标签：ruby-on-rails, rspec, capybara, erb, railstutorial.org

我从[michael hartl](http://ruby.railstutorial.org/chapters/static-pages#sec-static_pages_exercises)书中得到了这个测试：

```
require 'spec_helper'
  describe "Static pages" do
    let(:base_title) { "Ruby on Rails Tutorial Sample App" }

    describe "Home page" do
      it "should have the h1 'Sample App'" do
        visit '/static_pages/home'
        page.should have_selector('h1', :text => 'Sample App')
      end

      it "should have the title 'Home'" do
        visit '/static_pages/home'
        page.should have_selector('title', :text => "#{base_title} | Home")
      end
  end
end 
```

和观点：

```
<% provide(:title, 'Home') %>
<h1>Sample App</h1>
<p>
  This is the home page for the
  <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
  sample application.
</p> 
```

当我运行测试时，它说：

```
....

Finished in 1.91 seconds
4 examples, 0 failures

Randomized with seed 42247

.F...

Failures:

  1) Static pages Home page should have the title 'Home'
     Failure/Error: page.should have_selector('title', :text => "#{base_title} | Home")
       expected #has_selector?("title", {:text=>"Ruby on Rails Tutorial Sample App | Home"}) to return true, got false
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

Finished in 1.91 seconds
5 examples, 1 failure

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:14 # Static pages Home page should have the title 'Home'

Randomized with seed 17491 
```

但它应该通过，因为当我在浏览器中查看页面时，标题是：Ruby on Rails Tutorial Sample App | 示例应用程序，这是正确的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:51:54.417

确保在 Gemfile 中使用 capybara 1.1.2。从 2.0 capybara 开始不适用于标题测试（https://github.com/jnicklas/capybara/issues/844）

```
...
group :test do
  gem 'capybara', '1.1.2'
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:07:38.663

目前，您应该按照@dimuch 的建议进行操作，并确保您指定 Michael Hartl 在教程 (1.1.2) 中使用的相同 Capybara 版本。

如果您想在将来升级到 Capybara 2.0 并保留您的标题测试，请查看[此 StackOverflow 答案](https://stackoverflow.com/q/13573525/567863)，以获取创建 RSpec 匹配器的指南，该匹配器将满足您的期望。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T07:51:13.223

使用 capubara 2.0 你应该使用

```
page.should have_title("The title") 
```

但是如果您不添加，则无法正常工作

```
<style type="text/css">head, head title { display: block }</style> 
```

到您的 application.html

```
page.title # => "The title"
page.has_title?("The title") # => true
page.should have_title("The title") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T16:44:14.450

我一直在使用以下内容，他们一直在发布绿色。我放弃了 have_selector 并选择了 have_title。

`it { should have_title( full_title('Sign up') ) }`

- 和 -

`it { should have_title(user.name) }`

这是水豚2.2.0。

# ruby-on-rails - 直接模拟网络用户填写搜索数据（Ruby On Rails）

> ID：14122226
> 
> 赞同：0
> 
> 时间：2013-01-02T12:40:02.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, watir

目前我正在开发一个机票搜索引擎（非常类似于这个-http://www.momondo.com/），它将收集网站的所有信息。我已经完成了从网站上获取信息的工作。

因此，对于每个搜索结果，它都包含一个类似站点（选择）的按钮，它可以让用户重定向到相应的站点以预订机票。

场景：在我的网站上，我搜索一个位置（从到），然后它会出现搜索结果列表。我找到了一个适合我的搜索结果，我点击“预订”按钮，它应该会重定向到亚航网站上填写的数据（如从到到的位置）的亚航机票，然后可以直接从亚航网站预订.

正如我对 ruby​​ on rails 所知，有一个 watir gem 可以模拟用户。但是如何完成这个任务呢？我知道当直接到特定站点时，它需要将所有参数传递给站点，以便在站点上模拟或执行搜索。

任何建议都会得到重视：D 这是 RoR 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:45:13.367

您可以在页面上的 iframe 中加载远程网站，然后使用 JavaScript 填写必填字段。

AFAIK 没有一种简单的方法可以在不使用远程站点上的服务器端代码的情况下填写远程站点上的字段。

# css - 页脚 div 没有保持在底部

> ID：14122231
> 
> 赞同：0
> 
> 时间：2013-01-02T12:40:39.927
> 
> 标签：css

红色页脚在中间出现。如何让它保持在底部？喜欢`clear: both`和`overflow: hidden`。

我尝试了很多事情，我做错了什么吗？

[**演示**](http://jsfiddle.net/zAHDa)

代码太大，无法在此处粘贴（限制为 30000 个字符）。请给我工作小提琴。

*更新：它现在可以工作了。*

```
#footer {
  position: relative;
  height: 274px
  bottom: 0;
  margin-top: 274px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:42:59.800

你有

```
#footer {
    margin:-274px 0 0;
} 
```

这给了它一个负的上边距并将页脚向上移动。尝试删除该行。尽管您可能还需要调整页面的内容。您应该在内容上使用 clearfix，这样它就不会出现在页脚后面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:43:43.857

尝试这个 ：

```
#页脚{
    位置：固定；
    底部：0；
}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:51:10.807

1.  `clear: both`对元素无效`position: absolute`，因为它们超出了正常流程。
2.  在元素上设置`position: absolute; bottom: 0;`样式，`div.gallery`它将位于其容器的底部。

但这对你来说还不够，你还应该把你`<div class="gallery">`的移出它的容器 div。

# sql - 基于复杂业务逻辑的 SQL Query

> ID：14122236
> 
> 赞同：0
> 
> 时间：2013-01-02T12:41:04.337
> 
> 标签：sql, postgresql, triggers

我有一个结构表：

```
id, timestamp, deviceId, datatype, measure 
```

列度量值表示数据类型的值。例如，当处理开始时，数据类型为 19，度量为 1。当处理完成时，数据类型仍为 19，值为 0，并插入具有相同时间戳、数据类型 54 和值作为某个值的新行。这意味着在完成时系统正在调用一些触发器来更新此表。下面的示例数据

```
1001, 2013-01-02 09:20:00, 501, 19, 1
1005, 2013-01-02 10:00:00, 501, 19, 0
1006, 2013-01-02 10:00:00, 501, 54, 65 
```

1005和1006的时间戳相同，1001的时间戳总是小于1005的

```
1011, 2013-01-02 09:20:00, 601, 19, 1
1015, 2013-01-02 10:00:00, 601, 19, 0
1016, 2013-01-02 10:00:00, 601, 54, 105 
```

1015和1016的时间戳相同，1011的时间戳总是小于1015的

```
1021, 2013-01-02 09:20:00, 701, 19, 1
1022, 2013-01-02 10:00:00, 701, 19, 0
1023, 2013-01-02 10:00:00, 701, 54, 81 
```

1022和1023的时间戳相同，1021的时间戳总是小于1022的

同样的过程可以同时发生在多个设备上。

现在的要求是找到每个已完成事务的开始和结束时间，例如

```
1006, 2013-01-02 09:20:00, 2013-01-02 10:20:00, 501, 65
1016, 2013-01-02 09:20:00, 2013-01-02 10:20:00, 601, 105
1023, 2013-01-02 09:20:00, 2013-01-02 10:20:00, 701, 81 
```

大约 5 年后，我正在编写 SQL 查询并且完全卡住了。任何指针/建议将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:45:48.120

[SQL小提琴](http://www.sqlfiddle.com/#!12/43306/1)

```
CREATE TABLE t
        (id int, ts timestamp, deviceId int, datatype int, measure int)
;

INSERT INTO t
        (id, ts, deviceId, datatype, measure)
VALUES
        (1001, '2013-01-02 09:20:00', 501, 19, 1),
        (1005, '2013-01-02 10:00:00', 501, 19, 0),
        (1006, '2013-01-02 10:00:00', 501, 54, 65),
        (1007, '2013-01-02 10:20:00', 501, 19, 1),
        (1008, '2013-01-02 11:00:00', 501, 19, 0),
        (1009, '2013-01-02 11:00:00', 501, 54, 65),
        (1011, '2013-01-02 09:20:00', 601, 19, 1),
        (1015, '2013-01-02 10:00:00', 601, 19, 0),
        (1016, '2013-01-02 10:00:00', 601, 54, 105),
        (1021, '2013-01-02 09:20:00', 701, 19, 1),
        (1022, '2013-01-02 10:00:00', 701, 19, 0),
        (1023, '2013-01-02 10:00:00', 701, 54, 81)
;

with parted as (
    select floor((rn - 1) / 2.0) p, *
    from (
        select
            row_number() over (partition by deviceId order  by ts, datatype) rn,
            id, ts, deviceId, dataType, measure
        from t
        where not(datatype = 19 and measure = 0)
    ) s
)
select
    p1.id, p0.ts "start", p1.ts "end", p1.deviceId, p1.measure
from
    parted p0
    inner join
    parted p1 on
        p0.deviceId = p1.deviceId
        and p0.p = p1.p
        and p0.datatype = 19 and p1.datatype = 54
order by p1.id
;
  id  |        start        |         end         | deviceid | measure 
------+---------------------+---------------------+----------+---------
 1006 | 2013-01-02 09:20:00 | 2013-01-02 10:00:00 |      501 |      65
 1009 | 2013-01-02 10:20:00 | 2013-01-02 11:00:00 |      501 |      65
 1016 | 2013-01-02 09:20:00 | 2013-01-02 10:00:00 |      601 |     105
 1023 | 2013-01-02 09:20:00 | 2013-01-02 10:00:00 |      701 |      81 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:41:22.787

我的逻辑是一个简单的聚合。但是，聚合键是具有数据类型 54 的“下一个”记录，具有相同的设备 ID。

为了获得下一条记录，我在`where`子句中使用了相关子查询：

```
select next54 as id, MIN(timestamp) as starttime, MAX(timestamp) as endtime, MAX(device_id) as device_id,
       MAX(case when id = next54 then measure end)
from (select t.*,
             (select MIN(id) from t t2 where t2.id >= t.id and t2.datatype = 54 and t2.device_id = t.device_id) as next54
      from t
     ) t
group by next54 
```

剩下的就是聚合。

因为我个人不是相关子查询的忠实拥护者，所以您也可以使用窗口函数（在 Oracle 中有时称为分析函数）编写此代码：

```
select next54 as id, MIN(timestamp) as starttime, MAX(timestamp) as endtime, MAX(device_id) as device_id,
       MAX(case when id = next54 then measure end)
from (select t.*,
             min(id54) over (partition by device_id order by id desc) as next54
       from (select t.*,
                    (case when datatype = 54 then id end) as id54
             from t
            ) t
     ) t
group by next54 
```

`min`带有子句的函数`order by`执行“累积”最小值。结果应该与相关子查询相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:07:23.690

可能我在这里大大简化了问题，但是我看不出为什么对于数据类型为 54 的每条记录，您不能只访问数据类型为 19 且度量为 1 的设备的前一条记录：

```
SELECT  result.ID, 
        result.DeviceID, 
        MAX(start.Timestamp) StartTime, 
        result.Timestamp EndTime, 
        result.Measure
FROM    T result
        INNER JOIN T start
            ON start.DeviceID = result.DeviceID
            AND start.Timestamp < result.Timestamp
            AND start.DataType = 19
            AND start.Measure = 1
WHERE   result.DataType = 54
GROUP BY result.ID, result.DeviceID, result.Timestamp, result.Measure 
```

唯一真正的区别是，我不是从头开始解决问题并朝着结果努力，而是从结果开始，然后从头开始工作。如果进程同时为同一设备运行，这将失败（即一个事务在前一个事务结束之前开始）

# c# - 正确的 3 层架构？

> ID：14122243
> 
> 赞同：0
> 
> 时间：2013-01-02T12:41:31.550
> 
> 标签：c#, asp.net, architecture, web, three-tier

我知道三层包含`PL`,`BL`和`DL`.
致力于一个，在那个应用程序中，我们是

> “将值作为参数从 PL 传递到 BL，然后计算到执行 DB 操作的 DL。”

**这是实施 3 层的正确方法吗？**

或在**[CODEPROJECT中描述的那个](http://www.codeproject.com/Articles/11128/3-tier-architecture-in-C)**

**编辑** 我知道没有“一刀切”的图层模型。但我想知道哪个更好

1.  传递参数？

2.  设置获取表字段的设置值？（如上`codeplex`例）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:57:38.280

您提到的方法是针对简单场景的。应用程序的体系结构（层）可能因一个用户而异于另一个用户或组织。但是你提到的过程是基本的。

[http://alitarhini.wordpress.com/2011/01/22/concepts-of-three-tier-architecture/](http://alitarhini.wordpress.com/2011/01/22/concepts-of-three-tier-architecture/)

# asp.net - 在 vb.net 中打印到用户选择的托盘

> ID：14122248
> 
> 赞同：0
> 
> 时间：2013-01-02T12:41:45.637
> 
> 标签：asp.net, vb.net

我需要将word文档打印到用户选择的打印机托盘中。

我正在研究**VSTO**并在 ms Word 2010 中开发新的功能区，其中也包括打印选项。我已经设法读取了所选打印机的可用纸盘，用户也可以选择特定的纸盘。

但是让我感到困惑的是，当我打印时，我应该如何指定所选的托盘？

我在 vb.net 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:22:24.073

您可以使用 PrinterSettings.PaperSources 集合来迭代并确定要使用的托盘。

[http://msdn.microsoft.com/us-en/library/system.drawing.printing.printdocument.aspx](http://msdn.microsoft.com/us-en/library/system.drawing.printing.printdocument.aspx)

[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.papersources](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.papersources)

要进行迭代，您可以使用此代码段作为基础并根据需要进行扩展：

```
PrintDocument printDoc1 = new PrintDocument();
for (int i = 0; i < printDoc1.PrinterSettings.PaperSources.Count; i++)
{
} 
```

并选择要使用的特定托盘，设置 `PageSettings.PaperSource`属性。

# html - 调整屏幕大小时如何显示菜单下拉菜单

> ID：14122250
> 
> 赞同：0
> 
> 时间：2013-01-02T12:41:50.333
> 
> 标签：html, css, drop-down-menu, responsive-design

当屏幕宽度减小时，我试图将所有菜单链接放在下拉菜单中。

到目前为止，我所做的是为表单中的菜单下拉菜单编写 HTML 构成

```
 <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"  class="mobile_form">
    <select name="order" class='mobile_menu'>
    <option value ="home">Home</option>
    <option value ="gallery">Gallery</option>
    <option value ="contact">Contact</option>
    </select>
    <input type='submit' name='submit'  class='mobile_menu_button' value='GO'>
    </form> 
```

`display:none;`然后使用css隐藏正常屏幕尺寸的下拉菜单。

```
 .mobile_form {
    display: none;
    } 
```

然后在`@media`我用来显示我想要的下拉菜单中，我正在使用它：

```
 @media only screen and (min-width: 280px) and (max-width: 567px) {
    .mobile_form{
    width: 100%;
    display: block; 
    }
    } 
```

当我实现这个时，下拉菜单不会显示在正常布局中，但它也不会显示在调整大小的窗口中。

我在做什么错误？我可以更好地做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:46:53.260

在这里工作正常：[codepen](http://codepen.io/joe/pen/FepCD)
请注意，您的媒体查询仅在屏幕宽度**介于**280 像素和 567 像素之间时应用。也许您想要做的只是`@media-query (max-width: 567px)`让它适用于宽度**低于567 像素的所有内容。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:49:25.677

您的菜单的显示设置正确，但`margin: -47px auto auto auto`内部`#titleBar`导致它隐藏在视口边缘。如果我将其注释掉，表单元素就会变得可见：

[http://jsfiddle.net/vCaeG/4/](http://jsfiddle.net/vCaeG/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:59:33.700

`}`您忘记了媒体查询块末尾的右括号 ( )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:44:07.420

您需要`display: block`在媒体查询部分进行设置，否则它仍然会被隐藏。

示例 - [http://jsfiddle.net/VYQpd/](http://jsfiddle.net/VYQpd/)

# android - 即使在使用 proguard 后也不会删除日志

> ID：14122251
> 
> 赞同：1
> 
> 时间：2013-01-02T12:41:52.390
> 
> 标签：android, proguard

这是我的**proguard-project.txt**

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*

-keep public class com.myApp.mobileApp.**
-keep public class com.myApp.mobileApp.** {
  *;
}

-keep public class com.google.vending.licensing.ILicensingService{*;}
-keep public class com.android.vending.licensing.ILicensingService{*;}
-keep public class * extends android.app.Application{*;}
-keep public class * extends android.app.Activity{*;}
-keep public class * extends android.app.MapActivity{*;}
-keep public class * extends android.app.PreferenceActivity{*;}
-keep public class * extends android.view.View{*;}
-keep public class * extends android.widget.BaseAdapter{*;}
-keep public class * extends android.app.Service{*;}
-keep public class * extends android.content.BroadcastReceiver{*;}
-keep public class * implements android.view.View.OnTouchListener{*;}
-keep public class * implements android.view.View.OnClickListener{*;}
-keep public class * extends com.actionbarsherlock.app.SherlockActivity{*;}
-keep public class * extends com.actionbarsherlock.app.SherlockFragmentActivity{*;}
-keep public class * extends com.actionbarsherlock.app.SherlockMapActivity{*;}
-keep public class * extends com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay<OverlayItem>{*;}
-keep public class * extends com.actionbarsherlock.app.SherlockFragment{*;}

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-libraryjars libs/android-support-v4.jar
-libraryjars libs/apache-mime4j-0.6.jar
-libraryjars libs/httpmime-4.0.1.jar
-libraryjars libs/libGoogleAnalyticsV2.jar

-assumenosideeffects class android.util.Log {
    public static boolean isLoggable(java.lang.String, int);
    public static int v(...);
    public static int i(...);
    public static int w(...);
    public static int d(...);
    public static int e(...);
}

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembers class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**
-dontwarn org.apache.** 
```

我的想法是删除所有**日志**，即使混淆或任何其他优化不起作用。

`.apk`bin 文件夹中的文件大小为**1.82mb**，而我在 Expoting 后得到的文件大小为**1.42mb**。所以，我认为proguard完成了它的工作。但是当我`.apk`在模拟器上安装文件并测试时，所有的日志都还在。

难道我做错了什么？

**PS：**应用程序崩溃说：

```
java.lang.RuntimeException: java.lang.NoSuchMethodException: a(Activity,int) 
```

因此我在 proguard-project.txt 中添加了这两行：

*   -保持公共类 com.myApp.mobileApp.**
*   -保持公共类 com.myApp.mobileApp.** { *; }

现在它可以工作了，但日志仍然显示在 Logcat 中。

**完成错误日志：**

```
01-02 13:18:54.711: E/AndroidRuntime(585): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myApp.mobileApp/com.myApp.mobileApp.LandingActivity}: java.lang.RuntimeException: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:130)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:507)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-02 13:18:54.711: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method)
01-02 13:18:54.711: E/AndroidRuntime(585): Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.a.a(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.app.SherlockActivity.a(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.app.SherlockActivity.setContentView(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.myApp.mobileApp.LandingActivity.onCreate(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-02 13:18:54.711: E/AndroidRuntime(585):  ... 11 more
01-02 13:18:54.711: E/AndroidRuntime(585): Caused by: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.Class.getMatchingConstructor(Class.java:643)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.Class.getConstructor(Class.java:472)
01-02 13:18:54.711: E/AndroidRuntime(585):  ... 17 more 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:52:55.730

您只保留 SherlockActivity 类，而不保留它的内部类。

```
-keep class android.support.v4.app.** { *; } 
-keep interface android.support.v4.app.** { *; } 
-keep class com.actionbarsherlock.** { *; } 
-keep interface com.actionbarsherlock.** { *; } 
-keepattributes *Annotation* 
```

来自[https://stackoverflow.com/a/11151367/693752](https://stackoverflow.com/a/11151367/693752)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T07:47:21.940

你用过：-dontoptimize

所以 proguard 不会优化代码，所以 log.x 不会被删除（优化）

# python - PyQuery：只获取元素的文本，而不是子元素的文本

> ID：14122262
> 
> 赞同：5
> 
> 时间：2013-01-02T12:42:41.537
> 
> 标签：python, screen-scraping, pyquery

我有以下 HTML：

```
<h1 class="price">
 <span class="strike">$325.00</span>$295.00
</h1> 
```

我想拿出 295 美元。但是，如果我只是按如下方式使用 PyQuery：

```
price = pq('h1').text() 
```

我得到了这两个价格。

[在 jQuery 中仅提取元素的直接子文本](https://stackoverflow.com/questions/11362085/jquery-get-text-for-element-without-children-text)看起来相当复杂 - 在 PyQuery 中有没有办法做到这一点？

目前我正在单独提取第一个价格，然后使用替换将其从文本中删除，这有点繁琐。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:12:50.017

我认为没有一种干净的方法可以做到这一点。至少我找到了这个解决方案：

```
>>> print doc('h1').html(doc('h1')('span').outerHtml())
<h1 class="price"><span class="strike">$325.00</span></h1> 
```

如果您不想保留 span 标签，可以使用 .text() 而不是 .outerHtml() 。

删除第一个要容易得多：

```
>>> print doc('h1').remove('span')
<h1 class="price">
  $295.00
</h1> 
```

# eclipse - X11 转发的 Eclipse 右键单击 问题

> ID：14122265
> 
> 赞同：5
> 
> 时间：2013-01-02T12:42:56.897
> 
> 标签：eclipse, gtk, x11, vnc, xserver

我已经在远程 Linux 机器上安装了 Eclipse，并试图通过 X11 转发从我的 Windows 机器中访问它。是的，我们有这样做的要求。

使用 Eclipse (Helios/Indigo/Juno) 时，我遇到了右键单击行为的问题。当我在 Eclipse 中右键单击时，会短暂出现弹出菜单，然后选择光标附近的任何菜单项并执行该操作。如果我按住右键单击，则弹出菜单保持打开状态，我可以选择任何菜单项。当我释放右键单击所选菜单项时，将执行操作。请注意，在所有这些情况下，从不使用鼠标左键。

为 windows 尝试了不同的 Linux 风格（SuSE/Ubuntu）和不同的 X11 服务器（Xming/Cygwin/VNC），结果是一样的。这仅在 Eclipse 中发生，其他应用程序（如 firefox）没有此问题。

这种行为可以部分归因于 Linux 处理鼠标单击的方式，即释放鼠标右键将触发选择。

请注意，在所有情况下，Eclipse 在本地（在本地 Linux 机器上）都没有任何问题，只有当我们从 Windows 机器远程访问 Eclipse（X11/VNC）时才会出现这些问题。

我不确定问题是否出在 Eclipse 中，因为 Eclipse 在本地运行良好。然后，我不确定问题是否出在 X-server 中，因为其他应用程序（如 firefox）远程工作正常。

有任何想法吗？花了很多时间在这上面......！

以下是一些相关链接：

[http://devnet.jetbrains.net/message/5246614](http://devnet.jetbrains.net/message/5246614)

[http://communities.vmware.com/thread/220037](http://communities.vmware.com/thread/220037)

[https://superuser.com/questions/433314/how-do-avoid-context-menu-in-opensuse-to-open-on-mousepress](https://superuser.com/questions/433314/how-do-avoid-context-menu-in-opensuse-to-open-on-mousepress)

[https://bugzilla.redhat.com/show_bug.cgi?id=542841](https://bugzilla.redhat.com/show_bug.cgi?id=542841)

[https://github.com/linuxmint/Cinnamon/issues/947](https://github.com/linuxmint/Cinnamon/issues/947)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-03T13:38:53.833

我意识到这是一个老问题，但它今天（2016 年 11 月）才刚刚开始发生在我身上。

Macbook Pro Retina 2012 年中期运行 Sierra，带有外部 mac 显示器和触摸板 xquartz 2.7.11

使用远程 x 到运行 eclipse Mars (4.5.2) 的 redhat 7.2 机器

这多年来一直有效，但是在升级到 Sierra 之后，我在远程 x 运行 Eclipse 上的右键单击（两指轻敲 tracpad）导致右键单击上下文菜单短暂闪烁然后消失。

我注意到我的无线和局域网连接都处于活动状态（刚从会议回来并将 mac 放在显示器上）

找到了几个解决方案 - 1.将两根手指点击更改为点击触摸板右下角的工作（但我讨厌那个）2.如果我禁用无线以确保所有远程 x 会话都在 cat5 上，我的右键单击菜单再次起作用（两指点击触控板）。我现在连续几天一直在复制这个。3\. 使用鼠标代替触控板。

# android - 如何在不同的 Target 上运行我的 Android 应用程序？

> ID：14122267
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:43:04.247
> 
> 标签：android

如何在不同的 android 版本上运行我的 android 应用程序。我在android中创建了一个程序。该程序在 android 4.2 中运行良好，但在较低版本的 android 中运行良好。当我使用模拟器在 Android 2.3.3 中运行这个程序时，它给了我错误“应用程序已意外停止”。如何在任何版本的 android 中运行该程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:48:37.153

如果您正在等待目标，请将其写入您的清单文件：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:53:43.900

要运行多个设备：

A）在 AndroidManifest.xml 中设置最低 sdk 版本，如

使用-sdk android:minSdkVersion="7"

B）如果您使用的某些类在 Andoid 的较低版本中不可用，请确保将 android-support-v4.jar 集成到 libs 文件夹中，并通过右键单击您的 libs 文件夹中的此 jar 文件将其设置为您的构建路径应用。

如果您有任何问题请回复。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:05:24.717

1.  您可以随时更改项目的构建目标：

    右键单击 Package Explorer 中的项目，选择 Properties，选择 Android，然后检查所需的 Project Target。

2.  编辑 AndroidManifest.xml 文件中的以下元素（它位于您的项目根目录中）

    在这种情况下，这将是：

    ```
    <uses-sdk android:minSdkVersion="8" />
    <uses-sdk android:targetSdkVersion="17" /> 
    ```

    保存

3.  重建你的项目。

    单击菜单栏上的项目，选择清理...

4.  现在，再次运行该项目。

    右键单击项目名称，继续运行，然后选择 Android 应用程序

顺便说一下，回顾一下[用 ADT 从 Eclipse 管理项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html)会很有帮助。特别是称为创建 Android 项目的部分。

# sass - Sass已安装，但找不到命令

> ID：14122268
> 
> 赞同：5
> 
> 时间：2013-01-02T12:43:06.733
> 
> 标签：sass, compass-sass

我与我的提供商有一个基于 Cpanel 的托管计划。我已经设法使用 Putty 安装了 Compass 和 Sass，一切似乎都很好，但是当我尝试使用它时，我`sass: command not found`从终端得到了。

我知道这可能是因为 Sass/Compass 没有在环境变量中被引用，但到目前为止还没有找到让它工作的方法。我没有对服务器的 sudo 访问权限，并且已经读到我可以（也许）手动添加 PATH ，但我运气不佳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:54:58.993

1.  确保您已[安装 Ruby 和 RubyGems](http://docs.rubygems.org/read/chapter/3)：

2.  确保 GEM_HOME 的 bin 目录位于您的路径中：

    ```
    $ echo $PATH | grep $GEM_HOME 
    ```

    2.1。如果不是，那么：

    ```
    $ echo "export PATH=$PATH:$GEM_HOME/bin" >> "~/.bash_profile" 
    ```

3.  安装 sass RubyGem 包

    ```
    gem install sass 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T20:11:56.630

尝试找出 Sass 的安装位置。就我而言，宝石路径是

```
[~] which gem
/usr/bin/gem 
```

但是 Sass 安装在我的 $PATH 之外的另一个路径中

```
[~] find . -name '*sass*'
./ruby/gems/doc/sass-3.4.22/rdoc/lib/sass
./ruby/gems/gems/sass-3.4.22/test/sass
./ruby/gems/gems/sass-3.4.22/bin/sass
./ruby/gems/gems/sass-3.4.22/lib/sass
./ruby/gems/bin/sass 
```

所以，我需要将 $HOME/ruby/gems/bin 添加到我的 $PATH; 然后，它解决了这个问题。

# python - 龙卷风（Python）：持久的 http 连接

> ID：14122272
> 
> 赞同：0
> 
> 时间：2013-01-02T12:43:14.370
> 
> 标签：python, tornado

对于 http 持久连接，我编写了以下代码：

```
class LongPolling(tornado.web.RequestHandler):
    waiters = set()
    def get(self):
        LongPolling.waiters.add(self)
        for x in LongPolling.waiters:
            x.write("Broadcast all")
            x.flush()
        return

    def on_close(self):
        logging.warning("Connection closed *********")
        LongPolling.waiters.remove(self)

if __name__ == "__main__":
    application = tornado.web.Application([
        (r"/", LongPolling),
    ])
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

每次有新连接出现时，我都会进行广播。但问题是，在`get()`连接关闭后立即进行。

那么如何在 get() 调用后让连接打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:55:34.077

没有所谓的“持久”http 连接。标`Connection: keep-alive`头允许客户端和服务器在不创建新的底层 tcp 连接的情况下执行新的 http 请求/响应循环，以节省一点网络流量，但这对应用程序不可见；通常由反向代理在服务器端实现。当客户收到对他们的 GET 的响应时，他们将不得不提出新的请求。

如果这不是您的想法，只是您想一次响应一些请求，那么您可能正在寻找[`tornado.web.asynchronous`](http://www.tornadoweb.org/documentation/web.html#tornado.web.asynchronous). 但是请注意，大多数浏览器内的客户端不会从中受益很多。*例如，XHR 在响应完成*之前不会被触发，因此浏览器应用程序*无论如何*都必须启动新请求

# asp.net-mvc-3 - 在我的 ASP.NET MVC 4 应用程序中添加 ORCHARD CMS 功能

> ID：14122275
> 
> 赞同：2
> 
> 时间：2013-01-02T12:43:21.517
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, content-management-system, orchardcms, orchardcms-1.6

我在 mvc 4 中有一个非常庞大的项目。现在我想在其中包含 Orchard CMS 功能。

我不希望它通过包含我的 MVC 4 项目作为 Orchard 的一部分来做相反的事情，因为它太大了。宁愿将 Orchard 作为 CMS 模块包含在其中。

到目前为止我所做的： 1\. 从 codeplex 下载了果园源 zip 文件。2\. 将它作为一个单独的解决方案包含在我现有的 mvc 4 项目中

现在我希望这个 orchard 模块与我的 mvc 4 项目进行通信，比如在我的 web 项目的页面上放置一个链接，该链接将重定向到显示由 Orchard CMS 系统管理的内容。

对此有什么想法吗？

# php - 如何以 PHP 日期格式添加标签

> ID：14122276
> 
> 赞同：14
> 
> 时间：2013-01-02T12:43:23.013
> 
> 标签：php, datetime

有没有办法在 PHP 日期格式中添加换行符？我正在为 WordPress 使用一个插件，它允许使用常规的 PHP 日期格式，并且尝试了许多选项，但还没有得到一些工作。

我试过的：

*   l `</br>`j 米
*   l \nj 米

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-02T12:45:57.983

```
echo date("l<\b\\r>j M"); 
```

或者

```
echo date('l<\b\r>j M'); 
```

输出：

```
Wednesday<br>2 Jan 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T12:46:15.863

您需要转义 HTML 标记以避免它被解析为日期段：

```
<?php
    echo date('l \<\/\b\r\> j M');
?> 
```

或者，如果你不喜欢上面的（像我一样），那么你可以使用[strftime()](http://php.net/manual/en/function.strftime.php)函数：

```
<?php
    echo strftime('%A<br />%e %b');
?> 
```

`date()`和`strftime()`函数的第二个参数采用时间戳。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:58:48.840

在[`date()`](http://php.net/date)函数 PHP 手册页上是以下段落：

> 您可以通过使用前面的反斜杠对其进行转义来防止格式字符串中识别的字符被扩展。如果带有反斜杠的字符已经是特殊序列，您可能还需要转义反斜杠。

* * *

要使用您的示例格式，正确转义的字符将如下所示：

```
'l<\b\r/>j M'
"l<\\b\\r/>j M" 
```

第二个示例是双转义的，因为`\b`它`\r`是双引号字符串中有意义的转义序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:53:16.977

```
date('l<\b\\r />j M') 
```

将制作一个日期字符串，如：

```
l<br />j M 
```

结果如下：

```
Wednesday<br />2 Jan 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T12:55:18.703

感谢大家的投入。然后我偶然发现了一些额外的文档，我可以在其中使用这样的日期。毫无疑问，你的答案有一天会再次对我有用；）

我使用的插件是事件管理器，这是其他可能需要它的人的解决方案：

```
 <div class="ev_body">
    <span class="ev_icon">#_CATEGORYIMAGE</span>
    <span class="ev_category">#_CATEGORY</span>
    <span class="ev_weekday">#l</span>
    <span class="ev_day">#j</span>
    <span class="ev_month">#M</span>
    <span class="ev_time">#_EVENTTIMES</span>
    <span class="ev_link">#_EVENTLINK {has_location}<br/><i>#_LOCATIONNAME, #_LOCATIONTOWN #_LOCATIONSTATE</i>{/has_location}
    </span>
    </div> 
```

其中#l、#j、#M 等是 PHP 日期格式。

# c++ - 在 Fedora17 上安装的 OpenCV 的窗口上显示图像？

> ID：14122277
> 
> 赞同：2
> 
> 时间：2013-01-02T12:43:24.713
> 
> 标签：c++, opencv, fedora

我正在尝试在 Fedora17 上运行 openCV 的教程代码。我按照 openCV 安装包附带的内部教程中的说明安装了它。这是代码。

```
#include <cv.h>
#include <highgui.h>
using namespace cv;
int main( int argc, char** argv )
{
Mat image;
image = imread( argv[1], 1 );
if( argc != 2 || !image.data )
{
printf( "No image data \n" );
return -1;
}
namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
imshow( "Display Image", image );
waitKey(0);
return 0;
} 
```

我收到有关 GTK 的错误，这是我收到的错误。

```
OpenCV Error: Unspecified error (The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script) in cvNamedWindow, file /home/erogol/Desktop/OpenCV-2.4.3/modules/highgui/src/window.cpp, line 602
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/erogol/Desktop/OpenCV-2.4.3/modules/highgui/src/window.cpp:602: error: (-2) The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script in function cvNamedWindow

Aborted (core dumped) 
```

您对问题有解决方案或建议吗？

# c - C - 生成文件错误

> ID：14122278
> 
> 赞同：1
> 
> 时间：2013-01-02T12:43:27.990
> 
> 标签：c, makefile

我刚从 C 开始，现在我想学习 Makefile。我一开始很小，但已经失败了；）

我有一个非常简单的 Makefile，它只是将 main.c 编译为 main.o，然后编译为可执行文件。但是我收到一条错误消息，说我有语法错误。我用`g++`.

我使用的命令是：

```
g++ make Makefile << name of the make file 
```

Makefile 是这样设置的：

```
main.o: main.c main.h
[TAB]   g++ -c main.c

main: main.o
[TAB]   g++ main.o -o main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:45:36.547

要在 Makefile（默认名称）上运行 make，请调用 make 命令：

```
$ make 
```

不要试图用 makefile 调用 g++，编译器对 makefile 一无所知。

**编辑**：您在评论中说您没有 make 命令。然后你需要得到它。:) 适用于 Windows 的 make 有多个版本，[这里是](http://gnuwin32.sourceforge.net/packages/make.htm)移植到 Windows 的 GNU make（在 Linux 和其他类 Unix 环境中很常见）。

# c++ - 有没有一种通用的方法来转发构造函数参数？

> ID：14122280
> 
> 赞同：13
> 
> 时间：2013-01-02T12:43:32.730
> 
> 标签：c++, templates, c++11, constructor, clone

我在`Cloneable/CloneableImpl`下面有一对工人阶级。只要我有从子到父的默认构造函数，它就可以完成它的工作。

假设 Animal 的构造函数被修改为`Animal( std::string const& name )`，这需要从子类构造函数中传递名称。

*如何在保持`Cloneable/CloneableImpl`通用性的同时将此要求合并到结构中？*

**换句话说，我需要能够将所有构造函数参数从 Lion、Tiger 转发到 Animal。有没有办法在 C++11 中以通用方式做到这一点？**

如果不可能，如何在允许构造函数要求的同时重组这些模板以保持通用性？

**代码**

```
template<typename P>
struct Cloneable
{
    virtual P* clone() const = 0;
};

template<typename T,typename P>
struct CloneableImpl :
    public P
{
    virtual P* clone() const 
    {
        return new T( dynamic_cast<T const&>(*this));
    }
};

// ----------------------------------------------------------------------------

struct Animal :
    public Cloneable<Animal>
{ 
};

struct Lion  : 
    public CloneableImpl<Lion,Animal> 
{ 
};

struct Tiger : 
    public CloneableImpl<Tiger,Animal> 
{ 
};

int
main( int argv, char* argc[] )
{
    Animal* x = new Lion;
    Animal* y = x->clone();

    // we want to do this without hard-coding in template classes
    // Animal* z = new Lion( "Samba" );  
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T13:27:59.530

关注@Cheersandhth.-Alf 和@R。Martinho Fernandes 在对 OP 的评论中提出的关于**完善转发**的建议。我进行了一些研究并想出了这个，这似乎有效。

多谢你们！

**代码**

```
#include <string>
#include <iostream>

template<typename P>
struct Cloneable
{
    virtual P* clone() const = 0;
};

template<typename T,typename P>
struct CloneableImpl :
    public P
{
    template<typename... Args>
    CloneableImpl( Args&&... args ) 
       : P(std::forward<Args>(args)...)
  {  }

    virtual P* clone() const 
    {
        return new T( dynamic_cast<T const&>(*this));
    }
};

// ----------------------------------------------------------------------------

struct Animal :
    public Cloneable<Animal>
{ 
    Animal( std::string const& name ) : m_name( name ) { }

    std::string  m_name;
};

struct Lion  : 
    public CloneableImpl<Lion,Animal> 
{ 
    template<typename... Args>
    Lion( Args&&... args ) 
       : CloneableImpl<Lion,Animal>(std::forward<Args>(args)...)
  {  }
};

struct Tiger : 
    public CloneableImpl<Tiger,Animal> 
{ 
};

int
main( int argv, char* argc[] )
{
    Animal* x = new Lion( "Samba" );
    Animal* y = x->clone();

    std::cerr << y->m_name << std::endl;
} 
```

# jquery - 了解 jQuery 教程模块模式示例

> ID：14122284
> 
> 赞同：2
> 
> 时间：2013-01-02T12:43:50.453
> 
> 标签：jquery, code-organization, module-pattern

[考虑到在学习中心的代码组织部分](http://learn.jquery.com/code-organization/concepts/)发布的关于模块模式的最后一个代码片段（下面报告），我试图理解示例中模块的某些方面：

*   变量声明 ( `$items`, `$container`...) 由 分隔，`;`而函数声明 ( `createContainer`, `buildUrl`, `showItem`, ....) 由 分隔`,`。为什么？有支架问题吗？
*   为什么前三个变量（ 和 ）的`$items`名称`$container`以`$currentItem`开头`$`？这是否意味着用于标识 DOM 片段变量的命名约定（因为`javascript`允许使用 character `$`）还是有其他原因？
*   为什么函数`createContainer`声明为 using`var`而其他函数 ( `buildUrl`, `showItem`,...) 没有`var`？

// 为 jQuery 功能使用模块模式 $( document ).ready(function() {

```
var feature = (function() {

var $items = $("#myFeature li");
var $container = $("<div class='container'></div>");
var $currentItem = null;
var urlBase = "/foo.php?item=";
var createContainer = function() {
  var $i = $( this );
  var $c = $container.clone().appendTo( $i );
  $i.data( "container", $c );
},
buildUrl = function() {
  return urlBase + $currentItem.attr("id");
},
showItem = function() {
  var $currentItem = $( this );
  getContent( showContent );
},
showItemByIndex = function( idx ) {
  $.proxy( showItem, $items.get( idx ) );
},
getContent = function( callback ) {
  $currentItem.data("container").load( buildUrl(), callback );
},
showContent = function() {
  $currentItem.data("container").show();
  hideContent();
},
hideContent = function() {
  $currentItem.siblings().each(function() {
    $( this ).data("container").hide();
  });
};
$items.each( createContainer ).click( showItem );

return {
  showItemByIndex: showItemByIndex
};

})();

feature.showItemByIndex( 0 );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:37:45.247

1.  您可以在多个语句中或仅在 1 个语句中声明变量，这是您的决定。（`var x;var y;`对`var x,y;`）。据我所知没有区别。

2.  以 $ 开头：是开发人员的选择，对于 PHP 程序员来说它看起来更好，不影响变量，没什么特别的，只是一个命名约定。我不使用它，也不推荐它，它只会让你的代码看起来最糟糕，如果你使用 jQuery 会让你更加头疼。

3.  见第1点（它有“var”，但它在语句的开头）：

    var createContainer = function() {...},buildUrl = function() { ... },showItem = function() {... },showItemByIndex = function( idx ) {...}...;

[在http://www.w3schools.com/js/js_variables.asp](http://www.w3schools.com/js/js_variables.asp)和[http://www.wikihow.com/Declare-a-Variable-in-Javascript](http://www.wikihow.com/Declare-a-Variable-in-Javascript)查看更多详细信息

# jquery - jquery mobile center 两个按钮内联在页脚中

> ID：14122290
> 
> 赞同：0
> 
> 时间：2013-01-02T12:44:13.787
> 
> 标签：jquery, html, css, jquery-mobile, mobile

我希望能够在 jquery mobile 中对齐页脚中心的两个按钮。我已将我的代码放在下面的 jsfiddle 中：-

[小提琴](http://jsfiddle.net/rULKH/100/)

我将如何做到这一点，我几乎就在那里。

```
 <div data-role="page" data-theme="b" id="option-page"> 
        <div data-role="content"> 

        </div>
        <div id="homeFooter" class="controlsFooter" data-role="footer" data-position="fixed" data-theme="c">
                <div class="center-wrapper" style="float:left; margin-right:10px;">
                  <a href="#filterPage" data-role="button" data-transition="slide" data-inline="true" data-theme="a" data-icon="check" data-mini="true">Filter</a>
                </div>

                <div class="center-wrapper" style="float:left;">
                        <form name="actions" action="" method="post">
                                <select name="select-action" id="select-action" data-inline="true" data-theme="a" 
                                data-icon="home" tabindex="-1" data-inline="true" data-corners="true" data-iconshadow="true" data-shadow="false">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                </select>
                        </form>
                </div><!-- end of center wrap -->
            </div><!-- /footer -->
    </div> 
```

*   另外，您如何将按钮居中并将它们内联对齐。例如 Facebook 应用的 Header，图标按钮，左边，中间 3，右边 1？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:00:30.017

如果您有多个元素，则只能将它们彼此居中对齐（如果它们是内联或内联块元素），否则您将需要计算出需要居中的元素的总宽度，将它们放在 div 中那个宽度，然后把margin auto放在那个div上

[http://jsfiddle.net/rULKH/101/](http://jsfiddle.net/rULKH/101/)

在您的示例中，我将您的按钮包装在一个 div 中以使它们居中：

```
 <div style="width:150px; margin:auto;">
        <div class="center-wrapper" style="float:left; margin-right:10px;">
          <a href="#filterPage" data-role="button" data-transition="slide" data-inline="true" data-theme="a" data-icon="check" data-mini="true">Filter</a>
        </div>

        <div class="center-wrapper" style="float:left;">
                <form name="actions" action="" method="post">
                        <select name="select-action" id="select-action" data-inline="true" data-theme="a" 
                        data-icon="home" tabindex="-1" data-inline="true" data-corners="true" data-iconshadow="true" data-shadow="false">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                        </select>
                </form>
        </div><!-- end of center wrap -->
</div> 
```

​</p>

# sql - Rowset 不支持向后滚动

> ID：14122308
> 
> 赞同：6
> 
> 时间：2013-01-02T12:45:45.160
> 
> 标签：sql, vbscript, recordset, rowset

我正在尝试使用以下代码查询 MySQL 数据库：

```
'declare the variables 
Dim Connection
Dim Recordset
Dim SQL

'declare the SQL statement that will query the database
SQL = "SELECT * FROM CUSIP"

'create an instance of the ADO connection and recordset objects
Set Connection = CreateObject("ADODB.Connection")
Set Recordset = CreateObject("ADODB.Recordset")

'open the connection to the database
Connection.Open "DSN=CCS_DSN;UID=root;PWD=password;Database=CCS"

Recordset.CursorType=adOpenDynamic

'Open the recordset object executing the SQL statement and return records 

Recordset.Open SQL,Connection
Recordset.MoveFirst

If Recordset.Find ("CUSIP_NAME='somevalue'") Then
    MsgBox "Found"
Else
    MsgBox "Not Found"
End If

'close the connection and recordset objects to free up resources
Recordset.Close
Set Recordset=nothing
Connection.Close
Set Connection=nothing 
```

每当我执行上述操作时，我都会收到错误“行集不支持向后滚动”，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:53:50.823

`adOpenDynamic`未在 VBScript 中声明，因此 equals会在您分配属性时`Empty`转换为。是，并且 forward only 不支持向后移动，这是该方法想要的一种能力。`0``CursorType`
`0``adOpenForwardOnly``Find`

你应该`adOpenDynamic`用它的文字值替换：

```
Recordset.CursorType = 2 'adOpenDynamic 
```

要完全避免此类错误，请将`Option Explicit`其放在脚本的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:50:42.390

那是因为行集不允许向后移动。正如错误消息所暗示的那样。您的代码没有使用它们；所以你应该换行

Recordset.CursorType=adOpenDynamic 和 Recordset.CursorType=adOpenForwardOnly（或等效值 0）

最好完全离开；默认为向前光标。

# css - Sass 部分导入

> ID：14122316
> 
> 赞同：2
> 
> 时间：2013-01-02T12:46:25.923
> 
> 标签：css, sass

我对 sass 编译有疑问。

当我有一个带有部分的项目`_partial.scss`并将其导入多个部分文件（因为它包含颜色变量）时，它将多次出现在编译的 css 中！

这很丑陋，因为相同的规则会多次“推翻”自己，这使得调试信息（铬开发工具/萤火虫）相当不可读。

我认为这一切都有解决方案。我只是在任何地方都找不到关于这个问题的任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:59:25.640

*解决方案*是不要多次包含同一个文件，或者在您计划多次包含的文件中没有任何直接输出 CSS 的代码。如果您的变量本身在一个文件中，它们可以安全地包含在您想要的任何地方，而无需选择器重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T16:03:38.810

也许这个@mixin 可以帮助你：[https](https://github.com/wilsonpage/sass-import-once) ://github.com/wilsonpage/sass-import-once 。

查看示例并注意重置如何仅包含在最终 CSS 中一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-21T06:16:20.777

似乎仅仅为此，sass（以及因此，scss）现在有`@use`而不是`@import`. 来自[@use 文档](https://sass-lang.com/documentation/at-rules/use)（重点是我的）：

> 最简单的@use 规则写成@use ""，它在给定的URL 加载模块。以这种方式加载的任何样式**都将在编译后的 CSS 输出中仅包含一次，无论这些样式被加载了多少次**。

Sass 也不鼓励进一步使用`@import`：

> Sass 团队不鼓励继续使用 @import 规则。Sass 将在接下来的几年中逐步淘汰它，并最终将其从语言中完全删除。更喜欢@use 规则。

任何有此问题[的项目都可以尝试运行模块迁移器工具](https://sass-lang.com/documentation/cli/migrator#module)并检查问题是否已解决。

# c - 加密 C 文件的编译

> ID：14122318
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:46:38.283
> 
> 标签：c, encryption

实际上，有一种方法可以打开文件来设置加密密钥或密码，这样任何其他用户（除了谁知道）都无法使用

vim -x test.c (说文件名是 test.c)

它会询问加密密钥，然后我们可以编写代码。

但是当我使用 gcc（在 Linux 中）或 cc（在 solaris 中）编译时，它会给出一些错误列表，如下所示：

```
 encrypted.c", line 1: invalid source character: <0x17>
"encrypted.c", line 1: invalid source character: <0xffffff96>
"encrypted.c", line 1: invalid source character: <0xffffffd8>
"encrypted.c", line 1: invalid source character: <0xffffffa9>
"encrypted.c", line 1: invalid source character: <0xffffffcc> 
```

有什么方法可以编译这个加密文件，或者我在编译时做错了什么（这样做是否无效）

下面是 test.c 的代码

```
#include <stdio.h>

#define CUBE(x) ((x)*(x)*(x))

int main()
{
int x = 5;
int val;
val = CUBE(++x);
printf("val is: %d",val);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:00:21.247

通过管道将文件解密，然后将输出管道传输到编译器。由于加密文件有很多选择，你应该自己做，你不能指望编译器为你做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:10:48.260

您需要创建一个 Makefile，每次 gcc 执行将只编译一个 .c 文件。然后你需要让 gcc 从标准输入读取源代码。然后，您将需要一个解密工具，它将解密的源代码输出到标准输出，以便您可以将其通过管道传输到 gcc。

您可以通过创建包装脚本/程序来扩展此解决方案来解释编译器命令行并使用适当修改的参数调用真实编译器，将未加密的源代码通过管道传输到编译器（如果单个命令行中有许多源文件，可能会执行多次） . 这样您就可以使用现有的 Makefile。

但是，完成这项工作的第一步是，您需要可以输出到标准输出的解密工具，这样您就可以将其通过管道传输到编译器。`vim`可以用正确的命令行为你做到这一点......

# javascript - chrome.extension.getViews() 返回问题

> ID：14122319
> 
> 赞同：1
> 
> 时间：2013-01-02T12:46:46.473
> 
> 标签：javascript, google-chrome-extension

我正在尝试以这种方式从我的后台脚本访问内容脚本中的函数-

**内容.js**

```
window.DOsomething = function(){
    console.log('Works?');
} 
```

**背景.js**

```
var popups = chrome.extension.getViews();
if (popups.length != 0) {
            var popup = popups[0];
            popup.DOsomething();
} 
```

但它不工作！它会抛出一个错误`Uncaught TypeError: Object [object Window] has no method 'DOsomething'`，但是当我`console.log(window)`在我的内容脚本中这样做时 - 它告诉我，这种方法 ( `DOsomething`) 存在！但是在`popups[0]`列表中没有这样的方法，我真的不明白这样的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:02:18.147

这是 Chrome 扩展程序的一个已知功能，称为[孤立世界](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)。内容脚本被注入到目标页面中，不能直接从扩展的其他部分访问。要进行交互，您应该使用[消息传递](http://developer.chrome.com/extensions/messaging.html)。

这是对相关问题的一个有点过时的[SO 答案，](https://stackoverflow.com/a/4700573/1102014)这可能有助于全面了解情况。在答案中，您应该调整代码以使用`sendMessage`而不是`sendRequest`，它已被删除以支持第一个。

例如，您在后台页面中放置以下调用（取自文档）：

```
chrome.tabs.getSelected(null, function(tab) {
  chrome.tabs.sendMessage(tab.id, {greeting: "hello"}, // you can send "DoSomething" for example
  function(response) {
    console.log(response.farewell);
  });
}); 
```

在内容脚本中，您应该收听消息：

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if(request.greeting == "hello")
      sendResponse({farewell: "goodbye"});
    // else if(request.greeting == "DoSomething") DoSomething();
}); 
```

我不认为`getViews`方法是你想要的，因为它返回你的扩展页面（背景、弹出窗口、选项），而不是你的内容脚本被注入的页面。我想你应该`sendMessage`从你的内容脚本到后台页面，以便以后“知道”所有脚本主机页面，或者你可以使用`executeScript`.

```
chrome.tabs.executeScript(tabId, {code: 'DOsomething();'}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-28T17:46:51.280

**背景.js**

```
var message = "What ever you want...";
var viewTabUrl = chrome.extension.getURL('main.html');
var views = chrome.extension.getViews();
for (var i = 0; view = views[i]; i++)
{
    if (view.location.href == viewTabUrl)
    {
        view.DOsomething (messages);
        break;
    }
} 
```

**内容.js**

```
function DOsomething (message)
{
// CODE
} 
```

在上面的示例中，我认为“main.html”是您的弹出窗口（html）并且包含 content.js。

# replace - 从 url 复制并粘贴到文件中替换某些内容的脚本

> ID：14122324
> 
> 赞同：0
> 
> 时间：2013-01-02T12:46:52.337
> 
> 标签：replace, find, multiline

我正在尝试制作一个脚本，该脚本会自动从[该地址](https://api.wordpress.org/secret-key/1.1/salt/)上的 WordPress 的 API 服务复制整个内容，并将其粘贴到 wp-config.php 中，替换现有的行：

```
45: define('AUTH_KEY',         'put your unique phrase here');
46: define('SECURE_AUTH_KEY',  'put your unique phrase here');
47: define('LOGGED_IN_KEY',    'put your unique phrase here');
48: define('NONCE_KEY',        'put your unique phrase here');
49: define('AUTH_SALT',        'put your unique phrase here');
50: define('SECURE_AUTH_SALT', 'put your unique phrase here');
51: define('LOGGED_IN_SALT',   'put your unique phrase here');
52: define('NONCE_SALT',       'put your unique phrase here'); 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:57:20.027

arutaku 帮助我暗示了 wget。我仍然认为这个解决方案并不完美（我将在下面解释原因），并想看看是否有人有任何其他建议。但这仍然是一个有效的选择。所以，我的脚本：

```
 # Delete lines from 45 to 52 from wp-config.php 
    sed -i 45,52d wp-config.php
    # Get new lines and save them in a temporary file
    curl https://api.wordpress.org/secret-key/1.1/salt/ > temp-salt
    # Insert temporary file content into wp-config.php after line 44
    sed -i '44r temp-salt' wp-config.php
    # Delete the temporary file
    rm temp-salt 
```

缺点是该脚本使用行号而不是行内容进行操作，这就是它不够完美的原因。但是`wp-content-sample.php`文件不太可能经常更改，所以我想这并不全是坏事。

# python - python中的素数，编不工作

> ID：14122328
> 
> 赞同：-3
> 
> 时间：2013-01-02T12:47:18.110
> 
> 标签：python, python-2.7

运行此程序后，它不会打印任何内容：

```
for n in range(2,100):
     for x in range(2,n):
        if n%x == 0:
         break
        else:
          if n==x:
           print n,'is a prime number' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:50:47.617

`if n==x`永远不会是真的，因为内部循环只运行`x`from `2`to的值`n-1`。

如果您需要检查内部循环是否运行完成，`else`请在`for`自身之后使用。这将执行`else`if`break`尚未执行：

```
for n in range(2,100):
    for x in range(2,n):
        if n%x == 0:
             break
    else:
        print n,'is a prime number' 
```

一种更 Pythonic 的方法是使用`all`生成器表达式：

```
for n in range(2,100):
    if all(n%x != 0 for x in range(2,n)):
        print n,'is a prime number' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:49:11.203

简单的逻辑说明了这一点 - 余数为 0 的任何内容都将跳出循环，并且任何模本身的值都将为`0`，因此您的`else`块将永远不会到达包含`if`运行的地方。

# macos - 以编程方式设置 Mac 菜单栏标题

> ID：14122330
> 
> 赞同：2
> 
> 时间：2013-01-02T12:47:19.433
> 
> 标签：macos, nsbundle

如何以编程方式更改 Mac 菜单栏中的应用程序标题（启动应用程序*后）？*

我知道我可以在通过 Info.plist 文件中的 CFBundleName 运行程序之前设置它。但是，我需要在初始化应用程序后对其进行更改。操作我自己的 Info.plist 也行不通。

没有官方的 API 可以这样做，但是在[这个讨论](http://www.cocoabuilder.com/archive/cocoa/146310-programatically-change-the-application-title-menu-item.html#146356)中有人暗示有一个秘密的函数调用可以改变包名称/菜单栏标题：

> “如果你足够努力地寻找它，你可以使用 SPI，但我不会向任何人指出它，除非他们能证明他们为什么需要使用它 :-)”

我认为 Java 也使用了类似的东西。那么秘密 API 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:41:02.943

好的，我找到了方法。这是 Python 中的代码（取自[此处](https://bitbucket.org/alexprengere/pypy/src/2bdaa7b03a91/lib-python/2.7/lib-tk/test/runtktests.py)）。它可以使用一些清理和一些错误处理，但它可以工作。关键是来自 ApplicationServices 的未记录的 CPSSetProcessName。

```
def _osx_set_process_name(app_title):
    """ Change OSX application title """

    from ctypes import cdll, c_int, pointer, Structure
    from ctypes.util import find_library

    app_services = cdll.LoadLibrary(find_library("ApplicationServices"))

    if app_services.CGMainDisplayID() == 0:
        print "cannot run without OS X window manager"
    else:
        class ProcessSerialNumber(Structure):
            _fields_ = [("highLongOfPSN", c_int),
                        ("lowLongOfPSN", c_int)]
        psn = ProcessSerialNumber()
        psn_p = pointer(psn)
        if (  (app_services.GetCurrentProcess(psn_p) < 0) or
              (app_services.SetFrontProcess(psn_p) < 0) ):
           print "cannot run without OS X gui process"

        print "setting process name"
        app_services.CPSSetProcessName(psn_p, app_title)

    return False 
```

如果您立即调用它，它会更改活动监视器中的进程名称。由于某种原因，我不得不在小超时后调用它来更改菜单栏名称：

```
import gobject
gobject.timeout_add(100, _osx_set_process_name, "MyTitle") 
```

请注意，如果您将它与 .app 包结合使用，您可以获得非常好的 Python 应用程序系统集成。虽然您可以更改图标、Finder 显示名称...，但我尝试的所有方法都将 CFBundleName（菜单栏中的那个）保留为“Python”。（例如，[此答案](https://stackoverflow.com/a/2933108/143091)仅更改了长名称（显示在停靠图标上）。还有很多其他的几乎可以工作。）

While this answer gives the intended result, it's not very elegant. I'd appreciate some insight into why I need the timeout... I think Python or pygtk changes the process name itself when I first import gtk or run the main loop.

# php - 使用 PHP 进行 Google Analytics 每日上传

> ID：14122331
> 
> 赞同：1
> 
> 时间：2013-01-02T12:47:20.137
> 
> 标签：php, upload, google-analytics, google-api, google-analytics-api

我必须制作一个 PHP 脚本，它会使用 API 自动将数据上传到 Google Analytics。但是有一个问题：[开发人员指南](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtDailyUploadGuide)仅针对 python 和 java 编写。PHP 的 Google APIs 客户端库已经有[上传方法](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_AnalyticsService.php#79)。请帮我把这个java代码翻译成PHP：

```
 File file = new File("data.csv");
  InputStreamContent mediaContent = new InputStreamContent('application/octet-stream', new FileInputStream(file));
  mediaContent.setLength(file.length());
  Upload upload = analytics.management().dailyUploads().upload("1234",
      "UA-1234-1", "123456789", "2012-10-31", 1, "cost", mediaContent);

  upload.setReset(true);
  DailyUploadAppend append = upload.execute(); 
```

或者这个python代码：

```
media = MediaFileUpload('data.csv', mimetype='application/octet-stream', resumable=False)

daily_upload = analytics.management().dailyUploads().upload(
      accountId='1234',
      webPropertyId='UA-1234-1',
      customDataSourceId='123456789',
      date='2012-10-31',
      appendNumber=1,
      reset=true,
      type='cost',
      media_body=media).execute() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:40:24.620

你让这个工作了吗？你试过什么？我不是专家，但我会尝试一下。

[他们网站上的 PHP 库肯定支持这一点， Google APIs Client Library for PHP](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_AnalyticsService.php)中列出了“dailyUploads”的方法。

```
$dailyUploadsFile = $service->management_dailyUploads->upload(
   '12345678',                    // your accountID
   'UA-12345678-1',               // your web property ID
   'xXxXxXxXxXxXxXxXxXxXxX',      // your custom data source UID
   '2013-02-04',                  // date
   1,                             // append number
   'cost',                        // type of data
   array(
     "reset" => true,
     "data" => file_get_contents("your-data.csv"),
     'mimeType' => 'application/octet-stream',
     'uploadType' => 'media')); 
```

这一切都来自“Google_ManagementDailyUploadsServiceResource”类。

连接需要进行身份验证。如果您的输入文件包含多天的数据，您可以包含结束日期。

# c++ - 为什么在真的不需要的时候使用这么多宏

> ID：14122342
> 
> 赞同：1
> 
> 时间：2013-01-02T12:48:24.980
> 
> 标签：c++, stl, std

当我们查看 STL 头文件时，我们看到使用了许多宏，我们可以直接写单行，有时是单字。我不明白为什么人们使用这么多宏。例如

```
 _STD_BEGIN

using ::type_info;

 _STD_END

 #if defined(__cplusplus)
  #define _STD_BEGIN    namespace std {
  #define _STD_END      }
  #define _STD  ::std:: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:57:22.137

库提供者必须应对范围广泛的实现和用例。在这种情况下，我可以看到使用宏的两个原因（可能还有其他我现在没有考虑的原因）：

*   需要支持不支持命名空间的编译器。我不确定这是否会成为最近的实现的一个问题，但它们中的大多数都有很长的历史并且即使不再支持不支持命名空间的编译器也会删除这样的宏（不受保护的`using ::type_info;`暗示它是case) 的优先级较低。

*   除了编译器提供商提供的标准库之外，还希望允许客户使用他们的标准库实现，而无需替换它。然后，库的配置将允许用另一个名称替换`std`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T12:57:58.827

那

```
#if defined(__cplusplus) 
```

在您的样本中是关键。在您的源代码中，我希望看到宏的替代定义。根据编译环境的不同，某些构造可能需要不同的语法或根本不受支持；因此，我们编写一次代码，使用宏来构建此类结构，并根据支持的内容适当地安排宏定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:58:18.187

宏 vs 变量：在这种情况下，宏可以运行得更快，因为它们实际上是经过预处理后制成的常量。（对常量的操作比对变量的操作要快）。

宏 vs 函数：与使用函数时需要将参数压入堆栈、压入返回地址然后从堆栈中弹出相比，使用宏避免了开销。

宏：执行速度更快，但需要更多内存空间。功能：执行速度较慢，但​​内存空间较小。

# ios - iOS 上的多个顶点缓冲区 OpenGL ES

> ID：14122344
> 
> 赞同：1
> 
> 时间：2013-01-02T12:48:28.993
> 
> 标签：ios, opengl-es

我最近解决了一个问题，该问题阻止了我的光照在 OpenGL ES iOS 应用程序中工作：

[已解决的问题](https://stackoverflow.com/questions/14103464/open-gl-es-2-0-lighting-not-working-in-ios-app/14113871#14113871)

我通过更换解决了这个问题

```
glEnable(GL_DEPTH_TEST);
glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, loader.currentCountOfVerticies * sizeof(GLfloat) * 3, arrayOfVerticies, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

glGenVertexArraysOES(1, &_normalArray);
glBindVertexArrayOES(_normalArray);

glGenBuffers(1, &_normalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _normalBuffer);
glBufferData(GLKVertexAttribNormal, loader.currentCountOfNormals  * sizeof(GLfloat) * 3,loader.arrayOfNormals , GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));
glBindVertexArrayOES(0); 
```

和

```
glEnable(GL_DEPTH_TEST);

glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, total * sizeof(GLfloat), mergedArray, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

glBindVertexArrayOES(0); 
```

将顶点数组和法线组合成一个`GLfloat`数组，并将该数组传递给一个缓冲区。这解决了我的问题，但我不明白为什么。据我所知，我应该能够使用 2 个缓冲区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:00:21.603

问题不在于使用多个顶点缓冲区，而在于使用了多个顶点数组对象。顶点数组对象 (VAO) 是一个轻量级对象（意味着它不包含任何实际的顶点属性数据），它封装了使用单个绘图调用渲染一组顶点数组所需的所有状态，特别是

*   `glVertexAttribPointer`为每个属性索引所做的设置
*   启用的属性数组
*   绑定元素数组缓冲区

因此，它比单个顶点属性数组高一级，包括单个（概念）场景对象的所有顶点属性数组设置，或者更准确地说，单个绘制调用。

但是在您的原始代码中，您为每个单独的属性创建一个新的顶点数组对象。然后渲染时，您只绑定`_vertexArray`，而后者又只设置和启用`GLKVertexAttribPosition`属性，因此没有法线或其他任何东西。

因此，您应该将原始代码替换为：

```
glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, loader.currentCountOfVerticies * sizeof(GLfloat) * 3, arrayOfVerticies, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

//this is the error
//glGenVertexArraysOES(1, &_normalArray);
//glBindVertexArrayOES(_normalArray);

glGenBuffers(1, &_normalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _normalBuffer);
glBufferData(GLKVertexAttribNormal, loader.currentCountOfNormals  * sizeof(GLfloat) * 3,loader.arrayOfNormals , GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

glBindVertexArrayOES(0); 
```

# shell - 将昨天的日志文件传输到 ftp 服务器的 shell 脚本

> ID：14122348
> 
> 赞同：1
> 
> 时间：2013-01-02T12:48:42.013
> 
> 标签：shell, ftp, sh

我正在尝试编写一个每天都会触发的 shell 脚本，并将昨天的日志文件从多个服务器传输到 ftp 服务器。

到目前为止，我已经设法将它们复制并根据命名约定（必须包含 YYYYMMDD）将它们重命名到另一个目录，但不在 FTP 上。

这是我到目前为止所得到的：

```
#!/bin/sh

path=/home/log/
backupPath=/home/new_directory/log

if [ ! -d $backupPath ]; then
echo "$backupPath does not exist. Create it" 
mkdir $backupPath
fi;

server=$(uname -n)
for filename in $path/*string*; do    

timestamp=$(date -d "$(stat -c %y "$filename")" +%Y%m%d)

basename=$(basename $filename)

newfilename=$(echo "$basename" | sed s/access/access_"$timestamp"_"$server"/g)

cp $filename $backupPath"/$newfilename"
echo "$filename moved to $backupPath/$newfilename"

done 
```

现在我需要修改它以仅将昨天格式良好的文件复制到 FTP 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:57:28.410

像这样的东西（未测试）：

```
timestamp=$(date -d "$(stat -c %y "$filename")" +%Y%m%d)

yday=$(date -d "yesterday"  +%Y%m%d)
[ "$yday" != "$timestamp" ] && continue

basename=$(basename $filename) 
```

中间的 2 行将添加到您的代码中。第一行获取昨天的日期。然后将其与文件的时间戳进行比较。如果不匹配，则简单地跳过该文件。

# c# - 将项目添加到选定项目

> ID：14122351
> 
> 赞同：0
> 
> 时间：2013-01-02T12:48:55.250
> 
> 标签：c#, windows-phone-7

每次我尝试将项目添加到 listpicker.selecteditems 时，我都会收到一个奇怪的“'System.NullReferenceException' 类型的异常”。这是代码：

```
if (wine != null)
{
    foreach (string s in wine.Varietal.Split(';'))
    {
        var selectedTip = (from item in tips where item.Name == s select item).FirstOrDefault();
        if (selectedTip != null)
        {
                varietalListPicker.SelectedItems.Add(selectedTip);
        }
    }
} 
```

selectedTip 不为 null 且显示正确，但不确定调试器为何显示 null 引用异常。代码似乎适用于单选列表，但对于多选，我真的不知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:28:56.470

为什么这不起作用的答案很简单：SelectedItems 属性是只读的。您必须为此属性添加一个设置器。

我想我为你找到了一个[有用的博客条目](http://community.appamundi.com/blogs/andywigley/archive/2012/02/02/how-to-databind-selecteditems-of-the-listpicker-and-recurringdayspicker.aspx)。只需跳转到“扩展 ListPicker 以支持 SelectedItems 的设置”部分，即可了解如何修改 SelectedItems 属性权。

# xcode - 打开项目时 XCode 4.5 崩溃

> ID：14122355
> 
> 赞同：1
> 
> 时间：2013-01-02T12:49:12.387
> 
> 标签：xcode, xcode4.5

我在使用 Xcode 时遇到了奇怪的问题，在打开我的项目时它正在建立索引，并且在 3 或 4 秒后它会因崩溃报告而崩溃，如下图所示：-

![在此处输入图像描述](../Images/7e3be591d7dd9f97a9df8c7a739f6b79.png)

它只发生在一个项目上，其他项目没有。请帮助和指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:51:25.337

如果您的机器有另一个 xcode 版本。然后将项目打开到该 xcode 版本并关闭项目。然后在xcode 4.5版本中打开项目

# android - 此应用程序未获得许可。请在 android 中从 Android Market 购买

> ID：14122360
> 
> 赞同：3
> 
> 时间：2013-01-02T12:49:45.810
> 
> 标签：android

我用正确的密钥用谷歌许可证上传了我的应用程序，但是当我从商店下载应用程序时，它给出了

"**此应用程序未获得许可。请从 Android Market 购买。** "

***这是代码：***

```
public class MainActivity extends Activity {
    private static final String BASE64_PUBLIC_KEY = my_app_key;

    // Generate your own 20 random bytes, and put them here.
    private static final byte[] SALT = new byte[] {
        -46, 35, 30, -128, -103, -57, 74, -64, 51, 88, -95, -45, 67, -117, -36, -113, -11, 82, -44,
        29
    };

    private TextView mStatusText;

    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;
    // A handler on the UI thread.
    private Handler mHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.license);

        mStatusText = (TextView) findViewById(R.id.status_text);

        mHandler = new Handler();

        // Try to use more data here. ANDROID_ID is a single point of attack.
        String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

        // Library calls this when it's done.
        mLicenseCheckerCallback = new MyLicenseCheckerCallback();
        // Construct the LicenseChecker with a policy.
        mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);
        doCheck();
    }

    protected Dialog onCreateDialog(int id) {
        final boolean bRetry = id == 1;
        return new AlertDialog.Builder(this)
            .setTitle(R.string.unlicensed_dialog_title)
            .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
            .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                boolean mRetry = bRetry;
                public void onClick(DialogInterface dialog, int which) {
                    if ( mRetry ) {
                        doCheck();
                    } else {
                        Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                "http://market.android.com/details?id=" + getPackageName()));
                            startActivity(marketIntent);                        
                    }
                }
            })
            .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            }).create();
    }

    private void doCheck() {

        setProgressBarIndeterminateVisibility(true);
        mStatusText.setText(R.string.checking_license);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    private void displayResult(final String result) {
        mHandler.post(new Runnable() {
            public void run() {
                mStatusText.setText(result);
                setProgressBarIndeterminateVisibility(false);

            }
        });
    }

    private void displayDialog(final boolean showRetry) {
        mHandler.post(new Runnable() {
            public void run() {
                setProgressBarIndeterminateVisibility(false);
                showDialog(showRetry ? 1 : 0);

            }
        });
    }    

    private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow(int policyReason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            finish();
            startActivity(new Intent(MainActivity.this,first.class));
        }

        public void dontAllow(int policyReason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            displayResult(getString(R.string.dont_allow));
            // Should not allow access. In most cases, the app should assume
            // the user has access unless it encounters this. If it does,
            // the app should inform the user of their unlicensed ways
            // and then either shut down the app or limit the user to a
            // restricted set of features.
            // In this example, we show a dialog that takes the user to Market.
            // If the reason for the lack of license is that the service is
            // unavailable or there is another problem, we display a
            // retry button on the dialog and a different message.
            displayDialog(policyReason == Policy.RETRY);
        }

        public void applicationError(int errorCode) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // This is a polite way of saying the developer made a mistake
            // while setting up or calling the license checker library.
            // Please examine the error code and fix the error.
            String result = String.format(getString(R.string.application_error), errorCode);
            displayResult(result);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mChecker.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:06:40.607

您是否使用与上传相同的 ID？

# c# - 在模型实体中实现标题属性？

> ID：14122361
> 
> 赞同：1
> 
> 时间：2013-01-02T12:49:47.930
> 
> 标签：c#, metadata, caption

最近我们正在转换`Datatable`为`List`模型。我有一个名为`Person`( `personid`, `PersonChildId`} 的类，我将我的类实现为

```
public class Person 
{
    public Int64 PerosnId{ get; set; }
    public Int64 PersonChildID{ get; set; }
} 
```

我通过使用简单的 for 循环成功地将我`Datatable`的转换为。`List<Person>`但现在问题是我们知道`Datacolumn`有一个名为`Caption`. 但不幸的是模型没有。
那么我们如何需要为这些场景实现模型的 Caption 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:56:44.413

使用类似的属性[`DisplayName`](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)：

```
public class Person 
{
    [DisplayName("Person ID:"]
    public Int64 PerosnId{ get; set; }

    [DisplayName("Person Child ID:"]
    public Int64 PersonChildID{ get; set; }
} 
```

您可以通过以下方式获取属性的值：

```
var caption = property.GetCustomAttributes(typeof(DisplayNameAttribute), true)
      .Cast<DisplayNameAttribute>.Single().DisplayName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T08:23:22.420

```
 public int ID { get; set; }

    [System.ComponentModel.DisplayName("Full_Name:")]
    public string FullName { get; set; }

    public string Adress { get; set; }

    public string SSID { get; set; } 
```

# iphone - iphone app允许背景音乐继续播放

> ID：14122363
> 
> 赞同：25
> 
> 时间：2013-01-02T12:49:54.483
> 
> 标签：iphone, objective-c, ios

当我启动我的 iPhone 游戏时，只要有声音播放背景音乐或正在播放的播客就会停止。我注意到其他游戏允许背景音频继续播放。

这怎么可能？我是否需要覆盖我的 App Delegate 中的方法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-02T12:55:37.230

在使用音频播放器之前，将这条线放在您的`application:didFinishLaunchingWithOptions:`方法中或一般情况下。`AppDelegate`

```
 [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil]; 
```

根据文档，该`AVAudioSessionCategoryAmbient`类别是

> 对于声音播放是非主要的应用程序——也就是说，您的应用程序可以在关闭声音的情况下成功使用。
> 
> 此类别也适用于“随玩”风格的应用程序，例如用户通过 iPod 音频播放的虚拟钢琴。**当您使用此类别时，来自其他应用程序的音频会与您的音频混合。**您的音频通过屏幕锁定和静音开关（在 iPhone 上称为响铃/静音开关）静音。

如果您还想确保没有发生错误，则必须检查返回值

```
NSError *error;
BOOL success = [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:&error];
if (!success) {
     //Handle error
     NSLog(@"%@", [error localizedDescription]);
} else {
   // Yay! It worked!      
} 
```

最后，不要忘记将`AVFoundation`框架链接到您的项目并导入它。

```
#import <AVFoundation/AVFoundation.h> 
```

# java - Struts2记得我

> ID：14122365
> 
> 赞同：2
> 
> 时间：2013-01-02T12:49:59.880
> 
> 标签：java, jakarta-ee, struts2, struts

我在我的 Web 应用程序中使用 Struts 2。我的客户要求我实现“记住我”功能，这样他就不必再次登录。这是我认为应该做的：

1.  如果选中“记住我”选项，我应该使用一些用户特定的密钥创建一个 cookie，并在用户登录时将其存储在数据库中。
2.  我应该编写一个拦截器，从请求中取出 cookie，根据数据库检查密钥，如果找到并且未过期（7 天），它将相应的用户置于会话中。

还有其他更有效、更简单、更好的性能方面的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:58:40.090

您的方法是正确的，此[链接](https://stackoverflow.com/questions/244882/what-is-the-best-way-to-implement-remember-me-for-a-website)将帮助您以更有效的方式实施它:)

# visual-studio-2012 - 如何设置 Microsoft Help Viewer 2 的内容位置？

> ID：14122370
> 
> 赞同：2
> 
> 时间：2013-01-02T12:50:26.587
> 
> 标签：visual-studio-2012, msdn, help-viewer

我正在使用 Visual Studio 2012 Express。它附带新的帮助系统：帮助查看器 2.0。

Help Viewer 1.1 设置之一是内容位置。因此，一旦下载了一些 MSDN 参考，并且重新安装了 Visual Studio 2010 Express，则不必再次下载这些 MSDN 参考。只需在 Help Viewer 1.1 中设置内容位置就可以了。

但在 Help Viewer 2.0 中，我没有看到“内容位置”设置。一些谷歌搜索并没有告诉我如何做到这一点。每次重新安装 Visual Studio 2012 Express 时都必须下载 MSDN 参考资料吗？

我会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T01:09:33.043

Help Viewer 2.0 使您能够从“管理内容”选项卡中指定和移动本地内容存储的位置。但是，在您的特定场景中执行此操作存在两个问题（跨安装/卸载周期重复使用下载的内容）：

1.  当您卸载 Help Viewer 时，您下载的内容很可能会被删除。帮助查看器保存每种语言的引用计数，当最后一个引用被删除时，它会卸载该内容以保持内容干净。
2.  当您使用 UI 将本地商店移动到新位置时，Help Viewer 将在移动内容之前强制目录为空。

要解决这些问题，请使用以下方法：

1.  安装 VS Express/Help Viewer 并选择您的本地存储位置（例如“D:\msdn”）
2.  通过管理内容 UI 下载内容
3.  在卸载 VS Express/Help Viewer 之前，备份内容文件夹
4.  卸载 VS Express/帮助查看器
5.  将备份的帮助文件夹恢复到您想要的本地存储位置（例如“D:\msdn”）
6.  安装快速/帮助查看器
7.  修改注册表项以将内容存储设置为您想要的位置：

    **密钥位置**：HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\Help\v2.0\Catalogs\VisualStudio11

    **键名**：LocationPath（例如“D:\msdn”）

# c# - 计数集合中的项目数

> ID：14122373
> 
> 赞同：0
> 
> 时间：2013-01-02T12:50:32.443
> 
> 标签：c#, .net, collectionview

如何计算等于某个值的项目并将其放在标签中？

```
class Conversation
{
    public string Id { get; set; }
    public int Readen { get; set; }
    public string Recipient { get; set; }
} 
```

在 Readen 属性中，存在等于“1”或“0”的值。如何计算每个等于“1”的Readen？

更新;

在会话完成后尝试了这个调用：

```
 private void CountUnread() {

        int i = 0;

       Conversation cs = new Conversation();

       if (cs.Readen == "1") {
           i++;
       }
       MessageBox.Show(i.ToString());

    } 
```

MessageBox 显示为零

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:56:36.347

使用[Linq](http://msdn.microsoft.com/en-us/library/bb336768.aspx)，或者更准确地说，使用[Enumerable.Count](http://msdn.microsoft.com/en-us/library/bb535181.aspx)方法：

```
IEnumerable<Conversation> items = ...
...

var count = items.Count(c => c.Readen == 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:56:36.117

像这样的东西...

`Conversation cs = new Conversation();`//如果你在另一个类中创建实例

`if (cs.Readen.Equals(1)) { //Your Statements Here... }`

# visual-studio-2010 - 无法查看我的新 MVC 4 应用程序

> ID：14122379
> 
> 赞同：2
> 
> 时间：2013-01-02T12:50:58.383
> 
> 标签：visual-studio-2010, asp.net-mvc-4

我刚刚在 VS 2010 中创建了一个新的基本 MVC 4 应用程序。我只是单击了播放按钮来测试它是否出现在 Web 浏览器中，我得到了以下页面：

![在此处输入图像描述](../Images/5daf6544579f6845eecccbea2497d950.png)

我想我需要改变我的虚拟路径，但我不知道是什么。

编辑：看不到图片中正确显示的内容：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

The resource cannot be found. 
  Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

 Requested URL: / 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:28:41.473

如果您创建了一个空项目，您将需要创建一个带有索引操作的 HomeController。您还需要在 ~/Views/Home/ 中创建一个名为 Index 的视图。

其他项目模板会为您创建此项目，但 Empty Project 不会。

```
public class HomeController : Controller 
{

     public ActionResult Index()
     {

          return View()
     }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T10:43:43.113

没有人给我完整的答案。所以这是@MattiVirkkunen 和@BrettAlfred 的合并

在 RouteConfig.cs 中添加它

```
routes.MapRoute(
                name: "Default",
                url: "",
                defaults: new { controller = "Home", action = "Home" }
            ); 
```

在 HomeController.cs 中添加它

```
public ActionResult Login()
        {
            return View();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:52:25.473

Kya Neeta MVC 我 neyi ho Kya?? 我也是 ：）

我想你已经在你的应用程序中创建了一个启动页面。在您的网址中输入 Http://localhost:8080/Home/Index

http://localhost:/ControllerName/ActionName

如果这不起作用，请从头开始创建一个新的 MVC 应用程序。

# jquery - jquery中带有live方法的悬停功能

> ID：14122381
> 
> 赞同：0
> 
> 时间：2013-01-02T12:51:14.737
> 
> 标签：jquery

我想在 live 方法中使用悬停功能，但它不能完美运行，我使用 mouseenter 和 mouseout，但是当我更快地移动鼠标时，mouseout 事件无法正常工作，这就是为什么我想在 live 中使用悬停。这是示例[代码](http://jsfiddle.net/BCPeZ/)

```
<a href="#" class="add">add Class</a><br>
<br>
<a href="#" id="me">hover me</a>    

$('.add').click(function(){
    $('#me').addClass('abc')
    })
    $('.abc').live('hover',  function () {
    alert(0)
    }, function (){
    alert(1)
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:54:14.540

jQuery 1.4.1 和更高版本支持`"hover"`事件`live()`，但只有一个事件处理函数：

```
$(".abc").live("hover",
        function()
        {

        }
    ); 
```

或者，您可以提供两个函数，一个用于 mouseenter，一个用于 mouseleave：

```
$(".abc").live({
        mouseenter:
           function()
           {
            alert(0);
           },
        mouseleave:
           function()
           {
            alert(1);
           }
       }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:55:55.660

jQuery 不再支持`.live()`使用`.on()`。当您动态添加元素或向它们添加类或 id 并且您需要在它们上触发事件时，然后像我一样委托该元素。

```
$('.add').click(function(){
$('#me').addClass('abc');
});
$(document).on('mouseenter', '.abc', function () {
    $(this).css({ "color" : "red" });
}).on('mouseleave', '.abc',  function () {
    $(this).css({ "color": "black" });
});​ 
```

[工作小提琴](http://jsfiddle.net/veFPS/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:56:55.177

使用[`.on()`](http://api.jquery.com/on/)方法 since[`.live()`](http://api.jquery.com/live/)已被弃用，并使用委托语法

```
$('.add').click(function() {
    $('#me').addClass('abc')
})

$(document).on('mouseenter','.abc', function() {
    console.log('0');
}).on('mouseleave','.abc', function() {
    console.log('1');
}) 
```

请注意，`document`不建议使用 with on，因为它模仿了`.live`功能。`.abc`最好在 DOM 中使用更接近它的持久父级..

**演示在** [http://jsfiddle.net/gaby/BCPeZ/3/](http://jsfiddle.net/gaby/BCPeZ/3/)

# three.js - 如何在three.js中使用映射uv

> ID：14122384
> 
> 赞同：0
> 
> 时间：2013-01-02T12:51:26.687
> 
> 标签：three.js, mapping, textures, uv-mapping

我在模型中使用了木质纹理图像。默认情况下，我的纹理会在您在 woodark 上看到的模型上拉伸。当我更改重复时，纹理更加拉伸，我不明白为什么。我搜索以了解如何使用基本解释在我的模型中正确使用映射，但我只找到了带有颜色像素的示例。

感谢答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:31:38.970

您应该确保您的纹理具有二维的能力（即 256x256、512x512 等）。任意维度的纹理（NPOT）给 WebGL 带来了各种映射问题。

如果您无法在服务器端调整纹理大小，则可以在客户端进行。此链接有一些示例 javascript 代码，以及其他相关信息：[http ://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences](http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences)

# android - 列表视图和性能内的 3 个持有者

> ID：14122393
> 
> 赞同：1
> 
> 时间：2013-01-02T12:51:47.180
> 
> 标签：android, performance, listview

我有 3 个持有人。1 个支架用于 1 件物品。方法 getView 看起来：

```
public View getView(int position, View convertView, ViewGroup parent) {
    mCursor.moveToPosition(position);
    int type = checkDialogType(mCursor);
    Holder holder = null;
    if (convertView != null){
        holder = (Holder)convertView.getTag(type);
        if (holder == null){
            holder = createHolderByType(type, parent);
        }
    } else {
        holder = createHolderByType(type, parent);
    }
    return holder.fillView(mCursor, position);         //convertView
} 
```

createHolderByType() 的内容在哪里：

```
public Holder createHolderByType(int type, ViewGroup parent){
    View v;
    if (type == IN_TYPE){
        v = mInflater.inflate(R.layout.dialog_incoming_item, parent, false);
        return new InHolder(v, mCursor, mContext, this, IN_TYPE);
    } else if (type == OUT_TYPE){
        v = mInflater.inflate(R.layout.dialogs_outcoming_item, parent,false);
        return new OutHolder(v, mCursor, mContext, this, OUT_TYPE);
    } else {
        v = mInflater.inflate(R.layout.dialogs_chat_item, parent, false);
        return new ChatHolder(v, mCursor, mContext, this, CHAT_TYPE);
    }
} 
```

它工作正常，但是对于 listView 方法中的 39 个项目，createHolderByType 被调用了 19 次。为了创建一个持有者，我需要膨胀 xml。这个很贵。如果我尝试对持有人使用相同的视图或将持有人保存在内存中 - 它不起作用。我可以通过一些技巧来提高性能吗？

**UPD：** 有一个持有人：

```
public class InHolder extends Holder {
private View baseView;
private TextView fio;
private TextView message;
private TextView date;
private ImageView isOnline;
private int type;
private ImageView senderIMG;

public InHolder(View v, Cursor dialogCursor, Context context, DialogCurAdapter adapter, int type){
    super(dialogCursor, context, adapter);
    fio = (TextView)v.findViewById(R.id.fio);
    senderIMG = (ImageView)v.findViewById(R.id.sender_image);
    message = (TextView)v.findViewById(R.id.message_preview);
    date = (TextView)v.findViewById(R.id.date);
    isOnline = (ImageView)v.findViewById(R.id.isonline);
    this.type= type;
    baseView = v;
    baseView.setTag(type, this);
}

@Override
public View fillView(Cursor dialogCursor, final int position) {
    try{
        int ownerID = dialogCursor.getInt(ownerIndex);
        User usr = mDButils.getUserByID(ownerID);
        String messageText = Html.fromHtml(dialogCursor.getString(bodyIndex)).toString();
        date.setText(DateUtils.getTime(dialogCursor.getInt(dateIndex), mContext));
        message.setText(messageText);

        if (messageText == null || messageText.equals("")){
            if (dialogCursor.getInt(hasAttIndex) == 1){
                message.setText(mContext.getResources().getString(R.string.attachment));
                message.setTextColor(getColor(R.color.date_blue_to_white_selector));
            }

        }

        if (dialogCursor.getInt(hasAttIndex)  == 1){
            String[] attaches = dialogCursor.getString(attTypeIndex).split(",");
        }

        if (dialogCursor.getInt(readstateIndex) == 0){
            baseView.setBackgroundDrawable(getDrawable(R.drawable.lightblue_to_transparent_selector));
        } else baseView.setBackgroundDrawable(getDrawable(R.drawable.white_to_blue_selector));

        if (usr != null){
            mImageLoader.displayImage(usr.getImageURL(), senderIMG);
            fio.setText(usr.getFirstName() + " " + usr.getLastName());
            isOnline.setVisibility(usr.isOnLine()  == 1  ? View.VISIBLE : View.INVISIBLE);
        } else {
            AsyncUserLoader userLoader = new AsyncUserLoader(mContext) {
                @Override
                protected void onPostExecute(User user) {
                    if (user != null){
                        mDialogAdapter.updateItem(position);
                    }
                }
            };
            userLoader.execute(Integer.parseInt(ownerID + ""));
        }
    }catch (Exception e){
        e.printStackTrace();
    }
    return baseView;
}

@Override
public int getType() {
    return type;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:28:38.043

您可以对 BaseAdapter 有多个布局实现，如[本文](https://stackoverflow.com/questions/4777272/android-listview-with-different-layout-for-each-row)和[本文中给出的那样](http://android.amberfog.com/?p=296)

**注意**：在 getItemViewType(int position) 你可以使用 checkDialogType(mCursor); 找到要使用的布局类型。但是 getItemViewType(int position) 应该返回 0 - 2 之间的值（当 count 为 3 时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:19:04.480

我找到了解决方案。当我需要所有视图时，我制作了一个复杂的容器。并且取决于视图的类型，我使它们可见或不可见。因此，当 convertView 与类型不匹配时，我不需要膨胀 xml。

# arrays - 如何自定义字符串的排序顺序

> ID：14122404
> 
> 赞同：1
> 
> 时间：2013-01-02T12:52:59.357
> 
> 标签：arrays, vb.net, string

我对使用字符串数组完全陌生。考虑这个例子：

我在文本框中有以下值：

```
bufallo@2000
lice@20
cell@1
rat@150
cow@10000 
```

当我对它们进行排序时，它们按字母顺序排序，如上面的列表所示。但是，我需要它们使用 @ 符号后面的整数值按降序排序。因此，例如，我希望将上面的列表排序如下：

```
cow@10000
bufallo@2000
rat@150
lice@20
cell@1 
```

我不知道如何像这样按降序排列它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:38:53.347

虽然在单个 LINQ 表达式中执行所有逻辑可以证明您是多么聪明:) 有时，如果您以更冗长的方式执行代码，则代码更容易阅读和遵循。因此，如果您不想使用 LINQ，则可以创建自己的`IComparer`包含自定义排序算法的类：

```
Public Class MyComparer
    Implements IComparer(Of String)

    Public Function Compare(ByVal x As String, ByVal y As String) As Integer Implements IComparer(Of String).Compare
        Dim xParts() As String = x.Split("@"c)
        Dim yParts() As String = y.Split("@"c)

        'Get the integer value (after the @ symbol) of each parameter
        Dim xValue As Integer = 0
        Dim yValue As Integer = 0
        If xParts.Length = 2 Then
            Integer.TryParse(xParts(1), xValue)
        End If
        If yParts.Length = 2 Then
            Integer.TryParse(yParts(1), yValue)
        End If

        'Compare y-to-x instead of x-to-y because we want descending order
        Return yValue.CompareTo(xValue)
    End Function
End Class 
```

在此示例中，[IComparer](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)是一个标准的 .NET 框架接口，您将在`MyComparer`类中实现它。[Compare](http://msdn.microsoft.com/en-us/library/xh5ks3b3.aspx)方法（由定义`IComparer`）只接受两个参数并比较它们。如果`x`小于`y`（即在排序顺序中位于`x`之前`y`），该方法将返回一个负数（例如-1）。如果`x`大于`y`，它将返回一个正数（例如 1）。如果`x`和`y`相等，则该方法将返回 0。

然而，在这种情况下，由于我们想要做的只是使用标准整数排序，我们可以调用[Integer.CompareTo](http://msdn.microsoft.com/en-us/library/y2ky8xsk.aspx)来比较两个整数并根据需要返回负数、正数或零。

然后，当您调用该`Array.Sort`方法时，您可以给它一个自定义`IComparer`对象，以便它使用您的自定义排序算法而不是默认行为：

```
Dim arrayToSort() As String = New String() {"bufallo@2000", "lice@20", "cell@1", "rat@150", "cow@10000"}
Array.Sort(arrayToSort, New MyComparer()) 
```

[Sort](http://msdn.microsoft.com/en-us/library/aw9s5t8f.aspx)方法将使用您提供给它的对象`IComparer`来执行排序。每次它需要比较数组中的两个项目以查看哪个应该先出现时，它将调用`MyComparer.Compare`并使用该方法返回的值来确定正确的排序。

`MyComparer`您可以在需要使用相同算法对项目进行排序的代码中的任何地方重复使用相同的类，这是与 LINQ 方法相比的另一个好处。实现您自己的`IComparer`类允许您制作各种非常强大的可自定义排序顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:00:31.337

您想按字符串的数字部分排序吗？不需要正则表达式。

您可以使用`String.Split`和`Enumerable.OrderByDescending`：

```
Dim number As Int32 = Int32.MinValue
Dim orderedLines = From line In TextBox1.Lines
                   Let parts = line.Split("@"c)
                   Let numericPart = parts.Last()
                   Let success = Int32.TryParse(numericPart, number)
                   Select LineInfo = New With {line, number}
                   Order By LineInfo.number Descending
                   Select LineInfo.line
' if you want to reassign it to the TextBox:
TextBox1.Lines = orderedLines.ToArray() 
```

# php - 检查 PHP 中的文本框长度

> ID：14122407
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:53:08.447
> 
> 标签：php

```
if ($username  != '')
{
if($password != $password1)
{
echo 'Password does not match<br />';
    }
else if ($username > 14)
{
echo 'username too long';
}
else if ($username < 5)
{
echo 'username too short';
}
else if($password < 5 && $password1 < 5)
{
echo 'Your password or username is too short, minimum of 5 characters<br />';
}
    else{ 
```

我试了几次，但它说我的用户名太短，即使它有 9 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:54:12.330

要在 PHP 中检查字符串的长度，请使用[`strlen()`](http://nl3.php.net/manual/en/function.strlen.php).

例如：

```
if (strlen($username) > 14)
{
  echo 'username too long';
} 
```

注意：要检查是否在 PHP 中设置了变量，请使用[`isset()`](http://nl3.php.net/manual/en/function.isset.php)代替`!= ''`，它更加健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:54:15.363

采用`strlen()`

```
if(strlen($username) < 5) {
   // too short 
} 
```

文档：[http ://us2.php.net/strlen](http://us2.php.net/strlen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:54:19.383

您需要使用[`strlen()`](http://us2.php.net/strlen)实际获取字符串的长度：

```
else if (strlen($username) > 14)
{
  echo 'username too long';
}
else if (strlen($username) < 5)
{
  echo 'username too short';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:55:13.747

采用`strlen()`

```
else if (strlen($username) > 14)
{
  echo 'username too long';
}.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T12:57:48.100

你应该使用 strlen($username) 而不是 $username。它会正常工作。

# jsp - jsf中的年份下拉列表

> ID：14122412
> 
> 赞同：1
> 
> 时间：2013-01-02T12:53:18.863
> 
> 标签：jsp, jsf, richfaces

我怎样才能`<rich:calendar>`只显示年份。我想要jsf中的年份下拉列表我该如何实现它。请指导

我试过了

```
<rich:calendar value="#{existingPolicyRecord.dateOfApp}" datePattern="yyyy" ></rich:calendar> 
```

但无法获得年份下拉列表。还有其他组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:44:18.220

**这不是官方支持的，我想最好使用普通的下拉选择框来做到这一点，**因为你只有一个值列表（年）。

不过，有一种[方法](http://relation.to/12480.lace)可以让日历只显示月份和年份：

创建一个样式类来隐藏“天”：

> ```
> <style type="text/css">
>         .special tr[id]{
>                 display:none; 
>         }
> </style> 
> ```

禁用页脚、天和周并将样式类应用于您的日历：

```
 <rich:calendar value="#{calendarBean.selectedDate}" popup="false" 
     showWeeksBar="false" showWeekDaysBar="false" showFooter="true" styleClass="special"/> 
```

它看起来像这样： ![在此处输入图像描述](../Images/f7a2af076dc418a7c7885f597acdf12c.png) ![在此处输入图像描述](../Images/5fcf63b582cbddeebdff717368188ee3.png)

# iphone - 可重用的 UIView 作为 nib 文件

> ID：14122413
> 
> 赞同：0
> 
> 时间：2013-01-02T12:53:19.833
> 
> 标签：iphone, ios, uiview, uiviewcontroller, xib

我使用 xib 文件创建了一个名为 BOHeaderView 的自定义 UIView。我希望将此 BOHeaderView 加载到其他 UIViewController 的 xib 中。

我尝试在一个 ViewController nib 文件中添加 UIView 并将其类型更改为 customView。但我无法加载自定义视图。下面是customView的初始化代码。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        // Custom initialization
        [[NSBundle mainBundle] loadNibNamed:@"BOHeaderView" owner:self options:nil];
    }
    return self;
}

- (void) awakeFromNib
{
    [super awakeFromNib];

    // commenters report the next line causes infinite recursion, so removing it
    [self customizeHeadView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:58:05.943

带有 的那一行`NSBundle`应该在您要加载笔尖的类中。你应该在那堂课上写：

`CustomView *customView = [[NSBundle mainBundle] loadNibNamed:@"BOHeaderView" owner:self options:nil].lastObject;`

它返回一个`NSArray`，这就是为什么你需要`lastObjct`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:00:43.633

你可以这样做：

```
NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"BOHeaderView" 
                                              owner:[[BOHeaderView alloc] init]
                                            options:nil];
BOHeaderView *infoView = [nibViews objectAtIndex:0];
infoView.frame = CGRectMake( put your rect here );
[self addSubview:infoView]; 
```

**编辑**：

意味着您想说：[使用来自多个视图控制器的自定义 UIView](https://stackoverflow.com/questions/960955/using-a-custom-uiview-from-multiple-view-controllers)

我有同样的问题，我以这种方式解决了它：

我在`buttonClick`.

```
 RatingView *rateView = [[RatingView alloc] initWithNibName:@"RatingView" bundle:[NSBundle mainBundle]];
 rateView.view.frame = CGRectMake(0,45,1024, 648);
 [self.view addSubview:rateView.view]; 
```

快乐编码！

# android - java.lang.NullPointerException 在 android.webkit.WebViewClassic.setBaseLayer(WebViewClassic.java:5377)

> ID：14122417
> 
> 赞同：5
> 
> 时间：2013-01-02T12:53:32.937
> 
> 标签：android, webview, nullpointerexception

我发布了一个使用 ACRA 进行崩溃报告的 Android 应用程序。现在我收到了一个奇怪的崩溃报告：

```
java.lang.NullPointerException
at android.webkit.WebViewClassic.setBaseLayer(WebViewClassic.java:5377)
at android.webkit.WebViewClassic.setNewPicture(WebViewClassic.java:10781)
at android.webkit.WebViewClassic$PrivateHandler.handleMessage(WebViewClassic.java:10012)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
at dalvik.system.NativeStart.main(Native Method) 
```

该报告是从运行 Android 4.1.1 的三星 Galaxy S3 (GT-I9300) 发送的。该报告很奇怪（从我的角度来看），因为我的应用程序不使用 WebView（整个应用程序中没有显示网页，根本没有 HTML 处理）。此外，堆栈跟踪不包括我的任何包。当然我无法重现崩溃。

有没有其他人遇到过这个（或非常相似的）堆栈跟踪？为什么会抛出这个异常？我该怎么做才能避免异常？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:07:14.267

这可能是由于使用了可能使用 WebView 的外部广告网络造成的。这是广告网络维护者需要解决的问题。除了引起他们的注意之外，除了从您的应用程序中删除违规提供商的广告之外，您实际上无能为力。

# ruby - 无法读取跨度元素

> ID：14122421
> 
> 赞同：3
> 
> 时间：2013-01-02T12:53:49.237
> 
> 标签：ruby, webdriver, watir

嗨，因为我做了 gem install watir watir-classic 我的脚本不再阅读 span 元素。你能帮我解决这个问题吗

这是我的例子

**资源**

```
Rented&nbsp;
<SPAN class="displayData" style="padding-left:2px; width: 15;"><span name="tab4RateInfoForm.vehicleGroup"/>F</span></SPAN>&nbsp; 
```

**我的代码**

```
carGroup=browser.span(:name => 'tab4RateInfoForm.vehicleGroup').text 
```

**错误信息**

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:79:in `rescue in match?': name is an unknown way of finding a <span> element (tab4RateInfoForm.vehicleGroup) (Watir::Exception::MissingWayOfFindingObjectException)
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:76:in `match?'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:62:in `block in match_with_specifiers?'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:59:in `each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:59:in `all?'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:59:in `match_with_specifiers?'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:22:in `block (2 levels) in each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:140:in `block in each_element'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:139:in `each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:139:in `each_element'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:21:in `block in each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:20:in `each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:20:in `each'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/locator.rb:150:in `locate'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/element.rb:33:in `locate'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/element.rb:63:in `assert_exists'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/element.rb:132:in `text' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:36:21.003

**解决方案 1：使用 css 定位器**

您将不得不使用 css-locator（或 xpath）：

```
carGroup = browser.span(:css, 'span[name="tab4RateInfoForm.vehicleGroup"]').text 
```

**解决方案 2：猴子补丁**

或者，如果您有很多使用 name 属性的遗留脚本，您可以修改 Watir 以使所有元素（或特定元素，如果需要）具有 name 方法。

将以下内容添加到您需要的任何地方：

```
Watir::IE.new(true)
module Watir
  class Element
    def name
      return self.attribute_value('name')
    end
  end
end 
```

您原来的方法现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:29:35.330

看起来`span`元素不能再通过`name`属性访问。

试试这个（使用通用`element`而不是`span`）：

```
carGroup=browser.element(:name => 'tab4RateInfoForm.vehicleGroup').text 
```

# jquery - 当我给出静态值而不是当用户输入值时，使用 jquery 为文本框获取值

> ID：14122434
> 
> 赞同：0
> 
> 时间：2013-01-02T12:54:45.027
> 
> 标签：jquery, html, input, inputbox

我有一个文本框，我试图获得这样的价值

```
$(function(){
    comment = $("#diaMissedPucomments").val();
}); 
```

当我为文本框提供一些静态值时，这让我获得了价值，而当我允许用户动态输入值时，这并没有让我获得价值。

这是我拥有的 html 代码：

```
<div style="display:none;" id="diaMissedPU" title="Missed P/U Comments" >
                       <table>
                            <tr>
                               <td>Enter Comments : </td>
                               <td><input type="text" id="diaMissedPucomments" name="diaMissedPucomments" />
                                <input type="text" id="textid" name="textid" value="antony" /></td>
                           </tr>
                       </table>
                    </div> 
```

`<input type="text" id="textid" name="textid" value="antony" />`我已经使用这条线进行检查，我能够获得价值`textid`但不能获得价值`diaMissedPucomments`

更新 ：

```
 function openMissedPUComments(){
        var selectedValues = "",comment="";
        $('input:checked').each(function() {
              selectedValues =$(this).val()+","+selectedValues ;
            });
        if(selectedValues.length==0 && selectedValues==""){
            alert("To run this agent you must have at least one document selected");
            return false;
        }else{
          $("#diaMissedPU")
            .dialog(
                    {
                        modal: true,
                        draggable: false,
                        closeOnEscape: true,
                        title: "Missed P/U Comments ",
                        resizable: false,
                        width: 380,
                        // open: function() {
                        //            
                        // },
                        buttons: {
                            Ok: function () {
                                 comment = $("input#diaMissedPucomments").val();
                                 alert("comment : "+comment);
                                 viewname="CIMtrek_Compliance_Daily_Shipments_Case_Pack_Update_MissedPUs";
                                //callHome(viewname,comment);
                                global.getElementById("diaMissedPucomments").value="";
                                $(this).dialog('close');
                            }
                        }
                    });
        }
    } 
```

将调用上述函数以将 div 作为对话框打开。

如何完成这项工作。

请帮我得到这个。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:25:01.907

我认为您误解了对话框的用法。

设置对话框将自动隐藏它，而不是自动打开它。

只需将此属性设置为不自动打开：

```
autoOpen: false 
```

例如，查看这些更改：代码中的注释

```
var comment = ""; //global to hold comment text
$(document).ready(function() {// put in a document ready handler
    $("#diaMissedPU").dialog({
        modal: true,
        autoOpen: false,
        draggable: false,
        closeOnEscape: true,
        title: "Missed P/U Comments ",
        resizable: false,
        width: 380,
        buttons: {
            Ok: function() {
                var mycomments = $("input#diaMissedPucomments");//save to reuse
                comment = mycomments.val();//get value
                alert("comment : " + comment);
                viewname = "CIMtrek_Compliance_Daily_Shipments_Case_Pack_Update_MissedPUs";
                //callHome(viewname,comment);
                mycomments.val("");// clear value
                $(this).dialog('close');
            }
        },
        close: function(event, ui) {// use this or not, just to illustrate
            alert(comment);
        }
    });
    $("#wackme").click(function() {// button to activate your function
        openMissedPUComments();
        alert("commentbefore : " + comment); //NOTE: runs before dialog closes
    });
});

function openMissedPUComments() {
    var selectedValues = "";
    comment = "";//clear value in variable
    $('input:checked').each(function() {
        selectedValues = $(this).val() + "," + selectedValues;
    });
    if (selectedValues.length == 0 && selectedValues == "") {
        alert("To run this agent you must have at least one document selected");
        return false;
    } else {
        $("#diaMissedPU").dialog("open");
    }
} 
```

示例工作：http: [//jsfiddle.net/Hw6ZA/](http://jsfiddle.net/Hw6ZA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:03:54.933

它来了。只要检查这个..

```
$("#diaMissedPucomments").blur(function() {
    comment = $("#diaMissedPucomments").val();
    alert(comment);
}); 
```

我不知道你为什么给 style="display:none;"

# c# - System.Xml.Linq 的替代方案以匹配 Xpath

> ID：14122436
> 
> 赞同：0
> 
> 时间：2013-01-02T12:54:53.337
> 
> 标签：c#, xml, xpath, .net-framework-version

我曾经 `System.Xml.Linq;`从 xml 文档中匹配 Xpath。`XElement`并且`SaveOptions`都从`System.Xml.Linq;`.

```
 XmlNamespaceManager nsmgr = new XmlNamespaceManager(new NameTable());
            nsmgr.AddNamespace("ns", "http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-03T16:54:46");

            XElement docRfsid = XElement.Parse(content);
            //if (docRfsid.XPathSelectElement("//ns:RFSID", nsmgr).Value != null)
            if (Regex.Match(docRfsid.ToString(), "RFSID", RegexOptions.IgnoreCase).Success)
            {
                projData.RfsId = docRfsid.XPathSelectElement("//ns:RFSID", nsmgr).Value.ToString();
            }

            XElement doc_Financial = XElement.Parse(content);
            string resultFinancial = doc_Financial.XPathSelectElement("//ns:Financial", nsmgr).ToString(SaveOptions.DisableFormatting); 
```

我只想删除`System.Xml.Linq;`dll，因为我只能使用 .net framework 2.0。有没有其他替代方法可以用来`System.Xml.Linq;`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:58:23.663

是的。使用[System.Xml.XmlDocument](http://msdn.microsoft.com/en-au/library/system.xml.xmldocument.aspx)，特别是其上的[SelectNodes()](http://msdn.microsoft.com/en-au/library/hcebdtae.aspx)方法、[DocumentElement](http://msdn.microsoft.com/en-au/library/system.xml.xmldocument.documentelement.aspx)属性或任何[XmlElement](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.aspx)实例。此方法接受 XPath 并返回匹配的 XmlElement 列表（无论它们是节点 (XmlNode) 还是属性 (XmlAttribute)）。这是基于旧的 COM XmlDocument 对象，并且可以追溯到框架的 1.1 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:06:11.903

系统文件

就像是

```
XmlDocument doc = new XmlDocument();
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("ns", "http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-03T16:54:46");
XmlNode financialNode = doc.DocumentElement.SelectNode("ns:Financial",nsmgr);
strring resultFinancial = null;
if (financialNode != null)
{
  resultFinancial = financialNode.InnerText;
} 
```

那类的东西。

# jquery - jquery 工具提示+live

> ID：14122442
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:55:16.970
> 
> 标签：jquery, tooltip

我有这个代码

```
$(".tooltip").each(function(){
        var tooltip = this.title;
        this.title = "";
        $(this).live("mousemove",function(e){
             $("#tooltip").html(tooltip).show();
        }).live("mouseout",function(){
            $("#tooltip").hide().empty();
        });
    }); 
```

它工作得很好，但是通过 ajax 动态加载的元素呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:04:47.647

它是否需要在 .each() 中？这会起作用吗：

```
$(document).on({
    mouseover: function() {
        $('#tooltip').html(tooltip).show();
    },
    mouseout: function() {
        $('#tooltip').hide();
    }
}, '.tooltip'); 
```

添加了一个[jsFiddle 示例](http://jsfiddle.net/psyon001/uNvB3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:01:32.417

您可以使用 document.ready 函数，这将在加载所有元素后运行您的函数。IE 。

```
$(document).ready(function() {
   $(".tooltip").each(function(){
        var tooltip = this.title;
        this.title = "";
        $(this).live("mousemove",function(e){
             $("#tooltip").html(tooltip).show();
        }).live("mouseout",function(){
            $("#tooltip").hide().empty();
        });
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:05:00.687

您应该使用[on](http://api.jquery.com/on/)确保将事件传输到稍后添加的元素：

```
$(document).on('mousemove', ".tooltip", function(e){
     this.title = "";
     $("#tooltip").html(this.tooltip).show();
}).on('mouseout', ".tooltip", function(e){
     this.title = "";
     $("#tooltip").html(this.tooltip).hide();
}); 
```

这将适用于所有`.tooltip`元素。不需要你的`each`.

# ajax - jQuery.getJSON - 将数据参数分配给变量？

> ID：14122446
> 
> 赞同：0
> 
> 时间：2013-01-02T12:55:21.427
> 
> 标签：ajax, jquery

我无法将 jQuery.getJSON 函数的数据参数分配给变量。

```
var storage;

$.getJSON('server.json', function(data) {
    storage = data;
});

console.log(storage); 
```

编辑：好的，我明白了，所以假设“存储”变量等于 server.json 文件，但我不能使用它，因为 $.getJSON 下面的代码行在服务器回答之前执行，所以我该如何检查何时回答服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:56:21.430

我想，“在*那之后”*，你的意思是*“在代码下面” 。*

如果是这样，那么它不是在服务器回答之后。

用这个 ：

```
var storage;
$.getJSON('server.json', function(data) {
    storage = data;
    console.log(storage);
}); 
```

在服务器（异步）应答后调用您提供给 getJSON 的回调。那是你必须处理结果的地方。下面的代码行在服务器应答**之前**`$.getJSON(...);`执行，因此它们不能使用结果。

# java - java抽象类，构造函数没有在超类中调用，为什么？

> ID：14122450
> 
> 赞同：0
> 
> 时间：2013-01-02T12:55:44.267
> 
> 标签：java, class, constructor, abstract

下面是一个简单的例子。我有两个抽象类，`A`一个`B`具体类，`C`其中包含抽象方法。

当我创建一个 new`C`时，我希望看到构造函数`A`并被`B`调用。知道为什么不叫他们吗？

```
//Q.java
class Q {
    abstract class A {
        A() {
            System.out.println("in A");
        }
        public abstract void sayHi();
    }
    abstract class B extends A {
        B() {
            super();
            System.out.println("in B");
        }
    }
    class C {
        C() {
            super();
            System.out.println("in C");
        }
        public void sayHi() {
            System.out.println("Hi!");
        }
    }

    Q() {
        C Ccc = new C();
    }

    public static void main(String[] args) {
        Q z = new Q();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:57:17.973

因为超类`c`是`Object`

其他类名以大写字母开头`A,B,C,etc`

如果您想同时查看`a`和`b`调用，请执行以下操作：

```
class c extends b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:57:14.397

您的类`c`没有扩展 class `b`or `a`，因此它不能使用`super()`并调用`Object`构造函数来调用它们的构造函数。

尝试这个 ：

```
class c extends b {
    public c(){
        super();
        //...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:58:57.997

您应该从 class 扩展抽象类`c`。

```
class c extends b { 
```

没有`b`显式扩展，它等价于

```
class c extends Object { 
```

并且，因此调用`super`调用`Object`构造函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T12:59:02.400

只需：

```
class c extends b{ 
```

它现在可以工作了..你还没有在c中扩展b ..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T13:23:10.010

看，我们有所有类都隐式扩展的超类 Object。所以如果我们有 `public class A{}` then 它相当于写作 `public class A extends Object{}`。但是如果你想扩展你自己的另一个类，那么你必须明确提及它， `public class B extends A{}` 否则 java 会将 Object 视为你的超类。（注意：即使在这种情况下，Object 也是“B”的超类，但这是因为它是“A”的超类，因此是“B”的超类）。因此，如果您没有明确提及“B 扩展 A”，那么 B 类将拥有 Object 作为其唯一的超类。此外，您不需要在子类构造函数中提及 super() 。这也被隐式调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T13:28:02.367

`C`并且`B`没有任何关系。C 的超类`java.lang.Object`默认是

`C`应该`B`像

```
class C extends B{ .. } 
```

在这种情况下，它将调用超类构造函数。

此外，您不需要`super()`显式调用，因为它隐式存在。

# spring - 在 Spring 控制器中发送表单数据而不使用注释

> ID：14122456
> 
> 赞同：0
> 
> 时间：2013-01-02T12:56:09.153
> 
> 标签：spring, spring-mvc, spring-form

我想在不使用注释的情况下在控制器中发送表单输入数据。

在这段代码中，我试图从我使用 Spring 的 jsp 文件中获取 ,`employeeNo`标记`empName`，但是当我尝试获取值时，它没有获取值并引发异常：`deptNo``<form:form>``<form:input>`

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object 
for bean name 'command' available as request attribute 
```

我的**控制器**：

```
package com.nousinfo.tutorial.controllers;

import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.dao.EmptyResultDataAccessException;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

import com.nousinfo.tutorial.service.impl.EmployeeServiceImpl;
import com.nousinfo.tutorial.service.model.EmployeeBO;

public class SearchEmployeeController extends MultiActionController {
    private EmployeeServiceImpl employeeServiceImpl;

    public void setEmployeeServiceImpl(EmployeeServiceImpl employeeServiceImpl) {
        this.employeeServiceImpl = employeeServiceImpl;
    }

    public ModelAndView searchByEmpNo(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        EmployeeBO empDetails = null;
        try {
            if (employeeServiceImpl.getEmployee(Long.parseLong(request
                    .getParameter("employeeNo"))) != null) {
                empDetails = employeeServiceImpl.getEmployee(Long
                        .parseLong(request.getParameter("employeeNo")));
            }
        } catch (EmptyResultDataAccessException e) {
            return new ModelAndView("successSingleEmp", "empDetails",
                    empDetails);
        }
        return new ModelAndView("successSingleEmp", "empDetails", empDetails);
    }

    public ModelAndView searchByEmpName(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        List<EmployeeBO> listEmployeeBO = employeeServiceImpl
                .findEmployees(request.getParameter("empName"));
        return new ModelAndView("successMultipleEmps", "listEmployeeBO",
                listEmployeeBO);
    }

    public ModelAndView searchByDeptNo(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        List<EmployeeBO> listEmployeeBO = employeeServiceImpl
                .getAllEmployeeByDeptid(request.getParameter("deptNo"));
        return new ModelAndView("successMultipleEmps", "listEmployeeBO",
                listEmployeeBO);
    }

} 
```

* * *

我的**jsp**文件：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<fmt:setBundle basename="ApplicationResources" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Employee Search Page</title>
</head>
<body>
    <form:form action="search.spring" method="post">
        <table border="0">
            <tr>
                <td><form:label path="employeeNo">Employee_ID</form:label> <form:input
                        path="employeeNo" /></td>
                <td><input type="submit" name="method" value="FindById" /></td>
            </tr>
            <tr>
                <td><form:label path="empName">Employee_Name</form:label> <form:input
                        path="empName" /></td>
                <td><input type="submit" name="method" value="FindByName" /></td>
            </tr>    
            <tr>
                <td><form:label path="deptNo">Employee_Name</form:label> <form:input
                        path="deptNo" /></td>
                <td><input type="submit" name="method" value="FindByDeptNO" /></td>
            </tr>
            <tr>
                <td colspan="2" align="center"><font size=3>For
                        Searching the employees by<b>Employee Name</b><br />you can use %
                        match all the records with the given pattern
                </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                            matches alL the employees whose name starts with character <b>S</b></i></font></td>
            </tr>
        </table>
    </form:form>
</body>
</html> 
```

* * *

我的**xml**文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.springframework.org/schema/beans">
    <import resource="/services-context.xml" />
    <bean id="searchController"
        class="com.nousinfo.tutorial.controllers.SearchEmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl" />
        <property name="methodNameResolver" ref="methodNameResolver" />
    </bean>    

    <bean id="myurlmapping"
    class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="search.spring">searchController</prop>
            </props>
        </property>
    </bean>    

    <bean id="methodNameResolver"
        class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
        <property name="paramName" value="method" />
    </bean>

    <!-- configuring BeanNameViewResolver -->
    <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"></bean>

    <!-- configuring exception Resolver -->
    <bean
        class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
        <property name="exceptionMappings">
            <props>
                <prop key="org.springframework.dao.DAOException">dberrorView</prop>
                <prop key="java.lang.NumberFormatException">notANumber</prop>
            </props>
        </property>
    </bean>
    <!-- configuring views required to render the view for /search.spring -->
    <bean name="successSingleEmp" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/EmployeeDetail.jsp" />
    </bean>
    <bean name="successMultipleEmps" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/EmployeeList.jsp" />
    </bean>
    <bean name="dberrorView" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/DBError.jsp" />
    </bean>
    <bean name="notANumber" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/NotANumberError.jsp" />
    </bean>
    <!-- CONFIGURING THE MEASSAGE RESOURCES FOR THIS APPLICTION CONTEXT -->
    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="/com/nousinfo/resources/ApplicationResources" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:26:29.973

错误的原因是请求中没有可以绑定字段的对象。因此，当您返回此视图时，您需要将一个 Object 传递给 jsp。

在返回上述 jsp 的方法中，使用表单执行此操作

```
public ModelAndView yourMethodForView(){
//Assuming Employee object has employeeNo and empName
Employee emp = new Employee();
//your code
return new ModelAndView("yourFormJspName","employee",emp);
} 
```

# php - 无法修改标头信息 - 在 LocalHost 上工作，但不在 WebServer 上？

> ID：14122464
> 
> 赞同：1
> 
> 时间：2013-01-02T12:56:46.837
> 
> 标签：php, header, controls, panel

我目前正在为我臭名昭著的 Minecraft 投票系统制作一个控制面板——但是我遇到了一个问题。我的代码在 XAMPP 上运行良好 - 但在我的网络服务器上无法运行。

我有两页。一个是登录页面，一个是索引。登录页面只是获取 SQL 数据库的用户信息，并检查它，将用户登录，并使用 html 元刷新进行重定向，因为网络服务器不允许使用 PHP 标头。

索引页简单地说“欢迎 $user”。所有这些都像 XAMPP 上的魅力一样，但在我的网络服务器上运行得不是很好。由于登录时出现此错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/linkycra/public_html/MonlotronCP/login.php:3) in /home/linkycra/public_html/MonlotronCP/login.php on line 136 
```

这是 login.php 代码 - [http://puu.sh/1IrEu.png](http://puu.sh/1IrEu.png)

这是 index.php 代码 - [http://puu.sh/1IrF1.png](http://puu.sh/1IrF1.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:58:21.477

在您的标头函数之前必须有一些 html 或空格，请检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:10:11.750

检查此页面上的示例：http: [//php.net/manual/en/function.headers-sent.php](http://php.net/manual/en/function.headers-sent.php)

它可以帮助您追踪它发生的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:20:31.107

您`setcookie()`在已经将 HTML 发送到浏览器之后使用。`setcookie()`将发送一个 HTTP 标头，但会出错，因为您已经在表单之前发送了 HTML。错误仅在您登录时出现的原因是触发 setcookie() 时。一旦内容已经输出到浏览器，您就不能发送 HTTP 标头。

它在一台机器上而不是另一台机器上工作的原因是一台机器已`error_reporting`打开或设置为显示，而另一台没有，或者它们处于不同的错误级别。您需要`setcookie()`在输出任何内容之前重组代码运行位置`<html>`，`<!DOCTYPE>`以及任何空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:20:35.153

可以通过[输出缓冲](http://php.net/ob_start)来解决，如果它是一个错字，你应该解决它。

# android - 这行“ArrayAdapter”是什么意思 适配器 = "

> ID：14122469
> 
> 赞同：-4
> 
> 时间：2013-01-02T12:57:09.487
> 
> 标签：android, android-intent

我想知道，以下行的含义是什么。部分是什么`<String>`意思？

```
ArrayAdapter<String> adapter = 
```

这是完整的代码行。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(ExternalData.this, android.R.layout.simple_spinner_item, paths); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:14:44.827

这`<String>`一切都意味着`ArrayAdapter`将使用`String[]`数据（`paths`参数）。换句话说，数组中的每个元素都是一个`String`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:18:17.963

这些类型的语句称为**泛型**。由于 Android 框架大量使用它们，因此您需要对这些有一定的了解。

简而言之，在这个特定的实例中，The`ArrayAdapter`可以与许多不同类型的对象一起使用。该语句`ArrayAdapter<String>`意味着`ArrayAdapter`将与类型字符串一起使用。

这是一个关于java泛型的简单初学者教程：

[http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html](http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html)

如果您有更多问题，请仔细阅读并回来。祝你好运！

# iphone - CGAffineTransform 旋转 90 度

> ID：14122470
> 
> 赞同：1
> 
> 时间：2013-01-02T12:57:11.260
> 
> 标签：iphone, ios, ios5, ios4, cgaffinetransform

我需要将图像旋转 90 度，即交换宽度和高度（翻转图像）。这需要在我将图像提供给编码器以从中创建视频之前完成。我使用以下代码（参考：[如何将 UIImage 数组导出为电影？](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie/3742212#3742212)）

 `````
- (CVPixelBufferRef) newPixelBufferFromCGImage: (CGImageRef) image
{
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
        [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
        nil];
    CVPixelBufferRef pxbuffer = NULL;
    CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, CGImageGetWidth(image),
        CGImageGetHeight(image), kCVPixelFormatType_32ARGB, (CFDictionaryRef) options, 
        &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, CGImageGetWidth(image),
        CGImageGetHeight(image), 8, 4*CGImageGetWidth(image), rgbColorSpace, 
        kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
    CGContextConcatCTM(context, CGAffineTransformMakeRotation(1.571)); // ROTATION
    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), 
        CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
````  `但是，旋转 90 度不起作用（由注释指示）。你能找出问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:55:56.940

您正在应用的变换是旋转上下文，问题是原点位于角落而不是上下文的中心。通过将图像旋转 90 度，您可以将其完全移动到负边界，因此看不到任何东西。假设在您的代码中 frameSize 是旋转图像的大小（具有倒置的宽度/高度），您需要将此原点移动到中心并在那里应用旋转。尝试：

```
CGContextTranslateCTM(context, frameSize.width / 2, frameSize.height / 2);
CGContextRotateCTM(context, M_PI_2);
CGContextTranslateCTM(context, -frameSize.height / 2, -frameSize.width / 2);
CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);

- (CVPixelBufferRef) newPixelBufferFromCGImage: (CGImageRef) image
{
    CGSize frameSize = CGSizeMake(CGImageGetHeight(image), CGImageGetWidth(image));
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
        [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
        nil];
    CVPixelBufferRef pxbuffer = NULL;
    CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, frameSize.width,
        frameSize.height, kCVPixelFormatType_32ARGB, (CFDictionaryRef) options, 
        &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, frameSize.width,
        frameSize.height, 8, 4 * frameSize.width, rgbColorSpace, 
        kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
    CGContextTranslateCTM(context, frameSize.width / 2, frameSize.height / 2);
    CGContextRotateCTM(context, M_PI_2);
    CGContextTranslateCTM(context, -frameSize.height / 2, -frameSize.width / 2);
    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);

    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), 
        CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
`````

# php - 使用 .htaccess 时出现 HTML href url 错误

> ID：14122481
> 
> 赞同：0
> 
> 时间：2013-01-02T12:57:34.877
> 
> 标签：php, html, apache, .htaccess

我的根目录中有一个 .htaccess 文件。是这样的：

```
RewriteEngine On
RewriteRule ^(.+) index.php?url=$1 [QSA,L] 
```

在我的 index.php 文件中，我尝试执行以下操作：

```
<img src="myimage.png"/> 
```

但是，图像未加载。当我删除 .htaccess 文件并刷新页面时，图像又回来了。

那么这里有什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:03:09.053

图像也与表达式匹配，因此它也被重定向到 index.php。您可以尝试通过使用重写条件进行扩展来排除图像。

```
RewriteCond %{REQUEST_URI} !\.(gif¦jpe?g¦png¦css¦js¦doc¦mp3¦pdf¦xls)$ 
```

另一种选择是使用排除已存在文件的条件

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

和存在的目录

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

# linq - 获取三级层次的数据

> ID：14122493
> 
> 赞同：0
> 
> 时间：2013-01-02T12:58:06.210
> 
> 标签：linq, linq-to-sql

我想开发一个有多个论坛的讨论应用程序。在每个论坛中可以有许多主题。在每个线程中，可以有多个帖子。在 SQL 中，我有以下四个表：

`FORUMS`

*   Id - int 身份
*   Name - nvarchar //论坛名称

`THREADS`

*   Id - int 身份
*   ForumId - FORUMS.Id 的 int 外键
*   主题 - nvarchar

`POSTS`

*   Id - int 身份
*   ThreadId - THREADS.Id 的 int 外键
*   提交者 - USERS.Id 的 int 外键
*   SubmitterOn - 日期时间
*   内容 - nvarchar

`USERS`

*   Id - int 身份
*   名称 - nvarchar

返回包含数据库中所有论坛的以下列的列表的最佳方法是什么（列表中的一行对应于 中的一行`FORUMS`）：

*   `Forum`- FORUMS.名称
*   No of Threads - THREADS 中的总行数`Forum`
*   帖子数 - 帖子中属于的总行数`Forum`
*   Last Thread - THREADS.Subject 属于最近的 POSTS`Forum`
*   Last Post Submitter - USERS.Name 最近的 POSTS 属于`Forum`
*   Last Post Submitted time - POSTS.SubmittedOn 属于最近的 POSTS`Forum`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:31:56.253

就像是：

```
var query = from f in context.Forums
            select new
            {
                Name = f.Name,
                Threads = f.Threads.Count(),
                Posts = f.Threads.Sum(t => t.Posts.Count()),
                LastThread = f.Threads.OrderByDescending(t => t.Id).First().Subject,
                LastPostSubmitter = f.Threads.SelectMany(t => t.Posts).OrderByDescending(p => p.SubmitterOn).First().Name,
                LastPostSubmitterTime = f.Threads.SelectMany(t => t.Posts).OrderByDescending(p => p.SubmitterOn).First().SubmitterOn
            } 
```

# android - Android 从 facebook 应用程序打开自定义 url 方案

> ID：14122494
> 
> 赞同：0
> 
> 时间：2013-01-02T12:58:05.773
> 
> 标签：android, google-chrome, facebook-android-sdk, custom-url

我`intent-filter`习惯用我的应用程序打开自定义网址，它工作正常..

当我试图从 google chrome 浏览器或 facebook 本地应用程序帖子中打开我的自定义 url 时（在私人消息中效果很好）它不起作用并将其作为网站打开。

我的代码：

```
<intent-filter>
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <action android:name="android.intent.action.VIEW" />
  <action android:name="android.intent.action.SEND" />
  <data
    android:host="mydomain.co.il"
    android:scheme="http" />
  <data
    android:host="www.mydomain.co.il"
    android:scheme="http" />
  <data
    android:host="www.mydomain.co.il"
    android:scheme="myscheme" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T10:54:15.723

可能它与以下参考文章中提到的错误相同，它指出它的 [Chromium 错误](https://code.google.com/p/chromium/issues/detail?id=181186)，您可以在那里看到解决此问题的方法。

[OAuth 和自定义方案导致 Chrome 中出现“ERR_UNKNOWN_URL_SCHEME”](https://stackoverflow.com/questions/15568792/oauth-and-custom-scheme-result-in-a-err-unknown-url-scheme-in-chrome)

# java - 在编译/运行时替换 Java 类型

> ID：14122495
> 
> 赞同：0
> 
> 时间：2013-01-02T12:58:10.453
> 
> 标签：java, profiling

我有一个要替换的类型列表，用于记录目的，但不更改我的代码（记录部分只是偶尔使用）。我正在寻找一种简单的方法来为我的类字段创建某种代理，以便在运行时知道我的类字段何时更改，或者当我没有类源代码（例如 LinkedList）时，当调用类方法时。

例如，如果我有这个代码，这是一个属于我的类，我只需要收到有关 MyClass 字段状态更改的警告：

```
public class MyClass {

   private LinkedList<Integer> myList;

   private int myInteger;

   public void myMethod() 
   {
      myInteger = 15;
      myList = new LinkedList<Integer>();
   }

   public void myOtherMethod()
   {
      myList.add(1);
   }

   public LinkedList<Integer> getMyList() {
      return myList;
   }
} 
```

我需要知道，在运行时（但代码修改可以在编译时完成），每次有人更改 的值时`myInteger`，添加一个元素`myList`并更改`myList`引用的`LinkedList`. 我认为解决方案不应该完全通过代码分析来完成，因为列表引用可以通过参数传递到任何地方，比如`getMyList()`

在这种情况下，日志记录仅用于字段，无论它们是原始的还是对象。对于我没有代码的类型（如 LinkedList），如果在调用某个方法或读取或写入任何公共字段时收到通知，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:08:12.793

您可能可以使用 AspectJ 来连接这些事件...请参阅[切入点](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-pointcuts.html)以获取有关何时可以连接的信息。

或者您使用 CGLib 或任何其他字节码库在加载时修改字节码并注入额外的逻辑，如增加访问计数器或类似的字段访问。

或者您扩展[Lombok](http://projectlombok.org)以编织所需的代码。（我发现这比修改纯 java 字节码更容易）。这将是编译时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:12:26.183

我建议您只为集合返回一个接口（而不是具体类）并使其不可变。

```
public class MyClass {
    private final List<Integer> myList = new ArrayList<>();
    private int myInteger;

    public void myMethod() {
        myInteger = 15;
    }

    public void myOtherMethod(int i) {
        myList.add(i);
    }

    public List<Integer> getMyList() {
        return Collections.unmodifiableList(myList);
    }
} 
```

如您所见，调用者无法修改列表，因此在发生这种情况时无需通知您。如果调用者想要修改列表，它必须调用您的方法之一，在这种情况下您将知道更改。

> 我没有类源代码（例如 LinkedList），

您可以访问它，只是不应该修改它。（如果你真的想要，你也可以这样做）

相反，您可以将集合子类化，这将修改您更改的任何方法。但是，返回不可变集合是最佳实践。

# c# - 使用 asp.net 的 Javascript 警报

> ID：14122498
> 
> 赞同：0
> 
> 时间：2013-01-02T12:58:18.107
> 
> 标签：c#, javascript, asp.net, alert

我想在 asp.net 按钮单击时弹出一个 js 警报框。我的代码是

```
 String jscript = @"<script language = 'javascript'> alert('This is my title');</script>";
 ClientScript.RegisterStartupScript(GetType(), "_jscript", jscript); 
```

它工作正常，但我想稍后再有一些 js 弹出窗口进行一些验证，我假设我必须编写相同的代码，但不幸的是它不会在同一页面上加载其余的弹出窗口。

这与更新面板有关吗？

我正在验证的控件是

```
if (dp_menu.SelectedIndex > 0)
{
   //continue program
}
else
{
  //show popup
  //this pop p doesn't show up at all?
  String jscript = @"<script language = 'javascript'> alert('Another popup');</script>";
  ClientScript.RegisterStartupScript(GetType(), "_jscript", jscript);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:30:34.817

看看[规范`RegisterStartupScript`](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)，特别是备注部分：

> 客户端脚本由其密钥和类型唯一标识。具有相同键和类型的脚本被认为是重复的。页面中只能注册一个具有给定类型和密钥对的脚本。尝试注册已注册的脚本不会创建该脚本的副本。

如果您每次都通过相同的类型`GetType()`和相同的键 ,传递相同的类型`"_jscript"`，那么只有第一次调用会导致任何`<script>`被渲染。这是设计使然。

**糟糕的修复**`"_jscript"`：对于您执行的每个验证，用不同的密钥替换您不变的密钥`"_valNameIsBlank"`，例如`"_valNoItemSpecified"`.

**更好的解决方法**：通过以下方式避免让用户因多个验证弹出窗口而烦恼：

*   编译`List<string>`所有验证失败
*   完成所有检查后，查看列表中是否有任何项目
*   如果是这样，请将它们连接成单个验证失败消息并在单个警报中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:31:51.890

在 RegisterStartupScript 中，每个脚本的键值应该不同

尝试不同的 KeyValues，而不是在所有脚本中使用“_jscript”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:11:00.987

我会给你一些更有效的东西，
服装控制

1.  创建新的类库（Library_name）

将此类添加到库中

```
using System.Text;
using System.Web.UI;
using System.ComponentModel;

namespace ClientSide
{
    [DefaultProperty("Text"),
    ToolboxData("<{0}:MessageBox runat=server>" 
        + "</{0}:MessageBox>")]
    public class MessageBox : System.Web.UI.Control 
    {
        private string text="";
        [Bindable(true),
        Category("Appearance"),
        DefaultValue("")]
        public string Text
        {
            get {return text;}
            set {text = value;}
        }

        protected override void Render(HtmlTextWriter output)
        {
            if (text.Length>0)
            {
                StringBuilder sb = new StringBuilder();
                sb.Append("<script language='javascript'>");
                sb.Append("alert('"+text+"')");
                sb.Append("</script>");
                output.Write(sb.ToString());
            }
        }
    }
} 
```

要使用它，您必须在 aspx 页面的顶部注册控件

```
<%@ Register TagPrefix="cc1" Namespace="ClientSide" Assembly="Library_Name" %> 
```

3-然后您可以在aspx页面中像这样使用它

```
<cc1:MessageBox id="MessageBox1" runat="server" Text="popup Message"></cc1:MessageBox> 
```

# email - 确定我的交换服务使用哪个端口发送电子邮件 -> cakePhP CakeEmail

> ID：14122508
> 
> 赞同：0
> 
> 时间：2013-01-02T12:58:50.887
> 
> 标签：email, cakephp, smtp, outlook-2007

我正在尝试使用 smtp 协议使用 cakephp 发送邮件。

这是我的 email.php：

```
class EmailConfig {

    public $smtp = array(
        'transport' => 'Smtp',
        'from' => array('account@mail.sk' => 'Me'),
        'host' => 'ip_address',
        'port' => 1234,
        'timeout' => 30,
        'username' => 'account',
        'password' => 'password',

/* dont know what these parameters below are for */
        'client' => null, 
        'log' => true,
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    ); 
```

这是我用于测试的功能（单击链接后，它应该发送一些虚拟邮件）：

```
 public function testSendEmail() {
        $this->autoRender = false;
                    $email = new CakeEmail('smtp');
        $email->from(array('account@mail.com' => 'Test'));
        $email->to('me@gmail.com');
        $email->subject('Test subject');
        $email->send('Dummy post');
    } 
```

我认为我的代码还可以（尽管我没有尝试过，因为 gmail 在我们的办公室中受到限制，所以我无法使用我的 gmail 设置进行尝试）。单击链接后 ($this->Html->link('link', array('controller'=>'users', 'action'=>'send_mail'));) 没有任何反应（网站刷新）我做没有任何错误，甚至在 tmp/error.log 中也没有

我想我的端口不正确。（但您会想到任何其他原因，将不胜感激）

**经过一番挖掘后，我找到了需要将其发送到的主机，我的问题是：**

如何找到我的邮件服务 (Outlook 2007) 用于发送邮件的端口？

**我尝试了什么：**

1.  [http://www.authsmtp.com/outlook-2007/alternate-port.html](http://www.authsmtp.com/outlook-2007/alternate-port.html)，但自图片 2 以来的所有对话框都与图片不同。

2.  还在命令行中尝试了 netstat -a ，但与我的 OUTLOOK 对应的两个端口都没有工作。

**补充笔记：**

1.  我在本地主机上编写这个应用程序（xampp -> apache）
2.  我在 php.ini 中添加了这个“extension=php_openssl.dll”行（它在一些教程中提出）并且没有发生任何变化（仍然没有错误，仍然没有邮件）

**更新：**

将函数的名称更改为“test_send_email”，现在它不会刷新，但在删除自动渲染并将 test_send_email.ctp 视图添加到我的 MVC 后，会显示此错误：

*SMTP 超时。错误：发生内部错误。*

所以我想我是对的，我没有正确的端口..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:22:40.650

默认端口是 25，这里就是这种情况。

您可以使用 cmd 命令 telnet name_of_server 25 检查它

在 Outlook 2007 中，可以通过右键单击消息 -> 选项 -> 对话框中的下方是此消息的标题来找到服务器地址。

# jsf-2 - 将人脸导航规则放在单独的文件中

> ID：14122514
> 
> 赞同：0
> 
> 时间：2013-01-02T12:59:09.497
> 
> 标签：jsf-2

我在某处读过，可能会将面导航规则放置在与 faces-config.xml 分开的 xml 文件中，但我现在在任何地方都找不到该引用。有没有人遇到过这个？JSF 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:04:47.167

应用程序的`context-param`web.xml 文件中的一个。与您想要的 JSF 文件一样。

```
<context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml, /WEB-INF/faces-managed-beans.xml, /WEB-INF/faces-navigation.xml</param-value>
</context-param> 
```

# facebook - 如何在 ChattAR iOS 应用中获取非好友消息

> ID：14122519
> 
> 赞同：0
> 
> 时间：2013-01-02T12:59:26.987
> 
> 标签：facebook, quickblox

在[ChattAR](https://github.com/QuickBlox/ChattAR-ios) iOS 应用程序中，我们可以接收非朋友消息（如果 Facebook 上不是我朋友的人给我发消息）`MessagesViewController`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:25:19.940

不，我们不能，这是 Facebook 聊天 API 限制[http://developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

# java - 从 Java 数组中获取前四个最大值

> ID：14122526
> 
> 赞同：5
> 
> 时间：2013-01-02T12:59:51.727
> 
> 标签：java, arrays, algorithm, sorting

我试图从整数数组输入中找到前 4 个最大值。例如，对于给定的输入数组 {1232, -1221, 0, 345, 78, 99} 将返回 {1232, 345, 99, 78} 作为前 4 个最大值。我已经用下面的方法解决了这个要求。但我仍然不满意它的时间效率。随着输入变大，是否有机会进一步优化该方法？任何线索都非常感谢。谢谢你。

```
public int[] findTopFourMax(int[] input) {
int[] topFourList = { Integer.MIN_VALUE, Integer.MIN_VALUE, Integer.MIN_VALUE,       Integer.MIN_VALUE };
for (int current : input) {
    if (current > topFourList[0]) {
        topFourList[3] = topFourList[2];
        topFourList[2] = topFourList[1];
        topFourList[1] = topFourList[0];
        topFourList[0] = current;
    } else if (current > topFourList[1]) {
        topFourList[3] = topFourList[2];
        topFourList[2] = topFourList[1];
        topFourList[1] = current;
    } else if (current > topFourList[2]) {
        topFourList[3] = topFourList[2];
        topFourList[2] = current;
    } else if (current > topFourList[3]) {
        topFourList[3] = current;
    }
}
return topFourList; 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T13:01:16.137

**最简单**（虽然不是最有效）的方法是对包含最后 4 个元素**的子数组进行排序。**

您可以使用[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)排序和[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28int%5B%5D,%20int,%20int%29)获取子数组。

```
int[] arr = new int[] {1232, -1221, 0, 345, 78, 99};
Arrays.sort(arr);
int[] top4 = Arrays.copyOfRange(arr, arr.length-4,arr.length);
System.out.println(Arrays.toString(top4)); 
```

* * *

为了更有效的解决方案，可以维护前 K**[个元素的最小堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)**或使用**[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)**找到前 4 个元素。[此线程](https://stackoverflow.com/q/10751953/572670)中描述了这两种方法。

尽管选择算法提供了`O(n)`解决方案，但最小堆解决方案（即`O(nlogK)`）应该有更好的常数，尤其是对于小`k`的可能更快。

PS（编辑）：

对于 4 个元素，您可能会发现调用循环 4 次，并在每个元素中找到一个最大值（并在每次迭代中将旧的最大值更改为 -infinity）将比更“复杂”的方法更有效，因为它需要顺序读取并且具有相当小的常量。对于 large ，这当然不是真的，而是`k`衰减到`O(n^2)`for`k->n`

* * *

**EDIT2：基准测试：**

为了好玩，我对附加的代码进行了基准测试。结果是：

```
[naive, sort, heap] = [9032, 214902, 7531] 
```

我们可以看到，naive 和 heap 比基于排序的方法要好得多，并且 naive 比基于堆的方法稍慢。我做了一个[wilcoxon 测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)来检查 naive 和 heap 之间的差异是否具有统计显着性，我得到的 P_Value 为`3.4573e-17`. 这意味着两种方法“相同”的概率为 3.4573e-17（极小）。由此我们可以得出结论——**基于堆的解决方案比单纯的排序解决方案具有更好的性能**（我们已经通过经验证明了这一点！）。

附件：我使用的代码：

```
public static int[] findTopKNaive(int[] arr, int k) {
    int[] res = new int[k];
    for (int j = 0; j < k; j++) { 
        int max=Integer.MIN_VALUE, maxIdx = -1;
        for (int i = 0; i < arr.length; i++) { 
            if (max < arr[i]) { 
                max = arr[i];
                maxIdx = i;
            }
        }
        arr[maxIdx] = Integer.MIN_VALUE;
        res[k-1-j] = max;
    }
    return res;
}

public static int[] findTopKSort(int[] arr, int k) { 
    Arrays.sort(arr);
    return Arrays.copyOfRange(arr, arr.length-k,arr.length);
}

public static int[] findTopKHeap(int[] arr, int k) { 
    PriorityQueue<Integer> pq = new PriorityQueue<Integer>();
    for (int x : arr) { 
        if (pq.size() < k) pq.add(x);
        else if (pq.peek() < x) {
            pq.poll();
            pq.add(x);
        }
    }
    int[] res = new int[k];
    for (int i =0; i < k; i++) res[i] = pq.poll();
    return res;

}
public static int[] createRandomArray(int n, Random r) { 
    int[] arr = new int[n];
    for (int i = 0; i < n; i++) arr[i] = r.nextInt();
    return arr;
}
public static void main(String... args) throws Exception {
    Random r = new Random(1);
    int k = 4;
    int repeats = 200;
    int n = 5000000;
    long[][] results = new long[3][repeats];
    for (int i = 0; i < repeats; i++) { 
        int[] arr = createRandomArray(n, r);
        int[] myCopy;
        myCopy = Arrays.copyOf(arr, n);
        long start = System.currentTimeMillis();
        findTopKNaive(myCopy, k);
        results[0][i] = System.currentTimeMillis() - start;
        myCopy = Arrays.copyOf(arr, n);
        start = System.currentTimeMillis();
        findTopKSort(myCopy, k);
        results[1][i] = System.currentTimeMillis() - start;
        myCopy = Arrays.copyOf(arr, n);
        start = System.currentTimeMillis();
        findTopKHeap(myCopy, k);
        results[2][i] = System.currentTimeMillis() - start;
    }
    long[] sums = new long[3];
    for (int i = 0; i < repeats; i++) 
        for (int j = 0; j < 3; j++)
        sums[j] += results[j][i];
    System.out.println(Arrays.toString(sums));

    System.out.println("results for statistic test:");
    for (int i = 0; i < repeats; i++) { 
        System.out.println(results[0][i] + " " + results[2][i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:10:03.353

您应该查看[Peter Lawrey 的这个答案](https://stackoverflow.com/a/7878246/1103872)。基本上，这个想法是遍历您的数组，将每个元素添加到 a`SortedSet`并通过在每次迭代中删除最少元素来保持大小为 4。这个过程是 O(n)，即使在最坏的情况下，与 O(n logn) 典型和 O(n ² ) 最坏情况相比，完全排序一个数组。

```
final List<Integer> input = new ArrayList(Arrays.asList(1232, -1221, 0, 345, 78, 99));
final NavigableSet<Integer> topFour = new TreeSet<>();
for (int i : input) {
  topFour.add(i);
  if (topFour.size() > 4) topFour.remove(topFour.first());
}
System.out.println(topFour); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:01:26.727

最简单的方法是对数组进行排序并取前/后 4 个元素。

最后，最多 4 个条目可以在任何地方，所以无论你做什么，你都需要读取整个数组，这将是一个 O(n) 操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:03:10.520

前面提到的对数组进行排序确实提供了最简单的方法，但并不是最有效的。

QuickSort (Quickselect) 的一种变体，可用于查找集合中的第 k 个最大值/最小值。

[http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)

正确的实现允许您在 O(n) 时间内获得第 k 个最大的值。

基本上，您使用枢轴进行分区，就像在快速排序中一样，并将每次迭代后的枢轴位置与您想要的位置（在您的情况下为四个）进行比较，如果相等，则返回该位置，否则，将算法应用于输入的正确一半.

当您找到第 k 个最大值的索引时，您可以简单地再次遍历数组并获得低于`input[k]`.

对于您的情况，这可能有点过头了，因为您正好需要四个，但这是最通用的方法。

如果您不太关心内存，您还可以使用保留顶部/底部 X 值的 Bounded PriorityQueue，并将所有内容插入队列中。剩下的是您感兴趣的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T13:15:17.400

**排序**：对数组进行排序并取最后四个元素

**最小堆：**最简单的解决方案是保持最大大小为 4 的**最小堆**。

该解决方案的复杂度为 O(nlogk)，其中 n 是元素数，k 是您需要的元素数。

**Priority Queue**：您可以创建一个`PriorityQueue`具有固定大小和自定义比较器的自定义比较器，如[this question](https://stackoverflow.com/questions/7878026/is-there-a-priorityqueue-implementation-with-fixed-capacity-and-custom-comparato/7878246) with implementation 中所述。

**选择算法：**您可以使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)，您可以找到第 (nk) 个最大元素，然后返回所有高于该元素但较难实现的元素。最佳案例复杂度：**O(n)**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-06T22:10:08.493

```
float a[] = {1.0f,3.0f,5.0f,6.0f,7.0f,10.0f,11.0f,3.2f,4.0f};

float first =0.0f;
float second=0.0f;
float third =0.0f;
for (int i=0; i<a.length; i++){
    if(first < a[i]){
        first=a[i];
    }
}
System.out.println("first largest is "+first);
for (int j=0; j<a.length; j++){
    if(a[j] <first && a[j] > second){
        second = a[j];
    }
}
System.out.println("second largest is "+second);
for (int k=0;k<a.length; k++){
    if(a[k]<second && a[k]>third){
        third =a[k];
    }
}
System.out.println("third largest is "+third); 
```

# c++ - 为什么说虚函数的调用不能在编译时确定呢？

> ID：14122528
> 
> 赞同：0
> 
> 时间：2013-01-02T13:00:06.803
> 
> 标签：c++

> **可能重复：**
> [如果虚拟表是在编译时创建的，那么为什么我们将其称为运行时多态性？](https://stackoverflow.com/questions/13954950/if-virtual-table-is-created-in-compile-time-then-why-do-we-call-this-as-a-run-t)

我们说C++中虚函数的调用是在运行时确定的，而不是在编译时确定的。所以我想我不清楚编译时间和运行时间之间的区别。在我粗略的想法中，一切都应该在编译时确定......谁可以帮助解决这个问题？谢谢！</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T13:06:22.380

看这个简化的例子：

```
struct Base
{
  virtual void func()
  { std::cout << "Base::func()" << std::endl; }
};

struct Derived : Base
{
  virtual void func()
  { std::cout << "Derived::func()" << std::endl; }
}; 
```

有一个带有虚函数的基类和一个覆盖它的派生类。现在这是我们的主程序：

```
int main()
{
  Base *bp = 0;

  std::string input;
  std::cin >> input;

  if (input == "base")
    bp = new Base;
  else
    bp = new Derived;

  /* The compiler cannot decide which
     function is called here: */
  bp->func();

  return 0;
} 
```

编译器无法决定是`bp->func()`调用基类函数还是派生类函数，因为它取决于来自用户的输入。

这说明了编译时和运行时之间的区别：编译器在编译时将您的代码转换为机器代码，但用户输入仅在运行时可用。

* * *

（我的代码示例并不是完美的代码，比如我用虚函数声明了类，而没有声明虚析构函数。还有其他问题。这只是为了说明编译时和运行时的区别，并说明什么每次都是和不可能的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:04:27.600

```
class C
{
public:
    virtual void f() {}
};

class D : public C
{
public:
    void f() {}
};

void fn(C * c)
{
    // Is C::f or D::f called here?
    c->f();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T13:05:41.800

有调用的事实是在编译时确定的。被调用的成员函数只有在对象已知的情况下才能知道。例如在

```
Base* ptr = (rnd() % 2 ? new D1() : new D2());
ptr->vf(); 
```

如果是一个虚函数，你不知道`vf()`在编译时调用哪个（假设 D1 和 D2 都有自己的） 。`vf()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T13:17:51.753

在任何给定的函数中，在**编译时**，您只能推断出在函数的任何可能运行中为真的事情，而不管其输入参数的值如何。每当输入到函数的数据可能会改变其行为时，您就无法在编译时推断出结果。

例如：

```
class A
{ 
   virtual void virt() = 0;
};

class B : public A 
{
   virtual void virt() { /*some computation */};
};

class C : public A 
{
   virtual void virt() { /*some other computation */};
};

void f(A* a)
{
    a->virt();
} 
```

在这里，当我们编译时`f`，无法知道 所指向的对象`a`是类型`B`还是`C`，或者是我们甚至不知道的其他派生类型（在这个编译单元中）。事实上，**这可能取决于用户输入，并且可能因运行而异**。

因此，在**编译时**，我们不知道在键入时实际会调用什么函数`a->virt()`。

然而，在**runtime**中，我们确实知道`a`实际指向的是什么，因此我们可以确定将调用哪个函数。

在实践中，虚函数调用是使用*vtable*解决的，它是指向类的所有虚函数的指针数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T13:05:15.227

```
#include <iostream>

struct Base { virtual void foo() { std::cout << "base\n"; } };
struct Derived : Base { void foo() { std::cout << "derived\n"; } };

int main() {
    Base b;
    Derived d;
    bool flag;
    if (std::cin >> flag) {
        Base *ptr = flag ? &b : &d;
        ptr->foo();
    } else {
        std::cout << "error\n";
    }
} 
```

我不知道您目前认为的“编译时间”是什么，但程序编译和链接都发生在程序运行之前，因此在用户提供输入之前。所以调用的目的地`foo`不可能在编译时确定，因为它取决于运行时的用户输入。

如果`foo`是一个非虚拟函数，那么`Base::foo()`无论 的值如何都会被调用`flag`，因此在这种情况下，目标将在编译时已知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T13:04:18.330

一般来说，你不知道调用虚函数时会执行什么代码：

```
struct Base
{
    virtual void method() = 0;
};

void foo(Base* p)
{
    p->method();   // What code will be execute here?
} 
```

如果有多个类派生自`Base`，将执行什么代码？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T13:05:29.610

与上述一起，简而言之， **编译时间是编译源代码的时间**，**运行时间是执行编译代码的时间**，这可能取决于您对程序的输入......，因此根据根据您的输入，在运行时决定哪个对象引用将访问虚函数。这里

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-02T13:48:22.027

在技​​术层面上（希望我的事实直截了当：S），有一种叫做**vtable**的东西是为了实现多态性而构建的。

基本上每个**类**只能有一个**vtable**，因此一个类的任何实例都将共享同一个**vtable**，可以说， **vtable**对程序员是不可见的，它包含**指向**虚函数实现的指针。

 ********构建vtable**的是编译器，并且仅在需要时才构建它们（即，如果类或其基类包含`virtual function`. 所以值得注意的是，并非所有类都构建了**vtable 。**

示例时间：

```
class Base {
public:
    virtual void helloWorld();
}

class Derived : public Base {
public:
    void helloWorld();
}

int main(void) {
    Derived d;
    Base *b = &d;

    b->helloWorld(); // here is the magic...

    /* This call is actually translated to something like the line below,
        lets assume we know that the virtual pointer pointing to the viable 
        for Derived is called Derived_vpointer (but it's only a name and 
        probably not what it would be called):

        *(b -> Derived_vpointer -> helloWorld() )
    */ 
```

因此，这意味着当`b->helloWorld()`被调用时，它实际上使用一个 vpointer 来查找一个 vtable，该 vtable 被替换以引导调用到正确版本的虚函数。所以这里的**类** `Derived`，有一个**vtable**和一个指向表的**虚拟指针**。因此，当**b**指向**Derived**实例时，它将使用 Derived 中的vpointer**最终****调用**正确的实现。

 **这是在*运行时*完成的，或者更确切地说，查找是在*运行时*完成的，因为我们可以轻松地让另一个类扩展**Base**并`b`指向这个（让我们称之为`AnotherDerived`）类。当我们再次使用时会发生什么`b->helloWorld()`，*vpointer*将`AnotherDerived`用于评估对`helloWorld()`.

所以让我们在代码中得到它..

```
...
int main(void) {
    Derived derived;
    AnotherDerived anotherDerived;
    Base *base;

    base->helloWorld(); 
    /* base points to a Base object, i.e. helloWorld() will be called for base. */

    *base = &derived; // base's vpointer will point at the vtable of Derived!
    base->helloWorld();
    /* calling:
        base->Derived_vpointer->helloWorld();
    */

    *base = &anotherDerived;
    base->helloWorld(); // base's vpointer will point at the vtable of AnotherDerivedClass
    /* calling:
        base->AnotherDerived_vpointer->helloWorld();
    */ 
```********

# c# - 检测哪个对象调用了 C# 中的方法

> ID：14122529
> 
> 赞同：1
> 
> 时间：2013-01-02T13:00:10.237
> 
> 标签：c#

C# 中有没有办法检测哪个对象调用了某个方法？
例如：

```
class Foo1
{
   Foo2 m_inner = null
   Foo1()
   {
       m_inner = new Foo2();
       m_inner.Do();
   }
}

class Foo2
{
  Foo2()
  {
  }
  void Do()
  {
     //Here I want to know that Foo1 called it.
  }
} 
```

是否有可能在 Foo2::Do 中知道它是从 Foo1 调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:02:29.740

与事件类似，您不能使用发件人对象的任何原因？

```
class Foo2
{
  Foo2() {}
  void Do(object sender)
  {
    if(sender is Foo1)
      Console.Writeline("Sent from Foo1");
  }
} 
```

**用法**

```
class Foo1
{
   Foo2 m_inner = null
   Foo1()
   {
       m_inner = new Foo2();
       m_inner.Do(this);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:02:41.370

执行此操作的“正确”方法是更改​​ Do 的签名：

```
void Do(object sender) 
```

然后当调用时：

```
m_inner.Do(this); 
```

否则，您将使用调用堆栈和一些反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:09:38.527

有三种方法可以处理这个问题。第一个是传递给方法的发送者对象，就像 .Net 事件中包含的那样。这以一种非常明显的方式将发送者暴露给调用者，并允许该方法回调发送者。但是，如果代码是安全敏感的（例如，确保仅从库 X 调用此方法），则不适合。

第二种方法是[System.Diagnostics.StackTrace](http://msdn.microsoft.com/en-au/library/system.diagnostics.stacktrace.aspx)类。请参阅[如何获取当前行号？](https://stackoverflow.com/questions/12556767/how-to-get-current-line-number-for-example-use-at-messagebox-show)举个例子。您可以从元数据中检查调用类型和程序集。

第三，如果您不介意向该方法添加可选参数，则使用[CallerMemberName](http://msdn.microsoft.com/en-us/library/s53w0dze.aspx)和[CallerFilePath](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute.aspx)属性。但是，这可能不是您想要的。然而，这与 StackTrace 方法不同，它通过混淆来工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:12:06.500

为了完整起见，我添加了这个，但请注意，它在构造函数的情况下**没有**多大帮助，因为调用者的方法名总是`.ctor`; 但：

```
public void Do([CallerMemberName] string caller = null)
{
    Console.WriteLine(caller);
} 
```

现在，像这样的调用：

```
void SomeMethod() {
    someObj.Do();
} 
```

将`"SomeMethod"`作为`caller`. 正如我所提到的，它对构造函数效果不佳，这为您提供了两种选择：

*   明确地传递名称；`someObj.Do("SyntheticNameHere");`
*   添加一个命名适当的本地方法来调用`Do`（似乎有点过分）

# windows-phone-7.1 - 如何在windows phone 7中由flickr feed填充的列表框中获取所选图像的url

> ID：14122544
> 
> 赞同：0
> 
> 时间：2013-01-02T13:01:21.940
> 
> 标签：windows-phone-7.1, flickr

我正在使用来自 flickr 的公共提要在列表框中显示图像的缩略图。我需要获取所选图像的 url，以便我可以在列表框下方加载完整图像。怎么做？[提要网址在这里](http://api.flickr.com/services/feeds/photos_public.gne?tag=nokia)

```
XElement XmlTweet = XElement.Parse(e.Result);

       XNamespace ns = "http://search.yahoo.com/mrss/"; // flilckr
       listBox1.ItemsSource = from tweet in XmlTweet.Descendants("item")
                               select new FlickrData
                               {

                                   ImageSource = tweet.Element(ns + "thumbnail").Attribute("url").Value,
                                   Message = tweet.Element("description").Value,
                                   UserName = tweet.Element("title").Value,
                                   PubDate = DateTime.Parse(tweet.Element("pubDate").Value)

                               }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:08:35.067

注册列表框的 SelectionChanged 事件，在那个

```
 void ListboxSelectionChanged(object sender, SelectionChangedEventArgs e)
  {
      Listbox list = sender as Listbox;
      FlickrData data = list.SelectedItem as FlickrData;

      string url = data.ImageSource ;
   } 
```

# java - 使用 window.open 打开新窗口时出错

> ID：14122550
> 
> 赞同：0
> 
> 时间：2013-01-02T13:01:47.110
> 
> 标签：java, javascript, jsp

我在 JavaScript 中使用以下两个函数来打开两个不同的窗口：

```
function A(int a) {
    var url = "/someAction.do?operation=getDetailsA&id="+a;
    window.open(url,
        'FormA',
        'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,width=800,height=700,left=0,top=0,fullscreen=0');
}

function B(int a) {
    var url = "/someAction.do?operation=updateDetailsA&id="+a;
    window.open(url,
        'FormB',
        'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,width=800,height=700,left=0,top=0,fullscreen=0');
} 
```

函数 A 在新窗口中显示结果，函数 B 可以在新窗口中更新值。当我第一次单击链接进行更新时，它工作正常。当我单击链接以显示详细信息时，它也可以正常工作。
但问题是点击显示链接后，如果我点击更新，只显示一个空白屏幕。如果我第一次点击更新，它可以正常工作，但是在点击功能A（获取详细信息）后，功能B（更新详细信息）不起作用。

希望我能够描述我的问题，我尝试使用`window.location.href`，但没有帮助，任何建议，真的很感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:07:52.233

您的窗口名称不同`formA`，`formB`可能是导致空白屏幕的原因。具有相同的窗口名称，它应该可以正常工作。

# hibernate-tools - 休眠工具模式导出而不破坏当前数据

> ID：14122551
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:01:51.473
> 
> 标签：hibernate-tools

我正在做一个`org.hibernate.tool.hbm2dll.SchemaExportTask`作为我的编译/构建脚本的一部分（如果它很重要，它是带有 hibernate4 插件的蚂蚁）。

一切都很好，除了一个：

它会破坏所有数据！

我想要的实际上是一个简单的数据库转储，相当于“ `pg_dump --all`”或类似的东西。没关系，是基于xml配置，还是基于当前数据库。

我不希望对真实数据库进行任何修改，尤其不希望任何实际执行的删除/创建操作。

在休眠工具罐子的范围内有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:04:11.983

好的，我解决了这个问题。不是休眠工具执行 db-destroy，而是在初始化时休眠。设置`hibernate.hbm2dll.auto`为`update`修复一切。

# python - 从 Web 服务器解析数据

> ID：14122554
> 
> 赞同：-6
> 
> 时间：2013-01-02T13:02:00.443
> 
> 标签：python

我是 python 新手，我只是想知道从网络服务器解析数据的最佳方法是什么。我用谷歌搜索并没有找到任何像样的教程，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:07:39.797

您可以使用，[`BeatifulSoap`](http://www.crummy.com/software/BeautifulSoup/).

Beautiful Soup 是一个 Python 库，用于从 HTML 和 XML 文件中提取数据。它与您最喜欢的解析器一起使用，提供导航、搜索和修改解析树的惯用方式。它通常可以节省程序员数小时或数天的工作时间。

[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

示例用法：

```
import urllib2
from BeautifulSoup import BeautifulSoup

page = urllib2.urlopen('http://facebook.com').read()
soup = BeautifulSoup(page)
soup.prettify()
for anchor in soup.findAll('a', href=True):
   print anchor['href'] 
```

# javascript - 将鼠标悬停在图像上时以受控方式滚动 div 内容

> ID：14122555
> 
> 赞同：4
> 
> 时间：2013-01-02T13:02:08.993
> 
> 标签：javascript, jquery, html, css, scroll

我有一个高度和宽度有限的 div，其内容超出了 div 的大小。所以我在 div 的顶部和底部放置了两个图像，我希望内容相对于我悬停的图像上下滚动。我已经设法悬停但它不受控制，即使我将鼠标从图像上移开，它也会一直持续到最后。因此，当我将鼠标移开时，我希望滚动停止，并且当我再次将鼠标悬停在图像上时，我希望滚动从停止的位置恢复。 [jsfiddle](http://jsfiddle.net/X24t6/)

**HTML：**

```
<div id="hover"> HOVER ME </div>

<div id="container">

The Mauritius Blue Pigeon is an extinct species of blue pigeon formerly endemic to the Mascarene island of Mauritius in the Indian Ocean east of Madagascar. It has two extinct relatives from the Mascarenes and three extant ones from other islands. It had white hackles around the head, neck and breast and blue plumage on the body, and it was red on the tail and the bare parts of the head. These colours were thought similar to those of the Dutch flag, a resemblance reflected in some of the bird's names. It was 30 cm (12 in) long and larger and more robust than any other blue pigeon species. It could raise its hackles into a ruff, which it used for display. Its call sounded like "barf barf" and it also made a cooing noise. It fed on fruits, nuts, and molluscs, and was once widespread in the forests of Mauritius. The bird was first mentioned in the 17th century and was described several times thereafter, but very few accounts describe the behaviour of living specimens. Several stuffed and at least one live specimen reached Europe in the 1700s and 1800s. Only three stuffed specimens exist today, and only one bird was ever depicted when alive. The species is thought to have become extinct in the 1830s due to deforestation and predation. (Full article...)
Recently featured: Action of 1 January 1800 – Terang Boelan – Muckaty Station............................................................................................................................................................................

The Mauritius Blue Pigeon is an extinct species of blue pigeon formerly endemic to the Mascarene island of Mauritius in the Indian Ocean east of Madagascar. It has two extinct relatives from the Mascarenes and three extant ones from other islands. It had white hackles around the head, neck and breast and blue plumage on the body, and it was red on the tail and the bare parts of the head. These colours were thought similar to those of the Dutch flag, a resemblance reflected in some of the bird's names. It was 30 cm (12 in) long and larger and more robust than any other blue pigeon species. It could raise its hackles into a ruff, which it used for display. Its call sounded like "barf barf" and it also made a cooing noise. It fed on fruits, nuts, and molluscs, and was once widespread in the forests of Mauritius. The bird was first mentioned in the 17th century and was described several times thereafter, but very few accounts describe the behaviour of living specimens. Several stuffed and at least one live specimen reached Europe in the 1700s and 1800s. Only three stuffed specimens exist today, and only one bird was ever depicted when alive. The species is thought to have become extinct in the 1830s due to deforestation and predation. (Full article...)
Recently featured: Action of 1 January 1800 – Terang Boelan – Muckaty Station............................................................................................................................................................................
</div>
<div id="hover2"> HOVER ME </div>​ 
```

**CSS：**

```
#hover{
   width:200px;
   height:20px;
 border:1px solid #cc0000;   
}
#hover2{
   width:200px;
   height:20px;
 border:1px solid #cc0000;   
}
#container{
  width:500px;
  height:300px;
 overflow-y:auto;   
    border:1px solid #000;
    overflow: hidden;
}
#container div{
  width:100px;
height:100px;    
    float:left;
}​ 
```

**JAVASCRIPT：**

```
$('#hover').hover(function(){
    $('#container').animate({ scrollTop: $('#container')[0].scrollHeight }, 1000);
});
$('#hover2').hover(function(){
    $('#container').animate({ scrollTop: 0 }, 1000);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T13:10:45.407

你需要一次动画一点点..

```
var amount = '';

function scroll() {
  $('#container').animate({
    scrollTop: amount
  }, 100, 'linear', function() {
    if (amount != '') {
      scroll();
    }
  });
}
$('#hover').hover(function() {
  amount = '+=10';
  scroll();
}, function() {
  amount = '';
});
$('#hover2').hover(function() {
  amount = '-=10';
  scroll();
}, function() {
  amount = '';
});
```

```
#hover {
  width: 200px;
  height: 20px;
  border: 1px solid #cc0000;
}

#hover2 {
  width: 200px;
  height: 20px;
  border: 1px solid #cc0000;
}

#container {
  width: 500px;
  height: 300px;
  overflow-y: auto;
  border: 1px solid #000;
  overflow: hidden;
}

#container div {
  width: 100px;
  height: 100px;
  float: left;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div id="hover"> HOVER ME </div>

<div id="container">

  The Mauritius Blue Pigeon is an extinct species of blue pigeon formerly endemic to the Mascarene island of Mauritius in the Indian Ocean east of Madagascar. It has two extinct relatives from the Mascarenes and three extant ones from other islands. It
  had white hackles around the head, neck and breast and blue plumage on the body, and it was red on the tail and the bare parts of the head. These colours were thought similar to those of the Dutch flag, a resemblance reflected in some of the bird's
  names. It was 30 cm (12 in) long and larger and more robust than any other blue pigeon species. It could raise its hackles into a ruff, which it used for display. Its call sounded like "barf barf" and it also made a cooing noise. It fed on fruits, nuts,
  and molluscs, and was once widespread in the forests of Mauritius. The bird was first mentioned in the 17th century and was described several times thereafter, but very few accounts describe the behaviour of living specimens. Several stuffed and at
  least one live specimen reached Europe in the 1700s and 1800s. Only three stuffed specimens exist today, and only one bird was ever depicted when alive. The species is thought to have become extinct in the 1830s due to deforestation and predation. (Full
  article...) Recently featured: Action of 1 January 1800 – Terang Boelan – Muckaty Station............................................................................................................................................................................
  The Mauritius Blue Pigeon is an extinct species of blue pigeon formerly endemic to the Mascarene island of Mauritius in the Indian Ocean east of Madagascar. It has two extinct relatives from the Mascarenes and three extant ones from other islands. It
  had white hackles around the head, neck and breast and blue plumage on the body, and it was red on the tail and the bare parts of the head. These colours were thought similar to those of the Dutch flag, a resemblance reflected in some of the bird's
  names. It was 30 cm (12 in) long and larger and more robust than any other blue pigeon species. It could raise its hackles into a ruff, which it used for display. Its call sounded like "barf barf" and it also made a cooing noise. It fed on fruits, nuts,
  and molluscs, and was once widespread in the forests of Mauritius. The bird was first mentioned in the 17th century and was described several times thereafter, but very few accounts describe the behaviour of living specimens. Several stuffed and at
  least one live specimen reached Europe in the 1700s and 1800s. Only three stuffed specimens exist today, and only one bird was ever depicted when alive. The species is thought to have become extinct in the 1830s due to deforestation and predation. (Full
  article...) Recently featured: Action of 1 January 1800 – Terang Boelan – Muckaty Station............................................................................................................................................................................
</div>
<div id="hover2"> HOVER ME </div>
```

**演示在** [http://jsfiddle.net/gaby/xmAvh/](http://jsfiddle.net/gaby/xmAvh/)

# sas - 每周股票 OHLC

> ID：14122560
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:40:18.663
> 
> 标签：sas

我有股票数据，想找到每周开盘价、最高价、最低价和收盘价的股票。提前致谢。

样本数据..

```
name        date        open    high    low    close
20MICRONS   11/07/2012  86.65   98.20   85.05   94.50
20MICRONS   12/07/2012  94.60   96.80   92.00   92.35
20MICRONS   02/11/2012  125.55  149.80  125.50  148.05
20MICRONS   07/11/2012  161.90  167.00  148.15  151.05
A2ZMES      02/07/2012  109.25  114.90  108.00  113.80
A2ZMES      03/07/2012  115.00  115.95  112.05  112.85
A2ZMES      24/09/2012  66.95   70.80   64.00   70.05
A2ZMES      25/09/2012  70.35   72.50   70.15   70.85
AANJANEYA   03/07/2012  485.15  494.80  478.65  486.50
AANJANEYA   04/07/2012  489.05  491.10  482.55  486.70
AARTIDRUGS  05/11/2012  198.35  199.00  188.00  190.50
AARTIDRUGS  06/11/2012  192.00  192.95  186.95  191.55
AARTIIND    14/09/2012  79.90   81.65   78.65   78.95
AARTIIND    17/09/2012  78.30   79.25   78.00   78.55
AARTIIND    06/12/2012  100.70  100.90  99.00   99.70
AARTIIND    07/12/2012  100.00  100.00  96.00   96.60 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:40:04.943

`FIRST.var`实际问题的答案是：您无法`LAST.var`在`PROC SQL`. 这些自动变量由 SAS 在顺序数据步骤处理期间创建。

第二段的内容并不完全清楚。

# jquery - colorbox - 关闭父 iframe 并打开新的 iframe 灯箱

> ID：14122565
> 
> 赞同：0
> 
> 时间：2013-01-02T13:02:56.117
> 
> 标签：jquery, iframe, colorbox, parent-child

我使用 jquery 和 colorbox lightbox 插件在 ligthbox 中打开 iframe。

问题是：

1.  我点击按钮打开我的主 iframe 灯箱
2.  在主 iframe 灯箱内 - 有类 .flash_shareable 的按钮
3.  当您单击时，它应该关闭父级（即主 iframe），然后打开一个它链接到的新 iframe

它正在关闭父 iframe，但没有打开新的 iframe。

我的代码：

```
$(document).ready(function(){
        var y = $(document.body).height();
        var x = $(document).width();
        parent.$.colorbox.resize({innerWidth:x, innerHeight:y});

        $('.iframe').colorbox({iframe:true}); //ligthbox

        $(".flash_shareable").click(function() {
        parent.$.colorbox.close();
        $.colorbox({href:"faq.html", iframe:true, width:800 + "px", height:600 + "px", open:true});
    })
}); 
```

**iframe 的 HTML**，我试图从中打开另一个 ligthbox：

```
<button class="flash_shareable" type="button">open flash</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:16:43.170

我修复了它，但我仍然觉得需要一些东西 ^_^**它在 Internet Explorer 8 及更低版本中不起作用**，我希望有人能**帮助**我直到？请 ：）

```
$(document).ready(function(){
        var y = $(document.body).height();
        var x = $(document).width();
        parent.$.colorbox.resize({innerWidth:x, innerHeight:y});

        $('.iframe').colorbox({iframe:true}); //ligthbox

        $(".flash_shareable").click(function() {

        $.colorbox({href:"faq.html", iframe:true, open:true});
    })
}); 
```

# ios - 在 iOS 上拦截广告触摸 (Adwhirl)

> ID：14122569
> 
> 赞同：0
> 
> 时间：2013-01-02T13:03:17.447
> 
> 标签：ios, cocoa-touch, adwhirl

当用户需要通知某事时，我的应用程序将显示一个下拉通知。我面临的问题是，如果我显示一个下拉通知，并且它后面有一个广告，它会拦截对通知的触摸。我有一个布尔currentDisplayed，当通知仍在显示时为YES。如果currentDisplayed == YES，我想拦截对广告的触摸而不是模态显示。我该怎么做呢？谢谢！

此致 卡姆兰·皮尔瓦尼

```
Notification code 

+(void)onTap:(UITapGestureRecognizer *)tapGestureRecognizer {
    CGPoint point = [tapGestureRecognizer locationInView:tapGestureRecognizer.view];

    BOOL dismissTapped = [notificationView.closeNotification.layer.presentationLayer hitTest:point] != nil;
    BOOL labelTapped = [notificationView.layer.presentationLayer hitTest:point] != nil;
    if (dismissTapped) {
        [UIView animateWithDuration:1.0f delay:0.0f options:UIViewAnimationOptionBeginFromCurrentState animations:^{
            notificationView.alpha = 0.0f;
             //notificationView.frame = CGRectMake(currentFrame.origin.x, -currentFrame.size.height, currentFrame.size.width, currentFrame.size.height);
        }completion:nil];
    }else if(labelTapped) {
        [UIView animateWithDuration:0.7f animations:^{
            notificationView.alpha = 0.0f;
        }completion:^(BOOL finished){
            [tapGestureRecognizer.view removeGestureRecognizer:tapGestureRecognizer];
            [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"announcementTapped" object:nil]];
        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:01:50.443

为什么不选择更简单的方法并设置`adView.hidden = YES`通知出现时间？只需`hidden`回到`NO`通知即将被解除的时间，你应该没问题。

# vim - 如何在vim中映射“Ctrl+>”组合？

> ID：14122573
> 
> 赞同：8
> 
> 时间：2013-01-02T13:03:34.043
> 
> 标签：vim, keyboard-shortcuts

我想将`CTRL``>`组合映射到`g``t`（转到下一个 vim 选项卡）。

因为`>`是特殊字符，`nmap <c->> gt`不起作用。

我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T01:02:01.493

由于键盘输入在内部处理的方式，不幸的是，这在今天通常是不可能的，即使在 GVIM 中也是如此。某些组合键，如`Ctrl`+`non-alphabetic`无法映射，`Ctrl`+`letter`与`Ctrl`++`Shift`无法`letter`区分。（除非您的终端为它发送一个独特的*termcap*代码，而大多数人不会。）在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)。

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T13:12:17.327

`termcap`您可以通过其代码映射每个键。并通过十进制（八进制，十六进制）代码。请阅读：

```
:h :map-special-chars 
```

# sql - SQL删除外键问题

> ID：14122574
> 
> 赞同：1
> 
> 时间：2013-01-02T13:03:44.547
> 
> 标签：sql, sql-server-2008, foreign-keys

我有一个与外键有关的问题。我正在使用 SQL Server 2008。

有 2 个表，客户和发票，它们看起来像这样：

**客户表：**
CustomerID
Name
Address

**发票表：**
InvoiceID
Date
CustomerID

Customer 表中的 CustomerID 列是主键，Invoice 表中的 CustomerID 列有外键。

我想删除 Customer 表中的一行，但**不**删除 Invoice 表中的连接行。有没有办法做到这一点？

**编辑：**
我忘了提到已删除的客户存储在日志表中，因此 ID 仍然存在，但在不同的表中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:07:45.313

> “我想删除 Customer 表中的一行，但不删除 Invoice 表中的连接行。”

外键的全部和全部目的是防止您这样做。

该约束强制执行规定发票必须属于客户的规则。那么，如果发票不属于客户，这在您的应用程序中意味着什么？它应该属于什么？

或者用商业术语来说，如果发票没有*支付它的客户？*

* * *

当然，我的咆哮假设这`Invoice.CustomnerID`是一个强制性列。也许您的数据模型允许它是可选的。在这种情况下，将列设置为 NULL，然后您可以删除客户记录。鉴于基本的业务规则——必须支付发票（否则公司破产）我认为这将是一个有缺陷的数据模型，但是，嘿！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:10:38.130

从SQL Management Studio调整您的FK约束如这里。突出显示的删除规则轮廓概述了要暗示在相关的表记录上的强制执行，我看到的批准选项可以在下拉列表中设置默认值或设置空值。请考虑所附图片。

![在此处输入图像描述](../Images/de8413db27193e82b1f8a310bd51cf0d.png)

# php - 在javascript中回显php

> ID：14122575
> 
> 赞同：2
> 
> 时间：2013-01-02T13:03:49.660
> 
> 标签：php, javascript, mysql, echo

我需要将我的 MySQL php 数据数组转换为利用 highcharts 库的 JavaScript。我坚持在 JavaScript 中回显一些包含图表数据的 php。到目前为止，我可以将 php 回显为我已经测试并复制到 JavaScript 中的格式，它工作正常，但只需要一点帮助就可以用 php 编写 JavaScript 了。

php 代码：（我已经包含了 br/ 标签以便于查看）

```
for($i=0; $i<4; $i++){
    echo '{type: "column",<br/>';
    echo 'name: '.($i+1).',<br/>';
    echo 'data: [';
    for($j=0; $j<count($data); $j++){
        echo $data[$j][$i+1].',';
    }
    echo ']},<br/>';
}
echo '{
    type: "spline",
    name: "Strike Rate",<br/>';
echo 'data: [';
for($i=0; $i<count($data); $i++){
    echo $data[$i][7].',';     
}
echo '],<br/>';
echo 'marker: {
    lineWidth: 2,
    lineColor: Highcharts.getOptions().colors[3],
    fillColor: "white"
}'; 
```

php的输出：

```
{   type: "column", 
    name: 1,
    data: [4,1,3,2,4,3,5,1,3,1,1,2,2,0,0,0,0,0,]},
{   type: "column",
    name: 2,
    data: [5,3,3,4,2,3,3,2,0,3,1,2,1,0,0,0,0,0,]},
{   type: "column",
    name: 3,
    data: [2,1,5,5,2,3,1,2,4,5,1,0,1,0,0,0,0,0,]},
{   type: "column",
    name: 4,
    data: [6,4,4,1,3,3,5,2,3,0,0,1,0,0,0,0,0,0,]},
{   type: "spline",
    name: "Strike Rate",
    data:     [13.33,3.45,9.38,6.67,14.81,10.00,20.00,3.85,11.54,4.76,7.14,15.38,28.57,0.00,0.00,0.00,0.00,0.00,],
    marker: {
        lineWidth: 2,
        lineColor: Highcharts.getOptions().colors[3],
        fillColor: "white"
    } 
```

我试过`json_encode`并且只回显 php 变量，但我无能为力。

**更新** 答案比仅仅将 PHP 输出回显到 Javascript 更简单（我认为这是可能的）......无论如何，非常感谢所有做出贡献的人，如果没有这样一个伟大的社区，我会发现学习新事物真的很困难，找到很好的建议和提示来纠正问题。

通过正确的建议，我能够创建 Javascript 变量并相应地使用它们。

```
<script>
...

var myArray = <?php echo json_encode($data[1]['data']); ?>; 
....
{
type: 'column',
name: '1',
data: myArray
},
....
</script> 
```

也祝新年快乐！干杯史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:12:31.623

您正在混合 PHP、JavaScript 和 HTML，结果一团糟。下面是一个如何使用 PHP 创建 JavaScript 对象字面量的示例：

```
<?php

$values = array();

for ($i=0; $i < 4; $i++) {
    $value = array(
        'type' => 'column',
        'name' => $i + 1,
        'data' => array()
    );
    for ($j=0; $j < count($data); $j++){
         $value['data'][] = $data[$j][$i+1];
    }
    $values[] = $value;
}
?>

<!-- HTML stuff here -->

<script>
    var data = <?php echo json_encode($values); ?>;
    // JavaScript that processes `data` here
</script>

<!-- More HTML here --> 
```

这个想法是：

*   首先使用数组的数组构建数据结构。
*   用于`json_encode`将数组转换为 JSON，这也是 JS 中的有效对象字面量。
*   将 PHP 嵌入 HTML 或 JS，不要（手动）生成 HTML 或 JS。

* * *

我不知道数据必须采用哪种格式，但我把它留给你找出来。迭代和提取数据也可能会得到改进，但由于我们不知道你有什么数据，现在这已经足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:21:07.340

像这样输出数据的问题是错误的原因，很难匹配所有的大括号。您似乎缺少围绕整个事物的最后一个大括号和数组大括号。

`json_encode`相反，您可以使用不易出错的函数创建数据结构并将其序列化为 JSON 。为您的案例执行此操作的代码如下：

```
// Set up the columns
$arr = array();
for($i = 0; $i < 4; $i ++) {
  $column = array(
    "name" => $i + 1,
    "data" => array()
  );
  for($j = 0; $j < count($data); $j ++) {
    $column["data"][] = $data[$j][$i + 1];
  }
  $arr[] = $column;
}

// Set up the spline
$spline = array(
  "type" => "spline",
  "name" => "Strike Rate",
  "data" => array();
);
for($i = 0; $i < count($data); $i ++) {
  $spline["data"][] = $data[$i][7];
}
$arr[] = $spline;

// Output json
echo json_encode($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:06:32.060

我想你的问题是这种线：

```
data: [6,4,4,1,3,3,5,2,3,0,0,1,0,0,0,0,0,0,]}, 
```

删除数组中的尾随 ,

```
data: [6,4,4,1,3,3,5,2,3,0,0,1,0,0,0,0,0,0]}, 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:14:06.743

在 javascript 中处理 PHP 数组的另一种最佳方法是[json_encode](http://php.net/manual/en/function.json-encode.php)

将 json 编码数组从您的 php 传递给 javascript，例如

```
json_encode($result_array); 
```

并使用jquery处理js中的json数据。这将比你现在做的容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:05:33.073

请将 php 值存储在隐藏字段中，并在 javascript 中使用该 ID 为该字段提供一些 ID 并访问值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T13:09:52.707

您在该数据列的末尾添加了一个额外的逗号。那会破坏JSON。使用内爆函数。

```
for($i=0; $i<4; $i++){
  echo '{type: "column",<br/>';
  echo 'name: '.($i+1).',<br/>';
  echo 'data: ['
  echo implode(',', $data);
  echo ']},<br/>';
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T13:26:06.273

```
$data=array();
for($i=0; $i<4; $i++){
$data['type']="column";
for($j=0; $j<count($data); $j++){
 $data['data'][] = $data[$j][$i+1];
}
}
json_encode($data); 
```

# html - 将 div 的背景拉伸到容器内的全宽

> ID：14122576
> 
> 赞同：0
> 
> 时间：2013-01-02T13:03:50.473
> 
> 标签：html, css

我在一个网站上工作，中间使用了一个 960 容器，现在唯一的问题是设计师在某些`div`s 上使用了不同的背景颜色。

所以我现在的代码是：

```
 <div id="content">
<!-- the content needs to 960 on the width only the background need the full width of the page -->
             <div class="whitebackground">
                     <!-- content -->
             </div>

             <div class="bluebackground">
                     <!-- content -->
             </div>
        </div> 
```

CSS：

```
#content {

margin: 0px auto;
min-height: 700px;
position: relative;
width: 960px;

}
.whitebackground{
    width: 100%;
    background:#FFF;
}
.bluebackground{
    width: 100%;
    background:#0054fe;
} 
```

现在的问题是`div`s 的背景颜色当然只在内容里面`div`。有什么方法可以让`div`s 的颜色超出内容的范围`div`并占据整个页面的宽度？

这是工作代码[http://jsfiddle.net/6cJVV/](http://jsfiddle.net/6cJVV/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:11:09.723

你可以做：

```
.object {background-size: 100% 100%;} 
```

它是这样设置的：

```
.object {background-size: width height;} 
```

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:34:36.837

您必须将外部 div 设置为全宽，然后设置`width: 960px; margin: 0 auto`为内部 div。
看看这个：[Codepen](http://codepen.io/joe/pen/fEeiy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:35:15.943

我将我的内容更改为一个类，这样我就可以关闭它并重新打开它。我的代码现在看起来像这样：

```
 <div class="whitebackground">
          <div class="content">

          </div>          
      </div>

      <div class="bluebackground">
             <div class="content">

             </div>       
       </div> 
```

# php - mssql_bind 到 SQLVARCHAR 不带回数据库字段的全部内容

> ID：14122578
> 
> 赞同：0
> 
> 时间：2013-01-02T13:03:55.710
> 
> 标签：php, sql-server

我有一个 PHP 表单，它将信息存储在 SQL Server 数据库中，使用 SQLTEXT 进行绑定。内容已正确存储在数据库中，但是当我尝试检索信息以向用户显示提交信息的可打印副本时，使用 SQLTEXT 时出现错误。我没有使用那种数据类型，而是使用了 SQLVARCHAR，但我只得到了 241 个字符。

要检索我正在绑定的内容，请使用： mssql_bind($statement, "@SPVaraible", $exportvariable, SQLVARCHAR, TRUE);

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:26:13.567

请阅读mssql_bind 的[PHP 手册](http://php.net/manual/en/function.mssql-bind.php)，您可以为 SQLVARCHAR 定义 maxlen。

# performance - VBA 计算性能

> ID：14122580
> 
> 赞同：1
> 
> 时间：2013-01-02T13:04:00.093
> 
> 标签：performance, vba, excel

我知道这很简单，但我不知道我哪里出错了——请帮忙

**设置场景：**
我目前在工作簿中有 3 个工作表

**Sheet1** – 包含将根据比赛的固定日期移动的原始数据

**Sheet2** - 包含从工作表 1 复制过来的原始数据

**视图**- 来自 sheet2 的数据视图

该过程是-用户将手动将夹具拖放到 sheet1 中，然后剪辑启用宏的按钮，该按钮将获取夹具的副本并在 sheet2 中添加带有数据的其他列

然后将单击最后一个按钮以在“视图”表中创建此数据的视图。视图表所做的只是调用一个已定义的模块，该模块被称为`VnthLookup`用相对值填充每个单元格。

**问题**
目前，每个工作表的 VBA 和公式工作正常，并且在创建视图时，如果我通过单击单元格并单击键盘上的返回按钮手动提示计算，它会更新并且工作正常。但是，当我尝试重新计算整个视图表时，它会超时并且需要永远完成计算（最多一个小时 + 仅 30 行，8 个列标题）

vnthlookup 模块的编码是

```
Public Function VlookupNth(MyVal As Variant, MyRange As Range, Optional ColRef As Long, Optional Nth As Long = 1)
    Dim Count, i As Long
    Dim MySheet As Worksheet

    Count = 0
    Set MySheet = Sheets(MyRange.Parent.Name)

    If ColRef = 0 Then ColRef = MyRange.Columns.Count

    For i = MyRange.Row To MyRange.Row + MyRange.Rows.Count - 1
        If MySheet.Cells(i, MyRange.Column).Value = MyVal Then
            Count = Count + 1
            If Count = Nth Then
                VlookupNth = MySheet.Cells(i, MyRange.Column + ColRef - 1).Value
                Exit Function
            End If
        End If
    Next i

    VlookupNth = ""
End Function 
```

我的视图表在从 B 列到 J 列的每个单元格中都有以下公式 - 根据我从 sheet2 请求返回的值，“X”会有所不同。

```
=VlookupNth(1,Sheet2!C:AAA,X,2) 
```

任何有助于理解为什么需要这么长时间的帮助将不胜感激。

ps 很高兴把工作簿寄过来，如果解释需要澄清，请给我一个转发地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:17:58.813

你有两个问题：

1.  一个较小的问题是您使用工作表名称来引用您的范围。而是使用`MyRange`您已经拥有的变量。
2.  更大的问题是你将整列传递给函数，函数会盲目地检查整列，直到最后一百万行（以防它没有足够早地找到你想要的值）。您需要将功能限制为工作表上存在的实际数据。

改写如下：

```
Public Function VlookupNth(ByVal MyVal As Variant, ByVal MyRange As Range, Optional ByVal ColRef As Long = 0, Optional ByVal Nth As Long = 1) As Variant
    Dim Count As Long, i As Long

    Count = 0
    If ColRef = 0 Then ColRef = MyRange.Columns.Count

    'Do not consider uninitialized rows
    Set MyRange = Application.Intersect(MyRange, MyRange.Parent.UsedRange)

    If Not MyRange Is Nothing Then
        For i = 1 To MyRange.Rows.Count
            If MyRange.Cells(i, 1).Value = MyVal Then
                Count = Count + 1
                If Count = Nth Then
                    VlookupNth = MyRange.Cells(i, ColRef).Value
                    Exit Function
                End If
            End If
        Next i
    End If

    VlookupNth = ""
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:25:26.647

也许不是回应，而是一些提示和建议开始。

```
Dim Count, i As Long  'is defining Count as a variant
Dim Count as long, i As Long    'is the proper syntax 
```

然后
`Set MySheet = Sheets(MyRange.Parent.Name)`显得毫无意义。既然`MySheet`是工作表并且你使用`Set`它，它应该是`Set MySheet = Sheets(MyRange.Parent)`。
我建议你

*   尝试那些小修复，
*   确保`Option Explicit`为模块设置，
*   编译，测试并返回新闻...

# c# - 如何在 app.config 文件中提供连接字符串以及如何调用它

> ID：14122581
> 
> 赞同：1
> 
> 时间：2013-01-02T13:04:06.963
> 
> 标签：c#, connection-string

我在 app.config 中使用了以下代码

```
<connectionStrings>
<add name="ConnectionString" connectionString="Data Source=162.1.6.4;Initial Catalog=Followon_SP;Integrated Security=SSPI" 
     providerName="System.Data.SqlClient"/> 
```

在 form.cs 中

```
struct st
{

    public static SqlConnection con;
};
public Mainform()
    {
        InitializeComponent();           
       st.con = new SqlConnection( ConfigurationManager.AppSettings["Connectionstring"].ToString());
    } 
```

但我在连接打开时收到以下错误，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:07:04.663

您需要改用它：

```
public Mainform()
{
    InitializeComponent();     

    // read out the .ConnectionString property - don't call .ToString() !!
    string cs = ConfigurationManager.ConnectionStrings["Connectionstring"].ConnectionString;
    st.con = new SqlConnection(cs);
} 
```

使用`ConfigurationManager.ConnectionStrings`（而不是`ConfigurationManager.AppSettings`），然后从`.ConnectionString`属性中读出连接字符串，而不是调用`.ToString()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:10:02.417

使用实体框架会更好：http: [//msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

添加一个新的数据模型，只要您在向导中输入正确的用户名和密码，VS 就会处理您的所有配置设置。也将使您的开发过程更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:08:06.703

将 new 设置`SqlConnection(cs)`为您的结构类型`con`字段。像这样使用它；

```
string cs = ConfigurationManager.AppSettings["Connectionstring"].ConnectionString;
st.con = new SqlConnection(cs); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T12:45:28.990

使用以下代码读取连接字符串：

```
System.Configuration.Configuration rootWebConfig = 
    System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/MyWebSiteRoot");
System.Configuration.ConnectionStringSettings connString;
if (rootWebConfig.ConnectionStrings.ConnectionStrings.Count > 0) {
    connString =
        rootWebConfig.ConnectionStrings.ConnectionStrings["NorthwindConnectionString"];
    if (connString != null)
        Console.WriteLine("Northwind connection string = \"{0}\"", connString.ConnectionString);
    else
        Console.WriteLine("No Northwind connection string");
} 
```

# c# - 生成预期 SQL 的实体框架查询

> ID：14122582
> 
> 赞同：0
> 
> 时间：2013-01-02T13:04:10.003
> 
> 标签：c#, sql, linq, entity-framework, optimization

我有两个表`A`和`B`. `A`与`B`一对多相关（`A`包含 的集合`B`）。

如何使实体框架生成下一个 SQL（我应该写什么 linq 查询）：

```
SELECT A.UserId, COUNT(B.ID) FROM A
LEFT JOIN B ON A.ID = B.A_ID
WHERE B.Score <= 6
GROUP BY A.UserId 
```

我尝试了下一个：

```
from a in db.A
join b in db.B 
on a.ID equals b.A_ID
where b.Score <= 6
group a by a.UserId into grouping
select new 
{
    UserId = (Guid) grouping.Key,                       
    RawValue = grouping.Sum(x => x.Bs.Count())
}; 
```

它返回了我需要的东西，但 EF 将其转换为可怕的查询（这就是为什么这个查询的性能非常糟糕）。

生成的 SQL：

```
SELECT 
1 AS [C1], 
[Project3].[UserId] AS [UserId], 
 CAST( [Project3].[C1] AS float) AS [C3]
FROM ( SELECT 
    [Project2].[UserId] AS [UserId], 
(SELECT 
    SUM([Filter2].[A1]) AS [A1]
    FROM ( SELECT 
        (SELECT 
            COUNT(1) AS [A1]
            FROM [dbo].[B] AS [Extent5]
            WHERE [Extent3].[ID] = [Extent5].[A_ID]) AS [A1]
        FROM  [dbo].[A] AS [Extent3]
        INNER JOIN [dbo].[B] AS [Extent4] ON [Extent3].[ID] = [Extent4].[A_ID]
        WHERE ([Extent4].[Score] <= 6) 
    )  AS [Filter2]) AS [C1]
FROM ( SELECT 
    [Distinct1].[UserId] AS [UserId]
    FROM ( SELECT DISTINCT 
        [Extent1].[UserId] AS [UserId]
        FROM  [dbo].[A] AS [Extent1]
        INNER JOIN [dbo].[B] AS [Extent2] ON [Extent1].[ID] = [Extent2].[A_ID]
        WHERE ([Extent2].[Score] <= 6) 
    )  AS [Distinct1]
)  AS [Project2]
)  AS [Project3] 
```

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:13:14.690

当我改变你的 ef clouse

```
from a in db.A.DefaultIfEmpty()
        join b in db.B 
        on a.ID equals b.A_ID
        where b.Score <= 6
        group a by a.UserId into grouping
        select new 
        {
            UserId = (string) grouping.Key,                       
            RawValue = grouping.Count()
        }; 
```

我生成的 SQL 更改为

```
SELECT 
        1 AS [C1], 
        [GroupBy1].[K1] AS [UserId], 
        [GroupBy1].[A1] AS [C2]
        FROM ( SELECT 
            [Extent1].[UserId] AS [K1], 
            COUNT(1) AS [A1]
            FROM    ( SELECT 1 AS X ) AS [SingleRowTable1]
            LEFT OUTER JOIN [dbo].[A] AS [Extent1] ON 1 = 1
            INNER JOIN [dbo].[B] AS [Extent2] ON [Extent1].[ID] = [Extent2].[A_ID]
            WHERE [Extent2].[Score] <= 6
            GROUP BY [Extent1].[UserId]
        )  AS [GroupBy1] 
```

我认为这是一个非常好的优化结果。

# iphone - 存折 更新通行证

> ID：14122584
> 
> 赞同：1
> 
> 时间：2013-01-02T13:04:17.210
> 
> 标签：iphone, ios6, passbook

![在此处输入图像描述](../Images/e8dd947b1b6ea749cb9ef27e4118bc3b.png)

![在此处输入图像描述](../Images/6407ba7117ad22f39093485ea49367f4.png)

你可以看到两张图片，在第一张图片的右上角是“添加”

第二张图片的右上角是“更新”。我可以做第一个效果的效果。但我不知道如何做第二个效果，如何使用“更新”而不是“添加”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:43:07.733

添加或更新由pass.json 中的 and`passTypeIdentifier`控制。`serialNumber`

如果用户的存折不包含`passTypeIdentifier`pass.com.example 和`serialNumber`1234 的通行证，他们将被提示“添加”通行证。

如果用户的 passbook 已经包含 pass.com.example 的`passTypeIdentifier`pass.com.example 和`serialNumber`1234*并且*新 pass 的内容与他们安装的 pass 不同，则会提示他们“更新” pass。

如果已安装通行证但数据未更改，则右侧按钮将被禁用并显示一条消息（“已添加”）。

要查看实时通行证示例，您可以尝试下载此[通行证](https://pass.is/krERrj)。您将首先被提示将通行证“添加”到您的存折中。

![在此处输入图像描述](../Images/06cebfb0d74dc480a6b1b004930f6abc.png)

通行证的背面是一个链接，您可以使用它来更新内容。

![在此处输入图像描述](../Images/fe085690c886168ce20ef4ff47c8f97b.png)

如果单击该按钮，更改内容并选择“下载”选项，您将看到“更新”选项。

![在此处输入图像描述](../Images/1e0448e691150378b9584bf67f7c771a.png) ![在此处输入图像描述](../Images/500eed36e4964b1110bfcc0ec0ba4641.png)

如果您再次单击，但这次不更改任何值并选择“下载”，那么您将获得禁用的“添加”按钮。

![在此处输入图像描述](../Images/c8b0481469665a90fbbdb9dce8f9c651.png)

免责声明：我是创建此通行证的服务[PassKit的联合创始人。](http://passkit.com)

# iphone - 如何从用户那里识别 UITableView Cell Touchup 超过 5 秒

> ID：14122598
> 
> 赞同：0
> 
> 时间：2013-01-02T13:04:54.547
> 
> 标签：iphone, ios, uitableview, touch-up-inside

我正在创建一个应用程序，我在其中为我的 UITableView 显示一些来自 url 的 rss 内容，直到它在这里完美运行。但在这里我想要的是当用户单击并按住 UITableViewCell 超过 5 秒时执行其他功能。我只想知道一个选择并单击并按住 UITableViewCell 的选择。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:07:57.777

您必须将[UILongPressGestureReconizer](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UILongPressGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UILongPressGestureRecognizer)添加到您的单元格，并将其设置`minimumPressDuration`为 5。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
        longPress.minimumPressDuration = 5.0;
        [cell addGestureRecognizer:longPress];

    }

    // Do additional setup

    return cell;
} 
```

**编辑：**

请注意，如果您使用`prototypeCells`，则`!cell`条件永远不会为真，因此您必须编写如下内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }
    if (cell.gestureRecognizers.count == 0) {
        UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
        longPress.minimumPressDuration = 5.0;
        [cell addGestureRecognizer:longPress];
    }
    return cell;
} 
```

# javascript - 原型自执行方法的方法调用

> ID：14122599
> 
> 赞同：0
> 
> 时间：2013-01-02T13:04:59.460
> 
> 标签：javascript, prototype, self-executing-function

我正在尝试真正了解原型在 js 中的工作原理。我目前正在进行一个基于循环的小游戏项目。

我想要一个 Game 对象实例，一旦实例化，它就会自行启动，调用它定义的循环方法。

我想要得到的是这样的：

```
function Game() {};
Game.prototype = {
    start: (function() {
        this.loop();    // this is where i have a problem
    })()

    loop: function() {
        // do stuff
    }
} 
```

现在，很明显，这不起作用，因为我在 start 周围使用了一个自执行函数来让它自动启动，所以 'this' 关键字代表窗口对象，而不是游戏对象。

有没有办法做到这一点，这样我就不必在实例化一个新的 Game 对象后手动调用 start 方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:09:34.980

```
function Game() { this.loop(); };
Game.prototype={ 

    loop: function() {
        // do stuff
    }
}

new Game; 
```

# exchangewebservices - Exchange EWS - 如何从特定日期的主事件中检索事件？

> ID：14122601
> 
> 赞同：1
> 
> 时间：2013-01-02T13:05:00.927
> 
> 标签：exchangewebservices, exchange-server-2007

我想从特定日期的周期性主日历事件中检索事件 (ItemID)（我有发生日期和周期性主事件数据）。

我正在尝试 FindItem 有这样的限制

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
   </soapenv:Header>
   <soapenv:Body>
      <mes:FindItem Traversal="Shallow">
         <mes:ItemShape>
            <typ:BaseShape>AllProperties</typ:BaseShape>
         </mes:ItemShape>
         <mes:Restriction>
            <typ:IsEqualTo>
               <typ:FieldURI FieldURI="item:RecurringMasterItemId"/>
               <typ:FieldURIOrConstant>
               <typ:Constant Value="AQMkAD[snip]AAAAA=="/>
               </typ:FieldURIOrConstant>
            </typ:IsEqualTo>
         </mes:Restriction>
         <mes:ParentFolderIds>
           <typ:DistinguishedFolderId Id="calendar"/>
         </mes:ParentFolderIds>
      </mes:FindItem>
   </soapenv:Body>
</soapenv:Envelope> 
```

但这会返回：“FieldURI”属性无效-根据其数据类型（类型：UnindexedFieldURIType），值“item：RecurringMasterItemId”无效-枚举约束失败。
（我也知道定期约会的 ChangeKey 并尝试过，但同样的错误）

应该如何解决这个问题才能使其工作？

顺便提一句。我知道使用 GetItem 检索事件，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
   </soapenv:Header>
   <soapenv:Body>
      <mes:GetItem>
         <mes:ItemShape>
            <typ:BaseShape>IdOnly</typ:BaseShape>
         </mes:ItemShape>
         <mes:ItemIds>
            <typ:OccurrenceItemId RecurringMasterId="AQMkAD[snip]AAAA==" InstanceIndex="1"/>
            <typ:OccurrenceItemId RecurringMasterId="AQMkAD[snip]AAAA==" InstanceIndex="2"/>
            <typ:OccurrenceItemId RecurringMasterId="AQMkAD[snip]AAAA==" InstanceIndex="3"/>
         </mes:ItemIds>
      </mes:GetItem>
   </soapenv:Body>
</soapenv:Envelope> 
```

然后，我可以检索 StartDate 并遍历它们，但我无法预测可能适用的 InstanceIndex 范围。

在此先感谢，
扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:50:02.393

看起来这不可能。

我现在求助于使用 GetItem，一次检索 50 次。

这将返回一个 GetItemResponseMessages 列表，其中包含：

*   成功的事件检索

*   ErrorCalendarOccurrenceIndexIsOutOfRecurrenceRange 响应代码指示我们已到达最后一次出现

*   其他“真实”错误

*   ErrorCalendarOccurrenceIsDeletedFromRecurrence 响应代码，指示该事件已被删除

所以我只是循环直到找到正确的日期，达到 ErrorCalendarOccurrenceIndexIsOutOfRecurrenceRange，或者达到我的代码中设置的最大调用次数。

# performance - 网页性能：“差距”衡量什么？

> ID：14122605
> 
> 赞同：1
> 
> 时间：2013-01-02T13:05:14.483
> 
> 标签：performance

我正在努力提高我网站的性能。

查看 IE 网络选项卡，我看到：

```
wait: < 1 ms
start: 31 ms
request 390 ms
response 31 ms
gap 472 ms 
```

我对差距特别困惑。这里发生了什么？这是收到所有内容后呈现页面的实际时间吗？当我不知道每次代表什么时，很难提高性能。

MSDN 说：

> Gap：收到响应时的偏移值。持续时间是从该开始时间到最后一个请求的结束与原始 HTTP 请求相关联的时间。

这对我一点帮助都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:39:01.013

它就像泥巴一样清晰，但这意味着该特定请求的结束发生在页面被认为已加载之前的 472 毫秒。这通常是因为在那之后加载的资源占用了剩余时间。

一个简化来说明它，如果我有一个在 5 毫秒内加载的页面并且有四个资源按顺序加载，每个资源需要 5 毫秒来加载。初始页面请求的间隔将是 5 x 4 = 20 毫秒，下一个请求将有 15 毫秒的间隔，接下来的 10 毫秒等等。我不确定这将是一个有用的指标...

# c# - 如何允许 getter helper 的默认初始化程序重载

> ID：14122609
> 
> 赞同：1
> 
> 时间：2013-01-02T13:05:23.090
> 
> 标签：c#, inotifypropertychanged, getter, optional-parameters

[我决定在我的 ViewModelBaseClass 中添加自定义 Get/SetValue(with INotifyPropertyChanged) 辅助函数，类似于此处](https://stackoverflow.com/a/13215202/259130)提到的类型安全方法。但是我想将可选的初始化程序添加到具有合理默认值的 Get helper Function 中。不幸的是，default 关键字将引用类型初始化为 null，将可为 null 的值类型初始化为 null，将值类型初始化为默认值。

我想创建一个通用函数，该函数将由 Get 帮助器调用，该函数返回类型的默认值、Nullable 的 BaseType 的默认值（如果可能）以及具有默认构造函数的引用类型的默认构造函数。对于不实现构造函数的引用类型，我猜它可能会返回 null。但是弄清楚如何在 if else 中调用 new T() vs default(T) 很困难，编译器说它没有正确的约束（因为当然约束是在运行时检查的）。

作为替代方案，我想我可以在 Get [helper](http://msmvps.com/blogs/jon_skeet/archive/2010/11/02/evil-code-overload-resolution-workaround.aspx)方法（其中他说：

> 这可能是我写过的最可怕的代码。
> 
> 请，请不要在现实生活中使用它。使用不同的方法名称或类似名称。不过，这是一个有趣的小谜题，不是吗？

) 作为一个好处，它可能允许我在没有默认构造函数的情况下强制引用类型来指定非可选的 init Func。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:14:15.243

你可以试试这个方法。我似乎找不到更好的方法来为可空类型的基础类型返回默认值。如果我发现了什么，我会继续搜索并更新我的帖子。但是，如果没有无参数构造函数，则无法传递引用类型。

```
static T GetDefault<T>() where T : new()
{
    var type = typeof (T);
    var underlying = Nullable.GetUnderlyingType(type);
    if (underlying != null)
        return (T) Activator.CreateInstance(underlying);
    return new T();
} 
```

或者，您可以使用此版本而无需`new()`在所有情况下都使用反射的约束，因此速度较慢。

```
static T GetDefault<T>()
{
    var type = typeof (T);
    var underlying = Nullable.GetUnderlyingType(type);
    if (underlying != null)
        return (T) Activator.CreateInstance(underlying);
    var constructor = type.GetConstructor(Type.EmptyTypes);
    return (T) (constructor == null ? default(T) : Activator.CreateInstance(type));
} 
```

# java - 特定方法的 Checkstyle 多行正则表达式

> ID：14122620
> 
> 赞同：0
> 
> 时间：2013-01-02T13:06:25.780
> 
> 标签：java, regex, multiline, checkstyle

我正在 Eclipse 中进行 java checkstyle 配置。我需要为第一行中不包含特定代码的所有公共方法添加警告。例子：

```
public void doA(){
    blabla();
    //some code
}

public String doB(int i){
    blabla();
    //some code
}

public Boolean doC(String str){
    //some code
} 
```

我对 checkstyle 的要求是在存在具有 public 修饰符且不以调用 blabla() 方法开头的方法时标记该行或报告错误。我试图用 /n 作为换行符制作一些多行正则表达式字符串，但到目前为止没有成功。

编辑：到目前为止，我尝试了这个但没有成功：

```
<module name="RegexpMultiline">
    <property name="format" value="(public)(\\s+)((?:[a-z][a-z0-9_]*))(\\s+)((?:[a-z][a-z0-9_]*))(\\(.*\\))(\\{)(/n)(blablabla)"/>
    <property name="message" value="Public method should have blablabla."/>
</module> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:34:44.333

在搜索模式中使用 Pattern.MULTILINE 指令：`"(?m)...\\s*..."`。这会跨行应用模式。

在搜索模式中使用 Pattern.DOTALL 指令：`"(?s)...\\s*..."`。这会捕获 '\n `with a`.`。

结合使用：`"(?ms)..."`.

# objective-c - 在 mount_smbfs 上出现身份验证错误

> ID：14122623
> 
> 赞同：2
> 
> 时间：2013-01-02T13:06:33.557
> 
> 标签：objective-c, macos, cocoa, authentication, mount

我正在尝试使用 mount_smbfs 将文件从 MAC 复制到 Windows。但是，我收到身份验证错误。它说“服务器拒绝连接：身份验证错误”。我正在写正确的用户名和密码，但问题没有改变。下面是我的代码。

```
NSTask* task = [[NSTask alloc] init];
[task setLaunchPath:@"/sbin/mount_smbfs"];
[task setArguments:[NSArray arrayWithObjects:@"//user:50000@smb://192.168.2.1/Share",@"/Users/Shared", nil]];
[task launch]; 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:09:02.067

从此[页面](https://web.archive.org/web/20150805074215/http://www.dejadejoder.com/blog/posts/2010/07/21/mac-osx-10-6-snow-leopard-mount_smbfs-authentication-error-problem/)- 您需要将工作组指定为连接的一部分，否则您总是会收到身份验证错误。

所以连接字符串应该是：

```
//WORKGROUP;user:50000@192.168.2.1/Share 
```

...假设`50000`是用户的密码`user`

请记住，这是您正在使用的 URL，因此请确保在将用户名和密码嵌入字符串之前对其进行 URL 转义，否则可能会被误解。

如果您要连接到未加入域的系统，则该`WORKGROUP`值几乎是任意的，并且在连接时往往会被忽略。这对于加入域的系统可能很重要，因为用户名是 a`DOMAIN\username`但是当您连接到非域系统`DOMAIN\`时，在检查用户凭据时会忽略该部分。

# mysql - 如何在触发器中的重复键后给出 where 条件

> ID：14122624
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:06:34.167
> 
> 标签：mysql, sql, navicat

下面的代码是我在 Navicat for Mysql 中写的一个触发器。插入部分工作正常，但为了更新，我需要根据 id 更新特定的行数。如何在更新 sql 查询中编写 where 子句。

```
insert into closingstockt(CLS_BSID,CLS_Qty,CLS_SQty,CLS_CDate)
select BS_ID as CLS_BSID,BS_Qty as CLS_Qty,BSS_Qty as CLS_SQty,curdate() 
from barstockt
where CLS_BSID=BS_ID 
on duplicate key update CLS_Qty=BS_Qty,CLS_SQty=BSS_Qty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:15:25.367

`ON DUPLICATE KEY UPDATE`将更新数据库中已经存在的行。例如：

```
INSERT INTO table (field,field2) VALUES ('data1','data2')
ON DUPLICATE KEY UPDATE lastupdate=NOW() 
```

编辑：我建议使用`IF()`

[INSERT ... 使用 WHERE 进行重复的密钥更新？](https://stackoverflow.com/questions/2469457/insert-on-duplicate-key-update-with-where)

# knockout.js - 格子的淘汰赛剑道寻呼机有问题

> ID：14122631
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:10.140
> 
> 标签：knockout.js, kendo-ui

我正在使用网格，一切都很完美：我可以更新删除和添加行，并且更改会立即更新，但寻呼机有问题：即使在示例页面 [http://rniemeyer.github.com/knockout-剑道/web/Grid.html](http://rniemeyer.github.com/knockout-kendo/web/Grid.html)

，当网格中的记录少于一个 pageSize ：消息在寻呼机上是：“NaN - NaN of 3 items”（这是错误的，它必须像“1 - 1 of 3 items”）是解决任何解决方法的地方这个小问题？

感谢转发

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T12:56:35.813

问题是因为`pageSize`没有定义。为了演示它，定义一个`id`设置为网格的网格。然后添加以下 HTML 标记：

```
<a id="fix" href="#" class="k-button">Fix</a> 
```

和以下 JavaScript 代码：

```
$("#fix").on("click", function () {
    var grid = $("#grid").data("kendoGrid");
    grid.dataSource.pageSize(2);
}); 
```

您会看到最初它显示 ，`NaN - NaN of 3 items`但是一旦您`click`在*Fix* `button`它就会显示`1 - 2 of 3 items`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:51:26.497

首先，非常感谢 OnaBai，你帮了我很大的忙。同时我发现了另一个技巧，用 knockoutjs customHandler 方式编写相同的东西：

```
 <div id="parcels_Grid" data-bind="kendoGrid:{ dataSource:
 {data:someData
 ,pageSize:3} 
 ,data:someData, rowTemplate: 'rowParcelTmpl', altRowTemplate:   
 'altParcelTmpl',   useKOTemplates: true }"> </div> 
```

请注意，您必须指定“dataSource”和“data”属性（否则它不应该工作）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-02T11:20:07.380

```
<div id="grid" class="grid" data-bind="kendoGrid: {
data: Reminderlist, scrollable: false, resizable: true, selectable: false, scrollable: false, sortable: true, selectable: 'multiple cell', pageable: true, groupable: true, dataSource: { pageSize: 20 },
                           columns: [{ field: 'Duration', title: 'Duration' },
                                     { field: 'Subject', title: 'Subject' },
                                     { field: 'EmailMessage', title: 'Email Message' },
                                     { field: 'SMSText', title: 'Message Text' }
                                    ], change: GridChange
}">
</div> 
```

`dataSource: { pageSize: 20 }`像这样指定....

如果你只提到`pageSize: 20`这样，它在某些情况下不起作用

# cron - 无法在 cPanel 中运行的 Cron 作业

> ID：14122632
> 
> 赞同：0
> 
> 时间：2013-01-02T13:07:11.827
> 
> 标签：cron

在使用 Cron Jobs 时，我遇到了以下错误。

`/bin/sh: fork: retry: Resource temporarily unavailable`

谁能告诉我这个错误是什么以及如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T07:01:59.043

重新启动您的 cron 服务。如果仍然出现错误，请查看您的日志。

# c# - 如何在 Windows Phone 8 (WP8) 上使用外部或第 3 方字体？

> ID：14122635
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:23.550
> 
> 标签：c#, windows-phone-7, windows-phone-8

我在 WP7 项目中使用外部字体。该项目在 WP7 设备上运行并正确显示字体。

相同的应用程序在 WP8 设备上运行，并正确显示文本，如果它没有转换成 WP8。

**问题**

我需要将项目转换为 WP8，以便使用 WP8 的功能。转换后，文本不再使用外部字体正确显示。

```
<TextBlock Visibility="Visible" 
           Text="سیدھا راستہ"
           FontFamily="fonts/NafeesNaskhv2.01.ttf#Nafees Naskh v2.01" /> 
```

**问题**

*   WP8 中是否存在使用上述语法的任何已知问题？
*   是否允许在 WP8 上使用外部字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T09:11:47.743

我在这种情况下发现的奇怪答案是微软为某些语言创建并引入了一些字体，包括乌尔都语。而且他们不支持那些特定语言的其他字体。

Microsoft 明确不支持其他乌尔都语字体。不过这很奇怪！

因此，当我将字体更改为列表中的字体（点击下面的链接）时，它开始在 WP8 中工作。对于 WP7，我仍然必须使用其他字体，因为这里提到的字体在 WP7 中不起作用。

[Windows Phone 中的字体和语言配置支持](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202920%28v=vs.105%29.aspx)

# c# - C# - 静态集合与集合作为 单例字段的性能

> ID：14122636
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:25.117
> 
> 标签：c#, performance, static, singleton

我想问一下，对对象集合的静态引用与拥有单例类并将集合作为单例类的普通字段之间是否存在性能差异。

据我所知，静态字段存储在堆的不同部分，所以在这种情况下使用单例时引用的位置不是更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:21:37.840

静态存储唯一慢的地方是对静态字段的读取或写入。从静态字段获取集合实例或单例实例后，性能没有差异。您现在有一个对象引用，并且不再接触静态存储。

请注意，从静态字段引用的对象的内存不存储*在*该字段中。它存储在堆上。只有对它的*引用*是静态存储。

静态存储和实例存储之间的性能差异也很小。

现在，什么更快？单例实例变体较慢，因为您必须通过两个内存引用操作才能到达集合而不是一个。

# c++ - 为什么纯虚函数不能内联？

> ID：14122637
> 
> 赞同：0
> 
> 时间：2013-01-02T13:07:25.663
> 
> 标签：c++

> **可能重复：**
> [纯虚函数可能没有内联定义。为什么？](https://stackoverflow.com/questions/4174694/pure-virtual-functions-may-not-have-an-inline-definition-why)

正如标题所说，为什么？那么（非纯）虚函数怎么样，它可以是内联格式吗？我想知道真正的原因。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:08:41.733

99% 的情况下都不能使用虚函数，`inlined`因为函数指针在运行时使用`vtable`.

虚函数的目的是被子类重载。一个例子 ：

```
class A
{
    virtual int foo() { return 1; }
}

class B : public A
{
    virtual int foo() { return 2; }
}

int main(void)
{
    B b;
    A *a = &b;

    return a->foo();
} 
```

主函数将返回 2 而不是 1。

如果编译器内联函数，它将返回 1，因为编译器只能假设`*a`is`A`和 not的类型`B`。因此，如果编译器不能安全地假设`*a`.

在此示例中，编译器可以成功且安全地假定不需要虚拟化：这实际上取决于编译器和优化级别。

在某些情况下，编译器可以安全地假设不需要虚拟化，并且只有在这些情况下 inline 关键字才有意义。

即使您使用关键字声明函数`inline`，该函数也可能不会被内联。

无论如何手动添加`inline`关键字在大多数情况下都不是一个好主意，今天的编译器很好并且在必要时自动内联函数。通过添加`inline`您可能会在某些情况下降低性能，因此最好不要滥用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:16:21.423

好吧，纯虚函数当然可以标记为内联。

```
struct Base
{
    virtual void Func() const = 0;
};

inline void Base::Func() const
{ std::cout<<"Base\n"; }

struct Concrete : Base
{
    virtual void Func() const;
};

inline void Concrete::Func() const
{ Base::Func(); std::cout<<"Concrete\n"; } 
```

`inline`此外，在编译器可以静态确定需要调用的函数的情况下，可以内联虚函数（与关键字的关系不是很密切）。例如：

```
int main(void)
{
    Concrete o;
    o.Func();
} 
```

完整演示：http: [//ideone.com/zlxn8I](http://ideone.com/zlxn8I)

并查看这个相关问题：[LTO、去虚拟化和虚拟表](https://stackoverflow.com/q/7046739/103167)

# java - Java MySQL NullPointerException 查询

> ID：14122638
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:26.233
> 
> 标签：java, sql, nullpointerexception

基本上我在从数据库中获取 ResultSet 时遇到问题。错误发生在此代码块中的第 34 行（？）附近，但我已将其标记

```
ResultSet rs = caq.executeQuery("SELECT * FROM ProjectScore"); //error goes here 
```

我在运行时得到一个空指针异常，这是下面 catch 语句的输出：

```
null, calculating average score failed

java.lang.NullPointerException

[Ljava.lang.StackTraceElement;@1de2b1 
```

有趣的是，我最后在课堂上使用了完全相同的连接，并且我没有收到任何错误。将语句复制到第一堂课也不起作用，所以我认为它是别的东西。我想这就是我所拥有的，任何帮助表示赞赏:)

```
import java.awt.*;
import java.awt.event.*;
import java.sql.*;

import javax.swing.*;

public class MainWindow extends JFrame implements ActionListener{
    //.......................
    private int [] averageScore;

    //References
    private LogInWindow liw;
    private NewUserWindow nuw;
    private ScoreWindow sw;
    private boolean isAnotherWindowOpen = false;
    private boolean isLoggedIn = false;
    private ConnectionAndQueries caq;

    public MainWindow(ConnectionAndQueries caq) throws SQLException{
        this.caq = caq;

        //.................................

        //Middle
        averageScore = new int [9];
        calculateAverageScore();
        setTable();

        //............................
    }

    private void calculateAverageScore() throws SQLException{
        try{
            ResultSet rs = caq.executeQuery("SELECT * FROM ProjectScore"); //error goes here
            int [] count = new int [9];
            int [] totalScore = new int [9];

            while(rs.next()){
                int itemID = rs.getInt("itemID");

                count[itemID]++;
                totalScore[itemID] += rs.getInt("Score");
            }

            for(int i = 0; i < 9; i++){
                averageScore[i] = totalScore[i] / count[i];
            }
        }
        catch (Exception e) {
            System.out.print(e.getMessage());
            System.out.println(", calculating average score failed");
            System.out.println(e.toString());
            System.out.println(e.getStackTrace().toString());
        }
    }
}

//next class

import java.sql.*;

public class ConnectionAndQueries {
    private static Connection connection;
    private static Statement statement;
    private MainWindow mw;

    public ConnectionAndQueries() throws ClassNotFoundException, SQLException{
        mw = new MainWindow(this);
        connect();
    }

    public static void connect() throws ClassNotFoundException, SQLException{
        try{
            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection("jdbc:mysql://zzzzzzzzzz", "yyyy",     "xxxx"); //dont think im allowed to give that info
            statement = connection.createStatement();
        } catch (Exception e) {
            System.out.println("Connecting to the database failed");
        }
    }

    public ResultSet executeQuery(String query) throws SQLException {
        return statement.executeQuery(query);
    }

    public int executeUpdate(String update) throws SQLException {
          return statement.executeUpdate(update);
    }

    public static void main(String [] args) throws ClassNotFoundException, SQLException{
        ConnectionAndQueries caq = new ConnectionAndQueries();
    }
}

//another class which uses the connection class, and works.

import java.awt.*;
import java.awt.event.*;
import java.sql.*;

import javax.swing.*;

public class LogInWindow extends JFrame implements ActionListener{
    //........................

    //References
    private MainWindow mw;
    private ConnectionAndQueries caq;

    public LogInWindow(MainWindow mw, ConnectionAndQueries caq){
        this.mw = mw;
        this.caq = caq;

        //......................
    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == logIn){
            String usn = usernameField.getText();
            String pwd = passwordField.getText();

            try {
                ResultSet rs = caq.executeQuery("SELECT * FROM ProjectCustomer");

                while(rs.next()){
                    if(rs.getString("username").equals(usn)){
                        if(rs.getString("passwrd").equals(pwd)){
                            logInSuccess(usn);
                            mw.userLoggedIn(usn);
                            quit();
                        }
                    }
                }

                if(mw.isUserLoggedIn() == false)
                    logInFailed();

            } catch (Exception e2) {
                System.out.print(e2.getMessage());
                System.out.println(", error at log in");
                System.out.println(e2.toString());
            }
        }

        else if(e.getSource() == quit){
            quit();
        }
    }

    //............................
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:24:01.753

调用此构造函数时，它会将自身的引用发送到 MainWindow。

```
public ConnectionAndQueries() throws ClassNotFoundException, SQLException{
    mw = new MainWindow(this);
    connect();
} 
```

但是，由于在被引用的对象尚未构造（即构造函数尚未完成）时发送此引用，因此此时引用只能为空。

猴子修复此问题的一种方法是将代码从构造函数移动到 main 方法，在*new ConnectionAndQueries()*下方。但是，我强烈建议重构程序结构，将数据库连接和操作分离到一个或多个单独的类中，并将 UI 代码与数据库代码解耦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:49:21.453

问题是由于构造函数。

> 公共 ConnectionAndQueries() 抛出 ClassNotFoundException, SQLException{
> 
> > mw = new MainWindow(this);
> > 
> > > 连接（）;
> > > 
> > > > }

这里来自 Mainwindow 的构造函数，它对 calculateAverageScore 进行了调用，它正在使用 ConnectionAndQueries 执行查询。由于目前未调用 connect()，因此连接和语句为空。所以得到空指针异常。

尝试，在 mw = new MainWindow(this); 之前调用 connect() 陈述。

> 公共 ConnectionAndQueries() 抛出 ClassNotFoundException, SQLException{
> 
> > 连接（）;
> > 
> > > mw = new MainWindow(this);
> > > 
> > > > }

但可以肯定的是，正如 Gorkamorka 所建议的那样，需要进行代码重构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:09:52.460

看起来你的`ConnectionAndQuery`对象是空的。

我会在构造时检查它是否为空，而不是在您尝试使用它时。这将更早地捕获错误（并且在更有用的时间）。这也有可能（因为错误报告不清楚 - 见下文）：

```
catch (Exception e) {
    System.out.println("Connecting to the database failed");
} 
```

正在捕获错误但未初始化语句对象（null）。我将检查语句的空性作为先决条件，或者更好地仍然抛出该原始异常，以便客户端代码必须处理损坏的`ConnectionAndQuery`对象。

这个

```
System.out.println(e.getStackTrace().toString()); 
```

不是很有帮助，顺便说一句。我宁愿这样做：

```
e.printStackTrace(); 
```

因为它会转储完整的堆栈跟踪，并将其转储到`stderr`（错误的常规目的地）。目前您正在调用`toString()`堆栈帧数组，但这并没有真正做任何有用的事情。

# c++ - C++ 容器类

> ID：14122639
> 
> 赞同：0
> 
> 时间：2013-01-02T13:07:27.100
> 
> 标签：c++, containers

目前我从 Java 切换到 C++，这让我很难过（但有很多新经验 ^^）。我正在编写一些包含我的程序配置的数据传输对象。我已经写了一些类，现在我想要一个行为像容器的类。

**这是容器的标题：**

```
class MyContainer{

public:
MyContainer();
virtual ~MyContainer();

Config getConfig(TypeEnum type) {
    switch (type) {
    case ATYPE:
        return config_a;
    case BTYPE:
        return config_b;
    default:
        break;
    }

}

ConfigA config_a;
    ConfigB config_b;
}; 
```

配置中有一些数据，并且是从另一个配置文件派生的。

**这是 C++ 源代码：**

```
 MyContainer::MyContainer(){
  ConfigA config_a(int c = 1);
  ConfigB config_b(double b = 2.1);
  this->config_a = config_a;
  this->config_b = config_b;
} 
```

我认为有几个问题。但对我来说主要的问题是： **我怎样才能让这个容器中的这些配置共享给我程序的其他模块？**我试图使 config_a 指向一个指针，但我总是收到这些类型不匹配的错误消息。

```
 this->config_a = &config_a; //If ConfigA config_a; was ConfigA *config_a; instead 
```

如果您还有一分钟时间给我，请告诉我`getConfig`-Method 是否可以这样工作。

如果还有其他主题，请分享。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:39:50.117

你的代码：

```
ConfigA config_a(int c = 1); 
```

表示返回 ConfigA 并采用默认值为 1 的 int 的函数原型。但如果将 int 声明与表达式分开，它将变为其他内容：

```
int c;
ConfigA config_a(c = 1); //  This is construction of a ConfigA object 
```

我会这样写构造函数：

```
MyContainer::MyContainer(int c = 1, double d = 2.1)
 :    config_a (c), config_b (d)  //  Construct the members in the intialization line
{
} 
```

如果要共享指向这些成员的指针，请返回如下指针：

```
ConfigA * MyContainer::GetConfigA(){return &config_a;}
ConfigB * MyContainer::GetConfigB(){return &config_b;} 
```

但是，如果您想使用指针成员：

```
 MyContainer::MyContainer(int c = 1, double d = 2.1)
 :    pConfig_a (new ConfigA (c)), pConfig_b (new ConfigB (d))
{
}

ConfigA * MyContainer::GetConfigA(){return pConfig_a;}
ConfigB * MyContainer::GetConfigB(){return pConfig_b;}

 MyContainer::~MyContainer()
{
    delete pConfig_a;
    delete pConfig_b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:23:22.667

1.  如果您`ConfigA configA`在标头中写入，则在分配容器类期间会自动分配 configA。所以你不必像下面这样初始化它：

    ```
    ConfigA config_a(1);
    this->config_a = config_a; 
    ```

    相反，您可以执行以下操作：

    ```
    this->config_a->value = 1; 
    ```

2.  不需要写：

    ```
    ConfigA config_a(int c = 1); 
    ```

    简而言之，提到`int c = 1`的是一个操作，它：

    *   在堆上为临时变量 c 分配空间（这也可以在进入方法时完成）
    *   为其赋值，这具有返回右侧值的副作用
    *   返回的右侧值应用于 ConfigA 构造函数。

    要理解这一点，请尝试以下操作：

    ```
    int a, b, c;
    c = (a = 2) + (b = 8);
    printf("a = %d, b = %d, c = %d\n", a, b, c); 
    ```

3.  如果要将配置传递给其他模块，可以选择以下解决方案之一：

    a) 接受配置作为参考（配置类必须派生自同一个基类）：

    ```
    ConfigA & configA = dynamic_cast<ConfigA &>(container.get_config(ATYPE)); 
    ```

    在这种情况下，容器应通过以下方式返回配置：

    ```
    return this->configA; 
    ```

    但标题应修改：

    ```
    Config & getConfig(TypeEnum type) { (...) 
    ```

    b) 接受配置作为指针（同上）

    ```
    ConfigA * configA = dynamic_cast<ConfigA *>(container.get_config(ATYPE)); 
    ```

    在这种情况下，容器应通过以下方式返回配置：

    ```
    return &(this->configA); 
    ```

最后，这是我会这样做的方式：

```
class ConfigA
{
private:
    int i;

public:
    int GetI() const { return i; }
    void SetI(int newI) { i = newI; }
};

class ConfigB
{
private:
    float f;

public:
    float GetF() const { return f; }
    void SetF(float newF) { f = newF; }
};

class Config
{
private:
    ConfigA configA;
    ConfigB configB;

public:
    ConfigA & GetConfigA() { return configA; }
    ConfigB & GetConfigB() { return configB; }
};

class AppContext
{
private:
    Config config;

public:
    Config & GetConfig() { return config; }
};

// Somewhere in the code

Config & config = context.GetConfig();
ConfigA & configA = config.GetConfigA();
configA.SetI(44); 
```

const 正确性也值得一提，但我们将把它作为 OP 的练习；）

# xcode - 下载哪个版本 4.4.1 或 4.5？

> ID：14122640
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:34.097
> 
> 标签：xcode

[苹果应用](https://developer.apple.com/downloads/index.action#)

我真的很困惑。4.4.1 版本似乎在 2012 年 12 月 5 日更新。而 4.5 似乎已在 2012 年 10 月更新。更新日期似乎令人困惑！这就像在更新版本之后更新的旧版本。那么应该下载哪个版本呢？

维什瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:40:32.587

始终使用最新的稳定版本的 Xcode。所以你应该下载 Xcode 版本 4.5.2

# database - 对称 DS 在 DataExtractorService 上花费的时间太长

> ID：14122641
> 
> 赞同：0
> 
> 时间：2013-01-02T13:07:39.077
> 
> 标签：database, database-replication, symmetric

我正在使用 SDS 将数据从 SQL 服务器迁移到 Mysql 数据库。尽管迁移所有现有数据需要大约 48 小时，但我对移动未使用数据库数据的测试工作正常。我配置了死触发器来移动所有当前数据，并配置触发器来移动新添加的数据。

移动到正在使用的实时数据库时，数据迁移速度太慢。在日志文件中，我不断收到消息：

[corp-000] - DataExtractorService - 在 1 个批次 105391240 字节后达到一个同步字节阈值。数据将在下次同步时继续同步

我有 180 个表，我为死触发器创建了 15 个通道，为触发器创建了 6 个通道。对于我的配置文件：

job.routing.period.time.ms=2000

job.push.period.time.ms=5000

job.pull.period.time.ms=5000

我没有外键配置，所以不会有问题。我想知道的是如何使这个过程更快。我应该减少频道数量吗？

我不知道可能是什么问题，因为我运行的第一次测试非常顺利。阈值没有被清除是否有原因。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:58:59.697

你的桌子有多大？SymmetricDS 实例有多少内存？

我使用 SymmetricDS 已经有一段时间了，并且没有对其进行任何分析，我相信一旦我增加了可用内存（我通常在 Tomcat 容器中运行它），重新加载大型数据库会更快。

话虽如此，SymmetricDS 在初始复制方面并不像其他一些工具那么快。

你看过 tmp 文件夹吗？你能看到文件大小的任何进展吗？也就是说，SymmetricDS 在将批处理发送到远程端之前临时写入本地的文件？您是否尝试过打开更细粒度的日志记录以获取更多详细信息？数据库超时怎么办？可能是提取查询运行时间过长，而数据库只是将它们切断了吗？

# matlab - 在Matlab中将图形调整为轴位置

> ID：14122647
> 
> 赞同：1
> 
> 时间：2013-01-02T13:07:49.680
> 
> 标签：matlab, matlab-figure

我有一个带有条形图的图形，我删除了所有刻度和标题，所以现在只显示条形本身。我想让这个数字缩小到条形图的大小。我尝试了以下方法：

```
set(gca,'Units', 'Pixels');  
set(gca,'XLim', [0.5 10.5],'YLim', [0 1],'Units', 'Pixels');
a=get(gca, 'Position');
set(gcf, 'Units', 'Pixels');
b=get(gcf,'Position');
set(gca, 'DataAspectRatioMode', 'manual', 'XLimMode', 'manual','YLimMode', 'manual')
set(gca, 'Position', [5,5,a(3),a(4)]);
set(gcf, 'Position', [10,10, a(3)+10,a(4)+10]); 
```

然而这不起作用。经过一些调查，我发现主要问题是轴不对齐轴大小。有什么方法可以在不计算图中每个图的大小的情况下解决这个问题？我想减少下图周围的空白区域： ![原图](../Images/c164865f795e4fc40db54b8a68954ff9.png) 这是运行我的代码后的图，仍然有很多空间，这是因为这是轴的大小：

![代码运行后的图](../Images/23b1dba5f5757acaf01b9317c00f553c.png)

谢谢

编辑：问题源于轴大小，如下图所示，上图`DataAspectRatio`设置为`[1 1 1]`，下图未设置（自动模式）。请注意，轴的大小不会改变（用黑色方块表示） *由于打开绘图工具，会出现一些变化，这会使图形停靠。 ![具有手动纵横比的图形](../Images/ec272af027fae5b0d0d2664eea1acae5.png) ![具有自动纵横比的图形](../Images/989702c0f0dca5e4aa6dc6c6c52f3fc0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:20:54.860

它有帮助吗？

```
f = figure;

% generate bar
y = [75.995,91.972,105.711,123.203,131.669,...
       150.697,179.323,203.212,226.505,249.633,281.422];
bar(y);
% end of graph  

axis tight;
allAx = findall(f,'type','axes');
pa = get(gca, 'Position');
pf = get(f, 'Position');
% change shape of the figure to match                                                                                         
% xsize(figure)/yszie(figure) = xsize(axis)/ysize(axis)                                                                       
pf(4) = ((pf(3)-pf(1))*pa(4)+pa(2)*(pf(1)-pf(3))+pf(2)*pa(3)-pa(1)*pf(2))/(pa(3)-pa(1));
set(allAx, 'Units', 'Normalized', 'Position', [0, 0, 1, 1]);
set(f, 'Position', pf); 
```

# maven - Maven JavaDoc 插件：聚合依赖项

> ID：14122648
> 
> 赞同：2
> 
> 时间：2013-01-02T13:07:50.353
> 
> 标签：maven, javadoc, maven-javadoc-plugin

我正在尝试编译 JavaDocs：

```
mvn javadoc:aggregate 
```

我不断收到错误，例如：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.5:aggregate (default-cli) on project mutopia: An error has occurred in JavaDocs report generation:Exit code: 1 - /Users/Aram/Development/Java/MUtopia/Code/mutopia/mutopia-server/src/main/java/au/edu/unimelb/civenv/hpvat/mutopia/server/Asset.java:3: package org.springframework.roo.addon.javabean does not exist
[ERROR] import org.springframework.roo.addon.javabean.RooJavaBean; 
```

和

```
[ERROR] /Users/Aram/Development/Java/MUtopia/Code/mutopia/mutopia-server/src/main/java/au/edu/unimelb/civenv/hpvat/mutopia/server/Param.java:8: package flexjson does not exist
[ERROR] import flexjson.JSONDeserializer; 
```

显然，我对多模块/聚合项目的依赖项没有被识别。`pom.xml`在我的一个模块文件中，这两个都被标记为依赖项。我是否需要`maven-javadoc-plugin`在父 pom.xml 中提供额外的参数？

**编辑：**

我跑了`mvn install`，它似乎奏效了。我的父母`pom.xml`是：

```
<build>
    ...
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.5</version>
        <configuration>
            <aggregate>true</aggregate>
        </configuration>
    </plugin>
    ...
</build> 
```

该版本已过时，但这似乎不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:27:09.967

您需要像这样通过 pom 配置：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <!-- Default configuration for all reports -->
          ...
        </configuration>
        <executions>
          <execution>
            <id>aggregate</id>
            <goals>
              <goal>aggregate</goal>
            </goals>
            <phase>site</phase>
            <configuration>
              <!-- Specific configuration for the aggregate report -->
              ...
            </configuration>
          </execution>
          ...
        </executions>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

而不是你需要调用 mvn site ...

# python - python中的空心钻石

> ID：14122653
> 
> 赞同：3
> 
> 时间：2013-01-02T13:08:06.193
> 
> 标签：python

我的目标是使用 python 创建一个空心钻石。

样本输入：

```
Input an odd Integer:
      9 
```

样本输出：

```
 *
   * *
  *   *
 *     *
*       *
 *     *
  *   *
   * *
    * 
```

但到目前为止，我的以下代码无法正常工作。请帮我修改代码以实现上述目标：

```
a=int(input("Input an odd integer: "))

k=1
c=1

r=a

while k<=r:
    while c<=r:
        print "*"
        c+=1

    r-=1
    c=1

    while c<=2*k-1:
        print "*"
        c+=1

    print "\n"
    k+=1

r=1
k=1
c=1

while k<=a-1:
   while c<=r:
       print " "
       c+=1

   r+=1
   c=1

   while c<= 2*(a-k)-1:
       print ("*")
       c+=1

   print "\n"
   k+=1 
```

上面的代码返回的结果与我的目标相差甚远。

```
Input an odd integer: 7
*
*
*
*
*
*
*
*

*
*
*
*
*
*
*
*

*
*
*
*
*
*
*

*
*
*
*
*
*
*

*
*
*
*
*
*
*
*
*
*
*

*
*
*
*
*
*
*
*
*

*
*
*
*
*
* 
*

*
*
*
*
*

*
*
*

* 
```

我实际上正在转换这篇文章中的代码：http: [//www.programmingsimplified.com/c/source-code/c-program-print-diamond-pattern](http://www.programmingsimplified.com/c/source-code/c-program-print-diamond-pattern) 用 C 语言编写，稍后将修改为空心的，但我可以'不明白...我的转换有问题..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T13:47:02.353

A Hollow diamond is the solution to the equation

```
|x|+|y| = N 
```

on an integer grid. So Hollow diamond as a 1-liner:

```
In [22]: N = 9//2; print('\n'.join([''.join([('*' if abs(x)+abs(y) == N else ' ') for x in range(-N, N+1)]) for y in range(-N, N+1)]))
    *    
   * *   
  *   *  
 *     * 
*       *
 *     * 
  *   *  
   * *   
    * 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T13:24:07.690

Your problem is that you keep using `print`. The print statement (and the function in Python 3) will add a line-break after what you printed, unless you explicitely tell it not to. You can do that in Python 2 like this:

```
print '*', # note the trailing comma 
```

Or in Python 3 (with the print function) like this:

```
print('*', end='') 
```

### My solution

I took my own take at the problem and came up with this solution:

```
# The diamond size
l = 9

# Initialize first row; this will create a list with a
# single element, the first row containing a single star
rows = ['*']

# Add half of the rows; we loop over the odd numbers from
# 1 to l, and then append a star followed by `i` spaces and
# again a star. Note that range will not include `l` itself.
for i in range(1, l, 2):
    rows.append('*' + ' ' * i + '*')

# Mirror the rows and append; we get all but the last row
# (the middle row) from the list, and inverse it (using
# `[::-1]`) and add that to the original list. Now we have
# all the rows we need. Print it to see what's inside.
rows += rows[:-1][::-1]

# center-align each row, and join them
# We first define a function that does nothing else than
# centering whatever it gets to `l` characters. This will
# add the spaces we need around the stars
align = lambda x: ('{:^%s}' % l).format(x)

# And then we apply that function to all rows using `map`
# and then join the rows by a line break.
diamond = '\n'.join(map(align, rows))

# and print
print(diamond) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:31:23.770

```
def diamond(n, c='*'):
    for i in range(n):
        spc = i * 2 - 1
        if spc >= n - 1:
            spc = n - spc % n - 4
        if spc < 1:
            print(c.center(n))
        else:
            print((c + spc * ' ' + c).center(n))

if __name__ == '__main__':
    diamond(int(input("Input an odd integer: "))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:32:29.827

this is not pretty, but its a function that does what you want:

```
def make_diamond(size):
    if not size%2:
        raise ValueError('odd number required')
    r = [' ' * space + '*' + ' ' * (size-2-(space*2)) + '*' + ' ' * space for space in xrange((size-1)/2)]    
    r.append(' ' * ((size-1)/2) + '*' + ' ' * ((size-1)/2))
    return '\n'.join(r[-1:0:-1] + r) 
```

*   first i check to make sure its an odd number,
*   then i create a list of the lines from the center downwards.
*   then i create the last point.
*   then i return them as as a string, with a mirror of the bottom on top without the center line.

output:

```
>>> print make_diamond(5)
  *  
 * * 
*   *
 * * 
  *  
>>> print make_diamond(9)
    *    
   * *   
  *   *  
 *     * 
*       *
 *     * 
  *   *  
   * *   
    * 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-04T21:42:48.883

Made it in one single loop ;)

```
x = input("enter no of odd lines : ") #e.g. x=5
i = int(math.fabs(x/2)) # i=2 (loop for spaces before first star)
j = int(x-2) #j=3 # y & j carry loops for spaces in between
y = int(x-3) #y=2 
print ( " " * i + "*" )
i = i-1 #i=1

while math.fabs(i) <= math.fabs((x/2)-1): # i <= 1
      b = int(j- math.fabs(y)) # b = (1, 3, 1) no of spaces in between stars
      a = int(math.fabs(i)) # a = (1, 0, 1) no of spaces before first star
      print (" "* a + "*" + " "*b + "*")
      y = y-2 # 2,0,-2
      i = i-1 # 1,0,-1, -2 (loop wont run for -2)

i = int(math.fabs(i)) # i = -2
print ( " " * i + "*") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-25T10:57:55.853

The previous answer has got two corrections, which've been done here :

```
import math
x = int(input("enter no of odd lines : ")) #e.g. x=5
i = int(math.fabs(x/2)) # i=2 (loop for spaces before first star)
j = int(x-2) #j=3 # y & j carry loops for spaces in between
y = int(x-3) #y=2 
print ( " " * i + "*" )
i = i-1 #i=1

while math.fabs(i) <= math.fabs((x/2)-1): # i <= 1
    b = int(j- math.fabs(y)) # b = (1, 3, 1) no of spaces in between stars
    a = int(math.fabs(i)) # a = (1, 0, 1) no of spaces before first star
    print (" "* a + "*" + " "*b + "*")
    y = y-2 # 2,0,-2
    i = i-1 # 1,0,-1, -2 (loop wont run for -2)

i = int(math.fabs(i)) # i = -2
print ( " " * i + "*") 
```

Note : Now this works for both python 2.5x and python 3.x If you wish to know the difference in the two answers, then google it!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-12T21:46:01.453

```
sizeChoice = 13
N = sizeChoice//2
for column in range (-N, N + 1):
    for row in range (-N, N + 1):
        if abs(column) + abs(row) == N:
            print ("*", end = " ")
        else:
            print(" ", end = " ")
    print ( ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-20T13:43:30.807

this code works perfectly to print a hollow diamond where you can set diagonal length upto user requirement

```
n=int(input('Enter Odd Diagonal length :'))-1
j=n-1
print(' '*(n)+'*')
for i in range(1, 2*n):
    if i>n:
        print(' '*(i-n)+'*'+' '*(2*j-1)+'*')
        j-=1
    else:
        print(' '*(n-i)+'*'+' '*(2*i-1)+'*')
if n>1:
    print(' '*n+'*') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-25T07:56:29.517

**Hallow Diamond in Python using only print function**

```
for i in range(1,6):
    print(' '*(5-i) + '*'*1 + ' '*(i-1) + ' '*max((i-2),0) + '*'*(1%i) )

for j in range(4,0,-1):
    print(' '*(5-j) + '*'*1 + ' '*(j-1) + ' '*max((j-2),0) + '*'*(1%j) ) 
```

# silverlight - 如何在 silverlight mvvm 中实现多个 Radiobutton 数据绑定？

> ID：14122657
> 
> 赞同：0
> 
> 时间：2013-01-02T13:08:23.433
> 
> 标签：silverlight, entity-framework, mvvm

我对我的 Silverlight5 和 MVVM 模式有疑问..

在我的用户控件窗口中，我有 2 个单选按钮控件，并且我使用`GroupName="sex"`.

语法是：

```
<RadioButton IsChecked="{Binding EntityValue,Mode=TwoWay}" Content="Male"
             GroupName="Sex"
             Visibility="{Binding DataTypeID, Converter={StaticResource radioconverter}}"/>

<RadioButton IsChecked="{Binding EntityValue,Mode=TwoWay}" Content="Female"
             GroupName="Sex"
             Visibility="{Binding DataTypeID, Converter={StaticResource radioconverter}}"/> 
```

我已成功使用实体框架将检查值插入到数据库中。

例如：我的数据库将如下所示：

```
CustomerID  | CustomerName | EntityValue |
------------------------------------------
1           | raj          | Male
2           | reena        | Female 
```

数据库名称是：`CDetails`

如果我选择了要绑定到我`customerID=1`的值的方法`Male``radioButton1`

和

如果我选择了要绑定到我`customerID=2`的值的方法`Female``radioButton2`

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:26:21.577

您需要编写一个转换器来将其更改`EntityValue`为布尔值并为您希望它返回 true 的值传递一个参数：

```
<RadioButton IsChecked="{Binding EntityValue, Mode=TwoWay,
                         Converter={StaticResource MyConverter},
                         ConverterParameter=Male}"
             Content="Male"/>

<RadioButton IsChecked="{Binding EntityValue, Mode=TwoWay,
                         Converter={StaticResource MyConverter},
                         ConverterParameter=Female}"
             Content="Female"/> 
```

然后转换器（假设您的男性/女性是一个字符串 - 如果不是，请替换演员表）：

```
public class MyConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string input = (string)value;
        string test = (string)parameter;
        return input == test;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null || !(value is bool))
        {
            return string.Empty;
        }
        if (parameter == null || !(parameter is string))
        {
            return string.Empty;
        }
        if ((bool)value)
        {
            return parameter.ToString();
        }
        else
        {
            return string.Empty;
        }
    }
} 
```

# java - 在运行 java 版本的 nachos 时点击“RuntimePermission createClassLoader”

> ID：14122658
> 
> 赞同：1
> 
> 时间：2013-01-02T13:08:26.580
> 
> 标签：java, permissions, nachos

我尝试在 Windows 7 和 Redhat Linux 上运行 Java 版本的[Nachos](http://inst.eecs.berkeley.edu/~cs162/fa10/Nachos/nachos-java.tar.gz)，但由于 RuntimePermission 问题，两者都失败了，如下所示。

```
user\nachos\proj1> java nachos.machine.Machine nachos.conf

 nachos 5.0j initializing... config interrupt timer user-check

 Lacked permission: (java.lang.RuntimePermission createClassLoader)

Exception in thread "main" nachos.machine.AssertionFailureError
                at nachos.machine.Lib.assertTrue(Lib.java:77)
                at nachos.machine.Lib.assertNotReached(Lib.java:96)
                at nachos.machine.Lib.checkMethod(Lib.java:565)
                at nachos.machine.Machine.checkUserClasses(Machine.java:262)
                at nachos.machine.Machine.main(Machine.java:57) 
```

用关键字`RuntimePermission`和google 搜索`createClassLoader`，找到了一些需要修改文件的解决方案：`$(JAVA HOME)\jre\lib\security\java.policy`. 所以我在上面附加了以下几行。

```
grant {
    permission java.security.AllPermission;
}; 
```

但是，它仍然无法工作。任何人都可以提供有关此问题的任何线索吗？谢谢。

# php - 在评论系统中获得回复

> ID：14122667
> 
> 赞同：0
> 
> 时间：2013-01-02T13:09:28.997
> 
> 标签：php, mysql, sql, comments

我正在开发评论系统，其中显示帖子、评论（父评论）和评论回复（子评论）。

MySql 评论表如下所示：

```
comment_id int primary_key
post_id int // where i save the post id 
author varchar
comment text
parent_id int // where i save parent comment id in case this comment is reply of another comment 
```

现在，我的情况是当我通过 MySql 结果集打印评论信息时。正是在尝试打印子评论（其他评论的评论）和父评论（帖子的评论）时。

我目前实现这一点的方法是选择所有没有 parent_id 的评论

```
SELECT * FROM comments WHERE parent_id = null 
```

并使用 PHP 循环所有结果，然后在循环内为每个评论搜索是否有任何子评论进行另一个查询。

```
<?php

$sql_result_set;

while($comment = mysql_fetch_array($sql_result_set, MYSQL_ASSOC){
      // process comment info 
      $sql = "SELECT * FROM comments where parent_id = ".$comment['comment_id'];
      $result = mysqli_query($sql);
      if(mysql_num_rows($result)>0){
         while($child_comments = mysql_fetch_array($result, MYSQL_ASSOC)){
               // child comments of the parent
         }
      }
}

?> 
```

现在，我的问题是“有没有更好的方法来做同样的事情？”

感谢您的帮助

祝一切顺利，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:18:47.707

另一种方法是收集数组中的所有值，即在上述情况下选择所有 parent_id 并使用

```
WHERE IN(parent_id list) 
```

# gwt - GWT compositC 组件测试用例？

> ID：14122672
> 
> 赞同：0
> 
> 时间：2013-01-02T13:09:43.473
> 
> 标签：gwt, junit, gwttestcase

我有一个 GWT 复合组件，有两个文本框，想为它编写测试用例。他们每个人都有更改处理程序，我想知道如何将更改事件触发到复合组件类中的确切组件。

**已编辑：** 我的测试代码如下所示，

```
 @Test
    public void testValueChangesToOutOfRange(){
        DvCountUI count = new DvCountUI(15, "place holder", true);
        count.specifyNormalRange(10, 30);
        TextBox magnitude =  GwtReflectionUtils.getPrivateFieldValue(count, "magnitude");
        assertTrue(true);

    } 
```

当我使用 GWT Junit Test 运行它时，我得到 ERROR: in console

```
Validating units:
   Ignored 1 unit with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[ERROR] Errors in 'file:/D:/TRANSFER/asclepian/workspace/UIBuilder/src/com/rubirules/uibuilder/client/DvCountUITest.java'
   [ERROR] Line 65: No source code is available for type com.googlecode.gwt.test.utils.GwtReflectionUtils; did you forget to inherit a required module?
[ERROR] Unable to find type 'com.rubirules.uibuilder.client.DvCountUITest'
   [ERROR] Hint: Previous compiler errors may have made this type unavailable
   [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly 
```

并在六月

```
JUnitFatalLaunchException 
```

我的 gwt.xml 文件如下所示：

```
<module rename-to='uibuilder'>
    <inherits name='com.google.gwt.user.User' />
    <inherits name='com.google.gwt.user.theme.clean.Clean' />
    <entry-point class='com.rubirules.uibuilder.client.UIBuilder' />
    <source path='client' />
    <source path='shared' />
</module> 
```

这里有什么问题？我还在项目库中添加了 gwt-test-utils jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:01:02.437

我不确定您对单元测试小部件的方法是否正确。

在这种情况下，理想情况下，您应该设置值（触发内部更改事件）并测试更改处理程序中编写的代码是否被执行。

示例 - [http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/ui/TextBoxBaseTestBase.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/ui/TextBoxBaseTestBase.java)中的 ***TextBoxBaseTestBase.java***
`public void testValueChangeEvent() {}`

如果您坚持触发更改事件，您可以参考 GWT 示例***CreateEventTest.java***

`public void testTriggerChangeEvent() {}`在 [http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/ui/CreateEventTest.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/ui/CreateEventTest.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:17:23.637

我通过以下方式解决了问题：扩展**GwtTest**而不是**GWTTestCases并在****测试**包内的**META-INF**文件夹中 添加一个值为“ **com.rubirules.uibuilder.UIBuilder = gwt-module** ”的 gwt-test-util.property 文件.

# java - 有人如何终止（远程）无头 Java 应用程序？

> ID：14122675
> 
> 赞同：0
> 
> 时间：2013-01-02T13:09:58.877
> 
> 标签：java, headless

我是无头应用程序的新手，正如标题所述，我想知道有哪些方法可以终止无头应用程序？在这个主题上，人们通常如何部署应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:19:05.447

**基本解决原理：**在服务端（headless app，我称之为服务）打开一个ServerSocket，监听某个端口。从外部连接到该 ServerSocket 并发送特定消息。当服务器应用程序收到连接请求时，它可以对其进行操作。

**提示：** 但是，请确保您使用诸如秘密消息之类的东西或诸如签名和 SSL 之类的其他身份验证方法，因为否则知道服务器端口的每个人都可以关闭您的应用程序。

顺便说一句，同样的解决方案原理也可用于将新参数传递给已经运行的应用程序，例如在浏览器中双击某个音频文件将在当前音频播放器中播放新标题，而不是在新实例中播放。（新实例实际上开始了，但将新文件/标题发送到旧实例，旧实例捕获它并切换到那首新歌曲）

**附加：**当您有另一种向应用程序发送数据的方式时，例如在可以 POST/GET 数据的网页中，您还可以解析该输入以获取特定消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:46:14.380

您可以考虑使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)来启动新的操作系统进程

例子：

```
Process p = new ProcessBuilder("myCommand", "myArg").start();
...
p.destroy(); 
```

# function - 如何从 GNU/Octave 中的麦克风输入读取数据？

> ID：14122676
> 
> 赞同：1
> 
> 时间：2013-01-02T13:09:59.063
> 
> 标签：function, matlab, stream, octave, microphone

肯定有可能，但问题是怎么做？[http://gnu.org/software/octave](http://gnu.org/software/octave)上的官方文档对此保持沉默。

是否有任何其他库或函数可用于在 Linux 上使用 GNU/Octave 访问线路输入（麦克风输入）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:14:03.563

您是否尝试过使用 Octave 的[`record`](http://www.gnu.org/software/octave/doc/interpreter/Audio-Processing.html#doc%2drecord)功能？

```
x = record(T, Fs); 
```

其中`T`是记录的持续时间，`Fs`是采样率。

# c++ - C++ 标准库线程安全吗？

> ID：14122684
> 
> 赞同：3
> 
> 时间：2013-01-02T13:10:24.907
> 
> 标签：c++, std

> **可能重复：**
> [我是否需要在多线程环境中保护对 STL 容器的读取访问？](https://stackoverflow.com/questions/187583/do-i-need-to-protect-read-access-to-an-stl-container-in-a-multithreading-environ)

我正在使用 (Linux) GCC 或 (Windows) VC 附带的 C++ 标准库。

谁能清楚地说这个库是否是线程安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:13:56.407

观看 Herb Sutter 的视频：[https ://web.archive.org/web/20170119232617/https://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know -空白和空白](https://web.archive.org/web/20170119232617/https://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:13:59.957

“线程安全”不是库的明确定义的布尔属性。有些事情可以同时完成，有些事情不能。

几乎可以肯定，如果您要问一个更详细的问题，说明您想要做什么，答案将是“不，它不是线程安全的”。但也只是差不多。

`Vector`如果“线程安全”是指 Java和Java之间的区别`ArrayList`，那么 C++ 标准容器是非线程安全的。

# javascript - 在telerik grid mvc3中隐藏列和标题并访问它们

> ID：14122687
> 
> 赞同：0
> 
> 时间：2013-01-02T13:10:45.603
> 
> 标签：javascript, jquery, asp.net-mvc-3, telerik-grid

我需要在 Telerik grid mvc3 中隐藏列的内容及其标题，以便以后可以访问它们。
我知道两个功能：`Hiden()`代码`visible()` 是：

```
foreach (var attr in grid.Attr)
.Columns(columns =>
{
   columns.Bound(attr.key)
     .Width(attr.width)
     .Visible(attr.isVisible);
}) 
```

或者

```
foreach (var attr in grid.Attr)
.Columns(columns =>
{
   columns.Bound(attr.key)
     .Width(attr.width)
     .Hidden(!attr.isVisible);
}) 
```

但是两者都没有帮助我：
在“ `visible()`”上它隐藏了我的内容和标题，但无法访问它们。
在“ `Hidden()`”我可以访问数据，但它只隐藏内容而不是标题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:31:29.747

如果你使用**.Hidden**然后

```
foreach (var attr in grid.Attr)
.Columns(columns =>
{
   columns.Bound(attr.key)
     .Width(attr.width)
     .Hidden(true);
}) 
```

如果你使用**.Visible**那么

```
foreach (var attr in grid.Attr)
.Columns(columns =>
{
   columns.Bound(attr.key)
     .Width(attr.width)
     .Visible(false);
}) 
```

所以现在你可以意识到，需要做什么。

# android - 使用圆角和阴影编辑文本

> ID：14122690
> 
> 赞同：10
> 
> 时间：2013-01-02T13:10:51.397
> 
> 标签：android, android-layout

我正在尝试实现如下图所示的效果：

![在此处输入图像描述](../Images/c9d0503b0d7352a0882ce42b41bbf04c.png)

在此图像中，顶部有一个带有圆角和内部阴影的编辑文本。我尝试了很多但没有成功在edittext中获得阴影。

我搜索了这个主题，但所有示例都在 edittext 边框之外显示阴影。我不知道我怎么能做到这一点。

按钮和背景图像已经完成，唯一剩下的就是edittext shadow。如果有人已经这样做或知道如何做到这一点，请与我分享。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-02T06:52:43.093

变成了这样

[![在此处输入图像描述](../Images/c62777230815c1861ca5b5fa528f97f2.png)](https://i.stack.imgur.com/VlAI8.jpg)

```
<?xml version="1.0" encoding="utf-8"?>
<shape android:shape="rectangle" xmlns:android="http://schemas.android.com/apk/res/android">
        <gradient
            android:centerY="0.2"
            android:startColor="#FFBDBDBD"
            android:centerColor="#65FFFFFF"
            android:endColor="#00FFFFFF"
            android:angle="270"
            />
        <stroke
            android:width="1dp"
            android:color="#C3C3C3" />
        <corners
            android:radius="25dp" />
</shape> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T05:38:47.813

**只需在您的可绘制**文件夹名称中创建一个 xml 文件作为**round_corner.xml** 。并添加以下代码。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <corners
        android:radius="3dp"
       />
    <solid
        android:color="@android:color/white"/>

</shape> 
```

**最后，您在Edittext的****背景**属性中添加此 xml，如下所示：-

 **```
 <EditText
    android:id="@+id/ed1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/round_corner"
  /> 
```

完成了。。肯定有效。。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T13:40:54.903

您可以将可绘制的形状（矩形）设置为视图的背景。

```
<TextView android:text="Some text" android:background="@drawable/back"/> 
```

和矩形drawable back.xml（放入res/drawable文件夹）：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#4fa5d5"/>
</shape> 
```

您可以使用#00000000 使纯色具有透明背景。您还可以使用填充将文本与边框分开。有关更多信息，请参阅：http: [//developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-27T06:47:15.783

1.）在drawable文件夹中创建rounded_edittext.xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" android:padding="15dp">
 <solid android:color="#FFFFFF"/>

    <corners
     android:bottomRightRadius="5dp"
     android:bottomLeftRadius="5dp"
     android:topLeftRadius="5dp"
     android:topRightRadius="5dp"/>

  <stroke android:width="1dip" android:color="#FF0000" />  
</shape> 
```

2.) 将下面的代码放入 values 文件夹中的 styles.xml 文件中

```
<style name="largeEdittextText">
    <item name="android:textAppearance">@android:style/TextAppearance.Large.Inverse</item>
    <item name="android:textSize">15dp</item>
    <item name="android:singleLine">true</item>
    <item name="android:paddingTop">8dp</item>
    <item name="android:paddingBottom">8dp</item>
    <item name="android:paddingLeft">5dp</item>
    <item name="android:background">#FFB90F</item>
    <item name="android:textColor">@android:color/black</item>
</style> 
```

3.）在布局文件中的edittext上应用两者

```
<EditText
android:id="@+id/userName"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:gravity="center_horizontal"
android:hint="@string/login_userHint"
android:text="admin"
android:paddingTop="8dp"
android:paddingBottom="8dp"
android:singleLine="true"
android:textAppearance="@style/largeEdittextText"
android:background="@drawable/rounded_edittext">
</EditText> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-03T04:06:03.920

如果你想让 EditText 的***边框***为圆形和曲线，那么只需将此代码粘贴到 Drawable/mystyle.xml 中（创建此 xml 文件）。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:thickness="0dp"
  android:shape="rectangle">
  <stroke android:width="1dp"
    android:color="#c8c8c8"/>
   <corners android:radius="11dp" />
</shape> 
```

**现在**在您的 EditText 链接中，此文件为

```
 android:background="@+drawable/mystyle" 
```**

# javascript - 尝试调用 AJAX 函数时的 NS_ERROR_XPC_BAD_CONVERT_JS

> ID：14122692
> 
> 赞同：0
> 
> 时间：2013-01-02T13:11:03.893
> 
> 标签：javascript, ajax, nserror

在 Wordpress 中关闭厚框时，我试图首先将通过厚框选择的图像添加到屏幕（工作），然后运行一个小的 AJAX 例程来更新数据库中的选项（导致错误）。

但是，我得到了错误`NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument`，我不知道为什么。

目前，我正在做的只是尝试测试 AJAX 函数是否被选中，所以 PHP 函数所做的所有事情都是`echo 'Working!';`，所以我很确定问题出在 JS 的某个地方，而不是返回的内容的PHP。但是，注释掉 AJAX 调用确实意味着错误不会出现。

有没有人有任何故障排除建议？我现在不知道该去哪里看。谢谢。

```
jQuery(document).ready(function($){

    window.send_to_editor = function(html){

        /** Grab the image URL and image ID */
        var image_url = $('img', html).attr('src'),
            classes = $('img', html).attr('class'),
            id = classes.replace(/(.*?)wp-image-/, '');

        /** Add the imgae ID to a hidden field, so that it can be saved */
        $('#office-image input#image-id').val(id);

        /** Remove the Thickbox */
        tb_remove();

        /** Place the image src in the hidden image, and then show the image */
        $('#office-image img#image-preview').attr('src', image_url);
        $('#office-image img#image-preview').css('display', 'block');
        $('#office-image img#image-preview').css('margin-bottom', '5px');

        /** Check to see if the user is editing an Office, and if they are, update the Image in the database */
        if($('#dd-options-edit-office-page').length) {

            /** Set the params for passing to the AJAX function */
            data = {
                security: $('input#_wpnonce', '#dd-options-edit-office-page'),
                action: 'update-office-image'
            };

            $.post('admin-ajax.php', data, function(response){

                alert(response);

            });

        }

    }

}); 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:18:39.663

看看这个：

```
data = {
                security: $('input#_wpnonce', '#dd-options-edit-office-page'),
                action: 'update-office-image'
            }; 
```

`data.security`包含一个 jQuery 对象，无法发送此对象。

我猜你喜欢发送输入的值：

```
data = {
                security: $('input#_wpnonce', '#dd-options-edit-office-page').val(),
                action: 'update-office-image'
            }; 
```

# c++ - 如何在变量中使用 QSlider

> ID：14122695
> 
> 赞同：1
> 
> 时间：2013-01-02T13:11:19.970
> 
> 标签：c++, qt

> **可能重复：**
> [使用 QSlider 更改变量的值](https://stackoverflow.com/questions/14120165/using-qslider-to-change-the-value-of-a-variable)

我正在尝试使用 QSlider 来更改变量值：这是代码的一部分：

```
 ....
QSlider *slider = new QSlider(Qt::Horizontal,0);
connect(slider,SIGNAL(valueChanged()),this,SLOT(value(int k)));
... 
```

函数值是我想使用的 SLOT 让我们这样说：

```
 void value (int k ) {
cout<< k << endl;
} 
```

我遇到的问题是当我移动滑块时没有任何反应。?

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T13:28:16.127

您必须将参数`int`放在信号签名上，以使其*将值传递给 slot*。此外，切勿将参数名称放在`SIGNAL(...)`/`SLOT(...)`签名规范中。

```
...
QSlider *slider = new QSlider(Qt::Horizontal, this);
connect(slider, SIGNAL(valueChanged(int)), this, SLOT(value(int)));
... 
```

另外，请确保这`value`是您班级的一个插槽，而不是一个独立的功能。我猜您已经将上面的代码放在类函数中，而不是放在 main 或任何其他独立函数中，因为在这些函数中没有`this`定义。所以你所说的槽必须是一个成员函数，尤其是你正在编写此代码的类的 QObject 槽。更改

```
void value (int k) {
    cout << k << endl;
} 
```

到

```
void MyClass::value (int k) {
    cout << k << endl;
} 
```

并在您的类定义中`MyClass`添加一个`public slots:`部分：

```
class MyClass : public ... {
    Q_OBJECT
    ...
public slots:
    void value(int);
    ...
} 
```

另外，给你的插槽一个有意义的名字，例如`sliderChanged`，否则，混乱迟早会统治你的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:27:45.677

来自 qt 文档：

[http://doc.qt.digia.com/qt/qabstractslider.html#valueChanged](http://doc.qt.digia.com/qt/qabstractslider.html#valueChanged)

```
void QAbstractSlider::valueChanged ( int value ) [signal] 
```

我猜在运行时它找不到 valueChanged() 信号，所以可能会改变：

```
...
connect(slider, SIGNAL(valueChanged(int)), this, SLOT(value(int)));
... 
```

希望有帮助。

# php - ftp_login() 错误

> ID：14122696
> 
> 赞同：0
> 
> 时间：2013-01-02T13:11:25.853
> 
> 标签：php, ftp, centos, centos5

我有一个很大的错误。这是我的 ftp_connect() PHP 代码。此代码适用于我的本地主机，但不适用于我的主机（Centos 5.8）

```
$ftp_username="username";
$ftp_password="pass";
$ftp_host="212.***.***.149";
$ftp_id=ftp_connect($ftp_host);
$ftp_connect=ftp_login($ftp_id,$ftp_username,$ftp_password);

if((!$ftp_id) || (!$ftp_connect))
{
   die("FTP connect error");
}
else
{
   echo "ok";
} 
```

警告：ftp_login() [function.ftp-login]：未登录，未经授权的 IP 地址。在第 230 行的 /home/sektorel/public_html/xml1.php

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:13:59.297

根据错误，您的 FTP 服务器只允许从预先授权的 IP 地址范围登录。你的服务器地址不在那儿。找出服务器的公开 IP，并将其添加到 FTP 授权列表中。

# mysql - 将几个 MySQL 查询的输出放在一起

> ID：14122698
> 
> 赞同：1
> 
> 时间：2013-01-02T13:11:43.457
> 
> 标签：mysql, bash

我正在编写一个脚本，该脚本从不同的 mysql 表中获取一些数据：

```
#!/bin/bash
/usr/bin/mysql --password=****** --database=mydb<<EOMYSQL
select field1, field2 from table1 left join table2 on etc
into outfile '/home/jm/mysql/file1.txt';
select field3 from table3 left join table4 on etc
into outfile '/home/jm/mysql/file2.txt';
select field4,field5,field6,field7 from table5 left join table6 on etc
into outfile '/home/jm/mysql/file3.txt';
EOMYSQL 
```

我的“问题”是我需要使用 3 个不同的输出文件，然后将它们合并。有什么方法可以将 3 个查询的输出放在一起？，例如：

```
field1 field2 field3 field4 field5 field6 field7 
```

谢谢，

PS：尝试“联合所有”，但看起来每个查询需要相同数量的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:23:57.783

是的，`UNION`每个查询都需要相同数量的字段，但您可以使用空字符串填充它们：

```
select field1, field2, "", "", "", "", "" from table1 left join table2 on etc
union
select "", "", field3, "", "", "", "" from table3 left join table4 on etc
union
select "", "", "", field4, field5, field6, field7 from table5 left join table6 on etc 
```

您还可以使用`NULL`：

```
select field1, field2, NULL, NULL, NULL, NULL, NULL from table1 left join table2 on etc
union
select NULL, NULL, field3, NULL, NULL, NULL, NULL from table3 left join table4 on etc
union
select NULL, NULL, NULL, field4, field5, field6, field7 from table5 left join table6 on etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:15:38.157

如果您想按列加入这些文件，您应该使用该`paste`实用程序：

```
cd /home/jm/mysql/
paste file1.txt file2.txt file3.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:18:21.037

看起来你需要这个`paste`命令。

```
% cat A.csv 
dog,cat
bird,tiger

% cat B.csv 
bear,lion
weasel,trout

% paste -d, A.csv B.csv 
dog,cat,bear,lion
bird,tiger,weasel,trout 
```

该`-d`标志更改分隔符（默认为 TAB）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:23:10.653

在没有看到任何示例数据甚至您的表结构的情况下，如果您想在 SQL 中执行此操作，那么您*可以*使用以下内容。

如果您有一个可以在每个查询结果之间连接的字段，那么您可以使用 a`LEFT JOIN`返回数据：

```
select *
from
(
  select t1.field1, t1.field2
  from table1 t1
  left join table2 t2
    on t1.field1 = t2.field1
) t1t2
left join
(
  select t3.field3
  from table3 t3
  left join table4 t4
    on t3.field3 = t4.field3
) t3t4
  on t1t2.field1 = t3t4.field3
left join
(
  select t5.field4, t5.field5, t5.field6, t5.field7
  from table5 t5
  left join table6 t6
    on t5.field4 = t6.field4
) t5t6
  on t1t2.field1 = t5t6.field4; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c21cd/5)

如果您没有可以加入的字段，那么您可以使用`CROSS JOIN`：

```
select *
from
(
  select t1.field1, t1.field2
  from table1 t1
  left join table2 t2
    on t1.field1 = t2.field1
) t1t2
cross join
(
  select t3.field3
  from table3 t3
  left join table4 t4
    on t3.field3 = t4.field3
) t3t4
cross join
(
  select t5.field4, t5.field5, t5.field6, t5.field7
  from table5 t5
  left join table6 t6
    on t5.field4 = t6.field4
) t5t6; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c21cd/6)

# php - 如何在 PHP 或 SQL 中获取 blob 的大小

> ID：14122700
> 
> 赞同：2
> 
> 时间：2013-01-02T13:11:45.137
> 
> 标签：php, mysql, blob

我的数据库中有很多 blob 数据，我需要检索每个数据的权重（400kb、14,2kb 等）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:18:44.220

在 SQL 中：

```
SELECT some_key, LENGTH(blob_column) AS size_in_bytes FROM the_table 
```

在 PHP 中：

```
$sizes = array();
foreach (how_you_query_the_db('SELECT some_key, blob_column FROM the_table ') as $row)
  $sizes[$row['some_key']] = strlen($row['blob_column']); 
```

# c - 将代码编译到 Visual Studio 中的多个目录？

> ID：14122701
> 
> 赞同：0
> 
> 时间：2013-01-02T13:11:58.503
> 
> 标签：c, templates, visual-studio-2012

我正在尝试为驱动程序制作一个简单的模板，以便我可以快速编写驱动程序，但是，我想知道是否可以在不同的目录中编译代码。例如，我想为不同目录中的所有操作系统（WinXP、Win Vista、Win7 等）进行编译？

# javascript - 搜索 Youtube 并返回 XML

> ID：14122704
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:12:06.603
> 
> 标签：javascript, api, youtube-api, youtube-javascript-api

有没有一个网址可以让我在 YouTube 上搜索“变形金刚电影”，并返回带有视频列表的 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:15:38.047

是的，有：[https](https://gdata.youtube.com/feeds/api/videos?q=Transformers+movie) ://gdata.youtube.com/feeds/api/videos?q=Transformers+movie 。确切地说，它是一个原子提要（但那是 XML）。有关 API 的更多信息，请访问：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#Searching_for_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#Searching_for_Videos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:18:39.980

是的，看看这个：

[https://gdata.youtube.com/feeds/api/videos?q=Linkin+Park&prettyprint=true](https://gdata.youtube.com/feeds/api/videos?q=Linkin+Park&prettyprint=true)

PS 你必须有`prettyprint=true`获得 XML 响应。

API 详细信息（许多其他有用的选项可用）：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#Searching_for_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#Searching_for_Videos)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:22:38.060

当然有:-)

[http://gdata.youtube.com/feeds/api/videos?q=Transformers+movie&max-results=50&orderby=relevance&format=5&prettyprint=true&v=2](http://gdata.youtube.com/feeds/api/videos?q=Transformers+movie&max-results=50&orderby=relevance&format=5&prettyprint=true&v=2)

这里有更多信息

[https://developers.google.com/youtube/2.0/developers_guide_protocol](https://developers.google.com/youtube/2.0/developers_guide_protocol)

# android - 在 Google 地图片段中膨胀 XML 时出错

> ID：14122705
> 
> 赞同：5
> 
> 时间：2013-01-02T13:12:10.643
> 
> 标签：android, xml, google-maps, android-inflate, inflate-exception

尝试使用片段显示谷歌地图。使用以下[页面](https://developers.google.com/maps/documentation/android/start)作为教程。

我收到异常“错误膨胀类片段”。

1）导入jar google-play-services.jar

2) 下载并配置google play services SDK。

3) 获得最新的 v2 API Key。

4) 在清单中添加权限 com.google.android.providers.gsf.permission.READ_GSERVICES。

5) 使用 mindsdk = 8 和 target = 16。

作为参考，`Androidmanifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.com.mapsdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>

<permission
android:name="com.example.com.mapsdemo.permission.MAPS_RECEIVE"
android:protectionLevel="signature"/>
<uses-permission android:name="com.example.com.mapsdemo.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.com.mapsdemo.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyDXPsxWF634gd907NzZKkRkNS0oH9IPWgk"/>

</application> 
```

`MainActivity.java`

```
package com.example.com.mapsdemo;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

import com.google.android.gms.common.GooglePlayServicesUtil;

//API : AIzaSyDXPsxWF634gd907NzZKkRkNS0oH9IPWgk

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
    setContentView(R.layout.activity_main);
    } catch (Exception e) {

    Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

`activity_main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

日志猫：

```
01-02 18:31:21.477: I/jdwp(11473): Ignoring second debugger -- accepting and dropping
01-02 18:31:24.493: D/libEGL(11871): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
01-02 18:31:24.493: D/libEGL(11871): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
01-02 18:31:24.509: D/libEGL(11871): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
01-02 18:31:24.602: D/OpenGLRenderer(11871): Enabling debug mode 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T23:00:32.760

`Error inflating class fragment`通常在您尝试使用原生 API 级别 11 版本的片段（您的源代码正在这样做）但尝试在旧版本的 Android 上运行它时出现。为了`<fragment>`在 API 级别 10 及以下使用，您必须使用 Android 支持包的片段反向移植：

*   将 Android 支持包添加到您的项目中
*   继承自`FragmentActivity`而不是`Activity`
*   使用`SupportMapFragment`而不是`MapFragment`
*   根据此反向移植更改现在不同的任何其他内容

或者，您可以将您的设置`android:minSdkVersion`为 11 或更高，并仅在较新的设备上运行您当前的代码。

[您可以在文档](http://developer.android.com/training/basics/fragments/support-lib.html)中阅读有关 Android 支持包的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:27:54.650

我遇到了同样的错误。检查您是否在真实设备上运行它。并按以下方式附加 Google Play 服务库。project_properties->android-> Library 然后在那里添加 google play lib..

再次使 libs 文件夹复制 android support v4.jar 和 google_play_services.jar 然后右键单击每个文件并选择 build to path..

还要检查您的 api 密钥是否适用于 com.example.com.mapsdemo 包..对于每个包都将生成新的 api 密钥..

并在 XML 文件中的 MapFragment 上使用 SupportMapFragment。

这解决了我的问题。

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T03:14:52.127

关于这个问题有很多问题，两天后，我的解决方案很简单：你必须使用 Project Build Target Google API 编译你的项目。我对此感到非常愚蠢。

# java - 秘密Android构建过程

> ID：14122708
> 
> 赞同：8
> 
> 时间：2013-01-02T13:12:20.507
> 
> 标签：java, android, android-source, launcher, viewgroup

Android（开源项目）本机启动器源代码似乎在其一些已发布的资源文件中缺少以下必需的 XML 布局参数：[layout_height](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#attr_android:layout_height)和[layout_width](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#attr_android:layout_width)

### 缺少属性

*   [Apps_customize_pane.xml 中的 AppsCustomizeTabHost](https://android.googlesource.com/platform/packages/apps/Launcher2/+/android-4.2.1_r1/res/layout/apps_customize_pane.xml)
*   [workspace.xml 中的工作区](https://android.googlesource.com/platform/packages/apps/Launcher2/+/android-4.2.1_r1/res/layout-sw720dp/workspace.xml)
*   还有 13 个，包括特定于屏幕尺寸的布局资源中的重复项

### 编译时异常

这会破坏启动器编译，至少是独立编译，引发错误，例如：

*   'layout-width' 属性应该被定义
*   'layout-height' 属性应该被定义

注意：[为了编译 Android launcher2 还有许多其他问题需要解决](https://stackoverflow.com/questions/8666521/easy-way-to-build-android-system-app-eclipse-for-exemple/8668334#8668334)，这个问题是关于这些特定的缺失属性以及它们是如何缺失的？

### Google 如何编译其启动器以及 LayoutParams 值是什么？

*那么，当这些必需的属性缺失时，Google 是如何编译代码的呢？*

此外，应该使用哪些值，它们应该是：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

或**wrap_content**或特定的像素值 - 换句话说，我在哪里可以获得这种信息/什么是秘密构建过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:32:01.357

我们不使用 Eclipse+ADT 编译 Android，而是使用 make。编译器不会在构建时检查 layout_width 和 layout_height。当这些属性丢失时，会生成运行时错误。但是 Launcher2 的构建是为了不需要这些属性（例如使用代码生成布局参数。）这没有什么秘密 :)

# html - 如何分别引用几个具有相同名称的自动生成的文本区域

> ID：14122714
> 
> 赞同：0
> 
> 时间：2013-01-02T13:13:11.497
> 
> 标签：html, jsp, model-view-controller, jstl, el

在下面的代码中，textarea 是根据criteriaList 返回的项目数生成的。假设它返回 5 个项目，因此生成 5 个文本区域。但它们都将具有与“评论”相同的名称。我的问题是我想分别引用它们每个的值，以便我可以操作和存储在数据库中。我如何推荐他们？

```
<c:forEach var="criteria" items="${criteriaList}">
<tr>
<td><textarea name="comment" class="txt" rows="6" cols="25" ></textarea></td>
</tr>
</c:forEach> 
```

对于阅读部分，我使用以下内容：-

```
@RequestMapping(value="findEmployees.htm", params="searchType=startReview")
public ModelAndView onSubmitSearchByName(
@RequestParam("assComment") String comment){
List<Criteria> criteriaList = criteriaService.getReviewCriteria(phase);

ModelAndView mav = new ModelAndView();
boolean check = reviewService.addReview(release, ir, stream, application, phase, sub, reviewer, complexity);
mav.addObject("criteriaList", criteriaList);
mav.setViewName("find/sqaStartDetails");
return mav;
} 
```

如何在此实现 id 概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:19:30.880

只是一个想法：

为每个添加一个`Id`属性`textarea`：

```
<textarea name="comment" class="txt" rows="6" cols="25" id="SOMEVALUEHERE" > 
```

然后您可以`Id`稍后使用该属性将每个属性`textarea`与给定的评论相关联......

`Id`您可以从`criteria`var 或简单的计数器中获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:44:36.837

你必须使用一个像

```
<c:forEach var="criteria" items="${criteriaList}">
<tr>
<td><textarea name="comment<%=criteria.id%>" class="txt" rows="6" cols="25" ></textarea></td>
</tr>
</c:forEach> 
```

用于阅读

```
request.getParamerter("comment"+id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:00:07.920

我为此找到了一个很好的解决方案。查看[AutoPopulatingList](http://blog.richardadamdean.com/?p=12)。

# c - BCD算术运算

> ID：14122715
> 
> 赞同：1
> 
> 时间：2013-01-02T13:13:12.927
> 
> 标签：c, math, bcd

我编写了一个将双精度数转换为 BCD 的函数（BCD：将双精度数的每个数字保存为无符号字符，此外还保存完整长度、小数长度（浮点后面的部分）和双精度数的符号）。我使用以下结构

```
struct bcd_number 
{ 
unsigned int length; 
unsigned int fractional; 
signed char sign; 
unsigned char *digits; 
}; 
```

这就是 BCD 函数的双倍：

```
 struct bcd_number* double2bcd(double x) 
{ 
    char tmp[512]; 
    struct bcd_number* bcd = malloc (sizeof(struct bcd_number)); 

    int a = x;  
    double before = a;
    double fractional;
    fractional = x-(long)x;

    bcd->digits = malloc (512);

    char* z = (char*) bcd->digits; 

    sprintf (tmp,"%g",fabs(before));

    bcd->length = strlen(tmp); 
    bcd->sign = (before < 0) ? '-' : '+';

    for (size_t i=0; i<bcd->length; ++i)
     { *z++ = tmp[i] - '0'; } 

    sprintf (tmp,"%g",fabs(fractional)); 

    for (size_t i = strlen(tmp)-1; i!=0; --i) 
    if (tmp[i] != '0') 
    { tmp[i+1] = 0; break; } 

    bcd->fractional = strlen(tmp+2);
    bcd->length += bcd->fractional; 

    for (char* t = tmp + 2; *t; *z++ = *t++ - '0'); 
        bcd->digits = realloc (bcd->digits, bcd->length); 

    return bcd; 
} 
```

这很完美。

而且我还添加了执行加法/减法的能力（完整的源代码： http: [//pastebin.com/HR70VukM](http://pastebin.com/HR70VukM)）但现在我想执行乘法和除法。但问题是只有字符作为数字（我不想改变它）。我现在必须像“纸上的乘法”（没有计算器的经典方法），但我认为它必须像模运算符的加法。另一方面，我不知道如何用带模的字符来实现它。有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:06:41.400

你想知道的关于 BCD 的一切都可以在[通用十进制算术](http://speleotrove.com/decimal/)网站上找到。

对于乘法，您将需要一个将两位数相乘以产生两位数结果的原始例程。将此中间结果添加到答案中的适当位置。除了有一个“乘法表”之外，找到这个“合适的位置”是“你会用手做同样的事情”方法的关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:09:29.043

乘法和除法之后是什么？阶乘？模数？指数？自然对数？正弦？余弦？将 BCD 变回双精度数，进行任何数学运算，将结果转换为 BCD

# c# - 发生 System.BadImageFormat 异常？

> ID：14122717
> 
> 赞同：1
> 
> 时间：2013-01-02T13:13:28.953
> 
> 标签：c#

我正在`System.BadImageFormatException`运行自动化。程序集生成成功。但是只有在验证装配时才会出现问题。

为了解决这个问题，我检查`corflags.exe`了安装位置中是否存在。

```
 System.BadImageFormatException was unhandled
  HResult=-2147024885
  Message=Could not load file or assembly 'file:///C:\Work\Demo.GeckoHtmlRenderer.Base.dll' or one of its dependencies. An attempt was made to load a program with an incorrect format.
  Source=mscorlib
  FileName=file:///C:\Work\Demo.GeckoHtmlRenderer.Base.dll
  FusionLog=WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

  StackTrace:
       at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
       at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
       at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
       at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark)
       at System.Reflection.Assembly.LoadFrom(String assemblyFile)
       at InstallVerifier.InstallChecker.AuthenticodeVerifier(String dll, String authenticode, String sign)
       at InstallVerifier.Program.Main(String[] args)
  InnerException: 
```

# css - 使用css在包装器div的中心流畅地显示水平列表

> ID：14122728
> 
> 赞同：0
> 
> 时间：2013-01-02T13:14:03.383
> 
> 标签：css, fluid-layout

我有以下html结构：

```
<div id = "carousel">
  <div id="wrapper">
    <div id="slides">
      <div class="upper">
        <ul>
          <li></li>
           .
           a number of li's
           .
        </ul>
       </div>
    </div>
 </div> 
```

和下面的CSS

```
#carousel{}
#wrapper{
    background:url("transparent.png");
}
#slides{
    margin:auto;
    width:94%;
}
.upper{
    position:relative;
}
#wrapper #slides ul{
    font-size: 0.75em;
    height: 16.2em;
    left: -2.5%;
    list-style: none outside none;
    margin-bottom: 2.99%;
    margin-top: 3%;
    overflow: hidden;
    padding: 0;
    position: relative;
    width: 127.9%;
}
#wrapper #slides li {
    float: left;
    margin-bottom: 10%;
    width: 13.4%;
} 
```

.upper div 是通过 jquery 访问的，它的宽度和位置已修改。（+1 里宽，-1 里左）

问题是：虽然所有东西水平居中都很好，但它不能垂直居中，如果我不限制 em 中 ul 的大小，它会膨胀到所有 li 元素的大小

那么我怎样才能使 ul 的高度为 1 li，宽度为 5？我如何在包装器 div 中垂直居中 ul？以及我如何只使用 % 值来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:22:58.980

对于垂直居中：您可以将父 div 的高度设置为所需的大小，然后使用 vertical-align: middle。

至于 ul 的高度，可以设置 li 的高度，设置 ul 的高度相同。

# java - 从数组列表中安全地删除数据

> ID：14122730
> 
> 赞同：1
> 
> 时间：2013-01-02T13:14:09.963
> 
> 标签：java, arraylist, tiles-game

我有一个数组列表，其中包含瓷砖。当我放下新瓷砖时，新瓷砖会放在旧瓷砖上，但旧瓷砖仍然在那里，可能会导致问题。例如，有一块玩家无法穿过的石块。在那里放置了一块空气砖，据说可以让玩家穿过。但是，石块永远不会被删除，因此玩家无法通过，因为石块是实心的并会导致碰撞。我可以从数组列表中删除磁贴吗？我不认为我可以，因为列表中的其余数据将“移动”并填补旧瓷砖曾经所在的洞。我怎样才能删除磁贴并在其上放置一个新磁贴而不导致其余数据移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:18:58.060

您应该使用[`set(int index, E element)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int%29)ArrayList 的方法。

会计。到 Javadocs：

> 将此列表中指定位置的元素替换为指定元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:15:40.677

如果您想从 an 中删除一个项目`ArrayList`并且仍然希望列表的其余部分保持原位，只需将其替换为`null`，这是授权的：

```
myList.set(i, null); 
```

当然，这意味着您必须在使用它时测试该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:18:12.747

您可以使用 ArrayList 的 set() 方法将列表中的一个对象“替换”为另一个对象。

```
 tileList.set(index, newTileObject); 
```

将用新的平铺对象替换索引处的平铺。将所有其他图块留在列表中的原始位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:19:37.967

使用`Tile`带有枚举的对象来存储其状态：

```
public class Tile {

  public enum State = { WALL, OPEN };

  private State state;

  public void setState(State state) {
    this.state = state;
  }
} 
```

当你需要在开放空间和墙壁之间交换时，你只需改变它的状态：

```
tile.setState(State.WALL); 
```

# cmd - 通过 cmd 命令解压缩文件 (7-zip)

> ID：14122732
> 
> 赞同：79
> 
> 时间：2013-01-02T13:14:15.883
> 
> 标签：cmd, 7zip, winzip

我尝试通过 CMD 解压缩文件。

所以我安装了 WinZip（及其 cmd 插件）、WinRAR 和 7-zip。

但是当我尝试通过 CMD[执行命令时：](http://www.dotnetperls.com/7-zip-examples)

```
7z e myzip.zip 
```

它给出了下一个错误：

```
7z is not recognized as an internal or external command 
```

另外我把7-z的文件夹加到环境变量中（属性-->高级-->环境变量-->用户变量-->选择路径，添加`C:\Program Files\7-Zip`

可能是什么原因？

`I find the below solution for this.`

在 cmd 或 git bash 中压缩时 - 出现类似错误

```
 7z:command not found 
```

解决方案：

*   在你的机器上安装 7z
*   在环境变量-> 用户变量中设置路径
    *   路径 -> 编辑 -> 新建（添加路径 - C:\ProgramFiles\7-Zip） -> 确定

现在在 git bash 中使用 7z -

*   转到 C:\Program Files\7-Zip 并复制 7z.exe 文件
*   转到 C:\Program Files\Git\usr\bin 并粘贴 7z.exe 文件

现在，您将能够在 Git Bash 中使用 7z

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-01-02T13:19:12.773

在命令提示符下执行以下操作对我有用，同时添加到我的用户环境变量也可以正常工作：

```
set PATH=%PATH%;C:\Program Files\7-Zip\
echo %PATH%
7z 
```

您应该看到输出（或类似的东西 - 因为这是在我运行 Windows 7 的笔记本电脑上）：

```
C:\Users\Phillip>set PATH=%PATH%;C:\Program Files\7-Zip\

C:\Users\Phillip>echo %PATH%
C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Wi
ndows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\
WirelessCommon\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\To
ols\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Fil
es (x86)\QuickTime\QTSystem\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Notepad+
+;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files\7-Zip\

C:\Users\Phillip>7z

7-Zip [64] 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18

Usage: 7z <command> [<switches>...] <archive_name> [<file_names>...]
       [<@listfiles...>]

<Commands>
  a: Add files to archive
  b: Benchmark
  d: Delete files from archive
  e: Extract files from archive (without using directory names)
  l: List contents of archive
  t: Test integrity of archive
  u: Update files to archive
  x: eXtract files with full paths
<Switches>
  -ai[r[-|0]]{@listfile|!wildcard}: Include archives
  -ax[r[-|0]]{@listfile|!wildcard}: eXclude archives
  -bd: Disable percentage indicator
  -i[r[-|0]]{@listfile|!wildcard}: Include filenames
  -m{Parameters}: set compression Method
  -o{Directory}: set Output directory
  -p{Password}: set Password
  -r[-|0]: Recurse subdirectories
  -scs{UTF-8 | WIN | DOS}: set charset for list files
  -sfx[{name}]: Create SFX archive
  -si[{name}]: read data from stdin
  -slt: show technical information for l (List) command
  -so: write data to stdout
  -ssc[-]: set sensitive case mode
  -ssw: compress shared files
  -t{Type}: Set type of archive
  -u[-][p#][q#][r#][x#][y#][z#][!newArchiveName]: Update options
  -v{Size}[b|k|m|g]: Create volumes
  -w[{path}]: assign Work directory. Empty path means a temporary directory
  -x[r[-|0]]]{@listfile|!wildcard}: eXclude filenames
  -y: assume Yes on all queries 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-13T22:23:04.247

关于菲尔街的帖子：

如果您运行的是 64 位操作系统，它实际上可能安装在您的 32 位程序文件夹中，而不是默认的 x64 文件夹中。检查`7-zip`安装位置，如果在，请`Program Files (x86)`尝试使用它：

```
PATH=%PATH%;C:\Program Files (x86)\7-Zip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:18:08.953

确保您的路径指向 C:\Program Files\7-Zip 中的 .exe 文件（可能在 bin 目录中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-13T19:33:09.447

在 Windows 10 中，我必须以管理员身份运行批处理文件。

# hash - 哈希对数据更改的敏感性

> ID：14122735
> 
> 赞同：2
> 
> 时间：2013-01-02T13:14:43.983
> 
> 标签：hash, language-agnostic

我见过许多哈希算法有一个共同的特点，就是数据的任何变化都会产生哈希码的总变化，虽然是这样，但我想知道是否有任何已知的标准哈希算法具有不同的行为，对于数据的微小变化，哈希变化很小，哈希变化量与数据变化量之间的一种近似线性关系。

这样做的一个想法是创建一个连接从部分数据计算的各种散列的散列，它会使用小的部分散列，或者更大的最终散列，无论如何，我想知道是否有任何算法具有这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:08:16.497

我认为您正在寻找类似 Simhash 的东西。它实际上是为了寻找“接近重复”。

例如[http://irl.cs.tamu.edu/people/sadhan/papers/cikm2011.pdf](http://irl.cs.tamu.edu/people/sadhan/papers/cikm2011.pdf)

# r - 计算数据框中列组的平均值

> ID：14122746
> 
> 赞同：1
> 
> 时间：2013-01-02T13:15:13.220
> 
> 标签：r, dataframe

我有一个包含 50 多列的数据框，我需要向其中添加几列，每一列都将包含一些原始列的平均值。

列组具有不同的长度，列名不包含任何标识它们所属组的元素。

对于如何有效地做到这一点的任何建议，我将不胜感激。

请在此简化示例中进行演示：数据框 tb 中的列组将是 (a,b)(c,d,e)(f,g)，定义为：

```
tb<-data.frame(a=runif(10)*100,b=runif(10)*100,c=runif(10)*100,  
               d=runif(10)*100,e=runif(10)*100,f=runif(10)*100,g=runif(10)*100)  
tb

    a        b         c        d        e         f         g
1  26.550866 20.59746 93.470523 48.20801 82.09463 47.761962 91.287592
2  37.212390 17.65568 21.214252 59.95658 64.70602 86.120948 29.360337
3  57.285336 68.70228 65.167377 49.35413 78.29328 43.809711 45.906573
4  90.820779 38.41037 12.555510 18.62176 55.30363 24.479728 33.239467
5  20.168193 76.98414 26.722067 82.73733 52.97196  7.067905 65.087047
6  89.838968 49.76992 38.611409 66.84667 78.93562  9.946616 25.801678
7  94.467527 71.76185  1.339033 79.42399  2.33312 31.627171 47.854525
8  66.079779 99.19061 38.238796 10.79436 47.72301 51.863426 76.631067
9  62.911404 38.00352 86.969085 72.37109 73.23137 66.200508  8.424691
10  6.178627 77.74452 34.034900 41.12744 69.27316 40.683019 87.532133 
```

操作的结果可能如下所示：

```
 a       b       c       d       e       f       g      mean_ab mean_cde mean_fg
1   26.551  20.597  93.471  48.208  82.095  47.762  91.288  23.574  74.591  69.525
2   37.212  17.656  21.214  59.957  64.706  86.121  29.360  27.434  48.626  57.741
3   57.285  68.702  65.167  49.354  78.293  43.810  45.907  62.994  64.272  44.858
4   90.821  38.410  12.556  18.622  55.304  24.480  33.239  64.616  28.827  28.860
5   20.168  76.984  26.722  82.737  52.972  7.068   65.087  48.576  54.144  36.077
6   89.839  49.770  38.611  66.847  78.936  9.947   25.802  69.804  61.465  17.874
7   94.468  71.762  1.339   79.424  2.333   31.627  47.855  83.115  27.699  39.741
8   66.080  99.191  38.239  10.794  47.723  51.863  76.631  82.635  32.252  64.247
9   62.911  38.004  86.969  72.371  73.231  66.201  8.425   50.457  77.524  37.313
10  6.179   77.745  34.035  41.127  69.273  40.683  87.532  41.962  48.145  64.108 
```

提前感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:29:13.533

也许是这样的？它可能会更加模块化，并且可以在将来为您节省一些打字时间。

```
groups <- list(c("a", "b"), c("c", "d", "e"), c("f", "g"))                                                                                            

tmp <- sapply(groups, function(set) {                                                                                                                 
  res <- rowMeans(tb[,set])                                                                                                                           
  return(res)                                                                                                                                         
})                                                                                                                                                    

res <- data.frame(tb, tmp)                                                                                                                            
colnames(res) <- c(colnames(tb),                                                                                                                      
                   sapply(groups,                                                                                                                     
                          function(x) paste("mean", paste(x, collapse=""), sep="_"))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:03:05.557

这听起来就像在现实生活中你只是要独立选择每组列。可能对您来说最简单的事情就是选择您的列，例如“a”和“b”，然后...

```
tb$mean_ab <- rowMeans(tb[,c('a','b')]) 
```

现在，假设您有一个列的名称或索引（无关紧要）列表。然后你可以做这样的事情。

```
cols <- list(c("a", "b"), c("c", "d", "e"))
meanCols <- lapply( cols, function(x) rowMeans(tb[,x]) )
meanCols <- data.frame( meanCols ) 
```

这就是生成列所需的全部内容。要进一步使用您的列名列表来命名值并将它们添加回`tb`以下将起作用。

```
meanIDs <- do.call( paste0, cols )
names(meanCols) <- paste0( 'mean_', meanIDs )
tb <- cbind( tb, meanCols ) 
```

但是，如果它只有几列，那么使用新列 IDS 多次编写第一个命令可能同样容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:15:21.623

另一种方法，`split.default`用于对列进行分组。

```
grouping <- c('mean_ab', 'mean_ab', 'mean_cde', 'mean_cde', 'mean_cde', 'mean_fg', 'mean_fg')
data.frame(tb, lapply(split.default(tb, grouping), rowMeans)) 
```

# theory - 正则表达式 0(0+1)*0+1(0+1)*1 的 DFA 是多少？

> ID：14122755
> 
> 赞同：2
> 
> 时间：2013-01-02T13:15:26.473
> 
> 标签：theory, regular-language, automata, dfa, computation-theory

这是我画的DFA-

![我的 DFA](../Images/2d9dd0d2c3b630f015e690e930d6c13f.png)

这是正确的吗？
我很困惑，因为`q4`状态`2`对于违反规则的相同输入符号有不同的转换`DFA`，但我想不出任何其他解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:18:30.563

您的 DFA 不正确。
[你的 DFA 完全错误，所以我不评论]

RE 的 DFA：

```
0(1 + 0)*0 + 1(1 + 0)*1 
```

**语言描述**：如果字符串以`0`它开头应该以它结尾，`0`或者如果字符串以`1`它开头应该以它结尾`1`。因此有两个最终状态（state-5，state-4）。

state-4 ：接受 `1(1 + 0)*1`
state-5 ：接受 `0(1 + 0)*0`
state-1 ：开始状态。

**DFA**：

![DFA](../Images/26d51810b5490ba82c17847f852ffc2d.png)

**编辑**：

## + 正则表达式中的运算符

`(0 + 1)* = (1 + 0)*`即任何由`1`s 和`0`s 组成的字符串，包括 Null 字符串`^`。

`+`如果它出现在两个 RE: 和`A U B = B U A` （类似地）=>之间，这里表示联合`(0 + 1) = (0 + 1)`。

[加号的含义`+`取决于它出现的语法：如果表达式是一个^+（`+`上标）这意味着多个`a`s中的一个，如果`a+b`那么`+`意味着联合操作或者`a`或`b`。]

`a^+ : { a, aa, aaa, aaa.....}`那是语言中任意数量的`a`字符串`length > 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T06:04:43.793

我认为你应该先从 0 开始

```
0(1 + 0)*0 + 1(1 + 0)*1 
```

[![在此处输入图像描述](../Images/a31bd3ae256e34ff457bf66ad1f56aaf.png)](https://i.stack.imgur.com/RGf37.jpg)

# spring - 使用用户名或电子邮件的 Spring Security

> ID：14122756
> 
> 赞同：10
> 
> 时间：2013-01-02T13:15:29.810
> 
> 标签：spring, authentication, spring-mvc, spring-security

我在我的 Spring`MVC`应用程序中使用 Spring Security。

`JdbcUserDetailsManager`使用以下身份验证查询进行初始化：

```
select username, password, enabled from user where username = ? 
```

当局正在这里加载：

```
select u.username, a.authority from user u join authority a on u.userId = a.userId where username = ? 
```

我想让它让用户可以使用用户名和电子邮件登录。有没有办法修改这两个查询来实现？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:12:48.287

不幸的是，仅仅通过更改查询没有简单的方法来做到这一点。问题是 spring security 期望 users-by-username-query 和 authority-by-username-query 有一个参数（用户名），所以如果您的查询包含两个参数，例如

```
username = ? or email = ? 
```

查询将失败。

您可以做的是实现您自己的**UserDetailsS​​ervice**，它将执行查询（或查询）以通过用户名或电子邮件搜索用户，然后将此实现用作您的 spring 安全配置中的身份验证提供程序，例如

```
 <authentication-manager>
    <authentication-provider user-service-ref='myUserDetailsService'/>
  </authentication-manager>

  <beans:bean id="myUserDetailsService" class="xxx.yyy.UserDetailsServiceImpl">
  </beans:bean> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-07T08:46:09.837

我遇到了同样的问题，在尝试了很多不同的查询和程序之后......我发现这很有效：

```
public void configAuthentication(AuthenticationManagerBuilder auth)
        throws Exception {
    // Codificación del hash
    PasswordEncoder pe = new BCryptPasswordEncoder();

    String userByMailQuery = "SELECT mail, password, enabled FROM user_ WHERE mail = ?;";
    String userByUsernameQuery = "SELECT mail, password, enabled FROM user_ WHERE username=?";
    String roleByMailQuery = "SELECT mail, authority FROM role WHERE mail =?;";

    auth.jdbcAuthentication().dataSource(dataSource).passwordEncoder(pe)
            .usersByUsernameQuery(userByMailQuery)
            .authoritiesByUsernameQuery(roleByMailQuery);

    auth.jdbcAuthentication().dataSource(dataSource).passwordEncoder(pe)
            .usersByUsernameQuery(userByUsernameQuery)
            .authoritiesByUsernameQuery(roleByMailQuery);

} 
```

它只是用两个查询重复配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T15:24:09.320

如果我理解正确，那么问题是您想在两个不同的数据库列中查找用户输入的用户名。

当然，您可以通过自定义 UserDetailsS​​ervice 来做到这一点。

```
public class CustomJdbcDaoImpl extends JdbcDaoImpl {

    @Override
    protected List<GrantedAuthority> loadUserAuthorities(String username) {
    return getJdbcTemplate().query(getAuthoritiesByUsernameQuery(), new String[] {username, username}, new RowMapper<GrantedAuthority>() {
            public GrantedAuthority mapRow(ResultSet rs, int rowNum) throws SQLException {
              .......
            }
        });
    }

    @Override
    protected List<UserDetails> loadUsersByUsername(String username) {
        return getJdbcTemplate().query(getUsersByUsernameQuery(), new String[] {username, username}, new RowMapper<UserDetails>() {
            public UserDetails mapRow(ResultSet rs, int rowNum) throws SQLException {
                 .......
            }
        });
} 
```

这个类的 bean 配置看起来像这样。

```
<beans:bean id="customUserDetailsService" class="com.xxx.CustomJdbcDaoImpl">
    <beans:property name="dataSource" ref="dataSource"/>
    <beans:property name="usersByUsernameQuery">
        <beans:value> YOUR_QUERY_HERE</beans:value>
    </beans:property>
    <beans:property name="authoritiesByUsernameQuery">
        <beans:value> YOUR_QUERY_HERE</beans:value>
    </beans:property>
</beans:bean> 
```

您的查询将与此类似

```
select username, password, enabled from user where (username = ? or email = ?)
select u.username, a.authority from user u join authority a on u.userId = a.userId where (username = ? or email = ?) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-09T13:21:53.650

您可以像下面的代码一样使用您的 UserDetailesService.and 配置。

```
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    @Autowired
    private MyUserDetailsService userDetailsService;

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService);
    }
} 
```

关键是您不需要返回具有相同用户名的用户，您可以获得用户电子邮件并使用用户名返回用户。该代码将类似于下面的代码。

```
@Service
public class MyUserDetailsService implements UserDetailsService {

    @Override
    public UserDetails loadUserByUsername(String usernameOrEmail) throws UsernameNotFoundException {
        var user = /** here search user via jpa or jdbc by username or email **/;
        if(user == null ) 
            throw new UsernameNotFoundExeption();
        else return new UserDetail(user); // You can implement your user from UserDerail interface or create one;
    }

} 
```

提示* UserDetail 是一个接口，您可以创建一个或使用 Spring Default。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T13:56:40.030

`<jdbc-user-service>`您可以分别在tag in`users-by-username-query`和`authorities-by-username-query`attributes中定义自定义查询。

```
<jdbc-user-service data-source-ref="" users-by-username-query="" authorities-by-username-query=""/> 
```

**更新**

您可以创建实现`org.springframework.security.core.userdetails.UserDetailsService`和配置应用程序的类，以将其用作身份验证源。在您的自定义 UserDetails 服务中，您可以执行从数据库获取用户所需的查询。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-22T07:01:43.230

您可以像这样配置 UserDetailesService 类。

```
public class UserDetailsServiceImpl implements UserDetailsService{

    @Autowired
    private UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = this.userRepository.getUserByEmailOrUserName(username); //for fetch user
        if(user==null) {
            throw new UsernameNotFoundException("User doesn't exists");
        }
        UserDetailsImpl customUserDetails = new UserDetailsImpl(user);
        return customUserDetails;
    }

} 
```

您的查询将与此类似

> 选择 * from user where email = ? 或用户名=？

用于获取用户数据的 UserRepository 类

```
@Repository
public interface UserRepository extends JpaRepository<User, Integer>{

    @Query("from user where email = :u or username = :u")
    public User getUserByEmailOrUserName(@Param("u") String username);

} 
```

您还可以在登录时添加电话号码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-27T14:04:05.913

这是我发现的一种解决方法。基本上，我将用户名和电子邮件地址与中间的分隔符连接起来（例如'jsmith~johnsmith@gmail.com'），并检查参数是否与分隔符的左侧匹配或是否与分隔符的右侧匹配分隔符：

```
select username, password, enabled 
  from users 
 where ? in (substring_index(concat(username, '~',email),'~', 1), 
             substring_index(concat(username, '~',email),'~', -1)) 
```

如果您担心用户名或电子邮件中可能存在分隔符（例如 ~），请改用非标准分隔符（例如 X'9C'）

# java - 我无法使用 ajax 通过 Web 服务在我的数据库中删除或插入数据

> ID：14122758
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:15:34.447
> 
> 标签：java, ajax, postgresql

这是我的 test_database.html 页面

```
<html>
<head> 
<title> <h1> Database Test </h1> </title>
<script>

    var xmlhttp;
    if (window.XMLHttpRequest) 
    {
        xmlhttp = new XMLHttpRequest();
    } else 
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    function loadXMLDoc()
    {
        xmlhttp.onreadystatechange = function() 
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                var xmlObj = xmlhttp.responseXML;

                var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

                if (window.DOMParser)
                {
                    parser=new DOMParser();
                    var xmlDoc=parser.parseFromString(textXML,"text/xml");
                }
                else // Internet Explorer
                {
                    var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async=false;
                    xmlDoc.loadXML(textXML);
                }   
                var rows = xmlDoc.getElementsByTagName("row");
                mybody=document.getElementsByTagName("body")[0];
                mytable=document.createElement("table");
                mytablebody=document.createElement("tbody");
                //alert(cols.length);
                for(var i=0; i<rows.length; i++)
                {   mycurrent_row=document.createElement("tr"); 
                    var cols=rows[i].getElementsByTagName("colunm");

                   for(var j=0; j<cols.length; j++) 
                    {     mycurrentcell=document.createElement("td");  
                          currenttext=document.createTextNode(cols[j].getAttribute("colvalue"))
                          mycurrentcell.appendChild(currenttext);
                          mycurrent_row.appendChild(mycurrentcell);  
                     }  
                                     mycurrent_row.id=cols[0].getAttribute("colvalue");
                         mybutoncell = document.createElement("td");
                         but=document.createElement("input");
                         but.type="button";
                         mybutoncell.appendChild(but);                                      
                         mycurrent_row.appendChild(mybutoncell); 
                         mytablebody.appendChild(mycurrent_row);
                         but.onclick=ajaxDBDelete;
                }
                mytable.appendChild(mytablebody);
                mybody.appendChild(mytable);
                 mytable.setAttribute("border","2");    
            }
        }
        xmlhttp.open("GET","http://127.0.0.1:8080/axis2/services/database_tmm_man/SelectFromDB?",true);
        xmlhttp.send();

    }       
    function ajaxDBInsert ()
    { 
     var textvalue= document.getElementById('txbegn').value
       var xml="<university><student>";
       xml+="<egn>" +textvalue+ "</egn>";
       xml+="<fname>" + document.getElementById('txbfname').value + "</fname>";
       xml+="<mname>" + document.getElementById('txbmidname').value + "</mname>" ;
       xml+="<lname>" + document.getElementById('txblname').value + "</lname>";
       xml+="<telnum>" + document.getElementById ('txbtelnum').value + "</telnum>";
       xml+="</student></university>";

    alert(xml);
    var tranXml = escape(xml); 
    alert(tranXml);

        var url = "localhost/services/database_tmm_man/InsertInto?";
        var params = "data=" + tranXml;
        xmlhttp.open("POST", url, true);
        xmlhttp.send(params);   

    }

    function ajaxDBDelete()
    {
          var par=this.parentNode;
          while(par.nodeName.toLowerCase()!='tr')
          {
              par=par.parentNode;
          }
          alert (par.id);
         var delid="<university><student>";
         delid+= "<egn>" + par.id + "</egn>";
         delid+= "</student></university>";
         alert(delid);
         var tranDelid = escape(delid);
         alert (tranDelid);

        var url = "http://127.0.0.1:8080/axis2/services/database_tmm_man/DeleteFromDB?";
        var params = "deleteID=" + tranDelid;
        xmlhttp.open("POST", url, true);
        xmlhttp.send(params);   
    }
    </script>
</head>

<body onload="loadXMLDoc();">

EGN:                  <input type="text" id="txbegn"/><br>
FIRST NAME:           <input type="text" id="txbfname"/><br>
MIDDLE NAME:          <input type="text" id="txbmidname"/><br>
LAST NAME:            <input type="text" id="txblname"/><br>
Telephone Number:     <input type="text" id="txbtelnum"/><br>
<br>
<br>
<button type="button" name="btnInsert" onClick="ajaaclxDBInsert();">INSERT</button>
<br>
<br>
</body>
</html> 
```

这是我的服务的代码

```
package gismo;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.net.URLDecoder;
import java.sql.*;

import javax.xml.parsers.*; 

import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class database_tmm_man 

{

    Connection conn= null;
    String strEgnin;
    String strFname;
    String strMname;
    String strLname;
    String strNumtel;
    String strEgndel;

public String SelectFromDB()
{

    String strXml = "<response>";

        try {
            Class.forName("org.postgresql.Driver");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try 
        {
            conn= DriverManager.getConnection("jdbc:postgresql://127.0.0.1:5432/plovdivbizlocator", "postgres", "********");
        } 

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

        Statement mystmt = null;
        String selectQuery = "SELECT egn, firstname, middlename, lastname,telnumber FROM tanya_students";
        try 
        {
            mystmt = conn.createStatement();
            ResultSet mysr = mystmt.executeQuery(selectQuery);  

            ResultSetMetaData rsmd = mysr.getMetaData(); 
            int colCount = rsmd.getColumnCount();
                int numberrow=0;

            strXml += "<rows>";
            while (mysr.next())
            {  
                strXml += "<row id= '"+numberrow +"'>";
                for (int i=1;i<=colCount;i++) 
                {
                    String elementname = rsmd.getColumnName(i);
                    String elementValue=mysr.getString(i);
                    strXml += "<colunm colname='"+elementname+"' colvalue='"+elementValue+"'/>";
                }                   
                numberrow++;
                strXml +="</row>";
            }
            strXml += "</rows>";                

        }
        catch(Exception ex)
        {}
        strXml+="</response>";

        return strXml;

}

public String InsertIntoDB (String data) throws ClassNotFoundException
{

    try
        {   String strDecodedData = URLDecoder.decode(data);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dbBuilder = dbFactory.newDocumentBuilder();
            Document doc = dbBuilder.parse(new InputSource(new ByteArrayInputStream(strDecodedData.getBytes("utf-8"))));
            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("student");
            int num=nList.getLength();
            for (int i=0;i<num;i++)
                        {       
                            Element section=(Element)nList.item(i);                     
                            strEgnin = section.getElementsByTagName("egn").item(0).getChildNodes().item(0).getNodeValue();              
                            strFname = section.getElementsByTagName("fname").item(0).getChildNodes().item(0).getNodeValue();             
                            strMname = section.getElementsByTagName("mname").item(0).getChildNodes().item(0).getNodeValue();            
                            strLname = section.getElementsByTagName("lname").item(0).getChildNodes().item(0).getNodeValue();                
                            strNumtel =section.getElementsByTagName("telnum").item(0).getChildNodes().item(0).getNodeValue();

                        }
        }

    catch (Exception ex1)
         {

         }

    Connection conn= null;

    Class.forName("org.postgresql.Driver");
    try 
    {
        conn= DriverManager.getConnection("jdbc:postgresql:/127.0.0.1:5432/plovdivbizlocator", "postgres", "********");
    } 

    catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

    PreparedStatement pstmt = null;
    String insertQuery= "insert into tanya_students (egn, firstname, middlename, lastname, telnumber)";
    insertQuery +="values (?, ?, ?, ?, ?)";
    try
        {
            pstmt=conn.prepareStatement(insertQuery);
            pstmt.setString(1,strEgnin);
            pstmt.setString(2,strFname);
            pstmt.setString(3,strMname);
            pstmt.setString(4,strLname);
            pstmt.setString(5,strNumtel);
            pstmt.executeUpdate();
        }

    catch (Exception ex)
        {

        }

    return "" ;
}
public String DeleteFromDB(String deleteID) 
{
    try
    {   String strDecodeddelID = URLDecoder.decode(deleteID);
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dbBuilder = dbFactory.newDocumentBuilder();
        Document doc = dbBuilder.parse(new InputSource(new ByteArrayInputStream(strDecodeddelID.getBytes("utf-8"))));
        doc.getDocumentElement().normalize();

        NodeList nList = doc.getElementsByTagName("student");
        int num=nList.getLength();
        for (int i=0;i<num;i++)
                    {       
                        Element section=(Element)nList.item(i);                     
                        strEgndel = section.getElementsByTagName("egn").item(0).getChildNodes().item(0).getNodeValue();                 

                    }
    }

catch (Exception ex1)
     {

     }

  Connection conn= null;

    try 
    {
        Class.forName("org.postgresql.Driver");
    } 

    catch (ClassNotFoundException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try 
    {
        conn= DriverManager.getConnection("jdbc:postgresql:/127.0.0.1:5432/plovdivbizlocator", "postgres", "********");
    } 

    catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

    PreparedStatement delstmt = null;
    String delQuery= "DELETE FROM tanya_students WHERE egn= ?";
    try
        {
            delstmt=conn.prepareStatement(delQuery);
            delstmt.setString(1,strEgndel);
            delstmt.executeUpdate();
        }

    catch (Exception ex)
        {

        }

    return "" ;

}

} 
```

就在我单击每行末尾的按钮时尝试删除记录时，什么也没有发生。提及我为我的 row.id 选择数据库的第一列 - egn 是唯一的（没有人具有相同的 egn）可能很有用。这就是为什么我将这个egn发送到服务器和我的网络服务在无效的主程序中一切正常工作poerfect@\所以我认为不知何故我没有正确地将数据发送到我的服务器

与插入相同-当我在要插入数据库的文本框中键入一些数据时，当我单击插入按钮时，没有任何反应，感谢您提前提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:07:48.117

你确定你的 Ajax 调用是正确的还是根本没有？由于您使用原始 Javascript 构建调用，您是否在多个浏览器中对其进行了测试？有一些很好的 Chrome 扩展允许您手动构建 REST 调用，以测试 Web 服务是否在浏览器文档上下文之外正常工作。（我使用了一个名为 Graphic HHTP 客户端的程序，但我认为它仅适用于 Mac）。

这样做至少可以帮助您确定问题是服务器端还是客户端。

# android - 如何更改 Android 小部件背景和文本颜色？

> ID：14122762
> 
> 赞同：0
> 
> 时间：2013-01-02T13:15:55.117
> 
> 标签：android, android-widget

我需要以这种方式更改小部件背景。1-单击小部件后，我们自定义小部件视图并单击确定按钮小部件应显示在活动启动上。屏幕。

喜欢这个小部件：- [http://youtu.be/k9SFD8yuttw](http://youtu.be/k9SFD8yuttw)

我在谷歌上有很多搜索，但没有得到任何线索。我用这种方式做了很多尝试：-但它不起作用：-

```
private static final String ACTION_CLICK = "ACTION_CLICK";

private static Intent getLaunchIntent(final Context context,
        final int appWidgetId) {
    final PackageManager manager = context.getPackageManager();
    final Intent intent = manager
            .getLaunchIntentForPackage("com.appstudioz.hellowidget");
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
            | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    intent.setData(new Uri.Builder().path(String.valueOf(appWidgetId))
            .build());
    return intent;

}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    /*Timer timer = new Timer();
    timer.scheduleAtFixedRate(new MyTime(context, appWidgetManager), 1,
            1000);

    ComponentName objcomponentname = new ComponentName(context,
            HelloWidget.class);
    int[] allappids = appWidgetManager.getAppWidgetIds(objcomponentname);*/

    final RemoteViews remoteViews = new RemoteViews(
            context.getPackageName(), R.layout.widgetlayout);

    final PreferenceAdaptor preferences = new PreferenceAdaptor(context);

    for (final int appWidgetId : appWidgetIds) {
        updateAppWidget(context, appWidgetManager, appWidgetId,
                preferences, remoteViews);
    }
    if (preferences.isUpdateNeeded()) {
        // Build the intent to call the service
        Intent intent = new Intent(context, UpdateService.class);
        context.startService(intent);
    }

}

private class MyTime extends TimerTask {
    RemoteViews remoteViews;
    AppWidgetManager appWidgetManager;
    ComponentName thisWidget;
    DateFormat format = SimpleDateFormat.getTimeInstance(
            SimpleDateFormat.MEDIUM, Locale.getDefault());

    public MyTime(Context context, AppWidgetManager appWidgetManager) {
        this.appWidgetManager = appWidgetManager;
        remoteViews = new RemoteViews(context.getPackageName(),
                R.layout.activity_main);
        thisWidget = new ComponentName(context, HelloWidget.class);
    }

    @Override
    public void run() {
        remoteViews.setTextViewText(R.id.widget_textview, "Time = "
                + format.format(new Date()));
        appWidgetManager.updateAppWidget(thisWidget, remoteViews);
    }
}

@Override
public void onReceive(Context context, Intent intent) {
    // v1.5 fix that doesn't call onDelete Action
    final String action = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
        final int appWidgetId = intent.getExtras().getInt(
                AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
        if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
            this.onDeleted(context, new int[] { appWidgetId });
        }
    } else {
        super.onReceive(context, intent);
    }
}

public static void updateAppWidget(final Context context,
        final AppWidgetManager appWidgetManager, final int appWidgetId,
        final PreferenceAdaptor preferences, final RemoteViews remoteViews) {

    if (preferences.isUpdateNeeded()) {
        return;
    }

    final PendingIntent pendingIntent = PendingIntent.getActivity(context,
            appWidgetId, getLaunchIntent(context, appWidgetId), 0);

    remoteViews.setOnClickPendingIntent(R.id.thelayout, pendingIntent);
    appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
} 
```

任何人都建议我或给我链接如何自定义我的小部件。

# java - Java - 一段时间后停止执行查询（）

> ID：14122768
> 
> 赞同：2
> 
> 时间：2013-01-02T13:17:05.443
> 
> 标签：java, period, executequery

我有一个执行的 SQL 查询：

```
ResultSet resultSet = preparedStatement.executeQuery();

while( resultSet.next() ){
     // do some stuff
} 
```

假设执行 2 分钟后，有没有办法停止执行并执行一些代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:21:33.453

您可以设置执行查询的超时时间。 `SQLException`如果查询未按时完成并超时，将抛出：

```
preparedstatement.setQueryTimeout(seconds);
ResultSet resultSet = preparedStatement.executeQuery();

while( resultSet.next() ){
     // do some stuff
} 
```

看看`setQueryTimeout` [文档](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#setQueryTimeout%28int%29)

# javascript - CSS transformOrigin 属性未按预期工作

> ID：14122770
> 
> 赞同：1
> 
> 时间：2013-01-02T13:17:15.210
> 
> 标签：javascript, jquery, css

我有一个 svg，其中一些区域在我单击时需要缩放。我使用了 css transformOrigin 属性并将其设置为鼠标单击的坐标，因此我可以围绕该点缩放图像。相反，当 svg 缩放时，它会从我单击的点偏移几个像素。我在这里想念什么吗？

```
$(document).ready(function(){   
$('g').click(function(e){
        var x = e.clientX;
        var y = e.clientY;
        $('g.states').css({'transformOrigin': x+' '+y});
        $('g.states').transition({scale: "2"});     
    })
    $('#zoomout').click(function(){
        $('g.states').transition({scale:"1"});
    })
}); 
```

该`.transition`方法是[jquery 传输](http://ricostacruz.com/jquery.transit/)库的一部分。

# ios - restkit中的“属性”和“属性”有什么区别

> ID：14122773
> 
> 赞同：8
> 
> 时间：2013-01-02T13:17:22.870
> 
> 标签：ios, restkit

我是 iOS RestKit 框架的新手。我已经阅读了文档，但仍然无法弄清楚 RestKit 中“属性”和“属性”之间的区别。

由于在文档中，有

`- addPropertyMappingsFromArray:`

和

`– addAttributeMappingsFromArray:`

我知道在分配关系时，我应该使用第一个。但是，我仍然无法真正理解这些差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:29:51.713

我自己也遇到了这个。命名肯定会更清楚。

`- addAttributeMappingsFromArray:`指的是你所期望的：类属性的映射。`- addPropertyMappingsFromArray:`另一方面是指`RKPropertyMapping`对象。

如果您查看 RestKit 源代码，您会发现所有的 'addAttributeMappings' 方法都是在 'addPropertyMappings' 方法之上的一个方便的抽象，并负责`RKPropertyMapping`为您构造所需的对象。

# c - 忽略空的可变参数

> ID：14122774
> 
> 赞同：0
> 
> 时间：2013-01-02T13:17:23.510
> 
> 标签：c, c-preprocessor, variadic-macros

当所有参数都传递给 HTML_A 时，此代码按预期工作：

```
#include <stdio.h>

#define HTML_A_fmt_void
#define HTML_A_arg_void
#define HTML_A_fmt_link(fmt, ...) " href=\""fmt"\""
#define HTML_A_arg_link(fmt, ...) ,__VA_ARGS__
#define HTML_A_fmt_text(fmt, ...) fmt
#define HTML_A_arg_text(fmt, ...) ,__VA_ARGS__
#define HTML_A(link, text) \
    printf("<a" HTML_A_fmt_##link ">" HTML_A_fmt_##text "</a>\n" HTML_A_arg_##link HTML_A_arg_##text)

int main(void)
{
    HTML_A(
        link("%s", "http://wwww.google.com"),
        text("%s", "Visit google")
    );
    HTML_A(
        link("%s", "http://wwww.google.com"),
        void
    );
    HTML_A(
        void,
        text("%s", "Visit google")
    );
    HTML_A(
        void,
        void
    );
    return 0;
} 
```

但是，如果我想以格式调用不带参数的 HTML_A：

```
HTML_A(
    link("http://wwww.google.com"),
    text("Visit google")
); 
```

我在 gcc 下收到此编译错误：

> demo.c:17:1：警告：ISO C99 需要使用其他参数
> demo.c：在函数“main”中：
> demo.c:17：错误：“，”标记之前的预期表达式

cpp 返回：

```
printf("<a" " href=\"""http://wwww.google.com""\"" ">" "Visit google" "</a>\n" , ,); 
```

与`,,`在最后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:51:17.343

为了使预处理器正常工作，您必须使用串联“运算符”（在此上下文中具有特殊含义）：而不是

```
, __VA_ARGS__ 
```

写

```
, ## __VA_ARGS__ 
```

它应该按预期工作。

# java - JPA @Transaction

> ID：14122776
> 
> 赞同：2
> 
> 时间：2013-01-02T13:17:37.347
> 
> 标签：java, jpa, transactions

在我看来，使用 Spring JPA 启动/停止事务的常用方法是使用 @Transactional 注释公共函数

我无法弄清楚的是是否可以注释一个类以使范围更宽一些。

假设您有一个调用 3 个函数的 Web 服务，其中两个首先您希望操作数据并将其留在附加到会话的内存中，但在第三次调用时您希望存储更改的实体。对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:51:56.487

您所说的也称为*会话管理*。

请记住，**事务必须尽可能短**。在多个请求-响应循环期间保持数据库事务不是一种选择（出于技术原因：事务绑定到一个线程，并且通常 2 个请求由 2 个不同的线程处理）。

但是，JPA 提供了[Extended Persistence Context](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContextType.html)来帮助您实现*对话管理*。

扩展的持久性上下文可以在事务边界之外用于只读操作；所有非只读操作都必须在事务中执行。基本上，扩展的持久性上下文可以*加入一个事务*。这就是您可以在对话结束时提交扩展持久性上下文的方式。

# postgresql - ColdFusion中等效的postgresql UUID

> ID：14122777
> 
> 赞同：4
> 
> 时间：2013-01-02T13:17:39.033
> 
> 标签：postgresql, coldfusion, uuid, postgresql-9.1

我有一个表会话，它在 postgres 中具有 UUID 类型的 sess_uuid 列，我的问题是我必须使用查询从 ColdFusion cfQuery 更新会话表：

```
UPDATE sessions
    SET     sess_frn_usr_id = 1 
    WHERE   sess_uuid = <cfqueryparam value="#arguments.SessionToSave.get('sessUuid')#" cfsqltype="cf_sql_other"> 
```

此查询中的问题是 sess_uuid 列在数据库中属于 UUID 类型，而在 ColdFusion 中，等效类型`cf_sql_other`不适用于此。错误是：

> 错误：运算符不存在：uuid = 字符变化

此处使用 ColdFusion 中的哪种 cf_sql 类型来映射 postgres 中的 UUID 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:33:23.750

我针对 PostgreSQL 9.1 使用 CF9.0 和 10 测试了您的查询，并且类型`cf_sql_other`工作得很好。因此，要么这不是导致错误的实际查询，要么可能发生了超出我们所见的其他事情。您的 DSN 是否有任何特殊的 jdbc 连接设置？

> ```
>  ERROR: operator does not exist: uuid = character varying 
> ```
> 
> 此处使用 ColdFusion 中的哪种 cf_sql 类型来映射 postgres 中的 UUID 列？

根据我有限的测试和[一些快速搜索](http://archives.postgresql.org/pgsql-jdbc/2009-03/msg00009.php)，`cf_sql_other`是与 CF9+ 中捆绑的 PostgreSQL 驱动程序一起使用的正确类型。在 jdbc 3中 PostgreSQL 的类型没有直接的等价物`uuid`，所以 type[`OTHER`](http://docs.oracle.com/javase/6/docs/api/java/sql/Types.html#OTHER)用于表示它是特定于数据库的，驱动程序内部从那里获取它。

我只能通过使用其中一种*字符串*类型来重现您的错误，例如`cf_sql_varchar`或省略`cfsqltype`默认为`cf_sql_char`. 鉴于错误消息，不支持 uuid 和字符串之间的直接比较。您必须先将 uuid 显式转换为字符串（反之亦然）。下面的所有示例都适用于 CF9+ 和 PostgreSQL 9.1。

```
 <!--- uuid = "d0c2b125-9222-d479-fb4a-be912b8c7c3b" --->
  <!--- syntax 1 ---->
  WHERE   CAST(sess_uuid AS VARCHAR)  = <cfqueryparam value="#uuid#" cfsqltype="cf_sql_varchar">   

  <!--- syntax 2 ---->
  WHERE   sess_uuid::text  = <cfqueryparam value="#uuid#" cfsqltype="cf_sql_varchar">   

  <!--- syntax 3 --->
  WHERE   sess_uuid  = <cfqueryparam value="#uuid#" cfsqltype="cf_sql_varchar">::uuid 
```

虽然我不推荐它，但值得注意的是省略 cfqueryparam 也可以。由于与值的直接比较`varchar`失败（即使在 postgresql 中）我猜在这种情况下会发生一些额外的转换魔法。

```
 <!--- fails --->
  WHERE   sess_uuid = CAST('#uuid#' AS VARCHAR)

  <!--- works --->
  WHERE   sess_uuid = '#uuid#' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:58:07.763

你能限定你所说的“不工作”吗？是否出现验证错误？您能否更新您的问题以包含该信息。

不`CF_SQL_IDSTAMP`工作？

如果没有，那么您无能为力。您可以根本不对其进行类型检查（这`cfsqltype`不是 的*必需*参数`<cfqueryparam>`），或者为了完整起见，只需将其视为 a`CF_SQL_VARCHAR`并对其进行长度检查。

# android - 关注列表视图的最后一项

> ID：14122781
> 
> 赞同：0
> 
> 时间：2013-01-02T13:17:53.510
> 
> 标签：android, listview, onscroll

> **可能重复：**
> [Android ListView setSelection() 似乎不起作用](https://stackoverflow.com/questions/1446373/android-listview-setselection-does-not-seem-to-work)

在滚动列表视图时，当到达列表末尾时，我正在获取其他批次的数据，在获取完成后，我希望在滚动之前关注列表视图的最后一项。`setSelection()`不管用。谁能建议我更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:41:44.957

尝试这个 ：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflator = mContext.getLayoutInflater();
            view = inflator.inflate(android.R.layout.your_item_layout, null);
        }

        //your specific code here

        if (position == mList.size()-1){
            //fetch other batch of data
        }

        return view;
    } 
```

由于预加载，getView 方法将在屏幕上可见之前被调用。但我认为，这就是你要找的。

# java - 通用边界“枚举”之间是否有区别 & Foo" 和 "枚举"

> ID：14122783
> 
> 赞同：16
> 
> 时间：2013-01-02T13:18:01.577
> 
> 标签：java, generics

这两个（有效的）通用界限是：

```
<T extends Enum<T> & MyInterface>
<T extends Enum<? extends MyInterface>> 
```

相同？

* * *

假设我有一个界面

```
interface MyInterface {
    void someMethod();
} 
```

以及一些实现它的枚举：

```
enum MyEnumA implements MyInterface {
    A, B, C;
    public void someMethod() {}
}

enum MyEnumB implements MyInterface {
    X, Y, Z;
    public void someMethod() {}
} 
```

而且我想要求一个实现不仅使用a`MyInterface`而且它是一个枚举。“标准”方式是通过交叉路口：

```
static class MyIntersectionClass<T extends Enum<T> & MyInterface> {
    void use(T t) {}
} 
```

但我发现这也有效：

```
static class MyWildcardClass<T extends Enum<? extends MyInterface>> {
    void use(T t) {}
} 
```

有了上述，这编译：

```
public static void main(String[] args) throws Exception {
    MyIntersectionClass<MyEnumA> a = new MyIntersectionClass<MyEnumA>();
    a.use(MyEnumA.A);
    MyWildcardClass<MyEnumB> b = new MyWildcardClass<MyEnumB>();
    b.use(MyEnumB.X);
} 
```

对于这两种情况，绑定的作品都符合上述预期和要求。

这两个界限之间是否有区别，如果有，那又是什么，一个比另一个“更好”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:25:34.320

在这种特定情况下，没有区别，因为 Enums 形式类型参数实际上是 self 类型。这是因为不能像这样从 Enum 继承：

```
class MyEnumA extends Enum<MyEnum2> {}
class MyEnumB implements MyInterface {} 
```

所以是的，从语义上讲，它们是相同的界限，但仅仅是因为它是枚举。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:48:55.190

正如其他人所指出的那样，两种语法都实现了相同的界限 - 只是因为枚举的特殊情况，我们知道`T`in`Enum<T>`必须是立即扩展`enum`类型。因此，在限制`T`可以解决的问题方面，没有区别。

的实例的可能用法有所不同，但这可能是一个无关紧要的细微差别*。*`T`考虑以下语句编译`MyIntersectionClass.use`但不是`MyWildcardClass.use`：

```
T t2 = t.getDeclaringClass().newInstance(); 
```

只有这些将在后者中编译：

```
MyInterface t2 = t.getDeclaringClass().newInstance();
Enum<? extends MyInterface> t3 = t.getDeclaringClass().newInstance(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T13:23:17.907

由于第二个依赖于 Java 枚举实现为的特殊事实，因此`MyEnum extends Enum<MyEnum>`我更喜欢第一个，它不依赖此类假设并明确说明您的约束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:22:52.183

他们会做同样的事情，但我想说`T extends Enum<? extends MyInterface>`的是更标准一点，因此更好，如果只是因为它更普遍和更容易识别。许多人甚至不知道`&`泛型的部分。

您也可以争辩说它们的阅读方式略有不同。`T extends Enum<T> & MyInterface`我会读作“一个恰好也是 MyInterface 的枚举”。`T extends Enum<? extends MyInterface>`我会读作“实现 MyInterface 的枚举”。所以在这个程度上，这是个人喜好的问题；我更喜欢后者。

# ios - UIView 中的 OpenGLView

> ID：14122785
> 
> 赞同：0
> 
> 时间：2013-01-02T13:18:07.167
> 
> 标签：ios, uitableview, opengl-es

我有`UITableView`一个行选中另一排时`ViewConroller`，也`ViewContoller`应该有一个`GLView`。我不确定添加`OpenGLView`as a `subview`to `UIView`。

请让我知道我们如何在`OpenGLView`内部添加一个`UIView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:19:09.260

There is no such thing as an OpenGLView, merely a standard UIView that you've subclassed to have its backing layer be a CAEAGLLayer. You can call the view whatever you want.

Therefore, they behave just like any other UIView subclass and can be added as a subview of another UIView like usual. Nothing special is needed here.

# matlab - 图像的 gmrf 模型

> ID：14122787
> 
> 赞同：0
> 
> 时间：2013-01-02T13:18:10.063
> 
> 标签：matlab, machine-learning, computer-vision, markov, markov-models

谁能解释如何使用 MATLAB 为图像估计 GMRF 模型的参数？

我已经尝试过像 UGM 这样的工具箱。（http://www.di.ens.fr/~mschmidt/Software/UGM/trainMRF.html）

# php - 字符串长度与其他语言不同...不是英语

> ID：14122788
> 
> 赞同：5
> 
> 时间：2013-01-02T13:18:09.937
> 
> 标签：php

我使用这种编码来缩短我网站上的推荐信，效果很好！但是现在我有一个问题......我让用户有机会使用他们自己的语言添加他们的推荐。我的编码适用于英文字符，但不适用于其他语言的字符....谁能告诉我为什么会这样？？？？

```
 <?php
    $echo = $getFig["news_content"];
    if(strlen($echo) <= 100){
    $bar = $echo;
    }if(strlen($echo) > 100){
    $bar = substr($echo, 0, 101 )."<ahref='#'>Read More...</a>";
    }

    echo htmlspecialchars($bar);
    ?> 
```

非常感谢任何评论。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:20:22.350

使用`mb_*`功能。在您的示例中[`mb_strlen`](http://php.net/manual/en/function.mb-strlen.php)和[`mb_substr`](http://php.net/manual/en/function.mb-substr.php).

原因是`strlen`and`substr`将计算对 ASCII 字符非常合适的字节数，但某些 unicode 字符分配的字节数超过一个字节，因此结果与[`strlen`](http://php.net/manual/en/function.strlen.php)and看起来不正确`substr`。`mb_*`函数在计算字符集而不是字节数时完美地隐藏了这个问题。

如需更多信息，请阅读手册。

**编辑：**

* * *

如果您对单词比对字符更感兴趣，则可以使用[`str_word_count`](http://php.net/manual/en/function.str-word-count.php)来计算字符串中有多少单词。

样本：

```
$str = 'Some long text Some long text Some long text Some long text Some long text Some long text';
echo str_word_count($str); 
```

*注意：*如果您的目标语言有另一个分隔符而不是单词空间，您可以编写自定义函数来计算给定字符串中此分隔符的出现次数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T13:20:37.427

请参阅文档中的注释：

> **笔记：**
> 
> strlen() 返回字节数而不是字符串中的字符数。

[strlen()](http://www.php.net/manual/en/function.strlen.php)返回**字节数**，而不是字符数；两者仅对于单字节字符集相同。

如果需要多字节字符集字符串（例如 UTF-8）的字符长度，请使用[mb_strlen()](http://www.php.net/manual/en/function.mb-strlen.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:20:50.383

您的问题是 strlen 适用于 ascii 字符，其中是英文。另一种方法是 mb_strlen。

这是一个示例代码：

```
<?php 
$str = "Some user input こんにちわ";
$len = mb_strlen($str); 
```

这只是一个示例来说明我想说的，但我希望它可以解决您的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:27:01.077

`strlen`并`substr`假设为单字节字符。它们宁愿基于字节而不是基于字符。

对于多字节字符，您应该使用对应的[多字节字符串](http://php.net/book.mbstring)`mb_strlen`和`mb_substr`. [它们支持多种字符编码](http://php.net/mbstring.encodings)。

# c# - 事件 numericupdown_BackColorChanged 不触发

> ID：14122794
> 
> 赞同：2
> 
> 时间：2013-01-02T13:18:29.890
> 
> 标签：c#, .net, winforms, numericupdown, backcolor

我想编写一个用户可以在 NumericUpDown 控件中输入数字的应用程序。在运行时确定的数字（例如范围）有一些条件。为了向用户提供反馈，当至少一个条件不满足时，我将 NumericUpDown 的 BackColor 更改为红色。到目前为止，它按我期望的那样工作。

现在我想向 NumericUpDown 添加一个工具提示来解释为什么数字是“错误的”。当我使用事件 NumericUpDown_BackColorChanged 来调整文本时，该事件不会“触发”。这是为什么？

我想这与[Hans Passant在](https://stackoverflow.com/users/17034/hans-passant)[这里](https://stackoverflow.com/questions/13701789/numericupdown-background-colour-change-for-disabled-element)和[这里](https://stackoverflow.com/questions/10631788/numericupdown-backcolor-not-working-as-expected)所说的 NumericUpDown 的复合字符有关。但我不确定。TY 提前寻求帮助。

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        if (numericUpDown1.Value == 42)
        {
            numericUpDown1.BackColor = Color.Red;
        }
        else
        {
            numericUpDown1.BackColor = System.Drawing.SystemColors.Window;
        }
    }

private void numericUpDown1_BackColorChanged(object sender, EventArgs e)
    {
        //something epic should happen
        //but somehow my program never reaches these lines :(
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:03:05.230

我已经确认`NumericUpDown.BackColor`属性设置器确实没有调用`OnBackColorChanged`（至少在 .NET 4.0 中）。

我认为发生这种情况是因为该`BackColor`属性已被覆盖`UpDownBase`以还设置`BackColor`内部的复合控件，`NumericUpDown`并且可能有人忘记调用基本实现（我很想听听这里的一些 WinForms 专家的意见）。

您可以做的是创建一个`FixedNumericUpDown`控件，该控件继承`NumericUpDown`并覆盖该`BackColor`属性，如下所示：

```
public Color BackColor
{
    override set
    {
        base.BackColor = value;
        OnBackColorChanged(EventArgs.Empty);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:31:29.550

**建议：**您可以通过从工具箱中拖放来添加[ErrorProvider 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)

替换您的代码如下：

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    { 
        errorProvider1.Clear();

        if (numericUpDown1.Value == 42)
        {
            numericUpDown1.BackColor = Color.Red;
            errorProvider1.SetError(numericUpDown1, "Select another number");
        }
        else
        {
            numericUpDown1.BackColor = System.Drawing.SystemColors.Window;
        }
    } 
```

# java - MySQL Batchupdate() 与 ON DUPLICATE KEY UPDATE

> ID：14122799
> 
> 赞同：1
> 
> 时间：2013-01-02T13:18:51.653
> 
> 标签：java, mysql, spring, batch-updates

我正在使用`batchUpdate()`在表中插入多条记录。根据要求，如果在插入主键时存在重复值，则应使用最新接收到的数据对其进行更新，因此我试图`ON DUPLICATE KEY UPDATE`在`INSERT`语句中使用。当`ON DUPLICATE KEY UPDATE`我使用单个插入时效果很好，但是当我`batchupdate()`用于相同的查询时它会出错。错误如下：

> 测试用例：testVehicleTracking(com.em.ert.test.TrackingServiceTest): Caused an ERROR PreparedStatementCallback; 错误的 SQL 语法 [INSERT INTO test_tracking (sino, material_id, material_type, vehicle_position, rundown_num, msg_type, msg_status, msg_timestamp) VALUES(?, ?, ?, ?, ?, ?, ?, ?) ON DUPLICATE KEY UPDATE]; 嵌套异常是 java.sql.BatchUpdateException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

我不明白为什么`ON DUPLICATE KEY UPDATE`不能使用 batchupdate()。理想情况下应该是这样，因为据我所知，工作没有什么不同。

我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:55:54.790

您在ON DUPLICATE KEY UPDATE 子句**之后缺少列分配。**

来自[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

> **13.2.5\. 插入语法**

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ] 
```

[13.2.5\. 插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)
[13.2.5.3。INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# php - 如何在数据库中存储许多图像

> ID：14122800
> 
> 赞同：3
> 
> 时间：2013-01-02T13:18:51.270
> 
> 标签：php, mysql

我想知道我是否为每个用户存储图像，我应该为每个图像在数据库中创建一个字段吗？假设每个用户将被允许上传 10 张图片，这是否意味着我必须在数据库中创建 imagname 1 、 imagname 2 等字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T13:21:26.220

当然不是。这不是关系数据库的使用方式。而是使用两张表：一张用于用户，一张用于图像。在 images 表中，使用一列将用户 ID 存储在 users 表中。这样，您可以为每个用户存储任意数量的图像，并且可以使用连接查询来查询所有图像。

所以是这样的：

```
CREATE TABLE users (
  user_id int(11) auto_increment NOT NULL PRIMARY KEY,
  name VARCHAR(1024) NOT NULL
);

CREATE TABLE images (
  img_id int(11) auto_increment NOT NULL PRIMARY KEY,
  user_id int(11) NOT NULL,
  image blob
); 
```

现在您可以使用以下方式获取用户图像列表：`SELECT img_id FROM images LEFT JOIN users ON (images.user_id=users.user_id) WHERE users.name='some one';`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:22:05.763

在像 MySQL 这样的关系数据库系统中，您将有两个表：`users`和`users_images`. 对于用户上传的每张图片，`INSERT`在表中都有一条记录`users_images`，其中图片的文件名和用户的 ID 作为外键。

如果需要限制用户只能上传 10 张图片且不能更多，则此逻辑属于您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:24:10.547

更好的是，您可以为要查询的表列添加索引（它可以加快处理大型数据表的性能）。您需要插入具有唯一 ID 的图像并将其标记给用户。

如果您计划为每个用户添加多个图像，最好有一个图像、用户和用户图像表。

有关[规范化表模式的演示](http://sqlfiddle.com/#!2/8b528)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:27:23.650

```
Table User
------------------------------
User Id  |  User Name |  Image 
------------------------------
    1    | Example    | image id (for default image)
------------------------------

Table Images (With User Id as FK)
-----------------------------------------
Image Id  |  User Id (FK) |  Image name 
-----------------------------------------
    1     |   1           |  imagename
----------------------------------------- 
```

在表格用户中，您可以将 1 张图像保存为默认配置文件图像，其他图像可以保存在图像表格中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:21:52.893

否。添加用户的唯一 ID，以便图像与此 ID 相关联，稍后当您进行查询时，只需选择具有用户 ID = 某物的图像

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T13:24:55.257

您需要了解标准化的工作原理。在您的情况下，用户与图像具有 1-* 关系。所以你可以设计两个表 1\. User 2.Image 表 userID 指 User 表中的 userID

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T08:14:53.863

绝对没有 。您必须有两个必须使用外键的表。如果您使用 mysql，请记住将两个表都更改为 InnoDB 引擎。一个表应该引用另一个具有 id 的表，并且这些 id 的所有数据类型必须与第一个表和第二个表相同。看看@arkascha 给出的例子，这是一个很好的例子，它应该可以帮助你。

# jquery - 使用本地图像时，jquery mobile glyphish 图标不显示图标容器背景

> ID：14122801
> 
> 赞同：0
> 
> 时间：2013-01-02T13:18:54.360
> 
> 标签：jquery, html, css, jquery-mobile

我使用指向演示页面 glyphish.com/images/demo.png 的 glyphish 图标集在页脚中设置了所有图标。

但是，当我下载图像并使用我自己的容器图像时，不显示容器图像，jsfiddle 与演示代码：

[http://jsfiddle.net/NkjQr/1322/](http://jsfiddle.net/NkjQr/1322/)

```
 <div data-role="footer" class="nav-glyphish-example" data-position="fixed"> 
            <div data-role="navbar" class="nav-glyphish-example" data-grid="d"> 
                <ul> 
                    <li><a href="#" id="favorite" data-icon="custom" ></a></li> 
                    <li><a href="#" id="recent" data-icon="custom"></a></li> 
                    <li><a href="#" id="contacts" data-icon="custom"></a></li> 
                    <li><a href="#" id="keypad" data-icon="custom"></a></li> 
                    <li><a href="#" id="voicemail" data-icon="custom"></a></li> 
                </ul> 
            </div> 
    </div> 
```

# java - Java 平台独立性将如何工作？

> ID：14122816
> 
> 赞同：1
> 
> 时间：2013-01-02T13:20:11.087
> 
> 标签：java, jvm, bytecode

我在 64 位编译器上执行了一个 java 程序，并为该程序生成了字节码。是否可以在 32 位编译器上运行相同的字节码而不会丢失数据？

在我的程序中，我`x=10024`在 64 位编译器上声明了一个变量？
那么在 32 位编译器中 x 的值是多少呢？如果 x 的值相同，如何不丢失数据？你能详细说明一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:24:42.350

当您运行“32 位”编译器时，您在 32 位 JVM 中运行编译器代码，而当您运行“64 位”编译器时，您在 64 位 JVM 中运行完全相同的代码，这将产生完全相同的字节码。如果字节码不完全相同，则您发现了一个错误。唯一的区别是“64 位”版本的运行速度可能会稍微快一些（猜测可能高达 5%）

> 我在 64 位编译器上执行了一个 java 程序

您在编译器中编译字节码，而不是运行它。

> 并为该程序生成字节码。

字节码不是 32 位或 64 位，您如何创建它或在哪个 JVM 中运行编译器都没有区别。

> 是否可以在 32 位编译器上运行相同的字节码而不会丢失数据？

无论是 32 位还是 64 位，您都可以使用由任何版本的 Java 编译的类编译代码，直到相同版本。

> 在我的程序中，我在 64 位编译器上声明了一个变量 x=10024？

这没有任何意义。您可能已经编译过代码，例如`int x=10024;`使用在 64 位 JVM 中运行的编译器。它是如何编译的没有任何区别。

> 那么在 32 位编译器中 x 的值是多少呢？

与在 32 位 JVM 或任何其他 JVM 中运行的编译器相同。

> 如果 x 的值相同，如何不丢失数据？

没有理由丢失数据。如果`x`是一个`int`，它将是一个 32 位有符号值，无论您如何编译代码或使用哪个 JVM 来运行编译器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T13:24:09.307

JVM 保证字节码运行良好，无论架构如何，无论是 64 位还是 32 位，无论是小端还是大端。在 Java 字节码中：

*   所有原始类型的大小相同；
*   都是大端。

之后，JVM*可能会*，也可能不会，在运行时将字节码优化为本地代码（并在场景之外执行必要的字节序魔法）。

如果您愿意，可以将字节码视为“Java 汇编语言”——但对于所有 CPU 架构只有一种这样的汇编语言：“运行”该汇编语言是 JVM 的角色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T13:24:23.763

Java 编译器生成的字节码不依赖于物理机的架构。Java 虚拟机可以运行此字节码，无论其架构是否与编译代码的机器的架构相同。

Java 整数类型是 4 个字节。在 32、64 或 128 位机器上。Java long 类型是 8 个字节。等等等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:25:15.210

是的，无论您的平台值如何，原始变量的值都将保持不变。除浮点数据类型外，精度取决于您是否指定 strictfp。

来自 Java 语言规范：Strictfp 确保您从每个平台上的浮点计算中获得完全相同的结果。如果您不使用 strictfp，JVM 实现可以在可用的情况下免费使用额外的精度

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T13:28:33.177

fge 是正确的。

更详细：Java 确保 int 在 BigEndian 中有 4 个字节 float 在 BigEndian 中有 4 个字节 long 在 BE 中有 8 个字节，依此类推......

无论底层架构如何，这都会保持不变，因此在 8 位机器上使用 long 会严重减慢速度，因为它必须在 8x8 位上工作一个 long。

但是，特定于平台和架构的 JVM 将尝试尽可能优化它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T13:36:31.200

生成的字节码与平台无关。如果您在 32 位或 64 位机器上运行相同的字节码，则没有任何区别。在大多数情况下的行为应该完全相同。

除非您有本机代码（为特定架构编译的机器代码），否则您的代码将在 32 位和 64 位 JVM 中同样运行良好，即它与平台无关

```
x = 10024 
```

int 变量 x 在两种架构中都表示为 32 位定点值，因此不会有任何损失或意外行为

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T13:26:13.747

Java 在可以执行代码的 Java 虚拟机 (JVM) 中运行。JVM 提供了一个运行时环境，可以在其中执行 Java 字节码，支持自动异常处理等功能，它为每个软件错误（异常）提供根本原因调试信息。JVM 与 Java 类库一起分发，Java 类库是一组实现 Java 应用程序编程接口 (API) 的标准类库（Java 字节码）。这些库与 JVM 捆绑在一起，形成了 Java 运行时环境 (JRE)。JVM 可用于许多硬件和软件平台。对所有平台上的所有 JVM 使用相同的字节码允许将 Java 描述为一种编写一次、随处运行的编程语言，而不是一次编写、随处编译的编程语言，后者描述了跨平台编译语言。因此，JVM 是 Java 平台的重要组成部分。JVM 通常被实现为在现有操作系统上运行，但也可以被实现为直接在硬件上运行。如果您愿意，可以自己制作，允许您将 java 移植到任何地方。来源：[维基百科](http://en.wikipedia.org/wiki/Java_virtual_machine)

# gwt - GWT 2.5 本机拖放在 IE9 中不起作用

> ID：14122817
> 
> 赞同：1
> 
> 时间：2013-01-02T13:20:12.760
> 
> 标签：gwt

我正在尝试使用本机 GWT 拖放事件在 IE9 中进行拖放。（当然，它在除 IE9 之外的所有浏览器中都能正常工作）

我在开发模式下工作时遇到了一些问题。但是，当在开发模式之外时，它不起作用。所以我输入了这段代码：

```
 Window.alert("supported DnD: "+com.google.gwt.event.dom.client.DragDropEventBase.isSupported()); 
```

在开发模式下运行时它显示“真”，但在未在开发模式下运行时显示“假”！？

如果 GWT 2.5 不支持 IE9 中的 DnD，有谁知道这是为什么？或者，如果有某种方法可以解决它。这在理论上必须是可能的，因为它在开发模式下工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:52:17.907

确保您在托管和生产模式下在相同的浏览器和文档模式中运行示例代码。还要记住 GWT 团队的建议。[https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9)

确保 IE9 未在某些 IE8/IE7 兼容模式下运行。

对于 IE7 和 IE8，该功能被禁用。
参考：

*   [http://code.google.com/p/google-web-toolkit/source/detail?r=10138](http://code.google.com/p/google-web-toolkit/source/detail?r=10138)
*   [https://groups.google.com/d/topic/google-web-toolkit/0MkjaHsVfO4](https://groups.google.com/d/topic/google-web-toolkit/0MkjaHsVfO4)

GWT 团队测试网址： http: [//gwt-cloudtasks.appspot.com](http://gwt-cloudtasks.appspot.com)

GWT 团队示例代码：[http ://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/java/com/google/gwt/sample/mobilewebapp/client /desktop/DesktopTaskEditView.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/java/com/google/gwt/sample/mobilewebapp/client/desktop/DesktopTaskEditView.java)

# c# - 在 C# 中使用反射获取接受类型或派生类型的构造函数

> ID：14122819
> 
> 赞同：1
> 
> 时间：2013-01-02T13:20:15.390
> 
> 标签：c#, .net, generics, reflection

我想对某个类型参数 T 使用反射来获取它的构造函数。

我想获得的构造函数是接受某些类型 ISomeType 或从它派生的任何类型的构造函数。

例如：

```
public interface ISomeType
{
}

public class SomeClass : ISomeType
{
} 
```

我想找到接受 ISomeType、SomeClass 或任何其他 ISomeType 派生类的构造函数。

有什么简单的方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:28:06.833

你可以这样做：

```
public List<ConstructorInfo> GetConstructors(Type type, Type baseParameterType)
{
  List<ConstructorInfo> result = new List<ConstructorInfo>();

  foreach (ConstructorInfo ci in type.GetConstructors())
  {
    var parameters = ci.GetParameters();
    if (parameters.Length != 1)
      continue;

    ParameterInfo pi = parameters.First();

    if (!baseParameterType.IsAssignableFrom(pi.ParameterType))
      continue;

    result.Add(ci);
  }

  return result;
} 
```

这相当于

```
public IEnumerable<ConstructorInfo> GetConstructors(Type type, Type baseParameterType)
{
    return type.GetConstructors()
            .Where(ci => ci.GetParameters().Length == 1)
            .Where(ci => baseParameterType.IsAssignableFrom(ci.GetParameters().First().ParameterType)
} 
```

当你添加一些 LINQ 魔法时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:25:25.127

你可以这样做：

```
Type myType = ...
var constrs = myType
    .GetConstructors()
    .Where(c => c.GetParameters().Count()==1
    && c.GetParameters()[0].ParameterType.GetInterfaces().Contains(typeof(ISomeType))
    ).ToList();
if (constrs.Count == 0) {
     // No constructors taking a class implementing ISomeType
} else if (constrs.Count == 1) {
     // A single constructor taking a class implementing ISomeType
} else {
     // Multiple constructors - you may need to go through them to decide
     // which one you would prefer to use.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:25:13.963

基类不知道自己的派生类，这就是为什么你不能得到派生类的ctors。您必须从程序集中获取所有类并在其中找到接受 ctor

# jquery - 如何在angularjs中恢复到以前的路由状态

> ID：14122822
> 
> 赞同：0
> 
> 时间：2013-01-02T13:20:25.767
> 
> 标签：jquery, angularjs

我有一个带有几条路线的角度应用程序。其中一个是我在viewContentLoaded 上激活的jquery 插件（bxslider）。如果我走另一条路线然后回来，我在路线视图上所做的所有 jQuery 操作都被清除了，我需要再做一次吗？

有没有办法回到上一个状态的上一个路由（查询插件已经呈现？

```
angTestApp.controller('MyRouteCtrl', function($scope, $timeout) {
  $scope.readyFunction = function(e) {
    $timeout(function(){
      $('.slider').bxSlider();
    });
//

 }
$scope.$on('$viewContentLoaded', $scope.readyFunction);
}); 
```

每次调用路由 MyRoute 时，滑块都会重新渲染，如果我之前已经在该 URL 中并且我目前仍在应用程序中（但在不同的路由中），有什么方法可以获得渲染的版本？（毕竟它是一个哈希标签视图，浏览器不应该在应用程序内刷新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:29:26.600

> 如果我去另一条路线然后回来我在路线视图上所做的所有 jQuery 操作都被清除了，我需要再做一次吗？

是的：

> 每次当前路由变化时，包含的视图都会根据 $route 服务的配置而变化。-- [ng-查看文档](http://docs.angularjs.org/api/ng.directive%3angView)

.

> 有没有办法回到上一个状态的上一个路由（查询插件已经呈现？

不是正常的 ng-view 和路由。当您第一次使用 bxSlider 离开路由时，ng-view 中的 DOM 元素将替换为与新视图关联的 DOM 元素。

也许当您使用 bxSlider 离开视图时，您可以将其“jQuery 移动”到页面某处的某个隐藏的 DOM 元素（例如，在某些页脚区域），然后在您返回路线时将其移回。我认为底线是你必须自己在某个地方“缓存”它，然后自己恢复它。将代码和数据包装在 Angular 服务中可能是最好的。

# wpf - 如何触发特定按钮事件的 ViewModel 命令

> ID：14122823
> 
> 赞同：8
> 
> 时间：2013-01-02T13:20:27.167
> 
> 标签：wpf, button, mvvm, command, mouseevent

ViewModel 上的命令如何被按钮的特定事件调用，例如`MouseDoubleClick`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T15:40:15.537

您可以`EventTrigger`在*System.Windows.Interactivity*命名空间中使用，这是所谓的**Prism**框架的一部分。如果您刚刚开始使用 MVVM，现在不要太在意 Prism，但请记住它以备后用。无论如何，你可以钢化`EventTrigger`

它是这样工作的：

引用程序集*System.Windows.Interactivity.dll*

在 XAML 中，引用命名空间：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

然后在您的 Button 或任何其他控件中，添加一个 EventTrigger，如下所示：

```
<Button Content="Button">
   <i:Interaction.Triggers>
      <i:EventTrigger EventName="MouseDoubleClick">
         <i:InvokeCommandAction Command="{Binding CommandToBindTo}" 
                                CommandParameter="{Binding CommandParameterToBindTo}" />
      </i:EventTrigger>
   </i:Interaction.Triggers>
</Button> 
```

这样，您将事件绑定到DataContext 上的*命令。*

**评论**

为了阐明用法，这里有一个现实生活中的例子，包括 ViewModel。虚构的要求是允许用户在列表中选择一个项目，然后执行一个将所选项目作为参数的命令：

```
<ListBox x:Name="ItemsList" ItemsSource="{Binding Items}" />

<Button Content="Do something with selected item">
   <i:Interaction.Triggers>
      <i:EventTrigger EventName="MouseDoubleClick">
         <i:InvokeCommandAction Command="{Binding DoSomethingCommand}" 
                                CommandParameter="{Binding SelectedItem, 
                                                   ElementName=ItemsList}" />
      </i:EventTrigger>
   </i:Interaction.Triggers>
</Button> 
```

那就是 ViewModel。请注意如何使用命令的参数，在示例中使用`DelegateCommand`对象的通用版本，因为您在每个 MVVM 框架（有时`RelayCommand`）中获取它。此类将所需参数的类型作为通用参数（此处`ItemViewModel`）并需要一个采用相应参数的方法（此处`ExecuteDoSomethingWithItem(ItemViewModel ...)`）。剩下的就是 WPF 魔术：`CommandParameter`在 XAML 中绑定属性的对象将作为函数中的参数传递`Execute(...)`。

```
public class ViewModel
{
    ObservableCollection<ItemViewModel> Items { get; set; }

    public ICommand DoSomethingCommand
    {
        get
        {
            return _doSomethingCommand ??
                   (_doSomethingCommand = new DelegateCommand<ItemViewModel>(ExecuteDoSomethingWithItem));
        }
    }

    private DelegateCommand<ItemViewModel> _doSomethingCommand;

    private void ExecuteDoSomethingWithItem(ItemViewModel itemToDoSomethingWith)
    {
        // Do something
    }

    public ViewModel()
    {
        Items = new ObservableCollection<ItemViewModel>();
        // Fill the collection
    }
} 
```

享受学习 MVVM 的乐趣，这是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:39:29.313

您可以使用附加的命令行为

=> [http://geekswithblogs.net/HouseOfBilz/archive/2009/08/21/adventures-in-mvvm-ndash-generalized-command-behavior-attachments.aspx](http://geekswithblogs.net/HouseOfBilz/archive/2009/08/21/adventures-in-mvvm-ndash-generalized-command-behavior-attachments.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:47:37.660

如果要从开箱即用的 WPF 中使用命令和事件绑定，则需要自己做很多事情。仅使用已经提供命令甚至绑定的现有框架，例如[MVVM Light Toolkit](http://mvvmlight.codeplex.com/)或[Cliburn Micro](http://caliburnmicro.codeplex.com/) ，您可以获得很多好处。

# php - 设置随机播放，不重复

> ID：14122827
> 
> 赞同：4
> 
> 时间：2013-01-02T13:20:34.517
> 
> 标签：php, arrays, random, shuffle

我有一个用于闪存卡的数组，并使用*随机播放*输出 15 张独特的卡片，每张 3 张用于 5 个不同的类别。

我想做的是在同一个网页上为大约十几个人创建这些卡片组，但我不知道的部分是如何制作它，所以每个完整的集合都是独一无二的，并且不会从给定的集合中重复给任何其他用户。

带有简短说明的简短代码示例对我最有帮助。

这是我根据需要修改的代码。真的没有太大变化。

```
<?php
/* original source:
 * 3d10-engine.php
 * by Duane Brien
 */

if (empty($_POST)) {
for ($i = 1; $i < 16; $i++) {
    $numbers['ALL'][] = $i;
}

$picks = array();

$letters = array ('ALL');
foreach ($letters as $letter) {
    for ($i = 0;$i < 10;$i++) {
        shuffle($numbers[$letter]);
        $chunks = array_chunk($numbers[$letter], 5);
        $cards[$i][$letter] = $chunks[0];
        if ($letter == 'N') {
            $cards[$i][$letter][2] = '  '; // Free Space
        }

    }
    foreach ($numbers[$letter] as $number) {
        $balls[] = $letter.$number;
    }
    shuffle($balls);
}

$cardsstr = serialize($cards);
$ballsstr = serialize($balls);
$picksstr = serialize($picks);

} else {
$cards = unserialize($_POST['cardsstr']);
$balls = unserialize($_POST['ballsstr']);
$picks = unserialize($_POST['picksstr']);
array_unshift($picks, array_shift($balls));

echo "<h1>Just Picked: " . $picks[0] . "</h1>";

$cardsstr = serialize($cards);
$ballsstr = serialize($balls);
$picksstr = serialize($picks);
}

?>
Picks : <?php echo implode(',', $picks) ?>
<form method='post'>
<input type='hidden' name='cardsstr' value='<?php echo $cardsstr ?>' />
<input type='hidden' name='ballsstr' value='<?php echo $ballsstr ?>' />
<input type='hidden' name='picksstr' value='<?php echo $picksstr ?>' />
<input type='submit' name='cards' value='next number' />
</form>
<a href="3d10-engine.php">Start Over</a>
<?php

foreach ($cards as $card) {
echo "<table border='1'>";
echo "<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>";
for ($i = 0; $i < 5; $i++) {
    echo "<tr><td>" . $card['B'][$i] . "</td><td>" .$card['I'][$i]  . "</td><td>" . $card['N'][$i] . "</td>";
    echo "<td>" . $card['G'][$i] . "</td><td>" . $card['O'][$i] . "</td></tr>";
}
echo "</table>";
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:26:06.397

由于您在每组中都有更多选项，因此随机选择足以获得独特的最终结果。我的意思是不要让这件事变得更复杂。

试试这个样本

```
<?php
//Initialize your 5 sets here
$numbers['B'] = range(1,15);
$numbers['I'] = range(16,30);
$numbers['N'] = range(31,45);
$numbers['G'] = range(45,60);
$numbers['O'] = range(61,75);

//My Assumption is you to pick 3 from each 

while(TRUE){
 $rand = rand(0,5);
 if(count($numbers_B) < 3 && !in_array($numbers['B'][$rand]){
   $numbers_B[] = $numbers['B'][$rand];
 }

 $rand = rand(0,5);
 if(count($numbers_I) < 3 && !in_array($numbers['I'][$rand]){
   $numbers_I[] = $numbers['I'][$rand];
 }
 $rand = rand(0,5);
 if(count($numbers_N) < 3 && !in_array($numbers['N'][$rand]){
   $numbers_N[] = $numbers['N'][$rand];
 }
 $rand = rand(0,5);
 if(count($numbers_G) < 3 && !in_array($numbers['G'][$rand]){
   $numbers_G[] = $numbers['G'][$rand];
 }
 $rand = rand(0,5);
 if(count($numbers_O) < 3 && !in_array($numbers['O'][$rand]){
   $numbers_O[] = $numbers['O'][$rand];
 }

if( count($numbers_B) == 3 && count($numbers_I) == 3 && count($numbers_N) == 3 && 

count($numbers_G) == 3 && count($numbers_O) == 3 ){
  break;
 }
    }
    $result = $numbers_B + $numbers_I + $numbers_N + $numbers_G + $numbers_O; ?> 
```

这里 $result 值应该是唯一的，并且我认为集合的数量是恒定的。如果它是动态的，那么用二维数组尝试相同的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:29:47.673

只需将准备好的集合存储在一个数组中，然后使用已经（in_array 函数）检查每个随机播放是否存在于数组中，如果存在则再次随机播放。

# asp.net - DBNull 抛出错误

> ID：14122829
> 
> 赞同：0
> 
> 时间：2013-01-02T13:20:38.120
> 
> 标签：asp.net

我正在检查是否发生 DBNull。

C#代码：

```
tbDuration.Text = (string)MyReader["TDuration"]==DBNull?"":(string)MyReader["TDuration"]; 
```

但我在 DBNull 上得到一个错误：

> 错误 4“System.DBNull”是一个“类型”，但用作“变量”C:\Visual Studio

如何检查 DBNull？

问候

茶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:22:04.763

`DBNull`是一种类型。您正在寻找的是该类型的静态成员：`DBNull.Value`. 像这样的东西：

```
tbDuration.Text = MyReader["TDuration"] == DBNull.Value ? "" : (string)MyReader["TDuration"]; 
```

**注意：**`string`出于比较的目的， 您也不想强制转换为 a 。`DBNull.Value`将适用于 的实际结果`MyReader[]`，但如果您投射它，则不会。在验证它不为空之后，然后你将它转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:23:51.960

使用**[DBNull.Value](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)**检查空值。

```
tbDuration.Text = 
MyReader["TDuration"]==DBNull.Value?"":(string)MyReader["TDuration"] 
```

或者，您可以使用：

```
tbDuration.Text = 
DBNull.Value.Equals(MyReader["TDuration"]) ?"":(string)MyReader["TDuration"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:21:54.850

您应该检查[`DBNull.Value`](http://msdn.microsoft.com/en-gb/library/system.dbnull.value.aspx)，而不是`DBNull`直接检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:25:44.347

**[`System.DbNull.Value`](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)**, 是对 的实例的有效引用`System.DbNull`。

因此，您可以检查`DBNull`.

`DbNull.Value`所以它不仅应该是`DbNull`

```
(string)MyReader["TDuration"]==DBNull.Value?"":(string)MyReader["TDuration"]; 
```

# c# - XAML 转换器不起作用

> ID：14122830
> 
> 赞同：0
> 
> 时间：2013-01-02T13:20:39.570
> 
> 标签：c#, xaml, windows-8, ivalueconverter

我有一个`ScreenHeightConverter`，并且想在`ItemHeight`一个上使用它`GridView`。

但是我不知道我是否正确使用它，因为如果我调试它，它甚至不会跳转到转换器。

**我的代码：**

```
public class ScreenHeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        double ScreenHeight = (int)Window.Current.Bounds.Height;
        double factor = 1050/(double)value;
        return (int)(ScreenHeight/factor);
    }
}

<VariableSizedWrapGrid Margin="3" ItemHeight="{Binding '80',Converter={StaticResource ScreenHeightConverter}}" ItemWidth="255"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:31:04.807

您`Binding`的指定方式不正确。

在您当前指定的方式中，您说的是在当前通过该属性设置/继承的对象上`Binding`找到一个名为 80 的属性（即）并使用它的值。`Path``DataContext`

（属性名称不能以数字开头，我认为引用的语法表示`Path`无论如何可能是错误的......因此`Binding`是错误的......并且您的转换器不会被调用）。

要确认这一点，您可以在调试应用程序时查看 Visual Studio 中的输出窗口...它应该会通知您有错误的绑定...有关详细信息，请参阅以下链接：

*   [http://www.zagstudio.com/blog/486#.UOQ3qofZbKE](http://www.zagstudio.com/blog/486#.UOQ3qofZbKE)
*   [PresentationTraceSources.TraceLevel=High 不会将任何信息打印到输出窗口的任何原因？](https://stackoverflow.com/questions/2802662/any-reason-why-presentationtracesources-tracelevel-high-would-not-print-any-info)

* * *

我相信你的意图是有一个字面常量值传递给你的转换器以计算一个合适的值。

而不是使用 a `Converter`，您应该考虑使用 a `MarkupExtension`......是的，您可以通过绑定到任意对象并将您的 80 值作为 a `ConverterParameter`.... 传递来使用转换器“捏造”它。但事实并非如此最好的方法和一个大杂烩。

以下是一些关于编写 MarkupExtension 的链接：

*   [http://www.codeproject.com/Articles/140618/WPF-Tutorial-TypeConverter-Markup-Extension](http://www.codeproject.com/Articles/140618/WPF-Tutorial-TypeConverter-Markup-Extension)
*   [http://drwpf.com/blog/category/markup-extensions/](http://drwpf.com/blog/category/markup-extensions/)
*   [http://miteshsureja.blogspot.co.uk/2011/07/custom-markup-extension-in-wpf.html](http://miteshsureja.blogspot.co.uk/2011/07/custom-markup-extension-in-wpf.html)
*   [http://10rem.net/blog/2011/03/09/creating-a-custom-markup-extension-in-wpf-and-soon-silverlight](http://10rem.net/blog/2011/03/09/creating-a-custom-markup-extension-in-wpf-and-soon-silverlight)

...因此创建一个`MarkupExtension`派生类，例如 HeightAdjustedExtension : MarkupExtension .... 在`ProvideValue`可以汇集传入数据的扩展上实现方法和“属性”。

...那么你可以这样使用它...

```
ItemHeight="{myns:HeightAdjusted 80}" 
```

这未经测试，但类似这样的东西（给你一些可以玩的东西）：

```
public class HeightAdjustedExtension : MarkupExtension
{
    [ConstructorArgument("height")]
    public string Height { get; set; }

    public HeightAdjustedExtension () { }

    public HeightAdjustedExtension (string height)
    {
        Height = height;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        int theheight;
        int.TryParse( Height, out theheight );

        double ScreenHeight = (int)Window.Current.Bounds.Height;
        double factor = 1050/(double)theheight ;
        return (int)(ScreenHeight/factor);        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:25:40.970

您需要为转换器创建资源。

首先，您需要添加[命名空间](http://msdn.microsoft.com/en-us/library/ms747086.aspx)。例子

```
xmlns:converter="clr-namespace:SDKSample;assembly=SDKSampleLibrary" 
```

接下来，您需要将资源添加到适当的位置（`UserControl`、`Window`或`App`其他对象）

```
<UserControl.Resources> 
 <converter:ScreenHeightConverter x:key="screenHeightConverter"/>
</UserControl.Resources> 
```

最后，您可以通过关键属性值引用静态资源。`"screenHeightConverter"`在这种情况下。

之后，您可以在 Binding 中使用静态资源引用

```
<VariableSizedWrapGrid Margin="3" ItemHeight="{Binding '80',Converter={StaticResource screenHeightConverter}}" ItemWidth="255"/> 
```

# excel - 我们可以在 VBScript 中重置 For 循环计数器吗？

> ID：14122838
> 
> 赞同：1
> 
> 时间：2013-01-02T13:21:25.233
> 
> 标签：excel, vbscript, vba

我有一个数组说：`VMHArray`=（12,22,34,4）现在有另一个`Arraylist`对象说`ArrayListTaskDetails`将数据保存为（12,55,44,4,12,22,21,107,43,22,34）现在下面的代码我写了从列表中删除`ArrayListTaskDetails`不存在于`VMHArray`.

***代码***

```
Dim Flag : Flag = true
Dim Counter
For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 step 4

    Counter = 0
    Do while Flag

        If VMHArray(Counter) <> ArrayListTaskDetails (IndexSearch) Then

          ArrayListTaskDetails.RemoveRange IndexSearch, 4
          Flag = False

        End If
    Counter = Counter + 1
    Loop

Next 
```

现在假设在 处找到匹配项`IndexSearch = 0`，因此它将删除位置处的元素`0,1,2,3`- 非常好。但是由于移除和使`ArrayList`对象按功能连续，其他元素将`4`向左移动。现在问题`For Loop`已经增加了 4，所以它将从下一次迭代开始`location 4`。因此，现在`0 location`数组列表中的新元素永远没有机会测试与`VMHArray`数组元素的相等性。我们是否可以在不丢失预期操作的情况下处理这种情况，或者无论如何我们可以将`For Loop`计数器设置为其直接位置，在该位置找到最近的匹配并删除了 4 个元素。？

如果有任何问题了解问题，请告诉我！

***编辑*** `Go to`将不起作用

**代码（根据@Ankit 的建议）**

```
Option Explicit

Dim Flag : Flag = true
Dim Counter
Dim VMHArray : VMHArray = Array(12,22,34,4) 
Dim ArrayListTaskDetails : Set ArrayListTaskDetails = CreateObject("System.Collections.ArrayList")

    ArrayListTaskDetails.Add(45)
    ArrayListTaskDetails.Add(4)
    ArrayListTaskDetails.Add(22)
    ArrayListTaskDetails.Add(4)
    ArrayListTaskDetails.Add(45)
    ArrayListTaskDetails.Add(20)
    ArrayListTaskDetails.Add(12)
    ArrayListTaskDetails.Add(35)
    ArrayListTaskDetails.Add(34)

    Restart:
For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 step 4

    Counter = 0
    Do while Flag

        If VMHArray(Counter) <> ArrayListTaskDetails (IndexSearch) Then

          ArrayListTaskDetails.RemoveRange IndexSearch, 4
          Goto Restart
          Flag = False

        End If
    Counter = Counter + 1
    Loop

Next

MsgBox(Join(ArrayListTaskDetails.ToArray()),"$") 
```

![错误](../Images/69ad432d84584b84c52926b42928abf5.png)

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:18:40.657

解决问题的两个思路：

1.  使用字典检查要保留的项目
2.  向后循环

在代码中：

```
Option Explicit

Dim alSrc : Set alSrc = CreateObject("System.Collections.ArrayList")
Dim sE
For Each sE In Split("a x x x b x x x c x x x d x x x e x x x f x x x a x x x")
    alSrc.Add sE
Next
WScript.Echo "alSrc:", Join(alSrc.ToArray(), ".")
Dim aKeep   : aKeep       = Split("a d")
WScript.Echo "aKeep:", Join(aKeep, ".")
Dim dicKeep : Set dicKeep = CreateObject("Scripting.Dictionary")
For Each sE In aKeep
    dicKeep(sE) = 0
Next
WScript.Echo "dicKeep:", Join(dicKeep.Keys(), ".")
Dim nI
For nI = alSrc.Count - 4 To 0 Step -4
    sE = alSrc(nI)
    If Not dicKeep.Exists(sE) Then
       alSrc.RemoveRange nI, 4
    End If
    WScript.Echo sE, nI, Join(alSrc.ToArray(), ".")
Next
WScript.Echo "alSrc:", Join(alSrc.ToArray(), ".") 
```

输出：

```
alSrc: a.x.x.x.b.x.x.x.c.x.x.x.d.x.x.x.e.x.x.x.f.x.x.x.a.x.x.x
aKeep: a.d
dicKeep: a.d
a 24 a.x.x.x.b.x.x.x.c.x.x.x.d.x.x.x.e.x.x.x.f.x.x.x.a.x.x.x
f 20 a.x.x.x.b.x.x.x.c.x.x.x.d.x.x.x.e.x.x.x.a.x.x.x
e 16 a.x.x.x.b.x.x.x.c.x.x.x.d.x.x.x.a.x.x.x
d 12 a.x.x.x.b.x.x.x.c.x.x.x.d.x.x.x.a.x.x.x
c 8 a.x.x.x.b.x.x.x.d.x.x.x.a.x.x.x
b 4 a.x.x.x.d.x.x.x.a.x.x.x
a 0 a.x.x.x.d.x.x.x.a.x.x.x
alSrc: a.x.x.x.d.x.x.x.a.x.x.x 
```

**至于 .Count - ? 的奥秘：**

```
1 2 3 4 5 6 7 8 - Count 1 - 8
0 1 2 3 4 5 6 7 - Idx   0 - 7
A x x x B x x x - Count (8) - Step (4) = Pos to check (4)
                  Count (8) - Step + 1 (5) = Not the pos to check (3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:04:04.543

重置`For loop counter`意味着你有点不让它`iterate`。您必须非常小心，以免遇到`infinite loop`. 坦率地说，没有阅读你的大文本。但是查看您的代码和标题，请尝试以下操作：

```
For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 step 4
    Counter = 0
    Do while Flag
       If VMHArray(Counter) = ArrayListTaskDetails (IndexSearch) Then
          ArrayListTaskDetails.RemoveRange IndexSearch, 4
          Flag = False
          If IndexSearch >= 4 then 
            IndexSearch = IndexSearch - 4 '-- add this to go back to previous index
          End If
       End If
       Counter = Counter + 1
    Loop
Next IndexSearch 
```

# html - 做轮廓容器的正确方法？

> ID：14122844
> 
> 赞同：1
> 
> 时间：2013-01-02T13:21:39.333
> 
> 标签：html, css, user-interface

我想做一个在其上部带有一些文本的轮廓容器。如果可以避免的话，我不想使用表格。容器应如下所示：

![在此处输入图像描述](../Images/df4a8f71bd6ac78a81072236633f7724.png)

我可以使用 html5，但只能使用 IE10 的支持集。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:27:02.350

这个[**演示**](http://jsfiddle.net/mwv6L/6)应该让你开始。

将容器定位`relative`和`h1`定位`absolute`，使其可以重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:35:49.880

您可以使用两种不同的元素来实现这一点。第一个元素将包含在顶部显示为标题的第二个元素。您需要将`position`第一个元素的 设置为`relative`，将第二个元素设置为`absolute`。然后使用`left`,`top`或`bottom`,`right`定位内部元素。还要确保第二个元素的背景颜色与第一个元素的父元素的背景颜色匹配。

### [试试这个工作小提琴](http://jsfiddle.net/qNwru/)

### 示例代码

```
.main {
    margin-top:20px;
    border: 4px solid #444;
    position:relative;
    padding:10px;
    padding-top:30px
}

.main .title {
    background:white;
    position:absolute;
    top:-25px;
    left:10px;
    padding:5px;
    font-size:26px;
    font-weight:bold;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:28:45.810

这是使用类似的东西`fieldset`：

```
<fieldset>

    <legend>Category</legend>    

    <p>CONTENT</p>
    <p>CONTENT</p>
    <p>CONTENT</p>
    <p>CONTENT</p>

</fieldset> 
```

jsFiddle：http: [//jsfiddle.net/leniel/scUzR/](http://jsfiddle.net/leniel/scUzR/)

# java - 如何使用休眠会话方法更新映射实体类的实例？

> ID：14122845
> 
> 赞同：2
> 
> 时间：2013-01-02T13:21:41.567
> 
> 标签：java, hibernate, transient

我需要更新 ' `from`' 和 ' `to`' 的两个字段`bp`。`p`也与`bp`. 自动冲洗被禁用，所以我必须明确地进行冲洗。

```
 Query q = session
                .createQuery(" select distinct bp from BP bp "
                        + " join fetch bp.p "
                        + " where bp.id = 2");

        bp = (BP) q.list().get(0);
        session.getTransaction().commit();

        session = test.services.HibernateUtil
                .getSessionFactory().getCurrentSession();
        session.beginTransaction();
        bp.setFrom(new Date());
        bp.setTo(new Date());
        session.update(bp);
        session.flush();
        session.getTransaction().commit(); 
```

当我运行上面的代码时，它显示以下异常：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: model.P 
```

`p`在刷新之前我无法保存，因为`save()`方法尝试插入违反`unique key constraint`.

当我尝试在刷新`p`之前更新时，出现以下异常：

```
java.lang.NullPointerException
    at org.hibernate.type.LongType.next(LongType.java:79)
    at org.hibernate.engine.Versioning.increment(Versioning.java:131) 
```

有什么办法可以使状态`p`持久化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:52:23.210

您能否在刷新会话之前尝试事务提交。

它应该工作。

# php - codeIgniter : 登录后丢失会话数据

> ID：14122848
> 
> 赞同：5
> 
> 时间：2013-01-02T13:21:59.743
> 
> 标签：php, codeigniter, session

在登录后的codeigniter中，我将所有数据存储到会话中并重定向到论坛控制器。但是我在论坛控制器中失去了所有价值。

当我从会话中减少一些值后尝试时，它工作得很好。

**现在我的问题是**——为什么会这样？在 codeIgniter 的会话中存储的值是否有上限？

即使我尝试搜索我发现

```
redirect('forum', 'refresh'); 
```

但它不起作用。而且我的项目开发了一半，所以我不能使用codeignter的“PHP Native Session class”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:30:13.677

默认情况下，CodeIgniter 将会话数据存储在 cookie 中，其大小上限为 4KB。如果您尝试在会话中存储超过 4KB 的数据，您将开始遇到问题。

最简单的解决方案可能是将会话详细信息存储在数据库中。[CodeIgniter 会话文档](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)详细介绍了将会话存储在数据库中的过程——这是一个设置表和更改几个配置参数的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T13:31:40.227

CI 会话将所有内容存储在 cookie 中，并带有可选的加密。所以[显然](https://stackoverflow.com/questions/13213199/php-session-and-cookie-values-maximum-length)有可能达到这个极限。那就是如果您存储类似 2K 字节的内容；如果只是登录信息，那应该不是问题。如果您确实使用了那么大的东西，那么我想您不应该使用。

无论如何，我认为这不是问题，因为我遇到了类似的问题（我不记得确切的原因）。我找到的解决方案是使用 Native PHP Session 类，并为其添加一个方法：all_userdata 或任何它被调用的方法。有了这个，一切都像正常的 Session 一样工作（无需更改任何内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T18:14:58.803

**说明**: 默认情况下，CodeIgniter 将会话数据存储在 cookie 中，根据浏览器的大小，其大小上限为 2KB-4KB。如果您尝试在会话中存储超过 4KB 的数据，您将开始遇到问题。

**解决方案**：最简单的解决方案是将会话详细信息存储在 DB 中。CodeIgniter[会话文档](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)详细说明了将会话存储在 DB 中的过程。只需设置一个表，并更改几个配置参数。以下是您需要做的更改-

更新配置文件（application/config/config.php）中的以下变量：

```
$config['sess_use_database'] = TRUE;
$config['sess_table_name']   = 'ci_sessions'; 
```

创建了用于存储会话的新表-

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(45) DEFAULT '0' NOT NULL,
user_agent varchar(120) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id),
KEY `last_activity_idx` (`last_activity`)
); 
```

欲了解更多信息：http: [//goo.gl/YPllj0](http://goo.gl/YPllj0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T09:18:01.937

就我而言，经过一些测试（在 localhost 中使用 https 和 http）后，该问题出现了错误，并且没有正确设置 $config['cookie_secure']，因此您可以尝试在 config.php 中进行更改：

```
$config['cookie_secure']    = FALSE; // if is not under https, or true if you use https 
```

干杯!

# android - Android：如何在自定义视图的 onDraw() 方法中绘制另一个视图

> ID：14122851
> 
> 赞同：0
> 
> 时间：2013-01-02T13:22:10.413
> 
> 标签：android, user-interface, drawing

我需要创建一个能够在不同视图之间滑动的自定义视图。我不能使用 ViewPager 等，因为它没有我需要的过渡和功能。

我从这个开始：

```
public final class DynamicSwipeView extends View {

    private View view;

    public DynamicSwipeView(Context context) {
        super(context);
    }

    public void setPage(View view) {
        this.view = view;
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        if (view != null) {
            view.draw(canvas);
        }
    }
} 
```

但是没有绘制另一个视图（如果直接使用则有效）。当我在构造函数中为此滑动视图分配背景颜色时，它会以该颜色而不是白色显示，但仍然不会绘制另一个视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-14T01:27:14.900

这是我正在使用的用 Kotlin 编写的版本，它运行良好，在 API 19、25 和 28 上进行了测试。

我将它用于浮动标题行`TableLayout`，我想将它锚定到屏幕顶部。我分配`viewToDraw`了一个，`ViewTreeObserver.onGlobalLayoutListener`所以我知道标题行是布局的。这对我来说很方便，因为无论如何我都在听视图树，但是可以在必要时将其带入`CopyView`to `invalidate()`。标题行和 中的`CopyView`项目设置为固定高度，但您也可以扩展此以复制视图尺寸。

```
class CopyView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : View(context, attrs, defStyleAttr) {

    var viewToDraw: View? = null
        set(value) {
            field = value
            background = value?.background
            invalidate()
        }

    override fun onDraw(canvas: Canvas?) {
        viewToDraw?.draw(canvas)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:02:34.210

尝试这个：

```
public final class DynamicSwipeView extends View {

    private View view;

    public DynamicSwipeView(Context context) {
        super(context);
    }

    public void setPage(View view) {
        this.view = view;
        this.invalidate();
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        super.draw(canvas);
        if (view != null) {
            view.draw(canvas);
        }
    }
} 
```

这只是一个建议，我没有尝试过。

如果它不起作用，您应该使用视图列表并管理这些视图的可见性（当前视图 = VISIBLE，其他视图已消失）。这样做可能更容易。

# python - Blaze 中的“合成维度”是什么？

> ID：14122852
> 
> 赞同：5
> 
> 时间：2013-01-02T13:22:14.383
> 
> 标签：python, numpy, blaze

Blaze 自述文件（此处为[https://github.com/ContinuumIO/blaze](https://github.com/ContinuumIO/blaze)）描述了对 NumPy 的许多改进，包括“合成维度”。我四处寻找，但无法找出它们是什么。

有人可以启发我吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T15:53:38.470

首先要注意几点。第一，我从事该项目，第二，这些功能仍处于规划阶段，因此目前尚未实施。

据说 Blaze 中的“综合维度”很像数据库中的派生列。它是根据其他行或列的表达式公式计算的值，但不存在于物理内存或磁盘中。

![合成尺寸](../Images/dcbabe1d932cba5ab0fa67cd23813592.png)

在 Blaze 中，我们试图使此类列（尤其是对于列式数据存储）能够被下一代 ufunc 对象使用，这些对象能够从合成维度和物理维度计算计算中的值。

希望能回答问题！

# php - php - 许多可选参数

> ID：14122856
> 
> 赞同：3
> 
> 时间：2013-01-02T13:22:49.290
> 
> 标签：php, function, parameters

> **可能重复：**
> [有什么方法可以在 PHP 中指定可选参数值？](https://stackoverflow.com/questions/690599/any-way-to-specify-optional-parameter-values-in-php)
> [PHP 函数 - 忽略一些默认参数](https://stackoverflow.com/questions/9541776/php-function-ignore-some-default-parameters)

假设我有这样的功能：

```
function foo($name = "john", $surname = "smith") { ... } 
```

我这样打电话：

```
$test = foo("abc", "def"); 
```

现在想象一下，我想跳过名字而只使用姓氏，这如何实现？如果我只做 $test = foo("def"); 编译器怎么知道我指的是姓氏而不是名字？我知道它可以通过传递 NULL 来完成，但我需要这个来做类似这样的事情：

```
$test = foo($_POST['name'], $_POST['surname']); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:28:31.007

你可以试试这个-

```
$num_args = func_num_args();
if($num_args == 1)
 $surname = func_get_arg(1);
else
 $surname = func_get_arg(2);
 $name = func_get_arg(1); 
```

请在使用前进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:26:19.993

你的代码

```
$test = foo($_POST['name'], $_POST['surname']); 
```

如果第一个参数为空，也会在第一个参数中传递 NULL，这样编译器就会知道它取决于第二个参数。在参数列表中有 a`comma`已经告诉 PHP 这里有两个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:27:07.487

您可以通过将空字符串传递给函数并在函数中检测传递的参数是否为空字符串，如果是，则将其替换为默认值。这将使您的函数调用如下：

```
foo('','lastname'); 
```

您可以将这几行添加到函数的开头，以检测是否已将空字符串作为参数传递：

```
function foo($name = "john", $surname = "smith") { 
    if($name==='') { $name = 'john'}
    //more code 
    ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:29:47.607

我通常会这样做：

```
function foo($parameters = array())
{
    print_r($parameters);
}

foo($_POST); //will output the array 
```

当我期望超过 3 个参数时，这就是我使用的。

但是您也可以使用以下内容：

```
function foo()
{
    $args = func_get_args();  
    foreach ($args as $arg) {  
        echo "$arg \n";  
    }
} 
```

# wpf - xmlns="http://schemas..." 的意义是什么？它需要互联网访问吗？

> ID：14122863
> 
> 赞同：3
> 
> 时间：2013-01-02T13:23:11.787
> 
> 标签：wpf, xaml, namespaces, schema, xml-namespaces

> **可能重复：**
> [没有互联网连接，浏览器如何工作和理解 xmlns 属性？](https://stackoverflow.com/questions/13539253/without-internet-connection-how-xmlns-attribute-can-work-and-understand-by-brow)

使用`xmlns="http://schemas..."`而不是`xmlns="clr-namespace:..."`意味着您需要**互联网访问**来引用资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:24:21.147

不，你没有。有关 xmlns 的解释，请参阅评论中引用的帖子。除此之外：如果您有一个 .Net 组件并希望使用此命名空间语法使其可用于 XAML，您可以通过在定义命名空间的位置设置此属性来实现：

```
<Assembly: System.Windows.Markup.XmlnsDefinition("http://wpfglue.wordpress.com/commanding", "WPFGlue.Commanding")> 
<Assembly: System.Windows.Markup.XmlnsPrefix("http://wpfglue.wordpress.com/commanding", "c")> 

Namespace Commanding
    ... 
```

# ios - 如何检查两个 NSMutableArray 是否具有相同的整数而不考虑顺序

> ID：14122869
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:23:43.300
> 
> 标签：ios, algorithm

示例：NSMutable *Array1 包含 1,2。NSMutable *Array2 包含 2,1。

当我们比较这两个数组时，上述条件应该返回 True。请帮我这样做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:28:23.257

你可以这样写：

```
BOOL areEqual = array1.count == array2.count;
if (areEqual) {
  NSMutableArray *array3 = [NSMutableArray arrayWithArray:array2];
  for (NSNumber *number in array1) {
    [array3 removeObject:number];
  }
  if (array3.count > 0) {
    areEqual = NO;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:33:00.647

首先像这样按升序对两个数组进行排序

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: YES];
[array1 sortUsingDescriptors:[NSArray arrayWithObject: sortOrder]];
[array2 sortUsingDescriptors:[NSArray arrayWithObject: sortOrder]]; 
```

然后简单地将数组比较为

```
return ([array1 isEqualToArray:array2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:36:35.553

试试这个：

在这里，我返回 BOOL，并打印为 1（是）、0（否）。如果要返回 True 和 False，请在 comparyArray:withArray: 方法中通过 if-else 重新运行。

```
- (BOOL)compareArray:(NSArray *)first withArray:(NSArray *)second{
    first=[first sortedArrayUsingSelector:@selector(compare:)];
    second=[second sortedArrayUsingSelector:@selector(compare:)];
    return [first isEqualToArray:second];
}

- (void)anyMethod{
    NSArray *arr1=@[@1,@2,@3];
    NSArray *arr2=@[@3,@1,@21];        
    NSLog(@"Compare result is %d",[self compareArray:arr1 withArray:arr2]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:47:15.703

如果您可以假设删除了重复项（通过`NSArray`> `NSSet`），则可以按如下方式比较数组：

```
BOOL equal = [[NSSet setWithArray:array1] isEqualToSet:[NSSet setWithArray:array2]]; 
```

还要考虑数组的大小。

# mysql - LOAD DATA INFILE 和 max_binlog_cache_size 的问题

> ID：14122870
> 
> 赞同：0
> 
> 时间：2013-01-02T13:23:45.453
> 
> 标签：mysql, download

我在将数据导入 MySQL 数据库时遇到问题。我有 2 个文件（每个 5 GB）要导入 MySQL 数据库。

当我编码时`LOAD DATA INFILE 'C:/user/user/desktop/airac.so-' INTO airac01 FIELDS TERMINATED BY ' ' LINES TERMINATED BY '\n'`；我有以下错误：

```
Multi-statement transaction required more than 'max_binlog_cache_size' bytes of storage; increase this mysql variable and try again. 
```

我试图在我的.ini 文件中找到它来增加但我没有找到它。有谁知道在这种情况下该怎么办？有没有办法分割加载文件或增加`max_binlog_cache_size`变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:30:21.883

此外，您必须为客户端和守护进程 mysqld 服务器更改它。更改该部分下的`my.cnf`or`my.ini`文件`[mysqld]`并设置`max_binlog_cache_size=10000M`，或者您可以在连接到同一服务器的 MySQL 控制台中运行这些命令：

```
set global net_buffer_length=10000000000; 
set global max_binlog_cache_size=10000000000; 
```

为数据包大小使用一个非常大的值，因为它们以字节为单位，然后重新启动您的 MySQL 服务器。

# php - 如何在 else 函数中使用 if 函数

> ID：14122882
> 
> 赞同：2
> 
> 时间：2013-01-02T13:24:18.887
> 
> 标签：php, javascript, preg-match

我试图在命令的功能中使用一个`if`功能。`else``preg_match`

`$month1data`是从 CURL 中获取的，并且已经检查过可以正常工作。

以下代码是：

```
global $attempt;
$attempt = mysql_escape_string($_GET['attempt']);

if (preg_match('/<td colspan=8(.*)<\/table/s', $month1data, $matches)) {
    //Content found do stuff here

    unset ($ch);
    unset ($cache);
    unset ($firstmonthdata);
    unset ($matches);
} else { // start else preg match
    if ($attempt = '3') { //start if attempt = 3

        echo 'failed 3 times - showing error';
        echo '<script type="text/javascript">
        <!--
        window.location = "http://www.website.com/error.php?error=2"
        //-->
        </script>';

    } // end if attempt = 3
    else { //start if attempt dont = 3

        echo 'keep trying for 3 times';
        $attempt = $attempt +1;
        echo '<script type="text/javascript">
        <!--
        window.location = "http://www.website.com/page.php?email=' . $email . '&password=' . $password . '&attempt=' . $attempt . '"
        //-->
        </script>';
    }// end if attempt dont 3 else
} // end else preg match 
```

但是，无论何时加载页面，它都会直接指向错误页面：

```
"http://www.website.com/error.php?error=2" 
```

我查看了其他几个帖子，但看不出有什么问题，是否可以以这种方式实现这些方法，或者只是缺少一些东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:27:08.277

它应该是：

```
if ($attempt === '3') {
             ^^^ 
```

您分配`3`给`$attempt`.

甚至更好，因为似乎没有涉及数据库：

```
$attempt = (int) $_GET['attempt'];

...

if ($attempt === 3) { 
```

**编辑：**除此之外，您最好使用会话进行这种尝试检查，因为访问者可以轻松地操纵查询字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:28:34.347

以下

```
if ($attempt = '3') 
```

应该

```
if ($attempt == '3') 
```

# f# - 如何获取对 F# 中不带参数的函数的引用？

> ID：14122885
> 
> 赞同：1
> 
> 时间：2013-01-02T13:24:25.803
> 
> 标签：f#, functional-programming, memoization, f#-3.0

我有时需要获取 F# 中零参数函数的函数本身，而不是值，例如用于记忆。即，我有这个：

```
let memoize (f: 'a -> 'b) =
    let dict = new Dictionary<'a, 'b>()
    let memoizedFunc (input: 'a) =
        match dict.TryGetValue(input) with
        | true, x -> x
        | false, _ ->
            let answer = f input
            dict.Add(input, answer)
            answer
    memoizedFunc 
```

这完美地工作，但现在我有以下功能：

```
let private getDataSlowOperation =
    // implementation 
```

当我试图记住它时，它给出了类型不匹配（本质上是返回类型`getDataSlowOperation`和`'a`类型之间的不匹配）。我可以通过如下改变函数来解决这个问题：

```
let private getDataSlowOperation bogus =
    // implementation 
```

现在这可行，但是必须更改函数签名才能使 memoization 工作似乎很奇怪：

```
let memoGetDataSlowOperation = memoize getDataSlowOperation 
```

我已经尝试过内联`fun`声明，但这当然会创建一个新的匿名函数，并且记忆化不适用于它。任何想法如何解决这个问题？我忘记了任何关键字/运算符吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T13:29:57.373

你定义的不是一个函数，它只是一个值。

为了将它定义为一个函数，你可以这样写：

```
let private getDataSlowOperation() =
    // implementation 
```

**更新**

总结讨论：

*   这是将其编写为函数的正确方法，但是代码仍然无法工作，但这是一个不同的问题。

*   代码将在运行时失败，因为`()`编译为`null`并使用不能`null`用于键的字典。您可以改用地图。

*   John 指出，没有参数的函数的记忆是没有意义的，我同意。

*   尽管如此，如果您将 Dictionary 用于带参数的函数，您将遇到与编译为 的值相同的问题`null`，即：`None`

# javascript - 使用dojo进行表单验证时如何处理回调

> ID：14122886
> 
> 赞同：0
> 
> 时间：2013-01-02T13:24:28.610
> 
> 标签：javascript, dojo

我在我的网络应用程序中使用 dojo。在页面提交时，需要进行一些后端验证。所以我用

```
<struts:form id="myForm" name="myForm" theme="simple" action="Confirm" onsubmit="return verifySubmit();" enctype="multipart/form-data"> 
```

我在 verifySubmit 方法中使用了发布调用。由于 dojo 调用是异步发生的，因此页面不会等待 ajax 调用。

dojo.event.topic.publish('/verifyVersion');

有没有办法处理这个回调？

# java - 需要帮助清除我的摇摆应用程序中的某些疑虑

> ID：14122890
> 
> 赞同：0
> 
> 时间：2013-01-02T13:24:44.213
> 
> 标签：java, swing, graphics, graphics2d

下面是一个简单的摇摆应用程序，我在其中试验了某些自定义技术。代码如下：-

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ThemeComponents extends JFrame{
  public static void main(String args[])
  {
    SwingUtilities.invokeLater(new Runnable(){public void run(){new    ThemeComponents();}});
  }

  public ThemeComponents()
  {
    super("HACK 1:Creating Image Themed Components ");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new FlowLayout());
    CustomPanel p1=new CustomPanel();
    p1.add(new CustomLabel());
    add(p1);
    pack();
    setVisible(true);
  }
}

class CustomPanel extends JPanel
{
  BufferedImage img;
  CustomPanel()
  {
    try
    {
      img=ImageIO.read(new File("src/background.jpg"));
    } catch(IOException e){
      System.out.println("Error in loading background image "+e);
    }
  }
  public void paintComponent(Graphics g)
  {
    g.drawImage(img,0,0,getWidth(),getHeight(),null);
  }
  public Dimension getPreferredSize()
  {
    return new Dimension(img.getWidth(),img.getHeight());
  }
}

class CustomLabel extends JLabel
{
  ImageIcon img;
  CustomLabel ()
  {
    img=new ImageIcon("src/tornado.gif");

    setSize(img.getIconWidth(),getHeight());
    setIcon((Icon) img);
    //setOpaque(false);
    //setIconTextGap(0);
    setLocation(10,10);
  }
} 
```

现在我有以下问题：-

`setLayout(null)`1）当我在我的主类中将布局设置为 null时，`ThemeComponents`为什么只有标题栏的框架大小会缩小为 null ？我希望它采用`CustomPanel`我用于`pack()`框架的大小。（使用诸如 flowlayout、borderlayout 之类的布局但是产生正确的输出）

2）`getPreferredSize()`更好地用于设置组件的大小而不是。`setPreferredSize()`实际上我没有发现它们之间有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:58:34.117

1.  如果您使用`null`-layout，首选大小将返回 (0,0)，因此您只会看到标题栏。`pack()`验证您`JFrame`的大小，然后将大小设置`JFrame`为内容窗格的首选大小（即 0,0），并为标题栏、菜单等添加所需的空间...

2.  您很可能应该避免调用`setPreferredSize()`，而是覆盖`getPreferredSize()`. 调用`setPreferredSize()`留给其他人修改该值的可能性。在这种情况下，这可能意味着首选大小不是组件的固有部分，因此您不需要调用`setPreferredSize()`. 虽然覆盖`getPreferredSize()`可以让您完全控制并导致首选大小成为组件的固有部分。

3.  您还应该调用`super.paintComponent(g);`您的 CustomPanel。

4.  在您的`CustomLabel`中，调用没有任何意义`setLocation`（父布局无论如何都会改变）

5.  在您的`CustomLabel`中，这也没有任何意义：`setSize(img.getIconWidth(),getHeight());`因为父布局无论如何都会更改这些值（顺便说一句，`getHeight()`在这种情况下返回 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:35:42.000

setLayout() 用于设置窗口的布局，对于布局，[请单击此处](http://www.cis.upenn.edu/~matuszek/cit591-2004/Pages/layout-examples.html) 内容窗格默认使用 BorderLayout，通过将布局设置为 null 就没有布局，您看到的只是标题栏。

getPreferred() 用于获取您为组件提供的首选大小，而 set 用于设置首选大小：p

# actionscript-3 - 使用 Actionscript 3.0 对齐符号

> ID：14122891
> 
> 赞同：1
> 
> 时间：2013-01-02T13:24:46.927
> 
> 标签：actionscript-3

我一直在尝试在 Flash 中创建一个漩涡状的催眠动画，其中随机单词淡入然后缩小。最初，我设置了由计时器随机显示的补间动画，但计时器不可避免地与动画不同步，导致在动画中间切换单词。

经过一番研究，使用 ENTER_FRAME 事件触发 Actionscript 中编码的动画似乎是正确同步事物的解决方案。然而，虽然修改可见性和初始淡入非常容易编码，但在舞台上保持正确对齐的同时进行缩放已被证明是非常困难的。

据我所知，我应该使用 stage.stageWidth(and Height)/2 - 实例 /2 的宽度/高度来设置适当的 x/y 坐标，以便在重新对齐舞台中心的实例后重新对齐-通过调整实例的 scaleX/Y 来调整大小，但一切都略微不对齐。

我使用的每个实例在 Flash Professional CS5.5 中都作为 Text 对象开始，并已转换为具有下面代码中列出的实例名称的影片剪辑对象。

选择单词并修改它的初始函数

```
function runMany(event:Event):void {
if (cnt == 0) {
    randomWord = Math.floor(Math.random() * 10);
    scaling(randomWord, scale);
    setAlpha(randomWord, alphaLevel);
    visibility(randomWord, true);
    cnt++;
} else if (cnt <= 50) {
    alphaLevel = alphaLevel + .02;
    setAlpha(randomWord, alphaLevel);
    cnt++;

} else if (cnt < 97) {
    alphaLevel = alphaLevel - .02;
    scale = scale - .02;
    scaling(randomWord, scale);
    setAlpha(randomWord, alphaLevel);
    if (scale > 0) {
        cnt++;
    } else {
        cnt = 97;
    }
} else if (cnt == 97) {
    cnt = 0;
    alphaLevel = 0;
    scale = .8;
    visibility(randomWord, false);
    scaling(randomWord, scale);
    setAlpha(randomWord, alphaLevel);
}
} 
```

应该是缩放和对齐单词的功能

```
function scaling(ref, setting):void {
    if (ref == 0) {
        if (setting == 1) {
            watch.width = 515.50;
            watch.height = 209;
        } else {
            watch.scaleX = setting;
            watch.scaleY = setting;
        }
    watch.x = stage.stageWidth/2 - watch.width/2;
    watch.y = stage.stageHeight/2 - watch.height/2;
}
if (ref == 1) {
    if (setting == 1) {
        slave.width = 552.55;
        slave.height = 266.75;
    }else {
        slave.scaleX = setting;
        slave.scaleY = setting;
    }
    slave.x = stage.stageWidth/2 - slave.width/2;
    slave.y = stage.stageHeight/2 - slave.height/2;
}
if (ref == 2) {
    if (setting == 1) {
        letGo.width = 574.45;
        letGo.height = 271;
    } else {
        letGo.scaleX = setting;
        letGo.scaleY = setting;
    }
    letGo.x = stage.stageWidth/2 - letGo.width/2;
    letGo.y = stage.stageHeight/2 - letGo.height/2;
}
if (ref == 3) {
    if (setting == 1) {
        obey.width = 536.95;
        obey.height = 339.15;
    } else {
        obey.scaleX = setting;
        obey.scaleY = setting;
    }
    obey.x = stage.stageWidth/2 - obey.width/2;
    obey.y = stage.stageHeight/2 - obey.height/2;
}
if (ref == 4) {
    if (setting == 1) {
        dontThink.width = 629.60;
        dontThink.height = 184.90
    } else {
        dontThink.scaleX = setting;
        dontThink.scaleY = setting;
    }
    dontThink.x = stage.stageWidth/2 - dontThink.width/2;
    dontThink.y = stage.stageHeight/2 - dontThink.height/2;
}
if (ref == 5) {
    if (setting == 1) {
        blank.width = 601.30;
        blank.height = 195.85;
    } else {
        blank.scaleX = setting;
        blank.scaleY = setting;
    }
    blank.x = stage.stageWidth/2 - blank.width/2;
    blank.y = stage.stageHeight/2 - blank.height/2;
}
if (ref == 6) {
    if (setting == 1) {
        mindless.width = 800.20;
        mindless.height = 187.25;
    } else {
        mindless.scaleX = setting;
        mindless.scaleY = setting;
    }
    mindless.x = stage.stageWidth/2 - mindless.width/2;
    mindless.y = stage.stageHeight/2 - mindless.height/2;
}
if (ref == 7) {
    if (setting == 1) {
        property1.width = 632.60;
        property1.height = 326.85;
    } else {
        property1.scaleX = setting;
        property1.scaleY = setting;
    }
    property1.x = stage.stageWidth/2 - property1.width/2;
    property1.y = stage.stageHeight/2 - property1.height/2;
}
if (ref == 8) {
    if (setting == 1) {
        owned.width = 670.65;
        owned.height = 209.75;
    } else {
        owned.scaleX = setting;
        owned.scaleY = setting;
    }
    owned.x = stage.stageWidth/2 - owned.width/2;
    owned.y = stage.stageHeight/2 - owned.height/2;
}
if (ref == 9) {
    if (setting == 1) {
        dontResist.width = 791.05;
        dontResist.height = 142.45;
    } else {
        dontResist.scaleX = setting;
        dontResist.scaleY = setting;
    }
    dontResist.x = stage.stageWidth/2 - dontResist.width/2;
    dontResist.y = stage.stageHeight/2 - dontResist.height/2;
}
if (ref == 10) {
    if (setting == 1) {
        submit.width = 793.40;
        submit.height = 244.35;
    } else {
        submit.scaleX = setting;
        submit.scaleY = setting;
    }
    submit.x = stage.stageWidth/2 - submit.width/2;
    submit.y = stage.stageHeight/2 - submit.height/2;
}
} 
```

# javascript - 如何在javascript中获取一位随机数？

> ID：14122894
> 
> 赞同：13
> 
> 时间：2013-01-02T13:24:59.087
> 
> 标签：javascript, math, random, digit

> **可能重复：**
> [在特定范围内的 Javascript 中生成随机数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range)

有人能告诉我如何在 JavaScript 中使用 Math.random() 或其他方式获取一位随机数（1,2,3,.. 不是 0.1,0.2,.. 或 1.0,5.0,..）吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T13:27:15.870

`Math.random()``0`返回and之间的浮点数`1`，因此只需将其乘以`10`并将其转换为整数：

```
Math.floor(Math.random() * 10) 
```

或者更短一点的东西：

```
~~(Math.random() * 10) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T13:31:04.217

# 免责声明：

> JavaScript 的 math.rand()**不是**加密安全的，这意味着它**不**应该用于密码、PIN 码和/或赌博相关的随机数生成。如果这是您的用例，请改用[网络加密 API](https://stackoverflow.com/questions/5651789/is-math-random-cryptographically-secure#5651854)！( [w3c](https://w3c.github.io/webcrypto/) )

* * *

如果不包括数字 0 (1-9)：

```
function randInt() {
    return Math.floor((Math.random()*9)+1);
} 
```

如果包含数字 0 (0-9)：

```
function randIntWithZero() {
     return Math.floor((Math.random()*10));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T13:26:44.330

```
var randomnumber=Math.floor(Math.random()*10) 
```

其中 10 表示随机数将介于 0-9 之间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:26:45.843

用这个：

```
Math.floor((Math.random()*9)+1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T13:26:50.983

```
Math.floor((Math.random()*10)); 
```

你的随机整数在 0 到 10 之间！

# android - AVD 未启动

> ID：14122904
> 
> 赞同：1
> 
> 时间：2013-01-02T13:25:33.447
> 
> 标签：android, emulation, avd

我正在为 Windows 使用 ADT 捆绑包中的 ADT 插件。问题是当我从 AVD 管理器启动模拟器时，AVD 没有启动。控制台消息仅显示创建的 AVD 的配置。但是没有出现AVD。

这是一个尚未解决的独特问题。我试图从许多论坛中搜索如何解决这个问题，发现遇到这个问题的每个人都没有解决。

我应该怎么办？我浪费了很多时间，但仍然没有确切的解决方案。

# java - 放弃从其他应用程序到 Java 应用程序的支持

> ID：14122906
> 
> 赞同：2
> 
> 时间：2013-01-02T13:25:34.190
> 
> 标签：java, swing, drag-and-drop

我需要在我的应用程序中添加对从其他应用程序（文件管理器、Web 浏览器、MS Word 和 OO 编写器）拖放图像的支持到 JLabel。
JVM 中有很多关于 DnD 的示例，但我找不到任何可以从本机应用程序或其他 J2SE 应用程序中拖动的内容。

如何为文件管理器、Web 浏览器、MS Word 和 OO 编写器添加对图像的拖放支持？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:46:50.040

沿着这些思路：

```
JComponent dropTargetComponent = ...;
new DropTarget(dropTargetComponent , DnDConstants.ACTION_COPY,
    new DropTargetListener() {

        public void drop(DropTargetDropEvent dtde) {
            Transferable tr = dtde.getTransferable();
            if(tr.isDataFlavorSupported(java.awt.datatransfer.DataFlavor.imageFlavor)) {
                 Image image = (Image) tr.getTransferData(java.awt.datatransfer.DataFlavor.imageFlavor);
                 // Do something with image
            }
         }

         ...
   } 
```

您可能还想尝试`java.awt.datatransfer.DataFlavor.javaFileListFlavor`返回 a `List<File>`，因为来自 FileManager 的东西通常是文件列表。

这是一个完整的示例（从 Explorer 文件管理器和 FireFox 尝试 DnD）：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.Reader;
import java.net.URI;
import java.util.Iterator;
import java.util.List;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class TestNativeDnD {
    protected void initUI() {
        final JFrame frame = new JFrame(TestNativeDnD.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel dropTargetComponent = new JLabel("Drop something here") {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 600);
            }
        };
        dropTargetComponent.setHorizontalAlignment(JLabel.CENTER);
        final JLabel testLabel = new JLabel();
        new DropTarget(dropTargetComponent, DnDConstants.ACTION_COPY, new DropTargetListener() {

            @Override
            public void drop(DropTargetDropEvent dtde) {
                try {
                    Transferable tr = dtde.getTransferable();
                    dtde.acceptDrop(DnDConstants.ACTION_COPY);
                    if (tr.isDataFlavorSupported(java.awt.datatransfer.DataFlavor.imageFlavor)) {
                        Image image = (Image) tr.getTransferData(java.awt.datatransfer.DataFlavor.imageFlavor);
                        showImageIcon(new ImageIcon(image));
                    } else if (tr.isDataFlavorSupported(java.awt.datatransfer.DataFlavor.javaFileListFlavor)) {
                        List<File> fileList = (List<File>) tr.getTransferData(java.awt.datatransfer.DataFlavor.javaFileListFlavor);
                        Iterator<File> iterator = fileList.iterator();
                        if (iterator.hasNext()) {
                            File file = iterator.next();
                            showImageIcon(new ImageIcon(file.getAbsolutePath()));
                        }
                    } else {
                        DataFlavor[] flavors = tr.getTransferDataFlavors();
                        boolean handled = false;
                        for (int i = 0; i < flavors.length; i++) {
                            if (flavors[i].isRepresentationClassReader()) {
                                Reader reader = flavors[i].getReaderForText(tr);
                                BufferedReader br = new BufferedReader(reader);
                                java.lang.String line = null;
                                while ((line = br.readLine()) != null) {
                                    try {
                                        // kde seems to append a 0 char to the end of the reader
                                        if ("0".equals(line)) {
                                            continue;
                                        }
                                        File file = new File(new URI(line));
                                        showImageIcon(new ImageIcon(file.getAbsolutePath()));
                                    } catch (Exception e) {
                                        e.printStackTrace();
                                    }
                                }
                            }
                        }
                    }
                } catch (UnsupportedFlavorException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            public void showImageIcon(ImageIcon icon) {
                testLabel.setIcon(icon);
                frame.pack();
            }

            @Override
            public void dragEnter(DropTargetDragEvent dtde) {
                // TODO Auto-generated method stub

            }

            @Override
            public void dragOver(DropTargetDragEvent dtde) {
                // TODO Auto-generated method stub

            }

            @Override
            public void dropActionChanged(DropTargetDragEvent dtde) {
                // TODO Auto-generated method stub

            }

            @Override
            public void dragExit(DropTargetEvent dte) {
                // TODO Auto-generated method stub

            }

        });
        frame.add(dropTargetComponent);
        frame.add(testLabel, BorderLayout.EAST);
        frame.setSize(600, 600);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestNativeDnD().initUI();
            }
        });
    }

} 
```

# three.js - 如何使用 Three.js 版本 54 隐藏/显示对象？

> ID：14122919
> 
> 赞同：3
> 
> 时间：2013-01-02T13:26:18.313
> 
> 标签：three.js

我已将这个问题作为 Huge question 的一部分提出，但建议部分提出。这是我上一个问题的一部分。我之前的问题是：[这里](https://stackoverflow.com/questions/14115733/how-to-perform-picking-and-hiding-objects-using-three-js#comment19536453_14115733)

我一直在使用 Three.js Release 50 并且能够在以下帮助下显示/隐藏对象（在我的应用程序中，它是一个网格子对象）：

```
THREE.SceneUtils.traverseHierarchy(mesh,function(child){
var z = document.getElementById("cameras").selectedIndex*5 -10;
if (z === -10){
    child.visible = true;
} else if (child.position.z !== z){
    child.visible = false;
} else {

    child.visible = true;
};
}); 
```

但是在使用release 54时，据说要使用，object.traverse却发现很难一样。如何使用版本 54 替换上述代码？我在使用 54 版时遇到的错误是：

![在此处输入图像描述](../Images/87aff6e9cc2f77ad2e7fb6ddc380807e.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T14:42:00.397

您发送“traverseHierarchy”函数的“网格”变量是 Object3d 吗？如果是这样，您是否尝试过应该返回子对象数组的“mesh.children”，或者您可以在网格对象上使用 traverse 函数。

请参阅： http: [//mrdoob.github.com/three.js/docs/54/#Reference/Core/Object3D](http://mrdoob.github.com/three.js/docs/54/#Reference/Core/Object3D)

```
mesh.traverse(function(child) {
    var z = document.getElementById("cameras").selectedIndex * 5 - 10;
    if (z === -10) {
        child.visible = true;
    } else if (child.position.z !== z) {
        child.visible = false;
    } else {
        child.visible = true;
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:18:24.910

深入挖掘，你会找到答案。

object.traverseHierarchy() 重命名为 object.traverse()

```
$ grep -A10 'traverse: function' build/three.js
    traverse: function ( callback ) {

            callback( this );

            for ( var i = 0, l = this.children.length; i < l; i ++ ) {

                    this.children[ i ].traverse( callback );

            }

    }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T07:15:57.480

只需使用对象遍历方法在three.js中隐藏网格。在我的代码中根据其名称隐藏对象

```
object.traverse ( function (child) {
    if (child instanceof THREE.Mesh) {  
        if (child.name.includes("3F")) {
            child.visible = true;
        } else {
            child.visible = false;
        }
    }
}); 
```

# html - 当用户选择功能被禁用时，在 div 中选择文本？

> ID：14122922
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:26:26.693
> 
> 标签：html, css

在这里，当用户双击页面时，我遇到了在谷歌浏览器页面上禁用用户选择的问题

我需要删除的整个页面选择的屏幕截图

*   [http://screencast.com/t/3WzzZ2wCabQp](http://screencast.com/t/3WzzZ2wCabQp)

为此，我正在使用以下代码：

```
#body
{
   -webkit-user-select: none;
} 
```

它工作正常。但是它已经禁用了所有内容，我希望用户能够在 div 中选择文本是否可以通过其他任何方式进行，所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:31:12.280

为特定的 div将其设置回*auto ：*

```
#body {
   -webkit-user-select: none;
}

div.selectable {
  -webkit-user-select: auto;
} 
```

在 HTML 中使用：

```
<div class="selectable">
  This will be selectable
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:31:03.647

```
#body
{
  -webkit-user-select: none;
}

.yourdivinbody(probably container) 
{
  -webkit-user-select: all;
} 
```

# .net - ISO 3166-1 alpha 2 代码的国家名称

> ID：14122925
> 
> 赞同：1
> 
> 时间：2013-01-02T13:26:40.383
> 
> 标签：.net, country-codes, iso-3166

我有一个像澳大利亚这样的国家/地区名称，在这种情况下我想获得像 AU 这样的 ISO 3166-1 alpha 2 代码。有没有办法在.NET 中轻松做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-24T01:37:36.950

[在国家名称与 ISO 3166-2 代码](https://stackoverflow.com/questions/27629880/country-name-to-iso-3166-2-code/27630146#27630146)中提出的类似问题

```
 /// <summary>
    /// English Name for country
    /// </summary>
    /// <param name="countryEnglishName"></param>
    /// <returns>
    /// Returns: RegionInfo object for successful find.
    /// Returns: Null if object is not found.
    /// </returns>
    static RegionInfo getRegionInfo (string countryEnglishName)
    {
        //Note: This is computed every time. This may be optimized
        var regionInfos = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
           .Select(c => new RegionInfo(c.LCID))
           .Distinct()
           .ToList();
         RegionInfo r = regionInfos.Find(
                region => region.EnglishName.ToLower().Equals(countryEnglishName.ToLower()));                       
         return r;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:29:26.287

没有内置任何东西可以将国家名称转换为其 2 alpha ISO 代码。

您可以创建一个字典以在两者之间进行映射。

```
var countryToISO2Map = new Dictionary<string,string>{
   {"Australia", "AU"},
   ...      
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T01:59:56.700

您可以从[http://country.io/names.json](http://country.io/names.json)获取国家代码到名称的 JSON 映射。你只需要用类似的东西来翻转它：

```
var countries = codes.ToDictionary(x => x.Value, x => x.Key); 
```

然后您可以轻松地从新字典中获取国家/地区代码。

# java - 使用 SpiderWebPlot 时带有值的工具提示

> ID：14122929
> 
> 赞同：4
> 
> 时间：2013-01-02T13:26:51.080
> 
> 标签：java, plot, tooltip, jfreechart

我正在使用 JFreeChart 中的 SpiderWebPlot 来生成图表。但我想要的是带有值的工具提示。我发现我应该将 StandardCategoryTooltipGenerator 设置为情节，但这似乎不是重点。这是我的示例代码：

```
private JFreeChart prepareChart() {
    Random rnd = new java.util.Random();
    DefaultCategoryDataset dataSet = new DefaultCategoryDataset();
    String rowKey = "Osobnik";
    dataSet.addValue(rnd.nextInt(20), rowKey, "BLUFF");
    dataSet.addValue(rnd.nextInt(20), rowKey, "CALL");
    dataSet.addValue(rnd.nextInt(20), rowKey, "CHECK");
    dataSet.addValue(rnd.nextInt(20), rowKey, "FOLD");
    dataSet.addValue(rnd.nextInt(20), rowKey, "RAISE");

    SpiderWebPlot plot = new SpiderWebPlot(dataSet);
    // CategoryToolTipGenerator generator = new
    // StandardCategoryToolTipGenerator();
    // generator.generateToolTip(dataSet, 0, 1);
    plot.setToolTipGenerator(new StandardCategoryToolTipGenerator());
    plot.setStartAngle(54D);
    plot.setInteriorGap(0.40000000000000002D);
    plot.setToolTipGenerator(new StandardCategoryToolTipGenerator());
    JFreeChart chart = new JFreeChart(plot);

    return chart;
} 
```

这是我要完成的示例。 ![在此处输入图像描述](../Images/1c74a08e0f3b98d5c2c748c443bdecc8.png) ![在此处输入图像描述](../Images/06d002f38adab154d429ace7716704da.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:47:23.427

`ChartPanel`“向图表注册以接收图表任何组件更改的通知。” 我怀疑你忽略了构建一个`ChartPanel`; 给定一个`static`版本`prepareChart()`，以下`main()`对我有用。另请参见[*初始线程*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame f = new JFrame("Spider Web Plot");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.add(new ChartPanel(prepareChart()));
            f.pack();
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        }
    });
} 
```

附录：根据发布的屏幕截图，您需要一个自定义`CategoryItemLabelGenerator`的 ，可以使用`setLabelGenerator()`. 它将被调用 from `drawLabel()`，显示[在这里](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/plot/SpiderWebPlot.html#line.1421)。例如，

```
plot.setLabelGenerator(new StandardCategoryItemLabelGenerator() {

    @Override
    public String generateColumnLabel(CategoryDataset dataset, int col) {
        return dataset.getColumnKey(col) + " " + dataset.getValue(0, col);
    }
}); 
```

# doctrine-orm - 有没有一种简单的方法可以在 Doctrine 2 DQL 中结合 IS NULL 和 = :value ？

> ID：14122935
> 
> 赞同：6
> 
> 时间：2013-01-02T13:27:05.660
> 
> 标签：doctrine-orm, dql

我经常遇到一个场景，我想查询一个具有特定值的实体：

```
$query = $em->createQuery('SELECT e FROM Entity e WHERE e.parent = :parent');
$query->setParameter('parent', $parent); 
```

通常，这个值可以为 NULL，但`WHERE e.parent = NULL`不会产生任何结果，迫使我像这样修改：

```
if ($parent === null) {
    $query = $em->createQuery('SELECT e FROM Entity e WHERE e.parent = IS NULL');
}
else {
    $query = $em->createQuery('SELECT e FROM Entity e WHERE e.parent = :parent');
    $query->setParameter('parent', $parent);      
} 
```

虽然我理解 SQL / DQL 背后的基本原理`NULL != NULL`，但事实是，在这种情况下，结果真的很烦人。

当参数可以为空时，是否有更简洁的方法来执行此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T14:41:16.483

目前是不可能的。（为自己尝试了几种方法）。

`bindValue()`with`null`仅适用于 INSERT/UPDATE 值绑定。

我认为限制在于 PDO 或 SQL 语法本身，而不是 Doctrine。

您可以使用 QueryBuilder，因此您只需要“复制” WHERE 部分，而不是整个查询：[http ://doctrine-dbal.readthedocs.org/en/latest/reference/query-builder.html#where-条款](http://doctrine-dbal.readthedocs.org/en/latest/reference/query-builder.html#where-clause)

**编辑：在本机 SQL 中是可能的：** [https ://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to](https://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to)

可悲的是教义没有那个运算符：[http ://doctrine1-以前-known-as-doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#operators-and-operator-优先级](http://doctrine1-formerly-known-as-doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#operators-and-operator-precedence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T08:42:31.097

您可以使用查询生成器：

```
$em = \Zend_Registry::get('em');

$qb_1 = $em->createQueryBuilder();

$q_1 = $qb_1->select('usr')
->from( '\Entities\user', 'usr' )
->where( 'usr.deleted_at IS NULL' )
->orWhere( 'usr.status='.self::USER_STATUS_ACTIVE )
->andWhere('usr.account_closed_on is null');

$q_1->getQuery()->getResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T13:08:04.827

只是试图解决同样的问题，我实际上找到了`PostgreSQL`.

```
$sql = 'SELECT * FROM company WHERE COALESCE(:company_id, NULL) ISNULL OR id = :company_id;'
$connection->executeQuery($sql, ['company_id' => $id]); 
```

如果通过，则根据给定`$id`返回特定公司或全部。`null`问题似乎是解析器不知道你实际上要对参数做什么，所以通过将它传递给`COALESCE`函数它知道它正在将它传递给一个函数，所以问题解决了。

因此，如果它开始在“纯”SQL 解决方案中工作，那么在 DQL 中使用它应该不是问题。我没有尝试过，但 Doctrine 应该有`COALESCE`支持，所以`DQL`应该很容易更新。

# java - 如何在java中删除指定的开始行和结束行内的文本

> ID：14122945
> 
> 赞同：0
> 
> 时间：2013-01-02T13:28:00.573
> 
> 标签：java, string, text, replace

我正在使用 java 将脚本写入带有注释的文本文件。评论里面写了我的sql脚本。我正在评论中编写我的脚本**`actions starts`**，**`actions ends`**并且我希望稍后将此评论中的脚本替换为其他一些脚本。**如何删除**指定注释中可用的脚本并**添加新脚本**。

```
--
-- `actions` starts
--
CREATE TABLE IF NOT EXISTS `actions` (
  `aid` varchar(255) NOT NULL DEFAULT '0' COMMENT 'Primary Key: Unique actions ID.',
  `type` varchar(32) NOT NULL DEFAULT '' COMMENT 'The object  acts on ',
  PRIMARY KEY (`aid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Stores action.';
--
-- `actions` ends
--

--
-- `operations` starts
--
CREATE TABLE IF NOT EXISTS `operations` (
  `type` varchar(32) NOT NULL DEFAULT '' COMMENT 'The object that that action acts on ',
  `callback` varchar(255) NOT NULL DEFAULT '' COMMENT 'The callback ',
  `parameters` longblob NOT NULL COMMENT 'Parameters to be passed to .',
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Stores operations.';
--
-- `operations` ends
-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:13:21.237

我找到了解决方案。解决方案是使用**indexOf**方法来识别起始块和结束块。我使用的代码是，

```
private static final String VARIABLE_FIELD = "variable";
private static final String END_MODULE_END_TAG = "' ends";
private static final String START_MODULE_END_TAG = "' starts";
private static final String MODULE_START_TAG = "-- '";
private static final String DOUBLE_HYPHEN = "--";
private static final String VALUE_FIELD = "value";
private static final String NAME_FIELD = "name";
private static final String SQL_VARIABLE_SEP = "`,`";
private static final String SQL_VALUE_SEP = "','";
private static final String SINGLE_QUOTE = "'";
private static final String LINE_BREAK = "\n";
private static final String EQUAL = "=";

File scriptFile = new File(versionFile + File.separator + fileName);
StringBuffer sb = new StringBuffer();
if (scriptFile.isFile()) {
    // if script file is available need to replace the content
    buff = new BufferedReader(new FileReader(scriptFile));
    String readBuff = buff.readLine();
    String sectionStarts = MODULE_START_TAG + moduleName + START_MODULE_END_TAG;
    String sectionEnds = MODULE_START_TAG + moduleName + END_MODULE_END_TAG;

    while (readBuff != null) {
        sb.append(readBuff);
        sb.append(LINE_BREAK);
        readBuff = buff.readLine();
    }

    int cnt1 = sb.indexOf(sectionStarts);
    int cnt2 = sb.indexOf(sectionEnds);
    if (cnt1 != -1 || cnt2 != -1) {
        sb.replace(cnt1 + sectionStarts.length(), cnt2, LINE_BREAK + queryString + LINE_BREAK);
    } else {
        // if this module is not added already in the file and need to add this config alone
        sb.append(LINE_BREAK + DOUBLE_HYPHEN + LINE_BREAK);
        sb.append(MODULE_START_TAG + moduleName + START_MODULE_END_TAG + LINE_BREAK);
        sb.append(queryString);
        sb.append(LINE_BREAK);
        sb.append(MODULE_START_TAG + moduleName + END_MODULE_END_TAG + LINE_BREAK);
        sb.append(DOUBLE_HYPHEN + LINE_BREAK);
    }
} 
```

关键代码是

**int cnt1 = sb.indexOf(sectionStarts); int cnt2 = sb.indexOf(sectionEnds); if (cnt1 != -1 || cnt2 != -1) { sb.replace(cnt1 + sectionStarts.length(), cnt2, LINE_BREAK + queryString + LINE_BREAK); }**

**int cnt1 = sb.indexOf(sectionStarts);** 它标识起始标签和**int cnt2 = sb.indexOf(sectionEnds);** 标识结束标签。

它将找到该块并将内容替换为新内容。

# iphone - 如何向 Facebook 用户发送私人消息？

> ID：14122948
> 
> 赞同：1
> 
> 时间：2013-01-02T13:28:06.347
> 
> 标签：iphone, facebook, facebook-graph-api

hai iam 使用 facebook graph API 向 facebook 用户发送消息，该消息存储在收件箱中，但未显示消息。当用户在线或离线时发布私人消息是否需要任何权限，任何想法或相关链接？感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:36:15.850

您应该使用[自定义 url 方案](https://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app/5707825#5707825)。在您的情况下`fb://messaging/compose/1347150232`，其中 1347150232 是用户 ID。这将为给定用户打开 Facebook 应用程序上的**撰写消息页面。**

另请参阅[与其他应用程序通信](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)：

```
NSURL *myURL = [NSURL URLWithString:@"fb://messaging/compose/1347150232"];
[[UIApplication sharedApplication] openURL:myURL]; 
```

# c# - DataGridView e.ColumnIndex 超出范围

> ID：14122954
> 
> 赞同：1
> 
> 时间：2013-01-02T13:28:26.527
> 
> 标签：c#, winforms, datagridview

我有一个`datagridview`，无论我点击什么单元格都会返回一个超出索引的错误。

当我调试以下代码时，我得到一个`-1`. `e.ColumnIndex`至于`e.RowIndex`，我得到了我点击的正确行。

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        form2.value = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
    } 
```

我试图`e.ColumnIndex`用静态 int 替换它只是为了看看它是否有效。当我添加 int 时，当我单击特定的行或列时它不会做任何事情。

任何人都知道如何更改`ColumnIndex`或解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:35:39.880

-1`e.ColumnIndex`表示`RowHeader`正在被选中。你确定你没有`RowSelected`绑定到这个事件的事件吗？

`e.ColumnIndex`在任何情况下，在任何情况下检查和`e.RowIndex`都为 0 或更大是一种很好的做法`CellClick`-`RowHeader`和`ColumnHeader`单元格在单击时也会触发此事件，并且不会包含数据，这会让用户感到有些困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:36:04.377

试试这个

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex == -1) return;
            if (e.ColumnIndex == -1) return;
            Console.WriteLine(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
        } 
```

# javascript - 将元素放在Android的键盘上方

> ID：14122957
> 
> 赞同：1
> 
> 时间：2013-01-02T13:28:33.110
> 
> 标签：javascript, android, html, cordova

我在 Html5 + PhoneGap 中有一个应用程序..

我希望当您单击特定元素将其放在 Android 的键盘上时，可以通过 JS 来做到这一点？（有可能做到吗？！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:32:28.977

你想重叠键盘吗？隐藏部分键盘？-> 不可能

你想滚动到某个位置还是直接在键盘上方添加一个元素？-> 有一个标志，在 AndroidManifest.xml [android:windowSoftInputMode](http://developer.android.com/guide/topics/manifest/activity-element.html)

**更新 1**

如果设置为**adjustPan**，输入元素将直接位于键盘上方。现在您可以使用 javascript 来计算输入元素上方的位置。您应该在此处插入具有绝对定位的元素。

**更新 2**

如果您使用 css: transform() 或 transform-3d()，adjustPan 可能会失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:29:40.510

不，那是不可能的。

键盘是由**操作系统**本身实现的，你不能用 JavaScript 覆盖它。

现在，如果您想在键盘上方放置一个元素，而不是覆盖它，请查看：
[如何将布局放置在 android 屏幕键盘的正上方？](https://stackoverflow.com/questions/6220218)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:35:58.640

您可以通过开发 phonegap 插件与操作系统进行交互，但它需要一些 JAVA 代码，但我从未见过在键盘顶部显示某些内容的应用程序，所以我不确定这是否可能。使用插件，您将能够使用 javascript 事件执行本机代码 :)

[http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

# php - 在多行上从 MySQL 输出数据到 HTML，在 textare 中有效，但在 textare 中无效

> ID：14122963
> 
> 赞同：0
> 
> 时间：2013-01-02T13:28:37.840
> 
> 标签：php, mysql, html, textarea

如果我这样使用生成`HTML`数据：`MySQL``PHP`

```
/* SQL query */

while ($result = mysql_fetch_object($sql_query) {
   $text = $result->table_text;
} 
```

如果我得到 a`echo`的结果，`textarea`我会得到用户在之前输入的正确换行符`<form>`。例如

代码：

```
<textarea>$text</textarea> 
```

结果：

```
These
are
row breaks 
```

但是，如果我`echo`将结果`<div>`归结为一条线。代码：

```
<div>$text</div> 
```

结果：

```
These are row breaks 
```

如果我在命令行中运行查询，它似乎是输出换行符。但是如何在 div 中生成它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:30:44.803

使用[nl2br](http://php.net/manual/en/function.nl2br.php)函数

```
echo nl2br($text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:32:48.857

那是因为直接显示在 div 标签中时`"\n"`还是`"\r\n"`没有效果。你可以：

*   使用 css`white-space`将该 div 的属性设置为`pre`或类似的东西来实现你想要的。
*   `<pre>`将标签包裹在`$text`.
*   首先使用 PHP`nl2br()`将行字符转换为 html
    标签。

这是你的选择。

# c# - 链接多个 Trie 对象

> ID：14122968
> 
> 赞同：2
> 
> 时间：2013-01-02T13:28:52.227
> 
> 标签：c#, .net, list, grouping, trie

我目前的任务是获取选项符号并使它们可以从缓存中轻松搜索，以便从基于 Web 和 Windows 的各种不同应用程序中快速查找。我们决定制作 WFC 服务来为我们返回结果。
大约需要缓存 50 万条记录。当我们这样做时，我们的内存占用大约是 400 MB，使用 Trie 对象。我被指示把它变小。

期权符号在我们的世界中看起来像这样，`ROOT:DATESTRING:PRICE:TYPE`或者`IBM:130119:215.0:C`

所以我在想，由于这里有大量重复，我可以为每个部分构建一个 Trie，完成后使内存使用量约为 30 MB。

所以我现在的困境是如何链接它们，以便它仍然显示为一个连续的 Trie 进行搜索。如果我做一个简单的父子，我可能会得到错误的结果，因为价格的父是日期，并且可能具有该根或类型不会出现的价格。我们当前的方法是使用另一个对象，它是类似于数据库中的连接表的链接对象。我们让每个最终节点都有一个 UniqueID，然后建立适当的关系。这仍然非常快并且不会占用大量内存，但我想知道其他人可能会建议以更有效的方式链接这些项目的方法。

附加信息：因此，在我当前的实现中，选项符号的每一部分都是它自己的独立 Trie。因此，如果我有以下选项： IBM:130119:215.0:C APPL:130119:215.0:C APPL:130119:600.0:C A:130119:31:0:C IBM:130119:220.0:C IBM:130119:215.0: P 我随后会为根构建一个 trie，例如：有一个结束值作为我的节点结构的一部分，以了解我在哪里结束。

```
    根日期价格选项类型
   / \ | / \ \ / \
   人工智能 1 2 3 6 个人电脑
  / \ | | / \ | |
     AB 3 2 1 1 0
     | | | | | | |
     下午 0 0 5 。0
     | | | | | |
     L 1 . . 0 .
                    | | | | |
                    1 0 0 0 0
                    |
                    9

```

因此，如果没有办法将其中的每一个联系起来，我只需使用 Parent Child 就会得到很多误报。因为日期的孩子是价格。我曾考虑将所有父子片段放在 Root 上，使其成为一种特殊类型的 NODE，以便没有一堆空数据供其他不需要的数据使用。但是我们选择了一个链接表，但这根本无法正常工作。我不认为这是正确的实现，但由于调用次数和频率，我们确实需要缓存所有这些记录。

# linux - 动态确定linux操作系统架构

> ID：14122969
> 
> 赞同：0
> 
> 时间：2013-01-02T13:28:59.123
> 
> 标签：linux, unix, architecture

有没有办法动态了解 Linux 体系结构，无论是它`x86-64`还是`x86`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:42:05.397

Posix 标准[uname](http://pubs.opengroup.org/onlinepubs/009695399/functions/uname.html)函数（在[uname(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/uname.2.html)系统调用中实现）动态地为您提供有关 CPU 的信息。你可能想要这个 `machine`领域。

^(注意运行 32 位程序的 x86-64 内核（例如`chroot`，在 64 位 Debian 中运行的 32 位 Debian 发行版，或者在 64 位系统上运行的 32 位 ELF 二进制文件）；我不知道他们在那种情况下会给出什么；在那种情况下，我会想象一些`x86_64`，因为内核并不真正了解二进制文件和`libc`系统。)

另请参见 Linux 特定的[个性 (2)](http://www.kernel.org/doc/man-pages/online/pages/man2/personality.2.html)系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:34:18.017

谷歌是你的朋友：http: [//sourceforge.net/p/predef/wiki/Architectures/](http://sourceforge.net/p/predef/wiki/Architectures/)

您想测试宏`__amd64__`和`__i386__`. 理想情况下，您根本不测试宏并编写正确的、可移植的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:01:59.067

您可以使用 lscpu 命令列出有关 CPU 的特征。

# php - Laravel 模板化嵌套视图

> ID：14122973
> 
> 赞同：1
> 
> 时间：2013-01-02T13:29:12.740
> 
> 标签：php, templates, laravel

我不知道如何在没有 Blade 的情况下将几个视图合并到一个部分中。

控制器：

```
public $layout = 'layouts.template';
action_index{
    $this->layout->nest('content', 'view1');
    $this->layout->nest('content', 'view2');
} 
```

模板.php：

`<?php echo Section::yield('content'); ?>`

视图1.php：

```
<?php Section::start('content');?>
div1....
<?php Section::stop(); ?> 
```

视图2.php：

```
 <?php Section::start('content');?>
div2....
<?php Section::stop(); ?> 
```

现在 - 它只显示 view2

如何实现这样的目标：

```
$content = View::make('view1');
$content = View::append('view2'); // append view2 to view1?
$this->layout->with('content', $content); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:58:40.933

```
$content = View::make( 'view1' ) . View::make( 'view2' ); 
```

这应该有效。View 类中有一个 __toString 魔术方法，因此当它遇到字符串连接运算符时，它会呈现为字符串。$content 将是一个包含来自两个渲染视图的 HTML 的字符串。

# java - 还有比这更容易找到素数的方法吗？

> ID：14122977
> 
> 赞同：6
> 
> 时间：2013-01-02T13:29:18.153
> 
> 标签：java, variables, loops, instance

有没有比这更**有效、更干净/优雅**的方法来查找素数？代码工作正常，但我只写了对我来说最合乎逻辑的东西，我想不出任何其他方式，但老实说，它看起来并不好：P。我知道编码并不是最优雅的活动。

这是我的主要方法：

```
import java.util.Scanner;
public class DisplayPrimeNumbers
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        System.out.print("Enter an integer that you'd like the system to print the prime numbers till: ");
        String input1 = scan.nextLine();
        int input = Integer.parseInt(input1);

        PrimeGenerator prime = new PrimeGenerator(input);

        for (int i = 1; i < input ; i++)
        {
            if(prime.isPrime())
            {
            System.out.println(prime.getNextPrime());
            }
        }
        System.out.println(1);

    }
} 
```

这是我的课：

```
public class PrimeGenerator 
{
    private int number;

    public PrimeGenerator(int n)
    {
        number = n;
    }

    public int getNextPrime ()
    {
        return number+1;
    }

    public boolean isPrime()
    {
        for(int i = 2; i < number; i++)
        {
            if (number % i == 0)
            {
                number--;
                return false;
            }
        }
    number--;   
    return true;    
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:54:46.610

虽然这个问题已经得到回答，但我想我还是会提供我的答案，希望有人会觉得它有用：

您似乎主要关心 2 优雅和效率。我还想指出，正确性同样重要。除非您有特殊要求将数字 1 视为素数，否则不再考虑。您应该同样考虑用户输入质数时的情况。您还应该考虑打印的数字的边界条件。具体来说，如果我输入数字 7，您的用户会期望它输出 5、3、2、1 还是 7、5、3、2、1。虽然我个人倾向于后者，但使用清晰简洁的信息可以使任何一个选项都起作用。

# 优雅

在您的解决方案中感觉缺乏优雅主要是由于您结合了两个概念：*质数测试*和*质数生成*。

**素数测试**是一种（快速）方法，用于确定单个任意选择的数字是否为素数。**素数生成器**是一种生成通常是连续的素数序列的方法。

正如您的程序演示的那样，您可以通过测试给定范围内的每个数字并仅选择那些素数来生成连续的素数序列！暂时将此作为我们的基本策略，让我们弄清楚代码可能是什么：

根据我们之前的描述，我们说质数测试是一种方法（又名函数），用于确定某个任意选择的数字是否为质数。所以这个方法应该把一个（n个任意选择的）数字作为输入，并返回给定的数字是否是素数（即：真/假）。让我们看看它的外观：

```
public interface PrimeNumberTest
{
    bool isPrime(int value);
} 
```

并结合你的素数测试

```
public class BruteForcePrimeNumberTester : PrimeNumberTest
{
    public bool isPrime(int value)
    {
        bool isPrime = true;

        for(int i = 2; isPrime && i < value; i++)
        {
            if (value % i == 0)
            {
                isPrime = false;
            }
        }

        return isPrime;
    }
} 
```

然后，您的主程序负责迭代每个数字并仅打印素数测试识别为素数的那些。

```
public static void main(String[] args)
{
    //Determine the range of prime numbers to print
    Scanner scan = new Scanner(System.in);
    System.out.print("Primes smaller than what number should be printed?: ");
    int max = Integer.parseInt(scan.nextLine());

    //Identify how prime numbers will be tested
    PrimeNumberTest test = new BruteForcePrimeNumberTest();

    //Uncomment the line below if you want to include the number 1\. Favour adding it here so that you may
    //use re-use your prime number test elsewhere that atually needs to know if a number is prime.
    //System.out.println(1);

    //Print the prime numbers
    for (int i = 2; i < max ; i++)
    {
        if(test.isPrime(i))
        {
            System.out.println(i);
        }
    }
} 
```

但是，您的主程序应该只关注质数生成。它并不真正关心*如何*生成这些素数的语义，我们只想要素数。如果素数是通过素数测试或任何其他算法找到的，这并不重要。所以我们问自己质数生成器是什么样的？

对于初学者，素数总是整数，所以我们不应该将它们存储在浮点数、双精度数或小数内。剩下 32 位和 64 位整数。如果你想生成更大的素数，那么显然你应该使用`long`类型，但我只会使用`int`. 在其他语言中，我们还必须考虑无符号数之类的事情。

现在我们需要找到一种方法来一次返回所有这些数字。树并没有真正的意义，因为我们将生成一个连续的序列。堆栈没有意义，因为消费者通常希望按生成顺序排列数字。可以使用队列，因为它们符合先进先出规则。事实上，如果最终应用程序有一个异步质数生成器（生产者）和一个单独的异步消费者，这种类型将是理想的。但是对于这个例子，我想要一些只读的东西。本质上，质数生成器是一个`Iterable<int>`.

```
public class PrimeNumberTestGenerator : Iterable<int>
{
    private int limit;
    private PrimalityTester tester;

    public PrimeNumberTestGenerator(PrimalityTester tester, int limit)
    {
        this.tester = tester;
        this.limit = limit;
    }

    private class PrimeNumberIterator : Iterator<int>
    {
        private int current;

        public PrimeNumberIterator()
        {
        }

        public bool hasNext()
        {
            return next < limit;
        }

        public int moveNext()
        {
            if (!hasNext())
            {
                throw new NoSuchElementException();
            }

            int result = next;

            do
            {
                next++;
            } while(hasNext() && !tester.isPrime(next));

            return result;
        }

        public void remove()
        {
            throw new UnsupportedOperationExecution();
        }
    }

    public Iterator<int> iterator()
    {
        return new PrimeNumberIterator();
    }
} 
```

那么我们如何将它们联系在一起呢？

```
public static void main(String[] args)
{
    //Determine the range of prime numbers to print
    Scanner scan = new Scanner(System.in);
    System.out.print("Primes smaller than what number should be printed?: ");
    int max = Integer.parseInt(scan.nextLine());

    //Identify how prime numbers will be tested
    Iterable<int> primes = new PrimeNumberTestGenerator(max, new BruteForcePrimeNumberTest());

    //Print the prime numbers
    foreach (int prime : primes)
    {
        System.out.println(prime);
    }
} 
```

# 效率

现在，您问题的另一面是确定指定范围内的素数的有效方法。虽然快速的互联网搜索应该产生许多不同的“快速”算法来确定一组比蛮力方法快得多的素数。一种这样的方法是阿特金筛法：

```
public class AtkinSieve : Iterable<int>
{
    private BitSet primes;

    public AtkinSieve(int limit)
    {
        primes = new BitSet(limit);

        int root = (int)Math.sqrt(limit);

        primes.set(2);
        primes.set(3);

        //this section can be further optimized but is the approach used by most samples
        for (int x = 1; x <= root; x++)
        {
            for (int y = 1; y <= root; y++)
            {
                int number;
                int remainder;

                number = (4 * x * x) + (y * y);
                remainder = number % 12;
                if (number < limit && (remainder == 1 || remainder == 5))
                {
                    primes.flip(number);
                }

                number = (3 * x * x) + (y * y);
                remainder = number % 12;
                if (number < limit && remainder == 7)
                {
                    primes.flip(number);
                }

                if (x < y)
                {
                    number = (3 * x * x) - (y * y);
                    remainder = number % 12;
                    if (number < limit && remainder == 11)
                    {
                        primes.flip(number);
                    }
                }
            }
        }

        for (int i = 5; i <= root; i++)
        {
            if (primes.get(i))
            {
                int square = i * i;
                for (int j = square; j < limit; j += square)
                {
                    primes.clear(j);
                }
            }
        }
    }
}

public class SetBitIterator : Iterator<int>
{
    private BitSet bits;
    private int next;
    private bool isReadOnly;

    public SetBitIterator(BitSet bits)
    {
        this.bits = bits;
        next = bits.nextSetBit(0);   
    }

    public bool hasNext()
    {
        return next <> -1;
    }

    public int moveNext()
    {
        int result = next;

        next = bits.nextSetBit(next);

        return result;
    }

    public void remove()
    {
        throw new UnsupportedOperationException();
    }
} 
```

我们现在可以方便地使用这个素数生成器，只需在我们之前的主程序中更改一行！

改变：

```
//Identify how prime numbers will be tested
Iterable<int> primes = new PrimeNumberTestGenerator(max, new BruteForcePrimeNumberTest()); 
```

到：

```
//Identify how prime numbers will be tested
Iterable<int> primes = new AtkinSieve(max); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:35:10.270

1.  您可以通过将已经找到的素数存储在`PrimeGenerator`. 通过仅尝试将它们作为潜在除数而不是`for(int i = 2; i < number; i++)`循环，您将不得不做更少的除数
2.  您可以在到达`number`: 之前停止“查找除数”循环，具体来说，当您的候选除数超过目标数的平方根时，您可以停止。这是可行的，因为您按升序尝试候选除数：如果平方根上方有除数，则除法的结果将低于平方根，因此您已经找到了它们。
3.  在将值返回给调用者之前，您的`getNextPrime`方法应该在内部调用。`isPrime`否则，调用`getNextPrime`不能说返回下一个素数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T14:13:15.643

首先也是最重要的事情是......你不需要检查直到我

```
for(int i = 2; i < number; i++) 
```

你只需要检查直到 i 小于 number/2 ...

```
for(int i = 2; i < (number/2); i++) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T13:33:13.820

是的，有。我不知道它是否是最有效的，但它比这个更有效。检查[米勒拉宾](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)测试。

即便如此，如果你想使用你的代码，我可以告诉你，你应该这样做：

```
public boolean isPrime(int number)
{
    // You should know, that every straight number can not be prime,so you can say i+= 2
   if (number == 2)
       return true;
   if (number % 2 == 0)
   {
      return false;
   }
    for(int i = 3; i < number; i+=2)
    {
       if (number % i == 0)
       {
          number--;
          return false;
       }
     --number;
     return true;
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T13:35:44.850

为了简单起见，我可能是这样写的

```
public static void main(String... args) {
    System.out.print("Enter an integer that you'd like the system to print the prime numbers till: ");
    Scanner scan = new Scanner(System.in);
    int input = scan.nextInt();

    if (input >= 2)
        System.out.println(2);
    OUTER: for (int i = 3; i <= input; i += 2) { // skip every even number
        for (int j = 3; j * j <= i; j += 2) // stop when j <= sqrt(i)
            if (i % j == 0)
                continue OUTER;
        System.out.println(i); // 99+% of the time will be spent here. ;)
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T14:06:04.497

为什么会`PrimeGenerator`产生不是素数的数字？这不优雅。删除`isPrime()`- 方法并重写`getNextPrime()`- 方法，使其始终返回质数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-02T14:06:15.790

作为一项改进，您可以按 6 步而不是 2 步，并在每个步骤中进行 2 次检查。看看我在[这里](http://betterexplained.com/articles/another-look-at-prime-numbers/)找到了什么。

> 基本上，每个数字都可以写成（6k、6k + 1、6k+2、6k+3、6k+4 或 6k+5）。6k 显然不是素数。项目 6k+2 到 6k+4 可以写成 2(3k + 1)、3(2k+1) 和 2(3k + 2)，因此它们不是素数，因为它们可以被 2 或 3 整除。

所以我的观点如下。如果我们想找到最大 1000 的数字，我们可以执行以下操作。

```
int [] primes = new int[1000];
primes[0] = 2;
primes[1] = 3;
primes[2] = 5;
primes[3] = 7;
index = 4;
for(int i = 12; i < 1000; i += 6) {
    boolean prime1 = true;
    boolean prime2 = true;
    int j = 1; // No need to divide by 2, the number is odd.
    while(j < index && (prime1 || prime2)) {
        if (prime1 && ((i - 1) % primes[j] == 0)) {
            prime1 = false;
        }
        if (prime2 && ((i + 1) % primes[j] == 0)) {
            prime2 = false;
        }
        j++;
    }
    if (prime1) {
        primes[index++] = i - 1;
    }
    if (prime2) {
        primes[index++] = i + 1;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-05T15:16:38.027

试试这个代码伙伴。我写了这个。我认为这更优雅:)

```
 **import java.util.*;

    public class PrimeNum{
    public static void main(String args[]){
           Scanner x=new Scanner(System.in);
           System.out.println("Enter the number :  ");
           long y=x.nextLong();
           long i;
           for( i=2;i<y;i++){
           long z=y%i;
               if(z==0){
               System.out.println(y+" is not a prime");
               System.out.println(y+" Divide by "+i);
               i=y;    
                             }

               }if(i==y) System.out.println("Number is prime"); 
                if(y==1) System.out.println("Number 1 is not a prime");
         }
    }** 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-10T18:34:44.473

根据我的观察，一个基本的方法是使用这个：

```
int prime(int up_limit){
        int counter =0;
        for(int i=1;i<=up_limit;i++)
              {
        if(up_limit%i==0)
             counter++;

        }
    if(count==2){
    return up_limit;
    } 
```

# c++ - 选择以 libxml2 结尾的行

> ID：14122979
> 
> 赞同：2
> 
> 时间：2013-01-02T13:29:30.617
> 
> 标签：c++, c, windows, unix, libxml2

我尝试`TMX`在我们的服务器上生成一些 xml 文件 ()。

服务器是 Solaris SPARC 服务器，但文件的目标是一些旧的 Windows CAT 工具。

CAT-Tool 需要`CR+LF`行尾，这是 Windows 上的默认设置。使用 libxml2 编写文件，使用起来`xmlWriter`很简单，而且效果很好。但是我还没有想出一种方法来强制 lib 发出`CR+LF`而不是 Unix standard `LF`。该库似乎只支持它运行的平台的行尾。

是否有人找到了一种方法来生成文件的结尾不是它运行的平台的默认值。实际上我的解决方法是打开写入的文件并使用一个简单的`C`循环以更改的行结尾写入一个新文件。这行得通，但是在我们的链条中加入这样一个不必要的步骤是很烦人的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:56:19.870

我自己没有尝试过，但是从[xmlsave](http://xmlsoft.org/html/libxml-xmlsave.html)，我可以看到两种可能性

*   [xmlSaveToBuffer](http://xmlsoft.org/html/libxml-xmlsave.html#xmlSaveToBuffer)：保存到缓冲区，转换为 CR/LF 并自己写出来。
*   [xmlSaveToIO](http://xmlsoft.org/html/libxml-xmlsave.html#xmlSaveToIO)：注册`iowrite`回调并在写入回调函数时转换为 CF/LF

也许，还有其他选择，但我还没有找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:20:57.440

> CAT-Tool 需要 CR+LF 行结尾，这是 Windows 上的默认设置。

FWIW，这意味着 CAT-Tool 有一个损坏的 XML 解析器。它不应该关心这一点，正如[XML 规范](http://www.w3.org/TR/REC-xml/#sec-line-ends)所说：

> 为了简化应用程序的任务，XML 处理器**必须**表现得好像它规范了所有换行符......通过将两个字符序列 #xD #xA 和任何没有跟随 #xA 的 #xD 转换为单个 #xA特点。

我知道这些事情经常是我们无法控制的，但如果你可以依靠 CAT-Tool 供应商来修复他们的软件，它可能会成为一个更面向未来的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T08:57:50.443

根据源代码（截至 2013 年 4 月），libxml2 只是将“\n”放入输出流中。至少，在编写文档的 dtd 部分时。因此，动态重新编码流是获得“\r\n”结果的唯一选择。

如果你很幸运（像我一样）并且你的工具在 Windows 上运行，你可以在文本模式下打开文件，操作系统会为你重新编码。

# azure - 升级到 Azure 存储后丢失的方法

> ID：14122980
> 
> 赞同：2
> 
> 时间：2013-01-02T13:29:32.353
> 
> 标签：azure, azure-storage, azure-table-storage

因为我升级了 Azure 存储 dll，所以我找不到方法。

我找不到的静态方法是：CloudTableClient.CreateTablesFromModel

**老班：http:** [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient_methods.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient_methods.aspx)

**这是新课程：http:** [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.cloudtableclient_methods.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.cloudtableclient_methods.aspx)

我进行了一些搜索，但找不到有关此内容被替换或删除的信息。

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:38:55.163

存储客户端库 2.0 与以前的版本有很大的不同，并且在较新的版本中删除了许多方法。这种方法就是其中之一。如果您查看此页面上的备注部分：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient.createtablesfrommodel.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient.createtablesfrommodel.aspx)，建议您不要使用此方法。

由于这两个版本完全不同，建议您在升级代码以使用最新版本之前阅读存储团队的以下博客文章：

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/introducing-windows-azure-storage-client-library-2-0-for-net-and-windows-runtime.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/introducing-windows-azure-storage-client-library-2-0-for-net-and-windows-runtime.aspx)

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-break-changes-amp-migration-guide.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)

我还写了一篇关于将代码从存储客户端库 1.7 迁移到 2.0 的博客文章，您可以在此处阅读：http: [//gauravmantri.com/2012/11/17/storage-client-library-2-0-migrating-table-存储代码/](http://gauravmantri.com/2012/11/17/storage-client-library-2-0-migrating-table-storage-code/)

# c - 确保结构中的所有元素都已初始化

> ID：14122983
> 
> 赞同：5
> 
> 时间：2013-01-02T13:29:43.150
> 
> 标签：c, gcc

我是一个 C 源代码，我想确保我的结构的所有元素都被很好地初始化。警告 Wmissing-field-initializers 会很容易。但我也希望能够使用指定的初始化程序来初始化我的元素。

例如：

```
struct s {
  int a;
  int b;
};

struct s s1 = { .a = 1, .b = 2 };
struct s s2 = { .a = 1 };
struct s s3 = { 1, 2 };
struct s s4 = { 1 }; 
```

让我们尝试编译它：

```
$ gcc -Wmissing-field-initializers -c struct_init.c 
struct_init.c:9:8: warning: missing initializer
struct_init.c:9:8: warning: (near initialization for ‘s4.b’) 
```

我也希望 s2 初始化的编译失败。我更喜欢指定的初始化，因为它有利于源代码的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:38:11.003

当您使用指定初始值设定项时，缺少的成员将被初始化为`0`. 即使对象具有自动存储持续时间也是如此。据我所知，当您使用指定初始值设定项时，没有`gcc`选项可以警告*未*显式初始化的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:45:34.167

您可以使用 -Werror 将警告转换为错误，或者使用 -Werror=missing-field-initializers 仅将字段初始值设定项警告转换为错误。

更多信息：[GCC 警告选项](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

编辑：我刚刚使用[夹板](http://www.splint.org/)运行了一个测试，没有其他选项，它给出了以下输出：

```
main.c:13:17: Initializer block for s2 has 1 field, but struct s has 2 fields:
             <error>
  Initializer does not set every field in the structure. (Use -fullinitblock to
  inhibit warning)
main.c:15:17: Initializer block for s4 has 1 field, but struct s has 2 fields:
             1 
```

它可能不是您所追求的，因为您需要针对您的源手动运行它，但它会警告缺少指定的初始化程序。

# post - 有没有人有任何拦截器（i18n）在回发期间没有价值的经验？

> ID：14122984
> 
> 赞同：0
> 
> 时间：2013-01-02T13:29:45.110
> 
> 标签：post, struts2, internationalization

假设我有这个 struts2 表单

```
<s:form action="login" method="post">
    <s:textfield key="login_name" name="login_name"/>
    <s:submit></s:submit>
</s:form> 
```

还有这个 struts.xml 设置

```
<constant name="struts.custom.i18n.resources" value="messageResource" />
<constant name="struts.devMode" value="true" />
<package name="login" namespace="/" extends="struts-default">
    <action name="login" class="actions.index.index">
        <interceptor-ref name="i18n"/>
        <result name="LOGIN_SUCCESS">/Main.jsp</result>
        <result name="LOGIN">/Login.jsp</result>
    </action>
</package> 
```

如果我已添加`<interceptor-ref name="i18n"/>`到设置中，则表单提交后 login_name 将没有值；否则我可以成功检索该值。如果您希望我提供更多详细信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:41:34.210

通过这样做，您只为您的操作添加了一个拦截器，因此不包括所有其他拦截器。默认堆栈已经包含`i18n`拦截器，所以没有必要自己添加它。

# ruby-on-rails - Koala：Facebook 新鲜 OAuth 代码无效或过期

> ID：14122987
> 
> 赞同：1
> 
> 时间：2013-01-02T13:29:55.583
> 
> 标签：ruby-on-rails, facebook, oauth, access-token, koala

大家。我正在我的平台（使用 Rails 和 Koala）上使用一个简单的 Facebook 身份验证系统，它几乎可以按预期工作。但是有一个关键的错误让我抓狂。

1.  鉴于我没有登录我的平台，我没有注册，我还没有在我的 Facebook 个人资料上授权我的应用程序。
2.  我去注册一个 Facebook 帐户
3.  Facebook 要求我登录
4.  我成功登录
5.  Facebook 应用程序请求权限
6.  我授权该应用程序
7.  我被重定向到正确的 redirect_uri
8.  `client.get_access_token(params[:code])`考拉在这一步中失败了`OAuthException: Code was invalid or expired. Session is invalid. This could be because the application was uninstalled after the session was created.`

简而言之，Facebook 正在抱怨它刚刚提供的代码。以下是认证方法：

OAuth 的登录操作

```
 def login
    reset_session

    session[:facebook_client] = get_client

    redirect_to session[:facebook_client].url_for_oauth_code(:callback => FacebookAPI.oauth_callback_url, :permissions => "email, user_status, publish_stream, publish_actions")
  rescue => err
  end 
```

回调动作

```
 def terminate
    client = session[:facebook_client]
    if client.nil?
      redirect_to '/', notice: 'Error on FacebookAPI'
    else
      access_token = client.get_access_token(params[:code]) if params[:code] # IT FAILS HERE
      # omitting the rest
  end 
```

# php - Jquery - 在表单中选择项目并发布它们

> ID：14122992
> 
> 赞同：1
> 
> 时间：2013-01-02T13:30:12.870
> 
> 标签：php, jquery, jquery-selectors

我在下面有一个简单的 html 页面调用 global.js 文件 global.js 文件调用一个 php 文件，如果它在数据库中，则该文件获取名称的位置。（本可以将所有内容放在一个页面上，但正在遵循教程）。

```
 <!doctype html>
 <html
   <head>
<title>AJAX Database</title>
</head>
<body>

Name: <input type = "text" id="name">
<br />
<input type="submit" id="submit" value="Get Loc">

<div id="output"></div>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="js/global.js"></script>
</body>
 </html> 
```

global.js 是：

```
$('#submit').on('click',function() {
var name = $('#name').val();
if($.trim(name) != ''){
   $.post('ajax/name.php', {name: name}, function(data) {
    $('div#output').text(data);
      });
}
}); 
```

它可以正常工作，但是如果我按如下所示输入标签，它将无法正常工作。我也想使用一个字段集，但我什至不能让它与表单标签一起工作。

我使用过其他选择器，但它不起作用。问题似乎出在提交按钮上，因为如果它不在表格中，它就可以工作。有什么想法吗？我认为在表单中使用提交会使 $.post 函数发送比我想要的更多。

```
 <!doctype html>
 <html
 <head>
<title>AJAX Database</title>
</head>
<body>

    <form>
Name: <input type = "text" id="name">
<br />
<input type="submit" id="submit" value="Get Loc">
</form>

<div id="output"></div>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="js/global.js"></script>
</body>
 </html> 
```

php文件是：

```
 if(isset($_POST['name']) === true && empty($_POST['name']) === false) {
  require '../db/connect.php';

$query = mysql_query("
SELECT `names`.`location`
FROM    `names`
WHERE `names`.`name` = '" . mysql_real_escape_string(trim($_POST['name'])) . "'

");
echo (mysql_num_rows($query) !== 0) ? mysql_result($query,0,'location') : 'Name not found';

 } 
```

我的问题是没有使用正确的选择器，还是有一些关于在表单中使用选择器提交按钮的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:36:03.913

您需要阻止表单的默认操作。通过在函数末尾使用`event.preventDefault()`或添加。`return false`

```
$('form').on('submit', function(e) {
    e.preventDefault();
    var name = $('#name').val();
    if ($.trim(name) != '') {
        $.post('ajax/name.php', {
            name: name
        }, function(data) {
            $('div#output').text(data);
        });
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:25:36.083

我强烈建议不要使用单击按钮，而是建议这样做

```
<!doctype html>
 <html
 <head>
   <title>AJAX Database</title>
   <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
   <script src="js/global.js"></script>
</head>
<body>

  <form id="form1">
    Name: <input type="text" id="name"><br />
    <input type="submit" id="submit" value="Get Loc">
  </form>

  <div id="output"></div>
</body>
</html> 
```

脚本在哪里

```
$('#form1').on('submit', function(e) {
    e.preventDefault();
    var name = $('#name').val();
    if ($.trim(name) != '') {
        $.post('ajax/name.php', {
            name: name
        }, function(data) {
            $('div#output').text(data);
        });
    }
    else {
      alert('Please enter name');
      $('#name').focus();
    }
});​ 
```

# asp.net-mvc-4 - 温莎城堡动态装配错误？

> ID：14122994
> 
> 赞同：0
> 
> 时间：2013-01-02T13:30:21.757
> 
> 标签：asp.net-mvc-4, castle-windsor

我在 ASP .NET 4 MVC 应用程序中使用 Castle Windsor 3.1.0，这在调用 container.Register 时在 Application_Start 事件中给了我一个异常。

例外是“动态程序集中不支持调用的成员。”。这是堆栈跟踪：

```
[NotSupportedException: The invoked member is not supported in a dynamic assembly.]
   System.Reflection.Emit.InternalAssemblyBuilder.GetExportedTypes() +56
   Castle.Core.Internal.ReflectionUtil.GetAvailableTypes(Assembly assembly, Boolean includeNonExported) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Core\Internal\ReflectionUtil.cs:165
   Castle.MicroKernel.Registration.FromAssemblyDescriptor.<SelectedTypes>b__0(Assembly a) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\Registration\FromAssemblyDescriptor.cs:56
   System.Linq.<SelectManyIterator>d__14`2.MoveNext() +238
   Castle.MicroKernel.Registration.FromDescriptor.Castle.MicroKernel.Registration.IRegistration.Register(IKernelInternal kernel) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\Registration\FromDescriptor.cs:160
   Castle.MicroKernel.Registration.BasedOnDescriptor.Castle.MicroKernel.Registration.IRegistration.Register(IKernelInternal kernel) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\Registration\BasedOnDescriptor.cs:530
   Castle.MicroKernel.DefaultKernel.Register(IRegistration[] registrations) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\DefaultKernel.cs:506
   Castle.Windsor.WindsorContainer.Register(IRegistration[] registrations) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\WindsorContainer.cs:483
   ProductX.Web.Windsor.Installers.ControllerInstaller.Install(IWindsorContainer container, IConfigurationStore store) in C:\TeamProjects\CompanyX.ProductX\Mainline\Admin\ProductX.Web\Windsor\Installers\ControllerInstaller.cs:24
   Castle.Windsor.Installer.AssemblyInstaller.Install(IWindsorContainer container, IConfigurationStore store) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\Installer\AssemblyInstaller.cs:56
   Castle.Windsor.WindsorContainer.Install(IWindsorInstaller[] installers, DefaultComponentInstaller scope) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\WindsorContainer.cs:319
   Castle.Windsor.WindsorContainer.Install(IWindsorInstaller[] installers) in c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\WindsorContainer.cs:452
   ProductX.Web.MvcApplication.InitializeWindsor() in C:\TeamProjects\CompanyX.ProductX\Mainline\Admin\ProductX.Web\Global.asax.cs:41
   ProductX.Web.MvcApplication.Application_Start() in C:\TeamProjects\CompanyX.ProductX\Mainline\Admin\ProductX.Web\Global.asax.cs:25

[HttpException (0x80004005): The invoked member is not supported in a dynamic assembly.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9171773
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +131
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): The invoked member is not supported in a dynamic assembly.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

这是我如何调用注册：

```
container.Register(Classes.FromThisAssembly().BasedOn<IController>().LifestyleTransient()); 
```

当我在调试模式下构建应用程序时，它很好。当我在发布模式下构建时，会发生上述异常。我无法通过 Google 找到有关此错误的任何信息。我的怀疑是，一些 .NET 4 限制是在如何对动态程序集进行反射时引入的，在这种情况下作为发布构建优化引入。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:43:25.493

看起来你正在发出一个动态程序集（不知何故）。尝试添加过滤器以忽略动态程序集。这应该有效：

```
container.Register(Classes.FromThisAssembly().Where(t => !t.Assembly.IsDynamic).BasedOn<IController>().LifestyleTransient()); 
```

# wcf - WCF 异常编组和 InnerException

> ID：14122995
> 
> 赞同：0
> 
> 时间：2013-01-02T13:30:27.483
> 
> 标签：wcf, nhibernate

我正在使用 NetDataContractSerializer 通过 WCF 序列化异常。当我得到 NHibernateADOException（客户端未知）时，我得到了 FaultException。不幸的是，这导致我丢失了内部异常消息。有没有办法将未知异常（或任何其他类型）反序列化为指定的已知类型，或者是否有其他方法可以解决该问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:11:34.183

您希望将`includeExceptionDetailsInFaults`服务行为设置为 true。

看到这个问题：

[WCF IncludeExceptionDetailInFaults 以编程方式？](https://stackoverflow.com/questions/4319765/wcf-includeexceptiondetailinfaults-programatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T16:40:47.493

您可以在 web.config 中设置它以返回异常：

```
<serviceDebug includeExceptionDetailInFaults="true"/> 
```

这个标签必须放在 serviceBehavior 标签内，通常是这样的：

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

详细信息示例：

> 服务器堆栈跟踪：em System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) em System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs , TimeSpan 超时) em System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime 操作) em System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage 消息)
> 
> 在 [0] 处重新抛出异常：em System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) em System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型) em IMyService.GetDataOperation( RequestObterBeneficiario request) em MyServiceClient.GetDataOperation(RequestData request)

这将返回给客户端的详细信息。**在开发过程**中这会有所帮助，但是当您的服务**投入生产**时，您将不再保留它，因为您的服务可以发送敏感数据，例如您的数据库名称或配置。

# oauth-2.0 - 时间同步时使用 Google 服务帐户的 invalid_grant 错误

> ID：14122998
> 
> 赞同：4
> 
> 时间：2013-01-02T13:30:36.253
> 
> 标签：oauth-2.0, ntp

几天来我一直在调试这个问题，但我想不出任何其他方法来解决这个问题。

**错误**：

```
Fatal error: Uncaught exception 'Google_AuthException' with message 'Error refreshing the OAuth2 token, message: '{
  "error" : "invalid_grant"
}'' in /html/cms/php/google-api-php-client/src/auth/Google_OAuth2.php:279
Stack trace:
#0 /html/cms/php/google-api-php-client/src/auth/Google_OAuth2.php(256): Google_OAuth2->refreshTokenRequest(Array)
#1 /html/cms/php/google-api-php-client/src/auth/Google_OAuth2.php(209): Google_OAuth2->refreshTokenWithAssertion()
#2 /html/cms/php/google-api-php-client/src/service/Google_ServiceResource.php(166): Google_OAuth2->sign(Object(Google_HttpRequest))
#3 /html/cms/php/google-api-php-client/src/contrib/Google_CalendarService.php(154): Google_ServiceResource->__call('list', Array)
#4 /html/cms/php/google_calendar_sync.php(41): Google_CalendarListServiceResource->listCalendarList()
#5 {main}
  thrown in /html/cms/php/google-api-php-client/src/auth/Google_OAuth2.php on line 279 
```

**我的服务器时钟同步**：1 月 2 日 13:35:36 ntpdate[1214]：调整时间服务器 62.212.76.57 偏移 0.003544 秒（62.212.76.57 是我的 colo 公司的时间服务器）

我已经在 Google API 控制台上检查了我的服务帐户开发人员凭据（我有一个屏幕截图，但我无法使用它，因为我的帐户太新了：/）。我也成功订阅了日历服务（也不能使用我做的这个截图）。

**我的代码**：

```
<?php

    require_once(dirname(__FILE__) . '/google-api-php-client/src/Google_Client.php');
    require_once(dirname(__FILE__) . '/google-api-php-client/src/contrib/Google_CalendarService.php');

    session_start();

    define('CLIENT_ID', 'XXXXXX510496.apps.googleusercontent.com');
    define('SERVICE_ACCOUNT_NAME', 'XXXXXX510496@developer.gserviceaccount.com');
    define('CALENDAR_ID', 'XXXXXXXXXXXXXXXXX');
    define('KEY_FILE', dirname(__FILE__) . '/private/XXXXXXXXXXXXXXXXXXXX881a845ed4e4d2d58eb1-privatekey.p12');

    $client = new Google_Client();

    if (isset($_SESSION['token'])) {
     $client->setAccessToken($_SESSION['token']);
    }

    $key = file_get_contents(KEY_FILE);
    $client->setClientId(CLIENT_ID);
    $client->setAssertionCredentials(new Google_AssertionCredentials(
      SERVICE_ACCOUNT_NAME,
      'https://www.google.com/calendar/feeds/' . CALENDAR_ID . '/private/full/',
      $key)
    );

    $service = new Google_CalendarService($client);

    $calendarList = $service->calendarList->listCalendarList();
    echo "<h1>Calendar List</h1><pre>" . print_r($calendarList, true) . "</pre>";

 ?> 
```

我已经完全没有想法了，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:32:05.000

我刚刚发布了一份可能会帮助您摆脱困境的文件：

[http://www.tqis.com/eloquency/googlecalendar.htm](http://www.tqis.com/eloquency/googlecalendar.htm)