# StackOverflow 问答 13660000-13660999

# javascript - 将类添加到父 div

> ID：13660002
> 
> 赞同：1
> 
> 时间：2012-12-01T13:40:49.587
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用谷歌地图绘图管理器。他们不会在绘图工具按钮栏上放置 id 或类名，所以我自己尝试这样做。

首先，我想删除下面工作正常的圆形按钮，但我想添加我自己的按钮，所以需要向父 div“gmnoprint”添加一个类名，但谷歌有大约 5 个 div 都具有相同的类名。我只想将它添加到找到圆形按钮的那个。

```
<div class=gmnoprint"></div>
<div class=gmnoprint"></div>
<div class=gmnoprint"></div>
<div class=gmnoprint">
    <div>
        <div> <== This is what I found in my search
            <span>
                <div>
                    <img></img>
                </div>
            </span>
        </div>
    </div>
</div> 
```

我能够找到我想要的元素并将其删除，但是向其包装 div 添加一个类对我来说有点困难。

这适用于删除按钮

```
$(".gmnoprint").each(function(){
   $(this).find("[title='Draw a circle']").remove();
}); 
```

这不起作用..只需将类添加到所有“.gmnoprint”div

```
$(".gmnoprint").each(function(){
   $(this).find("[title='Draw a circle']").remove().parent().addClass("test");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:46:07.170

`remove()`从 DOM 中删除元素并返回与 DOM 完全没有连接的独立 jquery 对象。呼叫`parent()` *后*的呼叫`remove()`不正确，这可能是您的问题的原因。

尝试将您的陈述拆分为：

```
var toRemove = $(this).find("[title='Draw a circle']");
toRemove.parent().addClass("test");
toRemove.remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:46:15.097

您可以使用 jQuery`insertAfter`并在该默认按钮之后退出您的按钮，然后将其删除。

```
$(".gmnoprint").each(function(){
   var defBtn = $(this).find("[title='Draw a circle']");
   $('<button class="my-button" />').insertAfter(defBtn);
   defBtn.remove();
}); 
```

或者像这样使用 jQuery `after`：

```
$(".gmnoprint").each(function(){
   $(this)
      .find("[title='Draw a circle']")
      .after($('<button class="my-button" />'))
      .remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:49:44.660

您可以使用`child selector`来定位元素

```
$(".gmnoprint > div > div").addClass('myClassName'); 
```

此时您可以替换整个 div 的 html ，或者找到 span 并将其替换为内部 html。使用`html()`不需要使用的方法，`remove()`因为它将替换元素的所有内容

```
 $(".gmnoprint > div > div").addClass('myClassName').find('span').html('<newButton>'); 
```

API 参考：[http ://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

# ios - 从情节提要中检索自定义原型单元格高度？

> ID：13660004
> 
> 赞同：22
> 
> 时间：2012-12-01T13:41:05.623
> 
> 标签：ios, uitableview, uistoryboard

当使用“动态原型”来指定`UITableView`情节提要上的内容时，有一个“行高”属性可以设置为自定义。

实例化单元格时，不考虑此自定义行高。这是有道理的，因为我使用哪个原型单元是由我的应用程序代码在单元被实例化时决定的。在计算布局时实例化所有单元格会带来性能损失，所以我理解为什么不能这样做。

那么问题是，我能否以某种方式检索给定单元重用标识符的高度，例如

```
[myTableView heightForCellWithReuseIdentifier:@"MyCellPrototype"]; 
```

或者沿着这条线的东西？或者我是否必须在我的应用程序代码中复制明确的行高，随之而来的维护负担？

**在@TimothyMoose 的帮助下解决了：**

高度存储在单元格本身中，这意味着获取高度的唯一方法是实例化原型。这样做的一种方法是在正常单元回调方法之外预先使单元出列。这是我的小型 POC，它可以工作：

```
#import "ViewController.h"

@interface ViewController () {
    NSDictionary* heights;
}
@end

@implementation ViewController

- (NSString*) _reusableIdentifierForIndexPath:(NSIndexPath *)indexPath
{
    return [NSString stringWithFormat:@"C%d", indexPath.row];
}

- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(!heights) {
        NSMutableDictionary* hts = [NSMutableDictionary dictionary];
        for(NSString* reusableIdentifier in [NSArray arrayWithObjects:@"C0", @"C1", @"C2", nil]) {
            CGFloat height = [[tableView dequeueReusableCellWithIdentifier:reusableIdentifier] bounds].size.height;
            hts[reusableIdentifier] = [NSNumber numberWithFloat:height];
        }
        heights = [hts copy];
    }
    NSString* prototype = [self _reusableIdentifierForIndexPath:indexPath];
    return [heights[prototype] floatValue];
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* prototype = [self _reusableIdentifierForIndexPath:indexPath];
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:prototype];
    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-02T19:28:37.707

对于静态（非数据驱动）高度，您只需将单元格出列一次并存储高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSNumber *height;
    if (!height) {
        UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"MyCustomCell"];
        height = @(cell.bounds.size.height);
    }
    return [height floatValue];
} 
```

对于动态（数据驱动）高度，您可以在视图控制器中存储一个原型单元格，并在单元格的类中添加一个计算高度的方法，同时考虑到原型实例的默认内容，例如子视图放置、字体、 ETC。：

```
- (MyCustomCell *)prototypeCell
{
    if (!_prototypeCell) {
        _prototypeCell = [self.tableView dequeueReusableCellWithIdentifier:@"MyCustomCell"];
    }
    return _prototypeCell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Data for the cell, e.g. text for label
    id myData = [self myDataForIndexPath:indexPath];

    // Prototype knows how to calculate its height for the given data
    return [self.prototypeCell myHeightForData:myData];
} 
```

当然，如果您使用自定义高度，您可能有多个单元原型，因此您可以将它们存储在字典或其他东西中。

据我所知，表格视图不会尝试重用原型，大概是因为它在`cellForRowAtIndexPath:`. 这种方法对我们来说非常有效，因为它允许设计人员修改故事板中的单元格布局，而无需更改任何代码。

**编辑：**阐明了示例代码的含义，并为静态高度的情况添加了一个示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T15:09:10.910

我前段时间为 UITableView 创建了一个类别，这可能对此有所帮助。[它使用关联对象](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)存储“原型”单元格以重用原型，并提供一种方便的方法来获取情节提要中分配的行的高度。释放表视图时释放原型。

**UITableView+PrototypeCells.h**

```
#import <UIKit/UIKit.h>

@interface UITableView (PrototypeCells)

- (CGFloat)heightForRowWithReuseIdentifier:(NSString*)reuseIdentifier;
- (UITableViewCell*)prototypeCellWithReuseIdentifier:(NSString*)reuseIdentifier;

@end 
```

**UITableView+PrototypeCells.m**

```
#import "UITableView+PrototypeCells.h"
#import <objc/runtime.h>

static char const * const key = "prototypeCells";

@implementation UITableView (PrototypeCells)
- (void)setPrototypeCells:(NSMutableDictionary *)prototypeCells {
    objc_setAssociatedObject(self, key, prototypeCells, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (NSMutableDictionary *)prototypeCells {
    return objc_getAssociatedObject(self, key);
}

- (CGFloat)heightForRowWithReuseIdentifier:(NSString*)reuseIdentifier {
    return [self prototypeCellWithReuseIdentifier:reuseIdentifier].frame.size.height;
}

- (UITableViewCell*)prototypeCellWithReuseIdentifier:(NSString*)reuseIdentifier {
    if (self.prototypeCells == nil) {
        self.prototypeCells = [[NSMutableDictionary alloc] init];
    }

    UITableViewCell* cell = self.prototypeCells[reuseIdentifier];
    if (cell == nil) {
        cell = [self dequeueReusableCellWithIdentifier:reuseIdentifier];
        self.prototypeCells[reuseIdentifier] = cell;
    }
    return cell;
}

@end 
```

**用法**

获取storyboard中设置的静态高度就这么简单：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return [tableView heightForRowWithReuseIdentifier:@"cellIdentifier"];
} 
```

假设一个多节表视图：

```
enum {
    kFirstSection = 0,
    kSecondSection
};

static NSString* const kFirstSectionRowId = @"section1Id";
static NSString* const kSecondSectionRowId = @"section2Id";

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    CGFloat height = tableView.rowHeight; // Default UITableView row height
    switch (indexPath.section) {
        case kFirstSection:
            height = [tableView heightForRowWithReuseIdentifier:kFirstSectionRowId];
            break;
        case kSecondSection:
            height = [tableView heightForRowWithReuseIdentifier:kSecondSectionRowId];
    }
    return height;
} 
```

最后，如果行高是动态的：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    id thisRowData = self.allData[indexPath.row]; // Obtain the data for this row

    // Obtain the prototype cell
    MyTableViewCell* cell = (MyTableViewCell*)[self prototypeCellWithReuseIdentifier:@"cellIdentifier"];

    // Ask the prototype cell for its own height when showing the specified data
    return [cell heightForData:thisRowData];
} 
```

# java - ExecuteQuery：Java 堆空间不足

> ID：13660005
> 
> 赞同：1
> 
> 时间：2012-12-01T13:41:09.753
> 
> 标签：java, sql, executequery

我正在使用 ExecuteQuery [(www.executequery.org](http://www.executequery.org) ) 连接到远程 Oracle 数据库。我收到了一个我应该在这个数据库上运行的 .sql 文件。但是我什至无法将此文件加载到 ExecuteQuery 中，因为它显然太大了：我得到一个 Java 异常，说 Java 堆空间太小。

我知道从控制台执行 Java 程序时如何指定 Java 堆大小。但是我怎样才能告诉 ExecuteQuery 增加堆？有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:08:08.427

I had the same issue, and I solved it with a little workaround: Go to something like

```
Menu -> Database -> execute SQL script 
```

Like this, the heap space seems not to be affected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:54:52.573

我不认为你的 sql 太大。您所看到的可能只是另一个错误的症状。您是否尝试过在启动程序时提高堆？如果是，您应该尝试调试程序，看看您是否遇到了昂贵的循环或类似情况。也许它甚至是 ExecuteQuery 中的一个错误 - 尝试在他们的谷歌组中询问。

我认为没有任何可能也不需要从应用程序内分配内存。

# node.js - 使用nodejs下载bing的壁纸

> ID：13660006
> 
> 赞同：1
> 
> 时间：2012-12-01T13:41:12.050
> 
> 标签：node.js

我想通过node.js下载bing的今日壁纸，

首先，**我可以从其他一些网站下载大图片**，

但我无法从 bing 下载图片，即使我可以在浏览器中看到图片

示例图片 src 为：“http://www.bing.com/az/hprichbg?p=rb%2fYosemiteSnow_EN-US7191433727_1920x1200.jpg”

这是我的核心代码

```
var download_file_httpget = function(file_url) {
    var options = {
        host: url.parse(file_url).host,
        port: 80,
        path: url.parse(file_url).pathname,
        headers: {}
    };
    var file_name = '11.jpg';
    var file = fs.createWriteStream(download_path + "\\" + file_name);
    http.get(options,function(res) {
        res.on('data',function(data) {
            file.write(data);
        }).on('end',function() {
            file.end();
            console.log('download success');
        });
    });
}; 
```

例如，原始图片的大小是200k，但它只下载20k，我怀疑这是因为标题中的'referer'，当我添加标题时，问题在一些其他网站修复，但它仍然存在不适用于必应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:13:32.837

切换到

```
path: url.parse(file_url).path, 
```

将包含查询字符串并为您提供整个文件。

下载的文件是[HTML 文本文件](http://www.bing.com/az/hprichbg)，而不是 jpeg。

```
console.log(url.parse(file_url)); 
```

显示这个：

```
{
    protocol: 'http:',
    slashes: true,
    host: 'www.bing.com',
    hostname: 'www.bing.com',
    href: 'http://www.bing.com/az/hprichbg?p=rb%2fYosemiteSnow_EN-US7191433727_1920x1200.jpg',
    search: '?p=rb%2fYosemiteSnow_EN-US7191433727_1920x1200.jpg',
    query: 'p=rb%2fYosemiteSnow_EN-US7191433727_1920x1200.jpg',
    pathname: '/az/hprichbg',
    path: '/az/hprichbg?p=rb%2fYosemiteSnow_EN-US7191433727_1920x1200.jpg'
} 
```

由于您使用`pathname`的是 ，所以网址是：

```
http://www.bing.com/az/hprichbg 
```

所以 Bing 不知道要返回哪个图像。

# android - 相机启动预览失败

> ID：13660009
> 
> 赞同：10
> 
> 时间：2012-12-01T13:41:30.553
> 
> 标签：android, camera

我正在创建一个相机应用程序，但我遇到了问题`startPreview`，它发送给我：

```
java.lang.RuntimeException: startPreview failed 
```

这是我的相机*活动*：

```
public class CameraActivity extends Activity {

private Camera mCamera;
private CameraPreview  mPreview;
private Target_Frame targetFrame;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera_layout);

    mCamera=getCameraInstance();
    mPreview=new CameraPreview(this, mCamera);

    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);
    preview.addView(mPreview);

}

/** Check if this device has a camera only if not specified in the manifest */
public boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
}

/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

/**Check if the device has flash*/
public boolean checkFlash(Context context){
    if(context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)){
        //the device has flash
        return true;
    }else{
        //no flash
        return false;
    }

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    releaseCamera();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    releaseCamera();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    //Test if i have to put all this code like in onCreate
    if(mCamera!=null){
        return;
    }
    mCamera=getCameraInstance();

    if(mPreview!=null){
        return;
    }
    mPreview=new CameraPreview(this, mCamera);
    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);
    preview.addView(mPreview);

}

private void releaseCamera(){
    if (mCamera != null){
        mCamera.release();        // release the camera for other applications
        mCamera = null;
    }
}} 
```

这是我的*SurfaceView*代码：

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "CameraPreview";
    private SurfaceHolder mHolder;
    private Camera mCamera;

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();

        } catch (IOException e) {
            Log.d(TAG, "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // empty. Take care of releasing the Camera preview in your activity.
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here
        Parameters parameters= mCamera.getParameters();
        parameters.setPreviewSize(w, h);
        mCamera.setParameters(parameters);

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    }
} 
```

这是我的错误日志：

```
12-01 13:17:01.135: E/AndroidRuntime(1161): FATAL EXCEPTION: main

12-01 13:17:01.135: E/AndroidRuntime(1161): java.lang.RuntimeException: startPreview

12-01 13:17:01.135: E/AndroidRuntime(1161):     at com.example.prueba.CameraPreview.surfaceCreated(CameraPreview.java:36) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:40:18.203

我已经解决了删除surfaceChanged中的一些行

```
 public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.
        Log.d("Function", "surfaceChanged iniciado");
        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    } 
```

所以错误必须在 i 这些行之一中：

```
Parameters parameters= mCamera.getParameters();
    parameters.setPreviewSize(w, h);
    mCamera.setParameters(parameters); 
```

有人可以向我解释这些行有什么问题吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-10T06:47:48.587

(w, h) 是您相机的有效预览尺寸吗？

您可以使用`mCamera.getParameters().getSupportedPreviewSizes()`来获取所有有效的预览尺寸。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-24T11:13:17.133

为时已晚，但如果有人在寻找答案

变量 w 和 h 不是最佳预览尺寸。您可以使用该功能获得最佳预览尺寸

```
public static Camera.Size getOptimalPreviewSize(List<Camera.Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio=(double)h / w;
        if (sizes == null) return null;

        Camera.Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        for (Camera.Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Camera.Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    } 
```

你可以使用调用函数

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
..
size=getOptimalPreviewSize(parameters.getSupportedPreviewSizes(), w, h);
 parameters.setPreviewSize(size.getWidth(), size.getHeight());
..

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-08T11:02:31.347

```
public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.getParameters().getSupportedPreviewSizes();
        mCamera.startPreview();
        Log.d(TAG, "Camera preview started.");
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-10T13:18:37.030

我有这个错误，这是因为我第一次启动我的应用程序时没有在 onPause 上调用 releaseCamera。
重启后一切正常^^

# android - Android Facebook 集成不会注销

> ID：13660012
> 
> 赞同：1
> 
> 时间：2012-12-01T13:41:53.293
> 
> 标签：android, facebook, facebook-login, facebook-android-sdk

我正在使用以下代码开发 Facebook Android 集成，但是一旦我通过此应用程序登录，即使我从我的设备上从 Facebook 应用程序或浏览器中注销，它也不会从 facebook 注销。所以这个 android 应用程序仍然可以在我的 Facebook 墙上发布。如果我从我的 facebook 应用程序或浏览器上的 facebook 注销，我如何从这个应用程序注销。

```
 package com.facebook.androidhive;

 import java.io.FileNotFoundException;
 import java.io.IOException;
 import java.net.MalformedURLException;

 import org.json.JSONException;
 import org.json.JSONObject;

 import android.app.Activity;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;
 import android.widget.Toast;

 import com.facebook.android.AsyncFacebookRunner;
 import com.facebook.android.AsyncFacebookRunner.RequestListener;
 import com.facebook.android.DialogError;
 import com.facebook.android.Facebook;
 import com.facebook.android.Facebook.DialogListener;
 import com.facebook.android.FacebookError;

 public class AndroidFacebookConnectActivity extends Activity {

// Your Facebook APP ID
private static String APP_ID = "APP_ID"; // Replace with your App ID

// Instance of Facebook Class
private Facebook facebook = new Facebook(APP_ID);
private AsyncFacebookRunner mAsyncRunner;
String FILENAME = "AndroidSSO_data";
private SharedPreferences mPrefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mAsyncRunner = new AsyncFacebookRunner(facebook);

    loginToFacebook();

    postToWall();

}

/**
 * Function to login into facebook
 * */
public void loginToFacebook() {

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);

        Log.d("FB Sessions", "" + facebook.isSessionValid());
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

                    @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());
                        editor.commit();

                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error

                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors

                    }

                });
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
}

/**
 * Function to post to facebook wall
 * */
public void postToWall() {
    // post on user's wall.
    facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onCancel() {
        }
    });

}

/**
 * Function to Logout user from Facebook
 * */
public void logoutFromFacebook() {
    mAsyncRunner.logout(this, new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.d("Logout from Facebook", response);
            if (Boolean.parseBoolean(response) == true) {
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {

                    }

                });

            }
        }

        @Override
        public void onIOException(IOException e, Object state) {
        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
        }
    });
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:02:21.723

如果您注销 Facebook 应用程序，则不能强制从您的应用程序注销，至少我们的 SDK 不支持任何 API。

理论上，您可以找到一种方法来附加某种卸载意图或解析有关 facebook 注销的任何消息的日志，但通常不建议将另一个应用程序注销时强制注销另一个应用程序作为最佳实践（它不是用户直观地知道这将发生）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:21:50.293

尝试删除此代码

```
if (access_token != null) {
        facebook.setAccessToken(access_token);

        Log.d("FB Sessions", "" + facebook.isSessionValid());
    } 
```

# maven - 在eclipse中使用Maven构建c++

> ID：13660014
> 
> 赞同：18
> 
> 时间：2012-12-01T13:41:57.777
> 
> 标签：maven, mingw, integration, lifecycle, eclipse-cdt

我的项目由多个 Java 项目、一个作为桥梁的 Java-JNI-C++ 项目和一个保留算法库的纯 C++ 项目组成。我设法为所有 3 种项目类型编写了 Maven 构建配置。因此，当我在命令行（Windows 7、64 位）上调用它们时，一切正常。

我不使用任何 make 文件或类似的东西。我使用 exec-maven-plugin 在没有 cygwin 的情况下调用我的 mingw 64 位安装（而且我至少也没有故意安装 msys）。因此，JNA 和库项目各有 2 个纯命令行 g++ 命令。

我现在需要一个流畅的开发工作流程，能够在 Eclipse 中构建和调试这个项目，但使用 maven 构建脚本，因为我不想将工作放入我的 poms 并另外配置 eclipse 构建器。这应该是一致的！此外，Eclipse 中的错误解析是否应该与 maven 构建的输出一致。

对于我的 Java 项目，它开箱即用。Eclipse 选择了 maven 配置，CLEAN 和 BUILD 准确地产生了它应该的东西。（虽然我看到 Java Builder 在项目的属性中仍然处于活动状态。为什么？？）。但我无法让它与 CDT 一起使用。

**当我禁用 C++ Builder 时，Eclipse 只是用 maven 构建（我想要的），但是干净的命令不能正常工作。此外，我得到标记的错误不是编译器的错误。当然，这应该是一致的。**

这个用例有教程吗？

我没有找到有关该主题的信息。我不确定我是否通常会走错方向，缺少最佳实践或其他什么？！

由于这是我的第一个问题，请随时就我的问题给我反馈。我能提供的我会提供的;-)

一些信息：

系统 Windows 7, 64 位

日食朱诺，m2e

图书馆 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>test</groupId>
  <artifactId>mylib</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>MyLib</name>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>1.0.0</version>
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>exec-maven-plugin</artifactId>
                    <versionRange>[1.1.1,)</versionRange>
                    <goals>
                      <goal>exec</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <execute>
                      <runOnIncremental>true</runOnIncremental>
                    </execute>
                  </action>
                </pluginExecution>
              </pluginExecutions>
            </lifecycleMappingMetadata>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.1.1</version>
        <executions>
          <execution>
            <id>compile-Windows_x64</id>
            <phase>compile</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>g++</executable>
              <workingDirectory>target/cpp/Windows_x64</workingDirectory>
              <arguments>
                <argument>-Wall</argument>
                <argument>-m64</argument>
                <argument>-c</argument>
                <argument>-DAPI_EXPORT</argument>
                <argument>-g3</argument>
                <argument>-std=c++0x</argument>
                <argument>../../../src/main/cpp/*.cpp</argument>
              </arguments>
            </configuration>
          </execution>
          <execution>
            <id>link-Windows_x64</id>
            <phase>compile</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>g++</executable>
              <workingDirectory>target</workingDirectory>
              <arguments>
                <argument>-shared</argument>
                <argument>-s</argument>
                <argument>-m64</argument>
                <argument>-oMyLib_Windows_x64.dll</argument>
                <argument>cpp/Windows_x64/*.o</argument>
              </arguments>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <descriptors>
            <descriptor>src/main/assembly/assembly.xml</descriptor>
          </descriptors>
        </configuration>
        <executions>
          <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-testCompile</id>
            <phase>none</phase>
          </execution>
          <execution>
            <id>default-compile</id>
            <phase>none</phase>
          </execution>
        </executions>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-jar</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.10</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>default-resources</id>
            <phase>none</phase>
          </execution>
          <execution>
            <id>default-testResources</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-install</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.7</version>
        <executions>
          <execution>
            <id>default-deploy</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-site-plugin</artifactId>
        <version>3.0</version>
        <executions>
          <execution>
            <id>default-site</id>
            <phase>none</phase>
          </execution>
          <execution>
            <id>default-deploy</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

JNI POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>test</groupId>
  <artifactId>myprog</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>MyProg</name>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>1.0.0</version>
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>truezip-maven-plugin</artifactId>
                    <versionRange>[1.1,)</versionRange>
                    <goals>
                      <goal>copy</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <execute>
                      <runOnIncremental>true</runOnIncremental>
                    </execute>
                  </action>
                </pluginExecution>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>exec-maven-plugin</artifactId>
                    <versionRange>[1.1.1,)</versionRange>
                    <goals>
                      <goal>exec</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <execute>
                      <runOnIncremental>true</runOnIncremental>
                    </execute>
                  </action>
                </pluginExecution>
              </pluginExecutions>
            </lifecycleMappingMetadata>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>truezip-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
          <execution>
            <id>get-library-headers</id>
            <goals>
              <goal>copy</goal>
            </goals>
            <phase>generate-sources</phase>
            <configuration>
              <fileset>
                <directory>../MyLib/target/mylib-0.0.1-SNAPSHOT-dll.zip</directory>
                <includes>
                  <include>headers/*</include>
                </includes>
                <outputDirectory>${project.build.directory}/myLib</outputDirectory>
              </fileset>
            </configuration>
          </execution>
          <execution>
            <id>get-library</id>
            <goals>
              <goal>copy</goal>
            </goals>
            <phase>generate-resources</phase>
            <configuration>
              <fileset>
                <directory>../MyLib/target/mylib-0.0.1-SNAPSHOT-dll.zip</directory>
                <includes>
                  <include>*.dll</include>
                </includes>
                <outputDirectory>${project.build.directory}</outputDirectory>
              </fileset>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.1.1</version>
        <executions>
          <execution>
            <id>compile-Windows_x64</id>
            <phase>compile</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>g++</executable>
              <workingDirectory>target/cpp/Windows_x64</workingDirectory>
              <arguments>
                <argument>-Wall</argument>
                <argument>-m64</argument>
                <argument>-c</argument>
                <argument>-g3</argument>
                <argument>-std=c++0x</argument>
                <argument>-I../../myLib/headers</argument>
                <argument>../../../src/main/cpp/*.cpp</argument>
              </arguments>
            </configuration>
          </execution>
          <execution>
            <id>link-Windows_x64</id>
            <phase>compile</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>g++</executable>
              <workingDirectory>target</workingDirectory>
              <arguments>
                <argument>-m64</argument>
                <argument>-s</argument>
                <argument>-oMyProg_Windows_x64.exe</argument>
                <argument>cpp/Windows_x64/*.o</argument>
                <argument>MyLib_Windows_x64.dll</argument>
              </arguments>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-testCompile</id>
            <phase>none</phase>
          </execution>
          <execution>
            <id>default-compile</id>
            <phase>none</phase>
          </execution>
        </executions>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-jar</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.10</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>default-resources</id>
            <phase>none</phase>
          </execution>
          <execution>
            <id>default-testResources</id>
            <phase>none</phase>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T14:47:48.343

Eclipse 不**使用**Maven 构建。相反，它会根据您的 POM 配置 JDT。这是通过 M2E（Maven 到 Eclipse）连接器完成的。如果您希望 CDT 也能正常工作，那么您需要一个 M2E 连接器。我不知道现有的，所以你必须为此编写一个 Eclipse 插件。有关如何执行此操作的详细信息，请参阅[http://wiki.eclipse.org/M2E/Extension_Development 。](http://wiki.eclipse.org/M2E/Extension_Development)

当然，您也可以在 pom.xml 的生命周期映射中使用“执行”而不是“忽略”。但这可能会导致构建非常缓慢，因为每次更改都会触发整个构建。这仍然不会“神奇地”使来自 Maven 的错误出现在您的文件中。

# c++ - 未解析的外部符号 C++

> ID：13660017
> 
> 赞同：3
> 
> 时间：2012-12-01T13:42:13.433
> 
> 标签：c++, class, symbols

我对下面的代码有疑问：

**程序设置.h**

```
#pragma once
static class ProgrammSettings
{
public:
    static int fd;
}; 
```

**设置.cpp**

```
#include "ProgrammSettings.h"

static bool LoadSettings()
{
    ProgrammSettings::fd = 2; // here error Unresolved symbol!!
    return true;
} 
```

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T13:43:58.400

与只需要声明的实例变量不同，类的静态成员变量也必须*定义*。

目前，您的代码仅包含一个声明。将静态变量的*定义*添加`fd`到 cpp 文件以修复错误：

```
int ProgrammSettings::fd; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:44:21.883

您需要将以下行添加到 cpp 文件的开头

```
 int ProgrammSettings::fd; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:45:27.277

类声明中的静态数据成员声明不是它们的定义您忘记添加定义以匹配您的`fd`.
您必须明确定义您的类的静态数据成员。

# hadoop - 连接 Elastic Map Reduce ruby 客户端时出错

> ID：13660023
> 
> 赞同：2
> 
> 时间：2012-12-01T13:42:52.797
> 
> 标签：hadoop, amazon-s3, amazon-web-services, elastic-map-reduce

我正在按照 AWS 上提到的步骤使用 SSH 使用交互式 Hive 会话。我使用了以下资源

1.  [https://github.com/ucbtwitter/getting-started/wiki/Using-Elastic-Map-Reduce-via-Command-Line](https://github.com/ucbtwitter/getting-started/wiki/Using-Elastic-Map-Reduce-via-Command-Line)
2.  [http://docs.amazonwebservices.com/ElasticMapReduce/latest/GettingStartedGuide/SignUp.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/GettingStartedGuide/SignUp.html)

我最初收到此错误**“错误：缺少密钥访问 ID”**，然后我修复了我的 JSON 文件。JSON 文件的格式与上述链接中提到的格式相同。

当我运行这个命令

```
./elastic-mapreduce 
```

我收到以下错误：-

**错误：无法解析凭据.json：无法将字符串转换为整数。**

我也在 AWS 上检查了 JSON 所需的值。

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-05T22:20:52.223

credentials.json 中的区域值必须是 int 类型。

```
{......
......
"region": 1
} 
```

# .net - System.ServiceModel WCF Service Mono 缺少框架

> ID：13660032
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:44:03.940
> 
> 标签：.net, wcf, mono

但我在网上查遍了，似乎没有人遇到这个问题。我正在尝试使用单声道（4.0 框架）连接到我的 Windows WCF 服务。

但是，当我在编写程序时，我输入`using System.ServiceModel`它找不到它......我想我只是在做一些非常愚蠢的事情，但有人可以告诉我什么吗？！:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:24:13.953

你必须参考`System.ServiceModel.dll`:)

# java - JPA坚持不写入数据库

> ID：13660033
> 
> 赞同：5
> 
> 时间：2012-12-01T13:44:13.133
> 
> 标签：java, jpa, eclipselink

我只是想了解 JSF 和 JPA，但是每当我尝试将对象持久保存到数据库中时，它似乎都不会写掉。这是我正在使用的代码：

```
@Named
@ManagedBean
@SessionScoped
public class BestemmingController implements Serializable{

@PersistenceUnit(unitName="RealDolmenTravelShopPU")
@PersistenceContext(unitName="RealDolmenTravelShopPU")

EntityManagerFactory emf = null;
public void submit(){

        try{
            emf = Persistence.createEntityManagerFactory("RealDolmenTravelShopPU");

            EntityManager em = emf.createEntityManager();

            //EntityTransaction et = em.getTransaction();
            //et.begin();

            Bestemming nieuweBestemming = new Bestemming();

            Land gezochtLand = em.find(Land.class, selectedLand);

            nieuweBestemming.setLand(gezochtLand);
            nieuweBestemming.setNaam(bestemmingNaam);

            em.persist(nieuweBestemming);

            //et.commit();
            //em.flush();
            em.close();
        }catch (Exception e){
            e.printStackTrace();
        }finally{
            emf.close();
        }
    } 
```

我尝试使用 EntityTransaction 但它只是停止了我的应用程序，没有任何错误或任何东西。所以我把它留了下来，但它仍然没有写掉。所以然后我尝试单独调用flush，但这也没有做任何事情。我真的很困惑为什么这不起作用。这可能是一些新手的错误，但如果有人可以帮助我，我会很高兴。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:15:28.600

首先，您可以写入日志吗？在指定持久性单元使用 JTA 时启动事务将引发异常，因此很可能您刚刚在容器日志文件中丢失了异常。

其次，这是一个 JTA PU，因此它需要启动一个与 EM 关联的 JTA 事务，并且您将希望注入 em 而不是自己创建工厂。首先在这里查看 JPA 应用程序服务器示例以了解它们是如何设置的： [http ://wiki.eclipse.org/EclipseLink/Examples/JPA](http://wiki.eclipse.org/EclipseLink/Examples/JPA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:24:07.480

嘿，我发现为什么事务没有运行：我使用的实现没有使用 JTA，它使用了 RESOURCE_LOCAL 持久性单元。这是我在设置项目时刚刚查看的内容。

好在我的朋友告诉我检查服务器日志。

# python - Emacs：杀死正在运行的python脚本

> ID：13660042
> 
> 赞同：2
> 
> 时间：2012-12-01T13:45:10.240
> 
> 标签：python, emacs, matplotlib

我不知道这是否是 matplotlib/python 的错误，但从 emacs 运行以下命令会消除我通过单击图形窗口上的 [x] 来终止 matplotlib 进程的能力，它没有任何效果。是否有用于终止 emacs 启动的特定进程的命令（我用谷歌搜索过，没有运气）？我可以通过找到缓冲区并执行来终止进程，`C-x k`但这有点麻烦，有什么方法可以杀死所有正在运行的 python 进程？

```
#Simple circular box simulator, part of part_sim
#Restructure to import into gravity() or coloumb () or wind() or pressure()
#Or to use all forces: sim_full()
#Note: Implement crashing as backbone to all forces
import numpy as np
import matplotlib.pyplot as plt
from scipy.spatial.distance import pdist, squareform

N = 100                                             #Number of particles
R = 10000                                           #Box width
pR= 5                                               #Particle radius

r = np.random.randint(0, R, (N,2))                  #Position vector
v = np.random.randint(-R/100,R/100,(N,2))           #velocity vector
a = np.array([0,-10])                               #Forces
v_limit = R/2                                       #Speedlimit

plt.ion()
line, = plt.plot([],'o')
line2, = plt.plot([],'o')                           #Track a particle
plt.axis([0,R+pR,0,R+pR]

while True:

    v=v+a                                           #Advance
    r=r+v

    #Collision tests
    r_hit_x0 = np.where(r[:,0]<0)                   #Hit floor?
    r_hit_x1 = np.where(r[:,0]>R)                   #Hit roof?
    r_hit_LR = np.where(r[:,1]<0)                   #Left wall?
    r_hit_RR = np.where(r[:,1]>R)                   #Right wall?

    #Stop at walls
    r[r_hit_x0,0] = 0
    r[r_hit_x1,0] = R
    r[r_hit_LR,1] = 0
    r[r_hit_RR,1] = R

    #Reverse velocities
    v[r_hit_x0,0] = -0.9*v[r_hit_x0,0]
    v[r_hit_x1,0] = -v[r_hit_x1,0]
    v[r_hit_LR,1] = -0.95*v[r_hit_LR,1]
    v[r_hit_RR,1] = -0.99*v[r_hit_RR,1]

    #Collisions
    D = squareform(pdist(r))
    ind1, ind2 = np.where(D < pR)
    unique = (ind1 < ind2)
    ind1 = ind1[unique]
    ind2 = ind2[unique]

    for i1, i2 in zip(ind1, ind2):
        eps = np.random.rand()
        vtot= v[i1,:]+v[i2,:]
        v[i1,:] = -(1-eps)*vtot
        v[i2,:] = -eps*vtot

    line.set_ydata(r[:,1])
    line.set_xdata(r[:,0])
    line2.set_ydata(r[:N/5,1])
    line2.set_xdata(r[:N/5,0])
    plt.draw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:20:53.653

`C-c C-\`将使用 SIGQUIT 终止程序，但这不是结束程序的优雅方式。

或者，如果您将后端更改为`TkAgg`,`C-c C-c`也会终止程序（再次不优雅），但尝试关闭窗口仍然不起作用。

```
 import numpy as np
   import matplotlib as mpl
   mpl.use('TkAgg') # do this before importing pyplot
   import matplotlib.pyplot as plt 
```

一个完整、强大的解决方案需要`plt.ion()`使用 Tk、pygtk、wxpython 或 pyqt 等 GUI 框架移除 .

* * *

下面是一个使用 Tk 的例子：

```
"""
http://stackoverflow.com/q/13660042/190597
Simple circular box simulator, part of part_sim
Restructure to import into gravity() or coloumb () or wind() or pressure()
Or to use all forces: sim_full()
Note: Implement crashing as backbone to all forces
"""

import tkinter as tk
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.figure as mplfig
import scipy.spatial.distance as dist
import matplotlib.backends.backend_tkagg as tkagg

class App(object):
    def __init__(self, master):
        self.master = master
        self.fig = mplfig.Figure(figsize = (5, 4), dpi = 100)
        self.ax = self.fig.add_subplot(111)
        self.canvas = canvas = tkagg.FigureCanvasTkAgg(self.fig, master)
        canvas.get_tk_widget().pack(side = tk.TOP, fill = tk.BOTH, expand = 1)
        self.toolbar = toolbar = tkagg.NavigationToolbar2TkAgg(canvas, master)
        self.button = button = tk.Button(master, text = 'Quit', command = master.quit)
        button.pack(side = tk.BOTTOM)
        toolbar.update()
        self.update = self.animate().__next__
        master.after(10, self.update) 
        canvas.show()

    def animate(self):
        N = 100                                             #Number of particles
        R = 10000                                           #Box width
        pR= 5                                               #Particle radius

        r = np.random.randint(0, R, (N,2))                  #Position vector
        v = np.random.randint(-R/100,R/100,(N,2))           #velocity vector
        a = np.array([0,-10])                               #Forces
        v_limit = R/2                                       #Speedlimit

        line, = self.ax.plot([],'o')
        line2, = self.ax.plot([],'o')                           #Track a particle
        self.ax.set_xlim(0, R+pR)
        self.ax.set_ylim(0, R+pR)        

        while True:
            v=v+a                                           #Advance
            r=r+v

            #Collision tests
            r_hit_x0 = np.where(r[:,0]<0)                   #Hit floor?
            r_hit_x1 = np.where(r[:,0]>R)                   #Hit roof?
            r_hit_LR = np.where(r[:,1]<0)                   #Left wall?
            r_hit_RR = np.where(r[:,1]>R)                   #Right wall?

            #Stop at walls
            r[r_hit_x0,0] = 0
            r[r_hit_x1,0] = R
            r[r_hit_LR,1] = 0
            r[r_hit_RR,1] = R

            #Reverse velocities
            v[r_hit_x0,0] = -0.9*v[r_hit_x0,0]
            v[r_hit_x1,0] = -v[r_hit_x1,0]
            v[r_hit_LR,1] = -0.95*v[r_hit_LR,1]
            v[r_hit_RR,1] = -0.99*v[r_hit_RR,1]

            #Collisions
            D = dist.squareform(dist.pdist(r))
            ind1, ind2 = np.where(D < pR)
            unique = (ind1 < ind2)
            ind1 = ind1[unique]
            ind2 = ind2[unique]

            for i1, i2 in zip(ind1, ind2):
                eps = np.random.rand()
                vtot= v[i1,:]+v[i2,:]
                v[i1,:] = -(1-eps)*vtot
                v[i2,:] = -eps*vtot

            line.set_ydata(r[:,1])
            line.set_xdata(r[:,0])
            line2.set_ydata(r[:N//5,1])
            line2.set_xdata(r[:N//5,0])
            self.canvas.draw()
            self.master.after(1, self.update) 
            yield

def main():
    root = tk.Tk()
    app = App(root)
    tk.mainloop()

if __name__ == '__main__':
    main() 
```

# android - Android DroidGap 空指针 onKeyDown()

> ID：13660043
> 
> 赞同：0
> 
> 时间：2012-12-01T13:45:11.287
> 
> 标签：android, jquery-mobile, back

我正在学习使用 jquerymobile 和 Android sdk 开发网络应用程序。我的网络应用程序在一些加载的页面中构建：

```
private void loadURL(final String in){
    handler.post(new Runnable() {
        public void run() {
            webView.loadUrl(in);
        }
    });
}

public void loadPage(String in){
    final String url = HTML_ROOT + in;
    loadURL(url);
} 
```

这是我的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    webView = new WebView(this); //super.init();

    setContentView(webView);
    webView.getSettings().setJavaScriptEnabled(true);   

    .....

    handler = new Handler();
    webView.addJavascriptInterface(this, "MyTeam");       
    loadPage("menu.html");

} 
```

和 onkeydown 方法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
   if(webView == null){
          Log.d("My Tag", "Webview is null on KeyCode: " + String.valueOf(keyCode));
        }
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
            webView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
} 
```

问题是： 示例 a： 1- 从 menu.html 我进入另一个页面 xxx.html 2- 我单击智能手机上的后退按钮 3- onKeyDown 被触发

示例 b：1-来自 menu.html 我单击智能手机后退按钮或其他按钮

返回 super.onkeydown 后，我在示例 a 和示例 b 中返回：

```
12-01 15:34:56.796: E/AndroidRuntime(14048): FATAL EXCEPTION: main
12-01 15:34:56.796: E/AndroidRuntime(14048): java.lang.NullPointerException
12-01 15:34:56.796: E/AndroidRuntime(14048):    at org.apache.cordova.DroidGap.onKeyUp(DroidGap.java:1018) 
```

为什么 DroidGapClass 给我返回空指针异常？？？？？？

非常感谢。

# asp.net - 你调用的对象是空的

> ID：13660047
> 
> 赞同：0
> 
> 时间：2012-12-01T13:45:56.030
> 
> 标签：asp.net, mysql

我的 asp.net-Mysql 应用程序托管在 windowsserver 上，当我尝试从 admin.aspx 页面将图像插入 mysql 表时，它显示错误

> “你调用的对象是空的。”

但是从我的 VS 中，我可以将图像插入到本地 mysql 服务器而不会出现任何错误。

当我从 webadmin 插入图像时，它已成功插入并在网站上显示图像。我可以通过我的 admin.aspx 更新内容，但是当我尝试更新或插入图像时，出现错误。

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Lavande.DBconnect.addimagehome(Byte[] image, String Content, String arabiccontent) in C:\Users\user\Desktop\Lavande_Asp\Lavande\Lavande\DBconnect.cs:33
   Lavande.abklavande900.button_savehome_Click(Object sender, EventArgs e) in C:\Users\user\Desktop\Lavande_Asp\Lavande\Lavande\abklavande900.aspx.cs:84
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

以下是读取上传文件的代码：

```
 string path = System.IO.Path.GetFullPath(FileUpload_home.PostedFile.FileName);
Byte[] image = WM.ImageSetting("watermarkname", Server.MapPath("upload/") + "logo1.png", path);
DB.addimagehome(image, contentsend, arabiccontent); 
```

水印类。

```
public class watermark
{
    public Byte[] ImageSetting(string wmText, string wmImage, string mainImage)
    {
        byte[] imageBytes = null;
        if (File.Exists(mainImage))
        {

            System.Drawing.Image image = System.Drawing.Image.FromFile(mainImage);

            Graphics graphic;
            if (image.PixelFormat != PixelFormat.Indexed && image.PixelFormat != PixelFormat.Format8bppIndexed && image.PixelFormat != PixelFormat.Format4bppIndexed && image.PixelFormat != PixelFormat.Format1bppIndexed)
            {
                // Graphic is not a Indexed (GIF) image
                graphic = Graphics.FromImage(image);
            }
            else
            {
                /* Cannot create a graphics object from an indexed (GIF) image.
                 * So we're going to copy the image into a new bitmap so
                 * we can work with it. */
                Bitmap indexedImage = new Bitmap(image);
                graphic = Graphics.FromImage(indexedImage);

                // Draw the contents of the original bitmap onto the new bitmap.
                graphic.DrawImage(image, 0, 0, image.Width, image.Height);
                image = indexedImage;
            }
            graphic.SmoothingMode = SmoothingMode.AntiAlias & SmoothingMode.HighQuality;

            //Text Watermark properties
            Font myFont = new Font("segoe script", 17, FontStyle.Bold);
            SolidBrush brush = new SolidBrush(Color.FromArgb(40, Color.White));
            SizeF textSize = new SizeF();
            if (wmText != "")
                textSize = graphic.MeasureString(wmText, myFont);

            //Image Watermark
            System.Drawing.Image ig = null;
            if (wmImage != "")
                ig = System.Drawing.Image.FromFile(wmImage);

            // Write the text watermark and image watermark across the main image.
            for (int y = 0; y < image.Height; y++)
            {
                for (int x = 0; x < image.Width; x++)
                {
                    PointF pointF = new PointF(x, y);
                    PointF pointFm = new PointF(x, y+150);
                    if (wmText != "")
                    {
                        graphic.DrawString(wmText, myFont, brush, pointFm);
                        x += Convert.ToInt32(textSize.Width);
                    }
                    if (wmImage != "")
                    {
                        graphic.DrawImage(ig, pointF);
                        x += Convert.ToInt32(ig.Width);
                    }
                }
                if (wmText != "")
                    y += Convert.ToInt32(textSize.Height);
                if (wmImage != "")
                    y += Convert.ToInt32(ig.Height);

            }

            using (MemoryStream memoryStream = new MemoryStream())
            {
                // save image in memoryStream with it format which get it from GetImageFormat function
                image.Save(memoryStream, GetImageFormat(mainImage));
                imageBytes = memoryStream.ToArray();
            }
            graphic.Dispose();
        }

        return imageBytes;

    }

    //function to return Image Format
    ImageFormat GetImageFormat(String path)
    {
        switch (Path.GetExtension(path).ToLower())
        {
            case ".bmp": return ImageFormat.Bmp;
            case ".gif": return ImageFormat.Gif;
            case ".jpg": return ImageFormat.Jpeg;
            case ".png": return ImageFormat.Png;
            default: return null;
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:52:31.160

根据您的堆栈跟踪及其指向的代码，该`image`变量必须为空。当您尝试查看该`Length`属性时会引发异常...没有可用于检查该属性的对象。

它为空的原因是您的`ImageSetting()`函数可以总结如下：

```
Byte[] ImageSetting(...)
{
    Byte[] imageBytes = null;
    if (File.Exists(...) )
    {
        //...
    }
    return imageBytes;
} 
```

显然， File.Exists() 调用失败，因此您不返回任何图像。您可能应该有一个可以加载和使用的占位符图像。此外，您不应该首先使用 File.Exists()，因为文件系统是易失的。相反，将您的编码工作投入到异常处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:53:39.087

就像我在评论中所写：无法从服务器检索您的图像，因为您的池身份无权访问该目录。

将包含图像的目录的访问权限设置为所有人，然后它可能会起作用（仅用于测试目的）。

# java - 将两个数组合并为一个

> ID：13660051
> 
> 赞同：2
> 
> 时间：2012-12-01T13:46:11.587
> 
> 标签：java, algorithm, merge

```
 int [] queue1 = {4,7,2,9,12,35,8,49};
    int [] queue2 = {24,53,6,19,41,71,1,68,11,32,99}        
    int[]mergeQ = new int[queue1.length + queue2.length];

    for(int i=0; i < queue1.length; i++ )
    {

      mergeQ[i*2] = queue1[i];       
      mergeQ[i*2+1] = queue2[i];  
    }
    for(int i=0; i < mergeQ.length; i++) {            
        System.out.print(mergeQ[i]+",");
    } 
```

输出：4,24,7,53,2,6,9,19,12,41,35,71,8,1,49,68,0,0,0

我如何打印出 queue2 的其余元素。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:50:34.043

您的合并算法假设`queue1.length < queue2.length`. 尽管它对您的程序是正确的，但做出这样的假设通常不是一件好事。

更改合并算法以遍历两个数组，直到达到较短数组的长度，然后将较长数组的剩余元素转储到合并数组的尾部。您可以在一个循环中完成所有操作，如下所示：

```
int p = 0;
for (int i = 0 ; i < queue1.length || i < queue2.length ; i++) {
    if (i < queue1.length) {
        mergeQ[p++] = queue1[i];
    }
    if (i < queue2.length) {
        mergeQ[p++] = queue2[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:51:35.073

这是一种方法：

```
 int[] queue1 = { 4, 7, 2, 9, 12, 35, 8, 49 };
    int[] queue2 = { 24, 53, 6, 19, 41, 71, 1, 68, 11, 32, 99 };
    int[] mergeQ = new int[queue1.length + queue2.length];

    int dest = 0;
    int src1 = 0;
    int src2 = 0;
    while (src1 < queue1.length || src2 < queue2.length) {
        if (src1 < queue1.length) {
            mergeQ[dest++] = queue1[src1++];
        }
        if (src2 < queue2.length) {
            mergeQ[dest++] = queue2[src2++];
        }
    }

    for (int i = 0; i < mergeQ.length; i++) {
        System.out.print(mergeQ[i] + ",");
    } 
```

无论是否更短，这都`queue1`有效`queue2`。

它还保留了算法的属性，即两个队列的元素是交错的。如果这不重要，那么整个事情可以用两次调用来代替[`System.arraycopy()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:50:17.710

我不确定是否有任何顺序您希望合并两个队列（例如队列 1 中的一个元素被队列 2 中的一个元素闲置），尽管闲置代码会将所有元素放入合并队列中。

```
int [] 
    queue1 = {4,7,2,9,12,35,8,49},
    queue2 = {24,53,6,19,41,71,1,68,11,32,99},
    mergeQ = new int[queue1.length + queue2.length];

for (int i=0; i < queue1.length; i++ )
    mergeQ[i] = queue1[i];

for (int i = 0; i < queue2.length; i++)
    mergeQ[queue1.length + i] = queue2[i];

for(int i=0; i < mergeQ.length; i++)
    System.out.print(mergeQ[i]+","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T13:58:32.133

检查哪个阵列更长。为两者之间的差异保留一个计数器。稍微修改一下代码……有点不正统……但更干净一点

```
int [] queue2 = {24,53,6,19,41,71,1,68,11,32,99};

int[]mergeQ = new int[queue1.length + queue2.length];

int larger=queue1.length;
int smaller=queue2.length;

if(queue1.length < queue2.length)
  {
   larger=queue2.length;
   smaller=queue1.length;
  }

    for(int i=0; i < queue1.length; i++ )
    {
      mergeQ[i*2] = queue1[i];       
      mergeQ[i*2+1] = queue2[i];

    }

    for(int i=mergeQ.length; i < queue2.length; i++ )
    {
       mergeQ[i] = queue2[larger-smaller];
       smaller++;
    }

    for(int i=0; i < mergeQ.length; i++){

        System.out.print(mergeQ[i]+",");
    } 
```

这应该为你做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T13:57:22.760

输入：{1, 3, 5, 7} 和 {2, 4, 6} 输出：{1, 2, 3, 4, 5, 6, 7}}

```
 int c[] = {2, 4, 6, 8};
        int n[] = {1, 3, 5, 7, 9};
        int f = 0;
        int res[] = new int[c.length + n.length];
        for(int i=0;i<(c.length + n.length); i++)
        {
            if(c.length > n.length)
            {
                if(i<c.length)
                    res[f++] = c[i];
                else if(f<=res.length-1)
                    res[f++] = c[i];

                if(i<n.length)
                res[f++] = (char) n[i];
            }else{
                if(i<n.length)
                    res[f++] = n[i];
                else if(f<=res.length-1)
                    res[f++] = n[i];

                if(i<c.length)
                res[f++] = (char) c[i];
            }

        }
        for(int i=0;i<res.length;i++)
        {
            System.out.print("   "+res[i]);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T13:56:07.340

```
int[] queue1 = {4,7,2,9,12,35,8,49};
int[] queue2 = {24,53,6,19,41,71,1,68,11,32,99}        
int[] mergeQ = new int[queue1.length + queue2.length

int i=0;
for(; i < queue1.length; i++ ){
  mergeQ[i*2] = queue1[i];       
  mergeQ[i*2+1] = queue2[i];
}
if(queue1.length>queue2.length){ 
 for(int j=i;j<queue1.length;j++)
  mergeQ[j+2] = queue1[j];
}else if(queue1.length<queue2.length){
 for(int j=i;j<queue2.length;j++)
  mergeQ[j+2] = queue2[j];
} 
```

# php - 显示来自 mysql 的新数据

> ID：13660056
> 
> 赞同：1
> 
> 时间：2012-12-01T13:47:08.267
> 
> 标签：php, jquery, facebook, gmail

我想知道 gmail 和 facebook 的新信息视图是如何工作的。就像在 gmail.. 空收件箱和没有页面重新加载显示新里程。它像 jquery 更新一样工作，或者是否有一些 jquery、php 代码检查数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:56:40.950

该过程是后端服务器处理（如 PHP，它只是等待请求并提供更新结果）的组合，加上带有 javascript 的前端（或您描述的 jQuery，它请求更新，或等待通知）是更新）。

上面的这个过程是两者的结合，不能单独完成，并且有许多可用于 AJAX 功能的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:03:46.850

您可以使用 signalR 进行侦听，当发送新数据时，它会将其发送到侦听连接。

微软正在推动它，但它实际上只是一个 javascript (AJAX) 框架，因此它可以用于任何平台。

[MSDN 公告](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)

[Stackoverflow 上的 SignalR](https://stackoverflow.com/questions/tagged/signalr)

# matlab - MATLAB：不同长度的向量

> ID：13660057
> 
> 赞同：0
> 
> 时间：2012-12-01T13:47:14.833
> 
> 标签：matlab, octave

我想创建一个 MATLAB 函数来从另一个目录中的文件导入数据并将它们拟合到给定模型，但是因为需要过滤数据（文件中的不同位置有“thrash”数据，例如之前没有测量分析的运动开始）。

因此，包含用于拟合的数据的向量最终具有不同的长度，因此我无法在矩阵中返回它们（例如，下面的函数中的 x）。我该如何解决这个问题？

我有很多数据文件，所以我不想使用“手动”方法。我的功能如下。欢迎所有和建议。

**数据拟合.m**

```
function [p, x, y_c, y_func] = datafit(pattern, xcol, ycol, xfilter, calib, p_calib,    func, p_0, nhl)

    datafiles = dir(pattern);
    path = fileparts(pattern);
    p = NaN(length(datafiles));
    y_func = [];
    for i = 1:length(datafiles)
        exist(strcat(path, '/', datafiles(i).name));
        filename = datafiles(i).name;
        data = importdata(strcat(path, '/', datafiles(i).name), '\t', nhl);
        filedata = data.data/1e3;
        xdata = filedata(:,xcol);
        ydata = filedata(:,ycol);
        filter = filedata(:,xcol) > xfilter(i);
        x(i,:) = xdata(filter);
        y(i,:) = ydata(filter);
        y_c(i,:) = calib(y(i,:), p_calib);
        error = @(par) sum(power(y_c(i,:) - func(x(i,:), par),2));
        p(i,:) = fminsearch(error, p_0);
        y_func = [y_func; func(x(i,:), p(i,:))];
    end
end 
```

**样本数据：** [http ://hastebin.com/mokocixeda.md](http://hastebin.com/mokocixeda.md)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:47:13.597

There are two strategies I can think of:

*   I would return the data in a [vector of cells](http://www.mathworks.co.uk/help/matlab/ref/cell.html;jsessionid=7244bcbe39b935e024d6fb8c659b) instead, where the individual cells store vectors of different lengths. You can access data the same way as arrays, but use curly braces: Say c{1}=[1 2 3], c{2}=[1 2 10 8 5] c{3} = [ ].
*   You can also filter the trash data upon reading a line, if that makes your vectors have the same length.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:47:46.050

如果内存不是主要问题，请尝试用不同的值填充向量，例如 NaN 或 Inf - 任何在基于物理上下文的测量中找不到的值。在为矩阵 (*) 分配内存之前，您可能需要确定最长的数据集。这样，您可以使用相同大小的矩阵，并在以后轻松忽略“空数据”。

(*) 想法...首先根据最大文件的大小分配内存。用例如 NaN 填充它

```
matrix = zeros(length(datafiles), longest_file_line_number) .* NaN; 
```

然后运行你的函数。确定最长连续数据集的长度。

```
new_max = length(xdata(filter));
if new_max > old_max
    old_max = new_max;
end
matrix(i, length(xdata(filter))) = xdata(filter); 
```

在函数返回之前相应地裁剪矩阵...

```
matrix = matrix(:, 1:old_max); 
```

# ruby-on-rails - Ruby on Rails - JS 输入令牌，验证失败时的问题

> ID：13660058
> 
> 赞同：5
> 
> 时间：2012-12-01T13:47:19.403
> 
> 标签：ruby-on-rails, jquery-tokeninput, validationerror

我有一个可以有很多标签的公司模型。它工作正常，但有一次它不起作用。情况是公司模型验证失败。在 :render => 'edit' 之后，它不会在视图中显示标签。我怀疑 data-pre 没有正确获取数据。我还希望在解决验证时保留标签。

我从这里得到了这个想法：[http ://railscasts.com/episodes/167-more-on-virtual-attributes](http://railscasts.com/episodes/167-more-on-virtual-attributes)

我使用输入令牌控制： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

这就是我在公司模型中关于 tag_tokens 的内容：

```
 before_save :save_tag_tokens
  attr_writer :tag_tokens
  attr_accessible :tag_tokens

  def tag_tokens
    @tag_tokens || tags.to_json(:only => [:id, :name])
  end

  def save_tag_tokens
    if @tag_tokens
      @tag_tokens.gsub!(/CREATE_(.+?)_END/) do
        Tag.create!(:name => $1.strip.downcase).id
      end
      self.tag_ids = @tag_tokens.split(",")
    end
  end 
```

这是视图中的代码：

```
 <div class="input text no-border">
    <% Tag.include_root_in_json = false %>
    <%= company_form.label :tag_tokens, t('form.account.company.edit.company_tags_html')%>
    <%= company_form.text_field :tag_tokens, :id => 'company_tag_tokens', "data-pre" => @company.tag_tokens%>
    <p class="tip"><%= t('form.account.company.edit.tag_tip') %></p>
  </div> 
```

编辑：

好的，所以我看到上面的代码有什么问题。

当我加载编辑页面数据-pre 包含这个：`data-pre="[{&quot;id&quot;:1704,&quot;name&quot;:&quot;dump truck&quot;}]"`。当我提交带有验证错误的表单时，data-pre 包含：`data-pre="1704"`.

如果我将代码更改为：

```
def tag_tokens
    tags.to_json(:only => [:id, :name])
end 
```

尚未保存到公司模型的新标签将被删除，因为它们每次都从数据库中读取。如何在表单转换之间保留输入的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:11:59.273

好的，我已经写了一个解决方案，它可能不是最好的，但它对我有用！它将输入令牌值解析为 JSON 格式（当验证失败时），加载页面时使用该格式。在页面加载下，它只从数据库加载标签。

```
 def tag_tokens
    if @tag_tokens
      #if there is user info, parse it to json format. create an array
      array = @tag_tokens.split(",")
      tokens_json = []
      #loop through each tag and check if it's new or existing
      array.each do |tag|
        if tag.to_s.match(/^CREATE_/)
          #if new generate json part like this:
          tag.gsub!(/CREATE_(.+?)_END/) do
            tokens_json << "{\"id\":\"CREATE_#{$1.strip.downcase}_END\",\"name\":\"Add: #{$1.strip.downcase}\"}"
          end
        else
          #if tag is already in db, generate json part like this:
          tokens_json << "{\"id\":#{tag},\"name\":\"#{Tag.find_by_id(tag).name}\"}"
        end
      end
      #encapsulate the value for token input with [] and add all tags from array
      "[#{tokens_json.to_sentence(:last_word_connector  => ',', :words_connector => ',', :two_words_connector => ',')}]"
    else
      #if there is no user input already load from DB
      tags.to_json(:only => [:id, :name])
    end
  end 
```

# dev-c++ - 如何在开发 C++ 中绘制彩色线条

> ID：13660059
> 
> 赞同：0
> 
> 时间：2012-12-01T13:47:21.267
> 
> 标签：dev-c++

我在使用 dev C++ 在控制台中绘制彩色线条时遇到了麻烦。

我曾尝试在 Google 中搜索它，但找不到与它相关的单个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:03:13.870

你需要一个图形库。在 TC 中可以使用 graphics.h，但由于编译器不兼容，在 dev c++ 中不能使用 graphics.h。但是你可以选择 openGL 或者只是 windows API。

# hamachi - 系统锁定后Hamachi禁用

> ID：13660060
> 
> 赞同：0
> 
> 时间：2012-12-01T13:47:34.823
> 
> 标签：hamachi

我从昨天开始就有问题了。当我登录计算机时，hamachi 工作正常，我的网络中有连接。但是在我锁定计算机后，我无法连接到它。在我登录到计算机后，它突然再次连接。

有人可以帮我解决这个问题吗？试了很多，hamachi系统服务正常，我还重装了软件...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:15:26.973

许可发生了变化。基本上，他们认为他们的产品太有用和太酷了，以至于人们不会为此付费。许可变更内容如下：

> 除非计算机是付费网络的一部分，否则您需要登录并在桌面上运行 Hamachi UI 才能使其正常运行

基本上，这关闭了使用 Hamachi 登录无人值守计算机的免费访问权限，但允许临时用户（如游戏玩家）继续免费使用它。

有关许可变更的通知，请参见：[11 月 19 日对 Hamachi 的变更](http://b.logme.in/2012/11/07/changes-to-hamachi-on-november-19th/)（[存档](https://web.archive.org/web/20130306103206/http://b.logme.in/2012/11/07/changes-to-hamachi-on-november-19th/)）；有些人对这种变化真的很生气。这种变化对我来说似乎是公平的，但遗憾的是他们不再可以自由地访问无人看管的计算机。我还没有在寻找免费的替代品。在超级用户的讨论中，[有人](https://superuser.com/questions/526633/how-can-i-run-hamachi-as-a-service)推荐了[NeoRouter](http://www.neorouter.com/)，但我还没有测试过；不过似乎是个不错的选择。

# twitter - 如何将 t.co URL 反转为原始推文？

> ID：13660061
> 
> 赞同：19
> 
> 时间：2012-12-01T13:47:37.033
> 
> 标签：twitter, url-shortener, short-url

我正在浏览我们的网站分析，并且有大量 t.co 网址，这些网址是我们正在进行的促销活动的引荐来源。我试图弄清楚是否有一种方法可以通过 Twitter API 或其他方式将它们恢复到它们起源的原始推文。不过，我似乎找不到这样做的好方法，有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T20:25:42.690

当 t.co 转发指向一条推文时，它会转到该推文的网页，并且该页面的 HTML 将包含规范 URL。

获取此信息的丑陋方法是使用 wget 或 curl 获取 HTML 目标，其中将包含您的初始推文的 URL。

更好的方法是使用 Python 模块 Requests（您需要先安装此模块）。这是一个可以执行此操作的快速命令行脚本：

```
#!/usr/bin/env python

import requests

shorturl = raw_input("Enter the shortened URL in its entirety: ")
r = requests.get(shorturl)

print("""
The shortened URL forwards to:

    %s
""" % r.url) 
```

该代码将适用于任何这些 URL 缩短服务，而不仅仅是 Twitter 的 t.co 网站。

我使用 Python 2.7 进行了测试，但上面的代码很可能适用于 Python 3.x。无论哪种方式，Requests 都是您的朋友，有关详细信息，请参阅文档：

[http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)

重定向和历史部分涵盖了这个例子。

我不知道如何通过 Twitter API 做到这一点，如果所有 URL 缩短都是自动的，这可能是不可能的。仍然基于 API 的解决方案仅适用于 t.co 地址，而上面的代码将适用于任何其他缩短的 URL 或任何重定向（例如 HTTP 301 或 302 响应代码）到另一个位置的 URL。

编辑（迟到总比没有好）：在使用上面找到 t.co forward 实际指向的位置之后，可能会出现三四种类型的结果。最常见的是 OP 认为它们都是这样，缩短粘贴到推文中的 URL，公平地说，它们中的大多数都是这样。

其他可能性是它链接回推文本身，这通常只出现在一些相当长的推文中（不确定随着字符限制的增加，频率增加了多少）；以及转发到独立于推文作者状态 URL 的状态 URL，这通常是嵌入式媒体（图像和视频）的情况；加上转发到正在引用推文或转发推文的推文的 URL。

鉴于 OP 的原始场景，这些内部 Twitter 使用都不会被看到，这里只关注“正常”转发。现在在 twitter.com 上搜索 t.co 地址对我们毫无用处，无论使用什么组合。

然而，搜索目标地址，如本答案开头的脚本所揭示的内容，则完全是另一回事。这将产生每条可公开访问并发布该链接的推文的结果。但是，也有一些缺点，包括：

1.  搜索结果将包括使用其他转发服务的推文。
2.  无法判断链接到该 URL 的所有推文是否生成了相同的 t.co 地址。
3.  如果没有，则无法查看哪条推文使用了哪个 t.co 转发。

然而，结合网络服务器上的完整引荐来源日志，可能会进一步缩小范围。假设引用 URL 报告的是推文的 URL，而不仅仅是 twitter.com。然而，这更有可能取决于点击链接的人的方式（即他们只是在流中看到推文还是将其扩展到足以显示其完整 URL）。

我怀疑引荐来源日志的有效性将是零星的，并且可能会在智能手机和平板电脑上降低，因为使用中的应用程序不太可能以这种方式扩展推文，以便将这些数据提供给第三方网站。

```
#!/usr/bin/env python3

import requests
import urllib.parse

shorturl = input("Enter the shortened URL in its entirety: ")
r0 = requests.get(shorturl, verify=True)
t0 = "https://twitter.com/search?f=tweets&q="
t1 = urllib.parse.quote_plus(r0.url)
r1 = requests.get("{0}{1}".format(t0, t1), verify=True)

# the results will be in r1.content
# there may be some benefit from cutting the http:// or 
# https:// from r0.url before creating the quoted string in t1. 
```

然而，这已经是最好的了……无需为增强的数据访问付费 Twitter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-13T09:31:59.687

1.  找出缩短的 URL 指向的原始 URL，例如使用[http://www.getlinkinfo.com之类的服务](http://www.getlinkinfo.com)
2.  将该原始网址粘贴到 Google 的搜索框中

如果您正在专门寻找来自 Twitter 的参考资料，请执行以下操作：`site:twitter.com "https://example.com"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-28T09:18:14.030

如果您使用 Twitter 搜索 API，您可以找到提及 t.co URL 的推文（如果它们对您可见）并以这种方式找到链接。

这是一些用于执行此操作的 Python，取自[我写的更长的博客文章](https://alexwlchan.net/2019/04/reversing-a-tco-url-to-the-original-tweet/)：

```
from requests_oauthlib import OAuth1Session

sess = OAuth1Session(
    client_key=TWITTER_CONSUMER_KEY,
    client_secret=TWITTER_CONSUMER_SECRET,
    resource_owner_key=TWITTER_ACCESS_TOKEN,
    resource_owner_secret=TWITTER_ACCESS_TOKEN_SECRET
)

def find_tweets_using_tco(tco_url):
    """
    Given a shortened t.co URL, return a set of URLs for tweets that use this URL.
    """
    # See https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets.html
    resp = sess.get(
        "https://api.twitter.com/1.1/search/tweets.json",
        params={
            "q": tco_url,
            "count": 100,
            "include_entities": True
        }
    )

    statuses = resp.json()["statuses"]

    tweet_urls = set()

    for status in statuses:
        # A retweet shows up as a new status in the Twitter API, but we're only
        # interested in the original tweet.  If this is a retweet, look through
        # to the original.
        try:
            tweet = status["retweeted_status"]
        except KeyError:
            tweet = status

        # If this tweet shows up in the search results for a reason other than
        # "it has this t.co URL as a short link", it's not interesting.
        if not any(u["url"] == tco_url for u in tweet["entities"]["urls"]):
            continue

        url = "https://twitter.com/%s/status/%s" % (
            tweet["user"]["screen_name"], tweet["id_str"]
        )

        tweet_urls.add(url)

    return tweet_urls 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-20T15:13:24.253

twitter 提供的公共 API 无法做到这一点。

如果我理解正确，您想查找最初嵌入特定 t.co 链接的推文。即 t.co 被关注时会解析到您的网站，而不是 twitter 推文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T07:23:19.993

引用您的页面的推文列表可在 Google Analytics 下直接菜单中`Social networks`找到。`Trackbacks`

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-09-18T06:09:49.667

这是您找到原始推文的方式：

1.  单击 t.co 链接以查找原始 URL
2.  转到[https://twitter.com/explore](https://twitter.com/explore) (#)
3.  将链接复制并粘贴到“搜索推特”搜索框中
4.  您将看到带有链接的推文

# mysql - 反转列值

> ID：13660062
> 
> 赞同：1
> 
> 时间：2012-12-01T13:47:41.197
> 
> 标签：mysql, replace

这是我的表格数据：

```
id __ firstname __ lastname __ salary
_____________________________________
1  __ John      __ Brown    __ 2,1000
2  __ David     __ Green    __ 3,8000
3  __ Matt      __ Blue     __ 1,6000 
```

你看，`salary`包含 2 个值，它们用逗号分隔。我想反转`salary`价值；所以 John 的薪水应该是`1000,2`, David`8000,3`和 Matt `6000,1`。

如何使用 sql 查询来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:57:15.003

这个怎么样：

```
SELECT CONCAT(SUBSTRING_INDEX(salary,',',-1), ',', SUBSTRING_INDEX(salary,',',1)); 
```

这是一个演示：[http ://sqlfiddle.com/#!2/d41d8/4473](http://sqlfiddle.com/#!2/d41d8/4473)

事情是这样的，SQL 的主要目的是存储和检索数据，而不是转换或修改它。理想情况下，您应该使用 PHP 来执行此操作。

# python - 成对统一列表项

> ID：13660064
> 
> 赞同：1
> 
> 时间：2012-12-01T13:48:09.203
> 
> 标签：python, list-comprehension

给定一个列表

```
[1,2,3,4,5,6] 
```

有`2n`元素

我如何获得清单

```
[1+2,3+4,5+6] 
```

与`n`元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:49:52.543

从[`itertools`食谱部分](http://docs.python.org/2/library/itertools.html#recipes)：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

然后调用：

```
for paired in grouper(2, inputlist):
    # paired is a tuple of two elements from the inputlist at a time. 
```

`grouper`返回一个迭代器；如果您*必须*有一个列表，只需将可迭代对象消耗到一个新列表中：

```
newlist = list(grouper(2, inputlist)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:51:42.840

```
a = [1,2,3,4,5,6]
b = [a[i]+a[i+1] for i in xrange(0,len(a),2)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T13:56:36.457

```
li = [1,2,10,20,100,200,2000,3000,2,2,3,3,5,5]
print li

it = iter(li)
if len(li)%2==0:
    print [x+it.next() for x in it] 
```

给

```
[1, 2, 10, 20, 100, 200, 2000, 3000, 2, 2, 3, 3, 5, 5]
[3, 30, 300, 5000, 4, 6, 10] 
```

# blackberry-10 - 为 BB10 手动创建调试令牌失败

> ID：13660068
> 
> 赞同：3
> 
> 时间：2012-12-01T13:48:37.943
> 
> 标签：blackberry-10

我想使用本机 SDK（momentics）为我的开发设备创建一个调试令牌，但它失败且没有任何错误消息（只是：“创建调试令牌时出错）。

现在我使用命令行工具。

但：

**1\. 如果我想申请一个令牌：**

```
./blackberry-debugtokenrequest -storepass xxxxx -devicepin xxxxx -csjpin xxxxx client-RDK-00000.csj 
```

我得到：

> 错误：尚未注册以请求调试令牌

**2.所以我想注册（我已经注册了，但是好的……）：**

```
./blackberry-debugtokenrequest -register -storepass xxxxx -csjpin xxxxx client-PBDT-00000.csj 
```

> 错误：错误：无法注册客户端“00000”，因为没有更多的注册尝试。如果您已经在此服务器上注册，那么您应该从备份中恢复您的签名密钥。如果您没有密钥的备份，则可以在 www.blackberry.com/go/codesignin 订购一套新的密钥

我有一个备份，但我该怎么办？

我想创建一个调试令牌，但消息说：尚未注册。所以我想注册，它说：已经注册...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:08:55.457

首先，您只需要将 CSJ 文件注册到 RIM，您只需执行一次。然后，您可以安全地删除它们和您的 CSJ PIN。

`-register`如果您有备份文件，则意味着您已经注册，这意味着您在尝试创建调试令牌时不应使用该标志。

要恢复您的备份代码签名密钥，请按照以下说明操作：http: [//supportforums.blackberry.com/t5/Testing-and-Deployment/Backup-and-Restore-BlackBerry-Code-Signing-Keys/ta-p/837925](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Backup-and-Restore-BlackBerry-Code-Signing-Keys/ta-p/837925)

恢复代码签名密钥后，您可以使用以下命令创建调试令牌：

```
blackberry-debugtokenrequest -storepass developercertpass -devicepin 50F2D211 dt.bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:06:48.230

您只能使用 CSJ 文件注册一次。之后就不能使用了。您可以尝试从黑莓服务器获取新的 CSJ 文件集吗？我认为它可能会解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T14:19:05.147

如果你懂西班牙语[，我推荐这篇文章](http://androidesverdesfritos.wordpress.com/2013/05/15/convierte-una-aplicacion-android-a-blackberry-10/)。在 pdf 的第 9 页中，您会找到一个 bat 来获取 blackberry 10 的调试令牌。这是代码：

```
set LOCAL_DATA_PATH="c:\Users\<user>\AppData\Local\Research In Motion"
set CSK_PASSWORD=Pass of CA
set CERT_STORE_PASSWORD=Pass of web key 
set DEVICE_PIN=PIN of device

E:
cd "eclipse\plugins\net.rim.ajde_1.5.2.201302260701\blackberry.tools.SDK\bin"
blackberry-debugtokenrequest -cskpass %CSK_PASSWORD% -keystore %LOCAL_DATA_PATH%\author.p12 -storepass %CERT_STORE_PASSWORD% -devicepin %DEVICE_PIN% %LOCAL_DATA_PATH%\debugtoken.bar
pause 
```

# javascript - 上传前在 IE 中获取文件大小。Gmail 做到了 - 怎么做？

> ID：13660073
> 
> 赞同：4
> 
> 时间：2012-12-01T13:49:49.267
> 
> 标签：javascript, forms, client-side-validation

我有一个文件上传表格。我想在实际上传文件之前验证文件大小。我可以在 Chrome 中做到这一点，但如何让它在 IE 中工作？

请注意，gmail 可以这样做。当我将文件拖入文件附件区域时，它会立即告诉我文件的大小。我已经在 IE9 和 IE8 中尝试过。即使我与互联网断开连接，它也能告诉我文件大小，所以它不像是先上传文件。我没有（据我记得）必须给予任何特殊的 activeX 权限或任何东西。

我在其他答案中看到了以下内容，但这需要用户给予特殊许可，对吧？我想避免这种情况。此外，我不确定如何实际获取我需要的文件以使其正常工作。

```
 var oas = new ActiveXObject("Scripting.FileSystemObject");
   var e = oas.getFile(file.value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:21:46.577

谷歌这样做是有后备的。

如果没有 html5 文件 api，它将使用 adobe flash 上传文件。

你可以使用这样的东西来获得跨浏览器的兼容性：[https ://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:02:43.043

如果你想使用`ActiveXObject`，正确的代码是：

```
var fso = new ActiveXObject("Scripting.FileSystemObject"),
    file = fso.GetFile(file_path),
    size = file.size; 
```

# javascript - 网页重定向时间

> ID：13660075
> 
> 赞同：1
> 
> 时间：2012-12-01T13:49:53.927
> 
> 标签：javascript, navigation, url-redirection

我想计算从一个网页重定向到另一个网页所消耗的时间。例如：

1) 我在 Google Chrome 浏览器中使用 Facebook。我在我的 Facebook 个人资料上分享了 1 个链接，如下所示：

[http://www.webdeveloper.com/](http://www.webdeveloper.com/)

（不仅是 Facebook。它可以是与另一个域有链接的任何域）。

2）当我从我的 Facebook 个人资料中单击此链接时，该网站将在新标签中打开。

3）我想计算以下两个事件之间的毫秒或微秒时间差：

第一个事件：从我的 Facebook 个人资料中单击链接“http://www.webdeveloper.com/”的时间。

第二个事件：“http://www.webdeveloper.com/”网页完全加载的时间。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:56:09.110

除非您自己将链接页面加载到框架中或使用 xmlhhtp 请求，否则您的 facebook 页面无法控制其他页面。换句话说，只要用户单击链接，您就无法控制并且它会单独运行。如果您使用框架或使用 javascript 将页面 ajax 样式加载到对象中，则不会为您提供相同的时间。所以这基本上是一个毫无意义的练习，因为你做不到。您可以使用任何分析器设置自己的浏览器，以便为您提供时间，但由于上述原因，您无法设置任何可以为访问者计时的代码。如果可以做这样的事情，那么这段代码也可以操纵链接到的页面并接管它。由于安全性如此松懈，您无法信任您单击的任何链接。

# java - 静态初始化器？

> ID：13660077
> 
> 赞同：5
> 
> 时间：2012-12-01T13:49:57.337
> 
> 标签：java, static

有什么区别：

```
private static Object myVar = new Object(); 
```

和：

```
private static Object myVar2;

static{
    myVar2 = new Object();
} 
```

在这两种情况下，我都会得到一个初始化的静态变量

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T13:52:05.460

如果你的静态对象和最终对象的初始化更复杂，你可以更好地使用第二个。

例如：

```
static final MyClass something;

static {
    Config conf=SettingsManager.getSettings();
    MyClass obj=MyClassFactory.getInstance(conf);
    obj.setVodoo(true);
    something=obj;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T13:54:49.910

在您的示例中没有区别，编译后的字节码最终将完全相同或几乎相同。静态初始化器有时很有用，但更经常被误用。如果目标是填充单个静态字段，请编写一个返回初始化对象的**静态方法并在静态字段声明中调用该方法。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:55:37.643

如果创建静态对象更复杂，您可以使用静态初始化程序块。例如，它可能需要调用 setter，或者在正在设置的辅助中间对象上。

```
static {
  SomeConfig config = new SomeConfig();
  config.setMaxSize(10);
  config.setMinSize(1);
  YourObject object = new YourObject(config);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T14:44:30.320

两者都与类文件的内容完全相同：

```
 public class Test extends java.lang.Object{
  public Test();
    Code:
     0:   aload_0
     1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
     4:   return

 static {};
   Code:
    0:   new     #2; //class java/lang/Object
    3:   dup
    4:   invokespecial   #1; //Method java/lang/Object."<init>":()V
    7:   putstatic       #3; //Field myVar2:Ljava/lang/Object;
    10:  return

} 
```

无论哪种情况，您都会得到相同的字节码。我通过将上述选项放在 Test.java 文件中来生成字节码。

# c++ - 创建构造函数时没有适当的默认构造函数可用

> ID：13660080
> 
> 赞同：0
> 
> 时间：2012-12-01T13:50:03.463
> 
> 标签：c++, visual-studio-2010, constructor

我写了一个哈希表类和标题，但我无法在 main 上构造它。它给出了“没有适当的默认构造函数可用”。这是什么原因？

我的标题中的构造函数：HashTable.h

```
explicit HashTable( const HashedObj & notFound, int size = 101 );
        HashTable( const HashTable & rhs )
        : ITEM_NOT_FOUND( rhs.ITEM_NOT_FOUND ),
        array( rhs.array ), currentSize( rhs.currentSize ) { } 
```

我的 cpp 中的构造函数：HashTable.cpp

```
 HashTable<HashedObj>::HashTable( const HashedObj & notFound, int size )
    : ITEM_NOT_FOUND( notFound ), array( nextPrime( size ) )
{
    makeEmpty( );
} 
```

我正在尝试在我的主要代码中执行以下代码：

```
HashTable <int> * hash = new HashTable<int>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:52:44.727

```
HashTable <int> * hash = new HashTable<int>(); 
```

您已经定义了一个带参数的构造函数，但在这里您没有将参数传递给构造函数。相反，您使用的是类中不存在的无参数（默认）构造函数。

请注意，如果您在类中定义了构造函数（接受参数），则编译器不会为您生成默认构造函数。你必须自己定义它。

# objective-c - NSString 到 Float = 0 而不是值

> ID：13660081
> 
> 赞同：0
> 
> 时间：2012-12-01T13:50:06.833
> 
> 标签：objective-c

我有点迷茫，我试图从一个数组转换 NSString，但是，通过使用 floatValue，我得到的是 0 而不是一个值。（即使提取的字符串值是正确的）。我做错了什么，但是，我不明白。这是代码。

```
NSString *sRatioMin;
NSString *sRatioMax;
float fRatioMin;
float fRatioMax;
int incrementation;

for(incrementation = 0; incrementation < [myObjet count]; incrementation = incrementation+3)
{
    sRatioMin  = [myObjet objectAtIndex:incrementation+1]; --> I'm getting good value
    sRatioMax  = [myObjet objectAtIndex:incrementation+2];--> I'm getting good value

    // ici Valeur Min & Max à comparer avec le ratio
    fRatioMin = [sRatioMin floatValue]; --> 0 ?! 
    fRatioMax = [sRatioMax floatValue]; --> 0 ?!
NSLog(@"mystring = %.1f ",[sRatioMin floatValue]); // --> Result still 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:01:55.417

我不知道您要转换的字符串中的内容。可能它们不存储实际值，而是诸如@“Hello”之类的字符串。
现在我可以告诉你，你冒着越界的风险，所以纠正它：

```
for(incrementation = 0; incrementation < [myObjet count]-3; incrementation = incrementation+3) {...} 
```

# c++ - 外部变量是否已初始化为其默认值？

> ID：13660085
> 
> 赞同：3
> 
> 时间：2012-12-01T13:50:18.410
> 
> 标签：c++, extern

我知道如果 char 数组是全局或静态局部的，它的元素会被初始化为 \0，但如果 char 数组是外部变量怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:52:49.110

外部变量只是一个声明。该变量在定义它的模块中初始化。由于在该模块中变量是全局变量，因此它被零初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T14:02:30.760

如果变量被声明为 extern 但不是全局变量，它也会接受相同的初始化处理。例如

```
namespace A { extern int x; int x;} 
```

这个非全局变量将被初始化为零。所有命名空间范围变量都接受这种处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T13:52:47.660

`extern`只是一个***声明***。
变量是否会被初始化取决于***定义***。

此外，变量的值将取决于初始化的类型。C++ 标准定义了 3 种初始化类型：

*   零初始化
*   默认初始化
*   值初始化

C++03 标准 8.5/5 恰当地定义了每一个。

**好读：**

[定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declarationn)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T13:54:46.937

`extern`关键字只声明变量存在，并没有定义它的值。由于全局范围，它初始化为 0

# python - 内置python函数。如何使用它？

> ID：13660088
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:50:49.923
> 
> 标签：python, python-3.x

```
def cleanTileAtPosition(self, pos):       
     x = math.floor(pos.getX())
     y = math.floor(pos.getY())
     self.tiles[(x, y)] = True

def getRandomPosition(self):

     return Position(random.random() * self.width,
                     random.random() * self.height) 
```

我的问题：

1.  在第一个函数中是什么`pos`？ `pos`不是任何类或字典的一部分。我们怎样才能从中得到`x`and`y`呢？

2.  在第二个函数中，是`Position`python的内置函数吗？如果是这样，我们为什么要乘以`width`和`random.random`？它有什么意义？此外，`pos`在第一个函数中使用的是 this 的对象`position`吗？帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:53:31.480

这两个函数都是类定义的一部分（这`self`是一个提示）。

python也不`pos`是`Position`内置的。它们必须来自自定义库或之前在同一源文件中定义。也许这些方法实际上*是*`Position`类定义本身的一部分。

最有可能的`pos`是，应该是 class 的一个实例`Position`。

我建议您在继续之前先阅读[python 教程](http://docs.python.org/2/tutorial/)；至少直到关于类和实例的部分（第 9 章）为止。

# javascript - 无法让异步 javascript 工作

> ID：13660091
> 
> 赞同：0
> 
> 时间：2012-12-01T13:51:31.153
> 
> 标签：javascript, node.js, railway.js

我正在使用 node.js、RailwayJS 和 JugglingDB。

我有一个模型：

```
Model.afterInitialize = function() {
  var me = this;
  Sequence.getSequence('forModel', function(sequence) {
    me.serialId = sequence;
  });
  me.title = 'Hello';
} 
```

全部完成后，仅设置属性`title`。这并不奇怪，但我无法让它发挥作用。我尝试使用该`async`模块没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:05:24.040

添加了一个回调参数以便能够链接。

```
Model.afterInitialize = function(then)
{
  then = then || function(me) { };

  var me = this;

  Sequence.getSequence('forModel', function(sequence)
  {
    me.serialId = sequence;
    me.title = 'Hello';

    then.call(null, me);
  });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:19:10.693

如果`Sequence.getSequence`是异步的，则将在调用*时*`serialId`从回调中设置。由于它是异步的，这可能是*在*返回之后。如果您必须执行依赖于设置的操作，请从回调中触发它们。 **`Model.afterInitialize``serialId``Sequence.getSequence`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T00:10:42.707

`Model.afterInitialize`是我无法更改的第三方 API 的一部分，所以很**遗憾没有办法做到这一点**。我希望某种无限循环检查标志会起作用，但它不起作用，即使它确实起作用，它也会是一个障碍。

我最终连接到另一个`Model.beforeSave = function(callback) {};`需要回调的方法。

仅供参考，我使用的是[https://github.com/1602/jugglingdb](https://github.com/1602/jugglingdb)**

# supervisord - supervisord 没有在 HUP 信号上重新启动

> ID：13660099
> 
> 赞同：1
> 
> 时间：2012-12-01T13:52:21.713
> 
> 标签：supervisord

```
sudo kill -SIGHUP `cat /var/run/supervisor.pid` 
```

导致主管杀死它的子进程，然后杀死它本身，但它不会按照文档重新启动。如果我`reload`从 supervisorctl 中调用，则行为相同。

版本：3.0b1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:32:43.487

这可能是你的错误：[https ://github.com/Supervisor/supervisor/issues/121](https://github.com/Supervisor/supervisor/issues/121)

它应该在3.0b2中修复，目前作者建议降级到3.0a12

# asp.net-mvc - MVC 工作单元和存储库不适合我

> ID：13660102
> 
> 赞同：0
> 
> 时间：2012-12-01T13:52:34.633
> 
> 标签：asp.net-mvc, repository, asp.net-web-api, unit-of-work

删除它，因为它显示在网络搜索中并显示公司信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:09:24.670

您需要初始化存储库。看看样本你怎么能做到这一点：

1º 解决方案 - 不是通用实现...您可以在此场景中为每个实体执行一些特定且复杂的查询。

```
public class BloginectUow : IDisposable
{
    private BloginectDbContext DbContext = new BloginectDbContext();

    public ICompanyRepository Companies { get; set; }      

    // constructor
    public BloginectUow()
    {
        // initialize your repository..
        Companies = new CompanyRepository();
    }

    /// methods...
} 
```

在这种情况下，您必须有一个类来实现您的`ICompanyRepository`接口：

```
public class CompanyRepository : ICompanyRepository {

   // methods of the interface to data access... from entity framework or nhibernate or ado.net or whatever...

} 
```

2º 解决方案 - 或者，您可以使用通用存储库：

```
public class BloginectUow : IDisposable
{
    private BloginectDbContext DbContext = new BloginectDbContext();

    public IRepository<Company> Companies { get; set; }      

    // constructor
    public BloginectUow()
    {
        // initialize your repository with a generic implementation..
        Companies = new Repository<Company>();
    }

    /// methods...
} 
```

在第二种情况下，你必须有一个`Repository<T>`类（它需要有 CRUD 操作......对于示例）并在你的`UnitOfWork`.

这样做，您将获得 DataAccess 的通用实现，但您无法在需要时执行复杂查询。如果您需要执行复杂查询，我建议您为每个实体获取一个 Repository 实现，从通用存储库继承 if 并实现执行复杂查询的方法，这是一个很好的做法。

# xaml - 引用由 Windows 8 中的数据模板定义的网格的子项

> ID：13660103
> 
> 赞同：1
> 
> 时间：2012-12-01T13:52:42.840
> 
> 标签：xaml, datatemplate, children, windows-store-apps

我很难做到以下几点：

我有一个用网格填充网格视图的数据模板。要生成的网格数量取决于数据绑定，即它返回的数据对象的数量。我在数据模板中定义的网格包含一些控件；即图像和文本框。

我试图在 gridview 的事件 selectionchanged 上引用图像，但我失败了。这是我正在尝试做的示例代码：

数据模板（在 style.xaml 中）：

```
<DataTemplate x:Key="tmplMenu">
  <Grid Width="100"
        Height="100"
        Margin="0,0,10,10">
    <Border Background="{Binding bgColor}" />
    <Image Source="{Binding imgPath}"
           Stretch="None"
           HorizontalAlignment="Left"
           VerticalAlignment="Top" />
    <TextBlock Text="{Binding description}"
               HorizontalAlignment="Right"
               VerticalAlignment="Bottom" />
  </Grid>
</DataTemplate> 
```

网格视图（例如在 mainpage.xaml 中）：

```
<GridView ItemTemplate="{StaticResource tmplMenu}"
          x:Name="myGrid"
          Margin="50,20,0,50"
          Width="360"
          SelectionChanged="myGrid_SelectionChanged">
  <GridView.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapGrid Orientation="Horizontal"></WrapGrid>
    </ItemsPanelTemplate>
  </GridView.ItemsPanel>
</GridView> 
```

现在 gridview 上的 selectionChanged 事件（我想在数据模板中引用图像）：

```
private void myGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            /**REFERENCE IMAGE (which is a child item of the generated grid) OF CLICKED GRID (which is a child item of the gridview) HERE **/

        } 
```

在这里， selectionChangedEventArgs e 返回用于生成网格的数据对象，而不是网格本身。

任何人都可以帮助我参考单击项目的图像控件吗？

# matlab - Matlab：如何保存透明的 TIFF 或不压缩的 PNG？

> ID：13660108
> 
> 赞同：4
> 
> 时间：2012-12-01T13:53:15.100
> 
> 标签：matlab, compression, png, transparency, tiff

我必须在 Matlab 中处理大量图像并将结果保存到具有透明度的图像文件中。但是PNG压缩对我来说需要太多时间。如何保存不压缩的 PNG 或透明的 TIFF？还有其他方法可以在不压缩和透明的情况下保存图像吗？

这是我在这里的第一个问题，如果有任何问题，请原谅我糟糕的英语和错误的问题风格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:32:07.337

使用 Matlab 中的[TIFF](http://www.mathworks.com/help/matlab/ref/tiffclass.html)类，您可以编写具有透明度的 TIFF：

```
%# create a synthetic RGBA image
ch = checkerboard(100);
rgba = repmat(ch,[1,1,4]);
rgba(:,:,4) = rgba(:,:,4)==0;
rgba = uint8(round(rgba*255));

%# create a tiff object
tob = Tiff('test.tif','w');

%# you need to set Photometric before Compression
tob.setTag('Photometric',Tiff.Photometric.RGB)
tob.setTag('Compression',Tiff.Compression.None)

%# tell the program that channel 4 is alpha
tob.setTag('ExtraSamples',Tiff.ExtraSamples.AssociatedAlpha)

%# set additional tags (you may want to use the structure
%# version of this for convenience)
tob.setTag('ImageLength',size(ch,1));
tob.setTag('ImageWidth',size(ch,2));
tob.setTag('BitsPerSample',8);
tob.setTag('RowsPerStrip',16);
tob.setTag('PlanarConfiguration',Tiff.PlanarConfiguration.Chunky);
tob.setTag('Software','MATLAB')
tob.setTag('SamplesPerPixel',4);

%# write and close the file
tob.write(rgba)
tob.close

%# open in Photoshop - see transparency! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:44:31.990

Matlab[`imwrite`](http://www.mathworks.com/help/matlab/ref/imwrite.html)没有用于 PNG 压缩级别的参数。如果是这样，您可以将其设置为零以不进行压缩。虽然对于 TIFF 它确实有一个`none`选项`Compression`，但没有 alpha 通道。您可以写入带有 Alpha 通道且无压缩的旧 Sun Raster (RAS) 格式。虽然没有什么可能能够阅读它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:05:02.320

“没有未压缩的 PNG 变体。可以仅使用未压缩的 deflate 块来存储未压缩的数据”

未压缩的 deflate 块使用 5 字节的标头 + 每个块最多 65535 字节的未压缩数据。

[http://www.w3.org/TR/PNG-Rationale.html](http://www.w3.org/TR/PNG-Rationale.html)

# ipad - 如何使用 lighttpd 将 RTSP 流转换为 Http 实时流？

> ID：13660113
> 
> 赞同：4
> 
> 时间：2012-12-01T13:53:39.353
> 
> 标签：ipad, rtsp, lighttpd, http-live-streaming

我这里有问题。我想在 ipad 和 iphone 上播放 RSTP 流。但我发现如果我使用 Http Live Streaming 会容易得多。我想使用 lighttpd 将我的 RTSP 流转换为 Http 实时流。但我真的不知道该怎么做。lighttpd 是否接受 rtsp 流 url 作为输入？任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:48:45.203

你有两个选择：

1) 在您的网络上运行一个服务器，将 rtsp 重新流式传输为 hls。

a) wowza - 流行，昂贵 b) live 555 - 免费，大量工作 d) ffserver - 免费且基本，因为它需要大量工作才能完成工作。

优点：与本地苹果播放器相比，蜂窝或 wi-fi 播放没有带宽限制

坏处

高服务器带宽 - 如果您为服务器时间付费，您可能想观看此内容。高延迟 - 忘记任何类型的实时视频。

2) 在设备上运行基于 FFmpeg 的播放器

优点 ：

a) 比以前容易得多，我们一直这样做 b) 处理 lgpl 许可证，在 ffmpeg.org 上有明确的指导方针，而不是大麻烦 c) 全部在设备上，没有服务器负载问题。

缺点

蜂窝网络带宽有限（大约 10 分钟间隔），wifi 无限带宽

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T21:09:58.053

lighttpd 不接受 RTSP 作为输入。您将需要某种翻译程序来读取 rtsp 流并将文件输出到网站存储。我认为您可以使用 avconv/ffmpeg 程序来做到这一点。

# python - 使用 nginx 和 gunicorn 运行烧瓶应用程序

> ID：13660118
> 
> 赞同：20
> 
> 时间：2012-12-01T13:54:38.393
> 
> 标签：python, nginx, flask, gunicorn

我是新手，只使用 nginx 来提供静态文件。我现在已经安装了烧瓶和 gunicorn。如果我运行`gunicorn -b 127.0.0.2:8000 hello:app`然后从服务器 wget 它运行良好。但是，如果我尝试从浏览器访问它，它会返回 404 错误（我在托管位于根目录的 wordpress 站点的服务器上运行它）。

烧瓶应用程序：

```
from flask import Flask
from werkzeug.contrib.fixers import ProxyFix
app = Flask(__name__)

@app.route('/')
def hello():
    return "Hello world!"

app.wsgi_app = ProxyFix(app.wsgi_app)

if __name__ == '__main__':
    app.run() 
```

以及我的 nginx 配置的相关部分：

```
location /flask {
                 proxy_set_header       Host            $http_host;
                 proxy_set_header       X-Real-IP       $remote_addr;
                 proxy_set_header       X-Forwarded-For $proxy_add_x_forwarded_\
for;
                 proxy_pass             http://127.0.0.2:8000;
                 proxy_redirect         off;
    } 
```

我希望这是所有相关信息。如果没有，请告诉。谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-01T17:04:14.413

这就是我在 Nginx 中提供烧瓶应用程序的方式：

使用套接字运行 gunicorn 守护进程：

```
 sudo gunicorn app:app --bind unix:/tmp/gunicorn_flask.sock -w 4 -D 
```

相关的nginx配置：

```
 upstream flask_server {
        # swap the commented lines below to switch between socket and port
        server unix:/tmp/gunicorn_flask.sock fail_timeout=0;
        #server 127.0.0.1:5000 fail_timeout=0;
    }
    server {
        listen 80;
        server_name www.example.com;
        return 301 $scheme://example.com$request_uri;
    }

    server {
        listen 80;
        client_max_body_size 4G;
        server_name example.com;

        keepalive_timeout 5;

        # path for static files
        location  /static {
            alias /path/to/static;
            autoindex on;
            expires max;
        }

        location / {
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $http_host;
            proxy_redirect off;

            if (!-f $request_filename) {
                proxy_pass http://flask_server;
                break;
            }
        }
    }

} 
```

# validation - 奇怪的 jsf panelgroup 绑定-> h:selectOneMenu 验证异常

> ID：13660122
> 
> 赞同：0
> 
> 时间：2012-12-01T13:54:49.730
> 
> 标签：validation, jsf

让我们从简单的开始： - 一个简单的搜索表单 - 在表单中声明了两个 h:selectOneMenu 组件 - 第二个 selectOneMenu，根据选择第一个 selectOneMenu 的项目（使用 ajax）进行刷新为此，我在请求中使用了一个中央 Bean范围，因为这两个selectOneMenus在很多其他页面上都声明了，所以我不需要多次定义以下两个方法：

页面支持：

```
@SuppressWarnings("unchecked")
public List<BranchenRubrik> getLst_branchenRubrik() {
    if(lst_branchenRubrik == null) {
        Session session = hibernate.InitSessionFactory.getInstance().getCurrentSession();
        Transaction tx = session.beginTransaction();
            this.lst_branchenRubrik = session.createQuery("from BranchenRubrik").list();
        tx.commit();
    }
    return lst_branchenRubrik;
}

// Loading Subkats with parameter
@SuppressWarnings("unchecked")
public List<BranchenRubrikSub> getBranchenRubrikSub(long p_parent) {

    List<BranchenRubrikSub> lst_branchenRubrikSub = new ArrayList<BranchenRubrikSub>();
    if(p_parent > 0) {          
        Session session = hibernate.InitSessionFactory.getInstance().getCurrentSession();
        Transaction tx = session.beginTransaction();
            lst_branchenRubrikSub = session.createQuery("from BranchenRubrikSub BRS WHERE BRS.parentRubrik.id = :p1").setLong("p1",p_parent).list();
        tx.commit();
    }
    return lst_branchenRubrikSub;
} 
```

VDL：

```
<p:selectOneMenu value="#{searchBean2.fvz.branchenRubrikID}">
            <f:selectItem itemLabel="Bitte wählen" itemValue="0"/>
            <f:selectItems value="#{pageSupport.lst_branchenRubrik}" var="rubrik" itemValue="#{rubrik.id}" itemLabel="#{rubrik.rubrik}"/>
            <f:ajax render="uiBranchenSubKat"/> 

        </p:selectOneMenu>
        <h:outputText value="Unterkategorie" />
        <p:selectOneMenu id="uiBranchenSubKat" value="#{searchBean2.fvz.branchenRubrikSubID}">
        <f:selectItems value="#{pageSupport.getBranchenRubrikSub(searchBean2.fvz.branchenRubrikID)}" var="brs" itemLabel="#{brs.rubrik}" itemValue="#{brs.id}"/>
        </p:selectOneMenu> 
```

这工作正常，我可以提交表单，所有数据都已保存并将重新显示。现在，我想包含一个绑定到方法的 h:panelGroup，它构建了一个分页菜单。如果我包含 h:panelGroup binding="#{searchBean2.paginationMenu}"/> 那么，我无法提交表单，因为它表示第二个 h:selectOneMenu 的值无效。

如果我删除“h：panelGroup 绑定”所有按预期工作。h:panelgroup 也可以绑定到一个空方法“return new HtmlPanelGroup()”，然后错误再次发生。看起来，组件绑定打破了一些验证。

谢谢你的时间

# php - 举一个 PHP 函数连接/查询数据库的例子，而不是 MySQL？

> ID：13660126
> 
> 赞同：0
> 
> 时间：2012-12-01T13:55:17.873
> 
> 标签：php, database, connect

所以我有一个 PHP 脚本，它目前使用 MySQL 函数来连接和查询 MySQL 数据库。我需要更改代码，使其适用于任何类型的数据库，而不仅仅是 MySQL。使用非 mysql 函数有哪些示例或其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:06:46.647

看看`PDO`： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)
它提供了一种访问不同数据库的方法。但是，如果您编写了很多 MySQL 特定代码，则可能需要一段时间才能转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:02:40.650

我会为通常的操作（连接、查询、获取……）创建通用函数，并将它们用作 MySQL 或您要使用的其他 SQL dbms 的包装器。但我认为你应该更专注于你想要使用的东西。

# kendo-ui - 在 Kendo UI Treeview 中选择复选框

> ID：13660127
> 
> 赞同：1
> 
> 时间：2012-12-01T13:55:25.887
> 
> 标签：kendo-ui, kendo-treeview

我正在使用带有复选框的 Kendo UI 树视图。我的问题是当我加载树时，我将使用 javascript 检查一些复选框。但这不会自动选择父复选框。我需要手动执行此操作还是框架中有任何选项。

谢谢，拉贾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:42:19.063

假设您要选择已选择的节点：

```
// Get the node that is selected
var selected = treeview.select();
// Find the checkbox associated with this node
var checkbox = $("input[type='checkbox']", selected)[0];
// Click on it for selecting it and its ancestors
checkbox.click(); 
```

作为`treeview`创造的结果`kendoTreeView`：

```
var treeview = $("#my_tree").kendoTreeView({...}).data("kendoTreeView"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:47:58.023

Kendo ui (html5) treeview 位置被重置到树的开头。当我绑定树中的许多记录时。当我选择最后一个节点时，树视图位置将重置为树的开头。此问题仅在 IE (Internet Explorer 9) 中出现。在 Firefox 和 chrome 中它工作正常。

图 1 显示了在选择最后一条记录的树节点后，treeview 重置为树开头的页面。

![图片](../Images/bcb062bf3c45697fa90db6e41dd82d21.png)

图 2 显示了在底部选择了 treeview 节点的页面

![图2](../Images/2ad04e2ea2e2d3b69b1c427d42604962.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:57:07.577

如果您通过使用 JavaScript 添加“已检查”属性来检查节点，例如

```
$('input').attr('checked','checked') 
```

您将需要手动处理父检查。但是，如果您模拟单击，TreeView 将更新其状态，就像您使用鼠标单击时一样。例如

```
$('input').click(); 
```

请记住，您需要调用对复选框输入的单击，而不是包装它的 span 元素。

# python - 接受多个字符串和元组列表的函数

> ID：13660129
> 
> 赞同：0
> 
> 时间：2012-12-01T13:55:37.577
> 
> 标签：python

所以，我想创建一个函数，它接受多个字符串和元组的列表，它的作用是，如果它是一个字符串，它只打印字符串，但如果它是一个元组，元组需要一个整数和一个字符串和它使它们成倍增加。

例子：

```
print(something(["1stString", "2ndString", (3, "Pie"), (4, "Soda")])) 
```

它打印：

```
1stString
2ndString
Pie
Pie
Pie
Soda
Soda
Soda
Soda 
```

我悲惨的尝试：

```
def something(s):
    for x in s:
        if isinstance(s, str):
            print(s)
        if isinstance(s, tuple):
            x = tuple[0] * tuple[1]
        print(x)
    exit() 
```

这适用于字符串，但不适用于元组。

它打印出来：

```
1stString
2ndString
(3, 'Pie')
(4, 'Soda') 
```

我究竟做错了什么？

还有一件事。如果我想让它作为列表打印出来怎么样？

像这样：

```
['1stString', '2ndString', 'Pie', 'Pie', 'Pie', 'Soda', 'Soda', 'Soda', 'Soda'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:04:06.017

正如 NPE 所说，您正在检查 s 而不是 x。s 是整个元素列表，而 x 是 s 的当前元素的占位符。

```
def something(s):
    for x in s:
        if isinstance(x, str):
            print(x)
        if isinstance(x, tuple):
            for i in range(x[0]):
                print x[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:16:50.070

蟒蛇 3.2：

```
 def something(s):
            for i in s:
               if isinstance(i,str):
                    print(i)
            else:
                print(i[0]*i[1]) 
```

它会打印

```
 1stString
    2ndString
    PiePiePie
    SodaSodaSodaSoda 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:57:28.747

一个问题是您正在检查`s`而不是`x`在`isinstance`：

```
isinstance(s, ... 
```

我还应该指出，这种编程风格非常不符合 Python 风格。也许如果您解释了为什么要这样做，我们也许可以改进这种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:36:25.317

我会使用生成器函数：

```
def yielder(sequ):
    for E in sequ:
        if isinstance(E,str):
            yield E
        else:
            ss = E[1]
            for i in xrange(E[0]):
                yield ss

li = ["1stString", "2ndString", (3, "Pie"), (4, "Soda")]

print li
print '----------------------------'
print list(yielder(li))
print '----------------------------'
print '\n'.join(yielder(li)) 
```

结果

```
['1stString', '2ndString', (3, 'Pie'), (4, 'Soda')]
----------------------------
['1stString', '2ndString', 'Pie', 'Pie', 'Pie', 'Soda', 'Soda', 'Soda', 'Soda']
----------------------------
1stString
2ndString
Pie
Pie
Pie
Soda
Soda
Soda
Soda 
```

# objective-c - 更精确的值的平方根

> ID：13660132
> 
> 赞同：0
> 
> 时间：2012-12-01T13:55:44.690
> 
> 标签：objective-c, ios, xcode

要获得 的平方根值`mainlabelString`，我正在使用

```
- (IBAction)rootPressed:(id)sender
{

    NSString *mainLabelString = mainLabel.text;

    int mainLabelValue = [mainLabelString longLongValue];

    NSString *calculatedValue = [NSString stringWithFormat: @"%f", sqrt(mainLabelValue)];

    mainLabel.text = calculatedValue;

} 
```

尽管它确实适用于诸如 88 之类的数字，我从中得到 9.380832，但它不适用于该数字，它表示平方根为 3.000000（而不是 3.062814）。
我尝试替换`longLongValue`为`doubleValue`，`integerValue`但它并没有改变它。
怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:11:13.750

如果文本字段中的值类似于@“9.0001”，则获取 long long 值会截断小数部分。你说你也尝试过 doubleValue，但我怀疑你做了这样的事情：

```
int mainLabelValue = [mainLabelString doubleValue]; 
```

代替：

```
double mainLabelValue = [mainLabelString doubleValue]; 
```

在第一种情况下，数字也丢失了小数部分，因为 int 不能存储小数部分，long long int 也不能​​。
让我知道您究竟是如何尝试检索文本字段的双精度值的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:07:55.653

使用`NSNumberFormatter`它提供了非常广泛和不同的风格（Decimaland 科学等）。[文件](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

# ios - 将 NSDate 拆分为日期和时间

> ID：13660134
> 
> 赞同：4
> 
> 时间：2012-12-01T13:55:52.680
> 
> 标签：ios, nsdate, nsdateformatter

我正在尝试将我从 Web 服务收到的 NSDate 拆分为两个不同的日期，以便为每天包含部分的事件填充 tableView。我认为执行后者的最简单的方法是创建一个 fetch 请求来寻找独特的日子。

所以我尝试创建一个 NSDate“日”，但将时间组件设置为 00:00。我想知道是否有更有效的方法来实现这一点：

```
if (eventoItemList.count > 0) {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

        NSDateFormatter *dayFormatter = [[NSDateFormatter alloc] init];
        [dayFormatter setDateFormat:@"yyyy-MM-dd"];

        for (GDataXMLElement *eventoItem in eventoItemList) {
            BOEvent *event = [[BOEvent alloc] init];
            NSString *idEventStr = [[[eventoItem elementsForName:@"id"] objectAtIndex:0] stringValue];                       
            NSString *name = [[[eventoItem elementsForName:@"titulo"] objectAtIndex:0] stringValue];
            NSString *type = [[[eventoItem elementsForName:@"tipo"] objectAtIndex:0] stringValue];
            NSString *descr = [[[eventoItem elementsForName:@"descripcion"] objectAtIndex:0] stringValue];
            NSString *address = [[[eventoItem elementsForName:@"direccion"] objectAtIndex:0] stringValue];
            NSDate *date = [dateFormatter dateFromString:[[[eventoItem elementsForName:@"fecha"] objectAtIndex:0] stringValue]];
            NSString *action =  [[[eventoItem elementsForName:@"accion"] objectAtIndex:0] stringValue];

            [event setIdEvent:[idEventStr integerValue]];
            [event setName:name];
            [event setType:type];
            [event setDesc:descr];
            [event setAddress:address];
            [event setAction:action];
            [event setDate:date];
            [event setDayDate:[dayFormatter dateFromString:[dayFormatter stringFromDate:date]]];
            [events addObject:event];
        }
    } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:08:42.160

将 NSDate 拆分为**两个**NSDate 的示例代码（仅限日期，仅限时间）

```
 NSDate *date = [NSDate date];
    NSCalendar *gregorian = [NSCalendar currentCalendar];

    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
    NSDateComponents *comps = [gregorian components:unitFlags fromDate:date];    
    NSDate *dateOnly = [gregorian dateFromComponents:comps];

    unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit |  NSDayCalendarUnit;
    comps = [gregorian components:unitFlags fromDate:date];    
    NSDate *timeOnly = [gregorian dateFromComponents:comps];

    NSLog(@"%@ = \n\tDate: %@ \n\tTime: %@", date, dateOnly, timeOnly); 
```

* * *

**在两个NSString**中输出 NSDate 的示例代码

 **```
 NSDate *date = [NSDate date];

    NSDateFormatter *f = [[NSDateFormatter alloc] init];
    [f setDateStyle:NSDateFormatterFullStyle];
    [f setTimeStyle:NSDateFormatterNoStyle];
    NSString *dateOnly = [f stringFromDate:date];

    [f setTimeStyle:NSDateFormatterFullStyle];
    [f setDateStyle:NSDateFormatterNoStyle];
    NSString *timeOnly = [f stringFromDate:date];

    NSLog(@"%@ = \n\tDate: %@ \n\tTime: %@", date, dateOnly, timeOnly); 
```**

# machine-learning - 对新的名义实例进行分类时更新数据集

> ID：13660137
> 
> 赞同：0
> 
> 时间：2012-12-01T13:56:13.677
> 
> 标签：machine-learning, data-mining, weka

我正在使用 J48 对由数值和标称值组成的实例进行分类。我的问题是我不知道在我的程序中会遇到哪个名义价值。因此，我需要“即时”更新模型的名义属性数据。

例如，假设我只有 2 个属性，职业和年龄，运行如下：OccuptaionAttribute = {}。

* * *

输入：[钢琴老师，22]。

OccuptaionAttribute = {钢琴老师}。

* * *

输入：[学校老师，30]

OccuptaionAttribute = {钢琴老师，学校老师}。

* * *

输入：[钢琴老师，40]

OccuptaionAttribute = {钢琴老师，学校老师}。

* * *

等等

现在我尝试通过复制以前的属性、添加新属性然后更新模型的数据来手动执行此操作。**这在训练**模型时效果很好。

但！当我想**对**一个新实例进行分类时，比如说 [SW Engineer, 52]，OccuptaionAttribute 已更新：OccuptaionAttribute = {Piano Teacher, School Teacher, SW Engineer}，但树本身之前从未“遇到”“SW Engineer”所以分类无法实现并抛出异常。

你能指导如何处理上述情况吗？Weka 是否有任何机制支持上述问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:33:30.697

训练时，将占位符数据添加到您的名义属性中，例如`__other__`. 在尝试对实例进行分类之前，首先检查是否见过名义属性的值；如果它不使用占位符值：

```
Attribute attribute = instances.attribute("OccuptaionAttribute");
String s = "SW engineer";
int index = attribute.indexOfValue(s);
if (index == -1) {
    index = attribute.indexOfValue("__other__");
} 
```

当您有足够的数据再次使用新值进行训练时。

# reflection - Hadoop 如何决定在 MapTask 类中运行哪个映射器，OldMapper 还是 NewMapper？

> ID：13660138
> 
> 赞同：4
> 
> 时间：2012-12-01T13:56:27.830
> 
> 标签：reflection, hadoop, mapreduce

我无法理解课堂上`runOldMapper(...)`和`runNewMapper(...)`方法之间的区别`MapTask`。Hadoop根据`"useNewApi"`来自的参数决定`JobConf`；但是在框架中何时何地设置了这个参数？我认为所有作业的默认值都是 FALSE。我们可以通过调用`JobConf.setUseNewMapper(boolean flag)`which sets将值设置为 TRUE `"mapred.mapper.new-api"`，但是我们应该在什么时候以及为什么决定设置这个参数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:11:57.747

假设此行为是由`mapred.mapper.new-api`配置触发的，您是正确的。

根据您使用的是新作业还是旧作业 conf/client，请在源代码中查找：

*   `org.apache.hadoop.mapreduce.Job.submit()`方法，它调用`setUseNewAPI()`私有方法。这`new-api`取决于是否设置了旧的映射器/减速器类属性来配置属性
*   `org.apache.hadoop.mapred.JobConf`- 正如您在问题中指出的那样，`setUseNewMapper(true)`如果您使用新的 API 映射器实现，则开发人员将需要调用该方法（默认情况下为 false，并且您的映射器类实现了 mapred.Mapper 接口，或者如果您的映射器扩展了 mapreduce，则为 true。映射器类）

# ruby-on-rails - 记忆当前用户对象 before_create

> ID：13660141
> 
> 赞同：0
> 
> 时间：2012-12-01T13:56:38.623
> 
> 标签：ruby-on-rails

使用 Rails 3.2。假设我要上传 10 张新照片，我需要将我的照片`current_user.id`与每条新记录相关联。由于某些原因，它`photos_controller.rb`是空白的，因为它与另一个模型嵌套在一起`Shop`。这是我的代码：

```
class Photo < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true, :counter_cache => true
  belongs_to :user, :counter_cache => true

  before_create :current_user_id
  before_create :associate_current_user

  def current_user_id
    @current_user_id ||= UserSession.find.user.id
  end

  private

  def associate_current_user
    self.user_id = @current_user_id
  end
end 
```

很明显，如果要创建 10 条新记录，我希望模型找到`current_user`一次，然后从缓存中取出（一种记忆技术），但是因为我使用`before_create`的`current_user`是 ，所以查询 10 次而不是获取它来自缓存。

我该怎么做才能缓存`@current_user_id`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:04:55.177

答案很简单：你不应该**在**你的模型中做任何与会话相关的事情，它破坏了 MVC 模式。

相反，在您的控制器中执行此操作，因此您只需获取`current_user.id`一次，并将其分配给您的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:28:25.180

这种逻辑属于控制器。将您的`current_user_id`方法移动到您的`PhotosController`（或者`ApplicationController`如果您也计划在其他控制器中使用此逻辑）。这样，`@current_user`每个上传操作只会分配一次。

确保也将其设为私有。

# ios - 如何获取文件扩展名（比较）

> ID：13660145
> 
> 赞同：1
> 
> 时间：2012-12-01T13:57:26.483
> 
> 标签：ios, xcode, nsstring, compare

我正在将 Dropbox 中的文件目录解析为一个可变数组，以在表格视图中显示它。

我如何比较文件扩展名？（.doc 或 .jpg，....）

```
if ([[NSString stringWithFormat:@"%@",[test objectAtIndex:indexPath.row]] isEqualToString:@"??????"] ) {

    [cell.extensionView setImage:[UIImage imageNamed:@"word.png"]];
} 
```

isEqualToWhat？是否可以使用通配符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:11:37.307

`stringWithFormat`除非您确实有格式，否则不要使用。如果您执行以下操作，您的代码会更简洁：

```
NSString *filename = [text objectAtIndex:indexPath.row];
NSString *ext = [filename pathExtension];
if ([ext isEqualToString:@"doc"]) {
    [cell.extensionView setImage:[UIImage imageNamed:@"word.png"]];
} else if ([ext isEqualToString:@".jpg"]) {
    [cell.extensionView setImage:[UIImage imageNamed:@"jpeg.png"]];
} 
```

有比设置这个大块更好的方法`if-else`。我想你有很多不同的扩展要检查。设置带有扩展名和图像的字典。就像是：

```
NSDictionary *extensionThumbnails = @{
    @"doc" : [UIImage imageNamed:@"word.png"],
    @"xls" : [UIImage imageNamed:@"excel.png"],
    @"jpg" : [UIImage imageNamed:@"jpeg.png"]
}; 
```

为您拥有的每个扩展名和图像添加一个条目。然后您的原始代码（现在使用现代 Objective-C 语法）变为：

```
NSString *filename = text[indexPath.row];
NSString *ext = [filename pathExtension];
UIImage *thumbnail = extensionThumbnails[ext];
if (!thumbnail) {
    thumbnail = [UIImage imageNamed:@"unknown.png"];
}
[cell.extensionView setImage:thumbnail]; 
```

# jquery - 我如何从数据中只选择特定的 div

> ID：13660148
> 
> 赞同：0
> 
> 时间：2012-12-01T13:57:38.497
> 
> 标签：jquery

是否可以从返回数据中仅选择特定部分？

这是我的代码

```
$(document).ready(function(){
    $("a[href*='delete']").click(function(){
        var url = $(this).attr('href');
        url = 'http://localhost'+url;

        $.ajax({
            type : 'GET',
            url : url,
            success : function(data){
                $('#table_div').html(data);
            }
        });
        return false;
    });
}); 
```

如果我使用上面的代码，它会将整个页面设置为`#table_div`. 所以我只需`#table_div`要从`data`. 我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:18:29.613

你试过这个吗？

```
$(data).filter('#table_div');
$(data).find('#table_div'); 
```

看到这个[参考](https://stackoverflow.com/questions/405409/use-jquery-selectors-on-ajax-loaded-html)

希望，它会帮助你。谢谢。！！

# mysql - 不同角色用户的最佳表结构

> ID：13660154
> 
> 赞同：3
> 
> 时间：2012-12-01T13:58:17.777
> 
> 标签：mysql, sql, database, database-design

我们正在开发一个网站，该网站将包含大约 5 个不同的用户角色，每个角色都有不同的属性。在当前版本的数据库模式中，我们有一个包含所有用户及其所有属性的*用户表。*

问题是我们需要的属性因用户角色而异。所有用户都具有相同的基本属性，例如姓名、电子邮件地址和密码。但最重要的是，每个角色的属性都不同。有些有社交媒体链接，有些有发票地址等。总共可能有多达 60 个列（属性），其中每个用户角色仅使用一部分。

表中总共可能有大约 250,000 个用户，其中最大部分（大约 220,000 个）将是单个用户角色（并使用 60 列中的大约 20 个）。其他 30,000 名用户被划分为其他四个规则，并使用其他 40 列的子集。

从数据库作为开发的角度来看，最好的数据库结构是什么？我的想法是有一个基本的*users*表，然后用*users* _ *moderators*这样的表进行扩展，但这可能会导致很多 JOIN'ed 查询。防止这种情况的一种方法是使用视图，但我已经阅读了一些（过时的？）视图可能会损害性能的文章，例如：[http ://www.mysqlperformanceblog.com/2007/08/12/mysql-view -作为性能麻烦制造者/](http://www.mysqlperformanceblog.com/2007/08/12/mysql-view-as-performance-troublemaker/)。

“完美”的结构是否存在？有什么建议，或者这根本不是一个问题，我们是否应该将所有用户放在一个大表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:32:02.307

有两种不同的方法可以解决这个问题。一种叫做“单表继承”。这基本上是您要求评论的设计。它非常快，因为没有连接。然而，NULL 会在一定程度上影响吞吐量，因为胖行比瘦行需要更长的时间才能进入内存。

另一种设计称为“类表继承”。在这个设计中，超类一张表，每个子类一张表。非关键属性进入它们相关的表中。通常，这种设计可以使用一种称为“共享主键”的设计。在共享主键中，子类表的键 id 是父类表中相应行的 id 的副本。

这在插入时需要做一些工作，但是当您去连接数据时它会为自己付出代价。

您应该在 SO（它们有自己的标签）或在网络上查找所有这三个。您将获得有关设计的更多详细信息，以及每种设计与您的案例的匹配程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:23:01.103

`table user table roles table permissions table userRole table userPermission table RolesPermissions`

每个角色在角色权限表中都有权限 每个用户都可以在没有角色的情况下拥有权限（扩展...）

因此，在 PHP 中，您只需要在用户角色和扩展权限中合并用户权限数组...在您的“acl”类中，您检查您的用户是否有权查看或处理网页或系统进程...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T14:28:34.703

在我看来，此类案件的“完美”结构是政党-角色-关系模型。搜索 Len Silverston 关于数据模型的书籍。一开始它看起来很复杂，但它提供了很大的灵活性......

最大的问题是采用完美解决方案的实用性。除了你，没有人能回答这个问题。重构从来都不是一件容易和快速的任务，所以如果你的项目生命周期是 1 年，那么花 9 个月偿还“技术债务”听起来更像是在浪费时间/精力/等等。

至于连接的性能，拥有适当的索引通常可以解决潜在的问题。如果没有，您可以随时实现物化视图；即使 mysql 没有开箱即用的选项，您也可以自己设计并以不同的方式刷新它（例如，使用触发器或定期/按需启动刷新过程）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T14:23:03.867

我认为您不必担心这里的速度。因为这只会是一次。即在会话中的用户登录存储 acl 并下次从那里获取它。

JOIN 还不错。如果您使用 InnoDB 引擎将索引和外键放在正确的位置，那将会非常快。

我会为用户和角色 ID 使用一张表。第二张表与角色。第三个资源表，一个将所有资源链接在一起+启用标志。

# java - ASyncTask 故障 - 执行 doInBackground 时发生错误

> ID：13660160
> 
> 赞同：0
> 
> 时间：2012-12-01T13:59:06.067
> 
> 标签：java, android, mysql

我在使用 AsyncTask 时遇到了一些问题。如果用户名正确，我试图访问一个应该连接并检查 MySQL 数据库的 php 文件。

我得到的错误如下：

```
12-01 14:51:25.815: W/dalvikvm(3216): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
12-01 14:51:25.927: E/AndroidRuntime(3216): FATAL EXCEPTION: AsyncTask #1
12-01 14:51:25.927: E/AndroidRuntime(3216): java.lang.RuntimeException: An error occured while executing doInBackground()
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.lang.Thread.run(Thread.java:856)
12-01 14:51:25.927: E/AndroidRuntime(3216): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4607)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:835)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:292)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.view.View.requestLayout(View.java:15129)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.widget.TextView.checkForRelayout(TextView.java:6309)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.widget.TextView.setText(TextView.java:3547)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.widget.TextView.setText(TextView.java:3405)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.widget.TextView.setText(TextView.java:3380)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at com.example.obligatorisk.MainActivity$loader.doInBackground(MainActivity.java:101)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at com.example.obligatorisk.MainActivity$loader.doInBackground(MainActivity.java:1)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-01 14:51:25.927: E/AndroidRuntime(3216):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-01 14:51:25.927: E/AndroidRuntime(3216):     ... 5 more 
```

（对不起，文字墙，不确定要包括什么）

**我正在使用的代码：**

```
protected class loader extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {

        try {

            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://myurl.com/phplogin.php");

            nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("username_in",username.getText().toString().trim()));
            nameValuePairs.add(new BasicNameValuePair("password_in",password.getText().toString().trim()));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            httppost.getEntity().consumeContent();

            response=httpclient.execute(httppost);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String response = httpclient.execute(httppost, responseHandler);

            //Toast.makeText(MainActivity.this,response, Toast.LENGTH_LONG).show();

            if(response.equalsIgnoreCase("User Found"))
            {

                startActivity(new Intent("com.example.obligatorisk.BROWSER"));

            }
        }
        catch(IOException e){
            e.printStackTrace();
        }

        return null;
    }

    // TODO Auto-generated method stub

} 
```

有人可以帮我吗？我被困了好几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:17:34.197

Xortrox 你得到一个异常，因为你试图从非 UI 线程更新 UI，所以有两种解决方法：首先你可以将你的活动作为参数传递给 AsyncTask 并使用活动的[runOnUiThread 方法](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)来更新 UI，但是这种方式缺乏一些优雅。

另一种方式是使用异步交互方式（AsyncTask 是为此创建的=）），AsyncTask 具有在 UI 线程中运行的[onPreExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)和[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)方法，因此我建议您将 AsyncTask 的返回类型更改为 HttpResponse 或 String然后在 onPostExecute 中做任何处理和更新 UI，对我来说这种方式是最好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:15:13.870

日志显示行中的代码`com.example.obligatorisk.MainActivity$loader.doInBackground(MainActivity.java:101)`尝试修改视图，但在不同的线程中运行。

这个想法`AsyncTask`是`doInBackground`rus 在不同的线程中：它不能更改在主线程中创建的视图。这就是为什么你有`preExecute`并且`postExecute`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:15:21.560

你得到一个：

```
android.view.ViewRootImpl$CalledFromWrongThreadException 
```

因为：

只有创建视图层次结构的原始线程才能接触其视图。

我没有解决您的问题的方法，但我可能会为您指明正确的方向。我假设您正在尝试从单独的线程更改视图，但这是行不通的。我相信您必须弄清楚如何从单独的线程中更改 android 视图。我也做了一个快速的谷歌，发现[了这个](https://stackoverflow.com/questions/5400288/update-textview-from-thread-please-help)

最佳答案似乎是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T14:36:52.790

错误是您不能像这样调用 username.gettext().tostring(),password.getText().toString() .. 在调用 AsyncTask 之前尝试获取字符串中的值并使用它..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T14:28:06.657

你不能把这些行放在 doinbackground

```
 nameValuePairs.add(new BasicNameValuePair("username_in",**username.getText().toString().trim()**));
    nameValuePairs.add(new BasicNameValuePair("password_in",**password.getText().toString().trim()**)); 
```

所以在任务开始之前获取数据并将值传递给异步任务......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T19:37:59.453

我怀疑在

```
username.getText().toString().trim()) 
```

用户名是 TextView？（至少[getText](http://developer.android.com/reference/android/widget/TextView.html#getText%28%29)来自那里）

您不能从非 UI 线程访问任何 View 对象。时期。

在启动 AsyncTask 之前将用户名和密码存储在一个字段中，或者在 loader 类中创建一个构造函数来接受用户名和密码，并将它们存储在 loader 类的字段中（首选方案）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-15T07:39:28.760

作为例外：

```
Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

因此，我们可以知道代码有什么问题。

```
nameValuePairs.add(new BasicNameValuePair("username_in",username.getText().toString().trim()));
nameValuePairs.add(new BasicNameValuePair("password_in",password.getText().toString().trim())); 
```

请确保 doInBackground 中没有 ui 代码。只要您需要访问 UI，请将代码放入 onPostExecute 方法中

# cocos2d-x - 将等距平铺地图从 cocos2d for iPhone 移植到 cocos2dx 时发生了奇怪的事情

> ID：13660161
> 
> 赞同：1
> 
> 时间：2012-12-01T13:59:24.667
> 
> 标签：cocos2d-x

我正在尝试将一些 Cocos2d-iphone 代码转换为 Cocos2d-x 代码，但是等距平铺地图发生了一些奇怪的事情。地面变得完全黑暗。请帮助我。

在 Objective-C 中：

> -(id) init { if ((self = [super init])) { CCTMXTiledMap* tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"isometric-with-border.tmx"]; [self addChild:tileMap z:-1 tag:TileMapNode];
> 
> CCTMXLayer* layer = [tileMap layerNamed:@"Collisions"]; 层.可见=否；
> 
> // 使用负偏移设置tilemap的起始位置 tileMap.position = CGPointMake(-500, -500); …… } }

在 C++ 中：

> bool TiledMap::init() { if ( !CCLayer::init() ) { return false; } CCTMXTiledMap *tileMap = CCTMXTiledMap::create("isometric-with-border.tmx"); this->addChild(tileMap,1,TileMapNode);
> 
> CCTMXLayer* layer = tileMap->layerNamed("Collisions"); 层->setVisible(false);
> 
> // 使用负偏移量设置tilemap的起始位置 tileMap->setPosition(-500, -500); …… }

# mysql - MySQL extratvalue 范围、输出和解析问题

> ID：13660167
> 
> 赞同：0
> 
> 时间：2012-12-01T14:01:08.307
> 
> 标签：mysql, xpath, syntax, extract-value

我正在学习 MySQL。我的查询如下：
`mysql>select extractvalue(1,1111111111111111111);`// 19 1。输出：

```
`+-------------------------------------+
 | extractvalue(1,1111111111111111111) |
 +-------------------------------------+
 | 1111111111111111111                 |
 +-------------------------------------+
1 row in set (0.00 sec)` 
```

但是对于 20 个 1

```
mysql>select extract(1,11111111111111111111);
+--------------------------------------+
| extractvalue(1,11111111111111111111) |
+--------------------------------------+
| -7335632962598440505                 |
+--------------------------------------+
1 row in set (0.00 sec) 
```

以下向我展示了不同的错误：

```
mysql> select extractvalue(rand(),5.5.28));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near '.28))
' at line 1
mysql> select extractvalue(rand(),version());
ERROR 1105 (HY000): XPATH syntax error: '.28' 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:09:22.010

我试过这些，它似乎工作。

```
SELECT @rand := RAND();

select extractvalue(1,@rand); 
```

但是，`extract`似乎不起作用并给出错误。无论哪种方式，我都没有设法使用`extract`或`extractvalue`包装`rand()`. 原因可能是`extractvalue`只返回**CDATA**。此功能似乎不支持您的申请意图。它用于**XPATH**

例如

```
Select allhttp://www.blablabla.com/error.php?id=null 
and extractvalue(rand(),concat(0x3a,(
select concat(0x3a,username,0x3a,password) from users))) 
```

发现这很有趣：[参考](http://kaoticcreations.blogspot.sg/p/xpath-injection-using-extractvalue.html)

# qt - 在 Qt Creator 4.8 中禁用 MSVC 链接器警告

> ID：13660171
> 
> 赞同：1
> 
> 时间：2012-12-01T14:01:51.197
> 
> 标签：qt, visual-c++, linker, warnings, qt-creator

我需要在 Qt Creator 4.8.0 的 .pro 文件中添加什么来禁用特定的 MSVC 链接器警告（显然是使用 MSVC 构建）？

具体来说，我想禁用链接器警告 4099（我无法生成的缺失 PDB 文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:07:02.420

您可以添加`QMAKE_LFLAGS += /ignore:4099`到您的 .pro 文件中。

# c++ - 程序如何创建另一个可执行文件？

> ID：13660172
> 
> 赞同：-3
> 
> 时间：2012-12-01T14:01:51.980
> 
> 标签：c++

基本上我在问安装程序是如何工作的。创建新的可执行文件的代码是什么？

编辑：听起来我正在寻找的答案是文件存储在档案中，安装程序将它们解压缩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:03:27.440

安装程序通常会提取附加的存档并将其放入所需的目录，注册一些库等等。

安装程序的另一个任务是检测是否安装了所需的依赖项并在需要时安装它们。

# javascript - 用于更新 JSON 对象名称的 Javascript 事件处理程序

> ID：13660174
> 
> 赞同：0
> 
> 时间：2012-12-01T14:01:55.523
> 
> 标签：javascript, json, dom-events

我刚开始使用 Javascript，想知道是否有人会介意用我的这个查询为我指明正确的方向。

我创建了一个 JSON 数组，现在希望在单击按钮时从数组中更新页面上的一些文本。我有一个可以更新图像的事件处理函数，但我不知道如何在“nextPage”函数中更新对象名称（pageRef），以便从数组的内容中更新文本。我很欣赏这可能是一个非常明显的问题，但将不胜感激在正确的直接指针。

```
 var diary_1938 = {

    'page_1': {
    'date_0': '1st Jan','entry_0': 'This is the first line',
    'date_1': '2nd Jan','entry_1': 'This is the second line',
    'date_2': '4th Jan','entry_2': 'This is the third line',
    'img': 'image_1.jpg'},
    'page_2':  {
    'date_0': '12th Jan','entry_0': 'This is the first line',
    'date_1': '13th Jan','entry_1': 'This is the second line',
    'date_2': '14th Jan','entry_2': 'This is the third line',
    'img': 'image_2.jpg'},
    };

    var counter = 1;
    var pageRef = "page_"+counter;

    function nextPage() {
      counter++
      document.getElementById("DiaryImage").src = "image_"+counter+".jpg";
    }

    function prevPage() {
      counter--
      document.getElementById("DiaryImage").src = "image_"+counter+".jpg";
    }

    </script>
    </head>

    <body>

    <button type = "submit" name = "submit_prev" onClick = "prevPage()"> << </button>
    <button type = "submit" name = "submit_next" onClick = "nextPage()"> >> </button>
    <br/>

        <script> document.write(diary_1938[pageRef].date_0 + "<br/>"); </script>
        <script> document.write(diary_1938[pageRef].entry_0 + "<br/><br/>"); </script>
        <script> document.write(diary_1938[pageRef].date_1 + "<br/>"); </script>
        <script> document.write(diary_1938[pageRef].entry_1 + "<br/><br/>"); </script>
        <script> document.write(diary_1938[pageRef].date_2 + "<br/>"); </script>
        <script> document.write(diary_1938[pageRef].entry_2 + "<br/><br/>"); </script>    

    <script>document.write("<img id = 'DiaryImage' src = 'image_1.jpg' width='370' height='790' name ='Dunford'/>"); </script>

    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:13:22.080

因为每次单击按钮时都会调用 nextPage() 中的代码。但是，您的代码如：***var counter = 1;var pageRef = "page_"+counter;document.write(diary_1938[pageRef].date_0 + "
");*** 在初始化时只执行一次。所以你最好把你的代码写成：

```
function nextPage() {
  counter++;
  pageRef = "page_"+counter;
   /*clear written content before*/
  document.write(diary_1938[pageRef].date_0 + "<br/>");
   /*other document.write,*/
  document.getElementById("DiaryImage").src = "image_"+counter+".jpg";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:50:23.653

`document.write`仅在页面加载到浏览器时读取一次，使用它来更新动态内容并不是真正的最佳实践。

您可以做的是将您的动态内容包装在一个 div 中，如下所示：

```
 <div id="content"></div> 
```

然后编写一个从 JSON 数据填充此 div 的函数（这可能更优雅，但为简单起见，您刚刚开始）：

```
function populatePageFromJson(JSONobject){
var divElement=document.getElementById("content");
divElement.innerHTML=JSONobject[pageRef].date_0+"<br/>"+ 
                     JSONobject[pageRef].entry_0+"<br/><br/>"+
                     JSONobject[pageRef].date_1+"<br/>"+ 
                     JSONobject[pageRef].entry_1+"<br/><br/>"+
                     JSONobject[pageRef].date_2+"<br/>"+ 
                     JSONobject[pageRef].entry_2+"<br/><br/>"
} 
```

当页面加载时会加载此功能：

```
window.onload= function() { 
        populatePageFromJson(diary_1938);
} 
```

也改变`prevPage()`了`nextPage()` （请注意，在您的情况下，您忘记更新 pageRef）：

```
 function prevPage() {
      counter--
      pageRef = "page_"+counter;
      document.getElementById("DiaryImage").src = "image_"+counter+".jpg";
      populatePageFromJson(diary_1938);
    } 
```

这是一个[jsFiddler 示例](http://jsfiddle.net/opherv/2yG4f/)，可以将其全部绑定。

同样，这并不是最优雅的方式，但希望它能让您对 Javascript 有所了解。

一旦您对基本 Javascript 的理解感到满意，我建议您熟悉[jQuery](http://www.jquery.com)。这将使此类任务变得更加容易。祝你好运！

# c# - 访问用户注册向导中的自定义字段

> ID：13660175
> 
> 赞同：4
> 
> 时间：2012-12-01T14:01:56.877
> 
> 标签：c#, asp.net, .net

我创建了一个简单的 CreateUserWizard 来注册我的用户。我添加了 2 个文本框：姓氏和名字。

现在，我想在用户注册时将它们添加到我的数据库中。这是我所做的：

```
<asp:CreateUserWizard ID="RegisterUser" runat="server" EnableViewState="false" OnCreatedUser="RegisterUser_CreatedUser" RequireEmail="false">
  <WizardSteps>
    <asp:CreateUserWizardStep ID="RegisterUserWizardStep0" runat="server">
      <ContentTemplate>
        <asp:TextBox ID="LastName" runat="server" ></asp:TextBox>
        [...]
        <asp:Button ID="CreateUserButton" runat="server" CommandName="MoveNext" Text="S'inscrire"
          ValidationGroup="RegisterUserValidationGroup"/> 
```

在 .cs 文件中：

```
 protected void RegisterUser_CreatedUser(object sender, EventArgs e)
 {
   TextBox test = RegisterUser.FindControl("LastName") as TextBox;
   // Or using the generated ID
   TextBox test2 = RegisterUser.FindControl("MainContent_RegisterUser_CreateUserStepContainer_LastName") as TextBox;
 } 
```

但无论我尝试什么，我的 TextBox 总是`null`......

我错过了什么 ？我怎样才能得到这些 TextBox 的价值？

**编辑：** 这个解决方案对我有用：

```
(TextBox)RegisterUser.WizardSteps[0].FindControl("CreateUserStepContainer").FindControl("LastName"); 
```

唯一的问题是我使用调试器找到了容器名称“CreateUserStepContainer”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:23:33.517

这个解决方案对我有用：

```
(TextBox)RegisterUser.WizardSteps[0].FindControl("CreateUserStepContainer").FindControl("LastName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:06:27.410

你必须像这样找到控件`CreateUserWizard.CreateUserWizardStep.ContentTemplateContainer.control`
：

```
 TextBox test = (TextBox)RegisterUser.RegisterUserWizardStep0.ContentTemplateContainer.FindControl("LastName"); 
```

# c# - 多元素xml查询到变量

> ID：13660182
> 
> 赞同：0
> 
> 时间：2012-12-01T14:03:11.540
> 
> 标签：c#, xml, linq, linq-to-xml

我的 xml 看起来像这样：

```
 <root>
            <x a1 = "abc">
                <y a2 = "def"> 
                    <z value1 = 5 value2 = 10 value3 = 15/>             
                </y>
            </x>
        </root> 
```

我的主要代码：

```
static void Main(string[] args)
{
    int value;
    IEnumerable<XElement> xs = from x in xDoc.Descendants("x")
                               where (string)x.Attribute("a1") == "abc"
                               select x;
    IEnumerable<XElement> ys = from y in xs.Descendants("y")
                               where (string)y.Attribute("a2") == "def"
                               select time;
    IEnumerable<XElement> zs = from z in ys.Descendants("z")
                               where z.Attribute == value1
                               select z;
} 
```

我正在尝试根据特定条件将 int 值设置为节点 z 的值 1、2 或 3。当我尝试在节点 z 中过滤所需的值时，会出现我的问题。有人可以解释我如何将节点 z 的匹配值分配给 int 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:12:55.587

如果我理解正确，您想选择 z 节点的一些元素：

```
string value = "value1";

var query = xDoc.Descendants("x")
                .Where(x => (string)x.Attribute("a1") == "abc")
                .Descendants("y")
                .Where(y => (string)y.Attribute("a2") == "def")
                .Descendants("z")
                .Select(z => (string)z.Element(value))
                .Select(s => Int32.Parse(s.Replace("\"", ""))); 
```

查询结果 - `IEnumerable<int>`。如果您确定会有一个值，或者您需要第一个值，您可以申请`Single`。`First`

另外我不明白为什么你保持 values as`"5"`而不是 simple `5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:31:26.517

您可以在此处使用 XPath (System.Xml.XPath)

```
var elemZ = xDoc.XPathSelectElement("//x[@a1='abc']/y[@a2='def']/z");

int val1 = (int)elemZ.Attribute("value1"); 
```

将您的 xml 更正为 `<z value1 = "5" value2 = "10" value3 = "15" />`

您甚至可以通过单个 linq 获取所有属性值

```
var values = elemZ.Attributes().Select(a => (int)a).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:53:50.377

我认为你需要这样的东西：

```
 IEnumerable<XElement> z's = from z in y.Descendants("z")
                                  where z.Attribute("value1") != null
                                  select z; 
```

# android - AsyncTask，doInBackground() 不运行

> ID：13660184
> 
> 赞同：1
> 
> 时间：2012-12-01T14:03:22.133
> 
> 标签：android, android-asynctask

我正在阅读`AsyncTask`并尝试了一个程序。但这似乎不起作用。我是编程新手，如果可能的话，请你帮帮我。

```
public class MainActivity extends Activity {

TextView title;
TextView date;
TextView cat;
TextView desc;
Button rss;

difficultTask doBack;

private static final String TAG_ITEM = "item";
private static final String TAG_TITLE = "title";
private static final String TAG_LINK = "link";
private static final String TAG_DESC = "description";
private static final String TAG_DATE = "pubDate";
private static final String TAG_CAT = "category";

JSONArray rssFeed = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);           
    title = (TextView)findViewById(R.id.title);                  
    date = (TextView)findViewById(R.id.date);        
    cat = (TextView)findViewById(R.id.cat);        
    desc = (TextView)findViewById(R.id.description);        
    rss = (Button)findViewById(R.id.rss);
    rss.setOnClickListener(new Button.OnClickListener() {            
        @Override
        public void onClick(View v) {
            doBack = new difficultTask();
            doBack.execute();                
            }
        });        
}

class difficultTask extends AsyncTask<Void, Void, Void>{
    @Override
    protected Void doInBackground(Void... params) {        

        JSONObject json = getJSONFromUrl("http://example.com/mysite/rss.js");

        String categ = "";String t = "";String d = "";String da = "";String a = ""; 

        try {    
            JSONArray jsonArray = json.getJSONArray(TAG_ITEM);
            for(int i = 0; i<jsonArray.length(); i++){
                JSONObject c = rssFeed.getJSONObject(i);
                 t = c.getString(TAG_TITLE);
                 a = c.getString(TAG_LINK);
                 d = c.getString(TAG_DESC);
                 da = c.getString(TAG_DATE);
                 categ = c.getString(TAG_CAT);

            }

            Log.d("Log", t+"/n"+a+"/n"+d+"/n"+da+"/n"+categ);
        } catch (JSONException e) {
            Log.d("Log", e.getMessage());
            e.printStackTrace();
        }            
        Log.d("Log", "Background");
        return t;
    }

    @Override
    protected void onPostExecute(Void result) {
      super.onPostExecute(result);
      title.setText(result);
    }

    public JSONObject getJSONFromUrl(String url){
        InputStream ips = null;
        JSONObject jsonObj = null;
        String json = "";

        try{
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);               
            HttpResponse respone = httpClient.execute(httppost);
            HttpEntity entity = respone.getEntity();

            ips = entity.getContent();
        }
        catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try{
            BufferedReader bufff = new BufferedReader(new InputStreamReader(ips, "UTF-8"));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = bufff.readLine()) != null){
                sb.append(line + "\n");
            }
            ips.close();
            json = sb.toString();
        }
        catch(Exception e){
            Log.d("Log", e.toString());
        }
            try {
                jsonObj = new JSONObject(json);
            } catch (JSONException e) {
                e.printStackTrace();
            }

        return jsonObj;        
    }

}

} 
```

`doInBackground()`不工作，请帮助。以及如何`String`从后台返回一些 st、a、c、d、da？

**UPD：**抱歉 Logcat 没有工作，现在我看到了错误

```
12-01 19:17:30.109: E/AndroidRuntime(2500): FATAL EXCEPTION: AsyncTask #1
12-01 19:17:30.109: E/AndroidRuntime(2500): java.lang.RuntimeException: An error occured while executing doInBackground()
12-01 19:17:30.109: E/AndroidRuntime(2500):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.lang.Thread.run(Thread.java:856)
12-01 19:17:30.109: E/AndroidRuntime(2500): Caused by: java.lang.NullPointerException
12-01 19:17:30.109: E/AndroidRuntime(2500):     at com.example.mytwitter.MainActivity$difficultTask.doInBackground(MainActivity.java:99)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at com.example.mytwitter.MainActivity$difficultTask.doInBackground(MainActivity.java:1)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-01 19:17:30.109: E/AndroidRuntime(2500):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-01 19:17:30.109: E/AndroidRuntime(2500):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T06:47:09.073

```
JSONObject json = getJSONFromUrl("http://example.com/mysite/rss.js"); 
```

你`AsyncTask`是完美的，你应该在这个语句之前做一个日志来检查`getJSONFromUrl()`返回的内容，我认为这个方法返回*null*这就是你面临错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:56:28.223

好的，我为您添加了一些简单`Asynctask`的内容。尝试告诉我这是否对您有用。

```
public class SenderActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SenderActivity.Sender.execute();
    }

    class Sender extends AsyncTask<Void, Integer, Integer> {
        ProgressDialog pd = null;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(SenderActivity.this);
            pd.setTitle("Sending...");
            pd.setMessage("Please wait..");
            pd.setCancelable(false);
            pd.show();
        }
        @Override
        protected Integer doInBackground(Void... params) {
            System.out.println("Try some simple operation to learn well");
            //check whether this printing in your logcat
            return 3;
        }

        @Override
        protected void onPostExecute(Integer result) {
            super.onPostExecute(result);
            pd.dismiss();
        }
    }
} 
```

# salesforce - CustomButtons 中只能使用按钮

> ID：13660193
> 
> 赞同：0
> 
> 时间：2012-12-01T14:04:10.090
> 
> 标签：salesforce, apex-code, visualforce

嗨，我必须将现有的 eclipse 项目部署到我们的开发人员组织，当我部署它时它给了我一个错误

# 部署结果：

文件名：layouts/Account-Account Layout carousel.layout 全名：Account-Account Layout carousel 操作：NO ACTION 结果：FAILED 问题：CustomButtons 中只能使用按钮

这是Account-Account Layout carousel.layout的源代码

```
<?xml version="1.0" encoding="UTF-8"?>
<Layout xmlns="http://soap.sforce.com/2006/04/metadata">
    <customButtons>Edit_Carousel_Test</customButtons>
    <excludeButtons>DataDotComClean</excludeButtons>
    <excludeButtons>Submit</excludeButtons>
    <layoutSections>
        <customLabel>false</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>true</editHeading>
        <label>Account Information</label>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>OwnerId</field>
            </layoutItems>
            <layoutItems>
                <behavior>Required</behavior>
                <field>Name</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>ParentId</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>AccountNumber</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Site</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Type</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Industry</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>AnnualRevenue</field>
            </layoutItems>
        </layoutColumns>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Rating</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Phone</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Fax</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Website</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>TickerSymbol</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Ownership</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>NumberOfEmployees</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Sic</field>
            </layoutItems>
        </layoutColumns>
        <style>TwoColumnsTopToBottom</style>
    </layoutSections>
    <layoutSections>
        <customLabel>false</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>true</editHeading>
        <label>Address Information</label>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>BillingAddress</field>
            </layoutItems>
        </layoutColumns>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>ShippingAddress</field>
            </layoutItems>
        </layoutColumns>
        <style>TwoColumnsTopToBottom</style>
    </layoutSections>
    <layoutSections>
        <customLabel>false</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>true</editHeading>
        <label>Additional Information</label>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>CustomerPriority__c</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>SLAExpirationDate__c</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>NumberofLocations__c</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Active__c</field>
            </layoutItems>
        </layoutColumns>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>SLA__c</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>SLASerialNumber__c</field>
            </layoutItems>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>UpsellOpportunity__c</field>
            </layoutItems>
        </layoutColumns>
        <style>TwoColumnsLeftToRight</style>
    </layoutSections>
    <layoutSections>
        <customLabel>false</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>true</editHeading>
        <label>System Information</label>
        <layoutColumns>
            <layoutItems>
                <behavior>Readonly</behavior>
                <field>CreatedById</field>
            </layoutItems>
        </layoutColumns>
        <layoutColumns>
            <layoutItems>
                <behavior>Readonly</behavior>
                <field>LastModifiedById</field>
            </layoutItems>
        </layoutColumns>
        <style>TwoColumnsTopToBottom</style>
    </layoutSections>
    <layoutSections>
        <customLabel>false</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>true</editHeading>
        <label>Description Information</label>
        <layoutColumns>
            <layoutItems>
                <behavior>Edit</behavior>
                <field>Description</field>
            </layoutItems>
        </layoutColumns>
        <style>OneColumn</style>
    </layoutSections>
    <layoutSections>
        <customLabel>true</customLabel>
        <detailHeading>false</detailHeading>
        <editHeading>false</editHeading>
        <label>Custom Links</label>
        <layoutColumns/>
        <layoutColumns/>
        <layoutColumns/>
        <style>CustomLinks</style>
    </layoutSections>
    <relatedLists>
        <fields>FULL_NAME</fields>
        <fields>CONTACT.TITLE</fields>
        <fields>CONTACT.EMAIL</fields>
        <fields>CONTACT.PHONE1</fields>
        <relatedList>RelatedContactList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>OPPORTUNITY.NAME</fields>
        <fields>OPPORTUNITY.STAGE_NAME</fields>
        <fields>OPPORTUNITY.AMOUNT</fields>
        <fields>OPPORTUNITY.CLOSE_DATE</fields>
        <relatedList>RelatedOpportunityList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>CASES.CASE_NUMBER</fields>
        <fields>NAME</fields>
        <fields>CASES.SUBJECT</fields>
        <fields>CASES.PRIORITY</fields>
        <fields>CASES.CREATED_DATE_DATE_ONLY</fields>
        <fields>CASES.STATUS</fields>
        <fields>OWNER_NAME</fields>
        <relatedList>RelatedCaseList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>TASK.SUBJECT</fields>
        <fields>TASK.WHO_NAME</fields>
        <fields>TASK.WHAT_NAME</fields>
        <fields>ACTIVITY.TASK</fields>
        <fields>TASK.DUE_DATE</fields>
        <fields>TASK.STATUS</fields>
        <fields>TASK.PRIORITY</fields>
        <fields>CORE.USERS.FULL_NAME</fields>
        <relatedList>RelatedActivityList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>TASK.SUBJECT</fields>
        <fields>TASK.WHO_NAME</fields>
        <fields>TASK.WHAT_NAME</fields>
        <fields>ACTIVITY.TASK</fields>
        <fields>TASK.DUE_DATE</fields>
        <fields>CORE.USERS.FULL_NAME</fields>
        <fields>TASK.LAST_UPDATE</fields>
        <relatedList>RelatedHistoryList</relatedList>
    </relatedLists>
    <relatedLists>
        <relatedList>RelatedNoteList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>ASSET.NAME</fields>
        <fields>ASSET.SERIAL_NUMBER</fields>
        <fields>ASSET.INSTALL_DATE</fields>
        <fields>ASSET.QUANTITY</fields>
        <fields>CONTACT.NAME</fields>
        <fields>ASSET.STATUS</fields>
        <fields>ASSET.IS_COMPETITOR_PRODUCT</fields>
        <relatedList>RelatedAssetList</relatedList>
    </relatedLists>
    <relatedLists>
        <fields>ACCOUNT.NAME</fields>
        <fields>OPPORTUNITY.NAME</fields>
        <fields>PARTNER.ROLE</fields>
        <relatedList>RelatedPartnerList</relatedList>
    </relatedLists>
    <relatedObjects>ParentId</relatedObjects>
    <showEmailCheckbox>false</showEmailCheckbox>
    <showHighlightsPanel>true</showHighlightsPanel>
    <showInteractionLogPanel>true</showInteractionLogPanel>
    <showRunAssignmentRulesCheckbox>false</showRunAssignmentRulesCheckbox>
    <showSubmitAndAttachButton>false</showSubmitAndAttachButton>
    <summaryLayout>
        <masterLabel>00hE0000000JOz5</masterLabel>
        <sizeX>4</sizeX>
        <sizeY>0</sizeY>
        <summaryLayoutStyle>Default</summaryLayoutStyle>
    </summaryLayout>
</Layout> 
```

我是 Salesforce 的新手，了解基本的视觉力量和顶点，任何人都可以请帮助如何消除此错误/问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:08:05.037

我怀疑有人创建了同名的自定义链接（链接是默认选择的选项）。转到您的目标环境，查看 Setup->Customize->Accounts->Buttons and Links 并验证，如有必要，将类型更改为“详细页面按钮”。如果根本没有这样的按钮/链接，则必须将其与布局一起部署或手动创建。

在 Eclipse IDE 中，转到 [您的项目]/objects/Account.object。如果最近添加了按钮，您可能需要点击“从服务器刷新”。

（如果您没有 Account.object 或刷新带回空文件 - 您必须修改您的`package.xml`. 如果您是新手，我不建议手动修改它，最好是右键单击，“添加/删除元数据组件”并使用复选框来包含标准对象。）

滚动到文件底部，会有一个带有一个或多个`<weblink>....</weblink>`标签的部分。验证是否存在与按钮名称同名的标签。与此类似的东西：

```
<webLinks>
    <fullName>Edit_Carousel_Test</fullName> <!-- name is important -->
    <availability>online</availability>
    <displayType>button</displayType>       <!-- of course so is this part -->
    <height>600</height>
    <linkType>url</linkType>
    <masterLabel>Edit Carousel Test</masterLabel>
    <openType>sidebar</openType>
    <protected>false</protected>
    <url>/apex/someVisualforcePage?id={!Account.Id}</url>
</webLinks> 
```

最后 - 在构建部署包时，确保“Account.object”与您的“Account-Account Layout carousel.layout”一起部署。或者（因为可以在不部署的情况下添加按钮或链接）您可以决定通过在目标组织中手动创建具有相同名称和行为的按钮来满足这种依赖关系。

# php - PHP DOMDocument 在克隆/返回时更改节点类实例？

> ID：13660194
> 
> 赞同：2
> 
> 时间：2012-12-01T14:04:10.203
> 
> 标签：php, xml, dom

我设法使用 PHP DOM 实现来创建包含`DOMElement`s 子类的自定义文档树，但我发现一些非常奇怪的事情：克隆或返回 DOMDocument 似乎会更改子节点类。

基本示例

```
class Section extends DOMElement
{
  public function __construct($name, $value = null, $uri = null)
  {
    parent::__construct($name, $value, $uri);
  }
}

class Paragraph extends DOMElement
{
  public function __construct($name, $value = null, $uri = null)
  {
    parent::__construct($name, $value, $uri);
  }
}

function display_doc($label, DOMDocument $doc)
{
  $endl = (PHP_SAPI == "cli") ? "\n" : "&lt;br /&gt;";
  $pad  = (PHP_SAPI == "cli") ? "\t" : "&amp;nbsp;&amp;nbsp;";
  echo ($label . $endl);

  $root = $doc->documentElement;
  echo ($pad . "root " . get_class($root) . $endl);
  echo ($pad . "first child " . get_class($root->firstChild) . $endl);
}

function test_dom($name, DOMDocument &$instance = null)
{
  $doc = ($instance) ? $instance : new DOMDocument("1.0", "utf-8");
  $root = $doc->appendChild($doc->createElement("root"));
  $section = new Section("section");

  $root->appendChild($section);
  $paragraph = new Paragraph("para");
  $section->appendChild($paragraph);

  $clone = clone $doc;

  display_doc($name . " - Inside function", $doc);
  display_doc($name . " - Inside function (clone)", $clone);

  return $doc;
}

$doc = test_dom("Using new instance");
display_doc("Returned doc in global scope", $doc);

$doc2 = new DOMDocument("1.0", "utf-8");
test_dom("Using global scope instance", $doc2);
display_doc("Modified doc in global scope", $doc2); 
```

将输出

```
使用新实例 - 内部函数
    根 DOMElement
    第一个孩子节
使用新实例 - 内部函数（克隆）
    根 DOMElement
    第一个子 DOMElement
在全局范围内返回文档
    根 DOMElement
    第一个子 DOMElement
使用全局范围实例 - 内部函数
    根 DOMElement
    第一个孩子节
使用全局范围实例 - 内部函数（克隆）
    根 DOMElement
    第一个子 DOMElement
全局范围内的修改文档
    根 DOMElement
    第一个子 DOMElement

```

当文档被克隆或返回（甚至通过引用）时，第一个孩子的类从`Section`变为简单`DOMElement`

*   我的 PHP 版本是 5.3.10，但在 5.4 下发生相同的行为
*   使用 DOMDocument::registerNodeClass 将由`DOMElement`注册的节点类进行转换，但我有多个子类`DOMElement`

我的问题并不是真正寻找解决方法或不同的解决方案，而是我想了解这里发生了什么以及通过哪种机制转换子节点。

编辑：我发现了与此问题相关的错误报告（2 岁）：http: [//www.mail-archive.com/php-bugs@lists.php.net/msg134710.html](http://www.mail-archive.com/php-bugs@lists.php.net/msg134710.html)。建议的解决方法效果很好，但尚不清楚它是真正的错误还是对 DOM API 的无效使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T12:08:49.987

当您使用时`new Paragraph`，`new Section`您需要将它们存储在一个单独的数组中以将它们保存在内存中，这样`DOMDocument`就不仅仅是使用它的默认类。

错误报告是准确的，我认为`DOM`PHP 的整个实现存在缺陷。

在别处保存对象的副本是内存密集型的，无论如何使用 DOM 也是如此。由于存在许多缺陷，我个人正在努力让一个体面的实施工作，所以你不是唯一的:)

# sql - SQL根据计数器通过复制插入记录

> ID：13660204
> 
> 赞同：4
> 
> 时间：2012-12-01T14:05:28.470
> 
> 标签：sql, ms-access, insert, duplicates

如果这甚至可能，我需要根据 DuplicateNo 字段中指示的内容插入/复制记录。为了说明，如果我有这张桌子：

表“客户”：

```
CustNo      CustName       DuplicateNo
0001        John           2
0002        Smith          3 
```

我需要有一个像这样的输出（新的空表）：表'DupliTable：

```
CustNo      CustName
0001        John
0001        John
0002        Smith
0002        Smith
0002        Smith 
```

感谢人们的精彩想法。我非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:19:49.977

在 Access 中，我认为您唯一的选择是编写一些代码来执行此操作。这是一个遍历记录的示例：循环遍历[MS Access 中所有记录的代码](https://stackoverflow.com/questions/5864160/code-to-loop-through-all-records-in-ms-access)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:19:28.803

好的，我认为最简单和最快的方法是使用 VBA 使用多个附加查询。下面的代码针对每个 DuplicateNo 运行附加查询 N 次，其中 N = DuplicateNo，然后对 DuplicateNo 字段进行过滤。

因此，它会在复制所有 DuplicateNo = 1 的记录时运行追加查询，在 DuplicateNo = 2 的情况下运行查询两次，依此类推。

追加查询将运行所有唯一 DuplicateNo 值的总和。因此，如果可能的值为 1-4，则查询将运行 10 次。

```
Sub FillOutputTable()
   Dim RS As Recordset
   Dim strSQL As String
   Dim N As Integer
   Dim I As Integer
   strSQL = ""
   strSQL = strSQL & "SELECT DuplicateNo "
   strSQL = strSQL & "FROM [table-input] "
   strSQL = strSQL & "GROUP BY [table-input].DuplicateNo "
   Set RS = CurrentDb.OpenRecordset(strSQL)
   Do
      N = RS("DuplicateNo")
      For I = 1 To N
         strSQL = ""
         strSQL = strSQL & "INSERT INTO [table-output] ( CustNo, CustName ) "
         strSQL = strSQL & "SELECT [table-input].CustNo, [table-input].CustName "
         strSQL = strSQL & "FROM [table-input] "
         strSQL = strSQL & "WHERE [table-input].DuplicateNo=" & N
         CurrentDb.Execute strSQL
      Next I
      RS.MoveNext
   Loop Until RS.EOF
   RS.Close
   Set RS = Nothing
End Sub 
```

# apache-camel - 是否可以（如果可以的话）使用 apache camel 删除 zookeeper 节点？

> ID：13660205
> 
> 赞同：1
> 
> 时间：2012-12-01T14:05:55.410
> 
> 标签：apache-camel, apache-zookeeper

我正在研究使用 Zookeeper 来同步分布式 Camel 实例。这样做似乎不可能从 Camel 的 Zookeeper 中删除 znode（我想象了某种生产者操作）。

查看组件源似乎证实了这一点。（我没有找到任何明确要求删除节点的代码）。

我错过了什么吗？何时会删除通过 Camel（在我的情况下为 EPHEMERAL）创建的节点？也许我想念动物园管理员的理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:03:09.410

不，这目前是不可能的。我已经记录了在未来的 Camel 版本中添加此类功能的票证：[https ://issues.apache.org/jira/browse/CAMEL-5843](https://issues.apache.org/jira/browse/CAMEL-5843)

# cordova - Phonegap iOS device.uuid 未定义

> ID：13660208
> 
> 赞同：1
> 
> 时间：2012-12-01T14:06:32.790
> 
> 标签：cordova

我有以下代码：

```
<script type="text/javascript" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8">
// Wait for PhoneGap to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
//
function onDeviceReady() {
    var element = document.getElementById('deviceProperties');
    element.innerHTML = 'Device Name: '     + device.name     + '<br />' + 
                       'Device PhoneGap: ' + device.phonegap + '<br />' + 
                        'Device Platform: ' + device.platform + '<br />' + 
                        'Device UUID: '     + device.uuid     + '<br />' + 
                       'Device Version: '  + device.version  + '<br />';
}
</script>
</head>
<body>
 <p id="deviceProperties">Loading device properties...</p>
</body> 
```

但我的 iPhone 4S 只显示“正在加载设备属性...”文本。

Corova.plist 是另一个问题吗？我正在 Windows 上开发它，我无法在可视化编辑器中设置它，也找不到任何关于它的格式和可能性的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:52:03.897

查看文档中的示例 ondeviceready 处理程序

[http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#deviceready](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#deviceready)

他们使用

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
} 
```

和

```
<body onload="onLoad()"> 
```

尝试以类似的方式设置您的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:54:24.400

尝试从 html 中的 id 中删除“设备”。

# macos - 在 Windows 上构建的 Install4j 在 OSX 上呈现代码签名错误 CSSMERR_TP_NOT_TRUSTED

> ID：13660212
> 
> 赞同：2
> 
> 时间：2012-12-01T14:06:47.207
> 
> 标签：macos, certificate, code-signing, install4j

我在 Windows XP 上使用 Install4j Multi-Platform 5.1.3，我正在尝试为 Mac OSX（Mountain Lion）对我的包进行代码签名。我在 Windows XP 和 mac 上都安装了 Apple 的中间证书。我已按照有关通过 Xcode 管理器和钥匙串获取证书的说明进行操作。我试图为安装程序和应用程序使用证书。

构建后，我将 .dmg 文件移动到 mac 并打开它。我将 .app 文件复制到另一个位置以执行：

代码设计 -vvv -d myapp.app

它报告消息：myapp.app: CSSMERR_TP_NOT_TRUSTED

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:41:10.600

我越来越接近解决方案。原来安装install4j5的地方有一个resource\macos\certs。此文件夹包含 Apple 根证书和 Developer ID 证书。我删除了这些并从[http://www.apple.com/certificateauthority/](http://www.apple.com/certificateauthority/)更新了它们。

在我构建 CSSMERR_TP_NOT_TRUSTED 后不再报告。相反，它是证书信息。

现在，当我使用 safari（使用 Gatekeeper）安装时，它报告“无法打开，因为它来自身份不明的开发人员。” 在使用 CSSMERR_TP_NOT_TRUSTED 之前，网守报告文件已损坏。

# mysql - 如何在一列中显示两列不同类型的列？

> ID：13660217
> 
> 赞同：1
> 
> 时间：2012-12-01T14:07:15.780
> 
> 标签：mysql, select, join

我想显示两列不同类型或两列相同类型的数据，它们将在一列中显示。

类型是`date + time`, 或`varchar + varchar`等

我知道如何连接字符串（将字符串添加到一列），但似乎无法对两列数据执行此操作。

假设我想显示两列都是 varchar 类型，fname + lname = Ajay Punja

或者

```
Lname + DOB = Punja 01/01/2001 
```

我尝试使用单管和双管，加号等，但总是返回 0。

是因为我需要将两种不同的数据类型转换为一种匹配的数据类型吗？但是，两种 varchar 类型都返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:20:12.457

我想它会对你有所帮助。

```
SELECT CONCAT(2, ' test') as result form table_name; 
```

也可以使用该`CAST()`函数将数字显式转换为字符串。转换隐式发生在`CONCAT()`函数中，因为它需要字符串参数。例如

```
SELECT 38.8, CAST(38.8 AS CHAR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:03:14.740

**我的回答感谢这里的每个人:)**

```
SELECT CONCAT(fname, ' ', DOB) as Results FROM Person;
SELECT CONCAT(fname, ' ', lname) as Results FROM Person; 
```

现在我了解了如何正确使用 CONCAT。在我认为每个括号它必须只包含一个属性（或字符串）然后用足够的数据括号将它连接起来，但显然这是错误的。

**错误示例（尝试失败）：**

SELECT CONCAT(fname, '') + (' ', lname)) as Results FROM Person;

# facebook - Meteor 使用外部服务登录：如何获取个人资料信息？

> ID：13660219
> 
> 赞同：3
> 
> 时间：2012-12-01T14:07:20.850
> 
> 标签：facebook, meteor, github, twitter, login

我使用 Accounts-UI 和 Accounts-[Github/Twitter/Facebook/Google] 包，它们允许使用外部服务登录。

我修改`Accounts.ui.config`了`requestPermissions`，例如：

```
Accounts.ui.config({
  requestPermissions: {
    github: ['user'],
    facebook: ['user_photos']
  }
}); 
```

但是当我用 Github 登录时（例如），我只得到我的 Github 的名字。

与其他外部服务相同。

如何获取更多信息，例如头像的 url？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T00:33:03.597

您可以使用 Accounts.onCreateUser(fn) 方法来自定义创建用户时存储的内容。这是一些示例代码：

```
Accounts.onCreateUser(function (options, user) {
  var accessToken = user.services.github.accessToken,
      result,
      profile;

  result = Meteor.http.get("https://api.github.com/user", {
    params: {
      access_token: accessToken
    }
  });

  if (result.error)
    throw result.error;

  profile = _.pick(result.data,
    "login",
    "name",
    "avatar_url",
    "url",
    "company",
    "blog",
    "location",
    "email",
    "bio",
    "html_url");

  user.profile = profile;

  return user;
}); 
```

您必须在回调函数中对服务进行额外调用才能获取任何其他属性。目前，我知道没有办法直接插入 Meteor 用来获取身份属性的方法。

# php - SMPP connection

> ID：13660220
> 
> 赞同：0
> 
> 时间：2012-12-01T14:07:22.547
> 
> 标签：php, data-binding, smpp

I'm establishing an SMPP connection via PHP using [this](https://github.com/onlinecity/php-smpp/tree/windows-compatible) free library. To receive a message, I'm using the following code, given in the example:

```
<?php
    $GLOBALS['SMPP_ROOT'] = dirname(__FILE__); // assumes this file is in the root
    require_once $GLOBALS['SMPP_ROOT'].'/protocol/smppclient.class.php';
    require_once $GLOBALS['SMPP_ROOT'].'/transport/tsocket.class.php';

    // Construct transport and client
    $transport = new TSocket('your.smsc.com',2775);
    $transport->setRecvTimeout(60000); // for this example wait up to 60 seconds for data
    $smpp = new SmppClient($transport);

    // Activate binary hex-output of server interaction
    $smpp->debug = true;

    // Open the connection
    $transport->open();
    $smpp->bindReceiver("USERNAME","PASSWORD");

    // Read SMS and output
    $sms = $smpp->readSMS();
    echo "SMS:\n";
    var_dump($sms);

    // Close connection
    $smpp->close();
?> 
```

It works perfectly well, when I run the script in the browser window and send the SMS from my phone within given 60 seconds, but I don't quite understand how to make it work for a long time. I mean, like in real-life situation, when it should run on the background and trigger some events when receiving an SMS. How do I do that? Because now, I need to refresh the page every time to get an SMS, and it only works once. Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:39:06.847

If your solution needs to run within a browser, you shouldn't connect to the SMPP server directly from your script. It would lead to a single user scenario.

You should put a endless loop around the readSMS call and make it a console application which runs as a daemon. Then you write the result of readSMS into a database and read this from your web application. With this you could use html refresh or some fancy ajax querying the database and presenting the incoming sms.

Usually SMPP receiver connections run in blocking mode on the socket (no timeout), because either you receive either a SMS, or an enquire_link (which needs to be answered by a enquire_link_resp - your library does this automatically). Whenever you read a SMS, process it (put it in the database) and call readSMS again - it will block until the next SMS comes in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T08:59:25.020

You can try this.

```
<?php
    set_time_limit(0);
    $GLOBALS['SMPP_ROOT'] = dirname(__FILE__); // assumes this file is in the root
    require_once $GLOBALS['SMPP_ROOT'].'/protocol/smppclient.class.php';
    require_once $GLOBALS['SMPP_ROOT'].'/transport/tsocket.class.php';

    // Construct transport and client
    $transport = new TSocket('your.smsc.com',2775);
    $transport->setRecvTimeout(60000); // for this example wait up to 60 seconds for data
    $smpp = new SmppClient($transport);

    // Activate binary hex-output of server interaction
    $smpp->debug = true;

    // Open the connection
    $transport->open();
    $smpp->bindReceiver("USERNAME","PASSWORD");

    while(1) {
        // Read SMS and output
        $sms = $smpp->readSMS();
        echo "SMS:\n";
        var_dump($sms);

    }
    // Close connection
    $smpp->close();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-02T12:55:56.267

Try to use another library

```
composer require glushkovds/php-smpp 
```

To receive sms:

```
<?php
require_once 'vendor/autoload.php';

$service = new \PhpSmpp\Service\Listener(['your.smsc.com'], 'login', 'pass');
$service->listen(function (\PhpSmpp\SMPP\Unit\Sm $sm) {
    if ($sm instanceof \PhpSmpp\Pdu\DeliverSm) {
        var_dump($sm->message);
    }
}); 
```

# android - 如何使用 abs 在操作栏中将搜索菜单项设为完整视图

> ID：13660225
> 
> 赞同：4
> 
> 时间：2012-12-01T14:08:08.777
> 
> 标签：android, action, android-actionbar, actionbarsherlock

我在操作栏中有五个操作菜单项，我正在使用操作栏 sherlock 库，如下所示：

在`onCreateOptionsMenu()`，我使用了以下代码：

```
 menu.add(0,1,0 "Settings")
      .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  menu.add(0,2,0 "Favorites")
      .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  menu.add(0,3,0 "List")
      .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  menu.add(0,4,0 "Upload")
      .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  menu.add(0,5,0 "Search")
     .setActionView(R.layout.search_layout)
     .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

现在我的问题是搜索编辑文本（红色）如下所示： ![搜索编辑文本显示如下](../Images/9c1dc8fd89f6b0440adf8048e0170715.png)

我想在操作栏中显示完整视图，如下所示：

![预期产出](../Images/028da967829d02efca1098752c1853e3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-06T02:00:15.827

这个问题有点老了，但无论如何我都会尝试回答。我希望有人会发现它有用。

这是我所做的：

**创建一个扩展 SearchView 的自定义 SearchView 类**。它定义了 2 个事件：一个在搜索视图展开时触发，另一个在折叠时触发。

```
public class EnglishVerbSearchView extends SearchView {

OnSearchViewCollapsedEventListener mSearchViewCollapsedEventListener;
OnSearchViewExpandedEventListener mOnSearchViewExpandedEventListener;

public EnglishVerbSearchView(Context context) {
    super(context);
}

@Override
public void onActionViewCollapsed() {
    if (mSearchViewCollapsedEventListener != null)
        mSearchViewCollapsedEventListener.onSearchViewCollapsed();
    super.onActionViewCollapsed();
}

@Override
public void onActionViewExpanded() {
    if (mOnSearchViewExpandedEventListener != null)
        mOnSearchViewExpandedEventListener.onSearchViewExpanded();
    super.onActionViewExpanded();
}

public interface OnSearchViewCollapsedEventListener {
    public void onSearchViewCollapsed();
}

public interface OnSearchViewExpandedEventListener {
    public void onSearchViewExpanded();
}

public void setOnSearchViewCollapsedEventListener(OnSearchViewCollapsedEventListener eventListener) {
    mSearchViewCollapsedEventListener = eventListener;
}

public void setOnSearchViewExpandedEventListener(OnSearchViewExpandedEventListener eventListener) {
    mOnSearchViewExpandedEventListener = eventListener;
}

} 
```

**在我的活动**中，我做了以下事情： - 创建了一个私有字段来存储对菜单的引用。- 定义了折叠和展开搜索视图的事件，我通过使用对菜单的引用来隐藏和显示其他操作。

```
public class DictionaryActivity extends ActionBarActivity {

    private Menu mMenu;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.dictionary, menu);

    MenuItem searchItem = menu.findItem(R.id.action_search);
    EnglishVerbSearchView searchView = (EnglishVerbSearchView) MenuItemCompat.getActionView(searchItem);        

    searchView.setOnSearchViewCollapsedEventListener(listenerCollapse);
    searchView.setOnSearchViewExpandedEventListener(listenerExpand);

    mMenu = menu;

    return super.onCreateOptionsMenu(menu);
}

final private OnSearchViewCollapsedEventListener listenerCollapse = new OnSearchViewCollapsedEventListener() {

    @Override
    public void onSearchViewCollapsed() {
        // show other actions
        MenuItem favouriteItem = mMenu.findItem(R.id.action_favourite);
        MenuItem playItem = mMenu.findItem(R.id.action_play);
        favouriteItem.setVisible(true);
        playItem.setVisible(true);

        // I'm doing my actual search here          
    }
};

final private OnSearchViewExpandedEventListener listenerExpand = new OnSearchViewExpandedEventListener() {

    @Override
    public void onSearchViewExpanded() {
        // hide other actions
        MenuItem favouriteItem = mMenu.findItem(R.id.action_favourite);
        MenuItem playItem = mMenu.findItem(R.id.action_play);
        favouriteItem.setVisible(false);
        playItem.setVisible(false);
    }
};

} 
```

在 menu.xml 文件中，我使用了自定义搜索视图：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:yourapp="http://schemas.android.com/apk/res-auto" >
<item android:id="@+id/action_search"
      android:title="@string/action_search"
      android:icon="@drawable/action_search"
      yourapp:showAsAction="always|collapseActionView"
      yourapp:actionViewClass="com.xxx.EnglishVerbSearchView" />
</menu> 
```

我希望这是所有需要的，因为它只是我完整的活动代码的摘录。让我知道是否缺少任何东西。

* * *

根据 arne.jans 的评论：

这似乎足以`MenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);`为`SearchView`. 优点是：其他菜单项进入溢出菜单并且仍然可以访问，即使打开了`SearchView`.

# c# - 在 Windows 8 和 Windows Phone 8 中使用数据库的正确方法

> ID：13660227
> 
> 赞同：4
> 
> 时间：2012-12-01T14:08:20.757
> 
> 标签：c#, azure, microsoft-metro, windows-phone-8

我目前正在开发一个需要存储一些表的 Windows 8 应用程序。目前，我正在使用带有 XDocument 类的 XML 文件来解决这个问题。它使用`save`和使用的`load`方法`GetFileAsync`等等`CreateFileAsync`。此外，这些`save`和`load`方法被不同的事件调用。但是，只要有重复调用，就会抛出异常，告诉我文件访问被拒绝。预期的行为 -[更多细节在这里](https://stackoverflow.com/questions/13045504/i-get-system-unauthorizedaccessexception-while-loading-xml-from-disk/13048669#comment17742695_13048669)！虽然有一些肮脏的方法可以避免这种情况（比如使用锁等），但我对结果不是很满意。我更喜欢数据库。此外，我计划为 Windows Phone 8（可能还有网络版本）编写另一个应用程序，它将利用这些数据。

他们一再表示 Windows 8 是基于云的。现在的问题是：存储数据的正确方法是什么？XML 似乎是正确的，但存在我上面提到的问题。什么是理想的基于云的解决方案，包括 Windows 8、Windows Phone 8 和可能的 Azure？我想要的只是存储表格并使其可访问。

对不起，如果问题似乎不清楚。如果需要，我会提供信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T14:33:48.050

如果您想使用 Azure，最简单的方法是[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)。它允许您在几分钟内使用 Web 界面设置数据库和 Web 服务。

它非常酷，允许您将自定义 javascript 添加到您的 web api 逻辑，并生成 json web api。有适用于 Windows 8、Windows Phone 和 iOS 的客户端库。您可以轻松地为任何启用 http 的前端推出自己的。

但是请注意，采用云路由意味着您的应用程序将无法离线工作，（如果您不编写缓存系统代码。缓存将需要本地数据库。）

**关于本地数据库** 您确实有以下可能性： 1）您的应用程序中的真实数据库，例如 SQLite。它以[Nuget 包](https://nuget.org/packages/System.Data.SQLite)的形式提供，但目前 ARM 支持不是开箱即用的，团队也不能保证。如果你不需要手臂，去试试吧:)

2）普通的旧文件存储，就像你以前做的那样。我个人经常这样做。但是，当您从不同的线程访问它时会遇到问题（访问被拒绝错误）。

当您将内容存储在本地文件中时，不要忘记锁定关键部分（即当您读取或写入文件时）以防止访问被拒绝异常。可以肯定的是，将您的写入/读取逻辑封装在您的应用程序中唯一的服务类实例中。（例如使用单例模式，或任何等效的）。

锁本身，现在。我想你正在使用异步等待。我也喜欢这种甜蜜的东西。但是经典的 C# 锁（`lock`例如使用关键字）不适用于异步等待。（即使它有效，阻塞也不会很酷）。

这就是奇妙的 AsyncLock 发挥作用的原因。这是一个锁，但它 - 大约 - 不会阻塞（你等待它）。

```
public class AsyncLock
{
    private readonly AsyncSemaphore m_semaphore;
    private readonly Task<Releaser> m_releaser;

    public AsyncLock()
    {
        m_semaphore = new AsyncSemaphore(1);
        m_releaser = Task.FromResult(new Releaser(this));
    }

    public Task<Releaser> LockAsync()
    {
        var wait = m_semaphore.WaitAsync();
        return wait.IsCompleted ?
            m_releaser :
            wait.ContinueWith((_, state) => new Releaser((AsyncLock)state),
                this, CancellationToken.None,
                TaskContinuationOptions.ExecuteSynchronously, TaskScheduler.Default);
    }

    public struct Releaser : IDisposable
    {
        private readonly AsyncLock m_toRelease;

        internal Releaser(AsyncLock toRelease) { m_toRelease = toRelease; }

        public void Dispose()
        {
            if (m_toRelease != null)
                m_toRelease.m_semaphore.Release();
        }
    }
}

public class AsyncSemaphore
{
    private readonly static Task s_completed = Task.FromResult(true);
    private readonly Queue<TaskCompletionSource<bool>> m_waiters = new Queue<TaskCompletionSource<bool>>();
    private int m_currentCount;

    public AsyncSemaphore(int initialCount)
    {
        if (initialCount < 0) throw new ArgumentOutOfRangeException("initialCount");
        m_currentCount = initialCount;

    }
    public Task WaitAsync()
    {
        lock (m_waiters)
        {
            if (m_currentCount > 0)
            {
                --m_currentCount;
                return s_completed;
            }
            else
            {
                var waiter = new TaskCompletionSource<bool>();
                m_waiters.Enqueue(waiter);
                return waiter.Task;
            }
        }

    }
    public void Release()
    {
        TaskCompletionSource<bool> toRelease = null;
        lock (m_waiters)
        {
            if (m_waiters.Count > 0)
                toRelease = m_waiters.Dequeue();
            else
                ++m_currentCount;
        }
        if (toRelease != null)
            toRelease.SetResult(true);

    }
} 
```

你可以这样使用它（我想你有一个名为 blogLock 的 AsyncLock 字段（取自我自己的一个项目）：

```
 using (await blogLock.LockAsync())
            {
                using (var stream = await folder.OpenStreamForReadAsync(_blogFileName))
                {
                    using (var reader = new StreamReader(stream))
                    {
                        var json = await reader.ReadToEndAsync();
                        var blog = await JsonConvert.DeserializeObjectAsync<Blog>(json);

                        return blog;
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T15:57:00.237

我偶然发现了这个线程，因为我基本上有完全相同的问题。令我震惊的是，微软自己制造了企业级数据库产品（SQL Server），它已经有几个轻量级、可嵌入的版本，但这些似乎无法与 Windows 8/Windows Phone 8 应用程序一起使用提供本地数据库。然而 MySQL 可以！

我曾尝试过几次尝试编写 Windows Phone 8 应用程序，使用我的 ASP.NET/VB/NET/SQL 经验，但我总是陷入困境，试图学习一种不同的方式来执行我可以执行的数据操作在网络环境中做梦而失去兴趣。为什么他们不能让 W8/WP8 应用程序轻松使用 SQL？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:04:47.570

如果数据与设备用户有关，请查看使用 SQLlite ... Stack 上有一个关于 SQLlite 和本地 winRT 数据库的问题：[WinRT/Metro 应用程序的本地数据库存储](https://stackoverflow.com/questions/9342511/local-database-storage-for-winrt-metro-applications)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:08:56.980

1.  SQL 数据库
2.  Windows 8 和 JavaScript 开发中的 IndexedDB

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T08:20:53.070

我知道这是一个已经有公认答案的老问题，但我还是会拿出我的肥皂盒并回答它，因为我认为与其解决技术问题，不如使用不依赖于的架构在本地数据库设施上。

根据我的经验，很少有数据需要设备本地数据库服务。

大多数需要本地存储的用户生成数据是非漫游的（即特定于设备的）用户偏好和配置（例如使用可移动存储设置）。游戏结果属于这一类。产生大量用户数据的应用程序通常在桌面上实现，并且几乎可以肯定与本地网络有快速可靠的连接，这使得基于服务器的存储非常适合 Office 文档等“胖”数据。

参考数据当然应该是基于服务器的，但您可以选择缓存它。Windows Phone 8 上的诺基亚地图是基于服务器的缓存数据的一个很好的例子。缓存甚至可以显式预加载以供离线使用。

我刚才阐述的世界观对于本地 SQL Server 几乎没有用处。如果您需要查询引擎，请使用 LINQ。将您的应用程序设置和用户数据表达为对象图并（反）序列化 XML。如果您不想维护 ORM 类，您甚至可以直接在 XML 上使用 Linq2Xml。

应该在所有用户的设备上都可用的任何类型的数据实际上都需要进行云存储。

* * *

为了解决 akshay 的一些评论，

## 地图数据

地理空间数据通常被组织成称为四叉树的结构，原因有多种，主要是为了提供随缩放而变化的详细程度。访问和操作这些数据的方式从它们作为对象图的表示中获得了相当大的优势，并且它们不会由用户更新，因此虽然这些数据当然*可以*存储在关系数据库中，而且可能是在编译时，但它肯定不是'不是那样存储或交付的。

LINQ 非常适合这种情况，因为它可以直接应用于四叉树。

数据当然在文件中。但我想你的意思是直接文件*访问*，而不是通过另一个进程间接访问。可能您的想法是，一次性彻底解决并发和查询处理问题并在客户端应用程序之间共享解决方案是一个好主意。但这是一个非常重量级的解决方案，查询处理方面已经被 LINQ 很好地处理（这就是我一直提到它的原因）。

## 您的 XML 问题

只读不需要加锁，所以通过缓存和使用单例模式避免文件系统锁定问题...

```
public static class XManager 
{
  static Dictionary<string, XDocument> __cache = new Dictionary<string, XDocument>();
  public static XDocument GetXDoc(string filepath)
  {
    if (!__cache.Contains(filepath)
    {
      __cache[filepath] = new XDocument();
      __cache[filepath].Load(filepath);
    }
    return _cache[filepath];
  }
} 
```

# java - 是否可以在编程中使用静音按钮作为输入？

> ID：13660228
> 
> 赞同：3
> 
> 时间：2012-12-01T14:08:39.290
> 
> 标签：java, audio, javasound

嘿，所以我昨天在使用 Spotify，我注意到在播放广告时，每当我将音量静音或将音量降至零时，spotify 都会暂停广告并且在您调高音量之前不会恢复。我开始思考这个问题并很好奇，这究竟是如何工作的？理论上我可以制作一个每次按下笔记本电脑上的静音按钮时打印“false”的java程序吗？如果我有兴趣了解更多相关信息，可以查找哪些主题？这是否与组装有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:58:50.600

我从来没有做过这样的事情，但是在网上快速研究之后，我想它可以通过[AudioSystem 类](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html)来实现。您可以在此处找到[教程](http://docs.oracle.com/javase/tutorial/sound/accessing.html)。

# webview - 用于台式电脑的 WebView 和 AppBar

> ID：13660230
> 
> 赞同：0
> 
> 时间：2012-12-01T14:08:52.057
> 
> 标签：webview, windows-8, microsoft-metro, winrt-xaml, appbar

我在我的应用程序中使用了 WebView 控件，它占用了所有屏幕的宽度和高度。我使用“WebBrush 解决方法”能够在需要时在 WebView 前面显示 AppBar 和其他控件。

对于 AppBar，它在使用平板电脑并从设备底部或顶部滑动时工作。但是在桌面上单击鼠标右键时，AppBar 几乎在它们出现的同时消失了。

是否存在能够支持这种情况的技巧/解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:26:55.677

WebView 的示例包含具有全屏 WebView 和 AppBar 的方案。hack 是在 AppBar 打开时调整 WebView 的大小。

[http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)

# fixed - 如何将固定的 div 保持在原来的位置？

> ID：13660236
> 
> 赞同：1
> 
> 时间：2012-12-01T14:09:25.053
> 
> 标签：fixed

我使用这段代码：

```
$(document).scroll(function() {
    if ($(this).scrollTop() > 100) {
        $('div#left').css({ 
            "position" : 'fixed',"top" : 70 });
    } else {
        $('div#left').css({ "position" : 'relative', "top" : 0 });
    }
}); 
```

位于`div#left`站点的左侧（不是屏幕），但在容器内`div`。我的问题是`div#left`转到屏幕的左边缘。
我怎样才能将它保持在同一个地方而不跳到最左边？

# hibernate - Spring MVC - 在服务器启动时从数据库中获取参考数据

> ID：13660238
> 
> 赞同：1
> 
> 时间：2012-12-01T14:09:45.653
> 
> 标签：hibernate, spring-mvc, drop-down-menu

在阅读了很多帖子后，我计划使用以下方法从数据库中提取参考数据（代码尚未测试）。

```
 @Override
    protected Map referenceData(HttpServletRequest request) throws Exception {

        //Data referencing for country list box
        Map referenceData = new HashMap();
        referenceData.put("countryList", articleService.getCountryList());

        //Data referencing for skills list box
        Map<String,String> javaSkill = new LinkedHashMap<String,String>();
        referenceData.put("skillsList", articleService.getSkillsList());

        return referenceData;
    } 
```

参考数据表如下

```
id  key     value               type
-----------------------------------------
1   1       United States       countries
2   2       India               countries
3   3       United Kingdom      countries
4   4       China               countries
5   1       Java                skills
6   2       Spring              skills
7   3       Hibernate           skills
8   4       SQL                 skills 
```

我有两个问题，

1.  这是一个静态参考数据（我不会在几个月内更改它），所以我不想为每个请求都访问数据库，而应该在服务器启动时加载数据。这该怎么做？
2.  这是正确的方法还是我完全错误地理解它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:32:44.767

我会`Enum`为. `key`_ `value`_ 它肯定更容易出错，但如果你仔细构建它们，性能提升将是值得的。请参见下面的代码：`Country``Skill`

```
public enum Country {
    UNITED_STATES(1, "United States"), INDIA(2, "India"), UNITED_KINGDOM(1, "United Kingdom"), CHINA(4, "China");  

    private int key;
    private String value;

    Country (int key, String value) {
        this.key = key;
        this.value = value;
    }

    public int getKey() {
        return key;
    }

    public String getValue() {
        return value;
    }
} 
```

所以你永远不需要去数据库来获取它们，并且使用枚举你可以做各种各样的事情，枚举，轻松访问引用属性，统一和一致地访问你的应用程序中的引用数据，而不是把它们集中在一个地图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:28:27.033

不，我会说这是一个正确的方法。你应该把国家放在他们自己的表里，把技能放在他们自己的表里。

首先，因为国家/地区不可避免地会出现额外的列，这对技能没有任何意义（反之亦然）。

其次，因为您希望从数据库中的其他表（以及对象模型中的其他实体）中引用国家或技能。因此，例如，您需要从地址到国家/地区的外键，并且您不希望地址引用技能而不是国家/地区。您需要从 Address 到 Country 的 ManyToOne 关联，而不是从 Address 到 ReferenceTable 的关联。

我感觉你正在预优化。这样的参考表很小，数据库会将所有内容都保存在内存中。所以查询它们，即使你经常这样做，也会非常快。

如果您想完全避免这些查询，那么您可以简单地使用 hibernate 的二级缓存，这将使一切变得透明（即您将像往常一样继续编程，并且 Hibernate 将进入其缓存而不是进入数据库） . 这将带来额外的优势，例如能够实际更新这些表中的信息，而不会获得太长时间的陈旧值（或根本不会获得陈旧值）。

# python - 将 Python 字典写入 CSV，其中键 = 列，值 = 行

> ID：13660240
> 
> 赞同：5
> 
> 时间：2012-12-01T14:09:49.193
> 
> 标签：python, excel, csv, dictionary

我有一个字典列表，我希望能够在 Excel 中打开，格式正确。到目前为止，这是我所拥有的，使用 csv：

```
list_of_dicts = [{'hello': 'goodbye'}, {'yes': 'no'}]
out_path= "/docs/outfile.txt"
out_file = open(ipath, 'wb')

writer = csv.writer(ofile, dialect = 'excel')

for items in list_of_dicts:
    for k,v in items.items():
        writer.writerow([k,v]) 
```

显然，当我在 Excel 中打开输出时，它的格式如下：

```
key  value
key  value 
```

我想要的是这样的：

```
key   key   key

value value value 
```

我无法弄清楚如何做到这一点，因此将不胜感激。另外，我希望列名是字典键，而不是默认的“A、B、C”等。对不起，如果这很愚蠢。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T15:14:18.483

csv 模块为此提供了一个[DictWriter类，在](http://docs.python.org/2/library/csv.html#csv.DictWriter)[另一个 SO answer](https://stackoverflow.com/questions/2982023/writing-header-in-csv-python-with-dictwriter)中对此进行了很好的介绍。关键点是，当您实例化 DictWriter 时，您需要知道所有列标题。您可以从您的 list_of_dicts 构造字段名称列表，如果是这样，您的代码变为

```
list_of_dicts = [{'hello': 'goodbye'}, {'yes': 'no'}]
out_path= "/docs/outfile.txt"
out_file = open(out_path, 'wb')

fieldnames = sorted(list(set(k for d in list_of_dicts for k in d)))
writer = csv.DictWriter(out_file, fieldnames=fieldnames, dialect='excel')

writer.writeheader() # Assumes Python >= 2.7
for row in list_of_dicts:
    writer.writerow(row)
out_file.close() 
```

我构建 fieldnames 的方式会扫描整个`list_of_dicts`，因此它会随着大小的增加而减慢。相反，您应该`fieldnames`直接从数据源构建，例如，如果数据源也是 csv 文件，您可以使用 DictReader 并使用`fieldnames = reader.fieldnames`.

您还可以`for`用一次调用替换循环`writer.writerows(list_of_dicts)`并使用`with`块来处理文件关闭，在这种情况下，您的代码将变为

```
list_of_dicts = [{'hello': 'goodbye'}, {'yes': 'no'}]
out_path= "/docs/outfile.txt"

fieldnames = sorted(list(set(k for d in list_of_dicts for k in d)))

with open(out_path, 'wb') as out_file:
    writer = csv.DictWriter(out_file, fieldnames=fieldnames, dialect='excel')
    writer.writeheader()
    writer.writerows(list_of_dicts) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:21:04.447

您需要编写 2 行单独的行，一行带有键，一行带有值，而不是：

```
writer = csv.writer(ofile, dialect = 'excel')

writer.writerow([k for d in list_of_dicts k in d])
writer.writerow([v for d in list_of_dicts v in d.itervalues()]) 
```

这两个列表推导首先从输入列表中的字典中提取所有键，然后是所有值，将它们组合成一个列表以写入 CSV 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T15:52:56.623

我认为最有用的是逐列编写，因此每个键都是一列（有利于以后的数据处理和用于例如 ML）。

昨天我遇到了一些麻烦，但我想出了我在其他网站上看到的解决方案。但是，据我所见，不可能一次浏览整个字典，我们必须将其划分为较小的字典（我的 csv 文件最后有 20k 行 - 被调查者、他们的数据和答案。我做到了这个：

```
 # writing dict to csv
    # 'cleaned' is a name of the output file 

    # 1 header 
    # fildnames is going to be columns names 

    # 2 create writer 
    writer = csv.DictWriter(cleaned, d.keys())

    # 3 attach header 
    writer.writeheader()

    # write separate dictionarties 
    for i in range(len(list(d.values())[0])):

        writer.writerow({key:d[key][i] for key in d.keys()}) 
```

我看到我的解决方案还有一个 for 循环，但另一方面，我认为它需要更少的内存（但是，我不确定！！）希望它对某人有所帮助；）

# python - 包括python中的ascii艺术

> ID：13660246
> 
> 赞同：2
> 
> 时间：2012-12-01T14:10:36.277
> 
> 标签：python, printing, ascii

我正在制作一个刽子手程序，我怎样才能在 python 中包含我的艺术而不在每一行上输入 print 是否有像他们有多行注释一样的多行打印？我不介意从文本文件中导入所有图片，无法从文档中弄清楚这一点，感谢您的帮助。

```
 def visual():
          if count = 1:
              ## shows the hanging ascii art 
```

`

```
 ***************                                                
          *             *                                                
          *             *                                                
          *             *                                                
          *             *                                                
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
          *                                                              
  *********************** 
```

一错

```
 ***************                                                
       *             *                                                
       *             *                                                
       *             *                                                
       *           ....                                               
       *           .  ..                                              
       *          ..   .                                              
       *          ..   .                                              
       *           .....                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       * 
```

* * *

两个错

```
 ***************                                                
       *             *                                                
       *             *                                                
       *             *                                                
       *           ....                                               
       *           .  ..                                              
       *          ..   .                                              
       *          ..   .                                              
       *           .....                                              
       *             .                                                
       *       .......                                                
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       * 
```

* * *

`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T14:12:47.867

使用`'''`或`"""` [三引号字符串文字](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)：

```
longstring = """\
You can use multiple lines
and newlines
are preserved
""" 
```

我`\`在开头的三引号之后使用了换行符，以避免必须将第一行放在开头的引号之后。因此，字符串从`You`（之前没有换行符）开始：

```
>>> longstring = """\
... You can use multiple lines
... and newlines
... are preserved
... """
>>> print longstring
You can use multiple lines
and newlines
are preserved 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:13:43.733

“like they can have multi-line comments”：没有多行注释，只有多行字符串，当然你也可以打印出来：

```
wrong_art[2] = """
       ***************                                                
       *             *                                                
       *             *                                                
       *             *                                                
       *           ....                                               
       *           .  ..                                              
       *          ..   .                                              
       *          ..   .                                              
       *           .....                                              
       *             .                                                
       *       .......                                                
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                                                              
       *                  
"""

print wrong_art[num_wrong] 
```

# css - DIV 被其他 DIV 推出窗口

> ID：13660249
> 
> 赞同：0
> 
> 时间：2012-12-01T14:10:49.990
> 
> 标签：css, html, height, css-position

我有这个相当不寻常的问题（在我询问其他人时理解之后），似乎我的 -tags 不了解其他元素使用了多少屏幕，因此将元素推出屏幕。
我认为这可能与使用位置有关：固定，但在删除位置部分时似乎并没有解决它。

这是似乎有问题的主要标记，我真的看不到任何错误。

```
<div id="search">
    <div id="searchfield">
        <span id="searchinput">
            <input type="text" id="s" name="s" />
        </span>
        <button>Search</button>
    </div>
    <div id="searchresults">
        <ul class="longlist">
        </ul>
    </div>
</div> 
```

这个问题在这个[jsFiddle](http://jsfiddle.net/KX9BV/3/)中最为明显，似乎*#searchresults*被#searchfield推出了*#se* *​​arch*。
因为我真的不知道问题出在哪里，所以任何使用谷歌的尝试都让我无法很好地回答我的问题到底出在哪里。

我已经尝试删除任何修改的 JS，我们可以看到 jsFiddle 根本没有运行任何 JS，我的标记/CSS 仍然不起作用。

*在这个小提琴中， #search*的高度设置为 400px，以更好地显示缺陷。但是当它是 100% 时会发生同样的错误（这是它在生产代码中应该具有的值）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:19:00.210

这是由溢出问题引起的。div“#searchfield”正在下推其他内容。

通过删除行“height: 400px;”将高度设置为“auto” 在“div#search”上并在“div#searchresults”上设置固定高度可以解决问题。

```
#search{
   height: 400px;
} 
```

将“div#searchfield”放在“div#search”之外也可以。

```
<div id="searchfield">...</div>
<div id="search">...</div> 
```

这些方法表明溢出问题是由混合相对高度和绝对高度引起的。您应该将一些与高度相关的样式从“div#search”移动到“div#searchresults”以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:19:39.850

它似乎在

```
 #search{
   height: 100%;
 } 
```

不？

关联：

[http://jsfiddle.net/KX9BV/8/](http://jsfiddle.net/KX9BV/8/)

# visual-studio - 如何在 Visual Studio 2005 中自动设置“初始断点”？

> ID：13660256
> 
> 赞同：2
> 
> 时间：2012-12-01T14:11:29.147
> 
> 标签：visual-studio, debugging, windbg, breakpoints

我希望 VS 在它的入口点被击中时立即中断（无论它是什么）。

在 WinDBG 中，我知道一个类似的概念，即[初始断点](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550949%28v=vs.85%29.aspx)。一般来说，我可以在 Visual Studio 中实现相同的效果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:16:31.747

[http://msdn.microsoft.com/en-us/library/t547b0f3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t547b0f3(v=vs.80).aspx)

1.  在解决方案资源管理器中，右键单击项目
2.  从快捷菜单中，选择 Debug 并单击 Step Into new instance。

如果您的解决方案包含多个项目，您可能需要将项目设置为“启动项目”或类似的东西。

# css - 屏幕分辨率/缩放自适应网站

> ID：13660259
> 
> 赞同：0
> 
> 时间：2012-12-01T14:12:09.037
> 
> 标签：css, html, zooming, resolution

我正在为某人制作一个网站，我希望它根据屏幕分辨率和浏览器的缩放来调整自己的大小（我不包括智能手机）。我目前有一个这样的菜单： ![在此处输入图像描述](../Images/27ac0d642f240f719723d2b8ffd6114a.png)

菜单中的每个元素都在一个 div 中，这是 css：

```
#barre_utilisateur //For the menu bar(the red bar)
{
    height:45px;
    background-color:#A31E39;
    width:100%;
}
#content_boutton_accueil //the home button
{
    margin-left:2%;
    width:200px;
    display:inline-block;
}
#notification //exclamation mark button
{
    cursor:pointer;
    width:60px;
    height:45px;
    display:inline-block;
} 
```

现在，我想要用户按钮左侧右侧的齿轮图标。我不明白我怎么能做到这一点。

另外，当我放大太多时，菜单的右侧部分会脱离它应该在的位置，有没有办法防止这种情况发生？

我想要实现的一个很好的例子是新的 Outlook 实时页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:28:53.957

您可以相对定位整个菜单 div (#barre_utilisateur)，然后绝对定位它的子项。例如：

```
#barre_utilisateur {
   position: relative;
} 

#cogwheel {
   position: absolute;
   right: 0;
} 
```

另一种方法是在菜单中放置 2 个 div (#barre_utilisateur)，然后将第一个浮动到左边，另一个浮动到右边。

# php - 登录正则表达式 (PHP)

> ID：13660264
> 
> 赞同：1
> 
> 时间：2012-12-01T14:12:41.083
> 
> 标签：php, regex, login

我需要一些关于正则表达式的帮助。我需要检查登录，登录可以有字母、数字和下划线。它必须至少有一个字母，并且中间可以有一个下划线。

现在我有了这个：
`^([a-z0-9_])+$/iu` 但它允许以任何顺序使用所有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:14:54.383

在这里试试这个：

```
^(?<=[a-z])(?<=[0-9])[a-z0-9]+(_[a-z0-9]+|)$/iu 
```

因此，至少一次必须有一个字母或数字开头。这可以是可选的，一个 _ 至少还有一个字母/数字，或者什么都没有。

这`(?<=[a-z])`是一个*积极的后视断言*，这意味着一个字母必须在里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:16:59.410

我猜你正在寻找这个

```
^(?=[a-zA-Z\d].*)(?=.*[a-zA-Z])(?=.*[a-zA-Z\d]$)(?=[^_]*(_)?[^_]*$)[a-zA-Z\d_]+$
  ---------------  ------------ ---------------- ---------------
        |              |                |              |->this checks that there is 0 to 1 occurance of _
        |              |                |->this checks if it ends with any of [a-zA-Z\d]
        |              |->this checks if there is atleast 1 alphabet
        |->this checks that it starts with [a-zA-Z\d] 
```

[在这里](http://regexpal.com/)测试

# namespaces - 在 xquery 中创建无命名空间元素

> ID：13660265
> 
> 赞同：0
> 
> 时间：2012-12-01T14:12:41.733
> 
> 标签：namespaces, xquery

我已经创建了一个元素，如此处提到的[XQuery: Create a new element with a given name?](https://stackoverflow.com/questions/2542235/xquery-create-a-new-element-with-a-given-name/13659973#13659973) .

创建元素的代码如下

```
declare function local:remove-tag-if-empty($elem as element(), $name as xs:string)
{
if(not($elem/node()))
then ()
else
(
element {$name} {$elem/text()}
)
}; 
```

现在我从生成的 XML 中得到的是这样的（我使用上面的函数来创建 DOB 标记）

```
<DOB xmlns = "">2012-10-14+03:00</DOB> 
```

我不想`want xmlns=""`成为生成的 xml 的一部分。谁能告诉我如何创建没有命名空间的元素？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:01:57.357

为什么要创建：

> <DOB>2012-10-14+03:00</DOB>

它的功能与以下相同：

> <DOB xmlns="">2012-10-14+03:00</DOB>

# serialization - Erlang 序列化

> ID：13660267
> 
> 赞同：2
> 
> 时间：2012-12-01T14:12:51.753
> 
> 标签：serialization, erlang

我需要在 Erlang 中序列化一个函数，将其发送到另一个笔记，反序列化并在那里执行它。我遇到的问题是文件。如果函数从不在第二个节点中的文件读取，我会收到错误消息。有没有办法区分 Erlang 中可序列化和不可序列化的结构？因此，如果一个函数使用文件或 pid，那么它无法序列化？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:19:37.537

## 首先，如果您要发送匿名函数，请务必小心。或者，更确切地说，只是不这样做

在某些情况下，这个函数甚至不会被执行，或者会以完全错误的方式执行。

Erlang 中的每个函数，即使是匿名函数，都属于某个模块，准确地说，是在它内部构建的那个模块中。如果这个函数已经内置在 REPL 中，它会绑定到 erl_eval 模块，这更加危险（我会进一步解释，为什么）。

比如说，你启动了两个节点，其中一个有一个名为“foo”的模块，一个没有加载这样的模块（并且无法加载它）。如果你在模块 'foo' 中构造一个 lambda，将它发送到第二个节点并尝试调用它，你将失败并返回 {error, undef}。

可能还有另一个有趣的问题。尝试制作两个版本的模块'foo'，在每个版本中实现一个'bar'函数并在其中实现一个lambda（但lambdas会有所不同）。尝试调用已发送的 lambda 时，您会遇到另一个错误。

我认为，将 lambdas 发送到不同的节点可能还有其他棘手的部分，但相信我，这已经很多了。

## 其次，有很多方法可以让您在 lambda 中获取进程或端口，而无需事先知道

即使有一种方法可以从 lambda 中捕获封闭变量（如果您查看二进制化的 lambda，其中使用的所有外部变量都从第 2 个字节开始列出），但它们并不是唯一的来源潜在的 pid 或端口。

考虑一个简单的例子：你`self()`在你的 lambda 中调用一个函数。它会返回什么？对，一个pid。好的，我们大概可以解析二进制文件并捕获这个函数调用，以及十几个其他内置函数。但是当你调用一些外部函数时你会怎么做呢？`ets:lookup(sometable, somekey)`? `some_module:some_function_that_returns_god_knows_what()`? 你不知道他们会返回什么。

## 现在，您可以在这里实际做些什么

1.  处理文件时，始终发送文件名，而不是描述符。如果您需要文件的位置或其他内容，请同时发送。文件描述符不应该在打开它们的进程之外为人所知。

2.  正如我所提到的，尽一切努力避免将 lambdas 发送到其他节点。很难说如何避免这种情况，因为我不知道你的确切任务。也许，您可以发送要执行的函数列表，例如：

    ```
    [{module1, parse_query},
     {module1, dispatch_parsed_query},
     {module2, validate_response},
     {module2, serialize_query}] 
    ```

    并通过此函数序列传递参数（确保所有模块都存在于任何地方）。也许，您实际上可以坚持使用一些将经常更改并部署在整个集群上的模块。也许，您可能想要切换到 JS/Lua 并使用外部启动的端口（Riak 正在使用 spidermonkey 来处理 JS 编写的 lambdas 以用于 Map/Reduce 请求）。最后，您实际上可以获取模块的目标代码，将其发送到另一个节点并在那里加载。请记住，它也不安全。您可以中断一些正在运行的进程，丢失一些构造的 lambda，等等。

# html - 基于 zen-grids 布局的浮动列表项

> ID：13660280
> 
> 赞同：0
> 
> 时间：2012-12-01T14:14:45.340
> 
> 标签：html, css-float, sass, compass-sass, grid-layout

我正在尝试重新设计网站的[zen-grids 。](http://zengrids.com/)我喜欢它生成基于网格的响应式设计的一般能力，而无需将所有内容放入额外`<div>`的 s 并将与布局相关的类名添加到标签中。无论如何，我使用[SASS](http://sass-lang.com/) / [Compass](http://compass-style.org/)，所以 zen-grids 是一个明显的选择。但是我很难弄清楚如何最好地实现以下“浮动列表项”效果（例如，对于网上商店中的典型产品网格）：

```
<html>
  <head>
    <style>
    ul {
      width:100%;
      list-style-type:none;
      margin:0;
      padding:0;
    }
    li {
      width:25%;
      height:10em;
      background-color: silver;
      float:left;
    }
    </style>
  </head>
  <body>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
    </ul>
  </body>
</html> 
```

假设我有一个 12 列布局 ( `$zen-column-count: 12;`)，我如何使用 zen-grids 将四个列表项分别覆盖三个网格列并排成一行？我看到自己的唯一可能性是使用四个不同的 CSS`:nth-child`伪类和`@include zen-grid-item(3, [start column here]);`. 这排除了所有低于 9 的 Internet Explorer 版本，[缺少](http://css-tricks.com/how-nth-child-works/)该伪类的实现。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T20:12:43.317

对于那些不想切换的人，我可以使用以下 mixin 来完成此操作：

@include zen-nested-container(); （对于包含购物车项目的父容器）

@include zen-grid-flow-item(1, 4, true, true); （用于购物车 div）

@include zen-float(左); （浮动左边的项目以使它们保持在同一行）

示例 SCSS：

```
#block-views-course-dashboard-block-2 {
    @include zen-grid-item(3, 3);
    @include zen-nested-container();
    .views-row {
      @include zen-grid-flow-item(1, 4, true, true);
      @include zen-float(left);
      height: 10em;
    }
} 
```

我将 Drupal 7 Zen Theme 与 Zen Grids 一起使用。有关zen-grid-item 和 zen-grid-flow-item 的参数的更多信息，请参阅[http://zengrids.com/help/#mixins 。](http://zengrids.com/help/#mixins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:57:34.630

我没有使用过 zen-grid，但是网格框架通常有一个没有边距的*最后一个*类。这样，您可以将该类应用于结构中的每四个元素。

如果你使用一些 CSS 框架，它可能会更容易。例如，这就是我使用 Compass + Blueprint 网格所做的事情：

```
ul:nth-child(4n) { @include last; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:55:29.020

# 莎莎魔术

我通过更改工具解决了这个问题：[Tsachi Shlidor](https://github.com/tsi)的[Salsa](http://tsi.github.com/Salsa/)是 Sass 的替代网格布局系统，它使以下解决方案成为`:nth-child()`不可能。我也增加了一点`respond-to`响应能力。

**style.scss**（用指南针编译）

```
@import "salsa/salsa";
$base-font-size: 100%;
$base-line-height: 1.5em;
$container-width: 100%;
$gutter-width: $base-line-height;

@import "respond-to";
$breakpoints: "wide screen" (50em),
              "narrow screen" (0em 50em);

body {
    @include container;
}
ul {
    list-style-type: none;
    padding-left: 0;
    li {
        height: 10em;
        background-color: silver;
    }
}
/* layout for narrow screens: 2 items per row */
$columns: 8;
@include respond-to('narrow screen') {
    ul {
        li {
            @include grid(4);
        }
    }
}
/* layout for wide screens: 4 items per row */
$columns: 16;
@include respond-to('wide screen') {
    ul {
        li {
            @include grid(4);
        }
    }
} 
```

**索引.html**

```
<html>
  <head>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T08:33:26.990

结合使用[html5shiv](https://code.google.com/p/html5shiv/)、[Selectivizr](http://selectivizr.com/)和[Respond.js](https://github.com/scottjehl/Respond) polyfill，在 IE 7 和 8 中启用 CSS3 选择器和媒体查询支持。

请注意，polyfill 的版本和顺序很重要。按照这个答案：[https ://stackoverflow.com/a/16732064/901944](https://stackoverflow.com/a/16732064/901944)

# c++ - 在 Bison 中为 && 和 || 启动短路规则 操作

> ID：13660291
> 
> 赞同：4
> 
> 时间：2012-12-01T14:16:11.187
> 
> 标签：c++, parsing, bison, lex, flex-lexer

我正在使用 C/C++ 在 Bison & Flex 中编写一个简单的计算器（逻辑在 Bison 中完成，C/C++ 部分负责数据结构，例如 STL 等）。

我有以下问题：

在我的计算器中，美元符号`$`表示 i++ 和 ++i（前缀和后缀），例如：

```
int y = 3;
-> $y = 4
-> y$ = 4 
```

当用户点击：`int_expression1 && int_expression2`，如果`int_expression1`被评估为`0`（即假），那么我不想野牛评估`int_expression2`！

例如 ：

```
int a = 0 ; 
int x = 2 ; 
```

用户点击：`int z = a&&x$`...

因此，变量`a`被评估为`0`，因此，我不想评估`x`，但它仍然增长 1 ...这是野牛/c++ 的代码：

```
%union
{
    int int_value;
    double double_value;
    char* string_value;
}

%type <int_value> int_expr
%type <double_value> double_expr
%type <double_value> cmp_expr

int_expr:

    | int_expr '&&' int_expr    { /* And operation between two integers */
                      if ($1 == 0) 
                        $$ = 0;
                      else  // calc
                        $$ = $1 && $3;          
                    } 
```

如果第一个表达式已经被评估为假（即），我怎么能告诉野牛不要评估第二个表达式`0`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:15:08.663

将广泛的评论转换为答案：

> 如果第一个表达式已经被评估为假，我如何告诉 Bison 不要评估第二个表达式？

*进行评估的是您的代码，而不是 Bison；把“责备”放在它所属的地方。*

`&&`您需要在评估 RHS 之前检测到您正在处理规则。`&&`如果第一个评估为 0，您可能需要在第二个之后和之前插入一些代码，`int_expr`如果第一个`int_expr`评估为 0，则暂停评估。您还需要修改所有其他评估代码以检查并遵守“不评估”标志.

或者，您让 Bison 进行解析并创建一个程序，在解析完成时执行该程序，而不是在解析时进行评估。这是一组更大的变化。

> 您确定要在第二个 int_expr 之前放置一些代码吗？我似乎找不到可行的方法来做到这一点。这是一个不错的技巧，但我无法找到一种方法来实际告诉 Bison 不要评估 second `int_expr`，而不会破坏整个评估。

您必须编写代码，以便它在不应该评估时不评估。Bison 语法是：

```
| int_expr '&&' {...code 1...} int_expr {...code 2...} 
```

“代码 1”将检查`$1`并安排停止评估（设置全局变量或类似的东西）。“代码 2”将有条件地评估`$4`（4，因为“代码 1”现在是 3 美元）。所有评估代码都必须遵守“代码 1”的规定——如果“代码 1”说“不评估”，它就不能评估。或者你可以按照我的建议和[aselle 的](https://stackoverflow.com/users/1067799/aselle) [建议](https://stackoverflow.com/a/13661138/15168)去做；分别解析和评估。

我赞同 aselle 关于[The UNIX Programming Environment](https://rads.stackoverflow.com/amzn/click/013937681X)的建议。里面有一整章是关于开发一个计算器（他们称之为`hoc`高阶计算器），值得一读。但是请注意，这本书是在 1984 年出版的，并且比 C 标准早了很多。C 代码中没有原型，并且（按照现代标准）它需要一些自由。我确实有`hoc6`（`hoc`他们描述的最后一个版本；还有版本 1-3）在现代 C 中——如果你想要的话，请联系我（见我的个人资料）。

> 这就是问题所在：我不能在规则中间停止评估，因为我不能使用`return`（我可以，但没有用；它会导致程序退出）。`| intExpr '&&' { if ($1 == 0) {/* turn off a flag */ } } intExpr { /* code */}`退出后`$3`，`$4`正在自动评估。

您可以在规则中间停止评估，但您必须对表达式评估代码块进行编码以考虑到这种可能性。当我说“停止评估”时，我的意思是“停止计算”，而不是“停止解析器”。解析必须继续；您计算值的代码必须仅在需要评估时进行评估，而不是在不需要评估时进行评估。这可能是一个（呃！）全局标志，或者您可能有其他一些机制。

最好将解析器转换为代码生成器并在解析后执行代码。这种复杂性就是为什么这是一个好的策略。

> @JonathanLeffler：你确实是国王！这应该是一个答案！

现在是一个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:07:37.210

您几乎肯定希望在计算器中进行评估之前生成一些其他表示。解析树或 ast 是经典方法，但简单的堆栈机也很流行。有很多很好的例子说明如何做到这一点，但我最喜欢的是 [http://www.amazon.com/Unix-Programming-Environment-Prentice-Hall-Software/dp/013937681X](https://rads.stackoverflow.com/amzn/click/com/013937681X) 它展示了如何使用简单的直接评估工具就像您在 yacc（旧野牛）中制作的一样，并将其一路带到几乎与 BASIC 一样强大的编程语言。全部在很少的页面中。这是一本非常古老的书，但非常值得一读。

您还可以查看 SeExpr [http://www.disneyanimation.com/technology/seexpr.html](http://www.disneyanimation.com/technology/seexpr.html) ，这是一个用于标量和 3 个向量的简单表达式语言计算器。如果您查看第 313 行的[https://github.com/wdas/SeExpr/blob/master/src/SeExpr/SeExprNode.cpp](https://github.com/wdas/SeExpr/blob/master/src/SeExpr/SeExprNode.cpp) ，您将看到 eval() 函数的 && 实现：

```
void
SeExprAndNode::eval(SeVec3d& result) const
{
    // operands and result must be scalar
    SeVec3d a, b;
    child(0)->eval(a);
    if (!a[0]) {
    result[0] = 0;
    } else { 
    child(1)->eval(b);
    result[0] = (b[0] != 0.0); 
    }
} 
```

该文件包含表示解析树中操作的所有对象。这些对象是在解析代码时生成的（这些是 yacc 中的操作）。希望这可以帮助。

# git - 当我使用 git 将单个文件检出到不同位置时，如何保留行尾？

> ID：13660292
> 
> 赞同：5
> 
> 时间：2012-12-01T14:16:24.123
> 
> 标签：git, git-checkout, core.autocrlf, git-show

我想将 git 存储库中的单个文件检出到不同的位置（工作目录除外），并保持当前工作目录不变。我希望 git 以正确的行结尾签出我的文件。

我在 Windows 上工作，但我在 Linux 上也有同样的问题。

这是我的场景（Win7 64 位）：

首先，我确保 git 在提交时将 CRLF 转换为 LF，在结帐时将 LF 转换为 CRLF：

```
git config --local core.autocrlf true 
```

然后我创建一个名为 crlf.txt 并带有 CRLF 行结尾的文件并提交它：

```
git add crlf.txt
git commit -m "File with crlf" 
```

我在 crlf.txt 中更改了一些内容并提交：

```
git add crlf.txt
git commit -m "Change in crlf.txt" 
```

现在我想像第一次提交一样获得 crlf.txt：

```
git show HEAD~1:crlf.txt > "/home/user/crlf_like_in_head-1.txt" 
```

文件“crlf_like_in_head-1.txt”不包含 CRLF，但包含 LF。我认为 git show 是正确的，因为它显示的文件内容就像它在存储库中一样（core.autocrlf=true 将 CRLF 转换为 LF）。我从文档中知道这一点，我对 core.autocrlf=false 进行了同样的尝试。core.autocrlf=false "crlf_like_in_head-1.txt" 包含 CRLF。我知道我可以轻松地将 LF 转换为 CRLF，但我必须确保结果文件与使用 git 签出的文件相同。

我知道我也可以使用 git checkout 签出单个文件：

```
git checkout HEAD~1 crlf.txt 
```

但它会覆盖工作目录中 crlf.txt 的当前内容（如果 crlf.txt 处于脏状态），我无法使用 git checkout 将其签出到不同的文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:54:25.830

你说得对 -`git show`只是向你展示了 repo 中的内容 - 没有结帐魔术。

您可以通过临时更改结帐工作目录的位置来实现您想要的

```
git --work-tree=/home/user checkout HEAD~1 crlf.txt 
```

这会将文件签出到`/home/user/crlf.txt`. *注意：*如果您签出子目录中的文件，该目录也将在目标文件夹中创建。您无法阻止，也无法指定目标文件的文件名。如果这是一个问题，您应该编写一个 2 行 shell 脚本，将检出到临时目录，然后移动检出的文件。

# php - 如何包含相对于当前文件而不是父文件的文件？

> ID：13660298
> 
> 赞同：0
> 
> 时间：2012-12-01T14:17:04.373
> 
> 标签：php, variables

我知道这个主题已经在 SO 中讨论过，但我无法找到解决方案。

我有assign.php：

```
$a=1; 
```

要求.php：

```
require "assign.php"; 
```

和 echo.php：

```
require "require.php"
echo $a; 
```

输出 1\. 问题是，当我想从不同位置使用“require.php”时，没有重复文件。例如，

/文件夹/echo.php：

```
require "../require.php";
echo $a; 
```

不起作用，因为 require.php 试图要求不存在的 /folder/assign.php 。

尝试在 require.php 中使用完整的 url：

```
require "http://site.com/assign.php"; 
```

也不会工作，因为代码没有被包含，而是被编译，并且由于 $a 不是全局的，它是 undefiend 的。

有人告诉我，真的不推荐使用全局变量。

据说使用文件系统完整路径也是危险的。

解决办法是什么？无论 require.php 来自何处，我如何确保 require.php 始终为 assign.php 找到正确的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T14:36:57.450

在`require.php`你应该使用

```
require dirname(__FILE__). "/assign.php"; 
```

这将通过提供动态生成的完整路径来包含正确的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:22:19.817

您可以定义一个全局常量并使用它。

```
define('ROOT_PATH', rtrim(dirname(__FILE__), "\\/"));

require ROOT_PATH . '/file.php'; 
```

# c# - 在 Windows 8 的 Visual Studio Express 2012 中用 C# 实现枚举

> ID：13660299
> 
> 赞同：0
> 
> 时间：2012-12-01T14:17:24.293
> 
> 标签：c#, windows-8, visual-studio-2012

我正在尝试使用 C#/XAML 在 Visual Studio Express 2012 中为 Windows 8 开发一个 Windows 8 应用程序，但这样做时我遇到了一些问题。

我来自 Java 背景，对 C# 知之甚少。我正在尝试将 Java Enum 转换为 C#。

我偶然发现了[Jon Skeet 的文章](http://msmvps.com/blogs/jon_skeet/archive/2006/01/05/classenum.aspx)，它符合我的确切要求。但是从这个问题的评论和答案中，我意识到这是一个提议的想法。我的错！:)

然而，我在上述文章之后找到的最接近的翻译是这个： [https ://stackoverflow.com/a/4778347/1127443](https://stackoverflow.com/a/4778347/1127443)

但是即使有了上面的实现，VS在Attribute中也找不到getCustomAttribute()方法。

如何在可以定义公共字段和抽象函数的 C# 中实现 Java 枚举的想法？基本上，我想带回枚举的概念，即作为具有特定实现的特定类的一组允许实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:33:39.527

为了尽可能接近您的代码，我将采取以下措施：

不要使用枚举，而是创建一个带有一些常量字段的静态类：

```
 public static class ArithmeticOperation
    {
        public static const Func<int, int, int> Addition = (x, y) => x+y;
        public static const Func<int, int, int> Subtraction = (x, y) => x - y;
        public static const Func<int, int, int> Multiplication = (x, y) => x * y;
        public static const Func<int, int, int> Division = (x, y) => x / y;
    } 
```

您可以像使用任何其他方法一样使用它：

```
 static void Main(string[] args)
    {
        var result = ArithmeticOperation.Addition(1, 2);
    } 
```

或者像枚举一样在参数中使用它：

```
 private int DoCalculation(Func<int, int, int> operation)
    {
           return operation(1, 2);
    }

    ...

     DoCalculation(ArithmeticOperations.Addition); 
```

您可以将任何`Func<int, int, int>`作为参数传递，而不仅仅是 ArithmeticOperation 的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:22:38.780

这篇文章没有描述现有的 C# 特性，而是提出了一个建议，说明将来实现什么是好的。不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:44:05.567

您应该阅读文章不仅要复制源代码

从您发布的文章中：

> 这篇文章是 C# 4.0 的功能建议。（我怀疑这种东西的盖子在 3.0 上已经关闭了。）

所描述的功能是试图让 C# 像 Java 一样增强枚举。但是现在这样的事情即使在 C# 4.0 中也不会发生。

编辑：

您希望使用 enum 获得什么类型的好处？在 Java 中，这样的实现是极其罕见的。

您应该了解枚举的概念，通常枚举用于具有人类可读的编译时间常数。我们没有使用数字 0、1、2、3，而是在代码别名中使用这些数字零、一、二、三。通常枚举用于存储一些最终结构，如日期、月份等名称。

我认为这就是 C# 不支持像 java 这样的枚举的原因。

# python - 新的 Django 中间件没有被调用

> ID：13660301
> 
> 赞同：2
> 
> 时间：2012-12-01T14:17:39.697
> 
> 标签：python, django, amazon-ec2, memcached, django-middleware

我对网络开发很陌生。我正在开发托管在亚马逊 ec2 服务器上的网站。该站点使用 django 框架在 python 中。我正在使用 memcached 来缓存一些客户端信息。我的站点和缓存可以在本地机器上运行，但不能在 EC2 服务器上运行。我检查了 memcached 服务器，发现它无法设置密钥。我可能需要在 settings.py 中更改某些内容，以便在服务器上正确设置密钥或我可能缺少的其他内容。

编辑：发现问题。我添加了一个新的中间件，用于在内存缓存中设置键。那没有被调用。它在本地机器上完美运行。在服务器上，我使用 gunicorn 作为应用服务器，使用 nginx 作为反向代理。这些中的任何一个都可能导致问题。我也尝试重新加载 nginx，但这也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:53:07.320

It was a silly glitch. I found out that i needed to reload gunicorn server to make the new middleware work. Thanks everybody for the help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:03:29.093

首先，您需要在设置中设置缓存`CACHES`，考虑到访问缓存服务器所需的所有凭据：[https ://docs.djangoproject.com/en/dev/topics/cache/#memcached](https://docs.djangoproject.com/en/dev/topics/cache/#memcached)

还要确保可以从您尝试使用的实例访问缓存服务器。

当谈到使用新的中间件（一个稍微不同的问题）时，然后：

*   确保它在设置中正确定义（不会被其他设置覆盖，例如常用`local_settings.py`文件，这应该根据您使用的环境而有所不同），
*   确保正确定义中间件类（定义例如`process_request()`，如果您想为传入的请求做某事），
*   如果您正在使用例如。使用 Apache 的 mod_wsgi，请记住重新加载服务（在本例中为 Apache），例如。调用`sudo service apache2 reload`（如上述情况），

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:29:59.470

是否将其添加到您的 settings.py 中？

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.cache.UpdateCacheMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.cache.FetchFromCacheMiddleware',
) 
```

从[文档](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#the-per-site-cache)。

只有当您说“添加了新的中间件”时，我不太清楚您的意思是什么步骤。

# php - 如何从结果查询中选择并在另一个页面上显示记录？

> ID：13660304
> 
> 赞同：0
> 
> 时间：2012-12-01T14:18:12.407
> 
> 标签：php, mysql

我有一个页面，它将查询中的记录显示到每条记录的 div 中，即：

```
on page showresult.php:
-----------div 1-----------
ID | Hotel 1 | address | infos 
-----------div 2----------
ID | Hotel 2 | address | infos 
```

好吧，现在我想做的是选择其中一个点击它并将有关所选酒店（即酒店 2）的更多信息显示到另一个页面中，例如：

```
on page showmoresults.php
----------div selected hotel 2-----------
ID | Hotel 2 | address | infos | details | address | city | etc.. 
```

如何做到这一点？

提前致谢！

PS：我目前使用会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:32:07.943

很简单，我们举个例子。我们有一个链接文本“Hotel 2”我们使链接看起来像这个带有 href="/hotel/2"> 的“a”标签，文本是 Hotel2 并在您的控制器中处理它并使用 id 2 进行处理。就像 MySql 查询. @hotel = 从 id = 2 的酒店中选择 *。以及@hotel 中的所有信息

# php - 空白输入字段在 $_POST 中给出了以前的默认值

> ID：13660306
> 
> 赞同：2
> 
> 时间：2012-12-01T14:18:33.577
> 
> 标签：php

我是新来的，所以希望我尊重协议；-)

这是一个简单的问题，由于某种原因我无法解决。

我有一个带有调用 php 文件的 post 操作的表单，以及几个设置了默认值的文本输入字段。例子：

```
<form class="form-horizontal" method="post" action="profile.php">
<input type="text" class="input-xlarge" id="q-2-Address" name="q-2-Address" value="Park Avenue">
<button type="submit" class="btn btn-primary">Save changes</button>
</form> 
```

如果我提交保持默认值不变的表单，则按`$_POST['q-2-Address']`预期包含默认的“公园大道”。

如果我尝试更改输入文本字段中的值（例如：更改为“麦迪逊大道”），我可以看到`$_POST['q-2-Address']`设置为“麦迪逊大道”的结果，正如预期的那样。

但是，如果我尝试通过删除所有文本来清除该值，则`$_POST['q-2-Address']`它不是空白的，实际上会返回包含最初设置的默认值“公园大道”。

所以如果我想通过用空白替换之前填写的字段来更新表单，这似乎是不可能的，也无法检测到该字段已被清除。我尝试使用 empty() 进行测试，但它当然给出了错误的结果，`$_POST`包含默认值，因此即使文本字段为空也不为空。

如果没有进入像单个空间这样的东西，我看不到实际清除字段的方法。

这是一件微不足道的事情，但也许有人对此了解更多。

TIA

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:26:15.890

您可以使用占位符，而不是在表单中使用默认值...

```
<form class="form-horizontal" method="post" action="profile.php">
<input type="text" class="input-xlarge" id="q-2-Address" name="q-2-Address" placeholder="e.g. Park Avenue">
<button type="submit" class="btn btn-primary">Save changes</button>
</form> 
```

这样，您可以在该特定输入框中给出您希望在该特定输入框中具有的内容的示例，而无需使用将被 php 代码拾取的默认文本。

这是占位符的外观的 jsfiddle。

[http://jsfiddle.net/bfwst/](http://jsfiddle.net/bfwst/)

# c - gdb：在运行时添加可执行文件

> ID：13660310
> 
> 赞同：0
> 
> 时间：2012-12-01T14:19:01.927
> 
> 标签：c, debugging, gdb

我已经开始使用可执行文件说 out1 运行 gdb 即`gdb out1`。现在我意识到我错过了在代码中添加一些检查，并且在添加代码后我生成了新的 exec 文件说 out2。现在可以将其添加`out2`到已经运行的`gdb out1`程序中，以便我可以使用新添加的检查执行代码进行调试。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:30:38.873

您想在不退出 gdb 的情况下加载 out2。我对么？
我认为您可以在 gdb 中运行“file out2”，然后 gdb 将杀死 out1 并加载 out2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:33:37.937

只需保留名称`out1`，终止当前运行的进程 ( `(gdb) k`) 并重新启动它 ( `(gdb) r`)。GDB 将重新加载新的数据/代码/调试信息。

# c++ - 是否可以在 C++ 中有一个静态字段？

> ID：13660313
> 
> 赞同：0
> 
> 时间：2012-12-01T14:19:19.167
> 
> 标签：c++, static

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)
> [未解析的外部符号 C++](https://stackoverflow.com/questions/13660017/unresolved-external-symbol-c)

我知道你可以有静态局部变量和静态全局变量，但是可以有静态字段吗？我问是因为当我声明一个静态字段（在类中声明的静态变量）时，我收到“未解析的外部”编译器错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:20:38.903

对的，这是可能的。您要做的是*定义*静态成员。通常这是在相应的`.cpp`文件中完成的：

```
//=== C.h

class C {
  static int i; // declaration
}

//=== C.cpp

#include <C.h>

int C::i = 0;   // definition 
```

# ruby-on-rails - 为什么 User.last(2) 和 User.first(2) 返回相同的用户？

> ID：13660315
> 
> 赞同：2
> 
> 时间：2012-12-01T14:20:05.327
> 
> 标签：ruby-on-rails, activerecord

我有一个用户模型，其中

```
default_scope :order => 'created at desc' 
```

我目前有 50 条记录，ID 为 1 到 50。

`User.first`返回`User id: 50`。

`User.first(2)`返回`User id: 50`和`User id: 49`

`User.last`返回`User id: 1`

这一切都说得通。然而，

`User.last(2)`返回`User id: 49`和`User id: 50`，按此顺序。这是为什么？我该如何返回`User id: 1`和`User id: 2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:05:59.410

这是一个常见的错误。`User.last(1)`并且`User.last()`不完全相同。`User.last(1)`会给你一个单条记录的数组，同时`User.last()`返回那个记录对象。

`default_scope`同样，如果您的 User 模型中有一个，这两种方法的行为将完全不同。

**`User.last`仅适用于您的默认范围，颠倒其顺序**。所以它触发的 SQL 查询是：

```
SELECT * FROM users ORDER BY created_at ASC LIMIT 1 
```

另一方面，`User.last(1)`类似于写作`User.order('id desc').limit(1)`。并且随着您`default_scope`的行动，`order by id desc`它将排在默认值之后。所以它触发的 SQL 将是：

```
SELECT * FROM users ORDER BY created_at desc, id desc LIMIT 1 
```

因此，您在这里真正需要做的是使用 Kien 提到的删除`User.unscoped`默认[范围](https://stackoverflow.com/a/13665814/1117398)。就个人而言，我避免使用默认范围排序，而是使用显式范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:48:06.653

[Rubydocs](http://rubydoc.info/docs/rails/3.0.0/ActiveRecord/FinderMethods)为您提供有关 first 和 last 方法的信息。

如果你 last(2) 不工作，你可以试试

```
User.find(:order => 'created_at asc', :limit =>2) 
```

更正

```
User.find(:all,:order => 'created_at asc', :limit =>2)  
User.unscoped.order('created_at asc').limit(2) 
```

你可以传递很多参数来得到你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T02:20:53.913

尝试`unscoped`方法：

```
User.unscoped.first(2) # Get User id=1 and id=2 
```

您可以检查[Remove all scoping](http://guides.rubyonrails.org/active_record_querying.html#removing-all-scoping)。

# clojure - 如何在 Ring 处理程序中打印到 REPL 窗口？

> ID：13660318
> 
> 赞同：8
> 
> 时间：2012-12-01T14:20:14.877
> 
> 标签：clojure, ring, ccw

```
(defn app [request]
  (println "test")
  {:body "Hello World"})

(defonce server (run-jetty #'app {:port 8080 :join? false})) 
```

`println`似乎在处理程序中不起作用。如何写入 REPL 窗口？

我正在逆时针使用日食。

编辑：这看起来像[nrepl 问题](https://github.com/kingtim/nrepl.el/issues/83)。`(future (println "foo"))`很好，但没有输出`(.start (Thread. #(println "foo")))`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T07:16:05.970

`println`不直接写入输出，而是缓冲输出并稍后刷新。你可以试试`(.println System/out "test")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T01:18:31.453

`*nrepl-server ...*`您可以在项目的缓冲区中找到输出。在 CIDER 中，这个缓冲区是隐藏的。你可以找到它`C-x C-b`。

# wpf - WPF 应用程序的安装程序解决方案（具有更新/试用支持）

> ID：13660320
> 
> 赞同：3
> 
> 时间：2012-12-01T14:20:41.157
> 
> 标签：wpf, installation

我有几个 WPF 应用程序。而且我认为应用程序的数量会随着时间的推移而增长。我想创建一个具有以下功能的安装程序：

*   检查 .Net 版本并要求用户安装它
*   支持为具有激活支持的应用程序创建基于时间的安全试用版。
*   模板支持：所以我可以创建一个通用安装程序并为每个工具修改它。
*   更新支持：检查应用程序的新版本。
*   易于部署：我有可能不会自己上传它们。

如果有一个工具可以帮助我解决这些问题，我会很高兴使用它。商业工具也不错。如果没有，请建议一个简化的流程以达到最佳效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:09:39.030

[高级安装程序](http://www.advancedinstaller.com)，[企业版](http://www.advancedinstaller.com/purchase.html)，价格合理，也具有所有这些功能。要学习我推荐[本教程](http://www.advancedinstaller.com/user-guide/tutorial-professional.html)的工具，之后您可以继续学习[更新程序](http://www.advancedinstaller.com/user-guide/tutorial-updater.html)和[许可库（试用支持）](http://www.advancedinstaller.com/user-guide/tutorial-licensing.html)的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:35:39.897

InstallShield 可以满足您的需求，但它并不便宜。他们有非常好的向导、脚本编辑器、SQL 打包、版本控制等。

[Flexera 软件](http://www.flexerasoftware.com/products/installshield.htm)

Visual Studio 2010 / 2012 包含轻量版，但它实际上只能打包一个应用程序进行安装。所有其他高级功能均保留给付费版本。

# oracle - 从表中存储多个值

> ID：13660321
> 
> 赞同：0
> 
> 时间：2012-12-01T14:20:46.693
> 
> 标签：oracle, stored-procedures, plsql

我想用

```
select * into <variable> from <table_name> 
```

在存储过程（pl/sql）中。

`<variable>`保留从“table_name”返回的多个列的类型应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:36:07.280

它应该是：

```
table_name%RowType 
```

# javascript - Ajax 无法在 IE 中加载

> ID：13660327
> 
> 赞同：3
> 
> 时间：2012-12-01T14:21:41.900
> 
> 标签：javascript, ajax, internet-explorer, jquery

这是脚本。它在所有其他浏览器中都可以正常工作，所以我认为这是一个缓存问题，但不是真的。我已经敲了几个小时的头，但没有任何效果。

```
$.ajaxSetup({
    cache: false
});

$("#send").live('click', function () {
    console.log("AAAAA");
    $("#loader").show();
    $form = $('#reservationForm');

    $inputs = $form.find('input[name^="entry"]'),
    serializedData = $('#reservationForm :input[name^="entry"]').serialize();

    console.log(serializedData);
    serializedData += "&pageNumber=0&backupCache=1&submit=Submit";

    // fire off the request to /form.php
    $.ajax({
        url: "https://docs.google.com/spreadsheet/formResponse?formkey=d",
        // url: "https://docs.google.com/spreadsheet/formResponse?formkey=d;ifq",
        type: "post",
        data: serializedData,
        // callback handler that will be called on success
        success: function (response, textStatus, jqXHR) {
            // log a message to the console
            console.log("Hooray, it worked!");
            $("#loader").hide();
            document.getElementById('error<?php echo"$uname";?>').innerHTML = error;
            $("#success").fadeIn();
            setTimeout(function () {
                $("#success").fadeOut();
            }, 5000);
        },
        // callback handler that will be called on error
        error: function (jqXHR, textStatus, errorThrown) {
            // log the error to the console
            console.log("The following error occured: " + textStatus, errorThrown);
            alert('Due to an unknown error, your form was not submitted, please resubmit it or try later.');
        },
        // callback handler that will be called on completion
        // which means, either on success or error
        complete: function () {
            // enable the inputs
            $inputs.removeAttr("disabled");
        }
    });

    // prevent default posting of form
    event.preventDefault();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:41:35.523

在 IE 中打开开发者工具（F12 打开）后，console.log 可用。尝试打开它或在您的代码中使用警报。或使用 try catch；

```
try{
    console.log('worked')
}
catch(err){
} 
```

您可能想检查您的事件变量是否未定义：

```
event= event || window.event;
event.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:03:24.850

在脚本的开头，您没有在处理程序中添加“事件”声明：

```
$("#send").live('click', function () { 
```

应该：

```
$("#send").live('click', function (e) { 
```

在脚本的末尾有一个变量事件的引用：

```
 // prevent default posting of form
event.preventDefault(); 
```

我认为IE在全局事件对象（您正在引用）中没有'preventDefualt'函数：这个函数被添加到jQuery传递的“e”事件对象中。无论如何，它在所有其他具有“未定义事件”的浏览器中也应该失败。也试试这个：

```
 // prevent default posting of form
e.preventDefault(); 
```

附加说明：jQuery 团队目前不鼓励使用“live”事件绑定函数，而是应该使用“on”函数的等效形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:04:03.387

IE 不理解 ajax 中响应的内容类型。因此，将您的 dataType 值放入请求中，它应该可以工作。例如 -

```
dataType: ($.browser.msie) ? "text" : "xml" 
```

# java - 在相对布局中居中 GridView

> ID：13660329
> 
> 赞同：3
> 
> 时间：2012-12-01T14:21:47.753
> 
> 标签：java, android, gridview

我有简单的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<GridView
    android:id="@+id/photo_browser_grid_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:gravity="center"
    android:horizontalSpacing="5dp"
    android:verticalSpacing="5dp"
    android:stretchMode="none"
    android:numColumns="auto_fit" 
    android:columnWidth="100dp">
</GridView> 
```

我想将我的 GridView 居中在相对布局中。我的间距总是固定的。结果我让 GridView 左对齐。我怎样才能将它集中在父母内部？

![网格视图](../Images/db34495e4b2f5faad2f3bd9c89dfe2fa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T14:39:47.523

对于布局中的 GridView，`android:numColumns="auto_fit"`与`android:layout_width="wrap_content"`. 这意味着：要计算要形成多少列，需要宽度，但是要找到宽度，我们需要环绕多少列，这是一个循环依赖。

您可以使用[`android:stretchMode`](http://developer.android.com/reference/android/widget/GridView.html#attr_android%3astretchMode)让列填充空白空间。

# ruby-on-rails - 如何将 curl 中的 POST 请求翻译成 ruby ？

> ID：13660330
> 
> 赞同：4
> 
> 时间：2012-12-01T14:21:51.983
> 
> 标签：ruby-on-rails, ruby, http, post, curl

我有这个`post` [要求](https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Web-service)：

```
curl -i -X POST \
   -H "Accept:application/json" \
   -H "content-type:application/x-www-form-urlencoded" \
   -d "disambiguator=Document&confidence=-1&support=-1&text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package" \
   http://spotlight.dbpedia.org/dev/rest/annotate/ 
```

我怎样才能用红宝石写它？我按照凯尔的建议尝试了这个：

```
require 'rubygems'
require 'net/http'
require 'uri'

uri = URI.parse('http://spotlight.dbpedia.org/rest/annotate')

http = Net::HTTP.new(uri.host, uri.port)

request = Net::HTTP::Post.new(uri.request_uri)
request.set_form_data({
                      "disambiguator" => "Document",
                      "confidence"    => "0.3",
                      "support"       => "0",
                      "text"          => "President Obama called Wednesday on Congress to extend a tax break for students included in last year's economic stimulus package"
                      })

request.add_field("Accept", "application/json")
request.add_field("Content-Type", "application/x-www-form-urlencoded")

response = http.request(request)
puts response.inspect 
```

但收到此错误：

```
#<Net::HTTPInternalServerError 500 Internal Error readbody=true> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:27:56.013

你已经修改了你的问题以包括我最初的回复。在我最初的回答中，添加“Content-Type”标头会导致它被复制，删除该标头的添加，您的示例应该可以工作：

[本备忘单](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)描述了如何为 HTTP 帖子提供参数：

```
require 'rubygems'
require 'net/http'
require 'uri'

uri = URI.parse('http://spotlight.dbpedia.org/rest/annotate/')

http = Net::HTTP.new(uri.host, uri.port)

request = Net::HTTP::Post.new(uri.request_uri)
request.set_form_data({
  "disambiguator" => "Document",
  "confidence"    => "0.25",
  "support"       => "0",
  "text"          => "President Obama called Wednesday on Congress to extend a tax break for students included in last year's economic stimulus package"
})

request.add_field("Accept", "application/json")

response = http.request(request)
puts response.inspect 
```

我通过将 url 设置为“http://localhost:9999”并从另一个终端运行[netcat来测试这个（在 Linux 系统上）：](http://netcat.sourceforge.net/)

```
$ cat resp.txt
HTTP 200 OK

$ nc -l 9999 < resp.txt
POST /this/that HTTP/1.1
Content-Length: 223
Content-Type: application/x-www-form-urlencoded, application/x-www-form-urlencoded
Connection: close
Accept: */*, application/json
Host: localhost:9999

disambiguator=Document&confidence=0.25&support=0&text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package 
```

这应该涵盖您的两个需求：发送表单参数以及设置 http 标头。

## 编辑-按 0x90：

这就是应该做的：

```
request.add_field("Accept", "application/json")

request.set_form_data({
  "disambiguator" => "Document",
  "confidence"    => "0.3",
  "support"       => "0",
  "text"          => "President Obama called Wednesday on Congress to extend a tax break for students included in last year's economic stimulus package",
  "Content-Type" => "application/x-www-form-urlencoded"
}) 
```

# c# - 如何在窗口中获取鼠标位置并自动单击某处

> ID：13660332
> 
> 赞同：0
> 
> 时间：2012-12-01T14:22:22.167
> 
> 标签：c#

我想用 C# 编写一个程序，比如 Ghost-Mouse 或自动点击器。它会在窗口中找到鼠标位置，然后按照我的指示单击那里。问题是，我应该编写什么代码来查找特定的鼠标 x 和 y 位置并全局单击。请问我可以得到一个示例代码吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:24:55.073

获得位置

```
MousePosition.X
   MousePosition.Y 
```

例子：

```
private void pictureBox1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(string.Format("X: {0} Y: {1}", MousePosition.X, MousePosition.Y));
    } 
```

# c++ - 在 OpenGL 中创建超过 1 个不同的对象

> ID：13660334
> 
> 赞同：-1
> 
> 时间：2012-12-01T14:22:37.033
> 
> 标签：c++, opengl, glsl

好吧，我一直在通过本教程学习 openGL：opengl-tutorial.org。该教程没有解释着色器是如何工作的。我的意思是，顶点着色器是在片段着色器之前读取的吗？

好的说到这个问题，我想创建两个对象来练习，一个盒子（带纹理的3D正方形）和一个金字塔（带纹理的3D三角形），我不知道怎么做，我知道怎么画它使用 C++/OpenGl 但谈论 GLSL.... 我需要创建另一个程序吗？我怎样才能做到这一点？

(OpenGL 3.3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:32:26.033

OpenGL 不会以您似乎假设的方式维护“对象”（术语对象用于指代 OpenGL 使用的内部“东西”，您可以通过标识符来引用它。顶点缓冲区、纹理或着色器都是“对象”的示例）。OpenGL 不是[场景图](http://en.wikipedia.org/wiki/Scenegraph)。

您需要为应用程序中的每个对象创建顶点数据（或从文件中加载该数据），并通过向缓冲区对象提供该数据来为 OpenGL 提供该数据。

然后你告诉 OpenGL 从那个缓冲区中绘制一些顶点。OpenGL 不关心该数据是什么或如何绘制它。它只会做你告诉它做的事情。如果你告诉它“获取包含顶点坐标的数据块，现在绘制 5 个三角形”，那么它就会这样做。

# c# - 没有 INotifyPropertyChanged 的 更改通知？（摘自 C# 2010 中的 Pro WPF）

> ID：13660340
> 
> 赞同：8
> 
> 时间：2012-12-01T14:23:03.943
> 
> 标签：c#, .net, wpf, data-binding, inotifypropertychanged

在 C# 2010 中阅读 Pro WPF 时，作者写道：

“您可以为每个属性引发一个事件。在这种情况下，事件必须具有名称 PropertyNameChanged（例如，UnitCostChanged）。当属性更改时，由您来触发事件。”

有人可以确认此功能有效吗？我正在试验但无法重现这种行为（我想看看这是否有效，然后我可以用 System.Reflection.Emit 做一些试验来创建动态类型）

**编辑：**我应该澄清这里的重点是在不实施 INotifyPropertyChanged 的​​情况下实施更改通知，因为这就是本书所声称的

这是我正在测试的 POCO：

```
public class Employee
{
    private string _FirstName;
    public string FirstName 
    {
        get
        {
            return _FirstName;
        }
        set
        {
            if (_FirstName != value)
            {
                _FirstName = value;
                if (FirstNameChanged != null) 
                {
                    FirstNameChanged(this, new PropertyChangedEventArgs("FirstName"));
                }
            }
        }
    }
} 
```

我将它绑定到 DataGrid 并在后台有一个计时器每隔几秒随机更新 FirstName 属性，但 DataGrid 永远不会触发

```
<DataGrid x:Name="dgEmployees" ItemsSource="{Binding ElementName=mainWindow, Path=MyEmployees}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="FirstName" Binding="{Binding Path=FirstName}" />
        </DataGrid.Columns>
    </DataGrid> 
```

FirstNameChanged 事件始终为空（我认为如果绑定引擎根据命名约定检测到它，它可能会自动订阅它）。MyEmployees 只是一个 ObservableCollection

有人可以确认作者提到的此功能是否确实有效以及我是否犯了错误？

**编辑：**为了任何认为我误解了文字的人的利益：

“你可以使用三种方法来解决这个问题：

您可以使用您在第 4 章中学到的语法将 Product 类中的每个属性设置为依赖属性。（在这种情况下，您的类必须派生自 DependencyObject。）尽管这种方法让 WPF 为您完成工作（这很好)，它在元素中最有意义——在窗口中具有视觉外观的类。对于像 Product 这样的数据类，这不是最自然的方法。

**您可以为每个属性引发一个事件。在这种情况下，事件必须具有名称 PropertyNameChanged（例如，UnitCostChanged）。当属性改变时触发事件由你决定。**

您可以实现 System.ComponentModel.INotifyPropertyChanged 接口，该接口需要一个名为 PropertyChanged 的​​事件。然后，您必须在属性更改时引发 PropertyChanged 事件，并通过提供属性名称作为字符串来指示哪个属性已更改。当属性更改时，您仍然可以引发此事件，但您不需要为每个属性定义单独的事件。”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T18:50:12.917

我会说很有可能在不使用 INotifyPropertyChanged 或依赖属性的情况下在 POCO 中实现更改通知，就像书中声称的那样，除非我完全错过了问题的重点。

如果在属性值发生更改时从 POCO 中引发名为***{Propertyname}* Changed的​​事件，WPF 绑定系统将获取该事件并更新相关绑定。**

请参阅这个小程序进行演示 - 这是我能想到的最简单的事情，但我想它也应该适用于您的情况。

XAML：

```
<StackPanel>
    <TextBlock Text="{Binding Name}" />
    <Button Content="Change name" Click="changeNameClick" />
</StackPanel> 
```

代码隐藏：

```
public partial class Window1 : Window
{
    private SimpleObject so = new SimpleObject();

    public Window1()
    {
        InitializeComponent();

        this.so = new SimpleObject();
        so.Name = "Initial value";

        this.DataContext = so;

        var t = new DispatcherTimer(
            TimeSpan.FromSeconds(1), 
            DispatcherPriority.Normal,
            (s, e) => { this.so.Name = "Name changed at: " + DateTime.Now.ToString(); },
            Dispatcher);
    }

    private void changeNameClick(object sender, RoutedEventArgs e)
    {
        this.so.Name = "New value!!";
    }
}

public class SimpleObject
{
    private string mName = null;

    public string Name 
    {
        get { return mName; }
        set
        {
            if (mName != value)
            {
                mName = value;

                if (NameChanged != null)
                    NameChanged(this, EventArgs.Empty);
            }
        }
    }

    public event EventHandler NameChanged;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T15:36:39.107

您提到的模式适用于 WPF 以及 Windows 窗体 (WinForms)。

*   *WPF，请参阅*： MSDN 上[绑定源概述](http://msdn.microsoft.com/en-us/library/ms743643.aspx)中的“提供更改通知”部分。

*   *WinForms，请参阅*：[如何：](http://msdn.microsoft.com/en-us/library/ms229615%28v=vs.90%29.aspx)在 MSDN 上应用 PropertyNameChanged 模式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-01T15:27:55.087

不，对于 WPF，您需要使用`DependencyProperties`or `INotifyPropertyChanged`。对于收藏，`INotifyCollectionChanged`也可以解决问题。

# android - scoreloop 获取当前用户不工作的分数

> ID：13660343
> 
> 赞同：0
> 
> 时间：2012-12-01T14:23:39.203
> 
> 标签：android, scoreloop

我想在 scoreloop 中获取当前用户的分数。但我不知道逻辑如何。

我试过了 ：

```
scoresController.setRangeLength(1);  
scoresController.loadRangeForUser(Session.getCurrentSession().getUser()); 
```

但它没有得到当前用户。它返回了另一个人。因为我不明白 setRangeLength 返回我需要的用户数量，而 loadRangeForUser 是我放置用户 ID 的位置。

```
//Score for single user

    final RequestControllerObserver observer2 = new RequestControllerObserver() {

        public void requestControllerDidReceiveResponse(final RequestController requestController) {
            // get the scores from our controller
            ScoresController scoresController = (ScoresController) requestController;
            List<Score> scores = scoresController.getScores();

            if(scores!=null){

                for (Score score2 : scores) {
                    PointsText.setText(" "+ScoreFormatter.format(score2));
                    RankText.setText(" "+score2.getRank());

                }

                // we're done!
                dismissDialog(DIALOG_PROGRESS);
            }

        }

        public void requestControllerDidFail(final RequestController aRequestController, final Exception anException) {
            dismissDialog(DIALOG_PROGRESS);

        }
    };

    // set up a ScoresController with our observer
    ScoresController scoresController = new ScoresController(null,observer2);

    showDialog(DIALOG_PROGRESS);

    scoresController.setMode(0);

    scoresController.setRangeLength(1);

    scoresController.loadRangeForUser(Session.getCurrentSession().getUser());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:17:15.143

```
ScoresController scoresController = (ScoresController) requestController;

ScoresController scoresController = new ScoresController(null,observer2); 
```

这些不一样，您`ScoresController`在第一个中创建本地。

# windows-phone-7 - Windows Phone 应用程序设置

> ID：13660344
> 
> 赞同：0
> 
> 时间：2012-12-01T14:23:53.790
> 
> 标签：windows-phone-7, appsettings

Windows Phone 上的应用程序设置似乎不安全且不加密。我使用隔离存储工具从设备中提取所有应用程序文件和文件夹，并且 AppSettings 文件似乎是纯 XML。

app linq 数据库呢？.sdf 文件似乎已加密。

我需要存储需要从应用程序和在单独进程中运行的后台代理访问的非常敏感的数据。他们似乎都可以访问应用程序设置，但由于存储不安全，我真的无法使用应用程序设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:26:26.163

您可以使用[`ProtectedData`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28VS.95%29.aspx)该类加密您的敏感数据，然后将其存储在应用程序设置中或直接存储在隔离存储中。

例如：

```
// Encrypting
var encryptedData = ProtectedData.Protect(Encoding.UTF8.GetBytes("Hello world!"), null);

// Decrypting
var sensitiveData = Encoding.UTF8.GetString(ProtectedData.UnProtect(encryptedData, null)); 
```

# python - python属性：类似列表的对象

> ID：13660346
> 
> 赞同：4
> 
> 时间：2012-12-01T14:24:00.343
> 
> 标签：python, properties

我正在尝试创建一个具有类似于列表的属性的对象。这就是我的意思。

```
class Unit:

    def __init__(self):
        self.val = 0

class Bundle:

    def __init__(self, N=3):
        self.units = [ Unit() for i in range(N) ]

    def getvals(self):
        return [ unit.val for unit in self.units ]

    def setvals(self, vals):
        for i, val in enumerate(vals):
            self.units[i].val = val

    vals = property(getvals, setvals) 
```

现在，这个对象的行为不像预期的那样。

```
>>> b = Bundle()
>>> b.setvals([1,2,3])
>>> print b.vals, b.getvals()
[1, 2, 3] [1, 2, 3]
>>> b.vals = [4,5,6]
>>> print b.vals, b.getvals()
[4, 5, 6] [1, 2, 3] 
```

所以语句“b.vals = x”和“b.setvals(x)”是不等价的。你能告诉我为什么，以及如何使它正常运行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T14:27:02.603

在 Python 2 中，`property`仅适用于*新样式*对象；你的`Bundle`类*必须*继承自`object`：

```
class Bundle(object):
    ... 
```

进行更正后，该属性将按预期工作：

```
>>> b.vals = [4,5,6]
>>> b.vals
[4, 5, 6]
>>> b.getvals()
[4, 5, 6]
>>> [unit.val for unit in b.units]
[4, 5, 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:12:16.320

只是为了完成 Martijn Pieters的[回答](https://stackoverflow.com/a/13660372/289011)，这可能是您想要的答案，我不禁展示了您可以在 Python 中做的一些非常奇特的事情，当我发现它们时让我感到非常惊讶。我想你可能会发现它们很有用，或者给你一些未来的想法。

## 1\. Python`list`是一个对象，所以你可以扩展你的类`list`

这将使您的“Bundle”对象继承内置`list`对象的所有方法，并允许您向其中添加新方法。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

class Unit(object):
  def __init__(self):
    self.val = 0
  def __repr__(self):
    return "%s %s val=%s" % (type(self), hex(id(self)), self.val)

class Bundle(list):
  def __init__(self, N=3):
    super(Bundle, self).__init__()
    self.extend([ Unit() for i in range(N) ])
  @property
  def vals(self):
    return [ unit.val for unit in self]
  @vals.setter
  def vals(self, vals):
    vals = vals[0:min(len(self), len(vals))] # if len(vals) > len(self), self[i] would break
    for i, val in enumerate(vals):
      self[i].val = val

if __name__ == "__main__":
  bundle = Bundle()  
  print "Bundle: %s" % bundle
  newUnit = Unit()
  bundle.append(newUnit)
  print "Bundle: %s" % bundle
  bundle.vals = [1, 2, 3, 4, 5, 6]
  print "Bundle (reassigned): %s" % bundle 
```

请注意，我更改了一些属性定义，使它们成为装饰器，但基本思想保持不变。

## 2.您可以覆盖某些内置方法，并拥有一个不是`list`行为的对象`list`：

请注意，此代码仅用于示例目的。它有一个糟糕的设计，糟糕的 OOP 用法，它的行为会让每个人都非常困惑（即使是 Guido van Rossum ......好吧，也许对他来说不是，但我相信如果他在真正的程序）这是一段......糟糕的代码，但我认为它可以帮助理解覆盖内置方法可以做什么。此外，它缺少很多要覆盖的方法，因为`Bundle`该类表现得像一个真实的`list`对象，但我有点累了**:-)**检查[模拟容器类型](http://docs.python.org/2/reference/datamodel.html#emulating-container-types)和下一点，用于模拟Python 文档[的序列类型的附加方法以](http://docs.python.org/2/reference/datamodel.html#additional-methods-for-emulation-of-sequence-types)获得完整的参考。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

class Unit(object):
  def __init__(self):
    self.val = 0
  def __repr__(self):
    return "%s %s val=%s" % (type(self), hex(id(self)), self.val)

class OtherUnit(object):
  def __init__(self):
    self.whatever = "hello"
  def __repr__(self):
    return "%s %s whatever=%s" % (type(self), hex(id(self)), self.whatever)    

class Bundle(object):
  def __init__(self, N=3):
    self.units = [ Unit() for i in range(N) ]
    self.otherUnits = [ OtherUnit() for i in range(N) ]
  def __repr__(self):
    return "%s" % (self.units + self.otherUnits)
  def __len__(self):
    return len(self.units) + len(self.otherUnits)
  def __iter__(self):
    for item in (self.units + self.otherUnits):
      yield item
  def __contains__(self, value):
    if isinstance(value, Unit):
      return value in self.units
    elif isinstance(value, OtherUnit):
      return value in self.otherUnits
    elif isinstance(value, int):
      return value in [unit.val for unit in self.units]
    elif isinstance(value, str):
      return value in [otherUnit.whatever for otherUnit in self.otherUnits]
    else:
      return False
  def __getitem__(self, index):
    assert index >= 0, "Can't accept negative indexes (%s)" % indexes
    if index < len(self.units):
      return self.units[index]
    else:
      return self.otherUnits[index - len(self.units)] #Will raise index error if too big

  def append(self, thing):
    if isinstance(thing, Unit):
      self.units.append(thing)
    elif isinstance(thing, OtherUnit):
      self.otherUnits.append(thing)
    else:
      raise TypeError("Can't accept %s" % type(thing))

  @property
  def vals(self):
    return [ unit.val for unit in self.units] + [ otherUnit.whatever for otherUnit in self.otherUnits ]
  @vals.setter
  def vals(self, vals):
    insertionPointUnits = 0
    insertionPointOtherUnits = 0
    for i, val in enumerate(vals):
      if isinstance(val, int):  
    self.units[insertionPointUnits].val = val
    insertionPointUnits += 1
      elif isinstance(val, str):
    self.otherUnits[insertionPointOtherUnits].whatever = val
    insertionPointOtherUnits += 1

if __name__ == "__main__":
  bundle = Bundle()  
  print "Bundle: %s" % bundle
  newUnit = Unit()
  bundle.append(newUnit)
  print "Bundle: %s" % bundle
  bundle.vals = [1, 2, "bye", 3, "how are you", 4, "doing ok"]
  print "Bundle (reassigned): %s" % bundle
  print "Bundle has %s items" % len(bundle) #Thanks to overwritting __len__
  for i, item in enumerate(bundle):
    print "bundle[%s]: %s" % (i, item) #Thanks to overwritting __iter__
  print "Does 'bundle' contain 'bye'?: %s" % ('bye'in bundle) #Thanks to overwritting __contains__
  print "Does 'bundle' contain 5?: %s" % (5 in bundle) #Thanks to overwritting __contains__
  print "Item 1 (should be Unit with val '2': %s" % bundle[1] #Thanks to overwritting __getitem__
  print "Item 5 (should be OtherUnit with val 'how are you' (4 Units + 1 OtherUnit... then ours!): %s" % bundle[5] #Thanks to overwritting __getitem__
  try:
    print "Item 9 (should raise IndexError): %s" % bundle[9]
  except IndexError, ie:
    print "Wooops: %s" % ie 
```

希望这会有所帮助。玩得开心！

# dart - 带有 Web 组件的 Dart 服务器

> ID：13660347
> 
> 赞同：6
> 
> 时间：2012-12-01T14:24:08.300
> 
> 标签：dart

我想将用户注册表单中的用户信息传递给 Web 组件。这可能吗。如下所示：

```
app.addRequestHandler(
  (req) => req.method == 'POST' && req.path == '/newUser',
  (req, res) {
    ...
    input.onClosed = () {
      ...
      var user = new User();
      user.name = params["user[first_name]"];
      user.email = params["user[email]"];
      res.outputStream.writeString('<x-MyWebComponent data-value="User: user"></x-MyWebComponent>');
      res.outputStream.close();
    };
    ...
  }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:11:02.610

感谢您的提问！

向 Web 组件发送数据与向任何网页发送数据没有什么不同。也就是说，您的网页或组件可以向服务器打开 AJAX（又名 XMLHttpRequest 又名 HttpRequest）请求并获取 JSON 数据。

因为 web 组件需要编译成 vanilla JavaScript 和 HTML（直到功能登陆浏览器......即将推出！）你不能发回包含你的自定义元素的原始 HTML（就像你在你的例子中一样）。

基本上，在您的服务器上创建一个处理程序，该处理程序在数据库中创建用户并发送包含用户详细信息的 JSON 响应。您的网页（或组件）将接收 JSON 响应，然后可以通过组件将其绑定到页面。

这里有很多活动部件，所以我认为我们需要一个端到端的样本。同时，您可以执行以下操作：

```
var user = new User();
user.name = params["user[first_name]"];
user.email = params["user[email]"];
res.headers.add('Content-Type', 'application/json');
res.outputStream.writeString(user.toJson());
res.outputStream.close(); 
```

这假设您`String toJson();`向 User 类添加了一个方法。

# linux - 哈希函数从文件路径生成哈希键

> ID：13660348
> 
> 赞同：1
> 
> 时间：2012-12-01T14:24:10.633
> 
> 标签：linux, operating-system, filesystems, hashtable, linode

哈希函数从文件路径名生成哈希键的任何想法？我想用它来维护有关每个文件的信息，因为每个文件的路径都是唯一的，即使它们具有相同的文件名！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:35:28.480

您可以使用[openssl](http://linux.die.net/man/3/md5_init)哈希函数，这只是一个示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <openssl/md5.h>    

int main()
{
  int i;
  unsigned char result[MD5_DIGEST_LENGTH];
  const char *string = "path/to/file";

  MD5(string, strlen(string), result);

  // output
  for(i = 0; i < MD5_DIGEST_LENGTH; i++)
    printf("%02x", result[i]);
  printf("\n");

  return EXIT_SUCCESS;
} 
```

# php - PHP中的意外变量范围

> ID：13660349
> 
> 赞同：1
> 
> 时间：2012-12-01T14:24:21.513
> 
> 标签：php, scope

我想在我的网站中显示来自数据库的 3 张随机图像。下面是它的代码：

```
$query = mysql_query ("SELECT id,url FROM tbl_gallery2");
if (mysql_num_rows($query) >= 3) {
    $my_array = array();
    $last_array = array();
    while ($r = mysql_fetch_row($query)) {
        $my_array[] = $r[1];
    }

    function makernd () {
        $number = array_rand($my_array,1);
        if (in_array($number,$last_array)) {
            makernd();
        } else {
            $last_array[] = $number;
            return $number;
        }
    }

    for($i = 1 ; $i < 3 ; $i++) {
        $item = makernd();
        echo '<img src="./images/slider/'.$item.'.jpg" alt="" class="slider" />';
    }

} 
```

但是每当我运行这段代码时，我都会收到以下错误：

> 未定义变量：my_array in line ... // makernd() 函数的第一行。

但我希望 $my_array 成为这个函数的可访问数组。
有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:27:05.127

为了简单地解决您的问题，您应该将`$my_array`to`makernd()`作为参数传递：

```
$query = mysql_query ("SELECT id,url FROM tbl_gallery2");
if (mysql_num_rows($query) >= 3) {
    $my_array = array();
    $last_array = array();
    while ($r = mysql_fetch_row($query)) {
        $my_array[] = $r[1];
    }

    function makernd ($my_array) {
        $number = array_rand($my_array,1);
        if (in_array($number,$last_array)) {
            makernd($my_array);
        } else {
            $last_array[] = $number;
            return $number;
        }
    }

    for($i = 1 ; $i < 3 ; $i++) {
        $item = makernd($my_array);
        echo '<img src="./images/slider/'.$item.'.jpg" alt="" class="slider" />';
    }

} 
```

但是，我强烈建议将随机化放在 MySQL 中，以

1.  简化您的代码
2.  显着提高性能，并且
3.  消除 PHP 中过多的循环和递归

例子：

```
$sql = "SELECT id,url 
        FROM tbl_gallery2 
        ORDER BY RAND() 
        LIMIT 3";
$query = mysql_query ($sql);
if (mysql_num_rows($query) >= 3) {
    while ($r = mysql_fetch_row($query)) {
        echo '<img src="./images/slider/' . $r[1] . '.jpg" alt="" class="slider" />';
    }
} 
```

PS - 我还建议您更新要使用的代码`mysqli`，因为`mysql`已弃用

PPS - 我还建议您查看，`mysqli_fetch_assoc`以便您可以按名称而不是索引来引用查询结果（例如`$r['url']`，而不是`$r[1]`- 就好像您曾经更改查询的顺序一样，您将按索引中断引用。

# android - 将 ImageView 放在 TextView 旁边

> ID：13660350
> 
> 赞同：3
> 
> 时间：2012-12-01T14:24:26.350
> 
> 标签：android, textview, imageview

我认为解决方案会很明显，但只要我是android的菜鸟，请原谅我:)

我想在视图的右上方放置一些图片和一个文本视图，它将适合视图的其余部分。这是我所做的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ImageView
            android:id="@+id/logo_in_listing"
            android:layout_width="100dip"
            android:layout_height="100dip"
            android:layout_alignParentRight="true"
            android:layout_marginRight="11dip"
            android:layout_marginTop="11dip"
            android:background="@drawable/border_for_imageview"
            android:src="@drawable/facebook_logo" />

          <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/someString"
            android:id="@+id/textview1"
            android:layout_toLeftOf="@id/logo_in_listing"
            android:layout_margin="3dip"/>

</RelativeLayout> 
```

这是我得到的：

![在此处输入图像描述](../Images/e192d9e44ab745c0fb4cb4ba6237e698.png)

我的问题：

1）如何使textview也适合​​imageview的下部？我不希望那个空间被闲置。

2) 如您所见，我使用`dip`s 来放置 ImageView。在这种情况下你会推荐什么？我的意思是，如何以某种方式编写所有屏幕尺寸都相同的内容？或者也许`dip`可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:00:17.030

你必须使用`Spanned`界面。[这是](http://code.google.com/p/android-flowtextview/downloads/detail?name=FlowTextDemo.zip)一个很好的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:30:22.080

> 1）如何使textview也适合​​imageview的下部？我不希望那个空间被闲置。

*当前可用的布局无法*围绕文本流动。*但是，您可以在 WebView 中将内容显示为 HTML，甚至可以在 TextView 中显示为 HTML。*

 *> 2) 如您所见，我使用 dips 来放置 ImageView。在这种情况下你会推荐什么？我的意思是，如何以某种方式编写所有屏幕尺寸都相同的内容？或者浸没可以吗？

Dip 用于与设备无关的像素。在不同的屏幕尺寸上，1 Dip 将占用不同数量的像素，但在视觉上，1 Dip 在所有屏幕上看起来几乎相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:34:45.080

如果你不想留下空间，你可以使用 spannables。例如：

```
 int TEXT_START  = 0;
    int TEXT_END = yourTextView.length();
    Spannable span = (Spannable) yourtextview.getText();
    span.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), TEXT_START, TEXT_END,
            0); 
```

对于您的第二个问题：使用 dp 而不是 dip。*

# delay - 为什么在简单计数器中延迟 1 个时钟周期

> ID：13660351
> 
> 赞同：1
> 
> 时间：2012-12-01T14:24:27.717
> 
> 标签：delay, simulation, counter, vhdl

下面是一个简单的 3 位计数器。

当 reset(rst) 为 0 时，计数器值为“000”，否则在每个时钟的上升沿递增 1。

```
 LIBRARY ieee;
 USE ieee.std_logic_1164.all;
 use IEEE.std_logic_unsigned.all;
 use IEEE.numeric_std.all;
 ---------------------------------------------
 ENTITY counter IS
 PORT (clk : IN STD_LOGIC;
    rst : in std_logic;
       digit : out std_logic_vector (2 downto 0)
       );
 END counter;
 ---------------------------------------------
 ARCHITECTURE counter OF counter IS
 BEGIN

 count: PROCESS(clk,rst)
 VARIABLE temp : std_logic_vector(2 downto 0);
 BEGIN
 IF (clk'EVENT AND clk='1') THEN
     if (rst = '1') then
        temp := temp + "001";
     else
        temp := "000";
     END IF;
 END IF;
 digit <= temp;
 END PROCESS count;
 END counter; 
```

下面是我得到的模拟结果：

![在此处输入图像描述](../Images/0f862aeccb066b587d653ff2d17f2099.png)

结果，输出是正确的。但是在时间 rst = 1 和 output='001' 之间有一个时钟延迟。即当rst = '1' 时，计数器不会立即增加。

根据我的理解，只要 clk 或 rst 发生变化，就会执行进程。所以当 rst 从低变高时，就会发生一个事件。进程检查 clk 的上升沿是否为 YES。然后检查rst = 1，是。因此，通常计数器必须在该 clk 本身中增加。但事实并非如此。

问题：

1.  为什么复位 = 1 和输出 = 001 之间有一个时钟周期延迟？
2.  我的理解有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T17:30:30.870

最可能的原因是“rst”是由时钟进程生成的，由相同的“clk”信号时钟。

所以“rst”出现在“clk”之后的一个增量周期。当“rst”改变时，它会唤醒进程，但“clk'event”在前一个增量周期，因此“if”语句将不会执行。

在下一个时钟沿，rst = 1，因此计数器按预期工作。

三个小点：

*   值得将复位信号命名为 rst_n 以更清楚地表明它是低电平有效复位！
*   rst 真的不需要在敏感列表中
*   布尔表达式周围不需要括号

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T16:29:32.240

（免责声明：我已经很久没有用 VHDL 编程了，所以这仅适用于通用逻辑设计。）

无论如何，不​​能指望在触发进程时立即准备好加法的结果。关键是，即使是计算 000 + 001 的第一位也会受到相当于一次异或运算的传播延迟的影响。第二位是根据第一位的进位（如果两个位都是 1）和第二位的异或运算来计算的。等等。

如果有人会异步探测“temp”变量，则会看到如下内容：

```
 ^ ________________
result_bit_0    __________|
                        0123456789
                _____________
result_bit_1            ^    |____________
                        0123456789
                ____________ _____
result_bit_2            ^  |_|   |________
                        0123456789abcde
                        ________       
clock:          ________|      |______| 
```

该图试图更详细地说明通用加法操作的波形。
在时间 0 开始添加过程。
在一个小的延迟“2”之后，第一位*稳定*到 1。
在时间“5”第二位*稳定*到 0，在时间“9”第三位稳定到 0。但也很常见，如 result_bit_2，输出在各种状态之间切换。

它是每个临时变量的总/最大延迟来稳定，这决定了最小时钟周期。在这种情况下，时刻“e”是那个时刻，我们已经确定计数器递增的结果是可用的。

尽管如此，从角度`result`（这是一个向量）来看，一切都会*在下一个*时钟周期立即发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-25T13:22:49.557

“问题”在于您描述“第一个”的方式。你这样做的方式会导致“同步”复位，即复位只会在时钟上升沿后生效。

一般来说，这只是编码风格/偏好的问题。我通常更喜欢异步重置（可能在顶层使用重置同步器以避免释放重置时的亚稳定性），但采用同步重置方法并没有错。

在异步重置的情况下，您需要将代码更改为以下内容：

```
PROCESS (clk, rst_n) BEGIN
   IF rst_n = '0' THEN
      ...
   ELSIF rising_edge(clk) THEN
    ...
   END IF;
END PROCESS; 
```

# c# - WebClient.UploadValuesAsync - 获取请求中发送的值

> ID：13660354
> 
> 赞同：2
> 
> 时间：2012-12-01T14:25:00.057
> 
> 标签：c#, webclient

触发`UploadValuesCompleted`事件后，是否可以获取`NameValueCollection`请求中上传的事件？

我希望能够重新发送请求的副本。

我正在做这样的事情：

```
NameValueCollection data = new NameValueCollection();
data.Add("myParam", "myValue");

WC.Headers["Content-Type"] = "application/x-www-form-urlencoded";
WC.UploadValuesAsync(Url, "POST", data); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:15:57.083

如果您将数据传递给它，您的事件处理程序就可以访问`data`，例如通过使用闭包语义或实例变量。

它可能看起来像这样：

```
WebClient client = new WebClient();
var data = GetPostData();
client.UploadValuesCompleted += (sender, e) => { Console.WriteLine(data); };
UploadValuesAsync("url", "POST", data); 
```

事件处理程序现在可以访问`data`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:55:48.397

为此，我扩展`WebClient`了请求 URL 和发送的值。

```
class APIRequest : WebClient
{

    public Uri Url { get; private set; }
    public NameValueCollection Data { get; private set; }

    public void sendRequest(Uri url, NameValueCollection data)
    {
        Url = url;
        Data = data;

        Headers["Content-Type"] = "application/x-www-form-urlencoded";
        UploadValuesAsync(url, "POST", data);
    }

} 
```

它还要求我对其他代码进行更改，我以前使用一个 WebClient 处理许多请求，现在我为每个请求使用一个。

# c# - 可访问性不一致：属性类型难以访问

> ID：13660355
> 
> 赞同：114
> 
> 时间：2012-12-01T14:25:06.250
> 
> 标签：c#, properties

请有人帮助解决以下错误：

> 可访问性不一致：属性类型“Test.Delivery”比属性“Test.Form1.thelivery”更难访问

```
private Delivery thedelivery;

public Delivery thedelivery
{
    get { return thedelivery; }
    set { thedelivery = value; }
} 
```

由于不一致的错误消息，我无法运行该程序。

这是我的交付课程：

```
namespace Test
{
    class Delivery
    {
        private string name;
        private string address;
        private DateTime arrivalTime;

        public string Name
        {
            get { return name; }
            set { name = value; }
        }

        public string Address
        {
            get { return address; }
            set { address = value; }
        }

        public DateTime ArrivlaTime
        {
            get { return arrivalTime; }
            set { arrivalTime = value; }
        }

        public string ToString()
        {
            { return name + address + arrivalTime.ToString(); }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-12-01T14:29:21.867

使您的类**`public`**访问修饰符，

**`public`只需在您的班级名称前面添加关键字**

```
 namespace Test
{
  public  class Delivery
    {
        private string name;
        private string address;
        private DateTime arrivalTime;

        public string Name
        {
            get { return name; }
            set { name = value; }
        }

        public string Address
        {
            get { return address; }
            set { address = value; }
        }

        public DateTime ArrivlaTime
        {
            get { return arrivalTime; }
            set { arrivalTime = value; }
        }

        public string ToString()
        {
            { return name + address + arrivalTime.ToString(); }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-01T14:28:02.647

您的类`Delivery`没有访问修饰符，这意味着它默认为`internal`. 如果您随后尝试将该类型的属性公开为`public`，它将不起作用。您的类型（类）需要与您的属性具有相同或更高的访问权限。

有关访问修饰符的更多信息：http: [//msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-01T14:28:18.980

您的`Delivery`类是内部的（类的默认可见性），但是属性（可能是包含类）是公共的，因此该属性比`Delivery`类更容易访问。您需要`Delivery`公开或限制该属性的可见`thelivery`性。

# regex - ColdFusion - 如何仅获取此文本块中的 URL？

> ID：13660356
> 
> 赞同：1
> 
> 时间：2012-12-01T14:25:28.267
> 
> 标签：regex, coldfusion, railo, cfml

如何从给定的文本块中**仅**提取URL？

```
background(http://w1.sndcdn.com/f15ikDS9X_m.png)
background-image(http://w1.sndcdn.com/5ikDIlS9X_m.png)
background('http://w1.sndcdn.com/m1kDIl9X_m.png')
background-image('http://w1.sndcdn.com/fm15iIlS9X_m.png')
background("http://w1.sndcdn.com/fm15iklS9X_m.png")
background-image("http://w1.sndcdn.com/m5iIlS9X_m.png") 
```

也许正则表达式会起作用，但我还不够先进，无法解决！

非常感谢！米奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:15:18.677

你想多了这个问题——你需要做的就是匹配 URL，这是一个简单的匹配：

```
rematch('\bhttps?:[^)''"]+',input) 
```

这将根据提供的输入起作用 - 如果使用不同的输入，可能需要调整。

`\s`（例如，如果这可能是一个因素，您可以选择将 a 添加到 char 类中。）

正则表达式本身很简单：

```
\bhttps?:  ## look for http: or https: with no alphanumeric chars beforehand.

[^)'"]+    ## match characters that are NOT ) or ' or "
           ## match as many as possible, at least one required. 
```

如果这是匹配误报，您当然可以寻找更精致的 URL 正则表达式，例如[这些](http://mathiasbynens.be/demo/url-regex).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:47:48.470

[演示](http://regex101.com/r/zY5cT5)

`background(?:-image)?\((["']?)(?<url>http.*)\1\)`

解释：

*   `background(?:-image)?`-> 它匹配背景或背景图像（不分组）
*   `\(`-> 匹配文字括号
*   `(["']?)``' or " or VOID`-> 如果url 之前有 a 则匹配
*   `(?<url>http.*)`-> 匹配 url
*   `\1\)`-> 匹配分组（本说明的第三行），然后是文字括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:27:02.073

如果你想要一个没有正则表达式的答案，这样的事情会起作用。

```
YourString = "background(http://w1.sndcdn.com/f15ikDS9X_m.png)";
YourString = ListLast(YourString, "("); // yields http://w1.sndcdn.com/f15ikDS9X_m.png)
YourString = replace(YourString, ")", "");  // http://w1.sndcdn.com/f15ikDS9X_m.png 
```

由于您不止一次这样做，因此您可以将其设为函数。此外，您可能需要一些其他替换命令来处理某些字符串中的引号。

说了这么多，让一个正则表达式工作会更好。

# jquery - jquery 移动点击事件触发两次

> ID：13660360
> 
> 赞同：7
> 
> 时间：2012-12-01T14:25:54.857
> 
> 标签：jquery, cordova, jquery-mobile, mobile

我对一个简单的 JQuery 移动应用程序有疑问。这一切都归结为点击事件触发两次。

类似问题的解决方案没有解决此问题。

无论是部署到设备还是在浏览器中显示，都会出现问题。

这是代码

```
<title></title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, user-scalable=no" />

<script src="jquery-1.8.2.min.js" type="text/javascript"></script>  
<script src="jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
<script src="cordova-2.2.0.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).bind("mobileinit", function () {
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
    });
</script>

<link rel="Stylesheet" href="jquery.mobile-1.2.0.min.css" /> 
```

```
<div>
    <input type="button" id="ButtonSubmit" value="Save" />
</div> 
```

```
<script type="text/javascript">

    $("#ButtonSubmit").click(function () {
        alert('Clicked');
    });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T15:21:08.880

您**可以使用下面提到的方法来解决这个问题**。

首先使用**unbind**然后**绑定**，如下所示**：**

```
<script type="text/javascript">

    $("#ButtonSubmit").unbind('click').bind('click', function () {
            alert('Clicked');
            return false; //to prevent the browser actually following the links!
        });

</script> 
```

**更新：**如果你有**方法，**那么你可以使用如下。

注意：当您使用**off**方法时，它会删除以前的单击事件处理程序，而使用**on**方法会添加新的事件处理程序。B'cos 不允许发生单击 2 次。

```
<script type="text/javascript">

$('#ButtonSubmit').off('click').on('click', function(){

  alert('Clicked');
  return false; //to prevent the browser actually following the links!
}); 

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T15:29:44.903

在最新的 jQuery mobile 中发生了很多实验性的东西，触发了点击事件，这可能导致了这些问题（第 2689 行）：

```
// This plugin is an experiment for abstracting away the touch and mouse
// events so that developers don't have to worry about which method of input
// the device their document is loaded on supports.
//
// The idea here is to allow the developer to register listeners for the
// basic mouse events, such as mousedown, mousemove, mouseup, and click,
// and the plugin will take care of registering the correct listeners
// behind the scenes to invoke the listener at the fastest possible time
// for that device, while still retaining the order of event firing in
// the traditional mouse environment, should multiple handlers be registered
// on the same element for different events.
//
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel" 
```

[http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.js](http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.js)

我修复它的方法是：

```
$('#mobileMenuItem').off('click'); 
```

然后它开始正常运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T15:53:28.983

我认为这与您处理事件的方式有关。即，使用pageinit。

此外，可能会隐藏具有不同 data-url 的页面，因此无论如何也会运行相同的 js。

在您的代码中，我将进行以下更改

```
<script type="text/javascript">
   $(document).off('click').on('click', '#ButtonSubmit', function () {
        alert('Clicked');
    });
</script> 
```

以这种方式，我知道我将绑定一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:28:31.823

您是否尝试阻止默认操作？

```
<script type="text/javascript">
    $("#ButtonSubmit").click(function (e) {
        e.preventDefault();
        alert('Clicked');
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T15:29:23.667

如果您的 onclick 处理程序触发了两次，那么您的处理程序很可能被注册了两次。您可以在注册处理程序之前添加一些日志记录，以验证正在发生的事情。然后你可以调试为什么它被注册了两次。

# php - 推送到 github - 奇怪的空白

> ID：13660363
> 
> 赞同：2
> 
> 时间：2012-12-01T14:26:08.173
> 
> 标签：php, github

当我将代码推送到 github 存储库并显示随机文件时，它们包含一些奇怪的空格，例如：

```
// 'auth'               => MPATH.'auth',            // Authentication module
// 'database'       => MPATH.'database',        // Database access 
```

在我的 IDE 中，代码在 github 上完美排列 - 它的行为类似于上面，在完全随机的地方。有没有什么办法解决这一问题？

我使用制表符进行缩进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:37:24.610

我建议以后在制表符上使用空格。您可以将编辑器设置为每次输入 2、4 或多少个空格`Tab`。我相信这会为您省去很多麻烦，因为空格总是完全相同的宽度，而制表符的宽度总是可以根据上下文而变化。

现在你可以像这样转换标签

```
expand -t2 foo-tabs.php > foo-spaces.php 
```

# c++ - 数组/向量 c++ 推送？

> ID：13660365
> 
> 赞同：0
> 
> 时间：2012-12-01T14:26:33.597
> 
> 标签：c++

我需要创建一个可以将数据推送到的键控数组。

我需要存储 id 和时间，并在事件中将新的 id 和时间推送到数组中。

看了一圈，很多人都推荐了向量。

我不确定我将如何实现它，有两个键，以及如何推送它们？

如果有人可以帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:29:46.930

使用`std::vector`of `std::pair<T,U>`、 where`T`和`U`是适合 id 和 time 的数据类型。

例如：

```
std::vector<std::pair<int, long> > v;
v.push_back(std::make_pair(1, 2L));
v.push_back(std::make_pair(1, 2L));
v.push_back(std::make_pair(2, 2L)); 
```

# qt - 用于单击的自定义 QGraphicsItem mousePressEvent 仅在双击时有效

> ID：13660367
> 
> 赞同：0
> 
> 时间：2012-12-01T14:26:42.670
> 
> 标签：qt, mouseevent, qgraphicsitem

我有以下mousePressEvent，它工作正常，但只有在双击鼠标时，我希望它只有在单击鼠标按钮时才能工作。

```
void MapNode::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    isClicked *= -1;
    QGraphicsItem::mousePressEvent(event);
    update();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:49:47.630

我的自定义QGraphicsItem的父级中有一个mousePressEvent，它是一个自定义QGraphicsView，只需要在自定义QGraphicsView mousePressEvent里面添加方法开头的以下代码行：`QGraphicsView::mousePressEvent(event);`，所以现在单击工作正常，可能是事件在父级上阻止了对子级的事件。

# c# - 通过产品 id 获取数量总和

> ID：13660371
> 
> 赞同：2
> 
> 时间：2012-12-01T14:26:56.787
> 
> 标签：c#, sql, sql-server

我正在努力从我的数据库中获取一些结果。我有一张这样的桌子：

```
 ID ID_INVOICE PRODUCT QUANTITY PRODUCT_ID
    ------------------------------------------
     1    1          aaa     3       2
     2    1          bbb     2       3
     3    1          ccc     1       4
     4    2          bbb     3       3
     5    2          aaa     3       2 
```

所以在查询之后我想得到类似的东西

```
 aaa  6
   bbb  5
   ccc  1 
```

查询是基于`ID_INVOICE`到目前为止我已经尝试过的：

```
 SELECT product, sum(quantity) 
  FROM product 
  WHERE invoice_id = @p1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:29:07.110

添加一个`GROUP BY product`子句，如下所示：

```
SELECT  product, sum(quantity) 
FROM product 
WHERE invoice_id = @p1
GROUP BY product; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/e0111/3)

# objective-c - Mac 小键盘上清除和相等的键码是什么？

> ID：13660374
> 
> 赞同：2
> 
> 时间：2012-12-01T14:27:04.987
> 
> 标签：objective-c, xcode, macos, standards

**我需要知道数字键盘上清除和相等键的键码是什么。**

![在此处输入图像描述](../Images/446a136367216c46c079021848f393e8.png)

我见过不同的来源解释它，但他们都说不同的东西。有人可以给我一个明确的答案吗？

**更新：**

我以这种方式获取密钥代码：

```
NSEvent *result = incomingEvent;
unichar key = result.keyCode; 
```

这使得小键盘上的等号为 81，而正常的等号为 24。

我如何获得您所说的键码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:57:36.173

文件

```
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/Headers/Events.h 
```

包含虚拟键码的常量，特别是

```
kVK_ANSI_Equal                = 0x18
kVK_ANSI_KeypadClear          = 0x47
kVK_ANSI_KeypadEquals         = 0x51 
```

由于等号的代码与您从`NSEvent`这些定义中获得的代码相同，这似乎就是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:31:33.923

根据[此页面](http://www.asquare.net/javascript/tests/KeyCode.html)，12 表示清晰，187 表示相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-31T22:12:27.060

自 macOS Sierra 10.12 以来，`keyCode`一直根据[通用串行总线 HID 使用表](https://www.usb.org/sites/default/files/documents/hut1_12v2.pdf)（转到部分：10 键盘/键盘页面，第 51 页）。

HEX 中的 keyCodes 是：

```
keyPad Clear = 0x53
keyPad Equal = 0x67 
```

其余的关键代码是：

```
Usage           Usage ID (hex)
Keyboard a and A        0x04
Keyboard b and B        0x05
Keyboard c and C        0x06
Keyboard d and D        0x07
Keyboard e and E        0x08
Keyboard f and F        0x09
Keyboard g and G        0x0A
Keyboard h and H        0x0B
Keyboard i and I        0x0C
Keyboard j and J        0x0D
Keyboard k and K        0x0E
Keyboard l and L        0x0F
Keyboard m and M        0x10
Keyboard n and N        0x11
Keyboard o and O        0x12
Keyboard p and P        0x13
Keyboard q and Q        0x14
Keyboard r and R        0x15
Keyboard s and S        0x16
Keyboard t and T        0x17
Keyboard u and U        0x18
Keyboard v and V        0x19
Keyboard w and W        0x1A
Keyboard x and X        0x1B
Keyboard y and Y        0x1C
Keyboard z and Z        0x1D
Keyboard 1 and !        0x1E
Keyboard 2 and @        0x1F
Keyboard 3 and #        0x20
Keyboard 4 and $        0x21
Keyboard 5 and %        0x22
Keyboard 6 and ^        0x23
Keyboard 7 and &        0x24
Keyboard 8 and *        0x25
Keyboard 9 and (        0x26
Keyboard 0 and )        0x27
Keyboard Return (Enter) 0x28
Keyboard Escape         0x29
Keyboard Delete (Backspace)0x2A
Keyboard Tab            0x2B
Keyboard Spacebar       0x2C
Keyboard - and _        0x2D
Keyboard = and +        0x2E
Keyboard [ and {        0x2F
Keyboard ] and }        0x30
Keyboard \ and |        0x31
Keyboard Non-US # and ~ 0x32
Keyboard ; and :        0x33
Keyboard ' and "        0x34
Keyboard Grave Accent and Tilde 0x35
Keyboard , and "<"      0x36
Keyboard . and ">"      0x37
Keyboard / and ?        0x38
Keyboard Caps Lock      0x39
Keyboard F1             0x3A
Keyboard F2             0x3B
Keyboard F3             0x3C
Keyboard F4             0x3D
Keyboard F5             0x3E
Keyboard F6             0x3F
Keyboard F7             0x40
Keyboard F8             0x41
Keyboard F9             0x42
Keyboard F10            0x43
Keyboard F11            0x44
Keyboard F12            0x45
Keyboard Print Screen   0x46
Keyboard Scroll Lock    0x47
Keyboard Pause          0x48
Keyboard Insert         0x49
Keyboard Home           0x4A
Keyboard Page Up        0x4B
Keyboard Delete Forward 0x4C
Keyboard End            0x4D
Keyboard Page Down      0x4E
Keyboard Right Arrow    0x4F
Keyboard Left Arrow     0x50
Keyboard Down Arrow     0x51
Keyboard Up Arrow       0x52
Keypad Num Lock and Clear   0x53
Keypad /                0x54
Keypad *                0x55
Keypad -                0x56
Keypad +                0x57
Keypad Enter            0x58
Keypad 1 and End        0x59
Keypad 2 and Down Arrow 0x5A
Keypad 3 and Page Down  0x5B
Keypad 4 and Left Arrow 0x5C
Keypad 5                0x5D
Keypad 6 and Right Arrow    0x5E
Keypad 7 and Home       0x5F
Keypad 8 and Up Arrow   0x60
Keypad 9 and Page Up    0x61
Keypad 0 and Insert     0x62
Keypad . and Delete     0x63
Keyboard Non-US \ and | 0x64
Keyboard Application    0x65
Keyboard Power          0x66
Keypad =                0x67
Keyboard F13            0x68
Keyboard F14            0x69
Keyboard F15            0x6A
Keyboard F16            0x6B
Keyboard F17            0x6C
Keyboard F18            0x6D
Keyboard F19            0x6E
Keyboard F20            0x6F
Keyboard F21            0x70
Keyboard F22            0x71
Keyboard F23            0x72
Keyboard F24            0x73
Keyboard Left Control   0xE0
Keyboard Left Shift     0xE1
Keyboard Left Alt       0xE2
Keyboard Left GUI       0xE3
Keyboard Right Control  0xE4
Keyboard Right Shift    0xE5
Keyboard Right Alt      0xE6
Keyboard Right GUI      0xE7 
```

# windows-server-2008-r2 - 有时它可以通过 --ignore-load-errors 忽略这个错误

> ID：13660375
> 
> 赞同：3
> 
> 时间：2012-12-01T14:27:24.673
> 
> 标签：windows-server-2008-r2, wkhtmltopdf

使用 wkhtmltopdf 将我的 html 转换为 PDF。

在 Windows 8 上运行的本地计算机上工作正常。

但它给了我“有时它会工作只是用--ignore-load-errors 忽略这个错误”错误，而我尝试在 Windows 2008 服务器 R2 上运行相同的错误。

任何想法如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:01:39.920

我的服务器有问题。

通过主机文件配置我的应用程序后，它开始工作。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T23:38:33.647

我有一个类似的问题，原来是由 DNS 解析问题引起的。

对于我的特殊情况，我必须将有效的 DNS 服务器放在我的 /etc/resolv.conf 文件中。

# delphi - 在 ClientDataSet 中使用日期字段（作为字符串）进行索引

> ID：13660376
> 
> 赞同：0
> 
> 时间：2012-12-01T14:27:27.047
> 
> 标签：delphi, date, sorting, indexing, dataset

在 Delphi XE2 上，我有一个 ClientDataSet，它有许多字段作为名称，...它有一个名为 Date 的字段，作为值类型字符串。包含日期 (dd/mm/yyyy) 我想使用 FastReport 打印 ClientDataSet 的内容。我想之前根据日期字段对内容进行升序排序。我正在使用索引。但是这样做时，排序只会根据“/”之前的日期字符串的内容对字段进行排序。表单示例日期如：12/11/2012、15/10/2012、01/12/2012 排序如下：01/12/2012 - 12/11/2012 - 15/10/2012。知道如何正确执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:06:10.097

排序是正确的！由于您有一个字符串字段，因此排序就像字符串排序一样，即从左到右。如果您希望它按日期排序，您需要一个日期字段或对字符串表示进行排序，如 yyyy/mm/dd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:17:43.543

你有一些选择：

*   将该字段作为 DateTime 字段。您必须将原始 SQL 更改为此。
*   执行 Marjan 的建议，将字符串字段格式化为类似 ISO 的样式（允许在应用字符串排序时按时间顺序排列字段），并为用户显示格式创建一个计算字段。
*   在 的 OnGetRecords 事件上创建一个新字段`TDatasetProvider`并将其填充为日期字段。
*   与上面类似，但创建一个日期格式为 ISO-Like 样式的字符串字段。

如果可能，我个人建议第一种方法。

# objective-c - 我有两个错误：“UIWebview”没有可见的@interface

> ID：13660379
> 
> 赞同：2
> 
> 时间：2012-12-01T14:27:39.117
> 
> 标签：objective-c, ios, uiwebview

我有两个错误：'UIWebView' 没有可见的@interface 声明选择器'highlightAllOccurencesOfString:'

另一个：'UIWebView' 没有可见的@interface 声明选择器'removeAllHighlights' 请有人帮助我。

WBSecondViewController.h

```
 #import <UIKit/UIKit.h>
 @interface WBSecondViewController : UIViewController <UIWebViewDelegate, UIScrollViewDelegate>{
}

@property (weak, nonatomic) IBOutlet UIWebView *webView;

@property(copy) NSArray *menuItems;

@property (weak, nonatomic) IBOutlet UIToolbar *webToolBar;
- (IBAction)back:(id)sender;
- (IBAction)foward:(id)sender;

-(IBAction)searchButtonPressed:(id)sender;
-(IBAction)clearHighlights:(id)sender;
@end 
```

WBSecondViewController.m

```
#import "WBSecondViewController.h"
#import "Word.h"
#import "WordController.h"
#import "AddWordController.h"
#import "WBAppDelegate.h"
#import "WBFirstViewController.h"
#import "SearchWebView.h"

@interface WBSecondViewController ()

@end

@implementation WBSecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"Second", @"Second");
    self.tabBarItem.image = [UIImage imageNamed:@"second"];
}
return self;
}

- (void)viewDidLoad
{
UIMenuController *menu = [UIMenuController sharedMenuController];

[super viewDidLoad];
NSURL *theURL = [NSURL URLWithString:@"http://www.google.co.jp"];
[_webView loadRequest:[NSURLRequest requestWithURL:theURL]];
}
-(IBAction)searchButtonPressed:(id)sender{

[_webView highlightAllOccurencesOfString:@"cat"];
}

-(IBAction)clearHighlights:(id)sender{

[_webView removeAllHighlights];

} 
```

SearchWebView.h

```
#import <Foundation/Foundation.h>

@interface SearchWebView : UIWebView

- (NSInteger)highlightAllOccurencesOfString:(NSString*)str;
- (void)removeAllHighlights;

@end 
```

SearchWebView.m

```
#import "SearchWebView.h"

@implementation SearchWebView

- (NSInteger)highlightAllOccurencesOfString:(NSString*)str
{
NSString *path = [[NSBundle mainBundle] pathForResource:@"UIWebViewSearch" ofType:@"js"];
NSString *jsCode = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
[self stringByEvaluatingJavaScriptFromString:jsCode];

NSString *startSearch = [NSString     stringWithFormat:@"uiWebview_HighlightAllOccurencesOfString('%@')",str];
[self stringByEvaluatingJavaScriptFromString:startSearch];

NSString *result = [self stringByEvaluatingJavaScriptFromString:@"uiWebview_SearchResultCount"];
return [result integerValue];
}

- (void)removeAllHighlights
{
[self stringByEvaluatingJavaScriptFromString:@"uiWebview_RemoveAllHighlights()"];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:39:23.370

您已将 uiwebview 子类化并将其称为 SearchWebView，但是当您在 wbsecondviewcontroller 中创建 Web 视图的实例时，您使用常规 Web 视图而不是您创建的子类，并且常规 Web 视图没有您定义的两个额外方法对于那个定制的。在 wbsecondviewcontroller.h 中的 @interface 上方做`@class SearchWebView`。然后在声明属性 UiWebView 的地方，将其声明为 SearchWebView。在 wbsecondviewcontroller 的 .m 文件中`#import "SearchWebView.h"`

# android - eclipse删除了app文件内容

> ID：13660399
> 
> 赞同：0
> 
> 时间：2012-12-01T14:30:24.863
> 
> 标签：android, eclipse

我一直在使用 eclipse 开发一个应用程序。这些文件保存在我的外部硬盘驱动器上，我现在已经把它带回家工作了。该项目不会显示在工作区中，因此我尝试导入该项目。所有文件都在那里，但任何文件中都没有内容。*** * 见鬼！

我的问题是：

1.  我能把这些拿回来吗
2.  如果没有，我正在通过我的 SGS3 进行测试，所以它安装在我的手机上，我可以这样取回我的文件吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:07:39.863

您在*三星 Galaxy S3*上安装的文件是一个可部署的应用程序**.apk**。您只能获取 .apk 文件，而不是源文件或 Eclipse 项目配置。

# oracle - oracle过程中的select语句

> ID：13660405
> 
> 赞同：0
> 
> 时间：2012-12-01T14:30:41.823
> 
> 标签：oracle, oracle10g, oracle11g, oracle9i

我无法在 oracle 过程中创建选择语句。请帮我创建这个。现在我在一个过程中创建了 insert,update.delete 语句，但我无法创建一个 select 语句。请帮助我使用游标创建选择语句。

```
c_dbuser OUT SYS_REFCURSOR

ELSIF (TYPE_ =1) THEN

  OPEN c_dbuser FOR
  SELECT * FROM tbl_discount_master ;
  CLOSE c_dbuser;

END IF;

call procedure_name(xx,xx,xx,1); 
```

如何使用调用过程语句获取选定的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:43:24.920

除了其他建议之外，当您获得正好一行时，您还可以使用此解决方案。

```
DECLARE
    myvar1 mytable.mycolumn1%TYPE;
    myvar2 mytable.mycolumn2%TYPE;
BEGIN
    SELECT mycolumn1, mycolumn2
      INTO myvar1, myvar2
      FROM mytable
     WHERE …;
END; 
```

如果没有选定的行 ( `NO_DATA_FOUND`) 或有多个行( )，这将引发异常`TOO_MANY_ROWS`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:39:52.177

select 和 insert/update/delete 的区别在于您需要选择某个结构，可以是一个或多个变量，也可以是 rowtype 变量。

尽可能避免使用显式游标，以支持更快、更少冗长且不易出错的隐式游标。例如。

```
for cur_my_query in
  select column1,
         column2,
         ...
  from   ...
  where  ...
loop
  refer here to cur_my_query or my_query.column1 etc
end loop 
```

# mysql - phpMyAdmin 错误：“第 1 列的数据被截断”

> ID：13660406
> 
> 赞同：2
> 
> 时间：2012-12-01T14:30:44.017
> 
> 标签：mysql, csv

我正在尝试将 CSV 文件导入 phpMyAdmin，但我不明白“第 1 列的数据被截断”错误。由于字段 id 是自动递增的，所以我一开始忽略了它，但是我收到了关于字段计数的错误。然后我尝试在所有内容前面都放一个分号，认为 MySql 会看到一个 NULL 值并自动递增所有行。不是这样。相反，我收到一个错误，即“id”不是整数，因此我为所有行分配了 id。我还确保字符编码是一致的 - utf8。

这是表的结构：

```
Field       Type            Collation   Atributes   Null    Default Extra
id          int(6)                                  Não     None    AUTO_INCREMENT
data        date                                    Não     None
apto        int(3)                      UNSIGNED    Sim     NULL
descricao   varchar(100)    utf8_general_ci         Não     None
rec         float(11,2)                             Sim     NULL
pag         float(11,2)                             Sim     NULL 
```

这是给出错误的第一行（名称已更改以保护无辜者）：

```
1;2012-01-03;101;Fred - janeiro;90.00; 
```

我最后有一个分号，因为最后一个字段的值为 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:49:19.703

我知道这不是最优雅的解决方案，但只需使用 phpMyAdmin 对 CSV 说不。在我最喜欢的文本编辑器 (TextPad) 中使用宏和正则表达式，我将我的 CSV 文件转换为 SQL 文件，然后毫无问题地导入它。

# php - 构建 PHP 扩展并使用 call_user_function

> ID：13660407
> 
> 赞同：0
> 
> 时间：2012-12-01T14:30:44.787
> 
> 标签：php, c, php-internals

我编写了一个代码来构建一个扩展以通过`mysql_connect`.

我的代码已编译，但是当我想在 PHP 中使用我的函数时，它需要一个循环并且可能无法工作。这是我的 C++ 代码：

```
PHP_FUNCTION(ig_connect_to_database)
{
zval fname, *args[3], *retval = NULL;

ZVAL_STRING(&fname, "mysql_connect", 0);

MAKE_STD_ZVAL(args[0]);
ZVAL_STRING(args[0], "localhost", 1);

MAKE_STD_ZVAL(args[1]);
ZVAL_STRING(args[1], "root", 1);

MAKE_STD_ZVAL(args[2]);
ZVAL_STRING(args[2], "", 1);

if (call_user_function(EG(function_table), NULL, &fname, retval, 3, args TSRMLS_CC) == SUCCESS) {

    zval_ptr_dtor(&retval);
    zval_ptr_dtor(&args[1]);
    zval_ptr_dtor(&args[0]);
}

} 
```

* * *

任何机构都可以帮助我吗？

我只想返回我的资源连接。

我知道“retval”是我的资源，但我不知道如何将此资源返回到我的 php 代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:03:57.740

我不知道我是否回答我的问题是否属实，但我的问题已通过以下代码解决：

```
*return_value = retval;
zval_copy_ctor(return_value); 
```

# php - 简单的 php 联系表单，但在提交时希望保留 validate.check(this) 并添加 window.open

> ID：13660409
> 
> 赞同：1
> 
> 时间：2012-12-01T14:31:15.247
> 
> 标签：php, forms, contact

我有一个简单的 php 联系表格，我希望在新窗口中打开任何错误消息或感谢页面，同时保留 validate.check 位。

当前代码如下所示：

`<form name="contactform" method="post" action="contactformpost.php" onsubmit="return validate.check(this)">`

像这样编码是否正确：

`<form name="contactform" method="post" action="contactformpost.php" onsubmit="return validate.check(this); window.open('','my_form_target', 'width=300,height=200', true)">`

# spring - 多对多 - 在集合上延迟初始化失败

> ID：13660412
> 
> 赞同：0
> 
> 时间：2012-12-01T14:32:07.240
> 
> 标签：spring, hibernate, jakarta-ee, web-applications

> **可能重复：**
> [Spring，Hibernate - 多对多 - LazyInitializationException](https://stackoverflow.com/questions/5095559/spring-hibernate-many-to-many-lazyinitializationexception)

我面临一个非常奇怪的问题，我无法理解。有两个实体“用户”和“联系人”。异常在 ProjectController.java 中被抛出`user.getContactSet().add(contact);`

我正在尝试在“用户”和“联系人”之间建立多对多关系

用户.java

```
 public class User {
    private Integer userID;
    private String userLoginEmail;
    private String password;
    private String userFirstName;
    .
    . 
```

联系方式.java

```
 public class Contact {
   private Integer contactID;
   private String givenName;
   private String familyName;
   private String telephoneNumber;
   private String cellNumber;
   .
   . 
```

用户.hbm.xml

```
<hibernate-mapping package="com.smallworks.model" schema="smallworksdb">

<class name="User" table="USERACCOUNT">
    <id column="USER_ID" length="500" name="userID">
        <generator class="increment" />
    </id>
    <property column="USER_LOGIN_EMAIL" generated="never" lazy="false" length="100" name="userLoginEmail" />
    <property column="USER_PASSWORD" generated="never" lazy="false" length="50" name="password" />
    <property column="ACTIVATION_CODE" generated="never" lazy="false" length="100" name="activationCode" />
    <property column="ACCOUNT_ACTIVATED" generated="never" lazy="false" length="1" name="accountActivated" />

    <set name="contactSet" table="USER_CONTACT" 
        inverse="false" lazy="true" fetch="select" cascade="all">
        <key column="USER_ID"/>
        <many-to-many column="CONTACT_ID" class="Contact"/>
    </set>
</class> 
```

联系人.hbm.xml

```
<hibernate-mapping package="com.smallworks.model" schema="smallworksdb">
<class name="Contact" table="CONTACT">
    <id column="CONTACT_ID" length="500" name="contactID">
        <generator class="increment" />
    </id>
    <property column="GIVEN_NAME" generated="never" lazy="false" length="100" name="givenName" />
    <property column="FAMILY_NAME" generated="never" lazy="false" length="100" name="familyName" />
    <property column="TELEPHONE_NUMBER" generated="never" lazy="false" length="100" name="telephoneNumber" />
    <property column="CELL_NUMBER" generated="never" lazy="false" length="100" name="cellNumber" />
    <property column="EMAIL" generated="never" lazy="false" length="100" name="email" />
    <property column="STREET_NAME" generated="never" lazy="false" length="100" name="streetName" />
    <property column="CITY" generated="never" lazy="false" length="100" name="city" />
    <property column="STREET_ADDRESS" generated="never" lazy="false" length="100" name="streetAddress" />
    <property column="ADDRESS_LOCALITY" generated="never" lazy="false" length="100" name="addressLocality" />
    <property column="ADDRESS_REGION" generated="never" lazy="false" length="100" name="addressRegion" />
    <property column="POSTAL_CODE" generated="never" lazy="false" length="100" name="postalCode" />
    <property column="COMMENT" generated="never" lazy="false" length="100" name="comment" />

    <!-- many to many mapping with the User via User_Contact table -->
    <set name="userSet" table="USER_CONTACT" 
        inverse="true" lazy="true" fetch="select">
        <key column="USER_ID" />
        <many-to-many column="CONTACT_ID" class="Contact" />
    </set>
</class> 
```

项目控制器.java

```
@RequestMapping(value = { "/project/addContact.do" }, method = RequestMethod.POST)
@ResponseBody
@JsonIgnore
public  String addContact(@ModelAttribute("UserContactAction") ContactAction contactAction, BindingResult result, HttpServletRequest request, Model model) {
    User user=(User) request.getSession().getAttribute("user");
    if(contactAction!=null){
        if(contactAction.getContact()!=null){
            Contact contact=contactAction.getContact();
            if(contact.getUserSet()==null){
                contact.setUserSet(new HashSet<User>());
            }
            user.getContactSet().add(contact);  //ERROR Gets thrown here
        }

    }else{
        System.out.println("userContactAction is NULL");
    } 
```

例外：

```
 01:13:26.953 [http-bio-8080-exec-9] DEBUG o.s.w.b.a.s.HandlerMethodInvoker - Invoking request handler method: public java.lang.String com.smallworks.controller.ProjectController.addContact(com.smallworks.model.view.ContactAction,org.springframework.validation.BindingResult,javax.servlet.http.HttpServletRequest,org.springframework.ui.Model)
01:13:26.961 [http-bio-8080-exec-9] ERROR o.h.LazyInitializationException - failed to lazily initialize a collection of role: com.smallworks.model.User.contactSet, no session or session was closed
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.smallworks.model.User.contactSet, no session or session was closed
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:380) [hibernate-core-3.3.1.GA.jar:3.3.1.GA]
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:372) [hibernate-core-3.3.1.GA.jar:3.3.1.GA]
    at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:365) [hibernate-core-3.3.1.GA.jar:3.3.1.GA]
    at org.hibernate.collection.PersistentSet.add(PersistentSet.java:212) [hibernate-core-3.3.1.GA.jar:3.3.1.GA]
    at com.smallworks.controller.ProjectController.addContact(ProjectController.java:96) [ProjectController.class:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_33]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [na:1.6.0_33]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [na:1.6.0_33]
    at java.lang.reflect.Method.invoke(Unknown Source) [na:1.6.0_33]
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647) [servlet-api.jar:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.33]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.33]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) [catalina.jar:7.0.33]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) [catalina.jar:7.0.33]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.33]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) [catalina.jar:7.0.33]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) [catalina.jar:7.0.33] 
```

我很困惑，为什么会出现这个异常，任何形式的帮助都将不胜感激。我还尝试将用户和联系人带走，而是尝试在员工和会议之间做多对多（只是创建了一些独立的对象），然后一切正常。请帮忙...

# android - 左侧居中对齐按钮的文本

> ID：13660415
> 
> 赞同：0
> 
> 时间：2012-12-01T14:32:22.680
> 
> 标签：android, button, text-align

即使我使重心文本仍然在左侧。我认为必须有一种方法来更改文本对齐（我也尝试过 android:textAlignment="center" ）

我在下面包含了屏幕截图，但没有足够的声誉来展示它。

```
<!-- language: lang-xml-->    
<Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="50"
                android:gravity="center"
                android:text="Button" /> 
```

也试图让它 match_parent 仍然是同样的问题。

编辑整个 XML

```
<!-- language: lang-xml-->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etCommands"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Type a Command"
        android:password="true" >
    </EditText>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="100" >

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Button" />
    </LinearLayout>

    <TextView
        android:id="@+id/tvResults"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="invalid" />

</LinearLayout> 
```

[截屏](http://i.imgur.com/iLsMA.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T12:11:36.893

我也有这个问题。只需重新启动您的 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:44:51.730

将 android:layout_gravity="center" 添加到按钮的布局并具有宽度 wrap_content 应该可以修复它。

# scala - 如何分离 SORM 实例？

> ID：13660426
> 
> 赞同：0
> 
> 时间：2012-12-01T14:34:14.273
> 
> 标签：scala, sorm

使用的数据库的定义是一个Instance对象，对吧？我怎样才能使它“可附加”？

为什么？例如，在测试中更改使用的数据库会很好。我尝试了一些隐式定义，但没有成功......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:00:33.830

我的解决方案：

```
case class Artist ( name : String, genre : Genre )

object Artist {
  def save(name: String, genre: Genre)(implicit Db: Instance) {
    ...
    Db.save(...)

  }
} 
```

然后当我需要它时，我定义隐式实例用作数据库。

# c++ - 给定网格和单词的填字游戏

> ID：13660427
> 
> 赞同：-1
> 
> 时间：2012-12-01T14:34:37.470
> 
> 标签：c++, algorithm, crossword

例如，我有一个填字游戏网格

```
+-----+
|  *  |
|     |
+-----+ 
```

和单词列表

```
a
ababa
bb
cc
ba
bb
ca
cb 
```

每个词都必须使用。目标是找到如何解决这个填字游戏的所有变体，在这种情况下有两个变体 -

```
bb*cc
ababa 
```

和

```
cc*bb
ababa 
```

一些更复杂的填字游戏看起来像这样，例如：

```
+-----+
|   * |
|     |
|    *|
|   * |
|  * *|
|  *  |
|     |
+-----+ 
```

带有20个单词等的列表

我试图创建算法来解决这类问题，但没有成功。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:12:07.823

首先请注意，即使使用给定字典确定填字游戏是否“可解”也是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard) ¹，因此即使确定是否有 0 个或更多解也不能多项式完成（[除非 P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)）。

因此，另一种方法是使用[详尽的搜索](http://en.wikipedia.org/wiki/Brute-force_search)解决方案 - 只需尝试“放置”单词的所有可能性，然后验证该解决方案是否有效。

**伪代码：**

```
solve(words,grid):
   if words is empty:
       if grid.isValidSolution():
          print grid as a possible solution
          return
   for each word in words:
       candidate<- grid.fillFirstSpace(word)
       solve(words\{word},candidate) 
```

* * *

(1) 参考：[P是否等于NP](http://people.cs.uct.ac.za/~rbkmax001/project.pdf)第3.3节

# java - 当我通过 RDP 连接或更改分辨率时，为什么会出现 java.lang.NullPointerException？

> ID：13660429
> 
> 赞同：1
> 
> 时间：2012-12-01T14:34:51.460
> 
> 标签：java, windows, console, console-application

我在远程远程计算机上的 Windows 下运行控制台应用程序。

当我通过 RDP（远程桌面协议）登录远程计算机时，似乎经常出现以下错误。当我调整桌面大小或 nVidia 视频驱动程序崩溃（这种情况很少见）时，它似乎也发生在我的本地计算机上。

```
java.lang.NullPointerException
at twslaunch.jtscomponents.effect.i.c(i.java:172)
at jtscomponents.plaf.ze.run(ze.java:178)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

该问题出现在 Windows 7、Windows Server 2008 以及 Java v6 和 Java v7 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:34:51.460

以下答案完全解决了这个问题 - 现在，当我通过 RDP 登录时，`java.lang.NullPointerException`消息完全消失了。

请参阅[当我在 MATLAB 运行时通过远程桌面登录计算机时为什么会收到 Java 异常？](http://www.mathworks.co.uk/support/solutions/en/data/1-A2R1E3/index.html?product=SL&solution=1-A2R1E3)

引用：

> 一种解决方案基于这样一个事实，即对于较慢的连接，登录时会更改主题。要解决此问题，您需要与远程计算机建立快速连接（10 Mbps 或更高，低延迟）。两台计算机之间的多个显示器设置和剧烈的分辨率变化使这个问题复杂化。这些案例不在此赘述。
> 
> 假设满足要求，您可以在连接前将远程桌面客户端的“体验”选项卡下的连接速度设置更改为“局域网（10 Mbps 或更高）”。

![在此处输入图像描述](../Images/ec2a5186c729c8cc6be0b2d6076378eb.png)

> 注意：如果上述情况导致使用远程桌面时出现不良体验，您可以恢复到远程桌面中的旧连接速度设置，并确保两个操作系统的外观设置为相同。这可以通过从控制面板导航到显示然后主题来更改。

# php - PHP strtotime() 将日期设置为默认值

> ID：13660432
> 
> 赞同：1
> 
> 时间：2012-12-01T14:35:12.417
> 
> 标签：php, excel, date, format, strtotime

我有一个脚本，它从 excel 表中读取值并将它们插入到 sql 表中。我的问题是当脚本读取某些日期字段时，它将它们设置为默认值：`1970-01-01 01:00:00`

我注意到当遇到“日”大于 12 的日期时会发生这种情况：`13/05/2012 18:52:33`(dd-mm-yyyy hh-mm-ss)

我认为这可能是由于脚本认为这是月份字段（即美国格式）并将其视为无效值，因此我将默认时区设置为我自己的，希望它可以解决问题，但没有任何区别.`date_default_timezone_set('Europe/Dublin');`

这是我的代码正在执行的示例：

Excel 字段值：

`01/05/2012 18:32:45`

脚本：

```
$start_time  = $data->val($x,5);
echo $start_time = date("Y-m-d H:i:s", strtotime($start_time)); 
```

输出：

```
2012-01-05 18:32:45 
```

这是我正在寻找的确切格式（除了日期和月份字段被切换的事实，即美国日期格式），但它不适用于我上面提到的日期类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:40:21.403

从注释开始[`strtotime()`](http://php.net/manual/en/function.strtotime.php)，该函数假定由`/`are`m/d/y`分隔的日期和由 a 分隔的日期`-`是`d-m-y`。

您可以替换日期字符串中的斜杠，或者如果您使用的是 5.3 或更高版本，请使用[`date_parse_from_format()`](http://php.net/manual/en/function.date-parse-from-format.php)并直接提供格式。

正如[jaudette 所提到的，](https://stackoverflow.com/a/13660476/45531)您还可以使用`DateTime::createFromFormat()`, 并获取一个对象而不是时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:40:30.440

使用`DateTime`对象可能是您的解决方案。你可以做

```
$dt = DateTime::createFromFormat("d/m/Y H:i:s", $data->val($x,5););
echo $dt->format('Y-m-d H:i:s'); 
```

并选择您想要的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:07:05.133

这应该为您完成工作：

```
// example datetime
$orig_date = '13/05/2012 18:52:33';
// split date & time into array
$date_time = preg_split('/\s+/', $orig_date);
// date in array formated as ddmmyyyy
list($d, $m, $y) = preg_split('/\//', $date_time[0]);
// date re-formated as yyyy-mm-dd for MySQL
$new_date = sprintf('%4d-%02d-%02d', $y, $m, $d);
// And add time on again with a space for MySQL datetime format
echo $new_date.' '.$date_time[1]; 
```

# coq - 如何在coq中合并两棵树？

> ID：13660433
> 
> 赞同：1
> 
> 时间：2012-12-01T14:35:24.160
> 
> 标签：coq

这里提到的树有这样的性质，即在所有子树（包括整棵树）上，根的内容具有最高优先级；但没有在兄弟节点上指定顺序。

树的定义如下：

```
Inductive tree : Set :=
| nil : tree
| cons : tree->nat->tree->tree. 
```

我想使用 coq 合并两棵树。假设两棵树是 (cons l1 n1 r1) 和 (cons l2 n2 r2)，如果 n1 <= n2 则我将 l1 和 r1 合并为子树并创建新树 ((merge l1 r1) n1 (cons l2 n2 r2) ）。当 n2 <= n1 时可以使用类似的处理。

下面是合并的定义：

```
Fixpoint merge (t1 t2 : tree) : tree.
  destruct t1 as [ | l1 n1 r1].
  apply t2.
  destruct t2 as [ | l2 n2 r2].
    apply (cons l1 n1 r1).
    destruct (le_le_dec n1 n2).
      apply (cons (merge l1 r1) n1 (cons l2 n2 r2)).
      apply (cons (cons l1 n1 r1) n2 (merge l2 r2)).
Defined. 
```

问题是 coq 认为上面的定义是错误的。但实际上合并功能最终可以终止。

我知道 coq 需要一个递减的定点参数。但是如何处理具有两个递减参数的函数呢？

引理 le_le_dec 只是为案例分析定义的：

```
Lemma le_le_dec : forall x y, {x <= y}+{y <= x}.
Proof.
  intros x y.
  destruct (nat_delta x y) as [xy | yx].
    destruct xy as [n e]. left. apply le_delta. exists n. assumption.
    destruct yx as [n e]. right. apply le_delta. exists n. assumption.
Qed. 
```

引理 le_delta 和 nat_delta 如下：

```
Lemma le_delta: forall n m, n <= m <-> exists x, (x + n = m).
Proof.
  intros n m.
  split.
  intros e. induction e as [ |m les IHe].
    exists 0\. simpl. reflexivity.
    destruct IHe as [x  e]. exists (S x). simpl. rewrite e. reflexivity.
  intros e. destruct e as [x e]. revert e. revert m.
  induction x as [ | x IHx].
    intros m e. simpl in e. rewrite e. apply le_n.
    intros m e. destruct m as [ | m].
      discriminate e.
      apply (le_S n m).
      apply (IHx m).
      inversion e. reflexivity.
Qed.

Lemma nat_delta : forall x y, {n | n+x=y} + {n | n+y=x}.
Proof.
  intros x y. induction x as [ | x IHx].
    left. exists y. simpl. rewrite <- (plus_n_O y). reflexivity.
    destruct IHx as [xy | yx].
    destruct xy as [n e]. destruct n as [ | n].
      right. exists (S 0). rewrite <- e. simpl. reflexivity.
      left. exists n. rewrite <- plus_n_Sm. rewrite <- e. simpl. reflexivity.
    destruct yx as [n e].    
    right. exists (S n). simpl. rewrite e. reflexivity.
Qed. 
```

固定点的错误消息是：

```
Error:
Recursive definition of merge is ill-formed.
In environment
merge : tree -> tree -> tree
t1 : tree
t2 : tree
l1 : tree
n1 : nat
r1 : tree
l2 : tree
n2 : nat
r2 : tree
l : n2 <= n1
Recursive call to merge has principal argument equal to "l2" instead of
one of the following variables: "l1" "r1".
Recursive definition is:
"fun t1 t2 : tree =>
 match t1 with
| nil => t2
| cons l1 n1 r1 =>
     match t2 with
     | nil => cons l1 n1 r1
     | cons l2 n2 r2 =>
         let s := le_le_dec n1 n2 in
         if s
         then cons (merge l1 r1) n1 (cons l2 n2 r2)
         else cons (cons l1 n1 r1) n2 (merge l2 r2)
     end
 end". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:33:47.140

您必须在任何递归调用上使用相同的唯一递减参数。尝试这个：

```
Fixpoint merge (t1 t2 : tree) : tree.
  destruct t1 as [ | l1 n1 r1].
  apply t2.
  destruct t2 as [ | l2 n2 r2].
    apply (cons l1 n1 r1).
    destruct (le_le_dec n1 n2).
      apply (cons (cons l2 n2 r2) n1 (merge l1 r1)).
      apply (cons (merge l1 r1) n2 (cons l2 n1 r2)).
Defined. 
```

我不确定这种方式是否保留了您程序的属性，但如果您不确定，您可以尝试证明它们是。

如果不是证明你的函数存在，你只是简单地编写了它，你可以使用`Function`而不是`Fixpoint`证明你的函数终止而不改变它的结构。

此外，我在尝试提取`le_le_dec`. 我认为那是因为`le_le_dec`更多的是在逻辑方面。为什么不比较`n1`and`n2`与返回 a 的函数`bool`并对结果进行案例分析？

你也可以试试这个：

```
Fixpoint meas (t1: tree): nat :=
  match t1 with
  | nil => O
  | cons t2 _ t3 => S ((meas t2) + (meas t3))
  end.

Fixpoint less_eq (n1 n2: nat): bool :=
  match n1, n2 with
  | O, O => true
  | O, S _ => true
  | S _, O => false
  | S n3, S n4 => less_eq n3 n4
  end.

Program Fixpoint merge (t1 t2: tree) {measure ((meas t1) + (meas t2))}: tree :=
  match t1 with
  | nil => t2
  | cons l1 n1 r1 =>
    match t2 with
    | nil => cons l1 n1 r1
    | cons l2 n2 r2 =>
      match less_eq n1 n2 with
      | false => cons (cons l1 n1 r1) n2 (merge l2 r2)
      | true => cons (merge l1 r1) n1 (cons l2 n2 r2)
      end
    end
  end. 
```

然后你需要输入`Next Obligation.`，并证明一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:00:39.727

您可能需要考虑将第一棵树中的元素一个一个地插入到第二棵树中。因此，您可以使用两个递归函数合并两棵树。

# css - Twitter Bootstrap + JSP (Spring MVC) - 样式不适用

> ID：13660437
> 
> 赞同：1
> 
> 时间：2012-12-01T14:35:55.317
> 
> 标签：css, jsp, spring-mvc, twitter-bootstrap

不过，我对整个样式设计真的很陌生，但决定尝试 Twitter Bootstrap 以使我的 UI 在原型设计阶段看起来不那么糟糕。在我看来，我做了所有我必须做的事情，但是，页面一直显示为纯 html。我将非常感谢提供的任何帮助。这是我正在谈论的页面：http: [//pastebin.com/DbiJHLyc](http://pastebin.com/DbiJHLyc)。引导文件夹位于 /project_name/src/main/webapp/。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:43:31.410

您必须了解，JSP 的位置和 CSS 文件在源文件夹中的位置并不重要。重要的是用于在浏览器中加载 HTML 页面的 URL，以及可以使用浏览器访问 CSS 文件的 URL。

如果页面的 URL 是`http://localhost/myApp/some/path.html`，而 css 所在的 URL 是`http://localhost/myApp/css/some/other/path/bootstrap.css`，那么页面应该包含

```
<link href="../css/some/other/path/bootstrap.css" rel="stylesheet"> 
```

或者，更好的是，使用绝对路径，如

```
<link href="/myApp/css/some/other/path/bootstrap.css" rel="stylesheet"> 
```

# php - 如何重组此代码，使其仅显示一列的结果？

> ID：13660438
> 
> 赞同：1
> 
> 时间：2012-12-01T14:35:55.330
> 
> 标签：php, mysql, arrays

我从一个网站获得了这段代码，我正在尝试根据我的测试脚本来定制它。我想显示 company_name 而不是 zip、city、state。我该如何修改这个？

PHP：

```
 $rs = mysql_query('select company_name from names_of_companies where 
 company_name like "'. mysql_real_escape_string($_REQUEST['term']) .'%" 
 order by company_name asc limit 0,10', $dblink);

 $data = array();
 if ( $rs && mysql_num_rows($rs) )
 {
 while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
 {

 //This is the part where instead of displaying zip, city, state 
 I only want company_name, how can i do that?

 $data[] = array(
 'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] ,
 'value' => $row['zip']
 );
 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:39:43.923

我认为这就是您想要在循环中拥有的内容：

```
//I only want company_name, how can i do that?

$data[] = array('label' => 'Company_name', 'value'=> $row['company_name'] ); 
```

但是，如果您很难弄清楚*这一点*，那么您将很难做正确的事情……我建议您退后一步，熟悉[PHP](http://uk.php.net/docs.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:38:48.533

```
while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
{
   ...
   'company_name' => $row['company_name']; // this is what you want
   ... 
```

**请注意：**[**`mysql_fetch_array`**](http://php.net/manual/en/function.mysql-fetch-array.php)从手册中引用：

> 不鼓励使用此扩展程序。相反， 应该使用[**MySQLi**](http://www.php.net/manual/en/book.mysqli.php)或[**PDO_MySQL扩展。**](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅 MySQL：[选择 API 指南](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> *   [mysqli_fetch_array()](http://www.php.net/manual/en/mysqli-result.fetch-array.php)。
>     
>     
> *   [PDOStatement::fetch()](http://www.php.net/manual/en/pdostatement.fetch.php)。

# javascript - MVC3 - 允许将视图呈现为 html 或 JS

> ID：13660439
> 
> 赞同：1
> 
> 时间：2012-12-01T14:36:04.690
> 
> 标签：javascript, asp.net-mvc-3, views, render

我想构建一个允许在内部呈现视图的 API：

1.  iframe（常规视图）。
2.  或者作为 JS (document.write)。

有时开发人员会使用 Iframe，有时他会使用脚本。

所以有一次你可以调用 iframe：

```
//will render <html><body><div>I am a div</div></body></html>
<iframe src="/page/mysqldata?mod=iframe"></iframe> 
```

有一次我想把 html 作为 JS

```
//will render document.write('<div>I am a div</div>');
<script  src="/page/mysqldata?mod=js"></script> 
```

你知道如何设置它的教程吗？
顺便说一句，我的观点很复杂，有很多`@Html`带有`RenderSection`s 和调用的`@Html.Partial` 调用。

底线是我想为 html 提供 2 种不同的方法，iframe 和脚本，但我想保留一个视图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:17:45.883

您可以做的是`RenderPartialViewToString()`从[这个 SO answer](https://stackoverflow.com/a/4692447/1373170)中获取 Alex 的实现，它可以让您直接在控制器内将视图呈现为字符串。

您可以创建一个视图和一个部分。将所有内容绑定到模型的部分，视图可以添加`<html><body>`...等。使用 Razor 创建所有视图，并根据需要使它们变得复杂，它们只是常规视图。

所以现在你的控制器应该有两个动作：

1.  对于 iframe 中的 html 内容：只渲染视图，所以这是一个常规的 MVC 操作
2.  对于 JS 内容：调用 `RenderPartialViewToString`，而不是输出 html，执行以下操作：

    ```
    public JavaScriptResult AsJavascript()
    {
        var theModel = //create the model
        var content = // call to RenderPartialViewToString(this, "PartialViewName", theModel);
        var script = String.Format("document.write('{0}')",
               content.Replace("'", "\'").Replace(Environment.NewLine, ""));
        return this.JavaScript(script);
    } 
    ```

过去我不得不做类似的事情，但是我使用[jquery](http://jquery.com/)而不是直接写入文档，所以代码更简洁，通过创建一个`DIV`，用 设置内容`div.html(content)`，然后将该 div 附加到页面的正文. 但结果最终应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:18:41.563

我希望我在这里没有遗漏任何东西，但是您的控制器操作应如下所示：

```
public ActionResult MySqlData(string mod)
{
    if (string.Compare("js", mod, StringComparison.OrdinalIgnoreCase) == 0)
        return JavaScript("path_to_the_script");
    else if (string.Compare("iframe", mod, StringComparison.OrdinalIgnoreCase) == 0)
        return View("your_view_details_here");
    return HttpNotFound("explain why this action failed");
} 
```

# css - 放置在透明 div 中的 Youtube 视频也是透明的

> ID：13660444
> 
> 赞同：4
> 
> 时间：2012-12-01T14:36:21.913
> 
> 标签：css, youtube, opacity

我将 youtube iframe 放置在不透明度为 0.8 的内容框中

```
opacity: .8;
filter: alpha(opacity=80); 
```

但是视频也显示为透明的，因为您可以通过它们看到网站的背景。我已经尝试过以各种可能的方式更改 wmode ，但这没有任何区别。Firefox 不会发生这种情况，但 Chrome 会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:58:43.693

当你`opacity`在一个元素上使用 CSS 属性时，它的所有子元素都会继承它，你不需要做任何改变......

...除了您可以使用透明 png 背景图像，或使用`rgba()`或`hsla()`颜色值。

如此透明的黑色 rgba 将是`background: rgba(0, 0, 0, .5);`和 hsla`background-color: hsla(0, 0%, 0%, .5);`

这些属性不是继承的，因此不会影响孩子，无论它们是什么:)

在这里你可以看到三个不同的 CSS 规则（不是透明 png）在使用中。注意最后两个的子元素不受影响:)

[http://jsfiddle.net/SJK2H/](http://jsfiddle.net/SJK2H/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:50:00.237

实际上，这`opacity`就是应该的工作方式，它设置元素及其所有内容的不透明度，而不仅仅是背景。如果你只想要一个半透明的背景，你应该使用透明 png 之类的东西作为`background-image`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:19:53.070

我建议使用半透明的 .png 作为背景而不是不透明度。也可以使用 rgba 作为背景色，但在 IE 中没有实现。IE 8 及以下版本不支持 Rgba（对于 IE 9 不确定），因此可以使用过滤器来实现所需的效果。但它有时会以某种方式使字体看起来很糟糕（删除抗锯齿或类似的东西）。

另一方面，1*1px 的 png 非常小，可以内置到您的 css 文件中。

# php - 与 if(isset($_POST("submit"))) 一起使用时，表单不起作用

> ID：13660448
> 
> 赞同：-3
> 
> 时间：2012-12-01T14:36:45.237
> 
> 标签：php

`if(isset($_POST["submit"]))` 与请帮助一起使用时，我的表单不起作用

```
<form name="form"  onsubmit="return chkEntry()"  action="#" enctype="multipart/form-data"  method="post">
<fieldset>          
    <label for="email">Email:</label>
    <input type="email" id="email" name="ema" />            
    <label for="message">Message:</label>
    <textarea id="message" name="comment"></textarea>
    <input type="text"  style="visibility:hidden" name="tut" value="<?php echo $tu?> "/>
    <input type="text"  style="visibility:hidden" name="file" value="<?php echo $fi?> "/>
    <input type="text"  style="visibility:hidden" name="file" value="<?php echo $fi?> "/>
    <input type="submit" name="enter" value="Submit" align="right"/></p> </div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:38:49.030

`$_POST`是一个**数组**，而不是函数名。所以应该是`$_POST[KEY]`。作为键，您使用 input's `name`，而不是`value`您尝试过的。更不用说你应该正确输入它 - 你可能想要`submit`但以`sumit`. `enter`但无论如何它应该是;)。所以如果你想检查提交按钮是否被点击，那么你应该这样做

```
if( isset( $_POST['enter'] ) ) {
   // form submitted
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:39:25.357

您的提交按钮被命名`submit`为您`sunmit`要发布的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:40:12.533

现在，`$_POST("sunmit")`顺便说一句，没有任何相关联的是错误的语法。如果您有一个名为 的元素`sunmit`，您将使用 访问它`$_POST['sunmit']`。

尝试`print_r($_POST)`查看从表单传递到 PHP 文件的所有变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T04:23:30.003

你没有 sunmit 按钮，所以这个按钮不会工作'$_POST("sunmit")'。

. 请使用以下方式获取要提交的表格：

if( isset( $_POST['enter'] ) ) {

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T14:59:53.983

****输入****而不是使用**`if(isset($_POST("sunmit")))` **use** `if(isset($_POST("enter")))` 作为提交按钮的名称**

# android - 720*1280设备布局

> ID：13660452
> 
> 赞同：1
> 
> 时间：2012-12-01T14:38:07.980
> 
> 标签：android, xml

我搜索了一个完全相同的主题/问题，但没有找到。我的问题是 720*1280 布局（Galaxy Nexus）和 480*800 布局（Nexus S）使用相同的布局。我已经创建了`layout`, `layout-large`, `layout-small`,`layout-xlarge`文件夹/布局，现在我支持更多的设备分辨率，但是，我遇到了 720*1280 和 480*854 、480*800 分辨率的缩放问题。我的问题是我可以为特定分辨率制作特定布局吗？我总是使用左/右边距，它可以用于特定的分辨率而不是其他分辨率。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:49:28.317

请参阅[本节中的表格](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)。所以你可以指定屏幕大小，你可以使用：`sw<N>dp`或`w<N>dp`或/和`h<N>dp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:55:36.477

您可以尝试使用更多文字选择器，而不是使用屏幕大小类，即：

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)
res/layout-sw480dp/main_activity.xml   # For screen width 480 dp like Nexus S
res/layout-sw720dp/main_activity.xml   # 720dp wide and bigger 
```

请参阅此开发人员的文章：[声明平板电脑布局](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:43:01.317

请参阅下面的链接

[三星 Galaxy Nexus 布局/可绘制结构？](https://stackoverflow.com/questions/9212623/samsung-galaxy-nexus-layout-drawable-structure)

[Galaxy Tab 应该支持哪些 android 布局和可绘制资源进行开发？](https://stackoverflow.com/questions/8322277/which-android-layout-and-drawable-resources-should-galaxy-tab-support-for-develo)

如果您希望您的应用程序支持最大的设备，请尝试制作适合所有设备的总体布局，**可能会有**一些小的权衡，但可以接受。您可以尽可能使用相对布局来制作这样的布局，如果出现无法处理多设备支持的情况，请尝试在运行时使用代码处理它，但以这样的方式，它可以在所有设备上运行（例如考虑百分比而不是固定高度或宽度等）

# ruby - Ruby 中的必应搜索 API

> ID：13660455
> 
> 赞同：5
> 
> 时间：2012-12-01T14:38:46.480
> 
> 标签：ruby, ruby-on-rails-3, bing-api, azure-marketplace

我阅读了[“Bing Search API - 快速入门”](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!112&app=Word)，但我不知道如何在 Ruby 中发出这个 http 请求（[疲倦](https://github.com/mwunsch/weary)）

如何在 Ruby 中翻译“Stream_context_create()”？这是什么意思？

**[“必应搜索 API - 快速入门”](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!112&app=Word)** ![在此处输入图像描述](../Images/2cb346ceaf7327dab06559a97eda0632.png)

我想使用 Ruby sdk，但我发现那些已被弃用的 ex (Rbing) [https://github.com/mikedemers/rbing](https://github.com/mikedemers/rbing) 你知道 Bing 搜索 API 的最新包装器（仅限 Web 的结果）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T02:37:09.083

好吧，经过一个小时的挫折，我想出了一个办法。这段代码很糟糕，因为它是我工作的第一个版本。基本上，忽略关于 base64 编码的所有内容，因为它给了我一个错误，即只支持 oAuth 和基本身份验证。原来微软的文档是错误的，你应该只使用你的帐户密钥作为请求中的密码，而不是编码字符串。

```
require 'net/http'

accountKey = 'KEY'

url = 'https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/v1/Web?Query=%27xbox%27&$top=50&$format=json'

uri = URI(url)

req = Net::HTTP::Get.new(uri.request_uri)
req.basic_auth '', accountKey

res = Net::HTTP.start(uri.hostname, uri.port, :use_ssl => uri.scheme == 'https'){|http|
  http.request(req)
}
puts res.body 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T04:06:54.250

试试[bing-search](https://rubygems.org/gems/bing-search) gem：

```
require 'bing-search'

BingSearch.account_key = <your key>
BingSearch.web_only = true
results = BingSearch.web('stack overflow') 
```

文档在[这里](http://www.rubydoc.info/gems/bing-search)，源代码在[GitHub 上](https://github.com/jonahb/bing-search)。（免责声明：我写了 bing-search gem。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T17:52:56.613

哇，微软文档啊，这么简单的东西，我花了 30 分钟在网上搜寻如何使用它。无论如何，这是使用[RestClient](https://github.com/archiloque/rest-client)对 Chris Bui 的回答的另一种看法：

```
class BingSearch
    def self.for(account_key, query)
        puts RestClient.get("https://:#{account_key}@api.datamarket.azure.com/Bing/SearchWeb/v1/Web?Query='#{CGI::escape(query)}'&$format=json")
    end
end 
```

# wait - 如何在 AHK 中编写一个粘贴文本的脚本，等待一分钟，然后再次粘贴？

> ID：13660459
> 
> 赞同：2
> 
> 时间：2012-12-01T14:38:52.960
> 
> 标签：wait, autohotkey, repeat

如何在 AHK 中编写一个粘贴文本的脚本，等待一分钟，然后再次粘贴？

AHK=AutoHotKey

不是为了垃圾邮件，而是为了我自己的一个网络项目。

我应该指定：脚本需要粘贴文本，按回车键，等待一分钟然后再次粘贴。如果它不按回车，它就不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:03:30.177

对于这样的事情，SetTimer 比 sleep 更好。

```
#Persistent

; Put this wherever you want, like inside a hotkey
; Either set the clipboard to some text, or just remove this
; to use what's already there
Clipboard = This is some text to paste
SendInput ^v{Enter}
last_text := Clipboard
SetTimer, RePaste, 60000
return

RePaste:
; The clipboard can change in a minute, right?
; so we use the text we had before
tmp := clipboard
Clipboard := last_text
SendInput ^v{Enter}

; And restore what the user had
Clipboard := tmp
return

; Put this somewhere, like in a hotkey, to turn off the timer
SetTimer, RePaste, off 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:55:15.363

```
#NoEnv
Loop
{
SendInput, ^v
Sleep, 60000
}
Capslock::ExitApp 
```

按大写锁定停止粘贴。对于代码中定义的文本：

```
#NoEnv
Loop
{
SendInput, This is the text I want to send{Enter}
Sleep, 60000
}
Capslock::ExitApp 
```

# java - 线程转储之间有什么区别

> ID：13660462
> 
> 赞同：1
> 
> 时间：2012-12-01T14:39:24.077
> 
> 标签：java, thread-safety, thread-dump

ctrl+break 和 java 程序进行的线程转储有什么区别？
我正在使用下面的代码片段来获取线程转储

映射 st = Thread.getAllStackTraces();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:46:41.303

`Thread.getAllStackTraces`不包括有关线程状态或它们持有的锁或它们等待的锁的信息。您需要从其他地方获取此信息（有`ThreadMXBean`这个）。

# iphone - 重置应用程序 iPhone 应用程序

> ID：13660464
> 
> 赞同：0
> 
> 时间：2012-12-01T14:39:28.283
> 
> 标签：iphone

有没有办法重置应用程序，使其在不退出应用程序的情况下像尚未打开一样运行？

我正在制作一个游戏，当你完成所有关卡并返回主菜单并重新开始时，它认为你已经完成了所有关卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:58:29.090

确切的细节取决于应用程序，但基本上，这就是为什么将“MVC”（数据模型）中的“M”作为单独的层是一个好主意的原因。您编写了一个将整个模型设置为起始状态的方法，并在您想要重置所有内容时调用它。

完成后，返回菜单（“返回”的方式取决于您添加关卡的方式），这是一个全新的开始。

# php - PHP - 调用私有方法进行测试，正确的设计是什么？

> ID：13660465
> 
> 赞同：0
> 
> 时间：2012-12-01T14:39:32.243
> 
> 标签：php, unit-testing, private-methods

> **可能重复：**
> [PhpUnit 私有方法测试](https://stackoverflow.com/questions/5937845/phpunit-private-method-testing)

在我的单元测试中，我需要调用一个私有方法来将我的装置设置为给定状态。另一方面，我宁愿不公开这种方法。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:42:36.173

为什么不保护这些函数并创建一个派生类来进行测试呢？该类可以具有用于测试的公共函数，可以初始化各种变量等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:47:17.903

单元测试私有方法通常是一个坏主意，但如果你真的想要，反射是要走的路。这应该这样做：

```
$reflection_class = new ReflectionClass($object_under_test);
$method = $reflection_class->getMethod('nameOfMethod');
$method->setAccessible(true);
$method->invoke($object_under_test, $param); 
```

高温高压

# c# - 加载和保存列表

> ID：13660473
> 
> 赞同：0
> 
> 时间：2012-12-01T14:40:14.347
> 
> 标签：c#, xml, list

我有一个如下定义的列表，该列表是从`GridView`. 一切都好。

将此列表保存/加载到文件（XML 或其他方式都可以）的最佳方法是什么？

注意：将来，我将对文件进行加密。

**C# 代码**

```
List<Item> lstNewItems = new List<Item>(); // Control Items  
lstNewItems.Clear();

foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
{
    Item NewItem = new Item();
    NewItem.Paramater = PendingItemUnderControl.Cells[0].Text.ToLower();
    NewItem.Type = (String)Session["BrowseType"];
    lstNewItems.Add(NewItem);
}

public class Item
{
    public Item(string Paramater, string Type)
    {         
        _Paramater = Paramater;
        _Type = Type;
    }
    private string _Paramater;
    [DataMember]
    public string Paramater
    {
        get { return _Paramater; }
        set { _Paramater = value; }
    }
    private string _Type;
    [DataMember]
    public string Type
    {
        get { return _Type; }
        set { _Type = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:03:36.317

[ProtoBuf Net](http://code.google.com/p/protobuf-net/)是一个二进制序列化器，但它非常灵活和快速

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:45:47.313

对于结构化数据，XML 或非常轻量级的 SQL RDBMS（如 SQLite 或 SQL Server Compact Edition）都可以很好地工作

我推荐`XML`文件的读取器/写入器类，因为它很容易序列化序列
化是将对象转换为二进制表示的简单方法，然后可以将其写入磁盘或通过线路发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T16:16:24.527

**解决方案 C# 代码**

```
#region Save the object

            // Create a new XmlSerializer instance with the type of the test class
            XmlSerializer SerializerObj = new XmlSerializer(typeof(List<Item>));

            // Create a new file stream to write the serialized object to a file
            TextWriter WriteFileStream = new StreamWriter(@"C:\test.xml");
            SerializerObj.Serialize(WriteFileStream, lstNewItems);

            // Cleanup
            WriteFileStream.Close();

            #endregion

            // Load items to control
            #region Load the object

            // Create a new file stream for reading the XML file
            FileStream ReadFileStream = new FileStream(@"C:\test.xml", FileMode.Open, FileAccess.Read, FileShare.Read);

            // Load the object saved above by using the Deserialize function
            List<Item> LoadedObj = (List<Item>)SerializerObj.Deserialize(ReadFileStream);

            // Cleanup
            ReadFileStream.Close();

            #endregion

            // Load up all the settings

            for (int i = 0; i < LoadedObj.Count; i++) // Loop through List with for
            {
                String ThisisAnItemToControl = LoadedObj[i].Paramater;
                String ThisIsItsType = LoadedObj[i].Type;
            } 
```

# ruby-on-rails - 如何将哈希中的字符串转换为整数

> ID：13660479
> 
> 赞同：2
> 
> 时间：2012-12-01T14:40:48.597
> 
> 标签：ruby-on-rails, ruby

我已经构建了一个表单标签并从用户那里选择了值。这就是我得到的：

```
params[:user_answer_ids] = {"170"=>["599"], "162"=>["561", "563", "565"], "160"=>["549", "550"]} 
```

现在我想将此哈希中的所有字符串转换为 int，例如：

```
params[:user_answer_ids] = {170=>[599], 162=>[561, 563, 565], 160=>[549, 550]} 
```

我想转换为 int，因为我想稍后比较问题和答案 ID。目前我`to_i`在循环哈希时必须使用方法，所以我想知道是否有任何方法可以一次将所有字符串转换为 int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:55:51.323

你可以假装...

```
h={"170"=>["599"], "162"=>["561", "563", "565"], "160"=>["549", "550"]}
h.default_proc = proc{|h,k| h.key?(k.to_s) ? h[k.to_s].map(&:to_i) : nil}
p h[162] 
```

保持数据不变。

# icefaces - icefaces 1.8.2 Datapaginator 意外 PaneltabSet 内容交换

> ID：13660483
> 
> 赞同：1
> 
> 时间：2012-12-01T14:41:37.863
> 
> 标签：icefaces

我有一个带有多个选项卡的 Web 应用程序。所有选项卡都在会话范围内管理 bean。托管 bean 包含一个 DataPaginator 成员，它有一个 getter 和 setter 方法。我在 xhtml 页面中为这个分页器设置了 ice:dataPaginator 组件“绑定”选项。我想使用好像我向数据表添加了一个新元素，并且该表的行数超过了表的最大行数，在这种情况下，寻呼机将转到下一页以查看新元素。这工作正常，但如果我重新加载整个页面（F5）然后页面交换 panelTabs 的内容。我搜索了很多，但我找不到任何解决方案。感谢您的任何帮助或建议。

毫升

# javascript - 有没有办法在不使用全局变量的情况下在 jquery 中的 hover() 中的两个函数之间共享变量？

> ID：13660484
> 
> 赞同：1
> 
> 时间：2012-12-01T14:42:24.637
> 
> 标签：javascript, jquery, jquery-ui, namespaces, global-variables

我的代码如下所示：

```
quickbarcolor = $("#quick-bar a").css("color");
$("#quick-bar a").hover(function () {
  if ($(this).css("color") != quickbarcolor) quickbarcolorhover = $(this).css("color");
 V$(this).animate({ color: quickbarcolorhover },400);
}, function() {
  $(this).animate({ 'color': quickbarcolor},400)}  
); 
```

它工作得很好，但它依赖于全局变量在 hover() 中的两个函数之间共享颜色。我对全局变量一无所知，但我认为除非必要，否则最好避免使用它们，尽管我知道函数之间共享值是它们的用途。我仍然想看看是否有人知道这样做的更好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T14:44:21.503

一种选择是将您的值存储在使用该[`data-*`](http://api.jquery.com/jQuery.data/)属性进行动画处理的 DOM 元素上。这就是我的意思：

```
$.data($("#quick-bar a"), "col", $("#quick-bar a").css("color"));

$("#quick-bar a").hover(function() {
    var self = $(this);
    var col = $.data(self, "col");
    if ($(this).css("color") != col) {
         $.data(self, "col", self.css("color"));
    }

    self.animate({
        color: col
    }, 400);

    $.data(self, "col", self.css("color");
}, function() {
    $(this).animate({
        'color':  $.data($(this), "col");
    }, 400)
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T14:50:27.850

这种方法不会创建全局变量。

```
$(function() {
  var quickBar = $("#quick-bar a"),
      quickbarcolor = quickBar.css("color");

    quickBar.hover(function () {
        var $this = $(this), 
            color = $this.css("color");
        if ( color != quickbarcolor) {
             $this.animate({ color: color },400);
        }

    }, function() {
        $(this).animate({ 'color': quickbarcolor},400)}  
        );)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T14:48:58.490

或者使用 JQuery 数据 api。

```
$(this).data("myCustomData", "Hi"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:00:27.057

数据属性*不是*一件好事，因为它们可以通过任何类型的 html 调试器（如 firebug）进行编辑。这可能意味着任何拥有它的人都可以更改您的代码的行为（可以翻转，但请进一步考虑......）

您也可以等待 dom 就绪事件触发以添加您的代码，但您*不能*然后更快地执行。所以，*对我来说*，最好的方法是将您的翻转声明放入一个匿名函数中，该函数将位于 html 正文标记末尾的脚本标记中。如果你害怕在 jQuery 加载之前执行，你可以简单地使用 defer 属性（compat' on [caniuse.com](http://caniuse.com/#search=defer)）

```
<html>
  <head>
    ...
    <script src="jquery.min.js" type="text/javascript" defer="defer"></script>
    ...
    </head>

  <body>
    ...
    <script type="text/javascript" defer="defer">
      (function()
      {
        var strictly_private_var = 1;
        /* do your rollover */

      })();

    </script>
  </body>
</html> 
```

# php - 允许为您的网站扩展用户名（即 http://example.com/someusername）

> ID：13660490
> 
> 赞同：0
> 
> 时间：2012-12-01T14:42:53.417
> 
> 标签：php, mod-rewrite, url-rewriting

我在一个社交网站上工作。我想做的事情是让用户的用户名出现在我的网站名称之后……例如 example.com/myusername。我知道我可以使用 $_GET 变量来做一些事情，它看起来像 example.com/?u=myusername，但是我们认为在域之后只使用用户名会看起来更干净，并且用户更容易导航。

提前致谢，

JS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:49:29.643

您可以设置重写规则以将所有不存在的请求定向到您的`index.php`（或实际上您想要使用的任何脚本）。然后只需检查`$_SERVER['REQUEST_URI']`并拉出用户名。

这是一组基本的重写规则（对于 apache）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

在你的情况下：

```
$requestParts = explode('/', $_SERVER['REQUEST_URI'];
$username = $requestParts[0]; 
```

这将允许您也使用: `example.com/username/posts/newest`，并拉出各种“部分”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:45:11.823

如果您使用的是 apache，请查找 mod_rewrite。
如果您使用的是 IIS，请阅读此处：[mod_rewrite 等效于 IIS 7.0](https://stackoverflow.com/questions/60857/mod-rewrite-equivalent-for-iis-7-0)。

使用其中一个来解析调用 URL 并为您的页面构建变量。

# android - 为什么我的应用程序不会使用时间处理程序关闭？

> ID：13660491
> 
> 赞同：1
> 
> 时间：2012-12-01T14:42:53.693
> 
> 标签：android

我正在制作一个游戏，当您触摸图像的任何位置时，会弹出 1000 毫秒的弹出窗口。但这就是问题如果我关闭活动它会崩溃，所以我添加了一个时间处理程序来关闭活动。但这又产生了另一个问题。似乎正在调用新活动，但处理程序并未关闭该活动。

我附上了出现问题的 lvl1 的活动。（我使用不同颜色的背景不可见图像来设置可触摸区域。例如，背景颜色为白色的地方，它返回弹出窗口。当它是黄色时，它调用另一个活动等等。（颜色的东西没有'似乎不适用于摩托罗拉不知道为什么。））

这是弹出窗口的处理程序

```
else if (ct.closeMatch (Color.WHITE, touchColor, tolerance)) // con esto evito poing & click muy seguidos
{          
  Random r = new Random();
  int txt= r.nextInt(6-0) + 0;
  if(txt==0){ variables.pointtxt = "Nothing interesting"; }
  else if (txt==1){ variables.pointtxt = "There´s nothing there"; }  
  else if (txt==2){ variables.pointtxt = "I can´t do nothing with that"; }  
  else if (txt==3){ variables.pointtxt = "Wait... nop nothing"; }   
  else if (txt==4){ variables.pointtxt = "Nothing"; }   
  else if (txt==5){ variables.pointtxt = "More nothing"; }

 LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 View popupView = layoutInflater.inflate(R.layout.popup, null);  
 final PopupWindow popupWindow = new PopupWindow(
    popupView, LayoutParams.FILL_PARENT,  LayoutParams.WRAP_CONTENT);
 TextView text = (TextView) popupView.findViewById(R.id.popuptxt);
 text.setText(variables.pointtxt);

 popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 250);

 new Handler().postDelayed(new Runnable() {
      public void run() {    
        if (popupWindow.isShowing()== true)
          popupWindow.dismiss();
      }
    }, 1100
  );           
}

handledHere = true; 
break;

default:
  handledHere = false;
} // end switch 
```

这就是我关闭活动并调用新活动的方式

```
else if (ct.closeMatch (Color.YELLOW, touchColor, tolerance)) {
  Intent game = new Intent(lvl1.this, lvl1_0.class); startActivity(game);
  Handler mHandler1 = new Handler();
  {
    Runnable mLaunchTask3 = null;
    mHandler1.postDelayed(mLaunchTask3,1100);
  }

  //will launch the activity
  Runnable mLaunchTask3 = new Runnable() {
    public void run() {
      lvl1.this.finish();
    }
  };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:04:21.353

关闭活动时使用此代码删除处理程序：

```
mHandler1.removeCallbacksAndMessages(null); 
```

因为当您启动新的处理程序时，之前的处理程序不会删除，它将继续在后台运行

# html - 如何使某些东西出现在位置之后：固定；元素？

> ID：13660492
> 
> 赞同：0
> 
> 时间：2012-12-01T14:43:02.357
> 
> 标签：html, css, position, css-position

所以我有一个固定元素，它将是一张高度不同的图片，我想在它之后添加文本，但在那个 div 之外。

我需要更改的[示例。](http://hayneniam.tumblr.com/)

因为我需要悬停不包含文本，如果我将文本放在图片的 div 之外，它自然会出现在侧边栏的开头。所以我需要一些解决方案让它跟随图片，但没有指定它应该开始的高度，因为正如我所说，图像的高度会有所不同，因为我希望能够放置我想要的任何图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:27:10.157

而不是当前的结构：

```
div#SidebarImg
  div.LeftSlide
  div.RightSlide
  img
  div#Description 
```

做类似的事情：

```
div#SidebarImg
  div#SlidesContainer
    div.LeftSlide
    div.RightSlide
    img
  div#Description 
```

#Description div 现在位于*image-and-slides*部分之外，所以现在`#SlidesContainer img:hover #RightSlide {...}`选择器应该可以工作了

# android - device.touch() 不适用于 Gallery 应用程序

> ID：13660496
> 
> 赞同：0
> 
> 时间：2012-12-01T12:57:47.960
> 
> 标签：android

我正在创建一个脚本来测试 android 4.0.4 的画廊应用程序。使用monkeyrunner。但是当我向任何相册发送触摸事件时，它会选择相册而不是打开它。以下代码适用于 Andorid View 客户端：

```
vc=ViewClient(device,serialNo)
firstAlbum = vc.findViewById('id/no_id/1')
firstAlbum.touch(MonkeyDevice.DOWN_AND_UP) 
```

下面的代码是使用monkeydevice触摸事件实现的。

```
device.touch(x,y,MonkeyDevice.DOWN_AND_UP) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:34:54.073

这是 MonkeyRunner 的限制，它不能处理非交互式项目。对于这个问题，错误已记录在谷歌组[http://code.google.com/p/android/issues/detail?id=19452](http://code.google.com/p/android/issues/detail?id=19452)

我可以通过制作包含以下命令的脚本来打开相册：

```
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 0 -1000
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 1 -1000
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 0 500
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 1 500
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 0 80
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 2 1 80
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 1 272 1
adb shell sendevent /dev/input/event2 0 0 0
adb shell sendevent /dev/input/event2 1 272 0
adb shell sendevent /dev/input/event2 0 0 0 
```

运行图库活动后，您的 monkeyrunner 脚本应包含以下行：

```
try:
    subprocess.Popen(['bash', '-c', '. .Script_name.sh'])     
except:
    raise Exception('Could not open the File: script_name.sh') 
```

# image - LSB 隐写术中的 PNG 文件大小增加

> ID：13660501
> 
> 赞同：2
> 
> 时间：2012-12-01T14:44:13.570
> 
> 标签：image, compression, png, pixel, steganography

我正在研究图像隐写术问题，我必须在 png 图像文件中隐藏一些文本信息。隐写操作成功后，生成的图像比原始文件大。当我使用 LSB 隐写术（1 位、2 位、3 位）时，它不应该增加文件大小，因为正在存储的数据位于图像的现有位内。没有额外的字节被添加到原始图像中。所以我无法理解为什么会发生这种情况。从概念上讲，它不应该增加生成的文件大小。

例如

原始文件大小：88 KB 文本文件大小：382 KB 结果 PNG 文件大小：487 KB

我读到PNG采用“无损数据压缩”。所以我假设P​​NG可能以压缩格式存储图像，所以当我从图像中读取图像字节时，它们会被扩展，因此我的图像大小会增加。如果我错了，请纠正我。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:33:54.070

从概念上讲，它*应该*增加或至少改变结果文件的大小。压缩取决于图像中的相关性，特别是像素值的相关性。您正在更改像素值，因此您正在消除压缩所依赖的一些相关性。压缩时说“正在存储的数据位于图像的现有位内”是没有意义的。不仅存在现有位，而且您正在更改现有的相关性。

实际上，您在低位添加噪声，这将始终增加无损压缩数据的大小。

简单示例：如果您从图像中的线性渐变开始，相邻像素值为 200、201、202、203、204、205、206 和 207。PNG 应用的过滤器将采用差异，这将导致 (假设你在一行的开头）200、1、1、1、1、1、1、1。1的序列压缩得很好。然后在低位添加噪声并将其更改为 207、202、205、206、204、209、210 和 210。现在的差异是：207、-5、3、1、2、5、4、0 . 这样的序列不会像一堆序列那样压缩。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-16T12:07:02.633

这是一个格式问题，因为您打开图像文件，例如 JPG 格式文件并打开原始图像，对于此原始图像应用 LSB，然后将此原始图像保存为 PNG 格式，原始图像的数据更多大于 JPG 文件字节。

# objective-c - 如何擦除我在 UIView 上绘制的线条

> ID：13660505
> 
> 赞同：2
> 
> 时间：2012-12-01T14:44:36.777
> 
> 标签：objective-c, ios, cgcontext

我创建了一个 UIView 并将它放在一个 imageView 的顶部，并将 uiview 的背景颜色设置为 clearcolor，所有的绘图都发生在那个 UIView 上，如何才能擦除我在那个 uiview 上画的线？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:52:31.067

您是否尝试`CGContextSetBlendMode(context, kCGBlendModeClear)`过然后绘制要擦除的区域。`CGContextClearRect`如果要清除整个屏幕（或其矩形部分），也可以使用清除上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:21:14.863

在您的视图上调用 setNeedsDisplay ，下次 drawRect 不画线，而是用 clearColor 填充整个边界

# unix - Apache2 无法在 UNIX 服务器上启动

> ID：13660508
> 
> 赞同：-1
> 
> 时间：2012-12-01T14:45:01.400
> 
> 标签：unix, ssh, apache2

在 SSH 中重新启动 PLESK 后，我遇到了一些网络服务器无法重新启动的问题。

当我跑

```
/etc/init.d/apache2 start 
```

我收到以下错误

```
Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs 
```

我比跑了

```
/bin/netstat -lnp | grep '0.0.0.0:80' 
```

这给了我

```
tcp  0  0 0.0.0.0:80  0.0.0.0:*  LISTEN  9097/apache2 
```

我不知道如何从这里开始让事情重新开始并运行。

编辑：我按照 Ed Heal 和 Chipmunk0110 的建议杀死了进程 9097。之后我仍然无法启动apache。我导致了同样的错误。/bin/netstat -lnp | grep '0.0.0.0:80' 现在导致

```
tcp  0  0 0.0.0.0:80  0.0.0.0:*  LISTEN  21171/apache2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:47:36.067

您已经运行了 apache！做一个`ps -aux | grep apache`找到进程并杀死它。

然后，您应该能够重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:53:52.200

```
sudo kill -9 9097 
```

9097 是这个特定 apache 实例的进程 ID

# c# - 在 C# 中将 null 传递给 Web 方法

> ID：13660511
> 
> 赞同：2
> 
> 时间：2012-12-01T14:45:19.920
> 
> 标签：c#

我已经提供了一个网络服务 URL。它的一个方法有一个论点，如果我传递 null 它会做一些事情，如果传递 int 做其他事情。我添加了对项目的服务引用。C# 不接受将 null 传递给该参数，因为它已经实现了接受 int 而不是 int 的接口？（可为空的整数）。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:54:33.107

你也可以做一个可怕的 walkarround，解析 int.MinValue 或 int.MaxValue。我真的不喜欢那个解决方案，这不是最佳实践，但可以解决问题。

例如

```
public void DoSomething( int numofSomething )
{
    if ( numofSomething == int.MinValue )
    {
        // act as if numofSomething is null
    }
    else
    {
        // act as normal
    }
} 
```

请记住，您的代码更糟糕，因为您使用的是最小值或最大值来表示空值。仅当无法更改接口时才执行此操作。

# java - 无法从数据库中获取正确的数据

> ID：13660512
> 
> 赞同：1
> 
> 时间：2012-12-01T14:45:25.207
> 
> 标签：java, struts2

我已经编写了从我的数据库中获取数据的代码。

当用户单击链接时，将调用以下操作。它第一次给了我正确的数据。但是如果管理员更新表数据。然后下面的代码无法显示表中新更新的数据。如果我多次刷新页面，那么它会显示新更新的数据。但在下次刷新后再次显示旧数据。

我非常确定问题出在 dao 上，或者可能在 Action 类中。我不知道这背后的问题是什么？请帮我解决这个问题。

BookdetailsDAO.java

```
 public   List findasc(int o,int l)
{
     List list = null;

        try {
             session = HibernateUtil.getSessionFactory().openSession(); 
             Query q1 = session.createQuery("FROM Bookdetails  ORDER BY authLastname ASC");
             q1.setFirstResult(o);
             q1.setMaxResults(l); 
            list =q1.list(); 
        } catch (Exception e) {
            System.out.println("Exception in  findasc()  :" + e);
        } finally {
            try {
                 session.flush();
                session.close();
            } catch (Exception e) {
                System.out.println("Exception In findasc Resource closing  :" + e);
            }
        } 
        return list; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:22:36.037

尝试添加专用提交而不是刷新。当您关闭会话时，Hibernate 可能不会立即提交。

您还应该尝试在一个事务中读取所有数据。根据您的代码，您为每个对 DAO 的调用打开一个会话。将会话重新用于属于一起的呼叫。

我强烈建议让您的基础设施为您完成会话的打开、关闭和提交。考虑使用注释驱动的方法，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:10:29.270

通过应用此代码解决的问题

`sessionFactory.close(); tx.commit();
session.close();`

# android - 从堆栈中删除已启动的外部活动

> ID：13660514
> 
> 赞同：0
> 
> 时间：2012-12-01T14:45:52.063
> 
> 标签：android, android-activity

在我的应用程序中，我使用以下代码启动 Facebook 应用程序：

```
String uri = "fb://page/" + fbPageId;
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这按预期工作。但目前，当用户启动 FB 活动，然后按下“主页”按钮并再次启动我的应用程序时，他将看到 Facebook 应用程序。用户必须按“返回”按钮才能看到我的应用程序。我不喜欢这种行为。这可能对内部意图有益，但对外部意图不利。

是否可以启动 Activity 并立即从当前 App 的堆栈中删除这个新 Activity？

如果也尝试过 startActivityForResult() 之类的东西，但这并没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:56:10.513

之所以如此，是因为 FB Activity 和您的 Activity 都属于同一任务。有关如何在单独的任务中启动 Activity，请参阅[官方文档。](http://developer.android.com/guide/components/tasks-and-back-stack.html#Starting)

具体来说，Intent Flag[`FLAG_ACTIVITY_NEW_TASK`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)用于在单独的任务中启动 Activity。

# java - 从另一个类附加到 JTextArea

> ID：13660518
> 
> 赞同：2
> 
> 时间：2012-12-01T14:46:17.610
> 
> 标签：java, multithreading, swing, jtextarea, event-dispatch-thread

我的 Reader 类用于在服务器发送消息时显示服务器消息。此代码在直接打印到命令行时完美运行，我收到服务器发送的任何消息。但是，JTextArea 仅显示每隔一行左右。我不确定在这里做什么。我读了一些关于 InvokeLater 的文章，但我不确定这是否是使用它的正确情况。

此外，当我单击连接按钮时，线程是从 GUI 类启动的。

```
public class Reader implements Runnable {

    public static Socket s = null;
    public static JTextArea TextArea;
    public static BufferedReader reader = null;

    /*Takes in a Socket. Sets up a input stream.
     * 
     */
    public Reader(Socket sIn, JTextArea display) {
        TextArea=display;
        s = sIn;
        try {
            reader = new BufferedReader(new InputStreamReader(s.getInputStream()));
        } catch (IOException ex) {
            System.out.println("Error in constructor Reader: " + ex);
        }
    }

    public void checker() {
        try {
            /*Sits and waits for a Server Response*/
            while (!reader.ready()) {}

            System.out.println(reader.readLine());
            TextArea.append(reader.readLine()+"\n");

        } catch (Exception ex) {
            System.out.println("checker is crying: " + ex);
        }
    }

    public void run() {
        while (true) {
            checker();
        }
    }
} 
```

感谢您的回复和示例。我在 checker() 方法中添加了以下内容：

```
EventQueue.invokeLater(new Runnable() {
    public void run() {
        try {
            TextArea.append(reader.readLine() + "\n");
        } catch (Exception eee) {
            System.out.println("Error" + eee);
        }
    }
}); 
```

存在同样的问题（仅接收所有其他服务器消息），但现在它锁定在所有其他消息上。如果我的服务器发送 4 条消息，它会跳过第一个得到第二个等等。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:42:47.977

您从 BufferedReader 读取两次：

```
 System.out.println(reader.readLine()); // *** here ***
        TextArea.append(reader.readLine()+"\n");  // *** and here *** 
```

所以这就是为什么你只看到每隔一行。由于您试图调用`readLine()`事件线程，您的程序可能会冻结——不要那样做。

每行仅从 BufferedReader 读取一次。我还将更改 while 循环，并在 Runnable*之外进行缓冲读取器的读取。*

```
 private String line = ""; // a class field

   public void checker() {
      try {

         while ((line = reader.readLine()) != null) {

            System.out.println(line);
            SwingUtilities.invokeLater(new Runnable() {
               TextArea.append(line + "\n");
            });
         }

      } catch (Exception ex) {
         System.out.println("checker is crying: " + ex);
      }
   }

   public void run() {
      checker();
   } 
```

或者更好——使用 SwingWorker 对象并将该行发布/处理到您的 JTextArea。

顺便说一句，您需要了解并让您的代码符合 Java 命名约定，包括让所有类名都以大写字母开头，所有变量和方法都以小写字母开头。这样做可以让其他人更轻松、更快速地理解您的代码，并且可能会帮助您在这里获得更快更好的帮助。

# autohotkey - AutoHotKey 两个不同的热键 Lbutton 和 Lbutton down

> ID：13660520
> 
> 赞同：1
> 
> 时间：2012-12-01T14:46:25.540
> 
> 标签：autohotkey

我试图创建两个热键

一个用于 Lbutton::“鼠标左键（单击）”另一个用于鼠标左键（仅在按住时，可能超过 0.2 秒）

或者有像 Lbutton Down:: 和 Lbutton Up:: 这样的键列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T04:03:18.523

我会像这样使用[keyWait](http://www.autohotkey.com/docs/commands/KeyWait.htm)

```
LButton::
{   ;wait for the mouse button to be let go, set 0.2 second timeout
    KeyWait, LButton, T0.2
if(ErrorLevel)
{   MsgBox holding down
} else
{   MsgBox clicked
}
return
} 
```

# c# - 检查用户是否经过身份验证总是会导致 true

> ID：13660521
> 
> 赞同：0
> 
> 时间：2012-12-01T14:46:28.223
> 
> 标签：c#, asp.net

我正在尝试检查用户何时通过身份验证，并且我总是得到用户通过身份验证。这是我的代码：

```
 if( User.Identity.IsAuthenticated )
 {
     addProfiledata();
 } 
```

即使我登录和注销，这种情况也总是正确的。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:57:13.513

试试这个：

```
if(HttpContext.Current.Request.IsAuthenticated) {

  //put code for Authenticated user 

} 
```

或者交替

```
if(User.IsInRole("rolename")) {

  //put code for Authenticated user 

} 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:54:26.663

如果您已经定义了用户角色，那么它应该被处理，您正在使用 LoginControl，我猜您正在使用其他登录控件（如 loginview）处理唱歌，并希望您将用户角色分配给它。如果是这种情况，您可以使用 LoginUser_LoggedIn 事件

```
   // 假设您是否愿意根据用户的角色重定向用户
protected void LoginUser_LoggedIn（对象发送者，EventArgs e）
        {
            if (string.IsNullOrEmpty(Request.QueryString["ReturnUrl"]))
            {
                // 如果用户在角色中并已通过身份验证
                if (Roles.IsUserInRole(LoginUser.UserName, "Developers"))
                {
                    // 添加会话并重定向到特定页面
                    Session.Add("开发者", "开发者");
                    Response.Redirect("../Developers/devAccess.aspx");

```
 }
        }
    } 
```

```

# html - 向左浮动的 div 右侧的 div 填充

> ID：13660522
> 
> 赞同：0
> 
> 时间：2012-12-01T14:46:34.950
> 
> 标签：html, css

我有`<div>`一个固定宽度和高度的左浮动，在它的右边我有另外两个`<div>`s。我想让一个`<div>`s 与 left-floated`<div>`的边界齐平，另一个稍微缩进。这是我目前拥有的...

```
<div 
    id="leftDiv"
    style="border:1px solid grey;
        width:300px;
        height:400px;
        float:left;">
        This is a left floated div with a fixed width and height
</div>

<div id="rightDiv">
    <div id="flushDiv">This should be flush.</div>
    <div id="indentDiv" style="padding:25px">This should be indented.</div>
</div> 
```

但是上面的 html 发生的事情是 id 为 'flushDiv' 和 'indentDiv' 的 s 都与id`<div>`的右侧齐平。`<div>``leftSideDiv`

我知道为什么当我在`rightDiv`. 它的左侧实际上与`leftDiv`. 并且这两个元素已经在我想要的 25px 缩进上很好地填充`indentDiv`，因此它们最终都与`leftDiv`.

如果我浮动`rightDiv`正确，我几乎可以获得所需的压痕效果。 `indentDiv`现在相对于 缩进`flushDiv`，但`flushDiv`不再与 的右侧齐平`rightDiv`。

好吧，我什至不确定我是否在关注自己。

有谁明白我在问什么并有解决方案？我试着总结一下：

如何在左浮动 div 的右侧有两个 div，其中一个与左浮动 div 的右边框齐平，另一个偏移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:55:13.080

这是你想要完成的吗？我在它们周围设置了边框，这样你就可以看到它们......这是 jsfiddle.com 上的一个例子

[http://jsfiddle.net/hawUs/](http://jsfiddle.net/hawUs/)

```
<div id="leftDiv" style="border:1px solid grey;width:300px;height:400px; float:left;">
    This is a left floated div with a fixed width and height
</div>

<div id="rightDiv" style=" float:left;">
  <div id="flushDiv" style="border:1px solid grey; float">This should be flush.</div>
  <div id="indentDiv" style="padding:25px;border:1px solid grey;">This should be indented.    </div>
</div> ​​​​​​​​​​​​​​​ 
```

**更新：**您也可以更改`padding`div`#indentDiv`上的使用`margin`来代替。见例子：http: [//jsfiddle.net/hawUs/1/](http://jsfiddle.net/hawUs/1/)

# c++ - 将元素插入c ++映射 - 插入方法的差异

> ID：13660526
> 
> 赞同：1
> 
> 时间：2012-12-01T14:47:10.980
> 
> 标签：c++, map

这两个版本的插入 c++ 有什么区别`map`：

```
map<string,double> myMap;
// version 1
myMap["david"] = 123.123;

// version 2
myMap.insert(std::make_pair("david" ,123.123)); 
```

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T14:48:33.813

如果键已经存在，第一个将更新值，但如果键已经存在，第二个将**不会**更新它。

```
std::map<string,double> myMap;

//working with operator[]
myMap["david"] = 123.0; //inserts
myMap["david"] = 98.0;   //updates

std::cout << myMap["david"] << std::endl; //prints 98.0 (updated value)

//working with insert
myMap.insert(std::make_pair("nawaz", 100.0)); //inserts
myMap.insert(std::make_pair("nawaz", 878.0)); //no update

std::cout << myMap["nawaz"] << std::endl; //prints 100.0 (old value) 
```

`insert`函数`std::pair<iterator,bool>`返回。该对的布尔值告诉您插入是否成功。

现在阅读文档以获取更多详细信息：

*   [`std::map::insert`](http://en.cppreference.com/w/cpp/container/map/insert)
*   [`std::map::operator[]`](http://en.cppreference.com/w/cpp/container/map/operator_at)

# c# - WS_EX_COMPOSITED 和滚动条在被拖动时不绘制

> ID：13660530
> 
> 赞同：2
> 
> 时间：2012-12-01T14:47:20.587
> 
> 标签：c#, winforms

我有一个表单，上面有许多自定义控件，但闪烁很严重，我找到了以下代码（在寻找解决方案时在 stackoverflow 上，[如何修复用户控件中的闪烁](https://stackoverflow.com/questions/2612487/how-to-fix-the-flickering-in-user-controls) 或Hans Passant 发布的[Winforms 双缓冲](https://stackoverflow.com/questions/3718380/winforms-double-buffering)），它已修复闪烁

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
        return cp;
    }
} 
```

但是，现在如果我单击滚动条上的位置栏，位置栏保持固定，直到我松开鼠标按钮。

有没有办法在拖动时更新滚动位置栏并且控件上没有闪烁？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:05:52.333

[平滑滚动的 .net 表单](https://stackoverflow.com/questions/1424482/smooth-scrolling-net-forms)

在这里找到答案，感谢 CharlesW

```
private const int WM_HSCROLL = 0x114;
private const int WM_VSCROLL = 0x115;

protected override void WndProc (ref Message m)
{
    if ((m.Msg == WM_HSCROLL || m.Msg == WM_VSCROLL)
    && (((int)m.WParam & 0xFFFF) == 5))
    {
        // Change SB_THUMBTRACK to SB_THUMBPOSITION
        m.WParam = (IntPtr)(((int)m.WParam & ~0xFFFF) | 4);
    }
base.WndProc (ref m);
} 
```

# c++ - 除了boost之外，跨平台获取C++目录中所有文件的方法

> ID：13660531
> 
> 赞同：3
> 
> 时间：2012-12-01T14:47:20.757
> 
> 标签：c++, directory, cross-platform

除了使用 Boost 来获取目录中的所有文件外，还有其他跨平台方式吗？opendir/readdir 似乎在 Windows 下不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:01:47.217

[您可以使用名为Qt](https://en.wikipedia.org/wiki/Qt_%28framework%29)的跨平台框架。您的问题的示例解决方案：

```
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QListWidget window;

    QDir dir("/");
    QStringList list = dir.entryList();

    window.addItems(list);

    window.show();

    return app.exec();
} 
```

# c++ - 在 C++ 实例中，字段未初始化为其默认值。静态字段呢？

> ID：13660537
> 
> 赞同：2
> 
> 时间：2012-12-01T14:48:20.683
> 
> 标签：c++, static, field

如果我没有弄错，如果我要声明一个全局 char 数组，它的元素将被初始化为 \0。如果我要声明静态全局或静态局部，则相同。但是静态场呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:53:32.293

是的。在 C++ 术语中，字段称为“数据成员”。

C++03 标准的第 9.4.2.7 段指出“静态数据成员的初始化和销毁​​与非本地对象完全一样。”。

第 3.7.1 节“静态存储持续时间”指出“所有既不具有动态存储持续时间也不是本地对象的对象具有静态存储持续时间。”

第 3.6.2 节“非本地对象的初始化”指出“具有静态存储持续时间的对象应在任何其他初始化发生之前进行零初始化。”

因此，如果您没有将数据成员显式初始化为其他内容，它将保持其零初始化值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:53:36.857

静态数据成员在初始化方面被视为与全局变量相同。

# android - 后退按钮无法正常工作

> ID：13660540
> 
> 赞同：0
> 
> 时间：2012-12-01T14:48:33.963
> 
> 标签：android, titanium-mobile, back-button

我正在尝试使用第二次按下后退按钮时使用后退按钮关闭窗口。在我的代码中，我正在运行一个 yql 查询并将从查询中获得的数据插入到行中，然后将行添加到表中。我不明白为什么我需要按两次后退按钮，请帮忙。在此先感谢以下是我的代码：

```
var DetailWin = Titanium.UI.currentWindow;
var information = new Array("Company Name: ", "Company Location:", "Position Type:", "Employee            Type:", "Minimum Education:", "Vacancy:", "Gender:", "Salary:");
var var1=Ti.App.lurl;

var rowData = [];

Titanium.Yahoo.yql('select * from html where url="' + var1 + '" and xpath="//p/span" limit 8',     function(e) {

    var results = e.data.span;

    for (var i = 0; i < results.length; i++) {

        var rss = results[i];
        var rssRow = Titanium.UI.createTableViewRow({
            top : 200,
            height : 45,
            className : 'rssrow'

        });
        var titleLabel = Titanium.UI.createLabel({
            text : information[i] + "     " + rss,
            font : {
                fontSize : 16,
                fontWeight : 'bold'
            },
            width : 'auto',
            top : 5,
            left : 40,
            height : 20,
            color:'black'
        });

        rssRow.add(titleLabel);

        rowData.push(rssRow);
    };
    jobdetail.setData(rowData);

});

var jobdetail = Titanium.UI.createTableView({
    top:'12%',

 });

DetailWin.add(jobdetail);

var backbut = Titanium.UI.createButton({ 
   title:'Back',
   top:'2%',
   width:'20%',
   height:'auto',
   left:'5%'
});

backbut.addEventListener('click', function(){

DetailWin.close();

});
DetailWin.add(backbut); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:58:59.393

您可以通过向窗口添加事件来处理 android 后退按钮。

```
DetailWin.addEventListener('android:back', function(){

DetailWin.close();

}); 
```

# colors - 使用“进度”值进行颜色混合

> ID：13660541
> 
> 赞同：1
> 
> 时间：2012-12-01T14:48:37.223
> 
> 标签：colors, lua

我在很久以前创建了当前代码，其中提供了开始和结束颜色以及步数。返回的是开始颜色和结束颜色之间的颜色表（数组）。

```
function getColorSteps(starting, ending, steps)
    steps = tonumber(steps) or 1

    local step = {
        (ending[1] - starting[1]) / steps,
        (ending[2] - starting[2]) / steps,
        (ending[3] - starting[3]) / steps
    }

    local palette = {
        [1] = { unpack(starting) },
        [steps] = { unpack(ending) }
    }

    for i=2, steps-1 do
        palette[i] = {
            starting[1] + (step[1] * i),
            starting[2] + (step[2] * i),
            starting[3] + (step[3] * i)
        }
    end

    print( "#palette = " .. #palette )
    print( "steps = " .. steps )
    for i = 1, #palette do
        print(
            i ..
            ". rgb(" .. 
            table.concat(palette[i], ", ")
            .. ")"
        )
    end

    return palette
end 
```

我希望将其从步骤转换为“进度”。看这个例子：

```
 s,e = {255,255,255},{0,0,0}

 getColorSteps(s,e,0)
 > 255, 255, 255, 255

 getColorSteps(s,e,0.5)
 > 127.5, 127.5, 127.5, 127.5

 getColorSteps(s,e,1)
 > 0, 0, 0, 0 
```

我只是不知道该怎么做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:25:35.310

也许使用线性插值？

```
function getColorSteps(s, e, interp)
    return { 
        (e[1]-s[1]) * interp + s[1],
        (e[2]-s[2]) * interp + s[2],
        (e[3]-s[3]) * interp + s[3],
        (e[4]-s[4]) * interp + s[4]
    }
end 
```

但是，只有在每个相应的颜色值中`i`，这才有效`e[i] > s[i]`。所以你可能需要`math.max(e[0], s[0]) - math.min(e[0], s[0])`每次都使用或类似的东西。

而且，哦，我宁愿使用`a`and`b`而不是 start/end; 但这可能只是我的偏好。

# asp.net - 从字节创建 ZIP 文件

> ID：13660542
> 
> 赞同：0
> 
> 时间：2012-12-01T14:48:38.473
> 
> 标签：asp.net, wcf, service

我需要创建一个 WCF 方法，它接受包含多个 pdf 文件的 zip 文件的字节数组，并从输入字节创建 Zip 文件并将其保存在我的应用程序的任何文件夹中。

我正在使用 WCf 应用程序。

谁能帮我 ...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:14:28.233

我建议如下：

1.  将文件作为`Stream`WCF 方法而不是作为字节数组传递。有关详细信息，请参阅[大数据和流式传输](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。
2.  您可能不需要将解压缩的文件保存在光盘上即可提取它。可以看看你使用的解压库的API吗？可能它可以直接从`Stream`. 例如[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:42:29.733

你真的想在这里做什么？你写你想从服务中获取一个 Zip 文件并将其保存到磁盘（基本上：通过 wcf 服务获取一个文件）。可能您想要的是 zipfile 的内容？

为此，您需要一个库来处理 zip 文件，我建议[DotNetZip](http://dotnetzip.codeplex.com/)。据我所知，DotNetZip 可以从文件和流以及字节数组中加载。如果没有，您可以从字节数组创建一个流并将其传递到 zip 库中。

```
Stream stream = new MemoryStream(byteArray); 
```

对于解压和其他操作，请阅读您选择的任何 zip 库的手册。

如果您真的只想从字节数组中保存文件：

```
File.WriteAllBytes(string path, byte[] byteArray); 
```

无论哪种方式，正如@Alexander Stepaniuk 建议的那样，您最好在服务中使用流，而不是传递字节数组，阅读他的帖子和链接。

# android - Android获取存储位置并保存下载的文件

> ID：13660544
> 
> 赞同：0
> 
> 时间：2012-12-01T14:48:50.050
> 
> 标签：android, path, storage, sd-card, fileoutputstream

在我的 Asynctask 类 doInBackground(String... aurl) 中，我使用以下代码保存下载的文件。该文件以与 Web 服务器中相同的名称保存。但我听说最好使用 Environment.getExternalStorageDirectory().getPath()。有必要吗？如何在我的代码中使用它？有人可以给我看吗？提前致谢

```
String fname;
 fname = data.proj.substring( data.proj.lastIndexOf('/')+1, data.proj.length() );

InputStream input = new BufferedInputStream(url.openStream());

OutputStream output = new FileOutputStream("/sdcard/"+fname); 
```

该代码现在运行良好，但我怀疑它将来有时可能会导致问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:56:19.937

而不是把 /sdcard/ 你可以把下面的代码：

```
String path=Environment.getExternalStorageDirectory()
                                .toString() + File.separator 
```

并使用路径而不是 /sdcard/

# arm - 在使用 OpenOCD 刷新我的 ARM 微控制器之前，我是否需要使用 objcopy？

> ID：13660548
> 
> 赞同：1
> 
> 时间：2012-12-01T14:49:00.203
> 
> 标签：arm, elf, objcopy, openocd

ARM微控制器的“正常”ARM交叉编译通常包括三个或四个步骤：

1.  使用汇编器将启动代码（如果是汇编）汇编到目标文件中
2.  使用编译器将任何源代码编译成目标文件
3.  使用链接器将目标文件链接到 .elf 文件中
4.  使用 objcopy 将 .elf 文件转换为 .hex 文件
5.  刷新 .hex 文件

这是我不确定的第 4 步。在 OpenOCD`flash write_image`命令的文档中，它指出：

> 文件 [type] 可以明确指定为 bin（二进制）、ihex（Intel hex）、elf（ELF 文件）、s19（摩托罗拉 s19）。内存或生成器。

很明显 OpenOCD 支持 elf 文件，但我不知道这究竟意味着什么。这仅在某些目标上支持吗？JTAG/SWD 适配器是否必须提供某种类似 objcopy 的功能才能正常工作？它只是从 OpenOCD 还不支持 elf 文件的时代开始的遗留物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:59:31.633

包含地址和数据的文件格式，如 elf、ihex、srec 很好用，我主要使用 elf。.bin 文件不携带地址，因此您 1) 必须指定起始地址 2) objcopy 填充定义区域之间的间隙，这可能会产生问题并需要更多的加载时间等。

使用 .bin 会在地址上留下人为错误的空间。不幸的是，我遇到过 .elf 和 openocd 的组合会加载错误地址或至少在加载时打印错误地址的情况。

我尽可能使用 .elf 文件。如果实用程序不支持 elf 但支持 ihex 或 srec，则为 .hex 或 .srec。和 .bin 例如在使用 x/y/zmodem 加载程序时。

我会假设 openocd 是分层的，有一个读取文件的前端，当它到达后端时，jtag 或后端不知道数据来自哪种文件。我不知道事实，但假设...

# regex - 如何在记事本++中更改正则表达式中字母的大小写

> ID：13660549
> 
> 赞同：9
> 
> 时间：2012-12-01T14:49:03.297
> 
> 标签：regex, text, notepad++

例如，有很多这样的行：“术语 - 定义”。由于正则表达式在记事本++中可以做到将“term”写成大写（大写）字母——TERM？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T14:59:54.543

```
Find what: ^(\S+)(?=\s*-)
Replace with: \U$1 
```

这是做什么的？搜索模式在行首匹配尽可能多的非空格字符 ( ) 并由于括号`\S+`将它们捕获在变量中。`$1`之后是一个前瞻，断言这个“单词”后面跟着一个连字符（中间没有其他任何东西）。此先行实际上并未包含在匹配中，因此不会被删除/替换。

替换的开头`\U`是“在此处以大写形式输出所有内容，除非您用“停止`\E`”。然后`$1`写回我们匹配的内容`\S+`（在你的情况下`term`）。但是大写。

确保更新到 Notepad++ 6。在此之前，正则表达式有点古怪。

[这是替换字符串中可能发生的事情的文档。](http://docs.notepad-plus-plus.org/index.php?title=Regular_Expressions#Substitutions)

**编辑：**

我想您的实际行可能比仅在行首有一个单词然后是连字符更有趣。但是从你给出的例子中我无法判断。但是要对任意数量的单词执行此操作并忽略行首的空格（只要行中的某处有连字符），您可以执行以下操作：

```
Find what: ^(([ \t]*[^\s-]+)*)(?=[ \t]*-) 
```

但是如果没有实际的输入示例，恐怕您必须自己找出正确的搜索模式。

# c - c 中的 SIGCHLD 处理程序 - 不需要的等待

> ID：13660550
> 
> 赞同：3
> 
> 时间：2012-12-01T14:49:04.903
> 
> 标签：c, signals, sigchld

我对 SIGCHLD 处理程序函数有以下问题。

处理程序代码非常简单：

```
void sigchld_handler(int signum)
{
    pid_t ended;    
    signal(SIGCHLD, sigchld_handler);
    ended = wait(NULL);
    // do some stuff with the PID of the finished child process
} 
```

当我只分叉一个孩子时，这很有效。如果我有 2 个孩子（或更多）并且其中一个已经完成运行，则 sigchld_handler() 将启动，当它到达“end = wait(NULL)”行时，程序会一直等到我拥有的另一个孩子完成。

有没有办法获得刚刚以不同方式结束的孩子的 PID 并避免这种等待？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:02:19.267

使用[sigaction()](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)代替，处理程序将具有此签名：

```
void (*sa_sigaction)(int, siginfo_t *, void *); 
```

它从手册页传递了您想要的信息`struct siginfo_t`：

> SIGCHLD 填写**si_pid**、si_uid、si_status、si_utime 和 si_stime，提供关于孩子的信息。 **si_pid 字段是孩子的进程ID**

注意：你当然仍然需要`wait()`在子进程上，除非你使用`SA_NOCLDWAIT`.

# qt - qTime，检查定时器的值？

> ID：13660556
> 
> 赞同：1
> 
> 时间：2012-12-01T14:49:58.910
> 
> 标签：qt

我有一个计时器，当时间等于某个时间时，即。5秒、10秒、12秒。我想让它做点什么。

不断检查计时器值以查看它是否与我的值匹配的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:19:56.353

轮询 QTime 的时间是个坏主意。你有 QTimer ，它使用你平台的硬件计时器设施。将单次 QTimer 设置为 5 秒。将其 timeout() 信号连接到一个插槽，并在该插槽中为您的下一个间隔重新编程 QTimer。其一般概念是：

```
int intervals[] = {5000, 10000, 12000};
// Alternative:
// int intervals[] = {5000, 5000, 2000};
int currentInterval = 0;
QTimer timer; // Make sure you set this up a single-shot timer.

// ...

// slot
void handleTimeout()
{
    ++currentInterval;
    // You should probably use a QList<int> instead in your real code and query size().
    if (currentInterval >= sizeof(intervals) / sizeof(intervals[0])) {
        // We're done.
        return;
    }
    timer.start(intervals[currentInterval] - intervals[currentInterval - 1]);
    // Alternative:
    // timer.start(intervals[currentInterval]);
} 
```

# magento - Magento 没有选择我的安装脚本

> ID：13660561
> 
> 赞同：0
> 
> 时间：2012-12-01T14:50:36.633
> 
> 标签：magento

我正在尝试通过安装脚本向类别管理添加一个新属性。出于某种原因，Magento 只是不使用它。

这是一个非常小的模块（3 个文件）

这是 app/code/local 中的目录树：

```
Ageno
-----TopMarki
-------------etc
----------------config.xml
-----Model
----------Mysql4
----------------Setup.php
-----sql
--------topmarki_setup
----------------------mysql4-install-0.1.0.php 
```

配置.xml：

```
<config>
    <global>
        <resources>
            <topmarki_setup>
                <setup>
                    <module>Ageno_TopMarki</module>
                    <class>Ageno_TopMarki_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>            
            </topmarki_setup>
        </resources>
    </global>

    <modules>
        <Ageno_TopMarki>
            <version>0.1.0</version>
       </Ageno_TopMarki>
    </modules>    
</config> 
```

安装程序.php：

```
<?php

class Ageno_TopMarki_Model_Mysql4_Setup extends Mage_Catalog_Model_Resource_Eav_Mysql4_Setup
{
} 
```

mysql4-install-0.1.0.php：

```
$installer = $this;
$installer->startSetup();

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$entityTypeId     = $setup->getEntityTypeId('catalog_category');
$attributeSetId   = $setup->getDefaultAttributeSetId($entityTypeId);
$attributeGroupId = $setup->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);

$setup->addAttribute('catalog_category', 'topMarka1', array(
    'input'   => 'image',
    'type'    => 'varchar',
    'group' => 'General',
    'label'         => 'Top Marka 1',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
    'frontend_input' =>'',
    'backend' => 'catalog/category_attribute_backend_image',   
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'visible_on_front'  => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'topMarka1',
 '999'  //sort_order
);

$installer->endSetup(); 
```

尽管如此，“管理类别”中仍然没有新字段。它应该自动安装，我错过了什么吗？

编辑：将 Ageno_TopMarki.xml 添加到 /etc/modules 解决了这个问题。谢谢RS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:06:47.067

尝试将 Ageno_TopMarki.xml 添加到 /etc/modules/

```
<?xml version="1.0"?>
<config>
    <modules>
        <Ageno_TopMarki>
            <active>true</active>
            <codePool>local</codePool>
        </Ageno_TopMarki>
    </modules>
</config> 
```

# c# - WPF listview中的字符串数字排序

> ID：13660562
> 
> 赞同：0
> 
> 时间：2012-12-01T14:50:57.087
> 
> 标签：c#, .net, wpf, listview, sorting

这段代码有一些小问题

```
listView1.Items.SortDescriptions.Add(new SortDescription("id",
        ListSortDirection.Ascending)); 
```

将此字符串数字：22,20,3,5,8,10,12,14,17,2,1 排序为：1,12,14,17,2,20,22,3,5,8

有人可以分享一个如何进行“正常”排序的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:03:30.047

您的`id`列是整数还是字符串类型？如果它是字符串类型，则列表视图正在正确地对字符串进行排序。简而言之，它从左到右检查每个字符串的每个字符。

如果您将`id`列更改为整数类型，它将按照您期望的方式对它们进行排序。

# linux - Vi 在行尾编辑和光标位置？

> ID：13660566
> 
> 赞同：0
> 
> 时间：2012-12-01T14:51:52.593
> 
> 标签：linux, vim, text-editor, vi, slackware

当我使用 vi（我认为在 Slackware 13.37 上默认调用 elvis）时，我可以按预期插入文本，但是当我使用`ESC x`光标移动键编辑错别字`l`并将`$`光标放在最后一个字母上而不是超出时因此，它迫使我在最后一个字母的左侧插入任何新文本，除非我一直删除到空格，否则基本上会导致拼写错误。实际的箭头键通常允许我超出最后一个字母，但并非总是如此。

为了帮助解释我在做什么：

```
This is text with a tttypog 
```

我用`ESC x`

```
This is text with a typog 
```

但是`ESC l`或`ESC $`只允许我将光标移动到 g 从而迫使我仅在 g 的左侧插入任何新文本

```
This is text with a typoraphicalg 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:02:35.170

编辑：将“命令模式”替换为“正常模式”-@Jim Steward：感谢您指出不正确

简短回答：如果您处于正常模式并想在按字符后插入文本`a`。按`A`可直接跳到行尾并在最后一个字符之后插入字符。在 vi，afaik 中，不能将光标放在当前行中最后一个字符之后的列上（如果您处于正常模式）。然而，在 vim 中有一个名为 virtualedit 的选项，它可以让你这样做（参见 :help virtualedit）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:17:46.403

vi 中有两种模式，编辑模式（默认）和插入模式。命令“i”（不带引号）带您进入插入模式，ESC 带您回到编辑模式。不必在每个命令之前按 ESC，尽管按 ESC 是一种无害的方法，可以确保您在忘记上次进入的模式时处于编辑模式。

“A”命令（不带引号）用于在行尾附加文本。

# c# - 可移植类库和 WebRequest.ContentLength

> ID：13660570
> 
> 赞同：8
> 
> 时间：2012-12-01T14:52:54.297
> 
> 标签：c#, .net, httpwebrequest, webrequest, portable-class-library

我有一个针对“.NET for Windows Store apps”和“Windows Phone 7.5 或更高版本”的便携式类库。我发出 HTTP POST 请求，截至上周，负责后端的管理员决定我需要发送 0 的 ContentLength，而不是 .NET 默认的 -1。我使用 WebRequest 类，但我足够灵活，可以在需要时使用 HttpWebRequest。

通常我只会使用 WebRequest.Create 并设置 ContentLength 属性。在 PCL 库中，ContentLength 属性不可用。如果我尝试使用“Content-Length”键添加标题，框架会抱怨我应该只使用 ContentLength 属性。

关于如何在 PCL 中设置 ContentLength 的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T22:05:35.723

如果您无法设置`ContentLength`属性但必须将其设置为 0，您可以尝试调用`GetRequestStream`（或`BeginGetRequestStram`后跟）而不向自身`EndGetRequestStream`写入任何内容，这应该将属性更新为其实际值（0，因为没有写入任何内容）。`Stream``ContentLength`

# java - “令牌上的语法错误”;“，，预期”在私有 ... 适配器之后

> ID：13660571
> 
> 赞同：-1
> 
> 时间：2012-12-01T14:53:09.300
> 
> 标签：java, android

它在标记“;”上写入语法错误 ,, 预计行后`private ArrayAdapter adapter ;`

```
package ru.for_listactivity;

import android.os.Bundle;
import android.app.ListActivity;
import android.view.Menu;
import android.widget.ArrayAdapter;

public class MainActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

    final String[] catnames = new String[] { "Рыжик", "Барсик", "Мурзик",
    "Мурка", "Васьк", "Томасина", "Бобик", "Кристина", "Пушок",
    "Дымка", "Кузя", "Китти", "Барбос", "Масяня", "Симба" } ;

private ArrayAdapter<String> adapter ; // here is a problem

adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1, catnames);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:57:43.010

我认为问题在于您在方法之外有代码，而不是在静态初始化程序块内。

尝试这个：

```
private ArrayAdapter<String> adapter = 
    new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, catnames); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:02:44.420

这可以：

```
private ArrayAdapter<String> adapter ; 
```

它声明`adapter`了它可以被类中包含的任何方法使用。

然而，这不是：

```
adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1, catnames); 
```

它需要在一个方法中（也许你想要它在`onCreate`？），而不仅仅是在类中：

# wordpress - 如何创建永久链接以显示特定类别页面

> ID：13660584
> 
> 赞同：0
> 
> 时间：2012-12-01T14:54:47.413
> 
> 标签：wordpress, categories, permalinks

在我的侧边栏中，我有两个类别：“产品”和“新闻”。所以我创建了两个类别文件`category-product.php`并`category-news.php`以不同的方式显示它们。

我的问题是：如何创建永久链接来显示这些单独的类别页面？默认永久链接始终显示该`category.php`文件。有人可以提供一些想法吗？我对 WordPress 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:34:07.820

WordPress 根据请求解析结果选择模板，而不仅仅是基于永久链接结构。当它确定您请求类别页面时，它会尝试`category-$slug.php`在主题文件夹中查找文件。如果找不到此文件，它会尝试查找`category-$id.php`并且如果它也不存在，则 WP 使用`category.php`.

因此，请仔细检查，`product`并且`news`是类别蛞蝓（不是标题）。并尝试使用调试栏插件（http://wordpress.org/extend/plugins/debug-bar/）。它可以显示请求参数。

# android - 创建一个facebook事件android

> ID：13660588
> 
> 赞同：-1
> 
> 时间：2012-12-01T14:55:12.503
> 
> 标签：android, events, facebook-graph-api

我做了以下编码：

在 onCreate() 里面我写道：

```
 Facebook fc = new Facebook("392736034134808");
    AsyncFacebookRunner mAsuncRunner = new AsyncFacebookRunner(fc);
    mAsuncRunner.request("/me/events",new EventRequestListener()); 
```

我在 onCreate() 下面的 EventReqestListner 类是这样的：

```
 class EventRequestListener implements
com.facebook.android.AsyncFacebookRunner.RequestListener {

public void onComplete(final String response) throws JSONException{         

System.out.println("in oncomplete of friend request listner ....");
String Name= "test";
String Location= "test";
String Description= "desc";
JSONObject event = new JSONObject();
Bundle bundle = new Bundle();
bundle.putString("method","events.create");
event.put("page_id",123454);
event.put("name",Name);
event.put("location",Location);
event.put("start_time", "2013-05-14T10:13:00");
event.put("end_time", "2013-05-15T10:20:00");
event.put("privacy_type", "OPEN");
bundle.putString("event_info",event.toString());

try {
    fc.request("POST", bundle);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
System.out.println("Event Posted");
} 
```

我的问题是这个，我没有收到任何错误，异常。我也确实创建了事件。我对android很陌生，你的帮助真的很有价值。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:31:09.483

您需要先处理身份验证和登录，然后才能请求用户的事件。这包括询问用户是否允许您的应用检索事件。

目前，您的代码实例化了一个 Facebook 对象。在此之后，您需要对用户进行身份验证并登录。可以帮助您实现此功能的一些资源是：

*   有关如何使用身份验证和登录创建基本 Android Facebook 应用程序的分步教程：[Android Facebook 教程](https://developers.facebook.com/docs/mobile/android/build/)

*   github 的 Hackbook 示例：github 上的[Hackbook 应用程序源代码](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)。Hackbook 包含许多有用的代码示例，用于在 Android 应用程序上实现 FB 功能。它带有完整的身份验证/登录代码。

*   [Facebook Developers](http://developers.facebook.com/docs/mobile/android/hackbook/#login) of the Hackbook 的演练。

此外，您的 RequestListener 代码没有正确完成。它目前正在尝试将数据发布到 FB。它通常用于解析*来自*FB 的数据。查看上面链接中的示例，了解如何使用 RequestListener。

# php - 有什么理由为什么这个 cron 工作不起作用

> ID：13660590
> 
> 赞同：0
> 
> 时间：2012-12-01T14:55:18.063
> 
> 标签：php, javascript, cron, crontab

编辑： Cron 行： /usr/bin/php /usr/local/yy/yy/yy/webspace/httpdocs/test.mysite.ie/test.php > /dev/null 2>&1

我编写了一个脚本，当我在浏览器中导航到它时，它的功能应该如此。这是我第一次尝试使用 cron 作业，所以我不太熟悉它们的工作方式。脚本如下。正如我所说，如果我在 Web 浏览器中导航到 url，脚本会正常工作。

测试.php

```
<script src="jquery.min.js"></script>
<script>
//SET UP JS VARIABLES
var allMatchedNumbers = new Array();
var matchedthingyNumbers;
var matchedthingyPlus1Numbers;
var matchedthingyPlus2Numbers;
var winningthingyNumbers = new Array();
var winningBonusNumber;
var winningthingyPlus1Numbers = new Array();
var winningPlus1BonusNumber;
var winningthingyPlus2Numbers = new Array();
var winningPlus2BonusNumber;
var thingyList;
var thingyListItems;
var thingyPlus1List;
var thingyPlus1ListItems;
var thingyPlus2List;
var thingyPlus2ListItems;
var userNumbers = new Array();
var displayCounter = 1;
var drawDate;
var thingyNumbers;
var thingyBonus;
var thingyPlus1;
var thingyPlus1Bonus;
var thingyPlus2;
var thingyPlus2Bonus;

//GET RESULTS & DATE FOR thingy, PLUS1, PLUS2 FROM THE DOM OBJECT ONLY
$(document).ready(function fetchResults(){
    $.ajax({
        url: "scrape_page.php",
        success: function(data) {
        } 
    });

    $.ajax({
        url: "latest_results.txt",
        success: function(data) {
            var dom = $(data);
            //GET thingy DATE
            drawDate = dom.find('.date-heading.fooRegular').contents().first().text();
            //GET thingy NUMBERS
            thingyNumbers = dom.find('.result-block').eq(0).find('.thingy-winning-numbers');
            thingyBonus = dom.find('.result-block').eq(0).find('.thingy-bonus');
            thingyPlus1 = dom.find('.result-block').eq(1).find('.thingy-winning-numbers');
            thingyPlus1Bonus = dom.find('.result-block').eq(1).find('.thingy-bonus');
            thingyPlus2 = dom.find('.result-block').eq(2).find('.thingy-winning-numbers');
            thingyPlus2Bonus = dom.find('.result-block').eq(2).find('.thingy-bonus');
            populateWinningNumbers();
        } 
    });
});

//PUT WINNING NUMBERS IN ARRAY
function populateWinningNumbers() {
    //MAIN thingy NUMBERS
    thingyList = thingyNumbers;
    thingyListItems = thingyList.find('li');
    thingyPlus1List = thingyPlus1;
    thingyPlus1ListItems = thingyPlus1List.find('li');
    thingyPlus2List = thingyPlus2;
    thingyPlus2ListItems = thingyPlus2List.find('li');

    thingyListItems.each(function(index) {
        winningthingyNumbers[index] = parseInt($(this).text());
    });
    //winningBonusNumber = parseInt($('#mainthingyBonus').find('li').text());
    winningBonusNumber = parseInt($(thingyBonus).find('li').text());
    winningthingyNumbers.push(winningBonusNumber);

    //thingy PLUS NUMBERS
    thingyPlus1ListItems.each(function(index) {
        winningthingyPlus1Numbers[index] = parseInt($(this).text());
    });
    winningPlus1BonusNumber = parseInt($(thingyPlus1Bonus).find('li').text());
    winningthingyPlus1Numbers.push(winningPlus1BonusNumber);
    //PLUS 2
    thingyPlus2ListItems.each(function(index) {
        winningthingyPlus2Numbers[index] = parseInt($(this).text());
    });
    winningPlus2BonusNumber = parseInt($(thingyPlus1Bonus).find('li').text());
    winningthingyPlus2Numbers.push(winningPlus2BonusNumber);

    postDataToDB();
}

//POST OFFICIAL thingy NUMBERS TO DATABASE
function postDataToDB() {
    $.ajax({
        url: "postToDB.php",
        type: "post",
        data: {thingyNums:winningthingyNumbers, thingyPlus1Nums: winningthingyPlus1Numbers, thingyPlus2Nums: winningthingyPlus2Numbers, drawDate:drawDate},
        // callback handler that will be called on success
        success: function (data) {
        }
    }); 
}
</script> 
```

scrape_page.php

```
<?php

    include 'simple_html_dom.php';

    $html = file_get_html('http://www.site.com');
    $file = 'latest_results.txt';
    file_put_contents($file, $html);
?> 
```

postToDB.php

```
<?php

$winningNums = $_POST['thingyNums'];
$winningPlus1Nums = $_POST['thingyPlus1Nums'];
$winningPlus2Nums = $_POST['thingyPlus2Nums'];
$drawDate = $_POST['drawDate'];

$thingyToSave = implode(',', $winningNums);
$plus1ToSave = implode(',', $winningPlus1Nums);
$plus2ToSave = implode(',', $winningPlus2Nums);

//CONNECT TO REMOTE
$con = mysql_connect("172.xx.xx.xx","user","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

//SELECT thingy DB
mysql_select_db("App", $con);

//CHECK IF DATE ALREADY EXISTS IN DB
$date_check = mysql_query("SELECT drawDate FROM thingy WHERE drawDate='$drawDate'");
$do_date_check = mysql_num_rows($date_check);

if($do_date_check > 0){
    //DATE ALREADY IN DB
    die("Entries already exist");
} else {
    mysql_query("INSERT INTO thingy (drawDate) VALUES ('$drawDate')");
    mysql_query("UPDATE thingy SET thingyRes = '$thingyToSave' WHERE drawDate = '$drawDate'");
    mysql_query("UPDATE thingy SET thingyPlus1Res = '$plus1ToSave' WHERE drawDate = '$drawDate'");
    mysql_query("UPDATE thingy SET thingyPlus2Res = '$plus2ToSave' WHERE drawDate = '$drawDate'");
    echo "Success";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:59:35.320

~~如果您`test.php`通过`wget`或类似方式调用，则该工具~~ `php`中没有 JavaScript 引擎。因此，页面的任何依赖于 JavaScript 的功能自然都不会运行。

有*一些*工具可以加载页面并在其中执行 JavaScript。它们被称为“无头”浏览器。例如，[PhantomJS](http://phantomjs.org/)是一个基于 WebKit 的无头浏览器，其中包含一个 JavaScript 引擎。还有无头版本的 Firefox 等。

您将让您的 Web 服务器正常运行，并将无头浏览器指向页面的 URL，这将触发 PHP（就像浏览器已请求该页面一样）并在页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:59:37.960

您尝试运行的脚本包含 Javascript - 在*浏览器*中执行。Cron 将在服务器上执行**PHP**脚本，并将输出发送到任何地方（正如您将其定向到`/dev/null`）。

在那种情况下，没有任何东西可以解释和执行 Javascript。

您需要将 Javascript（向两个相关的 PHP 脚本发出请求）中的逻辑移植到 PHP。（*您可能会运行一些服务器端 javascript 解释器/php 扩展，但在这种情况下，这似乎有点疯狂。*）

# woocommerce - 在价格前添加文字

> ID：13660593
> 
> 赞同：7
> 
> 时间：2012-12-01T14:55:44.207
> 
> 标签：woocommerce

几天来，我一直在尝试在 woo commerce 单品页面内的产品价格之前添加“价格”。我已经尝试了此代码的许多变体，但均无济于事。

```
 /** Add "Price" before the price */
function price_text() {

?>

<div class="price-text">
<p>Price</p>
</div>

<?php

} 
add_filter('woocommerce_get_price','price_text'); 
```

这是我得到的最接近的，但它显示价格为 0 美元。

我也开始添加这段代码

```
'<span class="amount">' . $currency_symbol . $price . '</span>' 
```

无济于事。但是

一般来说，我对 PHP 和 OPP 真的很陌生。任何帮助将不胜感激。

如果有影响，我正在使用 Genesis 框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T21:16:06.817

可翻译的一点改进。

```
/** Add "Price" before the price */
add_filter('woocommerce_get_price','price_text');

function price_text($price) {
  if ( is_woocommerce()){ ?>
<div class="price-text">
  <p><?php _e('Price','woothemes'); ?></p>
</div>
<?php
 return $price;
 } 
else {
        return $price;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T04:39:52.420

耶！

我想到了！

```
add_filter('woocommerce_get_price','price_text');
function price_text($price) {

?>

<div class="price-text">
<p>Price</p>
</div>

<?php

return $price;

} 
```

我只是错过了变量

`$price`

声明函数时

`price_text`

和

```
return $price; 
```

希望这对某人有帮助:)

干杯，迈克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T15:48:00.650

我添加了一个 if else 语句，以便它只显示在产品页面而不是结帐页面上。

```
/** Add "Price" before the price */
add_filter('woocommerce_get_price','price_text');
function price_text($price) {
    if ( is_woocommerce()){
?>

<div class="price-text">
<p>Price</p>
</div>
<?php

return $price;

} 
else {
        return $price;
    }
} 
```

干杯，迈克

# ruby-on-rails - 无法从 heroku 存储库中签出

> ID：13660601
> 
> 赞同：2
> 
> 时间：2012-12-01T14:56:38.907
> 
> 标签：ruby-on-rails, heroku

我最近在一台新的 Windows 机器上安装了 heroku 工具带。我添加了 ssh 密钥，但是当我运行以下命令时：

```
heroku git clone -a app 
```

我收到一个权限被拒绝错误。没有提到它是一个 ssh 错误，只是权限被拒绝。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:59:26.927

你试过这个吗？

`heroku git:clone app_name local_path`

# java - 使用 Java 代理自动化 JNLP 应用程序

> ID：13660606
> 
> 赞同：3
> 
> 时间：2012-12-01T14:57:14.897
> 
> 标签：java, applet, jnlp

我正在尝试使用进入“应用程序的 VM 实例”的 Java 代理来自动化 jnlp 应用程序中的一些操作，然后创建我的 Swing GUI 的新实例（以及我的自动化类）。

它工作正常，我可以访问框架的组件。问题是我的 GUI 作为一个“小程序”运行，它在我的 GUI 的一角给了我一个烦人的黄色三角形，并且还切断了我的权限（比如文件访问）。

JNLP`<application-desc main-class="x"/>`在 JNLP 文件中有设置，因此应用程序不会作为小程序运行。

如何将 Swing GUI 作为应用程序而不是小程序运行？

JavaAgent 的代码

```
public class FrameSearcherAgent {

   public static void agentmain(String args) {   

   Frame[] frames = Frame.getFrames();        
   for(Frame f: frames)
   {          
      if(f.getTitle().equals("Frame Title")){
         //Parameter is the Frame I want
         new JFrameAutomateGUI(f).setVisible(true);
         break;
      }
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:44:23.673

> 问题是我的 GUI 作为一个“小程序”运行，它在我的 GUI 的一角给了我一个恼人的黄色三角形。

不，那是错误的。

1.  它适用于任何小程序或 JWS 应用程序。
2.  对于用户而言，这与其说是安全问题不如说是问题，也是我们在部署应用程序时必须面对的挑战。

> ..并且还切断了我的权限（如文件访问）。

可以在使用 Java Web Start 部署的任何应用程序或小程序中访问本地文件系统，但它需要不同的（特定于 JWS 的）API。这是一个[演示。使用 JNLP 文件服务](http://pscode.org/jws/api.html#fs)。

另一方面：

*   如果代码经过数字签名并且 JNLP 请求，三角形将消失`j2ee-application-client-permissions`。
*   该应用程序。`JFileChooser`如果它已签名并且 JNLP请求`all-permissions`.

# javascript - 在淘汰赛中标记复选框和收音机

> ID：13660608
> 
> 赞同：26
> 
> 时间：2012-12-01T14:57:25.850
> 
> 标签：javascript, html, knockout.js

在 html 中，当我们单击文本或将鼠标悬停在单选按钮或复选框的文本上时，我们可以使用 html 选择它，如下所示：

```
<label>
<input type="checkbox" />option 1
</label> 
```

或者

```
<input id="checkboxid" type="checkbox" />
<label for="checkboxid">option 1</label> 
```

我试图通过淘汰赛获得相同的行为，但无法找到太多帮助：

```
<label data-bind="text: $data.optiontext">
    <input type="checkbox" data-bind="value: $data.optionvalue, checked: $parent.selectedOptions" />
</label> 
```

视图（或 html）如下（注意下面的代码不包含上面的 html，所以当你尝试它时，你需要进行上述更改并检查它）：

```
<div data-bind="foreach: options">
    <input type="checkbox" data-bind="value: $data.optionvalue, checked: $parent.selectedOptions" />
    <label data-bind="text: $data.optiontext"></label>
</div>

<hr />

<div data-bind="text: selectedOptionsList"></div>​ 
```

这是视图模型：

```
var viewModel = {
    options: [
                { optiontext: 'Simple', optionvalue: "1" },
                { optiontext: 'Advanced', optionvalue: "2" }
             ],
    selectedOptions: ko.observableArray(["2"])
};

viewModel.selectedOptionsList = ko.computed(function() {
    return this.selectedOptions().join(",");
}, viewModel);

ko.applyBindings(viewModel); 
```

这是 jsFiddle 链接：http: [//jsfiddle.net/rupesh_kokal/AFzbY/](http://jsfiddle.net/rupesh_kokal/AFzbY/)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-01T15:21:37.110

您可以使用额外`span`的文本来实现 1\. 版本：

```
<label>
    <input type="checkbox" data-bind="value: $data.optionvalue, 
           checked: $parent.selectedOptions" />
    <span data-bind="text: $data.optiontext"/>
</label> 
```

[演示小提琴。](http://jsfiddle.net/nemesv/VazcR/)

或者 2\. 使用[attr 绑定](http://knockoutjs.com/documentation/attr-binding.html)设置`id`和`for`属性的版本：

```
<input type="checkbox" data-bind="value: $data.optionvalue, 
       checked: $parent.selectedOptions, attr: { id: optiontext}" />    
<label data-bind="text: $data.optiontext, attr: {for: optiontext}" /> 
```

[演示小提琴](http://jsfiddle.net/nemesv/CQKKn/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-09T06:34:12.107

Yo 甚至可以通过使用 Knockouts 注释绑定语法来获得绑定以删除额外的跨度元素：

```
<label>
<input type="checkbox" data-bind="value: $data.optionvalue, 
       checked: $parent.selectedOptions" />
<!-- ko text: $data.optiontext --><!-- /ko --></label> 
```

如果在狭窄的空间中使用，这将防止复选框和跨度分成两行。

# java - android 中 MDM 的可能功能？

> ID：13660609
> 
> 赞同：0
> 
> 时间：2012-12-01T14:57:30.593
> 
> 标签：java, android

我正在为 android 设备做一个移动设备管理 (MDM) 解决方案。我发现此应用程序可能具有的一些功能：

1.  遥控锁
2.  抹掉数据
3.  密码政策
4.  禁用相机
5.  管理应用程序

我已经完成了上面提到的所有事情。我的应用程序中是否还有其他可能的功能？使用原生android编程的一些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:10:08.513

我认为在 MDM 政策及其实施领域有很多事情要做，例如：

*   备份/恢复。
*   新应用程序安装通知。
*   GPS跟踪和测绘。

有关这些实施的更多信息，您可以从[此处阅读以下内容开始](http://en.wikipedia.org/wiki/Mobile_device_management)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:19:44.113

我可以立即想到的一些是：

1.  监控：管理员可以监控设备状态。这里有很多可用信息，如电池、位置、正常运行时间、网络使用历史等。

2.  设置：管理员可以配置设备。

# batch-file - 用后缀重命名多个文件夹中的多个图像文件 + 创建一个将移动文件的文件夹

> ID：13660612
> 
> 赞同：1
> 
> 时间：2012-12-01T14:58:09.240
> 
> 标签：batch-file, executable, dos, batch-rename

我想知道如何通过 MSDOS 或 VBS 创建脚本/批处理可执行文件，这将执行以下操作。

我有一个名为“ **Movies** ”的文件夹，该文件夹中有几个子文件夹，其中包含“ **jpg,gif,png,srt,sub,avi,mp4,mkv** ”等文件。

***我需要的是：***

0.) 除 ' **jpg,gif,png,srt,sub,avi,mp4,mkv** ' 以外的所有其他文件，其目录已满或为空，必须移至垃圾箱或删除。

1.) 然后我需要在每个子文件夹下创建一个名为“**字幕**”的新文件夹。

2.）然后将每个子文件夹' **jpg,gif,png** '文件下的文件重命名为'**海报1** '，'**海报2** '，'**海报3** '等等......（扩展名没有变化）。

3.) 然后我需要将“ **srt,sub** ”文件移动到创建的“**字幕**”文件夹中。

4.) 然后根据电影文件名重命名“ **srt,sub** ”文件以及包含电影文件的文件夹本身。电影文件可以有扩展名：' **avi,mp4,mkv** '。

5.) 这个可执行文件必须从“**电影**”文件夹中运行，如果可能的话，还可以在屏幕上输出结果（看看做了什么）。

所以基本上在文件夹'**电影**'下将是例如文件夹'**疼痛（2011）** '，其中将包含'**海报1.jpg** '、'**海报2.jpg** '、'**海报?.jpg '文件一个名为'****字幕**'的子文件夹其中将是“ **Pain (2011).srt ”文件，至少文件夹本身的名称和字幕文件将以电影文件“** **Pain (2011).avi** ”命名。当然，所有其他文件都将被移至垃圾箱或删除。

每个想法都非常感谢！

谢谢！

起诉

* * *

**输出：**

* * *

按任意键继续 。. .
文件“monsieur_lazhar_.jpg”重命名为“海报 1.jpg”
文件“monsieur_lazhar__ver2.jpg”重命名为“海报 2.jpg”
文件“海报 1.jpg”重命名为“海报 3.jpg”
按任意键继续。. .

* * *

///文件夹里只有2个jpg文件，其中一个被重命名了两次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:09:38.787

```
@echo off
setlocal EnableDelayedExpansion

set wantedExt=.jpg.gif.png.srt.sub.avi.mp4.mkv

rem I have one folder called 'Movies'
rem This executable file has to be run from the 'Movies' folder
cd /D "%~DP0"
echo BASE FOLDER: %cd%
rem in this folder are several sub-folders with files
set n=0
for /D %%a in (*) do (
   set /A n+=1
   cd "%%a"
   echo ==================================================================
   echo Processing folder: %%a

   rem 0.) Every other file except of 'jpg,gif,png,srt,sub,avi,mp4,mkv' must be moved to trash or deleted.
   for %%b in (*.*) do (
      if "!wantedExt:%%~Xb=!" equ "%wantedExt%" ECHO del "%%b" & echo File deleted: %%b
   )

   rem 0.5.) delete all folders before the 'Subtitles' folder is created
   for /D %%b in (*) do rd /S /Q "%%b"

   rem 1.) Then I need to create under every sub-folder a new folder called 'Subtitles'.
   ECHO md Subtitles
   echo Subtitles folder created

   rem 2.) Then to rename under every sub-folder 'jpg,gif,png' file to 'Poster 1', 'Poster 2', 'Poster 3' and so on... (no change on extension).
   set i=0
   for %%b in (*.jpg *.gif *.png) do (
      set /A i+=1
      ECHO ren "%%b" "Poster !i!%%~Xb"
      echo File "%%b" renamed to "Poster !i!%%~Xb"
   )
   rem PATCH to fix a bug in previous FOR command:
   if !i! neq 0 if not exist "Poster 1.*" (
      ren "Poster !i!.*" "Poster 1.*"
      echo ...and renamed back to "Poster 1"
   )

   rem 3.) Then I need to move the 'srt,sub' file in to the created 'Subtitles' folder.
   rem 4.) ... (to rename the 'srt,sub' file ... according the movie file name)
   rem The movie file can have extension: 'avi,mp4,mkv'.
   for %%b in (*.avi *.mp4 *.mkv) do set movieName=%%~Nb
   echo Movie name: !movieName!
   for %%b in (*.srt *.sub) do (
      ECHO move "%%b" "Subtitles\!movieName!%%~Xb"
      echo File "%%b" moved and renamed to "Subtitles\!movieName!%%~Xb"
   )

   rem 4.) ... (to rename the folder itself which contains the movie file, according the movie file name)
   cd ..
   ECHO ren "%%a" "!movieName!"
   echo Folder "%%a" renamed to "!movieName!"

)
echo ==================================================================
echo %n% FOLDERS PROCESSED
pause 
```

# javascript - Javascript 在浏览器中运行，而不是在带有 cordova 的 phonegap 应用程序中运行

> ID：13660613
> 
> 赞同：0
> 
> 时间：2012-12-01T14:58:18.093
> 
> 标签：javascript, ios, html, cordova

下面的代码用于需要将一些值保存到本地存储中的表单，我已经让它在浏览器中工作，但是当我在 xcode/cordova 中加载这个东西时，它不会触发该功能。我尝试调试，因此有很多很多警报，我在 DWCS6 中尝试使用实时视图，但无济于事，我似乎无法让它运行。你能找到错误吗？

该函数`saveSpanning()`有一个 if 循环，当它退出 if-then-else 循环时，它不会在 xcode 模拟器中继续。在浏览器中它会继续。

***更新***：做什么：有一个滑块，它产生一个值，这个值需要与其他两个值（由 JavaScript 生成）一起保存在本地存储中，即：日期和记录计数。所以总共三个值。

脚本运行，使用 jquery mobile，启动此功能的按钮有效，我使用`document.ready`了`onBodyLoad`，它基本上有效，但该功能`saveSpanning`在 phonegap/ios/xcode 模拟器或设备中没有更进一步。

```
function saveSpanning() {
    alert("saveSpanning gestart!");
    var inputSpanning = document.getElementById("valSliderSpanning").value;
    alert("input spanning = " + inputSpanning);

    //For Time
    var mes_time = document.getElementById("tijdSpanning").value;
    var mestimearr = mes_time.split(":");
    //For Date
    var mes_date = document.getElementById("datumSpanning").value;
    var mesdatearr = mes_date.split("-");
    var d = new Date();
    var curr_date = d.getDate();
    var curr_month = d.getMonth() + 1; //Months are zero based
    var curr_year = d.getFullYear();
    var curr_hours = d.getHours();
    var curr_min = d.getMinutes();
    var curr_sec = d.getSeconds();
    //newDate = curr_year + "/" + curr_month + "/" + curr_date + " " + curr_hours + ":" + curr_min + ":" + curr_sec
    // origienel opmaak datum newDate = mesdatearr[0] + "/" + mesdatearr[1] + "/" + mesdatearr[2] + " " + mestimearr[0] + ":" + mestimearr[1] + ":00";
    newDate = mesdatearr[0] + "/" + mesdatearr[1] + "/" + mesdatearr[2];

    alert("deze datum wordt opgelsage: " + newDate);

    //var itemId = newDate.getTime(); //creates a unique id with the milliseconds since January 1, 1970
    var itemId = "spanningKey";
    var values = new Array();
    values.push(newDate); //push each value into our values array
    values.push(inputSpanning); //push each value into our values array
    //alert(inputSpanning);

    var spanningCountVal = localStorage.getItem('spanning_count');

    //alert(spanningCountVal);
    if (spanningCountVal == null) {
        spanningCountVal = 1;

        alert("spanningCountVal was null, en wordt dus nu 1: " + spanningCountVal);

    }
    else {
        spanningCount = parseInt(spanningCountVal) + 1;
        alert("zit nu in de else loop: " + spanningCount);

    }

    alert("uit de ifthenelseloop, spanningCount = " + spanningCount);

    itemId = itemId + '-rec-' + spanningCount;
    alert("itemid: " + itemId);
    alert("spanningCountVal: " + spanningCount);

    localStorage.setItem("spanning_count", spanningCount); //store the item in the database
    localStorage.setItem(itemId, values.join("|")); //store the item in the database
    alert("Successfully Saved.");
}

$(document).ready(function() {

    $("#button").click(function() {
        alert("hallo functie");
    });

    $("p").text("The DOM is now loaded and can be manipulated.");

    $('#button2').click(function() {
        alert('Button has been clicked');
    });
    $('#knopje').click(function() {
        saveSpanning();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:19:16.543

`document.ready`当所有 DOM 元素都被加载并且可以访问时调用。在浏览器中，这通常是开始执行需要 DOM 准备好的代码的好时机。

但是在 Phonegap/Cordova 中，有许多步骤在`document.ready`事件触发后运行，包括连接到调试控制台。

相反，您需要等待[deviceready](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)事件才能知道 phonegap/cordova 何时完全加载并准备好执行。在里面`$(document).on('ready')`你需要添加一个事件监听器，`deviceready`它应该触发你的方法。

# php - PHP Mysql 搜索问题

> ID：13660622
> 
> 赞同：0
> 
> 时间：2012-12-01T14:59:22.827
> 
> 标签：php, mysql

我正在尝试使用 php 和 mysql 创建一个简单的搜索脚本。我有 html 选择标签，它是

1.  人们
2.  国家
3.  地区
4.  目的地
5.  从
6.  至

有了这个，我从 mysql 数据库中获取内容。所以以下是我的 php 脚本。

```
if(isset($_GET['Submit']) && $_GET['Submit'] == "Search")
{
$people = mysql_real_escape_string(htmlspecialchars(trim($_GET['people'])));
$country =  mysql_real_escape_string(htmlspecialchars(trim($_GET['country'])));
$region =  mysql_real_escape_string(htmlspecialchars(trim($_GET['region-depart'])));
$destination = mysql_real_escape_string(htmlspecialchars(trim($_GET['destination'])));
$from = mysql_real_escape_string(htmlspecialchars(trim($_GET['from'])));
$to = mysql_real_escape_string(htmlspecialchars(trim($_GET['to'])));

if(isset($people))
{

$search = mysql_query("SELECT * FROM property_step1 WHERE pro_no_sleep LIKE 
'%$people%'");
$num = mysql_num_rows($search);

while($result = mysql_fetch_array($search))
    {
        $propertyid = (int) $result['propertyid'];          
        echo $country_d = $result['pro_country'];
        echo $region_d = $result['pro_state'];
        echo $destination_d = $result['pro_city'];

    }
}

elseif(isset($country))
{
$search2 = mysql_query("SELECT * FROM property_step1 WHERE pro_country LIKE 
'%$country%'");
$num = mysql_num_rows($search2);        

while($result2 = mysql_fetch_array($search2))
    {
        $propertyid = (int) $result2['propertyid'];         
        echo $country_d = $result2['pro_country'];
        echo $region_d = $result2['pro_state'];
        echo $destination_d = $result2['pro_city'];

    }
}
else
{
    echo "nope";
}       
} 
```

好吧，如果我选择**人员**（其值为 1、2、3 等），它会显示数据库中的内容，**但是**当我选择**国家**/地区时，它不会显示任何内容。**我的查询**有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:03:57.973

`isset($people)`总是评估为`true`; 你需要检查它是否也不`empty`是：

```
if (isset($people) && !empty($people)) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:03:12.433

您的国家/地区的**elseif**条件正在产生问题，将其替换为**if** only，只写`if...elseif` 一个条件将被执行。

**使用此代码**

```
if (isset($_GET['Submit']) && $_GET['Submit'] == "Search") {
    $people = mysql_real_escape_string(htmlspecialchars(trim($_GET['people'])));
    $country = mysql_real_escape_string(htmlspecialchars(trim($_GET['country'])));
    $region = mysql_real_escape_string(htmlspecialchars(trim($_GET['region-depart'])));
    $destination = mysql_real_escape_string(htmlspecialchars(trim($_GET['destination'])));
    $from = mysql_real_escape_string(htmlspecialchars(trim($_GET['from'])));
    $to = mysql_real_escape_string(htmlspecialchars(trim($_GET['to'])));

    if (isset($people)) {
        $search = mysql_query("SELECT * FROM property_step1 WHERE pro_no_sleep LIKE 
'%$people%'");
        $num = mysql_num_rows($search);

        while ($result = mysql_fetch_array($search)) {
            $propertyid = (int) $result['propertyid'];
            echo $country_d = $result['pro_country'];
            echo $region_d = $result['pro_state'];
            echo $destination_d = $result['pro_city'];
        }
    } 
    if (isset($country)) {
        $search2 = mysql_query("SELECT * FROM property_step1 WHERE pro_country LIKE 
'%$country%'");
        $num = mysql_num_rows($search2);

        while ($result2 = mysql_fetch_array($search2)) {
            $propertyid = (int) $result2['propertyid'];
            echo $country_d = $result2['pro_country'];
            echo $region_d = $result2['pro_state'];
            echo $destination_d = $result2['pro_city'];
        }
    } else {
        echo "nope";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:04:32.310

您正在定义每个变量，因此所有变量将始终“被设置”。

`if(isset($people))`将始终运行，因为它被定义为`isset($country)`永远不会运行。

这需要更改为：

```
if(!empty($people)){

}
if(!empty($country)){

} 
```

# php - 如何在 PHP 中编写这个 ActiveX 函数？

> ID：13660633
> 
> 赞同：0
> 
> 时间：2012-12-01T15:00:17.783
> 
> 标签：php, activex

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function ShowFile(sFilePath){
    var oFileSystem = new ActiveXObject("Scripting.FileSystemObject");
    frmEditHTML.tarHTMLText.value = oFileSystem.OpenTextFile(sFilePath.value).ReadAll();
}

function SaveAfterEditing(sFilePath){
    var oFileSystem = new ActiveXObject("Scripting.FileSystemObject");
    var oFile = oFileSystem.CreateTextFile(frmEditHTML.filPath.value,1);
    oFile.WriteLine(sFilePath.value);
    oFile.Close();
}
</script>
</head>
<body>
<form name="frmEditHTML">
Select the File you want to Edit
<input type=file name="filPath" onchange="ShowFile(this)">
<textarea name="tarHTMLText" cols=60 rows=20></textarea>
<input type="button" value="Save" name="cmdSave"  onclick="SaveAfterEditing(this.form['tarHTMLText'])">
</form>
</body>
</html> 
```

我阅读了此[链接](https://stackoverflow.com/questions/3223915/how-to-open-and-save-text-in-html-to-a-file-using-javascript-in-html)和此[链接](https://stackoverflow.com/questions/3226971/how-to-load-the-contents-in-the-text-file-or-the-html-codes-in-a-html-file-to-a)，但他们无能为力！我不想使用 ActiveX，因为这个功能将仅限于 IE。FireFox 中的 IE Tab 也会导致问题！如何在不使用 ActiveX 的情况下在 PHP 中复制整个函数？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:26:05.227

## 简短的回答：

使用 PHP，您不能完全按原样转换此脚本，因为 ActiveX 是客户端，而 PHP 是服务器端。Javascript 也不能​​为你做这件事，因为现代浏览器是沙盒的，并且 JavaScript 不能访问本地文件系统。

* * *

## 不是那么简短的答案：

但是，您还有其他选择，具体取决于您希望模仿的行为（和实现方法）。

您可以使用 Java Applet，它几乎可以完成您使用 ActiveX 可以完成的工作。跨浏览器始终如一地工作，但用户必须安装 Java 运行时环境。

您可以混合使用 PHP + Javascript (AJAX)。您将文件上传到服务器，然后使用 Javascript（通过 Ajax 的 HTTP 请求）控制 PHP 操作。

* * *

## 黑客的方式

有一种简单的方法可以处理这种情况。虽然需要一个服务器。

1.  创建一个将文件上传到服务器的页面。
2.  然后通过 AJAX（或任何请求，无关紧要）将文件发送回浏览器。
3.  使用 javascript 在客户端（浏览器）中操作文件。
4.  将文件交给用户下载。

# macos - ZSH 中的 %~ （百分号）是什么？

> ID：13660636
> 
> 赞同：9
> 
> 时间：2012-12-01T15:00:47.067
> 
> 标签：macos, shell, zsh

我正在尝试自定义[这个](https://github.com/robbyrussell/oh-my-zsh/blob/master/themes/agnoster.zsh-theme)oh-my-zsh 主题。

我在其中找到了这段代码，它显然打印了目录名称（如果我错了，请纠正我）。

```
# Dir: current working directory
prompt_dir() {
  prompt_segment blue black '%~'
} 
```

并且 prompt_segment 定义为

```
# Begin a segment
# Takes two arguments, background and foreground. Both can be omitted,
# rendering default background/foreground.
prompt_segment() {
  local bg fg
  [[ -n $1 ]] && bg="%K{$1}" || bg="%k"
  [[ -n $2 ]] && fg="%F{$2}" || fg="%f"
  if [[ $CURRENT_BG != 'NONE' && $1 != $CURRENT_BG ]]; then
    echo -n " %{$bg%F{$CURRENT_BG}%}$SEGMENT_SEPARATOR%{$fg%} "
  else
    echo -n "%{$bg%}%{$fg%} "
  fi
  CURRENT_BG=$1
  [[ -n $3 ]] && echo -n $3
} 
```

它的输出并不总是只是目录路径。如果我所在的路径也存在于 ENV 变量中，它将用该变量替换路径。

如果我在

```
/Users/abc/.oh-my-zsh/custom 
```

$ZSH_CUSTOM 是

```
/Users/abc/.oh-my-zsh/custom 
```

我只是进入`$ZSH_CUSTOM`命令提示符。

所以我的问题是，1）`%~`发送的内容是什么`prompt_dir`，2）这段代码从哪里获取当前工作目录，以及 3）我怎样才能让它*总是*输出真实的路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-01T15:07:38.383

见`EXPANSION OF PROMPT SEQUENCES`部分`man zshmisc`：

> ```
>  %d
>    /      Current  working  directory.   If an integer follows the `%', it
>           specifies a number of trailing components of the current working
>           directory  to show; zero means the whole path.  A negative inte‐
>           ger specifies leading components, i.e. %-1d specifies the  first
>           component.
> 
>    %~     As  %d  and %/, but if the current working directory has a named
>           directory as its prefix, that part is replaced by a `~' followed
>           by  the  name  of  the directory.  If it starts with $HOME, that
>           part is replaced by a `~'. 
> ```

# css - 检索包含的旋转 div 的正确位置

> ID：13660638
> 
> 赞同：0
> 
> 时间：2012-12-01T15:00:57.543
> 
> 标签：css, html, position

我有一个便笺，它直接添加到 html 页面的正文中。还有一个 CSS 部分可以让粘滞便笺在悬停在它们上方时变得更大一些。

此外，便笺应该通过 CSS 旋转。另外，我有一些javascript代码应该在窗口卸载之前保存便笺的位置，然后检索便笺并将其放在卸载窗口之前的相同位置。但是，旋转的便签出现了问题，因此当便签被检索并放回正文时，它们的位置与刷新页面之前的位置略有偏离。（不旋转便签时不会发生这种情况）

为了解决这个问题，我将每个便笺包含在其自己的stickyContainer div 中，该div 不会旋转，以便在卸载事件后可以检索到stickycontainer 的正确位置。

html:

```
<div class="stickyContainer" style="left:20px;top:70px">
    <div class="stickyNote">
        <h1>Drag Me</h1>
        <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum..</p>
    </div><!--stickynote-->
</div> <!--stickycontainer-->​ 
```

CSS：

```
.stickyNote { 
    margin: auto;
    width:auto;
    height:auto;
    background: yellow; /* Fallback */
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EBEB00), to(#C5C500));
    background: -moz-linear-gradient(100% 100% 90deg, #C5C500, #EBEB00);
    padding: 20px 20px 20px 20px;
    /*position:absolute;*/
    "zIndex": 3000;
    rotating the post it by 6 degrees to the left
    -webkit-transform:rotate(-6deg);  
    -o-transform:rotate(-6deg);  
    -moz-transform:rotate(-6deg);
    -webkit-box-shadow: 0px 10px 30px #000;
    -moz-box-shadow: 0px 10px 30px #000;
}

.stickyContainer {
    background-color: green;
    background: green;
    padding: 10px;
}

.delete {
    cursor:pointer;
    font-size:120%;
}

.stickyNote p {
    font-family: "Reenie Beanie", Helvetica, sans-serif;
    font-size: 30px;
    line-height: 35px;
    margin: 10px 0 10px 0;
    width: 280px;
}

/* creating the effect when the cursor is over that item.*/
.stickyNote:hover,.stickyNote:focus{  
    -moz-box-shadow:10px 10px 7px rgba(0,0,0,.7);  
    -webkit-box-shadow: 10px 10px 7px rgba(0,0,0,.7);  
    box-shadow:10px 10px 7px rgba(0,0,0,.7);  
    -webkit-transform: scale(1.25);  
    -moz-transform: scale(1.25);  
    -o-transform: scale(1.25);  
    position:absolute;  
    z-index:5;  
}

.toolbar {
    text-align:right;
    font-weight:bold;
}​ 
```

然而，现在便笺的行为很奇怪：

[jsfiddle](http://jsfiddle.net/TheBaj/MRQc9/)：正如您在第一个 jsfiddle 中看到的那样，（黄色）便笺在未悬停时水平扩展以适应其（绿色）容器的大小，而当悬停时，便笺不再包含在其容器中。

[jsfiddle2](http://jsfiddle.net/TheBaj/MRQc9/1/)：在第二个jsfiddle中，在便笺周围没有stickyContainer div的地方，悬停功能正确执行，由于某种原因，旋转在js fiddle中不起作用（但在我的项目中起作用），并且当有旋转时，如上所述，在卸载之前检索便笺的位置会产生略微偏离的结果。

问题：刷新后我必须更改什么以检索粘滞容器的正确位置，并且让粘滞容器仅扩展至包含粘滞便笺 div 所需的量。以及如何在粘滞容器中使粘滞便笺的旋转工作？

# svg - (RaphaelJS) - 如何填充路径的内部？

> ID：13660643
> 
> 赞同：10
> 
> 时间：2012-12-01T15:01:48.733
> 
> 标签：svg, raphael, vector-graphics

我有 RaphaelJS 库的路径，我似乎无法通过填充来更改其颜色。

```
var mypage = ScaleRaphael('mainContainer', 1000, 1000);
 mypage.setStart();
mypath.path('M794.33,21.5l152.3-0.76L946,21.5v-0.22l1.39,0.01l-1.17,206.61l-0.04,0.3l-0.15,0.27l-0.04,0.07l-0.18,0.35l-0.34,0.2 L786.4,321.59l-159.22,92.27l-2.12,1.18l-0.07-2.36v-1v-0.28l0.18-0.26l42.1-97.5l42.26-97.43l21.13-48.71l21.21-48.68 L794.33,21.5z M794.33,21.5l-41.46,97.76l-20.76,48.87l-20.84,48.83l-41.68,97.67l-41.78,97.59l0.18-0.54v1l-2.11-1.18 l159.08-92.46l159.23-92.21l-0.52,0.54l0.03-0.07l-0.14,0.57l2.04-206.6l1.39,0.01v0.22l0.13,0.77l-0.69,0L794.33,21.5z')
    .attr({"type":"path","stroke":"none","fill":"blue"}); 
```

路径创建正确，但填充属性只会使笔触变为蓝色而不是填充，我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T19:26:41.763

您的路径的形状像笔触，通过删除从第二个开始的所有内容来填充修改路径`M`：

```
var stage = Raphael('stage',1000, 1000);
var path = stage.path('M794.33,21.5l152.3-0.76L946,21.5v-0.22l1.39,0.01l-1.17,206.61l-0.04,0.3l-0.15,0.27l-0.04,0.07l-0.18,0.35l-0.34,0.2 L786.4,321.59l-159.22,92.27l-2.12,1.18l-0.07-2.36v-1v-0.28l0.18-0.26l42.1-97.5l42.26-97.43l21.13-48.71l21.21-48.68 L794.33,21.5z')
    .attr({"type":"path","stroke":"none","fill":"blue"});​ 
```

[http://jsfiddle.net/YzMCG/](http://jsfiddle.net/YzMCG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T10:42:51.327

这里有一个很好的解释，建议在 CSS 中添加一个透明填充，以隐藏彩色填充并使其看起来像一条路径：

[Raphael Js 无法用图像填充路径](https://stackoverflow.com/questions/15924193/raphael-js-cant-fill-path-with-image)

# sql - 在 SQL Server 查询中使用单元格内容作为函数的参数

> ID：13660645
> 
> 赞同：0
> 
> 时间：2012-12-01T15:02:09.483
> 
> 标签：sql, sql-server, tsql

我刚开始使用 SQL Server，我想根据另一列设置表的一列（自动并且两列都在同一个表中）。我写了一个这样的函数：

```
ALTER FUNCTION [dbo].[FloorNameConvertor] 
(
    @Number int
)    
RETURNS nchar(10) 
AS
BEGIN
RETURN 
(       CASE 
            WHEN @Number/100=1 THEN 'x'
            WHEN @Number/100=2 THEN 'y'
            ELSE 'w'
        END 
)
END 
```

我在列属性的默认值中使用它。我无法将单元格的值作为参数发送（我无法选择一个单元格）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:15:34.400

您不能在默认约束中使用其他列名。您可以使用触发器来解决它`INSTEAD OF INSERT`或使用计算列（虽然不持久）。

# json - F# NameValueCollection 映射

> ID：13660647
> 
> 赞同：0
> 
> 时间：2012-12-01T15:02:21.507
> 
> 标签：json, map, f#, mailmessage, namevaluecollection

我有一个 NameValueCollection，我需要将其转换为 Map，但我无法解决。我试过：

```
let headerMap (m : MailMessage) = m.Headers |> Map.map (fun k v -> v.[k]) 
```

我需要改用 Seq.map 吗？

基本上，我想将 System.Net.MailMessage 中的标头序列化为 JSON。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:10:02.533

```
nvc.AllKeys
|> Seq.map (fun key -> key, nvc.[key])
|> Map.ofSeq 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T16:40:32.167

丹尼尔的回答会很好，但我想我会提供一些额外的选择：

**Array.fold** -- 这应该比 Daniel 的版本更快，因为它避免了迭代器的开销。

```
let mapOfNameValueCollection (collection : NameValueCollection) =
    (Map.empty, collection.AllKeys)
    ||> Array.fold (fun map key ->
        let value = collection.[key]
        Map.add key value map) 
```

**带有值集的 Array.fold** - 类似于上面的代码，但将值作为 a 返回，`Set<string>`如果您想确定某个值是否在返回的值集中，这可能很有用。

```
let mapOfNameValueCollection (collection : NameValueCollection) =
    (Map.empty, collection.AllKeys)
    ||> Array.fold (fun map key ->
        let valueSet =
            match collection.[key] with
            | null ->
                Set.empty
            | values ->
                Set.ofArray <| values.Split [| ',' |]
        Map.add key valueSet map) 
```

**递归循环**——使用递归循环逐项创建地图。我不会在实践中使用它，因为该`Array.fold`版本会更容易和更快。但是，如果您使用的特定集合类（派生自`NameValueCollection`）覆盖该`AllKeys`属性并且有一些奇怪的内部行为需要很长时间才能返回该属性值，则此方法可能会更快。

```
let mapOfNameValueCollection (collection : NameValueCollection) =
    let rec createMap map idx =
        if idx < 0 then map
        else
            let itemName = collection.GetKey idx
            let itemValue = collection.[itemName]
            let map = Map.add itemName itemValue map
            createMap map (idx - 1)

    createMap Map.empty (collection.Count - 1) 
```

**命令式循环**——使用命令式循环逐项创建地图。与递归循环一样，我更愿意`Array.fold`在实践中使用，除非有特殊原因不使用。

```
let mapOfNameValueCollection (collection : NameValueCollection) =
    let mutable map = Map.empty

    let maxIndex = collection.Count - 1
    for i = 0 to maxIndex do
        let itemName = collection.GetKey i
        let itemValue = collection.[itemName]
        map <- Map.add itemName itemValue map

    map 
```

# c# - 更新屏幕/显示器上的数据信息

> ID：13660650
> 
> 赞同：1
> 
> 时间：2012-12-01T15:02:50.577
> 
> 标签：c#, silverlight, windows-phone-7

我希望我的应用程序在代码执行时更新屏幕信息。我试过了，`this.LayoutRoot.UpdateLayout();`但没有用，我不明白为什么。谁能帮我？应用程序从单击的按钮接收按钮属性，然后将其用于 Model 类中的几件事，然后我希望它向用户显示一条消息。之后我希望它继续执行更多的事情（AI）......：S

```
public void showMsgFromModel(string player, string msg)
    {
        if(player!="")
            txNomeMsg.Text = player + ":";
        else
            txNomeMsg.Text = player;

        txMsg.Text = msg;
        this.LayoutRoot.UpdateLayout();
        System.Threading.Thread.Sleep(1500);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:19:54.840

您正在尝试从 UI 线程进行一些处理，因此无法更新界面。

使用后台工作人员执行长时间运行的任务，并在需要更新 UI 时使用调度程序：

```
var worker = new BackgroundWorker();

worker.DoWork += (s, e) =>
{
    Thread.Sleep(1500); // Some processing

    Dispatcher.BeginInvoke(() => txMsg.Text = "Hello"); // Update the UI

    Thread.Sleep(1500); // More processing
};

worker.RunWorkerAsync(); 
```

# visual-studio-2010 - 在 Visual Studio 2010 中使用实体框架 4.1 定位 x64 平台

> ID：13660652
> 
> 赞同：2
> 
> 时间：2012-12-01T15:02:58.193
> 
> 标签：visual-studio-2010, entity-framework-4.1, autocad, autocad-plugin

我有一个引用 Entity Framework 4.1 的数据库应用程序。在项目的属性窗口中，**配置**和**平台**选择选项都被禁用。我不想将此应用程序仅针对 x64 系统。

在同一解决方案中还有一些其他项目，它们只有 x86 选项可用作平台。

我不明白为什么我不能专门针对 x64 系统。我的电脑上运行的是 Windows 7 64 位。

任何线索如何专门针对基于 x64 的系统。所有项目都参考 .Net Framework 4。

仅显示“任何 CPU”选项的项目屏幕截图

![在此处输入图像描述](../Images/8f8b1b944183ed11ca803b6b85df8cd1.png)

**编辑 1：为什么我需要针对 x64 系统。**

实际上，我正在开发的 dll 必须在 Autocad x64 系统中加载。但是，当我尝试将 dll 加载到 Autocad 中时，它会拒绝 dll，并出现以下错误

```
NETLOAD Cannot load assembly. Error details: System.BadImageFormatException: 
Could not load file or assembly 
'file:///D:\RailwayProjects\RelayAnalysis_New\RelayAnalysis_Autocad\bin\Debug\Gl
obalArea.dll' or one of its dependencies. An attempt was made to load a program 
with an incorrect format.
File name: 
'file:///D:\RailwayProjects\RelayAnalysis_New\RelayAnalysis_Autocad\bin\Debug\Gl
obalArea.dll'
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String 
codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, 
StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean 
forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName 
assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean 
forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, 
Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm 
hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, 
StackCrawlMark& stackMark)
   at System.Reflection.Assembly.LoadFrom(String assemblyFile)
   at Autodesk.AutoCAD.Runtime.ExtensionLoader.Load(String fileName)
   at loadmgd()
WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value 
[HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure 
logging.
To turn this feature off, remove the registry value 
[HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

我强烈怀疑 Autocad x64 拒绝 dll，因为它不是 x64 格式，尽管我在这里可能错了。所以现在我将问题的范围扩大到包括 AutoCAD，因为问题的根源是在 AutoCAD 中加载 dll。我在网上搜索了一下，发现 AutoCAD 对 x32 和 x64 类型非常挑剔。用于开发 Autocad 插件的原生开发环境**AutoCAD.net**也可在 x32 和 x64 类型下单独使用，我认为使用 x32 开发的插件不会在 x64 类型的 Autocad 版本中运行，反之亦然。所以，我需要具体说明 Autocad 插件的目标平台

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:58:34.680

在配置管理器中，有一个创建新配置的选项，我们可以在其中选择 x64 作为目标平台。

关于 AutoCAD 2012，它对平台类型非常严格。64 位 AutoCAD 2012 将接受**“任何 CPU”**和**x64**目标插件，但不接受 x86。这与我们可以在 x64 系统上运行 x86 应用程序的约定有点不同。我将所有项目都定位到 x64 并在 AutoCAD 中加载它们而没有任何错误。

所以我的问题解决了。

# .net - 按条件调用网络服务

> ID：13660656
> 
> 赞同：1
> 
> 时间：2012-12-01T15:03:20.683
> 
> 标签：.net, web-services

我正在使用 2 个网络服务`RepoServe1`和`RepoServe2`

当用户登录时有标志`isNew`

```
if(isNew)
{
  main.RepoServe1.RepoClient objClient = new main.RepoServe1.RepoClient(); 
}
else
{
  main.RepoServe2.RepoClient objClient = new main.RepoServe2.RepoClient(); 
}
main.RepoServe2.Customer objCusotmer = new main.RepoServe2.Customer();
objCusotmer  = objClient.GetData(); 
```

这是调用服务的普通方式。

我想创建返回服务的 ClientObject 的函数。

谁知道路？？

# erlang - 从一个节点向另一个节点发送 Erlang 消息返回 badarg

> ID：13660657
> 
> 赞同：3
> 
> 时间：2012-12-01T15:03:22.367
> 
> 标签：erlang

我正在尝试学习 Erlang，但在向另一个节点发送消息时遇到问题。该程序只是一个非常简单的乒乓球，应该像这样工作。我在节点 m1@ASUS-N55SF 上启动一个程序。它创建了一个进程，并成功地在节点 m2 上生成了一个进程。所以我得到了包含 {PidPing, PidPong} 元组的 Pids。PidPing 和 PidPong 是进程 id，如 <0.X.0> 和 <YZ0>。
之后我调用 ps5:start_pinging(Pids) 函数，我得到一个错误：

```
Pinging started
Ping received 0 on <0.53.0>
{ping,{<0.53.0>,<6807.43.0>},0}
Nodes: 'm1@ASUS-N55SF' 'm2@ASUS-N55SF'
(m1@ASUS-N55SF)8> 
=ERROR REPORT==== 1-Dec-2012::15:27:18 ===
Error in process <0.53.0> on node 'm1@ASUS-N55SF' with exit
value: {badarg,[{ps5,loop_ping,0,[{file,"ps5.erl"},{line,33}]}]} 
```

因此，初始消息到达 PidPing 和 loop_ping 接收并成功匹配，但我无法将消息发送到另一个节点，即使它们彼此可见。这成功了，因为此初始消息是在同一节点上发送的：

```
PidPing ! {pong, {PidPing, PidPong}, 0}. 
```

据我了解，要向另一个节点发送消息，我应该发送如下消息：

```
{PidPong, ?NODE_TP} ! {pong, {PidPing, PidPong}, Number + 1}, 
```

但它返回badarg。节点已连接，使用相同的 cookie 启动，运行在同一台机器上，并且可以互相 ping 通并且可见。它们在同一个文件夹中启动，因此它们查看相同的 ps5.erl 文件。我也在不同的文件夹中尝试过，但也不起作用。如果代码在 seme 节点上运行，它可以工作，只需删除另一个节点上的 spawn 并在同一节点上进行进程。

这是代码：

```
-module(ps5).
-define(NODE_AS, 'm1@ASUS-N55SF').
-define(NODE_TP, 'm2@ASUS-N55SF').
%-define(NODE_TP, 'm2@ThinkPad-Z60m').

-compile(export_all).
start() ->
  PidPing = ps5:start_ping(),
  PidPong = ps5:start_pong(),
  Pids = {PidPing, PidPong}.

start_ping() ->
  Pid = spawn(?NODE_AS, ps5, loop_ping, []).

start_pong() ->
  Pid = spawn(?NODE_TP, ps5, loop_pong, []).

start_pinging({PidPing, PidPong}) ->
  io:format("Pinging started ~n", []),
   PidPing ! {ping, {PidPing, PidPong}, 0}.

stop({PidPing, PidPong}) ->
  exit(PidPing, normal),
  exit(PidPong, normal).

loop_ping() ->
  receive
    {ping, {PidPing, PidPong}, Number} when Number < 10  ->
      io:format("Ping received ~p on ~p~n", [Number, PidPing]),
      io:format("Nodes: ~p ~p ~n", [?NODE_AS, ?NODE_TP]),
      {PidPong, ?NODE_TP} ! {pong, {PidPing, PidPong}, Number + 1},
      io:format("Ping sent ping ~p to ~p~n", [Number, PidPong]),
      ps5:loop_ping();
    {ping, {PidPing, PidPong}, Number} when Number >= 10->
      io:format("Ping received ~p on ~p~n and closing.~n", [Number, PidPing]);
    Oops ->
      io:format("Oops received: ~p~n", [Oops]),
      ps5:loop_ping()
  end.

loop_pong() ->
  receive
   {pong, {PidPing, PidPong}, Number} when Number < 10  ->
     io:format("Pong received ~p on ~p~n", [Number, PidPong]),
     io:format("Nodes: ~p ~p ~n", [?NODE_AS, ?NODE_TP]),
     {PidPing, ?NODE_AS} ! {ping, {PidPing, PidPong}, Number + 1},
     io:format("Pong sent ping ~p to ~p~n", [Number, PidPing]),
     ps5:loop_pong();
   {pong, {PidPing, PidPong}, Number} when Number >= 10->
     io:format("Pong received ~p on ~p~n and closing.~n", [Number, PidPing]);
   Oops ->
     io:format("Oops received: ~p~n", [Oops]),
     ps5:loop_pong()
  end. 
```

编译期间有一些警告，但它们与这个问题无关（至少我相信如此）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T15:44:31.117

该构造`{Registered_process_name, Erlang_node} ! Some_message`用于向您不知道其 PID的远程**注册进程发送消息。**

在您的情况下，您知道 pids（并且进程未注册），这意味着您不能使用`{name, node} ! message`而是`PID ! message`更改：

```
{PidPong, ?NODE_TP} ! {pong, {PidPing, PidPong}, Number + 1}, 
```

到

```
PidPong ! {pong, {PidPing, PidPong}, Number + 1}, 
```

和

```
{PidPing, ?NODE_AS} ! {ping, {PidPing, PidPong}, Number + 1}, 
```

到

```
PidPing ! {ping, {PidPing, PidPong}, Number + 1}, 
```

# android - 用 arrayadapter 填充 Listview >

> ID：13660662
> 
> 赞同：2
> 
> 时间：2012-12-01T15:03:36.697
> 
> 标签：android, android-intent

我正在使用以下代码，但它不填充列表视图。

```
 ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
    lv.setAdapter(new ArrayAdapter<HashMap<String, String>> (this,android.R.layout.simple_list_item_1 , menuItems)); 
```

问题是上面的代码成功创建了适配器，但它没有显示在列表视图中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:36:53.373

您可以实现 SimpleAdapter 来填充 HashMap 的 ArrayList 中的数据，如下所示：

```
SimpleAdapter listadapter = new SimpleAdapter(this, menuItems, R.layout.row,

new String[] {"textone", "texttwo", "txtthree"}, new int[] 

{R.id.textone, R.id.texttwo, R.id.texttwo}); 
```

但是为了实现[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html)，您必须为行创建一个布局，其中包含您想要的单行视图

如需更多帮助，您可以查看以下教程以使用 hashMap 的 ArrayList 填充 ListView：

[http://shenhengbin.wordpress.com/2012/03/17/listview-simpleadapter/](http://shenhengbin.wordpress.com/2012/03/17/listview-simpleadapter/)

[http://shenhengbin.wordpress.com/2012/03/17/listview-simpleadapter/](http://shenhengbin.wordpress.com/2012/03/17/listview-simpleadapter/)

# java - 无法加载 OrientDB rw - “无法加载数据库的配置。数据库似乎已损坏。”

> ID：13660674
> 
> 赞同：2
> 
> 时间：2012-12-01T15:05:07.253
> 
> 标签：java, database, orientdb

我正在尝试为我正在编写的应用程序配置数据库。我已经启动了 OrientDB 服务器并创建了一个数据库，以及一个用户名和密码。我希望能够将我的应用程序与此联系起来，但我目前正处于测试阶段。

这是测试：` static OObjectDatabaseTx db; 静态people.group组；

```
public static void main(String[] args) 
{ 
    try {

        db = new OObjectDatabaseTx("local:/Users/<me>/Documents/Java/OrientDB/Sources/releases/orientdb-1.3.0-SNAPSHOT/databases/people");
        System.out.println("db made");
        db.open("nick", "nick");
        System.out.println("db open");

        group = new people.Group();
        System.out.println("group made");

        db.save(group);

        System.out.println("group saved");
        System.out.println(group);

    } catch (Exception e) {

        System.out.println("Not succeed - " + e.getMessage());
        e.printStackTrace();
    } finally {

        if( db != null ) {
            db.close();
        }

    }

}` 
```

运行时，输出：

在 com.orientechnologies.orient.core.db.ODatabaseWrapperAbstract.open(ODatabaseWrapperAbstract.java:47) 在 com.orienttechnologies.orient.object.db.OObjectDatabaseTx.open(OObjectDatabaseTx.java:99) 上打开(ODatabaseWrapperAbstract.java:47)在 db.ToFromByte.main(ToFromByte.java:34) 引起：com.orientechnologies.orient.core.exception.OSerializationException：无法加载数据库的配置。数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 orientechnologies.orient.core.db.ODatabaseWrapperAbstract.open(ODatabaseWrapperAbstract.java:47) 在 com.orienttechnologies.orient.object.db.OObjectDatabaseTx.open(OObjectDatabaseTx.java:99) 在 db.ToFromByte.main(ToFromByte.java: 34) 原因：com.orientechnologies.orient.core.exception.OSerializationException：无法加载数据库的配置。数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 orientechnologies.orient.core.db.ODatabaseWrapperAbstract.open(ODatabaseWrapperAbstract.java:47) 在 com.orienttechnologies.orient.object.db.OObjectDatabaseTx.open(OObjectDatabaseTx.java:99) 在 db.ToFromByte.main(ToFromByte.java: 34) 原因：com.orientechnologies.orient.core.exception.OSerializationException：无法加载数据库的配置。数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 orientechnologies.orient.object.db.OObjectDatabaseTx.open(OObjectDatabaseTx.java:99) at db.ToFromByte.main(ToFromByte.java:34) 原因：com.orientechnologies.orient.core.exception.OSerializationException：无法加载数据库的配置. 数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 orientechnologies.orient.object.db.OObjectDatabaseTx.open(OObjectDatabaseTx.java:99) at db.ToFromByte.main(ToFromByte.java:34) 原因：com.orientechnologies.orient.core.exception.OSerializationException：无法加载数据库的配置. 数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 OSerializationException：无法加载数据库的配置。数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多 OSerializationException：无法加载数据库的配置。数据库似乎已损坏。在 com.orientechnologies.orient.core.storage.impl.local.OStorageConfigurationSegment.load(OStorageConfigurationSegment.java:73) 在 com.orienttechnologies.orient.core.storage.impl.local.OStorageLocal.addDefaultClusters(OStorageLocal.java:215)在 com.orientechnologies.orient.core.storage.impl.local.OStorageLocal.open(OStorageLocal.java:143) ... 7 更多

所以代码在这行代码上失败了： db.open("nick", "nick"); 这里会发生什么？该数据库似乎可以通过 OrientDB 服务器访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:43:09.600

可能数据库现在已损坏，因为服务器和本地同时运行？

# javascript - jQuery：JSON.stringify 在保存 cookie 后更改了我的对象值

> ID：13660679
> 
> 赞同：2
> 
> 时间：2012-12-01T15:05:33.637
> 
> 标签：javascript, jquery, json, stringify

> **可能重复：**
> [cookie 中允许的字符](https://stackoverflow.com/questions/1969232/allowed-characters-in-cookies)

我正在使用`JSON.stringify`转换对象以将其保存在 cookie 中。但是在 cookie 中保存阿拉伯语 Windows-1256 编码后，我无法恢复它。这是我所做的：

例如：

转换并保存在 cookie 中。

```
conv[user]   = {"user":1,"u":1,"m":3,"c":255,"comment":'السلام عليكم ورحمه الله'};
addCookie('chat_conversations', JSON.stringify(conv) , 7); 
```

从 cookie 中恢复值：

```
var con  = is_cookie('chat_conversations');
conv = jQuery.parseJSON(con); 
```

获取我的 JSON 结果：

```
alert(conv[1].comment); 
```

结果

> "'D3D'E 9DJCE H1-EG 'DDG H(1C'*G\n"

这是我的 cookie 的结果

> chat_conversations={"1":{"user":"1","u":"1","m":3,"c":255,"comment":"'D3D'E 9DJCE H1-EG' DDG H(1C'*G\n"}}; expires=Sat, 08 Dec 2012 15:00:42 GMT; path=/; domain=127.0.0.1

How can I save an object containing Arabic in a cookie and restore it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:29:23.230

You should sanatise strings going into a cookie using `escape` or `encodeURIComponent` (minor differences between the two, see below) and then reverse this via `unescape` or `decodeURICompontent` when retrieving the data.

```
// Create obj using safe chars only
conv[user] = {
    "user" : 1, // (numbers are fine as they are)
    "u" : 1,
    "m" : 3,
    "c" : 255,
    "comment" : escape('السلام عليكم ورحمه الله') // by escaping potentially unsafe chars
};
// save
addCookie('chat_conversations', JSON.stringify(conv) , 7);
// retrieve
var con  = is_cookie('chat_conversations');
conv = jQuery.parseJSON(con);

var comment = unescape(conv[1].comment); // unescape what was escaped earlier
alert(comment);
// "السلام عليكم ورحمه الله" 
```

`escape` is fine because you just want to use this data in JavaScript. If you want to access the cookie server-side then I'd strongly recommend using `encodeURIComponent`.

If you are just using it for JavaScript, consider `window.localStorage` because it will cause less internet usage.

# nsis - 如何在 NSIS 中包含两个自定义页面？

> ID：13660684
> 
> 赞同：1
> 
> 时间：2012-12-01T15:06:20.390
> 
> 标签：nsis

我使用 NSIS 脚本创建了 EXE 文件。我使用以下代码创建了自定义页面，

```
page custom check

Function check
    ReadRegStr $R0 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\My app" "UninstallString"
    IfFileExists $R0 +1 NotInstalled
        call nsDialogpage

    NotInstalled:
FunctionEnd

Function nsDialogpage
     nsDialogs::Create 1018
     Pop $Dialog12
     ${If} $Dialog12 == error
         Abort
     ${EndIf}
     ${NSD_CreateRadioButton} 0 5u 100% 10u "Repair"
     Pop $Repair
     ${NSD_CreateRadioButton} 0 25u 100% 56u "Remove"
     Pop $Remove
     ${NSD_SetState} $Repair ${BST_CHECKED}
     ${NSD_GetState} $Repair $test
     --Do repair operation--
     ${NSD_OnClick} $Remove "Remove"
     nsDialogs::Show
     ${NSD_GetState} $Remove $RadioButton_State
     ${If} $RadioButton_State == ${BST_CHECKED}
         call Removed
     ${Else}
         Goto Done
     ${EndIf}
     Done:
FunctionEnd    

Function Remove
     nsDialogs::Create 1018
     Pop $Dialog12
     ${If} $Dialog12 == error
           Abort
     ${EndIf}
        --Do remove function--
      /* nsDialogs::Show*/
 FunctionEnd 
```

如果我运行上面的代码它不起作用。在显示函数之后没有执行代码。如果我在 functionEnd 之前给出显示函数它会抛出运行时异常。因为在删除函数内部还有一个 show()。

我的要求是，

如果用户单击删除单选按钮，则转到下一页并执行卸载过程，页面结束。我已经使用上面的代码尝试了这种情况。但它工作正常。

如何在 nsis 安装程序中包含两个自定义页面？

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:04:34.293

您可以像添加自定义页面一样添加两个自定义页面：

```
Page custom check 
Page custom Remove 
```

正如**安德斯**所说，你放在后面的所有东西都`nsDialogs::Show`不会被执行。您需要将此代码移至新的“离开”函数：

```
Var RemoveRequested
Function RemoveCheck
    ${NSD_GetState} $Remove $RadioButton_State
    ${If} $RadioButton_State == ${BST_CHECKED}
        StrCpy $RemoveRequested "1"
    ${Else}
        StrCpy $RemoveRequested "0"
    ${EndIf}
FunctioEnd 
```

您将用户选择保存在全局变量`$RemoveRequested`中。然后，在下一个自定义页面中，您可以检查此变量，并执行您需要的任何操作，否则`Abort`第二页将不会显示。

然后，您需要修改自定义页面声明：

```
Page custom check RemoveCheck
Page custom Remove 
```

现在，`check`将用于显示自定义页面，当用户离开页面时（== 点击“下一步”），该函数`RemoveCheck`将被执行。

您的 Remove 函数应该检查我们刚刚创建的标志：

```
Function Remove
    ${If} $RemoveRequested == "1"
        nsDialogs::Create 1018
        Pop $Dialog12
        ${If} $Dialog12 == error
            Abort
        ${EndIf}
        --Do remove function--
        /* nsDialogs::Show*/
    ${EndIf}
FunctionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:03:12.710

`nsDialogs::Show`页面基本没有了之后，在 leave 回调中做你的工作：`Page custom nsDialogpage dotheradiocheckinthisfunction`

# php - exec()、shell_exec()、curl_exec() 的安全漏洞

> ID：13660685
> 
> 赞同：0
> 
> 时间：2012-12-01T15:06:23.560
> 
> 标签：php, security, shell, curl, shell-exec

有时，我使用 exec()、shell_exec() 和 curl_exec()。以下是典型用途。假设我在其中有一个 PHP 变量（即第一个变量中的 $html），用户就有可能修改其内容。

从安全漏洞的角度来看，我应该关注什么？escapeshellcmd() 和 escapeshellarg() 是答案吗？如果是，应该在哪里使用？

```
$cmd='echo "html + '.$html.'" | htmldoc --format pdf > '.$filename;
$cmd='/usr/bin/convert '.$docs.' '.$filename;
$cmd='HOME='.$dir.'; /usr/bin/libreoffice3.5 --headless -convert-to pdf --outdir '.$dir.' '.$file_org;
$cmd='wget -O '.$file_org.' "'.$url.'"';
$cmd='/opt/wkhtmltopdf/bin/wkhtmltopdf "'.$url.'" '.$paramaters;
$cmd='/usr/bin/php -q '.$worker.' '.$session_id.' >/dev/null &';
exec($cmd);

$cmd='sendfax -n -m -w -i '.$id.' -o JohnDoe -D -S "hello@gmail.net" -s "us-leg" -f "'.$from.'" -d "'.$to.'" '.$doc_list;
$cmd = "faxstat -s | grep \"^$jid \"";
$output = shell_exec($cmd);

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_USERAGENT, $_GET['user_agent'] ? $_GET['user_agent'] : $_SERVER['HTTP_USER_AGENT'] );
curl_setopt($ch,CURLOPT_POSTFIELDS,array('aaa'=>$aaa,'bbb'=>$bbb));
$result = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:26:05.653

如果您没有正确验证和/或转义输入值，任何人都可以代表运行 PHP 的用户在您的系统上执行任意命令。

对于命令参数，有[`escapeshellarg`](http://php.net/escapeshellarg). 确保您转义整个参数值，例如：

```
$cmd='echo '.escapeshellarg('html + '.$html).' | htmldoc --format pdf > '.escapeshellarg($filename);
$cmd='/usr/bin/convert '.escapeshellarg($docs).' '.escapeshellarg($filename);
// […]
$cmd='sendfax -n -m -w -i '.escapeshellarg($id).' -o JohnDoe -D -S "hello@gmail.net" -s "us-leg" -f '.escapeshellarg($from).' -d '.escapeshellarg($to).' '.escapeshellarg($doc_list); 
```

# opengl - OpenGL - 第一人称相机

> ID：13660686
> 
> 赞同：0
> 
> 时间：2012-12-01T15:06:25.107
> 
> 标签：opengl

恐怕我`Gimbal lock`在尝试在 OpenGL 中实现第一人称相机时会遇到这种情况。

```
rotateFPS_OY(float angle){
    forward = forward * cos(angle) + right * sin(angle);
    right = forward.CrossProduct(up);

}
rotateFPS_OX(float angle){
    up = up * cos(angle) + forward * sin(angle); 
    forward = up.CrossProduct(right);
} 
```

稍后，我调用 gluLookAt：

```
 Vector3D center = position + forward;
    gluLookAt(position.x, position.y, position.z, 
              center.x, center.y, center.z,
              up.x, up.y, up.z); 
```

在测试这一点时，似乎在几次移动之后，相机滚动（改变了正确的矢量）。计算似乎是正确的，我只是不知道哪里出了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:18:08.453

计算后归一化向量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:50:16.057

通过将 forward.y 和 right.y 保持为 0 并独立于前/右/上向量计算lookAt 向量，我成功地实现了相机。

# jquery - 无法得到泽西岛的回应

> ID：13660696
> 
> 赞同：0
> 
> 时间：2012-12-01T15:07:35.223
> 
> 标签：jquery, jersey

我正在使用
* jquery 1.7.1 * jquery 表单用于使用 ajax * Jersey 1.8
的 multipart/form-data 。 以下是我的 html 代码：

```
 <html>
    <head>
     <!-- <script src="jquery-1.4.2.js" type="text/javascript" charset="utf-8"></script> -->
     <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
       <script src="js/main.js" type="text/javascript"></script>
     <script src="js/jquery.form.js" type="text/javascript"></script>
    </head>
    <body>
    <div id="output">
    </div>
    <form encType="multipart/form-data" method="POST" id="userForm">
    <label>Image file : </label>
    <input type="file" id="file1" name="file1"/>
    <input type="submit" id="btnCreate" name="btnCreate"/>
   </form>
   </body>
   </html> 
```

以下是我的 javascript 代码：

```
 jQuery.support.cors = true;
  var rootURL = "http://localhost:8084/UserDemo/webresources/user";
  $(document).ready(function() { 
        var options = { 
              target:        "#output",   // target element(s) to be updated with server response 
             beforeSubmit:  showRequest,  // pre-submit callback 
             success:       showResponse,  // post-submit callback 
     error: errorResponse,
      url : rootURL,
      dataType :  "json"
     }; 
     $('#userForm').ajaxForm(options); 
 }); 
    function errorResponse(responseText,statusText,xhr,$form)
     {
        alert("responseText : " + responseText +" : statusText : " + statusText);
     }
     // pre-submit callback 
   function showRequest(formData, jqForm, options) { 

      var queryString = $.param(formData); 
       alert('About to submit: \n\n' + queryString); 
         return true; 
     } 

    // post-submit callback 
    function showResponse(responseText, statusText, xhr, $form)  { 

         alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
    '\n\nThe output div should have already been updated with the responseText.'); 
    } 
```

这是我的球衣网络服务代码片段

```
 @POST
        @Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML,MediaType.MULTIPART_FORM_DATA, MediaType.APPLICATION_OCTET_STREAM})
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML, MediaType.MULTIPART_FORM_DATA })
            //public User create(@FormParam("file") InputStream  user) {
            public User create(User  user1) {
               //User user = (User)user1;
          System.out.println("creating user");
                  return new User();
            //return dao.create(user);
       } 
```

在服务器日志中，我收到以下消息：

```
 Dec 01, 2012 8:12:16 PM com.sun.jersey.api.container.filter.LoggingFilter filter
    INFO: 7 * Server in-bound request
    7 > POST http://localhost:8084/UserDemo/webresources/user
     7 > accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-shockwave-flash, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, application/xaml+xml, application/x-ms-xbap, application/x-ms-application, */*
    7 > dnt: 1
     7 > accept-language: en-us
    7 > content-type: multipart/form-data;  boundary=---------------------------7dc1e4101d01ba
    7 > accept-encoding: gzip, deflate
   7 > user-agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET4.0C; .NET4.0E; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; FDM)
  7 > host: localhost:8084
  7 > content-length: 10122
    7 > connection: Keep-Alive
     7 > cache-control: no-cache
    7 > 

     Dec 01, 2012 8:12:16 PM com.sun.jersey.spi.container.ContainerRequest getEntity
      SEVERE: A message body reader for Java class com.qfour.User, and Java type class com.qfour.User, and MIME media type multipart/form-data;    boundary=---------------------------7dc1e4101d01ba was not found.
     The registered message body readers compatible with the MIME media type are:
     */* ->
     com.sun.jersey.core.impl.provider.entity.FormProvider
     com.sun.jersey.core.impl.provider.entity.StringProvider
     com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
     com.sun.jersey.core.impl.provider.entity.FileProvider
     com.sun.jersey.core.impl.provider.entity.InputStreamProvider
     com.sun.jersey.core.impl.provider.entity.DataSourceProvider
     com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
     com.sun.jersey.core.impl.provider.entity.ReaderProvider
     com.sun.jersey.core.impl.provider.entity.DocumentProvider
     com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
     com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
     com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
     com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
     com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
     com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
     com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
     com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General  
     com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
     com.sun.jersey.core.impl.provider.entity.EntityHolderReader  
     com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
     com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
     com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy 

   Dec 01, 2012 8:12:16 PM com.sun.jersey.api.container.filter.LoggingFilter$Adapter  finish
     INFO: 7 * Server out-bound response
     7 < 415
     7 < 
```

请帮助我找到问题的根本原因

提前致谢

森提尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:57:01.643

因为您使用的是“multipart/form-data”内容类型，所以您应该使用 @FormDataParam 来获取表单数据：

```
@POST
@Consumes("multipart/form-data")
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML, MediaType.MULTIPART_FORM_DATA })
public User create(@FormDataParam("file") InputStream  user) { 
      //analyse your user binary data    
      System.out.println("creating user");
      return new User();
} 
```

# android - XML 布局错误和 R.java 丢失

> ID：13660699
> 
> 赞同：0
> 
> 时间：2012-12-01T15:07:53.173
> 
> 标签：android, xml, android-layout, r.java-file

嗨，我正在使用我的 android 应用程序。今天突然间，当我工作时，我遇到了两个错误 1-“R 不能作为变量解析”错误。2- 和“无法解析资源@string/app_name”错误，在 .XML 布局的图形视图中。

我做了很多搜索和大量试验和错误（清理、构建、重新启动 eclipse、重新启动笔记本电脑等，但没有一个能让我摆脱这个麻烦。我还注意到我在网上做的时候发现我的 R.Java 不见了如果 XML 出现错误或诸如 2 号错误之类的错误，则搜索 R.java 可能会消失“未自动生成”。

我认为可能导致错误的最后一件事是我在 string.xml 中添加了两个元素。但无论如何我已经删除了它们。

所以任何人都可以帮助我如何跳过这个问题并继续我的发展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:11:28.040

我猜我会说您的资源文件中有问题，阻止它将它们编译到 R 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:57:31.607

删除这一行：import android.R 注意：R.java 可能不会自动生成，除非您在项目中没有错误。现在您计算将@string/app_name 替换为“应用程序名称”并再次清理。找到有错误的地方后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:21:30.527

好好**看看**你的 string.xml 文件。那里的错误几乎是100％。你忘了关闭一些标签吗？检查您的@string/app_name 是否也定义明确..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T01:34:00.513

根据我的经验，这条消息几乎总是与您的一个 XML 文件中的错误有关：可能是 string.xml、您的任何布局、样式等。

我的建议是分别打开它们并检查它们。布局中的错误（res/layout/..）应该很容易发现（不要忘记检查您的 res/menu/.. 也）。一个值 XML 文件 (res/values/..) 中的错误可能更容易被发现。正如其他一些人所提到的，这些文件中的一个简单错误可能会导致这种情况：我最常见的错误之一是输入了“sting”而不是“string”或类似的东西。

我经常发现，即使在修复了其中一些问题之后，也需要关闭所有内容并重新启动 Eclipse。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-18T10:16:02.087

只需导入`com.your.packagename.R`

在这里查看我的答案[找不到 R.layout.activity_main](https://stackoverflow.com/questions/16045118/cannot-find-r-layout-activity-main/16748169#16748169)

# jquery - Jquery ajax 调用无法正常工作

> ID：13660704
> 
> 赞同：1
> 
> 时间：2012-12-01T15:08:31.630
> 
> 标签：jquery

我使用以下代码对更新页面进行 ajax 调用。但它只适用于第一次，如果我第二次尝试重新加载。如果我再试一次，它会起作用。你有什么主意吗？这里有什么问题？

```
$(document).ready(function(){
    $("a[href*='delete']").click(function(){
        var url = $(this).attr('href');
        url = 'http://localhost'+url;

        $.ajax({
            type : 'GET',
            url : url,
            success : function(data){
                $('#table_div').html($(data).find('#table_div'));
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:05:54.880

Try this...

```
$("a[href*='delete']").on('click', function(){
    var url = $(this).attr('href');
    url = 'http://localhost'+url;
    $.get(url, function(data) {
        $('#table_div').html($(data).find('#table_div'));
    })
    .success(function(data) { $('#table_div').html($(data).find('#table_div')); })
    .error(function() { alert("error"); })
    .complete(function() { alert("complete"); });
}); 
```

Greetings.

# mysql - 具有黑名单和收藏夹的用户注册系统的数据模型？

> ID：13660708
> 
> 赞同：0
> 
> 时间：2012-12-01T15:08:56.997
> 
> 标签：mysql, database-design

有人可以向我展示用户注册系统的数据模型，哪些用户可以互相收藏或加入黑名单（禁止）？我正在寻找最好的方法，但直到现在没有人很好地回答我的问题。最好的方法是我的意思是我们参与编程的人数较少。

到目前为止我的用户表

```
uid(pk) | name | family | blah blah blah .. 
```

我只是不知道如何设计这个我们只有一个或更少的收藏夹和黑名单？

我认为它必须是一对多的关系，但我应该如何设计这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:14:07.940

你可以有第二张表列出黑名单和/或收藏夹

表 id(pk) | userid_src(fk) | userid_dst(fk) | 类型

如果用户 A 将用户 B 列入黑名单，然后用户 A 收藏用户 C 并且用户 B 和 C 互相收藏，那么您将拥有 A 是 id 1、B id 2 和 C id 3

```
id(pk) | userid_src(fk) | userid_dst(fk) | type
1      | 1              | 2              | blacklist
2      | 1              | 3              | favourite
3      | 2              | 3              | favourite
4      | 3              | 2              | favourite 
```

编辑：检索每个用户的信息：

```
SELECT * from users
LEFT JOIN users_connections as con ON users.uid = con.userid_src
LEFT JOIN users as userCon ON userCon.uid = con.userid_dst
WHERE users.id = XXX 
```

XXX 将是您当前用户的 ID。然后，您将检索当前用户与他列入黑名单或添加为收藏的每个用户之间的每个连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:14:48.837

寻找现成数据模型的一个地方是 databaseanswers.com。这是对他们的数据模型进行分类的页面。

[http://www.databaseanswers.org/data_models/index.htm](http://www.databaseanswers.org/data_models/index.htm)

有一个关于社交网站的部分，但它非常稀疏。

# mysql - PHP 处理 XML 数据

> ID：13660710
> 
> 赞同：0
> 
> 时间：2012-12-01T15:08:59.023
> 
> 标签：mysql, php

我正在写从 wbsite 读取 xml。

```
$jtype = $job_type == 1 ? 'fulltime' : $job_type == 2 ? 'parttime' : $job_type == 3 ? 'contract':'';
    $xml ="http://api.indeed.com/ads/apisearch?";
    $xml .="publisher=9628233567417007";
    $xml .="&q=".$q; //Query. By default terms are ANDed. To see what is possible, use our advanced search page to perform a search and then check the url for the q value.
    $xml .="&l=".$location; //Location. Use a postal code or a "city, state/province/region" combination.
    $xml .="&sort="; //Sort by relevance or date. Default is relevance.
    $xml .="&radius=30"; //Distance from search location ("as the crow flies"). Default is 25.
    $xml .="&st=employer"; //Site type. To show only jobs from job boards use 'jobsite'. For jobs from direct employer websites use 'employer'.
    $xml .="&jt=".$jtype ; //Job type. Allowed values: "fulltime", "parttime", "contract", "internship", "temporary".
    $xml .="&start=0"; //Start results at this result number, beginning with 0\. Default is 0.
    $xml .="&limit=10"; //Maximum number of results returned per query. Default is 10
    $xml .="&fromage=".$within; //Number of days back to search.
    $xml .="&filter=1"; //Filter duplicate results. 0 turns off duplicate job filtering. Default is 1.
    $xml .="&latlong=1"; //If latlong=1, returns latitude and longitude information for each job result. Default is 0.
    $xml .="&co=GB";//arch within country specified. Default is us. See below for a complete list of supported countries. 
    $xml .="&v=2";

    $xmlData = new SimpleXMLElement( $xml, null, true);
    $xmls = $xmlData->xpath('results/result');

    $jIndeed = array();
    $iIndeed=1;
    if( !empty($xmls) )
    {
        foreach ( $xmls as $xml )
        {
            $created_at = strftime( dateFormat ,strtotime((string)$xml->date));
            $jIndeed[$iIndeed]['job_id']            = (string)$xml->jobkey;
            $jIndeed[$iIndeed]['jobTitle']          = cleanText( (string)$xml->jobtitle );
            $jIndeed[$iIndeed]['var_name']          = seoUrl( (string)$xml->jobtitle);
            $jIndeed[$iIndeed]['jobDescription']    = (string)$xml->snippet;
            $jIndeed[$iIndeed]['created_at']        = $created_at;
            $jIndeed[$iIndeed]['job_type']          = (string)$xml->typeName;
            $jIndeed[$iIndeed]['companyName']       = (string)$xml->company;
            $jIndeed[$iIndeed]['location']          = (string)$xml->formattedLocation;
            $iIndeed++;
        }
        $smarty->assign('searchIndeed', $jIndeed);
    } 
```

当我在本地机器上运行它时，它工作正常，但是当我上传到我的网站时，我收到错误 500“页面无法显示”

我已将内存更改为 20MB，并将帖子更改为 1000，但仍然失败。我认为我的主机有限制，当我在 php 中设置仍然失败时，它没有任何区别，

有没有我可以用来处理这个网站 xml 的 xml 类。

**更新：**

放了这个之后`ini_set('display_errors', E_ALL);`

> Warning: SimpleXMLElement::__construct(): http:// wrapper is disabled in the server configuration by allow_url_fopen=0 in /.../indeedXMLSearch.php on line 44
> Warning: SimpleXMLElement::_*construct(http://api.indeed.com/ads/apisearch?publisher=9628233567417007&q=desktop&l=&sort=&radius=30&st=employer&jt=&start=0&limit=10&fromage=&filter=1&latlong=1&co=GB&v=2): failed to open stream: no suitable wrapper could be found in /.../indeedXMLSearch.php on line 44 Warning: SimpleXMLElement::*_construct(): I/O warning : failed to load external entity "http://api.indeed.com/ads/apisearch?publisher=9628233567417007&q=desktop&l=&sort=&radius=30&st=employer&jt=&start=0&limit=10&fromage=&filter=1&latlong=1&co=GB&v=2" in /.../indeedXMLSearch.php on line 44 Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML' in /.../indeedXMLSearch.php:44 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:20:22.790

For security season, php disable fopen url in default setting. You 'd better get xml file content according [php curl lib](http://tw2.php.net/manual/en/function.curl-init.php) and save it to local file.

Then use `new SimpleXMLElement ($localxml)`.

Example Code:

```
$xml = "http://....";

$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $xml);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

// grab URL and pass it to the browser
$xmlcontent = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

file_put_contents('/tmp/xmlfile', $xmlcontent);
$xmlelement = new SimpleXMLElement( $xml, null, true);
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:24:49.920

**Try this**

```
$xmlData  = simple_xml_load_file(file_get_contents($xml));
print_r($xmlData); 
```

instead of

```
 $xmlData = new SimpleXMLElement( $xml, null, true); 
```

# webgl - 在 Three.js 中，灯光不起作用

> ID：13660717
> 
> 赞同：0
> 
> 时间：2012-12-01T15:10:17.263
> 
> 标签：webgl, three.js

我一直在玩 Three.js 一段时间，我似乎无法让任何类型的灯工作。场景使用 0xFFFFFF 环境光照正常渲染，但添加光照没有任何效果。我直接从示例中复制了代码，灯光列在场景的子节点中，只是没有显示出来......

```
 var camera;
        var scene;
        var renderer;

        $(document).ready(function() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.z = 600;

            scene = new THREE.Scene();
            scene.add(new THREE.PointLight(0xFF0000, 3.0, 1000));

            renderer = new THREE.WebGLRenderer();
            //renderer = new THREE.CanvasRenderer();
            renderer.domElement.id = "canvas";
            renderer.setSize(window.innerWidth, window.innerHeight);

            $(window).resize(function() {
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            $("#container").get(0).appendChild(renderer.domElement);

            function Animate() {
                requestAnimationFrame(Animate);
                renderer.render(scene, camera);
            }

            Animate();
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:43:55.873

您的代码没有提供太多可使用的功能，但要检查的一件事是您的材料是否支持灯光。这意味着您应该使用`MeshLambertMaterial`or `MeshPhongMaterial`。另请注意，如果您使用 custom `ShaderMaterial`，它不会神奇地获得场景照明。

# sql - 需要帮助来调试代码

> ID：13660718
> 
> 赞同：0
> 
> 时间：2012-12-01T15:10:21.583
> 
> 标签：sql, oracle, plsql

任何人都可以帮我解决代码错误。

ORA-06550：第 20 行，第 33 列：

PLS-00306：调用“||”时参数的数量或类型错误

ORA-06550：第 20 行，第 12 列：

PL/SQL：语句被忽略

...条件1：如果我在参数化游标中明确输入值，那么直到第二个 FOR 循环才达到。并在打印“内部”语句后执行。条件2。如果我将变量作为参数，那么它会给出上述错误。

```
 DECLARE 
/* First cursor */
    CURSOR get_tables IS
     SELECT DISTINCT * FROM src_table_list tbl ;
/* Second cursor  */
    CURSOR get_columns(v_table_name varchar2) IS 
     SELECT SUBSTR (SYS_CONNECT_BY_PATH (column_name, ','), 2) csv 
      FROM (SELECT column_name , ROW_NUMBER () OVER (ORDER BY column_name ) rn,
               COUNT (*) OVER () cnt
          FROM USER_TAB_COLUMNS where table_name = v_table_name)
     WHERE rn = cnt
    -- and col.sn = v_sn
  START WITH rn = 1
  CONNECT BY rn = PRIOR rn + 1;

BEGIN 
 FOR i IN get_tables LOOP
dbms_output.put_line( 'Inside ' );
    FOR j IN get_columns(i.table_name) LOOP
       dbms_output.put_line('SELECT '|| j ||'FROM'||i.table_name||' ;' );
       dbms_output.put_line( ' ' );
    END LOOP;
 END LOOP;
END; 
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:17:06.343

您正在尝试`j`在输出中进行连接，但 j 是对游标中行的引用。这是一种无法隐式转换为字符串的类型，因此 concat 失败。

你可能打算写

```
dbms_output.put_line('SELECT '|| j.csv || ' FROM ' || i.table_name || ';'); 
```

PS。你用那个连接做什么？是获取逗号分隔值吗？也许您可以使用[LISTAGG 或我的自定义变体](https://stackoverflow.com/questions/7885619/inner-join-two-table-aggregating-varchar-fields/7885793#7885793)。

# ios - 检测图像中的边缘

> ID：13660719
> 
> 赞同：1
> 
> 时间：2012-12-01T15:10:46.343
> 
> 标签：ios, graphics

我有一个房间的图像。我想检测图像中的边缘 - 即在天花板周围画一条线或在窗户周围画一条线。这是一个多么困难的问题 - 是否有任何图书馆可以做到这一点？

这是针对 iOS 应用程序的，但我的问题与平台/语言无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:29:01.327

这是一个来自 openCV 源代码的示例，名为 edge.cpp [http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/) 构建和运行示例应用程序非常有趣（/sample dir）

```
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

#include <stdio.h>

using namespace cv;
using namespace std;

int edgeThresh = 1;
Mat image, gray, edge, cedge;

// define a trackbar callback
static void onTrackbar(int, void*)
{
 blur(gray, edge, Size(3,3));

// Run the edge detector on grayscale
Canny(edge, edge, edgeThresh, edgeThresh*3, 3);
cedge = Scalar::all(0);

image.copyTo(cedge, edge);
imshow("Edge map", cedge);
}

static void help()
{
printf("\nThis sample demonstrates Canny edge detection\n"
       "Call:\n"
       "    /.edge [image_name -- Default is fruits.jpg]\n\n"); 
}

const char* keys =
{
"{@image |fruits.jpg|input image name}"
};

int main( int argc, const char** argv )
{
help();

CommandLineParser parser(argc, argv, keys);
string filename = parser.get<string>(1);

image = imread(filename, 1);
if(image.empty())
{
    printf("Cannot read image file: %s\n", filename.c_str());
    help();
    return -1;
}
cedge.create(image.size(), image.type());
cvtColor(image, gray, CV_BGR2GRAY);

// Create a window
namedWindow("Edge map", 1);

// create a toolbar
createTrackbar("Canny threshold", "Edge map", &edgeThresh, 100, onTrackbar);

// Show the image
onTrackbar(0, 0);

// Wait for a key stroke; the same function arranges events processing
waitKey(0);

return 0;
} 
```

如果您想将它与您的 openCV 构建分开构建，您可以使用此脚本（在 c 示例目录下提供了一个版本 - 我对其进行了修改以编译额外的库）

```
#!/bin/sh

if [ $# -gt 0 ] ; then
base=`basename $1 .c`
echo "compiling $base"
gcc -ggdb `pkg-config opencv --cflags --libs` $base.c -o $base 
else
for i in *.c; do
    echo "compiling $i"
    gcc -ggdb `pkg-config --cflags opencv` -o `basename $i .c` $i `pkg-config --libs    opencv`;
done
for i in *.cpp; do
    echo "compiling $i"
    g++ -ggdb `pkg-config --cflags opencv` -o `basename $i .cpp` $i `pkg-config -- libs opencv` -lpthread -D_REENTRANT;
done
fi 
```

# javascript - 遍历 HTML5 画布 getImageData 时获取 X 和 Y 像素坐标

> ID：13660723
> 
> 赞同：24
> 
> 时间：2012-12-01T15:11:33.927
> 
> 标签：javascript, html5-canvas

我正在迭代一些从`canvas`这样的图像数据中提取的图像数据：

```
var imageData = this.context.getImageData(0, 0, this.el.width, this.el.height);
var data = imageData.data;

for (var i = data.length; i >= 0; i -= 4) {
    if (data[i + 3] > 0) {
        data[i] = this.colour.R;
        data[i + 1] = this.colour.G;
        data[i + 2] = this.colour.B;
    }
} 
```

如何计算我所在的当前 X 和 Y 像素坐标？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-07T19:58:24.070

更正和测试的代码版本：

```
var x = (i / 4) % this.el.width;
var y = Math.floor((i / 4) / this.el.width); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-01T15:17:15.247

一个简单的算术序列：

将线性位置除以宽度。那是你的Y坐标。将该 Y 坐标乘以宽度，然后从线性位置中减去该值。结果是 X 坐标。

另请注意，您必须将线性位置除以 4，因为它是 RGBA。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-09-25T14:42:48.573

解决方案

```
 let frame = ctx.getImageData(0, 0, c.width, c.height);
    let data = frame.data;

    let y = 0;
    let x = 0;
    for (let i = 0; i < data.length; i += 4) {
      const r = data[i];
      const g = data[i + 1];
      const b = data[i + 2];
      const alpha = data[i + 3];
      x = (i / 4) % c.width;
      y = ~~(i / 4 / c.width);
    } 
```

# php - 如何检查您的代码，了解导致 facebook 出现 API 错误的原因

> ID：13660724
> 
> 赞同：0
> 
> 时间：2012-12-01T15:11:35.933
> 
> 标签：php, facebook

您好，我创建了一个使用 facebook API 的 php 页面。该页面在 2 个月前运行良好，所以我没有再次检查。

我昨天继续对页面进行编码，但是我发现处理 facebook 管理页面的页面要求我重新验证。

页面的某些功能可以访问并且运行良好，但该特定页面不能。

我猜它必须从 facebook 更改，但我猜不出是什么。我应该从哪里开始发现问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:06:57.430

我认为您应该将您的 facebook API 调用放在`try` `catch`语句中。以便在`catch`块内您可以将错误消息记录到错误日志中。就像是：

```
try{
  $facebook->api("/me");
}catch (Exception $e){
  error_log($e->getMessage());
} 
```

# java - BlackBerry - 如何将背景图像放在按钮后面？

> ID：13660733
> 
> 赞同：3
> 
> 时间：2012-12-01T15:12:49.163
> 
> 标签：java, blackberry

我需要制作一个像这样的屏幕： ![在此处输入图像描述](../Images/bacfe635a4f0b6147ce313ac60f3b165.png) 我需要添加到我的代码中的唯一一件事就是将背景图像放在这些按钮后面。

这是我到目前为止所拥有的：

```
public class PruebaScreen extends MainScreen{
    public PruebaScreen(){
         LabelField title = new LabelField("Screen Title");
         title.setPadding(40, 0, 20, 60);

         BitmapField btn1 = new BitmapField(Bitmap.getBitmapResource("btn-1.png"));
         btn1.setPadding(2,0,3,0);

         BitmapField btn2 = new BitmapField(Bitmap.getBitmapResource("btn-2.png"));
         btn2.setPadding(2,0,3,0);

         add(title);
         add(btn1);
         add(btn2);

    }
} 
```

我应该如何将这两个按钮放在背景图像上？图像不应占据整个屏幕。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:08:58.517

你应该

1.  创建经理 ( `VericalFieldManager`)
2.  为经理设置所需的背景
3.  将按钮添加到管理器
4.  将经理添加到屏幕

*这是一个创建纯色背景*的代码片段：

```
 LabelField title = new LabelField("Screen Title");
    title.setPadding(40, 0, 20, 60);

    VerticalFieldManager vfm = new VerticalFieldManager(USE_ALL_WIDTH);
    vfm.setBackground(BackgroundFactory.createSolidBackground(Color.BLUE));
    vfm.setPadding(20, 0, 20, 0);

    ButtonField btn1 = new ButtonField("Option 1");
    btn1.setPadding(2, 0, 3, 0);

    ButtonField btn2 = new ButtonField("Option 2");
    btn2.setPadding(2, 0, 3, 0);

    add(title);
    vfm.add(btn1);
    vfm.add(btn2);
    add(vfm); 
```

要使背景成为位图，只需替换

```
 vfm.setBackground(BackgroundFactory.createSolidBackground(Color.BLUE)); 
```

和

```
 vfm.setBackground(BackgroundFactory.createBitmapBackground(YOUR BITMAP); 
```

![在此处输入图像描述](../Images/01d6c7ee1a01b32ee34f6f7e6fc90076.png)

# database - 如何更新具有一对多关系的表？

> ID：13660735
> 
> 赞同：0
> 
> 时间：2012-12-01T15:12:59.353
> 
> 标签：database

我有两个表，Class 和 Student，它们是一对多的关系。添加一个班级很简单，因为我只需要为一个班级和多个学生提供必要的数据，并且删除更容易。

但是当我想更新一个类时，问题就来了。更新方面，除了Class本身的属性发生变化外，还有可能对Student进行增、改、删等动作。我应该如何组织数据以提供所有潜在信息以进行适当的更新？

在网上搜索后，我得到了解决上述问题的解决方案：将删除与添加结合起来模拟更新。这确实有效，而且非常简单。但是频繁的添加和删除记录可能会导致两个问题：自增主键的低效和大小限制。

所以我想知道有没有更好（或典型）的方法来解决我的问题？或者如果我采用上述解决方案，如何避免副作用，特别是自增主键的大小限制？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:23:40.580

在典型的应用程序中，您不会一次性更新班级及其学生。您更新课程、添加学生或删除学生，但不是一次完成所有操作。

即使您必须这样做，解决方案也将取决于您的应用程序的架构，用于访问数据库的框架等，因此很难给出明确的答案。例如，使用 JPA 或 Hibernate，您可以修改整个对象树并将其合并，一切都会自动处理。

如果您必须自己做，您可以简单地将更新的课程与更新的学生一起发送。您将首先更新班级自己的信息。然后循环给学生并更新他们自己的信息。然后查看当前班上（数据库中）有哪些学生，发送的学生中有哪些，把已经消失的去掉。

大多数情况下，删除学生并重新创建它们不是一种选择，不是因为它效率低下或因为您会耗尽 ID（长到 2^63，这是巨大的），而是因为您可能有其他表带有外键指向给学生更新。

# c# - Visual Basic - 选择下拉列表选项

> ID：13660738
> 
> 赞同：3
> 
> 时间：2012-12-01T15:13:25.483
> 
> 标签：c#, drop-down-menu, browser, controls

我用 Webbrowser 控件填写了一个站点，问题是该站点包含两个下拉列表，它们相互链接，例如

```
<select name="dropdown1" id="dropdown1">
<option value="1"test1</option>
<option value="2"test2</option>
</select>
<select....>
<option value="">&nbsp;</option>
</select> 
```

如果我使用

```
Webbrowser1.document.getelementbyid("dropdown1").setattribute("Value", "1") 
```

它确实选择了 dropdownlist1 的值 1，但它没有使用属于第一个下拉列表中的选项的选项激活下拉列表 2

我让它工作的唯一方法是用鼠标选择它并单击我的选项，但我希望它是自动的。我希望我已经充分通知了你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:40:13.587

WPF 是出了名的`Webbrowser`差，与它的交互也没有任何改善。如果您可以避免使用它，我强烈建议您避免使用它。

当我不得不处理它时，我通常通过 JavaScript 进行所有交互。我将在由 提供的页面上设置一个 JavaScript 函数，`Webbrowser`并从 WPF 代码中调用它。这样所有的 DOM 交互都是由网页本身完成的。

在这种情况下，您将拥有类似于以下内容的 HTML：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

    <script type="text/javascript">
        function selectOption(param)
        {
            if (param == "value3") {
                var combo1 = document.getElementById("dropdown1");
                combo1.value = 3;
            }
        }

    </script>
</head>
<body>
    <form>
        <select name="dropdown1" id="dropdown1">
            <option value="1">test 1</option>
            <option value="2">test 2</option>
            <option value="3">test 3</option>
        </select>
        <select name="dropdown2" id="dropdown2">
            <option value="a">test a</option>
            <option value="b">test b</option>
        </select>
    </form>
</body>
</html> 
```

XAML：

```
<Window x:Class="StackOverflowWorkbench.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button Click="Button_Click_1" Content="Click Me!" />
        <WebBrowser Name="MyBrowser" />
    </StackPanel>
</Window> 
```

XAML.CS：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        MyBrowser.Navigate(Directory.GetCurrentDirectory() + "/HTMLPage1.html");
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        MyBrowser.InvokeScript("selectOption", new String[] { "value3" });
    }
} 
```

示例代码仍然没有更改第二个下拉菜单，但是因为您现在直接从 JavaScript 与 DOM 交互，所以您可以轻松访问它。例如，您可以扩展该`selectOption`函数以直接访问它。

# cakephp-2.0 - 加入 cakephp 不显示所有数据

> ID：13660743
> 
> 赞同：2
> 
> 时间：2012-12-01T15:14:15.377
> 
> 标签：cakephp-2.0

我正在尝试进行此查询

```
SELECT * FROM `rentprograms` AS `Rentprogram` 
    inner join `vehiclerentprograms` as  `Vehiclerentprogram` on `Vehiclerentprogram`.`rentprogramid` = `Rentprogram`.`id` 
    inner join `vehicles` AS `Vehicle` ON `Vehicle`.`id` =`Vehiclerentprogram`.`vehicleid` WHERE `Vehicle`.`id` = 1 
```

CakePHP 中的代码

```
$this->Rentprogram->find('all'), array(
  'fields'=>array('*'),
  'joins' => array(
      array(
        'table' => 'vehiclerentprograms',
                'alias' => 'Vehiclerentprogram',
                'type'=>'inner',
                'conditions' => array(
                    'Vehiclerentprogram.rentprogramid' => 'Rentprogram.id',
                                )
                            ),
                array(
                'table' => 'vehicles',
                'alias' => 'Vehicle',
                'type'=>'inner',
                'conditions' => array(
                    'Vehicle.id' => 'Vehiclerentprogram.vehicleid',
                                )
                            )
                        ),
                    ); 
```

但它只显示 Rentprogram 的值。我怎样才能拥有与 Rentprogram、Vehicle、Vehiclerentprogram 相关的所有字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:15:55.077

使用 MVC 框架并手动进行*脏连接*没有任何价值。您最好使用 Cake 约定，它可以让您访问 Cake 的库和工具，从而大大加快开发过程。在这种情况下，您必须设置*模型*和模型之间的*关联*（我希望您听说过*has-many*、*belongs-to*、*many-to-many*等等）。

CakePHP 附带了一个非常宝贵的 DAO 层和一个名为*bake*的代码生成器。一旦您设计了数据库模式，就忘掉 SQL 并根据您的业务对象来思考。首先，在 MySQL 中创建三个表（我使用了最小的字段集并从您的查询中推断出结构）：

```
CREATE TABLE `programs` (
  `id` int(11) AUTO_INCREMENT,
  `start` datetime DEFAULT NULL,
  `end` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `vehicles` (
  `id` int(11) AUTO_INCREMENT,
  `model` varchar(128) DEFAULT NULL,
  `plate` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `vehicle_programs` (
  `id` int(11) AUTO_INCREMENT,
  `program_id` int(11) DEFAULT NULL,
  `vehicle_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

然后运行shell脚本：

```
Console/cake bake all 
```

并一次选择一张桌子（记住`vehicle_programs`必须是最后一张）。这将为您生成所有模型、控制器和视图文件。然后你可以开始用测试数据填充你的数据库。将您的浏览器指向`http://host/vehicle_programs`并放入一些车辆和程序。

最后，我将向您展示如何在一个查询中检索所有字段。假设您想在列出时显示所有内容`vehicle_programs`。在您必须设置为的`index()`方法中，以便它也获取相关的模型字段。在视图中，您现在可以访问如下字段`VehicleProgramsController``$this->VehicleProgram->recursive``1``index.ctp`

```
<?php
foreach ($vehiclePrograms as $vehicleProgram) {
  echo $vehicleProgram['Program']['start'];
  echo $vehicleProgram['VehicleProgram']['id'];
  echo $vehicleProgram['Vehicle']['plate'];
} 
```

请注意，如果我们没有设置`Model->recursive`为`1`，Cake 将不会为我们获取相关模型 (`Vehicle`和`Program`) 的字段。

* * *

顺便说一句，我认为根本不设置`fields`密钥应该可以解决问题，因为 Cake 默认会读取所有内容。但是，正确的解决方案是使用模型类之间的关系 - 当您运行`bake`它时，将以下内容放入`Model/Vehicle.php`：

```
class Vehicle extends AppModel {

    public $hasMany = array(
        'VehicleProgram' => array(
            'className' => 'VehicleProgram',
            'foreignKey' => 'vehicle_id',
            'dependent' => false
        )
    );

} 
```

和对称关联`Model/VehicleProgram.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T13:20:31.723

你可以使用这个方法

```
$this->Rentprogram->find('all'), array(
 'fields' => array('Rentprogram.*', 'Vehicle.*', 'Vehiclerentprogram.*'), ... 
```

# php - 每次单击按钮时，将 PHP 变量更改 1036800。

> ID：13660746
> 
> 赞同：2
> 
> 时间：2012-12-01T15:15:02.130
> 
> 标签：php, javascript, mysql

这有点来自查询，一个名册类型的数据库是查看比较当前用户并从数据库中获取数据。它总是从今天的日期开始，并使用 unix 时间在 12 天后结束。

```
<?php
$INQID = $member->userID();
$loc = $member->UserLocation();
$range_start = time();
$range_end = $range_start + 1036800;
$username = "******";
$password = "******";
$hostname = "******";
$dbhandle = mysql_connect($hostname, $username, $password)
             or die("Unable to connect to MySQL");
$selected = mysql_select_db("DATABASE",$dbhandle)
             or die("Could not select DATABASE");
$result = mysql_query("SELECT username, date, state FROM ".$loc."  WHERE username
=$INQID  and date > $range_start and date < $range_end");
$result_array = array(); 
```

我的问题是如何添加一个按钮以将开始日期向前或向后移动 10368000（unix 时间十二天），这反过来又会移动结束日期，向用户显示接下来的 12 天。同时保留用户登录时的开始日期？我想坚持使用 unix 时间，因为轮班是 24 小时，所以我更容易使用。

```
 <div id="Rbutt">
<a href="#" class="Rbuttons">Next</a>
</div>
<div id="Lbutt">
<a href="#" class="Rbuttons">Back</a>
</div> 
```

我有两个按钮左（-）和右（+）我想使用但是改变这些不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:18:49.420

您可以在 mysql 表中添加时间戳并更新值，每次都获取该值并使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:19:44.660

尝试以下操作：

```
<?php

$INQID = $member->userID();
$loc = $member->UserLocation();
$range_start = time();
if(isset($_POST['timeRange'])) {
    $range_end = $range_start + $_POST['timeRange'];
}
else {
    $range_end = $range_start + 1036800;
}
$username = "******";
$password = "******";
$hostname = "******";
$dbhandle = mysql_connect($hostname, $username, $password)
             or die("Unable to connect to MySQL");
$selected = mysql_select_db("DATABASE",$dbhandle)
             or die("Could not select DATABASE");
$result = mysql_query("SELECT username, date, state FROM ".$loc."  WHERE username
=$INQID  and date > $range_start and date < $range_end");
$result_array = array(); 
```

使用以下 HTML 代码：

```
<form action="filename.php" method="post">
    <input name="timeRange" type="hidden" value="1036800" />
    <input type="button" class="Rbuttons" value="next" />
</form>

<form action="filename.php" method="post">
    <input name="timeRange" type="hidden" value="-1036800" />
    <input type="button" class="Rbuttons" value="back" />
</form> 
```

不幸的是，我还没有测试上面的代码（所以我希望它是正确的并且确实有效！）无论如何，我认为这应该有助于为您指明正确的方向。

显然输入应该被清理，但我会把它留给你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:36:45.950

使用以下感谢所有答案解决了这些问题，这些答案为我指明了正确的方向。

```
<?php
$INQID = $fgmembersite->userID();
$loc = $fgmembersite->UserLocation();

$FwdBck = $_GET["FwdBck"];
if ($FwdBck =="")
{
        $FwdBck = 86400;
}
$start = time();
$range_start = $start - $FwdBck;
$range_end = $range_start + 2419200;
$username = "******";
$password = "******";
$hostname = "******";
$dbhandle = mysql_connect($hostname, $username, $password)
 or die("Unable to connect to MySQL");
$selected = mysql_select_db("DATABASE",$dbhandle)
  or die("Could not select DATABASE");
$result = mysql_query("SELECT username, date, state FROM ".$loc."  WHERE username=$INQID       and date >$range_start and date <$range_end");
$result_array = array(); 
```

还有按钮

```
 <div id="FwdWeek">
     <form method="GET" action="<?php echo $PHP_SELF;?>">
     <input type="hidden" name="FwdBck" value="<? echo $FwdBck-(7*86400) ?>">
     <input class="Rbuttons" type="Submit" value="> Week">
     </form>
     </div>
     <div id="BkWeek">
     <form method="GET" action="<?php echo $PHP_SELF;?>">
     <input type="hidden" name="FwdBck" value="<? echo $FwdBck+(7*86400) ?>">
     <input class="Rbuttons" type="Submit" value="< Week">
     </form>
     </div> 
```

以及用于样式的相关 CSS

# java - 分区方法中定义的快速排序分区算法循环不变量

> ID：13660750
> 
> 赞同：0
> 
> 时间：2012-12-01T15:15:43.340
> 
> 标签：java, quicksort

我在快速排序算法中实现了分区方法，但我不知道它是否满足给我的循环不变量。

```
 public class qs {
      private qs(){}

/**
 * Sort an array in ascending order
 * @param arr array to sor  */
   public static void quickSort(int[] arr){
    qs(arr, 0, arr.length);
        }

/**
         * Sort a region of an array in ascending order.
         * Elements outside the given region are unchanged.
         * requires: 0 <= start <= end <= arr.length
         * @param arr   array to sort
         * @param start start of region (inclusive)
         * @param end   end of region (exclusive)
         */
        private static void qs(int[] arr, int start, int end){
            if (end <= start+1){    //region of length 0 or 1
                return;
            }
            int x = arr[start];
            int p = partition(arr, start+1, end, x);
                //now swap arr[start] with arr[p-1]
            arr[start] = arr[p-1];
            arr[p-1] = x;
            qs(arr, start, p-1);
            qs(arr, p, end);

        }

        /**
         * Partition a region of an array.
         * Rearranges elements in region so that small ones
         *   all have smaller indexes than the big ones.
         * Elements outside the region are unchanged.
         * requires: 0 <= start <= end <= arr.length
         * @param arr   array to partition
         * @param start start of region (inclusive)
         * @param end   end of region (exclusive)
         * @param x     pivot - "small" and "big" are <x, >=x.
         * @return      start index (inclusive) of big elements
         *              in region after partition.
         */
        private static int partition(
            int[] arr, int start, int end, int x)
        {

            int l = start-1 ;
            int r = end;
            while (true) {
                while(++l< r && arr[l] < x);

                    while(r-- > l && arr[r] > x);// find smaller item

                    if(l >= r) // if pointers cross,
                        break; // partition done
                        else  {
                        int temp;
                    temp = arr[l];
                    arr[l] = arr[r];
                    arr[r] = temp;
                }
            }
            return l;
            }

        public static void main(String[] args) {
            int[] a = {15,8,4,8,9,6,4,1,2,5,6,4};
            quickSort(a);
            for (int i = 0; i < a.length; i++){
                System.out.print(" "+a[i]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:14:02.350

您的代码应该可以工作，除了一个问题。您选择的轴心是数组的起点，而不是数组的中点。所以改为分配

```
 int x = arr[start]; 
```

你最好把它分配给

```
 int x = arr[(start + end)/2]; 
```

您的代码必须有效。

# java - 如何访问通用 ArrayLists 的 ArrayList 中的对象

> ID：13660754
> 
> 赞同：4
> 
> 时间：2012-12-01T15:16:07.017
> 
> 标签：java, generics, arraylist

我是 Java 新手，甚至对 Java 中的泛型也很陌生。我一直在寻找类似的问题，但没有找到针对我的特定问题的直接答案。

我正在开发一个项目来管理患者、医生、咨询、医疗事件以及与医疗诊所相关的所有内容。我现在要做的是创建一个与每个患者相关的医疗事件列表。对于这个医疗事件列表，目前，它应该只允许添加检查和处方，但它应该是可扩展的：如果我需要，我希望将来能够添加其他类型的医疗事件，比如关于手术的信息。

因此，我首先在 Patient 类中创建一个通用 ArrayLists 的 ArrayList，其类型由 MedicalEvent 类扩展（因此，目前，它是一个 Prescription 或 Exam 类型的 ArrayLists 的 ArrayList）。我还创建了一个 Prescription 类型的 ArrayList 和另一个 Exam 类型。

`List<ArrayList<? extends MedicalEvent>> medicalevents;`

`private ArrayList<Prescription> prescriptions;`

`private ArrayList<Exam> exams;`

然后，在构造函数中，我将 ArrayLists 处方和检查添加到 ArrayList 医疗事件中。

`medicalevents.add(prescriptions);`

`medicalevents.add(exams);`

为了添加两种允许类型之一的医疗事件，我定义了以下方法：

```
public void addMedicalEvent(E element){

if(element instanceof Prescription){
    medicalevents.get(0).add((Prescription)element);
    }
if(element instanceof Exam){
    medicalevents.get(1).add((Exam)element);
    }
} 
```

问题是，我收到错误“ArrayList 类型中的方法 add(capture#1-of ? extends MedicalEvent) 不适用于参数（处方）”，我不知道这是什么意思。谁能告诉我我做错了什么，或者提出更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T15:30:48.560

给出以下声明

```
class A {}
class B extends A {}
class C extends A {}

public class SOSample {
    public static void main(String[] args) {
        List<List<? extends A>> list = new ArrayList<List<? extends A>>();
        final List<? extends A> as = list.get(0);
        as.add(new B()); // error here
    }
} 
```

您不能添加`B`到`as`，因为稍后当您尝试从列表中读取时会导致问题：

```
A a = list.get(0).get(0); // is a B or C? 
```

为了更好地理解这个问题，有一个有趣的例子：

```
class Vehicle { void launch(); }
class Car extends Vehicle {}
class NuclearMissile extends Vehicle {}
...
// this is prohibited because of below code
List<? extends Vehicle> cars = new ...
// imagine this is possible...
cars.add(new NuclearMissile());
// now this is possible
cars.get(0).launch(); 
```

一般来说，带有有界通配符的集合`List<? extends Something>`对于不会修改集合的代码很有用，但只是迭代它对元素做一些事情。

关于您的原始问题 - 您可以更改代码，以便有两个不同的列表，一个 for `Prescription`，另一个 for `Exam`。您仍然可以只使用*一种*方法来遍历这两个列表，做一些有用的事情（比如打印它们的内容）：

```
void doSomethingWithEvents(List<? extends Event> events) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:37:49.857

像这样的东西会更好吗？

```
class Medical {
    List<EventList<?>> eventLists = new ArrayList<EventList<?>>();

    Medical() {
        eventLists.add(new EventList<Perscription>(Perscription.class));
        eventLists.add(new EventList<Exam>(Exam.class));
    }

    boolean add(Object item) {
        for(EventList<?> list : eventLists) {
            if(list.tryToAdd(item)) {
                return true;
            }
        }
        return false;
    }
}

class EventList<T> {
    Class<T> type;
    List<T> list = new ArrayList<T>();

    EventList(Class<T> type) {
        this.type = type;
    }

    boolean tryToAdd(Object item) {
        if(type.isInstance(item)) {
            list.add(type.cast(item));
            return true;
        } else {
            return false;
        }
    }
} 
```

# rest - ServiceStack 使用 IIS 或 Windows 服务的优势

> ID：13660756
> 
> 赞同：7
> 
> 时间：2012-12-01T15:16:29.827
> 
> 标签：rest, iis, servicestack

我编写了一个 C# 服务器应用程序（Windows 服务），它通过带有 ServiceStack 的 REST 向各种客户端（用 .NET Compact Framework 和 Mono for Android 编写的本机应用程序）提供数据。不涉及 Web 应用程序。

使用 IIS 来托管我的服务器，而不是使用它作为 Windows 服务自托管，会给我带来任何优势（速度、可扩展性、可靠性）吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T05:27:18.823

使用 IIS 的好处是它提供了对 ASP.NET 主机的自动管理，例如，它会在空闲时间回收您的 AppDomain 以回收未使用的 Web 主机的服务器资源，这也减少了应用程序代码中内存泄漏的影响。它还施加了默认请求限制以防止 DDDOS 攻击，并支持在不停机的情况下重新部署您的应用程序，即挂起的请求挂起，直到新部署的应用程序启动。

自托管 HttpListener 的主要优点是它们无需 Web 服务器即可工作。它不包括任何 HTTP 请求限制，如果您想支持上传大文件，这是一个好处。它们更难重新部署，并且在部署期间会导致停机。

# java - 将 Google API 添加到现有的 Eclipse 项目

> ID：13660758
> 
> 赞同：3
> 
> 时间：2012-12-01T15:16:57.197
> 
> 标签：java, android, eclipse, google-maps

我正在编写一个将使用 Google 地图的 android 应用程序，但要实现这一点，我需要 Google API。当我下载android平台sdk（例如android 4.0）时，我没有下载Google API，因为不知道我需要它来实现这个功能。但是，我回去下载了它。如何将它添加到我现有的项目中。进行了一些搜索，所有内容都显示了如何使用 API 启动新项目，但没有显示如何将其添加到现有项目中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T15:27:50.600

由于您已经下载了您正在开发的版本的 Google API，例如 Android 4。您所要做的就是：

`Right click on your project -> Go to Properties -> Then Android - > Then select the Google APIs at API level 14`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T15:21:52.140

试试这个简单的东西。在您需要扩展“Activity”的 google maps api 的文件中，将 Activity 替换为 MapActivity。它应该有一条红线显示您的代码错误。将鼠标悬停在它上面，然后单击“修复项目设置”选项。然后，您将找到一个建议您导入 Google API 的选项。选择它，你就完成了。让我知道这是否有效。

# c# - 如何将土耳其字符转换为字符串中的英文字符？

> ID：13660761
> 
> 赞同：19
> 
> 时间：2012-12-01T15:17:07.577
> 
> 标签：c#, encoding

字符串 strTurkish = "ÜST";

如何将 strTurkish 的价值设为“UST”？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-19T13:26:46.310

您可以使用以下方法来解决您的问题。其他方法不能正确转换“土耳其语小写 I (\u0131)”。

```
public static string RemoveDiacritics(string text)
{
    Encoding srcEncoding = Encoding.UTF8;
    Encoding destEncoding = Encoding.GetEncoding(1252); // Latin alphabet

    text = destEncoding.GetString(Encoding.Convert(srcEncoding, destEncoding, srcEncoding.GetBytes(text)));

    string normalizedString = text.Normalize(NormalizationForm.FormD);
    StringBuilder result = new StringBuilder();

    for (int i = 0; i < normalizedString.Length; i++)
    {
        if (!CharUnicodeInfo.GetUnicodeCategory(normalizedString[i]).Equals(UnicodeCategory.NonSpacingMark))
        {
            result.Append(normalizedString[i]);
        }
    }

    return result.ToString();
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-01T15:25:11.560

```
var text = "ÜST";
var unaccentedText  = String.Join("", text.Normalize(NormalizationForm.FormD)
        .Where(c => char.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-01T15:22:54.273

我不是这类事情的专家，但我*认为*你可以[`string.Normalize`](http://msdn.microsoft.com/en-us/library/ebza6ck1.aspx)通过分解值然后有效地删除非 ASCII 字符来做到这一点：

```
using System;
using System.Linq;
using System.Text;

class Test
{
    static void Main()
    {
        string text = "\u00DCST";
        string normalized = text.Normalize(NormalizationForm.FormD);
        string asciiOnly = new string(normalized.Where(c => c < 128).ToArray());
        Console.WriteLine(asciiOnly);
    }    
} 
```

不过，在某些情况下，这完全有可能会造成可怕的事情。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-12-14T10:20:36.267

```
public string TurkishCharacterToEnglish(string text)
{
    char[] turkishChars = {'ı', 'ğ', 'İ', 'Ğ', 'ç', 'Ç', 'ş', 'Ş', 'ö', 'Ö', 'ü', 'Ü'};
    char[] englishChars = {'i', 'g', 'I', 'G', 'c', 'C', 's', 'S', 'o', 'O', 'u', 'U'};

    // Match chars
    for (int i = 0; i < turkishChars.Length; i++)
        text = text.Replace(turkishChars[i], englishChars[i]);

    return text;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T10:24:20.787

这不是一个需要通用解决方案的问题。众所周知，土耳其字母表中只有 12 个特殊字符需要规范化。这些是 ı,İ,ö,Ö,ç,Ç,ü,Ü,ğ,Ğ,ş,Ş。您可以编写 12 条规则来替换它们的英文对应规则：i,I,o,O,c,C,u,U,g,G,s,S。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-04T20:36:33.390

```
Public Function Ceng(ByVal _String As String) As String
    Dim Source As String = "ığüşöçĞÜŞİÖÇ"
    Dim Destination As String = "igusocGUSIOC"
    For i As Integer = 0 To Source.Length - 1
        _String = _String.Replace(Source(i), Destination(i))
    Next
    Return _String
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-26T13:43:57.673

```
 public static string TurkishChrToEnglishChr(this string text)
    {
        if (string.IsNullOrEmpty(text)) return text;

        Dictionary<char, char> TurkishChToEnglishChDic = new Dictionary<char, char>()
        {
            {'ç','c'},
            {'Ç','C'},
            {'ğ','g'},
            {'Ğ','G'},
            {'ı','i'},
            {'İ','I'},
            {'ş','s'},
            {'Ş','S'},
            {'ö','o'},
            {'Ö','O'},
            {'ü','u'},
            {'Ü','U'}
        };

        return text.Aggregate(new StringBuilder(), (sb, chr) =>
        {
            if (TurkishChToEnglishChDic.ContainsKey(chr))
                sb.Append(TurkishChToEnglishChDic[chr]);
            else
                sb.Append(chr);

            return sb;
        }).ToString();
    } 
```

# php - 如何在 PHP 中转换这个百分比计算？

> ID：13660765
> 
> 赞同：0
> 
> 时间：2012-12-01T15:17:27.640
> 
> 标签：php

我有这个公式，它是从电子表格单元格公式翻译而来的

```
((0.001559 * 6224 ) + 2.476) / 2 * 101.61% 
```

乘除部分很简单......但我的问题是百分比问题，如何在 PHP 中将商与 101.61% 相乘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:25:00.767

只需乘以百分比除以 100 - 所以 101.61% 变为`* 1.0161`：

```
((0.001559 * 6224 ) + 2.476) / 2 * 1.0161 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:21:42.523

尝试这个

```
((((0.001559 * 6224 ) + 2.476) / 2) / 100 ) * 101.61 
```

# php - PHP 输出缓冲 (ob_start, ob_flush)

> ID：13660766
> 
> 赞同：2
> 
> 时间：2012-12-01T15:17:30.557
> 
> 标签：php, exe, flush, output-buffering, ob-start

我之前使用 php 输出缓冲来从数据库创建 csv 文件，因为我不想创建现有文件，只是想让内容可下载。

CSV 是基于文本的文件，因此很容易通过这种方式创建，您可以设置标题并刷新文本内容。但！如果我想从十六进制数据创建一个 exe 怎么办？（项目是：我有一个现有的 exe 文件，我希望用户可以在 HTML 文本框中写一些东西，然后我将其转换为十六进制并将旧文本交换为新文本）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:43:01.283

使用以下代码通过从硬盘读取来下载 exe 文件。

```
<?php
$file = 'test.exe';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:56:19.057

如果你想替换二进制文件的一部分，例如从第 100 个字节到第 200 个字节，你可以使用 substr() 和 str_pad()：

```
$binFile = file_get_contents('/pathto/exec/file.exec');
$replacedBinFile = substr($binFile, 0, 100) . str_pad(substr($_POST['text'], 0, 100), 100, "\x00") . substr($binFile, 200);
file_put_contents('/pathto/exec/file_replaced.exec', $replacedBinFile); 
```

# uml - UML 图：显示指向类的指针向量的继承

> ID：13660769
> 
> 赞同：0
> 
> 时间：2012-12-01T15:18:04.380
> 
> 标签：uml

我将如何展示 A 类继承了指向 B 类的指针向量？我会有一个 Vector 或 B 类的继承箭头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:09:42.127

不存在“A 类将某些资源继承给 B 类”之类的东西。任何一个类 B 都继承自类 A - 在这种情况下，B[专门](http://en.wikipedia.org/wiki/Subtype)化了 A（或者，A[泛化](http://en.wikipedia.org/wiki/Superclass_%28computer_science%29#Subclasses_and_superclasses)了B）；或者 A 类和 B 类共享一个资源——在这种情况下，它称为[聚合](http://en.wikipedia.org/wiki/Object_composition#Aggregation)。

# xml - ServiceStack XML Service 如何去除 BOM 字符？

> ID：13660775
> 
> 赞同：6
> 
> 时间：2012-12-01T15:19:10.603
> 
> 标签：xml, web-services, servicestack, byte-order-mark

是否可以禁用 XML 等 ServiceStack 服务的 BOM？

# c++ - C++ 读取 WAV 文件的数据部分

> ID：13660777
> 
> 赞同：26
> 
> 时间：2012-12-01T15:19:19.527
> 
> 标签：c++, wav

我计划创建一个程序来可视化 .wav 文件的音频波形。

到目前为止，我已经开始正确阅读上述 wav 文件的标题部分。我使用的代码是这样的：

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;
using std::string;
using std::fstream;

typedef struct  WAV_HEADER{
    char                RIFF[4];        // RIFF Header      Magic header
    unsigned long       ChunkSize;      // RIFF Chunk Size  
    char                WAVE[4];        // WAVE Header      
    char                fmt[4];         // FMT header       
    unsigned long       Subchunk1Size;  // Size of the fmt chunk                                
    unsigned short      AudioFormat;    // Audio format 1=PCM,6=mulaw,7=alaw, 257=IBM Mu-Law, 258=IBM A-Law, 259=ADPCM 
    unsigned short      NumOfChan;      // Number of channels 1=Mono 2=Sterio                   
    unsigned long       SamplesPerSec;  // Sampling Frequency in Hz                             
    unsigned long       bytesPerSec;    // bytes per second 
    unsigned short      blockAlign;     // 2=16-bit mono, 4=16-bit stereo 
    unsigned short      bitsPerSample;  // Number of bits per sample      
    char                Subchunk2ID[4]; // "data"  string   
    unsigned long       Subchunk2Size;  // Sampled data length    

}wav_hdr; 

// Function prototypes 
int getFileSize(FILE *inFile); 

int main(int argc,char *argv[]){
    wav_hdr wavHeader;
    FILE *wavFile;
    int headerSize = sizeof(wav_hdr),filelength = 0;

    string answer;

    do{
        string input;
        string answer;

        const char* filePath;

        cout << "Pick wav file from the Windows Media File: ";
        cin >> input;
        cin.get();

        cout << endl;

        path = "C:\\Windows\\Media\\" + input + ".wav";
        filePath = path.c_str();

        wavFile = fopen( filePath , "r" );

        if(wavFile == NULL){
            printf("Can not able to open wave file\n");
            //exit(EXIT_FAILURE);
        }

        fread(&wavHeader,headerSize,1,wavFile);
        filelength = getFileSize(wavFile);
        fclose(wavFile);

        cout << "File is                    :" << filelength << " bytes." << endl;

        cout << "RIFF header                :" << wavHeader.RIFF[0] 
                                                << wavHeader.RIFF[1] 
                                                << wavHeader.RIFF[2] 
                                                << wavHeader.RIFF[3] << endl;

        cout << "WAVE header                :" << wavHeader.WAVE[0] 
                                                << wavHeader.WAVE[1] 
                                                << wavHeader.WAVE[2] 
                                                << wavHeader.WAVE[3] 
                                                << endl;

        cout << "FMT                        :" << wavHeader.fmt[0] 
                                                << wavHeader.fmt[1] 
                                                << wavHeader.fmt[2] 
                                                << wavHeader.fmt[3] 
                                                << endl;

        cout << "Data size                  :" << wavHeader.ChunkSize << endl;

        // Display the sampling Rate form the header
        cout << "Sampling Rate              :" << wavHeader.SamplesPerSec << endl;
        cout << "Number of bits used        :" << wavHeader.bitsPerSample << endl;
        cout << "Number of channels         :" << wavHeader.NumOfChan << endl;
        cout << "Number of bytes per second :" << wavHeader.bytesPerSec << endl;
        cout << "Data length                :" << wavHeader.Subchunk2Size << endl;
        cout << "Audio Format               :" << wavHeader.AudioFormat << endl;
        // Audio format 1=PCM,6=mulaw,7=alaw, 257=IBM Mu-Law, 258=IBM A-Law, 259=ADPCM 

        cout << "Block align                :" << wavHeader.blockAlign << endl;

        cout << "Data string                :" << wavHeader.Subchunk2ID[0] 
                                                << wavHeader.Subchunk2ID[1]
                                                << wavHeader.Subchunk2ID[2] 
                                                << wavHeader.Subchunk2ID[3] 
                                                << endl;

        cout << endl << endl << "Try something else? (y/n)";
        cin >> answer;
        //cin.get();
        cout << endl << endl;

    }while( answer == "y" );

    getchar();
    return 0;
} 
// find the file size 
int getFileSize(FILE *inFile){
    int fileSize = 0;
    fseek(inFile,0,SEEK_END);

    fileSize=ftell(inFile);

    fseek(inFile,0,SEEK_SET);
    return fileSize;
} 
```

我已经尝试了几次，它提供的数据通过 Windows 文件夹中 Media 文件夹中的不同 wav 文件似乎是一致的。

然后下一步是将 wav 文件的实际数据存储在向量中。但是，我对如何做到这一点一无所知。我发现的在线解决方案只能读取头文件。

关于如何存储（并希望显示）wav 文件的实际数据的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-01T16:25:18.867

这张图片取自[斯坦福的课程](http://soundfile.sapp.org/doc/WaveFormat/)

![WAV 文件格式](../Images/0f5440f4ed9cafaf40ffa0ed048da0b2.png)

因此，您可以看到音频数据立即出现在您已经读取的标头之后，并且会有`Subchunk2Size`音频数据字节。

这个的伪代码是

```
ReadRIFF();
ReadFMT();
int32 chunk2Id = Read32(BigEndian);
int32 chunk2Size = Read32(LittleEndian);
for (int i = 0; i < chunk2Size; i++)
{
    audioData[i] = ReadByte();
} 
```

如果音频是立体声，您将有两个音频流在`data`. 如果音频被压缩（mp3、aac 等），您必须先对其进行解压缩。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-20T20:45:18.470

我知道这是一篇旧帖子，但是您的 fread 参数已切换，这是一个更正确的版本（需要带有 -std=c++11 标志的 g++-4.7 或更高版本，例如“g++ -std=c++11 WaveReader. cpp -o WaveReader”）。

```
#include <iostream>
#include <string>
#include <fstream>
#include <cstdint>

using std::cin;
using std::cout;
using std::endl;
using std::fstream;
using std::string;

typedef struct  WAV_HEADER
{
    /* RIFF Chunk Descriptor */
    uint8_t         RIFF[4];        // RIFF Header Magic header
    uint32_t        ChunkSize;      // RIFF Chunk Size
    uint8_t         WAVE[4];        // WAVE Header
    /* "fmt" sub-chunk */
    uint8_t         fmt[4];         // FMT header
    uint32_t        Subchunk1Size;  // Size of the fmt chunk
    uint16_t        AudioFormat;    // Audio format 1=PCM,6=mulaw,7=alaw,     257=IBM Mu-Law, 258=IBM A-Law, 259=ADPCM
    uint16_t        NumOfChan;      // Number of channels 1=Mono 2=Sterio
    uint32_t        SamplesPerSec;  // Sampling Frequency in Hz
    uint32_t        bytesPerSec;    // bytes per second
    uint16_t        blockAlign;     // 2=16-bit mono, 4=16-bit stereo
    uint16_t        bitsPerSample;  // Number of bits per sample
    /* "data" sub-chunk */
    uint8_t         Subchunk2ID[4]; // "data"  string
    uint32_t        Subchunk2Size;  // Sampled data length
} wav_hdr;

// Function prototypes
int getFileSize(FILE* inFile);

int main(int argc, char* argv[])
{
    wav_hdr wavHeader;
    int headerSize = sizeof(wav_hdr), filelength = 0;

    const char* filePath;
    string input;
    if (argc <= 1)
    {
        cout << "Input wave file name: ";
        cin >> input;
        cin.get();
        filePath = input.c_str();
    }
    else
    {
        filePath = argv[1];
        cout << "Input wave file name: " << filePath << endl;
    }

    FILE* wavFile = fopen(filePath, "r");
    if (wavFile == nullptr)
    {
        fprintf(stderr, "Unable to open wave file: %s\n", filePath);
        return 1;
    }

    //Read the header
    size_t bytesRead = fread(&wavHeader, 1, headerSize, wavFile);
    cout << "Header Read " << bytesRead << " bytes." << endl;
    if (bytesRead > 0)
    {
        //Read the data
        uint16_t bytesPerSample = wavHeader.bitsPerSample / 8;      //Number     of bytes per sample
        uint64_t numSamples = wavHeader.ChunkSize / bytesPerSample; //How many samples are in the wav file?
        static const uint16_t BUFFER_SIZE = 4096;
        int8_t* buffer = new int8_t[BUFFER_SIZE];
        while ((bytesRead = fread(buffer, sizeof buffer[0], BUFFER_SIZE / (sizeof buffer[0]), wavFile)) > 0)
        {
            /** DO SOMETHING WITH THE WAVE DATA HERE **/
            cout << "Read " << bytesRead << " bytes." << endl;
        }
        delete [] buffer;
        buffer = nullptr;
        filelength = getFileSize(wavFile);

        cout << "File is                    :" << filelength << " bytes." << endl;
        cout << "RIFF header                :" << wavHeader.RIFF[0] << wavHeader.RIFF[1] << wavHeader.RIFF[2] << wavHeader.RIFF[3] << endl;
        cout << "WAVE header                :" << wavHeader.WAVE[0] << wavHeader.WAVE[1] << wavHeader.WAVE[2] << wavHeader.WAVE[3] << endl;
        cout << "FMT                        :" << wavHeader.fmt[0] << wavHeader.fmt[1] << wavHeader.fmt[2] << wavHeader.fmt[3] << endl;
        cout << "Data size                  :" << wavHeader.ChunkSize << endl;

        // Display the sampling Rate from the header
        cout << "Sampling Rate              :" << wavHeader.SamplesPerSec << endl;
        cout << "Number of bits used        :" << wavHeader.bitsPerSample << endl;
        cout << "Number of channels         :" << wavHeader.NumOfChan << endl;
        cout << "Number of bytes per second :" << wavHeader.bytesPerSec << endl;
        cout << "Data length                :" << wavHeader.Subchunk2Size << endl;
        cout << "Audio Format               :" << wavHeader.AudioFormat << endl;
        // Audio format 1=PCM,6=mulaw,7=alaw, 257=IBM Mu-Law, 258=IBM A-Law, 259=ADPCM

        cout << "Block align                :" << wavHeader.blockAlign << endl;
        cout << "Data string                :" << wavHeader.Subchunk2ID[0] << wavHeader.Subchunk2ID[1] << wavHeader.Subchunk2ID[2] << wavHeader.Subchunk2ID[3] << endl;
    }
    fclose(wavFile);
    return 0;
}

// find the file size
int getFileSize(FILE* inFile)
{
    int fileSize = 0;
    fseek(inFile, 0, SEEK_END);

    fileSize = ftell(inFile);

    fseek(inFile, 0, SEEK_SET);
    return fileSize;
} 
```

# opengl - 使用 DevIL 加载纹理，使用 Qt 加载纹理的等效代码？

> ID：13660779
> 
> 赞同：0
> 
> 时间：2012-12-01T15:19:44.143
> 
> 标签：opengl, glsl, devil

我在 Visual Studio C++ 2010 中使用 opengl 和 glsl。我正在编写着色器，我需要加载纹理。我正在阅读一本书的代码，他们在那里用 Qt 加载纹理，但我需要用 DevIL 来做，有人可以用 DevIL 编写用于纹理加载的等效代码吗？我是 DevIL 的新手，我不知道如何翻译。

```
// Load texture file
const char * texName = "texture/brick1.jpg";
QImage timg = QGLWidget::convertToGLFormat(QImage(texName,"JPG"));

// Copy file to OpenGL
glActiveTexture(GL_TEXTURE0);
GLuint tid;
glGenTextures(1, &tid);
glBindTexture(GL_TEXTURE_2D, tid);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, timg.width(), timg.height(), 0,
             GL_RGBA, GL_UNSIGNED_BYTE, timg.bits());
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:58:59.300

鉴于 DevIL 不再维护，并且 ILUT 部分假设需要 2 次幂纹理尺寸并在其便利功能中重新缩放图像，因此绕道而行实际上是有意义的。

首先使用 DevIL 从文件中加载图像与在 OpenGL 中从图像中加载纹理非常相似。首先你创建一个 DevIL 镜像名称并绑定它

```
GLuint loadImageToTexture(char const * const thefilename)
{

    ILuint imageID;
    ilGenImages(1, &imageID);
    ilBindImage(imageID); 
```

现在您可以从文件中加载图像

```
ilLoadImage(thefilename); 
```

检查图像是否提供数据，如果不是，请清理

```
void data = ilGetData();
if(!data) {
    ilBindImage(0);
    ilDeleteImages(1, &imageID);
    return 0;
} 
```

检索重要参数

```
int const width  = ilGetInteger(IL_IMAGE_WIDTH);
int const height = ilGetInteger(IL_IMAGE_HEIGHT);
int const type   = ilGetInteger(IL_IMAGE_TYPE); // matches OpenGL
int const format = ilGetInteger(IL_IMAGE_FORMAT); // matches OpenGL 
```

生成纹理名称

```
GLuint textureID;
glGenTextures(1, &textureID);
glBindTexture(GL_TEXTURE_2D, textureID); 
```

接下来我们设置像素存储参数（您的原始代码错过了关键步骤）

```
glPixelStorei(GL_UNPACK_SWAP_BYTES, GL_FALSE);
glPixelStorei(GL_UNPACK_ROW_LENGTH, 0); // rows are tightly packed
glPixelStorei(GL_UNPACK_SKIP_PIXELS, 0);
glPixelStorei(GL_UNPACK_SKIP_ROWS, 0);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1); // pixels are tightly packed 
```

最后我们可以上传纹理图像并返回ID

```
 glTexImage2D(GL_TEXTURE_2D, 0, format, width, height, 0, format, type, data); 
```

接下来，为方便起见，我们将缩小过滤器设置为 GL_LINEAR，这样我们就不必提供 mipmap 级别。

```
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

最后返回textureID

```
 return textureID;
} 
```

如果你想使用 mipmapping，你可以`glGenerateMipmap`稍后使用 OpenGL；使用 glTexParameter GL_TEXTURE_MIN_LOD 和 GL_TEXTURE_MAX_LOD 来控制生成的图像金字塔的跨度。

# javascript - jQuery AutoComplete 来自路由的数据并使用自定义数据和显示

> ID：13660782
> 
> 赞同：0
> 
> 时间：2012-12-01T15:19:53.833
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

这是我尝试使用的代码（从远程 json 中提取的部分，从自定义数据显示中删除的部分）：

```
$(function () {
    $("#Field1Text").autocomplete({
        minLength: 0,
        source: function (request, response) {
            $.ajax({
                url: "/Main/Users/GetItems",
                dataType: "json",
                data: {
                    group: "Default",
                    query: request.term
                }
        },
        focus: function (event, ui) {
            $("#Field1Text").val(ui.item.Description);
            return false;
        },
        select: function (event, ui) {
            $("#Field1Text").val(ui.item.Description);

            return false;
        }
    })
    .data("autocomplete")._renderItem = function (ul, item) {
        return $("<li>")
            .data("item.autocomplete", item)
            .append("<a><strong>" + item.Description + "</strong><br>" + item.Section + " - " + item.Type + " - " + item.Name + "</a>")
            .appendTo(ul);
    };
}); 
```

数据恢复正常，但渲染项功能永远不会触发。我已经废弃了渲染项版本并使用了 success: inside of source ，它看起来像这样：

```
 success: function (data) {
                    response($.map(data, function (ul, item) {
                        return $("<li>")
                            .data("item.autocomplete", item)
                            .append("<a><strong>" + item.Description + "</strong><br>" + item.Section + " - " + item.Type + " - " + item.Name + "</a>")
                            .appendTo(ul);
                    }));
                } 
```

我使用了 firebug，并且能够在响应部分打断点：如果我查看 data 中的数据，它看起来像：

`[ Object { ...data... }, Object { ...data... }]`

如果我在成功部分的行设置断点`.data`，我会看到 ul 是对象之一`( looks like " Object { ... data ... }")`

item 元素此时为 0，当我尝试渲染`<a>`标签时，它在所有属性上都显示为 Undefined （可以理解，看起来将 item 对象视为`int`）。

如何让该组件正确处理？

编辑：对不起，我想根据评论中的建议添加一个 jsFiddle，但有家庭事务。

[http://jsfiddle.net/EYj8v/2/](http://jsfiddle.net/EYj8v/2/)

我评论了与我们在工作中使用的代码相似的代码。不幸的是，该网络应用程序是一个内部应用程序，其数据库未连接到外部世界，因此我无法使用实时数据。testResults 对象就是我在success: section的数据元素中看到的。

我实际上能够触发成功部分，但我不相信我正在正确使用 jQuery UI/Autocomplete（至少是我的假设），因为我能够查看 ul.Properties 并查看真实数据。附加项目使用虚假数据，但是当我尝试将成功块复制并粘贴到渲染项目中时，所有数据都未定义。在那个阶段我也找不到一对一的映射（ul 是页面上的元素，item 只是 [li]）。

# css - 将 Less 和 CSS 文件与 grails lesscss-resource 捆绑在一起

> ID：13660787
> 
> 赞同：4
> 
> 时间：2012-12-01T15:20:42.640
> 
> 标签：css, grails, less, grails-plugin

在我的 grails 应用程序中，我定义了以下资源模块，其中包括由 Less 生成的 CSS 文件和常规 CSS 文件的混合。

```
responsive {
    dependsOn 'jquery'

    resource 'js/responsive/bootstrap.js'

    resource 'css/footer.css'
    resource url: 'less/style.less', attrs: [rel: "stylesheet/less", type: 'css'], bundle: 'bundle_responsive'
} 
```

根据[插件文档](http://grails.org/plugin/lesscss-resources)，`bundle: 'bundle_responsive'`应该将所有 CSS 文件捆绑在一起。当页面加载时，我看到确实只有一个 CSS 包

```
<link href="/summer-festivals/bundle-bundle_responsive_head.css" type="text/css" rel="stylesheet" media="screen, projection" /> 
```

但是，找不到捆绑文件，因此出现错误：

> 错误 resource.ResourceMeta - 找不到资源：/bundle-bundle_responsive_head.css

当然，捆绑包中的任何资源都不会被加载。如果我删除`bundle: 'bundle_responsive'`，所有资源都会加载，但从 Less 生成的 CSS 文件与常规 CSS 文件位于不同的包中。

如何将所有 CSS 文件捆绑在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:36:06.870

我没有使用过这个，所以我在这里的回答纯粹是基于我对文档的阅读和你的示例代码的比较。可能是原因的一个区别（您必须测试）是将您的块声明`responsive`放在单引号中，如文档代码，因为这*可能*会影响资源“路径”的形成：

不是：`responsive { ... }`

但：`'responsive' { ... }`

# asp.net-mvc - MVC4 验证日期是今天还是之后？

> ID：13660788
> 
> 赞同：0
> 
> 时间：2012-12-01T15:20:49.200
> 
> 标签：asp.net-mvc, validation, date, razor

我在 MVC4 中有一个具有 Date 属性的播放列表模型类，当用户创建它时，我希望他们不能指定今天之前的日期（所以今天或之后）。

这是我的播放列表课程的一部分：

```
[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "Incorrect date format.")]
        public DateTime Date { get; set; } 
```

如何为此“范围”添加验证？现在它只是验证它是否是一个有效的日期，但 11/30/2012 是有效的，即使是昨天也不会抛出任何错误。

我正在为我的视图使用 Razor。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:36:08.720

您无法使用 Range 属性针对动态值进行验证。您可以根据 ValidationAttribute 创建自己的验证器，根据当前日期或计算日期验证日期。或者，您可以在模型类（伙伴类以阻止它被 EF 覆盖）中使用 IValidatableObject 接口，并在那里验证您想要的属性。

# php - 分别对每个级别的多维数组进行排序

> ID：13660791
> 
> 赞同：-1
> 
> 时间：2012-12-01T15:21:17.057
> 
> 标签：php, multidimensional-array, sorting

> **可能重复：**
> [如何对以下 PHP 多维数组进行排序？](https://stackoverflow.com/questions/12900539/how-to-sort-the-following-php-multidimensional-array)

假设我有以下数组：

```
Array
    (
        [0] => Array
            (
                [id] => 5
                [name] => Education
                [parent] => 1
                [sort_order] => 3
                [leaf] => 1
            )

        [1] => Array
            (
                [id] => 6
                [name] => Computers
                [parent] => 1
                [sort_order] => 1
                [leaf] => 1
            )

        [2] => Array
            (
                [id] => 7
                [name] => Science
                [parent] => 1
                [sort_order] => 2
                [children] => Array
                    (
                        [0] => Array
                            (
                                [id] => 8
                                [name] => Mathematics
                                [parent] => 7
                                [sort_order] => 2
                                [children] => Array
                                    (
                                        [0] => Array
                                            (
                                                [id] => 11
                                                [name] => Geometry
                                                [parent] => 8
                                                [sort_order] => 2
                                                [leaf] => 1
                                            )

                                        [1] => Array
                                            (
                                                [id] => 12
                                                [name] => Algebra
                                                [parent] => 8
                                                [sort_order] => 1
                                                [leaf] => 1
                                            )

                                    )

                            )

                        [1] => Array
                            (
                                [id] => 9
                                [name] => Physics
                                [parent] => 7
                                [sort_order] => 1
                                [leaf] => 1
                            )

                        [2] => Array
                            (
                                [id] => 10
                                [name] => Biology
                                [parent] => 7
                                [sort_order] => 4
                                [leaf] => 1
                            )

                        [3] => Array
                            (
                                [id] => 13
                                [name] => History
                                [parent] => 7
                                [sort_order] => 3
                                [leaf] => 1
                            )

                    )

            ) 
```

是否有任何 PHP 内置函数可以按`'sort_order'`值在每个级别上分别对该数组进行排序？我找到了几种解决方案，但它们都按字母顺序排序或使用了 ksort()。

可能需要递归，但我需要一些帮助如何开始。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:44:05.403

有一个：`usort`它允许您自定义比较功能。

# 排序 1 级

什么是比较函数？一个函数，接受两个参数，当第一个小于第二个时返回 -1，当第一个大于时返回 +1，如果两者相等则返回 0。

如何定义一个函数？

如果有内置函数或个人函数带来功能，那么表示函数名称的字符串就是点。

如果它是一个对象的方法，你必须使用一个数组引用实例和方法名称

至少，您可以使用这样的匿名函数：

```
function sortALevel(&$array){

usort($array,function($a,$b){
     if($a['sort_order'] > $b['sort_order']){
       return 1;
     }
     if($a['sort_order'] < $b['sort_order']){
       return -1;
     }
     return 0;

  });
  } 
```

# 对整个数组进行排序

```
function sort_recursive($array){ 
sortALevel($array);
foreach($array as $value){
   if(is_array($value)){

     sort_recursive($value);
   }
}
} 
```

# android - 为什么文本视图不可见？

> ID：13660792
> 
> 赞同：0
> 
> 时间：2012-12-01T15:21:28.967
> 
> 标签：android

我使用以下布局（缩短）：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android" ...>
  <TableRow ...>
    <TextView
      android:id="@+id/sell_text"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:text="@string/sell" />
    <SeekBar
      android:id="@+id/sell"
      android:layout_width="match_parent"
      android:layout_height="match_parent" />
    </TableRow>
 </TableLayout> 
```

像这样（也缩短了）：

```
LayoutInflater inflater = parent.getLayoutInflater();
View layout = inflater.inflate(R.layout.merger_sale, null);
AlertDialog.Builder builder = new AlertDialog.Builder(parent);  
builder.setTitle(R.string.sell_stock_after_merger)
.setView(layout)
.setPositiveButton(R.string.sell_all, new OnClickListener() {...
.setNeutralButton(R.string.trade_sell, new OnClickListener() {...
.setNegativeButton(R.string.trade_all, new OnClickListener() {...
AlertDialog dialog = builder.create();
dialog.show(); 
```

布局没有错误，代码也没有。布局在 Eclipse 的布局编辑器中完全显示。对话框在它应该出现的时候出现，按钮的行为应该是它们应该出现的，除了 texview (@+id/sell_text) [和缩短的 <TableRow>s 中的其他文本视图]，它们没有出现。

我在看什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:41:06.767

我认为如果您更改宽度和高度以包装内容而不是 match_parent，它会起作用。

match_parent 表示它可能会填充整个布局。

或者尝试为每个项目赋予权重，例如 layout_weight ，值为 0 。这可能会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:52:34.937

试试看：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

  <TableRow ...>
    <TextView
      android:id="@+id/sell_text"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:text="@string/sell" />
    <SeekBar
      android:id="@+id/sell"
      android:layout_width="match_parent"
      android:layout_height="match_parent" />
    </TableRow>
 </TableLayout> 
```

# c++ - Portaudio + Opus 编码/解码音频输入

> ID：13660796
> 
> 赞同：5
> 
> 时间：2012-12-01T15:21:34.757
> 
> 标签：c++, audio, voip, portaudio, opus

我正在使用 Portaudio 和 opus 开发 VOIP 客户端。我在一帧中从麦克风中读取 - 使用 Opus 对每一帧进行编码并将其放入列表中 - 从列表中弹出第一个元素并对其进行解码 - 使用 portaudio 读取它

如果我在不编码声音的情况下做同样的事情，效果会很好。但是当我使用 Opus 时，我的声音很糟糕，我听不懂声音（这对 voip 客户端来说很糟糕）

```
HandlerOpus::HandlerOpus(int sample_rate, int num_channels)
    {
        this->num_channels = num_channels;
        this->enc = opus_encoder_create(sample_rate, num_channels, OPUS_APPLICATION_VOIP, &this->error);
        this->dec = opus_decoder_create(sample_rate, num_channels, &this->error);

        opus_int32 rate;

        opus_encoder_ctl(enc, OPUS_GET_BANDWIDTH(&rate));
        this->encoded_data_size = rate;
    }

    HandlerOpus::~HandlerOpus(void)
    {
        opus_encoder_destroy(this->enc);
        opus_decoder_destroy(this->dec);
    }

    unsigned char *HandlerOpus::encodeFrame(const float *frame, int frame_size)
    {
        unsigned char *compressed_buffer;
        int ret;

        compressed_buffer = new (unsigned char[this->encoded_data_size]);
        ret = opus_encode_float(this->enc, frame, frame_size, compressed_buffer, this->encoded_data_size);
        return (compressed_buffer);
    }

    float *HandlerOpus::decodeFrame(const unsigned char *data, int frame_size)
    {
        int ret;
        float *frame = new (float[frame_size * this->num_channels]);

        opus_packet_get_nb_channels(data);
        ret = opus_decode_float(this->dec, data, this->encoded_data_size, frame, frame_size, 0);
        return (frame);
    } 
```

我无法更改必须使用 Opus 的库。采样率为 48000，每个缓冲区的帧数为 480，我尝试了单声道和立体声。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:43:52.807

我自己解决了这个问题，我更改了配置：采样率为 24000，每个缓冲区的帧数仍为 480。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-13T14:56:36.847

6年后，但我会为像我这样的未来谷歌人发布一个答案：

I had very similiar problem and fixed it by changing PortAudio sample type to paInt32 and switched from opus_decode_float to just opus_decode

# c# - 如何在 Windows 应用商店应用程序中获取本地主机 IP 地址？

> ID：13660803
> 
> 赞同：4
> 
> 时间：2012-12-01T15:22:23.063
> 
> 标签：c#, ip, windows-store-apps

我在 Windows 应用商店应用程序中调用的特定休息服务需要调用计算机的 IP 地址作为参数。[使用System.Net](https://stackoverflow.com/questions/151231/how-do-i-get-the-local-network-ip-address-of-a-computer-programmatically-c)或[System.Net.NetworkInformation](http://social.msdn.microsoft.com/forums/en-us/vblanguage/thread/EDA3FE2B-28D5-4C13-A333-DB0AD76F52EA)的经过验证的真实示例都没有在商店应用程序中编译。

Windows 商店应用程序中可用的类型和方法的神奇组合将获取本地计算机的 IP 地址是什么？我觉得这可能很明显，但我没有看到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:35:59.103

您将不得不联系外部服务器。即使平台提供 API 来检索网络地址，主机仍可能位于代理或 NAT 之后（您将看到类似 192.168.1.4 的内容，而不是您的外部 IP 地址）。

[只需对http://ifconfig.me/](http://ifconfig.me/)或[http://whatismyip.com/](http://whatismyip.com/)等服务执行 HTTP 请求并解析 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T06:42:57.097

本地网络IP地址：

```
foreach (HostName localHostName in NetworkInformation.GetHostNames())
{
    if (localHostName.IPInformation != null)
    {
        if (localHostName.Type == HostNameType.Ipv4)
        {
            // E.g.: 192.168.1.108
            Debug.WriteLine(localHostName);
        }
    }
} 
```

# java - 从弹出菜单操作事件中获取右键单击位置

> ID：13660804
> 
> 赞同：5
> 
> 时间：2012-12-01T15:22:25.787
> 
> 标签：java, swing, coordinates, jcomponent, jpopupmenu

我有一个 java 程序，当在 JPanel 中单击鼠标右键时会打开一个弹出菜单。单击任何弹出菜单项时，我想打印在终端中触发弹出菜单的右键单击位置。我该怎么做呢？如何从弹出操作事件中获取右键单击的位置？

如果弹出菜单在 JComponent 中，代码如何更改？

这是程序。

```
 import java.awt.EventQueue;
    import java.awt.event.*;
    import javax.swing.*;

    public class MenuTest
    {
        public static void main(String[] args)
        {
            EventQueue.invokeLater(new Runnable()
            {
                public void run()
                {
                    MenuFrame frame = new MenuFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            });
        }
    }

    class MenuFrame extends JFrame
    {
        public MenuFrame()
        {
            setTitle("MenuTest");
            setSize(300, 200);

            Action cutAction = new TestAction("Cut");
            Action copyAction = new TestAction("Copy");
            Action pasteAction = new TestAction("Paste");

            JPopupMenu popup = new JPopupMenu();
            popup.add(cutAction);
            popup.add(copyAction);
            popup.add(pasteAction);

            JPanel panel = new JPanel();
            panel.setComponentPopupMenu(popup);
            add(panel);

            panel.addMouseListener(new MouseAdapter() {});
        }

        class TestAction extends AbstractAction
        {
            public TestAction(String name)
            {
                super(name);
            }

            public void actionPerformed(ActionEvent event)
            {
                System.out.println("Right click happened at ?"); // How do I get right click location?          
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:57:44.393

为按下的事件添加鼠标侦听器，（点击的事件被弹出窗口捕获）：

```
 panel.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent e) {
            clickLocation.setSize(e.getX(), e.getY());
        }
    });
    Action cutAction = new TestAction("Cut", clickLocation);
    Action copyAction = new TestAction("Copy", clickLocation);
    Action pasteAction = new TestAction("Paste", clickLocation); 
```

打印尺寸：

```
 private Dimension clickLocation;

    public TestAction(String name, Dimension clickLocation) {
        super(name);
        this.clickLocation = clickLocation;
    }

    public void actionPerformed(ActionEvent event) {
        System.out.println("Right click happened at " + clickLocation);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T16:29:00.313

你在正确的轨道上。我个人更喜欢手动显示它，`MouseAdapter`这样我就可以在其他鼠标事件上添加方法。为此，您可能需要删除`panel.setComponentPopupMenu(popup);`

* * *

```
panel.addMouseListener(new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent arg0) {
            if (arg0.getButton() == MouseEvent.BUTTON3) { //Button3 is rightclick
                popup.show(panel, arg0.getX(), arg0.getY());
            }
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:52:28.013

这是我正在寻找的代码。感谢 Schippi 和 Garret 的帮助。

```
 import java.awt.EventQueue;
    import java.awt.event.*;
    import javax.swing.*;
    import java.awt.geom.*;

    public class MenuTest
    {
        public static void main(String[] args)
        {
            EventQueue.invokeLater(new Runnable()
            {
                public void run()
                {
                    MenuFrame frame = new MenuFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            });
        }
    }

    class MenuFrame extends JFrame
    {
        public MenuFrame()
        {
            setTitle("MenuTest");
            setSize(300, 200);

            Action cutAction = new TestAction("Cut");
            Action copyAction = new TestAction("Copy");
            Action pasteAction = new TestAction("Paste");

            JPopupMenu popup = new JPopupMenu();
            popup.add(cutAction);
            popup.add(copyAction);
            popup.add(pasteAction);

            JPanel panel = new JPanel();
            panel.setComponentPopupMenu(popup);
            add(panel);

            panel.addMouseListener(new MouseAdapter() { 
                @Override
                public void mousePressed(MouseEvent e) {
                    clickLocation= e.getPoint();
                }
            });
        }

        class TestAction extends AbstractAction
        {
            public TestAction(String name)
            {
                super(name);
            }

            public void actionPerformed(ActionEvent event)
            {
                System.out.println("Right click happened at (" + clickLocation.getX()+"," + clickLocation.getY()+ ")");         
            }
        }

        private Point2D clickLocation;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T00:38:46.300

或者，如果您不想从事件中获取它。

```
Point mousepospoint=null;

if((mousepospoint=componentname.getMousePosition()) != null){
//mouseposArray[0]=mousepospoint.x;
//mouseposArray[1]=mousepospoint.y;
mousepoints(mousepospoint.x,mousepospoint.y);
}//enif

int[] mouseposArray={0,0};
// requires a function to return it if mouseposArray[] is global
protected int[] mousepoints(int xpo,int ypo){
mouseposArray=new int[2];
mouseposArray[0]=xpo;
mouseposArray[1]=ypo;
return mouseposArray;
}//enmeth 
```

# dynamic-programming - TSP 的动态规划

> ID：13660805
> 
> 赞同：0
> 
> 时间：2012-12-01T15:22:43.733
> 
> 标签：dynamic-programming, np-complete

在 wiki 中阅读了有关 TSP 的信息后，我发现它说 DP 是 TSP 问题的精确算法，但我很困惑，如果他们有一个问题的精确算法，该问题是否仍应归类为 NPC？任何答案表示赞赏。[维基 TSP 页面](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:46:04.230

Nitin Gurram 的评论绝对不正确。

NP-Complete 问题可以（并且确实）有精确算法，但是所有这些*目前已知*的精确算法都在指数时间内执行，最坏的情况。旅行商问题的一个简单但仍然精确的算法是枚举每条可能的旅行商路线，计算每条路线的长度，然后选择最小的。但由于此类路径的数量随着城市数量的增加呈指数增长，因此该算法的执行时间呈指数增长。您指向的维基百科页面说了这么多。

动态规划方法没有天真的方法那么糟糕，它是另一种精确算法，但它仍然在指数时间最坏的情况下运行。

NP-Completeness*并不是说*​​没有精确的算法。这意味着没有已知的精确*多项式时间*算法，以及其他一些技术复杂性理论要求。

（作为旁注，NP-Complete 与 NP 的复杂性类别不同。所有 NP 的意思是，在给定解决方案的情况下，存在多项式时间*验证*算法。NP-Complete 是该集合的子集，正如我提到的，其他一些技术要求。）

# c++ - 使用指向数组的指针进行合并排序

> ID：13660807
> 
> 赞同：2
> 
> 时间：2012-12-01T15:23:00.920
> 
> 标签：c++, algorithm, mergesort

我正在尝试使用 stl 库进行合并排序算法，但遇到了一些问题。下面是我正在使用的代码

```
template <typename Item, typename SizeType>
void merge_sort(Item array[], SizeType size){
    size_t n1; //Size of the first subarray
    size_t n2; //Size of the second subarray

    if(size > 1){
        //Compute the size of the subarrays
        n1 = size/2;
        n2 = size - n1;

        //create the temp array.
        int* n1Temp = new int[n1];
        int* n2Temp = new int[n2];
        int i;
        for(i = 0; i < n1; i++)
            n1Temp[i] = array[i];
        for(i = 0; i < n2; i++)
            n2Temp[i] = array[i + n1];

        //recursive calls
        merge_sort(n1Temp, n1);//sort from array[0] through array[n1 - 1] 
        merge_sort(n2Temp, n2);//sort from array[n1] to the end

        //Merge the two sorted halves.
        vector<int> v(array, array + size);
        merge(n1Temp, n1Temp + n1, n2Temp, n2Temp + n2, v.begin());     
        copy(v.begin(), v.end(), array);//copy the vector back to the array

        delete[] n1Temp;
        delete[] n2Temp;
    }
} 
```

代码排序很好，但问题是它的行为类似于 O(n^2) 算法而不是 O(n \log n)，这是由于在每个合并排序调用中创建了向量（我认为）。我尝试删除向量并仅在合并函数中使用数组，如下所示

```
 //Merge the two sorted halves.
    int* finalArray = new int[n1 + n2];
    merge(n1Temp, n1Temp + n1, n2Temp, n2Temp + n2, begin(finalArray)); 
    array = finalArray; 
```

但这只会给我带来错误。我能做些什么来挽救我的归并排序算法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:49:42.537

正如 Vaughn 和 user93353 都指出的那样，您应该能够在每个合并点直接合并到目标数组中。但是您仍然可以使用 std::vector<> 让您自己更轻松。

此外，您的临时数组是直接类型“int”，我很确定这是模板参数的类型`Item`。我不确定这个`SizeType`参数是做什么用的，但我把它留了下来，以防你有特殊的想法。不管是什么，它最好兼容`size_t`：

```
template <typename Item, typename SizeType>
void merge_sort(Item array[], SizeType size)
{
    if(size > 1)
    {
        //Compute the size of the subarrays
        size_t n1 = size/2;

        //create the temp array
        std::vector<Item> n1Temp(array, array+n1);
        std::vector<Item> n2Temp(array+n1, array+size);

        //recursive calls
        merge_sort(&n1Temp[0], n1);       //sort array[0] through array[n1-1]
        merge_sort(&n2Temp[0], size-n1);  //sort array[n1] through array[size-1]

        // merge the sorted halves
        std::merge(n1Temp.begin(), n1Temp.end(),
                   n2Temp.begin(), n2Temp.end(), array);
    }
} 
```

上述技术通过副本自上而下拆分子序列，然后将拆分副本就地合并到原始数组中。您可以通过在原始数组上进行拆分，然后合并到临时空间并在之后复制，将这个算法减少一个子列表分配*时间*（但不会减少空间），我*认为*您首先尝试这样做：

```
template <typename Item>
void merge_sort(Item ar[], size_t n)
{
    if (n > 1)
    {
        // Compute the size of the subarrays
        size_t n1 = n/2;

        // invoke recursion on the submerges
        merge_sort(ar, n1);      //sort array[0] through array[n1-1]
        merge_sort(ar+n1, n-n1); //sort array[n1] through array[size-1]

        // create merge-buffer
        std::vector<Item> mrg;
        std::merge(ar, ar+n1, ar+n1, ar+n, back_inserter(mrg));
        std::copy(mrg.begin(), mrg.end(), ar);
    }
} 
```

* * *

**基于通用迭代器的解决方案**

对于允许更大灵活性的通用解决方案，您可以基于迭代器而不是 Item 指针来定义合并排序。它变得有点毛茸茸，但好处是非常标准的。

```
template <typename Iterator>
void merge_sort(Iterator first, Iterator last)
{
    typedef typename std::iterator_traits<Iterator>::value_type value_type;
    typedef typename std::iterator_traits<Iterator>::difference_type difference_type;

    difference_type n = std::distance(first, last)/2;
    if (n == 0)
        return;

    // invoke recursion on the submerges
    merge_sort(first, first + n);
    merge_sort(first + n, last);

    // create merge-buffer
    std::vector<value_type> mrg(std::distance(first, last));
    std::merge(first, first+n, first+n, last, mrg.begin());
    std::copy(mrg.begin(), mrg.end(), first);
} 
```

* * *

最后，如果您发现自己对大量固定长度的 C 数组进行排序，您可能会发现以下内容很有帮助（它使用上面的通用迭代器解决方案）：

```
// front-loader for C arrays
template<typename Item, size_t N>
void merge_sort(Item (&ar)[N])
{
    merge_sort(std::begin(ar), std::end(ar));
} 
```

它使以下代码相当方便：

```
int arr[1024];
... fill arr ...
merge_sort(arr); 
```

# javascript - 骨干模型同步状态

> ID：13660808
> 
> 赞同：3
> 
> 时间：2012-12-01T15:23:26.600
> 
> 标签：javascript, rest, backbone.js

在我的应用程序中，用户创建了一个包含一堆模型的集合。因为我不想向服务器发出大量请求，所以我创建了一个自定义函数，将这些模型批量保存到服务器。然后服务器响应所有模型，包括它们的 id，然后将其设置为各种模型。到目前为止一切正常。

我现在遇到的问题是 Backbone 不知道此时所有模型都与服务器同步。因此，稍后在应用程序中，当我在每个模型上调用 model.save() 时，它会再次将每个模型发送到服务器（这应该只是自批处理操作以来更改的模型）。我怎样才能让 Backbone 知道所有模型都已同步？我正在查看 'changed' 和 'hasChanged' 属性，但不太确定是否应该操纵这些（我猜不是）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T16:47:28.017

Backbone 不包括跟踪自上次与服务器同步以来更改的属性的功能。

自上次与服务器同步以来，`changed`并`hasChanged`没有处理更改的属性。

您必须创建自己的机制来跟踪模型的状态：

1.  每个模型都应该有一个`hasChangedSinceLastSync`标志。
2.  每个模型都应绑定 (.on) 到它自己的`change`事件并将标志设置为 true。
3.  一旦从服务器返回数据（用于读取/创建/更新），覆盖该`sync`方法并将标志设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:45:45.707

如果您的模型的属性未设置/为空，Backbone 将`HTTP POST`创建您的模型服务器端。`id`

所以你应该做的是`id`在服务器返回它们时手动设置这个属性。

此外，如果您的`id`属性不是`id`，您可以告诉骨干这是另一个属性。

cf，文档：

*   手动设置属性：[http ://backbonejs.org/#Model-set](http://backbonejs.org/#Model-set)
*   模型的 id 属性：http: [//backbonejs.org/#Model-id](http://backbonejs.org/#Model-id)
*   参考`save()`模型时在工作表下调用的同步方法：http: [//backbonejs.org/#Sync](http://backbonejs.org/#Sync)

# powershell - 将 powershell 脚本转换为 csv

> ID：13660809
> 
> 赞同：0
> 
> 时间：2012-12-01T15:23:30.500
> 
> 标签：powershell

我正在使用 powershell 进行一些测试，以列出我域中每台计算机的硬件信息。我的脚本将从我使用 powershell 创建的文本文件中获取计算机列表。

```
$arrComputers = get-Content -Path "C:\powershell\List.txt"
foreach ($strComputer in $arrComputers)
{
    $colItemsOs = get-wmiobject -class "Win32_OperatingSystem" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsOs)
   {
    Write-host  "Computer Name: " $strComputer
    Write-host  "OsName: " $objItem.Name
    Write-host  "Version: " $objItem.Version
   }

    $colItemsCompsys = get-wmiobject -class "Win32_ComputerSystem" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsCompsys)
   {
    Write-host  "Memory: " $objItem.TotalPhysicalMemory
    Write-host  "Manufacturer: " $objItem.Manufacturer
    Write-host  "Model: " $objItem.Model
    Write-host  "Domain: " $objItem.Domain
   }

     $colItemsSysEnc = get-wmiobject -class "Win32_SystemEnclosure" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsSysEnc)
   {
    Write-host  "SerialNumber: " $objItem.SerialNumber
   }

     $colItemsProcessor = get-wmiobject -class "Win32_Processor" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsProcessor)
   {
    Write-host  "Processor: " $objItem.Name
   }

    $colItemsIP = get-wmiobject -class "Win32_NetworkAdapterConfiguration " -namespace "root\CIMV2" `
    -computername $strComputer -Filter "IpEnabled = TRUE"
   foreach ($objItem in $colItemsIP)
   {
    Write-host  "IPAddress: " $objItem.IpAddress
   }

    Write-host | Out-File c:\powershell\reportbeta.csv

} 
```

但是，我无法这样做。我如何在 csv 文件中生成结果，以后可以使用 sqlcmd 将其上传到我的数据库。

我错过了什么？

谢谢你

* * *

我设法在文本文件中显示输出。但是，仅显示 1 条记录。

```
$arrComputers = get-Content -Path "C:\powershell\List.txt"
foreach ($strComputer in $arrComputers)
{
    $colItemsOs = get-wmiobject -class "Win32_OperatingSystem" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsOs)
   {
      $strComputer
      $Name =$objItem.Name
      $Version = $objItem.Version
   }

    $colItemsCompsys = get-wmiobject -class "Win32_ComputerSystem" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsCompsys)
   {
      $TotalMemory = $objItem.TotalPhysicalMemory
      $Manufacturer = $objItem.Manufacturer
      $Model = $objItem.Model
      $Domain = $objItem.Domain
   }

     $colItemsSysEnc = get-wmiobject -class "Win32_SystemEnclosure" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsSysEnc)
   {
      $SerialNUmber = $objItem.SerialNumber
   }

     $colItemsProcessor = get-wmiobject -class "Win32_Processor" -namespace "root\CIMV2" `
    -computername $strComputer
   foreach ($objItem in $colItemsProcessor)
   {
     $Processor = $objItem.Name
   }

    $colItemsIP = get-wmiobject -class "Win32_NetworkAdapterConfiguration " -namespace "root\CIMV2" `
    -computername $strComputer -Filter "IpEnabled = TRUE"
   foreach ($objItem in $colItemsIP)
   {
      $IPV4 = $objItem.IpAddress
   }

    $OutputObj  = New-Object -Type PSObject
    $OutputObj | Add-Member -MemberType NoteProperty -Name ComputerName -Value $strComputer.ToUpper()

    $OutputObj | Add-Member -MemberType NoteProperty -Name Name -Value $Name 
    $OutputObj | Add-Member -MemberType NoteProperty -Name Version -Value $Version
    $OutputObj | Add-Member -MemberType NoteProperty -Name TotalPhysicalMemory -Value $TotalMemory 
    $OutputObj | Add-Member -MemberType NoteProperty -Name Manufacturer -Value $Manufacturer
    $OutputObj | Add-Member -MemberType NoteProperty -Name Model -Value $Model

    $OutputObj | Add-Member -MemberType NoteProperty -Name Processor -Value $ProcessorSpeed
    $OutputObj | Add-Member -MemberType NoteProperty -Name SerialNumber -Value $SerialNo
    $OutputObj | Add-Member -MemberType NoteProperty -Name Domain -Value $Domain
    $OutputObj | Add-Member -MemberType NoteProperty -Name IPAddress -Value $IPV4 
    $OutputObj | Export-CSV -NoTypeInformation "c:\powershell\report.txt"

} 
```

我现在没主意了。我应该把它做成数组吗？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:30:42.123

问题是您要在循环中导出到 csv，因此最后一项将是唯一显示的项。尝试这样的事情。

循环前：

```
# Create empty array
$report = @() 
```

在循环结束时，代替您当前导出到 CSV 的位置：

```
#Add item to report
$report += $OutputObj 
```

最后，在循环结束后：

```
$report | Export-CSV -NoTypeInformation "c:\powershell\report.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:50:40.297

我建议您将 foreach 结果分配给一个变量，然后将其通过管道传输到`Export-Csv`. 与在每次循环迭代中重新创建和更新数组相比，它应该执行得更快且效率更高。

```
$result = foreach($strComputer in $arrComputers)...

$result | Export-CSV ... 
```

如果您使用了`Foreach-Object' cmdlet to loop over computers you could skip the whole assignment or array creation, processing one object at a time (streamlined) and pipe directly to`Export-CSV`：

```
Get-Content -Path C:\powershell\List.txt | Foreach-Object{
    ...
} | Export-Csv ... 
```

# spring-mvc - 生成图像并将其与 Spring MVC 中的其他内容一起显示在 JSP 中

> ID：13660815
> 
> 赞同：-1
> 
> 时间：2012-12-01T15:23:56.757
> 
> 标签：spring-mvc, jfreechart, jfreereport

我正在使用 JFreeChart 根据来自数据库的一些数据生成动态图表。我有一个带有一个组合框的 JSP，用户进行输入并提交，Action 处理它，生成图表图像。我需要在与以前相同的 JSP 上显示此图像，在组合框下方。但它只是页面上出现的图形图像。我怎样才能在同一页面上制作它？

我在我的 web 应用程序上使用 spring。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:43:41.553

最简单的方法是使用 JavaScript。提交表单时，通过 JavaScript 事件处理程序拦截提交，然后只需`<img>`在页面中插入一个标签，您希望在其中显示图表。此图像应具有生成图表的操作的 URL。

使用 jQuery，它看起来像这样：

```
$(document).ready(function() {
    $('#myForm').submit(function() {
        var url = '/actionWhichGeneratesTheGraph?selection=' + $('#theSelectBox').val();
        $('#theDivWhereTheGraphMustAppear').html('<img src="' + url + '"/>');
        return false;
    });
}); 
```

如果图表每次生成时都发生变化，即使是类似的选择，您也应该在 URL 的末尾添加一些随机参数以防止浏览器缓存。

# c# - 使用派生列表类访问基列表类的成员？

> ID：13660824
> 
> 赞同：1
> 
> 时间：2012-12-01T15:25:54.540
> 
> 标签：c#

我有以下代码：**它还不完整，**但我想知道如何使用代码中的注释所示的 foreach 语句访问类中的成员。我怀疑答案很简单，我只是没有看到它。谁能帮我？

```
public class PassengerList : List<Passenger>
{
    public bool CheckRules()
    { 

    }

    private bool DaughtersNotWithFather()
    { 
        foreach (Passenger p in ???)// how do i access list members in this class with this foreach statment?
        { // do stuff }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T15:27:55.227

你的类的实例是一个`List<Passanger>`（它是可枚举的）。`this`因此，只需通过关键字引用您的课程

```
foreach (Passenger p in this) 
```

# iphone - Videojs海报图像不显示 - 当设备不允许自动播放时需要显示海报图像

> ID：13660826
> 
> 赞同：3
> 
> 时间：2012-12-01T15:26:09.673
> 
> 标签：iphone, fallback, autoplay, video.js, poster

我有一个网站，其标题中的视频设置为在页面加载时自动播放。它适用于除 iPhone 和 iPad 之外的所有网络浏览器。我最近发现 iPhone 不允许自动播放，这就解释了为什么当我在 iPhone 上打开它时，会出现一个黑框，通过播放按钮在视频应该出现的地方有一条线。我什至无法将它加载到 iPad 上。我无法在 Android 或其他移动设备上进行测试，因为我不拥有它们中的任何一个。顺便说一句：我正在使用 Video.js。

这是我正在尝试做的事情并且需要一些帮助：由于我的视频必须自动播放，如果 iPhone 等特定设备不允许自动播放，我希望显示海报图像而不是视频。这可能吗？？我试过了，但我无法显示海报图像。相反，它只是显示带有播放按钮的丑陋黑框，并带有一条线。我需要帮助来显示海报图像。我以为这会自动发生，但事实并非如此。有谁知道如何做到这一点？我什至想知道是否有办法编写一个后备语句，这样说：“如果没有自动播放，则显示图像。” 我已经看到了 Flash 的后备声明，所以为什么不为不允许自动播放的设备提供一个。我试图让代码正确，但我 我不是 php 专家，所以我需要一些帮助。感谢您的帮助，谢谢。

# iphone - 如何访问变量的值

> ID：13660828
> 
> 赞同：0
> 
> 时间：2012-12-01T15:26:34.210
> 
> 标签：iphone, objective-c, ios

在我的`.h`档案中

```
@interface DemoApp : UIViewController   {
    UITextView *textView;
@private

    NSString *status;

    NSInteger *track1Len,*track2Len;

}
@property (nonatomic,retain) NSString *status; 
```

在`.m`文件中

```
 @synthesize status;
- (void)onDecodeCompleted:(NSString *)sts
{
   status=sts;
   NSLog(@"status is %@",status);

}

- (IBAction)processButton:(id)sender
{
   NSLog(@"status is %@",status);
   // here I am getting null value
} 
```

我只是在整个类文件中访问我的变量。在 ondecodecompleted 方法中，我得到了作为参数传递的值，但是在按下进程按钮后，我得到了空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:28:27.707

尝试：`self.status`在这两个地方。

```
- (void)onDecodeCompleted:(NSString *)sts
{
   self.status=sts;
   NSLog(@"status is %@",self.status);

}

- (IBAction)processButton:(id)sender
{
   NSLog(@"status is %@",self.status);
   // here I am getting null value
} 
```

此外，由于您正在使用`NSString`which 具有可变子类，因此您应该将其标记为`copy`而不是`retain`

`@property (nonatomic,copy) NSString *status;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:44:00.037

您丢失 iVar 的原因是因为您在`ownership`直接设置变量时没有获得变量。
您需要做`status = [sts copy];`OR`status = [sts retain]`以获得所有权。
如果您不拥有所有权，那么它`status`的寿命`sts`可能不是您想要的。

直接访问 iVar 通常不是一个好主意，因为您需要记住每次都正确执行本地内存管理。
最佳做法是使用您的`@property`with `dot syntax`。该属性将根据您将声明的设置来处理设置器的内存管理。

# jsf - 请求不会在 primefaces 数据表中呈现响应

> ID：13660829
> 
> 赞同：1
> 
> 时间：2012-12-01T15:26:42.793
> 
> 标签：jsf, primefaces

我有一个带有搜索字段和 commandLink 的数据表进行排序。我用来触发排序的 commandLink 不在列标题中，而是在数据表的标题中。当我加载页面并仅使用 commandLink 进行排序时，一切正常。表格按两个顺序排序，我在页面上看到了结果。当我在 globalFilter 中搜索某些内容时出现问题。它也有效，但在那之后我无法对我的表进行排序。我清除了 globalFilter 的 inputText 并且无法对表进行排序。总而言之，我只有在不使用搜索字段时才能看到排序结果。排序操作有效，但请求不更新数据表。我把我的代码放在下面。也许有人知道如何解决它。

```
<ui:composition>
    <p:panel header="Moje pomiary" footer="#{msgs.footer}" id="myMeasurement">

        <h:form id="form" prependId="false">
<p:dataTable var="m" value="#{myMeasurementTable.measurement}" id="measureList" editable="true"              
             widgetVar="mTable"   
             emptyMessage="No files found with given criteria" filteredValue="#{myMeasurementTable.filteredMeasurement}" >

<f:facet name="header">  
        Sortowanie według: <p:commandLink id="sortByName" actionListener="#{myMeasurementTable.sortByName}" update="measureList">   
    <h:outputText value="nazwa pliku" />  
</p:commandLink>  
        |<h:commandLink action="#{myMeasurementTable.sortByArchivisationDate}"> data archiwizacji </h:commandLink> 
        |<h:commandLink action="#{myMeasurementTable.sortByMeasureDate}"> data badania </h:commandLink> 
        <p:outputPanel styleClass="searchPanel">  
            <h:outputText value="Szukaj: " />  
            <p:inputText styleClass="globalFilter" id="globalFilter" onkeyup="mTable.filter()" style="width:150px" />  
        </p:outputPanel>  
    </f:facet>  

    <p:column headerText="Informacje pomiarowe" style="width:125px" filterStyle="display:none" filterBy="#{m.fileName} #{m.measureDate} #{m.place} #{m.archivisationDate}"
    filterMatchMode="contains" >
    <p:separator styleClass="separatorColumn"/> 
        Nazwa pliku: <h:outputText value="#{m.fileName}" /><br /> 
                Data badania: <h:outputText value="#{m.measureDate}" /><br /> 
                Data archiwzacji: <h:outputText value="#{m.archivisationDate}" /><br /> 
                Miejscowość: <h:outputText value="#{m.place}"/> <br />
                Współrzędne GPS:           
    </p:column>

    <p:column headerText="Wykresy">  
       <img src="/tmp/21/myfile.xls/myfile.xls_Parametr x.png" width="150"/>  
    </p:column> </p:dataTable></h:form></p:panel></ui:composition> 
```

和我的豆子的一部分

```
@ManagedBean(name = "myMeasurementTable")
@ViewScoped
public class myMeasurementTable implements Serializable{

    private static final long serialVersionUID = -9193902657201234669L;
    private List<Measurement> measurement;
    private List<Measurement> filteredMeasurement;
    private boolean sortAscending = true;

    public myMeasurementTable() {
        measurement = new ArrayList<Measurement>();
        fillTable(measurement);
    }

    public String sortByName() {
        System.out.println("naciskam sortowanie");
        if (sortAscending) {
            Collections.sort(measurement, new Comparator<Measurement>() {

                @Override
                public int compare(Measurement m1, Measurement m2) {

                    return m1.getFileName().compareTo(m2.getFileName());

                }
            });
            sortAscending = false;
        } else {
            Collections.sort(measurement, new Comparator<Measurement>() {

                @Override
                public int compare(Measurement m1, Measurement m2) {
                    System.out.println(m2.getFileName());
                    return m2.getFileName().compareTo(m1.getFileName());

                }
            });
            sortAscending = true;
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:10:30.757

好的，我在 primefaces 论坛上找到了解决方案。这很简单。我只在 commandButton 中添加了 oncomplete="mTable.filter()" ，一切都按我的意愿工作。

# performance - 关于 oracle 和索引使用的 PreparedStatement

> ID：13660833
> 
> 赞同：1
> 
> 时间：2012-12-01T15:27:13.017
> 
> 标签：performance, oracle, indexing, escaping, prepared-statement

我在 Oracle 中有一张这样的表：

```
create table suppliers(name varchar2(100)); 
```

其对应的索引为`upper(name)`：

```
create index supplier_name_upper_idx on suppliers(upper(name)); 
```

我想通过 AJAX 填充自动完成，从运行 JDBC 查询的 Servlet 获取信息。

这有效：

```
PreparedStatement ps = 
   conn.prepareStatement(
       "select * from suppliers where upper(name) like ?"
   );
ps.setString(1, 'something%'); 
```

问题是，据我所知，`PreparedStatement`不会使用索引，因为在语句编译时它不知道参数是`'something%'`（能够从索引中获得性能优势）还是`'%something%'`（不能从索引中获得性能优势）。

所以，我的问题是：

1.  我应该改用 a`Statement`吗？如果是这样，转义输入参数的最佳方法是什么（因为它将来自 AJAX 请求）
2.  有什么我可以用来制作`PreparedStatement`使用索引的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:33:17.900

我认为准备好的语句更好，因为您将在服务器端进行更少的解析，从而减少“闩锁：库缓存”。

`SELECT /*+ INDEX suppliers(supplier_name_upper_idx) */ * from suppliers ....`应该使语句使用索引“supplier_name_upper_idx”。

# iphone - iPad / iPhone 的简单响应式 100% img 属性问题

> ID：13660838
> 
> 赞同：2
> 
> 时间：2012-12-01T15:27:50.017
> 
> 标签：iphone, css, ipad

我有一个非常简单的投资组合网站（示例页面：[http](http://stevebishop.org/images/a_working_title/index.html) ://stevebishop.org/images/a_working_title/index.html ），我做了一个响应式设计，加载一个“移动”样式表，而不是为 iPhone 大小加载屏幕。

代码中唯一真正的 css 是在常规样式表上，图像被缩放 100% 的屏幕高度，而对于移动设备，它们是 100% 的宽度。目的是为每个设备提供尽可能大的图像，同时在屏幕上显示一个图像。

这一切都很好，除了在 iPad 上查看的问题 - 因为它们*应该*像桌面一样加载常规的 css 文件，但它们似乎无法处理 height: 100% 属性，而是将每个图像显示为非常很大。

有没有人对如何将代码更改为更稳定的代码，或者在不干扰我认为会的小型桌面的情况下为 iPad 加载“移动”css 文件的方法有任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:34:31.937

除了使用 之外`width: 100%`，您还可以使用属性`max-width: 400px`来`max-height:200px`防止图像过大。

希望对一些人有所帮助。

问候。

# c++ - 从字符中删除重音

> ID：13660844
> 
> 赞同：3
> 
> 时间：2012-12-01T15:28:05.443
> 
> 标签：c++, diacritics, wstring

我编写了这段代码来删除字符串中字符的重音并将其变为大写：

```
#include <iostream>
#include <string>
using namespace std;
std::wstring input;
int main()
{
   input.reserve(255);
   cout << "Enter string to be converted:" <<endl;
   getline(std::wcin,input);
   for (unsigned int iii=0;iii<input.length();iii++)
    {
      if(input[iii]== L'ő') input[iii]=L'o';
      if(input[iii]== L'ö') input[iii]=L'o';
      if(input[iii]== L'ó') input[iii]=L'o';
      if(input[iii]== L'ü') input[iii]=L'u';
      if(input[iii]== L'ú') input[iii]=L'u';
      if(input[iii]== L'ű') input[iii]=L'u';
      if(input[iii]== L'é') input[iii]=L'e';
      if(input[iii]== L'á') input[iii]=L'a';
      if(input[iii]== L'í') input[iii]=L'i';
      input[iii]=towupper(input[iii]);
    }
 std::wcout<<input;
 return 0;
} 
```

它使普通字符大写，但忽略带重音的字符并将它们以带重音的小写形式打印。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:29:58.297

这很可能是因为`input`它是一串宽字符，但字符文字如`'ö'`不是宽字符，这意味着比较将失败。使用例如`L'ö'`。

这些比较应该产生警告，如果没有，那么你应该通过编译器打开更多警告，这样你就会得到警告。

# autohotkey - Autohotkey - 替换不同的单词或句子

> ID：13660847
> 
> 赞同：0
> 
> 时间：2012-12-01T15:28:30.017
> 
> 标签：autohotkey

在我使用的这个脚本中，我只能替换一个单词*teams* --> *milan, juventus, inter..* 但我想替换很多单词（不仅仅是一个单词），例如：

[简单的单词替换插孔--> beta]

```
alfa-->beta 
```

[句子替换 jack--> *jack,john,alfa* ]

```
jack

jack
john
alfa 
```

这实际上是我使用的代码

```
loop {
    While !RegexMatch(strCapture, "teams$") {
        Input, strUserInput, V L1, {BackSpace}  ; V: visible, L1: Character length 1
        If ErrorLevel = Endkey:BackSpace
            strCapture := SubStr(strCapture, 1, StrLen(strUserInput) - 1) 
        else
            strCapture .= strUserInput
        ; tooltip % ErrorLevel "`n" strUserInput "`n" strCapture "`n" ; enable this to see what actually happens
    }
    SendInput,
    (Ltrim
        {Backspace 5}
        milan
        juventus
        inter
        roma
        lazio
        napoli
        mantova
    )
    strCapture := ""
} 
```

如何修改代码？
是否也可以运行集成复制粘贴的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-09T18:16:57.640

您可以使用 For 循环来替换内容，但这将变得越来越繁琐，以维护规模，因此 YMMV。

以下将使用剪贴板内容作为 to/from 变量，但您可以根据需要将其替换为变量（将“clipboard”替换为您的字符串变量）。

```
F3::
{
    replace := {"alfa":"beta", "gamma":"delta"}
    For start, end in replace {
    StringReplace, clipboard, clipboard, %start%, %end%, All
}}
Return 
```

# c++ - 是否可以将二进制文件存储在exe中

> ID：13660850
> 
> 赞同：1
> 
> 时间：2012-12-01T15:28:37.177
> 
> 标签：c++, file

是否可以这样做：（出于教育目的）。

假设我有一个图像文件“image.jpg”
我想在执行时创建一个程序，它应该创建这个图像。这意味着图像的数据存储在 exe 中。这可能吗？

像这样：从 resource.rc 链接图像文件，然后告诉编译器获取数据并存储它（这样的事情，`unsigned char data_buffer[]="binary data of the image"`然后当程序执行时，我可以将此数据写入文件）

（我使用 C++ 和 mingw 编译器）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:38:28.630

有几种选择：

1）将其作为字节数组添加到源文件中。编写一个从文件中读取字节并写入 C 源代码的辅助程序是微不足道的。例如：

### 数据_jpg.c：

```
unsigned char data_jpg[] = {1,2,3... }; 
```

### 数据_jpg.h：

```
extern char data_jpg[];
const size_t data_jpg_size = 1000; 
```

2）将其作为二进制资源添加到可执行文件中。你说的是“exe”，是吗？所以你很可能在 Windows 上。Window EXE 文件可以有二进制资源，可以使用资源 API 来定位。请参阅`FindResource`和`LoadResource`函数`GlobalLock`。

### 资源.rc

```
ID_DATA_JPG FILE "data.jpg" 
```

3) 将二进制文件直接转换成OBJ文件并链接到可执行文件中。在过去，turbo-c 曾经是一个 BINOBJ 工具。GNU 工具可以做到这一点，AFAIk，但使用 MS 工具，我真的无法判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:13:28.313

使用 PE 文件，您可以将数据（包括 bin 数据）作为资源添加到 PE 文件的尾部。您只需要记住 PE 文件的大小。但我不确定您是否需要更改 PE 的校验和。并且使用 VC++ Compiler 来嵌入资源会非常容易。

# c# - 使用 C# 在运行时编译 java 代码

> ID：13660852
> 
> 赞同：5
> 
> 时间：2012-12-01T15:28:40.633
> 
> 标签：c#, java, compilation, runtime

我知道可以在运行时使用 C#`CSharpCodeProvider`和 CodeDom 编译 c# 代码。

是否也可以编译Java？如果不是，还有其他选择吗？

我希望我的应用程序能够编译 C# 和 Java 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:39:37.877

*   您需要在执行编译的系统上安装 JDK（或等效安装）

*   您将需要调用 Java 编译器

*   您可能需要使用 Java 运行时（或等效项）使用已编译的代码

**方法 A：** 同时使用编译器和使用编译代码的最简单方法是`Process.Start`Kieren 的回答中提到的低谷。只要您拥有必要的组件，这很容易。

```
//add this either atusing System.Diagnostics;

static void CompileJava(string javacPathName, string javaFilePathName, string commandLineOptions = "")
{
    var startInfo = new ProcessStartInfo();    
    startInfo.CreateNoWindow = true;      
    startInfo.UseShellExecute = false;   
    startInfo.FileName = javacPathName;   
    startInfo.WindowStyle = ProcessWindowStyle.Hidden;  
    startInfo.Arguments = commandLineOptions + " " + javaFilePathName;

    try {
        using (var javacProcess = Process.Start(startInfo))
        {
            javacProcess.WaitForExit();
        }
   } 
   catch(Exception e)
   {
       // do something e.g. throw a more appropriate exception
   }

} 
```

**方法B：** 如果您需要更深入的集成，您可以尝试使用本机链接方法（即使用.NET 和Java 本机接口让两者互操作，而无需调用外部进程）。前提条件与方法 A 相同。所需的投资要高得多，只有在存在特定性能或方法 A 无法满足的其他限制时才应考虑这一点。

您可以通过以下链接找到一些信息：

从 C# 方面：http: [//blogs.msdn.com/b/texblog/archive/2007/04/05/linking-native-c-into-c-applications.aspx](http://blogs.msdn.com/b/texblog/archive/2007/04/05/linking-native-c-into-c-applications.aspx)

从 Java 方面：[http ://docs.oracle.com/javase/6/docs/technotes/guides/jni/](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:31:27.593

为了扩展 driis 和 ppeterka 所说的内容，没有内置方法，因为 Java 不是 .NET 语言（J# 很接近但不再存在）。您需要使用`Process.Start`来启动 java 编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:12:09.213

您的具体情况可能需要它，但 Java 不是为此而构建的，它是在编译时编译的，而不是在运行时编译的。虽然 Miltiadis Kokkonidis 的答案有效，但最好使用更适合您的问题的不同语言，或者针对当前情况使用语言优势，而不是尝试将其压缩以适应它不想去的地方。

# magento - Magento Magmi Mass Importer 的统计数据是什么意思？

> ID：13660853
> 
> 赞同：0
> 
> 时间：2012-12-01T15:28:41.013
> 
> 标签：magento, magento-1.7, magmi

我需要一个简单的帮助.....在我的托管上，他们最近添加了查询/小时的限制，我的问题是我安装了几个带有超过 10k 产品的 magentos...对于导入，我使用 Magmi 和我看到它在导入时有统计信息......所以我想知道哪些数字是实际执行的查询（如果有）

```
Global Stats
Imported            Elapsed     Recs/min    Attrs/min   Last 0.5%
3204 items (100%)   29.4436            6530          398330          0.0721

DB Stats
Requests     Elapsed        Speed                 Avg Reqs  Efficiency  Last 0.5%
70414            17.0054    248441 reqs/min       21.98/item  57.76%      198 reqs 
```

先感谢您。

法比奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:37:31.407

要记住的一件事是，尽可能实现所有缓存。HTML 块缓存、APC 缓存、整页缓存（如果您不在 Enterprise，则需要第三方模块）从数据库中检索的所有缓存数据。如果要从缓存中提取它，则在需要刷新数据之前无需访问数据库。这使网站更具响应性，并且是全面的胜利。

在 SSH 的命令行中，您可以发出以下命令：

```
mysqladmin status -u dbuser -pdbpass 
```

**dbuser**和**dbpass**是您的 mysql 用户和密码。它将踢回一行：

```
Uptime: 1878  Threads: 1  Questions: 8341  Slow queries: 2  Opens: 8525  Flush tables: 1  Open tables: 512  Queries per second avg: 4.441 
```

这为您提供服务器正常运行时间和每秒平均查询次数。该服务器在服务器启动时应该已经处理了大约 8340 个查询（正常运行时间 x 每秒查询数）

另一种查看发生了什么的方法是使用 mysql 本身

```
mysql -u dbuser -pdbpass dbname -Bse "show status like 'uptime';"
mysql -u dbuser -pdbpass dbname -Bse "show status like 'queries';" 
```

然后，您可以设置一个 cron，每小时记录一次查询状态条目，每小时的查询数是当前总查询数减去以前的总查询数。

# android - 通过蓝牙发送图像被拆分成包

> ID：13660859
> 
> 赞同：1
> 
> 时间：2012-12-01T15:29:25.037
> 
> 标签：android, image, bluetooth, file-transfer

我修改了具有发送图像功能的示例蓝牙聊天应用程序。我遇到了一个我无法弄清楚的问题。示例应用程序需要一个字符串来发送和接收数据。我正在起诉 Base64 将位图转换为字节然后转换为字符串，以便我可以发送带有所选图像的文本。如果我发送一个小图像（例如，4kb 大小的全黑图像），它会被发送和接收并显示在列表视图中。但是当我发送更大的图像时，它们会被分成许多包。这意味着，我得到的不是一张图像，而是大量文本，并且我用来填充列表视图的数组大小将大于 1，具体取决于包的数量，因此我的列表视图中填充了很多文本。

事实证明，这取决于图像的大小。我尝试了许多图像。对于长度（作为字符串）为 50096 的照片，我在接收方收到 51 个包裹。如果是另一个长度为 77896 的图像，我会得到 81 个包。所以我决定尝试一个非常小的图像。我在Paint中创建了一个黑色图像，并且成功发送和接收。我测量了它的长度，是280。然后我尝试了一个白色的图像，带有一点黄色，它的长度为980。同样发送成功。然后我在图像中添加了一些黑色，长度为 1554。这次我收到了一些文本而不是图像。

所以我的结论是，通过蓝牙发送数据时字符串的长度受到限制，这对于熟悉该技术的人来说可能是显而易见的。

我能做些什么呢？如果我知道我可以在一个包裹中发送的最大字符数，我可以计算发送方的包裹数量，我可以连接接收方大小的所有包裹。

我在接收器端向您展示了两个图像来演示这种行为。第一个是正确的函数，第二个是错误的函数：

![在此处输入图像描述](../Images/0f32366c961e5a6f4f0ce88702a5af45.png)

![在此处输入图像描述](../Images/9bb05cab605a0b8197854a720022efbf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:51:03.660

您的问题出在接收器部分，可以在蓝牙聊天源代码中的此函数中找到：

```
 public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                // Start the service over to restart listening mode
                BluetoothChatService.this.start();
                break;
            }
        }
    } 
```

具体来说，请注意`byte[] buffer = new byte[1024];`. 您仅限于 1K。如果你想做更多，你需要增加缓冲区的大小，或者构建一个方法来检测文件是否超过了这个缓冲区大小。

有几点需要注意，您是否应该设计一个协议来处理这个问题。

1.  您不需要在 base 64 中发送它，流接受二进制就好了。
2.  放置一个包含文件类型、数据包编号和数据包总数的标头。如果你想真正花哨，包括某种校验和，以验证数据包是完整的。
3.  您应该包括一种重新传输丢失数据包的机制。
4.  您可能想要发送一个初始标头，解释即将发生的事情。

# java - Primefaces photoCam 组件未渲染

> ID：13660860
> 
> 赞同：3
> 
> 时间：2012-12-01T15:29:34.053
> 
> 标签：java, jsf, primefaces

我正在完全按照 [https://www.primefaces.org/showcase/ui/multimedia/photoCam.xhtml](https://www.primefaces.org/showcase/ui/multimedia/photoCam.xhtml)中的说明使用 primefaces photoCam 组件。不幸的是，与展示我的 photoCam 示例不同，我的没有渲染。我在 Firefox 和 Chrome 上试过，代码如下：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">

<h:form>  
<h:panelGrid columns="3">  
    <p:photoCam widgetVar="pc" listener="#{photoCamBean.oncapture}" update="photos"/>  

    <p:commandButton type="button" value="Capture" onclick="pc.capture()"/>  

    <p:imageSwitch effect="zoom" id="photos">  
        <ui:repeat value="#{photoCamBean.photos}" var="photo">  
            <p:graphicImage value="/photocam/#{photo}.png" />  
        </ui:repeat>  
    </p:imageSwitch>  
</h:panelGrid>  
</h:form>

</ui:composition> 
```

还有豆

```
@ManagedBean
@ViewScoped
public class PhotoCamBean {  

private List<String> photos = new ArrayList<String>();

private String getRandomImageName() {
            int i = (int) (Math.random() * 10000000);

            return String.valueOf(i);
    }

public List<String> getPhotos() {
    return photos;
}    

public void oncapture(CaptureEvent captureEvent) {
    String photo = getRandomImageName();
    this.photos.add(0,photo);
    byte[] data = captureEvent.getData();

            ServletContext servletContext = (ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext();
            String newFileName = servletContext.getRealPath("") + File.separator + "photocam" + File.separator + photo + ".png";

            FileImageOutputStream imageOutput;
            try {
                    imageOutput = new FileImageOutputStream(new File(newFileName));
                    imageOutput.write(data, 0, data.length);
                    imageOutput.close();
            }
    catch(Exception e) {
                    throw new FacesException("Error in writing captured image.");
            }
} 
```

}

primefaces 展示 photoCam 使用 adobe flash 确认窗口渲染画布，但我的没有，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:25:36.457

在页面的 head 部分添加 meta 标签可以解决问题，如图所示：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>

<h:form>  
<h:panelGrid columns="3">  
<p:photoCam widgetVar="pc" listener="#{photoCamBean.oncapture}" update="photos"/>  

<p:commandButton type="button" value="Capture" onclick="pc.capture()"/>  

<p:imageSwitch effect="zoom" id="photos">  
    <ui:repeat value="#{photoCamBean.photos}" var="photo">  
        <p:graphicImage value="/photocam/#{photo}.png" />  
    </ui:repeat>  
</p:imageSwitch>  
</h:panelGrid>  
</h:form>
</ui:composition> 
```

只需添加元标记，我就可以使用 adobe flash 确认窗口查看画布。谢谢大家的贡献。

# shopify - 在 Shopify 中更新/删除购物车属性

> ID：13660862
> 
> 赞同：7
> 
> 时间：2012-12-01T15:29:42.093
> 
> 标签：shopify, liquid

我正在使用购物车属性将每个产品的额外信息添加到购物车（来自产品页面）。*我专门在**订单项属性上使用****购物车属性**，因为客户端需要能够在以后的订单项属性不允许的订单中编辑此信息***。**

 **添加信息效果很好，当客户决定从购物车中删除商品时，问题就出现了，因为尽管商品已删除，但购物车属性仍然存在，因为它没有专门与产品相关联（除了我们的命名约定给它。）

那么，有没有办法更新/删除特定的购物车属性？

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T17:05:20.193

自从引入购物车属性以来，我就一直在使用它们，并在此过程中发现了与它们相关的大部分错误（Shopify 在此过程中修复了这些错误），这让我有足够的信心来告知您这个问题。

要编辑它们，只需向购物车提供用于创建它们的相同密钥，然后更改信息。如果您提供一个空值，您将删除该键。它只是一个键：值存储。顺便说一下，在我的书中可以编辑的订单项也是如此。我设法通过简单地更改键的值来编辑它们，并通过提供行项目索引值，您可能忽略了什么？

无论如何，如果您使用提供的 Shopify Javascript API 代码并检查那个小库，您将看到用于创建属性的函数。稍作改动，您就可以引入自己的购物车属性 CRUD 功能以满足您的需求。

这是一个展示更新购物车属性的旧示例，数据是一个字符串，即）“attributes[fizz]='buzz'（请注意，您可以因此存储 JSON）：

```
updateCartAttributes: function(data, callback) {
  var params = {
    type: 'POST',
    url: '/cart/update.js',
    data: data,
    dataType: 'json',
    success: function(cart) {
      if ((typeof callback) === 'function') {
        callback(cart);
      }
      else {
        Shopify.api.onCartUpdate(cart);
      }
    },
    error: function(XMLHttpRequest, textStatus) {
      Shopify.api.onError(XMLHttpRequest, textStatus);
    }
  }; 
  $.ajax(params);
} 
```**

# go - 从 golang 中的缓冲读取器读取特定数量的字节

> ID：13660864
> 
> 赞同：38
> 
> 时间：2012-12-01T15:29:54.257
> 
> 标签：go, bufferedreader, peek

我从**bufio**包中知道 golang 中的特定功能。

```
func (b *Reader) Peek(n int) ([]byte, error) 
```

> Peek 返回下一个 n 字节**而不推进阅读器**。字节在下一次读取调用时停止有效。如果 Peek 返回少于 n 个字节，它还会返回一个错误，解释为什么读取很短。如果 n 大于 b 的缓冲区大小，则错误为 ErrBufferFull。

我需要能够从 Reader 读取特定数量的字节，这**将使 reader 前进**。基本上，与上面的功能相同，但它使读者进步。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-10-28T23:25:22.970

请注意，该`bufio.Read`方法最多调用底层`io.Read`一次，这意味着它可以返回`n < len(p)`，而不会到达 EOF。如果您想准确读取`len(p)`字节或因错误而失败，您可以`io.ReadFull`这样使用：

```
n, err := io.ReadFull(reader, p) 
```

即使阅读器被缓冲，这也有效。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-01T16:44:47.717

```
func (b *Reader) Read(p []byte) (n int, err error) 
```

[http://golang.org/pkg/bufio/#Reader.Read](http://golang.org/pkg/bufio/#Reader.Read)

读取的字节数将被限制为`len(p)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-15T03:45:16.767

TLDR：

```
my42bytes, err := ioutil.ReadAll(io.LimitReader(myReader, 42)) 
```

完整答案：

@monicuta 提到`io.ReadFull`哪个效果很好。这里我提供另一种方法。它通过链接`ioutil.ReadAll`和`io.LimitReader`一起工作。让我们先阅读文档：

> ```
> $ go doc ioutil.ReadAll
> func ReadAll(r io.Reader) ([]byte, error)
>      ReadAll reads from r until an error or EOF and returns the data it read. A
>      successful call returns err == nil, not err == EOF. Because ReadAll is
>      defined to read from src until EOF, it does not treat an EOF from Read as an
>      error to be reported. 
> 
> $ go doc io.LimitReader
> func LimitReader(r Reader, n int64) Reader
>      LimitReader returns a Reader that reads from r but stops with EOF after n
>      bytes. The underlying implementation is a *LimitedReader. 
> ```

因此，如果您想从中获取 42 个字节`myReader`，请执行此操作

```
import (
        "io"
        "io/ioutil"
)

func main() {
        // myReader := ...
        my42bytes, err := ioutil.ReadAll(io.LimitReader(myReader, 42))
        if err != nil {
                panic(err)
        }
        //...
} 
```

这是等效的代码`io.ReadFull`

> ```
> $ go doc io.ReadFull
> func ReadFull(r Reader, buf []byte) (n int, err error)
>     ReadFull reads exactly len(buf) bytes from r into buf. It returns the number
>     of bytes copied and an error if fewer bytes were read. The error is EOF only
>     if no bytes were read. If an EOF happens after reading some but not all the
>     bytes, ReadFull returns ErrUnexpectedEOF. On return, n == len(buf) if and
>     only if err == nil. If r returns an error having read at least len(buf)
>     bytes, the error is dropped. 
> ```

```
import (
        "io"
)

func main() {
        // myReader := ...
        buf := make([]byte, 42)
        _, err := io.ReadFull(myReader, buf)
        if err != nil {
                panic(err)
        }
        //...
} 
```

与 相比`io.ReadFull`，一个优点是您不需要手动制作 a `buf`，其中`len(buf)`是您要读取的字节数，然后`buf`在您读取时作为参数传递

相反，您只需告诉`io.LimitReader`您最多需要 42 个字节`myReader`，然后调用`ioutil.ReadAll`以读取它们，并将结果作为字节切片返回。如果成功，则保证返回的切片长度为 42。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-02T18:12:32.757

我更喜欢 Read() 尤其是如果您要读取任何类型的文件并且它在以块的形式发送数据时也很有用，下面是一个示例来展示它是如何使用的

```
fs, err := os.Open("fileName"); 

if err != nil{
    fmt.Println("error reading file")
    return
}

defer fs.Close()

reader := bufio.NewReader(fs)

buf := make([]byte, 1024)

for{
    v, _ := reader.Read(buf) //ReadString and ReadLine() also applicable or alternative

    if v == 0{
        return
    }
    //in case it is a string file, you could check its content here...
    fmt.Print(string(buf))
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-01T16:24:24.357

将一个 n 字节大小的缓冲区传递给阅读器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T22:47:19.380

如果您想从 an 读取字节`io.Reader`并进入 an `io.Writer`，那么您可以使用[`io.CopyN`](https://pkg.go.dev/io#CopyN)

> CopyN 将 n 个字节（或直到出错）从 src 复制到 dst。它返回复制的字节数和复制时遇到的最早错误。
> 
> **返回时，写入 == n 当且仅当 err == nil。**

```
written, err := io.CopyN(dst, src, n)
if err != nil {
    // We didn't read the desired number of bytes
} else {
   // We can proceed successfully
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-07-04T06:12:51.063

为此，您只需要创建一个字节切片并将数据[读](https://golang.org/pkg/bufio/#Reader.Read)入此切片

```
n := 512
buff := make([]byte, n)
fs.Read(buff)  // fs is your reader. Can be like this fs, _ := os.Open('file') 
```

* * *

`func (b *Reader) Read(p []byte) (n int, err error)`

> Read 将数据读入 p。它返回读入 p 的字节数。字节最多取自底层 Reader 上的一次读取，因此 n 可能小于 len(p)

# wordpress - CakePHP 扩展 WordPress 功能

> ID：13660867
> 
> 赞同：1
> 
> 时间：2012-12-01T15:30:07.313
> 
> 标签：wordpress, cakephp, components

我希望能够从 CakePHP 控制器访问[WordPress 的功能。](http://codex.wordpress.org/Function_Reference)我从一个动作中尝试了这个：

```
require_once('path/to/wp-load.php'); 
```

需要对 WP 核心进行一些更改，以避免重新声明 WP 和 CakePHP 共有的几个函数。

但我仍然收到一个错误：

> Strict (2048)：为类 WP_Widget 重新定义已定义的构造函数 [APP\webroot\WP\wp-includes\widgets.php，第 93 行]

尽管有错误，但如果我调用[The Loop](http://codex.wordpress.org/The_Loop)它可以工作。调用`wp_insert_post()`也有效。基本上我已经可以使用 WP 功能了。但这种重新定义的错误不会消失。

我试过这个：

```
error_reporting(-1);
Configure::write('debug', 0); 
```

但两者都没有帮助。

*   知道如何摆脱该警告吗？
*   有没有正确的方法让 CakePHP 扩展 WordPress 功能？

我找到了这个组件（[shama/CakePHP-Wordpress-Component](https://github.com/shama/CakePHP-Wordpress-Component)），但是最后一次更改是在 2 年前，作者在 3 个月前宣布该组件已弃用。此外，它利用 cURL 与 WP API 进行交互。我只是想扩展它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:06:00.860

我找到了解决方案。不确定这是否是正确的方法。我会发布整个事情，以防有人想做同样的事情。

请记住，这是我想出的解决方案。我认为这在很多层面上都破坏了 MVC 工作流程，因此您应该自担风险使用此解决方法。

1.  将WordPress正常安装在里面的子文件夹中`/app/webroot/`
2.  在控制器中，在动作中，您想使用您称之为的 WP 函数：

    `require_once('full/path/to/wp-load.php');`

3.  调用操作以查看是否存在任何冲突。在我的情况下，功能`__()`和`stripslashes_deep()`两者都存在。所以，我不得不避免重新声明它们。

    `if(!function_exists('FUNCTION_NAME_HERE')) { function ... }`

4.  此时，您已经可以访问控制器内的 WP 功能。但是 WP_Widget 类的问题可能会引发警告。所以，这里是你如何解决它：

    4.1 打开`wp-settings.php`（它在 WP 的根目录中）并注释这些行：

    `require( ABSPATH . WPINC . '/widgets.php' );`

    `$GLOBALS['wp_widget_factory'] = new WP_Widget_Factory();`

    4.2 打开`wp-includes/functions.php`并注释这一行：

    `require_once( ABSPATH . WPINC . '/default-widgets.php' );`

    4.3 打开`wp-content/themes/twentyeleven/inc/functions.php`评论：

    `require( get_template_directory() . '/inc/widgets.php' );`

您现在可以像在 WP 主题中一样从操作内部正常调用 WP：

```
query_posts('showposts=10');
while (have_posts()):
    the_title();
endwhile; 
```

要求`wp-load.php`on`beforeFilter()`似乎不起作用，除非您在内部完成所有 WP 工作`beforeFilter()`并将结果保存在变量中。否则，当移动到动作时，CakePHP 似乎会卸载`wp-load.php`，并且您无法再访问 WP 功能。

如果将这个黑客转换成一个组件，它可能也会起作用，然后你可以使用类似的东西访问 WP`$this->Wordpress->query_posts('showposts=10');`

**管理员坏了**

这是由于第 4 步，我们注释掉了所有的小部件功能。为了修复它，您必须包含这样的条件：

```
if (is_admin()) {
   require( ABSPATH . WPINC . '/widgets.php' );
} 
```

当然，此条件必须应用于步骤 4 中注释的所有行。如果您不使用 WP 管理区域，则不需要使用此条件。

# asp.net-mvc - 如何在视图中的脚本部分中包含脚本包

> ID：13660868
> 
> 赞同：36
> 
> 时间：2012-12-01T15:30:08.563
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个包含一个部分的布局，并且我有一个捆绑包，对于*某些*视图`@RenderSection("scripts")`需要包含在此部分中。我认为仅在视图中执行此操作会起作用，但它不会渲染脚本。

 *```
@section scripts {
    @Scripts.Render("~/bundles/myBundle")  
} 
```

**在我看来，我怎样才能在脚本部分包含一个包？**

布局

```
@Scripts.Render("~/bundles/jquery", "~/bundles/scripts")
@RenderSection("scripts", required: false) 
```

看法

```
@section scripts {
    @Scripts.Render("~/bundles/movie")  
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-01T16:46:30.717

**在View**中尝试下面提到的解决方案。

**看法**

```
@section Scripts{
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/movie")"></script>
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-01T18:14:35.603

为什么要将渲染部分与捆绑混合？如果您选择捆绑的路线，您可以简单地将您的脚本放在 .JS 文件中，如果您愿意，可以将其放入自己的包中，然后在您的视图中调用该包。例如：

```
 bundles.Add(new ScriptBundle("~/bundles/myscripts").Include(
                    "~/Scripts/myscript1.js",
                    "~/Scripts/myscript2.js")); 
```

然后视图将具有以下内容：

```
 @Scripts.Render("~/bundles/myscripts") 
```

还要确保您的 Web.config 已将编译调试设置为 false，如下所示：

```
 <compilation debug="false" /> 
```

它确保脚本被捆绑和缩小。

**更新**

根据评论和我最近的经验，我可以理解为什么我们要同时使用这两者。社区学习的完美案例！:) 所以，如果你决定回来进行重构，我会确保一开始没有错别字。如果它仍然不起作用，请让我知道问题是什么，我会相应地更新答案。感谢大家！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-04T19:16:36.270

我无法复制您遇到的问题

```
@section scripts {
    @Scripts.Render("~/bundles/movie")  
} 
```

渲染没有问题（并尊重调试标志）我会同意@Mrchref并重新访问你的路径

另一方面，你可以使用这样的东西：

```
public static class Helpers
{
    public static HtmlString StaticContent(this System.Web.Mvc.UrlHelper url, string contentPath)
    {
        return new HtmlString(System.Web.Optimization.Scripts.Render(contentPath).ToString());
    }
} 
```

用法：

```
@section Scripts{
    @Url.StaticContent("~/assets/js/jquery")
} 
```

我建议不要按原样使用它，您需要找到另一种解决方案，`System.Web.Optimization.Scripts.Render(contentPath).ToString()`因为它基本上呈现您正在使用的相同功能（并且不起作用）。

您应该尝试一下`System.Web.Optimization.BundleTable.Bundles`，看看是否可以查询两个版本，检查调试标志，并提供正确的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-01T17:08:01.977

我相信一个新的版本会解决你的问题。如果没有，请按照以下步骤操作：

*   **第 1 步：**将其添加到`BundleConfig.cs`

    `bundles.Add(new ScriptBundle("~/bundles/common").Include("~/Scripts/common.js"));`

*   **第 2 步：**将此行添加到您的`view/layout`

    `@Scripts.Render("~/bundles/common")`

*   **第 3 步：**构建您的项目并运行它。*

# html - 当 div 元素内的图像悬停时获得另一个 div 元素？

> ID：13660869
> 
> 赞同：0
> 
> 时间：2012-12-01T15:30:14.773
> 
> 标签：html, css, image

所以在 CSS 中这是可能的：

```
#Something1:hover .Something22 {...} 
```

但是当我这样说时：

```
#Something1 img:hover .Something22 {...} 
```

它不起作用。这可能仅适用于图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:31:49.807

```
#Something1 img:hover .Something22 {...} 
```

将意味着您的带有类的元素`Something22`在`img`元素内。这将是无效的。

如果您的类元素`Something22`就在图像之后，也许您想要

```
#Something1 img:hover + .Something22 {...} 
```

或者，如果你的形象是一流的`Something22`，那么你需要这个：

```
#Something1 img.Something22:hover {...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:31:50.610

后者不起作用，因为一个`img`元素永远不能有后代。那只是无效的 HTML。

引用HTML 语法[规范](http://dev.w3.org/html5/markup/syntax.html#syntax-elements)（强调我的）：

> void 元素是其内容模型在任何情况下都不允许它拥有内容的元素。void 元素可以具有属性。
> 
> 以下是 HTML 中 void 元素的完整列表：
> 
> area，base，br，col，command，embed，hr，**img**，input，keygen，link，meta，param，source，track，wbr

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:32:35.173

原因是因为您的第一个选择器：

```
#Something1:hover .Something22 {...} 
```

当鼠标悬停在`Something22`带有 ID 的元素内时，选择具有类的项目。`Something1`

您的第二个类选择`Something22`图像内的类的项目。图像不能包含另一个元素，因此您的第二个选择器不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:41:14.253

好吧，你可以使用 jQuery

```
$('#Something1 img').hover(
    function(){
        // do you stuff with Something22 here
    },
    function(){}
); 
```

# clojure - clojure 宏评估

> ID：13660870
> 
> 赞同：2
> 
> 时间：2012-12-01T15:30:17.733
> 
> 标签：clojure, macros, eval

被 clojure 及其宏所吸引和新手，我为自己设定了编写一个宏的任务，该宏从诸如“abc”之类的字符列表中生成所有长度为“n”的字符串。所以对于 n=2，输出应该是“aa”“ab”“ac”“ba”“bb”“bc”“ca”“cb”“cc”。我从以下函数作为模板开始：(defn mkstr [nv] (for [ivjv] (str ij)))。for绑定中'v'的重复以及创建多少个变量应该是'n'的函数；在这种特定情况下：2。

在阅读了'quote''unquote'等之后，然后按照一个关于宏的优秀在线教程，经过反复试验和一些简单的运气，我设法产生了以下函数和宏，无论'的值是什么，它都能提供所需的输出n'。真正困难的部分是生成“for”绑定中所需的可变数量的代码。

```
(defn mkvars [n] 
"Gives a list of 'n' unique symbols"
(let [vc (repeatedly n #(gensym ))] vc)) 

(defmacro mkcoms [n syms] 
"Generates a list of possible combinations of length 'n' from a string of symbols"
`(let [vs# (mkvars ~n) sy# ~syms  
    forarg# (vec (interleave vs# (repeat ~n sy#)))]
     `(for ~forarg# (str ~@vs#)))) 
```

现在我的“真正”问题或缺乏理解是为了获得输出我必须这样做：（eval（mkcoms len chars））。为什么这只能通过使用 'eval' 起作用？的确，它可以按原样使用，但感觉有些不对劲。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:47:58.843

Your macros is returning a quoted form, which is why it works when you pass it to eval. I'm not understanding what the purpose of the macro is over the function, so I hope this explanation is what you're after.

A macro is supposed to generate the code it represents and return it. Your macro generates a quoted form. If you remove the outer layer of back-quoting, which looks like the intention is to be part of the code doing the expansion (the macro) and not the resultant code, you do get the execution at macro-expansion-time:

```
(defmacro mkcoms [n syms]                                                                                                      
  "Generates a list of possible combinations of length 'n' from a string of symbols"                                           
  (let [vs     (mkvars n)                                                                                                      
        sy     syms                                                                                                            
        forarg (vec (interleave vs (repeat n sy)))]                                                                            
    `(for ~forarg (str ~@vs)))) 
```

This sounds like what you're after, though I admit I don't understand why you want this to happen at 'compile time' vs run-time.

# garbage-collection - 年轻代中的 JVM 垃圾回收

> ID：13660871
> 
> 赞同：13
> 
> 时间：2012-12-01T15:30:45.410
> 
> 标签：garbage-collection, jvm

如果我错了，请随时纠正我。在 JVM 堆中，有两代，老的和年轻的。在做full GC的时候，老年代，有压缩空间、修复漏洞等繁重的操作，会导致JVM挂掉。而且我发现在年轻代中，应用了轻量级GC，从我的搜索结果中，还有一个叫做Eden的领域涉及年轻代。但是查了很多文档，对于young generation的GC，我还是有两个疑惑，

1.  在年轻一代中，似乎 GC 不像老一代 GC 那样工作（即老一代 GC 紧凑并修复漏洞）？如果是这样，年轻一代的 GC 是如何工作的？
2.  什么是伊甸园空间以及这个空间在年轻一代中是如何利用的？感谢是否可以推荐任何适合新手的文件。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-01T15:49:33.440

This is the single, most important diagram you have to memorize and understand:

[![Java memory layout](../Images/de5e9f98f7d0f2fdd246119a187ef32c.png)](https://i.stack.imgur.com/E265y.png)
[(source: [oracle.com](http://www.oracle.com/ocom/groups/public/@otn/documents/digitalasset/190244.gif))]

It comes from [Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html), one stop place to learn everything about GC internals. But to address your immediate questions:

Allocating new objects using `new` operator ([almost](https://stackoverflow.com/questions/9053144/will-i-encounter-java-lang-outofmemoryerror-even-with-no-lack-of-memory)) always happens in Eden space. But Eden is actually a stack. When you create new object needing N bytes, single pointer advances by N bytes on that stack and that's it. Allocating is that fast, no searching for free spot, compacting, whatever.

Of course this stack is not infinite, at some point we'll reach its end, triggering minor GC. Also most likely multiple objects are already garbage. So what JVM does in minor GC is the following:

*   traverse graph of objects starting from *GC roots*

*   copy all objects reachable from GC roots to one of survivor spaces (no gaps, we know all of them and this is a single process)

*   wipe out eden space (basically just moving this stack pointer back to `0`)

In subsequent minor collections there are additional steps:

*   one of survivor spaces is examined as well. Live objects from both eden and one of survivor spaces are copied to second survivor space. This means there is always exactly one free survivor space.

So how are objects ending in tenured generation? First young objects are copied to one of survivor spaces. Then they are copied to the other and again and again. Once given object jumps back and forth too many times (configurable, 8 by default), it is promoted to tenured space.

Major GC runs when tenured space is full.

# validation - 编写依赖于另一个有效属性的自定义 rails 属性验证器

> ID：13660873
> 
> 赞同：1
> 
> 时间：2012-12-01T15:30:55.330
> 
> 标签：validation, ruby-on-rails-3.2

我正在使用很棒的[client_side_validations](https://github.com/bcardarella/client_side_validations) gem，并且我编写了一个这样的自定义验证器：

```
class PersonNameValidator < ActiveModel::EachValidator
  def validate_each(record, attr_name, value)
    record.errors.add(attr_name) if record.errors.has_key?(:person_id)
  end
end 
```

`:person_name`如果无效，我的目标是让虚拟属性`:person_id`无效。我的问题是`if record.errors.has_key?` **在另一个验证器内部**使用来确定另一个属性是否有效是否合理？

我读到验证器按照声明的顺序触发，所以这在我的模型中：

```
validates :person_id, numericality: { greater_than: 0 }
validates :person_name, presence: true 
```

依靠这种技术来保持我的验证干燥是否明智？

# php - 准备好的语句和错误的 lastInsertId

> ID：13660874
> 
> 赞同：0
> 
> 时间：2012-12-01T15:30:59.820
> 
> 标签：php, pdo

我对 PDO 有一个非常奇怪的行为。我不会详细介绍，因为它会占用太多时间，但基本上我观察到的是，当我重新使用执行简单 INSERT 的 \PDOStatement 时，我在调用 PDO::lastInsertId( ）。

我第一次执行该语句时它工作正常，我得到了正确的 id。后续执行将始终返回“0”。这更奇怪，因为它只发生在测试之间（PHPUnit 测试）。所以说我在 test1 （工作）中使用准备好的语句执行插入，在 test2 中它将惨遭失败。

在非单元测试环境中（在简单的 php 文件中）多次执行准备好的语句时，一切正常，最后插入的 id 总是准确的。确实很奇怪。

这是测试（注意 PersistencyManagerInstance 只是 PersistencyManager 的一个简单实例）：

```
<?php

class PersistencyManagerTest extends PHPUnit_Framework_TestCase {

   const DELETE_ALL = "TRUNCATE user";
   const ADD_USER = "INSERT INTO user values(null, :username, :password)";
   const CHECK_USER_EXISTENCE = "SELECT * FROM user WHERE username = :username AND password = :password";
   const DELETE_USER_BY_ID = "DELETE FROM user WHERE id = ?";

   protected $manager = null;

   public function __construct() {
      $this->manager = new PersistencyManagerInstance(PDOFactory::build());
   }

   public function setUp() {
      $this->manager->exec(self::DELETE_ALL);
   }

   public function tearDown() {
      $this->manager->exec(self::DELETE_ALL);
   }

   public function testInsert() {
      $user = new User("laurent", "password");
      $id = $this->manager->insert(self::ADD_USER, $user->export());
      $this->assertEquals("1", $id);
   }

   public function testInsertAgain() {
      $user1 = new User("laurent1", "password1");
      $id = $this->manager->insert(self::ADD_USER, $user1->export());
      $this->assertEquals("1", $id);
   }

   public function testQuery() {
      $user = new User("laurent", "password");
      $this->manager->insert(self::ADD_USER, $user->export());
      $results = $this->manager->query(self::CHECK_USER_EXISTENCE, $user->export());
      $this->assertEquals(1, count($results));
   }

   public function testExec() {
      $user = new User("laurent", "password---");
      $id = $this->manager->insert(self::ADD_USER, $user->export());
      $affected = $this->manager->exec(self::DELETE_USER_BY_ID, array($id));
      $this->assertEquals(1, $affected);
   }
} 
```

testInsert 有效，而 testInsertAgain 无效。

这是课程：

```
<?php

namespace memory\manager;

use \PDO;

abstract class PersistencyManager {

   /**
    * @var array An array of \PDOStatement objects
    */
   protected static $ps = array();

   /**
    * @var \PDO 
    */
   protected $connection = null;

   protected function prepareStmt($sql) {
      // return $this->connection->prepare($sql);
      $key = md5($sql);
      if (!isset(self::$ps[$key])) {
         self::$ps[$key] = $this->connection->prepare($sql);
      }
      return self::$ps[$key];
   }

   public function __construct(PDO $connection) {
      $this->connection = $connection;
      $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
   }

   public function __destruct() {
      $this->connection = null;
   }

   /**
    * Good for SELECT operations. By default it fetches using arrays.
    * @param string $sql
    * @param array $values
    * @param integer $fetchStyle
    * @return array A list of matching elements (The elements' type depends on $fetchStyle)
    */
   public function query($sql, array $values = array(), $fetchStyle = PDO::FETCH_ASSOC) {
      $prepared = $this->prepareStmt($sql);
      $prepared->execute($values);
      $prepared->setFetchMode($fetchStyle);
      $all = $prepared->fetchAll();
      $prepared->closeCursor();
      return $all;
   }

   /**
    * Good for INSERT operations.
    * @param string $sql
    * @param array $values
    * @return string Last inserted element's id in string format
    */
   public function insert($sql, array $values = array()) {
      $prepared = $this->prepareStmt($sql);
      $prepared->execute($values);
      $prepared->closeCursor();
      return $this->connection->lastInsertId();
   }

   /**
    * Good for all the remaining routines.
    * @param string $sql
    * @param array $values
    * @return integer The number of effected rows
    */
   public function exec($sql, array $values = array()) {
      $prepared = $this->prepareStmt($sql);
      $prepared->execute($values);
      $count = $prepared->rowCount();
      $prepared->closeCursor();
      return $count;
   }
} 
```

任何想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:12:27.113

伙计们，我在每次测试中都开始了新的连接。这就是原因。

# iphone - iphone - Cocos2d 益智游戏，如何解决棋子位置？

> ID：13660882
> 
> 赞同：0
> 
> 时间：2012-12-01T15:32:52.037
> 
> 标签：iphone, objective-c, cocos2d-iphone, mask, render-to-texture

我在使用 cocos2d 的第一个应用程序方面需要帮助，我正在尝试开发益智游戏，游戏有图像片段并且它是透明背景，我需要将这些片段匹配到正确的位置/位置！我的问题是我不知道如何在图像上找到该作品的确切位置/位置？有人能帮帮我吗？

试图制作这样的游戏： [动物拼图](https://itunes.apple.com/us/app/animal-puzzle-for-toddlers/id481681112?mt=8)

和拼图图像和这样的碎片： [拼图图像和碎片](http://www.facebook.com/photo.php?fbid=180499832089629&set=a.180499828756296.46013.100003888411220&type=1&relevant_count=1&ref=nf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:00:13.330

如果我理解正确，您想检测用户何时将拼图拖入正确的插槽。

如果是这样的话，如果我误解了，请纠正我，你至少需要两条信息才能做到这一点：拼图的正确位置（即拼图时拼图应该在的位置）放在一起），以及同一个拼图块的当前位置，因为它正在被用户移动。一旦你有了这些信息，也许是两个 CGPoints（correctPosition 和 currentPosition），你可以用 ccpDistance() 得到它们之间的距离：

```
CGPoint currentPosition = selectedPuzzlePiece.position;
float distanceFromCorrectPos = ccpDistance(correctPosition, currentPosition); 
```

在上面的示例中，correctPosition 可以是在拼块之前存储的 CGPoint，并且 selectedPuzzlePiece 可以是用户当前正在触摸的 CCSprite。然后，您可以使用 distanceFromCorrectPos 值来确定用户何时将部件移动得足够近以将其卡入到位：

```
float snapIntoPlaceThreshold = 10.0f;
if(distanceFromCorrectPos <= snapIntoPlaceThreshold) {
    selectedPuzzlePiece.position = correctPosition;
} 
```

# jquery - 带有动态ajax数据的JQPlot自动刷新图表

> ID：13660883
> 
> 赞同：7
> 
> 时间：2012-12-01T15:32:54.657
> 
> 标签：jquery, jquery-plugins, jqplot

我想按时间间隔顺序更新 jqPlot 绘制的图表。

我的用例是 AJAX 调用只返回一个值。例如：

```
1st AJAX call: 20
2nd AJAX call: 30
3rd AJAX call: 40
4th AJAX call: 32 
```

所以我想绘制如下图：

```
First: only 20
Second: 20,30
Third: 20,30,40
Fourth: 20,30,40,32 
```

我们可以在 JQPlot 中提取已经绘制的数据，然后附加这个新数据集并重新绘制图形吗？

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T16:33:33.267

您需要将数据存储在数组中，然后在每次 ajax 调用中将新数据推送到数组中。

这是一个简单的演示，使用按钮以 3 秒的间隔启动 AJAX 更新：

```
/* store empty array or array of original data to plot on page load */

var storedData = [3, 7];

/* initialize plot*/

var plot1;
renderGraph();

$('button').click( function(){
    doUpdate();
    $(this).hide();
});

function renderGraph() {
    if (plot1) {
        plot1.destroy();
    }
    plot1 = $.jqplot('chart1', [storedData]);
}
/* sample data for demo*/   
var newData = [9, 1, 4, 6, 8, 2, 5];

function doUpdate() {
    if (newData.length) {
        /* used to pull new number from sample data for demo*/
        var val = newData.shift();

        $.post('/echo/html/', {
            html: val
        }, function(response) {
            var newVal = new Number(response); /* update storedData array*/
            storedData.push(newVal);
            renderGraph();               
            setTimeout(doUpdate, 3000)
        })

    } else {
        alert("All Done")
    }
} 
```

演示：http: [//jsfiddle.net/ZqCXP/](http://jsfiddle.net/ZqCXP/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-19T22:44:03.517

让我添加到@charlietfl 答案。当您使用 replot() 时，重绘需要 2 倍的时间，而不是破坏 jqplot。所以使用 destroy() 重绘绘图。

```
$.jqplot('chart1', [storedData]).replot(); 
```

[http://jsfiddle.net/zjjvm/](http://jsfiddle.net/zjjvm/)使用 replot() 绘制运行正弦需要 46 秒

```
plot1.destroy();
plot1 = $.jqplot('chart1', [storedData]) 
```

[http://jsfiddle.net/p9SbP/](http://jsfiddle.net/p9SbP/)使用destroy() 绘制相同内容需要25 秒

# apache - 热链接保护，正确的 .htaccess 规则？

> ID：13660884
> 
> 赞同：0
> 
> 时间：2012-12-01T15:32:55.623
> 
> 标签：apache, .htaccess, mod-rewrite, hotlinking

我在[许多博客](http://www.sparringmind.com/speed-up-wordpress/)上以及关于 SO 的许多答案上都看到人们使用以下代码进行热链接保护：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L] 
```

[此工具](http://www.htaccesstools.com/hotlink-protection/)也建议这样做。

我可能错了，但**欺骗这段代码不是很简单吗？爬虫不是只需要使用像这样的简单子域来绕过热链接保护吗？**

```
http://mydomain.com.scarper1domain.com
http://mydomain.com.scraper2domain.net 
```

* * *

编辑：仅供参考，我使用我认为更防弹的代码，但我很高兴阅读您对此的评论/批评。

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain\.com/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain\.com$ [NC]
RewriteRule .*\.(jpg|jpeg|png|gif)$ - [F,NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:41:59.817

由于大多数 apache 设置已经将 example.com 之类的请求重定向到 example.com/，因此您的编辑中不需要第三个条件。所以代码会变成

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain\.com/.*$ [NC]
RewriteRule .*\.(jpg|jpeg|png|gif)$ - [F,NC,L] 
```

Scraper 甚至不需要使用子域，因为它们可以伪造正在发送的 http 标头。没有办法阻止这种情况。

其余代码没问题。如果需要，我会使用它。

# php - URL中的反斜杠有什么用？

> ID：13660885
> 
> 赞同：3
> 
> 时间：2012-12-01T15:33:01.740
> 
> 标签：php, apache, url, backslash

我的 PHP 项目中有一个前端控制器。这是代码；

`.htaccess`文件

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule .* index.php [PT,L]
</IfModule> 
```

`index.php`文件

```
<?php
list($url) = explode('?', $_SERVER['REQUEST_URI']);
$url = trim(trim($url), '/');

if(!file_exists('pages/'.$url.'.php')
    header('Location: 404.html');

require_once 'inc/head.php';
require_once 'pages/'.$url.'.php';
require_once 'inc/foot.php';
?> 
```

我假设每个请求的 URL 都必须通过 index.php 文件。但如果 URL 服务器中有一个`\`（如 %5C），则答案是“未找到”。

问题;

*   为什么字符有例外`\`？有没有这样的角色？
*   `\`使 Apache 搜索文件的常用字符是什么？为什么不直接忽略？
*   Apache 在哪里查找但未找到该文件？

注意：我的系统是带有 Apache 2.2.21 和 PHP 5.3.10 的 Windows。注意2：这只是一个示例代码，所以不提供更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:04:00.593

~~上面的评论已经说过了：~~

在 Windows`\`上是路径分隔符 所以`'http://localhost/\'` 在 windows 系统上的请求将被 捕获`RewriteCond %{REQUEST_FILENAME} -d`，只是你的文档根目录，它是一个目录。

您已经反转了条件 d ( `!-d`) 所以 apache 不执行重写规则而是查找不存在的默认索引文件，您得到 404

~~删除条件“不是现有目录”或将 index.php 添加到默认值列表~~

**编辑：**

我写的故事有这样一个似是而非的特点，以至于我自己都相信了 :) 事实上，这甚至不是 Windows，而是 Apache 特定的。

由于`security leak in CGI`Apache 多年前将其作为修复程序引入。当您在请求 URL 中`404 Not Found`传递`%5C (backslash)`或传递时，它不会处理请求，而是立即返回一个, 。`%2F (slash)`

我能够在`Apache 2.2.14`.

如果您不使用`CGI`（例如 Perl 网站），您可以安全地禁用此“安全修复”：

```
AllowEncodedSlashes On 
```

这是在 Apache 2.0.46 中引入的，请参阅[文档](http://httpd.apache.org/docs/2.2/mod/core.html#allowencodedslashes)，设置此变量在我的中不起作用`.htaccess`，我不得不将它放入`vhost config`和`restart the apache`服务器中。

# android - 将 Bundle 保存到 SharedPreferences

> ID：13660889
> 
> 赞同：25
> 
> 时间：2012-12-01T15:33:28.083
> 
> 标签：android, save, bundle, sharedpreferences

我竭尽全力将我的 Android 游戏的所有数据都放入一个 savedInstanceState Bundle。总共有很多数据，包括许多 Parcelable 对象。这可确保当应用程序暂停或方向更改时，重新创建的 Activity 不会丢失任何数据。

但是，我最近才发现 savedInstanceState 包显然不适合长期存储。所以我正在寻找一种方法，可以将现有的保存方法调整为长期解决方案，以便始终可以恢复游戏状态。

到目前为止，我听说过两种解决方案：

**1) 使用 savedInstanceState 包进行方向更改，但也包含 SharedPrefs 以在应用程序需要完全关闭时使用。**

这似乎会适得其反，因为它使用两种完全不同的方法来完成基本相同的事情。此外，由于我的 savedInstanceState Bundle 使用 Parcelable 对象，我必须为这些对象中的每一个提供另一种方法，以使它们能够写入 SharedPrefs。本质上是大量重复且难以管理的代码。

**2) 序列化 savedInstanceState Bundle，直接写入文件。**

我对此持开放态度，但我实际上不知道如何去做。但是，我仍然希望可能有更好的解决方案，因为我听说 Android 中的序列化是“可笑/无法使用的缓慢”。

如果有人可以为我提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T15:44:05.813

有趣的是，本周，[Android Weekly](http://androidweekly.net/)第 47 期发布了这个库： [android complex preferences](https://github.com/fsilvestremorais/android-complex-preferences)。

它应该适合你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T21:42:47.273

我现在想出了我自己的解决方案来解决这个问题，这是一种将 Bundles 保存到 SharedPreferences 的半自动方法。我说半自动是因为，虽然保存 Bundle 只需要一种方法，但再次检索数据并将其转回 Bundle 需要一些工作。

这是保存Bundle的代码：

```
SharedPreferences save = getSharedPreferences(SAVE, MODE_PRIVATE);
Editor ed = save.edit();
saveBundle(ed, "", gameState);

/**
 * Manually save a Bundle object to SharedPreferences.
 * @param ed
 * @param header
 * @param gameState
 */
private void saveBundle(Editor ed, String header, Bundle gameState) {
    Set<String> keySet = gameState.keySet();
    Iterator<String> it = keySet.iterator();

    while (it.hasNext()){
        key = it.next();
        o = gameState.get(key);
        if (o == null){
            ed.remove(header + key);
        } else if (o instanceof Integer){
            ed.putInt(header + key, (Integer) o);
        } else if (o instanceof Long){
            ed.putLong(header + key, (Long) o);
        } else if (o instanceof Boolean){
            ed.putBoolean(header + key, (Boolean) o);
        } else if (o instanceof CharSequence){
            ed.putString(header + key, ((CharSequence) o).toString());
        } else if (o instanceof Bundle){
            saveBundle(header + key, ((Bundle) o));
        }
    }

    ed.commit();
} 
```

请注意，我只为我需要的类型编写了案例，但是如果您有还包含其他类型的 Bundle，这应该很容易适应。

此方法将递归保存存储在给定 Bundle 中的其他 Bundle 对象。但是，它不适用于 Parcelable 对象，因此我必须更改我的 Parcelable 对象以使它们将自己存储到 Bundle 中。由于 Parcels 和 Bundles 非常相似，这并不难。不幸的是，我认为捆绑包也可能比包裹稍慢。

然后，我在所有以前的 Parcelable 对象中编写了构造函数，以使它们能够从存储的 SharedPreferences 数据中重新捆绑自己。重建所需数据的密钥很容易。假设您有以下数据结构：

```
Bundle b {
    KEY_X -> int x;
    KEY_Y -> Bundle y {
                 KEY_Z -> int z;
             }
} 
```

这些将按如下方式保存到 SharedPreferences：

```
KEY_X -> x
KEY_YKEY_Z -> z 
```

它可能不是世界上最漂亮的方法，但它很有效，而且它比其他方法花费的代码少得多，因为现在我的 onSaveInstanceState 方法和我的 onPause 方法使用相同的技术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-29T17:05:34.143

我扩展了 Dan 的答案，增加了自动重新创建 Bundles 的功能，并使名称不太可能发生冲突。

```
private static final String SAVED_PREFS_BUNDLE_KEY_SEPARATOR = "§§";

/**
 * Save a Bundle object to SharedPreferences.
 *
 * NOTE: The editor must be writable, and this function does not commit.
 *
 * @param editor SharedPreferences Editor
 * @param key SharedPreferences key under which to store the bundle data. Note this key must
 *            not contain '§§' as it's used as a delimiter
 * @param preferences Bundled preferences
 */
public static void savePreferencesBundle(SharedPreferences.Editor editor, String key, Bundle preferences) {
    Set<String> keySet = preferences.keySet();
    Iterator<String> it = keySet.iterator();
    String prefKeyPrefix = key + SAVED_PREFS_BUNDLE_KEY_SEPARATOR;

    while (it.hasNext()){
        String bundleKey = it.next();
        Object o = preferences.get(bundleKey);
        if (o == null){
            editor.remove(prefKeyPrefix + bundleKey);
        } else if (o instanceof Integer){
            editor.putInt(prefKeyPrefix + bundleKey, (Integer) o);
        } else if (o instanceof Long){
            editor.putLong(prefKeyPrefix + bundleKey, (Long) o);
        } else if (o instanceof Boolean){
            editor.putBoolean(prefKeyPrefix + bundleKey, (Boolean) o);
        } else if (o instanceof CharSequence){
            editor.putString(prefKeyPrefix + bundleKey, ((CharSequence) o).toString());
        } else if (o instanceof Bundle){
            savePreferencesBundle(editor, prefKeyPrefix + bundleKey, ((Bundle) o));
        }
    }
}

/**
 * Load a Bundle object from SharedPreferences.
 * (that was previously stored using savePreferencesBundle())
 *
 * NOTE: The editor must be writable, and this function does not commit.
 *
 * @param sharedPreferences SharedPreferences
 * @param key SharedPreferences key under which to store the bundle data. Note this key must
 *            not contain '§§' as it's used as a delimiter
 *
 * @return bundle loaded from SharedPreferences
 */
public static Bundle loadPreferencesBundle(SharedPreferences sharedPreferences, String key) {
    Bundle bundle = new Bundle();
    Map<String, ?> all = sharedPreferences.getAll();
    Iterator<String> it = all.keySet().iterator();
    String prefKeyPrefix = key + SAVED_PREFS_BUNDLE_KEY_SEPARATOR;
    Set<String> subBundleKeys = new HashSet<String>();

    while (it.hasNext()) {

        String prefKey = it.next();

        if (prefKey.startsWith(prefKeyPrefix)) {
            String bundleKey = StringUtils.removeStart(prefKey, prefKeyPrefix);

            if (!bundleKey.contains(SAVED_PREFS_BUNDLE_KEY_SEPARATOR)) {

                Object o = all.get(prefKey);
                if (o == null) {
                    // Ignore null keys
                } else if (o instanceof Integer) {
                    bundle.putInt(bundleKey, (Integer) o);
                } else if (o instanceof Long) {
                    bundle.putLong(bundleKey, (Long) o);
                } else if (o instanceof Boolean) {
                    bundle.putBoolean(bundleKey, (Boolean) o);
                } else if (o instanceof CharSequence) {
                    bundle.putString(bundleKey, ((CharSequence) o).toString());
                }
            }
            else {
                // Key is for a sub bundle
                String subBundleKey = StringUtils.substringBefore(bundleKey, SAVED_PREFS_BUNDLE_KEY_SEPARATOR);
                subBundleKeys.add(subBundleKey);
            }
        }
        else {
            // Key is not related to this bundle.
        }
    }

    // Recursively process the sub-bundles
    for (String subBundleKey : subBundleKeys) {
        Bundle subBundle = loadPreferencesBundle(sharedPreferences, prefKeyPrefix + subBundleKey);
        bundle.putBundle(subBundleKey, subBundle);
    }

    return bundle;
} 
```

# bash - 从 bash 脚本创建包含 $ 的文件的问题

> ID：13660892
> 
> 赞同：1
> 
> 时间：2012-12-01T15:34:00.333
> 
> 标签：bash

我想从 bash 脚本生成 udev 规则文件。为此，我正在使用 cat 命令。不幸的是，生成的文件缺少“$”字符。这是示例 test.sh 脚本：

```
#!/bin/sh

rc=`cat <<stmt1 > ./test.txt

-p $tempnode
archive/$env{ID_FS_LABEL_ENC}

stmt1` 
```

结果如下：

```
cat test.txt 

-p ''
archive/{ID_FS_LABEL_ENC} 
```

问题在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:37:10.237

如果您不想要任何变量插值，请使用：

```
#!/bin/sh

group="test_1"

cat <<'stmt1' > ./test.txt

-p $tempnode
archive/$env{ID_FS_LABEL_ENC}

stmt1
rc=$? 
```

（注意`''`周围`stmt1`。）

# django - Django + WSGI：在子路径中使用应用程序而不进行更改

> ID：13660895
> 
> 赞同：0
> 
> 时间：2012-12-01T15:34:17.620
> 
> 标签：django, apache2, mod-wsgi

我想从一个子目录（例如`http://www.stackoverflow.com/django_app/`）提供一个 Django 应用程序。

我已经设置 mod_wsgi 通过

```
WSGIScriptAlias /django_app PATH_TO_DJANGO/wsgi.py 
```

如何指定 LOGIN_URL、STATIC_URL、MEDIA_URL 等设置，以便 Django 尊重相对路径？

如果设置 STATIC_URL 它`"/static/"`会尝试引用资源`http://www.stackoverflow.com/static/`而不是`http://www.stackoverflow.com/django_app/static/`.

但是如果我将它设置为`"static"`（没有前导斜杠），它会相对于任何错误的 URL 进行解释。例如，管理页面位于

`http://www.stackoverflow.com/django_app/admin/`

尝试从

`http://www.stackoverflow.com/django_app/admin/static/`

我还没有找到一种方法来告诉 Django 在`http://www.stackoverflow.com/django_app/static`不明确硬编码设置中的前缀`/django_app`的情况下使用（恕我直言，这违反了 DRY 原则，因为它已经在 mod_wsgi-config 中指定）。它还禁止在不修改项目的情况下以不同的 URL 为同一个项目提供服务，这看起来很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:13:42.760

没有办法让它是自动的。这几个变量中的 URL 和 LOGOUT_URL 不会自动以 SCRIPT_NAME 为前缀，该 SCRIPT_NAME 与脚本一起传递并标识挂载点。

# google-sheets - 获取一个月第一天的值的公式

> ID：13660900
> 
> 赞同：2
> 
> 时间：2012-12-01T15:34:54.170
> 
> 标签：google-sheets

每当月份发生变化时，我都会遇到这个问题，我必须修改我的 Google 电子表格以从表中获取当月第一天的值。我想知道是否有可能有一个公式或脚本来自动查找当月第一天的值。

我的数据如下所示：

```
+---------------------+------+
|        ColA         | ColB |
+---------------------+------+
| 28/10/2012 00:19:01 |   42 |
| 29/10/2012 00:29:01 |  100 |
| 30/10/2012 00:39:01 |   23 |
| 31/10/2012 00:29:01 |    1 |
| 1/11/2012 00:19:01  |   24 |<---
| 2/11/2012 00:19:01  |    4 |
| 3/11/2012 00:19:01  |    2 |
+---------------------+------+ 
```

我很确定该功能`GoogleClock()`可能会对我有所帮助，但我似乎无法理解如何让它在第一天检测到。

任何提示将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-03T00:26:52.100

看起来很奇怪，但答案在于`EOMONTH`。

跳过一个月的例子：

```
 =EOMONTH( "1/1/2000", 0)+1
   "2/1/2000" 
```

您还可以跳过年份：

```
 =EOMONTH( "1/1/2000", 11)+1
   "1/1/2001" 
```

希望有帮助！

更新：看起来你特别想要`EOMONTH( TODAY(), -1)+1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:43:03.750

尝试使用 、 、 、 和 的组合`and`这`today`是`day`一个`month`示例`year` 公式：`=and(month(A2)=month(today()), year(A2)=year(today()), day(A2)=1)`

![在此处输入图像描述](../Images/49e45087a93b0da6c76c743a2ec99faa.png)

# php - 带有时间戳的 pkcs7

> ID：13660901
> 
> 赞同：5
> 
> 时间：2012-12-01T15:35:12.913
> 
> 标签：php, tcpdf, pkcs#7, trusted-timestamp

我现在看了一天，我仍然感到困惑。我想将数字签名添加到带有*TSA*（时间戳权威）时间戳的 PDF。

我可以将请求发送到 TSA 并接收二进制响应，但是如何将该时间戳附加到我的 pkcs7 数字签名中。

我正在使用带有 TCPDF 和`openssl_pkcs7_sign()`函数的 PHP。我需要添加时间戳作为额外的证书吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-26T17:15:38.933

为此，我创建了一个名为**phpcmstimestamper的简单库项目，您可以像这样使用它：**

```
<?php
$originalCmsAsPem = "-----BEGIN CMS-----
MIIFiAYJKoZIhvcNAQcCoIIFeTCCBXUCAQExDTALBglghkgBZQMEAgEwHQYJKoZI
...
1lUaWopfF7uZf5LXZt2Ru5UPr+51ULJRcEeUTA==
-----END CMS-----";
$updatedCms = CmsTimestamper::addTimestampToCms($originalCmsAsPem, "http://tsa.starfieldtech.com"); 
```

[您可以在https://github.com/hablutzel1/phpcmstimestamper](https://github.com/hablutzel1/phpcmstimestamper)获得更多详细信息和一个完整的工作示例。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-03-13T19:28:49.693

用PHP是不可能的，怕。我会在 C++ 服务器端 pkcs#7 构建器中执行此操作。

# css - 字体 SRC 在 HTML/CSS 中不起作用

> ID：13660903
> 
> 赞同：1
> 
> 时间：2012-12-01T15:35:38.927
> 
> 标签：css, fonts, font-face, src

我正在尝试使用位于主站点文件夹（erbosdraco_nova_nbp.ttf）中的外部字体，但它不起作用并显示默认的 html 字体。

```
@font-face

{
font-family: "fontFlightboard";
src: url('templates/erbosdraco_nova_nbp.ttf')
    ,url('Sansation_Light.eot'); /* IE9 */
}

#loginaccess {
    width:450px;
    height:200px;
    background-color:#F3F3F3;
    float:center;
    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    text-align:left;
    font-family:"fontFlightboard";
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:55:06.000

首先，您必须将字体转换为所需的格式，例如`eot`, `ttf`,`svg`等。您可以访问此链接将字体从一种类型转换为另一种类型：[http ://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

最后，将此代码作为`CSS`文件中的第一件事包括在内：

```
`@font-face {
    font-family: 'JosefinSlab';
    src: url(../JosefinSlab-SemiBold.eot);
    src: url(../JosefinSlab-SemiBold.ttf) format('truetype'),
         url(../JosefinSlab-SemiBold.svg) format('svg'); 
}` 
```

确保字体文件的路径正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:47:06.907

Try this way

```
@font-face{
font-family: fontFlightboard;
src: url('templates/erbosdraco_nova_nbp.ttf'),
     url('Sansation_Light.eot'); /* IE9 */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:38:53.453

我首先建议从 Font Squirrel 之类的地方生成一个 Fontface 工具包，因为它包含您需要的所有格式，然后查看是否可以解决您的问题。

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

# android - 从 Android 设备 sdcard 中的 txt 文件中读取数据

> ID：13660906
> 
> 赞同：1
> 
> 时间：2012-12-01T15:36:32.463
> 
> 标签：android, file, file-manager

我想从文件中读取数据：

```
 FileInputStream in = openFileInput(file);
    InputStreamReader inputStreamReader = new InputStreamReader(in);
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader); 
```

但我不知道“文件”。我希望用户告诉我文件在哪里。我想让他用文件管理器搜索文件。我该怎么办？我希望我解释了自己并对英语感到抱歉。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:02:13.910

试试这段代码，你可以在网上找到很多例子

```
 File sdcard = Environment.getExternalStorageDirectory();

//Get the text file
File file = new File(sdcard,"file.txt");

//Read text from file
StringBuilder text = new StringBuilder();

try {
 BufferedReader br = new BufferedReader(new FileReader(file));
 String line;

 while ((line = br.readLine()) != null) {
    text.append(line);
    text.append('\n');
 }
} catch (IOException e) {
//You'll need to add proper error handling here
} 
```

# php - 将 MySQL 结果转换为 JSON

> ID：13660907
> 
> 赞同：0
> 
> 时间：2012-12-01T15:36:33.730
> 
> 标签：php, mysql, json

嗨，我有一段代码，它使用以下代码从 xml 文件中获取信息：

```
if (file_exists('locations.xml')) {
    $xml = simplexml_load_file('locations.xml');
    $json = json_encode($xml);
    print_r($json);
} else {
    exit('Failed to open locations.xml.');
} 
```

下面是xml页面的布局

```
 <locations>
     <location>
       <id>12196</title>
       <uid>010203</uid>
       <lat>34.134103</lat>
       <lng>-118.321694</lng>
      </location>
    <location> 
```

这很好用，现在我要做的是替换上面的代码以直接从数据库中获取信息。并具有以下代码：

```
 $query = mysql_query("SELECT * FROM track ORDER BY id");
  $rows = array();
  while($row = mysql_fetch_assoc($query)) {
   $rows[] = $row;
  }
  print json_encode($rows); 
```

从数据库中检索信息时，它运行良好。但是我注意到，当我检索数据时，例如格式略有不同。

使用第一种方法将位置放置在结果的前面，就像这样。

```
 {"location":[{"id":"12196" 
```

第二种方法只是返回这个，

```
 [{"id":"12196","uid":"010203" 
```

我已经尝试了几种方法来让第二种格式包含位置，但似乎无法让它工作。我认为我的其余代码使用位置标签来分配信息。

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:39:03.513

尝试

```
while($row = mysql_fetch_assoc($query)) {
   $rows['location'][] = $row;
  }
  print json_encode($rows); 
```

# iphone - 首次尝试对搜索数组进行同步过滤

> ID：13660908
> 
> 赞同：0
> 
> 时间：2012-12-01T15:36:37.593
> 
> 标签：iphone, ios, xcode, uitableview

![在此处输入图像描述](../Images/e7fa6b7fda197cfc2e9b01f5c61cce1c.png)我浏览了苹果教程，我正在尝试为一系列单词制作简化版本。

本质上，当用户开始输入字母 a 时，我想动态显示数组中以 a 开头的所有匹配项，依此类推：

数组 1 = 汽车、飞机、空气、通风、豆类、椅子

开始输入：汽车飞机空气通风

au: 自动

这是我的代码，但我在第一种方法的 shouldReloadTableForSearchString 处遇到错误

提前给你加油

```
#import "otherSearchViewController.h"
#import "SearchViewController.h"
#import "AppDelegate.h"

@interface itemSearchViewController ()

@end

@implementation itemSearchViewController

@synthesize listContent, filteredListContent, savedSearchTerm, savedScopeButtonIndex, searchWasActive;
@synthesize delegate;

/*
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

#pragma mark -
#pragma mark Lifecycle methods
*/

- (void)viewDidLoad
{

    //[super viewDidLoad];

    self.title = @"Search";

    NSString *path =[[NSBundle mainBundle] pathForResource:@"possibleItems" ofType:@"plist"];
    NSArray *content = [NSArray arrayWithContentsOfFile:path];
    listContent =[NSArray arrayWithArray:content];
    if([content count] == 0)

    {
        NSLog(@"nsma is empty");
    }
    NSLog(@"list contents%@", listContent);

   // NSLog(@"list content = %@", listContent);
        // create a filtered list that will contain products for the search results table.

    self.filteredListContent = [NSMutableArray arrayWithCapacity:[self.listContent count]];

        // restore search settings if they were saved in didReceiveMemoryWarning.
    if (self.savedSearchTerm)
        {
        [self.searchDisplayController setActive:self.searchWasActive];
        [self.searchDisplayController.searchBar setSelectedScopeButtonIndex:self.savedScopeButtonIndex];
        [self.searchDisplayController.searchBar setText:savedSearchTerm];

        self.savedSearchTerm = nil;
        }

    [self.tableView reloadData];
    self.tableView.scrollEnabled = YES;
}

- (void)viewDidUnload
{
        //causing problem so disabled
    //self.filteredListContent = nil;
}

- (void)viewDidDisappear:(BOOL)animated
{
        // save the state of the search UI so that it can be restored if the view is re-created
    self.searchWasActive = [self.searchDisplayController isActive];
    self.savedSearchTerm = [self.searchDisplayController.searchBar text];
    self.savedScopeButtonIndex = [self.searchDisplayController.searchBar selectedScopeButtonIndex];
}

- (void)dealloc
{
    [listContent release];
    [filteredListContent release];

    [super dealloc];
}

#pragma mark -
#pragma mark UITableView data source and delegate methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    /*
     If the requesting table view is the search display controller's table view, return the count of
     the filtered list, otherwise return the count of the main list.
     */
    if (tableView == self.searchDisplayController.searchResultsTableView)
        {
        return [self.filteredListContent count];
        }
    else
        {
        return [self.listContent count];
        }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
    if (cell == nil)
        {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID] autorelease];
        }

    /*
     If the requesting table view is the search display controller's table view, configure the cell using the filtered content, otherwise use the main list.
     */
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    /*
     If the requesting table view is the search display controller's table view, configure the next view controller using the filtered content, otherwise use the main list.
     */

}

#pragma mark -
#pragma mark Content Filtering

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    /*
     Update the filtered array based on the search text and scope.
     */

    [self.filteredListContent removeAllObjects]; // First clear the filtered array.

    /*
     Search the main list for products whose type matches the scope (if selected) and whose name matches searchText; add items that match to the filtered array.
     */

    for (searchText in listContent){
        if ([searchText isEqualToString:scope])
            {
            NSComparisonResult result = [scope compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

            if (result == NSOrderedSame)
                {
                [self.filteredListContent addObject:scope];
                }
            }
        }
}

#pragma mark -
#pragma mark UISearchDisplayController Delegate Methods

//when you start typing you get this
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

        // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text] scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

        // Return YES to cause the search result table view to be reloaded.
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:11:44.330

该阵列可能是自动释放的。不要使用类方法来创建它们，而是使用实例方法，即替换 `NSArray *content = [NSArray arrayWithContentsOfFile:path];`为 `NSArray *content = [[NSArray alloc] initWithContentsOfFile:path];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:23:32.523

原来是阵列有问题

# asp.net-mvc - 基本 ASP.NET MVC4 项目不验证 html5？

> ID：13660910
> 
> 赞同：0
> 
> 时间：2012-12-01T15:36:46.063
> 
> 标签：asp.net-mvc, html, validation

我在这里错过了什么吗？

如果我尝试验证新的基本 MVC 4 项目的基本 HTML5 母版页模板，它不会验证。怎么了？

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>

    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)

</body>
</html> 
```

这个验证器： http: [//html5.validator.nu/](http://html5.validator.nu/)和 w3 都给出了相同的错误：

> 错误：杂散结束标记头。
> 从第 9 行第 1 列开始；到第 9 行第 7 列
> dernizr")↩↩ 错误：看到正文开始标签，但已打开相同类型的元素。
> 从第 10 行第 1 列；到第 10 行第 6 列
> )↩↩↩ ↩</p >

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:38:29.707

您正在针对原始 Razor 源进行验证，该源旨在由 Web 服务器而非 Web 浏览器解释。您应该针对生成的 HTML 进行验证。

# javascript - 任何滑块不起作用

> ID：13660912
> 
> 赞同：0
> 
> 时间：2012-12-01T15:36:54.660
> 
> 标签：javascript, jquery, anythingslider

我最近在我的网站中实现了任何东西（基于 wordpress）。默认滑块效果很好。

我正在阅读 github 上的文档，并希望完全像这个演示一样使用它。[http://jsfiddle.net/Mottie/ycUB6/76/](http://jsfiddle.net/Mottie/ycUB6/76/)。

这是我网站的完美功能。但是，当我将代码从 jsfiddle 复制到我的网站时，它根本不起作用。即使我已经使用此代码在页面上使用了滑块：

```
// DOM Ready
$(function(){
 $('#sliderwho').anythingSlider({
  buildArrows         : false,
  buildStartStop      : false,
  autoPlay            : true, 
  mode                : "fade",
  appendControlsTo    : '.slider-nav',
  hashTags            : false,
 });
}); 
```

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:42:45.810

你有`hashTags : false,`一个尾随的“，”，它告诉 JS 你的对象应该有另一个属性。

使用您提供的有限代码，这就是我所看到的-我假设您在其他地方有事件处理程序....

所以对象的更新版本看起来像

```
// DOM Ready
$(function(){
 $('#sliderwho').anythingSlider({
  buildArrows         : false,
  buildStartStop      : false,
  autoPlay            : true, 
  mode                : "fade",
  appendControlsTo    : '.slider-nav',
  hashTags            : false  /*removed the extra ','  */
 });
}); 
```

# facebook-graph-api - facebook从页面墙获取事件

> ID：13660913
> 
> 赞同：1
> 
> 时间：2012-12-01T15:37:01.727
> 
> 标签：facebook-graph-api, hyperlink, facebook-page

我正在尝试从他们的 Facebook 页面获取有关俱乐部中发生的事件的信息。问题是，俱乐部本身并不创造赛事。他们只是在墙上发布活动的链接。我在访问链接时遇到问题。

我尝试了什么：

1.  `GraphAPI PAGE_ID?fields=posts.fields(link)`

    这将返回所有帖子，但链接字段在带有事件链接的帖子中为空。

2.  `GraphAPI PAGE_ID?fields=links.fields(link)`

    当在 Graph API Explorer 中查询时，这非常有效。我得到了事件的正确链接。但是，当我通过 php sdk 使用它时，我只获得了部分链接。我得到的最新链接是从 9 月开始的，尽管在那之后有很多链接。所有链接都是公开的。即使我已注销，我也可以看到它们。

我也尝试过使用**FQL**，但没有任何结果。我非常相信，第二种方法应该可行，但我不知道，为什么不呢。

编辑：

我试图通过他们的 ID 直接查询链接。当我要求链接时，我没有通过上面的方法 2 看到，我收到“不支持的获取请求”错误。我认为这可能是权限问题，但我不明白，为什么我可以得到旧链接。

# c# - 当发生输入字段时，如何使扩展器标题与列表项一起更改？

> ID：13660917
> 
> 赞同：1
> 
> 时间：2012-12-01T15:37:31.680
> 
> 标签：c#, wpf, binding, listbox, expander

当发生输入字段时，如何使 Expander Header 与 ListBox 项一起更改？

*** 我只是试图用一张图片发布这个，但是这个网站不允许我发布图片，直到我的声誉超过 10 New] 按钮被单击一次，“John Henry Doe”输入到 Name 字段，“123-4567”输入到 Phone 字段，然后以红色粗体显示“1) As I type here”，箭头指向 Name 和 Phone 字段，然后以红色粗体显示“2）这会改变”，箭头指向列表框中的“John Henry Doe：123-4567”项，然后以红色粗体显示“3）但这不会改变”，箭头指向“新扩展器接头的“联系人”。***

如上图所示（如果我被允许发布图像），当用户在 Name 或 Phone 字段中键入时，ListBox Item 会发生变化。它发生了变化，因为我对 KeyUp 事件执行了 .Refresh() 。但是，Expander 的 Header 应该同时发生变化。据我所知，没有 .Refresh() 。我希望 Expander 的 Header 像 ListBox 的 Item 一样更新，也就是说，在用户键入时。

ListBox 的DataContext 是Contact 类的一个可观察集合。Contact 类有一个名为 ListString 的属性，其 get 方法返回 ListItem() 方法的结果。ListBox 的 ItemTemplate 只是绑定到 ListString 属性。Expander 的 Header 绑定到 ListBox 的 SelectedItem.ListString 并且当前仅在选择不同的 ListBox 项目时更新。我需要在打字时更新它。

下面是代码背后的 XAML 和 C# 代码。在 ListBox 中选择一个条目之前，ListBox 右侧的控件是不可见的。[New] 按钮将一个新项目插入到 ListBox 中并选择它，从而将控件置于右侧以显示并将焦点赋予 Name 字段。当您在名称字段和/或电话字段中键入时，列表框中的相应项目将更新，但扩展器的标题不会更新。在您选择 ListBox 中的另一个项目之前，它不会更新。我希望它在 ListBox 项目更新的同时更新。我怎么做？

```
<Window x:Class="Binding_List_Expander_04.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Binding List Expander 04"
        Height="350"
        Width="530">
    <Window.Resources>

    </Window.Resources>
    <Grid>
        <StackPanel Orientation="Horizontal" Margin="3">
            <StackPanel Orientation="Vertical" Margin="3">
                <ListBox Name="ContactList"
                         ItemsSource="{Binding}"
                         Width="166"
                         Height="270"
                         Margin="0,0,0,3">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=ListString}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Button Name="NewItem" 
                        Content="New"
                        Click="Event_NewContact_Click"
                        Height="23" 
                        Width="75" />
            </StackPanel>
            <StackPanel Orientation="Vertical">
                <StackPanel.Resources>
                    <Style TargetType="ScrollViewer">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=ContactList, Path=SelectedIndex}" Value="-1">
                                <Setter Property="Opacity" Value="0" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Resources>
                <ScrollViewer Height="302">
                    <StackPanel Orientation="Vertical">
                        <Expander Name="ContactExpander">
                            <Expander.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding ElementName=ContactList, Path=SelectedItem.ListString}" />
                                </DataTemplate>
                            </Expander.HeaderTemplate>
                            <StackPanel Margin="21,0,0,0"
                                        Orientation="Vertical">
                                <Grid Margin="3"
                                      TextBoxBase.TextChanged="Event_ContactName_TextChanged">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="3" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="3" />
                                        <ColumnDefinition Width="250" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               Text="Name:" />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="2"
                                             Name="ContactName"
                                             Text="{Binding ElementName=ContactList, Path=SelectedItem.Name, Mode=TwoWay}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               Text="Phone:" />
                                    <TextBox Grid.Row="2"
                                             Grid.Column="2"
                                             Name="ContactPhone"
                                             Text="{Binding ElementName=ContactList, Path=SelectedItem.Phone, Mode=TwoWay}" />
                                </Grid>
                            </StackPanel>
                        </Expander>
                        <Expander Header="&#13;This is a place holder, there will be&#13;many Expanders following this one."
                                  Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="Data and&#13;Information" FontSize="30" TextAlignment="Center" />
                            </StackPanel>
                        </Expander>
                        <Expander Header="This is another place holder."
                                  Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="Data and&#13;Information" FontSize="30" TextAlignment="Center" />
                            </StackPanel>
                        </Expander>
                        <Expander Header="This is another place holder."
                                  Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="Data and&#13;Information" FontSize="30" TextAlignment="Center" />
                            </StackPanel>
                        </Expander>
                    </StackPanel>
                </ScrollViewer>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>

using System.Windows;
using System.Collections.ObjectModel;
using System.Windows.Threading;
using System.Threading;
using System.Windows.Controls;

namespace Binding_List_Expander_04
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        ObservableCollection<Contact> Contacts = new ObservableCollection<Contact>();

        public MainWindow()
        {
            InitializeComponent();
            ContactList.DataContext = Contacts;
        }

        private void Event_NewContact_Click(object sender, RoutedEventArgs e)
        {
            Contacts.Insert(0, new Contact());
            ContactList.SelectedIndex = 0;
            if (ContactExpander.IsExpanded)
                SetFocus(ContactName);
            else
            {
                ContactExpander.IsExpanded = true;
                SetFocus(ContactName);
            }
        }

        public void SetFocus(UIElement control)
        {
            control.Dispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, (ThreadStart)delegate { control.Focus(); });
        }

        private void Event_ContactName_TextChanged(object sender, TextChangedEventArgs e)
        {
            var tb = e.Source as TextBox;
            Contact C = ContactList.SelectedItem as Contact;
            if (tb == ContactName)
                C.Name = tb.Text;
            else if (tb == ContactPhone)
                C.Phone = tb.Text;
            ContactList.Items.Refresh();
        }
    }

    public class Contact
    {
        public string Name { get; set; }
        public string Phone { get; set; }
        public string ListString { get { return ListItem(); } } // See comments in ListItem() below.

        public Contact()
        {
            Name = string.Empty;
            Phone = string.Empty;
        }

        private string ListItem()
        {/*
          * This is a simplified version, the actual version is complicated and cannot be templatized.
          * Please, do not suggest templitazing this.  I know this simple version can be templitazed,
          * but the actual version cannot be templatized.  I need to know how to make this work as it
          * currently is.
          */
            if ((Name + Phone).Trim().Length == 0)
                return "<New Contact>";
            else
            {
                string li = Name.Trim();
                if (li.Length != 0 && Phone.Trim().Length != 0) li += ": ";
                return li + Phone.Trim();
            }
        }
    }

} 
```

谢谢你的帮助。

# java - 加载资源时过滤 emf eclipse 通知

> ID：13660921
> 
> 赞同：1
> 
> 时间：2012-12-01T15:38:10.720
> 
> 标签：java, filter, notifications, add, eclipse-emf

我正在尝试为某些必须捕获添加通知的 EMF Eclipse 模型开发适配器。它应该做的是，当我向模型添加一些东西时，必须显示一个询问一些问题的对话框。

但是，当我打开模型时，我会收到很多添加通知。我想这是正常的，因为当你打开一个模型时，它必须加载它的所有特性，并且 emf 必须将它们添加到内存模型（或类似的东西）中。

但这是一个严重的问题，因为我不知道来自模型加载或用户交互的“添加通知”是什么。

是否可以进行过滤以跳过来自模型负载的所有通知？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:29:35.477

eclipse emf论坛的人已经回答了我，这就是答案：

> 适配器是如何连接的？您应该考虑附加它们以响应 Resource.RESOURCE__IS_LOADED 通知，就像 org.eclipse.emf.ecore.change.util.ChangeRecorder.notifyChanged(Notification) 一样。您还可以使用 ((Resource.Internal)eObject.eResource()).isLoading() 进行保护。

我选择了第二个选项，使用 isLoading 的守卫，它就像一个魅力。

# java - JVM中的对象创建

> ID：13660926
> 
> 赞同：0
> 
> 时间：2012-12-01T15:38:38.153
> 
> 标签：java

```
public class B extends A{

    // code goes here
}

public class C extends B{
    public void method1(){
       C c = new C();
    }
} 
```

由于 C 扩展了 B ，而 B 又扩展了 A ，所以当我创建 C 的对象时，将在 JVM 中创建多少个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:40:02.507

一，`C`类型。打算在这里添加一些东西，让答案超过 30 个符号......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:07:45.653

One object will be directly created. I say "directly" because initialization expressions or constructor code could create other objects using "new".

Creating that one C object will cause four constructor calls. Immediately before the body of C's constructor, there is an explicit or implicit call to a B constructor. Similarly, B's constructor calls an A constructor, which calls the Object constructor.

The object is a C, and is a B, and is an A, and is an Object, and by the end of the process will have been initialized as each of them.

For full gory details on this process, see [the JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:40:58.317

答案是 1。调用`new C()`创建了一个确实扩展了自身的对象`B`，`A`因此您可以使用从 B 和 A 继承的功能。

# c++ - GLSL - 两种纹理（不混合）

> ID：13660928
> 
> 赞同：0
> 
> 时间：2012-12-01T15:38:46.067
> 
> 标签：c++, opengl, glsl

我正在使用 GLSL 处理纹理。如何使用 GLSL 处理两个纹理？一个人推荐我在我的 GLSL 中做两个 samplers2D ......但是 GLSL 怎么知道应该使用哪个 samplers2D 呢？（我不是在谈论混合纹理......）

我听说我应该使用 glBindTexture。我怎样才能做到这一点？使用 glBindTexture？有人有这方面的例子吗？

OpenGL 3.3

* * *

编辑：

我有这个：

```
uniform Sampler2D texture1;
uniform Sampler2D texture2; 
```

我需要绘制两个对象，使用纹理，那么GLSL如何知道他应该根据我要绘制的对象使用texture1还是texture2。那是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:24:41.200

您需要将每个纹理绑定到不同的纹理单元，然后使用多纹理坐标。它看起来像这样（假设你已经有了纹理）：

```
glActiveTexture (GL_TEXTURE0);  // First texture is going into texture unit 0
glBindTexture (GL_TEXTURE_2D, tex0);
glEnable (GL_TEXTURE_2D);

glActiveTexture (GL_TEXTURE1);  // Second texture is going into texture unit 1
glBindTexture (GL_TEXTURE2D, tex1);
glEnable (GL_TEXTURE_2D);

glUseProgram (yourGLSLProgramID);
glUniform1i (sampler1Location, 0); // tell glsl that sampler 1 is sampling the texture in texture unit 0
glUniform1i (sampler2Location, 1); // tell glsl that sampler 2 is sampling the texture in texture unit 1
///... set the rest of your uniforms...

glBegin (GL_QUADS);
    glMultiTexCoord2f(GL_TEXTURE0, 0.0, 0.0);
    glMultiTexCoord2f(GL_TEXTURE1, 0.0, 0.0);
    glVertexCoord2f(0.0, 0.0);

    glMultiTexCoord2f(GL_TEXTURE0, 1.0, 0.0);
    glMultiTexCoord2f(GL_TEXTURE1, 1.0, 0.0);
    glVertexCoord2f(width, 0.0);

    glMultiTexCoord2f(GL_TEXTURE0, 1.0, 1.0);
    glMultiTexCoord2f(GL_TEXTURE1, 1.0, 1.0);
    glVertexCoord2f(width, height);

    glMultiTexCoord2f(GL_TEXTURE0, 0.0, 1.0);
    glMultiTexCoord2f(GL_TEXTURE1, 0.0, 1.0);
    glVertexCoord2f(0.0, height);
glEnd(); 
```

# c# - 使用 OpenXML 合并 PowerPoint 幻灯片

> ID：13660931
> 
> 赞同：2
> 
> 时间：2012-12-01T15:38:51.963
> 
> 标签：c#, openxml, openxml-sdk

我想合并多个 PointPoint 卡组，当每个卡组包含 30 张或更少的幻灯片时，合并工作正常，如果任何卡组包含超过 30 张幻灯片，PowerPoint 会发出修复消息。OpenXML SDK 工具验证没有帮助，我正在使用以下代码进行合并，或者任何其他有帮助的库？

```
public class SlideMerger
{

    #region variables

    uint uniqueId;
    int partId = 0;        
    List<string> mergingParts = new List<string>() { "introPart" ,"productsPart", "priceGridsPart", "closingPart", "contactPart" };

    #endregion

    #region methods

    public void MergeSlides(List<MemoryStream> sourceDecks, MemoryStream destDeck)
    {

        foreach (var sourcePresentation in sourceDecks)
        {
            MergeSlides(sourcePresentation, destDeck);
            partId++;
        } 
    }

    void MergeSlides(MemoryStream sourcePresentation, MemoryStream destPresentation)
    {
        int id = 0;

        // Open the destination presentation.
        using (PresentationDocument DestDeck = PresentationDocument.Open(destPresentation, true))
        {
            PresentationPart destPresPart = DestDeck.PresentationPart;

            // If the merged presentation doesn't have a SlideIdList element yet then add it.
            if (destPresPart.Presentation.SlideIdList == null)
                destPresPart.Presentation.SlideIdList = new SlideIdList();

            // Open the source presentation. This will throw an exception if the source presentation does not exist.
            using (PresentationDocument SourceDeck = PresentationDocument.Open(sourcePresentation, false))
            {
                PresentationPart sourcePresPart = SourceDeck.PresentationPart;

                // Get unique ids for the slide master and slide lists for use later.
                uniqueId = GetMaxSlideMasterId(destPresPart.Presentation.SlideMasterIdList);
                uint maxSlideId = GetMaxSlideId(destPresPart.Presentation.SlideIdList);

                // Copy each slide in the source presentation in order to the destination presentation.
                foreach (SlideId slideId in sourcePresPart.Presentation.SlideIdList)
                {
                    SlidePart sp;
                    SlidePart destSp;
                    SlideMasterPart destMasterPart;
                    string relId;
                    SlideMasterId newSlideMasterId;
                    SlideId newSlideId;

                    // Create a unique relationship id.
                    id++;
                    sp = (SlidePart)sourcePresPart.GetPartById(slideId.RelationshipId);
                    relId = mergingParts[partId] + id;

                    // Add the slide part to the destination presentation.
                    destSp = destPresPart.AddPart<SlidePart>(sp, relId);

                    // The master part was added. Make sure the relationship is in place.
                    destMasterPart = destSp.SlideLayoutPart.SlideMasterPart;
                    destPresPart.AddPart(destMasterPart);

                    // Add slide master to slide master list.
                    uniqueId++;
                    newSlideMasterId = new SlideMasterId();
                    newSlideMasterId.RelationshipId = destPresPart.GetIdOfPart(destMasterPart);
                    newSlideMasterId.Id = uniqueId;

                    // Add slide to slide list.
                    maxSlideId++;
                    newSlideId = new SlideId();
                    newSlideId.RelationshipId = relId;
                    newSlideId.Id = maxSlideId;

                    destPresPart.Presentation.SlideMasterIdList.Append(newSlideMasterId);
                    destPresPart.Presentation.SlideIdList.Append(newSlideId);
                }

                // Make sure all slide ids are unique.
                FixSlideLayoutIds(destPresPart);
            }

            // Save the changes to the destination deck.
            destPresPart.Presentation.Save();
        }
    }

    void FixSlideLayoutIds(PresentationPart presPart)
    {
        // Make sure all slide layouts have unique ids.
        foreach (SlideMasterPart slideMasterPart in presPart.SlideMasterParts)
        {
            foreach (SlideLayoutId slideLayoutId in slideMasterPart.SlideMaster.SlideLayoutIdList)
            {
                uniqueId++;
                slideLayoutId.Id = (uint)uniqueId;
            }

            slideMasterPart.SlideMaster.Save();
        }
    }

    uint GetMaxSlideId(SlideIdList slideIdList)
    {
        // Slide identifiers have a minimum value of greater than or equal to 256
        // and a maximum value of less than 2147483648\. 
        uint max = 256;

        if (slideIdList != null)
            // Get the maximum id value from the current set of children.
            foreach (SlideId child in slideIdList.Elements<SlideId>())
            {
                uint id = child.Id;

                if (id > max)
                    max = id;
            }

        return max;
    }

    uint GetMaxSlideMasterId(SlideMasterIdList slideMasterIdList)
    {
        // Slide master identifiers have a minimum value of greater than or equal to 2147483648\. 
        uint max = 2147483648;

        if (slideMasterIdList != null)
            // Get the maximum id value from the current set of children.
            foreach (SlideMasterId child in slideMasterIdList.Elements<SlideMasterId>())
            {
                uint id = child.Id;

                if (id > max)
                    max = id;
            }

        return max;
    }

    #endregion
} 
```

# c# - C# 中的不透明度：仅表单，而非控件

> ID：13660934
> 
> 赞同：0
> 
> 时间：2012-12-01T15:39:22.033
> 
> 标签：c#, winforms, opacity

> **可能重复：**
> [如何在保持控件可见的同时为 ac# 表单添加透明度？](https://stackoverflow.com/questions/10266920/how-can-i-add-transparency-to-a-c-sharp-form-while-keeping-controls-visible)

我正在使用带有`panel1`.

我已经定`Opacity=30%`了`Form1`，但我反省了`panel1`。

任何帮助我通过代码仅在表单上设置不透明度 30%，而不是在`panel1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:57:43.823

你不能这样做。窗体的不透明度应用于整个窗体，它是子窗体。抱歉 - 开箱即用的 C# 功能无法实现。

# python - 如何在数字之前拆分字符串

> ID：13660936
> 
> 赞同：1
> 
> 时间：2012-12-01T15:39:51.463
> 
> 标签：python, regex, python-3.x

我有一个`1 blahblahblah 2 sdsdsdsdsd 3 uuuuuu 4 eeee 5 abcdef` 要输出的字符串

```
1 blahblahblah
2 sdsdsdsdsd
3 uuuuuu
4 eeee
5 abcdef 
```

我试图`\n`通过使用在每个数字之前添加，`re.split`但它没有用

```
re.split(' (?=[1-9]:)', line) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:44:46.060

以下工作正常：

```
re.sub(r'(\d+)', '\n\\1', input) 
```

演示：

```
>>> print(re.sub(r'(\d+)', r'\n\1', input))

1 blahblahblah 
2 sdsdsdsdsd 
3 uuuuuu 
4 eeee 
5 abcdef 
```

该表达式`(\d+)`匹配 1 个或多个数字，我将其替换为换行符，后跟匹配的数字（通过捕获组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:45:20.500

使用[组](http://docs.python.org/3/library/re.html#regular-expression-syntax)：

```
>>> s = '1 blahblahblah 2 sdsdsdsdsd 3 uuuuuu 4 eeee 5 abcdef'
>>> import re
>>> print(re.sub(r'([0-9]+)', r'\n\1', s))

1 blahblahblah 
2 sdsdsdsdsd 
3 uuuuuu 
4 eeee 
5 abcdef 
```

要删除第一个换行符，您可以添加一个[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)：

```
>>> print(re.sub(r'(?<!^)([0-9]+)', r'\n\1', s))
1 blahblahblah 
2 sdsdsdsdsd 
3 uuuuuu 
4 eeee 
5 abcdef 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T16:09:34.927

这是另一种在第一个数字之前不插入换行符的替换方法：

```
In [62]: print(re.sub(r'\s(\d)', r'\n\1', line))
1 blahblahblah
2 sdsdsdsdsd
3 uuuuuu
4 eeee
5 abcdef 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:12:34.333

不使用`re`：

```
>>> s = '1 blahblahblah 2 sdsdsdsdsd 3 uuuuuu 4 eeee 5 abcdef'
>>> for i,word in zip(*[iter(s.split())]*2):
    i = int(i)
    print('{i} {word}'.format(**locals())) 
```

输出：

```
1 blahblahblah
2 sdsdsdsdsd
3 uuuuuu
4 eeee
5 abcdef 
```

# c# - 创建 Excel 应用程序时出现 COM 异常 80040154

> ID：13660938
> 
> 赞同：6
> 
> 时间：2012-12-01T15:40:02.697
> 
> 标签：c#, com, interop, com-interop, office-interop

我正在尝试在没有也不会安装 Office 的服务器上运行我的应用程序。

```
using EXCEL = Microsoft.Office.Interop.Excel;
...
EXCEL.Application app = new EXCEL.Application();//Exception thrown here 
```

该代码在我自己的系统上运行良好，但在服务器上它给出了以下异常：

```
Unhandled Exception: System.Runtime.InteropServices.COMException: 
Retrieving the COM class factory for component with CLSID {...} failed
due to the following error: 80040154 Class not registered
(Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

两个系统都是 32 位的，我在应用程序的 exe 旁边复制了 excel Interop dll。我还安装了[O2010PIA](http://www.microsoft.com/en-us/download/confirmation.aspx?id=3508)。

任何铅？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T16:52:54.733

Office 互操作程序集是运行时可调用包装器 (RCW)，它允许您通过其公开的 COM API 与安装在系统上的 Office 副本进行互操作。

错误消息表明没有安装 Excel，这正是我所期望的。不能在没有 Office 的计算机上使用 Interop 程序集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T16:55:44.607

> 我正在尝试在没有也不会安装 Office 的服务器上运行我的应用程序。

正如 Joe 所说，您需要安装 Excel 才能使 Interop 工作。如果您对此坚决反对，请考虑[第三方替代方案](https://stackoverflow.com/questions/444522/import-and-export-excel-what-is-the-best-library)。通常，[Microsoft 不建议在您的服务器上安装 Office 并将其与 Interop 一起使用](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)- 话虽如此，它会起作用（至少在大多数情况下）。

# oracle - oracle 在哪里存储我的对象实例？

> ID：13660939
> 
> 赞同：3
> 
> 时间：2012-12-01T15:40:04.130
> 
> 标签：oracle, oracle10g, oracle-type

我创建了以下两种对象类型：

```
create or replace type person_typ as object (
    person#                 varchar(10)
) not final;

create or replace type salesperson_typ under person_typ (
    salesperson#            varchar(10),
    sSurname                varchar(10),
    sForename               varchar(10),
    dateOfBirth             date
);

create table person_tab of person_typ (
    person# primary key
); 
```

我已经使用以下方法插入了一行：

```
insert into person_tab
values (salesperson_typ('p1','s1', 'Jones', 'John', sysdate)); 
```

我可以使用以下内容检索：

```
select 
    treat(value(s) as salesperson_typ).person# as person_number, 
    treat(value(s) as salesperson_typ).sSurname as sSurname
from 
    person_tab s
; 
```

但是，如果我看一下，`person_tab`我只会看到以下内容：

```
SQL> select * from person_tab;

PERSON#
----------
p1 
```

我很好奇，`salesperson`具体数据存储在哪里？我几乎期待找到一张`salesperson`桌子，但我找不到任何明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:48:42.023

您的对象不可见地存储在同一个表中。您可以通过查询 USER_TAB_COLS 来检查列：

```
SELECT *
FROM user_tab_cols
WHERE table_name = 'PERSON_TAB'; 
```

然后，您可以使用刚刚在查询中发现的列名*（SYS_NC_ROWINFO$ 除外，这对我来说会引发错误）。

```
SELECT SYS_NC_OID$
      ,SYS_NC_TYPEID$ 
    --,SYS_NC_ROWINFO$
      ,PERSON#        
      ,SYS_NC00005$   
      ,SYS_NC00006$   
      ,SYS_NC00007$   
      ,SYS_NC00008$   
FROM PERSON_TAB; 
```

**笔记***

您不应在任何应用程序中使用这些列名，因为它们是内部的，并且在未来的补丁/版本中可能会发生变化。

# objective-c - 如果 cellForRowAtIndexPath 未调用，如何更改 UITableViewCell 外观

> ID：13660942
> 
> 赞同：0
> 
> 时间：2012-12-01T15:40:16.833
> 
> 标签：objective-c, ios, uitableview

我的应用程序中有一个表格视图。表格视图单元格具有带有图案图像的背景。表格视图内容正在发生变化，有时只有两三个包含内容信息的单元格。表格视图会自动将其他单元格添加到屏幕底部。问题是这些单元格的背景很清楚，但我想让背景与其他单元格相同（带有图案图像）。通常我会更改 cellForRowAtIndexPath 中的单元格外观。但是表格视图不会为自动创建的单元格调用此方法。那么，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:36:38.543

您可以在 viewDidLoad() 中执行此操作。 `self.searchDisplayController.searchResultsTableView.backgroundColor = [UIColor redColor]; // set your color for tableview here`
这应该将搜索结果表格单元格着色为您喜欢的颜色。您可以调查的另一个代表是：希望这会有所帮助。
`- (void)tableView:(UITableView*)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
cell.backgroundColor = [UIColor redColor]; // your color here }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:39:10.190

您是否尝试将您的表格视图单元格子类化并在其初始化程序中设置它们的背景？

# django - Django：从不同的模型创建表单

> ID：13660946
> 
> 赞同：2
> 
> 时间：2012-12-01T15:40:55.610
> 
> 标签：django, django-forms

我正在为零件创建*“订单”*表单。

我`AddOrderForm`有`Order`模型字段（如`quantity`），但同时来自`Part`模型（如`name_in_english`）和`PartNumber`模型（如`number`）和其他一些字段的一些与零件相关的信息......

**首先**，我`ModelForm`为每个人做了分离，然后他们像这样组合起来：

# 表格.py

```
class PartNumberForAddOrderForm(forms.ModelForm):

    class Meta:
        model = PartNumber
        fields = ('number',)

class PartForAddOrderForm(forms.ModelForm):

    class Meta:
        model = Part
        fields = ('manufacturer','name_in_english')

class AddOrderForm(forms.ModelForm):

    class Meta:
        model = Order
        fields = ('quantity',) 
```

在模板中：

```
<form class="form-inline well" id="add_order">
    <div class="row-fluid">
        <div class="span12">

        {% crispy form_part_number %}
        {% crispy form_part %}
        {% crispy form_order %}

        <input type="submit" class="btn btn-primary pull-right" value="{% trans 'Add' %}"/>
        </div>
    </div>  
</form> 
```

有了这个观点就变成了： `form_part_number.is_valid() and form_part.is_valid() and form_order.is_valid():`

所有这一切看起来都非常丑陋，而且是错误的......

所以我创建了另一种方式：

```
class PartForm(forms.ModelForm):

    class Meta:
        model = Part
        fields = ('manufacturer','name_in_english')

class PartNumberForm(forms.ModelForm):

    class Meta:
        model = PartNumber
        fields = ('number',)

class AddOrderForm(forms.ModelForm):
    manufacturer = PartForm.base_fields['manufacturer']
    name_in_english = PartForm.base_fields['name_in_english']
    number = PartNumber.base_fields['number']

    class Meta:
        model = Order
        fields = ('manufacturer','number','quantity','name_in_english') 
```

问题：这是`Form.base_fields['']`合法的方式吗？我认为这`.save()`不起作用，但`.is_valid()`应该没问题，对吧？有没有更好的方法呢？

我可以在任何地方做任何有用的事情，所以这是我自己想出的。这让我很担心。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:14:05.893

该`is_valid()`调用可能会正确验证各个字段，但它可能会忽略其他模型验证，例如其他模型之一上的[`unique_together`](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)语句或自定义[`clean`](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)方法。

我不认为检查`is_valid()`多种形式是丑陋的。我以前用过，马上就明白你在做什么。但是，我以前从未见过有人通过从另一个表单中获取字段来定义表单`base_fields`。这并不意味着它不起作用，但它是非常规的。

如果您真的担心它很难看，您可以执行以下操作：

```
my_forms = [form_part_number, form_part, form_order]
if all(f.is_valid() for f in my_forms):
    ... 
```

# c# - 名为 MinBalance 的静态成员未按要求工作

> ID：13660948
> 
> 赞同：-4
> 
> 时间：2012-12-01T15:41:04.207
> 
> 标签：c#

这是我的课：

```
class EmpDetails
{
    private string _EmpName;
    private int _EmpID;
    private string _EmpDepartment;
    private string _EmpPosition;
    private decimal _Balance;
    private static int _PrevId;

    public static decimal MinBalance; //This memeber is not working as required

    **public void Withdraw(decimal amount) // The Problem is in this method**
    {
        if (this.Balance < MinBalance)
        {
            throw new ApplicationException("Insufficient funds");
        }
        else
        {
            this._Balance -= amount;
        }
    }
} 
```

我已经强调了`Withdraw`我认为会产生问题的方法。假设检查余额是否小于最小余额并抛出异常。假设当我将 MinBalance 设置为 500 并将 Balance 设置为 1000，然后尝试从 1000 中提取 600 时，它应该抛出一个异常，说余额不足，但它在第一次运行时不起作用，而是在我尝试提取时起作用第二次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:45:58.403

You'll have to check not your currente Balance but how your Balance will be **after** you Withdraw, thats why it is not working as you expect, you can do it like this:

```
public void Withdraw(decimal amount) // The Problem is in this method**
{
    if ( ( this.Balance - amount ) < MinBalance)
    {
        throw new ApplicationException("Insufficient funds");
    }
    else
    {
        this._Balance -= amount;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:46:12.207

If you step through your code, you'll see the problem. Set a breakpoint on the line `if (this.Balance < MinBalance)`. The first time through, the balance (1000) is higher than the minimum balance (600), so the withdrawal is allowed. It sounds like you really want to check the remaining balance, not the starting balance.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T15:46:30.727

IF I understand your description of the problem right, you want to block people from reducing your balance to below your min balance.

```
 public void Withdraw(decimal amount) // The Problem is in this method**
    {
        if (this.Balance < MinBalance)
        {
            throw new ApplicationException("Insufficient funds");
        }
        else
        {
            this._Balance -= amount;
        }
    } 
```

But you're not factoring the withdrawal into that equation. change your condition to

```
if (this.Balance - amount < MinBalance)
{ 
```

# c# - 在另一个图像中查找图像

> ID：13660954
> 
> 赞同：10
> 
> 时间：2012-12-01T15:41:26.510
> 
> 标签：c#, image, search, aforge

我正在尝试构建一个解决难题的应用程序（尝试开发图形算法），并且我不想一直手动输入示例输入。

**编辑：** 我不是在尝试构建游戏。我正在尝试建立一个玩“SpellSeeker”游戏的代理

假设我在屏幕上有一张图片（见附件），里面有数字，我知道盒子的位置，而且我有这些数字的确切图片。我想要做的只是告诉相应的盒子上哪个图像（数字）。

[![数字](../Images/28df600ce1947b57db2f49a1181305f7.png)](https://i.stack.imgur.com/wDVdg.jpg)

所以我想我需要实施

`bool isImageInsideImage(Bitmap numberImage,Bitmap Portion_Of_ScreenCap)`或类似的东西。

我尝试过的是（使用[AForge](https://code.google.com/archive/p/aforge)库）

```
public static bool Contains(this Bitmap template, Bitmap bmp)
{
    const Int32 divisor = 4;
    const Int32 epsilon = 10;

    ExhaustiveTemplateMatching etm = new ExhaustiveTemplateMatching(0.9f);

    TemplateMatch[] tm = etm.ProcessImage(
        new ResizeNearestNeighbor(template.Width / divisor, template.Height / divisor).Apply(template),
        new ResizeNearestNeighbor(bmp.Width / divisor, bmp.Height / divisor).Apply(bmp)
        );

    if (tm.Length == 1)
    {
        Rectangle tempRect = tm[0].Rectangle;

        if (Math.Abs(bmp.Width / divisor - tempRect.Width) < epsilon
            &&
            Math.Abs(bmp.Height / divisor - tempRect.Height) < epsilon)
        {
            return true;
        }
    }

    return false;
} 
```

但在此图像中搜索黑点时返回 false。

我该如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:35:01.683

找到解决方案后，我正在回答我的问题：

[这](https://stackoverflow.com/questions/2472467/how-to-find-one-image-inside-of-another?lq=1)对我有用：

```
System.Drawing.Bitmap sourceImage = (Bitmap)Bitmap.FromFile(@"C:\SavedBMPs\1.jpg");
            System.Drawing.Bitmap template = (Bitmap)Bitmap.FromFile(@"C:\SavedBMPs\2.jpg");
            // create template matching algorithm's instance
            // (set similarity threshold to 92.5%)

           ExhaustiveTemplateMatching tm = new ExhaustiveTemplateMatching(0.921f);
                // find all matchings with specified above similarity

                TemplateMatch[] matchings = tm.ProcessImage(sourceImage, template);
                // highlight found matchings

           BitmapData data = sourceImage.LockBits(
                new Rectangle(0, 0, sourceImage.Width, sourceImage.Height),
                ImageLockMode.ReadWrite, sourceImage.PixelFormat);
            foreach (TemplateMatch m in matchings)
            {

                    Drawing.Rectangle(data, m.Rectangle, Color.White);

                MessageBox.Show(m.Rectangle.Location.ToString());
                // do something else with matching
            }
            sourceImage.UnlockBits(data); 
```

唯一的问题是它找到了该游戏的所有 (58) 个盒子。但是将值 0.921f 更改为 0.98 使其完美，即它只找到指定数字的图像（模板）

**编辑**：我实际上必须为不同的图片输入不同的相似度阈值。我通过尝试找到了优化值，最后我有一个类似的功能

```
float getSimilarityThreshold(int number) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:28:10.390

更好的方法是构建一个自定义类，它包含您需要的所有信息，而不是依赖于图像本身。

例如：

```
public class MyTile
{
    public Bitmap TileBitmap;
    public Location CurrentPosition;
    public int Value;
} 
```

这样，您可以“移动”平铺类并从`Value`字段中读取值，而不是分析图像。您只需将班级持有的任何图像绘制到它当前持有的位置。

您可以将图块保存在数组中，例如：

```
private list<MyTile> MyTiles = new list<MyTile>(); 
```

根据需要扩展类（并记住在不再需要时处理这些图像）。

如果您*真的*想查看图像中是否有图像，您可以查看我为另一篇文章编写的扩展（虽然在 VB 代码中）：
[Vb.Net Check If Image Existing In another Image](https://stackoverflow.com/questions/10899828/vb-net-check-if-image-existing-in-another-image/12606249#12606249)

# eclipse - ">" 标记在eclipse中的项目名称中

> ID：13660957
> 
> 赞同：0
> 
> 时间：2012-12-01T15:41:43.013
> 
> 标签：eclipse

![在此处输入图像描述](../Images/0f8dd5ad7b0ee8aa45b82f2fd0ae0c75.png)

我正在尝试构建具有很多项目的 Eclipse 源代码。我发现有些项目显示“>”标记。这个是来做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:48:10.413

It's probably a text decoration from the CVS or SVN (or other) team support, which indicates an outgoing change: there is at least one file in the project that has been modified since the last CVS/SVN update.

Go to Preferences and type "Label decoration" in the filter box to show where these decorations might come from.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:48:25.460

`>` means it is dirty.

As it says in in [git submodules explained](http://longair.net/blog/2010/06/02/git-submodules-explained/)

> Versions 1.7.0 and later of git contain an [annoying change](http://github.com/git/git/commit/ee6fc514f2df821c2719cc49499a56ef2fb136b0) in the behavior of git submodule.
> **Submodules are now regarded as dirty if they have any modified files or untracked files**, whereas previously it would only be the case if HEAD in the submodule pointed to the wrong commit.

Here is some extra information on what each of the icons mean:

![enter image description here](../Images/6e70e1e0e8c88a4a715bd3e58fd1a107.png)

# c++ - 从另一个模板对象调用模板方法时出现奇怪的编译行为

> ID：13660958
> 
> 赞同：4
> 
> 时间：2012-12-01T15:41:57.933
> 
> 标签：c++, templates, compilation, compiler-errors

有人可以解释为什么以下 c++ 代码没有按预期运行：

```
struct Object {   
  template< int i >
  void foo(){ } 
};

template<int counter>
struct Container {
  Object v[counter];

  void test(){
    // this works as expected
    Object a; a.foo<1>();

    // This works as well:
    Object *b = new Object(); b->foo<1>();

    // now try the same thing with the array:  
    v[0] = Object(); // that's fine (just testing access to the array)

# if defined BUG1
    v[0].foo<1>();   // compilation fails 
# elif defined BUG2
    (v[0]).foo<1>(); // compilation fails
# elif defined BUG3
    auto &o = v[0];
    o.foo<1>();      // compilation fails
# else
    Object &o = v[0];
    o.foo<1>();      // works
# endif
  }
};

int main(){
  Container<10> container;
} 
```

上面的代码在没有标志的情况下编译得很好。如果设置了标志 BUG1 到 BUG3 中的一个，则使用 GCC 4.6 或 4.7 和 clang 3.2 编译会失败（这似乎表明它不是 GCC 错误）。

第 21 到 29 行在语义上做了完全相同的事情（即调用 Object 数组的第一个元素的方法），但只编译最后一个版本。只有当我尝试从模板对象调用模板化方法时，才会出现问题。

BUG1 只是编写调用的“正常”方式。

BUG2 是一样的，但数组访问受括号保护，以防出现优先级问题（但不应该有任何问题）。

BUG3 表明类型推断也不起作用（需要使用 c++11 支持编译）。

最后一个版本工作正常，但我不明白为什么使用临时变量来存储引用可以解决问题。

我很想知道为什么其他三个无效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:00:47.953

在模板内部，表达式可以是*类型相关的*或*值相关的*。从 14.6.2 开始：

> 类型和表达式可能取决于模板参数的类型和/或值

在您的情况下，`counter`是一个模板参数，并且 的声明`v`依赖于它，从而形成`v[0]`一个依赖于*值的*表达式。因此，该名称`foo`是一个从属名称，您必须通过以下方式消除它作为模板名称的歧义：

```
v[0].template foo<1>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:55:41.037

您必须`template`用作：

```
v[0].template foo<1>();  

auto &o = v[0];
o.template foo<1>(); 
```

因为声明`v`依赖于模板参数，这使得`v`依赖名称。

这里的`template`关键字告诉编译器后面的任何内容都是*模板*（在您的情况下，`foo`确实是模板）。如果`foo`不是模板，则`template`不需要关键字（实际上，这将是一个错误）。

问题是`o.foo<1>()`可以通过两种方式解析/解释：一种是正如你所期望的（函数调用），另一种方式是这样的：

```
(o.foo) < 1  //partially parsed 
```

也就是说， `foo`是成员数据（不是函数），并且您已经将其与`1`. 所以要告诉编译器`<`不是用来比较`o.foo`的`1`，而是用来将模板参数传递`1`给函数模板，你需要使用`template`关键字。

# c# - 如何定义默认颜色/字体以在多种表单中使用？

> ID：13660967
> 
> 赞同：2
> 
> 时间：2012-12-01T15:43:28.977
> 
> 标签：c#, .net, winforms

我需要在一个公共位置使用默认颜色和字体，以便在桌面应用程序的多个窗口形式中使用它。

对此的最佳做法是什么？

我正在考虑使用应用程序设置在那里定义它们，但我想确保这是推荐的方式，或者是否有替代方法。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:47:42.250

You could make a base form and derive all of your forms from the base. The base form would have the properties set the way you'd like them to appear in all of your other forms.

# python - Python：尝试查找矩阵索引时出错

> ID：13660968
> 
> 赞同：-2
> 
> 时间：2012-12-01T15:43:38.680
> 
> 标签：python, list

我有这段代码可以创建一个用零填充的矩阵。我想用创建蛇对象时给出的“符号”替换一些零。然后我想用我的符号替换矩阵中的零而不增加矩阵中元素的总数。

使用蛇类中的“增长”功能，我想确保仅覆盖零，但出现错误：

```
ValueError: (1, 4) is not in list 
```

当我确定该职位确实存在时！每次运行程序时错误代码都不同，因为坐标是随机生成的。这是我的代码：

```
class field:
 def __init__(self):

    self.table= [ [ "0" for i in range(10) ] for j in range(10) ]

  def printfield(self):
     for row in self.table:
            print (row)

Class snake:

  def __init__(self,sign):
    self.sign = sign
    self.x = random.randint(1,9) 
    self.y = random.randint(1,9)    

    field.table[self.x][self.y] = sign

  def growth(self, list, index, element):
    if list[index] != 0:
        return False
    else:
        field.table[self.x-v*b][self.y-v*c] = element

  def increase(self,p,b,c):                                               

        for v in range(p+1):
                self.growth(field.table,field.table.index((self.x-v*b,self.y-v*c)), self.sign) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:05:47.570

You're confusing your indices in the two-dimensional list with values in the list. The statement

```
field.table.index((self.x-v*b, self.y-v*c)) 
```

looks for a **value** of (in your given error case) `(1, 4)` inside of the list `field.table`, which is of course not there. What you probably want is accessing `field.table[1][4]`. You could just pass the tuple as a variable to `growth` and use its elements as indices for the list, or pass `field.table[self.x-v*b]` as the list to growth and `self.y-v*c` as the index to access on that list.

Also, you are filling the list with `"0"`s but checking against `0` inside your `growth` function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:01:07.220

错误来自您的增加方法而不是您的增长方法。它发生在你打电话时`table.index((self.x-v*b,self.y-v*c))`。当您调用索引表时，我不清楚您要做什么，但是 index 方法返回列表中值的位置。例如：

```
>>> A = [0, 1, 5, 10]
>>> A.index(5)
2 
```

table 似乎是 int 列表的列表，因此当您调用时，在 index.html中找不到`table.index((1, 4))`元组。`(1, 4)`也许你想要`table[1][4]`？

更新：

我认为这就是你想要的：

`self.growth(field.table, (self.x-v*b, self.y-v*c), self.sign)`

并替换`field.table[self.x-v*b][self.y-v*c]`为`field.table[index[0]][index[1]]`

`(self.x-v*b, self.y-v*c)`是你想要的索引，一旦你将它传递给增长，你需要使用它的参数名称来引用它。

# c# - 获取 Windows 8 自动颜色主题的活动颜色

> ID：13660976
> 
> 赞同：22
> 
> 时间：2012-12-01T15:44:13.113
> 
> 标签：c#, .net, wpf, winapi, windows-8

在 Windows 8 中，我已将配色方案设置为自动，并将我的壁纸配置为在 x 分钟后更改。配色方案根据活动壁纸而变化。

我正在开发一个 WPF 应用程序，并希望在 Windows 更改配色方案以匹配当前壁纸时更改我的渐变。

有没有办法获取当前/实际的配色方案并收到 C# 更改的通知？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T14:24:42.293

是的，这是可能的。但是请注意：这包含相当多的 Win32 互操作（这意味着从托管代码 P/Invokes 到本机 DLL），并且**仅适用于某些未记录的 API**。虽然，所涉及的唯一未记录的功能是用于获取窗口配色方案（或 DWM 称之为窗口着色颜色），这在另一个问题中有所涉及：

[Vista/7：如何获得玻璃颜色？](https://stackoverflow.com/questions/3560890/vista-7-how-to-get-glass-color)

在我自己的项目中，我使用了以下调用`DwmGetColorizationParameters()`：

```
internal static class NativeMethods
{
    [DllImport("dwmapi.dll", EntryPoint="#127")]
    internal static extern void DwmGetColorizationParameters(ref DWMCOLORIZATIONPARAMS params);
}

public struct DWMCOLORIZATIONPARAMS
{
    public uint ColorizationColor, 
        ColorizationAfterglow, 
        ColorizationColorBalance, 
        ColorizationAfterglowBalance, 
        ColorizationBlurBalance, 
        ColorizationGlassReflectionIntensity, 
        ColorizationOpaqueBlend;
} 
```

我已经对其进行了测试，它适用于 Windows 8 及其自动窗口着色功能。正如上面链接中所建议的那样，您可以在注册表中查找颜色值作为 P/Invoke 的替代方法，但我没有测试过该方法，并且如前所述，这些方法没有记录并且不能保证稳定。

一旦获得绘制渐变画笔的颜色，无论是手动还是由 Windows 自动更改窗口配色方案，画笔都不会更新。幸运的是，Windows 会在发生这种情况时广播[`WM_DWMCOLORIZATIONCOLORCHANGED`窗口消息](http://msdn.microsoft.com/en-us/library/windows/desktop/dd388198.aspx)，因此您只需监听该消息并在发送时更新您的颜色。您可以通过挂接到窗口过程 ( `WndProc()`) 来完成此操作。

的`WM_DWMCOLORIZATIONCOLORCHANGED`值为`0x320`; 您需要在某处将其定义为常量，以便可以在代码中使用它。

此外，与 WinForms 不同，WPF 窗口没有`WndProc()`要覆盖的虚拟方法，因此您必须创建一个虚拟方法并将其挂接到其关联的窗口句柄 (HWND) 的委托中。

从我的这些答案中获取一些示例代码：

*   [如何通过拖动扩展的窗口框架使 WPF 窗口可移动？](https://stackoverflow.com/questions/5493149/how-do-i-make-a-wpf-window-movable-by-dragging-the-extended-window-frame)
*   [检测 WPF 中的系统主题更改](https://stackoverflow.com/questions/6360671/detect-system-theme-change-in-wpf/6360771#6360771)

我们有：

```
const int WM_DWMCOLORIZATIONCOLORCHANGED = 0x320;

private IntPtr hwnd;
private HwndSource hsource;

private void Window_SourceInitialized(object sender, EventArgs e)
{
    if ((hwnd = new WindowInteropHelper(this).Handle) == IntPtr.Zero)
    {
        throw new InvalidOperationException("Could not get window handle.");
    }

    hsource = HwndSource.FromHwnd(hwnd);
    hsource.AddHook(WndProc);
}

private static Color GetWindowColorizationColor(bool opaque)
{
    var params = NativeMethods.DwmGetColorizationParameters();

    return Color.FromArgb(
        (byte)(opaque ? 255 : params.ColorizationColor >> 24), 
        (byte)(params.ColorizationColor >> 16), 
        (byte)(params.ColorizationColor >> 8), 
        (byte) params.ColorizationColor
    );
}

private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
{
    switch (msg)
    {
        case WM_DWMCOLORIZATIONCOLORCHANGED:

            /* 
             * Update gradient brushes with new color information from
             * NativeMethods.DwmGetColorizationParams() or the registry.
             */

            return IntPtr.Zero;

        default:
            return IntPtr.Zero;
    }
} 
```

当 Windows 转换颜色变化时，`WM_DWMCOLORIZATIONCOLORCHANGED`会在转换中的每个关键帧处分派，因此在颜色变化期间您会在短时间内收到大量消息。这个是正常的; 只需像往常一样更新渐变画笔，您就会注意到，当 Windows 转换窗口颜色方案时，您的渐变也将与其余窗口框架一起平滑转换。

请记住，您可能需要考虑 DWM 不可用的情况，例如在 Windows XP 上运行时，或者在 Windows Vista 或更高版本上运行时禁用桌面合成。您还需要确保您不会过度使用它，否则您可能会受到严重的性能影响并减慢您的应用程序。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-20T02:39:53.730

这可以在 .NET 4.5 及更高版本中完成，无需 P/Invokes。[SystemParameters](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.aspx)类现在具有静态[WindowGlassBrush](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.windowglassbrush.aspx)和[WindowGlassColor](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.windowglasscolor.aspx)属性以及[StaticPropertyChanged](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.staticpropertychanged.aspx)事件。

从 XAML，您可以绑定到 WindowGlassBrush 属性，例如：

```
<Grid Background="{x:Static SystemParameters.WindowGlassBrush}"> 
```

但是，通过此分配，当 Windows 更改其颜色时，背景颜色不会自动更新。不幸的是，SystemParameters 不**提供**WindowGlassBrushKey*或*WindowGlassColorKey*属性*以用作具有 DynamicResource 的 ResourceKeys，因此获取更改通知需要后面的代码来处理 StaticPropertyChanged 事件。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.InitializeComponent();
        SystemParameters.StaticPropertyChanged += this.SystemParameters_StaticPropertyChanged;

        // Call this if you haven't set Background in XAML.
        this.SetBackgroundColor();
    }

    protected override void OnClosed(EventArgs e)
    {
        SystemParameters.StaticPropertyChanged -= this.SystemParameters_StaticPropertyChanged;
        base.OnClosed(e);
    }

    private void SetBackgroundColor()
    {
        this.Background = SystemParameters.WindowGlassBrush;
    }

    private void SystemParameters_StaticPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "WindowGlassBrush")
        {
            this.SetBackgroundColor();
        }
    }
} 
```

# php - 将 tinymce textarea 内容保存到文件

> ID：13660978
> 
> 赞同：5
> 
> 时间：2012-12-01T15:44:21.163
> 
> 标签：php, tinymce

我一直在尝试将 tinymce 编辑器 textarea 内容保存到 .txt 文件中，但尚未成功。这是我的 html 文件代码：

```
<!Doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TinyMCE example</title>
  <meta name="description" content="HTML5 Basic template">
  <meta name="author" content="R Dickinson">
  <link rel="stylesheet" href="css/styles.css?v=1.0">
  <script src="js/scripts.js"></script>
  <script type="text/javascript" src="jscripts/tiny_mce/tiny_mce.js"></script>
  <script type="text/javascript">
tinyMCE.init({
// General options
mode : "textareas",

});
</script>
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
    <header>
<h1>test tinymce save</h1>
    </header>
    <nav>
    </nav>
    <section>

<form method="post" action="test.php">
    <p> 
        <textarea name="content" style="width:50%"></textarea>
        <input type="submit" value="Save" />
    </p>     
</form>
    </section>
    <aside>
    </aside>
    <footer>
        </footer>
</body>
</html> 
```

现在 test.php

```
<?php
/*
 * test.php
  */
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>test tiny mce</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 0.21" />
</head>

<body>
<?php

echo(stripslashes($_POST['content']));
?>
<?php
$file = "data.txt";
$fp = fopen($file, 'w');
$data =(stripslashes($_POST['content']));
fwrite($fp, $data);
fclose($fp);
?>

</body>

</html> 
```

我很感谢有用的回复来解决这个问题 - 非常感谢:-)

**更新** 在下面的第一个答案之后，我添加了 triggerSave as：

```
 <script language="Javascript">
function submitForm() {
tinyMCE.triggerSave();
document.forms[0].submit();
}
</script> 
```

和

```
<form method="post" action="test.php">
<p> 
    <textarea name="content" style="width:50%"></textarea>
    <!--<input type="submit" value="Save" />-->
    <a href="javascript:submitForm();">Submit Form</a>
</p> 
```

但仍然没有成功...感激地收到更多帮助

**更新 2** 这是我的 jQuery TinyMCE 版本：

```
 <!Doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sample WebPage</title>
  <meta name="description" content="HTML5 Basic template">
  <meta name="author" content="R Dickinson-see sitepoint etc">
  <link rel="stylesheet" href="css/styles.css?v=1.0">
  <script src="js/scripts.js"></script>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
        google.load("jquery", "1.3");
</script>
<!-- Load jQuery build -->
<script type="text/javascript" src="jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas"
});
</script>
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
    <header>
        <h1>Enter the main heading, usually the same as the title.</h1>
    </header>
    <nav>
    </nav>
    <section>

<!-- OF COURSE YOU NEED TO ADAPT ACTION TO WHAT PAGE YOU WANT TO LOAD WHEN HITTING "SAVE" -->
<form method="post" action="show.php">
        <p>     
                <textarea name="content" cols="50" rows="15">This is some content that will be editable with TinyMCE.</textarea>
                <input type="submit" value="Save" />
        </p>
</form>

    </section>
    <aside>
    </aside>
    <footer>

  </footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T17:56:59.310

问题本身归结为：

> 如何将 TinyMCE 的 HTML 内容保存到文件中。

嗯，首先，你需要：

1) 获取编辑器的内容
2) 将此内容发送到 PHP 脚本
3) 实现一些将内容保存到文件中的功能

**获取内容**
确保以应有的方式获取内容。

例如，

```
<script type="text/javascript">

window.onload = function(){

  var btn = document.getElementById('SubmitBtn');

  btn.onclick = function(){

     //This MUST alert HTML content of editor.
     alert( tinyMCE.activeEditor.getContent() );
  }
}

</script>

<input type="button" id="SubmitBtn" value="Get HTML content"/> 
```

**将内容发送到 PHP 脚本**

您需要做的就是将方法的值发送`tinyMCE.activeEditor.getContent()`到 PHP 脚本。

好吧，你应该使用`Jquery-AJAX`它。

假设您包含`jquery.js`在 head 部分的脚本标记中，下一步是**将 JavaScript 变量发送到 PHP 脚本**

这将类似于这个：

```
<script type="text/javascript">
$(function(){

  var url = "path_to_your_php_script.php";

  $("#SomeSubmitButton").click(function(){
    //"content" will PHP variable 
    $.post(url, { "content" : tinyMCE.activeEditor.getContent() }, function(respond){

       if ( respond == ){
          alert('Content saved to file');
          return;
       } else {
          //Error message assumed
          alert(respond);
        }
    });
  });

});

</script> 
```

**PHP 脚本**

由于我们发送`"content"`这个将被填充在`$_POST`superglobal

```
<?php

if ( isset($_POST['content']) ){

   //This is what you want - HTML content from tinyMCE
   //just treat this a string

   if ( save_html_to_file($_POST['content'], '/some_file.html') ){
     //Print 1 and exit script
     die(1);
   } else {
      die('Couldnt write to stream');
   }
}

/**
 * 
 * @param string $content HTML content from TinyMCE editor
 * @param string $path File you want to write into
 * @return boolean TRUE on success
 */
function save_html_to_file($content, $path){
   return (bool) file_put_contents($path, $content);
} 
```

因此，执行此操作后，您应该返回`alert`成功消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:57:14.827

您应该在提交表单之前更新您的 TinyMCE 实例。使用这个 javascript：

```
tinyMCE.triggerSave(); 
```

我通常把它放在一个函数中并在`onsubmit`表单事件中调用它。

Stackoverflow 中已经有围绕这个主题的不同问题。

# python-2.7 - 显示 Web2py 外键 ID

> ID：13660981
> 
> 赞同：0
> 
> 时间：2012-12-01T15:44:46.180
> 
> 标签：python-2.7, web2py, web2py-modules

我第一次将 web2py 用于一个项目。我通过以下方式制作了一个字段

```
db.define_table('my_years',Field('case_year',db.case_years,required=True,requires = IS_IN_DB( db, 'case_years.id', '%(year)s' ))); 
```

该字段是指另一个具有年份列表的表，该表定义如下：

```
db.define_table('case_years',Field('year'),format = '%(year)s') ; 
```

然后我在视图中显示 my_years。

```
<table id="case_list">
    <thead>
        <tr>
            <th>Number</th>
            <th>Year</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
            {{ for case in cases: }}
            <tr>
                <td>{{=case.case_number}}</td>
                <td>{{=case.case_year}}</td>
                <td><a href= "{{=URL(r=request, f='edit', args=case.id)}}"> Edit Case </a></td>
            </tr>
            {{pass}}
    </tbody>
</table> 
```

我面临的问题是，在显示“my_years”中的年份时，我看到的是 case_years 的主键 ID，而不是年份中的值（即 case_years.year）。

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:36:21.600

如果您删除显式`requires`参数，那么您将获得一个`requires`与您定义它相同的默认值，另外您将获得一个默认`represent`属性，该属性将显示年份而不是 SQLTABLE、SQLFORM.grid 中的 id，并读取和更新 SQLFORM 的.

```
Field('case_year', db.case_years, required=True) 
```

或者，您可以显式定义`represent`属性：

```
Field('case_year', db.case_years, required=True,
      requires=IS_IN_DB(db, 'case_years.id', '%(year)s'),
      represent=lambda id, r: db.case_years(id).year)) 
```

另外，请注意，您不需要在代码行末尾使用分号。

更新（基于提供的新代码）：

在您看来，该字段的`represent`属性将不起作用，因为您没有使用 SQLFORM 或 SQLTABLE，而只是显示单个值：

```
{{=case.case_year}} 
```

case.case_year 是一个 id 值，这就是上面显示的内容。如果要显示 db.case_years 表中的关联年份，则需要执行以下操作：

```
{{=db.case_years(case.case_year).year}} 
```

您还可以进行递归选择：

```
{{=case.case_year.year}} 
```

相当于上面的。请注意，这两种方法都会对每种情况产生额外的数据库查询，因此效率会有些低。相反，您可以对案例进行连接的初始查询，并包括 case_years 表中的“年份”字段（请参阅[http://web2py.com/books/default/chapter/29/06#Inner-joins](http://web2py.com/books/default/chapter/29/06#Inner-joins)）。

# android - 自定义列表视图适配器中的对象数组

> ID：13660984
> 
> 赞同：0
> 
> 时间：2012-12-01T15:45:01.130
> 
> 标签：android, android-layout, android-listview

我有一个自定义列表视图适配器，其中包含 ArrayList 作为成员。

每场比赛都属于一个回合。我是说：

```
public class GameSummary
{
 String round;
 Game game;
} 
```

所以实际上，我需要创建一个部分列表视图，该轮将是标题和下面的游戏。

问题是，listview 引擎在数组中生成行 PER 对象。

因此，如果我在其中的数组中有 3 个 GameSummary 和 10 个游戏 - 它只会生成 3 行！

我该怎么办 ？

当前的自定义适配器继承自 BaseAdapter 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:31:30.597

你必须像这样使用 expandableListView 和 customAdapter 。

```
@SuppressLint("ResourceAsColor")
    public class ExpandableListAdapter extends BaseExpandableListAdapter {

        private LayoutInflater inflater;
        private ArrayList<GameSummary> mParent;

    public  ExpandableListAdapter(Context context, ArrayList<GameSummary> parent){
            this.mParent = parent;
            this.inflater = LayoutInflater.from(context);
        }

        //counts the number of group/parent items so the list knows how many times calls getGroupView() method
        public int getGroupCount() {
            return mParent.size();
        }

        //counts the number of children items so the list knows how many times calls getChildView() method
        public int getChildrenCount(int i) {
            return mParent.getGameList(i).size();
        }

        //gets the title of each parent/group
        public Object getGroup(int i) {
            return mParent.getGameList(i).getTitle(); //game Title
        }

        //gets the name of each item
        public Object getChild(int i, int i1) {
            return mParent.getGameList(i);
        }

        public long getGroupId(int i) {
            return i;
        }

        public long getChildId(int i, int i1) {
            return i1;
        }

        public boolean hasStableIds() {
            return true;
        }

        //in this method you must set the text to see the parent/group on the list
        public View getGroupView(int i, boolean b, View view, ViewGroup viewGroup) {

            if (view == null) {
                view = inflater.inflate(R.layout.expandable_listview, viewGroup,false);
            }

            TextView textView = (TextView) view.findViewById(R.id.list_item_text_parent);
            //"i" is the position of the parent/group in the list
            textView.setText(getGroup(i).toString());

            //return the entire view
            return view;
        }

        //in this method you must set the text to see the children on the list
        public View getChildView(int i, int i1, boolean b, View view, ViewGroup viewGroup) {
            if (view == null) {
                view = inflater.inflate(R.layout.expandable_listview_child_item, viewGroup,false);
            }

            TextView textView = (TextView) view.findViewById(R.id.list_item_text_child);
            //"i" is the position of the parent/group in the list and 
            //"i1" is the position of the child
            textView.setText(mParent.get(i).getGameList(i1));

            //return the entire view
            return view;
        }

        public boolean isChildSelectable(int i, int i1) {
            return true;
        } 
```

和你的班级：

```
public class GameSummary
{
 String round;
 List<Game> gameList;
} 
```

# html - 我的 比我的大

> ID：13660985
> 
> 赞同：-6
> 
> 时间：2012-12-01T15:45:12.927
> 
> 标签：html, css

当我将宽度设置为 100% 并将`<body>`宽度设置为 900 像素时。

这就是我得到的：

```
 ___________
   _|my body  |_
  |_ My div    _|
    |my body  |
    |         | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:10:50.117

这与您要完成的任务相似吗？

[http://jsfiddle.net/ha7fK/1/](http://jsfiddle.net/ha7fK/1/)

我在 jsfiddle 的演示中将宽度更改为 300px。只需更改`300px`为`900px`

HTML

```
 <body>
  <div class="width900">
   Width of 900px
  </div>

  <div class="widthfull">
      <div class="text">
        Width of 100%
      </div>    
  </div>

  <div class="width900">
   Width of 900px
  </div>
</body>​ 
```

CSS

```
 body {width:100%;}
.width900 {width:300px; background:#ccc; margin:auto;}
.widthfull {width:100%; background:#eee; margin:auto;}
.widthfull .text {width:300px; margin:auto;} 
```

​</p>