# StackOverflow 问答 14799000-14799999

# r - 用 R 计算汇总数据

> ID：14799003
> 
> 赞同：1
> 
> 时间：2013-02-10T14:56:52.547
> 
> 标签：r, casting, summary

我有如下所示的数据框：

```
set.seed(123)
df <- data.frame(factor1 = rep(c("A", "B"),50),
                 factor2 = rep(c("X","X", "Y", "Y"),25),
                 value = rnorm(100)) 
```

我想计算 factor1:factor2 对的一些汇总值。我使用以下方法计算了平均值和标准差：

```
summary <- as.matrix(cast(df, factor1~factor2, mean))
summary.sd <- as.matrix(cast(df, factor1~factor2, sd))
summary.table <- t(rbind(summary, summary.sd))
colnames(summary.table) <- c("A.mean", "B.mean", "A.sd", "B.sd") 
```

但是我想将比较 A 与 B 的 t.test 中的 p 值添加到 summary.table 中。到目前为止，我已经这样做了，但这不仅没有写入 summary.table，而且我无法获得名称与它一起打印的 factor2 变量：

```
for (measurement in levels(df$factor2)) print(t.test(value~factor1, data=subset(df, factor2==measurement))) 
```

我认为必须有一些简单的方法来做到这一点，或者也许我不知道的一个包会使这更简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:21:53.510

我会这样做：

一、get`mean`和`sd`summaries using `ddply`from `plyr`using`summarise`

```
require(plyr)
require(reshape2)
o1 <- ddply(df, .(factor1, factor2), summarise, mean = mean(value), sd=sd(value))

#   factor1 factor2       mean        sd
# 1       A       X 0.03746854 0.8730525
# 2       A       Y 0.18352432 0.7635439
# 3       B       X 0.10317706 1.0494930
# 4       B       Y 0.03745372 0.9876173 
```

然后，`p-values`为`t-test`NULL和级别`mean(A) = mean(B)`获取：`X``Y``factor2`

```
o2 <- ddply(df, .(factor2), summarise, pval=t.test(value ~ factor1)$p.value)

#   factor2      pval
# 1       X 0.8108754
# 2       Y 0.5614256 
```

然后，使用`reshape2`'s`melt`并`dcast`转换`o1`为所需的格式。

```
o1.mc <- dcast(melt(o1, c("factor1", "factor2")), factor2 ~ variable + factor1)

#   factor2     mean_A     mean_B      sd_A      sd_B
# 1       X 0.03746854 0.10317706 0.8730525 1.0494930
# 2       Y 0.18352432 0.03745372 0.7635439 0.9876173 
```

现在，将其与`o2`：

```
merge(o1.mc, o2)

#   factor2     mean_A     mean_B      sd_A      sd_B      pval
# 1       X 0.03746854 0.10317706 0.8730525 1.0494930 0.8108754
# 2       Y 0.18352432 0.03745372 0.7635439 0.9876173 0.5614256 
```

# c# - Telerik Control 弹出窗口拒绝关闭

> ID：14799005
> 
> 赞同：1
> 
> 时间：2013-02-10T14:56:59.587
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个带有复选框的页面，用户应该检查并显示一个弹出窗口。弹出的窗口显示正确；但是，我无法关闭窗口。正如您在下面看到的，只要用户单击提交，就会调用 closewindow 函数。显示消息，但窗口永远不会关闭。请参阅下面的示例代码。

```
//This is the content of the partial page that is being load in the popped up window.
@using (Html.BeginForm("StudentArchive", "Arvhive", FormMethod.Post, new { onsubmit = "CloseWindow()" }))
{

    @Html.HiddenFor(item => item.StudentID)
<table>
    <tr>
        <th>
            Student Archive Reason
        </th>
    </tr>
    <tr>
        <td>
            @Html.TextAreaFor(item => item.ArchiveReason)
        </td>
    </tr>
</table>

 <input type="submit" value="Submit" name="btnSubmit" id="ArchiveReasonSubmit" onclick="CloseWindow();" />
}

      <script type="text/javascript">
          function CloseWindow() {
              alert('I am closing window in reason for archive');
              $("#Window").data("tWindow").close();
//              $('#Window').prop("checked", "checked");
//              window.location.href = window.location.href;
          }
    </script>

//this script is in a studentDetails page which is where the checkbox that would open the window below located.

<script type="text/javascript">
    function chkArchive() {
        var s = document.getElementById('archiveCheckBox').checked;
        if (s == true) {
            OpenWindow(this);
        }

        if (s == false) {
            alert('checkbox is unchecked');
        }
    }
</script>

<script type="text/javascript">
        function OpenWindow(e) {
            var checkbox = document.getElementById('archiveCheckBox').value;
            if (checkbox == "false") {
                alert('It is false.');
            } else if (checkbox == "true") {
                $('#Window').data('tWindow').center().open();
            } 
        }
</script>

    <script type="text/javascript">
        function ClosingWindow() {
            $('#Window').prop("checked", "checked");
            window.location.href = window.location.href;
        }
    </script>

  @{Html.Telerik().Window()
  .Name("Window")
  .Visible(true)
  .Title("Reason for Archives")
  .Modal(true)
  .Height(600)
  .Draggable(true)
  .Visible(false)  //I could have added a variable set the default value to false to hide the window. However, I am not sure how to change it back to 
                   //yes after the user checks the checkbox for the first time. The only event that fire when a user check the checkbox is the javascript event to check the state
                   // of the checkbox and open the window.
  .Width(800)
  .ClientEvents(events => events.OnClose("ClosingWindow"))
  .LoadContentFrom(Url.Action("StudentArchive", "Student", new { StudentID = @ViewData["StudentID"] }, Request.Url.Scheme))
  .HtmlAttributes(new { onsubmit = "CloseWindow()" })
  .Render();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:32:33.083

jquery 库被引用了两次。我从部分视图页面中删除了它，并且查询工作正常。这是帮助我解决问题的链接：

[http://www.telerik.com/community/forums/aspnet-mvc/window/close-modal-window-from-within-the-window.aspx](http://www.telerik.com/community/forums/aspnet-mvc/window/close-modal-window-from-within-the-window.aspx)

# python - 二十一点模拟器（检查）

> ID：14799011
> 
> 赞同：0
> 
> 时间：2013-02-10T14:57:38.540
> 
> 标签：python, random, python-2.7, nested-loops

我写了一个二十一点模拟器。目标是估计经销商破产的可能性。请注意，庄家必须在 16 点和 17 点站立。如果庄家的手上有一张 A，则当总点数在 17 和 21 之间时，它应该算作 11；否则，王牌应该算作 1。该程序似乎正在运行，但我不是百分百确定。这里是程序的核心。你能检查一下代码是否有缺陷吗？

```
def simNGames(n):
    holds = busts = 0
    for i in range(n):
        score = simOneGame()
        if score <= 21:
            holds += 1
        else:
            busts += 1
    return holds, busts

def simOneGame():
    score = 0
    cardsVal = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11]
    while not gameOver(score):
        dealerScore = choice(cardsVal)

        # in case dealer hits an ace
        if dealerScore == 11:
            if score >= 6 and score <= 10:
                score += 11
            else:
                score += 1
        else:
            score += dealerScore

    return score

def gameOver(score):
    return score >= 17 and score <= 21 or score >=22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:14:12.100

总的来说，逻辑似乎很好。

我的建议是为您担心的特定情况编写一些[单元测试。](http://docs.python.org/2/library/unittest.html)

# php - 使用数组项的路径

> ID：14799012
> 
> 赞同：1
> 
> 时间：2013-02-10T14:57:37.857
> 
> 标签：php, arrays

有没有办法通过使用路径或路径元素数组来引用多维数组中的项目？例如。

```
$multi = array
(
    'array_1' => array
    (
        'array_2' => array
        (
            'option_1' => 'value_1',
            'option_2' => 'value_2',
        )
    )
);

$path = array('level_1', 'level_2', 'option_1');
$result = $multi[$path]; 
```

并且有 $result = 'value_1'？

原因是，我有一个递归函数，用于搜索 $multi 并找到我需要的密钥，然后返回 $path。我知道我可以用我自己的代码在路径中硬编码，但我正在尝试使它可重用，以便我可以编辑 $multi 并且该功能仍然可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:02:59.720

PHP 没有内置任何东西来执行此操作，但您可以使用移动引用为它编写一个函数：

```
/**
 * @param string $path path in the form 'item_1.item_2.[...].item_n'
 * @param array $array original array
 */
function &get_from_array($path, &$array)
{
    $current =& $array;
    foreach(explode('.', $path) as $key) {
        $current =& $current[$key];
    }
    return $current;
} 
```

例子：

```
// get element:
$result = get_from_array('level_1.level_2.option_1', $multi);
echo $result; // --> value_1

$result = 'changed option';
echo $multi['level_1']['level_2']['option_1']; // --> changed_option 
```

我编写它是为了将名称从配置文件转换为数组，如果您想像示例中那样将路径本身作为数组传递，只需省略爆炸即可。

# php - 使用php将文件部分下载到服务器

> ID：14799018
> 
> 赞同：2
> 
> 时间：2013-02-10T14:57:51.333
> 
> 标签：php, vb.net, multithreading, binaryfiles, resume-download

我们学校的网速限制约为 7kb/s，我们有一些 300Mb 空间的 php 主机。但是a意识到我们的php脚本没有限制！

我想下载一个文件到我的主机，我**确实**在这个网站上找到了[答案。](https://stackoverflow.com/questions/3938534/download-file-to-server-from-url)

问题来了：我不能下载超过 300 Mb，而且我希望能够使用我朋友的帐户来加快我的下载速度（当然是在他们的许可下）。

我可以完全访问一台计算机（在学校），它可以将我的 less_then_300Mb_files 移动到它自己并让我下载其余的。

首先我写了这段代码：

```
<?php
function downloadfile ($url, $path){
  $step=1024;
  $fsize=0; 
  if(file_exists($path))
    $fsize=filesize($path);
  $dlsize=filesize($url);
  echo "$fsize<br>$dlsize<br>";

  $file = fopen ($url, "rb");
  if ($file)
  {
$newf = fopen ($path, "ab");
fseek($newf,$fsize);
fseek($file,$fsize);
if($newf)
    while(ftell($newf)<$dlsize)
    {
        if($dlsize-ftell($newf)<$step) 
            fwrite($newf, fread($file, $dlsize-ftell($newf)), $dlsize-ftell($newf));
        else
            fwrite($newf, fread($file, $step), $step );
    }

} 

if ($file) 
  fclose($file);

if ($newf) 
  fclose($newf);

}

$url=$_GET['url'];
$exp=explode("/",$url);

downloadfile($url,$exp[count($exp)-1]);

?> 
```

它在本地文件上运行良好，但`fseek`& 其他一些命令在 URL 中运行不佳。

我希望它像[IDM](http://www.internetdownloadmanager.com)一样，能够**恢复和暂停**文件。另外，如果可能的话，我希望它使用**多个请求**下载。

我的功能有什么问题，如何下载文件的一部分？

[更多信息：服务器是基于 linux
的我可以访问的计算机是 win7。
我知道 vb.net、php(!) 和一点 c++。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:31:42.523

好的，我自己做了一些事情。这不完全是我想要的，但会以某种方式解决问题：

```
<?php
set_time_limit(0);

function existsin($ar,$key)
{
    foreach ($ar as $s => $val)
        if ($s==$key) return true; 
    return false;
}

function toinf($str,$path)
{
$fhr=fopen ("$path/inf.txt", "w");
fwrite($fhr,$str);
fclose($fhr);
}

function downloadfile ($url, $path, $len, $num, $waittl)
{
    $exp=explode("/",$url);
    $fname=$exp[count($exp)-1];
    $prt=0;$ppath=$path;
    $sp=1;$exectime=10000;
    $file = fopen ($url, "rb");

    if ($file)
    {
        $newf = fopen ($path, "wb");
        if ($newf)
            while(!feof($file))
            {
                if(ftell($newf)/1048576 >= $len && $len!=0)
                {

                while(file_exists($ppath) && $waittl)
                    usleep(5000);

                $prt=$prt+1;
                fclose($newf);
                $ppath=$path.".part".$prt;
                if(is_dir($num))
                    $newf = fopen ($ppath, "wb");           
                else
                    die("rested!");
                }
                toinf("$fname|Downloading",$num);

            $timepre = microtime(true);
            fwrite($newf, fread($file, 1024 * $sp ), 1024 * $sp );
            $timepost = microtime(true);
            $exectime2= $exectime;
            $exectime = $timepost - $timepre;
            if($exectime2 > $exectime && 65536>$sp) {$sp=$sp*1.5;} else if($sp>=1) $sp=$sp/1.5;
            if($sp<=0) $sp=1;

            }
    } 

    if ($file) 
        fclose($file);

    if ($newf) 
        fclose($newf);

}

if(existsin($_GET,'url')==false) {echo("invalid arg");return 0;} else echo ("started.");
$url=$_GET['url'];
$exp=explode("/",$url);

for($i=1;is_dir($i);$i++);
mkdir($i);
toinf($exp[count($exp)-1]."|Started",$num);
$maxlen=50;$waittl=true;
if(existsin($_GET,'maxlen')==true) $maxlen=$_GET['maxlen'];
if(existsin($_GET,'wait')==true) $waittl=false; 
downloadfile($url,$i."/".$exp[count($exp)-1],$maxlen,$i,$waittl);
toinf($exp[count($exp)-1]."|Done",$i);
?> 
```

我还不能继续下载，但我可以部分下载并通过学校空间过滤器...但有时（我不知道是什么原因）PHP突然终止，只留下一堆没用的零件！

# javascript - 不需要的声音循环 JavaScript

> ID：14799024
> 
> 赞同：1
> 
> 时间：2013-02-10T14:58:46.687
> 
> 标签：javascript, loops, audio

```
setInterval(collector, 1000/FPS); 
```

这会调用收集器，它运行以下命令：

```
function collector(){
    inputinterval();
    draw();
    soundplay();
    //DEBUG FEATURES BELOW
    //console.log(mousepos);
    //console.log(mousedrag);
} 
```

其中`inputinterval`有代码确定用户是否正在拖动某些东西。默认情况下，他是，但通过按空格键，它会从鼠标指针中删除元素。现在有了声音会很有趣，所以我做了以下测试来测试声音：

```
//SOUND
//function soundplay(){
//  if (!(mousedrag)){
//      snd_putdown.play();
//  };
//}; 
```

我现在已经将它注释掉了，因为即使没有按下鼠标按钮它也会循环。

鼠标拖动在输入函数中确定：

```
if (event.keyCode == 65) {
    mousedrag = true;
}
if (event.keyCode == 83) {
    mousedrag = false;
} 
```

由于我的鼠标按钮也不起作用，因此目前被键盘输入取代。这段代码是`inputinterval()`收集器中调用的一部分，由 setInterval 函数调用。这会导致巨大的循环。我将如何处理声音，以便它不是循环的一部分，但确实响应用户丢弃某些东西（并将其捡起>丢弃>等......）。

提前致谢！

编辑：嗯，我现在跳过了整个零件的下降，并选择改变设计，而不是在这样的事情上打破我的头。我仍然想知道如何做到这一点，但现在它可以没有。可以在这里看到进度，以及源代码和其他内容：koewaffle.koding.com/pcgametest/index.html。

# php - Cron 作业和顶级域

> ID：14799034
> 
> 赞同：2
> 
> 时间：2013-02-10T14:59:39.977
> 
> 标签：php, dns, cron

我正在处理的站点正在使用顶级域（`.nl`/ `.be`）来定义其语言以及它应该使用的数据库。这允许同一网站用于多个域，每个域都有自己的内容，但布局相同。

一切都很好，除非它涉及 Cron 工作。域用于定义要通过`$_SERVER['HTTP_HOST']`. 使用 cronjob，直接调用文件而不使用域（本地域层次结构），因此它无法派生它应该使用的数据库/语言。

有没有一种让 cron 作业使用相同原理的好方法，或者我是否坚持必须发送一个变量来定义它应该使用哪种数据库/语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:02:58.440

您可以在环境变量中推送一个值：

```
@daily     HTTP_HOST=www.example.nl php /path/to/script.php 
```

环境变量应该出现在里面`$_SERVER`以使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:10:02.657

最简单的方法是将 cron 放在 web 根目录中，使用 wget [http://example.com/cron.php](http://example.com/cron.php)或 GET 并且 http_host 将自动设置 - 确保您构建逻辑以防止通过 htaccess 或限制执行滥用对某些 ip

# javascript - 节点 webkit WinAPI

> ID：14799035
> 
> 赞同：12
> 
> 时间：2013-02-10T14:59:41.917
> 
> 标签：javascript, node.js, winapi, node-webkit, node-ffi

我正在为 Windows（Vista、7、...）开发简单的 node-webkit 应用程序，我需要使用一些 WinAPI 函数，特别是`RegisterHotKey`和`SendInput`，来绑定系统范围的热键并基于它进行击键。node-webkit 没有提供这样的 API，所以我想使用[node-ffi](https://github.com/rbranson/node-ffi)来调用这些函数。

我是 WinAPI 开发的新手，所以我阅读了一些 MSDN 手册，但发现大多数示例都是创建窗口、消息循环、消息处理过程等。所以我不太明白，如何从node-webkit正确调用WinAPI，而不创建单独的窗口？

[node-ffi教程](https://github.com/rbranson/node-ffi/wiki/Node-FFI-Tutorial)没有涉及这种情况，所以我找到了[node Windows](https://github.com/Benvie/node-Windows)库，但它似乎只是通过node.js实现了Windows应用程序。

有没有办法在不创建 Windows 应用程序的情况下实现本机调用？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-23T18:12:11.803

我编写了一个节点脚本，它使用 、 和 模块在 Windows 上[`ffi`](https://github.com/rbranson/node-ffi)捕获[`ref`](http://github.com/TooTallNate/ref)热键[`ref-struct`](http://github.com/TooTallNate/ref-struct)。我在让它们在打包的 .exe 中工作时遇到了一些问题，因为它们`ffi`是`ref`本机附加组件。有关更多信息，请参阅我不久前打开的这个[github 问题。](https://github.com/rogerwang/node-webkit/issues/803)

无论如何，这是代码：

```
var FFI = require('ffi'),
    ref = require('ref'),
    Struct = require('ref-struct');

/* First, create the necessary data structures that'll be used
   by our windows api calls. */

var pointStruct = Struct({
  'x': 'long',
  'y': 'long'
});

var msgStruct = Struct({
  'hwnd': 'int32',
  'message': 'int32', 
  'wParam': 'int32', 
  'lParam': 'int32', 
  'time': 'int32', 
  'pt': pointStruct
});

var msgStructPtr = ref.refType(msgStruct);

/* Second, register the functions we'd like to use by providing
   their method signatures. */

var user32 = new FFI.Library('user32', {

  'RegisterHotKey': [ 
    'bool', ['int32', 'int', 'int32', 'int32'] 
  ],

  'GetMessageA': [ 
    'bool', [msgStructPtr, 'int32', 'int32', 'int32'] 
  ]

  /* You may prefer to use PeekMessageA which has the same
     signature as GetMessageA, but is non-blocking. I haven't
     tested it, though.

});

/* Third, register your hotkeys. I wanted to control a media player,
   so these keys reflect that. */

var ALT = 0x0001,
    CTRL = 0x0002,
    SHIFT = 0x0004;

var MEDIA_NEXT = 0xB0,
    MEDIA_PREV = 0xB1,
    MEDIA_STOP = 0xB2,
    MEDIA_PLAY_PAUSE = 0xB3,
    MEDIA_LAUNCH = 0xB5;

var PERIOD = 0xBE,
    COMMA = 0xBC,
    EQUAL = 0xBB,
    DIVIDE = 0xBF,
    SQUOTE = 0xDE,
    PAGEUP = 0x21,
    PAGEDOWN = 0x22;

registrations = [];
registrations.push(user32.RegisterHotKey(0, 1, 0, MEDIA_NEXT));
registrations.push(user32.RegisterHotKey(0, 1, 0, MEDIA_PREV));
registrations.push(user32.RegisterHotKey(0, 1, 0, MEDIA_STOP));
registrations.push(user32.RegisterHotKey(0, 1, 0, MEDIA_PLAY_PAUSE));
registrations.push(user32.RegisterHotKey(0, 1, 0, MEDIA_LAUNCH));
registrations.push(user32.RegisterHotKey(0, 1, CTRL, PERIOD));
registrations.push(user32.RegisterHotKey(0, 1, CTRL, COMMA));
registrations.push(user32.RegisterHotKey(0, 1, CTRL, EQUAL));
registrations.push(user32.RegisterHotKey(0, 1, CTRL, DIVIDE));
registrations.push(user32.RegisterHotKey(0, 1, CTRL | ALT, PAGEUP));
registrations.push(user32.RegisterHotKey(0, 1, CTRL | ALT, PAGEDOWN));

// an array of booleans telling us which registrations failed/succeeded
console.log(registrations);

/* Fourth, wait for new hotkey events from the message queue. */

var myMsg = new msgStruct;
while (user32.GetMessageA(myMsg.ref(), 0, 0, 0)) {
    var key = myMsg.lParam >> 16;
    switch (key) {
        case MEDIA_NEXT: console.log('media next'); break;
        case MEDIA_PREV: console.log('media prev'); break;
        case MEDIA_STOP: console.log('media stop'); break;
        case MEDIA_PLAY_PAUSE: console.log('media play/pause'); break;
        case MEDIA_LAUNCH: console.log('media launch'); break;
        case PERIOD: console.log('next'); break;
        case COMMA: console.log('previous'); break;
        case EQUAL: console.log('play/pause'); break;
        case DIVIDE: console.log('info'); break;
        case PAGEUP: console.log('volume up'); break;
        case PAGEDOWN: console.log('volume down'); break;
        default: console.log('undefined hotkey', key, key.toString(16));
    }
} 
```

如果您希望它与 node-webkit 一起使用，请确保`nw-gyp`使用`--target`设置为您的 node-webkit 版本（在我的情况下为 0.5.1）构建所有本机附加组件：

```
# Make sure you run this command in the following directories (where the binding.gyp files are):
#  node_modules/ffi/
#  node_modules/ffi/node_modules/ref/
#  node_modules/ref/
$ nw-gyp clean configure --target=v0.5.1 build 
```

查看 MSDN 文档以了解使用的方法签名和结构。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-10T02:00:55.293

node-ffi 的替代方法是使用 iohook npm 模块：[https ://github.com/wilix-team/iohook](https://github.com/wilix-team/iohook)

> Node.js 全局键盘和鼠标监听器。
> 
> 该模块可以通过 JavaScript/TypeScript 应用程序内外的原生钩子处理键盘和鼠标事件。

可以在[此处](https://github.com/octalmage/robotjs/wiki/Plugins-(or-compatible-modules))找到其他一些替代方案。（但是，在我看来，其他的并没有那么好；例如，大多数都不再被维护了。）

# php - PHP 联系表格有时会向我发送奇怪的电子邮件

> ID：14799041
> 
> 赞同：-1
> 
> 时间：2013-02-10T15:00:57.117
> 
> 标签：php, email, spam, contact-form

我的网站有一个 PHP 联系表格，它通过电子邮件向我发送表格数据。当我测试它时效果很好。此外，我还通过该表格收到了很多来自网站访问者的电子邮件，但有时我会从以下表格中收到非常奇怪的电子邮件：

```
v0lMO8  <a href="http://tqiptnoljxnt.com/">tqiptnoljxnt</a>,
[url=http://fqnyptgpiqbp.com/]fqnyptgpiqbp[/url],
[link=http://atmsirfurmic.com/]atmsirfurmic[/link],
http://uoaxeaumrkvo.com/ 
```

我不知道表格是否有问题，或者这是故意作为垃圾邮件发送给我的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:06:28.983

这是垃圾邮件。您需要为您的网站添加某种垃圾邮件保护以避免这种情况 - 简单的问题或从图像重写代码。它应该减少这种邮件的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:09:50.633

它看起来像垃圾邮件，因为 URL 以不同的方式输入，以便您可以点击它。

我认为您需要通过添加存储在会话中并在发送时检查的随机隐藏输入来保护您的表单，以保护您的脚本免受跨站点脚本以及更好的人工验证方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:11:45.510

这是垃圾邮件。您的选择是：

a) 如果电子邮件的数量是可控的，那就忍受它

b) 实施某种“人工检查”。[Google recaptcha](http://www.google.com/recaptcha)是免费的 + 易于实施，但请记住，它可能会让合法用户感到烦恼，因此只有在您认为无法轻松应对收到的垃圾邮件数量时才这样做。

# c# - DriveInfo[] 的磁盘利用率

> ID：14799046
> 
> 赞同：0
> 
> 时间：2013-02-10T15:01:41.747
> 
> 标签：c#

编辑上午 9:20 CST：看来你只需要转换

```
 if (d.Name == drvNamefrm2) 
```

到

```
 if (d.Name == (string)drvNamefrm2) 
```

* * *

好吧，我正在尝试编写一个小型性能监视器。我已经在这里进行了研究，并通过了一些演练。这可能是一个容易修复的小问题，但我看不到它。我希望你能看看。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Diagnostics;
using System.IO;

namespace TrafcLightPerfMeter_v1
  {
public partial class diskUtilForm : Form
{ 
```

它使用两种形式，我从 Form1 中引入初始选择，因此下面的形式名称中的参数。

```
 public diskUtilForm(int drvNumfrm1, string drvNamefrm1)
    {
        InitializeComponent();
        mainForm test = new mainForm();
        **object drvNumfrm2 = (object)drvNumfrm1;
        object drvNamefrm2 = (object)drvNamefrm1;
        DriveInfo[] allDrives = DriveInfo.GetDrives(); 
```

这是这个“foreach”部分。即使 d.Name 是 == 到 drvNamefrm2，它也会跳过我的“if”——我不明白我做错了什么。

这里的想法是“如果”它们匹配“那么”交通灯背景将是绿色的。然后我想用那个小公式来指定其余的颜色。我只需要它来输入 if 语句。

```
 foreach (DriveInfo d in allDrives)
        {
         if (d.Name == drvNamefrm2)
            {
                labelGreen.BackColor = Color.Green;
                long totalAvailable = d.AvailableFreeSpace;
                long totalSpace = d.TotalSize;

        double percentAvailable =   Math.Round(((double)totalAvailable/(double)totalSpace)*100,4);**

            }
        }

    }
}
 } 
```

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:28:34.370

看来你只需要转换

```
if (d.Name == drvNamefrm2) 
```

到

```
if (d.Name == (string)drvNamefrm2) 
```

——这个公式现在似乎也起作用了。所以，以后自己可以对“红绿灯”做对比和变色。

# c# - How to represent a very large bit array efficiently?

> ID：14799047
> 
> 赞同：4
> 
> 时间：2013-02-10T15:01:42.910
> 
> 标签：c#, .net, bit, memory-optimization

Since [a boolean actually takes 1 byte of space](https://stackoverflow.com/questions/294905/why-in-net-system-boolean-takes-4-byte), a `bool[]` isn't the most space-efficient way to represent a bit array. Sometimes integers and longs are used as a more efficient bit array, but a long can only hold 64 bits. Is there a more space-efficient way to store arrays of tens of millions bits in limited memory?

All I need to do with this array is to set/clear individual bits and to check whether some bits is 1 or 0, i.e. the only functions I need:

```
void Set(int index, bool value);
bool Get(int index); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T15:03:20.580

I think what you need is [BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx) class

# c - 如何在 Main() 之前创建一个数组/结构并在 C 中初始化它

> ID：14799050
> 
> 赞同：1
> 
> 时间：2013-02-10T15:02:05.417
> 
> 标签：c, struct, initialization, global

我知道在 C 中，解决“*初始化元素不是常量*”错误的一种方法是在 main() 函数中创建结构。但是假设我有一个结构数组并想将它用作全局数组。如何创建和初始化它？

```
struct A *b = malloc(10*sizeof(struct A)); // Want to keep the malloc
void init_A_types(struct A* t)
{
  t->elm1=0; t->elm2=1;
}
...
int Main() {
  for (k=0;k<10;k++)
  init_A_types(b+k);
  ...
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:04:33.803

如果你想要一个数组，为什么不将它声明为一个数组呢？

```
struct A {
    const char *str;
    int n;
};

struct A b[3] = {
    {
        "foo", 1
    },
    {
        "bar", 2
    },
    {
        "baz", 3
    }
}; 
```

如果你**想要**一个全局指针，那么**使用**一个全局指针：

```
struct A *b;

int main()
{
    b = malloc(sizeof(*b) * 10);

    // do stuff

    free(b);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:07:41.027

在您的程序中，您可以考虑将此语句修改`struct A *b = malloc(10*sizeof(struct A));`为`struct A b[10];`，程序的其余部分可能相同。

# three.js - Three.js 地球在点击时旋转

> ID：14799063
> 
> 赞同：0
> 
> 时间：2013-02-10T15:03:23.760
> 
> 标签：three.js, webgl

我创建了一个旋转的地球仪，它具有在单击时触发模式的主机点。我希望地球旋转并点击屏幕中央的热点。下面的代码旋转地球，但没有按需要居中。请提供指点

```
 checkHotspotClick: function(){
        var me = this;
        window.cancelAnimationFrame(me.animate)
        //get normalized mousecoords -1 -> 1
        var mouse2DX = (mouseX/me.windowDimensionX)*2-1
        var mouse2DY = -(mouseY/me.windowDimensionY)*2+1

        //for use with a orthographic camera
        var vecOrigin = new THREE.Vector3( mouse2DX, mouse2DY, - 1 );
        var vecTarget = new THREE.Vector3( mouse2DX, mouse2DY, 1 );

        me.projector.unprojectVector( vecOrigin, me.camera );
        me.projector.unprojectVector( vecTarget, me.camera );
        vecTarget.subSelf( vecOrigin ).normalize();

        var ray = new THREE.Ray();
        ray.origin = vecOrigin;
        ray.direction = vecTarget;
        var intersects = ray.intersectObjects(me.hotspotsArr);

        if (intersects.length > 0) {
            console.log($(me.hotspotDivsArr[intersects[0].object.name]).html())
            // ajax overide
            me.targetRotation_x += (me.options.camX-mouse2DX)*12;
            me.targetRotation_y += (me.options.camY+mouse2DY)*12;
            me.doZoom(-6);
            console.log(me.targetRotation_x);
            var country_id = $(me.hotspotDivsArr[intersects[0].object.name]).data('id');
            url = 'home/getProjectData';
            $("#myModal").load(url,{ s: country_id });
            setTimeout(function() {$("#myModal").modal('show')},2000);
            $('#myCarousel').carousel($(this).data('slide-index'));
            /*me.targetRotation_x = 0;*/

            } 
            else
            {
                me.doZoom(+6);
            }
        }, 
```

# php - PHP字符串连接问题

> ID：14799068
> 
> 赞同：1
> 
> 时间：2013-02-10T15:03:39.253
> 
> 标签：php

以下 PHP 字符串的输出不正确。它在最后显示附加（>）。请帮助我做错了什么？

```
$part2 = HTMLentities('<input type="hidden" name="custom" value="<?php print($_SESSION["muser"]."-".$_SESSION["mpass"]);?>">');
print $part2; 
```

谢谢， KRA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:08:19.450

如果您已经处于 PHP 模式，则应该只使用字符串连接而不是`<?php ?>`语法；此示例将 html 创建和转义部分分开。

```
$html = '<input type="hidden" name="custom" value="' . htmlspecialchars($_SESSION["muser"] . "-" . $_SESSION["mpass"]) . '">';

$part2 = htmlentities($html);
print $part2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:07:25.707

这是因为末尾有一个额外的>。试试这个：

```
$part2 = HTMLentities('<input type="hidden" name="custom" value="<?php print($_SESSION["muser"]."-".$_SESSION["mpass"]);?>"');
print $part2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:26:45.360

我认为这更多的是您正在寻找的：

```
$part = '<input type="hidden" name="custom" value="' . htmlentities($_SESSION['user'] . '-' . $_SESSION['mpass']) . '" />'; 
```

您的示例中有很多糟糕的 PHP 语法。

*   我们使用`<?php`标签将 HTML 转义为 PHP。当您有一个 PHP 文件时，您可以考虑的一种方式是您确实有一个 HTML 文档 - 但是您可以添加`<?php`标签来编写 PHP 代码。在您的示例中，您尝试从 PHP 中打印 HTML ，这可能会变得很复杂。您已经在 PHP 块中，因此您不需要使用开始`<?php`标记。
*   连接字符串以存储在变量中时，您不需要使用该`print`函数。该`print`函数用于将文本写入屏幕。您可以像我编写的示例中那样使用变量名称来组合字符串。
*   `htmlentities`用于将字符串中的任何 HTML 呈现为文本。我们`htmlentities`用来防止未知（用户输入的）数据修改我们的 HTML。像我在上面所做的那样在 $_SESSION 变量上使用 htmlentities 是个好主意，以确保它们不会`input`用无效的 HTML 破坏我们的标签。在整个字符串上使用它只会打印您的 HTML，就好像它是原始文本一样。

这是一种从 PHP 块外部编写它的方法：

```
<?php
    // initial PHP code
?>

<input type="hidden" name="custom" value="<?php echo htmlentities($_SESSION['user'] . '-' . $_SESSION['mpass']) ?>" />

<?php
    // continue PHP code
?> 
```

# python - 在 python 中从一个班级跳到另一个班级是如何工作的？

> ID：14799069
> 
> 赞同：0
> 
> 时间：2013-02-10T15:03:40.700
> 
> 标签：python, class, object, inheritance, methods

这个问题基于 Zed Shaw 的*Learn Python the Hard Way*练习 43。在这个练习中，Zed 从一个班级跳到另一个班级，我的问题是这是如何工作的？有两件事让我感到困惑：

1.  事实上，返回“死亡”，返回类“死亡”。return 之前的 'death' 中的 'd' 是小写的，但实际的类名以大写的“D”开头。为什么这仍然有效？

2.  事实上，return 'death' 是用引号引起来的。为什么这行得通，但是：

    ```
    def function():
        Variable = "This is a variable."
        return 'variable'

    print function() 
    ```

只返回字符串“变量”。

一些例子是：

```
 print "putting him down, then jump through the Weapon Armory door."
        return 'laser_weapon_armory' 
```

这种选择导致了一个风格化的“LaserWeaponArmory”类。

```
 print "bridge where you must place it in the right spot."
     return 'the_bridge' 
```

这将返回一个类型为“TheBridge”的类。

**完整练习链接：**

[http://learnpythonthehardway.org/book/ex43.html](http://learnpythonthehardway.org/book/ex43.html)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:09:32.850

Python 没有进行任何此类转换。返回的字符串使用`Map`类手动映射到对象，该类在“您应该看到的内容”部分之前进行了描述。

这是实际使用的代码`Engine`：

```
next_scene_name = current_scene.enter()
current_scene = self.scene_map.next_scene(next_scene_name) 
```

`next_scene_name``Map`是一个字符串，下一行检索在for this string中定义的类。

# java - JNI 的“位置的无效内存访问..”

> ID：14799073
> 
> 赞同：0
> 
> 时间：2013-02-10T15:04:04.877
> 
> 标签：java, c++, macos, debugging, java-native-interface

我有一些用 C++ 编写的代码，我们称它为 A。它包含一些嵌套函数，因此要从 A 中生成二进制文件，我需要使用 -fnested-functions 标志。

现在我需要从 A 中创建一个 .jnilib 库，以便可以从 Java 调用它。但是，我出错了：

> 位置 0x105 的无效内存访问... rip=0x105..

我无法弄清楚原因是什么（我试图在链接以创建 .jnilib 库时包含 -fnested-functions 标志，但 g++ 不允许这样做）。

以前有没有人遇到过这个问题，或者可以建议如何调试（核心转储）这个问题？

我正在运行带有内置 Java 的 MacOS Lion。

# google-chrome - Chrome 扩展代码可在全屏时隐藏 Chrome for Mac 上的选项卡

> ID：14799076
> 
> 赞同：3
> 
> 时间：2013-02-10T15:04:20.723
> 
> 标签：google-chrome, google-chrome-extension

我想以编程方式启动全屏，这在 Chrome for Windows 上运行良好，但在 Chrome for Mac 上，选项卡和地址栏在“全屏”模式下仍然显示。Mac 上等效的“全屏模式”似乎被称为“演示模式”，但您如何以编程方式获得此模式（即不使用“视图”>“进入演示模式”（⇧+⌘+F）。要么，或者如何隐藏选项卡） /地址栏在全屏模式下？

我目前正在使用的代码：

```
 chrome.windows.getCurrent(null, function(window) {
    chrome.windows.update(window.id, {state: "fullscreen"});
  }) 
```

此问题中的相关讨论：[如何在 Google Chrome 中自动隐藏地址栏？](https://apple.stackexchange.com/questions/50762/how-to-auto-hide-the-address-bar-in-google-chrome)

# hibernate - Hibernate4 Proxool 0.9.1

> ID：14799080
> 
> 赞同：0
> 
> 时间：2013-02-10T15:04:43.830
> 
> 标签：hibernate, proxool

我使用 Proxool 0.9.1。

自 Hibernate 4.x 以来，ProxoolConnectionProvider 已移至 org.hibernate.service.jdbc.connections.internal 数据包（在 jar 中：${hibernate-release-4.x}/lib/optional/proxool/hibernate-proxool-4\. x.jar）。

当我从 3.x 升级到 4.x 时（配置没有改变），它总是告诉我

```
Exception: the url can not be null 
```

...所以我跟踪了Hibernate源代码，发现`public void configure(Properties props)`ProxoolConnectionProvider中的方法从来没有被调用过，所以ProxoolConnectionProvider中的所有属性都是null。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:53:38.877

这是由于 Hibernate 4.x 中的错误 ( [HHH-7289](https://hibernate.atlassian.net/browse/HHH-7289) )

您可以通过扩展 org.hibernate.service.jdbc.connections.internal.ProxoolConnectionProvider 并实现 org.hibernate.service.spi.Configurable 接口来解决此问题。例如：

```
public class ConfigurableProxoolConnectionProvider extends ProxoolConnectionProvider implements Configurable
    @Override
    public void configure( final Map configurationValues ) {
        final Map<?,?> configuration = (Map<?,?>) configurationValues;
        final Properties properties = new Properties( );
        for ( final Map.Entry entry : configuration.entrySet() ) {
            properties.setProperty(
                String.valueOf( entry.getKey() ),
                String.valueOf( entry.getValue() ) );
        }       
        super.configure( properties );
    }
} 
```

然后在“hibernate.connection.provider_class”下的休眠属性中引用扩展类（例如 xxx.yyy.ConfigurableProxoolConnectionProvider）。

# android - 谷歌地图 API v2

> ID：14799081
> 
> 赞同：0
> 
> 时间：2013-02-10T15:04:56.223
> 
> 标签：android, noclassdeffounderror, avd, google-maps-android-api-2

我正在尝试从[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)运行 Google 地图 API v2 的基本示例，但它不断崩溃并出现错误：

```
02-10 14:51:38.292: E/AndroidRuntime(898): FATAL EXCEPTION: main
02-10 14:51:38.292: E/AndroidRuntime(898): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.Activity.onCreateView(Activity.java:4716)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.Activity.setContentView(Activity.java:1881)
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.vogella.android.locationapi.maps.MainActivity.onCreate(MainActivity.java:23)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.Activity.performCreate(Activity.java:5104)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.os.Looper.loop(Looper.java:137)
02-10 14:51:38.292: E/AndroidRuntime(898):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-10 14:51:38.292: E/AndroidRuntime(898):  at java.lang.reflect.Method.invokeNative(Native Method)
02-10 14:51:38.292: E/AndroidRuntime(898):  at java.lang.reflect.Method.invoke(Method.java:511)
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-10 14:51:38.292: E/AndroidRuntime(898):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-10 14:51:38.292: E/AndroidRuntime(898):  at dalvik.system.NativeStart.main(Native Method) 
```

我的代码...

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.vogella.android.locationapi.maps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.vogella.android.locationapi.maps.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="{tried both browser api key and android api keys here}" />
    </application>

</manifest> 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

活动：

```
package com.vogella.android.locationapi.maps;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MainActivity extends Activity {
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    static final LatLng KIEL = new LatLng(53.551, 9.993);
    private GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG).title("Hamburg"));
    Marker kiel =
        map.addMarker(new MarkerOptions()
            .position(KIEL)
            .title("Kiel")
            .snippet("Kiel is cool")
            .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));

    // Move the camera instantly to hamburg with a zoom of 15.
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

    // Zoom in, animating the camera.
    map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
    }

} 
```

在使用目标 Google API 17 的 AVD 上运行它时，它立即崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:56:30.133

我注意到您没有为 Google Play 服务添加保护，Google Maps V2 api 需要它来运行。

该问题可能是由于 AVD 不支持 Google Play 服务。尝试在设备上运行。

也许这些可以帮助

[AVD 缺少 Google Play 服务](https://stackoverflow.com/questions/13784198/missing-google-play-services-from-avd)

[https://stackoverflow.com/a/14282347/1788333](https://stackoverflow.com/a/14282347/1788333)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T13:14:05.897

您应该扩展**FragmentActivity**而不是 Activity。

在您的活动中使用它： map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

并在**片段标记**中的 xml 中 写下：

class=" **com.google.android.gms.maps.SupportMapFragment** "

# ruby-on-rails - 如何让 Rubymine 使用 minitest 框架

> ID：14799086
> 
> 赞同：4
> 
> 时间：2013-02-10T15:05:28.220
> 
> 标签：ruby-on-rails, unit-testing, rubymine, minitest

无法配置 Rubymine 以正常使用 minitest。它总是给我抛出异常

> 无法将测试报告器附加到测试框架或测试框架意外退出

另外，我不能一个一个地运行测试（只有所有运行的测试工作），因为在这种情况下，上下文不会加载，我的所有类都是未确定的常量（`NameError: uninitialized constant <MyVariableType>`）。

我目前正在通过 Windows 7 使用 RubyMine 5。（Ruby 1.9.3）。

如果有人知道如何正确配置它，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T23:59:49.777

好的，不错！我终于解决了我所有的问题，现在我的 ruby​​mine 正在使用 minitest。

简短说明：

1.  阅读[本手册](http://www.jetbrains.com/ruby/webhelp/minitest.html)并非常小心地逐步完成所有工作

2.  如果有帮助，那就说“Yohuu！！！” 跳胜利的夹具，如果它仍然不能正常工作，请转到第 3 步

3.  将 'test-unit' gem 添加到您的 gem 文件并使用 bundler 更新它。

4.  创建测试时不要忘记添加`require 'test_helper'`添加文件的顶部。

**重要提示：您的测试方法名称应以“test_”模式开头，例如 test_my_supercool_method**

**UPD 1**：如果您使用 Ruby 2.0，***则不需要***在 Windows 平台上使用 win32Console gem，即使 jetbrains 文档说您应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T12:59:02.967

如果您遵循本指南 ( [https://www.jetbrains.com/help/ruby/2016.1/minitest.html?origin=old_help](https://www.jetbrains.com/help/ruby/2016.1/minitest.html?origin=old_help) )，***则无需***包含`minitest-reporters`在 Gemfile 中或具有以下内容：

```
require 'minitest/reporters'
MiniTest::Reporters.use! 
```

如果您使用 MiniTest 5 或更新版本，请在 test_helper.rb 文件中。我正在关注一个有点过时的教程并遇到了这个问题。请务必删除您的 .idea 目录并重新启动 RubyMine，您应该一切顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T17:49:44.977

我刚刚遇到了未定义的方法“format_backtrace”错误，并且在测试失败和崩溃时获得了绿色通过。

仔细阅读说明，如果您运行的是 minitest > 5.0，则不需要 minitest-reporters gem。

如果你包括它，也许就像我按照说明做的那样，那么你会得到错误，并且不会报告错误 - （在我的情况下，无论如何）。所以退出并从你的测试中删除需要的 minitest/reporters 和 MiniTest::Reporters.use！线和东西应该很好去。

# asp.net-mvc - 如何使用实体框架使用 Kendo UI ASP.NET MVC 制作简单的饼图？

> ID：14799089
> 
> 赞同：1
> 
> 时间：2013-02-10T15:05:40.383
> 
> 标签：asp.net-mvc, kendo-ui, telerik-mvc

我对剑道 UI 很陌生，更不用说 Telerik 了。我一直在尝试使用 Kendo ui Q3 从我的模型类制作饼图，但失败了，我可以找到一个很好的例子或教程。

我被困住了，很沮丧，因为我认为这会很容易，但事实并非如此......请帮忙。

* * *

这是我的模型课。

```
public class FinancialAccount
{
    public virtual int FinancialAccountId { get; set; }
    public virtual int UserId { get; set; }
    public virtual string AccountNumber { get; set; }
    public virtual ICollection<Loan> Loans { get; set; }
    public virtual ICollection<Payment> Payments { get; set; }
} 
```

我想对 Loan 类的 Loans 进行汇总，还想对 payment 类的付款进行汇总，并将整个事情显示在一个财务账户下。

这是我的控制器：

```
 public ActionResult Index()
    {

        var financialaccounts = db.FinancialAccounts.Include(a=>a.Loans).Include(b=>b.Payments);

        return View(financialaccounts.ToList());
    }

    public ActionResult MyFinances()
    {
        var financialaccounts = db.FinancialAccounts.Include(a=>a.Loans).Include(b=>b.Payments);
       // DataSourceResult result =
        return Json(financialaccounts, JsonRequestBehavior.AllowGet);
    } 
```

这是我的看法：

```
 @(Html.Kendo().Chart<FinancedSociety.Models.FinancialAccount>()
    .Name("chart")
    .Title("Pop In Accounts")
    .Legend(legend => legend
        .Position(ChartLegendPosition.Top)
    )
    .DataSource(ds => ds.Read(read => read.Action("MyFinances", "Financials")))
    .Series(series => {
        series.Pie(model => model.Payments.Sum(a => a.Amount), model => model.Payments.Select(b => b.Description).ToString());
                  // model => model.Loans.Sum(c=>c.Amount), model => model.Loans.Select(f=>f.Description).ToString());
    })
    .Tooltip(tooltip => tooltip
        .Visible(true)
        .Format("{0:N0}")
    ).Theme("metro")
) 
```

我收到此错误：绑定列需要字段或属性访问表达式。当我更改并且不尝试访问不是 FinancialAccount 模型类的集合的项目时，会得到一个空白区域，其中应该有图表

如果您知道任何完整的教程，它们可能会很有帮助。Kendo UI 对于像 Telerik 的 MVC 扩展这样的初学者没有很好的记录：[www.demos.telerik.com/aspnet-mvc/razor/chart/piechart](http://demos.telerik.com/aspnet-mvc/razor/chart/piechart?theme=metro) ?theme=metro ，这里他们显示了一个**视图**、**控制器**和**模型**，但至于Kendo ui 它只是视图和控制器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:45:46.867

你不能做 .Sum() 或 .Select() 部分。您需要创建一个为您执行此操作的模型（类），以便您只需返回已计算或在模型的此属性中计算的 model.PaymentsSum。不要气馁，这是每个人遇到的第一个问题。基本上，对于所有 Kendo 控件，您需要将它们传递给平面模型（TreeView 除外）。尽管您可以访问所引用的数据库对象的完整对象图，但在构建这些平面模型时。最后，这是您想要完成大部分 MVC 的方式，因此您可以使用 DataAnnotations 并将繁重的工作放在模型中。我希望我有所帮助，剑道有一些怪癖，但我在一些非常大型的高调项目中对它感到非常满意。

# iphone - 核心数据文档状态为 UIDocumentStateSavingError 时如何恢复。

> ID：14799090
> 
> 赞同：2
> 
> 时间：2013-02-10T15:05:54.877
> 
> 标签：iphone, ios, objective-c, uimanageddocument

我正在使用一个文件作为我的核心数据的存储库。尝试打开它时，文档状态设置为整数 5 (UIDocumentStateSavingError & UIDocumentStateClosed) 失败。如何通过解决错误或强制文档按原样打开来恢复此类文档。

# javascript - SkyScanner JavaScript API

> ID：14799092
> 
> 赞同：0
> 
> 时间：2013-02-10T15:06:11.473
> 
> 标签：javascript, documentation, skyscanner

我在我的网站上使用[SkyScanner 的航班搜索小部件。](http://api.skyscanner.net/api/ajax/snippets/search-panel/code-wizard.html)他们给您嵌入您网站的 JS 代码是：

```
<script src="http://api.skyscanner.net/api.ashx" type="text/javascript"></script>

<script type="text/javascript">
    skyscanner.load('snippets', '2');
    function main() {
        var snippet = new skyscanner.snippets.SearchPanelControl();
        snippet.setCurrency('EUR');
        snippet.setUrlParam('associateid', 'AFF_NTW_00014_00001');
        snippet.setUrlParam('pid', '6439791');
        snippet.setUrlParam('aid', '10644591');
        snippet.setClickUrl('http://www.jdoqocy.com/click-6439791-10644591?sid=&url=@@url@@');
        snippet.setShape('leaderboard');
        snippet.setDeparture('ie');
        snippet.draw(document.getElementById('snippet_searchpanel'));
    }
    skyscanner.setOnLoadCallback(main);
</script> 
```

通过检查原型，`SearchPanelControl`我发现了许多其他可能有用的功能，例如用于设置初始飞行日期。但是，我找不到该 API 的任何文档来解释每个函数期望的参数。

我尝试`skyscanner.snippets.SearchPanelControl`在文件中查找 的定义`http://api.skyscanner.net/api.ashx`，但它似乎不存在。有谁知道这是在哪里记录的，或者我可以在哪里找到它的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T11:27:12.423

所有小部件的底层 JavaScript 最近都已重新编写/更新，但接口未更改。

可以拉入的两个模块是`snippets`（对于 Flight Search 小部件）和`maps`（对于 Map 小部件）。这些模块中的每一个都有自己的配置选项。获取这些及其值的列表的最简单方法是查看[Create Your Widgets](http://skyscanneraffiliate.net/portal/en-GB/UK/Skytools/CreateYourWidgets)页面上的输出（然后单击**更新并**使用虚拟键生成代码）。

支持上述页面上记录的任何选项。当我们在小部件上实现新功能时，我们会定期添加新选项（我们计划很快添加一些，当我们这样做时我会在这里发表评论）。

正如您所说，底层 JavaScript 文件中有更多未记录的选项，非常欢迎您使用任何/所有这些选项，但我们不能保证它们的长期可用性。

这对我们来说是一个相对较新的领域，所以如果您有任何其他反馈，请告诉我们。

伊恩

# python - 如何获取列表中所有 dicts 键的列表？

> ID：14799093
> 
> 赞同：1
> 
> 时间：2013-02-10T15:06:20.913
> 
> 标签：python, python-2.7

假设我有一个如下所示的字典列表：

```
[{1: "a"}, {2: "b"}] 
```

如何获取列出的 dicts 的所有键的列表（意思是 [1, 2]）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T15:13:54.037

您可以使用`chain.from_iterable`：

```
>>> from itertools import chain
>>> l = [{1: "a"}, {2: "b"}]
>>> list(chain.from_iterable(l))
[1, 2] 
```

或者，如果您使用列表推导，您可以跳过`.keys()`. 在 python 2.x 中，您还可以避免以这种方式构建不必要的列表：

```
>>> [k for d in l for k in d]
[1, 2] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T15:42:57.457

如果你想避免额外的导入，你可以使用列表推导：

```
>>> l = [{1: 'a'}, {2: 'b'}]
>>> [k for d in l for k in d.keys()]
[1, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T15:33:49.093

如果您使用以下代码，则无需导入任何内容。

```
>>> map(lambda x: x.keys()[0], [{1: "a"}, {2: "b"}])
[1, 2] 
```

虽然不干净...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T15:46:44.813

非常简单的方法（不导入任何东西）：

```
d = [{1: "a"}, {2: "b"}]
keys = [l.keys() for l in d] 
```

但是，这会返回`[[1], [2]]`。

为避免这种情况，您可以将其更改为：

```
d = [{1: "a"}, {2: "b"}]
keys = []
for l in d:
    for key in l: # iterating through a dictionary always gives the key
        keys.append(key) 
```

上面的[列表理解](http://docs.python.org/2/tutorial/datastructures.html?highlight=list%20comprehension#list-comprehensions)等价物是：

```
d = [{1: "a"}, {2: "b"}]
keys = [key for l in d for key in l.keys()] 
```

您还可以使用[内置`d.update(d2)`功能](http://docs.python.org/2/library/stdtypes.html#dict.update)，它结合了字典：

```
d = [{1: "a"}, {2: "b"}]
new_dict = {}
for l in d: new_dict.update(l)
new_dict.keys() 
```

`[{1: 'a'}, {1: 'b'}]`如果两个字典有两个相同的键（如），这将覆盖其中一个键值对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T15:58:01.883

`sum((m.keys() for m in l), [])`如果你想要一份清单，

`set(sum((m.keys() for m in l), []))`如果你想要一套。

# iphone - 如何关闭 iPhone/iPod/iPad (CSS) 上的链接效果？

> ID：14799096
> 
> 赞同：1
> 
> 时间：2013-02-10T15:06:37.127
> 
> 标签：iphone, css, ipad, web-applications, ipod

信息：我想当您在 iPad/iPod/iPhone 上单击链接时，您已经看到这个黑框出现在链接周围。如果没有，请单击一个链接，当新页面加载时，您会看到它出现和消失。

我有一个将在所有平台上使用的 web 应用程序。我使用 p-tags 作为链接，因为我不想要很多 a-tag 默认功能和外观，并且链接是通过 JavaScript 执行的。

问题是，即使我使用 p-tags，当你点击它时，iPad 也会在链接周围显示这个烦人的黑框。黑框有助于告诉用户他们实际上在加载下一页时设法单击了链接，但是这个 web 应用程序从 localStorage 加载内容，所以不需要这个框会弄乱 GUI...

这个盒子怎么去掉？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:18:10.723

您为链接使用段落（p-tags）的原因对我来说完全是个谜。您可以通过 CSS 控制样式，无论它是什么标签。P标签用于段落，A标签用于链接。这是我能想到的 HTML 语义中最基本的东西。

您所指的框是“-webkit-tap-highlight-color”参见[http://css-infos.net/property/-webkit-tap-highlight-color](http://css-infos.net/property/-webkit-tap-highlight-color)

# windows-8 - Windows 应用商店应用程序：更改 AppBar 按钮的图标？

> ID：14799100
> 
> 赞同：2
> 
> 时间：2013-02-10T15:06:59.077
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

我想在我的 Windows Store 应用程序中更改 AppBar 按钮的图标。

我发现 AppBar 按钮具有如下所示的 XAML 标记：

```
<Style x:Key="PicturesAppBarButtonStyle"
       TargetType="ButtonBase" 
       BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId"
            Value="PicturesAppBarButton"/>
    <Setter Property="AutomationProperties.Name" 
            Value="Pictures"/>
    <Setter Property="Content" Value="&#xE158;"/>
</Style> 
```

内容值`&#xE158;`是什么意思？有没有对内置图标的参考？

另外我怎样才能显示我自己的不同图标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T15:13:51.167

内容是所用字体 "Segoe UI Symbol" 的 Unicode 字符编号。

请参阅 [LIST OF BUTTON SYMBOLS中的符号列表](http://www.istartedsomething.com/20120818/dev-windows-8-standard-appbar-button-styles/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T07:41:02.213

您可以使用 CharacterMap 来选择未在 StandardStyles.xaml 中定义的图标。字符映射为您提供十六进制代码，然后您可以在按钮样式中使用它。Segoe UI Symbol 中有大量的符号。

![在此处输入图像描述](../Images/ce506eed22cc95a187e61036e65f8e43.png)

如果要使用图像或路径，则必须重新编辑样式中的某些视觉状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T22:08:05.793

十六进制值`&#xE158;`是 Segoe UI 字体中的符号。这是按钮中心显示的符号。

我写了一篇关于[如何创建自己的应用程序栏按钮](http://www.nogginbox.co.uk/blog/app-bar-buttons-in-winrt)的博客文章，其中包括您可以使用的 Segoe UI 符号的参考，以及它们的十六进制值。

# perl - 使用 HTML::TreeBuilder 更新 HTML 文件中的列值

> ID：14799101
> 
> 赞同：0
> 
> 时间：2013-02-10T15:07:11.353
> 
> 标签：perl, html-tree

我有一个包含多个表的 HTML 文件（所有表都有相同的列数和相同的列名）。这些表格由其他 HTML 标记分隔。

对于每个表中的每一行，我想更改单元格 1 和单元格 3 的值。

这是我到目前为止所拥有的（感谢@depesz）：

```
#!/usr/bin/env perl
use strict;
use warnings;
use utf8;
use open qw( :std :utf8 );

use HTML::TreeBuilder;

my $input_file_name = shift;

my $tree = HTML::TreeBuilder->new();
$tree->parse_file( $input_file_name ) or die "Cannot open or parse $input_file_name\n";
$tree->elementify();

my @tables = $tree->find_by_tag_name( 'table' );
for my $table (@tables) {
    foreach my $row ($table->find_by_tag_name('tr')) {
        foreach my $column ($table->find_by_tag_name('td')) {
             # how do I change the text of first and 3rd column text to "removed"
        }
    }
}

print $tree->as_HTML();
exit; 
```

它非常适合遍历 HTML 文件中的所有行。我只是不确定如何更改第 1 列和第 3 列中的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:44:19.043

该[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)模块允许更方便地访问文档中的 HTML 节点。

以这个程序为例。它似乎可以满足您的需求。

```
use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder::XPath->new_from_file('anon.html');

for my $table ($tree->findnodes('//table')) {
  my $row = 0;
  for my $tr ($table->findnodes('//tr')) {
    $row++;
    for my $td ($tr->findnodes('td[position() = 1 or position() = 3]')) {
      $td->delete_content;
      $td->push_content("name$row");
    }
  }
}

print $tree->as_HTML('<>&', '  '); 
```

# google-calendar-api - Google Calendar API V3 FreeBusy 请求收到错误请求错误

> ID：14799107
> 
> 赞同：0
> 
> 时间：2013-02-10T15:07:45.300
> 
> 标签：google-calendar-api

我正在尝试使用 .NET 客户端 API V3 从我的 Google 日历中获取 FreeBusy 数据。

以下代码允许我使用服务身份验证登录并获取日历列表和日历设置。如图所示，我还可以获取事件。

为了完成这项工作，我与我的开发 ID 共享了我的日历：

<my-id>@developer.gserviceaccount.com

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Google.Apis.Calendar;
using Google.Apis.Calendar.v3;
using Google.Apis.Authentication;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using DotNetOpenAuth.OAuth2;
using System.Diagnostics;
using Google.Apis.Calendar.v3.Data;
using System.Security.Cryptography.X509Certificates;
using Google.Apis.Discovery;
using Google.Apis.Drive.v2;
using Google.Apis.Util;

namespace consoleGoogleResearch
{
    class Program
    {
        private const string SERVICE_ACCOUNT_EMAIL = "<your-value>@developer.gserviceaccount.com";
        private const string SERVICE_ACCOUNT_PKCS12_FILE_PATH = @"<path-to\<your-value>-privatekey.p12";

        /// <summary>
        /// Build a Calendar service object authorized with the service account.
        /// </summary>
        /// <returns>Drive service object.</returns>
        static CalendarService BuildCalendarService()
        {
            AssertionFlowClient client = new AssertionFlowClient(
                GoogleAuthenticationServer.Description, new X509Certificate2(SERVICE_ACCOUNT_PKCS12_FILE_PATH, "notasecret", X509KeyStorageFlags.Exportable))
            {
                Scope = CalendarService.Scopes.Calendar.GetStringValue(),
                ServiceAccountId = SERVICE_ACCOUNT_EMAIL,
            };
            OAuth2Authenticator<AssertionFlowClient> authenticator = new OAuth2Authenticator<AssertionFlowClient>(client, AssertionFlowClient.GetState);
            return new CalendarService(authenticator);
        }

        public static void Main(string[] args)
        {
            var service = BuildCalendarService();

            // Get the calendar service
            Google.Apis.Calendar.v3.CalendarListResource.ListRequest clrq = service.CalendarList.List();
            var result = clrq.Fetch();

            // Prove we can get the settings.
            SettingsResource.ListRequest slr = service.Settings.List();
            var sr = slr.Fetch();

            try
            {
                Console.WriteLine("Calendars: ");
                foreach (CalendarListEntry calendar in result.Items)
                {
                    Console.WriteLine("{0}", calendar.Id);
                    Console.WriteLine("\tAppointments:");
                    Google.Apis.Calendar.v3.EventsResource.ListRequest elr = service.Events.List(calendar.Id);
                    var events = elr.Fetch();
                    if (events.Items != null)
                    {
                        foreach (Event e in events.Items)
                        {
                            Console.WriteLine("\tSummary: {0}, Location: {1}", e.Summary, e.Location);
                            if (e.IsAllDayEvent())
                            {
                                Console.WriteLine("\t\tAll Day: {0}", e.Start.GetDateTime().ToLongDateString());
                            }
                            else
                            {
                                Console.WriteLine("\t\tFrom: {0}", e.Start.GetDateTime());
                                Console.WriteLine("\t\tTo: {0}", e.End.GetDateTime());
                            }
                            if (e.Attendees != null)
                            {
                                foreach (var att in e.Attendees)
                                {
                                    Console.WriteLine("Attendee:\t\t\t{0}<{1}>", att.DisplayName, att.Email);
                                }
                            }
                            Console.WriteLine();
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                log.DebugFormat("Error: {0}", ex.Message);
            }

            // Attempt to get free busy data.
            FreebusyResource.QueryRequest fbq = service.Freebusy.Query(new FreeBusyRequest());

            FreeBusyRequestItem c = new FreeBusyRequestItem();
            c.Id = "<your calendar id>";
            fbq.Body.Items = new List<FreeBusyRequestItem>();
            fbq.Body.Items.Add(c);
            fbq.Body.TimeZone = "Europe/London";
            fbq.Body.TimeMin = "2013-01-101T00:00:00.000Z";
            fbq.Body.TimeMax = "2013-01-301T00:00:00.000Z";

            // This call fails with global bad request
            var fbres = fbq.Fetch();

            Console.ReadKey();
        }
    }

    static internal class Extensions
    {
        static internal DateTime GetDateTime(this EventDateTime edt)
        {
            if (String.IsNullOrEmpty(edt.DateTime))
            {
                if (String.IsNullOrEmpty(edt.Date))
                {
                    return DateTime.MinValue;
                }
                else
                {
                    return DateTime.Parse(edt.Date);
                }
            }
            else
            {
                return DateTime.Parse(edt.DateTime);
            }
        }

        static internal Boolean IsAllDayEvent(this Event e)
        {
            return (e.Start.DateTime == null && e.Start.Date != null);
        }
    }
} 
```

但是，尝试获取空闲忙碌信息的代码总是会收到“错误请求”错误。

我已经检查了使用提琴手发送的请求，据我所知它是正确的。

```
POST https://www.googleapis.com/calendar/v3/freeBusy?alt=json&prettyPrint=true HTTP/1.1
Authorization: Bearer <removed>
Content-Type: application/json; charset=utf-8
User-Agent: ConsoleApplication1 google-api-dotnet-client/ Win32NT/6.1.7601.65536 (gzip)
Host: www.googleapis.com
Content-Length: 144
Accept-Encoding: gzip, deflate

{"items":[{"id":"apps.vivid@gmail.com"}],"timeMax":"2013-01-301T00:00:00.000Z","timeMin":"2013-01-101T00:00:00.000Z","timeZone":"Europe/London"} 
```

谁能告诉我为什么我收到错误的请求错误，更重要的是如何解决它？

非常感谢

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T11:08:03.057

答案在上面的评论中，我弄错了日期。

# c# - 将 xml 文件保存在用户给定的路径并再次从那里加载

> ID：14799111
> 
> 赞同：2
> 
> 时间：2013-02-10T15:08:19.337
> 
> 标签：c#, xml, filepath

我正在尝试学习如何在 xml 文件中保存日期，并且当我在代码本身中提供路径（例如 C:\Users\Name\Documents）时已经可以做到这一点。但是我希望用户在第一次打开程序时选择一次文件路径，然后永远使用这个文件路径。

到目前为止，我已经那么远了：

```
string xmlFilePath = "C:\\Users\\Name\\Documents\\Visual Studio 2012\\Projects\\ToDoList\\xmlList.xml";
XmlTextWriter xWriteList = new XmlTextWriter(xmlFilePath, Encoding.UTF8); 
```

然后我有一大堆编写命令，它们都运行良好。只是为了澄清我的问题：当它在我的示例代码中显示“C:\Users 等时，我想要用户选择一次的文件路径。我知道我可以让用户使用 FileDialog 选择文件路径，但我没有'不知道如何以某种方式保存此路径。显然我不能再次将其保存在 xml 中，因为用户将不得不再次选择该路径。

我希望你能理解我的问题，并感谢所有提前回答的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:14:41.603

您需要从[`SaveFileDialog.FileName`](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filename.aspx)属性中获取文件并将其保存在类变量中。

这将在程序运行时持续存在。

要在会话之间保持这种状态，您需要将其保存在用户硬盘上的某个位置。您可以通过使用应用程序[配置或设置文件](http://msdn.microsoft.com/en-us/library/1xtk877y%28v=vs.110%29.aspx)来做到这一点。

在此设置一个字符串属性，然后将所选文件名保存到该属性。

加载时：

```
globalFileName = Properties.Settings.Default.FileName; 
```

关闭应用程序时：

```
Properties.Settings.Default.FileName = globalFileName;
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:14:51.343

听起来您需要`ApplicationSettingsBase`派生设置。

```
 //Application settings wrapper class 
    sealed class FormSettings : ApplicationSettingsBase
    {
        [UserScopedSettingAttribute()]
        public string FilePath
        {
            get { return (string )(this["FilePath"]); }
            set { this["FilePath"] = value; }
        }
    } 
```

像这样使用：

```
<on form load handler>
frmSettings1 = new FormSettings();
if(frmSettings1.FilePath==null)
{
    frmSettings1.FilePath = PromptForLocation();
}

<form exit handler>
frmSettings1.Save(); 
```

哪里`PromptForLocation`好。提示位置，像你一样使用“可以让用户选择一个文件路径`FileSaveDialog`”

应该注意的是，这将提供一个“每个用户”设置，该设置存储在用户配置文件目录中。如果其他用户登录，他们将获得此设置的自己的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:02:38.410

您需要的是一个设置文件，它可以是一个 XML 文件。*程序专用*的设置文件。它总是在同一个地方，所以你的程序知道它在哪里。它也可以是用户特定的。

我创建了一个类库来包含在我所有的公司项目中，它有一个类文件，公司名称，所以它显然是关于公司在 Program Files 目录中的位置，以及在 Common 目录中存储设置和 User 的目录来存储设置。

因此，我将展示这三个，但您想要的将是用户的设置目录或 Common。使用程序目录的问题在于它可能在`C:\Program Files`其中，除非您的程序以管理员身份运行，否则操作系统不会让您在那里写入。

公共目录和文件：

```
public const string Company = "YourCompanyName";

/// <summary>
/// Common to all users Company data directory.
/// </summary>
public static DirectoryInfo CommonDataDirectory
{
    get
    {
        string env = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
        string path = Path.Combine(env, Company);
        return new DirectoryInfo(path);
    }
}

/// <summary>
/// Common to all users data file.
/// </summary>
/// <param name="name"></param>
/// <returns></returns>
public static FileInfo CommonDataFile(params string[] path)
{
    string fullName = Paths.Combine(CommonDataDirectory.FullName, path);
    return new FileInfo(fullName);
} 
```

用户的设置目录：

```
/// <summary>
/// User's common data directory
/// </summary>
/// <returns></returns>
public static DirectoryInfo UserDataDirectory
{
    get
    {
        string env = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
        string path = Path.Combine(env, Company);
        return new DirectoryInfo(path);
    }
}

/// <summary>
/// File in user's common data directory
/// </summary>
/// <param name="filename"></param>
/// <returns></returns>
public static FileInfo UserDataFile(params string[] path)
{
    return new FileInfo(Paths.Combine(UserDataDirectory.FullName, path));
} 
```

程序目录：（程序/可执行文件的运行位置）

```
public static DirectoryInfo ProgramDirectory
{
    get
    {
        string executablePath = System.Windows.Forms.Application.StartupPath;
        return new DirectoryInfo(executablePath);
    }
}

/// <summary>
/// Get's the file in the exectuable's directory, which would be
/// ProgramFiles/applicationName/filename
/// </summary>
public static FileInfo ProgramFile(params string[] path)
{
    string file = Paths.Combine(ProgramDirectory.FullName, path);
    return new FileInfo(file);
} 
```

这是上面代码中引用的[Paths 类。](https://gist.github.com/ChuckSavage/4750630)

另一件事是，您将希望从这些为您的特定程序创建一个子目录。这样您的不同程序可以具有相同名称的文件`like Settings.xml`并且不会相互冲突。

我有一个 ApplicationBase 类，它将 Company 类用于特定于应用程序的位置。例子：

```
/// <summary>
/// The application's name
/// </summary>
public static string ApplicationName
{
    get { return System.Windows.Forms.Application.ProductName; }
}

/// <summary>
/// Common to all users, application's data directory.
/// </summary>
public static DirectoryInfo CommonDataDirectory
{
    get
    {
        string fullName = Path.Combine(Company.CommonDataDirectory.FullName, ApplicationName);
        return new DirectoryInfo(fullName);
    }
}

/// <summary>
/// Common to all users, file in application's data directory.
/// </summary>
/// <param name="name"></param>
/// <returns></returns>
public static FileInfo CommonDataFile(params string[] name)
{
    string fullName = Paths.Combine(CommonDataDirectory.FullName, name);
    return new FileInfo(fullName);
} 
```

我让你来创建另外两个，用户和程序的目录属性和文件方法。

# javascript - 带有简单 redis 应用程序的 Node.js 抛出“未处理的错误”

> ID：14799112
> 
> 赞同：0
> 
> 时间：2013-02-10T15:08:32.990
> 
> 标签：javascript, node.js, redis

[我想从http://expressjs.com/guide.html](http://expressjs.com/guide.html)尝试示例应用程序，所以我写了以下内容：

```
var express = require('express')
var redis = require('redis')
var db = redis.createClient();
var app = express();

app.use(function(req, res, next){
  var ua = req.headers['user-agent'];
  db.zadd('online', Date.now(), ua, next);
});

app.use(function(req, res, next){
  var min = 60 * 1000;
  var ago = Date.now() - min;
  db.zrevrangebyscore('online', '+inf', ago, function(err, users){
    if (err) return next(err);
    req.online = users;
    next();
  });
});

app.get('/', function(req,res){
  res.send(req.online.length + ' users online');
});

app.listen(3000); 
```

但是在尝试启动它之后，我得到了

```
events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Redis connection to 127.0.0.1:6379 failed - connect ECONNREFUSED
    at RedisClient.on_error (/home/USER/programming/nodejs/express1/node_modules/redis/index.js:148:24)
    at Socket.<anonymous> (/home/USER/programming/nodejs/express1/node_modules/redis/index.js:83:14)
    at Socket.EventEmitter.emit (events.js:96:17)
    at Socket._destroy.self.errorEmitted (net.js:329:14)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我使用`node.js`0.8.18 和以下软件包：

```
app@0.0.1 /home/USER/programming/nodejs/express1
├─┬ express@3.1.0
│ ├── buffer-crc32@0.1.1
│ ├── commander@0.6.1
│ ├─┬ connect@2.7.2
│ │ ├── bytes@0.1.0
│ │ ├── formidable@1.0.11
│ │ ├── pause@0.0.1
│ │ └── qs@0.5.1
│ ├── cookie@0.0.5
│ ├── cookie-signature@0.0.1
│ ├── debug@0.7.2
│ ├── fresh@0.1.0
│ ├── methods@0.0.1
│ ├── mkdirp@0.3.3
│ ├── range-parser@0.0.4
│ └─┬ send@0.1.0
│   └── mime@1.2.6
└── redis@0.8.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:22:43.927

检查reddis的端口。如果正确，请在任何可能阻止它的防火墙中为该端口提供通配符。检查是否有其他东西正在使用该端口。检查您的连接设置。

# javascript - 使用滑块时如何停止视频播放？

> ID：14799115
> 
> 赞同：1
> 
> 时间：2013-02-10T15:08:40.743
> 
> 标签：javascript, jquery, html, jwplayer, jquery-slider

[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/Text3.php)

上面我有一个应用程序，其中包含滑块中的视频。滑块中有 2 个视频。请播放第一个视频，然后在不停止视频的情况下，单击滑块中的“下一步”以滑动到下一个视频并播放该视频。您可以看出两个视频同时播放。

我的问题是是否可以在滑动视频时停止播放？

我正在使用 jwplayer 播放视频和基本的 jquery 滑块作为滑块。

代码如下：

```
 <div id="banner-video_<?php echo $key; ?>">
 <ul class="bjqs">
<?php
foreach ($arrVideoFile[$key] as $v) { ?>
<li><div id="myElement-<?php echo $key.'-'.$i; ?>">Loading the player...

<script type="text/javascript">

jwplayer("myElement-<?php echo $key.'-'.$i; ?>").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>",
    width: 480,
    height: 270
});

<?php $i++; ?>
</script>

</div>
</li>
<?php } ?>
</ul>
</div>

         <script type="text/javascript">

jQuery(document).ready(function($) {

         $('#banner-video_<?php echo $key; ?>').bjqs({
            animtype      : 'slide',
            height        : 300,
            width         : 700,
            responsive    : true,
            randomstart   : false,
            automatic : false
          });  
          });

          </script>

<?php

    }
        //end:procedure video
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:59:39.353

当单击导航文本“perv”和“next”时，JQuery 插件“basic-jquery-slider”没有事件通知，但您可以使用该`data-direction`属性挂钩它们。

根据[JwPlayer 文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16022/controlling-the-player-using-javascript/)，您可以像使用一样驱动视频`jwplayer()`

[API](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference)描述了所有可能性

```
$('[data-direction="forward"]').click(function(){
    jwplayer().pause();
});

$('[data-direction="previous"]').click(function(){
    jwplayer().pause();
}); 
```

我测试使用控制台暂停视频，它可以工作。将点击事件绑定到按钮也应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:04:41.693

您应该在 bjqs 的源代码中添加暂停命令，尝试使用未缩小的版本，它会更容易修改，当您对它感到满意时，您可以再次缩小它。所以在第 422 行的 bjqs 中你会发现

```
 $c_wrapper.on('click','a',function(e){

            e.preventDefault();
            var direction = $(this).attr('data-direction');

            if(!state.animating){

                if(direction === vars.fwd){
                    go(vars.fwd,false);
                }

                if(direction === vars.prev){
                    go(vars.prev,false);
                }

            }

        }); 
```

添加命令以在单击这样的链接时暂停所有播放器（使用示例中的代码）：

```
 $c_wrapper.on('click','a',function(e){

            e.preventDefault();
            jwplayer("myElement-70-0").pause();
            jwplayer("myElement-70-1").pause();
            var direction = $(this).attr('data-direction');

            if(!state.animating){

                if(direction === vars.fwd){
                    go(vars.fwd,false);
                }

                if(direction === vars.prev){
                    go(vars.prev,false);
                }

            }

        }); 
```

如果你想让它动态化，你可以循环遍历滑块的元素..只要你使用规则来命名视频元素，就像这样

```
 $('li.bjqs-slide').each( function(index) {
                jwplayer("myElement-70-"+index).pause();
            }); 
```

如果您想要不包含视频的幻灯片，只需向 jwplayer 元素添加一个类并使用每个类，所以假设您的所有 jwplayer 元素都有类 .playjw，您可以执行类似的操作

```
 $('.playjw').each( function(index) {
                jwplayer("myElement-70-"+index).pause();
            }); 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:59:00.103

触发幻灯片动画时，您需要调用`jwplayer('player').pause();`或`jwplayer('player').stop();`。

# mysql - 使用 MYSQL 将字符串长度限制为最小字符

> ID：14799117
> 
> 赞同：0
> 
> 时间：2013-02-10T15:08:53.537
> 
> 标签：mysql, sql

我需要从数据库中选择一些主题。我使用下面的代码来选择逗号分隔的主题列表。

```
GROUP_CONCAT( DISTINCT s.subject_name SEPARATOR ', ') AS subjects, 
```

没关系。它为我工作。它的输出是这样的。

> 数学、生理学、商业与会计研究、天主教

现在我需要将此字符串限制为 35 个字符，并且需要在字符串末尾添加“...”。

是这样的。

```
Mathematics, Physiology, Business... 
```

那么，我可以知道选择查询时是否可以与mysql一起使用？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:12:46.107

尝试这样的事情，

```
SELECT  IF(CHAR_LENGTH(subjects) > 35, CONCAT(LEFT(subjects,35), '...'), subjects),
        ...
FROM
(
    SELECT  GROUP_CONCAT( DISTINCT s.subject_name SEPARATOR ', ') AS subjects,
            ...
    FROM    tableName
    GROUP   BY ...
) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/7218)

我宁愿使用而`CHAR_LENGTH`不是`LENGTH`在获取字符长度时使用，因为...

*   [CHAR_LENGTH 与 LENGTH](https://stackoverflow.com/questions/1734334/mysql-length-vs-char-length)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:14:27.280

您可以使用一个`CASE`表达式来检查[`LENGTH()`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_length). `subjects`如果它超过 35 个字符，那么您可以应用[`SUBSTRING()`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring)并在末尾`CONCAT()`获取新值：`...`

```
select  
   case 
     when length(subjects) > 35
     then concat(substr(subjects, 1, 35), '...')
     else subjects end as subjects
from
(
  select GROUP_CONCAT( DISTINCT subject_name SEPARATOR ', ') AS subjects
  from yourtable
) src 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/b2c50/6)。

这将返回：

```
|                               SUBJECTS |
------------------------------------------
| Mathematics, Physiology, Business &... | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:13:51.993

只需将其子串/连接到 group_concat 结果的末尾

```
concat(substring(group_concat(distinct s.subject_name SEPARATOR ', '), 35), '...') AS subjects, 
```

但是，通常在使用框架时在应用程序中执行此操作会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:19:02.690

将结果存储在变量中并在 if 子句中检查它是否超过 32 个字符。如果是这样，请选择其前 32 个字符并将“...”连接到它。

# jquery - 视频仅在 IE 中结束后关闭 FancyBox-iframe 时出错

> ID：14799118
> 
> 赞同：0
> 
> 时间：2013-02-10T15:08:55.153
> 
> 标签：jquery, magento, iframe, fancybox

我在 Magento 1.6.2 上。使用 FancyBox 1.3.4。

在 IE8 中，我单击 FancyBox 显示的关闭按钮，我收到下一个错误：我不允许插入图像 si 我必须列出错误：

*   此页面上的脚本出现错误
*   线路：1
*   字符：1
*   错误：访问被拒绝
*   代码：0
*   网址： [http ://www.ingenium.ro/jwplayer/player.swf?allowscriptaccess=always&skin=/jwplayer/skin/slim.zip&width=746&height=430&file=/video/ServerRack.flv&controlbar=over&](http://www.ingenium.ro/jwplayer/player.swf?allowscriptaccess=always&skin=/jwplayer/skin/slim.zip&width=746&height=430&file=/video/ServerRack.flv&controlbar=over&)
*   您想继续在此页面上运行脚本吗？
*   是/否

在 Chrome、Firefox、Opera、Safari 中我的网站没有显示任何错误，视频可以随时打开和关闭。请给我一些线索如何解决这个问题。

FancyBox 嵌入代码：

```
jQuery("a[rel=iframe_flv_digitus]").fancybox({
    'type': 'iframe',
    'width': 746,
    'height': 430,
    'transitionIn' : 'elastic',
    'transitionOut' : 'elastic',
    'overlayColor': '#000000',
    'overlayOpacity': '0.4',
    'padding' : 0,
    'wmode': 'transparent',
    'scrolling': 'no',
    centerOnScroll: true
}); 
```

调用视频：

```
<p><a rel="iframe_flv_digitus" href="/jwplayer/player.swf?allowscriptaccess=always&amp;skin=/jwplayer/skin/slim.zip&amp;width=726&amp;height=410&amp;file=/jwplayer/ServerRack.flv"&amp;controlbar=over&amp;autostart=true"><img src="/media/wysiwyg/biometrics/label_view_short_video-en_100.png" alt="digitus" /></a></p> 
```

可以看到问题的我的页面： [MyPage](http://www.ingenium.ro/db-nexus-networked-access-control-for-managing-monitoring-and-reporting.html?___store=gb&___from_store=ro)

请向下滚动并点击：

*   观看短片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:00:39.193

调试完你的网页后，js文件scp_product_extension.js第321行有错误：

```
if(productId) {
        new Ajax.Updater(destElement, imgUrl, {
            method: 'get',

            /* Cristian - inlocuiesc linia de mai jos cu cea de sub ea pentru ca in SCP dupa alegerea unei optiuni sa pot descide specificatiile in lightbox */
            /*evalScripts: false,*/
            evalScripts: true,
            /* end Cristian*/

            /*onComplete: function() {
                //Product.Zoom needs the *image* (not just the html source from the ajax)
                //to have loaded before it works, hence image object and onload handler
                if ($('image')){
                    var imgObj = new Image();
                    /*imgObj.onload = function() {product_zoom = new Product.Zoom('image', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint'); };
                    imgObj.src = $('image').src; ----- Cristian - am renuntat la aceasta instructiune pentru a putea utiliza lightbox in SCP dupa selectarea unei optiuni
                } else {
                    destElement.innerHTML = defaultZoomer;
                    /*product_zoom = new Product.Zoom('image', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint')----- Cristian - am renuntat la aceasta instructiune pentru a putea utiliza lightbox in SCP dupa selectarea unei optiuni
                }
          }
        }*/);
   } else {
    destElement.innerHTML = defaultZoomer;
    /*product_zoom = new Product.Zoom('image', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint');----- Cristian - am renuntat la aceasta instructiune pentru a putea utiliza lightbox in SCP dupa selectarea unei optiuni*/
} 
```

};

将此条件块更改为：

```
if(productId) {
        new Ajax.Updater(destElement, imgUrl, {
            method: 'get',
            /* Cristian - inlocuiesc linia de mai jos cu cea de sub ea pentru ca in SCP dupa alegerea unei optiuni sa pot descide specificatiile in lightbox */
            /*evalScripts: false,*/
            evalScripts: true
            /* end Cristian*/

            /*onComplete: function() {
                //Product.Zoom needs the *image* (not just the html source from the ajax)
                //to have loaded before it works, hence image object and onload handler
                if ($('image')){
                    var imgObj = new Image();
                    /*imgObj.onload = function() {product_zoom = new Product.Zoom('image', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint'); };
                    imgObj.src = $('image').src; ----- Cristian - am renuntat la aceasta instructiune pentru a putea utiliza lightbox in SCP dupa selectarea unei optiuni
                } else {
                    destElement.innerHTML = defaultZoomer;
                    /*product_zoom = new Product.Zoom('image', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint')----- Cristian - am renuntat la aceasta instructiune pentru a putea utiliza lightbox in SCP dupa selectarea unei optiuni
                }
          }*/
        });
   } else {
    destElement.innerHTML = defaultZoomer;
} 
```

# jquery - 如何使用 jquery 找到 i 类活动按钮？

> ID：14799122
> 
> 赞同：1
> 
> 时间：2013-02-10T15:09:21.633
> 
> 标签：jquery

我有一个垂直按钮组（引导程序），我需要一个函数来查找哪些按钮是活动的（具有活动类）并创建一个包含活动按钮的 i 类的数组。按钮组如下所示：-

```
<div class="btn-group-vertical" data-toggle="buttons-checkbox">
  <button type="button" class="btn customwidth"><i class="icon-rss"></i> news</button>
  <button type="button" class="btn customwidth active"><i class="icon-bullhorn"></i> opinion</button>
  <button type="button" class="btn customwidth active"><i class="icon-lightbulb"></i> research</button>
  <button type="button" class="btn customwidth"><i class="icon-signal"></i> stats</button>
  <button type="button" class="btn customwidth active"><i class="icon-info-sign"></i> how to...</button>
  <button type="button" class="btn customwidth"><i class="icon-desktop"></i> platform/app</button>  
  <button type="button" class="btn customwidth"><i class="icon-cloud"></i> tool</button>
  <button type="button" class="btn customwidth"><i class="icon-minus-sign"></i> uncategorised</button>    
</div> 
```

此功能将通过单击任何按钮来触发。

请知道我将如何做到这一点。

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:11:54.200

```
var arr = [];
$('button.active').each(function(){ arr.push($('i', this)[0].className) }); 
```

或者

```
var arr = $('button.active i').map(function() { return this.className }).get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:15:37.560

尝试这个：

```
$(function(){
    var array = [];
    $('.btn-group-vertical').find('button.active > i').map(function(){
        array.push(this.className);
    });
}); 
```

[演示](http://jsfiddle.net/FloydPink/AUZDy/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:08:42.177

```
function dystroysFunction()
{
    return $('button.active i').map(function() { return this.className }).get();
}

setTimeout(function(){dystroysFunction()},1000); 
```

我正在使用dystroy的代码（显然是为他+1）结合setTimeout来帮助你。

# java - 使用tomcat7部署并自动编译servlet

> ID：14799124
> 
> 赞同：0
> 
> 时间：2013-02-10T15:09:29.523
> 
> 标签：java, servlets, tomcat7

我无法让一个简单的 Java servlet 在 tomcat7 下运行（从 ubuntu 存储库全新安装）。

它是一个带有 .java 文件的单个 .java 文件`@WebServlet("/TestServlet")`。我将它放入`/var/lib/tomcat7/webapps/TestServlet/WEB-INF`并希望 Tomcat 能够识别并自动编译它（同样，当我更改源文件时）。如何以简单的方式进行设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:21:59.140

您必须使用 java 编译器（或 IDE）编译您的代码。`*.class`然后在 servlet 容器（在您的情况下为 Tomcat）下部署文件。

类文件必须在您的`WEB-INF/classes`目录下。如果你的类属于类似包，`com.myservlet`并且它的名称被`HellowServlet`放入文件中`/var/lib/tomcat7/webapps/TestServlet/WEB-INF/com/myservlet/HelloServlet.class`

编辑：

如果您确实想让 tomcat*编译*您的 servlet，请编写 JSP。这是 JSP 的一个关键特性：它可以作为源代码部署，并由容器自动编译为 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:00:39.877

使用 Eclipse IDE 并单击“添加服务器”以添加 TomCat 服务器。它将直接工作

# android - android检查移动网络是否在设置中被检查

> ID：14799126
> 
> 赞同：0
> 
> 时间：2013-02-10T15:09:34.393
> 
> 标签：android

我想知道是否检查了设置中的移动标志。

有了这个线程，我可以检查 3g 是否连接，但我看不到启用它的复选框是否在设置中启用

[如何检查是否启用了 wifi/3g？](https://stackoverflow.com/questions/5782790/how-to-check-if-wifi-3g-is-enabled) [Google Android - 如何判断 3g 和 2g 是否开启](https://stackoverflow.com/questions/763972/google-android-how-to-figure-out-if-3g-and-2g-is-turned-on) [Android：如何检查 3G 是否开启？](https://stackoverflow.com/questions/13743477/android-how-to-check-whether-3g-is-enabled-or-not)

我怎样才能检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:19:08.533

如果互联网连接可用，则此函数返回 true，否则返回 false。

```
public boolean getConnection()
        {
            ConnectivityManager manager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
            boolean is3g = manager.getNetworkInfo(
                        ConnectivityManager.TYPE_MOBILE)
                                    .isConnectedOrConnecting();
            boolean isWifi = manager.getNetworkInfo(
                                    ConnectivityManager.TYPE_WIFI)
                                    .isConnectedOrConnecting();

                        Log.v("",is3g + " ConnectivityManager Test " + isWifi);
                        if (!is3g && !isWifi) {
                            Toast.makeText(getApplicationContext(),"Your internet connction is OFF",Toast.LENGTH_LONG).show();
                            return false;

                        } else 
                        {
                            Toast.makeText(login.this, "Connected",Toast.LENGTH_LONG).show();
                            return true;

                        }
    } 
```

如果这不满足上述答案，那么您可以使用 try-catch。如果您没有收到数据，则表示您的连接有问题。

# segmentation-fault - LLVM 在 getAnalysis 上传递段错误 ()

> ID：14799127
> 
> 赞同：7
> 
> 时间：2013-02-10T15:09:34.603
> 
> 标签：segmentation-fault, llvm

我正在尝试为需要支配树的 LLVM 3.2 优化器构建通行证。这应该很容易通过`DominatorTree`从 PassManager 请求分析结果来实现，但即使是这个简单的示例也会崩溃。

我究竟做错了什么？

```
namespace {
  struct Mypass : public FunctionPass { 
    static char ID;

    Mypass() : FunctionPass(ID) { } 

    virtual void getAnalysisUsage(AnalysisUsage &AU) const {
      AU.addRequired<DominatorTree>();
    }

    virtual bool runOnFunction(Function &F) {
      DominatorTree& DT = getAnalysis<DominatorTree>(F);
      return false;
    }
  };
}

char Mypass::ID = 0;
static RegisterPass<Mypass> X("mypass", "My test analysis", true, true); 
```

当与

`opt --load mypass.so -mypass --debug-pass=Structure test.bc`

它立即出现段错误

```
Pass Arguments:  -targetlibinfo -datalayout -domtree -mypass -preverify -domtree -verify
Target Library Information
Data Layout
  ModulePass Manager
    FunctionPass Manager
      Dominator Tree Construction
      My test analysis
      Preliminary module verification
      Dominator Tree Construction
      Module Verifier
0  libLLVM-3.2.so.1 0x00007f2d8172a1df
1  libLLVM-3.2.so.1 0x00007f2d8172a649
2  libpthread.so.0  0x00007f2d80842bd0
3  mypass.so      0x00007f2d7f63deb9 llvm::DominatorTree& llvm::Pass::getAnalysisID<llvm::DominatorTree>(void const*, llvm::Function&) + 217
4  mypass.so      0x00007f2d7f63ddce llvm::DominatorTree& llvm::Pass::getAnalysis<llvm::DominatorTree>(llvm::Function&) + 94
5  mypass.so      0x00007f2d7f63dc38
6  libLLVM-3.2.so.1 0x00007f2d811e0e3f llvm::FPPassManager::runOnFunction(llvm::Function&) + 575
7  libLLVM-3.2.so.1 0x00007f2d811e0e83 llvm::FPPassManager::runOnModule(llvm::Module&) + 51
8  libLLVM-3.2.so.1 0x00007f2d811e0ba4 llvm::MPPassManager::runOnModule(llvm::Module&) + 484
9  libLLVM-3.2.so.1 0x00007f2d811e44bb llvm::PassManagerImpl::run(llvm::Module&) + 107
10 opt              0x000000000040d606 main + 4230
11 libc.so.6        0x00007f2d80189ea5 __libc_start_main + 245
12 opt              0x000000000040db41
Stack dump:
0\.  Program arguments: opt --load mypass.so -mypass --debug-pass=Structure 
1\.  Running pass 'Function Pass Manager' on module '<stdin>'.
2\.  Running pass 'My test analysis' on function '@const_expr'
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:03:30.070

更改`DominatorTree& DT = getAnalysis<DominatorTree>(F);`为`DominatorTree& DT = getAnalysis<DominatorTree>();`似乎有效。

# c# - 实体框架和 WCF 数据成员

> ID：14799133
> 
> 赞同：1
> 
> 时间：2013-02-10T15:10:17.020
> 
> 标签：c#, wcf, entity-framework

1)

我有一个与 WCF 一起使用的实体框架 (v.5) 项目。

我的数据库有一个 Account 表，因此我有一个“Account”实体框架对象。我想公开一个方法：

```
 AddAccount(Account a) 
```

Account Parameter 是从我的数据库生成的实体框架对象。

每次我尝试使用此服务时，Account 的属性都是空的，我不明白为什么。

这是我的代码示例：

周转基金：

界面：

```
[OperationContract(Name = "AddAccount")]
string AddAccount(Account Account); 
```

实施：

```
public string AddAccount(Account newAccount)
{
    myContext db=new myContext();
    db.Accounts.Add(newAccount);
    db.SaveChanges();
    return "something";
} 
```

Account Class 由 EF 生成，具有`int`“id”字段和`DateTime`“Created”字段。

我的问题是，为什么“newAccount”参数是空的？

2)

据我所知，公开具有复杂参数的方法的最佳方法是使用`DataContract`and `DataMembers`，这引发了我想问的两个问题。

a）我需要实现`DataContract`一个实体对象吗？据我了解，不建议直接公开 EF 对象，而是`DataContract`在我想转移的类上使用，但另一方面，我在尝试使用我的项目时没有收到错误，该项目未`DataContract`在 Account 上实现.

b) 除了让客户端了解我的数据库表的构建之外，为什么不建议将 EF 对象作为参数传递？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:58:15.673

在您的数据库中，您可以将身份规范分配给 id 字段，并且可以为创建的字段提供默认值。

如果有 id 和 created 的列，则需要初始化 Created。您不需要初始化您的 id 字段，除非它在您的数据库中没有身份规范。一般来说，您需要初始化您的值，因为您的数据库无法猜测应该为您的属性分配哪些值。

所以你的实体不是由数据库创建的，它是由你的方法创建的，它是空的，因为你没有初始化它。示例初始化

```
public string AddAccount()
{
    myContext db=new myContext();
    //id is not initialized, because I'm assuming it has an identity specification
    db.Accounts.Add(new Account() { Created = DateTime.Now.ToUniversalTime()});
    db.SaveChanges();
    return "something";
} 
```

您的实体类不需要实现 DataContract，我的项目使用 EF 对象无可挑剔地工作，这些对象是不实现 DataContract 的类的实例。

您可以在业务逻辑中将 EF 对象作为参数传递，这绝对没有问题。您只需要小心不要让您的客户知道您的数据库的架构是什么。

我希望这有帮助。

# c# - 3层架构编译错误

> ID：14799134
> 
> 赞同：0
> 
> 时间：2013-02-10T15:10:18.410
> 
> 标签：c#, winforms, architecture, layered

我在我的 C# WinForms 应用程序中使用 3 层架构。当我编译应用程序时，我的表示层 form1.cs 中出现以下错误

## 代码：

```
private void btnSave_Click(object sender, EventArgs e)
{
    BLL.clsBLL obj = new BLL.clsBLL();
    string firstname = txtClientFirstName.Text;
    string lastname = txtClientLastName.Text;
    string age = txtClientAge.Text;
    int Res = 0;
    try
    {
        Res = obj.Save_Client(Client_FirstName, Client_Lastname, Client_Age);
    }
        catch(SqlException ex)
    {
MessageBox.Show(ex.Message);
    }
    if(Res ==1)
    {
MessageBox.Show("Data Saved");
    }

    else
    {
        MessageBox.Show("Data Not Saved");
    }
} 
```

错误：

> “BLL.clsBLL”不包含“Save_Client”的定义，并且找不到接受“BLL.clsBLL”类型的第一个参数的扩展方法“Save_Client”（您是否缺少 using 指令或程序集引用？）

BLL层中Save_Client的代码如下：

## 代码：

```
public int Save_Client(string Client_FirstName, string Client_Lastname, string Client_Age)
{
    Boolean bopassed = true;

    bopassed = Check_Rules(Client_FirstName, Client_Lastname, Client_Age);
    DAL.clsDAL obj = new DAL.clsDAL();
    int Res = 0;
    try
    {
        if (bopassed == true)
        {
obj.Insert_Clients(Client_FirstName, Client_Lastname, Convert.ToInt32(Client_Age));
Res = 1;
        }
        else
        {
Res = 0;
        }
    }
    catch (SqlException)
    {
        throw;
    }
    return Res;
}

private Boolean  Check_Rules(Client_FirstName, Client_Lastname, Client_Age)
{
    Boolean bolres = true;
    if(Client_FirstName=="")
    {
        bolres=false;
    }
    if(Client_Lastname=="")
    {
        bolres=false;
    }
    if(Client_Age=="")
    {
        bolres=false;
    }

    return bolres;
} 
```

错误：

> “需要标识符”
> 
> 在方法 private Boolean Check_Rules(Client_FirstName, Client_Lastname, Client_Age)

我无法找出错误的原因。

谁能告诉我问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:37:08.373

您忘记在`Check_Rules`方法中说明参数的类型。您需要更改此行：

```
private Boolean Check_Rules(Client_FirstName, Client_Lastname, Client_Age) 
```

对此：

```
private Boolean Check_Rules(string Client_FirstName, string Client_Lastname, string Client_Age) 
```

# ruby-on-rails - Rake 无法加载 sqlite3 文件

> ID：14799135
> 
> 赞同：2
> 
> 时间：2013-02-10T15:10:34.777
> 
> 标签：ruby-on-rails, macos, sqlite

我是 Ruby on Rails 的新手，我只是尝试按照入门指南设置示例应用程序。我在 Mac OS X Mountain Lion 上安装 Rails。我让 Rails 工作，我可以在其中运行默认的入门应用程序。但是，当我尝试运行 rake db:create 命令时，我收到以下消息：

耙中止！无法加载此类文件 -- sqlite3/sqlite3_native

我知道有很多关于这个问题的提问和回答，但没有一个已经确定的建议能够提供帮助。

请让我知道我能做些什么来使它正常工作。

谢谢卡梅伦

# java - Axis2 客户端在 ServiceStub 类中获取 NullPointerException

> ID：14799136
> 
> 赞同：0
> 
> 时间：2013-02-10T15:10:39.993
> 
> 标签：java, web-services, axis2

我有一个客户端试图调用 Web 服务 -

```
public static void main(String[] args) throws RemoteException {
    SimpleServiceStub service = new SimpleServiceStub(
            "http://localhost:8080/axis2/services/SimpleService");
            ConcatRequest request = new ConcatRequest();
            request.setS1("abc");
            request.setS2("123");
            ConcatResponse response = service.concat(request);
            System.out.println(response.getConcatResponse());
} 
```

来自eclipse内部的异常堆栈跟踪是-

```
Exception in thread "main" org.apache.axis2.AxisFault
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
at com.ttdev.ss.SimpleServiceStub.fromOM(SimpleServiceStub.java:1419)
at com.ttdev.ss.SimpleServiceStub.concat(SimpleServiceStub.java:190)
at com.ttdev.ss.SimpleClient.main(SimpleClient.java:15)
Caused by: java.lang.NullPointerException
at com.ttdev.ss.SimpleServiceStub.fromOM(SimpleServiceStub.java:1413)
... 2 more 
```

****编辑****这是来自轴的堆栈跟踪

```
Exception in thread "HttpConnection-8080-1" java.lang.IllegalStateException: Response already committed
    at org.apache.axis2.transport.http.server.AxisHttpResponseImpl.assertNotCommitted(AxisHttpResponseImpl.java:75)
    at org.apache.axis2.transport.http.server.AxisHttpResponseImpl.sendError(AxisHttpResponseImpl.java:110)
    at org.apache.axis2.transport.http.server.AxisHttpService.doService(AxisHttpService.java:315)
    at org.apache.axis2.transport.http.server.AxisHttpService.handleRequest(AxisHttpService.java:187)
    at org.apache.axis2.transport.http.server.HttpServiceProcessor.run(HttpServiceProcessor.java:82)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

当我调试代码时，我看到在生成的存根类中传递了一个空参数（第一个参数） -

```
private  java.lang.Object fromOM(
    org.apache.axiom.om.OMElement param,
    java.lang.Class type,
    java.util.Map extraNamespaces) throws org.apache.axis2.AxisFault{

    try {

            if (com.ttdev.ss.SimpleServiceStub.ConcatRequest.class.equals(type)){

                       return com.ttdev.ss.SimpleServiceStub.ConcatRequest.Factory.parse(param.getXMLStreamReaderWithoutCaching());

            }

            if (com.ttdev.ss.SimpleServiceStub.ConcatResponse.class.equals(type)){

                       return com.ttdev.ss.SimpleServiceStub.ConcatResponse.Factory.parse(param.getXMLStreamReaderWithoutCaching());

            }

    } catch (java.lang.Exception e) {
    throw org.apache.axis2.AxisFault.makeFault(e);
    }
       return null;
    } 
```

我试过axis2版本1.5.1和1.6.2服务器是本地服务器，版本是1.6.2。

**我不能在这里发布 wsdl 代码。它只是没有出现！** 但这是用于生成存根类的代码 -

```
WSDL2Code.main(new String[] {       
    "-S", "src/main/java",
    "-R", "src/main/resources/META-INF",
    "-ns2p", "http://ttdev.com/ss=com.ttdev.ss",
    "-uri", "src/main/resources/SimpleService.wsdl" }); 
```

任何帮助表示赞赏。顺便说一句，当我尝试使用 CXF 时，它可以工作。所以要么这是一个错误，要么我在从有效的 WSDL 生成 java 代码时做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:57:39.133

这是版本 1.6.2 的错误！我将服务器版本降级到 1.5.1 并且可以正常工作！我希望这可以帮助其他人努力寻找axis2的答案（就像我一样）。

# jquery - Jquery UI 1.8 到 1.9 中的选项卡不再工作

> ID：14799140
> 
> 赞同：0
> 
> 时间：2013-02-10T15:11:10.540
> 
> 标签：jquery, tabs

我已将 jquery UI 从 1.8.2 更新到 1.9.2，我为标签创建了自己的自定义 css 样式。但是，更新库后，这些选项卡无法像在 1.8.2 中那样运行

请看我的代码：

```
<div id="tabs_leads_new">
<ul>
    <li class="group"><a href="overiew.php"><img src="images/tab_icon_place_holder.png"  class="side_bar_icon"/></a></li>
<li class="group" onclick="$('#leads').slideToggle()">All</li>
<div class="closed" id="leads">
<li class="group"><a href="today.php">Today</a></li>
<li class="group"><a href="yesterday.php">Yesterday</a></li>
</div>
<li class="group"><a href="aged.php">aged</a></li>
</ul>
</div> 
```

现在，当我在关闭类的情况下删除 div 时，选项卡工作正常，但是当我离开 div 时，选项卡不会加载。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:37:41.233

您的 HTML 代码无效，您不能`<div>`在`<ul>`.

# ios - 通过点击视图打开文本文件

> ID：14799142
> 
> 赞同：0
> 
> 时间：2013-02-10T15:11:31.970
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我有一些基本问题。在启动期间，我的应用程序正在寻找在应用程序中创建的文本文件并添加代表这些文件的视图。简单的。我有关于文件名、位置等的信息。

现在我想通过点击视图打开文件。有人知道打开文件的最佳方式吗？我可以通过添加文件路径来设置视图的标签属性。我可以查看 UIView 类，但不知道哪种解决方案最好:)

只是如何打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:33:57.300

您可以使用枚举并将标签设置为 UIView 或 UIView 子类 (UIButton)，并使用 switch-case 检查是否点击了正确的视图。

使用 NSFileManager 操作文件：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)

# algorithm - NP问题有必要成为决策问题吗？

> ID：14799144
> 
> 赞同：1
> 
> 时间：2013-02-10T15:11:40.637
> 
> 标签：algorithm, np-complete, np

斯坦福大学的 Tim Roughgarden 教授在教授[MOOC](https://class.coursera.org/algo2-2012-001/class/index)时说，NP 类问题的解决方案必须是多项式长度。但是[维基百科的文章](https://en.wikipedia.org/wiki/NP_%28complexity%29)说 NP 问题是决策问题。那么什么类型的问题基本上属于 NP 类？并且没有必要说此类问题的解决方案具有多项式长度输出（因为决策问题必须输出 0 或 1）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:18:21.783

他可能在谈论证人和核实人。

对于 NP 中的每个问题，都有一个验证器——读取算法/图灵机——可以在多项式时间内验证“是”声明。

这个想法是，在时间有限的情况下，你有某种信息——证人——来帮助你做到这一点。

例如，在旅行商问题中：

```
TSP = {(G, k) if G has a hamiltonian cycle of cost <= k} 
```

对于给定的输入*(G, k)*，您只需要确定问题实例是否在*TSP*中。这是一个是/否的答案。

现在，如果有人过来说：这个问题实例在*TSP*中，你会要求证明。然后另一个人可能会给你一系列城市。然后，您可以简单地检查该顺序中的城市是否形成哈密顿循环以及循环的总成本是否*≤ k*。

您可以在多项式时间内执行此过程——假设见证的长度是多项式的。

使用此城市序列，您因此能够正确确定问题实例确实在*TSP*中。

这就是验证者的想法：他们采用长度为多项式的证明对象/见证来检查多项式时间，即某个问题实例在语言中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:41:44.550

NP的标准定义是它只是一类决策问题。决策问题总是产生是/否的答案，因此具有恒定大小的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:18:36.580

s没有观看视频/课程，但我猜他在谈论证书/验证而不是解决方案。巨大差距。

# c++ - 使用链表复制堆栈的构造函数

> ID：14799148
> 
> 赞同：-1
> 
> 时间：2013-02-10T15:11:53.503
> 
> 标签：c++

首先为链表创建一个复制构造函数很困难，现在这个堆栈。我几乎想用什么东西砸我的头，但后来我想到了 Stack Overflow 的家伙。所以这就是问题所在：考虑一件事您甚至不能更改 list.h 或 stack.h 或其构造函数。// 在 list.h 中

```
template <class T>
struct ListItem
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
        this->value = theVal;
        this->next = NULL;
        this->prev = NULL;
    }
};

/* This is the generic List class */
template <class T>
class List
{
    ListItem<T> *head;

public:

    // Constructor
    List();

    // Copy Constructor
    List(const List<T>& otherList);

}
// In list.cpp

template <class T>
List<T>::List()
{
    head=NULL;
}

template <class T>
List<T>::List(const List<T>& otherList)
{
// I have code working for this part        
}

template <class T>
List<T>::~List()
{
}
// In stack.h (includes list.cpp)

template <class T>
class Stack
{
    List<T> list;

public:

    Stack();

    Stack(const Stack<T>& otherStack);

    ~Stack();

    void push(T item);
    T top();
    T pop();
};
// remember top(); pop(); push() functions are working properly in stack.cpp file.
// In stack.cpp (includes stack.h)

    Stack(const Stack<T>& otherStack){
    }
template <class T>
void Stack<T>::push(T item)
{
}

template <class T>
T Stack<T>::top()
{
}

template <class T>
T Stack<T>::pop()
{
} 
```

有一个对象 s 包含从 0 到 100 的 elem。100 在顶部。现在我们复制这样的内容：-

```
Stack<int> s2(s); 
```

我不知道如何在地球上访问 otherStack 元素。我的意思当然是它的链表。但它在 Stack.cpp 中，我可以做些什么来访问它以及如何为这个堆栈创建一个复制构造函数（工作代码会更好）。这次请多多支持。谢谢。注意：您不能更改任何构造函数。它必须是这样的。我希望这次每个人都能得到我的询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:30:59.893

假设您`List`的复制构造函数工作正常，您`Stack`应该可以使用编译器隐式生成的复制构造函数。在这种情况下，堆栈的完整代码可能如下所示：

```
template <class T>
class Stack { 
    List<T> data;
public:
    void push(T d) { data.add(data.begin(), d); }
    T front() { assert(!data.empty()); return data.front(); }
    void pop() { asset(!data.empty()); data.delete(data.begin()); }
}; 
```

我们不必为 Stack 定义复制构造函数，因为 List 的复制构造函数将用于复制`data`成员（这是 的唯一数据成员`Stack`，因此复制它也足以复制`Stack`）。

# mysql - SQL 具有共同值的最大记录数

> ID：14799151
> 
> 赞同：3
> 
> 时间：2013-02-10T15:12:27.917
> 
> 标签：mysql, sql

请考虑以下两个表格：

```
Holidays
HolidayID (PK)
Destination
Length
MaximumNumber
...

Bookings
BookingID  (PK)
HolidayID (FK)
Name
... 
```

客户可以预订假期（例如去夏威夷）。但是，假设给定的假期有最大数量的地方。例如，今年夏威夷只有 75 个假期（忽略其他年份）。

因此，如果某些客户想预订去夏威夷度假。我需要计算 Bookings 表中的记录，如果该数字大于 75，我必须告诉客户为时已晚。我可以使用 2 个 MySQL 查询（1 个获取假期的 MaximumNumber，2 个从 Bookings 获取当前总数）和 PHP（例如）将计数值与夏威夷假期的最大数量进行比较。但我想知道是否有办法纯粹在 SQL 中做到这一点（在这种情况下是 MySQL）？即计算夏威夷的预订数量并与夏威夷的 MaximumNumber 值进行比较。

编辑：我的方法：

```
$query1 = "SELECT MaximumNumber FROM Holidays WHERE HolidayID=$hawaiiID";

$query2 = "SELECT COUNT(BookingID) FROM Bookings WHERE HolidayID=$hawaiiID"; 
```

因此，如果第一个查询给出 75，第二个查询给出 75，我可以在 PHP 中比较这些值。但我想知道是否有办法仅在 SQL 中以某种方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:33:32.327

Maybe I am missing something, but why not use a subquery to determine the total bookings for each holidayid:

```
select *
from holidays h
left join
(
  select count(*) TotalBooked, HolidayId
  from bookings
  group by holidayId
) b
  on h.holidayId = b.holidayId
WHERE h.HolidayID=$hawaiiID; 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/52fe7/5).

Then you could use a `CASE` expression to compare the `TotalBooked` to the `MaxNumber` similar to this:

```
select h.destination,
  case 
    when b.totalbooked = h.maxNumber
    then 'Not Available'
    else 'You can still book' end Availability
from holidays h
left join
(
  select count(*) TotalBooked, HolidayId
  from bookings
  group by holidayId
) b
  on h.holidayId = b.holidayId
WHERE h.HolidayID=$hawaiiID; 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/52fe7/6).

You will notice that I used a `LEFT JOIN` which will return all rows from the `Holidays` table even if there are not matching rows in the `Bookings` table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:33:39.927

Something like this will work. You can fill in the details:

```
select case 
when 
(select count(*) 
from Bookings 
where holidayID = $hawaiiid) 
<= MaximumNumber then 'available' else 'sold out' end status
from holidays 
etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:36:44.583

你可以尝试这样的事情：

```
select case when b.freq < h.MaximumNumber
            then 'Available'
            else 'Not Available'
            end as MyResult
from Holidays h
left join (
   select HolidayID
        , count(*) as freq
   from Bookings
   where HolidayID=$hawaiiID
   group by HolidayID
   ) b
on h.HolidayID=b.HolidayID 
```

# java - 树，节点，树的类型

> ID：14799155
> 
> 赞同：0
> 
> 时间：2013-02-10T15:13:11.057
> 
> 标签：java, binary-tree

我想创建一棵树来检测插入是否是字符类型的对象，它将比较每个对象并决定插入的位置[右或左]，（我知道它可以通过 ascii 表中的位置检测），如果插入是 int 的对象，它将执行相同的操作。
我的问题：
1\. 我需要创建树并同时设置一个比较器（例如，如果它是一个 Chars 树，它将是一个 Chars_comperator 来检查 Chars 并且他实现了 Comparator ( of java )。？2.我的现在的代码只适用于 int。因为我将对象转换为字符串，然后再转换为 int，毕竟我比较并决定在哪里插入，这就是我需要做的吗？或者还有另一种方法可以做到这一点可以照顾各种对象吗？这是我的代码以及我如何创建树，

**树类**

```
public class tree {

bNode root;
public tree() {
    this.root = null;
}
public boolean isEmpty(){
    return root==null;
}
public void insert(Object data)
{
    if(isEmpty())
        this.root = new bNode(data);
    else
        this.root.insert(data);

   }
 } 
```

**bNode 类**

```
public class bNode {
 protected Object data;
 protected bNode left;
 protected bNode right;

public bNode(Object data) {
    this.data = data;
    this.left = null;
    this.right = null;
}

public void insert(Object data){

    if(Integer.parseInt(data.toString())<Integer.parseInt(this.data.toString())){
        if(this.left==null)
             this.left = new bNode(data);
        else 
            this.left.insert(data);

    }
    else{
        if(this.right==null)
             this.right = new bNode(data);
        else 
            this.right.insert(data);

    }
} 
```

**主班**

```
public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    tree x = new tree();
    char a = 'G';
    x.insert(a);
    x.insert(60);
    x.insert(40);
    x.insert(30);
    x.insert(59);
    x.insert(61);
    x.root.printTree(x.root);

} 
```

}
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:18:29.093

而不是传递一个对象，你可以传递一个`Comparable`in `insert()`。Integer、String 等标准类型已经实现了 Conparable 接口。

而不是使用`if (a <b`) 你打电话

```
compareTo(a,b); 
```

请参阅 Comparable 的 java 文档。

如果出于任何原因，您想继续使用 Passing an `Object`to `insert()`，您也可以通过不使用 toString 来解决这个问题，而是通过检查对象的类，然后进行强制转换：

```
if (object instanceof Integer) {
    int val = ((Integer) object).intValue();
    // now compare 
} else if (object instance of String) {
     String val .....
    // use val.compareTo()
} 
```

# java - 为 Java Applet 创建介绍屏幕

> ID：14799160
> 
> 赞同：2
> 
> 时间：2013-02-10T15:14:01.063
> 
> 标签：java, user-interface, applet

大家好，我有一个关于小程序的问题。我有一个想要嵌入网页的游戏小程序。但是，我想向首先出现的小程序添加一个“开始屏幕”，它有几个参数按钮和一个开始按钮。按下开始按钮时应加载“游戏屏幕”。执行此操作的最佳方法是什么？这里以一个简单的 1 屏 Applet 为例。

```
 public class AppletExample extends Applet implements ActionListener{

Button okButton; 
Button cancelButton; 
TextField _textField;

public void init(){

    okButton = new Button("Press");
    cancelButton = new Button("Cancel");
    _textField = new TextField("Ready", 10);

    okButton.addActionListener(this);
    cancelButton.addActionListener(this);

    add(okButton);
    add(_textField);
    add(cancelButton);
    }

 public void actionPerformed(ActionEvent arg0) {

if(arg0.getSource() == okButton){
    _textField.setText("Running...");
}
else {  _textField.setText("Cancelled");
}
}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:16:44.330

您可以使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)来管理面板之间的导航。

看看使用轻量级的 Swing`JApplet`而不是旧的`AWT` `applet`。开始面板可以是一个`JPanel`包含必要组件的面板。根据需要使用[next](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#next%28java.awt.Container%29)、[previous](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#previous%28java.awt.Container%29)或[show](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)在游戏面板之间导航。

```
public void init() {
   setLayout(new CardLayout());

   JPanel startPanel = new JPanel();
   okButton = new JButton("Press");
   startPanel.add(okButton);
   ...
   add(startPanel, "Card 1");
   ...
} 
```

# c# - 如何实现自己的 HashSet contains 方法

> ID：14799167
> 
> 赞同：4
> 
> 时间：2013-02-10T15:14:30.797
> 
> 标签：c#

我有 int[9] 数组的 HahSet 集合，想知道 HashSe 是否已经包含该数组。例如

```
 HashSet<int[]> set = new HashSet<int[]>();
       int[] a=new int[9]{1,2,3,4,5,6,7,8,9};
       set.Add(a);
       int[] a2=new int[9]{1,2,3,4,5,6,7,8,9};
       if(!set.Contains(a2))
          set.Add(a2); 
```

如何覆盖或实现自己的 Equals 方法，以便 HastSet.Contains 的行为类似于 Arrays.SequenceEquals？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T15:17:29.567

您需要提供 的实现`IEqualityComparer<int[]>`，并使用带有自定义比较器的构造函数：

```
class MyEqCmpForInt : IEqualityComparer<int[]> {
    public bool Equals(int[] a, int[] b) {
        ...
    }
    public int GetHashCode(int[] data) {
        ...
    }
}

HashSet<int[]> set = new HashSet<int[]>(new MyEqCmpForInt()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T15:17:13.143

哈希集类有[一个构造函数，它接受一个相等比较器](http://msdn.microsoft.com/en-us/library/bb359100.aspx)。用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T15:19:10.817

您必须实现自己的数组相等比较器，例如[此处](https://stackoverflow.com/a/7244729/412770)列出的比较器。

然后就像要求哈希集使用您的比较器一样简单：

```
var set = new HashSet<int[]>(new ArrayEqualityComparer<int>());
...
    // You don't need to do a Contains check; it's implicit.
set.Add(someArray); 
```

# html - 两列布局：列问题

> ID：14799168
> 
> 赞同：1
> 
> 时间：2013-02-10T15:14:34.177
> 
> 标签：html, css

我基于此创建了一个简单的两列布局： [How to control overflow of table cell in Firefox?](https://stackoverflow.com/questions/14547722/how-to-control-overflow-of-table-cell-in-firefox) .

左列应该是可滚动的（自上而下），右列应该是固定的。

HTML：

```
<div id="col1">
    <div id="list">
        <div class="row">Test 1</div>
        <div class="row">Test 2</div>
        <div class="row">Test 3</div>
        <div class="row">... more rows</div>
    </div>
</div><div id="col2"></div> 
```

CSS：

```
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background-color: #0c0;
}
#col1 {
    width: 25%;
    height: 100%;
    display:inline-block;
    background-color: #c00;
}
#col1>#list {
    width: 100%;
    overflow: auto;
}
#col1>#list>.row {
    padding: 5px;
    border-bottom: 1px solid #ccc;
}
#col2 {
    width: 75%;
    height: 100%;
    display:inline-block;
    background-color: #00c;
} 
```

请看这个演示：http: [//jsfiddle.net/bitas/qRtjN/](http://jsfiddle.net/bitas/qRtjN/)

Firefox 18.0.2 几乎按预期显示。在其他浏览器中，左栏不是从页面顶部开始，而是从左下角开始。

如果我删除“div#list”，它会按预期工作。这个div有什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:45:50.193

我对你的 CSS 做了一些修改，它确实有效。这里是：

```
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background-color: #0c0;
}
#col1 {
    width: 25%;
    height: 1000px;
    display:inline-block;
    background-color: #c00;
}
#col1>#list {
    width: 100%;
    height: 100%;
    overflow: auto;
}
#col1>#list>.row {
    padding: 5px;
    border-bottom: 1px solid #ccc;
}
#col2 {
    width: 75%;
    height: 100px;
    display:inline-block;
    background-color: #00c;
    position:fixed;
    top:0;
    right:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:15:59.587

添加此 CSS 将更正列的对齐方式：

```
#col1, #col2 {
    vertical-align: text-top;
} 
```

[http://jsfiddle.net/qRtjN/13/](http://jsfiddle.net/qRtjN/13/)

# javascript - 如何使用 jQuery 更改 html5 视频中的源

> ID：14799172
> 
> 赞同：14
> 
> 时间：2013-02-10T15:14:56.967
> 
> 标签：javascript, jquery, html, video

我有一个 html5 视频流，我需要在一些点击操作后更改它的源*。所以我正在做的工作，但只有在 html 中，我可以看到源代码更改但它在我的显示器上没有变化，你能帮我吗？怎么了？*源是附加来自 xml 文件。

HTML

```
<video autoplay loop width="960" height="540" id="video">
    <source src="video/movie_01.mp4" id="tv_main_channel">
</video> 
```

JS

```
btn.on('click', function(){
    var tv_main_channel = $('#tv_main_channel'),
        d_program_source_mp4 = $(program_self).find("program_source_mp4").text();

    tv_main_channel.attr('src', d_program_source_mp4);
} 
```

我也试过了，`append`但还是不行

```
var video_block = $('#video');

video_block.empty();
video_block.append(
    '<source src="'+ d_program_source_mp4 +'">'
); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-10T16:05:59.463

See this fiddle: [http://jsfiddle.net/qGbzb/2/](http://jsfiddle.net/qGbzb/2/)

To dynamically load videos you need to run

```
var video_block = $('#video');
video_block.load(); 
```

Then you should also see a change in the display too, and not only in the html.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-10T15:43:06.313

很简单，只要这样做：

```
btn.on("click", function(){
  var src = "new_video_src.mp4";
  $("#video").find("#tv_main_channel").attr("src", src)
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T05:31:58.090

您可以在点击事件中这样使用

```
 var src = "new_video_src.mp4";
  $("#tv_main_channel").src=src; 
```

这是视频标签元素的实际方法

# java - JOptionPane 在 JPanel 中无法正常工作

> ID：14799175
> 
> 赞同：1
> 
> 时间：2013-02-10T15:15:30.237
> 
> 标签：java, swing, graphics, joptionpane

在我的游戏中，当我创建一个 JOptionalPane 时，单击“确定”按钮后，它会在面板上绘制对话框。下面是错误的图片。

错误前的 JOptionPane：

![在此处输入图像描述](../Images/34d7f18e6179cb9c1af0aac4e7b84453.png)

JOptionPane 出错后，点击按钮“Yes”后

![在此处输入图像描述](../Images/384665cfdded5d99711d4243092caecd.png)

JOptionPane 是从扩展自 JComponent 的类创建的，在这行代码中：

```
JOptionPane.showConfirmDialog(getParent().getParent(),
        "The end! Lifes = 0"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:43:39.577

我怀疑您的面板实现`paintComponent()`失败调用`super.paintComponent()`，如本[问答](https://stackoverflow.com/q/7213178/230513)所示。

# javascript - 分配功能 onclick 的简单方法 - javascript

> ID：14799177
> 
> 赞同：0
> 
> 时间：2013-02-10T15:15:41.230
> 
> 标签：javascript, function, button, onclick, assign

我现在正在寻找很多时间，寻找一种非常简单有效的方法来通过单击 javascript（不是 jQuery）中的按钮来分配函数。

我遇到的问题是： 1.有时 dom 尚未创建，并且 javascript 函数中有未定义的变量。2.我不能以正确的方式将属性传递给这个函数。

所以baically我有这些：

```
<div class="container">
    <button type=button class="click">Click</button>

    <div class="smallContainer">
        <img src="source.com" class="myimage">
        <div class="data"> some data</div>
    </div>
</div>

<div class="container">
    <button type=button class="click">Click</button>

    <div class="smallContainer">
        <img src="source.com" class="myimage">
        <div class="data"> other data</div>
    </div>
</div>

<div class="container">
    <button type=button class="click">Click</button>

    <div class="smallContainer">
        <img src="source.com" class="myimage">
        <div class="data"> usefull data</div>
    </div>
</div>

for (){ assign in each button the onclick function}

function onclick(){
        here i want to change the opacity of the image by the class "myimage",
        take the innerHTML of the div by the class "data" and do something to it(maybe i ll send an ajax request in this function also)
    } 
```

所以我需要一个 for 循环或其他东西（可能在 javascript 文件中），它将分配给这个函数的所有按钮。每次单击按钮时，我都需要知道哪个按钮是哪个按钮以及“数据”类的 div 里面有什么功能。

我尝试了很多方法，每一种都有问题。任何人都可以提供一个简单的工作解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:36:57.033

既然您提到您不具备使用纯 JavaScript 执行此简单操作的技能，那么是时候将 jQuery 添加到您的工具箱中了。

这是您需要的所有代码

```
 $function() { // when the page is ready
   $(".click").on("click", function(e) { // assign a function to ALL class="click" 
     var id = this.id; // or $(this).attr("id"); - if you need the button's ID
     var divContent = $(this).parents().find(".data").html()
     $.get("someserver.php",{"id":id,"parm":divContent},function(data) {
       alert(data);//  from server
     });
   });
 }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-10T15:23:33.590

尝试使用 jquery 库:) 与那个 yoy 可以做类似的代码

```
<script>
$(".data").click(function(){
  var class_value = $(this).html();
})
</script> 
```

如您所见，该函数将应用于所有具有“数据”类的元素

# c++ - IWICImagingFactory 的 CoCreateInstance

> ID：14799179
> 
> 赞同：1
> 
> 时间：2013-02-10T15:15:45.633
> 
> 标签：c++, directx, direct2d

我在我的 Windows 7 机器上运行 Visual Studio 2012。

当我运行这里找到的 SimpleDirect2dApplication 时：[http ://technet.microsoft.com/en-us/subscriptions/dd940321%28v=vs.85%29.aspx](http://technet.microsoft.com/en-us/subscriptions/dd940321%28v=vs.85%29.aspx)

```
 hr = CoCreateInstance(
    CLSID_WICImagingFactory,
    NULL,
    CLSCTX_INPROC_SERVER,
    IID_PPV_ARGS(&m_pWICFactory)
    ); 
```

CoCreateInstance 因“未注册类”而失败，工厂的 ptr 为 0。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-20T07:51:31.160

这是我用来处理 WIC 和 WIC2 场景的 WIC 创建的代码：

```
namespace
{
    bool g_WIC2 = false;

    BOOL WINAPI InitializeWICFactory(PINIT_ONCE, PVOID, PVOID *ifactory) noexcept
    {
    #if (_WIN32_WINNT >= _WIN32_WINNT_WIN8) || defined(_WIN7_PLATFORM_UPDATE)
        HRESULT hr = CoCreateInstance(
            CLSID_WICImagingFactory2,
            nullptr,
            CLSCTX_INPROC_SERVER,
            __uuidof(IWICImagingFactory2),
            ifactory
        );

        if (SUCCEEDED(hr))
        {
            // WIC2 is available on Windows 10, Windows 8.x, and Windows 7 SP1 with KB 2670838 installed
            g_WIC2 = true;
            return TRUE;
        }
        else
        {
            hr = CoCreateInstance(
                CLSID_WICImagingFactory1,
                nullptr,
                CLSCTX_INPROC_SERVER,
                __uuidof(IWICImagingFactory),
                ifactory
            );
            return SUCCEEDED(hr) ? TRUE : FALSE;
        }
    #else
        return SUCCEEDED(CoCreateInstance(
            CLSID_WICImagingFactory,
            nullptr,
            CLSCTX_INPROC_SERVER,
            __uuidof(IWICImagingFactory),
            ifactory)) ? TRUE : FALSE;
    #endif
    }
}

bool IsWIC2() noexcept
{
    return g_WIC2;
}

IWICImagingFactory* GetWIC() noexcept
{
    static INIT_ONCE s_initOnce = INIT_ONCE_STATIC_INIT;

    IWICImagingFactory* factory = nullptr;
    if (!InitOnceExecuteOnce(
        &s_initOnce,
        InitializeWICFactory,
        nullptr,
        reinterpret_cast<LPVOID*>(&factory)))
    {
        return nullptr;
    }
    return factory;
} 
```

这处理从任何线程创建一次工厂。您只需调用即可使用它：

```
auto pWIC = GetWIC();
if (!pWIC)
    // error 
```

对于您关心 WIC 与 WIC2 的少数情况，您可以使用`IsWIC2`：

```
if (targetFormat && memcmp(&guidContainerFormat, &GUID_ContainerFormatBmp, sizeof(WICPixelFormatGUID)) == 0 && IsWIC2())
{
    // Opt-in to the WIC2 support for writing 32-bit Windows BMP files with an alpha channel
    PROPBAG2 option = {};
    option.pstrName = const_cast<wchar_t*>(L"EnableV5Header32bppBGRA");

    VARIANT varValue;
    varValue.vt = VT_BOOL;
    varValue.boolVal = VARIANT_TRUE;
    (void)props->Write(1, &option, &varValue);
} 
```

> 过去我曾为此代码使用 C++11 lambda，但 clang/LLVM 不太喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T16:05:33.853

根据 Microsoft 论坛中的[回答](https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/e542d34a-a04b-455e-bd5b-957f162bab94/clsidwicimagingfactory-breaking-change-since-vs11-beta-on-windows-7?forum=windowswic)，Windows SDK 8.0 的重大更改要求您定义`_WIN32_WINNT`为`0x0600`向后兼容 Windows Vista 或`0x0601`向后兼容 Windows 7。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-23T03:56:34.553

使用这个

```
#if defined(CLSID_WICImagingFactory)
#undef CLSID_WICImagingFactory
#endif 
```

然后你可以通过这个

参考： [http ://skia.googlecode.com/svn/trunk/src/ports/SkImageDecoder_WIC.cpp](http://skia.googlecode.com/svn/trunk/src/ports/SkImageDecoder_WIC.cpp)

# c - 创建一个进程并告诉它休眠？

> ID：14799185
> 
> 赞同：3
> 
> 时间：2013-02-10T15:16:36.170
> 
> 标签：c, unix, process, fork, sleep

告诉特定进程睡眠的正确方法是什么？我不完全了解如何控制我创建的不同流程..

我正在尝试让两个进程休眠 2 秒和 3 秒。当进程 1 睡了 2 秒，而进程 2 仍在睡眠时，我希望进程 3 开始睡眠。但是我如何告诉一个进程休眠呢？还是我不？

```
int main(void)
{
    pid_t p1 = fork();
    pid_t p2 = fork();
    pid_t p3 = fork();

    //make p1 sleep(2) and p2 sleep(3)
    waitpid(p1, NULL, 0); //waiting for p1 to terminate
    //make p3 sleep(2);
} 
```

如您所见，我不了解如何处理流程或它们的真正含义。我有点将它们视为对象，但我猜那是错误的..我尝试阅读一些关于它的东西，但它们都是 9000 页 PDF 的.. 对我应该看到它们的简单解释将不胜感激. 是的，这是学校教材，但不，这不是作业。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T15:27:54.057

[`man fork`](http://linux.die.net/man/2/fork)从略短于 9000 页的开始。主要是成功`fork`返回*两次*：它向子进程返回0，向父进程返回子进程的PID。它通常这样使用：

```
pid_t pid = fork();
if (pid<0) { /* error while forking */
};
if (!pid) { /* code for child */
  play();
  whine();
  sleep();
  exit(0);
} else { /* code for parent */
  grunt();
  waitpid(...);
} 
```

您通常不会*告诉*子进程执行此操作，您只需将执行此操作的代码添加到适当的`if`分支。

在您的示例中，如果所有分叉都成功，您最终会得到**8**个进程：

1.  首先 fork 创建一个新进程，`p1`在新进程中获取 0，在父进程中获取一些 pid。
2.  在原始父级和子级中都调用了第二个 fork，向图片中添加了 2 个进程。 `p2`在步骤 2 之前存在的 2 个进程中的所有“孙子”中获得 0 和两个不同的 pid。
3.  第三个 fork 在**四个**不同的进程中被调用，在图中添加了四个其他进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T15:22:10.967

你可以发送一个`SIGSTOP`，然后一个`SIGCONT`我想。

```
kill(p1, SIGSTOP); 
```

或者，更明智的是，由于您只是分叉，因此可以完全控制代码，您可以处理路径：

```
if (in_child_1)
    sleep(..); 
```

* * *

作为旁注，在您的代码中创建的进程比您预期的要多。事物一旦`p1`被创建，它就会**从该点开始执行，与它的 parent 并行**。等等。

# python - 在 sqlalchemy 函数中避免样板会话处理代码

> ID：14799189
> 
> 赞同：26
> 
> 时间：2013-02-10T15:16:53.883
> 
> 标签：python, session, sqlalchemy

我有一个使用 sqlalchemy 的具有许多小型数据库访问功能的 python 应用程序。我试图避免围绕这些函数使用大量样板会话处理代码。

我有很多看起来像这样的功能：

```
def get_ticket_history(Session, ticket_id):
    s = Session()
    try:
        rows = s.query(TicketHistory)\
                .filter(TicketHistory.ticket_fk==ticket_id)\
                .order_by(TicketHistory.id.desc()).all()
        s.commit()
        return rows
    except:
        s.rollback()
        raise
    finally:
        s.close() 
```

我正在尝试重构这些功能，但不确定我是否有最好的方法。我目前拥有的最好的是以下内容：

```
def execute(Session, fn, *args, **kwargs):
    s = Session()
    try:
        ret = fn(s, *args, **kwargs)
        s.commit()
        return ret
    except:
        s.rollback()
        raise
    finally:
        s.close()

def get_ticket_history(self, ticket_id):
    def sql_fn(s):
        return s.query(TicketHistory)\
                .filter(TicketHistory.ticket_fk==ticket_id)\
                .order_by(TicketHistory.id.desc()).all()
    return execute(self.sentinel_session, sql_fn) 
```

有没有更好或更惯用的方法来做到这一点？也许使用装饰器？

谢谢，乔恩

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-04-22T17:49:33.050

SQLAlchemy 文档提供了一种使用上下文管理器执行此操作的可能方法。

[http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#when-do-i-construct-a-session-when-do-i-commit-it-and-when-do-i-关闭它](http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#when-do-i-construct-a-session-when-do-i-commit-it-and-when-do-i-close-it)

为了完整起见，在此处复制代码片段：

```
from contextlib import contextmanager

@contextmanager
def session_scope():
    """Provide a transactional scope around a series of operations."""
    session = Session()
    try:
        yield session
        session.commit()
    except:
        session.rollback()
        raise
    finally:
        session.close() 
```

这`session_scope`可以干净地使用，而无需现在重复样板。

```
class ThingOne(object):
    def go(self, session):
        session.query(FooBar).update({"x": 5})

class ThingTwo(object):
    def go(self, session):
        session.query(Widget).update({"q": 18})

def run_my_program():
    with session_scope() as session:
        ThingOne().go(session)
        ThingTwo().go(session) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-06-01T16:31:01.990

从 Sql alchemy 1.4 版开始： Session 可以用作上下文管理器，而无需使用外部辅助函数。

示例来自文档

```
Session = sessionmaker(engine)

with Session() as session:
    session.add(some_object)
    session.add(some_other_object)
    session.commit() 
```

首先，提交事务并关闭会话，可以应用以下方法。会话 = sessionmaker（引擎）

```
with Session.begin() as session:
    session.add(some_object)
    session.add(some_other_object)
# commits transaction, closes session 
```

文档： [https ://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.sessionmaker](https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.sessionmaker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:17:20.300

morphyn 使用上下文管理器的建议很好。您可以通过将`contextlib.contextmanager`装饰器应用于与您的 first 非常相似的函数来制作这样的上下文管理器，将`get_ticket_history`try 和 except 之间的代码替换为`yield`语句并将其重命名，例如`transaction`. [PEP 343](http://www.python.org/dev/peps/pep-0343/)有一个与该名称几乎相同的示例。

然后，将该上下文管理器与 with 语句一起使用以重新实现`get_ticket_history`. 不过，看起来 SQLAlchemy 已经提供了该功能，作为方法`begin`：

[http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#autocommit-mode](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#autocommit-mode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-28T18:50:39.673

### 事务处理（开始、提交/回滚）使用`with`子句

```
with engine.begin() as connection:
    r1 = connection.execute(table1.select())
    connection.execute(table1.insert(), {"col1": 7, "col2": "this is some data"}) 
```

老问题，但我仍然偶然发现它，所以这里是文档中的相关链接： [https ://docs.sqlalchemy.org/en/13/core/connections.html](https://docs.sqlalchemy.org/en/13/core/connections.html)

# special-characters - 在 Windows Azure Blob 元数据中存储特殊字符

> ID：14799190
> 
> 赞同：0
> 
> 时间：2013-02-10T15:17:00.030
> 
> 标签：special-characters, azure-storage

我有一个将图像存储在 Windows Azure Block Blob 中的应用程序。我正在向每个上传的 blob 添加元数据。元数据可能包含一些特殊字符。例如，注册商标符号 (®)。如何将此值添加到 Windows Azure 中的元数据？

目前，当我尝试上传使用此类特殊字符的文件时，我会收到 400（错误请求）错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:02:11.200

您可以使用 HttpUtility 对字符串进行编码/解码：

```
blob.Metadata["Description"] = HttpUtility.HtmlEncode(model.Description);
Description = HttpUtility.HtmlDecode(blob.Metadata["Description"]); 
```

[http://lvbernal.blogspot.com/2013/02/metadatos-de-azure-vs-caracteres.html](http://lvbernal.blogspot.com/2013/02/metadatos-de-azure-vs-caracteres.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:49:43.153

Blob 元数据中支持的字符必须是 ASCII 字符。要解决此问题，您可以转义字符串（百分比编码）、base64 编码等。

乔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-25T02:00:15.583

HttpUtility.HtmlEncode 可能不起作用；如果 Unicode 字符在您的字符串中（即 ’），它将失败。到目前为止，我发现 Uri.EscapeDataString 确实可以处理这种边缘情况和其他情况。但是，有许多字符被不必要地编码，例如空格 (' '=chr(32)=%20)。

我映射了非法 ascii 字符元数据将不接受并构建它以恢复字符：

```
 static List<string> illegals = new List<string> { "%1", "%2", "%3", "%4", "%5", "%6", "%7", "%8", "%A", "%B", "%C", "%D", "%E", "%F", "%10", "%11", "%12", "%13", "%14", "%15", "%16", "%17", "%18", "%19", "%1A", "%1B", "%1C", "%1D", "%1E", "%1F", "%7F", "%80", "%81", "%82", "%83", "%84", "%85", "%86", "%87", "%88", "%89", "%8A", "%8B", "%8C", "%8D", "%8E", "%8F", "%90", "%91", "%92", "%93", "%94", "%95", "%96", "%97", "%98", "%99", "%9A", "%9B", "%9C", "%9D", "%9E", "%9F", "%A0", "%A1", "%A2", "%A3", "%A4", "%A5", "%A6", "%A7", "%A8", "%A9", "%AA", "%AB", "%AC", "%AD", "%AE", "%AF", "%B0", "%B1", "%B2", "%B3", "%B4", "%B5", "%B6", "%B7", "%B8", "%B9", "%BA", "%BB", "%BC", "%BD", "%BE", "%BF", "%C0", "%C1", "%C2", "%C3", "%C4", "%C5", "%C6", "%C7", "%C8", "%C9", "%CA", "%CB", "%CC", "%CD", "%CE", "%CF", "%D0", "%D1", "%D2", "%D3", "%D4", "%D5", "%D6", "%D7", "%D8", "%D9", "%DA", "%DB", "%DC", "%DD", "%DE", "%DF", "%E0", "%E1", "%E2", "%E3", "%E4", "%E5", "%E6", "%E7", "%E8", "%E9", "%EA", "%EB", "%EC", "%ED", "%EE", "%EF", "%F0", "%F1", "%F2", "%F3", "%F4", "%F5", "%F6", "%F7", "%F8", "%F9", "%FA", "%FB", "%FC", "%FD", "%FE" };
    private static string MetaDataEscape(string value)
    {
        //CDC%20Guideline%20for%20Prescribing%20Opioids%20Module%206%3A%20%0Ahttps%3A%2F%2Fwww.cdc.gov%2Fdrugoverdose%2Ftraining%2Fdosing%2F
        var x = HttpUtility.HtmlEncode(value);

        var sz = value.Trim();
        sz = Uri.EscapeDataString(sz);

        for (int i = 1; i < 255; i++)
        {
            var hex = "%" + i.ToString("X");
            if (!illegals.Contains(hex))
            {
                sz = sz.Replace(hex, Uri.UnescapeDataString(hex));
            }
        }

        return sz;
    } 
```

结果是：

*   之前 ==> “1080x1080 Facebook 图片”
*   Uri.EscapeDataString => "1080x1080%20Facebook%20Images"
*   之后 =>“1080x1080 Facebook 图片”

我确信有一种更有效的方法，但对于我的需求来说，这个命中似乎可以忽略不计。

# ember.js - 正确的清理代码

> ID：14799191
> 
> 赞同：19
> 
> 时间：2013-02-10T15:17:02.093
> 
> 标签：ember.js, coffeescript, ember-data

我有以下两条用于编辑和新建的路线：

```
WZ.ExercisesNewRoute = Em.Route.extend
  model: ->
    WZ.Exercise.createRecord()
  deactivate: ->
    @_super.apply this, arguments
    @get('currentModel.transaction').rollback()

WZ.ExercisesEditRoute = Em.Route.extend
  model: (params) ->
    WZ.Exercise.find(params.exercise_id)
  serialize: (params, options) ->
    exercise_id: params.get('id')
  deactivate: ->
    @_super.apply this, arguments
    tx = @get('currentModel.transaction')
    tx.rollback() if tx 
```

我想知道每个停用的正确代码应该是什么，以便如果用户不保存、保存或其他情况，商店处于正确状态。

目前，如果我路由到编辑路由，然后直接路由到新路由而不保存，我会收到以下错误：

> 未捕获的错误：尝试`willSetProperty`在 rootState.deleted.saved 状态下处理事件。用 {reference: [object Object], store: , name: name} 调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T19:28:08.960

这个问题是针对旧版本的 ember 数据，但答案是首先检查 isDeleted 的状态，并且只有在记录尚未删除时才回滚。

在较新的 ember 数据中没有事务的概念，但如果您尝试回滚尚未持久化的记录，您仍然会遇到类似的问题。

我可能会在路由器 willTransition 事件中执行此操作，因为如果您想为用户提供保存更改的选项，您可以执行诸如中止转换之类的操作。

```
 willTransition: function(transition) {
    controller = this.get('controller')
    if( controller.get('content.isDirty') ) {
     if( controller.get('content.isNew') && confirm('Closing this window will revert all unsaved changes.') ){
       controller.get('content').deleteRecord();
     } else {
       controller.get('content').rollback()
     }
    }
  } 
```

# ruby - OS X 上 Ruby 的奇怪输出行为

> ID：14799193
> 
> 赞同：1
> 
> 时间：2013-02-10T15:17:16.367
> 
> 标签：ruby, precision, rounding-error

我有一个用 Ruby 编写的简单程序。代码是：

```
#!/usr/bin/ruby

# odd behavior here
j = 1.11
while j < 2
    print "iteration #{j}\n"
    j += 0.01
end 
```

我在装有 Mountain Lion 的 MacBook Air 上运行它。我的 Ruby 版本是：

```
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin11.4.2] 
```

我看到的奇怪行为是：

```
iteration 1.1
iteration 1.11
iteration 1.12
iteration 1.1300000000000001
iteration 1.1400000000000001 
```

现在，如果我将 j 更改为 1.13，我会得到以下结果（为简洁起见，我删除了一些输出）：

```
iteration 1.13
iteration 1.14
iteration 1.15
...
iteration 1.36
iteration 1.37
iteration 1.3800000000000001
iteration 1.3900000000000001
iteration 1.4000000000000001
iteration 1.4100000000000001
iteration 1.4200000000000002 
```

这里发生了什么？最初，我认为这可能与值如何存储在 j 中有关，并且 1.13 具有一些特殊属性。然而，从 1.13 开始的 j 颠覆了这一理论。真正让我感动的是，这似乎并不一致。换句话说，奇怪的“0000000000”在哪里发挥作用似乎有些武断（尽管我确定不是）。

更糟糕的是，如果我将“j < 2”更改为“j < 5”，我会得到更奇怪的行为。

```
...
iteration 4.85999999999994
iteration 4.86999999999994
iteration 4.8799999999999395
iteration 4.889999999999939
iteration 4.899999999999939
iteration 4.909999999999939
iteration 4.919999999999939
iteration 4.929999999999938
iteration 4.939999999999938
iteration 4.949999999999938
iteration 4.959999999999938
iteration 4.969999999999938
iteration 4.979999999999937
iteration 4.989999999999937
iteration 4.999999999999937 
```

我试过用谷歌搜索，但老实说，我不确定从哪里开始。我发现了一些线程，人们看到了 to_d 的奇怪行为，但没有什么能具体回答我的问题。此外，我对 Ruby 的了解还不够，无法完全理解发生了什么。这一定是精确度和 Ruby 如何存储数字的问题，但我不知道该去哪里找。

非常感谢任何朝着正确方向的推动！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:42:53.230

您看到的数字属于limits.h中定义的epsilon：2.2204460492503131e-16

换句话说，计算没问题，是显示器认为它是一个比它更精确的数字。这是我最好的猜测。

我查看了 ruby​​ 源代码中的 sprintf.c。它似乎将浮点数转换为 BigDecimal：

```
 switch (TYPE(val)) {
      case T_FLOAT:
        if (FIXABLE(RFLOAT_VALUE(val))) {
        val = LONG2FIX((long)RFLOAT_VALUE(val));
        goto bin_retry;
        }
        // THIS IS THE CONVERSION
        val = rb_dbl2big(RFLOAT_VALUE(val));
        if (FIXNUM_P(val)) goto bin_retry;
        bignum = 1;
        break; 
```

这可能是奇怪显示的原因。但是，ruby double 是 C double AFAIK，因此计算应该与 c 中的相同，除了它们看起来很奇怪。

试试这个c程序，你就会明白我的意思。你应该得到与你的红宝石结果相匹配的无关紧要的 .000...1s：

```
#include <stdio.h>
int main(){
double j;

j = 1.1;

while (j < 2) {
    printf ( "iteration %1.16f\n", j);
    j += 0.01;
    }
} 
```

顺便说一句，ruby 1.8.7 没有表现出这种行为。只是一个旁注。

# django - Django：向模板发送请求是否存在安全风险？

> ID：14799194
> 
> 赞同：2
> 
> 时间：2013-02-10T15:17:27.023
> 
> 标签：django, security, django-sessions

有时我希望使用请求中的多个变量，而其他时候我不使用任何变量。让每个模板都可以使用请求变量可能会带来哪些安全风险（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:14:03.510

只有让不受信任的人创建模板才会有风险。通常模板不会改变。如果你不信任创建模板的人，你就会遇到更大的问题（他们更容易在 python 代码中偷偷摸摸地做一些事情）。

如果模板是动态生成的，并且您不小心为用户提供了一种向该模板添加信息的方法，则将存在安全风险。但是，我认为这不是您所提议的。

# jquery - 自动完成 - 几次使用后随机失败（我如何调试？）

> ID：14799199
> 
> 赞同：0
> 
> 时间：2013-02-10T15:18:03.093
> 
> 标签：jquery, autocomplete, simplemodal, jqote

全部-

所以我使用 qjote2 来渲染一些模板，并使用简单的模式来显示一个窗口。这个窗口有一个简单的文本框，它利用了自动完成功能。

出于某种奇怪的原因，在我打开和关闭模式大约 8 次后，自动完成功能将停止工作。这很奇怪。我确实有 2 个完全相同的命名（类）文本框，但无论显示哪种模式，我都会弯曲它们。

没有抛出错误，有人知道我如何进一步调试吗？我知道它被绑定为以下打印到日志的事实（每当显示模态时我都会调用以下内容）：

```
$(document).find('.object_search').each(function() {    

    console.log("FOUND! " + $(this));
    $(this).val('');

    // bind our object search
    $(this).autocomplete({ 
```

有人对我如何进一步调试有任何想法吗？我对这么多使用 jquery 还是很陌生，所以我只是习惯于看到错误，而不是知道当某些东西无法正常运行时如何调试。

编辑：我试图把它放在小提琴上，但它不会渲染。您可以在这里查看完全相同的内容：http: [//quests.ceilingfansoftware.com/test.php](http://quests.ceilingfansoftware.com/test.php)

# java - 使用 JOptionPane 进行实验。执行期间获取 Nullpointer 异常

> ID：14799200
> 
> 赞同：2
> 
> 时间：2013-02-10T15:18:03.767
> 
> 标签：java, swing

我想在存了一些钱后提取一些钱，但我得到的是一个错误..为什么？例如，我存入 100，然后我想提取 90，但我得到的只是一个错误。另一个是，在存入 100 之后，我想打印我当前的余额，但它打印 (0) 零。为什么？请帮忙。

主班

```
import java.awt.HeadlessException;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class Banko{

    private static String name;
    private static double bal;
    private static double withdraw;
    private static BankAccount myAccount;

    public static void main(String args[]) {

        name = JOptionPane.showInputDialog(null, "Enter your name: ");

        String num;
        int pin;
        num = JOptionPane.showInputDialog("Enter your pin number: ");
        pin = Integer.parseInt(num);

        JOptionPane.showMessageDialog(null, "Login Success\n" + "Name : " + name + "\n" + "Pin Number : " + pin);

        BankAccount myAccount = new BankAccount(withdraw, name);

        int rc = getRC();
        processor(num, rc);
    }

    private static int getRC(){
        String[] buttons = { "Deposit", "Withdraw", "Print Balance", "Exit" };
        int rc = JOptionPane.showOptionDialog(
            null,
            "What would you like to do?",
            "Confirmation",
            JOptionPane.INFORMATION_MESSAGE,
            0,
            null,
            buttons,
            buttons[2]);
        return rc;
    }

    private static void processor(String num, int rc) {
        switch(rc) {
            case 0:
                processDeposit(num, rc);
                break;
            case 1:
                processWithdraw(num, myAccount, rc);
                break;
            case 2:
                processBalance(num, rc);
            default:
                processExit(rc);
                break;
        }
    }

    private static void processExit(int rc) throws HeadlessException {
        if(rc == -1) {
            JOptionPane.showMessageDialog(null, "\nThank you. Have a good day!");
            System.exit(0);
        }
    }

    private static void processDeposit(String num, int rc) throws HeadlessException, NumberFormatException {
        int deposit;
        String dep = JOptionPane.showInputDialog("How much would you like to deposit?\n\t$ ");
        deposit = Integer.parseInt(num);
        JOptionPane.showMessageDialog(null, "You have deposited $" + dep + " into the account of " + name);

        String proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
        if(proceeds.equalsIgnoreCase("y")) {
            rc = getRC();
            processor(num, rc);
        } else {
            processExit(-1);
        }
    }

    private static void processBalance(String num, int rc) throws HeadlessException {
        JOptionPane.showMessageDialog(null, "The balance in the account of " + name + " with the pin number " + num
                + " is $" + bal);

         String proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
        if(proceeds.equalsIgnoreCase("y")) {
            rc = getRC();
            processor(num, rc);
        } else {
            processExit(-1);
        }
    }

    private static void processWithdraw(String num, BankAccount myAccount, int rc) throws HeadlessException, NumberFormatException {
        double withdraw;
        String with = JOptionPane.showInputDialog("How much would you like to withdraw?\n\t$");
        withdraw = Integer.parseInt(num);
        if(bal - withdraw > 0) {
            myAccount.withdraw(withdraw);
            JOptionPane.showMessageDialog(null, "You have withdrawn $" + withdraw + " from the account of " + name
                    + ". The new balance is: " + myAccount.getBalance());
        } else {
            JOptionPane.showMessageDialog(
                null,
                "Sorry, you have insufficient funds for this operation. Your existing balance is $"
                        + myAccount.getBalance());
        }

        String proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
        if(proceeds.equalsIgnoreCase("y")) {
            rc = getRC();
            processor(num, rc);
        } else {
            processExit(-1);
        }

    }
} 
```

基类：

```
import java.util.Scanner;

public class BankAccount {

    private double balance;

    private String name;

    public BankAccount(double b, String n) {
        this.balance = b;
        this.name = n;
    }

    public void deposit(double d) {
        balance += d;
    }

    public void withdraw(double w) {
        balance -= w;
    }

    public String nickname() {
        System.out.print("Enter a new name: ");
        Scanner kbIn = new Scanner(System.in);
        String n = kbIn.nextLine();
        return n;
    }

    public double getBalance() {
        return balance;
    }

    public void setBalance(double balance) {
        this.balance = balance;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:36:21.577

您正在声明一个新`BankAccount`实例，而不是使用静态变量：

```
public static void main(String args[]) {
    // ...
    myAccount = new BankAccount(withdraw, name);
    int rc = getRC();
    processor(num, rc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:47:15.920

很好的实验。只有小错误。

1.  不必要的变量`bal`，因为您的账户本身有余额
2.  必须`myAccount`在任何地方使用对象。

存款变化

```
 deposit = Integer.parseInt(dep);
    JOptionPane.showMessageDialog(null, "You have deposited $" 
                 + dep + " into the account of " + name);
    myAccount.setBalance(myAccount.getBalance() + deposit); 
```

提取

```
 withdraw = Integer.parseInt(with);
    if (myAccount.getBalance() - withdraw > 0) { 
```

获得平衡

```
 JOptionPane.showMessageDialog(null, "The balance in the account of " 
    + name + " with the pin number " + num
    + " is $" + myAccount.getBalance()); 
```

# php - PHP - 访问和发送数据以处理

> ID：14799201
> 
> 赞同：0
> 
> 时间：2013-02-10T15:18:08.507
> 
> 标签：php, cross-process

我一直在编写一个小型客户端服务器应用程序，现在我想在一个小型服务器网页中显示服务器进程的输出。每次，您在服务器控制台中按下一个键，都会输出当前状态。假设服务器正在运行，我想显示服务器的当前状态，你将如何在 PHP 中实现它？

我的想法是得到这个过程，然后发送一个关键输入。你怎么能在 PHP 中实现它呢？该服务器在 Apache 和 PHP 5.4 的 debian 6 上运行。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:37:20.933

取决于你想多简单：

*   最简单的方法是模拟一个 get 调用。例如客户端调用**fopen(' [http://server.example.com/status.php?server=myserver&stats=uptime](http://server.example.com/status.php?server=myserver&stats=uptime) ');** 在服务器级别，查看 $_GET['server'] 和 $_GET['uptime'] 。您可以使用该方法并通过将凭据作为变量传递来添加身份验证。输出可以是纯 html 或 json 编码*   使用 xml rpc 或 soap

# jquery - jquery对话框调整高度权重并更改标题栏背景和关闭按钮img

> ID：14799203
> 
> 赞同：0
> 
> 时间：2013-02-10T15:18:11.797
> 
> 标签：jquery, dialog, height

我正在使用 jquery 对话框...我不想使用他们使用 google api 作为背景颜色主题的方式，我想使用我自己的例如：关闭按钮必须在一个带有 X 的圆圈中，标题栏的背景应该设置为#FFFFFF，对话框的高度和宽度必须根据我的数据调整（虽然不是动态的），请指导我，到目前为止我可以在对话框中弹出div但高度和宽度不能调整。有人可以指导我一个教程或调整...非常感谢

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:rich="http://richfaces.org/rich"
xmlns:a4j="http://richfaces.org/a4j">
<h:head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="JqueryLib/jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="js/jquery-1.8.2.js"></script>
<h:outputStylesheet library="css" name="application_1.css"></h:outputStylesheet>
<style type="text/css">

</style>
<script>
$(document).ready(function(){
$("#viewDetails").click(function(){

$("#popup").dialog();

})    
});
</script>
</h:head>
<body>
<form id="Form1">
<h:outputText id= "viewDetails" value="View Details" outcome="#"/>
<div id="popup" class="popup" title="MyTitle" style="display: none">
This is my data table....where I can not adjust the data inside the dialog box...
</div>

</form>
</body>
</ui:composition> 
```

我不想使用具有标题栏主题的 google api。我想自定义css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:11.893

以下是如何自定义 jQuery 对话框的示例：

```
$(function() {
    $( "#dialog" ).dialog({position:['middle',60],  // set the position on the page to the middle and 60px down from the top margin
        open: function(event, ui) {  
        jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="/EIWeb/images/Icons/x.png" /></span>');  // remove the titlebar background, remove the default button and replace with my own
    },  
        dialogClass: 'ui-widget-shadow',  // display a widget shadow
        modal: true,    // display the modal overlay
        autoOpen: false, // do not auto open
        width: '650px', // force set the width

        close: function(ev, ui) {$(this).close();}  // Set the dialog to close and remove upon clicking the "x" 
    });

    $( ".dialogOpener" ).click(function() { // Set a class to open the dialog
        $( "#dialog" ).dialog( "open" );
        return false;
    });
    $( ".btnDone" ).click(function(){ // Set a class to close the dialog
        $('.ui-dialog-content').dialog( "close" );
    });
}); 
```

这说明我想删除背景标题栏阴影（所以没有，只有标题），我想删除默认关闭按钮并将其替换为我自己的“x”图像，调用 ui-widget-shadow类，并将宽度设置为 650px。

此外，这表示当单击关闭“x”时，它将关闭并删除对话框。我还将一个按钮“btnDone”归类为对话框中的关闭器（例如“取消”按钮）。

如果这有帮助，请给我。

# mongodb - 使用 mongodb 进行故障转移

> ID：14799205
> 
> 赞同：9
> 
> 时间：2013-02-10T15:18:17.260
> 
> 标签：mongodb, transparency, replication, failover

我必须设置一个可以处理故障转移的数据库（如果一个崩溃另一个接管）。为此，我决定使用 mongodb：我设置了一个包含两个实例的副本集。每个实例都在单独的 VM 上运行。我有几个问题：

*   建议在副本集中至少使用 3 个实例。只用两个可以吗？

*   我有两个实例，然后是两个 IP 地址。我应该为需要在数据库中读/写的应用程序提供哪个 IP？当数据库关闭时，请求将如何重定向到仍在运行的实例？

一些帮助开始会很棒！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T16:07:00.163

> It is recommended to use at least 3 instances in a replica set. Is it ok to use only two ?

No, the minimum requirement for a replica set is three processes ([docs](http://docs.mongodb.org/manual/administration/replica-set-architectures/#three-member-sets)), but the third could be an [arbiter](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-arbiters) even though it is [not recommended](http://docs.mongodb.org/manual/administration/replica-set-architectures/#three-member-sets).

> I have two instances, and then two IP addresses. Which IP should I give to my application that will need to read/write in the database ? When a database is down, how the request will be redirected to the instance that is still up ?

## There are two alternatives:

### #1 (recommended)

You provide the driver with all addresses (for more detailed information how, visit the [docs](http://docs.mongodb.org/manual/reference/connection-string/)), example with [nodejs driver](https://github.com/mongodb/node-mongodb-native) (it is similar with the other). This way, the driver will know all, or at least more then one of, the instances directly, which will prevent problems if all of the specified instances are down (see #2).

```
var MongoClient = require('mongodb').MongoClient;

MongoClient.connect('mongodb://[server1],[server2],[...]/[database]?replicaSet=[name]', function(err, db) {
}); 
```

### #2

You provide the driver with one of them (probably the primary) and mongodb will figure out the rest of them. However, if your app starts up when the specified instance(s) is down, the driver would not be able to find the other instances, and therefore cannot connect to mongodb.

# c++ - 读取以二进制格式存储在字符数组中的双精度数

> ID：14799210
> 
> 赞同：1
> 
> 时间：2013-02-10T15:18:37.760
> 
> 标签：c++, floating-point, binary

我正在尝试读取以特定二进制格式存储在 char 数组中的浮点数。格式如下，其中每个字母代表一个二进制数字：

```
SEEEEEEE MMMMMMMM MMMMMMMM MMMMMMMM MMMMMMMM MMMMMMMM MMMMMMMM MMMMMMMM 
```

本[网站](http://boolean.klaasholwerda.nl/interface/bnf/gdsformat.html)对格式进行了更清楚的说明。基本上，指数采用 Excess-64 表示法，尾数归一化为 <1 和 >1/16 的值。为了得到数字的真值，尾数乘以 16 的指数真值的幂。

基本上，到目前为止我所做的是提取符号和指数值，但我在提取尾数时遇到了麻烦。我正在尝试的实现是相当蛮力的，并且在代码方面可能远非理想，但在我看来它是最简单的。它基本上是：

```
unsigned long a = 0;
for(int i = 0; i < 7; i++)
    a += static_cast<unsigned long>(m_bufRecord[index+1+i])<<((6-i)*8); 
```

它获取存储在 char 数组中的每个 8 位字节大小，并根据其在数组中的索引将其左移。因此，如果我拥有的数组如下：

```
{0x3f, 0x28, 0xf5, 0xc2, 0x8f, 0x5c, 0x28, 0xf6} 
```

我期望`a`获得价值：

```
0x28f5c28f5c28f6 
```

但是，通过上述实现`a`获取值：

```
0x27f4c18f5c27f6 
```

稍后，我使用以下代码将长整数转换为浮点数：

```
double m = a;

m = m*(pow(16, e-14));
m = (s==1)?-m:m; 
```

这里出了什么问题？另外，我很想知道如何理想地实现这样的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:39:15.037

我没有尝试运行你的代码，但我怀疑你得到这个的原因：

```
0x27f4c18f5c27f6 
```

代替

```
0x28f5c28f5c28f6 
```

是因为您在其前面的单元格中有一个“负数”。您的 8 位字节数组是有符号值还是无符号值？我希望如果你不签名它会更好。[或者移动你的演员，使其在轮班操作之前]。

# iphone - iPhone中的动画背景图像/图层

> ID：14799218
> 
> 赞同：0
> 
> 时间：2013-02-10T15:19:26.513
> 
> 标签：iphone, objective-c, animation, ios6, uiimageview

我开始研究示例应用程序，其中有一些在 UIView 上动画的对象（图像）。我想要一个背景图像，它也应该与这些对象一起动画。两个动画应该同时发生。背景图像占据了所有的屏幕空间，在此之上，其他图像应该是动画的。有人可以指导我实现这一目标。

我尝试了以下链接中提到的以下内容。

```
 for (int i = 0; i < IMAGE_COUNT; i++)
        [_imageArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"D%d.png", i]]];

    _animatedImages = [[UIImageView alloc] 
                      initWithFrame:CGRectMake(
                                               (SCREEN_WIDTH / 2) - (IMAGE_WIDTH / 2), 
                                               (SCREEN_HEIGHT / 2) - (IMAGE_HEIGHT / 2) + STATUS_BAR_HEIGHT,
                                               IMAGE_WIDTH, IMAGE_HEIGHT)];

    _animatedImages.animationImages = [NSArray arrayWithArray:_imageArray];

    _animatedImages.animationDuration = 1.0;

    _animatedImages.animationRepeatCount = -1; 
```

[iPhone 游戏背景是视频还是动画图像？](https://stackoverflow.com/questions/7231904/the-iphone-game-background-as-video-or-animated-image)

但是两个动画是独立发生的。我想为背景图像顶部的对象设置动画，这些对象也需要动画。如果这不可能，我可以使用图层或其他对象来实现这一点。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:39:51.957

似乎 `UIImageView' 无法控制动画开始的时间。有这样一个 API，但它位于较低级别的 CoreAnimation 框架中（UIImageView 必须在其实现中使用......）

你可以重新实现你自己的 UIImageView 动画。

然后，要设置具有相对时间的不同动画，请参阅[“如何将不同层的核心动画一个接一个地链接？”](https://stackoverflow.com/questions/9122756/how-can-i-chain-core-animations-for-different-layers-one-after-the-other) 以及[如何将两个 CABasicAnimation 动画分组并同时启动它们？](https://stackoverflow.com/questions/563366/animating-multiple-calayers-but-not-in-the-same-time-space).

由于您不需要所有图层动画之间的偏移量，但希望它们同时运行，您应该创建一个`CAAnimationGroup`，并将它们全部放在相同的`beginTime`.

`CAMediaTiming`协议[（](http://wangling.me/2011/06/time-warp-in-animation.html)`CAAnimation`由_

# java - 如何在单独的类中提供所有 ContextMenu 逻辑？

> ID：14799219
> 
> 赞同：1
> 
> 时间：2013-02-10T15:19:30.717
> 
> 标签：java, android, user-interface

我试图将我所有的 ContextMenu 逻辑放在一个单独的类中，但似乎我无法在这个类中识别是否有人选择了一个项目。

我有一个主要活动的应用程序。除了其他一些东西，这个活动还包含一个列表视图。这个列表视图应该包含一个上下文菜单，所以我定义了它对应于它的 Clicklistener：

```
MyListener myListener = new MyListener();

listview.setOnItemClickListener(myListener);
listview.setOnCreateContextMenuListener(myListener); 
```

MyListener 实现了 OnItemClickListener 和 OnCreateContextMenuListener。我这样做是为了保持类的可读性（就像前面提到的那样，已经有一些其他 UI 组件和一些逻辑）。到目前为止，一切都像魅力一样。识别单击并显示 ConextMenu。

现在我还希望 MyListener 也对在 ContextMenu 中选择的项目做出反应。不幸的是，似乎只有活动及其相应的子类提供了类似 onContextItemSelected(menuItem item) 的方法。因此，我必须将该逻辑放入我的主要活动中，并通过这样做来分发我的 ContextMenu 逻辑（我也对此进行了测试，它有效，但在我看来，分发逻辑似乎是不行的）。

我在这里想念什么吗？有没有办法为我的列表视图定义某种 ContextMenu ClickListener，而不是把它放在我的主要活动中？还是我在没有意识到的情况下做了一些不好的练习？

期待您的意见！

干杯无眼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:31:53.060

A quick and easy solution is to forward the clicks to your `MyListener` class.
Create a new method in your `MyListener` class. Ideally I would call it just like the original method:

`public boolean onContextItemSelected(MenuItem item)`
In this method you implement your logic.

Then make your `MyListener` variable a field of your `Activity`.
Now, just override `onContextItemSelected(MenuItem item)` in your `Activity` and forward the clicks to your listener class:

```
@Override
public boolean onContextItemSelected( MenuItem item ) {
    return myListener.onContextItemSelected( item );
} 
```

# visual-studio - 在多个 TFS 服务器之间切换是否有任何负面影响？

> ID：14799222
> 
> 赞同：3
> 
> 时间：2013-02-10T15:20:13.807
> 
> 标签：visual-studio, tfs, azure-devops

我正在使用 Visual Studio 2012 Professional，TFS 托管在工作服务器上，TFS 托管在个人项目的 TFS 预览上。

我注意到我可以使用 Visual Studio 中的**Connect to Team Foundation Server**对话框添加两者，我可以通过从下拉框中选择我想要工作的服务器并单击**Connect**在它们之间切换。

一切似乎都正常，但我有两个问题：

1.  这是可取的吗？
2.  在一台计算机/Visual Studio 安装上的多个 TFS 服务器之间切换是否有任何负面影响？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:26:28.647

此设置应该没有问题。我有大约 6 个。不同的客户使用他们自己的 TFS 服务器、用于个人项目的 Team Foundation 服务和一些 Microsoft 协作项目。Codeplex 还为源代码控制提供了一个 TFS 接口。

我能想到的唯一缺点是必须记住项目所在的位置。

# javascript - 从服务器获取列表并打印由 span 标签包围的每个元素

> ID：14799223
> 
> 赞同：4
> 
> 时间：2013-02-10T15:20:18.883
> 
> 标签：javascript, google-app-engine, python-2.7

我需要从 python 2.7 的服务器端获取一个列表到 javascript 的前端来打印它们。有没有办法做到这一点？我试图通过“self.response.out.write(my_list)”传递列表。

```
import webapp2
import jinja2
import os
import logging
from google.appengine.ext import db
import random
from google.appengine.api import users
jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__) + '/template'))

class MainPage(webapp2.RequestHandler):
    def get(self):
      # Print webpage
      template_values = {}
      template = jinja_environment.get_template('index.html')
      self.response.out.write(template.render(template_values))

    def post(self):
      my_list = ['one', 'two', 'three', 'four']
      self.response.out.write(my_list)

app = webapp2.WSGIApplication([('/', MainPage),],debug=True) 
```

Javascript 代码循环遍历列表并在控制台中打印它们。

```
function refresh(e) {
    console.log('Refresh.');
    addNewWord();
}

function addNewWord() {
    console.log('Add new words');
    $.ajax('/',{
        type: 'POST',
        data: {

        },
        success: handleResponse
    });
}

function handleResponse(data) {
    console.log('Got from server:' + data);
    for (var i = 0; i <data.length; i++) {
        console.log(data[i]);
    }
}

$(document).ready(function() {
    $('#refreshButton').click(refresh);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:47:26.977

使用 JavaScript 发送和处理列表或 Python 对象的最佳方式是发送 JSON。你可以`json.dumps`在你的python代码中使用

```
import json
....

my_list = ['one', 'two', 'three', 'four']
self.response.write(json.dumps(my_list) 
```

现在您收到一个 JSON 字符串。但是使用 jQuery 它会给你一个 JavaScript 对象。有关详细信息，请参阅 jQuery：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

如果您不使用 JSON，则可以使用字符串发送列表：

```
my_list = ['one', 'two', 'three', 'four']
self.response.write(','.join(my_list)) 
```

# android - ActionBarSherlock 左上角图标无法向上导航

> ID：14799224
> 
> 赞同：0
> 
> 时间：2013-02-10T15:20:28.663
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 为 Android HoneyComb 的前/后版本实现 ActionBar。我的问题是，当我点击 Android 4.0.4 版的左上角图标时，它没有响应。这是我到目前为止所做的：

1) 在所有样式文件夹中 "values/styles.xml" , "values-v11/styles.xml" & "values-v14/styles.xml"; 我做了以下

```
<style name="ActivityTheme" parent="@style/AppTheme">
        <item name="actionBarStyle">@style/ActivityActionBarStyle</item>
        <item name="android:actionBarStyle">@style/ActivityActionBarStyle</item>
    </style>
<style name="ActivityActionBarStyle" parent="ommaralrd_transparent_ActionBar">
        <item name="displayOptions">showHome|showTitle|homeAsUp</item>
        <item name="android:displayOptions">showHome|showTitle|homeAsUp</item>
    </style> 
```

在任何应用程序活动中（除了 Home 活动，因为它不应该有向上箭头），我做了以下事情：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
setContentView(R.layout.activity_inner);
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB){
            getSupportActionBar().setDisplayHomeAsUpEnabled(false);
        }
.....rest of my code ...
}

@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent intent;
        switch (item.getItemId()) {
        case android.R.id.home:

            /*app icon in action bar clicked; go home*/
            intent = new Intent(this, MainActivity.class);

            /* With this flag, if the activity you're starting already exists in the current task, 
             * then all activities on top of it are destroyed and it is brought to the front.
             * you should usually not create a new instance of the home activity. Otherwise, 
             * you might end up with a long stack of activities in the current task with multiple 
             * instances of the home activity.*/
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            break;
        default:
            return super.onOptionsItemSelected(item);
        }
        return true;
    } 
```

在清单文件中，我确保已将各自的样式应用于所有活动（主要活动除外，因为它不应该有向上箭头）

```
<activity
            android:name="com.andrid.example.TestActivity"
            android:label="@string/app_name"
            android:theme="@style/ActivityTheme" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.andrid.example.MainActivity" />
        </activity> 
```

所以现在当我在 Pre-HoneyComb 版本上测试应用程序时，向上箭头永远不会显示，这是正确的，因为如果点击图标向上导航，ABS 根本无法响应。但是，当我在模拟器上尝试 4.1 等 Post-HoneyComb 版本的应用程序时，会显示向上箭头，当我点击它时，它会按预期工作并正常向上导航。我的问题是，当我在 Android 4.0.4 emulator 上尝试应用程序时，向上箭头按预期显示，但是当我点击它时，它什么也不做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:39:41.123

我找到了解决方法：我应该避免使用 xml 属性将 Icon Home 设置为 Up：homeAsUp 但我应该明确使用 setDisplayHomeAsUpEnabled(true)，如下所示：

在所有样式文件夹中“values/styles.xml”、“values-v11/styles.xml”和“values-v14/styles.xml”；我做了以下

```
<style name="ActivityTheme" parent="@style/AppTheme">
        <item name="actionBarStyle">@style/ActivityActionBarStyle</item>
        <item name="android:actionBarStyle">@style/ActivityActionBarStyle</item>
    </style>
<style name="ActivityActionBarStyle" parent="ommaralrd_transparent_ActionBar">
        <item name="displayOptions">showHome|showTitle</item>
        <item name="android:displayOptions">showHome|showTitle</item>
    </style> 
```

在每个活动中（主要活动除外）：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        } 
```

# php - Codeigniter：获取带有 id 的用户名

> ID：14799227
> 
> 赞同：0
> 
> 时间：2013-02-10T15:21:13.570
> 
> 标签：php, database, codeigniter

我有一个我正在从事的项目，用户可以在其中注册并分配一个 ID。然后，该用户可以发布博客或评论，这些博客或评论被分配一个与用户 userID 相同的 authorID。

我需要一种方法来将他们的名字发布在这些博客或消息下面，而不是他们的 ID——它目前就是这样做的。

我的博客控制器处理博客发布（评论类似），但添加博客功能除外：

```
 function blogToevoegen() {
    $this->form_validation->set_rules('blogtitel', 'blogtitel',       'min_length[3]|required|xss_clean|callback_username_check');
    $this->form_validation->set_rules('blogtekst', 'blogtekst', 'min_length[2]|required|xss_clean');
    if ($this->form_validation->run() == FALSE) {
        $this->load->view('view_page', $this->view_data);
    } else {
        $data = array(
            'id' => $this->input->post('id'),
            'blogtitel' => $this->input->post('blogtitel'),
            'blogtekst' => $this->input->post('blogtekst'),
            'auteur_id' => $this->session->userdata('gebruiker_id'),
        );
        $this->db->set('datum', 'NOW()', FALSE);
        $this->db->insert('blogs', $data);
        redirect('blog/eigenblogs');
    }
} 
```

处理博客文章显示的函数（它还获取链接到博客的评论）

```
 function comments() {
    $this->db->where('id', $this->uri->segment(3));
    $this->db->select('blogtitel, blogtekst, auteur_id, datum');
    $data['query2'] = $this->db->get('blogs');
    $this->db->where('boodschap_id', $this->uri->segment(3));
    $data['query'] = $this->db->get('comments');
    $data ["titel"] = "PXL - Comment";
    $data ["pagina"] = "content_comment";
    $this->load->view("view_page", $data);
} 
```

显示这些博客的视图代码（留下注释的代码）

```
 <?php foreach ($query2->result() as $rij): ?>
                            <div class="post">
                                <h2><?= $rij->blogtitel ?></h2>
                                <p><?= $rij->blogtekst ?></p>
                                <p class="meta">Posted by <a href="#"><?= $rij->auteur_id ?></a> on <?= $rij->datum ?>
                                </p>
                            </div>                           
                        <?php endforeach; ?>
                        <hr> 
```

我需要一种将 auteur_id 更改为名称（由名字 + 姓氏组合而成）的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:38:41.300

您在这里需要的是所谓的 SQL Join。[在CI 手册](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)中找到更多关于它的信息：

这是您需要的示例：

```
$this->db->select('*');
$this->db->from('blogs');
$this->db->join('users', 'users.id = blogs.author_id');

$query = $this->db->get(); 
```

这将为您获取所有博客文章，并根据 author_id 在 users 表中查询用户。

# vb.net - 如何将教师分配到存储在不同表格中的房间？vb应用程序分配教师到考场

> ID：14799229
> 
> 赞同：1
> 
> 时间：2013-02-10T15:21:26.760
> 
> 标签：vb.net

我正在创建一个 vb 应用程序，在考试期间将教师分配到考场。我想根据空房情况将教师分配到房间。到目前为止，我已经能够将数据输入作为 csv 文件，将其存储在访问表中并计算教师和房间的数量。但我不知道如何将教师分配到我存储在数据库不同表中的房间。我该怎么做？请帮助我卡住了。

```
 Private Sub btnTeachersUpload_Click(sender As System.Object, e As System.EventArgs) Handles btnTeachersUpload.Click

    ODTeachers.ShowDialog()
    fileNameTeachers = ODTeachers.FileName
    lblTeacherPath.Text = fileNameTeachers

    teacher_Name = readFromCsv(teacher_Name, 0, fileNameTeachers)
    department = readFromCsv(department, 1, fileNameTeachers)
    phoneno = readFromCsv(phoneno, 2, fileNameTeachers)
    email_id = readFromCsv(email_id, 3, fileNameTeachers)
    teachers_availability = readFromCsv(teachers_availability, 4, fileNameTeachers)

    addToDb("teachers", "teacher_name", teacher_Name)
    addToDb("teachers", "department", department)
    addToDb("teachers", "email_id", email_id)
    addToDb("teachers", "phone_number", phoneno)
    addToDb("teachers", "availability", teachers_availability)
End Sub

Private Sub btnTeachersCompute_Click(sender As System.Object, e As System.EventArgs) Handles btnTeachersCompute.Click
    connect()
    Dim rs As New ADODB.Recordset
    rs.CursorLocation = ADODB.CursorLocationEnum.adUseClient
    rs.CursorType = ADODB.CursorTypeEnum.adOpenStatic
    rs.LockType = ADODB.LockTypeEnum.adLockBatchOptimistic
    rs.Open("select * from teachers where `availability` = 'yes'", cn)
    rs.ActiveConnection = Nothing

    no_of_avail_teachers = rs.RecordCount
    txtTeachers.Text = no_of_avail_teachers
    cn.Close()
End Sub

Public Function readFromCsv(arr() As String, ByVal index As Integer, ByVal filename As String)
    Using ioReader As New Microsoft.VisualBasic.FileIO.TextFieldParser(filename)

        ioReader.TextFieldType = FileIO.FieldType.Delimited
        ioReader.SetDelimiters(",")

        While Not ioReader.EndOfData

            Dim arrCurrentRow As String() = ioReader.ReadFields()

            If arr Is Nothing Then

                ReDim Preserve arr(0)

                arr(0) = arrCurrentRow(index)

            Else

                ReDim Preserve arr(arr.Length)

                arr(arr.Length - 1) = arrCurrentRow(index)
            End If
        End While
    End Using
    Return arr
End Function

Public Sub addToDb(ByVal tablename As String, ByVal fieldname As String, ByVal arr() As String)
    Dim strSql As String
    connect()

    Dim rs As New ADODB.Recordset
    rs.CursorLocation = ADODB.CursorLocationEnum.adUseClient
    rs.CursorType = ADODB.CursorTypeEnum.adOpenStatic
    rs.LockType = ADODB.LockTypeEnum.adLockBatchOptimistic
    rs.Open("select * from " & tablename & "", cn)
    rs.ActiveConnection = Nothing

    For i = 0 To arr.Length - 1 Step 1
        strSql = "INSERT INTO " & tablename & " (" & fieldname & ") VALUES ('" & arr(i) & "')"
        cn.Execute(strSql)
    Next
    cn.Close()
End Sub 
```

这是我到目前为止所做的。我已经发布了其中的一部分。我接受一个 excel 表作为输入并将其存储在数据库中。

我需要帮助分配老师到房间。房间部分的代码是相似的。需要将可用的教师分配到可用的房间。

我的教师数据库看起来像这样

```
teachers_name    availability
 vagarth             yes
 gaurav              no
 nymisha             yes 
```

我的房间数据库看起来像这样

```
rooms            availability
S203                 yes
H405                 no
S304                 yes 
```

# java - Java中的递归方法

> ID：14799230
> 
> 赞同：0
> 
> 时间：2013-02-10T15:21:45.727
> 
> 标签：java

我正在尝试使用递归方法将字符串更改为 char 数组，但出现错误

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(Unknown Source) 
```

我只想使用递归方法（不是循环或 toChar 方法）来解决这个问题

```
public class Recur {
    public char[]  stringTochar(String str)
    {
        if (str != null && str.length() > 0)
        {
            System.out.println(str.charAt(0)) ;
            stringTochar(str.substring(1)); 
        }
        return stringTochar(str.substring(1)) ;
    }
}

public class Tester {
    public static void main(String[] args) {
        Recur recur= new Recur ();
        recur.stringTochar("this is a test");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:24:43.467

```
str.substring(1); 
```

当`str`长度为 0 时会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:30:20.470

```
public class Recur
{
    private static char [] stringToChar (
        String str, char [] destination, int offset)
    {
        if (destination == null)
        {
            destination = new char [str.length ()];
            offset = 0;
        }

        if (offset < str.length ())
        {
            destination [offset] = str.charAt (offset);
            stringToChar (str, destination, offset + 1);
        }
        return destination;
    }

    public static void main (String [] args)
    {
        char [] chars = stringToChar ("this is a test", null, 0);

        for (char c: chars)
            System.out.println (c);
    }
} 
```

# c# - 在图像之间插入新行 C# Word

> ID：14799235
> 
> 赞同：-2
> 
> 时间：2013-02-10T15:22:16.090
> 
> 标签：c#, .net, ms-word

我想插入一个图像，然后是一个新行，然后是另一个图像。必须重复该过程，直到插入所有图像。这是我现在插入图像的代码，但不是空行

```
using System.IO;
using Word = Microsoft.Office.Interop.Word;
namespace Snapper
{
    class WordDocumentGenerator
    {
        public void CreateWordDocument(string fileName)
        {
            string originalPath = Directory.GetCurrentDirectory();
            string path = originalPath;
            path += @"\snapshots";
            object oMissing = System.Reflection.Missing.Value;

            //Create a new Word Application
            Word._Application wordApp = new Word.Application();
            wordApp.Visible = false;
            try
            {
                //Create a new blank document
                Word._Document doc = wordApp.Documents.Add(ref oMissing, ref oMissing, 
                                                           ref oMissing, ref oMissing);
                string[] images = Directory.GetFiles(path);

                //Create a range
                object myTrue = true;
                object myFalse = false;
                object endOfDoc = "\\endofdoc";
                object myRange; 

                foreach (var image in images)
                {
                    myRange = doc.Bookmarks.get_Item(ref endOfDoc).Range;
                    //Add images to the document                    
                    doc.InlineShapes.AddPicture(image, ref myFalse, ref myTrue, ref myRange);
                    //Add a blank line
                    //doc.Content.Text = "\n";
                }

                path = originalPath;
                path += @"\documents";

                DirectoryInfo docDir = new DirectoryInfo(path);
                if (!docDir.Exists)
                {
                    docDir.Create();
                }

                object savePath = path + @"\" + fileName + ".doc";

                doc.SaveAs(ref savePath,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing,
                    ref oMissing
                   );
                doc.Save();
            }            
            finally
            {
                wordApp.Quit(ref oMissing, ref oMissing, ref oMissing);
            }                                                                          
        }

    }
} 
```

我需要一些帮助来做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:59:29.447

谢谢大家，但是搜索显示了这个已经被问过的问题。答案几乎解决了我的问题。

[如何使用 word interop 一次将一个项目添加到 word 文档的新行](https://stackoverflow.com/questions/12718044/how-to-add-items-one-at-a-time-to-to-a-new-line-a-word-document-using-word-inter)

# django - Heroku Django Postgres同步数据库错误

> ID：14799238
> 
> 赞同：1
> 
> 时间：2013-02-10T15:22:37.590
> 
> 标签：django, heroku, heroku-postgres, django-syncdb, django-postgresql

Heroko 配置

```
DATABASE_URL:                 postgres://xxxxxxxx:xxxxxxxxxx@ec2-54-243-215-140.compute-1.amazonaws.com:5432/xxxxxxxxx
HEROKU_POSTGRESQL_GOLD_URL:   postgres://yyyyyyyyyyy:yyyyyyyyyyyyy@ec2-54-243-243-20.compute-1.amazonaws.com:5432/yyyyyyyyyy
HEROKU_POSTGRESQL_YELLOW_URL: postgres://zzzzzzzzzz:zzzzzzzzzzzz@ec2-54-243-215-140.compute-1.amazonaws.com:5432/zzzzzzzzz 
```

设置.py

```
DATABASES = {'default': dj_database_url.config(default='postgres://xxxxxxxx:xxxxxxxxxx@ec2-54-243-215-140.compute-1.amazonaws.com:5432/xxxxxxxxx'),} 
```

heroku 运行 python manage.py syncdb

```
Running `python manage.py syncdb` attached to terminal... up, run.4673
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 60, in handle_noargs
    tables = connection.introspection.table_names()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/__init__.py", line 910, in table_names
    return self.get_table_list(cursor)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/introspection.py", line 33, in get_table_list
    AND pg_catalog.pg_table_is_visible(c.oid)""")
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: current transaction is aborted, commands ignored until end of transaction block 
```

许多人不会说英语，因此无法解释。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:50:41.547

您发布的错误仅表示交易中存在先前的错误并且交易已经中止。您无法通过解决此错误来解决此问题。你必须找出你真正的问题是什么并尝试解决它。

为此，请检查您的 PostgreSQL 日志，并从该错误开始向后搜索，直到您遇到不同的错误。那将是终止交易的错误，您可以改为修复该错误。但是，从故障排除的角度来看，此错误毫无意义。找到你真正的问题并解决它。

# onmousedown - JS onmousedown 限制为左键单击

> ID：14799241
> 
> 赞同：0
> 
> 时间：2013-02-10T15:23:01.090
> 
> 标签：onmousedown

我在 JS 中建立了一种图片库。在给定的 img 和 p 元素上，onmousedown 事件调用两个函数：它加载新图像和新描述（见下文）

但是，与我的想法相反，onmousedow 它也是通过右键单击触发的。我不喜欢这样，我希望将 onmousedown 事件限制为鼠标左键单击。

有没有办法做到这一点？

非常感谢您的帮助。

HTML：

```
<img style="max-width: 100%; cursor:pointer;" src="../../img/picture1.jpg" alt="text" title="click me" 
id="showgallery" onmousedown="changeimg(); changedscrpt()" />
enter code here
<p class="myclass" style="text-align: center;" id="imgdescription">Description</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:35:46.700

您应该移出对 changeimg() 和 changedscrpt() 的调用以单独的方法，该方法将首先评估是否按下鼠标左键，如下所示：

```
onmousedown="checkAndChange(event, this)"; 
```

JavaScript：

```
function checkAndChange(e, obj)
{
    if (leftMousePressed(e))
    {
        changeimg();
        changedscrpt();
    }
}
function leftMousePressed(e)
{
    e = e || window.event;
    var button = e.which || e.button;
    return button == 1;
} 
```

如果按下鼠标右键，JavaScript 将不执行任何操作（不会更改下一张图像）。

# mysql - MySQL 逻辑：存储过程与查询的结果不同，只有 Proceduce 主体

> ID：14799243
> 
> 赞同：0
> 
> 时间：2013-02-10T15:23:21.140
> 
> 标签：mysql, database, stored-procedures

好的，所以我的存储过程在其 MySQL 查询中读取错误的变量。当我只使用proc的主体时，我需要的结果很好。我想让它成为一个存储过程。

这是 SQLyog 中的 SP：

```
DELIMITER $$

USE `XXXXXXXXXXXXXXX`$$

DROP PROCEDURE IF EXISTS `getcusbyzip`$$

CREATE DEFINER=`XXXXXXXXXXXXXXX`@`%` PROCEDURE `getcusbyzip`(IN zipcode VARCHAR(30), IN         radius VARCHAR(30))
BEGIN

SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (
SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (
SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =zipcode
LIMIT 0 , 1
) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

  SELECT Z.LNG
  FROM ZipCodes Z
  WHERE Z.ZIPCODE =zipcode
  LIMIT 0 , 1
) ) ) + SIN( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =zipcode
LIMIT 0 , 1
) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
FROM ZipCodes
HAVING distance <radius
ORDER BY distance
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE );

END$$

DELIMITER ; 
```

现在只有 1 条记录应该返回，因为我现在只添加了 1 个客户，直到我解决了这个类型的问题。这是我取得突破的地方（请不要笑，我完全是 SQL 新手 :)）。

我也尝试更改参数的类型。在我将其更改为 INT 后，邮政编码中断了，我使用了这个：

```
CALL getcusbyzip(08361,50) 
```

我得到的行是邮政编码中包含“8361”的所有行。基本上，这是我对为什么收到这么多行回复的唯一个人解释。

当我将这两个参数都设置为 VARCHAR 类型时：

```
CALL getcusbyzip(08361,50) 
```

或者

```
CALL getcusbyzip('08361',50) 
```

或者

```
CALL getcusbyzip(08361,'50') 
```

你明白了。

当我应该得到 1 行时，我得到了 0 行。

所以现在我想我知道我的问题是什么，我可能会满怀希望地问它。是什么导致我的 SP 以不同的方式读取输入作为参数，而不是像我刚刚进行查询并手动将参数放入查询中一样。其次，如何调整我的程序，以便 MySQL 服务器像我的查询一样读取我的程序，但参数为粗略？

以下是运行良好的查询：

```
SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (
SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (
SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =08360
LIMIT 0 , 1
) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

  SELECT Z.LNG
  FROM ZipCodes Z
  WHERE Z.ZIPCODE =08360
  LIMIT 0 , 1
) ) ) + SIN( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =08360
LIMIT 0 , 1
) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
FROM ZipCodes
HAVING distance <50
ORDER BY distance
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE ) 
```

编辑：

另一点需要注意的是，当我将变量更改为 SP（存储过程）中的直接信息时，它也不能修复它，所以它必须是我在 MySQL 过程逻辑中缺少的东西。老实说，我不明白为什么结果不同只是因为它在存储过程中。

# youtube - 有没有办法让 youtube 视频开始缓冲，而不自动播放？

> ID：14799246
> 
> 赞同：1
> 
> 时间：2013-02-10T15:23:44.773
> 
> 标签：youtube, youtube-api, html5-video

我有一个使用 html5 视频标签和用于视频标签的 javascript api 播放视频的网站，还使用 ​​youtube javascript api 播放 youtube 视频。我注意到一些 youtube 视频浏览器上的错误 - 当我寻找到某个点并播放（所有这些都是为了响应用户点击按钮）时，视频不会寻找。它从头开始播放。
对于使用 html5 video 标签播放的视频，这不是问题。我认为这不是问题的原因是我使用带有该标签的“预加载”选项，这意味着视频大部分在用户单击执行 SEEK 的按钮之前就已加载和缓冲。
所以要让它与 youtube 一起工作，我需要一个相当于“预加载”的东西，或者，也许我可以让自动播放成为真的，但在一毫秒后暂停视频，只是为了开始缓冲。
有什么我不知道的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:25:55.523

您使用哪个功能进行搜索？这听起来有点像您可能正在使用“playVideoAt()”——使用该函数，如果您指定的时间超出加载时间，那么它的预期行为就是从一开始就开始播放。但是，如果您使用的是“seekTo()”方法，那么它不应该这样做...... seekTo() 应该允许播放超出加载的内容而不会出现问题。

另一种可能性是查看是否正在设置“allowSeekAhead”参数（对于“seekTo()”方法）。

# python - linux命令的python命令替换

> ID：14799247
> 
> 赞同：1
> 
> 时间：2013-02-10T15:23:47.097
> 
> 标签：python

我正在尝试使用命令替换从 python 脚本构建 linux 命令，但无法使以下简单示例正常工作：

```
LS="/bin/ls -l"
FILENAME="inventory.txt"

cmd = "_LS _FILENAME "
ps= subprocess.Popen(cmd,shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)
output = ps.communicate()[0]
print output 
```

谢谢！

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:27:11.983

使用[字符串替换](http://docs.python.org/2/tutorial/inputoutput.html#fancier-output-formatting)：

```
cmd = '{} {}'.format(LS, FILENAME) 
```

或（在 Python2.6 中）：

```
cmd = '{0} {1}'.format(LS, FILENAME) 
```

* * *

```
import subprocess
import shlex

LS="/bin/ls -l"
FILENAME="inventory.txt"

cmd = '{} {}'.format(LS, FILENAME)    
ps = subprocess.Popen(shlex.split(cmd),
                      stdout = subprocess.PIPE,
                      stderr = subprocess.STDOUT)
output, err = ps.communicate()
print(output) 
```

* * *

或者，使用[sh 模块](http://pypi.python.org/pypi/sh)：

```
import sh
FILENAME = 'inventory.txt'
print(sh.ls('-l', FILENAME, _err_to_out=True)) 
```

# c++ - 如何编译修改后的 videoInput.h

> ID：14799248
> 
> 赞同：0
> 
> 时间：2013-02-10T15:23:51.217
> 
> 标签：c++, opencv

我需要使用具有 func 的修改后的 videoInput 库 `deviceSetupWithSubtype()` （它不是原始的 videoInput 库）

我在本页末尾 得到了`.h`和：http: [//opencv.willowgarage.com/wiki/CameraCapture](http://opencv.willowgarage.com/wiki/CameraCapture)`.cpp``rar`

我尝试用 VC2010 Express C++ 编译它，得到了我的 .lib，但是当我把它放到我想使用修改后的 videoInput.h 的程序中时，我得到了很多 LNK 错误，例如：

```
videoInput.lib(videoInput.obj) :error LNK2001:  unresolved external symbol __imp__CoTaskMemFree@4 

videoInput.lib(videoInput.obj) :error LNK2001:  unresolved external symbol _MEDIASUBTYPE_RGB24 

videoInput.lib(videoInput.obj) :error LNK2001:  unresolved external symbol _MEDIASUBTYPE_AYUV 

videoInput.lib(videoInput.obj) :error LNK2001:  unresolved external symbol _MEDIASUBTYPE_Y211 
```

（我也尝试了普通的 videoInput.lib 并且效果很好，但这不是我需要的版本）。

我该如何解决？或者如果你只有这个修改过的 videoInput.lib，你能上传它吗？谢谢你。

编辑：

在发布模式下，我也收到此错误：

```
videoInput.lib(videoInput.obj) : error LNK2038: mismatch detected for  '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:49:49.837

经过大量搜索链接错误后，我尝试了许多库，最后我找到了解决方案：您必须在 videoInput.h 中添加这些行（最终调整链接器中的路径，我不需要它）：

```
// if gives error LNK2038: mismatch detected for   '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2'
// insert _ALLOW_ITERATOR_DEBUG_LEVEL_MISMATCH in the C++ preprocessor option in the project properties
// these are the library needed:
#pragma comment (lib, "oleaut32")
#pragma comment (lib, "ole32")
#pragma comment (lib, "user32")
#pragma comment (lib, "strmbase") 
```

现在生成的 videoInput.lib 可以正确编译。

# javascript - 从 Spotify Apps API 获取用户加星标的播放列表？

> ID：14799249
> 
> 赞同：1
> 
> 时间：2013-02-10T15:23:52.307
> 
> 标签：javascript, api, spotify

我试图让用户加星标播放列表，但无论出于何种原因，Spotify 都返回“无效的播放列表 URI：spotify:user:jamesw12:starred”。

此代码段适用于所有其他类型的播放列表，但似乎没有加星标。这是不可能的吗？

```
models.Playlist.fromURI("spotify:user:jamesw12:starred", function(playlist) {

    console.log("Playlist loaded", playlist);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:58:10.630

您必须使用库来获取已加星标的曲目。

```
 models.library.starredPlaylist 
```

参考这里：[https ://developer.spotify.com/technologies/apps/docs/dcdebc652c.html](https://developer.spotify.com/technologies/apps/docs/dcdebc652c.html)

# javascript - AngularJS：错误：未知的提供者

> ID：14799250
> 
> 赞同：0
> 
> 时间：2013-02-10T15:23:51.970
> 
> 标签：javascript, angularjs

简单的事情 - 在 jsfiddle 中有效，但在我的文件中无效。我正在尝试将一些数据添加到模块的“工厂”，然后在我的控制器中使用它。这是相关代码：

```
var challengesApp = angular.module('challengesApp', []);
challengesApp.factory('Challenges', function() {
    var challenges = [
        {
            'program': {
                "num": "1",
                "name": "aaa"
            },
            'challengeDesc': "desss",
            'items': [
                {title:"aaa",
                    desc:"bbb",
                    link: "www.google.com",
                    fiction: true},
            ]
        }
    ];
    return challenges;

});

function ChallengeCtrl($scope, Challenges) {
    $scope.challenges = Challenges;
    etc...
}

function ChallengeListCtrl($scope, Challenges) {
    $scope.challenges = Challenges;
    etc..
} 
```

和 HTML：

```
 <body ng-app="challengesApp">
        <div ng-controller="ChallengeCtrl">
            <div id="question">
                <h2>{{ challenge.challengeDesc }}</h2>
                <ul>
                    <li ng-repeat="item in challenge.items">
                        <strong>{{ item.title }}</strong> - {{ item.desc }}
                    </li>
                </ul>
            </div>
        </div>

        <div ng-controller="ChallengeListCtrl">
            <div id="programs_list">
                <ul>
                    <li ng-repeat="program in challenges | orderBy:orderProp:reverse">
                        <a href="" ng-click="changeChallenge(program)">
                        {{ program.program.num }} - {{ program.program.name }}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <script src="js/main.js"></script>
    </body> 
```

这里有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:57:37.890

所以，正如我所怀疑的，这是一个愚蠢的错误。`<html>`标签是：

```
<html ng-app> 
```

阻止标签`ng-app`上的正确属性。`<body>`

# c# - 限制 CrmSvcUtil 仅创建我的解决方案所需的代码

> ID：14799252
> 
> 赞同：3
> 
> 时间：2013-02-10T15:23:55.723
> 
> 标签：c#, dynamics-crm-2011

这是我现在正在做的

```
CrmSvcUtil.exe /codeCustomization:"Microsoft.Xrm.Client.CodeGeneration.CodeCustomization,Microsoft.Xrm.Client.CodeGeneration" /url:http://pcrm/Adzz/XRMServices/2011/Organization.svc /out:Xrm.cs /username:xxxx /password:xxxx /domain:xxxx /namespace:xxxx /serviceContextName:XrmServiceContext 
```

当我使用“CrmSvcUtil”实用程序时 - 它会创建所有实体，我该如何限制它以便只有解决方案实体会生成代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T20:01:22.783

查看[代码生成工具的扩展](http://msdn.microsoft.com/en-us/library/hh547384.aspx)。应该对您有所帮助的界面是`ICodeWriterFilterService`. 同一页面上有示例实现，它指向 SDK 中的示例。

编辑：对于另一个很好的例子，请参阅下面的 Nicknow 评论

# c# - 如何自动更新我用 c# 开发的应用程序？

> ID：14799255
> 
> 赞同：4
> 
> 时间：2013-02-10T15:24:34.143
> 
> 标签：c#

我在 c# 中开发了我的应用程序，它使用 SQL Server Express 作为数据库。我想通过互联网更新我的应用程序。我想要的只是更新 myapplication.exe 因为在安装的文件夹中还有 application.config ，其中包括该服务器的配置，例如服务器名称、实例名称。我不想碰这个文件。它对每台机器都是独一无二的。是否有任何现成的机制或代码可以做到这一点？请告诉我方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:29:37.993

有微软解决方案`ClickOnce` [http://msdn.microsoft.com/en-us/library/t71a733d(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/t71a733d(v=vs.110).aspx)

在开源方面，有`Omaha`来自谷歌的，为谷歌浏览器、谷歌地球等提供支持。[http://code.google.com/p/omaha/](http://code.google.com/p/omaha/)

另外，看看`Shimmer`Gihub 上的人[https://github.com/github/Shimmer](https://github.com/github/Shimmer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T15:26:28.290

听起来您需要安装 ClickOnce。

[http://weblogs.asp.net/shahar/archive/2008/01/29/how-to-use-clickonce-to-deploy-your-applications.aspx](http://weblogs.asp.net/shahar/archive/2008/01/29/how-to-use-clickonce-to-deploy-your-applications.aspx)

# android - 创建看起来像 PreferenceActivity 的 Activity

> ID：14799257
> 
> 赞同：1
> 
> 时间：2013-02-10T15:24:42.030
> 
> 标签：android, styles, preferenceactivity

我需要制作一个替换 PreferenceActivity 的 Activity。原因是我们需要将设置保存在 SQL 中。我需要一种方法来设置我的设置屏幕的样式，使其看起来与 PreferencesActivity 完全一样。有人可以给我一个链接到 Android AOSP 上的 PreferenceActivity 布局代码的代码吗？或者我怎么能做到这一点？

# java - 如何使用 JSTL 确定空会话属性

> ID：14799259
> 
> 赞同：2
> 
> 时间：2013-02-10T15:24:51.907
> 
> 标签：java, jsp, servlets, jstl

我已经设置了一个会话，根据每个用户的角色控制菜单......现在例如我有这个

```
<c:set var="role" scope="session" value='<%=((Long) session.getAttribute("role")).longValue()%>' />
<c:if test="${role == 121}">
        <div id="menu">
            <span class="menu-header">Registration</span>
            <ul>
                <li><a href="${pageContext.request.contextPath}/registration/organization-registry">Organization Registry</a></li>

            </ul>
        </div>
    </c:if>

<div id="menu">
                <span class="menu-header">Directory</span>
                <ul>
                    <li><a href="">Organization</a></li>

                </ul>
            </div> 
```

现在，如果我想在不登录的情况下转到该页面怎么办？我试图在不登录的情况下转到该页面，但`NullPointetExcepetion`基本上遇到了，因为我没有任何会话存储在角色中。我在用户登录时设置了每个会话。当不登录时，我想查看不需要任何角色的菜单...例如，我使用一个可以被其他人查看的链接重定向到该页面。

未登录时，如何仍能查看目录菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:42:47.843

完全摆脱这`<c:set>`条线。你不需要它。EL`${}`已经在页面、请求、会话和应用程序范围内搜索属性。NPE 是由于您`longValue()`在`null`.

请记住：您永远不应该将 oldschool *scriptlet* `<% %>`与现代 EL混合使用`${}`。这是没有意义的。你只会迷惑自己。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# haskell - Haskell中的常量变量声明

> ID：14799264
> 
> 赞同：2
> 
> 时间：2013-02-10T15:25:16.273
> 
> 标签：haskell

要声明常量变量，我可以在 Ruby 中执行以下操作

```
class COLOR
   RED   = 10
   BLUE  = 20
   GREEM = 30
end 
```

`COLOR::RED`返回`10`，`COLOR::BLUE`返回`20`，等等。我如何在 Haskell 中做到这一点？

我想在我的变量名前面有一个命名空间名称。也许上面的例子不是一个很好的例子。对于以下情况，您可以看到包含命名空间名称将使变量更易于理解。

```
class BASEBALL_TEAM
   GIANTS = 15
   METS = 30
   REDS = 45
   ...
end 
```

`BASEBALL_TEAM::GIANTS`比 清楚得多`GIANTS`。

根据下面的评论，似乎我可以完成它的唯一方法是执行以下操作：

```
module Color (Color) where
data Color = Red | Blue | Green deriving (Eq, Show, Ord, Bounded, Enum)                        

fromEnum' x = (fromEnum x) + 10 
```

要获得`10`for 的整数值`Color.Red`，我必须写`fromEnum Color.Red`，语法不是很干净。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T15:59:16.680

未标记的常量不好。如果您使用一堆`Int`常量，那么您将失去类型检查（考虑`Int -> whatever`函数可能采用的值而不是`SomeConstType -> whatever`），并可能引入错误。你想要一个强类型：

```
data Colour = Red | Blue | Green deriving (Show, Eq, Enum) 
```

此外，在大多数情况下，将这些值表示为整数并不是真正必要的。如果你确实需要它，`Enum`typeclass 提供`toEnum`和`fromEnum`.

至于命名空间：模块是 Haskell 中的命名空间。将您的类型放入模块中，然后您可以将其导入合格，您将拥有前缀：

```
-- Colours.hs
module Colours (Colour) where
data Colour = ...

-- SomeOtherModule.hs
module SomeOtherModule where
import qualified Colours

foo = Colours.Red 
```

也就是说，为这种类型创建带有常量的模块（或导入它们）并不是真正必要的，因为您可以轻松地通过它们的类型来跟踪事物。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T15:31:56.040

默认情况下，Haskell 中的事情是不变的，所以

```
red = 10
blue = 20
green = 30 
```

将是等效的。

一个更有趣的问题是你为什么要这样做？在 Haskell 中可能有更好的方法来完成你想要的。@CatPlusPlus 的回答显示了这样做的好方法。

这似乎是一个非常基本的 Haskell 问题，所以我会礼貌地向您指出[Learn you a Haskell](http://learnyouahaskell.com/)，在我看来，这是开始使用 Haskell 的最佳资源。

学习 Haskell 的另一个有希望的资源是 FP complete 的[School of Haskell](https://haskell.fpcomplete.com/beta)，目前处于测试阶段，但我自己还没有尝试过。这是一个更具交互性的设置，您可以直接在浏览器中进行尝试。

# jquery - 为什么会出现验证错误？

> ID：14799269
> 
> 赞同：0
> 
> 时间：2013-02-10T15:25:56.540
> 
> 标签：jquery, validation

我在[http://validator.w3.org](http://validator.w3.org)中的页面显示了一个错误：

```
$("<input type='text' />") 
```

为什么？我的代码无效吗？我提供一段代码。请帮忙。

```
<form action="{$smarty.const.APP_URL}user/login/" method="post">
    <table style="margin:0 auto 0 auto;">
        <tr>
            <td><input type="text" size="25" name="user_login" value="Tw&#243;j login" onfocus="javascript:if(this.value=='Tw&#243;j login')this.value='';" onblur="javascript:if(this.value=='')this.value='Tw&#243;j login';" /></td>
            <td><input type="password" size="25" name="user_password" id="password" /></td>
            <td><input type="submit" class="btnLogin" value="" /></td>
        </tr><tr>
            <td colspan="3">
                <p align="right"><a href="{$smarty.const.APP_URL}user/register/">utwórz konto</a> | <a href="{$smarty.const.APP_URL}user/password-reminder/">zapomniałem hasła</a></p>
            </td>
        </tr>
    </table>
</form>
{/if}
{literal}
<script type="text/javascript">
    $(document).ready(function() {
        ("<input type='text' />")
            .attr("name", "password_mask")
            .attr("id", "password_mask")
            .attr("size","25")
            .val("Twoje has\u0142o")
            .insertAfter("#password");

        $("#password_mask").focus(function() {
            $(this).hide();
            $("#password").show().focus();
        });

        $("#password").hide().blur(function() {
            if($(this).val().length == 0) {
                $(this).hide();
                $("#password_mask").show();
            }
        });
    });
</script>
{/literal}
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:36:51.220

你有一个`$`缺失：

```
$(document).ready(function() {
    ("<input type='text' />")
---^ 
```

将其替换为：

```
$(document).ready(function() {
    $("<input type='text' />") 
```

可能是`{/if}`，`{literal}`smarty PHP 标签可能不会被 JavaScript 解析，如果它们没有被 Smarty 解析的话！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:51:53.280

这不是丢失`$`，而是验证器不解析 JS - 当它看到“”时，它会将其视为 html 节点 - 尝试将您的 javascript 移动到外部文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:55:27.793

根据您拥有的 DOCTYPE，JavaScript 代码可能需要像这样包装：

```
<script type="text/javascript">
<!--
    $(document).ready(function() {
        $("<input type='text' />")
        //...
    });
//-->
</script> 
```

这将有效地告诉 HTML 验证器忽略内容。

# wordpress - Wordpress 404 页面的噩梦

> ID：14799270
> 
> 赞同：0
> 
> 时间：2013-02-10T15:25:58.180
> 
> 标签：wordpress, error-handling, wordpress-theming

我已经创建了我的第一个自定义主题，并且我想为我的 404.php 页面设置样式，以便让组合主题保持站点范围。我的永久链接使用 /%postname%/ 选项都可以正常工作，但在我的一生中无法获得我的 404 页面或任何其他要加载的页面。

如果我输入 mysite.com/i-dont-exist 或 mysite.com/i-dont-exist.php 似乎我被重定向到其他地方，但我不知道在哪里，我找不到相关文件。最重要的是，页面无法正确加载。

在页面的最顶部，我有以下随机剩余代码

```
nt_entries"> 
```

然后页面有主标题“最近的帖子”、“最常用的类别”、“档案”、“标签”。然后似乎加载到我的主题页脚文件中，但没有任何 css 样式。

为了帮助在每个文件中调试我的主题，我在其中添加了一个带有文件名的 h1 标签，这样我就可以看到每个主题文件何时被使用以及它们如何相互交互。理论上，我看到的页面应该显示标题“header.php”、“404.php”和“footer.php”，但我看到的只是“footer.php”标题，甚至没有来自我创建的任何其他文件的页面标题，并且我在同一个庄园中进行了测试，以查看它是否是基于通用根的 index.php 文件，而它不是。

在我看来，无论调用什么页面，它都没有在我的主题头文件中调用样式表的链接，也没有找到我的自定义 404 文件。

我的 htaccess 文件如下，但即使没有 errordocument 行它仍然给出相同的结果

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
ErrorDocument 404 /index.php?error=404
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

有谁知道可能会发生什么？我完全不知所措，切换主题并没有真正的区别。

# akka - Akka 2.1 Remote：跨系统共享actor

> ID：14799276
> 
> 赞同：3
> 
> 时间：2013-02-10T15:26:37.917
> 
> 标签：akka, actor, remote-actors

我正在学习 Akka 2.1 中的远程参与者，并尝试修改[Typesafe 提供的反例](https://github.com/typesafehub/akka-scala-sbt.g8/tree/akka-2.1-scala-2.10)。我从控制台实现了一个快速'n'dirty UI 来发送滴答声。并退出询问（并显示结果）当前计数。

这个想法是启动一个将运行 Counter actor 的主节点和一些将通过远程处理向其发送消息的客户端节点。但是，我想通过配置和对代码的最小更改来实现这一点。因此，通过更改配置，可以使用本地演员。

我发现[这个关于类似问题的博客条目](http://nurkiewicz.blogspot.no/2012/11/remote-actors-discovering-akka.html)，即使有许多实例正在运行，所有 API 调用都必须通过一个参与者。

我写了类似的配置，但我无法让它工作。我当前的代码确实使用了远程处理，但它在主节点上为每个新节点创建了一个新的参与者，如果没有明确地给它路径（并且无视配置点），我无法让它连接到现有参与者。然而，这不是我想要的，因为状态不能以这种方式在 JVM 之间共享。

[可通过 git repo](https://bitbucket.org/edofic/counter-remote)获得完整的可运行代码

这是我的配置文件

```
akka {
    actor {
        provider = "akka.remote.RemoteActorRefProvider"
        deployment {
            /counter {
                remote = "akka://ticker@127.0.0.1:2552"
            }
        }
    }
    remote {
        transport = "akka.remote.netty.NettyRemoteTransport"
        log-sent-messages = on
        netty {
            hostname = "127.0.0.1"
        }
    }
} 
```

和完整的来源

```
import akka.actor._
import akka.pattern.ask
import scala.concurrent.duration._
import akka.util.Timeout
import scala.util._

case object Tick
case object Get

class Counter extends Actor {
  var count = 0

  val id = math.random.toString.substring(2)
  println(s"\nmy name is $id\ni'm at ${self.path}\n")
  def log(s: String) = println(s"$id: $s")

  def receive = {
    case Tick =>
      count += 1
      log(s"got a tick, now at $count")
    case Get  =>
      sender ! count
      log(s"asked for count, replied with $count")
  }
}

object AkkaProjectInScala extends App {
  val system = ActorSystem("ticker")
  implicit val ec = system.dispatcher

  val counter = system.actorOf(Props[Counter], "counter")

  def step {
    print("tick or quit? ")
    readLine() match {
      case "tick" => counter ! Tick
      case "quit" => return
      case _ =>
    }
    step
  }
  step

  implicit val timeout = Timeout(5.seconds)

  val f = counter ? Get
  f onComplete {
    case Failure(e) => throw e
    case Success(count) => println("Count is " + count)
  }

  system.shutdown()
} 
```

我用`sbt run`和在另一个窗口`sbt run -Dakka.remote.netty.port=0`中运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:19:02.820

我发现我可以使用某种模式。Akka remote 仅允许在远程系统上进行部署（无法找到一种仅通过配置使其在远程上查找的方法……我在这里弄错了吗？）。

所以我可以部署一个“侦察员”来传回 ActorRef。可运行代码在分支“scout-hack”下的原始仓库中可用。因为这感觉就像一个黑客。我仍然会欣赏基于配置的解决方案。

演员

```
case object Fetch

class Scout extends Actor{
  def receive = {
    case Fetch => sender ! AkkaProjectInScala._counter
  }
} 
```

Counter actor 创建现在是懒惰的

```
lazy val _counter = system.actorOf(Props[Counter], "counter") 
```

所以它只在master上执行（由端口决定）并且可以像这样获取

```
val counter: ActorRef = {
  val scout = system.actorOf(Props[Scout], "scout")
  val ref = Await.result(scout ? Fetch, timeout.duration) match {
    case r: ActorRef => r
  }
  scout ! PoisonPill
  ref
} 
```

和完整的配置

```
akka {
    actor {
        provider = "akka.remote.RemoteActorRefProvider"
        deployment {
            /scout {
                remote = "akka://ticker@127.0.0.1:2552"
            }
        }
    }
    remote {
        transport = "akka.remote.netty.NettyRemoteTransport"
        log-sent-messages = on
        netty {
            hostname = "127.0.0.1"
        }
    }
} 
```

**编辑**：我还找到了一种简洁的方法：检查“counterPath”的配置，如果存在则为actorFor（path），否则创建actor。很好，你可以在运行时注入 master，代码比“scout”干净得多，但它仍然必须决定天气来查找或创建一个演员。我想这是无法避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:59:52.173

我尝试了你的 git 项目，它实际上工作正常，除了编译错误，你必须使用`-Dakka.remote.netty.port=0`jvm 的参数启动 sbt 会话，而不是作为`run`.

您还应该了解，您不必在两个进程中都启动 Counter actor。在此示例中，它旨在从客户端创建并部署在服务器上（端口 2552）。您不必在服务器上启动它。对于这个例子来说，在服务器上创建actor系统就足够了。

# c++ - std::vector - 错误：不能删除不是指针的对象

> ID：14799277
> 
> 赞同：1
> 
> 时间：2013-02-10T15:26:39.603
> 
> 标签：c++, compiler-errors

也许有人可以帮助我理解错误。

我写了这段代码：

```
class Text
{
private:
    struct paragraph
    {
        vector<string> lines;       
    };

    vector<shared_ptr<paragraph>> paragraphs; 
public:

    Text()
    {
        paragraphs.push_back(shared_ptr<paragraph>(new paragraph()));
    }
};

int main()
{
    shared_ptr<Text> pText(nullptr);
    Text text();
    pText.reset(&text);
    return 0;
} 
```

当我尝试运行它时，
我收到了这个错误：

```
 1>c:\program files\microsoft visual studio 10.0\vc\include\memory(1664): error C2541: 'delete' : cannot delete objects that are not pointers
1>          c:\program files\microsoft visual studio 10.0\vc\include\memory(1431) : see reference to function template instantiation 'void std::tr1::shared_ptr<_Ty>::_Resetp<_Ux>(_Ux (__cdecl *))' being compiled
1>          with
1>          [
1>              _Ty=Text,
1>              _Ux=Text (void)
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\memory(1607) : see reference to function template instantiation 'std::tr1::shared_ptr<_Ty>::shared_ptr<_Ux>(_Ux (__cdecl *))' being compiled
1>          with
1>          [
1>              _Ty=Text,
1>              _Ux=Text (void)
1>          ]
1>          c:\documents and settings\owner\שולחן העבודה\e\class.cpp(29) : see reference to function template instantiation 'void std::tr1::shared_ptr<_Ty>::reset<Text(void)>(_Ux (__cdecl *))' being compiled
1>          with
1>          [
1>              _Ty=Text,
1>              _Ux=Text (void)
1>          ] 
```

什么是“不能删除不是指针的对象”？
我不想删除任何对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:30:21.170

除了最令人头疼的解析之外，您的代码还包含一个基本缺陷：

**您不得将指向堆栈分配对象的指针分配给`shared_ptr`.**

此代码将导致未定义的行为，这在实践中意味着很多痛苦：

```
shared_ptr<Text> pText(nullptr);
Text text;
pText.reset(&text); 
```

`shared_ptr`将尝试`delete &text`在其生命周期结束时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:29:02.950

这条线`Text text();`没有做你认为它做的事情。

它将它解析为一个名为的*函数*`text`的声明，该函数不接受任何参数并返回一个 type 的值`Text`。

这就是您的行`pText.reset(&text);`无法编译的原因。

但是，您确实**不**希望编译该行：您正在将一个`shared_ptr`对象与具有自动存储持续时间的值相关联：当`shared_ptr`超出范围时，它将尝试`delete`该对象，导致**未定义的行为**（很可能在这个案例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:31:19.190

你`main`的功能应该读。

```
int main()
{
    shared_ptr<Text> pText(new Text);
    return 0;
} 
```

你有2个问题。首先，`Text text()`被解析为函数声明。其次，您将堆栈变量的地址传递给 a ，当引用计数达到 0 时`shared_ptr`，它将成为对象。`delete`

您还应该考虑是否需要使用`shared_ptr`. 您是否会与其他任何主体共享此指针，或者您只是想确保它被正确销毁？你可以考虑`unique_ptr`后一种情况。你甚至需要一个指针，你能在堆栈上分配对象吗？

# facebook - 如何让所有喜欢 Facebook 的人发帖？

> ID：14799280
> 
> 赞同：2
> 
> 时间：2013-02-10T15:26:56.963
> 
> 标签：facebook, facebook-graph-api, facebook-like

我有 FB[帖子](https://www.facebook.com/Eventinarea/posts/336638873112346)
，我可以点击“77 个人这样的人”并获得所有我需要的人。
问题：有没有办法通过 FB API 获得这些人？
PS 我想从这些列表中获得 3 个随机名称，所以我需要这些人的 JSON 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:36:47.803

使用 FQL 很容易做到。这会为您提供三个喜欢此活动的人的随机 ID

```
SELECT user_id FROM like WHERE object_id = 336638873112346 ORDER BY rand() LIMIT 3 
```

如果你想得到他们的名字，你可以像这样重写查询：

```
SELECT uid, name, username FROM user WHERE uid IN 
 (SELECT user_id FROM like WHERE object_id = 336638873112346 ORDER BY rand() LIMIT 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-08T11:07:01.480

我是[Kither](https://www.kither.io "基瑟")的联合创始人之一，这是一个检查你所有 Facebook 统计数据的平台。我们添加了许多需要获取所有用户喜欢的帖子的功能。

[自 2016 年 8 月 6 日起，FQL 已弃用。](https://developers.facebook.com/docs/reference/fql/)

Facebook 的 Graph API 仍然可用，你可以打电话**`https://graph.facebook.com/{api-version}/{post-id}/likes`**来获得帖子的赞。但请记住，如果点赞数超过 1,000，Facebook 会使用分页。

现在，在这种情况下，您需要调用下一页 url。

[![Facebook Likes 的分页](../Images/418e55995839a0c50525947bcb6e4b93.png)](https://i.stack.imgur.com/QtxXo.png)

除非你得到了所有的赞，否则你需要调用**下一个url。***（如果没有更多赞，**您将找不到任何**下一个字段）***

要了解有多少人喜欢该帖子（即计数），您无需翻阅结果。您可以简单地使用**`https://graph.facebook.com/{api-version}/{post-id}/likes?summary=true`**，您将获得一个包含所有喜欢摘要的额外字段，包括他们的计数。

**评论**和最近添加的**反应**也可以这样做。

# javascript - 分解javascript中的数学表达式

> ID：14799282
> 
> 赞同：0
> 
> 时间：2013-02-10T15:27:13.153
> 
> 标签：javascript, regex, string

我有一个文本框，其中输入是一个简单的数学表达式，例如`2+323*4.5/5`or `2 + 323*4.5 /5`（我的意思是应该忽略空格）。**整数和浮点数**都可以作为输入并且可以接受。我想分解这个表达式的每个元素（**操作数和运算符**）并将它们保存到一个数组中，以便我可以将第一个操作数、第一个运算符和第二个操作数（作为原子计算的参数）发送到PHP页面（服务器）然后在得到服务器的响应后，将第二个操作符和第三个操作数与服务器之前的响应一起发送，以执行另一个原子操作等等。

例如，如果初始字符串是`2 + 323*4.5 /5`，我的数组（结果）应该如下所示：

[2, +, 323, *, 4.5, /, 5]。

我使用的匹配方法如下：

```
var expr = document.getElementById("txtExpr").value; 
var tokens = expr.match(/-*\/?[0-9]/g); 
```

但我不能使用“+”号，结果数组不是我要找的。它将运算符连接到下一个操作数。

**PS：我也需要接受/获取负数。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:32:17.290

```
"2 + 323*4.5 / 5".match(/\d*\.\d+|\d+|[/*+-]/g);
// >> ["2", "+", "323", "*", "4.5", "/", "5"] 
```

# jquery - ajax 提交后：Uncaught SyntaxError: Unexpected token <

> ID：14799284
> 
> 赞同：0
> 
> 时间：2013-02-10T15:27:24.447
> 
> 标签：jquery, ajax, cdata

我尝试使用 cdata 但无法正常工作的代码中有错误。**谢谢您的帮助**

```
 $(document).ready(function webservice(){ 

        $.mobile.loading( 'show', {
         text: 'Start application...',
         textVisible: true,
         theme: 'a',
         html: ""
        });

        $.ajax({
        type: "POST",
        url: "//webservice.domain.ltd/connect/app/device.asmx",
        dataType: "jsonp",
        success: function(response) {
        var redirect = response.getHeader('Location');
        document.location = redirect;
        }

        });

}); 
```

# php - 如何使用作曲家安装 SonataIntlBundle？

> ID：14799285
> 
> 赞同：1
> 
> 时间：2013-02-10T15:27:26.983
> 
> 标签：php, symfony-2.1, composer-php, symfony-sonata, intl

我阅读[了文档](http://sonata-project.org/bundles/intl/master/doc/reference/installation.html)，但是当我这样做时：

```
php composer.phar require sonata-project/intl-bundle 
```

我的控制台中有这条消息：5

```
Please provide a version constraint for the sonata-project/intl-bundle requirement: 
```

所以我尝试了“master”或“2.*”，但这不起作用。

我正在使用带有 php_intl 扩展名的 Symfony 2.1.7 和 PHP 5.4.3。

如果有人可以帮助我...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:30:41.113

您应该查看[他们的软件包](https://packagist.org/packages/sonata-project/intl-bundle)以确定您想要的软件包版本。在这种情况下，你只有一个`dev-master`版本，所以你应该运行这个：

```
$ php composer.phar require sonata-project/intl-bundle:dev-master 
```

有关如何使用作曲家安装捆绑包的更长答案，请参阅[另一个问题的答案](https://stackoverflow.com/a/13340180/1149495)

# javascript - 使用 javascript 更改整个网站的字体大小的按钮

> ID：14799291
> 
> 赞同：1
> 
> 时间：2013-02-10T15:28:04.027
> 
> 标签：javascript, html, fonts, web, accessibility

我正在尝试实现可访问性工具，并且在单击按钮后我设法更改了段落的字体大小，但我尝试更改代码以使其适用于所有段落但不起作用

```
<script>

function myFunction()

{
 var p =document.getElementsByTagName('p'); // Find the element
p.style.fontSize="1.5em";          // Change the style
}
</script>

<button type="button" style="background: #ccc url(images/small.jpg);  padding: 0.3em 1em"   onclick="myFunction()"></button> 
```

这就是它以前只对一个段落起作用的方式，但我正在尝试不止一个：

```
<script>
function myFunction()
{
x=document.getElementById("demo") // Find the element
x.style.fontSize="3.0em";          // Change the style
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:32:25.047

`getElementsByTagName` returns a [NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList), which is like an array, so you have to loop through them and apply the style to each element:

```
function myFunction() {
    var arr = document.getElementsByTagName('p');
    for (var i = 0; i < arr.length; i++) {
        arr[i].style.fontSize = "1.5em";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:34:22.967

Your issue in the first code block is that getElementsByTagName returns an nodeList of elements (which you can pretend is an array). So you would need to do this:

```
var p =document.getElementsByTagName('p'); // Find the element
for(var i=0; i<p.length; i++) {
  p[i].style.fontSize="1.5em";          // Change the style
  } 
```

However, a better approach would be to define some css classes to do this job for you.

```
<style>
body { /*normal size*/
  font-size: 1em;
}

body.largeFont {
  font-size: 1.5em;
}
</style>

<script>
function largeFont() {
  document.body.className="largeFont";
}
</script> 
```

# codeigniter - 在 codeigniter 中重写 domain.com/username mod

> ID：14799297
> 
> 赞同：0
> 
> 时间：2013-02-10T15:28:49.177
> 
> 标签：codeigniter, mod-rewrite

我是模式重写的新手。几天前开始使用 codeigniter 并试图掌握它。我正在开发一个需要 domain.com/USERNAME 以获得更好的 SEO 结果的网站。但我无法弄清楚我应该写什么 mod rewrite 来实现这一点。我已经删除了配置中的 index.php 条目，我的基本 url 是`http://127.0.0.1/myproject/`. （我正在使用 XAMPP）所以我必须以这种格式搜索用户名

`http://127.0.0.1/myproject/USERNAME`

并返回相应的页面。我当前的 mod 重写文件如下：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

有什么建议么？感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:07:52.413

[http://daparky.com/codeigniter-vanity-username-personalized-urls/](http://daparky.com/codeigniter-vanity-username-personalised-urls/)

这应该可以解决您的问题。

# c# - Solving project euler number 6 in C#

> ID：14799299
> 
> 赞同：-1
> 
> 时间：2013-02-10T15:29:30.750
> 
> 标签：c#

I am trying to solve the [Project Euler problem number 6](http://projecteuler.net/problem=6) with the following program:

```
double counter = 1;
double sumsquare = 0;
double squaresum = 0;
while (counter <= 100)
{
  sumsquare += Math.Pow(counter, 2);
  squaresum += counter;
  counter++;
}
Math.Pow(squaresum, 2);
Console.WriteLine("the sum is {0} ,the square is :{1}", squaresum.ToString(), sumsquare.ToString());
double diff = sumsquare - squaresum;
Console.WriteLine(diff.ToString());
Console.ReadLine(); 
```

However, the answer was wrong. Can anyone tell me what the problem is with my code?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:36:12.323

你有一个错误，你正在计算一个幂然后丢弃它。

更一般地说，在解决涉及整数的 PE 问题时，您应该避免使用 double。双打只精确到小数点后十五位；在那之后，他们四舍五入。

更好的类型是*long*，它可以表示最大为 9,223,372,036,854,775,807 的整数或 decimal，它可以表示最大为 79,228,162,514,264,337,593,543,950,335 的整数，或者 BigInteger，它可以表示任意大的值。

请注意，当您使用越来越大的类型时，代码通常会变慢。

更一般地说，现在是学习如何使用调试器的好时机。找出您可以手动计算的非常小的情况下程序的输出应该是什么。然后逐行检查你的程序，看看哪里出错了。这是一种比询问互联网更有效的调试问题的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T15:34:58.647

You seem to think that `Math.Pow(squaresum, 2);` modifies `squaresum`. That's not so: it *returns* a square of `squaresum`, and you should assign it to `squaresum` if you want the variable to be modified.

```
squaresum = Math.Pow(squaresum, 2); 
```

Also the idea of using `double` type here is not quite good, but it appears that you won't lose enough precision here to get a wrong result.

# wix - 使用热生成的片段？

> ID：14799303
> 
> 赞同：2
> 
> 时间：2013-02-10T15:30:13.920
> 
> 标签：wix

我已经为我的整个输出创建了一个片段，就像这样

```
"%WIX%\bin\heat" dir ..\Output -nologo -suid -srd -sfrag -ag -wx -dr "INSTALLFOLDER" -var var.OutputDir -out ..\FreePIE.Setup\main.wxs 
```

如何从我的 Product.wxs 中使用它？

该文档对如何使用Heat非常含糊

**编辑：** 更进一步，现在当我构建时（使用 msbuild）

```
msbuild ..\FreePIE.Setup\FreePIE.Setup.wixproj 
```

我明白了

> 未定义的预处理器变量“$(var.OutputDir)”。

**编辑：使用 Candle 和 light exes 的最终解决方案**

```
 <Target Name="Candle">
    <Exec WorkingDirectory="$(InstallerTemp)" Command="&quot;$(WIX)\candle.exe&quot; -dOutputDir=&quot;..\Output&quot; -dVersion=&quot;$(Version)&quot; -dProductName=&quot;FreePIE&quot; $(InstallerTemp)\Main.wxs $(InstallerTemp)\Output.wxs"/>
  </Target>

  <Target Name="Light">
    <Exec WorkingDirectory="$(InstallerTemp)" Command="&quot;$(WIX)\light.exe&quot; -ext WixUIExtension -ext WiXNetFxExtension -out FreePIE.$(Version).msi $(InstallerTemp)\Main.wixobj $(InstallerTemp)\Output.wixobj"/>
  </Target> 
```

Main.wsx 保存主要定义，Output.wxs 保存产生的热量 wsx。-dOutputDir= 设置标志

有关完整的解决方案，请参阅 [https://github.com/AndersMalmgren/FreePIE/tree/master/BuildTools](https://github.com/AndersMalmgren/FreePIE/tree/master/BuildTools)

调用所有逻辑的批处理是 [https://github.com/AndersMalmgren/FreePIE/blob/master/BuildTools/build_installer.bat](https://github.com/AndersMalmgren/FreePIE/blob/master/BuildTools/build_installer.bat)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:42:07.717

接下来你应该做：

1.  将预处理器变量添加到您的项目中。项目-> 属性-> 构建输出目录=我的路径

2.  将组名添加到您的命令`-cg MyFilesGroup`

3.  将 MyFilesGroup 添加到您的产品功能

    <功能 ID=ProductFeature" Title="$(var.ProductName)" Level="1">

    <ComponentGroupRef Id="MyFilesGroup"/>

    </功能>

# java - 需要有关碰撞处理的建议

> ID：14799307
> 
> 赞同：1
> 
> 时间：2013-02-10T15:30:26.587
> 
> 标签：java, 2d, user-input, collision, terrain

我正在制作一个 2D 游戏，没有什么花哨的，它的对象（从现在开始称为实体）应该与彼此和地形发生碰撞。现在，检测碰撞不是问题，问题是实体何时与地形发生碰撞。

我有一个简单的 .png，在加载游戏时，我会检查该图像的所有像素并将所有黑色像素添加到列表中，这些是可碰撞的像素。

来自实体类的碰撞代码：

```
 int ceiling = Integer.MAX_VALUE;
    int floor = 0;
    int rightPoint = 0;
    int leftPoint = Integer.MAX_VALUE;

    for(Point p : main.terrain.points)
        if(getHypoRect().contains(p))
        {
            if(p.x > rightPoint && right)
                rightPoint = p.x;
            if(p.x < leftPoint && left)
                leftPoint = p.x;
            if(p.y < ceiling && up)
                ceiling = p.y;
            if(p.y > floor && down)
                floor = p.y;
        }
    if(rightPoint != 0)
        xCoord = rightPoint - sprite.getImage().getWidth();
    else if(right)
        xCoord+=speed;

    if(leftPoint != Integer.MAX_VALUE)
        xCoord = leftPoint;
    else if(left)
        xCoord-=speed;

    if(ceiling != Integer.MAX_VALUE)
        yCoord = ceiling;
    else if(up)
        yCoord-=speed;

    if(floor != 0)
        yCoord = floor - sprite.getImage().getHeight();
    else if(down)
        yCoord+=speed; 
```

在 for 循环中，我遍历地形中的所有点（黑色像素），然后检查实体的碰撞框是否包含它们（在此方法中添加了速度，或者更确切地说是“假设”添加，这就是它具有奇怪名称的原因）。现在，如果该点的 x 值大于“右点”，并且实体向右走，则将其覆盖。leftPoint（“最左”点）、天花板和地板也是如此。然后我检查这些点中是否有任何改变，如果有，这意味着我们与地形相撞，所以我们将它们反弹回来。例如，假设实体向右走并且我们与地形相撞，rightPoint 已被写为“最右边”

如果一个人一次只朝一个方向前进，这将非常有效，但是当您考虑多个输入时会发生“奇怪”的事情。

示例：实体走平到地板上，走向右侧的窗台，当实体在窗台上的一半时，它想往下走，所以向右和向下都被按下，我的代码将做的是检查输入，将实体放在它想要的位置，然后在它撞到地形时将其弹回，所以它会看到我按下右并将实体弹回壁架的末端。

这是我对地形碰撞如何工作的全部想法，除了如何检查是否发生碰撞之外，我在网上找不到任何东西，但没有任何内容涵盖这一点。知道什么可以使我的解决方案起作用，或者指出应该如何进行地形碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:37:13.763

你的反弹想法可能有问题。尝试忽略与地形碰撞的
移动：如果玩家向下和向右移动，则首先检查向下是否会碰撞，如果是，则忽略该移动，并检查是否正确，如果可能向右移动，否则块，太。

# php - 调整图像大小并将图像裁剪为白色背景的正方形 - 使用 GD

> ID：14799311
> 
> 赞同：2
> 
> 时间：2013-02-10T15:31:07.807
> 
> 标签：php, caching, thumbnails, gdlib

我有一个脚本，它缓存来自外部提要的图像，并在现场查看图像时将它们存储在我服务器上的目录中。

目前它工作得很好 - 将原始图像存储在我的服务器上并创建两个额外的缩略图，它们的宽度重新调整为 300 像素和 150 像素。

我想稍微改变一下，以便发生以下情况：

1.  完整/原始图像存储在服务器上（正常）
2.  创建了一个300x300px 和 150x150px 的正方形 .jpg**缩略图**

但是，是否有可能，一旦图像宽度/高度调整大小，然后添加额外的画布宽度/高度以使其完全正方形？我想这里的问题之一是首先确定图像是“肖像”还是“风景”？

此外，目前我正在获得带有透明 PNG 图像的黑色背景。有什么办法可以克服这个问题并用白色填充背景吗？

非常感谢您的帮助！！:)

**这是正在调整大小的代码（imageCache.php）：**

```
<?php
  function cacheFetch($url,$size,$age)
  {
// directory in which to store cached files, must be writable by PHP
$cacheDir = "cache/";
// cache filename constructed from MD5 hash of URL
$filename = $cacheDir.md5($url);
// append size to filename if not 0
if ($size) $filename .= "_".$size;
// default to fetch the file
$fetch = true;
// but if the file exists, don't fetch if it is recent enough
if (file_exists($filename))
{
  $fetch = (filemtime($filename) < (time()-$age));
}
// fetch the file if required
if ($fetch)
{
  if (substr($url,0,4)=="http")
  {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    $data = curl_exec($ch);
    curl_close($ch);
    if (strlen($data))
    {
      $fp = fopen($filename,"w");
      fwrite($fp,$data);
      fclose($fp);
      $error = false;
    }
    else
    {
      $error = true;
    }
  }
  else
  {
    copy($url,$filename);
    $error = false;
  }
}
// return the filename only if wget did not fail
if (!$error)
{
  if ($size)
  {
    $src = file_get_contents($filename);
    $oldImage = imagecreatefromstring($src);
    $oldX = imagesx($oldImage);
    $oldY = imagesy($oldImage);
    if ($oldX && $oldY)
    {
      $newX = $size;
      $xFactor = ($newX / $oldX);
      $newY = intval($oldY * $xFactor);
      $newImage = imagecreatetruecolor($newX,$newY);
      imagecopyresized($newImage, $oldImage, 0,0,0,0, $newX, $newY, $oldX, $oldY);
      imagejpeg($newImage,$filename);
    }
  }
  return $filename;
}
else
{
  // as an error occured, delete the empty file so it is retried next time
  unlink($filename);
  // return false
  return false;
}
}
require("includes/common.php");

$id = $_GET["id"];

$size = $_GET["size"];

$sql = "SELECT image_url FROM `".$config_databaseTablePrefix."products` WHERE id='".database_safe($id)."'";
if (database_querySelect($sql,$rows))
{
$src = $rows[0]["image_url"];

$src = cacheFetch($src,$size,604800);

$img = file_get_contents($src);

header("Content-Type: image");

print $img;
  }
?> 
```

这是具有大小的 .htaccess 位：

```
RewriteRule ^fullimage/(.*).jpg$ imageCache.php?id=$1&size=0 [L]
RewriteRule ^smallimage/(.*).jpg$ imageCache.php?id=$1&size=150 [L]
RewriteRule ^mediumimage/(.*).jpg$ imageCache.php?id=$1&size=300 [L] 
```

* * *

编辑：重新工作的代码：

```
if ($size)
{
    $src = file_get_contents($filename);
    $oldImage = imagecreatefromstring($src);
    $oldX = imagesx($oldImage);
    $oldY = imagesy($oldImage);
    if ($oldX && $oldY)
    {
      $color = imagecolorallocate($newImage, 255,255,255);  //The three parameters are R,G,B
  imagefilledrectangle ($newImage, 0, 0, $newX,  $newY,$color);
      $size = max($newX,$newY);
      $newImage = imagecreatetruecolor($newX,$newY);
      imagecopyresized($newImage, $oldImage, ($size-$newX)/2,($size-$newY)/2,0,0, $newX, $newY, $oldX, $oldY);  //Just the coordinates was changed
      imagejpeg($newImage,$filename); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:48:16.093

抱歉，我不会将我的建议添加到您的代码中，因为它太复杂了。所以只是提示。

### 1.如何使调整后的图像变成正方形？

显然，我们必须创建原始图像更大尺寸的正方形。在这里，我假设图像已经调整大小。

```
$resized = /*We hae resized image downloaded from the site [note1]*/;
$size = max(imagesx($resized), imagesy($resized)); //Make the square so the thumbnail fits in it
$thumbNail = imagecreate($size, $size);  //Square.
imagecopy($thumbNail, 
          ($size-imagesx($resized))/2,   //Put the image in the middle of the square
          ($size-imagesy($resized))/2, 
          0,
          0,
          imagesx($resized),
          imagesy($resized)  
); 
```

**[note1]**或者，您可以只计算尺寸以在正方形上制作 $size 和 copyresize 图像。这会更快，但为它制作伪代码更复杂。

### 2.如何更改新图像的背景

这并不是真正的谜 - 您只需在整个图像上[绘制矩形：](http://cz.php.net/manual/en/function.imagefilledrectangle.php)

```
$color = imagecolorallocate($thumbNail, 255,255,255);
imagefilledrectangle ($thumbNail, 0, 0, imagesx($thumbNail),  imagesy($thumbNail),$color); 
```

你甚至可以有一个透明的背景：

```
$color = imagecolorallocatealpha($thumbNail, 255,255,255,127);
imagealphablending($thumbNail, false);  //[note2]
imagefilledrectangle ($thumbNail, 0, 0, imagesx($thumbNail),  imagesy($thumbNail),$color);
imagealphablending($thumbNail, true);  //If you use it 
```

**[note2]**关闭混合，因为`transparent`+ `black`=`black`再次

### 3\. 与答案相关的代码

首先是调整大小，复制。在原始代码中，我们在 和 中计算出新的高度和`$newX`宽度`$newY`。我将使用这些新的图像尺寸。

```
$size = max($newX,$newY);
$newImage = imagecreatetruecolor($size, $size);
imagecopyresized($newImage, $oldImage, ($size-$newX)/2,($size-$newY)/2,0,0, $newX, $newY, $oldX, $oldY);  //Just the coordinates was changed 
```

然后他背景。显然，您应该先设置背景，然后复制图像。但是，我将这些步骤分开，这样您就可以看到什么功能做了什么。

```
 $newImage = imagecreatetruecolor($newX,$newY);
 $color = imagecolorallocate($newImage, 255,255,255);  //The three parameters are R,G,B
 imagefilledrectangle ($newImage, 0, 0, $newX,  $newY,$color); 
```

# c++ - typedefing 非类型模板参数

> ID：14799312
> 
> 赞同：4
> 
> 时间：2013-02-10T15:31:14.017
> 
> 标签：c++, templates

我想访问类之外的模板参数。我通常这样做如下：

```
template <class T>
class A
{
  typedef typename T T;
}

A<int>::T; 
```

我希望能够对非类型模板参数做同样的事情。这不起作用：

```
template <int T>
class A
{
  typedef typename T T;
}

A<3>::T; 
```

我会澄清为什么我需要这个。我想定义第二个类如下：

```
template <class C>
class B
{
  static int func() {return C::T;}
}

B<A<3> >::func(); 
```

这样做的正确方法是什么？非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T15:34:01.113

那是因为`T`不是类型名称，您不能`typedef`使用它。它是一个`int`值，如果你想作为类的静态成员访问它，你需要一个静态成员`int`。似乎您真正想要的是：

```
template <int T>
class A
{
  public:
    static const int x = T;
};

doSomething(A<5>::x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:37:27.877

这是一个值，而不是一个类型，所以也许：

```
template <int T>
class A
{
  static const int param = T;
}; 
```

然后您可以将其作为`A<42>::param`. 并不是说它有多大帮助，除非 A 本身在其他地方用作模板参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T15:38:52.513

在第二种情况下，`T`不是类型，而是`int`值。因此，您应该将其定义为一个~~`const int`或~~ `static const int`值。

```
template <int T>
class A {
    static const int T = T;
}; 
```

请注意，习惯上使用`T`类型（特别是当模板是一元的时，因为类型没有歧义），以及常量的其他名称，通常是更有意义的名称，例如`SIZE`或最好使用`Size`（所有大写符号最好用于宏）。

```
template <int Param>
class A {
    static const int param = Param;
}; 
```

有关在模板定义的上下文中使用值的信息，请参阅其他 SO 问题（例如[这个问题）。](https://stackoverflow.com/questions/6397330/defining-static-const-variables-of-a-template-class)`static const`

# vim - 通过 IdeaVim 在 IntelliJ 中使用 Vim 插件

> ID：14799314
> 
> 赞同：9
> 
> 时间：2013-02-10T15:31:21.537
> 
> 标签：vim, intellij-idea

有没有办法可以通过 IdeaVim 在 IntelliJ 中使用 Vim 插件？在这种情况下，我正在寻找一种使用 easymotion Vim 插件的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T23:23:08.703

您可以使用`acejump`插件或`emacsIDEAs`（不要被它的名字吓到。它只是引入了 ace-jump 功能）插件与插件一起使用`IdeaVim`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-30T20:20:41.550

[KJump](https://github.com/a690700752/KJump)是 Vim EasyMotion 插件的克隆，旨在与 IdeaVim 集成。（但它也可以独立工作。）

# java - 位运算符意外行为

> ID：14799315
> 
> 赞同：1
> 
> 时间：2013-02-10T15:31:36.990
> 
> 标签：java, bitwise-operators

有人可以解释这个java按位运算符的行为吗？

```
System.out.println(010 | 4); //  --> 12
System.out.println(10 | 4);  //  --> 14 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T15:33:51.903

第一个数字被解释为八进制。所以`010 == 8`。

从那开始，不难看出，

```
8d | 4d == 1000b | 0100b == 1100b == 12d 
```

第二个数字被解释为十进制，产生

```
10d | 4d == 1010b | 0100b == 1110b == 14d 
```

*（其中`d`表示十进制数，`b`表示二进制数。）*

# android - 获取 E/AndroidRuntime(629)：java.lang.RuntimeException：无法启动活动 ComponentInfo 错误

> ID：14799316
> 
> 赞同：0
> 
> 时间：2013-02-10T15:31:40.533
> 
> 标签：android, android-layout

***Java 代码***

```
public class Main extends Activity {

private AudioManager mAudioManager;
private boolean mPhoneIsSilent;
    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    checkIfPhoneIsSilent();
    setButtonOnClickListener();
    mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
}
public void setButtonOnClickListener(){
    Button b = (Button) findViewById(R.id.toggleButton);
    b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            if (mPhoneIsSilent){
                //change back to normal mode
                mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                mPhoneIsSilent = false;
            }
            else {
                mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                mPhoneIsSilent = true;
            }
            //To toggle the UI
            toggleUI();
        }
    });
}
public void checkIfPhoneIsSilent(){
    int ringerMode = mAudioManager.getRingerMode();
    if (ringerMode == AudioManager.RINGER_MODE_SILENT){
        mPhoneIsSilent = true;
    }
    else {
        mPhoneIsSilent = false;
    }
}
public void toggleUI(){
    ImageView iv = (ImageView) findViewById(R.id.phone_icon);
    Drawable newImage;
    if (mPhoneIsSilent){
        newImage = getResources().getDrawable(R.drawable.phone_silent);
    }
    else {
        newImage = getResources().getDrawable(R.drawable.phone_on);
    }
    iv.setImageDrawable(newImage);
}
@Override
protected void onResume(){
    super.onResume();
    checkIfPhoneIsSilent();
    toggleUI();
} 
```

}

***日志跟踪***

```
02-10 20:19:58.198: D/dalvikvm(5870): GC_EXTERNAL_ALLOC freed 45K, 53% free 2544K/5379K, external 1869K/2137K, paused 86ms
02-10 20:19:58.258: D/AndroidRuntime(5870): Shutting down VM
02-10 20:19:58.258: W/dalvikvm(5870): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-10 20:19:58.278: E/AndroidRuntime(5870): FATAL EXCEPTION: main
02-10 20:19:58.278: E/AndroidRuntime(5870): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.parasmani.silentmodetoggle/com.parasmani.silentmodetoggle.Main}: java.lang.NullPointerException
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.os.Looper.loop(Looper.java:123)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at java.lang.reflect.Method.invokeNative(Native Method)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at java.lang.reflect.Method.invoke(Method.java:507)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at dalvik.system.NativeStart.main(Native Method)
02-10 20:19:58.278: E/AndroidRuntime(5870): Caused by: java.lang.NullPointerException
02-10 20:19:58.278: E/AndroidRuntime(5870):     at com.parasmani.silentmodetoggle.Main.checkIfPhoneIsSilent(Main.java:53)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at com.parasmani.silentmodetoggle.Main.onCreate(Main.java:22)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-10 20:19:58.278: E/AndroidRuntime(5870):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-10 20:19:58.278: E/AndroidRuntime(5870):     ... 11 more
02-10 20:24:58.423: I/Process(5870): Sending signal. PID: 5870 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:34:23.227

您的分配顺序与方法调用顺序`onCreate()`已关闭。你尝试`mAudioManager`在给它一些东西之前使用它，所以它是空的，并且抛出了一个 NPE。它需要是这样的：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    checkIfPhoneIsSilent();
    setButtonOnClickListener();
   } 
```

这种方式在被调用`mAudioManager`时不会为空，`checkIfPhoneIsSilent()`因为我们已经提前给了它一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:35:49.340

只是改变 ：

```
 checkIfPhoneIsSilent();
      setButtonOnClickListener();
      mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE); 
```

到：

```
 mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    checkIfPhoneIsSilent();
    setButtonOnClickListener(); 
```

# arrays - Powershell 比较具有不同属性的 2 个数组

> ID：14799328
> 
> 赞同：3
> 
> 时间：2013-02-10T15:32:32.870
> 
> 标签：arrays, powershell, compare

我有 2 个数组。两者都有文件大小的属性，但第一个数组中的属性名称是“SizeInByte”，另一个数组中称为“长度”。是否可以使用 compare-object 根据文件大小比较两个数组？到目前为止，我还没有找到一种方法来做到这一点:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T15:44:56.357

将一个数组传送到 Add-Member cmdlet 并为 Length 属性创建一个 SizeInByte 别名属性，然后按相同的属性名称比较这两个数组。

```
$LengthArr = $LengthArr | Add-Member -MemberType AliasProperty -Name SizeInByte -Value Length -PassThru
Compare-Object $LengthArr $SizeInByteArr -Property SizeInByte 
```

# python - Python Pyglet - '没有名为窗口的模块'

> ID：14799331
> 
> 赞同：0
> 
> 时间：2013-02-10T15:32:53.593
> 
> 标签：python, import, module, pyglet, pythonpath

我现在正在 Ubuntu 上尝试解决这个问题。我试图让 Pyglet 在 .py 脚本中工作。因此，我在 Ubuntu（2.7.3，Ubuntu v = 12.4）上使用默认安装的 Python。我使用： sudo apt-get install python-pyglet 并且运行正常。当我打开终端时，输入“python”并运行

```
import pyglet
import pyglet.window 
```

有用。但是，当我在 .py 中有这两个相同的单词并在终端中运行它时（通过“python“path to .py”'我得到：

```
 File "/home/parallels/Documents/Google/computer-vision/pyglet.py", line 3, in <module>
    import pyglet
  File "/home/parallels/Documents/Google/computer-vision/pyglet.py", line 4, in <module>
    import pyglet.window
ImportError: No module named window 
```

我的 PYTHONPATH（在 python 中输入 sys.path 显示为：

```
['', '/usr/lib/pymodules/python2.7', '/home/parallels', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client', '/usr/lib/python2.7/dist-packages/ubuntuone-client', '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel', '/usr/lib/python2.7/dist-packages/ubuntuone-couch', '/usr/lib/python2.7/dist-packages/ubuntuone-installer', '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol'] 
```

有谁知道库/安装出了什么问题使其无法正常工作？

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T02:07:14.247

您的模块名为`pyglet.py`. 因此，该`import`语句在您自己的模块中查找 submodule `window`，当然找不到它。更改脚本的文件名，然后重试。

# security - 脚本现在不在 webroot 中运行，所以如何运行它们并从 www 保持私有

> ID：14799332
> 
> 赞同：0
> 
> 时间：2013-02-08T22:56:15.180
> 
> 标签：security, webserver, authentication

我正在制作一个用户必须登录才能查看某些内容的网站。我通过将服务器根目录设置为`C:\WAMP\www\public`并将用户必须登录才能查看的所有文件放在不同的目录（即`C:\WAMP\www\private`）中来实现这一点。如果私有目录不在网络服务器上，登录用户如何访问私有目录中的文件？通过一个要求。

```
<?php
session_start();
$destination = $_GET['d'];
if(isset($_SESSION['loggedInUser']))
    require '../private/'.$destination;
else
    require 'signinrequired.html';
?> 
```

但有一个问题。如果我需要一个脚本，那么它将不会被解释，因为它不在网络根目录中（[如这里的答案中所述](https://stackoverflow.com/questions/14763416/trouble-accessing-file-in-other-directory-using-ajax-am-i-specifying-the-path-w)）。那么我该如何解决这个问题或完全重新设计系统呢？

解决方案：我感到困惑并编造了一个不存在的问题。可以通过将 HTML 文件存储在不在服务器根目录（也称为 Web 根目录，不管它叫什么）中并使用服务器根目录中的 PHP 文件包含它们来将 HTML 与 PHP 分开。由于 HTML 文件没有被解释（不是脚本），因此它可以工作。由于 PHP 文件由服务器解释，它们必须位于服务器根目录中，但由于它们被解释（并且源代码不只是提供给客户端），因此客户端无法看到程序的内部工作。如果其他人像我一样感到困惑，那么希望我能解释一下以解开他们的困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T23:29:05.660

你为什么不把你所有的私人内容都放在网络根目录里，然后在每个私人页面上做这样的事情呢？

```
<?php 
   if(!$logged_in){ header("Location:restricted.php"); exit;}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:24:24.533

作为一个快速而肮脏的解决方案，您可以使用`.htpasswd`Apache 别名的组合。作为一种解决方案，这不是非常可扩展的 - 您必须手动维护用户名列表并为您创建以明文形式发送的密码。很好，比如说，一个内部文档存储库。

如果您想要更具动态性和可扩展性的东西，那么无论您做什么，您当前的方法都将提供非常薄弱的​​保护。你最好加入[Symfony 的安全包](https://github.com/symfony/Security)，甚至使用 Drupal 之类的 CMS。

# vb.net - 如何在 Vb.Net 中将文本框限制为整数而不会出错？

> ID：14799336
> 
> 赞同：0
> 
> 时间：2013-02-10T15:33:15.260
> 
> 标签：vb.net, if-statement, integer, unhandled-exception

我目前正在尝试编写一个基于 USB 设备序列号与 USB 设备接口的程序。我让它部分工作，这样它就可以在文本框中接受正确的序列号，但是如果将除整数之外的任何东西放入框中，它将抛出错误。我怎样才能解决这个问题？到目前为止，我试图解决这个问题一直没有成功。简而言之，我希望程序从文本框中读取 5 位序列号并尝试连接，如果添加了除整数以外的任何内容，它只会向用户抛出一条消息，说明序列号不正确。这是我到目前为止所拥有的。

```
'Declares an integer to be used for custom serial numbers incase phidgets need to be swapped.
    Dim MC1Serial As Integer
    'Throws error if there's no real serial in the corresponding box.
    If TextSerial1.Text = 0 Then
        MsgBox("Please ensure you have a proper serial numbers in the textbox, and not 0")
    Else
        MC1Serial = TextSerial1.Text
    End If
    'Creates a new instance of a MC for the first controller.
    MC1 = New Phidget21COM.PhidgetMotorControl
    'Attempts to attach phidget and either checks the box or throws an error.
    MC1.Open(MC1Serial)
    MC1.WaitForAttachment(1000)
    If MC1.IsAttached = True Then
        CheckMC1.Checked = True
        'Enables the timer to allow the position of the buttons to update accordingly.
        TimerJoysticks.Enabled = True
    Else
        MsgBox("There was a problem finding MC1\. Check connections and settings.")
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:36:12.917

你可以做很多事情。[Val 函数](http://msdn.microsoft.com/en-us/library/k7beh1x9%28v=vs.71%29.aspx)就是其中之一。您还可以使用[IsNumeric](http://msdn.microsoft.com/en-us/library/6cd3f6w1%28v=vs.71%29.aspx)检查整个输入字符串是否实际上是一个数字。

```
If Not IsNumeric(TextSerial1.Text) or Val(TextSerial1.Text) = 0 Then
    MsgBox("Please ensure you have a proper serial numbers in the textbox, and not 0")
    ' You should exit the sub here so that the code doesn't continue.

Else
    MC1Serial = CInt(TextSerial1.Text)
End If 
```

# visual-studio-lightswitch - Lightswitch AddAndEditNew_Execute()

> ID：14799339
> 
> 赞同：1
> 
> 时间：2013-02-10T15:33:42.390
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

I need to open the dialog which appears after I click the Plus sign in data grid view. Which means, When i press my button, i need it to appear as if i clicked + button. But now i need to open the grid view and then click on the + button.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:11:11.170

假设您的屏幕集合称为“发票”，在您的方法代码中，您只需调用

**VB：**

```
Me.Invoices.AddAndEditNew 
```

**C＃：**

```
this.Invoices.AddAndEditNew(); 
```

# c# - N Tier layer - load details into object

> ID：14799344
> 
> 赞同：0
> 
> 时间：2013-02-10T15:34:01.237
> 
> 标签：c#, .net, vb.net, n-tier-architecture

I created a website using the following structure:

**Class Project** - Called DataAccessLayer > Added a Dataset > Add a tableAdapter and Datatable with a query called GetcustomersByID(ID)

**Class Project** - Called BusinessLayer > Created some code to call into the DataAccessLayer and return the results in a CustomerDataTable for the query GetcustomersByID(ID)

**Web Project** - Added a reference to the BusinessLayer.

From this point i can add an ObjectDataSource and tie it to the Business Layer and call the appropriate method (in this example GetCustomersByID(ID)).

I then wanted to add an extra layer where i was hoping to load all customer data into a customer object. So i add another **class** called **Customers** and add all the fields as [B]properties [/B](CustomerID, FirstName, Surname, AddressOne etc).

How could i load all the details from the BusinessLayer into this object, so i could write code such as

```
Dim myCustomer as Customer
....
...... Some code to get the data and load it into the Customer object.

If myCustomer.Firstname = "Bob" Then
....
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:21:37.407

好吧，我不知道您希望这个应用程序扩展到什么程度，但您可能需要考虑查看 Active Record 模式或 Domain Model 模式，以帮助决定如何构建您的层。

您可以使用 DTO 或 POCO 对象代替填充数据表，并使用像 Dapper.NET 这样的 ORM 将数据直接填充到它们中。然后您可以使用 AutoMapper 从 DTO 填充您的业务对象。

如果您使用 Active Record，您可以让您的业务对象直接调用数据并自行填充。

你可以做无数不同的事情。

此外，您可能不希望前端调用服务层或外观层，而不是直接调用您的业务逻辑。

或者更好的是删除关系数据源并使用 RavenDB 或 Mongo 等文档数据库，并一起删除冗余层调用。存储灵活的数据对象而不是死板的行。然后您会发现填充您的业务对象将是一件轻而易举的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:36:53.890

为了从数据表中提取数据，您可以执行以下操作：

```
Customer customer = dt.AsEnumerable().Select(row => 
        // construct and map all the properties
        new Customer
        {
            Id = row.Field<int>("Id"),
            Firstname = row.Field<string>("Name")
        }).FirstOrDefault(); 
```

在 VB.NET 中是这样的（虽然，我不是 VB 人）：

```
Dim customer As Customer = dt.AsEnumerable().[Select](Function(row) New Customer() With     { _
    Key .Id = row.Field(Of Integer)("Id"), _
    Key .Firstname = row.Field(Of String)("Name") _
}).FirstOrDefault() 
```

# php - 如何访问 RedBeansPHP 对象的第二个数组？

> ID：14799345
> 
> 赞同：-1
> 
> 时间：2013-02-10T15:34:02.843
> 
> 标签：php, arrays, object, orm, redbean

我正在使用 RedBeansPHP 3.3 并有以下由 RedBeans findOne 创建的名为 $result 的 PHP 对象：

```
RedBean_OODBBean Object
(
    [null:RedBean_OODBBean:private] => 
    [properties:RedBean_OODBBean:private] => Array
        (
            [id] => 10
            [datetime] => 2013-02-10 10:17:43
            [ip] => 68.32.52.219
            [vcode] => 6780-QBDY
            [roll1] => 7
            [roll2] => 8
            [roll3] => 10
            [roll4] => 6
            [roll5] => 1
            [roll6] => 4
            [roll7] => 2
            [roll8] => 4
            [roll9] => 2
            [roll10] => 8
        )

    [__info:RedBean_OODBBean:private] => Array
        (
            [type] => dice
            [sys.id] => id
            [tainted] => 
            [sys.orig] => Array
                (
                    [id] => 10
                    [datetime] => 2013-02-10 10:17:43
                    [ip] => 68.32.52.219
                    [vcode] => 6780-QBDY
                    [roll1] => 7
                    [roll2] => 8
                    [roll3] => 10
                    [roll4] => 6
                    [roll5] => 1
                    [roll6] => 4
                    [roll7] => 2
                    [roll8] => 4
                    [roll9] => 2
                    [roll10] => 8
                )

        )

    [beanHelper:RedBean_OODBBean:private] => RedBean_BeanHelper_Facade Object
        (
        )

    [fetchType:RedBean_OODBBean:private] => 
    [withSql:RedBean_OODBBean:private] => 
    [aliasName:RedBean_OODBBean:private] => 
) 
```

我想访问`[type] => dice`第二个数组中的值。什么是 PHP 语法？

$result->?????????->type [我关闭了吗？]

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:55:06.163

想让任何人知道谁在寻找我从 RedBeans 创建者那里得到的答案。

您可以通过以下方式访问 RedBeans 类型：

```
$beanTable = $bean->getMeta('type'); 
```

# google-maps-api-3 - Google Maps Marker Clusterer 和信息窗口

> ID：14799349
> 
> 赞同：0
> 
> 时间：2013-02-10T15:34:29.573
> 
> 标签：google-maps-api-3, infowindow, markerclusterer

我有以下代码来尝试让 MarkerClusterer 库为我的谷歌地图工作，它的工作。但是，当我尝试通过单击地图关闭所有信息窗口时，集群器上的信息窗口不起作用。在这里查看我的工作：http: [//www.concepteur-internet.fr/test_carto1.php](http://www.concepteur-internet.fr/test_carto1.php) 你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:53:44.643

改变：

```
 google.maps.event.addListener(map, 'click', function(){
                //infowindow.close();
             }); 
```

到：

```
 google.maps.event.addListener(map, 'click', function(){
                infowindow.close();
             }); 
```

# c++ - 几个相同大小的向量。给定一个向量中的元素，快速访问其他向量中的对应元素

> ID：14799351
> 
> 赞同：0
> 
> 时间：2013-02-10T15:34:55.943
> 
> 标签：c++

```
std::vector<std::string> vec1, vec2, vec3, vec4;
//populate all vectors, all have the same size
//vec1 has different values 
```

现在给定vec1中的一些“key”，比如“foo”，如何快速从其他向量中获取对应的字符串？

我将不得不多次这样做，在 vec1 中使用不同的键，所以这个操作必须很快。

我应该创建一个将 vec1 中的元素映射到索引值（0、1、2、3、4 ...）的映射吗？

这在 C++ 中如何最好地完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:42:26.340

取决于您所说的“快速”是什么意思。

如果您关心按值检索的**复杂性**，我建议考虑使用关联容器，例如`std::unordered_set`（常量查找和插入/删除时间）或`std::set`和`std::multiset`（对数查找和插入/删除时间，第二个允许重复）一个`vector`。

但是，必须说`vector`s 分配了一个连续的内存区域来存储它们的元素，因此线性访问会导致缓存命中率很高：因此，即使复杂性更差，访问总体上仍然“快”，并且您可以使用常规 STL 算法，例如`std::find`或`std::find_if()`来查找匹配给定值或满足给定谓词的元素。

通常，数据的局部性可以弥补更糟糕的复杂性。这里的关键是始终进行重复**测量**以确定什么是能够为您提供最佳性能的解决方案。

也就是说，最佳解决方案可能取决于您的**整体工作量**：您是否正在对向量进行逐个元素的迭代？您需要多久*按位置*检索一次元素？如果这些不是频繁的操作，您可能不需要向量。此外，这些向量多久更新一次？您需要多久*按值*在这些向量中查找一个元素？您的问题对此并没有多说。

如果内存开销对您来说不是问题，您当然可以考虑构建一个单独的映射作为索引，并维护冗余结构。但是，如果您`vector`的 s 会频繁地通过插入和删除来更新，那么确保索引和`vector`s 的一致性可能会变得很麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:42:17.267

听起来你真正想要的是一个`std::unordered_map<std::string, std::tuple<std::string, std::string, std::string>>`. 这将使您不必维护`std::vector`s 必须是相同长度的不变量。它还将为您提供其他字符串的**持续时间**查找。例如，

```
typedef std::tuple<std::string, std::string, std::string> value_type;
std::unordered_map<std::string, value_type> map;

// Populate the map
map["foo"] = std::make_tuple("first", "second", "third");
// ...

std::get<0>(map["foo"]); // Get the first string that "foo" maps to 
```

如果你真的不想改变使用四个`std::vector`s 的设计，那么你应该使用`std::find`and在第一个`std::distance`中找到索引，然后在其他索引上使用该索引：`"foo"``std::vector`

```
auto key_it = std::find(std::begin(vec1), std::end(vec1), "foo");
int index = std::distance(std::begin(vec1), key_it);
std::string s2 = vec2[index];
std::string s3 = vec3[index];
std::string s4 = vec4[index]; 
```

# database - Wordpress database - You have an error in your SQL syntax

> ID：14799356
> 
> 赞同：0
> 
> 时间：2013-02-10T15:35:17.467
> 
> 标签：database, wordpress, syntax

I have following code:

```
<?php

        $exists_photos = $wpdb->get_results("SELECT * FROM $dsp_galleries_photos galleries, $dsp_user_albums_table albums WHERE galleries.album_id=albums.album_id AND galleries.status_id=1 AND galleries.album_id IN ($ids1) ORDER BY RAND() LIMIT 6");

         $i=0;

         foreach ($exists_photos as $user_photos) { 

            $photo_id=$user_photos->gal_photo_id;

            $album_id1=$user_photos->album_id;

            $file_name=$user_photos->image_name;

            $private=$user_photos->private_album;

            $image_path="/wp-content/uploads/dsp_media/user_photos/user_".$member_id."/album_".$album_id1."/".$file_name;

            if(($i%3)==0){

            ?> 
```

It returns following error:

```
WordPress database error You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1 for query SELECT COUNT(*) FROM wp_dsp_galleries_photos WHERE status_id=1 AND album_id IN () made by require('wp-blog-header.php'), require_once('wp-includes/template-loader.php'), include('/themes/ArtSee/page.php'), the_content, apply_filters('the_content'), call_user_func_array, do_shortcode, preg_replace_callback, do_shortcode_tag, call_user_func, wp_include_file, include('/plugins/dsp/profile_header.php'), include('/plugins/dsp/member_dsp_header.php'), include('/plugins/dsp/headers/view_profile_header.php'), include('/plugins/dsp/view_profile_setup.php') 
```

Suggestions will be appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:43:24.863

您错过了一个 VALUE INSIDE `()`：

```
SELECT COUNT(*) FROM wp_dsp_galleries_photos WHERE status_id=1 AND album_id IN () 
```

语句：`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')'`指示故障点。我指的是第二个`)`：

```
... album_id IN () ... 
```

在任何情况下，您的代码都不会显示这部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T15:40:38.537

```
SELECT * FROM $dsp_galleries_photos galleries, $dsp_user_albums_table albums 
```

应该

```
SELECT * FROM dsp_galleries_photos galleries, dsp_user_albums_table albums 
```

表名前没有 $ - 您还应该考虑是否真的需要选择 * 但这不会影响查询的语法

# actionscript - MovieClip within MovieClips frame change on hitTest

> ID：14799357
> 
> 赞同：0
> 
> 时间：2013-02-10T15:35:18.783
> 
> 标签：actionscript, actionscript-2, game-engine, movieclip, hittest

I have a car that drives around a map named "car" that's within a movieclip named "map". I have a character named "player" who has 2 frames, "norm" which contains another movieclip named "playerNorm" which is the normal state of the character. In "dead", the character is dead. I want it so that when "player" collides with "car", "player" will show it's "dead" state.

```
stop();
onEnterFrame = function ()
{
    if (_root.playerNorm.hitTest(_root.car))
    {
        this.gotoAndStop("dead");
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:42:06.370

尽管您不清楚您的问题是什么，但我认为它是您想要的*“上面的代码片段不起作用*”。如果是这样，那么您需要更换：

```
this.gotoAndStop("dead"); 
```

和

```
_root.playerNorm.gotoAndStop("dead"); 
```

# jquery - Phonegap / Ripple 模拟器。Jquery 选择器在对象方法中不起作用

> ID：14799361
> 
> 赞同：4
> 
> 时间：2013-02-10T15:35:56.037
> 
> 标签：jquery, cordova, ripple

也许我快疯了，但这似乎是一个基本的东西，我现在有一个基本的phonegap应用程序编译到黑莓，但我希望能够在波纹模拟器中测试它，我的代码在这里被改变为清楚起见，但请查看以下内容...

在 index.html 我有以下初始化代码。

```
 function onLoad() {
                if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
                document.addEventListener("deviceready", onDeviceReady, false);
                } else {
                    onDeviceReady();
                }
            }

            function onDeviceReady() {
                // Now safe to use the Cordova API
                var program = new app2();
                program.Login();
            }
    } 
```

在 index.js 中是以下简单对象。

```
var app2 = function(){
    this.Login = function() {
        alert($("#project_list").html());
        this.LoadContent();
    }

    this.LoadContent = function() {
        alert($("#project_list").html());
    }
} 
```

现在 project_list 元素中只有一个字符串“test”，所以预期的输出应该是：

“测试”

“测试”

它无处不在，除了纹波模拟器。纹波输出如下

“测试”

“不明确的”

一旦我在对象中调用一个方法，它似乎就完全失去了 DOM，我对此挠头。谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:39:11.543

将您的代码更改为

```
var app2 = function(){
    var that=this;
    this.Login = function() {
        alert($("#project_list").html());
        that.LoadContent();
    }

    this.LoadContent = function() {
        alert($("#project_list").html());
    }
} 
```

只要你写`javascript`的意思是`this`就是owner of that `this`。在您的情况下，当您`this.LoadContent()`在`this.Login()`函数中编写时， `this`in的所有者是:`this.Login()`的`Login`属性。它不是。`app2``app2.Login``app2`

所以为了解决这个问题，我们将通过 do 来存储in的`this`变量。所以变量总是指向. 的所有者是。`app2``var that``var that = this``that``app2``app2`

`that`是 的成员变量`app2`。因此include 的所有其他成员变量都`that`可以访问。`app2``Login`

# java - 打印“旋转”数字

> ID：14799362
> 
> 赞同：1
> 
> 时间：2013-02-10T15:35:56.930
> 
> 标签：java

我一直在尝试打印下面的输出，但我被困了很长一段时间。我已经尝试过了，希望有人能给我一些提示，我会自己解决。

我应该调用这个方法`printSquare(1, 5);`，我必须打印出来

```
12345
23451
34512
45123
51234 
```

这就是我想出来的。

```
public static void printSquare(int min,int max){
    for(int i=min;i<=max;i++){
        for(int x=min;x<=max;x++){
            System.out.print(x);
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:49:13.940

```
for (int i = 0; i < 5; i++)
{
    for (int j = 0; j < 5; j++)
        System.out.print (((i + j) % 5) + 1);
    System.out.println ();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:04:37.733

```
public static void print(int min, int max) {
    for (int i = min; i <= max; i++) {
        int val = i;
        do {
            System.out.print(val);
            if (val == max) {
                val = min;
            } else {
                val++;
            }
        } while (val != i);
        System.out.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:59:45.740

这是您应该记住的通用伪代码设计：

*   在 的边界上迭代`max`。
    *   打印您的第一个号码集。
    *   遍历数组的最大边界。
        *   如果`max`您当前位置的值的余数为 0，则将其设置为`min`。
        *   否则，将您当前位置的值增加 1。

这是一个粗略的实现，涉及一个数组。

```
public void printRotatedNumbers(int[] array, int a, int b) {
    for(int i = 0; i < b; i++) {
        System.out.println(Arrays.toString(array));
        for(int j = 0; j < array.length; j++) {
            if(array[j] % b == 0) {
                array[j] = a;
            } else {
                ++array[j];
            }
        }
    }
} 
```

在 10 个整数元素的数组上，使用`a = 1`和`b = 10`，你会得到：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[2, 3, 4, 5, 6, 7, 8, 9, 10, 1]
[3, 4, 5, 6, 7, 8, 9, 10, 1, 2]
[4, 5, 6, 7, 8, 9, 10, 1, 2, 3]
[5, 6, 7, 8, 9, 10, 1, 2, 3, 4]
[6, 7, 8, 9, 10, 1, 2, 3, 4, 5]
[7, 8, 9, 10, 1, 2, 3, 4, 5, 6]
[8, 9, 10, 1, 2, 3, 4, 5, 6, 7]
[9, 10, 1, 2, 3, 4, 5, 6, 7, 8]
[10, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T15:47:57.843

试试下面的代码，它可能对你有帮助。

```
public static void printSquare(int min,int max){
  for(int i=min;i<=max;i++){
      int iVal=i;
    for(int x=min;x<=max;x++){

      if(iVal>max){
        System.out.print(iVal-(max-min+1));
      }else{
        System.out.print(iVal);
      }
      iVal++;
    }
    System.out.println(" ");
  }
} 
```

# drupal - 任何模块来更新和导入数据表到 Drupal？

> ID：14799372
> 
> 赞同：0
> 
> 时间：2013-02-10T15:36:57.227
> 
> 标签：drupal, drupal-7, drupal-modules

我有一些需要导入 Drupal 的 mysql 表。主要目的是使用我自己创建的模块来查询表，但是数据会不时更新。每个表都包含以下列：id、zone、weight 和 price。

我已经检查了似乎与我正在处理的数据的性质完美的[数据](http://drupal.org/project/data)模块，因为我实际上并没有处理内容“节点”，但是它没有提供允许最终的内置管理 UI-用户轻松更新数据。关于哪个模块可能适合为用户提供处理此类数据的简单方法的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:06:44.643

[提要](http://drupal.org/project/feeds)模块将为您执行定期导入。您可以将文件上传到它，它会映射和导入信息。

它旨在与特定实体一起使用，但您可以使用自定义模块对其进行扩展以处理您的数据。

然后你又在使用 Drupal。如果你想跟踪“id、zone、weight、price”，你可以创建一个节点类型来跟踪它，并让 feed 模块直接导入到该节点类型。[您可以通过实体引用](http://drupal.org/project/entityreference)将其他实体指向此信息。

在您自己的表中跟踪此类信息确实不合逻辑。它不灵活，如果没有额外的处理程序，您无法通过视图输出信息，并且您必须编写代码来获取数据，而不是让 Drupal 为您完成所有代码。

您还可以使用[drush](http://drupal.org/project/drush)、[migrate](http://drupal.org/project/migrate)和[backup_migrate导入表](http://drupal.org/project/backup_migrate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:42:50.127

[如果您希望 Drupal 在您需要查看schema](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_schema/7)的 drupal 数据库中创建和维护表，目前尚不清楚您要实现什么，否则我不确定您为什么需要 Drupal 导入数据，因为您可以编写一个函数在您的模块中连接到您喜欢的任何数据库并查询您喜欢的任何内容。

# cuda - 在CUDA中一次将一堆数据复制到全局内存中

> ID：14799374
> 
> 赞同：1
> 
> 时间：2013-02-10T15:37:05.957
> 
> 标签：cuda, gpu, overhead

我想将一堆数据从主机一次或作为一系列块依次复制到设备，这会影响我的算法。我的问题是哪个有更多的开销？**我认为**，调用一个以上的复制操作比另一个有更多的开销；但是我只想更详细地了解这个概念（**想法**通常与现实不符:)）。如果您可以显示对某种文档的引用，将不胜感激！

亲切的问候，伊尔克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:51:54.160

如果副本是同步的（默认），它们确实会产生更多的开销，因为每个复制函数都会等到 GPU 空闲后再返回。如果副本是异步的，则开销为几微秒，这仅对小型 memcpy 可见。

请注意，您可以使用 NULL 流指定异步 memcpy，您仍将获得 CPU/GPU 并发的好处。（即 CPU 可以在 GPU 处理前一个 memcpy 时启动下一个 memcpy。）

CUDA 手册（为了全面披露，我应该说是我写的）在第 6 章中讨论了这个问题，源代码包括一个测量 memcpy 大小的应用程序，它隐藏了调用 memcpy 的开销。查看存储库中的 breakevenMemcpyHtoD.cu：

[https://github.com/ArchaeaSoftware/cudahandbook/tree/master/concurrency](https://github.com/ArchaeaSoftware/cudahandbook/tree/master/concurrency)

# java - 我们如何在 java 中获取 android:description 的 apk？

> ID：14799382
> 
> 赞同：0
> 
> 时间：2013-02-10T15:37:28.370
> 
> 标签：java, android, xml-parsing, apk

我在获取 apk 的 android:description 时遇到了问题：我必须在 java 中获取它，以便在加载 apk 时将此信息放入我的数据库中。我使用 aapt -la x.apk | 对参考进行了编码。grep 安卓：描述。在解压缩的 apk 中，此参考是 manifest.xml 中对 value-fr 的 strings.xml 的访问（例如 value-

java -jar \apktool.jar d \x.apk

例子 ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="330" android:versionName="4.0.3-239410" package="com.google.android.talk"
  xmlns:android="http://schemas.android.com/apk/res/android">
…
    <application android:label="@string/app_label" android:icon="@mipmap/ic_launcher_google_talk" android:name="TalkApp" android:taskAffinity="android.task.googletalk" android:hardwareAccelerated="true">
…
        <service android:name="com.google.android.videochat.VideoChatService" android:description="@string/videochatservice_description"> android:permission="com.google.android.talk.permission.VIDEO_CHAT_SERVICE">
</service>
…
    </application>
</manifest> 
```

然后在 res\values-fr\strings.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
…
    <string name="videochatservice_description">"Talk Service."</string>
…
</resources> 
```

我的目标是在 java 中获取字符串“Talk Service”。

到目前为止，我认为不使用 apktool 就不可能做我想做的事。如果有人有更快的解决方案，我会看看它。假设我们使用这个 apktool 命令：java -jar \apktool.jar d .apk using ProcessBuilder。获取信息的最简单方法是什么？我使用 sax 来解析 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:45:45.473

你在问什么并不完全清楚。如果您只想从资源中读取字符串值，则可以这样做。

```
String s = getResources().getString(R.string.videochatservice_description); 
```

# javascript - 在 1 个页面上配置 2 个 javascript 滑块

> ID：14799385
> 
> 赞同：0
> 
> 时间：2013-02-10T15:37:40.607
> 
> 标签：javascript, jquery, slider

我只知道 CSS，几乎不知道 Javascript，所以我需要一些帮助。我有 2 个[pikachoose](http://pikachoose.com)滑块：

```
$(document).ready(
      function (){
          $("#pikame").PikaChoose();
          $("#pikame2").PikaChoose();
}); 
```

两者都是在 javascript 中设置的自动滑动：

```
(function ($) {
     var defaults = {
        autoPlay: true,
        speed: 5000, 
```

如何设置`#pikame2`停止自动滑动？我想我必须将 autoplay false 或 speed 设置为 100k，但我不知道如何指定它只会对第二个滑块执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:57:46.010

您可以在插件的每次调用中传递选项，如下所示：

```
$("#pikame").PikaChoose({autoPlay:true});
$("#pikame2").PikaChoose({autoPlay:false}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:59:18.567

```
$("#pikame2").PikaChoose ({autoplay: false}) 
```

您可以将选项传递给每个初始化调用。

# javascript - 过滤和排序 div

> ID：14799389
> 
> 赞同：1
> 
> 时间：2013-02-10T15:38:14.977
> 
> 标签：javascript, filtering

我一直在寻找一种强大而简单的方法来对我的案例研究进行排序，但是经过几个小时并搜索堆栈溢出后，我找不到一种方法来按照我想要的方式过滤案例研究。

基本上我会使用 css 类给每个案例研究三个类别（生产年份、项目类型和名称），例如标记看起来像这样

```
<div class="name1 home 2013"></div>
<div class="name2 work 2012"></div>
<div class="name3 home 2012"></div>
<div class="name4 charity 2012"></div>
<div class="name5 home 2010"></div>
<div class="name6 work 2007"></div> 
```

然后我想要有按钮，这样你就可以选择你想要对案例研究进行排序的类别。所以类似的东西。

```
<div class="button" id="year">Sort by Year</div>
<div class="button" id="alpha">sort Alphabetically</div>
<div class="button" id="type">sort by type</div> 
```

这就是我卡住的地方。我可以创建什么 javascript 函数，这样如果您单击“按年份排序”按钮，它将创建一个看起来像这样的标记。例如，将所有案例研究分类到具有同一年案例研究的 div 中。

```
<div>
   <div class="name1 home 2013"></div>
</div>

<div>
<div class="name2 work 2012"></div>
<div class="name3 home 2012"></div>
<div class="name4 charity 2012"></div>
</div>

<div>
<div class="name5 home 2010"></div>
</div>

<div>
<div class="name6 work 2007"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:04:12.883

I would use data attributes to make the filtering easier.

```
<div class="name1 home" data-year="2013">2013</div>
<div class="name2 work" data-year="2012">2012</div>
<div class="name3 home" data-year="2012">2012</div>
<div class="name4 charity" data-year="2012">2012</div>
<div class="name5 home" data-year="2010">2010</div>
<div class="name6 work" data-year="2007">2007</div> 
```

The using JQuery and array.map (could be replaced with a foreach if you want older browser support)

```
var studies = $('[data-year]')

studies.map(function(index, el) {
    var $el = $(el)
    year = $el.attr('data-year')
    if($('#' + year).length == 0){
        $(document.body).append(
            $('<div>').attr('id', year)
            .css('margin-bottom', '20px')
        )
    }

    $('#' + year).append(el)
 }) 
```

what this does is take all the elements with a data-year attribute, foreach element check to see if a div with the id of that elements year exists. If it doesn't create one and append it to the body. Then it appends the element into the year container.

[see this jsfiddle](http://jsfiddle.net/DPxWu/3/)

# c - 未在函数中传递期望值

> ID：14799392
> 
> 赞同：-9
> 
> 时间：2013-02-10T15:38:38.457
> 
> 标签：c

我有一个功能：

```
int somefunction(int a, int b, char *c, int d){} 
```

现在这个函数在另一个函数中被调用，该函数位于`main()`.

我打电话`somefunction(a, b, c, d);`，我把它打印出来`int a`，女巫被宣布为 50，在`somefunction()`被调用之前。在第一次调用中打印了 50，一切都很好，但第二次调用`somefunction()`打印出 29549。这些函数调用在一些 if 语句中，即使调用了第二个位置`somefunction()`，也首先调用它是相同的。

为了测试所有输入值都设置为相同，所以它不是输入。在调用之前打印所有输入值`somefunction()`，并且它们应该是。我尝试重命名所有变量、函数，尝试将所有 int 更改为 float，并尝试将变量的顺序移动到`somefunction()`. 但注意改变了。我也做过原型，不是那样的。

那么有没有人知道什么可以解决这个问题？实际代码不在这里，因为我通过了 2000 行，中间会有很多不相关的代码。我意识到这可能很难帮助我，所以我只问是否有人经历过类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:58:03.603

我写了一个示例代码来测试你的逻辑。请在下面找到一个功能正常的小代码。

```
#include <stdio.h>

void someFunc(int a, int b)
{
    printf("Inside interface function: a: %d\t b: %d\n", a, b);
}

int main(int argc, char** argv)
{
      int a = 35, b = 45;
      printf("a = %d, b = %d\n", a, b);
     someFunc(a, b);
     a = 50; b = 75;
     printf("a = %d, b = %d\n", a, b);
     someFunc(a, b);

     return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:26:32.027

所以，如果我使用的是带有指针和不安全数组的语言，并且疯狂的事情开始发生，那么我很快就会怀疑我正在覆盖内存。有很多方法可以做到这一点：写入数组的末尾，使用未初始化的指针，释放从未 malloc()ed 的东西，等等。

*如果这就是您的情况，那么在没有看到精确*和*完整*的代码的情况下很难解决它（尝试制作一个简化的示例通常只会让问题消失，因为您要么删除错误的代码或重新排列内存，以便有所不同也许无害正在被覆盖）。

如果你不能发布一个完整的例子来展示这个错误，那么你可以开始寻找可能的罪魁祸首：a）所有使用动态内存函数，b）所有指针的取消引用。

我可以从你的另一篇文章中收集到的所有信息是 a) 是的，这种代码对于野指针来说已经成熟了，b) 嗯，这是什么：

```
char char_buffer[] = "What ever"; 
```

很难从代码片段中猜测出来，但通常“缓冲区”这个词意味着一些会被多次重用的大量空间。您已将字符指针命名为“char_buffer”，但它实际上指向一个字符串常量。因此，例如，如果您稍后尝试将 11 个字符的数据复制到其中，那么您将覆盖其他内容（假设编译器/链接器没有为您将常量存储在只读内存中）。

# java - Java控制台程序不允许我输入字符串

> ID：14799397
> 
> 赞同：3
> 
> 时间：2013-02-10T15:39:21.097
> 
> 标签：java, console-application, bufferedreader, conditional-statements

我正在尝试创建一个简单的控制台程序，询问用户是否要创建列表，如果“是”，则允许他们输入列表的名称。然后它应该在退出程序之前“打印”列表的名称。

我的代码允许用户说`y`or `n`，对于第一部分，但在我的条件语句中它不允许用户输入列表的名称；它只是完成了程序。没有错误信息；它只是没有按我的预期运行。这是我的代码：

```
public static void main(String[] args) throws IOException     
{
    getAnswers();
}

public static void getAnswers()throws IOException{
    char answer;
    String listName;        
    BufferedReader br = new BufferedReader 
            (new InputStreamReader(System.in));        
    System.out.println ("Would like to create a list (y/n)? ");

    answer = (char) br.read();        
    ***if (answer == 'y'){
        System.out.println("Enter the name of the list: ");
        listName = br.readLine();
        System.out.println ("The name of your list is: " + listName);}***
    //insert code to save name to innerList
    else if (answer == 'n'){ 
        System.out.println ("No list created, yet");
    }
    //check if lists exist in innerList
    // print existing classes; if no classes 
    // system.out.println ("No lists where created. Press any key to exit")
    } 
```

提前感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:41:02.850

改变

```
answer = (char) br.read(); 
```

到

```
answer = (char) br.read();br.readLine(); 
```

为了在用户按下`y`或之后读取换行符`n`

完整代码：

```
import java.io.*;

class Test {

    public static void main(String[] args) throws IOException {
         getAnswers();
    }

    public static void getAnswers() throws IOException {
         char answer;
         String listName;        
         BufferedReader br = new BufferedReader(new InputStreamReader(System.in));        
         System.out.println ("Would like to create a list (y/n)? ");
         answer = (char) br.read(); 
         br.readLine(); // <--    ADDED THIS 
         if (answer == 'y'){
             System.out.println("Enter the name of the list: ");
             listName = br.readLine();
             System.out.println ("The name of your list is: " + listName);
         }
         //insert code to save name to innerList
         else if (answer == 'n') { 
             System.out.println ("No list created, yet");
         }
         //check if lists exist in innerList
         // print existing classes; if no classes 
         // system.out.println ("No lists where created. Press any key to exit")
    }
} 
```

输出：

```
Would like to create a list (y/n)? 
y
Enter the name of the list: 
Mylist
The name of your list is: Mylist 
```

这是您期望的输出吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T15:48:55.843

问题是读取（）。它不会读取由于 Enter 而出现的 newLine。

```
 answer = (char) br.read();        // so if you enter 'y'+enter then -> 'y\n' and read will read only 'y' and the \n is readed by the nextline.
    br.readLine();    // this line will consume \n to allow next readLine from accept input. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:47:19.977

```
...
String answer = br.readLine ();
if (answer.startsWith ("y")) {
... 
```

# php - Zend 框架中 Application.php 的位置

> ID：14799398
> 
> 赞同：0
> 
> 时间：2013-02-10T15:39:36.470
> 
> 标签：php, zend-framework, cpanel, include-path, internal-server-error

我正在尝试在依赖框架的服务器上设置以下应用程序。[https://github.com/medialab/ANTA](https://github.com/medialab/ANTA)

应用程序失败，因为它找不到 application.php。我已经下载了 Zend 框架并尝试了很多不同的东西，但到目前为止都没有奏效。最让我不解的是，Zend 框架中竟然没有 application.php 文件？我是在使用错误的版本还是只是错过了 Zend 的要点？

希望有人有解决方案... Zend 对我来说仍然很新:)

```
Warning: require_once(/home/***/public_html/mapping/ANTA/library/Zend/Application.php) [function.require-once]: failed to open stream: No such file or directory in /home/***/public_html/mapping/ANTA/public/index.php on line 22 Fatal error: require_once() [function.require]: Failed opening required '/home/***/public_html/mapping/ANTA/library/Zend/Application.php' (include_path='/home/***/public_html/mapping/ANTA/library:.:/usr/lib/php:/usr/local/lib/php') in /home/***/public_html/mapping/ANTA/public/index.php on line 22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:13:49.897

听起来您的应用程序需要 ZF1，但您已经下载了 ZF2（当前版本）。

您仍然可以从 Zend 站点下载 ZF1：http: [//framework.zend.com/downloads/latest#ZF1](http://framework.zend.com/downloads/latest#ZF1)

# javascript - 从 FB 插件中的 DB 链接

> ID：14799399
> 
> 赞同：2
> 
> 时间：2013-02-10T15:39:42.047
> 
> 标签：javascript, asp.net, facebook

我正在尝试通过按钮在 FB 上分享我的文章。文章和图片来自数据库。问题是“**我如何在此超链接上设置链接和图像？** ”我想从 CodeBehind设置`link`,`picture`和属性。`Redirect_uri`

```
<td>
  <asp:LinkButton ID="LinkButton1" runat="server" 
  PostBackUrl="https://www.facebook.com/dialog/feed?
  app_id=458358780877780&
  link=http://localhost:49441/ProjectLand/detail.aspx?id=14&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=https://mighty-lowlands-6381.herokuapp.com/" Text="Share"
  >LinkButton</asp:LinkButton>

                    </td>
                </tr>
            </table>
            <hr />
        </div>
        <div class="FontSmall marginTop" style="font-size: 11pt;">
            <asp:Panel ID="pnl1" runat="server" CssClass="pnl1">
                <asp:Image ID="img1" runat="server" Width="300px" Height="250px" />
            </asp:Panel>
            <asp:Panel ID="pnl2" runat="server" CssClass="pnl2">
                <asp:Image ID="img2" runat="server" Width="680px" Height="300px" />
            </asp:Panel>
            <asp:Literal ID="ltlDesc" runat="server"></asp:Literal></div> 
```

图像`img1`，`img2`并`ltlDesc`从数据库中填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:11:49.527

找到了一个很好的解决方案请参阅[Asp.Net 中](http://dotnetgeekblog.wordpress.com/2012/07/25/custom-facebook-share-button-in-asp-net/)
的自定义 Facebook 共享按钮链接

# multithreading - 具有多线程的数字时钟，只有睡眠、等待和通知

> ID：14799403
> 
> 赞同：0
> 
> 时间：2013-02-10T15:40:19.240
> 
> 标签：multithreading, sleep, wait, notify

请检查下面的代码，这是没有 util.concurrent 包的数字时钟，日历使用睡眠，通知，等待。代码执行正确，请提出更好的方法。非常感谢

```
/**
 * 
 */
package com.nagihome.clock;

/**
 * @author Nagi
 * 
 */
public class ThreadAlarmClock {

    private static Integer hours = 23;
    private static Integer minutes = 59;
    private static Integer seconds = 55;
    private static Integer minSecLastNum = 60;
    private static Integer hour24LastNum = 24;
    private static String COLON = ":";
    private static Boolean isMinUpdatable = false;
    private static Boolean isHourUpdatable = false;
    final static Object lock = new Object();

    public void updateSeconds() throws InterruptedException {

        synchronized (lock) {
            while (true) {
                if (isMinUpdatable || isHourUpdatable) {
                    lock.wait();
                } else {
                    Thread.sleep(1000);
                    seconds++;
                    if (seconds.equals(minSecLastNum)) {
                        seconds = 0;
                        isMinUpdatable = true;
                        lock.notifyAll();
                    } else {
                        displayTime();
                    }
                }
            }
        }
    }

    public void updateMinutes() throws InterruptedException {

        synchronized (lock) {
            while (true) {
                if (!isMinUpdatable) {
                    lock.wait();
                } else if (isMinUpdatable) {
                    minutes++;
                    isMinUpdatable = false;
                    if (minutes.equals(minSecLastNum)) {
                        minutes = 0;
                        isHourUpdatable = true;
                    } else {
                        displayTime();
                    }
                }

                lock.notifyAll();
            }
        }
    }

    public void updateHours() throws InterruptedException {

        synchronized (lock) {
            while (true) {
                if (!isHourUpdatable) {
                    lock.wait();
                } else if (isHourUpdatable) {
                    hours++;
                    isHourUpdatable = false;
                    if (hours.equals(hour24LastNum)) {
                        hours = 0;
                    }

                    displayTime();
                }

                lock.notifyAll();
            }
        }
    }

    public void displayTime() {
        System.out.println(hours + COLON + minutes + COLON + seconds);
    }

}

/**
 * 
 */
package com.nagihome.clock;

/**
 * @author Nagi
 * 
 */
public class SecondsThread implements Runnable {

    private ThreadAlarmClock clock;

    public SecondsThread(ThreadAlarmClock clock) {
        this.clock = clock;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Runnable#run()
     */
    @Override
    public void run() {
        try {
            clock.updateSeconds();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

/**
 * 
 */
package com.nagihome.clock;

/**
 * @author Nagi
 * 
 */
public class MinutesThread implements Runnable {

    private ThreadAlarmClock clock;

    public MinutesThread(ThreadAlarmClock clock) {
        this.clock = clock;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Runnable#run()
     */
    @Override
    public void run() {
        try {
            clock.updateMinutes();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

/**
 * 
 */
package com.nagihome.clock;

/**
 * @author Nagi
 * 
 */
public class HoursThread implements Runnable {

    private ThreadAlarmClock clock;

    public HoursThread(ThreadAlarmClock clock) {
        this.clock = clock;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Runnable#run()
     */
    @Override
    public void run() {
        try {
            clock.updateHours();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

/**
 * 
 */
package com.nagihome.main;

import com.nagihome.clock.HoursThread;
import com.nagihome.clock.MinutesThread;
import com.nagihome.clock.SecondsThread;
import com.nagihome.clock.ThreadAlarmClock;

/**
 * @author Nagi
 * 
 */
public class Main {

    /**
     * @param args
     * @throws InterruptedException 
     */
    public static void main(String[] args) throws InterruptedException {
        ThreadAlarmClock clock = new ThreadAlarmClock();

        new Thread(new SecondsThread(clock)).start();
        new Thread(new MinutesThread(clock)).start();
        new Thread(new HoursThread(clock)).start();         
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:46:17.760

建议：

*   使用内部毫秒计数，而不是 sec++

*   sleep(1000) 不能精确地睡眠 1000 毫秒，它可以是 990' 或 1110。所以在醒来后检查系统时间（或 nanoTime），并计算与上次唤醒时间的差异。例如，如果您检测到您已经睡了 1010 毫秒，那么下次您只睡 990 毫秒。

# sql - 如何将 varchar 数据插入日期时间字段（SQL Server 2005）？

> ID：14799407
> 
> 赞同：1
> 
> 时间：2013-02-10T15:41:01.633
> 
> 标签：sql, tsql, sql-server-2005, varchar

我有我想插入到表中的数据。样本数据`MM/DD/YYYY`+ 1 天和`12:00:00 PM`

基本上我需要的是插入当前日期 + 1 天和 12:00:00 PM 的特定时间。

我的代码是这样的：

```
DECLARE @MyEstimatedDate as varchar(100)    ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate1 as varchar(100)   ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate2 as varchar(100)   ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate3 as DATETIME       ---FINAL DATA NEEDED. This is the data I want inserted.

SET @MyEstimatedDate = DATEADD(day,1,GETDATE()) 
SET @MyEstimatedDate1 = CONVERT(VARCHAR(100),@MyEstimatedDate,101)
SET @MyEstimatedDate2 = @MyEstimatedDate1 + ' 12:00:00 PM'
SET @MyEstimatedDate3 = cast(@MyEstimatedDate2 as datetime)  ---I believe this is the error 
```

我得到的错误信息：

> *将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:53:37.607

`varchar`只是在操作`datetime`数据时不要使用。SQL Server 2005 为您提供[了足够的工具](http://msdn.microsoft.com/en-us/library/ms186724%28v=sql.90%29.aspx "Date and Time Functions (Transact-SQL)")来避免转换。

The following is a more or less [known method](https://stackoverflow.com/questions/2775/whats-the-best-way-to-remove-the-time-portion-of-a-datetime-value-sql-server/3696991#3696991 "What's the BEST way to remove the time portion of a datetime value (SQL Server)?") of dropping the time part from a `datetime` value:

```
SELECT DATEADD(DAY, DATEDIFF(DAY, 0, @InputDateTime), 0); 
```

In the above example, [`DATEDIFF`](http://msdn.microsoft.com/en-us/library/ms186819.aspx "DATEADD (Transact-SQL)") calculates the number of days between a date specified as `0` and the given date. The number of days is then added by the [`DATEADD`](http://msdn.microsoft.com/en-us/library/ms189794.aspx "DATEDIFF (Transact-SQL)") function to the `0` date. The final result is a `datetime` value with the time of `00:00:00` and the same date as `@InputDateTime`. This is because the `0` date is an integer representation of `1900-01-01 00:00:00`: its time part is zero and, since we have incremented it by a whole number of days, so is the result's time part.

Now, if instead of the `DATEDIFF` days you add `DATEDIFF+1`, you will get the next day. Furthermore, if instead of `0` as the date to be incremented you use `12:00`, you will get the next day's noon, which appears to be what you want. So, the final expression will look like this:

```
SELECT DATEADD(DAY, DATEDIFF(DAY, 0, @InputDateTime) + 1, '12:00'); 
```

Since your input timestamp is supposed to be the current date & time, just replace `@InputDateTime` with `GETDATE()`:

```
SELECT DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()) + 1, '12:00'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:48:22.630

为什么不简单地做

```
cast(dateadd(day, 1, getdate()) as date) 
```

那是午夜。中午做这个

```
dateadd(hour, 12, cast(cast(dateadd(day, 1, getdate()) as date) as datetime)) 
```

忘记上面的，是错误的。

正确答案是

```
dateadd(hour, 12, cast(cast(dateadd(day, 1, getdate()) as date) as datetime)) 
```

这次我什至测试了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T15:53:25.513

datetime 类型包含日期+时间。在您的情况下，@MyEstimatedDate1 只需要一个日期

```
DECLARE @MyEstimatedDate varchar(100)    ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate1 varchar(100)   ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate2 varchar(100)   ---TEMPORARY CONTAINER
DECLARE @MyEstimatedDate3 DATETIME       ---FINAL DATA NEEDED. This is the data I want inserted.

SET @MyEstimatedDate = DATEADD(day, 1, GETDATE()) 
SET @MyEstimatedDate1 = CONVERT(VARCHAR(100), CAST(@MyEstimatedDate AS date), 101)
SET @MyEstimatedDate2 = @MyEstimatedDate1 + ' 12:00:00 PM'
SET @MyEstimatedDate3 = cast(@MyEstimatedDate2 as datetime)   ---I believ 
```

或者简单易用

```
SELECT DATEADD(hour, 36, GETDATE() - CAST(GETDATE() AS time)) 
```

# jquery - javascript setTimeout 未激活

> ID：14799414
> 
> 赞同：0
> 
> 时间：2013-02-10T15:41:32.177
> 
> 标签：jquery, json, settimeout

当我使用此代码时，它不会在从 jQuery 成功返回时激活 setTimeout

```
function waitForEvents(last_id){
$.ajax({
            type: "GET",
            url: "/functions/ajax.php?func=feed&old_msg_id="+last_id,

            async: true, /* If set to non-async, browser shows page as "Loading.."*/
            cache: false,
            timeout:50000, /* Timeout in ms */

            success: function(data){
                var json = jQuery.parseJSON(data);
                if(json !== 'null') {
                $.each(json.earnings, function (index, value) {
                     $('#feed').append(value);
                });
                var old_msg_id = json['last_id'];
                }
                alert("working");
                setTimeout('waitForEvents(last_id)',"1000");  
            },

            error: function (XMLHttpRequest, textStatus, errorThrown){
                alert("Error:" + textStatus + " (" + errorThrown + ")");
                setTimeout('waitForEvents(last_id)',"15000");       
            },
});
}; 
```

知道为什么因为它实际上正在返回（数据）所以它正在处理响应而不是再次激活 settimeout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:43:10.560

您的 setTimeout 方法没有传递函数（显然作为字符串很好：/）

```
setTimeout(function() { waitForEvents(last_id); }, 15000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:51:59.790

您传入的字符串在*全局*范围内`setTimeout`进行评估。我的猜测是您的函数没有在全局范围内定义，或者在全局范围内没有定义值。*`last_id`*

 *如果您的目标是重用`last_id`传递给函数的参数，请将您的`setTimeout`调用更改为：

```
setTimeout(function() {
    waitForEvents(last_id);
}, 1000); // Or 15000 for the other call 
```

（另请注意，第二个参数应该是*数字*，而不是字符串。）

这是我在全局范围内评估字符串的意思的示例：

```
(function($) {

  $("#target").click(function() {
    setTimeout(foo, 500);
    setTimeout("bar()", 500);
    display("Timers started");
  });

  function foo() {
    display("foo called");
  }

  function bar() {
    display("bar called");
  }

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

})(jQuery); 
```

[实例](http://jsbin.com/afudus/1)| [来源](http://jsbin.com/afudus/1/edit)

假设您有一个带有 的元素`id` `"target"`并单击它，半秒钟后您会看到“foo called”出现在页面上，但您不会看到“bar called”。如果您使用任何现代浏览器，您将在 JavaScript 控制台中看到一条错误消息，指出`bar`未定义。那是因为没有**全局**函数被调用`bar`，包装函数中只有一个函数被调用`bar`。所以字符串版本失败。

`setTimeout`尽可能避免将字符串传递给。这总是可能的。*（向达赖喇嘛道歉。）**

# php - PHP 更优雅的方式来处理 mysqli 错误

> ID：14799415
> 
> 赞同：1
> 
> 时间：2013-02-10T15:41:41.600
> 
> 标签：php, error-handling, mysqli

使用纯 PHP 代码（而不是框架）是否有更优雅的方式来处理 mysqli 错误，如下所示：

```
if (!mysqli_query($con, $sql)) {
            # Throw error so we can handle them
            echo mysqli_error($con);

            # handle a duplicate email
            if (strpos(mysqli_error($con), "email_UNIQUE") !== false ) {
                    $_SESSION["errors_found"] = true;
                    array_push($_SESSION["error_messages"], "Email given is already registered.");
            }

            # handle a duplicate username
            else if (strpos(mysqli_error($con), "username_UNIQUE") !== false ) {
                    $_SESSION["errors_found"] = true;
                    array_push($_SESSION["error_messages"], "Username is already taken.");
            }

            # handle any other sql query error...
           else {
                die("Database query error: " . mysqli_error($con));
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:24:43.470

首先，我不会将这样的过程称为“处理 mysqli 错误”，而是称为“用户输入验证”。
其次，我根本不会以这种方式进行这样的验证。

我一直认为，通常使用 SELECT 查询而不是 INSERT 查询针对数据库验证用户输入。
它不仅可以使您的应用程序无错误，还可以使其更加灵活，例如允许对基于 AJAX 的注册进行单独验证。

至于真正的 mysqli 错误 - 你真的必须*处理*它们，而不仅仅是死。
最方便但最简单的方法是抛出异常：

```
if (!mysqli_query($con, $sql)) {
    throw new Exception(mysqli_error($con));
} 
```

这将根据站点范围的错误处理设置进行适当的处​​理，并提供无价的跟踪日志。

# ios - 存储巨大的字典IOS

> ID：14799418
> 
> 赞同：0
> 
> 时间：2013-02-10T15:41:52.057
> 
> 标签：ios, dictionary, storage, updates

我的应用程序有它自己的 sql**数据库**，比如说**2000 行。** 我知道将来我会添加一些新的并删除一些旧的。每行都有根据用户交互顺序更改的优先级参数***。***我想在本地存储所有优先级，这样我未来的应用更新就不会删除它们。

所以问题是最好的方法是什么？请记住，我将来需要快速访问这些优先级，并且它们必须很容易可变。

# delphi - delphi TFileStream“内存不足”

> ID：14799420
> 
> 赞同：1
> 
> 时间：2013-02-10T15:41:52.737
> 
> 标签：delphi, memory, runtime-error, delphi-xe3, tfilestream

我遇到了一些使用 TFileStream 将数据块从文件读取到动态数组的 Delphi 代码的问题。编写代码的最初目的是比较两个大小相同但日期和时间戳可能不同的文件的内容，以查看内容是否相同。这是通过将数据对中的每个文件读取到单独的动态数组中并将一个数组的每个字节与另一个数组的相应字节进行比较来完成的。

该代码多次调用 TFileStream.Read。大约 75 次调用后，程序崩溃并显示“内存不足”错误消息。

读取的数据块有多大似乎并不重要，似乎是导致错误消息的调用次数。

该代码是我编写的一个函数，每当程序遇到两个需要比较的文件时都会在其他地方调用该函数（由于我不会深入讨论的原因，这可能是四十或五十个不同的文件对）。'Out of Memory' 错误无论是以小块读取的单个文件，还是以整体方式读取的多个文件，都会发生。似乎调用次数是错误的决定因素。

虽然我意识到实现文件比较的方法可能比我在下面显示的更优雅，但我真正想知道的是使用 TFileStream 和/或 SetLength 调用有什么问题导致记忆问题。我尝试在每次调用后释放内存（如代码所示），似乎没有什么区别。

如果有人能解释出了什么问题，我将不胜感激。

```
function Compare_file_contents(SPN,TPN : String; SourceFileSize : int64) : boolean;

var

  SF                : TFileStream; //First file of pair for comparison
  TF                : TFileStream; //Second file of pair
  SourceArray       : TBytes; // Buffer array to receive first file data
  TargetArray       : TBytes; //Buffer array to receive second file data
  ArrayLength       : int64; //Length of dynamic array
  Position          : int64; //Position within files to start each block of data read
  TestPosition      : int64; //Position within dynamic arrays to compare each byte
  MaxArrayLength    : integer; //Maximum size for the buffer arrays
  LastRun           : Boolean; //End first repeat loop

begin

{ The comparison has an arbitrary upper boundary of 100 MB to avoid slowing the
  the overall program. The main files bigger than this will be *.pst files that
  will most likely have new dates every time the program is run, so it will take
  about the same time to copy the files as it does to read and compare them, and
  it will have to be done every time.

  The function terminates when it is confirmed that the files are not the same.
  If the source file is bigger than 100 MB, it is simply assumed that they are
  not identical, thus Result = False. Also, LongInt integers (=integers) have
  a range of -2147483648..2147483647, so files bigger than 2 GB will have
  overflowed to a negative number. Hence the check to see if the file size is
  less than zero.

  The outer repeat ... until loop terminates on LastRun, but LastRun should only
  be set if SecondLastRun is True, because it will skip the final comparisons in
  the inner repeat ... until loop otherwise. }

  Result := True;
  LastRun := False;
  MaxArrayLength := 1024*1024;
  if (SourceFileSize > 100*1024*1024) or (SourceFileSize < 0) then Result := False
    else
      begin

{ The comparison is done by using TFileStream to open and read the data from
  the source and target files as bytes to dynamic arrays (TBytes). Then a repeat
  loop is used to compare individual bytes until a difference is found or all
  of the information has been compared. If a difference is found, Result is
  set to False. }

    if SourceFileSize > MaxArrayLength then ArrayLength := MaxArrayLength
      else ArrayLength := SourceFileSize;
    SF := TFileStream.Create(SPN,fmOpenRead);
    TF := TFileStream.Create(TPN,fmOpenRead);
    Position := 0;
    SetLength(SourceArray,ArrayLength);
    SetLength(TargetArray,ArrayLength);
    try
      SF.Read(SourceArray,ArrayLength);
      TF.Read(TargetArray,ArrayLength);
      Position := SF.Position;
    finally
      SF.Free;
      TF.Free;
    end;
      repeat
      TestPosition := 0;
        repeat
          if SourceArray[TestPosition] <> TargetArray[TestPosition] then
            Result := False;
          Inc(TestPosition);
        until (Result = False) or (TestPosition = ArrayLength);
        if SourceFileSize > Position then
          begin
            if SourceFileSize - Position - MaxArrayLength > 0 then
              ArrayLength := MaxArrayLength
              else ArrayLength := SourceFileSize - Position;
            SF := TFileStream.Create(SPN,fmOpenRead);
            TF := TFileStream.Create(TPN,fmOpenRead);
            SF.Position := Position;
            TF.Position := Position;
            try
              SF.Read(SourceArray,ArrayLength);
              TF.Read(TargetArray,ArrayLength);
              Position := SF.Position;
            finally
              SF.Free;
              TF.Free;
            end;
        end else LastRun := True;
      until (Result = False) or LastRun;
      Finalize(SourceArray);
      Finalize(TargetArray);
  end;
end; { Compare_file_contents } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T15:49:59.380

这个例程似乎比它需要的复杂得多。我没有尝试调试它，而是为您提供了比较流的例程。

```
function StreamsEqual(Stream1, Stream2: TStream): Boolean;
const
  OneKB = 1024;
var
  Buffer1, Buffer2: array [0..4*OneKB-1] of Byte;
  SavePos1, SavePos2: Int64;
  Count: Int64;
  N: Integer;
begin
  if Stream1.Size<>Stream2.Size then begin
    Result := False;
    exit;
  end;

  SavePos1 := Stream1.Position;
  SavePos2 := Stream2.Position;
  Try
    Stream1.Position := 0;
    Stream2.Position := 0;

    Count := Stream1.Size;
    while Count <> 0 do begin
      N := Min(SizeOf(Buffer1), Count);
      Stream1.ReadBuffer(Buffer1, N);
      Stream2.ReadBuffer(Buffer2, N);
      if not CompareMem(@Buffer1, @Buffer2, N) then begin
        Result := False;
        exit;
      end;
      dec(Count, N);
    end;
    Result := True;
  Finally
    Stream1.Position := SavePos1;
    Stream2.Position := SavePos2;
  End;
end; 
```

如果您希望将 100MB 大小的检查添加到此函数中，很明显在哪里以及如何进行。

上面的例程使用堆栈分配的缓冲区。相反，您的版本在堆上分配。也许您的版本会导致堆碎片。

我意识到这并不能回答您提出的直接问题。但是，它确实解决了您的问题。我希望这被证明是有用的。

# ios - 我必须在我的 IOS 应用程序上显示产品描述吗？对于非消耗品？

> ID：14799428
> 
> 赞同：0
> 
> 时间：2013-02-10T15:42:26.190
> 
> 标签：ios, in-app-purchase

在他/她继续购买之前，我是否必须向用户展示产品描述？所以我的应用程序。被苹果接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T20:32:49.707

作为一种体验，并取决于此[链接](http://www.cocoanetics.com/2010/02/things-i-learned-implementing-my-first-inapppurchase/)。

您必须决定哪些内容足够清晰才能显示。就我而言，图像和标题就足够了。

苹果人，因为什么是足够的，什么是不够的，所以会使用相同的方法。

# r - rbind 两个 data.frame 保留行顺序和行名

> ID：14799434
> 
> 赞同：11
> 
> 时间：2013-02-10T15:43:05.543
> 
> 标签：r, merge, dataframe, rbind

我有一个`data.frame`对象列表，我想将它们排成一行，即`merge(..., all=T)`. 但是，`merge`似乎删除了我需要保持完整的行名。有任何想法吗？例子：

```
x = data.frame(a=1:2, b=2:3, c=3:4, d=4:5, row.names=c("row_1", "another_row1"))
y = data.frame(a=c(10,20), b=c(20,30), c=c(30,40), row.names=c("row_2", "another_row2"))
> merge(x, y, all=T, sort=F)
     a  b  c  d
  1  1  2  3  4
  2  2  3  4  5
  3 10 20 30 NA
  4 20 30 40 NA 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T15:56:15.610

既然你知道你实际上并没有合并，而只是 rbind-ing，也许这样的事情会起作用。它利用了`rbind.fill`“plyr”。要使用它，请指定您想要`list`的s 中的一个。`data.frame``rbind`

```
RBIND <- function(datalist) {
  require(plyr)
  temp <- rbind.fill(datalist)
  rownames(temp) <- unlist(lapply(datalist, row.names))
  temp
}
RBIND(list(x, y))
#               a  b  c  d
# row_1         1  2  3  4
# another_row1  2  3  4  5
# row_2        10 20 30 NA
# another_row2 20 30 40 NA 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-10T15:55:31.273

一种方法是`row.names`在合并中使用，以便您将其作为附加列。

```
> merge(x, y, by=c("row.names", "a","b","c"), all.x=T, all.y=T, sort=F)

#      Row.names  a  b  c  d
# 1        row_1  1  2  3  4
# 2 another_row1  2  3  4  5
# 3        row_2 10 20 30 NA
# 4 another_row2 20 30 40 NA 
```

**编辑：**通过查看`merge`带有 的函数`getS3method('merge', 'data.frame')`，`row.names`显然将其设置为 NULL（这是一个很长的代码，所以我不会在这里粘贴）。

```
# Commenting 
# Lines 63 and 64
row.names(x) <- NULL
row.names(y) <- NULL

# and 
# Line 141 (thanks Ananda for pointing out)
attr(res, "row.names") <- .set_row_names(nrow(res)) 
```

并创建一个新函数，比如 ，`MERGE`就像 OP 打算在这个例子中那样工作。只是一个实验。

# c# - 多个客户端流套接字侦听器

> ID：14799438
> 
> 赞同：1
> 
> 时间：2013-02-10T15:43:15.427
> 
> 标签：c#, network-programming, stream-socket-client

对于一个项目，我必须制作一个在网络中运行的应用程序。在这个网络中，有 2 个或更多客户端（streamsockets）连接到 1 个服务器（streamsocketlistener）。有没有办法告诉服务器从一个客户端接收数据，然后将其发送到另一个客户端，而不是保持在同一个连接上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:14:11.307

您的意思是通过第三个（即服务器）将数据从一个客户端中继到另一个客户端吗？如果是这样，那么这篇[WPF 客户端服务器聊天示例](http://www.networkcomms.net/creating-a-wpf-chat-client-server-application/)文章就演示了这一点。尤其是在一个名为 HandleIncomingChatMessage 的方法中的注释，大约在那篇文章的一半。

# ios - 信号 SIGABRT 简单表视图

> ID：14799440
> 
> 赞同：1
> 
> 时间：2013-02-10T15:43:25.847
> 
> 标签：ios, uitableview, sigabrt

我只是按照教程中的几个步骤创建了一个包含 50 行的简单 TableView，但我得到了“Signal SIGABRT”：/ 我将 Storyboard 中的 TableView 与我创建的 TableViewController-Class 连接起来。

这是我的简单代码：

```
#import "TableViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 50;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...

    cell.textLabel.text = [NSString stringWithFormat:@"Row %i",indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:47:52.703

欢迎来到堆栈溢出！设置`UITableViewCell`s 的标准方法不久前略有变化。这意味着 Xcode 为 tableViews 提供的模板代码使用该`-tableView: dequeueReusableCellWithIdentifier: forIndexPath:`方法，而较旧的教程和书籍（大部分）使用`tableView: dequeueReusableCellWithIdentifier:`

如果您想以新方式 ( `-tableView: dequeueReusableCellWithIdentifier: forIndexPath`) 执行此操作，则需要添加 `[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];`, `viewDidLoad`（或在情节提要/笔尖中设置原型单元重用 id，并适当设置单元类型 - 基本应该适用于普通单元）。

旧的方式 ( `tableView: dequeueReusableCellWithIdentifier:`) 通常后跟如下`if`语句：

```
if(cell == nil) 
{
    cell = [UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

（`\\Configure the cell. . .`评论在哪里）

虽然这真的很简单，但公平地说，大多数教程确实教授旧方法，如果你没有注意到这两种`-tableView:dequeueReusableCell`方法之间的微小差异，我想这可能会让初学者感到困惑。显示新方法的教程在[这里](http://kurrytran.blogspot.co.uk/2011/10/ios-5-storyboard-uitableview-tutorial.html)

# objective-c - 带有自定义变量的自定义注释

> ID：14799443
> 
> 赞同：1
> 
> 时间：2013-02-10T15:43:46.547
> 
> 标签：objective-c, ios5, mkannotation

我目前有一个地图视图控制器，我在其中根据一些解析的 json 数据添加注释。

我正在尝试将此json数据中的值传递给以下segue，我想要这样做的方式是为每个注释（venueId）添加一个自定义变量，因此当按下它时我可以设置下一个全局值segue 通过一些逻辑得到。

但是，我尝试过的所有操作都导致场地 ID 的值为 NUll，我的代码如下：

我的位置.H

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation>{

    NSNumber *venueId;
}

@property (nonatomic,readonly) NSNumber *venueId;

- (id)initWithName:(NSString *)name address:(NSString *)address coordinate:(CLLocationCoordinate2D)coordinate venueId:(NSNumber*)venueId;

@end 
```

我的位置.M

```
#import "MyLocation.h"
#import "GlobalData.h"

@interface MyLocation ()

@property (nonatomic,copy) NSString *name;
@property (nonatomic,copy) NSString *address;
@property (nonatomic,assign) CLLocationCoordinate2D coordinate;

@end
@implementation MyLocation

@synthesize venueId = _venueId;

- (id) initWithName:(NSString *)name address:(NSString *)address coordinate:(CLLocationCoordinate2D)coordinate venueId:(NSNumber*)venueId{

    if ((self = [super init])) {

        self.name = name;
        self.address = address;
        self.coordinate = coordinate;
        _venueId = self.venueId;

    }
    return self;

}

- (NSString *)title{
    return _name;
}

- (NSString *)subtitle{
    return _address;
}

- (CLLocationCoordinate2D)coordinate{
    return _coordinate;
}

- (NSNumber *)venueId{
    return _venueId;
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{

    NSLog(@"THE CALL OUT has been pressed");

}

@end 
```

在我的 MapViewController.M 中绘制场地

// 根据传入的数据绘制场地

```
- (void)plotVenuePositions{

    for (id<MKAnnotation> annotation in _mapView.annotations){
        // start fresh and remove any annotations in the view
        [_mapView removeAnnotation:annotation];
    }

    for (NSDictionary *row in [[GlobalData sharedGlobalData]venuesArray]){

        NSNumber *venueId = [row objectForKey:@"v_id"];
        NSString *venueName =[row objectForKey:@"v_name"];
        NSNumber *venueLat = [row objectForKey:@"v_lat"];
        NSNumber *venueLon = [row objectForKey:@"v_lon"];
        NSString *venueTown = [row objectForKey:@"t_name"];

        // create co-ord
        CLLocationCoordinate2D coordinate;
        // set values
        coordinate.latitude = venueLat.doubleValue;
        coordinate.longitude = venueLon.doubleValue;
        // create annotation instance
        MyLocation *annotation = [[MyLocation alloc]initWithName:venueName address:venueTown coordinate:coordinate venueId:venueId];
        // add annotation
        [_mapView addAnnotation:annotation];
        NSLog(@"VNEU ID IS %@",venueId);
        NSLog(@"ANNOTATION name is %@", annotation.title);
        NSLog(@"ANNOTATION subtitle is %@", annotation.subtitle);
        NSLog(@"ANNOTATION description is %@", annotation.description);
        NSLog(@"ANNOTATION venue ID IS %@", (MyLocation *)annotation.venueId);
    }

} 
```

最后是 MapViewController.M 中的注释检查

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
 static NSString *identifier = @"MyLocation";
 if ([annotation isKindOfClass:[MyLocation class]]) {

 MKAnnotationView *annotationView = (MKAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
 if (annotationView == nil) {
     annotationView = [[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:identifier];
     annotationView.enabled = YES;
     annotationView.canShowCallout = YES;
     annotationView.image = [UIImage imageNamed:@"pin_orange.png"];
     // set the cell to have a callout button
     annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
 }
 else{
 annotationView.annotation = annotation;
 }
 return annotationView;
 }
 return nil;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:26:45.680

在`initWithName`方法中，这一行：

```
_venueId = self.venueId; 
```

不会将当前位置的场所 id 设置为 init 方法的*参数*值`venueId`。
它将它设置为当前位置的*属性*值`venueId`。

由于该属性值由 支持`_venueId`，因此该行实际上将其设置为等于自身，并且由于它最初为 null，因此它保持为 null。

该行应该是：

```
_venueId = venueId; 
```

或者如果您不使用 ARC：

```
_venueId = [venueId retain]; 
```

然而，这一行会给你一个编译器警告，“局部变量隐藏了实例变量”。这是因为方法参数名称与属性名称相同。

尽管更改将起作用，但要删除编译器警告，请将方法参数的名称更改为`venueId`（例如`iVenueId`）以外的名称，然后更改的行将是：

```
_venueId = iVenueId; 
```

# java - Android WebView 在链接点击时不启动标准浏览器 - shouldOverrideUrlLoading 无效

> ID：14799445
> 
> 赞同：2
> 
> 时间：2013-02-10T15:43:50.290
> 
> 标签：java, android, webview, webviewclient, android-webview

在我的 Android 应用程序中，我有一个带有自定义 WebViewClient 的 WebView 元素。它通过 显示错误页面`onReceivedError()`，并为`shouldOverrideUrlLoading()`.

我希望 WebView 现在可以在外部浏览器中打开链接，而不是在 WebView 本身中打开链接，正如在 SO 上的许多其他帖子中所解释的那样。但是，这不起作用。它仍然会打开 WebView 中的每个链接。

这可能与我不通过加载内容`loadUrl()`而是通过`loadData()`并传递 html 字符串这一事实有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:00:38.450

您必须使用意图在外部浏览器中启动 url。方法`shouldOverrideUrlLoading()`是一个很好的候选者：

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    Context context = view.getContext();
    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

    // Launch default browser
    context.startActivity(browserIntent);

    return true;
} 
```

# parameters - in,out,inout,在UML中返回参数方向

> ID：14799455
> 
> 赞同：12
> 
> 时间：2013-02-10T15:44:32.757
> 
> 标签：parameters, call, uml, specifications

当我通过 OMG 2.5（Beta）推广的 UML 规范阅读以下概念时：

> in：表示参数值是调用者传入的。
> 
> inout：表示参数值由调用者传入，然后返回给调用者。
> 
> out：表示参数值被传递给调用者。
> 
> return：表示参数值作为返回值传回给调用者。

这是否意味着“in”是按值调用，而“inout”是按引用调用？

你能澄清一下这些概念吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:01:13.667

引用调用是 and 的一种可能实现`inout`，`out`是的。

请记住，UML 以一种与语言无关的方式描述*行为*。由实际语言中给定接口的实现来确定这意味着什么。

在像 Ada 这样的语言中，具有语言级别`in`、、`out`和`in out`参数，这可以直接用语言表达，编译器可以决定在哪里引用或复制是更好的实现。在像 Python 这样的语言中，所有参数都通过引用（某种程度）传递，这种 UML 级别的*意图*表示法不会导致实现级别的任何区别。在像 C 这样的语言中，具有显式指针类型和按值传递的所有参数，这些用 UML 表达的意图变成显式地址引用和指针取消引用。

换句话说，简短的回答是“是的，大致就是这个*意思*，但它可能不是它*的作用*”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-29T08:29:23.787

• in - 输入参数（不可修改）。

• out - 输出参数（可以修改以将信息传达给调用者）。

• inout - 可以修改的输入参数。

• return - 调用的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:41:06.103

关于 UML 要记住的关键是它被设计为*通用*的，它旨在独立于实现平台。具体来说，它是一个 PIM，一个独立于平台的模型。因此，使用平台特定的实现语义（例如“按值”和“按引用”）是用词不当。

现在在实践中定义这些特定领域的语义是项目架构师的一项工作，在许多情况下，您提到的那些语义是有效的，但情况并非总是如此。

[模型驱动架构 (MDA)](http://www.sparxsystems.com/platforms/mda_tool.html) 加上[平台配置文件](http://www.sparxsystems.com/resources/mda/)=[平台特定设计](http://uml.org.cn/UMLApplication/Rong_UML_Platform03.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T11:34:06.520

在查看[官方 UML 规范](https://www.omg.org/spec/UML/2.5.1/)时，我们发现一个细微的变化：

> in：表示参数值是调用者传入的。
> 
> inout：表示参数值是由调用者传入的，并且*（可能不同的）*值传递给调用者。
> 
> out：表示参数值被传递给调用者。
> 
> return：表示参数值作为返回值传回给调用者。

它包含一个注释：不能将多个参数标记为返回参数。

我找不到有关此 ParameterDirectionKind 枚举的任何进一步定义/说明。

即UML 不想进一步说明这一点。而且最肯定的是，它没有将其中任何一个指定为按引用传递或按值传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-29T15:47:30.440

“in”既不表示参数是按值传递的，“inout”也不表示参数是按引用传递的。

根据[UML 规范](https://www.omg.org/spec/UML/2.5.1/)的第**13.2.3.2 条行为参数**：

> 当调用行为时，可以提供与具有方向“in”或“inout”的参数相对应的参数值，这受这些参数的多样性的约束。...参数值可用于影响调用行为执行的过程

条款**9.4.3.5 参数**说：

> 效果属性可用于指定传入或传出参数的对象发生的情况。

例如“删除”效果意味着：

> 行为执行完成后，作为参数值的对象不存在。

然后明确指出：

> 只有 in 和 inout 参数可能有“删除”效果

值传递或引用传递是实现方法，都可以用来实现in、inout和out参数。在 C 中，如果 UML 模型要求您这样做，您可以按值传递指向函数的指针并删除指针指向的对象。

# jquery - 使用 carouFredSel 构建具有此要求的图像滑块？

> ID：14799458
> 
> 赞同：-6
> 
> 时间：2013-02-10T15:44:47.093
> 
> 标签：jquery, slider, thumbnails

**目标：**使用 carouFredSel 构建滑块，具有与此相同的行为[http://www.gcmingati.net/wordpress/wp-content/lab/jquery/svwt/index.html](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/svwt/index.html)

**说明：**主图下方有 5 个缩略图。幻灯片应该从第一个缩略图开始，然后在一段时间后必须选择下一个缩略图，然后是下一个和下一个。当它到达第 5 个缩略图时，必须自动滚动到下 5 个缩略图。当用户将鼠标悬停在整个滑块区域上时，必须停止所有动画。

**HTML：**

```
<div style="width: 600px;">
<div id="slides-images">
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
    <img src="http://placehold.it/600x300"/>
</div>
<div id="slides-thumbs" class="clearfix">
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
    <div><img src="http://placehold.it/110x80" /></div>
</div>
<a id="prev" href="#">Prev</a>
<a id="next" href="#">Next</a>
</div> 
```

**JSFIDDLE：http:** [//jsfiddle.net/hfMmk/1/](http://jsfiddle.net/hfMmk/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:54:08.993

> 使用 carouFredSel 构建具有此要求的图像滑块？

不。

# jquery - jQuery 新手 - 为什么这不起作用？

> ID：14799461
> 
> 赞同：1
> 
> 时间：2013-02-10T15:45:38.253
> 
> 标签：jquery, html

这真的很基本，所以提前很抱歉不得不寻求帮助：o

我已经设置了一个简单的页面来使用 jQuery，但我无法使用简单的显示/隐藏功能。

这是我的代码..

```
<html>
<head>
    <title>Testing Javascript/jQuery</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
    $(document).ready(function() {
    $("div p").hide();
    });

    $("show").click(function(){
        $("div p").show()
    });

    $("hide").click(function(){
        $("div p").hide()
    });
    </script>
</head>
<body>
    <button id='hide'>Click to hide the text</button>
    <button id='show'>Click to show the text</button>
     <div><p>you can't see me!</p></div>   
</body>
</html> 
```

Chromes 开发者工具没有给出任何错误，所以我不知道去哪里找。

文本最初是隐藏的，但显示和隐藏按钮什么也不做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:46:49.790

代替

```
$("show").click(function(){ 
```

和

```
$("#show").click(function(){ 
```

这样 jQuery 就会查找带有 id 的元素`show`（当然对于 id 也是一样的`$("hide")`）。

# actionscript-3 - 如何使用 actionscript 3 重新启动 flash 应用程序

> ID：14799462
> 
> 赞同：0
> 
> 时间：2013-02-10T15:45:42.740
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5, flashdevelop

是的，我需要重新启动我的应用程序、我的 actionscript 3 代码或至少删除阶段中的所有内容以上传开头。

这不是电影，因此不能选择使用 gotoandplays。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:53:01.603

一是结构设计。

例如：将一个gameContainer 的精灵变量添加到舞台。随着游戏的进行，所有对象都添加了 gameContainer。当游戏结束时，移除事件，你不需要移除所有的对象。并调用您所做的默认设置的功能。

```
// removeEventListener
// removeAllObjects about following
while (gameContainer.numChildren)
{
   gameContainer.removeChildAt (0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:56:13.730

最佳做法是让每个带有强侦听器的对象也侦听 Event.REMOVED_FROM_STAGE 事件，并销毁其所有侦听器并处理您希望保存的属性。

```
while(numChildren) removeChildAt(0); 
```

从根（或主时间线）调用将从范围内的当前容器中删除所有符号。我假设您调用它的内容已添加到显示列表中，所以

```
while(MovieClip(root).numChildren) MovieClip(root).removeChildAt(0); 
```

是合适的代码。

# jquery - 根据需要动态添加或删除输入字段

> ID：14799464
> 
> 赞同：0
> 
> 时间：2013-02-10T15:45:49.977
> 
> 标签：jquery, forms, dynamic, input

我设置了多个文件输入，我通过隐藏输入来设置样式，在 html/css 中创建自己的输入，然后通过 jQuery 控制原始输入以获得功能。

如果所有输入都已填充，我希望能够添加另一个输入和关联的 HTML，如下所示：

*   从 1 个输入开始
*   如果它被填充/使用，添加另一个输入
*   重复
*   删除已清除的输入，只留下 1 个空输入以供使用。

我尝试用我的代码创建一个 js fiddle，但它似乎无法通过它，所以这是我网站上的测试链接：[LINK](http://ry-design.co.uk/image-upload-test.php)

和代码，JS：

```
$('.file-browse').click(function(){
    var thisone = $(this).attr('id');
    $('input[name="input-'+ thisone+'"]').click();
});

$('input[type="file"]').on('change', function(){
    var thetext = $(this).val();
    var thetextsplit = thetext.split('\\').pop();
    var thisone = $(this).attr('name').split('-').pop();
    if($('div[id^="info-file"]').text() == thetextsplit){
        alert('you have already selected this file');
        $(this).replaceWith( $(this).val('').clone( true ) );
    }
    else{
        $('#info-'+ thisone).text(thetextsplit);
        $('#clear-'+ thisone).fadeIn(100);
    }
});

$('.file-clear').click(function(){
    var thisone = $(this).attr('id').split('-').pop();
    $('input[name="input'+ thisone +'"]').replaceWith( $('input[name="input'+ thisone +'"]').val('').clone( true ) );
    $('#info-'+ thisone).text('');
    $(this).fadeOut(100);
}); 
```

HTML：

```
 <div class="file-container">
      <div class="file-info" id="info-file1"></div>
      <div class="file-browse" id="file1">Browse</div>
      <div class="file-clear" id="clear-file1">X</div>
    </div>

    <div class="file-container">
      <div class="file-info" id="info-file2"></div>
      <div class="file-browse" id="file2">Browse</div>
      <div class="file-clear" id="clear-file2">X</div>
    </div>

    <div class="file-container">
      <div class="file-info" id="info-file3"></div>
      <div class="file-browse" id="file3">Browse</div>
      <div class="file-clear" id="clear-file3">X</div>
    </div>

    <form action="" method="POST" enctype="multipart/form-data">
  <input type='file' name="input-file1" class="file-input-hidden" />
      <input type='file' name="input-file2" class="file-input-hidden" />
      <input type='file' name="input-file3" class="file-input-hidden" />   
  <input type="submit" style="clear:both; float:left;"/>
    </form> 
```

CSS：

```
.file-container{
clear:both;
float:left;
width:445px;
height:40px;
overflow:hidden;
padding:0;
margin:0;
}

.file-info{
float:left;
width:250px;
height:15px;
padding:5px;
border-radius:5px;
-webkit-border-radius:5px;
border:1px solid #95d2d2;
margin:0 20px 0 0;
font-family:Verdana, Geneva, sans-serif;
font-size:14px;
color:#373737;
overflow:hidden;
}

.file-browse{
float:left;
width:100px;
height:15px;
padding:3px 5px 8px 5px;
border-radius:5px;
-webkit-border-radius:5px;
border:1px solid #95d2d2;
background-color:#02b3b3;
color:#ffffff;
font-family:Arial, Gadget, sans-serif;
font-size:16px;
font-weight:bold;
letter-spacing:normal;
text-align:center;  
cursor:pointer;
}

.file-input-hidden{
opacity:0;
visibility:hidden;
float:left;
}

.file-clear{
display:none;
float: left;
width: 18px;
height: 18px;
padding: 5px;
color: #ffffff;
background-color: #CC0000;
font-family: Verdana, Geneva, sans-serif;
font-size: 14px;
font-weight: bold;
margin-left: 20px;
text-align: center;
border-radius: 5px;
cursor:pointer;
} 
```

抱歉，这篇文章太长了！到目前为止，我不确定展示我的作品的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:55:43.997

rpsep,

我认为从模板开始事情会更简单：

```
<div id="input_template" style="display:none;">
    <div class="file-container">
        <div class="file-info"></div>
        <div class="file-browse">Browse</div>
        <div class="file-clear">X</div>
    </div>
    <input type='file' name="input-file[]" class="file-input-hidden" />
</div> 
```

笔记：

*   只有外层容器有id；其他一切都有一个类。
*   不要担心输入元素与其他所有元素在同一个容器中；克隆后将其放置在适当的位置。

然后将功能附加到模板：

```
$("#input_template").find('.file-browse').on('click', function() {
    $(this).closest(".file-container").data('hidden').click();
});

$("#input_template").find('.file-clear').on('click', function(){
    $container = $(this).closest(".file-container");
    $container.data('hidden').remove();
    $container.remove();
});

$('#input_template').find(".file-input-hidden").on('change', function(){
    var val = $(this).val().split('\\').pop();
    var $visible = $(this).data('visible');
    var $matches = $(".file-info").filter(function() {
        return $(this).text() === val;
    });
    if($matches.length > 0) {
        alert('You have already selected this file');
        var $clone = $this.val('').clone(true);
        $visible.data('hidden', $clone);
        $this.replaceWith( $clone );
    }
    else{
/*
        $visible.find(".file-info").text(val);
        $visible.find(".file-clear").fadeIn(100);
        makeInputSet();
*/
        var $fi = $visible.find(".file-info");
        if(!$fi.text()) 
            makeInputSet();
        $fi.text(val).end().find(".file-clear").fadeIn(100);
    }
}); 
```

*将事件处理委托给容器可能会更好，但是根据问题中的代码，这段代码更容易编写。*

使用以下函数调用模板，然后立即调用它来创建第一个实例：

```
function makeInputSet() {
    var $visible = $("#input_set").find(".file-container").clone(true, true).appendTo("#...");//appropriate selector required
    var $hidden = $("#input_set").find(".file-input-hidden").clone(true, true).appendTo("#...");//appropriate selector required
    $visible.data('hidden', $hidden);
    $hidden.data('visible', $visible);
}

makeInputSet(); 
```

笔记：

*   `makeInputSet()`然后在填充现有输入字段（及其可见对应项）时从“更改”处理程序内部调用。
*   这两个`.data()`调用确保隐藏元素和可见元素具有相互通信的方式，而不必对 id 进行字符串处理或形成相当低效的闭包。

*一切都未经测试，因此可能需要调试*

# php - 计算一个值出现在 like_id 匹配喜欢的列中的次数？

> ID：14799467
> 
> 赞同：-1
> 
> 时间：2013-02-10T15:45:57.327
> 
> 标签：php, mysql, sql

有谁知道您将如何计算一个值在单个列中出现的总次数。

例如我的表看起来像：

```
user_id  |  liked_id   |   likes

   3             1           1   
   4             1           1 
```

我想要做的是计算liked_id 匹配的likes 列的总数。

所以 like_id 1 有 2 个喜欢？

有人可以告诉我我该怎么做吗？

```
function count_likes() {
            global $connection;
            global $profile_id;
            $query = "SELECT likes, count(*) FROM ptb_likes GROUP BY liked_id";
            $count_likes_set = mysql_query($query, $connection);
            confirm_query($count_likes_set);
            return $count_likes_set;        
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:49:46.930

尝试这个：

```
SELECT liked_id, SUM(likes) FROM ptb_likes GROUP BY liked_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:50:08.603

你应该将它们分组`liked_id`

```
SELECT liked_id, count(*)  totalLikes
FROM ptb_likes 
GROUP BY liked_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:01:53.563

如果您只想要 like_id 为 1 的行数，

```
SELECT liked_id, COUNT(likes) FROM ptb_likes WHERE liked_id = 1; 
```

如果你想要每个like_id的频率：

```
SELECT liked_id, COUNT(likes) FROM ptb_likes GROUP BY liked_id; 
```

注意：不要使用 SUM，因为它会添加 like_id 的所有值，如果您的 like_id 大于 1，那么您的计数将是错误的。请改用计数。

# node.js - 在 node.js 中同步加载依赖项

> ID：14799469
> 
> 赞同：0
> 
> 时间：2013-02-10T15:46:07.387
> 
> 标签：node.js, require, dependency-management

我在脚本中加载了一个节点库，并且在加载了一些依赖于该库的自定义之后立即加载：

```
var somelib = require('somelib');

// some customizations made to
// somelib's methods
require('./somelib.custom');

somelib.SomeObject = ...
^
ReferenceError: somelib is not defined 
```

我不断收到异常，因为加载是异步完成的，而第二次`require`发生在第一次被正确命名之前。有什么好办法解决这个问题？谢谢。

### 编辑：我的原始代码

我正在尝试使用[`fabric.js`](https://github.com/kangax/fabric.js)节点包（基于包站点中的[文章）从 json 数据创建 PNG 图像。](http://fabricjs.com/fabric-intro-part-4/#node)这是通过使用最初在客户端生成的 JSON 数据加载服务器端结构画布，然后写入文件流来完成的：

```
var path     = require('path');
var fs       = require('fs');
var fabric   = require('fabric').fabric;
require('./fabric.custom');

var canvas   = fabric.createCanvasForNode(400, 400);
var outfile  = fs.createWriteStream("image.png");
var filepath = "/path/to/file.json";

fs.readFile(filepath, 'utf8', function(err, json) {
  canvas.loadFromJSON(json, function() {
    var stream = canvas.createPNGStream();
    stream.on('data', function(chunk) {
      outfile.write(chunk);
    });
  });
}); 
```

“fabric.custom”文件包含几个自定义织物画布对象，这些对象覆盖了一些织物原型默认值。它们在客户端上运行良好，并且是正确渲染画布所必需的。它看起来像这样：

```
fabric.TextBox = fabric.util.createClass(fabric.Text, {

  type: 'text-box',
  // more object specific stuff ...
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-14T13:54:23.803

与其依靠 a 中的副作用`require`来改变您的`fabric`对象，不如让`fabric.custom.js`文件导出修改后的`fabric`，像这样？

面料.custom.js：

```
var fabric = require('fabric').fabric;
fabric.myCustomMethod = function(){ ... }
...
module.exports = fabric; // the modified fabric 
```

在你的主文件中：

```
var path     = require('path');
var fs       = require('fs');
// var fabric   = require('fabric').fabric; No need for this line anymore
var modifiedFabric = require('./fabric.custom');

...
modifiedFabric.myCustomMethod( ... ); // should now be available 
```

# c# - 在枚举之前通过 IEnumerable 调用 Any() 有什么好处？

> ID：14799470
> 
> 赞同：1
> 
> 时间：2013-02-10T15:46:13.173
> 
> 标签：c#, linq

在枚举之前对枚举调用 .Any() 有什么好处吗？例如（假设该列表是一个 IEnumerable）：

```
if(list != null && list.Any()) 
{
    foreach(var item in list) 
    {
        // do stuff
    }
} 
```

我怀疑它没有，但我宁愿确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:01:19.797

没有真正的好处，但`Any`在这里调用可能有缺点，因为您可能会枚举两次。

一个空检查就足够了。foreach 会为你处理剩下的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:01:48.297

不，真的。如果列表为空，您的 foreach 循环将根本不会迭代。

```
if(list != null) 
{
    foreach(var item in list) 
    {
        // do stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:02:30.443

不，没有真正的好处。

如果列表不为空，而是为空，则 foreach 会很好（即它不会抛出异常，也不会枚举空列表）。进行空值检查就足够了。

# ios - 推入子视图后更改导航栏中的后退按钮文本

> ID：14799471
> 
> 赞同：0
> 
> 时间：2013-02-10T15:46:12.647
> 
> 标签：ios, cocoa-touch, uibarbuttonitem

我想在子视图已经推入之后而不是在推入之前更改后退按钮文本。

更具体地说，我正在开发一个聊天应用程序，它会在后退按钮中显示未读消息计数，例如“<- Chats (3)”。因此，每当新消息到达时，我都需要更新按钮文本。

经过一番挖掘，我发现更改父视图的标题*最终会*更改后退按钮文本。但是有一个重绘延迟问题。更改标题后，重新绘制后退按钮大约需要 5 秒钟。

简而言之，我想知道

*   如何在更改父标题后立即重绘后退按钮。

*   或者，在按钮显示后更改后退按钮文本的更好方法。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:12:29.247

我不知道你现在是怎么做的，但是把它放在一个按钮方法中会立即改变后退按钮的标题：

```
-(IBAction)changeTitle:(id)sender {
     [self.navigationController.viewControllers[self.navigationController.viewControllers.count -2] setTitle:@"New"];
} 
```

# camera - 在 Unity 中渲染纹理和标准化视图矩形

> ID：14799475
> 
> 赞同：1
> 
> 时间：2013-02-10T15:46:41.693
> 
> 标签：camera, unity3d, textures, render, render-to-texture

我正在使用 Unity 3D 3.5 专业版。

我有这个场景，里面有两个摄像机。其中一个正在查看一个上面有渲染纹理的平面。另一个是记录渲染纹理。当记录渲染纹理的相机具有 1:1 标准化视图和高度矩形时，一切都很好。但是当它有所不同时，会发生一些奇怪的事情——渲染纹理的图像会失真。我尝试在更新函数中释放和丢弃渲染纹理的内容，但没有任何改变！这完全阻止了我正在完成的项目。我这里有图片来详细说明情况。这是一个问题的原因是因为我需要能够将非矩形物体放在正方形前面，并且它们的比例不会出现扭曲，由于显示渲染纹理的平面的比例不是正方形。我可能做错了什么？

![http://i.imgur.com/prdDVR3.png](../Images/381344aeabfb093dc228cf1f07d0d14e.png)

![http://imgur.com/hzdmJyv](../Images/958bcdcb62ae6539a7dd5696f170cc0c.png)

我也对统一答案提出了类似的问题，但在那里没有得到任何有用的帮助。这是线程：

[http://answers.unity3d.com/questions/389094/rendertexture-normalized-view-rect.html](http://answers.unity3d.com/questions/389094/rendertexture-normalized-view-rect.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:46:19.137

我想到了。我需要弄乱渲染纹理的偏移和平铺。傻兔子！

# iphone - CLLocationCoordinate2D 空值

> ID：14799478
> 
> 赞同：2
> 
> 时间：2013-02-10T15:47:00.977
> 
> 标签：iphone, xamarin.ios, mkmapview

在我的 monodroid 应用程序中，我需要将 CLLocation 对象分配给 null 值。我需要它来检测一些特定的条件。例如，假设一个对 CLLocationCoordinate2D 对象执行某些操作的函数，我们希望该函数的 if 和 exeption 返回 null。但 monotouch 不允许这种类型的 null 值。

这是我用于此建议的测试方法：

```
 private static CLLocationCoordinate2D sampleMethod ()
    {
        try {
            return new CLLocationCoordinate2D ();
        } catch (Exception ex) {
            return null;
        }
    } 
```

和错误一致：

```
Error CS0037: Cannot convert null to `MonoTouch.CoreLocation.CLLocationCoordinate2D' because it is a value type (CS0037) (Realtyna_iPhone_Project) 
```

在这种状态下我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:12:06.450

CLLocationCoordinate2D 是值类型，不能为空。但是，C# 允许您将值类型包装在[Nullable](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)包装器中，以便它们可以包含空值。

例如，这应该是有效的：

```
private CLLocationCoordinate2D? ProcessLocation ()
{
    CLLocationCoordinate2D? retLoc;

    try {
        // do something with retLoc here
    } catch (Exception ex) {
        retLoc = null;
    }

    return retLoc;
} 
```

# php - 从 Google Chart url 获取 json 内容

> ID：14799479
> 
> 赞同：0
> 
> 时间：2013-02-10T15:47:12.643
> 
> 标签：php, json, google-visualization

我正在尝试从以下 url 获取 json 数据：

[https://chart.googleapis.com/chart?cht=gv&chl=digraph](https://chart.googleapis.com/chart?cht=gv&chl=digraph)框架 { 1[color=red]; 2；3[颜色=红色]；4；5个；6；7; 8个；9; 10个；11; 12[颜色=红色]；13; 14[颜色=红色]；15; 16[颜色=红色]；17[颜色=红色]；2 -> 1; 3 -> 1; 4 -> 1; 5 -> 1; 6 -> 2; 8 -> 9; 9 -> 8; 12 -> 2; 12 -> 3; 12 -> 4; 12 -> 5; 7 -> 6; 7 -> 10；7 -> 11；8 -> 7; 13 -> 5; 14 -> 13；15 -> 6; 16 -> 15；17 -> 12; 10 -> 4; 11 -> 3; 14 -> 16；16 -> 17；}&chof=json

我尝试了其他问题中建议的几种方法：

```
$jsonurl = "https://chart.googleapis.com/chart?cht=gv&chl=digraph framework { 1[color=red]; 2; 3[color=red]; 4; 5; 6; 7; 8; 9; 10; 11; 12[color=red]; 13; 14[color=red]; 15; 16[color=red]; 17[color=red]; 2 -> 1; 3 -> 1; 4 -> 1; 5 -> 1; 6 -> 2; 8 -> 9; 9 -> 8; 12 -> 2; 12 -> 3; 12 -> 4; 12 -> 5; 7 -> 6; 7 -> 10; 7 -> 11; 8 -> 7; 13 -> 5; 14 -> 13; 15 -> 6; 16 -> 15; 17 -> 12; 10 -> 4; 11 -> 3; 14 -> 16; 16 -> 17; }&chof=json"

//Method 1
$json = file_get_contents($jsonurl); 
// returns an error from the google page: 400\. That’s an error. Your client has issued a malformed or illegal request. That’s all we know

//Method 2
$curlSession = curl_init();
 curl_setopt($curlSession, CURLOPT_URL, $jsonurl);
 curl_setopt($curlSession, CURLOPT_BINARYTRANSFER, true);
 curl_setopt($curlSession, CURLOPT_RETURNTRANSFER, true);

 $json_decoded = json_decode(curl_exec($curlSession));
 curl_close($curlSession);
 // returns NULL
 // This makes sense if the JSON isn't not returned correctly. I think json_decode() returns NULL if the input is not correct json data.

 //Method 3
 $json = file_get_contents(urlencode($jsonurl));
 // Gives another error: [function.file-get-contents]: failed to open stream: File name too long 
```

如果我只是在我的代码中发布原始 JSON 数据，那么我的算法的其余部分就可以正常工作。关键是，在我的实际代码中，url 是动态的，我需要能够从 url 获取 JSON 数据。

这似乎是谷歌的安全问题。但是，我不知道如何解决这个问题。

这是我在 Stackoverflow 上的第一个问题。如果您想了解更多/我是否应该以某种方式编辑我的问题，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:37:25.813

您的 URL 需要进行 URI 转义，以便 cURL 正确使用它。如果我将您的脚本更改为：

```
# note that in this string, all special characters (eg. spaces) are %-escaped
$jsonurl = "https://chart.googleapis.com/chart?cht=gv&chl=digraph%20framework%20{%201[color=red];%202;%203[color=red];%204;%205;%206;%207;%208;%209;%2010;%2011;%2012[color=red];%2013;%2014[color=red];%2015;%2016[color=red];%2017[color=red];%202%20-%3E%201;%203%20-%3E%201;%204%20-%3E%201;%205%20-%3E%201;%206%20-%3E%202;%208%20-%3E%209;%209%20-%3E%208;%2012%20-%3E%202;%2012%20-%3E%203;%2012%20-%3E%204;%2012%20-%3E%205;%207%20-%3E%206;%207%20-%3E%2010;%207%20-%3E%2011;%208%20-%3E%207;%2013%20-%3E%205;%2014%20-%3E%2013;%2015%20-%3E%206;%2016%20-%3E%2015;%2017%20-%3E%2012;%2010%20-%3E%204;%2011%20-%3E%203;%2014%20-%3E%2016;%2016%20-%3E%2017;%20}&chof=json";

# your settings here are fine
$curlSession = curl_init();
curl_setopt($curlSession, CURLOPT_URL, $jsonurl);
curl_setopt($curlSession, CURLOPT_BINARYTRANSFER, true);
curl_setopt($curlSession, CURLOPT_RETURNTRANSFER, true);

# XXX: not entirely safe here
# curl_exec() could dump out something other than JSON if it encounters an error
# I recommend saving the output of curl_exec($c) separately in case of error
$json = json_decode(curl_exec($c)); 
```

然后`$json`包含我期望的数据对象。我在 Mac 上的 PHP 5.3.15 中对此进行了测试。

# audio - 在 Haxe (NME) 中对节奏游戏的节拍计时最准确的方法是什么？

> ID：14799481
> 
> 赞同：1
> 
> 时间：2013-02-10T15:47:17.663
> 
> 标签：audio, time, haxe, nme

我正在尝试创建一个侧面滚动射击游戏原型，其中敌人和子弹的动作被计时。我正在努力的目标 bpm 是 120。

这显然是声音的时间安排，我已经开始尝试创建一个节拍器作为指导。我使用 getTimer 函数计算帧时间并累积该值，直到达到正确的时间（120bpm 为 500 毫秒），然后播放声音。

正如您可以想象的那样，这并没有给出恒定的结果，而是表明存在更好的选择。所以我的问题是，对于这种类型的游戏，最准确的声音计时方法是什么？这仅仅是时间问题吗？我正在使用 Haxe NME，我会不会离音频设备太远而无法足够快地播放声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:00:11.963

在不同的 NME 平台上播放 a`Sound`会有不同的行为，包括不同的延迟。即使在普通的旧 Flash 中，`Sound.play`也不`SoundChannel.position`是很准确！

对于节奏游戏，您确实需要 NME 目前没有的低级音频控制。如果您的目标是 Flash，您可以使用[`SampleDataEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html)动态混合音频并获得更准确的时间。有计划`SampleDataEvent`在未来添加对 NME 的跨平台支持（[来源](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html)）。

# macos - linux上的“git-svn clone”和mac上的“git svn clone”一样吗？

> ID：14799483
> 
> 赞同：1
> 
> 时间：2013-02-10T15:47:20.567
> 
> 标签：macos, git, git-svn

linux上的“git-svn clone”和mac上的“git svn clone”一样吗？

在 Linux 上，我知道我可以执行以下命令来克隆 svn repo

```
git-svn clone -s http://example.com/my_subversion_repo local_dir 
```

但是在我的 MAC 上我找不到 git-svn 所以下面的命令可以工作

```
git svn clone -s http://example.com/my_subversion_repo local_dir 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:58:29.853

是的。`git-svn`and`git svn`是等价的（就像 eg `git-commit`and`git commit`和其他）。

# javascript - Three.js：表面是单面的

> ID：14799488
> 
> 赞同：1
> 
> 时间：2013-02-10T15:47:28.693
> 
> 标签：javascript, three.js, webgl

此代码（三个.js）：

```
<script type="text/javascript">
init();
animate();

// FUNCTIONS        
function init() 
{
// SCENE
scene = new THREE.Scene();
// CAMERA
var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;
camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
scene.add(camera);
camera.position.set(0,150,400);
camera.lookAt(scene.position);  
// RENDERER
renderer = new THREE.WebGLRenderer( {antialias:true} );
renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
container = document.createElement( 'div' );
document.body.appendChild( container );
container.appendChild( renderer.domElement );
// EVENTS

// CONTROLS
controls = new THREE.TrackballControls( camera );
// STATS
stats = new Stats();
stats.domElement.style.position = 'absolute';
stats.domElement.style.bottom = '0px';
stats.domElement.style.zIndex = 100;
container.appendChild( stats.domElement );
// LIGHT
var light = new THREE.PointLight(0xffffff);
light.position.set(0,250,0);
scene.add(light);
// FLOOR
var floorTexture = new THREE.ImageUtils.loadTexture( 'https://localhost/geos/images/square.png' );
floorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping; 
floorTexture.repeat.set( 10, 10 );
var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture } );
var floorGeometry = new THREE.PlaneGeometry(1000, 1000, 10, 10);
var floor = new THREE.Mesh(floorGeometry, floorMaterial);
floor.position.y = -0.5;
floor.doubleSided = true;
scene.add(floor);
}

function animate() 
{
   requestAnimationFrame( animate );
   render();       
   update();
}

function update()
{

   controls.update();
   stats.update();
}

function render() 
{
  renderer.render( scene, camera );
}

</script> 
```

渲染通道，好吧，但是当我尝试在表面下查看时，它消失了。但在一个示例中，取自代码可以正常工作。唯一的区别：在示例库 r49 中，但我有一个 r55

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T15:52:27.413

代替

```
floor.doubleSided = true; 
```

利用

```
floorMaterial.side = THREE.DoubleSide; 
```

如果您正在学习，请仅参考官方的 three.js 示例，该示例适用于 r.55。

如果您必须从旧版本更新，请参阅[迁移 Wiki](https://github.com/mrdoob/three.js/wiki/Migration)以获取升级帮助。

# asp.net - 如何使用 jQGrid 和 lib.web.mvc 从 rowId 获取 rowObject

> ID：14799494
> 
> 赞同：1
> 
> 时间：2013-02-10T15:48:04.937
> 
> 标签：asp.net, jqgrid

我正在使用 lib.web.mvc jQGrid 助手。

我可以使用 jqgrid 从一行中获取 rowId

onSelectRow: "SelectedRowHandler",

```
 function SelectedRowHandler(rowId) {
        $.ajax({
            url: '/Invoice/selectedRow',
            data: { id: rowId }
        });
        return true;

    } 
```

但我需要获取 rowObject，以便获取数据库记录的 ID。

有没有一种简单的方法而不是处理rowId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:19:56.453

我从[奥列格那里得到的](https://stackoverflow.com/users/315935/oleg)

```
var rowData = this.p.data[this.p._index[rowId]]; 
```

# php - 将 Laravel 路由的所有段发送到函数

> ID：14799505
> 
> 赞同：1
> 
> 时间：2013-02-10T15:49:14.730
> 
> 标签：php, laravel

我希望能够响应 Larvel 3 中包含未知数量段 N 的路线。例如

```
/segment_1/...segment_N-1/segment_N 
```

路由应该将每个段的值发送到匿名函数。

我试过使用：

```
Route::get('/(:any)/(:all?)', function($segments){
    //do something
}); 
```

这接受所有路由，但仅将第一段发送到函数

Laravel 中是否有一种简单的方法来实现我所需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:07:55.280

不确定是否是最好的方法，但它对我有用。

```
 Route::get('(:all)?', function() {
    $current = URI::current();
    $segments = explode ('/', $current);
    foreach ($segments as $key => $value) {
        echo "URI Segment[" . $key . "]" . $value . "<br>";
    }
 }); 
```

# silverlight - 在 Silverlight 中为面板的子项重用样式

> ID：14799506
> 
> 赞同：0
> 
> 时间：2013-02-10T15:49:20.510
> 
> 标签：silverlight, xaml

我正在使用 Silverlight 5，在我的一个页面中，我有一个 StackPanel，我按以下方式为其子项设置样式：

```
<StackPanel Orientation="Horizontal">
<StackPanel.Resources>
    <Style TargetType="Button">
        <Setter Property="FontSize" Value="12"></Setter>
    </Style>
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="DarkRed"></Setter>
    </Style>
</StackPanel.Resources>
<TextBlock Text="TextBlockText:"></TextBlock>
<Button Content="FirstButton" Command="{Binding SetLayout}" CommandParameter="FirstOnly"/>        
<Button Content="FirstSecondButton" Command="{Binding SetLayout}" CommandParameter="FirstSecond"/>
</StackPanel> 
```

我在同一页面中有另一个 StackPanel，如何在不重新复制和粘贴的情况下重复使用这种样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:48:12.730

你有几个选择。把它放在`Object.Resources`他们父母双方的喜欢`Window.Resources`或`UserControl.Resources`任何情况下。除了这将影响该父项中相同类型的所有对象。

另一种方法是做同样的事情，如果你不想这样做，给每个样式模板一个`x:Key`名字，然后明确地调用它给每个实例，比如`<Buttton Style="{StaticResource YourExplicitStyleKeyName}"/>`

或者您可以将样式放在 a 中`ResourceDictionary`，并以与上述相同的方式显式调用它们。希望这可以帮助。

# eclipse - Eclipse CDT 大纲不显示当前功能

> ID：14799508
> 
> 赞同：2
> 
> 时间：2013-02-10T15:49:33.907
> 
> 标签：eclipse, eclipse-cdt

我正在使用 Linux 上的 CDT 插件运行 eclipse 4.2.1 (Juno)。我有与编辑器链接的大纲视图，当光标在文件周围移动时，大纲正确地跟随，除了突出显示的选择不在大纲的可见区域内。所以我必须在大纲中滚动才能找到选择。是否有一些配置需要更改或者这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:50:05.047

This appears to be a bug which has been filed with the eclipse group as [Bug 391058](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391058).

# d3.js - 当我在 nvd3 图表上有少量日期时，如何防止刻度线重复

> ID：14799511
> 
> 赞同：10
> 
> 时间：2013-02-10T15:50:01.983
> 
> 标签：d3.js, nvd3.js

当日期数量有限时，x 轴喜欢重复日期。请看这个小提琴：

[http://jsfiddle.net/skilesare/bFfJ2/1/](http://jsfiddle.net/skilesare/bFfJ2/1/)

```
nv.addGraph(function() {  

    var data = fakeActivityByDate();

    var chart = nv.models.lineChart();

chart.xAxis
       .axisLabel('Date')
       .rotateLabels(-45)
       .tickFormat(function(d) { return d3.time.format('%b %d')(new Date(d)); });

   chart.yAxis
       .axisLabel('Activity')
       .tickFormat(d3.format('d'));

   d3.select('#chart svg')
       .datum(data)
     .transition().duration(500)
       .call(chart);

   nv.utils.windowResize(function() { d3.select('#chart svg').call(chart) });

   return chart;
 });

function days(num) {
  return num*60*60*1000*24
}
 /**************************************
  * Simple test data generator
  */

function fakeActivityByDate() {
   var lineData = [];
   var y=0;
   var start_date = new Date() - days(365); // one year ago

   for (var i = 0; i < 4; i++) {
     lineData.push({x: new Date(start_date + days(i)), y: y});
     y=y+Math.floor((Math.random()*10)-3);
   }

   return [
     {
       values: lineData,
       key: 'Activity',
       color: '#ff7f0e'
     }
   ];
 }` 
```

如果您的屏幕足够宽，您会看到重复的日期。如果你挤压窗户，问题就会消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:20:06.813

这个问题与屏幕尺寸无关，因为它也可能出现在这样的情况下：你只有 3 天的时间来显示，而不是 3 个刻度，你会得到 6 或 10 或其他任何东西（实际上，如果我看看你的jsfiddle）。确实，nvd3 使用类似这样的东西来设置刻度的尺寸（看看axis.js）：

```
if (ticks !== null)
    axis.ticks(ticks);
 else if (axis.orient() == 'top' || axis.orient() == 'bottom')
    axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100); 
```

这个问题有几种解决方案：

*   您要么实现自己的轴组件并替换 nvd3 的轴

*   您可以直接修改 nvd3 的轴组件并添加一些设置，然后专门用于您所描述的这种情况（您会注意到 nvd3 是高度可定制的）。

*   技巧：您使用**d3**自己的**tickValues()**并向其传递一个数组，其中包含您希望在屏幕上显示的日期（例如：第一个日期、最后一个日期以及由您的算法计算出的几个日期）。请参阅 d3 的文档：[https](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues) ://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues 。根据具体情况（您要修改哪个轴和哪个图表），您不仅需要注释我粘贴的代码并将您的算法设置为图表组件（例如 lineChart），还需要添加tickValues 的设置器并用您的值覆盖这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T07:42:10.453

迟到的回复，但可能对其他人有用。我使用一种解决方法来消除重复的记号，方法是维护一组已应用的记号和 d3 的多格式说明符。

```
 uniqueTicks = [];
    xTickFormat = d3.time.format.multi([
                                        ["%Y", function (d) {
                                        // If tick not applied yet                                            
                                        if (uniqueTicks.indexOf(d.getFullYear()) === -1) {
                                                uniqueTicks.push(d.getFullYear());
                                                return true;
                                            } else {
                                                return false;
                                            }                                        
                                        }],
                                        ["", function () {
                                            return true;
                                        }]
                                    ]);

    d3.svg.axis().tickFormat(xTickFormat ); 
```

这个技巧可以针对任何其他类型的刻度格式进行调整。

# python - 在 os x 上使用 python3 安装 pyside

> ID：14799514
> 
> 赞同：3
> 
> 时间：2013-02-10T15:50:25.840
> 
> 标签：python, macos, python-3.x, pyside, homebrew

我曾尝试在 osx 山狮上安装 pyside 和 python3。我一直在尝试

```
brew install pyside 
```

但它只适用于python2。

我也尝试过使用来自 pyside github 代表的 buildscripts。进行所需的更改

```
./build_and_install 
```

然而失败了，与

```
Linking CXX shared library libpyside.cpython-33m.dylib
[  4%] Built target pyside
[  4%] Running generator for QtCore...
/bin/sh: /Users/einar/devel/pkg/pyside-sandbox-python3/bin/SHIBOKEN_GENERATOR-NOTFOUND: No such file or directory
make[2]: *** [PySide/QtCore/PySide/QtCore/qabstracteventdispatcher_wrapper.cpp] Error 127
make[1]: *** [PySide/QtCore/CMakeFiles/QtCore.dir/all] Error 2
make: *** [all] Error 2 
```

我不知道现在该怎么办。我发现这个页面[pyside 论坛](http://qt-project.org/forums/viewthread/22978)建议我只需要符号链接一些东西就可以让它在 python3 中工作，`brew install pyside`但`/usr/local/Cellar/pyside/1.1.2/lib`只有文件名为 2.7 的东西。

有没有人设法让 pyside 在 osx 上使用 python3 或者知道一些关于如何做到这一点的指南？我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-05T21:24:09.347

这已在 Homebrew 中修复（[参见 wiki](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)）。安装 Pyside

```
brew install pyside --with-python3 
```

将为 Python 2 和 Python 3 安装它。为此，您可能必须先卸载它们`shiboken`，`pyside`如果它们已经为 Python 2 安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:10:34.110

也许在这种情况下不要使用自制软件，而是做一个

```
pip3 install pyside 
```

? 假设你已经酿造了 python3。

编辑：不起作用。这可能是存在自制配方的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T03:08:54.550

值得一提的是，您可以使用自制软件进行一些小的修改

1.  酿造编辑pyside
2.  修改 which_python 以简单地返回“python3.3”（或您使用的任何版本）
3.  添加 CMAKE 标志 -DUSE_PYTHON3=1
4.  保存并退出
5.  brew 编辑 shiboken
6.  修改 python_prefix 为`python3.3-config --prefix`
7.  修改 python_version 为`python3.3-config --libs`
8.  修改 which_python 以返回“python3.3”
9.  brew卸载pyside shiboken
10.  冲泡安装pyside
11.  python3 -c "从 PySide.QtGui 导入 *"
12.  沐浴荣耀。

笔记！如果也为 python2 安装了 pyside，这可能会导致冲突。pyside 和 pyqt 在这个问题上都有积极的发展。见[https://github.com/mxcl/homebrew/pull/18588](https://github.com/mxcl/homebrew/pull/18588)

# php - 从 AJAX 返回的 JSON 解析错误

> ID：14799516
> 
> 赞同：1
> 
> 时间：2013-02-10T15:50:51.737
> 
> 标签：php, jquery, ajax, json

我正在像这样进行 AJAX 调用：

```
function getEvents(info){
  $.ajax({
    url: 'get_all_events.php',
    data: {year: info['year'],month: info['month']},          
    type: 'POST',
    dataType: 'json',
    success: function (result) {
        alert(JSON.stringify(result));
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        console.log(XMLHttpRequest.statusText);
        console.log(textStatus);
        console.log(errorThrown);
    }
});
} 
```

这适用于我正在开发的日历应用程序的初始化。我创建一个对象“信息”并为其分配月份/日期等......然后当用户按下“上一个”或“下一个”时，它重新分配“信息”对象的某些变量并`getEvents`再次调用。我尝试重写我的查询，重写我的 AJAX 调用，添加 contentType ......似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:59:58.030

查看控制台中是否有任何错误。还要确保您`get_all_events.php`返回`valid JSON`字符串。当你指定`dataType:'json'`jQuery 会自动解析返回的数据。如果返回的数据不是，`valid JSON`则抛出此错误。

如何检查？

做一件事。从您的调用 中删除`dataType:'json',`属性...在您的处理程序中...从控制台复制响应文本并将其粘贴到一些在线 JSON 验证器 (jsonlint.com) 中，如果存在错误，则在服务器端更新到`$.ajax()``console.log(result)``success``get_all_events.php``echo``valid JSON`

# c# - LINQ sdk 不同

> ID：14799519
> 
> 赞同：0
> 
> 时间：2013-02-10T15:51:24.450
> 
> 标签：c#, linq, distinct

我有一个 LINQ 查询，它基本上将数据加载到数组中，然后加载到列表框中；这很好用。但我现在想做的只是选择不同的。我以前在 sql 中做过这个，但在 linq 中它对我不起作用。

感谢您的任何建议。

```
items = table
    .Where(row => row.author != "")                    
    .Take(150)
    .ToCollectionView(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:06:32.830

Use the [Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx) method ...

e.g.

query.Distinct().ToList();

# python - 在 Cython 中创建对象列表

> ID：14799523
> 
> 赞同：3
> 
> 时间：2013-02-10T15:52:01.927
> 
> 标签：python, list, object, cython

我想知道如何在 Cython 中创建 C 对象列表。

这个简单的例子工作：

cimport cython

```
b = real_test()
print(b)

cdef real_test():
    cdef int a
    cdef Node b = Node()
    a = b.h
    return a

cdef class Node:
    cdef int h
    def __cinit__(self):
        self.h = 3 
```

但不是这个：

```
cimport cython

b = real_test()
print(b)

cdef real_test():
    cdef int a
    cdef Node *b = [Node(),Node(),Node()]
    a = b[0].h
    return a

cdef class Node:
    cdef int h
    def __cinit__(self):
        self.h = 3 
```

这个怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:19:29.300

我不确定是否正确，但它的工作：

```
cimport cython

b = real_test()
print(b)

cdef real_test():
    cdef int a
    cdef list b = [Node(),Node(),Node()]
    a = b[0].h
    return a

cdef class Node:
    cdef int h
    def __cinit__(self):
        self.h = 3
    property h:
        def __get__(self):
          return self.h
        def __set__(self, float value):
          self.h = value 
```

# php - post_count 仅适用于带有缩略图的帖子

> ID：14799524
> 
> 赞同：1
> 
> 时间：2013-02-10T15:52:05.867
> 
> 标签：php, wordpress

如何编辑此条件以仅计算带有缩略图的帖子？

```
if ( $my_query->have_posts() && ( ( $my_query->post_count ) >= 3 ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:02:06.253

您必须执行循环，因为缩略图关系不会自动解析：

```
$postsWithThumbs = 0;

while($my_query->have_posts()){
  $my_query->the_post();

  if(has_post_thumbnail())
    $postsWithThumbs++;
}

wp_reset_postdata();

print $postsWithThumbs; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:02:28.937

您必须以不同的方式检查它；

```
$post_with_thumbs = 0;
if ( $my_query->have_posts() ) {
  while ( $my_query->have_posts() ): $my_query->the_post();
    if (  has_post_thumbnail()) {
            $post_with_thumbs++;
        }
  endwhile;
}
wp_reset_query();

if ($post_with_thumbs >= 3) {
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:04:32.163

I'm not sure if this still works, but from [this thread](http://wordpress.org/support/topic/query-posts-based-on-if-has-post-thumbnail) you can select posts with a thumbnail by specifying `meta_key=_thumbnail_id` in your original query.

# mysql - MySQL 数据库中的记录数

> ID：14799529
> 
> 赞同：3
> 
> 时间：2013-02-10T15:52:58.237
> 
> 标签：mysql, sql

好吧，这应该足以获取当前数据库中所有记录的数量：

```
SELECT SUM(TABLE_ROWS) FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_SCHEMA = DATABASE(); 
```

令人惊讶的是，每次执行上述语句时，我都会得到不同的数字！首先我认为我的数据库有问题。但是对于 MySQL 开发人员提供的 sample db 也是一样的。

`sakila`多次执行上述语句会产生以下值：

```
46362
48104
45170
47060
48139 
```

我做错了什么？这是一个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T15:55:22.373

这是 InnoDB 的事情——您可以改为在 table 上使用 count(id)，但它很慢。

因为它很慢，InnoDB 随机抽取行样本，测量大小，然后除以总大小以确定大约有多少行。

# php - 使用 PHP 检查 URL 中的某些单词

> ID：14799532
> 
> 赞同：1
> 
> 时间：2013-02-10T15:53:13.957
> 
> 标签：php

我正在尝试编写一个 php 代码，它检查 url 中是否有某个单词，如果有的话 - 显示一些东西。

我正在使用这个：

```
$url = parse_url($_SERVER['REQUEST_URI']);

if($url['path'] == '/main-category/') {
echo........ 
```

例如，我正在寻找“主类别”。对于[http://www.site.com/main-category/](http://www.site.com/main-category/)代码正在运行，但如果 url 包含子类别[http://www.site.com/main-category/sub-category/](http://www.site.com/main-category/sub-category/)，则不是。

无论后面是否有东西，我怎样才能让它找到 /main-category/ ？

我在这里阅读了一些主题，但没有弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T15:54:16.263

使用[`strpos()`](http://us3.php.net/manual/en/function.strpos.php). 手册中的示例：

```
<?php
$mystring = 'abc';
$findme   = 'a';
$pos = strpos($mystring, $findme);

// Note our use of ===.  Simply == would not work as expected
// because the position of 'a' was the 0th (first) character.
if ($pos === false) {
    echo "The string '$findme' was not found in the string '$mystring'";
} else {
    echo "The string '$findme' was found in the string '$mystring'";
    echo " and exists at position $pos";
}
?> 
```

# php - 带有 Jquery 的 PHP：如何验证表单并转到下一页

> ID：14799533
> 
> 赞同：0
> 
> 时间：2013-02-10T15:53:18.233
> 
> 标签：php, jquery, ajax, validation, upload

我想使用 php 和 ajax jquery 创建一个带有验证的表单页面。[我从http://malsup.com/jquery/form/](http://malsup.com/jquery/form/) 表单页面
下载了 jquery ：

```
<html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
<script type="text/javascript">
function checkAll(){
var errmsg = ""
document.getElementById("errmsg").style.display = "none";

if(document.getElementById("txtbox1").value == ""){
    errmsg += "Type your title<br/>";
}

if(document.getElementById("file1").value == ""){
    errmsg += "Upload your picture<br/>";
}

if(errmsg != ""){
    document.getElementById("errmsg").style.display = "block";
    document.getElementById("errmsg").innerHTML = errmsg;
    return false;
}

}

$(document).ready(function() {
   var options = {
    target: '#div2', //Div tag where content info will be loaded in
    url:'uploadfile.php', //The php file that handles the file that is uploaded
    beforeSubmit: checkAll,
    success:  function() {
        //Here code can be included that needs to be performed if Ajax request was successful
    }
    };

    $('#Form1').submit(function() {
        $('#Form1').ajaxSubmit(options);
        return false;
    });
});
</script>
</head>
<body>
<span id="errmsg"></span>
<div id="div2"></div>
<form name="Form1" id="Form1" method="post" action="next.php" enctype="multipart/form-data">
Title <input type="text" name="txtbox1" id="txtbox1" />
Picture <input type="file" name="file1" id="file1" /><br/>
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

上传文件.php：

```
<?php
if (((@$_FILES["file1"]["type"] == "image/gif") || (@$_FILES["file1"]["type"] == "image/png")
|| (@$_FILES["file1"]["type"] == "image/jpeg")
|| (@$_FILES["file1"]["type"] == "image/pjpeg"))
&& (@$_FILES["file1"]["size"] < 30720))
  {

  }
 else{
    echo "Check your file";
 }
?> 
```

我的问题：
我想为每个表单组件创建验证，包括文件上传（文件类型和大小检查），完成表单后，用户将被重定向到 next.php（参见表单操作）。
由于使用 ajax jquery 验证文件上传，操作更改为 uploadfile.php，如果用户完成表单，页面将无处可去。
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:10:14.860

在uploadfile.php中，当一切正常时，你可以输出一个javascript重定向：

```
{
    echo '<script type="text/javascript">window.location.replace("next.php");</script>';
} 
```

顺便说一句，请注意检查文件类型是不可靠的，因为它是由浏览器提供的（这不是强制性的）并且很容易被伪造。检查文件是否真的是图像的一种更安全的方法是检查是否`getimagesize`失败。

# c++ - 不从文件中读取

> ID：14799537
> 
> 赞同：0
> 
> 时间：2013-02-10T15:53:53.700
> 
> 标签：c++

我想从文件中读取每个单词。它打开文件但没有进入while循环

```
 string x;
        ifstream inFile ("test.txt");
        if (!inFile) {
            cout << "Unable to open file";
            exit(1); // terminate with error
        }

        while (inFile >> x) {
            cout << "hi" << endl;
        }
        cout << "hsiwsdsc" << endl;

        inFile.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:10:49.797

你没有检查文件是否打开，我的朋友。看看这段代码：

```
#include <string>

int main(int argc, char** argv) {
    std::string line;
    std::ifstream input("example.txt");

    if (input.is_open()) {
        while (input.good()) {
            std::getline(input, line);
            std::cout << line << std::endl;
        }
    } else {
        std::cerr << "Unable to open stinky file" << std::endl;
    }

    return 0;
} 
```

# html - 如何定位 在其余元素之下

> ID：14799541
> 
> 赞同：0
> 
> 时间：2013-02-10T15:54:46.633
> 
> 标签：html, css, position

我一直在研究这个太久了，因为我似乎无法弄清楚如何将其余元素推到下面。

我希望 IMAGES、INFO 和 ADD TO CART 位于所有其他内容的下方，带有 . 我不敢相信我会带着这个来，但我真的被困住了。谢谢！

![在此处输入图像描述](../Images/4fa726129777fe86604d7eacebf6710a.png)

这是实时页面：

[https://fine-grain-2.myshopify.com/products/the-bowden-brown-cherry#](https://fine-grain-2.myshopify.com/products/the-bowden-brown-cherry#)

这是HTML：

```
<article id="product-details">
    <section class="one columns alpha" id="images">TEST
    </section>
    <section class="one columns" id="info">
        <div>
            <div>
                <h2>{{ product.title | upcase }}</h2>
                {% for variant in product.variants %}
                <h3>{{ variant.title }}</h3>
                {% endfor %}
            </div>
            <div>
                <p>{{ product.description }}</p>
            </div>
                <h1>What Sets It Apart?</h1>
            <div>
                <p>This sleeve.</p>
            </div>
        </div>
  </section>
  <section class="one columns omega" id="buy">TEST3</section>

  <footer id="options">
      <a class="four columns alpha images" href="#">
        <span>IMAGES</span>
      </a>
      <a class="four columns info" href="#">
        <span>INFO</span>
      </a>
      <a class="four columns omega buy" href="#">
        <span>ADD TO CART</span>
      </a>
  </footer>

</article><!-- product-details --> 
```

这是CSS：

```
/*-----Product Page-----*/

#galleria {
    position: relative;
    z-index: 1;
}

#product-details { 
    position: relative;
    z-index: 2;
}

.galleria-container, .galleria-stage, 
.galleria-images , .galleria-image img , .galleria-image-nav, 
.galleria-image-nav-left, .galleria-image-nav-right, 
.galleria-thumbnails-container, .galleria-info, 
.galleria-tooltip {
    margin: 0;
    padding: 0;
}

.four.columns.images, .four.columns.info {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.3);
    margin: 0 30px 0 0;
    padding: 10px 0 5px;
    text-align: center;
}

.four.columns.buy {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.3);
    margin: 0 0 0 0;
    padding: 10px 0 5px;
    text-align: center;
}

#options {
    bottom: 0;
    padding-top: 16px;
    position: absolute;
}

#info, #buy {
    visibility: hidden;
    cursor: pointer;
}

#product-details section {
    background: none repeat scroll 0 0 rgba(218, 218, 210, 0.5);
}

footer {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:43:45.390

我看到的主要问题是您的页脚是否是文章内设置为相对的绝对位置元素。

问题是元素内的内容设置为向左浮动，使得文章标签的高度不等于内容的长度。

我对你的 CSS 做了一些快速的处理，这些选项中的任何一个都可以帮助你入门：

*   删除绝对定位，您需要调整一些填充和/或边距。但是，您的不可见部分确实会导致一些问题。
*   关闭此项的浮动和内联显示：.column、.columns。那么我认为你只需要调整你的绝对位置的底部值。

祝你好运

# javascript - 为什么带有 KineticJS 的 Chrome 中的边框框 3px 太长？

> ID：14799542
> 
> 赞同：2
> 
> 时间：2013-02-10T15:55:17.820
> 
> 标签：javascript, canvas, kineticjs

当某些东西在 Google Chrome 中有一个 tabindex 时，它会在其周围放置一个框以显示它已被选中。然而，在 KineticJS 中，Chrome 中的边框看起来太长了 3px 并且看起来很丑。

如果 Kinetic Stage 的高度为 100px，包含 div 为 100px，Chrome 认为包含 div 的高度为 103px。

这可以在这里看到：http: [//jsfiddle.net/UbxjT/](http://jsfiddle.net/UbxjT/)

HTML：

```
<div id='project1' tabindex=1></div> 
```

CSS：

```
#project1 {
    width: 500px;
    height: 100px;
    border: 1px solid black;
} 
```

JavaScript：

```
var stage1 = new Kinetic.Stage({
    container: 'project1',
    width: '500',
    height: '100'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:25:47.320

似乎是由于 Kinetic 舞台元素与其容器的高度相同并且也是`display: inline-block`

拥有CSS：

```
.kineticjs-content {
  display: block !important;
} 
```

将解决此问题，但我不知道这是否会导致您从未使用过 Kinetic 库的任何问题。

[http://jsfiddle.net/TmfpG/](http://jsfiddle.net/TmfpG/)

# objective-c - 为 ics 文件创建解析器

> ID：14799545
> 
> 赞同：1
> 
> 时间：2013-02-10T15:55:29.580
> 
> 标签：objective-c, icalendar

我正在尝试创建一个解析器，以便我可以从 .ics 文件加载数据并保存到某种数组中，然后可以将其加载到 Kal 库中。

ics 的格式是 vCalendar，看起来像这样：

```
BEGIN:VEVENT
DTSTAMP:20130207T123200
DTSTART;TZID=Europe/London:20121012T130000
DTEND;TZID=Europe/London:20121012T140000
SUMMARY:TEst
LOCATION:London
STATUS:CONFIRMED
UID:steve@msn.com
END:VEVENT 
```

我到处环顾四周，但似乎找不到一种技术来做到这一点，有人能给我一个关于如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:25:40.720

libical ( [http://sourceforge.net/projects/freeassociation/](http://sourceforge.net/projects/freeassociation/) ) 和/或`NSScanner`应该有帮助

# c# - 串行端口 WriteLine 有时会失败

> ID：14799548
> 
> 赞同：0
> 
> 时间：2013-02-10T15:55:50.290
> 
> 标签：c#, serial-port

我写了一个简单的程序，通过串口发送一个 AT 命令。我按照说明 [MSDN 示例](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.open.aspx)

串口 (38400,N,8,1)

```
serialPort1.PortName = "COM" + "5";// textBox1.Text;
        try
        {
            if (!(serialPort1.IsOpen))
                serialPort1.Open();

            // if (listBox1.SelectedIndex == 0 || listBox1.SelectedIndex == 1)
                serialPort1.WriteLine("atrst");
            // else
            //     serialPort1.WriteLine("araprst");

            serialPort1.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error opening/writing to serial port :: " + ex.Message, "Error!");
            Application.Exit();
        } 
```

当我使用 WriteLine 命令时，有时 AT 命令不会发送到端口。知道为什么吗？，有没有办法知道 WriteLine(String) 失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:34:04.383

您所描述的内容有几个原因，并且 MSDN 文章有一些......有趣的......代码。从您的代码片段中，我可以看到您没有正确设置串行端口，因此我将发布一个工作示例，其中包含您提供的设置，并希望对您有所帮助。

```
serialPort = new SerialPort(
                "COM5",      // port name
                38400,       // baud rate
                Parity.None, // parity
                8,           // bits
                StopBits.One // stop bits
            );

serialPort.Handshake = Handshake.None;
serialPort.WriteTimeout = 500;

serialPort.Open();
serialPort.Write("atrst");
serialPort.Close(); 
```

这是一种非常简单的方法，不包括错误处理，但它适用于具有您给定设置的串行设备。除非握手是错误的，考虑到高波特率，这是很有可能的，你应该研究一下。

# asp.net - 如何在 vb.net 中的另一个列表中对列表进行排序

> ID：14799549
> 
> 赞同：1
> 
> 时间：2013-02-10T15:55:55.450
> 
> 标签：asp.net, vb.net

我有两个列表声明为

```
Dim Item As New List(Of String)
    Dim Item2 As New List(Of Array) 
```

现在 Item2 的每个元素都包含 Item 的元素

现在 Item 有 4 个元素

```
Item.Add(String.Format(record(0)))   ' Field "Item"
Item.Add(String.Format(record(1)))   ' Field "Descrip"
Item.Add(String.Format(record(2)))   ' Field "Price"
Item.Add(String.Format(record(3)))   ' Field "Bin" 
```

现在我想根据字段“Bin”对Item2进行排序，然后在Item中的字段“Item”

以便Item2根据字段“Bin”的顺序包含项目，然后在Item中包含字段“Item”

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:29:13.687

您只需要创建一个类。我们还可以利用 .Net 的内置数据结构之一，即[SortedList](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)。为了使用排序列表，您的类需要实现[iComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)，我将在下面介绍。

```
Class Product
  public Item as string
  public Descrip as string
  public Price as decimal
  public Bin as string
end class 
```

**现在，你的类需要实现[iComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)**

我们将修改类如下

```
Class Product
  Implements IComparable

  public Item as string
  public Descrip as string
  public Price as decimal
  public Bin as string

  Public Overloads Function CompareTo(ByVal obj As Object) As Integer

    if obj is nothing then return 1

    Dim otherObj As Product = TryCast(obj, Product)
       If otherObj  IsNot Nothing Then 
           if me.bin < otherObj.bin then
             return -1
           else if me.bin = otherObj.bin andalso me.item < otherObj.item then
             return -1
           elseif me.bin = otherObj.bin andalso me.item = otherObj.item then
             return 0
           else
             return 1
       Else 
          Throw New ArgumentException("Object is not a Product")
       End If  
  End Function  

end class 
```

**现在，您应该使用`SortedList(of Product)`**

**你像这样向它添加元素**

```
Dim MyProduct as NewProduct
MyProduct.bin = "test"
MyProduct.price = 12.0D
MyProduct.item = "test"
MyProduct.descrip = "test"

Dim MySortedList = new SortedList(of Product)
MySortedList.add(NewProduct) 
```

MySortedList 始终保持其元素有序。

上面的代码可以优化一些，但我想你明白了。

**参考**

*   [iComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)
*   [排序列表](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)

# c - 使用C，在N个数组中找到唯一的数组

> ID：14799555
> 
> 赞同：0
> 
> 时间：2013-02-10T15:56:40.127
> 
> 标签：c, arrays

要在 N 个数组中找到唯一的数组，请考虑我有 3 个数组；

```
 array_1 [ ];
    array_2 [ ];
    array_3 [ ];

    How I approached is;

    I will have set a reference array 

ref_array[] =[values from 1 to 12] 
```

可以保证所有数组都有从 1 到 12 的随机元素。

```
e.g 1;array_1[7,8,9] , 
array_2[1,2,3,4] , 
array_3[ 2,4,10,11]..
 during the process of array_1 loop (7,8,9 are marked to zero in reference array)
 and in next loop of array_2 (1,2,3,4 are marked to zero in reference array) , 
and in next loop of array_3( 2,4 wont have matching element so store the array num which is three from this example), so array_1 and array_2 are unique among the three arrays 
```

eg 2 in detail + 如果array_1 和ref_array 之间存在匹配元素，则将对应的ref_array 元素标记为零。

```
 e.g array_1 has three elements[ 7,10,9]

          *array_1  7 is = ref_array 7 then
          mark ref_array[k]=0;
          so that there is no 7 in ref_array

       *array_1 10 is = ref_array 10 then
          mark ref_array[k]=0;
          so that there is no 10 in ref_array

      *array_1  9 is = ref_array 9
          mark ref_array[k]=0;
          so that there is no 9 in ref_array

     + now next array comes into the loop
       e.g array_2 has two elements[ 10, 1]

       *array_2 10is != ref_array [k]

       now element 10 is not found in the reference array

       then store the value of 'i'
       here i is the route num(which is array_num, in this example it is 2)

       array_2  2is = ref_array 2
        mark ref_array[k]=0;

         so that there is no 2 in ref_array.

     + e.g array_3 has three elements[ 2,7,11,10]

       *same procedure follows, element 2,7,10 has no matching to reference array.
        so the value of i is stored (which is array_num, in this example it is 3)

    + solution:
    so the array_1 is unique among the three arrays 
```

需要建议和指导。

我已经尝试过我的代码，但我在解决方案部分遇到了问题

```
#include <stdio.h> 
    struct route{

    int route[6][6];
    int no_routes_found;
    int count_each_route[6];
    };

    int main() {
    struct route *route_ptr, route_store;  
    route_ptr=&route_store;
    int ref_array[13];
    int count_ref_array=13;
    int i,j,k;
    int found_indices[18];
    int index_count=0;
    int store;

    int count=1;
    int random;
    int flag=0;

    // intializing the reference array
    for (i = 0; i < 13; i++)
    {                
        ref_array[i]= count++;         
        printf("\nref_array[%d] = %d", i,ref_array[i]);

      }

    // initializing the structure
    route_ptr->no_routes_found=3;
    route_ptr-> count_each_route[0]=3;
    route_ptr-> count_each_route[1]=2;
    route_ptr-> count_each_route[2]=4;
    for (i = 0; i < 6; i++)
    {
         for (j = 0; j < 6; j++)
         {          

             route_ptr->route[i][j] = rand() % 12 +1;
             printf("\nroute[%d][%d] = %d", i,j,route_ptr->route[i][j]);

          }
      }

    ////  solution part

    for (i = 0; i <(route_ptr->no_routes_found) ; i++)
    {
         for (j = 0; j < route_ptr-> count_each_route[i]; j++)
         {          
            for(k=0;k<(count_ref_array) ;k++)
            {
                if (route_ptr->route[i][j]==ref_array[k])
                {

                    printf("\nroute %dis = ref_array %d",route_ptr->route[i][j], ref_array[k]);
                    // here is where i need the solution
               }

           }
        }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:07:10.273

How to find the array that's different from all the others? By comparing each to the first array. Because you can't tell which is the odd-one-out if the first two are different, special-case code is needed.

```
int equal(int*a0, int *a1, size_t array_elems) {
    return !memcmp(a0, a1, array_elems * sizeof(int));
}            

int unequal_array(int **arrays, int N, size_t array_elems) {
    if (!equal(arrays[0], arrays[1], array_elems))
        return equal(arrays[0], arrays[2], array_elems) ? 1 : 0;
    for (int i = 2; i < N; i++) {
        if (!equal(arrays[0], arrays[i], array_elems)) return i;
    }
    return -1;
} 
```

# c# - 搜索文档时如何在wpf中使用进度条（圆形）？

> ID：14799556
> 
> 赞同：0
> 
> 时间：2013-02-10T15:56:43.583
> 
> 标签：c#, wpf

我想使用进度条 - 所以当我通过全文搜索搜索一些文档时，用户应该看到它正在进行中。假设，我有 50 000 个文档。我想使用全文搜索查找包含“建筑施工”一词的文档。它现在工作正常。但是当我搜索时，我必须等待 5-15 秒。我想在这段搜索中使用负载均衡。可能吗？我应该如何使用它？使用多线程还是其他？我怎么知道第一个线程是否完成工作？请给我一些清晰的想法和代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:58:27.010

假设您在这里谈论等待光标，还是您的意思是窗口中的进度条？对于等待光标，您需要在窗口中或希望光标出现的任何元素上使用它

```
<Window.Style>
    <Style TargetType="{x:Type Window}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsBusy}" Value="True">
                <Setter Property="Cursor" Value="Wait" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Window.Style> 
```

然后可以通过将 ViewModel 上的 IsBusy 属性更改为 true 来激活此功能，如果您不使用 MVVM，则可以在代码中

为了处理您的帖子的其余部分，您是否正在寻找一种将您的 sql 调用推送给工作人员的方法，以便它不会锁定 UI？

假设这是你想要的，这里是

```
public class SearchViewModel : INotifyPropertyChanged
{
    public bool IsBusy
    {
        get { return _isBusy; }
        set
        {
            _isBusy = value;
            RaisePropertyChanged("IsBusy");
        }
    }

    public void Search(string searchPhrase)
    {
        IsBusy = true;
        Task.Factory
            .StartNew(p =>
            {
                // This is where you do your database thing and return your results
            }, searchPhrase)
            .ContinueWith(t =>
            {
                // And this is where you use the returned results in t.Result
                // don't forget to check for errors :)
                IsBusy = false;
            }, TaskScheduler.FromCurrentSynchronizationContext());
    }
} 
```

或者如果您更喜欢异步方法

```
public class SearchViewModel : INotifyPropertyChanged
{
    public async Task Search(string searchPhrase)
    {
        IsBusy = true;
        var results = await DoDatabaseSearch(searchPhrase);
        // do stuff with results
        IsBusy = false;
    }

    public async Task<IEnumerable<SearchResult>> DoDatabaseSearch(string searchPhrase)
    {
        // This is where you would do your search
    }
} 
```

# ios - 最快的方法 - 字符串组件之间的逗号

> ID：14799559
> 
> 赞同：0
> 
> 时间：2013-02-10T15:56:59.637
> 
> 标签：ios, objective-c, nsstring

我有一个 NSString，让我们说“你好”......在每个字符之间用逗号填充这个字符串的最快方法是什么？（包括在第一个字符之前）
所以返回的字符串将是，“，H，E，L，L，O”

我只是要做一个for循环，并且每次添加逗号时都有一个变量上升2，这样它将经过新的逗号和下一个字母并添加一个逗号，然后检查该变量除以2是否更大比原始字符串的长度...有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:02:44.183

或者您可以将字符附加到可变字符串：

```
NSString *original = @"Hello";
NSUInteger len = original.length;

NSMutableString *newStr = [NSMutableString stringWithCapacity:len * 2];
for (int i = 0; i < len; i++) {
    [newStr appendFormat:@",%C", [original characterAtIndex:i]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:16:56.003

如果你喜欢正则表达式，你可以使用它们。不确定性能，因此对于长字符串，您可能需要验证这一点。

它的核心是两行代码：

```
NSString *orgString = @"Hello"; // Not part of the meat, for the line counters out there...

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"." 
                                                                       options:0
                                                                         error:nil];

NSString *commaString = [regex stringByReplacingMatchesInString:orgString
                                                        options:0
                                                          range:NSMakeRange(0, orgString.length)
                                                   withTemplate: @",$0"]; 
```

我冒昧地不检查正则表达式是否有错误，因为它只包含一个点。这真的应该在未来版本的操作系统中编译。

# heroku - 通过广播通知所有测功机？

> ID：14799562
> 
> 赞同：3
> 
> 时间：2013-02-10T15:57:12.717
> 
> 标签：heroku

有没有办法通过广播通知所有测功机？我想通知 Web 节点有关配置更改的信息，以便它们无需重新启动即可适应新配置。我知道广播通常应该使用第三方机制来实现，但我觉得这有点过度设计，因为我很少想做这样的广播。有什么简单的方法吗？

谢谢，奥托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:56:58.043

You could use built-in postgres listen/notify [http://www.postgresql.org/docs/9.2/static/sql-notify.html](http://www.postgresql.org/docs/9.2/static/sql-notify.html)

# ant - 如果 ANT 中的系统属性，则在帮助下查找正确的 java 文件

> ID：14799563
> 
> 赞同：0
> 
> 时间：2013-02-10T15:57:43.307
> 
> 标签：ant, junit

我有一个名为：ITEM_ROOTDIR.tests 的系统属性。它的值为 abc,xyz。使用基于 ANT 的任务，我如何在 src 文件夹中找到 abc.java 和 xyz.java ？（src 文件夹在 basedir 中，并且 basedir 已声明为“。”）一旦找到文件，我可以在包含任务中使用这些多个文件吗？如果不是如何包括它们？

最好只找到文件并将结果存储回 ITEM_ROOTDIR.tests。然后在包含任务中再次使用该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:58:38.937

在我看来，您正在通过单独运行测试来为自己创造工作。

这是我的标准测试目标：

```
<target name="test" depends="compile" description="Run unit tests">
    <mkdir dir="${build.dir}/tests"/>

    <junit printsummary="yes" haltonfailure="${junit.haltonfailure}">
        <classpath>
            <path refid="runtime.path"/>
            <pathelement path="${classes.dir}"/>
        </classpath>
        <formatter type="plain"/>
        <batchtest fork="yes" todir="${build.dir}/tests">
            <fileset dir="${src.dir}" includes="**/*Test*.java"/>
        </batchtest>
    </junit>
</target> 
```

在我的“src”目录中运行测试，为所有测试生成一个综合报告。

# 更新

运行时间过长的测试是一个非常常见的问题。标准答案是重构您的测试以使其更快...... :-(

意见各不相同，但根据我的经验，最好的解决方案是将您的测试分为不同的类别。

*   单元测试（模拟，因此应该快速运行并涵盖所有功能）
*   快速集成测试
*   缓慢的集成测试。

我将单元测试作为构建的一部分运行，并将集成测试作为单独的 Jenkins 作业（部署后）运行。这满足了我对即时反馈的需求，并将我的测试报告分为 3 类，而不是强迫我跟踪每个单独的测试。

反对单独测试的另一个论点是，在一个大型团队中，您看不到您的更改对代码库的其他部分产生的影响。毕竟这是一个团队的努力:-)

# c# - 将路径作为参数传递

> ID：14799569
> 
> 赞同：3
> 
> 时间：2013-02-10T15:58:15.927
> 
> 标签：c#, command-line-arguments

我正在尝试将路径字符串作为参数传递给 Windows 窗体应用程序。我知道我需要添加引号。我目前正在使用以下代码。

```
DirectoryInfo info = new DirectoryInfo(path);
string.Format("\"{0}\"", info.FullName); 
```

上面的代码在 path 像`D:\My Development\GitRepositories`. 但是，当我通过`C:\`参数时，我得到的是`C:"`因为最后一个`\`字符用作转义字符。

难道我做错了什么？另外，有没有更好的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:28:44.583

Try using ProcessStartInfo and the Process class and spawn your application. This will also give you much more control over how it is launched and any output or errors it returns. (not all options are shown in this example of course)

```
DirectoryInfo info = new DirectoryInfo(path);

ProcessStartInfo processInfo = new ProcessStartInfo();
processInfo.FileName = [you WinForms app];
processInfo.Arguments = String.Format(@"""{0}""", info.FullName);
using (Process process = Process.Start(processInfo))
{
  process.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:06:12.287

Your problem is escaping in C# you could mask all backslashes with a second backslash or put an at sign (@) before the first quote:

```
string option1="c:\\your\\full\\path\\";
string option2=@"c:\your\full\path\"; 
```

Anyway not in every case are quotes into a string nessesary. In most cases just if you need to start an external programm and this only if you need this as an argument.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:08:37.697

`CommandLineArg`是`space`分隔的，因此你需要传递命令参数`"`

这意味着如果 Path =`C:\My folder\`将作为两个参数发送，但如果它作为`"C:\My Folder\"`单个参数传递。

所以

```
string commandArg = string.Format("\"{0}\"", info.FullName) 
```

# php - 使用命名空间的 TDD (PHP) - 找不到类

> ID：14799575
> 
> 赞同：1
> 
> 时间：2013-02-10T15:59:01.697
> 
> 标签：php, namespaces, tdd, classnotfound

我正在实现一些类，但我总是会遇到以下错误：

```
PHP Fatal error:  Class 'Foo\Bar\Filter' not found in /blabla/filterTest.php on line 10 
```

我有一个这样的测试（filterTest.php）：

```
<?php

namespace Foo\Tests\Bar\FilterTest;

use Foo\Bar\Filter;

class FilterTest extends \PHPUnit_Framework_TestCase {

    public function testSth() {
        new Filter;
    }
} 
```

还有一个像下面这样的过滤器类（filter.php）：

```
<?php

namespace Foo\Bar;

class Filter {

    public function __construct() {
        echo 'foo';
    }
} 
```

有任何想法吗？oO

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:33:19.220

解决方案就像包含我需要的类的文件一样简单......

对于像我这样不知道的人，您需要包含该文件。命名空间不会为你做这件事；）

# ruby - 使用“不安全”的 OpenSSL 方法时私钥的安全性

> ID：14799576
> 
> 赞同：1
> 
> 时间：2013-02-10T15:59:08.470
> 
> 标签：ruby, cryptography, openssl, rsa

我最近遇到了一种情况，我*绝对*需要使用该方法`OpenSSL::PKey::RSA#params`。但是，该文档说以下内容：

> 这种方法不安全，私人信息可能泄露！！！
> 
> ...
> 
> 不要使用:-)）（由你决定）

这是什么意思？私钥通常如何在 RSA 密钥的实例中得到保护，这与任何常规对象有何不同？

我可以通过执行以下操作来防止信息泄漏，其中该方法仅在 lambda 中访问：

```
private_key = OpenSSL::PKey::RSA.generate(2048)

save_private = lambda do
  key = OpenSSL::Digest::SHA512.new.digest("password")
  aes = OpenSSL::Cipher.new("AES-256-CFB")
  iv = OpenSSL::Random.random_bytes(aes.iv_len)
  aes.encrypt
  aes.key, aes.iv = key, iv
  aes.update(private_key.params.to_s) + aes.final
end

private_enc, save_private = save_private.call, nil 
```

另外，如果这个安全问题与在内存中等待 GC 的变量有关，那么强制垃圾收集是否可以让事情更安全？

```
GC.start 
```

提前感谢任何可以解决这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:40:13.890

它似乎泄露了私钥的信息。密钥组件需要可用于执行任何签名操作或解密，因此密钥信息通常以明文形式保存在内存中。显然，如果您检索它，您必须确保它的安全。我想这就是警告的来源。

你可以做各种各样的事情，比如加密私钥参数，但是你必须存储解密密钥。基本上，如果没有外部系统（或保存密码的人），这最终将无法解决。

# php - 获取用户当前位置的最佳方式

> ID：14799588
> 
> 赞同：1
> 
> 时间：2013-02-10T16:00:40.230
> 
> 标签：php, mysql, query-optimization

我正在制作一个排名应用程序，并以这种方式获得用户在排名中的位置：

```
$sql = "SELECT fk_player_id FROM ".$prefix."_publicpoints
            WHERE date BETWEEN '2013-01-01' AND '2013-12-31'
                GROUP BY fk_player_id
            HAVING SUM(points) > 235"; 
```

这是按原样工作的，但有一个失败。如果我的排名有 500.000 个用户，那么查询会变得非常繁重。然后它必须遍历所有得分高于 235 的用户。假设 235 给出的位置为# 345.879。那是很多行......我怎样才能以更好的方式做到这一点？至少当我打电话给分贝？

希望提前4个帮助和感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:22:16.963

3 种可能的解决方案，可能（或可能会或可能不会将它们结合在一起，具体取决于具体情况）

*   将索引添加到排名列
*   仅在等级发生变化时预先计算等级
*   使用 cron 作业预先计算行列 - 如果迟到 10 分钟也没关系。

如果是通用排名页面，您可以使用模板引擎预渲染页面并缓存它

您可以使用更多内存或配置查询和临时表的缓存来优化您的 mysql 性能

# php - Mysql：过去 7 天的结果

> ID：14799596
> 
> 赞同：0
> 
> 时间：2013-02-10T16:01:24.697
> 
> 标签：php, mysql, sql, database

这是我第一次使用 PHP 和 MySQL 创建网站。如何查询 Mysql 搜索的结果以仅显示过去 7 天的结果？

我的数据库中的列是：

```
Id
Name
Date
Mensage 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T16:03:11.900

有几种方法可以做到这一点。这是一个。

```
SELECT *
FROM tablename
WHERE `date` > CURRENT_DATE - INTERVAL 7 DAY 
```

还有一个：

```
SELECT *
FROM tablename
WHERE DATEDIFF(`date`, CURRENT_DATE) < 7 
```

仅供参考，您不应该使用[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)来命名您的列。这是一个坏主意，只会给你带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T12:39:04.837

获取最近 7 天的日期

```
SELECT DATE_SUB(NOW(),INTERVAL 7 DAY); 
```

获取当前

```
SELECT NOW(); 
```

结合以上两部分有完整的查询示例

```
SELECT * FROM `table` WHERE `date_created` BETWEEN DATE_SUB(NOW(),INTERVAL 7 DAY) AND NOW(); 
```

通过使用此查询，您可以从数据库中获取数据，而不是使用 php mysql_query 和 mysql_result 函数执行

# javascript - 各种脚本类型属性和 vanilla js，用户代理有何不同

> ID：14799601
> 
> 赞同：3
> 
> 时间：2013-02-10T16:01:55.220
> 
> 标签：javascript, html

我通常编写没有类型属性的脚本标签。但是，我看到了几种不同类型的脚本。所以我用不同的类型进行了测试，除了我故意输入错误的类型之外，所有的看起来都一样。

```
<script>alert(1)</script>
<script type="text/javascript">alert(2);</script>
<script type="text/ecmascript">alert(3);</script>
<script type="application/ecmascript">alert(4);</script>
<script type="application/javascript">alert(5);</script>
<script type="foo/javascript">alert(6);</script>
<script type="text/html">alert(7);</script>
<script type="application/x-javascript">alert(8);</script> 
```

问题：

1.  如果给出的脚本没有 type 属性，如我所料，它是否使用浏览器默认类型？

2.  看起来 text/* 用于浏览器，而 application/* 用于移动应用程序。我说得对吗？

3.  在脚本类型属性中，javascript 和 ecmascript 有什么区别？

4.  我问了关于香草js和纯js之间的问题，但问题已被删除。所以我的猜测是它们是相同的（也许太明显了）。真的一样吗？那为什么要使用不同的名称（Javascript，Vanilla Javascript）？通过使用 vanilla 脚本作为外部资源，我们可以进行独立于浏览器的 javascripting 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:04:11.327

**1\. 如果脚本没有 type 属性，如我所料，它是否使用浏览器默认类型？**

是的。所有的浏览器总是假定它是这样的，现在它已经在 HTML5 中被规范化了。根据 w3.org，type 属性默认为`"text/javascript"`.

[规范的](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#attr-script-type)相关摘录：

> type 属性给出了脚本的语言或数据的格式。如果该属性存在，则其值必须是有效的 MIME 类型。不得指定 charset 参数。如果该属性不存在，则使用默认值是“text/javascript”。

因此，对于所有浏览器，放置脚本的最佳方式是：

```
<script>alert(1);</script> 
```

**2\. 看起来 text/* 用于浏览器，而 application/* 用于移动应用程序。我说得对吗？**

如果`script`元素包含在 HTML 文档中，那么`type`属性的值应该被省略，或者`"text/javascript"`，即使在移动应用程序中也是如此。过去有各种情况建议其他类型，但现在标准是`"text/javascript"`.

**3.在脚本类型属性中，javascript和ecmascript有什么区别？**

没有区别。您可能知道[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)是基于 JavaScript 的规范化标准的名称。不仅是`"text/javascript"`在脚本元素中引用 javascript 的标准方式，而且您的浏览器只有一个 JS 引擎。它不能根据您在 type 属性中指定的风格选择尝试并选择另一个。

**4.我问了vanilla js和pure js之间的问题，但问题已被删除。所以我的猜测是它们是相同的（也许太明显了）。真的一样吗？那为什么要使用不同的名称（Javascript，Vanilla Javascript）？通过使用 vanilla 脚本作为外部资源，我们可以进行独立于浏览器的 javascripting 吗？**

“Vanilla something”在英文中是指某物的基本风味。在计算中，它通常是指一种没有添加或插件的语言。这里它意味着 JavaScript 没有额外的库（例如 jQuery）。这个表达通常意味着重申许多事情在没有库的情况下是可能的，即使人们经常认为图书馆是必要的。[vanilla-js](http://vanilla-js.com/)网站幽默地支持这一论点，这也是您可能经常阅读“vanilla js”表达式的另一个原因。所以，当然，“vanilla js”只是 JavaScript，即“纯 js”。

请注意，“vanilla js”并不是特别“独立于浏览器”，因为许多 js 库的主要目标是提供一个统一的层隐藏浏览器之间的差异（除了 IE 之外的所有浏览器中最常见的功能）。

# actionscript-3 - AS3 - 访问名为 variableName[number] 的变量

> ID：14799602
> 
> 赞同：-1
> 
> 时间：2013-02-10T16:01:57.053
> 
> 标签：actionscript-3, variables

我有 3 个变量，每个变量名为 variable1、variable2、variable3。

我现在有一个 for 循环，我想一个接一个地访问每个变量。

```
for(var i:int = 1; i<4; i++){
    variable[i] = //whatever
} 
```

我怎样才能像上面那样一个接一个地与变量交谈？这是不正确的。但是，你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:03:26.797

试试这个：

```
for(var i:int = 1; i<4; i++){
    this["variable"+i] = //whatever
} 
```

# git - 提交前使用 Aspell 进行自动文档验证

> ID：14799604
> 
> 赞同：3
> 
> 时间：2013-02-10T16:02:04.733
> 
> 标签：git, github, aspell, smartgit

我正在为我的项目使用 GitHub 存储库。我正在使用的 GUI 是 SmartGit，我将有一个脚本，在提交并将其拉到远程代表之前，使用 aspell 验证它是否正确。现在我必须每次都这样做

```
aspell --mode=tex --lang=it check Namefile.tex 
```

有没有办法自动化这个？

谢谢

# javascript - “IF ELSE”Javascript 不工作

> ID：14799607
> 
> 赞同：1
> 
> 时间：2013-02-10T16:02:11.820
> 
> 标签：javascript, if-statement

A）我有一个很好的第一个功能：

```
 if(onlyUs == '1' && idUser == '0'){
            obj.after(jQuery('<div />').css({'clear':'both'}).addClass('kklike-msg').text('Only registered users can vote.'));
            setTimeout(function(){
                jQuery('.kklike-msg').fadeOut('normal');
            },3000);
            return false;
        } 
```

B）所以我认为我可以做以下事情：

```
 if(idUser == '0'){
                if(action == 'like'){
                        var ajaxAction = 'add_like';
                }else{
                        var ajaxAction = 'remove_like';
                }
        }else{
            if(action == 'like'){
                        var ajaxAction = 'add_like';
                        window.open('http://mywebsite.com/like')
                }else{
                        var ajaxAction = 'remove_like';
                        window.open('http://mywebsite.com/remove')
                }
        } 
```

C）知道原始功能很简单（效果很好）：

```
if(action == 'like'){
                        var ajaxAction = 'add_like';
                }else{
                        var ajaxAction = 'remove_like';
                } 
```

**但是 B) 不起作用。**在这两种情况下（登录与否），新窗口都会打开。你有解决方案吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T16:15:36.003

在不知道 的*类型*的情况下`idUser`，很难说出问题所在，但最可能的罪魁祸首是[使用`==`for comparison 而不是`===`](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use). JavaScript 会在使用 时将被比较的变量转换为相似的类型`==`，这可能会在您的情况下导致一些非常不可预测的结果。

我建议您编写如下代码。如果这仍然无法按您的预期工作，您应该调查`idUser`实际值是多少。它可能不是`string`导致您的问题的原因。

```
if (idUser === '0') {
    if(action === 'like') {
        var ajaxAction = 'add_like';
    } else {
        var ajaxAction = 'remove_like';
    }
} else {
    if (action === 'like') {
        var ajaxAction = 'add_like';
        window.open('http://mywebsite.com/like');
    } else {
        var ajaxAction = 'remove_like';
        window.open('http://mywebsite.com/remove');
    }
} 
```

有关为什么应该使用 的非常简单的示例`===`，请参阅此博客文章：

[http://longgoldenears.blogspot.com/2007/09/triple-equals-in-javascript.html](http://longgoldenears.blogspot.com/2007/09/triple-equals-in-javascript.html)

# sql-server - 使用 EF4 和 MVC3 进行 SQL Server 数据库本地化？

> ID：14799608
> 
> 赞同：1
> 
> 时间：2013-02-10T16:02:21.763
> 
> 标签：sql-server, database, asp.net-mvc-3, entity-framework-4, localization

好吧，首先 -**我不是在谈论使用资源文件进行字符串本地化**。

**我说的是数据库表中的数据**。

我需要有英文和法文版本。

我在带有 MS SQL Server 的 MVC3 应用程序中使用 EF4。

假设我有包含静态数据的表：

![在此处输入图像描述](../Images/cea37b3d729fd70082d995349a65a425.png)

是否有任何简单的方法可以从数据库中获取特定于语言的字段而不是使用

```
if(Thread.CurrentThread.CurrentUICulture.Name == "en-CA")
{
    var titles = dbcontext.Competencies.Select(x => x.TitleEn);
}
else if (Thread.CurrentThread.CurrentUICulture.Name == "fr-CA")
{
    var titles = dbcontext.Competencies.Select(x => x.TitleFr);
} 
```

构建 LINQ 语句时在我的应用程序中的任何地方？

当然，真实的陈述并不是那么简单:)

在互联网上找不到任何可行的方法。

只有一些疯狂复杂的东西需要数周才能开发，而我没有时间。

人们通常如何做到这一点？

谢谢。

# windows-7 - windows7文件夹保护

> ID：14799616
> 
> 赞同：-2
> 
> 时间：2013-02-10T16:02:51.280
> 
> 标签：windows-7, data-protection

楼主，windows7家庭高级版适合哪个文件夹锁软件，

在我的笔记本电脑中，我想锁定和隐藏一些文件夹和数据，我尝试了一些文件夹锁定软件，所有这些软件都在我的膝上性能中产生了一些问题，我列出了一些软件及其问题

软件名称：文件夹锁 7 公司：New Softwares.net：

这将提供文件夹锁定和隐藏功能，但是在某些时候，当我们解锁数据时，我们不会从当前位置获取数据（数据始终是他们的，但它是不可见的）然后我们必须卸载文件夹锁定才能访问数据

软件名称：密码文件夹来自：IObit.com：

使用这个时，它将禁用操作系统“superfetch”技术，从而降低操作系统的速度。在卸载密码文件夹之前，我们无法激活 superfetch（这仅在笔记本电脑中发生）

所以请给出软件名称来锁定不会降低笔记本电脑速度和性能的文件夹和文件............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:40:17.410

大多数文件和文件夹锁定软件，就像你提到的那样，天真地使用硬盘序列号作为防止在其他驱动器上使用该文件的密钥。因此，如果您必须从备份中替换文件或更换硬盘驱动器，那么您宝贵的文件对您来说将毫无用处。

如果要保护文件，只需加密它们。如果您想保护对文件夹中文件的访问，只需使用 Windows 权限设置用户权限...对于您想要的任何用户，然后如果您没有使用具有访问权限的帐户，系统将提示您输入密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T15:39:13.470

我使用了 my-lockbox，它提供了更好的性能

[http://fspro.net/my-lockbox/](http://fspro.net/my-lockbox/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T08:57:26.820

我认为你应该选择 winrar 它的骗子软件，每个人的电脑里都有这个软件你可以用这个软件制作受密码保护的文件夹你可以一步一步看到这个 youtube 视频[https://www.youtube.com/watch ?v=5_koso3Nryc](https://www.youtube.com/watch?v=5_koso3Nryc)这将有助于制作受密码保护的文件夹或文件，这些文件夹或文件将被加密，没有密码就没有人可以看到其中的文件。

# java - 使用 JMagick 从头开始 创建图像

> ID：14799617
> 
> 赞同：3
> 
> 时间：2013-02-10T16:03:03.680
> 
> 标签：java, imagemagick, jmagick

我正在使用名为[JMagick](http://downloads.jmagick.org/jmagick-doc/)的 ImageMagick 的 Java 端口。我需要能够创建一个新图像并将任意文本块写入其中。文档非常差，到目前为止我设法将文本写入图像来自 IO。此外，在我发现的所有示例中，它似乎是第一个操作，在写入新图像数据之前，总是将现有图像加载到 ImageInfo 实例中。如何使用 JMagick 从头开始​​创建图像，然后写一段文字进去？

这是我现在要做的：

```
 try {

        ImageInfo info = new ImageInfo();
        info.setSize("512x512");
        info.setUnits(ResolutionType.PixelsPerInchResolution);
        info.setColorspace(ColorspaceType.RGBColorspace);
        info.setBorderColor(PixelPacket.queryColorDatabase("red"));
        info.setDepth(8);
        BufferedImage img = new BufferedImage(512,512,BufferedImage.TYPE_4BYTE_ABGR);
        byte[] imageBytes = ((DataBufferByte) img.getData().getDataBuffer()).getData();
        MagickImage mimage = new MagickImage(info,imageBytes);

        DrawInfo aInfo = new DrawInfo(info);
        aInfo.setFill(PixelPacket.queryColorDatabase("green"));
        aInfo.setUnderColor(PixelPacket.queryColorDatabase("yellow"));
        aInfo.setOpacity(0);
        aInfo.setPointsize(36);
        aInfo.setFont("Arial");
        aInfo.setTextAntialias(true);

        aInfo.setText("JMagick Tutorial");
        aInfo.setGeometry("+40+40");

        mimage.annotateImage(aInfo);

        mimage.setFileName("text.jpg");
        mimage.writeImage(info);

    } catch (MagickException ex) {
        Logger.getLogger(LWJGL_IDOMOO_SIMPLE_TEST.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

它不起作用，JVM 因访问冲突而崩溃，因为它可能期望来自 IO 的输入图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-13T12:43:51.193

我知道答案可能为时已晚。在这里，我编写了这个简单的代码来创建您所要求的场景。！

```
private void createEmptyImage() throws MagickException{
    ImageInfo newImageiInfo=new ImageInfo();
    newImageiInfo.setFileName("src\\main\\resources\\test.jpg");
    newImageiInfo.setSize("512x512");
    newImageiInfo.setUnits(ResolutionType.PixelsPerInchResolution);
    newImageiInfo.setColorspace(ColorspaceType.RGBColorspace);
    newImageiInfo.setBorderColor(PixelPacket.queryColorDatabase("red"));
    newImageiInfo.setDepth(8);

    MagickImage addTextImage = new MagickImage();
    addTextImage.allocateImage(newImageiInfo);
    addTextImage.setYResolution(480);
    addTextImage.setXResolution(640);
    addTextImage.writeImage(newImageiInfo);

    DrawInfo aInfo = new DrawInfo(newImageiInfo);

    aInfo.setFill(PixelPacket.queryColorDatabase("green"));
    aInfo.setUnderColor(PixelPacket.queryColorDatabase("yellow"));
    aInfo.setOpacity(0);
    aInfo.setPointsize(36);
    aInfo.setFont("Arial");
    aInfo.setTextAntialias(true);
    aInfo.setText("JMagick Tutorial");
    aInfo.setGeometry("+50+50");

    addTextImage.annotateImage(aInfo);
    addTextImage.setFileName("src\\main\\resources\\test-result.jpg");
    addTextImage.writeImage(newImageiInfo);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-26T21:28:30.710

这是一个使用 JMagick 创建蓝色图像的 Clojure 示例：

```
(import '[magick MagickImage ImageInfo ColorspaceType])
(def image (MagickImage.))
(.constituteImage image 256 256 "RGB" (byte-array (take (* 3 256 256) (cycle [0 0 255]))))
(def info (ImageInfo.))
(.setSize info "256x256")
(.setDepth info 8)
(.setColorspace info ColorspaceType/RGBColorspace)
(.setFileName image "test.jpg")
(.writeImage image info) 
```

# java - (Another) "non-static method cannot be referenced from a static context" issue

> ID：14799622
> 
> 赞同：0
> 
> 时间：2013-02-10T16:03:37.797
> 
> 标签：java, call, static-methods, non-static, main-method

**ERROR: non-static method cannot be referenced from a static context.**

In my case the method is called readFile().

Hi. I'm experiencing the same error that countless novice programmers have before, but despite reading about it for hours on end, I can't work out how to apply that knowledge in my situation.

I think the code may need to be restructured so I am including the full text of the class.

I would prefer to house the main() method in small Main class, but have placed it in the same class here for simplicity. I get the same error no matter where I put it.

The readFile() method could easily be placed within the main() method, but I’d prefer to learn how to create small modular methods like this and call them from a main() method. Originally closeFile() was a separate method too.

The program is supposed to:

1.  open a .dat file
2.  read in from the file data regarding examination results
3.  perform calculations on the information
4.  output the results of the calculations

Each line of the file is information about an individual student.
A single consists of three examination papers.
Most calculations regard individual students.
But some calculations regard the entire collection of students (ie their class).

**NB:** where the word “class” is used in the code, it refers to academic class of the students, not class in the sense of OO programming.

I have tried various ways to solve problem.

Current approach is to house data concerning a single student examination in an instance of the class “Exam”.
This corresponds to a single line of the input file, plus subsequent calculations concerning other attributes of that instance only.

These attributes are populated with values during the while loop of readFile().
When the while loop ends, the three calculations that concern the entire collection of Exams (ie the entire academic class) are called.

A secondary question is:
Under the comment “Declare Attributes”, I’ve separated the attributes of the class into two subgroups:
Those that I think should be defined as class variables (with keyword static).
Those that I think should be defined as instance variables.
Could you guide me on whether I should add keyword static to those in first group.

A related question is:
Should the methods that perform calculations using the entire collection of instances be declared as static / class methods too?
When I tried that I then got similar errors when these tried to call instance methods.

Thanks.

PS: Regarding this forum:
I have enclosed the code with code blocks, but the Java syntax is not highlighted.
Perhaps it will change after I submit the post. But if not I'd be happy to reformat it if someone can tell me how.

PPS: this is a homework assignment.
I have created all the code below myself.
The "homework" tag is obsolete, so I didn't use it.

* * *

Input File Name: "results.dat"
Input File Path: "C:/Users/ADMIN/Desktop/A1P3E1 Files/results.dat"
Input File Contents (randomly generated data):

```
573,Kalia,Lindsay,2,8,10
966,Cheryl,Sellers,8,5,3
714,Shea,Wells,7,6,2
206,April,Mullins,8,2,1
240,Buffy,Padilla,3,5,2
709,Yoko,Noel,3,2,5
151,Armand,Morgan,10,9,2
199,Kristen,Workman,2,3,6
321,Iona,Maynard,10,2,8
031,Christen,Short,7,5,3
863,Cameron,Decker,6,4,4
986,Kieran,Harvey,7,6,3
768,Oliver,Rowland,8,9,1
273,Clare,Jacobs,9,2,7
556,Chaim,Sparks,4,9,4
651,Paloma,Hurley,9,3,9
212,Desiree,Hendrix,7,9,10
850,McKenzie,Neal,7,5,6
681,Myra,Ramirez,2,6,10
815,Basil,Bright,7,5,10 
```

* * *

Java File Name: "Exam.java"
Java Package Name: "a1p3e1"
Java Project Name: "A1P3E1"
Java File Contents:

```
/** TODO
 *  [+] Error Block - Add Finally statement
 *  [?] studentNumber - change data type to integer (or keep as string)
 *  [?] Change Scope of to Non-Instance Variables to Static (eg classExamGradeSum)
 *  [*] Solve "non-static method cannot be referenced from a static context" error
 *
 */

package a1p3e1; // Assignment 1 - Part 3 - Exercise 1

import java.io.*;
import java.util.*;

/**
 *
 * @author                                                                           
 */

public class Exam {

//  (1) Declare Attributes
//  (-) Class Attributes
    protected Scanner fileIn;
    protected Scanner lineIn;
    private String line;
    private String [] splitLine;

    private String InFilePath = "C:/Users/ADMIN/Desktop/A1P3E1 Files/results.dat";
    private int fileInRowCount = 20;
    private int fileInColumnCount = 6;
    private int fileOutRowCount = 20;
    private int fileOutColumnCount = 14;

//    private int classExamGradeSum = 0;                                             
    private int classExamGradeSum;
    private double classExamGradeAverage = 0.0;
    private int [] classExamGradeFrequency = new int [10];                           

    protected Exam exam []  = new Exam [fileInRowCount];                             

//  (-) Instance Attributes
    private String studentNumber;                                                    
    private String forename;
    private String surname;
    private int paper1Grade;
    private int paper2Grade;
    private int paper3Grade;

    private String paper1Outcome;
    private String paper2Outcome;
    private String paper3Outcome;

    private int fileInRowID;
    private int failCount;
    private int gradeAverageRounded;
    private int gradeAverageQualified;
    private String examOutcome;

//  (3) toString Method Overridden
    @Override
    public String toString () {
        return    "\n Student Number:       " + studentNumber
                + "\n Forename:             " + forename
                + "\n Surname:              " + surname
                + "\n Paper 1 Grade:        " + paper1Grade
                + "\n Paper 2 Grade:        " + paper2Grade
                + "\n Paper 3 Grade:        " + paper3Grade
                + "\n Paper 1 Outcome:      " + paper1Outcome
                + "\n Paper 2 Outcome:      " + paper2Outcome
                + "\n Paper 3 Outcome:      " + paper3Outcome
                + "\n File In Row ID:       " + fileInRowID
                + "\n Fail Count:           " + failCount
                + "\n Exam Grade Rounded:   " + gradeAverageRounded
                + "\n Exam Grade Qualified: " + gradeAverageQualified
                + "\n Exam Outcome:         " + examOutcome;
    }

//  (4) Accessor Methods
    public String getStudentNumber () {
        return studentNumber;
    }

    public String getForename () {
        return forename;
    }

    public String getSurname () {
        return surname;
    }

    public int getPaper1Grade () {
        return paper1Grade;
    }

    public int getPaper2Grade () {
        return paper2Grade;
    }

    public int getPaper3Grade () {
        return paper3Grade;
    }

    public String getPaper1Outcome () {
        return paper1Outcome;
    }

    public String getPaper2Outcome () {
        return paper2Outcome;
    }

    public String getPaper3Outcome () {
        return paper3Outcome;
    }

    public int getFileInRowID () {
        return fileInRowID;
    }

    public int getFailCount () {
        return failCount;
    }

    public int getGradeAverageRounded () {
        return gradeAverageRounded;
    }

    public int getGradeAverageQualified () {
        return gradeAverageQualified;
    }

    public String getExamOutcome () {
        return examOutcome;
    }

//  (5) Mutator Methods

    public void setStudentNumber (String studentNumber) {
        this.studentNumber = studentNumber;
    }

    public void setForename (String forename) {
        this.forename = forename;
    }

    public void setSurname (String surname) {
        this.surname = surname;
    }

    public void setPaper1Grade (int paper1Grade) {
        this.paper1Grade = paper1Grade;
    }

    public void setPaper2Grade (int paper2Grade) {
        this.paper2Grade = paper2Grade;
    }

    public void setPaper3Grade (int paper3Grade) {
        this.paper3Grade = paper3Grade;
    }

    public void setPaper1Outcome (String paper1Outcome) {
        this.paper1Outcome = paper1Outcome;
    }

    public void setPaper2Outcome (String paper2Outcome) {
        this.paper2Outcome = paper2Outcome;
    }

    public void setPaper3Outcome (String paper3Outcome) {
        this.paper3Outcome = paper3Outcome;
    }

    public void setFileInRowID (int fileInRowID) {
        this.fileInRowID = fileInRowID;
    }

    public void setFailCount (int failCount) {
        this.failCount = failCount;
    }

    public void setGradeAverageRounded (int gradeAverageRounded) {
        this.gradeAverageRounded = gradeAverageRounded;
    }

    public void setGradeAverageQualified (int gradeAverageQualified) {
        this.gradeAverageQualified = gradeAverageQualified;
    }

    public void setExamOutcome (String examOutcome) {
        this.examOutcome = examOutcome;
    }

//  (2) Constructor Methods
//  (-) Constructor Method - No Arguments
    public Exam () {
        this.studentNumber = "";
        this.forename = "";
        this.surname = "";
        this.paper1Grade = 0;
        this.paper2Grade = 0;
        this.paper3Grade = 0;
        this.paper1Outcome = "";
        this.paper2Outcome = "";
        this.paper3Outcome = "";
        this.fileInRowID = 0;
        this.failCount = 0;
        this.gradeAverageRounded = 0;
        this.gradeAverageQualified = 0;
        this.examOutcome = "";
    }

//  (-) Constructor Method - With Arguments (1)
    public Exam (
            String studentNumber,
            String forename,
            String surname,
            int paper1Grade,
            int paper2Grade,
            int paper3Grade,
            String paper1Outcome,
            String paper2Outcome,
            String paper3Outcome,
            int fileInRowID,
            int failCount,
            int gradeAverageRounded,
            int gradeAverageQualified,
            String examOutcome) {
        this.studentNumber = studentNumber;
        this.forename = forename;
        this.surname = surname;
        this.paper1Grade = paper1Grade;
        this.paper2Grade = paper2Grade;
        this.paper3Grade = paper3Grade;
        this.paper1Outcome = paper1Outcome;
        this.paper2Outcome = paper2Outcome;
        this.paper3Outcome = paper3Outcome;
        this.fileInRowID = fileInRowID;
        this.failCount = failCount;
        this.gradeAverageRounded = gradeAverageRounded;
        this.gradeAverageQualified = gradeAverageQualified;
        this.examOutcome = examOutcome;
    }

//  (-) Constructor Method - With Arguments (2)                                      
    public Exam (
            String studentNumber,
            String forename,
            String surname,
            int paper1Grade,
            int paper2Grade,
            int paper3Grade) {
        this.studentNumber = studentNumber;
        this.forename = forename;
        this.surname = surname;
        this.paper1Grade = paper1Grade;
        this.paper2Grade = paper2Grade;
        this.paper3Grade = paper3Grade;
        this.paper1Outcome = "";
        this.paper2Outcome = "";
        this.paper3Outcome = "";
        this.fileInRowID = 0;
        this.failCount = 0;
        this.gradeAverageRounded = 0;
        this.gradeAverageQualified = 0;
        this.examOutcome = "";
    }

//  (6) Main Method
    public static void main (String[] args) throws Exception {

        Exam.readFile ();                                                            
    }

//  (7) Other Methods

//  (-) Read File Into Instances Of Exam Class
    //  limitation: hard coded to 6 column source file
    public void readFile () throws Exception {

        try {                                                                        

            fileIn = new Scanner(new BufferedReader(new FileReader(InFilePath)));

        int i = 0;

        while (fileIn.hasNextLine ()) {                                              

            line = fileIn.nextLine();

            splitLine = line.split (",", 6);

            //  create instances of exam from file data and calculated data
            exam [i] = new Exam (
                    splitLine [0],
                    splitLine [1],
                    splitLine [2],
                    Integer.parseInt (splitLine [3]),
                    Integer.parseInt (splitLine [4]),
                    Integer.parseInt (splitLine [5]),
                    convertGradeToOutcome (paper1Grade),
                    convertGradeToOutcome (paper2Grade),
                    convertGradeToOutcome (paper3Grade),
                    i + 1,
                    failCount (),
                    gradeAverageRounded (),
                    gradeAverageQualified (),
                    convertGradeToOutcome (gradeAverageQualified));

            fileIn.nextLine ();                                                      
            i ++;
        }

        classExamGradeFrequency ();
        classExamGradeSum ();
        classExamGradeAverage ();

        //  close file                                                               
        fileIn.close ();

        } catch (FileNotFoundException | NumberFormatException e) {

//            fileIn.next ();                                                        
            System.err.println("Error: " + e.getMessage());
            //System.out.println ("File Error - IO Exception");
        }

        for (Exam i : exam) {
            System.out.println(i.toString());
            System.out.println();
        }

//        System.out.println(classExamGradeSum);
//        System.out.println();
        System.out.println(classExamGradeAverage);
        System.out.println();
        System.out.println(classExamGradeFrequency);
        System.out.println();

    }

//  (-) Fail Count (1 Student, 3 Papers)
    public int failCount () {
//
        if (paper1Grade > 6){
            failCount = failCount + 1;
        }
        if (paper2Grade > 6){
            failCount = failCount + 1;
        }
        if (paper3Grade > 6){
            failCount = failCount + 1;
        }
        return failCount;
    }

//  (-) Grade Average Rounded (1 Student, 3 Papers)
    public int gradeAverageRounded () {

        gradeAverageRounded = (int) Math.ceil(
            (paper1Grade + paper2Grade + paper3Grade) / 3);

        return gradeAverageRounded;
    }

//  (-) Grade Average Qualified (1 Student, 3 Papers)
    public int gradeAverageQualified (){

        gradeAverageQualified = gradeAverageRounded;                                 

        if (failCount >= 2 && gradeAverageRounded <= 6) {
            gradeAverageQualified = 7;
        }

        return gradeAverageQualified;
    }

//  (-) Convert Grade to Outcome (Pass / Fail)
    public String convertGradeToOutcome (int grade) {
        String outcome;

        if (grade <= 6){
            outcome = "Pass";
        } else if (grade > 6){
            outcome = "Fail";
        } else {
            outcome = "Unknown (Error)";
        }

        return outcome;
    }

//  (-) Class Exam Grade Sum (All Students, All Papers)
    /** assumption: average grade for class is average of grades awarded,
     *  using rounded figures, not raw per paper results
     */
    public void classExamGradeSum () {

        classExamGradeSum = 0;

        //  for each loop (to iterate through collection of exam instances)
        for (Exam i : exam) {
            classExamGradeSum = classExamGradeSum + i.gradeAverageQualified;
        }
    }

//  (-) Class Exam Grade Average (All Students, All Papers)
    /** assumption: average grade for class is average of grades awarded,
     *  using rounded figures, not raw per paper results
     *  assumption: <fileInRowCount> is correct                                      
     */
    public double classExamGradeAverage () {

        classExamGradeAverage = classExamGradeSum / fileInRowCount;

        return classExamGradeAverage;
    }

//  (-) Class Exam Grade Frequency (Count of Instances of Each Final Grade)
    /** Example:
     *  frequency of average grade "5"
     *  is stored in array <classExamGradeFrequency [4]>
     */
    public void classExamGradeFrequency () {

        //  for each loop (to iterate through collection of exam instances)
        for (Exam i : exam) {
            classExamGradeFrequency [i.getGradeAverageQualified () - 1] ++;
        }
    }

}// endof class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:06:13.533

`readFile` is an instance method. Create an instance of `Exam` to use:

```
new Exam().readFile(); 
```

Given that the `Exam` has many instance variables, some of which are used in the `readFile` method, this method should not be static. (Use of `static` class variables creates code smell and should not be considered.)

Given that `readFile` reads multiple entries from the file into many `Exam` objects, you could split out the read functionality into a new `ExamReader` class.

*Aside:* For flexibility use a `List` instead of a fixed size array

```
Exam exam []; 
```

could be

```
List<Exam> examList; 
```

# javascript - ajaxComplete - 如何调用/触发？

> ID：14799623
> 
> 赞同：0
> 
> 时间：2013-02-10T16:03:46.997
> 
> 标签：javascript, jquery, ajax

AJAX 响应完成后如何触发函数？

在更改下拉菜单时，`manageImagesDynamicObjectDetails`调用该函数：

```
<select id="imageComponentSelection" name="imageComponentSelection" onchange="manageImagesDynamicObjectDetails()"> 
```

此函数将与此 AJAX 调用相关的变量传递给我的`makeRequests`函数。

```
function manageImagesDynamicObjectDetails(){
  var sendContent = "selection=".concat(document.getElementById('imageComponentSelection').value);
  var fileName = "RetrieveObjectsInformation";
  var elementId = "objectData";
  if(sendContent != "Select a class to view components"){
  makeRequest(fileName,sendContent,elementId);
  } 
} 
```

`makeRequest`是一个函数，它将为所有 AJAX 调用调用并适当地处理它们。

```
function makeRequest(fileName,sendContent,elementId) {
 var xmlHttpRequest = getXMLHttpRequest();
 xmlHttpRequest.onreadystatechange = getReadyStateHandler(xmlHttpRequest,elementId);
 xmlHttpRequest.open("POST", fileName, true);
 xmlHttpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
 xmlHttpRequest.send(sendContent);
} 
```

当特定的 AJAX 调用完成后，我想调用 resizeObjectList 函数。

```
function resizeObjectList(){
  var windowHeight = $('#contentWrapper').height();
  var newObjectListHeight = windowHeight - 53 - 20 - 20 - 60;
  var element =  document.getElementById("componentObjectList");
  if (typeof(element) != 'undefined' && element != null){
    document.getElementById("componentObjectList").style.height = newObjectListHeight;
  }
} 
```

我该怎么做呢？我试过了`ajaxComplete`，`ajaxStop`但我无法让它们触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:08:07.540

我相信你想要这样的东西： response = xmlHttpRequest.responseText;

但是，如果您使 ajax 异步，则上述方法有效。阅读：[http ://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

如果您使用 jquery，它会使 ajax 变得更加简单： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这是一个例子：

```
$.ajax({
  url: "http://fiddle.jshell.net/favicon.png",
  type: "GET"
  data: "key0=val0&key1-val1"
}).done(function( data ) {
  alert(data)
}); 
```

# php - jQuery ajax 调用永远不会完成（不会触发成功和错误回调）

> ID：14799625
> 
> 赞同：2
> 
> 时间：2013-02-10T16:04:09.403
> 
> 标签：php, javascript, jquery, ajax, timeout

我有一个对服务器的 ajax 请求，我只需要知道它何时完成将用户重定向到第二个页面。**它大部分时间都在工作，**但如果服务器响应时间过长（例如 10 分钟），则可能会发生没有调用回调函数并且请求继续等待的情况。

我的代码如下：

```
$.ajax({
      type: 'post',
      url: 'request.php',
      success: function(data) {
            alert("Success: "+data);
            window.location.replace("success.php");
      },
      error: function (xhr, ajaxOptions, thrownError) {
            alert("Ajax error: "+xhr.status+" - "+thrownError);
            window.location.replace("error.php");
      }
}); 
```

如您所见，我尝试检查是否有任何错误，但据我所知，ajax 请求的行为就像它没有完成一样（没有触发警报或重定向）。但是，服务器中的 PHP 代码运行到最后都没有错误。

我不知道在哪里搜索错误，因为我在考虑浏览器或服务器中的超时问题，但这似乎不是原因。由于相同的代码在很短的等待时间内工作，我无法想象其他可能的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:01:17.897

我敢打赌你的网络服务器超时，这会使连接失效，这可能意味着没有回复。在这种情况下，ajax 超时选项可能对您有好处。

话虽如此，如果我是你，我会采取不同的做法：既然你已经在使用 ajax，为什么不每隔 x 秒 ping 一次服务器并检查进程是否已完成并且是时候重定向了，而不是保持连接打开? 这样您就不会遇到超时问题，并且您不会通过不发送任何数据而只等待服务器端进程完成的会话来保持连接。更具可扩展性和健壮性，更适合 http 连接。

# spring - JSF 将对象传递给模板

> ID：14799628
> 
> 赞同：0
> 
> 时间：2013-02-10T16:04:19.247
> 
> 标签：spring, jsf, jsf-2

我有两个 jsf 页面。layout.xhtml 和 page.xhtml。布局如下所示：

```
<ui:composition>                                                                                                                      
<h:panelGroup id="menu" layout="block">                                                                                           
    <h:outputText value="#{menuBean}" />                                                                                          
    <h:form>                                                                                                                      
        <ui:repeat var="menuItem" value="#{menuBean.menuItems}">                                                                  
            <button:menuItem label="#{msgs[menuItem.label]}" action="#{menuBean.selectItem(menuItem.label)}" update="#{update}" />
        </ui:repeat>                                                                                                              
    </h:form>                                                                                                                     
</h:panelGroup>                                                                                                                   
<ui:repeat var="menuItem" value="#{menuBean.menuItems}">                                                                          
    <h:panelGroup layout="block" rendered="#{menuBean.selectedItemLabel eq menuItem.label}">                                      
        <ui:include src="#{menuItem.page}" />                                                                                     
    </h:panelGroup>                                                                                                               
</ui:repeat> 
```

和这样的页面：

```
<h:panelGroup binding="#{page}" layout="block">             
    <ui:decorate template="../template.xhtml">                   
        <ui:param name="menuBean" value="#{pageBean}" />        
        <ui:param name="update" value=":#{page.clientId}" />
    </ui:decorate>
</h:panelGroup> 
```

当我第一次渲染页面时，一切正常（渲染菜单项等）。单击任何按钮后，我得到`Target Unreachable, identifier 'menuBean' resolved to null`.

谁能解释发生了什么，为什么`menuBean`没有再次分配，如果存在另一种实现这种事情的方法（有一些通用布局页面，在那里传递一些对象并生成页面）？我的 bean 由 Spring 管理。

更新：

我猜这个问题与我的复合按钮有关，如下所示：

```
<composite:interface name="menuItem">                                                                                                
    <composite:attribute name="action" targets="button" />                                                                           
    <composite:attribute name="styleClass" />                                                                                        
    <composite:attribute name="label" />                                                                                             
    <composite:attribute name="update" />                                                                                            
    <composite:attribute name="rendered" />                                                                                          
    <composite:insertChildren />                                                                                                     
</composite:interface>                                                                                                               

<composite:implementation>                                                                                                           
    <h:commandButton id="button" value="#{cc.attrs.label}" style="width: 150px;" action="#{cc.attrs.action}"                         
        rendered="#{empty cc.attrs.rendered ? true : cc.attrs.rendered}" styleClass="menu-item #{cc.attrs.styleClass}" type="button">
        <f:ajax render="#{cc.attrs.update}" />                                                                                       
    </h:commandButton>                                                                                                               
</composite:implementation> 
```

如果我用标准 h:commandButton 替换标签，一切都会完美。我将对象传递给模板，模板将传递的对象传递给复合对象，但我肯定遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:03:21.170

我认为问题与bean的范围有关。据我了解，您的***pageBean***支持 bean 具有请求范围。尝试更改更广泛的范围（应该是查看范围@ViewScoped）。如果您使用 CDI 注释而不是 JSF，那么您可以查看 @ConversationalScope（或者您可以使用 Luiggi 指出的 MyFacesCODI 库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:42:09.150

我在他的 blogspot 上已经描述了 [BalusC面临的问题：http:](https://stackoverflow.com/users/157882/balusc) [//balusc.blogspot.cz/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers](http://balusc.blogspot.cz/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)

简单地说，在回传请求（按钮的ajax 刷新）传递到我的复合按钮中的bean 不存在。正如 BalusC 所指出的，解决方案可以是创建标准 UIComponent 而不是使用复合快捷方式。

# python - 来自自定义 Google 地图的数据

> ID：14799631
> 
> 赞同：1
> 
> 时间：2013-02-10T16:04:36.063
> 
> 标签：python, beautifulsoup

我想从这个页面 xxx 收集数据

我对 python 和 BeautifulSoup 的经验水平是初学者。但是，除了我在下面描述的问题外，我认为对于我需要做的事情来说，它不必非常先进

我需要从中收集数据的页面列出了 MLS 上列出的大多伦多地区的待售活动房产。在地图的右侧，您必须选择一些复选框才能获取数据，这就是我的问题所在。如果我使用浏览器，则使用本地 cookie 来记住以前的选择并显示数据

我想知道其中任何一个：1）如何在来自 Python 的初始请求中传递所有参数（选择） 2）如何在 Python 中使用 Chrome cookie，以便获得实际包含数据的页面返回

一个代码示例会很棒，但将我发送到我应该阅读的链接也可以。

非常感谢 PF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:55:37.670

如果您坚持使用 urllib2 而不是[Requests](http://docs.python-requests.org/en/latest/)，我建议您查看[cookielib](http://docs.python.org/2/library/cookielib.html)。

这是一个例子：

```
import urllib2
import cookielib
from BeautifulSoup import BeautifulSoup

cookiejar = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPRedirectHandler(),
    urllib2.HTTPHandler(debuglevel=0),
    urllib2.HTTPSHandler(debuglevel=0),
    urllib2.HTTPCookieProcessor(cookiejar),
) 
```

这样，您将创建一个`cookiejar`来保存 cookie，构建一个 opener 并建立您的 cookie 处理器并传递`cookiejar`. 这应该可以解决您的 cookie 问题。此时，不要使用`urllib2.urlopen(url)`，只需使用您的自定义开瓶器：`opener.open(url)`

```
url = 'http://www.somesite.com/'
fp = opener.open(url)
html_object = BeautifulSoup(fp) 
```

# java - How to use a DFS algorithm to find the smallest product?

> ID：14799633
> 
> 赞同：0
> 
> 时间：2013-02-10T16:04:49.407
> 
> 标签：java, depth-first-search

I've never used DFS before and I was wondering how you could use one to find the smallest product of a path if you were to traverse through the following "tree":

```
 3
      4   5
    7   6   4
  3   5   7   8
1   2   3   4   4 
```

See comments below to clear any confusion(:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:54:16.103

您需要构建一个有向图，其中节点是数字，每个节点有 2 条边到下一级的数字/节点。这个特定问题中的图将是一个有向无环图。

然后，您只需在构建的图上运行 DFS。但是，您不会跟踪/检查您之前是否访问过某个节点，因为您想重新访问它们。相反，您只需要检查当前节点是否具有 0 *out-degree*或节点（因为底部的节点将具有 0 *out-degree*），并在到达底部的节点时更新当前最小值。（您还可以跟踪当前深度，并在达到深度时更新当前最小值）。我们可以针对这个特定问题这样做，因为所有乘积都是恰好 5 个数字相乘的结果，每个级别一个。

我上面描述的称为 DFS 的树搜索变体，与您跟踪之前是否访问过节点的普通图形搜索变体相比。当图中存在循环时，树搜索 DFS 会卡住，但由于这是一个有向无环图，我们不会遇到这样的问题。

* * *

如果这些数字都是**非负数**，我们可以观察到：无论我们如何从根到达一个节点，前面的最优路径每次都将是相同的。

在这种情况下，从底部节点向后工作会更快。对于与同一“父”节点相邻的每一对，选择较小的一对并与“父”节点相乘。一直这样做，直到你到达根节点，你就会得到结果。

* * *

如果数字可以是**正数或负数或 0**，则需要跟踪 4 个数字：具有最大和最小绝对值的负积，最大和最小正积。并且你还需要跟踪是否可以形成 0 产品。2 个最大的绝对值是针对**正 x 负**的情况。2 个最小的绝对值适用于**正 x 正**或**负 x 负**的情况。在算法开始时，所有这 5 个字段都是未定义的。

如何更新的细节留给读者。检查结果的顺序是：负数绝对值最大，0，正数绝对值最小。如果该字段未定义，则跳过它并检查下一个。

# sql - Updating recordset returns 500 error

> ID：14799641
> 
> 赞同：0
> 
> 时间：2013-02-10T16:06:07.253
> 
> 标签：sql, asp-classic

I can read from Database, and my other projects (Using ASPMaker read/write records), but thought I'd get my hands dirty instead of cheating, but when trying to update a record I get a 500 error. The directory has read write permissions. Could someone check through my code to see first I've made a mistake.

```
<!--#include file="Connection.asp"-->

<%
Dim DeleteRS, Query
Set DeleteRS = Server.CreateObject("ADODB.Recordset")
Query = "Select * From notices Where [notice].[approved] = False AND [notice].[Notice_ID] = " & Request.qureystring("n")
response.write(Query)

DeleteRS.Open Query, adoCon, adOpenStatic, adLockOptimistic
DeleteRS.Delete

DeleteRS.Close
Set DeleteRS = Nothing
Set Query = Nothing

%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:21:28.680

您应该启用在网络服务器上显示详细的错误消息，以便您获得更多信息，而不仅仅是 500 错误。

您的代码有多个问题：

*   您信任用户输入：您动态构建您的 sql 代码并使用提供的任何值`Request.querystring("n")`。请参阅[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)和使用参数
*   拼写错误：
    *   要求。**查询字符串**
    *   Select * From **notices** Where [ **notice** ].[a...
        （除非您进行连接，否则您不必在每一列中重复表名）
*   永远不要根据 HTTP GET 请求更改数据。如果您想删除（或更新）一行，请创建一个 HTML 表单并发布需要删除的 id。
*   您不需要使用记录集对象来删除一行。现在您正在与数据库对话两次：一次检索行，一次删除行。只需创建一个删除语句：

    ```
    Dim command

    command = Server.CreateObject("adodb.command")
    command.ActiveConnection = adoCon
    command.Execute "DELETE FROM notices WHERE approved = False AND id = ?", array(Request.querystring("n"))
    command.Close

    Set command = Nothing 
    ```

问号是一个参数，值在数组中提供。

# .net - 存储库模式和聚合根模式和实体框架

> ID：14799645
> 
> 赞同：3
> 
> 时间：2013-02-10T16:06:27.453
> 
> 标签：.net, entity-framework, repository-pattern, aggregateroot

我正在根据存储库模式、聚合根和工作单元来构建我的应用程序。我正在使用 Entity Framework5 作为 ORM。

我处于一种情况，我不知道如何继续添加新实体，这些实体是聚合根并且与非聚合根的实体具有外键关系。

我不确定我之前的陈述是否有意义，但让我在这里举个例子。

**Db 中的人员表（这是我的应用程序中的聚合根）**

1.  姓名
2.  地址第一行
3.  国家ID

**国家表（这不是一个聚合根，因为我可能永远不需要独立查询它们）**

1.  国家ID
2.  国家的名字

在我的应用程序中，我有 PersonsRepository，它实现了一个通用存储库，其中 T 是一个聚合根。

现在，当我在我的代码中创建一个新人时，我需要将 Country 添加到 Person 对象的导航属性中。如果我创建一个新的 Country 对象并将其分配给 Person 的 Country 属性并尝试保存 Person 对象，则 EF 会引发错误。我无法查询国家表，因为它不是我的聚合根。

好吧，这不是我的实际情况，但这是我想要克服的。我应该如何从这里开始？

我想到的一个想法是创建一个通用的只读存储库，用于查询数据库而不是修改它，这是继续的好方法还是我做错了什么。

提前感谢您的回复和阅读长篇文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:36:50.470

聚合根不仅仅是您可能不需要直接查询的东西。根据您的推理，您必须多次创建同一个国家/地区，因为您无法查询该国家/地区是否存在（即，该国家/地区是一个需要 Person 存在的弱表）。

简单地说，聚合根是可以在没有其他任何东西的情况下识别的对象。一个国家可能没有人而存在，而没有订单则无法识别订单行。您可能想阅读这篇文章：[http ://dddcommunity.org/library/vernon_2011](http://dddcommunity.org/library/vernon_2011)

至于实体框架，请检查我对存储库/uow 的实现：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)

# ruby-on-rails - Flash 通知文本更改

> ID：14799648
> 
> 赞同：-3
> 
> 时间：2013-02-10T16:06:43.190
> 
> 标签：ruby-on-rails, ruby

我已经创建了`Posts`模型，我想在保存或更新模型时更改 Flash 通知文本。

我怎么能这样做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:20:27.933

在您调用`Post`方法的控制器操作中执行此操作，例如：

```
class FooController < ApplicationController
  def create
    if Post.create(params)
      flash.notice 'Post saved'
    else
      flash.alert 'Post not saved'
    end
  end
end 
```

最好让您的模型与控制器和控制器方法（例如 ）隔离`flash`，并在控制器中设置它们。

# visual-studio-2010 - How to suppress repetitions of specific first chance exceptions from 3d-party component if I have NOT access to its source code?

> ID：14799651
> 
> 赞同：2
> 
> 时间：2013-02-10T16:07:00.017
> 
> 标签：visual-studio-2010, debugging, filter, tracelistener, first-chance-exception

My program in C# 4.0 is using 3d-party library through which launches a process of for continuously getting the flux of data through DDE from external source on the internet.

After launching the process it is getting in Visual Studio 2010 Output window the endless repetitions with a frequency of few dozens per second of just 2 lines:

```
A first chance exception of type 'System.ArgumentException' occurred in 3dPartyLibIUse.DLL  
A first chance exception of type 'System.FormatException' occurred in mscorlib.dll 
```

Is there any way to **filter out** these repetitions (after initial output of these two lines) or these specific exceptions but not first chance exceptions at large if I do not have access to source code of 3d-party dll?

**Update:**
The main problem is that I do not have access to source code of that used 3d-party library, it is obfuscated and meddling with it by its License immediately invalidates all the rights of its usage.

But I still essentially need the exception, warnings and errors output from it which is cluttered by thousands of omnipresent repetitions of just 2 exceptions

# sql - Is there a more elegant way of writting this SQL query?

> ID：14799654
> 
> 赞同：3
> 
> 时间：2013-02-10T16:07:31.053
> 
> 标签：sql, sqlite

I'm doing Stanfords introduction to DB course and this is one of the homework assignments. My code does the job well, but I don't really like it how I reused the same SELECT-FROM-JOIN part twice:

```
SELECT name, grade
FROM Highschooler
WHERE
    ID IN (
        SELECT H1.ID
        FROM Friend
        JOIN Highschooler AS H1
            ON Friend.ID1 = H1.ID
        JOIN Highschooler AS H2
            ON Friend.ID2 = H2.ID
        WHERE H1.grade = H2.grade    
    ) AND
    ID NOT IN (
        SELECT H1.ID
        FROM Friend
        JOIN Highschooler AS H1
            ON Friend.ID1 = H1.ID
        JOIN Highschooler AS H2
            ON Friend.ID2 = H2.ID
        WHERE H1.grade <> H2.grade
    )
ORDER BY grade, name 
```

This is the SQL schema for the two tables used in the code:

```
Highschooler(ID int, name text, grade int);
Friend(ID1 int, ID2 int); 
```

I had to query all the Highschoolers that only have friends in the same grade, and not in any other grades. Is there a way to somehow write the code bellow only once, and reuse it two times for the two different WHERE clauses = and <>?

```
 SELECT H1.ID
    FROM Friend
    JOIN Highschooler AS H1
        ON Friend.ID1 = H1.ID
    JOIN Highschooler AS H2
        ON Friend.ID2 = H2.ID 
```

*EDIT: We are required to provide SQLite code.*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:14:57.613

这是`WHERE EXISTS`查询的“典型孩子”示例：

```
SELECT name, grade
FROM Highschooler ME
WHERE EXISTS (
    SELECT 1
    FROM Friend F
    JOIN Highschooler OTHER on F.ID2=OTHER.ID
    WHERE F.ID1=ME.ID AND OTHER.Grade = ME.GRADE
)
AND NOT EXISTS (
    SELECT 1
    FROM Friend F
    JOIN Highschooler OTHER on F.ID2=OTHER.ID
    WHERE F.ID1=ME.ID AND OTHER.Grade <> ME.GRADE
) 
```

`EXISTS`条件是它`true`是否`SELECT`返回一行或多行；否则为`false`。您需要做的就是*将*内部子查询与外部子查询（`F.ID1=ME.ID`部分）相关联，并将您需要的剩余约束（the`OTHER.Grade = ME.GRADE`或 the `OTHER.Grade <> ME.GRADE`）添加到查询中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T16:16:47.507

这是关于与个人相关的群体的典型问题。当您遇到这样的问题时，一种方法是使用连接（成对查看事物）。通常更好的方法是使用聚合来一次查看整个组。

这里的见解是，如果您有一群朋友并且所有人都在同一年级，那么最低和最高成绩将是相同的。

该提示可能足以让您编写查询。如果是这样，请停在这里。

返回您想要的查询比您所做的要简单得多。你只需要看看朋友的成绩：

```
SELECT f.id1
FROM Friend f jJOIN
     Highschooler fh
     ON Friend.ID1 = fh.ID join
group by f.id1
having max(fh.grade) = min(fh.grade) 
```

该`having`子句确保所有内容都相同（忽略 NULL 值）。

编辑：

这个版本回答了这个问题：哪些高中生的朋友都在同一年级。你的问题模棱两可。也许你的意思是朋友*和*原人都是同一个年级的。如果是这样，那么你可以通过一个小的修改来做到这一点。一种方法是将`having`子句更改为：

```
having max(fh.grade) = min(fh.grade) and
       max(fh.grade) = (select grade from Highschooler h where f.id1 = h.id1) 
```

这将检查朋友*和*原始人是否都在同一年级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:16:27.280

有时，当您将一些过滤连接转换为 UNION 或 MINUS/EXCEPT 等集合操作时，您可以获得更自然的查询形状。例如，您的查询可以写成（伪代码）：

```
 SELECT H.id
  FROM Highschooler H
  JOIN .... | has a friend
  WHERE ... | in SAME grade

EXCEPT

  SELECT H.id
  FROM Highschooler H
  JOIN .... | has a friend
  WHERE ... | in OTHER grade 
```

一些 SQL 引擎使用关键字“MINUS”，一些使用“EXCEPT”。

但请注意，与 UNION 非常相似，这将执行两个查询，然后过滤它们的结果。这可能具有与单个全能查询不同的性能，但请注意，**这不一定**更糟。很多时候我发现它甚至具有更好的性能，因为对单列的“例外”，特别是排序，非常快

此外，如果您的数据库引擎允许，您可能会尝试使用 View 或 CTE 来缩短原始查询，但我认为这样做没有多大意义，除了美学

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:14:04.977

一些数据库支持减号关键字。

```
select whatever
from wherever
where id in
(select id
 from somewhere
 where something
 minus
 select id
 from somewhere
 where something else
 ) 
```

其他数据库支持相同的概念，但使用关键字 except，而不是减号。

# c++ - Lua & C++ API 获取执行信息

> ID：14799656
> 
> 赞同：6
> 
> 时间：2013-02-10T16:07:39.303
> 
> 标签：c++, debugging, lua

在 Lua 中，我有一个名为的函数`utils.debug()`，我想做的是在我的 Lua 代码中使用它，如下所示：

```
function Foo:doSomething
    if (/* something */) then
        print("Success!")
    else
        utils.debug()
    end
end

function Foo:doSomethingElse
    if (/* something else */) then
        print("Awesome!")
    else
        utils.debug()
    end
end 
```

我想在我的 Lua 代码中使用它来帮助我调试。因此，我希望我的 C++ 代码知道 Lua 代码中的哪个位置`utils.debug()`被调用。我调查了一下`lua_Debug`，`lua_getinfo`它们看起来非常接近我想要的，但我错过了一块：

```
int MyLua::debug(lua_State* L)
{
    lua_Debug ar;
    lua_getstack(L, 1, &ar);
    lua_getinfo(L, ??????, &ar);

    // print out relevant info from 'ar' 
    // such as in what function it was called, line number, etc
} 
```

这是 lua_Debug 结构的用途还是我应该使用其他工具或方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T00:00:19.143

这是我用来生成 Lua 堆栈跟踪的方法：

```
lua_Debug info;
int level = 0;
while (lua_getstack(l, level, &info)) {
    lua_getinfo(l, "nSl", &info);
    fprintf(stderr, "  [%d] %s:%d -- %s [%s]\n",
        level, info.short_src, info.currentline,
        (info.name ? info.name : "<unknown>"), info.what);
    ++level;
} 
```

有关更多信息，请参阅[文档。`lua_getinfo`](http://www.lua.org/manual/5.2/manual.html#lua_getinfo)

# php - Error array, i cant get out the information - in mysql query

> ID：14799663
> 
> 赞同：0
> 
> 时间：2013-02-10T16:08:16.497
> 
> 标签：php, mysql

Hello i got a big trouble which i couldnt solve, this is a very weird problem :S i use the next code:

```
for( $m = 0; $m < sizeof( $jugadores ) ; $m++ )
{   
            $juga_q = "INSERT INTO jugadores VALUES($jugadores[$m][1],$nom_equipo,'',$jugadores[$m][4]);";
            $result = mysql_query( $juga_q );
            echo $juga_q."<br>";
} 
```

i got information in the array which i want to insert into my data base, for that i dump my query in $juga_q variable which i use in the insert into, but the query doesnt execute and i make an echo to check whats failing and got the next:

```
 INSERT INTO jugadores VALUES(Array[1],Aston Villa,'',Array[4]); 
```

when i make a echo of the array out of this query i got no problems, thats why im getting crazy with that and hope u could help me.

Thanks forward!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:11:41.250

尝试连接它，

```
$juga_q = "INSERT INTO jugadores VALUES(". $jugadores[$m][1].",$nom_equipo,'',".$jugadores[$m][4].");"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:12:44.477

在字符串中使用数组访问器时，需要将它们括在括号中。

而不是`"VALUES ($jugadores[$m][1],..."`，尝试使用`"VALUES ({$jugadores[$m][1]},..."`.

# python - 如何更好地阅读python代码？

> ID：14799672
> 
> 赞同：3
> 
> 时间：2013-02-10T16:09:38.390
> 
> 标签：python

如果没有明确的（类型）声明，我很难试图弄清楚事情是如何工作的——是否有一些好的规则/技巧可以让你更好地阅读 python 代码？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:20:25.160

尽管这个问题给人的第一印象是，我认为它确实很聪明，因为它表明你潜意识里有一些东西应该让任何 Python 的开发者感兴趣，但如果没有被误解的话，我发现它通常被忽视，特别是在解释中.

我的意思是，作为 Python 基础的 IMO 非常奇特和智能：它是基于数据模型构思的。
在这个 Python 的数据模型中，没有“内容可以改变的内存块”意义上的变量，这与其他语言相反，并且在 Python 中我们不管理这种精确类型的变量。

更准确地说，Python 中的一切都是对象，每个对象都以标识符命名和设计，但在上述意义上，对象和标识符都不是“变量”。

这并不意味着在实现的深度中没有小盒子，即其他语言中所谓的变量，临时托管进出它们的值。

.

假设一个对象是用标识符设计的`XYA2`。
我个人使用这种字母外观来指定任何标识符。标识符只不过是写在代码中的单词。它是出现在代码中的内容。
请注意，这个字母的外观是这个 stackoverflow.com 网站用来表示文本内的代码示例的，方法是单击按钮 {}。这很容易提醒。

现在，名称是真实**的****对象**，是位于**计算机****内存**中的一组**具体****位**，以表示它所代表的所需*概念值。* 该集合是用 C 语言定义的，其中实现了 Python。 就个人而言，当我想指定一个对象时，我会加粗字母。 那么name的对象，对我来说，就是**XYA2所指的**`XYA2` ***********`XYA2`***********

 *******标识符是`XYA2`
它链接到指向对象的底层且不可访问的指针。
这个链接是通过*符号表*完成的。通常，您会在 stackoverflow 或其他地方看到很少有对*符号表的引用或暗示。*但是，我认为这非常重要。

链接到标识符的指针指向`XYA2`对象**XYA2**
，所以，`XYA2`直接链接到指针，间接链接到对象。
我们不说“间接关联”，而是说“分配”。一个对象和它的标识符被相互分配给另一个，但是这个链接的媒介是底层的指针。

.

现在，有一些重要的事情。
严格来说，变量是“内容可以改变的内存块”。
我个人努力避免在其他意义上使用“变量”这个词。
问题是，由于在数学中使用了“变量”这个词，这个词经常被不加选择地使用，并且被许多开发者（不是全部）抛诸脑后，即使它是不合理的。
因此，几乎每个人都常用它来指定名称，也就是代码中的标识符。但这种做法非常令人困惑。应该小心避免。

也就是说，Python 中的对象不仅是某个类的实例，而且首先是一组具体的位；据我所知，从“内容可以改变的内存块”的意义上讲，它不是一个变量。
因此我认为 Python 中没有变量，因为我们可以访问和操作的唯一实体是标识符和对象。

然而，在执行的 Python 程序中，后台进程使用了​​大量的指针，据我所知，这些指针是严格意义上的实变量。
所以，从某种意义上来说，可以说我的断言“Python 中没有变量”是错误的。
这是一个观点问题。
作为 Python 的开发人员，从概念上讲，我不管理变量。当我考虑一个算法，我不认为指针级别，即使我知道它们存在并且知道它们存在非常重要。不是在变量级别，而是在 Python 数据级别模型，我不明白为什么我应该接受相信 Python 程序中存在变量。机器底层存在变量，

.

我为什么要写这一切？

1)
因为 Python 数据模型的性质会产生大量后果，如果不知道该数据模型，则无法理解这些后果。在这些后果中，有些很有趣，因为它们提供了难以置信的可能性，有些则是陷阱（一个众所周知的例子是：修改复制列表中的元素也会修改原始列表中的元素）。这就是为什么了解这个数据模型是最重要的。

为此，我建议您阅读文档的以下部分：[对象值和类型](http://docs.python.org/2/reference/datamodel.html#objects-values-and-types)
的 3.1[命名和绑定的](http://docs.python.org/2/reference/executionmodel.html#naming-and-binding) 4.1

.

2）
为了证明我对你的困惑的回答：不要为引擎盖下发生的事情而挣扎：
有一个垃圾收集器，一个引用计数器，底层字典类实体的货车，底层指针秘密中的雷鸣般的价值芭蕾，解释器进行的许多验证......当某些东西不适合时，会以异常消息的形式给出警告。

# Python 控制了所有机器

您唯一需要考虑的是考虑您想要实现的算法，为此，了解数据模型至关重要。

欢迎来到 Python 世界

* * *

# 警告

我不认为自己是一个非常熟练的 Python 开发人员，我只是一个业余爱好者，在了解 Python 的一些基本知识之前遇到了很多问题。
以上所有描述都是我对Python数据模型的个人看法。如果此描述中的任何一点不正确，如果教学是通过发展论证完成的，我将很乐意了解更多有关它的信息。
但我强调这样一个事实，即这种对事物的看法使我能够理解并回答许多棘手的问题，并实现 Python 能够实现的一些棘手的机制。所以，在上面的描述中，一切都不能是假的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:16:41.730

您应该查看[PEP8 文档](http://www.python.org/dev/peps/pep-0008/)这描述了 Python 格式和样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:36:05.663

阅读 Duck Typing。Duck Typing 的目的之一是无论如何您都不应该过多地考虑某事的类型。您真正关心的是该变量可以按照您想要的方式使用。

在 Python 中，您不需要类型声明，因为您分配的名称只是一个指向对象的指针，而且它可以随时更改。

```
a = None
a = 1+5
a = my_function() # calls my function and assigns the return object to a
a = my_function # Assigns the function itself to a. You could actually pass it as a parameter
a = MyClass() # Runs the __init__() function of the class and assigns the return value to a
a = MyClass # Assigns the class itself to a. 
```

这都是有效的 Python。你可以按顺序运行它，尽管改变类型是不受欢迎的，除非它完全清楚为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:13:46.987

如果您知道，`c++11`那么它与自动输入类似。

```
The variable type is decided on the bases of its assignment. 
```*******

# javascript - Change the background color of an attribute of CSS by the click of an image

> ID：14799675
> 
> 赞同：0
> 
> 时间：2013-02-10T16:10:03.853
> 
> 标签：javascript, jquery, css, switch-statement

I'm looking to have the background color of my content attribute fade to another color upon the user clicking a color which is an image.

I assume I am going about this all the wrong way and would be grateful for any help.

I hope I post this correctly. Apologies if not. I've been a browser for a long time and have only now decided to register.

[http://jsfiddle.net/WhiteSlevin7/LAcFa/9/](http://jsfiddle.net/WhiteSlevin7/LAcFa/9/)

```
<body>
<div id ="wrapper">
    <section id ="logo">
    </section>
    <section id ="header">
    </section>

    <div id="accessibility">
    <ul>
        <li><a data-color-id="1" href="#"><img src="images/red-color.jpg"></a></li>
        <li><a data-color-id="2" href="#"><img src="images/blue-color.jpg"></a></li>
        <li><a data-color-id="3" href="#"><img src="images/grey-color.jpg"></a></li>
        <li><a data-color-id="4" href="#"><img src="images/purple-color.jpg"></a></li>
    </ul>
    </div> 
    <section id="content">
        <article>
        </article>
    </section>  
    </div> 
```

```
a{
    color: #ffffff;
    text-decoration: none;
    font-size: 85%;
    border: 0;
}
a:hover{
    color: #000000;
    font-size: 85%;
}
#header{
    height: 170px;
    background: url(images/banner.jpg) no-repeat center ;
    padding: 0px; 
}
#logo{
    height: 109px;
    background: #9bbdc7 url(images/logo.jpg) no-repeat center;
    border-style: none;
    padding: 0px;
}
#accessibility li {
    float: left;
    padding: 0 20px 0 0;
    list-style: none;
}
#accessibility li a {
    color: #CFCFCF;
    font-size: 16px;
    font-weight: bold;
    text-decoration: none;
    transition: all 0.2s linear;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
}

#wrapper {
    width: 960px;
    margin: 10px auto;
    text-align:left;
    min-width: auto;
}
#content {
    width: 100%; 
    background: #eff6f4;
    float: left;
    transition: background 4s linear;
    -webkit-transition: background 4s linear;
    -moz-transition: background 4s linear;
}
article{
    background: #f9f6f6;
    border: 1px solid black;
    padding: 20px;
    margin-bottom:10px;
    margin-top:10px;
}

function changeBg(currentItem) {
    var bg = 'null';
    currentItem = Number(currentItem)
    switch (+currentItem) {
        case 1 :
            bg = '#9CC8BC';
            break;
        case 2 :
            bg = '#9CA7C8';
            break;
        case 3 :
            bg = '#C8BC9C';
            break;
        case 4 :
            bg = '#C89CBD';
            break;
        default :
            bg = '#eff6f4';
    }
    $('#content').css('background', bg);
}

jQuery('#accessibility li a').bind('click', function() {
    changeBg(this.id);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:20:21.827

I think you meant to use `$('#content')` instead of `$('layout')`.

```
$('#content').css('background', bg); 
```

You may want to use a `data-*` attribute such as `data-color-id` for the id of your colors instead.

```
<a data-color-id="1" href="#"><img src="images/red-color.jpg"></a> 
```

Also, your fiddle is missing jQuery and the HTML contents should contain only the content of the `<body>` preferably.

[See it here.](http://jsfiddle.net/e7src/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:36:52.703

Issues: (1) Wrap the event handler inside `ready()`. (2) Set the style to valid element, `#content`.

Working code: [**Live Demo**](http://jsfiddle.net/y4jCJ/)

**HTML**

```
<div id ="wrapper">
    <section id ="logo"></section>
    <section id ="header"></section>

    <div id="accessibility">
    <ul>
        <li><a id="1" href="#"><img src="images/red-color.jpg"></a></li>
        <li><a id="2" href="#"><img src="images/blue-color.jpg"></a></li>
        <li><a id="3" href="#"><img src="images/grey-color.jpg"></a></li>
        <li><a id="4" href="#"><img src="images/purple-color.jpg"></a></li>
    </ul>
    </div> 

    <section id="content">
        <article>
        </article>
    </section>  
</div> 
```

**Script**

```
function changeBg(currentItem) {
    var bg = 'null';
    switch (+currentItem) {
        case 1 :
            bg = '#9CC8BC';
            break;
        case 2 :
            bg = '#9CA7C8';
            break;
        case 3 :
            bg = '#C8BC9C';
            break;
        case 4 :
            bg = '#C89CBD';
            break;
        default :
            bg = '#eff6f4';
    }
    $('#content').css('background', bg);
}

jQuery(document).ready(function() {
    jQuery('#accessibility li a').on('click', function() {
        changeBg(this.id);
        return false;
    });
}); 
```

# java - 在动态列表视图中更改图像

> ID：14799677
> 
> 赞同：1
> 
> 时间：2013-02-10T16:10:13.200
> 
> 标签：java, android

如何在朗姆酒时间更改列表视图中的图像。我想`android:layout_toRightOf="@+id/imageView"`根据性别改变。

这里xml

```
<ImageView
  android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView"
            android:text="20px"
            android:textColor="#dc6800"/>

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <ImageView
            android:id="@+id/imageView"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="21dp"
            android:background="@drawable/people" />
        <TextView
            android:id="@+id/empid"
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:paddingBottom="1px" 
            android:visibility="invisible">
        </TextView>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView"
            android:text="20px"
            android:textColor="#dc6800"/>

        </RelativeLayout>

</LinearLayout> 
```

爪哇代码：

```
 for (Element group : allGroups) {
        String empID = XMLUtil.getNodeValue(group, EMPID );
        String empName = XMLUtil.getNodeValue(group, NAME );
        String gender = XMLUtil.getNodeValue(group, GENDER );
        gropusMap.put(empID , group);

        HashMap<String, String> map = new HashMap<String, String>();
        map.put(NAME , empName);
        map.put(EMPID , empID);
        if(gender.equalsIgnoreCase("female")){
            map.put(PHOTO , "female");
        }else {
            map.put(PHOTO , "male");
        }

        menuItems.add(map);
    }

    ListAdapter adapter = new SimpleAdapter(this, menuItems , R.layout.list_item, new String[] { NAME, EMPID,PHOTO }, new int[] { R.id.name, R.id.empid ,R.id.imageView });
    setListAdapter(adapter);
    ListView lv = getListView();
    lv.setOnItemClickListener(new OnItemClickListener() {. 
```

. ... .

# firefox-addon - 如何仅在扩展安装时设置默认首选项

> ID：14799679
> 
> 赞同：1
> 
> 时间：2013-02-10T16:10:38.710
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用 firefox SDK 进行扩展开发。首先，我不想将这种偏好暴露给用户。我只想将此首选项用于内部扩展代码以进行某些处理。

我的用例是我只想在用户重新安装扩展程序时重置该首选项。当用户重新启动 firefox 或禁用/启用扩展时，我不想重置首选项。

我尝试的一种方法是在 main.js 代码中使用“preferences-service”的 get/set API。但是每次我重新启动 firefox 或禁用/启用扩展时，main.js 代码都会运行。当 main.js 代码再次运行时，这会重写首选项的初始值。

有没有一种使用 SDK 的方法，我们仅在安装期间而不是在 Firefox 重启和禁用/启用扩展期间重置首选项值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:00:26.550

`loadReason`也作为参数公开给您的插件调用`main()`. 有关详细信息，请参阅[监听加载和卸载](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/load-and-unload.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:52:03.497

该`self`模块公开该[`loadReason`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/self.html#loadReason)属性。

# objective-c - Objective-c 中的刽子手游戏

> ID：14799680
> 
> 赞同：1
> 
> 时间：2013-02-10T16:10:40.673
> 
> 标签：objective-c

我是 xcode 和 objective-c 的初学者，我只是按照我在 youtube 上观看的课程中的所有步骤来创建刽子手游戏。但是当我输入错误的字母时，切换大小写出现错误，应该更新图像，但是当我输入第二个错误的字母时，它只是转到默认大小写并重新开始。（但在正确的情况下，字符串（WrongLetter）的长度应该加1，然后输入case 2，以此类推）。

这个词是：科罗拉多（对于那些将运行程序的人）

```
if (match==NO)
{
    self.WrongLetter = [self.WrongLetter stringByReplacingOccurrencesOfString:LetterToCheck withString: @""];

    self.WrongLetter = [self.WrongLetter stringByAppendingString:LetterToCheck];

     switch  (self.WrongLetter.length) {
         case 1:
         {self.HangMan.image = [UIImage imageNamed:@"head"];
             break;}
         case 2:{
            self.HangMan.image = [UIImage imageNamed:@"HB"];
             break;}
         case 3:{
            self.HangMan.image = [UIImage imageNamed:@"HBA"];
             break;}
         case 4:{
            self.HangMan.image = [UIImage imageNamed:@"HBAs"];
             break;}
         case 5:{
            self.HangMan.image = [UIImage imageNamed:@"HBAL"];
             break;}
         case 6:{
            self.HangMan.image = [UIImage imageNamed:@"CompleteMan"];
             break;}

         default:{
            [self SetHangManWord:self.CorrectWord];
             break; }

    } } 
```

这是我的项目： [http ://www.2shared.com/file/BLHIQ6kQ/HM_online.html](http://www.2shared.com/file/BLHIQ6kQ/HM_online.html)

这是 youtube 上的课程： [http ://www.youtube.com/watch?v=I63BSGsFnEw](http://www.youtube.com/watch?v=I63BSGsFnEw)

我将不胜感激任何帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:23:51.800

改变这个：

```
@property (weak, nonatomic) IBOutlet NSString *WrongLetter; 
```

对此：

```
@property (strong, nonatomic) NSString *WrongLetter; 
```

The WrongLetter property gets released too soon. And on second iteration it's just null.
It's a bad practice to name your variables with first letter capitalized. Usually class names get first letter capital.

# php - 从 iframe 中获取父 url 变量

> ID：14799682
> 
> 赞同：1
> 
> 时间：2013-02-10T16:11:09.547
> 
> 标签：php, javascript

我有一个 php 网页和一个 iframe。前任：

php 页面的 url [http://www.ex.com/index.php?one=anumber](http://www.ex.com/index.php?one=anumber)

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body> <iframe id="34" class="ddd" src="two.php"></iframe>
</body>
</html> 
```

那么在 two.php 中使用什么 php 代码来从父 url 中获取变量 one 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:18:08.863

最简单的是将完整的查询字符串发送到 two.php，就像这样

```
<iframe id="34" class="ddd" src="two.php?<?=$_SERVER['QUERY_STRING']?>"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:57:11.750

明白了……所以

这就是我所做的，我是 php 的菜鸟，但它有效

我创建了 3 个 php 文件，这就是他们拥有的代码

index.php 是一样的

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body> <iframe id="34" class="ddd" src="two.php"></iframe>
</body>
</html> 
```

在 two.php 中是

```
<?php
   //Getting the parent window parameters
    $getURLVar = str_replace("?","",strrchr($_SERVER['HTTP_REFERER'],"?"));
   // refreshing the iframe with the variables at the end
    header("Location: 3.php?$getURLVar");
?> 
```

在 3.php 中是

```
<?php 
$pageis888 = $_GET["one"];
?> 
```

我知道有更好的解决方案，但这也适用：P

# javascript - 将 2 个图像和一个弹出脚本添加到单个图像滑块

> ID：14799683
> 
> 赞同：0
> 
> 时间：2013-02-10T16:11:09.920
> 
> 标签：javascript, jquery, html, fancybox, slider

我正在使用一个使用列表的[pikachoose](http://pikachoose.com)滑块：

```
<div id="container">
  <div class="pikachoose">
         <ul id="pikame">
              <li><a href="www.gohere.com"><img src="image.jpg/></a></li>
              <li><a href="www.gohere.com"><img src="image2.jpg/></a></li>
         </ul>
</div> 
```

我还有一个单独的 jQuery[花式框](http://fancybox.net)，可以打开一个 youtube 视频弹出窗口：

```
<div id="center">
    <a class="fancybox" href="youtubelink"><img src="playbutton-100px.jpg" />
</a>
</div> 
```

我想要做的是将此底部代码添加到一个上部`<li>`，以便该列表上有 2 个图像。当点击第二张图片（playbutton.jpg）时，它应该会弹出视频。我面临的问题是，即使我只从底部复制链接，没有第二张图片，它也不会启动 jQuery 弹出窗口并直接链接到 youtube。

[演示](http://www.nobodyfilm.org/inteks.html)- 播放按钮位于所有图像中，因为它不是单个图像的一部分

# java - 东西是如何嵌入到浏览器中的？

> ID：14799684
> 
> 赞同：1
> 
> 时间：2013-02-10T16:11:19.403
> 
> 标签：java, linux, flash, firefox, ubuntu

Adobe 嵌入式闪存和 Oracle 嵌入式 Java。如何在浏览器中嵌入外部程序。我在Linux BTW。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:12:41.260

你编写一个叫做*浏览器插件的*东西，它是通过[NPAPI](http://en.wikipedia.org/wiki/NPAPI)完成的，然后你让用户安装它（或者你让系统制造商预先安装它）。

# c# - 从字符串c#中修剪斜线

> ID：14799687
> 
> 赞同：1
> 
> 时间：2013-02-10T16:11:33.763
> 
> 标签：c#, string, trim

我有一个字符串，由于某种原因，有时看起来像这样：`string a = "\"C:\\Temp\\1.bat"`，有时看起来很正常，像这样：`string a = "C:\\Temp\\1.bat"`

我如何确定是否需要`"\`从字符串中修剪前两个，并在必要时修剪它？最后，我希望留下：`"C:\\Temp\\1.bat"`无论如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:14:32.537

你可以这样做：

```
a = a.TrimStart('\"'); 
```

顺便说一句，您不想`"\`从字符串的开头删除 。这不可能。您要删除的是`\"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:13:56.117

你的字符串实际上是`"C:\Temp\1.bat`, the`\"`是 的转义形式`"`，所以你只需要删除第一个字符！

```
string a = "\"C:\\Temp\\1.bat" 
string b = s.SubString(1); 
```

# html - 尝试将 JSP 文件包含在不同文件夹中时的 HTTP 状态 500

> ID：14799689
> 
> 赞同：1
> 
> 时间：2013-02-10T16:11:39.857
> 
> 标签：html, jsp, tomcat

*在将子文件夹添加到我的jsp*文件夹并在其上方的文件夹中引用 JSP之前，我一直在毫无问题地构建我的网站。

在*Adventure_by_dkashtan.jsp*中：

```
<jsp:include page="${pageContext.request.contextPath}/WEB-INF/jsp/pageHeader.jsp" flush="true"></jsp:include>
<a href="/djkashtanArtPortfolio/artWorkPage.html" target="_self">
    <img src="${pageContext.request.contextPath}/images/artPieces/digitalDrawings/adventure_by_dkashtan.jpg"/>
</a>
<jsp:include page="${pageContext.request.contextPath}/WEB-INF/jsp/pageFooter.jsp" flush="true"></jsp:include> 
```

该错误是由我在第一行中引用*pageHeader.jsp引起的。**当我将 JSP 文件中的 pageHeader 包含在与pageHeader.jsp*相同的文件夹中时，它工作正常。文件*Adventure_by_dkashtan.jsp*位于最底部的文件夹中，其余的位于*jsp*文件夹中。

现在我的文件夹结构如下所示：

```
webapp
-WEB-INF
--jsp
---artPieces
----digitalDrawings 
```

我的页眉代码：

```
<html>
<head>
<title>Daniel Kashtan's Art Portfolio</title>
<link rel="stylesheet" href="<c:url value='/css/departments.css'/>" type="text/css" >
</head>
<body>
<h1>Daniel Kashtan's Art Portfolio</h1> 
```

我的页脚代码：

```
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:29:10.403

尝试包含这样的文件

```
<%@ include file="/WEB-INF/jsp/pageFooter.jsp" %> 
```

或者您可以使用相对路径，例如`../`

# c++ - 参考文献怎么可能不需要存储？

> ID：14799690
> 
> 赞同：4
> 
> 时间：2013-02-10T16:11:40.170
> 
> 标签：c++, variables, compiler-construction, reference

从[这个问题](https://stackoverflow.com/questions/3744675/size-of-references-in-64bit-environments)，因此，从标准（ISO C++-03）：

> 未指定引用是否需要存储 (3.7)。

在该线程的一些答案中，据说引用在内部具有相同的指针结构，因此具有相同的大小（32/64 位）。

我正在努力掌握的是：参考如何**不需要**存储？

任何举例说明这一点的示例代码将不胜感激。

**编辑**：来自@JohannesSchaub-litb 评论，如果我没有使用 a `const &`，或者如果我使用的是`const &`具有默认值的 a ，是否需要分配？在我看来，不知何故，根本不应该对引用进行分配——当然，除非涉及到明确的分配，例如：

```
A& new_reference(*(new A())); // Only A() instance would be allocated,
                              // not the new_reference itself 
```

有没有这样的案例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:14:14.917

做一些简单的事情：

```
int foo() {
  int  x = 5;
  int& r = x;
  r = 10;
  return x;
} 
```

该实现*可以*使用指向`x`幕后的指针来实现该引用，但没有理由必须这样做。它也可以将代码转换为等价形式：

```
int foo() {
  int x = 10
  return x;
} 
```

那么就不需要任何指针了。编译器可以直接将其烘焙到`r`与 相同的可执行文件中`x`，而无需存储和取消引用指向 的指针`x`。

关键是，引用是否需要任何存储是您不需要关心的实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:00:02.687

我相信理解的关键点是引用类型*不是*对象类型。

> 对象类型是（可能是 cv 限定的）类型，它不是函数类型，不是引用类型，也不是 void 类型`(§3.9[basic.types]/8)`

对象需要存储（“一个对象是一个存储区域。”——§1.8[intro.object]/1）

此外，C++ 程序对对象进行操作：“C++ 程序中的构造创建、销毁、引用、访问和操作对象。” ——同一段

因此，当编译器在程序中遇到引用时，它是否必须合成一个*对象*（通常是指针类型）并因此使用一些存储，或者找到一些其他方式来实现所需的对象模型方面的语义（可能不涉及存储）。

# wpf - WPF - 通过考虑用户任务栏最大化无边框窗口

> ID：14799691
> 
> 赞同：4
> 
> 时间：2013-02-10T16:11:40.357
> 
> 标签：wpf

我正在创建一个带有自定义镶边的 WPF 窗口，因此我设置`ResizeMode="NoResize"`并`WindowStyle="None"`实现了我自己的镶边。但是，在最大化无边框窗口时存在一个问题：它占据了整个屏幕。

我发现了以下技巧来解决部分问题： [http ://chiafong6799.wordpress.com/2009/02/05/maximizing-a-borderlessno-caption-window/](http://chiafong6799.wordpress.com/2009/02/05/maximizing-a-borderlessno-caption-window/)

这成功地限制了窗口大小以防止覆盖任务栏。但是，如果用户将他的任务栏放在左侧或顶部，这将不起作用，因为窗口位于位置 0,0。

有什么方法可以更准确地检索可用区域，或者查询用户任务栏的位置，以便我可以相应地定位最大化窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T22:45:45.003

我快速玩了一下，似乎在设置无边框表单时忽略了设置`Windows` `Left`and`Top`属性。`WindowState.Maximized`

一种解决方法是忽略`WindowState`函数并创建自己的`Maximize`/`Restore`函数

粗略的例子。

```
public partial class MainWindow : Window
{
    private Rect _restoreLocation;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void MaximizeWindow()
    {
        _restoreLocation = new Rect { Width = Width, Height = Height, X = Left, Y = Top };
        System.Windows.Forms.Screen currentScreen;
        currentScreen = System.Windows.Forms.Screen.FromPoint(System.Windows.Forms.Cursor.Position);
        Height = currentScreen.WorkingArea.Height;
        Width = currentScreen.WorkingArea.Width;
        Left = currentScreen.WorkingArea.X;
        Top = currentScreen.WorkingArea.Y;
    }

    private void Restore()
    {
        Height = _restoreLocation.Height;
        Width = _restoreLocation.Width;
        Left = _restoreLocation.X;
        Top = _restoreLocation.Y;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        MaximizeWindow();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        Restore();
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            DragMove();
        }
        base.OnMouseMove(e);
    }
} 
```

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="74.608" Width="171.708" ResizeMode="NoResize" WindowStyle="None">
    <Grid>
        <Button Content="Max" HorizontalAlignment="Left" Margin="0,29,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>
        <Button Content="Restore" HorizontalAlignment="Left" Margin="80,29,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_2"/>
    </Grid>
</Window> 
```

显然你会想要清理这个代码，但它似乎在任何地方`Taskbar`都可以工作，但是你可能需要添加一些逻辑来获得正确的`Left`，`Top`如果用户字体 DPI 大于 100%

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T00:14:44.877

另一种方法是处理`WM_GETMINMAXINFO`Win32 消息。[这里](http://blogs.msdn.com/b/llobo/archive/2006/08/01/maximizing-window-_2800_with-windowstyle_3d00_none_2900_-considering-taskbar.aspx)的代码显示了如何做到这一点。

请注意，我会做一些不同的事情，例如`IntPtr.Zero`在 WindowProc 中返回而不是 (System.IntPtr)0 并制作`MONITOR_DEFAULTTONEAREST`一个常量。但这只是编码风格的改变，并不影响最终结果。

还要确保注意在事件`WindowProc`期间挂钩的更新`SourceInitialized`而不是`OnApplyTemplate`. 那是最好的地方。如果您正在实现从 Window 派生的类，那么另一个选项是覆盖`OnSourceInitialized`以挂钩`WindowProc`而不是附加到事件。这就是我通常所做的。

# javascript - Javascript 范围。如何从回调函数中检索信息？节点-mysql

> ID：14799699
> 
> 赞同：1
> 
> 时间：2013-02-10T16:12:36.163
> 
> 标签：javascript, node.js, node-mysql

我是 Javascript 的新手，我试图创建一个函数来返回我从我的数据库中获得的一个数组。首先我尝试了这个：

```
function getItens(userId){

    var arr = new Array;
    var result;
    var connection = mysql.createConnection({
      host     : 'localhost',
      user     : 'XXXXXX',
      password : 'XXXXXX',
      database : 'XXXXXX',
    });

    connection.connect();
    connection.query('SELECT * from itens where userId = '+ userId function(err, rows, fields){
         if (err) throw err;
         arr = rows.slice()
    });

    return arr;
    connection.end();
} 
```

然后我意识到那里存在范围问题，经过一些研究后，我尝试模拟这样的静态变量：

```
function getItens(userId){

  (function (){
      var resultado;
      Result = function(valor) { resultado = valor; }; 
      Result.prototype.getResultado = function (){return resultado};
      Result.prototype.setResultado = function (valor){ resultado = valor; };
  })();

  var ar = new Result([]);

  var connection = mysql.createConnection({
      host     : 'localhost',
      user     : 'XXXXXX',
      password : 'XXXXXX',
      database : 'XXXXXX',
    });

  connection.connect();
  connection.query('SELECT * from itens where userId = '+ userId , function(err, rows, fields){
        if (err) throw err;
        ar.setResultado(rows.slice());

  });

  return ar.getResultado();
  connection.end();
} 
```

但它没有用，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:17:10.537

您给该`query`函数一个回调，因为它不会立即执行。

在调用 之后的那一行`connection.query`，回调还没有运行。

您必须使用您提供的回调**中的数据。**请注意，一种常见的模式是为您的查询函数提供回调：

```
function fetchItens(userId, callback){

    var arr = new Array;
    var result;
    var connection = mysql.createConnection({
      host     : 'localhost',
      user     : 'XXXXXX',
      password : 'XXXXXX',
      database : 'XXXXXX',
    });

    connection.connect();
    connection.query('SELECT * from itens where userId = '+ userId function(err, rows, fields){
         if (err) throw err;
         arr = rows.slice()
         callback(arr);
    });
    connection.end();
}

fetchItens(someId, function(arr){
   // use arr
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:18:55.063

由于 NodeJS 中的大部分 I/O 都是异步的，因此您需要通过调用函数来更改您的函数和您正在使用的代码。您应该考虑“回调”并了解在这种情况下不能使用 return。当您查询时，它不会立即执行。它只是注册一个回调，当 MySQL 服务器响应您的应用程序时，才会调用该回调。例子：

```
function getItems(userid, callback){
   connection.connect();
   connection.query("SELECET .....", function(err,rows,fields){
       callback(rows.slice());
   }
}

var userid = 5;
getItems(userid, function(items){
    for(var i in items){ 
    .....
    }
}); 
```

# php - json_encode 慢

> ID：14799709
> 
> 赞同：1
> 
> 时间：2013-02-10T16:13:45.023
> 
> 标签：php, json

当我从 MySQL 获取 3 条记录并使用 json_encode 导出到 json 时，php 文件正在加载 0.5 秒，但是当我获取并导出 6 条记录时，它正在加载 15 秒。我发现当我评论 json_encode 时，无论我获得 3、6、12 条还是更多记录，php 文件都会加载 0.5 秒，所以问题出在 json_encode 的某个地方。是否有可能更快地将这 6 条记录导出到 json？

一条记录包含 12 行，每条记录大约 500 个字符。

来自 json 的一条记录：

```
["7","49-z-zamiast-250-z-za-lifting-bez-skalpela-nieinwazyjny-i-bezbolesny-zabieg-na-wybran-parti-twarzy-w-salonie-motylem-jestem-na-warszawskim-bemowie","49 z\u0142 zamiast 250 z\u0142 za lifting bez skalpela - nieinwazyjny i bezbolesny zabieg na wybran\u0105 parti\u0119 twarzy w Salonie \"Motylem Jestem\" na warszawskim Bemowie","49","250","80",148448,"67b9e57e02b409cd60f3f9745b9c9073","80% rabatu - 49-z-zamiast-250-z-za-lifting-","Zdrowie i Uroda","Frupi","Warszawa"] 
```

一些php代码：

```
while($row=mysql_fetch_assoc($result))
{
$id=$row['id'];
$slug=$row['slug'];
$short_title=$row['deal_save_percent']."% rabatu - ".substr($slug,0,30);
$title=$row['deal_title'];
$price=$row['deal_price'];
$price_old=$row['deal_face_value'];
$discount=$row['deal_save_percent'];
$end_time=$row['deal_oe_end_date']-$ts;
$image_url=md5($row['deal_image_url']);
$category_name=$row['category'];
$website=$row['web_site'];
$city=$row['city'];

$arr[]=array('0'=>$id, '1' => $slug, '2' => $title, '3' => $price, '4' => $price_old, '5' => $discount, '6' => $end_time, '7' => $image_url, '8' => $short_title, '9' => $category_name, '10' => $website, '11' => $city);
}
echo json_encode($arr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:41:28.797

始终检查您的 PHP 和 MySQL 版本和设置，其中可能存在错误，例如错误的排序规则设置。:)

# c# - 返回对通用列表的引用？

> ID：14799720
> 
> 赞同：0
> 
> 时间：2013-02-10T16:14:29.950
> 
> 标签：c#, list, pass-by-reference

假设我有这样的课程设置：

```
public abstract class GenericCustomerInformation
{
    //abstract methods declared here
}

public class Emails : GenericCustomerInformation
{
    //some new stuff, and also overriding methods from GenericCustomerInformation
}

public class PhoneNumber : GenericCustomerInformation
{
    //some new stuff, and also overriding methods from GenericCustomerInformation
}

//and more derivative classes for emails, addresses, etc .. 
```

然后我有这个函数来返回一个特定的列表：

```
public List<GenericCustomerInformation> GetLists<T>()
{
    if (typeof(T) == typeof(Alias))
    {
        return aliases.Cast<GenericCustomerInformation>().ToList();
    }

    if (typeof(T) == typeof(PhoneNumber))
    {
        return phoneNumbers.Cast<GenericCustomerInformation>().ToList();
    }
    // .. and the same for emails, addresses, etc ..
} 
```

现在假设我想只使用一个函数添加到这些列表中：

```
public void AddToList<T>(T iGenericCustomerInformation)
{
    GetLists<T>().Add((T)(object)iGenericCustomerInformation); //Doesn't work as intended. GetLists<T> seems to be returning lists as value, which is why any additions 
} 
```

问题是`AddToList<T>`它不能按预期工作。`GetLists<T>`似乎将列表作为值返回，这就是为什么我所做的任何添加都没有反映在主列表结构中......

那么如何将列表作为参考返回，以便我可以使用该参考通过其他函数进行列表添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:32:12.460

`typeof()`通过拥有所有这些s 和`if`语句，您已经打败了泛型的意义。这根本不是通用的。我想说只是把`if`声明放在你的`AddToList()`方法中，然后去掉泛型。

```
public void AddToList(GenericCustomerInformation item)
{
    Alias aliasItem = item as Alias;
    if(aliasItem != null)
    {
        aliases.Add(aliasItem);
        return;
    }

    PhoneNumber phoneNumberItem = item as PhoneNumber;
    if(phoneNumberItem != null) 
    {
         phoneNumbers.Add(phoneNumberItem);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:07:54.863

为什么不将所有列表保存在列表字典中？

```
private Dictionary<Type, List<GenericCustomerInformation>> MyLists;

public List<GenericCustomerInformation> GetLists<T>()
{
    return MyLists[typeof(T)];
}

public void AddToLists<T>(GenericCustomerInformation item)
{
    GetLists<T>().Add(item);
} 
```

# c# - 使用 C# 附加到文件

> ID：14799722
> 
> 赞同：-4
> 
> 时间：2013-02-10T16:14:32.490
> 
> 标签：c#

```
 StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///Assets/abc.txt"));
Stream stream1 = await file.OpenStreamForWriteAsync();
StreamWriter sr1 = new StreamWriter(stream1); 
```

它与 StreamReader 一起工作得很好。它有一个例外说

```
 Access denied due to security concerns. 
```

如何更正此代码？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:22:23.767

将文件存储在您具有写入权限的位置。

# java - JPA：@Embedded 实体如何将自身类型作为字段？

> ID：14799723
> 
> 赞同：0
> 
> 时间：2013-02-10T16:14:34.477
> 
> 标签：java, hibernate, jakarta-ee, jpa

我的`Entity`样子

```
@Entity
public class Market extends MutableEntity {

    @Column(nullable = false)
    private String name;
    @Column
    private String description;
    @Embedded
    private Version marketVersion; ..snipped 
```

其中`@Embedded Version`有

```
@Embeddable
public class Version {
    private String number;
    private VersionType versionType;
    private DateTime publishedOn;
    private DateTime retiredOn;
    private Version parentVersion; 
```

但这失败了

```
08:12:23.481 [main] DEBUG o.h.cfg.annotations.PropertyBinder - Building property number
08:12:23.481 [main] DEBUG org.hibernate.cfg.Ejb3Column - Binding column: Ejb3Column{table=org.hibernate.mapping.Table(Market), mappingColumn=parentVersion, insertable=true, updatable=true, unique=false}

    java.lang.StackOverflowError
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179)
        at org.hibernate.cfg.AbstractPropertyHolder.getExactOverriddenColumn(AbstractPropertyHolder.java:179) 
```

为什么会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:14:54.790

那是做不到的。此外，支持这样的结构也没有太大意义，因为没有任何包含结束的点：`Version`包含`Version`、包含`Version`、包含`Version`等。

在 JPA 2.0 规范中，这是用以下词语来说明的：

> 不允许可嵌入类之间的直接或间接循环包含依赖关系。

# objective-c - 大中央调度并发

> ID：14799724
> 
> 赞同：0
> 
> 时间：2013-02-10T16:14:39.250
> 
> 标签：objective-c, nstimer, grand-central-dispatch

这是我的场景....

我有一个 Core MIDI 应用程序，它可以检测 Note On 和 Note Off 消息，效果很好。

我有一些 midiSend 方法可以将消息发送回控制器以点亮 LED - 也可以正常工作。

我现在要做的是在 Note Off 消息上让 LED 闪烁。这是我的代码：

```
[midiListener performSelectorOnMainThread:@selector(startTimer:) withObject:midiMsgParts waitUntilDone:YES];

-(void)startTimer:(NSDictionary *)dict {

ledIntervalCount = 0;
ledIntervalTimer = [NSTimer scheduledTimerWithTimeInterval:0.3
                                                    target:self
                                                  selector:@selector(ledIntervalLoop:)
                                                  userInfo:dict
                                                   repeats:YES];
}

-(void)ledIntervalLoop:(NSTimer *)inboundTimer{

NSDictionary *userInfo = [NSDictionary dictionaryWithDictionary:[inboundTimer userInfo]];

NSLog(@"%@", userInfo);

UInt32 onCommand = [[userInfo objectForKey:@"noteOn"] intValue];
//UInt32 offCommand = [[userInfo objectForKey:@"noteOff"] intValue];
UInt32 theNote = [[userInfo objectForKey:@"note"] intValue];

ledIntervalCount++;
if (ledIntervalCount > 3) {
    [ledIntervalTimer invalidate];
    ledIntervalTimer = nil;
} else {

    if(ledIntervalCount %2){

        [self sendNoteOnIlluminate:onCommand midiNote:theNote];

    }else{

        [self sendNoteOnCommand:onCommand midiNote:theNote];

    }

  }

} 
```

所以我正在使用一个`NSTimer`来交替 LED 开/关命令。当我按下一个按钮时它工作正常，但当我同时按下多个按钮时就不行了。似乎它只选择最后一次调用 startTimer 方法。

这是我认为我需要使用 GCD 实现调度队列的地方。这样每个都`NSTimer`将完全执行而不会被随后的方法调用中断。

我对么？GCD 会允许我`NSTimer`同时运行吗？

GCD 对我来说是一个新概念，所以一些关于我如何实施它的指导会有所帮助。我已经阅读了一些参考指南，但需要在我的场景上下文中查看一些示例代码。我想我在这里要问的是，我的代码的哪一部分会放在块中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:00:32.380

啊，无论如何，您都使计时器无效...在尝试了 3 次之后。ALL - 你需要 X 个计数器用于 X 定时器，你有 1 个计数器用于 X 定时器

而不是一个长的 ledIntervalCount，有一个带有 ledIntervalCounts 的 NSMutableArray！每个计时器一个

然后在计时器的用户信息中，提供要使用的计数器的索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T08:48:26.353

问题是我从包装在自动释放的方法中调用该类。我现在在主线程上运行它，它工作正常。

# php - 从客户端发送到服务器的默认数据

> ID：14799725
> 
> 赞同：0
> 
> 时间：2013-02-10T16:14:43.150
> 
> 标签：php, client

我正在用 PHP 构建这个类，以从客户端收集我的服务器已知的所有内容，当客户端重定向到我的 http:// 时会发生这种情况。域名 。结尾 ，

我已经寻找了一些基本的东西作为开始：IP地址、时间、端口、代理、主机、主机

基本上所有的变化`$_SERVER`包括，我的问题是：

我可以收集哪些额外信息来最大限度地利用有关进入我的域的用户的可用信息？

我忘了问，在这种情况下，我是否必须从全局变量中过滤和（他们怎么说，santise？）日期`$_SERVER`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:20:19.840

您可以开始记录他们使用的链接、访问的页面以及访问频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:21:43.937

您可能希望使用地理位置检查来确定您的用户所在的位置。

[https://stackoverflow.com/questions/5190734/php-geolocation](https://stackoverflow.com/questions/5190734/php-geolocation)

如果您的网站支持多种语言，您可以更轻松地将用户自动重定向到正确的网站。

$_SERVER 几乎包含您可能真正想知道的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:30:00.000

查看 irongeek.com[的浏览器信息页面](http://www.irongeek.com/browserinfo.php)，了解哪些信息是现成可用的。您可以从 javascript 中了解很多关于客户端的信息。也许您的 PHP 类的一部分应该包含一个 AJAX 组件。也就是说，窥探可用于 javascript 的信息可能会严重侵犯隐私，我不是网络道德方面的专家。

另一个很好的信息收集示例是 Google Analytics (GA)，如果您有一个带有 GA 的实时站点，您应该登录并查看它具有的一些不同的报告和数据类型。

您还应该阅读有关[Do Not Track](https://www.google.com/search?q=Do%20not%20track)的信息。

# javascript - 如何重置 setTimeout

> ID：14799728
> 
> 赞同：1
> 
> 时间：2013-02-10T16:14:57.657
> 
> 标签：javascript, settimeout

点击后我有这个动作：

```
 remote_top.on('click',function(){
        if (program_changer_block.css('display','block')){
            var g_timer = null;
            clearTimeout(g_timer);
            setTimeout(function(){
                program_changer_block.fadeOut();
            }, 5100);
        }
        else if (program_changer_block.css('display','none')){
            setTimeout(function(){
                program_changer_block.fadeIn();
            }, 300);
        }
   }); 
```

我想要做的是每次点击后清除超时。现在经过一些快速点击后，我的块在从第一次点击计算的 5100 毫秒后隐藏。每次单击后如何重新启动此超时？出事了，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:25:20.600

该`setTimeout()`函数返回*超时 ID*。只需将其存储在您的`g_timer`变量中并使其成为全局变量：

```
 var g_timer;
  remote_top.on('click',function(){
        if (program_changer_block.css('display','block')){
            clearTimeout(g_timer);
            g_timer = setTimeout(function(){
                program_changer_block.fadeOut();
            }, 5100);
        }
        else if (program_changer_block.css('display','none')){
            g_timer = setTimeout(function(){
                program_changer_block.fadeIn();
            }, 300);
        }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:26:18.367

您是否尝试过使用 clearQueue 和 delay 直接控制队列？

```
remote_top.on('click',function(){
    if(program_changer_block.css('display','block')){
        program_changer_block.stop(true,true).delay(5100).fadeOut();
    }
    else if(program_changer_block.css('display','none')){
        program_changer_block.stop(true,true).delay(300).fadeIn();
    }
}); 
```

stop() 中的第一个 true 意味着 .clearQueue()

# python - *.pyc 文件未找到

> ID：14799730
> 
> 赞同：2
> 
> 时间：2013-02-10T16:15:13.407
> 
> 标签：python

我正在编写一个`*.pyc`在 Python 3.3 下加载字节编译文件的应用程序。我正在分发`*.pyc`没有相应`*.py`文件的文件以（尝试）保护我的源代码。（是的，如此[处](https://stackoverflow.com/questions/11368304/what-are-the-limitations-of-distributing-pyc-files)所述，尝试通过字节编译 Python 来阻止反编译并不是最安全的选择，但如果我发现需要，我总是可以添加其他代码安全措施。）

但是，我发现 Python 不会在`*.pyc`没有原始`*.py`文件的情况下加载文件。（根据[PEP 3147](http://www.python.org/dev/peps/pep-3147/)，`*.pyc`文件保存在文件`__pycache__`所在目录中的一个子目录中`*.py`。我使用自己的代码遵循此约定。）

在我使用 Python 2.7 的项目的早期迭代中，我对 Python 源代码进行了字节编译，并将生成的`*.pyc`文件放在与文件相同的目录中`*.py`；效果很好。显然，Python 查找`__pycache__`文件夹的方式存在问题。我究竟做错了什么？（是的，我已经适当地设置了；否则当我将它作为调试措施插入时`sys.path`它不会找到该文件。）`*.py`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:16:03.540

来自[PEP 3147](http://www.python.org/dev/peps/pep-3147/)：

> 如果缺少py源文件，里面的pyc文件`__pycache__`会被忽略。这消除了意外过时的 pyc 文件导入的问题。
> 
> 为了向后兼容，Python 仍将支持 pyc-only 发行版，但它仅在 pyc 文件位于 py 文件所在的目录中时才会这样做，即不在`__pycache__`目录中。pyc 文件`__pycache__`只有在缺少 py 源文件时才会被导入。

因此，如果您想制作仅 pyc 的发行版，则必须将已编译的文件放在与 .py 文件相同的位置。根据 PEP`compileall`的说法，可以选择创建这种精确的布局，这样您就不必`__pycache__`从 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T21:46:43.130

`*.pyc`我将文件从`__pycache__`目录中复制出来并`.cpython-33`从其文件名中删除；Python 然后按预期找到了它。谢谢，帝斯曼！

# vba - 在 VBA 中创建动态范围

> ID：14799731
> 
> 赞同：0
> 
> 时间：2013-02-10T16:15:27.103
> 
> 标签：vba

显然，我的代码中还没有必要的循环，但我想从第 3 行创建一个 Range("b3:gs3") 循环，并按照以下递归方式更新它：

```
Range("b3:gs3")
Range("b6:gs6")
Range("b9:gs9")
.
.
.
Range("b720:gs720") 
```

我可以对循环进行编码，但是很难对范围值的这种变化进行编码。

帮助将不胜感激。

罗恩

```
Sub Box()

    Dim curCell3 As Range

    For Each curCell3 In Sheets("Sheet 2").Range("b3:gs3").Cells  'This is the problem

    ActiveWorkbook.Sheets("6").Activate
    Range("B1").Select

    Do While ActiveCell.Value <> curCell3.Value
        ActiveCell.Offset(0, 1).Select
    Loop

            ActiveCell.Offset(44, 0).Select
            ActiveCell.Copy
            ActiveWorkbook.Sheets("Sheet 2").Activate
            curCell3.Select
            ActiveCell.Offset(1, 0).Select
            ActiveCell.PasteSpecial Paste:=xlPasteValues

    Next curCell3

ActiveWorkbook.Sheets("6").Activate
Rows("3:3").Delete
ActiveCell.Offset(2, -199).Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:27:56.963

```
Sub Box()

    Dim curCell3 As Range
    Dim rw As Long, f As Range, rngSrch As Range

    Set rngSrch = ActiveWorkbook.Sheets("6").UsedRange.Columns(2)

    For rw = 3 To 720 Step 3

        For Each curCell3 In Sheets("Sheet 2"). _
             Range("b" & rw & ":gs" & rw).Cells

            Set f = rngSrch.Find(curCell3.Value, , xlValues, xlWhole)
            If Not f Is Nothing Then
                curCell3.Offset(0, 1).Value = f.Offset(44, 0).Value
            End If

        Next curCell3

    Next rw

End Sub 
```

# joomla2.5 - 从 Joomla 注册表单中删除“名称”字段

> ID：14799733
> 
> 赞同：0
> 
> 时间：2013-02-10T16:15:35.053
> 
> 标签：joomla2.5

我想删除 Joomla 注册表单中的名称字段。

我尝试编辑 /com_users/models/forms/registration.xml

我尝试从 XML 文件中删除该字段，并且还尝试将其设置为“可选”。这些都不起作用。无论哪种情况，下一页中都会显示注册失败消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:04:45.523

找到说明[http://www.2createthatwebsite.com/tutorials/joomla-tutorials/remove-fields-joomla-registration-form](http://www.2createthatwebsite.com/tutorials/joomla-tutorials/remove-fields-joomla-registration-form)

您需要编辑库/joomla/database/table/user.php 文件。

您需要编辑 check() 函数。

就我而言，我添加了一个：

```
$this->name=$this->username; 
```

在检查功能的开头，将用户名设置为名称，在保存之前。

# xpages - 如何将未选中的复选框值设置为空白

> ID：14799737
> 
> 赞同：1
> 
> 时间：2013-02-10T16:16:10.553
> 
> 标签：xpages

我在绑定到文档字段的 xapge 上有一个复选框控件。未选中的值设置为 false。我希望它是空白的。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T17:18:47.890

您可以使用`uncheckedValue`复选框的属性将其设置为空白值。下面是示例代码片段。

`<xp:checkBox text="Label" id="checkBox1" value="#{document1.Checkbox}" uncheckedValue=""></xp:checkBox>`

这将保存文档中的空白值。*需要注意的是，通过 Domino Designer，您不能将此属性设置为空白，因为它会删除该属性，因此您必须在源代码中执行此操作。*

# c - 交叉编译的二进制文件不存在？

> ID：14799740
> 
> 赞同：0
> 
> 时间：2013-02-10T16:16:26.080
> 
> 标签：c, linux, gcc, arm, cross-compiling

我在 x86 上运行的 Ubuntu 12.04 上交叉编译了一个程序，使用`gcc-arm-linux-gnueabi`和`binutils-arm-linux-gnueabi`编译`arm-linux-gnueabi-gcc`而不是`gcc`我的目标架构是 ARM。它编译良好，没有错误或警告。

当我尝试在 ARM 机器（Pandaboard - 也运行 Ubuntu 12.04）上运行它时，我得到：

```
bash: ./sttyl: No such file or directory 
```

我知道该文件在那里并且它具有适当的权限：

```
-rwxrwxr-x 1 haziz haziz 8.5K Feb 10 10:34 sttyl 
```

的输出`file sttyl`是

```
sttyl: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.31,BuildID[sha1]=0x6d504f7d84b93603122223a89e2b5960c840309f, not stripped 
```

当我在 Pandaboard 上本地编译它时，它编译并运行良好。这是`file sttyl`本机编译副本的输出：

```
sttyl: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.31,BuildID[sha1]=0x9897c785266c5b7cdf580e08091aba239db84ecf, not stripped 
```

我究竟做错了什么？此外，如果我在交叉编译中犯了错误，我会期望 shell/内核有效地告诉我可执行文件适用于错误的架构，而不是它不存在！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:25:09.587

它并没有告诉你`./sttyl`不存在。

它告诉您它产生了一个新进程，该进程以 error 退出`No such file or directory`。没有提供有关丢失哪个文件或目录的信息。

例如，`#!/bin/specialsh`如果解释器`/bin/specialsh`丢失，一个以

尝试使用`strace`找出导致错误的调用（和路径）。

# ruby-on-rails - 使用 rspec 进行测试会出现错误：“请安装 sqlite3 适配器”-railstutorial.org

> ID：14799748
> 
> 赞同：1
> 
> 时间：2013-02-10T16:16:49.327
> 
> 标签：ruby-on-rails, postgresql, railstutorial.org, sqlite3-ruby

嗨，我遇到了和这个人一样的问题：[Ruby Guard questions - 'Please install the sqlite3 adapter' - railstutorial.org](https://stackoverflow.com/questions/9958093/ruby-guard-questions-please-install-the-sqlite3-adapter-railstutorial-org/14799404#14799404)

执行“bundle exec rspec spec/requests/static_pages_spec.rb”给了我这个：

```
C:\Users\Me\Ruby\sample_app>bundle exec rspec spec/requests/static_pages_spec
.rb
Rack::File headers parameter replaces cache_control after Rack 1.5.
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/rubygems_integrati
on.rb:147:in `block in replace_gem': Please install the sqlite3 adapter: `gem in
stall activerecord-sqlite3-adapter` (sqlite3 is not part of the bundle. Add it t
o Gemfile.) (LoadError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/connection_adapters/sqlite3_adapter.rb:3:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_h
ash_connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_s
tring_connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/connection_adapters/abstract/connection_specification.rb:130:in `establis
h_connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/lazy_load_hooks.rb:36:in `instance_eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/lazy_load_hooks.rb:36:in `execute_hook'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/lazy_load_hooks.rb:42:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/lazy_load_hooks.rb:42:in `run_load_hooks'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_
record/base.rb:720:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils/extensions/active_record/base.rb:19:in `<module:Extensions>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils/extensions/active_record/base.rb:4:in `<module:Rails>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils/extensions/active_record/base.rb:2:in `<module:RSpec>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils/extensions/active_record/base.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils/extensions.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-rails-2.11.0/lib/rspec/ra
ils.rb:8:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active
_support/dependencies.rb:251:in `require'
        from C:/Users/Ayhan/Ruby/sample_app/spec/spec_helper.rb:4:in `<top (requ
ired)>'
        from C:/Users/Ayhan/Ruby/sample_app/spec/requests/static_pages_spec.rb:1
:in `require'
        from C:/Users/Ayhan/Ruby/sample_app/spec/requests/static_pages_spec.rb:1
:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/configuration.rb:780:in `load'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/configuration.rb:780:in `block in load_spec_files'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/configuration.rb:780:in `map'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/configuration.rb:780:in `load_spec_files'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/command_line.rb:22:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/runner.rb:69:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/cor
e/runner.rb:8:in `block in autorun' 
```

但我的 database.yml 看起来像这样：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: postgresql
  host: localhost
  username: user
  database: app-dev

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

我必须在这里改变什么？或者还有其他我看不到的问题？

PS：我安装了postgreSQL，所以我改变了database.yml中的开发通道。gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'pg', '0.12.2'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails'

group :test do
  gem 'capybara', '1.1.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:27:20.267

使用 中的当前配置`config/database.yml`，开发环境`postgres`在`test`&`production`使用时处于开启状态`sqlite3`。并且没有`sqlite3`包含在`Gemfile`. 因此有关`Please install the sqlite3 adapter`.

为什么不`postgres`用于所有环境而不是仅用于`development`？

分别使用适当的数据库名称 - & database: app-prod`制作`test`与in`production`类似的部分。`development``config/database.yml``database: app-test`

或者，如果您想`sqlite3`用于某些环境，请`sqlite3`仅包含该环境的 gem，并`pg`包含其他环境的 gem。

**示例 Gemfile 配置：**

下面的配置将包括`pg`gem only for`production`和`sqlite3`gem only for `development`& `test`environment。

```
group :production do
  gem 'pg', '0.11.0'
end

group :development, :test do
  gem 'sqlite3-ruby', :require => 'sqlite3'
end 
```

# c# - 是否可以一个接一个地删除多个注册表项？

> ID：14799754
> 
> 赞同：2
> 
> 时间：2013-02-10T16:17:16.253
> 
> 标签：c#, registry, registrykey

我对 c# 相当陌生。我想实现一个接一个地**删除多个注册表项，但是****第一个键出现异常，**之后代码停止删除其他键。我尝试了下面提到的代码，它适用于 if 块中的单个键

```
string[] keyArray = { @"Wow6432Node\CLSID",
            @"Software\Microsoft\Windows\CurrentVersion\Ext\Settings",
            @"Software\Microsoft\Windows\CurrentVersion\Ext\Stats",
            @"SOFTWARE\Classes\Wow6432Node\CLSID",
            @"SOFTWARE\Wow6432Node\Classes\CLSID",
            @"Wow6432Node\Microsoft\Code Store Database\Distribution Units",
            @"Wow6432Node\Microsoft\Internet Explorer\ActiveX Compatibility",
            @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\ModuleUsage"
    };

foreach (var key in keyArray)
{
    try
    {

        RegistryKey myKey = Registry.ClassesRoot.OpenSubKey(key, true);
        if (myKey != null)
        {
            /*Cisco Secure Desktop*/
            myKey.DeleteSubKeyTree("{705EC6D4-B138-4079-A307-EF13E4889A82}");
            myKey.DeleteSubKeyTree("{F8FC1530-0608-11DF-2008-0800200C9A66}");
            myKey.DeleteSubKeyTree("{E34F52FE-7769-46CE-8F8B-5E8ABAD2E9FC}");
            /*Cisco Hostscan*/
            myKey.DeleteSubKeyTree("{F8FC1530-0608-11DF-2008-0800200C9A66}");
            myKey.DeleteSubKeyTree("{E34F52FE-7769-46CE-8F8B-5E8ABAD2E9FC}");
            /*Cisco AnyConnect Secure Mobility Client*/
            myKey.DeleteSubKeyTree("{55963676-2F5E-4BAF-AC28-CF26AA587566}");
            myKey.DeleteSubKeyTree("{CC679CB8-DC4B-458B-B817-D447B3B6AC31}");
        }
        else
            Console.WriteLine(string.Format("could not open key: {0}", key));
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(
            string.Format("action {0} failed with\n{1}", key, ex.Message));

    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:53:32.897

根据您的详细信息，您可以尝试以下代码

```
string[] keyArray = { @"Wow6432Node\CLSID",
                @"Software\Microsoft\Windows\CurrentVersion\Ext\Settings",
                @"Software\Microsoft\Windows\CurrentVersion\Ext\Stats",
                @"Wow6432Node\Microsoft\Code Store Database\Distribution Units",
                @"Wow6432Node\Microsoft\Internet Explorer\ActiveX Compatibility",
                @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\ModuleUsage",
                @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\ModuleUsage",
        };

foreach (var key in keyArray)
{   
    try
    {
        RegistryKey myKey = Registry.ClassesRoot.OpenSubKey(key, true);
        if (myKey != null)
            myKey.DeleteSubKeyTree("{55963676-2F5E-4BAF-AC28-CF26AA587566}");
        else
            System.Diagnostics.Debug.WriteLine(string.Format("could not open key: {0}", key));
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(
            string.Format("action {0} failed with\n{1}", key, ex.Message));
    }                
} 
```

这也应该打印出一些错误信息。

根据您给出的评论`ArgumentException(...)`，您*尝试打开/删除一个* `{55963676-2F5E-4BAF-AC28-CF26AA587566}` *不存在*的子项！也许你应该看看[**Registry.OpenSubKey**](http://msdn.microsoft.com/de-de/library/xthy8s8d.aspx)和[**DeleteSubKeyTree(..)**](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.deletesubkeytree.aspx)

**编辑：**根据给定的详细信息添加了一个新答案

```
private static void deleteRegistryKeys2()
{
    string[] classIds = {
                    "{538793D5-659C-4639-A56C-A179AD87ED44}",
                        /*Cisco Secure Desktop*/
                    "{705EC6D4-B138-4079-A307-EF13E4889A82}",
                    "{F8FC1530-0608-11DF-2008-0800200C9A66}",
                        /*Cisco Hostscan*/
                    "{F8FC1530-0608-11DF-2008-0800200C9A66}",
                    "{E34F52FE-7769-46CE-8F8B-5E8ABAD2E9FC}",
                        /*Cisco AnyConnect Secure Mobility Client*/
                    "{55963676-2F5E-4BAF-AC28-CF26AA587566}",
                    "{CC679CB8-DC4B-458B-B817-D447B3B6AC31}"
                    };

    string[] regKeys = {  @"Wow6432Node\CLSID",
                        @"Software\Microsoft\Windows\CurrentVersion\Ext\Settings",
                        @"Software\Microsoft\Windows\CurrentVersion\Ext\Stats",
                        @"SOFTWARE\Classes\Wow6432Node\CLSID",
                        @"SOFTWARE\Wow6432Node\Classes\CLSID",
                        @"Wow6432Node\Microsoft\Code Store Database\Distribution Units",
                        @"Wow6432Node\Microsoft\Internet Explorer\ActiveX Compatibility",
                        @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\ModuleUsage"
                    };

    // iterate every regKey
    foreach (var regkey in regKeys)
    {
        // go for each classId
        foreach (var classId in classIds)
        {
            // get a regKey within a hive, pass classId too
            deleteKey(Registry.ClassesRoot.OpenSubKey(regkey, true), classId);

            deleteKey(Registry.CurrentUser.OpenSubKey(regkey, true), classId);
            deleteKey(Registry.LocalMachine.OpenSubKey(regkey, true), classId);
        }
    }
    Console.WriteLine("Cleanup finished. Press any key to exit");
    Console.ReadLine();
}

private static void deleteKey(RegistryKey registryKey, string classId)
{
    // check if there is a key
    if (registryKey != null)
    {
        try
        {
            // try to remove classId within this regKey
            registryKey.DeleteSubKeyTree(classId);
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.Message);
            Console.WriteLine(
                string.Format("could not delete key {0} with classId {1}",
                    registryKey, classId));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:32:23.113

最后，我有更好的代码，经过大量努力后可以正常工作请让我知道是否有人可以做得更好

```
 namespace ConsoleApplication1
   {
    class Program
    {
    static void Main(string[] args)
    {
        string[] clsids = {
                          "{538793D5-659C-4639-A56C-A179AD87ED44}",
                              /*Cisco Secure Desktop*/
                          "{705EC6D4-B138-4079-A307-EF13E4889A82}",
                          "{F8FC1530-0608-11DF-2008-0800200C9A66}",
                              /*Cisco Hostscan*/
                          "{F8FC1530-0608-11DF-2008-0800200C9A66}",
                          "{E34F52FE-7769-46CE-8F8B-5E8ABAD2E9FC}",
                             /*Cisco AnyConnect Secure Mobility Client*/
                          "{55963676-2F5E-4BAF-AC28-CF26AA587566}",
                          "{CC679CB8-DC4B-458B-B817-D447B3B6AC31}"

                          };

        string[] keys = {  @"Wow6432Node\CLSID",
                                @"Software\Microsoft\Windows\CurrentVersion\Ext\Settings",
                                @"Software\Microsoft\Windows\CurrentVersion\Ext\Stats",
                                @"SOFTWARE\Classes\Wow6432Node\CLSID",
                                @"SOFTWARE\Wow6432Node\Classes\CLSID",
                                @"Wow6432Node\Microsoft\Code Store Database\Distribution Units",
                                @"Wow6432Node\Microsoft\Internet Explorer\ActiveX Compatibility",
                                @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\ModuleUsage"
};

        /*Classes root hive*/

        for (int i = 0; i<=7; i++ )
        {
        foreach (var regkey in keys)
        {
            try
            {

           using (RegistryKey mykey = Registry.ClassesRoot.OpenSubKey(regkey, true))
                    if (mykey != null)
                    {
                        Console.WriteLine(mykey + @"\"+clsids[i]);
                        mykey.DeleteSubKeyTree(clsids[i]);

                    }

                    else
                    {
                        Console.WriteLine("key does not exist");
                    }

                /*try end*/
            }
            catch
            {
                continue;
            }

        }
        }

        /*Current user hive*/

        for (int i = 0; i <= 7; i++)
        {
            foreach (var regkey in keys)
            {
                try
                {

             using (RegistryKey mykey = Registry.CurrentUser.OpenSubKey(regkey, true))
                        if (mykey != null)
                        {
                            Console.WriteLine(mykey + @"\" + clsids[i]);
                            mykey.DeleteSubKeyTree(clsids[i]);

                        }

                        else
                        {
                            Console.WriteLine("key does not exist");
                        }

                    /*try end*/
                }
                catch
                {
                    continue;
                }

            }
            }

        /*Local Machine hive*/

        for (int i = 0; i <= 7; i++)
        {
            foreach (var regkey in keys)
            {
                try
                {
            using (RegistryKey mykey = Registry.LocalMachine.OpenSubKey(regkey, true))
                        if (mykey != null)
                        {
                            Console.WriteLine(mykey + @"\" + clsids[i]);
                            mykey.DeleteSubKeyTree(clsids[i]);

                        }

                        else
                        {
                            Console.WriteLine("key does not exist");
                        }

                    /*try end*/
                }
                catch
                {
                    continue;
                }

            }
            }

        Console.WriteLine("Cleanup finished. Press any key to exit");
        Console.ReadLine();
    }
    }
    } 
```

# android - 我的活动由一项活动和许多隐藏的布局组成。在不同的按钮上单击相应的布局设置为可见

> ID：14799756
> 
> 赞同：0
> 
> 时间：2013-02-10T16:17:23.287
> 
> 标签：android, xml

现在我的问题是，当每个布局设置为可见时，有没有办法应用任何默认动画？任何滑动动画都不会突然出现，而是看起来很流畅。

```
 //to show home page
   homeButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            liMenu.setVisibility(View.VISIBLE);

        }
    });
              //to show .net page
    dotnetButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            liDotnet.setVisibility(View.VISIBLE);

        }
    }); 
```

# c# - 序列化大整数数组

> ID：14799757
> 
> 赞同：0
> 
> 时间：2013-02-10T16:17:26.090
> 
> 标签：c#, arrays, serialization, int, jagged-arrays

我正在序列化两个 int 锯齿状数组（int[4096][4096] x2）。它们的大部分值都是 0。但是序列化文件有 128MB 的 NUL 值......此外，反序列化那个大对象需要一段时间。在不影响性能的情况下减轻文件重量的最佳选择是什么？

我正在使用二进制序列化，我想继续使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:22:40.053

如果反序列化整个对象花费的时间太长，那么瓶颈很可能是磁盘。如果是这种情况，那么您无需担心 CPU，您可以使用压缩。

在 .Net 中使用压缩的最简单方法是[`GZipStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream)通过包装`Stream`您正在使用的实际内容（很可能是 a `FileStream`）来使用。

这将导致文件更小（特别是如果它包含大量零），但它也会减慢反序列化/序列化。

使用单个 4096 × 4096 锯齿状整数数组，具有不同的零分数，并且有或没有压缩，我得到以下结果：

*   全零
    *   直接的
        *   大小：64.1 MB
        *   序列化：0,10 秒
        *   反序列化：0,10 秒
    *   压缩
        *   大小：0,1 MB
        *   序列化：0,93 秒
        *   反序列化：0.56 秒
*   第十个零
    *   直接的
        *   大小：64.1 MB
        *   序列化：0,09 秒
        *   反序列化：0,09 秒
    *   压缩
        *   大小：9,8 MB
        *   序列化：1,88 秒
        *   反序列化：0,74 秒
*   半零
    *   直接的
        *   大小：64.1 MB
        *   序列化：0,09 秒
        *   反序列化：0,09 秒
    *   压缩
        *   大小：38.6 MB
        *   序列化：5,99 秒
        *   反序列化：1.51 秒
*   没有零
    *   直接的
        *   大小：64.1 MB
        *   序列化：0,10 秒
        *   反序列化：0,09 秒
    *   压缩
        *   大小：64.1 MB
        *   序列化：2,99 秒
        *   反序列化：0.41 秒

这是 using `MemoryStream`，这意味着它几乎只测量 CPU 开销。如果您要使用`FileStream`，则差异可能会更小。

可以看到，大小可以明显变小，但是时间也增加不少，尤其是序列化。

# java - JavaPOS 打印文本抛出 JposException

> ID：14799758
> 
> 赞同：2
> 
> 时间：2013-02-10T16:17:38.043
> 
> 标签：java, applet, javapos

我在设置小程序以与 Epson TM-T88V pos 打印机配合使用时遇到了很多麻烦。现在我可以发送切割器的命令并且它可以工作了。但无法打印任何其他文本。

发生以下 jpos.JposException：

```
jpos.JposException: UnicodeDLL:-10An undefined parameter value was set.  
  at jp.co.epson.upos.T88V.pntr.T88VService.createNormalData(Unknown Source)  
  at jp.co.epson.upos.core.v1_13_0001.pntr.CommonPrinterService.executeNormalPrint(Unknown Source)  
  at jp.co.epson.upos.T88V.pntr.T88VService.printNormal(Unknown Source)  
  at jpos.POSPrinter.printNormal(Unknown Source)  
  at de.develman.pos.printer.Printer.printReceipt(Printer.java:58)  
  at de.develman.pos.ui.action.PrintAction.actionPerformed(PrintAction.java:22)  
  at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)  
  ... 
```

我的代码如下所示：

```
private void initPrinter() throws JposException {
    ptr.open("POSPrinter");
    ptr.claim(1000);
    ptr.setDeviceEnabled(true);
    ptr.setMapMode(POSPrinterConst.PTR_MM_METRIC);
}

private boolean printerUseable() throws JposException {
    // check if the cover is open
if (ptr.getCoverOpen() == true) {
    // cover open so do not attempt printing
    System.out.println("printer.getCoverOpen() == true");
    return false;
}

// check if the printer is out of paper
if (ptr.getRecEmpty() == true) {
    // the printer is out of paper so do not attempt printing
    System.out.println("printer.getRecEmpty() == true");
    return false;
}

    return true;
}

public void printReceipt() {
    try {
        initPrinter();
        if (printerUseable()) {
            ptr.printNormal(POSPrinterConst.PTR_S_RECEIPT, "1\n");
            ptr.printNormal(POSPrinterConst.PTR_S_RECEIPT, PAPERCUT);
        }
    } catch (JposException e) {
        // display any errors that come up
        e.printStackTrace();
    } finally {
        // close the printer object
        try {
            ptr.setDeviceEnabled(false);
            ptr.release();
            ptr.close();
        } catch (Exception e) {
    }
} 
```

异常指向该行：

```
ptr.printNormal(POSPrinterConst.PTR_S_RECEIPT, "1\n"); 
```

如果我从 Eclipse 运行代码，一切正常。如果我删除线，切割器工作正常。但是如果我想打印任何文本，就会抛出给定的异常。
我的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T08:18:11.440

我已经使用 Epson TM-T88V 打印机实现了 JavaPOS，并且遇到了同样的错误，但我能够使用此链接中的示例代码解决该错误：

[http://jpos.1045706.n5.nabble.com/file/n2250344/StarReceiptTest.java](http://jpos.1045706.n5.nabble.com/file/n2250344/StarReceiptTest.java)

查看开始和终止打印事务的部分。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T16:29:04.240

我有同样的问题。

为了解决这个问题，我卸载了 Epson JavaPOS-ADK 并重新安装。再次重新安装 ADK 时，我检查了我是否选择了正确的 jpos.xml（我也在我的应用程序中使用的那个 jpos.xml）。之后错误消失了......

希望这可以帮助其他有同样问题的人......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-11T09:33:05.953

同样的问题，其他答案对我的问题没有帮助。

我可以通过以下步骤在 Win 10 64 上安装`Epson_JavaPOS_ADK_11120.exe`，*我*花了 3 天时间才弄清楚：

*   从控制面板中删除任何版本的 Java，重新启动
*   安装`jdk-6u45-windows-i586.exe`，重启
*   用新的 Java 安装提供的可执行文件替换`java.exe`, `javaw.exe`, `javaws.exe`in`C:\ProgramData\Oracle\Java\javapath``C:\Program Files\Java\jre6\bin`
*   *以管理员*身份执行*Epson*安装程序
**   完成后恢复系统*

# javascript - 图例中的jqplot链接

> ID：14799759
> 
> 赞同：1
> 
> 时间：2013-02-10T16:17:38.417
> 
> 标签：javascript, jquery, hyperlink, jqplot, pie-chart

我有一个用 jqplot 制作的基本饼图：

```
$(document).ready(function(){
  var data = [
    ['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14],
    ['Out of home', 16],['Commuting', 7], ['Orientation', 9]
  ];
  var plot1 = jQuery.jqplot ('chart1', [data],
    {
      seriesDefaults: {
        renderer: jQuery.jqplot.PieRenderer,
        rendererOptions: {
          showDataLabels: true
        }
      },
      legend: { show:true, location: 'e' }
    }
  );
}); 
```

现在我想在图例中添加链接。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:37:21.567

您可以将 HTML 放入标签中：

```
$.jqplot(..., {
  series : {
    ...
    label : "<a href='URL'>click me</a>"
  }
}); 
```

（或将等效项放在`legend`jqPlot 配置对象的部分中）。

但是，您可能需要调整图例的 z-index 才能点击它们：

```
.jqplot-table-legend { z-index: 1000 } 
```

此外，我注意到一些设置（如启用缩放）阻止了标签的可点击性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T18:55:04.453

```
//I used the below method to bring hyperlink on legends, it worked for me. I did the same thing for bar chart also. 
```

这是我用来形成数组的字符串。

strArr = "[<' a onclick = GoToSearch("100") href=# > NY </a> ' , 8561 ]"

```
arrOwner= eval("[" + strArr + "]")

  $.jqplot.config.enablePlugins = false;

                plotCAP_EquipCount1 = $.jqplot('piechartOwner', [arrOwner], {
                    grid: {
                        drawBorder: true,
                        drawGridlines: false,
                        background: '#ffffff',
                        shadow: false
                    },
                    axesDefaults: {
                },
                title: 'Ownership Data',
                seriesDefaults: {
                    renderer: $.jqplot.PieRenderer,
                    rendererOptions: {
                        showDataLabels: true,
                        sliceMargin: 1,
                        startAngle: -90,
                        dataLabels: 'value',
                        highlightMouseOver: true,
                        highlightMouseDown: true
                    }
                },
                legend: {
                    show: true,
                    placement: 'outsideGrid',
                    rendererOptions: {
                        numberRows: 10
                    },
                    location: 'ne'
                }
            }); 
```

# nsurl - NSUrl 添加选择标准

> ID：14799760
> 
> 赞同：0
> 
> 时间：2013-02-10T16:17:51.970
> 
> 标签：nsurl

我有以下代码，我无法从 IOS 开发人员文档中解决如何将一些选择标准（针对 PHP）添加到 url

当我添加 /?category=sports 时，我的 php 可以工作，但是如何将它添加到我的 kGETUrl 字符串中

```
NSURL *url = [NSURL URLWithString:kGETUrl];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:21:06.137

用于`stringWithFormat`添加参数。

```
NSString *urlString = [NSString stringWithFormat:@"%@/?category=sports", kGETUrl];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

如果您想从变量中获取运动部分；

```
NSString *urlString = [NSString stringWithFormat:@"%@/?category=%@", kGETUrl, categorySelected];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:23:04.100

您可以添加到字符串：

```
[kGETUrl stringByAppendingString:@"?category=sports"]; 
```

# mysql - MySQL 服务器启动权限被拒绝

> ID：14799761
> 
> 赞同：2
> 
> 时间：2013-02-10T16:17:58.367
> 
> 标签：mysql, macos

我是数据库编程的新手，我想试试 MySQL。我刚刚从官网安装了 MySQL，我运行的是 mac 10.8.2。无论如何，每当我尝试运行一个简单的命令时，比如`$>mysql.server start` Permission *denied*。

我可以打开它，`sudo`但我很想解决这个问题，因为这让我很烦，它不能正常工作。我一直在寻找过去两个小时没有找到解决办法，所以我希望有人能帮我一把。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:30:00.347

最简单的方法是安装 MySQL 启动项。然后你会得到一个 MySQL 的 Preference 窗格。

有关完整说明，请参阅[http://dev.mysql.com/doc/refman/5.5/en/macosx-installation-startupitem.html](http://dev.mysql.com/doc/refman/5.5/en/macosx-installation-startupitem.html)。

* * *

回复您的评论：

像 mysql.server 这样的服务通常需要它作为用户登录以外的 uid 运行。例如，MySQL 数据目录可能只能由*mysql* uid 写入。因此，必须从可以更改进程的 uid 的用户开始启动这样的服务。root uid 可以做到这一点，因此需要使用`sudo`启动服务进程，如 mysql.server。

* * *

TL;博士：

# **你必须使用须藤。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T17:51:15.840

如果您是 MYSQL 的绝对新手，并且只想使用 MYSQL 服务器在本地 MAC 上测试您的代码，我建议您查看[XAMPP](http://www.apachefriends.org/en/xampp-macosx.html) / [MAMP](http://www.mamp.info)。Xampp 为开发服务器（Apache 服务器、MySQL、PHP 等）所需的一切提供了完整的开箱即用安装。注意，我的 XAMPP / MAMP 不适合生产服务器设置。

我个人使用 XAMPP Windows 版本。我没有尝试过 MAMP，但我遇到过很多次。XAMPP for Mac 版本似乎有一段时间没有更新了，所以我建议你试试 MAMP。

您当然可以尝试让您当前的安装工作，但这可能需要一些工作。还有关于防火墙/安全问题。使用开箱即用的版本，您将需要做的事情要少得多。如果您可以轻松安装开箱即用的版本，为什么还要重新发明轮子。

# java - 重绘时不调用paintComponent()

> ID：14799764
> 
> 赞同：0
> 
> 时间：2013-02-10T16:18:14.897
> 
> 标签：java, swing, graphics, repaint, paintcomponent

我一直在开发一个程序，该程序需要在鼠标拖动事件触发时在图像上绘制线条，但是在我的代码中，当通过 repaint() 调用paintComponent 时，paintComponent 方法不会执行。我已经阅读了关于挥杆图形的教程，并且还从其他程序员那里得到了一些意见，但到目前为止还没有找到适合我的解决方案。

我发布了一个小的 SSCCE 来帮助从我的程序中查明没有按预期运行的代码区域，试图为我自己和任何查看我的代码的人简化这一点。

提前感谢任何花时间帮我检查的人。

下面是我正在使用的两个单独的类。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestGraphics {
private JLayeredPane contentPane;

public void newImage() {
    try {
        JFileChooser fileChooser = new JFileChooser(".");
        int status = fileChooser.showOpenDialog(null);

        if (status == JFileChooser.APPROVE_OPTION) {
            File selectedFile = fileChooser.getSelectedFile();
            System.out.println("The selected file is from the: " + selectedFile.getParent() + " Drive");
            System.out.println("Name of file: " + selectedFile.getName());
            System.out.println("Opening file");

            BufferedImage buffImage = ImageIO.read(new File(selectedFile.getAbsolutePath()));
            ImageIcon image = new ImageIcon(buffImage);
            JLabel label = new JLabel(image);
            label.setSize(label.getPreferredSize());

            label.setLocation(0, 0);

            contentPane = new JLayeredPane();
            contentPane.setBackground(Color.WHITE);
            contentPane.setOpaque(true);
            //getTabbedPane().setComponentAt(tabNum, contentPane);
            contentPane.add(label);
            contentPane.setPreferredSize(new Dimension(label.getWidth(), label.getHeight()));

            Segmentation segmentation = new Segmentation();
            segmentation.addListeners(label); //call to addListeners method

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add(contentPane);
            frame.setResizable(false);
            frame.pack();
            frame.setLocationByPlatform(true);
            frame.setVisible(true);

        } else if(status == JFileChooser.CANCEL_OPTION) {
            JOptionPane.showMessageDialog(null, "Canceled");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            TestGraphics tg = new TestGraphics();
            tg.newImage();
        }
    });
}

} 
```

和另一个。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import java.util.ArrayList;
import javax.swing.JLabel;
import java.awt.event.MouseAdapter;

public class Segmentation extends JLabel {

private static final long serialVersionUID = -1481861667880271052L;  // unique id   
private static final Color LINES_COLOR = Color.red;
public static final Color CURRENT_LINE_COLOR = new Color(255, 200, 200);
ArrayList<Line2D> lineList = new ArrayList<Line2D>();
Line2D currentLine = null;
MyMouseAdapter mouse = new MyMouseAdapter();

public void addListeners(Component component) { 
    MyMouseAdapter myMouseAdapter = new MyMouseAdapter();
    component.addMouseListener(myMouseAdapter);
    component.addMouseMotionListener(myMouseAdapter);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    System.out.println("repainting");

    g2.setColor(LINES_COLOR);
    for (Line2D line : lineList) {
        g2.draw(line);
    }
    if (currentLine != null) {
        g2.setColor(CURRENT_LINE_COLOR);
        g2.draw(currentLine);
    }
}

private class MyMouseAdapter extends MouseAdapter {
    Point p1 = null;

    @Override
    public void mousePressed(MouseEvent e) {
        p1 = e.getPoint();
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        if (currentLine != null) {
            currentLine = new Line2D.Double(p1, e.getPoint());
            lineList.add(currentLine);
            currentLine = null;
            p1 = null;
            System.out.println("about to repaint");
            repaint();
        }
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (p1 != null) {
            currentLine = new Line2D.Double(p1, e.getPoint());
            repaint();
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:22:55.673

您永远不会将您的`Segmentation`实例添加到组件层次结构中。所以你`paintComponent`永远不会被召唤。

你应该有这样的地方：

```
Segmentation segmentation = new Segmentation();
// ...
component.add(segmentation); // assuming that component is part of a visible component hierarchy 
```

编辑：

您没有在适当的组件上注册鼠标侦听器。以下代码似乎工作得很好：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.ArrayList;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestGraphics {
    private JLayeredPane contentPane;

    public void newImage() {
        try {
            JFileChooser fileChooser = new JFileChooser(".");
            int status = fileChooser.showOpenDialog(null);

            if (status == JFileChooser.APPROVE_OPTION) {
                File selectedFile = fileChooser.getSelectedFile();
                System.out.println("The selected file is from the: " + selectedFile.getParent() + " Drive");
                System.out.println("Name of file: " + selectedFile.getName());
                System.out.println("Opening file");

                BufferedImage buffImage = ImageIO.read(new File(selectedFile.getAbsolutePath()));
                ImageIcon image = new ImageIcon(buffImage);

                contentPane = new JLayeredPane();
                contentPane.setBackground(Color.WHITE);
                contentPane.setOpaque(true);
                // getTabbedPane().setComponentAt(tabNum, contentPane);
                Dimension d = new Dimension(image.getIconWidth(), image.getIconHeight());
                Segmentation segmentation = new Segmentation();
                segmentation.setIcon(image);
                segmentation.setSize(d);
                contentPane.setPreferredSize(d);
                contentPane.add(segmentation);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(contentPane);
                frame.setResizable(false);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);

            } else if (status == JFileChooser.CANCEL_OPTION) {
                JOptionPane.showMessageDialog(null, "Canceled");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static class Segmentation extends JLabel {

        private static final long serialVersionUID = -1481861667880271052L; // unique id
        private static final Color LINES_COLOR = Color.red;
        public static final Color CURRENT_LINE_COLOR = new Color(255, 200, 200);
        ArrayList<Line2D> lineList = new ArrayList<Line2D>();
        Line2D currentLine = null;
        MyMouseAdapter mouse = new MyMouseAdapter();

        public Segmentation() {
            addMouseListener(mouse);
            addMouseMotionListener(mouse);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            System.out.println("repainting");

            g2.setColor(LINES_COLOR);
            for (Line2D line : lineList) {
                g2.draw(line);
            }
            if (currentLine != null) {
                g2.setColor(CURRENT_LINE_COLOR);
                g2.draw(currentLine);
            }
        }

        private class MyMouseAdapter extends MouseAdapter {
            Point p1 = null;

            @Override
            public void mousePressed(MouseEvent e) {
                p1 = e.getPoint();
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                if (currentLine != null) {
                    currentLine = new Line2D.Double(p1, e.getPoint());
                    lineList.add(currentLine);
                    currentLine = null;
                    p1 = null;
                    System.out.println("about to repaint");
                    repaint();
                }
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                if (p1 != null) {
                    currentLine = new Line2D.Double(p1, e.getPoint());
                    repaint();
                }
            }
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestGraphics tg = new TestGraphics();
                tg.newImage();
            }
        });
    }

} 
```

# actionscript-3 - 为什么 Alivepdf 生成双表头？

> ID：14799768
> 
> 赞同：1
> 
> 时间：2013-02-10T16:18:44.973
> 
> 标签：actionscript-3, flash, apache-flex, alivepdf

我正在尝试使用 AlivePdf 在我的 flex 应用程序上创建一个 pdf 表：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
                xmlns:mh="mh.components.*"
                layout="absolute" width="500" height="500">

<mx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        import org.alivepdf.colors.RGBColor;
        import org.alivepdf.display.Display;
        import org.alivepdf.drawing.Caps;
        import org.alivepdf.fonts.FontFamily;
        import org.alivepdf.fonts.Style;
        import org.alivepdf.grid.Grid;
        import org.alivepdf.images.ImageFormat;
        import org.alivepdf.layout.Orientation;
        import org.alivepdf.layout.Resize;
        import org.alivepdf.layout.Size;
        import org.alivepdf.layout.Unit;
        import org.alivepdf.pages.Page;
        import org.alivepdf.pdf.PDF;
        import org.alivepdf.saving.Method;
        import org.alivepdf.visibility.Visibility;

        import org.alivepdf.grid.*;

        private var myPDF:PDF;

        //print chart in pdf format
        protected function savePDF(e:MouseEvent):void
        {
            var myPDF:PDF = new PDF ( Orientation.PORTRAIT, Unit.MM);
            myPDF.setDisplayMode(Display.FULL_PAGE);
            myPDF.addPage();

            myPDF.setXY( 10, 70);
            myPDF.textStyle ( new RGBColor ( 0x000000 ) );

            var dp:ArrayCollection = new ArrayCollection();
            dp.addItem( { firstName : "Bob Geldorf akjaskaj skajs as kajs kaj k dklfj sdkfjl sdkjf ksdj fkjs dkfj ksdj ", lastName : "Groove", city : "Paris" } );
            dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );
            dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );
            dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );

            var grid:Grid = new Grid ( dp.toArray(), 200, 100, new RGBColor (0x00DEFF));

            myPDF.addGrid( grid, 0, 0, true );
            myPDF.save( Method.REMOTE, "coldfusion/pdf.cfm", "inline", "test.pdf" );;
        }

    ]]>
</mx:Script>    

<mx:VBox width="100%" height="100%">

    <mx:HBox width="100%" backgroundColor="#FFFFFF">
        <mx:Spacer width="100%"/>

        <mx:Button horizontalCenter="0" label="Save to PDF" height="22"  click="savePDF(event)"  id="savePDFBtn" toolTip="SAVE TO PDF"/>

    </mx:HBox>
</mx:VBox> 
```

奇怪的是脚本创建了一个带有双标题的表，我不知道为什么。您可以在此链接查看生成的 pdf：[https ://docs.google.com/viewer?url=prestitiinpdap.biz/pdf/myPDF.pdf](https://docs.google.com/viewer?url=prestitiinpdap.biz/pdf/myPDF.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:04:31.560

在使用网格创建 PDF 时，我遇到了相同的标题重复问题，如此处所述。您的问题已经过去了几年，但是自从我现在遇到它以来，这是我的解决方案...

为了确保使用最新的 AlivePDF 版本，我从他们的 SVN 下载了最新的源代码：http: [//alivepdf.googlecode.com/svn/trunk/AlivePDFBeta/src](http://alivepdf.googlecode.com/svn/trunk/AlivePDFBeta/src)

*我相信这是作为 AlivePDF 0.1.5 RC 分发的，但是分发的 SWC 在某些方法签名上似乎存在差异。*

在扫描 AlivePDF 源代码以查找与添加 Grid 标头相关的行为时，我注意到了类**org.alivepdf.pdf.PDF**，公共方法**addGrid**。该方法确实添加了 Grid 标题**2 次**，可能是错误的。这已通过注释第*4178*到*4180*行来解决，如以下源代码所示。

*带有注释部分的完整方法包括：*

```
public function addGrid ( grid:Grid, x:Number=0, y:Number=0, repeatHeader:Boolean=true ):void
        {   
            if ( textColor == null ) 
                throw new Error("Please call the setFont and textStyle method before adding a Grid.");

            currentGrid = grid;
            currentGrid.x = x;
            currentGrid.y = y;
            var i:int = 0;
            var j:int = 0;

            currentGrid.generateColumns(false);
            columns = currentGrid.columns;

            var row:Array;
            columnNames = new Array();
            var lngColumns:int = columns.length;    
            var item:*;

            for (i = 0; i< lngColumns; i++)
                columnNames.push ( new GridCell(columns[i].headerText, currentGrid.headerColor ) );

            var rect:Rectangle = getRect ( columnNames, currentGrid.headerHeight );
            if ( checkPageBreak(rect.height) )
                addPage();

            // Commented to avoid the duplicate header issue:
            //setXY (x +currentGrid.x, y+getY() );
            //addRow( columnNames,'', rect);
            //endFill();

            setXY ( x+getX(), y+getY() );
            addRow( columnNames, GridRowType.HEADER, rect );

            if (grid.cells == null)
                grid.generateCells();

            var buffer:Array = grid.cells;
            var lngRows:int = buffer.length;

            for (i = 0; i< lngRows; i++)
            {

                item = buffer[i];
                row = new Array();
                for (j = 0; j< lngColumns; j++)
                {
                    row.push (item[columns[j].dataField] != null ? item[columns[j].dataField] : "");
                    nb = Math.min(nb,nbLines(columns[j].width,row[j]));
                }

                row = buffer[i];

                rect = getRect ( row, currentGrid.rowHeight );
                setX ( x + getX());

                if ( checkPageBreak(rect.height) )
                {
                    addPage();
                    setXY ( x+getX(),nextPageY );
                    //setXY ( x+getX(),y+getY() ); hacked to allow user to set the next Page Y of Grid
                    if ( repeatHeader ) 
                    {
                        addRow (columnNames, GridRowType.HEADER, getRect(columnNames, currentGrid.headerHeight) ); // header
                        setX ( x + getX() );
                    }
                }

                if ( grid.useAlternativeRowColor && Boolean(isEven = i&1) )
                    addRow( row, GridRowType.ALTERNATIVE, rect );
                else addRow( row, GridRowType.NORMAL, rect );
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:31:45.543

您使用哪个版本的库？我尝试使用当前版本 0.1.5RC 编译您的代码，但编译器找不到某些类。

更正类路径后，我发现“new Grid(...)”构造函数需要 7 个参数（在您的情况下只有 4 个）。

另一个问题是“Grid(...)”中的“宽度”。我不知道，开发人员想用它表达什么。我只有 60 才能获得正常视图。

毕竟我有以下PDF：

![AlivePDF 网格](../Images/748893cb4ac804481218bfeb98a38991.png)

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" width="500" height="500">
<fx:Script>
    <![CDATA[
    import mx.collections.ArrayCollection;
    import org.alivepdf.colors.RGBColor;
    import org.alivepdf.data.Grid;
    import org.alivepdf.display.Display;
    import org.alivepdf.drawing.Caps;
    import org.alivepdf.fonts.FontFamily;
    import org.alivepdf.fonts.Style;
    import org.alivepdf.images.ImageFormat;
    import org.alivepdf.layout.Orientation;
    import org.alivepdf.layout.Resize;
    import org.alivepdf.layout.Size;
    import org.alivepdf.layout.Unit;
    import org.alivepdf.pages.Page;
    import org.alivepdf.pdf.PDF;
    import org.alivepdf.saving.Method;
    import org.alivepdf.visibility.Visibility;
    import org.alivepdf.layout.*;
    private var myPDF:PDF;

    protected function savePDF(e:MouseEvent):void
    {
        var myPDF:PDF = new PDF( Orientation.PORTRAIT, Unit.MM); 
        myPDF.setDisplayMode( Display.FULL_PAGE, Layout.SINGLE_PAGE );

        var newPage:Page = new Page ( Orientation.PORTRAIT, Unit.MM);
        myPDF.addPage(newPage);

        myPDF.textStyle ( new RGBColor ( 0x000000 ) );

        var dp:ArrayCollection = new ArrayCollection();
        dp.addItem( { firstName : "Bob Geldorf akjaskaj skajs as kajs kaj k dklfj sdkfjl sdkjf ksdj fkjs dkfj ksdj ", lastName : "Groove", city : "Paris" } );
        dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );
        dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );
        dp.addItem( { firstName : "Bob", lastName : "Wise", city : "Paris" } );

        //var grid:Grid = new Grid ( dp.toArray(), 200, 100, new RGBColor (0x00DEFF));

        var grid:Grid = new Grid (dp.toArray(), 60, 100, new RGBColor(0x00DEFF), new RGBColor (0xFFFFFF), false, new RGBColor (0x000000));
        myPDF.addGrid( grid, 0, 0, true );

        //myPDF.save( Method.REMOTE, "coldfusion/pdf.cfm", "inline", "test.pdf" );

        var f:FileReference = new FileReference();
        var b:ByteArray = myPDF.save(Method.LOCAL);
        f.save(b, "test.pdf");
    }

    ]]>
</fx:Script>    

<mx:VBox width="100%" height="100%">
    <mx:HBox width="100%" backgroundColor="#FFFFFF">
        <mx:Spacer width="100%"/>
        <mx:Button horizontalCenter="0" label="Save to PDF" height="22"  click="savePDF(event)"  id="savePDFBtn" toolTip="SAVE TO PDF"/>
    </mx:HBox>
</mx:VBox>
</s:Application> 
```

试试看，也许它会帮助你。

# wordpress - htaccess WordPress和没有文件名的单独目录

> ID：14799769
> 
> 赞同：1
> 
> 时间：2013-02-10T16:18:48.517
> 
> 标签：wordpress, .htaccess, mod-rewrite

在我正在开发的网站上，该网站的主要部分是由 wordpress 驱动的。

我添加了另一个与 wordpress 站点完全分开的名为 employees 的目录，我对新目录的 mod_rewrites 有一点问题。

显然 wordpress 使用此代码制作其漂亮的网址

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php

</IfModule>

# END WordPress 
```

但我也想添加此规则以及任何其他必要的规则或条件，以便员工目录中的所有 /name.php 文件都被重定向到 /name

```
RewriteRule ^employees/(.*)$ employees/$1.php [L,QSA] 
```

我尝试过的几件事都只是导致employees/main 为404，但employees/main.php 正确解析。

# multithreading - Cocoa 中的多个 UI 线程

> ID：14799772
> 
> 赞同：3
> 
> 时间：2013-02-10T16:18:57.873
> 
> 标签：multithreading, macos, cocoa, user-interface, nsview

我有一个 Mac OS X 服务器应用程序，它呈现 NSViews 并通过 HTTP 接口将它们作为图像返回以供其他地方使用。没有可见的 UI，应用程序创建了没有 NSWindow 的分离的 NSView。

应用程序可以一次接收多个请求，但布局和渲染过程围绕主线程同步（使用 GCD 中的 dispatch_sync），因为 Cocoa UI 不是线程安全的，在该部分中将吞吐量降低到一次单个请求编码。

鉴于每个请求都是完全独立的，它们之间没有共享任何内容，Cocoa 应用程序有没有办法有效地运行多个完全独立的 UI 线程？也许使用多个运行循环？

如果可能的话，我想避免运行多个进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:32:05.117

很难肯定地说这将满足​​您的特定需求（因为您的特定需求可能具有未在您的问题中提到的主线程依赖项），但我在这里没有看到任何特别有争议的东西。例如，以下代码可以正常工作而不会发生意外：

```
CGImageRef CreateImageFromView(NSView* view)
{
    const CGSize contextSize = CGSizeMake(ceil(view.frame.size.width), ceil(view.frame.size.height));
    const size_t width = contextSize.width;
    const size_t height = contextSize.height;
    const size_t bytesPerPixel = 32;
    const size_t bitmapBytesPerRow = 64 * ((width * bytesPerPixel + 63) / 64 ); // Alignment
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, bitmapBytesPerRow, colorSpace, kCGBitmapByteOrder32Host | kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(colorSpace);
    [view displayRectIgnoringOpacity: view.bounds inContext: [NSGraphicsContext graphicsContextWithGraphicsPort: context flipped: YES]];
    CGImageRef image = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    return image;
}

- (IBAction)doStuff:(id)sender
{
    static NSUInteger count = 0;

    for (NSUInteger i =0; i < 100; ++i)
    {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSButton* button = [[[NSButton alloc] initWithFrame: NSMakeRect(0, 0, 200, 100)] autorelease];
            button.title = [NSString stringWithFormat: @"Done Stuff %lu Times", (unsigned long)count++];
            CGImageRef image = CreateImageFromView(button);
            NSImage* nsImage = [[[NSImage alloc] initWithCGImage:image size: NSMakeSize(CGImageGetWidth(image), CGImageGetHeight(image))] autorelease];
            CGImageRelease(image);
            dispatch_async(dispatch_get_main_queue(), ^{
                self.imageView.image = nsImage;
            });
        });
    }
} 
```

这里的关键是一切都是后台渲染任务的“私有”。它有自己的视图、自己的图形上下文等。如果您不共享任何内容，这应该没问题。既然您明确表示，“鉴于每个请求都是完全独立的，它们之间没有共享任何内容”，我怀疑您已经满足了这个条件。

试试看。如果您遇到麻烦，请发表评论。

# jquery - JQuery 移动图像大小（在 div 内）

> ID：14799774
> 
> 赞同：1
> 
> 时间：2013-02-10T16:19:02.343
> 
> 标签：jquery, image, mobile

我正在使用库存 2 列 JQuery 移动布局“ui-grid-a”。

为什么这行得通

```
<div data-role="page">
<div data-role="content">
    <div class="ui-grid-a"> <!-- ui-grid-a is a preset 2 column layout in JQuery Mobile -->
        <div class="ui-block-a"><!-- ui-block-a is a preset block in JQuery Mobile, it denotes the left column -->
            <img src="images/a.jpg" style="width:100%" />
        </div>
        <div class="ui-block-b"><!-- Right column -->
            <p>Right column...</p>
        </div>
    </div>
</div> 
```

然而这并不...

```
<HEAD>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<style type="text/css">
.full-image
{
    width:100%;
}
</style>
</HEAD>

<BODY>
<div data-role="page">
<div data-role="content">
    <div class="ui-grid-a"> <!-- ui-grid-a is a preset 2 column layout in JQuery Mobile -->
        <div class="ui-block-a"><!-- ui-block-a is a preset block in JQuery Mobile, it denotes the left column -->
            <img src="images/a.jpg" class="full-image" />
        </div>
        <div class="ui-block-b"><!-- Right column -->
            <p>Right column...</p>
        </div>
    </div>
</div> 
```

此外，直接在 img 上使用 css (img { width: 100% }) 也不起作用。

# python - 有人可以帮我把这个简短的代码片段翻译成 python 吗？

> ID：14799775
> 
> 赞同：2
> 
> 时间：2013-02-10T16:19:15.423
> 
> 标签：python, actionscript, matrix, numpy

我正在尝试使用[本教程](http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/)围绕等距瓷砖的坐标系。除了最后一个片段外，我基本上已经弄清楚了，我在下面复制它以避免不必要的点击=）

```
/**
* Intersect two line segments defined by A->B and C->D
*
* Returns the time of intersection along A->B
*/
public function RayIntersect(A : Vector2, B : Vector2, C : Vector2, D : Vector2) : Number
{
    // turn C->D into a plane...
    const n : Vector2 = D.Sub(C).m_Perp;

    // ...and do the regular plane vs ray maths
    const numerator : Number = C.Sub(A).Dot(n);
    const denom : Number = B.Sub(A).Dot(n);

    return numerator / denom;
} 
```

我不太确定这是用什么语言编写的（Java？ActionScript？），但想法是获取屏幕坐标并将它们投影到地图空间上。下图给出了正在执行的操作的示意图：

![在此处输入图像描述](../Images/120e628e53a540458b988cf52ed0d607.png)

给定一个点，我们想要找到沿轴和轴`P`的交点。不幸的是，我的矩阵代数（非常）生疏，所以我在推断代码中所做的事情时遇到了麻烦。python 翻译对帮助我解决这个问题大有帮助。`up``right`

重要的一点：我使用 2D numpy 数组来表示我的地图，因此理想情况下应该通过 numpy 处理矩阵转换。

非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:30:52.687

```
def ray_intersect(A, B, C, D):
   """ 
   Intersect two line segments defined by A->B and C->D
   Returns the time of intersection along A->B
   """

   # turn C->D into a plane...
   E = D-C
   n = np.array((-E[1], E[0]))
   # ...and do the regular plane vs ray maths
   numerator = np.dot(C-A, n)
   denom = np.dot(B-A, n)

   return numerator / denom; 
```

# php - 如何安全地使用 LIKE

> ID：14799776
> 
> 赞同：1
> 
> 时间：2013-02-10T16:19:30.080
> 
> 标签：php, mysql, security

我正在构建一个脚本，用户可以在其中搜索数据库。我的理解是 PDO 不允许您为 LIKE 操作数设置参数。所以我有这个代码来弥补它

```
$sQuery = "SELECT * FROM table WHERE column LIKE '%" . $this->sQuery . "%' LIMIT 30";
$Statement = $this->Database->prepare($sQuery);
$Statement->execute(); 
```

我怀疑这对于 SQL 注入是安全的。有什么办法让它安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:22:53.177

你是对的，将任何值插入 SQL 字符串都会产生 SQL 注入漏洞的风险。最好在 时使用 SQL 查询参数占位符`prepare()`，然后在 时将值作为参数提供`execute()`。

```
$pattern = "%" . $this->sQuery . "%";
$sQuery = "SELECT * FROM table WHERE column LIKE ? LIMIT 30";
$Statement = $this->Database->prepare($sQuery);
$Statement->execute(array($pattern)); 
```

把它当作伪代码，因为我不能从你的例子中看出你正在使用哪个 MySQL 扩展。我假设 PDO，它允许将参数作为数组参数发送到`execute()`.

有些人使用`PDOStatement::bindParam()`，但这样做没有任何好处。也许在其他一些 RDBMS 品牌中是这样`PDO::PARAM_STR`，但在 MySQL 驱动程序中，参数类型被忽略了。

PS：除了您询问的安全问题之外，您会发现像您正在做的基于通配符的模式的搜索随着数据的增长而表现不佳。请参阅我的演示文稿[全文搜索Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:23:09.643

这应该有效：

```
$sQuery    = "SELECT * FROM table WHERE column LIKE :query LIMIT 30";
$Statement = $this->Database->prepare($sQuery);
$Statement->execute(array(':query' => '%' . $this->sQuery . '%')); 
```

# android - 如何在 Web 和本机应用程序之间创建持久性？

> ID：14799777
> 
> 赞同：1
> 
> 时间：2013-02-10T16:19:50.787
> 
> 标签：android, ios, mobile, guid

有没有办法在 IOS 或 Android 上跨网络跟踪 UID 到应用程序。例如，我们有一个移动网站，如果用户访问它会记住它。然后他们被引导下载应用程序，当应用程序打开时，如果应用程序知道用户已经在我们的移动网站上打开了特定网页，那就太好了。如果没有登录，是否有可能做到这一点？这篇文章似乎“破解”了那个过程？有没有更清洁的方法？[http://www.hasoffers.com/blog/ios-cookie-tracking-wrong-mobile-app-tracking/](http://www.hasoffers.com/blog/ios-cookie-tracking-wrong-mobile-app-tracking/)

# web-services - SOAP 服务的自动化测试

> ID：14799778
> 
> 赞同：0
> 
> 时间：2013-02-10T16:20:14.983
> 
> 标签：web-services, soap

在回答之前：使用[SoapUI](http://www.soapui.org/)。请阅读问题，因为我试过了`SoapUI`。

我有很多大`wsdl`文件。每个方法都是这样工作的：首先做一个`synchronous Call`：

*   请求：请`foo`发送请求至`URI: XY`
*   回应：好的，你的工作有`UUID: abc`

作业完成后，我的服务将通过同步`URI: XY`发送一条消息来响应：`request`

*   请求：好的，我完成了你的工作，`UUID: abc`结果是`bar`

我们需要使用这种行为，因为我们有一个池，所有答案都将被存储并由`UUID`.

您知道测试这种 SOAP 服务的可能性吗？

我试过了：

*   SOAP 用户界面
*   BPEL 单元（我认为 BPEL 单元应该可以，但我无法使其正常工作）

请不要推荐自己编写`JAVA`测试，因为我有超过 100 种方法可以测试。

**还需要运行测试并且需要在测试套件中自动分析结果，每次更改 Web 服务的代码时，我都无法手动为 100 种方法执行此操作。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:43:43.177

我是 SoapUI Guys 中的一员，所以你可能会讨厌我的回答……

但解决方案是使用 SoapUI；更具体地说，使用 MockResponse TestSteps。SoapUI 在 BPEL 测试方面不是很强大，但使用 MockResponse Steps 可以修复它。

看这里： http: [//www.soapui.org/SOAP-and-WSDL/testing-asynchronous-services.html](http://www.soapui.org/SOAP-and-WSDL/testing-asynchronous-services.html)。即使所有调用都是同步完成的，这仍然可以被认为是异步测试，因为我们拥有的不仅仅是简单的请求/响应。

我也知道甲骨文对此有很好的报道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:32:50.133

您需要做的是创建一个模拟服务，该服务将接收第二个调用，该调用表示作业处理已完成。这可以在 SOAP UI 中完成，您可以[在此处](http://www.soapui.org/Getting-Started/mock-services.html)阅读有关如何创建模拟 Web 服务的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:28:33.590

您可以使用 Eclipse 测试 Web 服务。

**只需将 WSDL 文件放在您的项目中 -> 右键单击​​该文件 -> Web 服务 -> 使用 Web 服务资源管理器进行测试。**

您将有一个界面显示所有需要的 WSDL 操作和字段。

# android - 运行相同功能时获取单击哪个图像的简单方法

> ID：14799782
> 
> 赞同：0
> 
> 时间：2013-02-10T16:20:27.480
> 
> 标签：android

我正在为Android制作纸牌游戏。您通过单击 image1 来选择您的第一张卡，通过单击 image2 等来选择第二张卡。这些图像在 java 中运行相同的功能，但是我如何传递一个变量来获取他们单击了 image1、image2 或 image3？除了一个变量，我想避免使用 3 个完全相同的函数。感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:22:58.073

我不确定“图像在 java 中运行相同的功能”是什么意思，但如果你的意思是它们都具有相同的 OnClickListener，那么使用[`getId()`](https://developer.android.com/reference/android/view/View.html#getId%28%29)来确定单击了哪个视图。

```
public void onClick(View v) {
    switch(v.getId()) {
    case R.id.one:
        // Do something
        break;
    case R.id.two:
        // Do something
        break;
    }
} 
```

# java - 递归回文

> ID：14799784
> 
> 赞同：1
> 
> 时间：2013-02-10T16:20:45.463
> 
> 标签：java

首先，我不是在告诉任何人“做我的功课”。我只需要一点帮助来了解如何继续重复一个过程。这是我在下面做的程序，它有一个测试器类。

班上：

```
class RecursivePalindrome {
    public static boolean isPal(String s)
    {
        if(s.length() == 0 || s.length() == 1)
            return true;
        if(s.charAt(0) == s.charAt(s.length()-1))
            return isPal(s.substring(1, s.length()-1));
        return false;
    }
} 
```

然后是具有 main 方法的测试器类：

```
public class RecursivePalindromeTester {   
    public static void main(String[] args)
    {
        RecursivePalindrome  Pal = new RecursivePalindrome ();

        boolean quit = true;
        Scanner in = new Scanner(System.in);
        System.out.print("Enter a word to test whether it is a palindrome or not(press quit to end.): ");
        String x = in.nextLine();
        while(quit) {
            boolean itsPal = Pal.isPal(x);
            if(itsPal == true){
                System.out.println(x + " is a palindrome.");
                quit = false;
            }
            else if (x.equals("quit")) {
                quit = false;
            }
            else {
                quit = false;
                System.out.println(x + " is not a palindrome.");
            }
        }
    }
} 
```

该程序查找字母是否为回文。我得到了所有的计算和东西，但是我该怎么做才能继续要求用户输入，并且每次用户输入它都会说它是否是回文词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:24:41.443

只需移动要求用户输入的行并阅读它：

```
System.out.print("Enter a word to test whether it is a palindrome or not(press quit to end.): ");
String x = in.nextLine(); 
```

...*进入*你的循环，例如，就在

```
while (quit) { 
```

...线。

* * *

旁注：`quit`对于布尔值来说，这似乎是一个奇怪的名称，当 时`true`，意味着你*继续前进*。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:29:22.750

只需用另一个 while 循环包装即可。

查看***continue***和***break***语句。它们对循环非常有帮助，这就是您在此处查找的信息。公共类 RecursivePalindromeTester {

```
public static void main(String[] args) {
        RecursivePalindrome  Pal = new RecursivePalindrome ();

        Scanner in = new Scanner(System.in);
        while(true){
             System.out.print("Enter a word to test whether it is a palindrome or not(press quit to end.): ");
             String x = in.nextLine();
                boolean itsPal = Pal.isPal(x);
                if(itsPal == true){
                    System.out.println(x + " is a palindrome.");
                } else if (x.equals("quit")) {
                    break;
                } else {
                    System.out.println(x + " is not a palindrome.");
                }
        }
    }
} 
```

# linux - 远程 SSH 命令响应不会出现在 CGI 的浏览器中

> ID：14799786
> 
> 赞同：1
> 
> 时间：2013-02-10T16:21:13.130
> 
> 标签：linux, ssh, cgi

我有一个简单的 CGI 页面（在 linux、apache 上运行），它可以从远程服务器获取一些响应。当我手动运行脚本（从终端）时，它会正确地回显整个网页，包括所有远程响应。但是当我打开浏览器时，没有响应！

这是我的脚本供参考。

```
#!/bin/bash
echo "Content-type: text/html"
echo ""
echo "<html class="background"><head><title>My Page"
echo "</title></head><body>"
echo ""

echo "<h2>Local Uptime :</h2>"
echo `uptime` #Local commands work normally

echo "<h2>Remote Uptime: </h2>"
echo `/usr/bin/ssh root@remote-server "uptime"`

echo "</body></html>" 
```

当然，我之前为无密码登录设置了密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:59:51.153

检查以确保 selinux 已关闭（或为 Web 浏览器设置正确的选项以执行 ssh）。

```
cat /selinux/enforce 
```

如果它是 1 将它设置为 0 作为 root

```
echo 0 > /selinux/enforce 
```

# mysql - 将消息分组为对话

> ID：14799793
> 
> 赞同：1
> 
> 时间：2013-02-10T16:22:47.497
> 
> 标签：mysql, sql, join, group-by

我正在尝试将对话中的消息分组，以便可以将它们作为对话阅读。

## 这就是我现在所拥有的

**桌子`messages`**

```
id | from | to | message | timestamp  
1  | 1    | 2  | 'Hello' | 1351257766
2  | 1    | 3  | 'Hey!'  | 1351257767
3  | 2    | 1  | 'Hay!'  | 1351257768 
```

而`messages.from`and`messages.to`字段对应于`users`表中的一行。

**我想要做的是：（不在同一个查询中）**

一种。获取来自用户的所有对话的最后一条消息的列表（因此其中一个`from`或`to`等于给定的`user.id`
b. 获取属于一个对话的所有消息。

```
SELECT
-- From-user:
    users_from.id               AS from_id,
    users_from.username         AS from_username,
    users_from.nickname         AS from_nickname,
    users_from.username_safe    AS from_username_safe,
    users_from.password         AS from_password,
    users_from.email            AS from_email,
    users_from.rank             AS from_rank,
    users_from.email            AS from_email,
    users_from.ip               AS from_ip,
    users_from.last_online      AS from_last_online,
    users_from.register_stamp   AS from_register_stamp,
    users_from.state            AS from_state,
    users_from.icon             AS from_icon,

-- To-user:
    users_to.id                 AS to_id,
    users_to.username           AS to_username,
    users_to.nickname           AS to_nickname,
    users_to.username_safe      AS to_username_safe,
    users_to.password           AS to_password,
    users_to.email              AS to_email,
    users_to.rank               AS to_rank,
    users_to.email              AS to_email,
    users_to.ip                 AS to_ip,
    users_to.last_online        AS to_last_online,
    users_to.register_stamp     AS to_register_stamp,
    users_to.state              AS to_state,
    users_to.icon               AS to_icon,

-- Messages:
    messages.id,
    messages.from,
    messages.to,
    messages.message,
    messages.timestamp

FROM messages

-- Some joins to get the userdata
INNER JOIN users AS users_to
    ON messages.to = users_to.id
INNER JOIN users AS users_from
    ON messages.from = users_from.id

-- We only want the latest messages:
RIGHT JOIN (
    SELECT
        max(messages.id) AS maxid,
        messages.from,
        messages.to
    FROM messages
    WHERE messages.to = {userid} OR messages.from = {userid}
) limiter
    ON messages.id = limiter.maxid 
```

这是我现在正在使用的，但它不起作用。它只返回其中一个对话。

我希望你们能帮助我完成这项工作！

**更新：** 给出的答案不起作用。当用户 1 向用户 2 发送消息时，它起作用了。但是，当用户 2 回复时，它开始了单独的对话（作为结果中的新行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:40:44.277

您的查询很接近，但我认为您也需要按用户分组。这是一种方法

```
RIGHT JOIN (
    SELECT
        max(messages.id) AS maxid,
        messages.from,
        messages.to
    FROM messages
    WHERE messages.to = {userid} OR messages.from = {userid}
    group by messages.from, messages.to
) limiter 
```

您对对话的定义似乎具有相同的两个用户。为此，请使用`in`：

```
select m.*
from messages m
where `from` in ({userid1}, {userid2}) and
      `to` in ({userid1}, {userid2}) 
```

顺便说一句，`from`并且`to`是错误的列名，因为`from`是保留字。

# ruby-on-rails - 在数据库中创建帖子时出现问题

> ID：14799796
> 
> 赞同：1
> 
> 时间：2013-02-10T16:22:56.230
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, forms, controller

我有一个从中创建项目的表单。该表单收集两个表的数据；“项目”和“项目用户”。最后一个是关系表，用于存储哪些用户是项目的成员（在表单中选择）。

创建一个新项目可以正常工作，但是在“projects_users”中创建新帖子时会失败：

```
uninitialized constant ProjectsController::Projects_users 
```

首先，我是否以正确的方式思考（见下面的代码）？

我所做的是从 params[:project] 中提取成员数组，该数组是从表单中检索的。然后我在数据库中创建项目，完成后我遍历成员数组（包含user_id）并在数据库中为“projects_users”创建帖子。

我究竟做错了什么？有没有更好的方法来实现我想要的？

**项目负责人：**

```
class ProjectsController < ApplicationController
def new
  @project = Project.new
  @users = (current_user.blank? ? User.all : User.find(:all, :conditions => ["id != ?", current_user.id]))
end

def create
  @members = params[:project].delete(:members)
  @project = Project.new(params[:project].merge(:user_id => current_user.id))

  if @project.save
    @members.each do |member|
        @project_members = Projects_users.new
        @project_members.project_id = @project.project_id
        @project_members.user_id = member.user_id
    end

    redirect_to @project
  else
    @users = (current_user.blank? ? User.all : User.find(:all, :conditions => ["id != ?", current_user.id]))
    render :new
  end
end
end 
```

**新的.html.erb：**

```
<%= form_for @project do |f| %>
<div class="alert alert-block">  
    <%= f.error_messages %>
</div>
<div class="text_field">
    <%= f.label :title%>
    <%= f.text_field :title%>
</div>
<div class="text_field">
    <%= f.label :description%>
    <%= f.text_field :description%>
</div>
<div class="dropdown">
    <%= f.label :start_date%>
    <%= f.date_select :start_date %>
</div>
<div class="dropdown">
    <%= f.label :end_date%>
    <%= f.date_select :end_date %>
</div><br/>
<span class="help-block">Välj användare som ska ingå ingå i projektet.</span>
<div class="checkbox">
    <% @users.each do |user| %>
        <%= check_box_tag "project[members][]", user.id, '1', :id => "user_#{user.id}" %> 
        <%= label_tag "user_#{user.id}", user.first_name + ' ' + user.last_name, :class => "checkbox" %>
    <% end %>
</div>
</div>
<div class="submit">
    <%= f.submit "Spara" %>
</div>
<% end %> 
```

**项目型号：**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users, :class_name => 'User'

  belongs_to :user
  has_many :tickets, :dependent => :destroy

  // validation...

  # Setup accessible (or protected) attributes for your model
  attr_accessible :user_id, :title, :description, :start_date, :end_date
end 
```

**用户型号：**

```
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :email, :password

  has_and_belongs_to_many :projects
  has_many :tickets

  ... other code

end 
```

**projects_users 表：**

```
project_id
user_id 
```

**项目表：**

```
user_id (the user that creates the project = admin)
title
description
start_date
end_date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:39:44.407

在您使用的控制器中`Projects_users.new`，这意味着`Projects_users`模型的新方法，并且当您使用 HABTM 关联时，连接模型不存在。如果要使用连接/关联模型，则必须使用`has_many :through`关联。但是，如果您只想将预先存在的用户与项目相关联，您可以按照以下方式进行

```
@project.user_ids = @members 
```

或者

```
@members.each do |member|
  user = User.find(member)
  @project.users << user
end 
```

@member 在您的情况下将是一个数组，而不是哈希。它将包含所有已检查用户的 ID。所以你不需要，`member.user_id`因为它不是一个哈希。

# php - Next 和 Preview 带有动态 url 的图片

> ID：14799799
> 
> 赞同：2
> 
> 时间：2013-02-10T16:23:03.860
> 
> 标签：php, mysql, image

我制作了一个非常简单的图片库，带有“下一步”和“预览”按钮。我的内容是动态生成的，所以我有动态 URL

```
<a href="content.php?id=<?php echo $row['id'] -1; ?>" ><div id="next">Next </div></a>
<a href="content.php?id=<?php echo $row['id'] +1; ?>" ><div id="prev">Prev </div></a> 
```

一切正常，但是当我点击最后一张图片上的“下一步”按钮或第一张图片上的预览按钮时，我得到了一个空白页，因为数据库中没有更多记录。所以我需要一个 IF 语句。

示例：如果（没有更多记录） echo 'error' else echo 'some message'

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:16:24.710

目前尚不清楚您的身份来自何处。你是从数据库中得到这个吗？但有一点很清楚，当您在最后一张图像上单击下一步时，传递的值将没有相关图像。对于预览问题，请检查值 $row[id]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:32:19.777

```
<a href="content.php?id=<?php
 $maxValue =6; //Enter Limit here
 If (($row['id'] - 1) < maxValue){
 echo $row['id'] - 1;}
?>" ><div id="next">Next </div></a> 
```

我不知道这对你是否有意义。我希望我理解你的问题。我没有看到另一个答案。如果它没有让我知道，我将通过在您的问题中添加注释来删除我的回复。

也如：

```
<a href="content.php?id=<?php $maxValue =6; If (($row['id'] - 1) < maxValue){ echo $row['id'] - 1;} ?>" ><div id="next">Next </div></a> 
```

# c# - 如何在动态 LINQ 中“让”？

> ID：14799803
> 
> 赞同：3
> 
> 时间：2013-02-10T16:23:27.263
> 
> 标签：c#, linq, linq-to-entities, dynamic-linq

我将如何在动态 linq 中编写此查询？我知道如何做选择，但我怎么做“让”？

```
var qry = from sr in data.Addresses
                  let AddressType_Desc = sr.AddressType.AddressType_Desc
                  let Country_Desc = sr.Country.Country_Desc
                  where sr.Customer_GUID == CustomerGuid
                  select new
                             {
                                 sr.Address_GUID,
                                 sr.People_GUID,
                                 sr.AddressType_GUID,
                                 AddressType_Desc,
                                 sr.Address1,
                                 sr.Address2,
                                 sr.City,
                                 sr.State,
                                 sr.Zip,
                                 sr.County,
                                 sr.Country_GUID,
                                 Country_Desc,
                                 sr.UseAsMailing
                             }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:43:46.717

在 linq 表达式方法语法中没有等价物，`let`在[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)中也是如此。

*`Let`只能帮助您使查询更具可读性。它只是作为别名或局部变量工作。您可以想象，在方法语法中，您将无法在声明它的方法范围之外访问它。*

在您的情况下，只需将`let`变量启动放入`select`.

**像这样在 linq 方法语法中：**

```
var qry = data.Adresses.Where(sr => sr.Customer_GUID == CustomerGuid)
                       .Select(sr => new {
                                            sr.Address_GUID,
                                            ....

                                            sr.AddressType.AddressType_Desc, 
                                            sr.Country.Country_Desc
                                         }); 
```

**或与动态 LINQ 类似（选择子句 as `string`）：**

```
var qry = data.Adresses.Where(sr => sr.Customer_GUID == CustomerGuid)
                       .Select("new (Address_GUID, AddressType.AddressType_Desc, Country.Country_Desc)"); 
```

您将获得与使用 linq 查询语法相同的结果。

其他表达方法也类似。您唯一需要的就是直接使用该值而不是`let`别名。

# vb.net - 显示当前进度

> ID：14799804
> 
> 赞同：1
> 
> 时间：2013-02-10T16:23:38.073
> 
> 标签：vb.net, listbox, progress-bar

当它不在列表框中时，我想添加当前进度条值。我希望它在进度条值更改时添加一个新项目。

到目前为止，这是我的代码......它只是增加了“0%”一百万次......

```
 Dim PText As String = ProgressBar1.Value

 If Not PText = LB1.Items.ToString Then
    LB1.Items.Add("Uploaded " & PText & "%")
 End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:29:41.820

尝试这个 ：

```
Dim PText As String = String.Format("Uploaded {0}%",ProgressBar1.Value)

If Not LB1.Items.Contains(PText) Then LB1.Items.Add(PText) 
```

# php - FILTER_FLAG_STRIP_LOW **和** FILTER_FLAG_STRIP_HIGH

> ID：14799805
> 
> 赞同：3
> 
> 时间：2013-02-10T16:23:49.757
> 
> 标签：php, filter, sanitize

我怎样才能同时实现 FILTER_FLAG_STRIP_HIGH 和 FILTER_FLAG_STRIP_LOW .. 我写过

```
filter_input(INPUT_POST, "fname", FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW, FILTER_FLAG_STRIP_HIGH); 
```

这行得通吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:25:11.600

您应该将它们组合在一起；

```
filter_input(INPUT_POST, "fname", FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW | FILTER_FLAG_STRIP_HIGH); 
```

# excel - Excel VBA - 删除特定列中的重复值

> ID：14799806
> 
> 赞同：1
> 
> 时间：2013-02-10T16:23:51.140
> 
> 标签：excel, vba

我有一个包含许多行 ID 的工作表。

我想知道编写 VBA 程序的最佳方法，该程序将查看一列中的值范围，并仅用出现在该范围内的唯一值替换整个范围。因此，一列 1000 个 ID 可能会减少到一列 150 个唯一 ID。我不希望此过程影响工作表中其他列中的数据。

因此，假设最初的 A 列是：

```
*IDs*
ID12
ID12
ID34
ID56
ID78
ID78
ID78 
```

我希望它用新的 A 列替换该列：

```
*IDs*
ID12
ID34
ID56
ID78 
```

非常感谢你。

注意：我知道如何通过几种不同的方式手动执行此操作，但我想循环并为工作表上的每个非空列执行此过程，并且列的长度不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:50:00.687

要实现您想要的，请执行以下操作：

1.  选择要删除重复项的整个列。
2.  去丝带`Data > Remove Duplicates`。
3.  设置`My data has headers`（根据您的输入）。

你完成了。如果您想在 VBA 中执行这些步骤 - 在开始之前打开宏记录器（Excel 窗口的左下角）。

# c++ - C可以有对象吗？

> ID：14799809
> 
> 赞同：0
> 
> 时间：2013-02-10T16:24:12.317
> 
> 标签：c++, c, oop

我知道 C++ 作为编程语言的主要优势之一是它可以支持 OOP。

例子：

```
#include <iostream>
using namespace std;

class CRectangle {
    int x, y;
  public:
    void set_values (int,int);
    int area () {return (x*y);}
};

void CRectangle::set_values (int a, int b) {
  x = a;
  y = b;
}

int main () {
  CRectangle rect;
  rect.set_values (3,4);
  cout << "area: " << rect.area();
  return 0;
} 
```

我想知道 C 是否也支持 OOP，如果支持，它是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:27:28.537

通常，您只需使用结构并传递上下文指针。您的示例的直接转换：

```
#include <stdio.h>

struct rectangle {
    int x, y;
};

void rectangle_set_values (struct rectangle * rectangle, int a, int b) {
  rectangle->x = a;
  rectangle->y = b;
}

int rectangle_area (struct rectangle * rectangle) {
  return rectangle->x * rectangle->y;
}

int main () {
  struct rectangle rect;
  rectangle_set_values(&rect, 3, 4);
  printf("area: %d", rectangle_area(&rect));
  return 0;
} 
```

# jsp - 将 jasper server 5 嵌入到我现有的 Web 应用程序中

> ID：14799810
> 
> 赞同：0
> 
> 时间：2013-02-10T16:24:16.167
> 
> 标签：jsp, iframe, jasperserver

我需要将 JasperReports Server 5.0 商业版用于 JSP Web 应用程序。我需要我的 Web 应用程序框架（外框、菜单）并将 JasperReports Server 作为 iFrame 嵌入 HTML 中。我可以通过单点登录绕过 JasperReports 服务器的登录。我想知道如何在框架内获取 JasperReports Server。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:58:21.307

要解决这个问题，最简单的方法是为 JasperReports Server 开发一个主题，该主题基本上是自定义 CSS 作为主题上传到 JasperReports Server。

*   以*超级用户身份登录*
*   导航到存储库中的文件夹*Themes*
*   右键单击并添加新主题
*   上传`overrides_custom.css`包含您的自定义设置的文件。

自定义可以是：

*   隐藏菜单、页脚等
*   应用自定义配色方案。

以这种方式解决它允许在 JRS 实例之间拥有一个可移植的解决方案，而无需在系统级别更改任何文件。

可以找到有关主题的更多信息：

*   第 5 章 - 主题（管理员指南）
*   第 11 章 - 自定义用户界面（终极指南）。

两者都可以在[Jaspersoft 社区](http://community.jaspersoft.com/documentation)下载。

# matlab - 枚举中缺少值或空字符串

> ID：14799811
> 
> 赞同：1
> 
> 时间：2013-02-10T16:24:16.710
> 
> 标签：matlab, matlab-class

有没有办法有这样的枚举：

```
classdef(Enumeration) bla_type < int32
    enumeration
        bla_one(1)
        bla_2(2)
    end
end 
```

缺少值或 NaN 值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:27:59.430

NaN 值适用于浮点类型，但不适用于整数。对于整数，每个位模式都具有数字含义。对于浮点，一些模式是为 NaN 和无穷大保留的。

由于您的枚举的基础类型是 int32，因此您将无法使用 NaN。

# sql-server - 具有动态复选框值的经典 ASP 更新表

> ID：14799816
> 
> 赞同：1
> 
> 时间：2013-02-10T16:24:41.267
> 
> 标签：sql-server, asp-classic, checkbox, dynamic-data

我有两张桌子：

1) 保存 propertyTypes 列表 2) 保存 propertyDetails

用户查看页面，propertyTypes 列表显示在屏幕上 - 这些是从 propertyTypes 中提取的复选框，我在它们周围有一个重复区域来显示它们。

用户可以选择许多这些 propertyTypes，我希望能够使用该信息更新 propertyDetails 表。

我有一个 varchar(max) 字段，并希望数据以逗号分隔。这可能不是最好的方式，但我们选择的方式。

我的问题是，如何使用 Classic ASP 在该字段中存储每个复选框的相关 ID？

到目前为止，我已将复选框绑定如下，但它似乎不起作用：

```
<input type="checkbox" name="propertyType" id="<%=(rsPropTypes.Fields.Item("ptID").Value)%>"> 
```

任何意见，将不胜感激。

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:16:43.673

尝试这个。

```
myvalue=rsPropTypes.Fields.Item("ptID").Value
<input type="checkbox" name="propertyType" id="<%response.write(myvalue)%>"> 
```

# list - Sencha Touch 2：NavigationView 的多个实例（每个选项卡一个）：控制器推送的每个面板都在第一个选项卡中打开

> ID：14799819
> 
> 赞同：1
> 
> 时间：2013-02-10T16:24:57.653
> 
> 标签：list, sencha-touch-2

在我的 sencha 触摸应用程序中，我有一个 NavigationView 容器，它加载一个面板视图，其中包含从商店呈现的列表。

我有一个选项卡栏，其中每个选项卡都打开此 NavigationView 容器，根据点击的选项卡添加 NavigationView 容器内的面板视图使用的商店中的一些额外参数。

这工作正常，对于每个选项卡，我都获得了 NavigationView 容器，并在其中包含面板视图，其中包含该选项卡的正确列表。

问题是这些列表有一些子列表需要在点击列表项时加载。我使用以下控制器执行此操作，该控制器在 NavigationView 容器中推送另一个包含子列表的视图面板：

```
Ext.define('FirstApp.controller.Details', {
extend: 'Ext.app.Controller',
config: {
    refs: {
        // this is my NavigationView container 
        placesContainer:'placesContainer'    
    },
    control: {

'placesContainer categorie list':{
            itemtap: 'chooseCategory' 
        }, 
```

我的 chooseCategory 函数是：

```
chooseCategory:function(list,index,target,record){
            //these add some extra params to my store's proxy
    Ext.getStore('Articoli').getProxy().setExtraParams({ catid: record.data.id });
    Ext.getStore('Articoli').load();

    this.getPlacesContainer().push({
        // this is the target view panel
        xtype:'articoli',
        title:record.data.title,
        data:record.data
    })

} 
```

这很好用，但是当您单击列表项时，其子列表会被推入第一个选项卡面板中。示例：我点击第三个选项卡。该应用程序显示与第三个选项卡对应的列表。我点击列表中的一项。该应用程序在第一个选项卡面板中加载其子列表。在我点击第一个选项卡之前，我看不到任何更改。在那里我可以看到加载了选项卡 3 的子列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:53:38.000

您可以将 onDisclosureItem:true 提供给您的列表，并在控制器中提供一个公开事件，以便在公开时它将加载子类别并在项目点击时将您导航到另一个视图

```
'placesContainer categorie list':{
            itemtap: 'chooseCategory',
            disclose: 'openSubCategory'
        }, 
```

# javascript - 滚动页面时如何更快/超过 div 移动 1 个 div

> ID：14799820
> 
> 赞同：0
> 
> 时间：2013-02-10T16:25:06.673
> 
> 标签：javascript, jquery, html, css, scroll

[我在这里](http://abduzeedo.com/)看到了这个效果 。当页面滚动时，页面的主要内容部分会移动到 div 上方。

我尝试使用视差效果重新创建此效果，但徒劳无功。问题是使用视差，我只能在同一个 div 中更改 2 个对象的速度。除此之外，我将不得不在所有地方放置一些不必要的标签使脚本工作的页面。

有没有更简单（或有效）的方法来实现这种效果？非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T16:35:59.957

[你可以用 CSS 做到这一点](http://jsfiddle.net/MRbWY)。

```
#head, #subHead{
    position: fixed;           
    height: 80px;    
    width: 100%;
    display: block;
    left: 0;
    top: 0;
    z-index: 10;         /* on top of all */
}

#subHead{
    z-index: 4;          /* below all */
    top: 80px;           /* height of the top div */
}

#content{
    position: relative;
    z-index: 6;          /* below the top div, but above the one below it */
    margin-top: 160px;   /* the height of the two divs above combined */
} 
```

并使 subHead 滚动更慢：

```
window.onscroll = function(ev){
  var subHead = document.getElementById('subHead'),
      topHeight = document.getElementById('head').offsetHeight;

  subHead.style.top = (topHeight - document.body.scrollTop / 4) + 'px';
}; 
```

jQuery：

```
$(window).on('scroll', function(){  
  $('#subHead').css('top', ($('#head').height() - $('body').scrollTop() / 4));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:37:23.840

至少似乎肯定存在一些视差。我对标记的浏览还不够彻底，但需要注意的一点是，带有图形的区域和内容区域（以及广告区域）是兄弟`<div>`。

就在头顶，加上一些 CSS `position`ing 和ing，将内容呈现在图形上方`z-index`会有点简单。似乎只有图形是通过视差滚动来控制的。如果这是有道理的。`<div>``<div>``<div>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T16:41:33.587

您可以为您的第一个 div 附加 onscroll 事件并在您的 JS 中设置第二个 div 的滚动位置。

```
<div id="div1" onscroll="OnScrollDiv()">
    <div id="div2"></div>
</div> 
```

javascript:

```
function OnScrollDiv () {
    var div1 = document.getElementById("div1");
    var div2 = document.getElementById("div2");
    div2.scrollTop = div1.scrollTop * 2;
} 
```

更多信息在这里： http: [//help.dottoro.com/ljurkcpe.php](http://help.dottoro.com/ljurkcpe.php) [http://help.dottoro.com/ljnvjiow.php](http://help.dottoro.com/ljnvjiow.php)

# wif - Windows Identity Foundation 和端口转发

> ID：14799829
> 
> 赞同：1
> 
> 时间：2013-02-10T16:26:04.610
> 
> 标签：wif

有净配置：

客户端 - 固件 - IIS

IIS 正在监听 8080 端口，IIS 上有一个 Web 应用程序，例如 MyApp。FW 实现了简单的端口转发（它将端口 80 替换为端口 8080）。假设以下情况：

客户要求`http://MyWebSite/MyApp/Index.aspx`，FW 将标准端口 80 更改为 8080，请求是 `http://MyWebSite:8080/MyApp/Index.aspx`。IIS 返回到客户端请求的页面 Index.aspx 一件重要的事情：如果用户在浏览器中键入`http://MyWebSite/myapp/index.aspx`IIS 返回`http://MyWebSite/MyApp/Index.aspx`（因此它会根据真实的应用程序名称更改 url 地址）。一切正常。

但是如果我插入标准管道 WIF，就会出现问题。例如，我希望 MyApp 只接受经过身份验证的用户。我想将用户重定向到某个身份提供者。如果用户试图获取页面`http://MyWebSite/MyApp/Index.a`spx，一切正常，用户被重定向到 IP。但是如果用户试图获取`http://MyWevSite/myapp/index.aspx`（小写的应用程序名称），IIS 会返回客户端重定向到`http://MyWebSite:8080/MyApp/Index.aspx`. 因为端口 8080 在 FW 上关闭，所以用户收到错误。如果我从我的应用程序中删除 WIF，一切都会再次正常运行。

有人遇到过问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:34:23.277

问题是 Reflector 发现的，在 WIF 的 CookieHandler 中。

浏览器仅在请求的路径与 CookieHandler 设置的路径匹配（区分大小写）时才发送 cookie（默认情况下，应用程序在 IIS 上的虚拟目录）。当 WIF 处理请求时，它会将请求的路径与 CokkieHandler 的路径进行比较。如果它们不匹配（区分大小写）WIF 认为用户只是输入了错误的大小写 URL，但他或她仍想访问应用程序，但用户的浏览器不会发送会话 cookie，因为大小写不匹配，所以 WIF 的 CookieHandler重定向到正确的 URL，但它对真实端口号一无所知，所以它只是添加了请求的端口号来重定向答案。浏览器尝试进行重定向，请求的端口在 FW 上关闭，我们收到错误。

在 .NET FW 4.5 中，您可以使用自己的自定义 CookieHandler 并实现其 MatchCookiePath 方法来覆盖 CookieHandler 的默认行为（例如，您可以从应用程序配置文件中添加特殊端口号）。

您也可以只使用小写的 url 和应用程序名称，并在 WIF 开始处理之前对每个请求进行小写，这样就不会有重定向。

# java - 如何将 JPanel 放入 JTabbedPane 大小？

> ID：14799830
> 
> 赞同：0
> 
> 时间：2013-02-10T16:26:17.353
> 
> 标签：java, swing, jpanel

我正在尝试将 a 添加`JPanel`到另一个中并使其适合父级 `JPanel 大小。

我有一个`JPanel`包含 a`JTable`和 a 的`JButton`使用此代码：

```
JScrollPane attributeTable = new JScrollPane(this);

JPanel attributesPanel = new JPanel();

JPanel textFieldPanel=new JPanel();
JPanel buttonsPanel = new JPanel();

JButton newAttributeButton = new JButton("New Attribute");

attributesPanel.add(textFieldPanel, BorderLayout.CENTER);
attributesPanel.add(buttonsPanel, BorderLayout.SOUTH);

newAttributeButton.addActionListener(AttributesTableController.getInstance());

GroupLayout layout = new GroupLayout(textFieldPanel);
textFieldPanel.setLayout(layout);

// Turn on automatically adding gaps between components
layout.setAutoCreateGaps(true);

// Turn on automatically creating gaps between components that touch
// the edge of the container and the container.
layout.setAutoCreateContainerGaps(true);

// Create a sequential group for the horizontal axis.

GroupLayout.SequentialGroup hGroup = layout.createSequentialGroup();

// The sequential group in turn contains two parallel groups.
// One parallel group contains the labels, the other the text fields.
// Putting the labels in a parallel group along the horizontal axis
// positions them at the same x location.
//
// Variable indentation is used to reinforce the level of grouping.
hGroup.addGroup(layout.createParallelGroup().
         addComponent(attributeTable).addComponent(newAttributeButton));
layout.setHorizontalGroup(hGroup);

// Create a sequential group for the vertical axis.
GroupLayout.SequentialGroup vGroup = layout.createSequentialGroup();
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).addComponent(attributeTable));
vGroup.addGroup(layout.createParallelGroup(Alignment.CENTER).
         addComponent(newAttributeButton));
layout.setVerticalGroup(vGroup); 
```

当我将此面板（名为`attributesPanel`）放入 a 的选项卡时`JTabbedPane`，它只显示`JTable`和`JButton`，但在面板的中心。我希望`attributesPanel`的尺寸与打开的标签的尺寸相同。

这是我用来将 JPanel 添加到 JTabbedPane 中的代码：

```
TabbedPane tabbedPane = new TabbedPane();
tabbedPane.setComponentAt(1, attributesPanel); 
```

我尝试使用`GridLayout`，它很适合，`JPanel`但我无法调整按钮的大小。我尝试使用 a`FlowLayout`和 a `GridBagLayout`，但我无法正确显示它们，因为我遇到了同样的问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:39:30.023

您的示例不完整所以很难判断出了什么问题，但这可能会有所帮助：

```
JTable table = new JTable (12, 5);
JButton button = new JButton ("Button");

JPanel panel = new JPanel ();
panel.setLayout (new BorderLayout ());
panel.add (table, BorderLayout.CENTER);
panel.add (button, BorderLayout.SOUTH);

JTabbedPane tabbedPane = new JTabbedPane ();
tabbedPane.addTab ("Tab", panel);

JFrame frame = new JFrame ();
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
frame.getContentPane ().setLayout (new BorderLayout ());
frame.getContentPane ().add (tabbedPane, BorderLayout.CENTER);
frame.pack ();
frame.setVisible (true); 
```

# function - 替换lisp中的元素

> ID：14799832
> 
> 赞同：2
> 
> 时间：2013-02-10T16:26:19.877
> 
> 标签：function, replace, lisp, common-lisp

我在 Common Lisp 中有这个问题。我需要操纵存在变量，引入 skolemization 规则。

例如，我需要构建一个函数，它会 `(exist ?x (p ?x))`在`(p sk00042)`.

`sk00042`是一个变量。请注意，当涉及通用变量时，此功能会变得有些困难。

例如，给定表达式的函数`(forall ?y (exist ?x (p ?x ?y))`将其转换为`(forall ?y (p (sf666 ?y) ?y)`. 这个想法是存在变量告诉我存在满足公式的东西。如果这个存在量词是外部的，那么这个量词不依赖于任何东西，`?x`上面第一个例子中的变量应该替换`skoo42`为这个函数生成的常量： `(defun skolem-variable () (gentemp "SV-"))`。

如果发生更难的（第二种）情况并且存在一个通用量词“超出”存在性量词，那么存在的事物依赖于普遍量化的变量，这意味着函数必须处理这种依赖性并且通用变量被合并到常数，如示例中所示：

`(forall ?y (exist ?x (p ?x ?y))`---->`(forall ?y (p (sf666 ?y) ?y)` 为此，它还具有以下功能：

```
(defun skolem-function* (&rest args) (cons (gentemp "SF-") args))
(defun skolem-function (args) (apply #'skolem-function* args)) 
```

这里有一些例子可以让你更熟悉这个想法：

```
(skolemize '(forall ?y (exist ?x (p ?x ?y))))
;=> (forall ?y (P (SF-1 ?Y) ?Y))
(skolemize '(exist ?y (forall ?x (p ?x ?y))))
;=> (for all ?x (P ?X SV-2)
(skolemize '(exist ?y (and (p ?x) (f ?y))))
;=> (AND (P ?X) (F SV-4))
(skolemize '(forall ?x (exist ?y (and (p ?x) (f ?y)))))
;=> (forall ?x (AND (P ?X) (F (SF-5 ?X))) 
```

我需要构建给定表达式控制外部是否存在的函数（使用`skolem-variable`及以上），然后用 skolem-variable 替换变量。`skolem-function`如果外部是一个 forall 并且存在，则该函数执行我上面解释的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:13:26.893

我刚刚浏览了关于 skolem 范式的 Wikipedia 文章，但是如果我做对了，每个存在都将成为一个 skolem 函数调用，其中绑定的普遍性作为参数（或者如果没有普遍性在范围内，则为 skolem 常数）。一种简单的方法是在递归地遍历表达式树时拥有一堆绑定的universal：

```
(defun skolemize (form &optional (universals nil))
  (cond ((null form) nil)                                  ; subtree done
        ((consp (car form))                                ; walk branches
         (cons (skolemize (car form) universals)
               (skolemize (cdr form) universals)))
        ((eq (car form) 'forall)                           ; universal binding
         (list 'forall
               (cadr form)
               (skolemize (caddr form)                     ; skolemize body
                          (cons (cadr form) universals)))) ; new var on the stack
        ((eq (car form) 'exist)                            ; existential binding
         (subst (if universals                             ; substitute variables
                    (cons (gentemp "SF-") universals)      ; with skolem function
                    (gentemp "SV-"))                       ; with skolem constant
                (cadr form)
                (skolemize (caddr form) universals)))
        (t (cons (car form) (skolemize (cdr form) universals))))) 
```

请注意，这只是为了让您入门——我既没有深入研究这个主题，也没有针对性能或优雅进行真正的测试或优化。此外，它将接受格式错误的输入，例如`(skolemize '(forall (foo bar)))`.

你的例子：

```
CL-USER> (skolemize '(exist ?x (p ?x)))
(P SV-16)
CL-USER> (skolemize '(forall ?y (exist ?x (p ?x ?y))))
(FORALL ?Y (P (SF-17 ?Y) ?Y))
CL-USER> (skolemize '(exist ?y (forall ?x (p ?x ?y))))
(FORALL ?X (P ?X SV-18))
CL-USER> (skolemize '(exist ?y (and (p ?x) (f ?y))))
(AND (P ?X) (F SV-19))
CL-USER> (skolemize '(forall ?x (exist ?y (and (p ?x) (f ?y)))))
(FORALL ?X (AND (P ?X) (F (SF-20 ?X)))) 
```

测试更复杂的表达式：

```
CL-USER> (skolemize '(exist ?a
                      (forall ?b
                       (exist ?c
                        (forall ?d
                         (exist ?e (and (or (and (f ?a) (g ?b))
                                            (and (f ?c) (g ?d)))
                                        (or (and (f ?c) (g ?e))
                                            (and (f ?d) (g ?e))))))))))
(FORALL ?B
  (FORALL ?D (AND (OR (AND (F SV-15) (G ?B))
                      (AND (F (SF-16 ?B)) (G ?D)))
                  (OR (AND (F (SF-16 ?B)) (G (SF-17 ?D ?B)))
                      (AND (F ?D) (G (SF-17 ?D ?B))))))) 
```

# python - Django 静态文件导致 404

> ID：14799835
> 
> 赞同：8
> 
> 时间：2013-02-10T16:26:31.333
> 
> 标签：python, django

我已经检查了很多其他线程，它们无法使用 Django 中的静态文件应用程序提供静态内容，但还没有找到解决方案。

**设置.py**

```
STATIC_ROOT = '/opt/django/webtools/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    "/home/html/static",
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

**模板**

相关线路....

```
<img src="{{ STATIC_URL }}macmonster/img/macmonster-logo-blue.png" > 
```

**日志**

从日志看来路径是正确的，但可惜它仍然导致 404..

```
[10/Feb/2013 16:19:50] "GET /static/macmonster/img/macmonster-logo-blue.png HTTP/1.1" 404 1817
[10/Feb/2013 16:19:51] "GET /static/macmonster/img/macmonster-logo-blue.png HTTP/1.1" 404 1817 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T17:29:39.437

对于静态文件的本地服务，**如果您没有**设置任何形式的静态文件收集，并且如果您正在运行 Django 1.3+，我相信这是您在引用`settings.py`静态文件时应该看起来的方式

```
# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
 '/Users/cupcake/Documents/Workspaces/myDjangoProject/someOtherFolderPerhapsIfYouWant/static',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

请注意，我已经忽略了`STATIC_ROOT`这里。这是因为我还不需要“刚刚”收集静态文件。

静态文件的收集是为了缓解（拼写）为多个不同的静态文件文件夹提供服务的问题，因此他们合并了`staticfiles`通常用于帮助解决此问题的应用程序。这样做的目的（在文档中进行了描述）是从您的所有应用程序中获取所有静态文件并将它们放入一 (1) 个文件夹中，以便在将您的应用程序投入生产时更轻松地提供服务。

所以你的问题是你“错过了”这一步，这就是为什么你在尝试访问它们时得到 404。 **因此，您需要使用静态文件的绝对路径，**即。在 mac 或 unix 系统上，它应该看起来像这样：

```
'/Users/cupcake/Documents/Workspaces/myDjangoProject/someOtherFolderPerhapsIfYouWant/static', 
```

此外，您可以简化并“修复”需要像我用于说明的硬编码路径并这样做

```
PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))

STATICFILES_DIRS = (
    PROJECT_ROOT + '/static/'
) 
```

这也将解决可移植性问题。一个很好的 Stackoverflow 帖子可以在[这里找到](https://stackoverflow.com/questions/12094401/django-1-4-static-file-not-found-error?rq=1)

我希望我说得更清楚一点，否则如果我错了，请纠正我^_^！

要在较新版本的 Django 中收集和管理静态文件，请阅读此链接静态文件 [应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T07:03:52.147

改变

```
STATIC_URL = '/static/' 
```

放

```
STATIC_URL = 'http://yourdomain.com/static/' 
```

这令人难以置信，但是，经过 1 小时的搜索，解决方案解决了我的静态文件问题并`STATIC_ROOT`从`STATICFILES_DIRS`. `STATICFILES_DIRS`仅用于收集模块中的所有静态并将其存储在`STATIC_ROOT`.

# ruby-on-rails - 没有 Rails 的 Active Record：如何将任意散列传递给 Active Record

> ID：14799837
> 
> 赞同：3
> 
> 时间：2013-02-10T16:26:43.530
> 
> 标签：ruby-on-rails, ruby, activerecord, hash

我正在尝试将以下哈希传递给 Active Record 以保存：

```
[{
  "id"=>"WSECOUT", 
  "realtime_start"=>"2013-02-10", 
  "realtime_end"=>"2013-02-10", 
  "title"=>"Reserve Bank Credit - Securities Held Outright", 
  "observation_start"=>"1989-03-22", 
  "observation_end"=>"2013-02-06", 
  "frequency"=>"Weekly, Ending Wednesday", 
  "frequency_short"=>"W", 
  "units"=>"Billions of Dollars", 
  "units_short"=>"Bil. of $", 
  "seasonal_adjustment"=>"Not Seasonally Adjusted", 
  "seasonal_adjustment_short"=>"NSA", 
  "last_updated"=>"2013-02-08 08:32:33-06", 
  "popularity"=>"42", 
  "notes"=>"The amount of securities held by Federal Reserve Banks. This quantity is the cumulative result of permanent open market operations: outright purchases or sales of securities, conducted by the Federal Reserve. Section 14 of the Federal Reserve Act defines the securities that the Federal Reserve is authorized to buy and sell."
  }] 
```

我的 ruby​​ 类如下所示：

```
require 'rubygems'
require 'active_record'  
require 'logger'

ActiveRecord::Base.establish_connection(  
:adapter => "mysql2",  
:host => "localhost",  
:username => "root",
:password => "*********",
:database => "fred"  
)  

class Series < ActiveRecord::Base

  attr_accessible :id, :realtime_start, :realtime_end, :title, :observation_start,
              :observation_end, :frequency, :frequency_short, :units, :units_short, 
              :seasonal_adjustment, :seasonal_adjustment_short, :last_updated, 
              :popularity, :notes

end

require_relative 'wsecout'
@series = Wsecout.new.getSeries "wsecout"
@series = @series['series']

test = Series.create(@series) 
```

@series 变量包含哈希。当我运行此代码时，该对象被创建为 mysql 中的行，但是字段中没有数据。我知道我在这里错过了一步，但我无法弄清楚是哪一步。另外，我的 Hash 包含一个 id 会不会有问题，因为 Active Record 创建了它自己的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:30:54.253

回答您的第二个问题“将“id”映射到名为 :series_id 的新字段”：

```
@series['series'][0]['series_id'] = @series['series'][0]['id']
@series['series'][0].delete('id') 
```

或者，如果您想根据某些条件更改多个键，则在 if 条件中使用它，如下所示：

```
@series['series'][0].keys.each do |k|
  if(k == 'id')
    @series['series'][0]['series_id'] = @series['series'][0][k]
    @series['series'][0].delete(k)
  end
end 
```

这将遍历散列的每个键，如果键匹配，`id`则添加另一个`series_id`具有相同值的键并删除`id`.

# c++ - 为什么这个例子会给出分段错误？

> ID：14799839
> 
> 赞同：0
> 
> 时间：2013-02-10T16:26:45.670
> 
> 标签：c++, pointers, segmentation-fault

有谁知道为什么这会给我一个分段错误？

细胞.h

```
struct cell{
  bool filled;
  bool isParent;
  //float px,py,pz,s;
  bool cx,cy,cz;
  unsigned char r,g,b;
  vect norm;
  struct cell* parent;
  struct cell* child;

  cell(bool cxx=0, bool cyy=0, bool czz=0);

  void open_read(string);
}; 
```

细胞.cpp

```
cell::cell(bool cxx, bool cyy, bool czz)
{
  cell childs[8];     // these lines creates a segmentation fault
  child = &childs[0]; // these lines creates a segmentation fault
  cx=cxx;
  cy=cyy;
  cz=czz;
  norm = vect(0,0,0);
  norm.normalize();
  isParent=false;
  filled=true;
} 
```

如果这是错误的方法，任何人都可以指出我如何存储指向 child[8] 的第一个元素的单个指针而不是存储 8 个指针的正确方向，因为它非常占用内存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T16:29:00.207

您正在尝试设置无限递归。的构造函数`cell`分配一个由 8 个对象组成的数组`cell`，其构造依次调用`cell`具有默认参数的构造函数。

每个堆栈帧都会消耗空间，并且由于未终止的调用递归，堆栈迟早会变得大于其大小限制，最终导致分段错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T16:30:00.190

当您创建一个s 时`cell`，它`cell`的构造函数会再创建一个包含 8 个 s 的数组`cell`。每个都创建一个 8 s 的数组，`cell`依此类推。你有无限递归。

尚不清楚为什么您的构造函数会创建一个 8 `cell`s 的数组 - 您只获取其中第一个的地址。`cell`每个人在构建时自动创建自己的孩子也是没有意义的。这将导致`cell`s 的无限血统。

更不用说，在您的构造函数结束时，数组`cells`将被销毁，您将留下一个指向无效对象的指针。

# java - 将 ArrayList 中创建的对象传递给另一个类的另一个方法

> ID：14799840
> 
> 赞同：0
> 
> 时间：2013-02-10T16:26:55.420
> 
> 标签：java, object, arraylist

我有一个名为 AirMain 的类，我在其中接受了航空公司信息用户的输入。我有另一个名为 Airline 的类，其中创建了构造函数以将用户输入存储为 Airline 对象，然后将其存储到名为“info”的 ArrayList 中。

我有另一个名为“query”的 ArrayList 存储来自 Airline 类的对象，但与“info”ArrayList 的参数不同。

当我尝试将这两个 ArrayList 传递给另一个类方法（在 Airline 类中命名为 earlyDepart()）时，我收到错误“找不到符号；位置：类对象”。这是一个相当长的代码，所以请参见下面的传递给另一个类的其他方法的快照以及发生错误的点。

请告诉我如何将包含对象的 Arraylist 传递给另一个类进行处理。提前致谢！

**AirMain 类中的代码**

```
ArrayList <Airline> info = new ArrayList<Airline>();
ArrayList <Airline> query = new ArrayList<Airline>();
Airline createAirline = new Airline (fromCity, toCity, departTime, arriveTime, cost);
info.add(createAirline);
Airline createQuery = new Airline(type, fromCity, toCity);
query.add(createQuery);
if (query.get(i).getType() == 1) { query.get(i).earliestDepart(info);  }//end of if type 1 
```

**航空公司舱位代码**

```
public void earliestDepart(ArrayList info){
String retrieve = info.get(i).getFromCity();//error kicks into this statement 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:27:59.927

您需要`earliestDepart()`像这样修改方法中的 info 参数：

```
public void earliestDepart(List<Airline> info){
String retrieve = info.get(i).getFromCity();//error kicks into this statement 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:29:50.783

*按值传递给`earliestDepart`方法。*

```
public void earliestDepart(List<Airline> infoList){...} 
```

# excel - 将 COUNT 更改为 COUNTIF 以计算多张工作表中的 100 个值

> ID：14799841
> 
> 赞同：1
> 
> 时间：2013-02-10T16:27:03.433
> 
> 标签：excel, count, countif

我在工作中继承了一个电子表格，我想对其进行编辑以满足我的需要。它目前使用以下公式计算各个工作表中的行值（包括 0 值）。

=IF(ISERROR(COUNT(INDIRECT($A5&"F"&MATCH(D$1,INDIRECT($A5&"B1:B13"),0)&":IV"&MATCH(D$1,INDIRECT($A5&"B1:B13) "),0)))),"",COUNT(INDIRECT($A5&"F"&MATCH(D$1,INDIRECT($A5&"B1:B13"),0)&":IV"&MATCH(D$1,INDIRECT ($A5&"B1:B13"),0))))

现在，我想修改这个公式，使它只计算 =100 的值。我认为这意味着使用 COUNTIF 函数，但我无法完全解决，因为它对我来说是一个相当复杂的公式。希望这对于知道自己在做什么的人来说是一个简单的解决方法。

是为了考试成绩。在行中说某人有 100、90、100、90、100。它目前正在带回 5 的结果。我想更改它，以便它带回 3 的结果，因为有三个 100 分数。显然，它有点复杂，因为它在一系列工作表（1 人 = 1 工作表）上工作，并且在其中一些工作簿上为多达 20 人带来了结果。

提前致谢。真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:20:44.483

如果您有`Excel 2007`或以后有，那么您可以使用此公式计算相关范围内的 100 -`IFERROR`用于错误检查目的，即

`=IFERROR(COUNTIF(INDEX(INDIRECT($A5&"F1:IV13"),MATCH(D$1,INDIRECT($A5&"B1:B13"),0),0),100),0)`

或在早期版本的 Excel 中尝试

`=LOOKUP(9.9E+307,IF({1,0},0,COUNTIF(INDEX(INDIRECT($A5&"F1:IV13"),MATCH(D$1,INDIRECT($A5&"B1:B13"),0),0),100)))`

# css - 我在 fullcalendar 上的弹出窗口被剪掉了

> ID：14799842
> 
> 赞同：2
> 
> 时间：2013-02-10T16:27:17.870
> 
> 标签：css, twitter-bootstrap, fullcalendar

我将 Bootstrap 2.2 弹出框与 FullCalendar 结合使用，但是当它们出现在边缘附近时，它们会被日历的 CSS 剪裁 - 请参阅此处的小提琴：http: [//jsfiddle.net/nzxyY/6/](http://jsfiddle.net/nzxyY/6/)

日历有几个包含内容的 div，但我怀疑这是罪魁祸首：

```
.fc-view {
   width: 100%;
   overflow: hidden;
 } 
```

我可以使用 CSS hack 来使弹出框避免溢出：FullCalendar 对其内容施加的隐藏约束吗？将弹出框绑定到内部日历 DOM 元素（例如滚动）是有好处的，但它目前有被剪裁的缺点。我尝试将上述规则更改为溢出：可见，但这不起作用。感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:57:40.520

还有其他问题可以通过相同的解决方案来解决，但是每次的上下文都有很大的不同：

*   [使引导弹出窗口重叠](https://stackoverflow.com/q/14633364/1478467)
*   [Bootstrap 弹出框剪辑到包含 div 的范围](https://stackoverflow.com/q/13261393/1478467)

确定的解决方案是升级到最新的 2.3.0 版本，或者[将此差异（github）](https://github.com/twitter/bootstrap/commit/d594d6377a7e9cda399c25a450b0d27df704d939#L0L129)应用到您的 jQuery 工具提示插件（因为 popover 继承了工具提示行为）。

然后您可以使所有弹出框的行为相同（主要是因为您将弹出框初始化委托给另一个框架）：

```
$.fn.popover.defaults.container = 'body'; 
```

检查[固定的小提琴](http://jsfiddle.net/Sherbrow/nzxyY/7/)。

* * *

或者您可以通过 popover 使用选项 popover ：

```
$('.popover').popover({
    container: 'body'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:35:17.820

`overflow: hidden`您可以使用 clearfix代替使用。Bootstrap[已经包含一个](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L12)（作为 LESS 混合）。

```
/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/*
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */

.clearfix {
    *zoom: 1;
} 
```

# php - Python 和 PHP 的密码保护

> ID：14799847
> 
> 赞同：0
> 
> 时间：2013-02-10T16:27:42.500
> 
> 标签：php, python, passwords, password-protection, password-encryption

我目前正在构建一个网络/桌面应用程序。用户可以在线创建帐户并在线或通过桌面客户端登录。客户端将在 Python 中构建并导出为 exe。

我想在在线发送密码之前对其进行加密，因为该站点没有 https 连接。

这样做的最佳方法是什么，以便散列密码在 python 和 php 中是相同的？或者他们是更好的方式还是我应该只投资https？

我尝试过使用简单的散列，但 php`md5("Hello")`会返回与 python 不同的东西`hashlib.md5("Hello").hexdigest()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T16:33:35.693

忘记这个想法。在客户端对密码进行散列，将散列发送到服务器，然后将其与存储的散列进行比较，相当于将明文密码存储在数据库中，因为**散列成为密码**。

> 还是我应该只投资https？

是的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:36:33.313

你能分享一个代码示例来重现这个，以及两个不同的输出吗？

他们应该并且确实创建了相同的输出。

您还应该使用 HTTPS 或使用质询响应机制（这是许多邮件服务器使用的示例：[http](http://en.wikipedia.org/wiki/CRAM-MD5) ://en.wikipedia.org/wiki/CRAM-MD5 ）

加密密码没有安全作用——任何人都可以截获密码并重新使用它。密码仍然保密，但任何人仍然可以登录，就好像他们知道密码一样。

# ios - iOS CAKeyframeAnimation 奇怪的图片旋转

> ID：14799851
> 
> 赞同：0
> 
> 时间：2013-02-10T16:28:01.063
> 
> 标签：ios, cakeyframeanimation

我在 CAKeyFrameAnimation 上遇到了一个奇怪的问题。

这是代码：

```
//Inside the selector method of the button
CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
[anim setDelegate:self];
anim.path = racetrack.path;
anim.rotationMode = kCAAnimationRotateAuto;
anim.repeatCount = 0;
anim.duration = 10.0;

[carBtn.layer addAnimation:anim forKey:@"race"]; 
```

动画效果很好。按下 carBtn（带有汽车背景图像的按钮）时会出现问题。按钮的图像无缘无故旋转了 180°（至少对我来说没有缘由）。创建动画后，我必须使用这行代码自己旋转按钮

```
carBtn.transform = CGAffineTransformMakeRotation(M_PI); 
```

...但是一两秒钟（在动画开始之前），汽车正对着它的初始位置。按钮是这样创建的：

```
UIImage* car = [UIImage imageNamed:@"car_image"];
carBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[carBtn setFrame:CGRectMake(startPoint.x-45, startPoint.y-33, macchina.size.width, macchina.size.height)];
[carBtn setBackgroundImage:car forState:UIControlStateNormal];
[carBtn setBackgroundImage:car forState:UIControlStateHighlighted];
[carBtn addTarget:self action:@selector(carPressed) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:carBtn]; 
```

这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:15:27.817

它是这样工作的：视图的 X 轴沿路径的切线对齐。

如果您明确应用的轮换对您有用，我会坚持下去。否则你会在[这里](https://stackoverflow.com/questions/9468707/ios-cakeyframeanimation-rotationmode-on-uiimageview)找到一个完整的解决方案。

# selenium - 无法使用 selenium 在 Gmail/Yahoomail 中调用撰写屏幕

> ID：14799852
> 
> 赞同：0
> 
> 时间：2013-02-10T16:28:10.653
> 
> 标签：selenium, gmail, selenium-rc, yahoo-mail

![在此处输入图像描述](../Images/c0135cbdd1520407ea9932580f64f54d.png)有人可以帮助我如何使用 selenium 命令在 Gmail/Yahoomail 中调用撰写屏幕。

尝试使用以下命令。

```
selenium.click("href=compose link");
selenium.click("name=Compose"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:25:46.023

您可以使用`Selenium IDE`. 只需在 SIDE 中记录整个场景并执行以下步骤

`1\. GoTo Options
2\. Format
3\. Click the Java/ Junit4/ Remote Control option.`

现在，您可以看到您所做的场景的确切 Selenium RC 代码，并将其复制并粘贴到任何 IDE 中并使用它。

一个明智的建议是，selenium RC 已被弃用，RC 没有进一步的发展。未来已来`Selenium WebDriver`。请合并到 WebDriver。

**编辑：**

试试这个代码：

```
 //Assume driver is initialized properly some where else.
    driver.get("http://www.gmail.com/");
    driver.findElement(By.id("Email")).clear();
    driver.findElement(By.id("Email")).sendKeys("UserName");
    driver.findElement(By.id("Passwd")).clear();
    driver.findElement(By.id("Passwd")).sendKeys("Password");
    driver.findElement(By.id("signIn")).click();
    //Add some wait. Use Selenium Implicit wait and Explicit wait.
    Thread.sleep(5000);
    driver.findElement(By.xpath("//div[2]/div/div/div/div[2]/div/div/div/div/div")).click();
    driver.findElement(By.id("gbi4t")).click();
    driver.findElement(By.id("gb_71")).click(); 
```

它可能会帮助你。

侧面屏幕截图：

![在此处输入图像描述](../Images/ffbc68788e8298ddf13e05554f68692b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T07:10:18.413

您可以使用 webdriver 并轻松地从 gmail/yahoo 调用撰写邮件屏幕。请看下面的代码：

`from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.support.ui import Select import selenium.webdriver.support.ui as ui from selenium.common.exceptions import NoSuchElementException import unittest, time, re, os import HTMLTestRunner import xlrd`

```
class gmail(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://gmail.com"
        self.verificationErrors = []

    def test_gmail_login(self):
        driver=self.driver
        driver.get(self.base_url +"/")
        driver.find_element_by_xpath("//*[@id='Email']").clear()
        print "1\. enter user name in username text field"
        driver.find_element_by_xpath("//*[@id='Email']").send_keys("xxxx")
        driver.find_element_by_xpath(".//*[@id='Passwd']").clear()
        print "2.enter password in password text field"
        driver.find_element_by_xpath(".//*[@id='Passwd']").send_keys("xxxx")
        print " 3\. Click signIn button. it has redirect to corresponding gmail home page"
        driver.find_element_by_xpath("//*[@id='signIn']").click()
        print "click compose mail button"
        driver.find_element_by_xpath("//*[@id=':b7']/div/div").click()
        driver.save_screenshot('/compose.png')
        try:
         driver.find_element_by_xpath("//*[@class='z0']/div").click() 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:20:48.380

使用 Java 在 Selenium-RC 中调用 Gmail 的撰写屏幕，如下所示：

```
selenium.click("//div[text()='COMPOSE']"); 
```

使用 Java 在 Selenium-RC 中调用 Yahoomail 的撰写屏幕，如下所示：

```
selenium.click("id=global_compose_top"); 
```

以下是 gmail 的 Selenium WebDriver Java 代码：

```
driver.findElement(By.xpath("//div[text()='COMPOSE']")).click(); 
```

以下是 yahoo mail 的 Selenium WebDriver Java 代码：

```
driver.findElement(By.id("global_compose_top")).click(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-29T06:45:58.347

使用硒 wrbdriver

[http://ngowda.blogspot.in/2014/01/uploading-file-in-e-commerce-site-using.html](http://ngowda.blogspot.in/2014/01/uploading-file-in-e-commerce-site-using.html)

这里是在 gmail 中撰写邮件的完整代码

# c - 为什么对 c 代码的这种微小更改会导致执行时间的巨大差异？

> ID：14799859
> 
> 赞同：2
> 
> 时间：2013-02-10T16:29:15.883
> 
> 标签：c, performance

unix 中的以下代码需要约 9 秒的`time`命令报告。

```
int main()
{
    double u = 0;
    double v = 0;
    double w = 0;
    int i;
    for (i = 0;i < 1000000000;++i) {
        v *= w;
        u += v;
    }
    printf("%lf\n",u);
} 
```

我不明白为什么当我更改时执行时间几乎`v *= w;`翻了一番`v *= u;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:34:19.237

当您更改`v *= w`为`v *= u`then 时，这两个语句之间存在相互依赖关系。因此，第一条语句必须在执行之前完成，`u += v`这可能是提高性能的原因，因为编译器无法并行执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:33:07.253

可能是因为编译器看到 w 从未被修改过，因此可以编译为常量，而变量 u 已修改，因此必须拥有自己的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:32:19.347

编译器优化 v*= w; 到 v = 0; 并且可能 u += v 到 u = 0; 所以这些操作永远不会发生。

这是我做的测试。每个版本进行 10 次并取平均值。

```
for (i = 0;i < 1000000000;++i) {
    v *= w;
    u += v;
} 
```

4.0373 秒

```
for (i = 0;i < 1000000000;++i) {
    v *= u;
    u += v;
} 
```

7.3733 秒

```
for (i = 0;i < 1000000000;++i) {
    v *= 0;
    u += 0;
} 
```

4.0149 秒

# python - 函数中的预定义描述符如何工作？

> ID：14799860
> 
> 赞同：6
> 
> 时间：2013-02-10T16:29:17.540
> 
> 标签：python, function, metaprogramming, descriptor

Python 函数有一个描述符。我相信在大多数情况下我不应该直接使用它，但我想知道这个功能是如何工作的？我对这样的对象尝试了一些操作：

1.  ```
    def a():
        return 'x' 

    a.__get__.__doc__
    'descr.__get__(obj[, type]) -> value' 
    ```

    什么是obj，什么是类型？

2.  ```
    >>> a.__get__()
    TypeError:  expected at least 1 arguments, got 0

    >>> a.__get__('s')
    <bound method ?.a of 's'>

    >>> a.__get__('s')()
    TypeError: a() takes no arguments (1 given) 
    ```

    当然，我不能用不带参数的函数来做这个技巧。只需要调用带参数的函数吗？

3.  ```
    >>> def d(arg1, arg2, arg3):
            return arg1, arg2, arg3
    >>> d.__get__('s')('x', 'a')
    ('s', 'x', 'a') 
    ```

    为什么第一个参数直接由`__get__`，而其他所有参数都由返回的对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T16:52:29.250

`a.__get__`是一种将函数*绑定*到对象的方法。因此：

```
class C(object):
    pass

def a(s):
    return 12

a = a.__get__(C) 
```

大致相当于

```
class C(object):
    def a(self):
        return 12 
```

（虽然这样做不是一个好主意。一方面，`C`不会知道它有一个名为 的绑定方法`a`，您可以通过 来确认`dir(C)`。基本上，`__get__`只是绑定过程的一部分）。

这就是为什么您不能对不带参数的函数执行此操作 - 它必须采用`self`传递特定实例的第一个参数（传统上）。

# php - Joomla 1.5，修改内容模块（文章编辑/创作）

> ID：14799862
> 
> 赞同：0
> 
> 时间：2013-02-10T16:29:39.030
> 
> 标签：php, file-upload, joomla, joomla1.5

我想请教您修改Joomla 1.5 文章编辑/创建页面的正确方法。我需要的是附加字段（例如在编辑器下），它接受文件输入，将文件上传到某个文件夹（在提交/保存本文之后）并将其服务器路径放入数据库（db 列已经存在）。

本来是标题图，我已经做了展示部分，但是不知道怎么让用户自己选择和提交图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:16:23.767

有许多可用的插件可以为您处理这个问题。我只会安装其中一个。请参阅[扩展目录](http://extensions.joomla.org)。搜索附件以开始使用。

# ruby - 如果正则表达式不匹配，Ruby 分配固定值的简单方法？

> ID：14799864
> 
> 赞同：0
> 
> 时间：2013-02-10T16:29:44.247
> 
> 标签：ruby

我有这个：

```
author = m.match(/Author: (\w*)/)[1].strip 
```

它有时会给我一个“未定义的方法[]”异常

如果正则表达式不匹配，分配固定值（例如“”或“未找到”）的最佳方法是什么？也许救援？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:33:35.227

最好的方法是：

```
author = m[/regex/, 1] || "not found" 
```

鲁比真的不可思议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T16:33:45.087

```
def find_author s
  s =~ /Author: (\w*)/ ? $1 : 'not found'
end

find_author 'Author: Joe' # => "Joe"
find_author 'No author here' # => "not found" 
```

# linux - Redhat Cluster 客户围栏失败

> ID：14799869
> 
> 赞同：0
> 
> 时间：2013-02-10T16:30:07.413
> 
> 标签：linux, redhat, high-availability

我已经为围栏创建了一个空的 shell 脚本，如下所示

```
#!/bin/bash
echo "success: myfence $2"
exit 0 
```

我已将其添加到 cluster.conf 中，但是在测试我关闭以太网时，我收到了以下错误。

```
Feb 10 07:58:36 node2 fenced[2006]: fenced 3.0.12.1 started
Feb 10 07:58:36 node2 fenced[2006]: failed to get dbus connection
Feb 10 08:06:52 node2 fenced[1982]: fenced 3.0.12.1 started
Feb 10 08:06:52 node2 fenced[1982]: failed to get dbus connection
Feb 10 08:11:38 node2 fenced[1928]: fenced 3.0.12.1 started
Feb 10 08:11:38 node2 fenced[1928]: failed to get dbus connection
Feb 10 08:20:07 node2 fenced[1928]: fencing node node1.example.com
Feb 10 08:20:07 node2 fenced[1928]: fence node1.example.com dev 0.0 agent none result: error no method
Feb 10 08:20:07 node2 fenced[1928]: fence node1.example.com failed
Feb 10 08:20:10 node2 fenced[1928]: fencing node node1.example.com
Feb 10 08:20:10 node2 fenced[1928]: fence node1.example.com dev 0.0 agent none result: error no method
Feb 10 08:20:10 node2 fenced[1928]: fence node1.example.com failed
Feb 10 08:20:13 node2 fenced[1928]: fencing node node1.example.com
Feb 10 08:20:13 node2 fenced[1928]: fence node1.example.com dev 0.0 agent none result: error no method
Feb 10 08:20:13 node2 fenced[1928]: fence node1.example.com failed 
```

它不工作！在这个阶段我的集群挂在围栏上......但是当我运行`fence_ack_manual`它时它可以工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:08:50.020

我自己解决了。在 cluster.conf 中添加了以下几行并繁荣！！！

```
<clusternodes>
                <clusternode name="CentOS1" nodeid="1" votes="1">
                         <fence>
                                <method name="1">
                                        <device nodename="CentOS1" name="myfence"/>
                                </method>
                        </fence>
                </clusternode>

                <clusternode name="CentOS2" nodeid="2" votes="1">
                        <fence>
                                <method name="2">
                                        <device nodename="CentOS2" name="myfence"/>
                                </method>
                        </fence>
                </clusternode>
        </clusternodes> 
```

# php - 从 htaccess 重写规则中排除特定文件

> ID：14799873
> 
> 赞同：1
> 
> 时间：2013-02-10T16:30:48.210
> 
> 标签：php, wordpress, .htaccess

我的根目录中安装了 WordPress，它的 htaccess 重写规则阻止我访问`example.com/file.php`，而是重定向到`/`.

我想从重写规则中排除一个特定文件。

现有的htaccess：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

# add a trailing slash to /wp-admin
RewriteRule ^wp-admin$ wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^(wp-(content|admin|includes).*) $1 [L]
RewriteRule ^(.*\.php)$ $1 [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:33:10.267

您需要添加

```
RewriteCond $1 !^(file\.php) 
```

IE

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^(wp-(content|admin|includes).*) $1 [L]
RewriteCond $1 !^(file\.php) [L]
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# c# - 阅读 C# 中的介绍 - 如何防止它？

> ID：14799876
> 
> 赞同：25
> 
> 时间：2013-02-10T16:31:09.177
> 
> 标签：c#, .net, multithreading

MSDN Magazine 中的一篇[文章](http://msdn.microsoft.com/en-us/magazine/jj883956.aspx)讨论了 Read Introduction 的概念，并提供了一个可以被它破坏的代码示例。

```
public class ReadIntro {
  private Object _obj = new Object();
  void PrintObj() {
    Object obj = _obj;
    if (obj != null) {
      Console.WriteLine(obj.ToString()); // May throw a NullReferenceException
    }
  }
  void Uninitialize() {
    _obj = null;
  }
} 
```

注意这个“可能会抛出 NullReferenceException”的评论——我从来不知道这是可能的。

所以我的问题是：我怎样才能防止阅读介绍？

我也非常感谢编译器决定引入读取的确切解释，因为文章不包括它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T16:18:04.777

让我试着通过分解来澄清这个复杂的问题。

> 什么是“阅读介绍”？

“阅读介绍”是一种优化，其中代码：

```
public static Foo foo; // I can be changed on another thread!
void DoBar() {
  Foo fooLocal = foo;
  if (fooLocal != null) fooLocal.Bar();
} 
```

通过消除局部变量进行优化。编译器可以推断，*如果只有一个线程*，那么`foo`和`fooLocal`是同一件事。编译器被明确允许进行任何在单个线程上不可见的优化，即使它在多线程场景中变得可见。因此允许编译器将其重写为：

```
void DoBar() {
  if (foo != null) foo.Bar();
} 
```

现在有一个竞争条件。如果`foo`检查后从非空变为空，则可能`foo`第二次读取它，第二次读取它可能为空，然后会崩溃。从诊断崩溃转储的人的角度来看，这将是完全神秘的。

> 这真的会发生吗？

正如您链接到的文章所指出的：

> 请注意，您将无法在 x86-x64 上的 .NET Framework 4.5 中使用此代码示例重现 NullReferenceException。阅读介绍很难在 .NET Framework 4.5 中重现，但在某些特殊情况下确实会出现。

x86/x64 芯片具有“强”内存模型，并且 jit 编译器在这方面并不激进；他们不会做这个优化。

如果你碰巧在弱内存模型处理器上运行你的代码，比如 ARM 芯片，那么所有的赌注都没有了。

> 当您说“编译器”时，您指的是哪个编译器？

我的意思是 jit 编译器。C# 编译器从不以这种方式引入读取。（这是允许的，但实际上从不这样做。）

> 在没有内存屏障的线程之间共享内存不是一种不好的做法吗？

是的。这里应该做一些事情来引入内存屏障，因为*的值`foo`可能已经是处理器缓存中的一个过时的缓存值*。我更喜欢引入内存屏障是使用锁。您也可以制作 field `volatile`，或使用`VolatileRead`，或使用其中一种`Interlocked`方法。所有这些都引入了内存屏障。（`volatile`仅介绍“半栅栏”仅供参考。）

仅仅因为存在内存屏障并不一定意味着不执行读取引入优化。但是，对于影响包含内存屏障的代码的优化，抖动要小得多。

> 这种模式还有其他危险吗？

当然！假设没有阅读介绍。**你仍然有一个竞争条件**。如果另一个线程`foo`在检查后设置为 null，并且还修改了**将要使用的****全局状态`Bar`**怎么办？现在您有两个线程，其中一个认为它`foo`不为 null 并且全局状态可以调用`Bar`，另一个线程认为相反，并且您正在运行`Bar`。这是灾难的秘诀。

> 那么这里的最佳做法是什么？

首先，*不要跨线程共享内存*。程序主线内部有两个控制线程的想法一开始就很疯狂。它本来就不应该是一件事。使用线程作为轻量级进程；给他们一个独立的任务来执行，它根本不与程序主线的内存交互，只是用它们来分出计算密集型的工作。

其次，如果您要跨线程共享内存，则*使用锁来序列化对该内存的访问*。如果没有争用锁，那么锁很便宜，如果你有争用，那么就解决这个问题。众所周知，低锁定和无锁定解决方案很难正确解决。

第三，如果您要跨线程共享内存，那么**您调用的每个涉及共享内存的方法都必须在面对竞争条件时保持稳健，或者必须消除竞争**。这是一个沉重的负担，这就是为什么你不应该首先去那里。

我的观点是：阅读介绍很可怕，但坦率地说，如果您编写的代码可以轻松地跨线程共享内存，那么它们是您最不担心的。首先要担心一千零一件事。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-10T17:20:18.930

您不能真正“保护”免受阅读介绍，因为它是编译器优化（当然，使用没有优化的调试版本除外）。优化器将维护函数的单线程语义已经有很好的记录，正如文章指出的那样，这可能会在多线程情况下导致问题。

也就是说，我对他的例子感到困惑。在 Jeffrey Richter 的书 CLR via C#（在本例中为 v3）中，在事件部分他介绍了这种模式，并指出在上面的示例片段中，在 THEORY 中它不起作用。但是，在 .Net 存在的早期，这是 Microsoft 推荐的模式，因此与他交谈的 JIT 编译器人员表示，他们必须确保这种代码段永远不会中断。（尽管出于某种原因，他们总是可能认为值得打破 - 我想 Eric Lippert 可以阐明这一点）。

最后，与文章不同的是，Jeffrey 提供了在多线程情况下处理此问题的“正确”方法（我已使用您的示例代码修改了他的示例）：

```
Object temp = Interlocked.CompareExchange(ref _obj, null, null);
if(temp != null)
{
    Console.WriteLine(temp.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:39:09.863

我只是略读了这篇文章，但似乎作者正在寻找的是您需要将`_obj`成员声明为`volatile`.

# apache - 允许在 htaccess php、apache 中拒绝规则？

> ID：14799877
> 
> 赞同：1
> 
> 时间：2013-02-10T16:31:14.867
> 
> 标签：apache, .htaccess

这两个之间有什么区别：

命令拒绝，允许来自 111.111.111.111 的拒绝允许来自所有

order allow,deny deny from 111.111.111.111 allow from all

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:42:41.507

是的，在某种`deny,allow`情况下，如果在拒绝链和允许链中都进行了匹配，则默认为第二个链。反之亦然，在某种`allow,deny`情况下，如果两条链都匹配，则第二条链优先。

[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order)中有一个很好的表格

# javascript - 从广播接收消息后，Angular.js 视图未更新

> ID：14799881
> 
> 赞同：3
> 
> 时间：2013-02-10T16:31:32.420
> 
> 标签：javascript, angularjs

在 angular.js 中保存资源后，我想广播更改以便可以更新列表视图。

```
 function EnvironmentCtrl($rootScope,  $scope, $location, $routeParams, environmentService) {
      environmentService.get($scope, $routeParams.id);
      $scope.id = $routeParams.id

      $scope.save = function(){
         $scope.environment.$save(function(data) {
           $rootScope.$broadcast("model-update");
         });
      } 
    }

   function NavController($scope, $http, $routeParams, environmentService) {
     environmentService.list($scope);
     $scope.$on("model-update", function(){
       environmentService.list(function(data){
         $scope.environments = data;
         console.log("update called", $scope.environments); 
       });
     });
   } 
```

调用 EnvironmentCtrl.save 时，这些控制器之间的通信正常。console.log 被调用，服务返回给回调的数据在 $scope 中被正确设置。

我的服务的相关部分如下所示：

```
 services.factory('environmentService', [ '$resource', function($resource) {
   var environmentService = {};

   environmentService.list = function(callback) {
     var url = "/service/environment/"
     $resource(url).query(function(data) {
       callback(data);
     });
    }
    return environmentService;
  } ]); 
```

我的观点如下：

```
 <li data-ng-repeat="env in environments">
    <a href="#/environment/{{env.id}}">{{env.name}}</a>
  </li> 
```

但在刷新之前不会更新。

这一切都在“角度范围内”（据我所知），我原以为它会“正常工作”。我试过从回调中调用 $digest 。$apply 抱怨摘要已经在进行中。

谁能告诉我为什么视图没有更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:07:30.043

我同意在事件到达时模型应该已经更新。它看起来像角度的错误。

在那之前，如果这对您有用，您可以在 $timeout 内发出事件。

```
$timeout(function() {$rootScope.$broadcast("model-update");}, 0); 
```

# iphone - NSData/UIImage 转字符串

> ID：14799882
> 
> 赞同：1
> 
> 时间：2013-02-10T16:31:37.803
> 
> 标签：iphone, ios, objective-c, xcode, base64

是否可以将 NSData/UIImage 数据表示形式作为 JPEG 转换为字符串，通过 HTTP 发送到 PHP 文件以将此字符串保存在数据库中，然后稍后在应用程序中检索它并将其转换回 NSData/ UIImage 对象？

我已经尝试过 Base64 编码库，但由于图像无法在 HTML 页面上正确显示，因此 base64 似乎无效。

有什么建议么？

编辑。

我正在使用以下库：

[http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)

并按以下方式转换：

```
 NSData *imageData = UIImageJPEGRepresentation(MyImage.image, 90);
[Base64 initialize];
NSData *encoded = [Base64 encode:imageData];
NSLog(@"%@",encoded); 
```

这确实会产生很多 BASE64，但是当我将其保存到文件并尝试查看它时，我只是在 Chrome 中得到错误加载图像 [?]。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:02:07.970

将对象编码`NSData`为 base 64 的目的是，您可以将数据表示为可以更轻松地存储或传输的字符串。然后，您需要将 base 64 编码字符串解码回`NSData`. 然后可以使用此数据创建一个新的`UIImage`. 您的服务器需要进行此解码才能取回原始数据。

你的代码有错误。这一行：

```
NSData *encoded = [Base64 encode:imageData]; 
```

应该：

```
NSString *encoded = [Base64 encode:imageData]; 
```

请注意，您返回的是字符串，而不是数据。

您评论说您将编码字符串写入文件然后无法查看图像。当然不是。如果要将图像数据写入文件以便文件实际上可以作为图像查看，则不要先对数据进行编码。将原始图像数据写入文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T17:44:06.350

You need to import Base64.h

You can directly use like this way:

```
 UIImage *image = _btnaddCountryIcon.imageView.image;
 NSData *imageData = UIImagePNGRepresentation(image);
 NSString *base64 = [Base64 encode:imageData]; 
```

directly you can convert to NSString. This code works fine for me.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T16:45:25.010

您可以像这样将图像转换为字符串首先将您的 UIImage 转换为 NSData 然后使用 encodeBase64WithData 将该 ata 转换为字符串

```
NSString *imageOne = [self encodeBase64WithData:[imageDict objectForKey:@"ImageOne"]]; 
```

并再次像这样字符串到 UIImage：

```
[UIImage imageWithData: [self decodeBase64WithString:[registerDataDict objectForKey:@"imageOne"]]]; 
```

# java - 创建大十进制对象时出错

> ID：14799888
> 
> 赞同：1
> 
> 时间：2013-02-10T16:32:30.837
> 
> 标签：java, bigdecimal

我使用以下代码并添加了对大小数的支持，并且编译器在大小数的创建对象上显示错误，`new BigDecimal(nextRandom)`我该如何克服它？

所有其他类型都按预期工作。

```
public static SwitchInputType<?> switchInput(final String typeName, final String memberName, final int cnt, boolean random) {
...
} else if (typeName.equals("decimal") || (typeName.equals("java.math.BigDecimal"))) {
    BigDecimal nextRandom = RandomizeValues.nextRandom("9");
    return new SwitchInputType<BigDecimal>(new BigDecimal(nextRandom));<-HERE IS THE ERROR

} else if (typeName.equals("boolean")) {
    boolean randomBoolean = RandomizeValues.nextRandom();
    return new SwitchInputType<Boolean>(new Boolean(randomBoolean));
} 
```

错误是：

```
The constructor BigDecimal(BigDecimal) is undefined 
```

我应该如何克服这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T16:35:32.233

你正在创造

```
new BigDecimal(nextRandom) 
```

哪里`nextRandom`是`BigDecimal`。这是没有意义的。

换行

```
return new SwitchInputType<BigDecimal>(new BigDecimal(nextRandom)); 
```

和

```
return new SwitchInputType<BigDecimal>(nextRandom); 
```

并检查您是否仍然遇到相同的错误。

在我看到构造函数之前不能说别的`SwitchInputType`

# nhibernate - 使用可能的鉴别器映射遗留数据库

> ID：14799890
> 
> 赞同：0
> 
> 时间：2013-02-10T16:32:38.737
> 
> 标签：nhibernate

我正在尝试映射旧数据库。我需要实施我认为应该成为鉴别器的东西。我的问题是鉴别器似乎仅在当前行上有要区分的列或公式时才起作用。对于我的情况，没有实际的区别，数据要么连接到一个表（如果存在），如果不存在，则连接到另一个表。为了使事情变得更加复杂，该表使用复合键。这是一个示例（在我编造时可能过于简单化了）：

鉴于我的代码

```
public class SomeTable {
  public virtual int DataID { get; set; }
  public virtual int EmployeeOrCustomer { get; set; }
  public virtual Person Person { get; set; }
  public virtual int SomeValue { get; set; }
}

public abstract class Person {
  public virtual int ID { get; set; }
  public virtual string Name { get; set; }
}

public class Employee : Person {
  public virtual int EmployeeNumber { get; set; }
}

public class Customer : Person {
  public virtual int CustomerNumber { get; set; }
} 
```

还有我的数据

```
-SomeTable-
DataID(K)  EmployeeOrCustomer(K)  SomeValue
     1                      1           100
     1                     22           222

-Employee-
ID            Name      EmployeNumber
 1        Joe Blow              12345

-Customer-
ID             Name    CustomerNumber
22        ACME Inc.              4242 
```

我的映射：

```
<class name="SomeTable" abstract="true">
  <composite-id>
    <key-property name="DataID" />
    <key-property name="EmployeeOrCustomer" />
  </composite-id>
  <property name="SomeValue" />
  <!--   ?????? -->
</class>
<class name="Employee">
  <id name="ID" />
  <Property name="EmployeeNumber">
</Class>
<class name="Customer">
  <id name="ID" />
  <Property name="CustomerNumber">
</Class> 
```

我的期望

```
DataID: 1,  SomeValue: 100  Person: { Employee: EmployeeNumber: 12345 }
DataID: 1,  SomeValue: 222, Person: { Customer: CustomerNumber: 4242 } 
```

我考虑过加入 2 个表并将合并的表用作连接，但 2 个表有很大不同。此外，我无法修改架构，因此不能选择添加鉴别器列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:12:34.887

我认为您正在寻找的是联合子类继承映射

```
<class name="Person" abstract="true">
  <id name="Id">
    <generator class="assigned"/>
  </id>

  <union-subclass table="Employee" name="Employee">
    <property name="Name"/>
    <property name="EmployeeNumber"/>
  </union-subclass>

  <union-subclass table="Customer" name="Customer">
    <property name="Name"/>
    <property name="CustomerNumber"/>
  </union-subclass>
</class>

<class name="SomeTable" abstract="true">
  <composite-id>
    <key-property name="DataID" />
    <key-many-to-one name="Person" column="EmployeeOrCustomer" />
  </composite-id>
  <property name="SomeValue" />
</class> 
```

请注意，不需要额外的属性`EmployeeOrCustomer`。

# syntax-highlighting - Notepad++ 在任何 <% 的 Mako Templates 标记之后丢失 HTML 标记突出显示。如何禁用此行为？

> ID：14799891
> 
> 赞同：4
> 
> 时间：2013-02-10T16:32:46.510
> 
> 标签：syntax-highlighting, notepad++, mako, scintilla

让我附上一张图片来解释：

![在此处输入图像描述](../Images/5e36d921e78fc0658319de8772d88cb6.png)

因此，在 Mako ( `<%block`, `<%include`, ets.) 的任何标记之后，它会使后续的 HTML 代码完全变成黑色。我不知道该怎么办。`Options -> Style Options`调整没有帮助。

我试图通过参与评论来禁用文件`asp`中的语法着色。我得到的结果是已经从 . 但是后面的代码还是黑的。`stylers.xml``<LexerType name="asp" desc="asp" ext="asp">....</LexerType>``asp``Options -> Style Options`

正如[Mako 网站所说](http://www.makotemplates.org/trac)，可以设置`lexer.html.mako=1`. `SciTEGlobal.properties`我这样做并尝试将`SciTEGlobal.properties`其放入`notepad++.exe`生活的目录或`Application Data\Notepad++`目录中。它没有帮助。

如何设置 Notepad++ 至少将 Mako 标签视为 HTML 文档中的简单字符串？不影响任何其他 HTML 标记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-08T18:35:26.140

安装“Python Script”插件后，附加到文件“startup.py”，如下所示：

```
# Enable HTML Mako Template Syntax Highlighting
def enableMako(args):
    editor.setProperty('lexer.html.mako', '1')
notepad.callback(enableMako, [NOTIFICATION.READY, NOTIFICATION.BUFFERACTIVATED])
enableMako({}) 
```

默认文件位置：C:\Program Files\Notepad++\plugins\PythonScript\scripts\startup.py

由于 mako 选项是每个缓冲区的，因此每次我们开始查看一个时都必须激活它。我们通过注册回调函数“enableMako”来做到这一点。

另外，为了在打开 Notepad++ 后立即生效，我们需要在以下菜单中将“Initialisation”设置为“ATSTARTUP”：Plugins -> Python Script -> Configuration

最后，要自动将此语法突出显示应用于 .mako 文件，请转到 Settings -> Style Configurator，从语言列表中选择“HTML”，并将 mako 附加到“User ext”。场地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T15:45:27.503

这是我使用的解决方法：

1) 我遵循了使用 Python Scripts Plugin ( [http://npppythonscript.sourceforge.net/](http://npppythonscript.sourceforge.net/) ) 的建议。

2) 在名为 CompareClearResultWrapper.py 的 Python 脚本中包装“比较清除结果命令”（代码在最后）。

3）通过Plugin Configuration为脚本CompareClearResultWrapper添加一个MenuItem

4) 将插件命令映射到快捷键 CTRL+ALT+D。

5）如果你比较右视图中的最后一个文件，似乎有一些问题..

这是脚本 CompareClearResultWrapper 的代码：

```
 def clearResultWrapper():
        console.clear()
        console.show()
        for f in notepad.getFiles():
            console.write( "filename, bufferID, index, view = %s\r\n" % str( f ) )
        bufferID_Lang = []
        for view in ( 0, 1 ):
            index = notepad.getCurrentDocIndex( view )
            notepad.activateIndex( view, index )
            fname = notepad.getCurrentFilename()
            bufferID = notepad.getCurrentBufferID()
            langType = notepad.getLangType( bufferID )
            bufferID_Lang.append( ( view, index, bufferID, langType ) )
            console.write( "view, fname, index, bufferID, langType = %s\r\n" % str( ( view, fname, index, bufferID, langType ) ) )
        notepad.runPluginCommand( 'Compare', 'Clear Results' )
        for ( view, index, bufferID, langType ) in bufferID_Lang:
            notepad.setLangType( LANGTYPE.TXT, bufferID )    # RESET
            notepad.setLangType( langType, bufferID )        # Re-Imposta 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T01:45:00.040

`<!-- %> -->`是一种解决方法，但在这里是你最好的朋友。由于某种原因，我花了一段时间才偶然发现它。

```
<%include file="foo.html" args="bar='baz'" /> 
```

打破它下面的格式。但

```
<%include file="foo.html" args="bar='baz'" /> <!-- %> --> 
```

使格式正确。SciLexer 认为不匹配的 <% 是一个永无止境的页面指令，但您似乎可以通过在评论中关闭指令来混淆它（！）

我正在使用记事本++ v5.3.1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T11:04:45.687

我猜，

```
<% should have %> 
```

并尝试 NotePad++ 6.2，最新版本 6.3.3 有很多错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-03T21:32:13.660

快速解决：

1.  Ctrl+a
2.  Ctrl+c
3.  Ctrl+v

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-21T23:03:11.697

正如您所指出的，SciLexer 认为无与伦比`<%`的评论是永无止境的。SciLexer 有一个解决方法，但 Notepad++ 似乎不允许您为其 SciLexer 设置任意属性。但是我非常坚持使用 Notepad++，这个问题使得 Mako 模板很难编辑，所以我通过`<%`完全省略它来解决它。

`<%`然后我将一个函数绑定到在运行时呈现的 TemplateLookup 对象：

```
template_lookup = TemplateLookup( ... ) # your usual lookup declaration here

# Work around horrible Notepad++ display issue with Mako's <% tags
import types
def generate_mako_tag(lookup, context, tag_body):
  template = Template("<%" + tag_body + "/>")
  template.lookup = lookup
  return template.render_context(context)
template_lookup.tag = types.MethodType(
  generate_mako_tag, template_lookup, TemplateLookup
) # this binds the function to the lookup object 
```

在该 TemplateLookup 提供的模板中，而不是

```
<%include file="component.html") /> 
```

我写的

```
<% context.lookup.tag(context, "include file='component.html'") %> 
```

它看起来仍然像 ASP 注释，但它已关闭，因此问题消失了。

它不适用于某些声明性 Mako 标签（例如`<%page`）。

嵌套的引号有时会很烦人。特别是在早期版本的 Notepad++ 上，单引号有问题，但是[有一个补丁可以解决这个问题](https://stackoverflow.com/questions/4480787/notepad-highlights-everything-that-comes-after-in-html-erb-files)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-22T00:41:25.993

我有个类似的问题。使用比较工具后，语法高亮消失。任何文件扩展名都会发生这种情况。我主要使用批处理脚本。

我确实有一个解决方案可以重新添加颜色：您可以右键单击并转到“插件命令”，然后转到“使用语法突出显示复制文本”。这（至少对我而言）为整个文件重新进行了所有着色。

但是每次打开文件或比较文件或执行导致颜色丢失的操作后都必须这样做是很烦人的。

# javascript - 如何在谷歌地图上打开首都圈

> ID：14799900
> 
> 赞同：1
> 
> 时间：2013-02-10T16:33:43.717
> 
> 标签：javascript, google-maps-api-3

我正在使用谷歌地图进行我一直在做的测验。我已经从地图上关闭了标签和其他东西，这样人们就看不到名字并为测验选择正确的国家。我现在想制作另一个与首都有关的关卡。所以我想在地图上显示谷歌地图在首都名称下方显示的小圆圈，以便有人可以准确点击它，但我不确定我应该打开什么才能让它们再次出现。任何帮助表示赞赏！

这是我关闭的代码：

```
 var styles = [
  {
   featureType: "administrative",
               elementType: "labels",
               stylers: [
                 { visibility: "off" }
    ]
     },
 {
           featureType: "poi",
           elementType: "labels",
           stylers: [
             { visibility: "off" }
           ]
   }
 ,{
    featureType: "road",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  }
]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:40:09.500

使用[造型向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

看起来像添加这个：

```
{ "featureType": "administrative.locality", "elementType": "labels.icon", "stylers": [ { "visibility": "on" } ] } 
```

添加小圆圈。看起来没有任何方法可以指定国会大厦。也许您可以创建一个带有这些点的[KmlLayer](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)或[FusionTablesLayer 。](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)这是一个使用 FusionTablesLayer 和非洲首都（和国家）的[示例。](http://www.geocodezip.com/v3_FusionTables_AfricaMap_kml.html)

[显示国会大厦或世界的概念证明 FusionTables 地图](https://www.google.com/fusiontables/data?docid=1yV2xdwoCJYeKPy_5DyWYwaTd90wNh5tn3nX9_LE#map%3aid=3)（未验证）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:31:20.070

好吧我找到了。。

```
 {
   featureType: "administrative.locality",
               elementType: "labels.icon",

               stylers: [
                 { visibility: "on" }
    ]
     } 
```

唯一的一点是，它展示了很多大城市，而不仅仅是首都。如果有人知道更接近的方法，那将有所帮助。

# java - 引用另一个文件中的内部类时找不到符号

> ID：14799902
> 
> 赞同：4
> 
> 时间：2013-02-10T16:33:45.740
> 
> 标签：java

所以我有这个我正在处理的项目，我需要为它创建自己的 ArrayList 类。我已经定义了所有方法，但是当我编译时，我的三个方法不断收到“找不到符号”错误。我有一个看起来像这样的界面：

```
public interface FBList {

    public int size();

public void insert(int i, Person person);

public Person remove(int i);

public Person lookUp(int i);

/**
*A class that defines a person
**/
public class Person {
    private String id;
    private long phoneNum;

    public Person(String personID, long phoneNum){
        id = personID;
        phoneNum = phoneNum;
    }
} 
```

如您所见，我在那里有一个内部类。我正在尝试在实现此接口的其他文件中使用该类。目前，我的另一个文件中给我的问题的三种方法如下：

```
/**
    * A method to expand the size of the array if the array is too small
    * @param i  One minus the place in the list where the component will be inserted
    * @param Person The person to be put in the list
    **/
    protected void expandInsert(int i, Person person){
        Person[] temp = new Person[arrayList.length * 2];
        for(int index = 0; index < temp.length; index++){
            if( i != index){
                if(i > 0)
                    temp[index] = arrayList[index];
                if(i == 0)
                    temp[index + 1] = arrayList[index];
            }
            else{
                temp[i] = person;
                i = 0;
                index--;
            }
        }
        arrayList = temp;
    }

/**
    * Inserts a new component at the end of a list by creating a new list longer that then last
    * @param i The place in the list where the component will be inserted
    * @param Person The person to be added to the list
    **/

protected void insertAtEnd(int i, Person person){
    Person[] temp = new Person[arrayList.length + 5];
    for(int index = 0; index < temp.length; index++){
        if(index != i){
            temp[index] = arrayList[index];
        }
        else{
            temp[index] = person;
        }
    }
    arrayList = temp;
}

/**
* Shrinks the array by one by removing one component from the array
* @param i The index to be removed
**/

protected void shrink(int i){
    Person[] temp = new Person[arrayList.length - 1];
    for (int index = 0; index < arrayList.length ; index++ ) {
        if (index < i) {
            temp[index] = arrayList[index];
        }
        else if (index == i){
            removedPerson = arrayList[index];
            temp[index] = arrayList[index + 1];
        }
        else{
            temp[index - 1] = arrayList[index];
        }
    }
} 
```

所有这些文件都在同一个文件夹中，所以那里不应该有问题。我正在使用终端通过键入“javac FBArrayList.java”进行编译。我的编译器输出如下所示：

```
 FBArrayList.java:106: cannot find symbol
symbol  : method expandInsert(int,FBList.Person)
location: class FBList.Person[]
            arrayList.expandInsert(i, person);
                     ^
FBArrayList.java:108: cannot find symbol
symbol  : method insertAtEnd(int,FBList.Person)
location: class FBList.Person[]
            arrayList.insertAtEnd(i, person);
                     ^
FBArrayList.java:118: cannot find symbol
symbol  : method shrink(int)
location: class FBList.Person[]
        arrayList.shrink(i);
                 ^
3 errors 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T16:35:21.013

由于`Person`是一个内部类，它的名字需要用外部类的名字来*限定：*

```
protected void expandInsert(int i, FBList.Person person){
    FBList.Person[] temp = new FBList.Person[arrayList.length * 2];
    ...
    // and so on...
} 
```

**编辑：**删除了创建类的建议，`static`因为该类嵌套在*interface*中。对于嵌套在类中的类，该建议是必需的；对于接口，`static`是可选的。

# java - 从包含 HTTP 标头的字符串中提取值

> ID：14799903
> 
> 赞同：4
> 
> 时间：2013-02-10T16:33:49.043
> 
> 标签：java, http

我正在寻找一种更好的方法来从包含 HTTP 标头的字符串中提取数据。例如，我想从字符串的内容长度部分获取数字 160：“Content-Length: 160\r\n”。

似乎 HTTP 标头中的所有数据都以名称、冒号和空格开头，值之后紧跟 '\r' 和 '\n' 字符。

目前我正在这样做：

```
int contentLengthIndex = serverHeader.lastIndexOf("Content-Length: ");
int contentLastIndex = serverHeader.length()-1;
String contentText = serverHeader.substring(contentLengthIndex + 16, contentLastIndex);
contentText = contentText.replaceAll("(\\r|\\n)", "");
int contentLength = Integer.parseInt(contentText); 
```

但它看起来很乱，它只适用于在字符串末尾获取“Content-Length”。是否有更好更通用的解决方案来从包含 HTTP 标头的字符串中提取值，该标头可以调整为同时获取 int 值或 String 值？

我还应该提到，连接需要能够在请求后将数据返回给浏览器，据我了解，这使我无法获得使用 HttpURLConnection 的好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:44:10.447

一个快速的解决方案是：

```
new Scanner(serverHeader).useDelimiter("[^\\d]+").nextInt()); 
```

如果要创建`Hashtable`标题的另一种方式：

```
 String[] fields = serverHeader.trim().split(":");

 String key = fields[0].trim();
 String value = fields[1].trim(); 
```

我不知道你为什么要写这本手册，已经有 API 了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:52:58.497

使用类 java.net.HttpURLConnection

编辑：还有方法 URLConnection.getContentLength() 和 URLConnection.getContentLengthLong()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:36:39.617

您是否尝试过从字符串中删除所有非数字字符？

`serverHeader = serverHeader.replaceAll("[^\\d.]", "");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T17:05:00.683

如果您使用`Socket`类来读取`HTTP`数据，我建议您使用`HttpURLConnection`它，因为它为您提供了方便的方法来解析`Header Fields`.

它具有`public Map getHeaderFields()`可用于获取所有字段的方法。

如果您想要一个开始使用的指南，`HttpURLConnection`您可以[在此处查看](http://alvinalexander.com/blog/post/java/how-open-url-read-contents-httpurl-connection-java)。

# ruby - 用 ruby 替换文件的第一行或第 n 行

> ID：14799907
> 
> 赞同：0
> 
> 时间：2013-02-10T16:34:07.317
> 
> 标签：ruby, file

如何使用 ruby​​ 替换文本文件或 xml 文件的第一行？我在复制奇怪的 xml API 时遇到问题，需要在创建 XML 文件后编辑文档指令。我必须这样做很奇怪，但在这种情况下，这是必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:51:53.290

如果您正在编辑 XML，请使用专门为该任务设计的工具。`sub`,`gsub`如果正在操作的 XML 不受您的控制，则正则表达式不是好的选择。

使用[Nokogiri](http://nokogiri.org)解析 XML、定位节点并更改它们，然后发出更新的 XML。

SO上有很多例子展示了如何做到这一点，还有Nokogiri网站上的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:41:50.357

有几种不同的方法可以做到这一点：

1.  使用`ARGF`（假设您的 ruby​​ 程序将文件名作为命令行参数）

    ```
    ruby -e "puts ARGF.to_a[n]" yourfile.xml 
    ```

2.  定期打开文件然后读取`n`行

    ```
    File.open("yourfile") { |f|
      line = nil
      n.times { line = f.gets }
      puts line
    } 
    ```

    这种方法对内存的占用较少，因为一次只考虑一行，也是最简单的方法。

3.  使用`IO.readlines()`（仅当整个文件适合内存时才有效！）

    ```
    IO.readlines("yourfile")[n] 
    ```

    `IO.readlines(...)`会将文件中的每一行读入一个数组。

在`n`上述所有示例中`nth`，您的文件所在的行。

# iphone - 将图像添加到邮件时出错 - MFMailComposeViewController

> ID：14799908
> 
> 赞同：2
> 
> 时间：2013-02-10T16:34:10.867
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试使用 MFMailComposeViewController 发送已添加到项目中的图像。

我在模拟器中尝试过，效果很好，我还可以在文本字段中看到图像，但是当我尝试发送邮件时，我在控制台上收到以下错误：

> 2 月 10 日 16:22:02 markuss-macbook-pro.speedport.ip RMC Konus[1825]：CGImageCreate：无效图像大小：0 x 0。

我的代码：

```
//Get the Image
UIImage *image = [UIImage imageNamed:@"image.png"];

NSData *imageData = UIImagePNGRepresentation(image);

//Create the Mail View
MFMailComposeViewController *mailCV = [[MFMailComposeViewController alloc] init];

[mailCV setMailComposeDelegate:self];

[mailCV addAttachmentData:imageData mimeType:@"image/png" fileName:@"exGraphic.png"];

//Show the View Controller
[self presentViewController:mailCV animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T03:13:03.477

问题只出现在模拟器中。我在许多不同的设备上检查了这些代码，它仍然可以正常工作。所以我会说，这是模拟器的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:04:39.063

UIImagePNGRepresentation 的返回值（来自苹果文档）-

> 包含 PNG 数据的数据对象，如果生成数据时出现问题，则返回 nil。如果图像没有数据或底层 CGImageRef 包含不受支持的位图格式的数据，此函数可能会返回 nil。

这意味着检查您的图像是否支持将其转换为具有 png 格式的 NSData，因为您在这里收到 NULL。您的错误`CGImageCreate: invalid image size: 0 x 0.`表明它是 NULL。
通过更改图像检查。也不要使用检查，`[UIImage imageNamed:@""]`因为这种方法有很多缺点。

另一件事，您已将 image.png 图像转换为 NSData 并发送另一个图像 exGraphic.png 作为附件，检查它

# python - 将参数传递给不断运行的 Python 应用程序

> ID：14799911
> 
> 赞同：0
> 
> 时间：2013-02-10T16:34:19.787
> 
> 标签：python

我在 Linux 上有一个不断运行的 Python 代码，经常需要将外部数据输入到这个代码中，以便 Python 代码可以更改文件。如何构建 Python 代码以便它接收这些参数以进行进一步处理？

我在传出参数上找到了一些东西，[使用管道运行外部程序并在 python 中传递参数](https://stackoverflow.com/questions/6998955/running-external-program-using-pipes-and-passing-arguments-in-python)

但是寻找即将到来的参数

灵活地传递参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:42:07.163

您需要某种进程间通信。

例如，您可以提供程序的标准输入。您可以通过阅读来阅读它`sys.stdin`，但它需要启动您的进程的程序将其句柄交给另一个进程。

另一种方法是创建某种[套接字](http://docs.python.org/3/library/socket.html)。这更具可扩展性，允许在程序在另一台机器上运行时连接到程序，并允许非 Python 进程轻松与您的进程通信。

# javascript - 调整大小时元素错位（使用 max-width:100% 缩放相对于窗口大小）

> ID：14799913
> 
> 赞同：0
> 
> 时间：2013-02-10T16:34:42.693
> 
> 标签：javascript, jquery, html, css, slider

我正在使用`max-width: 100%; height: auto;`我的所有`<img>`元素和我的`image slider wrapper`.

调整浏览器窗口的大小时，图像会正确缩放，但许多周围的元素不会跟随并错位。一旦刷新页面或在图像滑块中加载下一个图像，它们将自我纠正。有任何想法吗？

[演示](http://www.nobodyfilm.org)- 缩放窗口，第 25 行的 css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:06:05.163

Pikachoose 库在每个动画上设置一些元素的大小。

```
<div class="pika-stage" style="height: 355px;">

<div class="pika-aniwrap" style="position: absolute; top: 0px; left: 0px; width: 835px;"> 
```

这就是为什么当下一个动画发生时一切都会自行修复的原因。您可以查看源代码并复制动画调整大小的代码并将其放入 $(window).resize 事件处理程序中。查看 Pikachoose 的文档，似乎他们有一个 goto 方法。

你可以这样做：

```
$(window).resize(function(){$('#pikame').data('pikachoose').GoTo(3)}) 
```

其中索引 3 是当前活动幻灯片。您可能希望使用一种超时形式，并且只调用一次以提高性能。

```
var resizeSlider = null

$(window).resize(function(){
  if(resizeSlider) clearTimeout(resizeSlider)
  resizeSlider = setTimeout(function() {
     $('#pikame').data('pikachoose').GoTo(3)
  }, 300)
}) 
```

这应该可以在最后一个 window.resize 事件后 300 毫秒触发 goto。

希望这能给你一些想法。

# compiler-construction - 程序分析和单调函数

> ID：14799914
> 
> 赞同：1
> 
> 时间：2013-02-10T16:34:54.247
> 
> 标签：compiler-construction, code-analysis, static-analysis

有人可以在执行程序分析时解释单调函数的目的吗？

我目前正在阅读 Hankin 的“程序分析原理”，但不太了解它的目的。

根据定义，单调函数是任何函数，使得对于集合 S 中的所有元素 x 和 y，如果 x <= y => f(x) <= f(y)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:23:30.840

[Knaster-Tarski 不动点定理](http://en.wikipedia.org/wiki/Knaster%E2%80%93Tarski_theorem)说明如下：

> 令 L 为完全格，令 f : L → L 为保序函数。那么L中f的不动点集也是一个完全格。

由于 L 中 f 的不动点集是一个完全格，因此 L 中存在 f 的最小不动点。此外，可能存在无限多个其他不动点。

为什么固定点对程序分析很重要？如果格 L 超过抽象程序状态，则循环语义的固定点 f 在逻辑上表示归纳不变量，或者在集合中表示特定程序位置处的一组程序状态，以便从该位置执行程序程序位置从那组状态中的一个状态开始返回到同一位置，将产生那组状态中的一个状态。这些状态集（或归纳不变量）是抽象解释试图找到的。

对于抽象解释的直观描述，我强烈推荐论文 Cousot, P. 和 Cousot, R.: [Static Determination of Dynamic Properties of Programs](http://www.di.ens.fr/~cousot/COUSOTpapers/ISOP76.shtml)；ISOP 1976。它早于“著名的” [Cousot 和 Cousot '77](http://www.di.ens.fr/~cousot/COUSOTpapers/POPL77.shtml)论文，但在高等数学方面的泥潭较少。

# java - Egit 找不到私有 GitHub 存储库

> ID：14799916
> 
> 赞同：0
> 
> 时间：2013-02-10T16:35:00.763
> 
> 标签：java, eclipse, git, github, egit

我刚刚注册了一个 GitHub 微计划并创建了我的第一个**私人仓库**：

```
https://github.com/myproj/repo.git 
```

（这不是真正的 URL）。然后我为 Eclipse (Juno) 安装了 Egit，重新启动并尝试导入`repo.git`. 当我这样做时，我会`Transport Error`从 Eclipse 中得到一个。以下是我为解决此问题而采取的确切步骤：

下载日食：

![在此处输入图像描述](../Images/2558a8c965cf621e8d50cdd59ca94827.png)

安装 EGit：

![在此处输入图像描述](../Images/f591c77ba0057aecd814ff6911adf858.png)

从 GitHub 导入项目：

![在此处输入图像描述](../Images/65006a08cdd1046e2858c9b2ebac6819.png)

当我尝试搜索我的存储库时，Eclipse 说找不到：

![在此处输入图像描述](../Images/30f48f7223f71f7df718a311ece569c0.png)

再试一次，通过`Git Repository Exploring`透视：

![在此处输入图像描述](../Images/ba7d619921a7af091533bf972a751287.png)

“传输错误”：？！？！

![在此处输入图像描述](../Images/e2dc7e7a59a19a6efec1605fa66c8471.png)

作为 Git、EGit 和 GitHub 的新手，我想知道是否发生了以下任何情况：

1.  我是否需要从我的 GitHub 帐户/repo 中做一些事情（例如，打开某些东西、调整设置等）以使其从 EGit 中“可搜索”？也许是 SSH 密钥？
2.  我需要以某种方式配置 Egit 吗？
3.  我是不是完全走错了路？

底线是：我*相信*这是安装 Eclipse 和 EGit 的“正常”方式，所以我很困惑为什么这不起作用。我想知道这是否是 EGit 和私人回购的一些错误？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:41:50.403

你也可以`Window > Open Perspective > Git Repository Exploring`尝试`right click > Paste Repository Path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:11:49.250

不确定这是否是问题，但您可以尝试添加 SSH 密钥。描述[在这里](https://help.github.com/articles/generating-ssh-keys)。

# ruby-on-rails - Rails Form_For Select 两用

> ID：14799918
> 
> 赞同：0
> 
> 时间：2013-02-10T16:35:09.757
> 
> 标签：ruby-on-rails, forms, form-for, html-select

我有添加新工作的表格。在我的表单上，我有一个选择下拉列表。我需要将新工作与客户相关联。以下效果很好。

```
<%= f.collection_select :customer_id, Customer.all, :id, :business_name %> 
```

但是，如果我还希望能够将 customer_id 发送到新表单怎么办？如上所述，我可以让表单的选择下拉菜单显示所有可能的客户，但是如果传入了 customer_id，它会自动选择我传入表单的 customer_id 吗？

url = ...工作/新

或者

url = ...jobs/new?customer_id=5

如果我没有很好地解释这一点，我深表歉意。提前致谢。--jc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:48:25.963

如果您`@customer`在控制器操作中声明实例变量，那么您可以使用 selected 选项：

```
<%= f.collection_select :customer_id, Customer.all, :id, :business_name, {:selected => @customer.id} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:41:47.340

如果请求参数中存在customer_id，我认为您可以通过填充您在控制器中创建的作业的customer_id 字段来实现此目的。这应该使该特定客户成为表单中最初选择的选项。

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

例如类似的东西。

```
if params[:customer_id].present?
    job.customer_id = params[:customer_id]
end 
```

# linq - mvc3 如何在 Tolist 中包含 Count 方法

> ID：14799928
> 
> 赞同：0
> 
> 时间：2013-02-10T16:36:20.930
> 
> 标签：linq, asp.net-mvc-3

我有一个 tolist 方法，可以在数据库内部进行更改，但我想**计算**我的**Where 子句为 true 的**次数。Tolist 有效，我如何添加计数..

```
 // the count to see how many times getid== x.RegistrationID 
List<Article> getprofile = (from x in db.Articles where getid == x.RegistrationID select x).ToList();
            foreach (var items in getprofile)
            {
                items.articlecount = items.articlecount + 1;
                db.Entry(items).State = EntityState.Modified;
                db.SaveChanges();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:25:45.407

seems like you store the number of articles in db.Article. why not stored in db.User. If you store in db.Article will be difficult because it must change Arcticle.articlecount in each user Articles. I think **your code above can cause uncertainty calculation.** Add article count each time you add article in AddArticle metode.

```
public void AddArticle(Article article)
    {
        ... your add new article code

        // increase articlecount at db.User
        db.Users.Where(c => c.userid == article.getid).FirstOrDefault().articlecount += 1;
        db.SubmitChanges();
    } 
```

or do not need to be stored, to get the count just:

```
int articlecount = db.Articles.Where(c => c.getid == RegistrationID ).Count(); 
```

I think it's safer.

# c++ - wchar_t 到字符串的转换

> ID：14799935
> 
> 赞同：0
> 
> 时间：2013-02-10T16:37:04.950
> 
> 标签：c++, string, wchar, readdirectorychangesw

我想将**strFileNotifyInfo[1].FileName** (Wchar_t) 转换为字符串，以便我可以看到文件路径。但我不能让它工作。

这是我的代码：

```
while(TRUE)
{
    if( ReadDirectoryChangesW( hDir, (LPVOID)&strFileNotifyInfo, sizeof(strFileNotifyInfo), FALSE, FILE_NOTIFY_CHANGE_LAST_WRITE || FILE_NOTIFY_CHANGE_CREATION, &dwBytesReturned, NULL, NULL) == 0)
    {
        cout << "Reading Directory Change" << endl;
    }
    else
    {

        cout << ("File Modified: ") << strFileNotifyInfo[1].FileName << endl;
        cout << ("Loop: ") << nCounter++ << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:15:47.177

您还应该记住[FileName 不是以 null 结尾的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364391%28v=vs.85%29.aspx)。

```
WCHAR* filename_w = strFileNotifyInfo[1].FileName;
DWORD filename_len = strFileNotifyInfo[1].FileNameLength;
std::string filename(filename_w, filename_w + filename_len);
std::cout << "File Modified: " << filename << std::endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:47:40.857

`wcout`在处理宽字符数据时使用。

```
std::wcout << L"File Modified: " << strFileNotifyInfo[1].FileName << std::endl; 
```

# c# - Windows 应用程序中不同大小的磁贴

> ID：14799940
> 
> 赞同：3
> 
> 时间：2013-02-10T16:37:39.563
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我知道我可以使用 ListView 和 GridView 来创建我想要的任何大小的“Tiles”/Items，但是如何创建不同大小的 Tiles 以在我的应用程序中使用？这需要使用 ListView 或 GridView。

我已经尝试了很多东西，但我完全不知道该怎么做。任何帮助都感激不尽。

如果我没有描述我想要正确实现的目标，这里有一张图片：

![在此处输入图像描述](../Images/fad406f249d7f9a4ce9dfef348a26ab2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:23:21.583

一种简单的方法是创建一个继承自 GridView 的新类并覆盖 PrepareContainerForItemOverride 方法。您可以在其中根据模型数据将 Column Span 和 RowSpan 设置为 Child 项。考虑您的模型类包含 Spanning 信息。

```
public class VariableGrid : GridView
{
    protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
    {
        ITileItem tile = item as ITileItem;
        if (tile != null)
        {
            GridViewItem griditem = element as GridViewItem;
            if (griditem != null)
            {
                VariableSizedWrapGrid.SetColumnSpan(griditem, tile.ColumnSpan);
                VariableSizedWrapGrid.SetRowSpan(griditem, tile.RowSpan);
            }
        }
        base.PrepareContainerForItemOverride(element, item);
    }
} 
```

更多信息：[http ://wpfplayground.blogspot.in/2013/03/different-sized-tile-items-in-winrt.html](http://wpfplayground.blogspot.in/2013/03/different-sized-tile-items-in-winrt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:15:26.307

您需要将列表的`ItemsPanel`/设置为所需的值，并将列表项的 / 设置为所需的值。我相信您可以在列表控件中执行此操作，最好通过右键单击 VS XAML 设计视图或 Blend 中的控件并选择“编辑其他模板”/“编辑生成的项目容器”来提取该控件。`ItemsPanelTemplate``VariableSizedWrapGrid``Grid.RowSpan``ColumnSpan``ItemContainerStyle`

# c# - 自动将成员和方法分配给某些类

> ID：14799941
> 
> 赞同：0
> 
> 时间：2013-02-10T16:37:44.987
> 
> 标签：c#

我有许多具有以下成员/方法的类：

```
private String name;
public String getName() { return name; }
public void setName(String name) { this.name = name; }
public bool isNamed(String name) { return getName().Equals(name); } 
```

每次我创建一个具有成员“名称”的新类时，我都必须重写所有这些。有没有办法一次编写方法并使它们适用于我想要的任何类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:43:12.907

您只需定义一个基类（您可以将其抽象化）：

```
public abstract class Named 
{
    public string Name { get; set; }    
} 
```

并从中继承：

```
public class Person : Named 
{ 
} 
```

你并不`isNamed`像在 C# 中那样真正需要，将字符串与`==`.

* * *

如果您的类已经从另一个不是 的类继承`Named`，您将不得不手动添加`Name`auto 属性或求助于[模拟多重继承](https://stackoverflow.com/a/178368/1106367)。

`Named`或者，您可以为每个基类创建一个特定的修改：

```
public abstract class NamedLifeForm : LifeForm
{ 
    public string Name { get; set; }
}

public class Person : NamedLifeForm
{
    // Person inherits both a Name and all relevant members of LifeForm
} 
```

另一种选择是创建一个通用包装器 ，`Named<T>`它有两个属性：`Name`和 的实例`T`。但这会使施工和访问变得麻烦，所以我不推荐它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T16:43:30.363

您的代码可以转换为：

```
public String Name { get;set;} 
```

然后你可以这样使用它：

```
nObject.Name = "Stefan";
if(nObject.Name == "Stefan"){
   // do something
}else{
   // do something else
} 
```

要自动应用于所有类，您只需将其设置为接口：

```
public interface INameable{
   public String Name {get;set;}
} 
```

这样做将允许您从其他重要的基类继承。

看这里的[例子](http://msdn.microsoft.com/en-us/library/64syzecx(v=vs.80).aspx)

```
class YourClass : INameable{
  //implementation
} 
```

现在，`YourClass`已自动插入“名称”属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T16:43:39.147

C# 有[AutoProperties](http://msdn.microsoft.com/en-us/library/bb384054.aspx)只是为了：

```
public String Name {get; set; } 
```

这处理了您谈到的 getName() 和 setName()。

用法：
设置值：`Name = "MyName;`
获取值：`string theName = Name;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:48:54.527

我建议阅读面向对象的编程。您可以为自己节省大量时间和精力（以及质问）。这是一个很好的入门[http://www.amazon.com/Beginning-Object-Oriented-Programming-Dan-Clark/dp/1430235306](https://rads.stackoverflow.com/amzn/click/com/1430235306)

要回答您的具体问题，您应该阅读有关继承的信息。它使您可以定义具有功能的“父”类。然后您可以继承“子”类并具有相同的功能。

[http://msdn.microsoft.com/en-us/library/ms173149(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173149(v=vs.80).aspx)

这是一个代码示例

```
public class PersonBase
{
     private String name;
     public String getName()
     {
          return this.name;
     }
     public void setName(string name)
     {
          this.name = name;
     }
     public bool isNamed(string name)
     {
           return this.name.Equals(name);
     }
}

public class Employee : PersonBase
{
} 
```

Employee 现在将拥有 PersonBase 定义的任何内容。

正如其他人指出的那样，您可以使用属性简化代码。此外，您应该在使用“this.name”之前检查空值。

这是指向哪些属性的链接：http: [//msdn.microsoft.com/en-us/library/x9fsa0sw (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/x9fsa0sw(v=vs.80).aspx)

简化的代码示例将是：

```
public class PersonBase
{
     public String Name { get; set; }
}

public class Employee : PersonBase
{
} 
```

我希望这可以帮助您为学习这些概念指明正确的方向。

# java - 如何检查数字是否为小数？

> ID：14799943
> 
> 赞同：4
> 
> 时间：2013-02-10T16:38:02.707
> 
> 标签：java, android

我创建了用于除数的 android 应用程序。

```
int a,b;

int result = a/b;

if (result==decimal){

Log.v ("result","your result number is decimal")

} else {

Log.v ("result","your result number is not decimal")

} 
```

如何检查是否`result`是小数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T16:40:26.483

使用模运算符检查是否有余数。

```
if(a % b != 0) Log.v("result", "The result is a decimal");
else Log.v("result", "The result is an integer"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:40:13.427

`int`不会保留小数，它们总是取结果的底数：例如`3 / 5 = 0`作为`int`. 也就是说，您可以使用模 ( `%`) 来确定小数是否被丢弃。

```
if(a % b > 0) { // 3 % 5 = 3
    // Decimal places will be lost
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-18T05:25:19.077

您可以使用模除法来检查数字是否为小数。假设您使用模数并将数字除以 1。如果它是整数（数学，而不是 java），则余数应该是 0。如果是小数，它应该是除 0 以外的任何值。例如，这个片段代码：

```
double number = 23.471;
if (number % 1 != 0)
    {
    System.out.print ("Decimal");
    }
else
    {
    System.out.print ("Integer");
    } 
```

在这种情况下，它将输出“十进制”，因为余数不等于 0。

现在这在一个完整的程序中会是什么样子？下面的简单程序应该允许输入数字，然后输出数字是整数（数学）还是小数。

```
import java.util.*;

public class TestClass
{
    public static void main (String [] args)
    {
        Scanner keyboard = new Scanner (System.in);
        System.out.print ("Enter a number: ");
        double number = keyboard.nextDouble ();
        if (number % 1 != 0)
        {
            System.out.print ("Your number is a decimal!");
        }
        else
        {
            System.out.print ("Your number is an integer!");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T17:00:35.150

您还可以检查字符串是否包含`.`.

```
String.parseString(decimalNumber).contains("."); 
```

# windows-phone - Windows Phone 多页与 1 页

> ID：14799944
> 
> 赞同：0
> 
> 时间：2013-02-10T16:38:08.317
> 
> 标签：windows-phone

我有一个需要大量页面的应用程序，但我想知道是否可以动态更改一个页面。

这些页面本质上将具有完全相同的对象，但是这些对象的属性会有所不同。例如：

每个页面都会有一个背景，但每个背景都会不同。每个页面都会有特定的图像，但所有图像的图像源都会不同。

我有一个包含这些属性的架构，我只需要知道如何输入与特定页面关联的对象。我猜像绑定之类的东西..

有没有人对如何实现这一目标有明确的想法？我不希望制作大量图像并不断添加东西......那太昂贵且耗时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:24:54.927

听起来[Windows Phone Pivot Control](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.pivot%28v=vs.105%29.aspx/)可能正是您正在寻找的。通过一些编码，您应该能够使用此控件完成您的目标。

# java - 如何读取实时文件 - 正在由另一个写入器线程写入

> ID：14799945
> 
> 赞同：0
> 
> 时间：2013-02-10T16:38:09.600
> 
> 标签：java, java-io

我想读取一个（应用程序连续写入的日志文件）

目前我有使用 RandomAccessFile（读取模式）的临时解决方案

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:41:50.430

Java 7 具有允许监听文件系统事件的新 API：http: [//java.dzone.com/news/how-watch-file-system-changes](http://java.dzone.com/news/how-watch-file-system-changes)

如果您坚持使用以前版本的 Java，请按照此处所述使用轮询：[Java 中的文件更改侦听器](https://stackoverflow.com/questions/494869/file-changed-listener-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:40:51.473

您可能可以`FileInputStream`用来读取此文件。另一个进程/线程正在写入它的事实应该不是问题，特别是如果它只将数据附加到文件中。

# javascript - Google App Engine Datastore - 将 HTML 中的键值传递给 js 函数

> ID：14799948
> 
> 赞同：0
> 
> 时间：2013-02-10T16:38:28.670
> 
> 标签：javascript, python, google-app-engine, google-cloud-datastore

使用 Jinja2 GAE 数据存储。
在我的模板 html javascript 脚本部分 - 我想调用由 onclick 触发的函数并传递 2 个参数。第二个参数是 GAE 键值。似乎检索到了密钥，但是当它作为参数传递时 - 我得到一个未定义的未捕获引用错误 - 几乎似乎它将它视为一个未定义的变量？

```
html_output += "<input class='filter_submit first_level' name='first_input' type='button' onclick='pass_hidden(1,{{one.key()}})' value='{{one.name1}}'></input><br />"; 
```

这是由 ONClick 调用的函数...

```
function pass_hidden(num,key_val) {

alert('in pass_hidden function');   
        var add_html;
        if (num=='1') {
            add_html += "<input type='hidden' value='key_val' name='second_input'></input><input type='hidden' value='1' name='heading_number'></input>";
        }

        else if (num=='2') {
            add_html +="<input type='hidden' value='key_val' name='second_input'></input><input type='hidden' value='2' name='heading_number'></input>";
        }

        else if (num=='3') {
            add_html +="<input type='hidden' value='key_val' name='second_input'></input><input type='hidden' value='3' name='heading_number'></input>";
        }

        add_html +="<input type='hidden' name='heading_type' value='subject'></input>";
        /*$("hidden_inputs").append(add_html);  */
        document.getElementById("hidden_inputs").innerHTML = add_html;

        document.userchoices.submit();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:55:56.093

如果我正确理解了您的问题，则将您的行替换为该行，它应该可以工作：

```
html_output += "<input class='filter_submit first_level' name='first_input' type='button' onclick='pass_hidden(1,\"%s\")' value='%s'></input><br />" % (one.key(), one.name1) 
```

您在 Python 代码中使用了模板变量并且无法正常工作，因此我使用字符串格式交换了它们。

您还应该始终查看生成模板的源代码，以确保其中的所有内容都符合预期。

# c# - 字符串格式不适用于 Eval

> ID：14799951
> 
> 赞同：5
> 
> 时间：2013-02-10T16:38:57.463
> 
> 标签：c#, asp.net, .net

我在 ASP.Net Gridview 中有以下货币格式表达式。尽管没有错误，但它不显示美元格式。这里缺少什么？

```
<%# String.Format("{0:C}", Convert.ToString(Eval("Amount")) ) %> 
```

**标记**

```
 <asp:GridView ID="grdFinancialAmount" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField HeaderText="Emp ID">
                <ItemTemplate>
                    <%# Eval("EmpID")%>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Amount">
                <ItemTemplate>
                    <%# String.Format("{0:C}", Convert.ToString(Eval("Amount")) ) %>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**代码背后**

```
protected void Page_Load(object sender, EventArgs e)
{
    Financial fin1 = new Financial { EmpID = 1, Amount = 5678 };
    Financial fin2 = new Financial { EmpID = 2, Amount = -111111 };

    List<Financial> accounts = new List<Financial>();
    accounts.Add(fin1);
    accounts.Add(fin2);

    grdFinancialAmount.DataSource = accounts;
    grdFinancialAmount.DataBind();

}

public class Financial
{
    public int EmpID { get; set; }
    public int Amount { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T16:55:47.160

为什么不做任何一个...

```
<%# String.Format("{0:C}", Eval("Amount") ) %> 
```

或者

```
<%# ((int)Eval("Amount")).ToString("C") %> 
```

在我看来，您尝试将 Amount 转换为字符串两次，并且您不能将字符串格式化为货币。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-08T09:12:00.483

`Eval`接受字符串格式，不需要这些技巧。

很简单：`<%# Eval("Amount", "{0:C}") %>`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-06T23:27:28.017

试试这个，对我有用。（.NET 4.5 C#，在网格视图中）

```
<%#Eval("Amout", "{0:C}").ToString()%> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-10T16:41:25.047

试试这个 ：

```
<%# String.Format("{0:C}", int.Parse(DataBinder.Eval(Container.DataItem, "Amount").ToString()))  %> 
```

# jquery - 如何在设定的时间后以及用户滚动过去某个点后使 DIV 出现

> ID：14799958
> 
> 赞同：0
> 
> 时间：2013-02-10T16:39:54.243
> 
> 标签：jquery, time, scroll, delay

我在 wordpress 中的每篇博文之后都有一个特殊的 DIV 内容框。

我很想找到一种方法让它只在用户向下滚动到博客文章之后出现，并且在 1 秒的设定时间延迟之后出现。

有没有办法用javascript或jquery做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:46:43.117

试试下面的代码。你可以在这个[jsfiddle中测试它](http://jsfiddle.net/QPrmd/28/)

```
 $("#div1").hide();
var windowHeight = $(window).height();
//alert(windowHeight);
var divHeight = $("#div0").height();
//var alert(divHeight);
var divBottomPos = $("#div0").offset().top + divHeight; //alert(divBottomPos);

var divIsShowing = false;
$(document).scroll(function () {
    var scrollPos = $(this).scrollTop();
    var bottomPageScrollPos = scrollPos + windowHeight;
    //alert(bottomPageScrollPos);
    if ((bottomPageScrollPos > divBottomPos) && (!divIsShowing)) {
        $("#div1").delay(1000).show(0);
        divIsShowing = true;
    } else if ((bottomPageScrollPos < divBottomPos) && (divIsShowing)) {
        $("#div1").hide();
        divIsShowing = false;
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:47:20.520

假设所有博文都有一类博文。为每一个添加`display:none`. 然后这是实现它的代码。

```
$(function(){
    var $blogs = $('.blogpost');

    $(window).scroll(function(){

     var windowTop = $(window).scrollTop();
     var windowBottom = windowTop + $(window).height();

        $blogs.each(function(){
            var elemTop = $(this).offset().top;
            var elemBottom = elemTop + $(this).height();

            if(windowBottom > elemBottom){
                setTimeout(function(){
                    $(this).show();
                }, 1000);

            }
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:43:21.747

当然。您可以使用[`setTimeout`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)在延迟后执行操作（调用函数），并且可以使用 jQuery 的函数（或其快捷方式， ）`scroll`非常轻松地挂钩元素（包括整个文档）的事件。所以你可以使用这些东西的组合来让你出现（通过 jQuery's ），例如：[`on`](http://api.jquery.com/on)[`scroll`](http://api.jquery.com/scroll/)`div``show`

```
// At the end of your page, just before the closing </body> tag
(function($) {
    var timer;

    // Set up the timer and scroll event handler
    timer = setTimeout(showDiv, 2000); // 2000 = two seconds
    $(document.body).on('scroll', handleScroll);

    // Show the div, and cancel the scroll event handler or timer
    function showDiv() {
        clearTimeout(timer);
        $(document.body).off('scroll', handleScroll);
    }

    // Handle the scroll event    
    function handleScroll() {
        // Check to see if the body has scrolled up past the top of the article
        if ($(this).scrollTop() > $("#thearticle").offset().top) {
            showDiv();
        }
    }

})(jQuery); 
```

显然这只是一个概念，但它应该让你走上正确的道路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T05:11:39.163

我从 SO 的另一个页面发现这很有效。

但我想知道是否有办法让它在 scrollTop 函数上方激活 200 像素。

现在它在用户滚动到第一个 DIV 的绝对开始时激活，但我宁愿能够在用户到达 DIV 的底部时激活它。

```
$(document).ready( function() {
$("#dvid").hide(); //hide your div initially
var topOfOthDiv = $("#othdiv").offset().top;
$(window).scroll(function() {
    if($(window).scrollTop() > topOfOthDiv) { //scrolled past the other div?
        $("#dvid").show(); //reached the desired point -- show div
    }
}); 
```

});

# cuda - 有什么更好的——有更多的块或线程？

> ID：14799959
> 
> 赞同：4
> 
> 时间：2013-02-10T16:40:03.057
> 
> 标签：cuda, nvidia

更好=更快。

我问的是一般情况，但考虑一个情况，当我有更多的“工人”而不是数据 - 它是否比每个块的最后一个线程将保持不使用更好，还是让每个网格的最后一个块不使用更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:45:50.107

您应该记住每 8 个块在 SM（流式多处理器）上运行的事实。您可以将它们视为 CPU 内核。每个block目前最多可以运行1024个线程，相当于逻辑核心，比如现在的intel i系列有的核心，不管你用不全这些线程，剩下的就浪费了，因为你没用他们和其他人都做不到。因此，例如，如果您的 GPU 上有 8 个 SM，您可以分配 64 个块，但不能为每个块分配 1024 个线程，因为每个 SM 的线程总数有限制，例如 2048。（编辑了这些基于集线器提供的信息）

# c# - 地址不工作

> ID：14799964
> 
> 赞同：2
> 
> 时间：2013-02-10T16:40:31.840
> 
> 标签：c#, vb.net, addhandler, addressof

我在将 ac# 转换为 vb.net 时遇到问题，但`AddHandler`不适用于我。任何人都可以帮忙吗？

```
this.ucSurveyWebControl.OnResponseRecieved += new MentorLogic.Engines.Zodiac.Web.OnResponseRecieved(ucSurveyWebControl_OnResponseRecieved); 
```

VB.net 代码：不起作用

```
Me.ucSurveyWebControl.OnResponseRecieved += New MentorLogic.Engines.Zodiac.Web.OnResponseRecieved(ucSurveyWebControl_OnResponseRecieved) 
```

`AddHandler`示例但不起作用

```
AddHandler MentorLogic.Engines.Zodiac.Web.OnResponseRecieved, AddressOf ucSurveyWebControl_OnResponseRecieved 
```

错误消息`BC32008`：委托

```
'MentorLogic.Engines.Zodiac.Web.OnResponseRecieved' requires an 'AddressOf' expression or lambda expression as the only argument to its constructor.

error `BC30676`: 'OnResponseRecieved' is not an event of 'MentorLogic.Engines.Zodiac.Web'. Page Validation Complete 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:45:28.620

使用具体对象而不是类：

```
AddHandler Me.ucSurveyWebControl.OnResponseRecieved, AddressOf ucSurveyWebControl_OnResponseRecieved 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:45:48.400

尝试这个 ：

```
AddHandler Me.ucSurveyWebControl.OnResponseRecieved, AddressOf ucSurveyWebControl_OnResponseRecieved 
```

# java - 检测java中的可执行文件

> ID：14799966
> 
> 赞同：9
> 
> 时间：2013-02-10T16:40:34.410
> 
> 标签：java, file-upload, file-io, http-headers, security

我有一个用例，我们允许用户上传文件。现在在后端java（从http请求中提取文件并检查的控制器）中，我想检测用户是否上传了任何可执行文件。如果他上传，我必须丢弃该文件。我用谷歌搜索了它，但找不到一个好的解决方案。有些人建议验证扩展名（.exe）。但我不确定它将过滤 exe 文件多远。我想完全阻止上传可执行文件。

如果你们中的任何人遇到过这种情况或对此有解决方案，请告诉我。我会很感激你的。

如果您能指出任何可以完成这项工作的 JAVA 实现或 Java API 或算法，我会更高兴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T16:52:48.697

我怀疑，除了你已经提到的扩展检查方法之外，没有办法捕捉所有可能的情况。可执行文件最终是机器指令序列，这使得它们在很大程度上与任何其他数据无法区分。

尽管如此，您仍然可以在某些*类型*的可执行文件中寻找一些东西。例如：

*   Windows 使用[Portable Executable](http://en.wikipedia.org/wiki/Portable_Executable)格式，该格式应始终以幻数`4d5a`（ASCII 字符`MZ`）开头
*   Linux 使用的 [ELF格式可执行文件以](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)`7f454c46`
*   [Java 类文件](http://en.wikipedia.org/wiki/Java_class_file#Magic_Number)`cafebabe`总是以（那是十六进制，而不是 ASCII！）开头。
*   据我所知，Mac-OSX 使用的 Mach-O 文件有一个幻数`feedface`（又是十六进制）

我建议您创建一个`FileInputStream`或类似的文件并读取文件的前几个字节，检查这些幻数。它没有检测到任何包含可执行代码的文件，但它应该阻止这些标准可执行格式的文件被允许，我认为这是你所希望的。

例如：

```
public static boolean isExecutable(File file) {
  byte[] firstBytes = new byte[4];
  try {
    FileInputStream input = new FileInputStream(file);
    input.read(firstBytes);

    // Check for Windows executable
    if (firstBytes[0] == 0x4d && firstBytes[1] == 0x5a) {
      return true;
    }
    return false;
  }
  catch (Exception e) {
    e.printStackTrace();
  }
} 
```

另请注意，可能会出现误报，即拒绝不可执行的文件。我不知道您打算上传什么类型的文件，因此您应该考虑发生这种情况的可能性有多大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T14:39:28.387

完成 devrobf 的响应： 每个可执行文件（我的意思是该文件包含机器指令）都可以通过文件元数据中包含的幻数来识别。幻数由它的大小（以字节为单位）和它的偏移量（根据文件类型可能不同）来标识。[您可以在此处](https://www.filesignatures.net/index.php?search=exe&mode=EXT)找到包含此信息的数据库。

例如 EXE 文件：

```
Extension :     EXE     
Signature :     4D 5A
Description :   Windows|DOS executable file
MZ (ASCII)  
Sizet :         2 Bytes
Offset:         0 Bytes 
```

正如您肯定会理解的那样，仅对扩展名进行检查并不能确定确定什么样的可执行文件。作为提议的Cratylus。为什么？因为下面的例子：

```
touch notAnExecutableWithExtensionExe.exe 
```

该命令只是创建扩展名为“exe”的文件，但它只是文件数据。

用 Java 实现对任何类型的文件进行正确检查：

```
public enum ExecutableSignatures{
    WINDOWS_EXE("Windows|DOS executable file",  (byte) 0x00, (byte) 0x02, 
                new byte[]{(byte)0x4d, (byte)0x5a}),
    JAVA_BYTECODE("Java Bytecode",              (byte) 0x00, (byte) 0x04, 
                new byte[]{(byte)0xca, (byte)0xfe, (byte)0xba, (byte)0xbe});

     /* Here more enumeration */
private String description;
private byte offset;
private byte size;
private byte[] magicNumber;

private ExecutableSignatures(String description, byte offset, byte size, byte [] magicNumber){

    this.description = description;
    this.offset = offset;
    this.size = size;
    this.magicNumber = magicNumber;

}

public String getDescription(){
    return this.description;
}

public byte getOffset(){
    return this.offset;
}

public byte getSize(){
    return this.size;
}

public byte[] getMagicNumbers(){
    return this.magicNumber;
} 
```

在您可以通过使用 apache 库创建方法来进行此检查后，请参阅[此处](https://commons.apache.org/proper/commons-io/)， 请参阅 @Filters - MagicNumberFilter。此构造函数可以采用 2 个参数；magicNumbers（字节数组）和偏移量（字节）。

```
 /**
     * Perform a check of what kind of executable is by checking the signature 
     * of file.
     * If it's an executable that is enumerate then the attributes 
     * magicNumber and executableDescription are updated with their corresponding 
     * values.
     * @return true if is an executable supported by the program otherwise false
     */
    public boolean isExecutableFile(){
        MagicNumberFileFilter mnff = null;

        for(ExecutableSignatures es : EnumSet.allOf(ExecutableSignatures.class)){
            mnff = new 
                    MagicNumberFileFilter(es.getMagicNumbers(), es.getOffset());

            if(mnff.accept(this.file)){
                this.magicNumber = es.getMagicNumbers();
                this.executableDescription = es.getDescription();
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:43:27.357

Windows 可执行文件总是以`MZ`幻数开头。可能你可以检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:49:42.647

据我所知，最常用的方法是验证扩展名。例如，我注意到如果将可执行文件重命名为 zip 或其他扩展名，邮件客户端通常会接受发送该可执行文件。
我相信这似乎足够了，因为安全问题是如果用户不小心运行了可执行文件。通过将文件重命名为未知/不同的扩展名，用户不会意外地这样做，因此危险会以某种方式“减轻”
否则想出一种方法来查看文件内容以确定您是否真的有可执行文件，我不不知道这是多么可行/便携/可靠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T16:50:09.200

看看这里：

[有没有一种好方法可以确定文件是否可以在 Java 中执行](https://stackoverflow.com/questions/6679725/is-there-a-good-way-to-determine-if-a-file-is-executable-in-java)

似乎此命令可能会有所帮助： `java.io.File.canExecute()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T17:03:16.740

请注意，Windows 可执行文件不仅是`.exe`文件，因此检查扩展名是不够的

如果您想要一些高级且难以愚弄的东西，您可以使用第三方工具，例如[File for Windows](http://gnuwin32.sourceforge.net/packages/file.htm)，它是一种从 Linux 移植的流行命令行工具。

例如，如果你想检查某个文件`program.exe`

```
C:\file -b "program.exe" 
```

结果将类似于

```
PE32 executable for MS Windows <GUI> Intel 
```

您可以使用从 Java 程序运行此工具`Runtime.getRuntime().exec()`

请参阅[此问题](https://stackoverflow.com/questions/5711084/java-runtime-getruntime-getting-output-from-executing-a-command-line-program)以了解如何运行命令行程序并获取 Java 输出

您还可以检查[Apache Tika](http://tika.apache.org/)从其内容中获取文件类型

# mysql - Hibernate Spring 无法解析属性基本查询

> ID：14799977
> 
> 赞同：0
> 
> 时间：2013-02-10T16:41:41.473
> 
> 标签：mysql, spring, hibernate

我试图执行一个非常基本的查询并且我收到 org.hibernate.QueryException: could not resolve property。这是我的实体：

```
@Entity 
```

@Table(name = "pm_screenconfiguration") 公共类 ScreenConfiguration 扩展 PubliMovilEntity {

```
/**
 * serial.
 */
private static final long serialVersionUID = -5337034940299810600L;

@Id
@Column(name = "code")
private String code;

@Id
@Column(name = "companyCode")
private int companyCode;

@Id
@Column(name = "applicationId")
private int applicationId;

@Column(name = "value")
private String value;

/**
 * @return the code
 */
public String getCode() {
    return code;
}

/**
 * @param code the code to set
 */
public void setCode(String code) {
    this.code = code;
}

/**
 * @return the value
 */
public String getValue() {
    return value;
}

/**
 * @param value the value to set
 */
public void setValue(String value) {
    this.value = value;
}

/**
 * @return the companyCode
 */
public int getCompanyCode() {
    return companyCode;
}

/**
 * @param companyCode the companyCode to set
 */
public void setCompanyCode(int companyCode) {
    this.companyCode = companyCode;
}

/**
 * @return the applicationId
 */
public int getApplicationId() {
    return applicationId;
}

/**
 * @param applicationId the applicationId to set
 */
public void setApplicationId(int applicationId) {
    this.applicationId = applicationId;
} 
```

}

这是我的查询：

```
public List<BaseEntity> getList(BaseSearchCriteria searchCriteria) {
    Criteria criteria = getSessionFactory() .openSession().createCriteria(ScreenConfiguration.class);
    if (searchCriteria.getApplicationId() != null) {
        criteria.add(Restrictions.eq("applicationId", searchCriteria.getApplicationId()));
    }

    if (searchCriteria.getCompanyCode() != null) {
        criteria.add(Restrictions.eq("companyCode", searchCriteria.getCompanyCode()));
    }

    return criteria.list();
} 
```

我实在想不通。我使用 MySql 并且所有列都具有相同的实体名称。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:22:11.877

问题在于@Id 字段声明。当一个主键由多个字段组成时，您必须指定一个 IdClass。（还有另一种使用 @Embbeded 注释的方法）。

我创建了一个 IdClass，其中包含我用 @Id 注释的字段，并且在实体中我有该 IdClass 的引用。

```
@Entity
@Table(name = "pm_screenconf")
@IdClass(ScreenConfigurationPK.class)
public class ScreenConfiguration extends PubliMovilEntity { 
```

请参阅：[http](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/) ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/ - 谢谢。

# jquery - 动态添加的文本框，在 POST 之前检查是否有空的文本框

> ID：14799978
> 
> 赞同：0
> 
> 时间：2013-02-10T16:41:41.877
> 
> 标签：jquery

我使用 jquery 将动态文本框添加到我的表单中，如下所示：

```
$(document).ready(function(){
    var i = 1;
    var j = 1;

    $('#add_q').click(function() {
        $('<div class="d' + i + '" class="fielddiv"><h2>Domanda(<a href="javascript:;" class="remove_question" todel="d' + i + '">x</a>)</h2><div class="row"><div class="span7"><input type="text" class="field input-xxlarge" name="questions[]" /></div> <div class="span3"><label class="checkbox"> <input type="checkbox" name="rm' + i + '" value="1"> Risposte multiple?</label></div></div><div id="answers_' + i + '" ></div><hr> <a href="javascript:;" class="add_a" qid="answers_' + i + '">Aggiungi risposta</a></div>').fadeIn('slow').appendTo('.inputs');
        i++;
    });

    $(document).on('click', '.add_a', function(event) {
        $('<div class="a' + j + ' dashForm"><input type="text" class="field input-xlarge" placeholder="risposta" name="a_' + $(this).attr('qid') + '[]" /></div>').fadeIn('slow').appendTo('#'+$(this).attr('qid'));
        j++;
    });

    $(document).on('click', '.remove_question', function(event) {
        $('.' + $(this).attr('todel')).remove();
    });

}); 
```

[这里](http://jsfiddle.net/mKsDg/)的工作**示例** 。

我需要在发布表单之前检查至少一个文本框是否为空，主要是因为当我稍后使用 php 检查是否有错误时，用户必须返回表单并且他们必须重新开始（这些字段在返回时会消失，因为它们是动态生成的）。有没有办法在 jquery 上检查这个用户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:45:04.483

肯定的事。

只需使用`$("input[type=text]").each()`并检查每个文本的值是否为空，一旦匹配，请提交表单。

为表单分配一个 id，如下所示：

```
<form id="myForm" method="POST"> 
```

然后，在 jQuery 中，使用

```
$("#myForm").submit(function(e) {
   // Check textboxes

   if(!ok) {
       // Stop submit
       e.preventDefault();
   }
}); 
```

这是一个[示例](http://jsfiddle.net/mKsDg/1/)

# html - 网站上的文字斜切且着色不起作用

> ID：14799984
> 
> 赞同：-4
> 
> 时间：2013-02-10T16:41:54.140
> 
> 标签：html, css

在我开始一天工作之前，我访问了[我的网站](http://orikina.com)，但从昨晚开始，它已经发生了变化。所有的文本都被弄乱了，输入文本现在是斜面的，当设置为`#999999`（灰色）时，导航栏文本（未悬停）是蓝色的。知道这是怎么发生的或如何解决吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T16:44:41.143

已访问链接的颜色设置为...`rgba(0,0,255,0.4)`的第 72 行`styles.css`

```
media="all"
buttoncontainer, a:visited {
    color: rgba(0, 0, 255, .4);
} 
```

# php - 恢复备份mysqldump php

> ID：14799987
> 
> 赞同：0
> 
> 时间：2013-02-10T16:42:13.497
> 
> 标签：php, mysql, mysqldump

我似乎无法在 php 中恢复我的数据库备份。这是我的代码

```
<?php
        $host = 'localhost';
        $user = 'root';
        $pass = ' ';
        $dbname = 'itravel';
        date_default_timezone_set('Asia/Kuala_Lumpur'); 
        $date = date('Y_m_d');
        if(isset($_POST['backup']))
        {
            $backup = "c:/xampp/mysql/bin/mysqldump --opt -h $host -u $user $dbname > itravel_backup_$date.sql";
            system($backup);
        }

        if(isset($_POST['restore']))
        {
            $restore = "c:/xampp/mysql/bin/mysqldump --opt -h $host -u $user $dbname < itravel_backup_$date.sql";
            system($restore);
        }
        ?> 
```

备份成功，但还原失败。帮帮我，伙计们！

* * *

更新了代码

```
<?php
        $host = 'localhost';
        $user = 'root';
        $pass = ' ';
        $dbname = 'itravel';
        //date_default_timezone_set('Asia/Kuala_Lumpur'); 
        //$date = date('Y_m_d');
        $backup_name = 'itravel_backup.sql';
        if(isset($_POST['backup']))
        {
            $backup = "c:/xampp/mysql/bin/mysqldump --opt -h $host -u $user $dbname > $backup_name";
            system($backup);
        }

        if(isset($_POST['restore']))
        {
            //$restore = "c:/xampp/mysql/bin/mysqldump --opt -h $host -u $user $dbname < itravel_backup_$date.sql";
            //system($restore);
            $restore = "c:/xampp/mysql/bin/mysql --opt -h $host -u $user $dbname < $backup_name";
            system($restore);
        }
        ?> 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:43:32.527

您需要使用`mysql`二进制文件来恢复，而不是`mysqldump`.

# jquery - 如何在 Jquery Mobile 中将数据从父级提交到对话

> ID：14799990
> 
> 赞同：0
> 
> 时间：2013-02-10T16:42:20.613
> 
> 标签：jquery, jquery-mobile

我是 jQuerymobile 的新手，但我已经知道 jquery。我最近有一个任务，如果我有按钮，当我按下它时，我需要在 jQuery 移动对话中打开相关数据。

考虑对话框包含表格列表，表格列表中的每一行都包含按钮，所以当我单击按钮时，我们需要加载另一个对话框，其中包含当前对话框中的一些相关信息。

对话框是 jquery mobile 中的一个链接。

在这里，我想知道我们如何在单击锚按钮或普通按钮时将数据从主页发布到对话框。

任何人都可以对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:35:12.877

您可以使用位置存储。

**存储数据**

```
var NameData = "dataURL";

localStorage.setItem("data", NameData); 
```

**使用数据（另一页或同一页）**

```
var myData = localStorage.getItem("data");

alert(myData); 
```

# java - 如何显示用户输入的值并四舍五入到最接近的小数点？

> ID：14799992
> 
> 赞同：0
> 
> 时间：2013-02-10T16:42:33.637
> 
> 标签：java

我是 Java 编程新手。我有一个程序任务来计算未来的投资价值。我已经编写的程序并且它可以工作，但我的导师要求显示用户的输入，我无法在我的文本或在线找到有关该主题的任何信息。我给我的导师发了邮件，没有结果。您将在下面看到该程序。我也无法找到如何四舍五入到最近的小数点。感谢任何可以提供帮助的人。

```
import javax.swing.JOptionPane; 

/* This program will calculate the future investment value after entering the 
* investment amount, annual interest rate and the number of years for the investment*/

public class FutureInvestment {
   public static void main(String[] args){

   //Enter annual interest rate
   String annualInterestRateString = JOptionPane.showInputDialog(
   "Enter annual interest rate, for example, 8.25:");

   //Convert string to double
   double annualInterestRate = Double.parseDouble(annualInterestRateString);

   //Obtain monthly interest rate
   double monthlyInterestRate = annualInterestRate / 1200; 

   //Enter number of years
   String numberOfYearsString = JOptionPane.showInputDialog(
   "Enter number of years as an integer, for example, 5:");

   //Convert string to integer
   int numberOfYears = Integer.parseInt(numberOfYearsString);

   //Enter investment amount
   String investmentAmountString = JOptionPane.showInputDialog(
   "Enter investment amount, for example, 120000.95:");

   //Convert string to double
   double investmentAmount = Double.parseDouble(investmentAmountString);

   //Calculate future investment amount
   double futureInvestmentAmount = investmentAmount * (Math.pow(1 + monthlyInterestRate, 
numberOfYears * 12));

   //Format to keep 2 digits after the decimal point
   futureInvestmentAmount = (int)(futureInvestmentAmount * 100) / 100.0;

   //Display results
   String output = "The Future Investment Value is $" + futureInvestmentAmount;

   JOptionPane.showMessageDialog(null, output);

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:21:37.710

为了帮助进行舍入和精度，我建议使用`BigDecimal`而不是`double`. 由于[浮点算术不精确](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html "每个计算机科学家都应该知道的关于浮点运算的知识")：

```
final String annualInterestRateString = JOptionPane.showInputDialog("Enter annual interest rate, for example, 8.25:");
final BigDecimal annualInterestRate = new BigDecimal(annualInterestRateString);
final BigDecimal monthlyInterestRate = annualInterestRate.divide(new BigDecimal("1200"), RoundingMode.HALF_EVEN);
final String numberOfYearsString = JOptionPane.showInputDialog("Enter number of years as an integer, for example, 5:");
final Integer numberOfYears = Integer.parseInt(numberOfYearsString);
final String investmentAmountString = JOptionPane.showInputDialog("Enter investment amount, for example, 120000.95:");
final BigDecimal investmentAmount = new BigDecimal(investmentAmountString);
final BigDecimal futureInvestmentAmount = investmentAmount.multiply(monthlyInterestRate.add(BigDecimal.ONE).pow(numberOfYears * 12), new MathContext(2, RoundingMode.HALF_EVEN));
final String output = "The Future Investment Value is $" + new DecimalFormat("#,##0.00;-#,##0.00").format(futureInvestmentAmount);
JOptionPane.showMessageDialog(null, output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:47:49.270

您可以使用字符串。format 以格式化包含具有特定精度的数字的消息。例如，这会将金额四舍五入到小数点后两位：

```
String output =String.format("The Future Investment Value is $%.2f", futureInvestmentAmount) 
```

# c++ - 将 IplImage * 传递给函数，原始未更新

> ID：14799993
> 
> 赞同：0
> 
> 时间：2013-02-10T16:42:41.327
> 
> 标签：c++, c, opencv, parameter-passing, iplimage

我在函数中传递 IplImage* 参数时遇到问题。这是一个学校项目，不幸的是，我不应该编辑调用我的过滤器函数的文件。主要是将图像作为命令行参数引入，然后制作一个副本并将其传递给正确的过滤器函数，如下所示：

```
IplImage * floating = cvCreateImage (cvSize (img->width, img->height), IPL_DEPTH_32F, 3);
cvConvertScale (img, floating, 1/255., 0);

IplImage * filtered;

switch (filter.ImageFormat)
{
    case YUV24:
        filtered = cvCreateImage (cvSize (floating->width, floating->height), IPL_DEPTH_32F, 3);
        cvCvtColor (floating, filtered, CV_BGR2YCrCb);
        break;
    case BGR24:
        filtered = cvCloneImage (floating);
        break;
    case Gray:
        filtered = cvCreateImage (cvSize (floating->width, floating->height), IPL_DEPTH_32F, 1);
        cvCvtColor (floating, filtered, CV_BGR2GRAY);
        break;
}

cvNamedWindow ("original", CV_WINDOW_AUTOSIZE);
cvShowImage ("original", img);

filter.ImageFilter (filtered, p);

if (filter.ImageFormat == YUV24)
{
      cvCvtColor (filtered, filtered, CV_YCrCb2BGR);
}

cvNamedWindow (filterName.c_str(), CV_WINDOW_AUTOSIZE);
cvShowImage (filterName.c_str(), filtered); 
```

这是我的一个过滤器的代码：

```
void median (IplImage * image, int k){
    cout << "image address: " << &image << endl;
    Mat matImage(image);        //convert IplImage to Mat for work
    vector<Mat> bgr_channels;   //vector to hold each channel
    int i,j,m,n;                //row/column indeces
    int kernelSize = (2*k+1)*(2*k+1);
    vector<float> vals(kernelSize); //kernelSized vector to hold all values of image
                //within kernel centered at a given pixel
    int vecIndex = 0;   //then sorted to get the median
    int chanIndex = 0;  //index used to for each channel

    //add padding to account for border issues with convolution
    copyMakeBorder( matImage, matImage, k, k, k, k, BORDER_REPLICATE);
    //split channes to do work on individual channels
    split(matImage, bgr_channels);

    for(chanIndex=0; chanIndex < matImage.channels(); chanIndex++){
        //outer loop for scanning entire image
        for(i=k; i<matImage.rows-k; i++)/*image row index*/{
            for(j=k; j<matImage.cols-k; j++)/*image column index*/{
                //inner loop for scanning image only in kernel boundaries
                vecIndex = 0;   //reset vecIndex at start of each kernel loop
                for(m=i-k; m<(i+k+1); m++)/*kernel row index*/{
                    for(n=j-k; n<(j+k+1); n++)/*kernel column index*/{                      
                        vals[vecIndex++] = bgr_channels[chanIndex].at<float>(m,n);
                    }
                }
                insertionSort(vals, 0, vals.size()-1);  //insertion sort from CSCI362 text, see references  
                bgr_channels[chanIndex].at<float>(i,j) = vals[vals.size()/2]; //new value chosen from middle element                                                                //of sorted vector
            }
        }
    }

    merge(bgr_channels, matImage);      //merge channels together
    imshow("Median: Mat", matImage);    //left this in becuase the original doesn't seem to get modified    
                                        //when converting the Mat back to an IplImage
    image = cvCloneImage(&(IplImage)matImage);  //convert backto IplImage for DesktopMain
} 
```

问题是，主要显示的过滤图像不反映实际图像。它只显示原始图像。当我将 Mat 风格的图像 matImage 输出到我的过滤器函数中时，它会显示过滤后的图像。在我转换回 IplImage 并将 IplImage* 输入参数设置为等于转换后的过滤版本之后立即。但是这些变化并没有反映主函数中显示的图像。

这使得我很难创建其他一些过滤器，例如 Gaussian 和 Sobel，因为这些过滤器本身在进行操作之前会调用其他函数，而我没有得到编辑后的数据。在如何编辑传递的 IplImage* 变量时，我有什么遗漏吗？

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:50:13.783

您的函数永远不会编辑传递给它的图像。

这条线大概是在复制图像。

```
Mat matImage(image);        //convert IplImage to Mat for work 
```

然后您的代码会修改该`matImage`副本。

并且在函数结束时，该本地副本被销毁，并且`IplImage`指向的 by`image`从未被修改过。

**编辑：** Vaughn Cato 的回答具体说明了如何解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:56:42.433

而不是这个：

```
image = cvCloneImage(&(IplImage)matImage); 
```

用这个：

```
cvCopy(&(IplImage)matImage,image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:45:42.230

要遍历 3 个通道，您应该使用迭代器：

```
Mat out;
*********open out********
Mat_<Vec3b>::iterator it = out.begin<Vec3b>();
MatConstIterator_<Vec3b> it_end = out.end<Vec3b>();

for(; it != it_end; ++it)
{
    //your 3 channels
    (*it)[0] = ...;
    (*it)[1] = ....;
    (*it)[2] = ......;
} 
```

# java - 这两个通配符之间的区别

> ID：14799996
> 
> 赞同：3
> 
> 时间：2013-02-10T16:43:01.153
> 
> 标签：java, generics

是以下方法声明，

```
public void testMethod(ArrayList<T extends Animal> list) 
```

和

```
public <T extends Animal> void testMethod(ArrayList<T> list) 
```

相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:49:07.897

它们在一个重要方面是不同的***。***对于第一种情况，泛型参数将绑定到类的范围，并且不会随着方法的多次调用而改变。

在第二种情况下，泛型参数将取决于调用方法的参数，并且对于每个单独的调用都可能不同。

所以，给定这个类：

```
public class MyClass<T extends Animal> {
    public void handleList1(List<T> list) {
       // implementation
    }

    public <U extends Animal> void handleList2(List<U> list) {
        // implementation
    }
} 
```

将其实例化为：

```
MyClass<Bear> test = new MyClass<Bear>(); 
```

您将只能使用`handleList1`类型列表调用`Bear`。另一方面，您可以调用`handleList2`为：

```
test.handleList2(new ArrayList<Tiger>);
test.handleList2(new ArrayList<Lion>);
test.handleList2(new ArrayList<Puma>); 
```

因为它的通用参数是由方法提供的参数决定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T16:50:46.407

区别在于前者不编译，而后者编译。是你问的吗？

如果您的意思是：

```
public void testMethod (ArrayList <? extends Animal> list) 
```

和

```
public <T extends Animal> void testMethod (ArrayList <T> list) 
```

那么不同的是，在第一种情况下你不能引用`ArrayList`元素的实际类型，而在第二种情况下你可以。

如果我们考虑以下两种情况，可能差异会更明显：

```
public void testMethod (
    ArrayList <? extends Animal> l1, 
    ArrayList <? extends Animal> l2) 
```

和

```
public <T extends Animal> void testMethod (
    ArrayList <T> l1, ArrayList <T> l2) 
```

在第一种情况下，第一个参数是`ArrayList`扩展的某种类型，`Animal`第二个参数是扩展的一个`Arraylist`或某些（可能是其他）类型`Animal`。

在第二种情况下，两个参数都是与 extends**相同**类型的`ArralList`s 。**`Animal`**

# javascript - 当用户开始输入输入时更改 css

> ID：14799997
> 
> 赞同：0
> 
> 时间：2013-02-10T16:43:03.517
> 
> 标签：javascript, jquery, html, css

我正在建立一个网站，我希望用户一开始输入第一个输入就`div`可以从`display: none;`到。`display: block;`

我对 jquery 有所了解，但我不知道如何做到这一点。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:48:07.393

我会使用 keyup 或 keydown 事件：

```
$('input').on('keyup', function() {
    if ( !$('div').is(':visible') ) $('div').show();
}); 
```

[**小提琴**](http://jsfiddle.net/95K9R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:01:11.240

```
$('#input').keyup(function(){
    $('your_div').css('display','block');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:48:25.337

您可以使用该`keydown`事件（`change`仅在`input`失去焦点时触发）：

```
var to_show = $('#your_div');

$('input').keydown(function() {  
    if(!to_show.is(':visible'))
    {
        to_show.show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:53:18.793

根据这里的答案：[https](https://stackoverflow.com/a/2826423/686036)`HTML 5` : //stackoverflow.com/a/2826423/686036 ，你会想要使用`oninput`. 这将负责自动填充或右键单击粘贴功能。

您的输入将如下所示：

```
<input id="myInput" type="text" /> 
```

和 JavaScript：

```
var myInput = document.getElementById("myInput");
myInput.addEventListener('input', myFunction(), true); 
```

如果需要，或者使用 JQuery：

```
$('#myInput').bind('input', function() {
    alert('User clicked on "foo."');
}); 
```

现在这`HTML 5`是*W3C 候选推荐*，如果尚未实施，它应该/将在大多数新版本的浏览器中实施。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-10T16:45:46.140

您可能可以将 change 事件与 jquery 一起使用：

```
 $('input').change(function() {
        $('#your-div').show();
    }); 
```

# android - 如何使用谷歌地方 api 查找距离

> ID：14799998
> 
> 赞同：5
> 
> 时间：2013-02-10T16:43:05.647
> 
> 标签：android

我正在使用 Google pLaces api 开发一个应用程序。我能够获取正在使用我的应用程序的用户附近的咖啡馆列表。结果列表包括地点的详细信息，例如地点的名称、地址、纬度经度值和电话号码。我想知道的是如何请求place api返回用户与结果列表中每个条目之间的距离。我浏览了几个在stackoverflow上发布的讨论类似主题的链接。我也浏览了谷歌的文档，但它没有提到任何关于获得这些距离的内容。我想避免使用任何数学公式，例如大圆算法，因为在这种情况下，返回的距离将是直线距离，而这不是对距离的准确估计。

我经历的几个链接是： [如何在不嵌入谷歌地图的情况下使用地理定位或类似 API 找到一个地方到另一个地方之间的距离？](https://stackoverflow.com/questions/11824387/how-do-i-find-distance-between-one-place-to-another-using-geolocation-or-similia)

[使用 google places Api 在 Android 中查找以公里为单位的距离](https://stackoverflow.com/questions/13208946/find-distance-in-kilometers-in-android-using-google-places-api)

[如何在android中获得距离公里？](https://stackoverflow.com/questions/13208501/how-to-get-distance-kilometer-in-android)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:05:57.333

我认为正如您所说-您要避免使用

任何数学公式，所以你也可以试试这个 -

您可以从位置地址获取距离

```
http://maps.googleapis.com/maps/api/distancematrix/xml?origins="+a+"&destinations="+b+"&mode=driving&language=en-EN&sensor=false with a=addressFrom, b=addressTo 
```

如果您有纬度，经度的位置，您可以获得该位置的地址：

```
 double latiTude = 10.3929393;
 double longiTude = 150.93984884;

 Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
  GeoPoint p= new GeoPoint((int) (latiTude * 1E6), (int) (longiTude * 1E6));
  List<Address> address = geocoder.getFromLocation(
                                                    p.getLatitudeE6() / 1E6,
                                                    p.getLongitudeE6() / 1E6, 1);
    if (address.size() > 0) 
    {
    String addressFroLatLong= "";
    for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++) 
    {   addressFroLatLong+= address.get(0).getAddressLine(i) + "\n";
    }   
   } 
```

**如果有帮助，请点赞。没有其他的。谢谢，很高兴帮助享受..**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T02:08:39.083

Haversine 实现如下所示。但是我仍然觉得应该有一些由 google places api 提供的服务，这将有助于找到两点之间的确切距离。如果有人知道，请告诉我.. 到目前为止，Haversine 是一个很好的替代品..

```
import java.lang.*;
import java.io.*;
import java.math.*;
public class DistanceCalculation {

public static void main(String[] args)
{
    double lon11 =-97.116121;
      double lat11=32.734642;

      double lon22=-97.111658;
      double lat22=32.731918;

    //   calculateDistance(lat11,lon11, lat22, lon22);
      distFrom(lat11, lon11, lat22, lon22);

}
public static double distFrom(double lat1, double lng1, double lat2, double lng2) {
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double sindLat = Math.sin(dLat / 2);
    double sindLng = Math.sin(dLng / 2);
    double a = Math.pow(sindLat, 2) + Math.pow(sindLng, 2)
            * Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2));
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;
    System.out.println(dist);
    return dist;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:03:27.320

两点之间的距离可以通过使用此处描述的等式找到：[http](http://williams.best.vwh.net/avform.htm#Dist) ://williams.best.vwh.net/avform.htm#Dist请记住，使用弧度，而不是度数！

您似乎担心在每个版本中更新 maps 键？我在市场上有一个基于地图的应用程序，你得到 1 个 prod 密钥和 1 个调试密钥（我相信它是每个开发人员的，但如果不是，它是每个应用程序的）。它与您用于签署 apk 的密钥有关。我的意思是，如果您获得了 prod api 密钥，并且只开发了这个应用程序，您可以发布许多更新，而无需再次触摸密钥（假设您不在本地进行调试密钥测试） . 如果您对此感到担忧，可以将两者都保存在 AndroidManifext.xml 文件中，然后将不相关的注释掉，具体取决于您是部署到设备还是模拟器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T17:10:57.287

两个地理位置之间的计算并不难，特别是对于您的任务，要找到到附近酒店的距离。

您可以使用完全适合您的任务的半正弦公式。

但是这些地理公式给出的是空中距离，而不是道路距离，您需要路由服务。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-10T17:04:32.797

另一个解决方案：您也可以这样做：

```
//your two locations
Location locationA;
Location locationB;

//distance between them
float distanceBetweenPoints = locationA.distanceTo(locationB); 
```

有点晚了，但希望这会有所帮助:)