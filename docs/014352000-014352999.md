# StackOverflow 问答 14352000-14352999

# html - 右对齐并将段落推到 div 层之外

> ID：14352002
> 
> 赞同：0
> 
> 时间：2013-01-16T05:37:38.090
> 
> 标签：html, image, cell, css-tables

这是我的页面：[http ://www.ostmoconstruction.com/portfolio.php](http://www.ostmoconstruction.com/portfolio.php)

如果我将鼠标悬停在每行中的第一个图像上，则生成的图像是 div 的完整大小，因此会将第二个图像推到可见性之外。

当我将鼠标悬停在第二张图片上时，我希望同样的事情发生。也许它会将第一个图像推到 div 层的左侧之外，并且只显示第二个图像。我尝试将定位设置为绝对悬停并离开：0；这似乎有效，但也似乎不稳定，并且保留了第一张图片的标题（有时与第二张图片的标题冲突）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:39:13.713

我有一个解决方案**冲突标题**，您可以尝试：

```
p a {
    background:#FFFFFF;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:50:12.307

我最终将图像的位置设为绝对并将其包装在相对定位的 div 层中，然后给两个负左边距以正确对齐。绝对定位允许我将它带到左侧，而相对定位允许我将另一个图像推到容器 div 之外。更多信息：[将鼠标悬停图像向左移动？](https://stackoverflow.com/questions/14329533/move-onmouseover-images-to-the-left)

# sift - vlfeat.org 的 VL_SIFT 是如何工作的？

> ID：14352003
> 
> 赞同：1
> 
> 时间：2013-01-16T05:37:38.330
> 
> 标签：sift, vlfeat

我是 Matlab 中 SIFT 的 VLfeat 实现的新手

有人可以帮助/教我更多关于 vlfeat.org 的 VL_SIFT 是如何工作的吗？我已阅读以下链接[http://www.vlfeat.org/mdoc/vl_sift.html](http://www.vlfeat.org/mdoc/vl_sift.html)和此文档[http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)但我仍然不明白这个怎么运作。

谢谢马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:32:10.397

这种方法的最佳资源之一确实是原始论文： [**Distinctive Image Features from Scale-Invariant Keypoints**，David G. Lowe，*International Journal of Computer Vision*](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)

你读得越多，你就会发现越多的细节。这是一篇非常好的独立论文，但您需要非常仔细地阅读它。它充满了信息。

# javascript - 如何在按钮单击时有效地将多个元素添加到 div 标签？

> ID：14352012
> 
> 赞同：0
> 
> 时间：2013-01-16T05:38:14.487
> 
> 标签：javascript, function, button, getelementbyid

嘿伙计们，我正在用 javascript 构建一个科学计算器，我想知道是否有更好的方法来做到这一点，因为我必须为 50 多个按钮做这件事。这就是我目前在我的 Javascript 文件中执行此操作的方式，但我认为必须有一种更有效的方法来执行此操作。

```
function percent() {
      display = document.getElementById('display')

      display = display + " %"

      document.getElementById('display').innerText = display
} 
```

id 显示是我想在给用户答案之前显示公式的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:45:35.063

当您必须添加对象的内部 HTML 时，您正在添加对象。

```
display = document.getElementById('display').innerHTML 
```

# php - 如何在不提交表单的情况下在 php 中获取表单值？

> ID：14352014
> 
> 赞同：-1
> 
> 时间：2013-01-16T05:38:29.227
> 
> 标签：php, javascript, html, seo

我在我的旧站点中使用表单提交。由于 SEO 的目的，我将其更改为 onClick() 函数，这样它将转到一个干净的 URL，但是当我使用此函数时，其他表单值没有进入 php 文件

下面是我的旧代码

```
 <form name="frmSearchTops" id="frmSearchTops" action="/womens/tops/" method="post">
        <select  name="cboCityNameRes" id="cboCityNameRes">
          <option value=''>City</option>
             {foreach from= $arritemCities item=foo}                      
               {if $smarty.post.hdnCityName eq $foo}                                
                  <option value="{$foo}" selected="selected">{$foo}</option>          
               {else}    
                <option value="{$foo}" {if $foo eq 'City'} selected="selected"{/if}>
                     {$foo}
                </option>
               {/if}    
             {/foreach}    
        </select>
    <select name="cboMaterial" id="cboMaterial">
      <option value="">Material</option>
      <option value="CT">Cotton</option>
      <option value="SL">Silk</option>
    </select>
     <input name="btnSearch" type="button" value="Search" id="btnSearch"/>       
 </form> 
```

新代码如下

JavaScript

```
 <script type="text/javascript">

          function searchitem()
          {
        $strCity    =   document.getElementById('cboCityNameRes').value;
        window.location.href = "http://www.legacy.com/womens-tops-"+$strCity+".php";
          }
    </script> 
```

HTML 代码

```
 <select  name="cboCityNameRes" id="cboCityNameRes" onchange="cityChanged()">
      <option value=''>City</option>                  
       {foreach from= $arritemCities item=foo}                        
          {if $smarty.post.hdnCityName eq $foo}                                 
             <option value="{$foo}" selected="selected">{$foo} </option>                      
          {else}    
             <option value="{$foo}" {if $foo eq 'City'} selected="selected"{/if}>
                 {$foo} 
            </option> 
          {/if} 
        {/foreach}    
    </select>                        
   <select name="cboMaterial" id="cboMaterial">
     <option value="">Material</option>
     <option value="CT">Cotton</option>
     <option value="SL">Silk</option>
   </select>                    
    <input name="btnSearch" type="button" value="Search" id="btnSearch" onclick="searchitem()"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:51:57.123

当您像这样执行 window.location 时，您正在重定向页面，这是一个 GET 请求而不是一个 POST。

您需要将额外的变量添加到查询字符串中，例如

window.location.href = "http://www.legacy.com/womens-tops-" + strCity +".php?something=blah";

然后在调用的 PHP 中就会出现一些问题。

另一种更简单的方法是使用 jQuery（或纯 JavaScript，如果您愿意）来更改表单的操作，以便路径是您的“womens-tops-$strCity”，然后提交表单。

```
var strCity = document.getElementById('cboCityNameRes').value;
var frm = document.getElementById('frmSearchTops')
frm.action = "/womens-tops-" + strCity + ".php";
frm.submit(); 
```

或 jQuery

```
var strCity = $('#cboCityNameRes').val();
$("#frmSearchTops").attr("action", "/womens-tops-" + strCity + ".php");
$("#frmSearchTops").submit(); 
```

尽管搜索引擎机器人根本不会运行任何 JavaScript。因此，这并没有真正为您做任何 SEO。至少从你的例子中我可以看出。不过，您可能还有其他理由这样做，所以答案仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:48:08.203

您有一个调用该函数的 onchange 事件的选择，`cityChanged`但您只发布了该函数`searchitem`。

不过，您可以传递为 select 选择的值，执行以下操作：

```
<select  name="cboCityNameRes" id="cboCityNameRes" onchange="cityChanged(this.value)">
...
</select> 
```

然后使用函数参数的值，例如：

```
function cityChanged(city){
    var material = document.getElementById("cboMaterial").options[document.getElementById("cboMaterial").selectedIndex].value;
    // window.location.href = "http://www.legacy.com/womens-tops-"+city+".php"
    // add material to the URL somewhere?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T05:55:40.097

试试这个

```
function cityChanged(val) {
var value = val.options[val.selectedIndex].value;  
window.location.href = "http://www.legacy.com/womens-tops-"+value+".php";
} 
```

你的HTML应该是这样的，

```
<select  name="cboCityNameRes" id="cboCityNameRes" onchange="cityChanged(this)"> 
```

希望这对你有用

# java - 在 Hibernate 3.2 中使用连接池 (c3p0-0.9.1.2) 时出现异常并且应用程序无法连接 MySqL 数据库？

> ID：14352017
> 
> 赞同：2
> 
> 时间：2013-01-16T05:39:01.030
> 
> 标签：java, mysql, hibernate, jdbc, c3p0

我在 Hibernate 3.2 中使用连接池（c3p0-0.9.1.2），如下所示：hibernate.cfg.xml

```
 <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/bspersonaltrainer</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">admin</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="hibernate.connection_provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
    <property name="hibernate.c3p0.min_size">2</property>
    <property name="hibernate.c3p0.max_size">400</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.c3p0.timeout">600</property>
    <property name="hibernate.c3p0.idle_test_period">300</property>
    <property name="hibernate.show_sql">false</property> 
```

但我经常收到这个异常。

```
 Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1" java.lang.NoClassDefFoundError: com/mysql/jdbc/SQLError
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:430)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:282)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.SQLError
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 11 more
  Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0" java.lang.NoClassDefFoundError: com/mysql/jdbc/SQLError
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:430)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:282)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
16 Jan, 2013 10:44:42 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.mysql.jdbc.SQLError.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1566)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2103)
        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:718)
        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:282)
        at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
        at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
        at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
        at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
16 Jan, 2013 10:44:42 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.mysql.jdbc.SQLError.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1566)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:430)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:282)
        at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
        at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
        at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
        at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:21:10.347

当您热重启您的网络应用程序时，您可能忘记关闭您的休眠 SessionFactory。这让 c3p0 的助手线程从一个死实例（在 Tomcat 中意味着一个现在损坏的 ClassLoader）无用地运行并导致问题。

c3p0 数据源在不再使用时应立即关闭（），以释放所有池连接和辅助线程。对于 Web 应用程序，这通常应该通过 ServletContextListener 来完成。如果您的池由休眠管理，则立即关闭 SessionFactory 应该可以解决问题。

# clearcase - 在 Clearcase UCM 中重命名 vob 是否可行？

> ID：14352018
> 
> 赞同：1
> 
> 时间：2013-01-16T05:39:05.403
> 
> 标签：clearcase, clearcase-ucm

我们选择与我们的项目名称对齐的vob名称（不要将项目名称与UCM项目名称混淆），以便我们轻松区分。

但最近我们的项目名称已更改，因为我们将 2 个产品合并为一个。

有人建议重命名vob以表明项目名称。

我们试图从开发、构建和发布的角度分析影响。

几乎没有什么变化，我们不得不在这里和那里更改路径变量以指示最新的 vob 名称。

所以我们同意重命名vob名称。

然后作为 Clearcase 管理员，我必须进行影响分析。

当我向 Clearcase 高级管理员询问建议时。他们列出了可能的影响，如下所示。

1.  跨 vob 的符号链接将被破坏，因此它们可能需要修复。
2.  在更改vob名称之前最好清除所有签出项
3.  vob 将被锁定，以防止用户在更改名称时使用旧的 vob 名称。
4.  必须卸载并重新安装 Vobs
5.  快照和 CCRC 视图可能会受到影响，因此必须重新同步。

等等。

有没有人在你的项目中尝试过 vob 重命名？您能分享一下您所面临的对我们有帮助的实际影响吗？

如果您已经尝试并决定不以任何方式再次这样做，您能告诉我为什么实际上不建议这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:15:25.053

最重要的是，您的 UCM 组件将不再工作：您无法更改它们的*根目录*（即 vob 中的路径或 vob 本身），即使您可以更改它们的名称（它们的“标题”）。
这与 UCM 项目名称无关（UCM 项目不关心 UCM 重命名，只有 UCM Streams 关心）

坦率地说，当面对这种重构时，我：

*   将所有内容保留在原位，但已锁定并处于只读状态
*   从一个新的组件/vob 重新开始，导入最新的基线。

# java - 无法使用 C 在客户端读取消息

> ID：14352023
> 
> 赞同：2
> 
> 时间：2013-01-16T05:39:48.740
> 
> 标签：java, c, sockets, protocol-buffers

我使用协议缓冲区来制作数据结构，并在服务器端编写以下代码以使用 Java 发送消息，同时使用 C 在客户端接收消息。

Java 服务器：

```
OutputStream os = socket.getOutputStream();
GameResponse.Builder builder=GameResponse.newBuilder();
builder.build().writeTo(os);
os.flush();
os.close(); 
```

C 客户：

```
while ((n = ::recv(sockfd, buf, BUFFLEN, 0)) > 0) {
    write(STDOUT_FILENO, buf, n);
    len += n;
} 
```

原来从服务器发送的消息是正确的，但客户端无法接收。看起来while循环永远不会中断它进入死循环。我们认为这可能是 C recv 函数从未获得 EOF 来结束数据传输的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:02:29.633

`recv()``0`如果连接已关闭，则返回。

要从客户端关闭连接，请通过调用关闭套接字`socket.close()`。

# ruby-on-rails - Heroku 上的 Rails：git add environment.rb 与否？

> ID：14352027
> 
> 赞同：0
> 
> 时间：2013-01-16T05:40:19.963
> 
> 标签：ruby-on-rails, git, heroku

我通常 git-ignore config/environment.rb 文件。我将 ENV['RAILS_ENV'] 设置添加到该文件中，因此它在不同的机器上应该是不同的。

但是，Heroku 在 git 中需要该文件。没有它，应用程序就会崩溃。

你如何处理它？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:52:40.073

Heroku 有[非常棒的文档](https://devcenter.heroku.com/)。为了直接回答您的问题，它们提供了[配置环境变量](https://devcenter.heroku.com/articles/config-vars#production-and-development-modes)的接口。他们甚至[提供了一种机制](https://devcenter.heroku.com/articles/multiple-environments#managing-staging-and-production-configurations)，可以很容易地部署到具有不同环境的两个以上 Heroku 托管的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:35:18.360

你不应该忽视`config/environment.rb`. 正如 Zeke 已经回答的那样，您可以在实时 Heroku 应用程序中设置环境变量。

要查看您的 heroku 应用程序可用的环境变量列表，请运行`heroku config`. 要设置特定变量运行的值`heroku config:add RAILS_ENV=staging --app yourapp`。

但是，在您自己的机器上运行的开发应用程序呢？有一些选项，一个是在 shell 中导出环境变量：

```
$ export RAILS_ENV=staging
$ echo $RAILS_ENV
staging 
```

但我更喜欢另一种方法。这就是我的`config/environment.rb`：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Load environment vars from local file
env_vars = File.join(Rails.root.to_s, 'config', 'env_vars.rb')
load(env_vars) if File.exists?(env_vars)

# Initialize the rails application
MyApp::Application.initialize! 
```

如果有`config/env_vars.rb`文件，它将被加载。这是示例`env_vars.rb`文件的内容：

```
ENV["REDISTOGO_URL"]  = 'redis://localhost:6379'
ENV["AWS_ACCESS_KEY"] = '283983483'
ENV["AWS_SECRET"]     = '743843934'
ENV["S3_BUCKET"]      = 'myapp-development' 
```

这样，您可以为您的开发、登台和生产应用程序设置不同的环境变量。

**你会想要 git-ignore 这个文件**。

当我运行我的开发应用程序时，我想将文件发送到`myapp-development`S3 存储桶。但我希望我的生产应用程序（在 Heroku 中）将文件发送到`myapp-production`S3 存储桶。

```
$ heroku config:add S3_BUCKET='myapp-production'  --app myapp 
```

还有一个用于我的暂存应用程序的不同存储桶（也在 Heroku 中运行）：

```
$ heroku config:add S3_BUCKET='myapp-staging'  --app myapp-staging 
```

由于您将 git-ignore `config/env_vars.rb`，它不会出现在您在 Heroku 中运行的应用程序中，因此它们将从上述`heroku config:add`配置中获取其环境变量。

* * *

由于我和其他人一起工作，所以我经常`env_vars.rb.example`在项目中包含一个示例文件，它不会被 git 忽略：

文件`config/env_vars.rb.example`：

```
# Copy this file to config/env_vars.rb
# MAKE SURE THAT YOUR .gitignore INCLUDES IT!
#
# This file is used to set environment variables that would be present on
# Heroku, and are needed for our development and test instances to run.
ENV["REDISTOGO_URL"]  = 'redis://localhost:6379'
ENV["AWS_ACCESS_KEY"] = 'xxx'
ENV["AWS_SECRET"]     = 'xxx'
ENV["S3_BUCKET"]      = 'some-bucket'

if Rails.env.test?
  HOST = "example.com"
else
  HOST = "development.intranet"
end 
```

请注意，加载此`env_vars.rb`文件的一个优点是您可以以编程方式执行不同的操作，例如，`HOST`如果您正在运行测试，则将常量设置为不同的值，如上所示。

# css - 使按钮适合每个浏览器

> ID：14352029
> 
> 赞同：2
> 
> 时间：2013-01-16T05:40:28.350
> 
> 标签：css, browser, cross-browser, zooming

我的网站有问题。我创建了一个可以打开聊天的按钮。但是这个按钮并不是在所有浏览器和屏幕监视器中都停留在正确的位置。由于浏览器缩放，按钮不会像我想要的那样停留。

这是我的页面：[http ://www.assembleia.org.br/site/webtv/](http://www.assembleia.org.br/site/webtv/)

**聊天**按钮**必须**紧跟在方框后面，比如这张照片：http: [//imageshack.us/photo/my-images/20/cssfix.jpg/](http://imageshack.us/photo/my-images/20/cssfix.jpg/)

但在其他浏览器中，按钮会左右移动。这是我的CSS：

```
<style>

* { /* trying to RESET CSS */
  margin: 0;
  padding: 0;
  list-style: none;
  vertical-align: baseline;
}

#tab /* the button CHAT */{
  min-width: 50px;
  min-height: 19px;
  max-width: 50px;
  max-height: 19px;
  position: absolute;
  right: 27%;
/*float: left;*/
  top: 350px;
  display: block;
  cursor: pointer;
  background-image: url('http://www.assembleia.org.br/site/wp-content/uploads/2013/01/buttonchat.png');
  color: white;
}

#panel /* the panel */ {
  min-height: 367px;
  position:absolute;
  left: 1355px;
  top: 171px;
  background-color: #D4D4D4;
  max-height: 367px;
  min-width: 0; /*new line*/
}

#panel .content /* for the chat */ {
  min-width: 100px;
  text-align: center;
  /*margin-right:300px;*/
  margin-right: auto;
  max-width: 100px;
}

#close /* for the little red X after opening the chat */ {
  position: absolute;
  left: 1758px;
  top: 168px;
  background-image: url('http://www.assembleia.org.br/site/wp-content/uploads/2013/01/buttonclose1.png');
  text-decoration: none;
}

#share /* for facebook sharing after opening the chat */ {
  position: absolute;
  left: 1656px;
  top: 540px;
  font-size: 10px;
  font-family: Verdana,sans-serif;
}

</style> 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:29:31.760

用这个

```
#tab {
min-width: 50px;
min-height: 19px;
max-width: 50px;
max-height: 19px;
position: absolute;
right: 50px;
top: 350px;
display: block;
cursor: pointer;
background-image: url('http://www.assembleia.org.br/site/wp-content/uploads/2013/01/buttonchat.png');
color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:03:42.690

使用**位置：相对；**父包装器 div 上的属性，然后更改 #tab CSS，如下所示：

*   添加位置：绝对；
*   从上到下更改：50%；
*   从右到右更改：25px；

这是使用 Firebug 测试的，应该会产生预期的效果。

# entity-framework - 将 jqgrid 与 webapi、Entity Framework 5 和 ASPNET MVC 4 一起使用时应采用哪种方法

> ID：14352030
> 
> 赞同：1
> 
> 时间：2013-01-16T05:41:15.430
> 
> 标签：entity-framework, jqgrid, asp.net-mvc-4, asp.net-web-api, jqgrid-asp.net

我正在开发一个将 jqgrid 与 webapi、Entity Framework 5 和 ASPNET MVC 4 结合使用的项目。WebApi 控制器工作正常，我可以通过测试进行 CRUD 操作。

现在，我正在使用 jqgrid 开发 UI。例如，我的问题来自一对多关系。

我有这两个实体：

```
public class Door
{
    public int Id { get; set; }
    public string Description { get; set; }
    public int HouseId { get; set; }

    [JsonIgnore]
    public House House { get; set; }
} 
```

和这个

```
public class House
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Door> Doors { get; set; }
} 
```

我在 jqgrid 中的 jqgrid colmode 代码是这个：

```
colModel: [
{ name: 'Id', index: 'id', editable: true, sortable: true, hidden: false, align: 'left' },
{ name: 'Description', index: 'description', editable: true, sortable: true, hidden: false, align: 'left' },
{
name: 'HouseId', index: 'HouseId', editable: true, sortable: true, hidden: false, align: 'left',
edittype: "select", editrules: { required: true }, editoptions: {
        dataUrl: $("#ServiceUrlHouse").val(),
        buildSelect: function (data) {
            var response = jQuery.parseJSON(data);
            var html = '<select>';
            if (response && response.length) {
                for (var i = 0, l = response.length; i < l ; i++) {
                    var item = response[i];
                    html += '<option value="' + item.Id + '">' + item.Name + '</option>';
                }
            }
            return html + "</select>";
        }
    }
} 
```

我的问题是我想在网格处于查看模式时显示房屋名称，并在编辑模式下选择（组合），然后将要在数据库中更新的原始门发送回 WebApi。

**注1：**如果我不放 [JsonIgnore] 我会得到自引用循环

**注意 2**我虽然想创建一个像这样的 DTO：

```
public class DoorDto
    {
        public int Id { get; set; }
        public string Description { get; set; }
        public int HouseId { get; set; }
        public string HouseName { get; set; }
    } 
```

问题是我需要修改jqgrid部分代码并用HouseName更改HouseId列名，（如果我这样做，我可以在视图模式下看到House的名称=>没关系）。但是，当我编辑任何记录时，返回到 webapi 的 json 不会发送 Door 对象，而是发送 DoorDto，然后 Entity Framework 5 的更新失败。

我知道我可以创建另一个接收 DoorDto 的方法，但它会很脏。有没有最好的方法来处理这个？

提前致谢！吉列尔莫。

# c# - 检测浏览器 URL

> ID：14352032
> 
> 赞同：0
> 
> 时间：2013-01-16T05:41:22.607
> 
> 标签：c#, .net, url, browser, detect

有没有办法让标准 C# 桌面应用程序检测浏览器要导航到的 URL，并可能阻止它这样做？例如，当我单击浏览器中的链接并阻止浏览器的默认操作发生时，会弹出所有下载管理器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:47:14.280

您无法从 winform 项目访问 Internet 浏览器，但如果您有插件应用程序，则可以访问。对于浏览器。开发一个插件应用程序。并与您的 winform 应用程序进行通信。像互联网下载管理器应用程序。这是 IE 附加组件的示例 IE 附加组件 [express](http://www.add-in-express.com/programming-internet-explorer/developing-addons.php) for chrome [Google 开发指南](http://developer.chrome.com/extensions/devguide.html)

希望能有所帮助。

# path - 展开文件的完整路径！在没有获取模式的 Rebol 中

> ID：14352039
> 
> 赞同：2
> 
> 时间：2013-01-16T05:41:58.750
> 
> 标签：path, filenames, rebol

在 Rebol 2 中，可以使用 获取文件的完整路径`get-modes`，例如

```
>> get-modes %foo.r 'full-path
== %/home/hostilefork/foo.r 
```

该功能`get-modes`不在 Rebol 3 中。如何获得等效行为？

*请注意，在 Rebol 2 文档``full-path` [中似乎甚至没有将其](http://www.rebol.com/docs/words/wget-modes.html)作为已知参数提及。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:41:58.750

新功能[`clean-path`](http://www.rebol.com/r3/docs/functions/clean-path.html)做了*特定*的事情：

```
>> clean-path %foo.r
== %/home/hostilefork/foo.r 
```

至于由 提供的其余功能`get-modes`，Rebol 3 中的端口模型似乎仍在不断变化（或者至少没有多少文档，除了[示例的 wiki 页面](http://www.rebol.net/wiki/Port_Examples)）。在描述 Rebol 3 更改背后的动机时，Carl Sassenrath 指出[Rebol 2 端口存在缺陷](http://www.rebol.com/rebol3/motivation.html)：

> 我认为 REBOL 端口的一些主要设计原则存在缺陷。二阶功能（例如端口字段自动继承，甚至端口作为系列概念）被置于一阶功能（例如简单的 I/O 访问方法）之上，并且太多的外部设备变体被挤进单个端口定义，导致一个庞大的端口对象。

因此，如果需要任何其他`get-modes`功能，目前可能需要进行一些搜索和实验。

# javascript - 扩展“阅读更多”文本

> ID：14352045
> 
> 赞同：1
> 
> 时间：2013-01-16T05:42:40.520
> 
> 标签：javascript, css, text, spry

我正在尝试制作此框，以便当您单击“阅读更多”时它会变大并在其下方显示文本。还想制作一个再次关闭文本的按钮。

到目前为止，我尝试了 toggletext javascript 命令，（可在以下网址找到：[http](http://www.ehow.com/how_12006269_make-expandable-text-dreamweaver.html) ://www.ehow.com/how_12006269_make-expandable-text-dreamweaver.html ）但它只将文本置于阅读下方，不会影响其下方的框，所以所有的句子都在下一个 div 元素后面运行。

还尝试了 Dreamweaver 中的 spry 可折叠面板，它做同样的事情，隐藏在后面并且不再打开。

另一件事是我做的扩展功能只能自定义一次，如果我复制它，第二个会打开第一个的文本。

我需要让办公室里没有网页设计经验的人轻松地把它交给以后管理这部分。

我是一名新手设计师，非常感谢一些帮助或新想法如何做到这一点。谢谢！！

关联：

[http://gregorydesignbuild.net/projects/projectlist.php](http://gregorydesignbuild.net/projects/projectlist.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:47:06.580

这是一个造型问题。您在您的上声明了包含阅读更多按钮的`height`属性。`div.plistobtxtbox`如果您在*home.css*文件中删除该声明，则应在单击阅读更多按钮时按下阅读更多内容下方的内容。

# sql - oracle sqlplus 不给出长结果

> ID：14352053
> 
> 赞同：1
> 
> 时间：2013-01-16T05:43:32.353
> 
> 标签：sql, oracle, select, sqlplus

我有一个简单的 sql 脚本文件，它只包含一个 SELECT 语句。但是 SELECT 语句的输出是巨大的（超过几十万行）。

我无法将输出保存在本地文件中。我刚刚将我的 select 语句更改为 DESC，它工作正常，所以问题似乎是输出的大小（select 语句类似于 SELECT * from TABLEX）

我将不胜感激有关如何执行 select 语句的任何评论。

提前致谢

* * *

我更新了我的 sql 脚本文件如下

```
SET SQLBLANKLINES ON
set echo off  
set feedback off  
set linesize 1000  
set pagesize 0  
set sqlprompt ''  
set trimspool on  
set headsep off  

spool output.csv  
select * from JM_WCEL_BTH_CURRENT  
SPOOL OFF  
EXIT 
```

输出如下

```
D:\>sqlplus user/user@mydb @2.sql

SQL*Plus: Release 10.2.0.4.0 - Production on Thu Jan 17 10:10:15 2013

Copyright (c) 1982, 2007, Oracle.  All Rights Reserved.

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, Data Mining and Real Application Testing options

  4
  5
Disconnected from Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64
bit Production
With the Partitioning, Data Mining and Real Application Testing options

D:\> 
```

输出文件中除了数字 4 和 5 之外什么都没有。几分钟后我按 Ctrl + C 结束了该过程。我还尝试删除假脱机过程，也没有输出到控制台。

我尝试从任何其他工具运行 sql 查询，它在不到一秒的时间内给出结果！

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:25:50.633

我们已经使用 SQL*Plus 成功地将 6000 万行假脱机到 csv 文件，使用如下：。

```
set echo off
set feedback off
set linesize 1000
set pagesize 0
set sqlprompt ''
set trimspool on
set headsep off

spool output.csv

select 'col1,col2,col3' from dual;

select col1 || ',' || col2 || ',' || col3
from bigtable;

spool off 
```

长时间运行的查询可能发生的一个问题是 Oracle 会话超时，或者 TCP 连接被防火墙破坏。如果您的查询运行数小时，您可能应该调查这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T15:21:01.997

这与性能或 SQL*Plus 限制无关。它只是在执行命令结束时缺少分号：

```
 select * from JM_WCEL_BTH_CURRENT; 
                                  ^
                                  |____________add semicolon here 
```

# asp-classic - IIS 6.0 中的 .vbs 文件部署

> ID：14352058
> 
> 赞同：-1
> 
> 时间：2013-01-16T05:43:49.687
> 
> 标签：asp-classic

我在服务器 \inetpub\wwwroot\ABC.VBS 上有一些 *.vbs 文件。它将向用户发送邮件。如何运行或配置它们？这样它将开始向用户发送邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:33:30.803

如果你想在你的服务器上有一个 ASP 脚本，它将向用户发送一封电子邮件（例如，一旦他们完成了一个请求文件的表单），那么类似这样的东西会将邮件作为附件发送：

```
<%
Set eMail=CreateObject("CDO.Message")
eMail.Subject="Sending requested files"
eMail.From="mymail@mydomain.com"
eMail.To="someone@somedomain.com"
eMail.TextBody="Please see attachment for requested file"
eMail.AddAttachment "\inetpub\wwwroot\ABC.VBS"
eMail.Send
set eMail=nothing
%> 
```

# javascript - jQuery 菜单不起作用，即（文档模式：Quirks）

> ID：14352066
> 
> 赞同：1
> 
> 时间：2013-01-16T05:44:35.737
> 
> 标签：javascript, jquery, css, kendo-ui

下面的代码不适用于 Internet Explorer 文档模式，每次鼠标悬停时子菜单的长度都会加倍。... 请帮忙 ..

```
<html>
  <head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.7.0.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.default.min.css" rel="stylesheet" />
  </head>
  <body>
    <div id="example" class="k-content">
      <div id="megaStore">
        <ul id="menu">
          <li>Products
            <ul>
              <li>Furniture
                <ul>
                  <li>Tables & Chairs</li>
                  <li>Sofas</li>
                  <li>Occasional Furniture</li>
                  <li>Childerns Furniture</li>
                  <li>Beds</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <script>
        $(document).ready(function() {
          $("#menu").kendoMenu();
        });
       </script>
     </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:53:50.197

Kendo UI 不支持 IE Quirks 模式。IE在此模式下使用其IE5.5引擎呈现内容，这比IE6模式更糟糕。

检查 Kendo UI 站点上支持的浏览器部分： [Kendo UI Demos](http://demos.kendoui.com/)和文档：[技术要求](http://docs.kendoui.com/getting-started/technical-requirements)

# c# - 带有属性的递归 XSLT 转换

> ID：14352067
> 
> 赞同：0
> 
> 时间：2013-01-16T05:44:37.733
> 
> 标签：c#, xslt

使用以下 XML：

```
<Sections><Section Type="Type1" Text="blabla1"><Section Type="Type2" Text="blabla2"/>  </Section></Sections> 
```

我想产生以下输出：

```
<Sections><Type1 Text="blabla1"><Type2 Text="blabla2"/></Type1></Sections> 
```

我玩 XSLT 已经好几个小时了，我什至想不出从什么开始……关于 XLST 转换有很多很好的例子，但我仍然缺少一些关于递归性和使用 Type 属性来创建我的节点的东西。如何将文档中的任何节节点转换为其对应的类型属性？

任何做类似事情的教程、xslt 资源或任何开始的东西都很棒

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:03:05.043

这是怎么回事（根据评论中的要求，修改为双向转换）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Prevent Type attributes from being copied to the output-->
  <xsl:template match="@Type" />

  <!-- Convert <Section Type="Nnn" ... /> into <Nnn ... /> -->
  <xsl:template match="Section">
    <xsl:element name="{@Type}">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>

  <!-- Convert <Nnn .... /> into <Section Type="Nnn" ... /> -->
  <xsl:template match="Sections//*[not(self::Section)]">
    <Section Type="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </Section>
  </xsl:template>

</xsl:stylesheet> 
```

在您的第一个示例上运行时的输出：

```
<Sections>
  <Type1 Text="blabla1">
    <Type2 Text="blabla2" />
  </Type1>
</Sections> 
```

在第二个示例上运行时的输出：

```
<Sections>
  <Section Type="Type1" Text="blabla1">
    <Section Type="Type2" Text="blabla2" />
  </Section>
</Sections> 
```

# unix - 仅获取 autosys（主）作业/框的状态

> ID：14352072
> 
> 赞同：0
> 
> 时间：2013-01-16T05:45:20.103
> 
> 标签：unix, autosys

我有一个主 autosys 框（first_start_main_job），它有 2 个不同的子框。

当我进入时，`autorep -j first_start_main_job -d`我得到类似的东西：

```
JOb Name | Last Start | Last Run | ST | RUN | Pri/Xtx
first_start_main_job | some_time | some_time | SU | some_text
first_start_sub_job | some_time | some_time | SU | some_text
second_start_sub_job | some_time | some_time | SU | some_text 
```

我只想要 first_start_main_job 的 ST(status) 并将其存储在变量中。

请让我知道如何做到这一点。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:57:00.820

使用打印级别开关`-L`，级别为 0，（零）仅列出最外面的框。然后使用您喜欢的脚本工具来获取和存储 ST 值。

例如：

```
autorep -J main_job_box -d -L0 
```

`man autorep`如果需要，AutoSys 命令提示符会为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T10:35:25.350

只需添加上面发布的答案。要在变量中获取 Job 的状态，我们可以使用 awk 过滤掉状态。例如

```
autorep -J first_start_main_job -d -L0 | awk '/SU /{print $6}' 
```

它将检查第一行，如果它包含“SU”，则将打印状态。

# c# - 如何制作具有不同返回码的自定义字典？

> ID：14352074
> 
> 赞同：2
> 
> 时间：2013-01-16T05:45:21.650
> 
> 标签：c#, dictionary

> **可能重复：**
> [如何获取 null 而不是 KeyNotFoundException 按键访问 Dictionary 值？](https://stackoverflow.com/questions/14150508/how-to-get-null-instead-of-the-keynotfoundexception-accessing-dictionary-value-b)

我目前在我的项目中有很多`Dictionary<string, T>`用途，其中大部分看起来像这样：

```
if (myDic.ContainsKey("some key"))
    localVar = myDic["some key"]; 
```

它也不是很有效，因为它对字典进行了两次调用，这可能会消耗资源。`TryGetValue()`是一件很酷的事情，但它并不是在一条线上完成的。

我只想`null`从`var v = myDic[key]`. 我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T05:51:08.637

您可以使用扩展方法`TryGetValue`：

```
public static U GetValueByKeyOrNull<T, U>(this Dictionary<T, U> dict, T key)
where U : class
{
    U value;
    dict.TryGetValue(key, out value);
    return value;
} 
```

多亏了它，你才能写

```
somedict.GetValueByKeyOrNull("key1") 
```

* * *

最后试图做这件事，我想出了一个变体，使用从字典类派生的具有显式接口实现的变体：[如何获取 null 而不是 KeyNotFoundException 按键访问字典值？](https://stackoverflow.com/questions/14150508/how-to-get-null-instead-of-the-keynotfoundexception-accessing-dictionary-value-b)

那是

```
public interface INullValueDictionary<T, U>
    where U : class
{
    U this[T key] { get; }
}

public class NullValueDictionary<T, U> : Dictionary<T, U>, INullValueDictionary<T, U>
    where U : class
{
    U INullValueDictionary<T, U>.this[T key]
    {
        get
        {
            U val;
            dict.TryGet(key, out val);
            return val;
        }
    }
} 
```

并在任何地方使用它而不是原始字典：

```
//create some dictionary
NullValueDictionary<int, string> dict = new NullValueDictionary<int, string>
{
    {1,"one"}
};
//have a reference to the interface
INullValueDictionary<int, string> idict = dict;
string val = idict[2]; // null
val = idict[1];        // "one" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:56:58.257

我不喜欢处理，`null`所以我的实现将如下所示：

```
interface Maybe<T> {
    bool HasValue {get;}
    T Value {get;}
}

class Nothing<T> : Maybe<T> {
    public bool HasValue { get { return false; } }
    public T Value { get { throw new Exception(); } }
    public static const Nothing<T> Instance = new Nothing<T>();
}

class Just<T> : Maybe<T> {
    private T _value;
    public bool HasValue { get { return true; } }
    public T Value { get { return _value; } }
    public Just(T val) {
        _value = val;
    }
} 
```

`Maybe`是一个可以包含值或不包含值的对象。请注意，`Nothing`类包含静态字段`Instance`。我们可以使用这个值而不是每次需要`Nothing`从函数返回时创建新值。

现在，我们需要创建自己的字典类：

```
class MyDictionary<TKey, TValue>
{
    private Dictionary<TKey, TValue> _dict;

    ...

    public Maybe<TValue> this[TKey key] {
        TValue val;
        if (_dict.TryGetValue(key, out val)) {
            return new Just<TValue>(val);
        return Nothing<TValue>.Instance;
    }
} 
```

这种方法的优势尚不清楚，因为 C# 没有模式匹配。但它可以用以下方式模拟`dynamic`：

```
void ProcessResult(Just<string> val) {
    Console.WriteLine(val);
}

void ProcessResult(Nothing<string> n) {
    Console.WriteLine("Key not found");
}

var dict = new MyDictionary<string, string>();
...
dynamic x = dict["key"];
ProcessResult(x); 
```

我认为这是表达字典不能总是返回有意义的结果这一事实的非常清晰的方式。同样对于读者来说很明显，函数重载`ProcessResult(Just<T>)`只会为字典中存在的值调用，而其他重载将在未找到键的情况下调用。

**优点：**

*   类型用作规范。
*   字典可以包含值类型和引用类型。

**缺点：**

*   更多的击键。
*   处理起来稍微复杂一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:11:54.977

我决定这样做：

```
class MyDictionary<TKey, TValue> : Dictionary<TKey, TValue>
{
    public new TValue this[TKey key]
    {
        get
        {
            TValue value;
            return TryGetValue(key, out value) ? value : default(TValue);
        }
        set { base[key] = value; }
    }
} 
```

它让我可以像使用任何其他字典一样通过方括号使用它。由于我不会将它与值类型一起使用 as `TValue`，因此我认为这是一个足够好的解决方案。

# php - wkhtmltopdf 不会为 Debian 创建 pdf

> ID：14352077
> 
> 赞同：1
> 
> 时间：2013-01-16T05:45:57.387
> 
> 标签：php, debian, wkhtmltopdf

这是我用来将 HTML 文件转换为 pdf 然后从服务器下载 pdf 文件的 PHP 代码。

**wkhtmltopdf**

```
$url = base_url().'invoices/'.$file_name.'.html';                    
exec("wkhtmltopdf-amd64 $url {$file_folder}{$file_name}.pdf");

header("Cache-Control: no-cache");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$file_name.pdf");
header("Content-Type: application/pdf");
header("Content-Transfer-Encoding: binary");
$pdfFile = base_url().'invoices/'.$file_name.'.pdf';
readfile($pdfFile); 
```

& 执行后 exec("wkhtmltopdf-amd64 $url {$file_folder}{$file_name}.pdf"); 它不会在文件夹中创建 pdf 文件

它在**Ubuntu**上运行良好，但在下载 pdf 后在**Debian**上运行良好，当打开 pdf 时 Adob​​ Reader 显示错误，请查看图片。

我认为这个问题是由于**exec()**不能在**Debian**中工作......！

![在此处输入图像描述](../Images/035e0e56622da575675e589e436801cf.png)

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:48:28.823

在下载文件期间检查 base_url() 中的路径是否传递了正确的路径，以测试在浏览器中记下路径并检查它是否被下载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:28:44.703

对于 Debian，我需要安装**xvfb-run wkhtmltopdf**

# css - 你如何在 HTML5/CSS 中对齐复选框

> ID：14352079
> 
> 赞同：0
> 
> 时间：2013-01-16T05:46:06.390
> 
> 标签：css, html, web-applications, web

我正在尝试将我的复选框与我正在开发的小网页中的标签对齐，但我不知道如何，是的，我已经用谷歌搜索了！

您可以在我的网页[http://www.sithhappens.net](http://www.sithhappens.net)上查看源代码（将手机加载到您的手机上，尽管所有 CSS 都是针对移动视图完成的（桌面视图稍后会出现）。

[并在http://www.sithhappens.net/iphone.css](http://www.sithhappens.net/iphone.css)查看 css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:55:28.557

不是 HTML5，但它有效：

[http://jsfiddle.net/gYCQz/](http://jsfiddle.net/gYCQz/)

CSS：

```
input
{
  display: inline;
}
body
{
  text-align: center;
} 
```

HTML4+：

```
<input type="checkbox" value="Test" />&nbsp;Test 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T06:12:50.440

如果你想在中心使用复选框

```
<div>
<input type="checkbox" value="Test" />
<div> 
```

然后你可以使用 text-align(right,left,center) 任何你想要的。你也可以使用

```
<div align="center">

</div> 
```

并从所有标签中删除 margin-bottom 给定宽度和高度。

# php - 控制表单 PHP

> ID：14352083
> 
> 赞同：0
> 
> 时间：2013-01-16T05:46:42.227
> 
> 标签：php, html, http-status-code-404

我得到了这个表格：

```
<form action="search.php" method="get" id="urlcreateform">
  <div class="input-append">
    <input class="span8 meela" id="q" name="q" type="text"><input style="display:none" type="radio" name="scl" value="Twitter" alt="flickr" checked></input><button class="btn btn-large btn-primary" type="submit" id="submit" title="Submit Search">Search</button>
  </div>
</form> 
```

例如，当我输入时，`http://google.com/`它给了我这个错误：

```
Forbidden

You don't have permission to access /search.php on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

任何想法如何解决这个问题？例如替换`http://`为空和搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:19:35.510

试试 Cmhod 777

你能发布一些你的搜索吗？有时，服务器会因错误代码而退回 503

# ios - iOS 地理围栏，但 GPS 指示器仍然稳定

> ID：14352084
> 
> 赞同：1
> 
> 时间：2013-01-16T05:46:48.030
> 
> 标签：ios, gps, geofencing

我正在为 iOS 创建一个 GPS 地理围栏应用程序。我注意到的一件事是，每当我运行我的应用程序时，右上角的 GPS 指示器总是稳定的。但是退出它后，它会在几秒钟后变回一个轮廓符号。

我测试了苹果制作的地理围栏提醒应用程序，当应用程序运行时它并没有变得稳定。

我确定我没有使用 startUpdatingLocation，而只使用 startMonitoringForRegion。我不知道每次启动时是什么触发了那个实心符号。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:33:09.123

问题是你调用了方法 startMonitoringForSignificantChanges 然后你从来没有停止过它，调用 stopMonioring

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:45:18.043

同样的问题让我发疯。然后我尝试在我的 iPhone 上重置我的位置和隐私设置，问题就消失了。您可以使用设置应用程序（常规 -> 重置 -> 重置位置和隐私）来执行此操作。

希望这可以帮助。

# javascript - 代码在 localhost（通过 POW）上运行得比在移动浏览器上的服务器上运行得更快

> ID：14352086
> 
> 赞同：1
> 
> 时间：2013-01-16T05:46:51.300
> 
> 标签：javascript, performance, localhost, webserver, rack-pow

我正在使用[POW](http://pow.cx/manual.html#section_2.1.5)设置我的 iPhone 以在 localhost 上测试 Web 应用程序。

在我手机上的 POW localhost 上运行的 javascript 性能很好，即滚动和加载速度很快。

然而，当我切换到使用 Heroku 服务器来运行 Web 应用程序（相同的代码库）时，性能大幅下降，即滚动缓慢且加载缓慢。

据我了解，本地主机上的代码性能（未编译的 javascript 等）不应该比在 heroku-server 上运行的更快。

有没有人遇到过这个？什么可能导致服务器的性能差异？

我的网站（在heroku服务器上）的链接如下：[beta.dailymus.es](http://beta.dailymus.es) - 在移动浏览器上打开

# javascript - 在使用选择选项时，我在这个 php 代码中哪里错了？

> ID：14352087
> 
> 赞同：0
> 
> 时间：2013-01-16T05:47:01.037
> 
> 标签：javascript, php, jquery, ajax

我正在处理一个表单，我想在其中获取选择值，当用户选择是值时，我想显示一个文本框部分，但是下面的代码对我不起作用。

```
<select id="gap" name="gap" onclick="gap_textbox();">
    <option value='select'>Select</option>
    <option value='yes'>Yes</option>
    <option value='no'>No</option>
</select>

<input type="text" name="gap_box" id="gap_text_box" />

<script type="text/javascript">
    function gap_textbox() {
        alert ("am here" + "  " +document.getElementById("gap").value);
        if (document.getElementById("gap").value =='select') {
            alert ("in value = select");
            document.getElementById("gap_text_box").disable=true;
        }
        else if (document.getElementById("gap").value =='no') {
            alert ("in value = no");
            document.getElementById("gap_text_box").disable=true;
        } else {
            alert ("in value = yes");
            document.getElementById("gap_text_box").disable=false;
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:49:45.143

在下一行...

```
<select id="gap" name="gap" onclick="gap_textbox();"> 
```

...您需要使用`onchange`而不是`onclick`.

但是，使用内联点击处理程序被认为是过时且难以维护的。您应该使用正确的 JavaScript 事件处理...

```
document.getElementById("gap").onchange = function() {
    gap_textbox()
}; 
```

或者，更好的是，使用一个库，比如 jQuery ......

```
$('#gap').change(function() {
    gap_textbox();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:54:19.400

试试下面的代码。唯一的改变是，`onclick`用 . 替换函数`onchange`。对于选择框，您必须使用`onChange`功能。我们没有点击选择框中的任何内容。

```
<select id="gap" name="gap" onchange="gap_textbox();">
<option value='select'>Select</option>
<option value='yes'>Yes</option>
<option value='no'>No</option>
</select>
<input type="text" name="gap_box" id="gap_text_box" />
<script type="text/javascript">
function gap_textbox()
{
  alert ("am here" + "  " +document.getElementById("gap").value);
  if (document.getElementById("gap").value =='select') 
  {
    alert ("in value = select");
    document.getElementById("gap_text_box").disable=true;
  }
  else if (document.getElementById("gap").value =='no') 
  {
    alert ("in value = no");
    document.getElementById("gap_text_box").disable=true;
  }
  else 
  {
    alert ("in value = yes");
    document.getElementById("gap_text_box").disable=false;
  }
}
</script> 
```

# c# - 滚动上下文菜单项

> ID：14352095
> 
> 赞同：0
> 
> 时间：2013-01-16T05:47:54.567
> 
> 标签：c#, windows-phone-7, contextmenu

在 Windows Phone 中有一个称为**ContextMenu**的功能，它允许为控件创建弹出菜单。

但是，如果菜单项列表很大，则其中一些不适合屏幕。下面的简单示例将说明这一点：

在xml中：

我们将使用 Toolkit，因此添加

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

然后例如：

```
 <Button Content="Button 1" Height="72" HorizontalAlignment="Left" Margin="160,400,0,0" Name="button1" VerticalAlignment="Top" Width="160">
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu>                    
                    <toolkit:MenuItem Header="Action A" Name="miActionA1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action B" Name="miActionB1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action C" Name="miActionC1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action D" Name="miActionD1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action E" Name="miActionE1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action F" Name="miActionF1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />                      
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
    </Button> 
```

在 nullAction 我们什么都不做

```
private void nullAction(object sender, RoutedEventArgs e)
        {

        } 
```

DesignHeight 值是默认 WP7 页面的标准值`DesignHeight="768"`

如您所见，当您长按“按钮 1”控件时，会显示菜单，但不会完全显示。有些项目是不可见的。就我而言，最好的决定是让这个菜单可以滚动。这可以使用 **ScrollViewer**来完成。

因此，我们使用 Scrollviewer 和 StackPanel 覆盖菜单项。

```
 <Button Content="Button 1" Height="72" HorizontalAlignment="Left" Margin="160,400,0,0" Name="button1" VerticalAlignment="Top" Width="160">
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu>
                <ScrollViewer>
                    <StackPanel>
                    <toolkit:MenuItem Header="Action A" Name="miActionA1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action B" Name="miActionB1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action C" Name="miActionC1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action D" Name="miActionD1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action E" Name="miActionE1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    <toolkit:MenuItem Header="Action F" Name="miActionF1" BorderBrush="Black" BorderThickness="1" Click="nullAction" />
                    </StackPanel>
                </ScrollViewer>
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
    </Button> 
```

成功？不，因为您可以滚动此列表，但不能向下选择项目。

**我的问题是如何解决它？**

使用多点触控？（我对此了解不多）

也许，我需要向 Scrollviewer 添加一些属性？

还有其他想法吗？

**[更新]**此外，如果添加了滚动查看器，则发现项目的点击/单击处理程序会更改行为。通常，当您点击该项目时，上下文菜单会关闭并执行处理程序方法。使用scrollviewer，上下文菜单不会关闭，需要再点击一次才能手动关闭。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:01:54.050

如果本机 ContextMenu 不允许这样做，那么解决问题的最佳方法是编写自己的实现。

新的上下文菜单应该显示在一个弹出窗口中，可以选择几个项目，并且这些项目必须是可滚动的。所以：

```
public class ScrollableContextMenu
    {
        private Popup p;
        public delegate void TapHandler(object sender, System.Windows.Input.GestureEventArgs e);
        public event TapHandler ListBoxTap;

        private ListBox listBox;

        public ListBox ListBox
        {
            get { return listBox; }
            set { listBox = value; }
        }

        /// <summary>
        /// Create new Context Menu. The items of Context Menu will be taken from given list
        /// </summary>
        /// <param name="page"></param>
        /// <param name="items"></param>
        public ScrollableContextMenu(PhoneApplicationPage page, List<string> items)
        {
            p = new Popup();

           // Generate popup properties, i.e. height, width, e.t.c.

            Canvas canvas = new Canvas();

            // Generate canvas main properties

            p.Child = canvas;

            Border border = new Border();

            // Now create border and its main properties

            canvas.Children.Add(border);

            // StackPanel.
            StackPanel panel = new StackPanel();
            panel.Orientation = System.Windows.Controls.Orientation.Vertical;

            // Create listBox, that we will be scrolling
            listBox = new ListBox();
            // Create listbox main properties

            // Fill the listbox with items. 
            foreach (string item in items)
                listBox.Items.Add(new ScrollableContextMenuItem(item));
            listBox.Tap += listBoxTap;
            panel.Children.Add(listBox);
            border.Child = panel;
        }

        public void Show()
        {
            // Open the popup.
            p.IsOpen = true;
            p.UpdateLayout();
        }

        public void Close()
        {
            // Close it
            p.IsOpen = false;
            p.UpdateLayout();
        }

        private void listBoxTap(object sender,  System.Windows.Input.GestureEventArgs e)
        {
            // Invoke hanlder if it exists
            if (ListBoxTap != null)
                ListBoxTap(sender, e);
        } 
```

*ScrollableContextMenuItem*是一个 UserControl ，它应该看起来像原生 ContextMenuItem。简而言之，它是 Grid/StackPanel 上的一个简单的 TextBox。

将本机 ContextMenu 添加到 xaml 文件中

```
<toolkit:ContextMenuService.ContextMenu>
        <toolkit:ContextMenu>
               <toolkit:MenuItem Header="..." ... Click="miClickEvent"/>
                <!-- ... --!>
        </toolkit:ContextMenu>
</toolkit:ContextMenuService.ContextMenu> 
```

相反，应该通过 Hold 事件调用 ScrollableContextMenu 对象：

```
button.Hold += new EventHandler<System.Windows.Input.GestureEventArgs>(SomeHoldEvent);

 private void SomeHoldEvent(object sender, EventArgs e)
        {
            contextMenu = new ScrollableContextMenu(this, definedList);
            contextMenu.ListBoxTap +=new ScrollableContextMenu.TapHandler(contextMenu_ListBoxTap);
            contextMenu.Show();
        } 
```

其中定义的列表是上下文菜单的标题列表（应该在某处生成）。

在 listBoxTap 事件中：

```
private void contextMenu_ListBoxTap(object sender, EventArgs e)
        {
            int index = contextMenu.ListBox.SelectedIndex;
            switch (index)
            {
                // items index starts with zero
                case 0:
                    // Call the click event for this one, it should be implemented already, when we've written it for native context menu
                    MiClickEvent(this, EventArgs.Empty);
                    contextMenu.Close();
                    break;
                // implement other handlers here
                default:
                    contextMenu.Close();
                    break;
            } 
```

这是唯一的解决方案，它真的帮助了我。希望它会帮助别人。

# c++ - X11 应用程序的最佳实践 - 每个应用程序或每个窗口一个 XOpenDisplay？

> ID：14352098
> 
> 赞同：0
> 
> 时间：2013-01-16T05:48:17.140
> 
> 标签：c++, x11

所以我正在开发一些使用 X11 库在 Linux 上与 X-Windows 一起工作的代码。我找到了一些简单的教程，但它们没有详细介绍更多实际用例的最佳实践。

我想知道的一件事是，我应该为每个应用程序调用一次 XOpenDisplay 并将指针传递给 Display，还是可以为每个顶级窗口调用此函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:52:59.933

你应该只需要`XOpenDisplay`一次。一台显示器可以有多个窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:49:00.890

虽然您可以在您的应用程序中使用多个到 X 服务器的连接，但有一个很好的理由不这样做：每个连接都分配有资源 ID 范围（即使您的客户端没有创建自己的资源），并且资源 ID 是32 位数量，因此 X11 中的连接总数受到限制（[在大多数系统上通常低至 256 到 512](https://unix.stackexchange.com/questions/25273/what-is-the-max-number-of-x-clients)）

# c# - 如何使用 JsonConverter 将我的字符串反序列化为十进制属性？

> ID：14352099
> 
> 赞同：2
> 
> 时间：2013-01-16T05:48:21.600
> 
> 标签：c#, c#-4.0

这是课程

```
 public class ModelingData : BaseEquatable<ModelingData>
    {
        [JsonConverter(typeof(DecimalToStringConvertor))]
        public decimal? ActualValue { get; set; }

        public string DisplayValue { get; set; }

        public override bool Equals(ModelingData other)
        {
            if (ReferenceEquals(null, other)) return false;
            if (ReferenceEquals(this, other)) return true;
            return Equals(other.ActualValue, ActualValue);
        }
    } 
```

我已经创建了类

```
public class DecimalToStringConvertor : JsonConverter
    {
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            string javaScriptTicks = !string.IsNullOrWhiteSpace(Convert.ToString(value)) ? value.ToString() : string.Empty;
            writer.WriteValue(javaScriptTicks);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            if (existingValue == null)
            {
                return 0M;
            }

            return Convert.ToDecimal(existingValue);
        }

        public override bool CanConvert(Type objectType)
        {
            return true;
        }
    } 
```

现在，当我尝试反序列化它时，它在 ReadJson 方法的现有值参数中始终为我提供 null。它适用于 WriteJson。

如何使用 JsonConverter 将我的字符串反序列化为十进制属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:56:04.323

阅读[http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm)上的帮助主题指定“指示 JsonSerializer 在序列化成员或类时使用指定的 JsonConverter。 " 所以对我来说，似乎 JsonConverter 属性不用于反序列化，而仅用于序列化对象。

如果您尝试将类的新实例作为参数传递给 JsonConvert.DeserializeObject 函数，例如：

```
ModelingData md = JsonConvert.DeserializeObject<ModelingData>(jsonData, new DecimalToStringConvertor()); 
```

我相信你应该取得更大的成功。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T06:00:15.337

您可以使用 JavaScriptSerializer 来完成您的任务。

```
System.Web.Script.Serialization.JavaScriptSerializer oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string sJSON = oSerializer.Serialize(oList); 
```

示例服务堆栈解决方案也有很多用于 json 序列化的库。

# javascript - V8 会自动缓存编译的正则表达式吗？

> ID：14352100
> 
> 赞同：17
> 
> 时间：2013-01-16T05:48:22.260
> 
> 标签：javascript, regex, node.js, v8

所以我知道在 Javascript 中实例化一个正则表达式会导致它被自动编译，如果该正则表达式存储在一个变量中，它将被重用而无需重新编译。例子：

```
var re = /[Ff]oo|[Bb]ar/;
"Foo".match(re); // ["Foo"]
"Baz".match(re); // null 
```

然而，重复的正则表达式是重新编译还是 V8 (Chrome/Node.js) 智能地重用它们（就像 PHP 对 preg_* 函数所做的那样）？

```
function isFooBar(str) {
  return str.match(/[Ff]oo|[Bb]ar/);
}
isFooBar("Foo"); // ["Foo"]
isFooBar("Baz"); // null 
```

所以澄清一下，我知道第一个示例会导致一次正则表达式的编译。但是第二个例子呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-04-09T00:47:31.177

好吧，让我们来了解一下。

```
// http://stackoverflow.com/questions/3466850/complex-password-regular-expression
function isFooBar(str) {
  return str.match(/^(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$)?(^(?=.*\d)(?=.*[a-z])(?=.*[@#$%^&+=]).*$)?(^(?=.*\d)(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?(^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$)?$/);
}
console.time('1');isFooBar("Foo");console.timeEnd('1');
console.time('2');isFooBar("Bar");console.timeEnd('2');
```

（打开您的控制台并运行上面的代码片段以查看您的浏览器的结果。）

在 Node.js 0.10.36 (V8 3.14.5.9) 上：

```
1: 65ms
2: 0ms 
```

在 io.js 1.6.3 (V8 4.1.0.27) 上：

```
1: 32ms
2: 0ms 
```

所以，我想你的问题的答案是**肯定**的，V8 能够自动缓存正则表达式。

* * *

编辑：

即使 V8*能够*进行这种优化，它实际上也*可能不会*选择始终使用这种优化。V8 有许多针对不同情况的复杂启发式算法，例如何时内联函数、何时优化函数、何时取消优化函数等。除非您是 V8 开发人员，否则其中许多启发式算法看起来很奇怪或出乎意料或两者。

我自己不是 V8 开发人员，我不知道具体问题的答案，或者是否总是自动缓存正则表达式。但是，即使我知道答案，将来也可能会改变。因此，当您编写代码时，**我仍然建议您存储正则表达式，以便清楚该变量的意图是什么。**对于上面的示例，这意味着将正则表达式变量从函数中取出`isFooBar()`。

另一个问题是如何创建这个正则表达式。上面和 OP 问题中的示例是用[正则表达式 literal](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Creating_a_regular_expression)声明的。但是，如果您使用[`new RegExp()`构造函数，则](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Creating_a_regular_expression)**不允许**V8缓存正则表达式，因为它可能会在运行时更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T09:29:55.670

[http://code.google.com/p/v8/issues/detail?id=933#c3](http://code.google.com/p/v8/issues/detail?id=933#c3)

> 在 Chrome 9 中，我们删除了 RegExp 结果的原始缓存。这意味着我们不再花费不切实际的时间来一遍又一遍地对相同的输入重复相同的操作。最初添加缓存是为了说明太简单的基准（当时包括我们自己的）太容易通过添加这种缓存来“游戏”（这在现实世界的场景中没有区别）。自那以后，大多数基准测试都得到了很大改进，以至于我们决定删除缓存（及其不可避免的开销）。缓存是在 v8 修订版 4083（在 Chrome 5 中发布）中添加的，并在修订版 5755 中删除（将在 Chrome 9 中）

# oop - 纯制造和间接之间的区别

> ID：14352106
> 
> 赞同：14
> 
> 时间：2013-01-16T05:48:32.640
> 
> 标签：oop, design-patterns, grasp

我试图找到可以解释这两者之间差异的教程和好的示例，但找不到任何信息。

纯粹的制造和间接行为是为了创建中间对象并将职责分配给中间对象，那么任何人都可以解释这些设计模式之间的区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T13:36:01.240

如果要在组件之间创建较低的耦合，则使用*间接。*Larman 在应用 UML 和模式中建议的示例是一个 TaxCalculatorAdapter 类。为了使客户端不必知道可能的适配器的内部工作原理，他用间接方式隐藏它们，只公开所需的 API。这种间接性将与适配者高度耦合，但仅与客户端松散耦合。

`PersistentStorage` *from Pure Fabrication*确实是一个*间接*函数（Larman 在书中这样说），因为它提供了较低的耦合。`Pure Fabrication`不仅如此，它还创建了不属于您的域模型的对象。

Larman 给出的例子是一个域类`Sale`。由于`Sale`要保存所有数据，因此也可以保存保存销售的逻辑（*信息专家*）。但是，持久性逻辑与销售的概念无关，因此该类将变得不连贯。此外，通过将 Sale 耦合到特定的 DB API，您可以限制重用（间接救援）。而且由于保存是一项一般活动，您可能还会在同样需要保存的对象中复制代码。为避免这种情况，您需要编造一些东西（纯粹的制造），这意味着您创建的东西不属于域模型（此处为： a `PersistentStorage`），但仍会捕获应用程序中的基本活动。

因此，Pure Fabrication 它是一种专业化，或者更确切地说是间接的一种变体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-28T06:58:22.003

纯制造和间接都是[GRASP](https://en.wikipedia.org/wiki/GRASP_(object-oriented_design))的原则。以下dzone 文章中的示例可能会清除您对[和](https://dzone.com/articles/solid-grasp-and-other-basic-principles-of-object-o)`pure fabrication`的概念`indirection`。

## 纯制造：

我们知道银行系统的域模型包含诸如`Account`、`Branch`、`Cash`、`Check`、`Transaction`等类。域类需要存储有关客户的信息。为了做到这一点，一种选择是将数据存储责任委托给域类。此选项将降低域类的内聚性（不止一项职责）。最终，这个选项违反了`SRP`原则。

另一种选择是引入另一个不代表任何领域概念的类。在银行示例中，我们可以引入一个名为 的类`PersistenceProvider`。此类不代表任何域实体。此类的目的是处理数据存储功能。因此`PersistenceProvider`纯属捏造。

## 间接：

这一原则回答了一个问题：*你如何使对象以一种使它们之间的联系保持弱的方式进行交互？*

解决方案是：*将交互的责任交给一个中间对象，使不同组件之间的耦合保持在较低水平。*

例如，软件应用程序使用不同的配置和选项。为了将域代码与配置解耦，添加了一个特定的类 - 如以下清单所示：

```
Public Configuration{
  public int GetFrameLength(){
    // implementation
  }
  public string GetNextFileName(){
  }
 // Remaining configuration methods
} 
```

这样，如果任何域对象想要读取某个配置设置，它将询问配置类对象。因此，主代码与配置代码解耦。

如果你读过纯制造原理，这个配置类就是一个纯制造的例子。但是间接的目的是创建解耦。另一方面，纯粹制造的目的是保持领域模型的整洁，只代表领域概念和职责。

许多软件设计模式，如`Adapter`、`Facade`和 ，`Observer`都是间接原则的特化。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-16T03:37:38.980

纯制造类是一类在设计的问题域中没有概念的类，该类具有高内聚^，低耦合和重用。间接它解决了避免事物之间直接耦合的责任分配问题。它还确保对象之间的低耦合并保持更高的驻留能力。

# html - CSS 响应式设计断点

> ID：14352108
> 
> 赞同：4
> 
> 时间：2013-01-16T05:48:40.830
> 
> 标签：html, css

我在 768 480 和 225 处使用断点。这对于我的响应式设计是否足够或更推荐。

768 + | 电脑

480 - 768 | 药片

225 - 480 | 手机

225 < | 电话/最小浏览器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T05:58:22.300

我什至不会担心尝试为显示器类型进行设计，因为有太多的分辨率可能无法根据它做出决定。

相反，只需从显示器上的最大分辨率开始，然后慢慢缩小浏览器窗口，直到找到内容的自然断点，并在它们出现时修复它们。如果你这样做了，那么那里的分辨率就无关紧要了，它将是新显示器的未来证明。

您绝对不必丢弃当前的断点，只需检查它们以查看是否需要添加更多或使当前断点更有效的方法。

[这是一篇深入探讨该主题的 Smashing Mag 文章。](http://mobile.smashingmagazine.com/2012/10/24/beyond-common-media-query-breakpoints/)

# magento - 帮助台终极 magento 扩展

> ID：14352110
> 
> 赞同：0
> 
> 时间：2013-01-16T05:48:53.170
> 
> 标签：magento

有谁知道为什么 Magento 的用户部分没有显示到帮助台的链接？有什么我想念的吗？我已经正确安装了扩展，在后端我可以看到所有选项都很好。后端的帮助台部分也很好，但前端没有显示。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:50:47.933

这是在黑暗中的纯粹猜测，但是

1.  您登录的用户是否具有此菜单的 ACL 角色？

2.  如果您使用的是管理员/超级用户帐户，您是否已登录并退出？有时需要重建 ACL 角色，这些角色缓存在管理员用户的会话对象中。

# javascript - div滚动条上的Jquery Blur事件

> ID：14352112
> 
> 赞同：3
> 
> 时间：2013-01-16T05:49:03.037
> 
> 标签：javascript, jquery, jquery-ui

我有一个带有滚动条的 div。当我单击滚动条将其向下拖动以查看 div 列表时，使用 Firefox 会触发模糊事件并隐藏我设置为在触发模糊时隐藏的 div。使用滚动条时如何防止模糊触发：

```
$("#mydiv").blur(function () {
    $('#mydiv').fadeOut();
    console.log("fadeout blur");
}); 
```

我使用以下方法显示此 div：

```
 $('#mydiv').fadeIn(); 
```

我希望 div 在不活动时隐藏，但在我尝试单击滚动条时不隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:30:57.517

可能这就是你要找的

```
$(document).ready(function(){
        $('#mydiv').fadeIn();   

        $("body").bind('click', function(ev) {
        var myID = ev.target.id;
        if (myID !== 'mydiv') {
            $('#mydiv').fadeOut();
        }
    });
}); 
```

这会将 click 事件与 body 绑定，并检查触发 click 事件的元素的 id。如果它与 DIV 不匹配，则 div 将关闭，否则 div 将始终打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:11:16.423

你可以这样做：

```
$(window).scroll(function() {
   $('#mydiv').css('display','block');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:15:25.363

```
var scrolling = false, scrollingTimeout, blurTimeout;

$(window).scroll(function () {
    if (scrollingTimeout) {
        clearTimeout(scrollingTimeout);
    }
    scrolling = true;

    scrollingTimeout = setTimeout(function(){
        scrollingTimeout = null;
        scrolling = false;
    }, 300);
});
$("#mydiv").blur(function () {
    var that = $(this);
    if (!scrolling) {
        that.fadeOut();
    } else {
        if (blurTimeout) {
            clearTimeout(blurTimeout);
        }
        blurTimeout = setTimeout(function () {
            blurTimeout = null;
            that.focus();
        }, 600);
    }
}); 
```

请参阅[jQuery scroll() 检测用户何时停止滚动](https://stackoverflow.com/questions/9144560/jquery-scroll-detect-when-user-stops-scrolling)和[Can I 在 jQuery 上声明滚动事件开始和结束的逻辑？](https://stackoverflow.com/questions/4096429/can-i-declare-logic-on-jquery-for-the-start-and-end-of-a-scrolling-event)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T13:20:33.280

似乎您的滚动条没有在 div 中形成&单击它会导致调用模糊。请检查用于显示 div 滚动的 css/样式是否符合您的预期（在 div 内形成滚动条），如果是这种情况，则在两者（div 和滚动条）上使用父 div 并使用 focusOut/blur 事件在包含两者的父 div 上。

# html - 将 HTML 选项值设置为空字符串

> ID：14352113
> 
> 赞同：6
> 
> 时间：2013-01-16T05:49:13.387
> 
> 标签：html

我有以下用于在页面上创建的 HTML 代码：

```
<select>
    <option value="" selected>test</option>
    <option value="test2">test2</option>
</select> 
```

但是在 Google Chrome 的 DOM 检查器中查看 HTML 时，它看起来像这样：

```
<select>
    <option value selected>test</option>
    <option value="test2">test2</option>
</select> 
```

看到不同？对于第一个`<option>...</option>`，`value=""`是变成了正义`value`。该值在设置为空字符串时被简单地丢弃。有没有办法将选项标签的值设置为空字符串？我需要这个，因为我要从数据库中提取元素来创建`<select>`菜单。每个都`<option>`将其`value`设置为数据库元素的值，其中一些元素将空字符串作为其值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-08T08:11:46.913

它只是 Google Chrome 的 DOM 检查器的符号（从属性中删除 '=""'）。如果您使用 FireBug 检查它或只是查看源代码，那么您会发现它没问题。

您的示例代码在 Google Chrome 中生成：

![Chrome 的检查员删除引号和等号](../Images/c7d22c467d08e0d024b4190d2f1a7ecb.png)

这是 FireFox 中的结果：

![FireBug 正确显示](../Images/eb1ffd6ece974de4e05ac5863bb2088d.png)

所以不用担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:45:21.413

正如 Hanky 所说，您可以使用 bob， `selected = "selected" or ""` 因此代码将是：

```
<select>
<option value="" selected="selected">test</option>
<option value="test2">test2</option> 
```

或者

```
<select>
<option value="" selected="">test</option>
<option value="test2">test2</option> 
```

检查这篇文章可能会有所帮助： [W3 选项语言参考](http://www.w3.org/TR/html-markup/select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T05:50:37.470

```
<option value="" selected="selected">test</option> 
```

这意味着值是空字符串。即使 chrome 中的 dom 检查器显示你喜欢

# mysql - 在数据库中实现版本系统

> ID：14352117
> 
> 赞同：1
> 
> 时间：2013-01-16T05:49:23.107
> 
> 标签：mysql, ruby-on-rails, database, version-control, version

请允许我陈述我的情况。

我有一个应用程序，我可以在其中处理一些存储在数据库中的数据。例如：游戏应用程序。

1）现在，假设我的应用程序运行在版本 5。在玩我的应用程序的任何时候，如果我觉得当前添加的功能（功能 5）不合适，我想切换回以前的版本应用程序（例如，实现了功能 1、2、3 和 4 的版本 4）。

2）这意味着我需要在数据库级别实现版本控制系统，以便我可以使用以前版本（版本 4）所需的数据运行我的应用程序。简单来说，我不想要我最近添加到生产数据库中的任何数据（与功能 5 相关），以便我可以在版本 4 上运行我的应用程序。

3）后来，经过更多的开发，当我觉得功能 5 稳定时，我想签入我的应用程序的版本 6 并使其上线。

4) 版本 1、2、3 和 4、5 就像检查点：那是我决定我的应用可以上线的阶段。我希望能够在版本之间切换并在需要时使它们生效。

5）另外，澄清：然后不能修改签入的版本。这意味着一旦设置了检查点，例如版本 3，就无法对该版本进行任何更改。

请说明在数据库级别实施此版本控制系统的适当方法是什么。我想到了一些选项，例如，使用 hive 在版本点备份数据，并在 hive 中存储尽可能多的应用程序数据版本。我确实认为这会起作用，但它肯定看起来不像笨蛋。我想知道的是 - 我所说的方法是一个足够好的选择，还是有一些开源应用程序可以让我立即对数据库中的数据进行版本控制？任何其他建议或想法都非常欢迎和赞赏。

**建议实施**：

根据@Sameera 的回答，我想做什么。

1）创建一个新版本表并将其与应用程序表相关联。

2) 将以前与应用程序表相关的其他表关联到版本表。

3) 每个版本表都有一个状态属性 0、1 或 2：截至目前，1 表示 dev，2 表示 live，0 表示 dead。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:06:37.493

我认为您的要求有点不寻常:)并且建议的解决方案也将：D（假设我的问题是正确的）

以下是我认为可行的基本结构

您可以有一个包含所有版本和新功能链接的表格

例如：如果您将模块添加到`pick a gun`，在版本 5 中，您的链接`pick a gun`将添加到带有版本号的表中

```
version | module 
1       | basic_game
2       |  gun 
```

因此，根据用户选择的版本，您可以动态加载所有模块及其布局。

这样一来，您的用户将不会对数据库进行新的更改，并且您不想对数据库进行版本控制。（另一件事是即使您对数据库进行版本控制，您也应该有一种控制代码的方法）

我不确定这是否适用于您，但这是我能想到的一种解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:58:57.997

你说的是使用[版本控制系统](http://en.wikipedia.org/wiki/Revision_control)，比如[Git](https://github.com)、[Mercurial](http://mercurial.selenic.com)或[SVN](http://subversion.tigris.org)。我会这样做：

*   签入迁移文件和示例数据以加载到数据库中，以及代码。在迁移中，我会将数据加载到数据库中。
*   如果我需要还原，我会运行迁移以将数据库返回到“0”状态，然后使用代码存储库还原代码。然后我会重新运行迁移以将数据库恢复到其顶级迁移和内容。

Git 是一个很好的维护配置版本的系统。SVN 是一个仍然相关的旧备用。除非您已经使用版本控制系统一段时间并了解所有问题，否则不要尝试自己编写。

这是一个普遍的答案，但这是一个非常普遍的问题。

# javascript - 无法包含 JavaScript

> ID：14352118
> 
> 赞同：0
> 
> 时间：2013-01-16T05:49:31.600
> 
> 标签：javascript, jquery, yii

我正在尝试用我的 Yii 项目实现[超大滑块。](http://www.buildinternet.com/project/supersized/)为了实现，我必须在视图中实现一些 javascript。所以我决定使用 registerscript 方法。但我认为我无法初始化图像的目录位置。你可以帮帮我吗

我的代码是

```
<?php   

$script= <<<EOD
jQuery(function($){             
    $.supersized({
        slide_interval          :7000,  // Length between transitions
    transition              :1,     // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
    transition_speed    :1000,  // Speed of transition
    slide_links     :'blank',// Individual links for each slide (Options: false, 'num', 'name', 'blank')
    slides          :[// Slideshow Images
                $directory = Yii::getPathOfAlias('webroot').'/uploads/';
                $images = glob($directory . "*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
                foreach($images as $image)
                echo "{image : 'http://localhost/uploads/" . $image . "', title : '" .$image . "'},";
                ]   
            });
            });
EOD;
Yii::app()->clientScript->registerScript('customFnc', $script, CClientScript::POS_READY);?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:16:14.253

试试这个方法。。

```
<script>
            jQuery(function($){             
                $.supersized({
                  slide_interval          :7000,  // Length between transitions
                  transition              :1,     // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                  transition_speed    :1000,  // Speed of transition
                  slide_links     :'blank',// Individual links for each slide (Options: false, 'num', 'name', 'blank')
                  slides          :[// Slideshow Images
     <?php
                            $directory = Yii::getPathOfAlias('webroot').'/uploads/';
                            $images = glob($directory . "*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
                            foreach($images as $image)
                            echo "{image : 'http://localhost/uploads/" . $image . "', title : '" .$image . "'},"; ?>

                            ]   
                        });
                        });
            </script> 
```

# php - 使用 mysql 数据库的 Android 登录活动

> ID：14352125
> 
> 赞同：1
> 
> 时间：2013-01-16T05:50:05.660
> 
> 标签：php, android, mysql, phpmyadmin

嗨，我是 android 新手，我正在开发一个有登录屏幕的应用程序。

我尝试了很多教程，但我不确定如何将 mysql 数据库连接到我的 android 应用程序。在所有教程中，他们都使用 php 将 android 应用程序连接到数据库。

我想知道的是，我需要在哪里放置 php 文件，以及我需要在哪里以及如何创建 php 文件。

我正在使用 mysql 工作台创建数据库。

我正在使用 eclipse 4.2 编写 java 代码。

嗨，我正在使用以下代码来检查我输入的用户名是否正确以及 php 代码，但问题是它总是给出不正确的用户名。

```
String response = null;
try {
response = CustomHttpClient.executeHttpPost("http://192.168.3.27/abc/check.php", postParameters);  //Enetr Your remote PHP,ASP, Servlet file link
String res=response.toString();
// res = res.trim();
res= res.replaceAll("\\s+","");
//error.setText(res);
error.setText(res);
if(res.equals("1")){
    Intent myIntent = new Intent(LoginActivity.this, HomeActivity.class);           
startActivity(myIntent);

}
else
error.setText("Sorry!! Incorrect Username or Password"); 
```

这是我的 php 代码。

```
<?php
$un=$_POST['username'];
$pw=$_POST['password'];
//connect to the db
$user = ‘root’;
$pswd = ‘root’;
$db = ‘mylogin’;
$conn = mysql_connect(‘localhost’, $user, $pswd);
mysql_select_db($db, $conn);
//run the query to search for the username and password the match
$query = “SELECT * FROM userpass WHERE login_id = ‘$un’ AND login_pass = ‘$pw’”;
$result = mysql_query($query) or die(“Unable to verify user because : ” . mysql_error());
//this is where the actual verification happens
if(mysql_num_rows($result) > 0)

echo 1;  // for correct login response
else
echo 0; // for incorrect login response
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:10:41.447

[这](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)是您正在搜索的完整教程..

就像您的普通 html 页面一样，将登录值从 android 设备发布到 url 并在 php 文件中进行身份验证，如示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:55:03.157

为此，您应该创建一个 php 应用程序并将其托管在服务器上。然后使用 php 创建函数（或在线可用的链接），这些函数将被 android 应用程序命中，它们（函数）会将数据输出为 json_encoded，这是 android 所需的。您可以轻松地使用这种方式来设置您的应用程序。
我通常使用 Codeigniter 框架，它的工作原理是这样的。

```
myapp/
    system/
    application/
         controllers/
             mycontroller 
```

mycontroller 有一些这样的功能

```
function test(){
    $username = $this->uri->segment(3);
    $password = $this->uri->segment(4);
    // other stuff like fetch data from db table in the variable $data

    header('Content-Type: application/json');
    echo json_encode($data);
} 
```

安卓需要这个

```
http://testdomain/myapp/index.php/mycontroller/test/username/password 
```

编辑：
如果你使用普通 php，你可以这样做

1.  在您的服务器上创建一个文件夹。
2.  创建文件test.php 创建连接文件connection.php
3.  在第一个文件中包含第二个文件。
4.  在 test.php 中创建一个名为的函数

`include('connection.php');`

 ````
function index($username,$password)
{
    //query database table
    //if result is success full
    //  $data   =   array('message'=>'login success');
    //else
    //  $data   =   array('message'=>'login failed');
    //
    //header('Content-Type: application/json');
    //echo json_encode($data);  
} 
````  `从地址栏你可以像这样访问它

```
 http://tomcatserver/test.php/index/testuser/testpassword 
```

你应该做一些研究 php 是如何工作的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:02:14.450

我想简要介绍一下raheel的回答，但以我自己的方式。重要的是您需要服务器-客户端通信来访问您的 my sql。为此，您需要创建一个服务器来响应来自您的 android 应用程序的请求。您的要求如下

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet("http://example.com/script.php?var1=androidprogramming");
try {
    HttpResponse response = httpclient.execute(httpget);
    if(response != null) {
        String line = "";
        InputStream inputstream = response.getEntity().getContent();
        line = convertStreamToString(inputstream);
        Toast.makeText(this, line, Toast.LENGTH_SHORT).show();
    } else {
        Toast.makeText(this, "Unable to complete your request", Toast.LENGTH_LONG).show();
    }
} catch (ClientProtocolException e) {
    Toast.makeText(this, "Caught ClientProtocolException", Toast.LENGTH_SHORT).show();
} catch (IOException e) {
    Toast.makeText(this, "Caught IOException", Toast.LENGTH_SHORT).show();
} catch (Exception e) {
    Toast.makeText(this, "Caught Exception", Toast.LENGTH_SHORT).show();
} 
```

输出的消耗将是：

```
private String convertStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    try {
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }
    } catch (Exception e) {
        Toast.makeText(this, "Stream Exception", Toast.LENGTH_SHORT).show();
    }
    return total.toString();
} 
```

那么服务器端可以是这样的：

```
$connection = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD) or die('Unable to connect');
$db = mysql_selectdb(DB_NAME,$connection) or die('Database not found');
if(isset($_GET['var'])) :
    $query = "SELECT [a few parameters] FROM [some table] WHERE [some conditions]";
    $resultset = mysql_query($query);
    $row = mysql_fetch_array($resultset)
    echo $row['[column name]'];
else:
    echo "No get Request Received";
endif; 
```

这些只是您可以构建的片段

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:16:43.253

> 我到底需要在哪里放置 php 文件

您需要将 PHP 文件放在服务器中。（您可以使用本地主机，即您的机器，但对于外部设备，您需要将其保存在您需要购买域和托管服务的网络服务器上。）

> 我需要在哪里以及如何创建 php 文件。

您可以在您的机器本身中创建一个 PHP 文件。它就像创建一个文本文件一样简单，但扩展名为`.php`. 在 Windows 上使用[wamp](http://www.wampserver.com/en/)（LAMP for linux）你可以测试它。它有一个MySQL。LAMP 和 WAMP 默认有 apache 服务器。

在您完成编写 php 代码和测试后不久，您可以通过 FTP 将文件传输到您的网络服务器。现在要配置 MySQL 数据库，您实际上可以使用网络服务器上的控制面板。

您需要使用 android 应用程序的 URL 来链接 PHP 文件，这些 PHP 文件依次与 MySQL 交互。对于登录，假设您已经创建了一个 php 文件作为 login.php。在您的本地主机上，您可以将其称为`http://localhost/myapp/login.php`如果您需要在您购买的网络服务器上获取它，那么您的 URL 将具有`http://www.yourwebsite.com/myapp/login.php`. 请注意，myapp 只是您上传 php 文件的文件夹。

现在它只是一种您可以实际为您的 android 应用程序提供 PHP 和 MySQL 的方式。我认为教程已经教给您有关使用 php 和 mysql 连接的知识。对于数据交换，您需要了解 XML 或 JSON，我认为后面的教程已经为您介绍了它。

你甚至有一个用于 Eclipse 的插件来使用 php。只需通过互联网获得有关如何安装它的帮助。[该](http://www.youtube.com/watch?v=3j5lxcV_320)视频可能对您有所帮助。`

# ios - UITableViewController中self.navigationController.view和self.view的区别

> ID：14352126
> 
> 赞同：2
> 
> 时间：2013-01-16T05:50:11.393
> 
> 标签：ios, uitableview

`self.navigationController.view`关于和之间的区别`self.view in UITableViewController`，据我所知：

1.  self.view 小于`self.navigationController.view`(44 px)
2.  self.view 用于执行`loadView()`或从 nib 文件加载。

但是，我想我还处于了解的最开始`UITableViewController`

有没有人可以解释更多？例如，我无法理解以下内容：

1.  正确的：`[_packListPickerPopover presentPopoverFromRect:CGRectMake(0, 0, 50, 50) inView:self.navigationController.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];`

2.  错误的：`[_packListPickerPopover presentPopoverFromRect:CGRectMake(0, 0, 50, 50) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:09:36.153

`self.navigationController`返回嵌入控制器（self）的导航控制器。换句话说，导航控制器中有一个子/祖先控制器，即您的`UITableViewController`. 我建议阅读 Apple 关于 View Controllers 的文档，以对 View Controller 层次结构有一个基本的了解。

虽然`UITableViewController`嵌入在导航控制器中，但这并不妨碍它的 size 属性变大。如果要更改视图，则使用视图的 frame 属性设置其大小。

[查看 iOS 控制器编程指南](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# winrt-xaml - 以编程方式在堆栈面板上应用倾斜效果

> ID：14352127
> 
> 赞同：0
> 
> 时间：2013-01-16T05:50:11.823
> 
> 标签：winrt-xaml

我在运行时创建我的 WinRT 应用程序页面的元素，因为需要动态创建内容。

我正在查看 Callisto 和 Telerik 控件/效果，它们都在设计时（在 xaml 上）应用了倾斜效果。

有没有办法在运行时应用上述效果？当我在代码上创建我的堆栈面板时 - 后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:07:33.097

最终做了一个自定义用户控件，这是我最后的手段。

# mysql - 带有 ForeignKey 和 Fixture 的 Django 数据库

> ID：14352135
> 
> 赞同：0
> 
> 时间：2013-01-16T05:51:03.797
> 
> 标签：mysql, database, django, foreign-keys, django-fixtures

我正在尝试实施一个餐厅主管网站。

所以基本上，我有州、城市、餐馆和酋长。

```
Class State(models.Model):
   name = models.CharField(max_length=30)

Class City(models.Model):
   name = models.CharField(max_length=30)
   state = models.ForeignKey(State)

class Restaurant(models.Model):
   name = models.CharField(max_length=30)
   state = models.ForeignKey(City)

class Chief(models.Model):
   name = models.CharField(max_length=30)
   restaurant = models.ForeignKey(Restaurant) 
```

规则：

*   州和城市的关系是固定的。一个城市不能迁移到另一个州。但是可能会添加新的州和城市。

*   一家餐馆可以搬到另一个城市。

*   酋长可以搬到另一家餐厅。

*   一家餐厅可以有多个酋长。

1）这是一个正确的模型吗？

2）我通过管理表单上传了一些数据，还有一些来自固定装置，但有时当我需要将酋长换到另一家处于不同状态的餐厅时，当我尝试查看网站时会导致问题（**manage.py loaddata 固定装置**有效美好的） 。但是在同一个城市换到不同的餐厅是没有问题的。

我愿意接受任何实用的 MySQL/Django 书籍建议。

# netty - 如何从正常流程之外访问 Netty 处理程序方法

> ID：14352137
> 
> 赞同：0
> 
> 时间：2013-01-16T05:51:14.347
> 
> 标签：netty

我正在尝试将 Netty（版本 3.6.1.final）集成到我们当前的系统中，这样我就可以替换当前的 NIO 代码。

目前，我们有一个消息传递总线，其中事件排队等待其他侦听器处理，并将另一个事件放回总线上以进行进一步处理。

在我的 Netty 业务逻辑处理程序的 messageReceived() 方法中，我将向总线添加一个输入请求。我要传递的一件事是来自 Netty 事件消息的数据。

我认为我应该在这个 InputEvent 中传递 ChannelHandlerContext 以及接收到的数据/消息。这样最终在处理 OutputEvent 时，它可以使用最初传递的 ChannelHandlerContext 将处理后的数据发送回正确的 Netty Channel 上的请求客户端。

那么处理OutputEvent 的Output 任务如何与Netty 绑定呢？

我是否使用 ChannelHandlerContext 作为输入处理数据发出一些调用。我不想捆绑输出任务。

来自 Netty 处理程序的代码片段。

```
public void messageReceived(
        ChannelHandlerContext ctx, MessageEvent e) {

    byte[] message = (byte[])e.getMessage();

    try {
            data.add(message);
        }
    catch( IOException ioe )
        {
            logger.error(ioe);
        }

    InputEvent ie = new InputEvent( ctx, this, data.getBuffer() );

    try {
              bus.enqueue(ie);
    }
    catch( Exception ex )
   {
      logger.error(ex);
   } 
```

来自输出处理器的代码片段。

```
public void run() {

    // note that the OutputEvent (event) is available here.  This is not a Netty event.
    ChannelHandlerContext ctx = event.getHandlerContext();
    ClientChannel handler = event.getHandler();

    // I need to send the data in event.getBuffer() back.

// Now what do I do here???

…
…
…

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:48:59.997

您只需致电：

```
InputEvent event = ...
ChannelHandlerContext ctx = ....
ctx.write(event.getBuffer()); 
```

或者：

```
InputEvent event = ...
Channel channel = ....
channel.write(event.getBuffer()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:45:33.473

```
 // Make a new connection.
    ChannelFuture connectFuture =
        bootstrap.connect(new InetSocketAddress(host, port));

    // Wait until the connection is made successfully.
    Channel channel = connectFuture.awaitUninterruptibly().getChannel();

    // Get the handler instance to retrieve the answer.
    FactorialClientHandler handler =
        (FactorialClientHandler) channel.getPipeline().getLast();//get("your handler name") 
```

# jquery - 来自数组的多个 ajax 调用并在完成时处理回调

> ID：14352139
> 
> 赞同：22
> 
> 时间：2013-01-16T05:51:18.247
> 
> 标签：jquery, ajax, callback, deferred

我之前在 jQuery 中使用过承诺 - 但我无法将它应用于这种情况。我更喜欢使用 $.when() 和 $.done() 方法来实现这一点。

据我了解，我需要构建一个 $.Deferred 对象来记录请求以及这些请求何时完成 - 触发回调。在我下面的代码中，回调在 ajax 请求*之前而不是之后触发 - 也许我只需要一些睡眠*

我知道我的代码不完整，我一直在努力通过添加 for 循环来应用它。

[http://jsfiddle.net/whiteb0x/MBZEu/](http://jsfiddle.net/whiteb0x/MBZEu/)

```
var list = ['obj1', 'obj2', 'obj3', 'obj4', 'obj5'];
var callback = function() {
  alert("done");
};
var requests = [];

var ajaxFunction = function(obj, successCallback, errorCallback) {
  for(i = 0; i < list.length; i++) {
    $.ajax({
      url: 'url',
      success: function() {
            requests.push(this);
      }
    });
  }
};
$.when($.ajax(), ajaxFunction).then(function(results){callback()}); 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-16T05:59:26.110

的参数`$.when`应该是的返回值`$.ajax`，也不需要单独调用——这没有意义。你想要这样的东西：

```
for (i = 0; i < list.length; i++) {
   requests.push($.ajax(...));
}
$.when.apply(undefined, requests).then(...) 
```

需要的原因`.apply`是因为`$.when`可以接受多个参数，但不能接受参数数组。 `.apply`基本上扩展为：

```
$.when(requests[0], requests[1], ...) 
```

这也假设请求可以按任何顺序完成。

[http://jsfiddle.net/MBZEu/4/](http://jsfiddle.net/MBZEu/4/) - 请注意，在所有成功消息之后，控制台都会记录“完成”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-10T18:21:17.720

我分享一个简单的示例，可以帮助您处理多个请求及其响应：

```
var arr = [
    $.ajax({url:"test1.php"}),
    $.ajax({url:"test2.php"}),
    $.ajax({url:"test3.php"})
];
$.when.apply( undefined, arr ).then(function() {
    var objects=arguments;
    console.dir(objects);
}); 
```

# php - 为什么我可以访问函数外部的变量，但不能访问函数内部的变量？

> ID：14352144
> 
> 赞同：1
> 
> 时间：2013-01-16T05:51:45.090
> 
> 标签：php

我有一堆 HTML 和 PHP 代码，在模板文件中它工作正常，但我试图把它放在 PHP 函数中，现在当我运行页面时出现错误`Undefined variable: variableName`

这是一些代码：

```
function testFunction()
{
    foreach ($variableName as $variable):
        echo 'tasf';
    endforeach;
} 
```

在该函数内部`$variableName`找不到，但如果我将它移到该函数之外，它就可以找到。如果重要的话，我会在 symfony php 模板文件中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T05:53:21.740

**变量范围**的简单问题。如果该变量是在函数外部定义的，那么您需要将它传递到那里或将其声明为全局变量

[在此处查看手册](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T05:53:35.393

[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)

```
$str = 'Hello World';
echo $str; // works fine

function foo($bar){
    echo $bar; // passed as function argument. works fine
}

foo($str);

function bar(){
    global $str;
    echo $str; // passed from global. works fine
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T05:57:41.890

函数作用域意味着在函数内部引用的变量，必须在其中声明，或者传递...

```
function testFunction($variableName)
{
    foreach ($variableName as $variable):
        echo 'tasf';
    endforeach;
} 
```

这是[关于变量作用域的 PHP 手册的链接](http://php.net/manual/en/language.variables.scope.php)。

在任何情况下，您都不应诉诸使用`global`变量。总是有更好的方法，这样做被认为是不好的做法。它使您的代码难以遵循，因为这意味着其他任何人都可能必须阅读*所有*代码才能了解正在发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T05:53:35.733

您需要使用[`global`](http://php.net/manual/en/language.variables.scope.php)关键字来实现这一点。

`global`但是，应该谨慎使用，并且可能会产生意想不到的副作用。

# ruby - Ruby 构建一个数组

> ID：14352161
> 
> 赞同：-1
> 
> 时间：2013-01-16T05:53:51.727
> 
> 标签：ruby, arrays, multidimensional-array

啊。在这里尝试弄清楚如何在 Ruby 中构建我的数组时遇到了麻烦。

所以我正在循环一个结果，我想将类别字段添加为键并拥有它，这样如果下一行具有相同的类别，它就会被放入该类别。如果没有，它会创建一个新数组并将其添加到其中。

这是我到目前为止所拥有的。

```
data = Array.new
results.each do |row|
   data[row.category].push row.field
end 
```

我知道这是行不通的。我希望最终成为（在循环之后）一个包含所有's`data[row.category]`的数组`row.field`

所以我最终得到了一个看起来像这样的数组。

```
[['Dogs', 5, 12, 2], ['Cats', 4, 5, 9], ['Fish', 25, 82, 23]] 
```

所以不管我做了多少循环，如果我把它推到一个已经存在于数据中的数组中，那么它只会追加它，如果数组不存在，它会创建它然后追加它。

在 PHP 中，我会简单地这样做：

```
$data[$row['category']][] = $row['field'] 
```

用空的 [] 表示如果没有则创建一个新数组。我如何在 Ruby 中做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:57:57.347

是的，您似乎对 PHP 及其关联数组（在任何其他语言中都不称为数组 :)）感到困惑。你需要一个哈希。试试这个片段：

```
data = results.each_with_object({}) do |row, memo|
  memo[row.category] ||= []  # create array unless it exists
  memo[row.category] << row.field
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:55:49.620

与 PHP 不同，您不能使用任何对象作为[`Array`](http://www.ruby-doc.org/core-1.9.3/Array.html). 在 Ruby 中，我们使用[`Hash`](http://www.ruby-doc.org/core-1.9.3/Hash.html)es 将任意对象与其他对象关联起来。

如果您将代码更改为：

```
data = Hash.new { |hash, key| hash[key] = [] }

results.each do |row|
   data[row.category] << row.field
end 
```

# jquery - Jquery表单提交空白值

> ID：14352162
> 
> 赞同：0
> 
> 时间：2013-01-16T05:54:05.017
> 
> 标签：jquery, html, grails, gsp

我在使用 Jquery 模式对话框时遇到了一些麻烦。我在这里要做的是将表单提交给控制器，但是在我单击确定后提交空白值。这是 Jquery 代码：

```
<script>
  $(function() {
    var username = $( "#username" ),
      email = $( "#email" ),
      password = $( "#password" ),
      allFields = $( [] ).add( username ).add( email ).add( password ),
      tips = $( ".validateTips" );

    function updateTips( t ) {
      tips
        .text( t )
        .addClass( "ui-state-highlight" );
      setTimeout(function() {
        tips.removeClass( "ui-state-highlight", 1500 );
      }, 500 );
    }

    function checkLength( o, n, min, max ) {
      if ( o.val().length > max || o.val().length < min ) {
        o.addClass( "ui-state-error" );
        updateTips( "Length of " + n + " must be between " +
          min + " and " + max + "." );
        return false;
      } else {
        return true;
      }
    }

    function checkRegexp( o, regexp, n ) {
      if ( !( regexp.test( o.val() ) ) ) {
        o.addClass( "ui-state-error" );
        updateTips( n );
        return false;
      } else {
        return true;
      }
    }

    $( "#create1" ).dialog({
      autoOpen: false,
      height: 300,
      width: 350,
      modal: true,
      buttons: {
        "Create an account": function() {
          var bValid = true;
          allFields.removeClass( "ui-state-error" );

          bValid = bValid && checkLength( username, "username", 3, 16 );
          bValid = bValid && checkLength( email, "email", 6, 80 );
          bValid = bValid && checkLength( password, "password", 5, 16 );

          bValid = bValid && checkRegexp( username, /^[a-z]([0-9a-z_])+$/i, "Username may consist of a-z, 0-9, underscores, begin with a letter." );
          // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
          bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );
          bValid = bValid && checkRegexp( password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );

          if ( bValid ) {
              $( this ).dialog( "close" );
              $('#createUser').submit();

          }
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      },
      close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
      }
    });

    $( "#create" ).button().click(function() {
        $( "#create1" ).dialog( "open" );
      });
  });
  </script> 
```

这是html代码：

```
 <div id="create1" title="Create new user">
              <form id="createUser" method="get" name="createUser">
              <p class="validateTips">All form fields are required.</p>

        <label for="name">Name</label>
        <input type="text" name="username" id="username" class="text ui-widget-content ui-corner-all" />
        <label for="email">Email</label>
        <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
        <label for="password">Password</label>
        <input type="password" name="password" id="password" value="" class="text ui-widget-content ui-corner-all" />
      </form>
    </div> 
```

那么，这里出了什么问题。我一直在寻找命名问题，但没有帮助。有谁知道如何解决这个问题？非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:16:13.283

我认为这里有问题，看起来您在提交表单之前清除了所有输入值。

```
if ( bValid ) {
  $( this ).dialog( "close" );
  $('#createUser').submit();
} 
```

和

```
close: function() {
  allFields.val( "" ).removeClass( "ui-state-error" );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:01:18.330

这可能会有所帮助，尝试从 html 页面获取值，例如`$( "#username" ).val();`

# c++ - 托管 C++/CLI .net 使用线程更新来自不同类的 GUI 组件/文本框

> ID：14352164
> 
> 赞同：0
> 
> 时间：2013-01-16T05:54:21.413
> 
> 标签：c++, .net, textbox, managed-c++

我无法从多个类更新 UI 组件。我已经宣布了两个班级。第一个是 ClassMain，它包含一个 GUI/UI 文本框。我还声明了第二个类，称为 ClassTwo。ClassTwo 的一个实例在主类中声明。

为了使情况进一步复杂化，我在等式中添加了线程。众所周知，线程很有用，因为它们可以防止 GUI 锁定并进一步提高 CPU 吞吐量。我所追求的是一种从两个类中安全更新文本框的解决方案，该类也是线程安全的。目前我不知道如何从 ClassTwo 访问 textBox1，所以我也很想看到一个解决方案。我在下面附上了我的代码（没有文本框更新，因为我不确定如何执行此操作）。
任何帮助表示赞赏。谢谢。

```
#pragma once

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace System::Threading;

ref class ClassTwo
{
public:
    ClassTwo(void);
    void DoProcessing(void);
};

public ref class ClassMain : public System::Windows::Forms::Form
{
public: //Constructor of Main Class
    ClassMain(void)
    {
            InitializeComponent();
            backgroundWorker1->RunWorkerAsync();
            backgroundWorker2->RunWorkerAsync();
    }

protected:
    ~ClassMain()    //Deconstructor of main class
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::TextBox^  textBox1;
private: System::ComponentModel::Container ^components;
//Decleare 2 background Worker threads to perform our calculation and logicwork
 //One will execute work through through ClassMain the other using ClassTwo's method of DoProcessing
private: System::ComponentModel::BackgroundWorker^  backgroundWorker1;
private: System::ComponentModel::BackgroundWorker^  backgroundWorker2;
void backgroundWorker1_DoWork( Object^ sender, DoWorkEventArgs^ e );
void backgroundWorker2_DoWork( Object^ sender, DoWorkEventArgs^ e );

//Declare an instance of Class Two
private: ClassTwo^ myclass2;

    void InitializeComponent(void)
    {
        this->textBox1 = (gcnew System::Windows::Forms::TextBox());
        this->SuspendLayout();
        this->textBox1->Location = System::Drawing::Point(42, 61);
        this->textBox1->Multiline = true;
        this->textBox1->Name = L"textBox1";
        this->textBox1->Size = System::Drawing::Size(409, 71);
        this->textBox1->TabIndex = 0;

        this->backgroundWorker1 = (gcnew System::ComponentModel::BackgroundWorker());
        this->backgroundWorker1->DoWork += gcnew System::ComponentModel::DoWorkEventHandler(this, &ClassMain::backgroundWorker1_DoWork);

        this->backgroundWorker2 = (gcnew System::ComponentModel::BackgroundWorker());
        this->backgroundWorker2->DoWork += gcnew System::ComponentModel::DoWorkEventHandler(this, &ClassMain::backgroundWorker2_DoWork);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(507, 189);
        this->Controls->Add(this->textBox1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->ResumeLayout(false);
        this->PerformLayout();
    }
};

void ClassMain::backgroundWorker1_DoWork( Object^ sender, DoWorkEventArgs^ e )
{
    this->myclass2->DoProcessing();
}

void ClassMain::backgroundWorker2_DoWork( Object^ sender, DoWorkEventArgs^ e )
{
    int j;
    for (j=0;j<10000;j++)
    {
        //Write the output to our textbox backgroundWorker1
        //this->textBox1->AppendText("Hello From ClassMain: The Value of j is" + j.ToString() + "\r\n");
    }
}

//Constructor of ClassTwo
ClassTwo::ClassTwo(void)
{
}
//DoProcessing of ClassTwo
void ClassTwo::DoProcessing(void)
{
    int i;
    for (i=0;i<10000;i++)
    {
        //Write the output from ClassTwo to our common textbox from backgroundWorker2
        //this->textBox1->AppendText("Hello From Class 2: The Value of i is" + i.ToString() + "\r\n");
    }
}

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

// Create the main window and run it
    Application::Run(gcnew ClassMain());
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:14:53.947

调用**textBox1->BeginInvoke(...)**或**textBox1->Invoke(...)**。BeginInvoke/Invoke 是 Control 类的方法，所有控件都从该类继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:49:50.423

创建一个新的 windows 窗体应用程序并将其粘贴到 Form1 构造函数的正下方。

```
 public void InvokeSafely(Control control, Action action)
    {
        if (control.InvokeRequired)
            control.BeginInvoke(action);
        else
            action();
    }

    public void RunsInAnotherThread(object dummy)
    {
        InvokeSafely(this, () => Text = "I made the title change safely");
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        ThreadPool.QueueUserWorkItem(RunsInAnotherThread);
    } 
```

它演示了使用 BeginInvoke 在 GUI 线程上运行委托。

# cocoa - 可可：natableview 调整大小

> ID：14352170
> 
> 赞同：0
> 
> 时间：2013-01-16T05:55:13.440
> 
> 标签：cocoa, resize, nstableview

我有一个简单的可可应用程序：`NSTableView`窗口中有 3 列。

我设置了窗口的最小和最大尺寸。我想：当我调整窗口大小时，3 列也会调整大小。这意味着：在最小和最大尺寸中，所有 3 列都显示出来，每列的宽度为 window.width/3。我尝试了以下代表`NSTableview`：

```
 - (CGFloat)tableView:(NSTableView *)tableView sizeToFitWidthOfColumn:(NSInteger)column; 
```

但它似乎没有被调用，因为当我调整窗口大小时，tableview-NSScrollview 的父视图被调整大小并且 tableview 的列不受影响。所以我想知道我怎样才能达到它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:22:16.387

由于我需要支持 10.6，我在 nib 文件中使用自动调整大小。

如果有更好的解决方案，请告诉我。

# windows-phone-8 - windows phone 8 中的快速应用恢复问题

> ID：14352171
> 
> 赞同：7
> 
> 时间：2013-01-16T05:55:15.870
> 
> 标签：windows-phone-8, windows-phone

当我在 WMAppManifest.xml 页面磁贴导航（导航 URL）中设置 ActivationPolicy="Resume" 在 Tombstone 状态下不起作用时，它会重新加载最后一个返回堆栈页面（URL）。它适用于休眠状态，无需重新加载页面。如果不设置此属性 (ActivationPolicy="Resume")，它将在两种状态 [休眠状态和墓碑状态] 中重新加载页面。

但是，当我们设置该属性时，我们如何实现对辅助 url 的导航。

请帮我 。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T15:58:45.953

添加 ActivationPolicy="Resume" 并不是让您的应用支持快速应用恢复所需的唯一步骤。我相信当您只设置一个属性时，您所描述的行为是正常的。我认为有几种方法可以实现“快速应用恢复”，但我发现这是最简单的方法。

像刚才描述的那样设置激活策略，然后执行以下操作：

进入“App”类中的 App.xaml.cs 添加：

```
 private bool reset 
```

然后，您应该有一个用于初始化 RootFrame 的 InitializePhoneApplication 方法。添加这个：

```
RootFrame.Navigating += RootFrame_Navigating;
RootFrame.Navigated += RootFrame_Navigated; 
```

然后你可以去添加这些方法：

```
void RootFrame_Navigating(object sender, NavigatingCancelEventArgs e)
{
    if (reset && e.IsCancelable && e.Uri.OriginalString == "/MainPage.xaml")
    {
        e.Cancel = true;
        reset = false;
    }
}

void RootFrame_Navigated(object sender, NavigationEventArgs e)
{
    reset = e.NavigationMode == NavigationMode.Reset;
} 
```

如果您正确实施此操作，您的应用程序应该从您所在的最后一页恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:41:48.617

这里同样的问题。我得到了启用了快速应用恢复的 WP8 应用程序。我可以在我的应用程序中固定指向特定页面的磁贴。当应用程序只是暂停时它工作正常，但是当应用程序被墓碑时，然后单击辅助磁贴与单击主磁贴具有相同的效果。

我只收到一个带有**NavigationMode == Back**和**Uri == /MainPage.xaml**的 RootFrameNavigating 事件。然后，该应用程序会显示在我暂停该应用程序之前存在的上一页。

我想这是针对特定场景的平台中的实际错误 -**快速应用恢复 + 墓碑应用 + 从固定磁贴导航**，我们作为开发人员无法解决。

# android - 在android中使用json将多个数据转换为单个字符串以进行上传

> ID：14352175
> 
> 赞同：0
> 
> 时间：2013-01-16T05:55:39.060
> 
> 标签：android, json

我必须将 30 页的数据提交到服务器。这些 30 页的数据将被制成一个字符串，我必须使用 json 将该单个字符串上传到服务器。

每个页面可能包含许多答案，可能是纯文本（我们从编辑文本中收到的值），来自复选框（是或否）等等.....请建议我将所有这些数据添加到单个字符串并使用 json 上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:37:58.440

根据评论，我怀疑您认为您需要将这些“页面”视为您连接的字符串。但是，我认为您忽略的是 JSON 在向其添加对象方面非常通用。

因此，假设您有想要发送到服务器的东西并且您调用它

```
JSONObject myEntireFile = new JSONObject(); 
```

您现在可以像这样随时向其中添加内容...

`JSONObject page1 = new JSONObject();`

`myEntireFile.put("page1", page1);`

同时，您可以将任何您想要的内容放在第 1 页中（因为那只是另一个序列化容器）。

您可以继续这样做，直到您准备好发送它，此时您只需调用 `myEntireFile.toString();` 它将您的对象转换为一个长的、格式良好的 JSON 字符串，然后您可以打开存储供以后使用。

# objective-c - 理解可变副本

> ID：14352182
> 
> 赞同：0
> 
> 时间：2013-01-16T05:56:21.820
> 
> 标签：objective-c, nsmutablearray

由于来自 Apress 的一个示例，对于搜索条件，它有一个灵魂：它将首先获取一个可变副本并搜索字符串，然后删除不在该字符串范围内的对象。

在 Mutable DeepCopy 中，它的功能如下：

```
@implementation NSDictionary(MutableDeepCopy)
-(NSMutableDictionary *)mutableDeepCopy{
    NSMutableDictionary *returnDict=[[NSMutableDictionary alloc]initWithCapacity:[self count]];
    NSArray *keys=[self allKeys];
    for(id key in keys)
    {
        id oneValue=[self valueForKey:key];
        id oneCopy=nil;
        if([oneValue respondsToSelector:@selector(mutableDeepCopy)])
            oneCopy=[oneValue mutableDeepCopy];
        else if([oneValue respondsToSelector:@selector(mutableCopy)])
            oneCopy=[oneValue mutableCopy];
        if(oneCopy==nil)
            oneCopy=[oneValue copy];
        [returnDict setValue:oneCopy forKey:key];

    }
    return returnDict;
}
@end 
```

当我不理解任何代码时，我将对其进行调试，因此我对其进行了调试，并且在开始时要显示整个数组时，在`if`语句中它将转到`oneCopy=[oneValue mutableCopy];`我想知道为什么它会选择此选择器而不是MutableDeep 选择器？我完全不能理解这个功能。这个功能的主要目的是什么？

搜索它有这个功能

```
-(void)handleSearchForTerm:(NSString *)searchTerm
{
    NSMutableArray * sectionsToRemove=[[NSMutableArray alloc]init];
    [self resetSearch];
    for(NSString * key in self.keys)
    {
        NSMutableArray * array=[names valueForKey:key];
        NSMutableArray *toRemove=[[NSMutableArray alloc]init];
        for(NSString * name in array)
        {
        if([name rangeOfString:searchTerm options:NSCaseInsensitiveSearch].location==NSNotFound)
            [toRemove addObject:name];
        }
        if([array count]==[toRemove count])
            [sectionsToRemove addObject:key];
        [array removeObjectsInArray:toRemove];
    }
    [self.keys removeObjectsInArray:sectionsToRemove];
    [table reloadData];
} 
```

对于重置搜索和恢复整体，它具有以下功能。我的问题是，在`self.keys`我们的帮助下删除了对象，`handleSearchForTerm`但是当我们去它时，`resetsearch`它会再次返回那些完整的键而没有任何删除，也许我的主要问题是我无法理解`Mutablecopy`和`DeepMutableCopy`.

```
-(void)resetSearch{
    NSMutableDictionary *allNamesCopy=[self.allNames  mutableDeepCopy];
    self.names=allNamesCopy;
    NSMutableArray *keyArray=[[NSMutableArray alloc]init];
    [keyArray addObjectsFromArray:[[self.allNames allKeys]sortedArrayUsingSelector:@selector(compare:)]];
    self.keys=keyArray;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:04:20.360

它们都有一些比较和对比功能......

首先比较：两者都是可变的，你可以改变对象本身。

第二个对比/差异：

MutableCopy：类似于 Call-by-Reference。

MutableDeepCopy：类似于按值调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:30:42.373

容器的副本（例如 NSArray）仅复制指向对象的指针并将它们发送保留。

mutableCopy 做同样的事情，但是可以修改生成的容器，即可以添加或删除指针。

深层副本也会复制各个元素。

以 NSMutableString 实例的 NSArray 为例。您不能修改数组本身，但可以更改每个可变字符串。现在，如果您复制数组并修改其中一个字符串，那么复制的数组也会发生更改，因为它的指针指向与第一个数组相同的实例。

如果您对数组进行深度复制并更改可变字符串，则不会修改新的数组元素。事实上，copy 总是制作一个不可变的副本。

# c# - 如何找到段组合来构建轨道：可能的子集总和

> ID：14352186
> 
> 赞同：0
> 
> 时间：2013-01-16T05:56:45.810
> 
> 标签：c#, algorithm, subset-sum

SO上有很多子集问题和答案，但不知何故，我找不到针对我的具体问题的解决方案。

我需要找到轨道段的数量和长度来构建长度为 n 的轨道。段的长度：8、10、12、14、16、18、20、22、24 英尺 数量最多可达 4 段 轨道长度约为 20 到 100 英尺（并且总是偶数）

这是一条真正的赛道。段的顺序无关紧要。然而，有优选的尺寸组合。所有长度相等或彼此接近的都比大/小组合更可取。

IE：

*   70 => 20,20,20,10 很容易选择，但首选 16,18,18,18
*   60 => 20,20,20 优于 14,14,14,18

如果需要，我可以举出更多例子。

我不是在寻找一个最佳解决方案，而是寻找一小组可能的最佳解决方案。最终一个人会选择，这是关于建议最佳选择。

到目前为止，我所做的如下。它正在工作，只是看起来很复杂。

我从这篇文章[Algorithm 中获取了基本算法，以查找大小为 n 的列表中的哪些数字总和到另一个数字](https://stackoverflow.com/questions/83547/algorithm-to-find-which-numbers-from-a-list-of-size-n-sum-to-another-number)。我在这段代码中所做的只是把它变成整数。它返回所有可能的组合。最多 5 个或更多曲目。

为了进一步减少结果集，我做了一些 Linq

```
 List<int> nums = new List<int>() { 8, 8, 8, 8, 10, 10, 10, 10, 12, 12, 12, 12, 14, 14, 14, 14, 16, 16, 16, 16, 18, 18, 18, 18, 20, 20, 20, 20, 22, 22, 22, 22, 24, 24, 24, 24 };
    int width = 60;
    Console.WriteLine("Total width: " + width);
    Solver solver = new Solver();
    List<List<int>> res = solver.Solve(width, nums.ToArray());

    Console.WriteLine("total :"+res.Count);
    var res1 = res.Distinct(new SequenceComparer<List<int>, int>()).ToList();
    Console.WriteLine("total res1:" + res1.Count);

    var res2 = res1.Where(l => l.Count == 4).ToList();
    Console.WriteLine("total res2:" + res2.Count); //reduce to 4 integer solutions

    var res3 = (from row in res2
             where row[0] == row[1] || row[0] == row[2] || row[0] == row[3] ||
                   row[1] == row[2] || row[1] == row[3] ||
                   row[2] == row[3]
             select row).ToList();
    Console.WriteLine("total res3:" + res3.Count); //reduce to at least two of equal length

    var res4 = (from row in res3
            where row[0] == row[1] && row[0] == row[2] || 
                  row[0] == row[1] && row[0] == row[3] ||
                  row[1] == row[2] && row[1] == row[3] 
            select row).ToList();
     Console.WriteLine("total res4:" + res4.Count); //reduce to  three of equal length

    var res5 = (from row in res4
            where row[0] == row[1] && row[0] == row[2] && row[0] == row[3]
           select row).ToList();

     Console.WriteLine("total res5:" + res5.Count); //reduce to 4 of equal length
     Console.WriteLine("-------------------------------------");
     Console.WriteLine("res4:");
     foreach (List<int> result in res4)
     {
         foreach (int value in result)
         {
              Console.Write("{0}\t", value);
         }
         Console.WriteLine();
      }
      Console.WriteLine("-------------------------------------");
      Console.WriteLine("res5:");
      foreach (List<int> result in res5)
      {
           foreach (int value in result)
           {
               Console.Write("{0}\t", value);
           }
           Console.WriteLine();
      }
      Console.ReadLine(); 
```

此代码将产生以下结果，以 60 运行

```
 Total width: 60
    total :10726
    total res1:74
    total res2:31
    total res3:20
    total res4:3
    total res5:0
    -------------------------------------
    res4:
    12      12      12      24
    12      16      16      16
    14      14      14      18
     -------------------------------------
    res5: 
```

或 80 这个

```
 Total width: 80
    total :101560
    total res1:237
    total res2:15
    total res3:13
    total res4:3
    total res5:1
    ------------------------------------
    res4:
    8       24      24      24
    14      22      22      22
    20      20      20      20
    ------------------------------------
    res5:
    20      20      20      20 
```

所以我的最终结果（4&5）实际上接近我所需要的。

但是我必须为任何可能的 3 轨道解决方案再次编写相同的代码，也许还有 2 轨道。

那么结果是否需要相互比较（不知何故，不确定如何）。这一切让我觉得我错过了什么。感觉很复杂，感觉不对。我错过了什么？

我开始使用错误的算法吗？一旦解决了我的问题，他们会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:03:11.650

您确实有求和集的特殊情况。虽然它是 NP 难的，但解决方案空间受到足够的限制，以至于蛮力可能会正常工作，因为总共只有 10000 (10 ^ 4) 个可能的解决方案（大约等于所需的实际时间步数），因为你还必须考虑 0 作为可能的长度。

这是psudo-Python中的代码。考虑在 C# 中尝试它，但实际上并不熟悉它，因此它可能不会很好地工作。

```
lengths = [0, 8, 10, 12, 14, 16, 18, 20, 22, 24]
solutions = []
for len1 in lengths:
    for len2 in lengths:
        for len3 in lengths:
            for len4 in lengths:
                if (len1 + len2 + len3 + len4) == n:
                    solutions.append([len1,len2,len3,len4])
return solutions 
```

一旦你有了所有有效的解决方案，你就可以简单地确定你想向用户展示哪些，或者你可以简单地编写一个算法来选择最好的一个。当然，您可能不希望实际包含任何大小为 0 的长度。

您可以使用只会找到所有有效解决方案的贪心方法来稍微改进此算法。然而，再一次，除非事情在空间或时间方面非常有限，否则它所说的问题不太可能复杂到需要它。

作为奖励，如果您期望多个查询（例如用户要求 n = 40 和后来的 n = 50），您可以删除 if 语句并将所有 10000 个解决方案简单地存储在以总和值为键的哈希表中，允许用于 O(1) 查询。

**缩小解决方案集：**

您在这里需要的是一个比较算法，它基本上将这个解决方案与那个解决方案进行比较，并说“这个解决方案比那个解决方案更好/最差”。这允许您编写一个排序算法，您可以使用该算法对解决方案进行排序以获得最佳解决方案，或者您可以简单地找到最佳解决方案。

您可以通过简单地计算每个解决方案的标准偏差然后比较标准偏差[来](http://en.wikipedia.org/wiki/Standard_deviation#Basic_examples)解决绝大多数情况。这将给出一个数字，显示解决方案长度的差异程度。如果您使用“较低的标准偏差更好”，那么这将为您提供“所有长度相等或彼此接近的人比大/小组合更受欢迎”。标准差的算法相当简单，所以我将把它留给你尝试实现。实际上，C# 很有可能内置了该函数。只要确保不包含任何零长度，实际上可能应该在将它们添加到解决方案集之前将它们删除以避免出现问题，这需要对我给的代码。

但是，您将遇到棘手的部分，即处理不同解决方案具有相同标准偏差的情况。我想只有两种情况会发生这种情况。

1.  第一个仅出现多个理想解决方案。例如如果 n = 24，则三个解将是 [8,8,8]、[12,12] 和 [24]。

2.  第二个是由于算法的蛮力性质而发生的，这就是为什么有这么多解决方案。这是因为对于像 [8,10,12,14]（四个唯一长度）这样的每个解决方案，有 24 种方法来排列这些长度，例如 [14,12,10,8] 和 [12,10,14,8 ]。因此，改进蛮力算法的最佳方法是使用从 [0, 8, 10, 12, 14, 16, 18, 20, 22, 24] 中多选 4 个元素的算法。**这将解决方案集缩小到只有 715 个解决方案**。当然，如果您真的想要 [8,10,12,14]、[14,12,10,8] 和 [12,10,14,8] 作为不同的解决方案，那么您无能为力。

上述两段完全属于“视情况而定”的范畴。您必须决定算法在每种情况下应遵循哪些规则，但我认为这是您可以找到相同标准偏差的仅有的两种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:33:53.540

让我们将所有内容除以 2，因为所有内容都是偶数。我们现在有长度为 4 到 12 的轨道部件，总长度约为 10 到 50。

*将n*命名为我们必须达到的长度。对于每个可能的*k*个轨道段（一般为 1 到 4，但*n* <16 时为 1 到 3 或*n* > 36 时为 3 到 4），建议采用长度为*n/k* +1 和*kn的**n%k段**%k*个长度为*n/k*的片段。

 ***'/' 表示整数除法，'%' 表示余数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:45:08.943

数学来拯救！

您可以检查每个大于 8 的偶数是否是该集合中元素的线性组合 - 请在 Math Overflow 上寻求证明；）。

所以让我们用数学重新表述这个问题：

*   我们有一个超完备的基向量字典（例如，因为 16 是 8 的倍数），
*   其中我们可以将每个大于 8 的偶数表示为这些基向量的线性组合，并且
*   我们试图最小化这个输入向量的[零“范数”](http://en.wikipedia.org/wiki/Norm_%28mathematics%29#Zero_norm)。

好消息：这是一个非常有趣的问题，有很多应用领域，所以[研究得很好](http://www.google.com/search?q=minimizing+l0+norm)。

坏消息：这仍然是一个难（NP-hard）问题。

但是，嘿，至少现在你知道了。

**编辑：** 为了不让我被指责挥手哲学答案，这是一个修改（完全非优化）的版本，`Solver.recursiveSolve`它详尽地搜索与目标匹配的段组合；和一个零范数比较器类，您可以使用它对结果进行排序：

```
 private void RecursiveSolve(int goal, int currentSum,
        List<int> included, List<int> segments, int startIndex)
    {

        for (int index = 0; index < segments.Count; index++)
        {
            int nextValue = segments[index];
            if (currentSum + nextValue == goal)
            {
                List<int> newResult = new List<int>(included);
                newResult.Add(nextValue);
                mResults.Add(newResult);
            }
            else if (currentSum + nextValue < goal)
            {
                List<int> nextIncluded = new List<int>(included);
                nextIncluded.Add(nextValue);
                RecursiveSolve(goal, currentSum + nextValue,
                    nextIncluded, segments, startIndex++);
            }
        }
    }

class ZeroNormAndSDComparer : IComparer<List<int>>
{
    private int l0_norm(List<int> v)
    {
        int norm = 0;
        HashSet<int> seen = new HashSet<int>();

        for (int i = 0; i < v.Count; ++i)
        {
            if (!seen.Contains(v[i]))
            {
                norm++;
                seen.Add(v[i]);
            }
        }
        return norm;
    }

    private static double StandardDeviation(List<int> v)
    {
        double M = 0.0;
        double S = 0.0;
        int k = 1;
        foreach (double value in v)
        {
            double tmpM = M;
            M += (value - tmpM) / k;
            S += (value - tmpM) * (value - M);
            k++;
        }
        return Math.Sqrt(S / (k - 1));
    }

    public int Compare(List<int> x, List<int> y)
    {
        int normComparison = l0_norm(x).CompareTo(l0_norm(y));
        if  (normComparison == 0)
        {
            return StandardDeviation(x).CompareTo(StandardDeviation(y));
        }
        return normComparison;
    }
} 
```

并且您修改后的 Main （现在排序是在结果减少到不同的 4 段结果后完成的）：

```
 List<int> nums = new List<int>() { 8, 10, 12, 14, 16, 18, 20, 22, 24 };

        int width = 80;
        Console.WriteLine("Total width: " + width);

        Solver solver = new Solver();
        List<List<int>> res = solver.Solve(width, nums.ToArray());
        Console.WriteLine("total :" + res.Count);
        var res1 = res.Distinct(new SequenceComparer<List<int>, int>()).ToList();
        Console.WriteLine("total res1:" + res1.Count);

        var res2 = res1.Where(l => l.Count == 4).ToList();
        Console.WriteLine("total res2:" + res2.Count); //reduce to 4 integer solutions

        res2.Sort(new ZeroNormAndSDComparer()); 
```***

# java - eclipse中类对象的键盘快捷键

> ID：14352188
> 
> 赞同：1
> 
> 时间：2013-01-16T05:56:55.713
> 
> 标签：java, eclipse, keyboard-shortcuts

```
class Demo{
    static void  Test(){
        System.out.println("hello");
    }
} 
```

eclipse 中是否有任何键盘快捷键用于创建上面声明的类的对象。

例如，在编写 Demo 后跟该快捷方式后，它应该如下所示

```
Demo objname = new Demo(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:17:30.120

我认为您不能完全做到这一点，但这很接近：

`new Demo()`然后键入`ctrl-2 L`（快速辅助 - 分配给局部变量）。

Eclipse 会将行更改为`Demo demo = new Demo();`并让您有机会重命名该变量。

# google-apps-script - 用于删除电子表格的最后（或第一）行的 Google Apps 脚本在 D 列中包含特定值

> ID：14352190
> 
> 赞同：0
> 
> 时间：2013-01-16T05:57:10.507
> 
> 标签：google-apps-script, google-sheets

我进行了长时间的搜索，但找不到我要找的东西。也许有人在那里可以提供帮助？

我有一个 Google Apps 脚本，它从 D 列中包含“Hello”的电子表格中删除行。

```
function deleteRow() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var values = s.getDataRange().getValues();

  for( var row = values.length -1; row >= 0; --row )
    if (values[row][3] == 'Hello')
      s.deleteRow(parseInt(row)+1);
}; 
```

但是，我需要一个只删除一行的脚本 - D 列中带有“Hello”的最低行。此外，还有一个类似的脚本可以删除 D 列中带有“Hello”的最高行。

有谁知道如何实现这一目标？您的宝贵帮助将不胜感激。

第一列是时间戳（数据来自表单），所以如果脚本可以删除 D 列中包含“Hello”的最旧行，那也可以！（类似地，用于删除 D 列中带有“hello”的最新行的脚本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:41:23.687

它实际上很简单。只要你打到最高或最低行（我假设第 1 行高，第 10 行低）就爆发。

```
function deleteHighestRow() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var values = s.getDataRange().getValues();

  for( var row = 0; row < values.length ; row ++ ){
    if (values[row][3] == 'Hello'){
      s.deleteRow(row+1);
      break;
    }
  }
};

function deleteLowestRow() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var values = s.getDataRange().getValues();

  for( var row = values.length -1 ; row >= 0 ; row-- ){
    if (values[row][3] == 'Hello'){
      s.deleteRow(row+1);
      break;
    }
  }
}; 
```

# android - Android HttpCleint 适用于 2.2 但不适用于 4

> ID：14352193
> 
> 赞同：0
> 
> 时间：2013-01-16T05:57:35.057
> 
> 标签：android, apache-httpclient-4.x

我有一种方法（如下）可以从我的 android 程序中的 Web 服务获取数据。它适用于 Android 2.2。但在 4.x 中，它会引发异常，并显示消息“Error Requesting API”。不确定哪个部分导致我的代码中的异常以及为什么仅在 4.x 中有人可以给我一些指示吗？

```
 public static synchronized String performHTTPRequest(HttpUriRequest request)
                throws ApiException, ParseException, IOException {
            HttpClientWrapper cli=new HttpClientWrapper();
            HttpClient client;
            try {
                client=cli.getClient();
                HttpResponse response = client.execute(request);
                // Check if server response is valid
                StatusLine status = response.getStatusLine() ;

            if (status.getStatusCode() != HTTP_STATUS_OK) {
                throw new ApiException("Invalid response from server: " + status.toString());
            }
            return EntityUtils.toString(response.getEntity());
        } catch (MalformedURLException e) {
            throw new Error(e);
        }  catch (Exception cnrce) {
            throw new ApiException("Error requesting API:");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:59:27.143

在 4.0 或蜂窝以上的版本中，您不能在 ui 线程上执行任何 http 请求。您需要在 asynctask 中执行这些操作。编辑： [文档](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

[asynctask 的代码示例](http://www.adilmughal.com/2012/07/android-networkonmainthread-exception.html)

# php - 从数据库中获取一天前的记录

> ID：14352194
> 
> 赞同：1
> 
> 时间：2013-01-16T05:57:35.673
> 
> 标签：php, mysql, sql

我如何从服务器的数据库中获取一天前的记录。我已经使用 datetime 插入记录。下面是记录的样子。

```
2013-01-15 23:44:02 
```

我已经使用 strtotime('-1 day') 但它返回本地系统时间。我想获得一天前的记录并在条件下做一些事情..

提前谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T06:00:51.533

```
where date(date_column) = DATE_sub(NOW(), INTERVAL 1 DAY); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T06:01:37.637

利用`DATE_ADD`

```
SELECT * 
FROM tablename 
WHERE DATE(dateCol) = DATE_ADD(CURDATE(),INTERVAL -1 DAY) 
```

*   [DATE_ADD()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:03:21.657

```
SELECT  * from table  WHERE  datefield  < DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:00:00.680

您将使用 sql 查询将其存档。

```
SELECT * FROM tablename WHERE DATE(datefield)=DATE_ADD(CURDATE(),INTERVAL 1 DAY) 
```

`CURDATE()`将返回当前`Mysql Server`时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T06:02:26.847

你可以使用这个函数 DATE_SUB(date,INTERVAL expr type)

[http://www.w3schools.com/sql/func_date_sub.asp](http://www.w3schools.com/sql/func_date_sub.asp)

W3schools 中提供的示例

假设我们有以下“订单”表：

```
Columns: OrderId, ProductName, OrderDate
Values: 1, Jarlsberg Cheese, 2008-11-11 13:23:44.657 
```

现在我们要从“OrderDate”日期中减去 5 天。

我们使用以下 SELECT 语句：

```
SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 5 DAY) AS SubtractDate
FROM Orders 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T06:04:01.490

```
$yesterday = strtotime('Y-m-d h:i:s','yesterday');
SELECT * FROM tablename WHERE datefield = '$yesterday' 
```

# android - 通用图像加载器不起作用

> ID：14352202
> 
> 赞同：4
> 
> 时间：2013-01-16T05:57:50.323
> 
> 标签：android, universal-image-loader

我是一个初级程序员。我正在尝试使用通用图像加载器来显示从站点解析的图像，但它不起作用。我究竟做错了什么？

谢谢。

这是一个测试程序。

```
package com.example.imageloader;

public class MainActivity extends ListActivity {

private final String URL = "Site_URL";
private ArrayList<Order> listItems = null;
private myAdapter myAdapter;
private ProgressDialog pd;  
ImageLoader imageLoader;    
DisplayImageOptions options;    
String imgSrc;
ListView lv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    listItems = new ArrayList<Order>(); 
    this.myAdapter = new myAdapter(this, R.layout.list_item, listItems);
    setListAdapter(this.myAdapter);

    new Parse().execute(URL);

    lv = getListView();

    imageLoader = ImageLoader.getInstance();
    imageLoader.init(ImageLoaderConfiguration.createDefault(MainActivity.this));

    options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.ic_launcher)
    .showImageForEmptyUri(R.drawable.ic_launcher)
    .cacheOnDisc()
    .cacheInMemory()
    .build();
}

private class Parse extends AsyncTask<String, Integer, ArrayList<Order>> {
    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(MainActivity.this);
        pd.setMessage("Loading");
        pd.show();
    }

    @Override
    protected ArrayList<Order> doInBackground(String... urls) {
        listItems.clear();              
        try {
            Document doc = Jsoup.connect(URL).get();
            Elements img = doc.select("img");
            for (Element src : img) {
                String imgSrc = src.attr("src");

                System.out.println(imgSrc);                         

                Order o = new Order();
                o.setLink(imgSrc);
                o.setTextName(imgSrc);
                listItems.add(o);                   
            }               

        } catch (IOException e) {
            e.printStackTrace();
        }
        return listItems;
    }

    @Override
    protected void onPostExecute(ArrayList<Order> listItems) {  
        myAdapter = new myAdapter(MainActivity.this, R.layout.list_item, listItems);
        setListAdapter(myAdapter);
        myAdapter.notifyDataSetChanged();
        pd.dismiss();
    }
}
} 
```

自定义适配器我在这里得到一个错误

```
package com.example.imageloader;

public class myAdapter extends ArrayAdapter<Order> {

private LayoutInflater lInflater;
private ArrayList<Order> data;
DisplayImageOptions options;
ImageLoader imageLoader;
private Order o;
String imgSrc;  

public myAdapter(Context c, int listItem, ArrayList<Order> data) {
    super(c, listItem, data);
    this.data = data;
    lInflater = LayoutInflater.from(c);
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;

    if (convertView == null) {
        convertView = lInflater.inflate(R.layout.list_item, null);
        holder = new ViewHolder();
        holder.img = (ImageView) convertView.findViewById(R.id.image);
        holder.textName = (TextView) convertView.findViewById(R.id.text);
        convertView.setTag(holder);

        holder.textName.setOnClickListener(new OnItemClickListener(position));

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    o = data.get(position);
    holder.textName.setText(o.getTextName());
    holder.img.setTag(o);

        try {
            imageLoader.displayImage(o.getLink(), holder.img, options); // NullPointerException here!
        } catch (NullPointerException e) {
            e.printStackTrace();
        }
    } else {            
        return null;            
    }
    return convertView;

static class ViewHolder {
    ImageView img;
    TextView textName;
}
} 
```

日志

```
01-16 11:55:04.480: W/System.err(19105): java.lang.NullPointerException
01-16 11:55:04.496: W/System.err(19105):    at          com.example.imageloader.myAdapter.getView(myAdapter.java:62) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T06:12:58.660

您应该添加此代码

```
imageLoader = ImageLoader.getInstance();
    imageLoader.init(ImageLoaderConfiguration.createDefault(c)); 
```

在 myAdapter 的构造函数中。并检查 imageview 的 id，它是否正确或在您引用它的正确位置

```
holder.img = (ImageView) convertView.findViewById(R.id.image); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T08:56:48.157

只需添加

```
imageLoader = ImageLoader.getInstance(); 
```

给`myAdapter`构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:04:51.693

在`adpater`你忘了初始化`imageloader`类，它的唯一原因`NullPointerException`。

初始化它：

```
imageLoader=new ImageLoader(activity.getApplicationContext()); 
```

更新@ 替换您的 adpater 中的以下代码。

```
 public class myAdapter extends ArrayAdapter<Order> {

private LayoutInflater lInflater;
private ArrayList<Order> data;
DisplayImageOptions options;
ImageLoader imageLoader;
private Order o;
String imgSrc;  
private Activity activity;

public myAdapter(Activity a, int listItem, ArrayList<Order> data) {
    super(c, listItem, data);
    this.data = data;
     activity = a;
    lInflater = LayoutInflater.from(c);
    imageLoader=new ImageLoader(activity.getApplicationContext());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:16:54.053

几点观察：

1.  *正如@RobinHood*在他的解决方案中已经指出的那样，您需要*在适配器*`imageLoader`中初始化实例。

**   您已经声明和 instance:`DisplayImageOptions options;`但没有在`Adapter`将使用它的地方配置它。您的选项在`MainActivity`.* 

 *如果您查看此处的示例：[https](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/sample/src/com/nostra13/example/universalimageloader/ImageListActivity.java) ://github.com/nostra13/Android-Universal-Image-Loader/blob/master/sample/src/com/nostra13/example/universalimageloader/ImageListActivity.java ，您会注意到这里的 Activity 扩展`BaseActivity`（你扩展`ListActivity`），它已经初始化了一个 imageLoader 的实例。

如果您`myAdapter`的活动 (MainActivity) 中有适配器 () 类，那就没问题了。

修好这些，就好了。*

# loops - 如何制作（在游戏中）（在 Python 中）一个将从列表/元组中打印字符串的循环？

> ID：14352204
> 
> 赞同：0
> 
> 时间：2013-01-16T05:58:02.833
> 
> 标签：loops, random

我目前正在开发一款游戏，无法弄清楚每次我死时如何，我可以显示一个每次随机变化的提示

> > LOOP = random.choice
> > Hints = ("a", "b", "c", "d") #这将被改变，但现在它可以工作
> > rand_Hints = LOOP(Hints)

# android - OnCreate 方法不断被重复调用

> ID：14352207
> 
> 赞同：9
> 
> 时间：2013-01-16T05:58:22.537
> 
> 标签：android, oncreate

* * *

**更新：**感谢大家尝试帮助我解决此错误。我仍然不确定原因，我能够回滚到之前的提交并从那里继续开发。这个先前的提交确实显示了相同的错误，但是在我注释掉 `button.performClick()`它之后它就消失了。奇怪的是，这不适用于最近的提交。

我仍然不明白这个错误，并希望在帮助确定根本原因方面提供更多帮助。我最大的恐惧是无意中重新引入它。

* * *

我遇到了我见过的最疯狂的错误。

OnCreate 方法被一遍又一遍地调用，冻结了我的应用程序并给了我轻微的闪烁。唯一的解决方案是退出到主屏幕并从设置菜单中强制退出应用程序。

以下是详细情况：

1.  应用程序启动（主活动）
2.  主活动调用第二个活动
3.  第二个Activity调用onCreate，正常设置
4.  第二个 Activity 随机决定退出 onCreate <--我认为这是发生了什么
5.  第二个活动的 onCreate 再次被调用。它永远不会返回到主活动。

我已经运行了一个调试器，看来第二个活动成功完成了 onComplete/onResume 序列，然后决定退出并重新启动。

有没有人听说过这种行为？

我没有注意到任何异常被抛出。此外，在调试过程中，我确实继续检查了您认为无提示失败的位置。（这是在我用打印语句乱扔它之前的旧代码）

**更新：**尝试停止该过程时，我必须打开飞行模式。这意味着它与此代码块有关（第二个活动）

```
else if (Network.haveNetworkConnection(Login.getContext()) && Login.checkClientId())
        {...} 
```

**在没有互联网的情况下，它将命中 else 语句并且不显示此行为。**

**代码：**

主活动的 onResume()，我称之为第二个活动：

```
 @Override
    public void onResume()
    {
        super.onResume();

        //Check If logged in, else go to login page
        Login.setContext(getApplicationContext());

        //Reset Notification Number
        GCMIntentService.cancelNotifications();

        /** GO TO LOGIN **/
        if(!Login.isLoggedIn())
        {
            //If user is not logged in, open login page
            System.out.println("RESUMING MAIN AND STARTING LOGIN INTENT");
            Intent intent = new Intent(ActivityMain.this, ActivityLogin.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);

        } else
        {
            Login.setupStuffOnce();
            Event.pullEvents(); //Get New Events

            //Update ListView
            updateMainFeed();
        }

    } 
```

这是第二个活动：

```
public class ActivityLogin extends Activity
{

    private String postData;
    //private Context c;
    //final Timer timer = new Timer();

    //Facebook Stuff
    private Facebook facebook = new Facebook(Config.FBAPPID);
    private AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);

    //Layout Stuff
    EditText username, password;
    Button loginButton, signupButton;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        // Open Database
        Login.setContext(getApplicationContext());
        Database.open(getApplicationContext());
    }

    /*
     * @Override public void onPause() { s }
     */
    @Override
    public void onResume()
    {
        super.onResume();

        // shouldn't put here but oh well
        init();

        //If coming from ActivitySignup
        if(Transfer.username != null)
        {
            username.setText(Transfer.username);
            password.setText(Transfer.password);
            Transfer.password = null;
            Transfer.username = null;
            loginButton.performClick();
        }

    }

    public void init()
    {

        Login.getUserLoggedIn();
        if (Login.isLoggedIn())
        {
            //Do Any Additional Setup
            Login.setupStuffOnce();

            // If user is logged in, open main
            Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
            //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);

        } else if (Network.haveNetworkConnection(Login.getContext()) && Login.checkClientId())
        {
            // Else, Make User Login
            // Inflate Login and Present Website
            String clientid = Login.getClientId();
            System.out.println("clientid:" + clientid);
            //System.exit(0);
            postData =  "mobile=1&client_id="+Login.getClientId();

            // Inflate the view
            setContentView(R.layout.activitylogin3);

            username = (EditText) findViewById(R.id.username);
            password = (EditText) findViewById(R.id.password);

            //Inflate the Button
            loginButton = (Button) findViewById(R.id.loginButton);
            signupButton = (Button) findViewById(R.id.signupButton);

            signupButton.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    Intent intent = new Intent(ActivityLogin.this, ActivitySignup.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
                    startActivity(intent);

                }
            });

            loginButton.setOnClickListener(new View.OnClickListener() {
                  public void onClick(View view) {

                     int res = Login.sendLogin(username.getText().toString(), password.getText().toString());

                     if(res == 202)
                     {
                         //Login Successful

                         //Check if facebooked.
                         if(Login.isFacebooked())
                         {
                             //Just go to main
                             Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
                             //Are these flags necessary?
                             //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
                             startActivity(intent);
                         } else
                         {
                             //Go to facebook login page
                             //Intent intent = new Intent(ActivityLogin.this, ActivityFBLogin.class);
                             //startActivity(intent);

                             //Login via Facebook
                             doFacebook();
                         }

                     } else
                     {
                         System.out.println("Login Failed: "+res);
                         if(res == 405)
                         {
                             Toast.makeText(getApplicationContext(), "Incorrect Username/Password", Toast.LENGTH_SHORT).show();
                             password.setText("");
                         }
                         else
                             Toast.makeText(getApplicationContext(), "Network Error", Toast.LENGTH_SHORT).show(); //Not entirely true in all cases i think

                     }

                      /*Login.getUserLoggedIn();
                        if(Login.isLoggedIn())
                        {
                            Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
                            startActivity(intent);
                        } else {
                            Toast.makeText(getApplicationContext(), "Please Login Above", Toast.LENGTH_SHORT).show();
                        }*/
                  }
                });

        } else
        {
            // Not Logged In and No Internet Access

            setContentView(R.layout.activitylogintext);

            EditText text = (EditText) findViewById(R.id.text);
            text.setText("No Internet Connection Detected\n requires internet to login");

            Button button = (Button) findViewById(R.id.refreshButton);

            button.setOnClickListener(new View.OnClickListener() {
                  public void onClick(View view) {
                        //Login.getUserLoggedIn();
                        if(Network.haveNetworkConnection(Login.getContext()))
                        {
                            Intent intent = new Intent(ActivityLogin.this, ActivityLogin.class);
                            //intent.setFlags();
                            startActivity(intent);
                        } else {
                            Toast.makeText(getApplicationContext(), "No Internet Access Detected", Toast.LENGTH_SHORT).show();
                        }
                  }
                });

        }

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    public void doFacebook()
    {
         facebook.authorize(this, Config.facebookPermissions, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                     /*SharedPreferences.Editor editor = state.edit();
                     editor.putString("access_token", facebook.getAccessToken());
                     editor.putLong("access_expires", facebook.getAccessExpires());
                     editor.commit();
                        */
                     //Input into database
                     Login.saveAccessToken(facebook.getAccessToken());
                     Login.setFB(facebook.getAccessToken());
                     //Login.sendAccessToken(facebook.getAccessToken());

                     //Intent into Main Activity
                     Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
                    //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                }

                @Override
                public void onFacebookError(FacebookError error) {
                    Toast.makeText(getApplicationContext(), "Error: "+error.getErrorType(), Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onError(DialogError e) {
                    Toast.makeText(getApplicationContext(), "Error: "+e.getMessage(), Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onCancel() {}
            });
    }

    public boolean checkForUserID(Context c)
    {
        try{
            String res = Network.getUrl("www.website.com/mobile.php?got_user=1&client_id="+Login.getClientId());
            JSONObject json = JSON.constructObject(res);
            if(JSON.handleCode(json))
            {
                if(json.getString("type").equals("userid"))
                {
                    Login.setLogin(json.getString("data"));
                    return true;
                }
            }
        } catch(Exception e)
        {
            //Silent Fail
        }
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:40:47.787

我相信，如果您`MainActivity`在致电后完成您的问题，问题将得到解决`SecondActivity`。问题可能是`onResume`当您恢复您的`MainActivity`. 那是因为它`MainActivity`可能在后台被销毁并重新创建。另一种解决方案是使用`onSaveInstanceState`. 请参阅[此处](https://stackoverflow.com/a/151940/1482726)了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T06:14:48.260

在您的活动中检查此代码：

```
 Button button = (Button) findViewById(R.id.refreshButton);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

                    if(Network.haveNetworkConnection(Login.getContext()))
                    {
                        Intent intent = new Intent(ActivityLogin.this, ActivityLogin.class);
                        //intent.setFlags();
                        startActivity(intent);
                    } else {
                        Toast.makeText(getApplicationContext(), "No Internet Access Detected", Toast.LENGTH_SHORT).show();
                    }
              }
            }); 
```

在这里，您正在调用 ActivityLogin 本身。这就是为什么 the`onCreate()`被一次又一次地调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T21:55:46.633

我认为你的主要问题是你的 onResume 函数，因为它每次回到视图时都会被调用（例如：你开始第二个活动，完成它，主要活动 onResume 再次被调用。如果你完成你的第二个活动（或者它悄悄地崩溃出于某种原因）你将回到你的 mainActivity 并调用 onResume （这将重新开始循环）。

现在我不知道你是否正在以某种方式完成活动 2，但我会检查一下。

编辑：我也会在这里放一些logcats

```
if (Login.isLoggedIn())
{
      //Do Any Additional Setup
      Login.setupStuffOnce();

      // If user is logged in, open main
      Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
      //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
      Log.i("Some Tag", "Starting Main Activity From Activity 2");
      startActivity(intent);

} 
```

上面添加的 log.i 将让你知道这是否是错误发生的地方，你可以从那里开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T18:10:22.997

我曾经遇到过类似的问题。出现问题是因为我进行了配置更改而没有在标签的`android:configChanges`属性中声明它们`<activity>`（因此它一直在重新创建自己）。

例如，如果您手动更改语言环境，则需要`locale`添加`android:configChanges`!

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T06:37:50.327

在我看来，如果`Login`活动之间没有正确共享，那么这里很有可能在这里进行无休止的骑行，导致`Login.isLoggedIn()`返回`true`in`ActivityLogin`但`false`in `ActivityMain`。

一些关键因素是您的`Login`对象所在的位置，它是静态的，它是如何在活动之间引用的？ActivityLogin 处于活动状态时，ActivityMain 完全有可能被销毁；将登录数据存储在`SharedPreferences`数据库中，或者以其他方式将其持久化很重要。如何`isLoggedIn()`解决（确定其`return`价值？）

建议 1：考虑使用 Singleton 模式（如果您还没有使用的话。） 建议 2：虽然不鼓励，但您可以`Login`在`Application`级别存储。建议 3：您可以尝试使用`Intent.FLAG_ACTIVITY_SINGLE_TOP`来减少创建新 ActivityMain 的可能性 - 这可能无法访问`Login`，再次取决于您存储它的方式。

### 活动主

```
onResume() {
    if(!Login.isLoggedIn()) {
        /* Not logged in, launch ActivityLogin! */
        Intent intent = new Intent(ActivityMain.this, ActivityLogin.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
```

### 活动登录

```
onResume() { /* ... */ init(); }

init() {
    Login.getUserLoggedIn();
    if (Login.isLoggedIn()) {
        /* Internet - launch ActivityMain! */
        Intent intent = new Intent(ActivityLogin.this, ActivityMain.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); // <--- suggested addition
        startActivity(intent);
    else if (Network.haveNetworkConnection(Login.getContext()) && Login.checkClientId()) {
        /* No internet, the user was unable to login. */
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-07T07:03:29.700

我有类似的问题，活动将一直重新创建。重新安装该应用程序无济于事，但**重新启动手机**就可以了。

# javascript - Joomla中jquark组件中的计时器

> ID：14352211
> 
> 赞同：0
> 
> 时间：2013-01-16T05:59:00.037
> 
> 标签：javascript, joomla

我正在尝试使用警报作为

```
var timer = document.getElementById('timer') ;
        timer.innerHTML = '<?php echo JText::_('TIME_REMAINING') ; ?> ' + hours + ':' + minutes + ':' + seconds ;

    if( minutes== 29 ){
            alert("5 Minutes Left");

                }
                else
                {
            timer.innerHTML = '<?php echo JText::_('TIME_REMAINING') ; ?> ' + hours + ":" + minutes + ":" + seconds ;
                        } 
```

`alert`但是每次都显示 id `29 minutes`- 基本上我需要在几分钟前显示关于测验时间的警报。那有什么问题？`Its a jquark component`- 有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:30:49.190

这应该可以解决问题，这里`interval`用于检查剩余时间并提醒用户。

```
var timeleft = 120000;

var timer = document.getElementById('timer') ;
timer.innerHTML= Math.floor((timeleft/60000)) + ' minutes';

var date  = new Date();
var interval = setInterval(function(){
  var d = new Date();
  var diff = d.getTime() - date.getTime();
  if ( diff > timeleft ) {
    alert('done');
    clearInterval(interval);
  }else if ( diff > 60000 ) {
    alert('1 min')
  }
  timer.innerHTML= Math.floor(((timeleft - diff)/60000)) + ' minutes';
}, 60000); 
```

您可能需要调整参数以满足您的需要

示例：[小提琴](http://jsfiddle.net/arunpjohny/m6UQX/1/)

# assembly - 如何使用汇编语言查找和显示具有相似文件名的文件？

> ID：14352217
> 
> 赞同：0
> 
> 时间：2013-01-16T05:59:24.577
> 
> 标签：assembly

机器问题是使用汇编语言在不同目录中查找并显示具有相似文件名的文件。使用 tasm & tlink 或模拟器 8086 编译的控制台程序...

这是我尝试过的代码，它只显示文件列表。我的问题是我不知道如何让它只显示那些具有相似文件名的文件..关于我的问题的任何想法都将不胜感激。谢谢 ..

```
.model small, c

.stack

.data
    file_spec db "*.*", 0
    DTA db 128h dup(0)
    buffer db 30 dup(0)

.code
main proc
    mov ax, @Data
    mov ds, ax
    mov dx,offset DTA
    mov ah,1Ah
    int 21h ; set DTA location

    mov dx,offset file_spec
    xor cx, cx
    mov ah,4Eh
    int 21h
    jc  quit

print_name:
    lea si, DTA + 30

next_char:
    lodsb
    int 29h
    test al, al
    jnz next_char

    mov al, 13
    int 29h
    mov al, 10
    int 29h

    mov dx, offset file_spec
    xor cx, cx
    mov ah, 4fh
    int 21h
    jnc print_name

quit:   
    mov ax, 4c00h
    int 21h
main endp
    end main 
```

这是我尝试过的另一个源代码，这次我使用了 int 21h 、 4eh 、 4fh （在 MS Dos 中） .. 请有人帮我增强此代码以仅显示具有相似文件名的文件吗？任何形式的帮助将不胜感激。提前致谢..

```
.model small, c

.stack

.data
    file_spec db "*.*", 0
    DTA db 128h dup(0)

.code
    main proc
    mov ax, @Data
    mov ds, ax
    mov dx,offset DTA
    mov ah,1Ah
    int 21h

    mov dx,offset file_spec
    xor cx, cx
    mov ah,4Eh
    int 21h
    jc  quit

print_name:
    lea si, DTA + 1eh
next_char:
    lodsb
    int 29h
    test al, al
    jnz next_char

    mov al, 13
    int 29h
    mov al, 10
    int 29h

    mov dx, offset file_spec
    xor cx, cx
    mov ah, 4fh
    int 21h
    jnc print_name
 quit:   
    mov ax, 4c00h
    int 21h
 main endp
    end main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:35:22.773

这似乎是一个艰巨的项目，asmaj！列出文件名是一个良好的开端。当您说“相似的文件名”时，我假设您的意思是“不同目录中的相同文件名”。（否则您需要定义“相似”）。您已经在一个目录中列出了文件。要切换到不同的目录，您可能需要设置不同的 DTA 并使用“首先查找”重新开始。当“查找下一个”最终失败时，您需要将 DTA 设置回您以前的 DTA（“查找下一个”取决于它）并继续该目录。执行此操作的“简洁”方法是使用递归函数（调用自身）和每个 DTA 的“局部变量”（在堆栈上）。然后，当您`ret`从后续呼叫中恢复时，您将获得“正确”的 DTA。

我有一个例子——在 Nasm 语法中（不是你正在使用的！）。它只列出“所有目录中的所有文件”，不会尝试检查重复项。我的主页上有这个链接的副本，但它已经死了 - uppity ISP 显然已经删除了它。我想我能找到它，我可以把它邮寄给你——fbkotler（猪尾巴）myfairpoint（小数点）网络——它的语法“错误”，不能做你想做的一切，但“可能”是一些帮助...

在我看来，要查找重复的文件名，您需要将找到的每个文件名与在所有其他子目录中找到的每个文件进行比较。“字符串”指令`rep cmpsb`可能对进行比较有用，但它是一项艰巨的工作！只要在一个目录中找到“myfile.asm”、“myfile.obj”和“myfile.exe”（也可能是“.lst”和“.map”）会更容易，如果这能让“客户”满意的话。 ..

我不羡慕你，但希望能听到更多关于这个问题的消息……

# jsf - el-api jar 文件冲突导致的链接错误

> ID：14352220
> 
> 赞同：0
> 
> 时间：2013-01-16T05:59:29.667
> 
> 标签：jsf, dynamic, components, creation

我在 JSF 中生成动态组件，这是我的`faces-config.xml`文件：

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0" >
<application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    <resource-bundle>
        <base-name>build</base-name>
        <var>build</var>
    </resource-bundle>
    <resource-bundle>
        <base-name>message</base-name>
        <var>message</var>
    </resource-bundle>
    <locale-config>
     <default-locale>en</default-locale>
     <supported-locale>fr</supported-locale>
     <supported-locale>es</supported-locale>
    </locale-config>
</application> 
```

我收到如下链接错误

```
 SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/sun/faces/config/ConfigureListener, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type javax/el/ExpressionFactory used in the signature
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:294)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 
```

我已将`el-api jar`文件添加到我的`/WEB-INF/lib`文件夹中。我找到了一种解决方案，由于冲突而排除 Spring EL。解决方案是在 中添加以下代码`pom.xml`，但我的应用程序中没有该文件。

```
 <dependencies>
    <dependency org="org.springframework" name="org.springframework.web.servlet" rev="3.0.5.RELEASE">
        <!-- Fix for java.lang.LinkageError: loader constraint violation -->
        <exclude name="com.springsource.javax.el" />
    </dependency>
</dependencies> 
```

我需要把这个`<dependency>`标签放在哪里？我不知道。在我的应用程序中，我只有 `faces-config.xml`,`application-context.xml`和`web.xml`文件。我的应用程序基于 Spring 和 JSF 集成。我正在使用Tomcat服务器。它包含文件`context.xml`、`web.xml`和. 我需要把那个标签放在哪里？还是有替代解决方案？我不想删除文件。`server.xml``tomcat-users.xml``<dependency>``el-api.jar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:20:34.523

该`<dependency>`标签是[Maven](http://maven.apache.org)的一部分。Maven 是一个依赖项管理工具，它使您能够管理依赖项，而无需手动携带松散的 JAR 文件。本质上，Maven 将自动下载正确的编译时依赖项，并且 Maven 将自动填充`/WEB-INF/lib`正确的运行时依赖项，所有这些都基于`pom.xml`. 您在那里的条目基本上告诉 Maven 将 Spring EL 依赖项排除在`/WEB-INF/lib`.

由于您没有使用 Maven，因此您本质上只是做与 Maven 在幕后所做的完全相同的事情：*不要*将 Spring EL JAR 文件放在`/WEB-INF/lib`.

但是，我想知道这是否是正确的解决方案。我不这么认为。

EL API 默认情况下**已由**Tomcat 本身提供。因此，如果它不是相同的版本，那么放置你自己的`/WEB-INF/lib`只会导致问题。您不清楚为什么不想删除它，也许您错误地认为特定的 JAR 文件可以解决您没有告诉任何内容的特定问题，但毕竟它实际上是错误的解决方案。

保留servletcontainer 本身*已经*提供`/WEB-INF/lib`的库。无论您想通过放置 EL API JAR 来解决什么问题，都必须以不同的方式解决。也许您正在使用 Eclipse 并试图以错误的方式修复编译错误。请参阅下面的第二个链接以获取正确的解决方案。*`/WEB-INF/lib``javax.el`*

 *### 也可以看看：

*   [java.lang.LinkageError: javax.servlet.jsp.JspApplicationContext.getExpressionFactory](https://stackoverflow.com/questions/8487048/java-lang-linkageerror-javax-servlet-jsp-jspapplicationcontext-getexpressionfac)
*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/)
*   [https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)*

# javascript - 轴上的 Highchart 日期季度视图

> ID：14352221
> 
> 赞同：0
> 
> 时间：2013-01-16T05:59:31.180
> 
> 标签：javascript, jquery, highcharts, highstock

如何调整条形图中的轴，以便每个季度的第一个月将显示为给定时间间隔的轴点。

例如：- 如果开始年份是 2012 年，结束年份是 2013 年，则轴应显示为

`jan 2012, apr 2012, jul 2012, Oct 2012 , jan 2013, apr 2013, jul 2013, Oct 2013`

[演示链接](http://jsfiddle.net/BrbWt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:01:58.170

```
yAxis:  {      
 type: 'datetime',
 min: Date.UTC(2012,0,1),
 title: {text: ''},
 tickInterval: 24 * 3600 * 1000 *30 * 4,
 labels: {
 formatter: function() {
  var d= new Date(this.value);
  var month = d.getMonth();
  var monArr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
  return monArr[month] + " - " + d.getFullYear();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:57:30.310

Instead of arrays, you can set tickInterval and in formatter use Highcharts.dateFormat();

[https://api.highcharts.com/highcharts/data.dateFormat](https://api.highcharts.com/highcharts/data.dateFormat)

# matplotlib - 在 matplotlib 中调整大小来保存图形

> ID：14352223
> 
> 赞同：4
> 
> 时间：2013-01-16T05:59:56.407
> 
> 标签：matplotlib, clone, image-resizing

在 matplotlib 中显示我的绘图时，我还尝试将其保存为使用不同尺寸的 png。我正在复制我的主要人物 (print_fig = fig)，然后更改 print_fig 大小 (print_fig.set_size_inches(7,3))。但是，这适用于更改我的原始图，而不仅仅是 print_fig。有什么办法可以“克隆”一个图形对象吗？

我的代码看起来像这样：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)
ax.set_ylabel("y-label")

for i in xrange(5):
    ax.plot(x, i * x, label='$y = %ix$' % i)

ax.legend()
#change dimension of figure for print 
#clone fig displayed
print_fig = fig
print_fig.set_size_inches(7,3)
print_fig.savefig('print_fig.png')
plt.show() 
```

这是我的屏幕的样子： ![在此处输入图像描述](../Images/52b6e72d0df217871d1ad5a53591cc44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:56:32.483

如果您想要以不同的分辨率保存 png，则无需调整图形大小。您可以使用`dpi`关键字 in控制图像大小`savefig`。

当您调用`savefig`时，默认情况下它使用 rc `savefig.dpi`（您可以在`.matplotlibrc`文件中检查它，通常为 100）。因此，如果您想更改输出文件的分辨率，只需按您想要的数量缩放 dpi：

```
plt.savefig('myfig100.png', dpi=100)
plt.savefig('myfig50.png', dpi=50) 
```

第二个将具有第一个的一半的宽度和高度。

如果你想改变宽度/高度的比例，那么这当然没有帮助。您正在做的是改变图形比例以进行储蓄的正确方法。但它会改变你的窗口，如你所见。如果您没有在 之后绘制任何其他内容`show()`，则可以执行以下操作：

1.  做你的绘图电话
2.  称呼`show()`
3.  做`fig.set_size_inches(7,3)`
4.  最后做你的`savefig()`

这样，除非您对图形进行进一步更改，否则您将能够保存所需的尺寸，并且屏幕上的图形不会更新为这些尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T00:24:45.190

这是一个想法：如果我没记错的话，一些 Matplotlib 后端不显示任何内容（比如`pdf`后端），所以也许你可以[切换到另一个后端](http://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use)，更改图形大小（不会显示在屏幕上），然后保存它（然后切换回原来的后端）。

不过，我还没有测试过这个想法，后端切换仍然是实验性的。但这可能值得一试。

# asp.net - 将站点的管理部分实现为子文件夹

> ID：14352225
> 
> 赞同：0
> 
> 时间：2013-01-16T06:00:13.473
> 
> 标签：asp.net, c#-4.0, design-patterns

![目录结构](../Images/99513b929ff7e5fa60e7ed74ba0acfb2.png)

我的应用程序有这个目录结构，我需要使用**子文件夹 admin**进行网站管理，admin 文件夹具有单独的登录名、基于角色的身份验证系统，与主站点无关。如您所见，它有单独的 web.config 用于身份验证。我希望用户使用访问管理部分，`http://localhost/library/admin`但是当我在管理员的 web.config 中实现基于表单的身份验证时，它给了我`MachineToApplication`错误，我尝试将其转换为应用程序然后它工作正常，但我无法使用 App_Code 类！**我有这种感觉，我做错了，并且对这个子文件夹实现**错误感到困惑，因为 admin 完全是一个单独的应用程序。请建议如果这是正确的，或者我该如何改进。
注意：我打算对主站点和管理员都使用相同的**App_Code 文件夹和数据库**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:14:20.403

为了让您的项目设置快速获胜，您能否在同一数据库服务器上创建一个单独的管理数据库，而只使用 /admin/ 部分中的备用连接字符串？在两者上设置成员资格，然后您就拥有一个与站点其余部分完全隔离的管理数据库。

# backbone.js - 错误'Uncaught SyntaxError: Unexpected token < in underscore.js'

> ID：14352227
> 
> 赞同：0
> 
> 时间：2013-01-16T06:00:43.397
> 
> 标签：backbone.js, underscore.js, template-engine

这是我的代码，

**HTML：**

```
<script type="text/html" id="test_temp">
    <div class="row" id="opportunityList">
        <% _.each(ops, function(option){
            <div class="span12">
                <div class="well basicInformation">
                    <div class="row">
                        <div class="span4 opportunityName" >
                            <h4><%= option.company_name %></h4>
                        </div>
                        <div class="span4 pull-right">
                            <ul class="inline">
                                <li class="dealGrade">
                                    <span><%= option.dealGrade %></span>
                                    <span class="subheader">Deal Grade</span>
                                </li>
                                <li class="estimateddevices">
                                    <span><%= option.devices %></span>
                                    <span class="subheader">Devices</span>
                                </li>
                                <li class="accountValue">
                                    <span><%= option.accountValue %></span>
                                    <span class="subheader">Account value</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        });
        %>
    </div>
</script> 
```

**脚本：**

```
testView = Backbone.View.extend({
    initialize: function(){
        this.render();
    },

    render: function(){
        var ops = [
            {dealGrade: '50%', devices: 123, accountValue: '20%', company_name: 'Kyocera', rep_name: 'James Kogg', rep_designation: 'Sales Rep', proposalCount: 2},
            {dealGrade: '75%', devices: 215, accountValue: '41%', company_name: 'Flipkart', rep_name: 'Christina Kogg', rep_designation: 'MD', proposalCount: 0}
        ]

        var template = _.template($("#test_temp").html(), ops);

        this.$el.append(template);
    }
});

var test_view = new testView({ el: $("#viewport .container") }); 
```

我收到此错误消息：

> Uncaught SyntaxError: Unexpected token < in underscore.js

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:06:51.460

您没有关闭`<%`周围`_.each`或打开模板标签`_.each`的关闭`});`：

```
<script type="text/html" id="test_temp">
   <div class="row" id="opportunityList">
     <% _.each(ops, function(option){ %>
       ...
     <% }); %>
   </div>
</script> 
```

Underscore 的模板引擎非常简单，它只是做一些简单的文本处理来将你的模板从里到外转换成 JavaScript 代码。

此外，模板函数希望它的数据作为键/值对（即 JavaScript 对象），所以你需要给你`ops`的名字：

```
var template = _.template($("#test_temp").html(), { ops: ops }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-24T08:38:54.203

我遇到了类似的错误

> Uncaught SyntaxError: Unexpected token `var` at new Function () at Function._.template

那是因为在我的模板中我在里面写了一个 js 语句`<%=`而不是`<%`

所以请确保您的模板的语法是正确的

# ios - 当 iOS 设备进入睡眠模式（屏幕变黑时）时，是否可以检测到该事件？

> ID：14352228
> 
> 赞同：14
> 
> 时间：2013-01-16T06:00:48.583
> 
> 标签：ios, iphone-privateapi, sleep-mode

我想检测两个事件：

1.  设备被锁定/解锁。
2.  设备进入睡眠状态，屏幕变黑。

我在这里能够实现的第一个： [有没有办法检查 iOS 设备是否被锁定/解锁？](https://stackoverflow.com/questions/14229955/is-there-a-way-to-check-if-the-ios-device-is-locked-unlocked/14271472#14271472)

现在我想检测第二个事件，有什么办法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T11:39:09.997

你基本上已经有了解决方案，我猜你是从我最近的一个答案中找到的:)

使用`com.apple.springboard.hasBlankedScreen`事件。

屏幕空白时会发生多个事件，但这一个就足够了：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                NULL, // observer
                                hasBlankedScreen, // callback
                                CFSTR("com.apple.springboard.hasBlankedScreen"), // event name
                                NULL, // object
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

回调在哪里：

```
static void hasBlankedScreen(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    NSString* notifyName = (__bridge NSString*)name;
    // this check should really only be necessary if you reuse this one callback method
    //  for multiple Darwin notification events
    if ([notifyName isEqualToString:@"com.apple.springboard.hasBlankedScreen"]) {
       NSLog(@"screen has either gone dark, or been turned back on!");
    }
} 
```

* * *

**更新：**正如@VictorRonin 在下面的评论中所说，应该很容易跟踪屏幕当前是**打开**还是**关闭**。这使您可以确定`hasBlankedScreen`屏幕打开或关闭时是否正在发生事件。例如，当您的应用启动时，设置一个变量以指示屏幕处于打开状态。此外，任何时候发生任何 UI 交互（按下按钮等），您都知道当前必须打开屏幕。因此，`hasBlankedScreen`您得到的下一个应该表明屏幕已**关闭**。

另外，我想确保我们清楚术语。当屏幕因超时自动变暗或用户手动按下电源按钮时，设备*会锁定。*无论用户是否配置了**密码**，都会发生这种情况。届时，您将看到`com.apple.springboard.hasBlankedScreen`和`com.apple.springboard.lockcomplete`事件。

当屏幕重新打开时，您将`com.apple.springboard.hasBlankedScreen`再次看到。`com.apple.springboard.lockstate`但是，在用户通过滑动（可能还有密码）实际解锁设备之前，您不会看到。

* * *

**更新 2：**

还有另一种方法可以做到这一点。您可以使用一组备用 API 来侦听此通知，并在通知到来时[获取状态变量：](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/DarwinNotify/Reference/reference.html)

```
#import <notify.h>

int status = notify_register_dispatch("com.apple.springboard.hasBlankedScreen",
                                      &notifyToken,
                                      dispatch_get_main_queue(), ^(int t) {
                                          uint64_t state;
                                          int result = notify_get_state(notifyToken, &state);
                                          NSLog(@"lock state change = %llu", state);
                                          if (result != NOTIFY_STATUS_OK) {
                                              NSLog(@"notify_get_state() not returning NOTIFY_STATUS_OK");
                                          }
                                      });
if (status != NOTIFY_STATUS_OK) {
    NSLog(@"notify_register_dispatch() not returning NOTIFY_STATUS_OK");
} 
```

并且您将需要保留一个*ivar*或其他一些**持久**变量来存储通知令牌（不要只是在注册的方法中将其设为局部变量！）

```
int notifyToken; 
```

您应该看到`state`通过 获得的变量`notify_get_state()`在 0 和 1 之间切换，这将使您能够区分屏幕开启和关闭事件。

虽然[这个文档很旧](http://iphonedevwiki.net/index.php/SpringBoard.app/Notifications)，但它确实列出了哪些通知事件具有可以通过 检索的关联状态`notify_get_state()`。

**警告：** [有关最后一种技术的一些并发症，请参阅此相关问题](https://stackoverflow.com/q/14820249/119114)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:33:50.193

您还可以订阅通知：“com.apple.springboard.lockstate”并使用 API [SBGetScreenLockStatus](http://www.marekbell.com/sbgetscreenlockstatus/)来确定设备是否被锁定。

# c - sdcc 不接受代码

> ID：14352229
> 
> 赞同：2
> 
> 时间：2013-01-16T06:00:50.423
> 
> 标签：c, compiler-construction, z80, sdcc

我对 SDCC 有疑问。我的代码（我试图从另一个编译器移植）使用具有灵活数组成员的结构。但是，当我尝试编译以下代码时：

```
/** header of string list */
typedef struct {
    int nCount;
    int nMemUsed;
    int nMemAvail;
} STRLIST_HEADER;

/** string list entry data type */
typedef struct {
    int nLen;
    char str[];
} STRLIST_ENTRY;

/** string list data type */
typedef struct {
    STRLIST_HEADER header;
    STRLIST_ENTRY entry[];
} STRLIST;                      // By the way, this is the line the error refers to.

int main()
{
    return 0;
} 
```

SDCC 给出以下错误：

```
$ sdcc -mz80 -S --std-c99 test.c
test.c:18: warning 186: invalid use of structure with flexible array member
test.c:18: error 200: field 'entry' has incomplete type 
```

是什么赋予了？这段代码在 gcc 中编译得很好，更不用说我正在使用的其他 z80 编译器了。

编辑：我发现[这个 SDCC 错误](http://sourceforge.net/tracker/?func=detail&aid=3579067&group_id=599&atid=100599)似乎是相关的。有人可以解释它是否以及如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:52:41.393

SDCC 就在那里，gcc-4.6.2 也没有“很好”地编译它。好吧，如果你要求它学究式地遵守标准。

用`-std=c99 -pedantic`（或`-std=c1x -pedantic`）编译，gcc 发出

```
warning: invalid use of structure with flexible array member 
```

和 clang-3.0 的行为类似，它的警告信息略多：

```
warning: 'STRLIST_ENTRY' may not be used as an array element due to flexible array member 
```

该标准在 6.7.2.1 (3) 中禁止：

> 结构或联合不应包含不完整或函数类型的成员（因此，结构不应包含自身的实例，但可能包含指向自身实例的指针），除非结构的最后一个成员具有超过一个命名成员可能有不完整的数组类型；**这样的结构（以及任何可能递归地包含此类结构的成员的联合）不应是结构的成员或数组的元素。**

（重点是我的）

gcc 和 clang 允许将具有`struct`灵活数组成员的`struct`s 作为 s 的成员或作为扩展的数组。该标准禁止这样做，因此使用该代码的代码不可移植，并且每个编译器都有权拒绝该代码。

链接的问题不相关，如果`struct`具有灵活数组成员的 a 被实例化为自动，则不发出警告，这在标准中是不允许的（但被 SDCC 和其他人作为扩展接受）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T07:58:37.410

想想*为什么*这是一个错误。

STRLIST_ENTRY 的大小未知，因为 str[] 是可变长度的。

STRLIST 包含一个可变长度的STRLIST_ENTRY 数组。

在内存中，数组是一系列STRLIST_ENTRY，一个接一个地排列。

由于其中的元素大小未知，如何知道索引指向的偏移量？

char str[] 应该被赋予固定大小，或者将 char* 设置为数组外部的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-18T14:42:14.133

我知道我已经晚了 8 年 :)，但也许它可以帮助别人。这是用于结构末尾数据的技巧（即，当您有一个标题并且最后一个成员是未知大小的数据时）：

```
typedef struct {
    int nLen;
    char str[0];
} STRLIST_ENTRY; 
```

这将允许您使用索引 ie 处理字符串中的任何字符，`str[10]`并且 char`*ptr=str`也会为您提供正确的结果。

# mysql - 如何使用单词边界在 MYSQL REGEXP 查询中查找带有连字符的单词？

> ID：14352232
> 
> 赞同：3
> 
> 时间：2013-01-16T06:00:54.217
> 
> 标签：mysql, regex

我有一个 MYSQL 查询来尝试查找带连字符的单词。我正在使用 MYSQL 单词边界。

```
SELECT COUNT(id) 
AS count 
FROM table 
WHERE (name REGEXP '^[[<:]]some-words-with-hyphens[[:>:]]/') 
```

这似乎有效，尽管以下内容不起作用**（参见“连字符”一词后的 - ）**：

```
SELECT COUNT(id) 
AS count 
FROM table 
WHERE (words REGEXP '^[[<:]]some-words-with-hyphens-[[:>:]]/') 
```

我试图逃避 -`\-`但这似乎并没有改变结果。我还尝试将 - 放在 [-] 之类的括号中，但这似乎并没有改变结果。

在理解连字符将位于“单词”之内并可能位于“单词”末尾的情况下，编写此查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:16:14.173

如[正则表达式](http://dev.mysql.com/doc/en/regexp.html)中所述：

> 运算符的正则表达式[`REGEXP`](http://dev.mysql.com/doc/en/regexp.html#operator_regexp)可以使用以下任何特殊字符和结构：
> 
> `[ *deletia* ]`
> 
> *   `[[:<:]]`,`[[:>:]]`
>     
>     
>     
>     这些标记代表单词边界。它们分别匹配单词的开头和结尾。单词是前面或后面没有单词字符的单词字符序列。单词字符是`alnum`类中的字母数字字符或下划线 ( `_`)。
>     
>     
>     
>     ```
>     mysql> SELECT 'a word a' REGEXP '[[:<:]]word[[:>:]]';    -> 1
>     mysql> SELECT 'a xword a' REGEXP '[[:<:]]word[[:>:]]';   -> 0
>     
>     ```

由于`-`和`/`都是非单词字符，因此`[[:>:]]`构造与它们之间的点*不*匹配。

目前尚不清楚您为什么要使用这些构造，因为以下内容应该可以解决问题：

```
words REGEXP '^some-words-with-hyphens-/' 
```

事实上，在这种情况下为什么还要使用正则表达式还不清楚，因为简单的模式匹配可以达到同样的效果：

```
words LIKE 'some-words-with-hyphens-/%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:20:09.887

假设这`some-words-with-hyphens`实际上是一个正则表达式而不是一些逐字文本，您可以简单地`-`在正则表达式的末尾添加一个可选项，以便匹配尾随破折号（如果存在）：

```
WHERE (name REGEXP '^[[<:]]some-words-with-hyphens[[:>:]]-?/') 
```

@eggyal 已经解释了为什么单词边界在该连字符之前匹配。

# r - 使用带有 klaR 包的预测时出错，NaiveBayes

> ID：14352240
> 
> 赞同：2
> 
> 时间：2013-01-16T06:01:56.980
> 
> 标签：r, bayesian, predict

我正在使用[R 中的 Naive bayes](https://stackoverflow.com/questions/9157626/naive-bayes-in-r)帖子中提到的`klaR`包的方法：`predict`

```
nb_testpred <- predict(mynb, newdata=testdata). 
```

`nb_testpred`是我的朴素贝叶斯模型，开发于`traindata`; `testdata`是剩余的数据。

但是，我收到此错误：

```
Error in FUN(1:10[[4L]], ...) : subscript out of bounds 
```

我不确定发生了什么 -`testdata`行数少于`traindata`，列数相同。

作为参考，我的代码如下所示：

```
ind       <- sample(2, nrow(mydata), replace=TRUE, prob=c(0.9,0.1))
traindata <- mydata[ind==1,]
testdata  <- mydata[ind==2,]
myformula <- as.factor(dep) ~ X1 + as.factor(X2) + as.factor(X3) + as.factor(X4) + X5 + as.factor(X6) + as.factor(date) + as.factor(hour)
mynb        <- NaiveBayes(myformula, data=traindata)
nb_testpred <- predict(mynb, newdata=testdata) #where I'm getting an error... 
```

数据样本在这里（原始文件有 100,000+ 行）：

```
sampledata <- structure(list(dep = c(1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L), X1 = structure(c(2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L), .Label = c("A", "B"), class = "factor"), X2 = c(200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 200L, 
200L, 200L), X3 = structure(c(4L, 2L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L), .Label = c(".", "1400000", "2400000", "900000"), class = "factor"), X4 = c(0L, 0L, 0L, 3L, 4L, 5L, 5L, 5L, 5L, 0L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 0L), X5 = c(TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE), X6 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L),     date = structure(c(1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L), .Label = c("9/23/2012", 
"9/24/2012"), class = "factor"), hour = c(18L, 17L, 23L, 8L, 1L, 19L, 19L, 16L, 22L, 2L, 12L, 16L, 15L, 9L, 1L, 9L, 
13L, 19L)), .Names = c("dep", "X1", "X2", "X3", "X4", "X5", "X6", "date", "hour"), class = "data.frame", row.names = c(NA, -18L)) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:59:01.250

您可以执行以下操作：

```
traindata$dep=factor(traindata$dep)
mynb <- NaiveBayes(dep~.,traindata) 
```

然后它可以工作，但是您应该优化您的数据以避免恒定列。

# java - 异常输出不按顺序出现

> ID：14352241
> 
> 赞同：2
> 
> 时间：2013-01-16T06:02:14.203
> 
> 标签：java, core

我的代码如下：

```
public class BoxingUnboxingExample {
    public static void main(String[] args) {
        Integer i1 = null;
        Integer i3 = 10;
        BoxingUnboxingExample b = new BoxingUnboxingExample();
        b.go(i3);
        b.go(i1);
    }
    private void go(int a){
        System.out.println("a");
    }
} 
```

现在我的问题是：

有时我会收到以下错误消息，

```
Exception in thread "main" java.lang.NullPointerException
at scjp.wraperExample.BoxingUnboxingExample.main(BoxingUnboxingExample.java:12)
a 
```

鉴于，我认为应该始终如下，

```
a
Exception in thread "main" java.lang.NullPointerException
at scjp.wraperExample.BoxingUnboxingExample.main(BoxingUnboxingExample.java:12) 
```

我对么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:14:27.047

一个原因可能是异常堆栈跟踪用于在使用时`standard error (System.err)`输出错误数据。`System.out.println``standard output (System.out)`

这意味着两者都使用不同的机制来输出数据，这些可能无法正确同步。

您也可以参考这个[较早的问题](https://stackoverflow.com/questions/1883321/java-system-out-println-and-system-err-println-out-of-order)。

前任

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:08:30.423

输出和错误是两个不同的流`System.err`和`System.out`.

读这个：

> 将标准输出和标准错误定向到相同的目的地（例如文本终端）是可以接受的并且是正常的。除非涉及缓冲，否则消息的出现顺序与程序写入它们的顺序相同。**（例如，一种常见的情况是标准错误流是无缓冲的，而标准输出流是行缓冲的；在这种情况下**，如果标准输出流的缓冲区没有，则稍后写入标准错误的文本可能会更早出现在终端上。还满。）

来自[维基百科](http://en.wikipedia.org/wiki/Standard_streams)

所以你的输出流（System.out.println）实际上是缓冲的。在内部它调用`BufferedWriter.write()`方法。看看这个： [System.out.println() 如何真正起作用](http://luckytoilet.wordpress.com/2010/05/21/how-system-out-println-really-works/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:13:15.810

这里至少有 2 种效果在起作用，它们都与 2 种不同流的方式`System.out`和`System.err`（自然）有关。

### 缓冲

`System.err`并且`System.out`都是 PrintStreams，默认情况下是缓冲的，但是`System.err`通常设置为在每次写入后自动刷新（字节数组或每当写入换行符时）。

因此，如果在`System.err`被刷新之前`System.out`被刷新，它将首先出现在屏幕上。

### 阅读那些流

`System.out`在编辑器中，两者都`System.err`显示在一个控制台中并不少见。发生这种情况的方式将影响它们的显示顺序。Eclipse 有 2 个进程，每个流一个，用于从流中读取并显示它们。它们读取（以及显示）的顺序是不确定的。`System.err`如果两个流被准同时写入，则读取的进程将有 50% 的机会首先接收输入。因此，它们可能看起来是随机交错的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:17:15.607

如果您在 Eclipse 中，这是一个已知问题，请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=32205](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32205)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T20:08:44.313

```
public class Main {

        public static void main(String[] args) {
            System.setErr(System.out); // this line seems to solve the problem
            System.out.println("test");

            throw new RuntimeException("Test");
        }

} 
```

# java - Java 打印字体拉伸

> ID：14352243
> 
> 赞同：4
> 
> 时间：2013-01-16T06:02:17.417
> 
> 标签：java, printing, fonts, graphics2d, stretch

我刚刚让打印机在 java 中工作，我也需要它，但是我需要解决最后一个问题。打印时，字体的宽度被拉长了，不像应有的那样清晰。

这是我的代码，我在纸上的实际绘图：

```
 FontMetrics metrics = graphics.getFontMetrics(font);
    int lineHeight = metrics.getHeight();

    arrangePage(graphics, pageFormat, lineHeight);

    if (page > pageBreaks.length){
        return NO_SUCH_PAGE;
    }

    Graphics2D g = (Graphics2D) graphics;

    g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
    g.setFont(font);

    int y = 0;
    int begin = 0;

    if (page == 0){
        begin = 0;
    }else begin = pageBreaks[page-1];

    int end = 0;

    if (page == pageBreaks.length){
        end = lines.length;
    }else end = pageBreaks[page];

    for (int line = begin; line < end; line++){
        y += lineHeight;
        g.drawString(lines[line], 0, y);
    }

    string = deepCopy;

    return PAGE_EXISTS; 
```

如何摆脱拉伸？可以注意到，这是基于本教程： [http ://docs.oracle.com/javase/tutorial/2d/printing/set.html](http://docs.oracle.com/javase/tutorial/2d/printing/set.html)

非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:32:03.843

默认 DPI 是正常的 72 DPI（我相信），在打印纸上，这非常糟糕。您需要提示打印 API 尝试查找具有更好 DPI 的打印机。

基本上你需要使用打印服务 API。

尝试类似...

```
public class PrintTest01 {

  public static void main(String[] args) {

    PrinterResolution pr = new PrinterResolution(300, 300, PrinterResolution.DPI);

    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    aset.add(MediaSizeName.ISO_A4);
    aset.add(pr);
    aset.add(OrientationRequested.PORTRAIT);

    PrinterJob pj = PrinterJob.getPrinterJob();
    pj.setPrintable(new Page());
    try {
      pj.print(aset);
    } catch (PrinterException ex) {
      ex.printStackTrace();
    }

  }

  public static class Page implements Printable {

    @Override
    public int print(Graphics g, PageFormat pageFormat, int pageIndex) throws PrinterException {
      if (pageIndex > 0) {
        return NO_SUCH_PAGE;
      }

      Graphics2D g2d = (Graphics2D) g;
      g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());

      g.setFont(new Font("Arial", Font.PLAIN, 128));
      FontMetrics fm = g.getFontMetrics();
      int x = (int)(pageFormat.getWidth() - fm.stringWidth("A")) / 2;
      int y = (int)((pageFormat.getHeight() - fm.getHeight()) / 2) + fm.getAscent();

      g2d.drawString("A", x, y);

      return PAGE_EXISTS;
    }
  }
} 
```

您可能会发现[使用打印服务和属性](http://docs.oracle.com/javase/tutorial/2d/printing/services.html)的一些帮助...

我应该警告你，这将打印到它可以找到的第一个符合`PrintRequestAttributeSet`. 您还可以在打印对话框中添加以查看它在做什么，但这是我现在可以生活的另一个复杂程度；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:37:29.120

以上工作！要使用它打开打印对话框，请使用以下命令：

```
 PrinterJob job = PrinterJob.getPrinterJob();
    TextDocumentPrinter document = new TextDocumentPrinter();

    PrinterResolution pr = new PrinterResolution(300, 300, PrinterResolution.DPI);

    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    aset.add(MediaSizeName.ISO_A4);
    aset.add(pr);
    aset.add(OrientationRequested.PORTRAIT);

    job.setPrintable(document);

    boolean doPrint = false;

    if (showDialog){
        doPrint = job.printDialog(aset);
    }else doPrint = true;

    if (doPrint){
        try{
            job.print();
        }catch(PrinterException e){
            e.printStackTrace();
        }
    } 
```

aset 变量包含所有新的默认值，通过将其插入到 printDialog 中，这些值被输入到 printJob 中并因此显示在纸上！它们也可以在对话框中更改。

# ruby-on-rails - find_by_id 仍然触发 ActiveRecord::RecordNotFound

> ID：14352246
> 
> 赞同：0
> 
> 时间：2013-01-16T06:02:26.183
> 
> 标签：ruby-on-rails

通过在我的控制器中查询不存在的帖子时

```
@post = Post.find_by_id(params[:id]) 
```

我得到 ActiveRecord::RecordNotFound。但是当我在 Rails 控制台中做同样的事情时，我得到了 nil 返回。

我也尝试过`find_by_id!`（注意感叹号）应该触发 404，但它仍然只给我 ActiveRecord::RecordNotFound。

我发现 gem 可能会导致这种问题（请参阅问题：[Rails Find_by_id raises exception](https://stackoverflow.com/questions/12148785/rails-find-by-id-raises-exception)），所以我的问题是如何确定我使用的哪个 gem 会导致同样的问题？

这是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'
gem 'pg'
gem 'jquery-rails'
gem 'fancybox-rails', :git => 'https://github.com/sverigemeny/fancybox-rails'
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'omniauth-google-oauth2'
gem 'validates_email_format_of', :git => 'git://github.com/alexdunae/validates_email_format_of.git'
gem 'cancan'
gem 'thin'
gem 'chronic'
gem 'simple_form'
gem 'twitter'
gem 'kaminari'

group :assets do
  gem 'sass-rails'
  gem 'compass-rails'
  gem 'coffee-rails'
  gem 'uglifier', '>= 1.0.3'
end

group :development do
  gem 'quiet_assets'
  gem 'faker'
end 
```

在找到可能导致此问题的 Gem 之前，我不知道如何才能一一禁用，因为由于过程中的 Gem 依赖关系，我很可能会触发许多其他错误。

有人知道我应该怎么做吗？

**更新** 这是完整的堆栈跟踪：

```
ActiveRecord::RecordNotFound in PostsController#edit

Couldn't find Post with id=123202

activerecord (3.2.7) lib/active_record/relation/finder_methods.rb:341:in `find_one'
activerecord (3.2.7) lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
activerecord (3.2.7) lib/active_record/relation/finder_methods.rb:107:in `find'
activerecord (3.2.7) lib/active_record/querying.rb:5:in `find'
cancan (1.6.8) lib/cancan/model_adapters/abstract_adapter.rb:20:in `find'
cancan (1.6.8) lib/cancan/controller_resource.rb:114:in `find_resource'
cancan (1.6.8) lib/cancan/controller_resource.rb:68:in `load_resource_instance'
cancan (1.6.8) lib/cancan/controller_resource.rb:32:in `load_resource'
cancan (1.6.8) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
cancan (1.6.8) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
activesupport (3.2.7) lib/active_support/callbacks.rb:418:in `_run__4208450199150212965__process_action__1027836660135587880__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.7) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.7) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.7) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.7) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.7) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.7) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.7) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.7) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.7) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.7) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.7) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:600:in `call'
omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.1) lib/omniauth/builder.rb:48:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.3) lib/rack/etag.rb:23:in `call'
rack (1.4.3) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.7) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `_run__503554315877740465__call__403817388267166975__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.7) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.7) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.7) lib/rails/rack/logger.rb:16:in `call'
quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
actionpack (3.2.7) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.3) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.7) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.3) lib/rack/lock.rb:15:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.7) lib/rails/engine.rb:479:in `call'
railties (3.2.7) lib/rails/application.rb:220:in `call'
rack (1.4.3) lib/rack/content_length.rb:14:in `call'
railties (3.2.7) lib/rails/rack/log_tailer.rb:17:in `call'
thin (1.5.0) lib/thin/connection.rb:81:in `block in pre_process'
thin (1.5.0) lib/thin/connection.rb:79:in `catch'
thin (1.5.0) lib/thin/connection.rb:79:in `pre_process'
thin (1.5.0) lib/thin/connection.rb:54:in `process'
thin (1.5.0) lib/thin/connection.rb:39:in `receive_data'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
thin (1.5.0) lib/thin/backends/base.rb:63:in `start'
thin (1.5.0) lib/thin/server.rb:159:in `start'
rack (1.4.3) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.3) lib/rack/server.rb:268:in `start'
railties (3.2.7) lib/rails/commands/server.rb:70:in `start'
railties (3.2.7) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.7) lib/rails/commands.rb:50:in `tap'
railties (3.2.7) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:17:23.667

正如drawinglis指出的那样，这是由cancan引起的。

Cancan 加载帖子以确定用户是否有权对其执行任何操作。如果未找到该帖子，它将返回 404，ActiveRecord::RecordNotFound。

在这里，Ryan 稍微介绍了这背后的原因：[https](https://github.com/ryanb/cancan/issues/43) ://github.com/ryanb/cancan/issues/43如果这不是您需要的行为，他还建议从 404 中拯救出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:06:31.010

drwesinglis 和 cheeseweasel 是正确的，这是由 CanCan 引起的。我无法从帖子[https://github.com/ryanb/cancan/issues/43](https://github.com/ryanb/cancan/issues/43)中获得解决方案来工作，所以我`load_and_authorize_resource`从我的控制器中删除了，我现在手动检查用户是否有权完成操作.

我的控制器现在看起来像这样：

```
@post = Post.find_by_id(params[:id])
if @post
  if can? :update, @post
    ...
  else
    flash[:error] = 'You are not authorized to access this post.'
    redirect_to root_url
  end
else
  flash[:error] = 'This post doesn\'t exist.'
  redirect_to root_url
end 
```

我将在开发周期的后期更新我的代码以重定向到更好的 404 页面，但现在我只显示消息。

# c# - 是否有与 C# 中的“new”修饰符等效的 Java？

> ID：14352250
> 
> 赞同：8
> 
> 时间：2013-01-16T06:02:54.607
> 
> 标签：c#, java, polymorphism

> **可能重复：**
> [Java 中的方法是否有“新”修饰符？](https://stackoverflow.com/questions/1125269/is-there-a-new-modifier-for-methods-in-java)

在 c# 中，子类的方法可以[修改为 new](http://msdn.microsoft.com/en-us/library/vstudio/435f1dw2.aspx)。

new 修饰符的一种用法是显式隐藏从基类继承的成员。

Java中有相同的关键字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:26:20.350

不。

在 C# 中，您使用 new 来隐藏/隐藏基类的非虚拟函数。您在 C# 中需要这个关键字，因为您不能覆盖非虚拟函数。

在 Java 中，默认情况下所有函数都是虚拟的，因此您可以随时覆盖它们，并且不需要诸如 new 之类的关键字。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:51:18.483

在 C# 中，您想要从基类覆盖的任何方法都需要是`abstract`，`virtual`或者`override`本身。new 关键字实际上并没有进行覆盖。它的工作方式有点不同：

如果你用 new 关键字声明一个函数，隐藏一个基类的函数，那么只有当你有一个相同子类型的对象时才会使用这个实现。例子：

```
class TopClass
    {
        public String getHello()
        {
            return "Hello";
        }

        public virtual String getWorld()
        {
            return "World";
        }
    }

    class ChildClass : TopClass
    {
        public new String getHello()
        {
            return "Hi";
        }

        public override string getWorld()
        {
            return "Earth";
        }
    } 
```

这将导致：

```
 TopClass tc = new TopClass();
        Console.WriteLine(tc.getHello() + " " + tc.getWorld()); // Hello World

        ChildClass cc = new ChildClass();
        Console.WriteLine(cc.getHello() + " " + cc.getWorld()); // Hi Earth

        TopClass tc2 = new ChildClass();
        Console.WriteLine(tc2.getHello() + " " + tc2.getWorld()); // Hello Earth

        Console.ReadLine(); 
```

您可以看到 new 关键字与典型覆盖相比的区别：如果将扩展类强制转换为父类 ClassType，则覆盖函数（返回地球而不是世界）仍然有效，而新函数则无效 (不返回 Hi 而不是 Hello)。

# javascript - 使用 mozilla-pdf 在 chrome 浏览器中渲染 PDF 文件

> ID：14352251
> 
> 赞同：1
> 
> 时间：2013-01-16T06:03:00.850
> 
> 标签：javascript, cakephp, mozilla, pdf-reader

我正在尝试在浏览器中呈现 pdf 文件。所以我使用`mozilla-pdf.js`了，它在 Firefox 中工作正常，但是当我尝试在 chrome 中呈现 PDF 文件时，它只显示黑页。

所以请帮助在 chrome 浏览器中渲染这个 PDF 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:30:20.767

为什么不使用[FPDF](http://www.fpdf.org/)或[TCPDF](http://www.tcpdf.org/)之类的东西来生成 PDF 服务器端，然后让 Chrome 使用自己的 PDF 查看器？

这是通过 PHP 在浏览器中打开和显示 pdf 的代码

```
$file='./files/the.pdf';
header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="the.pdf"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
@readfile($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:59:02.273

尝试在下面使用：

**[http://flexpaper.devaldi.com/docs_php.jsp](http://flexpaper.devaldi.com/docs_php.jsp)**

它已经过测试并像魅力一样工作。

随意问。
干杯。

# odp.net - 使用 ODP.NET 的慢速数据读取器

> ID：14352258
> 
> 赞同：0
> 
> 时间：2013-01-16T06:03:28.677
> 
> 标签：odp.net

我们正在使用 (ODP.NET) Oracle.DataAccess 版本 1.102.3.0 和 Oracle 11g 客户端。我在使用 datareader 读取数据时遇到了一些问题，我的程序返回了大约 10000 条记录的 ref_cursor。然而，获取数据大约需要 30 到 40 秒。有没有可能提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:40:23.143

尝试设置 FetchSize。

由于这是一个过程和一个 RefCusor，您可以执行这些操作。

*   执行阅读器
*   设置 FetchSize -> 在开始阅读之前执行此操作
*   阅读结果

如果您遵循上述操作顺序，您将能够获得行的大小。

例如

```
int NumberOfRowsToFetchPerRoundTrip = 2000;

var reader  =cmd.ExecuteReader();
reader.FetchSize = reader.RowSize * NumberOfRowsToFetchPerRoundTrip;
while(reader.Read())
{
//Do something
} 
```

这将减少往返次数。提取大小是字节，因此您也可以使用任意 fetchSize，例如 1024*1024 (1mb)。但是，我建议您根据行的大小 * 每个请求要获取的行数来获取。

另外我会在连接字符串上设置参数

Enlist=false;自整定=False

尽管从一个版本的 ODP/NET 到下一个版本可能会有一些变化，但您似乎可以通过这些设置获得更一致的性能。

# android - 如何从sdcard在android模拟器中打开pdf文件

> ID：14352259
> 
> 赞同：0
> 
> 时间：2013-01-16T06:03:35.717
> 
> 标签：android, pdf, sd-card

嗨，我是 android 开发的新手。我通过ddms手动将pdf文件保存在模拟器sdcard中，当我尝试使用以下代码在模拟器中读取pdf文件时，我还在模拟器中安装了“ **adobe reader ”**

```
File file = 
new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/iTunes Connect.pdf");
        Uri path = Uri.fromFile(file);
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        intent.setDataAndType(path,"application/pdf");
        try 
        {
            startActivity(intent);
        } 
        catch (ActivityNotFoundException e) 
        {
            Toast.makeText(xv.this, 
                getString(R.string.app_name), 
                Toast.LENGTH_SHORT).show();
        } 
```

我收到文件路径无效错误。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:07:54.120

在和之间使用`%20`（用于空格）。`iTunes``20Connect.pdf`

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/iTunes%20Connect.pdf"); 
```

我认为这将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:08:01.330

试试这条路

```
File file=new File("/sdcard/iTunes Connect.pdf"); 
```

我认为这对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-13T11:25:12.830

我认为你的模拟器没有安装adob reader请先检查它是否安装

```
 File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() +"/"+ filename);
    Intent target = new Intent(Intent.ACTION_VIEW);
    target.setDataAndType(Uri.fromFile(file),"application/pdf");
    target.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

    Intent intent = Intent.createChooser(target, "Open File");
    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        // Instruct the user to install a PDF reader here, or something
    }   `enter code here` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:22:46.160

我认为你不应该使用硬编码的文件路径。该框架将为您提供要保存文件的区域的基本路径。

对于 SD 卡，您应该使用 Environment.getExternalStorageDirectory()

您应该使用的本地文件，使用 Context.getFilesDir() （或 Context.openFileOutput(String name, int mode) 等）

你应该使用本地缓存，使用 Context.getCacheDir()

对于模拟器，您可以尝试 File file=new File("mnt/sdcard/iTunes Connect.pdf");

# parsing - Rebol 2 和 Rebol 3 在解析中混合 SOME 和 CHANGE 时的区别

> ID：14352264
> 
> 赞同：4
> 
> 时间：2013-01-16T06:04:06.857
> 
> 标签：parsing, rebol, rebol3

想象一个包含单词的块的简化示例：

```
samples: [
    [a a c a]
    [a a c b]
    [b a c a]
    [c a c b]
    [c c c c]
] 
```

每个块都需要`[c c c c]`。因此，如果值为`'a`，则将其更改为`'b`。如果值为`'b`，则将其更改为`'c`。如果值为`'c`，我们打印“C”并继续：

```
repeat i length? samples [
    prin ["^/Sample" i "- "]
    parse samples/:i [
        some [
            s: 'a (change s 'b) :s
            | s: 'b (change s 'c) :s
            | 'c (prin "C")
        ]
    ]
] 
```

在 Rebol 2 中，这按预期工作：

```
Sample 1 - CCCC
Sample 2 - CCCC
Sample 3 - CCCC
Sample 4 - CCCC
Sample 5 - CCCC 
```

但是 Rebol 3 似乎有一个问题（错误？）：

```
Sample 1 - 
Sample 2 - 
Sample 3 - 
Sample 4 - C
Sample 5 - CCCC 
```

我不知道它是否相关，但包含[Rebol 2 和 Rebol 3 之间要解析的更改](http://en.wikibooks.org/w/index.php?title=REBOL_Programming/Language_Features/Parse/Parse_expressions&stable=0#Differences_between_R2_and_R3_parsing)列表的 Rebol Wikibook说：

> 某些子规则 - 为了防止 R3 中出现不必要的无限循环，当子规则与输入匹配但不推进它时，此规则也会停止

*（注意：[@rgchris 在 StackOverflow 聊天中提供的](https://chat.stackoverflow.com/transcript/message/7199761#7199761)这个简化示例，在此重复以更好地保留“机构知识”并允许更新。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:36:37.067

如果您使用 ANY (0..n) 还是 SOME (1..n) 实际上并不重要，就像您的示例中的情况一样，您可以在 R3 中使用 WHILE。WHILE 基本上匹配 R2 的 ANY：

```
>> blk: [a a c a]

>> parse blk [while [s: 'a (change s 'b) :s | s: 'b (change s 'c) :s | 'c]]
== true

>> blk
== [c c c c] 
```

或者，如果这还不够，因为你真的需要一些语义，你可以[使用更基本的原语重写一些](http://en.wikibooks.org/w/index.php?title=REBOL_Programming/Language_Features/Parse/Parse_expressions&stable=0#Parse_idioms)。而不是`rule: [some subrule]`你可以使用`rule: [subrule opt rule]`：

```
 >> blk: [a a c a]

 >> subrule: [s: 'a (change s 'b) :s | s: 'b (change s 'c) :s | 'c]     
 >> parse blk rule: [subrule opt rule]
 == true

 >> blk
 == [c c c c] 
```

但是，这可能会使您达到一些原始 SOME 不会达到的 PARSE 限制（尤其是在 R2 中）。

# c++ - 将 ac 样式字符串传递给函数 C++

> ID：14352265
> 
> 赞同：0
> 
> 时间：2013-01-16T06:04:09.290
> 
> 标签：c++, string

我编写了一个函数来反转 ac 样式字符串，如下所示

```
void reverse1(char* str) {
    char* str_end = strchr(str, 0);
    reverse(str, str_end);
} 
```

并使用此函数打印反转的字符串

```
void print(char* str) {
    for (int i=0; i!=sizeof(str); ++i) {
        cout << int(*(str+i)) << '\t';
    }
    cout << endl;
} 
```

反转后，打印结果是：103 110 105 114 116 115 0 0 会多出一个0，不知道是什么原因。希望可以有人帮帮我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:29:32.260

`sizeof(str)`在 64 位平台上，表达式结果为 8。因此，您会在标准输出中获得 8 个数字。

当你用 C++ 编程时，你应该尝试使用 std::string。如果你坚持使用 C 风格的字符串，你可以把输出写成：

```
void print(char* str) {
    for (int i=0; i<=strlen(str); ++i) {
        cout << int(*(str+i)) << '\t';
    }
    cout << endl;
} 
```

或者

```
void print(char* str) 
{
    do {
        cout << int(*str) << '\t';
    } while (*str++);
    cout << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:26:20.483

正如@harper 所说

> 当你用 C++ 编程时，你应该尝试使用 std::string

如果是这样，（对我来说）打印反向字符串并查看每个字符代码的最简单方法是

```
std::copy( str.rbegin(), str.rend(), std::ostream_iterator< int >( std::cout, "\t" ) ); 
```

或者

```
std::copy( str.rbegin(), str.rend(), std::ostream_iterator< char >( std::cout, "\t" ) ); 
```

看到每个角色本身

# c - 如何在 Linux 中开始 ARM 编程？

> ID：14352270
> 
> 赞同：1
> 
> 时间：2013-01-16T06:04:53.393
> 
> 标签：c, linux, embedded, arm, embedded-linux

我在我的项目中使用 PIC 微控制器。现在我想转向基于 ARM 的控制器。我想使用 Linux（使用 C）启动 ARM。但我不知道如何开始使用 Linux。哪个编译器最好，我需要学习的所有东西都像很多困惑。你们能帮我吗？我的项目通常包括UART、IIC、LCD等。我没有使用任何 RTOS。你们能帮帮我吗？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:07:01.450

一旦你在设备上安装了像 Linux 这样的重量级操作系统，它所提供的硬件的抽象级别使得它在很大程度上与芯片是什么无关。如果您想专门了解 ARM，使用 Linux 是一种避免这种情况的方法！

此外，从 PIC 到 ARM + Linux 的飞跃是巨大的。Linux 不会因为少于 4Mb 或 RAM 以及更多的非易失性存储而起床——这是最低限度的要求。ARM 芯片涵盖的范围很广，低端部分甚至无法支持 Linux。为了使 Linux 有价值，您需要一个支持 MMU 的 ARM 部件，其中不包括大量的 ARM7 和 Cortex-M 部件。

ARM 有很多更小的操作系统，它们可以让您执行高效（和硬实时）调度和 IPC，占用空间非常小。它们的范围从简单的调度内核（例如 FreeRTOS）到具有标准设备支持和网络的更完整的操作系统（例如 eCOS）。即使您使用简单的调度程序，也有很多库可用于支持网络、文件系统、USB 等。

关于编译器的问题的答案几乎可以肯定是 GCC - 这是构建 Linux 的编译器。您将需要一个交叉编译器来构建内核本身，但如果您确实有一个资源充足的 ARM 平台，那么一旦您在其上运行 Linux，您的目标就可以在本地托管一个编译器。

如果你真的想在 ARM 上使用 Linux 而不是我所有的建议，那么成本最低、工作量最小的方法可能就是使用 Raspberry Pi。它是一个基于 ARM11 的主板，开箱即用地运行 Linux，得到越来越广泛的支持，并且可以超频到 900MHz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:03:08.577

您也可以尝试使用 Beagle Bone 开发板。首先，它几乎没有 UART I2C 等功能，您也可以尝试为硬件开发设备驱动程序模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:32:49.930

许多供应商都提供了 ARM Linux 编译器和构建工具链。以下是我知道的您的选择：

1.ARM自己以他们的产品[DS-5](http://ds.arm.com/)的形式;

2\. Codesourcery 现在被 Mentor graphics 收购。[在此处](http://processors.wiki.ti.com/index.php/Installing_CodeSourcery_Toolchain)查看获取和安装 ARM linux 的 codesourcery 工具链的一些说明

3.首先开始使用ARM（C，汇编）编程我发现这个Windows-Cygwin版本的ARM linux工具链非常有帮助。[在这里](http://sourceforge.net/projects/armlinux4cygwin/)。这些是在 Windows 上的 Cygwin（Posix shell 层）下工作的预构建可执行文件。

4.另一种选择是在 Linux 上为您选择的 ARM 目标交叉编译 gcc/g++ 工具链。搜索和网络将提供有关如何完成的信息。但这可能是一个稍微复杂且冗长的过程。

享受 ARM'ing。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T08:14:38.577

首先，你应该问问自己是否真的需要编写汇编语言，在生成优化代码时，大多数现代编译器都很难被击败。

然后，如果您确定确实需要它，您可以使用内联汇编器让自己的生活更轻松，并让编译器为您编写胶水代码，如[本维基百科](http://en.wikipedia.org/wiki/Inline_assembler)文章所示。

然后要使用的编译器：对于免费编译器，实际上只有两种选择：[gcc](http://gcc.gnu.org/) 或[clang](http://clang.llvm.org/)。

还有一个来自[arm](http://www.arm.com/)的非免费工具链，当我 5 年前最后一次尝试时，它生成的代码比当时的 gcc 快了大约 30%。从那以后我就没有使用过它。这个编译器的最新版本可以在[这里找到](http://www.arm.com/products/tools/software-tools/index.php)

您还可以在`.s`文件中编写独立的汇编代码，gcc 和 clang 都可以像`.s`编译or文件`.o`一样编译。`.c``.cpp`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-28T09:39:30.417

# 编译

如果您使用的是基于 STM32 的微控制器，则需要安装[CMSIS](https://www.st.com/en/embedded-software/stm32-standard-peripheral-libraries.html)和 GNU`arm-non-eabi-gcc`包。然后你需要编写自己的 makefile 来将你的 c 代码传递给 arm gcc 编译器。

# 编程

对于编程步骤，您需要安装 openocd 并为您的特定程序员配置它。[您可以在我的博客http://bijan.binaee.com/index.php/2016/04/14/how-to-program-cortex-m-under-gnulinux-arch/](http://bijan.binaee.com/index.php/2016/04/14/how-to-program-cortex-m-under-gnulinux-arch/)上找到有关如何执行此操作的完整说明 在我的[GitHub 存储库](https://github.com/SecretTank/ARM)中。

# IDE

我将 vim 与 CTags 一起使用，但如果您需要更简单的文本编辑器，则可以将 gEdit 与 Shortcut 插件一起使用。

# spring - 在 Spring 3 中注册关闭挂钩的正确方法是什么？

> ID：14352272
> 
> 赞同：5
> 
> 时间：2013-01-16T06:05:12.223
> 
> 标签：spring, neo4j

[有关如何在 Java 应用程序中嵌入 Neo4j](http://docs.neo4j.org/chunked/stable/tutorials-java-embedded-setup.html)的教程建议注册一个关闭挂钩，如下所示：

```
Runtime.getRuntime().addShutdownHook( new Thread() {
    // do shutdown work here
}); 
```

我想知道放置此代码的最佳位置 - 或者实际上是在 Spring 启动时需要运行一次的任何代码。是否只是[使用 init 方法注册 bean](https://stackoverflow.com/questions/1088550/spring-how-to-call-a-method-after-bean-initialization-is-complete)并将代码放入其中的情况？

我很想知道这一点，更具体地说，其他人在他们的 Spring 应用程序中使用嵌入式 Neo4j 时如何注册关闭挂钩。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T08:23:04.520

只需使用正确的声明您的 bean 为 graphdatabase-service `destroy-method`：

```
<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase"
        destroy-method="shutdown">
    <constructor-arg index="0" value="data/testdb.db"/>
    <constructor-arg index="1">
        <map>
            <entry key="allow_store_upgrade" value="true"/>
        </map>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-16T22:25:06.263

使用 1.8.1 Neo4j 和 SDN 2.1 - 以上不适用于我的 Eclipse/Jetty 环境。

几乎每次我使用 Eclipse“服务器”控件启动/停止时，我都会在启动时看到：

信息：在日志中检测到非干净关闭...

注意：虽然我没有设置“allow-store-upgrade”属性。我认为这与干净关机无关？

# android - 将数据传递给 Service 的 onDestroy()

> ID：14352273
> 
> 赞同：6
> 
> 时间：2013-01-16T06:05:26.660
> 
> 标签：android, android-intent, service

我想知道服务是否从特定活动中终止，所以我在调用`stopServivce(service)`.

这是代码：

```
Intent service = new Intent(Activity.this,
                        service.class);
                service.putExtra("terminate", "activity terminated service");
                stopService(service); 
```

但我似乎可以`getIntent().getExtras().getString("terminate);`在`onDestroy()`方法中访问这个变量。

**[编辑]**

我找到了绕过这个障碍的方法，但我希望我的问题仍然得到回答。我只是在活动中的方法中做了我必须做的事情`onDestroy()`，然后调用`stopService(service)`. 我很幸运，我的情况不需要更复杂的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T07:16:26.040

没有办法访问`Intent`in `onDestroy`。您必须以其他方式向服务发出信号（Binder、共享首选项、本地广播、全局数据或 Messenger）。[这个答案](https://stackoverflow.com/a/4652540/1904517)中给出了一个使用广播的好例子。您也可以通过调用`startService`而不是`stopService`. `startService`如果一个新服务尚不存在，则仅启动一个新服务，因此多次调用`startService`是一种机制，您将`Intent`s 发送到该服务。你看这个技巧被`BroadcastReceivers`. 由于您可以访问`Intent`in `onStartCommand`，因此您可以通过检查额外内容并在指示终止时`Intent`调用来实现终止。`stopSelf`这是它的草图——

```
public int onStartCommand(Intent intent, int flags, int startId) {
        final String terminate = intent.getStringExtra("terminate");

        if(terminate != null) {
            // ... do shutdown stuff
            stopSelf();
        }
        return START_STICKY;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:59:46.817

只是为了说明 iagreen 的建议；

**活动中**

```
Intent broadcastIntent = new Intent();
broadcastIntent.setAction("com.package.yourfilter");
broadcastIntent.putExtra("activity_name", "your_activity");

sendBroadcast(broadcastIntent); 
```

**服务中**

```
 private YourActionReceiver abc;

    this.abc = new YourActionReceiver();

    registerReceiver(this.abc, new IntentFilter("com.package.yourfilter"));

    public class YourActionReceiver extends BroadcastReceiver {
            @Override
            public void onReceive(Context context, Intent intent) {
    // Get the name of activity that sent this message
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T04:15:56.210

# 全局状态

是你的朋友。:)
需要时检查全局字符串（比如在终止之前）。您可能还希望有一个枚举`state`。**或者**一个标志来查看状态是否有效。

## 食谱：

您遇到的更普遍的问题是如何跨多个活动和应用程序的所有部分保存状态。静态变量（例如，单例）是实现此目的的常见 Java 方式。然而，我发现，在 Android 中一种更优雅的方式是将您的状态与应用程序上下文相关联。

如你所知，每个Activity也是一个Context，是最广义上关于其执行环境的信息。您的应用程序也有一个上下文，Android 保证它将作为单个实例存在于您的应用程序中。

这样做的方法是创建您自己的[android.app.Application](http://developer.android.com/reference/android/app/Application.html)子类，然后在清单的应用程序标记中指定该类。现在 Android 将自动创建该类的一个实例，并使其可用于您的整个应用程序。您可以使用 Context.getApplicationContext() 方法从任何上下文访问它（Activity 还提供了一个具有完全相同效果的方法 getApplication()）：

```
class MyApp extends Application {

  private String myState;

  public String getState(){
    return myState;
  }
  public void setState(String s){
    myState = s;
  }
}

class Blah extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
  }
}

class BlahBlah extends Service {

  @Override
  public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
  }
} 
```

这与使用静态变量或单例的效果基本相同，但可以很好地集成到现有的 Android 框架中。请注意，这不适用于跨进程（如果您的应用程序是少数具有多个进程的应用程序之一）。

学分去@Soonil

# xml - 从 groovy 脚本访问 xml 文件

> ID：14352275
> 
> 赞同：0
> 
> 时间：2013-01-16T06:05:32.310
> 
> 标签：xml, groovy, xml-parsing

我需要一个 groovy 脚本的代码示例，它可以访问存储在我的文件系统中任何位置的 xml 文件。在这个 xml 文件中，我有数据库凭据，我的脚本需要访问数据库。下面是xml

```
<jdbc-datasource>
    <url>dbURL</url>
    <driver-class>jdbcDriver</driver-class>
    <username>admin</username>
    <password>admin</password>
</jdbc-datasource> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:37:53.470

假设文件位于：`/home/mizan/db.xml`

然后应该这样做：

```
def dbxml = new File( '/home/mizan/db.xml' ).withReader {
  new XmlSlurper().parse( it )
}

// Check it has worked...
assert dbxml.'driver-class' == 'jdbcDriver' 
```

# grails - 为 Openshift for Grails 配置 DataSource.groovy

> ID：14352276
> 
> 赞同：4
> 
> 时间：2013-01-16T06:05:38.800
> 
> 标签：grails, environment-variables, openshift

我正在尝试在 Openshift 上部署 Grails 应用程序。我正在使用本地构建的战争文件部署应用程序。现在，我正在使用 DataSource.groovy 文件中 rhc-app-show 命令给出的 url 进行数据库配置。每当我尝试使用 Openshift 的环境变量（例如 $OPENSHIFT_MYSQL_DB_HOST）时，它都会崩溃。关于如何在配置文件中使用它们的任何想法或指示？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:03:35.460

我没有使用过 OpenShift，但 Google 将我带到了显示这些环境变量的[常见问题解答：](https://openshift.redhat.com/community/faq)

```
OPENSHIFT_MYSQL_DB_HOST
OPENSHIFT_MYSQL_DB_PASSWORD
OPENSHIFT_MYSQL_DB_USERNAME
OPENSHIFT_MYSQL_DB_URL
OPENSHIFT_MYSQL_DB_PORT 
```

所以看起来这会起作用：

```
production {
   dataSource {
      driverClassName = 'com.mysql.jdbc.Driver'
      dialect = org.hibernate.dialect.MySQL5InnoDBDialect

      String host = System.getenv('OPENSHIFT_MYSQL_DB_HOST')
      String port = System.getenv('OPENSHIFT_MYSQL_DB_PORT')
      String dbName = System.getenv('OPENSHIFT_APP_NAME')
      url = "jdbc:mysql://$host:$port/$dbName"
      username = System.getenv('OPENSHIFT_MYSQL_DB_USERNAME')
      password = System.getenv('OPENSHIFT_MYSQL_DB_PASSWORD')

      properties {
         ...
      }
   }
} 
```

缺少的部分是数据库名称 - 这是您可以使用的吗？我不确定的格式，`OPENSHIFT_MYSQL_DB_URL`但看起来你可能只是能够使用`url = "jdbc:${System.getenv('OPENSHIFT_MYSQL_DB_URL')}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T13:11:03.603

# POSTGRES SQL ALSO ...此链接上有一个不错的教程...但是必须像这样配置数据源配置...。

```
 production {
       dataSource {
        dbCreate = "update"
        driverClassName = "org.postgresql.Driver"
        dialect = org.hibernate.dialect.PostgreSQLDialect   
        uri = new URI(System.getenv('OPENSHIFT_POSTGRESQL_DB_URL'))
        url = "jdbc:postgresql://"+uri.host+uri.path+"/"+System.getenv('OPENSHIFT_APP_NAME')
        username = System.getenv('OPENSHIFT_POSTGRESQL_DB_USERNAME')
        password = System.getenv('OPENSHIFT_POSTGRESQL_DB_PASSWORD')
    } 
```

# 第二种选择。. .

```
 production {
       dataSource {
        dbCreate = "update"
        driverClassName = "org.postgresql.Driver"
        dialect = org.hibernate.dialect.PostgreSQLDialect   
        uri = new URI(System.getenv('OPENSHIFT_POSTGRESQL_DB_URL').toString())
        appname = System.getenv('OPENSHIFT_APP_NAME').toString()
        url = "jdbc:postgresql://"+uri.host.toString()+uri.path.toString()+"/"+appname
        username = System.getenv('OPENSHIFT_POSTGRESQL_DB_USERNAME').toString()
        password = System.getenv('OPENSHIFT_POSTGRESQL_DB_PASSWORD').toString()
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T17:18:36.343

在 Grails 3.0.11 中，文件 application.yml

System.getenv 不起作用，所以我不得不手动配置 mysql 中数据库的 url 连接......使用文档命令[https://developers.openshift.com/en/managing-port-forwarding.html](https://developers.openshift.com/en/managing-port-forwarding.html)

```
dataSource:
        dbCreate: update
        url : jdbc:mysql://thisIsTheUrlGetWithPort-ForwardCommandAndThePort:48381/server?verifyServerCertificate=false&autoReconnect=true&useSSL=false&requireSSL=false
        driverClassName: com.mysql.jdbc.Driver
        dialect: org.hibernate.dialect.MySQL5InnoDBDialect
        username : admin9CzsS #this is a username example
        password : RR7y9uKw3t #this is a password example
        properties:
            jmxEnabled: true
            initialSize: 5
            maxActive: 50
            minIdle: 5
            maxIdle: 25
            maxWait: 10000
            maxAge: 600000
            timeBetweenEvictionRunsMillis: 5000
            minEvictableIdleTimeMillis: 60000
            validationQuery: SELECT 1
            validationQueryTimeout: 3
            validationInterval: 15000
            testOnBorrow: true
            testWhileIdle: true
            testOnReturn: false
            jdbcInterceptors: ConnectionState
            defaultTransactionIsolation: 2 # TRANSACTION_READ_COMMITTED 
```

# c# - 语言切换在 Win 7 中不起作用

> ID：14352278
> 
> 赞同：1
> 
> 时间：2013-01-16T06:05:47.783
> 
> 标签：c#, .net, winforms

我的应用程序具有从德语到英语的语言切换（反之亦然），但这种切换在 windows xp 中有效，但在 win 7 中无效。我将应用程序安装在默认路径中，在常量中指定它（路径是默认路径，其中应用程序已安装）。

我在 FileSystem(Myapplication)--->Application Folder-->lang 文件夹中创建了包含 lang_de.xml 和 lang_en.xml 的文件夹。

在 win 7 中安装应用程序时，我的设置表单有一个下拉列表并包含英语和德语。当我选择并重新启动我的应用程序时，表单语言应该改变是我的应用程序的行为，但这在 win7 中不会发生（即使在重新启动它）。

使用win forms .net 4.0 c#

提前致谢

从下拉列表中选择

```
 public string Language
    {
        get
        {
            for (int i = 0; i < cmbLang.Items.Count; i++)
            {
                if (m_strAvailableLanguages[i, 1] == (string)cmbLang.SelectedItem)
                {
                    return m_strAvailableLanguages[i, 0];
                }
            }
            return "de";
        }
        set
        {

            cmbLang.SelectedItem = " ";

            for (int i = 0; i < cmbLang.Items.Count; i++)
            {
                if (m_strAvailableLanguages[i, 0] == value)
                {

                    cmbLang.SelectedItem = m_strAvailableLanguages[i, 1];
                }
            }
        }
    } 
```

保存到xml...

```
 private void SaveOptionsValue() 
```

{

```
 //........
       //.........
        Config.LanguageShort = this.Language;
        Config.Save(); 
```

}

```
public void Save()
    {
        m_xmlDocument = new XmlDocument();

        XmlNode xmlRoot;
        xmlRoot = m_xmlDocument.CreateElement(ROOT);
        m_xmlDocument.AppendChild(xmlRoot);

        AddNode(ROOT, SYSTEM_LANGUAGE, systemLanguage);
        AddNode(ROOT, LANGUAGE, strLanguage);
           ...............
            ............ 
```

}

# c++ - Mac 10.6.8 上缺少头文件停止编译（SNAP 软件安装）

> ID：14352279
> 
> 赞同：1
> 
> 时间：2013-01-16T06:05:56.847
> 
> 标签：c++, macos, unix, header, include

我正在尝试安装[Stanford Network Analysis Project](http://snap.stanford.edu/)。

我在 MacOS 10.6.8 上工作。昨天我下载了最新的兼容版本的 Xcode (3.1.4) 以获得带有 C++ 编译器的 GCC 包。

当我在我的 Unix 终端中运行“make”命令时，我得到了数百行错误。

第一个是关于名为“poll.h”的丢失文件。

```
make -C snap-core 
g++ -c -std=c++98 -Wall  -O3 -I/Xcode3.1.4/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/sys -I/Xcode3.1.4/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers Snap.cpp -I../glib-core
In file included from Snap.h:8,
                 from Snap.cpp:4:
../glib-core/base.h:68:24: error: sys/poll.h: No such file or directory
../glib-core/base.h:75:21: error: netdb.h: No such file or directory
../glib-core/base.h:76:25: error: arpa/inet.h: No such file or directory 
```

我在我的硬盘上搜索了这个“poll.h”文件所在的位置。我找不到它。我也找不到 netdb.h 或 inet.h 以及其他一些。

这些文件不是第一个包含在内的文件。我这样说是为了明确一些文件已找到，但其他一些文件丢失了。这是在我遇到错误之前实际发生的情况：

```
 #include <stdint.h>
  #include <stdarg.h>
  #include <errno.h>
  #include <fcntl.h>
  #include <dirent.h>
  #include <unistd.h>
  #include <signal.h>
  #include <sys/poll.h> 
```

由于缺少几个文件，我相信我在这个问题上遗漏了一些重要的东西。尽管如此，我还是找到了一种[在这里](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/sys/poll.h)下载“poll.h”的方法。我觉得使用它不舒服...我如何确定它是正确的文件？其他丢失的文件呢？

任何建议将不胜感激。

非常感谢。尼古拉斯。

# c# - 转换日期时间 c# 中的问题

> ID：14352281
> 
> 赞同：1
> 
> 时间：2013-01-16T06:06:11.963
> 
> 标签：c#, datetime, type-conversion

转换日期时间时遇到问题

```
var date = DateTime.Now;
txtdate.Text = date.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

//我需要稍后将其作为 DateTime 变量传递。当我重新转换它给我一个错误）

```
DateTime dtReconvert =Convert.toDateTime(txtdate.Text);  //Error String was not recognized as a valid DateTim 
```

当我将日期时间设置为“01/01/2013”​​并将其转换为日期时间时，它不会给我任何错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T06:07:57.997

使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)格式`"dd/MM/yyyy"`

```
DateTime dtObject = DateTime.ParseExact(txtdate.Text, 
                                        "dd/MM/yyyy", 
                                        CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:11:41.217

试试这个

```
DateTime.ParseExact(txtdate.Text, "MM/dd/yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

或者

```
Convert.ToDateTime(txtdate.Text, CultureInfo.InvariantCulture) 
```

Microsoft 已采用 MM/dd/yyyy 作为与文化无关的格式，这是一种模棱两可的格式，我不想在其上构建大型系统。

# android - Horeca 配置文件：Foursquare API

> ID：14352282
> 
> 赞同：0
> 
> 时间：2013-01-16T06:06:21.520
> 
> 标签：android, ios, foursquare

我们想出了一个移动应用程序的概念，它允许：

*   创建酒吧/餐厅/活动配置文件（我们想自己定义它们）；
*   通过附近的地方访问这些个人资料（可以链接吗？）；
*   签入，通过个人资料
*   根据用户资料查看有多少人登记入住，男性/女性。

> 这可以通过 Foursquare API 实现吗？

如果没有，是否可以通过其他方式完成？我也不太明白为什么我到处都读到通过 GeoLocation 查找或签入地点是专利的，但同时它似乎免费提供，每个人似乎都在使用它（？）。

我将永远感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:40:46.170

使用foursquare API 可以做到这一点，但您只能访问使用您的应用程序签到的用户的信息，并且您的自定义配置文件不会出现在Foursquare 的场地搜索结果中。

使用这样的应用程序，您需要注意维护用户对隐私的期望。你的应用程序必须有一个隐私政策，明确说明他们的信息将如何被使用，以及关于他们的哪些信息将被公开。有关详细信息，请参阅[Foursquare 应用程序政策](https://developer.foursquare.com/overview/community)。

# bash - 在 Bash 中仅使用 ls 列出目录？

> ID：14352290
> 
> 赞同：1146
> 
> 时间：2013-01-16T06:07:00.457
> 
> 标签：bash, directory, ls

此命令列出当前路径中的目录：`ls -d */`

模式究竟是`*/`做什么的？

我们如何在上述命令（例如`ls -d /home/alice/Documents`）中给出绝对路径以仅列出该路径中的目录？

* * *

## 回答 #1

> 赞同：1199
> 
> 时间：2013-01-16T06:11:28.673

`*/`是匹配当前目录中所有子目录的模式（`*`将匹配所有文件*和*子目录；将其`/`限制为目录）。同样，要列出 /home/alice/Documents 下的所有子目录，请使用`ls -d /home/alice/Documents/*/`

* * *

## 回答 #2

> 赞同：561
> 
> 时间：2013-06-09T12:21:33.690

## 完成此任务的四种方法，每种方法都有不同的输出格式

### 1.使用`echo`

示例：`echo */`，`echo */*/`
这是我得到的：

```
cs/ draft/ files/ hacks/ masters/ static/  
cs/code/ files/images/ static/images/ static/stylesheets/ 
```

### 2.`ls`仅使用

示例：`ls -d */`
这正是我得到的：

```
cs/     files/      masters/  
draft/  hacks/      static/ 
```

或作为列表（带有详细信息）：`ls -dl */`

### 3.使用`ls`和`grep`

示例：`ls -l | grep "^d"` 这是我得到的：

```
drwxr-xr-x  24 h  staff     816 Jun  8 10:55 cs  
drwxr-xr-x   6 h  staff     204 Jun  8 10:55 draft  
drwxr-xr-x   9 h  staff     306 Jun  8 10:55 files  
drwxr-xr-x   2 h  staff      68 Jun  9 13:19 hacks  
drwxr-xr-x   6 h  staff     204 Jun  8 10:55 masters  
drwxr-xr-x   4 h  staff     136 Jun  8 10:55 static 
```

### 4\. Bash 脚本（不推荐用于包含空格的文件名）

示例：`for i in $(ls -d */); do echo ${i%%/}; done`
这是我得到的：

```
cs  
draft  
files  
hacks  
masters  
static 
```

如果您希望以 '/' 作为结束字符，命令将是：`for i in $(ls -d */); do echo ${i}; done`

```
cs/  
draft/  
files/  
hacks/  
masters/  
static/ 
```

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2014-02-27T15:19:39.010

我用：

```
ls -d */ | cut -f1 -d'/' 
```

这会创建一个没有斜杠的单列 - 在脚本中很有用。

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2014-07-23T08:30:26.653

对于所有*没有*子文件夹的文件夹：

```
find /home/alice/Documents -maxdepth 1 -type d 
```

对于所有带有子文件夹*的*文件夹：

```
find /home/alice/Documents -type d 
```

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2015-07-24T06:02:46.583

### 四个（更多）可靠的选择。

未加*引号*的星号`*`将被 shell 解释为模式（glob）。shell 将在路径名扩展中使用它。然后它将生成与该模式匹配的文件名列表。

一个简单的星号将匹配 PWD（当前工作目录）中的所有文件名。一个更复杂的模式 as`*/`将匹配所有以 . 结尾的文件名`/`。因此，所有目录。这就是为什么命令：

# 1.-回声。

```
echo */
echo ./*/              ### Avoid misinterpreting filenames like "-e dir" 
```

将（通过 shell）扩展到`echo`PWD 中的所有目录。

* * *

要对此进行测试：创建一个`mkdir`名为 test-dir 的目录 ( )，然后`cd`进入其中：

```
mkdir test-dir; cd test-dir 
```

创建一些目录：

```
mkdir {cs,files,masters,draft,static}   # Safe directories.
mkdir {*,-,--,-v\ var,-h,-n,dir\ with\ spaces}  # Some a bit less secure.
touch -- 'file with spaces' '-a' '-l' 'filename'    # And some files: 
```

* * *

`echo ./*/`即使使用奇怪的命名文件，该命令也将保持可靠：

```
./--/ ./-/ ./*/ ./cs/ ./dir with spaces/ ./draft/ ./files/ ./-h/
./masters/ ./-n/ ./static/ ./-v var/ 
```

但是文件名中的空格使阅读有点混乱。

* * *

如果不是`echo`，我们使用`ls`. 外壳仍然是扩展文件名列表的东西。shell 是在 PWD 中获取目录列表的原因。使其列出当前目录条目而不是每个目录的内容的选项（默认情况下）`-d`。`ls`

```
ls -d */ 
```

但是，此命令（有点）不太可靠。它会因上面列出的奇怪的命名文件而失败。它会被几个名字窒息。您需要一一擦除，直到找到有问题的。

# 2.- ls

GNU`ls`将接受“选项结束”( `--`) 键。

```
ls -d ./*/                     ### More reliable BSD ls
ls -d -- */                    ### More reliable GNU ls 
```

# 3.-printf

要在自己的行中列出每个目录（在一列中，类似于 ls -1），请使用：

```
$ printf "%s\n" */        ### Correct even with "-", spaces or newlines. 
```

而且，更好的是，我们可以删除尾随`/`：

```
$ set -- */; printf "%s\n" "${@%/}"        ### Correct with spaces and newlines. 
```

像这样的尝试

```
$ for i in $(ls -d */); do echo ${i%%/}; done 
```

将失败：

*   一些名称 ( `ls -d */`) 如上所示。
*   会受到 的值的影响`IFS`。
*   将拆分空格和制表符上的名称（默认`IFS`）。
*   名称中的每个换行符都会启动一个新的 echo 命令。

# 4.- 功能

最后，在函数中使用参数列表不会影响当前运行的 shell 的参数列表。简单地

```
$ listdirs(){ set -- */; printf "%s\n" "${@%/}"; }
$ listdirs 
```

提供此列表：

```
--
-
*
cs
dir with spaces
draft
files
-h
masters
-n
static
-v var 
```

这些选项对于几种类型的奇数文件名是安全的。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2015-06-16T15:30:39.013

该[`tree`](https://linux.die.net/man/1/tree)命令在这里也非常有用。默认情况下，它将显示所有文件和目录的完整深度，其中一些 ASCII 字符显示目录树。

```
$ tree
.
├── config.dat
├── data
│   ├── data1.bin
│   ├── data2.inf
│   └── sql
|   │   └── data3.sql
├── images
│   ├── background.jpg
│   ├── icon.gif
│   └── logo.jpg
├── program.exe
└── readme.txt 
```

但是，如果我们只想获取目录，没有 ASCII 树，并且使用当前目录的完整路径，您可以这样做：

```
$ tree -dfi
.
./data
./data/sql
./images 
```

论据是：

```
-d     List directories only.
-f     Prints the full path prefix for each file.
-i     Makes tree not print the indentation lines, useful when used in conjunction with the -f option. 
```

如果你想要绝对路径，你可以从指定当前目录的完整路径开始：

```
$ tree -dfi "$(pwd)"
/home/alice/Documents
/home/alice/Documents/data
/home/alice/Documents/data/sql
/home/alice/Documents/images 
```

并且要限制子目录的数量，您可以使用 设置子目录的最大级别`-L level`，例如：

```
$ tree -dfi -L 1 "$(pwd)"
/home/alice/Documents
/home/alice/Documents/data
/home/alice/Documents/images 
```

可以看到更多的论点[`man tree`](http://linux.die.net/man/1/tree)。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2016-10-28T23:05:32.990

如果您想知道为什么 'ls -d */' 的输出会给您*两个*斜杠，例如：

```
[prompt]$ ls -d */
app//  cgi-bin//  lib//        pub// 
```

这可能是因为您的外壳或会话配置文件将*ls*命令别名为包含该标志的*ls版本。*`-F`该标志将一个字符附加到每个输出名称（不是纯文件），指示它的类型。所以一个斜线来自匹配模式'*/'，另一个斜线是附加的类型指示符。

为了摆脱这个问题，您当然可以为*ls*定义一个不同的别名。但是，要暂时不调用别名，您可以在命令前加上反斜杠：

```
\ls -d */ 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2017-02-25T10:05:02.177

## 实际`ls`解决方案，包括目录的符号链接

这里的许多答案实际上并没有使用`ls`（或仅在微不足道的意义上使用它`ls -d`，而使用通配符进行实际的子目录匹配。真正的`ls`解决方案很有用，因为它允许使用`ls`排序选项等选项。

### 排除符号链接

`ls`已经给出了一种使用的解决方案，但它与其他解决方案的不同之处在于它*排除*了指向目录的符号链接：

```
ls -l | grep '^d' 
```

（可能通过管道`sed`或`awk`隔离文件名）

### 包括符号链接

在应该包含指向目录的符号链接的（可能更常见的）情况下，我们可以使用`-p`选项 of `ls`，这使得它在目录名称（包括符号链接的）后面附加一个斜杠字符：

```
ls -1p | grep '/$' 
```

或者，去掉尾部的斜杠：

```
ls -1p | grep '/$' | sed 's/\/$//' 
```

我们可以`ls`根据需要添加选项（如果使用长列表，`-1`则不再需要）。

**注意：**如果我们*想要*尾部斜杠，但不希望它们被 突出显示`grep`，我们可以通过使该行的实际匹配部分为空来粗略地删除突出显示：

```
ls -1p | grep -P '(?=/$)' 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2018-12-10T20:49:46.093

当前目录的简单列表，它将是：

```
ls -1d */ 
```

如果你想要它排序和清洁：

```
ls -1d */ | cut -c 1- | rev | cut -c 2- | rev | sort 
```

> **请记住：**大写字符在排序中具有不同的行为

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2015-08-29T10:21:43.497

如果不需要列出隐藏目录，我提供：

```
ls -l | grep "^d" | awk -F" " '{print $9}' 
```

如果需要列出隐藏目录，请使用：

```
ls -Al | grep "^d" | awk -F" " '{print $9}' 
```

*或者*

```
find -maxdepth 1 -type d | awk -F"./" '{print $2}' 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2016-06-02T23:02:43.910

我只是将它添加到我的`.bashrc`文件中（如果您只需要/想要一个会话，您也可以在命令行上键入它）：

```
alias lsd='ls -ld */' 
```

然后*lsd*将产生所需的结果。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-08-13T12:03:46.530

仅列出*目录*：

```
ls -l | grep ^d 
```

仅列出*文件*：

```
ls -l | grep -v ^d 
```

或者你也可以这样做：

```
ls -ld */ 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2014-10-31T04:07:30.103

要显示不带的文件夹列表`/`：

```
ls -d */|sed 's|[/]||g' 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-06-22T21:49:19.100

试试这个。它适用于所有 Linux 发行版。

```
ls -ltr | grep drw 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2015-01-15T18:10:23.917

这是我正在使用的

```
ls -d1 /Directory/Path/*; 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-06-14T14:48:03.117

测试该项目是否是一个目录`test -d`：

```
for i in $(ls); do test -d $i && echo $i ; done 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-03-25T20:16:01.673

`*/`是匹配当前目录中目录的文件名匹配模式。

只列出目录，我喜欢这个功能：

```
# Long list only directories
llod () {
  ls -l --color=always "$@" | grep --color=never '^d'
} 
```

把它放在你的*.bashrc*文件中。

使用示例：

```
llod       # Long listing of all directories in current directory
llod -tr   # Same but in chronological order oldest first
llod -d a* # Limit to directories beginning with letter 'a'
llod -d .* # Limit to hidden directories 
```

`-i`注意：如果您使用该选项，它将中断。这是一个修复：

```
# Long list only directories
llod () {
  ls -l --color=always "$@" | egrep --color=never '^d|^[[:digit:]]+ d'
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-02-15T14:40:09.917

仅供参考，如果您想在多行中打印所有文件，您可以执行一个`ls -1`将每个文件打印在单独行中的操作。文件 1 文件 2 文件 3

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2017-10-05T18:56:52.103

```
file * | grep directory 
```

输出（在我的机器上）——

```
[root@rhel6 ~]# file * | grep directory
mongo-example-master:    directory
nostarch:                directory
scriptzz:                directory
splunk:                  directory
testdir:                 directory 
```

使用[cut](https://linux.die.net/man/1/cut)可以进一步细化上述输出：

```
file * | grep directory | cut -d':' -f1
mongo-example-master
nostarch
scriptzz
splunk
testdir

* could be replaced with any path that's permitted
 file - determine file type
 grep - searches for string named directory
 -d - to specify a field delimiter
 -f1 - denotes field 1 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-08-18T15:12:48.873

# ls 和 awk（没有 grep）

不需要使用 grep，因为 awk 可以执行正则表达式检查，所以这样做就足够了：

```
ls -l | awk '/^d/ {print $9}' 
```

where `ls -l`list files with permisions
`awk`filter output
`'/^d/'`regularexpresion 仅搜索以字母开头的行`d`（作为目录）查看第一行 - 权限
`{print}`将打印所有列
`{print $9}`将仅打印**输出中的****第 9 列**（名称）`ls -l`

 **非常简单干净

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-05-09T03:32:09.437

我部分解决了它：

```
cd "/path/to/pricipal/folder"

for i in $(ls -d .*/); do sudo ln -s "$PWD"/${i%%/} /home/inukaze/${i%%/}; done 
```

```
 ln: «/home/inukaze/./.»: can't overwrite a directory
    ln: «/home/inukaze/../..»: can't overwrite a directory
    ln: accesing to «/home/inukaze/.config»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.disruptive»: too much symbolics links levels
    ln: accesing to «/home/inukaze/innovations»: too much symbolics links levels
    ln: accesing to «/home/inukaze/sarl»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.e_old»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.gnome2_private»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.gvfs»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.kde»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.local»: too much symbolics links levels
    ln: accesing to «/home/inukaze/.xVideoServiceThief»: too much symbolics links levels 
```

好吧，这减少了我的主要部分:)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2014-07-16T21:04:27.400

仅从“此处”列出目录的单行代码。

带文件数。

```
for i in `ls -d */`; do g=`find ./$i -type f -print| wc -l`; echo "Directory $i contains $g files."; done 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-10-20T21:15:28.917

使用 Perl：

```
ls | perl -nle 'print if -d;' 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2019-08-29T14:26:40.377

这是一个使用[树](https://linux.die.net/man/1/tree)的变体，它仅在单独的行上输出目录名称，是的，它很难看，但是嘿，它可以工作。

```
tree -d | grep -E '^[├|└]' | cut -d ' ' -f2 
```

或使用 awk

```
tree -d | grep -E '^[├|└]' | awk '{print $2}' 
```

但是，这可能会更好，并且会保留`/`之后的目录名称。

```
ls -l | awk '/^d/{print $9}' 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2014-12-30T05:45:28.980

添加使其完整循环，检索每个文件夹的路径，使用 Albert 的答案以及 Gordans 的组合。那应该很有用。

```
for i in $(ls -d /pathto/parent/folder/*/); do echo ${i%%/}; done 
```

**输出：**

```
/pathto/parent/folder/childfolder1/
/pathto/parent/folder/childfolder2/
/pathto/parent/folder/childfolder3/
/pathto/parent/folder/childfolder4/
/pathto/parent/folder/childfolder5/
/pathto/parent/folder/childfolder6/
/pathto/parent/folder/childfolder7/
/pathto/parent/folder/childfolder8/ 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-11-23T14:31:12.403

这是我用于仅列出目录名称的内容：

```
ls -1d /some/folder/*/ | awk -F "/" "{print \$(NF-1)}" 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-11-26T08:40:00.917

回答原来的问题，与本身`*/`无关；`ls`它是由 shell/Bash 在称为*globbing*的过程中完成的。

这就是为什么`echo */`和`ls -d */`输出相同的元素。（该`-d`标志`ls`输出目录名称而不是目录的内容。）

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-07-05T12:32:34.447

如果您的文件夹名称中有空间 $9 print 将不起作用，请尝试以下命令

```
ls -l yourfolder/alldata/ | grep '^d' | awk '{print $9" " $10}' 
```

输出

```
ls -l yourfolder/alldata/ | grep '^d' | awk '{print $9" " $10}'
testing_Data 
Folder 1 
```**

# java - Java中是否有将字符串转换为整数数组的内置方法？

> ID：14352291
> 
> 赞同：2
> 
> 时间：2013-01-16T06:07:00.567
> 
> 标签：java, arrays, integer, transform

我需要将字符串转换为整数数组。每个数组槽将包含一个整数值字母。例如，字符串`omg`将被返回为类似

```
array[0] = 13; array[1] = 44; array[3] = 26; 
```

编辑这些字母的值是想出来的。我只是想知道是否有将字母转换为整数的方法。

有没有内置的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:16:59.673

将其转换为数组，尝试`char[] chars = str.toCharArray();`，并将其转换为整数，使用 for 循环，并调用 varible.getNumericValue();。所以一个例子是：

```
String omg = "OMG";
char[] chars = omg.toCharArray();
int[] result;
for(char currentChar : chars){
    result[result.length] = currentChar.getNumericValue();//result.length starts at 1 more than the final index
} 
```

编辑：或者只是使用上面提到的 String.getBytes 。

编辑2：实际上，这是完全错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:30:21.017

有多种方法可以做到这一点，具体取决于“将字母转换为整数”的确切含义。

*   您可以使用`String.getBytes()`将字符串编码为系统的默认编码并将其作为`byte[]`. `byte`类型是整数类型。

*   您可以使用`String.toCharArray()`给您字符串的字符。`char`类型是整数类型。

*   您可以对字符串进行各种其他“神秘”转换；例如，将凯撒密码应用于每个字符串字符，以给您一个字母，然后您将其转换为一个数字。

然后您可以编写一个循环来将 a`char[]`或`byte[]`转换为 a `int[]`，但是没有内置方法可以执行此转换步骤……如果您需要的话。

请注意，前两种方法可能会为您提供不同的整数，具体取决于字符串值和系统的默认字符编码。重要的是你要了解你试图用这个转换做什么......

* * *

（我假设问题中的示例转换不应按字面意思理解......）

# prolog - 如何从列表中随机选择元素？

> ID：14352293
> 
> 赞同：1
> 
> 时间：2013-01-16T06:07:10.697
> 
> 标签：prolog

以下实现将永远循环。

```
pick_nums(0,_,_).
pick_nums(Count,From,To) :-
   random_member(X,From),
   ( member(X,To) -> pick_nums(Count,From,To)
   ;  C1 is Count-1,
      pick_nums(C1,From,[X|To]) ) .

?- numlist(1,9,X), pick_nums(3,X,Y). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:48:45.363

这里的问题是，在里面`pick_nums(Count, From, To)`你有一个相同的`pick_nums(Count, From, To)`. 这里的条件逻辑似乎是在说“给我一个 From 的随机元素，但如果我已经在 To 中有它，请再试一次；否则，正常重复。” 这里的基本问题只是你的条件总是成功的。

我确信有一个比从头重写更直接的解决方案来解决您的问题，但对我来说这似乎有点单调的 Prolog。相反，让我们重新考虑一下我们要说什么，以防我们可以更直接地“合乎逻辑地”说出来。你实际上想说的是“给我一个具有一定大小的 From 的随机子集”。原始代码中的条件实际上只是“嘿，我已经看过这个元素，所以让我们继续前进”的衬托，但在 Prolog 中，你经常通过说出你的意思而不是告诉 Prolog 如何去做来进一步了解。

```
pick_nums(0, _, []).
pick_nums(Count, From, [X|SelectedFromRemaining]) :-
  random_member(X, From),
  select(X, From, Remaining),
  C1 is Count - 1,
  pick_nums(C1, Remaining, SelectedFromRemaining). 
```

通过使用`select/3`，我能够生成其中没有选定元素的列表，然后我可以将其传递给下一个调用。这样我就不必担心我是否已经看过这个元素了。请注意，这样做可能会导致性能损失，但我们用更少的语句到达那里，并且（希望）更清楚我们正在尝试做什么。

如果我们愿意进一步依赖 SWI-Prolog，那么有一些内置库可以进一步简化这个过程。例如，该`random`库有一个谓词，它将给我们一个列表的随机排列。我们可以使用它非常清楚地说明我们在做什么：

```
pick_nums(Count, From, To) :-
  random_permutation(From, Scrambled),
  append(To, _, Scrambled),
  length(To, Count). 
```

如果您总是希望将它与`numlist`那里的另一个助手一起使用，那么它已经这样做了：

```
?- randset(3, 9, X).
X = [3, 4, 8].

?- randset(3, 9, X).
X = [2, 7, 9]. 
```

我希望这是足够的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:16:48.160

我认为问题在于通话`member(X,To)`。var`To`尚未实例化，`To = [5|_G397]`如果首先从数字中选择 5，它将变为（使用调试器查看这些详细信息！）。

我可以看到更正代码的最简单方法是添加一个累加器：

```
pick_nums(Count, From, To) :-
    pick_nums(Count, From, [], To).

pick_nums(0, _, Acc, Acc).
pick_nums(Count, From, Acc, To) :-
    Count > 0, % avoid looping on backtracking
    random_member(X, From),
    (  memberchk(X, Acc)
    -> pick_nums(Count, From, Acc, To)
    ;  C1 is Count-1,
       pick_nums(C1, From, [X|Acc], To)
    ) . 
```

我还添加了一个“守卫”以避免回溯循环

# grails - 重定向grails中表格行的onclick

> ID：14352294
> 
> 赞同：0
> 
> 时间：2013-01-16T06:07:11.320
> 
> 标签：grails, redirect

我在 UI 中有一个由数据库中的值填充的表。现在我想调用表格行的控制器操作 Onclick 并渲染到不同的视图。我尝试了以下代码函数正在正确执行，但它没有呈现到不同的视图。

**在普惠制中：**

```
 <tr onclick="<g:remoteFunction controller="LeaveApplied" action='getLeaveDetail' id='${it.id}'/>"> 
```

控制器：

```
def getLeaveDetails(){
    def leaveObj = leaveAppliedService.getLeaveDetail(params.id)
    println "leave: "+leaveObj
    render(view:'respond', model: [leave:leaveObj])
     } 
```

任何答案都将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:41:35.030

如果你想用 ajax 调用更新你的表，你可以试试这个：

普惠制：

```
onclick="<g:remoteFunction controller="LeaveApplied" action="getLeaveDetail" params="[id: it.id]" update="target_div" />" 
```

控制器：

```
def getLeaveDetails(){
   def leaveObj = leaveAppliedService.getLeaveDetail(params.id)
   render(template:'respond', model: [leave:leaveObj])
 } 
```

尚未测试代码，但重要的是在您的 GSP 中设置`params`和`update`属性并呈现模板而不是视图。

# html - 如何获得空白的宽度？

> ID：14352295
> 
> 赞同：0
> 
> 时间：2013-01-16T06:07:11.947
> 
> 标签：html, css

我有一个函数可以将字符串切割成精确的宽度，我们称之为`cut()`

`cut('abcd',3) = 'abc'`

我使用的字体系列是`Arial`

但是当我计算每个字符的宽度时，我发现`whitespace`很奇怪。

```
<span id='x'> </span> 
```

当我使用时，`$("#x").width()`我得到了 0.0

注意`whitespace`不是`&nbsp`

为什么`' ' = 0.0`但在`'a b' that ' ' != 0.0`

`whitespace`in的规则是`HTML`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:15:47.780

您可以使用`white-space: pre;`来强制空间在写入时呈现：

```
#x {
  white-space: pre;
} 
```

我得到一个宽度：http `4px`: [//jsfiddle.net/qgeUZ/1/](http://jsfiddle.net/qgeUZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:14:03.103

试试这个，就像这里的特色：[计算文本宽度](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)

```
$.fn.textWidth = function(){
      var html_org = $(this).html();
      var html_calc = '<span>' + html_org + '</span>';
      $(this).html(html_calc);
      var width = $(this).find('span:first').width();
      $(this).html(html_org);
      return width;
    }; 
```

//剪切函数

# android - 使用图标获取正在运行的应用程序（内部和外部）

> ID：14352297
> 
> 赞同：0
> 
> 时间：2013-01-16T06:07:42.953
> 
> 标签：android, activity-manager

目前，我正在努力获取所有正在运行的应用程序的列表。我已经能够通过以下方式做到这一点，

```
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
ActivityManager.MemoryInfo mInfo = new ActivityManager.MemoryInfo();
activityManager.getMemoryInfo(mInfo);
List<RunningAppProcessInfo> listOfRunningProcess = activityManager
                .getRunningAppProcesses();
Log.d(TAG, "XXSize: " + listOfRunningProcess.size());
l1 = findViewById(R.id.Layout1);
for (RunningAppProcessInfo runningAppProcessInfo : listOfRunningProcess) {
    if (runningAppProcessInfo.uid > 1026) {
        uID = runningAppProcessInfo.uid;
        Log.d(TAG, "ANS " + runningAppProcessInfo.processName + " Id :"
            + runningAppProcessInfo.pid + " UID: " + uID);
    }
} 
```

它提供了所有正在运行的应用程序的列表。现在我想根据它们是内部应用程序还是外部应用程序来区分这些应用程序。有什么方法可以区分内部和外部应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:16:14.057

[这](https://stackoverflow.com/questions/8784505/how-do-i-check-if-an-app-is-a-non-system-app-in-android)是检查应用程序是否为系统应用程序的线程。

这样，如果您获得应用程序列表，则可以使用上述线程检查应用程序是否是系统应用程序。这样您就可以分离应用程序。

# objective-c - 在 Objective-C 中连接到 RESTful Web 服务

> ID：14352304
> 
> 赞同：0
> 
> 时间：2013-01-16T06:08:17.343
> 
> 标签：objective-c, web-services, http-post

我尝试连接到 Web 服务并从中检索数据，但没有成功。这是我所做的。

这是我试图连接到[http://www.rcsb.org/pdb/software/rest.do的网络服务](http://www.rcsb.org/pdb/software/rest.do)

这是我的 example.h 文件：

```
#import <Foundation/Foundation.h>

@interface example : NSObject {

    NSMutableData *receivedData;
}
@property(nonatomic, retain) NSMutableData *receivedData;

- (void) getDataFromServer;
@end 
```

这是我的 example.m 文件：

# 导入“example.h”

```
@implementation example

@synthesize receivedData;

-(void) getDataFromServer {
    //prepare request
    NSString *urlString = [NSString stringWithFormat:@"http://www.rcsb.org/pdb/rest/search/"];
    NSMutableURLRequest *theRequest = [[NSMutableURLRequest alloc] init];
    [theRequest setURL:[NSURL URLWithString:urlString]];
    [theRequest setHTTPMethod:@"POST"];

    NSString *myXmlQuery = [[NSString alloc] initWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?><orgPdbQuery><version>head</version><queryType>org.pdb.query.simple.AdvancedKeywordQuery</queryType><description>Text Search for: chloro</description><keywords>chloro</keywords></orgPdbQuery>"];

    //set Headers
    NSString *contentType = [NSString stringWithFormat:@"application/xml"];
    [theRequest addValue:contentType forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:[NSString stringWithFormat:@"%ld", [myXmlQuery length]] forHTTPHeaderField:@"Content-Length"];

    //create the Body
    NSMutableData *postBody = [NSMutableData data];

    [postBody appendData:[[NSString stringWithFormat:@"<xml>"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[myXmlQuery dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"</xml>"] dataUsingEncoding:NSUTF8StringEncoding]];

    //post
    [theRequest setHTTPBody:postBody];

    NSLog(@"%@", myXmlQuery);

    //get response
    NSHTTPURLResponse *urlResponse = [[NSHTTPURLResponse alloc] init];
    NSError *error = [[NSError alloc] init];
    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&urlResponse error:&error];
    NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Response code- %ld",[urlResponse statusCode]);
    NSLog(@"Response: %@", result);
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"in didReceiveResponse....setting receivedData to zero");
    //[receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"In didReceiveData...receiving data and appending to receivedData");
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Connection failed with error");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"in connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %ld bytes of data", [receivedData length]);
}

@end 
```

我得到一个 html 页面作为对此的回应。此外，connectionDidFinishLoading 任何时候都不会被调用，因为我的输出中没有得到 NSLog 语句。我得到的只是我试图连接的 url 的 html 版本。

任何形式的帮助将不胜感激。谢谢你。

PS：我正在尝试正确格式化此文本，但它会自动格式化为这样。带来不便敬请谅解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:20:57.493

看起来你正在尝试做两件不同的事情。首先，我建议您查看[URL Loading System Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。您也不需要创建一个`NSHTTPURLResponse*`，因为它会为您处理好。

其次，您试图在`NSURLConnectionDelegate`不遵守协议的情况下使用协议，或者将您的类添加为委托。这与阻塞主线程有很大不同`sendSynchronousRequest`，并且不需要委托集，因为该方法将等待响应并且不允许任何其他代码执行（因此阻塞线程）。有一个非常好的[StackOverflow 问题和答案](https://stackoverflow.com/questions/1959243/nsurlconnection-nsurlrequest-proxy-for-asynchronous-web-service-calls)与您的非常相似。

简而言之：

1.  `<NSURLConnectionDelegate>`在您的界面中符合。
2.  为 a 创建属性`NSURLConnection*`
3.  利用`self.myConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];`
4.  现在您可以依赖`NSURLConnectionDelegate`被调用的协议方法（`connectionDidFinishLoading:`、、`connection:didReceiveData:`等）。
5.  一旦你点击`connectionDidFinishLoading:`，你就可以开始使用你下载的数据。

# windows - Windows上tomcat 7的生产中的log4j路径

> ID：14352306
> 
> 赞同：0
> 
> 时间：2013-01-16T06:08:24.203
> 
> 标签：windows, tomcat, logging, log4j

我需要简单的路径设置来使用 log4j 来记录 FINEST 级别的日志记录。但是所有论坛和讨论都在 eclipse 或某些开发环境中显示 log4j.properties 文件的路径设置。对于非开发用户，我需要设置 log4j.properties 文件，我在 C:\apache-tomcat-7.0.27\conf 路径中尝试过，但没有帮助。标准输出日志显示默认日志，注意我已经从 \conf 文件夹中删除了默认的 ogging.properties。我在哪里将 log4j.properties 文件放在 windows Tomcat 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:14:50.537

好吧，正如官方文档所说（http://tomcat.apache.org/tomcat-7.0-doc/logging.html），您不应该删除默认的 logging.properites 文件，该文件位于：

```
${catalina.base}/conf/logging.properties 
```

，而是在那里添加您需要的内容：

```
org.apache.catalina.level=FINEST 
```

和

> 您需要确保 ConsoleHandler（或 FileHandler 的）级别也设置为收集此阈值，因此应设置 FINEST 或 ALL。

还是对您使用有任何严格要求`log4j`（默认情况下`JULI`由 使用`tomcat7`）？

**更新**：

好的，正如您所提到的，您只对 log4j 案例感兴趣。让我指出官方文档：http: [//tomcat.apache.org/tomcat-7.0-doc/logging.html#Using_Log4j](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Using_Log4j)

请按照那里的步骤进行操作。因为他们声称正在工作:)

对于您提到的明确要点， log4j.properties 文件的位置：

> 使用以下内容创建一个名为 log4j.properties 的文件并将其保存到 $CATALINA_BASE/lib

```
log4j.rootLogger=FINEST, CATALINA

# Define all the appenders
log4j.appender.CATALINA=org.apache.log4j.DailyRollingFileAppender
log4j.appender.CATALINA.File=${catalina.base}/logs/catalina.
log4j.appender.CATALINA.Append=true
log4j.appender.CATALINA.Encoding=UTF-8
# Roll-over the log once per day
log4j.appender.CATALINA.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.CATALINA.layout = org.apache.log4j.PatternLayout
log4j.appender.CATALINA.layout.ConversionPattern = %d [%t] %-5p %c- %m%n

log4j.appender.LOCALHOST=org.apache.log4j.DailyRollingFileAppender
log4j.appender.LOCALHOST.File=${catalina.base}/logs/localhost.
log4j.appender.LOCALHOST.Append=true
log4j.appender.LOCALHOST.Encoding=UTF-8
log4j.appender.LOCALHOST.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.LOCALHOST.layout = org.apache.log4j.PatternLayout
log4j.appender.LOCALHOST.layout.ConversionPattern = %d [%t] %-5p %c- %m%n

log4j.appender.MANAGER=org.apache.log4j.DailyRollingFileAppender
log4j.appender.MANAGER.File=${catalina.base}/logs/manager.
log4j.appender.MANAGER.Append=true
log4j.appender.MANAGER.Encoding=UTF-8
log4j.appender.MANAGER.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.MANAGER.layout = org.apache.log4j.PatternLayout
log4j.appender.MANAGER.layout.ConversionPattern = %d [%t] %-5p %c- %m%n

log4j.appender.HOST-MANAGER=org.apache.log4j.DailyRollingFileAppender
log4j.appender.HOST-MANAGER.File=${catalina.base}/logs/host-manager.
log4j.appender.HOST-MANAGER.Append=true
log4j.appender.HOST-MANAGER.Encoding=UTF-8
log4j.appender.HOST-MANAGER.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.HOST-MANAGER.layout = org.apache.log4j.PatternLayout
log4j.appender.HOST-MANAGER.layout.ConversionPattern = %d [%t] %-5p %c- %m%n

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.Encoding=UTF-8
log4j.appender.CONSOLE.layout = org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern = %d [%t] %-5p %c- %m%n

# Configure which loggers log to which appenders
log4j.logger.org.apache.catalina.core.ContainerBase.[Catalina].[localhost]=INFO, LOCALHOST
log4j.logger.org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager]=\
  INFO, MANAGER
log4j.logger.org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager]=\
  INFO, HOST-MANAGER 
```

与官方文档相比，我只是将配置的第一行更改为： log4j.rootLogger= **FINEST** , CATALINA

（但请确保您也完成其余步骤 - 例如复制 jar 文件，...）

# ruby-on-rails - Rails 在控制器中保存草稿更新？

> ID：14352310
> 
> 赞同：0
> 
> 时间：2013-01-16T06:09:09.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个名为文章的模型，它有一个字符串字段，允许用户将他们的文章设置为草稿。选择草稿并更新帖子时，我希望它返回文章编辑页面，好像用户选择了已发布的选项一样，我希望将用户重定向到文章索引页面。

问题是如果选择草稿选项，我无法让文章更新并重定向回帖子。我是以错误的方式接近这个吗？

**迁移文件**

```
def change
    add_column :articles, :status, :string, default: 'Draft'
  end 
```

**文章.rb**

```
scope :submitted, lambda { where('status = ?', 2) }
scope :draft, lambda{ where('status = ?', 1) } 

def is_draft?
  self.draft
end 
```

**物品控制器**

```
 def update
      case @article.status
        when 1 
          @article.status = 'Draft'
        else 2 
          @article.status = 'Published'
      end

      if @article.status == 1 
        @article = article.find(params[:id])
        flash[:notice] = "Successfully Updated" if @article.update_attributes(params[:article])
        respond_with(@article, :location => edit_article_path)
      else
        @article = article.find(params[:id])
        flash[:notice] = "Successfully Updated" if @article.update_attributes(params[:article])
        respond_with(@article, :location => articles_path)
      end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:33:25.997

如果您真的想使用 1/2 值

模型：

```
STATUS_VALUES = {1 => "Draft", 2 => "Published"}

scope :submitted, lambda { where('status = ?', STATUS_VALUES[2]) }
scope :draft, lambda{ where('status = ?', STATUS_VALUES[1]) } 

attr_accessible :_status

after_initialize do
  self.draft! if self.new_record?  # be draft by default
end

def draft!
  self.status = STATUS_VALUES[1]
end

def published!
  self.status = STATUS_VALUES[2]
end

def _status
  STATUS_VALUES.invert(status)
end

def _status=(value)
  case value
  when 1, "1" then self.draft!
  when 2, "2" then self.published!
  else self.draft!
  end
end

def draft?
  self.status == STATUS_VALUES[1]
end

def published?
  self.status == STATUS_VALUES[2]
end 
```

控制器：

```
def update
  @article = article.find(params[:id])
  if @article.update_attributes(params[:article])
    flash[:notice] = "Successfully Updated" 
    if @article.draft?
      respond_with(@article, :location => edit_article_path)
    else
      respond_with(@article, :location => articles_path)
    end
  else
    render :action => :edit
  end
end 
```

看法：

```
<%= f.check_box(:_status, "Published", 2, 1) %> 
```

# neo4j - 使用 Neo4j

> ID：14352321
> 
> 赞同：-1
> 
> 时间：2013-01-16T06:10:04.873
> 
> 标签：neo4j, nosql

好吧，我在 gephi 工作，我有一个插件，通过它我将图形导出到 neo4j。导出后，它会变成包含 10-12 个文件的文件夹。

现在我已经在我的系统中安装了 neo4j 数据库并在其中运行服务器

```
localhost:7474 
```

它正在显示 neo4j 控制台。

现在我的问题是如何分析我在neo4j控制台的帮助下从gephi导出的neo 4j文件夹这可能吗

好吧，我可能对这整个概念很陌生

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:12:37.670

在您的 neo4j 文件夹中，您肯定有一个 conf 目录，其中包含文件“neo4j-server.properties”。

在顶部，您只需输入数据库的路径：

```
# location of the database directory
org.neo4j.server.database.location=path/to/data.db 
```

其中 data.db 是 neo4j 数据库目录。

# css - 整理具有相同属性的类的 CSS

> ID：14352323
> 
> 赞同：0
> 
> 时间：2013-01-16T06:10:24.600
> 
> 标签：css

我有一个非常混乱的样式表，我正在尝试清理，而我正在寻找答案的一件事是如何清理这个示例：

```
.element .Change {
  font-size: 1em;
}

.element .Name {
  font-size: 1em;
} 
```

这可以用更干净的方式重写吗？前任：

```
.element .Change, .Name {
  font-size: 1em;
} 
```

我可能应该知道这一点，但是当我搜索将 CSS 放在一行时，我会得到单行 CSS 的示例。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:14:02.843

是的，几乎完全按照您的建议。

```
.element .Change,
.element .Name {
  font-size: 1em;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:14:46.110

```
.element .Change, .element .Name {
  font-size: 1em;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:16:13.303

CSS 冗余并不全是坏事，因为您需要为将来的更改保留一些缓冲区。

如果您确定您的样式不会改变，那么您所做的一切都很好。

我建议你看看[LESS](http://lesscss.org/)和其他类似的 compile-to-CSS 语言。

# jquery-mobile - 在 jquery-mobile 中设置字体大小

> ID：14352325
> 
> 赞同：1
> 
> 时间：2013-01-16T06:10:39.523
> 
> 标签：jquery-mobile

我正在使用 jquery-mobile 开发一个应用程序。（是的，还有应用程序，它将在科尔多瓦（又名电话间隙）内运行）

在nexus 7（应用程序的目标设备）上，许多东西的字体显示太小了。我几乎看不懂它，而且我还年轻。该应用程序的许多用户视力不佳。

有没有什么简单的方法可以用 jquery-mobile 改变字体大小？

当我尝试在自定义 css 文件中添加条目时，会出现意外结果（格式化消失等）我也尝试过主题滚轮，但这只允许您更改字体系列，而不是字体大小。

例如：

```
body p {
font-size: 1.5em;
} 
```

即使只是关于如何为 jquery-mobile 编写 css 文件的一般解释也会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:33:57.110

好的，我已经解决了。

在 jquery-mobile-1.2.0.css 文件中是 query-mobile 的样式。你修改这些东西。

jquery-mobile 网站上有一些神秘的信息，一旦您阅读了这些信息，这些信息就会很有意义。

因此，要更改字体大小

在所有

*   你去 jquery-mobile-1.2.0.css 文件并添加：

    ```
    .ui-li p {
        font-size: 1.5em;
    } 
    ```

    大多数 jquery-mobile 元素都从它们的普通 html 标签中找到了 .ui- 。他们有一个特殊的班级或其他东西。（如果有人想详细说明这一点，那就太好了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:41:11.023

设置 global`<body>`应该`font-size`足够了：

```
body {
  font-size: 15px; // You can even use !important 
} 
```

# joomla - Joomla 组件语言文件“sys.ini”和“ini”有什么区别？

> ID：14352327
> 
> 赞同：3
> 
> 时间：2013-01-16T06:10:54.290
> 
> 标签：joomla

在创建组件时，我在 Joomla 的组件目录结构中看到了两个语言文件：`.ini`和`sys.ini`. 有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T11:19:19.603

虽然@Lodder 基本上是正确的，但`sys.ini`文件实际上有 3 个角色。

1.  它为安装/更新过程以及卸载过程提供翻译字符串。
2.  从 1.6+ 开始，它取代[了旧`extension.menu.ini`的组件菜单项](http://docs.joomla.org/Translating_entries_in_the_Components_menu)。
3.  各种 Joomla 管理器使用它来显示扩展名的翻译名称。

您可以`sys.ini`在[Joomla Docs](http://docs.joomla.org/)文章中关于[Adapting a Joomla 1.5 Extension的部分中找到它](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6#sys.ini_Language_Translation_File)

您还可以在文章[International Enhancements for Version 1.6](http://docs.joomla.org/International_Enhancements_for_Version_1.6)中找到更多信息，该文章还有一个关于[新 sys.ini的部分](http://docs.joomla.org/International_Enhancements_for_Version_1.6#The_new_.sys.ini)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T10:46:21.530

该`.sys.ini`文件用于在安装时翻译扩展的描述，而该`.ini`文件用于在 Joomla 后端查看扩展时翻译剩余的字符串和描述。

# jquery - jquery 的更改事件无法正常运行

> ID：14352332
> 
> 赞同：0
> 
> 时间：2013-01-16T06:11:36.557
> 
> 标签：jquery

```
$(document).ready( function() {
 $('#date').bind("change",function(){
  var x=$("#date").val();
  alert(x);
 });
}); 
```

对应的html代码：

```
 <form id="form1">
  <tr>
    <td class="tr_tab"><a class="qtn_data">I am:</td><td class="tr_tab"> </a> 
      <input type="radio value="male" name="gender" /><a class="qtn_data">Male</a>&nbsp
      <input type="radio" value="female" name="gender"/>
      <a class="qtn_data">Female</a>

    </td>
  </tr>
  <tr>
    <td colspan="2">
      <hr/ id="hr3">
    </td>
  </tr>
  <tr>
     <td class="tr_tab"><a class="qtn_data">Date of birth:</td><td class="tr_tab"> </a> 
      <input type="text" name="date" placeholder="Date" MaxLength="2" id="date" />&nbsp
      <input type="text" placeholder="Month" MaxLength="2" id="month" />&nbsp
      <input type="text" placeholder="Year" id="year" MaxLength="4" />&nbsp</td>
  </tr>
  <tr>
    <td></td>
    <td><span style="float:left;"><a class="qtn_data1">ex: 02/05/1992</a></span>

    </td>
  </tr>
  <tr>
    <td colspan="2">
      <hr/ id="hr3">
    </td>
  </tr>
  <tr>
    <td><a class="qtn_data">I am from:</a>

    </td>
    <td>
  <input type="text" id="place" placeholder="Town" />
    </td>
  </tr>
  <tr>
    <td></td>
    <td>
      <input type="text" id="place" placeholder="State" />
    </td>
  </tr>
  <tr>
    <td></td>
    <td>
      <input type="text" id="place" placeholder="Country" />
    </td>
  </tr>
</form> 
```

更改文本框中的文本后`Opera`，当我移动到另一个窗口时显示警报，但在..中没有效果`Firefox``id="date"``Chrome`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:22:46.767

有不正确的 HTML

改变

```
 <tr>
     <td class="tr_tab"><a class="qtn_data">Date of birth:</td><td class="tr_tab"> </a> 
      <input type="text" name="date" placeholder="Date" MaxLength="2" id="date" />&nbsp
      <input type="text" placeholder="Month" MaxLength="2" id="month" />&nbsp
      <input type="text" placeholder="Year" id="year" MaxLength="4" />&nbsp</td>
  </tr> 
```

到

```
 <tr>
     <td class="tr_tab"><a class="qtn_data">Date of birth: </a> </td>
     <td class="tr_tab">
      <input type="text" name="date" placeholder="Date" MaxLength="2" id="date" />&nbsp
      <input type="text" placeholder="Month" MaxLength="2" id="month" />&nbsp
      <input type="text" placeholder="Year" id="year" MaxLength="4" />&nbsp
     </td>
  </tr> 
```

在这里你已经关闭了`</td>`之前关闭的`</a>`

```
<td class="tr_tab"><a class="qtn_data">Date of birth:</td><td class="tr_tab"> </a> 
```

其他地方也有`HTML`错误，请检查并改正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:16:39.337

试试这个

在此处了解有关绑定`change`事件的更多信息...

[http://api.jquery.com/change/](http://api.jquery.com/change/)

前任：-

```
$(document).ready( function()
    $('#date').click(function() {
      $('#date').change();
    });

    $('#date').change(function() {
       var x=$("#date").val();
       alert(x);
    });
}); 
```

# android - IAB 签名的数据中没有订单

> ID：14352335
> 
> 赞同：12
> 
> 时间：2013-01-16T06:11:46.603
> 
> 标签：android, in-app-billing

我已经在我的应用程序中使用 IAB 几个月了，我注意到来自 IAB 的一些签名数据看起来像这样。（注意，为简洁起见，我删除了签名）。

```
{"signedData":"{\"nonce\":-5355169768522252731,\"orders\":[]}","signature":"xxx...."} 
```

请注意，此签名数据响应中没有订单。有谁知道什么会导致这条消息从 IAB 服务发回？似乎一点价值都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:10:19.137

`restoreTransactions()`如果用户没有购买任何东西，调用将导致消息为空订单。

# primavera - Primavera p6 8.1，模块 PM.exe 中的异常 EstringListError 在 00028F85 列表索引超出范围（0）

> ID：14352337
> 
> 赞同：0
> 
> 时间：2013-01-16T06:12:02.840
> 
> 标签：primavera

关于 Primavera P6 V8.1：

1.  登录P6，配置数据库连接。

2.  删除所有数据库连接。

3.  然后无法登录P6。错误信息“模块 PM.exe 中的异常 EstringListError 在 00028F85 列表索引超出范围（0）”</p>

4.  尝试重新安装p6客户端，错误一直存在

如果你能解决这个问题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:53:57.170

您需要至少一个 P6 数据库配置，它已成功配置到 P6 数据库 (PMDB)，才能使用 P6 应用程序用户帐户登录。

如果在通过数据库配置实用程序配置 PMDB 时发生此错误，请执行以下操作：

> 将 Prmbootstrap.xml 文件从所有用户文件夹或默认配置文件复制到当前用户的配置文件。

您可以在以下位置找到 Prmbootstrap.xml 文件：

> C:\Users\UserName\AppData\Local\Oracle\Primavera P6\P6 可选客户端（如果 P6 可选客户端） C:\Users\UserName\AppData\Local\Oracle\Primavera P6\P6 Professional（如果 P6 Professional）

希望它会有所帮助。

瑜伽士

# mysql - 如何将此查询转换为 Codeigniter 活动记录

> ID：14352338
> 
> 赞同：0
> 
> 时间：2013-01-16T06:12:10.240
> 
> 标签：mysql, codeigniter

```
SELECT 
    case_id,
    serialnumber,
    DateLastHere,
    Bookedindate,
    DATEDIFF(DateLastHere,Bookedindate) 
FROM `cases` 
WHERE serialnumber like 'TTTT46' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:19:08.560

你可以这样做

```
$data   =   array(
            'case_id',
            'serialnumber',
            'DateLastHere',
            'Bookedindate',
            'DATEDIFF(DateLastHere,Bookedindate)'
            );
$this->db->select($data);
$this->db->from('cases');
$this->db->like('serialnumber','TTTT46');
$query = $this->db->get()->result_array(); 
```

# objective-c - 鼠标事件处理方法应该出现在哪个类（模型或控制器或视图类）中

> ID：14352339
> 
> 赞同：0
> 
> 时间：2013-01-16T06:12:12.480
> 
> 标签：objective-c, cocoa

我只想知道哪个类（模型、控制器或视图类）应该包含鼠标事件处理方法。

例如 drawrect 方法应该出现在视图类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:15:37.670

鼠标事件处理应该在视图类中。其他类不接收鼠标事件——如果您在其他地方添加鼠标事件处理程序，它将不会被调用。

# iphone - 半屏视图，iOS侧边栏菜单

> ID：14352342
> 
> 赞同：8
> 
> 时间：2013-01-16T06:12:38.650
> 
> 标签：iphone, ios6

因为我想在屏幕左侧显示菜单数量，就像下面一样 - 它是一个新的 Facebook 应用程序。当你点击显示为红色方块的栏时，左侧的列表视图在之后出现在我的应用程序中滑动正确的部分是否有任何 sdk 可用于添加此内容。请帮助我。

![在此处输入图像描述](../Images/048cc94e8c4942ce0ba08119ddf3b0bd.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T06:25:09.213

看看

[https://github.com/BenHall/ios_facebook_style_navigation](https://github.com/BenHall/ios_facebook_style_navigation)

你会找到很多方法来做到这一点。根据您的需要选择任何人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T06:19:24.017

Facebook 的人在新版本的应用程序中做得非常出色。可以从[这里](https://github.com/mystcolor/JTRevealSidebarDemo)找到类似的开源代码-

它揭示了为 iPhone 进行拆分视图背后的技术。

编辑：其他一些开源代码：

[来源 1](https://github.com/jeremieweldin/JWSlideMenu)
[来源 2](https://github.com/devindoty/DDMenuController)
[来源 3](https://github.com/pkluz/ZUUIRevealController)
[来源 4](https://github.com/Inferis/ViewDeck)
[来源 5](https://github.com/edgecase/ECSlidingViewController)
[来源 6](https://github.com/meiwin/MWFSlideNavigationViewController)
[来源 7](https://github.com/mikefrederick/MFSideMenu)
[来源 8](https://github.com/stefanoa/SASlideMenu)
[来源 9](https://github.com/gloubibou/HHTabListController)
[来源 10](https://github.com/myell0w/MTSlideViewController)
[来源 11](https://github.com/andrewroycarter/SlideViewController)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T06:29:04.447

不，没有可用的 SDK 来执行此操作。你可以通过两种方式做到这一点。

1.  通过使用两个 UIViewController
2.  通过使用两个 UIView。

我推荐第二个，因为我已经使用它并且工作正常。

对于第一种方法，您可以在 github.com 上找到一些示例和演示。

让我简要介绍一下我是如何使用两个 UIView 实现它的。

您的所有正常内容将在默认 UIView 中，滑动控件将在第二个视图中。

默认情况下，普通 UIView 将可见，滑块 UIView 位于 -x pos 类似 (-200,0,200,320) 的位置，根据您的需要进行设置。

当您单击显示/隐藏按钮时，它会更改其框架属性，因此普通 UIView 滑动右侧 200 pt 并且滑块 UIView 进入屏幕。

让我向你展示一些隐藏/取消隐藏的代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
view.frame = CGRectMake(250,
           view.frame.origin.y,
           view.frame.size.width,
           view.frame.size.height);;

slideView.frame = CGRectMake(0, view.frame.origin.y, 250, view.frame.size.height);;

[UIView commitAnimations]; 
```

CGRectMake 中的参数可以是任何你想要的。

要实现这一点，请创建 UIView 的子类。如果你想看起来像 facebook，可以添加 UITableView。

**更新：**

在搜索一些新的实现时，我发现一位开发人员在这个概念上做得很好。如果有人想添加此功能，则必须访问一次： [MMDrawerController](https://github.com/mutualmobile/MMDrawerController)

一切顺利

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-18T10:32:47.920

您可以使用[InteractiveSideMenu](https://github.com/handsomecode/InteractiveSideMenu)库。它支持交互式打开/关闭菜单。它支持交互式打开/关闭菜单和以下自定义：

*   动画时长
*   可见内容宽度
*   内容量表
*   使用带有参数自定义的弹簧动画
*   动画曲线等动画选项

你应该使用 3 个基本的 ViewController 来创建子类来实现你的侧边菜单。

*   `MenuContainerViewController`是菜单和内容视图的主机
*   `MenuViewController`是菜单视图的容器
*   `MenuItemContentControlller`是对应菜单项的内容的容器

要设置侧面菜单，您应该做 3 件事：

*   提供基础的实现`MenuViewController`并将其分配给`menuViewController`属性
*   提供菜单内容的实现并将内容控制器数组分配给`contentViewControllers`属性
*   通过调用选择初始内容控制器`selectContentViewController(_ selectedContentVC: MenuItemContentViewController)`

这是设置主机控制器的示例。

```
import InteractiveSideMenu

class HostViewController: MenuContainerViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        self.menuViewController = self.storyboard!.instantiateViewController(withIdentifier: "NavigationMenu") as! MenuViewController

        self.contentViewControllers = contentControllers()

        self.selectContentViewController(contentViewControllers.first!)
    }

    private func contentControllers() -> [MenuItemContentViewController] {
        //here is instantiation of content view controllers
    }
} 
```

您可以在[此处](https://github.com/handsomecode/InteractiveSideMenu/tree/master/Sample/Sample)的示例中找到更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T06:50:03.797

![这是实现它的好而简单的例子](../Images/e4decb2e2635c65194157a55ead07520.png)

单击以下链接获取它[https://github.com/nverinaud/NVSlideMenuController](https://github.com/nverinaud/NVSlideMenuController)

# ruby-on-rails - 在Windows 7中指定时间后运行脚本

> ID：14352343
> 
> 赞同：1
> 
> 时间：2013-01-16T06:12:49.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个红宝石脚本 open.rb

```
require 'launchy'

 Launchy.open("http://stackoverflow.com") 
```

现在我想要的是在一天中我第一次运行脚本而不是每 10 分钟运行一次。那么有什么办法可以做到这一点，这里我使用的是 Windows 7。

在 google 之后，我找到了一种方法来使用 Ruby on Rails 作为后台工作，但这不是我的解决方案，所以有任何可能的方法来完成这项任务，或者是否有任何 gem 来完成这项任务。

以及如何在运行之前清除 chache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:05:36.373

解决方案是使用 Windows 调度程序。

要设置任务每 10 分钟运行一次，请按照 Stack Overflow 问题中的解决方案进行操作：[windows scheduler to run a task every x-minutes?](https://stackoverflow.com/questions/4249542/windows-scheduler-to-run-a-task-every-x-minutes)

**更新**：这是一种运行关联 Ruby 脚本的方法`ruby.exe`：[https](https://stackoverflow.com/a/1422398/188331) ://stackoverflow.com/a/1422398/188331 （您可以制作批处理脚本）

# php - 如何删除字符串中的重复单词，而该字符串是数组的值？

> ID：14352345
> 
> 赞同：0
> 
> 时间：2013-01-16T06:12:50.483
> 
> 标签：php

如何删除字符串中的重复单词，而该字符串是数组的值？

例如

```
foreach($results as $result)
{
   foreach($result as $words)
    {
        echo $words = str_word_count($words,0)."\n";
    }
} 
```

结果是例如

```
test  = 1
test activity = 2
test CI to CGI = 4
Test car Pool = 3 
```

我想要发生的是，例如删除单词“test”的其他重复项并列出所有 unqiue 单词，以便结果只会是

```
test = 1
activity = 1
CI = 1
to = 1
CGI = 1
car = 1
pool = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:22:22.757

```
$final=array();

foreach($results as $result)
{
   foreach($result as $key=> $words)
    {
        echo $words = str_word_count($words,0)."\n";

       if(!in_array($words,array_keys($final))
           $final[$words]=str_word_count($words,0);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:31:32.020

```
$results=array(
               array(
               "test",
               "test activity",
               "test CI to CGI",
               "Test car Pool"
               )
              );
$ws=array();
foreach($results as $result)
{
   foreach($result as $words)
    {
        $arr=explode(' ',$words);
        foreach($arr as $word)
        {
           if($word!='')
           {
              if(!isset($ws[$word])) $ws[$word]=1;
              else $ws[$word]++;
           }
        }
    }
}

print_r($ws); 
```

# java - 获取指定日期时间（Android）的剩余时间（天，小时，分钟）

> ID：14352352
> 
> 赞同：3
> 
> 时间：2013-01-16T06:13:35.107
> 
> 标签：java, android, datetime

我想从 Date1 中得到多少日期、小时、分钟和秒数

```
String RemainingOn = "2013/25/1 22:36:24";
String mDate,mHour,mMinute,mSecond;

public String  DateComparedateTime()
{
 // compare  RemainingOn with now 
   mDate = Difference date with RemainingOn and Now;
   mHour = Difference hour with RemainingOn and Now;
   mMinute = Difference minute with RemainingOn and Now;
   mSecond = Difference second with RemainingOn and Now;

   return mDate+","+mHour+","+mMinute+","+mSecond ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:18:12.727

以下代码给出了想法

```
public String getDateDiffString(Date dateOne, Date dateTwo)
{
    long timeOne = dateOne.getTime();
    long timeTwo = dateTwo.getTime();
    long oneDay = 1000 * 60 * 60 * 24;
    long delta = (timeTwo - timeOne) / oneDay;

    if (delta > 0) {
        return "dateTwo is " + delta + " days after dateOne";
    }
    else {
        delta *= -1;
        return "dateTwo is " + delta + " days before dateOne";
    }
} 
```

如果你可以使用[Joda Time](http://joda-time.sourceforge.net/)

Joda Time 有一个时间[间隔](http://joda-time.sourceforge.net/key_interval.html)的概念：

```
Interval interval = new Interval(oldTime, new Instant()); 
```

# c - C中的数组加法

> ID：14352367
> 
> 赞同：0
> 
> 时间：2013-01-16T06:15:41.333
> 
> 标签：c, arrays, comparison, iteration, addition

我正在尝试获取 3 个数组并添加每个元素组合以查看是否有任何等于 91，并且必须确保结果的红色值小于蓝色值小于绿色值。我一生都无法想到如何存储这么多实例，然后在最后引用它们。

如您所见，我缺少代码，因为我不知道如何继续。

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>

int main(void) {

int i = 0;
int j = 0;
int k = 0;
int redSize = 6;
int blueSize = 9;
int greenSize = 9;
int red[] = (9, 22, 21, 18, 34, 13);
int blue[] = (20, 60, 14, 17, 39, 16, 6, 33, 18);
int green[] = (40, 7, 51, 26, 8, 24, 12, 11, 27);
for(i; i < redSize; i++){

    result = red[i] + blue[j] + green[k] 

    while (j < blueSize){

        // need to iterate over each item in array "blue"

        while(k < greenSize){
          //same for green

        } 

    }

    if (result == 91 && red[i] < blue[i] && blue[i] < green[i]){
    printf("The red value is %d, the blue value is %d, and the green value is %d", red[i], blue[i], green[i]);  

    }   

return 0;
}   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:29:39.993

你没那么远。一些小故障

*   数组初始化是用 {} 而不是 ()
*   您想要所有组合，因此需要 3 个嵌套循环：一个用于红色（i），一个用于蓝色（j），一个用于绿色（k）。如您所见，对于每个 red[i]，您都执行 blue[j]，对于每个 red[i]，您都执行 green[k]。你计算`i*j*k`元素。
*   测试将在嵌套循环的最内部中心执行，此时红色、蓝色和绿色已知（即 i、j 和 k 具有值）。

例如：（我只是修复了你的程序，没有优化任何东西）

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>

int main(void){

int i = 0;
int j = 0;
int k = 0;
int redSize = 6;
int blueSize = 9;
int greenSize = 9;
int red[] = {9, 22, 21, 18, 34, 13};
int blue[] = {20, 60, 14, 17, 39, 16, 6, 33, 18};
int green[] = {40, 7, 51, 26, 8, 24, 12, 11, 27};

for(i=0 ; i < redSize; i++){
  for(j=0 ; j < blueSize; j++){
    for(k=0 ; k < greenSize; k++){

      int result = red[i] + blue[j] + green[k];
      if (result == 91 && red[i] < blue[j] && blue[j] < green[k]){
        printf("The red value is %d, the blue value is %d, and the green value is %d\n", red[i], blue[j], green[k]);  
      }   

    }
  }
}

return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:30:20.913

注意：您的数组声明错误，循环范围不正确，循环组织可以通过测试小于条件并消除整个子循环来允许大量跳过。对于已知不小于当前绿色的红色值，无需进行所有绿色与蓝色的比较。

**算法：**

```
for each red value
   for each blue value "greater" then the current red value
      for each green value "greater" than the current blue value
           if (red+blue+green)=91, the trio is a candidate. 
```

扔掉很多杂物后，它应该看起来像这样：

```
#include<stdio.h>

int main(void)
{
    int red[] = {9, 22, 21, 18, 34, 13};
    int blue[] = {20, 60, 14, 17, 39, 16, 6, 33, 18};
    int green[] = {40, 7, 51, 26, 8, 24, 12, 11, 27};
    int i,j,k;

    for(i=0;i<sizeof(red)/sizeof(red[0]); ++i)
    {
        for (j=0;j<sizeof(blue)/sizeof(blue[0]);++j)
        {
            if (red[i] < blue[j])
                for (k=0;k<sizeof(green)/sizeof(green[0]);++k)
                {
                    if (blue[j] < green[k] && red[i]+blue[j]+green[k]==91)
                        printf("red:%d blue:%d green:%d\n", red[i], blue[j], green[k]);
                }
        }
    }

    return 0;
} 
```

**输出**

```
red:18 blue:33 green:40 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:36:23.797

或者我们可以通过在绿色循环中检查特定值来避免每次添加。

```
#include<stdio.h>

int main(void)
{
    int red[] = {9, 22, 21, 18, 34, 13};
    int blue[] = {20, 60, 14, 17, 39, 16, 6, 33, 18};
    int green[] = {40, 7, 51, 26, 8, 24, 12, 11, 27};
    int i = 0, j = 0, k = 0;
while(i < redSize){
      while (j < blueSize){
             kValue = 91 - red[i] - blue[j];
             while(k < greenSize){
                  if(green[k] == kValue && red[i] < blue[j] && blue[j] < green[k])
                  {
                      printf("The red value is %d, the blue value is %d, and the green value is %d", red[i], blue[j], green[k]); 
                  }
                  k++;
                }
                j++;
            }
            i++;
        }
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:38:02.320

根据您对问题的简短介绍，我认为这可能会对您有所帮助，如果不是您真正需要的，请发表评论。

```
for(i=0 to redSize){
 for(j=0 to blueSize){
  for(k=0 to greenSize){
   if(red[i]<blue[j]<green[k]){
    if(91 == red[i]+blue[j]+green[k]){
       printf(red[i],blue[j],green[k]);
    }
   }
  }
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T06:30:02.410

```
#include <stdio.h>

int main(void) {

    int red[] = {9, 22, 21, 18, 34, 13};
    int blue[] = {20, 60, 14, 17, 39, 16, 6, 33, 18};
    int green[] = {40, 7, 51, 26, 8, 24, 12, 11, 27};

    int r, g, b;

    for (r = 0; r < (sizeof(red) / sizeof(int)); ++r) {
        for (g = 0; g < (sizeof(green) / sizeof(int)); ++g) {
            for (b = 0; b < (sizeof(green) / sizeof(int)); ++b) {
                int s = red[r] + green[g] + blue[b];
                if (s == 91 && red[r] < blue[b] && blue[r] < green[g]) {
                    printf("%d %d %d", red[r], blue[b], green[g]);
                }
            }
        }
    }

    return 0;
} 
```

# c++ - 类将数据成员存储在顺序内存中？

> ID：14352373
> 
> 赞同：3
> 
> 时间：2013-01-16T06:16:02.293
> 
> 标签：c++, opengl, pointers, opengl-es

这个问题的简短版本：指向类的第一个数据成员的指针是否会导致指向其所有数据成员的指针？

讨论：

我正在阅读一些示例代码，这很有趣。当一个特定的函数（在这种情况下是`glUniformMatrix4fv`来自 OpenGL 的 C 函数）将一个数组作为参数时，它会以常用的 C 方式传递，即使用指向数组第一个元素的地址的指针，如下所示：

`glUniformMatrix4fv(glvariable, 1, 0, &newmatrix[0]);` // 引用新矩阵

该开发人员有一个用于创建 4X4 矩阵的 C++ 类，总共有 16 个浮点数。但是，该类的数据成员分为 4 个独立的向量，每个向量有 4 个数据成员：

以下是该类的数据成员：

```
vec4 x;
vec4 y;
vec4 z;
vec4 w; 
```

该类`vec4`又提供这些数据成员：

```
T x;
T y;
T z;
T w; 
```

然后他创建了一个函数来指向第一个`vec4 x`数据成员：

```
 const T* Pointer() const
{
    return &x.x;
} 
```

不知何故，这奇迹般地转化为发送所有 4 个`vec4`对象及其各自的 4 个组件：

```
glUniformMatrix4fv(modelviewUniform, 1, 0, modelviewMatrix.Pointer()); 
```

我对 C++ 还很陌生，但这让我感到惊讶，您可以只指向一个数据成员并期望所有其他数据成员也能发送。是因为该类以特定顺序定义它们吗？如果它们在类定义中以不同的顺序定义怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T06:18:44.280

这是 C++ 对象模型。您可以保证在相同的访问级别 ( `private`/ `public`/ `protected`) 内，对象属性是有序的 (C++11)，并且对于它们之间没有访问说明符的成员也是如此（在 C++03 中）。

这并不意味着你正在做的是一个好主意。最好避免强制转换，让函数做更多的工作。

## C++11：

### 9.2 类成员 [class.mem]

> 14)**分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。具有不同访问控制的非静态数据成员的分配顺序未指定 (11)**。实现对齐要求可能会导致两个相邻的成员不会被立即分配；管理虚拟功能 (10.3) 和虚拟基类 (10.1) 的空间要求也是如此。

## C++03

### 9.2 类成员 [class.mem]

> 12)**分配没有中间访问说明符的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。由访问说明符分隔的非静态数据成员的分配顺序未指定 (11.1)**。实现对齐要求可能会导致两个相邻的成员不会被立即分配；管理虚拟功能 (10.3) 和虚拟基类 (10.1) 的空间要求也是如此。

# java - 执行查询时出现休眠异常

> ID：14352382
> 
> 赞同：0
> 
> 时间：2013-01-16T06:16:39.467
> 
> 标签：java, hibernate, spring-mvc, hql

以下是我的代码片段：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext(
                    "classpath*:META-INF/spring/applicationContext*.xml");
            JpaTransactionManager jpatm = (JpaTransactionManager) ctx
                    .getBean("transactionManager");
            EntityManager em = jpatm.getEntityManagerFactory()
                    .createEntityManager();
String sqlQuery = "SELECT suc FROM SubUsrCont suc, UDMap uDMap WHERE suc.userid = uDMap.userid AND uDMap.parentuserid = :parentuserid";
TypedQuery<SubUsrCont> query = (TypedQuery<SubUsrCont>) em.createQuery(sqlQuery, SubUsrCont.class);
query.setParameter("parentuserid", parentid);
ArrayList<SubUsrCont> listContent = (ArrayList<SubUsrCont>) query.getResultList(); 
```

但是，一旦执行，我就会收到以下错误：

```
[http-8080-1] ERROR org.hibernate.hql.PARSER - line 1:92: expecting OPEN, found '.' 
```

有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:45:21.670

好吧，我找到了它并成功地测试了它。这是由于我的 POJO 包名称。以前它是**in.myproject.myname**。我将其更改为**com.myproject.myname**。HQL作为 SQL 关键字 IN 并**正在**寻找**OPEN '('**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:26:27.883

你为什么在里面使用 Native SQL 查询`em.createQuery()`？这将不起作用，因为 HQL 不能拥有`SELECT`，而且您没有设置参数的值`:parentuserid`。

```
String sqlQuery = "FROM SubUsrCont suc, UDMap uDMap WHERE suc.userid = uDMap.userid AND uDMap.parentuserid = :parentuserid";
TypedQuery<SubUsrCont> query = (TypedQuery<SubUsrCont>) em.createQuery(sqlQuery, SubUsrCont.class);
query.setParameter("parentuserid", <PARENT USER ID TO BE SEARCHED>); 
```

试试这个看看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:26:59.667

如果您想执行 SQL，请使用`createNativeQuery`. 也尝试“选择成功。* ...

你也没有设置参数：parentuserid

采用`query setParameter("parentuserid",someValue)`

# windows-phone-8 - Windows Phone 8 中的旋转进度指示器

> ID：14352392
> 
> 赞同：0
> 
> 时间：2013-01-16T06:17:17.683
> 
> 标签：windows-phone-8, windows-phone

在 windows phone 8 开发中可以有旋转进度指示器控件吗？请为我们提供样品以实现相同的目标。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:02:56.653

Spinner UI 不是 Windows Phone 原生用户体验的一部分，在 WP7/WP8 上看起来很奇怪而且不合适。考虑在页面顶部使用不确定的进度条来指示待处理的操作。

您要查找的谷歌术语是 SystemTray.ProgresIndicator。示例[@http://blog.duc.as/2011/10/08/using-the-system-tray-to-show-progress-in-windows-phone-7-mango/](http://blog.duc.as/2011/10/08/using-the-system-tray-to-show-progress-in-windows-phone-7-mango/)

```
<shell:SystemTray.ProgressIndicator>
    <shell:ProgressIndicator IsIndeterminate="true" IsVisible="True" Text="Click me..." />
</shell:SystemTray.ProgressIndicator> 
```

```
ProgressIndicator progress = new ProgressIndicator
{
    IsVisible = true,
    IsIndeterminate = true,
    Text = "Downloading details..."
};
SystemTray.SetProgressIndicator(this, progress); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:32:20.867

这是您自己构建自定义不确定进度条的文档和示例。该示例仍然使用矩形，但可以适应您想要的任何内容：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg442303%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg442303%28v=vs.105%29.aspx)

# android - Boost Android，ndk-build 不创建 .so/headers 找不到

> ID：14352397
> 
> 赞同：0
> 
> 时间：2013-01-16T06:17:45.403
> 
> 标签：android, boost, android-ndk, cocos2d-x

我一直在尝试按照以下说明将 boost 链接到我的 android 应用程序中：

[在 android 中包含 Boost C++ 库](https://stackoverflow.com/questions/7885384/include-boost-c-library-in-android)

这似乎非常简洁和明智。不幸的是，经过几天的尝试，我看不出我做错了什么，因为最终结果是 ndk-build 关于我尝试包含的 boost 标头返回“没有这样的文件或目录”。

在构建了我需要的 boost 库之后，我将它们复制到 proj.android/jni/boost/include 和 proj.android/jni/boost/lib 中。然后我在 jni 中创建了一个名为 boost-build 的目录，我在其中创建了一个 Android.mk 来处理定义模块以链接到 libboost_serialization 静态库（这是我唯一感兴趣的 boost 库）。

```
LOCAL_PATH:= $(call my-dir)

# serialization
include $(CLEAR_VARS)

# I'm not sure this is necessary / helpful, but I've tried without it, as well
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../include/boost-1_49 \
# EDIT: replaced previous line from this, at Igor's correction: $(LOCAL_PATH)/../include/boost-1_49/boost \
                    $(LOCAL_PATH)/../include/boost-1_49/boost/archive \
                    $(LOCAL_PATH)/../include/boost-1_49/boost/serialization

LOCAL_MODULE:= boost_serialization
LOCAL_SRC_FILES:= ../lib/libboost_serialization-gcc-mt-1_49.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/boost-build-includes
include $(PREBUILT_STATIC_LIBRARY) 
```

android项目makefile，proj.android/jni/Android.m：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LDFLAGS= -L$(NDK_ROOT)/sources/crystax/libs/armeabi-v7a/4.6.3 -Lcrystax 

LOCAL_CPPFLAGS += -fexceptions 

LOCAL_CPPFLAGS += -frtti

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := hellocpp/main.cpp \
                   ../../Classes/AppDelegate.cpp \
                   ../../Classes/HelloWorldScene.cpp \
        ../../Classes/TitleScene.cpp \
        ../../Classes/GameSettings.cpp \
        ../../Classes/Cutscene.cpp \
        ../../Classes/HighScoreTable.cpp \
        ../../Classes/MaskNode.cpp \
        ../../Classes/MenuResponder.cpp \
        ../../Classes/HudElementBg.cpp \
        ../../Classes/OHRCharSelectMenu.cpp \
        ../../Classes/OHRDifficultySelectMenu.cpp \
        ../../Classes/Types.cpp \
        ../../Classes/OHRMainMenu.cpp

# I've tried with / without this variable, as well, with the same result
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes \
$(LOCAL_PATH)/../include/boost-1_49 \
# EDIT: replaced previous line from this, at Igor's correction: $(LOCAL_PATH)/../include/boost-1_49/boost \
        $(LOCAL_PATH)/../boost/include/boost-1_49/boost/archive \
        $(LOCAL_PATH)/../boost/include/boost-1_49/boost/serialization

LOCAL_WHOLE_STATIC_LIBRARIES := boost_serialization cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,boost-build) \
$(call import-module,cocos2dx) 
```

现在，当我运行 ndk-build 编译源代码时，我收到以下错误：

```
Compile++ thumb  : game_shared <= main.cpp
Compile++ thumb  : game_shared <= AppDelegate.cpp
In file included from jni/../../Classes/MapUtils.h:2:0,
                 from jni/../../Classes/Types.h:3,
                 from jni/../../Classes/menuresponder.h:2,
                 from jni/../../Classes/OHRMainMenu.h:2,
                 from jni/../../Classes/TitleScene.h:10,
                 from jni/../../Classes/AppDelegate.cpp:6:

jni/../../Classes/BoostUtils.h:2:36: fatal error: boost/archive/tmpdir.hpp: No such file or directory 
```

（BoostUtils.h 是一个只包含一堆与序列化相关的头文件的头文件）

```
#include <boost/archive/tmpdir.hpp>

#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>

#include <boost/serialization/base_object.hpp>
#include <boost/serialization/utility.hpp>
#include <boost/serialization/list.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/serialization/assume_abstract.hpp> 
```

现在，今晚恰好一次，运行它会生成一堆 .so 和 .a，包括 libbost_serialization.so，在 proj.android/obj/local 中。尽管删除了 /obj 目录，但我一直无法生成它。同样奇怪的是，尽管本文顶部的链接提出了建议，但在运行 ndk-build 时并未创建 /libs 目录。但是，我不能 100% 确定 .so 甚至需要生成。

因此，对于我的生活，我无法确定这里的问题。任何解决方案或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:51:43.600

经验教训：LOCAL_C_INCLUDES 实际上是一个必要的变量，并确保它指向正确的位置。在我的情况下，它只是一个错误的 '../' 并包含 'boost/' 的内容，而不是包含 boost 的目录。

（另外，多睡觉，而不是花几个小时浏览这些问题。）

# oauth-2.0 - 如何通过 v3 API 获取组织仓库的 GitHub 拉取请求？

> ID：14352398
> 
> 赞同：1
> 
> 时间：2013-01-16T06:17:47.267
> 
> 标签：oauth-2.0, github-api

我似乎无法使用 API 获取我组织的私有存储库的拉取请求。我已经为自己获得了一个运行良好的 OAuth2 访问令牌。例如，此调用有效并返回有效的 JSON（`apaidnerd`将是我的用户名，并且`blog`将是公共 repo）：

```
https://api.github.com/repos/apaidnerd/blog/pulls?access_token=xxxxxxxxxxx 
```

但是这个 URL（`myorg`是组织名称，`secretrepo`是一个私人仓库）：

```
https://api.github.com/repos/myorg/secretrepo/pulls?access_token=xxxxxxxxxxxx 
```

回报：

```
{ "message": "Not Found" } 
```

`curl -u apaidnerd http://...`更新：如果我从命令行尝试，第二个 URL 有效。一定是我的 OAuth 令牌有问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:44:40.660

发现问题：我没有请求[repo scope](http://developer.github.com/v3/oauth/#scopes)，它授予对私有存储库的访问权限。

# javascript - Facebook 之类的插件 getelements 受阻

> ID：14352399
> 
> 赞同：1
> 
> 时间：2013-01-16T06:17:53.210
> 
> 标签：javascript, facebook-like

我将 javascript 放入标题中，但我们的 CMS（我不问）正在剥离元素及其标签，这些元素及其标签是为该死的东西设置样式所需的。如何将它们硬编码到脚本中？

我最终得到： `<div class="fb-like"></div>`

代替：`<div class="fb-like" data-layout="button_count" data-width="200" data-show-faces="false"></div>`

我不太了解代码，无法将它们硬编码：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

# c# - 2 个条件的 linq 计数

> ID：14352405
> 
> 赞同：3
> 
> 时间：2013-01-16T06:18:18.123
> 
> 标签：c#, linq

我有一张这样的桌子。

```
Age Group

20  G1
21  G2
20  G2
21  G1
22  G3
21  G1
20  G2
21  G2
22  G3
20  G1
22  G3 
```

我想要的结果是

```
Age Grp Count

20  G1 2 
20  G2 2
21  G1 2
22  G2 2
22  G3 3 
```

我不知道如何按 2 组计算

我只有 1 组

```
 var thirdResultQuery=from row in secondResultQuery
                         group row by new {row.Grp  } into g
                         select new
                         {

                             g.Key.Grp,
                             ageCount = g.Count()
                         }; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:19:40.960

加入`Age`_`GROUP`

```
var thirdResultQuery    =   from row in secondResultQuery
                            group row by new {row.Grp, row.Age} into g
                            select new
                            {
                                g.Key.Age,
                                g.Key.Grp,
                                ageCount = g.Count()
                            }; 
```

# jquery - Wordpress 管理面板上的 jQuery 错误（tinyMCE 未定义）

> ID：14352407
> 
> 赞同：4
> 
> 时间：2013-01-16T06:18:35.637
> 
> 标签：jquery, wordpress

将 Wordpress 从 3.2 升级到 3.5 后，我在管理端收到 jQuery 错误。下面是错误。

```
Error: ReferenceError: tinyMCE is not defined
Source File: http://domainname.com/wp-includes/js/tinymce/langs/wp-langs-en.js?ver=345-20111127 
```

任何人都可以在这里帮助我。谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-10T16:16:30.317

最好使用声明：

```
define('CONCATENATE_SCRIPTS', false); 
```

在`wp-config.php`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-09T23:34:23.763

在阅读了一百万篇关于关闭所有内容、重新安装所有内容、在键盘上挥舞鸡骨头以及在肩膀上撒盐的帖子后，我决定认真起来。

tinyMCE 没有定义就是这个意思。假设：它从未被加载。检查 http://yourdomain.com/wp-includes/js/tinymce/tiny_mce.js?ver=359-20131026'> 或 tiny_mce.js 的其他脚本标记的页面源。我敢打赌你没有。如果你这样做，这不是你的解决方案。如果你不这样做，请继续阅读。

我在 ...\wp-includes\class-wp-editor.php 中找到了应该在页面中放置 js 标记的代码。

有一个 if 块 "if ( $compressed ) {..." 当 $compressed = 1，或 ...\wp-includes\js\tinymce\tiny_mce.js 当 $compressed = 0 时。所以我在 if 块之前设置 $compressed = 0 以强制执行 else。这解决了我的问题。

这是一个简单的解决方法，如果它不能解决您的问题，它很容易逆转，而不会冒破坏 WP 生态圈中其他任何东西的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-18T17:27:01.773

对于遇到这种情况并且有点想把头发拉出来的其他人，@dale3h 的回答是我的解决方案。

如果您的`functions.php`which 中有一个函数与过滤器挂钩，`script_loader_tag`并且并不总是返回原始标签标记的适当部分，或者其中存在某种错误，它可能会导致某些脚本无法加载，因为要输出脚本到页面首先通过这个过滤器。

我为避免这种情况所做的事情是将脚本句柄列入白名单，具体取决于我想赋予它们的额外属性，因此可以有条件地完成工作（保持所有其他脚本完好无损）：

```
// Manage extra attibutes for enqueued scripts
function foo_script_extras( $tag, $handle, $src ){

    $whitelist = array(
        'js-font-awesome-core'  => array(
            'sri'   => 'sha384-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
            'defer' => true
        ),
        'js-font-awesome-light' => array(
            'sri'   => 'sha384-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
            'defer' => true
        ),
        'js-popper'             => array(
            'sri'   => 'sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ'
        ),
        'js-bootstrap'          => array(
            'sri'   => 'sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm'
        ),
        'js-gtag'               => array(
            'async' => true
        )
    );

    // Construct the script if we want to give it extra attributes
    if( array_key_exists( $handle, $whitelist ) ){

        // Extra markup
        $extra  = '';
        $mods   = $whitelist[$handle];

        // Check for SRI
        if( array_key_exists( 'sri', $mods ) ){
            $extra .= ' integrity="' . $mods['sri'] . '" crossorigin="anonymous"';
        }

        // Check for deferral
        if( array_key_exists( 'defer', $mods ) ){
            $extra .= ' defer';
        }

        // Check for async
        if( array_key_exists( 'async', $mods ) ){
            $extra .= ' async';
        }

        // Reutrn full script tag
        return '<script src="' . $src . '"' . $extra . '"></script>';

    }else{

        // Return the tag as-is otherwise to avoid breaking it
        return $tag;

    }

}
add_filter( 'script_loader_tag', 'foo_script_extras', 10, 3 ); 
```

在检查要添加到白名单句柄的属性方面，这不是一个非常通用的解决方案，我会使用类似“对于白名单句柄的每个属性，如果它是布尔值并且为真则添加键，否则添加它的价值”，但 SRI 需要两个属性（完整性和跨域），所以我暂时离开了它。

此外，如果您`/wp-includes/js/tinymce/`在页面标记中看不到某处（类似于@Mar 所说的，但确切的脚本名称可以在不同版本之间更改），那么该脚本不会加载！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-08T00:59:30.423

在我的情况下，禁用我所做的延迟 javascript 增强功能会`functions.php`导致此错误在加载编辑页面时消失。

# php - 我如何制作幻灯片，从数据库中获取信息（图像、标题、内容）？

> ID：14352411
> 
> 赞同：-1
> 
> 时间：2013-01-16T06:18:50.277
> 
> 标签：php, javascript, jquery, html, css

如何制作幻灯片，从网站 php、html 和 css 的数据库中获取信息（图像、标题、内容）？

我想为标题网站上的最后十个帖子（产品）或特色帖子（产品）制作幻灯片。怎么能做到这一点？谢谢。

所以这个脚本幻灯片，我想替换来自数据库的源（图像、标题、描述），来自表帖子。

```
<a href="#" class="show">
    <img src="images/flowing-rock.jpg" alt="Flowing Rock" width="580" height="360" title="" alt="" rel="<h3>Flowing Rock</h3>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. "/>
</a>

<a href="#">
    <img src="images/grass-blades.jpg" alt="Grass Blades" width="580" height="360" title="" alt="" rel="<h3>Grass Blades</h3>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "/>
</a>

<a href="#">
    <img src="images/ladybug.jpg" alt="Ladybug" width="580" height="360" title="" alt="" rel="<h3>Ladybug</h3>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."/>
</a>

<a href="#">
    <img src="images/lightning.jpg" alt="Lightning" width="580" height="360" title="" alt="" rel="<h3>Lightning</h3>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."/>
</a>

<a href="#">
    <img src="images/lotus.jpg" alt="Lotus" width="580" height="360" title="" alt="" rel="<h3>Lotus</h3>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo."/>
</a>

<a href="#">
    <img src="images/mojave.jpg" alt="Mojave" width="580" height="360" title="" alt="" rel="<h3>Mojave</h3>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt."/>
</a>

<a href="#">
    <img src="images/pier.jpg" alt="Pier" width="580" height="360" title="" alt="" rel="<h3>Pier</h3>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."/>
</a>

<a href="#">
    <img src="images/sea-mist.jpg" alt="Sea Mist" width="580" height="360" title="" alt="" rel="<h3>Sea Mist</h3>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."/>
</a>

<a href="#">
    <img src="images/stones.jpg" alt="Stone" width="580" height="360" title="" alt="" rel="<h3>Stone</h3>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."/>
</a> 
```

我想要发布链接图像，代码 php 从数据库中获取图像，以及标题和内容，但我想要 make (do{ wile())}，只获取最后十个产品。`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:25:25.750

好吧，您还没有提供有关数据库结构的任何详细信息……但让我们介绍一下基础知识……

首先，您需要执行一个返回包含 10 个项目的数组（作为数组）的查询。然后你需要创建一个输出所有内容的循环......

在 MySQLi 中，你会做这样的事情......

```
$objStmt = $this->objDb->prepare("
    SELECT image, imageAlt, imageTitle, imageRel FROM posts WHERE [some criteria is met];
");
$objStmt->bind_param([some params to bind]);

$objStmt->execute();
$objStmt->bind_result($image, $imageAlt, $imageTitle, $imageRel);

$arrItems = array();

while ($objRow = $objStmt->fetch()) {
    $arrItem = array();
    $arrItem['image'] = $image;
    $arrItem['imageAlt'] = $imageAlt;
    $arrItem['imageTitle'] = $imageTitle;
    $arrItem['imageRel'] = $imageRel;
    array_push($arrItems, $arrItem);
    unset($arrItem);
} 
```

接着...

```
 foreach ($arrItems as $arrItem) {
        printf('<a href="#" class="show"><img src="%s" alt="%s" width="580" height="360" title="%s" alt="" rel="%s"/></a>', $arrItem['image'], $arrItem['imageAlt'], $arrItem['imageTitle'], $arrItem['imageRel']);
    } 
```

# blend - 在 Blend 或 Blend for VS 2012 中进行 HTML5 CSS 设计

> ID：14352415
> 
> 赞同：0
> 
> 时间：2013-01-16T06:19:02.873
> 
> 标签：blend, blend-2012

我对Win8应用程序开发不太熟悉。VS 2012 Blend 主要是在 HTML5、CSS Windows 8 应用程序开发的背景下讨论的。我们正在尝试使用 ASP.NET web api 后端开发一个基于 HTML5 的网站。我想知道，用于 VS2012 的 Blend 是否可用作纯 HTML5 设计器/编辑器（如 Dreamweaver），还是仅用于 Windows 8 应用程序开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:23:09.043

似乎混合主要用于Windows 8应用程序开发

远离所见即所得的编辑器。从长远来看，它们只会带来麻烦。我建议使用 jetbrains 的软件。他们拥有出色的 PHP / ASP 编辑器和出色的调试器和 html 5/ css 验证器

# c# - 响应中出现错误

> ID：14352417
> 
> 赞同：1
> 
> 时间：2013-01-16T06:19:09.320
> 
> 标签：c#, asp.net, .net, dll

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;
using System.Web;

namespace Database_Updation
{
    class Program
    {
        static void Main(string[] args)
        {
            SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings["MyDbConn1"].ToString());

            SqlCommand cmd = new SqlCommand("SELECT [GUID] FROM [Source].[dbo].[Source_User]", cn);
            cn.Open();
            SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
            rdr.Read();
            Response.Write(rdr[0].ToString()); //read a value

        }
    }
} 
```

我收到错误`The name 'Response' does not exist in the current context`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:36:47.273

尝试使用

```
Console.Write(rdr[0].ToString()); //Write a value 
```

代替

```
Response.Write(rdr[0].ToString()); //Write a value 
```

希望它有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:25:13.113

**从您的代码来看，它是控制台应用程序，而不是使用响应并检查具有数据的数据读取器**

```
if(rdr.Read())
  Console.Writeln(rdr[0].ToString()); 
```

响应是 Web 应用程序中使用的对象，如果您愿意，您将在 asp.net Web 应用程序中获取此对象创建 Web 应用程序而不是控制台应用程序...您需要阅读控制台和 Web asp.net 应用程序之间的区别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T07:36:26.357

第一次检查是否添加了参考 System.Web.dll 并尝试 System.Web.HttpContext.Current.Response.Write(rdr[0].ToString());

# ios - 如何在ios中生成UUID

> ID：14352418
> 
> 赞同：80
> 
> 时间：2013-01-16T06:19:14.393
> 
> 标签：ios, objective-c

如何在目标 c 中获取 UUID，就像在 Java 中一样，UUID 用于生成表示 128 位值的唯一随机数。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-01-16T06:21:23.617

尝试：

```
CFUUIDRef udid = CFUUIDCreate(NULL);
NSString *udidString = (NSString *) CFUUIDCreateString(NULL, udid); 
```

**更新：**

从 iOS 6 开始，[有一种更简单的方法来生成 UUID](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSUUID_Class/Reference/Reference.html#//apple_ref/occ/clm/NSUUID/UUID)。和往常一样，有多种方法可以做到这一点：

创建一个 UUID 字符串：

```
NSString *uuid = [[NSUUID UUID] UUIDString]; 
```

创建一个 UUID：

```
[NSUUID UUID]; // which is the same as..
[[NSUUID] alloc] init]; 
```

创建一个类型的对象，`NSConcreteUUID`可以很容易地转换为`NSString`，看起来像这样：`BE5BA3D0-971C-4418-9ECF-E2D1ABCB66BE`

**文档中的注意事项：**

> **注意：** NSUUID 类不是与 CoreFoundation 的 CFUUIDRef 桥接的免费电话。如果需要，使用 UUID 字符串在 CFUUID 和 NSUUID 之间进行转换。不能保证两个 NSUUID 对象可以通过指针值进行比较（就像 CFUUIDRef 一样）；使用 isEqual: 比较两个 NSUUID 实例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-08T23:29:35.833

[Raptor 的](https://stackoverflow.com/a/14352436/382879)Swift 版本的回答：

```
let uuid = NSUUID().UUIDString 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T06:21:39.513

```
+ (NSString *)uniqueFileName
{
    CFUUIDRef theUniqueString = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUniqueString);
    CFRelease(theUniqueString);
    return [(NSString *)string autorelease];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T06:30:51.427

```
-(NSString*) myUUID()
{
    CFUUIDRef newUniqueID = CFUUIDCreate(kCFAllocatorDefault);
    CFStringRef newUniqueIDString = CFUUIDCreateString(kCFAllocatorDefault, newUniqueID);
    NSString *guid = (__bridge NSString *)newUniqueIDString;
    CFRelease(newUniqueIDString);
    CFRelease(newUniqueID);
    return([guid lowercaseString]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-06T19:19:06.077

您可以将 CFUUID 用于 iOS 5 或更低版本，将 NSUUID 用于 iOS 6 和 7。为了更安全，您可以将 UUID 存储在钥匙串中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-30T13:56:53.213

```
- (NSString*)generateGUID{
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return [NSString stringWithFormat:@"%@", string];
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-05-11T10:55:31.693

对于 Swift 5.0，使用这个，

```
 let uuidRef = CFUUIDCreate(nil)
    let uuidStringRef = CFUUIDCreateString(nil, uuidRef)
    let uuid = uuidStringRef as String? ?? "" 
```

# android - 在 ImageView 中加载图像时出现问题

> ID：14352422
> 
> 赞同：0
> 
> 时间：2013-01-16T06:19:36.753
> 
> 标签：android, wifi, android-wifi

我正在开发一个使用 wifi 将桌面的屏幕图像传输到 android 设备的应用程序。我能够将图像作为字节数组从 PC 传输到 Android 设备。但无法在 android 设备的 ImageView 组件中查看图像。以下是来自服务器（PC）和客户端（Android 设备）的两段代码：

**服务器**：

```
DataOutputStream ds=new DataOutputStream(soc.getOutputStream());
Rectangle rect= new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
Robot rb=new Robot();
img=rb.createScreenCapture(rect);
ByteArrayOutputStream baos=new ByteArrayOutputStream();
ImageIO.write(img, "PNG",baos);
byte[] image=baos.toByteArray();
baos.flush();
baos.close();
System.out.println(image.length);
ds.writeInt(image.length);
ds.write(image);
ds.flush();
ds.close(); 
```

**客户**：

```
DataInputStream bis=new DataInputStream(csoc.getInputStream());
int imgsize=bis.readInt();
byte[] img=new byte[imgsize];
int m;
while((m=bis.read())!=-1){
bis.read(img,0,img.length);
}
bis.close();
BitmapFactory.Options op=new BitmapFactory.Options();
op.inSampleSize=8;
Bitmap bmpim=BitmapFactory.decodeByteArray(img,0,img.length);
imv.setImageBitmap(BitmapFactory.decodeByteArray(img,0,img.length,op));//imv is ImageView object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:25:51.707

考虑到您的输入流是有效的，您也可以这样尝试

```
DataInputStream bis=new DataInputStream(csoc.getInputStream());
    imageView=new ImageView(this);
    imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    imageView.setAdjustViewBounds(true);
    imageView.setImageBitmap(BitmapFactory.decodeStream(bis));
// Add this imageView to existing parent layout
// parentLayout.addView(imageView); 
```

# php - 如何将 facebook 状态文本框附加到我的网站

> ID：14352424
> 
> 赞同：-1
> 
> 时间：2013-01-16T06:19:48.137
> 
> 标签：php, css, facebook, status

谁能帮帮我吗。我希望这个文本框在我的网站上可见，并且用户可以直接从网站更新他们的状态。先感谢您

![脸书状态文本框](../Images/54194af1b58e961973741cda00056f9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:25:28.993

facebook API 不提供这样的功能。

您可以制作我们自己的类似外观的文本框，并使用**提要**更新其状态。

[示例代码](http://www.9lessons.info/2011/03/facebook-graph-api-to-post-status.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:26:40.143

首先，您需要为您的站点创建一个新应用程序[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

然后在创建应用程序后，通过使用 API Key 和 App Secret 在 OAuth 协议的帮助下，您需要进行集成，如下所示

[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

然后包含这两个文件，然后对 Post 按钮执行操作。

# script# - 带有泛型的 ScriptSharp 索引器

> ID：14352425
> 
> 赞同：0
> 
> 时间：2013-01-16T06:19:55.103
> 
> 标签：script#

我有一个需要通用索引器的类，但是 script# 不能编译它。

```
[Imported]
public class SomeCollection<T>
{
    [IntrinsicProperty]
    public T this[int index] 
    {
        get { return null; }
        set { }
    }
} 
```

当 script# 编译它时，我希望“SomeCollection”类成为一个 javascript 数组。我只希望这个类+带有泛型的索引器，以便在我编写 c# 时更容易获得对象的正确智能感知。

我如何获得脚本#来编译上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:58:42.980

现在你必须在一个导入库中编写上面的类，即它不仅仅是一个导入类型，而是一个不被脚本编译的类型#。相反，它仅由 c# 编译器编译，而 script# 只是导入类型定义。

也就是说，为什么不直接使用 List<T> 或 T[]？是因为您只想要一个索引器而没有其他方法吗？

# c# - 我怎样才能得到日期的年份

> ID：14352426
> 
> 赞同：0
> 
> 时间：2013-01-16T06:19:59.693
> 
> 标签：c#, mongodb

我想从`mongodb`. 这是我的简单脚本：

```
DateTime sDate = DateTime.SpecifyKind(new DateTime(2013, 1, 15, 00, 00, 00), DateTimeKind.Utc);
DateTime eDate = DateTime.SpecifyKind(new DateTime(2014, 12, 31, 23, 59, 59), DateTimeKind.Utc);

string map = @ "function(){
                                emit (_id.OwnerId, _id.Date {
                                    Date: Value.Date.getYear(),
                                    PurchaseAmount: parseFloat(Value.PurchaseAmount),
                                    PurchaseReturnAmount: parseFloat(Value.PurchaseReturnAmount),
                                    TotalAmount: parseFloat(Value.TotalAmount)
                                });
                           }";
string reduce = @ "function (key, values) {
                        var outValue = {purchsaeAmount:0 , purchaseReturnAmount:0, totalAmount:0 }
                        values.forEach(function (value) {
                        outValue.PurchaseAmount +=parseFloat(value.PurchaseAmount);
                        outValue.PurchaseReturnAmount +=parseFloat(value.PurchaseReturnAmount);
                        outValue.TotalAmount +=parseFloat(value.TotalAmount);
                        });
                            return outValue;
                        }"; 
```

在地图中我只想得到年份，我怎样才能得到开始年份（2013）和结束年份（2014）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:25:35.300

```
var d = new Date();
var n = d.getFullYear();
var next_year = d.getFullYear()+1 
```

出去：

```
2013 2014 
```

# iphone - 我们在 instagram 注册时如何获取客户 ID 和客户密码..？

> ID：14352431
> 
> 赞同：0
> 
> 时间：2013-01-16T06:20:40.843
> 
> 标签：iphone, objective-c, ios6

我是 iPhone 开发者的初学者。我想获取客户 ID。我已经在 instagram 中注册，但在我的邮件 ID 中我无法获取客户 ID。所以，请给您任何适用于我的 Instagram 帐户的文件和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:31:10.410

在 instagarm 中获取客户端 ID 和客户端密码的步骤：

```
1\. After login click on manage client.
2.Then click on register a new client.
3.Complete the process and after that yu will get your id and secret. 
```

# javascript - javascript数组和对象

> ID：14352439
> 
> 赞同：1
> 
> 时间：2013-01-16T06:21:47.400
> 
> 标签：javascript, arrays, object

如何将两个数组转换为对象？

我的数组：

```
arr1.push(3,2,3,6,11,7);        
arr2.push("num1","num2","num3","num4","num5","num6"); 
```

如何将其转换为对象：

```
[{name:"num1", value:3}, {name:"num2", value:2}, {name:"num3", value:3}, {name:"num4", value:6}, {name:"num5", value:11}, {name:"num6", value:7}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:25:49.993

你可以试试

```
 var obj = [];

 for(var i = 0; i < arr1.length; i++){
     obj[i] = {name : arr1[i], value: arr2[i]};
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:26:08.700

```
var arr = [],
    cv  = -1;

while(++cv < arr1.length) {
  arr.push({name:arr2[cv], value:arr1[cv]});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:28:20.397

您基本上必须合并两个数组。假设两个数组的长度始终相同

```
arr1.push(3,2,3,6,11,7);        
arr2.push("num1","num2","num3","num4","num5","num6");

var obj  = [], i;
for( i=0; i<l; i++) {
    obj.push(arr1[i]+":"+arr2[i]);
}
// obj is now required object 
```

# google-analytics - 如何将事件与流量来源分层？

> ID：14352440
> 
> 赞同：0
> 
> 时间：2013-01-16T06:21:51.743
> 
> 标签：google-analytics

我是谷歌分析的新手，所以如果这是一个超级简单的问题，请原谅。我有一个网站，该网站有一个图标，可将用户重定向到移动应用程序的 App Store 页面。我已经设置了事件跟踪，因此 GA 会在用户点击链接时进行跟踪。

如何设置一个报告，显示进入我页面的唯一身份访问者的数量，然后这些访问者中有多少点击了下载图标？

基本上我正在寻找这样的自定义流量来源报告：

**来源**/**独立访客**/**发起下载事件的独立访客**

谷歌 / 100 / 20

直接 / 30 / 10

技术紧缩 / 20 /5

这样我就可以计算出每个流量源的下载率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:07:22.383

最简单的方法是创建自定义细分（高级细分 -> 新自定义细分 -> 包含事件操作 = ）并将其应用于来源 -> 所有流量报告。

或者您转到“自定义 -> 新自定义报告”，选择“平面表格”，输入“来源/媒介”作为维度，输入“唯一身份访问者”（或页面展示次数或其他）作为指标，并将您的事件操作作为过滤器。

# iphone - 在 xcode 4.6 中构建应用程序的问题

> ID：14352443
> 
> 赞同：1
> 
> 时间：2013-01-16T06:22:02.800
> 
> 标签：iphone, ipad

运行应用程序时遇到问题。我收到错误 Apple LLVM 编译器 4.2 错误

```
Command /Applications/Xcode46-DP4.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我退出并重新打开项目并单击清理

我也有同样的问题。任何人都可以建议我如何解决这个问题

提前致谢。

我正在使用 Xcode 4.6 IOS 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:30:16.060

尝试在 Xcode 的构建设置中停用预编译头文件的使用。这可能会解决问题。

# linux - 无法使用 linux sed 在文件的特定行插入文本

> ID：14352446
> 
> 赞同：0
> 
> 时间：2013-01-16T06:22:12.917
> 
> 标签：linux, sed

我想使用以下命令使用 linux sed 替换文件的第二行。

```
sed -i"" '2d' /usr/local/services/status.sh
sed -i '2i\testing' /usr/local/services/status.sh 
```

我的命令有错误吗？我查不出来。还有其他方法吗？

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:48:40.700

这可能对您有用：

```
sed -i '2c\testing' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:25:21.660

要替换第 2 行：

```
$ cat file
AIX
Unix
Linux
$ sed -i '2s/.*/testing/' file
$ cat file
AIX
testing
Linux 
```

在第二行之前插入：

```
$ sed -i '2i testing' file 
```

要将变量用作替代的一部分：

```
$ PID=2456
$ sed -i "2s/.*/testing $PID/" file 
```

# c# - 在 C# 和 Java 中实现 Triple DES 有什么区别吗？Java 给出错误的 IV 大小

> ID：14352447
> 
> 赞同：0
> 
> 时间：2013-01-16T06:22:15.050
> 
> 标签：c#, java, encryption, encryption-symmetric, tripledes

在我们的应用程序中，我们使用三重 DES 来加密和解密数据。我们在 C# 中有 enc/dec 代码，它使用 24 字节密钥和 12 字节 IV，可以正常工作。现在我们想在 java 中实现相同的代码，但是当我使用 12 字节 IV 时，我在 java 中得到一个错误，说 IV 大小错误。当我四处搜索时，我知道 java 使用 8 字节 IV。现在我很困惑，三重 DES 的 C# 和 JAVA 实现有何不同。还是我错过了什么？

这类似于我们的加密代码

 `````
class cTripleDES
{
// define the triple des provider
private TripleDESCryptoServiceProvider m_des = new TripleDESCryptoServiceProvider();

// define the string handler
private UTF8Encoding m_utf8 = new UTF8Encoding();

// define the local property arrays
private byte[] m_key;
private byte[] m_iv;

public cTripleDES(byte[] key, byte[] iv)
{
    this.m_key = key;
    this.m_iv = iv;
}

public byte[] Encrypt(byte[] input)
{
    return Transform(input,
           m_des.CreateEncryptor(m_key, m_iv));
}

public byte[] Decrypt(byte[] input)
{
    return Transform(input,
           m_des.CreateDecryptor(m_key, m_iv));
}

public string Encrypt(string text)
{
    byte[] input = m_utf8.GetBytes(text);
    byte[] output = Transform(input,
                    m_des.CreateEncryptor(m_key, m_iv));
    return Convert.ToBase64String(output);
}

public string Decrypt(string text)
{
    byte[] input = Convert.FromBase64String(text);
    byte[] output = Transform(input,
                    m_des.CreateDecryptor(m_key, m_iv));
    return m_utf8.GetString(output);
}

private byte[] Transform(byte[] input,
               ICryptoTransform CryptoTransform)
{
    // create the necessary streams
    MemoryStream memStream = new MemoryStream();
    CryptoStream cryptStream = new CryptoStream(memStream,
                 CryptoTransform, CryptoStreamMode.Write);
    // transform the bytes as requested
    cryptStream.Write(input, 0, input.Length);
    cryptStream.FlushFinalBlock();
    // Read the memory stream and
    // convert it back into byte array
    memStream.Position = 0;
    byte[] result = memStream.ToArray();
    // close and release the streams
    memStream.Close();
    cryptStream.Close();
    // hand back the encrypted buffer
    return result;
} 
```

}`  `这就是我们使用它的方式：

 `````
string IVasAString = "AkdrIFjaQrRQ";
byte[] iv = Convert.FromBase64String(IVasAString);
byte[] key = ASCIIEncoding.UTF8.GetBytes(KEY);

// instantiate the class with the arrays
cTripleDES des = new cTripleDES(key, iv);
string output = des.Encrypt("DATA TO BE ENCRYPTED"); 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:25:07.043

TripleDES 具有[64 位块大小](http://en.wikipedia.org/wiki/Triple_DES)。您需要在 C#中使用[8 字节 IV 。](https://stackoverflow.com/questions/6364219/tripledes-iv-for-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:39:33.550

得到了答案。来自 apache 通用框架（commons.codec.binary.Base64）的 decodeBase64 方法是必要的。感谢 mfanto 的提醒。！````

# javascript - 如何让类构造函数在nodejs中创建新实例时发出事件

> ID：14352449
> 
> 赞同：1
> 
> 时间：2013-01-16T06:22:35.240
> 
> 标签：javascript, node.js, eventemitter

我有一个班级 MyClass：

```
var MyClass = function(){
  events.EventEmitter.call(this);
  //...
};
util.inherits(MyClass, EventEmitter); 
```

我希望它在每次创建 MyClass 的新实例时发出一个“新”事件：

```
myClassInstance = new MyClass(); // emit a 'new' event from MyClass, not myClassInstance 
```

我想这样做，以便在创建 MyClass 的每个新实例时都有一个观察者来做一些事情。例如：

```
var MyClass = require('myclass');
MyClass.on('new', function(newInstance) {
  // do something with the new instance of MyClass
}; 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:02:33.763

你有两个选择：

第一种方法是*不*从 MyClass 发出，而是创建一个新的 EventEmitter 实例来代替发出。

```
var MyClassEmitter = new events.EventEmitter();
var MyClass = function(){
  MyClassEmitter.emit('new', this);
}; 
```

这是我会做的方式，因为它使用最少的花哨并且不太可能破坏。

第二种方式，直接使用`MyClass`，您需要将 EventEmitter 行为混合到您的构造函数中。

```
var MyClass = function(){
  MyClass.emit('new', this);
};

// Mix functions directly onto function.
Object.keys(events.EventEmitter.prototype).forEach(function(prop){
  MyClass[prop] = events.EventEmitter.prototype[prop];
});
// Trigger constructor in MyClass context.
events.EventEmitter.call(MyClass); 
```

# netty - 从 LengthFieldBasedFrameDecoder 返回的缓冲区太小

> ID：14352450
> 
> 赞同：2
> 
> 时间：2013-01-16T06:22:36.750
> 
> 标签：netty

我目前正在评估 Netty 以处理 Java 客户端与 C++ 服务器集成的套接字通信。消息传递协议具有以下结构 -

*   *(Type)(SubType)(Length)(MessageBody)*和大小
*   *<4bytes><4bytes><4bytes><...>* - 长度包括标题。

在 Netty api 之后，我将 LengthFieldBasedFrameDecoder 子类化以接收有效的完整数据包，然后根据接收到的类型对每个数据包进行解码。从我正在使用的文档中-

*   长度字段偏移 = 8
*   长度字段长度 = 4
*   lengthAdjustment = -12（= HDR1 + LEN 的长度，负数）
*   initialBytesToStrip = 0

它可以正常工作大约 5 分钟（我每 5 秒左右收到一条消息），然后解码事件包含一个比消息大小短得多的 ChannelBuffer。（我在崩溃前多次收到此消息）。然后我显然在我的内部解码代码中得到了一个 BufferUnderflowException 。难道我做错了什么？使用 LengthFieldBasedFrameDecoder 时，是否应该保证消息的缓冲区大小正确？

LengthFieldBasedFrameDecoder 类 -

```
public class CisPacketDecoder extends LengthFieldBasedFrameDecoder
{
    public CisPacketDecoder(int maxFrameLength, int lengthFieldOffset,
            int lengthFieldLength, int lengthAdjustment, int initialBytesToStrip) {
        super(maxFrameLength, lengthFieldOffset, lengthFieldLength, lengthAdjustment,
                initialBytesToStrip);       
    }

    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buf)
            throws Exception 
    {       
        CisMessage message = null;      
        int type = buf.getInt(0); //Type is always first int
        CisMessageType messageType = CisMessageType.fromIntToType(type);
        if(messageType != null)
        {
            message = messageType.getObject();
            if(message != null)
            {
                message.decode(buf.toByteBuffer());
            }
            else
            {
                System.out.println("Unable to create message for type " + type);
            }
        }

        //mark the Channel buf as read by moving reader index
        buf.readerIndex(buf.capacity());
        return message;
    }

} 
```

并在这里实例化。

```
public class PmcPipelineFactory implements ChannelPipelineFactory 
{

    @Override
    public ChannelPipeline getPipeline() throws Exception
    {
        ChannelPipeline pipeline = Channels.pipeline();

        pipeline.addLast("encoder", new CisPacketEncoder());
        pipeline.addLast("decoder", new CisPacketDecoder(1024, 8, 4, -12, 0));      
        pipeline.addLast("handler", new MsgClientHandler());
        return pipeline;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:57:04.490

您需要调用 super.decode(..) 并在 decode(..) 方法中对返回的 ChannelBuffer 进行操作。

所以它会是这样的；

```
public class CisPacketDecoder extends LengthFieldBasedFrameDecoder {
    public CisPacketDecoder(int maxFrameLength, int lengthFieldOffset,
            int lengthFieldLength, int lengthAdjustment, int initialBytesToStrip) {
        super(maxFrameLength, lengthFieldOffset, lengthFieldLength, lengthAdjustment,
            initialBytesToStrip);       
    }

    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buf)
        throws Exception {

        // THIS IS IMPORTANT!!!!!
        ChannelBuffer decoded = (ChannelBuffer) super.decode(ctx, channel, buf);
        if (decoded == null) {
            return null;
        }

        // NOW ONLY OPERATE ON decoded 
        CisMessage message = null;      
        int type = decoded.getInt(0); //Type is always first int
        CisMessageType messageType = CisMessageType.fromIntToType(type);
        if(messageType != null) {
            message = messageType.getObject();
            if(message != null) {
                message.decode(decoded.toByteBuffer());
            } else {
                System.out.println("Unable to create message for type " + type);
            }
        }
        return message;
    }
} 
```

请务必检查大写注释。

# php - 当我尝试在 magento adminhtml 中运行 sql 查询时，它会提供数据，但是我在其他地方遇到了 magento 错误

> ID：14352455
> 
> 赞同：0
> 
> 时间：2013-01-16T06:22:47.237
> 
> 标签：php, zend-framework, magento

这是我的代码位于 app\design\adminhtml\default\default\template\customer\tab\addresses.phtml

```
 $arrParams = $this->getRequest()->getParams();
    $read = Mage::getSingleton('core/resource')->getConnection('core_read');
    $query = 'SELECT entity_id, parent_id, is_active FROM ' .    Mage::getSingleton('core/resource')->getTableName('customer_address_entity').'
    WHERE parent_id = '.$arrParams['id'];
    $results1 = $read->fetchAll($query); 
```

数据是正确的，但是当我尝试在后端创建新客户时出现错误

```
(SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:41:03.123

$arrParams['id'] 是问题所在。它在其他位置为空。

谢谢

# api - Yammer api：按组获取消息

> ID：14352458
> 
> 赞同：5
> 
> 时间：2013-01-16T06:22:53.843
> 
> 标签：api, rest, yammer

以下是 yammer api 文档：http: [//developer.yammer.com/restapi/](http://developer.yammer.com/restapi/)

我在这里错过了什么吗？如何获取特定组的消息？似乎有很多未记录的功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T22:37:18.697

我同意文件似乎缺乏。

也许：

```
https://www.yammer.com/api/v1/messages/in_group/<<GROUPID>>.json?access_token=<<ACCESSTOKEN>>" 
```

通过[http://balamurugankailasam.blogspot.com/2012/10/displaying-yammer-feed-private-group-in.html](http://balamurugankailasam.blogspot.com/2012/10/displaying-yammer-feed-private-group-in.html)

* * *

嵌入式提要支持此功能：

> *   feedType – 要显示的 Feed 类型：组、主题、用户或 Open Graph 对象
> *   feedID – 组、主题或用户提要的 ID（不适用于 Open Graph 或我的提要）

**例子**

```
<script data-app-id="hyB2pTvrL36Y50py8EWj6A" src="https://assets.yammer.com/platform/yam.js"></script>
<script>
  yam.connect.embedFeed(
      { container: '#embedded-feed',
        network: 'fourleaf.com',
        feedType: 'group',           // can be 'group', 'topic', or 'user'          
        feedId: '123'                // feed ID from the instructions above
  });    
</script>    
<div id="embedded-feed"></div> 
```

通过[http://developer.yammer.com/connect/](http://developer.yammer.com/connect/)

# php - 奇怪的 jQuery AJAX 成功函数行为

> ID：14352459
> 
> 赞同：0
> 
> 时间：2013-01-16T06:22:55.063
> 
> 标签：php, jquery

我有一个与 jQuery 的 AJAX 方法一起使用的 PHP 联系表单，但是使用“成功：”函数得到了非常奇怪的结果。

这是 PHP 联系表：

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$number = $_POST['number'];
$message = $_POST['message'];
$msg = "Name: $name\n";
$msg .= "Email: $email\n";
$msg .= "Number: $number\n\n";
$msg .= "$message\n";
$recipient = "[recipients here]";
$subject = "Contact Us - $name";
$mailheaders = "From:$email";
$success = mail($recipient, $subject, $msg, $mailheaders);

if ($success) {
    echo ('Correct');
} else {
    echo ('Failed');
}
header("Location: [website address here]");
?> 
```

这是 jQuery AJAX 方法：

```
$("#contact-form").submit(function (event) {
    $.ajax({
        type: "POST",
        url: '/lib/mailer.php',
        data: {
            name: $("#name").val(),
            email: $("#email").val(),
            number: $("#number").val(),
            message: $("#message").val()
        },
        success: function (data) {
            //$("#contact-form")[0].reset();
            alert(data);

            if(data === 'Correct') {
                alert('Data is correct');
            }
            else if (data !== 'Correct') {
                alert('Data is not equal to correct');
            }
            else {
                alert('Else statement');
            }
        }
    });

    event.preventDefault();
    return false;
}); 
```

现在，当我填写表格并单击提交时，PHP 接收到正确的数据并成功发送电子邮件，并回显“正确”。弹出一个警告说“正确”。但是，下一个警报不是“数据正确”，而是“数据不等于正确”。

我不知道这里发生了什么。我假设我一定在某个地方犯了一个非常愚蠢的错误，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:28:06.230

您不能从`ajax`呼叫中重定向。如果您正在使用`header`函数，它将在 ajax 成功中打印许多标题数据。

标题数据是`Strange Result`你得到的......

消除`header("Location: [website address here]");`

如果您想在成功后重定向，请在`ajax success`块中执行此操作

```
if (data == "Correct") {
    window.location = '[website addresss here]';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:31:19.617

它与单词不匹配。利用

```
if($.trim(data) == 'Correct') 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:41:34.450

`header("Location: [website address here]")`从您的`mailer.php`页面中删除

和

```
$.ajax({
        type: "POST",
        url: '/lib/mailer.php',
        data: {
            name: $("#name").val(),
            email: $("#email").val(),
            number: $("#number").val(),
            message: $("#message").val()
        },
        async:false, //  <---- Add this fella here
        success: function (data) {
            //$("#contact-form")[0].reset();
            alert(data);

            if(data === 'Correct') {
                alert('Data is correct');
            }
            else if (data != 'Correct') {
                alert('Data is not equal to correct');
            }
            else {
                alert('Else statement');
            }
        }
    }); 
```

# c# - 寻找可以在其中包含剪辑动画图像的 Windows 8 XAML 控件

> ID：14352460
> 
> 赞同：1
> 
> 时间：2013-01-16T06:22:56.470
> 
> 标签：c#, xaml, animation, windows-8, windows-runtime

我正在开发 Windows 商店应用程序。在其中一个应用程序中，我希望拥有从内部显示单个动画图像的容器控件，而不是图像控件（类似于 Windows 8 上的 News Bento 应用程序欢迎屏幕）。我最接近的是来自 WinRT XAML 工具包的 AnimatingContainer 控件，但它似乎不适用于图像（至少在我的情况下）。任何有关如何使用此控件为图像或任何其他解决方案设置动画的帮助将不胜感激。下面是我的 XAML 代码。如果我取消注释文本块并注释图像，文本块将显示为动画。但反过来是不正确的。

```
<Controls1:AnimatingContainer HorizontalAlignment="Left" Height="311" Margin="163,23,0,0" RadiusX="25"
            RadiusY="10"
            Duration="0:0:10" 
            VerticalAlignment="Top" Width="461">  
        <!--<TextBlock Text="Sume Rossini" FontSize="66"/>-->
        <Image Source="Assets/Davy_Jones.jpg" Width="300" Height="500"/>
    </Controls1:AnimatingContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:31:27.007

很可能没有。您需要自己编写一个以满足您的特定要求。使用 Blend 创建动画。提出更具体的问题，您可能会得到实施它的帮助。

# c# - 将gridview导出到word并在没有用户交互的情况下保存文件

> ID：14352461
> 
> 赞同：0
> 
> 时间：2013-01-16T06:23:03.143
> 
> 标签：c#, asp.net, vb.net

我正在将 gridview 导出到 ms word。这是我成功完成的，但我不想向用户显示要求用户打开文件或将文件保存在硬盘驱动器上的 MS 字提示。我只想将 gridview 导出到 word 并保存在 c:\ 驱动器上，无需任何用户交互，因此一旦用户按下导出按钮，gridview 就会导出到 ms word 并且 word 文件会保存到硬盘驱动器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:41:15.997

我不确定这是否可能，因为用户 C:\ 驱动器与您的 C:\ 驱动器不同。由于您要保存到用户根目录，因此可能存在一些安全隐患，但要回答您的问题，请尝试使用 IO fileStream 将文档保存为 *.doc 扩展名。

[从 MSDN 试试这个](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:37:58.290

如果要保存在客户端计算机上，则不允许。出于安全考虑，用户必须接受下载。

# android - 层次查看器不工作

> ID：14352467
> 
> 赞同：4
> 
> 时间：2013-01-16T06:23:27.560
> 
> 标签：android, sdk, adb, hierarchyviewer

当我运行hierarchyviewer时，我收到警告

`SWT folder '/home/sharanu/work/android-ics-source/prebuilt/linux-x86_64/swt/swt.jar' does not exist. Please export ANDROID_SWT to point to the folder containing swt.jar for your platform.`

然后我在设置`ANDROID_SWT`仍然相同的错误后尝试。但早些时候`hierarchyviewer`工作正常。我不确定为什么它现在不起作用。

请看图片。![在此处输入图像描述](../Images/f203060aa47839eb9f1b378880e3849d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T09:07:24.060

我刚刚删除了`ANDROID_SWT`变量`~/.bashrc`，它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T00:59:51.730

我面临着类似的问题。我让 ANDROID_SWT 指向位于 android sdk 文件夹中的 swt.jar，它开始工作了。

脚步：

i) 找到 swt.jar 的位置。在您的 SDK 文件夹中，执行

```
find . -name swt.jar 
```

ii) 并将其路径导出到环境变量 ANDROID_SWT 中。

```
export ANDROID_SWT= <path from step 1> 
```

在我的情况下，以下工作：

```
export ANDROID_SWT=${ANDROID_SDK}/tools/lib/x86_64/ 
```

# performance - 是否听说过在每个请求上更改 cookie 值

> ID：14352471
> 
> 赞同：0
> 
> 时间：2013-01-16T06:24:06.757
> 
> 标签：performance, cookies

假设我们在每个请求的 cookie 中设置了一个“最后一个请求”时间戳。是否有额外的无意中听到通过网络发送更多数据来更新这个，或者cookie是否必须在每个请求上通过网络发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:26:18.913

它们仅在每次请求时从客户端发送，因此您将从服务器获得少量额外开销。

您可以通过查看 Chrome 的“网络”选项卡中的标头或带有 Firebug 的 Firefox（或 livehttpheaders）来测试这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:25:42.133

无论如何都必须发送 cookie。

# sql - 分区查询上的 Row_Number()

> ID：14352472
> 
> 赞同：2
> 
> 时间：2013-01-16T06:24:35.783
> 
> 标签：sql, tsql

我有以下查询：

```
declare @temp1 table
(ID1 int not null,
 ID2 int not null)

set nocount off

insert into @temp1 values(1453,931)
insert into @temp1 values(1454,931)
insert into @temp1 values(1455,931)

insert into @temp1 values(2652,1101)
insert into @temp1 values(2653,1101)
insert into @temp1 values(2654,1101)
insert into @temp1 values(2655,1101)
insert into @temp1 values(2656,1101)

insert into @temp1 values(3196,1165)

insert into @temp1 values(3899,1288)
insert into @temp1 values(3900,1288)
insert into @temp1 values(3901,1288)
insert into @temp1 values(3902,1288)

--select * from @temp1

select ID1,ID2, ROW_NUMBER() over(partition by ID2 order by ID1) as RowNum1
from @temp1 
```

我现在要做的是创建一个新列，将所有 ID2 组合在一起。即 ID2 的 931 在新列中应该有值 1，1101 应该有 2，1165 应该是 3，最后所有 1288 应该有 4。 .. 我可以得到帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T06:31:31.097

您可以使用`DENSE_RANK()`来获得结果。它返回结果集分区内的行排名，排名中没有任何间隙。行的排名是相关行之前的不同排名数的加一。有关详细信息，请参阅链接[DENSE_RANK (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173825.aspx)。请试试：

```
select ID1, ID2, DENSE_RANK() over(order by ID2) as RowNum1
from @temp1 
```

# iphone - 如何从 url 为直播的摄像机播放直播

> ID：14352473
> 
> 赞同：1
> 
> 时间：2013-01-16T06:24:40.293
> 
> 标签：iphone, ios, objective-c

我正在尝试从服务器播放实时流视频，例如 opentok 或 wowza 媒体服务器。如何实施请分享您的知识..

> > 一个 IP 摄像头录制视频并将其发送到服务器和服务器广播它，这是在 iphone 中接收和播放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:03:23.700

您可以使用 MPMovieplayerviewcontroller。它非常适合流式传输音频/视频。我也是

使用它在我的一个应用程序中流式传输音频，而且它看起来像 iPhone 的默认播放器。

好的，这是我在项目中使用此播放器的编码：

```
 NSString *geturl = [[radiotablearray objectAtIndex:btntag]objectForKey:@"iurl"];
    NSLog(@"geturl..%@",geturl);
    NSURL *fileURL=[NSURL URLWithString:geturl];
    NSLog(@"fileURL..%@",fileURL);
    moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];
    [moviePlayerController.moviePlayer prepareToPlay];
    moviePlayerController.moviePlayer.shouldAutoplay=YES;
    moviePlayerController.view.frame = self.view.frame;
    [self presentMoviePlayerViewControllerAnimated:moviePlayerController];
[moviePlayerController.moviePlayer play]; 
```

还要在 App 中添加 mediaplayer 和 Avfoundation 框架。并在 .h 文件中添加或导入这两个：

```
#import <MediaPlayer/MediaPlayer.h>
#import <AVFoundation/AVFoundation.h> 
```

& 将`#import <MediaPlayer/MediaPlayer.h>`其导入 .m 文件。还在 .h 文件中制作如下播放器的属性：

```
MPMoviePlayerViewController *moviePlayerController;
 @property(strong,retain)  MPMoviePlayerViewController *moviePlayerController; 
```

并在您想要的地方添加方法，但也可以根据您的需要更改代码我只是将我的实现代码发送给您，您只需根据您的要求更改它。祝你好运。

# c# - 如何从 GTK 中的 TreeView 中删除多行#

> ID：14352476
> 
> 赞同：3
> 
> 时间：2013-01-16T06:25:11.293
> 
> 标签：c#, mono, gtk, gtk#

在单声道 GTK# 中从 TreeView 中删除多行最近让我有点吃惊，答案不是一个快速的谷歌搜索，所以我在这里发布这个问题。使用 TreeView (TreeModelSort) 进行排序时，删除多行会带来额外的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:25:11.293

以下函数可以删除未实现花哨的 TreeModelSort 或 TreeModelFilter 的普通 TreeView 上的多个选定行：

```
private void RemoveSelectedRows(TreeView treeView, ListStore listStore)
{
    TreeIter iter;

    TreePath[] treePath = treeView.Selection.GetSelectedRows();

    for (int i  = treePath.Length; i > 0; i--)
    {
        listStore.GetIter(out iter, treePath[(i - 1)]);

        string value = (string)listStore.GetValue(iter, 0);
        Console.WriteLine("Removing: " + value);

        listStore.Remove(ref iter);
    }
} 
```

下一个函数可以删除实现 TreeModelSort 的 TreeView 上的多个选定行（如果您的 TreeView 使用 TreeModelFilter，则可以应用类似的逻辑）：

```
private void RemoveSelectedRows(TreeView treeView, ListStore listStore, TreeModelSort treeModelSort)
{
    TreeModel model;
    TreeIter iter;

    TreePath[] treePath = treeView.Selection.GetSelectedRows(out model);

    for (int i  = treePath.Length; i > 0; i--)
    {
        model.GetIter(out iter, treePath[(i - 1)]);

        string value = (string)model.GetValue(iter, 0);
        Console.WriteLine("Removing: " + value);

        TreeIter childIter = treeModelSort.ConvertIterToChildIter(iter);
        listStore.Remove(ref childIter);
    }
} 
```

如果有人有更好的方法或在我的解决方案中看到任何错误，请发布修复，谢谢！

# java - 如何从 HQL 查询和结果中获取列名到 json，其中键为列

> ID：14352479
> 
> 赞同：0
> 
> 时间：2013-01-16T06:25:15.247
> 
> 标签：java, json, hql, gson

如何将hql查询结果直接转换为Json。我试过这个

```
 Query query=session.createQuery(SQLUtilsConstants.fQuery);
    query.setParameter(StringConstants.TRPID, trId);
    List list=query.list();
            gson = new Gson();
            String jsonStudents = gson.toJson(list);
           System.out.println("jsonStudents = " + jsonStudents); 
```

当我转换时。我得到一个带有不带属性的值列表的 json。查询结果包含来自多个表的数据。我想生成以属性作为键和值作为输出的结果。如果查询包含客户 ID 和客户名称，那么我需要这样的结果.

```
 [{"customerid" : "abc", "customername" : "rose"}] 
```

但是使用上面的代码我会变成这样.. [{"abc", "rose"}]

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:57:30.580

您应该创建一个地图，无论您想要什么。然后将地图解析为json。

> ```
> Map<String,WhatEver> newMap = new HashMap<String,WhatEver>();
> foreach(WhatEver item: list){
>       //create your map how ever you like it to be 
> ```
> 
> }
> 字符串 jsonStudents = gson.toJson(newMap);

# c# - .net framework 4 中的高内存问题，但在 framework 4.5 中没有

> ID：14352480
> 
> 赞同：8
> 
> 时间：2013-01-16T06:25:18.247
> 
> 标签：c#, garbage-collection

我有一段消耗大量内存的代码（.net 4）：

```
struct Data
{
    private readonly List<Dictionary<string,string>> _list;

    public Data(List<Dictionary<string,string>> List)
    {
        _list = List;
    }

    public void DoWork()
    {
        int num = 0;
        foreach (Dictionary<string, string> d in _list)
        {
            foreach (KeyValuePair<string, string> kvp in d)
                num += Convert.ToInt32(kvp.Value);
        }

        Console.Write(num);

        //_list = null;
    }
}

class Test1
{
    BlockingCollection<Data> collection = new BlockingCollection<Data>(10);
    Thread th;

    public Test1()
    {
        th = new Thread(Work);
        th.Start();
    }

    public void Read()
    {
        List<Dictionary<string, string>> l = new List<Dictionary<string, string>>();
        Random r = new Random();

        for (int i=0; i<100000; i++)
        {
            Dictionary<string, string> d = new Dictionary<string,string>();
            d["1"]  = r.Next().ToString();
            d["2"]  = r.Next().ToString();
            d["3"]  = r.Next().ToString();
            d["4"]  = r.Next().ToString();

            l.Add(d);
        }

        collection.Add(new Data(l));
    }

    private void Work()
    {
        while (true)
        {
            collection.Take().DoWork();
        }
    }
}

class Program
{
    Test1 t = new Test1();
    static void Main(string[] args)
    {
        Program p = new Program();
        for (int i = 0; i < 1000; i++)
        {
            p.t.Read();
        }
    }
} 
```

阻塞收集的大小是 10。据我所知，gc 应该在其 DoWork 方法完成后立即收集“数据”结构中的引用。但是，内存一直在快速增加，直到程序崩溃或自行关闭，这在低端机器上更常见（在某些机器上内存不会增加）。此外，当我添加以下行时“_list = null;” 在 DoWork 方法结束并将“数据”转换为类（来自结构）时，内存不会增加。

这里可能发生什么。我在这里需要一些建议。

更新：问题出现在安装了 .net framework 4（**未**安装 4.5）的机器上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T00:00:34.243

我在我的电脑上试过了，结果如下：

1.  使用 Data 作为类并且`_list = null`在 DoWork 结束时没有 -> 内存增加
2.  使用 Data 作为结构并且`_list = null`在 DoWork 结束时没有 -> 内存增加
3.  使用 Data 作为类并`_list = null`在 DoWork 结束时使用 -> 内存稳定在 150MB
4.  使用 Data 作为结构并`_list = null`在 DoWork 结束时使用 -> 内存增加

在被评论的情况下，`_list = null`看到这个结果并不奇怪。因为还有对_list的引用。即使`DoWork`不再调用，GC 也不知道。

在第三种情况下，垃圾收集器具有我们期望的行为。

对于第四种情况，`Data`当您将 BlockingCollection 作为 in 的参数传递时，BlockingCollection 会存储它`collection.Add(new Data(l));`，但是接下来会做什么呢？

1.  一个新的结构`data`是用`data._list`等于创建的`l`（即类型`List`是一个类（引用类型），`data._list`在结构中等于`Data`的地址`l`）。
2.  然后你将它作为参数传递，`collection.Add(new Data(l));`然后它会创建一个`data`在 1 中创建的副本。然后`l`复制地址。
3.  阻塞集合将您的`Data`元素存储在一个数组中。
4.  `DoWork`执行时`_list = null`，它仅在当前结构中删除对有问题的引用`List`，而不是在存储在`BlockingCollection`.
5.  然后，除非您清除`BlockingCollection`.

## 如何发现问题？

要查找内存泄漏问题，建议您使用 SOS ( [http://msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx) )。

在这里，我介绍一下我是如何发现这个问题的。由于这个问题不仅涉及堆，还涉及堆栈，因此使用堆分析（如这里）并不是找到问题根源的最佳方法。

**1**放一个断点`_list = null`（因为这条线应该可以工作！！！）

**2**执行程序

**3**到达断点时，加载SOS调试工具（在即时窗口中写入“.load sos”）

**4**问题似乎来自`private List> _list`正确处理的注释。所以我们将尝试找到该类型的实例。输入`!DumpHeap -stat -type List`即时窗口。结果：

```
total 0 objects
Statistics:
      MT    Count    TotalSize Class Name
0570ffdc        1           24 System.Collections.Generic.List1[[System.Threading.CancellationTokenRegistration, mscorlib]]
04f63e50        1           24 System.Collections.Generic.List1[[System.Security.Policy.StrongName, mscorlib]]
00202800        2           48 System.Collections.Generic.List1[[System.Collections.Generic.Dictionary2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib]]
Total 4 objects 
```

有问题的类型是最后一种`List<Dictionary<...>>`。有 2 个实例，MethodTable（一种类型的引用）是`00202800`.

**5**要获取参考，请键入`!DumpHeap -mt 00202800`。结果：

```
 Address       MT     Size
02618a9c 00202800       24     
0733880c 00202800       24     
total 0 objects
Statistics:
      MT    Count    TotalSize Class Name
00202800        2           48 System.Collections.Generic.List1[[System.Collections.Generic.Dictionary2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib]]
Total 2 objects 
```

显示了两个实例及其地址：`02618a9c`和`0733880c`

**6**要查找它们是如何引用的：键入`!GCRoot 02618a9c`（对于第一个实例）或`!GCRoot 0733880c`（对于第二个实例）。结果（我没有复制所有结果，但保留了重要部分）：

```
ESP:3bef9c:Root:  0261874c(ConsoleApplication1.Test1)->
  0261875c(System.Collections.Concurrent.BlockingCollection1[[ConsoleApplication1.Data, ConsoleApplication1]])->
  02618784(System.Collections.Concurrent.ConcurrentQueue1[[ConsoleApplication1.Data, ConsoleApplication1]])->
  02618798(System.Collections.Concurrent.ConcurrentQueue1+Segment[[ConsoleApplication1.Data, ConsoleApplication1]])->
  026187bc(ConsoleApplication1.Data[])->
  02618a9c(System.Collections.Generic.List1[[System.Collections.Generic.Dictionary2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib]]) 
```

对于第一种情况，并且：

```
Scan Thread 5216 OSTHread 1460
ESP:3bf0b0:Root:  0733880c(System.Collections.Generic.List1[[System.Collections.Generic.Dictionary2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib]])
Scan Thread 4960 OSTHread 1360
Scan Thread 6044 OSTHread 179c 
```

对于第二个（当分析的对象没有更深的根时，我认为这意味着它在堆栈中有引用）。

看`026187bc(ConsoleApplication1.Data[])`应该是理解发生了什么的好方法，因为我们终于看到了我们的`Data`类型。

**7**要显示对象的内容，请使用`!DumpObj 026187bc`，或者在这种情况下，因为它是一个数组，请使用`!DumpArray -details 026187bc`。结果（部分）：

```
Name:        ConsoleApplication1.Data[]
MethodTable: 00214f30
EEClass:     00214ea8
Size:        140(0x8c) bytes
Array:       Rank 1, Number of elements 32, Type VALUETYPE
Element Methodtable: 00214670
[0] 026187c4
    Name:        ConsoleApplication1.Data
    MethodTable: 00214670
    EEClass:     00211ac4
    Size:        12(0xc) bytes
    File:        D:\Development Projects\Centive Solutions\SVN\trunk\CentiveSolutions.Renderers\ConsoleApplication1\bin\Debug\ConsoleApplication1.exe
    Fields:
              MT    Field   Offset                 Type VT     Attr    Value Name
        00202800  4000001        0     ...lib]], mscorlib]]      0     instance     02618a9c     _list
[1] 026187c8
    Name:        ConsoleApplication1.Data
    MethodTable: 00214670
    EEClass:     00211ac4
    Size:        12(0xc) bytes
    File:        D:\Development Projects\Centive Solutions\SVN\trunk\CentiveSolutions.Renderers\ConsoleApplication1\bin\Debug\ConsoleApplication1.exe
    Fields:
              MT    Field   Offset                 Type VT     Attr    Value Name
        00202800  4000001        0     ...lib]], mscorlib]]      0     instance     6d50950800000000     _list
[2] 026187cc
    Name:        ConsoleApplication1.Data
    MethodTable: 00214670
    EEClass:     00211ac4
    Size:        12(0xc) bytes
    File:        D:\Development Projects\Centive Solutions\SVN\trunk\CentiveSolutions.Renderers\ConsoleApplication1\bin\Debug\ConsoleApplication1.exe
    Fields:
              MT    Field   Offset                 Type VT     Attr    Value Name
        00202800  4000001        0     ...lib]], mscorlib]]      0     instance     6d50950800000000     _list 
```

这里我们有`_list`数组的前 3 个元素的属性值：`02618a9c`、`6d50950800000000`、`6d50950800000000`。我怀疑`6d50950800000000`是“空指针”。

在这里，我们有您问题的答案：有一个数组（由阻塞收集引用（参见 6.））直接包含`_list`我们希望垃圾收集器完成的地址。

**8**为确保在执行该行时它不会发生变化`_line = null`，请执行该行。

**笔记**

正如我所提到的，使用 DumpHeap 并不适合当前的任务隐含值类型。为什么？因为值类型不在堆中，而是在堆栈中。看到这里很简单：`!DumpHeap -stat -type ConsoleApplication1.Data`在断点上试试。结果：

```
total 0 objects
Statistics:
      MT    Count    TotalSize Class Name
00214c00        1           20 System.Collections.Concurrent.ConcurrentQueue`1[[ConsoleApplication1.Data, ConsoleApplication1]]
00214e24        1           36 System.Collections.Concurrent.ConcurrentQueue`1+Segment[[ConsoleApplication1.Data, ConsoleApplication1]]
00214920        1           40 System.Collections.Concurrent.BlockingCollection`1[[ConsoleApplication1.Data, ConsoleApplication1]]
00214f30        1          140 ConsoleApplication1.Data[]
Total 4 objects 
```

有一个数组`Data`但没有`Data`。因为 DumpHeap 只分析堆。然后`!DumpArray -details 026187bc`，指针仍然在这里，具有相同的值。而且，如果您在执行该行之前和之后比较我们之前（与`!GCRoot`）找到的两个实例的根，则只会删除行。实际上，对列表的引用仅从值类型的 1 个副本中删除`Data`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T01:35:38.030

如果您阅读[Stephen Toub 对](http://blogs.msdn.com/b/pfxteam/archive/2012/05/08/concurrentqueue-lt-t-gt-holding-on-to-a-few-dequeued-elements.aspx)如何`ConcurrentQueue`工作的解释，那么这种行为是有道理的。`BlockingCollection`默认情况下使用`ConcurrentQueue`，它将其元素存储在 32 元素段的链表中。

出于并发访问的目的，链表中的元素永远不会被覆盖，因此它们不会被取消引用，直到消耗完整个 32 段的最后一个。由于您有 10 个元素的有限容量，假设您已经生产了 41 个元素并消耗了 31 个元素。这意味着您将拥有一个包含 31 个已消耗元素的片段加上一个排队元素，以及另一个包含剩余 9 个元素的片段。此时所有 41 个元素都被引用，所以如果每个元素都是 25MB，那么您的集合将占用 1GB！一旦下一个项目被消耗，头部段中的所有 32 个元素都将被取消引用并且可以被收集。

您可能认为队列中只需要 10 个元素，非并发队列就是这种情况，但不允许一个线程在另一个线程正在生产或消费时枚举队列中的元素元素。

.Net 4.5 框架没有泄漏的原因是，只要没有人枚举队列，它们就会将行为更改为元素一生成就清空。如果您开始枚举`collection`，即使使用 .Net 4.5 框架，您也应该会看到内存泄漏。

当你有 a 时设置`_list = null`起作用的原因`class`是你正在创建一个“盒子”包装器，它允许你在每个使用它的地方取消引用列表。在本地变量中设置值会更改队列引用的同一副本。

当您拥有 a 时设置`_list = null`不起作用的原因`struct`是您只能更改 a 的副本`struct`。它位于该队列段中的“原始”版本实际上是不可变的，因为`ConcurrentQueue`不提供更改它的方法。换句话说，您只更改本地变量中值的副本，而不是更改队列中的副本。

# java - 从 csv 文件中读取 unicode 字符

> ID：14352481
> 
> 赞同：7
> 
> 时间：2013-01-16T06:25:20.520
> 
> 标签：java, file-io, unicode

我有一个`csv file`包含英语单词的单词，然后是他们的印地语翻译。我正在尝试读取 csv 文件并对其进行进一步处理。csv 文件如下所示：

```
English,,Hindi,,,  
,,,,,  
Cat,,बिल्ली,,,  
Rat,,चूहा,,,  
abandon,,छोड़ देना,त्याग देना,लापरवाही की स्वतन्त्रता,जाने देना 
```

我正在尝试逐行读取 csv 文件并显示已写入的内容。代码片段（`Java`）如下：

```
 //Step 2\. Read csv file and get the string.
            FileInputStream fis = null;
            BufferedReader br = null;
            try {
                fis = new FileInputStream(new File(csvFile));
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            boolean startSeen = true;
            if(fis != null) {
                try {
                    br = new BufferedReader(new InputStreamReader(fis, "UTF-8"));
                } catch (UnsupportedEncodingException e2) {
                    // TODO Auto-generated catch block
                    e2.printStackTrace();
                    System.out.print("Unsupported encoding");
                }
                String line = null;
                if(br != null) {
                    try {
                        while((line = br.readLine()) != null) {
                            if(line.contains("English") == true) {
                                startSeen = true;
                            }

                            if((startSeen == true) && (line != null)) {
                                StringBuffer sbuf = new StringBuffer();
                                //Step 3\. Parse the line.
                                sbuf.append(line);
                                System.out.println(sbuf.toString());
                            }
                        }
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                }  
} 
```

但是，我得到以下输出：

```
English,,Hindi,,,
,,,,,
Cat,,??????,,,
Rat,,????,,,
abandon,,???? ????,????? ????,???????? ?? ???????????,???? ???? 
```

我的 Java 不是那么好，虽然我已经阅读了许多关于 SO 的帖子，但我需要更多帮助来找出这个问题的确切原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T06:32:26.420

对于读取文本文件，最好使用字符流，例如直接使用 java.util.Scanner 而不是 FileInputStream。关于编码，您必须首先确保您要读取的文本文件保存为“UTF-8”，而不是其他方式。我还注意到在我的系统中，**我必须将我的 java 源文件保存为“UTF-8”**，以使其正确显示印地语字符。

但是我想建议更简单的方法来读取 csv 文件，如下所示：

```
Scanner scan = new Scanner(new File(csvFile));
while(scan.hasNext()){
   System.out.println(scan.nextLine());
} 
```

![查看输出](../Images/0944785e3fa675606a3717cd1ce0bae5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:30:39.700

我认为您的控制台无法显示印地语字符。尝试

```
System.out.println("Cat,,बिल्ली,,,"); 
```

去测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-10T11:36:01.703

正如上面的答案所讨论的；解决方案是两个步骤 1）将您的 txt 文件保存为 UTF-8 2）更改 Java 代码的属性以在 Eclipse 中使用 UTF-8；右键单击Java文件；属性 -> 资源 -> 文本文件编码 -> 其他 -> UTF-8

[请参阅http://howtodoinjava.com/2012/11/27/how-to-compile-and-run-java-program-written-in-another-language/](http://howtodoinjava.com/2012/11/27/how-to-compile-and-run-java-program-written-in-another-language/)上给出的屏幕截图

# python - Python 装饰类不允许方法调用。为什么？

> ID：14352483
> 
> 赞同：2
> 
> 时间：2013-01-16T06:25:25.607
> 
> 标签：python, class, methods, couchdb, decorator

[正如我在上一篇文章](https://stackoverflow.com/questions/14333553/python-decorator-also-for-undefined-attributes/)中提到的。我试图创建一个装饰器，它执行以下操作：

装饰类表示基于文档的数据库（如 CouchDB 或 MongoDB）中的文档。Decorator 接受 on 参数，该参数是此类数据库的连接器实例。模型类（在此示例中为用户）会自动将未定义的属性映射到数据库中的字段。

现在我有点卡住了：-/提到的东西都在工作。但现在我不能从模型类中调用任何方法。我收到以下错误。

> 类型错误：必须使用用户实例作为第一个参数调用未绑定的方法 myfunc()（什么都没有）

```
class Connector(object):
    def readvar(self, var):
        data = {"emailAddress":"jack.bauer@ctu.org", "lastName":"Bauer"}
        return data[var]

class DocumentDB(object):
    def __init__(self,connector):
        self.connector = connector

    def __call__(self, *args, **kargs):
        _c = self.connector

        class TransparentAttribute:         
            def __getattr__(self, attrname):
                try:
                    return _c.readvar(attrname)
                except:
                    return getattr(args[0], attrname)
        return TransparentAttribute

c = Connector()
@DocumentDB(c)
class User(object):

    username = "JackBauer"
    def doSomething(self):
        print "bla bla"
    def doSomethingElse(self):
        pass
    def myfunc(self):
        print "afadsadsf adsf asdf asdf"

u = User()
u.myfunc() # Does not work!!!
print u.emailAddress
print u.lastName
print u.username 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:17:36.520

`args[0]`是`User`类对象，而不是您的实例，因此您得到的是未绑定的方法（又名类方法）而不是绑定的方法。

```
@DocumentDB(c)
class User(object):
    pass 
```

可以改写为

```
class User(object):
    pass
User = DocumentDB(c)(User) 
```

这使问题更清楚（顺便说一句，`TransparentAttribute`故意不继承自`object`？）

也许你可以得到你想要的东西，而不是使用装饰器，而是`Connector`作为一个额外的基类来使用`User`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:18:24.187

我玩得很快，看起来像子类化用户作品。

```
class DocumentDB(object):
    def __init__(self,connector):
        self.connector = connector

    def __call__(self, user):
        _c = self.connector

        print self, user, _c # <__main__.DocumentDB object at 0x012DAD30> <class '__main__.User'> <__main__.Connector object at 0x012DAD70>

        class TransparentAttribute(user):
            def __getattr__(self, attrname):
                try:
                    return _c.readvar(attrname)
                except:
                    return getattr(user, attrname)

        return TransparentAttribute 
```

* * *

```
u = User()
print type(u) # <class '__main__.TransparentAttribute'>
u.myfunc() # afadsadsf adsf asdf asdf 
```

之后`u = User()`,`u`是 type `TransparentAttribute`，我认为如果你不继承它，那么你基本上用一个实例替换你`User`的`TransparentAttribute`实例（所以所有 User 对象的本地函数都消失了）。

（但老实说，其中一些让我有点过头了——请随时纠正我）

# linux - 需要理解这个awk语句

> ID：14352487
> 
> 赞同：0
> 
> 时间：2013-01-16T06:25:35.940
> 
> 标签：linux, awk

我正在阅读这个问题 [Awk code to select multiple patterns](https://stackoverflow.com/questions/14336710/awk-code-to-select-multiple-patterns)

用户将此作为输入

```
------------------------------------------------------------------------
r4544 | n479826 | 2012-08-28 07:12:33 -0400 (Tue, 28 Aug 2012) | 1 line
Changed paths:
   M /branches/8.6.0/conf/src/main/config/RTSConfig.xml

CET-402: some text comment
------------------------------------------------------------------------
r4550 | n479826 | 2012-09-04 05:51:29 -0400 (Tue, 04 Sep 2012) | 1 line
Changed paths:
   M /branches/8.6.0/conf/src/main/config/RTSConfig.xml
   M /branches/8.6.0/conf/src/main/config/base.cfg
   M /branches/8.6.0/conf/src/main/config/prod.cfg
   M /branches/8.6.0/conf/src/main/config/qa.cfg
   M /branches/8.6.0/conf/src/main/config/uat.cfg

CET-438: some text comment 
```

他想要这个作为输出

```
r4544 | n479826 | 2012-08-28 07:12:33 | /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/base.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/prod.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/qa.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/uat.cfg 
```

正确答案是这样

```
awk -F"|" '/^r/{a=$1;b=$2;c=substr($3,0,20)}/^   M/{gsub(/   M /," ");print a"|"b"|"c"|"$0}' your_file 
```

我没有完全理解。

现在我得到了这部分

`/^r/{a=$1;b=$2;c=substr($3,0,20)}/^`

但我没有得到第二部分 `M/{gsub(/ M /," ");print a"|"b"|"c"|"$0}`

我的问题是

1.  开头是什么`M`意思 2.Now awk 将逐行读取文件，因此它意味着在第二行，即 Chngaed 路径的值，因为该行上`a =0`没有字段分隔符`|`
2.  现在，当 awk 再次进入第三行时`a,b,c =0`，`$0 = /bracnhes`结果如何仍然显示 a,b,c 的旧值

在多行上使用 awk 时我感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:51:40.480

像这样做

`/^r/{a=$1;b=$2;c=substr($3,0,20)}`

1.  `r`它匹配唯一以和一些数字开头的行。所以它得到 a,b,c 变量

`/^ M/{gsub(/ M /," ");print a"|"b"|"c"|"$0}`

1.  这匹配与`spaces and M`获得另一部分的线。在此匹配过程中，a,b,c 将从先前保存的值中获取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:11:16.200

我懒得解释答案:) 但是让我暂时搁置我的懒惰一段时间：

```
/^r/{a=$1;b=$2;c=substr($3,0,20)} 
```

只有当行以字母 r 开头时，上面的代码块才会执行。块内部说将第一个字段存储在 a 中，第二个字段存储在 b 中，输入的第三个字段是：

```
2012-08-28 07:12:33 -0400 (Tue, 28 Aug 2012) 
```

但我只需要带有时间戳的日期，其余的对我来说已经过时了。它始终是 20 个字符。所以我从第三个字段中取出一个子字符串并将其存储在 c 中。

我的主要兴趣是以 /^ M/ 开头的行，我必须显示上一行中以 r 开头的信息，并且确保在我们想要的行之前有一行以 r 开头，其中包含所有信息我必须在前面加上以 M 开头的行。

因此，每次以 M 开头的行都会添加存储在 ab 和 c 中的值。

```
M/{gsub(/ M /," ");print a"|"b"|"c"|"$0} 
```

gsub 部分将从当前行中删除带有空格的“ M ”部分。print 部分只是在当前行前面加上 ab 和 c 的值 | 作为分隔符。

这是什么逻辑！

我现在会回到我的懒惰模式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:11:32.570

原因是在遇到 M 之前没有替换 a、b 和 c 的值。所以它仍然附加到打印语句中。

# python - Python。对象集合中的标识。和散列

> ID：14352488
> 
> 赞同：1
> 
> 时间：2013-01-16T06:25:40.337
> 
> 标签：python, object, hash, set, identity

__hash__ 和 __eq__ 如何用于集合中的标识？例如一些应该有助于解决一些多米诺骨牌难题的代码：

```
class foo(object):
    def __init__(self, one, two):
        self.one = one
        self.two = two
    def __eq__(self,other):
        if (self.one == other.one) and (self.two == other.two): return True
        if (self.two == other.one) and (self.one == other.two): return True
        return False
    def __hash__(self):
        return hash(self.one + self.two)

s = set()

for i in range(7):
    for j in range(7):
        s.add(foo(i,j))
len(s) // returns 28 Why? 
```

如果我只使用 __eq__() len(s) 等于 49。没关系，因为据我了解对象（例如 1-2 和 2-1）不一样，但代表相同的多米诺骨牌。所以我添加了哈希函数。
现在它按我想要的方式工作，但我不明白一件事：1-3 和 2-2 的哈希值应该相同，因此它们应该算作相同的对象并且不应该添加到集合中。但他们做到了！我卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:35:29.337

用于 dict/set 目的的平等取决于`__eq__`. 但是，要求比较相等的对象具有相同的哈希值，这就是您需要`__hash__`. 请参阅[此问题](https://stackoverflow.com/questions/13001913/what-happens-when-you-call-if-key-in-dict/13001957#13001957)以进行一些类似的讨论。

哈希本身并不能确定两个对象在字典中是否相同。散列就像一条“捷径”，只能以一种方式起作用：如果两个对象具有不同的散列，则它们肯定不相等；但如果它们具有相同的哈希值，它们仍然可能不相等。

在您的示例中，您定义`__hash__`并`__eq__`做不同的事情。哈希仅取决于多米诺骨牌上数字的总和，但相等性取决于两个单独的数字（按顺序）。这是合法的，因为相同的多米诺骨牌仍然具有相同的哈希值。然而，就像我上面所说的，这并不意味着等和多米诺骨牌会被认为是平等的。一些不相​​等的多米诺骨牌仍然具有相等的哈希值。但是相等仍然由 决定`__eq__`，并且`__eq__`仍然按顺序查看这两个数字，这就是决定它们是否相等的原因。

在我看来，在您的情况下，适当的做法是定义两者`__hash__`并`__eq__`依赖于*有序*对——也就是说，首先比较两个数字中较大的一个，然后比较较小的一个。这意味着 2-1 和 1-2 将被视为相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:34:36.853

哈希只是帮助 Python 排列对象的提示。当`foo`在集合中查找某个对象时，它仍然需要检查集合中的每个对象，其哈希值与`foo`.

这就像为字母表中的每个字母准备一个书架。假设您想将一本新书添加到您的收藏中，*前提*是您还没有它的副本；你会先去书架上找合适的信。但是你必须查看书架上的每一本书，并将其与你手中的那本书进行比较，看看它是否相同。你不会因为书架上已经有东西就丢弃这本新书。

如果您想使用其他值来过滤掉“重复项”，请使用 dict 将多米诺骨牌的总值映射到您看到的第一张多米诺骨牌。不要颠覆 Python 内置的行为来表示完全不同的东西。（正如您所发现的，无论如何，它在这种情况下不起作用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:00:34.783

哈希函数的要求是，如果`x == y`对于两个值，则`hash(x) == hash(y)`. 反过来不一定是真的。

通过考虑字符串的散列，您可以很容易地了解为什么会出现这种情况。假设它`hash(str)`返回一个 32 位数字，并且我们正在散列长度超过 4 个字符的字符串（即包含超过 32 位）。可能的字符串比可能的哈希值多，所以一些不相等的字符串必须共享相同的哈希（这是[鸽子原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)的一个应用）。

Python 集被实现为哈希表。当检查一个对象是否是集合的成员时，它会调用它的哈希函数并使用结果来挑选一个桶，然后使用相等运算符来查看它是否匹配桶中的任何项目。

在您的实施中，2-2 和 1-3 多米诺骨牌将最终出现在哈希桶中，但它们的比较并不相等。因此，两者都可以添加到集合中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:34:07.990

[您可以在 Python数据模型文档](http://docs.python.org/2/reference/datamodel.html#object.__hash__)中了解这一点，但简短的回答是您可以将哈希函数重写为：

```
def __hash__(self):
    return hash(tuple(sorted((self.one, self.two)))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-12T14:00:35.267

我喜欢 Eevee 提供的答案的声音，但我很难想象一个实现。这是我对Eevee提供的答案的解释、解释和实现。

*   使用两个多米诺骨牌值的总和作为字典键。
*   将**任**一 domino 值存储为字典值。

例如，给定多米诺骨牌“12”，总和为 3，因此字典键将为 3。然后我们可以选择任一值（1 或 2）存储在该位置（我们将选择第一个值 1 ）。

```
domino_pairs = {}
pair = '12'
pair_key = sum(map(int, pair))
domino_pairs[pair_key] = int(pair[0]) # Store the first pair's first value.
print domino_pairs 
```

输出：

```
{3: '1'} 
```

虽然我们只存储了多米诺骨牌对中的一个值，但另一个值可以很容易地从字典键和值中计算出来：

```
pair = '12'
pair_key = sum(map(int, pair))
domino_pairs[pair_key] = int(pair[0]) # Store the first pair's first value.
# Retrieve pair from dictionary.
print pair_key - domino_pairs[pair_key] # 3-1 = 2 
```

输出：

```
2 
```

但是，由于两个不同的对可能具有相同的总数，我们需要针对单个键存储多个值。因此，我们针对单个键存储值列表（即两对的总和）。把它放到一个函数中：

```
def add_pair(dct, pair):
  pair_key = sum(map(int, pair))
  if pair_key not in dct:
    dct[pair_key] = []
  dct[pair_key].append(int(pair[0]))

domino_pairs = {}
add_pair(domino_pairs, '22')
add_pair(domino_pairs, '04')
print domino_pairs 
```

输出：

```
{4: [2, 0]} 
```

这是有道理的。两对总和为 4，但每对中的第一个值不同，因此我们存储两者。到目前为止的实现将允许重复：

```
domino_pairs = {}
add_pair(domino_pairs, '40')
add_pair(domino_pairs, '04')
print domino_pairs 
```

输出

```
 {4: [4, 0]} 
```

'40' 和 '04' 在 Dominos 中是相同的，所以我们不需要同时存储两者。我们需要一种检查重复项的方法。为此，我们将定义一个新函数`has_pair`：

```
 def has_pair(dct, pair):
  pair_key = sum(map(int, pair))
  if pair_key not in dct:
    return False
  return (int(pair[0]) in dct[pair_key] or 
    int(pair[1]) in dct[pair_key]) 
```

像往常一样，我们得到总和（我们的字典键）。如果它不在字典中，则该对不存在。如果它在字典中，我们必须检查我们对中的**任何一个**值是否存在于字典“bucket”中。让我们将此检查插入`add_pair`，因此我们不会添加重复的多米诺骨牌对：

```
def add_pair(dct, pair):
  pair_key = sum(map(int, pair))
  if has_pair(dct, pair):
    return
  if pair_key not in dct:
    dct[pair_key] = []
  dct[pair_key].append(int(pair[0])) 
```

现在添加重复的多米诺骨牌对可以正常工作：

```
domino_pairs = {}
add_pair(domino_pairs, '40')
add_pair(domino_pairs, '04')
print domino_pairs 
```

输出：

```
{4: [4]} 
```

最后，一个 print 函数展示了如何仅存储多米诺骨牌对的总和以及同一对中的单个值与存储对本身相同：

```
def print_pairs(dct):
  for total in dct:
    for a in dct[total]:
      a = int(a)
      b = int(total) - int(a)
      print '(%d, %d)'%(a,b) 
```

测试：

```
domino_pairs = {}
add_pair(domino_pairs, '40')
add_pair(domino_pairs, '04')
add_pair(domino_pairs, '23')
add_pair(domino_pairs, '50')
print_pairs(domino_pairs) 
```

输出：

```
(4, 0)
(2, 3)
(5, 0) 
```

# objective-c - 桥接演员： __bridge_transfer 与 __bridge 与合成二传手

> ID：14352494
> 
> 赞同：11
> 
> 时间：2013-01-16T06:26:03.627
> 
> 标签：objective-c, automatic-ref-counting

我正在使用 ARC，并且在使用`__bridge_transfer`. 我有一个属性`userName`如下：

```
@property (nonatomic, retain) NSString *userName;
...
@synthesize userName = _userName;
... 
```

案例**一**：

```
NSString *name = (__bridge_transfer NSString *)ABRecordCopyCompositeName(person);
self.userName = name; 
```

案例**2**：

```
self.userName = (__bridge_transfer NSString *)ABRecordCopyCompositeName(person); 
```

哪里`person`是类型`ABRecordRef`。

在 CASE **1**中，ARC 会释放局部变量名（根据我的理解，如果我错了，请纠正我），但是在 CASE **2**中会发生什么？我应该`__bridge`在 CASE **2**中使用还是CASE **2**根本不应该使用？在使用or的情况**2**中，如何平衡引用计数？`__bridge_transfer``__bridge`

在 CASE **2**中，使用`__bridge_transfer`ARC 是否会释放对象（该对象，作为参数传递给 setter `(void)setUserName:(NSString *)userName`）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T07:09:43.000

当您调用 时`ABRecordCopyCompositeName()`，必须*有人*在某个时候释放返回的对象。使用`__bridge_transfer`确保 ARC 将为您释放对象。没有`__bridge_transfer`，您必须手动释放返回的对象。这是仅有的两个选择。

因此，您必须`__bridge_transfer`在这两种情况下都使用。

一个很好的练习是通过使用`__bridge`而不是诱导泄漏`__bridge_transfer`，然后使用 Xcode 和 Instruments 来尝试找到泄漏。编译器会发现泄漏吗？静态分析（项目 -> 分析）是否会发现泄漏？Instruments 是否会发现泄漏？如果是这样，您将知道如何检查是否`__bridge_transfer`解决了问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-13T08:27:29.887

案例 1 和案例 2 是等价的。可以这样想：

情况1：

```
-(void)func {
  NSString *name = someObject;  // Retain, so +1 on the reference count
  self.userName = name;         // Retain, so +1 on the reference count
  // End of function, name is going out of scope,
  // so release name, so -1 on the reference count.
  // Total change to the reference count: +1 for self.userName.
} 
```

案例二：

```
-(void)func {
  self.userName = someObject;   // Retain, so +1 on the reference count
  // End of function.
  // Total change to the reference count: +1 for self.userName.
} 
```

所以他们的工作是一样的。请注意，如果这样做是安全的，则允许编译器取消保留和释放对。在像这样的简单情况下，它肯定会忽略它们。考虑对引用计数的所有 +1 和 -1 更改只是为了使其更清晰。

要回答有关 __bridge 与 __bridge_transfer 的问题：您调用`ABRecordCopyCompositeName`了 ，它返回对非托管对象 (a `CFStringRef`) 的引用。函数名中的`Copy`告诉你这个对象现在归你所有，你最终需要释放它。

您可以致电 来完成此操作`CFRelease`，也可以让 ARC 为您完成此操作。 `__bridge`告诉 ARC 它不允许拥有所有权（换句话说，您想手动释放该对象，或者它不归您所有）。 `__bridge_transfer`告诉 ARC 它应该获得所有权并在完整表达式的末尾释放对象（换句话说，您要求 ARC 为您进行释放）。

与`__bridge_transfer`：

```
self.userName = (__bridge_transfer NSString *)ABRecordCopyCompositeName(person);  // +1 inside ABRecordCopyCompositeName, +1 for self.userName, -1 at the end, because of the __bridge_transfer.
// self.userName now is the only strong reference.  Good. 
```

与`__bridge`：

```
CFStringRef userName = ABRecordCopyCompositeName(person);  // +1 inside ABRecordCopyCompositeName.
self.userName = (__bridge NSString *)userName;             // +1 for self.userName, ARC does nothing because of the __bridge.
CFRelease(userName);                                       // -1.
// self.userName now is the only strong reference.  Good. 
```

有`__bridge`和内存泄漏：

```
self.userName = (__bridge NSString *)ABRecordCopyCompositeName(person);  // +1 inside ABRecordCopyCompositeName, +1 for self.userName, ARC does nothing because of the __bridge.
// self.userName now is one strong reference, but reference count is 2.
// Memory leak. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T02:25:58.957

正是因为这令人困惑，我建议您分别使用`CFBridgingRelease()`and`CFBridgingRetain()`而不是使用 and 进行强制`__bridge_transfer`转换`__bridge_retained`。然后，您需要记住的唯一“不寻常”演员表是`__bridge`，它与所有权无关。

我发现它更容易记住，因为类似这样的东西`ABRecordCopyCompositeName()`让您`CFRelease()`对返回的对象负责，您可以使用它`CFBridgingRelease()`来履行该责任，并且类比是显而易见的。

同样，您只能在对象指针已经是 Core Foundation 类型时使用`CFBridgingRetain()`的上下文中使用。`CFRetain()`

因此，您的代码可能是：

```
NSString *name = CFBridgingRelease(ABRecordCopyCompositeName(person));
self.userName = name; 
```

或者：

```
self.userName = CFBridgingRelease(ABRecordCopyCompositeName(person)); 
```

在这两种情况下，`CFBridgingRelease()`函数`Copy`名称中的 都表示您有责任释放对象。在那之后，这都是别人的责任。ARC 管理`name`变量。属性设置器的实现者`userName`管理它。（在这种情况下也恰好是 ARC，但这无关紧要。）

# zend-framework - 如何使用 zend_pdf 类在 pdf doc 中获取具有高度和宽度的正确图像

> ID：14352495
> 
> 赞同：0
> 
> 时间：2013-01-16T06:26:07.470
> 
> 标签：zend-framework

我遇到了一个问题，`zend_pdf`因为我没有获得图像的质量以及`zend pdf`文档中图像的实际高度和宽度。

下面是我正在使用的功能

```
 $pdf = new Zend_Pdf();

   $page = $pdf->newPage('510:745:');

   $pdf->pages[] = $page;

   $image = Zend_Pdf_Image::imageWithPath($imagePath);

   $page->drawImage($image, 100,100,400, 300); 
```

那么如何获得具有适当高度和宽度的图像质量`Zend_pdf`呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T21:38:31.280

也许 getPixelWidth() 和 getPixelHeight() 效果更好。像这样：

```
$img = Zend_Pdf_Image::imageWithPath('myimage.png');
$page->drawImage($img, 0, 0, $img->getPixelWidth(), $img->getPixelHeight()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:01:44.797

将大小更改为原始大小。这将有助于保持图片的原始质量。

# php - 为什么在apache conf中，文件“database.php.default”没有命名为“database.php”？

> ID：14352501
> 
> 赞同：0
> 
> 时间：2013-01-16T06:26:23.600
> 
> 标签：php, apache

在apache conf中，只有一个数据库配置文件。但是为什么它被命名为 database.php.default 而不仅仅是 database.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:27:43.483

因为它向您显示默认配置，您应该使用您的个人设置将其复制到 database.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:24:18.350

因为将真实的用户名、密码和连接信息提交到版本控制系统中是一种不好的做法。如果您只是从提交中忽略了该文件，那么没有人会知道丢失的文件是必需的。

# asp.net-4.0 - 从 asp.net 中的 gridview 中删除选中的行

> ID：14352508
> 
> 赞同：0
> 
> 时间：2013-01-16T06:26:57.420
> 
> 标签：asp.net-4.0

我有一个绑定到数据源的gridview。在那个gridview中我有一列复选框。我想通过选中特定行的复选框来删除gridview的行，最后我在gridview之外有删除按钮，它可以删除选中的行从网格视图。

问题是即使正在检查行的复选框..但它显示checked=false ......所以没有一个行能够删除..我尝试了所有的可能性，但它不起作用

请尽快给我解决方案这是我的代码

```
 foreach (GridViewRow row in GridView1.Rows)
    {

        if (row.RowType == DataControlRowType.DataRow)
        {
            CheckBox chkDelete = (CheckBox)row.Cells[5].FindControl("chkDelete");

            if (chkDelete != null)
            {
                if (chkDelete.Checked)//It Showing checked=false 
```

{ //这里删除代码//

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:55:52.723

检查您的页面加载事件，网格视图可能会在每个回发时再次重新绑定。如果您发现这种情况，请在您的代码中进行以下更改。

```
protected void Page_Load(object sender, EventArgs e)
{
 if (!IsPostBack)
 {
     //logic on page load
 }
} 
```

# c# - 在 c# 中从 tcp 客户端接收字节到数组中

> ID：14352514
> 
> 赞同：0
> 
> 时间：2013-01-16T06:27:20.440
> 
> 标签：c#, tcp, tcplistener

我想从 tcp 客户端接收字节到数组中。我有一个字节数组 dataToRecieve，我在其中接收这些字节。

但是我在这里遇到了一些问题，任何人都可以检查我的代码：

```
while (true) {
    try {                           
       Socket handler = mainSocket.Accept();
       byte[] dataToRecieve = new byte[handler.ReceiveBufferSize];
       int[] dataArray = new int[1024];
       handler.Receive(dataToRecieve);
       //////SOME CODE
       int i = handler.Send(msg);
       handler.Shutdown(SocketShutdown.Both);
       handler.Close();
    }
catch(Exception) {}
--------//////some code 
```

现在我想将字节接收到字节数组中，而不是将其转换为 int 数组（但是数据应该在 int 数组中）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:07:01.787

好吧，您的代码在这里已经有问题了：

```
handler.Receive(dataToRecieve); 
```

您忽略了返回的值`Receive`，告诉您实际读取了多少字节。这几乎*总是*一个坏主意。同样，您假设您在一次通话中收到了您需要的所有信息。通常你要么必须循环，直到你读完所有数据——要么知道你期望一定数量，要么读到*没有*更多数据。

将数据转换为字节数组后，将其转换为整数数组取决于字节数组中的格式。您*也许*可以只使用[`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)，但前提是字节数组中的字节序与内存中的字节序匹配。或者，您可以简单地创建一个正确大小的数组，然后编写一个循环：

```
int[] integers = new byte[size / 4];
for (int i = 0; i < integers.Length; i++)
{
    integers[i] = BitConverter.ToInt32(bytes, i * 4);
} 
```

但是，您需要再次考虑字节序。我的[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)库有一个`EndianBitConverter`类，它允许您指定数据的字节顺序。

# windows - Visual Studio 2012 中的 Sql Server ce 问题

> ID：14352515
> 
> 赞同：2
> 
> 时间：2013-01-16T06:27:25.327
> 
> 标签：windows, windows-phone-7, sql-server-ce

我正在 Windows phone 7.5 中开发一个项目并用于存储数据，我正在使用 Sql Server ce 3.5，这在 Visual Studio 2012 的服务器资源管理器中未显示。有什么方法可以在我的 Windows Phone 7.5 中使用数据库连接应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:29:12.347

不幸的是，Visual Studio 2012 不支持 SQL 服务器 CE 3.5。

# java - 不同的应用程序写入同一个 log4j 日志文件

> ID：14352520
> 
> 赞同：4
> 
> 时间：2013-01-16T06:27:46.513
> 
> 标签：java, jakarta-ee, logging, log4j

我有 4 个 java/Java EE 应用程序——两个是在 WebSphere 中运行的基于服务器的 j2ee 应用程序。其他两个是独立的 Java 应用程序。我的日志框架是使用 log4j.properties 的 log4j。

问题 1：我可以拥有一个相同的日志文件来记录所有应用程序。即使所有应用程序同时写入，它会导致任何文件写入问题吗？

问题2：如果所有应用程序都可以正常写入，我如何将应用程序名称预先附加到每个日志语句中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:21:11.763

问题一：

我相信默认情况下它不会工作。

如果您使用的是 SLF4J，请考虑切换到 LogBack。在 LogBack 的 File Appender 中，有一个谨慎模式，允许不同 JVM 中的多个 FileAppender 写入同一个日志文件（当然，它们都需要开启谨慎模式）

[http://logback.qos.ch/manual/appenders.html#prudent](http://logback.qos.ch/manual/appenders.html#prudent)

问题 2：您永远不应该通过手动记录您的应用名称来使日志消息有所不同。

有很多方法可以做。最简单的方法是：由于您有两个不同的应用程序，您可以为它们设置不同的日志记录配置文件。只需在 appender 使用的日志模式中添加相应的应用名称信息即可满足您的需求。

# sql - 连接两个具有不同列数的表

> ID：14352523
> 
> 赞同：2
> 
> 时间：2013-01-16T06:28:08.517
> 
> 标签：sql, sql-server-2008, join, ssis, business-intelligence

我在 ssis 中有这样的场景 - 我有两个不同的输入，其中一个来自查找不匹配输出。另一个输入实际上是一个派生列，它是从使用 sql 查询的 oledb 源中的单行单列结果中提取的。问题是我需要加入这两个输入并使其成为单个数据集，以进一步将数据推送到 crm 目的地（Cozyroc）。

我知道 union all 无法完成这项工作，因为它适用于来自不同数据集的行的联合。

也不能使用合并和合并连接，因为需要提供一个公共 id 或密钥才能连接两个数据集，而我没有这样的东西。

例如，我的第一个数据集如下所示：

```
usinessid          userid      name
---------          ------      ----
ret678             435         john
dfgt67             213         sam 
```

我的第二个数据集是这样的：

```
systemid
------------------------
6666-777-kjtyr-213t-ytui 
```

它是使用 oledb source - sql 命令使用单列单行查询提取的。

有没有办法组合这两个数据集，以便最终结果类似于：

```
businessid         userid           name          systemid
----------         ------           ----          ------------------------
ret678             435              john          6666-777-kjtyr-213t-ytui 
dfgt67             213              sam           6666-777-kjtyr-213t-ytui 
```

我想在不使用变量或使用派生列并对 systemid 值进行硬编码的情况下执行此操作。

原谅我的编辑...

关于这个问题的任何进一步的投入都将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:47:27.237

要按照您显示的方式组合两个数据集，您可以使用简单的交叉连接：

```
SELECT
  t1.businessid,
  t1.userid,
  t1.name,
  t2.systemid
FROM
  table1 t1
CROSS JOIN
  table2 t2
; 
```

# android - 泄露的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40810e90 最初添加在这里

> ID：14352527
> 
> 赞同：0
> 
> 时间：2013-01-16T06:28:21.453
> 
> 标签：android, calendar

```
private static void addToCalendar(ActivityAppointment ctx, final String title, final long dtstart, final long dtend) {
    final ContentResolver cr = ctx.getContentResolver();
    Cursor cursor ;
    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
        cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    else
        cursor = cr.query(Uri.parse("content://calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    if ( cursor.moveToFirst() ) {
        final String[] calNames = new String[cursor.getCount()];
        final int[] calIds = new int[cursor.getCount()];
        for (int i = 0; i < calNames.length; i++) {
            calIds[i] = cursor.getInt(0);
            calNames[i] = cursor.getString(1);
            cursor.moveToNext();
        }

        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
        builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                ContentValues cv = new ContentValues();
                cv.put("calendar_id", calIds[which]);
                cv.put("title", title);
                cv.put("dtstart", dtstart );
                cv.put("hasAlarm", 1);
                cv.put("dtend", dtend);

                Uri newEvent ;
                if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                    newEvent = cr.insert(Uri.parse("content://com.android.calendar/events"), cv);
                else
                    newEvent = cr.insert(Uri.parse("content://calendar/events"), cv);

                if (newEvent != null) {
                    long id = Long.parseLong( newEvent.getLastPathSegment() );
                    ContentValues values = new ContentValues();
                    values.put( "event_id", id );
                    values.put( "method", 1 );
                    values.put( "minutes", 15 ); // 15 minutes
                    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                        cr.insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                    else
                        cr.insert( Uri.parse( "content://calendar/reminders" ), values );

                }
                dialog.dismiss();
            }

        });

        builder.create().show();
    }
    cursor.close();
} 
```

我在其他一些函数中调用了这个方法

```
 public void SaveData()
  { 
                .......
              addToCalendar(this, edSubject.getText().toString(), startMillis, endMillis);
} 
```

我的 logcat 错误是：

```
01-16 17:17:56.740: E/WindowManager(4166): Activity com.sree.weekdayview.calendar.activities.ActivityAppointment has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40810e90 that was originally added here
01-16 17:17:56.740: E/WindowManager(4166): android.view.WindowLeaked: Activity com.sree.weekdayview.calendar.activities.ActivityAppointment has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40810e90 that was originally added here
01-16 17:17:56.740: E/WindowManager(4166):  at android.view.ViewRoot.<init>(ViewRoot.java:291)
01-16 17:17:56.740: E/WindowManager(4166):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:249)
01-16 17:17:56.740: E/WindowManager(4166):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
01-16 17:17:56.740: E/WindowManager(4166):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
01-16 17:17:56.740: E/WindowManager(4166):  at android.view.Window$LocalWindowManager.addView(Window.java:532)
01-16 17:17:56.740: E/WindowManager(4166):  at android.app.Dialog.show(Dialog.java:269)
01-16 17:17:56.740: E/WindowManager(4166):  at com.sree.weekdayview.calendar.activities.ActivityAppointment.SaveData(ActivityAppointment.java:381)
01-16 17:17:56.740: E/WindowManager(4166):  at com.sree.weekdayview.calendar.activities.ActivityAppointment$3.onClick(ActivityAppointment.java:123) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:50:59.870

由于您显示的对话框，您会收到此错误。对话框与其宿主（活动）的生命周期紧密相关，这意味着通常您不应尝试在专用平台方法之外创建和/或显示对话框。在您的情况下，活动可能在显示对话框时被破坏（例如，由于方向更改），因此出现异常。

有两种方法可以将对话的生命周期绑定到其宿主的生命周期：

1.  在 API 级别 13 之前，专用平台方法是`onCreateDialog()`（和`showDialog()`/ `dismissDialog()`）。它们在活动中可用，并且应该被覆盖以基于 id 创建/显示/关闭对话框。

2.  从 API 级别 13 开始，不推荐使用上述方法，取而代之的`DialogFragment`是`FragmentManager`.

我推荐的第三个选项是将该`DialogFragment`方法与支持库结合使用。这基本上是选项二，但使用了使现代逻辑能够在运行 Android 1.6 及更高版本的设备上运行的向后移植功能。

有关实现细节，请参阅Android 开发网站上的[Dialogs 主题。](http://developer.android.com/guide/topics/ui/dialogs.html)可以在[此处](http://www.vogella.com/articles/AndroidDialogs/article.html)找到使用已弃用方法的示例。

# c++ - 如何构建垃圾收集器？

> ID：14352528
> 
> 赞同：0
> 
> 时间：2013-01-16T06:28:22.020
> 
> 标签：c++, actionscript-3, memory-management, garbage-collection, reference-counting

我在 Flash 中工作，并尝试使用 Flash Player 中可用的新“域内存”。这实质上可以让您在低级别使用内存，但您必须自己管理内存，就像没有内置垃圾收集器的 C++ 一样。我已经构建了一个基本的分配器/释放器，但我需要一些方法来构建垃圾收集器或引用计数器，以便我可以取消分配未使用的对象。举个例子：

```
Rect stageRect = new Rect(0, 0, stage.width, stage.height);
  // syntax is for understanding only
  // actually would allocate memory using my handwritten allocator 
```

我已经构建了一个新的`Rect`并存储在一个类成员变量中。现在假设我对这个对象执行一些矩形数学运算，再创建 2 个对象。

```
Rect quarterRect = stageRect.halfWidth().halfHeight(); 
```

如您所见，`Rect`返回的 by`halfWidth`是未使用的，可以进行垃圾收集。

由创建的最终矩形`halfHeight`存储在 var`quarterRect`中，我稍后需要它。

如何检测这些未使用的对象，并相应地处理它们？我一直在阅读[Reference Counting、Smart Pointers](http://www.cmlab.csie.ntu.edu.tw/~chenhsiu/tech/The_Art_of_C++_ch2.pdf)和 C++的[GC](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)，但我仍然不知道如何检测何时未使用引用，以减少引用计数。增加引用计数很容易：当您设置另一个 var 指向该对象时，即：`a = stageRect`，应该增加 的引用计数`stageRect`，但是您怎么知道什么时候`a`未使用？减少引用计数？通常你不会`a = null`在现代代码中设置。您只是希望平台能够检测到它未使用的 ref 并处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:46:13.280

好吧，让我们考虑一下这段代码：

```
int someFunction() { // I have no clue about AS3 syntax, but I suppose it's C-like, right?
    Rect a = new Rect(...); // there are no pointers, only references, right?

    // ... some other stuff
} // <- what happens here? 
```

右花括号会发生什么？`a`变量超出范围。在 C++ 中，当变量超出范围时，会调用其析构函数。当变量超出范围时，AS3 中会发生什么？如果这里什么都没有发生，那么您就无法以编程方式跟踪任何事情......好吧，那么恐怕实现引用计数是不可能的。对于引用计数，您需要一种方法来判断对您的值的引用已经消失。

但是AS3真的没有GC吗？我无法相信没有 GC 的脚本语言。

# php - php: if($some_var != '') 与 isset / empty

> ID：14352531
> 
> 赞同：2
> 
> 时间：2013-01-16T06:29:01.100
> 
> 标签：php, isset

所以我对 php 还很陌生，但在我真正理解之前，我就养成了这个习惯。在检查是否设置了`$_SESSION`//变量时，我使用这个`$_POST`：`$_GET`

```
if($_SESSION['username'] != '' {
 //allow access
 header('Location: welcomefriend.php')
}
else {
 //get out
 header('Location: getoutofhereyournotwelcome.php')
} 
```

我在登录脚本中使用它来检查会话是否设置为允许访问等。所以现在我知道`isset`/`empty`但我似乎总是遇到这些问题。

`if($some_far != '')`所以我的问题是在使用检查变量是否设置时我会遇到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:32:14.000

是的 - 如果数组中不存在索引，它会发出通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:34:16.480

如果变量不存在，这将显示通知，所以这样做：

```
if( !empty($_SESSION["username"]) ) {
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:31:46.180

是的，如果表单已提交但未填写，`$_POST["value"]==""`您的结果将与`isset($_POST["value"])`. 此外，`$_POST["value"]==""`如果未设置，则会在某些服务器上给您一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:34:19.100

检查是否`$_SESSION['username']`为空而不检查数组中是否确实存在`username`条目`$_SESSION`将引发通知。围绕它们编写代码是一种很好的做法。一种方法是这样的`if (isset($_SESSION['username']) && $_SESSION['username'] != '')`

至于`empty()`vs `!= ""`，这是个人喜好。您可能遇到的一个问题是它`empty()`不接受值，只接受引用，因此您不能做`empty(somefunction($_SESSION['username']))`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T06:35:48.050

使用[empty()](http://php.net/manual/en/function.empty.php) `if( !empty( $some_far ) ) {`检查 $_POST 变量是否已设置且不为空。

如果变量也可以为空，但必须设置使用`if( isset( $some_far ) ) {`
isset [()](http://php.net/manual/en/function.isset.php)变量也不能为 NULL 以返回 true。

如果变量没有像 Martin 在他的帖子中提到的那样设置，您也不会收到通知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T06:36:03.183

我总是做以下事情：

```
if (isset($_SESSION['username']) && $_SESSION['username'] != '') {
  //allow access
  header('Location: welcomefriend.php')
}
else {
  //get out
  header('Location: getoutofhereyournotwelcome.php')
} 
```

在 if 语句中首先测试变量中是否`'username'`存在`$_SESSION`索引将意味着如果索引不存在，那么我们将不会继续，`$_SESSION['username'] != ''`因此永远不会导致错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-21T17:18:12.000

考虑到

> 包含当前脚本可用的会话变量的关联数组

为什么不使用可用的预定义功能？`array_key_exists`

```
if(array_key_exists('username', $_SESSION) ) {
   header('Location: welcomefriend.php');
} else {
   header('Location: getoutofhereyournotwelcome.php');
} 
```

# mysql - Mysql查询动态获取排名

> ID：14352534
> 
> 赞同：1
> 
> 时间：2013-01-16T06:29:05.717
> 
> 标签：mysql, select, group-by, ranking

我有一个结果表，如：

```
ID STUDENT_ID Branch_id Class_id Exam_id Subject_id Numbers Date
1 653 5 1 1 8 60 2012-01-01
2 653 5 1 1 9 40 2012-01-01
3 653 5 1 1 10 80 2012-01-01
4 653 5 1 1 11 50 2012-01-01
5 653 5 1 1 12 65 2012-01-01
6 653 5 1 1 13 33 2012-01-01
7 653 5 1 1 15 86 2012-01-01
8 222 5 1 1 8 100 2012-01-01
9 222 5 1 1 9 80 2012-01-01
10 222 5 1 1 10 92 2012-01-01
11 222 5 1 1 11 50 2012-01-01
12 222 5 1 1 12 65 2012-01-01
13 222 5 1 1 13 33 2012-01-01
7 222 5 1 1 15 86 2012-01-01

```

我的愿望结果如下：

```
Student_ID 数学 英语 科学 总排名
1 90 89 88 267 1
2 90 89 88 267 1
3 58 45 98 201 2

```

我想通过这种方法获得学生排名：

[参考链接](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/)

```
SET @rank = 0, @prev_val = NULL;

SELECT rank, correct FROM 
(
    SELECT 
        @rank := IF(@prev_val=correct,@rank,@rank+1) AS rank,
        @prev_val := correct AS correct, uid
    FROM quiz_user 
    ORDER BY correct DESC
)as result WHERE uid=xxxxxxxxxxxx 
```

这个查询我只需要表结构之间的区别，帖子的作者在正确的列上分配排名，我需要在对所有数字求和后在数字 SUM(numbers) 列上分配排名。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:37:14.670

试试这个：

```
SELECT STUDENT_ID, Numbers, IF(@marks=(@marks:=Numbers), @auto, @auto:=@auto+1) rank 
FROM (SELECT STUDENT_ID, SUM(Numbers) Numbers
      FROM quiz_user 
      GROUP BY STUDENT_ID 
      ORDER BY Numbers DESC, STUDENT_ID 
     ) AS A, (SELECT @auto:=0, @marks:=0) AS B; 
```

# java - java中本地对象的内存管理

> ID：14352543
> 
> 赞同：4
> 
> 时间：2013-01-16T06:29:49.447
> 
> 标签：java, memory-management, garbage-collection

如果我在类中有一个方法，并且我在该方法中创建一个对象，那么该对象是否会被销毁，并且在方法完成后会释放分配给它的内存吗？

例如。-

```
public void drawFigure(){

    Paint paint = new Paint();
    paint.setSomeProperty();

    canvas.drawLine(startPoint, finishPoint, paint);

} 
```

那么drawFigure方法完成后，paint对象会被销毁吗？这与paint = null 相同，但我不需要将其设置为null，因为它是一个本地对象。我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T06:31:30.253

不能保证在方法调用完成后立即对对象进行 GC，但对象将成为**符合**GC 条件的对象，并且在下一次 GC 运行时，它可能会被收集并且内存将是空闲的。

编辑：

是的，你是对的。您无需将其设置为`null`. 局部变量将在堆栈上创建，堆栈将在方法完成后立即删除。因此，绘画将从内存中消失，`new Paint()`对象将在没有任何引用的情况下位于堆上，这使得上述对象符合 GC 条件。

[请参阅斯坦福教授的](http://www.youtube.com/watch?v=W8nNdNZ40EQ)这个youtube 视频。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T06:32:45.810

取决于您的意思是使用创建对象`new`还是创建引用。

```
public AnObjectType GimmeAnObject(){
    AnObjectType object = new AnObjectType ();
    return object;
} 
```

这将破坏引用`object`，但分配的内存将从函数返回，并且只有在返回值未分配给调用站点的另一个引用时才会被释放（标记为符合 GC 条件）。

编辑：在您的示例中，`paint`引用将被销毁。如果该`drawLine`方法不保留对（不太可能）对象本身的引用，则在销毁`paint`时将有资格进行垃圾回收。`paint`

所以是的，就像你调用`paint = null`函数的最后一行一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:31:37.567

只要对对象的引用不转义方法（即您不返回对象或返回引用该对象的对象。）

释放内存的时间取决于垃圾收集器，但引用的对象将可用于收集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:37:23.483

您是否返回对该创建对象的引用？如果是这样，那么在您释放对该对象的所有引用后，它将成为垃圾收集器感兴趣的主题。如果不是，那么在您退出该功能后，它可能会立即成为 GC 的兴趣点。然而 GC 并没有立即清除这个对象，你无法控制它。你永远不知道 GC 什么时候会销毁这样的对象。释放这些资源是虚拟机问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T07:10:14.537

局部引用变量paint 将超出范围，然后内存中的对象没有对其的引用（它有资格进行GC），因此该内存将在下一个GC 运行周期中由GC 收集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-21T21:58:35.683

是的，先生，因为局部变量存储在堆栈中

# javascript - jQuery 创建 HTML 元素

> ID：14352551
> 
> 赞同：1
> 
> 时间：2013-01-16T06:30:36.423
> 
> 标签：javascript, jquery, html

我知道在 jQuery 中创建 HTML 元素有很多不同的方法，但我见过有人展示：

```
$("<div></div>", {attrs...}) 
```

或者

```
$("<div/>", {attrs...}) 
```

作为这样做的主要方法。

我发现

```
$("<div>", {attrs...}) 
```

也很好用。

为什么没有人展示第三种方法？它有潜在的问题吗？就它所关注的结果而言，当我检查元素以查看创建的 div 时，它看起来非常相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:37:05.457

创建带有类似标签的 html 元素`$('<div>')`是`$("<div>", {attrs...})` **创建 html** elmenets 的记录方法，请在[此处查看](http://api.jquery.com/jQuery/)。

当参数有单个标签（带有可选的结束标签或快速结束标签）时——`$("<img />")`或**`$("<img>")`**，`$( "<a></a>" )`或**`$("<a>" )`**——jQuery 使用原生 JavaScript createElement() 函数创建元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:38:34.933

让我们看一下 jQuery 源代码：

[https://github.com/jquery/jquery/blob/master/src/core.js#L85](https://github.com/jquery/jquery/blob/master/src/core.js#L85)

```
// Handle HTML strings
if (typeof selector === "string") {
  if (selector.charAt(0) === "<" && selector.charAt(selector.length - 1) === ">" && selector.length >= 3) {
    // Assume that strings that start and end with <> are HTML and skip the regex check
    match = [null, selector, null];
  }
  // ...
} 
```

所以字符串必须以 < 开头并以 > 结尾才能被视为 HTML。所有这些变体都是有效的。我认为`<div>`最不受欢迎的原因是它提醒人们未关闭的标签是无效的 HTML。然而 jQuery 接受它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:44:13.290

如果你正在这样做`$('<div>')`，jQuery 也会使用`document.createElement()`.

（只需看看[http://code.jquery.com/jquery-1.4.2.js](http://code.jquery.com/jquery-1.4.2.js)，第 117 行）。

有一些函数调用开销，但除非性能至关重要（您正在创建数百 [数千] 个元素），否则没有太多理由恢复为普通 DOM。

为新网页创建元素可能是您最好坚持使用 jQuery 做事方式的一种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:43:36.077

根据 jQuery[文档](http://api.jquery.com/jQuery/)：为确保跨平台兼容性，代码段必须格式正确。可以包含其他元素的标签应与结束标签配对。

```
$( "<div></div>" ); 
```

但是不能包含元素的标签可能会被快速关闭或不被快速关闭，如下所示：

```
$( "<img />" );
$( "<input>" ); 
```

虽然`<div>`,`</div>`可能在某些浏览器中对您有用，但结果可能会因浏览器而异，甚至跨相同浏览器的不同版本。为了安全起见，始终坚持标准和文档最佳实践。

# css - 在Button xtype中使用href config更改按钮的css..我应该如何修复它？

> ID：14352554
> 
> 赞同：0
> 
> 时间：2013-01-16T06:30:46.043
> 
> 标签：css, extjs4

我正在使用 Button X 类型，其中我有 href 配置来打开另一个链接。但是使用 href 改变我的按钮样式..虽然由于使用 href 配置样式已经改变..这是我的 X 类型..ExtJS4 ......

```
 {
                            xtype:'button',
                            text:'Start',
                            style:'margin-left:150px;',
                            cls:'userAccountButtonCls',                             
                            href:'http://localhost/zipyap/',                                                             
                       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:41:33.353

利用

```
Handler:function(){
window.location.assign("http://localhost/zipyap/");
}
instead of href 
```

希望它可以帮助

# iphone - 在 UIPageViewController 内容视图中给出页码

> ID：14352556
> 
> 赞同：2
> 
> 时间：2013-01-16T06:31:06.183
> 
> 标签：iphone, ios, objective-c, ipad, uipageviewcontroller

我的内容视图有一个顶部栏，显示第 1 页，共 50 页。当 PageViewController 左右移动时，我如何更新这个字符串。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController DocumentPath]];

    NSLog(@"CURRENT PAGE IN CONTENTVIEW====%d",currentIndex-1);

}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController DocumentPath]];
NSLog(@"CURRENT PAGE IN CONTENTVIEW====%d",currentIndex+1);

} 
```

上面的代码总是返回错误的计数，我该如何解决这个问题。

我需要内容视图中的特定页码。我的意思是在 viewdidload 或内容视图中的类似内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:00:35.743

如果您只是通过从 modelArray 中获取当前 viewController 的索引来设置当前正在显示的 viewController 的 viewDidLoad 中的索引，它会显示什么？

# jsp - 在 servlet 中重用某些数据的最佳方法是什么？

> ID：14352559
> 
> 赞同：0
> 
> 时间：2013-01-16T06:31:11.537
> 
> 标签：jsp, servlets

我正在编写涉及两个步骤的代码，

第 1 步：在第 1 步中，我们将三个值 (x,y,z) 和 ID 传递给 servlet，如下所示，

[http://xyz.com/myservlet?x=10&y=20&z=30&ID=555](http://xyz.com/myservlet?x=10&y=20&z=30&ID=555)

如上所示，我们传递了三个值 10,20,30

第 2 步：现在有另一个 servlet 想要引用 ID 555 的 x、y 和 z 值。

我可以将 x,y,z 保存到 555 的文件中，或者我可以使用数据库来获取 x,y,z 值。

但是每次，如果我执行 Step2 或在 step2 中调用 servlet，每次都从文件中读取数据是否很好。

我们怎样才能使它更优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:14:06.477

这样做的正确方法是使用[memcached 系统](http://en.m.wikipedia.org/wiki/Memcache)。一些 Web 应用程序服务器支持这种“开箱即用”，而另一些则存在第三方实现（例如，用于 Java 的[jmemcached](http://code.google.com/p/jmemcache-daemon)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:39:02.107

您可以在内存中创建一个通用静态对象（如 a `Hashmap`）并将此值放入其中，然后从第 2 步中获取数据。但请注意这 2 步之间的同步。

或者，您可以将值存储在会话或应用程序上下文中。

# javascript - 具有调用同一类函数的 JavaScript 作用域

> ID：14352564
> 
> 赞同：0
> 
> 时间：2013-01-16T06:31:35.620
> 
> 标签：javascript, scope

它可以正常工作，如下所示：

```
function A() {
}

A.prototype.f1 = function() {
  alert('f1');
};

A.prototype.f2 = function() {
  // calls f1
  A.prototype.f1();
};

var a = new A();
a.f2(); // alert f1 correctly 
```

但是有一个函数 B 可以使 A 未定义到窗口范围，但可以在 B 范围内访问：

```
function A() {
}

A.prototype.f1 = function() {
  alert('f1');
};

A.prototype.f2 = function() {
  // calls f1
  A.prototype.f1();
};

function B() {
  var PrivateA = null;

  this.makePrivate = function() {
    PrivateA = A;     // private access
    A = undefined;        // undefined with window object
  };

  this.callA = function() {
    var a = new PrivateA();
    a.f2();               // it calls A.prototype.f1();, but A is undefined now
  };
}

var b = new B();
// expect to accessible
var a = new A();

b.makePrivate();
// expect to inaccessible to window
alert(typeof A);         // expect to be 'undefined'
b.callA();               // expect to alert 'f1', which not works now since A is undefined 
```

我想在调用 B 之前使 A 可访问，而在调用 B 时使 A 不可访问。

请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:52:41.120

您可以设置`B`为如下所示：

```
function B() {
    var PrivateA;  // It's not accessible from outside of B's scope

    this.makePrivate = function() {
        PrivateA = A;  // Still in B's scope, so it works
        A = undefined;
    };

    this.callA = function() {
        var a = new PrivateA();  // So is this
        a.f2();
    };
} 
```

这是我运行它时发生的情况：

```
> var b = new B();
> A
function A() {
    this.f1 = function() {
        alert('f1');
    };

    this.f2 = function() {
        // calls f1
        this.f1();
    };
}
> b.makePrivate();
> A
undefined
> b.callA();  // I get an alert that says 'f1' 
```

# r - memory.limit() 的 R 内存问题

> ID：14352565
> 
> 赞同：7
> 
> 时间：2013-01-16T06:31:37.197
> 
> 标签：r, memory-management

我正在一台 16GB 内存的机器上运行一些模拟。首先，我遇到了一些错误：

```
Error: cannot allocate vector of size 6000.1 Mb (the number might be not accurate) 
```

然后我尝试使用以下方法为 R 分配更多内存：

```
memory.limit(1E10) 
```

选择这么大的数字的原因是因为`memory.limit`不能让我选择小于系统总内存的数字

```
In memory.size(size) : cannot decrease memory limit: ignored 
```

完成此操作后，我可以完成我的模拟，但 R 占用了大约 15GB 内存，这阻止了我进行任何后期分析。

我曾经`object.size()`估计所有生成的变量所使用的总内存，只用了大约 10GB。我不知道 R 把剩下的内存放在哪里了。所以我的问题是如何在不爆炸机器的情况下合理地为 R 分配内存？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:57:20.207

R 被解释为所见即所得（所见即所得*）*。正如评论中提到的，由于复制所述对象，您需要存储对象所需的更多内存。此外，除了效率低下之外，嵌套`for`循环也可能不是一个好主意，因为`gc`它不会在最里面的循环中运行。如果您有任何这些，我建议您尝试使用矢量化方法删除它们，或者您手动调用`gc`循环以强制进行垃圾收集，但请注意这会减慢速度

下面的例子可以说明简单对象所需的内存问题。此代码生成一个`data.frame`对象。观察之前、之后的内存使用情况以及生成的对象大小。`gc`在调用之前允许积累很多垃圾。我认为垃圾收集在 Windows 上比 *nix 系统有问题。我无法在 Mac OS X 上复制底部的示例，但我可以在 Windows 上重复。循环和更多解释可以在[R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)第 13 页中找到...

```
# Current memory usage in Mb
memory.size()
# [1] 130.61
n = 1000

# Run loop overwriting current objects
my.df <- data.frame(a=character(0), b=numeric(0))
for(i in 1:n) {
this.N <- rpois(1, 10)
my.df <- rbind(my.df, data.frame(a=sample(letters,
this.N, replace=TRUE), b=runif(this.N)))
}
# Current memory usage afterwards (in Mb)
memory.size()
# [1] 136.34

# BUT... Size of my.df
print( object.size( my.df ) , units = "Mb" )
0.1 Mb 
```

# hadoop - 使用自定义块结构将文件加载到 HDFS

> ID：14352568
> 
> 赞同：0
> 
> 时间：2013-01-16T06:32:03.423
> 
> 标签：hadoop, hdfs

我想将[SegY](http://en.wikipedia.org/wiki/SEG_Y)文件加载到 3 节点 Apache Hadoop 集群的 HDFS 上。

总而言之，SegY 文件包括：

1.  3200 字节**的文本头**
2.  400字节**二进制头**
3.  可变字节**数据**

文件的 99.99% 大小是由于可变字节数据是数千个连续跟踪的集合。为了使任何 SegY 文件有意义，它必须具有文本标题 + 二进制标题 + 至少一条数据轨迹。我想要实现的是将一个大的 SegY 文件拆分到 Hadoop 集群上，以便在每个节点上都有一个较小的 SegY 文件用于本地处理。

场景如下：

1.  SegY 文件很大（10GB 以上），位于 NameNode 机器的本地文件系统上
2.  该文件将在节点上以这样的方式拆分，每个节点都有一个具有严格结构的小 SegY 文件 - 3200 字节**文本头**+ 400 字节**二进制头**+ 可变字节**数据** 显然，我不能盲目使用 FSDataOutputStream 或 hadoop fs -copyFromLocal 因为这可能无法确保需要较大文件块的格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:58:36.587

似乎有[一个 Github 项目](https://github.com/cloudera/seismichadoop)做类似的事情：

加载命令`suhdp`将在本地机器上获取 SEG-Y 或 SU 格式的文件，格式化它们以供 Hadoop 使用，然后将它们复制到 Hadoop 集群。

```
suhdp load -input <local SEG-Y/SU files> -output <HDFS target> [-cwproot <path>] 
```

这可能不是您所需要的，但这似乎是我能找到的将 SEG-Y 文件加载到 HDFS 中的最简单方法。

# ruby-on-rails - 在 Ruby on rails 中的 mongodb 中搜索双重大小写

> ID：14352570
> 
> 赞同：0
> 
> 时间：2013-01-16T06:32:06.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

这里我在模型中的代码是

```
def self.search(search)
    if search
     where(name: /#{Regexp.escape(search)}/i)
    else
      scoped
    end
  end 
```

现在我想添加另一个字段来搜索

```
where(price: /#{Regexp.escape(search)}/i) 
```

所以我的查询应该搜索两个字段

```
 where(name: /#{Regexp.escape(search)}/i) (or)  where(price: /#{Regexp.escape(search)}/i) 
```

如何在 mongodb 中添加这两个字段，如 或 . 工作示例被接受。因为我对mongodb知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:11:01.207

如果您使用的是 Mongoid 3，则可以这样编写查询：

```
self.or({name: /#{Regexp.escape(search)}/i}, {price: /#{Regexp.escape(search)}/i}) 
```

如果您使用的不是 Mongoid 3（如 MongoMapper 或 Mongoid 2），请提供名称和版本号。

**来源：** Mongoid 3 的选择语法文档在[这里](http://mongoid.org/en/origin/docs/selection.html#standard)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:11:01.357

试试这个
`where('$or' => [{"name" => "/#{Regexp.escape(search)}/i"}, {"price" => "/#{Regexp.escape(search)}/i"}])`

# c# - C# 中的 iTunes 开发

> ID：14352575
> 
> 赞同：0
> 
> 时间：2013-01-16T06:32:28.867
> 
> 标签：c#, itunes

我是 ac# web 开发人员，但我正在做一个涉及 iTunes 的副项目。我正在查看来自 codeplex 的一些项目，其中一些包含 Interop.iTunesLib.dll。这篇旧文章也包含相同的文件[http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=12369](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=12369)。

有谁知道这个文件来自哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:45:46.227

上述 iTunes COM 对象与应用程序一起安装。这是[Scott Hanselman](http://www.hanselman.com/blog/RemovingDeadTracksDuplicatesThatDontExistFromITunesUsingC.aspx)使用 COM 对象删除重复轨道的示例。

# arrays - 获取表格条目的算法？

> ID：14352576
> 
> 赞同：0
> 
> 时间：2013-01-16T06:32:32.407
> 
> 标签：arrays, algorithm, multiple-entries

假设我有这张非负条目表：

```
 1   2   3   sum
1   4   5   1   10
2   6   12  7   25
3   0   3   14  17
4   7   2   5   14
sum 17  22  27  66 
```

给定：

1.  列数 C 和行数 R
2.  两个总和条目（每行的总和和每列的总和）
3.  和总数（本例中为 66）

目标是生成表格的条目（内部单元格；不是相同的单元格。但是，总和必须等于每行和每列的给定值）所有条目必须是正值。

任何伪代码来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:50:52.727

以您喜欢的任何顺序遍历表格单元格。在每一步都放两个总和约束仍然允许的最大数字。

例如，如果我们逐行进行：

```
10  0  0
 7 18  0
 0  4 13
 0  0 14 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:14:18.090

试试我的伪代码。这条规则命名为“西北角规则”（我在 wiki 上找不到这条规则的真实名称）

```
row = 1
col = 1

while (col <= C && row <= R)
  Matrix[col, row] = Min(colsum[col], rowsum[row])
  colsum[col] = colsum[col] - Matrix[col, row]
  rowsum[row] = rowsum[row] - Matrix[col, row]
  while (col <= C && colsum[col] == 0) col++
  while (row <= R && rowsum[row] == 0) row++

Print Matrix; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:41:55.747

创建一组线性方程，如；X+ Y + .. = 总和

对于每一行和每一列。并使用求解线性方程组的标准方法求解。

# java - 使用 Core JAVA 编程 - 反射 API

> ID：14352577
> 
> 赞同：9
> 
> 时间：2013-01-16T06:32:33.750
> 
> 标签：java, reflection

> **可能重复：**
> [什么是反射，它为什么有用？](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)

Java中反射的确切用途是什么？有人可以举个例子吗？如果有任何相关的概念，请分享。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T07:01:08.303

反射是一种强大的构造，经常被 Guice 和 Hibernate 等底层库用来简化生活。它通常用于需要配置类然后动态实例化的地方。例如：

```
public Strategy prepare(String clazz, Properties config) throws ClassNotFoundException, InstantiationException, IllegalAccessException {
    Class<?> clazz = Class.forName(clazz);
    Strategy strategy = (Strategy) clazz.newInstance();
    strategy.initialise(config);
    return strategy;
} 
```

在这里，clazz 参数命名要实例化的类。假定该类将是 Strategy 类/接口的子类。然后也使用通过 config 参数传入的设置来启动它。这允许高度可配置/动态的环境。

然而，反射经常会导致非常危险（和恶意）的代码，因此，除非绝对必要，否则应该避免反射。还要记住，反射比直接调用要慢。这是一个从生产系统中提取的如何不使用反射的实际示例。

```
private static CacheManager getRawInstance() {
    lock.lock();
    try {
        final Field field = CacheManager.class.getDeclaredField("singleton");
        field.setAccessible(true); // << -- ??
        return (CacheManager) field.get(CacheManager.class);
    } catch (Exception e) {
        logger.error(e.getMessage(), e);
        return null;
    } finally {
        lock.unlock();
    }
} 
```

在这里，ehcache 中的私有字段被更改和访问。这是彻头彻尾的糟糕编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:14:57.323

TechExchange 在解释反射方面做得很好。反射似乎是 Java 中的害群之马。我总是听到人们说这是它的错误和容易出错，但我发现它在正确完成时非常稳定和高效。我会说避免使用它并尝试使用内省库而不是编写本机反射代码。自省和反射一样，一般只是建立在底层反射库上的库。如果您正在使用 bean，那么 Spring 和 Apache-commons 都有很好的工具。

Spring 和 Apache 只针对 getter，不幸的是，我并不生活在 bean 世界中。我必须使用的一些对象是布尔“is”方法，并且确实发现自己正在编写反射代码。

无论如何，这里有一些简单的反射代码，它用 0 个参数存储每个公共方法。

```
public void foo(final Class _class){
    List<Method> methods = new ArrayList<Method>(){{
        for( Method method : _class.getMethods() ) {

            if( Modifier.isPublic( method.getModifiers() ) 
                && method.getGenericParameterTypes().length == 0 ){

            add(method);
        }
    }};
} 
```

# php - Smarty 包含动态内容的 tpl？

> ID：14352580
> 
> 赞同：0
> 
> 时间：2013-01-16T06:33:07.673
> 
> 标签：php, smarty

我对 smarty 有一点问题，但不知道如何解决这个问题。

这是我的 index.tpl

```
<body>
    {include file='header.tpl'}
    {include file='leftmenu.tpl'}
    <div id=content>
    {include file="news.tpl" }
    {include file="rightmenu.tpl"}
</body> 
```

我的问题是这条线

```
<div id=content>
    {include file="news.tpl" } 
```

`news.php`是一个应该显示的文件`news.tpl`，因为它是我的新闻系统。

在`news.php`中，我查询 mysql 数据库并将结果提供给`news.tpl`.

但是当我写上面的行时，`news.tpl`不知道结果来自哪里。

希望有人能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:41:12.767

你做这样的事情，`Smarty_Data`会帮助你

```
$data = new Smarty_Data;
$data->assign('foo','bar');
$smarty->display('news.tpl',$data); 
```

将您的`news`阵列发送到`assign`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:27:11.853

这将是一个不错的选择。您可以简单地添加 PHP 标记以包含 PHP 文件

> {php} 包括“news.php”；{/php}

# php - 无法在 PHP curl 中将联系人添加到谷歌

> ID：14352582
> 
> 赞同：0
> 
> 时间：2013-01-16T06:33:24.693
> 
> 标签：php, xml, curl, google-contacts-api

我想向谷歌联系人添加一个包含数据的联系人。我收到错误消息，因为“您的请求中有错误。这就是我们所知道的。”

代码如下

```
<?php
$contact_detail='<?xml version="1.0"?>
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005">
    <gd:name>
        <gd:firstName>John</gd:firstName>
        <gd:additionalName> test</gd:additionalName>
        <gd:givenName>Doe</gd:givenName>
    </gd:name>
    <gd:email address="john@doe.com" rel="http://schemas.google.com/g/2005#work"/>
    <gd:email address="john2@doe.com" rel="http://schemas.google.com/g/2005#home"/>
    <gd:organization rel="http://schemas.google.com/g/2005#work">
        <gd:orgName>John Deere</gd:orgName>
        <gd:orgTitle>Owner</gd:orgTitle>
    </gd:organization>
</atom:entry>';
$url="https://www.google.com/m8/feeds/contacts/default/full";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_MUTE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
curl_setopt($ch, CURLOPT_POSTFIELDS, "$contact_detail");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
print($output);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:45:36.583

[https://developers.google.com/google-apps/contacts/v2/developers_guide_protocol](https://developers.google.com/google-apps/contacts/v2/developers_guide_protocol)

要发布此条目，请将其发送到联系人列表帖子 URL，如下所示。首先，使用 application/atom+xml 内容类型将您的 Atom 元素放在新 POST 请求的正文中。然后将其发送到帖子 URL。例如，要将联系人添加到属于 liz@gmail.com 的联系人列表，请将新条目发布到以下 URL：[https ://www.google.com/m8/feeds/contacts/liz%40gmail.com/满的](https://www.google.com/m8/feeds/contacts/liz%40gmail.com/full)

# java - 关于计算内部列表的大小是 Map 的值

> ID：14352584
> 
> 赞同：0
> 
> 时间：2013-01-16T06:33:27.853
> 
> 标签：java

我有一个查询我有一个由键和值组成的 Map 将是 list 类型

```
Map<String, List<String>> ppvValidatedinfo = new Map<String, List<String>> 
```

现在我最初将一些数据添加到地图中

```
 1234 , 456987 
```

但是下次当数据添加到地图时，它会变成这样

```
1234 , [456987,125789] 
```

如上图1234是key，456987,125789是list内部维护的值，是map的值

现在我的查询是我必须在列表大小增加超过 1 的情况下进入流程，请告知我如何跟踪列表的大小，我想跟踪列表的大小，它是 map 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:01:28.833

每当您进行插入时，请在插入后添加检查以查看列表大小是否大于一。例如

```
public void add(String key,String value){
ppvValidatedinfo.get(key).add(value);
if(ppvValidatedinfo.get(key).size()>1){
//size is greater than 1 
doProcessing();
}
} 
```

# logging - nginx错误日志跳过规则

> ID：14352585
> 
> 赞同：0
> 
> 时间：2013-01-16T06:33:31.130
> 
> 标签：logging, nginx

我不断收到 /var/www/html/[ 在 nginx 错误日志中带有方括号的请求，我找不到生成此类调用的原因。

有没有办法跳过用这个东西阻塞我的日志？

# sql - 在不同的行中显示两列的重复值

> ID：14352586
> 
> 赞同：2
> 
> 时间：2013-01-16T06:33:42.113
> 
> 标签：sql

我有一个表，其中可以有两个报纸发布日期的特定值，该值仅插入 NewsPaperDate 下的单个列中。所有剩余的值都会重复。现在我必须编写一个查询，其中两个 NewsPaperDate 值应该显示在两列下的单行中，NewsPaperDate1 和 NewsPaperDate2，其余的值![在此处输入图像描述](../Images/ca534eb794cb42d3dc73976965a55769.png)。有人可以帮忙吗？数据库是 Sql Server![在此处输入图像描述](../Images/60fbb0e9c36189352c7b35244a9c83b1.png) 表结构是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:42:44.650

您需要将表连接到自身。有不同的方法可以做到这一点，但根据您的屏幕截图，您可以这样做：

```
select 
    a.yonja_no, 
    a.newspaper_date as newspaperdate1, 
    b.newspaper_date as newspaperdate2
from newspapertable a, newspapertable b
where a.yonja_no = b.yonja_no
and a.newspapere_s > b.newspapere_s
; 
```

（编辑：见评论）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:53:45.307

检查[小提琴链接](http://sqlfiddle.com/#!4/c130c/2/3)以使用示例数据执行查询

```
create table tab1(newspaperDate number,b number,c number);
INSERT INTO tab1 VALUES(1,2,3);
INSERT INTO tab1 VALUES(2,2,3);
INSERT INTO tab1 VALUES(3,3,4);

SELECT t1.newspaperDate AS date1,t2.newspaperDate AS date2 , t1.b AS b1,t1.c AS c1 FROM tab1   t1 , tab1   t2
WHERE t1.newspaperDate < t2.newspaperDate AND t1.b=t2.b ; 
```

**输出**

```
| DATE1 | DATE2 | B1 | C1 |
---------------------------
|     1 |     2 |  2 |  3 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:12:25.867

> 将表连接到自身是查询的最佳方法。读这个

[http://www.thunderstone.com/site/texisman/joining_a_table_to_itself.html](http://www.thunderstone.com/site/texisman/joining_a_table_to_itself.html)

# c# - 如何删除 MS ACCESS 中列的“验证规则” - 使用查询

> ID：14352592
> 
> 赞同：1
> 
> 时间：2013-01-16T06:34:20.770
> 
> 标签：c#, ms-access

我在 MS ACCESS 中有一个客户文件，它包含许多表。

**案子：**

在列（Y）的表（X）中有“= 1或2”的验证规则。如果可能，我想将其更改为“= 1 OR 2 OR 3 OR 4”，它是一个字节列。否则我想完全删除该列的验证规则。我正在使用 C#，我需要一个查询来这样做.......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:30:50.280

Access SQL 不能用于添加、删除或更改验证规则。这只能通过 DAO TableDef 来完成。

如果您在 Access 中使用 VBA，您可以这样做来创建您的验证规则。

```
CurrentDb.TableDefs("X").Fields("Y").ValidationRule = "IN (1,2,3,4)" 
```

我使用`IN (1,2,3,4)`而不是`1 OR 2 OR 3 OR 4`，但任何一个都应该工作。

也许你可以用`Microsoft.Office.Interop.Access`c# 来做同样的事情。

另一种方法是使用 Access SQL 创建检查约束。检查约束与验证规则不同，但可用于实现相同的目标。

```
ALTER TABLE X ADD CONSTRAINT one_to_four CHECK (Y IN (1,2,3,4)); 
```

您仍然需要放弃现有的验证规则。如果这不可行，您可以创建一个与旧表具有相同结构的新表，添加检查约束，最后将数据从旧表加载到新表中。

# http - 如何使用 HTTP 协议发送视频块进行流式传输？

> ID：14352599
> 
> 赞同：10
> 
> 时间：2013-01-16T06:35:20.113
> 
> 标签：http, sockets, video, streaming

我正在创建一个使用套接字将数据发送到其他设备的应用程序。我正在使用 Http 协议来发送和接收数据。现在的问题是，我必须流式传输视频，但我不知道如何发送视频（或流式传输视频）。

如果用户直接跳转到视频中间，那么我应该如何发送数据。

谢谢...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T09:24:25.893

HTTP 在设计时并没有真正考虑到流式传输。老实说，最好的协议是基于 UDP 的（[SCTP](https://en.m.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)在某些方面甚至更好，但支持很粗略）。但是，我很欣赏您可能受限于 HTTP，因此我将按书面形式回答您的问题。

我还应该指出，流媒体视频实际上是一个相当深奥的话题，我在这里所能做的就是尝试触及您可能想要研究的一些方法。如果您可以控制端到端解决方案，那么您可以做出一些选择 - 如果您只控制一端，那么您的选择或多或少取决于另一端可用的内容。

如果您只想从文件的开头播放，那么它相当简单 - 发出标准的 HTTP 请求并在缓冲足够的视频后立即开始播放，这样您就可以在赶上下载之前完成文件的下载速度。您不需要任何特殊的服务器支持，任何视频格式都可以使用。

寻找更棘手。您可以采用 YouTube 等网站过去采用的方法，即*在*文件下载到足以到达视频中的那个点之前不允许用户搜索（或者让他们看着微调器直到达到那个点） . 然而，这并不是当今大多数人所期望的用户体验。

为了做得更好，您需要控制流媒体客户端。我建议将文件分块处理，并一次对一个块发出[字节范围请求。](https://en.m.wikipedia.org/wiki/Byte_serving)当用户寻找文件中间时，您可以计算出文件中的字节偏移量并从该点开始发出字节范围请求。

如果视频格式在开始时包含某种索引，那么您可以使用它来计算文件偏移量 - 因此，您的视频客户端必须至少请求足够的索引才能进行任何搜索。

如果该格式没有任何形式的索引，但它以恒定比特率 (CBR) 编码，那么您可以执行初始`HEAD`请求并查看`Content-Length`标头以查找文件的大小。然后，如果用户在视频中寻找 40% 的路径，例如，您只需在编码帧中寻找 40% 的路径。这依赖于对文件格式的足够了解，以便您可以计算适当的搜索点，以便您可以识别帧信息等（或者至少是一种编码格式，即使您跳转也可以重新同步音频和视频流在文件中的任意位置）。这种方法也可能适用于可变比特率 (VBR)，只要格式能够让您从任意搜索中恢复即可。

这并不理想，但正如我所说，HTTP 并不是真正为流媒体设计的。

如果您可以控制文件格式和服务器，则可以通过使每个块成为单独的资源来使生活更轻松。这就是[Apple HTTP 实时流媒体](https://developer.apple.com/streaming/)和[Microsoft 平滑流媒体](https://www.microsoft.com/silverlight/smoothstreaming/)的工作方式。他们需要工具支持来预处理视频，我不知道你是否控制了服务器端。然而，可能值得研究。这些还做了更聪明的技巧，例如允许客户端在以不同比特率编码的多个版本的流之间切换，以应对带宽差异。

# blackberry - 黑莓中的 net_rim_crypto 错误

> ID：14352601
> 
> 赞同：1
> 
> 时间：2013-01-16T06:35:28.770
> 
> 标签：blackberry, installation

我正在开发一个黑莓应用程序来编码和解码一些重要信息。为此，我在我的应用程序中使用了 net.rim.device.api.crypto.* 包。我正在 blackberry OS 7.1 模拟器中开发，但我的 blackberry 设备有 OS 5.0 。当我尝试在我的设备中下载该应用程序时，它给了我以下错误：

> “此应用程序需要以下未安装的模块：net_rim_crypto”

此外，我无法使用更新站点并安装以前的黑莓操作系统版本，因为每当我尝试安装它时安装都会失败。

所以，我的问题主要是：在这种情况下，如何使我的应用程序向后兼容？此外，我无法在设备上安装和运行我的应用程序（如上所述）。我怎样才能做到这一点？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:02:59.447

请注意，BlackBerry 应用程序不向后兼容，也就是说，基于 OS 7.0 构建的应用程序无法与 OS 6.0 或 OS 5.0 一起使用。但是，在 OS 5.0 上构建的相同应用程序将在 OS 5.0+ 的手机上运行。考虑到您正在 OS 7.1 模拟器中开发应用程序，表明您正在使用 BlackBerry JRE 7，而您实现的 net_rim_crypto 似乎在 OS 5 中缺失。要为 OS 5 开发应用程序，请使用 JRE 5。

# arduino - 需要在 CodeBlocks 中自定义链接器

> ID：14352603
> 
> 赞同：1
> 
> 时间：2013-01-16T06:35:39.033
> 
> 标签：arduino, codeblocks

我正在使用[CodeBlocks](http://en.wikipedia.org/wiki/Code%3a%3aBlocks)编译 Arduino 项目。默认链接器命令如下：

```
$avr-gcc  -o bin/Release/test2.elf .objs/cores/CDC.o .objs/cores/HardwareSerial.o .objs/cores/HID.o .objs/cores/IPAddress.o .objs/cores/main.o .objs/cores/new.o .objs/cores/Print.o .objs/cores/Stream.o .objs/cores/Tone.o .objs/cores/USBCore.o .objs/cores/WInterrupts.o .objs/cores/wiring.o .objs/cores/wiring_analog.o .objs/cores/wiring_digital.o .objs/cores/wiring_pulse.o .objs/cores/wiring_shift.o .objs/cores/WMath.o .objs/cores/WString.o .objs/libraries/libraries.o .objs/test2.o   -Wl,--gc-sections -Os -mmcu=attiny84  -lc -lm 
```

Arduino IDE 使用不同的方法。它使用[avr-ar](http://ccrma.stanford.edu/planetccrma/man/man1/avr-ar.1.html)创建单个库，然后对其执行链接：

```
/usr/bin/avr-ar rcs build-attiny84at1/libcore.a  build-attiny84at1/WInterrupts.o  build-attiny84at1/wiring_analog.o  build-attiny84at1/wiring.o  build-attiny84at1/wiring_digital.o  build-attiny84at1/wiring_pulse.o  build-attiny84at1/wiring_shift.o  build-attiny84at1/CDC.o  build-attiny84at1/HardwareSerial.o  build-attiny84at1/HID.o  build-attiny84at1/IPAddress.o  build-attiny84at1/main.o  build-attiny84at1/new.o  build-attiny84at1/Print.o  build-attiny84at1/Stream.o  build-attiny84at1/Tone.o  build-attiny84at1/USBCore.o  build-attiny84at1/WMath.o  build-attiny84at1/WString.o
/usr/bin/avr-gcc -mmcu=attiny84 -Wl,--gc-sections -Os   -o build-attiny84at1/test.elf build-attiny84at1/sketch.o build-attiny84at1/test.o build-attiny84at1/libcore.a  -lc -lm 
```

我的问题是 CodeBlocks 链接语句导致代码大得多。我可以看到两者之间的唯一区别是 Arduino 方式首先创建了一个库。当我比较两者的反汇编（.lss 文件）时，Arduino 有一个很好的紧凑文件，其中散布着源代码。相比之下，CodeBlocks 有很多神秘代码，而且没有我的源代码语句。

有没有办法让 CodeBlocks 首先通过 avr-ar 创建一个库，然后与之链接？这似乎是我的问题，还是我错过了什么？

# javascript - 使用 mocha 的 --debug-brk 开关启用节点调试器的正确方法是什么？

> ID：14352608
> 
> 赞同：78
> 
> 时间：2013-01-16T06:36:16.590
> 
> 标签：javascript, node.js, mocha.js, dom-events

我在我的测试模块中有一些调试器语句，我想用`--debug-brk`set 运行 mocha 并点击我的断点，以便我可以检查我的模块的状态。不幸的是，每当我使用此选项运行 mocha 时，下一行都会出现空白光标。我可以输入文本，但似乎没有任何东西在处理我的命令（它肯定不像节点调试器）：

```
$ mocha --debug-brk tests.js -R spec
debugger listening on port 5858
[BLANK CURSOR] 
```

我在启动摩卡咖啡的方式上做错了吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2016-10-06T16:25:54.340

使用最新版本的 nodejs ( [>=v6.3.0](https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V6.md#2016-07-06-version-630-current-fishrock123) ) 和 mocha ( [>=3.1.0](https://github.com/mochajs/mocha/blob/master/CHANGELOG.md#310--2016-09-27) )，您可以使用[V8 检查器集成](https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js)。

> V8 Inspector 集成允许将 Chrome DevTools 附加到 Node.js 实例以进行调试和分析

**用法**

`--inspect`激活 V8 检查器集成，并`--debug-brk`在开头添加断点。由于[nodejs v7.6.0](https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V7.md#2017-02-21-version-760-current-italoacasas)和[mocha v3.3.0](https://github.com/mochajs/mocha/releases/tag/v3.3.0)，您可以使用`--inspect-brk`简写为`--inspect --debug-brk`

```
$ mocha --debug-brk --inspect
Debugger listening on port 9229.
Warning: This is an experimental feature and could change at any time.
To start debugging, open the following URL in Chrome:
chrome-devtools://devtools/remote/serve_file/@62cd277117e6f8ec53e31b1be58290a6f7ab42ef/inspector.html?experiments=true&v8only=true&ws=localhost:9229/node 
```

**使用 npm 脚本**

如果你有一个使用 mocha 的 npm 测试脚本，你可以通过使用*end of option delimiter* `--`将选项从 npm 传递到你的 mocha 脚本：

`$ npm test -- --inspect --debug-brk`

**镀铬笔尖**

不要每次都复制粘贴网址，而是转到`chrome://inspect`并单击“远程目标”部分中的相应链接。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-04-30T09:25:06.767

要回答最初的问题，即使我也建议您研究一下：您可以使用带有选项的`node-inspector`mocha 内置在 node 中的 CLI 调试器，而不是or*标志*。（注意没有破折号。）`debug``--debug``--debug-brk`

 *相反，在您的示例中，它将是：

```
$ mocha debug tests.js -R 规范
侦听端口 5858 的调试器
连接...好的
中断 node_modules/mocha/bin/_mocha:7
  5 */
  6
  7 var program = require('commander')
  8、sprintf = require('util').format
  9、路径=需要（'路径'）
调试> [光标]
```

同样，`debug`如上粗体，没有破折号。(=

相关：[https ://github.com/visionmedia/mocha/issues/247](https://github.com/visionmedia/mocha/issues/247)

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-01-29T15:41:35.393

我能够使用[node-inspector 让它](https://github.com/dannycoates/node-inspector)工作。我像你在一个 shell 中显示的那样运行我的测试：

```
mocha --debug-brk mocha/test.js 
```

然后在第二个 shell 中运行 node-inspector：

```
node-inspector 
```

调出 node-inspector 在浏览器中显示的 URL 允许我使用 Web 检查器进行调试。

```
http://127.0.0.1:8080/debug?port=5858 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-07-19T23:23:29.787

如果你安装了 node-inspector，你可以调试你的 Mocha 测试，而无需先实际运行 node-inspector。最简单的方法是

```
node-debug _mocha 
```

这应该开始在 chrome 中调试节点测试（也适用于 Safari）

我看到测试不起作用的一个原因是有时您尝试使用[http://localhost:8080/debug?port=5858](http://localhost:8080/debug?port=5858)或[http://127.0.0.1:8080/debug?port=5858](http://127.0.0.1:8080/debug?port=5858)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-20T03:24:47.390

运行带有标志的 mocha`--inspect-brk`并在页面中单击 chrome 中的“open dedicated DevTools for node” `chrome://inspect`。在专用的 DevTools 窗口中添加连接`localhost:9229`以自动连接。

`debugger`还要在要调试的文件中添加一条语句。

（这是使用截至 2017 年 10 月的最新版本的 node 和 chrome）*

# python - 如何修复 Python 对象的破坏方法？

> ID：14352610
> 
> 赞同：4
> 
> 时间：2013-01-16T06:36:21.470
> 
> 标签：python, object, methods

在交互式 Python 会话中，我有时会做一些愚蠢的事情，例如

```
plot.ylimits = (0,100) 
```

其中 plot 是某个 Plot 类的一个实例，而 ylimits 是它的一个方法。我应该点击这个：

```
plot.ylimits(0,100) 
```

Python 的工作方式，绘图对象现在有一个名为 ylimits 的新成员，它保存一个元组作为它的值，方法，最初由 Plot 类提供的可执行子例程，它曾经被 ylimits(...) 调用是走了。也许在我脑海中的某个地方，我认为 ylimits 是一个属性，并且分配给它会调用一些隐藏的 setter 方法，就像在其他一些语言中所做的那样。

我怎样才能找回那个方法？只是如何修复我的绘图对象，同时留在我有许多其他变量、函数等在使用的交互式会话中？

我发现 reload(theplotmodule) 不起作用。我破坏了 Plot 的一个特定实例；刷新 Plot 类和其他东西的定义并没有帮助。

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T06:41:00.937

一个简单的方法是做`del plot.ylimits`。通常，方法是在类上定义的，而不是在实例上定义的。每次您尝试访问属性时，Python 都会查找属性，当它在实例上找不到它们时，它会转到类。当您这样做时`plot.ylimits=(0,100)`，您创建了一个新的实例属性，因此 Python 停在那里并且不寻找类属性，即使它仍然存在。 `del plot.ylimits`将删除实例属性，现在`plot.ylimits`将通过在类中查找来再次访问该方法。

但是请注意，这仅在您覆盖的内容最初位于类而不是实例时才有效。如果您实际上将数据存储在实例上，并且您将其覆盖，那么它就永远消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:45:13.930

*啊，BrenBarn 的回答比我的好多了，但还是……*

使用 plots 类中的方法将其分配回来（假设您没有保留绑定方法）并将其转换为 MethodType，如下所示：

```
class C:

    def f(self):
        print "hello!"

c = C()

c.f = "opps!"

import types
c.f = types.MethodType(C.f, c)

c.f() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:58:40.960

使用[ipython notebook](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html)，然后您可以根据需要重新运行和修改一段代码。

[ipython notebook](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html)是一个交互式 python 解释器，它使用浏览器作为前端。最初设置有点痛苦，但非常适合探索性编码。

# javascript - 允许用手指缩放谷歌地图 - PhoneGap for Android

> ID：14352612
> 
> 赞同：3
> 
> 时间：2013-01-16T06:36:30.857
> 
> 标签：javascript, android, html, google-maps, cordova

我有一个应用程序`PhoneGap`，`Android`我使用**Android 2.2**设备和**Phone Gap 2.2.0**版本..

我想让用户通过**手指**缩放地图

（在具有更高级版本的设备上它可以工作！）

为什么在这个版本上不起作用？

我需要定义一些东西来使它工作吗？

这是我在 HTML 中指向 Google 地图的链接：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script> 
```

这些是文件 Manifest.xml 的权限：

```
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.GET_ACCOUNTS"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:08:56.433

你`user-scalable=yes`在视口中设置好了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:30:39.310

这可能是硬件问题。许多（较旧的）android 设备不支持多点触控。如果您的设备不支持，则无法使用捏合缩放。

检查[android：我如何验证该设备支持多点触控？](https://stackoverflow.com/questions/5584977/android-how-can-i-verify-that-device-support-multitouch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:27:55.550

如果您设置属性 user-scalable=yes 不成功，您可以在 DroidGap 的 Activity 扩展中尝试此操作。

```
super.appView.getSettings().setSupportZoom(true);
    super.appView.getSettings().setBuiltInZoomControls(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T21:03:59.127

所以你的模拟器运行的是 Android 2.2 (Froyo) 对吗？如果是这样，请首先检查您的环境中安装了哪些 API。听起来很简单，但您想检查您的包，以及是否可以在每次切换 API 级别时更新。（例如 Fryo 是 API 8 级）

[Fryo API Android 2.2](http://developer.android.com/about/versions/android-2.2.html)另外，您是否尝试过使用为 2.2 指定的对象手势来操纵您的意图。

[ScaleGestureDetectorClass](http://developer.android.com/reference/android/view/ScaleGestureDetector.html)

希望这对你有帮助！

# java - 区域失败时的 HBase 远程连接

> ID：14352613
> 
> 赞同：0
> 
> 时间：2013-01-16T06:36:31.793
> 
> 标签：java, hadoop, hbase

在过去的两天里，我几乎尝试了所有方法来让远程机器与 HBase 连接。以下是我收到的错误以及我的所有配置。我正在通过笔记本电脑连接到我的虚拟机。虚拟机是ubuntu，笔记本是win7

任何帮助将不胜感激。

/etc/hosts

```
127.0.0.1       localhost
192.168.1.139   ubuntuvm-1204-64

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

/usr/local/hbase/conf/hbase-site.xml

```
<configuration>
<property>
    <name>hbase.rootdir</name>
    <value>file:///usr/local/hadoop-apps/hbase/</value>
</property>
<property>
    <name>hbase.cluster.distributed</name>
    <value>true</value>
</property>
<property>
    <name>hbase.zookeeper.quorum</name>
    <value>192.168.1.139</value>
</property>
<property>
    <name>hbase.master.info.port</name>
    <value>60010</value>
</property>
<property>
  <name>hbase.master.info.bindAddress</name>
  <value>192.168.1.139</value>
</property>
</configuration> 
```

纳米 /usr/local/hbase/conf/regionservers

```
192.168.1.139 
```

Java 代码

```
Configuration config = HBaseConfiguration.create();

config.set("hbase.master", "192.168.1.139:60010");
config.set("hbase.zookeeper.quorum", "192.168.1.139");
config.set("hbase.zookeeper.property.clientPort","2181");

HTable table;
try 
{
    table = new HTable(config, "t");
    Put p = new Put(Bytes.toBytes("r1"));
    p.add(Bytes.toBytes("cf"), Bytes.toBytes("someQualifier"),
    Bytes.toBytes("Some Value"));
    table.put(p);
....... 
```

Hbase 外壳

```
Version 0.94.3, r1408904, Wed Nov 14 19:55:11 UTC 2012

hbase(main):001:0> list
TABLE                                                                          
t                                                                              
1 row(s) in 0.8950 seconds

hbase(main):002:0> 
```

错误

```
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.3-1240972, built on 02/06/2012 10:48 GMT
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:host.name=WABELHL.org
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0_09
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.home=C:\Program Files\Java\jre7
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.class.path=C:\Users\laptop\workspace\textXML\bin;C:\Users\laptop\Downloads\hbase-0.94.3\lib\commons-configuration-1.6.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\commons-lang-2.5.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\commons-logging-1.1.1.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\hadoop-core-1.0.4.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\log4j-1.2.16.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\protobuf-java-2.4.0a.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\slf4j-api-1.4.3.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\slf4j-log4j12-1.4.3.jar;C:\Users\laptop\Downloads\hbase-0.94.3\lib\zookeeper-3.4.3.jar;C:\Users\laptop\Downloads\hbase-0.94.3\hbase-0.94.3.jar
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.library.path=C:\Program Files\Java\jre7\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\app\laptop...
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=C:\Users\laptop\AppData\Local\Temp\
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:os.name=Windows 7
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:os.version=6.1
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:user.name=laptop
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:user.home=C:\Users\laptop
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Client environment:user.dir=C:\Users\laptop\workspace\textXML
13/01/15 21:53:08 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.139:2181 sessionTimeout=180000 watcher=hconnection
13/01/15 21:53:08 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.1.139:2181
13/01/15 21:53:08 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 7148@WABELHLP0532619
13/01/15 21:53:13 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/01/15 21:53:13 INFO zookeeper.ClientCnxn: Socket connection established to 192.168.1.139/192.168.1.139:2181, initiating session
13/01/15 21:53:13 INFO zookeeper.ClientCnxn: Session establishment complete on server 192.168.1.139/192.168.1.139:2181, sessionid = 0x13c41eaab9b0005, negotiated timeout = 180000
org.apache.hadoop.hbase.client.NoServerForRegionException: Unable to find region for t,,99999999999999 after 10 tries.
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:955)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:860)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:962)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:864)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:821)
at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:234)
at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:174)
at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:133)
at runTest.main(runTest.java:46) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:02:01.907

我对本地机器进行了一次更改。我将 VM ip 和名称添加到 drivers\etc\host 文件中，这似乎解决了问题。

# wpf - WPF DataGrid，添加行时应用程序崩溃

> ID：14352615
> 
> 赞同：13
> 
> 时间：2013-01-16T06:36:41.810
> 
> 标签：wpf, datagrid

我有一个绑定到 TrackableCollection 的 wpf 数据网格。在极少数情况下，并且仅针对少数选定用户，当用户通过输入底部空白行添加新记录时，应用程序将崩溃。我无法重现这个问题，我所拥有的只是抛出异常的堆栈跟踪。有没有人见过这样的事情？我对自动化对等类的了解有限，但我可以确认我们没有在我们的应用程序中使用它们中的任何一个。

这是堆栈跟踪：

```
System.ArgumentNullException: Value cannot be null.
Parameter name: item
   at System.Windows.Automation.Peers.DataGridAutomationPeer.CreateItemAutomationPeer(Object item)
   at System.Windows.Automation.Peers.ItemsControlAutomationPeer.FindOrCreateItemAutomationPeer(Object item)
   at System.Windows.Automation.Peers.DataGridAutomationPeer.RaiseAutomationSelectionEvents(SelectionChangedEventArgs e)
   at System.Windows.Controls.DataGrid.OnSelectionChanged(SelectionChangedEventArgs e)
   at System.Windows.Controls.Primitives.Selector.SelectionChanger.End()
   at System.Windows.Controls.DataGrid.MakeFullRowSelection(Object dataItem, Boolean allowsExtendSelect, Boolean allowsMinimalSelect)
   at System.Windows.Controls.DataGrid.HandleSelectionForCellInput(DataGridCell cell, Boolean startDragging, Boolean allowsExtendSelect, Boolean allowsMinimalSelect)
   at System.Windows.Controls.DataGridCell.OnAnyMouseLeftButtonDown(MouseButtonEventArgs e)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

XAML：

```
<DataGrid Name="OrdreSLinjeGrid" 
          AutoGenerateColumns="False"
          CanUserResizeRows="False"
          CanUserAddRows="{Binding KanLeggeTilOrdreLinjer}"
          HorizontalScrollBarVisibility="Disabled" 
          VerticalScrollBarVisibility="Visible" 
          ItemsSource="{Binding Order.OrderLines, Mode=TwoWay}" CanUserSortColumns="False"
          SelectedItem="{Binding ValgtOrdreLinje}" >
    <DataGrid.Columns>           
        <DataGridTextColumn
            Header="{t:Translate Antall}" 
            TextAlignment="Right" 
            Width="50" 
            HeaderStyle="{StaticResource HøyrejustertColumnHeader}" 
            Binding="{Binding Antall, UpdateSourceTrigger=LostFocus}" />

        <DataGridTextColumn 
            Header="{t:Translate Pris}" 
            Width="60" 
            HeaderStyle="{StaticResource HøyrejustertColumnHeader}" 
            Binding="{Binding Pris, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}" 
             />
    </DataGrid.Columns>
</DataGrid> 
```

任何输入或建议将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-14T15:27:10.943

该问题与`DataGridAutomationPeer.RaiseAutomationSelectionEvents`内部方法中的错误有关，简单地说，它不会检查 SelectedItem 属性是否为空。它可以通过在 Windows 7 中运行“Microsoft Narrator”工具轻松复制。

因为这是一个密封类，所以没有简单的方法可以修复它，除非使用 Reflection.Emit 或任何模拟工具拦截此方法，即使它已修复，我们也无法保证 Microsoft 不会更改此方法名称、签名或行为.

我通过从 DataGrid 继承实现了一个“足够好”的修复，这将改变当 SelectedItem 为空时取消选择 DataGrid 的方式，但前提是存在叙述者/触摸屏。

希望该错误将很快得到修复。如有必要，添加对 UIAutomationProvider 的引用。

```
using System.Windows.Automation.Peers;
using System.Windows.Controls;

public class TooDataGrid: DataGrid
{
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        if(AutomationPeer.ListenerExists(AutomationEvents.SelectionItemPatternOnElementSelected) ||
            AutomationPeer.ListenerExists(AutomationEvents.SelectionItemPatternOnElementAddedToSelection) ||
            AutomationPeer.ListenerExists(AutomationEvents.SelectionItemPatternOnElementRemovedFromSelection))
        {
            if(SelectedItem == null)
            {
                return;
            }
        }
        base.OnSelectionChanged(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-22T13:26:57.317

我知道这已经很老了，但是我遇到了这个问题的一个很好的解决方案。您可以使用接口定义自定义转换器`IValueConverter`：

```
public class SelectedItemConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value ?? DependencyProperty.UnsetValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return (value == null || value.GetType().Name == "NamedObject") ? null : value;
    }
} 
```

这将检查值是否为`null`，如果是，则返回`DependecyProperty.UnsetValue`。如[文档](https://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.110).aspx)中所述（查看方法描述）：

> DependencyProperty.UnsetValue 的返回值指示转换器未生成任何值，并且绑定使用 FallbackValue（如果可用）或默认值。

返回这个而不是`null`应该解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-30T09:04:38.450

不需要转换器或使用派生类。只需确保您为 SelectedItem 绑定的属性已使用 DependencyProperty.UnsetValue 进行初始化。不要将其设置为或保留默认值为 null。

底层错误应该在不久的将来修复，顺便说一句： [https ://developercommunity.visualstudio.com/content/problem/575165/vs-1604-ide-crash-argumentnullexception.html](https://developercommunity.visualstudio.com/content/problem/575165/vs-1604-ide-crash-argumentnullexception.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-18T12:20:37.240

我只有触摸屏有同样的问题。我有一个工作正常的 WPF 应用程序，直到我连接了为该应用程序构建的触摸屏。

当 DataGrid 选定项绑定到为 null 的对象时会出现此问题；

我是这样解决的：

DataGrid Xaml 有这一行：

```
SelectedItem="{Binding SelItem}" 
```

XVVM 看起来像：

```
public MyViewModel SelItem
{

    get
    {
        if (m_selected == null)
             return new MyViewModel();
        else
             return m_selected;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T15:02:46.997

我会尝试在您的视图模型中检查您的属性是否存在空值。如果属性为 null，则将 null 替换为有效值，例如 0 或空白。

您也可以使用值转换器执行此操作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-20T11:41:21.570

我有同样的问题。当用户双击 DataGrid 中的第一行（只有一行）时，它会在 Datagrid 上发生。这只发生在带触摸屏的索尼笔记本电脑上。Sony 软件为 WINFOWS Explorer 中的每个文件添加了复选框。我认为这个问题与索尼软件有关。

# python - 比较一个元素是否存在于两个列表中

> ID：14352621
> 
> 赞同：10
> 
> 时间：2013-01-16T06:37:23.327
> 
> 标签：python, list

检查一个元素是否存在于两个给定列表中的最简单和最优雅的方法是什么。例如，我有两个列表如下？

```
>>>a, b = ['a', 'b', 'g', 'r'], ['e', 'g', 'l', 1, 'w'] 
```

现在在上面给定的列表中，我想检查两个列表中是否存在任何元素。目前我这样做如下

```
def elm_exists(list_a, list_b):
    for elm in list_a:
        if elm in list_b:
            return True
    return False 
```

有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T06:40:35.260

检查以下`a`元素`b`：

```
set(a).intersection(b) 
```

例子：

```
In [44]: nk=set(a).intersection(b)

In [45]: for x in a:
    ...:     if x in nk:
    ...:         print x, 'present in b'
    ...:     else:
    ...:         print x, 'absent in b'
    ...:         
a absent in b
b absent in b
g present in b
r absent in b 
```

还：

```
In [47]: timeit(set(a) & set(b))
1000000 loops, best of 3: 940 ns per loop

In [48]: timeit(set(a).intersection(b))
1000000 loops, best of 3: 854 ns per loop

In [49]: timeit([x for x in a if x in b])
1000000 loops, best of 3: 1 us per loop 
```

因此使用`set(a).intersection(b)`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T06:42:44.150

这有效：

```
>>> l1,l2=['a', 'b', 'g', 'r'], ['e', 'g', 'l', 1, 'w']
>>> list(set(l1)&set(l2))
['g'] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T06:48:31.900

您不需要将两个`list`s 都转换为`set`s，只需一个。我认为跳过不必要的转换使其更具可读性和优雅性。

所以，要么：

```
set(a).intersection(b) 
```

或者：

```
s = set(a)
any(e in s for e in b) 
```

后者的优点是一旦找到一个匹配项就会短路，更好地表达逻辑，并返回`True`or`False`而不是 non-falsey 或 falsey `set`，但如果这让您感到困扰，它是两行而不是一行。我不知道这个优势是否抵消了将循环放在生成器表达式而不是 C 函数中的成本。

s 这么小的性能结果`list`几乎没有意义，所以让我们试试这个：

```
In [373]: a=[random.choice(string.ascii_lowercase) for _ in range(10000)]
In [374]: b=[random.choice(string.ascii_lowercase) for _ in range(10000)]
In [375]: %timeit(set(a))
10000 loops, best of 3: 180 us per loop
In [376]: s=set(a) # since all versions need to do this
In [391]: %timeit(s & set(b))
1000000 loops, best of 3: 178 us per loop
In [392]: %timeit(s.intersection(b))
1000000 loops, best of 3: 247 us per loop
In [393]: %timeit(discard(e in s for e in b))
1000000 loops, best of 3: 550 ns per loop
In [394]: %timeit(any(e in s for e in b))
1000000 loops, best of 3: 749 ns per loop
In [395]: %timeit(any(e in a for e in b))
1000000 loops, best of 3: 1.42 us per loop 
```

要将数字全部放在纳秒级，再加上`set(a)`除了最后需要的所有成本，并比较三个 Python 版本的相同测试（Apple 股票 CPython 2.7.2、python.org CPython 3.3.0、Homebrew PyPy 1.9.0/2.7.2，所有 64 位 Mac 版本）：

```
 CP272  CP330  PyPy
s & set(b)        358000 316000 180500
s.intersection(b) 427000 459000 180900
discard(genexp)   180550 157341  90094
any(genexp)       180749 157334  90208
any(list-genexp)    1420    686    960 
```

现在回想起来，这完全有道理。很早就发生碰撞的几率非常高，因此将整个东西转换为一组的成本决定了一切。

这意味着我们需要一个具有 10000 个唯一值的新测试。让我们重复测试，这样：

```
In [29]: a, b = list(range(10000)), list(range(10000))
In [30]: random.shuffle(a)
In [31]: random.shuffle(b)

                  CP272  CP330  PyPy
s & set(b)        1277000 1168000 1141000
s.intersection(b) 1165000 1117000 2520000
discard(genexp)   1699000 1271000  770000
any(genexp)        389800  344543  320807
any(list-genexp)    62000   10400    1520 
```

这些更合理。他们仍然有意义。如果您要比较相同的 10000 个随机打乱的元素，那么每个元素要走多远？还不足以使`set`-ify 任何一个列表的成本都值得做，更不用说它们两个了！

所以，让我们尝试一个*没有*匹配的情况：

```
In [43]: a=list(range(10000, 20000))

                  CP272     CP330     PyPy
s & set(b)           751000    770000  733000
s.intersection(b)    466000    530000 1920000
discard(genexp)     1246000    985000  749000
any(genexp)         1269000    966000  893000
any(list-genexp)  185000000 176000000 5870000 
```

我不知道 PyPy 是如何如此快速地完成最后一个，但除此之外，这里没有任何惊喜。

那么，哪一个最好呢？

显然，如果您预计会有很多冲突，那么您希望尽可能避免制作集合——但如果您预计很少有冲突，您希望至少制作一组。如果你不知道，我认为最安全的赌注是`any(genexp)`——最坏的情况是最好的情况的不到 3 倍，如果有可能碰撞率很高，它会快很多。但是您可以查看数字并亲自查看。

或者，当然更好的是，根据您期望遇到的真实测试数据对它们进行计时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T06:43:44.477

```
def elm_exists(lista, listb):
    return bool(set(lista) & set(listb)) 
```

该`bool`函数将返回`True`所有非空容器和空容器`False`。集合交集 ( `&`) 将返回两个集合的一组公共元素。请注意，集合将删除所有重复项。

或者，您可以`set(lista).intersection(listb)`在`bool`函数中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T06:48:19.707

```
>>> y = [1,23,3]
>>> z = [3,432]
>>> (3 in y) and (3 in z)
True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T06:49:05.093

这是另一种解决方案，

```
>>> c = [filter(lambda x: x in b, sublist) for sublist in a]
>>> filter (lambda a: a != '', c)
['g'] 
```

# jquery - jquery源在html文件中的位置是否重要

> ID：14352632
> 
> 赞同：2
> 
> 时间：2013-01-16T06:38:29.367
> 
> 标签：jquery, google-app-engine

这是单击按钮弹出警报的示例。

```
<script  type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script> 
```

如果将上述部分放入`head`其中，则可以正常工作。如果上述部分如下所示，则不起作用。 ![在此处输入图像描述](../Images/5951606f900da5c1a69fa41de2d6c85b.png)

这让我抓狂，因为在一个开源代码中，作者说如果将脚本源放在 html 的末尾，页面加载速度会更快。我花了很多时间弄清楚为什么源代码不起作用，我发现原因在脚本 src 部分的位置。

但是，当我在 [http://jsfiddle.net/eSud7/3/](http://jsfiddle.net/eSud7/3/)上进行测试时 ，脚本的位置并不重要。

有人可以解释为什么吗？

我正在使用 Google App Engine 并在 Firefox 浏览器上进行了测试。

附加信息：我正在使用[这个免费模板](https://github.com/usmanhalalit/charisma/zipball/master)。请下载并检查 index.html，作者将所有脚本源放在文档末尾，它可以工作。为什么？？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:44:59.267

是的，您应该在页面底部包含您的脚本，在您的情况下，您甚至在核心库加载之前就调用了 jquery 函数。您必须在 jquery 库之后包含您的脚本，因为函数是在库中定义的，并且在代码执行时必须引用这些函数

```
//At the bottom of the page
<script  type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script>

<script>

      $(document).ready("#button").click(function() {
      alert('button clicked');
});
  </script> 
```

*但是，当我在[http://jsfiddle.net/eSud7/3/](http://jsfiddle.net/eSud7/3/)上进行测试时，脚本的位置并不重要。*

那是因为您已选择在加载时加载 jquery 库（请看左侧），因此您的库在正文加载时包含在 DOM 中，即在您的小提琴中，您给库的位置是多余的

*OP评论的更新*

```
<script>
    $(document).ready("#button").click(function() { //Included at the header, jquery object like $ and function like ready not declared yet !!!
      alert('button clicked');
    });
  </script> 
```

在页面的底部

```
//Contains all the jquery functions
    <script  type="text/javascript"
            src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T07:00:52.533

事实是，在执行脚本操作之前，只有 html 元素会快速呈现并显示给您，看起来页面加载速度更快，

javascript也不是按设计编译的，所以它会逐行执行，所以如果你要求一些jquery函数并且它们还没有被解释，那么浏览器会抛出错误，这就是为什么我们需要首先添加jquery线。

尝试运行

```
<html>
  <body>
    <p> HTML Element</p>

     <script>
      alert("Hello World");
    </script>

  </body>
</html> 
```

对比

```
<html>
    <head>
        <script>
            alert("Hello World");
        </script>
    </head>
    <body>
        <p> HTML Element</p>
    </body>
</html> 
```

或者先看看这个

[在顶部执行的脚本](http://jsfiddle.net/SaurabhBayani/ph64v/1/)

进而

[最后执行的脚本](http://jsfiddle.net/SaurabhBayani/wH8QL/)

它会清除你的概念。

也供您参考，请查看[此](https://softwareengineering.stackexchange.com/questions/138521/is-javascript-interpreted-by-design)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T06:46:10.657

绝对你的脚本不会工作，因为它没有得到 jquery 所需的功能。

所以你必须使用这个脚本下面的脚本：

```
<script  type="text/javascript"
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script>

<script  type="text/javascript">
  // all your code stuff
</script> 
```

这是您必须遵循的顺序，然后将代码放在页面中的任何位置都没有关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:45:00.670

**脚本按照它们在 DOM 中遇到的顺序执行¹**

所以是的，脚本之间的顺序很重要。

在这种情况下，您的脚本在 jQuery*之前*运行，因此尝试访问`$`会导致 ReferenceError。要“修复”它，请将您的脚本*放在*jQuery 脚本元素下。脚本是在 : 中`<head>`还是底部并不重要，但脚本`<body>`的*相对顺序*很重要。

这是*无效*排序的一个简单模型：

```
<script>
   alert($)  // attempt to use $, but ..
</script>
<script>
   $ = "foo" // .. $ not set UNTIL here (later)
</script> 
```

如果这两个脚本元素的顺序颠倒了，那么“foo”将如预期的那样被警告。

* * *

¹（也许除了那些标记为 async=true 的，我不会谈论。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-24T19:36:32.537

这个答案适用于那些对为什么有时代码有效而有时在将库源放在页面底部时却无效的人。

在我自己沉浸在这个谜团中很长一段时间之后，我把它展示出来了。在这个问题上有两个独立且不同的关注点，一个是关于执行代码，一个是关于加载代码。

只要您在加载页面时**不执行任何代码**，jquery 源的位置就**无关紧要。**是的，你没看错，而且绝对正确。

 **请允许我举例说明；

```
<script>
    $("#emailInput").change(function(){
        // perform some operations when a change is detected in the input emailInput
    });
</script>

<script src="https://code.jquery.com/jquery-3.5.0.min.js"></script> 
```

上面的代码将在页面加载时执行。如您所见`$("#emailInput")`，拥有 jquery 选择器**是**在 jquery 库被加载和执行之前执行的（这是 jquery 将定义 $ 及其所做的所有事情的地方）。这就是导致错误*Uncaught ReferenceError: $ is not defined* to be throw 的原因。

但是，如果页面加载时代码没有执行，我们不会有任何错误，这也最好用一个例子来说明。

```
<html>
    <head>
        <script>
            function writeMessage(){
                $("#message").html("Surprise ladies!");
            }
        </script>
    </head>
    <body>
        <button onclick="writeMessage()">Click me</button>

        <div id="message"></div>

        <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    </body>
</html> 
```

上面的代码是完整和正确的，所以你可以自己试试看，它工作得很好。这是因为页面加载时该函数`writeMessage()`尚未执行。该功能仅在按下按钮时执行；这是在页面加载之后（到那时 jquery 库已经加载并执行）。

我在评论中看到，在这个[链接](http://jsfiddle.net/eSud7/3/)中，代码在加载库后工作。删除在底部找到的jquery src，再次运行它，jquery仍然可以工作！我最好的猜测是，代码使用的是 jsfiddle 网站上提供的库。

我希望这能澄清我们一直生活在其中的谜团。**

# jquery - 脚本导致链接有时间延迟

> ID：14352633
> 
> 赞同：0
> 
> 时间：2013-01-16T06:38:32.987
> 
> 标签：jquery, css

这段 jquery 导致页面上的所有其他链接发生了一些有趣的事情，也就是说，它们只在大约 1 秒的奇怪时间延迟之后才做他们应该做的任何事情。

单击运行以下代码的链接后会发生这种情况：

```
$('#content').on("click", "a#goto_faq", function() {

    $("html, body").animate({ scrollTop: 0 }, 1234, 'easeInExpo');

    var toLoad = $(this).attr('href')+' #content';  

    $('#content').delay(888).slideUp(888,'easeOutExpo',loadContent);        
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent);  
    }
    function showNewContent() {
        $('#content').slideDown(777,'easeInExpo');
    }
    $("html, body").delay(777).animate({ scrollTop: 405 }, 777, 'easeInExpo',goToFAQ);
    function goToFAQ() {
    $("html, body").delay(2700).animate({ scrollTop: 1415 }, 2222, 'easeInOutExpo');
    }
    return false;

}); 
```

所以你点击一个 id="goto_faq"，一切都加载和滚动窗口就好了。一旦所有功能/动画完成后，无论您决定下一步单击哪个链接，都将需要大约一秒钟才能触发。（从那时起所有链接都很好 - 它只是上述脚本之后的第一个链接。[这让人认为脚本必须仍在后台运行。]）

我一直在玩 jquery.stop 一段时间了，但到目前为止还没有运气。我似乎无法通过阅读 API Docs 来理解 jquery。.stop 的任何帮助将不胜感激；谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:06:03.653

您正在使用委托。看看[这个](http://api.jquery.com/on/)。查找有关委派的示例。这可能会帮助你。

# android-layout - 如何在记事本中绘制多行 Edittext？

> ID：14352636
> 
> 赞同：1
> 
> 时间：2013-01-16T06:38:35.963
> 
> 标签：android-layout, android-edittext

![在此处输入图像描述](../Images/735b63142697a948f19e98079bad39fc.png)我正在创建一个记事本，我想要编辑带有多条水平线的文本。正如我对一些所做的那样，但是当我单击下一步或进入下一行时它正在显示行。我希望那些线条已经存在。当我使用带有 android:lines="5" 的层时。它正在显示我附上的图片。

请提出相同的建议。谢谢![在此处输入图像描述](../Images/6d997cbbb52152665958c37ff758498e.png)

已编辑：我的 EditText 显示如下！！！！顶部有一个巨大的差距。请建议怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:47:25.573

![在此处输入图像描述](../Images/00070b84349bbe778ea11f98e59ebf76.png)
这是代码，基于谷歌的[笔记编辑器](http://developer.android.com/tools/samples/index.html)输出将显示在图像中。当你按下回车键时，将添加新行。

```
public class LinedEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;

    // we need this constructor for LayoutInflater
    public LinedEditText(Context context, AttributeSet attrs) {
        super(context, attrs);

        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setColor(R.color.edit_note_line); //SET YOUR OWN COLOR HERE
    }

    @Override
    protected void onDraw(Canvas canvas) {
        //int count = getLineCount();

        int height = getHeight();
        int line_height = getLineHeight();

        int count = height / line_height;

        if (getLineCount() > count)
            count = getLineCount();//for long text with scrolling

        Rect r = mRect;
        Paint paint = mPaint;
        int baseline = getLineBounds(0, r);//first line

        for (int i = 0; i < count; i++) {

            canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
            baseline += getLineHeight();//next line
        }

        super.onDraw(canvas);
    }
} 
```

有关更多信息，请参阅[此](https://stackoverflow.com/questions/5972388/drawing-multiple-lines-in-edittext-e-g-notepad)链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T14:46:04.353

简单地在你的 XML 中添加这一行 android:gravity="top|left"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T06:43:56.290

在这里，我的代码默认绘制 15 行，您可以通过按 Enter 获得更多行：-

```
package com.wysiwyg.main;

import android.content.Context;
import android.database.Cursor;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.EditText;

public class LineEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;
    // we need this constructor for LayoutInflater
    public LineEditText(Context context, AttributeSet attrs) {
        super(context, attrs);

        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setColor(Color.BLUE); //SET YOUR OWN COLOR HERE
        setMinLines(15);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int height = getHeight();
        int line_height = getLineHeight();

        int count = height / line_height;
        if(getLineCount() > count){
            count = getLineCount();
        }
        Rect r = mRect;
        Paint paint = mPaint;
        int baseline = getLineBounds(0, r);

        for (int i = 0; i < count; i++) {

            canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
            baseline += getLineHeight();//next line
        }

        // Finishes up by calling the parent method
        super.onDraw(canvas);
    }
} 
```

# javascript - 自动测试 JavaScript 函数的输出

> ID：14352637
> 
> 赞同：1
> 
> 时间：2013-01-16T06:38:55.790
> 
> 标签：javascript

我经常手动测试 JavaScript 函数的输出（通过简单地查看控制台中每个函数的输出），这通常很乏味。在 JavaScript 中，有没有办法自动测试一系列函数调用的输出，并返回所有没有产生预期结果的测试？

```
checkOutput([["add(1, 2)", 3], ["add(2, 2)", 4]]); //if the input does not match the output in one of these arrays, then return the function call(s) that didn't produce the correct output

function checkOutput(functionArray){
    //this function is not yet implemented, and should return a list of function calls that did not produce correct output (if there are any).
}

function add(num1, num2){
    return num1 + num2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:41:27.987

绝对地。使用单元测试套件，例如[QUnit](http://qunitjs.com/)。

我特别喜欢那个，它吹嘘它被各种 jQuery 项目所使用。这是一个非常可靠的认可。

一个典型的测试看起来像这样......

```
test( "add test", function(num1, num2) {
  ok( num1 + num2 == 42, "Passed!" );
}); 
```

而且，如果您不喜欢这个建议，请查看其他单元测试框架，网址为 good ol' Wikipedia: [JavaScript Unit Testing Frameworks](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#JavaScript)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:42:59.460

看起来就像循环一样简单，`eval`每个数组的第一个元素并将其与第二个元素进行比较。

```
function checkOutput(functionArray) {
    var check = function(e) {
        return eval(e[0]) !== e[1];
    };
    if( Array.prototype.filter)
        return functionArray.filter(check);
    // shim in older browsers
    var l = functionArray.length, i, out = [];
    for( i=0; i<l; i++)
        if( check(functionArray[i]))
            out.push(functionArray[i]);
    return out;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:41:44.887

也许你想切换到[jasmine](http://pivotal.github.com/jasmine/)来测试 javascript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T06:52:47.837

我的测试库[suite.js](https://github.com/bebraw/suite.js)做了这样的事情。基本上语法如下所示：

```
suite(add, [
    [[1, 2]], 3
]); 
```

通常我使用部分应用程序绑定参数，所以我的测试如下所示：

```
suite(partial(add, 1), [
    -5, 4,
    2, 3
]); 
```

最终，我完全跳过了这些测试，并定义了一个基于它生成测试的合同。为此，我使用[annotate.js](https://github.com/bebraw/annotate.js)。在这种情况下，我最终会得到以下内容：

```
// implementation
function adder(a, b) {
    return a + b;
}

var add = annotate('add', 'adds things').on(is.number, is.number, adder);

// test some invariants now
suite(add, function(op, a, b) {
    return op(a, b) == op(b, a);
}); 
```

I know it's not a trivial amount of code anymore. This allows you to define invariants for function parameters, though, and based on that information we can generate tests, documentation etc.

suite.js works only in Node environment for now but if there is enough interest, I don't mind porting it to browser so you can run your tests there.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T06:42:50.947

查看[QUnit](http://qunitjs.com/)。您基本上可以一次对您的函数运行测试。

# javascript - 如何适应 gridPanels 列？

> ID：14352645
> 
> 赞同：5
> 
> 时间：2013-01-16T06:39:24.307
> 
> 标签：javascript, extjs

我有使用 ExtJs 3.4 的应用程序。
我有这个结构：

westPanel-TabPanel：

```
var westPanel = new Ext.TabPanel({
            id: "west",
            //xtype: "tabpanel",
            //layout:'fit',
            activeTab: 0,
            region: "west",
            border: false,
            width: 278,
            split: true,
            collapseMode: "mini",
            items: [mapList,structure,cadastr,search]
        }); 
```

搜索 - 表单面板：

```
var search = new Ext.FormPanel({
                labelAlign: 'top',
                frame:true,
                title: 'Поиск',
                bodyStyle:'padding:5px 5px 0',
                //width: 600,
                //layout:'fit',
                items: [{
                    xtype:'textfield',
                    fieldLabel: 'Диспечерское наименование',
                    name: 'name_dispather',
                    anchor:'100%',
                    enableKeyEvents: true,
                    listeners: {
                        'keyup': function(e) {
                            if(e.getValue().length==4){
                                searchStore.load({params:{'name':e.getValue()}});
                            }
                        }
                    }
                },searchTab]
            }); 
```

搜索选项卡 - 网格面板：

```
var searchTab = new Ext.ux.grid.livegrid.GridPanel({
    store: searchStore,
    region: 'center',
    cm: searchCm, 
    layout: 'fit',
    selModel: new Ext.ux.grid.livegrid.RowSelectionModel(),
    stripeRows : true,
    view: myView,
    height: 390,
    loadMask: true,
    id: 'searchTab',
    title:'Найденные объекты',
    autoScroll: true,
}); 
```

我有一个问题：

![在此处输入图像描述](../Images/e751ab82aecc5cc3507565edc1c66e20.png)

必须将最后一列的宽度设为整个面板的宽度吗？

**更新**

我尝试使用 autoExpandColumn。它的作品，但它并不理想：

![在此处输入图像描述](../Images/8d1937f0754b4f631fcf5fa271e976af.png)

如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:34:23.147

您可以通过配置来实现这一点`flex`。

您只能在一列上执行此操作：

```
columns: [{text: "Column A", dataIndex: "field_A", flex: 1}] 
```

或者您可以在所有列上默认执行此操作：

```
columns: {
    items: [
        {
            text: "Column A"
            dataIndex: "field_A"
        },{
            text: "Column B",
            dataIndex: "field_B"
        }, 
        ...
    ],
    defaults: {
        flex: 1
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T12:22:18.793

尝试：

`autoExpandColumn :`细绳

此网格中应扩展以填充未使用空间的列的 ID。

您必须为您的 searchTab 提供此配置选项（我的意思是网格面板）。

编辑：

```
 viewConfig:{
      scrollOffset: 0,
  forceFit: true
  }, 
```

这将消除滚动条留下的空白。您需要为您的 searchTab 提及这一点（我的意思是网格面板）。

# android - 如何以编程方式锁定/解锁屏幕？

> ID：14352648
> 
> 赞同：39
> 
> 时间：2013-01-16T06:39:34.780
> 
> 标签：android

我正在做一个在摇动时锁定屏幕的应用程序。现在它被锁定，如果屏幕关闭，它会从那里进入广播接收器，它进入必须打开屏幕的服务。

下面是广播接收器：

```
 public class ScreenReceiver extends BroadcastReceiver {   
    public static boolean wasScreenOn = true;
    @Override
    public void onReceive(Context context, Intent intent) {

        System.out.println("Entered Broadcaste Reciever");

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // DO WHATEVER YOU NEED TO DO HERE
             System.out.println("SCREEN_OFF"+wasScreenOn);
            wasScreenOn = false;

            Intent i = new Intent(context, UpdateService.class);
            i.putExtra("screen_state", wasScreenOn);
            context.startService(i);

            System.out.println("jrkejhr keh");
        }
        else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // AND DO WHATEVER YOU NEED TO DO HERE
            wasScreenOn = true;
            System.out.println("SCREEN_ON"+wasScreenOn);
        }
    } 
```

它进入我写了回家的意图动作的服务是......

```
 ShakeListener mShaker;
    int amountOfTime = 0;
    Context context1;   
    @Override   
         public void onCreate() {

            super.onCreate();

            // REGISTER RECEIVER THAT HANDLES SCREEN ON AND SCREEN OFF LOGIC
            System.out.println("Enterd Service");
            final Vibrator vibe = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

            mShaker = new ShakeListener(this);
            mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
              public void onShake() {
                vibe.vibrate(100);
                Intent goHome = new Intent();
                goHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                goHome.setAction("android.intent.action.MAIN");
                goHome.addCategory("android.intent.category.HOME");
                startActivity(goHome);                      
               }
            });
         }
       @Override
        public IBinder onBind(Intent intent) {
            // TODO Auto-generated method stub
            return null;
     } 
```

它正在进入服务。但主屏幕不显示。当服务被调用时，屏幕被锁定。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T06:52:00.923

**编辑：**

由于有些人在以编程方式锁定后在解锁设备方面需要帮助，所以我通过了[**Android 屏幕锁定/以编程方式解锁**](https://stackoverflow.com/questions/12723185/android-screen-lock-unlock-programatically/12723269#12723269)的帖子，请看一下，可能会对您有所帮助。

**原来的答案是：**

您需要获得管理员权限并且可以锁定手机屏幕

请查看下面的简单教程来完成这个

[**以编程方式锁定电话屏幕**](http://rdcworld-android.blogspot.in/2012/03/lock-phone-screen-programmtically.html)

这里也是代码示例..

**LockScreenActivity.java**

```
public class LockScreenActivity extends Activity implements OnClickListener {  
 private Button lock;  
 private Button disable;  
 private Button enable;  
 static final int RESULT_ENABLE = 1;  

     DevicePolicyManager deviceManger;  
     ActivityManager activityManager;  
     ComponentName compName;  

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        deviceManger = (DevicePolicyManager)getSystemService(  
          Context.DEVICE_POLICY_SERVICE);  
        activityManager = (ActivityManager)getSystemService(  
          Context.ACTIVITY_SERVICE);  
        compName = new ComponentName(this, MyAdmin.class);  

        setContentView(R.layout.main);  

        lock =(Button)findViewById(R.id.lock);  
        lock.setOnClickListener(this);  

        disable = (Button)findViewById(R.id.btnDisable);  
        enable =(Button)findViewById(R.id.btnEnable);  
        disable.setOnClickListener(this);  
        enable.setOnClickListener(this);  
    }  

 @Override  
 public void onClick(View v) {  

  if(v == lock){  
    boolean active = deviceManger.isAdminActive(compName);  
             if (active) {  
                 deviceManger.lockNow();  
             }  
  }  

  if(v == enable){  
   Intent intent = new Intent(DevicePolicyManager  
     .ACTION_ADD_DEVICE_ADMIN);  
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,  
                    compName);  
            intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,  
                    "Additional text explaining why this needs to be added.");  
            startActivityForResult(intent, RESULT_ENABLE);  
  }  

  if(v == disable){  
     deviceManger.removeActiveAdmin(compName);  
              updateButtonStates();  
  }    
 }  

 private void updateButtonStates() {  

        boolean active = deviceManger.isAdminActive(compName);  
        if (active) {  
            enable.setEnabled(false);  
            disable.setEnabled(true);  

        } else {  
            enable.setEnabled(true);  
            disable.setEnabled(false);  
        }      
 }  

  protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
         switch (requestCode) {  
             case RESULT_ENABLE:  
                 if (resultCode == Activity.RESULT_OK) {  
                     Log.i("DeviceAdminSample", "Admin enabled!");  
                 } else {  
                     Log.i("DeviceAdminSample", "Admin enable FAILED!");  
                 }  
                 return;  
         }  
         super.onActivityResult(requestCode, resultCode, data);  
     }  
} 
```

MyAdmin.java

```
public class MyAdmin extends DeviceAdminReceiver{  

    static SharedPreferences getSamplePreferences(Context context) {  
        return context.getSharedPreferences(  
          DeviceAdminReceiver.class.getName(), 0);  
    }  

    static String PREF_PASSWORD_QUALITY = "password_quality";  
    static String PREF_PASSWORD_LENGTH = "password_length";  
    static String PREF_MAX_FAILED_PW = "max_failed_pw";  

    void showToast(Context context, CharSequence msg) {  
        Toast.makeText(context, msg, Toast.LENGTH_SHORT).show();  
    }  

    @Override  
    public void onEnabled(Context context, Intent intent) {  
        showToast(context, "Sample Device Admin: enabled");  
    }  

    @Override  
    public CharSequence onDisableRequested(Context context, Intent intent) {  
        return "This is an optional message to warn the user about disabling.";  
    }  

    @Override  
    public void onDisabled(Context context, Intent intent) {  
        showToast(context, "Sample Device Admin: disabled");  
    }  

    @Override  
    public void onPasswordChanged(Context context, Intent intent) {  
        showToast(context, "Sample Device Admin: pw changed");  
    }  

    @Override  
    public void onPasswordFailed(Context context, Intent intent) {  
        showToast(context, "Sample Device Admin: pw failed");  
    }  

    @Override  
    public void onPasswordSucceeded(Context context, Intent intent) {  
        showToast(context, "Sample Device Admin: pw succeeded");  
    }  

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-16T06:45:11.827

用于`Activity.getWindow()`获取您的活动窗口；用于`Window.addFlags()`添加您想要的以下任何一个标志`WindowManager.LayoutParams`：

*   [FLAG_DISMISS_KEYGUARD](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_DISMISS_KEYGUARD)

*   [FLAG_SHOW_WHEN_LOCKED](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)

*   [FLAG_TURN_SCREEN_ON](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_TURN_SCREEN_ON)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-06T23:57:19.543

示例页面上的 androidmanifest.xml 和 policy.xml 文件在我的浏览器中是不可见的，因为它试图将 XML 文件格式化为 HTML。我只是为了方便他人而发布此内容以供参考，这来自示例页面。

感谢大家提出这个有用的问题！

**AndroidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.kns"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".LockScreenActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".MyAdmin"
                android:permission="android.permission.BIND_DEVICE_ADMIN">
            <meta-data android:name="android.app.device_admin"
                       android:resource="@xml/policies" />
            <intent-filter>
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

**政策.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<device-admin xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-policies>
        <limit-password />
        <watch-login />
        <reset-password />
        <force-lock />
        <wipe-data />
    </uses-policies>
</device-admin> 
```

# rest - 与虚拟机通信

> ID：14352649
> 
> 赞同：0
> 
> 时间：2013-01-16T06:39:38.370
> 
> 标签：rest, vmware

我想从我的计算机连接另一台计算机上的虚拟机。我正在尝试使用 Advance Rest 客户端进行连接。如何设置网络？虚拟机的IP是私有IP（192.168.195.132）。所以通信没有发生。怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:46:21.563

这与虚拟机网络配置有关（假设您的问题标签中的 vmware）

[这有帮助](http://www.vmware.com/support/ws55/doc/ws_net_configurations_custom.html)吗？

# jquery - jquery在页面加载时将div复制到div

> ID：14352650
> 
> 赞同：1
> 
> 时间：2013-01-16T06:39:43.530
> 
> 标签：jquery

尝试在同一页面内的页面加载时执行此操作：

CSS：

```
#item1, #item2, #item3 {visibility: hidden;} 
```

HTML（这些不会显示）

```
<div id="item1">Something1</div> 
<div id="item2">Something2</div>
<div id="item3">Something3</div> 
```

这些 div 通常为空，但在页面加载后，它们将根据上述 div 上的内容填充。

```
<div id="real-content">
    <div id="duplicate-item1">Something1</div>
    <div id="duplicate-item2">Something2</div>
    <div id="duplicate-item3">Something3</div>
</div> 
```

有任何想法吗？

更新：我可能会尝试 .clone() 但也会查看你们在下面发布的代码。提前致谢..

原来 .clone() 是解决方案..

```
$('.hello').clone().appendTo('.goodbye'); 
```

我怎样才能把 .above 变成更全球化的？假设我有 20 个需要克隆的 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:43:38.270

```
$("#real-content").find("div").each(function(){
   var ID = $(this).attr("id").split("-");
   $(this).html($("#"+ID[1]).html());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T06:44:19.737

```
$('#idContainerWithHiddenDivs div').each(function(){
    var idToCopy = $(this).attr('id');
    vat newID = 'duplicate-'+idToCopy;
    var $newDiv = $(this).clone().attr('id', newID);
    $('#real-content').append($newDiv);
}); 
```

我认为这是一个很好的方法。

快速示例： http: [//jsfiddle.net/TQdrH/6/](http://jsfiddle.net/TQdrH/6/)纠正了提琴手，最后一个不起作用。

或者，也许您可​​能想使用这个：http: [//jsfiddle.net/TQdrH/11/](http://jsfiddle.net/TQdrH/11/)或者您可能想在您最后评论之后尝试：http: [//jsfiddle.net/TQdrH/14/ 。](http://jsfiddle.net/TQdrH/14/)

# wpf - 为什么 ' '，十六进制值 0x0C，是无效字符。第 1 行，位置 1。在 WPF 中抛出

> ID：14352651
> 
> 赞同：14
> 
> 时间：2013-01-16T06:39:54.140
> 
> 标签：wpf, xamlparseexception

当我将 xxxx.XAML 加载到 WPF 框架中时，它会抛出错误`' ', hexadecimal value 0x0C, is an invalid character. Line 1, position 1.`，如何找到导致问题的原因。当 xxxx.XAML 在另一个项目的起始页中时，它工作正常，当我在另一个项目中加载 xxxx.XAML 的内容时，意味着它会引发错误，为什么会发生这种情况？

我还将我的项目从 vs 2010 升级到 vs 2012

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-23T12:15:08.970

就我而言，我想使用下面的代码加载 XAML 文件，但它的 Build Action 设置为 Page 而不是 Resource：

```
Uri uri = new Uri(resourcePath, System.UriKind.Relative);
Stream stream = Application.GetResourceStream(uri).Stream;
UIElement view = (UIElement)XamlReader.Load(stream);
stream.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:26:01.753

在我的文件名中，我有大写 X。在读取加载文件时，我使用小 x。所以它导致了问题

# javascript - 如何为html5游戏制作在线记分牌？

> ID：14352654
> 
> 赞同：-2
> 
> 时间：2013-01-16T06:40:17.637
> 
> 标签：javascript, html

我想做一个html5游戏。其中支持在线计分板。并将其移植到其他移动平台。

那么我怎样才能为这个游戏做在线记分牌呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:43:41.257

在线记分牌通常需要一个数据库，以及一些服务器端脚本语言的知识。如果您打算学习这些东西，我建议您使用 MySQL 数据库和 PHP。如果你已经知道如何使用这些，谷歌搜索会给你很多教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:18:42.327

您可以使用 Google App Engine [https://developers.google.com/appengine/](https://developers.google.com/appengine/)

很容易连接到云中的数据库，并在 memcache 中读写。

# html - 在css中添加多个背景图像

> ID：14352658
> 
> 赞同：1
> 
> 时间：2013-01-16T06:40:41.967
> 
> 标签：html, css, background-image, inline

我有一个菜单栏，我正在尝试将两个图像附加到它这就是我所做的-

```
background:url('images/bgs/bg_container_top_left.png') no-repeat top left ,url('images/bgs/bg_container_top_center.png') no-repeat top right; 
```

如何为此处附加的不同图像分配不同的属性？就像我想给第一张图片留出边距

```
margin-left:-10px; 
```

和第二张图片

```
 margin-left:-5px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:47:02.650

如果您想定位图像而不是更改这些属性

例子：

```
background:url('images/bgs/bg_container_top_left.png') no-repeat top -10px ,url('images/bgs/bg_container_top_center.png') no-repeat top -5px; 
```

或使用`background-position: 0px 0px 0px 10px;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:48:02.043

试试这个

```
div{background: url('http://blog.agilebits.com/wp-content/uploads/2012/05/time-machine-icon.png') -5px top no-repeat, url('http://aux3.iconpedia.net/uploads/69290979.png') -10px top no-repeat ; } 
```

**[演示](http://jsfiddle.net/4ygnk/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:54:45.797

CSS3 允许使用多个背景图像。使用的格式是您在第一部分中显示的格式。

```
background: url('images/bgs/bg_container_top_left.png') left top no-repeat,
            url('images/bgs/bg_container_top_center.png') right top no-repeat; 
```

我建议使用 background-position 属性（[https://developer.mozilla.org/en/docs/CSS/ background-position](https://developer.mozilla.org/en/docs/CSS/background-position) ) 来调整每个背景的起始位置。如果每个元素的实际边距不同，您可能需要考虑为每个背景创建单独的元素。您可以尝试使用以下代码：

```
margin-left: -10px, -5px; 
```

这遵循相同的格式（首先列出背景属性值 1，然后列出值 2），但我不确定这是否受支持。

# string - Perl 字符串匹配

> ID：14352661
> 
> 赞同：0
> 
> 时间：2013-01-16T06:41:08.193
> 
> 标签：string, perl, substring

`index`我在同时使用运算符和运算符时遇到 Perl 字符串匹配/搜索问题`=~`。`RT @zaynmalik: Big cover for @cosmopolitanuk ! Boys looking slick http://example.com/FcWA80HI`我需要在文本文件中搜索字符串“ ”。

```
if($splitlines[1] =~ /RT @zaynmalik: Big cover for @cosmopolitanuk ! Boys looking slick http://example.com/FcWA80HI/){
     ## Do something ##
} 
```

然而，因为 ' `@`' 是 Perl 中的一个特殊字符，我得到了编译错误。你能给我一个方法来做到这一点吗？我尝试将字符串保存到类似的变量`$str`中，但它不起作用（这是可以理解的）。

所以，这就是我现在正在做的，

```
$max_freq_tweet = 'RT @zaynmalik: Big cover for @cosmopolitanuk ! Boys looking slick http://example.com/FcWA80HI';
if($splitlines[1] =~ /\Q$max_freq_tweet\E/){
    print FILE5 "$splitlines2[1] \n";
} 
```

但它似乎仍然没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:56:26.617

要么`@`通过反斜杠转义，要么使用单引号。

```
my $search_string = 'RT @zaynmalik: Big cover for @cosmopolitanuk ! Boys looking slick http://example.com/FcWA80HI';
# or:               "RT \@zaynmalik: Big cover for \@cosmopolitanuk ! Boys looking slick http://example.com/FcWA80HI"

if (-1 != index $str, $search_string) { do something } 
```

如果您有一个字符串并想在正则表达式中使用它，则应确保通过以下方式保护其含义`\Q...\E`：

```
if ($str =~ /\Q$search_string\E/) { do something } 
```

这`\QUOT\E`不会阻止数组插值，但该字符串中的任何字符都不会被视为特殊；没有它`.`，字符串中的任何字符都将匹配！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:43:21.997

你需要`@`在你的正则表达式中转义。如`$str =~ /RT \@.*:/`.

编辑：您还可以`/`使用反斜杠 ( ) 转义斜线 ( `\`)。`$str =~/RT \@.*: .* http:\/\/.*/`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T06:46:00.560

您需要使用前面的`\`（反斜杠）转义特殊字符。

这不仅适用于@，也适用于其他字符。

为了安全起见，您可以转义任何非字母字符。

# eclipse - Hadoop & eclipse 在不同的机器上

> ID：14352665
> 
> 赞同：3
> 
> 时间：2013-01-16T06:41:16.317
> 
> 标签：eclipse, hadoop, mapreduce

我有一个 linux 服务器，它配置了 1.0.4 版本的 hadoop，它处于伪分布式模式。服务器只有命令行，所以我不能在上面运行 eclipse。所以我必须从具有 windows 环境的不同机器上运行 eclipse。

现在，问题是我如何在这种情况下运行或调试我的 mapreduce 代码。还有其他方法可以帮助我使用hadoop吗？

提前致谢..

注意：我想将不同机器上的 hadoop 和开发环境（如另一台机器上的 IDE）分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T14:29:17.620

eclipse中有一个插件可以帮助你做到这一点。只需搜索“hadoop eclipse”，你就可以找到方法。或者在eclipse中导出一个jar文件，使用命令“hadoop -jar”运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T08:59:40.800

使用任何 X-Server 支持的 SSH 应用程序（例如 MobaXterm）并从 Linux 运行 eclipse。

# background - PHPExcel 白色背景

> ID：14352671
> 
> 赞同：2
> 
> 时间：2013-01-16T06:41:36.927
> 
> 标签：background, phpexcel

我正在使用 PHPExcel 库将 Excel 电子表格导入网页：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'HTML');
$objWriter->save('php://output'); 
```

它有效，但它将我的页面背景覆盖为白色。页面上的所有其他元素都根据我的 CSS 正确格式化，但不是背景。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:38:04.183

Excel 单元格的默认背景是白色，因此您可能想要更改它。我不知道你首先在哪里设置页面背景，除非你修改了 HTML Writer 来这样做，或者在 Excel 文件中更改了它（你没有指出是哪个）；但尝试为工作表设置默认单元格背景：

```
$objPHPExcel->getDefaultStyle()->applyFromArray(
    array(
        'fill' => array(
            'type'  => PHPExcel_Style_Fill::FILL_SOLID,
            'color' => array('argb' => 'FFFFFF00')
        ),
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:43:51.147

马克贝克为我指出了正确的方向来回答我自己的问题，这就是我将他的答案标记为已接受的原因。

为了解决我的问题，我添加了以下几行：

```
$objWriter->generateStyles(false);
echo $objWriter->generateSheetData(); 
```

后：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'HTML'); 
```

# ios - IOS 使用 presentModalViewController 显示一些控制器

> ID：14352678
> 
> 赞同：2
> 
> 时间：2013-01-16T06:42:30.173
> 
> 标签：ios, uinavigationcontroller, push-notification, message

我使用 presentModalViewController 来显示一些控制器。

A控制器：//它将显示B的控制器并接收消息，当它收到消息时，我想知道B是否显示？

```
-(void)viewDidLoad{

     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(recvPushMessage:) name:RECV_PUSH_MESSAGE_NOTIFY object:nil];

}
-(void)buttonAction(id)sender{
     B* b = [B alloc] init];
     UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:(UIViewController*)b];
     [self presentModalViewController:navigationController animated:YES];
     //release 
}
-(void)recvPushMessage{
   //i want to kown B is it show or not
   if(b is showing){
      //do something
   }
   else{
      //do something for A
   }

} 
```

B控制器：//当B显示时，我不想在A中调用recvPushMessage。

```
 -(void)viewDidLoad{

     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(recvPushMessage:) name:RECV_PUSH_MESSAGE_NOTIFY object:nil];

}
-(void)recvPushMessage{

   //do something for B
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:58:47.770

检查这是否是您正在寻找的，

```
-(void)recvPushMessage{

   if (self.presentedViewController) { //check if you have this model view controller
      //do something
   }
   else{
      //do something for A
   }
} 
```

对于版本 < iOS 5.0，您可以使用`self.modalViewController`.

**更新：** 对于您的第二个问题，您可以获取`topViewController`导航控制器并将其与 C 进行比较。您可以使用类似的东西`[self.modalViewController topViewController]`来检查它是否是 C，然后继续。

例如：-

```
if ([[(UINavigationController *)self.modalViewController topViewController] isKindOfClass:[C class]]) 
```

# asp.net - GridView 中的 Asp.net VB 测试值

> ID：14352687
> 
> 赞同：0
> 
> 时间：2013-01-16T06:42:49.253
> 
> 标签：asp.net, vb.net, gridview

我在 C# 中找到了很多解决方案，但是当您处理 FindControls 并尝试从 GridView 中提取值时，C# 无济于事，翻译后的代码也不起作用。

我有这个网格视图：

```
<asp:GridView ID="WIPListGrid" runat="server" DataSourceID="WIPDataSource" 
CssClass="site" AutoGenerateColumns="False" 
Width="95%" DataKeyNames="Masterid_Action" onrowdatabound="WIPListGrid_RowDataBound">
<Columns>
<asp:BoundField DataField="Action Due Date" HeaderText="Action Due Date" 
SortExpression="Action Due Date" />
</Columns>
</asp:GridView> 
```

我在vb中有这个： Protected Sub WIPListGrid_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles WIPListGrid.RowDataBound

```
Dim DueDate As Label = DirectCast(e.Row.FindControl("Action Due Date"), Label)

'do what ever you want to do here using the value of your label
MsgBox("Due Date = " & DirectCast(e.Row.FindControl("Action Due Date"), Label))

End Sub 
```

错误消息是 Operator & 没有为类型 'String' 和 'System.Web.UI.WebControls.Label' 定义

这是我~真的~想做的一个补救例子。上面我只想显示 DueDate 中包含的内容以查看它的格式，以便我可以根据其他值对其进行测试。但它不会工作。看来 Action Due Date 的内容不是字符串......那么，我错过了什么？

我试图将值设置为等于字符串但遇到了同样的问题，标签不是字符串...

我如何找出里面有什么来评估它？

17/01/2013 编辑：保持此活动状态，因为我的问题仍未解决。

18/01/2013 编辑：vb.net 代码现在

```
Protected Sub WIPListGrid_ROWDataBound(sender as Object, 
e As System.Web.UI.Webcontrols.GridViewRowEventArgs) Handles WIPListGrid.RowDataBound

Dim DueDate As Label = DirectCast(e.Row.FindControl("Action Due Date"), Label)

'do what ever you want to do here using the value of your label
MsgBox("Due Date = " & DueDate.Text)

End Sub 
```

但是现在我收到一个错误，即 Object 未实例化并且它指向代码中的 msgbox 行。我以为我在将它调暗为标签时实例化了它......

官方错误是：“对象引用未设置为对象的实例。”

故障排除提示说： 1）使用“new”关键字创建对象实例 2）在调用方法之前检查确定对象是否为空

我尝试了“新”选项并得到一个错误，表明该变量已被声明。所以现在我想检查以确定对象是否为空并且无法弄清楚如何。

我尝试过测试： DirectCast(e.Row.FindControl("action due date"), Label) <> "" 但出现错误：重载解析失败，因为无法使用这些参数调用可访问的 '<>'。

如何测试对象是否为空？

该值不应该为空（数据库不允许它为空），但这可能是我问题的症结所在......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:55:26.013

使用控件时，您必须指出您希望该值包含在您的控件中。

在您的情况下，您只需要标签控件本身（而不是里面的文本）。

例如：

```
Dim myControl As Label = DirectCast(e.Row.FindControl("myControl"), Label)

MsgBox("MyText = " & myControl.Text) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:46:40.163

问题是您使用的是 BoundField 因此无法找到控件。将其更改为模板字段，这将起作用。

```
<asp:GridView ID="WIPListGrid" runat="server" DataSourceID="WIPDataSource" 
CssClass="site" AutoGenerateColumns="False" 
Width="95%" DataKeyNames="Masterid_Action" onrowdatabound="WIPListGrid_RowDataBound">
<Columns>
            <asp:TemplateField HeaderText="Action Due Date">
                <ItemTemplate>
                    <asp:Label ID="lblActionDueDate" runat="server" Text='<%# Bind("[Action Due Date]") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
</Columns>
</asp:GridView> 
```

对于您的 Row DataBound 事件使用

```
Dim DueDateLabel As Label = DirectCast(e.Row.FindControl("lblActionDueDate"), Label)
'Check Label Exists
If DueDateLabel IsNot Nothing Then
    Dim DueDateText As String = DueDateLabel.Text
    MsgBox(String.Format("Due Date {0}", DueDateText))
End If 
```

# nginx - 更改 nginx 反向代理中的主机标头

> ID：14352690
> 
> 赞同：34
> 
> 时间：2013-01-16T06:42:56.413
> 
> 标签：nginx

我正在运行 nginx 作为站点 example.com 的反向代理，以对后端服务器中运行的 ruby​​ 应用程序进行负载平衡。我在 nginx 中有以下`proxy_set_header`字段，它将主机头传递给后端 ruby​​。这是 ruby​​ 应用程序识别子域名所必需的。

```
location / {
    proxy_pass http://rubyapp.com;
    proxy_set_header Host $http_host;
} 
```

现在我想创建一个 alias `beta.example.com`，但是传递给后端的主机头应该仍然是`www.example.com`，否则 ruby​​ 应用程序将拒绝请求。所以我想要类似于下面的内部位置指令。

```
if ($http_host = "beta.example.com") {
    proxy_pass http://rubyapp.com;
    proxy_set_header Host www.example.com;
} 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T07:03:31.973

你不能在 if 块中使用**proxy_pass**，所以我建议在设置代理头之前做这样的事情：

```
set $my_host $http_host;
if ($http_host = "beta.example.com") {
  set $my_host "www.example.com";
} 
```

现在您可以只使用**proxy_pass**和**proxy_set_header**而不使用 if 块：

```
location / {
  proxy_pass http://rubyapp.com;
  proxy_set_header Host $my_host;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-04-04T16:01:57.460

[地图](http://nginx.org/en/docs/http/ngx_http_map_module.html#map)优于`set`+ `if`。

```
map $http_host $served_host {
    default $http_host;
    beta.example.com www.example.com;
}

server {
    [...]

    location / {
        proxy_pass http://rubyapp.com;
        proxy_set_header Host $served_host;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-30T16:42:24.270

我试图解决同样的情况，但使用`uwsgi_pass`.

经过一些研究，我发现在这种情况下，需要：

```
uwsgi_param HTTP_HOST $my_host; 
```

希望它可以帮助别人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-28T10:24:28.813

只是一个小提示。有时您可能需要使用**X-Forwarded-Host**而不是**Host**标头。这就是我的主机标头工作但仅适用于标准 HTTP 端口 80 的情况。如果应用程序暴露在非标准端口上，那么当应用程序生成重定向时该端口会丢失。所以最后对我有用的是：

```
proxy_set_header X-Forwarded-Host $http_host; 
```

# javascript - 如何在 Knockout JS 的 BindingHandler 中获取绑定表达式

> ID：14352691
> 
> 赞同：5
> 
> 时间：2013-01-16T06:42:57.410
> 
> 标签：javascript, data-binding, knockout.js

假设我有一个绑定跨度

```
<span data-bind="MyBinding: Name"></span> 
```

我有一个自定义绑定

```
ko.bindingHandlers.MyBinding = {
   init: function (element, valueAccessor, allBindings, viewModel, context) {
        // I want to get the string "Name" here. NOT the value of Name.
   },
}; 
```

如何在处理程序中获取具有绑定表达式值的字符串？即我如何获得“名称”而不是“名称的值”。

我还需要表达式，因此传递字符串“Name”是不可行的。

```
<span data-bind="MyBinding: 'Name'"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:46:06.603

您需要`Name`作为字符串而不是作为参考传递：

```
<span data-bind="MyBinding: 'Name'"></span>

ko.bindingHandlers.MyBinding = {
   init: function (element, valueAccessor, allBindings, viewModel, context) {
        var myBinding = valueAccessor(); // will contain 'Name';
        var valueOfmyBinding = viewModel[myBinding]; //value of the Name property
   },
}; 
```

您仍然可以将您的表达式用作字符串，因为在 Javascript 中您可以[评估 alough](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)`eval()`是一个危险的函数：这​​里是一个[示例](http://jsfiddle.net/Z9Yvu/)JSFiddle 。

或者，如果您只需要支持简单的属性表达式，例如`Child.Name`您可以编写自己的解析器，在其中拆分点上的字符串并在访问器上进行 foreach。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-07T16:28:53.160

实际上，Knockout*确实*有一个内置的方法来做到这一点。您确实需要稍微调整您的自定义绑定（即，它变成一个对象而不是字符串值）。Knockout 允许您与`init`和`update`属性一起指定`preprocess`属性。例如，假设我们有以下 viewModel：

```
var app = { data: ko.observable('Hello World') }; 
```

还有一个简单的绑定，它将传递给它的字符串完全转换为小写，并输出绑定的名称和值（视图中传递的属性显然是`data`）：

```
ko.bindingHandlers.lower = {
  update: function(elem, value) {
    var obj = ko.unwrap(value());
    elem.textContent = 'Name: ' + ko.unwrap(obj.name) + 
      ' - Value: ' + ko.unwrap(obj.data).toLowerCase();
  },
  preprocess: function(value, bindingName) {
    return '{data:' + value + ', name:\'' + bindingName + '\'}';
  }
}; 
```

它就像将传递给它的属性字符串化并将`value`绑定的值转换为具有 2 个键（此处为名称和值）的对象一样简单。[看看](http://jsbin.com/gimilipuxo/edit?html,js,output)。有关详细信息，请参阅[绑定预处理](http://knockoutjs.com/documentation/binding-preprocessing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T10:15:59.937

您可以执行以下操作，因此您不需要评估。

```
<span data-bind="MyBinding: 'Name.More.AndMore'"></span>

ko.bindingHandlers.MyBinding = {
    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        var value = valueAccessor();

        var sp = value.split('.');
        var current = viewModel;
        for(var i=0;i<sp.length;i++) {
            var nNode = current[sp[i]];
            if ( nNode ) {
                current = nNode;
            }
        }
        $(element).html(current());
    }
}; 
```

正如[nemesv](/questions/tagged/nemesv "显示标记为“nemesv”的问题")已经解释的那样，您需要在绑定中将 Name 作为字符串值提供。之后，您可以使用它来逐步浏览您的视图模型以检索值。在我添加的元素中显示值 `$(element).html(current());` 这里`current()`是在我的视图模型中的最深层次，因此可以调用它并且可以使用返回值来更新 html。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-01T15:35:02.753

我建议使用另一个绑定来转移属性的名称。

```
<div data-bind="myBinding: content, nameOfProp:'content'"></div>

ko.bindingHandlers.myBinding = {
    init: function(element, valueAccessor, allBindings, viewModel, context) {
      var nameOfProp = allBindings.get("nameOfProp");
    };
  } 
```

[JSFiddle](http://jsfiddle.net/Z9Yvu/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-22T02:36:51.273

我喜欢上面说的pavel-chervov。如果你不介意使用一点 jQuery，类似地：

```
<span data-binding-name="Name" data-bind="MyBinding: Name"></span>

ko.bindingHandlers.MyBinding = {
    init: function (element, valueAccessor, allBindings, viewModel, context) {
        var nameOfProp = $(element).data('binding-name');
    },
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-12T19:26:20.740

我参加这个聚会有点晚了，但这就是我所做的，它就像一个魅力：

JS：

```
ko.bindingHandlers.myHandler = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var regex = /return ([^\s]+)\s*}/;

        //accessor will contain whatever expression was used in data-bind
        //so in this example it will be "myProp.childProp"
        var accessor = regex.exec(valueAccessor.toString())[1];

        //...
},
//... 
```

HTML：

```
<div data-bind="myHandler: myProp.childProp"></div> 
```

所以访问器的值（如果你错过了评论）将是“myProp.childProp”

# java - 如何检查：dateOne < dateTwo

> ID：14352704
> 
> 赞同：0
> 
> 时间：2013-01-16T06:44:23.043
> 
> 标签：java, validation, datetime, calendar

我需要帮助来检查以下与日期和时间相关的条件......

```
Calendar cal = Calendar.getInstance(); 
SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");

String CurrentDate= dateFormat.format(cal.getTime()); 
```

**String ModifiedDate = dateTime 取自日期 n 时间选择器小部件；**

我必须检查：

**current ModifiedDate 不小于当前时间的 5 分钟**

如何在 Android / Java 中检查这个条件............？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:51:05.893

为什么要*格式化*日期？

以“自然”表示而不是字符串表示来处理数据要容易得多。目前尚不清楚您的修改日期*是否*必须被视为字符串，但如果是，您应该做的第一件事就是*解析*它。然后，您可以使用以下方法将其与当前日期和时间进行比较：

```
// Check if the value is later than "now"
if (date.getTime() > System.currentTimeMillis()) 
```

或者

```
// Check if the value is later than "now + 5 minutes"
if (date.getTime() > System.currentTimeMillis() + TimeUnit.MINUTES.toMillis(5)) 
```

不清楚您所说的“当前 ModifiedDate 不小于当前时间的 5 分钟”是什么意思-您的意思是指它不小于 5 分钟，还是不小于 5 分钟，或者类似的东西-但您应该能够更改上面的代码来处理您的要求。

如果您进行大量日期/时间操作，我*强烈*建议使用[Joda Time](http://joda-time.sf.net)，它是比`java.util.Date`/更好的日期/时间 API `Calendar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:48:35.117

要检查给定时间是否在当前时间之前/之后，Android中有一个日历实例......来比较日期时间值。

```
Calendar current_time = Calendar.getInstance ();

current_time.add(Calendar.DAY_OF_YEAR, 0);

current_time.set(Calendar.HOUR_OF_DAY, hrs);

current_time.set(Calendar.MINUTE, mins );

current_time.set(Calendar.SECOND, 0);

Calendar given_time = Calendar.getInstance ();

given_time.add(Calendar.DAY_OF_YEAR, 0);

given_time.set(Calendar.HOUR_OF_DAY, hrs);

given_time.set(Calendar.MINUTE, mins );

given_time.set(Calendar.SECOND, 0);

current_time.getTime();

given_time.getTime();

boolean v = current_calendar.after(given_calendar);

// it will return true if current time is after given time

if(v){

return true;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:53:22.313

```
public static boolean getTimeDiff(Date dateOne, Date dateTwo) {
    long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
    int day =   (int) TimeUnit.MILLISECONDS.toHours(timeDiff);
    int min=    (int) ( TimeUnit.MILLISECONDS.toMinutes(timeDiff) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeDiff)));
    if(day>1)
    {
        return false;
    }
    else if(min>5)
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

用法：

```
System.out.println(getTimeDiff(new Date("01/13/2012 12:05:00"),new Date("01/12/2012 13:00:00"))); 
```

# php - 使用数据库条目中的高图制作条形图

> ID：14352707
> 
> 赞同：1
> 
> 时间：2013-01-16T06:44:32.587
> 
> 标签：php, mysql, highcharts

我对 PHP、Jquery 和 Javascript 非常陌生，我真的需要帮助来了解如何从数据库中的条目制作图形或图表。我有从 Highcharts 获得的这段代码，我想用我的数据库中的条目替换代码中的月份、地点和其他值等数据，但我只是不知道该怎么做。这是来自 Highchart 的代码：

```
$(function () {
var chart;
$(document).ready(function() {
chart = new Highcharts.Chart({
chart: {
renderTo: 'container',
type: 'column'
        },
        title: {
            text: 'Monthly Average Rainfall'
        },
        subtitle: {
            text: 'Source: WorldClimate.com'
        },
        xAxis: {
            categories: [
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
            ]
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Rainfall (mm)'
            }
        },
        legend: {
            layout: 'vertical',
            backgroundColor: '#FFFFFF',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 70,
            floating: true,
            shadow: true
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ this.y +' mm';
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
            series: [{
            name: 'Tokyo',
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

        }, {
            name: 'New York',
            data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]

        }, {
            name: 'London',
            data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

        }, {
            name: 'Berlin',
            data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]

        }]
    });
});

}); 
```

我的数据库中有一个名为诊断的表，其中包含患者的诊断和添加条目的日期，现在我希望我的图表显示我的诊断字段中特定疾病或疾病的每月发病率。是否可以？如果是的话，你能帮我解决这个问题吗？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:04:03.763

**current_page.php**

```
<script>
$.post( 'get_graph_data.php"', {'id':'data_id'}, function(data) {
var data = jQuery.parseJSON(data);
chart = new Highcharts.Chart({data});

})
</script> 
```

**get_graph_data.php**

```
//get data from database
// make array like this
array(
"chart"=> array(
"renderTo"=> 'container',
"type"=> 'column'
        ),
        "title"=> array(
            "text"=> 'Monthly Average Rainfall'
        ),
        "subtitle"=> array(
            'text'=> array('Source'=> 'WorldClimate.com')
        ),
        'xAxis'=> array(
            'categories'=>array( 
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'));
   so on............
echo json_encode($above_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:04:14.873

用这个替换系列之一：

```
series: [{
name: 'massively overweight',
data: 
    <?php
    $mysqli = new mysqli("example.com", "user", "password", "database");
    if ($mysqli->connect_errno) {
        echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }

    $res = $mysqli->query("SELECT date(date, '%b') as month, count(*) as cnt FROM diagnosis where illness = 'massively overweight'");

    while ($row = $res->fetch_assoc()) {
        $fat_people = $row['cnt'];
    }

    json_encode($cnt)

    ?>
}, { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:36:58.407

你的约会怎么样？因为 Highcharts 以毫秒为单位使用时间戳，所以您可能需要通过 Date.UTC() 解析您的日期或使用适当格式的时间。

顺便提一句。你的 JSON 长什么样？

# java - Http 状态 404 - servlet 登录当前不可用

> ID：14352715
> 
> 赞同：0
> 
> 时间：2013-01-16T06:45:01.310
> 
> 标签：java, spring, spring-mvc

这是我的登录-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Enable annotation driven controllers, validation etc... -->
    <mvc:annotation-driven />
    <context:component-scan base-package="com.smart.control" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value></value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean>

</beans> 
```

这是我的登录控制器

```
@RequestMapping(value = "Login.html", method = RequestMethod.POST)
public String authenticateLogin(HttpServletRequest request, HttpSession session) {
    System.out.println("hell");
    return "Login";

} 
```

通过 post 方法提交表单时，正在显示 servlet login 当前不可用消息。请让我知道这里有什么问题。

# database - 更新面板无法正常工作

> ID：14352716
> 
> 赞同：1
> 
> 时间：2013-01-16T06:45:09.750
> 
> 标签：database, drop-down-menu, updatepanel

在我的网站中，我在模式弹出窗口中使用了更新面板来避免回发。除了一个之外，所有的都运行良好。在此我有三个下拉列表，它们按顺序填充，即第一个在页面加载时填充，第二个在第一个列表的索引更改事件上，第三个列表在第二个列表中更改的索引时填充。在更改第一个列表中的索引时，第二个得到更改，但问题是在第二个列表中更改的索引没有发生任何事情！第三个列表未填充索引已更改

我正在通过页面方法从数据库中填充列表。

任何帮助都会很棒！

# c# - 如何在 WinRT 中将水印文本添加到位图？

> ID：14352717
> 
> 赞同：4
> 
> 时间：2013-01-16T06:45:11.167
> 
> 标签：c#, windows-runtime, writeablebitmap, writeablebitmapex

我想做这样的事情[http://weblogs.asp.net/broux/archive/2011/02/08/silverlight-how-to-watermark-a-writeablebitmapimage-with-a-text.aspx](http://weblogs.asp.net/broux/archive/2011/02/08/silverlight-how-to-watermark-a-writeablebitmapimage-with-a-text.aspx)。我很难让它在 WinRT 中工作。我正在使用 WriteableBitmap 扩展来“渲染”一些文本，但我希望它看起来与本示例中的外观完全相同。有什么建议或帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:35:03.777

这可以直观地完成工作：

```
<Grid>
    <Image Source="{Binding MyImage}" />
    <Image Source="{Binding MyWatermark}" />
</Grid> 
```

如果没有所有的工作，这肯定是相同的效果。如果您想让它从字面上使水印成为原始图像的一部分，则卸载到服务是您当前唯一的选择。如果没有上面的`Render()`方法，`WriteableBitmap`您就没有其他选择。甚至 XAML 工具包也不能解决这个问题。这是一个普遍的要求。

但根据您的用例，这可能正是您想要的！

我希望是的。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:27:49.783

您可以将该文本渲染为 png 资源并将其放在位图之上。除非文本需要是动态的——那么你就需要 DirectWrite。WinRT XAML Toolkit 具有可用于将文本呈现到 WriteableBitmap 的扩展方法。

# jquery - 正则表达式允许用户只输入文本，而不是字母数字

> ID：14352720
> 
> 赞同：1
> 
> 时间：2013-01-16T06:45:24.683
> 
> 标签：jquery, regex, jquery-validate

我知道这对你们中的许多人来说可能很容易，但我坚持下去。它消磨了我的时间。当我在网上研究时，我得到了许多正则表达式来检查数字、数字和字母数字，但我无法更改代码以满足我的要求。我希望用户在给定的文本框中只输入文本（因为真实的人名不包含任何特殊字符或任何数字）。允许使用空格，因为用户可能想要输入名字和姓氏。

我正在尝试使用 Jquery 验证

```
jQuery(function(){
            jQuery("#userName").validate({
                expression: "if (VAL) return true; else return false;",
                message: "Please enter the Required field(Only text is allowed)"
            });
            jQuery("#userName").validate({
                expression: "if (isNaN(VAL)) return true; else return false;",
                message: "Please enter Only text"
            });
            jQuery("#userName").validate({
                expression: "if (VAL.match(/^([a-zA-Z0-9_-]+)$/)) return **false**; else return **true**;",
                message: "Please do not enter alpha numeric values"
            }); 
```

1st 2 验证工作正常。最后一个与我的查询有关。请帮帮我。非常感谢提前。:)

特别感谢大家对 npinti，下面的代码现在正在工作。

```
 <script type="text/javascript">
        reg = new RegExp('^[A-Za-z ]+$');
        /* <![CDATA[ */
        jQuery(function(){
            jQuery("#userName").validate({
                expression: "if (VAL) return true; else return false;",
                message: "Please enter the Required field(Only text is allowed)"
            });
            jQuery("#userName").validate({

                expression: "if(reg.test(VAL)) return true; else return false;",
                message: "Please enter only text"
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:53:02.407

此正则表达式应符合您的需要：`^[A-Za-z ]+$`. 这将匹配任何字母（大小写，用`A-Z`and表示`a-z`）和空格。`+`表示它将匹配一个或多个重复，and和`^`锚`$`指示正则表达式引擎匹配整个字符串。

如果你想要一个更健壮的正则表达式，意味着一个可以满足非英文字母的，你可以使用这样的东西：`^[\p{L} ]+$`. 这和以前一样，唯一的区别是`\p{L}`迎合任何语言的任何字母（上下）（取自[此处](http://www.regular-expressions.info/unicode.html)）

编辑：根据@thg435 的建议，`\p{L}`由于JavaScirpt 不支持，因此将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:53:30.683

我认为你应该启动正则表达式对象而不是使用 VAL.match。试试这个进行第三次验证：

```
jQuery(function(){
   First initiate regex
    reg = /[a-zA-Z0-9_-]/ 
    //or 
    reg = new RegExp('[a-zA-Z0-9_-]');

    jQuery("#userName").validate({
      expression: "if (reg.test(VAL)) return **false**; else return **true**;",
      message: "Please do not enter alpha numeric values"
    });
}); 
```

# node.js - 你如何从命令行将脚本通过管道传输到 NodeJs 中？

> ID：14352725
> 
> 赞同：7
> 
> 时间：2013-01-16T06:45:37.610
> 
> 标签：node.js, shell, command-line

从命令行，我想从我的粘贴板上获取一个脚本（仅供参考：pbpaste 是 OSX 的一项功能）并将其通过管道传输到 Node 的 repl 命令行工具中。例如：

`pbpaste | node -e`

这不会评估我剪贴板中的内容。如何让运行时执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T07:26:15.913

该`-e`选项用于运行作为参数传递的 JS。要从标准输入运行 JS，您可以直接通过管道`node`传输。

```
pbpaste | node 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T06:50:51.203

这似乎可以解决问题：

`node -e "$(pbpaste)"`

# c# - 如何在 windows8 中从图像文件创建可写位图图像

> ID：14352729
> 
> 赞同：2
> 
> 时间：2013-01-16T06:45:50.917
> 
> 标签：c#, xaml, windows-8, writeablebitmap

我想从本地磁盘加载一个图像文件到一个可写位图图像，这样我就可以让用户编辑它。当我创建一个WriteableBitmap对象时，构造函数需要pixelwidth和pixelheight参数，我不知道从哪里得到这两个，谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:09:33.730

试试下面的代码。有一种简单的方法可以做到这一点（使用*BitmapImage*加载图像，然后将此对象直接传递给*WriteableBitmap*构造函数，但我不确定这是否按预期工作或者它有性能问题，不记得了）：

```
BitmapSource bmp = BitmapFrame.Create(
    new Uri(@"C:\Users\Public\Pictures\Sample Pictures\Koala.jpg", UriKind.Relative),
    BitmapCreateOptions.None, BitmapCacheOption.OnLoad);

if (bmp.Format != PixelFormats.Bgra32)
    bmp = new FormatConvertedBitmap(bmp, PixelFormats.Bgra32, null, 1);
    // Just ignore the last parameter

WriteableBitmap wbmp = new WriteableBitmap(bmp.PixelWidth, bmp.PixelHeight,
    kbmp.DpiX, bmp.DpiY, bmp.Format, bmp.Palette);

Int32Rect r = new Int32Rect(0, 0, bmp.PixelWidth, bmp.PixelHeight);
wbmp.Lock();
bmp.CopyPixels(r, wbmp.BackBuffer, wbmp.BackBufferStride * wbmp.PixelHeight,
    wbmp.BackBufferStride);

wbmp.AddDirtyRect(r);
wbmp.Unlock(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:56:27.103

定义 WriteableBitmap 图像时不要关心 pixelWidth 和 pixelHeight，请尝试以下操作：

```
using (IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.ReadWrite))
{
    WriteableBitmap image = new WriteableBitmap(1, 1);
    image.SetSource(stream);
    WriteableBitmapImage.Source = image;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-03T00:09:14.360

如果您想拥有正确的像素宽度和高度，您需要先将其加载到 BitmapImage 中以正确填充它：

```
StorageFile storageFile =
    await StorageFile.GetFileFromApplicationUriAsync("ms-appx:///myimage.png");
using (IRandomAccessStream fileStream = await storageFile.OpenAsync(FileAccessMode.Read))
{
    BitmapImage bitmapImage = new BitmapImage();
    await bitmapImage.SetSourceAsync(fileStream);

    WriteableBitmap writeableBitmap =
        new WriteableBitmap(bitmapImage.PixelWidth, bitmapImage.PixelHeight);
    fileStream.Seek(0);
    await writeableBitmap.SetSourceAsync(fileStream);
} 
```

（对于 WinRT 应用程序）

# ios - UITabBar 外观适用于 iOS6 但不适用于 iOS 5

> ID：14352734
> 
> 赞同：0
> 
> 时间：2013-01-16T06:46:10.680
> 
> 标签：ios, ios5, ios6, uitabbar, uitabbaritem

我有一些代码来自定义 TabBar。我使用外观框架来做到这一点。该应用程序是iOS 5+，因此据我了解应该可以使用。我的代码如下所示：

```
NSDictionary *textAttributesNormal = @{
  UITextAttributeTextColor: [UIColor colorWithRed:0.04f green:0.25f blue:0.56f alpha:1.00f],
  UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0, 0)]
};

NSDictionary *textAttributesSelected = @{
  UITextAttributeTextColor: [UIColor colorWithWhite:1.0 alpha:1.0]
};

[[UITabBar appearance] setTintColor:[UIColor colorWithRed:0.53f green:0.76f blue:0.91f alpha:1.00f]];
[[UITabBarItem appearance] setTitleTextAttributes:textAttributesNormal forState:UIControlStateNormal];
[[UITabBarItem appearance] setTitleTextAttributes:textAttributesSelected forState:UIControlStateSelected]; 
```

我在委托的 applicationDidFinishLaunching 方法中执行此操作。此代码在 iOS6 上完美运行并按预期运行。但在 iOS 5 上，它什么也不做。它既不会引发任何警告或错误。

模拟器和实际设备上的行为相同。我可以在界面生成器中设置色调颜色，然后它将在 iOS5 上运行。但是我没有找到通过 IF 设置标签栏项目的文本属性的方法。

我感谢任何帮助或提示！:-)

最好的祝愿，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:03:43.173

好吧，外观代码并不是真正的问题。如前所述，我在

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
```

该应用程序有点旧，Apple 文档指出，在 iOS3+ 上应该使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我改变了它，现在它按预期工作。

# c# - 控制器方法在 Datatables C# MVC 中没有命中

> ID：14352736
> 
> 赞同：0
> 
> 时间：2013-01-16T06:46:16.693
> 
> 标签：c#, jquery, asp.net-mvc, datagrid, grid

我在我的应用程序中使用 Datatables，但没有触发获取数据控制器方法。我能够在 UI 上呈现表格，但即将到来的数据为 NULL。

这是我的代码

SITE.MASTER 中的导入项目

```
 <link href="/Scripts/DataTables/media/css/demo_page.css" type="text/css"  rel="stylesheet" />

     <link href="/Scripts/DataTables/media/css/demo_table.css" type="text/css"  rel="stylesheet" />

      <script src="/Scripts/Lib/jquery-1.4.2.js" type="text/javascript" language="javascript"></script>

     <script type="text/javascript" charset="utf-8" src="/Scripts/DataTables/media/js/jquery.dataTables.js"></script> 
```

这是我的 HTML 外观

```
!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>http://stackoverflow.com/questions/6946559/jqgrid-please-help</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
       <script type="text/javascript" charset="utf-8">
            $(document).ready(function () {
                $('#example').dataTable({
                    bProcessing: true,
                    sAjaxSource: '@Url.Action("GridData", "Home")'
                });
            });
        </script>

 </head>
<div id="dynamic">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="20%">Rendering engine</th>
            <th width="25%">Browser</th>
            <th width="25%">Platform(s)</th>
            <th width="15%">Engine version</th>
            <th width="15%">CSS grade</th>
        </tr>
    </thead>
    <tbody>

    </tbody>

</table>
</div>
</html> 
```

这是我加载 HTML 的 JS 文件的外观

```
var rptTabs = function () {
    return {
        Init: function () {

            var placeholder = $("#rpt-tab");
            placeholder.setTemplateURL("/Templates/Home/report.htm");

            placeholder.load("/Templates/Home/report.htm");

        }
    }
} (); 
```

这是我的 Home 控制器方法的外观

```
public ActionResult GridData()
        {
            return Json(new
            {
                aaData = new[] 
            {
                new [] { "Trident", "Internet Explorer 4.0", "Win 95+", "4", "X" },
                new [] { "Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", "1.8", "A" },
                new [] { "Webkit", "iPod Touch / iPhone", "iPod", "420.1", "A" }
            }
            }, JsonRequestBehavior.AllowGet);
        } 
```

请告诉我我的实施有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:15:15.030

问题与您在静态 HTML 模板中使用服务器端助手 ( ) 的事实有关，`Url.Action("GridData", "Home")`因为您错误地复制粘贴[`my solution from here`](https://stackoverflow.com/a/7836559/29407)而没有使其适应您的场景。此外，您使用的是 WebForms 视图引擎而不是 Razor。

因此，我建议您将此模板设置为 ASPX WebForm，通过控制器操作提供服务，该操作允许您在内部使用服务器端助手。

```
public class TemplatesController: Controller
{
    public ActionResult Report()
    {
        return View();
    }
} 
```

然后你就会有一个对应的视图：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>https://stackoverflow.com/questions/6946559/jqgrid-please-help</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#example').dataTable({
            bProcessing: true,
            sAjaxSource: '<%= Url.Action("GridData", "Home") %>'
        });
    });
    </script>
</head>
<div id="dynamic">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="20%">Rendering engine</th>
            <th width="25%">Browser</th>
            <th width="25%">Platform(s)</th>
            <th width="15%">Engine version</th>
            <th width="15%">CSS grade</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>
</div>
</html> 
```

然后在加载模板时指定此控制器的正确路径（再次使用服务器端帮助程序）。

# windows-8 - 将 IBuffer 转换为 Buffer 数组

> ID：14352741
> 
> 赞同：0
> 
> 时间：2013-01-16T06:46:47.520
> 
> 标签：windows-8

我正在编写一个 JavaScript Windows 商店应用程序。我的要求是读取本地可用的文件并获取 arraybuffer 或 Uint8array 作为响应。

我尝试使用“Windows.Storage.FileIO.readBufferAsync(file)”，但这给了我一个 IBuffer 对象。

1.  是否有读取文件并为我提供数组缓冲区的 API？
2.  如何将“IBuffer”转换为“arraybuffer”？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:41:48.557

您可以使用[DataReader](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datareader.aspx)，例如：

```
 Windows.Storage.StorageFile.getFileFromApplicationUriAsync(new Windows.Foundation.Uri("ms-appx:///Assets/textfile.txt")).then(
        function (myFile) {
            Windows.Storage.FileIO.readBufferAsync(myFile).done(
                function (buffer) {
                    var myArray = new Uint8Array(buffer.length);

                    var dataReader = Windows.Storage.Streams.DataReader.fromBuffer(buffer);
                    dataReader.readBytes(myArray)
                    dataReader.close();
                }
            );
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T12:27:15.820

Windows.Security.Cryptography.CryptographicBuffer.copyToByteArray(IBuffer)

这将返回 Uint8Array（字节数组）

# silverlight-4.0 - 附加 y 轴范围 silverlight 中缺少零值

> ID：14352743
> 
> 赞同：0
> 
> 时间：2013-01-16T06:47:08.873
> 
> 标签：silverlight-4.0, telerik, radchart

我们在 silverlight 应用程序中使用 RadChart。图表有多个 y 轴（两个），其中一个显示从 0 到 100 的范围，但另一个 y 轴没有显示从 0 到 100 的范围。它显示了从该点开始的范围将该值的 -1 绑定到 +1（即值为 80 表示比例将为 79、80、81）。

任何人都可以为我提供任何解决方案，不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:14:47.610

试试这样。

```
 AxisY axisY = new AxisY();
        axisY.AxisName = "AxisY1";
        axisY.Title = "";
        axisY.IsZeroBased = true; 
```

# ruby-on-rails - Rails 3.2.x：如何在我的视图模板中调用 link_to 时使用变量？

> ID：14352749
> 
> 赞同：0
> 
> 时间：2013-01-16T06:47:28.533
> 
> 标签：ruby-on-rails

我有一个对象菜单项，由控制器提供给相应的视图模板。该对象有两个字段：标签和链接。

我在控制器中启动了这个对象，如下所示：

```
// first param is for label and second for link.
menuitem = MenuItem.new("Hello","Say_hello_path") 
```

在视图模板中，我输入以下内容：

```
<%= link_to menuitem.label, menuitem.link %> 
```

我希望这会导致：`<a href="/say/hello">Hello</a>`

但我得到：`<a href="Say_hello_path">Hello</a>`

我究竟做错了什么？有没有更好的方法来达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:55:41.150

只有实例变量被添加到视图包中。因此，在这两个文件中，您都需要将 menuitem 更改为 @menuitem。

除此之外，say_hello_path 是一个函数，而不是字符串，因此您应该删除引号，并可能将其全部小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:55:52.930

MenuItem.new("Hello","Say_hello_path") 中的第二项是一个字符串。当您调用 <%= link_to menuitem.label, menuitem.link %> 时，它只是放置字符串。

您可以尝试以下方法

```
// first param is for label and second for link.
@menuitem = MenuItem.new("Hello", say_hello_path) 
```

或者，您可以尝试评估 link_to 中的字符串（您需要修复方法名称的大小写）。

```
<%= link_to @menuitem.label, eval(@menuitem.link) %> 
```

通常不推荐使用 Eval，但在这种情况下可能是您需要的。

# c# - 将一组 xml 文件转换为 .mdf 文件

> ID：14352750
> 
> 赞同：0
> 
> 时间：2013-01-16T06:47:30.333
> 
> 标签：c#, asp.net, sql, xml, sql-server-2008

我以前曾在使用 asp 的数据驱动网站上工作过。网络和 sql 服务器。这涉及从数据库中检索记录并在网页上显示。现在，我在服务器上有一些包含 xml 文件的文件夹。我必须创建一个使用文件夹名称搜索并从选定的特定 xml 文件中检索其他信息的 Asp 网站。我认为如果它在数据库中会更容易 .mdf 以便可以使用 sql server 和通过存储过程访问它来访问 xml 文件中的信息。

现在的问题是如何将服务器上的 xml 文件转换为 .mdf 以在我的 asp 网站上执行搜索操作..请指导我..还有一件事是文件夹将每天更新...所以，需要一些可以做的事情检索期间的转换..请以最佳方式指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:33:07.507

步骤1 。将 xml 文件转换为数据集 [http://www.codeproject.com/Articles/10427/Convert-XML-Data-to-DataSet-and-Back](http://www.codeproject.com/Articles/10427/Convert-XML-Data-to-DataSet-and-Back)

步骤 2\. 为数据集中的每个表创建一个表并插入这些行。

步骤 3\. 对这些表执行查询

或者**干脆使用 linq to xml**（最好在这个 senario 中），不需要直接在 xml 上转换查询

# android - 未达到方法 BusListener.foundAdvertisedName

> ID：14352752
> 
> 赞同：1
> 
> 时间：2013-01-16T06:47:36.040
> 
> 标签：android, alljoyn

我正在为基本的 AllJoyn 实现而苦苦挣扎。

我在*BusAttachment*上注册了一个*BusListener*并覆盖了*foundAdvertisedName*，比如

```
mBus.registerBusListener(new BusListener() 
{
  @Override
  public void foundAdvertisedName(String name, short transport, String namePrefix)
  {
  }
} 
```

但是当我打电话

```
mBus.findAdvertisedName(ServiceBusHandler.SERVICE_NAME); 
```

它没有到达*foundAdvertisedName*方法。

我错过了什么。

# javascript - 带有 Javascript VM 安全性的 Python

> ID：14352753
> 
> 赞同：0
> 
> 时间：2013-01-16T06:47:44.013
> 
> 标签：javascript, python, security, map, reduce

我正在考虑制作一个用 python 编写的简单的 map reduce 应用程序，我不打算将它变成一些超级公共项目或任何只是使用它来了解像 map reduce 这样的平台背后的挑战。我想在 python 中使用带有集群管理的 javascript vm，原因是我希望有人能够轻松提交要处理的代码，这意味着我不需要评估 python 代码。我要避免的是滥用 javascript，不是为了长时间运行，而是为了避免它脱离 javascript vm 或访问运行 python 的 linux 主机。我见过 Python V8、SpiderMonkey 和其他一些，但不确定它们是否包含该功能。

问题：当涉及到让嵌入的 javascript vm 远离操作系统时，我的选择是什么？这些选项在某些可与 python 一起使用的 javascript vm 中是否受到限制或不需要

# javascript - 如果 (#formID) 的值大于 100000，则显示此 Div

> ID：14352754
> 
> 赞同：2
> 
> 时间：2013-01-16T06:47:45.120
> 
> 标签：javascript, html, css, if-statement, show-hide

如何根据表单输入值显示或隐藏 div。特别是如果它的价值是积极的。我希望它显示一个 div。否则我希望它显示另一个 div。

这是我真正想要的更复杂的东西。如果 form1 大于 10,000 而 form2 小于零。显示第一个 div（如果两者都满足）。如果满足表格 1 的条件并且不满足表格 2（表格 2 为正数），则显示第二个 div。如果其他任何内容（均不满足或不满足表格 1（9000）但表格 2 是（负数）显示第三个 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:56:21.850

让我们假设您对 div 有以下内容：

```
 <div class="show_when_more">
     Foo 
  </div>

   <div class="show_when_less">
     Bar
   </div> 
```

以及您想要观看的以下输入：

```
 <input type="text" class="to_watch"/> 
```

然后下面的 Javascript 会为你做这件事（你需要 jquery 才能工作）：

```
 $('input.to_watch').on('change', function(){
       if($(this).val()>=1000){
           $('div.show_when_more').css('display', 'block');
           $('div.show_when_less').css('display', 'none');
       } else {
           $('div.show_when_more').css('display', 'none');
           $('div.show_when_less').css('display', 'block');
       }
    }); 
```

这也适用于任何其他类型的选择器（例如，按 id、按元素类型等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:16:05.650

我认为您正在寻找以下内容：

```
$(function() {
  if(isNaN(parseInt($("#in").val())))
  { 
   $("#divtobeshown").show();
  }
  else {
     $("#divtobehidden").hide();
  }
});

<form id="sform">
  <input value="" id="in" >
</form> 
```

[**JSFIDDLE**](http://jsfiddle.net/7aNwP/15/)上的一个简单说明[](http://jsfiddle.net/7aNwP/15/)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:52:30.990

这是逻辑。只适用于您的项目。

```
var value = document.getElementById('input').value;

if(value === 1000) {
//show the first div
}
else {
//show the second div
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T06:59:00.970

如果您想查看它是否是肯定的，您可以检查它是否 >= 0（或 1，取决于您的目标）。

在对数字进行检查时，最好先对其进行 parseint() 。

将其放入 if 语句中：

```
if (value >= 0) { then show one div } else { show a different div } 
```**

# eclipse - SVN Checkout 到现有项目文件夹

> ID：14352755
> 
> 赞同：0
> 
> 时间：2013-01-16T06:47:47.237
> 
> 标签：eclipse, svn, svn-checkout

我正在尝试将现有项目文件夹检出到 SVN 存储库中，但它给了我这样的错误：

目标项目与源代码管理分离。所以请注意插件不会为这些资源提供任何 SVN 操作。

谢谢， 安基特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:50:19.433

这不是您要查找的操作。你应该使用`import`.

# vb.net - SQL 语句没有返回实际结果

> ID：14352757
> 
> 赞同：-1
> 
> 时间：2013-01-16T06:47:50.520
> 
> 标签：vb.net

我已经使用 vb.net 编写了这段代码，但它给了我错误的结果。

```
 sql = "SELECT * FROM Spec WHERE WheatType= '" & ddlType.SelectedValue & "' AND Category='1BK' AND Silo= '" & txtSilo.Text & "'" 
```

如果我删除`Silo= '" & txtSilo.Text & "'`它会给我结果，但它不想要我想要的。知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:53:57.953

只是一个猜测，但您在那里进行区分大小写的匹配。可能是您的 txtSilo.Text 设置为“红色”，并且数据库中的行将 Silo 设置为“红色”

你可以改为

```
sql = "SELECT * FROM Spec WHERE WheatType= '" & ddlType.SelectedValue & "' AND Category='1BK' AND Silo LIKE '" & txtSilo.Text & "'" 
```

请记住，您还应该修剪文本字段的空白。

顺便说一句，这种代码很容易受到 SQL 注入攻击......如果这将是一个生产应用程序，我建议阅读该主题并修复这个主要的安全漏洞。否则，有人可能会说删除表上的所有行，并将正确的值传递给 txtSilo 等。

# android - Android In App Billing：保护应用程序公钥

> ID：14352758
> 
> 赞同：61
> 
> 时间：2013-01-16T06:47:53.177
> 
> 标签：android, security, bit-manipulation, in-app-billing, public-key

来自 Android In App Billing 版本 3 (TrivialDrive) 示例应用程序附带 sdk

### MainActivity.java

```
/* base64EncodedPublicKey should be YOUR APPLICATION'S PUBLIC KEY
 * (that you got from the Google Play developer console). This is not your
 * developer public key, it's the *app-specific* public key.
 *
 * Instead of just storing the entire literal string here embedded in the
 * program,  construct the key at runtime from pieces or
 * use bit manipulation (for example, XOR with some other string) to hide
 * the actual key.  The key itself is not secret information, but we don't
 * want to make it easy for an attacker to replace the public key with one
 * of their own and then fake messages from the server.
 */
String base64EncodedPublicKey = "CONSTRUCT_YOUR_KEY_AND_PLACE_IT_HERE"; 
```

好吧，我不确定我是否了解此安全措施。我知道如何从 Google Play Developer Console 获取应用程序公钥（已经是 base 64 编码）。

我不明白的是这部分

```
 /* Instead of just storing the entire literal string here embedded in the
 * program,  construct the key at runtime from pieces or
 * use bit manipulation (for example, XOR with some other string) to hide
 * the actual key
 */ 
```

据我所知，这个公钥是一个常量字符串，是谷歌在应用程序上传过程中给出的。

我们如何使用任何位操作过程以编程方式创建相同的密钥？以前有人做过吗？有没有关于如何做到这一点的示例代码？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-16T07:56:49.340

像这样的东西：

```
String Base64EncodedPublicKey key = "Ak3jfkd" + GetMiddleBit() + "D349824"; 
```

或者

```
String Base64EncodedPublicKey key = 
         DecrementEachletter("Bl4kgle") + GetMiddleBit() + ReverseString("D349824"); 
```

或任何不将密钥放在 base64 纯文本中的单个字符串中。可能也不将密钥存储在 base64 中的东西也是一个好主意，因为原始的 base64 文本片段很容易发现。

这不是保护密钥的特别好的方法。但它可以防止一些微不足道的攻击，即有人只是在您的 APK 中搜索文字字符串，寻找看起来像 base64 编码的公钥的东西。至少你让 #$ *#* $ers 工作了一点。

如果邪恶的人识别了您的公钥，他们可能会做坏事。显然，谷歌似乎是这么认为的。我可以猜到这一步的作用，但我不确定我是否真的想在一个开放的论坛上推测这一点，并给任何人任何想法。你想这样做。

基本情节摘要将是您使某人更难以编写以编程方式对应用程序进行 LVL 处理的应用程序。

假设任何这样做的人都以破解 20 或 30,000 个 Android 应用程序并重新发布它们为生。很有可能，我想他们不会再花十分钟的时间将您的应用程序添加到已被程序破坏的 20,000 个 Android 应用程序的列表中，如果他们实际上需要做一些手动工作的话。除非您有顶级应用程序。然后战斗可能是无休止的，而且可能最终是徒劳的。

将密钥分成连续的块（如另一个答案中所提议的）可能还不够好。因为密钥将在 APK 的字符串常量表中以连续的字符串结尾。用程序很容易找到它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-02-20T10:41:00.343

另一种方法是对键进行一些基本的转换。

```
// Replace this with your encoded key.
String base64EncodedPublicKey = "";

// Get byte sequence to play with.
byte[] bytes = base64EncodedPublicKey.getBytes();

// Swap upper and lower case letters.
for (int i = 0; i < bytes.length; i++) {
    if(bytes[i] >= 'A' && bytes[i] <= 'Z')
        bytes[i] = (byte)( 'a' + (bytes[i] - 'A'));
    else if(bytes[i] >= 'a' && bytes[i] <= 'z')
        bytes[i] = (byte)( 'A' + (bytes[i] - 'a'));
}

// Assign back to string.
base64EncodedPublicKey = new String( bytes ); 
```

所以想法是将您的原始密钥放入 as`base64EncodedPublicKey`并运行上面的代码，它将交换大小写字母并将结果放回`base64EncodedPublicKey`. `base64EncodedPublicKey`然后，您可以从调试器复制结果并将其作为原始值粘贴到代码中。此时您的密钥将被转换（大写和小写切换），并且在运行时它会将其修复回正确的大小写，并继续工作。

以上显然是一个相当基本的转码，但您可以更有创意，颠倒AZ的顺序，交换奇偶数，将元音交换为偶数。这里的问题是，如果我将代码放在上面的代码片段中进行了一堆更有趣的转码，然后每个人都将其复制并粘贴到他们的项目中，破解者将很容易能够自己查看和使用转码（通过查看这个帖子）！所以你只需要自己想出一些变换。

我特意在两个方向上进行了上述工作（因此，如果您运行两次，您将获得原始值），因为它可以轻松地在原始密钥上运行算法。我认为它有点整洁，看起来真正的钥匙以纯文本的形式放在那里，一个随便的破解者可能会尝试切换它，然后当它不起作用时会感到困惑。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T07:38:40.613

你可以像这样把它分成几块

```
String piece1 = "SDFGJKGB4UIH234WE/FRT23RSDF/3DFUISDFVWE";
String piece2 = "SDFGJKGB4UIHUISDFVWE";
String piece3 = "BDYASGBDNAWGRET24IYE23das4saGBENWKD";
String piece4 = "432423SDF23R/+SDDS";

mHelper = new IabHelper(this, piece1 + piece2 + piece3 + piece4); 
```

任何类型的操作都可以。

您无法完美地向攻击者隐藏公钥，您只需要操纵字符串来迷惑攻击者一点点

您可以添加一些字符串并在需要时将其删除或将其拆分为块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-20T09:12:36.927

我所做的是将密钥转换为 char 数组，将其分成两部分，然后在需要时重建它，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_shop);

    char[] base64KeyByteArray = ArrayUtils.addAll(getPublicKeyChunk1(), getPublicKeyChunk2());

    Log.d(TAG, String.valueOf(base64KeyByteArray));
}

private char[] getPublicKeyChunk1() {
    return new char[]{82, 73, 67, 66, 73, 106, 65, 78, 66, 103, 107, 113, 104, 107,
            105, 71, 57, 119, 79, 66, 65, 81, 69, 70, 65, 65, 79, 67, 65, 81, 56, 65, 77, 73,
            73, 66, 67, 103, 75, 67, 65, 81, 69, 65, 121, 55, 81, 76, 122, 67, 105, 80, 65,
            110, 105, 101, 72, 66, 53, 57};
}

private char[] getPublicKeyChunk2() {
    return new char[]{82, 43, 68, 47, 79, 121, 122, 110, 85, 67, 118, 89, 108, 120, 43, 49,
            80, 100, 67, 108, 55, 90, 57, 103, 119, 57, 87, 78, 79, 111, 53, 101, 80, 71,
            117, 74, 104, 82, 87, 97, 100};
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-07T11:43:20.103

在我从[gidds获得的帮助下，以](https://stackoverflow.com/a/55557274/6563022)[Steven Craft 的回答为基础](https://stackoverflow.com/a/28626982/6563022)

这是一个更干净的代码。此外，它将数字 (0-9) 换成 ascii 字符 (37-46)，反之亦然。用科特林写的。

```
 val string = "Hello World 012345679 %&()"
 fun String.swapCase() = map {
        when {
            it.isUpperCase() -> it.toLowerCase()
            it.isLowerCase() -> it.toUpperCase()
            it.isDigit() -> (37 + (it.toInt() - 48)).toChar()
            it.isDefined() -> if (it.toInt() >= 37 && it.toInt() <= 46) (48 + (it.toInt() - 37)).toChar() else it
            else -> it
        }
    }.joinToString("")
    println(string.swapCase()) // hELLO wORLD %&'()*+,. 0134 
```

使用这个-> [https://edge-developer.github.io/BillingGenerator/](https://edge-developer.github.io/BillingGenerator/)快速生成所有这些

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T12:57:39.727

## 遵循 3 个简单的步骤来保护 API/密钥

我们可以使用 Gradle 来保护 API 密钥或 Secret 密钥。检查我的[答案](https://stackoverflow.com/a/47553410/2024527)。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-04-16T22:17:46.957

有人真的需要你的私钥吗？我认为整个想法是**替换**它。恕我直言，任何操作都是无用的。邪恶的人唯一要做的就是用正确的（他自己的密钥）值初始化变量一行begore google API调用。

# python - 如何在 PyGTK 的 TreeView 中捕获选定的行和列？

> ID：14352760
> 
> 赞同：1
> 
> 时间：2013-01-16T06:47:57.710
> 
> 标签：python, gtk, pygtk, gtk2, gtktreeview

我有一个使用创建的表`gtk.TreeView`。我想知道用户选择了哪一行和哪一列。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:51:52.650

您想要的行的方法是 gtk.TreeSelection.get_selected 或 gtk.TreeSelection.get_selected_rows，具体取决于您选择的选择方法（SELECTION_SINGLE、SELECTION_MULTIPLE 或 SELECTION_BROWSE）。

[http://www.pygtk.org/docs/pygtk/class-gtktreeselection.html#method-gtktreeselection--get-selected](http://www.pygtk.org/docs/pygtk/class-gtktreeselection.html#method-gtktreeselection--get-selected)

对于您将使用 gtk.TreeView.get_path_at_pos 的列

[http://pygtk.org/docs/pygtk/class-gtktreeview.html#method-gtktreeview--get-path-at-pos](http://pygtk.org/docs/pygtk/class-gtktreeview.html#method-gtktreeview--get-path-at-pos)

但是您需要的不仅仅是这种方法，因为您需要首先为其提供坐标。这可能会让你更深入地了解它：

[http://www.gtkforums.com/viewtopic.php?f=3&t=2645](http://www.gtkforums.com/viewtopic.php?f=3&t=2645)

get_path_at_pos 将返回路径和列，因此如果您确实需要知道被单击的列，这可能是要采用的方法。因此，关键仍然是上面示例中列出的按钮按下事件以及[http://www.pygtk.org/docs/pygtk/class-gdkevent.html中的 PyGTK](http://www.pygtk.org/docs/pygtk/class-gdkevent.html)

# javascript - 如果变量超过数字，PHP播放声音

> ID：14352771
> 
> 赞同：-1
> 
> 时间：2013-01-16T06:48:45.870
> 
> 标签：javascript, html, audio

我想知道如果我的变量大于另一个变量或大于一个数字，我怎么能播放声音。

我还需要声音与 Internet Explorer 兼容，并且该框不可见。

我尝试了很多东西，但一无所获。所以我请求你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:04:02.700

这是我使用的一个 Javascript 库，名为[jPlayer](http://www.jplayer.org)，它是[jQuery](http://jquery.com/) Javascript 库的插件。

您可以使用您的 PHP 脚本构建一些东西，以便在您的页面中编写这段 Javascript 代码：

```
$(function() {
  $("#audio").jPlayer({ // Selector, in this case the player in not shown
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: 'hellmarch.mp3'
      }).jPlayer('play'); // Play immediately
    },
    supplied: 'mp3',
    swfPath: ''
  });
}); 
```

此代码将立即播放名为`hellmarch.mp3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:52:54.030

如果您的等式结果为真，请回显一个 html5 音频标签并使其自动播放。就像是

```
<audio controls autoplay="autoplay" style="display:none">
<source src="example.ogg" type="audio/ogg">
<source src="example.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

# jquery - 在滚动事件上使用 json 加载数据

> ID：14352777
> 
> 赞同：0
> 
> 时间：2013-01-16T06:49:38.670
> 
> 标签：jquery, html, json

我需要加载滚动事件的数据。搜索后，我从这个站点得到了一个代码：[Code to load data on scroll。](http://www.technicalkeeda.com/jquery/load-data-on-page-scroll-using-jquery-php-codeigniter-and-mysql)

他们在 php 中有 2 个类，名为 Demo 和 MiscellaneousModel。我使用相同的代码只是更改了表的名称。

**演示.php**

```
<?php
  class Demo extends Controller {

function Demo(){
    parent::Controller();       
    $this->load->model('MiscellaneousModel');       
}

public function index(){
    $query = $this->MiscellaneousModel->getPhotos();
    echo json_encode (array($query));       
}
 }
?> 
```

**MiscellaneousModel.php**

```
<?php
   class MiscellaneousModel extends Model {
function MiscellaneousModel(){
    parent::Model();        
}

function getPhotos(){   
    $this->db->select("Photo_Id,url,title");
    $this->db->from('photos');              
    $query = $this->db->get();      
    return $query->result();            
}

   }
  ?> 
```

**测试.php**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
p{margin: 10px;
padding: 5px;}
#finalResult{
list-style-type: none;
margin: 10px;
padding: 5px;
width:300px;
}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="json2.js"></script>
<script>
$(document).ready(function () {
$(window).scroll(function () {          
    if ($(window).scrollTop() == ( $(document).height() - $(window).height())) {
        loadData();
    }
});

function loadData() {
    $.ajax({
        type: "post",
        url: "http://localhost/test/test.php",
        cache: false,               
        data:'',
        success: function(response){

            var obj = JSON.parse(response);
            try{
                var str = '';
                var items=[];   
                $.each(obj[0], function(i,val)
                                    {                                                           
                                                items.push($('<li/>').text(val.url));
                                                items.push($('<li/>').text(val.title));
                }); 

                $('#finalResult').fadeOut('slow', function() {
                $(this).append(str).fadeIn('slow').fadeIn(3000);
                $('#finalResult').css({backgroundColor: ''});
             $('#finalResult').append.apply($('#finalResult'),items);
                }).css({backgroundColor: '#D4ED91'});

            }catch(e) {     
                alert('Exception while request..');
            }       
        },
        error: function(){                      
            alert('Error while request..');
        }
     });

}

});
</script>
</head>
<body>      
<h1>Load data on page scroll using jQuery Php Codeigniter and Mysql  </h1>  
<ul id="finalResult">
</ul>   
</body>
</html> 
```

我对 json 完全陌生。所以请告诉我我哪里错了。我也想知道如何在 json 中建立与数据库的连接。我的意思是在我提到的网站上的示例中，我无法理解如何连接到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:30:51.343

将此保存在文件中。`dbCalls.php`为简单起见 ，随便叫它

```
class db{
    protected $db = NULL;

    public function __construct(){
        $this->db = new mysqli('localhost', 'username', 'password', 'database');
    }

    public function getPhotos(){
        $stmt  = $this->db->query('SELECT Photo_Id, url, title FROM photos');

        $rows = array();
        while($row = $stmt->fetch_assoc()):
            $rows[] = $row;
        endwhile;   

        return json_encode($rows);
    }
} 
```

现在制作一个新文件。`controller.php`.

```
include_once('dbCalls.php');
$db = new db; //instantiate class

if(!empty($_GET['getPhotos'])):
    echo $db->getPhotos(); //send the json encoded photos back
endif; 
```

现在像这样改变你的ajax函数。

```
$.ajax({
    type: "GET",
    url: "http://localhost/test/controller.php",
    cache: false,               
    data:'getPhotos=1',
    dataType:'json',
    success:function(json){
        $.each(json, function(i,row){
            //assuming your rows were just simple rows, and you used the above code..
            console.log(row.Photo_Id, row.url, row.title);
        });
    }
}); 
```

你可以用你想用来操作响应的任何 jQuery 函数来代替对控制台的调用。

# ios - 不规则拼图匹配问题

> ID：14352779
> 
> 赞同：1
> 
> 时间：2013-01-16T06:49:44.507
> 
> 标签：ios

我正在开发一个拼图游戏应用程序。有不规则的碎片。我已经通过阴影和裁剪剪掉了那块。现在我制作了一个字典数组，每个片段都有左、右、上、下索引。这就是为什么我能够识别每一个片段。但问题是，当我认出 2 件。它必须组合成一个部分。然后为该组合部分创建一个新视图。现在问题开始由我开始如何识别该组合部分与其他部分。任何机构都可以帮助我解决这个问题或任何正确的想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:01:54.567

你可以把你的拼图板想象成一个正方形的网格单元格，每块放置一次就代表一个网格的单元格。

现在，当您创建拼图块时，您可以将这些拼块存储在一个数组中，按照出现在网格中的顺序排列。

您可以将 Grid 表示为一维数组，如下所示

```
suppose your puzzle is 4*4 than your one dimensional array will be of size 16

and you can pick up position of any piece at (m,n) in grid using below formula

index in array = m+(n*4) where m,n >=0 & m,n < 4 
```

比您可以检查与其阵列位置相对应的每个部分的网格位置，以检查其是否在正确的位置

# php - 检查下一条记录是否存在

> ID：14352785
> 
> 赞同：-3
> 
> 时间：2013-01-16T06:50:10.637
> 
> 标签：php, mysql

我想在 PHP 中做分页之类的东西，所以我要记录或限制 0、10 在这里，在获取具有该限制的数据时，我应该知道第 11 条记录是否存在，这样我就可以减少一个函数调用来获取和在显示之前检查记录是否存在。我正在使用 PHP，MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:53:15.830

取 0,11（然后是 10、11；20、11 等），但首先显示 10。这样您将始终知道下一页是否存在（通过检查第 11 条记录是否存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:00:00.860

通过分页，我想去任何页面。所以在显示任何数据之前。我会在数据库上查询一个 COUNT 以了解那里有多少条记录。然后构建您的页面导航。

或者你只想显示上一个/下一个？而不是类似的东西：

`Previous - 2 3 4 5 - Next`

所以我会用

```
SELECT COUNT(`id`) as `NumberOfRows` FROM `tablename` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:01:32.537

在要选择的字段之前添加[SQL_CALC_FOUND_ROWS](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

例如/

```
SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
WHERE id > 100 LIMIT 10; 
```

使用限制触发查询后，您可以触发下面提到的查询以获取记录总数

```
SELECT FOUND_ROWS(); 
```

# java - RMI 解组异常

> ID：14352787
> 
> 赞同：2
> 
> 时间：2013-01-16T06:50:21.040
> 
> 标签：java, rmi

当我编写 RMI 系统时，我在客户端遇到了异常问题

```
Exception in thread "main" java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: com.cs.entity.LectureCourse
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:178)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:178)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:132)
    at $Proxy1.getNamedClass(Unknown Source)
    at com.cs.test.ClientCRUD.main(ClientCRUD.java:40) 
```

作为`com.cs.entity.LectureCourse`一个应该由客户端在运行时使用 RMI 代码库功能下载的类，我已经检查以确保

1.  服务器 VM 参数的代码库设置正确，并且
2.  客户端 VM 选项 -Djava.security.policy= 也已正确设置。
3.  -Djava.rmi.server.hostname 也用于确保注册表正确获取内容

当我在同一个节点上运行客户端和服务器时，它可以工作，但是当单独的物理机器分别持有服务器和客户端时，客户端会显示异常。

有人以前见过这个问题吗？请帮忙...

@EJP

以下是我用来启动 RMI 注册表的代码（在 tomcat 7 contextInitialized 内）

```
 final String value = "http://192.168.1.11:8080/csl/";
        System.out.println(value);
        System.setProperty("java.rmi.server.codebase", value);

        registry = LocateRegistry.createRegistry(8899) 
```

这是我用来在客户端查找注册表的代码

```
 System.setSecurityManager(new RMISecurityManager());

    final String HOST = "192.168.1.11";
    final int port = 8899;
    final Registry registry = LocateRegistry.getRegistry(HOST, port); 
```

我认为它们工作正常，但错误让我很沮丧

我想我找到了问题所在。如前所述，RMI 注册表是在 Tomcat 7 contextInitialized 方法中启动的，该方法应在启动 Web 项目时调用。事实证明，如果 RMI 服务器在独立的主应用程序中，相同的代码可以很好地工作。根据我在不同 RMI 服务器配置中的几次测试，我得出的结论是

1.  Tomcat 7 contextInitialized 方法的作用与普通的 java 主程序不同
2.  我不确定，但代码库似乎只有在 URL（我正在使用网络服务器）指示特定 jar 文件而不是目录时才有效。（这可能是我对教程的误解或类似的东西）

所以问题变成了为什么 Tomcat 7 没有以不同的方式启动 RMI 注册表？我仍在努力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:56:33.513

> Tomcat 7 contextInitialized 方法的作用与普通的 java 主程序不同

当然可以。但在不知道您有什么具体期望的情况下，无法进一步评论。

> 我不确定，但代码库似乎只有在 URL（我正在使用网络服务器）指示特定 jar 文件而不是目录时才有效。（这可能是我对教程的误解或类似的东西）

它工作得更好，因为只有一次下载，而且你不必在你的代码库服务器上散布 .class 文件：只需部署一个或多个 JAR 文件。

如果您希望 RMI 从目录中加载 JAR 文件而没有被明确告知这样做，那么它不会。如果您不命名 JAR 文件，它将查找 .class 文件。

# jquery - 使用 jquery 将唯一的 href 绑定到 li 数组

> ID：14352790
> 
> 赞同：0
> 
> 时间：2013-01-16T06:50:32.197
> 
> 标签：jquery, arrays, menu

好吧，我的想法是创建一个可能的链接列表并让 jquery .bind() 附加一个适当的 href

这是我的清单：

```
<ul>
    <li>main</li>
    <li>design</li>
    <li>photography</li>
    <li>studio art</li>
    <li>code-stack</li>
    <li>about me</li>
    <li>contact</li>
</ul> 
```

然后是我的 Jquery：

```
$(document).ready(function() {
var links = ["index.html","design.html","photo.html","studio.html","code.html","about.html","contact.html"];
var lis = document.getElementsByTagName("li");

for(i=0; i<lis.length; i++) {
        var thisLink = links[i];
        alert(thisLink);
        $(lis[i]).bind("click", function() {
            $(this).attr("href",thisLink);
        });
    }
}); 
```

所以几乎发生的事情是我可以让它应用一些东西（在之前的测试中，我让它对所有这些应用一个通用的“你好”警报），所以它正在应用它，但是当我点击它们时......什么都没有发生。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T06:57:14.613

```
$(document).ready(function() {
    var links = ["index.html","design.html","photo.html","studio.html","code.html","about.html","contact.html"];

    $("li").each(function(i, val){
         $(this).wrap("<a href='"+links[i]+"' />");
    });
}); 
```

# php - 从php中的excel表中读取数据

> ID：14352791
> 
> 赞同：0
> 
> 时间：2013-01-16T06:50:45.130
> 
> 标签：php

我正在使用此代码从任何文件中读取数据，但是如果我想从 excel 表中读取数据，那我该怎么办？

```
<?php 
   if(isset($_POST['submit'])){
      $cir="certificate";
      if(!is_dir($cir)){
           mkdir($cir);
      }
      $image1=$_FILES['cir']['name'];
      $image=$_FILES['cir']['tmp_name'];
      $server_path=$cir.'/'.basename($_FILES['cir']['name']);
      $s=move_uploaded_file($image,$server_path);
     if($s){
        //echo "successfully uploaded.";
        $file_open=fopen("$cir/$image1","r");
        $file_read=fread($file_open,filesize("$cir/$image1"));
        echo $file_read;
        //$data = substr(strrchr("$cir/$file_read", ","),5 );
        echo $file_read;
     }else{
        echo "problem in uploading.";
     }
   }
?>
<html>
     <body>
         <form name="form" method="post" enctype="multipart/form-data">
             <input type="file" name="cir" /><br />
             <input type="submit" name="submit" value="submit" />
         </form>
    </body>
</html> 
```

Excel 表包含各种外壳，如 Name-XYZ、s.no-123 等。我希望 xyz 应该放在一个变量上，而 123 应该放在另一个变量上。PHP中的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:11:30.153

您可以使用[PHPExcel](http://phpexcel.codeplex.com/)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:57:00.847

如果您的网站涉及广泛阅读 excel 文件，那么请使用[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)之类的库。它同时支持 xls 和 xlsx 类型。

# android - 当孩子设置 INVISIBLE 时，父母不可点击

> ID：14352801
> 
> 赞同：0
> 
> 时间：2013-01-16T06:51:15.657
> 
> 标签：android, view, onclick

我有一个简单`RelativeLayout`的两个`TextView`s 和一个`ImageView`. 当我将 Views 可见性设置为`View.INVISIBLE`时，在单击视图时不会触发父级的 onClickListener。当它们可见时，只要我单击它，就会调用父级的 onClickListener。
我想将它们设置为不可见，因为我想`TextView`根据模型的状态设置另一个。我错过了什么？

```
 public class CheckinCompoundView extends RelativeLayout {

    private static final String TAG = CheckinCompoundView.class.getSimpleName();
    private RelativeLayout mEventContainer;
    @SuppressWarnings("unused")
    private ImageView mEventIcon;
    private TextView mEventName;
    private TextView mEventCategory;
    private RelativeLayout mPlaceContainer;
    private ImageView mPlaceIcon;
    private TextView mPlaceName;
    private TextView mPlaceCategory;
    // private TextView mPlaceEmptyView;
    private TextView mStatText;

    public CheckinCompoundView(Context context) {
        super(context);
        initView();
    }

    private void initView() {
        Context context = getContext();
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.view_checkin_compund_view, this, true);

        mEventContainer = (RelativeLayout) findViewById(R.id.event_container);
        mEventIcon = (ImageView) findViewById(R.id.event_image);
        mEventName = (TextView) findViewById(R.id.event_title);
        mEventCategory = (TextView) findViewById(R.id.event_category);
        mPlaceContainer = (RelativeLayout) findViewById(R.id.place_container);
        mPlaceIcon = (ImageView) findViewById(R.id.place_image);
        mPlaceName = (TextView) findViewById(R.id.place_title);
        mPlaceCategory = (TextView) findViewById(R.id.place_category);
        mStatText = (TextView) findViewById(R.id.stat_text);
        // mPlaceEmptyView = (TextView) findViewById(R.id.place_empty);

        mEventCategory.setTypeface(UIUtils.getRobotoLight(context));
        mPlaceCategory.setTypeface(UIUtils.getRobotoLight(context));
        mEventName.setTypeface(UIUtils.getRobotoCondensed(context));
        mPlaceName.setTypeface(UIUtils.getRobotoCondensed(context));
        mStatText.setTypeface(UIUtils.getRobotoCondensed(context));
        // mPlaceEmptyView.setTypeface(UIUtils.getRobotoLight(context));
    }

    private void showEmpty() {
        // mPlaceEmptyView.setVisibility(View.VISIBLE);
        mPlaceIcon.setVisibility(View.INVISIBLE);
        mPlaceName.setVisibility(View.INVISIBLE);
        mPlaceCategory.setVisibility(View.INVISIBLE);
    }

    private void hideEmpty() {
        // mPlaceEmptyView.setVisibility(View.GONE);
         mPlaceIcon.setVisibility(View.VISIBLE);
         mPlaceName.setVisibility(View.VISIBLE);
         mPlaceCategory.setVisibility(View.VISIBLE);
    }

     public void setOnPlaceClickListener(OnClickListener listener) {
        mPlaceCategory.setOnClickListener(listener);
    }
    } 
```

以及相应的布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/light_grey_background_border"
    tools:context=".view.CheckinPlaceCompoundView" >

    <RelativeLayout
        android:id="@+id/event_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:minHeight="@dimen/view_chckn_compnd_event_minHeight"
        android:padding="@dimen/view_chckn_compnd_padding" >

        <ImageView
            android:id="@+id/event_image"
            android:layout_width="@dimen/view_chckn_compnd_event_iconHeight"
            android:layout_height="@dimen/view_chckn_compnd_event_iconHeight"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:scaleType="centerInside"
            android:src="@drawable/ph_abstract_100_100_2" />

        <TextView
            android:id="@+id/event_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/event_image"
            android:layout_marginLeft="@dimen/view_chckn_compnd_event_padding"
            android:layout_toRightOf="@+id/event_image"
            android:maxLines="1"
            android:text="SZOFTVER LABORATORIUM 4."
            android:textSize="16sp" />

        <TextView
            android:id="@+id/event_category"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/event_title"
            android:layout_below="@+id/event_title"
            android:maxLines="1"
            android:text="General"
            android:textColor="@color/text_grey" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/place_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/event_container"
        android:layout_below="@+id/event_container"
        android:minHeight="@dimen/view_chckn_compnd_event_minHeight"
        android:padding="@dimen/view_chckn_compnd_padding" >

        <ImageView
            android:id="@+id/place_image"
            android:layout_width="@dimen/view_chckn_compnd_place_iconHeight"
            android:layout_height="@dimen/view_chckn_compnd_place_iconHeight"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:scaleType="centerInside"
            android:src="@drawable/ph_abstract_100_100_2" />

        <TextView
            android:id="@+id/place_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/place_image"
            android:layout_marginLeft="@dimen/view_chckn_compnd_event_padding"
            android:layout_toRightOf="@+id/place_image"
            android:maxLines="1"
            android:text="IB028"
            android:textSize="16sp" />

        <TextView
            android:id="@+id/place_category"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/place_title"
            android:layout_below="@+id/place_title"
            android:maxLines="1"
            android:text="Labratory"
            android:textColor="@color/text_grey" />
    </RelativeLayout>

    <TextView
        android:id="@+id/stat_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/place_container"
        android:layout_below="@+id/place_container"
        android:minHeight="@dimen/view_chckn_compnd_event_minHeight"
        android:padding="@dimen/view_chckn_compnd_padding"
        android:text="Your team is dominating" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:57:27.860

将您的`showEmpty()` 和`hideEmpty()`方法更改为：

```
private void showEmpty() {
    // mPlaceEmptyView.setVisibility(View.GONE);
    mPlaceIcon.setVisibility(View.GONE);
    mPlaceName.setVisibility(View.GONE);
    mPlaceCategory.setVisibility(View.GONE);
    mPlaceIcon.setClickable( false );
    mPlaceName.setClickable( false );
    mPlaceCategory.setClickable( false );

}

private void hideEmpty() {
    // mPlaceEmptyView.setVisibility(View.GONE);
     mPlaceIcon.setVisibility(View.VISIBLE);
     mPlaceName.setVisibility(View.VISIBLE);
     mPlaceCategory.setVisibility(View.VISIBLE);
     mPlaceIcon.setClickable( true);
     mPlaceName.setClickable( true);
     mPlaceCategory.setClickable( true);
} 
```

# mediaelement.js - IE 7/8 mediaelement.js JS 控制台错误，无法让 Flash 回退工作

> ID：14352805
> 
> 赞同：0
> 
> 时间：2013-01-16T06:51:50.843
> 
> 标签：mediaelement.js

我知道有一些 Flash 后备线程，但我很难知道在哪里集中精力调试这个问题，您的见解将不胜感激！

SWF 正在根据我的服务器日志加载，我看到了播放控件，但在 IE 7/8 中，当我按下播放按钮时，我收到“未指定错误”JS 错误消息输出到控制台。因此控件不起作用，并且此控制台输出中引用的行号指向错误，并带有以下语句：

```
this.pluginApi.playMedia(); 
```

我假设这是在 SWF 中调用 Actionscript？

可能使这复杂化的是我在 WP 多站点安装上使用它，所以我想知道 SWF 是否支持跨域请求（尽管我尝试从同一个域调用它无济于事），以及是否它将与 https 一起使用（我已经尝试过但也无济于事）。我不确定这些因素中的任何一个是否相关（尽管很高兴知道它们是否相关），但考虑到我已经尝试用最新的 2.10.1 文件替换 WordPress 2.9.1 JS 文件并且我仍然有同样的问题，我有点不知所措，因为我已经尝试过，为什么 Flash 后备根本不适合我。

有什么调试建议吗？是否有确认可以与 Flash 后备一起使用的 Mediaelement 版本？

在此先感谢您的帮助，不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:24:16.040

SWF 确实支持跨域请求 请参阅 FlashMediaElement.as 的第 94 行 它也适用于 https。我目前在这样的环境中运行我自己的。我希望我至少可以帮助你排除这些。

# android - 如何检查视图是否设置了特定背景

> ID：14352806
> 
> 赞同：2
> 
> 时间：2013-01-16T06:51:53.533
> 
> 标签：android, view, background

我正在尝试将视图背景与可绘制对象进行比较，但它对我不起作用。

```
View v1 = options.findViewById(i);
v1.findViewById(R.drawable.back);
Drawable d = v1.getBackground();       

if(d.getConstantState() == getResources().getDrawable(R.drawable.correct_ans_back)){
    v1.setBackgroundResource(R.drawable.a);             
}else{
    view.setBackgroundResource(R.drawable.b);               
} 
```

如何检查我在这里遇到错误。

```
incompatible operand types Drawable.Constant State and Drawable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:11:21.687

1) 更换

```
if(d.getConstantState() == getResources().getDrawable(R.drawable.correct_ans_back)) 
```

和

```
if(d.getConstantState() == getResources().getDrawable(R.drawable.correct_ans_back).getConstantState()) 
```

这将解决`incompatible operand types Drawable.Constant State and Drawable`错误。

2）如果你不能比较两个位图，那么你可以使用下面的方法。

```
public boolean compareDrawable(Drawable d1, Drawable d2){
    try{
        Bitmap bitmap1 = ((BitmapDrawable)d1).getBitmap();
        ByteArrayOutputStream stream1 = new ByteArrayOutputStream();
        bitmap1.compress(Bitmap.CompressFormat.JPEG, 100, stream1);
        stream1.flush();
        byte[] bitmapdata1 = stream1.toByteArray();
        stream1.close();

        Bitmap bitmap2 = ((BitmapDrawable)d2).getBitmap();
        ByteArrayOutputStream stream2 = new ByteArrayOutputStream();
        bitmap2.compress(Bitmap.CompressFormat.JPEG, 100, stream2);
        stream2.flush();
        byte[] bitmapdata2 = stream2.toByteArray();
        stream2.close();

        return bitmapdata1.equals(bitmapdata2);
    }
    catch (Exception e) {
        // TODO: handle exception
    }
    return false;
} 
```

3）或者，您可以将两个不同`TAG`的背景图像分配给`TAG`唯一的比较而不是直接比较drawable。您还可以将背景设置`TAG`为可绘制的 id 并如下所述进行比较，

```
Object tag = bgView.getTag(); 
int backgroundId = R.drawable.bg_image;
if( tag != null && ((Integer)tag).intValue() == backgroundId) {
   //do your work.
} 
```

# linker - 本地 GOT 条目没有足够的 GOT 空间

> ID：14352809
> 
> 赞同：2
> 
> 时间：2013-01-16T06:52:21.480
> 
> 标签：linker, mips

有人可以给出一些可能导致链接器出错的场景

`not enough GOT space for local GOT entries`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:17:24.337

GOT 代表全局偏移表。GOT 是一个 128Kbyte 的外部符号指针表。每个链接单元都有自己的 GOT，用于使链接单元能够访问其他链接单元中的符号。[这在See MIPS Run](https://rads.stackoverflow.com/amzn/click/com/0120884216)的第 16 章中有更详细的解释。

您尝试链接的代码似乎引用了太多 (>~32k) 外部符号。

# ruby - Heroku 服务器上的 Wordpress 博客

> ID：14352810
> 
> 赞同：1
> 
> 时间：2013-01-16T06:52:28.763
> 
> 标签：ruby, wordpress, heroku

我的 ruby​​ 网站是在 heroku 服务器（mysite.com）上开发和托管的。现在我为同一个网站开发了一个 wordpress 博客（使用 mysql）。我也需要在 Herku 上托管这个博客。是否可以在 Heroku 服务器上托管 wordpress 博客？可以托管我的博客，例如 blog.mysite.com？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:58:35.173

有可能的。使用 cleardb 插件来获取 MySQL 数据库，而不是使用默认的 Heroku DB，即 postgres（在某种程度上可以将 Wordpress 转换为使用 Postgres，但我不推荐它）。另外，使用自定义 buildpack，因为默认的 PHP buildpack 会阻塞单个请求，并且不支持许多常见插件所需的扩展。例如，您可以使用专门为 Wordpress 调整[的自定义 buildpack](https://github.com/andrewsg/heroku-buildpack-php-foundry)或我的 buildpack 的更通用[的父级。](https://github.com/winglian/heroku-buildpack-php)

# php - Smarty html_options 值属性不起作用

> ID：14352816
> 
> 赞同：1
> 
> 时间：2013-01-16T06:52:41.843
> 
> 标签：php, templates, smarty, html-select

我正在尝试使用 smarty html_options 显示一个下拉列表。它很好地显示了下拉列表，但输出值为 0、1、2、3、4、5。

但我希望值为 100,150,200,250,300,350。

======PHP =========

```
$choice_set=array("A","B","C","D","E","F");
$choice_values=array(100,150,200,250,300,350);
$choice=250; 
```

=====聪明=========

```
<select name="location">
{html_options values=$choice_values options=$choice_set selected=$choice}
</select> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:23:07.223

从他们的[文档](http://www.smarty.net/docsv2/en/language.function.html.options.tpl)中，您似乎忘记了选择的大小位。此外，它说`options`需要`output`（这对我来说似乎是一个非常糟糕的名字）。像这样：

```
<select name="location" size="{$choice_values|@count}">
    {html_options values=$choice_values output=$choice_set selected=$choice}
</select> 
```

**更新：**基于杰拉德在评论中的精彩观点。

`options`如果您改为定义关联数组而不是单独的数组，则可以使用模板值。所以这也可以：

======PHP =========

```
$choices = array(100 => "A, 150 => "B", 200 => "C", 250 => "D", 300 => "E", 350 => "F");
$choice=250; 
```

=====聪明=========

```
<select name="location">
    {html_options options=$choices selected=$choice}
</select> 
```

此外，我经常忘记`$smarty->assign`我的变量，尤其是在我制作原型或更改某些东西时。在这方面你可能比我聪明，但值得仔细检查。

抱歉我的疏忽，我已经有一段时间没有使用 smarty 了。

# objective-c - xcode 从登录重定向到带有 uinavigation 的视图控制器

> ID：14352817
> 
> 赞同：0
> 
> 时间：2013-01-16T06:52:44.200
> 
> 标签：objective-c, xcode, uiviewcontroller, uinavigationcontroller, uistoryboard

终于让我的 api 登录工作了，但我只是遇到了一个巨大的障碍，登录后重定向到主页。我的故事板看起来像这样

![当前故事板](../Images/adf8c2e05dc14b91d2ff672c1c46cd5a.png)

所以我在那个提交按钮上有我的所有进程，在验证通过后，我想重定向到事件页面，但它总是会缓存并给我这个异常：

> 由于未捕获的异常'NSGenericException'而终止应用程序，原因：'找不到用于segue'LoginSuccess'的导航控制器。只有当源控制器由 UINavigationController 的实例管理时，才能使用推送 segue。

这是推送到下一页的行

```
if(user.isValid){
        // go to next page
        [self performSegueWithIdentifier:@"LoginSuccess" sender:self];
    }
    else{
            // else refresh current page
    } 
```

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:11:46.840

`UINavigationController`如果您想在其上使用 push segue，您的登录视图控制器应该嵌入到其中。

你应该有这样的东西：

```
-(initial view controller)-> [UINavigationController] -(embed)- LoginViewController -(push)-> EventsListViewController 
```

**编辑：（** *来自评论）*如果你真的想使用推送转场，你需要把它放在导航控制器中；否则，您可能必须通过代码（通过更改`appDelegate.window.rootViewController`）或通过模态 segue 更改屏幕。但是，如果您使用模态转场，则无法使用模态转场显示任何其他控制器。（如果当前视图控制器已经以模态方式显示，则不能以模态方式显示控制器。）

到目前为止，我只使用了通过代码更改 rootViewController。如果您在 UINavigationController 中嵌入 LoginViewController，您可能必须将 Back 按钮作为注销（在 EventsListViewController 中时）或在导航控制器中弹出视图控制器时处理。

# c++ - c++ 删除管理员权限

> ID：14352820
> 
> 赞同：1
> 
> 时间：2013-01-16T06:52:51.253
> 
> 标签：c++, c, windows, winapi

我的程序使用创建数据文件的库，存在一些用户错误地“以管理员身份运行”我的程序的问题，结果是某些数据文件是以管理员所有者创建的，普通用户以后无法编辑它。我正在寻找一种“删除”管理员权限的方法，允许我的程序继续运行，例如没有用户“以管理员身份运行”？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:14:33.730

要执行您的要求，您需要检测您是否以管理员身份运行，如果是，则创建一个受限令牌，然后使用该令牌重新启动程序。

*   [http://msdn.microsoft.com/en-us/library/aa446583(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa446583(VS.85).aspx)

获得类似结果的其他方法如下。

对于该组的成员，文件的所有者默认设置为管理员组。此设置可以由本地安全策略控制：

*   [https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/634.mspx?mfr=true](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/634.mspx?mfr=true)

在这里查看更多：

*   [http://technet.microsoft.com/en-us/library/cc961992.aspx](http://technet.microsoft.com/en-us/library/cc961992.aspx)

或者，当使用 时`CreateFile`，您可以在创建文件时指定所有者，使用`SECURITY_DESCRIPTOR`，并使其成为用户或他的任何组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:07:56.920

我最终以使新对象的所有者成为当前用户。

```
if(GetTokenInformation(hToken,TokenUser,tu,buff.size(),&rw)){    
    if(!SetTokenInformation(hToken,TokenOwner,tu,buff.size())){    
    }    
} 
```

# sql-server - 将 Perl 数字转换为 MS SQL Server 日期时间

> ID：14352823
> 
> 赞同：0
> 
> 时间：2013-01-16T06:53:00.020
> 
> 标签：sql-server, perl, date, datetime, ssis

我有一个 Perl 程序生成的日期时间值，但它的格式是一个数字。它看起来像`358153851`。

这些值保存在 MS SQL Server 数据库中。我想将其转换为日期时间格式。

这里的问题是我对Perl语言不熟悉，也不知道如何将Perl转换脚本与SSIS/Tsql集成。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:57:10.870

就像@mceda 所说，如果这是一个纪元时间，您还可以通过 Perl 获得 MS SQL 时间戳：

```
use strict;
use warnings;
use DateTime::Format::Epoch;
use DateTime::Format::MSSQL;

my $formatter = DateTime::Format::Epoch->new(
        epoch          => $dt,
        unit           => 'seconds',
        type           => 'int',
        skip_leap_secondss => 1,
        start_at       => 0,
        local_epoch    => undef,
    );
my $dt = $formatter->parse_datetime(358153851);
print DateTime::Format::MSSQL->format_datetime($dt); 
```

这将从纪元时间创建一个[DateTime](https://metacpan.org/module/DateTime)对象，并将其转换为 MS SQL 格式的日期时间字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:10:22.423

如果您的时间确实是 UNIX 时间，它只是表示从 1970-01-01 开始的秒数。

```
DECLARE @UNIX_TIME INT = 358153851;
DECLARE @DATE DATETIME;

SELECT  @DATE=DATEADD(SECOND, @UNIX_TIME, '19700101'); 
```

对于问题中的数字，转换时间为`1981-05-08 07:10:51.000`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:21:47.657

尝试这个

```
use strict;
use warnings;

my $t = time();

print (sec_to_sql_str($t));

sub sec_to_sql_str
{
    my $in = shift;

    my ($sec,$min,$hour,$mday,$mon,$year,undef,undef,undef) = localtime($in);
    return sprintf ("%d-%02d-%02d %02d:%02d:%02d", 1900 + $year, 1 + $mon, $mday, $hour, $min, $sec);
} 
```

# java - ContextLoaderListener 的问题

> ID：14352834
> 
> 赞同：4
> 
> 时间：2013-01-16T06:54:00.597
> 
> 标签：java, spring, apache-camel

我正在完成一个使用 Spring 和 Apache Camel 的教程，但我在 spring 配置方面遇到了一些问题。我不断收到有关 ContextLoaderListener 的错误，但我不确定问题是什么。我以前做过简单的 Spring 应用程序，我相信我的 web.xml 布局正确，但无论如何我都不是专家。

如果有人知道修复此错误的方法，以便我可以实际运行我的项目，这将非常有帮助，我有我的 web.xml 和下面的错误/堆栈的副本。谢谢！

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.4"
     xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
     http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

  <display-name>Archetype Created Web Application</display-name>

  <!-- the listener that kick-starts Spring -->
 <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

 <!-- location of spring xml files -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:camel-config.xml</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation1</param-name>
    <param-value>classpath:cxf-config.xml</param-value>
</context-param>

<!-- CXF servlet -->
<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- all our webservices are mapped under this URI pattern -->
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/webservices/*</url-pattern>
</servlet-mapping> 
```

```
Could not instantiate listener org.springframework.web.context.ContextLoaderListender
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListender
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:392)
    at runjettyrun.ProjectClassLoader.loadClass(ProjectClassLoader.java:89)
    at org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1102)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1279)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at runjettyrun.Bootstrap.main(Bootstrap.java:97)
2013-01-16 01:45:03.468:WARN::failed CXFServlet: java.lang.NoClassDefFoundError: org/springframework/web/context/WebApplicationContext
2013-01-16 01:45:03.468:WARN::failed org.mortbay.jetty.webapp.WebAppContext@2aa49512{/camel-example-reportincident,C:\Users\patrick.archambeau\workspace\ApacheCamelTesting\camel-example-reportincident\src\main\webapp}: java.lang.NoClassDefFoundError: org/springframework/web/context/WebApplicationContext
2013-01-16 01:45:03.468:WARN::Error starting handlers
java.lang.NoClassDefFoundError: org/springframework/web/context/WebApplicationContext
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.newInstance0(Class.java:343)
    at java.lang.Class.newInstance(Class.java:325)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:736)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at runjettyrun.Bootstrap.main(Bootstrap.java:97) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:56:26.887

`java.lang.NoClassDefFoundError: org/springframework/web/context/WebApplicationContext`告诉您您的类路径中缺少 WebApplicationContext 类。此类位于 spring-web.jar 中。因此，要解决此问题，请将 spring-web 添加到您的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:57:35.690

看看下面的链接
[http://forum.springsource.org/showthread.php?60812-ClassNotFoundException-org.springframework.web.con-text.ContextLoaderListener](http://forum.springsource.org/showthread.php?60812-ClassNotFoundException-org.springframework.web.con-text.ContextLoaderListener)

它说您可以通过转到项目属性-> 部署程序集并添加 Maven 依赖项构建路径条目来解决此问题

# visual-studio-2010 - 安装 2012 后未在 Visual Studio 2010 中执行测试

> ID：14352835
> 
> 赞同：2
> 
> 时间：2013-01-16T06:54:00.900
> 
> 标签：visual-studio-2010, visual-studio-2012

我可能做错了什么，但不太确定是什么。我一直在使用 VS 2010，我想安装 2012 并在那里使用相同的解决方案。

我所做的基本上只是安装 SQL 2012，然后安装 VS 2012（新实例，而不是升级），然后我打开了我在 VS 2012 中的 VS 2010 中使用的相同解决方案。一切似乎都在工作，我正在能够构建和运行测试（即使一些在 2010 年通过的测试现在由于某种原因在 2012 年失败了）。

但是，我想在 VS 2010 中运行相同的测试，所以我在那里打开了相同的解决方案。那里的一切似乎都很好，我可以建造。问题是，每当我尝试运行测试时，它们都会立即以 Not Executed 失败。没有给出错误信息。我试过重新启动 VS，重建，构建，但它没有帮助。这让我觉得我在某些时候做错了什么。

有人有什么主意吗？如果有不清楚的地方，请随时询问，我会尽力解释（我不是专家，但我会尽力而为）。

编辑：看起来我的测试设置以某种方式改变了。我现在可以在改回本地后运行（并将主机设置为在 64 位上运行，即使我不确定这是否真的需要）。

（任何解决问题的方法？找不到它的选项。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:59:49.537

这是我几个月前遇到的一个问题。Visual Studio IDE 没有显示任何错误。这个链接帮助我解决了这个问题：[为什么我的所有 Visual Studio 测试结果都是“未执行”](https://stackoverflow.com/questions/525578/why-are-all-my-visual-studio-test-results-not-executed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:31:31.393

我遇到了同样的[问题，这是](https://stackoverflow.com/questions/9758204/tests-are-no-longer-executed-through-visual-studio-2010-after-visual-studio-11-b)[MS](http://connect.microsoft.com/VisualStudio/feedback/details/728659/mstest-not-working-after-installing-vs11-next-to-vs10)的一个已知问题。

您必须安装[Microsoft Visual Studio 2010 Service Pack 1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)。

# html - 关于 Disqus 的两个问题

> ID：14352838
> 
> 赞同：2
> 
> 时间：2013-01-16T06:54:14.410
> 
> 标签：html, css, tumblr, disqus

我有一个关于 Disqus 的两个部分的快速问题，它们困扰着我并在我的网站上引起审美问题。

首先是在我博客主页上的每篇文章的顶部，Disqus 快速闪烁“评论”然后消失。我进入了 Disqus 设置，关闭了 Disqus 2013 功能并禁用了设置中显示的评论数量，这很有效，但不幸的是，我看到“评论”标题快速闪烁。

第二个是，如果您单击每个单独的帖子，disqus 加载栏会在右侧弹出，通常位于作为我的文本帖子焦点的图片上方。它看起来很丑，我想修复它。

作为参考，我的网站是[Draftdaybust.com](http://www.draftdaybust.com)

任何帮助将不胜感激; 我还要说，我对 HTML 或构建网站真的不太了解，我只是在尽我所能做一个看起来不错的博客。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:56:19.867

这是正在发生的事情以及如何解决它......

**问题 1**

默认情况下，“评论”一词被编码到您的页面中。当您从 Disqus 设置中删除文本时，只有在 Disqus 评论计数 javascript 加载后才会触发。在您的页面 HTML 呈现和 javascript 加载之间有短暂的延迟，因此您会得到“flash”。如果您根本不想有评论计数器，您应该从您的主题中删除以下内容（在您的主题中可能看起来略有不同）：

`<div style="font-size: 10px; text-align: left;"><a class="dsq-comment-count" href="{Permalink}#disqus_thread">Comments</a></div>`

此外，您应该删除评论计数 javascript，以便网站不会加载任何不必要的资源：

```
<script type="text/javascript">var disqus_url = ""; var disqus_title ="";</script><script type="text/javascript">
var disqus_shortname = 'draftdaybust';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://draftdaybust.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script> 
```

**问题 2**

再次升级到 Disqus 2012。旧版本的 Disqus 将 HTML 内容呈现到您的页面上，因此它受制于您的 CSS 样式表的突发奇想（这就是导致它开始在那里呈现的原因）。Disqus 2012 使用与冲突样式隔离的 iframe。

问题#1 的解决方案使降级的最初原因变得毫无意义。

# android - 从我的网站在 android 应用程序中安装更新

> ID：14352839
> 
> 赞同：3
> 
> 时间：2013-01-16T06:54:21.750
> 
> 标签：android

我目前在我的网络服务器中每 24 小时在后台检查一次应用程序版本，而不是在 android 市场中。如果更新可用，它会提示用户下载新的 apk。

```
Uri uri = Uri.parse(downloadURL);
Intent intent = new Intent(Intent.ACTION_VIEW,uri);
startActivity(intent); 
```

上面的代码打开用户浏览器并开始下载。

我想要不打开浏览器我需要下载apk文件或者我需要直接安装最新的apk而不打开其他应用程序（如浏览器）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T07:14:33.480

做这样的事情

// 首先你需要下载apk文件。

```
 String extStorageDirectory =        Environment.getExternalStorageDirectory().toString();
        File folder = new File(extStorageDirectory, "APPS");
        folder.mkdir();
        File file = new File(folder, "AnyName."+"apk");
        try {
                file.createNewFile();
        } catch (IOException e1) {
                e1.printStackTrace();
        }
        /**
         * APKURL is your apk file url(server url)
         */
         DownloadFile("APKURL", file); 
```

// 下载文件函数是

```
 public  void DownloadFile(String fileURL, File directory) {
       try {

            FileOutputStream f = new FileOutputStream(directory);
            URL u = new URL(fileURL);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            //c.setDoOutput(true);
            c.connect();
            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0) {
                    f.write(buffer, 0, len1);
            }
            f.close();
    } catch (Exception e) {
        System.out.println("exception in DownloadFile: --------"+e.toString());
            e.printStackTrace();
    } 
```

下载apk文件后写下这段代码

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new   File(Environment.getExternalStorageDirectory() + "/APPS/" + "AnyName.apk")), "application/vnd.android.package-archive");
            startActivity(intent); 
```

// 并在清单中授予权限

```
 <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

它可能会帮助你，我用它来满足你的需要。

# sql - 带有测试条件的数据库语法

> ID：14352840
> 
> 赞同：0
> 
> 时间：2013-01-16T06:54:26.360
> 
> 标签：sql, database

为什么我们总是使用`While()`条件从数据库中获取数据为什么我们不使用`do .. while()`或`for`循环来获取结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:58:35.387

`While`使用是因为您不确定数据库正在获取多少行...您可以使用 for `loop also`，但 sql`fetch`函数将获取该行`one by one`。所以你不知道一开始要制作多少`iterations`..

当您知道必须进行的迭代次数时使用Well `For loop`，我的意思是当您知道执行循环的次数时。

`WHILE`当您不确定迭代但您知道条件是什么时使用，然后您可以循环直到满足条件。

还有另一个循环`DO WHILE`，这里至少循环执行一次，然后如果满足条件，它将进一步执行，否则循环将退出。

# ruby-on-rails-3 - iframe 是否可以从 Rails 3 的主页中获取引用者？

> ID：14352841
> 
> 赞同：0
> 
> 时间：2013-01-16T06:54:33.613
> 
> 标签：ruby-on-rails-3, iframe, http-referer

iframe 是否可以从 Rails 3 的主页中获取引用者？

例如，页面 A 有一个 iframe，页面 B。我有一个从页面 C 指向页面 A 的超链接。页面 B 可以获取来自页面 C 的引用 URL 吗？（我想将参数从 C 页传递到 B 页）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:01:49.320

严格来说，浏览器将传递 iFrame 的引用标头，尽管我不会指望这种行为。这是一个糟糕的设计，因为任何东西都可能破坏它。例如，用户可以在 Firefox 中使用高级设置关闭引用标头。

“Page B”是您应用中的 Rails 页面吗？为什么不用这样的 URL 调用 iFrame：/controller/action?parent=a

然后在您的视图中操作

```
def show
  parent = params[:parent] || nil
  #do something based on parent being "a" or whatever you like
end 
```

通过这种方式，您可以将所需的任何内容传递到 iFrame 中，并让它根据是否从 iFrame 调用等显示不同的链接返回到您喜欢的任何内容。

# android - 如何从 android 移动 sd 卡中搜索 xml 文件

> ID：14352844
> 
> 赞同：1
> 
> 时间：2013-01-16T06:54:58.467
> 
> 标签：android, file, xml-parsing, sd-card

我在 SD 卡中有一个 XML 文件。我想搜索整个 sd 卡并找到该文件。之后我必须解析该文件。

我做了一个类似的事情。但无法获取文件..

```
static final String PATH = Environment.getExternalStorageDirectory()
        .getPath() + "/download/";
static final String FILE_NAME = "aura_key.xml";

static File isKeyExist() {
     File file = new File(PATH+FILE_NAME);

     if(file.exists())
     {
         return file;
     }else

    return file;

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:52:09.020

如果要在整个外部存储中搜索，则需要查看所有目录和子目录等...

这是一个示例解决方案，只需使用您的文件名调用第一个方法（包括您的情况下的文件扩展名：

```
searchForFileInExternalStorage("aura_key.xml"); 
```

以下是方法：

```
public File searchForFileInExternalStorage(String filename) {
    File storage = Environment.getExternalStorageDirectory();

    return searchForFileInFolder(filename, storage);
}

public File searchForFileInFolder(String filename, File folder) {
    File[] children = folder.listFiles();
    File result;

    for (File child : children) {
        if (child.isDirectory()) {
            result = searchForFileInFolder(filename, child);
            if (result != null) {
                return result;
            }
        } else {
            // replace equals by equalsIgnoreCase if you want to ignore the
            // case of the file name
            if (child.getName().equals(filename)) {
                return child;
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:54:42.890

```
public static boolean checkdirAvail(String yourpath) {
    boolean ret = true;

    File file = new File(Environment.getExternalStorageDirectory(), path);
    if (!file.exists()) {
        if (!file.mkdirs()) {
            Log.e("TravellerLog :: ", "Problem creating Image folder");
            ret = false;
        }
    }
    return ret;
} 
```

# android - SQLite 数据库不适用于 android，而在 Windows 上却可以正常工作

> ID：14352845
> 
> 赞同：0
> 
> 时间：2013-01-16T06:55:05.640
> 
> 标签：android, sqlite

我想将数据库添加到我的 android 项目中，手机上的其他数据库似乎工作正常。当我尝试使用我的实用程序时，我尝试查看我的数据库，报告说数据库映像格式错误并且它无法执行查询以列出表和视图。

我尝试手动复制db，看看当我将它从资产复制到数据文件夹时是否发生错误，但结果是一样的。我还将 db 复制回 Windows，一切正常。

所以我的问题是：这种不兼容的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:00:32.903

我一直在使用的数据库文件是在数据库开发过程中使用的，并且有相当多的更改历史。我认为我的文件版本或其他完全是我问题的原因。

我修复它的方法是创建具有完全相同架构的空数据库并将有问题的数据库文件的所有内容复制到那里。我使用 SQLite 命令行 shell 实现了它。

```
ATTACH DATABASE "D:\dbtest\new.db" AS newdb;
ATTACH DATABASE "D:\dbtest\old.db" AS olddb;
INSERT INTO newdb.android_metadata SELECT * FROM olddb.android_metadata;
INSERT INTO newdb.table1 SELECT * FROM olddb.table1;
... (repeat for each table) 
```

# animation - 在非根动画节点中停止动画

> ID：14352846
> 
> 赞同：0
> 
> 时间：2013-01-16T06:55:10.820
> 
> 标签：animation, qml

我想停止这样的动画：

```
Behavior on x {
    NumberAnimation {
        id: animationElement
         duration: 100
    }
}
    ...
if (something)
{
    animationElement.stop()
} 
```

但是这段代码给了我错误，stop() 不能在非根动画节点上使用。它可能从外部停止动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:56:09.020

这对我来说很好：

```
import QtQuick 1.0

Rectangle
{
    color: "grey"
    width:  800
    height: 800

    NumberAnimation on width { id: animationElementw ;  from: 800; to: 500; duration: 8500 }
    NumberAnimation on height { id: animationElementH ;  from: 800; to: 500; duration: 8500 }

    MouseArea
    {
      anchors.fill: parent
      onClicked:
      {
          animationElementw.stop()
          animationElementH.stop()
      }
    }

    Text
    {
        id: name
        anchors.centerIn: parent
        text: "Click me to stop shrinking animation!!!"
        color: "white"
        font.pixelSize: 25
    }
} 
```

# php - CSV 输出太多引号

> ID：14352847
> 
> 赞同：1
> 
> 时间：2013-01-16T06:55:18.990
> 
> 标签：php, magento, magento-1.6

以下代码应该将 4 个字段输出到 CSV 中`Category, SKU, Price and Special Price`，并且在大多数情况下运行良好，除了输出在所有项目周围都有 3 个引号，如下所示

```
"""Joystick Head""","""Man222""","""155""","""124.95""" 
```

但是浏览器中的输出很好

```
Type: "Joystick Head" SKU: "Man222" Price: "155" Special Price: "124.95" 
```

我已经尝试过`str_replace`，`implode`以及我能想到的任何其他方法，结果各不相同，有时设法删除了几乎所有的引号。

我希望这是愚蠢的，我已经盯着它太久了，帮助？

```
define('SAVE_FEED_LOCATION','var/export/prices.csv');
set_time_limit(0);
require_once 'app/Mage.php';
Mage::app('default');

try{
    $handle = fopen(SAVE_FEED_LOCATION, 'w'); 

    $attributeName = 'producttype';

    $products = Mage::getModel('catalog/product')->getCollection();
    $products->addAttributeToFilter('status', 1);
    $products->addAttributeToFilter('visibility', 4);
    $products->addAttributeToSelect('*');
    $prodIds = $products->getAllIds();

    $product = Mage::getModel('catalog/product');

    $counter_test = 0;

    foreach($prodIds as $productId) {

        if (++$counter_test > 0 && $counter_test < 100){

            $product->load($productId);
            $product_data = array();    
            $productId = $product->getId();

            $productAtt = Mage::getModel('catalog/product')->load($productId);
            $attributes = $productAtt->getAttributes();

            $attributeValue = null;     
            if(array_key_exists($attributeName , $attributes)){
                $attributesobj = $attributes["{$attributeName}"];
                $attributeValue = $attributesobj->getFrontend()->getValue($productAtt);
            }
            if ($attributeValue == "No")
            {
                $attributeValue = NULL;
            }

            $product_data['producttype'] = $attributeValue;
            $product_data['sku'] = $product->getSku();  
            $product_data['price'] = round($product->getPrice(),2);
            $product_data['special_price'] = round($product->getSpecialprice(),2);  

            // if no special price use normal price
            if ($product_data['special_price'] == NULL) { 
                $product_data['special_price'] = round($product->getPrice(),2);
            }

            foreach($product_data as $k=>$val){
                $bad=array('"',"\r\n","\n","\r","\t");
                $good=array(""," "," "," ","");
                $product_data[$k] = '"'.str_replace($bad,$good,$val).'"'; 
            }

            echo "Type: ". $product_data['producttype'] . " SKU: " . $product_data['sku'] . " Price: ". $product_data['price'] . " Special Price: " . $product_data['special_price'] . "<br>";

            fputcsv($handle, $product_data, ',', '"');
        }
    }
    fclose($handle);
    echo '<br> Completed at: ' . time();
}
catch(Exception $e){
    $headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
    error_log($e->getMessage(), 1, 'myemail@mydomain.com', $headers);
    die($e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:51:14.147

问题是一致的

```
$product_data[$k] = '"'.str_replace($bad,$good,$val).'"'; 
```

那里的代码为数组的每个值添加了双引号。后来`fputcsv()`转义引号将它们加倍以正确输出 CVS 格式的数据。您可以查看[PHP 文档`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)中的示例以了解这是正常行为。

3x 双引号没有任何问题，因为它只是一种在原始数据中保留双引号的方法，同时通过 CSV 传输将值传递给另一个系统。但是，如果您故意去掉双引号，那么该行看起来像是有错字。预计为：

```
$product_data[$k] = str_replace($bad, $good, $val); 
```

**补充说明**

1.  您不需要从值中去除双引号。对于 CSV 来说，这不是一个坏符号。我建议从不良符号中删除双引号，并且根本不介意三重双引号。
2.  `str_replace()`可以将数组作为第三个参数。因此，您可以在一次调用中替换所有错误值，而不是`foreach`循环执行。例如：`$product_data = str_replace($bad, $good, $product_data);`
3.  您不需要在每次循环迭代时重新声明坏值数组和好值数组。它们在脚本中没有改变，所以它们的声明可以`foreach ($prodIds as $productId) {`在行之前移动

# php - 使用 BCrypt，并生成盐

> ID：14352849
> 
> 赞同：1
> 
> 时间：2013-01-16T06:55:38.420
> 
> 标签：php, salt, encryption, bcrypt

所以。

我想将 BCrypt 用于我的用户身份验证表单。我可以使用代码注册用户

```
<?php
$salt = '$2a$07$R.gJb2U2N.FmZ4hPp1y2CN$';
crypt("secretpassword", $salt);
?> 
```

在这里，而不是使用恒定的盐。我想使用生成随机盐

```
// Posted Code from http://pastebin.com/wLxDEhD7.
$Allowed_Chars =
'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789./';
$Chars_Len = 63;
$salt = "";
for($i=0;$i<45 ;$i++)
{
    $salt .= $Allowed_Chars[mt_rand(0,$Chars_Len)];
} 
```

并将其存储到数据库中。在此之前我很清楚（我希望：D）接下来我需要在用户登录时检查密码。为此，我需要用户的输入数据，即该用户使用的盐。

```
crypt("secretpassword", $salt); 
```

我可以获得用户输入，但我如何知道已使用的盐？我不清楚这一点。

代码已从 phpmaster.com 和[http://pastebin.com/wLxDEhD7](http://pastebin.com/wLxDEhD7)复制（从 SO 上提出的问题，我无法再次找到该问题）这纯粹用于教育目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:59:48.917

盐存储在 BCrypt 生成的散列中。所以只要这样做就可以了：

```
$passwordIsOk = crypt($password, $hash) === $hash; 
```

# c# - Visual Studio 在 Extension VS2012 中设置 TargetFrameworkMoniker

> ID：14352850
> 
> 赞同：2
> 
> 时间：2013-01-16T06:55:40.417
> 
> 标签：c#, visual-studio, xamarin.ios, comexception

我尝试使用 Visual Studio 2012 的 VSMonoTouch 插件在 Visual Studio 中完全构建我的跨平台解决方案。由于这并没有得到真正的支持，并且维护者看起来并不像他会创建一个新的分支，因此其他一些人将其移植到 2012 年。看起来可以在任何地方工作，而不是我的安装。

首先是有关安装内容的一些信息：

*   赢 8 64 位
*   VS 2012 高级版
*   .NET 4.5
*   v1.0-文件夹入`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework`

我已经完成的是获取所有代码并使用 VS 启动扩展。我可以看到，在以下代码中发生了此异常：（行 item.Value=v10FrameworkName 发生异常）

代码：

```
public int OnAfterOpenProject(IVsHierarchy pHierarchy, int fAdded)
{
    const string targetFrameworkMoniker = "TargetFrameworkMoniker";

    object projectObj;
    pHierarchy.GetProperty(VSConstants.VSITEMID_ROOT, (int)__VSHPROPID.VSHPROPID_ExtObject, out projectObj);
    var project = (Project) projectObj;

    if (VSMonoTouchPackage.IsMonoTouchProject(project))
    {
       var v10FrameworkName = (new FrameworkName(".NETFramework", new Version(1, 0))).FullName;
       var item = project.Properties.Item(targetFrameworkMoniker);
       if (item != null)
       {
          if (item.Value == null || (string) item.Value != v10FrameworkName)
          {
              // Here is where the Exception occures
              item.Value = v10FrameworkName;
          }
       }
       else
       {
           project.Properties.Item(targetFrameworkMoniker).Value = v10FrameworkName;
       }
   }
   return VSConstants.S_OK;
} 
```

例外：

> 结果：-2147352567

异常消息：

> 灾难性故障（HRESULT 异常：0x8000FFFF (E_UNEXPECTED)）

异常堆栈跟踪：

> 在 EnvDTE.Property.set_Value(Object lppvReturn) 在 Follesoe.VSMonoTouch.SolutionEvents.OnAfterOpenProject(IVsHierarchy pHierarchy, Int32 fAdded) 在 c:\Projects\VSMonoTouch\VSMonoTouch\VSMonoTouchPackage.cs:line 170

真正奇怪的是，当我打开一个 csproj-MonoTuch-Project 时，该项目一直在加载/卸载 - 加载/卸载 - ...直到 VS 崩溃。也不例外。打开包含 MonoTouch-Project 的现有解决方案时，出现上述异常。（例如打开 MvvmCross-vNExt-Solution）

似乎工作正常的是我的 v1.0 .NETFramework 文件夹，因为我可以在项目属性中将控制台应用程序切换到此目标框架。当我简单地取消注释崩溃代码时，VS 将加载项目，但似乎处于有线状态。我无法更改目标框架（项目属性中根本没有选择）

任何可能触发此异常的小想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:22:33.750

好的，我已经通过全新安装VS解决了这个问题。似乎是我的旧版本中有一些损坏的东西..

# mysql - 我怎样才能在mysql中按日期获得最高分

> ID：14352865
> 
> 赞同：3
> 
> 时间：2013-01-16T06:57:08.360
> 
> 标签：mysql, sql, select, sql-order-by

我试图在mysql中获得最高分。

当我运行此查询时：-

```
select tid from post order by marks desc limit 0,10; 
```

我得到了最高分，但不是日期方面的。

当我运行这个查询时。

```
select tid from post order by date desc limit 0,10. 
```

我首先明智地获得价值日期......但我想明智地获得最高分日期......

例如我的表是：--

```
s.no    marks   date
1       97      15-01-2013
2       104     14-01-2013
3       100     16-01-2013
4       105     16-01-2013 
```

所以，我想得到

```
s.no    marks   date
4       105     16-01-2013
3       100     16-01-2013
1       97      15-01-2013
2       104     14-01-2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:03:26.500

试试这个：

```
SELECT tid, marks, date 
FROM post 
ORDER BY date DESC, marks DESC 
LIMIT 0,10; 
```

检查这个[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/d7bd7/2)

**输出**

```
| ID | MARKS |                           DATE |
-----------------------------------------------
|  4 |   105 | January, 16 2013 00:00:00+0000 |
|  3 |   100 | January, 16 2013 00:00:00+0000 |
|  1 |    97 | January, 15 2013 00:00:00+0000 |
|  2 |   104 | January, 14 2013 00:00:00+0000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:57:52.140

要获得问题中显示的结果，您只需要先按日期然后按标记对表格进行排序：

```
SELECT * FROM post ORDER BY date DESC, marks DESC LIMIT 10 
```

但是，如果您想要每个日期的最高分数，则需要按日期对表格进行*分组*，从每个组中选择最高分数：

```
SELECT date, MAX(marks) AS marks FROM post GROUP BY date LIMIT 10 
```

如果您想从最大记录中获取其他数据，例如`tid`，那么您必须将此查询的结果连接回您的表：

```
SELECT post.* FROM post NATURAL JOIN (
  SELECT date, MAX(marks) AS marks FROM post GROUP BY date LIMIT 10
) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:04:13.470

```
SELECT 
        post.date,
        p.Marks
FROM post 
INNER JOIN (
            SELECT 
                MAX(marks) as Marks , 
                date , 
                s.no 
            FROM posts 
            GROUP BY s.no
            )  as p ON p.date = post.date
ORDER BY post.date 
```

# javascript - $("#someelementid").html('') 还会在 DOM 中保留空间吗？

> ID：14352867
> 
> 赞同：0
> 
> 时间：2013-01-16T06:57:14.003
> 
> 标签：javascript, jquery

我有一个带有 id 的 div，`someelementid`其中包含很多标签，或者您可以在其中说长格式。如果我使用 jquery 的方法`$("#someelementid").html('')` ，它会释放内存中该表单的内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:02:03.013

如果你想摆脱这个 div 的内容，`$("#someelementbyid").empty();`如果你想释放它在 DOM 中的所有节点，请使用`$("#someelementbyid").remove();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:59:16.023

您应该使用 .remove() 从某个元素中的 dom 中删除元素。 [http://api.jquery.com/remove/](http://api.jquery.com/remove/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:04:27.993

这取决于 javascript/DOM 引擎的实现。它可以立即释放它，也可以等待它被垃圾收集。它甚至可以选择不这样做。

一个合理的猜测是它*会*被释放，但我不会编写依赖它的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:04:30.643

在 jQuery 中调用了一些内部函数，`empty()`它们`cleanData()`在释放 DOM 元素之前将 jQuery 知道的所有内容从 DOM 元素中分离出来。当您使用 或 覆盖或删除元素的内容时，将调用这些`.html()`例程。`.remove()``.empty()`

所以，回答你的问题......是的，它会释放内存（在客户端）。

# c# - Web 引用不想在项目中添加

> ID：14352869
> 
> 赞同：0
> 
> 时间：2013-01-16T06:57:23.007
> 
> 标签：c#, web-services

我正在尝试在我的项目中添加新的网络参考。当我在下面的窗口中输入 url 时，它会显示 Web 服务描述（所有具有描述的方法）。但是在右侧面板中有消息“由于对象的当前状态，操作无效”并且我无法添加我的网络服务。我试图添加一些其他服务并且程序已经添加了它们。所以看起来我对wsdl有问题。Visual Studio 的 wsdl 中应该包含什么？

我还在soapUI中测试了这个网络服务，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:02:37.023

[试试这个解决方案](http://geekswithblogs.net/renso/archive/2012/01/19/operation-is-not-valid-due-to-the-current-state-of.aspx)，将以下内容添加到您的`web.config`

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="2000" />
 </appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-27T06:44:03.067

我有类似的问题，但是我知道公司代理不允许连接到外部网络服务。

# php - 在 Symfony 中加入多个表的问题

> ID：14352871
> 
> 赞同：1
> 
> 时间：2013-01-16T06:57:27.337
> 
> 标签：php, symfony, doctrine, doctrine-orm

我有三个使用注释链接在一起的实体。我有一个`User`,`Student`和`Recording`表。

目前，记录实体包含一个学生ID字段，该字段链接到学生实体，学生实体的ID链接到用户实体中的用户ID。

我的问题是，当我通过使用 Doctrine 的查询获得一组 Recording 对象时：

```
$studentRecordings = $this->getDoctrine()->getRepository('StudentBundle:Recording')
            ->findBy(
            array('pageID' => $pageObject, 'studentID' => $studentObject),
            array('filename' => 'ASC')
        ); 
```

我收到无法访问学生信息的错误。

```
["studentID"]=>
  object(stdClass)#552 (6) {
    ["__CLASS__"]=>
    string(39) "Acme\studentBundle\Entity\Student"
    ["__IS_PROXY__"]=>
    bool(true)
    ["__PROXY_INITIALIZED__"]=>
    bool(false)
    ["id"]=>
    NULL
    ["class"]=>
    NULL
    ["parent"]=>
    NULL
  } 
```

然后这给了我一个错误`Call to a member function getId() on a non-object in StudentBundle/Entity/Student.php`

录音.php：

```
class Recording
{

    public $file;

    /**
     * @ORM\Id
     * @ORM\Column(name="id",type="integer")
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $recordingID;

    /**
     * @ORM\ManyToOne(targetEntity="Page")
     * @ORM\JoinColumn(name="pageID", referencedColumnName="id")
     */
    protected $pageID;

    /**
     * @ORM\ManyToOne(targetEntity="Student")
     * @ORM\JoinColumn(name="student", referencedColumnName="id")
     */
    protected $studentID;

    /**
     * @ORM\Column(name="filename", type="string")
     */
    protected $filename; 
```

学生.php

```
class Student
{
    /**
     * @ORM\Id
     * @ORM\OneToOne(targetEntity="User")
     * @ORM\JoinColumn(name="id", referencedColumnName="id")
     */
    protected $id;

    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Classes")
     * @ORM\JoinColumn(name="class", referencedColumnName="id")
     */
    protected $class;

    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="User")
     * @ORM\JoinColumn(name="parent", referencedColumnName="id")
     */
    protected $parent; 
```

用户.php

```
class User implements UserInterface
{
    /**
     * @ORM\id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     */
    protected $first_name;
    /**
     * @ORM\Column(type="string")
     */
    protected $last_name;
    /**
     * @ORM\ManyToOne(targetEntity="Role")
     * @ORM\JoinColumn(name="role", referencedColumnName="id")
     */
    protected $role;

    /**
     * @ORM\Column(type="string")
     */
    protected $username;
    /**
     * @ORM\Column(type="string")
     */
    protected $password;
    /**
     * @ORM\Column(type="string")
     */
    protected $email;
    /**
     * @ORM\Column(type="string")
     */
    protected $salt;

    /**
     * @ORM\Column(name="is_active", type="integer")
     */
    protected $isActive; 
```

编辑：好的，所以基本上学生对象有一个 getID 函数，它基本上返回`$this->student->getID();` 错误是`$this->student`应该是一个对象，它似乎不在这种情况下。

编辑2：好的，我遇到了一个非常奇怪的情况。假设我有两个 ID 为 1 和 5 的学生帐户，当我将其`getRepository()`称为学生 1 时，如果我指定`'studentID' => 1`，它会给出该错误，但是，如果我将其更改为`'student' => 5`有效。当我登录学生 5 并做同样的事情时，也会发生这种情况。

基本上，如果它与登录的学生匹配，它只会给出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:19:53.920

我认为你不能使用`StudentID =1`. 你需要有学生对象。StudentID 是您的学生对象。

你命名是错误的。在你的课堂上应该是这样的

`$student`不保护`$studentID`

然后在查询中你需要有这样的学生对象

`$student = $this->getDoctrine()->getRepository('StudentBundle:Student').find(1)`

`array('pageID' => $pageObject, 'student' => $student)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:15:52.463

连接列名称中的错字？

```
class Recording
{
//..

  /**
    * @ORM\ManyToOne(targetEntity="Student")
    * @ORM\JoinColumn(name="student_id", referencedColumnName="id")
    */
    protected $studentID;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T10:43:01.083

```
/**
  * @ORM\ManyToOne(targetEntity="Student")
  * @ORM\JoinColumn(name="student_id", referencedColumnName="id")
  */
  protected $studentID; 
```

至

```
/**
  * @ORM\ManyToOne(targetEntity="Student")
  * @ORM\JoinColumn(name="studentID_id", referencedColumnName="id")
  */
  protected $studentID; 
```

如果您保留 var name 还需要将其保留在 joincolumn

# python - 如何将日期值传递给python中的sql查询

> ID：14352875
> 
> 赞同：0
> 
> 时间：2013-01-16T06:57:37.057
> 
> 标签：python

```
import MySQLdb 
```

我实际上是在尝试使用包含 id 和日期的 where 子句进行选择`val`。`bars`此语法对于传递日期是否正确？

```
 def get_bars(foo_id,cr_date):
    cursor = mysql.cursor()
    cursor.execute("""select val from bars where foo_id = %s and cr_date = %s""", (foo_id, cr_date))
    row = cursor.fetchone() 
```

# java - Axis2-Tomcat7-Ubuntu 平台上部署的 Web 服务中的 TFS Java SDK 本机库异常

> ID：14352876
> 
> 赞同：2
> 
> 时间：2013-01-16T06:57:38.730
> 
> 标签：java, tfs, axis2, tomcat7

我正在尝试在部署在 Tomcat7 上的 axis2 Web 服务中执行 TFS Java SDK Api 命令。

我在 Windows 平台上成功运行了我的小应用程序。

我想在 Linux 上部署的 Tomcat 上运行我的 Web 服务。

我得到`UnsatisfiedLinkError`（例外）：

```
Caused by: java.lang.UnsatisfiedLinkError: com.microsoft.tfs.jni.internal.platformmisc.NativePlatformMisc.nativeGetEnvironmentVariable(Ljava/lang/String;)Ljava/lang/String; 
```

我定义了`com.microsoft.tfs.jni.native.base-directory`系统属性。我修改`catalina.sh`为包含`-D"com.microsoft...=/home/user/tfsbin"`行。我可以看到上面的系统变量是在 Tomcat Axis2 幸福页面上定义的（它提供了有关 VM 参数的信息）

我的 linux 是 32 位英特尔机器，所以我选择 linux\x86 作为本机库文件（5 个 .so 文件），我将它们复制到`/home/user/tfsbin`并设置`com.microsoft.tfs.jni.native.base-directory`到此文件夹。

我正在使用 Ubuntu、Oracle jdk7、Tomcat7、Apache Axis2 1.6.2。TFS SDK 11.0.0.1211

我还是明白了`UnsatisfiedLinkError`。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:02:17.600

这是解决方案：

下载 TFS Java SDK（我使用的是 build 11.0.0.1212）

当您提取文件夹时，您将看到 dist/native 文件夹。将此文件夹内容复制到 home/user/native。然后像这样在 setenv.sh 中设置系统属性：-Dcom.microsoft.tfs.jni.native.base-directory=/home/user/native

将上面路径中的用户替换为您在 linux 中的实际用户名。不要试图指向您的实际操作系统文件夹。TFS Java SDK 根据我的经验自动选择合适的操作系统。

# php - 函数中的两个 WHILE - 没有执行一个

> ID：14352880
> 
> 赞同：1
> 
> 时间：2013-01-16T06:58:07.747
> 
> 标签：php, mysql, drupal, drupal-6

我试图在 WHILE 的帮助下将两个 DB_QUERY 的结果一个接一个地添加到一个函数中，但是当我下载 CSV 时，我只在一个 WHILE 中得到结果，我正在打印最终变量。这是代码 -

```
 <?php

function getPaidScoutUsers($nid) {
  $csv_output = '';
  $all_paid_scouts_entry = db_query("SELECT * FROM {signup_event} WHERE event_nid = %d",$nid);
  while($paid_user = db_fetch_object($all_paid_scouts_entry)){
    $role_name     = 'Scout';
    $profile       = content_profile_load(scout_profile, $paid_user->attendee_uid);
    $firstname     = $profile->field_sfname[0]['value'];
    $lname         = $profile->field_last_name[0]['value'];
    $patrol        = get_term_name($profile->field_scout_patrol[0]['value']);
    $position      = get_term_name($profile->field_scout_rank[0]['value']);    
    $homephone     = "";
    $cellphone     = "";
    $email         = "";
    $paid_status   = 'Paid';
    $payment_date  = date_format_date($paid_user->created_date[0]['value'],$type = 'custom', $format = 'm/d/Y');
    $csv_output .= "\"".$role_name."\"".","."\"".$lname ."\"".","."\"".$firstname."\"".","."\"".$patrol."\"".","."\"".$position."\"".","."\"".$homephone."\"".",".$cellphone.",".$email.","."\"".$paid_status."\"".","."\"".$payment_date."\""."\r";    
  }
  return $csv_output;
}

function getUnpaidUsers($nid) {
    $csv_output = '';
    $all_unpaid_scout_list = db_query("SELECT * FROM users
                                     INNER JOIN users_roles ON users.uid = users_roles.uid
                                     WHERE users_roles.rid =7
                                     AND users.uid NOT IN (
                                     SELECT attendee_uid FROM signup_event WHERE event_nid = %d)
                                     ORDER BY name ASC",$nid);
    while($unpaid_user = db_fetch_object($all_unpaid_scout_list)){
      $role_name     = 'Scout';
      $profile       = content_profile_load(scout_profile, $unpaid_user->uid);
      $firstname     = $profile->field_sfname[0]['value'];
      $lname         = $profile->field_last_name[0]['value'];
      $patrol        = get_term_name($profile->field_scout_patrol[0]['value']);
      $position      = get_term_name($profile->field_scout_rank[0]['value']);   
      $homephone     = trim($profile->home_phone[0]['value']);
      $cellphone     = trim($profile->cell_phone[0]['value']);
      $email         = $profile->email_1;
      $paid_status   = 'Unpaid';
      $payment_date  = '';
      $csv_output .= "\"".$role_name."\"".","."\"".$lname ."\"".","."\"".$firstname."\"".","."\"".$patrol."\"".","."\"".$position."\"".","."\"".$homephone."\"".",".$cellphone.",".$email.","."\"".$paid_status."\"".","."\"".$payment_date."\""."\r";
    }
    return $csv_output;
}

function event_signup_download_detail($nid)
{ 
    //global $user;   
    module_load_include('inc', 'signup_event', 'event_signup_view');
    $csv_output = '';
    $csv_output .= "Role,Last name,First Name,Patrol,Position,Home phone,Cell Phone,Email,Payment Status,Payment Date\n";           
    $nid = 2001;

    // add the paid users to the csv 
    $csv_output .= getPaidScoutUsers($nid);

    // get unpaid users, add them to the csv
    //$csv_output .= getUnpaidUsers($nid);

    echo $csv_output;

    header("Content-type: application/vnd.ms-excel");
    header("Content-Disposition: attachment;   filename=\"Registration_Dues_Information.csv\"");
    print $csv_output;
    exit; 

} 
```

我在哪里错了？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:27:50.817

尝试将功能拆分为单独的方法。

```
function getPaidScoutUsers($nid) {

  $csv_output = '';
  $all_paid_scouts_entry = db_query("SELECT * FROM {signup_event} WHERE event_nid = %d",$nid);
  while($paid_user = db_fetch_object($all_paid_scouts_entry)){
    $role_name     = 'Scout';
    $profile       = content_profile_load(scout_profile, $paid_user->attendee_uid);
    $firstname     = $profile->field_sfname[0]['value'];
    $lname         = $profile->field_last_name[0]['value'];
    $patrol        = get_term_name($profile->field_scout_patrol[0]['value']);
    $position      = get_term_name($profile->field_scout_rank[0]['value']);
    $homephone     = trim($paid_user->home_phone);
    $cellphone     = trim($paid_user->cell_phone);
    $email         = $profile->email_1;
    $paid_status   = 'Paid';
    $payment_date  = date_format_date($paid_user->created_date[0]['value'],$type = 'custom', $format = 'm/d/Y');
    $csv_output .= "\"".$role_name."\"".","."\"".$lname ."\"".","."\"".$firstname."\"".","."\"".$patrol."\"".","."\"".$position."\"".","."\"".$homephone."\"".",".$cellphone.","."\"".$paid_status."\"".","."\"".$payment_date."\""."\r";    
  }

  return $csv_output;
}

function getUnpaidUsers($nid) {
    $csv_output = '';
    $all_unpaid_scout_list = db_query("SELECT * FROM users
                                     INNER JOIN users_roles ON users.uid = users_roles.uid
                                     WHERE users_roles.rid =7
                                     AND users.uid NOT IN (
                                     SELECT attendee_uid FROM signup_event WHERE event_nid = %d)
                                     ORDER BY name ASC",$nid);
    while($unpaid_user = db_fetch_object($all_unpaid_scout_list)){
      $role_name     = 'Scout';
      $profile       = content_profile_load(scout_profile, $unpaid_user->uid);
      $firstname     = $profile->field_sfname[0]['value'];
      $lname         = $profile->field_last_name[0]['value'];
      $patrol        = get_term_name($profile->field_scout_patrol[0]['value']);
      $position      = get_term_name($profile->field_scout_rank[0]['value']);   
      $homephone     = trim($profile->home_phone[0]['value']);
      $cellphone     = trim($profile->cell_phone[0]['value']);
      $email         = $profile->email_1;
      $paid_status   = 'Unpaid';
      $payment_date  = '';
      $csv_output .= "\"".$role_name."\"".","."\"".$lname ."\"".","."\"".$firstname."\"".","."\"".$patrol."\"".","."\"".$position."\"".","."\"".$homephone."\"".",".$cellphone.",".$email.","."\"".$paid_status."\"".","."\"".$payment_date."\""."\r";
    }

    return $csv_output;
}

function event_signup_download_detail($nid)
{ 
    global $user;   
    module_load_include('inc', 'signup_event', 'event_signup_view');
    $csv_output = '';
    $csv_output .= "Role,Last name,First Name,Patrol,Position,Home phone,Cell Phone,Email,Payment Status,Payment Date\n";        

    // add the paid users to the csv 
    $csv_output .= getPaidScoutUsers($nid);

    // get unpaid users, add them to the csv
    $csv_output .= getUnpaidUsers($nid);

    header("Content-type: application/vnd.ms-excel");
    header("Content-Disposition: attachment;   filename=\"Registration_Dues_Information.csv\"");
    print $csv_output;
    exit; 

} 
```

注意：我没有测试这段代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:29:46.257

```
while($unpaid_user = db_fetch_object($all_unpaid_scout_list)){
      $role_name 1    = 'Scout';
      $profile1       = content_profile_load(scout_profile, $unpaid_user->uid);
      $firstname1     = $profile->field_sfname[0]['value'];
      $lname1         = $profile->field_last_name[0]['value'];
      $patrol1        = get_term_name($profile->field_scout_patrol[0]['value']);
      $position1      = get_term_name($profile->field_scout_rank[0]['value']);   
      $homephone1     = trim($profile->home_phone[0]['value']);
      $cellphone1     = trim($profile->cell_phone[0]['value']);
      $email1         = $profile->email_1;
      $paid_status1   = 'Unpaid';
      $payment_date1  = '';
      $csv_output .= "\"".$role_name1."\"".","."\"".$lname1 ."\"".","."\"".$firstname1."\"".","."\"".$patrol1."\"".","."\"".$position1."\"".","."\"".$homephone1."\"".",".$cellphone1.",".$email1.","."\"".$paid_status1."\"".","."\"".$payment_date1."\""."\r";
    }

echo $csv_output; 
```

只需用这个替换第二个 while 循环。

# android - android如何控制快门时间

> ID：14352881
> 
> 赞同：1
> 
> 时间：2013-01-16T06:58:11.777
> 
> 标签：android

我开发了一个相机应用程序，我想控制相机的快门时间，可以实现吗？最后我想实现的是延长曝光功能，谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T19:48:04.830

您无法直接访问相机的快门速度，但相机 API 可让您[设置曝光补偿](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setExposureCompensation%28int%29)。如果您想用包围曝光连拍，请锁定自动曝光，然后将曝光补偿设置为介于最小值和最大值之间的值。检查[Camera.Parameters](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)以获取可访问参数的完整列表。

# android - 如何使对话框（或视图或其他内容）位于任何应用程序的页面前面？

> ID：14352884
> 
> 赞同：0
> 
> 时间：2013-01-16T06:58:30.657
> 
> 标签：android, user-interface

我想编写一个Android应用程序，一旦打开应用程序，它将生成一个UI（类似于对话框，在此对话框中，它将显示由服务器推送的视频图片），这将始终位于前面其他应用程序的UI，但是我不知道这个想法是否可以实现，如果可以，可能的步骤可能是什么，希望有人能给我一些线索或演示代码或应用程序，提前谢谢。

EDIT1：我的错误，是的，我确实希望它看起来像一个对话框，但最重要的是：`i just want to this so-called dialog showing in the front of other app's UI`，或者我可以这样解释：`once this dialog appears, it will still be showing in the screen no matter you open another app or doing something else, this dialog could only be closed by force that means you could not close the dialog by exit the app`

EDIT2：是的，我在galaxy SIII和galaxy Notes II的视频播放器中发现了类似的功能，它被称为`PIP(Picture in Picture)`或`Pop up play`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:05:58.723

这个想法/技巧是创建一个`Activity`您将运行所有代码以获取和显示视频并使其看起来像**`Dialog`**

由于这更多地是关于 UI，无论在 Activity 中做什么，在 Manifest 中设置它，例如，像这样应该做你需要它做的事情：

```
<activity
    android:name="ACTIVITY_NAME"
    android:theme="@android:style/Theme.Dialog" >
</activity> 
```

如果您需要整个应用程序看起来像一个对话框，您需要将`android:theme`属性`<application></application>`设置为`Activity`

您可能想要自定义它而不是使用*股票 Dialog Theme*。

这些应该可以帮助您入门：

1.  [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)
2.  [http://www.vogella.com/articles/AndroidStylesThemes/article.html](http://www.vogella.com/articles/AndroidStylesThemes/article.html)
3.  [http://www.anddev.org/tutorial_ui_themes-t4367.html](http://www.anddev.org/tutorial_ui_themes-t4367.html)

**更新**

Android OS 保留在系统资源不足或*用户选择过多*时关闭任何应用程序的权利。也许没有构建您自己的自定义操作系统，我不确定是否有任何选项可用于此类任务***。***另外，正如*亨利*已经评论的那样，这可能不是一个向您的应用程序用户*强加某些东西*的好选择。您可能有来自客户的特定要求或类似的东西，但也许您可能想重新访问该规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:06:15.623

如果您想像对话框一样显示您的应用程序，您可以设置

```
 <activity android:theme="@android:style/Theme.Dialog"> 
```

在你的清单中。

# web-applications - 构建供内部和外部使用的应用程序 - 我如何构建它们？

> ID：14352890
> 
> 赞同：0
> 
> 时间：2013-01-16T06:58:47.460
> 
> 标签：web-applications, architecture, language-agnostic, system-design

我正在努力将我们公司的各种信息系统整合到一个基于 Web 的应用程序中。不小的壮举，但随着时间的推移，我们将逐步推出和改进。

该应用程序分为两个区域 - 一个仅限员工的门户，用于 Intranet，以及一个供客户访问的公共门户。

我创建这个没有问题，但我不确定如何去托管它。安全是我最大的担忧。鉴于我们的数据库将托管敏感信息（您可以确定我将加密和散列所有重要的东西以及所有常见的 XSS/CSRF/SQL 注入）

我是否在同一台服务器上同时运行应用程序和数据库？我是否在内部运行内部东西以保证其安全，并让公共系统通过 Web API 进行调用？

在这种情况下，可维护性、安全性和性能的最佳平衡是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:59:50.243

像这样的系统通常具有复杂的设置。您的员工门户应位于公司网络内的计算机上，并且不应从公共网络访问。

当然，公共门户必须位于可从公共网络访问的机器上。机器应该关闭你不需要的所有东西，并且应该有一个外部防火墙阻止你不使用的网络端口 - 假设有人会试图闯入机器，并为他们提供尽可能少的尝试路径. 这台机器需要对数据库进行网络访问，但该访问路径也应该受到严格限制，以防止成功的攻击者进入您的安全网络。

数据库应该在第三台机器上，两台门户机器都可以访问，但同样，有严格的防火墙以防止尝试在没有门户代码的情况下访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:01:12.250

1.根据关注点划分您的应用程序

2.使应用程序尽可能独立

3.提供所有应用程序的接口，实施访问管理系统并根据您的组织决策提供访问权限（从长远来看，这将有所帮助）

# delphi - 按名称设置属性值

> ID：14352905
> 
> 赞同：9
> 
> 时间：2013-01-16T06:59:57.710
> 
> 标签：delphi, properties, rtti

在 Delphi 类中，我有一些属性，我想通过按名称访问它们来设置它们。现在我使用例如`Settings.AllowSysop := True;`

我想做类似的事情 `Settings('AllowSysop').Value := True;`

这样做的原因是，在设置我的用户可以访问的内容时，这是从许可证文件中读取的，其中从文件中读取的行（它就像一个`INI`但加密的）可能看起来像

```
AllowSysop = True 
```

我知道必须制作一些类似于 RTTI 的代码，但我不太明白。

如果可能的话，我认为这对我来说会更容易一些。

希望解释是有道理的

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T07:03:52.547

```
implementation
uses TypInfo;
{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
   if IsPublishedProp (Button1, 'Visible') then
    begin
      SetPropValue (Button1, 'Visible',false);
    end;

end; 
```

# android - 将 json 字符串转换为 POJO JAKSON

> ID：14352908
> 
> 赞同：0
> 
> 时间：2013-01-16T07:00:12.150
> 
> 标签：android, jackson

我在我的 Android 项目中使用 JAKSON。现在我有一个字符串格式的 JSON 对象。如何将此字符串转换为 JAVA POJO 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:24:07.880

有几种不同的归档方式：

1）使用[org.json.JSONObject](https://developer.android.com/reference/org/json/JSONObject.html)，手动解析数据并放入 POJO 中。

2）使用第三方库，如[GSON](http://code.google.com/p/google-gson/)并将您的 JSON 字符串直接解码为 Object。例如，GSON 使用注解来定义对象/JSON 的序列化/反序列化规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:36:04.593

与杰克逊：

```
MyThing thing = new ObjectMapper().readValue(jsonString, MyThing.class); 
```

有关使用 Jackson 的介绍，我建议您查看[http://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T08:05:01.017

```
ObjectMapper mapper = new ObjectMapper();
PojoClassName Obj = mapper.readValue(JsonString, PojoClassName.class); 
```

PS JsonString 是包含 Json 的字符串，将被转换为 POJO

# spring - 使用 Spring RestTemplate 发布数据

> ID：14352917
> 
> 赞同：0
> 
> 时间：2013-01-16T07:00:53.283
> 
> 标签：spring, resttemplate, postdata

我正在尝试使用 Spring RestTemplate 发布数据，如下所示：

```
 MultiValueMap<String, String> parameters = new LinkedMultiValueMap<String, String>();
    parameters.add("name1", "value1");
    parameters.add("name2", "value2");

    HttpMessageConverter<String> stringConverter = new StringHttpMessageConverter();
    FormHttpMessageConverter formConverter = new FormHttpMessageConverter();
    List<HttpMessageConverter<?>> msgConverters = new ArrayList<HttpMessageConverter<?>>();
    msgConverters.add(formConverter);
    msgConverters.add(stringConverter);
    restTemplate.setMessageConverters(msgConverters);

    String xml = restTemplate.postForObject(myurl, parameters, String.class); 
```

在服务器部分，我使用一个简单的 servlet 来处理请求，如下所示：

```
String name1 = request.getParameter("name1"); 
```

服务器将 xml 作为字符串返回。

当我在没有转换器的情况下使用 HashMap 而不是 MultiValueMap 时，服务器端的参数为空。但是使用上面的代码后，我得到了错误

```
Cannot extract response: no Content-Type found 
```

你能不能给我一个简单的例子来实现我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T22:04:20.203

这是我用来为 Spring POST 格式化数据的内容：

```
//FormHttpMessageConverter 
```

用于构造表单参数以在 URI 上进行 POST

```
HttpMessageConverter<?> formHttpMessageConverter = new FormHttpMessageConverter();
HttpMessageConverter<?> stringHttpMessageConverter = new StringHttpMessageConverter();
List<HttpMessageConverter> msgConverters = new ArrayList<HttpMessageConverter>();
msgConverters.add(formHttpMessageConverter);
msgConverters.add(stringHttpMessageConverter);

// Prepare acceptable media type
List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
acceptableMediaTypes.add(MediaType.ALL);

// Prepare header
HttpHeaders headers = new HttpHeaders();
headers.setAccept(acceptableMediaTypes);
HttpEntity<MultiValueMap<String,String>> httpEntity = new HttpEntity<MultiValueMap<String,String>>(map,headers);
ResponseEntity<String> resp = restTemplate.exchange("https://risk.XXXX.XXXXXX.net",HttpMethod.POST,httpEntity,String.class); 
```

# c - c中的递归顺序

> ID：14352924
> 
> 赞同：3
> 
> 时间：2013-01-16T07:01:16.767
> 
> 标签：c, algorithm, recursion, complexity-theory

我编写了一个程序来使用回溯方法打印字符串的所有排列。

```
# include <stdio.h>
/* Function to swap values at two pointers */
void swap (char *x, char *y)
{
    char temp;
    temp = *x;
    *x = *y;
    *y = temp;
}

/* Function to print permutations of string
   This function takes three parameters:
   1\. String
   2\. Starting index of the string
   3\. Ending index of the string. */

void permute(char *a, int i, int n) 
{
   int j; 
   if (i == n)
     printf("%s\n", a);
   else
   {
        for (j = i; j <= n; j++)
       {
              swap((a+i), (a+j));
              permute(a, i+1, n);
              swap((a+i), (a+j)); //backtrack
           }
   }
} 

/* Driver program to test above functions */
int main()
{
   char a[] = "ABC";  
   permute(a, 0, 2);
   getchar();
   return 0;
} 
```

这里的时间复杂度是多少。不是 o(n ² )。如何检查递归情况下的时间复杂度？如果我错了，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:05:31.563

复杂性是`O(N*N!)`，你有 N! 排列，你得到所有的。
此外，每个排列都需要您打印它，这是`O(N)`- 总计`O(N*N!)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:06:17.800

我的回答将集中在方法论上，因为这是明确的问题。有关此特定问题的答案，请参阅其他人的答案，例如阿米特的。

当您尝试使用递归评估算法的复杂性时，您应该像使用迭代算法一样开始计数。但是，当您遇到递归调用时，您还不知道确切的成本是多少。只需将行的成本写为函数，然后仍然计算它将运行的次数。

例如（请注意，此代码是愚蠢的，它只是为了示例而在这里，并没有做任何有意义的事情 - 只要它保持要点，随意编辑并用更好的东西替换它）：

```
int f(int n){ //Note total cost as C(n)
  if(n==1) return 0; //Runs once, constant cost
  int i;
  int result = 0; //Runs once, constant cost
  for(i=0;i<n;i++){
    int j;
    result += i; //Runs n times, constant cost
    for(j=0;j<n;j++){
      result+=i*j; //Runs n^2 times, constant cost
    }
  }
  result+= f(n/2); //Runs once, cost C(n/2)
  return result;
} 
```

把它加起来，你会得到一个递归公式，比如`C(n) = n^2 + n + 1 + C(n/2)`and `C(1) = 1`。下一步是尝试将其更改为通过直接表达式对其进行绑定。从那里根据您的公式，您可以应用许多不同的数学技巧。

对于我们的示例：

对于`n>=2`：`C(n) <= 2n^2 + C(n/2)`

由于 C 是单调的，让我们考虑`C'(p)= C(2^p)`： `C'(p)<= 2*2^2p + C'(p-1)`

这是一个典型的求和表达式（这里不方便写，所以我们跳到下一步），我们可以绑定：`C'(p)<=2p*2^2p + C'(0)`

回过头来`C(n)<=2*log(n)*n^2 + C(1)`

因此运行时在`O(log n * n^2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:06:13.503

通过这个程序的确切排列数是（对于长度为 N 的字符串）

*   开始：N p。开始每个 N-1 p。ETC...
*   排列数是`N + N(N-1) + N(N-1)(N-2) + ... + N(N-1)...(2)`（以 2 结尾，因为下一个调用刚刚返回）
*   或者`N(1+(N-1)(1+(N-2)(1+(N-3)(1+...3(1+2)...))))`

大致是哪个`2N!`

在`for`循环中添加计数器（删除 printf）与公式匹配

*   N=3 : 9
*   N=4 : 40
*   N=5 : 205
*   N=6 : 1236 ...

时间复杂度为`O(N!)`

# linux-kernel - 保护多处理器中的共享内存区域

> ID：14352925
> 
> 赞同：3
> 
> 时间：2013-01-16T07:01:18.880
> 
> 标签：linux-kernel, multiprocessing

情况是我有 2 块板通过 PCIE 总线连接在一起。一块板是根端口，一块板是端点。端点端将内存区域导出到根端口端。

两块板之间的通信是通过软件消息队列实现的。队列元数据和缓冲区都位于导出的内存区域内。

双方可以同时访问内存区域（根端口通过其 PCIE 总线，端点通过其本地总线）。当双方尝试更新队列元数据时，这可能会导致问题。

起初，我试图`spinlock_t`在同一个导出的内存区域上分配一个，但是因为每个板都是单处理器，`the spinlock_t`所以无论如何都没有分配。

任何人都可以建议一种机制来保护共享区域或推荐其他方法来在两个板之间进行通信。任何建议表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:28:12.123

感谢您到目前为止的兴趣。

我们终于用循环队列实现了共享内存通信。可以从此[链接](http://programming-technique.blogspot.com/2011/11/in-linear-queue-when-we-delete-any.html)引用实现。我们将问题简化为单个生产者单个消费者，因此循环队列不需要锁来保护。这种方法的局限性是我们必须为每个对等连接创建一个队列。

在 PCIE 规范中，也有描述原子操作的部分，遗憾的是我们的 PCIE 主机控制器不支持此功能，因此我们无法使用此功能。

# tridion - 用户 NT AUTHORITY\NETWORK SERVICE 的访问被拒绝。访问 coreservice Tridion

> ID：14352926
> 
> 赞同：0
> 
> 时间：2013-01-16T07:01:19.973
> 
> 标签：tridion, tridion-2011, tridion-core-services

当我使用本地的 tridion 2011 核心服务编写自定义页面时，我使用我的 tridion 凭证来访问核心服务 web 服务。

现在，当一切都在我的本地完成时:)，我发布了我的网站，并在 Tridion CM 服务器上简单地做了以下事情。

*   在 IIS 中，我创建了名为“CoreServices”的新应用程序网站
*   使用 Network USer 使用应用程序池
*   在 coreservice 映射文件夹中复制了我发布的网站。
*   从 Web 配置中删除了我的凭据并实现了读取访问网站/自定义页面的用户详细信息的逻辑
*   现在，当我尝试访问 coreservice 网站时，出现以下错误

    **用户 NT AUTHORITY\NETWORK SERVICE 的访问被拒绝。** 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

    **异常详细信息：** System.ServiceModel.FaultException`1[[Tridion.ContentManager.CoreService.Client.CoreServiceFault, Tridion.ContentManager.CoreService.Client, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b]]: 访问被拒绝用户 NT AUTHORITY\NETWORK SERVICE。

请建议！

编辑：我可以看到 NT AUTHORITY\NETWORK SERVICE 已经添加到我的 Tridion MMC 中，请看下面的截图：

![在此处输入图像描述](../Images/5a76c041f564fa1b2d9ba318c312c114.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:42:49.740

此消息表明您的代码已成功调用核心服务，并且您的网络凭据已成功识别，但 Tridion 未授予访问权限。这里有两种可能的情况：

1.  您希望 Tridion 使用 NETWORK SERVICE 身份作为受托人在其下采取行动。在这种情况下，网络服务将被添加为用户。这将是一个不寻常的配置，因为您通常希望 NETWORK SERVICE 成为模拟用户以用于其他目的。
2.  您希望作为网络服务连接到 Tridion，但随后让 Tridion 充当不同的受托人。在这种情况下，NETWORK SERVICE 应在管理管理单元中配置为模拟用户，并且您必须按照 John 链接到的问题 ( [Tridion CoreService Authentication/Impersonation](https://stackoverflow.com/questions/12044338/tridion-coreservice-authentication-impersonation) )中所述调用 Impersonate 方法

这两种方法中的第二种几乎可以肯定是您想要的。我实际上只是通过解释的方式描述了第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:34:23.483

试试这个，如果它适合你，我还没有尝试过，所以不确定它是否会起作用

```
var remoteAddress = new EndpointAddress(Settings.EndpointAddress);
ProxyClient = new CoreServiceClient(basicHttpBinding, remoteAddress);
ProxyClient.ClientCredentials.Windows.AllowNtlm = true;
ProxyClient.ClientCredentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultNetworkCredentials;
ProxyClient.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation; 
```

# libstdc++ - nativeclient ld libstdc++.so.6：符号的 DSO 无效

> ID：14352930
> 
> 赞同：0
> 
> 时间：2013-01-16T07:01:33.393
> 
> 标签：libstdc++, google-nativeclient

我正在尝试使用 SDL 构建本机客户端应用程序，但链接错误让我很困惑。这是重现错误的最简单的命令行。有没有人见过这个？

```
\# nacl_sdk/pepper_25/toolchain/linux_x86_glibc/bin/i686-nacl-gcc -m64 nacl_glue.cc -lSDL -lppapi_cpp      

/home/rob/nacl_sdk/pepper_25/toolchain/linux_x86_glibc/bin/../lib/gcc/x86_64-nacl/4.4.3/../../../../x86_64-nacl/bin/ld: /home/rob/nacl_sdk/pepper_25/toolchain/linux_x86_glibc/bin/../x86_64-nacl/lib/libstdc++.so.6: invalid DSO for symbol `std::_List_node_base::hook(std::_List_node_base*)@@GLIBCXX_3.4' definition
/home/rob/nacl_sdk/pepper_25/toolchain/linux_x86_glibc/bin/../x86_64-nacl/lib/libstdc++.so.6: could not read symbols: Bad value
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:08:59.733

我需要使用 i686-nacl-g++ 而不是 i686-nacl-gcc。

在网上搜索了一下，看起来 GCC 不应该在 c++ 标准库中链接，但我的错误消息看起来更像是在 c++ 标准库中链接，但不理解它找到的符号。很奇怪，但无论如何。

# git - 在 Magit 中查看文件的历史记录？

> ID：14352932
> 
> 赞同：103
> 
> 时间：2013-01-16T07:01:35.370
> 
> 标签：git, emacs, magit

[使用 Git 版本控制查看文件的更改历史记录](https://stackoverflow.com/questions/278192/view-the-change-history-of-a-file-using-git-versioning)讨论了在 Git 中查看文件历史记录的其他方式。

可以在 Emacs Magit 中完成吗？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-04-12T08:30:07.580

从 magit 2.1 开始：（`magit-log-buffer-file`根据下面的评论）

在 magit 2.1 之前：`magit-file-log`是您正在寻找的。它将在标准 magit 日志视图中显示当前缓冲区中文件的所有提交。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-05-30T17:02:25.547

通过键入打开你的`magit-status`缓冲区`M-x magit-status`（我曾经绑定到这个，`C-. C-g`因为它一直在使用。这些天，我使用 Spacemacs 所以它是`<SPC> g s`）

1.  键入`l`以获取日志查看选项
2.  键入`--`以设置“限制到文件”选项（以前是`=f`）
3.  输入您要查看其历史记录的文件路径
4.  输入`l`查看当前分支的日志

如果您使用的是 Spacemacs，则可以使用获取当前访问文件的历史记录`<SPC> g f h`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-08T14:25:49.140

在您的`*magit: <project>*`缓冲区使用`l`进入记录模式，然后按`f`提示输入文件名。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-16T07:14:33.603

如果[magit](https://github.com/magit/magit) ([用户手册](https://magit.vc/manual/)) 没有该功能，那么您可以查看其他[Emacs 模式](http://marc.info/?l=git&m=113313040724346)，并添加您自己的`git-log-file`功能：

```
(defun git-log-file ()
  "Display a log of changes to the marked file(s)."
  (interactive)
  (let* ((files (git-marked-files))
         (buffer (apply #'git-run-command-buffer "*git-log*" "git-rev-list" \
"--pretty" "HEAD" "--" (git-get-filenames files))))  (with-current-buffer buffer
      ; (git-log-mode)  FIXME: implement log mode
      (goto-char (point-min))
      (setq buffer-read-only t))
    (display-buffer buffer))) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-12T05:16:40.277

我不知道有什么办法。我只是使用`M-x vc-print-log`它似乎完成了同样的壮举。不过，这不是一种集成 magit 的方式。

# macos - 使用工作流或文件夹中的 applescript 删除多个 PDF 密码

> ID：14352933
> 
> 赞同：0
> 
> 时间：2013-01-16T07:01:47.170
> 
> 标签：macos, applescript

如何使用`Applescript`或通过`Workflow`在**OS X**中创建密码从多个 PDF 文件中删除密码？

我的情况是我在一个**文件夹**中有多个受密码保护的 PDF 文件。我知道所有人的密码，这是相同的。我希望能够在此文件夹上运行工作流，以便工作流解锁其中的所有 PDF。

或者一次在所有这些文件上运行 Applescript shell 代码

我还希望能够创建一种在文件夹中放置/移动/粘贴任何PDF自动解锁它的方式:)

帮助赞赏！

* * *

**更新**：

我试过[pdftk](http://www.pdflabs.com/docs/pdftk-cli-examples/)。安装 pdftk后，以下代码在**Terminal中运行良好**

```
pdftk secured.pdf input_pw foopass output unsecured.pdf 
```

现在我希望能够**创建一个在****选定**文件或文件夹中的所有文件上运行此命令的工作流

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:59:16.250

执行 shell 脚本的 AppleScript 命令是 do shell script... 所以是这样的：

```
do shell script "pdftk secured.pdf input_pw foopass output unsecured.pdf" 
```

应该管用。在这一点上，我看到了 2 个选项：

1.  编写一个 AppleScript 脚本，询问用户文件夹或从 Finder 选择中获取它，然后为文件夹中的每个文件执行命令；
2.  编写一个 Automator 工作流程，使用已有的操作从文件夹中获取文件，然后附加一个执行 AppleScript 脚本的新操作。

对于选项 2，您可以设置 Automator 工作流程，如下图所示。

![在此处输入图像描述](../Images/f6cda8dc8544090b1c8f0412f5d002f7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:20:11.537

您听说过“文件夹操作”吗？这是一种将 applescript 附加到文件夹的方法，以便每当将新文件添加到文件夹时，applescript 就会运行。一个快速的谷歌搜索出现了[这个](http://www.macworld.com/article/1167157/automate_tasks_with_folder_actions.html)，它将为您提供如何设置它的指导。如果您仍有疑问，可以进行更多谷歌搜索。

这是一个可用于文件夹操作的 applescript。我没有测试它，但它应该可以工作（它是基本代码）。这只会在 pdf 文件上完成它的工作。您添加到文件夹中的其他文件将被单独保留。**注意**：您必须输入脚本前 4 个变量的值。

祝你好运。

```
on adding folder items to theFolder after receiving theItems

    -- enter your values here
    set pdftkPosixPath to "/usr/bin/pdftk"
    set pWord to "foopass"
    set appendedName to "_unlocked" -- text to append to the file name
    set shouldTrash to true -- true or false, move the locked file to the trash after unlocking?

    set fContainer to theFolder as text
    repeat with anItem in theItems
        try
            tell application "System Events"
                set fName to name of anItem
                set fExt to name extension of anItem
            end tell

            if fExt is "pdf" and fName does not contain appendedName then
                set baseName to (text 1 thru -5 of fName) & appendedName & ".pdf"
                set newPath to fContainer & baseName
                do shell script (quoted form of pdftkPosixPath & space & quoted form of POSIX path of anItem & " input_pw " & quoted form of pWord & " output " & quoted form of POSIX path of newPath)

                if shouldTrash then
                    tell application "Finder" to move anItem to trash
                end if
            end if
        end try
    end repeat
end adding folder items to 
```

***编辑***：这是您如何要求输入密码的方法。请注意，如果您想查看文本，请删除“隐藏答案”。

```
display dialog "Enter a password:" default answer "" with icon note with hidden answer
set theAnswer to text returned of the result
if theAnswer is not "" then set pWord to theAnswer 
```

# sql - 如何使用组连接结果使用 LINQ 连接另一个表？

> ID：14352941
> 
> 赞同：1
> 
> 时间：2013-01-16T07:02:21.523
> 
> 标签：sql, linq, c#-4.0, entity-framework-4

我无法使用组连接的结果，然后进一步将连接应用到其他表。

我的 SQL 查询是：

```
SELECT *
FROM   
    [dummy_database].[dbo].[MA] M
INNER JOIN 
    SN.dbo.A A ON A.ApplicantMAId = M.MAId
INNER JOIN 
    SN.dbo.SP SP ON  SP.PropertyMAId = M.MAId
INNER JOIN 
    SN.dbo.MCC CC ON  CC.MAId = m.MAId
INNER JOIN 
    SN.dbo.MLSTN T ON  T.MAT_ID = M.MAId
INNER JOIN 
    (SELECT 
        MAX(MAT_DATE) AS MaxDate,
        MAT_ID
     FROM   
        [SN].[dbo].[MLSTN]
     GROUP BY
        MAT_ID) Q ON  Q.MAT_ID = M.MAId 
```

到目前为止我所做的是：

```
 var q = (from ml in context.MLSTN
                 group ml by ml.MAT_ID into g
                 let maxdate = g.Max(date => date.MAT_DATE)
                 select new
                 {
                     MortgId = g.Key,
                     TrackingDate = g.FirstOrDefault(val => val.MAT_DATE == maxdate).MAT_DATE

                 }
                 ); 
```

但是现在我根本没有进一步使用这个结果来创建与其他表的连接。我想问下怎么加入？有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:25:48.907

你需要这样的东西：

```
var groups = context.MLSTN
    .GroupBy(x => x.MAT_ID)
    .Select(g => new 
    {
        MAT_ID = g.Key,
        MaxDate = g.Max(date => date.MT_DATE)
    });

var result = context.MA
    .Join(context.A,
        m => m.MA_ID,
        a => a.MA_ID,
        (m, a) => new 
        {
            MA = m,
            A = a
        })
    .Join(context.SP,
        x => x.MA.MAId,
        sp => sp.PropertyMAId,
        (x, sp) => new
        {
            MA = x.MA ,
            A = x.A,
            SP = sp
        })
    .Join(context.MCC,
        x => x.MA.MAId,
        cc => cc.MAId,
        (x, cc) => new
        {
            MA = x.MA ,
            A = x.A,
            SP = x.SP,
            MCC = cc
        })
    .Join(context.MLSTN,
        x => x.MA.MAId,
        t => t.MAT_ID,
        (x, t) => new
        {
            MA = x.MA ,
            A = x.A,
            SP = x.SP,
            MCC = x.MCC,
            MLSTN = t
        })
    .Join(groups,
        x => x.MA.MAId,
        g => g.MAId,
        (x, g) => new
        {
            MA = x.MA ,
            A = x.A,
            SP = x.SP,
            MCC = x.MCC,
            MLSTN = t,
            MLSG = g
        }); 
```

# php - 使用 Rewrite API 更改 wordpress 中的站点语言

> ID：14352943
> 
> 赞同：1
> 
> 时间：2013-01-16T07:02:31.427
> 
> 标签：php, wordpress, mod-rewrite, url-rewriting, internationalization

我在 wordpress 上有一个网站，想要制作语言切换器英语/俄语。我想实现下一个 url 方案：

1.  默认（英文）网址如下所示：site.com/company
2.  俄罗斯网址看起来像这样：site.com/ru/company

我想进行下一个编程处理：当 url like`site.com/ru/company`来到 WP 时，我检测到这种情况并在内部调用`site.com/company`带有查询字符串的页面，以便在页面模板文件中`lang=ru`进行适当的处​​理。`lang``company.php`

但我不想通过浏览器进行外部重定向（301），并在内部处理这种情况。

如何用 Rewrite API 实现这个方案？

# ios - 获取表的索引路径

> ID：14352951
> 
> 赞同：0
> 
> 时间：2013-01-16T07:03:05.810
> 
> 标签：ios, xcode, uitableview

我在我的项目中使用具有不同图像的按钮组和带有自定义单元格的表格视图。当按下每个按钮时，每个单元格都具有一组组件（如图像视图、按钮、标签、滑块），将添加一个单元格。我的按钮图像，也添加到单元格的图像视图中。

再次按下按钮时如何获取每个单元格的索引。

当我第一次按下按钮时，将添加单元格。当第二次按下时，我想增加单元格内的标签值。所以我需要索引路径来从表格视图中单元格单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:10:30.453

您可以调用按钮触摸事件来获取 uitableview 的单元格 -

```
UIView *cellView = (UIVIew *)[button superview];
UITableViewCell *cell = (UITableViewCell *)[cellView superview];
NSIndexPath *indexPath = [self.tableview indexPathForCell:cell]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:10:28.020

我不确定你在寻找什么，也许你可以澄清你想要做什么。

indexPathForCell: 方法是一个 UITableView 方法，它为您提供某个单元格的索引。

稍微澄清一下您的问题，也许我们可以提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:10:52.863

在不知道单元格、表格或类似内容的情况下。此代码将起作用。

```
 -(NSIndexPath *) pathForButton:(UIbutton *) b {
      UITableView *tv = nil;
      UIView *superView = [b superview];
      UIView *cell;
      while(superview != nil && ![superview isKindOfClass:[UITableView class]]){
           cell = superview;
           superview = [superview superview];
      }

      if(superview != nil && cell != nil){
            tv = (UITableView*)superview;

            return [tv indexPathForCell:cell];
      }
      return nil;
} 
```

# python - ImportError：无法加载指定的对象 - psycopg2

> ID：14352952
> 
> 赞同：0
> 
> 时间：2013-01-16T07:03:17.747
> 
> 标签：python, python-2.7, psycopg2, postgresql-9.2

OpenBSD、PostgreSQL9.2、python2.7 尝试从 python 命令行导入 psycopg2 模块：

```
Python 2.7.3 (default, Aug  3 2012, 05:33:56)
[GCC 4.2.1 20070719 ] on openbsd5
Type "help", "copyright", "credits" or "license" for more information.
>>> import psycopg2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: Cannot load specified object 
```

psycopg2 已编译并安装。我在 /site-packages/psycopg2 文件夹中看到了 _psycopg.so。也许他看不到这个图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:16:02.390

python 模块包含一个用 C 编写的`psycopg2`扩展。无法加载该扩展，因为缺少它所依赖的另一个 C 库。

检查您是否仍然安装了 PostgreSQL 客户端库，并且`psycopg2`可以找到它。

请注意，如果您在 WSGI 服务器中运行 Django，则需要*在 WSGI 服务器启动之前*`LD_LIBRARY_PATH`设置环境变量。或者，在链接时重新编译扩展以“硬编码”PostgreSQL 客户端库的路径，从而无需设置.*`psycopg2``LD_RUN_PATH=/usr/local/pgsql/lib``LD_LIBRARY_PATH`*

 *最后的手段是添加`/usr/local/pgsql/lib`路径`/etc/ld.so.conf`，请参阅[`ld.so(8)`手册页](http://linux.die.net/man/8/ldconfig)。*

# android - 如何实现 TabHost 滑动效果？

> ID：14352954
> 
> 赞同：5
> 
> 时间：2013-01-16T07:03:18.377
> 
> 标签：android, animation, android-tabhost, android-sliding

我需要创建一些 TabHost 表单分页。切换选项页面时 TabHost 栏有滑动动画效果。

我要实现的页面也有滑动动画效果。怎么会这样？我使用 Tabhost 或 ActivityGround 检查了它所说的参考。但我不知道该怎么做。

有人可以给我一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T07:27:21.130

试试这个代码：

```
 import android.view.View;
    import android.view.animation.AccelerateInterpolator;
    import android.view.animation.Animation;
    import android.view.animation.TranslateAnimation;
    import android.widget.TabHost;
    import android.widget.TabHost.OnTabChangeListener;

/**
 * A custom OnTabChangeListener that uses the TabHost its related to to fetch information about the current and previous
 * tabs. It uses this information to perform some custom animations that slide the tabs in and out from left and right.
 * 
 * @author Daniel Kvist
 * 
 */
public class AnimatedTabHostListener implements OnTabChangeListener
{

    private static final int ANIMATION_TIME = 240;
    private TabHost tabHost;
    private View previousView;
    private View currentView;
    private int currentTab;

    /**
     * Constructor that takes the TabHost as a parameter and sets previousView to the currentView at instantiation
     * 
     * @param tabHost
     */
    public AnimatedTabHostListener(TabHost tabHost)
    {
        this.tabHost = tabHost;
        this.previousView = tabHost.getCurrentView();
    }

    /**
     * When tabs change we fetch the current view that we are animating to and animate it and the previous view in the
     * appropriate directions.
     */
    @Override
    public void onTabChanged(String tabId)
    {

        currentView = tabHost.getCurrentView();
        if (tabHost.getCurrentTab() > currentTab)
        {
            previousView.setAnimation(outToLeftAnimation());
            currentView.setAnimation(inFromRightAnimation());
        }
        else
        {
            previousView.setAnimation(outToRightAnimation());
            currentView.setAnimation(inFromLeftAnimation());
        }
        previousView = currentView;
        currentTab = tabHost.getCurrentTab();

    }

    /**
     * Custom animation that animates in from right
     * 
     * @return Animation the Animation object
     */
    private Animation inFromRightAnimation()
    {
        Animation inFromRight = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(inFromRight);
    }

    /**
     * Custom animation that animates out to the right
     * 
     * @return Animation the Animation object
     */
    private Animation outToRightAnimation()
    {
        Animation outToRight = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(outToRight);
    }

    /**
     * Custom animation that animates in from left
     * 
     * @return Animation the Animation object
     */
    private Animation inFromLeftAnimation()
    {
        Animation inFromLeft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(inFromLeft);
    }

    /**
     * Custom animation that animates out to the left
     * 
     * @return Animation the Animation object
     */
    private Animation outToLeftAnimation()
    {
        Animation outtoLeft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(outtoLeft);
    }

    /**
     * Helper method that sets some common properties
     * @param animation the animation to give common properties
     * @return the animation with common properties
     */
    private Animation setProperties(Animation animation)
    {
        animation.setDuration(ANIMATION_TIME);
        animation.setInterpolator(new AccelerateInterpolator());
        return animation;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:21:35.760

您可以使用**ViewPager**和**PageIndicator**完成此操作。

与较旧的 Android 版本兼容，并提供更多选项。

使用**ViewPagerIndicator**库 [https://github.com/JakeWharton/Android-ViewPagerIndicator/](https://github.com/JakeWharton/Android-ViewPagerIndicator/)

# javascript - 如何使用 Backbone 从 JS 调用 RESTful API？

> ID：14352962
> 
> 赞同：2
> 
> 时间：2013-01-16T07:03:43.563
> 
> 标签：javascript, rest, backbone.js

我有一个可以使用 curl 调用的 RESTful PUT API，如下所示：

```
curl -H "Content-Type: application/json" -X PUT -d "{\"id\":\"xyz\",\"attributeName\":\"privilegedUser\",\"attributeValue\":\"true\"}" https://www.example.com:7777/api/customer/set/attribute -v --insecure --negotiate -u: 
```

我是 Backbone 的新手。我试图通过使用这样的 Backbone 从 JS 调用相同的内容（但它不起作用）：

```
var Attribute = Backbone.Model.extend({
    url: 'https://www.example.com:7777/api/customer/set/attribute'
});

var privilegeUserAttribute = new Attribute({id: "xyz", attributeName: "privilegedUser"});

privilegeUserAttribute.save({attributeValue: "true"}); 
```

我究竟做错了什么？

# php - 如何将javascript嵌入和执行到html中？

> ID：14352965
> 
> 赞同：1
> 
> 时间：2013-01-16T07:04:03.743
> 
> 标签：php, javascript, jquery, ajax

索引.html

```
<script>
function check() {
        var id = $('input[name=id]').val();
        $("#result").load("/ajax.php", {id:id});        
}
</script>

<input type="text" size="3" name="id"><br />
<button onclick="check();">Pay</button>
<div id="result"></div> 
```

ajax.php

```
<?php
$id = (int)$_REQUEST['id'];
//some validations and SQL executions
echo "<script language=JavaScript src='https://*****/index.php?id=$id&invoice=$invoice&sum=$sum.......etc'></script>"; 
```

我尝试在 php 文件中形成 javascript 并将其嵌入到 div 中`id="result"`。我使用了`get`, `load`, `ajax`,`createElement`方法，但脚本没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:29:09.877

在您的 php 文件 ajax.php 中包含标题。

```
header('Content-Type: text/javascript'); 
```

在 index.html 中添加 type=”text/javascript” 到脚本标签。

```
<script type=”text/javascript”&gt;
        function check() {
           var id = $('input[name=id]').val();
           $("#result").load("/ajax.php", {id:id});        
         }
   </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:12:59.450

尝试这个.. `$('#result').load('ajax.php');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:59:26.440

您必须将脚本加载为真正的脚本元素。`"<script>/*...*/</script>"`在这种情况下，DOM 转换可能会失败。这是通过标准 DOM`document.createElement`函数完成的。

```
var script = document.createElement("script");
script.src = path; 
```

另一种方法是通过 AJAX 下载脚本，然后对其进行**评估**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:12:33.183

尝试这个：-

```
"<script language=JavaScript src='https://*****/index.php?id="'.$id.'"&invoice="'.$invoice.'"&sum="'.$sum.'".......etc'></script>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T07:09:48.387

尝试使用[getScript](http://api.jquery.com/jQuery.getScript/)：

```
$.ajax({
  url: url,
  dataType: "script",
  success: success
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:55:33.463

为什么不使用 AJAX 直接加载脚本 URL？ajax.php 只应该返回脚本的路径：

```
 $id = (int)$_REQUEST['id'];
 //some validations and SQL executions
 echo "https://*****/index.php?id=$id&invoice=$invoice&sum=$sum.......etc"; 
```

除此之外，所有 HTML 元素属性都应该用引号或撇号括起来。

然后你应该在 javascript 中加载这个 url 并在此处生成脚本元素：

```
 function loadScript(url,appendTo) {
     var script = document.createElement("script")
     script.type = "text/javascript";
     script.src = url;
     if(typeof appendTo.appendChild == "function")     //Chceking if we can append script to given element
       appendTo.appendChild(script); 
     else
       document.body.appendChild(script)       //This will not work in old IE, where document.body is not defined. 
   } 
```

您使用脚本 url 和可选的目标元素（将放在哪里）作为参数调用此函数。像这样：

```
 $.get("ajax.php",{param1:"value"},function(scriptUrl) {loadScript(scriptUrl, document.getElementById("result");}) 
```

# watir - 如何更改闪光灯颜色？

> ID：14352975
> 
> 赞同：2
> 
> 时间：2013-01-16T07:04:43.390
> 
> 标签：watir

我想在使用`element.flash`方法时更改闪光灯颜色。默认为黄色。我能够增加 elements.rb 文件中的闪烁次数和延迟时间。但我不知道如何更改高亮颜色。对此有任何想法吗？

如果浏览器元素具有黄色背景，则使用不同的颜色突出显示将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:08:57.997

**解决方案**

闪烁基于元素容器的 activeObjectHighLightColor。这是通过以下方式设置的：

```
element.container.activeObjectHighLightColor = "colour" 
```

哪里`colour`是有效的网络友好颜色（根据[container.rb 文件](https://github.com/watir/watir-classic/blob/master/lib/watir-classic/container.rb)）。

**示例 - 单个元素的 Flash**

例如，以下是更改 Google 搜索中文本字段的闪烁颜色：

```
#Use google search text field as a test page
ie = Watir::Browser.new
ie.goto 'www.google.ca'
e = ie.text_field(:name => 'q')

#Set the flash colour
e.container.activeObjectHighLightColor = "green"

#Flash the object, which should now be green
e.flash 
```

笔记：

*   这仅适用于 Watir-classic。Watir-webdriver 以不同的方式进行闪烁。
*   我只在最新版本的 watir-classic 中对此进行了测试，但 2.0.4 的代码似乎是相同的。

**示例 - 默认闪光颜色**

要更改所有内容的默认闪光颜色，您需要`activeObjectHighLightColor`为浏览器设置 。

如果要为当前浏览器更改它，请执行以下操作：

```
ie = Watir::Browser.new
ie.activeObjectHighLightColor = "green"

ie.goto 'www.google.ca'
e = ie.text_field(:name => 'q')
e.flash
#=> Will flash green 
```

如果要永久更改（即不必每次都设置），可以在 ie-class.rb 文件中更改颜色：

```
HIGHLIGHT_COLOR = 'yellow' 
```

# gwt - GWT CSSResources 限制 css 文件大小 65535 字节限制

> ID：14352976
> 
> 赞同：1
> 
> 时间：2013-01-16T07:04:44.687
> 
> 标签：gwt, gwt2

是 GWT CSSResources 限制 css 文件大小不应超过 65535 字节。为什么这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:56:13.500

这比 GWT 更像是 Java 限制。从 java 的角度来看，解决方法是拆分方法。

但是，对于 GWT，您只需将 Client Bundle 内容拆分为更小的块。

理想情况下，GWT 应该通过将您在客户端包中使用的文件分块来为您处理这个问题。但由于这是一个极端情况，我想你不妨记录一个错误。[GWT 中的类似错误列表](http://code.google.com/p/google-web-toolkit/issues/list?can=2&q=exceeding%20the%2065535%20bytes%20limit&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars&cells=tiles)。

此外，您的直接解决方案是使用替代

1）如果文本内容可以跨多个文件拆分。做吧！！！！

2) 如果文本内容发生变化，因此无法拆分，请避免使用 Client Bundle。

# iphone - 在文本字段上设置验证

> ID：14352979
> 
> 赞同：0
> 
> 时间：2013-01-16T07:05:21.987
> 
> 标签：iphone, xcode, uitextfield

我正在做一个注册表单，如果任何文本字段为空，那么我想验证它。但是当文本字段为空时，我不想显示常规的 UIAlertView。我可以在特定文本字段旁边显示任何标记的红色星号或其他任何内容吗？

如何验证以检查 emailId 模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:17:16.583

您可以在您的`textField`

```
if ([yourTextField.text isEqualToString:@""])
    {
        yourTextField.textColor=[UIColor redColor];
        yourTextField.text=@"Value Required";
    } 
```

在 .h 文件中设置您的 textField 的委托

```
<UITextFieldDelegate> 
```

并且`textFieldDidBeginEditing`您可以更改您的文本字段颜色

如果您在 textField 中设置 * 则执行此操作

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if ([textField.text isEqualToString:@"*"])
    {
        textField.text=@"";
        textField.textColor=[UIColor blackColor];
    }
} 
```

或者，您可以在您的旁边制作一个标签`textField`并最初将其隐藏并在需要时显示。

**验证电子邮件**

```
- (BOOL)isValidEmailId:(NSString*)email
{

    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    return [emailTest evaluateWithObject:email];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:08:50.830

验证电子邮件字段：

```
- (BOOL)EmailValidationL:(NSString *)email
{
    NSString *emailRegEx =@"(?:[a-z0-9!#$%\\&'*+/=?\\^_`{|}~-]+(?:\\.[a-z0-9!#$%\\&'*+/=?\\^_`{|}"
    @"~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\"
    @"x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-"
    @"z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5"
    @"]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-"
    @"9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21"
    @"-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])";

    NSPredicate *regExPredicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];
    a= [regExPredicate evaluateWithObject:email];
    return a;
} 
```

为了检查它，请执行以下操作：

```
if (![self EmailValidationL:emailtxt.text])
    {

        mailAlert  =[[UIAlertView alloc]initWithTitle:@"Error"
                                              message:@"Email Field Is Not Valid"
                                             delegate:nil
                                    cancelButtonTitle:nil
                                    otherButtonTitles:@"OK",nil];
        [mailAlert show];
        [mailAlert release];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:08:11.050

是的，您可以显示带有 * 文本的红色图像或标签，您可以明智地隐藏和显示它。

要验证电子邮件，您可以使用以下代码

```
 +(BOOL) validateEmail: (NSString *) email 
 {
      NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]";
      NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
      BOOL isValid = [emailTest evaluateWithObject:email];
      return isValid;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:15:51.497

好的，所以你得到了很多电子邮件解决方案。

所以让我们去追星吧。你可能有很多方法让我给其中两个

1.  添加隐藏的 UIImageView 您要显示开始的地方，并且使用时将其留空时可见

2.  使用 [UIView addSubView:UIImageView] 在您想要显示时显示开始。

如果你想以红色显示正常 *，你可以使用 UILabel 而不是 UIImageView。

我使用以下来验证电子邮件：

```
NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];

if(![emailTest evaluateWithObject:txtMail.text])
{
  //Your code if wrong email
} 
```

祝一切顺利....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T07:23:14.880

你可以试试这个：

首先，在 XIB 中使用简单的文本和颜色获取简单的标签：

```
-(void)DidLoad
{
   -----
   lbl.hidden = YES;
   -----
}

Attributes:
text = "* email invalid"
color = "red"

Or whatever you like. 
```

'textDidEndEditing' 方法。

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
   if(textField == txtEmail)
   {
      if(![txtEmail.text isEqualToString:@""])
      {
         bool chk = [self validateEmail:txtEmail.text];
         if(!chk)
         {
            lbl.hidden = NO;
            lbl.text = @"email invalid";
         }
         else
            lbl.hidden = YES;
      }
      else
      {
         lbl.hidden = NO;
         lbl.text = @"* required";
      }
   }
} 
```

电子邮件验证

```
+(BOOL) validateEmail: (NSString *) email 
{
  NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
  NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
  BOOL isValid = [emailTest evaluateWithObject:email];
  return isValid;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-16T07:21:51.780

首先，Shashank Kulshrestha 对验证电子邮件给出了很好的回答。现在，如果您想显示一些指示无效或空输入的内容，请遵循该文本字段。它将显示红色边缘。1.添加QuartzCore框架。2.Import #import 3.添加以下代码：

```
if (textfield==empty || invalid)
{
    textField.layer.cornerRadius=8.0f;
    textField.layer.masksToBounds=YES;
    textField.layer.borderColor=[[UIColor redColor]CGColor];
    textField.layer.borderWidth= 1.0f;

} 
```

# c# - 如何比较两个 HashSet？

> ID：14352981
> 
> 赞同：0
> 
> 时间：2013-01-16T07:05:25.387
> 
> 标签：c#

```
private void button1_Click(object sender, EventArgs e)
{
   string[] array1 = { "C:/folder/a.txt", "C:/folder/b.txt", "C:/folder/c.txt", "C:/folder/d.txt" };

   string[] array2 = { "D:/a.txt", "D:/b.txt", "D:/c.txt", "D:/d.txt" };

   var hash1 = new HashSet<string>(array1);

   var hash2 = new HashSet<string>(array2);

} 
```

我想比较`hash1`和`hash2`。如果`a.txt`文件存在，`hash2`则从. 我们可以在没有迭代值的情况下做到这一点吗？ `C:/folder/a.txt``hash1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:07:26.310

如果我没记错的话，应该是这样的：

```
var result = array1.Where(a1 =>  //take only those items from array1, which
              !array2.Any(     //have no such item in array2 
                a2 => a2.Contains(  //that contains
                   a1.Substring(a1.LastIndexOf("/"))))); //a similar filename

var hash1 = new HashSet<string>(result);
var hash2 = new HashSet<string>(array2); 
```

也就是说，`HashSet`已经使用必要的值进行创建就足够了。所以所有的计算都是在数组上完成的。

# php - 有没有正确的方法来使用 PHP 中的 Python 代码？

> ID：14352983
> 
> 赞同：0
> 
> 时间：2013-01-16T07:05:35.263
> 
> 标签：php, python

我需要在 PHP 中使用一些用 python 编写的功能。我需要将参数传递给python函数并将结果（至少是简单类型：整数、浮点数、元组等）传回php？。可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:09:33.847

[您可以使用exec](http://php.net/manual/en/function.exec.php)从 php 运行任何外部脚本

或者

创建要访问的 Web 服务。这将是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:04:41.197

您应该使用**XML-RPC**（远程过程调用）。为此设置一个 Python-Server 非常简单，在 PHP 中，使用[http://php.net/manual/de/ref.xmlrpc.php](http://php.net/manual/de/ref.xmlrpc.php)。

例如，作为示例（取自[文档](http://docs.python.org/2/library/simplexmlrpcserver.html)）

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler

# Restrict to a particular path.
class RequestHandler(SimpleXMLRPCRequestHandler):
    rpc_paths = ('/RPC2',)

# Create server
server = SimpleXMLRPCServer(("localhost", 8000),
                            requestHandler=RequestHandler)
server.register_introspection_functions()

# Register pow() function; this will use the value of
# pow.__name__ as the name, which is just 'pow'.
server.register_function(pow)

# Register a function under a different name
def adder_function(x,y):
    return x + y
server.register_function(adder_function, 'add')

# Register an instance; all the methods of the instance are
# published as XML-RPC methods (in this case, just 'div').
class MyFuncs:
    def div(self, x, y):
        return x // y

server.register_instance(MyFuncs())

# Run the server's main loop
server.serve_forever() 
```

设置一个完全工作的 XML-RPC-server。

然后，每种方法`MyFuncs`都可用于任何支持 XML-RPC 的编程语言，包括 PHP。

# iphone - 对 NSMutable 字典的 NSMutable 数组进行排序

> ID：14352985
> 
> 赞同：0
> 
> 时间：2013-01-16T07:05:38.847
> 
> 标签：iphone, objective-c

我是一名 Iphone 开发人员，我是这项技术的新手。我想对一个`NSMutableArray`. 在该数组的每个索引处，都有一个`NSMutableDictionary`. 每个字典都有两个字段：名称和日期。我想根据这个日期字段对数组进行排序。我的数组如下所示：

```
(
   {
       name :  raj
       date  : 20/09/1998
   }
   {
       name : teena
       date : 21/06/1987
   }
) 
```

我在网上搜索了很多，但找不到任何合适的答案。请帮帮我。任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:11:56.883

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"date"
                                              ascending:YES] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
self.sortedArray = [self.originalArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

如果您的日期键实际上包含一个日期对象并且如果它包含一个字符串形式的日期，这应该可以工作..您将不得不尝试这个..

```
[resultArray sortUsingComparator:^NSComparisonResult(id a, id b) {

    static NSDateFormatter *dateFormatter = nil;

    if (!dateFormatter) {
        dateFormatter = [[NSDateFormatter alloc] init];
        dateFormatter.dateFormat = @"mm/dd/yyyy hh:mm:ss"; 
    }

    NSString *date1String = [a valueForKey:@"StartDate"];
    NSString *date2String = [b valueForKey:@"StartDate"];

    NSDate *date1 = [dateFormatter dateFromString:date1String];
    NSDate *date2 = [dateFormatter dateFromString:date2String];

    return [date1 compare:date2];
    }]; 
```

# java - 如何为存储过程编写 Hibernate 映射文件？

> ID：14352987
> 
> 赞同：0
> 
> 时间：2013-01-16T07:05:56.167
> 
> 标签：java, spring, hibernate, hibernate-mapping

我有一个 MySQL 存储过程，它接受两个输入日期并返回`EmpCode`、`Name`、`Department`和`Employee_Absent_Date``Total_No_OF_Days`

存储过程（两个给定日期范围内的员工缺勤报告）：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `AbsentReportproc`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `AbsentReportproc`(IN _fromdate DATETIME, IN _todate DATETIME)
BEGIN 
    CREATE TEMPORARY TABLE daterange25 (dte DATE); 

    SET @counter := -1;
    WHILE (@counter < DATEDIFF(DATE(_todate), DATE(_fromdate))) DO 
        INSERT INTO daterange25 VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));
    END WHILE;

SELECT tp.EMPCODE,tp.NAME,tp.DEPARTMENT, Group_Concat(d.dte order by d.dte SEPARATOR '\n')AbsentDate, COUNT(tp.EMPCODE) Totalnoofabsentdates
FROM test_prefixmaster tp
JOIN daterange25 d
LEFT JOIN test_prefixtransactions tpt ON (tp.EMPCODE = tpt.empcode) AND DATE(S_DateTime) = d.dte
WHERE tpt.empcode IS NULL
GROUP BY tp.EMPCODE;   

    DROP TABLE daterange25;
END$$

DELIMITER ; 
```

这是我的休眠映射文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="edu.model.Master" table="test_prefixmaster">
        <id name="empcode" column="EMPCODE" length="10" ></id>
        <property name="dept">
            <column name="DEPARTMENT" length="30" />
        </property>
        <property name="empname">
            <column name="NAME" length="30" />
        </property>
    </class>
    <sql-query name="AbsentReportproc" callable="true">
    <return alias="master" class="edu.model.Master">
        <return-property name="empcode" column="EMPCODE" />
        <return-property name="dept" column="DEPARTMENT" />
       <return-property name="empname" column="NAME" /> 

       </return>
        <![CDATA[CALL AbsentReportproc(:_fromdate,:_todate)]]>
  </sql-query>
</hibernate-mapping> 
```

这是我的测试类（主要）：

```
public static void main(){
Query query = session.getNamedQuery("AbsentReportproc");
            query.setParameter("_fromdate", "2012-11-22");
            query.setParameter("_todate", "2012-11-23");
            List absentiesList=new ArrayList();
             absentiesList = query.list();

            for (int i = 0; i < absentiesList.size(); i++) {

                Master master = (Master) absentiesList.get(i);

        System.out.println("Employee Code:::" + master.getEmpcode());
        System.out.println("Employee Name:::"master.getEmpname());
   System.out.println("Employee Department:::" + master.getDept());         

            }
} 
```

当我运行我的休眠代码时，我能够成功打印员工代码、姓名和部门

但我的实际要求是如何映射列并从名为 的临时表中打印 d.dte 的值`daterange25`？我应该为我的临时表创建一个 Pojo 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:12:16.917

我认为没有办法将 SP 的结果直接映射到实体。您应该编写并实例化您自己的 pojo，或者是的，您可以将实体映射到您的 SP 存储结果的临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T17:24:43.517

您可以根据 SP 结果的结构创建 POJO，并在 hibernate 映射 XML 中映射其列，而无需指定表名。不需要返回属性标签。

# python - 是返回一个计算的布尔 pythonic 还是我应该使用传统的 if/else？

> ID：14352990
> 
> 赞同：5
> 
> 时间：2013-01-16T07:06:06.647
> 
> 标签：python

我想知道以下哪个示例在 Python 社区中更受欢迎：

1.

```
return any(host[0].endswith(bot_hosts) for bot_hosts in bot_hosts) 
```

2.

```
if any(host[0].endswith(bot_hosts) for bot_hosts in bot_hosts):
    return True
else:
    return False 
```

或者也许是别的什么？

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:12:58.133

*在您的示例中：`str.endswith`将元组作为参数。总体而言，作为设计模式使用第一个版本（检查推理@Ben 的答案）。这`any(host[0].endswith(bot_host) for bot_host in bot_hosts)`与以下内容相同：*

```
host[0].endswith(bot_hosts) #if bot_hosts is a tuple
                            #if bot_hosts in not a tuple add tuple(bot_hosts) 
```

*例子：*

```
In [1]: suffs = ('a','b','d')

In [2]: 'asd'.endswith(suffs)
Out[2]: True

In [3]: 'asap'.endswith(suffs)
Out[3]: False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T07:17:13.287

```
if <anything>:
    return True
else:
    return False 
```

通常是非常没有意义的。`<anything>`无论如何都必须返回真实或虚假的东西，所以只需返回它。

你想要这样做的唯一原因是你想确保你只返回`True`or `False`，因为你`<anything>`可能会返回一些其他对象。例如，它可能会返回一个大对象，在检查它是否存在之后您不再关心它，因此您宁愿不返回对它的引用，这可能会阻止其内存被回收。或者，您`<anything>`可能正在返回一个对象 or `None`，虽然`None`是错误的，但您担心以后的代码将使用`is not None`测试，并且您希望不将错误路径计为`None`.

即便如此（正如 poke 在评论中指出的那样），您可以使用`bool(<anything>)`来获取一个保证为`True`或`False`基于真实性的值`<anything>`，因此没有充分的理由使用立即返回or的`if`语句。`True``False`

在您的情况下，`any`始终返回`True`or `False`。所以你实际上有一个值是`True`or `False`，检查它是哪一个，然后`True`如果是则返回，如果是则`True`返回。`False``False`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:17:15.527

第二个版本完全出局，这就像将布尔值与 True 进行比较以检查它是否为真。我个人会做的是改用循环，即将迭代部分与在每个元素上执行的部分分开，以期使其更易于阅读。

# excel - 使用 OpenXml sdk 获取 excel 文件中单元格的颜色

> ID：14352993
> 
> 赞同：1
> 
> 时间：2013-01-16T07:06:34.330
> 
> 标签：excel, openxml-sdk

我正在使用**OpenXml Sdk**打开具有一些预定义样式的电子表格。如何**访问**excel 模板中存在的单元格样式（如颜色）。

# php - 无法连接到 MySql

> ID：14352999
> 
> 赞同：0
> 
> 时间：2013-01-16T07:07:37.590
> 
> 标签：php, mysql, iis

我在连接到 mysql 服务器时遇到问题。我通过 Windows 的 Web 安装程序平台安装了带有 iis 7 的 PHP fast cgi。一切正常，直到我尝试连接 mysql 服务器，它总是失败。这是我的代码：

```
class MySqlDatabase{
    private $mysql;
    private $host;
    private $username;
    private $password;
    private $db_name;

    function __construct($host, $username, $password, $db_name){
        $this->host = $host;
        $this->username = $username;
        $this->password = $password;
        $this->db_name = $db_name;
    }
    public function connect(){
        $this->mysql = mysql_connect($this->host, $this->username, 
                       $this->password) or 
                       die("Could not connect to database. ". $this->username . 
                       "@" . $this->host . " passwrod: YES!");
        if (!mysql_select_db($this->db_name))   die("Cannot select database!");
    }
}
$database = new MySqlDataBase($host,$username,$password,$db_name);
$database->connect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:13:41.577

1.  确保您的 MySql 服务正在运行。
2.  确保您的凭据正确，尝试使用 MySql Workbench 以查看您是否有连接。
3.  确保您的脚本也具有正确的凭据。
4.  确保您的脚本以运行服务的机器为目标，例如`localhost`port `3306`，就像 MySql Workbench 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:09:59.603

您显然错误的凭据连接到数据库。这就是您收到错误“无法连接到 MySQL”的原因。检查您的变量以及您发送的用户名和密码以实现连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:18:36.603

尝试这样做，没有类声明：

```
// we connect to localhost at port 3307
$link = mysql_connect('127.0.0.1:3307', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link); 
```