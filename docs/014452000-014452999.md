# StackOverflow 问答 14452000-14452999

# ios - iOS - Memory Management advice when passing ManagedObjectContext To Other Views

> ID：14452004
> 
> 赞同：0
> 
> 时间：2013-01-22T05:16:35.187
> 
> 标签：ios, memory-management, nsmanagedobject, nsmanagedobjectcontext

I have a pretty hefty application so far, and it is heavily tied in with Core Data. I pass a NSManagedObjectContext (along with NSManagedObjects themselves) to other views.

Everything I've read shows that, for the view you are passing the Managed Object and/or Managed Object Context to should have a ***strong*** property that will be used when received.

My question then boils down to this: Should you set a managed object context or managed object that is received from another controller to nil when you're finished with it, or viewWillDisappear is called or even when didReceiveMemoryWarning is received?

Thanks in advance for anyone who can answer this...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:28:36.093

Amazing what a little research will do for a guy: [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html#//apple_ref/doc/uid/TP40003397-SW2](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html#//apple_ref/doc/uid/TP40003397-SW2)

# html - 如何启用 HTML::TableExtract 以识别特殊字符

> ID：14452005
> 
> 赞同：1
> 
> 时间：2013-01-22T05:16:45.177
> 
> 标签：html, perl, parsing, html-table

我试图解析包含科学记数法（希腊语等）的页面。这是[页面](http://www.violinet.org/vaxjo/vaxjo_detail.php?c_vaxjo_id=55)。请注意，还有其他页面需要解析更多符号。

例如它包含以下 HTML

```
<td> human Interleukin 1&beta;        </td> 
```

在哪里`&beta`编码希腊字母。

然而，在用[HTML::TableExtract](http://search.cpan.org/~msisk/HTML-TableExtract-2.11/lib/HTML/TableExtract.pm)解析后，它变成了：

```
human Interleukin 1\x{3b2} 
```

有没有办法让下面的代码按原样捕获原始 HTML，即 maintaning `1&beta`。

```
use HTML::TableExtract;
use Data::Dumper;

# Local file for http://www.violinet.org/vaxjo/vaxjo_detail.php?c_vaxjo_id=55
my $file = "vaxjo_detail.php\?c_vaxjo_id\=50.html";

my $te = HTML::TableExtract->new();
$te->parse_file($file);
my ($table) = $te->tables;
print Dumper $table ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:25:41.787

它没有返回

```
human Interleukin 1\x{3b2} 
```

它回来了

```
human Interleukin 1β 
```

Dumper 只是将其打印为 Perl 字符串文字

```
"human Interleukin 1\x{3b2}" 
```

无论如何，如果你想要原始的 HTML 而不是它所代表的文本，我相信传递`keep_html => 1`给构造函数就可以了。

# xml - 从 XML 创建 XSL 文件期间的问题

> ID：14452007
> 
> 赞同：0
> 
> 时间：2013-01-22T05:16:49.837
> 
> 标签：xml, xslt, xsd, xquery

我有一个这样的表结构：

| ID | 姓名 | parent_id |
| --- | --- | --- |
| 1 | 根类别 | 空值 |
| 2 | 出现 | 1 |
| 3 | 配件 | 1 |
| 4 | 衬衫 | 2 |
| 5 | 裤子 | 2 |
| 6 | 手提包 | 3 |
| 7 | 珠宝 | 3 |

从这个表中，我创建了一个类似于 test.xml 的 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<childrens>
  <child id="1" value="Root Catalog" parent_id="0">
    <child id="2" value="Apparel" parent_id="1">
      <child id="4" value="Shirts" parent_id="2"/>
      <child id="5" value="Pants" parent_id="2"/>
    </child>
    <child id="3" value="Accessories" parent_id="1">
      <child id="6" value="Handbags" parent_id="3"/>
      <child id="7" value="Jewelry" parent_id="3"/>
    </child>
  </child>
</childrens> 
```

使用这个 xml 文件，我创建了一个类似于 test.xsl 的 XSL 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<html>
<body>
<h2>Testing</h2>
  <table border="1">
   <tr bgcolor="#9acd32">
    <th>Id </th>
    <th>Name</th>
  </tr>
  <xsl:for-each select="childrens/child">
  <tr>
    <td><xsl:value-of select="@id"/></td>
    <td><xsl:value-of select="@value"/></td>
  </tr>
  </xsl:for-each>
</table>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

但它不起作用，也没有显示数据

数据应该看起来像

```
Root Category
 - Apparel 
   -- Shirts
   -- Pants 
 - Accessories
   -- Handbags 
  -- Jewelry 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:50:56.063

我不完全确定您期望什么输出。您当前的 XSLT 正在输出一个表，但您的示例看起来更像嵌套列表。如果您确实想显示元素的层次结构，那么嵌套列表可能是要走的路。

这将相对简单地通过单个模板来匹配**子**元素，然后递归调用自身。

```
 <xsl:template match="child">
      <li>
         <xsl:value-of select="@value"/>
         <xsl:if test="child">
            <ul>
               <xsl:apply-templates select="child"/>
            </ul>
         </xsl:if>
      </li>
   </xsl:template> 
```

即输出一个**li**元素，如果元素本身有子元素，则在这个里面开始一个新的**ul元素。**

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>

   <xsl:template match="/childrens">
      <html>
         <body>
            <ul>
               <xsl:apply-templates select="child"/>
            </ul>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="child">
      <li>
         <xsl:value-of select="@value"/>
         <xsl:if test="child">
            <ul>
               <xsl:apply-templates select="child"/>
            </ul>
         </xsl:if>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<html>
   <body>
      <ul>
         <li>Root Catalog
            <ul>
               <li>Apparel
                  <ul>
                     <li>Shirts</li>
                     <li>Pants</li>
                  </ul>
               </li>
               <li>Accessories
                  <ul>
                     <li>Handbags</li>
                     <li>Jewelry</li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </body>
</html> 
```

视觉上会出现如下

*   根目录
    *   服饰
        *   衬衫
        *   裤子
    *   配件
        *   手袋
        *   珠宝

编辑：正如 JLRishie 在评论中提到的（谢谢！），如果您想在**li**元素上包含 ID 属性，请执行以下操作：

```
<li id="{@id}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:08:28.767

我试图做一个执行文本输出的 XSLT。我添加了换行和制表符来获取请求的结构。我强烈建议您更改您的 XML，并将元素命名为不同于子元素的名称，在我看来，使用起来会更容易。但这只是一个建议。

应用此 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:output method="text"/>

<xsl:variable name="lf" select="'&#x0A;'"/>
<xsl:variable name="tab" select="'&#x09;'"/>

<xsl:template match="/">
    <xsl:text>Root Category</xsl:text>
    <xsl:apply-templates/>
</xsl:template>

<!-- match the apparel -->
<xsl:template match="child[@value='Apparel']">
    <xsl:value-of select="concat('-- ',@value)"/>
    <xsl:value-of select="$lf"/>
    <xsl:apply-templates select="child" mode="apparel"/>
</xsl:template>
<!-- match the child elements of apparel -->
<xsl:template match="child" mode="apparel">
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="concat('- ',./@value)"/>
    <xsl:value-of select="$lf"/>
</xsl:template>

<!-- match the accessories -->
<xsl:template match="child[@value='Accessories']">
    <xsl:value-of select="concat('-- ',@value)"/>
    <xsl:value-of select="$lf"/>
    <xsl:apply-templates select="child" mode="accessories"/>
</xsl:template>
<!-- match the child elements of accessories -->
<xsl:template match="child" mode="accessories">
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="$tab"/>
    <xsl:value-of select="concat('- ',./@value)"/>
    <xsl:value-of select="$lf"/>
</xsl:template>

</xsl:stylesheet> 
```

对此 XML 输入：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
<child id="1" value="Root Catalog" parent_id="0">
    <child id="2" value="Apparel" parent_id="1">
        <child id="4" value="Shirts" parent_id="2"/>
        <child id="5" value="Pants" parent_id="2"/>
    </child>
    <child id="3" value="Accessories" parent_id="1">
        <child id="6" value="Handbags" parent_id="3"/>
        <child id="7" value="Jewelry" parent_id="3"/>
    </child>
</child>
</childrens> 
```

你得到这个输出：

```
Root Category

    -- Apparel
        - Shirts
        - Pants

    -- Accessories
        - Handbags
        - Jewelry 
```

# android - 在 eclipse/ADT 之外预览 android xml 布局

> ID：14452010
> 
> 赞同：1
> 
> 时间：2013-01-22T05:17:04.133
> 
> 标签：android, android-layout

有没有办法从 eclipse/ADT 之外的 android 项目中呈现 xml 布局？

非常清楚，我不是要求查看标记为 android 布局 xml 文件的随机 xml 文件。布局可以引用自定义视图，任何提供预览的东西都需要能够加载这样的资源。真的，那里有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:27:04.597

您可以在[DroidDraw](http://www.droiddraw.org/)工具中查看。[在此处](http://code.google.com/p/droiddraw/downloads/detail?name=droiddrawr1b23.jar&can=2&q=)下载该工具。希望这可以帮助你。

# java - Spring 3.2 Hibernate 无活动事务

> ID：14452013
> 
> 赞同：0
> 
> 时间：2013-01-22T05:17:20.187
> 
> 标签：java, spring, hibernate

我是 Spring 新手，使用 3.2 版和 Hibernate 4.1.9Final，似乎 @Transactional 注释被忽略了，我尝试在控制器方法、服务方法和 dao 上设置它，没有成功

我已将软件包包含在

web.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" > 
    <display-name>
      Spring
    </display-name>
    <description>
     Spring Test
    </description>

  <servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

</web-app> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc 
                    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
                    http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.2.xsd
                    http://www.springframework.org/schema/tx
                   http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
                   http://www.springframework.org/schema/aop
                   http://www.springframework.org/schema/aop/spring-aop-3.2.xsd">

    <context:component-scan base-package="com.test.web.controllers,com.test.service.impl" />
     <context:annotation-config />
    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/" /> 

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/test?zeroDateTimeBehavior=convertToNull"/>
    <property name="username" value="medi"/>
    <property name="password" value="tech"/>
  </bean>

  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="mappingLocations" value="classpath*:com/test/model/hbm/**/*.hbm.xml" />

    <property name="hibernateProperties">
      <value>
        hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
        hibernate.show_sql=true
        hibernate.current_session_context_class=thread
      </value>
    </property>
  </bean>

 <tx:annotation-driven transaction-manager="transactionManager" mode="proxy"/>
  <bean id="transactionManager"
            class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

    <bean

        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="categoryDAO" class="com.test.dao.hibernate.HibernateCategoryDAO">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>
    <bean id="categoryService" class="com.test.service.impl.Categories" scope="singleton">
        <property name="dao" ref="categoryDAO"></property>
    </bean>

</beans> 
```

我的测试控制器

```
public class HelloController {

    @Autowired
    private CategoryService categories;

    public HelloController() {
        System.out.println("test!!!");
    }

    public void setCategoryService(CategoryService categories) {
        this.categories = categories;
    }

    @RequestMapping(value = "/", method = RequestMethod.GET)
    @Transactional
    public String getIndex() {
        Category c = new Category();
        c.setName("Test");
        categories.save(c);
        return "index";
    }
} 
```

堆栈跟踪：

```
org.hibernate.HibernateException: save is not valid without active transaction
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:348)
    at $Proxy19.save(Unknown Source)
    at com.test.dao.hibernate.HibernateCategoryDAO.save(HibernateCategoryDAO.java:20)
    at com.test.service.impl.Categories.save(Categories.java:21)
    at com.test.web.controllers.HelloController.getIndex(HelloController.java:36)
    at com.test.web.controllers.HelloController$$FastClassByCGLIB$$aa12a3a3.invoke(<generated>)
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:47:45.510

删除 hibernate.current_session_context_class=thread 并且它可以工作。Spring在使用Spring事务支持层时注入自己的会话上下文管理实现？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:26:58.393

您正在`@Transactional`控制器层中使用。它应该在您的服务层中。

制作`Categories.save`方法`@Transactional`，您可能会消除此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:25:25.623

尝试添加`<context:component-scan base-package="your package here">`

看起来它只是找不到注释

# django - 无法从 Django 模板中获取选项名称并传递给视图？

> ID：14452014
> 
> 赞同：0
> 
> 时间：2013-01-22T05:17:23.330
> 
> 标签：django

list_users 变量包含用户名和 {{ i.username }} 列出所有可用的用户。它列出了所有可用的用户。现在，我想将用户选择的用户名的用户 ID 传递给 django 视图。

```
 <select name="select">
     {% for i in list_users %}
        <option value="{{ i.id }}" name="username">{{ i.username }}</option>
     {% endfor %}
     </select>

 if request.POST.get('share'):
            choices = request.POST.getlist('choice')
            person = request.POST.getlist('username')
            for i, j in zip(choices, person):
                start_date = datetime.datetime.utcnow().replace(tzinfo=utc)
                a = Share(users_id=log_id, files_id=i, shared_user_id=j, shared_date=start_date)
                a.save()
            return HttpResponseRedirect('/uploaded_files/') 
```

当我单击共享时，共享模型中没有任何内容。但如果我这样做：

```
for i in choices:

    start_date = datetime.datetime.utcnow().replace(tzinfo=utc)
    a = Share(users_id=log_id, files_id=i, shared_user_id=2,    shared_date=start_date)
    a.save() 
```

它是用共享模型编写的。上面的代码我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:37:32.047

事实证明，这根本不是 Django 错误。这是一个简单的 HTML 错误。`option tag`没有调用属性，`name`但是`select`有。

这就是为什么我编辑我的视图看起来像这样：

```
 person = request.POST.getlist('username') 
```

现在工作正常。

# javascript - html5画布将线改为圆形

> ID：14452015
> 
> 赞同：0
> 
> 时间：2013-01-22T05:17:28.633
> 
> 标签：javascript, html, canvas

我想绘制一个矩形/正方形，并且我希望如果我拖动该矩形的任何一侧，那么矩形的该一侧应更改为圆形，如第一张图像所示。
我设法使用**二次曲线**绘制了一个具有可拉伸边的矩形/正方形，但问题是当我拉伸矩形的边时，它不会拉伸为圆形，而是拉伸为椭圆或第二张图像中所示的东西。
我知道您可能会推荐使用**贝塞尔曲线**，但我想要像二次曲线这样的单个控制点，但贝塞尔曲线有两个（如果我错了，请纠正我）。

请建议我解决这个问题的最佳方法是什么。

![在此处输入图像描述](../Images/b7723cc7c2a5554f3c06e15f0d391bff.png)

**图片 - 我想要的**

![在此处输入图像描述](../Images/b68b8f9e5df729ffcd8b21a1a5eaf379.png)

**图片 - 我所取得的成就**

**我做了什么**
这[`fiddle`](http://jsfiddle.net/sandeepthakurala/g8dgp/1/embedded/result/)显示了我的工作成果。
要绘制矩形，只需在画布上单击并拖动鼠标即可。

[`Here is the code`](http://jsfiddle.net/sandeepthakurala/g8dgp/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:17:51.223

贝塞尔曲线的阶数越高，需要的控制点就越多。二次曲线是二阶贝塞尔曲线，它们需要一个控制点。具有两个控制点的贝塞尔曲线是三阶的。一阶贝塞尔曲线实际上是一条直线。没有有限阶的贝塞尔曲线可以形成完美的圆弧。

顺便说一句，二次曲线不是“椭圆或其他东西”，而是抛物线段。

如果你想有圆弧，你应该使用......好吧圆弧！要控制它，您需要更改半径，实际上您可以通过移动圆心来实现。

您将需要额外的逻辑来处理直线，因为圆弧永远不是直线。因此，如果拖动点在直线上方，您将绘制一条线，否则您将绘制具有适当半径的圆弧。

因此，假设您有以下情况：

![在此处输入图像描述](../Images/eea3350dd26ce8f13bac8b3c17a03645.png)

线段`ab`是矩形的直线并且`acb`是所需的弧线。`y`是段的高度，`x`是拖动的水平偏移量。我们正在寻找由三个点和定义的圆的`r`半径。`a``c``b`

现在角度`sda`是转角/4，`sd`is`r - x`和`ad`is `y / 2`。如果我们使用毕达哥拉斯，我们会得到：

```
r^2 = (r-x)^2 + (y/2)^2
=>
r^2 = (r-x)(r-x) + (y/2)^2
=>
r^2 = r^2 - 2rx + x^2 + (y/2)^2
=>
r^2 = r^2 - 2rx + x^2 + (y^2/4)
=>
0 = - 2rx + x^2 + (y^2/4)
=>
2rx = x^2 + (y^2/4)
=>
r = (x^2 + (y^2/4)) / 2x
=>
r = ((x^2) / 2x) + ((y^2/4) / 2x)
=>
r = (x/2) + ((y^2/4) / 2x)
=>
r = (x/2) + (y^2/8x) 
```

正如你所看到的，什么时候`x`是 0，我们有除以 0。这就是为什么当这种情况发生时你必须切换到画直线。

我们找到的公式（`r = (x/2) + (y^2/8x)`）您将能够确定圆的半径来绘制圆弧。找到中心点是微不足道的......

要找到角度，您可以根据自己的喜好使用正弦定律或余弦定律，两者都可以很好地工作。您可以选择使用三角形`asb`、三角形`asd`或三角形`adc`（绿色）来查找角度。

对于一个简单的方法，让我们继续三角形`asd`，让我们使用正弦定律：

```
r / sin(turn/4) = (y/2) / sin(θ/2) 
```

由于四分之一圈的正弦为 1，我们可以替换它：

```
=>
r / 1 = (y/2) / sin(θ/2)
=>
1 = (y/2) / sin(θ/2) 
```

现在，解决它的角度：

```
=>
sin(θ/2) = (y/2)
=>
θ/2 = asin(y/2) 
```

调用函数绘制圆弧时，起始角度为-θ/2，结束角度为θ/2。

注意：所有这些都是为矩形的右侧进行的，其他边需要调整。

# wordpress - htaccess 重定向到空白页

> ID：14452016
> 
> 赞同：0
> 
> 时间：2013-01-22T05:17:29.973
> 
> 标签：wordpress, .htaccess, mobile

最近我的 wordpress[网站](http://www.orbitaltraffic.com.au)被黑了，手机被重定向到一个*令人讨厌*的网站。我以前对.htaccess 没有任何了解，但我读到罪魁祸首会在那里。确实如此，所以我删除了 .htaccess 文件中的所有内容。但它完全停止工作，所以我找到了这个通用的 wordpress 重定向代码。代码是

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
</IfModule>

# END WordPress 
```

现在从台式机查看时它工作正常，但每当从移动设备查看时，它都会重定向到空白页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:27:07.153

听起来您的旧 .htaccess 文件中可能有一个特定的移动重定向规则，现在该文件已被删除和/或有一些特定的 WordPress 代码处理重定向。

理想情况下，您将从备份中恢复您的文件。但是，如果您没有备份，则必须进行一些调查。

我对 WordPress 不是特别熟悉，但我怀疑您可能安装了 WordPress 插件以获取特定于移动设备的功能或重定向。如果是这种情况，您应该重新安装它或联系该插件的维护人员。

否则，您可以找到用于重定向移动设备的各种不同的 Apache 重定向片段 - 一些[谷歌搜索](https://www.google.com/search?q=wordpress+mobile+redirect+.htaccess&aq=f&oq=wordpress+mobile+redirect+.htaccess&aqs=chrome.0.57j0j62l3j64.8357&sourceid=chrome&ie=UTF-8)可能会帮助您找到所需的内容。

# ruby-on-rails - 如何将整数值数组发送到 Rails 3 destroy 方法

> ID：14452020
> 
> 赞同：1
> 
> 时间：2013-01-22T05:18:01.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个 Rails 应用程序试图从数据库中销毁多个条目。我尝试过，

```
http://localhost:3000/users?ïds[]=1&ids[]=2 
```

在我的控制器中

```
def destroy

  ids = params[:ids]
  User.where(:id => ids).destroy_all

end 
```

我收到这样的错误，

ActionController::RoutingError (没有路由匹配 [DELETE] "/users"):

它显示路由错误..如何解决这个问题...提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:01:57.687

该`delete users/:id{.:format} => destroy`路线是针对会员的，即只有一项。

您需要为此创建收集路线和自定义操作。

```
#routes.rb
resources :users, :collection => {:delete_all => :delete}

#users_controller.rb
def delete_all
  ids = get_ids_from_params
  User.delete_all(["id in (?)", ids])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:18:43.023

更好的解决方案是添加单独的路线。如果您想重用销毁操作，您可以使用这种方法（id 必须基于整数）

**看法**

销毁单个用户

```
link_to(user_path(id), :method => :delete) #  user/1 
```

销毁多个用户

```
link_to(user_path(ids.join("-")), :method => :delete) #  user/1-2-3 
```

**控制器**

```
def destroy
  ids = params[:id].split("-")
  User.where(:id => ids).destroy_all
end 
```

现在您的销毁操作将适用于单个/多个 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:00:24.497

您提供的链接并没有说您可以将数组传递给默认的 DELETE 路由。它只是说您可以调用`.delete_all`ActiveRecord 对象的关系或数组。

现在，这不起作用的原因是您只有`resources :user`. 可以肯定的是，这包括一条 DELETE 路线。是`DELETE /users/:id`。我不知道你是否可以传递一个数组 as `:id`，但你肯定不能传递任何东西 as `:ids`，就像你试图做的那样——这与路线不匹配。

如果您确实需要按 id 删除多个记录的操作，您可能应该在您的路由文件中添加一个自定义路由。我认为请求的正确形式应该是 ，如此处所述`users/destroy_all?ids[]=1&ids[]=2`，[并且](http://www.spacevatican.org/2008/7/18/parametrised-to-the-max/)路线可能看起来像这样：

```
resources :users do
  delete '/users/destroy_all/:ids' => 'users#destroy_all'
end 
```

我还没有真正尝试过，它可能不起作用。

# javascript - 发送下拉列表的值，其中包含用于计算总计的描述和数字

> ID：14452025
> 
> 赞同：0
> 
> 时间：2013-01-22T05:18:22.563
> 
> 标签：javascript, drop-down-menu

我有一个表单，我无法控制要编辑的 php。我需要它，以便在它发送值时发送项目的描述，但我需要该值来添加总计字段的价格。有没有办法进行设置，以便我可以发送项目的描述，但仍将值保留为数字，以便添加总数？

```
 <div id="cid_7" class="form-input">
      <select class="form-dropdown validate[required]" onchange="code(1)" style="width:150px" id="input_7" name="q7_ticketOptions">
        <option>  </option>
        <option value="300"> VIP Floor Seats - $300.00 </option>
        <option value="40"> Section 101 Upper Level - $40.00 </option>
        <option value="60"> Section 101 Mid Level - $60.00 </option>
        <option value="150"> Section 101 Lower Level - $150.00 </option>
        <option value="40"> Section 102 Upper Level - $40.00 </option>
        <option value="60"> Section 102 Mid Level - $60.00 </option>
        <option value="150"> Section 102 Lower Level - $150.00 </option>
        <option value="40"> Section 103 Upper Level - $40.00 </option>
        <option value="60"> Section 103 Mid Level - $60.00 </option>
        <option value="150"> Section 103 Lower Level - $150.00 </option>
        <option value="20"> Section 104 Upper Level - $20.00 </option>
        <option value="60"> Section 104 Mid Level - $60.00 </option>
        <option value="20"> Section 107 Upper Level - $20.00 </option>
        <option value="60"> Section 107 Mid Level - $60.00 </option>
        <option value="40"> Section 108 Upper Level - $40.00 </option>
        <option value="60"> Section 108 Mid Level - $60.00 </option>
        <option value="150"> Section 108 Lower Level - $150.00 </option>
        <option value="40"> Section 109 Upper Level - $40.00 </option>
        <option value="60"> Section 109 Mid Level - $60.00 </option>
        <option value="150"> Section 109 Lower Level - $150.00 </option>
        <option value="40"> Section 110 Upper Level - $40.00 </option>
        <option value="60"> Section 110 Mid Level - $60.00 </option>
        <option value="150"> Section 110 Lower Level - $150.00 </option>
        <option value="40"> Section 111 Upper Level - $40.00 </option>
        <option value="60"> Section 111 Mid Level - $60.00 </option>
        <option value="150"> Section 111 Lower Level - $150.00 </option>
        <option value="40"> Section 112 Upper Level - $40.00 </option>
        <option value="60"> Section 112 Mid Level - $60.00 </option>
        <option value="150"> Section 112 Lower Level - $150.00 </option>
        <option value="20"> Section 113 Upper Level - $20.00 </option>
        <option value="60"> Section 113 Mid Level - $60.00 </option>
        <option value="40"> Section 114 Upper Level - $40.00 </option>
        <option value="60"> Section 114 Mid Level - $60.00 </option>
        <option value="40"> Section 115 Upper Level - $40.00 </option>
        <option value="60"> Section 115 Mid Level - $60.00 </option>
        <option value="20"> Section 116 Upper Level - $20.00 </option>
        <option value="60"> Section 116 Mid Level - $60.00 </option>
        <option value="40"> Section 117 Upper Level - $40.00 </option>
        <option value="60"> Section 117 Mid Level - $60.00 </option>
        <option value="150"> Section 117 Lower Level - $150.00 </option>
        <option value="40"> Section 118 Upper Level - $40.00 </option>
        <option value="60"> Section 118 Mid Level - $60.00 </option>
        <option value="150"> Section 118 Lower Level - $150.00 </option>
      </select>
    </div>
  </li>
  <li class="form-line" id="id_23">
    <label class="form-label-left" id="label_23" for="input_23"> Quantity<span class="form-required">*</span></label>
    <div id="cid_23" class="form-input">
      <select class="form-dropdown validate[required]" onchange="code(2)" style="width:150px" id="input_23" name="q23_quantity">
        <option>  </option>
        <option value="1"> 1 </option>
        <option value="2"> 2 </option>
        <option value="3"> 3 </option>
        <option value="4"> 4 </option>
        <option value="5"> 5 </option>
        <option value="6"> 6 </option>
        <option value="7"> 7 </option>
        <option value="8"> 8 </option>
        <option value="9"> 9 </option>
        <option value="10"> 10 </option>
      </select>
    </div>
  </li>
  <li class="form-line" id="id_22">
    <label class="form-label-right" id="label_22" for="cost">Total &nbsp; &nbsp; $</label>
    <div id="cid_22" class="form-input">
      <input type="text" name="q22_total" id="cost" onfocus="this.blur()" style="width:50px"/> 
    </div>
  </li> 
```

这是Javasript：

```
<script type="text/javascript">
function code() { // forget the parameter
var varone = document.getElementById('input_7');
var vartwo = document.getElementById('input_23');
var cost = document.getElementById('cost');

var total = parseFloat(varone.value) * parseFloat(vartwo.value);
cost.value = total;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:51:49.437

好吧，如果您将所有这些计算保存在数据库中，那么首先您应该创建一个表'ticket_options'，您应该在其中将它提供在两列中，例如

'q7_ticketOptions' 的第 1 列，'ticketRates' 的第 2 列

```
<select class="form-dropdown validate[required]" onchange="code(1);,showUser(this.value);" style="width:150px" id="input_7" name="q7_ticketOptions">
 <option  selected="selected"  disabled="disabled">Choose TicketOptions</option>
        <?php
       $sql=mysql_query("select * from ticket_options order by id ASC");
        while($val=mysql_fetch_array($sql))
         {
         ?>
        <option> <?php print $val['q7_ticketOptions']; ?>
        </option>
        <?php  } ?>
   </select>  
  <div  align="right" id="txtHint"><strong>Choose ticketOptions </strong></div> 
```

比在页面的 head 部分创建此功能：

```
 <script>
  function showUser(str)
      {
        if (str=="")
          {
      document.getElementById("txtHint").innerHTML="";
  return;
 }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
  }
 else
  {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
     xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
}
    }
 xmlhttp.open("GET","getrate.php?q="+str,true);
  xmlhttp.send();
 }
    </script>

 <script> 
```

然后创建一个php页面'getrate.php'。并编写以下代码：

```
 <?php
   $q=$_GET["q"];

    $con = mysql_connect('localhost', 'root', '');
    if (!$con)
    {
   die('Could not connect: ' . mysql_error());
    }

  mysql_select_db("database", $con);

 $sql="SELECT * FROM ticket_options WHERE q7_ticketOptions = '".$q."'";

  $result = mysql_query($sql);

    while($row = mysql_fetch_array($result))
       {

        ?>
  <input type="text" style="text-align:right" name="t_rate" value="<?php echo  $row['ticketRates'] ;  ?>" id="tax0" size="5" />

 <?php

    }

   mysql_close($con);
    ?> 
```

它是如何工作的：当您从选择框名称=“q7_ticketOptions”中选择选项时，它会在一个新框中显示您的票价，而不是使用下一个下拉列表名称=“q23_quantity”进行计算希望它会对您有所帮助。

# python - 有没有更快的方法来循环遍历一个集合并在一个句子中替换 MWE？- Python

> ID：14452032
> 
> 赞同：3
> 
> 时间：2013-01-22T05:18:55.340
> 
> 标签：python, loops, dictionary, set, nlp

任务是对由多个单词（aka `Multi-Word Expressions`）组成的表达式进行分组。

给定 MWE 字典，我需要在检测到 MWE 的输入句子中添加破折号，例如

```
**Input:** i have got an ace of diamonds in my wet suit .
**Output:** i have got an ace-of-diamonds in my wet-suit . 
```

目前我遍历排序的字典，看看 MWE 是否出现在句子中，并在出现时替换它们。但是有很多浪费的迭代。

有更好的方法吗？一种解决方案是产生所有可能的 n-gram 1st，即`chunker2()`

```
import re, time
mwe_list =set([i.strip() for i in codecs.open( \
            "wn-mwe-en.dic","r","utf8").readlines()])

def chunker(sentence):
  for item in mwe_list:
    if item or item.replace("-", " ") in sentence:
      #print item
      mwe_item =  '-'.join(item.split(" "))
      r=re.compile(re.escape(mwe_item).replace('\\-','[- ]'))
      sentence=re.sub(r,mwe_item,sentence)    
  return sentence

def chunker2(sentence):
    nodes = []
    tokens = sentence.split(" ")
    for i in range(0,len(tokens)):
        for j in range(i,len(tokens)):
            nodes.append(" ".join(tokens[i:j]))
    n = sorted(set([i for i in nodes if not "" and len(i.split(" ")) > 1]))

    intersect = mwe_list.intersection(n)

    for i in intersect:
        print i
        sentence = sentence.replace(i, i.replace(" ", "-"))

    return sentence

s = "i have got an ace of diamonds in my wet suit ."

time.clock()
print chunker(s)
print time.clock()

time.clock()
print chunker2(s)
print time.clock() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:47:31.247

我会尝试这样做：

*   对于每个句子，构建一组 n-gram，直到给定长度（列表中最长的 MWE）。
*   现在，只需执行`mwe_nmgrams.intersection(sentence_ngrams)`并搜索/替换它们。

您不必通过迭代原始集合中的所有项目来浪费时间。

* * *

这是一个稍微快一点的版本`chunker2`：

```
def chunker3(sentence):
    tokens = sentence.split(' ')
    len_tokens = len(tokens)
    nodes = set()

    for i in xrange(0, len_tokens):
        for j in xrange(i, len_tokens):
            chunks = tokens[i:j]

            if len(chunks) > 1:
                nodes.add(' '.join(chunks))

    intersect = mwe_list.intersection(n)

    for i in intersect:
        print i
        sentence = sentence.replace(i, i.replace(' ', '-'))

    return sentence 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:25:20.863

首先，2 倍的改进：因为您将 MWE 替换为带连字符的版本，所以您可以预处理字典 (wn-mwe-en.dic) 以消除集合中 MWE 中的所有连字符，从而消除一个字符串比较。如果您允许在句子中使用连字符，那么您还必须对其进行预处理，大概是在线处理，以收取小罚。这应该将您的运行时间减半。

接下来，一个小的改进：不可变元组通常比集合或列表更快地迭代（它们是可变的，迭代器必须在每一步检查内存中元素的移动）。如您所愿， set() 转换将消除重复项。元组位将在内存中固定它，允许 python 解释器及其编译的库进行低级迭代优化。

最后，在进行所有比较之前，您可能应该将句子和 MWE 解析为单词或标记，这将减少单词平均长度所需的字符串比较数（如果您的单词长度为 4 个字符，则为 4x平均的）。您还可以嵌套另一个循环来搜索 MWE 中的第一个单词作为共享该第一个单词的所有 MWE 的锚点，从而减少所需的字符串比较的长度。但我会把这个最大的份额留给你对真实数据进行实验。并且根据解释器与编译库的效率，在 python 级别执行所有这些拆分嵌套循环实际上可能会减慢速度。

所以这是前两个简单的“确定”赌注的结果。尽管进行了预处理，但应该快 2 倍，除非你的句子很短。

```
mwe_list = set(i.strip() for i in codecs.open("wn-mwe-en.dic", "r", "utf8").readlines())
mwe_list = tuple(mwe.replace('-', ' ').strip() for mwe in mwe_list)
sentence = sentence.replace('-', ' ').strip()

def chunker(sentence):
  for item in mwe_list:
    if item in sentence:
    ... 
```

Couldn't find a .dic file on my system or I'd profile it for you.

# php - 使用图像按钮的 onClick 事件调用 jQuery 函数

> ID：14452034
> 
> 赞同：1
> 
> 时间：2013-01-22T05:18:57.073
> 
> 标签：php, jquery

我有一个表格，其中动态数据表是用 PHP 构建的。在每一行中都有一个图像，当单击该图像时，它会通过单击事件调用一个 jQuery 函数。

例如，如果图像的 id 为 eventnfo_0，我有一个这样的函数：

```
$("#eventnfo_0").click(function() 
```

只要我为每一行定义了点击事件，一切都可以正常工作。问题是，我需要使其动态化，因为行数可能会有所不同，因此为每一行构建一个如上所述的单独函数是不可行的。

我的想法是必须有一种方法可以从 onclick 事件中调用 jQuery 函数并传递行号，但到目前为止，还没有骰子。

我确信这不是一项不常见的任务，但我的搜索没有任何运气。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:20:48.843

有很多方法可以做到这一点...在每个 img 中调用同一个类并将其用作选择器...

```
$('.yourClassName').click(function(){alert($(this).attr('id'));}); 
```

**或者**

```
 $("[id^='eventnfo_']").click(function(){
     alert($(this).attr('id'));
 }); 
```

因为它是动态添加的，所以这可能会有所帮助..

```
$(document).on('click',"[id^='eventnfo_']".click(function(){
     alert($(this).attr('id'));
 }); 
```

**更新**

您可以将`data`属性用于行号并从 jquery 中获取。

说这是你的html。

```
 <img id="eventnfo_0" data-rownumber="1"/> 
```

和jQuery

```
$("[id^='eventnfo_']").click(function(){
     alert($(this).data('rownumber')); //this will alert 1
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:22:26.857

```
$("[id^='eventnfo_']").click(function(){
   alert(this.attr('id'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:46:30.263

如果您正在寻找无法使用的动态行`.click`，您应该使用`.on`首选方法。

JS代码

```
$("#table_id").on("click","tr [id^='eventnfo_']", function(){
 //your code goes here.
}); 
```

上面称为 jQuery 事件委托。[阅读更多](https://stackoverflow.com/questions/14322342/jquery-event-delegation-in-1-7-2)

# unix - 在Unix中的文件中逐行添加数据

> ID：14452035
> 
> 赞同：0
> 
> 时间：2013-01-22T05:18:57.773
> 
> 标签：unix

我从一个命令中提取文件名，它返回许多文件名，我将它们放入一个文件代码中：

```
echo `find ${FILE_SYSTEM}/${dir_name}/${sub_dir_name} -type f -size +${BADFILES_SIZE} -exec ls -1lutr {} \; | sort -rn | awk '{print $9}'` >> Somefile.txt 
```

这里的问题是我没有在每一行上获取文件名。它在 1 行上给出了两个文件名。但我想将每个文件名放在 1 行。

例如：

```
/informatica/ETD/PC9/scripts/kamil/temp/temp1.txt /informatica/ETD/PC9/scripts/kamil/temp/temp2.txt 
```

我得到如上所示的文件名，我想要如下所示。

```
/informatica/ETD/PC9/scripts/kamil/temp/temp1.txt
/informatica/ETD/PC9/scripts/kamil/temp/temp2.txt 
```

请给你的建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:42:39.710

问题是您正在使用`echo`和反引号。不！将`echo`其所有参数（似乎是两个文件的列表）扁平化为一行输出。

错误的：

```
echo `find ${FILE_SYSTEM}/${dir_name}/${sub_dir_name} -type f -size +${BADFILES_SIZE} -exec ls -1lutr {} \; | sort -rn | awk '{print $9}'` >> Somefile.txt 
```

对：

```
find ${FILE_SYSTEM}/${dir_name}/${sub_dir_name} -type f \
     -size +${BADFILES_SIZE} -exec ls -1lutr {} + |
sort -rn |
awk '{print $9}' >> Somefile.txt 
```

# mysql - 在每次更新时触发触发，而不仅仅是一列

> ID：14452037
> 
> 赞同：2
> 
> 时间：2013-01-22T05:19:01.313
> 
> 标签：mysql, sql, database, triggers

我在 MySQL 表中有一个触发器。表有大约 20 列。

```
DELIMITER $$
CREATE
DEFINER=`root`@`localhost`
TRIGGER `completion_date_update`
BEFORE UPDATE ON `orders`
FOR EACH ROW
BEGIN
  IF NEW.`order_status` = 'COMPLETED' THEN
    SET NEW.`completion_date` = NOW();
  END IF;

  IF NEW.`order_status` != 'COMPLETED' THEN
    SET NEW.`completion_date` = NULL;
  END IF;
END$$ 
```

我想要的是这个触发器**仅**在更新`completion_date`列时更新列。如果更新了任何其他列，则此触发器不应执行任何操作。 实际发生的是，此触发器会在任何列更新时进行更新。**`order_status`
`completion_date`**

 **谁能向我解释为什么会发生这种情况以及我做错了什么？

`order_status`列不为空，可能的值如下：

```
enum('NEW','OPEN','COMPLETED','CANCELLED','REPLACED') 
```

默认为`'NEW'`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:43:06.937

您还应该比较是否`order_status`已更改并且新值是`COMPLETED`

```
IF (NEW.order_status <> OLD.order_status) AND (NEW.order_status = 'COMPLETED') THEN 
    SET NEW.completion_date = NOW();
END IF; 
```

你可以删除`IF`下面的另一个。**

# javascript - window.print() 对话框不在 chrome 中显示图形

> ID：14452039
> 
> 赞同：0
> 
> 时间：2013-01-22T05:19:05.603
> 
> 标签：javascript

我必须打印一个有图表的报告，当我使用`window.print()`它时，它会在所有浏览器的预览中显示图表，但不是在 chrome 中。

我使用以下代码：

```
function Print(strid)
{
    var prtContent = document.getElementById(strid);
    var WinPrint =window.open('','','letf=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status=0');
    WinPrint.resizeTo(screen.width ,screen.height );
    WinPrint.document.write(prtContent.innerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();
    WinPrint.close();
    prtContent.innerHTML=strOldOne;
} 
```

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:32:53.083

在 Opera 和 Chrome (Netscape) 中调用 print 之前，您需要一个 timout。

这是解决方案：

```
function init() {
  var objBrowse = window.navigator;
  if (objBrowse.appName == “Opera” || objBrowse.appName == “Netscape”) {
    setTimeout(‘window.print()’, 1000);
  } else {
    window.print();
    }
}
window.onload = init; 
```

参考：[http ://danielbergsten.wordpress.com/2011/01/11/javascript-window-print-does-not-work-in-operachrome-browser/](http://danielbergsten.wordpress.com/2011/01/11/javascript-window-print-does-not-work-in-operachrome-browser/)

# actionscript-3 - TweenMax/TweenLite、onComplete 函数、onCompleteParams 和垃圾回收

> ID：14452043
> 
> 赞同：2
> 
> 时间：2013-01-22T05:19:25.120
> 
> 标签：actionscript-3, actionscript, gsap

当我创建一个补间时，有时我会做这样的事情：

`TweenMax.to(greyCircle, SELECT_TRANSITION_TIME, { alpha:0, onComplete: function ():void
{ isSelectedTransitioning = false; greyCircle.visible = false; } });`

有时我使用 onCompleteParams 传入参数。

我的问题是这样的：

现在补间对象（由静态函数 TweenMax.to 创建）具有对这个匿名函数的引用，并且可能还有 onCompleteParams 中的一些对象，现在在垃圾收集期间将不再收集函数和参数对象，即使补间可能已经完成？

如果传入的函数不是匿名的，对 GC 有什么影响吗？

寻找内存泄漏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:15:59.283

谢谢，我在greensock论坛上创建了[这篇文章](http://forums.greensock.com/topic/7132-garbage-collection-oncomplete-oncompleteparams/)，这有助于我理解......

# debugging - 设备中的 Windows Phone 调试

> ID：14452046
> 
> 赞同：0
> 
> 时间：2013-01-22T05:19:37.210
> 
> 标签：debugging, windows-phone-7

我是一名 Windows Phone 应用程序开发人员。我的电脑没有足够的图形来支持 windows phone 模拟器。因此，我正在使用 windows phone 设备 (HTC HD7) 开发应用程序，从近 5 个月开始进行调试和测试。现在我的设备有时会自动挂起并自动关闭。设备使用开发目的而不是使用模拟器是否不好？我的设备是否因为连续使用而出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:25:44.713

我认为将设备用于开发目的不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:30:26.180

看起来设备有故障 - 我会把它送去维修。我当然没有听说过调试会导致设备出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:06:55.897

Do check if your internal storage is about getting full. Also if you have minimum RAM config, try not using multiple apps while debugging. Probably this should help.

And nonetheless, you can just visit a technician and get your phone thoroughly checked for issues.

# python - 函数传递空白列表作为参数而不是单元素列表

> ID：14452049
> 
> 赞同：1
> 
> 时间：2013-01-22T05:19:56.790
> 
> 标签：python, function, functional-programming

我正在编写一个函数，将字符串解析为另一个函数使用的列表。它执行的操作之一是将字符附加到（有时是深度递归）列表中特定递归深度（由名为 的变量定义的深度）的字符串`lvl`。这个操作是一个名为的函数`listSurgery`，它应该被一个索引列表调用，该列表指示下一个列表在前一个列表中的位置，最终索引告诉深度列表中的哪个索引执行操作，被调用索引的空白列表，我不知道为什么。它应该被调用的列表是`[-1]`，但调试显示它被调用了`[]`。这是代码，缩写：

```
def listAssign(lst,index,item):
    """Assigns item item to list lst at index index, returns modified list."""
    lst[index] = item
    return lst

def listInsert(lst,index,item):
    """Inserts item item to list lst at index index, returns modified list."""
    print "listInsert just got called with these arguments:",lst,index,item
    if index == 'end':
        index = len(lst)
    lst.insert(index,item)
    return lst

def listSurgery(lst,indices,f,*extraArgs):
    """Performs operation f on list lst at depth at indices indices, returns modified list."""
    print "listSurgery just got called with these arguments:",lst,indices,f,extraArgs
    parent = lst
    for index in indices[:-1]:
        parent = parent[index]
    parent = f(parent,indices[-1],*extraArgs)
    return listSurgery(lst,indices[:-1],listAssign,parent)

def parseStringToList(s):
    """Takes in a user-input string, and converts it into a list to be passed into parseListToExpr."""
    # ...
    l = [] # List to build from string; built by serially appending stuff as it comes up
    b = True # Bool for whether the parser is experiencing spaces (supposed to be True if last character processed was a space)
    t = False # Bool for whether the parser is experiencing a string of non-alphanumeric characters (supposed to be True if last character was a non-alphanumeric character)
    lvl = 0 # Keeps track of depth at which operations are supposed to be occurring
    for c in s:
        if c == ' ': # If c is a space, ignore it but send signal to break off any strings currently being written to
            b = True
        # Some elifs for c being non alphanumeric
        else: # If c is alphanumeric, append it to the string it's working on
            print c,"got passed as an alphanumeric; lvl is",lvl
            assert c.isalnum()
            if b or t: # If the string it's working on isn't alphanumeric or doesn't exist, append a new string
                l = listSurgery(l,[-1]*lvl + ['end'],listInsert,'')
                b, t = False, False
            l = listSurgery(l,[-1]*(lvl+1),lambda x,y,z:listAssign(x,y,x[y]+z),c)
        print l
    return l

while op != 'exit' and op != 'quit': # Keep a REPL unless the user types "exit" or "quit", in which case exit
    op = raw_input("> ")
    if op == 'help':
        pass # Print help stuff
    elif op in {'quit','exit'}:
        pass
    else:
        print str(parseStringToList(op)) 
```

`python -tt code.py`我用和 typed调用了代码`1+1=2`，这就是我得到的：

```
> 1+1=2
1 got passed as an alphanumeric; lvl is 0
listSurgery just got called with these arguments: [] ['end'] <function listInsert at 0x10e9d16e0> ('',)
listInsert just got called with these arguments: [] end 
listSurgery just got called with these arguments: [''] [] <function listAssign at 0x10e9d10c8> ([''],)
Traceback (most recent call last):
  File "analysis.py", line 276, in <module>
    print str(parseStringToList(op))
  File "analysis.py", line 218, in parseStringToList
    l = listSurgery(l,[-1]*lvl + ['end'],listInsert,'')
  File "analysis.py", line 63, in listSurgery
    return listSurgery(lst,indices[:-1],listAssign,parent)
  File "analysis.py", line 62, in listSurgery
    parent = f(parent,indices[-1],*extraArgs)
IndexError: list index out of range 
```

谁能解释一下？为什么`listSurgery`得到`[]`而不是`[-1]`？`lvl`是`0`，此时应该传递的参数是`[-1]*(lvl+1)`。甚至不要介意为什么它被调用`['']`而不是`'1'`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:30:23.357

你`lvl`是 0，所以`[-1]*lvl + ['end']`是`['end']`，并且`indices[:-1]`是`['end'][:-1]`。现在 ['end'] 是长度为 1 的列表，因此`['end'][:-1]`与 相同`['end'][:1-1]`，与 相同`['end'][:0]`。这评估为空列表。

# c - 为什么 64 位 Ubuntu 中的 8 字节数组 (C) 占用 16 字节？

> ID：14452052
> 
> 赞同：4
> 
> 时间：2013-01-22T05:20:08.243
> 
> 标签：c, 64-bit, x86-64, 32bit-64bit, sizeof

我最近一直在（重新学习）较低级别的 CS 材料，并且一直在探索缓冲区溢出。我创建了一个具有 8 字节数组的基本 C 程序`char buffer[8];`。然后我使用 GDB 探索和反汇编程序并逐步执行。我在 64 位版本的 Ubuntu 上，我注意到我的 8 字节字符数组实际上在内存中以 16 字节表示 - 高位都只是 0。

例如，`0xDEADBEEF 0x12345678`与我可能期望的那样表示 8 字节数组不同，它实际上类似于`0x00000000 0xDEADBEEF 0x00000000 0x12345678`.

我做了一些谷歌搜索，并能够让 GCC 将我的程序编译为 32 位程序（使用`-m32`标志） - 这导致预期的 8 个字节正常。

我只是在寻找关于为什么 8 字节字符数组在 64 位系统上以 16 字节表示的明确解释。是因为最小字长/可寻址单元是 16 字节（64 位），而 GDB 只是基于 8 字节字长打印？

希望这很清楚，但如果需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T06:50:30.683

64 位系统旨在将所有内存对齐到 16 字节边界（16 字节堆栈对齐是 System-V ABI 的一部分），对于堆栈分配，有两个部分，首先，堆栈本身需要对齐，其次是任何然后分配尝试保持这种对齐。

这解释了为什么 8 字节数组在堆栈上变成 16 字节的第一部分，以及为什么它被分成两个 8 字节的 qword，这有点难说，因为您没有提供任何代码（汇编或C) 关于这个缓冲区的使用。并且尝试使用 mingw64 复制它提供了 16 字节对齐，但不是您看到的有趣布局。

当然，由于缺少 ASM 而产生的另一种可能性是 GDB 显示的是 2xQWORD，即使它实际上是 2xDWORD（换句话说，尝试使用`p/x (char[8])`转储内容......）。

# backbone.js - 骨干.js - 当我更改名称属性时，没有任何更新并且更改的功能不会触发

> ID：14452053
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:20:33.187
> 
> 标签：backbone.js

> **可能重复：**
> [Backbone.js - 名称更改时未触发更改](https://stackoverflow.com/questions/14453219/backbone-js-change-not-triggering-while-the-name-change)

我做了一个函数来学习骨干......为此，我在本地制作了一个“json”并在我的 fetch 函数中调用它。我也每 10 秒调用一次 fetch 函数。除此之外，在这两者之间，我手动更新我的“本地 json”，更改后`fetch`应该让我更新的东西，但它没有让我。

我还添加了一个函数来触发，虽然名称发生了`attribute`变化，但也没有在 josn 更新名称时触发

这两者都让我感到困惑，我没有一个好的教程来学习这个......任何人帮助我解决这个问题或建议我实现两者的正确方法？

代码 ：

```
(function($){

var list = {};

list.model = Backbone.Model.extend({
  defaults:{
    name:'need the name'
  }
});

list.collect = Backbone.Collection.extend({
  model:list.model,
  url : 'data/names.json',
  initialize:function(){
    this.fetch();
    this.keepUpdate();
  },
  keepUpdate:function(){
    var that = this;
    var updateData = function(){
      that.fetch();
      myTimeout = setTimeout(updateData,10000);
    }
    var myTimeout = setTimeout(updateData,10000);
  }
});

list.view = Backbone.View.extend({
  initialize:function(){
    this.collection = new list.collect();
    this.collection.on("reset", this.render, this);
    this.collection.on('change:name',function(){ console.log('name changed')}); // not triggers while i change the name attrb..
  },
  render:function(){
    _.each(this.collection.models, function(data){
      console.log(data.get('name')); // no update getting here..
    })
  }
});

var newView = new list.view();    

})(jQuery) 
```

# vb.net - VB.NET 对返回数据集而不是字符串的异常处理

> ID：14452054
> 
> 赞同：0
> 
> 时间：2013-01-22T05:20:34.163
> 
> 标签：vb.net, exception, types, exception-handling, dataset

我的程序抛出了一个我应该处理的错误。但我无法返回字符串消息，因为它是一个返回数据集的函数：

```
Public Function getUserInfo(ByValue testUserIdAs String) As DataSet
    Dim dsUseInfo As DataSet = New DataSet()
    Try
        Dim objTestWs As New TestWebService.UserMaintenanceSoapClient
        dsUseInfo = objTestWs.dsGetUserInfo(TestOU, PAC, paramUserID)
        Return (dsUseInfo)
    Catch ex As Exception

        ' TEST FIX ERROR HANDLING -LIWM Please search how to return custom error. I want to return "userid already exists"
        Throw
    End Try 
```

我正在考虑投入：

```
If error
then return "Error Message" 
```

但我不能将它作为类型字符串返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:27:10.163

看起来你真的不知道如何处理异常`getUserInfo`，只是想将它传递给外部函数。

好吧，这是异常的好处：*它们会自动传递！*你不需要做任何事情，特别是，你不需要为此使用函数的返回值。*只是在你知道如何处理它之前*不要捕获异常。

* * *

例如，在您的情况下，只需处理*调用*函数中的错误：

*   从被调用函数中删除错误处理代码：

    ```
    Public Function getUserInfo(ByValue testUserIdAs String) As DataSet
        Dim objTestWs As New TestWebService.UserMaintenanceSoapClient
        Return objTestWs.dsGetUserInfo(TestOU, PAC, paramUserID)
    End Function 
    ```

*   并将其添加到调用函数中，即替换

    ```
    ...
    Dim dsUserInfo As DataSet
    dsUserInfo = getUserInfo()
    ... 
    ```

    和

    ```
    ...
    Dim dsUserInfo As DataSet
    Try
        dsUserInfo = getUserInfo()
    Catch ex As Exception
        ' Do whatever you want to do in case of an error here
        MsgBox("Could not get User Info: " & ex.Message)
        Return
    End Try
    ... 
    ```

* * *

如果您熟悉这项技术，您可以继续学习更高级的主题，例如抛出您自己的异常，就像 @Justin 建议的那样。只需确保在您自己的异常中包含有关*错误的原始原因的*信息，例如，通过将部分复制`ex.Message`到您自己的异常消息中并设置`innerException`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:28:30.810

你可以抛出一个通用异常：

```
Public Function getUserInfo(ByValue testUserIdAs String) As DataSet
    Dim dsUseInfo As DataSet = New DataSet()
    Try
        Dim objTestWs As New TestWebService.UserMaintenanceSoapClient
        dsUseInfo = objTestWs.dsGetUserInfo(TestOU, PAC, paramUserID)
        Return (dsUseInfo)
    Catch ex As Exception
        Throw New Exception("Custom message", ex)
    End Try 
```

这会将您赶上调用堆栈的异常消息设置为“自定义消息”，其中包含包含引发的原始异常的[内部异常。](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)

或者，如果您想抛出一个更具表现力的异常，您可以在其他地方创建一个自定义异常（通过从 System.Exception 继承）（因此，当您想要捕获此自定义类型时，您不必捕获所有异常）。

```
Public Class UserInfoNotFoundException
    Inherits System.Exception

    Public Sub New()
    End Sub

    Public Sub New(message As String)
        MyBase.New(message)
    End Sub

    Public Sub New(message As String, innerException As Exception)
        MyBase.New(message, innerException)
    End Sub
End Class 
```

例如，您可以抛出 UserInfoNotFoundException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:02:33.143

我会改变异常和错误的整个方法：

*   创建一个新程序集（项目）并在您的应用程序中引用它
*   声明接受您的个人数据类型的新共享事件（引用程序集）
*   声明至少一个对新事件执行 RaiseEvent 的共享函数（引用程序集）
*   为您做出相应反应的共享事件添加处理程序（主应用程序）
*   从主应用程序中调用您的函数，在您需要抛出错误/异常时传递您自己的参数

通过这种方式，您可以避免许多编程错误**并**集中错误和异常处理。

```
Public Module IDENTIFIERS

    Public Enum EvtMsg
        ERR_MYERR
        ERR_MYERR2
    End Enum

    Public Enum EvtClass
        EXCEPTION
        ERR
    End Enum
End Module

Public Class Events

    Shared Event Err(ByVal code As EvtMsg)
    Shared Event Exception(ByRef iEx As Exception)

    Public Shared Sub Raise(ByVal iEvtClass As EvtClass, ByVal iMsg As EvtMsg, Optional ByRef iEx As Exception = Nothing)
        If Not [Enum].IsDefined(GetType(EvtClass), iEvtClass) Then
            Dim ex As New ArgumentOutOfRangeException("unbekannte Event-Klasse '" & iEvtClass.ToString & "' übergeben", "iEvtClass")
            RaiseEvent Exception(ex)
        End If
        If Not [Enum].IsDefined(GetType(EvtMsg), iMsg) Then
            Dim ex As New ArgumentOutOfRangeException("unbekannte Event-Msg '" & iMsg.ToString & "' übergeben", "iMsg")
            RaiseEvent Exception(ex)
        End If

        Select Case iEvtClass
            Case EvtClass.ERR
                RaiseEvent Err(iMsg)
            Case EvtClass.EXCEPTION
                If iEx IsNot Nothing Then
                    RaiseEvent Exception(iEx)
                Else
                    Dim ex As New MissingFieldException("Raise() ohne Exception aufgerufen, iMsg : " & iMsg & "EvtClass : " & iEvtClass.ToString(), "iEx")
                    RaiseEvent Exception(ex)
                End If
        End Select
    End Sub

End Class 
```

现在，您可以轻松地在任何引用您的错误程序集的程序集中使用这些错误处理程序：

## 构造函数

```
AddHandler Events.Err, AddressOf Err
AddHandler Events.Exception, AddressOf Except 
```

## 类体

```
Private Sub Except(ByRef iEx As Exception)
    'do your stuff here
End Sub

Private Sub Err(ByVal Err As EvtMsg)
    'do your stuff here
End Sub 
```

# android - 为什么 bin 文件夹在我的 android 项目中占用更多空间？

> ID：14452060
> 
> 赞同：1
> 
> 时间：2013-01-22T05:21:46.240
> 
> 标签：android, apk

当我尝试将我的项目从 Eclipse 复制到 USB 时，它显示 30mb，我很震惊，因为我的项目中没有使用那么多资源。所以检查了整个项目，bin 文件夹占用 17mb 大小，它包含我在项目中的所有资源的副本......它还包含 apk 文件。我可以直接使用该 apk 文件来测试而不是导出 apk 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:30:41.040

> 为什么 bin 文件夹在我的 android 项目中占用更多空间？

在构建和清理 eclipse 自动生成的项目 bin 文件夹时。您将在[此处获得更多详细信息](https://stackoverflow.com/questions/9421699/what-is-a-bin-folder-for-in-android)

> 我可以直接使用该 apk 文件来测试而不是导出 apk 文件吗？

**是的，**您可以使用该 APK 文件通过安装在您的设备中来测试您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:36:12.160

在构建过程中，您的 Android 项目被编译并打包到一个 .apk 文件中，该文件是您的应用程序二进制文件的容器。Eclipse 会自动输出一个.apk 文件到项目的bin 文件夹中，所以占用更多内存。[你可以在这里](http://developer.android.com/tools/building/index.html)找到详细的解释。

# c# - Android活动的xml布局

> ID：14452065
> 
> 赞同：0
> 
> 时间：2013-01-22T05:21:55.557
> 
> 标签：c#, android, web, imageview, monodevelop

我正在为 Android 使用 MonoDevelop，并且有一个关于使用 Android 智能图像视图的问题。这里是万维网地址： http: [//loopj.com/android-smart-image-view/](http://loopj.com/android-smart-image-view/)

安装如下：

> 将 SmartImageView 添加到活动的 xml 布局中：

```
<com.loopj.android.image.SmartImageView
android:id="@+id/my_image" /> 
```

我可以提供一些帮助以正确执行此操作。我不确定该代码的确切位置。我目前正在使用 StandardControls 示例和 Gridview 活动。

**编辑**

我已将 SmartImageView 添加到 xml 布局文件中。当我编码以下行时：

```
SmartImageView myImage = (SmartImageView) findViewById(R.id.my_image); 
```

我收到以下错误：

> 找不到类型或命名空间名称“SmartImageView”（您是否缺少 using 指令或程序集引用？）

安装说：

> 从 github 下载最新的 .jar 文件并将其放在您的 Android 应用程序的 libs/ 文件夹中

我没有 libs/ 文件夹。我需要创建一个 /libs 文件夹吗？如果是这样，我在哪里创建这个文件夹？另外，一旦我有了这个文件夹，我是将 .jar 文件的内容提取到文件夹中，还是将 .jar 文件放入文件夹中？

目前，我刚刚将 .class 文件与该项目的其他 .class 文件一起提取到一个文件夹中。我很确定这是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:31:50.087

在 Eclipse 中转到您的项目

```
Project->res->layout->your_activity_layout.xml 
```

将**SmartImageView**添加到活动的**your_activity_layout.xml**布局中，如下所示：

```
<com.loopj.android.image.SmartImageView
    android:id="@+id/my_image" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
 /> 
```

**编辑：**

在您的活动中使用这种方式。

```
SmartImageView myImage = (SmartImageView) findViewById(R.id.my_image); 
```

从 URL 将图像加载到视图中：

```
myImage.setImageUrl("http://www..../XYZ.jpg"); 
```

# java - 如何使用这个没有提及我自己的类的堆栈跟踪在 Java 中进行调试？

> ID：14452068
> 
> 赞同：5
> 
> 时间：2013-01-22T05:22:04.740
> 
> 标签：java, swing

这是困难的一个。一位客户通过崩溃报告向我发送了此堆栈跟踪。它没有提到我的应用程序的类，所以我很困惑从哪里开始寻找。

我的应用程序是一个商业桌面应用程序。崩溃报告是匿名的，因此我无法轻松获得有关崩溃的更多信息。

编辑：一些谷歌搜索和线程跟踪让我得出结论，这是 Java 1.7 中的零星问题。正在寻找解决方案...

我该如何继续调试呢？

```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
        at java.util.TimSort.mergeHi(TimSort.java:868)
        at java.util.TimSort.mergeAt(TimSort.java:485)
        at java.util.TimSort.mergeCollapse(TimSort.java:410)
        at java.util.TimSort.sort(TimSort.java:214)
        at java.util.TimSort.sort(TimSort.java:173)
        at java.util.Arrays.sort(Arrays.java:659)
        at java.util.Collections.sort(Collections.java:217)
        at javax.swing.SortingFocusTraversalPolicy.enumerateAndSortCycle(SortingFocusTraversalPolicy.java:136)
        at javax.swing.SortingFocusTraversalPolicy.getFocusTraversalCycle(SortingFocusTraversalPolicy.java:110)
        at javax.swing.SortingFocusTraversalPolicy.getFirstComponent(SortingFocusTraversalPolicy.java:435)
        at javax.swing.LayoutFocusTraversalPolicy.getFirstComponent(LayoutFocusTraversalPolicy.java:166)
        at javax.swing.DefaultFocusManager.getFirstComponent(DefaultFocusManager.java:120)
        at javax.swing.LegacyGlueFocusTraversalPolicy.getFirstComponent(LegacyGlueFocusTraversalPolicy.java:132)
        at javax.swing.LegacyGlueFocusTraversalPolicy.getDefaultComponent(LegacyGlueFocusTraversalPolicy.java:150)
        at java.awt.FocusTraversalPolicy.getInitialComponent(FocusTraversalPolicy.java:169)
        at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:380)
        at java.awt.Component.dispatchEventImpl(Component.java:4731)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Window.dispatchEventImpl(Window.java:2719)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:696)
        at java.awt.EventQueue$4.run(EventQueue.java:694)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:40:50.790

正如在其他地方指出的那样，正在排序的集合中的项目（可能包括也可能不包括您自己的类，无法从堆栈跟踪中看出）违反了比较合同。

在从 Java 6 到 Java 7 的过渡期间，默认排序实现更改为[TimSort](http://en.wikipedia.org/wiki/Timsort)。这样做的影响之一是新的排序对比较契约更加严格，所以你（或者也许是 Swing）可能已经很久没有使用它了，但不再是了。

如果您无法解决比较合约的问题，您可以通过使用属性启动应用程序来回滚以使用 Java 6 样式排序

```
-Djava.util.Arrays.useLegacyMergeSort=true 
```

如 Java 7 发行说明的[兼容性部分](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#behavioral)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:35:27.027

java.lang.IllegalArgumentException：比较方法违反了它的一般约定！

我怀疑这意味着比较方法不是总排序。如，它违反了所有排序方法必须具有的三个属性之一：

1) 自反性 - 如果 x == y, y == x。如果 x > y，则 y < x。

2）身份：x == x。

3) 传递性：如果 x > y 且 y > z，则 x > z。

需要固定比较方法以遵守这些规律。当您查看它时，如何做到这一点还有待观察:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T03:10:54.937

根据新可比合同的规则，给定规则对于 compareTo 函数必须始终为真。这些规则是在 JDK 7 中引入的——

*   实施者必须确保`sgn(compare(x, y)) == -sgn(compare(y, x))`所有`x`和`y`. （这意味着当且仅当 compare(y, x) 抛出异常时 compare(x, y) 必须抛出异常。

    *   实现者还必须确保关系是可传递的：`((compare(x, y) > 0, (compare(y, z) > 0))`意味着 compare(x, z) > 0

    *   最后，实现者必须确保这`compare(x, y)==0`意味着`sgn(compare(x, z)) == sgn(compare(y, z))`所有 z。

现在，尽管这些规则似乎总是会得到遵守，但我们有很多例外。

考虑案例 - 在代码中实现 compareTo 函数 -

```
 return (int) (y - x) 
```

其中 x & y 是双倍的。让我们考虑一下`x = 2`，`y = 1.6`

这些值满足规则 1 和 2，但对于规则 3，请考虑`z = 2.4`

```
compare(x,y) = int(1.6-2)   = int(-0.4) = 0
compare(x,z) = int(2.4-2)   = int(0.4) = 0
compare(y,z) = int(2.4-1.6) = int(0.8) = 1. 
```

因此，违反了合同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T08:47:15.013

这是 Oracle 在 Java 中引入的一个已记录的错误。现在已经修复了。

我一直在使用的解决方法是在我的应用启动后立即设置相关的系统属性：

```
System.setProperty("java.util.Arrays.useLegacyMergeSort", "true"); 
```

该问题已在 Java 8u40 中修复，因此不再需要解决方法。

请参阅：[https ://bugs.java.com/bugdatabase/view_bug.do?bug_id=8048887](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8048887)

# mysql - Mysql存储过程仅第一次返回null

> ID：14452073
> 
> 赞同：4
> 
> 时间：2013-01-22T05:22:19.987
> 
> 标签：mysql, stored-procedures

这是一个名为`code`.

`p_code`列是父母的代码

![在此处输入图像描述](../Images/3dfe20cd339b18cdfe49d35cbecd1929.png)

并且存储过程应该返回一组`p_code`这样组合的记录；

![在此处输入图像描述](../Images/7666eaf50caf03e4295776e1178b6c9d.png)

该**过程除了第一次运行良好**（重新连接 MYSQL 后，它返回 null！）。它出什么问题了？

这是存储过程。

```
 BEGIN
 DECLARE _CODE bigint(20);
 DECLARE _P_CODE bigint(20);
 DECLARE _SORT bigint(20);
 DECLARE _pre_P_CODE bigint(20);
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET @CODE = NULL;

 SET _P_CODE = @CODE;
 SET _CODE = '';
 SET _SORT = 0;
 SET _pre_P_CODE = '';

 IF @CODE IS NULL THEN
  RETURN NULL;
 END IF;

 LOOP

  SELECT CODE, P_CODE, SORT, CODE_NAME, CODE_LEVEL
  INTO @CODE, @P_CODE, @SORT, @CODE_NAME, @CODE_LEVEL
  FROM CODE
  WHERE LANGUAGE = @LANGUAGE
  AND P_CODE = _P_CODE
  AND SORT > _SORT
  ORDER BY SORT limit 1;

  IF @CODE IS NOT NULL OR _P_CODE = @start_with THEN
   SET @level = @level + 1;
   RETURN @CODE;
  END IF;

  SET @level := @level - 1;

  SELECT CODE, P_CODE, SORT
  INTO _CODE, _P_CODE, _SORT
  FROM CODE
  WHERE CODE = _P_CODE;
 END LOOP;

END 
```

程序是这样调用的。此 SQL 将返回上面的第二张图片。

```
SELECT
    menu_connect_by_p_code() AS CODE, 
    @level as level, 
    @P_CODE as p_code, 
    @SORT as sort, 
    @CODE_NAME as CODE_NAME, 
    @CODE_LEVEL as CODE_LEVEL
FROM (
    SELECT
        @start_with := 6001,@LANGUAGE := 'en' ,
        @CODE := @start_with,
        @level := 0
) vars, code
WHERE @CODE IS NOT NULL 
```

我不明白为什么它**第一次返回 null**。MYSQL 的程序或某种错误有问题吗？

- - - - - - - - - - - - - - - - 编辑 - - - - - - - - - ------------------

RolandoMySQLDBA，rsanchez，我尝试了您的选择，但保持不变。它返回多行，有些列是 null 。

![在此处输入图像描述](../Images/33cae60992431c154fb6277f18450e3f.png)

------------------------------------------- 编辑2 ------------------ ------------------

你可以在这里看到：[http ://sqlfiddle.com/#!2/aa033/1](http://sqlfiddle.com/#!2/aa033/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:36:23.697

来自[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

因此，您可能需要更改：

```
SELECT
    @start_with := 6001,@LANGUAGE := 'en' ,
    @CODE := @start_with,
    @level := 0 
```

经过：

```
SELECT
    @start_with := 6001,@LANGUAGE := 'en' ,
    @CODE := 6001,
    @level := 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T03:54:30.200

我看到了发展的自然顺序

这是您的查询

```
SELECT
    menu_connect_by_p_code() AS CODE, 
    @level as level, 
    @P_CODE as p_code, 
    @SORT as sort, 
    @CODE_NAME as CODE_NAME, 
    @CODE_LEVEL as CODE_LEVEL
FROM (
    SELECT
        @start_with := 6001,@LANGUAGE := 'en' ,
        @CODE := @start_with,
        @level := 0
) vars, code
WHERE @CODE IS NOT NULL 
```

@CODE 很早就为 NULL 的唯一方法是，如果在调用内部 SELECT 查询之前首先评估存储过程。

也许您可以重新排列变量初始化的顺序

```
SET @start_with := 6001;
SET @LANGUAGE := 'en';
SET @CODE := @start_with;
SET @level := 0;
SELECT
    menu_connect_by_p_code() AS CODE, 
    @level as level, 
    @P_CODE as p_code, 
    @SORT as sort, 
    @CODE_NAME as CODE_NAME, 
    @CODE_LEVEL as CODE_LEVEL
FROM code
WHERE @CODE IS NOT NULL; 
```

试试看 ！！！

# 更新 2013-02-01 16:18 EDT

问题在于存储过程的这一部分：

```
IF @CODE IS NULL THEN
  RETURN NULL;
END IF; 
```

尝试将这些行注释掉，看看会发生什么！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:30:37.837

首先，这是一个函数而不是一个过程。

好吧，我尝试了小提琴-每次交替执行似乎都为空。

@CODE 为 NULL，因此当函数调用后发生赋值时，您的输出为 null。这可能是正在发生的事情。

如果罗兰多的方法行不通，那么你可以这样做。好吧，这会为您的执行增加一些时间，并且实际上更像是一种黑客行为。这应该可以工作，因为现在@Code 不能变为 null

```
SELECT * FROM
 (SELECT
    menu_connect_by_p_code() AS CODE, 
    @level as level, 
    @P_CODE as p_code, 
    @SORT as sort, 
    @CODE_NAME as CODE_NAME, 
    @CODE_LEVEL as CODE_LEVEL
FROM (
    SELECT
        @start_with := 6001,
        @CODE := @start_with,
        @level := 0
) vars, code
WHERE @CODE IS NOT NULL) InnerQuery 
```

可能是一个非常微不足道的问题，但可以使用更多调查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:04:12.630

根据 rsanchez 回答中给出的事实，函数调用在 SAME 语句中，带有“@level as level, ...”，因此不能保证函数调用将在该部分之前。

以下语句可能有效：

```
 select
        CODE, 
        @level as level, 
        @P_CODE as p_code, 
        @SORT as sort, 
        @CODE_NAME as CODE_NAME, 
        @CODE_LEVEL as CODE_LEVEL
    from (
      SELECT
        menu_connect_by_p_code() AS CODE, 
       FROM (
        SELECT
            @start_with := 6001,@LANGUAGE := 'en' ,
            @CODE := @start_with,
            @level := 0
       ) vars, code
      WHERE @CODE IS NOT NULL
   ) a 
```

# django - 使用 django 处理付款

> ID：14452076
> 
> 赞同：0
> 
> 时间：2013-01-22T05:22:52.003
> 
> 标签：django, payment-gateway

我正在尝试构建允许人们为他们从我的网站获得的服务付费的代码。我已经使用 django 中可用的 forms.Form 模型构建了表单。我还使用以下模式来构建我的视图。

```
if request.method == 'POST'
    form = ContactForm(request.POST) 
    if form.is_valid(): # All validation rules pass
        conn = urllib2.Request(payment_gateway_url,urllib.urlencode(my_dat_in_dict))
        f= urrlib2.urlopen(conn)
        all_results=f.read()

        return HttpResponseRedirect('/thanks/') # Redirect after POST
else:
    form = ContactForm() # An unbound form

return render(request, 'contact.html', {
    'form': form,
}) 
```

我面临的问题是我的表单提交正常，支付网关用一大堆 html 回复我，帮助用户在响应此表单 POST 时选择信用卡详细信息等（我不是的详细信息在我的网站上收集）。我可以在 all_results (f.read()) 中看到这一点。

我的问题是我如何向用户显示此页面，因为我是通过我的表单 POST 得到的。我是否应该将此响应保存在 html 文件中并将 HTTPResponse 重定向到该页面。我假设 HTTPResponseRedirect 更适合完整的事务，而不是中间响应。

那么，基本上我该如何处理用户将被发送到支付网关站点然后在完成程序后返回我的站点的情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:29:32.123

首先，我想说，如果你住在美国，请查看 Stripe（或类似的东西）。您描述付款流程的方式似乎有点过于复杂。

话虽如此，如果（我怀疑是这种情况），从大多数返回的 HTML 以正确的格式显示在您的网站上，您可以将其粘贴到 HttpResponse（必须是 sprint）

返回 HttpResponse(html)

否则，使用 BeautifulSoup、Scrape.py 或类似的东西在 RAM 中对其进行格式化，然后使用 HttpResponse。我不会将其写入文件系统进行修改。

# google-maps-api-3 - google.maps.DirectionsRenderer ：如何在一张地图中渲染所有停止点

> ID：14452083
> 
> 赞同：0
> 
> 时间：2013-01-22T05:23:47.817
> 
> 标签：google-maps-api-3

嗨，我有一张显示穿梭方向的地图，下面是地图和方向初始化代码

```
var centerLatlng = new google.maps.LatLng(-34.942799,138.553365);
  var myOptions = {
  zoom: 13,
  center: centerLatlng,

    mapTypeId: google.maps.MapTypeId.ROADMAP,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  },
  panControl:true,
  streetViewControl: false,
    OverviewMapControlOptions:
    {
      opened: true
    }
  };
  var map = new google.maps.Map(document.getElementById("map-guide-google-map"),  myOptions); 
```

以下是显示方向

```
function DisplayDirection(directionList){
    var directionsService = new google.maps.DirectionsService();

    var directionsDisplay = new google.maps.DirectionsRenderer({
      markerOptions: {
        visible:false
      }
    });

    directionsDisplay.setMap(map);

    //Request 0
    var increaseSize = 7;
    var index =0;
    var theoryCurrentEndIndex = index + increaseSize;
    var maxmimumIndex = directionList.length-1;
    var origin = directionList[index];
    var destination = theoryCurrentEndIndex < maxmimumIndex?directionList[theoryCurrentEndIndex]:directionList[maxmimumIndex];
    var actualCurrentEndIndex = theoryCurrentEndIndex < maxmimumIndex?theoryCurrentEndIndex: maxmimumIndex;
    var waypoints = new Array();
    if(actualCurrentEndIndex-index>1) {
      for(var i=index+1;i<actualCurrentEndIndex;i++) {
        waypoints.push(

            {
              location:directionList[i],
              stopover:true}

        );
      }
    }

    var request = {
      origin: origin,
      destination: destination,
      waypoints : waypoints,
      provideRouteAlternatives:false,
      travelMode: google.maps.TravelMode.WALKING,
      unitSystem: google.maps.UnitSystem.METRIC
    }

    directionsService.route(request, function(result, status) {
      if(status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(result);
      }
    }) ;
} 
```

如何重置 LatLongBounds 以显示所有停止点并使地图居中

# c# - 无法加载 DLL 找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

> ID：14452084
> 
> 赞同：0
> 
> 时间：2013-01-22T05:24:03.957
> 
> 标签：c#, c++, dll

我只想使用 c++ 函数，例如渲染。所以我从 c++/clr 制作了 dll 文件，并将它放在 c# 项目目录 /bin 中。但它没有用。并突发错误（HRESULT 异常：0x8007007E）

请告诉我一些有用的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:26:45.953

1-您的位置不正确

2 - 你有依赖。也许在您的 Visual Studio 2003 中，您的项目路径中有另一条路径。检查它们，看看它是什么。包含一些文件夹，您需要找到哪个文件夹。

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6793785a-ec98-4453-a62b-f1a85195ec05/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6793785a-ec98-4453-a62b-f1a85195ec05/)

[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:26:57.820

听起来您缺少 C++ dll 所依赖的其他 DLL。请参阅[http://social.msdn.microsoft.com/Forums/en-US/clr/thread/14dc569b-b761-4021-b3a7-559138daaf71/](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/14dc569b-b761-4021-b3a7-559138daaf71/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:42:42.907

可能是某种 COM 注册问题，为了进一步调查，我建议使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.110%29.aspx)（Fusion 是编译器的名称，在我相信它被称为 clr 之前），它是一个很好的程序集绑定失败分析工具，它引导我在很多场合都找到了问题的根源。

# ios - 如何在 iOS 中为圆形路径上的标签设置动画？

> ID：14452086
> 
> 赞同：2
> 
> 时间：2013-01-22T05:24:10.487
> 
> 标签：ios, objective-c, cabasicanimation, catransformlayer

在我看来，我一直在为 uiLabel 设置动画。

实际上我只想在圆形路径上为我的标签/文本设置动画。我在互联网上搜索了很多，但找不到任何像我的问题一样的好教程或示例。我已经完成了 CAShapeLayer (circle) 从 0 增加到它的最大值....

同样，我希望我的标签/文本从圆形路径中的初始点开始移动，并在完成一圈后返回其初始点。

希望我已经非常准确地解释了我的问题……如果有任何遗漏或无法理解的话。请问我。

感谢期待。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T05:27:51.310

嗨，iOmi，我只是用谷歌搜索，我发现最好的问题类似于你的[这个](https://stackoverflow.com/questions/7947529/coreanimation-calayer-and-catextlayer-combination)

Bellow这是一个jin的答案希望它可以帮助你

```
 CAShapeLayer* circle = [[CAShapeLayer alloc] init];
        CGMutablePathRef path = CGPathCreateMutable();
        CGRect textRect = CGRectMake(self.view.bounds.size.width/4, (self.view.bounds.size.height-self.view.bounds.size.width/2)/2, self.view.bounds.size.width/2, self.bounds.size.width/2);
        float midX = CGRectGetMidX(textRect);
        float midY = CGRectGetMidY(textRect);
        CGAffineTransform t = CGAffineTransformConcat(
                                CGAffineTransformConcat(
                                    CGAffineTransformMakeTranslation(-midX, -midY), 
                                    CGAffineTransformMakeRotation(-1.57079633/0.99)), 
                                CGAffineTransformMakeTranslation(midX, midY));
        CGPathAddEllipseInRect(path, &t, textRect);
        circle.path = path;
        circle.frame = self.bounds;
        circle.fillColor = [UIColor clearColor].CGColor;
        circle.strokeColor = [UIColor blackColor].CGColor;
        circle.lineWidth = 60.0f;
        [self.layer addSublayer:circle];

        CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
        animation.duration = 15.0f;
        animation.fromValue = [NSNumber numberWithFloat:0.0f];
        animation.toValue = [NSNumber numberWithFloat:1.0f];
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        [circle addAnimation:animation forKey:@"strokeEnd"];

        [circle release];

        UILabel* label = [[UILabel alloc] init];
        label.text = @"Test Text";
        label.font = [UIFont systemFontOfSize:20.0f];
        label.center = CGPathGetCurrentPoint(path);
        label.transform = CGAffineTransformMakeRotation(1.57079633);
        [label sizeToFit];
        [self.layer addSublayer:label.layer];

        CAKeyframeAnimation* textAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
        textAnimation.duration = 15.0f;
        textAnimation.path = path;
        textAnimation.rotationMode = kCAAnimationRotateAuto;
        textAnimation.calculationMode = kCAAnimationCubicPaced;
        textAnimation.removedOnCompletion = NO;
        [label.layer addAnimation:textAnimation forKey:@"position"]; 
```

我只是创建一个演示它的屏幕截图是：-

![在此处输入图像描述](../Images/9412dce7ef577f5db5d83b2e14a70627.png)

**这是演示链接**

[http://www.sendspace.com/file/dq5i1e](http://www.sendspace.com/file/dq5i1e)

# java - Maven，Jar 不包含 MAIN 项目 jar

> ID：14452087
> 
> 赞同：0
> 
> 时间：2013-01-22T05:24:15.857
> 
> 标签：java, jakarta-ee, maven

我正在使用 Maven 来构建我的项目。我想创建包含一些依赖项的程序集 jar，所以我编写了自定义程序集描述符。

POM.XML

```
 <plugin> 
      <artifactId>maven-assembly-plugin</artifactId>  
      <configuration> 
        <archive> 
          <manifest> 
            <mainClass>com.guavus.exporter.Exporter</mainClass> 
          </manifest> 
        </archive>  
        <descriptors> 
          <descriptor>/Users/archit.thakur/Documents/Code_dev_cdn_mapreduce/exporter/src/main/assembly/configurator.xml</descriptor>  
          <!--    <descriptorRef>jar-with-dependencies</descriptorRef>      --> 
        </descriptors>  
        <finalName>Exporter-${project.version}</finalName>  
        <appendAssemblyId>false</appendAssemblyId> 
      </configuration>  
      <executions> 
        <execution> 
          <id>make-assembly</id>  
          <phase>package</phase>  
          <goals> 
            <goal>single</goal> 
          </goals> 
        </execution> 
      </executions> 
    </plugin>  
    <plugin> 
      <artifactId>maven-jar-plugin</artifactId>  
      <version>2.3.1</version>  
      <executions> 
        <execution> 
          <id>default-jar</id>  
          <phase>none</phase> 
        </execution> 
      </executions> 
    </plugin> 
```

汇编描述符：

```
 <assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2        http://maven.apache.org/xsd/assembly-1.1.2.xsd">  
          <id>dep</id>  
          <formats> 
            <format>jar</format> 
          </formats>  
          <dependencySets> 
            <dependencySet> 
              <outputDirectory>${project.artifactId}</outputDirectory>  
              <unpack>true</unpack>  
              <useProjectArtifact>true</useProjectArtifact>  
              <includes> 
                <include>log4j:log4j</include>  
                <include>org.slf4j:slf4j-api</include>  
                <include>ch.qos.logback:logback-access</include>  
                <include>ch.qos.logback:logback-classic</include>  
                <include>ch.qos.logback:logback-core</include> 
              </includes> 
            </dependencySet> 
          </dependencySets> 
        </assembly> 
```

问题是，现在它正在创建只有依赖 jar 的 jar。而不是从我的代码中制作 jar 并将其包含在最终的 jar 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:55:51.240

尝试使用[Shade](http://maven.apache.org/plugins/maven-shade-plugin/)插件：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>1.2.2</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>com.app.MyMainClass</mainClass>
                            </transformer>
                        </transformers>
                        <filters>
                            <filter>
                                <artifact>org.eclipse.swt.win32.win32:x86</artifact>
                                <excludes>
                                    <exclude>META-INF/eclipse.inf</exclude>
                                    <exclude>META-INF/ECLIPSE.RSA</exclude>
                                    <exclude>META-INF/ECLIPSE.SF</exclude>
                                </excludes>
                            </filter>
                        </filters>
                    </configuration>
                </execution>
            </executions>
            <configuration>
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>

    </resources>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:56:20.017

```
<fileset>...my classes... </fileset> 
```

在程序集配置器/描述符中添加标签解决了这个问题。

感谢这条评论：

> 也许尝试为目标/类目录中的所有内容添加一个文件集？（不记得 POM 变量引用临时抱歉...） –[查理](https://stackoverflow.com/users/504685/charlie)1 月 22 日 7:21

# mysql - 如何模拟可能不会在不久的将来结束的结束日期

> ID：14452088
> 
> 赞同：0
> 
> 时间：2013-01-22T05:24:19.280
> 
> 标签：mysql, user-interface

如何模拟可能不会在不久的将来结束的结束日期。我有一个开始（强制）和结束日期，结束日期可以由用户指定或标记为没有结束日期。

1.  您如何对此进行建模，以便我可以有效地处理查询。我是否应该将结束日期保留为空并相应地进行自省。
2.  如何在 UI 中呈现这样的结束日期选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:06:35.887

你有两个选择

1.  将缺失的结束日期建模为 null
2.  定义一个 MAX_DATE（比如 2999 年 12 月 31 日），它在未来很远，永远不会到达。

第一个选项“感觉”更正确，但使范围检查更复杂。第二个选项使范围检查更容易，但需要在 UI 中进行特殊处理才能将其显示为“无结束日期”。

任你选。

# javascript - 在绘制分形时迭代地更改画布中的 fillStyle 颜色

> ID：14452092
> 
> 赞同：1
> 
> 时间：2013-01-22T05:24:54.547
> 
> 标签：javascript, canvas, recursion, fractals

我正在使用以下代码使用 HTML5 画布元素生成毕达哥拉斯分形树：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <script src="jquery.js" type="text/javascript"></script>
        <style>
            #sketch
            {
            border: 1px solid black; 
            }
        </style>
        <script type="text/javascript">
        window.onload = function()
        {
            var canvas = document.getElementById("sketch");
            var context = canvas.getContext("2d");

            context.fillStyle = "rgba(0, 0, 200, 0.5)";
            context.beginPath();

            context.moveTo(450,550);
            context.lineTo(450,450);
            context.lineTo(550,450);
            context.lineTo(550,550);
            context.fill();

            fractal(context,[450,550],[450,450],[550,450],[550,550],5); 
        };

        function fractal(context,P1,P2,P3,P4,depth)
        {
            context.fillStyle = "rgba(0,0,200,"+(depth/8).toString()+")";
            context.save();
            if(depth < 0)
            {
                return null; 
            }

            /*Find C*/
            C = divide(add(divide(add(P1,P2),2),divide(add(P3,P4),2)),2);

            var V1 = divide(minus(C,P1),length(C,P1));
            var V2 = divide(minus(C,P4),length(C,P4));

            var P6 = add(P2,multiply(V2,length(P1,P2)/Math.sqrt(2)));
            var P7 = add(P6,multiply(V1,length(P1,P2)/Math.sqrt(2)));
            var P5 = add(P2,multiply(V1,length(P1,P2)/Math.sqrt(2)));
            var P9 = add(P3,multiply(V1,length(P1,P2)/Math.sqrt(2)));
            var P8 = add(P9,multiply(V2,length(P1,P2)/Math.sqrt(2)));

            context.moveTo(P2[0],P2[1]);
            context.lineTo(P6[0],P6[1]);
            context.lineTo(P7[0],P7[1]);
            context.lineTo(P5[0],P5[1]);
            context.fill();

            context.moveTo(P5[0],P5[1]);
            context.lineTo(P8[0],P8[1]);
            context.lineTo(P9[0],P9[1]);
            context.lineTo(P3[0],P3[1]);
            context.fill();

            fractal(context,P2,P6,P7,P5,depth-1);
            fractal(context,P5,P8,P9,P3,depth-1);
        }

        function multiply(v, num){
            return [v[0]*num, v[1]*num];
        }

        function divide(v, num){
            return [v[0]/num, v[1]/num];
        }

        function add(a, b){
            return [a[0]+b[0], a[1]+b[1]];
        }

        function minus(a, b){
            return [a[0]-b[0], a[1]-b[1]];
        }

        function length(a, b){
            return Math.sqrt(Math.pow(a[0] - b[0],2) + 
                Math.pow(a[1] - b[1],2));
        }
        </script>
        <title>Square</title>
    </head>
    <body>
        <canvas id="sketch" height="1000" width="1000"></canvas>
    </body>

</html> 
```

我每次迭代都会改变不透明度值。但我在结果中看不到它。

这个怎么解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:58:47.513

你真的很接近正确的解决方案。看这里：http: [//jsfiddle.net/mbessey/Wj4VH/](http://jsfiddle.net/mbessey/Wj4VH/)

这里的主要区别是在为每个方块启动 moveTo() 和 lineTo() 之前调用 beginPath()。所以，而不是：

```
context.moveTo(P2[0],P2[1]);
context.lineTo(P6[0],P6[1]);
context.lineTo(P7[0],P7[1]);
context.lineTo(P5[0],P5[1]);
context.fill();

context.moveTo(P5[0],P5[1]);
context.lineTo(P8[0],P8[1]);
context.lineTo(P9[0],P9[1]);
context.lineTo(P3[0],P3[1]);
context.fill(); 
```

你要：

```
context.beginPath()
context.moveTo(P2[0],P2[1]);
context.lineTo(P6[0],P6[1]);
context.lineTo(P7[0],P7[1]);
context.lineTo(P5[0],P5[1]);
context.fill();

context.beginPath()
context.moveTo(P5[0],P5[1]);
context.lineTo(P8[0],P8[1]);
context.lineTo(P9[0],P9[1]);
context.lineTo(P3[0],P3[1]);
context.fill(); 
```

你所做的实际上是创建一个包含所有正方形的大路径，然后用相同的颜色填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:34:20.683

**[Check This](http://jsfiddle.net/a6GCW/3/)**我已经改变了画布本身的不透明度，使其简单易行地实现目标。

添加 `rgba(0, 0, 200, 1)`和

```
 #sketch
    {
    border: 1px solid black;
    opacity: 0.3;
    } 
```

就足够了你想要的

# android - PhoneStateListener 永远不会在广播 android 中调用

> ID：14452093
> 
> 赞同：3
> 
> 时间：2013-01-22T05:24:57.747
> 
> 标签：android, android-emulator, broadcastreceiver, telephonymanager, phone-state-listener

我的广播被调用但没有调用 PhoneStateListener 我的代码在模拟器中运行时工作正常但是当我在实际设备上尝试它时 PhoneStateListener 从来没有接到电话，我对这个问题发疯了这是我的代码：

```
TelephonyManager telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE); //TelephonyManager object  
                            CustomPhoneStateListener customPhoneListener = new CustomPhoneStateListener();  
                            telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE); //Register our listener with TelephonyManager 
```

上面的代码在 onReceive() 方法中，这是我的类在 onReceive() 之外扩展 PhoneStateListener 但在广播类中。

```
public class CustomPhoneStateListener extends PhoneStateListener {  

        private static final String TAG = "CustomPhoneStateListener";  

        @Override  
        public void onCallStateChanged(int state, String phonenumber){  

            if(phonenumber!=null && phonenumber.length()>0) 
                incoming_nr=phonenumber;   
            act=new Call_RecorderActivity();

            switch(state){  
                case TelephonyManager.CALL_STATE_RINGING:  
                        Log.d(TAG, "CALL_STATE_RINGING");  
                        prev_state=state;  

                        break;  

                case TelephonyManager.CALL_STATE_OFFHOOK:  
                Log.d(TAG, "CALL_STATE_OFFHOOK");  
                prev_state=state;  

                break;  

                case TelephonyManager.CALL_STATE_IDLE:  
                     prev_state=state;
                     Log.d(TAG, "CALL_STATE_IDLE==>"+incoming_nr);

                    break;  
                   // Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT
                   // |Intent.FLAG_ACTIVITY_REORDER_TO_FRONT

            } //switch close
        }
} 
```

logcat 在来电时显示此内容

```
01-22 11:25:12.529: I/IncomingCallReceiver(1463): Bundle[mParcelledData.dataSize=168]
01-22 11:25:12.539: I/IncomingCallReceiver(1463): State: RINGING
01-22 11:25:12.539: I/IncomingCallReceiver(1463): Incomng Number: +9184848xxxx2
01-22 11:25:12.779: D/CustomPhoneStateListener(1463): CALL_STATE_IDLE==>+9184848xxxx2
01-22 11:25:16.299: I/IncomingCallReceiver(1463): Bundle[mParcelledData.dataSize=92]
01-22 11:25:16.299: I/IncomingCallReceiver(1463): State: OFFHOOK
01-22 11:25:18.849: I/IncomingCallReceiver(1463): Bundle[mParcelledData.dataSize=88]
01-22 11:25:18.849: I/IncomingCallReceiver(1463): State: IDLE 
```

任何与之相关的建议都将被接受提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:53:18.937

在调用回调之前，您的服务已被清理。你不应该真的依赖分配给你的任何东西在退出`BroadcastReceiver`后存在。`onReceive`你应该`CustomPhoneStateListener`输入`Service`or `Activity`。然后您可以使用`Intent`启动活动或服务来进行状态监控。

从`BroadcastReceiver`文档中，

> 从 onReceive() 返回后，BroadcastReceiver 不再处于活动状态，它的托管过程仅与在其中运行的任何其他应用程序组件一样重要。这一点尤其重要，因为如果该进程仅托管 BroadcastReceiver（用户从未或最近没有与之交互的应用程序的常见情况），那么在从 onReceive() 返回时，系统将认为其进程为空并主动终止以便资源可用于其他更重要的流程。

它在模拟器上工作的原因可能是因为模拟器上的进程通常较少，并且由于某种原因，它似乎不太积极地杀死进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:45:44.410

上述问题的解决方案是：

```
private final PhoneStateListener phoneStateListener = new PhoneStateListener() {  

    @Override 

    public void onCallStateChanged(int state, String incomingNumber) {  

        String callState = "UNKNOWN";  

        String myNumber = tm.getLine1Number();
        switch (state) {  

        case TelephonyManager.CALL_STATE_IDLE:  

            callState = "IDLE";
            if(Status!=""){
                Toast.makeText(mContext,"Call Ends " + incomingNumber,Toast.LENGTH_LONG).show();
            }
            break;  

        case TelephonyManager.CALL_STATE_RINGING: 
            Status = "RINGING";
            if (incomingNumber.startsWith("00")) {  
                Toast.makeText(mContext,"International Call- " + incomingNumber,Toast.LENGTH_LONG).show();  
                callState = "International - Ringing (" + incomingNumber+ ")";  
            } else {  
                Toast.makeText(mContext, "Local Call - " + incomingNumber, Toast.LENGTH_LONG).show();  
                callState = "Local - Ringing (" + incomingNumber + ")";  
            }  
            break;  
        case TelephonyManager.CALL_STATE_OFFHOOK:  

            try{
                String dialingNumber = mIntent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);  
                if(dialingNumber==null){
                    Status = "Recieve";
                    Toast.makeText(mContext, "Recieve call", Toast.LENGTH_LONG).show();
                }else{
                    Status = "Dialing";
                    if (dialingNumber.startsWith("00")) {  
                        Toast.makeText(mContext,"International - " + dialingNumber,Toast.LENGTH_LONG).show();  
                        callState = "International - Dialing (" + dialingNumber+ ")";  
                    } else {  
                        Toast.makeText(mContext, "Local Call - " + dialingNumber,Toast.LENGTH_LONG).show();  
                        callState = "Local - Dialing (" + dialingNumber + ")";  
                    }  
                }
            }catch(Exception e){}

            break;  

        }  

        Log.i(">>>Broadcast", "onCallStateChanged " + callState);  

        super.onCallStateChanged(state, incomingNumber);  

    }  

}; 
```

# eclipse - 如何通过命令行导出 RCP 应用程序

> ID：14452097
> 
> 赞同：0
> 
> 时间：2013-01-22T05:25:06.050
> 
> 标签：eclipse, rcp

我正在尝试自动化 RCP 应用程序的构建过程。目前，我的 RCP 项目中有“ApplicationName.product”文件。在文件的帮助下，我正在导出产品。但我想通过命令行导出产品。

有人对此有任何想法吗？？？？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:22:46.650

如果您不想使用 Maven：构建 RCP 产品的老式方法是基于 ant 的[PDE 构建](http://www.eclipse.org/pde/pde-build/)。[Markus Barchfeld 的文章](http://www.eclipse.org/articles/Article-PDE-Automation/automation.html)很好地描述了如何建立自己的构建——它已经很老了，但是自 Eclipse 3.0 以来 PDE 构建并没有太大变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:36:08.067

您可以使用 Tycho [http://eclipse.org/tycho/](http://eclipse.org/tycho/) 通过使用 Apache Maven 来管理您的 RCP 项目，然后您可以通过调用类似`mvn package`.

# android - android nmea速度的来源

> ID：14452098
> 
> 赞同：1
> 
> 时间：2013-01-22T05:25:13.443
> 
> 标签：android, performance, gps, nmea

我正在构建一个小型游艇赛车应用程序来测量我的逆风速度，速度相对较低，在 6-10 节范围内，并且固有的 GPS 位置误差导致报告速度的显着波动（这就是为什么我我会努力而不是使用手持 GPS 单元）。
因此，我试图通过使用 $GPRMC 语句中的 NMEA 纬度/经度和时间计算对 onNmeaReceived 事件（默认情况下发生在 1000 毫秒）的 5 次和 10 次调用的较长时间段内的速度来消除错误.

在将 NMEA 报告的速度与自上次事件以来计算的速度进行比较时，我发现它们有很大不同，所以我想知道 $GPRMC 句子中提供的 NMEA 速度是如何计算的？可能的答案可能是

*   从 GPS 多普勒速度推断？
*   计算为前一秒的距离/时间？
*   或者是其他东西....？

该文档对此事完全保持沉默。

使用安卓 4.0.3 三星 SGS 11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:29:13.143

GPS中的速度来自多普勒效应，它比位置本身准确得多。（这仅在设备移动时有效，越快越好）根据与时间相关的位置变化来确定速度，仅适用于 GPS 更高的速度。（> 10 公里/小时）。

同样适用于四个“课程”（标题）。

这些值总是来自 GPS 芯片，尽管在 API 方面几乎没有记录。

最后 x 调用的平均值有点简单，它应该是最后 x 秒。如果你没有得到一个位置，你仍然需要关闭平均窗口。当设备静止时，一些设备不报告任何位置，所以你迫不及待地想得到 x 个事件。

# clojure - 如何在 Clojure-CLR 1.4.1 中使用 .NET WebClient 调用

> ID：14452101
> 
> 赞同：1
> 
> 时间：2013-01-22T05:25:36.500
> 
> 标签：clojure, clojureclr

在问题中：[Idiomatic way to write .NET interop function](https://stackoverflow.com/questions/3622549/idiomatic-way-to-write-net-interop-function)我发现以下代码段：

```
(import '(System.Net HttpWebRequest NetworkCredential)
        '(System.IO StreamReader)) 
```

当我启动 REPL 并输入：

> （导入'（System.IO StreamReader））

一切正常。但是当我输入时：

> （导入'（System.Net HttpWebRequest））

（我不需要 NetworkCredential 功能）我得到：

```
My.ns=> (import '(System.Net HttpWebRequest))
Bad type
NullReferenceException Object reference not set to an instance of an object.  cl
ojure.lang.Util.NameForType (D:\work\clojure-clr-1.4.1-fix\Clojure\Clojure\Lib\U
til.cs:729) 
```

哦，我以前做过：

```
My.ns=> (System.Reflection.Assembly/LoadWithPartialName "System.Net")
#<RuntimeAssembly System.Net, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b
03f5f7f11d50a3a> 
```

那我还需要做什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:06:10.710

这是 1.4 中的错误。它来自于未正确处理可从多个程序集访问的类型。在这种情况下，`System.Net.HttpWebRequest`是在`System`程序集中。在加载程序集之前导入该类就可以了`System.Net`。加载`System.Net`程序集后，`HttpWebRequest`可以从两个程序集访问（感谢 中的`TypeForwardedTo`属性`System.Net`）。在 ClojureCLR 1.4.1 中，没有正确处理。

解决方案：

1.  在这样做之前不要加载`System.Net`或进行导入`HttpWebRequest` 。
2.  下载最新版本的 ClojureCLR ——该错误已修复。
3.  如果您需要保留 1.4.1 并且可以自己构建它，这是一个单行修复。查看 [https://github.com/clojure/clojure-clr/commit/38c34c2a60a63d5933386e412a250c5e8b879d5b](https://github.com/clojure/clojure-clr/commit/38c34c2a60a63d5933386e412a250c5e8b879d5b) 。

# php - 在php中屏蔽和分层图像

> ID：14452105
> 
> 赞同：3
> 
> 时间：2013-01-22T05:26:35.360
> 
> 标签：php, image-processing, gd

我想创建一个脚本，用户可以在其中上传图像并查看运动衫上的图像。例如：

![美味的毛衣](../Images/89bd7583da9936831ffeaab3c8063bea.png)

我将从这样的空白运动衫图像开始：

![空白的](../Images/35f5e29341d80308b365f6f94d85da58.png)

广告然后想要覆盖上传的图像，保留运动衫的细节和阴影。

这在 PHP 中可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:46:33.987

1.  你需要 - 白色图像 png - 透明图像，其中内部部分是透明的，外部部分是白色 bg。

2.  使用以下插件进行覆盖和保存。

[http://www.addyosmani.com/resources/canvasphoto/](http://www.addyosmani.com/resources/canvasphoto/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:46:53.493

这就是我将如何做到的。

使您提供的第二张图像在下面看到的绿色区域上半透明。

![运动衫](../Images/097ae3da9ff003039bf17de745d1a7e1.png)

图像的其余部分应该没有不透明度（白色背景）。您可以从这里做的是在运动衫上绘制要预览的图像。然后你可以在上面画我上面提到的图像。这将提供蒙版类型效果，您可以从那里调整它。

虽然这可以完成工作，但我强烈建议您查看 HTML5 Canvas 进行预览，因为与 PHP 的 GD 库相比，它具有更多的多功能性，并且不需要任何服务器资源。您可以实时编辑预览，甚至可以将画布保存为图像。

# iphone - 将 AdSupport、social、account 框架导入 Snow Leopard 上的 Xcode 4.2

> ID：14452107
> 
> 赞同：1
> 
> 时间：2013-01-22T05:26:47.360
> 
> 标签：iphone, ios5, xcode4.2

我正在使用 AddThis sdk 进行社交共享，内部需要添加`Adsupport,Social and Account`框架。

但由于 mac mini 较旧，我仍在使用 Snow Leopard OS。

我有`xcode 4.2.`

我试图将以上所有框架从我朋友的 mac Lion OS 机器手动复制到我的机器框架文件夹中。

我已将所有框架添加到我的项目中，但没有检测到。它只是显示这些新框架的所有文件的丢失文件错误。

任何人都可以帮助我吗？或者

xCode 4.2 不会在 leopard OS 中支持这些框架。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:41:01.317

您提到的框架，即 Social 和 AdSupport 存在于 iOS 6.0 中，这就是为什么它们不存在于您的项目中。为此，您应该在 iOS 6.0 中实现您的项目，并将目标保持为 iOS 5.0 或根据需要。

[检查此链接](https://stackoverflow.com/questions/12777226/add-social-and-adsupport-framework-in-ios5-and-ios-6-both)

# hadoop - 如何在 Hadoop 中将机器设置为 Task-Tracker

> ID：14452114
> 
> 赞同：-4
> 
> 时间：2013-01-22T05:27:10.690
> 
> 标签：hadoop

我是 hadoop 框架的新手，我正在关注“Hadoop in Action”一书。我能够使用 Ubantu 设置伪分布式环境。我对 Task-Tracker 和 DataNode 有一个疑问。

我们在 core-site.xml 中分配 NameNode，在 mapred-site.xml 中分配 Job-Tracker。我们将在哪里定义任务跟踪器和 DataNode。假设我有一台机器“xye3434”，我想将它用作任务跟踪器，我该如何定义它？xml中有一些设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:31:16.107

所有的 TastTrackers/DataNodes 都应该在 Hadoop 安装文件夹的**conf/slaves文件中指定。**bin/start-dfs.sh 和 bin/start-mapred.sh 脚本将遍历从属文件，然后使用无密码 ssh 登录到机器，然后在所有从属上启动适当的守护进程。

# java - 简化 URL 按钮

> ID：14452122
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:28:10.303
> 
> 标签：java, swing, exception-handling, uri

我正在尝试在将链接到我的 Github 的应用程序中添加指向“关于”窗口的链接。我有点知道这个过程，但是，它的作用似乎很复杂，我必须输入所有错误捕获。我确信 URI 语法是正确的，有没有办法跳过这个捕获？这个变量保持最终状态，除非资源位置的语法发生变化，否则应该没问题

代码：

```
 //TODO: Simplify?
        String gitLocation = "https://github.com/DanubeRS";
        try {
            final URI gitUri = new URI(gitLocation);

            //Add the github button action (link to site)
            githubButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    try {
                        Desktop.getDesktop().browse(gitUri.resolve(gitUri));  //Try to open URL
                    } catch (IOException e1) {
                        //URI unresolvable
                        e1.printStackTrace();
                    }
                }
            });
        } catch (URISyntaxException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:50:22.900

您可以使用方便的方法[URI.create(String str)](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html#create%28java.lang.String%29)，它`URISyntaxException`用`IllegalArgumentException`. 来自 JavaDoc：

> 提供此方法用于已知给定字符串是合法 URI 的情况，例如在程序中声明的 URI 常量，因此如果字符串不这样解析将被视为编程错误。直接抛出 URISyntaxException 的构造函数应该用于从用户输入或其他可能容易出错的源构造 URI 的情况。

`IOException`抛出的表示`Desktop.browse()`没有设置默认浏览器。您可能应该通过通知用户来优雅地处理这个问题。

# asp.net - 如何从子窗口将值设置为 asp:datagrid？

> ID：14452125
> 
> 赞同：1
> 
> 时间：2013-01-22T05:28:46.220
> 
> 标签：asp.net, datagrid

感谢您打开此页面:)

我是 asp 新手，正在寻找将一些文本值设置到 asp:datagrid 单元格中的方法。

我想从需要显示一些信息的数据网格中打开一个子窗口。

但问题是，我无法将一些信息从子窗口发送到父窗口。

如果它只是一个表单控件，它非常简单。

我可以像这样使用

```
window.opener.document.getElementById("TextBox1").value = "value"; 
```

但我猜数据网格更复杂......

如果您对此有一些提示，请告诉我。

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:32:12.207

**[如何在不使用 MasterPage 刷新页面的情况下将值从子窗口传递到父窗口](http://weblogs.asp.net/ssnair/archive/2010/05/16/how-to-pass-value-from-child-window-to-parent-window-without-refreshing-the-page-using-masterpage.aspx)**

**[本文介绍了可用于从子浏览器窗口访问父浏览器窗口中存在的数据的基本选项，反之亦然。](http://www.codeproject.com/Articles/25388/Accessing-parent-window-from-child-window-or-vice)**

# php - drupal_set_message($node->field_product_stock['und'][0]['value']); 这句话是什么意思

> ID：14452126
> 
> 赞同：0
> 
> 时间：2013-01-22T05:29:06.190
> 
> 标签：php, drupal

如何使用 drupal_set_message 获取有关节点的信息，即其内容类型及其所有字段等？另外，该语句中的 ['und'][0]['value'] 是什么意思？drupal_set_message($node->field_product_stock['und'][0]['value']);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:36:09.210

`drupal_set_message`将设置一条反映已执行操作状态的消息。如果调用该函数时不带参数，则该函数返回所有设置的消息而不清除它们。

参数

`$message`：消息应以大写字母开头，并始终以句点“.”结尾。

`$type`: 消息的类型。以下值之一是可能的：

```
'status'
'warning'
'error' 
```

`$repeat`：如果这是 FALSE 并且消息已经设置，那么消息将不会重复。

根据你的代码

`$node->field_product_stock['und'][0]['value']`应该包含您要显示的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:27:22.927

1/ 如 Dasun 所写`drupal_set_message`，将显示您作为`$message`参数传递给用户的字符串。

如果要输出整个节点，例如调试，最好使用`devel`模块及其辅助函数。`dpm`会将节点漂亮地打印到消息区域，即

```
dpm( $node ); 
```

有关更多信息，请参阅[http://api.drupal.org/api/devel/devel.module/function/dpm/7](http://api.drupal.org/api/devel/devel.module/function/dpm/7)。

2/ 'und' 与 D7 中的多语言支持有关。它是“未定义”的缩写。由于一个字段可以有多个值，它包含一个数组，并且该数组可以包含一个具有多个键的数组。字段中使用的默认键是“值”。

因此，如果您有一个包含西班牙语值和键“target_id”的多值字段，并且您希望获得第二个值，您可以这样做：

`[ 'es' ][ 1 ][ 'target_id' ]`

# android - 视频暂停时不会反映 VideoView 布局更改

> ID：14452131
> 
> 赞同：0
> 
> 时间：2013-01-22T05:30:11.107
> 
> 标签：android, orientation, android-videoview

我有一个布局，它有一个视频视图作为它的子视图和另一个在触摸时出现的导航栏。

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/main_background"
    android:orientation="vertical">

    <RelativeLayout android:id="@+id/mediaplayer_navigation_bar_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/main_header"
        android:orientation="horizontal">

        <Button
            android:id="@+id/mediaplayer_navigation_back"
            android:layout_width="80dp"
            android:layout_height="35dp"
            android:layout_centerVertical="true"
            android:layout_alignParentLeft="true"
            android:ellipsize="end"
            android:layout_marginLeft="5dp"
            android:singleLine="true"
            android:paddingLeft="5dp"
            style="@style/text_shadow"
            android:text="Back"
            android:textColor="@color/navigation_bar_text_color"
            android:textSize="15sp"
            android:textStyle="bold"
            android:background="@drawable/back_arrow_button_click"
            android:onClick="mediaplayerBackButtonClickHandler" />

        <TextView
            android:id="@+id/mediaplayer_navigation_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_centerInParent="true"
            android:background="@color/tranceparent"
            android:paddingLeft="20dp"
            style="@style/text_shadow"
            android:textColor="@color/navigation_bar_text_color"
            android:textSize="20sp"
            android:textStyle="bold" />

    </RelativeLayout>

    <VideoView
            android:id="@+id/my_video"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_centerInParent="true" >
    </VideoView>
</RelativeLayout> 
```

我面临的问题是，当设备处于纵向模式并且导航栏可见时，我暂停视频并切换到横向并触摸以使导航栏消失，黑条在该栏所在的视频上. 我尝试无效化，设置布局参数，但似乎没有任何改变，这可能是设备特定的问题吗？我目前正在使用 HTC Sensation 进行测试

**更新**

此问题在三星 S2 中不可重现，但在华硕选项卡中类似场景中的其他视图问题:(

# ios - 无需用户帐户的 iOS 安全 API

> ID：14452137
> 
> 赞同：3
> 
> 时间：2013-01-22T05:30:47.670
> 
> 标签：ios, objective-c, ruby-on-rails, api

我知道这是一种流行的问题类型，但我找不到任何其他可以满足我特定需求的问题。

### 背景

*   我有一个 iOS 应用程序，可以从我的 Ruby on Rails 开发的 Web API 中检索数据。
*   我想将我的 API 私有化，以便其他来源无法使用来自我的 API 的数据（即，其他人开发了一个应用程序来访问我的 API url 并将数据用于他们的客户）

### 要求

*   （硬）私有 API，以便只有授权客户端（仅来自 iOS 应用程序）才能访问来自 API 的数据。
*   （困难）用户不必创建用户/密码帐户。
*   （软）我读到 SSL 在尝试获得 Apple 批准的应用程序时可能会成为一场噩梦。由于这是一个小型应用程序（截至目前），我宁愿*不*依赖 SSL。 **但是**，如果您能指出我在iOS 上*轻松*使用 SSL 处理所有 API 流量的正确方向，我会全力以赴）。

！***如果您失去兴趣，请跳到问题的最后 :)***！

### 到目前为止的想法

*想法1：*

1.  iOS 从 Web 请求令牌，发送一些 UUID
2.  WEB 响应 API_Token 和 Token_Expiry
3.  WEB在数据库中存储UUID、API_Token和Token_Expiry
4.  iOS在本地存储API_Token、Token_Expiry
5.  iOS 通过发送 UUID 和 API_Token 请求数据
6.  WEB验证UUID和API_Token，用数据响应
7.  重复步骤 5-6 直到 API_Token 过期，然后从步骤 1 开始重复

*想法2：（单次使用API​​_Token）*

1.  iOS 从 Web 请求令牌，发送一些 UUID
2.  WEB 响应 API_Token
3.  WEB在数据库中存储UUID和API_Token
4.  iOS 在本地存储 API_Token
5.  iOS 通过发送 UUID 和 API_Token 请求数据
6.  WEB 验证 UUID 和 API_Token，以数据和 NEW TOKEN 响应
7.  iOS 获取数据并在本地保存 NEW TOKEN
8.  无限期重复步骤 5-7

### 这些想法的问题

我相信 iOS 不再有完美的 UUID 解决方案。如果 UUID 可以随时间变化（或者如果用户有多个 iOS 设备），则可能会出现身份验证问题。

如果黑客获得了 API 密钥，我不希望他们能够访问数据（因此产生了过期或新令牌的想法）。

### 问题

您对在 Rails 和 iOS 之间创建安全 API 有什么建议？

* * *

***编辑1：***

我仍然很惊讶这不是一直出现的事情。必须有大量的应用程序与 API 通信，但不强制用户注册。如果 SSL 或 OAuth 是唯一*合适的*解决方案，请辩护。我全是耳朵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:02:06.533

除了跨设备跟踪用户的问题，我不知道如何提供一个相当简单和可靠的机制，除了一个游戏中心帐户，让我们讨论一种将你的 API 关闭到其他应用程序的简单方法。

握手将涉及您的客户端提交一个 URL 请求，该请求可能已经包含一个特定于设备的令牌来识别您的用户。来自您的服务器的响应将是字符串形式的随机一次性质询。客户端和服务器都知道一个重要的函数，它生成一个响应字符串作为挑战的函数，可能还有用户令牌，从而验证客户端。

该机制绝不是安全的，但实施起来很简单，并且会给其他人提供一些障碍。您绝对应该验证用户令牌的形式以获得一些额外的保护。例如，如果您的令牌是 MAC 地址，则请求必须采用 MAC 地址的形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:25:09.380

我最终根据在网上找到的一些建议推出了自己的解决方案（请参阅最后的参考链接）。

1.  iOS 检查它是否有 auth_token。如果否，则进行第 2 步，否则进行第 4 步。
2.  iOS 通过发送只有我的 iOS 应用程序和服务器知道如何生成的特殊签名来请求 auth_token。
3.  WEB 验证特殊签名并创建一个唯一的 auth_token 保存在数据库中并发送回 iOS 应用程序。
4.  iOS 通过发送 auth_token 和生成的签名（同样只有我的 iOS 和服务器知道如何生成）来请求数据。
5.  WEB 验证数据库中是否存在 auth_token。然后它会生成一个 auth_signature 并验证请求来自我的 iOS 应用程序。
6.  WEB 使用数据和新生成的 auth_token 进行响应。
7.  WEB 从数据库中删除以前的 auth_token。
8.  iOS 在本地保存新的 auth_token 并使用数据。
9.  重复步骤4-8；如果响应是未经授权的 401，则在步骤 1 重新开始。

### 参考：

@keighl 的这个 GitHub Gist 让我开始了，迄今为止我发现的最好的例子： [https ://gist.github.com/4336694](https://gist.github.com/4336694)

Railscast：保护 API： [http ://railscasts.com/episodes/352-securing-an-api](http://railscasts.com/episodes/352-securing-an-api)

# user-interface - 搜索信息时如何处理空间

> ID：14452141
> 
> 赞同：0
> 
> 时间：2013-01-22T05:31:04.367
> 
> 标签：user-interface, user-input, usability

我有几个具有以下命名约定的对象。

```
a. "Purchase Order 1"
b. "Purchase Order 2" 
c. "Purchase Order 3"
d. " Purchase Order 4" (space at the start)
e. "Purchase Order 5 " (space at the end)
f. "Purchase Order 10"
g. "Purchase Order 11"
h. "Purchase Order  12"
i. "Purchase Order13" 
```

1.  按“订单”搜索应列出所有内容
2.  允许“5”或“P”是否有意义，或者我应该在搜索之前去掉它们。
3.  我需要搜索所有以“1”开头的订单。这样我就可以避免 Order13。

用户界面应如何处理空间作为输入（尤其是在开头、结尾）。需要输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:41:14.393

如果都是PO，或许用户只需要输入号码即可。也许是一个下拉菜单或选择器，所以他们甚至不需要输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:46:51.403

您的对象应该有一个指示订单号的字段。

如果这是不可能的并且您所拥有的只是一个文本字段，那么您必须在将用户输入传输到后端时对其进行[修整。](http://en.wikipedia.org/wiki/Trim_%28programming%29)

还应将修剪应用于存储中的文本值。然后你发明一些匹配机制。这种机制将取决于您用来访问数据的技术，如果它是一个数据库，那么一些[LIKE](http://www.w3schools.com/sql/sql_like.asp) SQL 语句。

# python - 如何测量python中代码行之间的时间？

> ID：14452145
> 
> 赞同：131
> 
> 时间：2013-01-22T05:31:40.897
> 
> 标签：python, time, profiling, measure

所以在Java中，我们可以做[How to measure time by a function to execute](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute)

但是它是如何在 python 中完成的呢？要测量代码行之间的时间开始和结束时间？这样做的东西：

```
import some_time_library

starttime = some_time_library.some_module()
code_tobe_measured() 
endtime = some_time_library.some_module()

time_taken = endtime - starttime 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2013-01-22T05:34:22.113

如果要测量 CPU 时间，可以使用[`time.process_time()`](https://docs.python.org/library/time.html#time.process_time)Python 3.3 及更高版本：

```
import time
start = time.process_time()
# your code here    
print(time.process_time() - start) 
```

第一次通话会打开计时器，第二次通话会告诉您已经过了多少秒。

还有一个 function `time.clock()`，但[自 Python 3.3 起已弃用](https://docs.python.org/3/library/time.html#time.clock)，将在 Python 3.8 中删除。

有更好的分析工具，例如`timeit`and `profile`，但是 time.process_time() 将测量 CPU 时间，这就是您要问的。

如果您想改为测量挂钟时间，请使用`time.time()`.

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2019-01-16T09:06:18.627

您还可以使用`time`库：

```
import time

start = time.time()

# your code

# end

print(f'Time: {time.time() - start}') 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2018-10-10T22:49:11.663

借助一个小型便利类，您可以**测量在缩进行中花费的时间，**如下所示：

```
with CodeTimer():
   line_to_measure()
   another_line()
   # etc... 
```

在缩进的行完成执行后将显示以下内容：

```
Code block took: x.xxx ms 
```

**更新：**您现在可以使用`pip install linetimer`then获取课程`from linetimer import CodeTimer`。请参阅[此 GitHub 项目](https://github.com/justasb/linetimer)。

上述类的代码：

```
import timeit

class CodeTimer:
    def __init__(self, name=None):
        self.name = " '"  + name + "'" if name else ''

    def __enter__(self):
        self.start = timeit.default_timer()

    def __exit__(self, exc_type, exc_value, traceback):
        self.took = (timeit.default_timer() - self.start) * 1000.0
        print('Code block' + self.name + ' took: ' + str(self.took) + ' ms') 
```

然后，您可以命名要测量**的代码块：**

```
with CodeTimer('loop 1'):
   for i in range(100000):
      pass

with CodeTimer('loop 2'):
   for i in range(100000):
      pass

Code block 'loop 1' took: 4.991 ms
Code block 'loop 2' took: 3.666 ms 
```

并**嵌套**它们：

```
with CodeTimer('Outer'):
   for i in range(100000):
      pass

   with CodeTimer('Inner'):
      for i in range(100000):
         pass

   for i in range(100000):
      pass

Code block 'Inner' took: 2.382 ms
Code block 'Outer' took: 10.466 ms 
```

关于`timeit.default_timer()`，它使用基于 OS 和 Python 版本的最佳计时器，请参阅[此答案](https://stackoverflow.com/a/85536/407108)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2019-05-28T14:05:16.047

我总是喜欢以小时、分钟和秒 (%H:%M:%S) 格式检查时间：

```
from datetime import datetime
start = datetime.now()
# your code
end = datetime.now()
time_taken = end - start
print('Time: ',time_taken) 
```

输出：

```
Time:  0:00:00.000019 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2020-08-31T05:11:32.063

将代码放入函数中，然后使用装饰器进行计时是另一种选择。( [Source](https://medium.com/better-programming/decorators-in-python-72a1d578eac4) ) 这种方法的优点是您定义了一次计时器，然后为每个函数使用**一个简单的附加行**。

首先，定义`timer`装饰器：

```
import functools
import time

def timer(func):
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.perf_counter()
        value = func(*args, **kwargs)
        end_time = time.perf_counter()
        run_time = end_time - start_time
        print("Finished {} in {} secs".format(repr(func.__name__), round(run_time, 3)))
        return value

    return wrapper 
```

然后，在定义函数时使用装饰器：

```
@timer
def doubled_and_add(num):
    res = sum([i*2 for i in range(num)])
    print("Result : {}".format(res)) 
```

咱们试试吧：

```
doubled_and_add(100000)
doubled_and_add(1000000) 
```

输出：

```
Result : 9999900000
Finished 'doubled_and_add' in 0.0119 secs
Result : 999999000000
Finished 'doubled_and_add' in 0.0897 secs 
```

注意：我不确定为什么要使用`time.perf_counter`而不是`time.time`. 欢迎评论。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-11-27T06:31:40.143

我正在寻找一种如何用最少的代码输出格式化时间的方法，所以这是我的解决方案。无论如何，很多人都使用 Pandas，所以在某些情况下，这可以节省额外的库导入。

```
import pandas as pd
start = pd.Timestamp.now()
# code
print(pd.Timestamp.now()-start) 
```

输出：

```
0 days 00:05:32.541600 
```

如果时间精度不是最重要的，我建议使用它，否则使用`time`库：

`%timeit pd.Timestamp.now()`每个环路输出 3.29 µs ± 214 ns

`%timeit time.time()`每个回路输出 154 ns ± 13.3 ns

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-07T11:01:25.527

你也可以试试这个：

```
from time import perf_counter

t0 = perf_counter()

...

t1 = perf_counter()
time_taken = t1 - t0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-16T15:36:56.693

[让我在https://stackoverflow.com/a/63665115/7412781](https://stackoverflow.com/a/63665115/7412781)解决方案中添加更多内容。

*   删除了对`functools`.
*   使用的进程时间`time.process_time()`而不是绝对计数器，`time.perf_counter()`因为进程可以通过内核进行上下文切换。
*   也使用原始函数指针打印来获取正确的类名。

这是装饰器代码。

```
import time

def decorator_time_taken(fnc):
    def inner(*args):
        start = time.process_time()
        ret = fnc(*args)
        end = time.process_time()
        print("{} took {} seconds".format(fnc, round((end - start), 6)))
        return ret
    return inner 
```

这是使用示例代码。它正在检查 193939 是否为素数。

```
class PrimeBrute:
    @decorator_time_taken
    def isPrime(self, a):
        for i in range(a-2):
           if a % (i+2) == 0: return False
        return True

inst = PrimeBrute()
print(inst.isPrime(193939)) 
```

这是输出。

```
<function PrimeBrute.isPrime at 0x7fc0c6919ae8> took 0.015789 seconds
True 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-26T02:28:15.297

使用`timeit`模块来衡量你的表现：

```
def test():
    print("test")
    emptyFunction()
    for i in [x for x in range(10000)]:
        i**i

def emptyFunction():
    pass

if __name__ == "__main__":
    import timeit
    print(timeit.timeit("test()", number = 5, globals = globals()))
    #print(timeit.timeit("test()", setup = "from __main__ import test",
    #    number = 5)) 
```

`test`第一个参数定义了我们在这种情况下要执行的代码段，并`number`定义了您想要重复**执行**的次数。

## 输出：

```
test
test
test
test
test
36.81822113099952 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-04T20:42:42.570

使用模块`time`，我们可以在函数开始和函数结束时计算 unix 时间。下面是代码的样子：

`from time import time as unix`

此代码导入`time.time`允许我们计算 unix 时间。

`from time import sleep`

这不是强制性的，但我也在`time.sleep`为其中一个演示导入。

`START_TIME = unix()`

这就是计算 unix 时间并将其放入变量中的方法。请记住，函数 unix 不是实际函数。我是`time.time`作为 unix 导入的，所以如果你没有放入`as unix`第一个导入，你将需要使用`time.time()`.

在此之后，我们放置我们想要的任何函数或代码。在我们放置的代码片段的末尾

`TOTAL_TIME = unix()-START_TIME`

这行代码做了两件事：它在函数结束时计算 unix 时间，并且使用`START_TIME`之前的变量，我们计算执行代码片段所花费的时间。

然后我们可以在任何我们想要的地方使用这个变量，包括`print()`函数。

`print("The snippet took {} seconds to execute".format(TOTAL_TIME))`

这里我写了一个快速演示代码，其中有两个实验作为演示。（完整评论）

```
from time import time as unix # Import the module to measure unix time
from time import sleep

# Here are a few examples:
# 1\. Counting to 100 000
START_TIME = unix()
for i in range(0, 100001):
  print("Number: {}\r".format(i), end="")
TOTAL_TIME = unix() - START_TIME
print("\nFinal time (Expirement 1): {} s\n".format(TOTAL_TIME))

# 2\. Precision of sleep
for i in range(10):
  START_TIME = unix()
  sleep(0.1)
  TOTAL_TIME = unix() - START_TIME
  print("Sleep(0.1): Index: {}, Time: {} s".format(i,TOTAL_TIME)) 
```

这是我的输出：

```
Number: 100000
Final time (Expirement 1): 16.666812419891357 s

Sleep(0.1): Index: 0, Time: 0.10014867782592773 s
Sleep(0.1): Index: 1, Time: 0.10016226768493652 s
Sleep(0.1): Index: 2, Time: 0.10202860832214355 s
Sleep(0.1): Index: 3, Time: 0.10015869140625 s
Sleep(0.1): Index: 4, Time: 0.10014724731445312 s
Sleep(0.1): Index: 5, Time: 0.10013675689697266 s
Sleep(0.1): Index: 6, Time: 0.10014677047729492 s
Sleep(0.1): Index: 7, Time: 0.1001439094543457 s
Sleep(0.1): Index: 8, Time: 0.10044598579406738 s
Sleep(0.1): Index: 9, Time: 0.10014700889587402 s
> 
```

# jsf - 如何在 jsf 1.2 中将值传递给自定义标签中的属性

> ID：14452146
> 
> 赞同：2
> 
> 时间：2013-01-22T05:31:45.953
> 
> 标签：jsf

我正在尝试在 jsf 1.2 中创建一个具有两个属性的自定义标记文件。我想从使用此标签的 jsp 页面传递这些标签中的值。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T05:08:09.877

JSF 1.2 规范需要大量的工作和需要处理的几个配置文件。但是与 JSF 1.2 相比，JSF 2.2 规范更简单。你可以看到这个链接找到自定义标签的解决方案....

[http://www.mastertheboss.com/jsf/jsf-java-based-custom-tags-example](http://www.mastertheboss.com/jsf/jsf-java-based-custom-tags-example)

# meteor - 不要对 Meteor 中的更新进行反应排序

> ID：14452152
> 
> 赞同：2
> 
> 时间：2013-01-22T05:32:02.117
> 
> 标签：meteor

我有一个直观显示的帖子列表。每个帖子都按其投票排序。

```
Posts.find({}, {sort: {votes: -1, name: 1}}) 
```

现在，当用户点击帖子上的投票时，我会做一个

```
Posts.update(id, {$inc: {votes: 1}}); 
```

现在，由于它是按投票排序的，因此该项目在列表中向上/向下移动，并且用户失去了上下文。他必须搜索它移动到的项目。

如何告诉流星不要在更新时移动项目？

我检查了 Collections.update 功能，它不支持`reactive: false`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T07:39:58.817

您必须`reactive:false`在 find 方法中使用（它将数据传递给车把）。

```
Posts.find({}, {sort: {votes: -1, name: 1}, reactive: false}}); 
```

这样它就不会监听更新（插入/更新/移动/删除）

如果您需要自定义它以使其仅用于更新操作：

对于初学者，您需要删除`autopublish`包。

然后，您还需要手动订阅您的集合并从服务器发布它们。[当事人](http://meteor.com/examples/parties)的例子展示了如何很好地做到这一点。

然后，您需要编写一个自定义发布函数并更改该`changed:`函数，以便在投票更改时它不会向客户端发送任何数据。请注意，用户在刷新页面之前不会看到更新的投票数

# c# - 在 SQL 中应该如何表示时间段？

> ID：14452162
> 
> 赞同：3
> 
> 时间：2013-01-22T05:32:53.473
> 
> 标签：c#, sql-server, sql-server-2008

我正在使用 ASP.NET MVC4 和 SQL Server 2008。

我有一个业务需求，要求设备在 X 时间后服务。不同的设备项目在维修之前需要不同的时间长度。

在数据库中，我需要存储设备需要维修的时间段，以及下一次维修的日期。

在设备编辑屏幕上，我需要一个带有选项的下拉框，以允许用户选择**ServiceInterval**。实际上最好不要有固定的时间下拉列表，但我不确定如何做到这一点。

*   3个月
*   6个月
*   9个月
*   1年
*   1.5年
*   2年
*   3年
*   4年
*   5年

单击“已服务”按钮应将**ServiceInterval**添加到当前日期并将其放在**NextServiceDue**字段中。

存储这些信息的最佳方式是什么，有没有好的方法来做到这一点？

谢谢你，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:42:35.243

这取决于您想要什么级别的粒度，但是您可以在数据库中创建一个带有名称和秒数或天数的表。

从那里，当用户选择项目时，只需 date`DateTime.Now.AddDays(userInput);`或`DateTime.Now.AddSeconds(userInput);`. 您也可以将间隔期与可维修项目一起存储。

# jquery - IE 8 中的标记画布插件

> ID：14452163
> 
> 赞同：0
> 
> 时间：2013-01-22T05:32:56.173
> 
> 标签：jquery, jquery-plugins, canvas, html5-canvas

我正在使用[TagCanvas 插件](http://www.goat1000.com/tagcanvas.php)并想在 IE 8 浏览器中对其进行测试，据记载，我[为 IE <9 添加了 Exoplorer 画布](http://code.google.com/p/explorercanvas/)，我无法初始化画布元素并在 IE 8 中查看它！

```
 <head>
         <script src="excanvas.js" type="text/javascript"></script>
         <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
            <script src="tagcanvas.js" type="text/javascript"></script>
    <script type="text/javascript">

            window.onload = function () {
                try {
                    TagCanvas.Start('myCanvas');
                } catch (e) {
                    // something went wrong, hide the canvas container
                    alert("cannot load");
                    document.getElementById('myCanvasContainer').style.display = 'none';
                }
            };
     </script>
        </head>
<body>
   <div id="myCanvasContainer">
 <canvas width="300" height="300" id="myCanvas">

  <ul>

   <li><a href="#">test</a></li>
   <li><a href="#">test1</a></li>

  </ul>
 </canvas>
</div>
</body> 
```

我能知道我是否遗漏了 IE 8 支持的 canvas 元素的任何参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:55:09.877

# 看：

* * *

[Modernizr](http://www.modernizr.com/)是`JavaScript library that detects which HTML5 and CSS3 features`您访问者的浏览器支持的。在检测功能支持时，`it allows developers to test for some of the new technologies and then provide fallbacks for browsers`不支持它们。这就是所谓的`feature detection and is much more efficient than browser sniffing.`

再次以画布为例，您通常需要对不支持的 IE8 及更低版本进行后备。执行此操作的常用方法是链接到 JavaScript polyfill，例如 HTML 中的 FlashCanvas：

```
<script src="http://flashcanvas.net/bin/flashcanvas.js"></script> 
```

`The problem with this approach is that all browsers will download this script.`
这是不必要的`should be avoided where possible.`

您可以将元素包装`<script>`在条件注释中，但如果您可以将文件完全排除在标记之外，那么您应该这样做。`You can do this using Modernizr.load().`

Modernizr `has YepNope built into it`，因此您可以轻松地测试功能，然后提供 polyfill。

的基本用法`.load() function`允许您`test`为一个特征和`ask whether it’s true (yep) or false (nope).`
在这个例子中`Modernizr tests for canvas support`， 和`if the feature doesn’t exist, then it loads FlashCanvas`：

* * *

```
Modernizr.load({
  test: Modernizr.canvas,
  nope: 'http://flashcanvas.net/bin/flashcanvas.js'
}); 
```

* * *

# xquery - Updating node's text contents using Marklogic and XQuery

> ID：14452167
> 
> 赞同：1
> 
> 时间：2013-01-22T05:33:05.597
> 
> 标签：xquery, marklogic

Consider I have two xmls, `xmlA` & `xmlB`, and I want to update the 'text content' of `xmlA/abc` with `xmlB/bcd`.

xmlA:

```
<root>
<abc>texas</abc>
</root> 
```

xmlB:

```
<root>
<abc>kansas</abc>
</root> 
```

If I use `xdmp:node-replace(xmlA/abc/text(), xmlB/bcd/text())`, the node is getting changed and not the node content. That is xmlA:

```
<root>
<bcd>kansas</bcd>
</root> 
```

But I want to change only node's content. The desired output is: xmlA:

```
<root>
<abc>kansas</abc>
</root> 
```

can someone tell me how to do this (without xpath 3.0)? Thanks (Ranjan).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:58:42.350

Which version of MarkLogic are you running? I tested the following in version 6.0-1.1, and that seems to work as expected. When I retrieve the stored docs after the node-replace, I get 'kansas' twice, but the inner element of 'a.xml' is untouched:

```
xdmp:document-insert(
    'a.xml',
    <root>
        <abc>texas</abc>
    </root>
),
xdmp:document-insert(
    'b.xml',
    <root>
        <bcd>kansas</bcd>
    </root>
);

doc('a.xml'),
doc('b.xml');

xdmp:node-replace(
    doc('a.xml')/root/abc/text(),
    doc('b.xml')/root/bcd/text()
);

doc('a.xml'),
doc('b.xml') 
```

If you are running an old version of MarkLogic, then it is probably a bug that has been fixed since..

HTH!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:37:16.473

Try this :

```
xdmp:node-replace(
    xmlA/abc,
    element { "abc" } { xmlB/bcd/text() }
) 
```

# iphone - 为什么我的断点在 Xcode 中不起作用

> ID：14452169
> 
> 赞同：0
> 
> 时间：2013-01-22T05:33:10.850
> 
> 标签：iphone, xcode

当我用 Xocde 连接设备时，突然我的断点在我的 Xcode 中不起作用。我给出了断点以在 UI 事件的不同功能位置调试代码，但它根本没有中断。

是什么原因？

我在网上搜索，发现有人说要将属性设置为“懒加载符号”的 On，但是这个选项在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:03:38.993

Xcode 4 与它的前辈根本不同，但旧的错误有时会重新焕发生机。橙色断点表示 GDB 无法解析您的符号并且不会命中该断点。

设置断点没有变化：打开源代码文件并单击您希望调试器停止的位置旁边的灰色槽。查看工具栏中的断点状态按钮，看看 Xcode 是否确实激活了您的断点。如果断点未触发，请尝试以下步骤：

1.  必须做的清单：

    *   确保“Active Device”设置正确，“Active Configuration”设置为 Debug，Target 正确，并且
    *   您清理了所有目标并重建了您的应用程序，并且
    *   生成调试符号被选中，优化级别在构建设置中设置为 0。
2.  当您调试设备（iPhone 或 iPad）并且无法在 Xcode 4 中设置断点时：

    *   重启设备，
    *   重建应用程序和
    *   再次运行它。调试器现在可能会找到断点。
3.  在左侧导航器窗格中，现在有一个断点导航器，其中列出并管理了所有断点。

4.  在 Xcode 4 中，新断点位于给定工作区的本地。如果将包含该断点的项目添加到另一个工作区，则不会将断点复制到新的工作区。看看这个。

5.  在早期的 Xcode 版本中，找到 Xcode -> Preferences -> Debugging 选项卡。如果选中，则取消选中延迟加载符号。它似乎是从 Xcode 4 中删除的。 注意：

    *   如果在 Xcode 4 中没有找到这些位，请在 Project Navigator 中选择项目文件。选择您要构建的目标。然后选择构建设置->所有->级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:37:27.203

您需要点击黄色方块所示的按钮：

![在此处输入图像描述](../Images/0ab3e8045a931d5b63851cf8cfa3d562.png)

# javascript - RegEx - JavaScript - 匹配单词而不匹配另一个单词

> ID：14452171
> 
> 赞同：1
> 
> 时间：2013-01-22T05:33:43.087
> 
> 标签：javascript, regex

我使用正则表达式匹配任何包含特定单词的字符串（例如：'dark'）

```
 if (features[i].attributes.color.match(new RegExp(dark, "ig")) ) )
..
.. 
```

如何修改它以匹配任何包含“dark”的字符串；但不包含“蓝色”？我试过：

```
if(
features[i].attributes.color.match(new RegExp(dark, "ig")) ) && !features[i].attributes.color.match(new RegExp(blue, "ig")) )
}
..
.. 
```

没有运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:46:23.070

试试这个“包含深色而不是蓝色”的正则表达式：

```
/^(?!.*\bblue\b)(?=.*\bdark\b).*$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:36:47.057

使用如下：

```
new RegExp(/dark/) 
```

你可以使用

```
.indexOf("dark") 
```

如果你使用 jquery 那么

```
.contains("dark") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:40:29.073

```
if(features[i].attributes.color.indexOf("dark") != -1 && features[i].attributes.color.indexOf("blue") == -1){
// found dark, didn't find blue
} 
```

# c++ - 在不同版本的 Linux 和 glibc 上构建和运行 C++ 代码

> ID：14452172
> 
> 赞同：0
> 
> 时间：2013-01-22T05:33:48.937
> 
> 标签：c++, eclipse, ubuntu, glibc

在问这个问题之前，我想澄清一下，我是一名没有 Linux 和 C/C++ 编程经验的 Android 开发人员。我知道在 Linux 上构建 C 项目的唯一方法是通过 Eclipse，但如果给出其他方式的指示或详细信息，我将毫不犹豫。因此，以下问题中的某些内容可能看起来很尴尬。

我有一个问题，我编译了一个 cpp 项目并使用 Eclipse Indigo 在 Ubuntu 12.04 上使其可执行。它在这里运行良好。现在我必须在 RH 服务器上使用相同的可执行文件，但出现错误：**lib64/libc.so.6: version `GLIBC_2.14' not found**

我搜索了互联网并使用命令**ldd --version**发现我的开发机器上的 glibc 版本是 2.15，而服务器上的版本是 2.12。我机器上的 gcc 版本也是 4.6.3，而服务器上的 gcc 版本是 4.4.6。

我怎样才能让它在服务器上运行？我想在我的机器上安装其他版本的 glibc 并参考这个问题来构建它：[Multiple glibc library on a single host](https://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host)。但我不明白这里发生了什么。

我可以想到 2 种方法来执行此操作，或者构建项目以使可执行文件包含所有需要的文件，或者以在旧版本库上运行的方式构建它。

鉴于我在平台上的经验不足，请尝试提供尽可能多的详细信息来回答或至少提供理解它的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:24:32.607

我在 RH 服务器上复制了我的项目文件并在那里自己构建了项目。工作正常。。

# zend-framework - 如何在与其集成的其他应用程序中访问 zend 会话

> ID：14452173
> 
> 赞同：2
> 
> 时间：2013-01-22T05:33:50.853
> 
> 标签：zend-framework, session, zend-session, php, zend-session-namespace

我正在运行 Zend Framework 应用程序，我必须集成第三方聊天应用程序，为此我需要访问已登录用户的 ID，如何访问存储在 Zend 会话中的这个 ID。

因为这不起作用

```
if (!empty($_SESSION['Zend_Auth']['storage']->user_id)) {
$userid = $_SESSION['Zend_Auth']['storage']->user_id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:38:58.413

您可以使用它从存储中获取用户 ID

```
$userInfo = Zend_Auth::getInstance()->getStorage()->read();
echo $userInfo->user_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:04:48.783

如果你觉得使用你的方法（$_SESSION）更舒服，你可以这样做：

```
if (!empty($_SESSION['Zend_Auth']['storage']['user_id'])) { // <- Changed from '->' to ['']
    $userid = $_SESSION['Zend_Auth']['storage']['user_id']; // <- same as above
} 
```

希望这可以帮助 ：）

# rally - API：查询发现最多缺陷的测试用例

> ID：14452185
> 
> 赞同：1
> 
> 时间：2013-01-22T05:35:03.727
> 
> 标签：rally

有没有一种有效的方法来查询哪些测试用例发现了最多的缺陷？

我不认为你可以在测试用例上找到缺陷，而且看起来你不能在测试用例上查询缺陷（该字段在那里但不可查询）。

因此，如果您想找出哪些测试用例发现的缺陷最多，唯一的方法就是查询所有缺陷，然后在客户端统计测试用例。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:20:41.420

我也看不到在 TestCases 上查询缺陷的方法。有一个 WorkProduct 字段，但它旨在指向导致创建 TestCase 的故事（或缺陷）而不是您想要的。您想检查缺陷上的 TestCases 字段。不幸的是，Defects 上的 TestCases 字段在我们标准 WSAPI 的查询表达式中不可用。但是，您可以将其包含在我们 Lookback API 的查询中。

此查询将返回提及一个或多个 TestCases 的所有缺陷：

```
{
    "find":{
        "_TypeHierarchy":"Defect",
        "TestCases":{"$exists":true},
        "__At":"current"
    },
    "fields":["ObjectID","TestCases"]
} 
```

这会给你这样的结果：

```
[
    {
        "ObjectID": 1412057460,
        "TestCases": [
            1431813466
        ]
    },
    {
        "ObjectID": 1445019668,
        "TestCases": [
            1445020483
        ]
    },
    {
        "ObjectID": 2021743865,
        "TestCases": [
            2844922903,
            2844882838
        ]
    },
    {
        "ObjectID": 2047435117,
        "TestCases": [
            2082930376
        ]
    },
    {
        "ObjectID": 2458916959,
        "TestCases": [
            2082930376
        ]
    }
] 
```

但这仍然不是你想要的。您仍然需要找到最大值和具有该最大值的 TestCases 列表。[这段代码](http://coffeescript.org/#try%3aresults%20=%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%201412057460,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%201431813466%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%201445019668,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%201445020483%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202021743865,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202844922903,%0A%20%20%20%20%20%20%20%20%20%20%20%202844882838%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202047435117,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202082930376%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202458916959,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202082930376%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%5D%0A%0Acounts%20=%20%7B%7D%0Afor%20r%20in%20results%0A%20%20for%20t%20in%20r.TestCases%0A%20%20%20%20unless%20counts%5Bt%5D?%0A%20%20%20%20%20%20counts%5Bt%5D%20=%200%0A%20%20%20%20counts%5Bt%5D%2b%2b%0A%09%0Amax%20=%20Math.max.apply%28%7B%7D,%20%28value%20for%20key,%20value%20of%20counts%29%29%0AtestCasesWithMaxDefects%20=%20%28key%20for%20key,%20value%20of%20counts%20when%20value%20is%20max%29%0A%0Aalert%28%22Test%20Case%28s%29%20with%20the%20maximum%20number%20of%20defects%20%28#%7Bmax%7D%29%20is%28are%29%20#%7BtestCasesWithMaxDefects%7D%22%29)就是这样做的。该代码的关键行是：

```
counts = {}
for r in results
  for t in r.TestCases
    unless counts[t]?
      counts[t] = 0
    counts[t]++

max = Math.max.apply({}, (value for key, value of counts))
testCasesWithMaxDefects = (key for key, value of counts when value is max)

alert("Test Case(s) with the maximum number of defects (#{max}) is(are) #{testCasesWithMaxDefects}") 
```

按照[链接](http://coffeescript.org/#try%3aresults%20=%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%201412057460,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%201431813466%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%201445019668,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%201445020483%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202021743865,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202844922903,%0A%20%20%20%20%20%20%20%20%20%20%20%202844882838%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202047435117,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202082930376%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22ObjectID%22%3a%202458916959,%0A%20%20%20%20%20%20%20%20%22TestCases%22%3a%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%202082930376%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%5D%0A%0Acounts%20=%20%7B%7D%0Afor%20r%20in%20results%0A%20%20for%20t%20in%20r.TestCases%0A%20%20%20%20unless%20counts%5Bt%5D?%0A%20%20%20%20%20%20counts%5Bt%5D%20=%200%0A%20%20%20%20counts%5Bt%5D%2b%2b%0A%09%0Amax%20=%20Math.max.apply%28%7B%7D,%20%28value%20for%20key,%20value%20of%20counts%29%29%0AtestCasesWithMaxDefects%20=%20%28key%20for%20key,%20value%20of%20counts%20when%20value%20is%20max%29%0A%0Aalert%28%22Test%20Case%28s%29%20with%20the%20maximum%20number%20of%20defects%20%28#%7Bmax%7D%29%20is%28are%29%20#%7BtestCasesWithMaxDefects%7D%22%29)查看等效的 JavaScript。

# c# - 如何在 C# 中将 FormatConvertedBitmap 转换为 Stream

> ID：14452186
> 
> 赞同：2
> 
> 时间：2013-01-22T05:35:05.857
> 
> 标签：c#, type-conversion, file-handling

我是 C# 新手。

我想转换`FormatConvertedBitmap`为`Stream`如前所述。我找不到任何方法。我想将 FormatConvertedBitmap 保存或写入文件，以便将其作为流读取，但甚至找不到将其写入文件的方法。

有人可以帮助我吗：

1.  将 FormatConvertedBitmap 转换为流或
2.  将 FormatConvertedBitmap 写入文件，然后将其作为 Stream 读取。

公共流图像

```
 {
        get
    {//some condition
                if (_image != null)
                {
                    _image.Seek(0, SeekOrigin.Begin);

                    BitmapImage bmp = new BitmapImage();
                    MemoryStream stream = (MemoryStream)_image;
                    bmp.BeginInit();
                    bmp.StreamSource = stream;
                    bmp.CacheOption = System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;
                    bmp.EndInit();
                    var grayBitmapSource = new FormatConvertedBitmap();
                    grayBitmapSource.BeginInit();
                    grayBitmapSource.Source = bmp;
                    grayBitmapSource.DestinationFormat = PixelFormats.Gray32Float;
                    grayBitmapSource.EndInit();
                    Stream st=new MemoryStream();
                    //File.WriteAllBytes(Path.GetTempPath(),grayBitmapSource);
                    return grayBitmapSource;
                } 
```

在上面的代码中，我从服务器获取 Image as Stream 然后在某些情况下我将其转换为 grayScale image 。但是现在我们应该返回一个 Stream，最后我们有了 FormatConvertedBitmap。

#####***编辑***

```
public Stream Image
        {
            get
            {
                //some condition

                            if (_image != null)
                            {
                                _image.Seek(0, SeekOrigin.Begin);
                                BitmapImage bmp = new BitmapImage();
                                MemoryStream stream = (MemoryStream)_image;
                                bmp.BeginInit();
                                bmp.StreamSource = stream;
                                bmp.CacheOption = System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;
                                bmp.EndInit();
                                var grayBitmapSource = new FormatConvertedBitmap();
                                grayBitmapSource.BeginInit();
                                grayBitmapSource.Source = bmp;
                                grayBitmapSource.DestinationFormat = PixelFormats.Gray32Float;
                                grayBitmapSource.EndInit();
                                int bytePerPixel = grayBitmapSource.Format.BitsPerPixel / 8;
                                int width = grayBitmapSource.PixelWidth;
                                int height = grayBitmapSource.PixelHeight;
                                int stride = width * bytePerPixel;
                                byte[] resultLine = new byte[height * stride];
                                grayBitmapSource.CopyPixels(resultLine, stride, 0);
                                MemoryStream ms = new MemoryStream(resultLine);
                                return ms; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:43:13.847

您可以使用[CopyPixels](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.formatconvertedbitmap.copypixels)方法将 FormatConvertedBitmap 的内容写入字节数组。

然后，您可以使用该字节数组来初始化[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)或将它们存储到带有[BmpBitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bmpbitmapencoder.aspx)或其他[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)的文件中。

# python - 超时 Python Tweetstream Api

> ID：14452190
> 
> 赞同：2
> 
> 时间：2013-01-22T05:35:26.073
> 
> 标签：python, timeout, twitter-streaming-api, tweetstream

我正在使用以下代码使用 Python Tweetstream 库从 twitter 获取推文，但是如果我使用某些没有意义的词或没有推文的词，则流媒体会卡住。我想在特定时间后暂停流式传输，比如 60 秒。我怎样才能做到这一点？

```
words = ["opera", "firefox", "safari"]
people = [123,124,125]
locations = ["-122.75,36.8", "-121.75,37.8"]

with tweetstream.FilterStream("username", "password", track=words,                                follow=people, locations=locations) as stream

for tweet in stream:
    print "Got interesting tweet:", tweet 
```

# javascript - 悬停时图像更改

> ID：14452192
> 
> 赞同：1
> 
> 时间：2013-01-22T05:35:54.990
> 
> 标签：javascript, jquery

嗨，我有一个这样设置的 HTML 图像：

```
<input id="img" type="image" src=""> 
```

如何`src`在悬停时更改？

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:38:54.983

试试这个：

```
<script type="text/javascript">
$(document).ready(function(){
   $("#img").hover(function(){
      $(this).attr("src","img1.jpg");
   },function(){
      $(this).attr("src","img2.jpg");
   });
});
</script>
<input id="img" type="image" src=""> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:38:39.730

期待一个项目悬停在我建议这个：

```
 $('.item').mouseover(function (e) {
    var id = $(this).val();
    $("#img").attr("src",id);
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:40:38.010

对这个标签使用 jQuery

```
<input id="img1" type="image" src="">

$("#img1").hover(function() {
  $(this).addClass("blue");
}, function() {
  $(this).removeClass("blue");
}); 
```

在 css 类中，您可以为此输入图像标签编写 src。

# winforms - 如何让我的 bindingSource 支持排序？

> ID：14452195
> 
> 赞同：4
> 
> 时间：2013-01-22T05:36:03.663
> 
> 标签：winforms, entity-framework-5, bindingsource

我正在尝试制作一个主详细信息表单，主记录绑定到一个绑定源，详细信息 datagridview 绑定到第二个绑定源

它工作得很好，只有`childBindingSource.SupportSorting`属性是假的。 `masterBindingSource.SupportsSorting`是真的。有没有办法让我`childBindingSource`支持排序 - 假设它基于另一个支持排序的绑定源？

```
masterBindingSource.DataSource = GetBindingSource()   // .SupportsSorting = true
childBindingSource.DataSource = masterBindingSource   // .SupportsSorting = false
childBinding.DataMember = ChildItems

private BindingSource GetBindingSource()
{
   DbSet<ContactEvent> dset = Db.ContactEvents;
   IOrderedQueryable<ContactEvent> qry = dset.Where(p => p.Id > 0).OrderBy(x => x.Id);
   qry.Load();

   BindingList<ContactEvent> bindinglist = dset.Local.ToBindingList();
   var bindingSource = new BindingSource();
   bindingSource.DataSource = bindinglist;
   return bindingSource;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:42:01.857

在一些帮助下，我们使用 [codeplex 上的这个链接完成了这项工作](http://entityframework.codeplex.com/SourceControl/changeset/view/c111d3f25f40#src/EntityFramework/Internal/SortableBindingList%60.cs)

我不得不更改我的班级以使用 SortableBindingList 而不是 BindingList。令我感兴趣的是，单独的 BindingList 对于主级别的网格来说已经足够了——但对于包含细节的网格来说却不是这样。

# python - Errno 107 传输端点未连接。

> ID：14452200
> 
> 赞同：2
> 
> 时间：2013-01-22T05:36:23.307
> 
> 标签：python, openerp

今天，我收到此错误消息
`openerp server(v 6.0.2 running in Ubuntu 12.04 server)`并关闭。

`WARNING: web-services:Netrpc: closing because of exception [Errno 107] Transport endpoint is not connected.`

我需要重新启动 openerp 服务器才能开始工作。

什么可能导致了这个问题，我怎样才能防止这种情况发生？

# java - 可用方法的 NoSuchMethodException

> ID：14452201
> 
> 赞同：4
> 
> 时间：2013-01-22T05:36:25.973
> 
> 标签：java, jboss7.x, webservice-client

我正在为我的应用程序使用 Open KM 应用程序框架。奇怪的是，有时我的代码中会出现 NoSuchMethodException 的可用方法。一旦我开始得到这个异常，它就会一直重复，直到我重新启动服务器（Jboss7）。一旦重新启动，这将工作文件直到某个时候，然后再次发生此异常并继续发生。

有人可以帮忙吗？

我的异常跟踪

```
19:34:10,725 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/CAMSWeb].[spring]] (http--192.168.1.62-8080-2) Servlet.service() for servlet spring threw exception: java.lang.NoSuchMethodException: com.openkm.ws.client.document.OKMDocument.create(java.lang.String, com.openkm.ws.client.document.Document, [B)
    at java.lang.Class.getMethod(Class.java:1622) [:1.7.0_09]
    at org.apache.cxf.jaxws.JAXWSMethodDispatcher.getImplementationMethod(JAXWSMethodDispatcher.java:109)
    at org.apache.cxf.jaxws.JAXWSMethodDispatcher.bind(JAXWSMethodDispatcher.java:55)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.bindOperation(JaxWsServiceFactoryBean.java:280)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.initializeWSDLOperation(JaxWsServiceFactoryBean.java:254)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeWSDLOperations(ReflectionServiceFactoryBean.java:645)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.initializeWSDLOperations(JaxWsServiceFactoryBean.java:289)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:392)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:499)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:241)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:202)
    at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:101)
    at org.apache.cxf.frontend.ClientFactoryBean.create(ClientFactoryBean.java:90)
    at org.apache.cxf.frontend.ClientProxyFactoryBean.create(ClientProxyFactoryBean.java:152)
    at org.apache.cxf.jaxws.JaxWsProxyFactoryBean.create(JaxWsProxyFactoryBean.java:142)
    at org.apache.cxf.jaxws.ServiceImpl.createPort(ServiceImpl.java:464)
    at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:331)
    at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:318)
    at javax.xml.ws.Service.getPort(Service.java:99) [jboss-jaxws-api_2.2_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.openkm.ws.client.document.OKMDocument_Service.getOKMDocumentPort(OKMDocument_Service.java:72) [okm-ws-client-6.0.jar:] 
```

我还放了一些其他的痕迹，以了解调用类和预期方法是什么。这些是结果

```
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) Trying to fetch method ========      create from class : interface com.openkm.ws.client.document.OKMDocument
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) Length of the method name  ======== 6
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) The parameters for the expected method are
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) >>>>>>>>>.... java.lang.String
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) >>>>>>>>>....   com.openkm.ws.client.document.Document
19:34:10,719 INFO  [stdout] (http--192.168.1.62-8080-2) >>>>>>>>>.... [B 
```

这是调用方法端点类的 getMethods 的结果

```
19:34:10,721 INFO  [stdout] (http--192.168.1.62-8080-2)  Method Name :: create
19:34:10,721 INFO  [stdout] (http--192.168.1.62-8080-2) Parameters.... java.lang.String
19:34:10,721 INFO  [stdout] (http--192.168.1.62-8080-2) Parameters....  com.openkm.ws.client.document.Document
19:34:10,721 INFO  [stdout] (http--192.168.1.62-8080-2) Parameters.... [B 
```

我们可以看到调用签名是

```
create(String, com.openkm.ws.client.document.Document, byteArray) 
```

并且目标类也有一个具有相同签名的方法，但有时我会得到这个 NoSucnMethodException 并且正如所说的那样，一旦它出现，它就会永远出现，直到我重新启动服务器。

任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:03:08.313

`com.openkm.ws.client.document.Document`是一个*接口*。我怀疑运行时部署中缺少实现。

# python - 如何将值从一个页面传递到金字塔中的另一个页面？

> ID：14452210
> 
> 赞同：-2
> 
> 时间：2013-01-22T05:37:24.850
> 
> 标签：python, pyramid

现在我有两种看法

```
@view_config(route_name='upload',render='foo.mako')
    if 'upload.submitted' in request.params:
        input_file = request.POST['upload'].file
        while 1:
            data = imput_file.readline().strip()
            if no data:
               break
            data_list = data.split(',')
            email = data_list[0]
            password = data_list[1]

        return HTTPFound(location=request.route_url('manage')

    return {}

@view_config(route_name='manage',render='bar.mako')
    return {} 
```

如何将数据从视图“上传”传递到“mamage”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:56:07.043

您尝试做的事情毫无意义。您想要重定向到第二个视图（这是一个 GET 请求）。因此，您只能使用 URL 参数传递“简单”数据。无法通过 GET 传递上传的文件。您必须将上传的数据存储在某处，并使用参考传递信息。另一种选择是将相关信息粘贴在会话中（请参阅 pyramid.session 文档），以使信息在请求中“存活”。

# c# - 我可以使用视图文件夹/中的 web.config 覆盖 mvc 区域的自定义错误吗？

> ID：14452214
> 
> 赞同：2
> 
> 时间：2013-01-22T05:37:43.303
> 
> 标签：c#, asp.net-mvc, web-config

我的 Mvc 解决方案中有一个名为 /Admin 的区域

在 /Admin/Views 文件夹中有一个标准的 web.config 文件。

我在这个配置文件中包含了 system.web 下的 customerErrors 元素：

```
<customErrors mode="On" defaultRedirect="~/admin/oops" >  
  <error statusCode="404" redirect="~/admin/pagenotfound"/>
</customErrors> 
```

这与我的根 web.config 中的不同。

我的期望是，这将使我能够具体控制管理区域中错误的处理方式。

这是行不通的。

我是在服用疯狂的药丸，还是应该能够用该区域的 web.config 中更具体的设置覆盖默认的 web.config 设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:50:39.010

其实这里是一篇关于mvc中区域的文章。

[ASP.NET MVC 中的区域](http://mstechkb.blogspot.in/2010/10/areas-in-aspnet-mvc-20.html)

根据这篇文章，我们不能覆盖设置..

> Views 文件夹中的 Web.Config 页面也称为视图，位于 views 文件夹中。在 MVC 中，视图不会通过 URLS 直接暴露给外部。所有视图请求都应该发送到控制器，它将使用来自 URL 的输入呈现确切的视图。视图是普通的 asp.net 网页，因此可以通过 URL 访问它们。为了限制视图的直接访问，我们使用视图文件夹中的 web.config 文件。web.config 有一个默认的处理程序映射来阻止所有具有扩展名 ASPX 的页面。
> 
> 区域文件夹中的 Web.Config 与视图类似，每个区域都有一个 web.config 文件用于相同目的。这是为了限制对 ASPX 文件的访问。如果我们不想在区域级别限制它们，我们可以删除这个 web.Config 文件。
> 
> **Web.Config** 中的应用程序设置 web.config 文件很多；我们可以在特定区域的 web.config 文件中设置区域的应用程序设置吗？答案是否定的，我们不能或拥有或覆盖 appsettings 配置。所有应用程序设置都应在根文件夹的 web.config 中定义

# java - 模块不能是 Android 库吗？

> ID：14452216
> 
> 赞同：6
> 
> 时间：2013-01-22T05:37:58.103
> 
> 标签：java, android, intellij-idea

我正在使用 IntelliJ IDEA 进行 Android 开发，当我尝试编辑 Android 模拟器的运行配置时，它说有一个错误，看起来像这样。

![](../Images/60ce4e3dfd37b5205b36aca1a6d1285a.png)

模拟器仍在运行，但它不会自动启动活动，我只是想知道导致此错误的原因以及可能的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-21T16:57:00.110

在遵循 Android Studio 建议将 build.gradle 中的“android”切换为“com.android.library”之后，我也遇到了这种情况。

所以对于我项目的应用程序模块，我只是恢复了这个：

```
apply plugin: 'com.android.library' 
```

进入这个：

```
apply plugin: 'com.android.application' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T09:32:15.577

转到“项目结构”图标（它正在显示新的保存项目图标的位置）然后单击模块并选择 Android 选项并取消选中库模块或

> 项目结构->模块->安卓->取消选中库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:42:54.077

好像“SpyMaze”是一个Android库项目，所以你不能运行一个库项目， [看看这个](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T21:26:39.340

您收到错误是因为您尝试将模块库作为应用程序运行。

如果您想作为应用程序运行，您需要在 SpyMaze 模块 build.gradle 中添加以下内容：

```
apply plugin: 'com.android.application' 
```

如果您使用 SpyMaze 模块作为库，请保留

```
apply plugin: 'com.android.library' 
```

并在编辑配置中选择主应用程序。所以你应该看到 Run 'app' 而不是 Run 'SpyMaze'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-09T01:37:21.387

此外，如果您添加了一个新模块/库，请不要忘记在按之前更改回正确的项目`Run`。

[![在此处输入图像描述](../Images/577d08acb7cf7d555ed7e2f1dbd283a0.png)](https://i.stack.imgur.com/AVtoK.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-31T04:04:14.667

对于`InstantApp`- 检查您是否运行`app`，而不是您的一个`features`。在 Android Studio 栏上选择`app`运行。

# java - 如何摆脱代码中的 Class Cast Exception 错误？

> ID：14452221
> 
> 赞同：-3
> 
> 时间：2013-01-22T05:38:37.460
> 
> 标签：java, android, class, global-variables, classcastexception

我创建了一个 GlobalVariables 类来跨多个类共享变量。但是我现在遇到了 classcastexception 的问题。我一直在阅读有关此异常的信息，并且我知道我无法将主类的实例强制转换为子类。仍然不确定如何在我的代码中更改它以摆脱它。请快速查看我的`TextPlay class`位置

```
 GlobalVariables gs = (GlobalVariables) getApplication();
        gs.setTestMe(getUserId);
        tvUserId.setText("Copied"); 
```

是。非常感谢！

**全局变量类**

```
public class GlobalVariables extends Application {

private String testMe;

public String getTestMe() {
    return testMe;
}

public void setTestMe(String testMe) {
    this.testMe = testMe;
}

} 
```

**文本播放类**

```
public class TextPlay extends Activity implements View.OnClickListener {

Button chkCmd;
ToggleButton passTog;
EditText input;
TextView display;
EditText etUserId;
Button btnUserId;
String getUserId;
TextView tvUserId;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.text);

    baconAndEggs();
    passTog.setOnClickListener(this);
    chkCmd.setOnClickListener(this);

    // Share variables between classes controls
    etUserId = (EditText) findViewById(R.id.etUserId);
    btnUserId = (Button) findViewById(R.id.btnUserId);
    tvUserId = (TextView) findViewById(R.id.tvUserId);

    btnUserId.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            getUserId = etUserId.getText().toString();
            // Store Global Variables in GlobalVariables class
            GlobalVariables gs = (GlobalVariables) getApplication();
            gs.setTestMe(getUserId);
            tvUserId.setText("Copied");
        }
    });
}

private void baconAndEggs() {
    // TODO Auto-generated method stub
    chkCmd = (Button) findViewById(R.id.bResults);
    passTog = (ToggleButton) findViewById(R.id.tbPassword);
    input = (EditText) findViewById(R.id.etCommands);
    display = (TextView) findViewById(R.id.tvResults);
}

public void onClick(View v) {

    }
}
} 
```

**错误日志**

```
 01-22 06:12:23.898: E/AndroidRuntime(2605): FATAL EXCEPTION: main
   01-22 06:12:23.898: E/AndroidRuntime(2605): java.lang.ClassCastException: android.app.Application cannot be cast to com.armstrong.y.android.app.GlobalVariables
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at com.armstrong.y.android.app.TextPlay$1.onClick(TextPlay.java:48)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.view.View.performClick(View.java:4202)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.view.View$PerformClick.run(View.java:17340)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.os.Handler.handleCallback(Handler.java:725)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.os.Handler.dispatchMessage(Handler.java:92)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.os.Looper.loop(Looper.java:137)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at android.app.ActivityThread.main(ActivityThread.java:5039)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at java.lang.reflect.Method.invokeNative(Native Method)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at java.lang.reflect.Method.invoke(Method.java:511)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
   01-22 06:12:23.898: E/AndroidRuntime(2605):  at dalvik.system.NativeStart.main(Native Method) 
```

**显现**

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.armstrong.y.android.app"
      android:versionCode="1"
      android:versionName="1.0" >

      <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

      <uses-permission android:name="android.permission.SET_WALLPAPER" />

      <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.armstrong.y.android.app.NumCounter"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.armstrong.y.android.app.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.armstrong.y.android.app.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TextPlay"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".Email"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".DailyDataEntry"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".WeeklyDataEntry"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".Camera"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".InitialDataEntry"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".FinalDataEntry"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".Rankings"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".Data"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".OpenedClass"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".GlobalVariables"
        android:label="@string/title_activity_main" >
    </activity>
      </application>

  </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:29:37.660

尝试使用此代码初始化扩展的类对象`Application`

```
 GlobalVariables gs = (GlobalVariables) ActivityName.this.getApplicationContext(); 
```

更新答案：在 manifest.xml 中，

在`application`标签中，使用`android:name= "<your_package_name>.GlobalVariables"` 不要将其声明为`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:45:01.593

看起来你的`Application`对象不是`GlobalVariables`。我希望您没有`GlobalVariables`在清单中声明成为您的应用程序对象。您需要这样做才能使类强制转换异常消失。（将类似的东西`android:name=".GlobalVariables"`作为属性添加到`<application>`标签中。）

**然而！**不要通过扩展来实现全局变量`Application`。这不是必需的; 只需创建一个单例类或具有静态数据的类。如有必要，维护一个“已初始化”标志，可在需要时检查并用于执行初始化。

从[文档](http://developer.android.com/reference/android/app/Application.html)：

> 通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个 Context，该上下文在首次构造单例时在内部使用 Context.getApplicationContext()。

# android - 如何处理状态栏通知？

> ID：14452227
> 
> 赞同：0
> 
> 时间：2013-01-22T05:38:59.257
> 
> 标签：android, notifications

我有三个屏幕，例如登录，第二个和第三个。根据我的条件，我生成状态栏通知。如果用户单击通知，我想显示第三个屏幕。它工作正常。但是当我直接重新启动应用程序时，第三个屏幕来了。单击通知时，我想显示第三个屏幕。否则我的第一个屏幕应该是登录页面。

我可以使用以下代码显示通知

```
public void showNotification() 
    {
        NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, "A New Message!", System.currentTimeMillis());

    Intent notificationIntent = new Intent(Preferences.this,PendingOffers.class);

    PendingIntent pendingIntent = PendingIntent.getActivity(Preferences.this, 0, notificationIntent, 0);

    notification.setLatestEventInfo(Preferences.this,"sample notification", "notificationMessage", pendingIntent);

    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, notification); 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:42:52.893

```
Intent intent = new Intent(this, some.class)
intent.putExtra("yourpackage.notifyId", id);
PendingIntent contentIntent = PendingIntent.getActivity(this, 1, intent, 0); 
```

有关更多信息，请查看此[链接](http://developer.android.com/guide/components/fundamentals.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:15:39.277

您可以为意图设置标志，例如

> FLAG_ACTIVITY_NO_HISTORY

参考： http: [//developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY) 检查其他标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:25:45.267

# ios - 应用程序在 iPad1 中崩溃而没有任何内存警告，但在 iPad3 中工作

> ID：14452229
> 
> 赞同：2
> 
> 时间：2013-01-22T05:39:05.750
> 
> 标签：ios, objective-c, xcode, ipad

当我们在 iPad1 中使用以下代码时，应用程序会崩溃，但它在 iPad3 中运行良好。

```
roboObj.animationImages=[NSArray arrayWithObjects:[UIImage imageNamed:@"p4Robot1.png"],[UIImage imageNamed:@"paot4.png"],[UIImage imageNamed:@"4Robot5.png"],[UIImage imageNamed:@"pagot8.png"],[UIImage imageNamed:@"page4t9.png"],[UIImage imageNamed:@"page10.png"],[UIImage imageNamed:@"pabot11.png"],[UIImage imageNamed:@"pagt12.png"],[UIImage imageNamed:@"page4ot13.png"],[UIImage imageNamed:@"pbot2.png"],[UIImage imageNamed:@"paot3.png"],[UIImage imageNamed:@"page.png"],[UIImage imageNamed:@"pagt15.png"],[UIImage imageNamed:@"page4t16.png"],[UIImage imageNamed:@"pagbot17.png"],[UIImage imageNamed:@"pa18.png"],[UIImage imageNamed:@"page18.png"],[UIImage imageNamed:@"pa18.png"],[UIImage imageNamed:@"pag18.png"],[UIImage imageNamed:@"page8.png"],[UIImage imageNamed:@"pagbot18.png"],[UIImage imageNamed:@"paot17.png"],[UIImage imageNamed:@"pot16.png"],[UIImage imageNamed:@"pt15.png"],nil];
        roboObj.animationDuration=4;
        roboObj.animationRepeatCount=1;
        [roboObj startAnimating]; 
```

有时我收到内存警告“收到内存警告。级别=1”和“收到内存警告。级别=2”。

谁能告诉我如何解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:25:52.893

您需要在尝试重复动画时更改加载图像的方式。我不确定这是否是您正在寻找的确切答案，但在某种程度上您会明白这一点。

看看这篇文章...

[UIImageView AnimationImages 内存泄漏](http://iphone.sanniv.com/2009/08/25/1-uiimageview-animationimages-memory-leak-mistry-solved/)

我们都知道使用 UIImageView 做动画，我们在 NSArray 中加载图片，然后将其设置为 UIImageView 的 animationImages 属性，然后调用函数 startAnimating。但是，当您尝试通过使用此方法一次又一次地加载不同的图像来重复动画时，您会在 Xcode 调试时开始在 iPhone 设备上遇到状态为 101 的崩溃。同样，我们都知道它崩溃的原因，只是因为 iPhone 设备中的应用程序没有更多可用内存。但是我们的记忆去哪儿了。这是答案。每次我们将 NSArray 设置为 animationImages 时，整个数据都会被复制到它，因为 animationImages 是 UIImageView 的复制属性。如果我们尝试再次使用其他一些 NSArray 设置相同的动画图像，我们会尝试先将其设为 nil，然后使用新数组进行设置。但是这里我们错了，当我们将这个属性设为 nil 时，实时内存减少，但虚拟内存没有减少，因为垃圾收集器不存在。因此，我们应该调用此属性的 release 方法而不是 nil，这将迫使它也从虚拟内存中释放出来。您应该记住的另一件事是，不要调用此属性的 release 方法，或者不要尝试在释放 UIImageView 引用的 dealloc 方法中将该属性设为 nil，否则您将收到 Bad Parameter 警告或再次无法获得虚拟内存释放。

示例代码也在[这里](http://iphone.sanniv.com/2009/08/25/1-uiimageview-animationimages-memory-leak-mistry-solved/)给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:26:09.653

也许你的图像太大了。iPad 1 无论如何都没有视网膜显示。将图像缩小到一半大小，然后重试。

# javascript - 如何使谷歌地图信息窗口的尾部或尖端更短

> ID：14452234
> 
> 赞同：0
> 
> 时间：2013-01-22T05:39:41.747
> 
> 标签：javascript, css, google-maps-api-3

我正在使用 JavaScript 实现谷歌地图。我怎样才能使谷歌地图信息窗口的尾部或尖端更短，因为它有点长。如果有，请提供任何示例链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:55:36.153

您可以使用信息框而不是信息窗口。以下库是信息窗口的扩展

" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js">"

您也可以使用下面的 url 作为 api 参考

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)

# jquery - jQuery点击什么都不做？

> ID：14452235
> 
> 赞同：1
> 
> 时间：2013-01-22T05:40:06.133
> 
> 标签：jquery, dom

以下代码应该在单击 时`<span class="edit_submit"></span>`获取 的内容`textarea`并通过 POST 将其发送到`edited_page.php`，然后显示 的内容`edited_page.php`。目前，我什至不相信该功能正在运行。有任何想法吗？

[小提琴来了。](http://jsfiddle.net/G2M4X/)

```
$('.edit_submit').on('click', function () {
                $parent = $(this).parent()
                $textarea = $(this).siblings(".el-rte").child(".workzone").child("textarea");
                $text = $textarea.val();
                $id = $textarea.attr('id');
                $parent.html("images/load.jpg").load("edited_page.php", {location: $id, content: $text, page: "<?php echo $page; ?>"});
            }); 
```

**HTML：**

```
<div id="main">
    <div class="el-rte">
        <div class="workzone" style="height: 400px;">
            <textarea id="main" class="edit_area" style="display: none; height: 400px;" name="main">
                &lt;b&gt;Hello. &lt;/b&gt;&lt;i&gt;This is sam &lt;/i&gt;&lt;u&gt;Testing this website&nbsp;&lt;/u&gt;
            </textarea>
        </div>
    </div>
    <span class="edit_submit" style="background:black;">Save Edit</span></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:46:08.987

这是[工作小提琴](http://jsfiddle.net/G2M4X/2/)......我使用的jquery中没有`child()`方法`children()`......并且修复了你的小提琴中存在的问题

```
$('.edit_submit').on('click', function () {
           $parent = $(this).parent()
           $textarea = $(this).siblings(".el-rte").children(".workzone").children("textarea");
           $text = $textarea.val();
           $id = $textarea.attr('id');
           alert($id);
           $parent.html("images/load.jpg").load("edited_page.php", {location: $id, content: $text, page: "<?php echo $page; ?>"});
        }); 
```

**而不是通过孩子和兄弟**姐妹..你可以使用`find()`

```
$textarea = $parent.find('textarea'); 
```

**更新**

[小提琴](http://jsfiddle.net/G2M4X/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:52:05.107

您需要进行以下更改。

```
<div id="main"> 
<textarea id="main"> 
```

DOM的 ID**必须是唯一的**

对于多个 DOM，您有相同的 id，我认为这是问题所在。

**或者**

```
$textarea = $(this).prev(".el-rte").find(".workzone textarea");
console.log($textarea);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:43:04.777

试试这个..

```
$('.edit_submit').click( function () {
                $parent = $(this).parent()
                $textarea = $(this).siblings(".el-rte").child(".workzone").child("textarea");
                $text = $textarea.val();
                $id = $textarea.attr('id');
                $parent.html("images/load.jpg").load("edited_page.php", {location: $id, content: $text, page: "<?php echo $page; ?>"});
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:46:39.567

```
$textarea = $(this).siblings(".el-rte").child(".workzone").child("textarea"); 
```

改成

```
$textarea = $(this).siblings(".el-rte").children(".workzone").children("textarea"); 
```

并编码成`document ready`

```
$(document).ready(function(){
    $('.edit_submit').on('click', function () {
        $parent = $(this).parent()
        $textarea = $(this).siblings(".el-rte").children(".workzone").children("textarea");
        $text = $textarea.val();
        $id = $textarea.attr('id');
        $parent.html("images/load.jpg").load("edited_page.php", {location: $id, content: $text, page: "<?php echo $page; ?>"});
    });
}) 
```

[演示在这里](http://jsfiddle.net/jikeytang/G2M4X/3/)

# objective-c - NSDictionary 内容到 NSTableView

> ID：14452236
> 
> 赞同：0
> 
> 时间：2013-01-22T05:40:13.127
> 
> 标签：objective-c, cocoa

我如何在使用 Cocoa时使用`NSMutableArray`of ？任何人都可以建议我提供适当的解决方案吗？`NSMutableDictionary's``NSTableView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:25:39.180

考虑以下示例：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // I will use tempDict Object for your understandings, otherwise it can be used directly. Here array1 is Main DataSource for UITableView.
    NSDictionary *tempDict = [array1 objectAtIndex:indexPath.row];

    // key1 is the key to get the object from the dictionary.
    cell.title.text = [tempDict valueForKey:key1];

    return cell;
} 
```

在这里，array1 是`DataSource`您的表视图的主要部分，其中包含`NSDictionary`对象。

希望这可以帮助。

# asp.net - 在冻结列中隐藏水平滚动条

> ID：14452239
> 
> 赞同：3
> 
> 时间：2013-01-22T05:40:26.777
> 
> 标签：asp.net, gridview, telerik, telerik-grid, radgrid

我有一个 RadGrid，我希望在其中修复前两列。我通过使用以下代码得到了这个：

```
<telerik:RadGrid ID="rgCallLogin" runat="server" AllowFilteringByColumn="True">
    <ClientSettings>
        <Scrolling AllowScroll="True" UseStaticHeaders="True" SaveScrollPosition="true" FrozenColumnsCount="2">
        </Scrolling>
    </ClientSettings>
    <MasterTableView>
        --
        --
    </MasterTableView>
</telerik:RadGrid> 
```

现在我在所有列中都有一个水平滚动条。有没有办法只在非冻结列中显示滚动条？

![截屏](../Images/8560743eea84c619cf82e82dc20a8457.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-01T20:57:43.380

不。似乎没有任何方法可以实现这一点（正如您可以想象的那样，因为这个问题没有得到解答）。这是因为滚动的是 rgDataDiv，它包含*所有*列。冻结列效果实际上是设置 display: none 滚动时最左侧的未冻结列。

仅供参考，有一种替代解决方案，您可以启用 ClientSettings.Scrolling.EnableNextPrevFrozenColumns 以基于按钮滚动未冻结的列。

# iphone - createFileAtPath:contents:attributes: 给出“没有这样的文件或目录”错误

> ID：14452244
> 
> 赞同：1
> 
> 时间：2013-01-22T05:40:44.043
> 
> 标签：iphone, ios, objective-c, nsfilemanager

我正在尝试编写一个简单的`createDB`函数。如果数据库文件不存在，我想创建它并继续。但是我在尝试创建文件时收到“没有这样的文件或目录”错误。

以下是代码片段：

```
-(void) createDB
{
    NSString* docsDir;
    NSArray* dirPaths;

    // Get directory path
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);    
    docsDir = [dirPaths objectAtIndex:0];
    dbPath = [[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent:@"players.db"]];
    NSFileManager* fileMgr = [NSFileManager defaultManager];

    if([fileMgr fileExistsAtPath:dbPath] == NO)
    {
        //Create the file in main application folder
        //dbPath = [[NSBundle mainBundle] pathForResource:@"players" ofType:@".db"];

        if (![fileMgr createFileAtPath:dbPath contents:nil attributes:nil])
            NSLog(@"Error was code: %d - message: %s", errno, strerror(errno));
        // Above NSLog Prints : Error was code: 2 - message: No such file or directory

        NSLog(@"DB PAth : %@",dbPath);
        //Prints "DB Path : /Users/myname/Library/Application Support/iPhone Simulator/6.0/Applications/016E0BD6-E615-4031-A9E4-42E42D863ECB/Library/Documentation/"

        if(sqlite3_open_v2([dbPath UTF8String], &playerDB, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL) == SQLITE_OK)
        {
            char* errorMsg;
            const char* sql_stmt = "CREATE TABLE IF NOT EXISTS PLAYERS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, GAME TEXT, GAME_DESC TEXT, DOB TEXT, IMAGE BLOB);";
            if (sqlite3_exec(playerDB, sql_stmt, nil, nil, &errorMsg) != SQLITE_OK)
            {
                NSLog(@"%s Create Table '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(playerDB), sqlite3_errcode(playerDB));
            }
        }
        else
            NSLog(@"%s Open DB '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(playerDB), sqlite3_errcode(playerDB));
    }
} 
```

如果有人有任何意见，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:56:39.917

替换`NSDocumentationDirectory'` 为

```
NSDocumentDirectory 
```

我认为应该是

```
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:57:16.500

我认为这条线有问题：

```
NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES); 
```

那应该是：

```
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
```

> **NS 文档目录**
> 
> ```
> Documentation.
> 
> Available in iOS 2.0 and later.
> 
> Declared in NSPathUtilities.h. 
> ```
> 
> **NSDocument目录**
> 
> ```
> Document directory.
> 
> Available in iOS 2.0 and later.
> 
> Declared in NSPathUtilities.h. 
> ```

检查[**NSSearchPathDirectory**](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSSearchPathDirectory)以获取更多详细信息。

# xcode - 无法向/从连接到 Xcode 的全新存储库推/拉

> ID：14452245
> 
> 赞同：16
> 
> 时间：2013-01-22T05:40:50.173
> 
> 标签：xcode, version-control, github

我在这方面真的很陌生，所以感谢您的耐心（并处理我的挫败感）。

我创建了一个新的 Xcode 项目，将其置于源代码管理之下，并成功地在本地进行了更改/提交。

我在 Github 上创建了一个公共存储库（[https://github.com/nyuman/Beaner](https://github.com/nyuman/Beaner)，请原谅标题，这是一个古老的内部笑话。我正在制作一个 bean 计数器）。

而且我还成功地在 Xcode 中添加了该存储库。我使用 git 作为用户名、我的 SSH 链接等。

问题：当我从 Xcode 推送时，我收到一个弹出窗口，告诉我“工作副本已过期。尝试从远程拉取最新更改，然后再次推送。”

所以我然后尝试拉，然后我得到这个弹出窗口：“Beaner/master”不是一个有效的远程分支。请选择不同的远程分支。”

我已 100% 遵循本指南：[http ://www.raywenderlich.com/13771/how-to-use-git-source-control-with-xcode-in-ios-6](http://www.raywenderlich.com/13771/how-to-use-git-source-control-with-xcode-in-ios-6)

我没有任何需要提交的未完成更改。Xcode 告诉我远程存储库连接正常（到处都是绿灯）。这几乎每次都会发生，并尝试通过 Xcode 设置源代码控制，这让我发疯......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T00:16:57.120

你是成功的还是在 github 上的提交不是来自你的 xcode 项目？

假设您已经完成了创建新项目并进行了一些提交的 xcode 步骤，您现在可以将它们推送到 github：

1.  在 github 上创建一个新的 repo，比如`nyuman/Beaner2`. 不要更改 github 上的任何其他内容。不要添加自述文件。
2.  复制 ssh URL（假设您刚刚创建了新的 repo）：`git@github.com:nyuman/Beaner2.git`
3.  打开终端窗口并导航到您的项目目录。在那个窗口中运行：

    ```
    git remote add origin git@github.com:nyuman/Beaner2.git
    git push origin master:master 
    ```

除非您希望推送其他本地分支，否则您的存储库现在应该是同步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-02T01:03:29.883

我的解决方法是为 Mac 安装 GitHub。安装，输入我的 GitHub 凭据，选择 repo，拉然后推，一切都很好......没有解释 XCode 5.1 有什么问题......

# jquery - jQuery 不调用struts2 动作？

> ID：14452246
> 
> 赞同：0
> 
> 时间：2013-01-22T05:40:51.773
> 
> 标签：jquery, autocomplete, struts2

我遵循了自动完成[示例](http://www.celinio.net/techblog/?p=243)，但事情没有解决。

JSP 搜索页面：

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
       <script src="${pageContext.request.contextPath}/js/jquery-1.9.0.js"></script>
        <script src="${pageContext.request.contextPath}/js/jquery-ui-1.10.0.js"></script>
        <script src="${pageContext.request.contextPath}/js/jquery.bgiframe.min.js"></script>
        <script src="${pageContext.request.contextPath}/js/jquery.ajaxQueue.js"></script>
        <script src="${pageContext.request.contextPath}/js/thickbox-compressed.js"></script>
        <script src="${pageContext.request.contextPath}/js/jquery.autocomplete.js"></script>

        <link href="${pageContext.request.contextPath}/css/jquery.autocomplete.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Hello World!</h1>
        <s:textfield id="listCats" name="displayedCatId" key="label_choose_topic" size="80" cssClass="selectedCat" />
    </body>
</html>
<script type="text/javascript" >
        $().ready(function() {
            $("#listCats").autocomplete('/listCategory.action', {
              minChars: 1,
                max: 15,
              multiple: false,
              autoFill: true
            });
       });
</script> 
```

在 struts.xml 中

```
<action name="listCategory" class="qaplus.action.question.LoadCategoryAction" method="loadCategory">
            <result name="success">/WEB-INF/jsp/list_category.jsp</result>
</action> 
```

问题是 jQuery 函数不调用**listCateory**操作。

我错过了什么吗？

编辑：java脚本控制台报告：

```
Uncaught TypeError: Cannot read property 'opera' of undefined jquery.autocomplete.js:83
$.Autocompleter jquery.autocomplete.js:83
(anonymous function) jquery.autocomplete.js:32
jQuery.extend.each jquery-1.9.0.js:631
jQuery.fn.jQuery.each jquery-1.9.0.js:253
$.fn.extend.autocomplete jquery.autocomplete.js:31
(anonymous function) sample.jsp:34
fire jquery-1.9.0.js:1017
self.fireWith jquery-1.9.0.js:1127
jQuery.extend.ready jquery-1.9.0.js:416
DOMContentLoaded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:38:01.053

您的自动完成插件依赖于 jQuery.browser 对象，该对象自 jQuery 1.3 以来已被废弃，并已在 jQuery 1.9 中删除。

所以你要么必须更新你的自动完成插件，要么使用 jQuery 1.8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:56:08.543

jQuery 自动完成中的动作名称与 struts.xml 中定义的动作不匹配

请将 autocomplete('/listCateory.action') 更改为 autocomplete('/listCategory.action')

希望能解决问题。

# c++ - LNK2019, 提升::asio

> ID：14452248
> 
> 赞同：0
> 
> 时间：2013-01-22T05:40:59.310
> 
> 标签：c++, c, visual-c++, boost, boost-asio

在视觉工作室 2010 中，我得到

> 错误1错误LNK2019：函数中引用的未解析外部符号“public：__thiscall Server::Server(class boost::asio::io_service &)”(??0Server@@QAE@AAVIo_service@asio@boost@@@Z) _main C:\Users\Lucie\Documents\Visual Studio 2010\Projects\Expérimentation Serveur\Exérimentation Serveur\Main_Serveur.obj

但是，我的头文件中的类定义和 .cpp 文件中的类实现都包含在解决方案中，所以我真的不明白为什么会这样。此外，我已经检查过，定义和声明似乎匹配。

这是 Main_Serveur.cpp：

```
include <ctime>
#include <iostream>
#include <string>
#include <vector>
#include <hash_map>
#include <functional>
#include <boost/bind.hpp>
#include <algorithm>
#include <boost/shared_ptr.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/asio.hpp>
#include <hash_set>

#include "Connection.h"
#include "Server.h"

using boost::asio::ip::tcp;
int main()
{
    try
    {
        boost::asio::io_service io_service;
        Server server(io_service);
        io_service.run();
    }
    catch (std::exception& e)
    {
        std::cerr << e.what() << std::endl;
    }
    std::cin.get();
    return 0;
} 
```

这是Server.h：

```
#ifndef __SERVER_H__
#define __SERVER_H__
#include"Connection.h"
#include<boost\bind.hpp>
#include<boost\asio.hpp>
#include<boost\shared_ptr.hpp>
#include<boost\enable_shared_from_this.hpp>
#include<hash_set>
#include<string>
using boost::asio::ip::tcp;

class Connection;
class Server : public boost::enable_shared_from_this<Server>
{
public:
    Server(boost::asio::io_service & io_service);
    void removeSocketFromList(tcp::socket * socketToRemove);
    void sendToList(std::string message);
    void addSocketToList(tcp::socket * newSocket);

private:
    void start_accept();
    void handle_accept
    (
        boost::shared_ptr<Connection> new_connection,
        const boost::system::error_code& error
    );

    std::hash_set<tcp::socket*> sockets_;
    tcp::acceptor acceptor_;
};
#endif 
```

这是 Server.cpp 的相关部分：

```
#include"Server.h"
#include"Connection.h"

#include<boost\asio.hpp>
#include<hash_set>
using boost::asio::ip::tcp;

Server::Server(boost::asio::io_service & io_service):
acceptor_(io_service, tcp::endpoint(tcp::v4(), 13))
{
    start_accept();
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:54:05.727

最终创建了一个新项目并包括源代码和标题，并编译了项目。那好吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:33:54.420

一定是因为你不会编译Server.cpp。相反，您只编译了 Main_server.cpp 文件。这次链接器没有看到 Server.obj 并且会弹出链接错误，就像您得到的一样（未定义的复制构造函数）。您可以创建项目将所有文件添加到其中（就像您所做的那样），或者编译 cpp 文件，这些文件要单独编译以生成其 obj。此外，您可以使用比其他两个选项更好的 makefile。

# mysql - 为什么我不能杀死 mysql 中的特定线程/查询？

> ID：14452253
> 
> 赞同：1
> 
> 时间：2013-01-22T05:41:29.580
> 
> 标签：mysql, innodb, deadlock, kill

我有一些带有一些死锁的 MySQL (innodb)，我只是想终止事务并继续前进。

“SHOW ENGINE INNODB STATUS”显示如下：

```
*** (1) TRANSACTION:
TRANSACTION 74D88AFE, ACTIVE 14 sec starting index read
mysql tables in use 3, locked 3
LOCK WAIT 3 lock struct(s), heap size 1248, 2 row lock(s)
MySQL thread id 4637121, OS thread handle 0x7f51f91be700, query id 979092335 ip-10-118-555-555.ec2.internal 10.118.555.555 csjournal Copying to tmp table
INSERT INTO eznode_count_688
        SELECT
            count( ezcot.main_node_id ) AS count
        FROM
            ezcontentobject_tree ezcot,
            ezcontentobject_tree ezcot_all
        WHERE
            ezcot.path_string like '/1/2/26428/26448/86046/86047/%' and
            ezcot.node_id != 86047 and 
                ezcot.contentobject_id = ezcot_all.contentobject_id
        GROUP BY ezcot_all.main_node_id
        HAVING count( ezcot.main_node_id ) <= 1

*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 890933 n bits 136 index `PRIMARY` of table `mydatabase`.`ezcontentobject_tree` trx id 
74D88AFE lock mode S locks rec but not gap waiting
Record lock, heap no 5 PHYSICAL RECORD: n_fields 18; compact format; info bits 0
 0: len 4; hex 8001501f; asc   P ;;
 1: len 6; hex 000074d86b27; asc   t k';;
 2: len 7; hex 73000c91131ac0; asc s      ;;
 3: len 4; hex 8001cd9d; asc     ;;
 4: len 4; hex 80000001; asc     ;;
 5: len 4; hex 80000001; asc     ;;
 6: len 4; hex 80000005; asc     ;;
 7: len 4; hex 80000000; asc     ;;
 8: len 4; hex 80000000; asc     ;;
 9: len 4; hex 8001501f; asc   P ;;
 10: len 4; hex d0f62e3f; asc   .?;;
 11: len 4; hex 8001501e; asc   P ;;
 12: len 30; hex 6672616e636169732f6e756d65726f735f61726368697665732f32303131; asc path/to/2011; (total 32 bytes);
 13: len 29; hex 2f312f322f32363432382f32363434382f38363034362f38363034372f; asc /1/2/26428/26448/86046/86047/;;
 14: len 4; hex 80000000; asc     ;;
 15: len 30; hex 366538613266356538393432333465383232383963396466613963636437; asc 6e8a2f5e894234e82289c9dfa9ccd7; (total 32 bytes);
 16: len 4; hex 80000001; asc     ;;
 17: len 4; hex 80000001; asc     ;;

*** (2) TRANSACTION:
TRANSACTION 74D86B27, ACTIVE 194 sec starting index read
mysql tables in use 1, locked 1
215 lock struct(s), heap size 31160, 4514 row lock(s), undo log entries 9543
MySQL thread id 4636652, OS thread handle 0x7f51f90fa700, query id 979103970 ip-10-118-555-555.ec2.internal 10.118.555.555 csjournal updating
DELETE FROM ezcontentobject_tree
    WHERE path_string like '/1/2/26428/26448/86046/86047/%'  OR
          path_string = '/1/2/26428/26448/86046/86047/'
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 0 page no 890933 n bits 136 index `PRIMARY` of table `mydatabase`.`ezcontentobject_tree` trx id 74D86B27 lock_mode X locks rec but not gap
Record lock, heap no 4 PHYSICAL RECORD: n_fields 18; compact format; info bits 0 
```

我本来希望能够从 mysql 中终止线程或查询，但运行 kill 不起作用：

```
mysql> kill 4637121;
ERROR 1094 (HY000): Unknown thread id: 4637121
mysql> kill query 979092335;
ERROR 1094 (HY000): Unknown thread id: 979092335 
```

如果我再次使用“SHOW ENGINE INNODB STATUS”，我会看到引用了相同的线程/查询 ID！为什么它们被 SHOW ENGINE 识别，但不被 KILL 识别，我该如何终止线程？Mysql 的进程/KILL 文档一直没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:37:51.310

的输出`SHOW ENGINE INNODB STATUS`显示了*最后一个*死锁。死锁已解决，其中一个查询已被终止。再往下看消息，看看哪个被杀了。

# ruby-on-rails - rails 2.3.8 中没有匹配的路线

> ID：14452257
> 
> 赞同：0
> 
> 时间：2013-01-22T05:41:34.777
> 
> 标签：ruby-on-rails, routes

当我提交下面的 new.html.erb 时，`http://localhost:3000/user/new_user_by_admin`它会显示错误：没有路由匹配“/user/new_user_by_admin”与 {:method=>:post}。我希望将此页面提交给`http://localhost:3000/users/new_user_by_admin`. 我需要什么改变？

```
<% form_for :user,:url => url_for { :controller => :user ,:action => :new_user_by_admin, :method => :post }  do |f| %>
    <p><%= f.label :login %><br/>
            <%= f.text_field :login %></p>

            <p><%= f.label :name %><b`enter code here`r/>
            <%= f.text_field :name %></p>

            <p><%= f.label :email %><br/>
            <%= f.text_field :email %></p>

            <p><%= f.label :password %><br/>
            <%= f.password_field :password %></p>

            <p><%= f.label :password_confirmation, 'Confirm Password' %><br/>
            <%= f.password_field :password_confirmation %></p>
            <p><%= submit_tag 'Sign up' %></p>
        <% end %> 
```

用户控制器的代码是：

```
class UsersController < ApplicationController
def new_user_by_admin
      @user=User.new(params[:user])
      @user.save
      redirect_to("/users/")
  end
end 
```

routes.rb 的代码是：

```
ActionController::Routing::Routes.draw do |map|
  map.home '' , :controller => 'users', :action => 'index'
  map.logout '/logout', :controller => 'sessions', :action => 'destroy'
  map.login '/login', :controller => 'sessions', :action => 'new'
  map.register '/register', :controller => 'users', :action => 'create'
  map.signup '/signup', :controller => 'users', :action => 'new'
  map.adduser '/new_user_by_admin', :controller => 'users', :action => 'new_user_by_admin', :method => :post

  map.resources :users
  map.resource :session
  map.connect ':controller/:action/:id'
  map.connect ':controller/:action/:id.:format'
end 
```

帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:51:39.547

你的匹配是错误的。它应该是：

当你这样做时：

```
map.adduser '/new_user_by_admin', :controller => 'users', :action => 'new_user_by_admin', :method => :post 
```

您正在将操作与 url localhost:3000/new_user_by_admin 匹配，而不是您真正想要的。试试下面的一个：

```
map.adduser '/users/new_user_by_admin', :controller => 'users', :action => 'new_user_by_admin', :method => :post 
```

会将您的控制器操作与 localhost:3000/users/new_user_by_admin 匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:25:47.630

```
map.new_user_by_admin '/new_user_by_admin', :controller => 'users', :action => 'new_user_by_admin' 
```

我为解决 routes.rb 文件中的上述问题所做的更改

# mysql - mysql join 上的歧义子句

> ID：14452258
> 
> 赞同：1
> 
> 时间：2013-01-22T05:41:39.417
> 
> 标签：mysql, join

我正在尝试加入 2 个表以获取匹配值，但得到了模棱两可的子句，

我的代码在这里

```
SELECT *
FROM auction_media
  JOIN auctions
    ON auction_id = auction_id
    WHERE media_type = '3' 
```

可以在此处找到我的表结构的示例错误是 on 子句中的 Column 'auction_id' is ambiguous

[http://sqlfiddle.com/#!2/13583](http://sqlfiddle.com/#!2/13583)

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:43:39.390

试试这个

```
SELECT *
FROM auction_media
JOIN auctions
ON auction_media.auction_id = auctions.auction_id
WHERE media_type = '3' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:43:55.973

```
SELECT *
FROM auction_media
  JOIN auctions
    ON auction_media.auction_id = auctions.auction_id
    WHERE media_type = '3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:44:37.863

你需要给你的表起别名。问题是因为多个列具有相同的名称，在这种情况下是您尝试加入的列。尝试

```
SELECT * 
FROM auction_media AS am
    JOIN auctions AS a
    ON am.auction_id = a.auction_id
    WHERE media_type = '3' 
```

更新：我给它们起了别名以使其更短且更易读，但另一种选择是使用完整的 table.column 名称，例如auction_media.auction_id

或者您可以改用“使用”

```
SELECT * 
FROM auction_media
    JOIN auctions
    USING (auction_id)
    WHERE media_type = '3' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:43:49.813

```
SELECT *
FROM auction_media
  JOIN auctions
    ON auction_media.auction_id = auctions.auction_id
    WHERE media_type = '3' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T05:45:43.023

只需根据表名引用列名。

```
SELECT * FROM auction_media am JOIN auction a ON am.auction_id = a.auction_id
WHERE media_type = '3' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T05:49:29.237

这样做：

```
SELECT * FROM auction_media JOIN auctions ON auction_media.auction_id = auctions.auction_id WHERE media_type = '3' 
```

阅读[SQL JOIN](http://beginner-sql-tutorial.com/sql-joins.htm)

# internet-explorer - 如何使用 vc++ 在 IE 上添加 cookie

> ID：14452262
> 
> 赞同：0
> 
> 时间：2013-01-22T05:41:53.857
> 
> 标签：internet-explorer, visual-c++, cookies

我正在使用函数`InternetSetCookie`和`InternetGetCookie`（WININET API），但它返回错误代码`12006`。那么有什么方法可以在 Internet Explorer 中添加 cookie 吗？

我能够使用 sqlite 数据库工具在 Google Chrome 和 Firefox Mozilla 上成功添加 cookie。

那么IE有没有类似的方式添加cookie呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-03T14:46:34.680

该错误代码意味着您以错误的格式传递 cookie 的 URL。您必须确保所有传递的 URL 都使用有效的方案，该方案至少包括协议和域。因此，例如：

URL`www.mydomain.com`无效，因为它没有协议。URL`http://www.myotherdomain.com`是有效的，因为它包含协议和域。

请确保您以正确的格式传递 URL。在发现缺少协议的 URL 之前，我遇到了同样的问题。

# php - 在 Android 平板电脑 webview 中嵌入 Youtube 视频

> ID：14452264
> 
> 赞同：1
> 
> 时间：2013-01-22T05:42:03.943
> 
> 标签：php, android, youtube

我在 php（CakePHP 框架）中创建了一个网站，并使其 apk 在平板电脑上作为 webview 运行，单击 Youtube 视频将我重定向到应用程序之外，我使用的代码如下：

`<object width="311" height="176"> <param name="movie" value="http://www.youtube.com/v/<?php echo $video['Video']['video_key'];?>"></param> <embed src="http://www.youtube.com/v/<?php echo $video['Video']['video_key'];?>" type="application/x-shockwave-flash" width="891" height="609"></embed></object>`

谁能帮我运行这个嵌入代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:50:10.430

像这样试试

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/bIPcobKMB94" frameborder="0"> 
```

# html - 垂直向下扩展图像 CSS 以填充空间

> ID：14452266
> 
> 赞同：1
> 
> 时间：2013-01-22T05:42:07.303
> 
> 标签：html, css

这很可能是重复的，但我找不到任何*完全相同*的东西。我想在图像下方填充一个空间，以阻止文本完全换行。在视觉方面：

我有这个：

```
| /---\ 废话
| |图片| 废话
| \---/废话
| 废话
| 废话
| ...

```

我要这个：

```
| /---\ 废话
| |图片| 废话
| \---/废话
| 废话
| 废话
| ...

```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:54:01.497

你可以这样写：

```
<img src="bla.png" style="float:left;" />
<div style="overflow:hidden">Some text</div> 
```

检查这个[http://jsfiddle.net/HhJML/](http://jsfiddle.net/HhJML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:55:17.007

您可能需要在这里使用一些 CSS 属性。例如，尝试

```
display:inline-block; 
```

为图像。或者

```
float:right; 
```

对于文本和

```
float:left; 
```

对于图像或两者，. 甚至可以为图像尝试填充底部

更严格的方法是使用表格并将图像和文本添加到同一个 'tr' 中的两个 'td' 元素中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:56:39.660

我想你应该设置 img css 向左浮动和文本向右浮动.. 像这样的东西

```
<img src="bla.png" style="float:left;" />
<div style="float:right;"><p>Some text</p></div> 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:07:15.087

将 Float 属性添加到图像和文本，将图像添加到 div 中并左对齐并设置 div 高度 = 100%。！我想它会起作用的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T06:08:26.543

如果你的 HTML 是这样的：

```
<div class="content-container">
  <p><img src="whatever" /> text text text text text
     text text text text text text text text text text text
     text text text text text text text text text text text
     text text text text text text text text text text text
     text text text </p>
</div> 
```

那么没有办法只用 CSS 来做到这一点。添加一些 jQuery 风格，例如：

```
// Loop through all the images
$('.content-container img').each(function(){
    // Get image height
    var imageHeight = $(this).height();
    // Get container's height
    var containerHeight = $(this).parent('.content-container').height();
    // Set image bottom margin to container's height - image height
    jQuery(this).css('margin-bottom', (containerHeight - imageHeight) + 'px');
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T06:24:04.227

HTML：

```
<div class="content">
    <img src="thumbnail.jpg" width="50" height="50" />
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis ligula arcu, luctus nec elementum quis, condimentum a lectus. Suspendisse potenti. Proin neque diam, dictum ac elementum scelerisque, aliquet eget diam....</p>
</div> 
```

CSS：

```
.content {
    padding: 0 0 0 75px; /* 75px being the width of the thumbnail + how much space you want to put between it and your text */
    position: relative; /* So the thumbnail is relative to this */
}

.content img {
    left: 0;
    position: absolute;
    top: 0;
} 
```

[CSS 提示：浮动一个没有文字环绕的图像](http://www.no-margin-for-errors.com/blog/2009/12/10/css-tip-float-an-image-without-text-wrapping-under-it/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T10:26:21.933

如果您不介意使用表格，那么您可以轻松解决问题。

像这样：

```
<table>
    <tr>
        <td><img src="yourImage.jpg" alt="" /></td>
        <td>Your text... blah blah blah..... blah</td>
    </tr>
</table> 
```

您可以根据需要设置 td 的宽度，以使所有 td 具有相同的大小。

# ruby-on-rails - Ruby case 语句未按预期执行

> ID：14452271
> 
> 赞同：3
> 
> 时间：2013-01-22T05:42:30.643
> 
> 标签：ruby-on-rails, ruby

仅供参考，使用 Rails。

给定`user = User.find(1)`

这个 case 语句`nil`在它应该返回的结果时返回`self.do_something_with_user`。

```
def case_method
    case self.class
      when User
        self.do_something_with_user # assume does not return nil
      when SomeOtherClass
        self.do_something_else
      else
        nil
    end
end

user.case_method # => nil 
```

我错过了什么？使用 pry，`self.class == User`返回 true。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T05:55:33.867

Ruby 的`case`语句比大多数其他`switch`语句灵活得多。它使用`===`运算符，而不是`==`运算符。类`===`按照以下方式定义运算符

def ===(other) other.is_a? self #self 是类结束

所以，你真正想要的是：

```
def case_method
  case self
  when User
   do_something_with_user
  when SomeOtherClass
    do_something_else
  end # else is un-needed as it will return nil by default
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T05:53:49.797

Ruby`case`使用`===`（[大小写相等运算符](http://ruby.about.com/od/control/a/The-Case-Statement.htm)）来检查相等性。

虽然`0.class == Fixnum`结果为真，但`0.class === Fixnum`结果为假。

# c# - 操纵微软词

> ID：14452279
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:43:12.033
> 
> 标签：c#, .net, vb.net

我目前正在编写这个应用程序来打印和创建一个新的 Word 文档的报告。然而，我遇到了一个绊脚石。当我将数据写入这个新的 Microsoft word doc 以检查它是否是一个新页面时，他们有什么办法吗？例如，报告占用 10 页，他们是一种检查应用程序何时开始在新页面上写入的方法吗？

* * *

**代码：**

```
Dim objWord 
As Word.Application
Dim objDoc As Word.Document
Dim objTable As Word.Table
Dim r As Integer, c As Integer
Dim pages1 As Pages
Dim pagecountbefore As Integer

objWord = CreateObject("Word.Application")
objWord.Visible = True
objDoc = objWord.Documents.Add

pagecountbefore = pages1.Count

objTable = objDoc.Tables.Add(objDoc.Bookmarks.Item("\endofdoc").Range, 3, 5)
objTable.Range.ParagraphFormat.SpaceAfter = 6
For r = 1 To 1000
    For c = 1 To 5
         If r = 1 Then
            Select Case c
                Case "1"
                    objTable.Cell(r, c).Range.Text = "PCI DSS Requirements "
                Case "2"
                    objTable.Cell(r, c).Range.Text = "Testing Procedures "
                Case "3"
                    objTable.Cell(r, c).Range.Text = "In Place"
                Case "4"
                    objTable.Cell(r, c).Range.Text = "Not in Place"
                Case "5"
                    objTable.Cell(r, c).Range.Text = "Target Date/ Comments"
            End Select
        Else
            If pagecountbefore<pages1.Count Then
                pagecountbefore = pages1.Count
                Select Case c
                    Case "1"
                        objTable.Cell(r, c).Range.Text = "PCI DSS Requirements "
                    Case "2"
                        objTable.Cell(r, c).Range.Text = "Testing Procedures "
                    Case "3"
                        objTable.Cell(r, c).Range.Text = "In Place"
                    Case "4"
                        objTable.Cell(r, c).Range.Text = "Not in Place"
                    Case "5"
                        objTable.Cell(r, c).Range.Text = "Target Date/Comments"
                End Select
            Else
              'print resultrs from database
            End If
        End If
    Next
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:59:39.117

您可以每次检查 Word 文档的页数，然后创建一个 if 子句来执行某些操作。

您可以使用以下方法计算页面：

```
myPageObject.Count //returns int 
```

然后在每次写入数据时检查新页面。

```
//Writing Data 
if(pagecountbefore < myObjectPage.Count){
    //Do Something 
} 
```

或者您可以使用 while 子句来做到这一点：

```
 while(pagecountbefore == myObjectPage.Count){
       //Do Something 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T14:22:15.810

为什么不插入所有行后将表格的第一行设置为标题行，只需说 objTable.Rows(1).HeadingFormat = True

如果将显示在表格跨越的每一页的顶部

# android - Phonegap 应用程序每 30 秒检查每条记录的状态

> ID：14452288
> 
> 赞同：0
> 
> 时间：2013-01-22T05:44:06.003
> 
> 标签：android, cordova, mobile, iso

我是第一次开发 PhoneGap 应用程序，我很困惑如何开发这个应用程序。

我想从另一个站点/服务获取记录并在我的应用程序中显示获取的信息。然后我必须每 30 秒检查一次每条记录的状态。那么谁能告诉我我该怎么做呢？我想如果我为每条记录向服务器发送 AJAX 请求，那么服务器会收到很多请求并且会变慢。

我正在为 Android 和 iOS 平台实现这个应用程序。

1.  这在PhoneGap中可能吗？

2.  我是否必须为此使用 WebSocket 库或 nodejs？

3.  所有平台（如 iOS 和 Android）都支持 WebSocket 吗？

如果有什么简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:46:21.583

是的，在`Phonegap`. `javascript`在文件或`<script>`标签中使用以下方法：

```
 setInterval(
     function () 
 { //place the method that you want to implement 

 }, 30000); // for every 30 seconds it will be called 
```

将`setInterval()`每 30 秒调用一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:52:06.493

1.  是的，在 PhoneGap 平台中是可能的，因为该应用程序基于允许 AJAX 请求的 JavaScript。
2.  WebSocket 实现会更快，但您需要将支持限制为仅 iOS。
3.  WebSocket API 未得到广泛支持。请参阅[哪些浏览器支持 HTML5 WebSocket API？](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)

我的建议是批量处理您的请求，以通过单个请求同时返回有关多条记录的信息。请看下面的一个简单示例：

```
$.ajax({
  type: "POST",
  url: "get-record-info.php",
  data: { record-ids: "1,2,3,4"} 

}).done(function (msg) {

  //This is the JSON message received from the service.
  alert( "Data Saved: " + msg ); 

}); 
```

希望这可以帮助！

# css - 根据流体跨度的宽度在引导程序中创建方形

> ID：14452291
> 
> 赞同：0
> 
> 时间：2013-01-22T05:44:31.380
> 
> 标签：css, twitter-bootstrap, responsive-design

在[Twitter Bootstrap](http://twitter.github.com/bootstrap/)中使用具有响应式设计的流式（甚至常规的“行”）网格系统，我怎样才能让元素的高度与宽度相同？

换句话说，是否可以`.span`根据 Bootstrap 中的响应式 css 设计使元素的高度与其分配的宽度相匹配？

或者这需要在javascript中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:03:51.363

您是否尝试设置高度 = 100% 或自动。

# asp.net-mvc - 使用 FormsAuthenticationTicket 存储额外的用户会话对象 - cookie 太大

> ID：14452294
> 
> 赞同：2
> 
> 时间：2013-01-22T05:44:47.080
> 
> 标签：asp.net-mvc, authentication, asp.net-membership, iprincipal

我正在尝试设置一个 .NET MVC 3 项目来存储自定义用户会话对象（以后可以在其他后续操作中从自定义主体对象访问该对象）我已按照此处的步骤操作： [ASP.NET MVC - 设置自定义 IIdentity或 IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal) （LukeP 所说的 - 我也需要自定义会员资格等）

在我的登录操作中，我有这样的事情：

```
 if (provider.ValidateUser(model.UserName, model.Password))
{
        // setup principal 
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        string userData = serializer.Serialize(provider.GetSession());

        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
             1,
             model.UserName,
             DateTime.Now,
             DateTime.Now.AddMinutes(15),
             false,
            userData);

        string encTicket = FormsAuthentication.Encrypt(authTicket);
        HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
        Response.Cookies.Add(faCookie);

        if (!String.IsNullOrEmpty(returnUrl))
        {
            return Redirect(returnUrl);
        }
        else
        {
            return RedirectToAction("Index", "Home");
        }
}
else
{
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
} 
```

它将基本上获取用户对象（provider.GetSession() 从外部身份验证服务返回自定义用户会话对象），然后将其存储在 FormsAuthenticationTicket

问题是来自外部服务的用户会话对象超过 4Kb（大约 7Kb 已加密），并且由于大小，cookie 没有存储在浏览器中。

有没有其他安全的方法可以将此用户会话对象存储在某处，所以我不必继续查询数据库？我听说将它存储在 Session 中是不安全的（因为会话劫持 - 并且它与成员资格分离。） - 那么我还有什么其他选择？

我无法减小自定义用户会话对象的大小——这不是一个选项，因为它的属性依赖于所有系统层调用。

问候，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:12:21.113

我不明白为什么您不能将其存储在用户的会话对象中，因为您应该在每次他们执行特权操作时验证他们的表单身份验证。

如果您真的不想将其存储在他们的会话中，您可以创建一个静态字典并将数据存储在那里：

```
using System.Collections.Concurrent;

// Class level declaration.
static ConcurrentDictionary<string, object> UserData =
        new ConcurrentDictionary<string, object>();

// Inside your magic method.
if (provider.ValidateUser(...)) {
  object providerSession = provider.GetSession();
  string userId = Guid.NewGuid().ToString("n");

  UserData.TryAdd(userId, providerSession);

  FormsAuthenticatonTicket authTicket = new FormsAuthenticatonTicket(
    1,
    model.UserName,
    DateTime.Now,
    DateTime.Now.AddMinutes(15),
    false,
    userid);

  // ...
} 
```

`userId`然后，您可以从那里根据存储在您的表单身份验证票证中查找您的提供商会话数据。我将存储在字典中的对象作为标准`object`，因为我不知道您的提供者返回什么，所以如果它更具体，请务必改用该类。

# ios - 为 iOS 无线配置文件交付设置 Apple 配置文件服务

> ID：14452300
> 
> 赞同：1
> 
> 时间：2013-01-22T05:45:57.770
> 
> 标签：ios, provisioning-profile, mdm

我们正在尝试做的是为 iOS 的无线配置文件交付设置配置文件服务。我们正在按照 Apple 文档 (https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html) 中指定的步骤进行操作

我们已经按照文档中的说明设置了我们的服务器，并为“/enroll”、“/profile”等指定了处理程序。我们目前停留的步骤是证书注册阶段（第 2 阶段）的第 3 步。我们的配置文件服务正在接收“GetCACert”请求，但配置文件的安装随后失败，并显示消息“来自注册机构的无效响应”。

当我们查看提供的示例 ruby​​ 代码时，来自上述同一站点，“/scep”的处理程序基本上返回 root_certificate 和 ra_certificate。但是，我们找不到太多关于 RA_Cert 的信息：它的用途是什么，它是如何生成的？

任何帮助，将不胜感激，

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:10:09.323

在示例脚本中，ra_cert 用作实际为设备颁发证书的证书颁发机构。

它从 ra_cert/ra_private.pem 文件加载初始化函数。如果它们尚不存在，则创建证书和密钥并使用根证书（它本身在脚本首次启动时生成）进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T15:34:45.223

当您自己不是颁发返回证书的 CA 而是代表代表行事时，需要 RA 证书（技术上，两个证书/密钥对，一个用于签名，一个用于加密，但它们通常是相同的）它。

如果您是 CA，您可以使用 CA 证书对 SCEP 响应进行签名和加密。如果您是代表 CA 的 RA（您无权访问 CA 的私钥），您可以使用您的 RA 密钥进行签名和加密。

请注意，即使您可以访问 CA 的私钥，从安全角度来看，还是建议使用 RA，因为它可以最大限度地减少您的 CA 的私钥用于的操作，从而减少它的公开。

最后，请注意，在 GetCACert 调用中，如果您处于 RA 模式，则推荐的返回证书的顺序是首先是 RA 证书（签名和密码），然后是 CA。至少那是苹果前段时间我遇到同样问题时的建议。

# asp.net - Asp.net 动态数据在单个页面上的多个关系实体

> ID：14452303
> 
> 赞同：0
> 
> 时间：2013-01-22T05:46:21.287
> 
> 标签：asp.net, asp.net-dynamic-data

如何使用 Asp.net 动态数据从多个关系实体中创建表单。

例如，我有一个与地址主相关的客户表。(1 -> 0.1)

我想在创建和编辑客户时将这两个实体显示到一个页面。

我怎样才能通过动态数据脚手架来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:47:35.247

首先，您应该自定义*Insert.aspx*和*Edit.aspx*页面模板[如何：使用自定义页面模板自定义单个表格的布局，](http://msdn.microsoft.com/en-us/library/cc488537%28v=vs.100%29.aspx)以便在自定义页面上放置其他（GridView 或 FormView）控件以显示另一个实体。

下一步如下。考虑编辑客户的例子。

**~/DynamicData/CustomPages/Customer/Edit.aspx**（部分）：

```
<%-- FormView with Customer entity --%>

<asp:FormView 
    ID="FormViewEditCustomer" 
    runat="server" 
    DataSourceID="EditCustomerDataSource" 
    DefaultMode="Edit"
    OnItemCommand="FormViewEditCustomer_ItemCommand"
    OnItemDeleted="FormViewEditCustomer_ItemDeleted" 
    RenderOuterTable="false">
    <EditItemTemplate>
        <table id="editTable" class="table-edit" cellpadding="6">
            <asp:DynamicEntity runat="server" Mode="Edit" />
        </table>
    </EditItemTemplate>
</asp:FormView>
<asp:EntityDataSource 
    ID="EditCustomerDataSource" 
    runat="server" 
    EnableUpdate="true" 
    EnableDelete="true" 
    OnUpdated="EditCustomerDataSource_Updated"
    OnSelected="EditCustomerDataSource_Selected"/>
<asp:QueryExtender 
    ID="EditCustomerQueryExtender"
    TargetControlID="EditCustomerDataSource" 
    runat="server">
    <asp:DynamicRouteExpression />
</asp:QueryExtender> 
```

**带有*地址*实体的**GridView -****带有 QueryExtender 和 DynamicRouteExpression 的版本 1****

 **```
<%-- GridView with Address entity - Version 1 with DynamicRouteExpression --%>

<asp:GridView 
    ID="GridViewAddress" 
    runat="server" 
    DataSourceID="AddressDataSource"
    AllowPaging="true" 
    AllowSorting="false" 
    PageSize="10" 
    CssClass="table-list" 
    AutoGenerateColumns="true">
</asp:GridView>
<asp:EntityDataSource 
    ID="AddressDataSource" 
    runat="server"
    ConnectionString="name=Entities" 
    DefaultContainerName="Entities"
    EntitySetName="Address" />
<asp:QueryExtender 
    ID="AddressQueryExtender" 
    TargetControlID="AddressDataSource"
    runat="server">
    <asp:DynamicRouteExpression ColumnName="Customer_Id" />
</asp:QueryExtender> 
```

在**版本 1**中，我们使用一种特殊类型的数据源表达式**DynamicRouteExpression**。**在运行时，此对象从URL**中提取主键列的值，并修改由**AddressDataSource**生成的查询以包含适当的过滤条件。

必须注意，表（实体）**地址**必须包含列名**Customer_Id**（而**不是**例如**Address_Customer_Id**），否则**GridViewAddress**将包含所有地址。

* * *

**带有*地址*实体的**GridView -****带有带有 CustomExpression 和 OnQuerying 的 QueryExtender 的版本 2**是更强大的版本**

 **```
<%-- GridView with Address entity - Version 2 with QueryExtender with CustomExpression and OnQuerying --%>

<asp:GridView 
    ID="GridViewAddress" 
    runat="server" 
    DataSourceID="AddressDataSource"
    AllowPaging="true" 
    AllowSorting="false" 
    PageSize="10" 
    CssClass="table-list" 
    AutoGenerateColumns="true">
</asp:GridView>
<asp:EntityDataSource 
    ID="AddressDataSource" 
    runat="server"
    ConnectionString="name=Entities" 
    DefaultContainerName="Entities"
    EntitySetName="Address" />
<asp:QueryExtender 
    ID="AddressQueryExtender" 
    TargetControlID="AddressDataSource"
    runat="server">
    <asp:CustomExpression 
        OnQuerying="AddressQueryExtender_Querying" />
</asp:QueryExtender> 
```

为了实现**版本 2**，我们首先应该使用**EditCustomerDataSource的***Selected*事件，以便从*EntityDataSourceSelectedEventArgs获取***Customer_Id ，它为***Selected*事件提供数据，然后我们可以使用 QueryExtender**控件**使用的**CustomExpression 。**自定义表达式调用**AddressQueryExtender_Querying**方法，我们应该在其中使用自定义 LINQ 表达式，过滤操作的结果（通过**Customer_Id**来自*EntityDataSourceSelectedEventArgs*）将显示在**GridViewAddress*******************.*****************

 *********代码隐藏：

**~/DynamicData/CustomPages/Customer/Edit.aspx.cs**（部分）：

```
protected int customerId;

protected void EditCustomerDataSource_Selected(object sender, EntityDataSourceSelectedEventArgs e)
{
    IEnumerable<Customer> customerItem = e.Results.Cast<Customer>();
    foreach (Customer c in customerItem)
    {
        customerId = c.Customer_Id;
    }
}

protected void AddressQueryExtender_Querying(object sender, System.Web.UI.WebControls.Expressions.CustomExpressionEventArgs e)
{
    e.Query = (from a in e.Query.Cast<Address>()
               where a.Customer_Id == customerId
               select a);
} 
```

您可以从**ASP.NET Dynamic Data Unleashed**一书中找到更详细的信息和解释。*************

# asp.net-mvc-4 - MVC 4 电子邮件发送

> ID：14452306
> 
> 赞同：0
> 
> 时间：2013-01-22T05:46:26.303
> 
> 标签：asp.net-mvc-4, smtp

我正在尝试使用电子邮件进行密码恢复。我正在使用 WebMail.Send 函数，但它以超时结束，我无法弄清楚原因。

```
WebMail.SmtpServer = "smtp.gmail.com";
WebMail.SmtpPort = 465;
WebMail.Send(to:email, subject:"Password Reset", body:"Your password reset token is <a          href=\"" + confirmationUrl + "\">" +token+ " </a> please visit " + confirmationUrl ); 
```

还设置了 WebMail.UserName 和 WebMail.Password

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:49:11.033

Gmail SMTP 端口是 25(SSL) 或 587(TLS)，请尝试使用这些端口之一。465(SSL) 有时可能会出现问题。

# jqgrid - 在 jqgrid 中硬编码一行

> ID：14452310
> 
> 赞同：0
> 
> 时间：2013-01-22T05:46:39.343
> 
> 标签：jqgrid

我有一个 jqgrid，其中存储了名称 .SSN 、角色和电子邮件地址。现在在这个 jqgrid 的末尾，我想要一个硬编码的网格值，其中名称是通知电子邮件，电子邮件是 abc@hotmail.com

```
 colNames:['name','Role','SSN','EmailAddress'],
colModel:[
    {name: 'name',index: 'name',sortable:false,search:false,sorttype: 'text'},
           {name: 'role',index: 'role',sortable:false,search:false,sorttype: 'text'},
           {name: 'ssN',index: 'ssN',sortable:false,search:false,sorttype: 'text'},
           {name: 'emailAddress',index: 'emailAddress',sortable:false,search:false,sorttype: 'text'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:16:14.730

尝试[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)

```
{name: 'emailAddress',index: 'emailAddress',sortable:false,search:false,sorttype: 'text',formatter:testFormatter} 
```

和功能

```
 function testFormatter ( cellvalue, options, rowObject )
                {

                return "email@mymailcompany.com";
                } 
```

# .htaccess - 如何从 joomla2.5 中的站点 url 中删除 index.php

> ID：14452313
> 
> 赞同：1
> 
> 时间：2013-01-22T05:46:45.047
> 
> 标签：.htaccess, redirect, joomla

我在 joomla2.5 中有例如[http://www.example.com/](http://www.example.com/)站点，并且我正在使用 www 重定向所有页面。但是当我输入这个 url [http://example.com/about](http://example.com/about)时，它会自动在 url 中添加 index.php 并且重定向不起作用。这是我的 .htaccess 重定向代码

```
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:15:35.827

将 htaccess.txt 重命名为 .htaccess 还从全局配置中设置 Use URL rewriting = yes

和你的 htaccess 像这样：-

```
## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

 RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

如果仍然有任何问题，此链接将很有帮助[http://forum.joomla.org/viewtopic.php?p=2689903](http://forum.joomla.org/viewtopic.php?p=2689903)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-22T05:51:16.380

尝试：

```
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ http://www.mydomain.com/$1 [R=301,L] 
```

# cassandra - cassandra 是否支持包含仅插入表的附加属性的二级索引？

> ID：14452314
> 
> 赞同：1
> 
> 时间：2013-01-22T05:46:49.987
> 
> 标签：cassandra

二级索引是否有可能包含键值之外的其他属性？例如交易密钥和交易金额。这样我就可以通过使用这个索引来计算我需要的一切。

我明白为什么在 cassandra 中难以维护，但对于仅插入、不可更新的表，cassandra 可以轻松支持此类索引。

# iphone - ios 错误中的 facebook graph api - 未知路径组件：

> ID：14452317
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:46:54.027
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我在 ios 中使用 facebook graph api 来分享来自 iphone 的新闻提要。但我收到以下错误：

```
{com.facebook.sdk:ParsedJSONResponseKey={
body =     {
    error =         {
        code = 2500;
        message = "Unknown path components: /http://newswatch.nationalgeographic.com/2013/01/20/top-25-wild-bird-photographs-of-the-week-34;
        type = OAuthException;
    };
};
code = 400; 
```

}, com.facebook.sdk:HTTPStatusCode=400}

以下是我在 btnClick 上共享新闻源的代码的一部分：

```
if ([strType isEqualToString:@"link"]) {

            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"caption"];
            if (text == nil) {
                text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"name"];
            }
            if (text == nil) {
                text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"story"];
            }
            NSDictionary *dict = [resultArrFeed objectAtIndex:selectedIndex];

            dic=[NSDictionary  dictionaryWithObjectsAndKeys:text,@"message",nil];
            NSLog(@"%@", dict);
           // NSString *str = [dict valueForKey:@"link"];
            NSString *str = [dict valueForKey:@"link"];
            request=[NSMutableString stringWithString: @"me/feed/"];
            [request appendString:str];
             NSLog(@"appended : %@", request);
        } 
```

如果我尝试共享一种`photo`新闻源，则相同的代码可以工作。我哪里错了？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T11:19:02.097

我得到了错误：正确的代码：

```
if ([strType isEqualToString:@"link"] || [strType isEqualToString:@"video"]) {

            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"caption"];
            if (text == nil) {
                text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"name"];
            }
            if (text == nil) {
                text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"story"];
            }
            NSDictionary *dict = [resultArrFeed objectAtIndex:selectedIndex];

            NSLog(@"%@", dict);

            NSString *str = [dict valueForKey:@"link"];
            dic=[NSDictionary  dictionaryWithObjectsAndKeys:str,@"link",nil];
            request=[NSMutableString stringWithString: @"me/feed/"];

             NSLog(@" %@", dic);
        } 
```

在`request`我们只需要通过`me/feed`并且在`params`我们`FBRequest *friendRequest = [FBRequest requestWithGraphPath:request parameters:dic HTTPMethod:@"POST"];`需要通过`link=http://...`

# wix - 如何在 Wix 中使用 QtExec 在相当模式下运行 cmd 文件

> ID：14452318
> 
> 赞同：0
> 
> 时间：2013-01-22T05:47:02.033
> 
> 标签：wix, wix3.6

我用谷歌搜索了很多，但我找不到任何关于执行的工作示例。我想要的是在相当模式下运行一个 .cmd 文件。我做了以下，

```
<CustomAction Id ="QtExecCommandLine" 
              Property="QtExec23" 
              Value="&quot;C:\my\Bats\MakeFolder.cmd&quot;"
              Execute="immediate"/>
<CustomAction Id ="QtExec23" 
              BinaryKey="WixCA"
              DllEntry="CAQuietExec"
              Execute="deferred"
              Return="check"
              Impersonate="no"/>

<InstallExecuteSequence>
  <Custom Action="QtExecCommandLine" Before="InstallFinalize"></Custom>
  <Custom Action="QtExec23" After="QtExecCommandLine"></Custom>
</InstallExecuteSequence> 
```

上面的代码编译成功，但 MakeFolder.cmd 文件没有运行（如果运行，应该创建一个文件夹）

我阅读了很多帖子，但据他们说，我唯一了解的是将 WixUtil 库与`BinaryKey=WixCA`and结合使用`DllEntry=CAQuiteExec`。

我不知道我做错了什么？拜托我需要你的帮忙。

# php - php - 带有 ORDER & LIMIT 非英文字符的 mysql 结果失败

> ID：14452324
> 
> 赞同：0
> 
> 时间：2013-01-22T05:47:57.790
> 
> 标签：php, mysql, wordpress, non-english

我在 php 函数（wordpress）中有一个简单的 mysql 查询。

该函数可以正常工作，除非结果是非英文字符（或非拉丁文），例如希伯来语、阿拉伯文、中文、日文......

问题是，如果我删除`ORDER BY`和`LIMIT`命令，查询就可以正常工作。（参见代码中的注释）。

```
 $keys = $wpdb->get_col( "
                SELECT meta_key
                FROM $wpdb->postmeta
                GROUP BY meta_key
                " . $hide_underscore . "
                /* ORDER BY meta_key 
                LIMIT $limit */
                " );
if ( $keys )
            natcasesort($keys); 
```

键本身（meta_key）存在于数据库中就好了，其他功能或查询使用它们没有任何问题（所以它不是语言环境、数据库编码或字符集问题..）而且该`natcasesort()`功能似乎也不是问题 ..

看起来这是`ORDER`and / or的特定问题`LIMIT`。

这些命令失败有什么原因吗？有解决办法吗？

我试图只删除（注释掉）其中的一个，但它仍然失败。只有删除两者才能工作。

**更新我**

我忘了提

`$hide_underscore ='HAVING meta_key NOT LIKE "\_%"'`

或者

`$hide_underscore =''`

# android - Google GCM：我应该有多少个 Sender 类实例

> ID：14452326
> 
> 赞同：1
> 
> 时间：2013-01-22T05:48:07.023
> 
> 标签：android, push-notification, google-cloud-messaging

要将 PUSH 通知发送到 android 设备，我应该创建一个 Sender 类实例，而不是将其称为“发送”方法。之后，此实例超出范围，可能会进入 GC。

那么，我可以创建一个 Sender 类的实例（例如放入一些单例），然后再使用它吗？这里可能存在一些并发问题吗？

还是按需创建 Sender 实例更好？

# response - 来自 mollom 验证码的 502 错误网关

> ID：14452327
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:08.430
> 
> 标签：response, captcha, http-error

我的应用程序在一些基于表单的页面上使用了 Mollom 验证码。突然，在一台服务器上，mollom 请求需要很长时间才能返回图像和音频 url。同时，服务器在浏览器中抛出 502 Bad Gateway or Network Error (TCP Error)。问题在于以下几行：

```
MollomClient client = new MollomClient("PubKey1","PubKey2");
GetCaptchaResponse captcha = client.getImageCaptcha(null, null); 
```

在日志中，我可以在 12-14 分钟后看到响应，但到那时那已经没有用了。而且它只发生在一台服务器上（即使在那里它工作正常，直到上周）

我改写。有没有办法让我的 jboss 应用服务器等待响应直到它真正到来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:45:50.987

通过更改我的应用程序中的公钥和私钥来解决这个问题。看起来 mollom 服务已升级，不再支持旧的客户端 API

# c# - 当我创建一个从另一个 GameComponent 类派生的类时，为什么游戏类只会更新原始类的更新内容？

> ID：14452329
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:14.280
> 
> 标签：c#, class, xna, updating, derived

当我创建`ConfigsPC`从作为基类创建的另一个类派生的类时`Configs`，我无法更新该类的`Update`方法中的任何内容，`ConfigsPC`但我能够更新`Update`该类的方法中的内容`Configs`。这是我的问题，我不知道我处理这种情况的方式有什么问题，我不能做我想做的事吗？如果我是，解决此问题的可能方法是什么？

```
public class ConfigsPC : Configs
{
    public ConfigsPC(Game game)
        : base(game)
    {
        this.Initialize();
    }

    public override void Update(GameTime gameTime)
    {
        // Example of a value I'm trying to update.
        Game.IsMouseVisible = false;
        base.Update(gameTime);
    }

    public override void Draw(GameTime gameTime)
    {
        base.Draw(gameTime);
    }
}

public class Configs : Microsoft.Xna.Framework.GameComponent
{
    public Configs(Game game)
        : base(game)
    {
    }

    public override void Initialize()
    {
        base.Initialize();
    }

    public override void Update(GameTime gameTime)
    {
        base.Update(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:51:09.937

听起来你想制作你的`Update`方法[`virtual`](http://en.wikipedia.org/wiki/Method_overriding#C.23)。但是如果没有看到您的代码，很难更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:09:26.380

您还记得注册`ConfigsPC`您的游戏组件集合吗？

```
public class ConfigsPC : Configs
{
    public ConfigsPC(Game game)
        : base(game)
    {
        this.Initialize();
        game.Components.Add(this); // add this line
    } 
```

它只会对添加到集合中的组件自动调用更新。

# cuda - 什么是 CUDA 工具包的生产版本？

> ID：14452331
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:39.037
> 
> 标签：cuda

较早的 NVIDIA 曾经使用**发布候选版本 (RC)**这个词来表示本质上是 CUDA 工具包的 Beta 版本。一个适当的最终版本将在一两个月内很快发布。

现在，CUDA 5.0 已经作为**生产版本**提供了 4 个月。它的停留时间很长让我想知道产品发布意味着什么？PR 是 CUDA 5.0 的稳定版本还是 CUDA 5.0 的后续版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:12:36.043

**生产版本**是指工具包的*最终**稳定*版本，适用于生产环境。

**正如您所说， Release Candidate**本质上是一个 beta 版本，除了它有[可能](http://en.wikipedia.org/wiki/Software_release_life_cycle)成为生产版本，除非发现重大错误。

对于 CUDA 5.0，在发布生产版本之前的一段时间内，有一个候选版本可用。您应该继续使用 CUDA 5.0！

# java - 从客户端上传文件到服务器

> ID：14452332
> 
> 赞同：-3
> 
> 时间：2013-01-22T05:48:39.850
> 
> 标签：java, php, jsp, curl

我有一个在服务器上运行的小程序。它使用客户端系统中的命令提示符生成一些文件，并存储在 C: 驱动器中。现在，我想将这些文件上传到服务器上。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:17:39.760

根据您的要求，[JUpload](http://jupload.sourceforge.net/)非常适合您。转到主页以查看有关此内容的更多信息以及示例代码。

```
JUpload 解决了传统 HTML 上传表单带来的限制
通过允许您上传整个目录和其中的文件
只需单击一下。
它更常见的用途是作为一个小程序。但它也可以单独使用
应用。

```

# objective-c - Objective-c 中的得分问答游戏

> ID：14452333
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:46.500
> 
> 标签：objective-c, xcode

我正在尝试为我的测验应用程序创建一个评分。分数是我页面上的一个标签，我使用 3 个不同的页面和一个分数标签。一个是测验，然后是正确的页面和不正确的页面。最初，我在测验页面上将标签的值设置为 0。然后在选择正确答案后，它会转到相应的页面并更新分数。所以从 0 变为 1。然后它返回到当前标签为 1 的问题页面，并且当答案再次正确时应该更新为 2。我的问题是，我的标签似乎无法更新。分数从 0 开始，然后加 1，但在那之后，分数被固定为 1。这是我的代码。我很确定，我使用的逻辑有问题，所以我非常感谢所有帮助。

*问题页面

```
if(score.text == @"")
{
    int i = 0;
    strDefaultScore = [[NSString alloc] initWithFormat:@"%i", i];
    score.text = strDefaultScore;
}
else
{
    CorrectPage *update = [[CorrectPage alloc] init];
    strDefaultScore = update.updateScore;
    score.text = strDefaultScore;
} 
```

然后这是我的 CorrectPage 代码

```
QuestionPage *quiz = [[QuestionPage alloc]init];
int i = 1;
int j = [quiz.strDefaultScore intValue];
int sum = i + j;
updateScore = [[NSString alloc] initWithFormat:@"%i", sum];
currentScore.text = updateScore; 
```

我尝试使用 NSLog 检查两个页面的 strDefaultScore 的值，并且都返回 0，这就是为什么无论我得到多少正确答案，分数都是 1。我该如何纠正？

我对使用 Objective-C 知之甚少，我一直在网上搜索这方面的帮助，但找不到任何帮助，所以老实说，我不知道该怎么做。

更新：我已经设法弄清楚了。我移动了按钮事件上的代码，所以现在看起来像这样。

```
-(IBAction)btn1 {
//Redirect to the next page
CorrectPage *correct = [[CorrectPage alloc]initWithNibName:@"CorrectPage" bundle[NSBundle mainBundle]]; 
[self.navigationController pushViewController: correct animated:YES];

//Update the value of score    
int newScore = [score.text integerValue];
int sum = newScore + 1;
updatedScore = [[NSString alloc]initWithFormat:@"%i", sum];
score.text = updatedScore;

//Pass the value of new score on the next page
[correct.currentScore setText: score.Text];
} 
```

这对我有用，但我所做的是硬编码的，所以我必须把它放在每个按钮事件上。此外，由于我所做的是硬编码，我很确定有更好的方法来做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:10:39.137

在条件下仔细查看这段代码`else`：

```
CorrectPage *update;
strDefaultScore = update.updateScore;
score.text = strDefaultScore; 
```

您的`update`对象未初始化，因此它无法响应任何消息。这会更好：

```
CorrectPage *update = [[CorrectPage alloc] init]; 
```

但是您需要以`updateScore`某种方式设置该值。

另外，`QuestionPage *quiz;`有同样的问题。

# alfresco - 如何检查 Alfresco 迁移是否正确完成？

> ID：14452334
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:47.133
> 
> 标签：alfresco, alfresco-share

我可以通过数据库备份和文件和索引转换来练习 Alfresco 迁移或版本升级。

这可能是成功的，因为只要我查看，每个文档和文件夹都可以正常工作，但我仍然想检查所有内容是否正确且彻底迁移到 Alfresco 存储库，以进行确认。

任何人都知道此类工具，例如检查存储库中的文档数量，或其他有用的工具/dashlets。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:18:09.140

您可以使用以下方法检查 Lucene 索引：[Luke](https://code.google.com/p/luke/) 它是一个 Java 工具，可让您潜伏在 Lucene 索引中，因此您可以在旧存储库和新存储库之间进行比较。对于数据库，您可以使用您在网上找到的任何查询浏览器，例如 PGadmin for PostgreSQL，连接到新的 Alfresco 数据库并将其与旧数据库进行比较。您应该在存储库中查找节点数，该节点存储在 Alfresco db 的 alf_node 表中。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:01:27.283

如果您想检查升级是否成功，您需要检查 catalina.out、alfresco.log。在那里，您可以找到所有升级步骤的注释，并在 /temp/Alfresco/*.txt 中为数据库架构升级步骤生成报告。请仔细阅读/检查这些日志。没有可用的工具表明：存储库迁移成功。如果您不关心并保留问题，您的系统可能会工作，但您可能会在未来升级时遇到问题。

# c - 使用 fgets 将行复制到字符串数组中？

> ID：14452335
> 
> 赞同：0
> 
> 时间：2013-01-22T05:48:48.553
> 
> 标签：c, file-io

我有一个我正在尝试编写的 C 程序，它打算反转文件的行。我在 C 方面仍然很无能（尽管我来自 Java 背景），所以我很可能会在指针等方面犯错误，但我已经尝试随时查阅手册。这在某种程度上是一项任务。

该程序的重​​点是反转文件的内容，最多 MAX_LINES 个，每行不超过 MAX_CHARS。我想尝试的方法如下：使用 fgets 从文件中读取 80 个字符或直到 EOL，存储该字符串，然后重复该过程，直到达到 EOF 或 MAX_LINES，使用侧面的计数器。之后，我只是将相同的字符串放在不同的数组中，从 second_array[counter] 变为 0。但是，我在将字符串实际放入第一个数组时遇到了问题。这是我到目前为止所拥有的：

```
1 #include <stdio.h>
2 #include <string.h>
3
4 #define MAX_LINES 100
5 #define MAX_CHAR 80
6
7 int main(int argc, char *argv[])
8 {
9         if(argc != 2)
10                 goto out;
11         FILE *fp;
12         char *str[MAX_CHAR];
13         char buffer[MAX_CHAR];
14         char *revstr[MAX_CHAR];
15         int curr_line = 0, i = 0, j =0;
16
17         fp = fopen(argv[1],"r");
18
19         out:
20         if (fp == NULL && argc != 2){
21                 printf("File cannot be found or read failed.\n");
22                 return -1;
23         }
24
25         /* printf("This part of the program reverses the input text file, up to a  maximum of 100 lines and 80 characters per line.\n The reversed file, from the last (or    100th) line to the first, is the following:\n\n"); */
26
27         /* fgets reads one line at a time, until 80 chars, EOL or EOF */
28         while(curr_line < MAX_LINES && ((fgets(buffer, MAX_CHAR, fp)) != NULL)){
29
30                 str[i] = buffer;
31                 ++j;
32                 ++i;
33         }
34
35         for(i = 0; i < 4; ++i) 
36                 printf("%s \n", str[i]);
37
38
39         printf("END OF PROGRAM RUN.");
40         return 0;
41 } 
```

在同一目录中，我有一个“txt”文件，其中包含以下几行：

```
is this a test
this is a test
this is not a test 
```

但是，当我编译并运行程序（./a.out txt）时，我得到以下输出：

```
this is not a test

this is not a test

this is not a test

END OF PROGRAM RUN. 
```

显然这意味着它正在覆盖相同的位置，但我不确定如何纠正这一点（如前所述，指针对我来说仍然很陌生）。谁能澄清这里发生了什么？我需要改用二维数组吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:54:47.660

### 滥用`buffer`

问题是您一直将指针存储在`buffer`中`str[i]`，但`buffer`只包含读取的最后一行。

您将不得不复制读取的行，可能使用`strdup()`：

```
str[i++] = strdup(buffer); 
```

需要担心错误检查，但从概念上讲，这是处理它的一种简单方法。

> 你能澄清一下为什么会这样吗？`fgets()`存在的声明`char *fgets()`，我的印象是它暂时返回了一个指向当前从文件中读取的行的指针！

实际上，`fgets()`返回两个值之一：

*   EOF 或其他 I/O 错误时为 NULL，或
*   `buffer`，指向传递给函数的字符串的指针。

特别是，它不会自动为您创建新存储。如果你想要那个，你可能需要[`readline()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html)从 POSIX 看。

因此，您每次调用都`fgets()`使用相同的数组 ,以便读取的每个连续行都会覆盖前一行。`buffer`这就是为什么你需要以某种方式复制每一行，以及为什么我建议`strdup()`作为一种简单的方法来做到这一点。

* * *

### strdup()

该函数`strdup()`是 POSIX 的一部分，但不是标准 C 的一部分。但是，它很容易实现：

```
char *strdup(const char *str)
{
    size_t len = strlen(str) + 1;
    char  *dup = malloc(len);
    if (dup != 0)
        memmove(dup, str, len);
    return(dup);
} 
```

* * *

### 错误报告

您应该尽可能避免`goto`使用此代码很容易做到这一点。您的双重用途错误消息实际上最终会使省略参数或提供太多参数的用户感到困惑。提供两条单独的错误消息，一条用于程序的参数数量不正确，一条用于打开文件失败。

```
if (argc != 2)
{
    fprintf(stderr, "Usage: %s file\n", argv[0]);
    exit(1);
}
fp = fopen(argv[1], "r");
if (fp == 0)
{
    fprintf(stderr, "%s: failed to open file %s (%d: %s)\n",
            argv[0], argv[1], errno, strerror(errno));
    exit(1);
} 
```

请注意，应该报告错误`stderr`，而不是`stdout`；这就是错误输出通道的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:24:47.667

在您的代码中，您正在使 str 数组的每个索引指向相同的数组缓冲区。这就是为什么您为 str 数组中的每个索引获得相同的值（缓冲区中的值）。您可以像这样使用数组使用代码

```
#define MAX_LINES 100
#define MAX_CHAR 80

int main(int argc, char *argv[])
{
        if(argc != 2)
                 goto out;
         FILE *fp;
         char str[MAX_LINES][MAX_CHAR];
         char buffer[MAX_CHAR];
         char *revstr[MAX_CHAR];
         int curr_line = 0, i = 0, j =0;

         fp = fopen(argv[1],"r");

         out:
         if (fp == NULL && argc != 2){
                 printf("File cannot be found or read failed.\n");
                 return -1;
         }

         /* printf("This part of the program reverses the input text file, up to a  maximum of 100 lines and 80 characters per line.\n The reversed file, from the last (or    100th) line to the first, is the following:\n\n"); */

         /* fgets reads one line at a time, until 80 chars, EOL or EOF */
         while(curr_line < MAX_LINES && ((fgets(buffer, MAX_CHAR, fp)) != NULL)){

                 //str[i] = buffer;
                 memcpy(str[i], buffer, strlen(buffer));
                 curr_line++;
                 ++j;
                 ++i;
         }

         for(i = 0; i < 4; ++i) 
                 printf("%s \n", str[i]);

         printf("END OF PROGRAM RUN.");
         return 0;
 } 
```

你也没有修改变量 currn_line

# java - 自定义 Jira 插件：无法更新问题

> ID：14452343
> 
> 赞同：1
> 
> 时间：2013-01-22T05:49:54.653
> 
> 标签：java, servlets, jira, jira-plugin, atlassian-plugin-sdk

我正在尝试创建一个 jira 插件，该插件将更新我使用 issueKey 参数传递的任何问题的“受让人”。

它做的一切都是正确的，就像我得到了正确的 issueId 和用户但它无法更新问题并且它没有在日志中显示任何内容或打印出任何错误，但是我放入 servlet 的条件失败了。我无法让它工作，任何建议。在这种情况下，还要让我知道 doGet 和 doPost 方法。谢谢。这是代码：

```
package com.elixir.plugins.servlet;

import com.atlassian.crowd.embedded.api.User;
import com.atlassian.jira.bc.issue.IssueService;
import com.atlassian.jira.bc.issue.search.SearchService;
import com.atlassian.jira.bc.project.ProjectService;
import com.atlassian.jira.security.PermissionManager;
import com.atlassian.jira.security.Permissions;

//import com.atlassian.jira.bc.issue;//added
import com.atlassian.jira.bc.ServiceResultImpl;//added
import com.atlassian.jira.bc.issue.IssueService.IssueResult;//added
import com.atlassian.jira.bc.issue.IssueService.IssueValidationResult;//added
import com.atlassian.jira.bc.issue.IssueService.UpdateValidationResult;//added
import com.atlassian.jira.bc.issue.IssueService.TransitionValidationResult;//added

//import com.atlassian.jira.rest.v2.issue; //added
//import com.atlassian.jira.rest.api.util.*; //added
import com.atlassian.jira.util.ErrorCollection; //added

//import com.atlassian.jira.issue; //added
import com.atlassian.jira.issue.*; //added
import com.atlassian.jira.issue.Issue;
import com.atlassian.jira.issue.IssueInputParameters;
import com.atlassian.jira.issue.IssueInputParametersImpl;//added
import com.atlassian.jira.issue.worklog.Worklog;       //added
import com.atlassian.jira.issue.worklog.WorklogManager;//added
import com.atlassian.jira.workflow.*;//added
import com.atlassian.jira.ComponentManager;//added
import com.atlassian.jira.ManagerFactory;//added
import com.atlassian.jira.component.ComponentAccessor;
import com.atlassian.jira.security.JiraAuthenticationContext;
import com.atlassian.jira.config.properties.APKeys;
import com.atlassian.jira.event.issue.IssueEvent;
import com.atlassian.jira.event.issue.IssueEventManager;
import com.atlassian.jira.issue.MutableIssue;
import com.atlassian.jira.issue.search.SearchException;
import com.atlassian.jira.jql.builder.JqlClauseBuilder;
import com.atlassian.jira.jql.builder.JqlQueryBuilder;
import com.atlassian.jira.project.Project;
import com.atlassian.jira.web.bean.PagerFilter;
import com.atlassian.sal.api.user.UserManager;
import com.atlassian.templaterenderer.TemplateRenderer;
import com.google.common.collect.Maps;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.atlassian.jira.config.properties.ApplicationProperties;    //added
import com.atlassian.jira.config.properties.ApplicationPropertiesImpl;//added
import com.atlassian.jira.util.ImportUtils;                           //added
import com.atlassian.jira.util.JiraUtils;                             //added
import com.atlassian.jira.workflow.WorkflowTransitionUtil;            //added
import com.atlassian.jira.workflow.WorkflowTransitionUtilImpl;        //added

import com.atlassian.core.user.*;//added

/*import com.opensymphony.user.User;
import com.opensymphony.user.UserManager;*/
import com.opensymphony.workflow.*;
import com.opensymphony.workflow.InvalidActionException;
import com.opensymphony.workflow.WorkflowContext;
import com.opensymphony.workflow.loader.ActionDescriptor;
import com.opensymphony.workflow.loader.StepDescriptor;
import com.opensymphony.workflow.loader.AbstractDescriptor;    //added
import com.opensymphony.workflow.loader.WorkflowDescriptor;    //added
import com.atlassian.jira.workflow.ImmutableWorkflowDescriptor;//added
import com.opensymphony.module.propertyset.PropertySet;        //added
//import com.opensymphony.user.EntityNotFoundException;          //added
import com.opensymphony.util.TextUtils;                        //added
import com.opensymphony.workflow.loader.ValidatorDescriptor;   //added
import com.opensymphony.workflow.loader.DescriptorFactory;     //added
import com.opensymphony.workflow.spi.WorkflowEntry;            //added

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.*; //added
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;

import org.ofbiz.core.entity.GenericEntityException;//added
import org.ofbiz.core.entity.GenericValue;          //added

public class Unassigner extends HttpServlet {
    private static final Logger log = LoggerFactory.getLogger(Unassigner.class);
    private IssueService issueService;
    private ProjectService projectService;
    private SearchService searchService;
    private UserManager userManager;
    private TemplateRenderer templaterenderer;
    private com.atlassian.jira.user.util.UserManager jiraUserManager;

    public Unassigner(IssueService issueService, ProjectService projectService, SearchService searchService,
                     UserManager userManager, TemplateRenderer templateRenderer,
                     com.atlassian.jira.user.util.UserManager jiraUserManager) {
        this.issueService = issueService;
        this.projectService = projectService;
        this.searchService = searchService;
        this.userManager = userManager;
        this.templaterenderer = templateRenderer;
        this.jiraUserManager = jiraUserManager;
    }
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html");
        String issueKey = req.getParameter("issue");
        Issue issue = ComponentAccessor.getIssueManager().getIssueObject(issueKey);
        User loggedInUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser();
        IssueInputParameters issueInputParameters = new IssueInputParametersImpl(); 
        issueInputParameters.setAssigneeId("Unassigned");

        issueInputParameters.setRetainExistingValuesWhenParameterNotProvided(false);

        resp.getWriter().write(loggedInUser +"<br>");
        resp.getWriter().write(issue.getId() +"<br>");
        resp.getWriter().write(issueInputParameters +"<br>");

        IssueService issueService = ComponentManager.getInstance().getIssueService();
        Long issueId = issue.getId();
        UpdateValidationResult updateValidationResult = issueService.validateUpdate(loggedInUser, issueId, issueInputParameters);

        resp.getWriter().write(updateValidationResult.getErrorCollection().getErrorMessages() +"<br>");

        if (updateValidationResult.isValid()) { 
            IssueResult updateResult = issueService.update(loggedInUser, updateValidationResult);
            MutableIssue updatedIssue = updateResult.getIssue();
            resp.getWriter().write("<p style='background:LightYellow; font-family:Arial,Helvetica,sans-serif;font-size:small;'>Issue Updated "+ updatedIssue +"</p>");
        }
        if (!updateValidationResult.isValid()) {
            //final Collection<String> errorMessages = updateValidationResult.getErrorCollection().getErrorMessages();
            resp.getWriter().write("<p style='background:Pink; font-family:Arial,Helvetica,sans-serif;font-size:small;'>Issue Updated Failed</p><br>"+ updateValidationResult.getErrorCollection().getErrorMessages());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T11:40:17.413

试试下面的代码

```
MutableIssue issue = ComponentAccessor.getIssueManager().getIssueObject(issueKey);
User loggedInUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser();
issue.setAssignee(loggedInUser);
issue.store(); 
```

# asp.net - MVC3 删除了“必需”，但不断获取 data-val-required 属性

> ID：14452344
> 
> 赞同：5
> 
> 时间：2013-01-22T05:49:58.150
> 
> 标签：asp.net, asp.net-mvc-3

我的**模特**

```
 [DataType(DataType.Text)]
    [Display(Name = "Number of Employee")]
    public int NumberOfEmployee { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "CEO Birthday")]
    [DateRange(2)]
    public DateTime CEO_Birthday { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "Organisation Anniversary")]
    [DateRange(3)]
    public DateTime OrgAnniversary { get; set; } 
```

我的**观点**

```
 <tr>
            <td style="border:0;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.NumberOfEmployee)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.NumberOfEmployee)
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;vertical-align:middle;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.CEO_Birthday)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.CEO_Birthday, new { @class="date"})
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;vertical-align:middle;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.OrgAnniversary)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.OrgAnniversary, new { @class = "date" })
                </div>
            </td>
          </tr> 
```

我的**Global.asax.cs**

```
protected void Application_Start()
    {
        DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
       .....
    } 
```

我的模型中没有必需的属性，但我仍然得到这个

![在此处输入图像描述](../Images/0c1e679d4322f2a993f8104472c5c353.png)

我参考[此](https://stackoverflow.com/questions/4700172/unrequired-property-keeps-getting-data-val-required-attribute)删除必填字段，但它不适用于我的代码。帮我删除必填字段。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T09:01:51.763

我通过设置可为空模型的属性得到我的答案，即。

```
 [DataType(DataType.Text)]
    [Display(Name = "Number of Employee")]
    public int? NumberOfEmployee { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "CEO Birthday")]
    [DateRange(2)]
    public DateTime? CEO_Birthday { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "Organisation Anniversary")]
    [DateRange(3)]
    public DateTime? OrgAnniversary { get; set; } 
```

不需要添加这个

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

# c++ - 在纯本机代码中使用托管对象

> ID：14452354
> 
> 赞同：0
> 
> 时间：2013-01-22T05:51:00.280
> 
> 标签：c++, visual-studio-2010, unmanaged, managed

我开始了：我有一个用 Linux(C++) 编写并移至 Windows 的代码库。我使用 CMake 来获取 sln 文件。我在 Visual Studio 2010 中打开了 sln 文件，并使用“无 clr 支持选项”构建了项目。

现在我有一个托管的 dll。我想创建和使用该 dll 中包含的类的对象。我做了很多谷歌搜索并浏览了 3-4 个教程，例如：

[http://www.codeproject.com/Articles/35041/Mixing-NET-and-native-code](http://www.codeproject.com/Articles/35041/Mixing-NET-and-native-code) 但它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:09:14.773

您首先需要为托管 DLL 编写一个 COM Callable Wrapper (CCW)。这将使托管对象看起来像本机代码的 COM 对象。然后，您可以像使用 COM 服务器一样使用托管对象。

这是关于 CCW 的链接 - [http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)

此链接将为您提供执行此操作所需的所有其他内容的参考 - [http://msdn.microsoft.com/en-us/library/zsfww439.aspx](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)

# c# - 如何在将参数传递给加载和保存时提高 XMLDocument 性能

> ID：14452355
> 
> 赞同：1
> 
> 时间：2013-01-22T05:51:07.940
> 
> 标签：c#, xml

我正在尝试提高我的 web 和桌面应用程序的性能，这些 web 和 win 表单应用程序都用于读取和写入 xml 文件。但我仍然对我用来提高应用程序性能的东西感到困惑。

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(fileStream);
xmlDoc.Save(fileStream); 
```

所以我传递什么类型的参数来加载和保存函数，即它可能是文件流对象，也可能只是文件名。从而提高应用性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:58:23.650

您确定吗，您的性能瓶颈在于 Xml 加载，如果是这样，请尝试将其放在不同的线程中

或者

如果文档太大并且您尝试仅加载部分项目，请尝试 [这样的操作](http://lennilobel.wordpress.com/2009/09/02/streaming-into-linq-to-xml-using-c-custom-iterators-and-xmlreader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:09:00.483

我不推荐使用，`XmlDocument xmlDoc = new XmlDocument();`因为有更好、更清洁的方法可以使用

`XDocument xmlDoc = new XDocument()`; 提供更容易的实施和未来的整体变化

那么你可以使用

```
doc.Load("PurchaseOrder.xml"); 
```

或者如果您是从网上下载，我建议您使用 Async with weblcient

```
WebClient wclient = new WebClient();
wclient.DownloadStringAsync(new Uri("url of your xml"));
wclient.DownloadStringCompleted += FilesIsCompleted;
private void FilesIsCompleted(object sender, DownloadStringCompletedEventArgs e)
 {

    XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);

 } 
```

# ruby-on-rails - 如果我想在所有验证中显示相同的错误消息，我该如何编码？

> ID：14452356
> 
> 赞同：0
> 
> 时间：2013-01-22T05:51:08.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我想在所有验证中显示相同的错误消息，我该如何编码？

`presence`我有 3 个标准，例如`uniqueness`和`length`。
我想要同样的错误信息。
但是我的代码仅在与长度错误匹配时才有效。
我如何申请所有（其他两个）？

```
validates :title,   
    :presence => true,   
    :uniqueness => true,   
    :length => { :maximum => 100, :message => "Must be unique, and has to be less than 100 characters"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:10:10.297

我相信有一种方法可以做到这一点`validates`，但如果我遇到这个问题，我可能只是编写一个自定义验证：

```
validate :title_format

def title_format
  if title.blank? || title.length > 100 || Post.where(:title => title).exists? 
    errors.add(:title, "Must be unique and less than 100 characters")
  end
end 
```

（用您的实际型号名称替换 Post，自然。）

顺便说一句，您的消息说“少于 100 个字符”，但您实际上是在验证“少于或等于 100 个字符”。您可能希望选择其中一个并保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:17:54.283

它可以通过*验证来完成*

```
validates :title, 
      :presence => {:message => "Must be unique, and has to be less than 100 characters" },
      :uniqueness => {:message => "Must be unique, and has to be less than 100 characters"},
      :length => { :maximum => 100, :message => "Must be unique, and has to be less than 100 characters"} 
```

# joomla - 适用于 Joomla 2.5 的 Joomfish

> ID：14452361
> 
> 赞同：0
> 
> 时间：2013-01-22T05:51:31.813
> 
> 标签：joomla, joomla2.5, joomfish

我在 Joomla 2.5 中安装了 Jomfish 组件，并成功安装了意大利语的核心 laguage 插件。

但是在为意大利语安装 Joomfish 翻译时，我收到一个错误 - “正在中止语言安装：另一个扩展程序已经在使用目录”

请发表评论。

# node.js - 我可以在 nodeJs-mongoDb 驱动程序中访问 mongoDB 控制台吗

> ID：14452362
> 
> 赞同：0
> 
> 时间：2013-01-22T05:51:33.157
> 
> 标签：node.js, mongodb

Nodejs mongoDb 驱动代码访问和创建数据库

```
var mongo = require("mongodb");
var db = new mongo.Db("myapp", new mongo.Server("localhost", 27017));
var people = db.collection("people"); 
```

并查询

```
people.find() 
```

有什么方法可以在 nodeJs mongoDb 驱动程序中访问 mongoDb 控制台，以便我可以在那里测试我的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:16:32.533

您在控制台中运行的任何命令都可以使用 Db 对象上的 .command 函数通过驱动程序运行。但是我建议您使用控制台进行管理，因为它比使用驱动程序重复工作要容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:56:04.070

您可能正在寻找[mongo-sync](https://npmjs.org/package/mongo-sync)或[Mongolian DeadBeef](https://github.com/marcello3d/node-mongolian/)，它们被宣传为 nodejs 驱动程序，它们更接近于 mongo 命令行界面的模式。不过我会谨慎使用它们，因为它们不是核心 mongo 支持的驱动程序。

# c# - winform图表中的大数据如何处理

> ID：14452371
> 
> 赞同：0
> 
> 时间：2013-01-22T05:51:54.087
> 
> 标签：c#, winforms, charts, large-data

我做了一个简单的图表，一个系列，加分

```
chart1.series[0].points.addxy(x,y); 
```

它适用于一小部分数据，但有时我需要多达 1000 万个点，而且速度相对较慢，在 i7 PC 上可能会失去响应几秒钟。

如何优化性能？

系统绘制点时是否可以使其成为多线程？

是否有任何隐藏的配置可以使过程更快？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:02:32.267

最明显的速度改进机会似乎是减少您绘制的点数。

1280x1024 的平均显示器分辨率将被 130 万个点完全饱和，假设每个点都是唯一的（可能它们不是，否则图表将毫无价值......只是一个巨大的色块）。

这只是 130 万点……你说的是试图显示大约 7 倍。它根本无法全部显示在屏幕上。

那么，鉴于您不能一次看到那么多数据，您如何削减数据呢？这取决于对您来说什么是重要的、您的数据是什么样的、什么是关键的等等……但一种可能的选择包括时间间隔的平均点。

# ios - 将 Sqlite 选择结果转储到 xml

> ID：14452374
> 
> 赞同：0
> 
> 时间：2013-01-22T05:52:06.613
> 
> 标签：ios, xml, sqlite

我想从选择查询的结果中生成结构化的 xml。我尝试使用 FOR XML，但它不起作用。我应该如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:39:43.980

SQLite 没有 XML 格式化功能。您必须在代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:02:40.417

如果我们使用 sqlite3 命令行工具，我们可以选择以下输出模式（来自 .help 命令）：

```
.mode MODE ?TABLE?  Set output mode where MODE is one of:
      csv      Comma-separated values
      column   Left-aligned columns.  (See .width)
      html     HTML <table> code
      insert   SQL insert statements for TABLE
      line     One value per line
      list     Values delimited by .separator string
      tabs     Tab-separated values
      tcl      TCL list elements 
```

有 HTML 模式，但目前没有 XML 模式。

# javascript - 无法使用 jquery 处理来自 xml 响应的某些字符

> ID：14452377
> 
> 赞同：3
> 
> 时间：2013-01-22T05:52:32.120
> 
> 标签：javascript, jquery, xml

我正在尝试从服务器端（java）获取 xml 响应。我在[Fiddler](http://www.fiddler2.com/fiddler2/)中进行了检查，它按预期返回响应，状态码为 200，但是我的 Jquery 发布函数正在发送对错误的响应，给我一个警报“从服务器获取 xml 时出错”。是 i18n 的问题吗？我能够读取和解析其他 xml 响应，我怎样才能对这种响应做同样的事情

我的代码：

```
var jqxhr =$.post(redirectMainUrl+"globalaction.action", {
    sessiontoken: sessiontoken,
    action: "getFile",
    absFileName: file_path
},
function(xml1) {
    alert($(xml1).find("lastDayErrorLogs")
                 .children("log")
                 .children("logEvent")
                  .attr("message"));
})
.error(function() {
    if(jqxhr.responseText == 'INVALID_SESSION') {
        alert("Your Session has been timed out");
        window.location.replace(communities); 
    } else {
        alert("Error while getting xml from server");
        goToHomePage();
}
}); 
```

来自服务器的响应 (xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="client.xsl"?>
<client version="1.0" >
      <product>
    <lastDayErrorLogs><log>

    <logEvent timestamp="2013-1-15_10:56:6"  severity="1" messageCode="CNX_53021" message="Solicitação inválida recebida." user="" stacktrace="" service="Rep_Service_Prd" serviceType="RS" clientNode="node01_jbpaetlsr2" pid="11900" threadName="11772" context="">
    </logEvent>
    </log></lastDayErrorLogs></product>
</client> 
```

由于以下属性的内容导致的问题

```
message="Solicitação inválida recebida." 
```

**更新**：

在@Unsung 的评论之后，我检查`jqxhr.responseText`了它是否包含响应 xml，所以我想在错误函数中解析 xml。

但即使在对我的`error`功能进行更改后，我在 Internet Explorer 8 中也会出现以下错误

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; .NET4.0E)
Timestamp: Tue, 22 Jan 2013 06:57:44 UTC

Message: Invalid XML: <?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="client.xsl"?>
 <client version="1.0">
  <product>
<lastDayErrorLogs><log>

<logEvent timestamp="2013-1-15_10:56:6"  severity="1" messageCode="CNX_53021" message="Solicita invda recebida." user="" stacktrace="" service="Rep_Service_Prd" serviceType="RS" clientNode="node01_jbpaetlsr002" pid="11900" threadName="11772" context="">
</logEvent>
</log></lastDayErrorLogs></product>
</client>
Line: 2
Char: 10691
Code: 0
URI: http://xxxx:10270/...include/js/jquery.js 
```

误差函数：

```
.error(function() {
    if (jqxhr.responseText == 'INVALID_SESSION') {
        alert("Your Session has been timed out");
        window.location.replace(communities);
    } else {
        alert("Error while getting xml from server");
        var xml=StringtoXML(jqxhr.responseText);
        var csmXmlDoc = $.parseXML( jqxhr.responseText ),
        $csmxml = $( csmXmlDoc ),
        $csmTitle = $csmxml.find("product").children("version");

        alert($csmTitle.text()+", "+$(xml).find("product").children("version").text());
        //goToHomePage();
    }
}) 
```

# blackberry - 使用浏览器字段时未加载黑莓模拟器

> ID：14452383
> 
> 赞同：0
> 
> 时间：2013-01-22T05:53:27.957
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde, blackberry-webworks

我是 BB 编程新手。尝试在应用程序中打开 google url。我在测试时

模拟器9900，显示错误如下：

![RenderingSession#getBrowserContent() 抛出 RenderingException](../Images/44d79176400e415ad1b4110a55cffbd6.png)

> RenderingSession#getBrowserContent() 抛出 net.rim.device.api.browser.field.RenderingException: IOException in connection

我启用了 MDS-CS。但我仍然遇到这个问题。

代码如下，即BB给出的示例。

```
public final class BrowserFieldDemo extends UiApplication implements RenderingApplication 
{

    private static final String REFERER = "referer";  

    private RenderingSession _renderingSession;   
    private HttpConnection  _currentConnection;
    private MainScreen _mainScreen;

    /**
     * Entry point for application
     * @param args Command line arguments (not used)
     */
    public static void main(String[] args) 
    {
        BrowserFieldDemo app = new BrowserFieldDemo();

        // Make the currently running thread the application's event
        // dispatch thread and begin processing events.
        app.enterEventDispatcher();
    }

    /**
     * Creates a new BrowserFieldDemo object
     */
    public BrowserFieldDemo() 
    {       
        _mainScreen = new MainScreen(Screen.HORIZONTAL_SCROLL);        
        pushScreen(_mainScreen);
        _renderingSession = RenderingSession.getNewInstance();

        // Enable javascript
        //_renderingSession.getRenderingOptions().setProperty(RenderingOptions.CORE_OPTIONS_GUID, RenderingOptions.JAVASCRIPT_ENABLED, true);                        

        PrimaryResourceFetchThread thread = new PrimaryResourceFetchThread("http://www.google.com", null, null, null, this);
        thread.start();            
    }

    /**
     * Processes an http connection
     * 
     * @param connection The connection to the web content
     * @param e The event triggering the connection
     */
    void processConnection(HttpConnection connection, Event e) 
    {
        // Cancel previous request
        if (_currentConnection != null) 
        {
            try 
            {
                _currentConnection.close();
            } 
            catch (IOException e1) 
            {                
            }
        }

        _currentConnection = connection;

        BrowserContent browserContent = null;

        try 
        {
            browserContent = _renderingSession.getBrowserContent(connection, this, e);

            if (browserContent != null) 
            {
                Field field = browserContent.getDisplayableContent();

                if (field != null) 
                {
                    synchronized (Application.getEventLock()) 
                    {
                        _mainScreen.deleteAll();
                        _mainScreen.add(field);
                    }
                }

                browserContent.finishLoading();
            }

        } 
        catch (RenderingException re) 
        {
            Utilities.errorDialog("RenderingSession#getBrowserContent() threw " + re.toString());
        } 
        finally 
        {
            SecondaryResourceFetchThread.doneAddingImages();
        }

    }    

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#eventOccurred(Event)
     */
    public Object eventOccurred(Event event) 
    {
        int eventId = event.getUID();

        switch (eventId) 
        {
            case Event.EVENT_URL_REQUESTED : 
            {
                UrlRequestedEvent urlRequestedEvent = (UrlRequestedEvent) event;    

                PrimaryResourceFetchThread thread = new PrimaryResourceFetchThread(urlRequestedEvent.getURL(),
                                                                                         urlRequestedEvent.getHeaders(), 
                                                                                         urlRequestedEvent.getPostData(),
                                                                                         event, this);
                thread.start();

                break;

            } 
            case Event.EVENT_BROWSER_CONTENT_CHANGED: 
            {                
                // Browser field title might have changed update title.
                BrowserContentChangedEvent browserContentChangedEvent = (BrowserContentChangedEvent) event; 

                if (browserContentChangedEvent.getSource() instanceof BrowserContent) 
                { 
                    BrowserContent browserField = (BrowserContent) browserContentChangedEvent.getSource(); 
                    String newTitle = browserField.getTitle();
                    if (newTitle != null) 
                    {
                        synchronized (getAppEventLock()) 
                        { 
                            _mainScreen.setTitle(newTitle);
                        }                                               
                    }                                       
                }                   

                break;                

            } 
            case Event.EVENT_REDIRECT : 
            {
                RedirectEvent e = (RedirectEvent) event;
                String referrer = e.getSourceURL();

                switch (e.getType()) 
                {  
                    case RedirectEvent.TYPE_SINGLE_FRAME_REDIRECT :
                        // Show redirect message.
                        Application.getApplication().invokeAndWait(new Runnable() 
                        {
                            public void run() 
                            {
                                Status.show("You are being redirected to a different page...");
                            }
                        });

                    break;

                    case RedirectEvent.TYPE_JAVASCRIPT :
                        break;

                    case RedirectEvent.TYPE_META :
                        // MSIE and Mozilla don't send a Referer for META Refresh.
                        referrer = null;     
                        break;

                    case RedirectEvent.TYPE_300_REDIRECT :
                        // MSIE, Mozilla, and Opera all send the original
                        // request's Referer as the Referer for the new
                        // request.
                        Object eventSource = e.getSource();
                        if (eventSource instanceof HttpConnection) 
                        {
                            referrer = ((HttpConnection)eventSource).getRequestProperty(REFERER);
                        }

                        break;
                    }

                    HttpHeaders requestHeaders = new HttpHeaders();
                    requestHeaders.setProperty(REFERER, referrer);
                    PrimaryResourceFetchThread thread = new PrimaryResourceFetchThread(e.getLocation(), requestHeaders,null, event, this);
                    thread.start();
                    break;

            } 
            case Event.EVENT_CLOSE :
                // TODO: close the appication
                break;

            case Event.EVENT_SET_HEADER :        // No cache support.
            case Event.EVENT_SET_HTTP_COOKIE :   // No cookie support.
            case Event.EVENT_HISTORY :           // No history support.
            case Event.EVENT_EXECUTING_SCRIPT :  // No progress bar is supported.
            case Event.EVENT_FULL_WINDOW :       // No full window support.
            case Event.EVENT_STOP :              // No stop loading support.
            default :
        }

        return null;
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#getAvailableHeight(BrowserContent)
     */
    public int getAvailableHeight(BrowserContent browserField) 
    {
        // Field has full screen.
        return Display.getHeight();
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#getAvailableWidth(BrowserContent)
     */
    public int getAvailableWidth(BrowserContent browserField) 
    {
        // Field has full screen.
        return Display.getWidth();
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#getHistoryPosition(BrowserContent)
     */
    public int getHistoryPosition(BrowserContent browserField) 
    {
        // No history support.
        return 0;
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#getHTTPCookie(String)
     */
    public String getHTTPCookie(String url) 
    {
        // No cookie support.
        return null;
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#getResource(RequestedResource, BrowserContent)
     */
    public HttpConnection getResource( RequestedResource resource, BrowserContent referrer) 
    {
        if (resource == null) 
        {
            return null;
        }

        // Check if this is cache-only request.
        if (resource.isCacheOnly()) 
        {
            // No cache support.
            return null;
        }

        String url = resource.getUrl();

        if (url == null) 
        {
            return null;
        }

        // If referrer is null we must return the connection.
        if (referrer == null) 
        {
            HttpConnection connection = Utilities.makeConnection(resource.getUrl(), resource.getRequestHeaders(), null);

            return connection;

        } 
        else 
        {
            // If referrer is provided we can set up the connection on a separate thread.
            SecondaryResourceFetchThread.enqueue(resource, referrer);
        }

        return null;
    }

    /**
     * @see net.rim.device.api.browser.field.RenderingApplication#invokeRunnable(Runnable)
     */
    public void invokeRunnable(Runnable runnable) 
    {       
        (new Thread(runnable)).start();
    }
}

/**
 * A Thread class to fetch content using an http connection
 */
final class PrimaryResourceFetchThread extends Thread 
{    
    private BrowserFieldDemo _application;
    private Event _event;
    private byte[] _postData;
    private HttpHeaders _requestHeaders;
    private String _url;

    /**
     * Constructor to create a PrimaryResourceFetchThread which fetches the web
     * resource from the specified url.
     * 
     * @param url The url to fetch the content from
     * @param requestHeaders The http request headers used to fetch the content
     * @param postData Data which is to be posted to the url
     * @param event The event triggering the connection
     * @param application The application requesting the connection
     */
    PrimaryResourceFetchThread(String url, HttpHeaders requestHeaders, byte[] postData, Event event, BrowserFieldDemo application) 
    {
        _url = url;
        _requestHeaders = requestHeaders;
        _postData = postData;
        _application = application;
        _event = event;
    }

    /**
     * Connects to the url associated with this object
     * 
     * @see java.lang.Thread#run()
     */
    public void run() 
    {
        HttpConnection connection = Utilities.makeConnection(_url, _requestHeaders, _postData);
        _application.processConnection(connection, _event);        
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T10:30:35.677

这是我会尝试的：

1.  首先，获取您尝试加载的 URL（看起来是`http://www.google.com`），退出您的应用程序，然后使用模拟器的**普通浏览器应用程序**访问相同的 URL。它有效吗？如果在浏览器里不行，那在你的app里也行不通，需要调试一下模拟器连接不上网络的原因。

2.  您是否有阻止模拟器的**软件防火墙（例如 Windows 防火墙）？**如果您确实运行了防火墙，则需要确保`fledge.exe`允许该进程建立网络连接，否则这将不起作用。您可能还需要为该`java.exe`过程授予例外。对于 BB 7.1 插件，fledge 过程对我来说是这样的：

    C:\eclipse\indigo\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\components\simulator\fledge.exe

    当然，该路径的根目录会有所不同，具体取决于您安装 Eclipse 的位置。

3.  尝试在 Java 代码中**更改 URL 。**所有 URL 都会出现同样的问题吗？

4.  是`http://www.google.com`因为某种原因**被封锁**，*你在*哪里？我不知道互联网服务提供商如何在世界各地工作。至少，也许您需要使用`http://www.google.co.in`，或类似的东西。

5.  我不确定您要针对哪个版本的 BB OS。现在大多数人（如果他们仍然支持 BlackBerry Java）不支持低于 OS 5.0 的任何东西。如果您可以限制对 OS 5.0+ 的支持，那么我建议您甚至不要使用该演示中的代码。在 5.0 中有[BrowserField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html)类，也称为**BrowserField2**。这个类更容易使用。您可以在插件的同一个 BlackBerry 示例文件夹中找到一个单独的演示。它被称为`browserfield2demo`。尝试运行那个演示，看看你是否有同样的问题。

6.  如果您想坚持使用原始（5.0 之前）BrowserFieldDemo，那么您可以修改代码以获取更多调试信息。**例外**来自这里：

    ```
    catch (RenderingException re) 
    {
        Utilities.errorDialog("RenderingSession#getBrowserContent() threw " + re.toString());
    } 
    ```

    尝试将代码更改为

    ```
    catch (RenderingException re) 
    {
        Utilities.errorDialog("RenderingSession#getBrowserContent() threw " + re.toString());
        System.out.println(re.printStackTrace());
    } 
    ```

    并在 Eclipse 控制台窗口中查找堆栈跟踪。这应该提供更多信息。

7.  **您是否可能在关闭网络连接**的情况下运行您的模拟器？有些人（包括我自己）习惯于在关闭网络连接的情况下启动模拟器，希望它能加快进程。当然，如果您正在测试的应用程序使用网络，那么您必须在启动应用程序之前通过选项启用它。如果网络连接（例如 GSM 或 Wi-Fi）关闭，上述步骤 (1) 将失败，但您可能没有注意到失败的*原因*。

8.  您的 Eclipse 运行/调试配置是否设置为在模拟器启动时自动运行应用程序？如果是这样，我建议不要这样做，并将其配置为让您手动运行应用程序，方法是像用户一样单击应用程序图标。**您可以在Debug Configurations**窗口的**Simulator** -> **General**窗格中查看是否以这种方式设置。清除启动时**启动应用程序或 URL**框：

![在此处输入图像描述](../Images/65d344e54827a955df77f6ab929318c3.png)

这些是我的建议。在我看来，这就像一般的网络故障。我的猜测是防火墙问题（请记住，您可能必须在安装的每个 JDE 插件版本中为模拟器添加防火墙例外...... 5.0、6.0、7.0、7.1）。

但请尝试这些步骤并发布更多信息。祝你好运！

# ios - 向 Google Place API 添加地点的问题

> ID：14452384
> 
> 赞同：1
> 
> 时间：2013-01-22T05:53:30.987
> 
> 标签：ios, objective-c, google-api

我有一个位置数据要添加到字典中

```
[latLong setObject:@"33.6667" forKey:@"lat"];
[latLong setObject:@"73.1667" forKey:@"lng"];
[locDict setObject:latLong forKey:@"location"];
[locDict setObject:@"50" forKey:@"accuracy"];
[locDict setObject:@"Conve" forKey:@"name"];
[locDict setObject:[NSArray arrayWithObjects:@"moving_company", @"general_contractor", nil] forKey:@"types"];
[locDict setObject:@"en" forKey:@"language"]; 
```

然后我从该发布请求创建 JSON 数据

```
NSString *jsonRequest = [locDict JSONRepresentation];
NSData *requestData= [jsonRequest dataUsingEncoding:NSUTF8StringEncoding];    

NSString *urlString = @"https://maps.googleapis.com/maps/api/place/add/json&sensor=false&key=AIzaSyDrGuhso6MRdEmnvAMa-e4iMQuYo";  //key altered
NSString *encodedUrl = [urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:encodedUrl]];
[req setHTTPMethod:@"POST"];
[req setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[req setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[req setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[req setHTTPBody:requestData];
NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:req delegate:self]; 
```

它总是给我 404 错误。我已经尝试使用设备中的 lat-lng 并将传感器参数设置为 true，但结果始终相同。

# c++ - 为什么我的 libmpg123 build 不支持浮点？如何启用它？

> ID：14452386
> 
> 赞同：1
> 
> 时间：2013-01-22T05:53:40.893
> 
> 标签：c++, audio, encoding, floating-point, mpeg

来自libmpg123 源文件中的`good_enc`函数。`format.c`它用于检查当前构建是否支持指定的编码。

下图取自调试会话，在此期间它检查是否`MPG123_ENC_FLOAT_32`支持 (enc == 512, 等效于 ) 32 位浮点编码。

![在此处输入图像描述](../Images/535b27835c3dc3f4ae546cbc7f822104.png)

如图所示，由于某种原因，我的构建不支持 32 位浮点编码。

我在 Windows 7 x64 Home Premium 上运行它，源代码按原样下载和编译。

有没有我错过的配置？从网站上的文档看来，

> 32 位浮点数通常以 mpg123-1.7.0 开头

我正在使用版本 1.14.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:49:44.403

我不知道你的 1.14.4 版本是否已经支持浮点 - 上次我知道它是由最后一个 svn trunk "only" 支持的。

所以也许从那里拉出来并再次编译。

无论如何，在默认来源中包含一个“廉价黑客”，以强制启用您的浮点。

```
 /* Simple hack to enable floating point output. */
if(argc >= 4 && !strcmp(argv[3], "f32")) mpg123_param(mh, MPG123_ADD_FLAGS, MPG123_FORCE_FLOAT, 0.); 
```

如此处所示：[http ://www.mpg123.de/api/mpg123_ *to* _wav_8c_source.shtml](http://www.mpg123.de/api/mpg123__to__wav_8c_source.shtml)

# java - 返回 x 参数匿名对象

> ID：14452390
> 
> 赞同：2
> 
> 时间：2013-01-22T05:54:05.960
> 
> 标签：java

在 Java 中，有时我需要返回一个像 Point(x,y) 这样的结构变量。但是，我只在代码的 1 个地方和 1 次使用这个结果。因此，声明一个名为 Point 的类似乎有些过分。有没有办法返回某种带有 x 个参数的匿名对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:14:37.583

您可以返回 an `ArrayList`，但问题是， an`ArrayList`绑定到一种特定类型，因此如果这些参数具有不同的类型，则必须对它们进行类型转换。在您的示例中，`x`并且`y`是类型`int`或`double`我猜，但仍然如此。

如果你想要一些“匿名”类，它仍然需要一个类签名。你可能想`Point`作为一个内部类，像这样：

```
public class SomeClass {
    class Point {
        private int x;
        private int y;
        public Point(int x, int y) {
            this.x = x;
            this.y = y;
        }
    }

    private Point p;
} 
```

为什么要嵌套类？[Java™ 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html) `Point`说明了原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:03:30.760

您可以返回`Array`或`ArrayList`。

```
int[] GetPoint( ... )
{
    int[] arr = null;
    // ...
    // Find length (say len)

    arr = new int[len];

    // Business logic
    // ...

    return arr;
} 
```

# c# - 我们可以在 Windows 应用程序中使用 Jquery 吗？

> ID：14452391
> 
> 赞同：1
> 
> 时间：2013-01-22T05:54:08.797
> 
> 标签：c#, jquery, .net, c#-4.0

我想使用 jquery 的一些特性，比如项目拖放。那么我们可以在 windows 应用程序（c#）中使用 jquery 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T05:57:02.560

您可以在您的 WinForms 或 WPF 应用程序中包含一个[`WebBrowser`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)，并在 Web 浏览器中使用 jQuery。

此外还有[Chromium Embedded](https://code.google.com/p/chromiumembedded/)，您也可以从 .NET 中使用它（请参阅“[外部项目](https://code.google.com/p/chromiumembedded/#External_Projects)”部分）。这为您提供了 Google Chrome 网络浏览器的核心网络浏览器引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:22:09.717

很少有项目开始在桌面应用程序上推送 Nodejs。但是仍然处于非常业余的阶段，您必须等待一段时间......但是如果您正在计划 Windows 8 应用程序，则可能以非常有限的方式进行。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:18:45.527

Jquery 在 IE、Chrom 等浏览器中运行。你不能在 windows 应用程序中使用 jquery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:55:21.713

不，你不能使用它，但你可以利用[WPF 控件](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)在你的应用程序中实现它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T06:06:54.903

我认为您可以使用 Jint 来运行 javascript，但对于 jquery，它需要 DOM。因此，除非您不想要 UI，否则您无法做到。

> cscript、wscript 和 Windows Scripting Host 对象允许您执行在浏览器中无法执行的操作，但这些非常限于脚本任务，并且不允许您创建 GUI。

# wpf - 绑定到 ObservableCollection 的 LongListSelector 不更新

> ID：14452395
> 
> 赞同：1
> 
> 时间：2013-01-22T05:54:30.357
> 
> 标签：wpf, data-binding, windows-phone-8, observablecollection, longlistselector

我有一个`ObservableCollection`，它是实现`INotifyPropertyChanged`接口的视图模型的集合......

```
public class FeedsViewModel : ObservableCollection<FeedViewModel>
{
} 
```

（我没有包含代码，`FeedViewModel`但它非常标准`INotifyPropertyChanged`并且在独立测试时绑定）。

我在控件中使用`FeedsViewModel`as 的一个实例...`ItemsSource``LongListSelector`

```
<UserControl.Resources>
    <viewModel:FeedStatusFeedbackConverter x:Key="ProgressStatusColorConverter"/>
    <viewModel:FeedStatusFeedbackConverter x:Key="TitleStatusColorConverter"/>
    <viewModel:FeedsViewModel x:Key="FeedsViewModel"/>
</UserControl.Resources>

<phone:LongListSelector ItemsSource="{Binding Source={StaticResource FeedsViewModel}}">
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>

            <Grid x:Name="LayoutRoot" 
                  Background="{StaticResource PhoneChromeBrush}"
                  DataContext="{TemplateBinding}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="{Binding Path=Name}" 
                               Grid.Row="0"
                               Style="{StaticResource PhoneTextLargeStyle}"
                               Foreground="{Binding Path=Status, Converter={StaticResource TitleStatusColorConverter}}"/>
                    <TextBlock Text="{Binding Path=Uri}" 
                               Grid.Row="1"
                               Style="{StaticResource PhoneTextNormalStyle}" 
                               TextTrimming="WordEllipsis" />
                    <ProgressBar Grid.Row="2"
                                 Maximum="{Binding Path=ItemCount}"
                                 Value="{Binding Path=ItemProgress}"
                                 Foreground="{Binding Path=Status, Converter={StaticResource ProgressStatusColorConverter}}">
                    </ProgressBar>
                </Grid>

                <Grid Grid.Column="1">
                    <Image Name="Delete" 
                           Source="/Assets/Buttons/delete.png"
                           Width="48"
                           Height="48"
                           Margin="5"
                           MouseLeftButtonDown="Press"
                           MouseLeftButtonUp="Release"/>
                </Grid>
            </Grid>

        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

但是，当我在运行时向 ObservableCollection 添加一些内容时，UI 不会随着更改而更新......

```
private void AddFeedClick(object sender, EventArgs e)
{
    var task = FeedModel.Load("Reddit");
    var awaiter = task.GetAwaiter();

    awaiter.OnCompleted(() =>
    {
        var model = awaiter.GetResult();
        FeedModel.Save(model);
        ((ObservableCollection<FeedViewModel>)Resources["FeedsViewModel"]).Add(new FeedViewModel(model));
    });
} 
```

当新的视图模型被添加到时点击断点`ObservableCollection`并检查集合表明`CollectionChanged`集合事件没有处理程序（为空）。

如何让 LongListSelector 从 ObservableCollection 更新自身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:50:38.767

1.  尝试将集合绑定为代码中的项目源，而不是静态绑定（设置 List.ItemSource=collection）。如果 CollectionChanged 为 null，则表示没有订阅者更改集合。
2.  您也可以尝试同步添加项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:09:01.070

我通过将铸件更改为项目的实际类型来解决`AddFeedClick`此问题`(ObservableCollection<FeedViewModel>`。`FeedsViewModel`尽管没有发生无效转换，但这里肯定有一些晦涩的 OO 功能在起作用。我怀疑集合上实际上有两个阴影事件，一个用于`ObservableCollection`类型，一个用于扩展类型，但我不确定。

# jasper-reports - 如何在软件中显示输入的带有特殊字符的描述以报告预览？

> ID：14452399
> 
> 赞同：-2
> 
> 时间：2013-01-22T05:54:53.700
> 
> 标签：jasper-reports

我们在下面的应用程序中输入了产品描述：

![在此处输入图像描述](../Images/3efc434573ba2c0cee172cac00aadf39.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:02:17.197

而不是使用特殊字符，如`-----`or `=====`。利用报告**`Line`**元素。

从 中拖动一个线元素**`Pallete`**并将其放置在编辑器中所需的位置。

然后编辑属性。

在该**`Graphic Properties`**部分，

更改**`Pen`**类型以将不同的线条绘制为*Dotted 或 Dashed*。

## 更新：

关于对齐，确实有多种方法。

请参阅示例设计，我使用单独的静态文本字段来显示`:`.

对于数值，保留它们`Right Aligned`。如果需要，您还可以为**`Padding and Borders`**字段添加 。右键单击该字段并选择**`Padding and Borders`**选项。

![样品设计](../Images/fcbd70b31a45aeb382f81d8eaa7f3dfd.png)

希望这可以帮助。

# jquery - jQuery 的 mouseover/mouseout 解决方法

> ID：14452400
> 
> 赞同：2
> 
> 时间：2013-01-22T05:54:55.233
> 
> 标签：jquery, events, knockout.js, mouseover

有人可以解释这段代码[https://github.com/jquery/jquery/blob/master/src/event.js#L646-L670](https://github.com/jquery/jquery/blob/master/src/event.js#L646-L670)吗？

我使用淘汰赛，但在 Opera 中遇到问题。我试图重现，但效果很好，所以我不确定我的情况是否正确。

```
<div class="wrapper" data-bind="event: { mouseover: function() {}, mouseout: function() {} }">
    wrapper
    <div class="nested" title="nested">
        nested
    </div>
</div> 
```

[http://jsfiddle.net/uzbCB/](http://jsfiddle.net/uzbCB/)

我认为问题是：当我们将事件绑定到包装器时，嵌套元素的绑定将失败。

我在项目中有这种情况，包装器上的 ko 事件绑定和本机鼠标悬停不适用于嵌套元素。本机鼠标悬停行为 - 在鼠标悬停时显示“标题”标签。所以它不起作用。

正如您在 jsfiddle 中看到的，它工作正常，所以我不知道。

我实现了这段 jQuery 的代码来敲除的事件绑定代码，现在它工作正常，但我不能说，这种情况对我来说很清楚。

需要你的帮助！

这是 ko 绑定的结果：

```
ko.bindingHandlers.dgEvent = {
    'init' : function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var eventsToHandle = valueAccessor() || {};
        for(var eventNameOutsideClosure in eventsToHandle) {
            (function() {
                var eventName = eventNameOutsideClosure; // Separate variable to be captured by event handler closure
                if (typeof eventName == "string") {
                    ko.utils.registerEventHandler(element, eventName, function (event) {
                        var handlerReturnValue;
                        var handlerFunction = valueAccessor()[eventName];
                        if (!handlerFunction)
                            return;
                        var allBindings = allBindingsAccessor();

                        // jQuery's workaround Opera's mouseover issue.
                        // If we have event binding on wrapper - native mouseover
                        // title tooltip bindings on nested elements wouldn't work.
                        // https://github.com/jquery/jquery/blob/master/src/event.js#L646-L670
                        if ( eventName === 'mouseover' || eventName === 'mouseout' ) {
                            var ret,
                                target = this,
                                related = event.relatedTarget,
                                handleObj = event.handleObj;

                            // For mousenter/leave call the handler if related is outside the target.
                            // NB: No relatedTarget if the mouse left/entered the browser window
                            if ( !related || (related !== target ) ) {
                                event.type = handleObj.origType;
                                ret = handlerFunction.apply( this, arguments );
                                event.type = eventName;
                            }
                            return ret;
                        }

                        try {
                            // Take all the event args, and prefix with the viewmodel
                            var argsForHandler = ko.utils.makeArray(arguments);
                            argsForHandler.unshift(viewModel);
                            handlerReturnValue = handlerFunction.apply(viewModel, argsForHandler);
                        } finally {
                            if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.
                                if (event.preventDefault)
                                    event.preventDefault();
                                else
                                    event.returnValue = false;
                            }
                        }

                        var bubble = allBindings[eventName + 'Bubble'] !== false;
                        if (!bubble) {
                            event.cancelBubble = true;
                            if (event.stopPropagation)
                                event.stopPropagation();
                        }
                    });
                }
            })();
        }
    }
} 
```

# javascript - 如何在 Nodejs 中模拟“窗口”对象？

> ID：14452409
> 
> 赞同：10
> 
> 时间：2013-01-22T05:55:38.830
> 
> 标签：javascript, node.js, v8

在浏览器中运行时，附加到“窗口”对象的所有内容都将自动成为全局对象。如何创建类似于 Nodejs 中的对象？

```
mySpecialObject.foo = 9;
var f = function() { console.log(foo); };
f();  // This should print "9" to console 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T06:15:00.927

您可以`global`为此目的使用预定义的对象。如果您定义`foo`为`global`对象的属性，则它将在之后使用的所有模块中可用。

例如，在*app.js*中：

```
var http = require('http');
var foo = require('./foo');

http.createServer(function (req, res) {
  //Define the variable in global scope.
  global.foobar = 9;
  foo.bar();    
}).listen(1337, '127.0.0.1'); 
```

在*foo.js*中：

```
exports.bar = function() {
  console.log(foobar);
} 
```

确保您不使用`var`关键字，因为该`global`对象已定义。

有关文档，请查看[http://nodejs.org/api/globals.html#globals_global](http://nodejs.org/api/globals.html#globals_global)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T05:57:52.367

您可以将全局内容附加到`process`而不是`window`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T16:10:45.650

您可以使用 GLOBAL 对象。

```
fruit = 'banana';
console.log(GLOBAL.fruit); // prints 'banana'

var car = 'volks';
console.log(GLOBAL.car); // prints undefined 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T06:56:01.363

如果您要将 Web 控制台与在终端中运行的节点（均为 Javascript）进行比较：

`window`<-> `global`（注意：不推荐使用 GLOBAL）

在 Web 控制台中：（`window.wgSiteName`随机显示功能）

在节点（终端）中：`global.url`

`document`<-> `process`（注意：程序进程正在运行）

在 Web 控制台中：`document.title`

在节点（终端）中：`process.title`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-08T17:39:18.413

我来到了这个简单的解决方案：

```
var mySpecialObject = global; 
```

在普通浏览器中：

```
var mySpecialObject = this;  // Run this at global scope 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-03T08:42:53.970

您现在可以同时使用，`globalThis`而不用考虑环境。每个最新的浏览器和 Node 12+ 都支持它。它是 ES2020 的一部分`global``window`

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis)

# sql - Postgresql 参数化查询

> ID：14452411
> 
> 赞同：0
> 
> 时间：2013-01-22T05:55:49.013
> 
> 标签：sql, postgresql, parameters

我最近听说参数化查询在 postgresql 上运行得更快。

为了测试这一点，我决定构建一个参数化...

*哦，我已经能感觉到反对票了。希望我知道如何更好地提出这个问题......请在投票前提出建议:)*

有谁知道如何创建参数化查询？我似乎无法在实际上是参数化查询的原始 sql 字符串上找到任何文档。发现一堆VB || 爪哇 || php .. 但遗憾的是，恕我直言，这些并不等于 sql。

要构造参数化查询...我必须在数据库中创建一个函数吗？

一个使用参数的简单查询示例会很棒。

我能做的最接近代码示例的事情是。它离工作还差得远。

```
SELECT * FROM USER WHERE ID = ? (1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:53:57.173

参数化查询通常是客户端框架的功能。不同的客户端框架具有不同的语义，因此您最好的选择是从客户端框架文档开始。话虽这么说，低级细节会有所帮助，所以我将在这里介绍 libpq 接口。许多客户端框架都封装了 libpq 的接口，因此请从[PQExecParams 文档](http://www.postgresql.org/docs/9.0/static/libpq-exec.html#LIBPQ-EXEC-MAIN)开始。

在该函数中，您的查询将使用指示所用参数的占位符进行转换。我相信这些实际上是单独发送到数据库的，而不是在规划期间考虑的参数（规划者当然知道参数的值）。

占位符遵循 $1、$2、$3 等的语义结构，因此由数字标识。其他框架使用其他占位符语法包装它。

# javascript - 不使用“+”的加法

> ID：14452414
> 
> 赞同：-2
> 
> 时间：2013-01-22T05:55:55.450
> 
> 标签：javascript, html, addition

希望能够添加一个“/”或“,”符号以及传统的“+”符号。显然“/”符号用于除法，但我想改变它的用途。

# JavaScript

```
function CalculateIMSUB(form) {
  var Atext = form.input_A.value;
  var Btext = form.input_B.value;
  var val = form.val.value;
  var A = eval(Atext);
  var B = eval(Btext);
  if (isNaN(A)) A = 0;
  if (isNaN(B)) B = 0;
  var answer = A - B;
  form.Answer.value = answer;
  form.input_A.value = form.input_A.value.replace(/\+/g, ",");
  form.input_B.value = form.input_B.value.replace(/\+/g, ",");
}

function calculateAll() {
  var forms = document.getElementsByTagName("form");
  for (var i = 0; i < forms.length; i++) {
    CalculateIMSUB(forms[i]);
  }
} 
```

# HTML

```
<form>
  <INPUT TYPE=TEXT NAME="input_A" SIZE=15 />
  <INPUT TYPE=TEXT NAME="input_B" SIZE=10 />
  <INPUT TYPE="button" VALUE="+" name="SubtractButton" onclick="CalculateIMSUB(this.form)"
  />
  <INPUT TYPE=TEXT NAME="Answer" SIZE=12 />
  <input type="hidden" name="val" value="1221" />
</form> 
```

[这是我的例子](http://jsfiddle.net/qvDFY/14/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:04:31.493

尝试实现这样的东西。不`eval`，只是数组。

```
function add( value ) {
  return value.split(/[+,\/]/).reduce(function( a,b ) {
    return +a + +b;
  });
}

console.log( add('1+1+1') ); //=> 3
console.log( add('2,2,2') ); //=> 6
console.log( add('3/3/3') ); //=> 9 
```

# c# - 回发后modaldialog的返回值

> ID：14452415
> 
> 赞同：0
> 
> 时间：2013-01-22T05:56:01.333
> 
> 标签：c#, asp.net, return-value, showmodaldialog

我有一个弹出窗口，它将从网格中搜索项目。当直接选择一行时，它将值返回给父页面。但是，如果我通过按钮单击搜索网格并选择一行，则父页面会收到未定义的对象，尽管从弹出窗口中返回了正确的值。父页面如何接收正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:12:04.067

*OP 在对该问题的评论中确实提到了这一点，但要明确一点：这个答案是用户 ConnorsFan 的[副本](https://stackoverflow.com/a/10234548)。如果答案已更新，则可能会出现任何更新。*

* * *

为了继续在我的页面中使用 showModalDialog，我必须想出我自己的解决方法来解决这个错误。所以，这里...

在 Google Chrome 中，回发后，showModalDialog 总是返回 undefined。但是，模式对话框中的 window.opener 属性指向调用者窗口，即使在回发之后也是如此。所以，我考虑将对话框的结果放在调用者窗口的 returnValue 属性中。它有效。

在来电窗口中：

```
var prevReturnValue = window.returnValue; // Save the current returnValue
window.returnValue = undefined;
var dlgReturnValue = window.showModalDialog(...);
if (dlgReturnValue == undefined) // We don't know here if undefined is the real result...
{
    // So we take no chance, in case this is the Google Chrome bug
    dlgReturnValue = window.returnValue;
}
window.returnValue = prevReturnValue; // Restore the original returnValue 
```

此时，使用 dlgReturnValue 进行进一步处理 在模态对话窗口中：

```
if (window.opener)
{
    window.opener.returnValue = dateValue;
}
window.returnValue = dateValue;
self.close(); 
```

# iphone - RevMob 检查横幅是否在 iPhone 中加载？

> ID：14452416
> 
> 赞同：0
> 
> 时间：2013-01-22T05:56:01.520
> 
> 标签：iphone, ios, frame, banner, revmob

我正在使用 Revmob 框架来显示广告横幅，它工作正常。

所以现在我的问题是如何以编程方式知道横幅是否已加载？

就像我们使用 iads 一样，有一个方法“isBannerLoaded”来检查横幅是否加载。

实际上我想将它的框架设置为加载或未加载横幅。

那么 Revmob 框架中有没有类似“isBannerLoaded”的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:00:33.773

您需要实现 revMobDelegate 并使用 revmobAdDidReceive：

```
@interface MyAdClass : NSObject <RevMobAdsDelegate>
...

@implementation MyAdClass
-(void) prepare {
    ...
    ad = [[[RevMobAds session] bannerView] retain];
    ad.delegate = self;
    [ad loadAd];
    ...
} 

- (void)revmobAdDidReceive {
    NSLog(@"ad received");
    ...
} 
```

[您可以在http://sdk.revmob.com/ios-api/Protocols/RevMobAdsDelegate.html](http://sdk.revmob.com/ios-api/Protocols/RevMobAdsDelegate.html)找到 RevMobAdsDelegate 文档

# qt - Qt中的菜单项启用/禁用

> ID：14452417
> 
> 赞同：3
> 
> 时间：2013-01-22T05:56:01.733
> 
> 标签：qt, qt4

在下面的代码中，我想要，如果我选择/单击患者类型按钮。它们在菜单“xmenumain”“儿科心电图”项目应该被禁用（它应该在菜单列表中列出，但颜色为淡灰色）。我如何实现它？

```
void MyMenu::cppSlot()
    {
     xmenumain = new QMenu;

    xmenumain->addAction("                   X",this, SLOT (call_exit(xmenumain)));
    xmenumain->addAction ( "Edit User Settings" , this , SLOT (call_a()) );
    xmenumain->addAction ( "Parameters" , this , SLOT (call_b()) );
    xmenumain->addAction ( "Sound Adjust" , this , SLOT (call_c()) );
    xmenumain->addAction ( "Patient Type" , this , SLOT (call_d()) );
    xmenumain->addAction ( "Pediatric ECG" , this , SLOT (call_d()) );
    xmenumain->addAction ( "Data Output" , this , SLOT (call_d()) );
    xmenumain->addAction ( "Set Time & Date" , this , SLOT (call_d()) );
    xmenumain->addAction ( "Sweepspeed" , this , SLOT (call_d()) );
    xmenumain->addAction ( "Respspeed" , this , SLOT (call_d()) );

    //xmenumain->popup( QCursor::pos() );
    //Change font and width

    xmenumain->setFont(QFont ("Courier", 13));
    xmenumain->setFixedWidth(250);
    //Colour setting
    QPalette palette=xmenumain->palette();
    palette.setColor(QPalette::Background, Qt::darkGray);
    xmenumain->setPalette(palette);
    //xmenumain->languageChange();

    //xmenumain->setAutoFillBackground(true);

    // Align the menu coordinates
    xmenumain->move(940,370);
    xmenumain->show();
    /*if(!(xmenumain->isEnabled()))
    {
        xmenumain->show();
    }*/
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T06:18:45.983

你应该有一个 QAction 对象：

```
QAction *action = new QAction("Pediatric ECG");
connect(action, SIGNAL(triggered), this, SLOT(...));
action->setEnabled(false);

xmenumain->addAction(action); 
```

# javascript - 在javascript中将json键/值数据解析为基于节点的数据

> ID：14452423
> 
> 赞同：0
> 
> 时间：2013-01-22T05:56:10.813
> 
> 标签：javascript, json, treemap

我很难将键值（它们是数组）围绕在基于节点的/树形结构中。下面是一些示例代码来帮助解释。

我想把这个...

```
// key value data
var rawData = {
    "1": [],
    "2": [10],
    "3": [2,5,11],
    "4": [],
    "5": [1,7,6],
    "6": [4],
    "7": [],
    "8": [9],
    "9": [],
    "10": [],
    "11": []
} 
```

到这个树形图...

```
// tree map
var treeData = {
    "id": "ALL",
    "contents": [
        {   
            "id": "3",
            "contents": [
                { 
                    "id": "2",
                    "contents": [
                        { "id": "10" }
                    ]
                }, { 
                    "id": "5",
                    "contents": [
                        { "id": "1" },
                        { "id": "7" },
                        { 
                            "id": "6",
                            "contents": [
                                { "id": "4" }
                            ]
                        }
                    ] 
                },
                { "id": "11" }
            ]
        },
        {   
            "id": "8",
            "contents": [
                { "id": "9" }
            ]
        }
    ]
} 
```

我相信涉及某种形式的递归，但我很难遍历节点......

```
var traverse = function(rawData) {
    for (var i in rawData){
        var datum = rawData[i];

        for (var j in datum) {
            if(i===datum[j]){
                // tack on node to datum
            }
            traverse(rawData);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:19:17.837

使用 for in 无法遍历数组 in，而是：

```
for (var j = 0; j < datum.length; i++) {
        if(i===datum[j]){
            // tack on node to datum
        }
        traverse(rawData);
    } 
```

# asp.net - 我们可以在共享主机的 IIS 上实现 URL Reqwriting 吗？

> ID：14452424
> 
> 赞同：1
> 
> 时间：2013-01-22T05:56:18.467
> 
> 标签：asp.net, url-rewriting, iis-7, shared-hosting

我们可以在共享主机提供商上实现 IIS 级别的 URL 重写吗？根据我的调查结果，我们不能，但我们的项目经理说我们可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:00:20.840

也许您可以使用 IIS 7.5 的重写功能，请参阅以下链接以获取指导

[http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:01:58.293

很可能使用 HttpHandlers 例如

```
<httpModules>
   <add type="URLRewriter.ModuleRewriter, URLRewriter" 
        name="ModuleRewriter" />
</httpModules>

<httpHandlers>
   <add verb="*" path="*.aspx" 
        type="URLRewriter.RewriterFactoryHandler, URLRewriter" />
</httpHandlers> 
```

更多信息在[这个链接](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

# android - 如何使用 Appcelerator Titan 在 Web 应用程序中显示数学符号？

> ID：14452425
> 
> 赞同：1
> 
> 时间：2013-01-22T05:56:22.010
> 
> 标签：android, titanium-mobile, mathml

我正在为 iphone 和 Android 制作一个 Web 应用程序，我必须在其中显示数学符号。起初我使用了 mathML，但它不适用于某些符号。我的问题是“在 webkit/移动网络浏览器中显示数学符号的替代方法是什么”。谁能建议我什么是更好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:41:05.307

您是否尝试过使用[MathJAX](http://www.mathjax.org/) javascript 库？它会在客户端自动将 TeX 和 MathML 片段转换为图片。它与例如[math.stackexchange.com](http://meta.math.stackexchange.com/questions/1868/list-of-generalizations-of-common-questions)使用的相同。这是一个[演示页面](http://www.mathjax.org/demos/mathml-samples/)，也可以尝试一下。

[它支持所有主要的浏览器和设备](http://www.mathjax.org/resources/browser-compatibility/)。

# ruby-on-rails - Rails 是如何从我们的模型和控制器生成这条路径的

> ID：14452428
> 
> 赞同：1
> 
> 时间：2013-01-22T05:57:00.273
> 
> 标签：ruby-on-rails, routes

好的，我有点理解这部分：CRUD动词和动作[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

如果我转到我所拥有的示例的路由文件，我还会在其中看到一个**资源 :orders**。

但现在从部分名称 _carts 的角度来看，我看到了这段代码：

```
<%= button_to "Checkout" , new_order_path, method: :get %> 
```

让我困惑的是**new_order_path** ？那个是从哪里来的？什么 Rails 约定规则允许我们纠正这个问题？尤其是那个“新”是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:04:52.070

在路由中使用`resources :orders`时，Rails 会创建 7 条路由，分别用于新建、创建、显示、更新、销毁、列出和编辑。所有这些都被命名，并且`new_order_path`/`new_order_url`与新操作相关。

这些路线在[http://guides.rubyonrails.org/routing.html#paths-and-urls中有描述](http://guides.rubyonrails.org/routing.html#paths-and-urls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:14:37.677

这些路径助手是[为](http://guides.rubyonrails.org/routing.html#paths-and-urls)您在`routes.rb`. `rake routes`您可以通过在命令行执行来检查哪些路由助手可用。它们显示在打印出来的表格的最左侧列中。

默认情况下，创建的路径的一般模式如下所示：

*   **new_{singular form of resource}_path**`new` - GET 上的路由
*   **edit_{singular form of resource}_path**`edit` - GET 上的路由
*   **{singular form of resource}_path**`show` -在 GET、`destroy`DELETE、PUT 上的路由`update`（即将在 Rails 4 中成为 PATCH）
*   **{资源的复数形式}_path**`index` -在 GET 和`create`POST上的路由。

还有一些以提供绝对 URL 而不是相对路径的方式结尾的`_url`助手`_path`。在您的控制器中命中的特定操作取决于访问这些 URL 时使用的 HTTP 动词（GET、PUT、POST、DELETE 等）。

# joomla2.5 - 如何开发新组件

> ID：14452433
> 
> 赞同：0
> 
> 时间：2013-01-22T05:57:13.577
> 
> 标签：joomla2.5

我是一个新的joomla程序员。我需要为上传简历构建新组件。我的表单字段是名称，电子邮件和上传简历和提交按钮。我只需要构建前端视图表单，填写详细信息，然后单击提交按钮发送电子邮件。请帮我创建一个组件（joomla 2.5）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:03:32.497

欢迎来到堆栈溢出。这是一个非常基本的问题，您可以在 Google 中轻松搜索。但没关系，您可以查看给定的链接以了解如何制作组件。见下文。

[开发模型-视图-控制器组件/2.5/开发基本组件](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

您可以使用 SWF 上传来上传文件。请参阅此

[在组件中创建文件上传器](http://docs.joomla.org/Creating_a_file_uploader_in_your_component)

对于电子邮件，您可以像这样使用它

[从扩展发送电子邮件](http://docs.joomla.org/Sending_email_from_extensions)

# javascript - Phonegap android 4.1致命信号11，而在2.2中工作正常

> ID：14452436
> 
> 赞同：3
> 
> 时间：2013-01-22T05:57:27.723
> 
> 标签：javascript, android, cordova, xml-parsing

您好，我正在开发一个应用程序，我在其中获取使用 XML 格式的 base64 编码的 png 图像。在 android 2.2 模拟器和设备图像正在显示，但是当我在 android 4.1 模拟器上尝试时应用程序崩溃并显示这些登录位置

```
01-22 11:05:03.104: W/dalvikvm(723): JNI WARNING: JNI method called with exception             pending
01-22 11:05:03.114: W/dalvikvm(723):              in Landroid/webkit/JWebCoreJavaBridge;.nativeServiceFuncPtrQueue:()V (FindClass)
01-22 11:05:03.114: W/dalvikvm(723): Pending exception is:
01-22 11:05:03.114: I/dalvikvm(723): java.lang.NullPointerException:
01-22 11:05:03.114: I/dalvikvm(723):    at    android.content.res.AssetManager.openAsset(Native Method)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.content.res.AssetManager.open(AssetManager.java:315)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.webkit.BrowserFrame.inputStreamForAndroidResource(BrowserFrame.java:743)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.webkit.BrowserFrame.shouldInterceptRequest(BrowserFrame.java:831)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.webkit.JWebCoreJavaBridge.nativeServiceFuncPtrQueue(Native Method)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.webkit.JWebCoreJavaBridge.handleMessage(JWebCoreJavaBridge.java:113)
01-22 11:05:03.124: I/dalvikvm(723):    at    android.os.Handler.dispatchMessage(Handler.java:99)
01-22 11:05:03.124: I/dalvikvm(723):    at android.os.Looper.loop(Looper.java:137)
01-22 11:05:03.184: I/dalvikvm(723):    at    android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:827)
01-22 11:05:03.184: I/dalvikvm(723):    at java.lang.Thread.run(Thread.java:856)
01-22 11:05:03.184: I/dalvikvm(723): "WebViewCoreThread" prio=5 tid=11 NATIVE
01-22 11:05:03.184: I/dalvikvm(723):   | group="main" sCount=0 dsCount=0 obj=0x411f4768     self=0x2a1331d0
01-22 11:05:03.184: I/dalvikvm(723):   | sysTid=736 nice=0 sched=0/0 cgrp=apps     handle=705675736
01-22 11:05:03.184: I/dalvikvm(723):   | schedstat=( 23820080331 8061777219 3043 )     utm=2200 stm=182 core=0
01-22 11:05:03.276: I/dalvikvm(723):   #00  pc 00001260  /system/lib/libcorkscrew.so     (unwind_backtrace_thread+27)
01-22 11:05:03.284: I/dalvikvm(723):   #01  pc 0005f664  /system/lib/libdvm.so     (dvmDumpNativeStack(DebugOutputTarget const*, int)+35)
01-22 11:05:03.284: I/dalvikvm(723):   #02  pc 00053518  /system/lib/libdvm.so     (dvmDumpThreadEx(DebugOutputTarget const*, Thread*, bool)+303)
01-22 11:05:03.284: I/dalvikvm(723):   #03  pc 000535b2  /system/lib/libdvm.so (    dvmDumpThread(Thread*, bool)+25)
01-22 11:05:03.284: I/dalvikvm(723):   #04  pc 00038cfa  /system/lib/libdvm.so
01-22 11:05:03.284: I/dalvikvm(723):   #05  pc 000419d4  /system/lib/libdvm.so 
01-22 11:05:03.284: I/dalvikvm(723):   #06  pc 0037edc8  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #07  pc 002392be  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #08  pc 0023342c  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #09  pc 00231e42  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #10  pc 00231e8a  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #11  pc 00231eb6  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #12  pc 00231118  /system/lib/libwebcore.so
01-22 11:05:03.284: I/dalvikvm(723):   #13  pc 0017fee6  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #14  pc 0017e6c4  /system/lib/libwebcore.so  
01-22 11:05:03.296: I/dalvikvm(723):   #15  pc 001418aa  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #16  pc 00140d64  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #17  pc 00140f82  /system/lib/libwebcor e.so
01-22 11:05:03.296: I/dalvikvm(723):   #18  pc 00135b0e  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #19  pc 00134a04  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #20  pc 00132296  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #21  pc 0013190c  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #22  pc 00134780  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #23  pc 0013503a  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #24  pc 001354b4  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #25  pc 0013dbfe  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #26  pc 0011dc68  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #27  pc 002eb6da  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #28  pc 002e0d1e  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #29  pc 003b5f4e  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #30  pc 003b644a  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   #31  pc 0031f8dc  /system/lib/libwebcore.so
01-22 11:05:03.296: I/dalvikvm(723):   at     android.webkit.JWebCoreJavaBridge.nativeServiceFuncPtrQueue(Native Method)
01-22 11:05:03.296: I/dalvikvm(723):   at     android.webkit.JWebCoreJavaBridge.handleMessage(JWebCoreJavaBridge.java:113)
01-22 11:05:03.296: I/dalvikvm(723):   at     android.os.Handler.dispatchMessage(Handler.java:99)
01-22 11:05:03.296: I/dalvikvm(723):   at android.os.Looper.loop(Looper.java:137)
01-22 11:05:03.296: I/dalvikvm(723):   at     android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:827)

01-22 11:05:03.296: I/dalvikvm(723):   at java.lang.Thread.run(Thread.java:856)
01-22 11:05:03.304: E/dalvikvm(723): VM aborting
01-22 11:05:03.325: A/libc(723): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1),     thread 736 (WebViewCoreThre) 
```

如果有人知道这个错误，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:34:44.913

尝试在真正的 android 设备上测试您的应用程序。有时模拟器无法正常工作。

# android - 将文件发送到 WiFi 打印机

> ID：14452437
> 
> 赞同：4
> 
> 时间：2013-01-22T05:57:29.880
> 
> 标签：android, file, client-server, thermal-printer

我正在开发一个应用程序，在该应用程序中，我通过 IP 地址和端口号（.txt、.png、.jpg、.doc）将文件发送到 WiFi 打印机。它们应该从打印机打印。我尝试了以下代码，但它只给了我 .txt 文件的输出。获得所有类型文件的输出需要进行哪些更改？？？请帮忙...

```
 import java.io.BufferedInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.io.OutputStream;
    import java.net.Socket;
    import java.net.UnknownHostException;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class MainActivity extends Activity {

     private Socket client;
     private FileInputStream fileInputStream;
     private BufferedInputStream bufferedInputStream;
     private OutputStream outputStream;
     private Button button;
     private TextView text;
     private EditText etIp, etPort;
     int port=0;

     @Override
     public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      button = (Button) findViewById(R.id.button1);   //reference to the send button
      text = (TextView) findViewById(R.id.textView1);   //reference to the text view
      etIp = (EditText) findViewById(R.id.editText1);
      etPort = (EditText) findViewById(R.id.editText2);
      //Button press event listener
      button.setOnClickListener(new View.OnClickListener() {

       public void onClick(View v) {

         //create file instance
           port=Integer.parseInt(etPort.getText().toString());
           File file = new File("/mnt/sdcard/bluetooth/AnyFile.txt"); 
        try 
        {

         client = new Socket(etIp.getText().toString(), port);

         byte[] mybytearray = new byte[(int) file.length()]; //create a byte array to file

         fileInputStream = new FileInputStream(file);
         bufferedInputStream = new BufferedInputStream(fileInputStream);  

         bufferedInputStream.read(mybytearray, 0, mybytearray.length); //read the file

         outputStream = client.getOutputStream();

         outputStream.write(mybytearray, 0, mybytearray.length); //write file to the output stream byte by byte
         outputStream.flush();
         bufferedInputStream.close();
         outputStream.close();
         client.close();

         text.setText("File Sent");

        } catch (UnknownHostException e) {
         e.printStackTrace();
        } catch (IOException e) {
         e.printStackTrace();
        }

       }
      });

     }
    }

Manifest file

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T14:29:26.720

我知道这是一个有点老的问题。Android 4.4 为您提供了此功能。

[请检查这些说明](http://developer.android.com/training/printing/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:25:55.320

需要将 Jpg、png 和 doc 解析为打印机可识别的文件格式，例如 pdf 或 PS。然后文件可以流式传输到打印机。

# c# - Datagrid WPF中的动态列标题和标题计数

> ID：14452441
> 
> 赞同：0
> 
> 时间：2013-01-22T05:58:00.127
> 
> 标签：c#, wpf, xaml, datagrid

我正在我的 WPF 应用程序中构建一个数据网格。`ItemSource`的 Datagrid 绑定到一个`IEnumerable`集合。我不知道我的项目的 ViewModel。当我将我的数据网格项目源绑定到数据网格时，我会即时获得列标题和行值。

我不知道标题。它可能是任何东西。我需要在网格中的数据网格中显示所选行的详细信息。

为此，我需要将 SelectedItem.HeaderName 绑定到网格的文本块。但这里的问题是我不知道标题的名称。所以我不能简单地硬编码`SelectedItem.Headername`。

并且列数可能分别不同。因此，我的详细视图还应在选择了一行的DataGrid时，动态编号标题名称具有相应的值。

到目前为止，我已经在我的 xaml 中进行了编码并看到了结果，如下所示。因为对于特定文件，我知道它们各自的列标题，

```
<Label HorizontalAlignment="Stretch"
       VerticalAlignment="Center"
       Grid.Row="0"
       Grid.Column="0">Header2:
</Label>

<TextBlock Grid.Row="0"
           Grid.Column="1"
           Name="Header2"
           Text="{Binding SelectedItem.date,  ElementName=dataGrid1}"
           Width="auto"
           Height="auto"
           HorizontalAlignment="Stretch"
           VerticalAlignment="Center" />

<Label Grid.Row="0"
       Grid.Column="2"
       VerticalAlignment="Center">Header3:</Label>

<TextBlock Grid.Row="0"
           Grid.Column="3"
           Name="username"
           Text="{Binding SelectedItem.Header3, ElementName=dataGrid1}"
           Width="auto"
           Height="auto"
           HorizontalAlignment="Stretch"
           VerticalAlignment="Center" />

<Label Grid.Row="0"
       Grid.Column="4"
       VerticalAlignment="Center">Header4:</Label>

<TextBlock Grid.Row="0"
           Grid.Column="5"
           Name="level"
           Text="{Binding SelectedItem.header4, ElementName=dataGrid1}"
           Width="auto"
           Height="auto"
           HorizontalAlignment="Stretch"
           VerticalAlignment="Center" />

<Label Grid.Row="1"
       Grid.Column="0"
       VerticalAlignment="Center">Header5:</Label>

<TextBlock Grid.Row="1"
           Grid.Column="1"
           Name="logger"
           Text="{Binding SelectedItem.header5, ElementName=dataGrid1}"
           Width="auto"
           Height="auto"
           HorizontalAlignment="Stretch"
           VerticalAlignment="Center" />

<Label Grid.Row="1"
       Grid.Column="2"
       VerticalAlignment="Center">Headr6:</Label>

<TextBlock Grid.Row="1"
           Grid.Column="3"
           Name="thread"
           Text="{Binding SelectedItem.header6, ElementName=dataGrid1}"
           Width="auto"
           Height="auto"
           HorizontalAlignment="Stretch"
           VerticalAlignment="Center" /> 
```

由于我是一个初学者，我无法弄清楚如何做到这一点。如果你能帮助我，我会很高兴。并建议我需要阅读与此动态列生成相关的一些概念，计数，将动态列标题分配给 UI 中的其他控件。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:32:52.600

我制作了一个小项目，其中包含动态生成网格（TextBlock + TextBox clollection），具体取决于在 DataGrid 中创建集合的 DataGrid 标题和对象属性。希望这就是你要找的。你可以从[我的 SkyDrive下载它](http://sdrv.ms/WjzsoZ)

XAML：

```
 <Grid>
        <StackPanel>
        <StackPanel x:Name="myStackPanel" Orientation="Vertical"></StackPanel>
            <DataGrid x:Name="myDataGrid" ItemsSource="{Binding MySource}" AutoGenerateColumns="True">
        </DataGrid>

        </StackPanel>
    </Grid> 
```

我在 Loaded 事件处理程序中设置了这个：

```
 for (int i = 0; i < myDataGrid.Columns.Count; i++)
                    {
                        var childStackPanel = new StackPanel { Orientation = Orientation.Horizontal };

                        var myTextBlock = new TextBlock { Text = myDataGrid.Columns[i].Header + " : " };

                        var myTextBox = new TextBox { Width = 200 };

                        Type myType = typeof(Text);
                        IList<PropertyInfo> props = new List<PropertyInfo>(myType.GetProperties());
                        myTextBox.SetBinding(TextBox.TextProperty,
                                              new Binding("SelectedItem." + props[i].Name) { ElementName = "myDataGrid" });
                        childStackPanel.Children.Add(myTextBlock);
                        childStackPanel.Children.Add(myTextBox);
                        myStackPanel.Children.Add(childStackPanel);
                    } 
```

文本类：

```
public class TranslationText
    {
        private string _translation;
        private bool _isTranslated;

        public string Translation
        {
            get { return _translation; }
            set
            {
                _translation = value;
            }
        }

        public bool IsTranslated
        {
            get { return _isTranslated; }
            set
            {
                _isTranslated = value;
            }
        }

    } 
```

# twitter-bootstrap - Bootstrap 行中的多个 Well 未按预期运行

> ID：14452444
> 
> 赞同：1
> 
> 时间：2013-01-22T05:58:15.020
> 
> 标签：twitter-bootstrap, row

我正在尝试将两口井紧挨着排成一排。

```
<div class="container">
    <div class="row">
        <div class="span8 well">
            Some Text Here
        </div>
        <div class="span4 well">
            Some Nav Here
        </div>
    </div>
</div> 
```

span4 总是显示在 span8 下方，而不是像我预期的那样沿着它显示。我怎样才能让它们彼此相邻显示，而不是一个在另一个下方。我试图给 .well 类一个 max-width: 100% ，但这并没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T07:20:28.213

`html`用以下方式重写你：

```
<div class="container">
    <div class="row">
        <div class="span8">
            <div class="well">Some Text Here</div>
        </div>
        <div class="span4">
            <div class="well">Some Nav Here</div>
        </div>
    </div>
</div> 
```

# excel - 停止 excel 循环直到

> ID：14452446
> 
> 赞同：0
> 
> 时间：2013-01-22T05:58:24.947
> 
> 标签：excel, vba

我有两列 A 和 B 以数字作为值。

*   在 C1 我想要`=A1 + B1`
*   在C2我想要`=A2 + B2`

等等。我已经编写了以下 VBA 代码 - 虽然它可以工作，但它会在范围内的最后一行末尾添加“0”。

假设我的最后一行是 A10。当我运行代码时，它会在 C11 中添加“0”。我该如何防止这种情况？

```
Sub macro()

Dim R As Long
R = 1
Do
Cells(R, "C").Select
R = R + 1
ActiveCell.Formula = "=sum(" & ActiveCell.Offset(0, -2) & "," & 
ActiveCell.Offset(0, -1)    & ")"
Loop Until IsEmpty(ActiveCell.Offset(0, -2))

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:21:01.143

只需将您的直到条件替换为以下字符串：

`Loop Until IsEmpty(ActiveCell.Offset(1, -2))`

这将检查正确的单元格是否为空。您的其余代码应保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T06:35:05.207

看看[`Do Until`和`Do While`和`While`](http://www.databison.com/index.php/excel-vba-for-do-while-and-do-until-loop/)。

如果你真的想迭代单元格，你可以继续。但是这里使用的方法`Arrays`，这将通过各种方式减少任何性能下降，你会在单元格上循环......

```
Option Explicit

Sub AddToRigh()
Dim i As Integer
Dim vArr As Variant
Dim LastRow As Long

'--assume you are working on Sheet 1
LastRow = Sheets(1).Cells(Rows.Count, Range("A1").Column).End(xlUp).Row
ReDim vArr(1 To LastRow)

For i = LBound(vArr) To UBound(vArr)
    vArr(i) = "=Sum(RC[-2]:RC[-1])"
Next i

'--output this entire array with formulas into column C
Sheets(1).Range("C1").Resize(UBound(vArr)) = Application.Transpose(vArr)

End Sub 
```

输出：

![在此处输入图像描述](../Images/9f558508d135384b532eeb9057a2acca.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T06:11:55.717

我绝不是 vba 方面的专家，但你可以这样做：

```
Sub macro()

    Dim R As Long
    R = 1
    Do While Not IsEmpty(ActiveCell.Offset(0, -2))
        Cells(R, "C").Select
        R = R + 1
        ActiveCell.Formula = "=sum(" & ActiveCell.Offset(0, -2) & "," & 
        ActiveCell.Offset(0, -1)    & ")"
    Loop

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T06:24:27.593

我想我会推荐一个稍微不同的行动方案，只是为了给你一些想法:)：

```
Sub macro()

    Dim found As Range

    Set found = Range("A:A").Find("*", after:=Range("A1"), searchdirection:=xlPrevious)

    If Not found Is Nothing Then
        Range(Range("A1"), found).Offset(0, 2).FormulaR1C1 = "=RC[-2]+RC[-1]"
    End If

End Sub 
```

# jquery - jQuery 选择器 - 获取多个 div 的父级 div

> ID：14452451
> 
> 赞同：3
> 
> 时间：2013-01-22T05:58:47.787
> 
> 标签：jquery

我正在尝试获取页面上具有多个 div 作为子元素的所有元素。例如，在以下代码中：

```
<div id="1">
    <div id="1a">
        <div id="1aa">

        </div>
        <div id="1ab">

        </div>
    </div>
    <div id="1b">

    </div>
</div>
<div id="2">
    <div id="2b">

    </div>
</div> 
```

我的函数会返回`#1`，`#1a`因为它们都包含 2 个子 div。

我试过这个：

```
$('div > div + div').css("border", "1px solid red"); 
```

但这不仅不能按预期工作，我还希望它在有 5、6、7 /尽可能多的子 div 时应用，只要它是`>=2`.

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T06:05:18.390

您可以使用[`.filter()`](http://api.jquery.com/filter/).

```
$('div').filter(function() {
    return $(this).children('div').length >= 2;
}).css('border', '1px solid red'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:08:42.457

或者...

```
$("div:has(>div:eq(1))") 
```

[js小提琴](http://jsfiddle.net/DXjy8/)。

向此选择器添加注释以解释其目的将是有益的，因为目前尚不清楚其意图是什么。

它没有使用标准 CSS，所以不能直接委托给`querySelectorAll()`. 如果您发现这是一个性能问题，只需将其拆分为多个块（可能`filter()`用于减少集合）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:14:22.783

可能你想要这样的东西：http: [//jsfiddle.net/aJSbA/](http://jsfiddle.net/aJSbA/)

```
if ($('div:has(div)').length) { // this will check if div has child div elem
    $('div > div').css("border", "1px solid red"); // applies css to its direct child
} 
```

# c++ - 如何在 C++ 中读取 .shd 文件？

> ID：14452452
> 
> 赞同：0
> 
> 时间：2013-01-22T05:58:51.487
> 
> 标签：c++

我正在用 C++ 创建一个项目，用于从 .shd 文件中获取队列中作业的 JobSettings。谁能建议我使用哪个 API 来读取 .shd 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:03:44.847

如果您正在谈论来自 Windows 假脱机程序的影子文件，请查看此站点并相应编码 - [http://www.undocprint.org/formats/winspool/shd](http://www.undocprint.org/formats/winspool/shd)

请注意，此格式未记录在案，因此可能会经常更改。

# iphone - 通过锁定屏幕上的文本手势以编程方式调用应用程序 - iPhone/iPad

> ID：14452454
> 
> 赞同：0
> 
> 时间：2013-01-22T05:58:55.023
> 
> 标签：iphone, ios, xcode, ipad

如何以编程方式将我的应用程序图标放在 iphone 的锁定屏幕上（类似于滑动锁定旁边的默认相机按钮）。可能吗 ？如果是这样，任何人都可以指导我吗？

***已编辑***
大家好.. 感谢您的回复.. 看到您的回复后，我明白这是不可能的，并且在越狱设备中是可能的.. 或者是否可以通过锁定屏幕上的某些手势调用我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:08:47.897

**对于越狱设备：**

我不确定它是否有效。

请检查这些链接：

1.  [你管 1](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QtwIwAA&url=http://www.youtube.com/watch?v=tOj7dHHLhVk&ei=div-UMTDAcnUrQfD24GwAw&usg=AFQjCNENzxqEDW_RJaSjitGko76GiC_o-Q&sig2=K4_2XVYG2kgl67en74B4-w&bvm=bv.41248874,d.bmk&cad=rja)
2.  [你管 2](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CDUQtwIwAg&url=http://www.youtube.com/watch?v=4rtFExAv9yc&ei=div-UMTDAcnUrQfD24GwAw&usg=AFQjCNHFW_kH_qhqq97FLYahg-WutllNwg&sig2=dbkh-ZSXubrmTsa3mMXMGw&bvm=bv.41248874,d.bmk)

注意：可能是越狱设备。我也没有检查这些视频，因为它在我们公司受到限制:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:05:27.570

我不认为这是可能的。我了解您想要实现类似 android 界面的东西，但苹果有其 UI 标准并且限制了对其的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:01:40.230

这是不可能的，因为 Apple 不允许这样做。

# xml - Excel XML 格式的数值数据有哪些限制和规范？

> ID：14452455
> 
> 赞同：2
> 
> 时间：2013-01-22T05:58:58.793
> 
> 标签：xml, excel, spreadsheet

我需要处理 Excel XML 格式（也称为 XML 电子表格 2003 格式）。*这不是 XSLX aka OpenXML 格式，而是之前的 XML 格式。*

当我创建一个 numerc 字段时，我看不到发生了哪些限制和规范。例如，Excel 2010 失败`<ss:Data ss:Type="Number"> 8.90000000000000E+0001</ss:Data>`并像魅力一样工作`<ss:Data ss:Type="Number"> 8E+1</ss:Data>`

应该有一些规范，数字可以有多长以及在其表示中使用哪些符号（小数分隔符总是点还是不是点？例如）

[Microsoft 文档](http://msdn.microsoft.com/en-us/library/office/aa140066.aspx#odc_xmlss_ss%3adata)一如既往地稀缺，并且没有解释数据格式。[XML 标准](http://www.schemacentral.com/sc/xsd/t-xsd_float.html)也没有，不知道它是否适用于 Excel XML。

# java - 如何使用 FTP 知道服务器上的文件是否完整？

> ID：14452456
> 
> 赞同：25
> 
> 时间：2013-01-22T05:59:15.070
> 
> 标签：java, ftp, download

我有一个 Java 文件扫描器应用程序，它使用 FTP 不断扫描服务器上的目录。获取目录的文件列表并一一下载。另一方面，在服务器上，有一个写入这些文件的进程。如果我很幸运，我不会尝试下载不完整的文件，但是我如何确定服务器上的写入过程是否已完成并且文件句柄已关闭，并且文件已准备好下载？

我无法控制服务器上的写入过程。此外，我没有目录的写权限来尝试获取写句柄以检查是否已经打开了写句柄，因此此选项不在讨论范围内。

是否有解决此问题的 FTP 功能？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T06:32:26.427

这是一个非常古老且众所周知的问题。

无法绝对确定 FTP 守护程序正在写入的文件是否完整。文件传输甚至有可能失败，然后重新启动并完成。您必须轮询文件的大小并设置时间限制，例如 5 分钟。如果在此期间大小未更改，则您认为文件已完成。

如果可能，处理文件的程序应该能够处理部分文件。

一个更好的选择是 rsync，它更加健壮和确定。它甚至可以配置（通过命令行选项）将数据最初写入临时位置，并在成功完成后将其移动到最终目标路径。如果文件存在于您期望的位置，则根据定义它是完整的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T06:37:19.150

一种可能的解决方案是首先上传具有不同文件名的文件（例如添加“.partial”），然后将其重命名为其最终名称。

如果服务器找到最终名称，则上传已完成。

如果您无法控制上传过程，那么根据定义，您所要求的内容是不可能的：文件上传可能由于网络问题或由于任何原因停止发送过程而停止。

接收端将观察到的只是传入流的关闭；无法保证数据不会被部分传输。

其他解决方法可能是检查数据结束标记或使用对发送服务器的请求来检查（在他们看来）传输是否已完成。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-22T06:31:58.567

这比 FTP 更基本：即使这些文件是在本地计算机上创建的，读取这些文件也会遇到类似的问题。

如果您无法修改写作过程，则需要跳过一些障碍。没有一个很好，但有些比其他的更安全。

*   继续阅读，直到某个窗口没有任何变化（也许一分钟，就像 David Schwartz 建议的那样）。您可以通过查看文件大小来优化这一点。
*   确定文件是否以可靠的顺序连续写入。当你看到文件 N 出现时，你就知道文件 N-1 已经准备好了。（假设在写入文件之前目录是空的，尽管您也可以查看时间戳。）缺点是如果作者更改顺序或开始并行写入，您的逻辑将中断。

可靠、安全的解决方案需要改进写入程序。

*   Writer 可以将文件写入隐藏或临时位置，并且仅在整个文件（或目录）准备好后才使用符号链接或文件移动或 chmod 使它们可见。
*   Writer 仅在所有其他文件都已写入之后才创建一个特殊文件（例如，“./DONE”），并且 reader 在该文件存在之前不会读取任何文件。
*   根据文件类型，作者可以在文件末尾添加某种文件结尾记录/行，阅读器可以确保它存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:03:00.493

您可以使用 Apache 通用 API 中的 Ftp 库 [获取更多信息](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html)

```
 boolean flag = retrieveFile(String remote, OutputStream local); 
```

此标志检查输出流对当前文件可用。

# node.js - 如何使用谷歌地图包在node.js中定义纬度和经度

> ID：14452459
> 
> 赞同：0
> 
> 时间：2013-01-22T05:59:26.250
> 
> 标签：node.js, google-maps

如何使用谷歌地图包在node.js中定义纬度和经度？

我尝试使用下面的代码来声明纬度和经度，请参阅： var origin1 但是它抛出 gs has no method 'LatLng' 你能建议我如何定义 LAtLng 吗？

```
 function calculateDistances() {
              var gs =require('googlemaps');
         //in next line i tried to define LAtLNG it throws gs has no method 'LatLng' 
             **var origin1 = gs.LatLng(13.125511084202,80.029651635576);**
         //Below code i tried in html
         var origin2 = new google.maps.LatLng(12.9898593006481,80.2497744326417);;
        var destinationA = new google.maps.LatLng(13.125511084202,80.029651635576);;
         var destinationB = new google.maps.LatLng(12.9898593006481,80.2497744326417);
     var service = new google.maps.DistanceMatrixService();
     service.getDistanceMatrix(
      {
     origins: [origin1, origin2],
    destinations: [destinationA, destinationB],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.METRIC,
    avoidHighways: false,
    avoidTolls: false
  }, callback);
  } 
```

# google-app-engine - Google App Engine 将 db 转换为 ndb

> ID：14452460
> 
> 赞同：2
> 
> 时间：2013-01-22T05:59:31.500
> 
> 标签：google-app-engine

在 Google App Engine 上，我曾经将图像存储在 db 中：

```
class Images(db.Model):
    image = db.BlobProperty() 
```

插入一个实体（比如“广告”）后，我可以使用以下内容在 HTML 页面中呈现图像：

```
 <img src="/image?entity_id={{advertisement.key}}" class="advertise" /></a><br /> 
```

在服务器端，通过以下方式检索图像：

```
class GetImage(webapp2.RequestHandler):
    def get(self):
        entity_id = self.request.get('entity_id')
        entity = db.get(entity_id)
        if entity and entity.image:
            self.response.headers['Content-Type'] = 'image/png'
            self.response.out.write(entity.image) 
```

现在，我想将数据存储转换为 ndb，但我遇到了麻烦。

1.  我还能在 HTML 中使用“Advertisement.key”吗？

2.  ndb 中没有 db.get() 方法。如何通过键检索实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:09:33.907

您可以使用 ndb.Key.to_old_key()

[https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_to_old_key](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_to_old_key)

```
<img src="/image?entity_id={{advertisement.key.to_old_key()}}" class="advertise" /> 
```

检索 ndb 实体使用 key.urlsafe：

```
class Images(ndb.Model):
  image = ndb.BlobProperty()

<img src="/image?entity_id={{advertisement.key.urlsafe()}}" class="advertise" /></a><br />

class GetImage(webapp2.RequestHandler):
  def get(self):
    entity_id = self.request.get('entity_id')
    entity = ndb.Key(urlsafe=entity_id).get()
    if entity and entity.image:
      self.response.headers['Content-Type'] = 'image/png'
      self.response.out.write(entity.image) 
```

[https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_urlsafe](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_urlsafe)

# iphone - iPhone 应用程序崩溃，因为 -[NSMutableArray addObjectsFromArray:]: array argument is not an NSArray

> ID：14452461
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:59:31.680
> 
> 标签：iphone, objective-c, nsmutablearray

我想从`UITableView`尝试将搜索到的对象从一个数组添加到另一个数组时进行搜索，我的应用程序崩溃了。这是我尝试将对象从一个数组添加到另一个数组的代码。 `searchedContactsFromTable`是`NSMutableArray`.in 我得到 200 个对象。

```
 NSMutableArray *searchArray = [[NSMutableArray alloc] init];
for (NSDictionary *dictionary in searchedContactsFromTable)
{
       NSArray *array = [dictionary objectForKey:@"fullName"];
       [searchArray addObjectsFromArray:array];

} 
```

如何添加数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:08:38.030

假设你`searchedContactsFromTable`是这样的：

```
searchedContactsFromTable :: (
        {
        fullName =         {
            fName = Abc;
            lName = Ghi;
            mName = Def;
        };
    }
) 
```

你想要这样的输出：

```
searchArray :: (
        (
        Abc,
        Ghi,
        Def
    )
) 
```

您的代码应该是：

```
 NSMutableArray *searchArray = [[NSMutableArray alloc] init];
    for (NSDictionary *dictionary in searchedContactsFromTable)
    {
        NSDictionary *dict = [dictionary objectForKey:@"fullName"];
        [searchArray addObject:[dict allValues]];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:06:57.773

```
NSMutableArray *searchArray = [[NSMutableArray alloc] init];
for (NSDictionary *dictionary in searchedContactsFromTable)
{
       NSMutableArray *array = (NSMutableArray *)[[[dictionary objectForKey:@"fullName"] miutableCopy];
       [searchArray addObjectsFromArray:array];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:08:11.687

试试这个 ：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
NSMutableArray *searchArray = [[NSMutableArray alloc] init];
for (NSDictionary *dictionary in searchedContactsFromTable)
{
       [array addObject:[dictionary objectForKey:@"fullName"]];
       [searchArray addObjectsFromArray:array];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:50:45.473

只是改变 ：

```
NSMutableArray *searchArray = [[NSMutableArray alloc] init];
for (NSDictionary *dictionary in searchedContactsFromTable)
{
       NSString *array = [dictionary objectForKey:@"fullName"];
       [searchArray addObject:array];

} 
```

作为你在这里得到的数组变量不是一个数组，而是一个字符串。

# r - 如何在 R 中的 Shiny webapp 中创建 TextArea 作为输入？

> ID：14452465
> 
> 赞同：31
> 
> 时间：2013-01-22T05:59:43.120
> 
> 标签：r, textarea, textinput, shiny

我正在尝试创建简单的 webapp，我想在其中使用 HTML textarea 控件从用户那里接收多行输入。在 Shiny 中创建这样的输入控件有什么开箱即用的方法吗？

textInput 的帮助页面没有显示太多选项

```
textInput {shiny}   R Documentation
Create a text input control

Description

Create an input control for entry of unstructured text values

Usage

  textInput(inputId, label, value = "")
Arguments

inputId 
Input variable to assign the control's value to

label   
Display label for the control

value   
Initial value

Value

A text input control that can be added to a UI definition.

Examples

textInput("caption", "Caption:", "Data Summary") 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-22T06:31:27.377

您可以使用添加一个文本区域`tags`，它应该被 Shiny 自动拾取：

```
tags$textarea(id="foo", rows=3, cols=40, "Default value") 
```

或者，如果您更喜欢直接的 HTML，您也可以这样做

```
HTML('<textarea id="foo" rows="3" cols="40">Default value</textarea>') 
```

无论哪种情况，`input$foo`都应该反映 textarea 的值。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-22T06:43:49.880

为了他人的利益，我将在 Shiny 教程之后发布我如何使用自定义 UI 控件解决问题

首先，我创建了 textarea.js 文件如下

```
$(document).on("click", "textarea.inputTextarea", function(evt) {

  // evt.target is the button that was clicked
  var el = $(evt.target);

  // Raise an event to signal that the value changed
  el.trigger("change");
});

var inputTextareaBinding = new Shiny.InputBinding();
$.extend(inputTextareaBinding, {
  find: function(scope) {
    return $(scope).find(".inputTextarea");
  },
  getValue: function(el) {
    return $(el).text();
  },
  setValue: function(el, value) {
    $(el).text(value);
  },
  subscribe: function(el, callback) {
    $(el).on("change.inputTextareaBinding", function(e) {
      callback();
    });
  },
  unsubscribe: function(el) {
    $(el).off(".inputTextareaBinding");
  }
});

Shiny.inputBindings.register(inputTextareaBinding); 
```

然后我在闪亮的 webapp 的 ui.R 中添加了以下函数，然后调用了 shinyUI()

```
inputTextarea <- function(inputId, value="", nrows, ncols) {
    tagList(
        singleton(tags$head(tags$script(src = "textarea.js"))),
        tags$textarea(id = inputId,
                    class = "inputtextarea",
                    rows = nrows,
                    cols = ncols,
                    as.character(value))
    )
} 
```

然后我使用上面定义的函数在 ui.R 中创建所需的 textarea 控件元素

```
shinyUI(pageWithSidebar(

  # Application title
  headerPanel("Test Header Panel"),

  sidebarPanel(),

  mainPanel(
        inputTextarea('exampleTextarea', '',20,35 )
  )
)) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-14T14:01:13.567

在这里可能相关也可能不相关，但我制作了[shinyAce](http://github.com/trestletech/shinyAce)包来包装并在 Shiny 中公开 Ace 文本编辑器。Ace 主要用于代码编辑（包括各种语言的语法突出显示），但提供了一个类似于文本区域的界面，用于编写多行文本/代码。

您可以[查看该示例](http://spark.rstudio.com/trestletech/shinyAce1/)，看看这是否是您正在寻找的。（尝试不同的“模式”用于语法突出显示和颜色组合的主题。）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-07T14:55:21.903

From version [0.14](http://shiny.rstudio.com/articles/upgrade-0.14.html#full-changelog) shiny has an implementation of [`textAreaInput`](http://shiny.rstudio.com/reference/shiny/latest/textAreaInput.html).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-12T05:11:30.413

根据 Joe 的回答 ( [https://stackoverflow.com/a/14452837/5776618](https://stackoverflow.com/a/14452837/5776618) )，您还可以将标签嵌套到您自己的函数中，以实现与标准 Shiny 内置输入函数相同的输出。

```
textareaInput <- function(id, label, value, rows=20, cols=35, class="form-control"){
  tags$div(
    class="form-group shiny-input-container",
    tags$label('for'=id,label),
    tags$textarea(id=id,class=class,rows=rows,cols=cols,value))
  } 
```

这是一种避免编写 JS 代码（如果你想的话）的方法，同时仍然......

*   具有调用内置 Shiny 输入的相同方式调用的函数，并且
*   包括 div、标签和 Bootstrap 的表单控件 CSS 样式（使其看起来像内置的 Shiny 输入控件）

使用该功能与使用内置或构建自定义 UI 相同。

```
textareaInput("textareaID","Text Area Label", "Insert text here...", rows = 20, cols = 35) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-08T01:04:58.137

这是一个快速的解决方案，它保留了闪亮的输入感觉，但允许自定义列数：

```
textareaInput <- function(inputID, label, value="", rows=10, columns=80) {
  HTML(paste0('<div class="form-group shiny-input-container">
    <label for="', inputID, '">', label,'</label>
    <textarea id="', inputID, '" rows="', rows,'" cols="', 
    columns,'">', value, '</textarea></div>'))
} 
```

在您的`ui.R`脚本中，您可以添加：

`textareaInput("shazam", "My text box")`

* * *

注意：要获得对 textarea 的[Bootstrap](http://getbootstrap.com/)感觉，您可以使用：

```
textareaInput <- function(inputID, label, value="", rows=10) {
  HTML(paste0('<div class="form-group shiny-input-container">
              <label for="', inputID, '">', label,'</label>
              <textarea class="form-control" id="', inputID, 
              '" rows="', rows, '">', value, '</textarea></div>'))
} 
```

# javascript - Javascript 强制转换

> ID：14452466
> 
> 赞同：0
> 
> 时间：2013-01-22T05:59:44.103
> 
> 标签：javascript, web

我有这个数组

```
var myArr = [];
myArr[0] = 'hello world';
myArr[1] = 'hello universe'; 
```

然后我想将 myArr[1] 元素转换为大写我应该怎么做？

我可以使用

```
document.write( myArr[1].toUpperCase() ); 
```

还是我应该使用

```
document.write( String( myArr[1] ).toUpperCase() ); 
```

在性能方面什么更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:04:04.653

myArr[1] 已经是一个字符串，所以我认为你不需要再次转换它，所以

```
document.write( myArr[1].toUpperCase() ); 
```

是正确的事

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:05:10.663

性能在这里并不重要

几乎没有理由调用 String() 构造函数。你所拥有的已经是一个字符串

# linux - 在 Beagleboard-xm 中打开 CV 和 ubuntu 优化

> ID：14452467
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:59:49.480
> 
> 标签：linux, ubuntu, opencv, video-processing, beagleboard

我正在安装 ubuntu 的 beagleboard-xm 上进行视频处理。Ubuntu 具有完整的 GUI，但它是 omap3 的预构建映像。用于这些项目的库是 OpenCV。所以，问题是整个过程太慢了。有没有办法像删除GUI一样加快这个过程？或删除不需要的软件包？或安装一些优化的操作系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:22:46.477

你可以试试 [Ångström Distribution](http://www.angstrom-distribution.org/) for Beagleboard 可能比 Ubntu 快。

# joomla2.5 - 为什么我的 Joomla 2.5 插件没有执行？

> ID：14452468
> 
> 赞同：0
> 
> 时间：2013-01-22T05:59:57.973
> 
> 标签：joomla2.5, joomla-extensions

我正在开发一个插件（仍然是 2.5 开发的新手），但不知何故，我什至没有让野兽做最基本的事情 - 似乎它根本没有启动。但是，PHP 的解析器错误显示在前端，但是当触发此代码时，什么也没有发生 - 屏幕上或我的日志文件中都没有显示任何诊断消息...

问题出在哪里？

```
 <?php
    defined( '_JEXEC' ) or die( 'Restricted access' );

    jimport('joomla.plugin.plugin');

    class plgContentSIMPLE_Plugin extends JPlugin
    {
            function plgContentSIMPLE_Plugin( &$subject , $config ) {
                      echo "constructor!";
                parent::__construct( $subject , $config );
            }

            function onPrepareContent ($article , $params, $limitstart)
            {
                  oBDC ("oPC",$article , $params, $limitstart);
                }       

            function onBeforeDisplayContent ($article , $params, $limitstart)
            {
                  oBDC ("oBDC",$article , $params, $limitstart);
             }

           function onAfterDisplayContent ($article , $params, $limitstart)
            {
                  oBDC ("oADC",$article , $params, $limitstart);
             }

             function oBDC($whoscalling,$article , $params, $limitstart)
            {
                      echo "whoscalling = " . $whoscalling;
                      $myFile = "./obdc.log";
                      $fh = fopen($myFile, 'a'); // or die("can't open file");
                      $stringData = "\n whoscalling = " . $whoscalling;
                      fwrite($fh, $stringData);
                      fclose($fh);
             }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:19:46.673

你是如何安装插件的？你读过 Joomla 插件教程吗？这是一个很好的教程，请先尝试使其工作-

[https://www.inmotionhosting.com/support/edu/joomla-25/create-plugin](https://www.inmotionhosting.com/support/edu/joomla-25/create-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:07:56.407

Several issues:

1.  Naming conventions: `class plgContentSimple extends JPlugin { function __construct( &$subject , $config ) {`
2.  Event is called "onContentAfterDisplay"...

# android - 使用过滤器增加 admob 收入

> ID：14452471
> 
> 赞同：6
> 
> 时间：2013-01-22T06:00:15.877
> 
> 标签：android, admob, ads, adwhirl

我有大约 100 万次下载的 android 应用程序，我的大多数应用程序用户都位于中东。两周前，下载量为 20 万，收入合理，每千次展示费用为 0.15 美元（是的，每千次展示费用低），广告请求约为 50 万。

现在达到 100 万次下载后，每千次展示费用为 0.04 美元，收入比以前少，广告请求现在为 150 万次。

在我的应用程序生命周期中，填充率一直超过 99%。

对于每千次展示费用的下降，我有很多想法： * 与当前广告系列相比，旧广告资源（两周前）的价格更高。

在所有情况下，它都非常低，我感觉非常糟糕。

我开始考虑使用过滤器来获得更有利可图的广告，即使填充率下降。

我的问题是：1-您知道哪些技巧可以过滤掉廉价广告？2- 在 admob 过滤器设置中启用哪些广告类别/类型更好？注意：我指的类型是：通信、电子商务、游戏、（电影、电视和娱乐）等......

# android - 如何显示来自服务器的 JSON 格式的动态列表？

> ID：14452473
> 
> 赞同：1
> 
> 时间：2013-01-22T06:00:22.367
> 
> 标签：android

我知道我在这里写错了，我试图从 JSON 动态显示多行项目，但出现以下异常，

```
01-22 11:18:27.814: E/AndroidRuntime(438): FATAL EXCEPTION: main
01-22 11:18:27.814: E/AndroidRuntime(438): java.lang.NullPointerException
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.item.MultiLineItem.createView(MultiLineItem.java:44)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.view.ViewFactory.getView(ViewFactory.java:122)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.view.DocumentList.createView(DocumentList.java:52)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.view.ViewFactory.getContainer(ViewFactory.java:85)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.controller.Controller.createDocument(Controller.java:415)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.model.SublistChooser.checkNextListTemplate(SublistChooser.java:99)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.model.SublistChooser.checkNextListTemplate(SublistChooser.java:96)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.model.SublistChooser.start(SublistChooser.java:50)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.controller.Controller.startDocument(Controller.java:387)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.controller.Controller.startDocument(Controller.java:379)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.action.ActionExecutor.executeTaskAction(ActionExecutor.java:445)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.action.ActionExecutor.onAction(ActionExecutor.java:288)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.action.Action.execute(Action.java:133)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.nokia.view.PopupList$1.onClick(PopupList.java:72)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:920)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.widget.AdapterView.performItemClick(AdapterView.java:282)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.widget.AbsListView.performItemClick(AbsListView.java:1037)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2449)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.widget.AbsListView$1.run(AbsListView.java:3073)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.os.Handler.handleCallback(Handler.java:587)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.os.Looper.loop(Looper.java:132)
01-22 11:18:27.814: E/AndroidRuntime(438):  at android.app.ActivityThread.main(ActivityThread.java:4123)
01-22 11:18:27.814: E/AndroidRuntime(438):  at java.lang.reflect.Method.invokeNative(Native Method)
01-22 11:18:27.814: E/AndroidRuntime(438):  at java.lang.reflect.Method.invoke(Method.java:491)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-22 11:18:27.814: E/AndroidRuntime(438):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-22 11:18:27.814: E/AndroidRuntime(438):  at dalvik.system.NativeStart.main(Native Method)
01-22 11:18:27.973: D/dalvikvm(438): GC_CONCURRENT freed 223K, 5% free 9758K/10247K, paused 9ms+27ms
01-22 11:18:34.123: I/Process(438): Sending signal. PID: 438 SIG: 9 
```

这是我得到的代码`NullPointerException`，我不知道如何将视图设置为列表。`View`正在返回`Null`，但正常`TextFields`工作文件。请发布一些有用的代码。

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONObject;

import android.view.View;
import android.widget.ListView;

import com.nokia.view.BaseScreen;
import com.nokia.view.BaseView;

public class MultiLineItem extends Item implements BaseView{

    private HashMap items;
    private  ArrayList list;
    public MultiLineItem(BaseScreen pview){
        super(pview);
        list= new ArrayList();
        items = new HashMap();
    }
    @Override
    public int getItemID() {
        // TODO Auto-generated method stub
        return 0;
    }
    @Override
    public String getValue() {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public View getItem() {
        // TODO Auto-generated method stub
        return view;
    }
    public void createView(JSONObject definition) {
        String header=definition.optString("header");
        items.put("header", header);
        String text = definition.optString("text");
        items.put("text", text);
        list.add(items);
        //((ListView)view).addFocusables(list, LIST);
    }

    public ArrayList getList(){
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:13:32.330

`Android`您必须为此使用一个小部件`ListView`。在`ListView`设置`Adapter`和适配器中，您必须发送从中获得的所有数据`Json`。这是执行该[Android ListView 教程](http://www.androidhive.info/2011/10/android-listview-tutorial/)的示例。本教程将让您了解如何在您的应用程序中使用 ListView。

# meteor - 我们如何将流星应用程序集成到在应用程序服务器上运行的简单 Web 应用程序？

> ID：14452476
> 
> 赞同：1
> 
> 时间：2013-01-22T06:01:21.077
> 
> 标签：meteor

是否有任何集成流星应用程序与应用程序服务器。我想创建一个应该与我的 Web 应用程序集成的聊天客户端，我已经看到了流星示例，我想探索满足我要求的可能性。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:15:34.147

您可以将流星用于您的网络应用程序，也可以将流星聊天应用程序`iframe`放在您的网络应用程序中。

将您当前的 Web 应用程序实际集成到单独的流星实例中是很困难的，因为流星包含它自己的网络服务器，并且流星代码无法在您的应用程序服务器的堆栈（IIS/Apache、Thin 等）上运行。您将不得不研究一种让流星自行运行的方法，然后使用 html/javascript 将其集成到您的网页中

如果你还没有关于流星的聊天应用程序，有一个很好的例子：

[https://github.com/AVGP/meteor.js-chat-example](https://github.com/AVGP/meteor.js-chat-example)

# django - Django：不同用户或管理员的不同表单字段？

> ID：14452488
> 
> 赞同：1
> 
> 时间：2013-01-22T06:02:40.103
> 
> 标签：django, django-forms

这个问题是关于向同一页面的不同用户呈现输入。我应该创建一个捕获所有表单并隐藏不同的字段吗？或者我应该为不同的用户使用完全不同的表单？或者也许是另一种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:25:08.353

如果这就是您的意思，您不应该以“html”方式隐藏表单。

如果管理员表单建立在普通表单之上，您可以使用表单继承。

```
class BaseForm(forms.Form):
    name = forms.CharField(max_length=50)
    ...

#Admin form inherits BaseForm
class AdminForm(BaseForm):
    occupation = forms.CharField(max_length=50)
    ... 
```

如果这两种形式有足够的不同，并且不共享有意义的共同基础，则只需创建两种不同的形式。

设置好表单后，让您的视图根据用户的参数呈现一个或另一个表单。

```
def createView(request):
    if request.method == 'POST':
        if request.user.is_superuser:
            form = AdminForm(request.POST)
        else:
            form = BaseForm(request.POST)
        ... 
```

# java - Java对称加密程序中的密钥大小无效

> ID：14452489
> 
> 赞同：1
> 
> 时间：2013-01-22T06:02:45.687
> 
> 标签：java, encryption, encryption-symmetric

这是我的基本对称加密程序。正如我现在学习的那样，我想知道这是如何工作的。我有以下例外：

> 线程“主”java.security.InvalidKeyException 中的异常：在 javax.crypto.Cipher.init(DashoA13*..) 在 javax.crypto.Cipher.a(DashoA13*..) 的非法密钥大小或默认参数在 javax.crypto .Cipher.init(DashoA13*..) 在 sample.MainClass.main(MainClass.java:24)

这是我的程序：

```
public class MainClass {
     public static void main(String[] args) throws Exception {
            Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());        
            byte[] input = " www.java2s.com ".getBytes();
            byte[] keyBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,
                0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17 };

            SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
            Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding", "BC");
            System.out.println("input text : " + new String(input));

            // encryption pass

            byte[] cipherText = new byte[input.length];
            cipher.init(Cipher.ENCRYPT_MODE, key);
            int ctLength = cipher.update(input, 0, input.length, cipherText, 0);
            ctLength += cipher.doFinal(cipherText, ctLength);
            System.out.println("cipher text: " + new String(cipherText) + " bytes: " + ctLength);

            // decryption pass

            byte[] plainText = new byte[ctLength];
            cipher.init(Cipher.DECRYPT_MODE, key);
            int ptLength = cipher.update(cipherText, 0, ctLength, plainText, 0);
            ptLength += cipher.doFinal(plainText, ptLength);
            System.out.println("plain text : " + new String(plainText) + " bytes: " + ptLength);
          }
} 
```

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:29:37.677

这确实看起来像[Java Security: Illegal key size or default parameters？](https://stackoverflow.com/questions/6481627/java-security-illegal-key-size-or-default-parameters). 您可能需要将 local_policy.jar 和 US_export_policy.jar 替换为 Unlimited Security 版本。您可以在这里下载它们：[http ://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)

这些文件应该在您的 jre/lib/security/ 文件夹中。此外，对我来说，我在不同的位置有大量不同的 JRE，而我使用的 JRE 在*我*的 jdk 文件夹路径中。我花了最长时间才弄清楚这个废话

# android - 如何在android中使用onTouch事件在画布上获取文本

> ID：14452491
> 
> 赞同：3
> 
> 时间：2013-01-22T06:03:06.597
> 
> 标签：android, android-canvas

我正在使用 android 中的画布实现 pagecurl 效果现在我必须在同一个画布上实现文本到语音功能..所以单个 ontouch 事件上有两个不同的功能..到目前为止我实现了 pagecurl 效果 onTouch 现在我很困惑在画布上获取文本.. 我用了

```
 canvas.drawText("Hello world this is experiment", 300,400 , paint); 
```

在我的应用程序中，文本将动态来自 sqlite..有没有办法在触摸时检测画布上的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:27:41.230

当您在画布上添加任何文本时，将该文本放入`Rect()`

`Rect()`像这样在画布上设置它。

```
 protected void onDraw(Canvas canvas){
     final String s = "Hello. I'm some text!";

     Paint p = new Paint();
     Rect bounds = new Rect();
     p.setTextSize(60);

     p.getTextBounds(s, 0, s.length(), bounds);
     float mt = p.measureText(s);
     int bw = bounds.width();

     Log.i("LCG", String.format(
          "measureText %f, getTextBounds %d (%s)",
          mt,
          bw, bounds.toShortString())
      );
     bounds.offset(0, -bounds.top);
     p.setStyle(Style.STROKE);
     canvas.drawColor(0xff000080);
     p.setColor(0xffff0000);
     canvas.drawRect(bounds, p);
     p.setColor(0xff00ff00);
     canvas.drawText(s, 0, bounds.bottom, p);
  } 
```

＆您很容易检测`Rect()`到文本放在**矩形**上的触摸事件。

有关画布的更多信息，请参阅：

[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)

# logging - 用于记录的磁盘数据结构/库

> ID：14452494
> 
> 赞同：1
> 
> 时间：2013-01-22T06:03:16.537
> 
> 标签：logging, data-structures, datastore, data-storage

是否有一个库或引擎可以嵌入到我的系统中以写出仅附加的数据？特别是，我需要能够处理二进制数据、处理条目查找（最好是 O(log n) 或更好）以及可以向前或向后读取的东西。我已经构建了一个自定义文件格式，但我认为这不是可扩展的，我更喜欢使用已经构建和测试过的代码。我正在寻找可以用来存储日志数据的东西，特别是。

或者，在磁盘上表示此类数据的最佳方式是什么？我当前的格式如下：

```
| size | protobuf-record | size | 
```

其中 protobuf-record 是一个 protobuf 格式的条目，两侧是它的大小（作为 32 位无符号整数）。这使我可以向前和向后扫描。我正在使用一个单独的 KV 存储（在本例中为 Tokyo Cabinet）作为查找数据的索引。

事实上，我正在寻找的一个属性是，如果没有在文件格式中检测到，条目不应该是可插入的。

我正在寻找的东西是以前做过的，还是应该继续改进我的自定义文件格式？

# macos - sudo 命令在 mac os x 上不起作用

> ID：14452495
> 
> 赞同：1
> 
> 时间：2013-01-22T06:03:27.500
> 
> 标签：macos, terminal, command, sudo

当我在终端的任何地方运行`sudo`命令时，我会收到以下错误

```
Zafars-MacBook-Pro:etc zafarsaleem$ sudo
sudo: /private/etc/sudoers is mode 0755, should be 0440
sudo: no valid sudoers sources found, quitting 
```

我关注了这个[链接](http://instantaneousinstances.com/2012/07/fixing-sudo-on-mac-os-x-lion-10-7/)，但是当我运行`ls -al /`命令时，我得到了以下输出，它与链接中的输出不同，但我仍然遵循了整个教程，但它没有用，运行命令`.`后我仍然得到高于输出。`sudo`我该如何解决这个问题？

```
drwxr-xr-x    34 root         wheel      1224 Jan 22 07:43 . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:17:35.557

问题是“sudo: /private/etc/sudoers is mode 0755, should be 0440” 如果知道root的密码，可以在终端输入“su root”，然后输入密码模式可以修改/etc /sudoers 文件作为根 (chmod 0440 /etc/sudoers)。希望它可以工作。

# android - android graphview获取触摸位置

> ID：14452498
> 
> 赞同：0
> 
> 时间：2013-01-22T06:03:40.667
> 
> 标签：android, touch-event

首先，我在我的应用程序[http://www.jjoe64.com/p/graphview-library.html](http://www.jjoe64.com/p/graphview-library.html)中使用这个库来创建图表。然后我使用这段代码（我在评论中找到）来获取触摸事件的 x 位置。

```
//intercepts touch events on the graphview
@Override
public boolean dispatchTouchEvent(MotionEvent event) { 
    switch (event.getAction()) {
        //when you touch the screen
        case MotionEvent.ACTION_DOWN:
            // gets the location of the touch on the graphview
            float x = event.getX(event.getActionIndex());
            // gets the boundries of what you are viewing from the function you just added
//  vp is set to vp[0] = 0 & vp[1] = numDaysOil, numDaysOil could be anywhere from 2 to 30 
            double[] vp = graphOilView.getViewPort();
            // gets the width of the graphview
            int width = graphOilView.getWidth();
             //gets the x-Value of the graph where you touched
            @SuppressWarnings("unused")
            double xValue = vp[0] + (x / width) * vp[1];
// trying a different ways to get different x vaules 
            double xVal = (x / width) * numDaysOil;
            //add a method to lookup a value and do anything you want based on xValue. 

            break;
        } // end switch
    return super.dispatchTouchEvent(event);
} // end dispatchTouch Event 
```

根据您触摸的位置（或单击模拟器），我会得到正确的 x 值，但有时它会偏小或偏大的 x 值。

有人对此有任何见解吗？

编辑：有时当我单击图表中的某个位置时，xValue 会返回正确的 x 值，有时它会返回一个小于或大于对应于 y 值的 x 值的 xValue。用于在图上创建点的示例 x 值为 12，y 值为 30，但使用上述代码计算的 xValue 可能返回 9。所以如果我尝试查找 x = 9，我将得到错误的 y 值。绘制的数据： x：1、2、3、4、5、6、7、8、9、10、11、12、13、14、15 y：5、16、8、11、1、30、20 , 11, 18, 29, 27, 30, 8, 10, 19

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T08:24:49.140

我是这样解决的：

```
graphView = new LineGraphView(context,"Title");
graphView = initGraphView(graphView);    
graphView.setOnTouchListener(new OnTouchListener(){
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction() == MotionEvent.ACTION_DOWN) {
                        int size = series1.size();
                        float screenX = event.getX();
                        float screenY = event.getY();
                        float width_x = v.getWidth();
                        float viewX = screenX - v.getLeft();
                        float viewY = screenY - v.getTop();
                        float percent_x = (viewX/width_x);
                        int pos = (int) (size*percent_x);

                        System.out.println("X: " + viewX + " Y: " + viewY +" Percent = " +percent_x);
                        System.out.println("YVal = " +series1.getY(pos));
                        tvNum.setText(series1.getY(pos)+"");
                        return true;
                    }
                    return false;
                }

            }); 
```

`graphView.setScrollable(false)`它看起来和你差不多，但记得`graphView.setScalable(false)`在你想从视图中获取数字时进行设置。我认为这是包装的一些奇怪的怪癖。我最终不得不停止数据收集并“冻结”图表，以便从系列中获取 x 和 y 值。

有人知道更好的方法吗？

# iphone - 在 iphone 中调用 web 服务时如何进行导航？

> ID：14452499
> 
> 赞同：0
> 
> 时间：2013-01-22T06:03:43.490
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中

> 我想在 web 服务调用打开时将我的视图控制器推送和弹出到导航控制器

.现在当我这样做时，我使所有按钮都处于非活动状态，直到请求完成。但我需要删除它。我需要在调用服务时来回切换。有人可以在这方面帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:14:01.530

根据我从您的问题中得到的信息，解决方案可能如下：

为此，您需要实施委派。您必须在调用 Web 服务的类中定义一个协议。然后将该协议实现到您要导航到的类中。通过这样做，您将能够处理导航 ViewController 类的响应/错误。

同样，当您想要来回移动时，您再次需要实现对主 ViewController 的委托，您的 Web 服务将从该主 ViewController 被调用。（只是为了处理响应/错误，以防您在返回响应时属于同一个班级）

希望这能说明问题。

PS我的回答与您对问题的理解一样。有关详细答案，请相应地详细说明您的问题。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:09:12.993

只是一个疯狂的猜测......如何创建一个处理所有与网络相关的东西的[单例对象。](http://en.wikipedia.org/wiki/Singleton_pattern)因此，您无需在视图控制器中调用 Web 服务并实现其委托方法，而是为该对象分配处理网络交互的责任。这样，您的视图控制器将保持干净（更少的代码），并且您可以在整个应用程序的任何地方重用此对象……欢迎对此提出任何其他想法。

# cocoalibspotify-2.0 - 如何使用 CocoaLibSpotify 获取播放列表的马赛克图像？

> ID：14452503
> 
> 赞同：0
> 
> 时间：2013-01-22T06:04:01.430
> 
> 标签：cocoalibspotify-2.0, libspotify

从`SPPlaylist`它的`image`属性的标题文档中：

> 返回播放列表的自定义图像，或者`nil`播放列表尚未加载或没有自定义图像

我有一个加载的数组，`SPPlaylists`但是`image`每个对象的属性*always* `nil`，即使我可以通过 Spotify 客户端在这些相同的播放列表上看到 4-up 图像。

有没有一种简单的方法可以使用 CocoaLibSpotify 获得该 4-up 封面图像？还是我必须加载所有曲目和专辑元数据并单独拉回相关`SPImages`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:13:10.837

播放列表的`image`用于品牌播放列表具有自定义图像时。不过，这种情况相当罕见。

没有为您生成网格的原因是因为它是在本地而不是服务器端生成的，所以这意味着每次加载播放列表时都会加载多个专辑的图像，这不是内存效率。

然而，有一个名为 Viva 的开源 Spotify 客户端基于 CocoaLibSpotify（披露：由我编写）生成这些图像。查看[VivaImageExtensions](https://github.com/iKenndac/Viva/blob/master/Viva/VivaImageExtensions.m)类扩展以获取参考实现。

那里的参考实现要求您传递的曲目首先加载其专辑封面艺术，这毫无价值。

# c# - MS CRM：我可以创建自定义活动派对列表吗？

> ID：14452506
> 
> 赞同：0
> 
> 时间：2013-01-22T06:04:19.713
> 
> 标签：c#, dynamics-crm, custom-activity

我正在为短信创建一个新的活动类型，我想使用自定义派对列表自定义“收件人”字段。IE 查找字段可以是客户、潜在客户、联系人或用户。我想删除帐户和用户并将派对列表限制为仅允许此活动的收件人字段中的线索和联系人。

是否有任何支持或不支持的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:23:36.233

据我所知，只有不受支持：[http ://rajeevpentyala.wordpress.com/2012/08/02/filtering-partylist-entities-using-jscript-in-crm/](http://rajeevpentyala.wordpress.com/2012/08/02/filtering-partylist-entities-using-jscript-in-crm/)

# jquery - 在 grdiview 中创建动态文本字段

> ID：14452509
> 
> 赞同：-1
> 
> 时间：2013-01-22T06:04:41.550
> 
> 标签：jquery, gridview, dynamic, yii, textfield

```
<?php echo CHtml::beginForm('','post',array('id'=>'base-si-received-item-form'));?>
<?php 
    $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'base-si-received-item-grid',
        'dataProvider'=>BaseRefSiDetails::model()->search(),
        //'filter'=>$searchModel,
        'columns'=>array(       
            array(
                'class'=>'CCheckBoxColumn',
                'id'=>'base-si-received-item-id',       
                'selectableRows'=>2, // multiple rows can be selected
            ),                  
            array(
                'name'=>'unit',
                'header'=>'unit',
                'type'=>'raw',
                'value'=>'CHtml::textField(BaseSiReceivedItem::model()->quantity_received,"",array("id"=>"received_quantity","name"=>"quantity_received"))',
            ),
            array(
                'name'=>'unit',
                'header'=>'unit',
                'type'=>'raw',
                'value'=>'CHtml::dropDownlist(BaseSiReceivedItem::model()->unit,"unit",array("pc"=>"pc","box"=>"box"))'
            ),
            array(
                'name'=>'unit_cost',
                'header'=>'unit cost',
                'type'=>'raw',
                'value'=>'CHtml::textField(BaseSiReceivedItem::model()->unit_cost,"",array("id"=>"unit_cost"))',
            ),
            array(
                'name'=>'total_cost',
                'header'=>'total cost',
                'type'=>'raw',
                'value'=>'CHtml::textField(BaseSiReceivedItem::model()->total_cost,"",array("id"=>"total_cost","readonly"=>"readonly"))',
            ),
        )
    )
?> 
```

我的**gridview**有问题。
我需要做的是，当输入收到的数量和单位成本时，价格将自动显示在总成本上。我有一个**jquery**脚本来做到这一点。
我的问题是唯一的第一行正在执行代码：

这是我的**jQuery**：

```
 $(document).ready( function(){
     $("#unit_cost").keyup(function() {        
         $("#total_cost").val($("#unit_cost").val() * $("#received_quantity").val());        
     });    
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:24:29.573

正如@Örs 所说，将您的 id 更改为类。操作的[上下文](http://api.jquery.com/jQuery/#jQuery1)也应该是一行，如下所示：

```
$(document).ready( function(){
    $(".unit_cost").keyup(function(){
        var tr=$(this).closest('tr');
        $(".total_cost",tr).val($(".unit_cost",tr).val() * $(".received_quantity",tr).val());
    });
}); 
```

# android - Android 应用图像标记

> ID：14452513
> 
> 赞同：3
> 
> 时间：2013-01-22T06:05:02.557
> 
> 标签：android, image, tagging

我正在开发一个 android 应用程序，用户可以在其中将图片上传到流中。用户还可以用一些标签来标记图片。问题是如何在多个屏幕上检测图像上的“相同”点？有哪些可能的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:07:24.493

您可以通过以预定义的固定纵横比裁剪图像并根据当前视图尺寸映射 x,y 来实现此目的。

# jquery - jQuery Masonry Grid、淡入和滑动动画

> ID：14452514
> 
> 赞同：0
> 
> 时间：2013-01-22T06:05:03.457
> 
> 标签：jquery, jquery-animate, jquery-masonry

所以我在我兄弟的餐厅网站上使用砖石网格。我正在寻找的是当页面加载时，容器平滑地向下滑动，然后图像一张一张地淡入。

[在这里你可以看到它](http://droddle.com/taconano/)

这是我当前的代码：

```
<script type="text/javascript">
  $(function(){

    var $container = $('#photo_collage');

    $('#container_home').slideDown(1000);

    $container.imagesLoaded( function(){
      $container.masonry({
        itemSelector: '.item',
        gutterWidth: 5,
        isAnimated: true
      });
      $container.animate({opacity: 1}, 700)
    });

  });
</script>

    <div id="container_home">

    <div id="photo_collage">

        <div class="item">
            <img src="images/collage/7.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/3.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/hours_board.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/2.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/4.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/5.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/6.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/1.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/8.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/9.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/10.jpg" alt="" />
        </div>
        <div class="item">
            <img src="images/collage/11.jpg" alt="" />
        </div>

        <div class="clear"></div>

    </div><!-- END PHOTO COLLAGE -->
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:24:21.020

你可以使用 jQuery 的`.load()`

就像是：

```
$('#photo_collage').load(function() {
  $(this).slideDown('slow', function() {
    $('.item').fadeIn();  
  });;
}); 
```

不过看看 API，.load()[可能会被击中和错过](http://api.jquery.com/load-event/)。

# vb.net - 命名适当的套管

> ID：14452519
> 
> 赞同：0
> 
> 时间：2013-01-22T06:05:24.523
> 
> 标签：vb.net, naming-conventions

你能帮我找一个合适的外壳吗，我有这个代码......

```
 Private Function NameCsing(ByVal sValue As String) As String
    Dim toConvert As String() = sValue.Split(" ")
    Dim lst As New List(Of String)

    For i As Integer = 0 To toConvert.Length - 1
        Dim converted As String = ""
        If toConvert(i).Contains("~") Then
            Dim toName As String() = toConvert(i).Split("~")
            Dim sName As String = ""
            For n As Integer = 0 To toName.Length - 1
                Dim sconvert As String = ""
                If n = 0 Then
                    sName = StrConv(toName(n), VbStrConv.ProperCase)
                Else
                    sName += StrConv(toName(n), VbStrConv.ProperCase)
                End If
            Next
            converted = sName
        Else
            converted = toConvert(i)
        End If
        lst.Add(converted)
    Next
    Dim ret As String = ""
    For i As Integer = 0 To lst.Count - 1
        If i = 0 Then
            ret = lst(0)
        Else
            ret += " " + lst(i)
        End If
    Next
    Return ret
End Function 
```

我的代码只会像这样输出“McDonalds”是你输入“mc~donalds”现在我的问题是我输入“evalue”，我的输出必须是“eValue”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:15:14.343

知道如何处理特殊字符串的唯一方法是自己从规则列表中对其进行编码：

```
Private Function NameCsing(ByVal sValue As String) As String
    If sValue.Trim.ToLower = "evalue" Then Return "eValue"
    'Then process any other special cases
End Function 
```

# python - 在 python 中解析亚马逊 xml

> ID：14452523
> 
> 赞同：0
> 
> 时间：2013-01-22T06:05:52.497
> 
> 标签：python, amazon-web-services

我从 Amazon Web-Service 获得了以下 XML。

```
<aws:UrlInfoResponse>
    <aws:Response>
        <aws:OperationRequest>
            <aws:RequestId>8789797</aws:RequestId>
        </aws:OperationRequest>
        <aws:UrlInfoResult>
            <aws:Alexa>
                <aws:TrafficData>
                    <aws:DataUrl type="canonical">google.com/</aws:DataUrl>
                    <aws:Rank>1</aws:Rank>
                </aws:TrafficData>
            </aws:Alexa>
        </aws:UrlInfoResult>
        <aws:ResponseStatus>
            <aws:StatusCode>Success</aws:StatusCode>
        </aws:ResponseStatus>
    </aws:Response>
</aws:UrlInfoResponse> 
```

当我尝试提取排名时。

```
xmldoc = minidom.parse(response)
itemlist = xmldoc.getElementsByTagName('aws:Rank')[0]

xmlData=itemlist.replace('<aws:Rank>','').replace('</aws:Rank>','')
print xmlData 
```

它给了我错误。

```
AttributeError: Element instance has no attribute 'replace' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:36:04.103

这里的问题是您尝试在 XML 元素上使用替换，该元素不是列表也不是字符串，它将具有 .replace()。

由于您通过 using 挑选出元素（这是一个 Element 对象）`=getElementsByTagName('aws:Rank')[0]`，因此您只需要做一件事。

您可以通过以下方式获得所需的数据：

```
itemlist.firstChild.data 
```

或者

```
itemlist.firstChild.nodeValue 
```

（@root，你有这个权利，我不知道你为什么被否决）

现在我在解析那个 XML 时遇到了一些麻烦，因为名称空间没有绑定，但这并不是什么大问题。

可能更清楚的是这样的片段：

```
xmldoc = minidom.parse(response)
xmlElement = xmldoc.getElementsByTagName('aws:Rank')[0]
xmlData = xmlElement.firstChild.nodeValue
print xmlData 
```

但老实说，您可能想在 minidom 中查看有关 Element 对象的信息：

[http://docs.python.org/2/library/xml.dom.html#dom-element-objects](http://docs.python.org/2/library/xml.dom.html#dom-element-objects)

# javascript - 如果表单输入中存在任何错误/过滤的单词，则显示警报

> ID：14452524
> 
> 赞同：1
> 
> 时间：2013-01-22T06:06:04.053
> 
> 标签：javascript, jquery

我正在尝试摆脱通过我的网站收到的垃圾邮件联系邮件。

我有一个禁止词列表，每行一个。现在我想实现一些东西，如果表单输入中存在任何被禁止的词并阻止表单提交，则可以显示警报。我怎样才能做到这一点？

这是我尝试过的代码，但失败了。我不知道如何将每行单词或短语与输入数据匹配。

HTML

```
<form method="post" action="/sendmessage.php">
<input type="text" id="name" name="name" />
<input type="text" id="email" name="email" />
<input type="text" id="subject" name="subject" />
<input type="textarea" id="message" name="message" />
<input type="submit" id="submit" name="submit" value="Send Message" />
</form> 
```

JavaScript

```
<script type="text/javascript">
$(function() {
    $("#submit").on("click",function() {
        var name = $("input:text[name='name']").val();
        var email = $("input:text[name='email']").val();
        var subject = $("input:text[name='subject']").val();
        var message = $("input#message").val();
            var badwords = (abc // first bad word, followed by a carriage return
                            bcd // second bad word, followed by a carriage return
                            cdf // third bad word, followed by a carriage return
                            ...
                            the bad phrase // bad phrase, followed by a carriage return
                            another bad phrase // another bad phrase, followed by a carriage return
                            ...
                            xyz
                            );

        /* I am not sure what to do from now on */ 

                if (name || email || subject || message ) {
                    alert("Your Message Contains Bad Words, Please Remove Them Before Proceeding");
                    return false;
                }
        /* I am not sure what to do */ 
    });
});
</script> 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:15:34.110

她的解决方案是：

HTML：

```
<form method="post" action="/sendmessage.php">
<input type="text" id="name" name="name" />
<input type="text" id="email" name="email" />
<input type="text" id="subject" name="subject" />
<input type="textarea" id="message" name="message" />
<input type="button" id="submit" name="submit" value="Send Message" />
</form> 
```

JS：

```
$(function() {
$("#submit").on("click",function() {
    var name = $("input:text[name='name']").val();
    var email = $("input:text[name='email']").val();
    var subject = $("input:text[name='subject']").val();
    var message = $("input#message").val();
        var badwords = ["abc", "bca", "hai hello"];

    /* do this */ 

        if($.inArray(name, badwords) !==-1 || $.inArray(email, badwords) !==-1 || $.inArray(subject, badwords) !==-1 || $.inArray(message, badwords) !==-1)
            {
                alert("Your Message Contains Bad Words, Please Remove Them Before Proceeding");
                return false;
            }

});
}); 
```

JSF中：

[http://jsfiddle.net/bittu4u4ever/8gF8k/](http://jsfiddle.net/bittu4u4ever/8gF8k/)

要将这些带有换行符的单词自动转换为数组：

```
var words = "abc\nbca\nhai hello";
var badwordsarray = words.split("\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:15:19.633

```
 if($.inArray(name, badwords) !==-1 || $.inArray(email, badwords) !==-1 || $.inArray(subject, badwords) !==-1 || $.inArray(message, badwords) !==-1) {
        alert("Your inputs contain Bad Words, Please Remove Them Before Proceeding");
                    return false;
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T21:21:27.660

是否有一个版本可以检查整个字符串中是否存在坏词？例如： var badwords = "\nkill"; 输入用法：杀手找到前三个字符但禁止使用？

如果你有这样的问候的例子，我会认真地帮助我，

# android - Microsoft 翻译 API：检索翻译时出错：无法将“null”解析为整数

> ID：14452526
> 
> 赞同：0
> 
> 时间：2013-01-22T06:06:13.867
> 
> 标签：android, android-asynctask, microsoft-translator

我正在尝试从[https://github.com/rmtheis/android-ocr](https://github.com/rmtheis/android-ocr)运行翻译服务，并在从 MIcrosoft 翻译 Api 服务检索结果时收到以下错误

```
TranslatorBing(30659): Caught exeption in translation request.

W/System.err(30659): java.lang.Exception: [microsoft-translator-api] Error retrieving translation : unable to parse 'null' as integer

W/System.err(30659): at com.memetix.mst.MicrosoftTranslatorAPI.retrieveString(MicrosoftTranslatorAPI.java:199)

W/System.err(30659): at com.memetix.mst.translate.Translate.execute(Translate.java:61)

W/System.err(30659): at edu.sfsu.cs.orange.ocr.language.TranslatorBing.translate(TranslatorBing.java:42)

W/System.err(30659): at edu.sfsu.cs.orange.ocr.language.Translator.translate(Translator.java:49)

W/System.err(30659): at edu.sfsu.cs.orange.ocr.language.TranslateAsyncTask.doInBackground(TranslateAsyncTask.java:58)

W/System.err(30659): at edu.sfsu.cs.orange.ocr.language.TranslateAsyncTask.doInBackground(TranslateAsyncTask.java:1)

W/System.err(30659): at android.os.AsyncTask$2.call(AsyncTask.java:185)

W/System.err(30659): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)

W/System.err(30659): at java.util.concurrent.FutureTask.run(FutureTask.java:138)

W/System.err(30659): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)

W/System.err(30659): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)

W/System.err(30659): at java.lang.Thread.run(Thread.java:1019)

W/System.err(30659): Caused by: java.lang.NumberFormatException: unable to parse 'null' as integer

W/System.err(30659): at java.lang.Integer.parseInt(Integer.java:356)

W/System.err(30659): at java.lang.Integer.parseInt(Integer.java:332)

W/System.err(30659): at com.memetix.mst.MicrosoftTranslatorAPI.retrieveResponse(MicrosoftTranslatorAPI.java:158)

W/System.err(30659): at com.memetix.mst.MicrosoftTranslatorAPI.retrieveString(MicrosoftTranslatorAPI.java:196)

W/System.err(30659): ... 11 more

E/TranslateAsyncTask(30659): FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:53:18.667

as in log :

> NumberFormatException: unable to parse 'null' as integer

means you are trying to convert an null value to integer . before converting String value to integer check it for null to empty and use `try/catch` for handling `NumberFormatException` .

```
int  intnum=0;
if (strvalue !=null && !"".equals(strvalue) ){
     try {
           int  intnum = Integer.parseInt(strvalue);

         } catch (NumberFormatException e) {
            intnum=0;
            System.out.println(e.getMessage());
        }
}
else{
intnum=0;
} 
```

# facebook - Facebook 邀请朋友加入应用程序 - 对话请求

> ID：14452527
> 
> 赞同：0
> 
> 时间：2013-01-22T06:06:15.103
> 
> 标签：facebook, api, invite

我使用此代码邀请 Facebook 朋友加入应用程序：http: [//pastebin.com/A4LkB8sF](http://pastebin.com/A4LkB8sF)

```
FB.ui({ method: ‘apprequests’, message: ‘Facebook Promotion App’ }); 
```

它工作正常，但如果他们单击 FB 通知栏中的链接，他们不会直接链接到我的页面和应用程序。相反，他们处于“中间的一步”。该应用程序在小于 810 像素且没有点赞按钮的 iframe 中可见。

这是链接参数：

* **/?fb_source=notification&request_ids=12345621890&ref=notif&app_request_type=user_to_user¬if_t=app_request***

问题出在哪里？为什么 FB 不直接将用户链接到页面中的应用程序？

我想解决方案可能在应用程序设置中的某个地方……但我不知道。

请帮助我，重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:12:12.310

`redirect_uri`还要在参数列表中指定。

# github - 为什么我在github上点击fork没有任何反应？

> ID：14452529
> 
> 赞同：0
> 
> 时间：2013-01-22T06:06:25.140
> 
> 标签：github

我在 github 中创建了一个存储库，然后在我的本地机器上发出了以下命令：

```
git push origin master 
```

现在我看到了 github 上的所有文件。

我想开始进行更改。考虑到这一点，我点击了 github 屏幕上的 fork 按钮。然而什么也没有发生。我在浏览器屏幕底部看到一条消息，仅此而已。

如何将我的“分叉”版本复制到本地计算机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:26:40.653

如果你想在你的 GitHub 存储库上工作，你需要在[本地克隆它](https://stackoverflow.com/questions/1872113/how-do-i-clone-a-github-project-to-run-locally)。

*   如果您希望其他人直接在您的 repo 中做出贡献，您需要将[他们声明为 collaborator](https://help.github.com/articles/how-do-i-add-a-collaborator)。
    您可以设置一个专门的分支供他们使用。
*   如果您不希望他们*直接*推送到您的仓库，*那么*您的同事需要分叉您的仓库，并在本地克隆他们的分叉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:09:41.757

如果它是您的存储库，则无需分叉该存储库。

如果我正确阅读了您的问题，要进行更改，只需在文本编辑器中编辑有问题的文件，保存它们，打开终端，将目录更改为包含代码的目录，然后编写`git add .`然后. 新代码应作为新提交在 GitHub 中更新。`git commit -m "Your commit message"``git push`

# c# - 将值传递给对象时出错

> ID：14452537
> 
> 赞同：2
> 
> 时间：2013-01-22T06:07:02.260
> 
> 标签：c#, asp.net

这是我在 ASP.net 项目中的代码。我正在尝试使用我的 Web 表单将一些值存储到我的对象中，但它会弹出一条错误消息：无法将类型“short”隐式转换为“string”。

```
 textbox.Text = Convert.ToInt16(object.number);
    lstbox.SelectedValue = Convert.ToInt16(object.ID); 
```

在我的对象类中，我已将变量声明为 int。请让我知道出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:09:32.760

和`Text`属性`SelectedValue`是字符串。你为什么要首先将这些值转换为`short`？

```
textbox.Text = object.number.ToString();
lstbox.SelectedValue = object.ID.ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T06:11:14.473

您不能将非字符串值分配给接受字符串/文本值的属性。在您的情况下，您正在尝试为文本框的文本属性分配一个短值。`Convert.ToString`请使用or将值转换为字符串`ToString()`。

所以你的代码应该是

```
textbox.Text = Convert.ToString(object.number); 
```

或者

```
textbox.Text = object.number.ToString(); 
```

分配列表框的选定值属性时，场景相同。

```
lstbox.SelectedValue = Convert.ToString(object.ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T21:40:38.680

由于您想将值传递给对象，因此您应该让对象的变量 = 输入值。

```
 object.number = Convert.ToInt16(textbox.Text);
    object.ID = Convert.ToInt16(lstbox.SelectedValue); 
```

# mysql - SQL 中的队列分析

> ID：14452538
> 
> 赞同：9
> 
> 时间：2013-01-22T06:07:14.583
> 
> 标签：mysql, sql

希望对用户群进行一些同期群分析。我们有 2 个表“用户”和“会话”，其中用户和会话都有一个“created_at”字段。我正在寻找生成一个 7 x 7 数字表（带有一些空白）的查询，该表向我显示：在特定日期创建的同时创建会话的用户计数 y = (0..6几天前），表示他那天回来了。

```
created_at  d2  d3  d4
today       *   *   *
today-1     49  *   *
today-2     45  30  *
today-3     47  48  18
... 
```

在这种情况下，今天 3 创建的 47 个用户在今天 2 返回。

我可以在单个 MySQL 查询中执行此操作吗？我可以像这样单独执行查询，但是在一个查询中完成所有查询会非常好。

```
SELECT `users`.* FROM `users` INNER JOIN `sessions` ON `sessions`.`user_id` = `users`.`id` WHERE `users`.`os` = 'ios' AND (`sessions`.`updated_at` BETWEEN '2013-01-16 08:00:00' AND '2013-01-17 08:00:00') 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T18:17:25.947

这似乎是一个复杂的问题。不管它在你看来是否也是一个困难的问题，从一个较小的问题开始解决它绝不是一个坏主意。

例如，您可以从返回上周注册的所有用户（仅用户）的查询开始，即根据您的要求从现在六天后的那一天开始：

```
SELECT *
FROM users
WHERE created_at >= CURDATE() - INTERVAL 6 DAY 
```

下一步可能是按日期对结果进行分组并计算每组中的行数：

```
SELECT
  created_at,
  COUNT(*) AS user_count
FROM users
WHERE created_at >= CURDATE() - INTERVAL 6 DAY
GROUP BY created_at 
```

如果`created_at`是`datetime`or `timestamp`，则`DATE(created_at)`用作分组标准：

```
SELECT
  DATE(created_at) AS created_at,
  COUNT(*) AS user_count
FROM users
WHERE created_at >= CURDATE() - INTERVAL 6 DAY
GROUP BY DATE(created_at) 
```

但是，您似乎不需要输出中的*绝对*日期，而只需要*相对*日期，例如`today`等`today - 1 day`。在这种情况下，您可以使用[`DATEDIFF()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_datediff)返回两个日期之间的天数的函数来生成（数字）偏移量从今天开始并按这些值分组：

```
SELECT
  DATEDIFF(CURDATE(), created_at) AS created_at,
  COUNT(*) AS user_count
FROM users
WHERE created_at >= CURDATE() - INTERVAL 6 DAY
GROUP BY DATE(created_at) 
```

您的`created_at`列将包含“日期”，如`0`，`1`依此类推，直到`6`。将它们转换为`today`等`today-1`是微不足道的，您将在最终查询中看到这一点。然而，到目前为止，我们已经到了需要后退一步（或者，也许是向右走半步）的地步，因为我们真的不需要计算用户，而是计算他们的*回报*. 因此，目前需要的实际工作数据集`users`将是：

```
SELECT
  id,
  DATEDIFF(CURDATE(), created_at) AS day_offset
FROM users
WHERE created_at >= CURDATE() - INTERVAL 6 DAY 
```

我们需要用户 ID 来将此行集加入（将要从中派生的行集）`sessions`，并且我们需要`day_offset`作为分组标准。

接下来，需要在`sessions`桌子上执行类似的转换，我不会对此进行详细说明。可以说生成的查询与上一个查询非常相同，只有两个例外：

*   `id`替换为`user_id`;

*   DISTINCT 应​​用于整个子集。

DISTINCT 的原因是每个用户和每天返回不超过一行：据我了解，无论用户在特定日期可能有多少会话，您都希望将它们计为*一次 return*。因此，这是从以下内容得出的`sessions`：

```
SELECT DISTINCT
  user_id,
  DATEDIFF(CURDATE(), created_at) AS day_offset
FROM sessions
WHERE created_at >= CURDATE() - INTERVAL 6 DAY 
```

现在只剩下加入两个派生表，应用分组并使用条件聚合来获得所需的结果：

```
SELECT
  CONCAT('today', IFNULL(CONCAT('-', NULLIF(u.DayOffset, 0)), '')) AS created_at,
  SUM(s.DayOffset = 0) AS d0,
  SUM(s.DayOffset = 1) AS d1,
  SUM(s.DayOffset = 2) AS d2,
  SUM(s.DayOffset = 3) AS d3,
  SUM(s.DayOffset = 4) AS d4,
  SUM(s.DayOffset = 5) AS d5,
  SUM(s.DayOffset = 6) AS d6
FROM (
  SELECT
    id,
    DATEDIFF(CURDATE(), created_at) AS DayOffset
  FROM users
  WHERE created_at >= CURDATE() - INTERVAL 6 DAY
) u
LEFT JOIN (
  SELECT DISTINCT
    user_id,
    DATEDIFF(CURDATE(), created_at) AS DayOffset
  FROM sessions
  WHERE created_at >= CURDATE() - INTERVAL 6 DAY
) s
ON u.id = s.user_id
GROUP BY u.DayOffset
; 
```

我必须承认我没有对此进行测试/调试，但是，如果需要，我很乐意使用您提供的数据样本，一旦您提供它们。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-14T05:40:56.707

> ***每月明智的队列示例：***

**首先让我们创建表个人用户活动流（MONTH WISE）：**

```
SELECT 
    mu.created_timestamp AS cohort
    , mu.id AS user_id
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 1 AND l.user_id = mu.id) AS m1
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 2 AND l.user_id = mu.id) AS m2
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 3 AND l.user_id = mu.id) AS m3
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 4 AND l.user_id = mu.id) AS m4
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 5 AND l.user_id = mu.id) AS m5
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 6 AND l.user_id = mu.id) AS m6
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 7 AND l.user_id = mu.id) AS m7
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 8 AND l.user_id = mu.id) AS m8
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 9 AND l.user_id = mu.id) AS m9
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 10 AND l.user_id = mu.id) AS m10
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 11 AND l.user_id = mu.id) AS m11
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 12 AND l.user_id = mu.id) AS m12
FROM user mu 
WHERE mu.created_timestamp BETWEEN '2018-01-01 00:00:00' AND '2019-12-31 23:59:59' 
```

**然后在此表之后计算用户的个人活动总和：**

```
SELECT MONTH(c.cohort) AS cohort
       ,COUNT(c.user_id) AS signups
       ,SUM(c.m1) AS m1 
       ,SUM(c.m2) AS m2 
       ,SUM(c.m3) AS m3 
       ,SUM(c.m4) AS m4 
       ,SUM(c.m5) AS m5 
       ,SUM(c.m6) AS m6 
       ,SUM(c.m7) AS m7 
       ,SUM(c.m8) AS m8 
       ,SUM(c.m9) AS m9 
       ,SUM(c.m10) AS m10 
       ,SUM(c.m11) AS m11 
       ,SUM(c.m12) AS m12 
FROM (SELECT 
    mu.created_timestamp AS cohort
    , mu.id AS user_id
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 1 AND l.user_id = mu.id) AS m1
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 2 AND l.user_id = mu.id) AS m2
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 3 AND l.user_id = mu.id) AS m3
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 4 AND l.user_id = mu.id) AS m4
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 5 AND l.user_id = mu.id) AS m5
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 6 AND l.user_id = mu.id) AS m6
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 7 AND l.user_id = mu.id) AS m7
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 8 AND l.user_id = mu.id) AS m8
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 9 AND l.user_id = mu.id) AS m9
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 10 AND l.user_id = mu.id) AS m10
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 11 AND l.user_id = mu.id) AS m11
    ,(SELECT IF(COUNT(l.order_date) = 0 , 0, 1) FROM order l WHERE MONTH(l.order_date) = 12 AND l.user_id = mu.id) AS m12
FROM user mu 
WHERE mu.created_timestamp BETWEEN '2018-01-01 00:00:00' AND '2019-12-31 23:59:59') AS c GROUP BY MONTH(cohort) 
```

**您可以使用天来代替月份，其他明智的队列分析主要用于月份情况**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-09T15:35:42.443

这个答案反转了@Newy 想要的输出表，因此群组是行而不是列，并使用绝对日期而不是相对日期。

我正在寻找一个可以给我这样的查询：

```
Date        d0  d1  d2  d3  d4  d5  d6
2016-11-03  3   1   0   0   0   0   0
2016-11-04  4   2   0   1   0   0   *
2016-11-05  7   0   1   1   0   *   *
2016-11-06  7   3   1   1   *   *   *
2016-11-07  13  5   1   *   *   *   *
2016-11-08  4   0   *   *   *   *   *
2016-11-09  1   *   *   *   *   *   * 
```

我正在寻找在某个日期注册的用户数量，然后有多少用户在 1 天后、2 天后返回等等。所以在 2016-11-07 13 用户注册并进行了会话，然后 5这些用户中有 1 天后回来了，然后有一个用户在 2 天后回来了，依此类推。

我采用了@Andriy M 的大型查询的第一个子查询并对其进行了修改，以提供用户注册的日期，而不是相对于当前日期的日期：

```
SELECT
    id,
    DATE(created_at) AS DayOffset
  FROM users
  WHERE created_at >= CURDATE() - INTERVAL 6 DAY 
```

然后我修改的 LEFT JOIN 子查询如下所示：

```
 SELECT DISTINCT
    sessions.user_id,
    DATEDIFF(sessions.created_at, user.created_at) AS DayOffset
    FROM sessions
    LEFT JOIN users ON (users.id = sessions.user_id)
    WHERE sessions.created_at >= CURDATE() - INTERVAL 6 DAY 
```

我希望 dayoffset 不是相对于@Andriy M 的回答中的当前日期，而是相对于用户注册的日期。因此，我确实在用户表上留下了联接，以获取用户注册的时间并对其进行了日期差异。

所以最终的查询看起来像这样：

```
SELECT u.DayOffset as Date,
  SUM(s.DayOffset = 0) AS d0,
  SUM(s.DayOffset = 1) AS d1,
  SUM(s.DayOffset = 2) AS d2,
  SUM(s.DayOffset = 3) AS d3,
  SUM(s.DayOffset = 4) AS d4,
  SUM(s.DayOffset = 5) AS d5,
  SUM(s.DayOffset = 6) AS d6
FROM (
 SELECT
    id,
    DATE(created_at) AS DayOffset
  FROM users
  WHERE created_at >= CURDATE() - INTERVAL 6 DAY
) as u
LEFT JOIN (
    SELECT DISTINCT
    sessions.user_id,
    DATEDIFF(sessions.created_at, user.created_at) AS DayOffset
    FROM sessions
    LEFT JOIN users ON (users.id = sessions.user_id)
    WHERE sessions.created_at >= CURDATE() - INTERVAL 6 DAY
) as s
ON s.user = u.id
GROUP BY u.DayOffset 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-20T16:16:36.870

基于@Newy 响应的每月队列：

```
SELECT u.MonthOffset AS MONTH,

  SUM(s.MonthOffset = 0) AS m0,
  SUM(s.MonthOffset = 1) AS m1,
  SUM(s.MonthOffset = 2) AS m2,
  SUM(s.MonthOffset = 3) AS m3,
  SUM(s.MonthOffset = 4) AS m4,
  SUM(s.MonthOffset = 5) AS m5,
  SUM(s.MonthOffset = 6) AS m6
FROM (
 SELECT
    id,
    TIMESTAMPDIFF(month, DATE(date), CURDATE()) AS MonthOffset
  FROM users
  WHERE date >= CURDATE() - INTERVAL 6 month
) AS u
LEFT JOIN (
    SELECT DISTINCT
    user_id,
    TIMESTAMPDIFF(month, DATE(date), CURDATE()) AS MonthOffset
    FROM sessions
    WHERE sessions.date >= CURDATE() - INTERVAL 6 month
) AS s
ON s.user_id = u.id
GROUP BY u.MonthOffset; 
```

# mysql - 从 .txt 文件导入 MySQL 数据库转储

> ID：14452541
> 
> 赞同：0
> 
> 时间：2013-01-22T06:07:17.997
> 
> 标签：mysql, wordpress, apache, iis-7, joomla

我有一个 Joomla 数据库，它`.txt`使用以下命令转储到 appache 服务器上的文件中：-

```
mysqldump -u admin --opt -p passwd > private/alexthekiddb.txt 
```

如何将其导入到我的 IIS 服务器上的新 MySQL 数据库中，以便我可以尝试从 Joomla 转换为 Wordpress。

我可以使用 phpmyadmin 或 MySQL 内置命令行工具。

我已经创建了第二个新数据库，其名称和用户（和 PW）与原始数据库相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:09:13.937

通常，只需运行`mysql private/alexthekiddb.txt` 或`mysql < private/alexthekiddb.txt`应该就足够了。因此，此类转储文件通常带有后缀`.sql`

当然，你应该在目标机器上有一个 MySQL 服务器（IIS 的东西）。

# html - 超链接的定位问题

> ID：14452542
> 
> 赞同：0
> 
> 时间：2013-01-22T06:07:18.043
> 
> 标签：html, css

我有一个`div`包含简单的文本。我应该只显示 3 行带有`showMore`链接的文本。单击 showMore 链接时，我需要用`showLess`链接显示其中的所有文本。现在我正在使用`overflow`属性来实现这一点。但是有一个小问题，我应该`"showMore"`在文本之后立即显示链接。那么如何在文本中定位超链接呢？

我的代码

```
 jQuery(document).ready(function () {
    jQuery('.showMore').click(function (event) {
        var contentDiv = jQuery('.contentDiv');
        contentDiv[0].style.height = 'auto';
        jQuery(event.target).hide();
        jQuery('.showLess').show();
    });
    jQuery('.showLess').click(function (event) {
        var contentDiv = jQuery('.contentDiv');
        var lineHeight = getLineHeight(contentDiv[0]);
        contentDiv[0].style.height = lineHeight * 3 + 'px';
        jQuery(event.target).hide();
        jQuery('.showMore').show();
    });
});

<!doctype html>
    <html>

    <body >
<div>
<div class = "contentDiv">
some content <br r1<br> r2<br> r3 <br> r4<br> r5
    </div>      
<a href = '#'  class = "showMore">Show More</a>
<a href = '#'  class = "showLess">Show Less</a>     
</div>
    </body>
    </html>

.contentDiv a {
    float : right;
 }
.contentDiv {
    overflow: hidden;
    height:3.6em;
    background:#ccc;
font-size : 12pt ;
    font-family :Courier;
 }
.showMore {
    float: right;
}
.showLess {
    position: relative;
    float: right;
    display : none;
margin-bottom : 5px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:24:59.980

实现这一目标的百万种方法中的一种：[小提琴](http://jsfiddle.net/YLFJF/2/)

HTML

```
<div id="text">Lots of text..</div>
<a href="#" id="showmore">Show More</a>
<a href="#" id="showless">Show Less</a> 
```

CSS

```
#text {height:55px;overflow:hidden;}
#showless {display:none;} 
```

jQuery

```
$('#showmore').on('click', function(e){
    $('#text').css('overflow', 'visible').css('height', 'auto');
    $('#showless').show();
    $(this).hide();
    e.preventDefault();
});

$('#showless').on('click', function(e){
    $('#text').css('overflow', 'hidden').css('height', '55px');
    $('#showmore').show();
    $(this).hide();
    e.preventDefault();
}); 
```

要将“显示更多”放置在右下角（根据您的后续评论中的要求），请将`<a>`标签放在 div 内并将其绝对定位。[小提琴](http://jsfiddle.net/YLFJF/4/)

HTML

```
<div id="text">Lots of text..
    <a href="#" id="showmore">Show More</a>
</div>
<a href="#" id="showless">Show Less</a> 
```

CSS

```
#text {height:55px;overflow:hidden;position:relative;}
#showmore {position:absolute;bottom:0;right:0;background:#fff;padding-left:10px;}
#showless{display:none;} 
```

# c# - 未使用的汇编函数/方法是否被加载到内存中？

> ID：14452546
> 
> 赞同：2
> 
> 时间：2013-01-22T06:07:39.630
> 
> 标签：c#, .net, performance, optimization

当该程序集的任何方法被调用时，JIT 将程序集加载到内存中，但是如果在该程序集的应用程序中使用了某些方法并且某些方法未使用，那么这些方法是否仍然被加载到内存中？

此外，如果程序集加载到内存中带有许多未使用的函数和方法，是否会影响该应用程序的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:40:34.910

正如@Dennis 所说，Loading 和 JIT'ing 是 CLR 中两个不同子系统完成的两种不同操作。但他们是依赖的。

您在上下文中有两个问题，要回答它们

1.  JIT 不加载程序集，加载程序会。所有类及其成员的元数据都加载到内存中，但这样的方法仅按需进行 JIT 处理（即在调用它们时）。

2.  JIT 的方法不会在内存中停留很长时间，除非有人引用。CLR 将根据清理程序清理它们。如果以后需要该方法，则加载该方法并再次重新编译（JIT'ed）。因此，在理想情况下，未使用的函数不会影响应用程序的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:15:21.440

不要混淆程序集加载和 JIT 编译。

*当使用该程序集中定义的任何类型时，程序集被加载一次（它的使用方式*无关紧要- 例如，这可以是公共字段访问）；但是当必须执行一种或另一种方法时，JIT 编译（即从 IL 到机器指令的转换）会发生很多次。

程序集加载并不意味着该程序集中的每个方法的 JIT 编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:31:24.287

您是否正在寻找加载到 AppDomain 中的程序集的性能计数器？这可能是您在 Windows SDK 中的一个好途径，这组指标有一些性能计数器 - [http://msdn.microsoft.com/en-us/library/ekec01h3.aspx](http://msdn.microsoft.com/en-us/library/ekec01h3.aspx)

您可以使用上面指定的计数器运行 perfmon 以收集与您拥有的另一个应用程序的一些比较数据，在查看像这样的微优化时，最好有一个基线指标，然后修改和检查性能下降。 [运行性能](http://msdn.microsoft.com/en-us/library/w4bz2147.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:36:44.230

根据规范，当第一次使用任何类型的程序集时，CLR 会加载该程序集。我认为没有办法告诉 CLR 只加载程序集的一部分，因此所有类型和方法（使用的或未使用的）都将加载到内存中，尽管编译（JIT-ing）直到类型才会发生（或者可能是方法）正在使用。

出于性能考虑，我可以说这不会影响**性能**，但会影响**内存使用**。

# dao - Import Custom DAO Jar Class File Not Found Exception

> ID：14452547
> 
> 赞同：0
> 
> 时间：2013-01-22T06:07:40.277
> 
> 标签：dao, classnotfoundexception, jdbctemplate

I developed a DAO war project using Spring JDBC template which has applicationContext.xml in it and export as jar. Then, I had created another jar project which import the DAO jar but it throw below stack trace.

```
Exception in thread "main" org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.breeze.bis.dao.service.jdbcTemplate] for bean with name 'genericDaoImpl' defined in class path resource [applicationContext.xml]; nested exception is java.lang.ClassNotFoundException: com.breeze.bis.dao.service.jdbcTemplate
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1332)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:898)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:588)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.breeze.dao.Main.main(Main.java:28)
Caused by: java.lang.ClassNotFoundException: com.breeze.bis.dao.service.jdbcTemplate
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 9 more 
```

The DAO jar is import as library, required project in build path and order and export tab in eclipse but how come URLClassLoader not able to load the class since the jar consists of the mention class.

Please help.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:31:37.403

Thread closed because of wrong class name in applicationContext.xml

# ruby-on-rails - 为什么捆绑安装不适用于我的 Rails 应用程序？

> ID：14452548
> 
> 赞同：0
> 
> 时间：2013-01-22T06:07:45.253
> 
> 标签：ruby-on-rails, ruby, windows, bundler

我正在艰难地阅读 ruby​​ on rails 教程（所以我很无知），而且我似乎遇到了捆绑器的问题。最初，“捆绑安装”工作正常，但现在我得到了这个：

```
C:\Users\Me\RonR\first_app>bundle install
C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:926:in `report_activate_error': Could not find RubyGem bundler (>= 0) (Gem::LoadError)
        from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:244:in `activate_dep'
        from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:236:in `activate'
        from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:1307:in `gem'
        from C:/RailsInstaller/Ruby1.9.3/bin/bundle:18:in `<main>' 
```

我尝试按照另一个线程中的建议执行“gem install bundler”，但这本身会产生以下结果：

```
C:\Users\Me\RonR\first_app>gem install bundler
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - C:/Program Files (x86)/ruby-1.9.2/bin/bundle.bat 
```

我试过四处寻找，但我对这一切都非常陌生，有时，我什至无法判断其他人的问题是否与我的相同。如果我需要提供更多相关信息，请告诉我。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:12:35.283

您需要`gem install bundler`在使用管理员命令提示符、更改权限`C:/Program Files (x86)/ruby-1.9.2`以允许您的用户写入它或将 Ruby 1.9.2 安装路径更改为可写的某个位置（例如）之后安装 bundler ( `c:\ruby-1.9.2`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:45:48.580

看起来您是在没有特权的帐户中运行命令。尝试：

```
sudo gem install bundler 
```

# mono - 重定位前缀目录时，如何配置 mono 以使用 etc/ 目录的正确路径？

> ID：14452550
> 
> 赞同：3
> 
> 时间：2013-01-22T06:07:53.860
> 
> 标签：mono

我已经在 linux 上编译了单声道 2.10.9 和 3.0.3，并且希望能够将这些安装移动到不同的位置而无需重新编译。我遇到的问题是 mono-sgen 在重定位后无法找到 etc/ 目录。有趣的是，使用 boehm GC 的 mono*能够*在重定位后找到该目录。这两个可执行文件的行为不同是有原因的吗？

我已经能够使用 MONO_PATH 指定更新的库路径，如下所示：

```
export MONO_PATH=${PKG_DIR}/lib/mono/4.0:${PKG_DIR}/lib/mono/3.5:${PKG_DIR}/lib/mono/2.0:${PKG_DIR}/lib/mono/compat-2.0 
```

但我坚持让 mono-sgen 找到 etc/ 目录。结果我收到的例外是：

```
ConfigurationErrorsException: Error Initializing the configuration system. 
```

如果使用新前缀重新编译单声道是最简单的解决方案，我会走那条路，但希望我可以做些别的事情来让它工作。当您可以重新定位具有所有依赖项的整个程序并且它仍然有效时，这很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T20:57:29.473

上述问题的答案是：

```
export MONO_CONFIG=${PKG_DIR}/etc/mono/config
export MONO_CFG_DIR=${PKG_DIR}/etc 
```

但是，您可能需要设置许多其他环境变量才能使重新定位的单声道安装完全正常工作。继续阅读...

我能够得到这个工作。事实证明，需要设置许多变量才能使重定位正常工作。以下代码假定单声道安装已移至`${PKG_DIR}`. 我移动了我需要的所有字体，`${PKG_DIR}/etc/fonts`以便在将安装移动到不同的系统时可以找到它们。这是我使用的环境变量。其中一些可能不是必需的：

```
export LD_LIBRARY_PATH=$PKG_DIR/lib64:$PKG_DIR/lib:$LD_LIBRARY_PATH
export LD_RUN_PATH=$LD_LIBRARY_PATH
export PKG_CONFIG_PATH=$PKG_DIR/lib64/pkgconfig:$PKG_CONFIG_PATH
export MONO_GAC_PREFIX=${PKG_DIR}
export MONO_PATH=${PKG_DIR}/lib/mono/4.0:${PKG_DIR}/lib/mono/3.5:${PKG_DIR}/lib/mono/2.0:${PKG_DIR}/lib/mono/compat-2.0
export MONO_CONFIG=${PKG_DIR}/etc/mono/config
export MONO_CFG_DIR=${PKG_DIR}/etc
export C_INCLUDE_PATH=${PKG_DIR}/include
export ACLOCAL_PATH=${PKG_DIR}/share/aclocal
export FONTCONFIG_PATH=${PKG_DIR}/etc/fonts
export XDG_DATA_HOME=${PKG_DIR}/etc/fonts
export MONO_REGISTRY_PATH=~/.mono/registry 
```

# jenkins - 詹金斯声称构建为不稳定，尽管我看到它通过了

> ID：14452552
> 
> 赞同：1
> 
> 时间：2013-01-22T06:07:54.997
> 
> 标签：jenkins

我有一个简单的 Jenkins 工作，我运行 python 脚本来运行一堆测试。我认为构建不稳定，即使我在 Jenkins 工作中没有看到明显的错误，也没有测试失败。

我正在运行的是python

我没有使用任何像鼻子这样的外部测试框架。它只是一个python脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:40:10.873

“不稳定”是 Jenkins 在测试失败时分配的结果。获得“不稳定”结果的唯一其他方法是使用一些构建后插件。如果您没有任何其他插件将构建设置为不稳定，那么您必须仔细查看所有测试。

如果您在此处粘贴控制台输出，那也会有所帮助

# asp.net-mvc - 不支持关键字：出现“数据源”错误

> ID：14452560
> 
> 赞同：1
> 
> 时间：2013-01-22T06:08:39.357
> 
> 标签：asp.net-mvc, ado.net, sql-server-express

错误 ：

> *不支持关键字：“数据源”。在 System.Data.Common.DbConnectionOptions.ParseInternal（Hashtable parsetable，String connectionString，Boolean buildChain，Hashtable 同义词，Boolean firstKey）*

我正在使用的连接字符串是

```
<add name="ApplicationServices"
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
     providerName="System.Data.SqlClient" /> 
```

以前它在应用程序部署在服务器上时工作。

但是从现在开始，当我部署在同一台服务器上时，即使我没有使用它，我也会收到错误消息。它只是在配置文件中声明。我在我的应用程序中使用其他 sql 连接字符串。

任何人都可以弄清楚到底是什么问题。

提前致谢。

# jquery - 在单个页面中使用多个引导 Typeahead 字段？

> ID：14452563
> 
> 赞同：6
> 
> 时间：2013-01-22T06:08:52.203
> 
> 标签：jquery, twitter-bootstrap, scope, typeahead

我已经修改了 bootstrap typeahead 以在选择 typeahead 元素时将 id 与元素相关联。

```
function addTypeahead(element)
 {
     var labels, mapped;
     var myElement = $(element);
     console.log(myElement);
    myElement.typeahead({
        source: function (query, process){
            $.post('/edit/unassigned_list', {q: query}, function(data){
                labels = [];
                mapped = {};
                //console.log(data);
                $.each(data, function(i, item){
                    var query_label = item.name;
                    mapped[query_label] = item;
                    labels.push(query_label);
                });

                process(labels);    
            }, "JSON");
        },
        updater: function (query_label){
            var item = mapped[query_label];
            myElement.attr('person_id', item.id);
            return query_label;
        }
        });

 } 
```

这很好用。但是，当我尝试将其设置为跨多个元素工作时，我最终会在第一个元素上遇到问题（我认为是因为我不小心让它泄漏到了全局范围内，或者我做了一些可怕的错误）。我给你举个例子

我有多个标记为 #project-auto-* 的项目元素，我在我的文档（就绪）部分运行以下代码：

```
$("[id^=project-auto-]").each(function(index, element){
        var local = $(element);
        addTypeahead(element);
    }); 
```

如果我只是遍历并控制台记录它们都显示的每个元素。但是，如果我尝试对其中任何一个应用预输入，则只有第一个具有预输入（并且它可以正常工作），但循环在第一个应用程序后终止。我一直在摸索和玩弄不同的范围（这就是为什么所有范围嵌套）都无济于事。我是否做了一些我完全错过的超级愚蠢的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-01T22:06:03.150

本质上，我使用模式匹配自动完成循环遍历 id。然后我初始化 Bloodhound 并预先输入与模式标准匹配的元素。我从刀片模板上设置的用于搜索的 js 变量中获得了 search_url。请看下面的代码：

```
 $(function () {

  var $element = $('[id$=filter_autocomplete]');

  if ($element.length > 0) {
    // Loop through each element that is autocomplete
    $.each($element, function (index, element) {

       // $form      obj       name of the closest form
       // formData   string    name of the resource making the request
       // paramName  string    name of the string field
       // primaryKey string    name of the primary key
       // id         string    id of the element

      var $form = $(element).closest('form');
      var formData = $form.data('resource');
      var paramName = $(element).attr('data-field');
      var primaryKey = $(element).attr('data-primaryKey');
      var id = $(element).attr('id');

      // Sets the bhEngine as new Bloodhound object
      var bhEngine = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace(paramName),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        remote: {
          url: search_url + '?value=%QUERY&resource=' + formData +  '&input_id='          + paramName,
          wildcard: "%QUERY"
        }
      });

      // Set up typeahead for each element
      $(element).typeahead(null, {
        name: paramName,
        display: paramName,
        minLength: 0,
        highlight: true,
        hint: true,
        source: bhEngine.ttAdapter(),
        templates: {
          empty: [
            '<div class="no-items">' +
            '<p class="alert alert-danger">',
            '<strong>No Items Found</strong>',
            '</p></div>'
          ].join('\n')
        }
      }).on('typeahead:selected', function (obj, datum) {
        // Set the hidden primary key field
        $("#hidden\\|" + paramName).val(datum[primaryKey]);
      });
    });
  }
}); 
```

# java - 我可以在 Java 8 中将 Clojure 函数用作 Lambda 吗？

> ID：14452568
> 
> 赞同：13
> 
> 时间：2013-01-22T06:09:18.220
> 
> 标签：java, clojure, lambda, functional-programming, java-8

[我在 Clojure 中使用了许多库，它们生成符合“ clojure.lang.IFn](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IFn.java) ”接口的高阶函数。

它有多个 arity 重载，即接口看起来像：

```
public interface IFn extends Callable, Runnable{
  public Object invoke() ;
  public Object invoke(Object arg1) ;
  public Object invoke(Object arg1, Object arg2) ;
  public Object invoke(Object arg1, Object arg2, Object arg3) ;
  .... etc.
  public Object applyTo(ISeq arglist) ;
} 
```

我可以在 Java 8 中直接使用这种类型的对象作为可调用的 lambda 函数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T08:57:05.457

你是什​​么意思，使用这种类型的对象作为可调用的 lambdas？

在*非常简单的*情况下，Java 8 lambda*可以被认为是*语法糖 + 某些类型接口的匿名类的某种类型推断，即*功能接口* [[1]](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html)：

> 上面使用的接口 ActionListener 只有一个方法。很多常见的回调接口都有这个属性，比如 Runnable 和 Comparator。我们将为所有只有一种方法的接口命名：函数式接口。

备注：lambdas 实际上不仅仅是一种糖；在内部，它们的实现方式与匿名类不同，并且也存在一些语义差异；有关此问题的更多信息，请参阅ProgrammersExchange 上的[出色答案](https://softwareengineering.stackexchange.com/a/181743)。然而，在这个问题和答案的背景下，这并不重要。

任何需要某个函数接口的值的地方（方法参数、局部变量、字段声明等），都可以使用短语法来创建一个类似于实现此方法的匿名类的实体，即 lambda 表达式：

```
Runnable r = () -> {
    System.out.println("Hi");
};
// Equivalent to
Runnable r = new Runnable() {
    public void run() {
        System.out.println("Hi");
    }
};

public interface Function<F, T> {
    T call(F arg);
}

Function<String, char[]> c = s -> ("<" + s + ">").toCharArray();
// Equivalent to
Function<String, char[]> c = new Function<>() {
    public char[] call(String s) {
        return ("<" + s + ">").toCharArray();
    }
}; 
```

所以你的问题只能用以下方式解释：是否可以`IFn`使用 Java 8 lambda 语法创建类型的对象？

答案是不。Lambda 语法仅适用于函数式接口。`clojure.lang.IFn`不是功能接口，因为它包含的不仅仅是单一方法，所以不可能做类似的事情

```
IFn f = (String s) -> s.toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-11T15:49:12.157

不，您似乎不能使用 clojure 函数，就好像它们也是有效的 java lambdas 一样。Clojure 的 IFn 不符合定义的 java 的“lambda”功能接口。

# sql - 命名存储过程

> ID：14452569
> 
> 赞同：1
> 
> 时间：2013-01-22T06:09:18.643
> 
> 标签：sql, oracle, stored-procedures, plsql, plsqldeveloper

我需要根据命名参数调用存储过程。

```
RMFF_RETRO_ACTIVE_CALCS_SP(p_region_cd,p_plant_cd,
p_supplier_nbr,p_matrl_nbr,'','','N',p_user_id,p_err_cd,p_err_msg); 
```

在这个我需要使用命名参数。

但 my`p_region_cd`与被调用过程同名

```
p_region_cd=>p_region_cd. 
```

这个怎么做？我只需要在第 5,6 位命名

请建议我如何打电话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:40:44.920

使用

```
p_region_cd=>p_region_cd 
```

应该不是问题。例如下面的块运行得很好。

```
declare 
  po_next_stmt_date number(8);
  po_next_due_date  number(8);
  po_rsp_code       varchar2(3);
  po_rsp_dscr       varchar2(256);

begin
  oc_eoc.SP_EOC_GET_NEXT_STMT_DATE(pi_last_eoc_date => 20130210,
                                   pi_new_cycle_code => '02',
                                   po_next_stmt_date => po_next_stmt_date,
                                   po_next_due_date => po_next_due_date,
                                   po_rsp_code => po_rsp_code,
                                   po_rsp_dscr => po_rsp_dscr);
end; 
```

您必须注意的是，如果您从命名参数开始，那么您必须继续这样做。以下也很好：

```
oc_eoc.SP_EOC_GET_NEXT_STMT_DATE(20130210,
                                 '02',
                                 po_next_stmt_date => po_next_stmt_date,
                                 po_next_due_date => po_next_due_date,
                                 po_rsp_code => po_rsp_code,
                                 po_rsp_dscr => po_rsp_dscr); 
```

但这不是：

```
oc_eoc.SP_EOC_GET_NEXT_STMT_DATE(pi_last_eoc_date => 20130210,
                                 '02',
                                 po_next_stmt_date => po_next_stmt_date,
                                 po_next_due_date => po_next_due_date,
                                 po_rsp_code => po_rsp_code,
                                 po_rsp_dscr => po_rsp_dscr); 
```

# objective-c - 在 Mac Objective-C 程序中访问日历

> ID：14452571
> 
> 赞同：1
> 
> 时间：2013-01-22T06:09:20.713
> 
> 标签：objective-c, xcode, macos, eventkit

这段代码旨在在我的 Mac 上的 iCal 中打印我的默认日历，但返回 (null)。我是否需要更改代码或设置中的某些内容才能访问我的日历？我在 Xcode 4.5.2 中运行它。

```
#import <Foundation/Foundation.h>
#import <EventKit/EventKit.h>

int main(int argc, const char * argv[])
{

    EKEventStore *store = [[EKEventStore alloc] initWithAccessToEntityTypes:EKEntityMaskEvent];
    NSLog(@"%@",[store defaultCalendarForNewEvents].calendarIdentifier);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:42:01.513

对我来说，上面的代码正确地返回了默认日历的标识符（在 10.8.2 上）。

你的应用程序是沙盒的吗？结果将是`(null)`如果您在沙盒中不允许日历访问：

![在此处输入图像描述](../Images/7039a967d1ea779dab5717a030edc5c2.png)

我不确定这是否可能，但还要检查是否选择了默认日历。（我选择了一个，并且无法在 Calendar.app 中将选择设置为无）。

# mysql - mysql触发器按条件插入多个表

> ID：14452572
> 
> 赞同：1
> 
> 时间：2013-01-22T06:09:23.893
> 
> 标签：mysql, triggers

我想使用触发器将行拆分为 2 个不同的表，如果行多于 5，则仅将 5 行插入 table `leave`，将其他行插入 table `nonpay_leave`。我有一个工作触发器，它只在一个中插入行（我在问题的底部包含了触发器和我的数据库代码）。

**当前工作触发器**

我有一个名为的表`staff_leave_application`，其中包含以下列：

`id_staff_leave_application | staff_id_staff | leave_type_id_leave_type | start_date | end_date | joining_date`

它有一个触发器，称为`tn_air_staff_leave_application`：

```
DELIMITER $$

USE `mydb`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `mydb`.`tn_air_staff_leave_application`
AFTER INSERT ON `mydb`.`staff_leave_application`
FOR EACH ROW
BEGIN
        SET @counter := -1; 
        WHILE (@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) DO 
            INSERT INTO `leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
            VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
        END WHILE; 
END$$ 
```

**上面的触发器实际上做了什么？**

此触发器在 insert on 之后运行 `staff_leave_application`。触发器将当前插入的行拆分为日期范围内的每一行，然后将行插入到每天每行`staff_leave_application`调用的表中。`leave`

**然后，我到底想要什么？？？**

我想更改此触发器，以便如果新行多于 5 行，则将其他行插入另一个名为`nonpay_leave`. 比如：如果触发器生成 7 行，则将前 5 行插入到表中`leave`，将其他 2 行插入到表中`nonpay_leave`。

**我的数据库结构**

```
--
-- Table structure for table `designation`
--

CREATE TABLE IF NOT EXISTS `designation` (
  `id_designation` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id_designation`),
  UNIQUE KEY `id_designation_UNIQUE` (`id_designation`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=14 ;

--
-- Dumping data for table `designation`
--

INSERT INTO `designation` (`id_designation`, `name`) VALUES
(10, 'Manager'),
(12, 'Medical Officer'),
(13, 'Peon');

-- --------------------------------------------------------

--
-- Table structure for table `leave`
--

CREATE TABLE IF NOT EXISTS `leave` (
  `id_leave` int(11) NOT NULL AUTO_INCREMENT,
  `staff_leave_application_id_staff_leave_application` int(11) NOT NULL,
  `staff_leave_application_staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `date` date NOT NULL,
  `active` int(11) NOT NULL DEFAULT '1',
  `date_updated` date NOT NULL,
  PRIMARY KEY (`id_leave`,`staff_leave_application_id_staff_leave_application`,`staff_leave_application_staff_id_staff`),
  KEY `fk_table1_leave_type1` (`leave_type_id_leave_type`),
  KEY `fk_table1_staff_leave_application1` (`staff_leave_application_id_staff_leave_application`,`staff_leave_application_staff_id_staff`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=32 ;

--
-- Dumping data for table `leave`
--

INSERT INTO `leave` (`id_leave`, `staff_leave_application_id_staff_leave_application`, `staff_leave_application_staff_id_staff`, `leave_type_id_leave_type`, `date`, `active`, `date_updated`) VALUES
(21, 12, 7, 8, '2013-01-22', 1, '2013-01-21'),
(22, 12, 7, 8, '2013-01-23', 1, '2013-01-21'),
(23, 12, 7, 8, '2013-01-24', 1, '2013-01-21'),
(24, 12, 7, 8, '2013-01-25', 1, '2013-01-21'),
(25, 13, 7, 9, '2013-01-30', 1, '2013-01-21'),
(26, 13, 7, 9, '2013-01-31', 1, '2013-01-21'),
(27, 14, 7, 8, '2013-02-11', 1, '2013-01-21'),
(28, 14, 7, 8, '2013-02-12', 1, '2013-01-21'),
(29, 14, 7, 8, '2013-02-13', 1, '2013-01-21'),
(30, 14, 7, 8, '2013-02-14', 1, '2013-01-21'),
(31, 14, 7, 8, '2013-02-15', 1, '2013-01-21');

-- --------------------------------------------------------

--
-- Table structure for table `leave_allowed`
--

CREATE TABLE IF NOT EXISTS `leave_allowed` (
  `id_leave_allowed` int(11) NOT NULL AUTO_INCREMENT,
  `staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `days` float NOT NULL,
  PRIMARY KEY (`id_leave_allowed`),
  UNIQUE KEY `id_leave_allowed_UNIQUE` (`id_leave_allowed`),
  KEY `fk_leave_allowed_staff1` (`staff_id_staff`),
  KEY `fk_leave_allowed_leave_type1` (`leave_type_id_leave_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `leave_allowed`
--

INSERT INTO `leave_allowed` (`id_leave_allowed`, `staff_id_staff`, `leave_type_id_leave_type`, `days`) VALUES
(1, 7, 8, 2.5),
(2, 7, 9, 200);

-- --------------------------------------------------------

--
-- Table structure for table `leave_app_view`
--

CREATE ALGORITHM=UNDEFINED DEFINER=`1`@`localhost` SQL SECURITY DEFINER VIEW `mydb`.`leave_app_view` AS select `mydb`.`staff`.`name` AS `name`,`mydb`.`staff`.`file_no` AS `file_no`,`mydb`.`staff`.`photo` AS `photo`,`mydb`.`staff_leave_application`.`leave_type_id_leave_type` AS `leave_type_id_leave_type`,`mydb`.`staff_leave_application`.`start_date` AS `start_date`,`mydb`.`staff_leave_application`.`end_date` AS `end_date`,`mydb`.`staff_leave_application`.`joining_date` AS `joining_date` from (`mydb`.`staff` join `mydb`.`staff_leave_application` on((`mydb`.`staff`.`id_staff` = `mydb`.`staff_leave_application`.`staff_id_staff`)));

--
-- Dumping data for table `leave_app_view`
--

INSERT INTO `leave_app_view` (`name`, `file_no`, `photo`, `leave_type_id_leave_type`, `start_date`, `end_date`, `joining_date`) VALUES
('Rahul Ayan', '54', NULL, 8, '2013-01-22', '2013-01-25', '2013-01-26'),
('Rahul Ayan', '54', NULL, 9, '2013-01-30', '2013-01-31', '2013-02-01'),
('Rahul Ayan', '54', NULL, 8, '2013-02-11', '2013-02-15', '2013-02-16');

-- --------------------------------------------------------

--
-- Table structure for table `leave_balance`
--

CREATE TABLE IF NOT EXISTS `leave_balance` (
  `id_leave_balance` int(11) NOT NULL AUTO_INCREMENT,
  `staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `balance` int(3) NOT NULL,
  `date_added` date NOT NULL,
  PRIMARY KEY (`id_leave_balance`),
  UNIQUE KEY `id_leave_balance_UNIQUE` (`id_leave_balance`),
  KEY `fk_leave_balance_staff1` (`staff_id_staff`),
  KEY `fk_leave_balance_leave_type1` (`leave_type_id_leave_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `leave_balance`
--

INSERT INTO `leave_balance` (`id_leave_balance`, `staff_id_staff`, `leave_type_id_leave_type`, `balance`, `date_added`) VALUES
(1, 7, 8, 230, '2013-01-21'),
(2, 7, 9, 200, '2013-01-21');

-- --------------------------------------------------------

--
-- Table structure for table `leave_balance_view`
--

CREATE ALGORITHM=UNDEFINED DEFINER=`1`@`localhost` SQL SECURITY DEFINER VIEW `mydb`.`leave_balance_view` AS select `mydb`.`leave_balance`.`staff_id_staff` AS `staff_id_staff`,`leave_taken`.`leave_type_id_leave_type` AS `leave_type_id_leave_type`,(`mydb`.`leave_balance`.`balance` - `leave_taken`.`days`) AS `new_balance`,`mydb`.`leave_balance`.`date_added` AS `date_added` from ((`mydb`.`staff` join `mydb`.`leave_taken` on((`mydb`.`staff`.`id_staff` = `leave_taken`.`staff_leave_application_staff_id_staff`))) join `mydb`.`leave_balance` on(((`leave_taken`.`staff_leave_application_staff_id_staff` = `mydb`.`leave_balance`.`staff_id_staff`) and (`leave_taken`.`leave_type_id_leave_type` = `mydb`.`leave_balance`.`leave_type_id_leave_type`))));

--
-- Dumping data for table `leave_balance_view`
--

INSERT INTO `leave_balance_view` (`staff_id_staff`, `leave_type_id_leave_type`, `new_balance`, `date_added`) VALUES
(7, 8, 221, '2013-01-21'),
(7, 9, 198, '2013-01-21');

-- --------------------------------------------------------

--
-- Table structure for table `leave_taken`
--

CREATE ALGORITHM=UNDEFINED DEFINER=`1`@`localhost` SQL SECURITY DEFINER VIEW `mydb`.`leave_taken` AS select `mydb`.`leave`.`staff_leave_application_staff_id_staff` AS `staff_leave_application_staff_id_staff`,`mydb`.`leave`.`leave_type_id_leave_type` AS `leave_type_id_leave_type`,count(0) AS `days` from (`mydb`.`leave` join `mydb`.`staff` on((`mydb`.`staff`.`id_staff` = `mydb`.`leave`.`staff_leave_application_staff_id_staff`))) where (`mydb`.`leave`.`active` = 1) group by `mydb`.`leave`.`leave_type_id_leave_type`;

--
-- Dumping data for table `leave_taken`
--

INSERT INTO `leave_taken` (`staff_leave_application_staff_id_staff`, `leave_type_id_leave_type`, `days`) VALUES
(7, 8, 9),
(7, 9, 2);

-- --------------------------------------------------------

--
-- Table structure for table `leave_type`
--

CREATE TABLE IF NOT EXISTS `leave_type` (
  `id_leave_type` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `paid` int(11) DEFAULT NULL,
  PRIMARY KEY (`id_leave_type`),
  UNIQUE KEY `id_leave_type_UNIQUE` (`id_leave_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10 ;

--
-- Dumping data for table `leave_type`
--

INSERT INTO `leave_type` (`id_leave_type`, `name`, `paid`) VALUES
(8, 'Casual Leave', NULL),
(9, 'Medical Leave', NULL);

-- --------------------------------------------------------

--
-- Table structure for table `nonpay_leave`
--

CREATE TABLE IF NOT EXISTS `nonpay_leave` (
  `id_nonpay_leave` int(11) NOT NULL AUTO_INCREMENT,
  `staff_leave_application_id_staff_leave_application` int(11) NOT NULL,
  `staff_leave_application_staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `leave_date` date DEFAULT NULL,
  `active` int(1) DEFAULT NULL,
  `date_updated` date DEFAULT NULL,
  PRIMARY KEY (`id_nonpay_leave`,`staff_leave_application_id_staff_leave_application`,`staff_leave_application_staff_id_staff`),
  KEY `fk_nonpay_leave_staff_leave_application1` (`staff_leave_application_id_staff_leave_application`,`staff_leave_application_staff_id_staff`),
  KEY `fk_nonpay_leave_leave_type1` (`leave_type_id_leave_type`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Dumping data for table `nonpay_leave`
--

-- --------------------------------------------------------

--
-- Table structure for table `staff`
--

CREATE TABLE IF NOT EXISTS `staff` (
  `id_staff` int(11) NOT NULL AUTO_INCREMENT,
  `file_no` varchar(45) NOT NULL,
  `title_id_title` int(11) NOT NULL,
  `name` varchar(80) NOT NULL,
  `dob` date DEFAULT NULL,
  `designation_id_designation` int(11) NOT NULL,
  `status_id_status` int(11) NOT NULL,
  `date_of_join` date DEFAULT NULL,
  `photo` blob,
  `user_name` varchar(10) DEFAULT NULL,
  `password` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`id_staff`),
  UNIQUE KEY `id_staff_UNIQUE` (`id_staff`),
  KEY `fk_staff_title` (`title_id_title`),
  KEY `fk_staff_designation1` (`designation_id_designation`),
  KEY `fk_staff_status1` (`status_id_status`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `staff`
--

INSERT INTO `staff` (`id_staff`, `file_no`, `title_id_title`, `name`, `dob`, `designation_id_designation`, `status_id_status`, `date_of_join`, `photo`, `user_name`, `password`) VALUES
(7, '54', 10, 'Rahul Ayan', '1991-09-14', 10, 6, '2012-01-02', NULL, NULL, NULL);

-- --------------------------------------------------------

--
-- Table structure for table `staff_leave_application`
--

CREATE TABLE IF NOT EXISTS `staff_leave_application` (
  `id_staff_leave_application` int(11) NOT NULL AUTO_INCREMENT,
  `staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  `joining_date` date NOT NULL,
  PRIMARY KEY (`id_staff_leave_application`,`staff_id_staff`),
  UNIQUE KEY `id_staff_leave_UNIQUE` (`id_staff_leave_application`),
  KEY `fk_staff_leave_staff1` (`staff_id_staff`),
  KEY `fk_staff_leave_leave_type1` (`leave_type_id_leave_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15 ;

--
-- Dumping data for table `staff_leave_application`
--

INSERT INTO `staff_leave_application` (`id_staff_leave_application`, `staff_id_staff`, `leave_type_id_leave_type`, `start_date`, `end_date`, `joining_date`) VALUES
(12, 7, 8, '2013-01-22', '2013-01-25', '2013-01-26'),
(13, 7, 9, '2013-01-30', '2013-01-31', '2013-02-01'),
(14, 7, 8, '2013-02-11', '2013-02-15', '2013-02-16');

--
-- Triggers `staff_leave_application`
--
DROP TRIGGER IF EXISTS `tn_air_staff_leave_application`;
DELIMITER //
CREATE TRIGGER `tn_air_staff_leave_application` AFTER INSERT ON `staff_leave_application`
 FOR EACH ROW BEGIN
        SET @counter := -1; 
        WHILE (@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) DO 
            INSERT INTO `leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
            VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
        END WHILE; 
END
//
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `status`
--

CREATE TABLE IF NOT EXISTS `status` (
  `id_status` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(45) NOT NULL,
  PRIMARY KEY (`id_status`),
  UNIQUE KEY `id_ststus_UNIQUE` (`id_status`),
  UNIQUE KEY `type_UNIQUE` (`type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `status`
--

INSERT INTO `status` (`id_status`, `type`) VALUES
(6, 'Contract'),
(7, 'Permanent');

-- --------------------------------------------------------

--
-- Table structure for table `title`
--

CREATE TABLE IF NOT EXISTS `title` (
  `id_title` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(5) NOT NULL,
  PRIMARY KEY (`id_title`),
  UNIQUE KEY `id_title_UNIQUE` (`id_title`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=14 ;

--
-- Dumping data for table `title`
--

INSERT INTO `title` (`id_title`, `name`) VALUES
(10, 'Mr'),
(11, 'Dr'),
(12, 'Mrs'),
(13, 'Miss');

--
-- Constraints for dumped tables
--

--
-- Constraints for table `leave`
--
ALTER TABLE `leave`
  ADD CONSTRAINT `fk_table1_leave_type1` FOREIGN KEY (`leave_type_id_leave_type`) REFERENCES `leave_type` (`id_leave_type`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_table1_staff_leave_application1` FOREIGN KEY (`staff_leave_application_id_staff_leave_application`, `staff_leave_application_staff_id_staff`) REFERENCES `staff_leave_application` (`id_staff_leave_application`, `staff_id_staff`) ON DELETE CASCADE ON UPDATE NO ACTION;

--
-- Constraints for table `leave_allowed`
--
ALTER TABLE `leave_allowed`
  ADD CONSTRAINT `fk_leave_allowed_leave_type1` FOREIGN KEY (`leave_type_id_leave_type`) REFERENCES `leave_type` (`id_leave_type`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_leave_allowed_staff1` FOREIGN KEY (`staff_id_staff`) REFERENCES `staff` (`id_staff`) ON DELETE CASCADE ON UPDATE NO ACTION;

--
-- Constraints for table `leave_balance`
--
ALTER TABLE `leave_balance`
  ADD CONSTRAINT `fk_leave_balance_leave_type1` FOREIGN KEY (`leave_type_id_leave_type`) REFERENCES `leave_type` (`id_leave_type`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_leave_balance_staff1` FOREIGN KEY (`staff_id_staff`) REFERENCES `staff` (`id_staff`) ON UPDATE NO ACTION;

--
-- Constraints for table `nonpay_leave`
--
ALTER TABLE `nonpay_leave`
  ADD CONSTRAINT `fk_nonpay_leave_staff_leave_application1` FOREIGN KEY (`staff_leave_application_id_staff_leave_application`, `staff_leave_application_staff_id_staff`) REFERENCES `staff_leave_application` (`id_staff_leave_application`, `staff_id_staff`) ON DELETE CASCADE ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_nonpay_leave_leave_type1` FOREIGN KEY (`leave_type_id_leave_type`) REFERENCES `leave_type` (`id_leave_type`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Constraints for table `staff`
--
ALTER TABLE `staff`
  ADD CONSTRAINT `fk_staff_designation1` FOREIGN KEY (`designation_id_designation`) REFERENCES `designation` (`id_designation`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_staff_status1` FOREIGN KEY (`status_id_status`) REFERENCES `status` (`id_status`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_staff_title` FOREIGN KEY (`title_id_title`) REFERENCES `title` (`id_title`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Constraints for table `staff_leave_application`
--
ALTER TABLE `staff_leave_application`
  ADD CONSTRAINT `fk_staff_leave_leave_type1` FOREIGN KEY (`leave_type_id_leave_type`) REFERENCES `leave_type` (`id_leave_type`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_staff_leave_staff1` FOREIGN KEY (`staff_id_staff`) REFERENCES `staff` (`id_staff`) ON DELETE CASCADE ON UPDATE NO ACTION; 
```

**更新触发器**

```
BEGIN
    set @loopcounter := 0;
    set @counter:= -1;
    set @balance:= (SELECT new_balance FROM leave_balance_view WHERE staff_id_staff = new.staff_id_staff and leave_type_id_leave_type = new.leave_type_id_leave_type);
   -- set @newrows:= (select count(*) from tn_air_staff_leave_application);

    WHILE ((@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) && (@loopcounter < @balance)) DO 
                    INSERT INTO `leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
                    VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
        set @loopcounter := @loopcounter + 1;
                END WHILE; 

    set @counter:=+(@balance - 1);
    set @loopcounter:=0;
    WHILE ((@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) && (@loopcounter < 2)) DO 
        INSERT INTO `nonpay_leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
        VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
        end while;
END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:26:12.770

```
set @loopcounter := 0;
set @counter:= -1;

WHILE ((@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) && (@loopcounter <5)) DO 
            INSERT INTO `leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
            VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
set @loopcounter := @loopcounter + 1;
        END WHILE; 

set @counter:=+4 (basically adjusting for the previous 5 that u marked in)
set @loopcounter:=0;
WHILE ((@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) && (@loopcounter <2)) DO 
insert into NO_PAY_LEAVE 
```

*   ***这个想法是一个新的 loop_counter，它会在它跳出第一个循环之前达到 5。
*   ***一个新的第二个循环计数器，它在 2 或更多处中断（不确定要求是什么，也许你在第二个循环中不需要它）
*   ***你的原始计数器在第二个循环中调整为 +4（不确定是哪一个，有点困惑，但我认为它应该是 +4 或者它应该是 -6）

好的，我已经编辑并认为这就是新的逻辑 shud b .. 许多计数器已经改变

* * *

好吧，我明白你了，现在你必须按照你说的去做......在你进入任何循环之前......我想你应该在开始时设置一个名为 leave_counter 的新计数器，这将决定离开循环将执行多少次。

```
BEGIN

        set @loopcounter := 0;
        set @counter:= -1;
        set @balance:= (SELECT new_balance FROM leave_balance_view WHERE staff_id_staff = new.staff_id_staff and leave_type_id_leave_type = new.leave_type_id_leave_type);
    set @leavecounter:=+(@balance - 1);

       -- set @newrows:= (select count(*) from tn_air_staff_leave_application);

        WHILE ((@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) && (@loopcounter < @balance) && (@balance>0)) DO 
                        INSERT INTO `leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
                        VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY), 1, CURDATE()); 
            set @loopcounter := @loopcounter + 1;
        set @balance := @balance - 1;
                    END WHILE; 

        WHILE ((@leavecounter < DATEDIFF(DATE(new.end_date), DATE(new.start_date)))) DO 
            INSERT INTO `nonpay_leave`(staff_leave_application_id_staff_leave_application, staff_leave_application_staff_id_staff, leave_type_id_leave_type, date, active, date_updated) 
            VALUES (new.id_staff_leave_application, new.staff_id_staff, new.leave_type_id_leave_type, DATE_ADD(new.start_date, INTERVAL @leavecounter:=@leavecounter + 1 DAY), 1, CURDATE()); 
            end while;
    END$$ 
```

BOTTOMLINE:::::: 我已经编辑了你的 sql 命令，引入了一个名为 leave_counter 的新计数器，它将确定你的 leave_loop shud 运行多少次.. 同样在第一个循环中，我确保它执行的次数不超过 @balance通过在第一个循环中引入@balance 次.. 你可以看到编辑后的回复.. 循环 1：执行最大（@balance）次...循环 2：执行（休假天数）-（@balance）次...

# wpf - 删除 WPF DataGrid Header 列的边框

> ID：14452580
> 
> 赞同：2
> 
> 时间：2013-01-22T06:10:13.550
> 
> 标签：wpf, wpfdatagrid, datagridheaderborder

我的要求是我的 WPF DataGrid 行应该有边框，但 datagrid 标题列不应该有任何边框。

如果我将 DataGrid 放在 Border 元素中，则整个网格（包括标题列）都会获得边框。

我已经设置了 GridLinesVisibility="Horizo​​ntal"。

有没有办法只为网格行设置边框？

谢谢！

**编辑**

这是我正在使用的 xaml 代码..

```
<Style x:Key="DataGridColumnHeaderHiddenStyle" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="Height" Value="15" />            
            <Setter Property="BorderBrush" Value="Transparent"/>            
        </Style>

<StackPanel>
            <ScrollViewer MaxHeight="175" VerticalScrollBarVisibility="Auto">
                <DataGrid  ItemsSource="{Binding SelectedItemsCollectionView}" 
                      CellStyle="{StaticResource CellStyle}" GridLinesVisibility="Horizontal"  HorizontalGridLinesBrush="{StaticResource GridBorderBrush}" ClipToBounds="True" AllowDrop="True" 
                              ScrollViewer.CanContentScroll="True" 
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"

                           x:Name="selectedItemsGrid">

                    <DataGrid.ItemContainerStyle>
                        <Style TargetType="{x:Type DataGridRow}">
                            <Setter Property="AllowDrop" Value="True" />
                        </Style>
                    </DataGrid.ItemContainerStyle>
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding Path=Name}">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextAlignment" Value="Center" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                    <DataGrid.Style>
                        <Style TargetType="DataGrid">
                            <Setter Property="HeadersVisibility" Value="Column" />
                            <Setter Property="ColumnHeaderStyle" Value="{StaticResource DataGridColumnHeaderHiddenStyle}" />
                        </Style>
                    </DataGrid.Style>
                </DataGrid>
            </ScrollViewer>
        </StackPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:18:11.167

`DataGridColumnHeader`您可以为和 设置样式设置`SeparatorBrush`为透明。这似乎也删除了列分隔符：

```
<Style TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="SeparatorBrush" Value="Transparent" />
</Style> 
```

# iphone - 在 iPhone 中调用 WSDL soap 方法

> ID：14452581
> 
> 赞同：0
> 
> 时间：2013-01-22T06:10:27.077
> 
> 标签：iphone

我正在开发一个 iPhone 项目，其中我有一个 wsdl，其中包含方法描述，并且这些方法包含一个 xml。我需要调用 wsdl 中的这些方法来使用soap获取xml并解析它。我已经阅读了很多链接和教程，但无法在 wsdl 中调用该方法。请如果你可以给我一些链接或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:12:46.353

您可以使用[http://sudzc.com/](http://sudzc.com/)，它为您提供现成的 WSDL

这是一个 .NET 网站解决方案，它使用 XSLT 将基于 SOAP 的 Web 服务定义 WSDL 文件转换为完整的代码包。生成的代码易于阅读和更新。

虽然 SudzC 支持多个平台，但它的重点是为 iPhone 开发的 Objective-C 库生成代码。

参考[http://code.google.com/p/sudzc/](http://code.google.com/p/sudzc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:42:29.050

请尝试此代码。它对我有用。

[注意：GetDictionary 是我在 Web 服务中显示的方法名称。在 url 中，请在下面的部分写下 Web 服务中显示的 url。它应该与您在编码中编写的 url 匹配，否则您将无法获得输出（最好从 Web 服务中复制它）]

```
-(IBAction)loadData
{

NSString *soapMessage = [NSString stringWithFormat:
                         @"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<SOAP-ENV:Body>\n"
                         "<GetDictionary></GetDictionary>\n"
                         "</SOAP-ENV:Body>\n"
                         "</SOAP-ENV:Envelope>"];

NSURL *url = [NSURL URLWithString:@"http://c70.narolainfotech.local/WCFTest/RestServiceImpl.svc/basic"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"urn:RestServiceImpl/GetDictionary" forHTTPHeaderField:@"soapAction"];
// [theRequest addValue: @"urn:RestServiceImpl/getDataBY_ID" forHTTPHeaderField:@"soapAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

   if(theConnection)
   {
      webData = [[NSMutableData data] retain];
   }
   else
   {
      NSLog(@"theConnection is NULL");
    }
} 
```

在 connectionDidFinishLoading 中编写以下代码：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSLog(@"DONE. Received Bytes: %d", [webData length]);

NSString *strData = [[NSString alloc]initWithData:webData encoding:NSUTF8StringEncoding];
NSLog(@"result : %@",strData);

NSString *result=nil;
NSString *str;

NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
theXML = [theXML stringByReplacingOccurrencesOfString:@"&lt;" withString:@"<"];
theXML = [theXML stringByReplacingOccurrencesOfString:@"&gt;" withString:@">"];
theXML = [theXML stringByReplacingOccurrencesOfString:@"&amp;" withString:@"&"];
//NSLog(@"XML from Web-Service ======= \n\n %@",theXML);

NSArray *array=[theXML componentsSeparatedByString:@"<GetDictionaryResult>"];
for(int i=1;i<[array count];i++)
{
    str=[array objectAtIndex:i];

    NSRange ranfrom=[str rangeOfString:@"</GetDictionaryResult>"];
    result =[str substringToIndex:ranfrom.location];
}
NSLog(@"result ::: %@",result);
} 
```

只是希望它会为你工作。:)

# oracle11g - 计算 Oracle Apex 表格单元格的总和

> ID：14452588
> 
> 赞同：0
> 
> 时间：2013-01-22T06:11:04.220
> 
> 标签：oracle11g, oracle-apex, tabular-form

`Amount`在我的 oracle 顶点表格形式中有一个列。`SUM`在输入数据并显示在`Display only`表格下方的字段上时，我需要计算此列下的所有字段。

我认为这可以使用`JavaScript`并调用`JavaScript`at `onchange`of `Amount`column 来完成。

但我不知道如何计算我的 oracle 顶点表格形式`SUM`的`Amount`列。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:33:39.503

将以下`JavaScript`代码添加到 Page`HTML Header`属性中：

```
<script type="text/javascript">
function tot_cal()
{
var f5=new Array();
var tol=0;
f5=document.getElementsByName("f05"); /*f05 is Apex array which holds the data*/

 for(i=0;i<f5.length;i++){
  tol = (tol*1) + (f5[i].value.replace(/,/g, '') * 1);
 }
/* alert(tol); */
$s('P10_AMOUNT_VALUE', tol.formatMoney(2,',','.'));
}
Number.prototype.formatMoney = function(decPlaces, thouSeparator, decSeparator) {
    var n = this,
    decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces,
    decSeparator = decSeparator == undefined ? "." : decSeparator,
    thouSeparator = thouSeparator == undefined ? "," : thouSeparator,
    sign = n < 0 ? "-" : "",
    i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + "",
    j = (j = i.length) > 3 ? j % 3 : 0;
    return sign + (j ? i.substr(0, j) + thouSeparator : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : "");
};
</script> 
```

列的表格表单元素/元素属性属性`Amount`：

```
onchange="tot_cal();" 
```

# entity-framework - 在使用 FirstOrDefault() 之前是否需要将查询结果转换为 .ToList()？

> ID：14452591
> 
> 赞同：0
> 
> 时间：2013-01-22T06:11:35.543
> 
> 标签：entity-framework, linq

我正面临与交易相关的问题，例如

> *事务操作无法执行，因为有待处理的请求*

或者

> *不允许新事务，因为会话中还有其他线程在运行。*

当我在互联网上调查这个错误时，我可以看到许多博客指向使用`ToList()`for 循环等。

我的问题是我`FirstOrDefault()`在我的项目中使用的太频繁了，我们应该总是`.ToList()`在做之前使用`FirstOrDefault()`，还是没有任何区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:17:18.777

`.ToList()`方法将查询结果存储在内存中，因此您不再需要与数据库进行主动连接。如果您有大内存可用，那么您可以选择`.ToList()`

对于嵌套数据库调用，您必须面临这个问题，即在循环中

# css - 验证失败时如何更改输入字段和标签的 css 类？

> ID：14452594
> 
> 赞同：1
> 
> 时间：2013-01-22T06:11:55.637
> 
> 标签：css, validation, jsf, facelets, highlight

假设我有一个要验证的用户名，在这种情况下，当验证失败以及错误消息时，我需要以红色显示用户名 outputText 和用户名 inputText 字段。

我试图将所有这些绑定在一个面板组中，以便如果验证失败，所有字段都会受到影响。但简单地放置 panelgroup 是行不通的。

我的支持 bean 验证器

```
public void emailValidate(FacesContext context,
        UIComponent componentToValidate,
        Object value)
        throws ValidatorException {

    String email = value.toString();

    if (!Validator.isEmailAddress(email))
    {
        FacesMessage message =
                new FacesMessage(FacesMessage.SEVERITY_ERROR,"Email","Please enter valid email address");
                throw new ValidatorException(message);
    }

} 
```

我的 jsf

```
<h:panelGroup>
<h:outputText value="Email"/>
<h:message for="emailInput/>
<h:inputText id="emailInput" value="#{mybean.email}" validator="#{mybean.emailValidate}"/>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T11:50:50.273

`binding`通过属性将输入组件绑定到视图。它将作为[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)EL 中的组件引用可用，以便您可以[`UIInput#isValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#isValid%28%29)在`styleClass`属性中使用。

```
<h:outputLabel for="emailInput" value="Email" 
    styleClass="#{emailInput.valid ? '' : 'error'}" />

<h:inputText id="emailInput" binding="#{emailInput}" ... 
    styleClass="#{emailInput.valid ? '' : 'error'}" /> 
```

*（请注意，我将您的标签固定为**真正的**标签；另请注意，您根本不需要按照 cubbuk 的回答所建议的创建一些 bean 属性）*

是的，这可能会在视图中产生相当多的非[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)样板代码。[您可以使用阶段侦听](http://balusc.blogspot.com/2007/12/set-focus-in-jsf.html)器或系统事件侦听器将其抽象出来。您还可以使用透明地完成所有工作的[OmniFaces](http://omnifaces.org) [`<o:highlight>`](http://showcase.omnifaces.org/components/highlight)组件。另请参阅[现场演示](http://showcase.omnifaces.org/components/highlight)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:16:09.963

您需要一个字段来表示支持 bean 中的验证失败。根据该验证字段的条件，您可以更改 uiComponents 的 css，如下所示。

```
public void emailValidate(FacesContext context,
                UIComponent componentToValidate,
                Object value)
                throws ValidatorException
    {
       String email = value.toString();
       if (!Validator.isEmailAddress(email))
            {
                FacesMessage message =
                        new FacesMessage(FacesMessage.SEVERITY_ERROR, "Email", "Please enter valid email address");
                validationFailed = true;
                throw new ValidatorException(message);
            }
    }

public Boolean getValidationFailed()
{
    return validationFailed;
}

<style>
   .errorClass
   {
       background-color: red;
   }
   </style>
   <h:panelGroup>
      <h:outputText value="Email" styleClass="#{ozetPageBean.validationFailed ? 'errorClass' : ''}"/>
      <h:message for="emailInput"/>
      <h:inputText id="emailInput" 
                   value="#{ozetPageBean.email}" 
                   validator="#{ozetPageBean.emailValidate}"
                   styleClass="#{ozetPageBean.validationFailed ? 'errorClass' : ''}"/>
   </h:panelGroup> 
```

# java - 如何在 Jooq 中初始化和创建 ResultSet 和 Record？

> ID：14452596
> 
> 赞同：1
> 
> 时间：2013-01-22T06:11:57.400
> 
> 标签：java, unit-testing, mocking, jooq

我需要编写一些单元测试，我必须用一些虚拟数据模拟结果集和记录。我不知道如何初始化和实例化它们。请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T21:45:54.317

jOOQ 有一些内置的 mock 功能，请参阅手册的[JDBC mocking for unit testing](http://www.jooq.org/doc/3.2/manual-single-page/#jdbc-mocking)一章，它可能是您正在寻找的。

但是，要简单地创建一个 jOOQ 的`Result`or `Record`，您可以使用`DSLContext`：

```
// Create the record using the jOOQ generated classes and set a property
MyTableRecord record1 = DSL.using(configuration).newRecord(MY_TABLE);
record1.setValue(MY_TABLE.MY_PROPERTY, "value");

// or simply...
MyTableRecord record2 = new MyTableRecord();
record2.setMyProperty("value");

// Then you can populate the Result
Result<MyTableRecord> result = DSL.using(configuration).newResult(MY_TABLE);
result.add(record1);
result.add(record2); 
```

您还提到`ResultSet`，如果您指的是 JDBC `ResultSet`，那么模拟它可能会更复杂一些。相反，我建议[DbUnit](http://dbunit.sourceforge.net)，它不是 JDBC 类的模拟，但您将帮助您设置数据库以进行测试，这可能会帮助您获得与模拟 JBDC 类相同的效果。

# asp.net-mvc-4 - 可以在不构建字符串的情况下使用 ClientRowTemplate() Kendo UI Grid？

> ID：14452597
> 
> 赞同：3
> 
> 时间：2013-01-22T06:11:58.820
> 
> 标签：asp.net-mvc-4, kendo-ui

在 Kendo UI Grid 中使用 ClientRowTemplate的[示例使用了一个讨厌的 HTML 字符串](http://demos.kendoui.com/web/grid/rowtemplate.html)

```
.ClientRowTemplate(
    "<tr><td colspan=\"6\">" +
        "<div class=\"customer-details\">" +
            "<img src=\"" + @Url.Content("~/Content/web/Customers/") + "#=CustomerID#.jpg\"" +
                "alt=\"#=ContactName#\" />" +
            "<h3 class=\"k-widget\">#=ContactName#</h3>" + 
            "<dl>" +
               "<dt>Name:</dt><dd>#=ContactName#</dd>" +
               "<dt>Company:</dt><dd>#=CompanyName#</dd>" + 
               "<dt>Country:</dt><dd>#=Country#</dd>" +
            "</dl>" +
            "<dl >" +
                "<dt>Address:</dt><dd>#=Address#</dd>" +
                "<dt>Phone:</dt><dd>#=Phone#</dd>" +
            "</dl>" +
        "</div>" +
    "</td></tr>"        
) 
```

我目前正在使用部分视图`.ClientRowTemplate(Html.Partial("_ClientRowTemplate").ToHtmlString())`，但最好将它放在同一个视图文件中。

有没有一种内置的方式来使用像`<script id="rowTemplate" type="text/x-kendo-tmpl">`块这样更好的东西？我仍然想使用 Kendo MVC 助手而不是 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-12T13:59:55.567

查看 Haacks 关于模板化 razor 代表的博客。 [http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx/](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx/)

基本上，您可以定义一大块将呈现为 HTML 的剃刀

定义你的剃刀代表

```
@{
Func<dynamic, object> tableRow = @<tr></tr>;
} 
```

然后这样做

```
.ClientRowTemplate( @tableRow(null).ToString() ) 
```

# nuget - 'Given' 方法没有重载需要 4 个参数 - specflow

> ID：14452598
> 
> 赞同：3
> 
> 时间：2013-01-22T06:12:00.350
> 
> 标签：nuget, specflow

我已经安装了specflow。默认情况下，我得到这个场景来添加两个数字。当我构建解决方案时，我得到了这些错误。“方法 'Given' 没有重载需要 4 个参数”。我在这里想念什么？这是生成的文件。

```
public virtual void AddTwoNumbers()
        {
            TechTalk.SpecFlow.ScenarioInfo scenarioInfo = new TechTalk.SpecFlow.ScenarioInfo("Add two numbers", new string[] {
                        "mytag"});
            #line 7
            this.ScenarioSetup(scenarioInfo);
            #line 8
             testRunner.Given("I have entered 50 into the calculator", ((string)(null)), ((TechTalk.SpecFlow.Table)(null)), "Given ");
            #line 9
             testRunner.And("I have entered 70 into the calculator", ((string)(null)), ((TechTalk.SpecFlow.Table)(null)), "And ");
            #line 10
             testRunner.When("I press add", ((string)(null)), ((TechTalk.SpecFlow.Table)(null)), "When ");
            #line 11
             testRunner.Then("the result should be 120 on the screen", ((string)(null)), ((TechTalk.SpecFlow.Table)(null)), "Then ");
            #line hidden

            this.ScenarioCleanup();
        } 
```

对于这种情况：

Feature：SpecFlowFeature1 为了避免愚蠢的错误作为一个数学白痴，我想被告知两个数字的总和

@mytag 场景：添加两个数字给定我在计算器中输入了 50 我在计算器中输入了 70 当我按添加时，结果应该是屏幕上的 120

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T04:37:56.803

这是 techtalk.specflow.dll 版本的问题。我有 1.8.1 版本，我用 1.9.0 替换，一切正常！谢谢你的建议

# web-services - 将图像 URL 作为参数传递给 SSRS Web 服务

> ID：14452599
> 
> 赞同：1
> 
> 时间：2013-01-22T06:12:06.323
> 
> 标签：web-services, url, ssl, reporting-services

在 SSL 的上下文中，我必须如何将图像 URL 作为参数传递给 SSRS？

我正在使用 SSRS Web 服务来生成和保存报告，并将报告中使用的图形的图像 URL 作为参数发送。在正常的非 SSL 下，这 100% 有效，但在 SSL 下，我得到一个超时 Soap-Exception。

到目前为止，我已经尝试过：

*   非安全 URL：导致超时。
*   安全 URL：生成没有图像的报告
*   非安全 IP URL：导致超时
*   安全 IP URL：生成没有图像的报告
*   文件系统路径：生成没有图像的报告

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:53:50.330

我找到了我的问题的答案。在服务器上为图像创建 URL 的地方，我使用普通 HTTP 协议，但使用安全端口。所以我删除了端口，它似乎在 SSL 中 100% 工作。

# hibernate - org.hibernate.AssertionFailure: 未启用 getGeneratedKeys() 支持（使用 Oracle11g）

> ID：14452602
> 
> 赞同：3
> 
> 时间：2013-01-22T06:12:29.817
> 
> 标签：hibernate

我在桌子上做了一个“简单”，它给出了这个错误。搜索网络没有帮助。

我认为它使用序列作为我的主键的源连接到我。

你能帮忙吗？谢谢

**我正在尝试运行的代码（我突出显示了引发错误的部分）**

```
 EventInstance eventInstance = (EventInstance) sessionFactory.getCurrentSession().get(EventInstance.class, userEventRegistration.getEventInstance().getInstanceId());
    Student student = (Student) sessionFactory.getCurrentSession().get(Student.class, userEventRegistration.getStudent().getStudentId());
    EventRegistration eventRegistration = new EventRegistration();

    if (student == null) {
        student = new Student();
        student.setStudentId(userEventRegistration.getStudent().getStudentId());
    }

    student.setFamilyName(userEventRegistration.getStudent().getFamilyName());
    student.setGivenName(userEventRegistration.getStudent().getGivenName());
    student.setGender(userEventRegistration.getStudent().getGender());
    student.setEmail(userEventRegistration.getStudent().getEmail());
    student.setHomeCountry(userEventRegistration.getStudent().getHomeCountry());
    student.setCourse(userEventRegistration.getStudent().getCourse());
    student.setAccomodationName(userEventRegistration.getStudent().getAccomodationName());
    student.setAddress(userEventRegistration.getStudent().getAddress());
    student.setAddressCity(userEventRegistration.getStudent().getAddressCity());
    student.setContactPhone(userEventRegistration.getStudent().getContactPhone());
    student.setContactDetailsStatus(userEventRegistration.getStudent().getContactDetailsStatus());
    student.setContactDetailsDate(userEventRegistration.getStudent().getContactDetailsDate());
    student.setScholarships(userEventRegistration.getStudent().getScholarships());
    student.setDietaryRestrictions(userEventRegistration.getStudent().getDietaryRestrictions());
    student.setStudentComments(userEventRegistration.getStudent().getStudentComments());
    student.setInternalComments(userEventRegistration.getStudent().getInternalComments());

    eventRegistration.setEventInstance(eventInstance);
    eventRegistration.setStudent(student);
    eventRegistration.setAttended(userEventRegistration.getAttended());
    eventRegistration.setSubmitDateTime(new Date());
    eventRegistration.setAdditionalInfo(userEventRegistration.getAdditionalInfo());
    eventRegistration.setNumberAttending(userEventRegistration.getNumberAttending());
    eventRegistration.setArchiveDate(userEventRegistration.getArchiveDate());

    **sessionFactory.getCurrentSession().save(eventRegistration);**

    sessionFactory.getCurrentSession().getTransaction().commit(); 
```

**休眠映射**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="com.myapps.issu.models.database.Event" table="events">
        <id name="eventId" column="event_id" type="integer" />

        <property name="eventName" column="event_name" type="string" />
        <property name="eventType" column="event_type" type="string" />
        <property name="descriptionBrief" column="description_brief" type="string" />
        <property name="descriptionFull" column="description_full" type="string" />
        <property name="location" column="location" type="string" />
        <property name="cost" column="cost" type="string" />
        <property name="compulsory" column="compulsory" type="string" />
        <property name="comments" column="comments" type="string" />
        <property name="maxAttendance" column="max_attendance" type="integer" />
        <property name="askDietaryRestrictions" column="ask_dietary_restrictions" type="integer" />
        <property name="limitPerStudent" column="limit_per_student" type="string" />

        <list name="eventInstance" table="event_instances" inverse="false" cascade="all">
            <key column="event_id"  />
            <list-index column="idx" />
            <one-to-many class="com.myapps.issu.models.database.EventInstance" />
        </list>
    </class>

    <class name="com.myapps.issu.models.database.Student" table="students">
        <id name="studentId" column="student_id" type="string" />

        <property name="familyName" column="family_name" type="string" />
        <property name="givenName" column="given_name" type="string" />
        <property name="fan" column="fan" type="string" />
        <property name="gender" column="gender" type="string" />
        <property name="email" column="email" type="string" />
        <property name="homeCountry" column="home_country" type="string" />
        <property name="course" column="course" type="string" />
        <property name="accomodationName" column="accomodation_name" type="string" />
        <property name="address" column="address" type="string" />
        <property name="addressCity" column="address_city" type="string" />
        <property name="contactPhone" column="contact_phone" type="string" />
        <property name="contactDetailsStatus" column="contact_details_status" type="string" />
        <property name="contactDetailsDate" column="contact_details_date" type="date" />
        <property name="scholarships" column="scholarships" type="string" />
        <property name="dietaryRestrictions" column="dietary_restrictions" type="string" />
        <property name="studentComments" column="student_comments" type="string" />
        <property name="internalComments" column="internal_comments" type="string" />

        <list name="eventRegistration" table="event_registrations" inverse="false" cascade="all">
            <key column="registration_id"  />
            <list-index column="idx" />
            <one-to-many class="com.myapps.issu.models.database.EventRegistration" />
        </list>
    </class>

    <class name="com.myapps.issu.models.database.EventInstance" table="event_instances">
        <id name="instanceId" column="instance_id" type="integer" />

        <many-to-one name="event" class="com.myapps.issu.models.database.Event" column="event_id" fetch="select" not-null="true" />

        <property name="startDateTime" column="start_date_time" type="date" />
        <property name="finishDateTime" column="finish_date_time" type="date" />
        <property name="locationIfDifferent" column="location_if_different" type="string" />
        <property name="registerCutoffDate" column="register_cutoff_date" type="date" />
        <property name="maxAttendance" column="max_attendance" type="integer" />
        <property name="askDietaryRestrictions" column="ask_dietary_restrictions" type="string" />
        <property name="limitPerStudent" column="limit_per_student" type="integer" />
        <property name="archiveDate" column="archive_date" type="date" />
        <property name="rollcallProcessed" column="rollcall_processed" type="string" />
        <property name="linkedInstance" column="linked_instance" type="integer" />

        <list name="eventRegistration" table="event_registrations" inverse="false" cascade="all">
            <key column="instance_id"  />
            <list-index column="idx" />
            <one-to-many class="com.myapps.issu.models.database.EventInstance" />
        </list>
    </class>

    <class name="com.myapps.issu.models.database.EventRegistration" table="event_registrations">
        <id name="registrationId" column="registration_id" type="integer">
            <generator class="sequence-identity" >
                <param name="sequence">REGISTRATIONS_SEQ</param>
            </generator>
        </id>

        <many-to-one name="eventInstance" class="com.myapps.issu.models.database.EventInstance" column="instance_id" not-null="true" />
        <many-to-one name="student" class="com.myapps.issu.models.database.Student" column="student_id" not-null="true" />

        <property name="attended" column="attended" type="string" />
        <property name="submitDateTime" column="submit_date_time" type="date" />
        <property name="additionalInfo" column="additional_info" type="string" />
        <property name="numberAttending" column="number_attending" type="integer" />
        <property name="archiveDate" column="archive_date" type="date" />
    </class>

    <class name="com.myapps.issu.models.database.Lov" table="Lov">
        <id name="lovId" column="lov_id" type="integer" />

        <property name="kind" column="kind" type="string" />
        <property name="code" column="code" type="string" />
        <property name="description" column="description" type="string" />
    </class>
</hibernate-mapping> 
```

**错误信息**

```
org.hibernate.AssertionFailure: getGeneratedKeys() support is not enabled
    org.hibernate.engine.jdbc.internal.StatementPreparerImpl.checkAutoGeneratedKeysSupportEnabled(StatementPreparerImpl.java:93)
    org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:112)
    org.hibernate.id.SequenceIdentityGenerator$Delegate.prepare(SequenceIdentityGenerator.java:106)
    org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:55)
    org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2936)
    org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3447)
    org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
    org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
    au.edu.flinders.issu.dao.IssuDaoImpl.saveEventRegistration(IssuDaoImpl.java:64)
    au.edu.flinders.issu.services.IssuServiceImpl.saveEventRegistration(IssuServiceImpl.java:24)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy13.saveEventRegistration(Unknown Source)
    au.edu.flinders.issu.controllers.IssuController.saveEventRegistration(IssuController.java:41)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-19T14:59:22.730

我陷入了同样的问题。终于找到了出路。将此行放在您的 hibernate.cfg.xml 文件中。

```
<property name="hibernate.jdbc.use_get_generated_keys">true</property> 
```

并且可以在以下位置找到参考和解释：

[http://www.jarvana.com/jarvana/view/hibernate/hibernate/3.0.2/hibernate-3.0.2-sources.jar!/org/hibernate/jdbc/AbstractBatcher.java?format=ok](http://www.jarvana.com/jarvana/view/hibernate/hibernate/3.0.2/hibernate-3.0.2-sources.jar!/org/hibernate/jdbc/AbstractBatcher.java?format=ok)

# c# - Linq 嵌套选择查询和结果与所选项目具有相同的结构

> ID：14452607
> 
> 赞同：0
> 
> 时间：2013-01-22T06:12:51.983
> 
> 标签：c#, linq, entity-framework

我坚持用 Select 或 SelectMany 编写嵌套查询。

让我们以传统的嵌套列表为例：

```
Sheet has Title fields
SheetDetail has Employee fields 
```

每个 Sheet 都有多个 SheetDetails 作为主从方式。

我想让结果如下。

从下面的数据...

```
Sheet   - SheetDetail
"A Sheet"-{"jane","herry","tom"}
"B Sheet"-{"kane","brown","jane"}
"C Sheet"-{"annie","ralph"} 
```

结果如下，只有'jane'但**保持相同的主从结构。**

```
Sheet   - SheetDetail
"A Sheet"-{"jane"}
"B Sheet"-{"jane"} 
```

我试过

```
sheet.SelectMany(s => s.SheetDetails.Where(d => d.Description.Contains("jane"))); 
```

但正如我们可以想象的那样，它给出了错误的结果。

我怎样才能做到？请帮忙-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:17:53.643

你可以`Any`用来检查：

```
Sheet.Where(s => s.SheetDetails.Any(d => d.Description == "jane")))
    .Select(s => new Sheet {
            Description = s.Description,
            SheetDetails = s.SheetDetails.Where(d => d.Description == "jane")
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:21:15.027

如果您希望结果中只有一个 SheetDetail，您可以创建匿名对象，例如：

```
sheet
  .Where(s => s.SheetDetails.Any(d => d == "jane"))
  .Select(s => new {Sheet = s, SheetDetail == s.SheetDetails.First(d => d == "jane")}); 
```

# nuget - 如何从 nuget 包中排除文件夹

> ID：14452608
> 
> 赞同：22
> 
> 时间：2013-01-22T06:12:56.167
> 
> 标签：nuget, nuget-package, octopus-deploy

我正在使用 Octopack / Nuspec 文件来构建我的 nuget 包。

我想排除项目中存在的某些文件夹。例如“obj”文件。我一直试图让排除标签工作，但没有任何运气。nuget 文件生成，但文件夹仍然存在。

可悲的是，网络特定文件类型而不是文件夹的所有示例。

```
<?xml version="1.0"?>
<package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd">
  <metadata>
    <id>Foo</id>
    <title>Foo</title>
    <version>$version$</version>
    <authors>NA</authors>
    <owners>NA</owners>
    <licenseUrl>http://Foo</licenseUrl>
    <projectUrl>http://Foo</projectUrl>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>Foo</description>
    <releaseNotes>NA</releaseNotes>
  </metadata>
  <files>
    <file src="obj\**\*.*" exclude="*.*" />
  </files>
</package> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-23T00:21:03.963

我需要创建一个 WebApplication，但使用“CodeFile”属性将其部署为标准 ASP.NET 网站。

这基本上是为了更新标准 ADFS 登录站点中的页面。

```
<files>
  <file src="**" exclude="**\*.dll;**\*.designer.cs;**\*.csproj;**\*.pdb;**\*.user;**\*.vspscc;bin\*.cs;bin\*.aspx;bin\*.config;bin\*.asax;bin\*.pubxml" />
</files> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-05-24T15:28:11.923

要直接回答海报问题，如果您只想从 Nuget 包中排除**obj**文件夹，请在您的 nuspec xml 中使用以下内容

```
<files>
    <file src="*\**" target="\" exclude="obj\**\*.*"/>
</files> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T20:50:09.913

根据您正在构建的项目，您不需要排除任何内容。

如果您正在构建 Windows 服务/控制台应用程序，OctoPack 应该只打包您的`bin\release`目录。

如果您正在构建一个 Web 应用程序，您应该使用“发布”命令让 MSBuild 将二进制文件和内容文件发送到一个临时文件夹，然后 OctoPack 将打包它。这样您的`obj`文件夹和 C# 文件就不会被打包。

有关如何执行此操作的信息，请参阅 Web 应用程序发布部分：

[http://octopusdeploy.com/documentation/packaging/octopack](http://octopusdeploy.com/documentation/packaging/octopack)

# java - nextLine() 的问题；

> ID：14452613
> 
> 赞同：11
> 
> 时间：2013-01-22T06:13:35.783
> 
> 标签：java, java.util.scanner

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

我正在尝试创建一个程序，它允许用户使用扫描仪将值输入到数组中。

然而，当程序询问学生的近亲时，它不允许用户输入任何内容并立即结束程序。

以下是我所做的代码：

```
if(index!=-1)
    {
        Function.print("Enter full name: ");
        stdName = input.nextLine();

        Function.print("Enter student no.: ");
        stdNo = input.nextLine();

        Function.print("Enter age: ");
        stdAge = input.nextInt();

        Function.print("Enter next of kin: ");
        stdKin = input.nextLine();

        Student newStd = new Student(stdName, stdNo, stdAge, stdKin);
        stdDetails[index] = newStd;
    } 
```

我试过使用 next(); 但它只会占用用户输入的第一个单词，这不是我想要的。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T06:16:28.063

当您按下回车键时会出现问题，这是一个换行符`\n`。`nextInt()`仅消耗整数，但会跳过换行符`\n`。要解决这个问题，您可能需要`input.nextLine()`在阅读 后添加一个额外的`int`，它可以消耗`\n`.

```
Function.print("Enter age: ");
stdAge = input.nextInt();
input.nextLine();.

// rest of the code 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T06:27:36.637

问题在于`input.nextInt()`this 函数只读取 int 值。因此，当您继续阅读时，`input.nextLine()`您会收到**“\n”** `Enter`键。所以要跳过这个，你必须添加`input.nextLine()`.

```
Function.print("Enter age: ");
stdAge = input.nextInt();
input.nextLine();
Function.print("Enter next of kin: ");
stdKin = input.nextLine(); 
```

为什么`next()`不工作..？
next() 返回下一个 token ， nextLine() 返回 NextLine。如果我们知道差异就好了。标记是由空格包围的一串非空白字符。

来自[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。此方法可能会在等待输入扫描时阻塞，即使先前调用 hasNext() 返回 true。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T06:17:06.433

拨打`input.nextLine();`电话，`input.nextInt();`然后读取到行尾。

例子：

```
Function.print("Enter age: ");
stdAge = input.nextInt();
input.nextLine();  //Call nextLine

Function.print("Enter next of kin: ");
stdKin = input.nextLine(); 
```

# cloudbees - 如何在 Cloudbee Buildhive 中更改 JDK 版本

> ID：14452614
> 
> 赞同：0
> 
> 时间：2013-01-22T06:13:40.833
> 
> 标签：cloudbees, buildhive

我正在尝试在 CloubBees BuildHive 中创建一个构建。我的 Maven 使用的是 1.7 JDK，当我尝试构建时，出现以下异常

```
 [INFO] -------------------------------------------------------------
 [ERROR] COMPILATION ERROR : 
 [INFO] -------------------------------------------------------------
 [ERROR] Failure executing javac, but could not parse the error:
 javac: invalid target release: 1.7
 Usage: javac <options> <source files>
 use -help for a list of possible options 
```

有人告诉我如何更改JDK版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:29:00.877

[我认为来自 CloudBees 的 Buildhive 的](https://stackoverflow.com/questions/13370158/does-buildhive-from-cloudbees-have-jdk-7)副本是否有 JDK 7 。将 JDK 7 设置为默认值在我们的待办事项列表中。

# c++ - (C++) 将指向动态分配数组的指针传递给函数

> ID：14452615
> 
> 赞同：1
> 
> 时间：2013-01-22T06:13:42.140
> 
> 标签：c++, pointers, dynamic, core, allocation

我遇到了变量在内存中相互覆盖的问题，所以我决定尝试动态分配我的一个数组。

在下面的简化代码中，我**尝试**使用动态分配创建一个整数数组，然后让一个函数编辑该整数数组中的值。一旦函数完成执行，我想要一个处理良好的数组以用于其他函数。

据我所知，数组不能传递给函数，所以我只是将指向数组的指针传递给函数。

```
#include <iostream>
using namespace std;

void func(int *[]);

int main(){

    //dynamically allocate an array
    int *anArray[100];
    anArray[100] = new int [100];

    func(anArray);

    int i;
    for (i=0; i < 99; i++)
        cout << "element " << i << " is: " << anArray[i] << endl;

delete [] anArray;
}

void func(int *array[]){
    //fill with 0-99
    int i;
    for (i=0; i < 99; i++){
        (*array)[i] = i;
        cout << "element " << i << " is: " << array[i] << endl;
}
} 
```

当我尝试编译上面的代码时，g++ 给了我以下警告：

```
dynamicArray.cc: In function ‘int main()’:
dynamicArray.cc:21:12: warning: deleting array ‘int* anArray [100]’ [enabled by default] 
```

无论如何，当我运行已编译的 a.out 可执行文件时，它什么也不输出，只留下消息

```
Segmentation fault (core dumped) 
```

在终端。

我究竟做错了什么？我的代码没有尝试访问或写入我创建的数组之外的任何内容。事实上，我什至没有尝试读取或写入数组的最后一个元素！

当我注释掉实际修改数组的部分时，会发生一些非常奇怪的事情，就像这样

```
//(*array)[i] = i; 
```

G++ 编译时出现相同的警告，但是当我执行 a.out 时，我得到了这个：

```
element 0 is: 0x600df0
element 1 is: 0x400a3d
element 2 is: 0x7f5b00000001
element 3 is: 0x10000ffff
element 4 is: 0x7fffa591e320
element 5 is: 0x400a52
element 6 is: 0x1
element 7 is: 0x400abd
element 8 is: 0x7fffa591e448
element 0 is: 0x600df0
element 1 is: 0x400a3d
element 2 is: 0x7f5b00000001
element 3 is: 0x10000ffff
element 4 is: 0x7fffa591e320
element 5 is: 0x400a52
element 6 is: 0x1
element 7 is: 0x400abd
element 8 is: 0x7fffa591e448
*** glibc detected *** ./a.out: munmap_chunk(): invalid pointer: 0x00007fffa591e2f0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7f5b92ff4b96]
./a.out[0x400976]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f5b92f9776d]
./a.out[0x400829]
======= Memory map: ========
00400000-00401000 r-xp 00000000 00:13 4070334                                /home/solderblob/Documents/2013 Spring Semester/CSC 1254s2 C++ II/Assignment 1/a.out
00600000-00601000 r--p 00000000 00:13 4070334                                /home/solderblob/Documents/2013 Spring Semester/CSC 1254s2 C++ II/Assignment 1/a.out
00601000-00602000 rw-p 00001000 00:13 4070334                                /home/solderblob/Documents/2013 Spring Semester/CSC 1254s2 C++ II/Assignment 1/a.out
01eb5000-01ed6000 rw-p 00000000 00:00 0                                  [heap]
7f5b92a64000-7f5b92a79000 r-xp 00000000 08:16 11276088                   /lib/x86_64-    linux-gnu/libgcc_s.so.1
7f5b92a79000-7f5b92c78000 ---p 00015000 08:16 11276088                   /lib/x86_64-    linux-gnu/libgcc_s.so.1
7f5b92c78000-7f5b92c79000 r--p 00014000 08:16 11276088                   /lib/x86_64-    linux-gnu/libgcc_s.so.1
7f5b92c79000-7f5b92c7a000 rw-p 00015000 08:16 11276088                   /lib/x86_64-linux-gnu/libgcc_s.so.1
7f5b92c7a000-7f5b92d75000 r-xp 00000000 08:16 11276283                   /lib/x86_64-linux-gnu/libm-2.15.so
7f5b92d75000-7f5b92f74000 ---p 000fb000 08:16 11276283                   /lib/x86_64-linux-gnu/libm-2.15.so
7f5b92f74000-7f5b92f75000 r--p 000fa000 08:16 11276283                   /lib/x86_64-linux-gnu/libm-2.15.so
7f5b92f75000-7f5b92f76000 rw-p 000fb000 08:16 11276283                   /lib/x86_64-linux-gnu/libm-2.15.so
7f5b92f76000-7f5b9312b000 r-xp 00000000 08:16 11276275                   /lib/x86_64-linux-gnu/libc-2.15.so
7f5b9312b000-7f5b9332a000 ---p 001b5000 08:16 11276275                   /lib/x86_64-linux-gnu/libc-2.15.so
7f5b9332a000-7f5b9332e000 r--p 001b4000 08:16 11276275                   /lib/x86_64-linux-gnu/libc-2.15.so
7f5b9332e000-7f5b93330000 rw-p 001b8000 08:16 11276275                   /lib/x86_64-linux-gnu/libc-2.15.so
7f5b93330000-7f5b93335000 rw-p 00000000 00:00 0 
7f5b93335000-7f5b93417000 r-xp 00000000 08:16 31987823                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7f5b93417000-7f5b93616000 ---p 000e2000 08:16 31987823                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7f5b93616000-7f5b9361e000 r--p 000e1000 08:16 31987823                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7f5b9361e000-7f5b93620000 rw-p 000e9000 08:16 31987823                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7f5b93620000-7f5b93635000 rw-p 00000000 00:00 0 
7f5b93635000-7f5b93657000 r-xp 00000000 08:16 11276289                   /lib/x86_64-linux-gnu/ld-2.15.so
7f5b93834000-7f5b93839000 rw-p 00000000 00:00 0 
7f5b93853000-7f5b93857000 rw-p 00000000 00:00 0 
7f5b93857000-7f5b93858000 r--p 00022000 08:16 11276289                   /lib/x86_64-linux-gnu/ld-2.15.so
7f5b93858000-7f5b9385a000 rw-p 00023000 08:16 11276289                   /lib/x86_64-linux-gnu/ld-2.15.so
7fffa5900000-7fffa5921000 rw-p 00000000 00:00 0                          [stack]
7fffa59ff000-7fffa5a00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:17:11.773

写作时：

```
int *anArray[100];
anArray[100] = new int [100]; 
```

在第一行中，您将分配一个包含 100 个指针的数组到 int。在第二行中，您动态分配整数数组并将该数组的地址分配给指针数组的 100 单元格。正确的语法是：

```
int *anArray;
anArray = new int [100]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:23:20.920

数组索引从`0`.
len 数组的`100`索引从`0`到`99`。

所以`anArray[100]`给你*Segmentation Fault*。

可能你想这样做：
`anArray[99] = new int[100];`

**或者**，如果您只想动态分配*指向 ints 的指针*数组，请执行以下操作：
`int **anArray = new int*[100];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:17:44.533

```
int *anArray[100];
anArray[100] = new int [100]; 
```

首先，您要分配一个包含 100 个指针的数组。然后您正在执行超出范围的访问。的最后一个元素`anArray`是`anArray[99]`，但您正在分配`anArray[100]`不存在的内存。这将导致分段错误。

最后，您将删除一个类型为 的静态数组`int*`。`anArray`在编译时分配并包含 100 个类型的指针`int`。删除`delete[]`声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:18:35.363

```
//dynamically allocate an array
int *anArray[100];
anArray[100] = new int [100]; 
```

`anArray`是一个包含 100 个指向 int 的指针的数组。为第 101 个元素（缓冲区溢出！）分配一个指针，该指针指向动态分配的 100 个整数数组的第一个元素。你想解决这个问题并将这两行合并为`int* anArray = new int[100];`.

# rally - 如何在集会用户故事页面上设置默认视图

> ID：14452625
> 
> 赞同：2
> 
> 时间：2013-01-22T06:14:15.840
> 
> 标签：rally

在默认用户故事页面上使用拉力赛时，如何设置默认视图？

我有一个自定义视图，我希望它自动打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:27:56.993

当您创建或编辑自定义视图时，在您用于设置显示列的表单部分正下方有一个选项“设置为默认值”。注意：这只会将视图设置为您登录的默认视图，甚至对于您的帐户，它只会将视图设置为计划 -> 用户故事页面的默认视图。

![编辑自定义视图表单](../Images/7ec8fc4c45296aa5dc7b821489456b10.png)

# blackberry - 在黑莓中预验证类 com.google.common.collect.Ordering 时出错

> ID：14452633
> 
> 赞同：2
> 
> 时间：2013-01-22T06:15:17.643
> 
> 标签：blackberry, java-me, preverify

当我包含包含 package**的 guava-11.0-rc1.jar**`com.google.common.*`时出现此错误。但是当我尝试打包它时，它给了我错误：

> 错误预验证类 com.google.common.collect.Ordering MyApp line 0
> BlackBerry Packaging Problem

谁能告诉我可以做些什么来解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:31:18.983

确保该库中的类与 Java-ME 兼容。记住 CLDC 是 Java SE 的一个子集，等效的桌面编译级别是 1.2

如果它们兼容，那么要解决预验证错误，您必须首先预验证您的 jar。您可能想知道什么是预验证。[这个答案](https://stackoverflow.com/q/2000476/813951)有一个很好的解释。

预验证通常由 Eclipse 插件完成（或应该完成），但有些版本不这样做。如果这是您的情况，您应该手动进行。在您的 JDE 文件夹中，有一个名为`preverify`. 您可以在 Windows 机器中通常看起来像这样的路径中找到它：

```
(1) C:\Program files\Research In Motion\BlackBerry JDE <vers>\bin\ 
```

您还需要一个名为的库，`net_rim_api.jar`位于如下路径中：

```
(2) C:\Program files\Research In Motion\BlackBerry JDE <vers>\lib\net_rim_api.jar` 
```

这就是启动命令所需的全部内容。打开命令行并将目录更改为 bin 文件夹 (1)。然后输入：

```
 preverify -classpath <classpath for lib> -d <output directory> <file to preverify> 
```

在哪里：

*   `<classpath for lib>`是 (2) 中的路径
*   `<output directory>`是将保存预先验证的 jar 的目录。
*   `<file to preverify>`是您要预验证的文件的绝对路径（在您的情况下为 guava-11.0-rc1.jar）

如果一切顺利，现在您将拥有一个`<output directory>`比输入 jar 文件稍大的新 jar。这是您应该包含在项目中的内容。该`preverify`工具不会更改您的原始 jar。

# jasper-reports - 将数据从 java 对象动态传递到 jasper 报告并转换为 PDF

> ID：14452638
> 
> 赞同：0
> 
> 时间：2013-01-22T06:15:31.480
> 
> 标签：jasper-reports, ireport

我是 Jasper 的新手/我报告。我正在尝试创建一个从 java 类访问或获取其数据的报告。我一直在尝试使用 JRBeanDataSource，但没有运气。我希望报告在代码中是动态的，而不使用 i-report。我尝试从我的报告中设计一个报告，但我似乎无法编译该报告。这是错误

```
 Compiling to file... E:\Program Files (x86)\Jaspersoft\iReport-5.0.1\ireport\projects\report1.jasper
 net.sf.jasperreports.engine.design.JRValidationException: Report design not valid :       1. Parameter not found : name      2. Parameter not found : surname     at net.sf.jasperreports.engine.design.JRAbstractCompiler.verifyDesign(JRAbstractCompiler.java:271)     at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:153)     at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:240)     at net.sf.jasperreports.engine.JasperCompileManager.compileToFile(JasperCompileManager.java:156)     at net.sf.jasperreports.engine.JasperCompileManager.compileReportToFile(JasperCompileManager.java:439)     at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:528)     at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)     at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
Compilation running time: 60! 
```

报告 XML 是

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" whenResourceMissingType="Empty" uuid="a686c2f8-36e1-48f1-8894-8324c9f5d041">
    <property name="ireport.zoom" value="1.4641000000000006"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="24"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement uuid="b1370c0a-6fd1-44ec-af9a-f4edba088c48" x="97" y="21" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="06c14f56-9416-4d14-a6d3-7f5dbfa6d701" x="97" y="59" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{surname}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:12:27.137

您在报告中引用了 2 个参数表达式：`$P{name}`, `$P{surname}`.

这些尚未定义。

为了使您的报告可执行，您需要为这些参数添加定义，例如

```
..
<property name="ireport.y" value="24"/>
<parameter name="name" class="java.lang.String" />
<parameter name="surname" class="java.lang.String" />
<background>
.. 
```

如果*name*和*surname*不应由参数填充，而是由您的数据源填充，则您需要将它们注册为字段并照此引用它们。

```
..
<property name="ireport.y" value="24"/>
<field name="name" class="java.lang.String" />
<field name="surname" class="java.lang.String" />
<background>
.. 
```

在您将它们称为的文本字段中 `$F{name}`，`$F{surname}`

# wso2 - 分布式 WSO2 CEP

> ID：14452646
> 
> 赞同：1
> 
> 时间：2013-01-22T06:16:17.990
> 
> 标签：wso2, distributed, complex-event-processing, wso2cep

如果我有一个以 JMS 代理作为主要输入的分布式 CEP 设置。

现在，如果我们告诉我们的客户端应用程序向主题 X 发送事件，这些事件将被分发到 CEP 集群中的每个节点，因为每个节点都将监听同一个主题 X。这会导致结果重复（假设我正在计算某些数据字段，现在由于每个节点都在接收重复数据，如果我有一个 2 节点集群，我的计数是否会是实际值的两倍）

CEP 可以使用 JMS 队列而不是主题吗？这样，哪个节点首先获取事件数据将消耗队列中的消息？WSO2 CEP 是否支持 JMS 队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:44:38.490

不，目前 (CEP 2.0.1) 不支持从 JMS 队列接收事件。但如果这是您的要求，那么您可以编写自己的 CEP addeptor(broker) 来接收来自队列的事件并将其推送到 CEP。

创建自定义代理

通过扩展 org.wso2.carbon.broker.core.BrokerType 来创建适当的代理类型，并通过从 jar org.wso2.carbon.broker.core 扩展 org.wso2.carbon.broker.core.BrokerTypeFactory 来创建适当的代理类型工厂-4.0.5.jar

然后使用 CEP 配置该代理，在 wso2cep-2.0.1/repository/conf 中创建一个名为“broker.xml”的文件并添加以下 XML： `<brokerTypes xmlns="http://wso2.org/carbon/broker"> <brokerType class="<<class reference>>" /> ... </brokerTypes>`

[在http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html](http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html)找到有关创建定制代理的详细文档

# jquery - 在 jsp 中使用 .do 扩展名

> ID：14452648
> 
> 赞同：-1
> 
> 时间：2013-01-22T06:16:27.377
> 
> 标签：jquery, spring, jsp

我们什么时候在 JSP 代码中使用 .do。例如，下面的代码是如何工作的

```
<a href="myUsedVouchers.do" >Used Vouchers</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:19:41.540

`.do`[是使用Apache Struts](http://struts.apache.org/)对动作的一般扩展

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:23:12.813

.do 用于动作前向映射。

`<action input="/" name="MyForm" path="/myFormHandler" scope="request" type="com.app.actions.MyFormHandler" validate="false"> <forward name="myform" path="/MyForm.do"/> </action>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:20:14.433

这是一个struts扩展，映射在web.xml中

```
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>/do/*</url-pattern>
</servlet-mapping> 
```

# javascript - 变量在成功函数之外无法访问

> ID：14452650
> 
> 赞同：1
> 
> 时间：2013-01-22T06:16:32.113
> 
> 标签：javascript, jquery

这个函数从数据库中获取一个问题，并且应该返回它。该数据库是一个 Parse 对象（https://www.parse.com/docs/js_guide）。如代码中的注释所示，该问题可以从 db 调用的成功函数内部访问，但不能从外部访问，并且简单地将 return 语句放在成功块内也不起作用。代码如下。有什么建议么？

```
function getQuest(){

    var Question = Parse.Object.extend("Question");
    var query = new Parse.Query("Question");
    var questlist = [];
    var newquestion;
    //get list of questions if chosen track is python or java. track is set globally

    if (track == "python")
    {

        query.equalTo("track", "xstsysysus7");

    } else if (track == "java"){

        query.equalTo("track", "XAWqBgxFAP");

    }

    query.find({

        success: function(questions){
        // return list of questions
            var i = Math.floor(Math.random()*10);
            newquestion = questions[i].get('question');
             console.log(newquestion); // works here

    },

        error: function(error){
            console.log(error.message);
        }

    });

    console.log(newquestion); //returns undefined here
    return newquestion;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T06:24:18.780

你不能像这样从回调方法返回，这是一个异步问题，你应该使用回调方法从方法中取出你的变量

```
function getQuest(callback){

var Question = Parse.Object.extend("Question");
var query = new Parse.Query("Question");
var questlist = [];
var newquestion;
//get list of questions if chosen track is python or java. track is set globally

if (track == "python")
{

    query.equalTo("track", "xstsysysus7");

} else if (track == "java"){

    query.equalTo("track", "XAWqBgxFAP");

}

query.find({

    success: function(questions){
    // return list of questions
        var i = Math.floor(Math.random()*10);
        newquestion = questions[i].get('question');
        //call the callback method here and pass your variable as a param
        if(callback != null && callback != undefined){
              callback(newquestion);
        }

},

    error: function(error){
        console.log(error.message);
    }

}); 
```

}

现在您可以像这样调用您的 getQuest 方法，而不是使用 var newQ = getQuest()

```
getQuest(function(newQuestion){
   // do your stuff with newQuestion 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:20:32.240

回调（成功和错误）是异步的。在您的函数返回之前，它们可能尚未执行。

# ruby-on-rails - 在 ruby on rails 中，我如何将数组作为一系列参数传递

> ID：14452654
> 
> 赞同：1
> 
> 时间：2013-01-22T06:16:58.940
> 
> 标签：ruby-on-rails, parameters, rails-activerecord

我有一个我正在尝试构建的简单查询。
我想将参数传递给查询。

```
Product.where('id = ?', 1) 
```

很简单..如果字段列表和值是数组怎么办

```
fields = ['id = ? ', 'type_id = ?', 'brand_id = ?']
values = [1, 1, 1]
Product.where(fields.join(' and '), values)  #does not compute, does not compute! 
```

任何人都知道如何传递参数化查询的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:22:14.243

您可以使用`*`将数组转换为参数列表：

```
fields = ['id = ?','type_id = ?','brand_id = ?']
values = [1, 1, 1]
Product.where(fields.join(' and '), *values) 
```

# python - django 项目的生产设置

> ID：14452663
> 
> 赞同：2
> 
> 时间：2013-01-22T06:17:31.343
> 
> 标签：python, django, heroku, production

我创建了一个`production_settings.py`在其中放置所有生产环境变量和值的方法，例如：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

我以为我会声明一个环境变量，例如

MYPROJECT_PRODUCTION

并将其设置为

`heroku config:add MYPROJECT_PRODUCTION=True`或者`export MYPROJECT_PRODUCTION=True`

在 settings.py （这是 django 创建的默认值）中，我想我会在文件末尾添加

```
import os
if os.environ.has_key('MYPROJECT_PRODUCTION') and os.environ.get('MYPROJECT_PRODUCTION')=='True':
    from production_settings import * 
```

这是这样做的正确方法吗？

我在尝试时遇到导入错误`python manage shell`

```
export DJANGO_SETTINGS_MODULE='myproject.settings'
export MYPROJECT_PRODUCTION=True
me@ubuntu:~/dev/python/django/myproject$ python manage.py shell
Error: Can't find the file 'settings.py' in the directory containing 'manage.py'. It appears you've customized things.
You'll have to run django-admin.py, passing it your settings module.
(If the file settings.py does indeed exist, it's causing an ImportError somehow.) 
```

manage.py 与 settings.py 存在于同一文件夹中..仍然发生错误。

我检查了`echo $MYPROJECT_PRODUCTION`哪些输出`True`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:56:06.517

就个人而言，我保留我的生产设置，`settings.py`然后包含一个`local_settings.py`文件（使用 .hgignore 将其排除在修订控制之外）。

我将以下内容添加到 settings.py 的末尾

```
try:
    from local_settings import *
except ImportError, e:
    pass 
```

然后在我的 local_settings.py 我覆盖适当的设置 -

```
DEBUG = True

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'tag',
        'USER': 'tag',
        'PASSWORD': 'tag',
        'HOST': 'localhost',
        'PORT': '5432',
    }
} 
```

我的印象是这是一种相当常用的方法（我从同事那里得到的，但我也看到过它的博客）

编辑

作为对 balazs 非常好的点的回应，您可能会在此方法上包含一个变体，以保持敏感数据的私密性。`local_settings`导入后可能包括以下内容-

```
try:
    from production_settings import *
except ImportError, e:
    pass 
```

`production_settings.py`然后从版本控制中排除。我想您可能需要使用不同的方法来部署`production_settings.py`，但我认为这没什么大不了的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:13:58.437

我建议不要为不同的环境使用不同的设置文件，而是使用环境变量自定义设置。这允许您默认使用本地开发设置并在生产中覆盖它。

例如数据库和静态/媒体根设置

```
# Default database URL is a local SQLite instance
DATABASE_URL = 'sqlite:///%s' % os.path.join(os.path.dirname(__file__), 'db.sqlite')

DATABASES = {
    'default': dj_database_url.config('DATABASE_URL', default=DATABASE_URL),
}

MEDIA_ROOT = os.environ.get('MEDIA_ROOT',
                            os.path.join(os.path.dirname(__file__), 'media'))

MEDIA_URL = os.environ.get('MEDIA_URL', '/media/')

STATIC_ROOT = os.environ.get('STATIC_ROOT',
                             os.path.join(os.path.dirname(__file__), 'static'))

STATIC_URL = os.environ.get('STATIC_URL', '/static/') 
```

这允许您通过设置 Heroku 上的任何设置，`heroku config:set`并消除处理多个设置文件的复杂性，例如：

```
heroku config:set MEDIA_URL=http://custom-media-server.com/media/
heroku config:set STATIC_URL=http://custom-media-server.com/static/ 
```

我还创建了一个自定义[Django 项目模板](https://github.com/caffeinehit/django-project-template)，它可以从环境变量中获取大多数设置。

您还应该查看[12 Factor Application](http://www.12factor.net/)网站，特别是如何[存储配置](http://www.12factor.net/config)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:42:51.420

您是否将 DATABASES 定义为字典？经过：

```
DATABASES = {} 
```

也展示你的 `heroku logs`

# java - 如何在 JMS 中接收确认

> ID：14452674
> 
> 赞同：1
> 
> 时间：2013-01-22T06:17:55.600
> 
> 标签：java, jms, publish-subscribe

这是我的场景。该程序是使用发布者/订阅者方法开发的。在生产者和消费者部分有两个主题（topic1，topic2）。我需要在生产者程序中从消费者那里获得对接收到的 topic1 的确认，以便当确认状态为真时，生产者程序必须在 topic2 上发送消息。

谷歌搜索链接建议`session.CLIENT_ACKNOWLEDGE`消费者。但我需要将确认状态返回给生产者以进行进一步处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:43:54.860

JMS 规范没有为发布者定义任何 API 来了解订阅者是否使用了消息。发布者只是发布一条消息，它是消息提供者/代理将该消息传递给订阅者。如果有订阅，代理将传递消息，否则该消息将被丢弃。

该`session.CLIENT_ACKNOWLEDGE`选项是消费者告诉**消息传递提供者（而不是生产者）**从其队列/内存中删除消息的方式之一。还有其他几个确认选项，但所有这些选项都用于告诉消息传递提供者删除消息，而**不是**告诉生产者。

如果生产者需要消费者的确认，那么消费者将不得不在另一个主题上发布确认消息，并且生产者订阅该主题以接收这些确认。例如：

Producer 发布`TOPIC1`
Producer 订阅`TOPIC1/ACKS`
Consumer 订阅 Consumer`TOPIC1`
收到消息后
Consumer 发布确认消息给`TOPIC1/ACKS`
Producer 会收到确认消息。
然后它可以在 TOPIC2 上发布

您必须注意，可以有多个确认消息，因为 TOPIC1 上可能有多个订阅者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T01:10:41.383

如果你的程序只包含一个消息生产者，你可以在消息消费者中创建一个队列，让生产者订阅那个队列。在队列模式下，它是点对点的。所以消息只会从消费者传递给生产者。

或者，您也可以使用[setJMSReplyTo](http://docs.oracle.com/javaee/1.4/api/javax/jms/Message.html#setJMSReplyTo%28javax.jms.Destination%29)方法指定您希望消费者在收到来自生产者的消息时回复的队列。这样，您无需在消费者中显式创建队列，但您也可以在生产者中创建队列。但是您仍然需要让生产者收听该队列以接收确认。

# vlc - Pulseaudio 将 RTP 输出到互联网

> ID：14452675
> 
> 赞同：5
> 
> 时间：2013-01-22T06:18:00.063
> 
> 标签：vlc, alsa, pulseaudio

我希望pulseaudio（远程实例）将发送到主要alsa设备的音频通过互联网直接推送到RTP，以便我可以在家用计算机上的VLC上收听它。

在我的 /etc/pulse/default.pa

```
load-module module-rtp-send source=alsa_output.0.analog-stereo.monitor destination=x.x.x.x port=8080 loop=1 
```

其中 xxxx 是我的服务器的互联网 IP

启动pulseaudio后，netstat显示（我无法从远程VLC连接到这个）

```
udp        0      0 10.170.94.16:58606      x.x.x.x:9875      ESTABLISHED 2109/pulseaudio
udp        0      0 10.170.94.16:35597      x.x.x.x:8080      ESTABLISHED 2109/pulseaudio 
```

它与 cvlc 一起产生预期的结果（我可以从 remove VLC 连接到这个）

```
cvlc -vvv pulse://alsa_output.0.analog-stereo.monitor --sout '#transcode{acodec=mpga,ab=32,channels:1}:rtp{sdp=rtsp://0.0.0.0:8080/test.sdp}' 
```

产生

```
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      1944/pulseaudio 
```

我可以连接到它。

所以我认为我理解的是，pulseaudio 工作正常，并且正在将音频发送到端口 8080。但是，它没有监听传入连接以将数据路由到。我将如何告诉pulseaudio，或者设置路由，以便在发生入站连接时端口8080 传输rtp 提供的音频。我还看到 cvlc 使用 rtsp 作为源。

还是有点懵。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-20T13:32:41.993

RTP 使用无状态 UDP 协议作为传输：它不需要目标端确认任何传入的数据包。它无法告诉您连接是否已实际建立，除非远程端明确拒绝了它。此功能允许在 LAN 上进行广播，因为多个客户端可以根据需要侦听数据包，但它使调试单播连接稍微复杂一些。

在进行单播 UDP（就像您尝试实现的那样）时，一旦它在 Internet 上发布，它*应该*会到达您的目的地。你有防火墙吗？除非您的机器直接连接到您的调制解调器，否则您很可能至少有网络地址转换，这会阻止数据包到达您的计算机。在您的网关/路由器配置中查找端口转发。

您可以使用 tcpdump 测试您是否真的在接收数据包。运行它时，您会看到来自其他连接的一些噪音，以及如下所示的数据包：

```
08:19:38.483895 IP y.y.y.y.zzzz > x.x.x.x:8080: UDP, length 1292 
```

另外，PulseAudio 不使用 RTSP，所以 VLC 只需要打开一个 RTP 流。只需键入即可`rtp://0.0.0.0:8080`。

# android - 将带有附加数据的图片上传到 php

> ID：14452677
> 
> 赞同：0
> 
> 时间：2013-01-22T06:18:21.893
> 
> 标签：android

我想从手机上传一张带有姓名和电子邮件等数据的照片。

在 Android 设备上，我知道如何上传照片，也知道如何在手机和服务器之间发送数据，但是您如何同时进行这两项操作呢？

我应该分开做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:38:51.517

在您的情况下，您应该使用 MultipartEntity 类，

```
 MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("name", new StringBody(name));
            reqEntity.addPart("email", new StringBody(email));

            if(imagePath.trim().length() != 0) {
                reqEntity.addPart("profilePic", new FileBody(new File(imagePath))); 
            }

            HttpClient hc = new DefaultHttpClient();
            HttpPost postMethod = new HttpPost(urlString);
            HttpEntity resEntity;
            HttpResponse response = null;
            postMethod.setEntity(reqEntity);
            response = hc.execute(postMethod);
            resEntity = response.getEntity();
            response_str = EntityUtils.toString(resEntity); 
```

# java - Android-App 未在真实设备上运行

> ID：14452679
> 
> 赞同：1
> 
> 时间：2013-01-22T06:18:31.903
> 
> 标签：java, android, android-emulator

我刚刚开始在 Android 中编码，下图是具有基本操作的简单计算器，当我在 SONY ERICSSON LIVE WITH WALKMAN 上运行它时，我收到消息为“不幸的是 CACULATOR 已停止”下图是控制台输出：

```
[2013-01-22 11:42:52 - calci] ------------------------------
[2013-01-22 11:42:52 - calci] Android Launch!
[2013-01-22 11:42:52 - calci] adb is running normally.
[2013-01-22 11:42:52 - calci] Performing com.example.calci.MainActivity activity launch
[2013-01-22 11:42:54 - calci] Uploading calci.apk onto device 'BX902W2BWH'
[2013-01-22 11:42:54 - calci] Installing calci.apk...
[2013-01-22 11:42:57 - calci] Success!
[2013-01-22 11:42:57 - calci] Starting activity com.example.calci.MainActivity on device BX902W2BWH
[2013-01-22 11:42:58 - calci] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.calci/.MainActivity } 
```

* * *

这是 LogCat 窗口消息：

```
01-22 11:42:32.071: D/AndroidRuntime(4046): Shutting down VM
01-22 11:42:32.071: W/dalvikvm(4046): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
01-22 11:42:32.081: E/AndroidRuntime(4046): FATAL EXCEPTION: main
01-22 11:42:32.081: E/AndroidRuntime(4046): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.calci/com.example.calci.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.os.Looper.loop(Looper.java:137)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at dalvik.system.NativeStart.main(Native Method)
01-22 11:42:32.081: E/AndroidRuntime(4046): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.Activity.setContentView(Activity.java:1835)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at com.example.calci.MainActivity.onCreate(MainActivity.java:21)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.Activity.performCreate(Activity.java:4465)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-22 11:42:32.081: E/AndroidRuntime(4046):     ... 11 more
01-22 11:42:32.081: E/AndroidRuntime(4046): Caused by: java.lang.reflect.InvocationTargetException
01-22 11:42:32.081: E/AndroidRuntime(4046):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-22 11:42:32.081: E/AndroidRuntime(4046):     ... 23 more
01-22 11:42:32.081: E/AndroidRuntime(4046): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001}
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.content.res.Resources.loadDrawable(Resources.java:1897)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.View.<init>(View.java:2804)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.View.<init>(View.java:2741)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.view.ViewGroup.<init>(ViewGroup.java:412)
01-22 11:42:32.081: E/AndroidRuntime(4046):     at android.widget.RelativeLayout.<init>(RelativeLayout.java:179)
01-22 11:42:32.081: E/AndroidRuntime(4046):     ... 26 more
01-22 11:43:03.361: D/AndroidRuntime(4197): Shutting down VM
01-22 11:43:03.361: W/dalvikvm(4197): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
01-22 11:43:03.371: E/AndroidRuntime(4197): FATAL EXCEPTION: main
01-22 11:43:03.371: E/AndroidRuntime(4197): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.calci/com.example.calci.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.os.Looper.loop(Looper.java:137)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at dalvik.system.NativeStart.main(Native Method)
01-22 11:43:03.371: E/AndroidRuntime(4197): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.Activity.setContentView(Activity.java:1835)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at com.example.calci.MainActivity.onCreate(MainActivity.java:21)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.Activity.performCreate(Activity.java:4465)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-22 11:43:03.371: E/AndroidRuntime(4197):     ... 11 more
01-22 11:43:03.371: E/AndroidRuntime(4197): Caused by: java.lang.reflect.InvocationTargetException
01-22 11:43:03.371: E/AndroidRuntime(4197):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-22 11:43:03.371: E/AndroidRuntime(4197):     ... 23 more
01-22 11:43:03.371: E/AndroidRuntime(4197): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001}
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.content.res.Resources.loadDrawable(Resources.java:1897)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.View.<init>(View.java:2804)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.View.<init>(View.java:2741)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.view.ViewGroup.<init>(ViewGroup.java:412)
01-22 11:43:03.371: E/AndroidRuntime(4197):     at android.widget.RelativeLayout.<init>(RelativeLayout.java:179)
01-22 11:43:03.371: E/AndroidRuntime(4197):     ... 26 more 
```

对不起，如果我无法识别简单的错误..！

这是我的 activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@style/AppTheme"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="29dp"
        android:layout_marginTop="22dp"
        android:ems="10"
        android:hint="@string/enter_first_number"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_alignRight="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="26dp"
        android:ems="10"
        android:hint="Enter Second Number"
        android:inputType="number" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:text="SUB" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/button1"
        android:layout_marginBottom="45dp"
        android:text="MUL" />

    <Button 
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button3"
        android:layout_alignLeft="@+id/button2"
        android:text="DIV" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/editText2"
        android:layout_below="@+id/editText2"
        android:layout_marginTop="66dp"
        android:text="ADD" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_alignLeft="@+id/editText2"
        android:layout_alignRight="@+id/button1"
        android:layout_marginBottom="24dp"
        android:hint="RESULT"
        android:text="RESULT" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:55:28.640

这是什么： android:background="@style/AppTheme" ？这就是问题。

您不能将主题设置为背景。它应该是彩色的或可绘制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:24:34.967

我以前没有在 Android 中编程，但我有 JAVA 经验。对我来说，您似乎正在使用无法绘制到设备 UI 上的资源。

**这似乎是问题所在：**

```
01-22 11:42:32.081: E/AndroidRuntime(4046): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001} 
```

再次检查 XML 是否有错误的资源或语法错误。如果您仍然收到错误，请在此处发布您的 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:53:38.437

不确定，但我注意到在 EditText1 中你有`android:hint="@string/enter_first_number"`，但在 editText2 中`android:hint="Enter Second Number"`- 应该是这样`android:hint="@String/Enter Second Number"`吗？

# android - 如何在不使用互联网的情况下获得纬度和经度？

> ID：14452681
> 
> 赞同：0
> 
> 时间：2013-01-22T06:18:39.173
> 
> 标签：android, gps, latitude-longitude

我们可以在不使用互联网的情况下获取设备当前的纬度和经度吗？我正在使用以下代码。我在单击按钮后触发位置侦听器。

```
 locationListener = new MyLocationListener();
        location.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 5000, 20, locationListener);

  private class MyLocationListener implements LocationListener 
  {
    @Override
    public void onLocationChanged(Location loc) 
    {
        longitude = String.valueOf(loc.getLongitude());  
        latitude = String.valueOf(loc.getLatitude());
                  ...
    }
} 
```

它在连接到 Internet 时可以很好地获取经度和纬度值，但在未连接到 Internet 时返回 null。

可能是什么问题呢？LocationManager.NETWORK_PROVIDER, 5000, 20, locationListener 是否需要互联网才能获得经纬度？

如果需要互联网，那么网络提供商 NETWORK_PROVIDER 和 GPS_PROVIDER 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:39:39.400

网络提供商将 Cell ID/WiFi 读数信息转换为纬度/经度地址，并且需要数据连接来执行此操作。（它访问具有此类信息数据库的 Google 服务器）

使用 GPS 提供程序。它不需要互联网。

# jquery - 具有范围验证的日期选择器以及在文本框中显示的默认日期为今天

> ID：14452683
> 
> 赞同：0
> 
> 时间：2013-01-22T06:18:43.003
> 
> 标签：jquery, jquery-ui-datepicker, uidatepicker

```
$(function() {
var d = new Date();

    $("#Start_validBeforeDatepicker").datepicker(
        {
        defaultDate: d,
        numberOfMonths : 1,
        showButtonPanel : true,
        onClose : function(selectedDate) {

            $("#End_validAfterDatepicker").datepicker("option","minDate", selectedDate);

        }
    });
    $("#End_validAfterDatepicker").datepicker(
    {
        defaultDate: +1, 
        setDate:new Date(),
        numberOfMonths : 1,
        showButtonPanel : true,
        onClose : function(selectedDate) {                  
            $("#Start_validBeforeDatepicker").datepicker("option","maxDate", selectedDate);
        }
    });
}); 
```

这是我的 datepciker 脚本..

我想用今天的日期初始化我的两个日期选择器..而且我`Start_validBeforeDatepicker`总是想要那个`<= #End_validAfterDatepicker`所以我该怎么做..谁能指导我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:36:26.727

下面是验证日期范围的代码。

```
<link rel="stylesheet" href="flick/jquery-ui-1.9.2.custom.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.ui.core.js"></script>
<script type="text/javascript" src="js/jquery.ui.datepicker.js"></script>
<script type="text/javascript">

$(function()
{
    $( "#issuedate" ).datepicker(
    {
        minDate: new Date(),
        changeMonth: true,
        numberOfMonths: 1,
        onClose: function( selectedDate )
        {
            $( "#expdate" ).datepicker( "option", "minDate", selectedDate );
        }
    });

    $( "#expdate" ).datepicker(
    {
        minDate: new Date(),
        changeMonth: true,
        numberOfMonths: 1,
        onClose: function( selectedDate )
        {
            $( "#issuedate" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});
</script>

<input type="text" id="issuedate" />
<input type="text" id="expdate" />
```

您需要做的就是相应地设置参数。

# android - 如何在 wifi 中检查互联网是否可用（虽然 Wifi 已连接）

> ID：14452692
> 
> 赞同：4
> 
> 时间：2013-01-22T06:19:17.957
> 
> 标签：android

我使用此代码检查互联网是否可用..

```
 ConnectivityManager connectivity = (ConnectivityManager) _context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivity != null) {

        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null)
            for (int i = 0; i < info.length; i++)

    if (info[i].getState() == NetworkInfo.State.CONNECTED && info[i].isAvailable())

        {
            return true;
        }
    }
    return false; 
```

但我想要的是：

假设 wifi 已连接，但 wifi 中没有互联网...如何检查 wifi 中的互联网数据是否可用，即使 Wifi 已连接..如果我使用以上代码，它只会检查 wifi 是否已连接或断开.. 如果有人给出，将不胜感激我一个解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:22:27.410

最简单的事情是发送 http 请求，如果您的 http 请求超时，那么您没有互联网连接，或者您可以检查更多响应代码。您提到的情况发生在您连接到 WiFi 但 WiFi 路由器没有与 ISP 的活动连接时。最好的事情是依靠http请求imo。

这是示例代码：

```
try
  {

   HttpGet request = new HttpGet(url));
   HttpParams httpParameters = new BasicHttpParams();
   // Set the timeout in milliseconds until a connection is established.
   // The default value is zero, that means the timeout is not used. 
   int timeoutConnection = 60000;
   HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
   // Set the default socket timeout (SO_TIMEOUT) 
   // in milliseconds which is the timeout for waiting for data.
   int timeoutSocket = 60000;
   HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
   // create object of DefaultHttpClient    
   DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
   request.addHeader("Content-Type", "application/json");
   HttpResponse response = httpClient.execute(request);
   // get response entity
   HttpEntity entity = response.getEntity();
   // convert entity response to string

     if (entity != null)
      {
         result = EntityUtils.toString(entity);
      }

   }
 catch (SocketException e)
  {
     return "-222" + e.toString();
  }
 catch (Exception e)
  {
     return "-333" + e.toString();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:11:50.043

是的，VendettaDroid 是对的。

这里也是检查 WIFI 互联网并检查飞行模式是否打开/关闭的代码，如果您正在制作 Web 应用程序，则必须处理飞行模式

```
// Check Flight mode ON/OFF
    if (Settings.System.getInt(context.getContentResolver(),
            Settings.System.AIRPLANE_MODE_ON, 0) == 0) {

// Flight mode ON not able to access internet
} 
```

检查 wifi 和互联网可用性

```
ConnectivityManager cm;
cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {

 // Internet is availble.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T02:38:16.717

刚刚在 Play 商店 [https://play.google.com/store/apps/details?id=com.mobilefree上完成了最新标题“Mobile Free”的工作](https://play.google.com/store/apps/details?id=com.mobilefree)

NetworkInfo.isAvailable() 只是告诉你是否有物理网络可以连接。NetworkInfo.isConnected() 只是告诉您您已连接到物理网络。

物理网络可以是 WIFI、MOBILE、ETHER 等……传输层。

仅仅因为您连接到网络并不意味着该网络具有互联网（应用层）。

网络可以有各种应用协议。TCP、DNS 和 HTTP 不是唯一的。

在 android 中检查实际的互联网可用性实际上是相当困难的。要做到这一点，需要克服许多限制。

isReachable() 方法使用 ICMP 来 ping 主机。这可能很难设置。

同样，根据设备、权限、API、操作系统版本等，调用 url 可以同样受到限制。

如果您不必这样做，请不要这样做。没有适用于所有设备的可靠方法。

这不是“Mobile Free”的核心用例，它只是管理移动计费（开/关）。

有趣的是，您实际上可以在移动设备上，但没有互联网并且仍然可以计费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:35:25.970

非常感谢你给我的建议...

我实际上找到了一些解决方案：

我使用了 try\catch：

```
 try{
    //calling url
    }
    catch(UnknownHostException e){

    e.printStackTrace();

    Connection_error();     
    }

   catch (ConnectException e) {
    e.printStackTrace();
    Connection_error();
            } 
```

谢谢大家...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-08T10:33:03.607

您可以读取[wifi当前状态..](https://stackoverflow.com/a/3841444/3496570)

```
SupplicantState supState; 
wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
supState = wifiInfo.getSupplicantState(); 
```

也看看[这个方法](https://stackoverflow.com/a/16580439/3496570)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-22T07:05:55.993

试试下面的代码： -

```
public static boolean netConnect(Context ctx) {

    ConnectivityManager cm;
    NetworkInfo info = null;
    try {
        cm = (ConnectivityManager) ctx
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        info = cm.getActiveNetworkInfo();
    } catch (Exception e) {

        e.printStackTrace();
    }
    if (info != null) {
        return true;

    } else {
        return false;
    }
} 
```

# eclipse - 将 LLVM-GCC 与 Eclipse 集成

> ID：14452694
> 
> 赞同：1
> 
> 时间：2013-01-22T06:19:20.380
> 
> 标签：eclipse, llvm, llvm-gcc

我目前正在使用 llvm-gcc-4.2-2.0 前端和 llvm-2.9 后端对 llvm-gcc 编译器进行一些开发。大约七个月以来，我一直在使用文本查看器进行开发，使用终端构建编译器并使用打印语句进行调试“你可能会想象那是一种什么样的痛苦”。

这是我需要帮助的地方。**如何将 llvm 和 gcc 集成到 Eclipse Juno IDE 中？**

我对从 eclipse、代码完成和运行时调试构建编译器感兴趣。我已经尝试过集成它，但它并没有真正奏效，源文件中不断出现错误，无法找到和打开一些头文件。

我会很感激我能得到的任何帮助。提前致谢。

# forms - web2py 验证

> ID：14452697
> 
> 赞同：0
> 
> 时间：2013-01-22T06:19:40.240
> 
> 标签：forms, web2py

我想知道验证是必须的，在表单上不存在但在表格中可用的字段上。在 define_table 中将它们标记为 NULL 是否使它们仅在它们出现在表单中时才被验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:04:20.000

[表单验证器](http://web2py.com/books/default/chapter/29/07#Custom-forms)仅适用于表单，因此不会影响表单中不存在的字段。我不确定将字段标记为 NULL 是什么意思，但如果您指的是，则在首次创建数据库表时`Field(..., notnull=True)`执行 SQL语句（假设启用了 DAL 迁移）。`NOT NULL`每当插入或更新记录（通过表单或任何其他方法）时，数据库本身都会强制执行该选项。如果`notnull`字段为空，则会导致数据库出现操作错误。

# django - 我得到一个'views.mainPage'的反向参数'（）'和关键字参数'{}'未找到。

> ID：14452700
> 
> 赞同：-1
> 
> 时间：2013-01-22T06:19:50.437
> 
> 标签：django, django-templates, django-1.4

我得到一个'views.mainPage'的反向参数'（）'和关键字参数'{}'未找到。

/django_crm/crm/views.py 中的 mainPage 方法

```
@login_required
def mainPage(request):
    variables = RequestContext(request, {
            'user': request.user,
            })  

    return render_to_response('mainPage.html', variables) 
```

和 /django_crm/django_crm/templates/mainPage.html

```
<html>
    <head>
        <title>test</title>
    </head>
    <body>
        {% url 'crm.views.mainPage' %}
    </body>
</html> 
```

错误...

```
Reverse for ''crm.views.mainPage'' with arguments '()' and keyword arguments '{}' not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:22:31.300

`{% load url from future %}`如果您使用的是 django < 1.5

或者

从 url 标记中删除引号。

> 在 Django 1.5 中更改：第一个参数以前没有被引用，这与其他模板标签不一致。从 Django 1.5 开始，它根据通常的规则进行评估：它可以是带引号的字符串或将在上下文中查找的变量。

# scala - 是否可以通过 Stream 延迟评估 take() 中的中间元素？（见解释）

> ID：14452703
> 
> 赞同：1
> 
> 时间：2013-01-22T06:20:10.483
> 
> 标签：scala, lazy-evaluation

我有一个无限的流，自然需要从中“拉”到某个元素。这是第一步。但是只有部分“拉”的元素将在第二步中使用，例如只有偶数元素。是否可以通过惰性来避免处理奇数元素？

解释我要问的更好的方法是显示代码：

```
 Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
  Type in expressions to have them evaluated.
  Type :help for more information.

  scala> var n=0; def numbers:Stream[Int] = {n += 1; println("n= " + n); n #:: numbers}
  n: Int = 0
  numbers: Stream[Int]

  scala> numbers.map{z => println("z^2= " + z*z) ; z*z}.take(10)(2)
  n= 1
  z^2= 1
  n= 2
  z^2= 4
  n= 3
  z^2= 9
  res0: Int = 9

  scala> var n=0; def numbers:Stream[Int] = {n += 1; println("n= " + n); n #:: numbers}
  n: Int = 0
  numbers: Stream[Int]

  scala> numbers.map{lazy z => println("z^2= " + z*z) ; z}.take(10)(2)
  <console>:1: error: lazy not allowed here. Only vals can be lazy
  numbers.map{lazy z => println("z^2= " + z*z) ; z*z}.take(10)(2)
  ^

  scala> 
```

由于`take(10)(2)`is的结果，因此`res0: Int = 9`只`z^2= 9`需要计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:38:49.550

如果你想推迟`z^2`（`map`操作）的计算， a`view`应该足够了：

```
object Worksheet {
  var n = 0                                   //> n  : Int = 0
  def numbers: Stream[Int] = { n += 1; println("n= " + n); n #:: numbers }
                                              //> numbers: => Stream[Int]

  numbers.view.map { z => println("z^2= " + z * z); z }.take(10)(2)
                                              //> n= 1
                                              //| n= 2
                                              //| n= 3
                                              //| z^2= 9
                                              //| res0: Int = 3
} 
```

如果您还想将流中数字的生成推迟到需要它们时，您可以手动执行此操作：

```
object sheet {
  var n = 0                                   //> n  : Int = 0
  def numbers: Stream[() => Int] = (() => { n += 1; println("n= " + n); n }) #:: numbers
                                              //> numbers: => Stream[() => Int]

  numbers.view.map { z => val x = z(); println("z^2= " + x * x); x }.take(10)(2)
                                              //> n= 1
                                              //| z^2= 1
                                              //| res0: Int = 1
} 
```

这里的问题似乎是 Scala 库中的流并不懒惰。如果 Scalaz 库已经有类似的东西，我不会感到惊讶。

# javascript - 选择单选按钮后显示 div

> ID：14452709
> 
> 赞同：-1
> 
> 时间：2013-01-22T06:20:49.737
> 
> 标签：javascript, jquery, html

我有此代码，而我需要的是选择一个单选按钮时我要显示subscription_rate div。目前，两个主要 DIV 一起显示。单击单选按钮时，我需要保持隐藏 subcription_rate div。

希望有人帮我解决这个..

到目前为止，这是我的代码...

```
<div class="form-element-row">
    <div class="first-child">
        <label for="name">Registration Period<img alt="required" src="images/required_star.png" />:</label>
    </div>
    <div class="last-child">
        <input type="radio"  name="period"  value="1" />1 Year
        <input type="radio"  name="period"  value="2" />2 Years
        <input type="radio"  name="period"  value="3" />3 Year                              
    </div>
</div>

<div class="subscription_rate">
    <div class="first-child">
        <label>&nbsp;</label>
    </div>
    <div class="last-child">
        <table>
          <tr>
            <th>Subscription Rate</th>
            <th>1 Year</th>
            <th>2 Years</th>
            <th>3 Years</th>
          </tr>
          <tr>
            <td style="text-align: left;">Lanka Institute Rates for Tutors within their subscription period.</td>
            <td width="18%">Rs.3000</td>
            <td width="18%">Rs.4500<br /><span>Save 25%</span></td>
            <td width="18%">Rs.7500<br /><span>Save 50%</span></td>
          </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:38:02.550

首先通过`.hide()`在jquery中使用隐藏它，并`.show()`在用户单击单选按钮后显示它时使用，

```
$(document).ready(function(){
     $('.subscription_rate').hide(); // hide the div first
     $('input[type=radio]').change(function(){
        if($('input[type=radio]:checked').val()==1){ //check which radio button is clicked, here its 1
            $('.subscription_rate').hide();
        }else if($('input[type=radio]:checked').val()==2){
            $('.subscription_rate').fadeIn("slow"); // show the div with fadeIn
        }else if($('input[type=radio]:checked').val()==3){
            $('.subscription_rate').hide();
        }else{
            $('.subscription_rate').hide(); // if in any case radio button is not checked by user hide the div
            }
    });
}); 
```

[JSFIddle 演示](http://jsfiddle.net/swarne27/SqzU9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:24:11.323

您需要将`change`事件处理程序与单选按钮绑定并使用`show()`/`hide()`功能。

[**现场演示**](http://jsfiddle.net/4vpBx/1/)

```
$('.subscription_rate').hide();
$('[name=period]').change(function(){
    $('.subscription_rate').show();
}); 
```

要在单选按钮更改之间切换，可以使用[toogle()](http://api.jquery.com/toggle/)

**[现场演示](http://jsfiddle.net/4vpBx/3/)**

```
$('.subscription_rate').hide();
$('[name=period]').change(function(){
  $('.subscription_rate').toggle();    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:27:29.023

首先隐藏css中的div：

`display:none;`

然后使用这个脚本：

```
$('input[name="period"]').change(function(){
  $('.subscription_rate').slideDown('slow'); // .slideDown(800);
}); 
```

# android - android - 如果它是空的，不想显示微调器下拉列表

> ID：14452710
> 
> 赞同：0
> 
> 时间：2013-01-22T06:20:54.353
> 
> 标签：android, android-spinner

如果它是空的，我不想显示微调器下拉菜单。我试过了，但我没有得到请任何人都可以帮助我。

代码：

```
sp.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        // TODO Auto-generated method stub
        //narray is the array. It's having the elements of spinner.
        if (event.getAction() == MotionEvent.ACTION_UP && narray.size() == 0) {
            sp.setPressed(false);
            sp.setSelected(false);
            sp.setAdapter(null);
        }
        return false;
    }       
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:36:45.157

在你的代码中添加这个来检查数组大小是 <= 0

```
String[] b = {};

    spin = (Spinner) findViewById(R.id.spinner1);

            if (b.length <= 0) {
                spin.setClickable(false);
            } 
```

试试这个代码微调器没有打开。

编辑：

像下面这样

```
 spin = (Spinner) findViewById(R.id.spinner1);

    spin.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        if (b.length <= 0) {
            spin.setClickable(false);
            Toast.makeText(StackoneActivity.this,
                    "spinner have no items", Toast.LENGTH_LONG).show();
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:39:43.490

试试这个代码。

```
if(narray.size() >= 0)
sp.setOnTouchListener(new OnTouchListener() {

@Override
public boolean onTouch(View arg0, MotionEvent event) {
    // TODO Auto-generated method stub
    if (event.getAction() == MotionEvent.ACTION_UP ) {
        sp.setPressed(false);
        sp.setSelected(false);
        sp.setAdapter(null);
    }
    return false;
}       
}); 
```

# objective-c - 自发的“NSCFString encodeBytes:length:forKey: unrecognized selector”异常

> ID：14452713
> 
> 赞同：0
> 
> 时间：2013-01-22T06:21:02.780
> 
> 标签：objective-c, nsmutabledictionary, static-members

我正在使用我在其他几个项目中使用过的代码，没有发生任何事故。突然，我在使用相同的代码时收到随机错误消息 - 但仅限于一个特定项目。

此代码已在其他几个项目中完美运行：

```
@implementation MyClass

static NSMutableDictionary *elements;

+(void) initialize {
    if (!elements)
        elements = [NSMutableDictionary new];
}

+(void) MyFunction: (some parameters) {
    NSString *class_name = NSStringFromClass([self class]);
    NSMutableArray *elementList = [elements valueForKey: class_name];
} 
```

发生了一些变化，现在 [elements valueForKey:] 调用会产生以下错误消息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: NSCFString encodeBytes:length:forKey: unrecognized selector sent to instance 
```

它实际上变得比这更奇怪。如果我单步执行 +(void) 初始化，我会看到元素开始为 nil，然后按预期设置为 NSMutableDictionary。但是，即使在创建该实例之后，对 [elements valueForKey: [any NSString]] 的任何调用都会导致相同的错误，即“NSCFString encodeBytes”不是可识别的选择器。

（编辑/已解决）：调试器实际上并没有抱怨代码 - 而是断点：关于无法找到以前放置在那里的断点的东西。删除 Xcode 的项目断点列表使一切变得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:16:22.990

调试器实际上并没有在抱怨代码——而是在抱怨断点：关于无法找到之前放置在那里的断点的事情。删除 Xcode 的项目断点列表使一切变得更好。

# telerik-grid - Telerik 条件子网格

> ID：14452714
> 
> 赞同：0
> 
> 时间：2013-01-22T06:21:06.553
> 
> 标签：telerik-grid, telerik-mvc

我有 Telerik MVC 层次结构网格。我需要有条件地为主网格制作子网格。我尝试了很多选择，但没有任何效果。我可以为子网格提供**If**条件吗？请提供一种我可以使用它的方法。

**查看代码**

```
 .DetailView(details => details.ClientTemplate("<# if (CustomerID > 0) { #>" // I tried like this. but showing **) expected **
      Html.Telerik().Grid<Vibrant.Areas.Acquisition.Models.PoDetails>()
                                .Name("Details<#=Id#>").DataKeys(keys => keys.Add(c => c.Id)).ClientEvents(cli => cli.OnDelete("DeletePoDetails").OnLoad("SetFilterPosition").OnRowDataBound("onRowData"))
                                .Columns(columns =>
                                {
                                    columns.Bound(o => o.SNo).Width(27).Title("S.No").ClientTemplate(Html.ActionLink("<#=SNo#>", "Edit_PoDetails", "Porders", new { Id = "<#=Id#>" }, null).ToHtmlString().Replace("id", "\\#=Id\\#")); ;
                                    columns.Bound(o => o.Title).Width(110);
                                    columns.Bound(o => o.UnitPrice).Width(45).Title("Unit Price");
                                    columns.Bound(o => o.Copies).Width(30);
                                    columns.Bound(o => o.Account).Width(40);
                                    columns.Bound(o => o.Status).Width(40);

                                    columns.Command(commands =>
                                    {
                                        commands.Delete();
                                    }).Width(60).Title("Action");
                                })
                                .DataBinding(dataBinding => dataBinding.Ajax()
                                    .Select("HierarchyBinding_PoDetails", "Porders", new { Id = "<#= Id #>" }).Delete("Hierarchy_Delete", "PoDetails", new { Id = "<#=Id#>" }))
                                .Pageable()
                                .Sortable()
                                .Filterable()
                                .Groupable()
                                .ToHtmlString()
                               "<# } #> " )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:50:00.987

实际上，您已经非常接近成功了，我尝试了以下方法，并且在我这边运行良好。仍然不确定差异在哪里。

```
.DetailView(dv => dv.ClientTemplate("<# if(PersonID%2==0) { #>" + Html.Telerik().DatePicker().Name("dp<#=PersonID#>").ToHtmlString() + "<# }#>")) 
```

# ota - 如何从 Java 应用程序访问 HP QC(Quality Center 10.0)

> ID：14452720
> 
> 赞同：0
> 
> 时间：2013-01-22T06:21:52.760
> 
> 标签：ota, hp-quality-center

我正在研究 java 应用程序，我想从我的 java 应用程序访问 HP QC(10) ALM，以便我可以从 HP QC 访问所有测试集文件夹、测试集和测试。除了 REST API 之外的 API 是什么，因为 REST API 不支持 QC 10，有没有人知道相同的完整教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T04:43:15.443

otaclient9-2 和 com4j 将完成这项工作。网络上有很好的示例。

# php - 更改 Joomla 数据库

> ID：14452721
> 
> 赞同：1
> 
> 时间：2013-01-22T06:22:06.257
> 
> 标签：php, mysql, joomla, joomla2.5, joomla3.0

我是 Joomla 的新手，我需要知道：

*   如果我更改另一个人的默认 joomla 安装数据库会怎样？

*   该数据库中存储了什么？

*   我可以根据自己的需要使用自己的数据库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T06:25:56.270

```
What happen if i change the default joomla installation database for another one? 
```

Joomla 将安装到给定的数据库中。没有其他的。如果你在安装 Joomla 之后更改数据库，它是行不通的。Joomla 有一个独特的结构化数据库。

```
What is stored in that database? 
```

运行 Joomla CMS 所需的数据。组件、插件、模块数据也将存储在那里。

```
Could I use my own database according to my need ? 
```

是的，你可以对你创建的表做任何你喜欢的事情。改变核心不是一个好主意。

你为什么不自己试试看呢？如果您有任何具体问题，请告诉我。这太板了，无法在这里解释。

阅读 Joomla 文档并遵循一些教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:30:08.477

如果您将数据库更改为另一个，您的 Joomla 站点很可能无法工作，因为 Joomla 具有相当特定的数据库结构。您在 Joomla 网站上看到的大部分数据都存储在数据库中，例如文章、模块位置、扩展名、用户详细信息等。

您可以使用自己的数据库，但由于您是 Joomla 的新手，请查看文档站点并了解 Joomla 的实际工作方式。很多人喜欢将 Joomla 库用于他们的手写网站，并且有很多关于如何导入它的教程。

# sql - 链接服务器连接和安全问题

> ID：14452723
> 
> 赞同：1
> 
> 时间：2013-01-22T06:22:13.760
> 
> 标签：sql, sql-server, sql-server-2008, tsql, linked-server

我正在尝试实现链接服务器。但我在建立与我的两台服务器**SRV-AXDEV**和**SRV-APP1的连接时遇到问题**

我已经在 SRV-APP1 下创建了链接服务器 SRV-AXDEV，配置如下：

> 链接服务器：SRV-AXDEV
> 
> 服务器类型：SQL Server
> 
> 安全性：使用此安全上下文（使用我连接到 SRV-AXDEV 时使用的登录凭据）
> 
> 排序规则兼容：False
> 
> 数据访问：真
> 
> RPC：真
> 
> RPC 输出：真
> 
> 使用远程整理：真
> 
> 排序规则名称：
> 
> 连接超时：0
> 
> 查询超时：0
> 
> 经销商：假
> 
> 发布者：假
> 
> 订户：假
> 
> 惰性模式违规：错误
> 
> 启用分布式事务的推广：True

这是我在 SRV-AXDEV 中的数据库列表：

[图 4](http://i1159.photobucket.com/albums/p631/enjei26/05_zpsfdb97045.png)

但是当我尝试运行这个查询时：

```
Select * from [SRV-AXDEV].[GFII_AX2009_DB_LIVE].[dbo].[InventTable] 
```

我不断收到此错误：

> 消息 7314，级别 16，状态 1，行 1 链接服务器“SRV-AXDEV”的 OLE DB 提供程序“SQLNCLI10”不包含表“GFII_AX2009_DB_LIVE”.“dbo”。“InventTable”。该表不存在或当前用户对该表没有权限。

我希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:58:01.477

已声明的属性是完美的。检查以下步骤

1.  检查表是否存在于特定的链接服务器数据库上。
2.  将表的架构检查为“DBO”
3.  检查链接服务器的安全登录用户是否具有访问表所需的权限（最好使用 SA 登录）

# eclipse - 无法在 Ecipe Helios 上安装 EGit 插件

> ID：14452724
> 
> 赞同：8
> 
> 时间：2013-01-22T06:22:17.087
> 
> 标签：eclipse, git, egit

我无法在我的 Eclipse（**Helios 版本 2**）中为 Git (EGit) 安装 Eclipse 插件。

尝试通过 Eclipse 中的 url 安装 EGit 安装新软件：http: [//download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)

我收到以下错误：

**无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Eclipse EGit 2.2.0.201212191850-r (org.eclipse.egit.feature.group 2.2.0.201212191850-r) 缺少要求：Eclipse EGit 2.2.0.201212191850-r (org.eclipse.egit.feature.group 2.2.0.201212191850 -r) 需要 'org.eclipse.core.runtime [3.7.0,4.0.0)' 但找不到**

我已尝试但未能安装上述依赖项。所以想知道 Helios 是否支持 Git。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T10:24:05.793

EGit 2.2 requires Eclipse 3.7 or greater, see ["What versions of Eclipse does EGit target?" in the FAQ](http://wiki.eclipse.org/EGit/FAQ#What_versions_of_Eclipse_does_EGit_target.3F).

If you don't want to upgrade to Eclipse 3.7 or greater yet, you can still install EGit 2.1 from the following update site:

[http://download.eclipse.org/egit/updates-2.1](http://download.eclipse.org/egit/updates-2.1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T02:26:45.963

我用Helios的时候也遇到了同样的问题，由于版本不匹配，可以尝试通过1.0版本安装：

`http://download.eclipse.org/egit/updates-1.0`

有用！

PS：Indigo 可以配合使用`http://download.eclipse.org/egit/updates-1.3`

充实自己...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T07:11:52.093

尝试通过 Helios 更新站点安装它：

```
http://download.eclipse.org/releases/helios/ 
```

它应该引用包括 EGit 在内的所有插件。

话虽如此，[robinst](https://stackoverflow.com/users/305973/robinst)的[回答](https://stackoverflow.com/a/14456300/6309)（赞成）指出了对 Indigo (3.7) 的依赖，这可能意味着 Helios (3.6) 不受支持。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-04-07T07:31:50.847

它对我有用。操作系统：Ubuntu Eclipse heliose

[http://download.eclipse.org/egit/updates-1.0](http://download.eclipse.org/egit/updates-1.0)

# javascript - 在 css 中动态更改内容

> ID：14452725
> 
> 赞同：0
> 
> 时间：2013-01-22T06:22:21.670
> 
> 标签：javascript, css

我设置了溢出：滚动；因此，如果内容大小增加，它会增加滚动。相反，我需要减少内容的百分比，以便它完全在框中。我可以在css中设置任何变量吗？还有其他方法可以实现吗？

PS我是CSS的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:34:26.620

正如@Kile 所说，CSS 不能测量和计算，只能声明规则。您必须使用 javascript 或服务器端来计算要减少的内容百分比。也许如果您添加代码或屏幕截图，我们可以为您提供更多帮助

一旦你可以做的就是使用`overflow:hidden`，但这并不会减少内容，它只会隐藏比父 div 更大的文本的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:47:00.453

CSS 无法减少超出的内容。所以你将不得不使用Javascript。否则，如果您想隐藏超出的内容。您可以通过提供溢出来做到这一点：隐藏；这将隐藏您超出的内容。这意味着它将仅显示可以进入该特定 div 的内容。因此，通过不以其他方式显示超出的内容，它会减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:16:14.153

你为什么不试试“溢出：自动；” 这将在需要时添加滚动，否则不会。

顺便问一下你在问什么？？？

无论没有滚动条有多大，您是否试图将所有内容都放入框内？

如果这就是您要查找的内容，那么您需要根据要使用 javascript 插入框中的内容来更改字体大小，并在运行时更改大小。

# android - 如何在 python 脚本（MonkeyRunner 脚本）中设置访问 WIFI API 的权限

> ID：14452727
> 
> 赞同：0
> 
> 时间：2013-01-22T06:22:27.463
> 
> 标签：android, python, monkeyrunner

我正在编写`MonkeyRunner`检查wifi状态并启用它的脚本。

为此，我正在导入 android API 及其类。下面是代码片段

```
from android.net.wifi import WifiManager 
```

全局状态

```
state = WifiManager.isWifiEnabled() 
```

打印状态

执行时出现错误：

```
state = WifiManager.isWifiEnabled()

TypeError: isWifiEnabled(): expected 1 args; got 0 
```

然后我意识到我需要权限才能进行wifi操作，并`AndroidManifest.XML`在他们使用过的一些文件中找到

```
user-permission android:name="android.permission.ACCESS_WIFI_STATE" 
```

我的疑问是我在真实设备上运行脚本，我该如何使用

```
user-permission android:name="android.permission.ACCESS_WIFI_STATE" 
```

在我的`MonkeyRunner`脚本文件中。

有没有办法`android.Manifest.permission`在 python 脚本文件中使用类来设置权限。

提前致谢

苏伦德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:04:22.193

不回答您的问题，但您的目标有效。

如果您只想检查 wifi 是否启用，您可以使用以下代码：-

```
import re
import os
def is_wifi_enabled(deviceid):
    wifistate = os.popen('adb -s %s shell getprop wlan.driver.status'%deviceid).read()
    wifion=re.search(r'ok',wifistate)
    return wifion
 is_wifi_enabled(deviceid) 
```

我不确定所有的安卓设备，我在一些设备上试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:56:56.380

`android.jar`是**Android SDK**的一部分，仅包含 SDK 类的存根实现，而不是在真实设备上找到的实现。

此外，如果我们暂时假设它包含真正的实现，那么您将无法执行您想要的操作，因为您的`monkeyrunner`脚本在您的开发计算机上运行，​​而不是在设备上，所以如果您有幸找到`WifiManager`一个作品您将更改您的主机 Wifi 设置。

# xml - XML DTD 的 ID 和 IDREF 指针

> ID：14452731
> 
> 赞同：1
> 
> 时间：2013-01-22T06:22:48.197
> 
> 标签：xml, dtd, idref

我收到一个错误，我似乎找不到太多文档。

这是 XML 的一个片段。

```
<Department Code="LING" Chair="BL">
  <Title>Linguistics</Title>
  <Course Number="LING180" Prerequisites="CS107 CS109" Instructors="DJ" Enrollment="60">
    <Title>From Languages to Information</Title>
    <Description>
      Natural language processing. Cross-listed as
      <Courseref Number="CS124"/>
    </Description>
  </Course>
  <Lecturer InstrID="DJ">
    <First_Name>Dan</First_Name>
    <Middle_Init>D.</Middle_Init>
    <Last_Name>Jurafsky</Last_Name>
  </Lecturer>
  <Professor InstrID="BL">
    <First_Name>Beth</First_Name>
    <Last_Name>Levin</Last_Name>
  </Professor>
  <Lecturer InstrID="FZ">
    <First_Name>Frank</First_Name>
    <Last_Name>Zoidberg</Last_Name>
  </Lecturer>
</Department> 
```

这是我的 DTD

```
<!ELEMENT Course_Catalog (Department*)>
<!ELEMENT Department (Title, Course+, Professor+, Lecturer?)>
<!ATTLIST Department Code CDATA #REQUIRED
  Chair IDREFS #REQUIRED>
<!ELEMENT Course (Title, Description)>
<!ATTLIST Course Number ID #REQUIRED
  Prerequisites IDREFS #IMPLIED
  Instructors IDREFS #REQUIRED
  Enrollment CDATA #IMPLIED>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Description (#PCDATA | Courseref)*>
<!ELEMENT Courseref EMPTY>
<!ELEMENT Courseref Course IDREF #REQUIRED>
<!ELEMENT Professor (First_Name, Middle_Initial?, Last_Name)>
<!ATTLIST Professor InstrID ID #REQUIRED>
<!ELEMENT Lecturer (First_Name, Middle_Initial?, Last_Name)>
<!ATTLIST Lecturer InstrID ID #REQUIRED>
<!ELEMENT First_Name (#PCDATA)>
<!ELEMENT Middle_Initial (#PCDATA)>
<!ELEMENT Last_Name (#PCDATA)> 
```

我得到的错误有两个相互关联的错误，第一个是

```
 parser error : xmlParseElementDecl: 'EMPTY', 'ANY' or '(' expected 
```

和下一个

```
 parser error : Content error in the external subset 
```

这有点模糊，但我认为这与 ID 和 IDREFS 有关。如您所见，讲师和教授都具有相同的 ID 指针引用。Department 属性 Chair 和 Course 属性 Instructors 都指向 InstrID。和 Course ELEMENT 都通过 Prerequisites 引用其他 Courses 并在 Description 中通过 Courseref 引用。正如你所看到的，有很多东西被传递。即使我通过 DTD 知道，只要那里有东西，你就不能真正限制引用的 ID。

但我无法弄清楚这个错误是我将它们放置在错误的顺序还是我的 ID-IDREFS 错误？任何帮助都会很棒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:28:01.507

```
<!ELEMENT Courseref Course IDREF #REQUIRED> 
```

这应该是 ATTLIST 而不是 ELEMENT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T01:09:53.643

我在做同样的练习，最后我完成了..我可以在单一视图中看到一个错误，这是：

```
 Department (Title, Course+, Professor+, Lecturer?) 
```

我是这样做的：

```
Department (Title,Course*,(Professor|Lecturer)*) 
```

因为你可以有：一个头衔（1），一个课程（0..n），教授或讲师（0..n交替）

# heroku - Heroku 工具带不适用于 rake 任务

> ID：14452734
> 
> 赞同：1
> 
> 时间：2013-01-22T06:22:56.410
> 
> 标签：heroku, rake, web-deployment, heroku-toolbelt

我已经切换到在命令行上使用 heroku toolbelt 没有问题。但是，我的 rake 任务现在失败了：

```
=> Running "heroku run rake --trace db:migrate --app MYAPPNAME"
/Users/USERNAME/.rvm/gems/ruby-1.9.2-p290@global/gems/bundler-1.0.21/lib/bundler/rubygems_integration.rb:143:in `block in replace_gem': heroku is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
    from /Users/USERNAME/.rvm/gems/ruby-1.9.2-p290/bin/heroku:18:in `<main>'
rake aborted!
ERROR running "heroku run rake --trace db:migrate --app MYAPPNAME"
/Users/USERNAME/Code/luxr/lib/shell.rb:35:in `execute'
/Users/USERNAME/Code/luxr/lib/tasks/deploy_tasks.rake:22:in `block (2 levels) in <top (required)>'
Tasks: TOP => deploy:production
(See full trace by running task with --trace) 
```

`heroku run rake --trace db:migrate --app MYAPPNAME`直接在命令行中键入相同的命令没有问题。

想法？

更新：我安装了 heroku toolbelt，但我注意到它在 ruby​​ 1.9.3 上，我的应用程序是 1.9.2p290，这是导致问题的原因吗？

```
$ heroku version
heroku-toolbelt/2.34.0 (x86_64-darwin10.8.0) ruby/1.9.3

$ ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.2.0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:58:12.703

运行 heroku 命令`Bundler.with_clean_env`对我有用。如果您要运行的 rake 任务被调用`cache_flush`，请将您对 heroku toolbelt 的调用包装为`Bundler.with_clean_env`

```
task :cache_flush  do
     Bundler.with_clean_env { p `heroku --help` }
end 
```

# mysql - mySQL 获得排除的数字范围

> ID：14452736
> 
> 赞同：1
> 
> 时间：2013-01-22T06:23:13.280
> 
> 标签：mysql, numbers, range

我尽力解释这一点，我有我的第一张桌子，我已经在两列 COL1、COL2 中输入了数字。在 COL1 中，我输入了数字集的起始范围，而在 COL2 中，我输入了数字的终点。这样我就有了这些数据。

```
COL1     COL2
  1      100
101      200
201      300 
```

上面的数据读取1到100（1-100），101到200（101-200），以此类推……

现在我有第二个表，其中也包含一组范围数字。

```
COL1     COL2
  1       50
 70      100
150      200
201      210
250      300 
```

我想知道的是是否可以获得第二个表中未编码的数字范围。就像它应该在这个结果中一样。

结果：

```
COL1     COL2
 51       69
101      149
211      249 
```

结果显示了不包含在第二个表中的数字范围，因为它包含在第一个表中的数字范围内，所以它应该存在。

我不知道单独使用 mySQL 是否可行，但任何建议都将不胜感激。

# django - Django如何在数据库中保存排除的文件

> ID：14452742
> 
> 赞同：0
> 
> 时间：2013-01-22T06:23:48.143
> 
> 标签：django

模型.py

```
class KEBReading(models.Model):
    #id = models.AutoField(primary_key=True,db_column='kr_id')
    date=models.DateField()
    time=models.TimeField()
    truepower_reading=models.DecimalField(max_digits=6,
    decimal_places=2,blank=False,null=False)
    apparentpower_reading=models.DecimalField(max_digits=6,
    decimal_places=2,blank=False,null=False)
    truepower_consumed=models.DecimalField(max_digits=6, decimal_places=2)
    voltage_reading=models.IntegerField(blank=False,null=False)
    powerfactor=models.DecimalField(max_digits=3,decimal_places=2) 
```

表格.py

```
class KEBReading_form(forms.ModelForm):
    class Meta:
        model=KEBReading

        exclude=("truepower_consumed","powerfactor")
        widgets = {

               "date" : forms.widgets.DateInput(format="%d/%m/%Y"),
               "time" : forms.widgets.TimeInput(format="%H:%M")
               } 
```

视图.py

```
def KEBReading1(request):
    if request.method == "POST":

        form = KEBReading_form(request.POST)
        if form.is_valid():
            prevdate=KEBReading.objects.latest("date")

            print prevdate.date
            print prevdate.time
        # q1 = KEBReading.objects.get(datetime.date.today()-datetime.timedelta(0))

            kr_truepower_reading = form.cleaned_data["truepower_reading"]
            kr_apparentpower_reading = form.cleaned_data["apparentpower_reading"]
            truepower_consumed1=kr_truepower_reading-prevdate.truepower_reading
            powerfactor1=kr_truepower_reading-                                           prevdate.truepower_reading/(kr_apparentpower_reading-prevdate.apparentpower_reading)

            form.save()
            KEBReading.objects.filter().values("date","time","truepower_reading",
            "apparentpower_reading","truepower_consumed","voltage","powerfactor")
            q2=KEBReading.objects.latest("date")

            context={'KEBReading_form':form,'q2':q2}
            return                  render_to_response('keb.html',context,context_instance=RequestContext(request))

        else:
            form = KEBReading_form()

            return render_to_response('keb.html',{'KEBReading_form':form},context_instance=RequestContext(request)) 
```

我想将 truepower_consumed aftr 计算保存在数据库中。但它给了我一个错误 truepower_consumed 列不能为空。我在表格中排除了 truepower_consumed。但在数据库中我需要保存该字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:30:13.387

您需要保存表单`commit=False`并将适当的值分配给必填字段，然后再次保存*对象*。

例子：

```
def KEBReading1(request):
    if request.method == "POST":
    ....
    #your code till save
    obj = form.save(commit=False)
    #assing your values
    obj.truepower_consumed = truepower_consumed1
    obj.powerfactor = powerfactor1
    obj.save() #save 
```

更多详细信息，请参阅[使用表单上的字段子集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:31:51.400

您应该使用`form.save(commit=False)`而不是`form.save()`然后计算剩下的两个字段。

请查看以下代码骨架：

```
## replace form.save() with following lines
obj = form.save(commit=False)
## Assign values to those 2 fields after calculation
## you can add a method on your model to do this
obj.calculate()

## those two values were assigned after call to calculate
## now you can save your obj
obj.save()

## Method to be added in your model
def calculate(self):
    ## Calculate truepower_consumed
    ## Calculate powerfactor
    self.truepower_consumed = <calculated truepower consumed>
    self.powerfactor = <calculated power factor> 
```

# javascript - d3 csv解析器进度值

> ID：14452747
> 
> 赞同：2
> 
> 时间：2013-01-22T06:24:14.883
> 
> 标签：javascript, csv, load, d3.js, progress

因此，我尝试使用 d3 在 javascript 中加载 csv 文件，并尝试使用进度条来显示加载时的进度。这就是我所拥有的：

```
d3.csv("my.csv",function(data){
        //do stuff with data
    }).on("progress", function(p){
        //update progress bar
        console.log(d3.event.loaded);
    }); 
```

这就是它输出的全部内容：

```
13248560 
```

这是文件中的总字节数。我想知道如何获取它已加载的值，以便我的进度条可以正确加载。有人知道如何完成这项任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:23:44.680

I think that it is normal that the event `d3.event.loaded` returns the total size. Did you try the following to get the progress from the variable `p` in the function on `"progress"`?

Then to get the actual progress, you can use the following question: [How to get progress from XMLHttpRequest](https://stackoverflow.com/questions/76976/how-to-get-progress-from-xmlhttprequest)

The final result should look like something like this:

```
d3.csv("my.csv",function(data){
        //do stuff with data
    }).on("progress", function(event){
        //update progress bar
        if (d3.event.lengthComputable) {
          var percentComplete = Math.round(d3.event.loaded * 100 / d3.event.total);
          console.log(percentComplete);
       }
    }
});

```

# .net - 哪些库可用于自检第三方 .NET 应用程序

> ID：14452748
> 
> 赞同：1
> 
> 时间：2013-01-22T06:24:18.220
> 
> 标签：.net, clr, system.reflection

我有一个应用程序需要自省正在运行的第三方 .NET 应用程序——我没有它的来源。我需要能够阅读屏幕上的表单、控件及其在屏幕上的相对位置。

有哪些库或技术（Microsoft 或其他）可用？

我需要的：

*   *从我将编写的应用程序中以编程*方式执行此操作（即我对 Visual Studio 插件不感兴趣）
*   支持所有（或尽可能多的）CLR 应用程序
*   能够找到所有打开的屏幕/表格
*   对于给定的屏幕/表单，发现所有控件
*   对于控件，请读取以下属性：

    *   它是屏幕上的值（即输入字段中的文本），
    *   字体大小、颜色和样式，
    *   表格上的位置
    *   任何标签
    *   控件的父面板/组
*   检测屏幕焦点在哪里

我不需要的东西（但除了作为额外价值之外）：

*   发现其他对象或恢复运行时对象图
*   反编译或以其他方式获取第三方源
*   发现应用程序的类层次结构
*   深入了解应用程序运行时状态的其他方面
*   内省本机 C++ 应用程序
*   从另一台计算机/VM 内省应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:30:26.640

听起来您正在尝试使其他程序自动化。好消息是微软已经为[UI 自动化](http://msdn.microsoft.com/en-us/library/ms753388.aspx)制作了一个完整的库：

> Microsoft UI 自动化是 Microsoft Windows 的新辅助功能框架。它通过提供对有关用户界面 (UI) 信息的编程访问来满足辅助技术产品和自动化测试框架的需求。此外，UI 自动化使控制和应用程序开发人员能够使他们的产品易于访问。

# ruby-on-rails - as_json 选项在视图中不起作用

> ID：14452750
> 
> 赞同：0
> 
> 时间：2013-01-22T06:24:20.730
> 
> 标签：ruby-on-rails, json

`as_json()`或在视图中是否`to_json()`与选项一起使用？

```
<%- @profiles.each { |p| %>
<%= p.as_json(:only => [:name])  %>
<%- } %> 
```

我永远无法让它工作，它总是将整个对象作为 json 返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:07:01.603

我也在使用 Rails 3.2.9，我已将您的代码复制并粘贴到我的用户视图中，它工作得很好。

尝试使用生成的配置文件脚手架创建一个新应用程序，以查看它是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:57:38.357

如果 <%= p.as_json(:only => [:name]) %> 返回 {"profile"=>{"name"=>"profile_name"}}，您可以替换为：

```
<%- @profiles.each { |p| %>
  <%= p.as_json(:only => [:name])["profile"]["name"]  %>
<%- } %> 
```

# gruntjs - Grunt 多任务在构建时抛出 EISDIR 错误

> ID：14452751
> 
> 赞同：6
> 
> 时间：2013-01-22T06:24:23.770
> 
> 标签：gruntjs, uglifyjs

我正在尝试设置 grunt 以缩小 src 目录中的许多 js 文件并将它们复制到构建目录。按照[grunt task documentation](https://github.com/gruntjs/grunt/wiki/Configuring-tasks)，我相信下面的配置应该可以工作。

```
uglify: {
    dist: {
      files: [
        {
          expand: true,     // Enable dynamic expansion.
          cwd: 'src/js/',   // Src matches are relative to this path.
          src: ['**/?.js'], // Actual pattern(s) to match.
          dest: 'build/minified/',   // Destination path prefix.
          ext: '.min.js'    // Dest filepaths will have this extension.
        }
      ]
    }
  } 
```

当我运行 grunt 我收到消息

> 运行“uglify:dist”（uglify）任务警告：无法写入“build/minified”文件（错误代码：EISDIR）。使用 --force 继续。

如果我将定义切换为使用手动文件路径，它工作正常。文档不正确吗？还是我用错了？

我正在运行 grunt v0.4.0rc2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:15:35.977

更新 grunt 并替换`src: ['**/?.js']`为`src: ['**/*.js']`

有关详细信息，请参阅通[配模式](http://gruntjs.com/configuring-tasks#globbing-patterns)指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T15:04:47.277

有一个类似的问题，我在加载结构文件时遇到问题：

`bower_components/Chart.js/Chart.min.js`

显然 grunt 与其中包含`.js`的目录作斗争。我发现这个解决方案解决了我的问题：[https ://github.com/cbas/grunt-rev/issues/29](https://github.com/cbas/grunt-rev/issues/29)

基本上，您明确删除了 rev 部分中的问题目录。

即，这有效：

```
rev: {
        files: {
            src: [
                'dist/**/*.js',
                '!dist/bower_components/Chart.js',
            ]
        }
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:57:33.563

修改 node_modules/grunt-contrib-copy/tasks/copy.js 中的 detectDestType 函数如下：

```
var detectDestType = function(dest) {
    if (grunt.util._.endsWith(dest, path.sep)) {
      return 'directory';
    } else {
      return 'file';
    }
  }; 
```

它应该解决问题。

# php - 无法从 Firefox 和 Chrome 中的 PHP 页面获取 XML 响应

> ID：14452757
> 
> 赞同：0
> 
> 时间：2013-01-22T06:24:41.337
> 
> 标签：php, ajax, html, xmlhttprequest, cross-domain

我的电脑上有一个本地 apache 2.2 服务器。我在我的系统上使用 PHP 5 和 MySQL 5.0。我在我的 MySQL 数据库中创建了一个名为 html5 的表，该表有一列和一行包含任意字符串。

我创建了一个名为 sample.php 的 PHP 页面，它连接到我的 MySQL 数据库并提取上表的信息并将其作为 XML 文件返回。

```
<?php   
    if(!$dbconnect = mysql_connect('localhost', 'root', 'password')) {
       echo "Connection failed to the host 'localhost'.";
       exit;
    } // if
    if (!mysql_select_db('mysampledb')) {
       echo "Cannot connect to database 'mysampledb'";
       exit;
    } // if

    $table_id = 'html5';
    $query = "SELECT * FROM $table_id";
    $dbresult = mysql_query($query, $dbconnect);

    // create a new XML document
    $doc = new DomDocument('1.0');

    // create root node
    $root = $doc->createElement('note');
    $root = $doc->appendChild($root);

    // process one row at a time
    while($row = mysql_fetch_assoc($dbresult))
    {
        // add node for each row
        $occ = $doc->createElement($table_id);
        $occ = $root->appendChild($occ);

        // add a child node for each field
        foreach ($row as $fieldname => $fieldvalue)
        {
            //create child element in xml file
            $child = $doc->createElement($fieldname);
            $child = $occ->appendChild($child);

            //add database content into the child element created above
            $value = $doc->createTextNode($fieldvalue);
            $value = $child->appendChild($value);

        }// foreach
    }// while

    // get completed xml document
    $xml_string = $doc->saveXML();
    echo $xml_string;
?> 
```

我*在一个单独的目录*中创建了一个 HTML5 页面，该页面通过单击按钮向上述 PHP 页面发出简单请求，并尝试获取响应并将其显示为警报。

这是 HTML5 页面：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="jquery.js"></script>
    </head>
    <body>          
        <button onclick="myFunc()">Click me</button>
        <script type="text/javascript">
            function myFunc()
            {               
                $.ajax(
                    {
                        url:"http://localhost/sample.php"+"?randVar="+Math.random(),
                        type: "GET",
                        dataType: "text/xml",
                        success:function(result)
                        {
                            alert(result);
                        }
                    });
            }
        </script>
    </body>
</html> 
```

但是当我运行这个页面时，我只能在 IE9 中得到响应。在 Firefox 和 Chrome 中，我看到**一个空警报**。

在尝试这种方式之前，我也尝试过使用 XMLHttpRequest 对象，但即使这样，我也只能在 IE9 上得到响应。

```
function myFunc()
{
    var xmlhttp, xmlDoc;
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    try
    {                   
        xmlhttp.open("GET","http://localhost/sample.php"+"?randVar="+Math.random(),false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseText;
    }
    catch(e)
    {
        alert(e.message);
    }               
    alert(xmlDoc);
} 
```

在 Firefox 中，catch 块返回“失败”，在 Chrome 中，警报显示**XMLHttpRequest Exception 101**。

PS： -

1.  将 HTML 文件保存在与 sample.php 页面相同的 htdocs 文件夹中可以解决问题，但在服务器是不同网络上的单独计算机的现实世界中这是不可能的。所以我不是在寻找这个建议。

2.  在 ajax 调用中，使 async="true" 或 "false" 没有任何区别。

这是 IE9 中的响应：- ![提示信息](../Images/9a5d98eab62bfc2d3909a74578daa818.png)

萤火虫：- ![萤火虫](../Images/a182db430a36f44c44283f994adec11a.png)

谁能给我一个解决方案？我非常需要一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:42:23.977

在相当多的资源之后，我找到了这个解决方案：

添加**header('Access-Control-Allow-Origin: *');** 在 PHP 文件中很好地解决了我的问题。

感谢大家的努力！

礼貌：[Access-Control-Allow-Origin 不允许来源](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:32:50.623

将以下标头放在您的 php 文件中：

```
header( 'Content-Type: text/xml, charset=utf-8' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:49:22.170

更改数据类型并尝试。

它仅支持：`dataType (default: Intelligent Guess (xml, json, script, or html))`

```
$.ajax(
                {
                    url:"http://localhost/sample.php"+"?randVar="+Math.random(),
                    type: "GET",
                    dataType: "xml",
                    success:function(result)
                    {
                        alert(result);
                    }
                }); 
```

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# jqgrid - Jqgrid 继续加载

> ID：14452762
> 
> 赞同：0
> 
> 时间：2013-01-22T06:24:59.823
> 
> 标签：jqgrid

我`jqGrid`的显示了，但它没有显示数据我检查了 json 源，没关系

```
 $(document).ready(function () {
    $("#grid").jqGrid(
    {
        url: 'GetDepartment',
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Department ID', 'Department Name'],
        colModel: [
            { name: 'DepartmentID', index: 'DepartmentID' },
            { name: 'DepartmentName', index: 'DepartmentName'}
        ],
        pager: $("#GridPager"),
        rowNum: 2,
        rowList: [5, 10, 15, 20],
        width: 'auto',
        sortname: 'DepartmentID',
        sortorder: "ASC"
    })
    $("#grid").jqGrid('navGrid', '#GridPager', { add: false, edit: false, del: false, search: false})
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:30:18.073

我认为您缺少 jsonReader，请将以下代码添加到您的网格中

```
 jsonReader: {
            repeatitems: false
            id: "DepartmentID"

        }, 
```

查看 wiki 以了解预期的 json 格式

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)

所以在你的情况下，json响应应该是

```
{  "rows":[{"DepartmentID":2,"DepartmentName":"Asset Mgmt Group "},{"DepartmentID":16,"DepartmentName":"Business Solutions Group"},{"DepartmentID":8,"DepartmentName":"CBMG"}] } 
```

# html - 如何正确绘制椭圆[KineticJs]

> ID：14452763
> 
> 赞同：0
> 
> 时间：2013-01-22T06:25:00.527
> 
> 标签：html, javascript, javascript-framework, kineticjs

我如何创建一个可以根据鼠标坐标创建椭圆的绘图画布？这是我在 jsfiddle 上的代码（我还是新手）：

[http://jsfiddle.net/thekucays/DRfph/](http://jsfiddle.net/thekucays/DRfph/)

这是我绘制椭圆的代码（第 59 行）：

```
var x, y, width, height;
        //var rect;

        //Math.min untuk mencari nilai terkecil dari 2 parameternya
        x = Math.min(event.clientX, lastX);
        y = Math.min(event.clientY, lastY);

        //Math.abs buat bikin nilai negatif jadi positif
        width = event.clientX - lastX;
        height = event.clientY - lastY;

        if(rect_drawed == 0){
            rect = new Kinetic.Ellipse({
                x: x,
                y: y,
                radius:{
                    x: width,
                    y: height
                },
                stroke: 'black',
                strokeWidth: 4,
                fill: 'blue',
                name: 'rect'+rect_counter
            });
            layer.add(rect);
            layer.draw();
            rect_drawed = 1;
            //stage.add(rect);

            /*rect.on('click', function(){
                rect.setFill('RED');
            });*/
        }
        rect.setAttrs({
            x: width / 2,
            y: height / 2
        });
        layer.draw(); 
```

所以，当我执行代码时，它会导致一个错误..chrome的控制台说：未捕获的错误：INDEX_SIZE_ERR: DOM Exception 1 on kinetic.js:29

我的代码出了什么问题？

此致，

卢基·R·罗皮斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:31:43.873

看着你的代码，

```
 width = event.clientX - lastX;
    height = event.clientY - lastY; 
```

您允许宽度和高度为负数，这会引发 DOM 异常。

做了：

```
 width = Math.abs(event.clientX - lastX);
    height = Math.abs(event.clientY - lastY); 
```

[http://jsfiddle.net/HSdgT/3/](http://jsfiddle.net/HSdgT/3/)此链接复制了您的错误。

[http://jsfiddle.net/HSdgT/4/](http://jsfiddle.net/HSdgT/4/)此链接与错误消失。

# javascript - JavaScript - 构造函数调用如何知道如何将“自我”变量添加到返回的对象？

> ID：14452764
> 
> 赞同：1
> 
> 时间：2013-01-22T06:25:07.510
> 
> 标签：javascript

在 JavaScript 中使用构造函数调用时，我读到函数中的 this 变量/关键字将绑定到新对象，并将返回一个具有所有绑定“this”值的对象。

例如：

```
function Person() {
  this.name = "bob";
  this.age = 33;
}

var person = new Person(); // person object with name property of "bob" and age property of 33 
```

如果我做这样的事情，同样的结果会发生：

```
function Person() {
  var localVar = "test",
      fake = "fake";
  this.name = "bob";
  this.age = 33;
}

    var person = new Person(); // person object with name property of "bob" and age property of 33 regardless of the local variables declared inside 
```

但是，如果我这样做，在 self 上声明的变量/属性将在对象中返回

```
function Person() {
  var self = this;
  self.phone = "123-123-1222";
  self.career = "programmer";
  this.name = "bob";
  this.age = 33;
}

    var person = new Person(); // person object with name property of "bob" and age property of 33, phone of "123-123-1222" and career of "programmer" 
```

在最后一个示例中，解释器如何知道返回所有四个属性，即使其中两个绑定到 this 的局部变量而不是实际的“this”关键字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:28:50.460

在您的最后一个示例中，`self`只是对`this`. 它们是可互换的，因为它们指向同一个对象：

```
function foo() {
    var self = this;
    var that = self;

    console.log(self === this);  // true
    console.log(that === this);  // true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:29:06.977

因为在运行时它实际上变成了

```
function Person() {
  this.phone = "123-123-1222";
  this.career = "programmer";
  this.name = "bob";
  this.age = 33;
} 
```

因为 'self' 只会被 'this' 取代。

# c - 通过拷贝返回一个结构体，它封装了一个指针

> ID：14452766
> 
> 赞同：0
> 
> 时间：2013-01-22T06:25:17.163
> 
> 标签：c, memory-management, memory-leaks, heap-memory

假设我有以下内容：

```
typedef struct a_struct_s
{
     int* dynamic_pointer;
}
a_struct;

a_struct make_struct( int length )
{
     a_struct s;
     s.dynamic_pointer = calloc( sizeof( int ), length );
     // [check here to see if s.dynamic_pointer was allocated]

     return s;
} 
```

既然`make_struct()`会返回 struct 的副本，那么`s`被它封装的指针会不会泄漏内存而无法释放？此外，副本本身与动态分配是否有性能成本`s`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:27:01.957

不，即使你复制了指针，它仍然指向同一个地方，所以你可以释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:27:24.890

为什么会呢？指针本身不是分配的内存 - 如果您复制指针，它本身不会分配内存。如果您稍后调用`free()`它，它将被正确释放。即，此代码不会泄漏内存：

```
a_struct s = make_struct(10);
free(s.dynamic_pointer); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:53:32.677

no, its fine as you have it from that point of view however you may want to consider having another approach to allocating because returning a struct by value with a pointer to a memory block may not be so obvious that the caller needs to free a member in it.

one approach would be to make the whole struct allocated as well then have a function the free the struct

```
a_struct* alloc_struct( int length )
{
     a_struct s = calloc( 1, sizeof(a_struct) );
     s->dynamic_pointer = calloc( sizeof( int ), length );
     return s;
}

void free_struct( a_struct *p )
{
    if ( p != NULL )
    { 
      free( p->dynamic_pointer );
      free(p);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T06:27:22.820

不，只要函数的调用者调用`free()`结构指针成员，它就不会泄漏内存。

记住规则：
***调用时会发生内存泄漏`malloc`，`calloc`并且永远不要调用`free`相同的地址。只要你这样做，就没有内存泄漏。***

请注意，从函数返回动态分配的指针时，指定**所有权语义**非常重要。简而言之，您的接口应该明确提到在函数调用之后动态分配的指针成员归调用者所有。

> **既然`make_struct()`会返回 的副本，那么`struct s`被它封装的指针会不会泄漏内存而无法释放？**

是的，一个结构的副本被返回，但是一个**[浅拷贝](http://en.wikipedia.org/wiki/Object_copy#Shallow_copy)**。
基本上，这意味着返回的结构副本的指针成员指向的内存位置与 的结构指针成员指向的内存位置相同`s`。
由于两个指针都指向同一个地址，只要调用者调用`free`返回结构的指针成员，就没有泄漏。

> **副本本身与动态分配是否有性能成本`s`？**

动态分配总是成本高昂且更容易出错。尽可能少地使用它们，除非你真的需要它们，否则不要使用它们。

# android - 是什么导致 SQLite “整数溢出”异常？

> ID：14452770
> 
> 赞同：0
> 
> 时间：2013-01-22T06:25:34.033
> 
> 标签：android, android-sqlite, integer-overflow

我通过**ACRA**得到了以下堆栈跟踪。 ***Galaxy Note II，安卓 4.1.2：***

```
android.database.sqlite.SQLiteException: integer overflow (code 1)
at android.database.sqlite.SQLiteConnection.nativeExecuteForCursorWindow(Native Method)
at android.database.sqlite.SQLiteConnection.executeForCursorWindow(SQLiteConnection.java:968)
at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:836)
at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62)
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143)
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
at android.database.AbstractCursor.moveToNext(AbstractCursor.java:244)
:
My app's methods 
```

我以前从未见过这个异常——有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:29:26.670

它可能发生在您创建的数字大于整数允许的大小的情况下。发生这种情况的一种方法是，如果您使用的是 Sum 等聚合函数。如果你对太多东西求和，你最终可能会得到一个太大的数字，超出整数的大小。

更多信息可以在这里找到：[http ://www.sqlite.org/lang_aggfunc.html](http://www.sqlite.org/lang_aggfunc.html)

# google-chrome - 是否可以通过 Chrome 扩展中的上下文菜单项调用内容脚本方法？

> ID：14452777
> 
> 赞同：8
> 
> 时间：2013-01-22T06:26:23.923
> 
> 标签：google-chrome, google-chrome-extension, content-script

我正在尝试使用上下文菜单项来调用我用内容脚本编写的方法。
那可能吗？

正如我所尝试的那样，上下文菜单只能在后端做事。
例如

```
// A generic onclick callback function.
function genericOnClick(info, tab) {
console.log("item " + info.menuItemId + " was clicked");
console.log("info: " + JSON.stringify(info));
console.log("tab: " + JSON.stringify(tab));
}

// Create one test item for each context type.
var contexts = ["page","selection","link","editable","image","video",
            "audio"];
for (var i = 0; i < contexts.length; i++) {
var context = contexts[i];
var title = "Test '" + context + "' menu item";
var id = chrome.contextMenus.create({"title": title, "contexts":[context],
                                   "onclick": genericOnClick});
console.log("'" + context + "' item:" + id);
} 
```

此示例无法在**当前页面**上记录信息，而是在背景页面上记录信息。

我有一个**内容脚本**可以在指定页面上生成一些内容：

```
var showInfo = function(){ var dialogBoxWrapper = document.createElement("div");
document.body.appendChild(dialogBoxWrapper);} 
```

我需要通过上下文菜单调用这个函数。我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T06:29:54.967

您可以参考以下代码作为参考，在单击上下文菜单时，将调用内容脚本中的函数。

# 示例演示

### 清单.json

```
{
    "name": "Content to Context menu",
    "description": "http://stackoverflow.com/questions/14452777/is-that-possible-calling-content-script-method-by-context-menu-item-in-chrome-ex",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "myscript.js"
            ]
        }
    ],
    "permissions": [
        "contextMenus"
    ]
} 
```

### 背景.js

```
function genericOnClick(info, tab) {
    console.log("item " + info.menuItemId + " was clicked");
    console.log("info: " + JSON.stringify(info));
    console.log("tab: " + JSON.stringify(tab));

    //Add all you functional Logic here
    chrome.tabs.query({
        "active": true,
        "currentWindow": true
    }, function (tabs) {
        chrome.tabs.sendMessage(tabs[0].id, {
            "functiontoInvoke": "showInfo"
        });
    });
}

// Create one test item for each context type.
var contexts = ["page", "selection", "link", "editable", "image", "video",
    "audio"];
for (var i = 0; i < contexts.length; i++) {
    var context = contexts[i];
    var title = "Test '" + context + "' menu item";
    var id = chrome.contextMenus.create({
        "title": title,
        "contexts": [context],
        "onclick": genericOnClick
    });
    console.log("'" + context + "' item:" + id);
} 
```

### myscript.js

```
var showInfo = function () {
    console.log("Show Info is invoked");
}
var showAnotherInfo = function () {
    console.log("Show Another Info");
}
chrome.extension.onMessage.addListener(function (message, sender, callback) {
    if (message.functiontoInvoke == "showInfo") {
        showInfo();
    }
    if (message.functiontoInvoke == "showAnotherInfo") {
        showAnotherInfo();
    }
}); 
```

# 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [上下文菜单](https://developer.chrome.com/extensions/contextMenus.html)
*   [扩展 API](https://developer.chrome.com/extensions/extension.html#event-onMessage)

# variables - 如何将实十进制值传递为虚拟十进制值？

> ID：14452778
> 
> 赞同：1
> 
> 时间：2013-01-22T06:26:25.577
> 
> 标签：variables, cobol, mainframe

我有一个`PIC 9(14).9(2)`从传入文件接收数据的变量。我希望将它传递给一个报告变量，即`PIC 9(14)V9(2)`. 无法更改传入数据的格式。有什么办法可以将一个值传递给另一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:37:30.377

您还可以在这里查看：[如何在 COBOL 中的 PIC X 子句上重新定义和执行算术运算](https://stackoverflow.com/questions/14371578/how-to-redefine-and-perform-arithmetic-on-a-pic-x-clause-in-cobol/14375295#14375295)，这（可能）是一个类似的主题（尽管输入数据的格式从未得到确认）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:01:44.767

pic 9(14).9(2) 本质上是一个 Pic X 字段。您可以设置重新定义字段或使用参考修改

IE

```
 03 F1                 PIC 9(14).9(2).
       03 filler redefines F1.
          05 F1-Int          pic 9(14).
          05 filler          pic X.
          05 F1-decimal      pic 9(2).

       03 F2                 PIC 9(14)V9(2).
       03 filler redefines F2.
          05 F2-Int          pic 9(14).
          05 F2-decimal      pic 9(2).

       Move F1-int          to f2-int.
       Move F1-decimal      to f2-decimal.

or    
       Move F1(1:14)        to F2(1:14).   
       Move F1(16:2)        to F2(15:2).   // Forgoten the correct format for cobol 
```

# iphone - @synchronized 块和选择器 inBackground 和 afterDelay

> ID：14452784
> 
> 赞同：2
> 
> 时间：2013-01-22T06:27:16.167
> 
> 标签：iphone, ios, objective-c, asynchronous, thread-safety

目前，我遇到了一个似乎是阻止我的代码继续运行的锁定问题。我怀疑问题是基于 @synchronized 块与 performSelector:AfterDelay: 一起工作的方式。锁是否在延迟中持续存在，或者选择器是否安排在锁之外？

如果您想看一下，这是代码。本质上，locateEvents 被调用了很多次，但实际上只需要在新的事件位置数据进入时每隔一段时间运行一次（即，如果它一直被调用）。

```
-(void) locateEvents
{
   @synchronized(self)
   {
     if(!locating)
     {
        locating = true;
        shouldLocate = false;

        for(Event* e in provider.allEvents)
        {
            if(e.coordinate.latitude)
                [self queueEventForMap:e];
        }

        [self performSelector:@selector(stopLocating) withObject:nil afterDelay:1.0f];

      }else{
        shouldLocate = true;
      }
   }

}

-(void) stopLocating
{
  locating = false;

  if(shouldLocate)
     [self locateEvents];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:54:56.050

经过一些额外的测试，锁似乎没有遵循预定的选择器。我上面遇到的问题是由于线程死亡并且未启动预定的选择器引起的。

# javascript - jQuery qtip 插件：旧弹出窗口仍然出现在新弹出窗口后面。如何解决？

> ID：14452787
> 
> 赞同：0
> 
> 时间：2013-01-22T06:27:26.320
> 
> 标签：javascript, jquery, qtip

这是 jQuery 1.9.0。我使用 qTip 1.0.0-rc3，我已经从所有`$.browser`代码中删除了它（因为它从 1.9.0 开始就消失了）。我附上了一个简单的，裸露的骨头（现在甚至没有重新设计）提示。完整功能如下：

```
// Function to report a parse error
function reportParseError(parseError, msgHandle, textArea)
{
    // Find the inner link element -- there is only one, so this is "safe".
    var link = msgHandle.find("a");

    link.text("line " + parseError["line"]);

    // Add an onclick hook to the link. When clicking on the link, the caret
    // in the text area will move to the position of the error.
    link.on("click", function(e)
    {
        e.preventDefault();
        textArea.focus().setCursorPosition(parseError["offset"]);
    });

    link.qtip({
        content: parseError["message"],
        show: "mouseover",
        hide: "mouseout",
        position: {
            corner: {
                target: "topMiddle",
                tooltip: "bottomMiddle"
            }
        }
    });

    // Show the message
    msgHandle.show();
} 
```

这个函数做我想要的（提示出现在链接上方）。

问题是当提示的先前内容（解析消息可能非常大）大于新内容时：然后我在鼠标悬停时看到新内容下方的旧内容（两个内容​​都在鼠标移出时消失）。

你怎么解决这个问题？

**编辑**：经过更多思考，观察到的行为似乎是预期的：每次触发此功能时，都会创建一个新的工具提示。这意味着提示需要在“初始化时间”（即 document.ready() 时）附加，并在需要时填充适当的内容。我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:36:35.450

好的，回答自己。

我根本无法让 qTip2 工作，所以是 qTip 1。

问题在于我发现，工具提示（实际上是 div）被创建但从未被销毁。

解决方案是在 document.ready() 上创建两个虚拟工具提示，在重新创建它们之前将它们销毁，因为我无法抓住工具提示的句柄来更新它们的内容。

# html - 如何在标题中停止菜单（顶部）

> ID：14452794
> 
> 赞同：0
> 
> 时间：2013-01-22T06:27:49.147
> 
> 标签：html, css

[http://jsfiddle.net/GuXQZ/3/](http://jsfiddle.net/GuXQZ/3/) <-(我的html+css代码)

向下滚动主菜单在底部标题处停止时如何使菜单在底部标题处停止。ty之前回答...

```
 body{
background: #83DF13;
font-family: Arial;
margin: auto;
}

#index{
background: #BCAEA4;
height: 35px;
padding: 0px 25px;
position: fixed;
top:0;
width: 100%;
}

/*Header Option*/
#header{
background: #fff;
width: auto;
margin: 45px 10px 10px 10px;
padding: 10px 10px;
height: 250px;
border-radius:10px;
-moz-border-radius:10px; /* Old Firefox */
}

#Link{
background: #fff;
width: auto;
height: 45px;
margin: 10px;
padding: 10px;
border-radius:0px 0px 10px 10px;
-moz-border-radius:0px 0px 10px 10px; /* Old Firefox */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:22:45.827

为此，您必须使用 js。

但是从只有 css 你可以这样做：

[http://jsfiddle.net/sachin4dotnet/GuXQZ/8/](http://jsfiddle.net/sachin4dotnet/GuXQZ/8/)

添加CSS：

```
.index0{
position: relative;
}

/*Header Option*/
#header{
    z-index: 2;
} 
```

在 html 中：

```
<div class="index0" >
    <div id="index">
    header 
    </div>
    <div id="header">
    <marquee>slideshow lates Content</marquee>
    </div>
</div>
<div class="index0" style="width: auto; z-index: 10;background: #83DF13;">
    <div style="top: auto;">
    <div id="Link">
    main menu
    </div>
    </div>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>
<br> asdf </br>

</div> 
```

但是为了获得良好的效果，您必须像上面卡罗尔的示例一样使用 js 进行更改类

# wpf - Prism-MEF：如何使用 ViewExport 将视图导出到选项卡控件中的某个选项卡

> ID：14452798
> 
> 赞同：0
> 
> 时间：2013-01-22T06:28:21.260
> 
> 标签：wpf, mvvm, prism, mef

我不知道这是否可能：我有一个导航区域，其中填充了 View_A（通过 ViewExport）@程序启动，我可以从中选择一个项目，以便其详细信息将显示在主区域中。但现在我想将 TabControl 放在导航区域中，其中包含许多 TabItem，每个选项卡将包含不同的视图：View_A、View_B、....所以我可以使用多个控制面板。那么我可以以编程方式将 View_A 分配给 Tab_A 并将 View_B 分配给 Tab_B ...这样我就可以切换导航面板。提前致谢

注意：每个视图都在后面的代码中导入了它的视图模型

# c - 在c中捕获ping的输出

> ID：14452799
> 
> 赞同：7
> 
> 时间：2013-01-22T06:28:28.080
> 
> 标签：c, linux, pipeline

如何立即通过管道捕获 ping 命令的输出？

这是我的代码：

```
int main ()
{
    FILE *cmd = popen ( "ping -c 3 google.com | grep icmp", "r" );//ping google
    char *s = malloc ( sizeof ( char ) * 200 );
    while ( 1 )
    {
            fgets ( s, sizeof ( char )*200, cmd );
            printf ( "%s", s);//show outcome
            if ( strstr ( s, "icmp_req=3" ) != 0 )
                    break;
    }
    pclose ( cmd );
    return 0;
} 
```

当程序完成时，它会同时显示输出。但我想在程序执行时立即读取输出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T06:33:04.300

`<stdio.h>` 默认情况下是缓冲的，并且`stdout`是行缓冲的。

替换你`printf("%s", s);` 的`printf("%s\n", s);`（结尾换行符会刷新`stdout`缓冲区）或在它之后添加一个调用`fflush(NULL);`。

实际上，您的问题与 无关`ping`，但管道已缓冲。

您可以执行较低级别的`pipe`, `fork`, `dup2`,`read`系统调用并显式管理管道上的缓冲区。然后调用`poll`可能很有用。

您可以考虑使用像[liboping](http://verplant.org/liboping/)这样的 ICMP pinging 库，或者考虑改为执行 HTTP 请求（使用该`wget`程序，或者最好使用[libcurl](http://curl.haxx.se/libcurl/)；也许一个简单的 HTTP`HEAD`请求就足够了）。作为一般建议，请避免使用`popen`or分叉进程`system`（因为目标计算机上可用的命令可能不同）。

阅读一些好的 Linux 编程书籍，例如[http://advancedlinuxprogramming.com/](http://advancedlinuxprogramming.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T07:32:53.363

这是一个使用[liboping 每秒](http://verplant.org/liboping/)ping www.xively.com 并显示延迟的小代码。您可以像这样在 ubuntu 机器上安装 liboping 静态/动态库文件和头文件：`sudo apt-get install liboping0 liboping-dev oping`

然后使用上述库 ( `gcc -o test test.c -loping`) 编译以下程序。并以超级用户 (sudo) 身份运行可执行文件。

**测试.c：**

```
 /*
  * 1\. install liboping, e.g. `sudo apt-get install liboping0 liboping-dev oping`
  * 2\. Compile with -loping, e.g. `gcc -o test test.c -loping`
  * 3\. Execute using sudo as super user, e.g. `sudo ./test`
  */

#include <stdlib.h>
#include <stdio.h>
#include <oping.h>

int main(int argc, char **argv) {
    pingobj_t *ping;
    pingobj_iter_t *iter;

    if ((ping = ping_construct()) == NULL) {
        fprintf(stderr, "ping_construct failed\n");
        return -1;
    }
    printf("ping_construct() success\n");

    if (ping_host_add(ping, "www.xively.com") < 0) {
        const char * errmsg = ping_get_error(ping);
        fprintf(stderr, "ping_host_add(www.xively.com) failed. %s\n", errmsg);
        return -1;
    }
    printf("ping_host_add() success\n");

    while (1) {
        if (ping_send(ping) < 0) {
            fprintf(stderr, "ping_send failed\n");
            return -1;
        }
        printf("ping_send() success\n");

        for (iter = ping_iterator_get(ping); iter != NULL; iter =
                ping_iterator_next(iter)) {
            char hostname[100];
            double latency;
            unsigned int len;

            printf("ping_iterator_get() success\n");
            len = 100;
            ping_iterator_get_info(iter, PING_INFO_HOSTNAME, hostname, &len);
            len = sizeof(double);
            ping_iterator_get_info(iter, PING_INFO_LATENCY, &latency, &len);

            printf("hostname = %s, latency = %f\n", hostname, latency);
        }
        sleep(1);
    }
    printf("exiting...\n");

    ping_destroy( ping );

    return 0;
} 
```

**输出：**

```
anurag@anurag-PC:~$ sudo ./test
ping_construct() success
ping_host_add() success
ping_send() success
ping_iterator_get() success
hostname = www.xively.com, latency = 233.666000
ping_send() success
ping_iterator_get() success
hostname = www.xively.com, latency = 234.360000
ping_send() success
ping_iterator_get() success
hostname = www.xively.com, latency = 234.076000
ping_send() success
ping_iterator_get() success
hostname = www.xively.com, latency = 231.761000
ping_send() success
ping_iterator_get() success
hostname = www.xively.com, latency = 235.085000
^C 
```

如果您想从 linux 设备检查互联网连接，只要您的 ISP 或目标不阻止 ICMP 数据包，liboping 就很好。如果这些被阻止，您可以使用一些 HTTP 库尝试从 www.google.com 或任何其他网站获取 index.html 页面并检查是否成功

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:38:14.890

替换你`printf("%s", s);`的`printf("%s\n", s);`

`\n`将刷新您的缓冲区，因此您将在命令执行后立即获得输出，`printf`而您无需等到程序执行停止...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T06:35:46.900

您无法立即阅读它，并且它不会在执行结束时打印。

显示的那一刻

*   管道的缓冲区被填满或

*   管道关闭

您需要修改管道的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:12:48.143

只需强制换行输出，然后`stdout`刷新，更改 cmd

```
char *cmds = "ping -c 3 google.com | awk ' /icmp/ { printf(\"%s\\n\", $0); } '";
FILE *cmd = popen ( cmds, "r" ); 
```

有效，我自己测试过。

其他方法不起作用，因为问题在于管道冲洗，而不是当前进程的标准输出冲洗。

# javascript - jQuery 菜单 - 在下拉悬停时保持菜单处于活动状态

> ID：14452800
> 
> 赞同：0
> 
> 时间：2013-01-22T06:28:38.560
> 
> 标签：javascript, jquery, menu

[这是 jsfiddle 的链接](http://jsfiddle.net/bUh4L/)我正在编写一个满足我需要的 jquery 菜单。我知道这里没有必要重新反转轮子，但这也是一种学习体验。

另外，我知道代码很丑陋，但是一旦我让它正常工作，我会在以后重组和清理它。

我的问题是，当我将鼠标悬停在下拉链接上时，它会消失。我希望它留在那里并且父菜单处于活动状态。任何帮助表示赞赏。

这是一些代码：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
</head>
<body>
  <div>
    <ul>
        <li>
            <div class="menu-item"></div>
            <div class="menu-text">text</div>
            <div class="dropdown">
                <div class="dropdown-item"><a href="#">item 1</a></div>
                <div class="dropdown-item"><a href="#">item 2</a></div>
                    <div class="dropdown-item"><a href="#">item 3</a></div>
            </div>
        </li>
        <li><div class="menu-item"></div><div class="menu-text">texttexttext</div></li>
        <li><div class="menu-item"></div><div class="menu-text">tetexttexttexttexttexttexttextxt</div></li>
      </ul>
  </div>
<script>
    $(function() {    
        $("div.menu-text").mouseover(function () {
            $(this).prevAll('div.menu-item').animate({height: '100%'},
                {
                    duration: 700,
                    specialEasing: {height: 'easeOutQuint'}
                }
            );
            if($(this).siblings('div.dropdown').is(':hidden')){
                $(this).siblings('div.dropdown').slideDown();
            }
        });

        $("div.menu-text").mouseout(function () {
             $(this).prevAll('div.menu-item').animate({height: '10px'}, 700);
            if($(this).siblings('div.dropdown').is(':visible')){
                $(this).siblings('div.dropdown').slideUp();     
            }
        });   

        $("div.dropdown-item a").hover(function () {
            $(this).parent().siblings('div.menu-item').css("display","block");
            $(this).parent().css("display","block");
        });    
    }); 
  </script> 
</body>
</html> 
```

这是CSS：

```
li {
    background-color: #ccc;
    position: relative;
    color: #fff;
    z-index: -2;
    float: left;
}

div.menu-item {
    background-color: #000;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 10px;
    z-index: -1;
}

div.menu-text {
    color: #fff;
    margin: 0;
    padding: 20px 10px;    
}

div.dropdown {
    display: none;
    position: absolute;
}

div.dropdown-item a {
    padding: 10px;  
    background-color: #1E4b55;
    display: block;
    white-space: nowrap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:49:06.847

您的 JS 有很大的改进空间，但这可以解决问题：

[http://jsfiddle.net/bUh4L/16/](http://jsfiddle.net/bUh4L/16/)

```
$(function() {
    $("li").hover(
        function() {
            $(this).find('div.menu-item').animate({height: '100%'},
                {
                    duration: 700,
                    specialEasing: {
                        height: 'easeOutQuint'
                    }
                });
            if($(this).find('div.dropdown').is(':hidden')) {
                $(this).find('div.dropdown').slideDown();
            }
        },
        function() {
            $(this).find('div.menu-item').animate({height: '10px'}, 700);
            if($(this).find('div.dropdown').is(':visible')){
                $(this).find('div.dropdown').slideUp();     
            }
        }
    );
}); 
```

我正在使用`.hover()`它有两个功能，第一个用于悬停开始时，第二个用于悬停结束时。您还需要将其移至父元素 (the `li`)，以便悬停在顶部子元素上方时保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:11:21.810

看到这个：http: [//jsfiddle.net/Y9knm/](http://jsfiddle.net/Y9knm/)

```
$(function () {
 $("li").hover(
 function () {
    $(this).find('div.menu-item').stop().animate({
        height: '100%'
    }, {
        duration: 700,
        specialEasing: {
            height: 'easeOutQuint'
        }
    });
    $(this).find('div.dropdown').slideDown();
 },

 function () {
    $(this).find('div.menu-item').stop().animate({
        height: '10px'
    }, 700);
    $(this).find('div.dropdown').stop().slideUp();
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T11:20:05.847

jsfiddle 示例不完整。需要 jquery easing 库。不包含在 jsfiddle 示例中。

# android - 在 Android 中发送和接收短信和彩信（Kit Kat Android 4.4 之前）

> ID：14452808
> 
> 赞同：133
> 
> 时间：2013-01-22T06:29:07.683
> 
> 标签：android, sms, broadcastreceiver, android-manifest, mms

我已经弄清楚如何发送和接收 SMS 消息。要发送 SMS 消息，我必须调用类的`sendTextMessage()`和`sendMultipartTextMessage()`方法`SmsManager`。要接收 SMS 消息，我必须在`AndroidMainfest.xml`文件中注册一个接收器。然后我不得不重写`onReceive()`. `BroadcastReceiver`我在下面包含了示例。

**MainActivity.java**

```
public class MainActivity extends Activity {
    private static String SENT = "SMS_SENT";
    private static String DELIVERED = "SMS_DELIVERED";
    private static int MAX_SMS_MESSAGE_LENGTH = 160;

    // ---sends an SMS message to another device---
    public static void sendSMS(String phoneNumber, String message) {

        PendingIntent piSent = PendingIntent.getBroadcast(mContext, 0, new Intent(SENT), 0);
        PendingIntent piDelivered = PendingIntent.getBroadcast(mContext, 0,new Intent(DELIVERED), 0);
        SmsManager smsManager = SmsManager.getDefault();

        int length = message.length();          
        if(length > MAX_SMS_MESSAGE_LENGTH) {
            ArrayList<String> messagelist = smsManager.divideMessage(message);          
            smsManager.sendMultipartTextMessage(phoneNumber, null, messagelist, null, null);
        }
        else
            smsManager.sendTextMessage(phoneNumber, null, message, piSent, piDelivered);
        }
    }

    //More methods of MainActivity ...
} 
```

**SMSReceiver.java**

```
public class SMSReceiver extends BroadcastReceiver {
    private final String DEBUG_TAG = getClass().getSimpleName().toString();
    private static final String ACTION_SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private Context mContext;
    private Intent mIntent;

    // Retrieve SMS
    public void onReceive(Context context, Intent intent) {
        mContext = context;
        mIntent = intent;

        String action = intent.getAction();

        if(action.equals(ACTION_SMS_RECEIVED)){

            String address, str = "";
            int contactId = -1;

            SmsMessage[] msgs = getMessagesFromIntent(mIntent);
            if (msgs != null) {
                for (int i = 0; i < msgs.length; i++) {
                    address = msgs[i].getOriginatingAddress();
                    contactId = ContactsUtils.getContactId(mContext, address, "address");
                    str += msgs[i].getMessageBody().toString();
                    str += "\n";
                }
            }   

            if(contactId != -1){
                showNotification(contactId, str);
            }

            // ---send a broadcast intent to update the SMS received in the
            // activity---
            Intent broadcastIntent = new Intent();
            broadcastIntent.setAction("SMS_RECEIVED_ACTION");
            broadcastIntent.putExtra("sms", str);
            context.sendBroadcast(broadcastIntent);
        }

    }

    public static SmsMessage[] getMessagesFromIntent(Intent intent) {
        Object[] messages = (Object[]) intent.getSerializableExtra("pdus");
        byte[][] pduObjs = new byte[messages.length][];

        for (int i = 0; i < messages.length; i++) {
            pduObjs[i] = (byte[]) messages[i];
        }
        byte[][] pdus = new byte[pduObjs.length][];
        int pduCount = pdus.length;
        SmsMessage[] msgs = new SmsMessage[pduCount];
        for (int i = 0; i < pduCount; i++) {
            pdus[i] = pduObjs[i];
            msgs[i] = SmsMessage.createFromPdu(pdus[i]);
        }
        return msgs;
    }

    /**
    * The notification is the icon and associated expanded entry in the status
    * bar.
    */
    protected void showNotification(int contactId, String message) {
        //Display notification...
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myexample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_MMS" />
    <uses-permission android:name="android.permission.WRITE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:debuggable="true"
        android:icon="@drawable/ic_launcher_icon"
        android:label="@string/app_name" >

        <activity
            //Main activity...
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            //Activity 2 ...
        </activity>
        //More acitivies ...

        // SMS Receiver
        <receiver android:name="com.myexample.receivers.SMSReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

但是，我想知道您是否可以以类似的方式发送和接收彩信。在做一些研究之后，博客上提供的许多示例只是简单地将一个传递`Intent`给原生消息传递应用程序。我正在尝试在不离开我的应用程序的情况下发送彩信。似乎没有发送和接收彩信的标准方式。有没有人让这个工作？

另外，我知道 SMS/MMS ContentProvider 不是官方 Android SDK 的一部分，但我想有人可能已经能够实现这一点。任何帮助是极大的赞赏。

# 更新

我`BroadcastReceiver`在`AndroidManifest.xml`文件中添加了一个来接收彩信

```
<receiver android:name="com.sendit.receivers.MMSReceiver" >
    <intent-filter>
        <action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" />

        <data android:mimeType="application/vnd.wap.mms-message" />
    </intent-filter>
</receiver> 
```

在 MMSReceiver 类中，该`onReceive()`方法只能获取发送消息的电话号码。您如何从 MMS 中获取其他重要信息，例如媒体附件（图像/音频/视频）的文件路径或 MMS 中的文本？

**彩信接收器.java**

```
public class MMSReceiver extends BroadcastReceiver {
    private final String DEBUG_TAG = getClass().getSimpleName().toString();
    private static final String ACTION_MMS_RECEIVED = "android.provider.Telephony.WAP_PUSH_RECEIVED";
    private static final String MMS_DATA_TYPE = "application/vnd.wap.mms-message";

     // Retrieve MMS
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();
        String type = intent.getType();

        if(action.equals(ACTION_MMS_RECEIVED) && type.equals(MMS_DATA_TYPE)){

            Bundle bundle = intent.getExtras();

            Log.d(DEBUG_TAG, "bundle " + bundle);
            SmsMessage[] msgs = null;
            String str = "";
            int contactId = -1;
            String address;

            if (bundle != null) {

                byte[] buffer = bundle.getByteArray("data");
                Log.d(DEBUG_TAG, "buffer " + buffer);
                String incomingNumber = new String(buffer);
                int indx = incomingNumber.indexOf("/TYPE");
                if(indx>0 && (indx-15)>0){
                    int newIndx = indx - 15;
                    incomingNumber = incomingNumber.substring(newIndx, indx);
                    indx = incomingNumber.indexOf("+");
                    if(indx>0){
                        incomingNumber = incomingNumber.substring(indx);
                        Log.d(DEBUG_TAG, "Mobile Number: " + incomingNumber);
                    }
                }

                int transactionId = bundle.getInt("transactionId");
                Log.d(DEBUG_TAG, "transactionId " + transactionId);

                int pduType = bundle.getInt("pduType");
                Log.d(DEBUG_TAG, "pduType " + pduType);

                byte[] buffer2 = bundle.getByteArray("header");      
                String header = new String(buffer2);
                Log.d(DEBUG_TAG, "header " + header);

                if(contactId != -1){
                    showNotification(contactId, str);
                }

                // ---send a broadcast intent to update the MMS received in the
                // activity---
                Intent broadcastIntent = new Intent();
                broadcastIntent.setAction("MMS_RECEIVED_ACTION");
                broadcastIntent.putExtra("mms", str);
                context.sendBroadcast(broadcastIntent);

            }
        }

    }

    /**
    * The notification is the icon and associated expanded entry in the status
    * bar.
    */
    protected void showNotification(int contactId, String message) {
        //Display notification...
    }
} 
```

根据[android.provider.Telephony 的文档](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/Telephony.java?av=f)：

> 广播操作：设备已收到一条新的基于文本的 SMS 消息。意图将具有以下额外值：
> 
> `pdus`-包含组成消息的 PDU的`Object[]`of s。`byte[]`
> 
> `getMessagesFromIntent(android.content.Intent)` 如果广播接收器在处理此意图时遇到错误，则可以提取额外的值，它应该适当地设置结果代码。
> 
> ```
>  @SdkConstant(SdkConstantType.BROADCAST_INTENT_ACTION)
>  public static final String SMS_RECEIVED_ACTION = "android.provider.Telephony.SMS_RECEIVED"; 
> ```
> 
> * * *
> 
> 广播动作：设备已收到一条新的基于数据的 SMS 消息。意图将具有以下额外值：
> 
> `pdus`-包含组成消息的 PDU的`Object[]`of s。`byte[]`
> 
> 可以使用 getMessagesFromIntent(android.content.Intent) 提取额外的值。如果 BroadcastReceiver 在处理这个意图时遇到错误，它应该适当地设置结果代码。
> 
> ```
> @SdkConstant(SdkConstantType.BROADCAST_INTENT_ACTION)
> public static final String DATA_SMS_RECEIVED_ACTION = "android.intent.action.DATA_SMS_RECEIVED"; 
> ```
> 
> * * *
> 
> 广播动作：设备收到一条新的 WAP PUSH 消息。意图将具有以下额外值：
> 
> `transactionId (Integer)`- WAP 交易 ID
> 
> `pduType (Integer)`- WAP PDU 类型`
> 
> `header (byte[])`- 消息的标题
> 
> `data (byte[])`- 消息的数据负载
> 
> `contentTypeParameters (HashMap<String,String>)`- 与内容类型相关的任何参数（从 WSP Content-Type 标头解码）
> 
> 如果 BroadcastReceiver 在处理这个意图时遇到错误，它应该适当地设置结果代码。contentTypeParameters 额外值是由其名称键入的内容参数的映射。如果遇到任何未分配的已知参数，则映射的键将为“未分配/0x...”，其中“...”是未分配参数的十六进制值。如果参数没有值，则映射中的值将为空。
> 
> ```
> @SdkConstant(SdkConstantType.BROADCAST_INTENT_ACTION)
> public static final String WAP_PUSH_RECEIVED_ACTION = "android.provider.Telephony.WAP_PUSH_RECEIVED"; 
> ```

# 更新#2

我已经想出了如何在 a 中传递额外内容以`PendingIntent`供 a 接收`BroadcastReceiver`： [Android PendingIntent extras, not received by BroadcastReceiver](https://stackoverflow.com/questions/14571564/android-pendingintent-extras-not-received-by-broadcastreceiver)

但是，额外的被传递给*SendBroadcastReceiver*而不是*SMSReceiver*。我怎样才能将额外的传递给*SMSReceiver*？

# 更新#3

**接收彩信**

所以在做了更多研究之后，我看到了一些注册`ContentObserver`. 这样您就可以检测到`content://mms-sms/conversations`Content Provider 何时发生任何更改，从而使您能够检测传入的彩信。这是我发现的最接近的示例：[接收彩信](http://www.anddev.org/other-coding-problems-f5/where-can-i-find-information-about-sending-receiving-mms-t51284.html)

但是，有一个`mainActivity`类型为 的变量`ServiceController`。类在哪里`ServiceController`实现？注册的还有其他实现`ContentObserver`吗？

**发送彩信**

至于发送彩信，我遇到过这个例子：[发送彩信](http://www.ziddu.com/download/14286605/SendMMS3.zip.html)

问题是我尝试在 Android v4.2.2 上的 Nexus 4 上运行此代码，但我收到此错误：

```
java.lang.SecurityException: No permission to write APN settings: Neither user 10099 nor current process has android.permission.WRITE_APN_SETTINGS. 
```

在类的方法中查询`Carriers`ContentProvider后抛出错误。`getMMSApns()``APNHelper`

```
final Cursor apnCursor = this.context.getContentResolver().query(Uri.withAppendedPath(Carriers.CONTENT_URI, "current"), null, null, null, null); 
```

显然您无法[在 Android 4.2 中读取 APN](https://stackoverflow.com/questions/13453640/read-apns-in-android-4-2)

对于使用移动数据执行操作（如发送彩信）并且不知道设备中存在的默认 APN 设置的所有应用程序，有什么替代方案？

# 更新#4

**发送彩信**

我试过按照这个例子：[发送彩信](http://www.ziddu.com/download/14286605/SendMMS3.zip.html)

正如@Sam 在他的回答中建议的那样：

`You have to add jsoup to the build path, the jar to the build path and import com.droidprism.*; To do that in android, add the jars to the libs directory first, then configure the project build path to use the jars already in the libs directory, then on the build path config click order and export and check the boxes of the jars and move jsoup and droidprism jar to the top of the build order.`

所以现在我不再收到 SecurityException 错误。我现在正在 Android KitKat 上的 Nexus 5 上进行测试。运行示例代码后，它会在调用后给我一个 200 响应代码

```
MMResponse mmResponse = sender.send(out, isProxySet, MMSProxy, MMSPort); 
```

但是，我咨询了我尝试向其发送彩信的人。他们说他们从未收到过彩信。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T13:23:38.310

我遇到了与您在上面描述的完全相同的问题（t-mobile USA 上的 Galaxy Nexus），这是因为移动数据已关闭。

在 Jelly Bean 中是：设置 > 数据使用 > 移动数据

请注意，在发送彩信或接收彩信之前，我必须打开移动数据。如果我收到关闭移动数据的彩信，我将收到一条新消息的通知，我将收到带有下载按钮的消息。但是如果我之前没有打开移动数据，则不会收到传入的彩信附件。即使我在收到消息后打开它。

出于某种原因，当您的电话提供商使您能够发送和接收彩信时，您必须启用移动数据，即使您使用的是 Wifi，如果启用了移动数据，您将能够接收和发送彩信，即使Wifi 在您的设备上显示为您的互联网。

这是一个真正的痛苦，就好像你没有打开它一样，即使打开移动数据，消息也会挂很多，并且可能需要重新启动设备。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T18:17:42.903

没有官方的 api 支持，这意味着它没有向公众记录，并且库可能随时更改。我知道您不想离开该应用程序，但这是您这样做的方式，目的是让其他人想知道。

```
public void sendData(int num){
    String fileString = "..."; //put the location of the file here
    Intent mmsIntent = new Intent(Intent.ACTION_SEND);
    mmsIntent.putExtra("sms_body", "text");
    mmsIntent.putExtra("address", num);
    mmsIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(fileString)));
    mmsIntent.setType("image/jpeg");
    startActivity(Intent.createChooser(mmsIntent, "Send"));

} 
```

我还没有完全弄清楚如何做诸如跟踪消息传递之类的事情，但这应该可以发送。

您可以像收到短信一样收到收到彩信的提醒。接收器上的意图过滤器应如下所示。

```
<intent-filter>
    <action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" />
    <data android:mimeType="application/vnd.wap.mms-message" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-19T20:01:26.970

要在未经允许写入 apn 设置的情况下为 Android 4.0 api 14 或更高版本发送 mms，您可以使用[此库](http://droidprism.blogspot.com/2013/07/java-library-for-retrieving-sms-email.html)：Retrieve mnc and mcc codes from android, then call

```
Carrier c = Carrier.getCarrier(mcc, mnc);
if (c != null) {
    APN a = c.getAPN();
    if (a != null) {
        String mmsc = a.mmsc;
        String mmsproxy = a.proxy; //"" if none
        int mmsport = a.port; //0 if none
    }
} 
```

要使用它，请将[Jsoup](http://jsoup.org/download)和 droid prism jar 添加到构建路径，然后导入 com.droidprism.*；

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T06:46:15.103

我认为在 android 中发送彩信没有任何 sdk 支持。[看这里](https://stackoverflow.com/a/7311382/1626878)至少我还没有找到。但是一个人声称拥有它。看看这个帖子。

[在 android 中从我的应用程序发送彩信](https://stackoverflow.com/a/10073821/1626878)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-02-27T21:56:23.073

我不理解挫折。为什么不制作一个过滤此意图的广播接收器：

```
android.provider.Telephony.MMS_RECEIVED 
```

我进一步检查了一下，您可能需要系统级别的访问权限才能获得这个（有根电话）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-03-28T08:39:32.607

> 短信监听类

```
public class SmsListener extends BroadcastReceiver {

static final String ACTION =
        "android.provider.Telephony.SMS_RECEIVED";

@Override
public void onReceive(Context context, Intent intent) {

    Log.e("RECEIVED", ":-:-" + "SMS_ARRIVED");

    // TODO Auto-generated method stub
    if (intent.getAction().equals(ACTION)) {

        Log.e("RECEIVED", ":-" + "SMS_ARRIVED");

        StringBuilder buf = new StringBuilder();
        Bundle bundle = intent.getExtras();
        if (bundle != null) {

            Object[] pdus = (Object[]) bundle.get("pdus");

            SmsMessage[] messages = new SmsMessage[pdus.length];
            SmsMessage message = null;

            for (int i = 0; i < messages.length; i++) {

                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                    String format = bundle.getString("format");
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i], format);
                } else {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                }

                message = messages[i];
                buf.append("Received SMS from  ");
                buf.append(message.getDisplayOriginatingAddress());
                buf.append(" - ");
                buf.append(message.getDisplayMessageBody());
            }

            MainActivity inst = MainActivity.instance();
            inst.updateList(message.getDisplayOriginatingAddress(),message.getDisplayMessageBody());

        }

        Log.e("RECEIVED:", ":" + buf.toString());

        Toast.makeText(context, "RECEIVED SMS FROM :" + buf.toString(), Toast.LENGTH_LONG).show();

    }
} 
```

> 活动

```
@Override
public void onStart() {
    super.onStart();
    inst = this;
}

public static MainActivity instance() {
    return inst;
}

public void updateList(final String msg_from, String msg_body) {

    tvMessage.setText(msg_from + " :- " + msg_body);

    sendSMSMessage(msg_from, msg_body);

}

protected void sendSMSMessage(String phoneNo, String message) {

    try {
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(phoneNo, null, message, null, null);
        Toast.makeText(getApplicationContext(), "SMS sent.", Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        Toast.makeText(getApplicationContext(), "SMS faild, please try again.", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
} 
```

> 显现

```
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.SEND_SMS"/>

<receiver android:name=".SmsListener">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

# c# - 如何在不注销 ASP.net 的情况下刷新 windows 成员组？

> ID：14452809
> 
> 赞同：1
> 
> 时间：2013-01-22T06:29:12.810
> 
> 标签：c#, asp.net, windows, asp.net-membership

我们正在使用 AD 组来管理我们网站中的角色。有时会添加/删除用户组，但它不会反映在应用程序中，直到客户端重新登录到机器。似乎在注销之前不会刷新 Windows 令牌。有没有办法通过 asp.net 刷新 windows 身份角色？

```
<roleManager defaultProvider="AspNetWindowsTokenRoleProvider"  enabled="true">
</roleManager> 
```

# string - 将字符串转换为双重获取错误

> ID：14452810
> 
> 赞同：0
> 
> 时间：2013-01-22T06:29:21.640
> 
> 标签：string, double, converter

我正在通过此代码在 java 中捕获外部 .exe 文件的输出值

```
Process p = Runtime.getRuntime().exec("filepath\\myexefile.exe 5.53 46.46"); // 5.53 and 46.46 are two input orguments of exe file
BufferedReader stdInput = new BufferedReader(new 
InputStreamReader(p.getInputStream()));

String s;
while ((s = stdInput.readLine()) != null) {
    System.out.println(s);                         }
    Double d = Double.valueOf(s);
    System.out.println(d);
} 
```

代码运行良好，它按预期显示输出 53.4429。但是，当我尝试将 53.4429 转换为 double 时，它​​会出现以下错误

```
Exception in thread "main" java.lang.NullPointerException
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1008)
    at java.lang.Double.valueOf(Double.java:504) 
```

知道为什么字符串不转换成双倍吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:31:15.863

因为循环运行 until`s`为 null，*然后*您将传递`s`- 这是 now `null`，请记住 - 到`Double#valueOf(String)`。

要解决此问题，**请在循环内****解析。`s`**

```
String s;
while ((s = stdInput.readLine()) != null) {
    System.out.println(s);
    Double d = Double.valueOf(s);
    System.out.println(d);
} 
```

# javascript - Javascript 没有从 crm 2011 中的功能区按钮触发？

> ID：14452812
> 
> 赞同：0
> 
> 时间：2013-01-22T06:29:27.063
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我在约会实体中创建了 2 个功能区按钮，这些按钮的功能是，单击它会分别打开一个新的电话和任务，但没有打开任务。电话工作正常。请建议..

请参阅 RibbonDiffxml

```
<RibbonDiffXml>
        <CustomActions>
          <CustomAction Id="test.Form.appointment.MainTab.Include.AddExisting.CustomAction" 

Location="Mscrm.Form.appointment.MainTab.Include.Controls._children" Sequence="41">
            <CommandUIDefinition>
              <Button Id="test.Form.appointment.MainTab.Include.AddExisting" Command="test.Form.appointment.MainTab.Include.AddExisting.Command" Sequence="9" 

ToolTipTitle="$LocLabels:test.Form.appointment.MainTab.Include.AddExisting.LabelText" 

LabelText="$LocLabels:test.Form.appointment.MainTab.Include.AddExisting.LabelText" 

ToolTipDescription="$LocLabels:test.Form.appointment.MainTab.Include.AddExisting.Description" TemplateAlias="o1" 

Image16by16="/_imgs/ribbon/AddExistingStandard_16.png" Image32by32="/_imgs/ribbon/AddExistingStandard_32.png" />
            </CommandUIDefinition>
          </CustomAction>
          <CustomAction Id="test.Form.appointment.MainTab.Include.addphone.CustomAction" Location="Mscrm.Form.appointment.MainTab.Include.Controls._children" 

Sequence="41">
            <CommandUIDefinition>
              <Button Id="test.Form.appointment.MainTab.Include.addphone" Command="test.Form.appointment.MainTab.Include.addphone.Command" Sequence="8" 

ToolTipTitle="$LocLabels:test.Form.appointment.MainTab.Include.addphone.LabelText" 

LabelText="$LocLabels:test.Form.appointment.MainTab.Include.addphone.LabelText" 

ToolTipDescription="$LocLabels:test.Form.appointment.MainTab.Include.addphone.Description" TemplateAlias="o1" Image16by16="/_imgs/ribbon/entity16_4210.png" 

Image32by32="/_imgs/ribbon/entity32_4210.png" />
            </CommandUIDefinition>
          </CustomAction>
          <CustomAction Id="test.Form.appointment.MainTab.Include.AddTask.CustomAction" Location="Mscrm.Form.appointment.MainTab.Include.Controls._children" 

Sequence="41">
            <CommandUIDefinition>
              <Button Id="test.Form.appointment.MainTab.Include.AddTask" Command="test.Form.appointment.MainTab.Include.AddTask.Command" Sequence="10" 

ToolTipTitle="$LocLabels:test.Form.appointment.MainTab.Include.AddTask.LabelText" 

LabelText="$LocLabels:test.Form.appointment.MainTab.Include.AddTask.LabelText" 

ToolTipDescription="$LocLabels:test.Form.appointment.MainTab.Include.AddTask.Description" TemplateAlias="o1" Image16by16="/_imgs/ribbon/entity16_4212.png" 

Image32by32="/_imgs/ribbon/entity32_4212.png" />
            </CommandUIDefinition>
          </CustomAction>
        </CustomActions>
        <Templates>
          <RibbonTemplates Id="Mscrm.Templates"></RibbonTemplates>
        </Templates>
        <CommandDefinitions>
          <CommandDefinition Id="test.Form.appointment.MainTab.Include.AddExisting.Command">
            <EnableRules />
            <DisplayRules />
            <Actions>
              <Url WinMode="0" Address="$webresource:testes_TaskPhoneCallLookup">
                <CrmParameter Value="FirstPrimaryItemId" Name="data" />
              </Url>
            </Actions>
          </CommandDefinition>
          <CommandDefinition Id="test.Form.appointment.MainTab.Include.addphone.Command">
            <EnableRules />
            <DisplayRules />
            <Actions>
              <JavaScriptFunction FunctionName="createPhone" Library="$webresource:testcrm_/Scripts/test.Wealthmgmt.Appointment.Buttons" />
            </Actions>
          </CommandDefinition>
          <CommandDefinition Id="test.Form.appointment.MainTab.Include.AddTask.Command">
            <EnableRules />
            <DisplayRules />
            <Actions>
              <JavaScriptFunction FunctionName="createTask" Library="$webresource:testcrm_/Scripts/test.Wealthmgmt.Appointment.Buttons" />
            </Actions>
          </CommandDefinition>
        </CommandDefinitions>
        <RuleDefinitions>
          <TabDisplayRules />
          <DisplayRules />
          <EnableRules />
        </RuleDefinitions>
<LocLabels>
          <LocLabel Id="test.Form.appointment.MainTab.Include.AddExisting.Description">
            <Titles>
              <Title languagecode="1033" description="Add Task and Phone Call" />
            </Titles>
          </LocLabel>
          <LocLabel Id="test.Form.appointment.MainTab.Include.AddExisting.LabelText">
            <Titles>
              <Title languagecode="1033" description="Add Existing Activity" />
            </Titles>
          </LocLabel>
          <LocLabel Id="test.Form.appointment.MainTab.Include.addphone.Description">
            <Titles>
              <Title languagecode="1033" description="Add a new phone call" />
            </Titles>
          </LocLabel>
          <LocLabel Id="test.Form.appointment.MainTab.Include.addphone.LabelText">
            <Titles>
              <Title languagecode="1033" description="Add Phone Call" />
            </Titles>
          </LocLabel>
          <LocLabel Id="test.Form.appointment.MainTab.Include.AddTask.Description">
            <Titles>
              <Title languagecode="1033" description="Add new Task" />
            </Titles>
          </LocLabel>
          <LocLabel Id="test.Form.appointment.MainTab.Include.AddTask.LabelText">
            <Titles>
              <Title languagecode="1033" description="Add Task" />
            </Titles>
          </LocLabel>
        </LocLabels>
      </RibbonDiffXml> 
```

而Javascript是

```
function createTask(){

var guidCaller=Xrm.Page.data.entity.getId();
//alert(guidCaller);
var orgName = Xrm.Page.context.getServerUrl();
var extraqs = "&subject=New Task";
extraqs += "&hpcrm_timeblockid="+guidCaller;
var features = "location=no,menubar=no,status=no,toolbar=no,resizable=yes";
window.open(orgName+"main.aspx?etn=task&pagetype=entityrecord&extraqs=" + encodeURIComponent(extraqs), "_blank", features, false);

}

function createPhone(){

var guidCaller=Xrm.Page.data.entity.getId();
//alert(guidCaller);
var orgName = Xrm.Page.context.getServerUrl();
var extraqs = "&subject=New Phone Call";
extraqs += "&hpcrm_timeblockid="+guidCaller;
var features = "location=no,menubar=no,status=no,toolbar=no,resizable=yes";
window.open(orgName+"main.aspx?etn=phonecall&pagetype=entityrecord&extraqs=" + encodeURIComponent(extraqs), "_blank", features, false);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:03:56.927

我以前遇到过这个问题..尝试重置**IIS**，然后刷新您的页面..如果相同

行为仍然存在，您应该确保调用该函数并这样做

应该在函数的第一行发出警报，如果行为仍然存在，请重新部署

再次解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:49:56.793

我猜有些东西没有正确部署。使用调试器 (F12) 在功能区 javascript 中放置一个断点，`createTask()`然后创建`createPhone()`. 如果您的断点被击中，但不是任务，您可能应该尝试重新部署您的功能区 XML。如果你的断点被击中，它可能是一个 javascript 错误，单步执行它并找出它。

笔记！用于设置断点的 javascript 文件的名称不会是 test.Wealthmgmt.Appointment.Buttons。它将是脚本块（一些随机数）。

# windows-phone-8 - Windows Phone 8 应用通过 Facebook 进行身份验证

> ID：14452813
> 
> 赞同：0
> 
> 时间：2013-01-22T06:29:34.620
> 
> 标签：windows-phone-8

Windows Phone 8 应用程序可以使用 Facebook 身份验证服务登录我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:39:23.667

您可以在应用程序中使用 Facebook Graph API 来执行您的要求。

[http://www.developer.nokia.com/Community/Wiki/How_to_use_Facebook_Graph_API_in_Windows_Phone](http://www.developer.nokia.com/Community/Wiki/How_to_use_Facebook_Graph_API_in_Windows_Phone)

# html - 使用 mediaelementjs 2.10.1 在 iPad 上的 setMuted() 和 setCurrentTime()

> ID：14452816
> 
> 赞同：1
> 
> 时间：2013-01-22T06:29:41.820
> 
> 标签：html, ipad, mediaelement.js

我创建了一个`mediaelementjs`用于多平台兼容性的视频播放器。除了 iPad2，一切正常。这些方法不适用于 iPad2 `setMuted()`。`setCurrentTime()`

如果您有任何解决方案，请告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:16:47.873

至于`setCurrentTime()`我在 iPad1 和 iPad2 上遇到过同样的问题。我无法完全回忆起我想出的解决方案，但据我所知，我动​​态创建了 mediaelement 并将其分配给全局变量`player`或任何你想要的。当我需要设置当前时间时，我只是做了：

```
player.setCurrentTime(1.250); 
```

如果您发布一些代码，我们可能会为您提供更多帮助。

# c - ffmpeg 和 SDL 制作的奇怪声音

> ID：14452817
> 
> 赞同：1
> 
> 时间：2013-01-22T06:29:49.263
> 
> 标签：c, ffmpeg, sdl, libavcodec

我正在关注[https://github.com/mpenkov/ffmpeg-tutorial上原始 dranger.com/ffmpeg 教程的更新版本](https://github.com/mpenkov/ffmpeg-tutorial)

第三步（源码：[https](https://github.com/mpenkov/ffmpeg-tutorial/blob/master/tutorial03.c) ://github.com/mpenkov/ffmpeg-tutorial/blob/master/tutorial03.c ）添加声音，但是产生的声音很奇怪。当音频流是 AAC 时，我只听到静态声音。当音频流是 MP3 时，我会听到声音的高音版本。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:33:43.250

我有同样的问题。经过几天的尝试，我发现我使用的来自 Zeranoe 的最新版本有问题。

如果您也在使用 Zeranoe 构建，请尝试使用 26c531c 构建（上面的任何内容都会产生问题）。

# mysql - MySQL：对于非空默认值，COLUMN_DEFAULT 始终为空

> ID：14452821
> 
> 赞同：0
> 
> 时间：2013-01-22T06:30:09.863
> 
> 标签：mysql, null, default, create-table

```
CREATE TABLE `test` (
`id` INT(10) UNSIGNED NOT NULL,
`c1` VARCHAR(60) NULL DEFAULT NULL,
`c2` VARCHAR(60) NOT NULL,
PRIMARY KEY (`id`)
 ) 
```

在 information_schema.columns.COLUMN_DEFAULT 中，c1、c2 列都包含 NULL，但 c2 没有默认值。

如何获得真正的 COLUMN_DEFAULT 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:59:02.303

在`information_schema.columns`, if `COLUMN_DEFAULT`is `NULL`and `IS_NULLABLE`is `NO`then 中没有默认值。

但基本上您可以将其视为：默认值（如果未指定）始终为`NULL`. 因此，`c2`不允许是`NULL`，但它会默认为`NULL`，因此总是需要在插入语句中指定。

注意：指定为的字段`NOT NULL`不需要能够表示`NULL`，因此理论上它可以占用（稍微）更少的空间。

# python - 如何使用 PIL 保存图像？

> ID：14452824
> 
> 赞同：142
> 
> 时间：2013-01-22T06:30:28.683
> 
> 标签：python, save, python-imaging-library

我刚刚使用 Python 图像库 (PIL) 进行了一些图像处理，使用我之前找到的一篇文章来执行图像的傅立叶变换，但我无法使用保存功能。整个代码工作正常，但它只是不会保存生成的图像：

```
from PIL import Image
import numpy as np

i = Image.open("C:/Users/User/Desktop/mesh.bmp")
i = i.convert("L")
a = np.asarray(i)
b = np.abs(np.fft.rfft2(a))
j = Image.fromarray(b)
j.save("C:/Users/User/Desktop/mesh_trans",".bmp") 
```

我得到的错误如下：

```
save_handler = SAVE[string.upper(format)] # unknown format
    KeyError: '.BMP' 
```

如何使用 Pythons PIL 保存图像？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-01-23T03:42:52.343

已处理有关文件扩展名的错误，您可以使用`BMP`（不带点）或传递带有扩展名的输出名称。现在要处理错误，您需要正确修改频域中的数据以保存为整数图像，`PIL`告诉您它不接受浮点数据以保存为 BMP。

这是一个建议（有其他小的修改，比如使用`fftshift`and`numpy.array`而不是`numpy.asarray`）进行转换以获得正确的可视化：

```
import sys
import numpy
from PIL import Image

img = Image.open(sys.argv[1]).convert('L')

im = numpy.array(img)
fft_mag = numpy.abs(numpy.fft.fftshift(numpy.fft.fft2(im)))

visual = numpy.log(fft_mag)
visual = (visual - visual.min()) / (visual.max() - visual.min())

result = Image.fromarray((visual * 255).astype(numpy.uint8))
result.save('out.bmp') 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-22T06:48:02.653

您应该能够简单地让 PIL 从扩展名中获取文件类型，即使用：

```
j.save("C:/Users/User/Desktop/mesh_trans.bmp") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T06:33:35.870

尝试删除`.`之前的`.bmp`（它`BMP`与预期不匹配）。正如您从错误中看到的那样，您提供的`save_handler`是大写的`format`，然后在`SAVE`. 但是，该对象中的相应键是`BMP`（而不是`.BMP`）。

我不太了解`PIL`，但从一些快速搜索来看，似乎是`mode`图像的问题。将定义更改`j`为：

```
j = Image.fromarray(b, mode='RGB') 
```

似乎对我有用（但请注意，我对此知之甚少`PIL`，所以我建议使用@mmgp 的解决方案，因为她/他清楚地知道他们在做什么:)）。对于 的类型`mode`，我使用[了这个](http://www.pythonware.com/library/pil/handbook/concepts.htm)页面——希望那里的选择之一对你有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-10T14:46:31.807

我知道这很旧，但我发现（在使用 Pillow 时）通过使用打开文件`open(fp, 'w')`然后保存文件将起作用。例如：

```
with open(fp, 'w') as f:
    result.save(f) 
```

`fp`当然是文件路径。

# android - 使用动画android在WebView中实现Swiping

> ID：14452827
> 
> 赞同：0
> 
> 时间：2013-01-22T06:30:42.380
> 
> 标签：android, android-layout, android-widget

我是 android 新手，我需要加载带有动画的不同网页，同时在 android webview 上滑动。不使用 viewFlipper。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:54:47.267

```
Animation slideLeftAnim = AnimationUtils.loadAnimation(getBaseContext (), R.anim.righttoleft_in);
mWebView.startAnimation(slideLeftAnim); 
```

动画文件夹中的 righttoleft_in.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator" >

<translate
    android:duration="200"
    android:fromXDelta="100%p"
    android:toXDelta="0" />

</set> 
```

动画文件夹中的 righttoleft_out.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator" >

<translate
    android:duration="200"
    android:fromXDelta="0"
    android:toXDelta="-100%p" />

</set> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T07:25:26.847

为我们的活动实现 OnGestureListener，然后使用

```
private static final int SWIPE_THRESHOLD = 100;
private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    public GestureDetector detector;

   detector = new GestureDetector(this);

   webview.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            return detector.onTouchEvent(event);
        }
    });

    @Override
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub
    return detector.onTouchEvent(event);
}

public boolean onDown(MotionEvent e) { 
    // TODO Auto-generated method stub
    return true; 
} 

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    boolean result = false;
    try {
        float diffY = e2.getY() - e1.getY();
        float diffX = e2.getX() - e1.getX();
        if (Math.abs(diffX) > Math.abs(diffY)) {
        if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                if (diffX > 0) {
                    System.out.println("swipe right");

                } else {
                    System.out.println("swipe left");

                }
            }
        } 
    } catch (Exception exception) {
        exception.printStackTrace();
    }
    return result;
}

public void onLongPress(MotionEvent e) {
    // TODO Auto-generated method stub

}
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    // TODO Auto-generated method stub
    return true;
}
public void onShowPress(MotionEvent e) {
    // TODO Auto-generated method stub

}
public boolean onSingleTapUp(MotionEvent e) {
    // TODO Auto-generated method stub
    return true;
} 
```

# c# - 最小起订量代理对象上的空分配

> ID：14452828
> 
> 赞同：0
> 
> 时间：2013-01-22T06:30:47.777
> 
> 标签：c#, unit-testing, nunit, moq

`null`即使`FPosition`对象是使用实例化的，赋值操作也会赋值`new`

```
public void SetPosition(IPositionCollector aCollector_in, Vector3d aVector_in)
{
    FPosition aPosition = new FPosition
    {
        CoordinateX = aVector_in.X,
        CoordinateY = aVector_in.Y,
        CoordinateZ = aVector_in.Z
    };

    aCollector_in.Position = aPosition; // assigns null 
} 
```

我正在使用 MOQ 并且`IPositionCollector`是 MOQ 代理对象。

在什么情况下它是可能的？我应该对 MOQ 对象设置一些依赖项吗？

使用`SetupAllProperties`getitng 后出现以下异常：

```
at Moq.MethodCall..ctor(Mock mock, Expression originalExpression, MethodInfo method, Expression[] arguments)
at Moq.MethodCallReturn`2..ctor(Mock mock, Expression originalExpression, MethodInfo method, Expression[] arguments)
at Moq.Mock.<>c__DisplayClass15`2.<SetupGet>b__14()
at Moq.PexProtector.Invoke[T](Func`1 function)
at Moq.Mock.SetupGet[T1,TProperty](Mock mock, Expression`1 expression)
at Moq.Mock`1.SetupGet[TProperty](Expression`1 expression) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:38:44.937

尝试`SetupAllProperties()`：

```
var mock = new Mock<IPositionCollector>();
mock.SetupAllProperties();
SetPosition(mock.Object, theVector); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:48:27.257

我认为您应该验证其行为的一部分 - 检查是否为收集器分配了正确的位置对象：

```
// Arrange
var collectorMock = new Mock<IPositionCollector>();
var position = new FPosition
{
    CoordinateX = vector.X,
    CoordinateY = vector.Y,
    CoordinateZ = vector.Z
};
// Act
sut.SetPosition(collectorMock.Object, vector)
// Assert
collectorMock.VerifySet(c => c.Position = position); 
```

BTW`FPosition`应该实现 Equals

或者如果`FPosition`不实现 Equals 并且您不希望它实现 Equals

```
// Arrange
var collectorMock = new Mock<IPositionCollector>();
// Act
sut.SetPosition(collectorMock.Object, vector)
// Assert    
collectorMock.VerifySet(c => c.Position = It.Is<FPosition>(p => 
    p.CoordinateX == vector.X &&
    p.CoordinateY == vector.Y &&
    p.CoordinateZ == vector.Z)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:51:39.770

设置`DefaultValue`解决`Mock`问题。

```
aPositionCollectorMock.DefaultValue = DefaultValue.Mock; 
```

并且，删除了对`SetupAllProperties()`.

# css - 背景颜色 css 没有被申请 ace:textEntry

> ID：14452832
> 
> 赞同：0
> 
> 时间：2013-01-22T06:31:11.823
> 
> 标签：css, primefaces, icefaces-3

我正在使用icefaces 3.2。我的输入框有 css 问题。我有一个如下的文本条目

```
 <ace:textEntry id="custName" value="#{strformbean.customer1.custName}"   size="20" maxlength="50"  label="Customer Name"
                     required="true"  styleClass="requiredField" />

  <style type="text/css" >
    .requiredField{
        background: rgb(255,239,214) ;
        border-color:Gray   ;
    }
</style> 
```

styleClass="requiredField" 应该改变 hte textentry 的背景颜色。但它没有得到应用。当我使用 IE CSS 调试器时，我注意到实际的 html 源代码如下

```
<input name="form:custName_input" class="ui-inputfield ui-textentry ui-widget ui-state-default ui-corner-all ui-state-required requiredField" id="form:custName_input" role="textbox" aria-required="true" type="text" size="20" maxLength="50" jQuery17104644470378519651="44"/> 
```

在我的 css 规则之前有很多 css 规则应用于此输入框。我的规则中的背景样式显示为 stroked out ，这意味着还有一些其他规则正在应用背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:24:38.367

首先，如果可能的话，我建议使用具有更好开发工具的浏览器。Chrome、Safari、Opera 和 Firefox 拥有出色的工具，可以更详细地说明样式的来源和被覆盖的内容。它们还允许您即时切换、修改和添加新样式。

在您的情况下，考虑到应用于输入字段的其他类的数量，您的类很可能`.requiredField`被具有更高特异性的选择器覆盖。例如，以下规则：

```
.requiredField {
    color: rgb(255,239,214); 
} 
```

将被这个覆盖：

```
.container .requiredField {
    color: black; 
} 
```

Chris Coyier 有一篇很棒的文章更详细地解释了这个主题：http: [//css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

鉴于您的选择器可能被覆盖，您有两个选择：

1.  为您的选择器提供比其他选择器更高的特异性（如上），例如：
    `.container .requiredField { ... }`

2.  用于`!important`覆盖应用于元素的所有其他样式，例如
    `color: red !important;`. **注意：**我只建议这样做，因为它适合样式的目的（验证）。这应该谨慎使用，因为它可能导致多次覆盖的长期维护问题。

在这两种情况下，重要的是要准确了解正在应用哪些其他样式，以便您可以使用最佳解决方案。例如，随意将 ID 和类添加到选择器以覆盖其他样式并不是一个好主意，因为这会导致同样的问题。我还建议不要使用`<style>`. 虽然它完全有效，但它使跟踪 CSS 变得很困难，并且通常被视为不好的做法。`<link>`最好使用标签链接到外部样式表。

# jquery - 使 jquery 脚本在具有相同类名的同一页面上的多个元素上工作

> ID：14452835
> 
> 赞同：0
> 
> 时间：2013-01-22T06:31:16.547
> 
> 标签：jquery

简化的 JSfiddle 在这里：http: [//jsfiddle.net/GGUq8/](http://jsfiddle.net/GGUq8/)

我有一个小脚本，它需要`li`'s 并将它们分成 div。如果我将脚本设置为 3，`li`则每个 div 最多包含 3 个。

它工作正常，但是当我对同一页面上的两个元素使用相同的类时会出现问题。当我这样做时，划分出错了，我最终得到了两个具有相同内容的元素......

请检查[jsfiddle](http://jsfiddle.net/GGUq8/)以获取示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:54:33.437

You could leverage `.each()` for this:

`container.each(function( Index ) {`

Basically when you set container to `$(containerClass)` it is finding all elements on the page and working on both of them. So when you call the function once, it works on the first element it finds, but updates all of the elements on the page with that class. Then it works on the next one it finds, and updates all of them again.

By using `each()`, you'll loop over all of them individually and update each of them individually. To accomplish this, you'll want to change everywhere you were using `container` with a var set to `$(this)`.

I've made an [update](http://jsfiddle.net/GGUq8/1/) to your script. I think it is working as you are expecting.

# java - 法线贴图和 collections.synchronizedmap 的区别

> ID：14452839
> 
> 赞同：5
> 
> 时间：2013-01-22T06:31:34.497
> 
> 标签：java, collections

在我发现的一些 android 开源代码中

```
 private Map<ImageView, String> imageViews=Collections.synchronizedMap(new
 WeakHashMap<ImageView, String>()); 
```

`Map`谁能解释一下正常和正常之间的区别`collections.synchronizedmap`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:47:26.273

java.util 包中的常规 Map 实现不是线程安全的。这意味着如果多个线程在同一个 Map 上做`get()`或`put()`操作，可能会导致 Map 中出现竞争条件或不一致的数据。

要在多线程环境中使用现有 Map，您可以通过调用`Collections.synchronizedMap()`. 在这种情况下，大多数方法`get()`，如`put`和`keyset()`是同步的，可以安全地并发使用。
有关这方面的更多信息，请参阅 [http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:38:18.130

没有法线地图。您不能只创建一个 Map（new Map() 不会编译）。Map 是访问不同类型映射（hashMap、synchronizedMap、WeakHashMap...）中数据的通用接口。阅读任何 Java 书籍，集合章节。

使用 Map 作为通用接口允许您编写适用于所有类型 Map 实现的数据操作算法。所以你可以切换实现（也许你意识到你需要同步映射，而不仅仅是 HashMap），你的代码就可以工作了。

synchronizedMap 只是一个包装器。它封装了底层 Map 的所有数据访问函数并使其成为线程安全的。

在您的情况下，您有 WeakHashMap ，它是“真实”地图。WeakHashMap 定义了 map 如何存储数据（它使用哈希作为键，使用弱引用作为值）。然后将其包装在 synchronizedMap 中，这使您的地图线程安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:40:15.867

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedCollection(java.util.Collection)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedCollection(java.util.Collection))

同步映射是线程安全的映射，这意味着读/写操作是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T06:40:55.260

我们使用“同步”来确保两个并发执行的线程或进程不会同时执行程序的特定部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T06:41:33.847

`Collections.synchronizedMap`几乎包装了您的 Map 对象，以便每次调用 map 方法都是同步的，这意味着一次只有一个线程可以更新或查询地图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T06:41:44.257

`Collections.synchronizedMap()`是实现线程安全的一种非常糟糕的方法。它对每种方法都有一个锁定，因此最多一个线程可以访问您的地图。它不支持作为比较和设置的原子操作。此外，您必须记住在迭代键/值时自己同步对象，否则它会失去所有的魔力。

看看`ConcurrentHashMap`，如果你需要一个线程安全的`Map`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T06:42:24.787

**Collections**实用程序类提供静态方法来创建线程安全的集合（List、Set、Queue、Map）。因此，要将任何线程不安全的集合转换为线程安全的集合；您在 Collections 上调用同步方法，然后将您的集合作为参数传递。

线程安全集合一次只能由一个线程访问。

网址：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

# mysql - MySQL 性能和超大表的设计

> ID：14452847
> 
> 赞同：0
> 
> 时间：2013-01-22T06:32:06.517
> 
> 标签：mysql, optimization

我正在设计一个新的 MySQL 数据库（使用 InnoDB 作为引擎），它将托管记录大量数据的表（每天大约 200 万条记录，保存 5 年的数据 = 大约 3 650 000 000 行）。现在，显然将所有这些存储在一个表中并不是一个非常聪明的主意，所以这些几乎是我的选择：

1.  在表上使用分区*（在这种规模下这将真正提供多少改进？）*
2.  生成一个新表以包含每个月的数据*（因此，每个表大约 60 000 000 行）*

还需要注意的是，我将不得不进行某种多主复制（或集群）。

现在，我认为**选项 2**可能更好，因为它允许查询尽可能少的数据集（当用户指定要搜索的日期时），并且还可以简化 5 年后的数据归档（只需移动整个表格）。但是，使用选项 2 意味着我将不得不使用连接、联合，或者我必须运行多个单独的查询才能生成结果集（如果您需要按其他方式排序，则不首选后者日期）。

所以，我的问题是，**除了使用连接之外，有没有一种方法可以在多个表中并行运行查询，从而真正将重点放在速度上？**. 我在想像谷歌这样的人，他们能够通过或多或少地做这类事情来提高搜索速度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:43:59.173

哥们，我建议你去一些基于大数据的数据库，比如 Mongodb。在那里，您可以获得高效处理大数据和快速查询处理等功能。

# php - 来自多个子域的 cURL 注销 (session_destroy) 不起作用

> ID：14452848
> 
> 赞同：0
> 
> 时间：2013-01-22T06:32:14.397
> 
> 标签：php, session, curl, logout

我有多个子域，例如 domain1.example.com、domain2.example.com。我有这些子域的中央数据库；当我登录（通过ajax）时，我为每个子域创建会话。

现在我想从任何子域注销时，然后从创建会话的所有子域（session_destroy）注销。（我有维护会话的子域列表）。请帮助如何使用 cURL 从多个子域注销。

我在子域的循环中使用以下 cURL 代码。

```
$url = 'http://' . $a_domain . ".localhost/panels/login?task=logout";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);                
$output = curl_exec($ch);
curl_close($ch); 
```

此外，当我直接在浏览器中运行 $url 时，它可以工作并从该子域注销，但我想通过 cURL 循环工作。??

远程子域 $URL 注销代码

```
public function logout(){
echo '<br>before destroy <br>'; 
print_r($_SESSION);
session_destroy();
echo'<br>after destroy <br>';
print_r($_SESSION);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:37:10.193

就像是

```
<?php

$domains=array();
$domains[]="a";
$domains[]="b";
$domains[]="c";
$domains[]="d";

foreach($domains as $d)
{
    $url = "http://".$d.".localhost/panels/login?task=logout";
    logout($url);
}

function logout($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);                
    $output = curl_exec($ch);
    curl_close($ch);
}

?> 
```

# android - 从 sqlite android 中删除值

> ID：14452851
> 
> 赞同：0
> 
> 时间：2013-01-22T06:32:29.403
> 
> 标签：android, sqlite

在我的应用程序中，我读取了一些添加到数据库中的值，并将它们插入到微调器中。我想删除我想要的任何值，但错误消息表示没有具有该名称的列。即使我的微调器充满了值。错误信息：

```
android.database.sqlite.SQLiteException: no such column: bmw (code 1), while compiling: DELETE FROM MyCars WHERE MyCarsBrand=bmw at android.database.sqlite.SQLiteConnection.nativePrepareStatement 
```

这是我的代码：

```
 if (db.deleteTitle(deleteSpinner.getSelectedItem().toString()))
                Toast.makeText(DeleteCarActivity.this,
                        "Delete successful.", Toast.LENGTH_LONG).show();
            else
                Toast.makeText(DeleteCarActivity.this, "Delete failed.",
                        Toast.LENGTH_LONG).show();
            db.close(); 
```

其他类

```
 public boolean deleteTitle(String rowId) 
    {
        return db.delete(MY_CARS_TABLE, MY_CARS_BRAND_COLUMN + 
                "=" + rowId, null) > 1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:34:04.433

代替

```
return db.delete(MY_CARS_TABLE, MY_CARS_BRAND_COLUMN + 
                "=" + rowId, null) > 1; 
```

和

```
return db.delete(MY_CARS_TABLE, MY_CARS_BRAND_COLUMN + 
                "='" + rowId + "'", null) > 1; 
```

您需要 '' 围绕字符串参数。

# c# - 如何在 Visual Studio 2010 安装项目中设置“以管理员身份运行”权限？

> ID：14452852
> 
> 赞同：1
> 
> 时间：2013-01-22T06:32:35.883
> 
> 标签：c#, visual-studio-2010, exe, setup-project

> **可能重复：**
> [如何强制我的 .NET 应用程序在 Windows 7 上以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)

我的应用程序基于`Windows-Thread`. 所以它必须以`administrator`特权身份运行，要运行应用程序，每个用户都必须右键单击并选择“以管理员身份运行”选项。

但我不想那样做，有没有办法改变它，`setup project`以便当安装在`windows-machine`它上面的应用程序设置它以管理员身份运行时设置它的特权，并且每次当用户在他的本地机器上运行它时，它永久地以管理员身份运行选项.

系统：`XP`，`Win-7`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T06:36:47.553

您可以[添加/修改清单](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="true"/> 
```

**编辑**

请参阅此问题和答案以了解如何在 Windows XP 上执行此操作：[如何在 Windows XP 上以管理员身份运行另一个应用程序](https://stackoverflow.com/questions/4715876/how-to-run-another-app-as-administrator-on-windows-xp)

**编辑**

[对于 ClickOnce，您可以使用本博](http://antscode.blogspot.nl/2011/02/running-clickonce-application-as.html)文中提到的技巧，以管理员身份启动第二个进程。

# php - php 5.3 避免嵌套在 foreach 循环中的 try/catch 重复（代码三明治）

> ID：14452853
> 
> 赞同：1
> 
> 时间：2013-01-22T06:32:43.617
> 
> 标签：php, code-duplication

我有一个带有methodA的类，它的现有结构如下

```
function methodA() {
  $providers = $this->getFirstSetOfProviders();
  foreach ($providers as $provider) {
    try {
      $this->method1($provider);
    } catch ( Exception $e ) {
      // exception handling
    }
  }

  $providers = $this->getSecondSetOfProviders();
  foreach ($providers as $provider) {
    try {
      $this->method2($provider);
    } catch ( Exception $e ) {
      // exception handling
    }
  }
} 
```

catch 子句的内容是相同的。有没有办法组织代码以避免重复嵌套在 foreach 循环中的 try/catch 结构？从概念上讲，我正在尝试做

```
function methodA() {
  foreach ($providers as $provider) {
    $method1 = function($provider) {
      $this->method1($provider);
    }
    $this->withTryCatch($method1);
  }
  ...
}

function withTryCatch($method) {
  try {
    $method;  // invoke this method somehow
  } catch (Exception $e) {
    // exception handling
  }
} 
```

这看起来类似于[代码三明治](http://jvmsuburbs.blogspot.com/2012/05/code-sandwich.html)，但我不确定如何在 php.ini 中进行。

更新： try/catch 嵌套在 foreach 循环内，因此当抛出异常时，它会被处理并继续执行循环中的下一次迭代，而不是终止循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:35:30.067

Exceptions 的好处是它们是可以像任何其他对象一样传递的对象。因此，您可以删除重复的代码（基本样板除外）而无需进行太多更改：

```
foreach ($providers as $provider) {
    try {
      $this->method1($provider);
    } catch ( Exception $e ) {
      $this->handleException($e);
    }
} 
```

注意：如果您还需要异常处理中的一些上下文（即`$provider`），只需提供`handleException()`更多参数。

**第 2 部分：重构整个方法**

您想知道如何进一步删除重复。我不知道这在您的实际代码中是否有意义，它也可能是过度工程。你必须自己决定。以下是*模板方法*模式的实现。原谅粗俗的命名，但我试图效仿你的例子，我不知道你在做什么。

```
abstract class ClassThatDoesThingsWithProviders
{
    public function methodA($providers)
    {
        foreach($provicers as $provider) {
            try {
                $this->methodThatActuallyDoesSomethingWithProvider($provider);
            } catch(Exception $e) {
                $this->handleException($e);
            }
        }
    }
    protected function handleException(Exception $e)
    {
        // handle exception
    }
    abstract protected function methodThatActuallyDoesSomethingWithProvider($provider);
}
class ClassThatDoesThing1WithProviders extends ClassThatDoesThingsWithProviders
{
    protected function methodThatActuallyDoesSomethingWithProvider($provider)
    {
        // this is your method1()
    }
}
class ClassThatDoesThing2WithProviders extends ClassThatDoesThingsWithProviders
{
    protected function methodThatActuallyDoesSomethingWithProvider($provider)
    {
        // this is your method2()
    }
}

class YourOriginalClass
{
    protected $thingsdoer1;
    protected $thingsdoer2;

    public function __construct()
    {
        $this->thingsdoer1 = new ClassThatDoesThing1WithProviders;
        $this->thingsdoer2 = new ClassThatDoesThing2WithProviders;
    }
    public function methodA()
    {
        $this->thingsdoer1->methodA($this->getFirstSetOfProviders());
        $this->thingsdoer2->methodA($this->getSecondSetOfProviders());
    }
} 
```

您可以轻松地从并且可能是抽象的`thingsdoer1`和`thingsdoer2`旁边`getFirstSetOfProviders`创建`getSecondSetOfProviders`一个数组。另外我不知道实际的 method1 和 method2 实现依赖于什么，也许你不能像那样提取它们而不破坏凝聚力。

但是由于我不知道你的真实代码和你在做什么，我不能推荐一个具体的策略，把我上面的例子作为一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:35:25.053

```
function methodA() {
  try {
      $providers = $this->getFirstSetOfProviders();
      foreach ($providers as $provider) {
          $this->method1($provider);
      }

      $providers = $this->getSecondSetOfProviders();
      foreach ($providers as $provider) {
          $this->method2($provider);
      }
  } catch ( Exception $e ) {
    // exception handling
  }

} 
```

# sharepoint-workflow - 如何为 SharePoint Online 使用现有的顺序 Visual Studio 2010 工作流代码？

> ID：14452858
> 
> 赞同：0
> 
> 时间：2013-01-22T06:33:11.823
> 
> 标签：sharepoint-workflow

我们使用的是 SharePoint Server 2010，因此我们使用 C# 代码开发了顺序 Visual Studio 2010 工作流作为场解决方案。

现在我们想为共享点`online/office`365（小型企业）使用相同的代码库作为沙盒解决方案。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:01:51.800

对不起，但我不得不毁了你的一天。VS 工作流部署为 DLL 文件，即。工作流不能部署为沙盒解决方案。您可以：a）创建沙盒自定义操作或 b）使用 sharepoint 设计器创建可重用的工作流并将其导入 Visual Studio（希望允许沙盒解决方案）。所以基本上 Office 365 不支持复杂的工作流。

# hadoop - 在蜂巢中出错

> ID：14452861
> 
> 赞同：3
> 
> 时间：2013-01-22T06:33:56.497
> 
> 标签：hadoop, ireport, hive

当我连接到 ireport 时，如果说在 hive shell 中显示表，则会出现此错误：

> 元数据错误：java.lang.RuntimeException：无法实例化 org.apache.hadoop.hive.metastore.HiveMetaStoreClient 失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T11:49:38.053

您是否已将包含元数据数据库的**JDBC 驱动程序**的 jar 复制到 Hive 的 lib 目录中？

例如，如果您使用**MySQL**来保存元数据数据库，则需要复制

**`mysql-connector-java-5.1.22-bin.jar`**进入**`$HIVE_HOME/lib`**.

这为我解决了同样的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-14T03:41:41.213

> 无法实例化 org.apache.hadoop.hive.metastore.HiveMetaStoreClient

通常，这表明 Hive**元存储**服务未正确启动。但是您粘贴的错误消息没有包含足够的信息来定位问题的确切原因。
确实，有很多原因可能导致此错误，因为其他作者发布的答案都与特定方面有关。
我的建议是：运行`hive --service metastore`命令以获得更详细和更有针对性的错误消息，然后相应地解决问题。您也可以参考*/tmp/user_name/hive.log*日志文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T11:52:10.953

错误消息在 Hive 中很棒。当我将凭据添加到 conf/hive-site.xml 中时，我没有注意到预先存在的用户名/密码元素，所以当我添加自己的凭据时，它们并没有被使用，我最终得到了与上面相同的非描述消息。

如果您运行 metatool 命令，它会跟踪堆栈并得到这个，在我的例子中，它指出了真正的原因。我希望这对其他人有帮助：

```
mfellows@matt.mit /usr/local/hive-0.11.0-bin $ bin/metatool -listFSRoot
Initializing HiveMetaTool..
13/06/05 21:44:43 INFO metastore.ObjectStore: ObjectStore, initialize called
13/06/05 21:44:43 ERROR DataNucleus.Plugin: Bundle "org.eclipse.jdt.core" requires "org.eclipse.core.resources" but it cannot be resolved.
13/06/05 21:44:43 ERROR DataNucleus.Plugin: Bundle "org.eclipse.jdt.core" requires "org.eclipse.core.runtime" but it cannot be resolved.
13/06/05 21:44:43 ERROR DataNucleus.Plugin: Bundle "org.eclipse.jdt.core" requires "org.eclipse.text" but it cannot be resolved.
13/06/05 21:44:43 INFO DataNucleus.Persistence: Property datanucleus.cache.level2 unknown - will be ignored
13/06/05 21:44:43 INFO DataNucleus.Persistence: Property javax.jdo.option.NonTransactionalRead unknown - will be ignored
13/06/05 21:44:43 INFO DataNucleus.Persistence: ================= Persistence Configuration ===============
13/06/05 21:44:43 INFO DataNucleus.Persistence: DataNucleus Persistence Factory - Vendor: "DataNucleus"  Version: "2.0.3"
13/06/05 21:44:43 INFO DataNucleus.Persistence: DataNucleus Persistence Factory initialised for datastore     URL="jdbc:mysql://localhost/hive_metastore" driver="com.mysql.jdbc.Driver" userName="APP"
13/06/05 21:44:43 INFO DataNucleus.Persistence: ===========================================================
13/06/05 21:44:44 ERROR Datastore.Schema: Failed initialising database.
Access denied for user 'APP'@'localhost' (using password: YES)
org.datanucleus.exceptions.NucleusDataStoreException: Access denied for user 'APP'@'localhost' (using password: YES)
  at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:536) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T17:26:09.003

一种可能性是您的 hadoop 没有运行。我在本地做一个简单的单节点 hadoop 集群时遇到了同样的问题。每次启动计算机时，您都必须手动启动 hadoop 节点，然后 hive 才能连接到它们。

尝试运行 $HADOOP_HOME/bin/stop-all.sh

如果输出显示没有节点要停止，这意味着你的 hadoop 没有启动，在这种情况下，运行

$HADOOP_HOME/bin/start-all.sh

然后蜂巢，你应该很好去。

（这是使用默认的 derby 数据库。显然，如果您使用的是 mysql，那么您也可以从某些连接器配置中获取此错误（请参阅其他答案））。

编辑：实际上我发现的另一件事是，每当您启动 hive 时，Hive 都需要创建一个 metastore_db 目录，但它会在运行 hive 的路径中创建它。如果您在运行 hive 的目录中没有写入权限，则可能会遇到上述错误。要解决此问题，您可以在 hive-site.xml 中设置一个配置，以使该目录成为绝对目录而不是相对目录。

看这里：

[在我运行 Hive 的任何地方创建 metastore_db](https://stackoverflow.com/questions/13624893/metastore-db-created-wherever-i-run-hive)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-28T22:01:34.673

感谢上面关于 JDBC 驱动程序的回答。我将 Oracle 用于 Hive Metastore，因此：

$ cp $ORACLE_HOME/jdbc/lib/ojdbc6.jar $HIVE_HOME/lib/ojdbc6.jar

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-16T04:57:11.503

有人告诉我，如果我们的 hive 控制台没有正确终止，通常我们会得到这个异常。修复：

运行 jps 命令，查找“RunJar”进程并使用 kill -9 命令将其杀死

# java - 如何在java中为类动态创建对象

> ID：14452864
> 
> 赞同：-3
> 
> 时间：2013-01-22T06:34:01.053
> 
> 标签：java

> **可能重复：**
> [从 Java 中的变量创建新类](https://stackoverflow.com/questions/1268817/create-new-class-from-a-variable-in-java)

我有这样的场景，

```
 String className;

 if(someCondition){

 className="A";

   }
 else{
   className='B'
  } 
```

现在我想动态地做到这一点

```
 className obj=(className) dbObj;//i am typcasting the db casting to particular class 
```

注意：这里 A 和 B 类具有相同的 setter 和 getter 但属于 db 中的两个不同表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:37:25.980

从[create-new-class-from-a-variable-in-java](https://stackoverflow.com/questions/1268817/create-new-class-from-a-variable-in-java)

这就是你想要做的：

```
String className = "A"; //or "B"
Object xyz = Class.forName(className).newInstance(); 
```

看看[Class.forName()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:41:55.383

你应该稍微修改你的设计。

这两个类`A`都`B`应该实现相同的接口。

```
interface IAB {
}

class A implements IAB {
}

class B implements IAB {
} 
```

现在，更改您的代码如下：

```
IAB className;

if(someCondition) {
    className = (A) dbObj;
}
else {
    className = (B) dbObj;
} 
```

或者

```
classname = (someCondition ? A : B) dbObj; 
```

# javascript - Safari 中的页面重新加载行为

> ID：14452866
> 
> 赞同：5
> 
> 时间：2013-01-22T06:34:07.063
> 
> 标签：javascript, safari, refresh

我有一个**发布**内容的页面。当我使用 Cmd+R 或使用浏览器刷新按钮在 Safari 中刷新所述页面时，会出现如下弹出窗口： ![在此处输入图像描述](../Images/e6fecd0dd556b197a553a1f43d59a991.png)

这种行为在其他浏览器（Chrome、FF 等）中也是相同的。

但是，当我尝试在 Safari 中使用*window.location.href = location.href*或*location.reload()*或*window.location.reload()*甚至*window.location.reload(true)*来刷新同一页面时，它没有显示上述弹出窗口。但是这种行为在出现相同弹出窗口的 Chrome、FF 等中有所不同。

**编辑：**不显示弹出窗口的后果是发布的内容不会被重新发送，因此行为会发生变化。

所以我现在的问题是如何在所有浏览器中重新加载页面，以便重新发送发布的表单内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T12:36:11.600

# Through AJAX

As far as I am aware there is no way to force Safari to resend the POST data during a refresh. The only way to 'fix' this issue is to separate the logic from the document in which the result is displayed. What I mean by this in practical terms is that you could trigger the logic you want from code using an AJAX request, whilst the document itself will be a (relatively) dumb page.

So what you would get is:

POST *document.ext*

```
#In whatever server side language you're using, the reason this can't be done
# purely in javascript is that POST data is only available to the server.
print "<script>"
print "POSTdata = " + JSONEscape(POSTdata) + ";"
print "var doAction = function(){"
print "  ajax('action.ext', POSTdata, function(result){});"
print "});"
print "</script>"
print "<button onclick='doAction()'>Refresh</button>" 
```

POST *action.ext*

```
# all the logic you previously had in document.xxx 
```

The result of this is:

*   In all browsers a user initiated refresh will send the `POST` data and the logic is re-triggered.
*   The refresh button will at all times re-trigger your logic directly without reloading the entire page.

# Self-submitting form

It just hit me that another - easier to implement - way to achieve this is to simply create a `<form action='?' method='POST'>` and in code trigger it's `submit` function. You would still need to `print` the `POSTdata`, but instead of trigger an Ajax call, you would simply trigger a redirect to the same page through the hidden `<form>`. The advantage of this is that it doesn't require any restructuring, though I personally think the AJAX method would look neater. A quick Google-fu showed [these answers](https://stackoverflow.com/questions/8389646/send-post-data-on-redirect-with-javascript-jquery) detailing the procress.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T03:41:12.933

如果你真的想在没有确认的情况下使用刷新页面，你应该使用重定向。因此，您将数据发布到页面 A，并将发布信息保存在会话或 cookie 上，然后将页面 B 重定向到呈现。

或者您可以在页面 A 上为您的业务逻辑做所有事情，并使用页面 B 作为感谢页面。

然后，您可以在页面 B 上刷新而无需确认。

# php - Symfony2 中无 Ajax 的链式下拉菜单

> ID：14452867
> 
> 赞同：1
> 
> 时间：2013-01-22T06:34:14.367
> 
> 标签：php, ajax, forms, dynamic, symfony

所以我有三个实体，城市，州和国家，我希望用户首先选择国家，这将缩小可用的州，然后当一个州被选中时，它会缩小可用的城市。相当直截了当，对吧？

如果它不需要是动态的，您可以只使用实体表单类型，然后使用`query_builder`来缩小返回的结果，如下所示：

```
 ->add('city', 'entity', array(
        'class' => 'ISFP\Registration\RegisterSchoolAdminBundle\Entity\City',
        'query_builder' => function ($repository) use ($stateId) {
            return $repository
                ->createQueryBuilder('e')
                ->where('e.stateid = :stateid')
                ->setParameter('stateid', $stateId)
            ; 
```

或类似的东西。有没有简单的方法可以做到这一点？我听说过使用表单事件，但老实说，我什至不知道从哪里开始。

有人能指出我正确的方向吗？我已经阅读了许多关于该主题的博客等，但我无法重现他们的结果。

# javascript - 在页面加载时将 css 应用于所有 DIV 元素

> ID：14452868
> 
> 赞同：0
> 
> 时间：2013-01-22T06:34:16.630
> 
> 标签：javascript, jquery, css, onload, dynamic-css

有没有办法在页面加载时使用这样的 css 属性格式化页面中的所有标签？

```
border:1px #000000; 
```

此外，在任何 DIV 悬停时，边框应更改为：

```
border : 1px #00800; 
```

我希望这两个属性，常规 CSS 和悬停 CSS 都动态应用于页面加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:44:49.750

你不需要 JavaScript。只需将以下行添加到您的 CSS 中：

```
DIV {border: 1px #000; }
DIV:hover {border-color: #008000; } 
```

*此外，在实践中，页面上的所有* 元素不太可能`DIV`都需要这种样式，因此最好使用类选择器而不是标记名称选择器，并将该类仅用于真正需要这些样式的元素：

```
.example {border: 1px #000; }
.example:hover {border-color: #008000; } 
```

```
<div class="example">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:48:47.757

此代码段可能有效：

```
$(document).ready(function()//When the dom is ready or just add it if you already have a .ready function
{
  $("#div").css("border","1px #000000");
  $('#div').mouseover(function (e) {
   $("#div").css("border","1px #00800");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:36:13.333

在页面加载时调用 javascript 方法并在那里应用这些 css 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:39:15.377

您可以为 ondevice 就绪事件实现一个侦听器：

```
// listen to the device ready event.
document.addEventListener( "deviceready", OnDeviceReady, false ); 
```

然后在 OnDeviceReady 函数中你可以做它的 js 部分

```
function OnDeviceReady()
{
    elements.style.border = '1px solid red';
} 
```

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T06:39:18.567

在 document.ready 中添加：

```
 $("*").css("border","1px #000000"); 
```

以上是css

悬停

```
 $('#div').mouseover(function (e) {
    $("#div").css("border","1px #00800");
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T06:48:29.940

试试这个：

```
$(document).ready(function() {
    // all html element
    $('*').css('border', '1px #000000');

    // hover div
    $('div').hover(function() {
        $(this).css('border', '1px #00800');
    }, function() {
        $(this).css('border', '1px #000000');
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T06:58:38.337

使用 onload 在正文中调用 javascript 函数。然后在 func 中，您可以轻松地为所有必填字段提供 css

# c# - WebAPI 请求流支持

> ID：14452871
> 
> 赞同：32
> 
> 时间：2013-01-22T06:34:46.480
> 
> 标签：c#, asp.net, streaming, asp.net-web-api

我正在编写一个 ASP.NET Web API 应用程序，它要求我接受文件上传并将该文件转发到另一个 HTTP 端点。

我担心，如果许多用户尝试每个人上传一个 100MB 的文件（这是一个有效的用例），那么我的应用程序将占用大量内存，并且根据大请求的数量，这个占用量可能会变得很大，并且我的应用程序会崩溃结束并死去。

理想情况下，我想在 Web 服务器开始接收文件后立即开始将文件流式传输到另一个 HTTP 端点，以显着减少服务器上的负载。

我确信这个过程有一个名字，但我不知道 - 这使得搜索它变得相当困难。

我在 Web API 中使用 Response Streaming 做了很多工作，但我以前从未考虑过请求流。

最好我能说我需要弄清楚如何：

*   在完成上传之前开始处理流。
*   使用 HttpClient 流式传输相同的请求以将相同的数据流式传输到另一个 HTTP 端点。

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-22T15:05:42.403

这是一个有趣的问题。我会尽力提供一些一般性的指示。

有几点需要考虑：

**1)**默认情况下，Web API 会缓冲请求，因此您担心内存占用量可能会相当大，这绝对是有道理的。您可以强制 Web API 以流模式处理请求：

```
 public class NoBufferPolicySelector : WebHostBufferPolicySelector
    {
       public override bool UseBufferedInputStream(object hostContext)
       {
          var context = hostContext as HttpContextBase;

          if (context != null)
          {
             if (string.Equals(context.Request.RequestContext.RouteData.Values["controller"].ToString(), "uploading", StringComparison.InvariantCultureIgnoreCase))
                return false;
          }

          return true;
       }

       public override bool UseBufferedOutputStream(HttpResponseMessage response)
       {
          return base.UseBufferedOutputStream(response);
       }
    } 
```

然后替换服务：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHostBufferPolicySelector), new NoBufferPolicySelector()); 
```

请注意，由于此时 WebHost 和 SelfHost 之间存在差异，因此只能在 WebHost 中进行此类更改。如果您的端点是 selfHosted，则必须在 GlobalConfig 级别设置流模式：

```
//requests only
selfHostConf.TransferMode = TransferMode.StreamedRequest;
//responses only
selfHostConf.TransferMode = TransferMode.StreamedResponse;
//both
selfHostConf.TransferMode = TransferMode.Streamed; 
```

我之前曾在博客上详细介绍过如何在 Web API 中处理大文件 - [http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/](http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/)所以希望你会发现这很有用。

**2）**其次，如果您使用`HttpClient`.NET 4 中的 .NET 4，它会默认缓冲请求正文，因此您应该真正使用 .NET 4.5。

如果您必须使用 .NET 4，您必须`HttWebRequest`直接使用： - [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowreadstreambuffering.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowreadstreambuffering.aspx) - [http://msdn.microsoft。 com/en-us/library/system.net.httpwebrequest.allowwritestreambuffering.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowwritestreambuffering.aspx)

**3)**就将数据推送到客户端而言，如果您想这样做，这绝对是可能的，使用`PushStreamContent`. Henrik 在这里有一篇简短的介绍性文章 - [http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx)（它基于 Web API RC 位，因此您可能需要调整一些签名等。）我还写了关于在此处推送流数据块的博客 - [http://www.strathweb.com/2013/01/asynchronously-streaming-video-with-asp-net -web-api/](http://www.strathweb.com/2013/01/asynchronously-streaming-video-with-asp-net-web-api/)

**编辑：**要查看`PushStreamContent`请求中的示例，您可以查看此示例解决方案 - [http://aspnet.codeplex.com/SourceControl/changeset/view/bb167f0b0013#Samples/Net45/CS/WebApi/UploadXDocumentSample/ReadMe 。文本文件](http://aspnet.codeplex.com/SourceControl/changeset/view/bb167f0b0013#Samples/Net45/CS/WebApi/UploadXDocumentSample/ReadMe.txt)

# java - 制作 JPA 实体的保护性副本

> ID：14452872
> 
> 赞同：3
> 
> 时间：2013-01-22T06:34:50.197
> 
> 标签：java, spring, jpa, clone

在我的 Spring 应用程序中，我有读取 XML 的代码，然后通过 JPA 获取组织实体，然后将在 XML 中找到的字段更新到组织并返回组织。

但是使用这样的代码：

```
Organization updated = mergeToOrganization(jaxbOrganizationPojo, originalOrganization); 
```

我真的觉得我应该`mergeToOrganization`通过制作保护性副本`originalOrganization`而不是直接对其进行变异来开始该方法。直接突变让我感觉很脏。但替代方案似乎是粗略的反射或 loooong get/set 样板代码。

想法？意见？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T06:51:43.693

只要您正确处理事务，我看不出直接突变有什么问题。但是，如果您想从持久上下文中删除实体，假设您使用的是 JPA 2.0，则可以使用[EntityManager.detach()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#detach%28java.lang.Object%29)。这样，从技术上讲，实体永远不会被标记为“脏”，您也不必为此感到难过。另外，请确保使用`merge()`将其保存回来而不是`persist()`，否则您会遇到许多令人讨厌的异常。

**编辑**如果您想返回实体的新副本，到目前为止我见过的最防弹的克隆方法是使用 ObjectOutputStream：http: [//javatechniques.com/blog/faster-deep-copies-of-java -对象/](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:04:21.057

另一种选择是使用您自己的 clone() 方法，或者如果使用 EclipseLink，则可以使用 copy() API。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#Copy_Examples](http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#Copy_Examples)

# asp.net - 如何在 asp.net 中加载页面时显示加载消息或设计？

> ID：14452873
> 
> 赞同：2
> 
> 时间：2013-01-22T06:34:50.937
> 
> 标签：asp.net, html, css, vb.net

如何在页面加载时显示加载消息或图像？

例如，当我单击添加项目的按钮时，需要一些时间才能完成加载，而在加载时，页面处于活动状态。我想要的是在页面中间出现一个小加载器，并且该页面将变为非活动状态。页面加载完成后，加载器将消失，页面将变为活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:05:21.750

假设您使用的是 ASP.NET Webforms

您可以轻松地使用与控件`UpdatePanel`关联的`UpdateProgress`控件。

UpdatePanel 允许您使用异步与服务器交互。您可以添加一个 UpdateProgress 控件并将其与 UpdatePanel 链接以在加载过程中显示某些内容（Gif、Text、..）。

[在此处](http://code.msdn.microsoft.com/VBASPNETShowSpinnerImage-53ce1d10)查找更多信息

如果您使用的是 Asp.net MVC，则必须像在[这个](https://stackoverflow.com/questions/9035329/update-panel-in-asp-net-mvc-3)SO question 中那样使用 Ajax 执行相同的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:11:32.583

Here are two links of similar issues. Not sure how to manage the period it takes to render whole page but this might be a start.

[Hiding page loading](https://stackoverflow.com/questions/7577413/hiding-page-loading)

[The page loading animation for hiding whole page load process ends long before It must fade out](https://stackoverflow.com/questions/7577780/the-page-loading-animation-for-hiding-whole-page-load-process-ends-long-before-i)

Here is one using a timer control [Display Ajax Loader while page rendering](https://stackoverflow.com/questions/242600/display-ajax-loader-while-page-rendering?rq=1)

```
$(document).ready(function(){
    $('body').append('<div id="loading"><img src="core/design/img/load/load.gif" /></div>');
});
$(window).load(function(){ 
    $('#loading').fadeOut(600, function(){
        $("#wrap").fadeIn(1000);
        $("#footer").fadeIn(1000);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:06:47.010

这就是我尝试过的，我为此使用了 YUI，并在单击按钮时在我的代码中添加了一个面板

```
var ANIM_LOAD = YAHOO.namespace("anim_load");
ON button_onClick()
{
StartInitialLoadingPanel("Loading");
}
StartInitialLoadingPanel(msgStrng)
{
if (!TAB_COLLECTION.wait) {

        // Initialize the temporary Panel to display while waiting for external content to load
        TAB_COLLECTION.wait = new YAHOO.widget.Panel("wait",  
                                                                { width: "400px",
                                                                  x: window.screen.center,
                                                                  fixedcenter: true, 
                                                                  close: false, 
                                                                  draggable: false, 
                                                                  zindex:1000,
                                                                  modal: true,
                                                                  visible: true
                                                                } 
                                                              );

        TAB_COLLECTION.wait.setHeader(msgStr);

        TAB_COLLECTION.wait.setBody("<img src='../Images/loading_animation'>");

        TAB_COLLECTION.wait.render(document.body);
    }

    // Show the Panel
    TAB_COLLECTION.wait.show();
} 
```

当后台成功执行后，您可以调用停止动画的方法

```
function CancelInitialLoadPanel()
{
    //Hide the Panel    
    if (TAB_COLLECTION.wait) 
    {
        TAB_COLLECTION.wait.hide();
    }
} 
```

感谢您提供更多详细信息，您可以[在此处查看](http://developer.yahoo.com/yui/docs/YAHOO.widget.Panel.html)

# javascript - 无法从 WEB API 项目中使用的 Knockout.js 视图模型发送 JSON 调用

> ID：14452878
> 
> 赞同：-1
> 
> 时间：2013-01-22T06:35:23.813
> 
> 标签：javascript, knockout.js, asp.net-web-api, knockout-mvc

从我的 Knockout.js 模型函数之一发送 AJAX 调用时遇到问题。

这对我来说似乎很奇怪。我的淘汰赛脚本看起来像

```
<script type="text/javascript">
    var userinfoViewModel = function () {
        var self = this;
        self.ID = ko.observable("0");
        self.First_Name = ko.observable("");
        self.Last_Name = ko.observable("");
        self.Login_Id = Ko.observable("");
        self.Password = ko.observable("");
        self.Role = ko.observable("");

        var user = {
            ID: self.ID,
            First_Name: self.First_Name,
            Last_Name: self.Last_Name,
            Login_Id: self.Login_Id,
            Password: self.Password,
            Role: self.Role
        };

        //Declare an ObservableArray for Storing the JSON Response
        self.Users = ko.observableArray([]);

        //Function to Read All Users
        function GetUsers() {
            //Ajax Call Get All Employee Records
            $.ajax({
                type: "GET",
                url: "/api/user",
                contentType: "application/json",
                dataType: "json",
                success: function (data) {
                    self.Users(data); //Put the response in ObservableArray
                },
                error: function (error) {
                    alert(error.status + "<--and--> " + error.statusText);
                }
            });
            //Ends Here
        }

        //call GetUsers Ajax call.
        GetUsers();

        //CRUD Operations

        //Function to perform POST (insert User) operation
        self.Create = function () {
            //Ajax call to Insert the User
            $.ajax({
                type: "POST",
                url: "/api/user",
                data: ko.toJSON(User), //Convert the Observable Data into JSON
                contentType: "application/json",
                success: function (data) {
                    alert("Record Added Successfully");
                    self.EmpNo(data.EmpNo);
                    alert("The New Employee Id :" + self.EmpNo());
                    GetEmployees();
                },
                error: function () {
                    alert("Failed");
                }
            });
            //Ends Here
        };

        self.update = function () {
            var url = "/api/user/" + self.EmpNo();
            alert(url);
            $.ajax({
                type: "PUT",
                url: url,
                data: ko.toJSON(EmpData),
                contentType: "application/json",
                success: function (data) {
                    alert("Record Updated Successfully");
                    GetEmployees();
                },
                error: function (error) {
                    alert(error.status + "<!----!>" + error.statusText);
                }
            });
        };

        //Function to perform DELETE Operation
        self.deleterec = function (user) {
            $.ajax({
                type: "DELETE",
                url: "/api/EmployeeInfoAPI/" + employee.EmpNo,
                success: function (data) {
                    alert("Record Deleted Successfully");
                    GetUser();//Refresh the Table
                },
                error: function (error) {
                    alert(error.status + "<--and--> " + error.statusText);
                }
            });
            // alert("Clicked" + employee.EmpNo)
        };

        //Function to Display record to be updated
        self.getselecteduser = function (user) {
            self.ID(user.ID),
            self.First_Name(user.First_Name),
            self.Last_Name(user.Last_Name),
            self.Login_Id(user.Login_Id),
            self.Password(user.Password),
            self.Role(user.Role)
        };
    };

ko.applyBindings(new userinfoViewModel());
    </script>
} 
```

我在页面中使用的基础 HTML 看起来像 -

```
 <form>
        <table>
            <tr>
                <td>
                    <!--Bind the TextBoxes in the Table to the observable properties defined into the ViewModel -->
                    <table id="tbldml">
                        <tr>
                            <td>ID</td>
                            <td>
                                <input type="text" id="ID" data-bind="value: $root.ID" /></td>
                        </tr>
                        <tr>
                            <td>First_Name</td>
                            <td>
                                <input type="text" id="First_Name" data-bind="value: $root.First_Name" /></td>
                        </tr>
                        <tr>
                            <td>Last_Name</td>
                            <td>
                                <input type="text" id="Last_Name" data-bind="value: $root.Last_Name" /></td>
                        </tr>
                        <tr>
                            <td>Login_Id</td>
                            <td>
                                <input type="text" id="Login_Id" data-bind="value: $root.Login_Id" /></td>
                        </tr>
                        <tr>
                            <td>Password</td>
                            <td>
                                <input type="text" id="Password" data-bind="value: $root.Password" />
                            </td>
                        </tr>
                        <tr>
                            <td>Role</td>
                            <td>
                                <input type="text" id="Role" data-bind="value: $root.Role" />
                            </td>
                        </tr>
                        <tr>
                            <!--The click binding has the JavaScirpt methods passed to it-->
                            <td>
                                <button data-bind="click :$root.save">Save</button></td>
                            <td>
                                <button data-bind="click: $root.update">Update</button></td>
                        </tr>
                    </table>
                </td>
                <td>
                    <div class="FixedContainer">
                        <!--If the lenght of the Users is greater than 0 then visible the Table-->
                        <table data-bind="visible: Users().length>0">
                            <thead>
                                <tr>
                                    <td>ID</td>
                                    <td>First_Name</td>
                                    <td>Last_Name</td>
                                    <td>Login_Id</td>
                                    <td>Role</td>
                                    <td></td>
                                </tr>
                            </thead>
                            <!--Iterate through an observableArray using foreach-->
                            <tbody data-bind="foreach:  Users">
                                <tr data-bind="click: $root.getselecteduser" id="updtr">
                                    <td><span data-bind="text: ID"></span></td>
                                    <td><span data-bind="text: First_Name"></span></td>
                                    <td><span data-bind="text: Last_Name"></span></td>
                                    <td><span data-bind="text: Login_Id"></span></td>
                                    <td><span data-bind="text: Role"></span></td>
                                    <td>
                                        <button data-bind="click: $root.deleterec">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>
        </table>
    </form>
</section> 
```

这个问题看起来很奇怪，我猜，绑定是非常正确的。我的 API 调用 URL 类似于 - ***Http://localhost:1234/api/user***

*Fiddler 轨道：* 我尝试通过 Fiddler 捕获调用，但似乎未知来自脚本的*GetUsers()*调用并没有首先被触发。无法发现问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:51:00.990

第一个可见错误：

```
self.Login_Id = Ko.observable(""); // must be 'ko' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:20:19.717

你不应该在你的模型中定义你的单实例用户类。

您现在正在做的是在模型内部定义一个 self 对象，该对象具有单个用户的属性。然后，您实际上是在将一个新的用户对象指向 self 对象，其中用户现在拥有与 self 相同的属性的自己的引用。

然后，您在模型中定义另一个对象，该对象是一个包含多个用户的数组。

将您的整个用户类定义从模型中取出。它应该看起来像这样，而不是嵌套在模型中：

```
 function User(data){
    self = this;
    self.ID = ko.observable(data.ID);
    self.First_Name = ko.observable(data.First_Name);
    self.Last_Name = ko.observable(data.Last_Name);
    self.Login_Id = Ko.observable(data.Login_Id);
    self.Password = ko.observable(data.Password);
    self.Role = ko.observable(data.Role);
 } 
```

那么你有你的模型：

```
var userinfoViewModel = function () {
    var self = this;
    //Declare an ObservableArray for Storing the JSON Response
    self.Users = ko.observableArray([]);

    ...
    in your CREATE function loop through the AJAX response: 
      for(user in ajaxData){
        var newUser = new User(user);
      }
      //then push it onto the Users array
      self.Users.push(newUser);

    ...
    other CRUD functions
    ...        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:46:12.657

您正在定义您的 KO 模型，但没有应用它。

您需要调用 ko.applyBindings(new userinfoViewModel());

# ios - 回滚不适用于可转换的核心日期实体

> ID：14452888
> 
> 赞同：0
> 
> 时间：2013-01-22T06:36:19.863
> 
> 标签：ios, core-data

我有一个应用程序，它将数据存储在核心数据托管对象中。这些对象包含几个属性 - NSString 信息，NSNumber 布尔值和 Transformable 数据数组。

数据点.h：

```
@property (nonatomic, retain) id dataArray;
@property (nonatomic, retain) NSString * note;
@property (nonatomic, retain) NSNumber * bool; 
```

数据点.m：

```
@dynamic dataArray;
@dynamic note;
@dynamic bool; 
```

应用程序用户可以进行更改并存储或取消它们。要撤消所有更改，我调用 [managedObjectContest rollback] 方法。我还没有设置额外的 undoManager。对于简单的数据类型（如 NSString 或 NSNumber），这可以正常工作。调用回滚后，所有条目都处于最后保存状态。但这似乎不适用于存储的数组。调用回滚后，我仍然只能得到更改后的值。只有在我重新启动应用程序后，才会显示原始（上次保存的）数据。

我必须做什么才能使回滚对复杂数据起作用？

谢谢你和亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:38:03.750

您可以在回滚后简单地重新获取实体。这样，来自持久存储的数据（可能是正确的数据）将替换更改后的数组。

另一种方法是只保留旧数组的副本并使用它来显示您的数据，如果这是可行的（可能不是跨多个视图控制器）。

数组作为属性是一种在 NSManagedObjects 中存储东西的相当非标准的方式。这种现象的发生是因为一旦你检索到数组，你就得到了一个指向它的指针。您更改了数组，但指针保持不变。在回滚期间，无需更改任何内容，因此 Core Data 什么也不做。您在内存中的数组与 Core Data 无关。

It would be much better if you took the trouble and model the things in your array also in Core Data. It is likely to results in more explicit, readable and maintainable code, in addition to have a more solid data structure.

# html - CSS将属性应用于具有特定类的li

> ID：14452893
> 
> 赞同：0
> 
> 时间：2013-01-22T06:36:44.103
> 
> 标签：html, css

我在将 css 应用于具有特定类的 li 元素时遇到问题。我想改变那个 li 的背景颜色，但我找不到办法做到这一点。我不确定这是否会改变“父级”，因为我知道 css 无法控制父级。

CSS

```
.navi ul li { padding:20px; background-color: #00; }

.navi ul li + .current_location { background-color: #FFF; }

or

.navi ul li .current_location { background-color: #FFF; }

//will only change the background color of letters inside, no the li element.

current_location + ul li { background-color: #FFF; }

// will only apply to the children of the li which has class .current_location.

I want to change the li background color where it has class .current_location; 
```

HTML

```
 <nav class="navi">
            <ul>
              <li>
                <a>General Config</a>
              </li>
              <li class="current_location">
                <a>Menu</a>
              </li>
              <li>
                <a>User Level</a>
              </li>
              <li>
                <a>User</a>
              </li>
              <li>
                <a>Tag</a>
              </li>
              <li>
                <a>Log</a>
              </li>
            </ul>
          </nav> 
```

非常感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:38:49.940

`.navi ul li + .current_location`应该是`.navi ul li.current_location`。

[小提琴](http://jsfiddle.net/arunpjohny/9EN3C/)

选择`+`器用于选择`next`元素之后的元素。
例如：`div+p`将选择一个元素`p`之后的所有`div`元素。[例子](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_element_pluss)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:39:07.137

删除**.current_location** & **LI**之间的空格。像这样写：

```
.navi ul li.current_location { background-color: #FFF; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:46:28.887

.navi ul li.current_location { 背景颜色：#FFFFFF; }

# blackberry - 安装在手机中时，黑莓应用程序 UI 会移位（bb 曲线 9220）

> ID：14452899
> 
> 赞同：0
> 
> 时间：2013-01-22T06:37:13.563
> 
> 标签：blackberry, blackberry-simulator

我在 Eclipse 中开发了一个黑莓应用程序……它在模拟器中看起来不错……我的意思是完美。但我将它安装在黑莓手机（黑莓 9220 曲线）中......小部件移位，有些非常大而且确定

# jquery - 如何在图像单击时触发下拉更改事件

> ID：14452901
> 
> 赞同：0
> 
> 时间：2013-01-22T06:37:22.130
> 
> 标签：jquery, magento

我有一个下拉列表，用于更新表单中的描述字段。现在我已将下拉菜单转换为图像并希望在图像单击时具有相同的功能。下拉菜单将是表单中的隐藏元素。

因此，当有人单击图像时，我想在背景中触发下拉更改事件并更改描述，因为它以前正在工作。

```
<dl class="last">
<img dataid="11" alt="12x12 in" src="12x12_in.jpg" class="sizeimage">&nbsp;
<img dataid="12" alt="14x14 in" src="14x14_in.jpg" class="sizeimage">&nbsp;
<img dataid="13" alt="16x16 in" src="16x16_in.jpg" class="sizeimage">&nbsp;
<img dataid="14" alt="20x20 in" src="20x20_in.jpg" class="sizeimage">&nbsp;
<img dataid="6" alt="22x22 in" src="22x22_in.jpg" class="sizeimage">&nbsp;
<img dataid="7" alt="12x16 in" src="12x16_in.jpg" class="sizeimage">&nbsp;
<img dataid="8" alt="12x18 in" src="12x18_in.jpg" class="sizeimage">&nbsp;
<select class="required-entry super-attribute-select" id="attribute135" name="super_attribute[135]">
<option value="11">12x12 in</option>
<option value="12">14x14 in</option>
<option value="13">16x16 in</option>
<option value="14">20x20 in</option>
<option value="6">22x22 in</option>
<option value="7">12x16 in</option>
<option value="8">12x18 in</option>
</select>
</dl>

<script type="text/javascript">
var $j = jQuery.noConflict();
$j(document).ready(function () {
$j('.sizeimage').bind('click', { imgId: $j(this).attr('dataid') },
function (evt) {
var $ddlHeader = $j("#attribute135");
$ddlHeader.val($j(this).attr('dataid')); //dropdown value changed but description not changed

//tried below methods but none of them updating description field
$ddlHeader.val($j(this).attr('dataid')).change();
$ddlHeader.val($j(this).attr('dataid')).trigger('change');
});
});
</script> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:16:33.510

我测试了您的代码，它[在这里](http://jsfiddle.net/DrcDN/)工作正常。

```
var $j = jQuery.noConflict();
$j(document).ready(function () {
    $j('#attribute135').change(function(){
        alert('change');
    });

    $j('.sizeimage').bind('click', { imgId: $j(this).attr('dataid') },
    function (evt) {
        var $ddlHeader = $j("#attribute135");
        $ddlHeader.val($j(this).attr('dataid')).change(); //dropdown value changed but description not changed
    });
}); 
```

我认为问题在于您删除了 select 元素并将其附加到 dl 元素。因此，您之前绑定到它的所有事件都将丢失。您应该在重新附加选择元素后绑定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:10:07.670

原型示例

```
$$('.sizeimage').each(function (element) {     
    Event.observe(element, 'click', function(e){
        $('attribute135').value = this.readAttribute('dataid')
    }); 
}); 
```

见[http://jsfiddle.net/DrcDN/1/](http://jsfiddle.net/DrcDN/1/)

# javascript - 如何为 Kinetic.js 制作插件？（已编辑）

> ID：14452903
> 
> 赞同：0
> 
> 时间：2013-01-22T06:37:31.157
> 
> 标签：javascript, jquery, plugins, html5-canvas, kineticjs

再次发布问题。我之前没有正确解释这个问题，对此我深表歉意。

希望这将弥补它我计划为 Kineticjs 制作一个插件。现在我不是这方面的专家，所以需要一些帮助。

我在网上看到了一些例子，但它们并没有太大帮助。一些使用 DOM 元素的 Jquery 教程，您可以编写函数来更改行为或添加功能等等。

就像制作一个 jquery 插件一样，我们可以这样做：

```
 (function($) {
             $.fn.nameofthefunction = function() {
           // Add plugin code here
               here I can manipulate dom elements and all..
             };
       })(jQuery); 
```

我需要的是使用 kinetic.js 的内置功能相应地制作插件。 Kinetic.js 是一个 HTML5 画布库。所以如果我做类似的事情

```
 var image = new Kinetic.Image({ 
    x: 325 - 45,
    y: 145 - 83,
    image: beeObj,          
    draggable: true,       
}); 
```

这里 "draggable:true" 使图像可拖动

这是使图像可调整大小的一个示例：http: [//www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

我想使用这个示例制作一个插件，以便用户可以执行 resize:true 或 image.resize(); 之类的操作。并且图像/形状变得可调整大小。

希望我能够解释自己

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:46:53.263

嗯，我猜你想要做的是为你的插件提供选项..这是通过

```
(function ($) {
    $.fn.plguinname = function (options) {
        var settings = $.extend({
          draggable: true ,
          other_optuion : 'value'
        }, options);
.... 
```

现在当有人调用你的插件时，如果他愿意，他会传递一些选项，否则插件将使用默认选项（例如`other_optuion`will be `'value'`），就像这样

```
$('.selector').plguinname({
draggable: true ,
other_optuion : 'some other value'
}) 
```

我想您应该阅读有关 jquery 插件开发的更多信息。我推荐的一个地方是 youtube ;) 用于快速学习

# ios - 更新 ios 6.0 后，当回到前台时，视图框架发生了变化

> ID：14452912
> 
> 赞同：2
> 
> 时间：2013-01-22T06:38:29.067
> 
> 标签：ios

我设置了视图的框架，以便在单击文本字段时视图可以向上移动，然后我输入主页按钮转到后台，但是当我回到前台时，键盘也会显示，但视图的框架已重置。这是3张照片。这发生在 ios 6 中，但从未发生在 ios 5 和更早版本中。谁知道为什么会出现这种情况以及如何处理它。抱歉，我无法发布图片向您展示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:14:55.180

在这里找不到任何图像。但是我遇到了同样的问题并像这样修复了它。这不是一个很好的解决方案。但做的工作。让我知道它是否有帮助。

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
        [[UIApplication sharedApplication] setStatusBarHidden:NO];
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];

        double delayInSeconds = 0.1;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [[UIApplication sharedApplication] setStatusBarHidden:YES];
            [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];
        });
    }
} 
```

# cocos2d-iphone - 如何知道曲线是否与红线相交

> ID：14452927
> 
> 赞同：0
> 
> 时间：2013-01-22T06:39:25.680
> 
> 标签：cocos2d-iphone, curve, intersect

![谢谢！！！！请帮帮我](../Images/8403c142b7277d13011d9f2a451dbc98.png)

这条曲线由这些点组成。我想知道红线是否与曲线相交。红线由PointA和PointB组成。我能做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:56:12.613

```
 struct pos
{
    double x ;
    double y ;
};
struct line
{
    pos st ;
    pos end ;
};
int n ;
double Multiply(pos p1, pos p2, pos p0)
{
    return ( (p1.x - p0.x) * (p2.y - p0.y) - (p2.x - p0.x) * (p1.y - p0.y) );
}
bool iscross(line L1, line L2)
{
    return( (max(L1.st.x,   L1.end.x) >= min(L2.st.x, L2.end.x)) &&
        (max(L2.st.x,   L2.end.x) >= min(L1.st.x, L1.end.x)) &&
        (max(L1.st.y,   L1.end.y) >= min(L2.st.y, L2.end.y)) &&
        (max(L2.st.y,   L2.end.y) >= min(L1.st.y, L1.end.y)) &&
        (Multiply(L2.st, L1.end, L1.st) * Multiply(L1.end, L2.end, L1.st) >= 0) &&
        (Multiply(L1.st, L2.end, L2.st) * Multiply(L2.end, L1.end, L2.st) >= 0)
    );
} 
```

# android - 锁屏后收集应用死机

> ID：14452928
> 
> 赞同：0
> 
> 时间：2013-01-22T06:39:30.257
> 
> 标签：android, android-activity

我有一个应用程序，该日志打印如下：

```
 GC_CONCURRENT freed 433k,7% free 7975K/8564K,paused 12ms+4ms, total 70ms 
```

如果继续使用该应用程序可以正常工作，但是当锁定屏幕时应用程序有问题。有时屏幕锁定后它会死，有时屏幕锁定后它延迟10秒才能回来。我看到日志消息，发现后台服务很好UI 死了。是内存泄漏引起的吗？从`GC_CONCURRENT`可以看到只有 7% 的内存是空闲的。我想知道我错过了哪里。

另一个问题是我使用子类退出活动。当我单击后退按钮时，我调用此代码：

```
public void exit() {
    Log.e(TAG, "exit in myapplication");
    for (Activity activity : activityList) {
        Log.e(TAG, activity.getLocalClassName()+ " finish");
        activity.finish();
    }
    System.exit(0);
} 
```

但是`finish()`完成后，活动中的onDestroy没有被调用。为什么？任何帮助我的人都会受到高度赞赏。

PS：我知道这可能是两个问题，但可以提出一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:25:02.333

您不应该自己管理活动，系统会处理这些。此外，您也不应该终止应用程序，这再次违反了开发人员指南。

也就是说，您的问题肯定来自您保留对活动的引用，这可以防止系统破坏它们。只需坚持推荐的处理方式，Android 不是 Windows Phone 或 iOS，您不会杀死应用程序，而是让系统决定何时需要杀死它们。

例如，请参阅 Reto Meier 的文章，Android 开发人员 @Google：[何时在 Android 应用程序中包含退出按钮（提示：从不）](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

# gtk - 如何在开始时展开 GtkTreeView 中的所有项目

> ID：14452929
> 
> 赞同：8
> 
> 时间：2013-01-22T06:39:34.937
> 
> 标签：gtk, gtktreeview

谁能告诉我如何设置树视图属性以便默认显示所有树项？

第一张图片显示了我得到的内容，第二张图片显示了我想要自动获得的内容，即在`GtkTreeView`不单击扩展器的情况下展开。

![GtkTreeView 不展开项目，不是我想要的](../Images/74b706946e02dd4a35932507b1cde31b.png) ![GtkTreeView 显示所有展开的项目，无需单击展开器以显示 <code>sd0</code> 项目](../Images/98e5c8f0ee0a25549c502e46a3f165c9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T06:45:14.353

您尚未指定语言。在 C 中，您应该调用[gtk_tree_view_expand_all()](http://developer.gnome.org/gtk3/stable/GtkTreeView.html#gtk-tree-view-expand-all)。在 Python 中，您应该调用`my_tree.expand_all()`

# oracle - 如何在 Oracle Varchar2 中存储字节，并将 ASCII 视为文本

> ID：14452931
> 
> 赞同：0
> 
> 时间：2013-01-22T06:39:35.883
> 
> 标签：oracle, character-encoding, varchar2

如何将字节存储在 Varchar2 中，并在它是 ASCII 时将其“正常”视为文本？（就像在查询中一样）。

如果不可能，限制在哪里？

我知道该列是用字符集定义的，所以如果它是 ANSI，例如，我不能把什么样的 1 字节值放在那里？对于 1 字节字符集，是否有比 ANSI“更好”的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T08:00:27.950

You have to encode bytes into text. You can use `rawtohex` function or `utl_encode` package. For displaying characters you have to use inverse function and then convert raw bytes to varchar2\. Use `utl_raw.cast_to_varchar2`.

# grails - 在 Grails 应用程序启动期间执行 SQL 插入

> ID：14452933
> 
> 赞同：6
> 
> 时间：2013-01-22T06:39:40.780
> 
> 标签：grails, datasource

我处于开发阶段，尝试使用内存数据库并在 Grails 应用程序启动期间加载一些数据。我的问题是，有没有办法编写/配置可以在启动期间执行的 SQL 插入语句。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T07:16:12.800

您可以在 BootStrap.groovy 中执行此操作。如果为`dataSource`bean 添加依赖注入，则可以将其与`groovy.sql.Sql`实例一起使用来进行插入：

```
import groovy.sql.Sql

class BootStrap {

   def dataSource

   def init = { servletContext ->
      def sql = new Sql(dataSource)
      sql.executeUpdate(
         'insert into some_table(foo, bar) values(?, ?)',
         ['x', 'y'])
   }
} 
```

不过，假设这些表是使用域类管理的，那么使用 GORM 可能会更好。例如运行类似的东西`new Book(author: 'me', title: 'some title').save()`

# jsf - 丰富：日历和默认时间

> ID：14452935
> 
> 赞同：1
> 
> 时间：2013-01-22T06:39:45.960
> 
> 标签：jsf, calendar, richfaces

我使用两个`<rich:calendar>`s 来允许用户仅使用全天输入日期范围（从、到）：

```
<rich:calendar
    id                  = "timeTo"
    value               = "#{listModel.rangeStopErrorTime}"
    datePattern         = "yyyy-MM-dd"
    valueChangeListener = "#{listController.filterFieldChanged}"
    enableManualInput   = "true"
/> 
```

如果用户想指定一天，我的开始日期和结束日期都将是相同的 ( `e.g., 2013-01-22T00:00:00`)。我想将该`to`字段的默认时间设置为一天结束（例如，`2013-01-22T23:59:59`）。我尝试了`defaultTime`属性

```
<rich:calendar
    id                  = "timeTo"
    value               = "#{listModel.rangeStopErrorTime}"
    datePattern         = "yyyy-MM-dd"
    defaultTime         = "23:59:59"
    resetTimeOnDateSelect = "true"
    valueChangeListener = "#{listController.filterFieldChanged}"
    enableManualInput   = "true"
/> 
```

但只有当我将 更改`datePattern`为包含时间 ( `datePattern = "yyyy-MM-dd HH:mm:ss"`) 并且时间将显示在输入字段中时它才有效。

有没有办法指定默认时间而不向用户显示？

**更新**：

*   `rangeStopErrorTime``java.util.Date`是一个带有标准 getter 和 setter的简单属性：

    ```
    private Date rangeStopErrorTime;

    public Date getRangeStopErrorTime()
    {
        return rangeStopErrorTime;
    }

    public void setRangeStopErrorTime( Date rangeStopErrorTime )
    {
        this.rangeStopErrorTime = rangeStopErrorTime;
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:28:27.830

正如 Luiggi Mendoza 所说，你应该在 bean 中这样做。在提交时设置时间。

# java - Android中的垂直滑动菜单

> ID：14452938
> 
> 赞同：9
> 
> 时间：2013-01-22T06:40:01.797
> 
> 标签：java, android, android-menu, android-sliding

是否有适用于 android 的垂直滑动菜单。我需要类似于 Google Plus 应用程序的滑动菜单但我需要它能够从下到上垂直滑动。

![谷歌加滑动菜单](../Images/978521923f5ac97cdec98cf72d02f290.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T06:43:15.327

此 UI 模式目前被称为侧边导航，并在此处进行了详细讨论：

[http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)

我想这就是你要找的:)

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

Android SDK 中（尚未）包含侧边导航。在 github 中快速搜索确实会发现一个已实现 UI 模式的项目。

这是另一个库项目：

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

还有两个图书馆项目：

[https://bitbucket.org/jfeinstein10/slidingmenu/overview](https://bitbucket.org/jfeinstein10/slidingmenu/overview)
[https://github.com/Gregadeaux/android-fly-in-app-navigation](https://github.com/Gregadeaux/android-fly-in-app-navigation)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T07:07:53.377

首先，

我认为滑动菜单用于标准 UI 模式中的视图之间的导航，请参阅[Drawers](http://developer.android.com/design/patterns/actionbar.html)，因此，如果您出于相同目的使用，则不要从底部显示它，这会使您的用户感到困惑。

如果你想实现类似的，你可以参考[link_1](https://stackoverflow.com/questions/14057367/exact-procedure-to-add-jfeinstein10-slidingmenu-in-android-project)，[link_2](https://stackoverflow.com/questions/3928488/how-can-i-create-a-sliding-layout-like-the-main-android-menu)

否则，如果你仍然想要从底部有一些链接，比如

[如何创建像 gmail android 这样的底部菜单](https://stackoverflow.com/questions/10855148/how-to-create-bottom-menu-like-gmail-android)，

[http://www.androidhive.info/2011/09/how-to-create-android-menus/](http://www.androidhive.info/2011/09/how-to-create-android-menus/) ,

[Android SlidingDrawer 从顶部？](https://stackoverflow.com/questions/3695856/android-slidingdrawer-from-top/11227689#11227689),

[http://www.anddev.org/viewtopic.php?p=16622](http://www.anddev.org/viewtopic.php?p=16622) ,

[http://androidblogger.blogspot.in/2009/01/sliding-drawer-again.html](http://androidblogger.blogspot.in/2009/01/sliding-drawer-again.html)

[Android SlidingDrawer 从顶部？](https://stackoverflow.com/questions/3695856/android-slidingdrawer-from-top/11227689#11227689)

也有弃用的[文档](http://developer.android.com/guide/practices/ui_guidelines/menu_design.html)，但您仍然可以参考它的想法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:48:45.070

您可以通过计算屏幕宽度将屏幕滚动 80%，我也仅通过编程实现了相同的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:44:12.090

我不知道具有垂直滑动菜单的滑动菜单实现，但是有一个使用标准滑动菜单的滑动菜单实现。我认为大部分工作都在那里完成，因此您可以尝试更改它并使其垂直显示。

这是我在我的应用程序中使用的实现。[点击](https://github.com/jfeinstein10/SlidingMenu)

这是非常容易使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T13:20:07.580

@AndroidLearner 写的时候答案非常好。
然而，从那以后，谷歌发布了自己的关于导航抽屉的实现和设计指南：http:
[//developer.android.com/design/patterns/navigation-drawer.html](http://developer.android.com/design/patterns/navigation-drawer.html) [http://developer.android.com/training/implementing -导航/导航抽屉.html](http://developer.android.com/training/implementing-navigation/nav-drawer.html)

# svn - SVN 不考虑提交 .a 库文件

> ID：14452939
> 
> 赞同：1
> 
> 时间：2013-01-22T06:40:06.043
> 
> 标签：svn

我有一个外部库，我需要将其添加到我现有的项目中。

这些步骤说将库添加到项目文件夹并将项目复制到目标组的文件夹并选择目标。（我们通常执行的添加文件的步骤）

但是，在提交时，SVN 会选择 .h 文件而不是 library(.a) 文件。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T06:44:35.483

您必须再次添加静态文件。您可以使用`svn add`命令在svn中添加静态文件。然后再次提交代码。

更新：在 XCode 中，您可以右键单击 .a 文件，`Source Control--> Add.`然后它将显示已添加（A）状态。然后从 Xcode 提交代码。

# android - LAYER_TYPE_HARDWARE 并绘制到缓存

> ID：14452940
> 
> 赞同：2
> 
> 时间：2013-01-22T06:40:06.763
> 
> 标签：android, hardware-acceleration

视图可以有一个图层类型为 LAYER_TYPE_HARDWARE (view.setLayerType(LAYER_TYPE_HARDWARE, null))，它告诉它将缓存绘制到 GPU 中。我怎么知道这个缓存被绘制的频率？它的规则是什么？我会假设每次视图调用 invalidate 或 onDraw LAYER_TYPE_HARDWARE 必须创建一个新的缓存。如果这是真的，对于经常调用 onDraw 的视图，最好不要使用 LAYER_TYPE_HARDWARE，因为有两倍的工作（因为绘制到不被使用的缓存会是开销）。

无论如何，我看不到可以记录的钩子，并且将开发选项设置为在 GPU 上闪烁屏幕也看不到任何操作。

TL:DR，我如何知道何时创建了新的图层缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T20:58:25.410

> 我如何知道何时创建了新的图层缓存？

它是在您第一次调用 view.setLayerType(LAYER_TYPE_HARDWARE, null) 时创建的

在幕后，会拍摄您的视图快照并将其作为纹理上传到 GPU。

> 我怎么知道这个缓存被绘制的频率？它的规则是什么？

如果您正在更改某些属性，例如 alpha、视图坐标、缩放或旋转视图，则不会将新纹理上传到 GPU。这就是为什么硬件层适用于某些类型的动画的原因，因为您基本上只需将转换矩阵发送到 GPU 即可，而不是重绘（因此在层的情况下重新上传纹理）。

如果您更改视图的任何其他属性，则会将新纹理上传到 GPU，如果您在动画中执行此操作，这可能会很昂贵。

> 我会假设每次视图调用 invalidate 或 onDraw LAYER_TYPE_HARDWARE 必须创建一个新的缓存。

要看。如上一段所述，如果您使用 alpha、x、y、缩放和旋转等图层友好属性，则无效不会导致重绘。在这种情况下，不会上传新纹理。

但是，由于其他属性的更改而失效将导致纹理上传，并且比仅绘制没有图层的速度要慢。

# twitter-bootstrap - 使用 rails 3.2.11、simple_form 和 bootstrap 添加日期选择器

> ID：14452942
> 
> 赞同：2
> 
> 时间：2013-01-22T06:40:19.887
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, simple-form

我正在尝试在我的 simple_form 中实现 datepicker，就像这里已经介绍的那样：[我如何为 SimpleForm 编写更清晰的日期选择器输入](https://stackoverflow.com/questions/5007785/how-do-i-write-a-cleaner-date-picker-input-for-simpleform/5079761#5079761)

我创建自定义类：

```
# app/inputs/date_picker_input.rb
class DatePickerInput < SimpleForm::Inputs::StringInput
....
end 
```

然后我添加：`$("input.date_picker").datepicker();

在 application.js 的底部并使用代码：

```
<%= f.input :deadline, :as => :date_picker %> 
```

但是，不会激活日期选择器，也不会引发错误。这可能是我没有正确理解资产管道的问题吗？我的 application.js 还包含： //= 需要 jquery.ui.datepicker.min

我还在我的应用程序的单独页面上使用 datepicker，它不使用 simple_form，因此 datepicker 本身正在工作。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:57:35.757

确保在您的 JavaScript 中调用 datepicker（如果您的表单中的 datepicker 类不同，请更改它）：

```
$(function() {
  $('input.datepicker').datepicker();
}); 
```

您还可以检查 [我如何为 SimpleForm](https://stackoverflow.com/questions/5007785/how-do-i-write-a-cleaner-date-picker-input-for-simpleform) 或[https://github.com/plataformatec/simple_form/issues/75#issuecomment-448362编写更清晰的日期选择器输入](https://github.com/plataformatec/simple_form/issues/75#issuecomment-448362)

# c++ - 在模板声明中使用 min、max

> ID：14452943
> 
> 赞同：1
> 
> 时间：2013-01-22T06:40:30.880
> 
> 标签：c++, templates

假设我有一个多项式类，其中度数由模板控制，例如：

```
template<int degree>
class Polynomial {
....
} 
```

如何创建一个添加函数来添加两个可能不同程度的多项式？理想情况下，它会像

```
template<int degree1, int degree2>
Polynomial<max(degree1, degree2)> Add(Polynomial<degree1> poly1, Polynomial<degree2> poly2)
{
...
} 
```

有没有办法在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:52:16.050

`constexpr`在 C++11 中，您可以为此使用函数：

```
constexpr int max(int n1, int n2)
{ return (n1>n2?n1:n2); }

template <int N1, int N2>
Polynomial<max(N1,N2)> add(const Polynomial<N1> &p1, const Polynomial<N2> &p2)
{ return /*...*/ } 
```

而在 C++11 之前的版本中，没有`constexpr`函数的概念，但仍然可以直接使用三元条件运算符：

```
template <int N1, int N2>
Polynomial<(N1>N2?N1:N2)> add(const Polynomial<N1> &p1, const Polynomial<N2> &p2)
{ return /*...*/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:52:09.493

```
template<int degree>
class Polynomial{
...
};

template<int degree1, int degree2>
Polynomial<(degree1<degree2)?degree2:degree1>
Add(Polynomial<degree1> poly1, Polynomial<degree2> poly2)
{
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:24:43.453

使用[`std::min`](http://en.cppreference.com/w/cpp/algorithm/min)或[`std::max`](http://en.cppreference.com/w/cpp/algorithm/max)来自算法头：

```
#include <algorithm>

template<int degree1, int degree2>
Polynomial<std::max(degree1, degree2)> Add(Polynomial<degree1> poly1, Polynomial<degree2> poly2)
{
    // ...
} 
```

# ssl - 如何通过 SSL 实现 RESTful 服务？

> ID：14452946
> 
> 赞同：0
> 
> 时间：2013-01-22T06:40:40.597
> 
> 标签：ssl, ssl-certificate, restful-authentication, restful-architecture

当我在 Eclipse 中运行我的 RESTful 客户端时，出现以下错误：

```
java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(Unknown Source)
    at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source)
    at sun.net.www.protocol.https.HttpsClient.New(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)
    at com.elkay.client.RestClient.main(RestClient.java:23) 
```

在浏览器中调用时，不会阻止 URL。如何通过客户端使用它？

蒂亚！

编辑：（客户端代码）

```
public class RestClient {

    public static void main(String[] args) {

          try {

            URL url = new URL("https://www.xyz.com");

            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            DataOutputStream printout = new DataOutputStream(conn.getOutputStream());  
            String authString=URLEncoder.encode("username=anushree&password=anushree","UTF-8");  
            printout.writeBytes (authString);  
            printout.flush ();   
            printout.close ();  

            conn.setRequestMethod("GET");
            conn.setRequestProperty("Accept", "application/json");

            if (conn.getResponseCode() != 200) {
                throw new RuntimeException("Failed : HTTP error code : "
                        + conn.getResponseCode());
            }

            BufferedReader br = new BufferedReader(new InputStreamReader(
                (conn.getInputStream())));

            String output;
            System.out.println("Output from Server .... \n");
            while ((output = br.readLine()) != null) {
                System.out.println(output);
            }

            conn.disconnect();

          } catch (MalformedURLException e) {

            e.printStackTrace();

          } catch (IOException e) {

            e.printStackTrace();

          }

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:05:06.227

也试试这样。//在头部设置基本认证

```
 String userPassword = "password"; 
 String encoding = new sun.misc.BASE64Encoder().encode(userPassword.getBytes()); 
 conn.setRequestProperty("Authorization", "Basic " + encoding); 
 String parameters = "username=" + URLEncoder.encode("user1", "UTF-8") + "&password=" + URLEncoder.encode("user1password", "UTF-8"); 
 printout.writeBytes (parameters); 
```

# python - 使用 Django 消息框架显示特定消息

> ID：14452947
> 
> 赞同：1
> 
> 时间：2013-01-22T06:40:44.770
> 
> 标签：python, django

我试图只显示一条消息，如果它存在的话。我试过这个，但它不工作：

鉴于：

```
 messages.success(request, "some message", extra_tags="account_activated") 
```

在模板中：

```
 {% if messages %}
        {% for message in messages %}
            {% ifequal message.tag "account_activated" %}
                <p>{{ message }}</p>
            {% endifequal %}
        {% endfor %}
    {% endif %} 
```

如果我删除`{% ifequal message.tag "account_activated" %}`它有效。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:41:32.267

首先，它是`message.tags`而不是`message.tag`。其次，`message.tags`将包含由空格分隔的消息的所有标签，而不仅仅是`extra_tags`.

对于您的示例，`message.tags`应该等于`'account_activated success'`.

[请参阅此处](https://github.com/django/django/blob/master/django/contrib/messages/storage/base.py#L42 "django.contrib.messages.storage.base 源代码")的源代码。

# jquery - jQuery Ajax：插入到 有时会失败？

> ID：14452952
> 
> 赞同：1
> 
> 时间：2013-01-22T06:41:30.137
> 
> 标签：jquery, ajax

我经常使用 jQuery Ajax 来更新 HTML 页面中的 div。ajax 包含在 $(document).read(...) 中，如下所示：

```
$(document).ready(function() {
  $('a.button').click(function() {
    var url = $(this).attr('href');
    $('#content').load(url);
    return false;
  });
}); 
```

但是，单击按钮后，Ajax 有时会失败，它会在整个页面中显示结果，而不是在“内容”div 中。这在页面加载或刷新时经常发生。但我认为 $(document).ready(...) 会阻止这种情况发生。什么地方出了错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:46:02.423

试试这个

```
 $(document).ready(function () {
     $('a.button').click(function () {
     var url = $(this).attr('href');        

    $.get(url, function(data) {
       $('#content').html(data);    
        });
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:54:52.797

> Ajax 有时会失败，它会在整个页面中显示结果

这表明未使用选择器选择超链接`a.button`。确保要通过 AJAX 加载的超链接具有类名`button`，如下所示：

```
<a class="button" href="..."> 
```

如果您希望通过 AJAX 加载所有超链接，请移除按钮选择器。

```
$(document).ready(function() {
  $('a').click(function() {
    ... ...
  });
}); 
```

如果某些超链接是在另一个脚本加载页面后动态创建的，请尝试以下操作：

```
$(document).ready(function() {
  $('body').on('click', 'a', function() {
    ... ...
  });
}); 
```

# json - 如何加载具有多个根元素的 json 存储？

> ID：14452955
> 
> 赞同：5
> 
> 时间：2013-01-22T06:41:41.620
> 
> 标签：json, extjs, jsonstore

在我的一个项目中，我需要使用 JSOn 服务器响应加载 Json 存储，如下所示。在 JSON 响应中，我得到 2-3 个根元素。但在商店配置中，我只能提供 1 个根元素。

```
{
    {"level2List":[{id:'id1', name:'sample'},....]},
    {"level3List":[{id:'id1', name:'sample'},....]},
    {"level4List":[{id:'id1', name:'sample'},....]}
} 
```

我的商店配置如下。

```
store = new Ext.data.JsonStore({
// store configs
storeId: 'myStore',
proxy: {
    type: 'ajax',
    url: 'xml/getKpiInputData.json',
    reader: {
        type: 'json',
        root: 'level3List',
        idProperty: 'name'
    }
},
fields: [
        {name: 'name'},
        {name: 'id'},
       ...
    ],
remoteFilter: false,
remoteSort: true,
    pageSize: 10,
autoLoad: {start: 0, limit: 10}
 }); 
```

如果我给出 1 个根元素（例如 level3List），它会正确加载相应的项目。但我需要从多个根元素加载数据的解决方案。请帮助我将数据加载到商店。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T07:32:32.907

如果您使用的是 4.x，则 root 参数可以是一个函数：

```
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['name']
});

Ext.require('*');

Ext.onReady(function(){

    var store = new Ext.data.Store({
        model: MyModel,
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: function(o){
                    var out = [];
                    return out.concat(o.root1, o.root2, o.root3);
                }
            }
        },
        data: {
            root1: [{
                name: 'Item 1'
            }],
            root2: [{
                name: 'Item 2'
            }],
            root3: [{
                name: 'Item 3'
            }]
        }
    });

    store.load();
    console.log(store.getCount());
}); 
```

# ms-access - 使用类 Microsoft Access 查询的结果

> ID：14452961
> 
> 赞同：0
> 
> 时间：2013-01-22T06:42:06.487
> 
> 标签：ms-access

如何在查询的每一行中初始化和使用 My Class 的属性/方法。

在此示例中，我有一个带有方法**Add**和属性**Result的类**

我的表有两列，有两个值（v1 和 v2）

我想创建一个使用我的类将两个数字相加的查询，因此生成的查询将包含三列：

```
v1, v2, Class.Result 
```

某处/我需要如何打电话

```
New Class()
Class.Add(v1,v2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:45:39.037

您可以在查询中调用函数。创建一个将这两个值作为输入参数并返回所需值的函数。将为每个记录评估该函数，这意味着性能会影响大型记录集，但它会满足您的需要。

# wcf - 底层连接被关闭：连接被意外关闭

> ID：14452970
> 
> 赞同：0
> 
> 时间：2013-01-22T06:42:41.250
> 
> 标签：wcf

以下是我的 web.config 文件中的服务模型配置：

```
 <system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="true" />
        <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="true" />
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IDataPortal" closeTimeout="01:00:00" openTimeout="01:00:00" receiveTimeout="01:00:00" sendTimeout="01:00:00"
       allowCookies="false" bypassProxyOnLocal="true" hostNameComparisonMode="StrongWildcard"
       maxBufferPoolSize="524288" maxBufferSize="65536" maxReceivedMessageSize="65536"
       textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true" messageEncoding="Text">
        <readerQuotas maxDepth="64" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="4096"
                      maxNameTableCharCount="2147483647"/>
        <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None" realm=""></transport>
          <message clientCredentialType="UserName" algorithmSuite="Default"/>
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://localhost:4481/MyDataService.svc"
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IDataPortal"
              name="BasicHttpBinding_IDataPortal"
              contract="eBusiness_Core.Contracts.ServiceContracts.IBusinessData">
    </endpoint>
  </client>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

当我在 WCF 测试客户端中检查 WCF 方法的执行时，它会执行调用，但最后它会返回一个异常，提示“底层连接已关闭：连接已意外关闭”。我在 WCF 服务中使用了自定义类型，并使用“DataContract”和“Serializable”这两个属性来装饰它们。当我检查一个返回字符串的简单方法时，它工作正常。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:04:08.713

在升级 POCO 生成器类以使用 EF 5.0 后，这开始正常工作

# jquery - 想要在 flexigrid 列中打印脚本标签

> ID：14452974
> 
> 赞同：1
> 
> 时间：2013-01-22T06:42:48.633
> 
> 标签：jquery, ajax, flexigrid

我想在 flexigrid columnn 中打印一个 url，
即 `http://www.test.com?q=zys&y=<script>alert("A")</script>&n=y`

但是当我尝试使用 ajax 传递它时，它的显示错误。如果我使用标签，那么它可以解决问题，但使用格式和标签无法解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:12:19.557

使用 < 和> 而不是 < 和 >。这应该够了吧

# android - 重新创建媒体记录器android时相机锁定失败异常

> ID：14452976
> 
> 赞同：1
> 
> 时间：2013-01-22T06:42:58.250
> 
> 标签：android, android-camera, android-mediarecorder

我正在使用媒体记录器进行视频录制。

为此，我使用了下面的代码。

```
private void prepareMediaRecorder(boolean vsize) {
        mrec = new MediaRecorder();
        mrec.setOnErrorListener(new OnErrorListener() {

            @Override
            public void onError(MediaRecorder mr, int what, int extra) {
                // TODO Auto-generated method stub
                if (extra == -1007)
                {
                    prepareMediaRecorder(false);
                }
                else
                {
                unableToRecord();
                }
            }
        });

        camera.lock();
        camera.unlock();
        mrec.setCamera(camera);
        mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
        mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mrec.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        if (vsize)
            mrec.setVideoSize(getMaxSupportedVideoSize().width,
                    getMaxSupportedVideoSize().height);
        else
        mrec.setVideoSize(640, 480);

        mrec.setOutputFile(path + filename);
        mrec.setMaxDuration(30000);
        mrec.setPreviewDisplay(surfaceHolder.getSurface());

        if (!onlyback
                && currentapiVersion >= android.os.Build.VERSION_CODES.GINGERBREAD) {
            if (open_camera == 1)
                mrec.setOrientationHint(270);
            else
                mrec.setOrientationHint(90);
        } else if (currentapiVersion >= android.os.Build.VERSION_CODES.GINGERBREAD) {
            mrec.setOrientationHint(90);
        }
        try {
            mrec.prepare();
            mrec.start();

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

在上面的代码中，当调用媒体记录器错误侦听器时，我正在重新创建具有其他视频大小的媒体记录器，但是在执行此操作时，我得到了相机锁定异常。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:31:58.950

**这就是我解决尝试使用在不同设备上可能或可能不可用的某些视频录制大小的问题的方法。**我首先尝试以理想的分辨率进行录制，然后使用 try-catch 块来关闭并重新尝试以不同的分辨率打开摄像机。*由于对`CamcorderProfile`s 的支持增加，这对于未来的 android 版本可能不会是一个大问题，但到目前为止，有许多设备根本无法准确地共享可用的视频分辨率。*

我从一个活动中调用`initializeVideoRecorder`fn 并使用我创建的一个名为 a 的自定义类`PreviewSize`，它基本上只是一个整齐打包的宽度和高度。我在上面定义了这些常量`PreviewSize`。

我认为重要的是在尝试连接到不同的预览大小之前释放所有内容并重试。我使用该`releaseVideoCamera`功能执行此操作。您还在`lock`之前打电话，`unlock`这似乎可能有问题（也许不是）。

无论如何，这是我的代码。我删除了一些部分，并省略了与您的需求无关的某些功能：

```
/**Standard 720p video size (1280x720) for both front and back.*/
private static final PreviewSize DEFAULT_VIDEO_SIZE = new PreviewSize(720, 1280);
/**Fallback 480p video size (720x480) for back cameras that don't support 720p */
private static final PreviewSize BACKUP_VIDEO_SIZE = new PreviewSize(480, 720);
/** Default pre-ICS front facing camera size (a version of 480p) */
private static final PreviewSize PRE_ICS_DEFAULT_FRONT_VIDEO_SIZE = new PreviewSize(480, 640);

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public boolean initializeVideoRecorder(){

        if (! externalStorageAvailable()) return false;

        mCamera.stopPreview();

        if (ApiHelper.PRE_ICS && mCameraSide == CameraUtils.FRONT_FACING_CAMERA){
            return initializeVideoRecorderWithoutCamcorderProfile(PRE_ICS_DEFAULT_FRONT_VIDEO_SIZE);
        } else return initializeVideoRecorderWithoutCamcorderProfile(DEFAULT_VIDEO_SIZE);

    }

    @TargetApi(Build.VERSION_CODES.GINGERBREAD)
    private boolean initializeVideoRecorder(PreviewSize videoSize){
        mCamera.unlock();
        mVideoRecorder = new MediaRecorder();
        mVideoRecorder.setCamera(mCamera);
        mVideoRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mVideoRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        CamcorderProfile dummyCamcorderProfile;
        if (Build.VERSION.SDK_INT > 8) dummyCamcorderProfile = CamcorderProfile.get(mCameraSide, CamcorderProfile.QUALITY_HIGH);
        else dummyCamcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);

        customSetProfile(dummyCamcorderProfile);

        mVideoRecorder.setVideoSize(videoSize.height, videoSize.width);

            //Set the orientation hint here if need be... i left that code out

        mVideoFile = someFunctionThatGivesYouAVideoFile();
        mVideoRecorder.setOutputFile(mVideoFile.toString());
        mVideoRecorder.setPreviewDisplay(yourCameraSurface);

        try {
            mVideoRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseVideoCamera();
            return false;
        } catch (IOException e) {
            Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
            releaseVideoCamera();
            return false;
        }

        try {
            mVideoRecorder.start();
        } catch (RuntimeException e) {
            releaseVideoCamera();
            if (videoSize.equals(DEFAULT_VIDEO_SIZE)) {
                if (mCameraSide == CameraUtils.BACK_FACING_CAMERA) return initializeVideoRecorder(BACKUP_VIDEO_SIZE);
                else return initializeVideoRecorder(PRE_ICS_DEFAULT_FRONT_VIDEO_SIZE);
            }
            else return false;
        }

        return true;
    }

  public void customSetProfile(CamcorderProfile profile) {
        mVideoRecorder.setOutputFormat(profile.fileFormat);
        mVideoRecorder.setVideoFrameRate(profile.videoFrameRate);
        mVideoRecorder.setVideoEncoder(profile.videoCodec);
        mVideoRecorder.setVideoEncodingBitRate(1000000);
        mVideoRecorder.setAudioEncodingBitRate(profile.audioBitRate);
        mVideoRecorder.setAudioChannels(profile.audioChannels);
        mVideoRecorder.setAudioSamplingRate(profile.audioSampleRate);
        mVideoRecorder.setAudioEncoder(profile.audioCodec);
    }

  public void releaseVideoCamera(){
        mVideoRecorder.reset();
        mVideoRecorder.release();
        mVideoRecorder = null;
        try {
            mCamera.reconnect();
        } catch (IOException e) {
                // TODO: handle this exception...
        }
        mCamera.lock();
    } 
```

# android - RFCOMM 接收缺少 1 个 L2CAP 数据包的数据

> ID：14452977
> 
> 赞同：1
> 
> 时间：2013-01-22T06:43:00.893
> 
> 标签：android, bluetooth, rfcomm

我使用蓝牙的 RFCOMM 编写了 android 应用程序。我通过相同的 RFCOMM UUID 向 android 应用程序发送 1 MB 数据。

我注意到我的应用程序中丢失了 1 个 L2CAP 数据包数据。有关详细信息，请参阅以下信息。

我的 android 移动蓝牙支持最大 RFCOMM 有效负载为 990 字节，因此远程设备正在发送每个有效负载为 990 字节的 L2CAP 数据包。每当我从远程设备发送 1K 的数据时，它都被分成 2 个 L2CAP 数据包，每个数据包 990 和 34 字节。

在我的 android 应用程序中接收到数据后，我检查了每个 1K 数据，我注意到 1 个 L2CAP 数据包，即 android 中跳过了 990 个字节。

我使用分析仪检查了从远程设备发送的所有数据。它完美地发送 1 MB 数据而没有任何失败。

但仅在我的 android 应用程序中，我无法接收。这不是我的应用程序的问题，因为我在这里使用了蓝牙聊天示例代码。

我对此进行了多次测试，每次运行测试时丢失的 990 字节数据在 1MB 数据中的索引不同。

我用 3 部 android 2.2、2.3.3 和 2.3.6 版本的手机对此进行了测试，每部手机都面临同样的问题

但是在从 RFCOMM 套接字的 InputStream 接收数据时，我也没有遇到任何异常。

如果有人遇到并解决了我的问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:22:55.673

您能否使用 HCIDump 工具检查两个设备之间传输/接收的 ACL 数据。如果数据与 HCI ACL 数据包/发送和接收匹配，则接收端的 L2CAP 正在丢弃一些数据包。

看看这个链接，看看 mtu 是否会导致这个问题。

[http://people.csail.mit.edu/albert/bluez-intro/x559.html](http://people.csail.mit.edu/albert/bluez-intro/x559.html)

谢谢马尼文南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:17:37.243

您可能希望在发送完所有数据后刷新流，RFCOMM 可能会缓冲一些等待其 PDU 填充的数据。看到这个 - [OutputStream::flush()](http://developer.android.com/reference/java/io/OutputStream.html#flush%28%29)

# linux - 如何删除文件中的重复出现？

> ID：14452979
> 
> 赞同：1
> 
> 时间：2013-01-22T06:43:14.130
> 
> 标签：linux, bash, grep

我是 bash 编程的新手（grep/uniq/sort/etc...），我无法尝试从给定格式的文件中删除重复项

```
--
name: joe
tag: 123
--
name: mike
tag: 000
--
name: dave
tag: 123
--
name: loopy
tag: 123
-- 
```

基本上我想要的是删除文件中具有相同标签号的重复项，如下所示：

```
--
name: joe
tag: 123
--
name: mike
tag: 000
-- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:42:53.437

这个任务非常适合 awk。如果你有 gawk 或 mawk 可用，你可以通过适当地设置记录分隔符来完成它：

```
awk -v RS='--\n' -v ORS='--\n' '!h[$4]++' infile 
```

输出：

```
--
name: joe
tag: 123
--
name: mike
tag: 000
-- 
```

这通过记住已看到的标签 ( `h[$4]++`) 起作用，即每条记录中的第四个元素。增量前面的 bang ( `!`) 确保条件仅在`h[$4]`为零时为真，因此默认规则 ( `{ print $0 }`) 仅在第一次看到标签时调用。

稍短的版本：

```
awk '!h[$4]++' RS='--\n' ORS='--\n' infile 
```

### 编辑 - 处理名称字段有空格的记录

如果名称字段有空格，则字段计数会有所不同。您可以通过稍微不同的字段拆分来处理此问题：

```
awk '!h[$4]++' RS='--\n' ORS='--\n' FS='\n| *: *' infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:58:52.057

```
awk '/name/{x=$0}/tag/{a[$0]++;if(a[$0]<2){print "--\n"x,"\n",$0"\n--"}}' your_file 
```

测试如下：

```
> cat temp
--
name: joe
tag: 123
--
name: mike
tag: 000
--
name: dave
tag: 123
--
name: loopy
tag: 123
--
> awk '/name/{x=$0}/tag/{a[$0]++;if(a[$0]<2){print "--\n"x,"\n",$0"\n--"}}' temp
--
name: joe 
 tag: 123
--
--
name: mike 
 tag: 000
-- 
```

`/name/`{将行存储在一个变量中，这样如果下一个标签不是重复的，我们就可以使用这个临时变量。}

`/tag/`{用行数构建一个关联数组。多于一个会导致重复。所以仅当计数为 1 时才打印}

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-22T08:21:06.573

如果 foobar 是包含删除重复行的文件：

```
awk '{ if (arry[$3]++ == 0) print $0; }' foobar 
```

数组中的 $3 表示仅根据第 3 列中的值删除重复项。如果要删除整个重复行，请改用 $0。

以这种方式使用 awk 具有不改变输入行的顺序（sort/uniq 所做的）的额外优势。

# javascript - 动态创建时缺少 jsTree 功能

> ID：14452983
> 
> 赞同：1
> 
> 时间：2013-01-22T06:43:24.580
> 
> 标签：javascript, ajax, vb.net, web-services, jstree

我已经动态创建了一个 jsTree，该树是使用字符串生成器从 Web 服务创建的。

```
 Dim oSB As StringBuilder = New StringBuilder
  oSB.Append("<div id='main'>")
   SB.Append("<h4>JSTree</h4>") 
  oSB.Append("<ul id='browser' class='filetree'><li><span class='folder' >Folder         1</span> <ul><li><span class='file'>Item 1.1</span></li></ul></li><li><span c   class='folder'>Folder 2</span> <ul><li><span class='folder'>Subfolder 2.1</span><ul id='folder21'> <li><span class='file'>File 2.1.1</span></li><li><span class='file'>File 2.1.2</span></li></ul></li><li><span class='file'>File 2.2</span></li></ul></li><li class='closed'><span class='folder'>Folder 3 (closed at start)</span><ul><li><span class='file'>File 3.1</span></li>    <li><span class='file'>File 3.2</span></li></ul></li><li><span class='file'>File 4</span></li></ul>")
 oSB.Append("</div>") 
```

树已形成，但缺少节点的最小化和最大，我认为这可能是脚本未加载或其他问题，因为 html 页面中的同一棵树工作得很好。我将树归还给 Ajax 作为

```
 $("div").html(data.d); 
```

谁能帮帮我，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:44:48.650

实际上我明白了，我错过了（一个简单的部分）在 Ajax 返回值后调用树视图函数。

```
 function OnLoadSectionSuccess(data) {
            $("#div").html(data.d);
            $("#div").treeview({
                animated: "fast",
                collapsed: true
            });            
    } 
```

在我添加这个之后，树工作正常。无论如何感谢您的时间。

干杯

# java - java中的审计和数据历史

> ID：14452986
> 
> 赞同：5
> 
> 时间：2013-01-22T06:43:29.200
> 
> 标签：java, hibernate, hibernate-envers, auditing, revision-history

我有一组*域对象*及其用于应用程序配置的相关表。经过身份验证的用户可以通过表示层更改这些*域对象数据。*这些 *域对象*具有非常重要的数据，我需要找出谁以及何时更改了他们的数据。我的应用程序的*数据访问*层是使用 JPA、Hibernate 和 Spring 实现的。我需要记录每次更改，包括：用户 + 操作日期 + 操作类型 + 以前的值。

例如，让我们考虑一个微不足道的*域对象*（为了这个问题的目的而简化）：

```
@Entity
class Connection
{
   private Long id;
   private String name;
   private String protocol;
} 
```

假设有一个`Connection`具有以下值的实例：

```
Connection 
    id = 1;
    name = Web;
    protocol = HTTPS; 
```

在用户（例如`John`）登录 UI 并将此连接更改为以下值后：

```
Connection
    id = 1;
    name = Web;
    protocol = HTTP; 
```

如您所见，John 将协议从更改`HTTPS`为`HTTP`（安全协议更改为不安全！），因此我需要将`Connection`实例的历史记录保存在另一个表中以进行审计。

我已经为我研究了一个解决方案，并发现了以下结果：

1.  **触发器：**一种可能性是在表上定义触发器，这种方式的缺点是依赖于数据库。
2.  **Hibernate Envers：**这个解决方案很好，但让我的*DAO*层依赖于 Hibernate，我不会享受 JPA 及其提供者独立性的好处。
3.  **Spring Data Commons + hades：**很好，但通过`MappedSuperClass`注释向任何实体添加了一些列，例如：`Create User`、、和。这意味着存储实体的完整历史和状态。`Create Date``Last Update User``Last Update Date`
4.  *我自己的设计/实现：* *我可以为这个目标实现一个层，但我不喜欢这个解决方案，因为我认为这个要求对我来说并不特别，我认为其他人已经按照最佳实践解决了它（我应该' t重新发明轮子）

有没有人对这个问题有任何建议或解决方案？

（对不起，如果我的问题很长，对于专家来说可能太基础了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:03:02.373

如果您已经使用 Hibernate：Hibernate Audit/Envers 是最好的解决方案。

看，如果你想摆脱 Hibernate，那么你可以切换到解决方案#1/#4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:44:16.763

我使用过许多系统，我们在数据库表中添加额外的列来跟踪用户 ID 和时间戳以进行审计。

如果您需要跟踪以前的值，您可以使用日期范围来判断数据何时有效。例如：

从 01.01.2012 到 31.12.2012 协议是 HTTPS 从 01.01.2013 到“永远”协议是 HTTP

有关时间模式的更多信息，请参阅 Martin Fowler 的[博客](http://martinfowler.com/eaaDev/timeNarrative.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T09:14:22.113

如果你不喜欢与具体的 ORM 耦合，你可以使用[http://javers.org](http://javers.org)，因为它更通用，并且支持 SQL 和 NoSql 数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T00:56:27.610

您可以轻松使用 Hibernate Envers 来实现灵活的审计。

我在 GitHub 上的项目中有一个小型启动示例[：jpauc-ear](https://github.com/slavikdobro/jpauc-ear/blob/master/jpauc-ejb/src/main/java/ru/mesotron/jpauc/domain/envers/AuditRevision.java)。并阅读带有使用示例的[官方文档。](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e3910)

# android - 如何在具有支持库的 svn 中放置一个 android 项目

> ID：14452987
> 
> 赞同：6
> 
> 时间：2013-01-22T06:43:33.990
> 
> 标签：android, svn

我已经为 android 项目使用了 svn，它运行良好..但是我的新项目有支持库项目，我需要包含在我当前的项目中......如何将项目与支持库一起放置到 svn。我已经在eclipse中手动放置了库并将项目放在svn中..但是它在项目中显示错误......请帮助我。编辑：它在任何 java 或 xml 文件中都没有显示任何错误，但是当我尝试运行它时，它说项目有错误。

![捕获我的工作空间](../Images/8da500bdd536836710873626504875a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:58:39.367

你检查过库和 android api 级别的依赖关系吗？编辑：右键单击项目-->属性--->构建路径-->项目--->删除现有项目-->添加新项目（滑出活动）

# iphone - 根据 JSON 响应在 Tapku 日历月上标记日期

> ID：14452995
> 
> 赞同：1
> 
> 时间：2013-01-22T06:44:40.043
> 
> 标签：iphone, ios, objective-c, tapku

我有 JSON 响应，它给了我一个月内安排事件的不同日期。我在 iOS 应用程序中使用 Tapku 日历。

我有以下问题：

1.  如何在 Tapku 日历中标记已安排活动的日期。我已经看到在两个日期之间生成随机日期来标记事件，但我希望从 Json 响应中收到我自己的日期。

2.  在上个月和下个月的点击中，如何获取 JSon 数据并在 Tapku 日历上标记日期？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:47:33.730

我不确定，但也许你可以`calendarMonthView`像下面这样标记这个代表的日期：-

```
-(NSArray *)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate
{
    // adds marks to the individual dates
    // return an array containing boolean values (YES/NO)
    // whether to mark the date[index];
} 
```

# perl - 根据解析参数检查条件

> ID：14452996
> 
> 赞同：0
> 
> 时间：2013-01-22T06:44:42.283
> 
> 标签：perl

我有一个要求，我已经收到了从文件到数组的输入。

例如，如果数组的内容为 2，<,3 分别为 $1、$2 和 $3。

我有一个字符串“2<3”。我需要检查条件的有效性，如果真的 2 是否小于 3。

如果输入对我来说是一个字符串，我如何发送 if() 条件的输入？

我最近被介绍给 Perl，并想探索更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:49:58.923

如果您的输入很简单（数字、运算符、数字），您可以通过以下方式解决：

```
#!/usr/bin/perl
use warnings;
use strict;

my $input = shift;
my ($num1, $op, $num2) = $input =~ /([0-9]+) *([<=>]) *([0-9]+)/;
if ('=' eq $op and $num1 == $num2
    or
    '<' eq $op and $num1 < $num2
    or
    '>' eq $op and $num1 > $num2) {
    print "Yes\n";
} else {
    print "No\n";
} 
```

或更短，使用“宇宙飞船”运算符`<=>`：

```
#!/usr/bin/perl
use warnings;
use strict;

my @operations = qw(= > <);

my $input = shift;
my ($num1, $op, $num2) = $input =~ /([0-9]+) *([<=>]) *([0-9]+)/;
if ($op eq $operations[$num1 <=> $num2]) {
    print "Yes\n";
} else {
    print "No\n";
} 
```

如果表达式是递归的（即`(2+3)>(4+7)`），您应该学习解析。我会推荐[Parse::RecDescent](http://p3rl.org/Parse%3a%3aRecDescent)或[Marpa::R2](http://p3rl.org/Marpa%3a%3aR2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:44:06.283

正如 Jonathan Leffler 所说，这很危险。你永远不应该运行这样的代码。这是非常危险的。

最简单（也是最危险）的方法当然是`eval`. 请参阅 Jonathan 在他的评论中链接的文档。

更安全的选择是使用[Safe](https://metacpan.org/module/Safe)。它创建了一个隔间，将语法的使用限制在您可以预先定义的 Perl 非常特定的部分。这是人们用来制作 IRC 机器人或可以运行 Perl 代码的网站的工具。一个很好的例子是 freenode 上#perl 中的 perlbot。

免责声明：**请仔细阅读文档**！不要只是复制这些东西。阅读有关[操作码](https://metacpan.org/module/Opcode#Predefined-Opcode-Tags)的说明！

这是一些示例代码。

```
use strict; use warnings;
use Safe;
$compartment = new Safe;
$compartment->permit(qw(:base_core));
$result = $compartment->reval(" 2 < 3 ? 1 : 0 "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:14:04.113

虽然你可以做一个花哨的`if`陈述，但它们往往非常冗长，而且容易出错。

```
if ('=' eq $op and $num1 == $num2
  or
    '<' eq $op and $num1 < $num2
  or
    '>' eq $op and $num1 > $num2) {
  print "Yes\n";
} else {
  print "No\n";
} 
```

或者（如果你小心的话）你可以使用[`eval()`](http://perldoc.perl.org/functions/eval.html).

```
# check $input here
...
$input =~ s/[^=]=[^=]/==/;
if( eval $input ){ ... 
```

尽管每次使用时都必须编译每个输入。
以这种方式安全使用它也非常困难。

* * *

相反，我想向您展示一些高级 Perl 黑客技术。

虽然它确实使用[`eval()`](http://perldoc.perl.org/functions/eval.html)它，但它这样做很安全，因为我完全控制了它编译的内容。

```
#!/usr/bin/perl
use warnings;
use strict;

our %compare;
our $compare_match;
BEGIN{
  # list of simple ops
  my @ops = qw'< <= == != > >= lt le eq gt ge ne';
  for my $op (@ops){
    $compare{$op} = eval"sub{ \$_[0] $op \$_[1]}";
  }

  push @ops, '='; # for $compare_match
  $compare{'='} = $compare{'=='}; # copy sub

  # longest first
  @ops = sort { length($b) <=> length($a) } @ops;
  local $" #"
    = '|';
  $compare_match = eval"qr{(?:@ops)}";
}

sub check{
  my( $num1, $op, $num2 ) = @_;
  if( @_ == 1 ){
    ($num1,$op,$num2) = 
      $_[0] =~ /([0-9]+) \s* ($compare_match) \s* ([0-9]+)/x;
  } elsif( @_ != 3 ){
    die 'wrong number of arguments'; # could be improved
  }
  unless( $op and exists $compare{$op} ){
    die "unknown op of '$op'"; # could be improved
  }

  # the heart of this implementation
  return $compare{$op}->($num1,$num2);
} 
```

```
if( check('2<3') ){ # one arg
  print "Yes\n"; # <---
}else{
  print "No\n";
}
if( check('2>3') ){ # one arg
  print "Yes\n";
}else{
  print "No\n"; # <---
}

if( check(qw'2 < 3') ){ # three arg
  print "Yes\n"; # <---
}else{
  print "No\n";
}
if( check(qw'2 > 3') ){ # three arg
  print "Yes\n";
}else{
  print "No\n"; # <---
}

# dies
if( check(qw'2 **** 3') ){ ... } 
```

您应该注意到使用此方法添加更多比较操作是多么容易。
（我所要做的就是将它们添加到`@ops`in [`BEGIN{}`](http://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-ENDhttp://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END)）

# python - 选择安装 python 模块的位置

> ID：14452998
> 
> 赞同：1
> 
> 时间：2013-01-22T06:44:44.970
> 
> 标签：python, module

我有一个旧版本的 PyML，7.10，我想安装新版本 7.11。

为此，我下载了 PyML 并运行 setup.py。

但是，当我跑步时

```
sudo python setup.py install 
```

结果是：

```
running install
running build
running build_py
running build_ext
running install_lib
running install_egg_info
Removing /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML-0.7.11-py2.7.egg-info
Writing /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML-0.7.11-py2.7.egg-info 
```

这看起来很好而且花花公子，但是正在运行

```
print PyML.__file__ 
```

告诉我 python 在文件夹中查找 PyML

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML/ 
```

不是

`/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML-0.7.11-py2.7.egg-info`根据 setup.py，它是在哪里写的

因此我想将安装路径更改为`/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML/`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:47:19.877

它已经安装在那里。该`.egg-info`文件只是为 setuptools 提供了有关软件包的更多信息，例如版本、要求等，不应从那里移动。