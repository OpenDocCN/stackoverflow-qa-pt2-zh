# StackOverflow 问答 15550000-15550999

# php - Symfony2 中的高级翻译定制

> ID：15550002
> 
> 赞同：7
> 
> 时间：2013-03-21T14:16:07.363
> 
> 标签：php, symfony, translation

我有一个`Symfony2`项目，我正在使用`Translation`组件来翻译文本。我在`yml`文件中有所有翻译，就像这样

```
translation-identifier: Translated text here 
```

翻译文本看起来像这样`Twig`

```
'translation-identifier'|trans({}, 'domain') 
```

问题是，在某些情况下，我希望有两个不同的文本用于相同的翻译（*而不是复数*）。这是我希望它的工作方式：

1.  `yml`为需要不同文本的翻译在文件中定义两个文本。每个都有自己独特的后缀

    ```
    translation-identifier-suffix1

    translation-identifier-suffix2 
    ```

2.  定义一个**全局**规则，定义应该选择哪个后缀。伪代码如下：

    ```
     public function getSuffix() {
       return rand(0, 10) < 5 ? '-suffix1' : '-suffix2';
     } 
    ```

3.  Twig（和 PHP）看起来是一样的——我仍然只指定没有后缀的标识符。然后，翻译器会将后缀附加到标识符并尝试找到匹配项。如果没有匹配，它将尝试再次找到没有后缀的匹配。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T09:21:12.290

AFAIK，翻译组件不支持它。

但是如果你想要同样的行为，你可以通过覆盖翻译服务来做到这一点。

1）覆盖服务

```
# app/config/config.yml
parameters:
    translator.class:      Acme\HelloBundle\Translation\Translator 
```

首先，您可以将保存服务类名的参数设置为您自己的类，方法是在`app/config/config.yml`. 仅供参考：[https ://github.com/symfony/FrameworkBundle/blob/master/Resources/config/translation.xml](https://github.com/symfony/FrameworkBundle/blob/master/Resources/config/translation.xml)

2) 扩展提供的翻译器类`symfony framework bundle`。仅供参考：[https ://github.com/symfony/FrameworkBundle/blob/master/Translation/Translator.php](https://github.com/symfony/FrameworkBundle/blob/master/Translation/Translator.php)

3) 覆盖`trans`提供者的功能`translator component`。 [https://github.com/symfony/Translation/blob/master/Translator.php](https://github.com/symfony/Translation/blob/master/Translator.php)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T15:42:57.467

这是扩展的翻译类，以防万一有人需要它

```
<?php

    namespace Acme\HelloBundle\Translation;

    use Symfony\Bundle\FrameworkBundle\Translation\Translator as BaseTranslator;
    use Symfony\Component\Translation\MessageSelector;
    use Symfony\Component\DependencyInjection\ContainerInterface;

    class Translator extends BaseTranslator {

        const SUFFIX_1 = '_suffix1';
        const SUFFIX_2 = '_suffix2';

        private $suffix;

        public function __construct(ContainerInterface $container, MessageSelector $selector, $loaderIds = array(), array $options = array()) {
            parent::__construct($container, $selector, $loaderIds, $options);
            $this->suffix = $this->getSuffix($container);
        }

        public function trans($id, array $parameters = array(), $domain = 'messages', $locale = null) {     
            if ($locale === null)
                $locale = $this->getLocale();

            if (!isset($this->catalogues[$locale]))
                $this->loadCatalogue($locale);

            if($this->suffix !== null && $this->catalogues[$locale]->has((string) ($id . $this->suffix), $domain))
                $id .= $this->suffix;

            return strtr($this->catalogues[$locale]->get((string) $id, $domain), $parameters);
        }

        private function getSuffix($container) {
            return rand(0, 10) < 5 ? self::SUFFIX_1 : self::SUFFIX_2;
        }

    }

?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-14T08:52:51.800

从 Symfony 3 开始，Venu 的答案不再完全有效，因为`translator.class`不再使用该参数。

要加载您的自定义翻译器类，您现在需要创建一个编译器通道。

```
<?php

namespace Acme\HelloBundle\DependencyInjection\Compiler;

use Acme\HelloBundle\Translation\Translator;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class TranslatorOverridePass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $container->getDefinition('translator.default')->setClass(Translator::class);
    }
} 
```

并且这个编译器通道需要添加到容器中。

```
<?php

namespace Acme\HelloBundle;

use Acme\HelloBundle\DependencyInjection\Compiler\TranslatorOverridePass;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\HttpKernel\Bundle\Bundle;

class AcmeHelloBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        $container->addCompilerPass(new TranslatorOverridePass());
    }
} 
```

# .htaccess - 具有特定文件夹异常的 htaccess

> ID：15550007
> 
> 赞同：1
> 
> 时间：2013-03-21T14:16:29.537
> 
> 标签：.htaccess, exception, mod-rewrite, url-rewriting

我设置了一个 htaccess 文件以创建一个小型路由结构，其中 url 重定向到 index.php。我想添加一个异常，如果用户键入“/admin”和之后的任何内容，则 url 会重定向到 admin.php。

htaccess -

```
RewriteEngine On
RewriteBase /
RewriteRule ^admin/?(.*)$ admin.php?page=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

示例： http: [//mysite.com/admin/settings/](http://mysite.com/admin/settings/)应该指向 admin.php?page=settings，而[http://mysite.com/about/](http://mysite.com/about/)应该指向 index.php（此处不使用任何参数）。正则表达式真的不是我的一杯茶，尤其是当有多个条件需要考虑时。想法？

编辑：^admin/([^/]*)/? 解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:29:50.937

您可以在根目录中的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}   !admin\.php    [NC]
RewriteRule ^admin/([^/]*)/? /admin.php?page=$1  [NC,L]

RewriteCond %{REQUEST_URI}  !/admin/        [NC]
RewriteRule .*              /index.php      [NC,L] 
```

对于永久重定向，将 [NC],L] 替换为 [R=301,NC,L]

# php - 从 ftp 目录结构创建 jstree

> ID：15550019
> 
> 赞同：3
> 
> 时间：2013-03-21T14:16:48.533
> 
> 标签：php, ftp, jstree

我需要使用 jstree 来显示 ftp 帐户的 homedir 的目录结构。我不知何故陷入了检索完整目录结构的困境（并创建了一个 json 对象、xml 文件、html 代码等等）。这很可能是一件简单的事情，只是让我忘记了，但无论如何，这是我到目前为止所尝试的：

```
 function draw_tree($path)
         {
           global $con;
           $list = ftp_nlist($con,$path);
           $dirs = array(); $files = array();
           foreach($list as $file)
               {
                   if(ftp_is_dir($file))
                   {
                        $dir[] = array(
                            'attr' => array('data-path' => $path . '/' . $file,
                            'data' => $file,
                            'state' => 'closed',
                            'children' => // ??? some recursive function should 
                                          // probably go here                              
                        );

                   }
                   else {
                        $files[] = array(
                               'attr' => array('data-path' => $file)
                                        );
                   }
               }
               return array_merge($dirs,$files);
         } 
```

# android - 当 textView 是第一个时，Android Spinner 崩溃

> ID：15550022
> 
> 赞同：0
> 
> 时间：2013-03-21T14:16:52.557
> 
> 标签：android, android-spinner

当文本视图位于右侧时，我在它附近使用微调器和文本视图，但当我切换它们时，应用程序在 java 类的下面一行中崩溃

`spinner= (Spinner) findViewById(R.id.spinner)` 我的 xml 代码是

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="70"
        android:text="0"
        android:textSize="30sp" />

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginTop="5dp"
        android:layout_weight="30" />
</LinearLayout> 
```

现在当我把微调器放在第一位时，它的工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:25:23.393

我不认为这是你的问题，但你应该为你的 TextView 和 Spinner 将你的 android:layout_width 设置为 0dp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:32:21.373

项目 - >清理你的项目，

这只是因为您的 R.java 无法刷新。因此，当您更改小部件的顺序时，编译器首先等待 textview 但有微调器，因此您会得到 classCastException。

> java.lang.ClassCastException: android.widget.TextView 不能转换为 android.widget.Spinner

# java - Android 应用无法连接到以无线方式连接到网络的计算机

> ID：15550028
> 
> 赞同：0
> 
> 时间：2013-03-21T14:17:03.827
> 
> 标签：java, android, sockets

该应用程序使用套接字连接到计算机，但只有当计算机通过以太网电缆连接到网络时才会连接。我试过禁用防火墙，但这没什么区别。

计算机上服务器的代码：

```
int port = 7936;        

while(true){
ServerSocket server = new ServerSocket(port);
System.out.println("Waiting for client ...");
Socket client = server.accept();
System.out.println("Client from "+client.getInetAddress()+" connected");

InputStream in = client.getInputStream(); 
```

以及应用程序上客户端的代码：

```
Socket socket = new Socket(address,7936);
OutputStream out = socket.getOutputStream();
String action = "2";
byte[] actByte = action.getBytes();
out.write(actByte);
socket.close(); 
```

地址由用户输入定义，并且所有需要的权限都已在清单 xml 文件中设置。谢谢您的帮助。

编辑

很抱歉延迟回复给出的答案。从那以后，我已经能够在不同的网络上尝试该程序，并且它可以与无线连接的计算机一起使用，因此看起来问题出在网络而不是代码上。

感谢大家的回答，很抱歉花了这么长时间才回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:31:23.107

我在想的是套接字没有绑定到你认为的 IP 地址。您可能希望尝试使用[TcpListener](http://msdn.microsoft.com/en-gb/library/system.net.sockets.tcplistener.aspx)类，这样您就可以将它绑定到您想要的 IP 地址（网络适配器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:58:56.233

正如其他人所提到的，需要更多信息。当您断开计算机与有线连接的连接时，我假设它正在切换到 wifi 并且您已验证您在线。如果您使用 DHCP，您的计算机可能会获得不同的 IP 地址，因为接口发生了变化，而 MAC 地址也不会发生变化。

检查计算机上的地址并验证您的地址是否正确。

# cluster-computing - 如何在 Windows Server 2012 故障转移群集中设置角色依赖项

> ID：15550032
> 
> 赞同：3
> 
> 时间：2013-03-21T14:17:25.880
> 
> 标签：cluster-computing, failover

我有一个 2 节点集群，配置了 5 个角色（通用服务）。服务需要在单台机器上运行（一台是数据库，一台是服务器，...）

我想配置集群，以便如果单个角色失败并移动到另一台机器，其他角色也将移动到该机器。

我试图对此进行配置但无济于事。如果我在角色的属性窗口中打开依赖项选项卡，则只有 IP 地址资源可用。

有谁知道如何配置这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:14:02.827

我想通了——我为每项服务都创建了一个角色，这是不行的。我应该创建一个“其他服务器”角色，右键单击它并将资源添加到该角色。

# linux - pppoe 服务器日志文件

> ID：15550038
> 
> 赞同：1
> 
> 时间：2013-03-21T14:17:50.917
> 
> 标签：linux, debian, pppoe

我已经成功安装了roar-penguin pppoe-server并尝试使用它但没有成功，我不明白的是，当我把我的`/etc/ppp/pppoe-server-options`

```
debug
logfile /var/log/pppoe-server-log 
```

但是该文件没有创建，我不明白会发生什么。我真的很难找到解决方案。你知道我怎样才能启用调试吗？

我的问题是我每次都抓住（Wireshark 嗅探）

```
RP-PPPoE: Child pppd process terminated 
```

在 PADT 消息中，有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:52:09.840

从您的问题未格式化，验证*/var/log/pppoe-server-log中的***调试**和**日志文件**在配置文件中的不同行上。此外，请确保您已重新启动服务以使用新配置。如果服务未以 root 身份运行，请确保运行该服务的用户拥有写入日志文件的所有权。如果它以 root 身份运行，请确保该文件存在并且它是可写的。

 *如果它不存在，只需运行：

```
# touch /var/log/pppoe-server-log
# chmod 0774 /var/log/pppoe-server-log 
```

我认为这应该自动完成，但您也可以这样做只是为了确保它被正确创建，并且您可以根据需要验证所有权/权限。*

# javascript - 围绕任意 html 范围绘制轮廓

> ID：15550039
> 
> 赞同：3
> 
> 时间：2013-03-21T14:17:58.087
> 
> 标签：javascript, html, css

我正在寻找一种`outline`在 HTML 文档中围绕任意范围绘制的方法。即我想做类似的事情：

```
var start=document.getElementById('foo');
var end=document.getElementById('bar');
var range = document.createRange();
range.setStart(start, 0);
range.setEnd(end, 0); 
```

然后有一个`outline`出现`range`。

到目前为止，我已经研究了以下方法：1）`document.execCommand`但遗憾的是，似乎只能通过这种方法应用背景或前景色，而不是任何类型的边框或轮廓。2）设置`range`为文档`selection`，但看似css不允许`::selection`选择器上的边框或轮廓。

有谁知道通过上述方法或其他方法可以实现这一点的方法？也许有可能以某种方式计算文本区域，然后用画布或一个或多个绝对定位的 div 绘制它？

假设：

注意：我只需要在主机程序弹出菜单时暂时发生这种情况，之后它应该再次消失，因此可以安全地忽略绘制矩形后窗口滚动或添加到文档等的更多内容等内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:55:34.087

这可能是使用 jQuery 获取感兴趣元素的解决方案的开始。

示例代码：

```
<div class="container">
    <p>This is some text...</p>
    <p class="foo">This is some text...</p>
    <p>This is some text...</p>
    <p>This is some text...<b>with bold</b></p>
    <p class="bar">This is some text...</p>
    <p>This is some text...</p>
    <p>This is some text...</p>    
</div> 
```

和一些CSS：

```
.outline {
    outline: 1px solid blue; 
} 
```

jQuery 看起来像：

```
var lastElm = $(".bar");
$(".foo").nextUntil(lastElm).add(lastElm).wrapAll('<div class="outline" />'); 
```

我设置了一个小提琴演示：http: [//jsfiddle.net/audetwebdesign/cf9V8/](http://jsfiddle.net/audetwebdesign/cf9V8/)

一种解决方案是将感兴趣的元素包装在 a 中`<div>`并应用样式来显示轮廓。

但是，您需要考虑开始/结束元素位于单独块中的情况。在这种情况下，包装器可能会破坏布局。

我可以通过一些反馈来调整它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:58:18.363

小提琴在这里：http: [//jsfiddle.net/AmQbx/](http://jsfiddle.net/AmQbx/)

这样做的一个简单方法（不是最干净的）是：

获取第一个元素和最后一个元素的位置：

```
var startElem = $('#foo'), 
    startPos = startElem.position(), 
    endElem = $('#bar').position(), 
    endPos = endElem.position(); 
```

制作一个从头到尾延伸的新 div，如下所示：

```
var selection = $('<div/>').css({
    'z-index': 1000;
    position: absolute,
    background: none,
    border: '1px solid #F00',
    top: startPos.top,
    left: startPos.left,
    width: startElem.css('width').replace('px',''),
    height: ( endPos.top + parseFloat(endElem.css('height').replace('px','') ) ) - startPos.top
}).appendTo('body'); 
```

# c - 从丢失的 TCP 连接中恢复传输

> ID：15550044
> 
> 赞同：1
> 
> 时间：2013-03-21T14:18:13.237
> 
> 标签：c, linux, network-programming

我正在开发用 C 语言为 Linux 编写的客户端服务器应用程序，我正在使用 TCP 将数据复制到多个从属副本，我想知道如何处理某些副本的意外临时关闭（可能是 unix 进程的崩溃）或硬件电源关闭）。

当我向内核发出 write() 系统调用时，成功返回意味着数据已复制到套接字，但并不意味着接收端*得到*了数据。如果目标断电然后再上电，则必须从丢失数据的点将数据重新发送（在建立新的 TCP 连接之后）到副本。

假设我正在处理大量数据并且我不保留我已经发送的数据（即 write() 系统调用返回成功）。我只保留待发送的数据。

当副本从意外关闭中恢复并再次连接时，我如何从内核获取已写入套接字但在目标主机上尚未“确认”的数据？

或者换句话说，我如何从 TCP 连接丢失中恢复并从停止点重新建立客户端和服务器之间的传输？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:29:23.713

您需要在 TCP 之上添加另一层抽象。在发送每条数据之后（TCP 保证它会完好无损地到达那里），让另一端的进程在您自己的更高级别的协议中发送它自己的 ACK（不管是什么——不管它是什么） ACK\0"、"GOT\n" 或其他任何东西）。在另一端（发起者），读取此数据。如果它通过良好而没有错误，一切都很好。如果您收到错误 - 检查类型。如果你得到 ECONNRESET，那意味着远端已经死了。由此，您可以做出相应的回应。等到可以重新连接，然后重新发送数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:39:59.770

没有办法通过标准 API 做你想做的事。

一个解决方案可能是让您的客户端定期将接收到并验证写入磁盘的运行总字节数发送回，然后在服务器上保留一个已发送但未确认数据的缓冲区。然后当客户端重新连接时，它会发送最后一个好的计数，服务器知道从哪里开始重新传输。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:47:50.153

TCP 将处理 TCP 所需的序列号，您不能在应用程序级别大量使用这些序列号

您需要在应用程序级别进行一些序列控制。

在您的情况下，您可以为您发送的每个数据块分配一个数字。目的地需要持续跟踪它收到的最后一个块号。从意外关闭启动时，目标需要返回它处理的最后一个块号，然后您从那里开始发送。

> 我如何从内核获取已写入套接字的数据，但在目标主机上还没有“确认”？

即使你可以，这也不够。目标主机很可能已经确认了数据，但无论出于何种原因，确认都可能丢失或从未发送，但目标应用程序可能已经接收并处理了该数据。所以如果你在这种情况下使用 TCP 序列号，你最终会得到重复的数据。

另一种情况是 TCP 发回数据的 ack，而目标应用程序在读取该数据时崩溃/关闭，但就在它写入磁盘之前。因此，您最终会丢失数据。

# database - 客户地址、物业地址和公司地址

> ID：15550046
> 
> 赞同：1
> 
> 时间：2013-03-21T14:18:13.777
> 
> 标签：database, database-design

我正在为朋友建模一个贷款数据库。

一个**客户**可以有*0 到 N个* **地址**（街道地址或 POBox 地址，甚至超过 1 个街道地址，比 POBox 地址更多）。一个**Property**必须只有一个**Address**。一家**公司**（就业信息）必须只有一个**地址**。

最好为**客户表提供一个单独的****地址**表。**财产**和**公司**的地址可以与**财产**和**公司**表一起使用。

 ******但是由于我们在这里有一个**地址**表，您认为是否也共享**公司**和**属性表的****地址**表是一个好主意？

 ****当我们考虑实体之间的关系时，我们应该切断一个时间点（**静态**方式？）还是我们应该查看一定范围的时间（**动态**方式？）来分析它们的关系？例如，一家公司在某个时间点只能有一个地址，但该公司最近可能从一个地方搬到另一个地方。那么一家公司可能在一定的时间范围内拥有多个地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:50:05.833

客户使用 1 到 N 比 0 到 N 关系更好，因为您正在贷款，您可能想知道他们的地址在哪里。

> 公司（就业信息）必须只有一个地址。
> 
> 那么一家公司可能在一定的时间范围内拥有多个地址。

你有点自相矛盾，你为什么需要这两个地址？我认为公司将只有一个官方地址，直到他们在新地址上获得所有内容，此时您可以将数据库更新到新地址。

> 但是由于我们在这里有一个地址表，您认为是否也共享公司和属性表的地址表是一个好主意？

是的

这里有一个很好的链接，其中包含一些关于建模的想法：

[http://www.databaseanswers.org/data_models/](http://www.databaseanswers.org/data_models/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:56:38.577

> 公司（就业信息）必须只有一个地址。

不必要。公司可以有一个邮寄地址和一个实际地址。

> 由于我们在这里有一个地址表，您认为是否也为公司和属性表共享该地址表是个好主意？

是的，将地址放在地址表中是个好主意。您的 Properties 表将有一个地址行外键，而您的 Companies 表将有 2 个外键，一个用于邮寄地址，一个用于实际地址。邮寄地址将是一个可选的（可为空的）外键。

您需要一个客户地址表来维护客户和地址之间的 0 到 N 关系。如果需要，您还可以在 Address 和 Customer 之间建立 0 到 N 的关系。

桌子看起来像这样。

```
CustomerAddress
---------------
CustomerAddress ID
Customer ID
Address ID 
```

CustomerAddress ID 是主（集群）索引。它是一个升序整数或长整数，或其他一些唯一 ID。

您将拥有一个唯一的索引（客户 ID、地址 ID）。

如果您想将地址与客户相关联，您将在 (Address ID, Customer ID) 上有另一个唯一索引。

> 一家公司在某个时间点只能有一个地址，但该公司最近可能从一个地方搬到另一个地方。那么一家公司可能在一定的时间范围内拥有多个地址。

如果此信息很重要，那么您必须在 CompanyAddress 表中包含一个日期写入列。您将在（公司 ID，日期写入降序）上创建唯一索引。这样，您从地址表中检索的第一行将是最新的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:53:09.897

将所有地址放在自己的表中似乎是一个非常流行的想法。开发人员喜欢寻找重复并消除它。但是在这种情况下，我会犹豫通过将它们放在自己的专用表中来使具有实体状态的地址高贵，因为如果像大多数应用程序一样，您不将地址视为成熟的实体，这会变得过于复杂。

如果您将地址视为真实实体，那么如果两家公司以某种方式共享相同的地址，或者一家公司在某个地点居住了一段时间，然后另一家公司在同一地点居住，那么这些公司将引用相同的地址。因为当您的应用程序接受地址作为输入时，它会查看是否存在现有地址并引用它，而不是仅仅将一些垃圾放入地址表中。你打算做哪一个？我希望这是大满贯，这很好，因为像大多数业务应用程序一样，您完全不在乎您输入的新地址是否与数据库中已有的其他地址相同，您没有兴趣跟踪地址作为个别事物。这就是实体和猫粮的区别。

所以在合并的过程中，我们必须引入一个交集表，并对其进行索引，并且我们所有有地址的实体都必须加入它，我们必须考虑是急切地获取地址还是使用延迟加载。我们将所有地址都放入一个存储桶中，并且必须努力确保每个人都能快速找到自己的地址。对于真实的实体，这是有道理的，因为不同的事物需要链接到同一个实体，但我们在上面确定了我们并不关心这一点，没有人共享这些条目。

我们通过将地址合并到一张表中消除了哪些重复？无论使用相同的字段，地址都将最终存储在数据库中，我们不会节省空间。唯一的重复是在用于生成模式的 DDL 中，我们可以通过为地址（解决应用程序代码中的冗余）创建一个可重用组件（其中“组件”是 Hibernate 术语）并使用 ORM 工具来管理它生成架构。或者，最坏的情况，忽略它，地址不会发生太大变化，这不是你最大的问题。

对于您为朋友做的项目，您描述的这些要求听起来很可疑。可能你朋友的大脑因过度暴露于不知道自己在做什么的委员会炮制的复杂要求而中毒。我们不得不在工作中忍受这些垃圾已经够糟糕了，但是对于个人项目呢？试着说服他。

但也许你的朋友正在将他的企业工作外包给你，而你却被每个客户的 0-N 个地址困住了。如果是这样，则包含损坏：专门为客户地址制作一个表，因此您不需要交集表，并将其他实体的地址内联。让这些只有一个地址的实体去从另一个表中获取他们的地址不会给你带来任何东西，而是更多的连接。如果您需要历史记录，请将其写入单独的历史记录表中。**********

# ios6 - Corona - In-App Purchase Consumable Product Error（您已经购买了......）

> ID：15550051
> 
> 赞同：2
> 
> 时间：2013-03-21T14:18:17.163
> 
> 标签：ios6, in-app-purchase, coronasdk

我正在尝试更新我的应用程序。在 iOS6 之前一切都很好。但是现在，我面临这个问题：

1\. 我买一个产品。（沙盒模式，消耗品） 2．一切正常 3。然后我尝试再次购买相同的产品。它给了我这个按摩：

```
 "You've already purchased this but it hasn't been downloaded. Tap OK to download it now. [Environment : Sandbox]" 
```

之后，如果我单击确定并点击购买，商店将返回一些其他已购买的交易。

请注意，我在所有购买后都使用了 store.finishtransaction() 函数。我希望有人知道如何处理这个问题。

多甘坎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T05:42:30.813

请尝试以下步骤。

1) 转到设置 -> iTunes 应用程序并退出您的帐户。

2）双击主页按钮并关闭所有打开的应用程序。

3）做一个硬重置 - 同时按住顶部的电源按钮和向下的主页按钮，直到出现苹果图标并让它重新启动。

4) 返回设置并再次登录您的 iTunes 帐户并再次尝试应用内购买。

# hibernate - Hibernate 检测转换失败：找不到类 (HHH000373)

> ID：15550061
> 
> 赞同：2
> 
> 时间：2013-03-21T14:18:27.703
> 
> 标签：hibernate, maven, jpa, ant, instrumentation

我正在尝试为 Maven 项目中的实体启用 Hibernate 检测。Instrumentation 似乎在只有 Java API 定义的标准类型字段（String、BigDecimal 等）的实体上正常工作，但是当检测任务尝试处理具有我项目中其他类定义的类型字段的类时，它失败并出现以下错误：

```
[instrument] processing class : com.test.entity.EntityWithCustomTypes;  file = C:\Project\Project-ejb\target\classes\com\test\entity\EntityWithCustomTypes.class
Mar 21, 2013 10:00:24 AM org.hibernate.bytecode.internal.javassist.JavassistClassTransformer doTransform
ERROR: HHH000373: Unable to transform class: cannot find com.test.bo.CustomType 
```

我已经尝试故意检测 CustomType 类（这不是必需的）；仪器处理它，但它仍然在 EntityWithCustomTypes 上出错。

这是我在 pom.xml 中使用的插件；该项目是使用 JBoss 7 Java EE 原型生成的，我正在尝试在 EJB 模块 POM 中执行检测：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.3</version>
    <executions>
        <execution>
            <configuration>
                <tasks>
                    <taskdef name="instrument" classname="org.hibernate.tool.instrument.javassist.InstrumentTask">
                        <classpath>
                            <path refid="maven.dependency.classpath" />
                            <path refid="maven.compile.classpath" />
                            <path refid="maven.runtime.classpath" />
                            <path refid="maven.plugin.classpath" />
                            <dirset dir="${project.build.outputDirectory}" />
                        </classpath>
                    </taskdef>
                    <instrument verbose="false">
                        <fileset dir="${project.build.outputDirectory}">
                            <include name="**/entity/*.class" />
                        </fileset>
                    </instrument>
                </tasks>
            </configuration>
            <phase>package</phase>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.10.Final</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>
    </dependencies>
</plugin> 
```

我可以验证编译阶段正在生成有问题的类（CustomType），所以我不明白为什么 Hibernate 的 JavassistClassTransformer 找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T06:25:28.117

最新的 Hibernate 4.2.7 SP1 使用 Javassist 3.18.0 最终解决了所讨论的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:34:24.860

这似乎与 javassist-3.15.0 有关。对我们来说，更高的版本已经工作了（3.17.1），但是这个版本严重破坏了代理（[https://hibernate.atlassian.net/browse/HHH-7884](https://hibernate.atlassian.net/browse/HHH-7884)），所以 Hibernate 团队决定回到 3.15.0 .

所以最后我们在这里遇到了同样的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:22:24.463

我目前的方法是使用 javassist 3.17.1 进行检测并在应用程序 war 文件中部署 javassist 3.15.0。希望这能方便地工作......

更新：到目前为止似乎有效，但这是一个非常丑陋的解决方法......

# node.js - 使用 v8 分析 nodejs

> ID：15550064
> 
> 赞同：11
> 
> 时间：2013-03-21T14:18:36.610
> 
> 标签：node.js, profiling, v8

我有一个节点应用程序，我想使用节点分析器对其进行分析。

所以首先我跑了：

```
node --prof v8test.js 
```

然后，我下载了 v8 工具

```
svn checkout http://v8.googlecode.com/svn/trunk/ v8;
make dependencies;
make native; 
```

然后尝试分析创建的文件（v8.log）

```
tools/linux-tick-processor ../v8.log 
```

但我得到了很多：

```
Code move event for unknown code: 0x289dd8475560
Code move event for unknown code: 0x289dd84758e0
Code move event for unknown code: 0x289dd8479280
Code move event for unknown code: 0x289dd8482980
Code move event for unknown code: 0x289dd84c2a80
line 718730: unknown code state: undefined
line 718731: unknown code state: undefined
line 739575: unknown code state: undefined
line 739577: unknown code state: undefined 
```

谁能帮我弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-19T09:43:02.940

日志文件格式似乎经常更改，因此您需要确保您使用的是正确的 v8 版本。例如，如果配置文件日志是使用节点 v0.10.18 生成的，则您必须使用 v8 版本 3.14.5 的滴答处理器对其进行分析。要了解给定版本的 node 构建于哪个 v8 版本，您可以查看`deps/v8/ChangeLog`node 源分布（node 自己的更改日志在这方面似乎有点不可靠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T04:28:26.013

确保您没有使用 32 位版本的分析工具运行 64 位版本的节点，反之亦然，当我偶然这样做时，我遇到了类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T17:11:12.290

分析节点应用程序的另一种选择是使用 VTune Amplifier 而不是嵌入在 Node.js 中的内部 V8 分析器。在这种情况下，您将看到性能指标是如何通过函数的源代码分布的。V8 配置文件现在无法做到这一点。看看这篇[文章](https://stackoverflow.com/questions/21571145/profiling-javascript-code-on-nodejs-possible-approaches?rq=1)，看看你是如何做到的。

# ruby-on-rails - Rails：如何在页面加载时找出 SQL 中正在运行的查询？

> ID：15550067
> 
> 赞同：2
> 
> 时间：2013-03-21T14:18:39.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想知道当用户与网站上的不同页面交互时正在运行哪些查询？我还想知道每个查询需要多长时间。我如何以及在哪里可以看到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:21:07.260

`rails`每个应用程序中都有一个日志文件夹，其中`.log`包含您运行应用程序的每个环境的文件。您将在其中看到这些统计信息：

```
Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-11-29 11:09:47 -0400
Served asset /jquery.js - 200 OK (3ms)

Started GET "/users/auth/google/callback?_method=post&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-10-26T19%3A29%3A52ZkvQlFeFr5Rk78g&openid.return_to=http%3A%2F%2Flocalhost%3A3000%2Fusers%2Fauth%2Fgoogle%2Fcallback%3F_method%3Dpost&openid.assoc_handle=AMlYA9VjNZ-QIIMe5bhvtPLBsAdm5xMltOa7MEwUoW4Opx9tXd_khhcS&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle%2Cns.ext1%2Cext1.mode%2Cext1.type.ext2%2Cext1.value.ext2%2Cext1.type.ext0%2Cext1.value.ext0%2Cext1.type.ext3%2Cext1.value.ext3&openid.sig=ehFAJ1m8nPces8%2Bj6Ud%2FicpuohY%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawljL9RKBE7iUQHk94UhJQ-4sDOTawUfpNc&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawljL9RKBE7iUQHk94UhJQ-4sDOTawUfpNc&openid.ns.ext1=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ext1.mode=fetch_response&openid.ext1.type.ext2=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffirst&openid.ext1.value.ext2=Fernando&openid.ext1.type.ext0=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ext1.value.ext0=fernando%40findhorsesforsale.net&openid.ext1.type.ext3=http%3A%2F%2Faxschema.org%2FnamePerson%2Flast&openid.ext1.value.ext3=Mendez" for 127.0.0.1 at 2012-10-26 15:29:52 -0400

Started GET "/run_dates/current_pdf_generation_status.js?pdf_generation_id=e3ef90b05844012f4fc2723c91dfe57c&_=1332637701414" for 127.0.0.1 at 2012-03-24 21:08:29 -0400
Processing by RunDatesController#current_pdf_generation_status as JS
  Parameters: {"pdf_generation_id"=>"e3ef90b05844012f4fc2723c91dfe57c", "_"=>"1332637701414"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  RunDate Load (0.1ms)  SELECT "run_dates".* FROM "run_dates" WHERE (pdf_generation_id = 'e3ef90b05844012f4fc2723c91dfe57c') LIMIT 1
  Rendered run_dates/current_pdf_generation_status.js.erb (0.1ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.3ms)
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:22:14.147

**如果您处于开发**模式，请查看development.log，它会显示所有查询以及运行该查询所花费的时间。有关生产，请参阅**production.log**和 staging 查看**staging.log**

如果您想查看特定查询，您可以删除该文件 rails 将再次创建它。但我建议不要删除，当你点击页面时，打印一些不同的东西，比如'-----------------'，这将把其他查询与你页面的查询区分开来想看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:20:54.953

如果您是用户，您可以使用一些浏览器插件（例如 Firebug）

![在此处输入图像描述](../Images/6170a62e980abfa363ec3ed15b76c3fe.png)

如果您不是用户，您可以查看日志以查看执行了哪些查询。

# batch-file - 一定时间后自动删除另一台电脑上的TXT

> ID：15550071
> 
> 赞同：0
> 
> 时间：2013-03-21T14:18:57.547
> 
> 标签：batch-file

如果我将文本文件发送给朋友，然后我想在一定时间后自动删除该文本文件，我该怎么做？

我曾尝试使用捆绑到自解压存档中的批处理文件和文本文件，但防病毒软件会检测到这一点。

我怎样才能做到这一点？

我努力了：

```
@echo off
if "%1" == "h" goto begin `
mshta vbscript:createobject("wscript.shell").run("%~nx0 h",0)(window.close)&&exit 
:begin 
@start test.txt
ping -n 300 127.0.1>nul
for /f %%i in ('dir C:\Users\Administrator\Desktop\a\*.txt /s/b') do del /f /q "%%i" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:39:15.140

你想达到什么目的？删除这个文件有什么意义？

如果一个文件可以被打开和读取，那么阻止最终用户复制它几乎是不可能的。什么会阻止用户从自毁文件复制和粘贴到备份副本中？还是打印出文本并重新扫描？这与 DRM 无法 100% 确定地保护音乐文件的原因相同：如果音乐可以播放，那么至少有人可以设置麦克风并重新录制音频。

# java - ZK 视口元数据有什么问题？

> ID：15550073
> 
> 赞同：0
> 
> 时间：2013-03-21T14:19:00.787
> 
> 标签：java, tablet, zk

我将一个项目从 zk5 迁移到 zk6.5.1。除了平板设备上的视口之外，大多数都很好。它与以前的元相同，但平板电脑在早期版本中确实缩放了页面，现在页面将被裁剪。裁剪 => 页面左侧是一个没有内容的灰色区域，这是元数据：

```
<?meta name="viewport" content="width=1000; initial-scale=1.0; maximum-scale=1.0;" ?> 
```

有人知道这个效果吗？以及如何解决？

平板设备：三星 Galxay GT-P7500，Android 3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:33.473

视口元在这个版本的 android 3.1 中存在缺陷。有两台平板电脑，但另一台是 3.2 的，它可以工作！*语法*

# jsf - 使用 JSF 自动刷新 div

> ID：15550078
> 
> 赞同：1
> 
> 时间：2013-03-21T14:19:17.073
> 
> 标签：jsf, jsf-2

如何使用 JSF 每 5 秒自动刷新一次 div。我有一个 id = statusBlock 的 div，我希望其中的状态和评论每 5 秒自动更新一次，以便用户自动获取所有状态更新而无需刷新整个页面。我已经搜索了 stackoverflow 站点，但找不到任何可以让我使用 JSF 进行操作的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:43:41.987

这可以使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp) JavaScript 函数来实现，该函数会每隔一段时间调用一次服务器。

一个简单但不那么花哨的例子是执行隐藏`UICommand`，以便用户不能自己更新数据：

```
<script type="text/javascript">
    setInterval(function() { 
        document.getElementById('myForm:btnLoadData').submit();
        }, 5*1000);
</script>

<h:panelGroup id="divData" layout="block">
    <!-- content... -->
</h:panelGroup>
<h:form id="myForm">
    <h:commandButton id="btnLoadData" value="Hidden" action="#{bean.loadData}"
        style="display:none">
        <f:ajax execute="@form" render=":divData" />
    </h:commandButton>
</h:form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:23:07.947

您是否使用任何组件库，例如 Primefaces？

如果你是，你可以使用轮询组件。

这是一个示例链接：http: [//www.primefaces.org/showcase/ui/poll.jsf](http://www.primefaces.org/showcase/ui/poll.jsf)

# iphone - iOS 相机自定义：如何实现网格线？

> ID：15550080
> 
> 赞同：2
> 
> 时间：2013-03-21T14:19:22.840
> 
> 标签：iphone, ios, camera, uiimagepickercontroller

我可以使用闪光灯功能、访问照片库以及使用后置/前置摄像头。

我想实现在用户拍照时显示的网格线。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:42:28.297

创建一个`UIImageView`用于`cameraOverlayView`.

假设您有一个`UIImagePickerController`命名`yourImagePickerController`并且您有一个名为`overlay.png`“网格线”的图像文件。制作网格线图像文件时，请务必使用透明背景 - 而不是不透明的白色。

```
UIImageView *overlayImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"overlay.png"]];

CGRect overlayRect = CGRectMake(0, 0, overlayImage.image.size.width, overlayImage.image.size.height);

[overlayImage setFrame:overlayRect];

[yourImagePickerController setCameraOverlayView:overlayImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:31:29.750

就文档而言，它没有说明 Apple 提供的网格线是否实际上是一种共享方法，但由于没有提及，我不会说，但您可以[使用 cameraOverlayView 实现自己的](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-15T08:13:26.183

这很容易`UIBezierPath`。这就是你可以实现的方式。

1.  将此代码保存在名为`GridView.swift`.

    ```
     import Foundation
     import UIKit

     class GridView: UIView {

     override func draw(_ rect: CGRect) {

         let firstColumnPath = UIBezierPath()
         firstColumnPath.move(to: CGPoint(x: bounds.width / 3, y: 0))
         firstColumnPath.addLine(to: CGPoint(x: bounds.width / 3, y: bounds.height))
         let firstColumnLayer = gridLayer()
         firstColumnLayer.path = firstColumnPath.cgPath
         layer.addSublayer(firstColumnLayer)

         let secondColumnPath = UIBezierPath()
         secondColumnPath.move(to: CGPoint(x: (2 * bounds.width) / 3, y: 0))
         secondColumnPath.addLine(to: CGPoint(x: (2 * bounds.width) / 3, y: bounds.height))
         let secondColumnLayer = gridLayer()
         secondColumnLayer.path = secondColumnPath.cgPath
         layer.addSublayer(secondColumnLayer)

         let firstRowPath = UIBezierPath()
         firstRowPath.move(to: CGPoint(x: 0, y: bounds.height / 3))
         firstRowPath.addLine(to: CGPoint(x: bounds.width, y: bounds.height / 3))
         let firstRowLayer = gridLayer()
         firstRowLayer.path = firstRowPath.cgPath
         layer.addSublayer(firstRowLayer)

         let secondRowPath = UIBezierPath()
         secondRowPath.move(to: CGPoint(x: 0, y: ( 2 * bounds.height) / 3))
         secondRowPath.addLine(to: CGPoint(x: bounds.width, y: ( 2 * bounds.height) / 3))
         let secondRowLayer = gridLayer()
         secondRowLayer.path = secondRowPath.cgPath
         layer.addSublayer(secondRowLayer)
     }
     private func gridLayer() -> CAShapeLayer {
         let shapeLayer = CAShapeLayer()
         shapeLayer.strokeColor = UIColor(white: 1.0, alpha: 0.3).cgColor
         shapeLayer.frame = bounds
         shapeLayer.fillColor = nil
         return shapeLayer
     }
    } 
    ```

2.  用法：

    ```
    func addGridView(cameraView: UIView) {
     let horizontalMargin = cameraView.bounds.size.width / 4
     let verticalMargin = cameraView.bounds.size.height / 4

     let gridView = GridView()
     gridView.translatesAutoresizingMaskIntoConstraints = false
     cameraView.addSubview(gridView)
     gridView.backgroundColor = UIColor.clear
     gridView.leftAnchor.constraint(equalTo: cameraView.leftAnchor, constant: horizontalMargin).isActive = true
     gridView.rightAnchor.constraint(equalTo: cameraView.rightAnchor, constant: -1 * horizontalMargin).isActive = true
     gridView.topAnchor.constraint(equalTo: cameraView.topAnchor, constant: verticalMargin).isActive = true
     gridView.bottomAnchor.constraint(equalTo: cameraView.bottomAnchor, constant: -1 * verticalMargin).isActive = true
    } 
    ```

# java - 将 Applet 包裹在应用程序周围

> ID：15550084
> 
> 赞同：0
> 
> 时间：2013-03-21T14:19:27.950
> 
> 标签：java, swing

我有一个工作应用程序，但我需要将其转换为小程序。我的 main 方法不在我的框架类中，所以我不能只是扩展`JApplet`我的 main 方法并将其更改为`init()`. 有没有一种简单的方法来“包装”`applet`一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:05:57.957

我会分离出你创建 UI 的内容，然后从 main() 或 init() 调用它。请参见以下示例：

```
public class Test extends Applet {
    private JPanel mainPanel;

    // run as application
    public static void main(String[] args) {
        Test test = new Test();
        test.createUI();

        JFrame frame = new JFrame();
        frame.add(test.mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    // run as applet
    public void init() {
        createUI();
        add(mainPanel);
    }

    // create your UI here
    private void createUI() {
        mainPanel = new JPanel();
        mainPanel.add(new JButton("Test"));
    }
} 
```

# matlab - 导入期间删除 Matlab 多个分隔符

> ID：15550086
> 
> 赞同：0
> 
> 时间：2013-03-21T14:19:38.730
> 
> 标签：matlab

我正在努力解决一个问题，想要一个简单的方法。我有一大堆数据，其中有一些向量值（1.02 1.23 3.32）格式。我希望它以表格形式显示为 1.02 1.23 3.32。这里的问题是有两种类型的分隔符'('和')'。

任何人都可以帮助为此编写代码吗？我有这样的事情：

```
 filename = 'U.dat';
delimiterIn = '(';
headerlinesIn = 0;
A = textscan(filename,delimiterIn,headerlinesIn); 
```

但有一件事是它只有一个分隔符“（”，它也不起作用。

尼尚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:01:20.307

如果您的文本文件如下所示：

```
(1 2 3) (4 5 6)
(7 8 9) (10 11 12) 
```

您可以将其作为字符串读取并将其转换为向量元胞数组，如下所示：

```
% read in file
clear all
filename = 'delim.txt';
fid  = fopen(filename); %opens file for reading
tline = fgets(fid); %reads in a line
index = 1; 
 %reads in all lines until the end of the file is reached
while ischar(tline)
    data{index} = tline;     
    tline = fgets(fid);         
    index = index + 1;
end
fclose(fid); %close file

% convert strings to a cell array of vectors
rowIndex = 1;
colIndex = 1;
outData = {};
innerStr = [];

for aCell = data  % for each entry in data
    sline = aCell{1,1}; 
    for c = sline % for each charecter in the line
        if strcmp(c, '(')
            innerStr = [];
        elseif strcmp(c, ')')
            outData{rowIndex,colIndex} = num2str(innerStr);
            colIndex = colIndex + 1;
        else
            innerStr = [innerStr, c];
        end
    end

     rowIndex = rowIndex + 1;
     colIndex = 1;
end

outData 
```

# ios - 启用了 ARC，但我仍然可以在我的 AppDelegate 中使用 release 和 autorelease？

> ID：15550090
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:20:01.557
> 
> 标签：ios, objective-c, memory-management, automatic-ref-counting, appdelegate

我在我的 iOS 应用程序中启用了 ARC，我认为这意味着您无法显式调用`retain`，`release`或者`autorelease`没有设置`-fno-objc-arc`标志。显然，对于应用程序委托来说这不是真的。我在我的项目的“构建阶段”的“编译源”部分下检查了我的 AppDelegate 文件，它没有列出为我的 AppDelegate 文件设置的任何编译器标志。但是，我可以显式调用`release`and `autorelease`，但不能`retain`。这是巫术的证据，还是苹果工程师通过黑客手段让 ARC 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:21:20.503

如果您可以发送这些消息，则 ARC 已关闭。

您可以检查使用

```
#if ! __has_feature(objc_arc)
#error "ARC is off"
#endif 
```

# java - 在没有Javascript的情况下删除android WebView中的html元素

> ID：15550092
> 
> 赞同：0
> 
> 时间：2013-03-21T14:20:09.373
> 
> 标签：java, android, html, android-webview

在 WebView 中显示网页之前，我想根据它们的 id 从网页的 html 代码中删除一些元素。我知道如何使用 Javascript 来做到这一点，但对于我的应用程序来说，禁用 WebView 的 Javascript 很重要。

我写过像 jsoup 这样的 html 解析器，但我不太明白如何将它们用于我的特定问题。有什么建议么？

编辑：好的，这是我到目前为止所得到的：

我将 HTML 加载到字符串中并删除不需要的元素。

```
 String HTMLResult="";
        String urlText = "http://www.google.com";
    BufferedReader in = null;
    try {
      URL url = new URL(urlText);
      in = new BufferedReader(new InputStreamReader(url.openStream()));

      String inputLine;
      while ((inputLine = in.readLine()) != null) {
            HTMLResult += '\n'+ inputLine;

      }
    } catch (Exception e) {
      e.printStackTrace();
    } finally {
      if (in != null) {
        try {
          in.close();
              HTMLResult=HTMLResult.replace("ExampleElement", "");
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
        } 
```

这部分工作正常，但速度很慢。

我试图将 HTML 代码加载到 WebView 中

```
webview.loadData(HTMLResult, "text/html", null); 
```

但我只能在 Webview 窗口中以文本形式显示代码。

谢谢你，帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:36:46.453

您应该从 webview 外部获取源 html，然后将其解析为原始数据，修改您想要的内容，并将处理后的 html 提供给 webview。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-18T14:17:43.357

使用 Jsoup 库来实现这一点。

[https://jsoup.org/apidocs/org/jsoup/select/Selector.html](https://jsoup.org/apidocs/org/jsoup/select/Selector.html)

```
Document doc = Jsoup.connect("your url").ignoreContentType(true).get();
Elements ele = doc.select("class to remove").remove();
webView.loadData(doc.toString(),"text/html; charset=UTF-8", null); 
```

# javascript - 单击按钮将不同的视频播放器加载到 div

> ID：15550094
> 
> 赞同：0
> 
> 时间：2013-03-21T14:20:13.633
> 
> 标签：javascript, jquery, wordpress, video

我正在努力将视频添加到我正在开发的网站的主页上。理想情况下，我想默认显示 youtube 版本，并在下面添加一个按钮，上面写着“无法访问 youtube？单击此处观看替代版本”。

单击后，不同的播放器将加载到同一视频 div 并替换 youtube 版本。

我们将视频上传到 youtube，并且网站上还有一个 html5 版本，通过 wordpress 的 video.js 插件播放。

如何通过单击按钮将备用 html5 视频播放器加载到 div 中（如果可能，不刷新页面）？我假设这可以通过 javascript / jquery / ajax 以某种方式完成，但我不确定如何做到这一点（我的 js 级别是*新手*）。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:26:21.367

您可以使用以下命令清除 div：

```
$("#yourDivID").empty() 
```

然后用新内容填充 div

```
var newHtml = "Whatever you want!"
$("#yourDivID").append(newHtml); 
```

或者

```
$("#yourDivID").html(newHtml); 
```

这是替换 Div 中内容的一个非常原始的示例：http: [//jsfiddle.net/FJuwd/](http://jsfiddle.net/FJuwd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:26:55.667

html

```
<div id="myvideodiv"> </div> 
```

在脚本中

```
mybutton.click(function(){

    playerMethod("myvideodiv").setup({ //here player intializations based on sepecific type
        file: "/uploads/example.mp4",
        height: 360,
        image: "/uploads/example.jpg",
        width: 640
    });

}) 
```

看这里的[例子](https://stackoverflow.com/questions/13517783/load-video-into-jw-player-using-jquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:43:19.043

jQuery 解决方案：只需创建 div 并在按钮单击时填充视频。很多方法可以做到这一点。检查长度只是为了消除放置另一个视频。

```
<div id="player"><div>
<button id="clickme">Click to play video</button>   

 $("#clickme").on("click", function(e) {
    if($('#myfileplayer').length == 0) {
        var mydiv = $("#player");
        var myvideo = $("<video id='myfileplayer' src='http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv' width='320' height='240' controls></video>");
        mydiv.append(myvideo);
    }
}); 
```

查看[示例](http://jsfiddle.net/VnvvL/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:09:27.203

非常感谢大家的帮助。喜欢这个地方。

实际上，我只需切换包含两个不同视频的 div 就可以更轻松地解决这个问题。不知道为什么我最初没有想到这一点。实际上并没有*删除*内容，只是隐藏它，但我认为它对我有用。

html

```
<div id="youtube">my youtube vid</div>
<div id="html5" style="display:none;">my alternate vid</div>

<input type="button" value="switch video" id="click"/> 
```

jQuery

```
$(function(){
  $('#click').click(function(){
     $('#youtube').toggle();
     $('#html5').toggle(); 
  });
}); 
```

我也用 js 试过这个，所以当 div 被切换时，youtube 视频将被删除并停止播放

```
$(function(){
  $('#click').click(function(){
     $('#youtube').toggle();
     $('#html5').toggle(); 
     $('#youtube').empty();

  });
}); 
```

这可行，但我不确定如何在切换回来时添加 youtube 视频。没什么大不了的——只是我很好奇。我假设它可以用.append 来完成。

问题在于这两个 vids 都作为简码存在于 wordpress 页面中，所以它使事情变得有点复杂。我只是在 wordpress 页面中使用这些 id 将 shortdoces 包装在 div 中，以使切换正常工作，并将 js 添加到我的页面模板中。再次感谢！

# ajax - 无法从 responseText 获取消息

> ID：15550098
> 
> 赞同：0
> 
> 时间：2013-03-21T14:20:34.820
> 
> 标签：ajax, spring-mvc

弹簧控制器：

```
response.sendError(500, ErrorMessage.DataBaseInsertFailed); 
```

我的 .jsp 页面

```
 complete: function(e, xhr, settings){
    var errorMessage = $.parseJSON(e.responseText);
        alert(errorMessage);

    } 
```

如果我做 e.status，我得到 500

如果我执行 e.resonseText 我会得到整个文本，但是我希望显示我的自定义消息“由于...导致数据库失败”我的警报语句甚至不会触发。如果我这样做`alert(xhr)`也不会触发。

以上来自[SO中的这个](https://stackoverflow.com/questions/6646575/send-error-message-from-webmethod)

查看此[文档](http://api.jquery.com/jQuery.ajax/)并更改我的签名以匹配文档

```
complete
Type: Function( jqXHR jqXHR, String textStatus )
A function to be called when the request finishes (after success and error callbacks are executed). The function gets passed two arguments: The jqXHR (in jQuery 1.4.x, XMLHTTPRequest) object and a string categorizing the status of the request ("success", "notmodified", "error", "timeout", "abort", or "parsererror"). As of jQuery 1.5, the complete setting can accept an array of functions. Each function will be called in turn. This is an Ajax Event. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:23.350

您看到的 HTML 是服务器的错误页面，因为您发送的是 500 错误响应。设置响应状态并将您的 JSON 写入响应，如下所示：

```
((HttpServletResponse)response).setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
response.getWriter().write(ErrorMessage.DataBaseInsertFailed)); 
```

然后在您的 ajax 调用中使用错误回调显示错误：

```
error: function(xmlHttpRequest, textStatus, errorThrown) {
    alert(xmlHttpRequest.responseText);
} 
```

# vim - 如何在 Vim 中无延迟地退出可视模式？

> ID：15550100
> 
> 赞同：36
> 
> 时间：2013-03-21T14:20:38.700
> 
> 标签：vim

在 Vim 中，在可视模式下，我必须按`Esc`两次才能退出并关闭选择。按一次后，`Esc`我必须等待 2 秒才能关闭选择。

`Esc`按下时我能做什么来立即退出可视模式？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-21T14:51:38.680

执行以下命令帮助了我：

```
set timeoutlen=1000 ttimeoutlen=0 
```

见：[http](http://www.johnhawthorn.com/2012/09/vi-escape-delays/) ://www.johnhawthorn.com/2012/09/vi-escape-delays/ 。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-21T14:49:45.080

正如英戈解释的那样。只是想我会发布解决方案： [https ://github.com/Greduan/dotfiles/blob/47f92e4db29d4ead778d877a85082b271de130ed/vim/vimrc.vim#L332-L346](https://github.com/Greduan/dotfiles/blob/47f92e4db29d4ead778d877a85082b271de130ed/vim/vimrc.vim#L332-L346)

效果很好。这对我来说也有点令人困惑，所以我无法真正解释，但代码解释得很好。

关键是它有效，`<Esc>`即使在终端上它也能立即工作。我相信，如果您确实设置了映射，`<Esc>`它也会给您时间来做这些。但是我不确定。

**编辑**

研究了一下，我现在可以解释一下。基本上，如果您不使用 GUI（如 MacVim），那么当您进入插入模式时，`ttimeoutlen`它将被设置为 0。这意味着只要您单击`<Esc>`它就会起作用。但是，一旦您处于正常模式，它会将 设置为`ttimeoutlen`您喜欢的数字，让您使用`<Esc>`.

我认为完美的解决方案，因为如果您在插入模式下进行映射，它将使用控制或类似的东西。

**编辑 2**

这是代码：

```
set timeout " Do time out on mappings and others
set timeoutlen=2000 " Wait {num} ms before timing out a mapping

" When you’re pressing Escape to leave insert mode in the terminal, it will by
" default take a second or another keystroke to leave insert mode completely
" and update the statusline. This fixes that. I got this from:
" https://powerline.readthedocs.org/en/latest/tipstricks.html#vim
if !has('gui_running')
    set ttimeoutlen=10
    augroup FastEscape
        autocmd!
        au InsertEnter * set timeoutlen=0
        au InsertLeave * set timeoutlen=1000
    augroup END
endif 
```

随着时间的推移，我已经消除了 GUI 没有运行的情况，据我所知它仍然可以工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-21T14:34:50.327

一个快速的解决方法是`<C-c>`改用，但您可能想要修复超时`<Esc>`，这是由以 开头的映射引起的`<Esc>`，这使 Vim 等待`'timeoutlen'`检查映射是否完成。

这不一定需要是“真实”的映射；许多终端解决方法（例如，使某些键工作）建议设置这样的映射。（不幸的是，这是一个困难而复杂的问题。）

您可以通过以下方式找到映射：

```
:verbose map <Esc> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-17T12:31:29.013

我没有全局绑定到 <ESC> 或可视模式的映射（调用 :verbose vmap <ESC> 没有结果），但退出可视模式时仍然存在明显延迟。即使在没有 vimrc 的全新安装上，也会出现延迟。使用 <Cc> 确实会立即退出可视模式。

由于我不喜欢按 <Cc> 退出任何模式，因此我目前在可视模式下将 <ESC> 映射到 <Cc>。这使用 <ESC> 退出可视模式，没有任何延迟。

```
:vmap <ESC> <C-c> 
```

或将以下行放入您的 vimrc

```
vnoremap <ESC> <C-c> 
```

如果您确实有绑定到 <ESC> 的全局或可视模式映射，这将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-23T12:29:09.400

首先尝试将以下内容添加到已接受的答案`.vimrc`

```
set timeoutlen=1000 ttimeoutlen=0 
```

如果这不起作用，请检查您是否有任何键绑定`<esc>`

```
:imap <esc> 
```

如果您使用 tmux，您还需要：

```
set -sg escape-time 0 
```

# java - java.lang.IllegalStateException 内容 - 处置

> ID：15550107
> 
> 赞同：3
> 
> 时间：2013-03-21T14:20:55.080
> 
> 标签：java, spring, jsp, response, content-disposition

我正在尝试使用`content - disposition`将某些内容从服务器保存到客户端计算机。当我点击jsp中的按钮时，对话框打开，我选择保存文件。文件已保存，但出现此异常。我读过其他类似的主题，例如“某处，您的应用程序正在调用`getOutputStream`或`getWriter`不止一次”。但我不知道/不明白在哪里？

```
@Controller
public class ExportPhonebook2 {

    @Autowired
    private PhoneBookService phoneBookSer;

    private void setResponseHeader(HttpServletResponse response, String imenikTXT, File file){
    response.setHeader("Content-Length", "" + file.length());
    response.setContentType("application/txt; charset=UTF-8");
    response.setHeader("content-disposition", "attachement; filename=imenik.txt" );
    response.setHeader("Content-Transfer-Encoding", "binary");
    } 

    @RequestMapping(value = "/exportPhonebook.html", method = RequestMethod.POST)
    public String exportPhonebook(Model model, HttpServletResponse response) {

        List<User> listOfAllUsers = phoneBookSer.fetchAllUsers();
        String imenik = "";

        for (User user : listOfAllUsers) {
            imenik = imenik + user.getPrezime() + " " + user.getIme() + ", Telefon: " + user.getTelefon() + ";\r\n" ;
        }

        try {

            File file = new File("c:\\imenik.txt");
            setResponseHeader(response, "imenik.txt", file);
            FileInputStream fileIn;
            fileIn = new FileInputStream(file);

            OutputStream outTXT = response.getOutputStream();

            byte[] outputByte = new byte[8192];
            //copy binary contect to output stream
            while(fileIn.read(outputByte, 0, 8192) != -1){
                outTXT.write(outputByte, 0, 8192);
            }
            fileIn.close();
            outTXT.flush();
            outTXT.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
    } catch (IOException e) {
               // TODO Auto-generated catch block
                e.printStackTrace();
    }

            return "homepage";
    }
} 
```

堆栈跟踪：

```
Exception initializing page context
java.lang.IllegalStateException: Cannot create a session after the response has been   committed
at org.apache.catalina.connector.Request.doGetSession(Request.java:2705)
at org.apache.catalina.connector.Request.getSession(Request.java:2231)
at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:899)
at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229)
at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)
at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:517)
at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)
at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)
at org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:146)
at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:125)
at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:112)
at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:65)
at org.apache.jsp.WEB_002dINF.jsp.homepage_jsp._jspService(homepage_jsp.java:58)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:229)
at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:328)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:95)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:119)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:175)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:52:18.827

这个特殊的异常是因为 Spring MVC 显然需要在渲染视图期间创建一个会话，但由于响应已经与文件下载一起提交，所以不能。但是您真正的问题更大，Spring MVC 根本不应该渲染视图。

在从 Spring MVC 接管 HTTP 响应的控制后，您需要告诉 Spring MVC 不要呈现视图。否则，它会尝试将呈现的视图附加到 HTTP 响应的末尾，这只会破坏文件下载。

我不做 Spring MVC，所以我不能从头顶回答，但似乎只返回`void`而不是`String`从控制器的操作方法返回就足以告诉 Spring MVC 不呈现视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:25:40.727

> java.lang.IllegalStateException：提交响应后无法创建会话

会话创建需要在正文之前将会话 cookie 写入 HTTP 标头。在您刷新并关闭您的响应后，某些东西正在尝试创建会话。

考虑在编写响应之前创建会话。

# c++ - 如何将 wstring 转换为字符串作为转义符

> ID：15550114
> 
> 赞同：0
> 
> 时间：2013-03-21T14:21:12.363
> 
> 标签：c++, boost, wstring

我有一个 wstring，将它转换为转义形式的字符串的最佳方法是`\u043d\u043e\u043c\u0430`什么？

下面的一个有效，但似乎不是最好的：

```
string output; 
for (wchar_t chr : wtst) {
    char code[7];
    sprintf(code,"\\u%0.4X",chr);
    output += code;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:35:09.387

一个不太紧凑但更快的版本，a) 提前分配 b) 避免 printf 每次迭代重新解释格式字符串的成本，c) 避免 printf 的函数调用开销。

```
std::wstring wstr(L"\x043d\x043e\x043c\x0430");
std::string sstr;
// Reserve memory in 1 hit to avoid lots of copying for long strings.
static size_t const nchars_per_code = 6;
sstr.reserve(wstr.size() * nchars_per_code); 
char code[nchars_per_code];
code[0] = '\\';
code[1] = 'u';
static char const* const hexlut = "0123456789abcdef";
std::wstring::const_iterator i = wstr.begin();
std::wstring::const_iterator e = wstr.end();
for (; i != e; ++i) {
    unsigned wc = *i;
    code[2] = (hexlut[(wc >> 12) & 0xF]);
    code[3] = (hexlut[(wc >> 8) & 0xF]);
    code[4] = (hexlut[(wc >> 4) & 0xF]);
    code[5] = (hexlut[(wc) & 0xF]);
    sstr.append(code, code + nchars_per_code);
} 
```

# python - Django：查询时的天真日期时间

> ID：15550133
> 
> 赞同：0
> 
> 时间：2013-03-21T14:22:19.147
> 
> 标签：python, django, datetime, timezone

我正在尝试检索两个日期（星期一-> 星期一）之间的所有数据。这是我的代码：

```
 some_day_last_week = datetime.datetime.now() - timedelta(days=7)
    monday_of_last_week = some_day_last_week - timedelta(days=(some_day_last_week.isocalendar()[2] - 1))
    monday_of_this_week = monday_of_last_week + timedelta(days=7)

    print "Someday last week %s" % some_day_last_week
    print "Monday of last week %s" % monday_of_last_week
    print "Monday of this week %s" % monday_of_this_week
    jobs = Jobs.objects.filter(created_time__gte=monday_of_last_week, created_time__lt=monday_of_this_week).order_by('-created_time')

    for job in jobs:
        print "Jobb: %s (%s)" % (job, job.created_time) 
```

输出很好，但我得到了一个令我烦恼的 RuntimeWarning。这是（以及其他输出）：

```
Someday last week 2013-03-14 15:11:32.819508
Monday of last week 2013-03-11 15:11:32.819508
Monday of this week 2013-03-18 15:11:32.819508
xxx/venv/lib/python2.7/site-packages/django/db/models/fields/__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime (2013-03-11 15:11:32.819508) while time zone support is active. 
```

RuntimeWarning）xxx/venv/lib/python2.7/site-packages/django/db/models/fields/ **init** .py:808：RuntimeWarning：DateTimeField 收到一个天真的日期时间（2013-03-18 15:11:32.819508）而时区支持处于活动状态。RuntimeWarning) Jobb: Webdesigner (2013-03-13 09:14:02+00:00) [21/Mar/2013 15:11:32] "GET /jobs/feed/7days/HTTP/1.1" 200 712

我在 settings.py 中将 USE_TZ 设置为 True，而 created_time 字段是这样的：

```
created_time = models.DateTimeField(_('Creation time'), default=datetime.now) 
```

任何人？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:27:05.900

```
jobs = Jobs.objects.filter(
    created_time__range[monday_of_last_week, monday_of_this_week]).order_by('-created_time') 
```

# rally - 提供的 Rally 2.0 示例将无法加载

> ID：15550135
> 
> 赞同：1
> 
> 时间：2013-03-21T14:22:24.500
> 
> 标签：rally

所以我最近决定升级到 Rally SDK 2.0。我正在使用入门工具包并按照网站上的说明进行操作。到目前为止我所做的一切都添加了：

```
launch: function() {
this.iterationCombobox = this.add({
    xtype: 'rallyiterationcombobox'
});
} 
```

到js文件。运行 rake 命令，将 App.html 加载到浏览器中。它是空白的。根据网站，屏幕左上角应该有一个小组合框。我不知道我错过了什么，我认为这个例子可以像网站显示的那样工作。

*编辑* 我应该补充一点，这不是 HTML 文件中包含的唯一内容。我的意思是 rake 在开头生成一个 HTML 文件，将 //Add Code Here 添加到 javascript 函数中。我的意思是上面的代码是我唯一改变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:31:29.667

我测试了您的代码片段，它在我的测试中有效。您是否将应用程序代码粘贴到 Rally 中的自定义 HTML 应用程序中？或者你是在拉力赛之外跑步吗？

如果是后者，则需要修改 App.html 中 script 标签的 src 属性：

```
<script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p5/sdk.js"></script> 
```

因此它包含对 AppSDK2 JS 库的完全限定引用。

AppSDK [API Docs](https://developer.help.rallydev.com/apps/2.0p4/doc/#)有一些简单的入门应用的好[例子](https://developer.help.rallydev.com/apps/2.0p4/doc/#!/example)。网格示例是很好的起点。您可以单击任何示例应用程序中的“查看源代码”链接并查看源代码。

# upgrade - 断开 TFS 克隆与生产系统的连接

> ID：15550142
> 
> 赞同：1
> 
> 时间：2013-03-21T14:22:33.580
> 
> 标签：upgrade, production-environment, test-environments

如何确保 TFS 2010/2012 克隆不会与我的生产环境中的系统交互？我想并行运行克隆以进行升级测试和一些进一步的测试。克隆不应与生产系统交互。有没有办法在不完全了解所有相关系统的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:49:25.440

您将需要运行该`ChangeServerId`命令以确保配置数据库和集合数据库的 GUID 已更改。以下是有关该命令的 MSDN 文章的链接：http: [//msdn.microsoft.com/en-us/library/vstudio/ee349259.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee349259.aspx)

注意：在运行此命令之前，您必须确保未为数据库配置应用层。如果配置了应用层，您将需要运行`RemapDBs`位于此处的命令：http: [//msdn.microsoft.com/en-us/library/vstudio/ee349262.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee349262.aspx)`TfsJobAgent`并在应用层上重新启动服务。

# javascript - 基于 Backbone.js 构建的网站是否会在禁用 Javascript 的计算机上无法使用？

> ID：15550143
> 
> 赞同：0
> 
> 时间：2013-03-21T14:22:34.227
> 
> 标签：javascript, backbone.js

我已经研究`Backbone.js`了一段时间，并试图围绕它进行思考。似乎在运行时，您实际上是在通过该层`Backbone.js`传递所有（或尽可能多地）服务器交互。`Backbone.js`

我的问题是：这
是否意味着如果禁用 JavaScript，您的应用程序/站点将不再工作？如果是这样，这被认为不是什么大不了的事吗？提供后备服务或通知用户他们需要启用的最佳实践是什么`Javascript`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:25:57.540

是的，基于 javascript 库构建的网站在禁用 javascript 的情况下将无法运行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T14:28:54.823

是的，对于所有效果和目的，任何单页应用程序，无论是使用 Backbone 还是任何其他框架构建的，都需要 JavaScript 才能运行。

可以设计一个网站作为传统的、基于文档/超链接的应用程序，然后使用 javascript 对其进行增强。这种类型的设计被称为渐进增强，它会严重破坏更复杂的应用程序。一方面，Backbone 期望您从 RESTful 服务中获取数据并使用客户端呈现来显示它。要支持没有 JavaScript 的用户，您基本上必须构建两个不同的站点。

您需要评估禁用 javascript 的浏览器是否是您用户群的重要组成部分。如果是，则不应构建 Backbone 应用程序。你的用例是什么？如果您正在为 100% 可访问性和 SEO 很重要的广告活动创建网站，您可能应该坚持使用服务器端呈现。如果您正在创建一个复杂且雄心勃勃的 Web 应用程序，您应该期望您的用户能够运行 JavaScript。

在任何情况下，您都应该使用`<noscript>`标签来通知用户在他们的浏览器中启用 JavaScript。

# python - 试图用 dict 缩短我的代码

> ID：15550144
> 
> 赞同：1
> 
> 时间：2013-03-21T14:22:38.550
> 
> 标签：python, if-statement, dictionary, int

```
tala = int(input('Skrifaðu magn af pening-->'))
if tala >= 0:
    fth = int(tala / 5000)
    remains = tala % 5000
    tth = int(remains / 2000)
    remains = remains % 2000
    th = int(remains / 1000)
    remains = remains % 1000
    fhr = int(remains / 500)
    remains = remains % 500
    hdr = int(remains / 100)
    remains = remains % 100
    fty = int(remains / 50)
    remains = remains % 50
    ten = int(remains / 10)
    remains = remains % 10
    fiv = int(remains / 5)
    remains = remains % 5
    one = int(remains / 1)
    print(d[tala]) 
```

**打印部分是** 我不熟悉语法的问题的主要焦点，但计划是使用 dict 来避免使用大量 if 来告诉代码如果数字大于 5000 或大于2000 等。基本上我有这样的想法（无效的语法 ofc）

```
d = {}
##d[Value between 0 and 4] or d[value between 5 and 9] etc.
d[0-4] = ("That would be {0} Krónur.".format(one))
d[5-9] = ("That would be {1} Fimmkallar and {0} Krónur.".format(one,fiv))
d[10-49] = ("That would be {2} Tíkallar, {1} Fimmkallar and {0} Krónur.".format(one,fiv,ten))
d[50-99] = ("That would be {3} Fimmtíukallar, {2} Tíkallar, {1} Fimmkallar and {0} Krónur.".format(one,fiv,ten,fty)) 
```

**如果您想知道这段代码在做什么，**如果我说输入一个高于 5000 的值

它会将其拆分（有点像 ATM）到 5000 张钞票、2000 张钞票、1000 张钞票、500 张钞票、100 张硬币等的多少倍。

这是一个解决 % 符号使用的学校项目（它是为 C# 制作的，但我正在通过在 Python 中完成我的 C# 作业来学习 Python）

主要问题是：**如果有一种方法可以使该字典样式起作用，我很想知道如何。** 次要问题是：如果有更好的方法来做到这一点，我很想听听你的想法。如果我应该做它（或它的一部分），其他方式也不会伤害知道。

编辑：我找到了一个半功能解决方案，但它并不完全漂亮。然而，它比我的替代方案更具可读性，所以总比没有好，没有人有比这更好的主意吗？：

```
#Dictionary START
    if tala < 5:
        num = 0
    elif tala < 10:
        num = 1
    elif tala < 50:
        num = 2
    elif tala < 100:
        num = 3
    d = {}
    d[0] =("Það eru {0} Krónur.".format(one))
    d[1] =("Það eru {1} Fimmkallar og {0} Krónur.".format(one,fiv))
    ...
#Dictionary END
    print(d[num]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:50:07.997

首先，创建一个字典，将单位名称映射到先前提取的值：

```
d = {"Kronur": one, "Tikallar": ten, "Fimmtiukallar": fty, ...} 
```

您可以使用`collections.OrderedDict`来保留将项目添加到字典中的顺序。但是，正如其他人指出的那样，使用元组列表可能会更好，因为您更关心顺序而不是快速随机访问：

```
d = [..., ("Tikallar", ten), ("Fimmkallar", fiv), ("Kronur", one)] 
```

现在，您可以遍历字典中的项目（那些不是`0`）并将它们连接成一个长字符串。（使用元组列表时，请使用`for (key, val) in d`而不是`for (key, val) in d.items()`。）

```
def get_string(d):
    s = "That would be "
    not_zero = [(key, val) for (key, val) in d.items() if val > 0]
    for i, (key, val) in enumerate(not_zero):
        if i > 0:
            s += ", " if i < len(not_zero)-1 else " and "
        s += "%d %s" % (val, key)
    s += "."
    return s 
```

示例输出：

```
>>> d = {"Kronur": 4, "Tikallar": 0, "Fimmtiukallar": 2}
>>> print get_string(d)
"That would be 2 Fimmtiukallar and 4 Kronur." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:43:20.567

这应该可以按您的意愿工作，而不是使用 a ，`dict`因为未使用查找，因此 `dict`失去了the 的优势

```
def test_func(value):
    """
        >>> test_func(0)
        'That would be 0 Kronur.'

        >>> test_func(4)
        'That would be 4 Kronur.'

        >>> test_func(5)
        'That would be 1 Fimmkallar and 0 Kronur.'

        >>> test_func(15)
        'That would be 1 Tikallar, 1 Fimmkallar and 0 Kronur.'

        >>> test_func(47)
        'That would be 2 Fimmtiukallar, 0 Tikallar, 1 Fimmkallar and 2 Kronur.'
    """
    twenty = value / 20
    ten = (value - twenty * 20) / 10
    five = (value - twenty * 20 - ten * 10) / 5
    one = (value - twenty * 20 - ten * 10 - five * 5)
    ranges = [((0, 5), 'That would be {0} Kronur.'),
              ((5, 10), 'That would be {1} Fimmkallar and {0} Kronur.'),
              ((10, 20), 'That would be {2} Tikallar, {1} Fimmkallar and '
                         '{0} Kronur.'),
              ((20, 50), 'That would be {3} Fimmtiukallar, {2} Tikallar, '
                         '{1} Fimmkallar and {0} Kronur.')]
    text = next(v for r, v in ranges if r[0] <= value < r[1])
    return text.format(one, five, ten, twenty) 
```

[http://docs.python.org/2/library/doctest.html](http://docs.python.org/2/library/doctest.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:09:22.387

如果您首先指定您拥有的所有面额的列表，然后，您可以使用 for 循环遍历每个面额，然后使用列表推导式输出子字符串数组。这是一个带有一些测试的示例。

```
#specify array containing denominations as a tuple, amount and name
denominations = [(5000, 'five thousand'), (2000, 'two thousand'), (1000, 'five thousand'), (500, 'five hundred'), (100, 'one hundred')]

def print_break_down(total):

    counts = []
    for denomination in denominations:
        counts.append(total/ denomination[0])
        total = total % denomination[0]

    main = ' and '.join(['%s %s' %(count, denominations[i][1]) for i, count in enumerate(counts) if count>0])
    print 'That would be %s' % main

print_break_down(15000)
print_break_down(15100)
print_break_down(5300)
print_break_down(4000)
print_break_down(1600)
print_break_down(600)
print_break_down(100) 
```

# jquery - 当另一个函数在计时器内完成时调用一个函数

> ID：15550146
> 
> 赞同：0
> 
> 时间：2013-03-21T14:22:42.893
> 
> 标签：jquery, jquery-animate, setinterval

我有这两个功能：

```
animation1();
animation2(); 
```

我想执行 animation2(); 当动画1（）；完成文件准备好，然后每 10 秒在：

```
window.setInterval(function(){
animation1();
animation2();   
    }); 
```

每个动画都有延迟，所以可能很棘手，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:55:52.310

只要`animation1`并`animation2`返回延迟对象，这可以轻松完成。

```
function animation1() {
    $(el).animate(...);
    return $(el).promise();
}
function animation2() {
    $(el).animate(...);
    return $(el).promise();
}
doAnimations() {
    animation1().done(animation2);
}
$(function(){
    doAnimations();
    setInterval(doAnimations,10*1000);
}); 
```

# java - android数据库登录表单

> ID：15550152
> 
> 赞同：0
> 
> 时间：2013-03-21T14:22:52.650
> 
> 标签：java, android, eclipse

谁能纠正我这个java代码？我是 java 编程和 android 开发的初学者，我迷失在这些大括号中，所以任何人都可以帮助我更正这段代码吗？：/ P，S我正在使用eclipse，我正在尝试创建一个连接到我的本地数据库的登录界面，但问题是eclipse在大括号上给了我错误我认为缺少一些东西希望有人可以帮助我

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.user);

    initialise();
}

private void initialise() {
    // TODO Auto-generated method stub
    etUser = (EditText) findViewById(R.id.editText2);
    etPass = (EditText) findViewById(R.id.editText1);
    bLogin = (Button) findViewById(R.id.button1);
    bLogin.setOnClickListener(this);
}

public void onregister(final View button) {
    final Intent intent = new Intent();
    intent.setClass(this, register.class);
startActivity(intent);

}

public void onClick(final View v) {

httpclient = new DefaultHttpClient();
httppost = new HttpPost("http://10.0.2.2/blood_needed/database.php");

username = etUser.getText().toString();
password = etPass.getText().toString();

try{
    nameValuePairs = new ArrayList<NameValuePair>() ;

    nameValuePairs.add(new BasicNameValuePair("username" , username ));
    nameValuePairs.add(new BasicNameValuePair("password", password));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    final Thread a = new Thread(new Runnable() {

        public void run() {
    response = httpclient.execute(httppost);

    runOnUiThread(new Runnable(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            if(response.getStatusLine().getStatusCode()== 200 ){

                entity = response.getEntity();

                if(entity != null ) {

                    InputStream instream = entity.getContent();

                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
                    String retUser = jsonResponse.getString("username");
                    String retPass = jsonResponse.getString("password");

                    if(username.equals(retUser) && password.equals(retPass)){

                        SharedPreferences sp = getSharedPreferences("logindetails", 0);

                        SharedPreferences.Editor spedit = sp.edit();

                        spedit.putString("username", username);
                        spedit.putString("password", password);

                        spedit.commit();

                        Toast.makeText(getBaseContext(), "Succes!", Toast.LENGTH_SHORT).show();

                    } else {

                        Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();

                    }
        } 

    }

        }

    }

            );

 catch(Exception e) {

    Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();

}

    a.start();
private static String convertStreamToString(final InputStream is) {

final BufferedReader reader = new BufferedReader(new InputStreamReader(is));
final StringBuilder sb = new StringBuilder();

String line = null;
try {
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
} catch (final IOException e) {
    e.printStackTrace();
} finally {
    try {
        is.close();
    } catch (final IOException e) {
        e.printStackTrace();
    }
}
return sb.toString(); 
```

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:42:51.277

请在该行之后插入 4 个大括号：

```
a.start();
}}}} 
```

你应该能够编译......

-- 更新 -- 使用这个：

```
public void onCreate(final Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.user);

initialise();
}

private void initialise() {
  // TODO Auto-generated method stub
  etUser = (EditText) findViewById(R.id.editText2);
  etPass = (EditText) findViewById(R.id.editText1);
  bLogin = (Button) findViewById(R.id.button1);
  bLogin.setOnClickListener(this);
}

public void onregister(final View button) {
final Intent intent = new Intent();
intent.setClass(this, register.class);
startActivity(intent);

}

public void onClick(final View v) {

httpclient = new DefaultHttpClient();
httppost = new HttpPost("http://10.0.2.2/blood_needed/database.php");

username = etUser.getText().toString();
password = etPass.getText().toString();

try {
  nameValuePairs = new ArrayList<NameValuePair>();

  nameValuePairs.add(new BasicNameValuePair("username", username));
  nameValuePairs.add(new BasicNameValuePair("password", password));

  httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

  final Thread a = new Thread(new Runnable() {

    public void run() {
      response = httpclient.execute(httppost);

      runOnUiThread(new Runnable() {

        @Override
        public void run() {
          // TODO Auto-generated method stub
          if (response.getStatusLine().getStatusCode() == 200) {

            entity = response.getEntity();

            if (entity != null) {

              InputStream instream = entity.getContent();

              JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
              String retUser = jsonResponse.getString("username");
              String retPass = jsonResponse.getString("password");

              if (username.equals(retUser) && password.equals(retPass)) {

                SharedPreferences sp = getSharedPreferences("logindetails", 0);

                SharedPreferences.Editor spedit = sp.edit();

                spedit.putString("username", username);
                spedit.putString("password", password);

                spedit.commit();

                Toast.makeText(getBaseContext(), "Succes!", Toast.LENGTH_SHORT).show();

              } else {

                Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();

              }
            }
          }
        }
      });
    }
  });
  a.start();
} catch (Exception e) {

  Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();

}

}

private static String convertStreamToString(final InputStream is) {

final BufferedReader reader = new BufferedReader(new InputStreamReader(is));
final StringBuilder sb = new StringBuilder();

String line = null;
try {
  while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
  }
} catch (final IOException e) {
  e.printStackTrace();
} finally {
  try {
    is.close();
  } catch (final IOException e) {
    e.printStackTrace();
  }
}
return sb.toString();
} 
```

将该代码放在您的类大括号中。

# ios - 如何在我自己的 iOS 项目中使用 pjsip？

> ID：15550156
> 
> 赞同：6
> 
> 时间：2013-03-21T14:23:06.527
> 
> 标签：ios, libraries, pjsip

我已经成功下载了 pjsip 的源代码并为 iphone 编译了它。我可以运行该版本附带的 iOS 示例项目。我的下一步是构建我自己的使用 pjsip 库的项目，这是我开始遇到问题的地方。

我已将示例项目使用的相同库添加到我的项目中。我还将“构建设置”下的“标题搜索路径”设置为“$ {SOURCE_ROOT}”之后我尝试通过键入来包含pjsip库：

```
#include <pjsua-lib/pjsua.h> 
```

xcode 给我错误“pjsua-lib/pjsua.h”文件未找到。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T17:13:20.980

您必须包括文件夹

```
path/to/pjsipprojectfolder/pjsip/include
path/to/pjsipprojectfolder/pjmedia/include
path/to/pjsipprojectfolder/pjnpath/include
path/to/pjsipprojectfolder/pjlib-util/include
path/to/pjsipprojectfolder/pjlib/include 
```

到“构建设置”下的“标题搜索路径”。

现在编译器可以找到所有 *.h 文件

# html - Firefox 中奇怪的定位问题

> ID：15550164
> 
> 赞同：0
> 
> 时间：2013-03-21T14:23:28.210
> 
> 标签：html, css

我有以下代码示例：http: [//jsfiddle.net/RZUnh/3/](http://jsfiddle.net/RZUnh/3/)

这是那些不想去小提琴链接的人的标记。

```
<table border="1">
    <tr>
        <td>
            <img src="http://static.tumblr.com/xicugzn/8YDm6eu1c/aviarios-del-caribe-sloth-sanctuary.10968.large_slideshow.jpg" height="150" />
            <div class="child">Overlay</div>
        </td>
        <td>
            <img src="https://leerburg.com/Photos/bamboostick874.gif" height="250" />
            <div class="child">Overlay</div>
        </td>
    </tr>
    <tr>
        <td>Text</td>
        <td>Text</td>
    </tr>
</table> 
```

这是CSS。

```
td {
    min-height:70px;
    position:relative;
}

.child {
    background-color: rgba(255, 0, 0, .5);
    position: absolute;
    right:0px;
    bottom: 5px;
} 
```

在 Chrome、IE 10 和 Safari 中，它产生以下布局： ![在此处输入图像描述](../Images/d321a0ccbfc6344aab8fd689c3684bdf.png)

然而，在 Firefox 中，结果完全不同（注意“覆盖”是如何在实际表之外的）： ![在此处输入图像描述](../Images/d84be7c6c831d77a409f967fe1c2871f.png)

我已经在这个问题上摆弄了 3 个多小时了，我们的开发部门没有人知道可能是什么问题。

我[对该主题进行了一些研究，](https://stackoverflow.com/questions/4564638/using-position-relative-absolute-within-a-td)并发现 TD 内的相对定位是一件坏事。我尝试遵循建议并在其中使用相对布局制作一个 div 容器，但布局最终像这样（在 Firefox 中）：

![在此处输入图像描述](../Images/ba95d1ef8cc4cd39ba1bfeebd47968d6.png)

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:57:56.317

[***演示***](http://jsfiddle.net/RZUnh/16/)

`div`在: 中添加了一个包装器`td`：

```
<div class="wrapper">
  <img />
  <div class="child">Overlay</div>
</div> 
```

您可能需要在 css 中硬编码最高图像的高度

```
table {
    position:relative;
}
div.wrapper {
    height:100%;
    min-height:255px; /* height of tallest image (250px) + .child bottom value (5px) */
    position:relative;
}
div.child {
    background-color: rgba(255, 0, 0, .5);
    position: absolute;
    right:0px;
    bottom: 5px;
} 
```

# javascript - JSF中如何使用jsf.ajax.request手动发送ajax请求

> ID：15550165
> 
> 赞同：5
> 
> 时间：2013-03-21T14:23:31.757
> 
> 标签：javascript, ajax, jsf-2

我有一个表，每一行都配置了“onclick”以调用 js 函数——这部分有效。我希望该函数向我可以以某种方式定义的方法发出 ajax 请求。返回时，应呈现表格下方的 div。这可能吗？我用代码尝试了JS函数：

```
<h:outputScript library="javax.faces" name="jsf.js" />
...
function clickAndRender() {
  jsf.ajax.request(this, event, {render: 'div-to-render'})
} 
```

但这当然行不通。我不知道'source'参数的值（上面的代码使用'this'）应该是什么，我也不知道最后一个参数中的执行应该设置为什么。我也不知道如何定义要调用的 url 和 'action' 方法。

该解决方案还可以在页面中的其他位置使用一些不可见的表单，这些表单是通过点击提交的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T13:04:29.927

根据 JSF 2.3，您可以使用`<h:commandScript>`它。另见[规范问题 613](https://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-613)。

```
<h:form>
    <h:commandScript name="foo" action="#{bean.action}" render="div-to-render" />
</h:form> 
```

```
function clickAndRender() {
    foo();
} 
```

它从[Mojarra 2.3.0-m06](https://repo.maven.apache.org/maven2/org/glassfish/javax.faces/)开始可用。

* * *

^(该答案在问题发布3年后更新为以上。以下是原始答案，可以追溯到`<h:commandScript>`不存在的时候。)

* * *

> *我不知道'source'参数的值（上面的代码使用'this'）应该是什么*

它应该是[`UICommand`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UICommand.html)您想要调用的组件的客户端 ID，例如标准 JSF API 提供的`<h:commandLink>`、`<h:commandButton>`等。这样，JSF 将在应用请求值阶段能够在组件树中定位所需的组件，然后将所有注册在其上的操作（侦听器）排队。

* * *

> *我也不知道最后一个参数中的执行应该设置为什么。*

它应该是您希望在表单提交期间处理的组件的以空格分隔的客户端 ID。它与您通常在`<f:ajax execute>`.

* * *

> *我也不知道如何定义要调用的 url*

只是当前页面，由组件嵌套所在的`<form>`生成的派生。但您不需要在. 将已经根据组件的客户端 ID 确定它。`<h:form>``UICommand``jsf.ajax.request()``jsf.js``UICommand`

* * *

> *和“行动”方法。*

只需按照通常的方式指定目标组件的`action`or`actionListener`属性即可。`UICommand`

* * *

总而言之，您的具体问题很可能是`UICommand`视图中没有任何组件，因此您不能使用`jsf.ajax.request()`. 一种方法是创建一个带有命令组件的表单，该组件被 CSS 隐藏`display:none`：

```
<h:form id="foo" style="display:none">
    <h:commandLink id="bar" action="#{bean.method}" />
</h:form> 
```

然后你可以`foo:bar`用作`source`参数。

```
jsf.ajax.request('foo:bar', null, {'javax.faces.behavior.event': 'action', 'execute': '@form', 'render': 'div-to-render'}); 
```

以上内容与命令组件中的效果相同`<f:ajax execute="@form" render="div-to-render">`。您也可以选择这条路径，然后使用`document.getElementById("foo:bar").click()`而不是`jsf.ajax.request()`.

或者，您也可以创建一个自定义`UICommand`组件，让 JavaScript 用户更轻松。JSF 实用程序库[OmniFaces](http://omnifaces.org)有这样一个组件，即[`<o:commandScript>`](http://omnifaces.org/docs/vdldoc/current/o/commandScript.html). 另请参阅其[展示页面](http://showcase.omnifaces.org/components/commandScript)和[源代码](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/script/CommandScript.java)。JSF 组件库[PrimeFaces](http://primefaces.org)也有一个类似的[`<p:remoteCommand>`](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/remoteCommand.html). 另请参阅其[展示页面](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)。[RichFaces](http://jboss.org/richfaces)具有[`<a4j:jsFunction>`](http://docs.jboss.org/richfaces/latest_4_X/vdldoc/a4j/jsFunction.html)相同的功能。另请参阅其[展示页面](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=jsFunction&skin=blueSky)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:20:07.247

单独使用本机 JSF，我不知道该怎么做。但是，您应该看看 PrimeFace 的[RemoteCommand](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)。这正是您目前所需要的。它会是这样的：

```
<p:remoteCommand name="onRowClick" actionListener="myBean.onRowClick" update="div-to-render" />

<h:someComponent onclick="onRowClick" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:46:54.223

好的，所以我设法通过 BalusC 建议的所有方式实现了我需要的东西，其中 <a4j:jsFunction> 看起来最好。我写后续文章的原因是我最初没有在问题中包含更多错误并且没有足够的评论空间;d

1.  我的表格在错误的地方 - 它被放在“桌子”内：

    ```
    <table>
      <ui:repeat>...</ui:repeat>
      <form>...</form>
    </table> 
    ```

    虽然它适用于非 Ajax，但 id 不适用于 Ajax 请求。将其移到表格正下方会导致提交请求。

2.  我想渲染的面板最初是 render='false' ，这导致 HTML 标记一开始就没有输出。当 Ajax 调用返回时，它找不到具有我想要呈现的 id 的元素，并导致错误对话框或什么都没有（取决于方法）。解决方案是使用始终呈现相关 id 的包装 div，并仅在该 div 内使用条件呈现。所以，而不是：

    ```
    <h:outputText id="to-render" rendered="${bean.clicked != null}">
      ...
    </h:outputText> 
    ```

    我需要这样做：

    ```
    <h:panelGroup layout="block" id="to-render">
      <h:outputText rendered="${bean.clicked != null}">
        ...
      </h:outputText>
    </h:panelGroup> 
    ```

感谢所有的帮助。我将把 BalusC 的帖子保留为正确的，因为它确实是正确的，我自己的错误会影响整个事情。

# c++ - c++错误不能作为函数使用，有些杂散错误

> ID：15550172
> 
> 赞同：1
> 
> 时间：2013-03-21T14:23:40.243
> 
> 标签：c++

我写了一个日历代码，但我有一些杂散错误。这是我的代码：

```
#include<iostream>
#include<iomanip>
using namespace std;
int main(){
int month, year, Y, M;
int day[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};
int FirstDayofMonth; 

cout<<"please enter year!"<<endl;
cin>>year;
while(year<1600)
{
    cout<<"please do not enter year less than 1600!"<<endl;
    cin>>year;
}
cout<<"please enter month! (1~12)"<<endl;
cin>>month;
Y = year – (14 – month)/12;
M = month + 12 * ((14 - month) / 12) - 2;
FirstDayofMonth = (Y+Y/4-Y/100+Y/400+31*M/12+1)%7;
} 
```

另一部分是打印结果。它向我显示了下面的错误

```
try.cpp:18: error: stray ‘\342’ in program
try.cpp:18: error: stray ‘\200’ in program
try.cpp:18: error: stray ‘\223’ in program
try.cpp:18: error: stray ‘\342’ in program
try.cpp:18: error: stray ‘\200’ in program
try.cpp:18: error: stray ‘\223’ in program
try.cpp: In function ‘int main()’:
try.cpp:18: error: expected `)' before ‘month’
try.cpp:18: error: ‘year’ cannot be used as a function 
```

18:`Y = year – (14 – month)/12;`

我不知道错误是什么意思，有人可以帮助我吗？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:26:28.740

错误是在您的代码中报告 bytes `\342`、`\200`和`\223`（以八进制表示）。这些字节构成了[EN DASH](http://www.fileformat.info/info/unicode/char/2013/index.htm)的 UTF-8 编码。这是英文文本中用于范围（如六月至八月）或关系（如悉尼至洛杉矶航班）的字符。C++ 编译器通常接受的减号字符是与 ASCII 兼容的[HYPHEN-MINUS](http://www.fileformat.info/info/unicode/char/2d/index.htm)，它是 QWERTY 键盘上可用的字符。

看起来您从某处复制并粘贴了此代码，并且在此行中有错误的减法字符：

```
Y = year – (14 – )month)/12; 
```

还要注意不应该存在的额外括号。也许你想要：

```
Y = year - (14 - month) / 12; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:27:34.447

我认为您在该行`)`的第二个之后有一个额外的`-`：

```
Y = year – (14 – )month)/12; 
```

应该：

```
Y = year – (14 – month)/12; 
```

# google-app-engine - DateProperty 和 DateTimeProperty 之间的区别

> ID：15550178
> 
> 赞同：0
> 
> 时间：2013-03-21T14:23:58.400
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, app-engine-ndb

`ndb.DateProperty`通俗地说，和有什么区别`ndb.DateTimeProperty`？我什么时候用哪个？例如，我的意图是与 param 一起使用`auto_now_add=True`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:25:36.810

我会说那`DateProperty`是当你只想要一个日期部分（即`dd/mm/yyyy`或任何格式）时，`DateTimeProperty`当你想要一个完整的日期和时间表示（即`dd/mm/yyyy 00:00:00`或任何格式）时很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:26:53.540

从[文档](https://developers.google.com/appengine/docs/python/ndb/properties#Date_and_Time)：

> 这些取值属于标准 Python 日期时间模块的相应类（日期、时间、日期时间）。三者中最通用的是 DateTimeProperty，既表示日历日期，也表示一天中的时间；其他的有时可用于仅需要日期（例如出生日期）或仅需要时间（例如会议时间）的特殊目的。由于技术原因，DateProperty 和 TimeProperty 是 DateTimeProperty 的子类，但您不应该依赖这种继承关系（请注意，它与 datetime 模块本身定义的底层类之间的继承关系不同）。

正如预期的那样，如果您不需要任何时间参考（例如：仅日期），则使用一个，当您需要完整信息时使用另一个。何时使用其中一个完全取决于您在非常精确的时刻需要什么信息。

# sql-server - 将 time(7) 转换为 bigint T-SQL

> ID：15550185
> 
> 赞同：0
> 
> 时间：2013-03-21T14:24:17.870
> 
> 标签：sql-server, tsql

如何将`time(7)`类型转换为`bigint`T-SQL 中的类型？

我正在尝试将具有数据的列中的`time(7)`数据更新并转换为另一个`bigint`类型的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:36:00.160

假设当您说“滴答”时，您的意思是秒。如果您的意思是毫秒将“ss”更改为“ms”。

```
Declare @time7 Time(7)
Set     @time7 = Convert(Time(7),Getdate())

Select  Convert(Bigint,Datediff(ss,0,@time7)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:53:11.860

`datediff`返回一个 int 所以如果你想要 time(7) 的完整精度，你需要做一些计算。使用`microsecond`or `nanosecond`in`datediff`会导致溢出。

```
declare @T time(7) = '23:59:58.9999999'
select datediff(second, '00:00', @T) * cast(10000000 as bigint) + right(@T, 7) 
```

结果：

```
863989999999 
```

重要的是使用`00:00`而不是`0`在`datediff`. 随着`0`您的时间值将被隐式转换为`datetime`并且上面使用的值将被转换为该值`23:59:59`，因为`datetime`四舍五入为 0.000、0.003 或 0.007。

[`datediff`如果支持`bigint`](https://connect.microsoft.com/SQLServer/feedback/details/320998/add-datediff-big)，这一切都会容易得多。

# asp.net - 使用用户配置文件创建 asp.net 页面

> ID：15550188
> 
> 赞同：1
> 
> 时间：2013-03-21T14:24:20.137
> 
> 标签：asp.net, textbox, grid

我正在创建 asp.net 网站，我的客户将通过填写表格进行注册。该表格有姓名，地址，电话号码，电子邮件等。现在我想为用户提供输入多个电话号码和多个电子邮件的功能，如果他想输入的话。那么设计应该如何呢？我应该提供更多数量的文本框吗？但它看起来不会很好。我是否应该在输入一个电话号码时自动显示一个新的文本框（可能正在使用网格等）。那么这些事情一般是怎么做的呢？我还想包括对电话号码和电子邮件字段的验证。所以它变得有些难以设计。否则用户可以使用逗号分隔符或空格等输入。但验证将变得困难，因为用户可以输入任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:51:02.347

最简单的情况是允许一个额外的电话号码和电子邮件字段，可能将它们标记为“替代电话”和“替代电子邮件”。

如果您想为每个选项提供超过 1 个选项，我将提供一个“+”按钮，该按钮取消隐藏文本框以允许输入另一个数字/地址。在这种情况下，您可能希望最初使用 css 设置隐藏的额外行并将 javascript 附加到“+”按钮的 onlick 事件以取消隐藏它们。

# iphone - iPhone应用程序之间的通用登录

> ID：15550190
> 
> 赞同：0
> 
> 时间：2013-03-21T14:24:24.280
> 
> 标签：iphone, objective-c

我只是想如果用户已经登录到我的一个 iphone 应用程序并选择记住我。应该记住我在他的 iphone 中安装的所有应用程序之间的关系。

在简单的世界中，我使用**NSUserDefaults**来执行记住我。我想要一个公共的地方来获取/设置我所有应用程序之间的**用户名**和**密码**。

我的所有应用程序都使用一个 Web 服务方法来执行登录。

可能吗？如果是，苹果会批准吗？

如果还有其他方法可以执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:25:49.300

是的，有可能，您必须将数据保存在 KeyChain 中。

您将需要配置您的应用程序以共享钥匙串访问权限。 [在这里](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)，您将找到有关如何执行此操作的不错的教程。

# c# - 登录屏幕，无限循环和数组检查错误

> ID：15550193
> 
> 赞同：1
> 
> 时间：2013-03-21T14:24:34.563
> 
> 标签：c#, silverlight, login, multidimensional-array

我正在尝试创建一个登录屏幕，用于检查用户输入的登录名和密码是否与存储在双阵列中的登录名和密码。

我已经修改了几次代码，但似乎无法使其正常工作。

如果我输入了正确的登录名和错误的密码，它就会失败，但是当我输入错误的登录名时，它就会陷入一个永恒的循环。

这是我到目前为止所拥有的：

```
string[,] loginBD = new string[9,4];    

     private void BtnLogin_Click(object sender, RoutedEventArgs e)
     {
        loginBD[0,0] = "0";
        loginBD[0,1] = "Name";
        loginBD[0,2] = "admin";
        loginBD[0,3] = "123";
        int busca = 0,loginOK = 0, loginFail = 0;
        string login, senha;

        mID = 8;
        loginOK = 0;
        loginFail = 0;
        login = TxtLogin.Text.Trim();
        senha = PsbSenha.Password;

        do{
           if (loginBD[busca, 2].Equals(login))
           {
               if (loginBD[busca, 3].Equals(senha))
               {
                   loginOK = 1;
               }
               else
               {
                   loginFail = 0;
               }
           }
           else if (busca >= mID)
           {
               loginFail = 1;
           }
           else
           {
               busca++;
           }
       } while (loginFail == 0 && loginOK == 0);

       if (loginFail == 1)
       {
           MessageBox.Show("Fail!");
       }else if (loginOK == 1)
       {
           MessageBox.Show("OK!");
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:40:18.423

我在这里看到两个问题：

1）如果您的用户名匹配（但密码不匹配），则您永远不会增加阵列计数器（busca）。这用正确的用户名和错误的密码解释了您的无限循环。（您是否尝试过调试代码并逐步执行逻辑？）

2) 你创建了你的数组，但没有初始化它的所有元素......只有第一组。因此，在**do**循环的第二次迭代中，您将尝试在空值 - loginBD[1,3] 上调用方法 (Equals)。这将引发异常。

不是将 mID 初始化为 8，而是将其初始化为数组中的条目数减一。这样，一旦您达到数组中的实际项目数，将您的索引与数组项的计数 (busca >= mID) 进行比较将导致进程失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:39:11.930

答案很简单。您循环评估您输入的数据。但是当评估失败时，您不会重新查询数据。

您不应仅循环评估，而应在身份验证失败时重新查询用户名和密码。

原始代码看起来像这样：

```
private void Btn_LoginClick(object sender, EventArgs e)
{
    loginBD[0,0] = "0";
    loginBD[0,1] = "Name";
    loginBD[0,2] = "admin";
    loginBD[0,3] = "123";
    int busca = 0,
    boolean loginOK = false;
    string login, senha;
    login = TxtLogin.Text.Trim();
    senha = PsbSenha.Password;
    //Call some method to check if the login is valid
    loginOK = checkLogin(loginBD, login, senha);
    if (loginOK)
    {
       //Do the login
    }
    else
    {
       //Clear the login-form
    }
} 
```

checkLogin 是您在 do-while 循环中的代码的占位符，只有在登录正常时才应返回 true。

```
private boolean checkLogin(string[] loginBD, string login, string senha)
{
    //Divide the amount of Array-Elements by 4 to get the amount of users
    for (int x = 0; x < loginBD.Length / 4; x++)
    {
        //you can do this in one step
        if(loginBD[x,2].Equals(login) && loginBD[x,3].Equals(senha))
        {
          //this automatically ends the loop and tells the main method that login is correct
          return true;
        }
    }
    //if there is no corresponding login in the array
    return false;
} 
```

有关方法的更多信息（如果您不知道这是什么）请查看[此处](http://www.google.de/?q=methods+c%23)

至于登录的安全性，你可以暂时看看[数据库](http://www.google.de/?q=sql+databases+c%23)

# python - 在 to_dict 中排除 GAE 模型中的 BlobProperty

> ID：15550198
> 
> 赞同：0
> 
> 时间：2013-03-21T14:24:46.153
> 
> 标签：python, google-app-engine

我为一个使用 GAE 的项目学习了一些 python，除了一件事之外，我已经弄清楚了一切。将 GAE 模型转换为 JSON 时，如何跳过 BlobProperty（例如，如果 Profile 模型具有 avatar 属性）？所以代替标准：

```
def to_dict(self):
    return dict([(p, unicode(getattr(self, p))) for p in self.properties()]) 
```

我需要类似的东西：

```
def to_dict(self):
    return dict([(p, unicode(getattr(self, p))) for p in self.properties() if type(p) is not db.BlobProperty]) 
```

但这对我不起作用。我正在查看[这个线程](https://stackoverflow.com/questions/10675849/converting-gae-model-into-json)，它非常相似，但我无法让它适用于我的情况。我可能在 Python 中做错了什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:24:37.110

db.Model.properties() 将字符串的字典返回到属性和字典。**iter**只产生键。所以 type(p) 总是会是一个字符串。如果你想键和值使用[db.Model.properties().items()](http://docs.python.org/2/library/stdtypes.html#dict.items)代替。数据库模型。

而是尝试类似：

```
def to_dict(self):
  return dict([(p, unicode(getattr(self, p))) for p,t in self.properties().items() if type(t) is not db.BlobProperty]) 
```

# php - 永久链接中的 URL 编码不正确

> ID：15550201
> 
> 赞同：1
> 
> 时间：2013-03-21T14:24:48.667
> 
> 标签：php, wordpress, url, url-rewriting, permalinks

我对 wordpress 对由提供的 url 进行编码的方式有问题`<?php echo the_permalink() ?>`

永久链接设置设置为年/月/帖子标题，并且永久链接看起来就像在帖子编辑器中一样。

有两件事正在发生。一些永久链接是用 %20 而不是破折号编码的，有些只是得到空格。真正棘手的部分是某些链接有效，而有些则引发错误。

例如，一个看起来像这样的链接：/link to page - 另一个看起来像这样：/link%20to%20page - 两者都指向同一个页面，两者都由同一个函数提供，其中一个有效一个没有。

任何帮助，甚至任何想法，都将不胜感激。

# java - 事件系统排序问题

> ID：15550202
> 
> 赞同：1
> 
> 时间：2013-03-21T14:24:51.627
> 
> 标签：java, events, design-patterns

在我当前的项目中，我们使用的是事件系统，它不带优先级地传播事件。我的意思是准确的。问题是事件的调用没有优先级，因此这意味着侦听类会触发它们的“消息”代码，以便将它们添加到侦听器容器中。

它有时会导致难以预测的难以分析的结果。

您是否知道任何现有的解决方案以“好的方式”处理事件排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:33:28.823

优先考虑事件是通往地狱的高速公路。没有字面意思。您需要跟踪哪些对象需要哪些优先级。然后你会用完优先级。接下来，您意识到您已经将相同的依赖项（优先级常量类）硬编码到 100 个类中，并且实际上已经将它们捆绑在一起。好吧，也许不是，但陷阱很多，而且不幽默。你得看看你想达到什么：你想按顺序执行流程。它与事件没有任何关系，除了这些过程是由事件触发的完全任意的事实。

有很多解决方案：

1.  使用[有限状态机](http://en.wikipedia.org/wiki/Finite_state_machine)，这是迄今为止最通用和最清晰的解决方案。
2.  隔离需要由一个特定事件触发的顺序执行的进程并以某种方式将它们排队，例如使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)并触发事件队列中所有命令的执行。或者使用[Promise](http://en.wikipedia.org/wiki/Futures_and_promises)也是一种可能。
3.  事件链的正确方式：如果 ClassA 需要响应事件 A，但只有在 ClassB 完成处理之后，那么 ClassA 不应该响应事件 A，而是响应从 ClassB 分派的事件。最不可取的是，但有时你需要快点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:29:38.253

在您的侦听器类中添加某种依赖标志。也就是说，假设监听器 A 被调用，它依赖于监听器 B，然后让 B 先执行。类似地，您可以将依赖条件放在所有侦听器类中，从而创建所需的层次结构。

只要确保你没有添加循环依赖或小心处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:29:42.513

可能对您有利。`PriorityBlockingQueue`使您的事件实现可比，并且事件调度程序线程每次都消耗最高优先级的事件。

# c++ - 为什么 C++ 编译器允许为指针分配 0 而没有其他数字

> ID：15550203
> 
> 赞同：0
> 
> 时间：2013-03-21T14:24:52.777
> 
> 标签：c++, compiler-construction

我正在发布一个问题的答案 - 并评论它发生在我身上，这要感谢另一张名为**金属**的海报

C++ 编译器允许这样做：

`int *p = 0;`但不是这个`int *p = 1`。算不算`0`特殊号码？

编辑：@DavidHefferman 说`Is 0 special? In the context of a pointer, yes it is.`- 为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T14:31:38.730

标准的第 4.10 节，指针转换 [conv.ptr] 说：

> 空指针常量是整数类型的整数常量表达式 (5.19) 纯右值，其计算结果为零或 std::nullptr_t 类型的纯右值。空指针常量可以转换为指针类型；结果是该类型的空指针值，并且可以与指向对象的指针或指向函数类型的指针的所有其他值区分开来。这种转换称为空指针转换。相同类型的两个空指针值应比较相等。将空指针常量转换为指向 cv 限定类型的指针是一次转换，而不是指针转换后跟限定转换 (4.4) 的顺序。整数类型的空指针常量可以转换为 std::nullptr_t 类型的纯右值。

所以，是的，`0`是指针上下文中的一个特殊值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:26:48.273

0 是 NULL，而 1 是无效地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:29:48.623

“空指针常量是一个积分常量表达式，其计算结果为零（例如 0 或 0L）。”

见[http://www.cplusplus.com/reference/cstring/NULL/](http://www.cplusplus.com/reference/cstring/NULL/)

# r - 循环遍历数据帧列表并计算相关系数

> ID：15550204
> 
> 赞同：2
> 
> 时间：2013-03-21T14:24:54.440
> 
> 标签：r

我正在使用最新版本的 R-Studio。

我创建了一堆数据框，我想测试它们的相关性。创建数据框后，我创建了一个变量`u`，表示所有数据框的范围。我想创建一个循环来遍历每个循环并`data.frame`进行`u`以下测试`corr(data.frame)`

我有以下代码：

```
corrvals <- NULL
for (i in seq(along=u[])) {
corrvals <- corr(u)
} 
```

我发现了一些类似于我想在[这里做的事情](https://stackoverflow.com/questions/8845256/calculate-correlation-by-aggregating-columns-of-data-frame/ "这里")

问题是，所有的`data.frame`'s 都是按照我想要的方式设置的，我只是想运行`data.frame`列表中的每个并在其`corr`上运行函数。

我还想打印出 data.frame 的名称及其相关值，如下所示：

```
data.frame Corr
ac         -0.03445345
af          0.023429
.
.
.
n           corr(n) 
```

放入我的空储物容器中`corrvals`。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:29:30.370

我建议将您的 data.frames 放入列表中，然后运行`lapply`​​. 像这样：

```
# setting up a reproducible example
data(mtcars)
data(iris)
# remove the last column cause it ain't numeric.
iris <- iris[,-5]
listOfDataFrames <- list()
listOfDataFrames[[1]] <- mtcars
listOfDataFrames[[2]] <- iris

# here's a one liner using base R. 
lapply(listOfDataFrames,cor) 
```

欢迎来到 SO，顺便说一句。啊，我猜你的意思是`cor`，对吧？然而，这基本上适用于任何功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T14:29:37.817

我似乎`lapply`在这里发布了很多。这是一个方便的包装器，它隐藏了循环，但正是你想要的......

# 编辑

多一点参与，因为你想要的名字。该`corr`功能也来自包`boot`：

```
u <- list( df1 , df2 , df3 )
attr(u, "names") <- c("df1","df2","df3")
require( boot )
res <- lapply( u , function(x) { names(x) ; corr(x) } )

res
#$df1
#[1] 0.353647

#$df2
#[1] 0.4494202

#$df3
#[1] -0.003907642 
```

# html - Chrome 中的奇怪渲染问题，在带有边距顶部的 div 中浮动

> ID：15550205
> 
> 赞同：0
> 
> 时间：2013-03-21T14:24:59.823
> 
> 标签：html, google-chrome, css-float

以下 html 在 Chrome 和 Firefox 中呈现不同。

```
<!DOCTYPE html>
<html>
  <head>
    <style>
       .outer {
         margin-top: 10px;
         clear: both;
       }
       .inner {
         float: left;
       }
    </style>
  </head>
  <body>
    <div class="outer">
      <div class="inner"> Inner1 </div>
      <div class="inner"> Inner2 </div>
    </div>
  </body>
</html> 
```

在 Firefox（和 IE10）中，Inner1 和 Inner2 垂直排列。在 Chrome 中，Inner2 比 Inner1 低 10px。这是怎么回事？

小提琴：http: [//jsfiddle.net/C8wLT/](http://jsfiddle.net/C8wLT/)

我的 Chrome 版本是 25.0.1364.172 m
我的 Firefox 版本是 19.0.2

**编辑：**在这个问题的实际（非简化）版本中，我使用`display: inline-block`s 而不是 s 来解决它`float: left`，我只是觉得它很好奇，并希望了解它为什么呈现不同，以及哪种呈现是正确的。我假设 Chrome 弄错了，但也许不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:45:25.477

只需将 overflow: hidden 添加到外部 DIV 中，这将允许外部扩展其高度以容纳它的浮动子级。

```
.outer {
    margin-top: 10px;
    overflow: hidden;
} 
```

[http://jsfiddle.net/C8wLT/1/](http://jsfiddle.net/C8wLT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:40:31.510

解决问题删除

```
clear: both; 
```

在您的 .outer div 中。

如果你想在彼此下方有更多的外部 div，只需`<br>`在它们之间放置一个。

[http://jsfiddle.net/d9mS2/3/](http://jsfiddle.net/d9mS2/3/)

# javascript - javascript 每一刻钟在 00、15、30、45 运行一个函数

> ID：15550206
> 
> 赞同：8
> 
> 时间：2013-03-21T14:25:02.717
> 
> 标签：javascript, settimeout

我从堆栈溢出中获取以下代码：

```
 function doSomething() {
       var d = new Date(),
       h = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours() + 1, 0, 0, 0),
       e = h - d;
       window.setTimeout(doSomething, e);

       //code to be run
       alert("On the hour")
    }
    doSomething(); 
```

这非常有效，并且每小时都会产生一个警报。我希望该功能每 15 分钟运行一次，时间为 00、15、30 和 45

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T14:34:25.317

通过以下方式获取下一个偶`15`数分钟的时间：

```
(d.getMinutes() - (d.getMinutes() % 15)) + 15 
```

例如，当您在 13:43 调用`doSomething()`时，它将在下次 13:45 运行：

```
( 43 - (43 % 15) + 15 ) = ( 43 - 13 + 15 ) = 45 
```

然后它将按预期运行：14:00、14:15 等等......

完整代码：

```
function doSomething() {
     var d = new Date(),
         h = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), (d.getMinutes() - (d.getMinutes() % 15)) + 15, 0, 0),
         e = h - d;
     window.setTimeout(doSomething, e);

     console.log('run');
 }
 doSomething(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T14:35:22.230

这比其他人提出的要棘手一些。你不想要从现在开始的 15 分钟，你想要 15 分钟，从下一个最近的开始。有很多方法可以做到这一点，但这是我首先想到的：

```
function doSomething() {
   var d = new Date();
   var minutes = 15 - d.getMinutes() % 15; // the number of minutes till the next 15.
   window.setTimeout(doSomething, minutes * 60 * 1000);

   //code to be run
   alert("On the quarter-hour")
}
doSomething(); 
```

试试看。:-)

### 编辑

上面的代码是最简单的，但会出现问题，因为它只查看分钟。它最多可以漂移 59.999 秒，并且根据处理器负载，甚至可能偶尔出现在 1、16、31 或 46 上。为确保不会发生这种情况，您需要减去：

```
function doSomething() {
   var d = new Date();
   var minutes = 15 - d.getMinutes() % 15; // the number of minutes till the next 15.
   var h = new Date(d.getYear(), d.getMonth(), d.getDay(), d.getHours(), d.getMinutes() + minutes, 0);
   var e = h-d;
   window.setTimeout(doSomething, e);

   //code to be run
   alert("On the quarter-hour")
}
doSomething(); 
```

这使您可以精确到秒，而我的原始帖子仅精确到分钟。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T14:30:23.317

看看函数在做什么。您有一个变量`h`设置为当前时间后一小时。

```
//Gets the current date
var d = new Date() 

//Note the +1
h = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours() + 1, 0, 0, 0) 
```

构造函数中的每个参数`Date`对应一个时间间隔

```
new Date(year, month, day, hours, minutes, milliseconds) 
```

使用这一新发现的知识，我们可以推断出，我们需要在当前时间上增加 15 分钟，而不是在当前时间上加一。问题是我们不能盲目地添加 15 分钟并认为我们已经准备就绪，因为我们真正想要的是在一刻钟间隔**开始，然后****只**在下一刻钟再次执行。

为了解决这个难题，我们必须找出距离下一个季度间隔有多远，并将其设置为我们的超时值。

```
var d = new Date();

var currentSeconds = d.getMinutes() * 60 + d.getSeconds();

var secondsFromQuarter = 900 - currentSeconds % 900; 
```

现在我们知道调用 需要等待多少秒`doSomething`，但我们必须将其转换为毫秒。

```
var millisecondsFromQuarter = minutesFromQuarter * 1000; 
```

瞧！从这里我们可以像上面一样使用我们的`millisecondsFromQuarter`值调用 setTimeout：

```
window.setTimeout(doSomething, millisecondsFromQuarter); 
```

**免责声明**

这将精确到秒。如果需要精确到毫秒，那么您只需像这样比较毫秒值：

```
var currentMilliseconds = d.getMinutes() * 60 * 1000 + d.getSeconds() * 1000 + d.getMilliseconds();

var MillisecondsFromQuarter = 900000 - currentSeconds % 900000; 
```

**免责声明 #2**

我对@kamituel 的回答投了赞成票，因为它在视觉上以更清晰的方式有效地做同样的事情。我不确定哪个对性能更好，但可能是 6:6

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T14:28:11.113

```
 function doSomething() {
   var d = new Date(),
   current_minutes = d.getMinutes(),
   current_hour = d.getHours(),
   next_min_hit = 0;

   if ( current_minutes >= 0 && current_minutes < 15 )
      next_min_hit = 15;
   if ( current_minutes >= 15 && current_minutes < 30 )
      next_min_hit = 30;
   if ( current_minutes >= 30 && current_minutes < 45 )
      next_min_hit = 45;
   if ( current_minutes >= 45 && current_minutes < 59 ){
      next_min_hit = 0;
      current_hour++;
   }
   var h = new Date(d.getFullYear(), d.getMonth(), d.getDate(), current_hour, next_min_hit , 0, 0),
   e = h - d;
   window.setTimeout(doSomething, e);

   //code to be run
   alert("On the hour")
}
doSomething(); 
```

# excel - VBA if，elseif语句，不满足第一个if语句时如何设置常量

> ID：15550208
> 
> 赞同：0
> 
> 时间：2013-03-21T14:25:11.187
> 
> 标签：excel, if-statement, vba

我有一个 If, Elseif, Else 语句。如果满足第一个 If，我想插入径流和渗透的计算值。但是，如果不满足第一个 IF 条件，则径流和渗流将始终被指定为 0。我在下面粘贴了我的代码。我遇到的问题是，如果我在第一个 IF 语句之后设置 percolation 和 runoff=0，我的 print sub 将始终打印 0，而不是计算值。如果不满足第一个 IF 条件，如何将径流和渗透分配为​​常量？我知道我可以在每个后续条件中分配 runoff=0, percolation=0，但我正在尝试减少代码的体积。

```
 Do
         If (fc - WC(j - 1) + RefET(i)) <= Precip(i) Then
                WC(j) = fc
                WCinit(j) = WC(j)
                Runoff(j - 1) = (Precip(i) - (fc - WC(j - 1) + RefET(i))) * 0.5
                Percolation(j - 1) = (Precip(i) - (fc - WC(j - 1) + RefET(i))) * 0.5
'    Runoff(j - 1) = 0 <-If I assign these here, it "overrides" the value I calculated on the previous line. I want to reduce the bulkiness of my code by assigning these values if the first IF condition is not met
'    Percolation(j - 1) = 0
          ElseIf (WC(j - 1) + Precip(i) - RefET(i)) > pwp Then
                 WC(j) = WC(j - 1) + Precip(i) - RefET(i)
                 WCinit(j) = WC(j)
                 Runoff(j - 1) = 0
                 Percolation(j - 1) = 0
        Else
                WC(j) = pwp
                WCinit(j) = WC(j)
                Runoff(j - 1) = 0
                Percolation(j - 1) = 0
        End If
                j = j + 1
                i = i + 1
                Loop While j < 14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:08:56.883

或者当你标注它们时。暗淡渗透为 int = 0

# apache - 重写 url 并停止重写

> ID：15550209
> 
> 赞同：0
> 
> 时间：2013-03-21T14:25:15.747
> 
> 标签：apache, mod-rewrite

我的 apache 网络服务器将所有 http 流量重写为 https，但是我不想重写一个 url (example.com/facebook/any_word)。我想如果我把这条规则放在将所有 http 重写为 https 的规则之上，并在上面放一个标志 L - 它会起作用。但事实并非如此。我究竟做错了什么？

.htaccess 文件：

```
RewriteRule ^/facebook/(.*)?$ /index.php/$0 [PT,L] #this rule is not applied...
#...other rules which rewrites http to https.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:31:15.597

您可以启用 mod_rewrite 调试以确保您认为应该发生的事情实际上正在发生。将类似于以下内容的内容放入您的虚拟主机配置中：

```
RewriteLogLevel 8
RewriteLog /var/log/rewrite.log 
```

请注意，此语法在 Apache 2.4 中已更改，因此如果未运行 < Apache 2.4，您可能需要更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:45:44.153

像这样的东西应该工作：

```
RewriteCond %{REQUEST_URI}   !/facebook     [NC]
#...other rules which rewrites http to https...

RewriteRule ^/facebook/(.*)?$ /index.php/$0 [PT,L] 
```

我假设最后一条规则按预期工作。

### 更新

如果最后一条规则没有被测试，我会建议这样的东西：

替换上面的这条规则：

```
RewriteRule ^/facebook/(.*)?$ /index.php/$0 [PT,L] 
```

有了这 2 行：

```
RewriteCond %{REQUEST_URI} !index\.php                [NC]
RewriteRule ^facebook/(.*)/?$ /index.php/facebook/$1 [NC,L] 
```

# python - 为什么 scipy.savetxt('filename', (x,y)) 按行而不是按列保存数组？

> ID：15550210
> 
> 赞同：1
> 
> 时间：2013-03-21T14:25:18.107
> 
> 标签：python, numpy, scipy

我见过的大多数 csv 文件都存储这样的数组：

```
#x y
0 10
1 11
2 12
 .
 .
 . 
```

那么，为什么`scipy.savetxt('scipy.txt', (x, y), header='x y', fmt='%g')`会`x, y`这样存储：

```
# x y
0 1 2 3 4 5
10 11 12 13 14 15 
```

虽然`scipy.savetxt('y.txt', y, header='y', fmt='%g')`会给出：

```
# y
10
11
12
13
14
15 
```

?

我必须使用`scipy.savetxt('common.txt', scipy.column_stack((x,y)), header='x y', fmt='%g')`来获得更“常见”的格式。

请注意，要从“通用”文件中读取`x`和读取：`y`

`x, y = scipy.genfromtxt('common.txt', unpack=True)`

```
xy = scipy.genfromtxt('common.txt')
x = xy[:,0]
y = xy[:,1]

xy = scipy.genfromtxt('common.txt', names=True)
x = xy['x']
y = xy['y'] 
```

甚至：

```
xy = scipy.genfromtxt('common.txt', names=True)
x, y = zip(*xy)
x, y = scipy.array(x), scipy.array(y) 
```

从“scipy”文件：

`x, y = scipy.genfromtxt('scipy.txt')`

尽管：

```
xy = scipy.genfromtxt('test.txt', names=True) 
```

会报错，所以我们不能使用header（反正这个header有真正的意义吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:36:43.593

问题可能是你保存了一个 (2,N)，你真的想要一个 (N,2) 数组。

```
import numpy as np
x = np.arange(10)
y = x + 2
print (x,y).shape
#(2,10)
z = np.array(zip(x,y))
print z.shape
#(10,2) 
```

或者对标题使用结构化数组

```
z = np.array(zip(x,y),dtype=[('x',int),('y',float)])
print z.shape
#(10,)
np.savetxt('tmp.txt',z) 
```

这给出了你所期望的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:44:26.700

`np.savetxt`写入每行一个元素的一维数组。

`np.savetxt`写入每行一行的二维数组。

这解释了为什么`scipy.savetxt('y.txt', y...)`给你一长列。此外，numpy/scipy 认为`(x, y)`是一维元组，而不是二维数组。这就是为什么你得到

```
0 1 2 3 4 5
10 11 12 13 14 15 
```

用于输出。

因此，要获得所需的输出，请传递一个二维数组。`np.column_stack`正如您所指出的，使用可能是最简单的方法：

```
import numpy as np
np.savetxt(filename, np.column_stack((x,y)), fmt='%g') 
```

要将数据读回`x`和`y`变量，请使用`unpack=True`参数：

```
x, y = np.genfromtxt(filename, unpack=True) 
```

# google-maps - 填充和清除谷歌地图

> ID：15550211
> 
> 赞同：0
> 
> 时间：2013-03-21T14:25:18.550
> 
> 标签：google-maps, google-maps-api-3

我已按照 Google Maps API v3 教程创建基本地图。我试图弄清楚如何最初声明地图，然后允许我根据人们选择的“类别”添加点。我还试图弄清楚如何在每个选择之间清除地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:36:39.997

有一个类别的表单字段。更改它会触发一个 JS 函数，该函数会清除地图中的所有标记，然后为该类别添加一些标记。如果您使用到目前为止尝试过的代码来扩展您的问题，我可以扩展此答案。

要清除标记，`marker.setMap(null);`请在每个标记上使用（没有 API 函数可以为您清除所有标记）。

您可能还需要一个 JS 数组或类别的关联数组，其中包含每个标记的数据（至少是 lat/lng 值），这将使您的函数变得容易。

好的，这是一个可行的解决方案（为简洁起见，我减少了标记等的数量）。

```
<!DOCTYPE html>
<html>
<head>
<title>http://stackoverflow.com/questions/15550211/populate-clear-google-map/15550488?noredirect=1#comment22037226_15550488</title>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#map-canvas { width:600px; height:500px }
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    var MSU;
    var map;
    var BusRouteButton = document.getElementById('Add-Bus-Route');

    var arrRoutes = [
        {
            name : "Mustang",
            color : "#660000",
            route : [
                 new google.maps.LatLng(33.87528, -98.51848),
                 new google.maps.LatLng(33.87045, -98.51856),
                 new google.maps.LatLng(33.86926, -98.51844),
                 new google.maps.LatLng(33.86666, -98.51833),
                 new google.maps.LatLng(33.86503, -98.51849),
                 new google.maps.LatLng(33.87529, -98.52366),
                 new google.maps.LatLng(33.87524, -98.52195),
                 new google.maps.LatLng(33.87521, -98.52026),
                 new google.maps.LatLng(33.87528, -98.51848)
            ],
            stops : [
                [33.87262, -98.51856],
                [33.86503, -98.51849],
                 [33.87529, -98.52366]
            ],
            markers : []
        },
        {
            name : "Foobar",
            color : "#000066",
            route : [
                 new google.maps.LatLng(33.87528, -98.51848),
                 new google.maps.LatLng(33.87524, -98.52195),
                 new google.maps.LatLng(33.86926, -98.51844),
                 new google.maps.LatLng(33.87184, -98.52376)
            ],
            stops : [
                [33.87528, -98.51848],
                [33.87184, -98.52376]
            ],
            markers : []
        }
    ];

    function initialize() {
        MSU = new google.maps.LatLng(33.87356, -98.52130);
        var mapOptions = {
            center: MSU,
            zoom: 16,
            zoomControl: true,
            mapTypeControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        // lets add the data from the array to the page!  I'm going to use jQuery's append for this, you could also use document.write if you aren't using it
        for (var i = 0; i < arrRoutes.length; i++) {
            $('#category').append(
                '<option value="' + i + '">' + arrRoutes[i].name + '</option>'
            );
        }
    }

    function BusRouteMarkers() {
            // what's the currently selected category?
            var intRoute = $('#category').val();

            for (var i = 0; i < arrRoutes.length; i++) {
                // better get rid of any previous polylines first
                if (arrRoutes[i].polyline) {
                    arrRoutes[i].polyline.setMap(null);
                }

                // ditto for any previous markers
                for (var j = 0; j < arrRoutes[i].markers.length; j++) {         
                    arrRoutes[i].markers[j].setMap(null);
                }
            }

            // add this polyline to the array for reference later
            arrRoutes[intRoute].polyline = new google.maps.Polyline({
                 path: arrRoutes[intRoute].route,
                 strokeColor: arrRoutes[intRoute].color,
                 strokeOpacity: 1.0,
                 strokeWeight: 4,
                map: map
            });

            for (var i = 0; i < arrRoutes[intRoute].stops.length; i++) {
                arrRoutes[intRoute].markers.push(
                    new google.maps.Marker({ 
                        position: new google.maps.LatLng(
                            arrRoutes[intRoute].stops[i][0], 
                            arrRoutes[intRoute].stops[i][1]
                        ), 
                        map: map 
                    })
                );
            }
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>

</head>
<body>
<div id="map-canvas"></div>

<button id="Add-Bus-Route" onClick="BusRouteMarkers()">click me</button>

<select id="category">
</select>

</body>
</html> 
```

# java - 重叠正则表达式

> ID：15550219
> 
> 赞同：4
> 
> 时间：2013-03-21T14:25:37.037
> 
> 标签：java, regex, regex-lookarounds

[我在这里](https://stackoverflow.com/questions/7760162/returning-overlapping-regular-expressions)发现了一个类似的问题。但是我没有让它工作：

我有一个像“my_token_string”这样的字符串，需要一个正则表达式来返回标记“my_”、“_token_”和“_string”。

请注意，我无法更改 java 代码，因为它是另一个软件的一部分。我唯一能做的就是指定要捕获的模式和组:-)

这是我测试过的：

```
String p = "(?=(_[^_]*_?))";
int group = 1;
String test = "my_token_string";

Matcher m = Pattern.compile(p).matcher(test);
while (m.find()) {
    System.out.println(m.group(group));
} 
```

但当然这只会返回标记“_token_”和“_string”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:36:51.290

您可以尝试使用`"(?=((^|_).+?(_|$)))"`. 作为组号使用`1`。

它将让令牌以`_`输入或开始（`^`）开始，并以`_`输入或结束（`$`）结束。而不是`.+?`你可以使用`[^_]+`，但我更喜欢这个版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T14:38:18.700

您可以使用 RegEx 实现此目的：`(?=((?:_|^)[^_]*+(?:_|$)))`
此处解释演示：[http ://regex101.com/r/tB0bZ4](http://regex101.com/r/tB0bZ4)

# mysql - Mysql，当变量依赖于其他选择时计算 sum()

> ID：15550222
> 
> 赞同：0
> 
> 时间：2013-03-21T14:25:46.460
> 
> 标签：mysql, variables, sumifs

你好 Stackoverflow 的伟大人物！我一直在为以下挑战绞尽脑汁。

我有一个查询来计算特定销售的产品总和，这很容易。让我抓狂的挑战的第二部分是：

有些销售由“捆绑”组成，这意味着单个产品的总和不等于最终价格。为了使销售成为捆绑销售，它必须具有“电视”产品。电视产品可以自己出售并具有相关价格，但当它是捆绑产品的一部分时，价格是可变的。这是我到目前为止所拥有的：

定价矩阵——

```
 ProdDescription        ProductID    Rank A       Rank B   Rank C
               Phone            1        $229.00    $92.00  $18.00 
             Long Distance      2       $46.00  $46.00  $18.00 
            Internet 786K       3       $103.00     $84.00  $23.00 
            Internet 1.5M       4       $113.00     $94.00  $23.00 
            Internet 3M         5        $118.00    $99.00  $23.00 
            Internet 10M        6       $123.00     $104.00     $23.00 
            Internet 25M        7       $141.00     $113.00     $41.00 
            Ultra Internet      8       $188.00     $94.00  $23.00 
            TV                  9       $123.00     $95.00  $23.00 
            TV and Ultra Int             $311.00    $234.00     $141.00 
            TV and Phone                 $352.00    $91.00  $46.00 
            TV, Phone, & Long Dist        $398.00   $229.00     $137.00 
            TV, Phone, & any Int         $465.00    $268.00     $206.00 
            TV,Phone,Long Dist,&any Int  $515.00    $274.00     $229.00 
```

如您所见，我没有将产品ID分配给捆绑包，b / c我尝试为捆绑包创建单独的产品ID，甚至考虑使用php根据一组规则以编程方式分配产品ID，如果选择了单个产品，但随后我失去了最终计算/查询组成该捆绑/销售的单个产品的能力。

这是我想太多了吗？是否可以仅使用 SQL 或至少限制 PHP 端？

下表显示了该电视产品根据其所属捆绑包和排名计算得出的价格。我创建这个是因为我正在考虑使用 if 语句来引用这个表，如果该电视产品出现在一个级联计算中。

```
 A      B     C 
     DoublePlay-Ultra Internet                    $123   $140    $118 
     DoublePlay-Phone                             $123   $(1)    $28 
     TriplePlay-Phone & Long Distance             $123   $91     $101 
    TriplePlay-Phone & Internet 786K               $133      $92     $165 
    TriplePlay-Phone & Internet 1.5 M             $123   $82     $165 
    TriplePlay-Phone & Internet 3M                 $118      $77     $165 
    TriplePlay-Phone & Internet 10M                $113      $72     $165 
     TriplePlay-Phone & Internet 25M              $95       $63      $147 
    TriplePlay-Phone & Ultra Internet             $48       $82      $165 
    QuadPlay-Phone & Long Dist & Inter 786K        $137      $52     $170 
    QuadPlay-Phone & Long Dist & Inter 1.5 M       $127      $42     $170 
    QuadPlay-Phone & Long Dist & Inter 3M          $122      $37     $170 
    QuadPlay-Phone & Long Dist & Inter 10M         $117      $32     $170 
    QuadPlay-Phone & Long Dist & Inter 25M         $99   $23     $152 
    QuadPlay-Phone & Long Dist&  Ultra Inter        $52      $42     $170 
```

这个问题太长了，所以我会停在那里，但是请问这有意义吗，有人有什么建议吗？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:40:43.343

考虑使用 9 位数字的产品 ID...我将按如下方式分配产品

当他们购买电视时，可以按如下方式分隔 9 位

第一个数字是1（只是为了让其他数字保持零第二个和第三个数字用于电视第四和第五个数字用于电话第六和第七个数字用于互联网第八和第九个数字用于长途......

例如：

单项价值 电视 1 10 00 00 00 电话 1 00 10 00 00 互联网 1 00 00 10 00 长途 1 00 00 00 10

假设如果他们订购多个

电视和电话 - 1 10 10 00 00 互联网和长途 - 1 00 00 10 10 电视和电话 互联网和长途 - 1 10 10 10 10

（每个电视、互联网、电话和长途可以有 10 种不同的组合）如果该字段中有 10 个以上的项目，您可以将其增加到 3 位数。请记住 - 整数只能容纳 10 位数字...

希望这能解决你的问题

我

# ios - IAP 非消耗品首次购买后可获得额外积分

> ID：15550233
> 
> 赞同：2
> 
> 时间：2013-03-21T14:26:12.177
> 
> 标签：ios, xcode, storekit, in-app-purchase

我有一个名为“专业版”的非消耗性 IAP。我给买家一些额外的积分和一些访问权限。

他们第一次购买时没有问题。它给出了分数并消除了限制。

但是当他们再次尝试购买时，它会说“您已经购买了这个项目，点击确定再次下载它”，然后它会到达 SKPaymentTransactionStatePurchased 并再次给出积分。

我尝试放置一个钥匙串，这样它只会为一个设备提供一次，但如果有人拿另一个设备并使用他们购买游戏的帐户登录，他们将再次获得积分。

有什么想法可以解决这个问题吗？我的意思是我应该改变他们拿分的地方（它在 validateReceiptForTransaction 成功后给出分数）？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:23:15.733

根据应用内购买指南 ( [https://developer.apple.com/in-app-purchase/In-App-Purchase-Guidelines.pdf](https://developer.apple.com/in-app-purchase/In-App-Purchase-Guidelines.pdf) )，您必须为您的非消耗性 IAP 提供恢复方法。

所以，对于你的问题：

> 如果有人使用另一台设备并使用他们购买游戏的帐户登录

当用户尝试登录时进行恢复。

您将能够知道用户是否购买了您的 IAP。

我认为您必须检查用户是否进行了购买，然后允许或不允许他购买您的非消耗品。

# c# - 打印按钮在 ReportViewer 中不可见

> ID：15550234
> 
> 赞同：7
> 
> 时间：2013-03-21T14:26:18.440
> 
> 标签：c#, asp.net, reportviewer

我有一个显示**远程**报告的报告查看器。但是当报告加载时，我看不到打印、刷新按钮。当我尝试在报告管理器中检查我的报告时，服务器 PC 上也会发生同样的事情。（使用 Chrome、Firefox）

这是按钮应位于的工具栏的屏幕截图。

![在此处输入图像描述](../Images/5db70d1892a57ee61bad5065d85e6c30.png)

这是我的reportviewer 起始标记代码。（按钮都是“真”可见）

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server" CssClass="reportviewer" Font-Names="Verdana" BorderColor="Black" ShowBackButton="true" ShowPrintButton="true" ShowRefreshButton="true"
        BorderStyle="None" Font-Size="8pt" InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana" AsyncRendering="false" SizeToReportContent="true" 
        WaitMessageFont-Size="14pt" Height="1050px" Width="900px" ProcessingMode="Remote"> 
```

我试图通过在我的开发 PC 和服务器中安装**ReportViewer Redistributable pack 2010来解决此问题。**我测试了本地和远程报告，但在这两种情况下都是一样的。

我该如何解决？

环境：SQL Server 2012 64位；IDE：视觉工作室 2010；

**注意 1：当我删除所有 css 引用时，刷新按钮可见。（感谢@DJ KRAZE 指出）**

**注意 2：刚刚检查了新的 CSS 规则，打印按钮在 IE 中可见。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-18T14:02:18.020

打印按钮隐藏在任何非 IE 浏览器中，因为 ReportViewer 使用 ActiveX 进行客户端打印，这意味着除了 IE 之外没有其他浏览器可以处理它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T14:19:10.193

[这](http://blogs.msdn.com/b/brianhartman/archive/2009/02/27/manually-printing-a-report.aspx)是 Brian **Hartman 的报告查看器博客**中的一个类，可以打印本地和服务器报告。

只需创建一个按钮或图像按钮，然后在 onclick 方法中使用它，即可从任何浏览器进行打印。

```
 ReportPrintDocument rp = new ReportPrintDocument(ReportViewer1.ServerReport);
  rp.Print(); 
```

# opencv - OpenCV 使用方法

> ID：15550238
> 
> 赞同：0
> 
> 时间：2013-03-21T14:26:30.250
> 
> 标签：opencv

我想执行一些图像处理任务，但我不知道。
我想要做的是，我输入了一个图像，我想根据距离找出图像中的对象，如树、墙壁、垃圾箱等。我基本上想识别图像中我的 wat 上的对象。

我发现opencv可以用于这个。有人可以让我知道如何以及从哪里开始以及哪些 opencv 算法对我有用吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:31:08.577

查看[OpenCV 教程](http://docs.opencv.org/doc/tutorials/tutorials.html)，更具体地说是[**feature2d 模块**](http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html#table-of-content-feature2d)。

有一些示例显示了用于完成您正在寻找的技术的技术：

*   [使用 FLANN 进行特征匹配](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html#feature-flann-matcher)
*   [Features2D + Homography 查找已知对象](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)
*   [使用 SURF 进行特征检测](http://docs.opencv.org/doc/tutorials/features2d/feature_detection/feature_detection.html)

网络上还有其他资源，您现在可以在 Google 上搜索它们，因为您知道要查找什么。本指南非常好，展示了如何使用 SURF 检测图像上的对象：

*   [使用 SURF 特征检测器的完整指南](http://morf.lv/modules.php?name=tutorials&lasit=2#.UUsbVRn1cc8)

# wpf - ContextMenu 命令绑定不随数据源更新

> ID：15550240
> 
> 赞同：3
> 
> 时间：2013-03-21T14:26:39.203
> 
> 标签：wpf, binding, command

在我的 WPF 应用程序中，有一个列表可以从中选择一个项目。然后，所选项目将显示在 ContentControl 中以进行进一步交互。根据所选项目的类型（可以有多个），在 ContentControl 中使用适当的 DataTemplate。到目前为止，这对于数据处理业务应用程序来说应该没有什么不寻常的。

在每个 DataTemplate 中，有多个 TextBox 和其他控件，它们将它们的值绑定到 ViewModel 类的特定属性。从列表中选择另一个项目时，所有这些都按预期更新。这些按钮还在 ViewModel 的正确实例上执行它们的命令。

有一个上下文菜单项也执行命令，但这仅适用于第一个选定项。当从列表中选择另一个相同类型的元素时，重新使用已加载的模板视图，上下文菜单中的命令将始终在第一个选择的项目上执行。因此绑定不会更新为正确的 ViewModel 实例。

使菜单项使用正确的 ViewModel 实例的唯一方法是选择不同类型的项，以便将模板更改为另一个视图。只有这样上下文菜单才能正确更新。

为什么菜单项命令不会像视图中的任何其他绑定一样更新？它在加载时获取一次，但在视图的生命周期内从未更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-16T10:10:43.160

不是 Command 绑定没有更新，而是 DataContext 已经过时了。这是一个广为人知的问题，一旦你知道正确的搜索词......

这是带有更多链接的解释：

[http://www.codeproject.com/Articles/162784/WPF-ContextMenu-Strikes-Again-DataContext-Not-Upda](http://www.codeproject.com/Articles/162784/WPF-ContextMenu-Strikes-Again-DataContext-Not-Upda)

这是该文章的相关部分：

> 解决方法是将菜单的数据上下文显式绑定到父级的数据上下文，如下所示：
> 
> ```
> <ContextMenu DataContext="{Binding PlacementTarget.DataContext,
>     RelativeSource={RelativeSource Self}}"> 
> ```
> 
> 这个神奇的咒语告诉 WPF 在菜单的数据上下文和它的“放置目标”（即父级）数据上下文之间创建一个永久绑定，即使在父级的数据上下文发生更改后，它也会继续工作。仅当您希望父母的数据上下文在父母的生命周期内发生变化时，您才需要此咒语。

我之前找到的另一个解决方案是在 Opened 事件中手动将上下文菜单的 DataContext 设置为窗口的 DataContext。这需要在代码隐藏文件中添加额外的 C# 代码，并且可能需要适应不同的场景。所以我认为上面的仅 XAML 方式更好。

# asp.net-mvc - 避免在 UrlHelper.Action 和 ModelState.AddModelError 中使用硬编码字符串

> ID：15550242
> 
> 赞同：1
> 
> 时间：2013-03-21T14:26:47.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate, urlhelper

我有以下代码行：

```
return Json(new { redirectTo = UrlHelper.Action("Index", "Home") }); 
```

和

```
ModelState.AddModelError("Useraccount.Email", emailAlreadyExistsException.Message); 
```

对于 UrlHelper.Action 方法和 ModelState.AddModelError 方法，我想避免使用硬编码字符串。有没有更好的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:49:27.450

您可以创建一个常量文件并改用常量：

```
public static class Constants 
{
    public const string HomeController = "Home";
    public const string IndexAction = "Index";
    public const string UserAccountEmail = "Useraccount.Email";
} 
```

然后您的代码变为：

```
return Json(new { redirectTo = UrlHelper.Action(Constants.IndexAction, Constants.HomeController) }); 
```

和

```
ModelState.AddModelError(Constants.UserAccountEmail, emailAlreadyExistsException.Message); 
```

作为验证的替代方法，您可以使用[FluentValidation 之类的库](http://fluentvalidation.codeplex.com/)

# ios - 从 UIDatePicker 重置 UITableViewCell

> ID：15550244
> 
> 赞同：0
> 
> 时间：2013-03-21T14:26:50.927
> 
> 标签：ios, uitableview, uidatepicker

我有一个 UITableViewController 用于搜索，用户可以按日期进行搜索，但我想让它成为可选的，我的问题是我不知道如何在选择日期后重置 UITableViewController，因为 UIDatePicker 总是会让用户选择一个新的日期但不重置选择的日期是一些屏幕截图：

![搜索视图](../Images/14b154641b8c657419ed1b403260eee5.png)

如您所见，默认值为“Tous”，表示“全部”，因此用户可以让它这样，所有字段都是可选的

![日期选择器](../Images/420953834e983a8bd52464711e237ca8.png)

现在，当您选择日期单元格时，您现在必须选择一个日期，并且无法重置该字段，如您所见

![日期字段](../Images/af9ba16504e92daa6c570768de3c1f4c.png)

现在没有办法将日期字段的值返回到 "All" ，在其他字段中，因为它们是字符串，我刚刚添加了 "Tous" ("All") 和其他选项，以便用户可以返回正如您在此处看到的那样，无论何时他想要它：

![字符串选择器](../Images/d3ddca214d4b7249ec51900bbf5cb73c.png)

我不知道如何向日期选择器添加一个选项，也许添加一个新按钮，如“今天”来重置字段，所以你知道任何人都可以帮助的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:29:31.627

当您为日期单元格显示日期选择器时，在工具栏中添加一个额外的按钮，这将关闭日期选择器并将日期单元格值设置为“全部”。

# excel - 查找限制范围内的值的总和数

> ID：15550259
> 
> 赞同：1
> 
> 时间：2013-03-21T14:27:37.397
> 
> 标签：excel, excel-formula

我有一张这样的桌子：

```
 A             B
 1   13:15         12:00
 2   10:25
 3   14:15
 4   09:50
 5   15:30
 6   17:25 
```

我试图在 A1:A6 的范围内找到大于 B1 的值的数量。最终结果应该是“4”，但我不知道如何作为 Excel 公式的新手找到它。

是否有可能在一个公式中找到该结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:31:19.417

将此公式放入C1

```
=COUNTIF(A1:A6,">"&B1) 
```

截屏

![在此处输入图像描述](../Images/f9ae17bef0878a4bde91147ffae25c13.png)

# qt - Qt Creator/GDB - 调试会话意外结束

> ID：15550265
> 
> 赞同：4
> 
> 时间：2013-03-21T14:28:02.267
> 
> 标签：qt, gdb, qt-creator

**1\. 症状**

Qt Creator 中的调试会话以随机方式意外终止（即，有时它们正常终止），并出现以下错误之一：

*   PC 寄存器不可用（最常见的错误，通常为“Internal error: pc 0×0 in read in psymtab, but not in symtab”）
*   SIGSEV
*   西吉尔

这将发生的第一个迹象是，当我踩到我的代码行时，我会进入一个汇编器窗口，进入 NTDLL（通常是`ntdll!LdrFindResource_U+60953`）。

我正在使用 QT Creator 的 MinGW（32 位）在 Win7 64 上运行 Qt Creator 2.6.2 和 Qt 5.0.1。我已经在另一台具有 Win732 位的机器上进行了测试，并且行为是相同的。

根据我在 Qt 论坛上收到的回复，Rebuild 或 Clean + Build 对此问题没有任何明显影响。

**2\. 先分析**

由于第一个错误是最常见的，所以我在网上搜索它，这导致了我[这个](http://sourceware.org/bugzilla/show_bug.cgi?id=14018). 它似乎是正确的——肯定有一个 SIGTRAP 导致了那个错误。

但是，当我仔细检查了所有保存的调试器日志时，我发现有几次没有发生该错误（尽管 SIGTRAP 始终存在）。

**3.图案**

借助 WinMerge 和一些耐心，我终于能够在所有错误情况下感知到一个模式。所有日志（*错误和成功*）都有这样的内容：

```
>=thread-created,id="2",group-id="i1"
sThread 2 created 
```

除了我的应用程序（在线程 id=“1”上运行）之外，它还创建了第二个线程。但是，所有成功日志都有这样的内容：

```
>=thread-exited,id="2",group-id="i1"
sThread 2 in group i1 exited 
```

因此，我又运行了几个调试会话，并在遇到第一个断点时检查了正在运行的线程。在所有错误情况下，我都得到了这样的结果：

```
<455info threads
>&"info threads\n"
>~"  Id   Target Id         Frame \n"
>~"  2    Thread 7160.0x33ec 0x76f1fd71 in ntdll!RtlFindSetBits () from C:\\Windows\\system32\\ntdll.dll\n"
>~"* 1    Thread 7160.0x128c main (argc=1, argv=0xbb30d8) at ..\\Exeample\\main.cpp:10\n"
>455^done 
```

使用 Process Explorer，我可以看到第二个线程已附加到我的可执行文件（即使我没有创建线程，您也可以在[此处](https://stackoverflow.com/questions/12186963/qt-string-builder-in-for-loop/12187166#12187166)查看使用的代码）。

此外，所有错误案例在第二个线程上都有一个 SIGTRAP：

```
>~"[Switching to Thread 7160.0x33ec]\n"
>*stopped,reason="signal-received",signal-name="SIGTRAP",signal-meaning="Trace/breakpoint trap",frame={addr="0x76f1000d",func="ntdll!LdrFindResource_U",args=[],from="C:\\\\Windows\\\\system32\\\\ntdll.dll"},thread-id="2",stopped-threads="all"
dNOTE: INFERIOR SPONTANEOUS STOP 
```

**4\. 仔细检查 GDB**

为了确定这是否是 GDB 问题，我运行了几个命令行调试会话，包括和不使用“-i mi”。从来没有对第二个线程的任何引用，而且我从来没有遇到过调试会话意外终止，这就是为什么我相信这个问题的原因可能出在 Qt Creator 中。

**5.请求帮助**

我已经下载了 Qt Creator 的源代码，并在那里寻找了线索，但我并没有走得太远。

gdbengine.cpp 提到了一个“停止线程”，但我发现唯一提到的是[这里](http://www.qtcentre.org/threads/43833-GDB-Cannot-Remove-Internal-Breakpoint)。

有人对我接下来应该检查的内容有任何想法/指示吗？

谢谢你的时间。

## 编辑：

我还没有找到原因，但是在用进程监视器查看之后，我得到了更多的数据。

创建第二个线程以加载我的应用程序的可执行文件及其所需的 DLL。我已经确认只有当我从 Qt Creator IDE 调试我的应用程序时才会创建第二个线程；如果我从 IDE 运行它（即，使用“run”而不是“debug”），或者如果我从命令行调试它（从命令行启动 gdb），或者如果我从命令行运行它，这个永远不会创建第二个线程，并且可执行文件 + DLL 图像由我的应用程序的主（也是唯一的）线程加载。

在我上面所说的“成功案例”中，即当第二个线程退出时，它会在加载最后一个 DLL 后立即退出，这就是为什么我相信第二个线程只是为了这个加载而创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T21:15:16.240

这与任何类型的内存管理无关，而是与调试器在 Windows 上中断进程的方式有关。检查[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679298%28v=vs.85%29.aspx)和[这个](https://stackoverflow.com/questions/8349120/after-calling-debugbreakprocess-what-does-the-events-dwthreadid-represents)网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:56:43.877

[http://www.efnetcpp.org/wiki/Heap_Corruption](http://www.efnetcpp.org/wiki/Heap_Corruption)

您是否两次释放/删除某些内容或引用已删除的变量？

上次我以相当随机的方式在地图上出现错误是因为堆损坏。

Qt 经常使用一种智能指针来跟踪哪些需要删除，哪些不需要。（跟踪打开和存储了多少引用以及这些引用何时被删除。）我会查看由多个对象共享的任何变量。

以下是用于调试的其他一些 Qt 资源：

[http://qt-project.org/doc/qt-4.8/debug.html](http://qt-project.org/doc/qt-4.8/debug.html)

[http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectInfo](http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectInfo)

[http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectTree](http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectTree)

正确理解和使用 Qt 对象模型，正确地为对象设置父对象也有助于追踪奇怪的错误。

[http://qt-project.org/doc/qt-4.8/object.html](http://qt-project.org/doc/qt-4.8/object.html)

另一种缩小 bug 的方法是阻止注释掉代码部分，直到 bug 消失，然后向后工作，重新添加代码。

最后，找到这样的错误的另一种方法是使用您经常使用的版本控制工具（对吗？）。恢复到没有错误的版本，然后与当前版本进行差异并首先从这些差异开始。

希望有帮助。

# android - FragmentTransaction 替换整个屏幕

> ID：15550271
> 
> 赞同：3
> 
> 时间：2013-03-21T14:28:19.270
> 
> 标签：android, android-fragments, fragmenttransaction

我正在使用带有 FragmentStatePagedAdapter 的选项卡。下面的代码来自`onOptionsItemSelected(MenuItem item)`方法：

```
case R.id.menu_help:
  System.out.println("Pressin' da help button!");
  FragmentManager mananger = getSupportFragmentManager();
  android.support.v4.app.FragmentTransaction trans = mananger.beginTransaction();
  trans.replace(android.R.id.content, new HelpFragment());
  trans.addToBackStack(null);
  trans.commit();
  break; 
```

`android.R.id.content`但是，只会替换操作栏下方的视图（并将其覆盖在选项卡片段上）。有没有一种简单的方法可以用一个片段替换整个屏幕（不应该有一些其他的系统资源吗？）而不必为此创建一个新的活动？或者一项新活动实际上会更好吗？

在此先感谢您的帮助

容器布局（从 MainActivity 启动时开始）：

```
<android.support.v4.view.ViewPager
    android:id="@+id/masterViewPager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

我猜这是HelpFragment的类：

```
public class HelpFragment extends Fragment {

  private View view;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle states) {
    view = inflater.inflate(R.layout.layout_help_screen, container, false);

    return view;
  }

} 
```

和片段 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/nothing" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T08:40:09.040

**更新：如果您将 appcompat-v7 更新到修订版 19.0.0**，则不再需要以下开关。或更新。请[发出 59077](https://code.google.com/p/android/issues/detail?id=59077)以获取更多信息。

* * *

我怀疑您使用的设备/模拟器运行的是4.x**之前**的 Android 版本（Ice Cream Sandwich，API 级别 14）。**我在使用片段事务时**遇到了类似的覆盖问题。出现布局问题是因为与Android 4.x 相比，Android 2.x 和 3.x对**内容视图的引用方式不同。**请尝试从以下位置更改您的代码：

```
trans.replace(android.R.id.content, new HelpFragment()); 
```

到：

```
trans.replace(getContentViewCompat(), new HelpFragment()); 
```

...

```
public static int getContentViewCompat() {
    return Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH ?
               android.R.id.content : R.id.action_bar_activity_content;
} 
```

更多背景信息可以在[Shellum 的帖子中找到](https://stackoverflow.com/a/17998802/356895)。

# c# - 寻找下一个再次发生的日期

> ID：15550273
> 
> 赞同：-3
> 
> 时间：2013-03-21T14:28:27.530
> 
> 标签：c#, asp.net, date

我有重复发生的任务，我正在构建一些会自动为我重新创建它们的东西。

我有这个枚举：

```
 public enum Periods {
      Day = 0, //every day
      Week = 1, //every week...
      BiWeek = 2, //every 2nd week
      Month = 3,
      BiMonth = 4, 
      Year = 5
  }; 
```

我需要能够在这些间隔内重新创建。

因此，我可能会在每个月的 29 日再次发生一些事情。如果 29 日不存在，比如 2 月，那么它应该跳到下一个最好的时间，即 3 月 1 日。

是否有算法可以做到这一点，可能使用 DateTime 对象？

我需要前：

```
DateTime GetNextOccurrence(DateTime initialDate, DateTime lastOccurrence, Periods p)
{
   if(p == Day)
    return lastOccurance.addDays(1);
   else if (p == Month)
   {
      add 1 month to last occurance month then start at day 1 of the month and keep adding days until it gets as close as possible...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:36:20.963

这是一个硬编码解决方案，但如果您提供更通用的条件，则更容易做出更好的事情：

```
private static DateTime GetNextOccurrence(DateTime initialDate, 
                                          DateTime lastOccurrence, 
                                          Periods p)
{
    switch (p)
    {
        case Periods.Day: return lastOccurrence.AddDays(1);
        case Periods.Week: return lastOccurrence.AddDays(7);
        case Periods.BiWeek: return lastOccurrence.AddDays(14);
        case Periods.Month:
        case Periods.BiMonth:
          {
              DateTime dt = lastOccurrence.AddMonths(p == Periods.Month ? 1 : 2);
              int maxDays = DateTime.DaysInMonth(dt.Year, dt.Month);
              int days = Math.Min(initialDate.Day, maxDays);
              return new DateTime(dt.Year, dt.Month, days);
          }
        case Periods.Year: return lastOccurrence.AddYears(1);
        default: return lastOccurrence;
    }
} 
```

更新的版本甚至更多编码，但我更新了代码以解决`AddMonth`警告。与您想要的唯一细微差别是日期不会转移到下个月，但会保留循环。

# c++ - 将成员变量名称转换为字符串

> ID：15550275
> 
> 赞同：1
> 
> 时间：2013-03-21T14:28:31.643
> 
> 标签：c++, stringification

我可以`char*`在 C++ 中枚举类（或结构）的成员吗？如果是这样，我可以将变量名称打印为字符串吗？使用预处理器？

我有一个包含所有 const char* 成员的类。如果有一种优雅的方式来枚举每个成员变量并根据给定的字符串键检查名称作为字符串，那将是很好的。

这是可以使用的那种代码？

谁能想到一种方法来做到这一点？

```
class configitems {
public:
   configitems() : host(0), colour(0) {}
   const char* host;
   const char* colour;
   //... etc
};

int main() {

   configitems cfg;
   //cfg.colour = "red";

   //receive an config item as a string.  I want to check that the item is a valid one (eg is a 
   //variable of class configitem) and then populate it.

   //eg get colour=red so want to do something like this:
   if(isConfigItem("colour")) {
      cfg.<colour> = "red";
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:32:47.673

在 C++ 中，不可能将变量名转换为字符串。在某些情况下，编译后的可执行文件中甚至不存在变量名（取决于范围和可见性）。

即使有可能，枚举一个类的成员仍然是不可能的。

解决这个问题的另一种方法是使用一个`std::map`使用“host”之类的字符串作为键的替代方法，并枚举它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:43:18.677

正如其他人所说，一旦编译器完成编译代码，变量的名称实际上并不存在于生成的代码中。它可能存在于调试符号或类似的东西中，但尝试进入以确定变量的位置是一个可怕的混乱[它可能位于不同的位置，具体取决于编译器当前是否使用寄存器或内存位置来存储它的价值等]。

当然可以有一个宏来生成与参数中的名称匹配的字符串。

但是，对配置类型的事情使用不同的机制可能会更好——几个明显的选项是：

1.  用一个`std::map<std::string, std::string>`
2.  使用数组或向量`std::pair<std::string, std::string>`

你也可以有一段固定的代码来理解不同的配置设置和它们到变量的转换。只要数量不多，这根本不是一个糟糕的解决方案。

或者你可以像这样构建一个数组：

```
enum config_vals
{
    host,
    color,
    ...
    max_config
};

struct translation
{
   const char *name;
   config_vals val;
};

#define TRANS(x) { #x, x }

translation trans[]] = {
    TRANS(host),
    TRANS(color),
};

class configitems
{
  ...
  std::string value[max_configs];
  ...
}

... 

configitems c;
...
if (c.value[host] == "localhost") ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:34:33.507

C++ 中没有办法完全按照您的要求去做。但是，如果您想要的只是一组键值对，那么有解决方案。

例如，代替`class configitems`，将其设为`std::map<std::string, std::string> configitems`：

```
std::map<std::string, std::string> configitems;
//...
configitems.insert( std::pair<std::string,std::string>( "colour", "red" ) ); 
```

# c# - Asp.NET MVC4 Redirect(url) 抛出参数异常

> ID：15550278
> 
> 赞同：2
> 
> 时间：2013-03-21T14:28:39.137
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

这似乎是不可能的，我确定我缺少一些非常简单的东西，但我只是没有看到。

在一个动作方法里面我有这个代码

```
 var redirectUrl = FormsAuthentication.GetRedirectUrl(model.UserName, false);

   if (redirectUrl.IsBlank())
   {
       return RedirectToRoute(Routes.HomeUrl);
   }
   else
   {
       return Redirect(redirectUrl);
   } 
```

并实现了 IsBlank()

```
 public static bool IsBlank(this string s)
  {
      return String.IsNullOrWhiteSpace(s);
  } 
```

不知何故

```
POST /login?ReturnUrl=
UserName=xxxx&Password=xxxx 
```

设法产生这个错误

```
ArgumentException: Value cannot be null or empty.
Parameter name: url]
   System.Web.Mvc.Controller.Redirect(String url) +113
   WebHost.Controllers.SecurityController.Login(LoginModel model) +200
   lambda_method(Closure , ControllerBase , Object[] ) +104
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +182
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +32
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +58
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +225
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +34
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +24
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +99
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:33:13.623

我认为一个动作需要重定向到一个动作，而不是一个简单的 URL。

尝试这样的事情：

```
Response.Redirect(Url.RouteUrl(new{ controller="controller", action="action"})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T15:10:22.397

尝试这个：

```
var redirectUrl = FormsAuthentication.GetRedirectUrl(model.UserName, false);

if ( Url.IsLocalUrl(redirectUrl) )   
{
    return Redirect(redirectUrl);
}
else
{
    return RedirectToRoute(Routes.HomeUrl);
} 
```

# macos - 更改 popover 的 contentSize 时出现错误访问

> ID：15550282
> 
> 赞同：2
> 
> 时间：2013-03-21T14:28:49.010
> 
> 标签：macos, cocoa, exc-bad-access, nspopover, contentsize

我有一个触发弹出框的按钮，以及弹出框上的一个复选框。复选框的状态复选框绑定到 NSManagedObject 的字段“checkboxState”。

这是场景：

1.  我点击按钮，弹出框会出现。
2.  我选中弹出框上的复选框，然后弹出框变大并显示其他一些视图（如果我取消选中复选框，视图将被隐藏，并且弹出框恢复到原始大小）。**这里的 checkboxState 是 YES**
3.  我关闭了弹出框，然后做一些其他的事情，将**checkboxState 更改为 NO**。
4.  我再次单击按钮，然后应用程序挂起大约 10 秒，xcode 抛出 EXC_BAD_ACCESS(code=2, address=0x7fff5f3ffff8)，调用者是 0_CFArrayReplaceValues

**该应用程序不会死，它只是没有响应。**

按钮的动作如下：

```
- (IBAction)showPopover:(id)sender {
    if (!_myPopover) {
        _myPopover = [[NSPopover alloc] init];
        _myPopover.delegate = self;
        _myPopover.contentViewController = self;
        _myPopover.animates = YES;
        _myPopover.behavior = NSPopoverBehaviorSemitransient;
        _myPopover.appearance = NSPopoverAppearanceMinimal;
    }

    id theManagedObject = self.myArrayController.selection;
    BOOL state = [[theManagedObject valueForKey:@"checkboxState"] boolValue];   

    if (state) {        
        _myPopover.contentSize = NSMakeSize(360, 340);
        [self.view1 setHidden:NO];
        [self.view2 setHidden:NO];
    }
    else {
        [self.view1 setHidden:YES];
        [self.view2 setHidden:YES];
        _myPopover.contentSize = NSMakeSize(360, 270);
    }

    [_myPopover showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxYEdge];
} 
```

更改对象的 checkboxState 的代码是： `[anManagedObject setValue:@NO forKey:@"checkboxState"]`

如果我`_myPopover.contentSize = NSMakeSize(360, 270)`在 showPopover 中评论；它会起作用的。

如果我评论`[anManagedObject setValue:@NO forKey:@"checkboxState"]`，它将起作用

我用过`@try @catch`，没有报错。我使用了 Profile 工具，似乎应用程序进入了无限循环，并且内存使用量上升非常快。导致这种情况的可能来电者是`[NSLayoutConstaint _loweredExpressionReportingConstantIsRounded:]`和`[NSIsObjectiveLinearExpression replaceVariable:withExpression:processVariableNewToReceiver:processVariableDroppedFromReceiver:]`

有任何想法吗？我被这个问题困扰了一天。真的需要解决这个问题。

编辑：问题发生在第 25 秒。之后分配了很多内存。 ![问题发生在第 25 秒。](../Images/e207801342e16ac202423d8946555b6d.png)

从对象列表中，我看到了以下内容，它们被反复调用直到结束。 ![在此处输入图像描述](../Images/fe50cb021f77180b4f5ffba5e61a09a2.png)

# c++ - 使用 C++ 扫描多核系统中的 CPU 缓存操作

> ID：15550283
> 
> 赞同：3
> 
> 时间：2013-03-21T14:28:50.260
> 
> 标签：c++, caching, memory, cpu, multicore

我正在搜索允许监视 CPU 缓存/多核 CPU 缓存上的读/写操作的 C++ 代码/函数，以便能够检测由于访问相同内存位置的多个内核之间的竞争而导致的性能瓶颈。

一切甚至接近的东西都会受到赞赏。任何人都可以帮忙吗？提前致谢。

* * *

感谢您到目前为止的所有答案。在经历了它们之后，我认为我应该更具体地了解实际问题的解决方案。

1.  期望的结果是一个用 Visual C++ 编写的用于 Windows 系统的软件。
2.  该软件应该能够与所有 CPU 一起工作，而不仅仅是特定制造商的 CPU。
3.  当涉及到双重检查结果时，工具很方便，但只要没有完整记录的源代码，我就不会从中得到太多。

在这一点上，获取一些 VC++ 代码片段会很有帮助，例如，我如何检测 CPU 的类型、它拥有的缓存类型，以及它何时从该缓存中的地址读取/写入数据。它不必非常复杂，我只需要以简单的方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:38:57.153

我能找到的最好/最简单的工具是`perf`，例如，以下命令：

`perf stat -e LLC-load-misses,LLC-store-misses /bin/ls`

将输出运行的最后一级缓存未命中数`ls`。

看`perf --help`

其他好的工具是[vTune](http://software.intel.com/en-us/intel-vtune-amplifier-xe)，或者`cachegrind`前面提到的。

对于编程方法，您还可以检查[PAPI API](http://icl.cs.utk.edu/papi/)。

# mysql - LOAD DATA LOCAL INFILE 只加载一条记录

> ID：15550290
> 
> 赞同：1
> 
> 时间：2013-03-21T14:29:08.683
> 
> 标签：mysql, load-data-infile

在 MySQL 中，我使用 LOAD DATA LOCAL INFILE，如下所示：

```
LOAD DATA LOCAL INFILE 'code.csv' 
INTO TABLE MyDB.code FIELDS TERMINATED BY ',' 
ENCLOSED BY '"' LINES TERMINATED BY '\r\n' (code_id,code_name,code_date); 
```

我得到这样的回应：

> 查询正常，1 行受影响，2 个警告（1.80 秒）记录：665893 已删除：0 跳过：665892 警告：1

我正在使用 Ubuntu 并且 MySQL 在 localhost 上运行。是什么导致 LOAD DATA LOCAL INFILE 命令跳过这些记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:43:44.640

您是否验证了这些行实际上是由 \r\n 终止的？另外，您是否导出了正确的 CSV，或者只是逗号分隔？如果您的值未正确引用（如您指定的那样），也可能导致导入问题。

您可能想尝试删除换行符规范：

```
LOAD DATA LOCAL INFILE 'code.csv' INTO TABLE MyDB.code FIELDS TERMINATED BY ',' ENCLOSED BY '"' (code_id,code_name,code_date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T22:50:36.383

如果您的表有任何唯一约束，则`LOAD DATA`命令将跳过违反该约束的行。

这里的问题说明：[https ://stackoverflow.com/a/20913896/445131](https://stackoverflow.com/a/20913896/445131)

要修复它，要么删除该表上的唯一约束，要么删除文本文件中违反该约束的行。

# javascript - 无法使用 JavaScript 更改跨度内容

> ID：15550292
> 
> 赞同：0
> 
> 时间：2013-03-21T14:29:16.517
> 
> 标签：javascript, html

```
// create text <span>
var text = document.createTextNode("Some content I want to replace... ");
var textspan = document.createElement("span");
textspan.id = "text" + counter;
textspan.appendChild(text)

div.appendChild(textspan);

// edit <span> content
document.getElementById("text" + this.index).innerHtml = 'hello';

console.log(document.getElementById("text" + this.index).innerHtml);
console.log(document.getElementById("text" + this.index)); 
```

结果

```
> hello
> <span id=​"text0">​Some content I want to replace ​&lt;/span>​ 
```

InnerHtml 更改正确，但浏览器（和控制台）仍然显示错误的内容。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:30:31.310

是`innerHTML`，不是`innerHtml`。

请记住，在 Javascript 中，所有内容都区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:35:25.643

您可以通过将字符串设置为`innerHTML`或`innerText`Element 属性来更改内容。这显然是什么财产

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:34:32.813

使用 jquery 会更好`$('#your_id').html('some kind of a text');`，但如果 js 适合您，则使用 innerHTML 或 innerText ，如其他答案中所述。

# mysql - 在不按 ID 排序时获取上一行 ID

> ID：15550293
> 
> 赞同：1
> 
> 时间：2013-03-21T14:29:16.873
> 
> 标签：mysql, sql

如何从具有如下结构的表中获取上一个和下一个 id：

```
+----+---------+---------------------+
| id | urgency | timestamp           |
+----+---------+---------------------+
|  1 | 0       | 2013-01-01 00:00:00 |
|  2 | 2       | 2013-01-01 00:00:00 |
|  3 | 1       | 2013-01-05 09:30:00 |
|  4 | 2       | 2013-01-01 00:00:00 |
|  5 | 2       | 2013-01-01 00:00:00 |
|  6 | 1       | 2013-01-06 10:00:00 |
|  7 | 0       | 2013-01-01 00:00:00 |
|  8 | 0       | 2013-01-03 00:00:00 |
|  9 | 1       | 2013-02-01 13:30:00 |
| 10 | 0       | 2013-01-04 00:00:00 |
+----+---------+---------------------+ 
```

表格排序如下：urgency asc、timestamp asc、id asc

这是排序表：

```
+----+---------+---------------------+
| id | urgency | timestamp           |
+----+---------+---------------------+
|  1 | 0       | 2013-01-01 00:00:00 |
|  7 | 0       | 2013-01-01 00:00:00 |
|  8 | 0       | 2013-01-03 00:00:00 |
| 10 | 0       | 2013-01-04 00:00:00 |
|  3 | 1       | 2013-01-05 09:30:00 |
|  6 | 1       | 2013-01-06 10:00:00 |
|  9 | 1       | 2013-02-01 13:30:00 | <= CURRENT_ID
|  2 | 2       | 2013-01-01 00:00:00 |
|  4 | 2       | 2013-01-01 00:00:00 |
|  5 | 2       | 2013-01-01 00:00:00 |
+----+---------+---------------------+ 
```

有没有办法从 MySQL 中选择位置为 CURRENT_ID - 1 或 CURRENT_ID + 1 的东西？

我能做的是执行一个简单的查询：

```
SELECT
    id
FROM
    MY_TABLE
ORDER BY
    urgency asc,
    timestamp asc,
    id asc 
```

在 PHP 中创建一个循环结果并找到正确的位置，但这是一个会很快增加的表格。所以这不是一个选择......希望您可以提供另一种解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:32:29.760

对于以前的：

```
SELECT prev.id
FROM my_table current
JOIN my_table prev
  ON (prev.urgency < current.urgency) 
     OR (prev.urgency = current.urgency 
        AND (prev.timestamp < current.timestamp 
            OR (prev.timestamp = current.timestamp AND prev.id < current.id)))
WHERE current.id = @currentId
ORDER BY prev.urgency desc, prev.timestamp desc, prev.id desc
LIMIT 1 
```

接下来：

```
SELECT next.id
FROM my_table current
JOIN my_table next
  ON (next.urgency > current.urgency) 
     OR (next.urgency = current.urgency 
        AND (next.timestamp > current.timestamp 
            OR (next.timestamp = current.timestamp AND next.id > current.id)))
WHERE current.id = @currentId
ORDER BY next.urgency asc, next.timestamp asc, next.id asc
LIMIT 1 
```

[这里是 Sqlfiddle](http://www.sqlfiddle.com/#!2/08ab1/1)。

尝试在单个查询中同时获取它们更具挑战性，但可以通过使用嵌套分组代替 LIMIT 的类似方法来完成。我怀疑您会在如此复杂的查询中看到很多性能优势，而且您肯定会更难维护它......

# css - 响应式媒体查询 - 我在哪里放什么代码？

> ID：15550294
> 
> 赞同：2
> 
> 时间：2013-03-21T14:29:18.097
> 
> 标签：css, responsive-design, media-queries

这将是我的第一个完全响应的网站，所以我环顾四周，发现帖子底部的基本媒体查询似乎以某种方式或形式与大多数设备相匹配。

我从这些查询之外的代码开始（即针对普通桌面）。然后我处理了第一个移动媒体查询，但第二条规则对我来说没有意义（即大于 321 像素的所有内容）。

**这似乎意味着大于 321 到 768 的所有内容，这是下一个规则。我想我误解了这是如何工作的？谁能以足够简单的方式解释这一点？我开始认为我所有的 CSS 代码都应该在这些媒体查询中，我不应该先从移动版本开始，然后随着分辨率的增大逐渐扩展它？**

```
/* Smartphones (portrait) ----------- */
@media only screen and (max-width : 320px)
{

}

/* Smartphones (landscape) ----------- */
@media only screen and (min-width : 321px) and (orientation: landscape)
{

}

/* iPads (landscape) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape)
{

}

/* iPads (portrait) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait)
{

}

/* Desktops and laptops ----------- */
@media only screen and (min-width : 1224px) and (orientation: landscape)
{

}

/* Large screens ----------- */
@media only screen and (min-width : 1824px)
{

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T14:50:14.690

媒体查询的目的是改变元素，使它们在特定的窗口/屏幕尺寸下看起来不错。
移动优先设计开始流行。本质上，开发人员创建要在移动设备上优化（外观和行为最佳）的网站。接下来，他逐渐在他的 css 末尾插入媒体查询以覆盖原始 css。他这样做是为了使页面适应用户的窗口/屏幕大小，从而获得更好的体验。

这是一个例子：

```
.ImageGalleryItems {
  float: none;
  clear: both;
  background-color: black;
}
@media only screen and (min-width: 768px) {
  float: left;
  background-color: white;
} 
```

现在，只要用户的屏幕尺寸大于 768 像素，图像项就会向左浮动，而不是彼此相邻显示。此外，背景颜色也会改变。

这是您可以使用的原则。如果您首先为移动设备开发，请不要`:hover`在原始 CSS 中添加效果，因为这些效果不适用于移动设备。然后，使用媒体查询为桌面添加这些效果。这可以节省数据使用量并创建更清晰的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:37:48.530

我觉得你有点过头了。减少媒体查询的数量，并在您的设计以某种方式“中断”的地方添加一些断点。

考虑在查询中放入什么：一种方法是编写某种形式的通用 CSS，然后覆盖媒体查询中的一些属性。另一种方法是简单地跳过通用 CSS 中的“交替”属性并将其设置在每个查询中。

所以：你不要在媒体查询中编写所有的 CSS。只是你想要改变的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:37:24.527

没有必要将所有内容都放在媒体查询中。媒体查询仅适用于该查询范围内的设备和/或屏幕尺寸。

@media 1 不一定会影响 @media 2。

注意：您还可以将媒体查询放在逗号分隔的列表中以节省时间。

这就是我在我的网站上所做的：

```
 /* styles for desktops */
 body{width:100%;}

 img{width:100%;} /* and so on */

@media handheld and (max-width: 960px),

screen and (max-width: 960px),

only screen and (min-device-width : 768px) and (max-device-width : 1024px),

only screen and (min-device-width : 320px) and (max-device-width : 480px),

only screen and (-webkit-min-device-pixel-ratio : 1.5),

only screen and (min-device-pixel-ratio : 1.5)

{
     /*Styles for non desk-tops*/
     /*You Only Need to put styles you want to change in here*/
     img{width:90%;}
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-04T16:19:52.820

大多数只是同意已经说过的话：您是在尺寸*之间*进行设计，而不是针对特定尺寸进行设计。要记住的最重要的事情是以百分比而不是固定宽度布置所有内容。这样做的结果是您实际上应该只需要三个查询：一个用于台式机，一个用于平板电脑，一个用于移动设备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:39:18.653

这是相当多的媒体查询——我会考虑你是否真的需要所有这些。

您可以先从移动设备或桌面设备处理这些问题。真的没什么区别。

我建议看看 Bootstrap 使用哪些媒体查询作为默认值。

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T08:33:40.117

始终在桌面和移动设备上使用媒体查询，因为如果你不这样做，整个 CSS 将呈现到浏览器上，占用空间并减慢你的网页（不多，但如果你有一个大的 web 应用程序可能会变得很大）。所以我的建议是为桌面和移动设备设置媒体查询。因此，当它加载时，它只加载与规范有关的媒体查询，没有额外的或无用的。

# php - 使用 jQuery Mobile 动态创建虚拟页面

> ID：15550295
> 
> 赞同：5
> 
> 时间：2013-03-21T14:29:18.060
> 
> 标签：php, javascript, jquery, ajax, jquery-mobile

我尝试使用 jQuery Mobile 链接虚拟页面，但我有两个问题：

*   第一次加载页面时，没有应用 CSS。
*   当我选择一个页面并想切换到另一个页面后，我注意到每次经过第 1 页。

这是我的[例子](http://jsfiddle.net/cFens/4/)。

代码 ：

```
 var nbrButton = 3;
            $(document).ready(function(){
                for(i = 1;i <= nbrButton;i++) {

                    $("body").append('<div id="p'+i+'" data-role="page" class="pages"><div data-role="content">Page'+i+'</br><a data-role="button" rel="internal" href="#p1"  data-inline="true">1</a><a data-role="button" rel="internal" href="#p2"  data-inline="true">2</a><a data-role="button" rel="internal" href="#p3"  data-inline="true">3</a></div></div>');

                }
                $("#p1").show();

            }); 
```

你能告诉我问题是什么，或者是否有更好的方法来做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:52:02.903

除非您至少有一个现有的，否则您不能动态创建新的 jQuery Mobile 页面（可以，但该页面不会有样式）。这里有一个解决方法，您可以创建一个空的 jQuery 移动页面并使用它来创建一个新页面。

这是一个工作示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>        
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script>
                $(document).on('pageshow', '#index', function(){       
                    $('<div>').attr({'data-role':'page','id':'second'}).appendTo('body');
                    $('<div>').attr({'data-role':'header','id':'second-header'}).append('<h3>Header Title</h3>').appendTo('#second');
                    $.mobile.changePage("#second");
                });    
    </script>
</head>
<body>
    <div data-role="page" id="index">

    </div>  
</body>
</html> 
```

现在您应该使用第一个隐藏页面的 pageshow 页面事件来创建新的动态页面。创建页面后，只需使用更改页面来显示第一个可见页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:02:03.910

**更新**

我也删除`data-rel="internal"`了链接。

**回答**

我已经完成了以下操作。

代替

```
$('#p1').show(); 
```

我加了这个

```
$.mobile.changePage( '#p1', { allowSamePageTransition: true }); 
```

它将刷新 Page-1`p1`以重新加载样式。

工作[示例](http://jsfiddle.net/Palestinian/AS6s7/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-11T07:46:21.517

要应用 CSS 样式，只需`$("#p1").trigger('create');`在最后一行 添加`$("#p1").show();`

# java - 在项目中导入jar

> ID：15550297
> 
> 赞同：0
> 
> 时间：2013-03-21T14:29:18.303
> 
> 标签：java, eclipse, jar

我做了这个非常简单的java文件：

```
public class LibTest {

    public int mySum(int a, int b){

        return a + b;       
    }   
} 
```

然后我将它导出为 jar 文件（使用 Eclipse 向导）。

然后我想在不同的Java项目中导入这个jar并使用方法`mySum`。

我将该 jar 导入为`Referenced Library`，但我不知道如何从我的代码中调用该方法。

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:35:07.477

首先导入类：

```
import mypackage.LibTest; 
```

然后实例化它并调用方法：

```
public static void main(String[] args) {
    LibTest libTest = new LibTest();
    System.out.println(libTest.mySum(1,1));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:31:14.863

在您的 java 类中添加一个 import 语句，然后使用该类。例如：导入 com.mypackage.MyClass；

# asp.net-web-api - HttpClient 是什么，为了什么？

> ID：15550318
> 
> 赞同：-5
> 
> 时间：2013-03-21T14:30:01.680
> 
> 标签：asp.net-web-api, httpclient

什么是 HttpClient？它是为了什么？从我需要开始为 api 控制器编写简单的 http 客户端开始？我需要它来简单地访问控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:33:25.810

这应该给你一个开始：

```
private Order SendOrderRequest(Models.OrderTest model)
{
    Uri uri = new Uri(model.BaseUrl + "order");

    HttpClient client = new HttpClient();

    client.BaseAddress = uri;

    var mediaType = new MediaTypeHeaderValue("application/json");
    var jsonFormatter = new JsonMediaTypeFormatter();

    HttpContent content = new ObjectContent<Order>(model.Order, jsonFormatter);
    HttpResponseMessage responseMessage = client.PostAsync(uri, content).Result;

    return responseMessage.Content.ReadAsAsync(typeof(Supertext.API.POCO.Order)).Result as Supertext.API.POCO.Order;
} 
```

它只是将模型内的订单对象发布到 Web API（并返回一个订单对象）

# php - SQL 查询中的 PHP 变量

> ID：15550319
> 
> 赞同：-3
> 
> 时间：2013-03-21T14:30:01.830
> 
> 标签：php, sql

这是我的代码的一部分：

```
$sql = "select uid,connected,callerid2 from calls where uid = $uid;";
    $c = new dbConnect();
    $results = pg_query($c->pgConnect(), $sql);
    if (!$results)
    {
        die("Error in SQL query: " . pg_last_error());
    } 
```

当我从 SSH 执行它时，会出现以下消息：

```
LINE 1: select uid,connected,callerid2 from calls where uid = ; 
```

似乎`$uid`没有正确注射，但我不知道为什么。我也试过`pg_prepare`了，结果一样。我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:14:54.623

```
$sql = "select uid,connected,callerid2 from calls where uid = '" . (int)$uid . "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:32:52.260

```
$sql = "select uid,connected,callerid2 from calls where uid = '" . $uid . "'"; 
```

并确保它`$uid`存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:33:34.537

```
$query = sprintf("select uid,connected,callerid2 from calls where uid = '%s'", 
$uid); 
// Then run the query. 
$result = mysql_query($query); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T14:31:49.293

变量显然是空的。此外，不要混淆字符串和变量总是好的

```
$sql = "select uid,connected,callerid2 from calls where uid = " . $uid . ";"; 
```

如果`$uid`应该是字符串而不是整数，请用引号括起来：

```
$sql = "select uid,connected,callerid2 from calls where uid = '" . $uid . "';"; 
```

# java - 实例化空数组的最佳表示法？

> ID：15550322
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:30:07.867
> 
> 标签：java, arrays

要实例化一个空数组，这两种表示法中的哪一种是最好的：

1.  `Object[] emptyArray = new Object[] {};`
2.  `Object[] emptyArray = new Object[0];`

它们对于编译器是否完全相同？一个看起来比另一个更清晰吗？

*我只是出于好奇而问：我很清楚它不会对我的程序产生影响*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:33:39.573

> 它们对于编译器是否完全相同？

是的。它们都产生相同的字节码：

```
Object[] emptyArray = new Object[] {};

   0: iconst_0
   1: anewarray     #3                  // class java/lang/Object
   4: astore_1

Object[] emptyArray1 = new Object[0];

   5: iconst_0
   6: anewarray     #3                  // class java/lang/Object
   9: astore_2

  10: return 
```

> 一个看起来比另一个更清晰吗？

这可能与 SO 无关，因为它可能导致无休止的讨论 :)

我会说`new Object[0];`更容易阅读，但其他人可能会反对。

# objective-c - 如何让 NSPopUpButton 接受 firstResponder 状态？

> ID：15550329
> 
> 赞同：0
> 
> 时间：2013-03-21T14:30:21.563
> 
> 标签：objective-c, cocoa, nstextfield, first-responder, nspopupbutton

我有一个`NSPopUpButton`甚至是一个简单的`NSPopUpButton`. 在我的子类中：

`- (BOOL)acceptsFirstResponder { return YES; }`

`- (BOOL)refusesFirstResponder { return NO; }`

现在很容易告诉窗口使按钮成为第一响应者，并且在启动时起作用，但我需要这也发生在从 NSTextField 中跳出的 nextResponder 中。一旦焦点在任何 NSTextField 上，它似乎永远无法移回弹出按钮。

我在这里想念什么？看起来应该很简单。

回答： firstResponder 不是这里使用的东西。需要一个子类（正如我所怀疑的那样），只需覆盖以下内容即可返回 YES：（ `- (BOOL)canBecomeKeyView { return YES; }` 感谢 Peter Hosey）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:16:21.683

在您的 NSPopUpButton 子类中，尝试覆盖`canBecomeKeyView`。

# jsf - javax.faces.component.UIInput.CONVERSION 与 javax.faces.converter.*

> ID：15550330
> 
> 赞同：4
> 
> 时间：2013-03-21T14:30:22.350
> 
> 标签：jsf, properties, localization, type-conversion, converter

jsf-api.jar 包含各种本地化的 Messages.properties 文件，这些文件一方面包含一个`javax.faces.component.UIInput.CONVERSION`键，另一方面包含各种`javax.faces.converter.*`键。

我的问题是：

*   什么时候用第一把钥匙，什么时候用第二把钥匙？
*   这是在哪里记录的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:40:54.773

当不包含 faces 消息并且组件没有指定属性`javax.faces.component.UIInput.CONVERSION`时，将使用该消息。换句话说，它是默认/后备消息。消息标识符由常量指定，该常量[记录](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#CONVERSION_MESSAGE_ID)如下：`ConverterException``converterMessage`[`UIInput#CONVERSION_MESSAGE_ID`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#CONVERSION_MESSAGE_ID)

> # `CONVERSION_MESSAGE_ID`
> 
> `public static final java.lang.String CONVERSION_MESSAGE_ID`
> 
> 发生转换错误时要创建的消息标识符，[`FacesMessage`](http://docs.oracle.com/javaee/6/api/javax/faces/application/FacesMessage.html)页面作者和页面作者均不`ConverterException`提供消息。
> 
> ### 也可以看看：
> 
> [常量字段值](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.component.UIInput.CONVERSION_MESSAGE_ID)

* * *

当`javax.faces.converter.*`消息标识符中指定的标准 JSF 转换器未能完成特定的转换任务时，将使用这些消息。标准 JSF 转换器列在[`javax.faces.convert`包摘要](http://docs.oracle.com/javaee/6/api/javax/faces/convert/package-summary.html)的类摘要中。例如`java.faces.converter.DateTimeConverter.*`，消息标识符将被使用，[`DateTimeConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/DateTimeConverter.html)其中在其字段摘要中列出了一些消息标识符常量，例如其常[`DateTimeConverter#DATE_ID`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/DateTimeConverter.html#DATE_ID)量值[记录](http://docs.oracle.com/javaee/6/api/javax/faces/convert/DateTimeConverter.html#DATE_ID)如下：[`"javax.faces.converter.DateTimeConverter.DATE"`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.convert.DateTimeConverter.DATE_ID)

> # `DATE_ID`
> 
> `public static final java.lang.String DATE_ID`
> 
> 转换失败[`FacesMessage`](http://docs.oracle.com/javaee/6/api/javax/faces/application/FacesMessage.html)时要创建的消息标识符。`Date`此消息的消息格式字符串可以选择包含以下占位符：
> 
> *   `{0}`替换为未转换的值。
> *   `{1}`替换为示例值。
> *   `{2}`替换为 a `String`，其值为产生此消息的输入组件的标签。
> 
> ### 也可以看看：
> 
> [常量字段值](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.convert.DateTimeConverter.DATE_ID)

请注意，所有消息标识符都列在[JSF 规范](http://www.jcp.org/en/jsr/detail?id=314)的第 2.5.2.4 章中。另请参阅[JSF 转换器资源包消息](https://stackoverflow.com/questions/3092267/jsf-converter-resource-bundle-messages/3092896#3092896)以获取副本。

# android - Android excludeFromRecents 是否需要任何权限？

> ID：15550333
> 
> 赞同：2
> 
> 时间：2013-03-21T14:30:24.383
> 
> 标签：android

当我写`android:excludeFromRecents="true"`or`android:noHistory="true"`时，它不会禁用 Android 4.0+ 平板电脑上最近的应用程序。它是否需要任何许可或 minSdkVersion 或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:38:26.320

> 当我编写 android:excludeFromRecents="true" 或 android:noHistory="true" 时，它不会禁用 Android 4.0+ 平板电脑上最近的应用程序。

两者都不应该“禁用最近的应用程序”。

`android:excludeFromRecents="true"`，在`<activity>`将形成任务根的 上定义，[将阻止该活动的任务出现在最近的任务列表中](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)。

`android:noHistory="true"`意味着[无论何时用户离开](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)[该活动`finish()`](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)，该活动都会通过任何机制进行编辑。

# javascript - 动作脚本中的activex

> ID：15550337
> 
> 赞同：0
> 
> 时间：2013-03-21T14:30:38.980
> 
> 标签：javascript, actionscript, activex, mxml

是否可以使用 actionscript 在 MXML 文件中运行 activex 控件？这是我想在 Javascript 中做的等价物

```
function getUserName(){
var s = new ActiveXObject("wscript.network");
return s.username;
} 
```

-- 一个简单的“hello world”例子就很好了。我可以从那里拿走它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:40:24.423

您可以在 javascript 中执行此操作，然后用于`ExternalInterface`在您的 flash/flex 应用程序和您的 javascript 函数之间进行通信。

您可以在此处查看文档：http: //livedocs.adobe.com/flex/3/html/help.html?content= [passingarguments_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_4.html)

# jquery - 关闭弹窗并刷新网站

> ID：15550342
> 
> 赞同：0
> 
> 时间：2013-03-21T14:31:04.063
> 
> 标签：jquery

你知道我应该怎么写正确的方法点击吗？

JS - 在这里我犯了错误

```
$(".ui-dialog-titlebar-close").live("click", function (e) {
    window.setTimeout('location.reload()', 100);
}); 
```

有带按钮的班级

![在此处输入图像描述](../Images/f57dc3186c65e69c90a48e1085a5745c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:32:49.640

尝试：

```
$(document).on("click", ".ui-dialog-titlebar-close", function (e) {
      e.preventDefault();
      window.setTimeout('location.reload()', 100);
}); 
```

# django - Django：无法分配“（ ,)": "Announs.section" 必须是 "Sections" 实例

> ID：15550343
> 
> 赞同：0
> 
> 时间：2013-03-21T14:31:04.480
> 
> 标签：django

在模型中我有这个：

```
 section = models.ForeignKey("Sections", verbose_name='Раздел') 
```

我的观点：

```
def announs_add(request):
  if request.method == 'POST':
        form = add_form(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            section_obj = get_object_or_404(Sections, id=cd['section']),
            announ = Announs(section=section_obj)
            announ.save()
            form = add_form()
  else:
       form = add_form()
  return render_to_response('announs/announs_add.html',
  {
    'form':form,
  }, context_instance = RequestContext(request), ) 
```

如果我尝试添加一些东西，我有这个：

```
Cannot assign "u'\u041d\u0443\u0436\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u0442\u0432\u043e\u0435\u0439 \u043f\u043e\u043c\u043e\u0449\u0438'": "Announs.section" must be a "Sections" instance. 
```

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:32:53.683

这个额外的逗号：

```
 # v-- this one
section_obj = get_object_or_404(Sections, id=cd['section']), 
```

创建一个元组（包含该部分的 1 元组）。去掉逗号。

```
section_obj = get_object_or_404(Sections, id=cd['section']) 
```

# wpf - 使用 ContentControl 生成视图（用户控件）

> ID：15550344
> 
> 赞同：1
> 
> 时间：2013-03-21T14:31:06.537
> 
> 标签：wpf, mvvm, wpf-controls

我有一个 UserControl (MainView)，它需要在其内部显示另一个 UserControl。根据某些情况，它将显示 AView 或 BView（它们都出现在 MainView 的同一位置）。我使用的是 ViewModel 第一种方法，因此视图是通过数据模板生成的：

```
public class AView : UserControl { }
public class BView : UserControl { }
public class AViewModel : ViewModelBase { }
public class BViewModel : ViewModelBase { } 
```

从资源使用角度来看，这两种方式是否有区别：

1) 拥有一个 ContentControl

```
<ContentControl Content="{Binding SomeViewModel}" />

private ViewModelBase _someViewModel;
public ViewModelBase SomeViewModel
{
    get {return _someViewModel;}
    set
    {
        if (!ReferenceEquals(_someViewModel, value))
        {
            _someViewModel = value;
            RaisePropertyChange(SomeViewModel);
        }
    }
} 
```

这样，我可以选择将哪个 ViewModel（AViewModel 或 BViewModel）设置为 SomeViewModel，而 DataTemplates 将选择要显示的适当视图。

2）放置两个ContentControl，并控制它们中的每一个的Visibility（一次只有一个可见）。

```
<ContentControl Content="{Binding AViewModel}"
                Visibility="{Binding SomeCondition}" />

<ContentControl Content="{Binding BViewModel}"
                Visibility="{Binding NotSomeCondition}" /> 
```

那么，从资源管理的角度来看，这两个视图之间的切换行为是否会有所不同，或者在这两种情况下，在给定时间只有一个视图会驻留在内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:36:08.030

WPF 会卸载不可见的对象，因此在任何给定时间只会为这两种方法加载您的一个视图，但是您的第二个方法将在 UI 中创建两个 ContentControl，而第一个只创建一个。

此外，`Visibility`每当您的内容视图模型发生更改时，都会增加（微乎其微的）开销。`DataTemplate`由于您将 设置`Content`为 a ，因此将以任何一种方式评估`ViewModel`，并且 WPF 必须通过查找来确定如何绘制该 ViewModel`DataTemplate`

我个人更喜欢第一个版本。它更易于维护和管理，尤其是当您有不止 2 个视图，并且一次`ContentControl`在 UI 中只存在一个时

# python - 配置 Eclipse/PyDev 以使用我的虚拟机的 Python 解释器

> ID：15550346
> 
> 赞同：6
> 
> 时间：2013-03-21T14:31:08.517
> 
> 标签：python, eclipse, pydev, virtual-machine, virtualbox

我正在从虚拟机运行一些 Python 代码，但我想在主机上使用 Eclipse/PyDev 作为 IDE。有没有办法配置 Eclipse 以便它使用 Python 解释器和虚拟机的包？这些与主机上安装的不同。另外，我不确定如何访问虚拟机上的 Python 解释器。我在 Virtual Box 上使用 Ubuntu 的 mod 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:44:13.933

如果两台机器在同一操作系统或附近，您可以：

*   将宿主机的文件系统挂载到宿主机中。
*   转到 Eclipse 首选项 => PyDev => 解释器 - Python => 新
*   在已挂载的文件系统上获取 Python 可执行文件
*   证实

*   转到项目的属性

*   Pydev - 解释器/语法
*   选择新创建的解释器。

如果要关闭虚拟机，可以检查[virtualenv 。](https://pypi.python.org/pypi/virtualenv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T11:09:28.733

当 VM python 解释器连接到您的主机 IDE python 调试器时，您可以使用[远程调试。](http://www.pydev.org/manual_adv_remote_debugger.html)他们正在通信并且 IDE 警告 VM 解释器关于断点。

**注意**：IDE 端的源代码应与 VM 上的源代码相同，否则会放错断点。

# java - 如果我的配额已过期，如何擦除数据存储？

> ID：15550350
> 
> 赞同：2
> 
> 时间：2013-03-21T14:31:13.987
> 
> 标签：java, google-app-engine

我部署了一个谷歌应用程序，我想清理数据库（并在清理之前转储它）。问题是我克服了 "Datastore Read Operations" 的配额。我坚信当我尝试通过 Datastore 管理页面转储数据库时，我达到了配额。所以不是通过真正“使用”我的应用程序。

现在，当我尝试从应用程序中删除所有条目时，出现错误

```
com.google.apphosting.api.ApiProxy$OverQuotaException: The API call 
datastore_v3.RunQuery() required more quota than is available 
```

如果我尝试浏览到 Datastore Admin，则不会显示任何内容，并且在应用程序设置中出现错误。我有 800k 条目，所以手动操作不是一个选项。

我不想放弃我的数据库，我不想付费，我想释放空间。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:27:01.390

删除使用配额，因为它需要更新数据存储索引。由于您使用的是读取操作，因此通过 Datastore 管理页面转储数据库需要配额。在应用引擎世界中，这些操作仍被视为“使用”数据存储区。

您对 datstore 所做的几乎所有事情都将使用读取或写入操作。

您的选择是付费，或者随着时间的推移慢慢转储和删除，以便您只使用每天拥有的免费操作数量。使用远程 API 编写一个脚本来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:09:51.190

您的数据库配额每天都会重新填充，因此您可以使用简单的方法编写每日 cron 作业

```
db.delete(YourModel.all(keys_only=True)) 
```

让它运行几天。希望它会在一天内尽可能多地删除，并在接下来的几天内完成其余的工作。

除了 cron 作业之外，您还可以通过交互式控制台或 remote_api 或通过应用程序仪表板菜单中的数据库管理员手动执行此操作，您可以在其中选择实体并单击一键删除它们。

# c# - jquery modal没有从asp下拉列表中获取选定的值

> ID：15550353
> 
> 赞同：0
> 
> 时间：2013-03-21T14:31:16.867
> 
> 标签：c#, jquery, asp.net

我正在使用[jquery 简单模式](http://www.ericmmartin.com/projects/simplemodal/)。

```
function showCancelledModal() {
    $('#<%=CancelledPanel.ClientID %>').modal({ appendTo: 'form' });
}

<asp:Panel ID="CancelledPanel" runat="server" Style="display: none">
  <asp:DropDownList ID="CancelledDropDownList" runat="server"></asp:DropDownList>
  <asp:Button ID="CancelButton" runat="server" Text="Cancel" OnClick="CancelButton_Click" />
</asp:Panel>

protected void CancelButton_Click(object sender, EventArgs e)
{
   var item = CancelledDropDownList.SelectedItem.Value;
   //CancelReservation(strReservationId); 
} 
```

问题是，在我的按钮单击事件中，它似乎没有获得下拉列表的选定值。它只是每次都默认为第一个值。我将下拉列表绑定到页面加载事件中的表。

任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:15:43.937

我无法发表任何评论（可能是因为我是新来的，没有名声！）。所以，就这样吧......这是非常基本的，但你确定你没有在每个回发上对下拉列表进行数据绑定吗？

IE。忘记这样的事情：

```
private void Page_Load()
{
    if (!IsPostBack)
        CancelledDropDownList.DataBind(); // this method will reset the SelectedValue
} 
```

干杯

# java - 如何从 onActivityResult(int requestCode, int resultCode, Intent data) 中获取结果？

> ID：15550357
> 
> 赞同：0
> 
> 时间：2013-03-21T14:31:19.657
> 
> 标签：java, android, camera

我正在开发一个允许用户使用相机拍照的 Android 项目。

我的方法如下所示：

```
private void takePicture(){
        Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(camera, 1337);
    } 
```

在我的 onActivityResult 中，我拍照并将其存储在我的 SD 卡中。我试图修改我的 takePicture() 函数以返回图片的路径（字符串而不是 void）。

我已经知道 java.io.File 中的 getPath() 允许我这样做。

> 所以我的问题是：如何修改我的函数以返回图片的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:33:39.603

`takePicture`将无法返回路径，因为它会在您的意图完成之前返回。你需要对里面的路径做一些事情`onActivityResult`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:35:46.263

**这是在pictureCallback中获取捕获和存储图像的路径的代码**

在这段代码***`mFilePath`***中是保存图像路径的字符串......

```
PictureCallback mPicture = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            File pictureFile = getOutputMediaFile();
            if (pictureFile == null) {
                return;
            }
            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();

                String mFilePath = pictureFile.getAbsolutePath(); 
            } catch (FileNotFoundException e) {

            } catch (IOException e) {
            }
        }
    };

    private static File getOutputMediaFile() {
        File mediaStorageDir = new File(
                Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "MyCameraApp");
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        mediaFile = new File(mediaStorageDir.getPath() + File.separator + "IMG_" + timeStamp + ".jpg");

        return mediaFile;
    }
} 
```

# gdb - gdbserver 从远程文件加载符号表

> ID：15550362
> 
> 赞同：8
> 
> 时间：2013-03-21T14:31:31.403
> 
> 标签：gdb, gdbserver

我正在尝试使用 gdbserver...
我有一个`/user/bin/foo`使用 pid 运行的二进制路径的应用程序`19767`。

在远程启动 gdbserver：

```
gdbserver  --remote-debug --multi 0:12347 
```

在客户端上启动 gdb 并将其连接到删除服务器

```
target extended-remote 192.168.1.84:12347 
```

在pid上附加gdb

```
attach 19767 
```

表明：

```
warning: Could not load vsyscall page because no executable was specified
try using the "file" command first.
0x00007f207550043c in ?? () 
```

此外，它显示的当前线程信息不正确。像 info threads 显示 1 thread ，但我的应用程序有 10 个线程 -

```
(gdb) info threads
* 1 Thread 19767.19767  0x00007f207550043c in ?? () 
```

如何让 gdb 从远程文件加载符号`/user/bin/foo`？如何让它显示正确的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:47:24.313

> 如何让 gdb 从远程文件 /user/bin/foo 加载符号

你不能。在本地复制远程`/usr/bin/foo`（或挂载它所在的文件系统），然后像这样调用 gdb: `gdb /path/to/copy/of/foo`，或者只使用`file`命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-15T05:14:26.590

从 gdb 7.10 开始，您可以使用

```
set sysroot target: 
```

使 gdb 从远程文件系统中检索文件。请参阅[https://sourceware.org/gdb/onlinedocs/gdb/Files.html#Files](https://sourceware.org/gdb/onlinedocs/gdb/Files.html#Files)

# android - 用于 AnimationUtils 动画重置的 setAnimationListener？

> ID：15550374
> 
> 赞同：0
> 
> 时间：2013-03-21T14:32:01.087
> 
> 标签：android, animation

我在 viewflipper 上使用动画并像 AnimationUtils.loadAnimation(this, R.anim.flipout); 一样加载它们。

问题是我还在它们上设置 AnimationListener 并希望它在不同时间设置不同的侦听器。问题是它们保留了上次加载 loadAnimation 时的动画监听器，并且在它们上设置新的动画监听器什么也没做（也不会崩溃，新的动画监听器永远不会被调用）。

我是否必须放弃 AnimationUtils.loadAnimation 并自己创建新的动画对象？我可以禁用它的缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:55:20.113

解决了。

答案很简单，我正在调用 myviewflipper.showPrevious(); 在将新动画设置到正在使用它们的 viewflipper 之前，即使那段 ui 线程在设置之前没有返回。因此，viewflipper 会使用您调用上一个/下一个时设置的动画来执行此操作——而不是在它之后设置的动画，即使它没有机会开始显示它们。

# php - php联系表格发送到特定电子邮件取决于用户选择的选项

> ID：15550375
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:32:16.343
> 
> 标签：php, email, switch-statement, option

我的发送联系人 php 文件有问题。我希望根据访客选择的主题发送电子邮件，例如：Padicure Booking 主题电子邮件将发送至 booking@example.com，而一般查询主题将发送至 info@example.com

下面是我的php代码。

```
<?php
function emailswitch( $key ) {
    $to = array(
        'Pedicure Price Inquiry' => 'enquiry@gmail.com',
        'Manicure Price Inquiry' => 'enquiry@gmail.com',
        'Booking Time' => 'info@gmail.com'
    );
    $default = 'info@gmail.com';
    return isset( $_POST['field_?'] ) && !empty($to[ $_POST['field_?'] ])  ? $to[ $_POST['field_?'] ]: $default;  $from = $_POST['email'];
}
$from_name = $_POST['name'];
$email = $_POST['email'];
$subject = $_POST['category']; 

// collect data
$body = "";
foreach($_POST as $key => $val)
{
    if($key != 'captcha')
        $body .= ucfirst($key).": ".$val."\r\n";
}

// construct MIME PLAIN Email headers
$header = "MIME-Version: 1.0\n";
$header .= "Content-type: text/plain; charset=utf-8\n";
$header .= "From: $from_name <$email> \r\nReply-To: $from_name <$email> \r\nReturn-Path: <$email> \r\n";

// send email
$to = emailswitch( $subject );
$mail_sent = mail($to, $subject, $body, $header);
?> 
```

以下是我的表单代码：

```
<div id="contact_form">
                    <form action="sendContact.php" method="post" onsubmit="return sendContact();">
                        <p><label id="lname" for="name">Full name:</label>
                        <input id="name" class="text" name="name" onblur="input_blur('name');" onfocus="input_focus('name');" type="text" /></p>
                        <p><label id="lemail" for="email">Email address:</label>
                        <input id="email" class="text" name="email" onblur="input_blur('email');" onfocus="input_focus('email');" type="text" /></p>
                        <div class="x"></div>
                        <p id="email-error" class="error">You must enter your email address!</p>
                        <p><label id="lcategory" for="category">Category:</label>
                        <select id="category" name="category" onblur="input_blur('category');" onfocus="input_focus('category');">
                        <option value="Pedicure Price Inquiry">Pedicure Price Inquiry</option>
                        <option value="Manicure Price Inquiry">Manicure Price Inquiry</option>
                        <option value="Booking Time">Booking Time</option></select></p>
                        <p><label id="lmessage" for="message">Message:</label>
                        <textarea id="message" name="message" onblur="input_blur('message');" onfocus="input_focus('message');" rows="" cols=""></textarea></p>
                        <div class="x"></div>
                        <p id="message-error" class="error">You must enter your message!</p>
                        <p><label id="lcaptcha" for="captcha"></label>
                        <input id="captcha" class="text" name="captcha" onblur="input_blur('captcha');" onfocus="input_focus('captcha');" type="text" /></p>
                        <div class="x"></div>
                        <p id="captcha-error" class="error">Are you sure about your calculations?</p>
                        <script type="text/javascript">
                            generate_captcha('lcaptcha');
                        </script>
                        <div class="x"></div>
                        <input class="submit" name="send_contact" type="submit" value="Send" /><input class="submit" type="reset" value="Reset" />
                    </form>
                </div>
                <div id="message_sent" style="display: none;">
                    <h1>Your message has been sent</h1>
                    <p>We&#39;ll contact you as soon as possible.</p>
                    <p>You can now <a href="./">go back</a> to home page.</p>
                </div>
                <!-- end of contact form --></div> 
```

但是电子邮件没有发送出去......我想知道我的php文件中有什么问题导致表单无法触发所述电子邮件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:35:01.280

`$to`没有在外部上下文中定义。

```
$mail_sent = mail(emailswitch(), $subject, $body, $header); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:22:28.820

首先，将参数传递给您的函数，而不是尝试`$_POST`直接使用：

```
function emailswitch( $key ) {
    $to = array(
        'Pedicure Price Inquiry' => 'info@example.com',
        'Manicure Price Inquiry' => 'info@example.com',
        'Booking Time' => 'booking@example.com'
    );
    $default = 'booking@example.com';
    return (!empty($to[$key]))?$to[$key]:$default;
} 
```

顺便说一句：里面的那个`$from`元素`emailswitch`永远不会被调用，也不应该在函数内部。

其次，确保从电子邮件调用中调用该函数：

```
$to = emailswitch( $subject );
$mail_sent = mail($to, $subject, $body, $header); 
```

# sql - SQL 查询：每个特定属性只有一个数据集

> ID：15550378
> 
> 赞同：0
> 
> 时间：2013-03-21T14:32:29.013
> 
> 标签：sql, select, group-by, where-clause

我想从数据库中每个特定属性（列值）只检索一个数据集。例如：你有一张这样的桌子：

```
restaurant district longitude latitude
---------------------------------------
deli meal  1        80.456    -56.89
perseus    1        80.879    -56.00
artica     2        67.7080   -69.89
tieus      2        67.00     -69.00
petera     3        89.00     -78.89 
```

而且您希望每个地区只有一个示例，例如：

```
deli meal  1        80.456    -56.89
artica     2        67.7080   -69.89
petera     3        89.00     -78.89 
```

我如何实现这一目标？通常我只会按地区分组，但随后我会失去其他属性。谢谢大家的回答！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:34:42.997

解决方法有很多种，一种是使用子查询，分别获取每个区的一条记录。由于您没有提到您正在使用的 RDBMS，因此这几乎适用于所有 RDBMS。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  district, MAX(longitude) max_val
            FROM    tableName
            GROUP   BY district
        ) b ON  a.district = b.district AND
                a.longitude = max_val 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ee2f4/1)

输出

```
╔════════════╦══════════╦═══════════╦══════════╗
║ RESTAURANT ║ DISTRICT ║ LONGITUDE ║ LATITUDE ║
╠════════════╬══════════╬═══════════╬══════════╣
║ perseus    ║        1 ║ 80.879    ║ -56.00   ║
║ artica     ║        2 ║ 67.708    ║ -69.89   ║
║ petera     ║        3 ║ 89.00     ║ -78.89   ║
╚════════════╩══════════╩═══════════╩══════════╝ 
```

**更新 1**

```
WITH recordList 
AS
(
    SELECT  restaurant, district, longitude, latitude,
            ROW_NUMBER() OVER (PARTITION BY district ORDER BY longitude DESC) rn
    FROM    TableName
)
SELECT  restaurant, district, longitude, latitude
FROM    recordList
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/80588/1)

# internet-explorer - 报告服务打印崩溃 IE

> ID：15550384
> 
> 赞同：10
> 
> 时间：2013-03-21T14:32:44.210
> 
> 标签：internet-explorer, reporting-services, internet-explorer-10

我们已经使用 SSRS 2008 R2 一年多了，打印效果很好。由于 Windows 7 上的客户端浏览器升级到 IE10，当用户单击打印图标时，我们会遇到一些浏览器崩溃。故障模块是**rsclientprint64.dll**

为了尝试解决这个问题，我手动将 dll 和相关文件复制到 C:\Windows\Downloaded Program Files 并使用 regsvr32 注册了 dll。我注册了 rsclientprint64.dll 而不是 rsclientprint.dll，因为这是 ssrs 在我们的案例中下载的文件。我也尝试注册 32 位版本，但仍然没有成功。

我将报表服务器的 url 添加到受信任的站点并设置安全性以允许下载签名的 activex 控件。它确实下载它们，但即仍然崩溃。

有没有人有其他想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-21T15:29:30.727

让我猜猜，您正在运行没有 SP2 的 SQL Server R2。我不得不升级到 SQL Server 2008 R2 SERVICE PACK 2。

> 您使用 R2/SP2 获得的 RsClientPrint 版本是 10.50.4000，而我拥有的 RTM 版本是 10.50.1600。

要查看您拥有的 SQL Server 版本，请`Select @@version`在 SSMS 中作为查询运行。

你可以在这里阅读更多。 [ReportViewer 的打印按钮与 IE 10 不兼容？](https://stackoverflow.com/questions/17031060/reportviewers-print-button-incompatible-with-ie-10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T13:54:08.327

**解决 IE11 崩溃的问题**

如果您从 2008 R2 "C:\Program Files (x86)\Microsoft SQL Server\MSRS10.GENERAL\Reporting Services\ReportServer\bin" 获取 RSClientPrint.cab 并将其解压缩到所需的客户端计算机。使用这些文件创建您自己的 bat 文件并运行它，或者将它们复制到您的“C:\windows\Downloaded Program Files”。

将文件复制到“C:\windows\Downloaded Program Files”后，您需要注册 .dll：在 CMD 类型中 -`regsvr32 "c:\Windows\Downloaded Program Files\RSClientPrint.dll"`

问题一：“C:\windows\Downloaded Program Files”通常被锁定

分辨率：在 CMD 类型中 -`attrib "C:\windows\Downloaded Program Files" -S`

问题 2：注册 dll 文件时发现错误消息

解决方法：以管理员身份运行 CMD

本地运行的bat文件

```
 @echo off

    set srcpath= c:\pathname

    attrib "C:\windows\Downloaded Program Files" -S

    xcopy %srcpath%\*.* "c:\Windows\Downloaded Program Files" /Y

    regsvr32 "c:\Windows\Downloaded Program Files\RSClientPrint.dll" 
```

从服务器到客户端机器：

```
@echo off

attrib "C:\windows\Downloaded Program Files" -S

robocopy "\\dc01\packages\rsclientprint" "c:\Windows\Downloaded Program Files"

regsvr32 "c:\Windows\Downloaded Program Files\RSClientPrint.dll" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:33:12.297

这是一个常见的 IE10 问题，在尝试从浏览器打印 PDF 文档时会影响 x32 和 x64 版本。

一种解决方法是打开 Adob​​e Reader 或 Acrobat（以您的默认值为准），转到编辑 > 首选项 > Internet，然后取消选中“在浏览器中显示 PDF”。

互联网 PDF 现在将默认在 Adob​​e 中打开，而不是搞砸的 IE10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T05:25:20.230

尝试以管理员身份运行 Internet Explorer 或将您的报表服务器 URL 添加到 Internet Explorer 受信任的站点。

# php - 从 Facebook 页面中获取超过 10,000 个赞的最新 10 张图片的最佳方式是什么？

> ID：15550389
> 
> 赞同：0
> 
> 时间：2013-03-21T14:32:50.090
> 
> 标签：php, facebook

我需要在 PHP 中创建一个脚本，该脚本会自动从 Facebook 页面（例如：[https](https://www.facebook.com/stackoverflowpage) ://www.facebook.com/stackoverflowpage ）中获取超过特定数量的喜欢（例如：10,000）的最新 10 张图片。我想每小时运行一次脚本，以确保我抓取所有带有标题的图片。

我不认为这是以前做过的。您认为解决此问题的最佳方法是什么？

我想我有三个选择：

1.  通过 Facebook 页面的 HTML 代码获取数据
2.  通过 Facebook Graph 获取数据
3.  通过 Facebook API 获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:30:02.363

我刚刚完成了我的剧本。这是我在 PHP 中的解决方案：

```
$album_id = "20531316728";
$like_minimum = 5000;

$album_data = file_get_contents("https://graph.facebook.com/".$album_id."/photos");
$album_data_array = json_decode($album_data,true);

// loop album
foreach($album_data_array as $item){  
    // loop posts
    foreach($item as $item){ 
        // grab id, source, message
        $photo_id = $item[id];
        $photo_source = $item[source];
        $photo_message = $item[name];

        // count likes
        // facebook doesn't allow us to grab this data. we'll do it anyway.
        $like_data = file_get_contents("http://www.facebook.com/photo.php?fbid=".$photo_id);
        $like_count = explode(' others like this.","ranges":', $like_data);
        $like_count = $like_count[0];
        $like_count = explode('and ', $like_count);
        end($like_count);
        $key = key($like_count);
        $like_count = $like_count[$key];
        $like_count = str_replace(",", "", $like_count);
        $like_count = intval($like_count);

        // check if like_minimum reached
        if($like_count>$like_minimum){
            // SUCCESS!

            // Do stuff...
        }
    }
} 
```

# database - 作为数字和特殊字符的字符

> ID：15550392
> 
> 赞同：0
> 
> 时间：2013-03-21T14:32:56.197
> 
> 标签：database, excel, character-encoding, special-characters, text-editor

这是描述：我正在通过复制/粘贴从 .xls 文件制作一个 .csv 文件。比 .csv 文件加载到数据库中的表中。

问题：当我从文件中复制数据时，一些“特殊”字符也被复制了。然而，这些“特殊”字符在 .xls 文件中不会被注意到，因为它们在那里显示为空白。

问题：我可以使用哪种工具（免费软件）或哪种方法来识别这个“特殊”字符，以便我可以删除它们？我认为它应该是某种工具，可以通过某些数字等价物来识别特定字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:19:41.247

从上一个问题：

[VBA 中的文本文件：打开/查找替换/另存为/关闭文件](https://stackoverflow.com/questions/10434335/text-file-in-vba-open-find-replace-saveas-close-file)

```
Sub ReplaceStringInFile()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String

sFileName = "C:\Temp\test.txt" '<-- Edit as needed

iFileNum = FreeFile
Open sFileName For Input As iFileNum
Do Until EOF(iFileNum)
    Line Input #iFileNum, sBuf
    sTemp = sTemp & sBuf & vbCrLf
Loop
Close iFileNum
sTemp = Replace(sTemp, "THIS", "THAT")  '<--- edit as needed

iFileNum = FreeFile
Open sFileName For Output As iFileNum
Print #iFileNum, sTemp
Close iFileNum

End Sub 
```

可能您需要做的是更改此行：

`sTemp = Replace(sTemp, "THIS", "THAT")`

对于这样的事情：

`sTemp = Replace(sTemp, Chr(10), vbNullString)`

这将用空值替换所有回车符。显然，您需要以某种方式确定要删除的 CHR() 值是什么。

这是可能有用的 CHR() 值列表。

[http://www.techonthenet.com/ascii/chart.php](http://www.techonthenet.com/ascii/chart.php)

# c - 为什么`做{ ...; 出口（...）; C 语言中的 while (0)`？

> ID：15550398
> 
> 赞同：6
> 
> 时间：2013-03-21T14:33:14.160
> 
> 标签：c, function, while-loop, c-preprocessor

作为 C 新手，我无法理解[以下代码](https://lwn.net/Articles/543509/)：

```
#define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \
                           } while (0) 
```

我收集到这个函数是`#define`d 的原因是要覆盖现有函数，但是`do ... while(0)`带有*无条件* `exit()`语句的循环有什么意义呢？没有循环结构就不可能写这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T14:35:55.107

我认为这里有很多重复项。

该`do...while(0)`技巧使您可以`errExit`在各种情况下使用而不会破坏任何东西：

```
if(x) errExit(msg);
else return 1; 
```

被翻译成：

```
if(x) do { ...; ...; } while(0);
else return 1; 
```

例如，如果省略该`do...while(0)`部分，则无法可靠地添加分号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:35:21.707

假设宏没有`do { ... } while(0)`循环，只有里面的 2 个语句。现在，如果我要写

```
if( foo() )
    errExit("foo!" ); 
```

我的有条件退出变成了无条件退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:36:19.093

对于多个语句的宏函数，这种`do { ... } while(0)`构造很常见，通常被认为是最佳实践，例如 this。它允许用作单个语句，因此没有意外。

# createjs - CreateJS 发布的 Movieclip 分为四个

> ID：15550402
> 
> 赞同：0
> 
> 时间：2013-03-21T14:33:29.733
> 
> 标签：createjs

我有 200 张将身体显示为动画的图像。连续只有 200 张图像。当我使用 CS6 CreateJS 工具包创建它的 html 版本时，我得到了该输出。播放时将屏幕分为 4。

有没有人有什么建议。

![在此处输入图像描述](../Images/a5c08898609971ef481531770a82591e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:42:42.433

对于遇到此问题的任何人，因为目前 ToolKit For CreateJS 不支持位图填充的转换。

# c# - WPF 如何优化布局/渲染周期？

> ID：15550403
> 
> 赞同：11
> 
> 时间：2013-03-21T14:33:30.123
> 
> 标签：c#, .net, wpf, performance

**WPF 如何在高度不稳定的应用程序中优化布局/渲染周期？**

例如，假设我快速连续两次使自定义控件无效，它会呈现两次吗？当数据/属性更新速率快于主渲染速率时是否存在性能问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T14:51:05.307

根据我的经验，我可以说不，如果足够快，它不会渲染两次。我不是 100% 确定，但这就是我认为的原因：

我们有一个非常繁重的应用程序（数千个控件），它是一个飞机驾驶舱，全部在 wpf 中，每个按钮、开关、屏幕都可以通过手势或鼠标移动。

驾驶舱为 10 000 x 10 000 像素，并实现了放大/缩小（使用鼠标滚轮），在单击鼠标右键时进行平移。

在优化之前，它非常滞后、缓慢，因此每个“缩放”步骤或“平移”步骤大约需要 1 秒

如果我缩放 1 次（例如缩放 * 1.2），则需要 1 秒

如果我缩放 10 次（缩放 * 1.2 X 10），它不需要 10 秒，它可能需要 2 秒，具体取决于您滚动的速度，并且它不会渲染每个“缩放步骤”，它只渲染最后一个。 ..

# sql - SQL 使用多个表并使用多个 SUM 函数

> ID：15550405
> 
> 赞同：1
> 
> 时间：2013-03-21T14:33:35.097
> 
> 标签：sql, sum

我查看了几篇相对的帖子，但我不知道如何将它们应用于我的情况。

```
SELECT [LeisureActivities].[dbo].[activities].[activityID],
       [LeisureActivities].[dbo].[activities].[activityName],
       [LeisureActivities].[dbo].[activities].[activityDate],
       [LeisureActivities].[dbo].[activities].[activityPlaces],
       [LeisureActivities].[dbo].[activities].[activityPrice],
       SUM([LeisureActivities].[dbo].[bookings].[bookingPlaces]) AS 'bookingTotal',
       SUM([LeisureActivities].[dbo].[tempbookings].[tempPlaces]) AS 'tempPlacesReserved'

FROM   [LeisureActivities].[dbo].[activities],
       [LeisureActivities].[dbo].[bookings],
       [LeisureActivities].[dbo].[tempbookings]

WHERE ([LeisureActivities].[dbo].[activities].[activityID]=[LeisureActivities].[dbo].[bookings].[activityID] 
    AND [LeisureActivities].[dbo].[activities].[activityID]=[LeisureActivities].[dbo].[tempbookings].[tempActivityID]) 
    AND [LeisureActivities].[dbo].[activities].[activityDate] > GetDate ()

GROUP BY [LeisureActivities].[dbo].[activities].[activityID],
         [LeisureActivities].[dbo].[activities].[activityName],
         [LeisureActivities].[dbo].[activities].[activityDate],
         [LeisureActivities].[dbo].[activities].[activityPlaces],
         [LeisureActivities].[dbo].[activities].[activityPrice]; 
```

如您所见，这指的是 3 个表`activities`、`bookings`和`tempbookings`。该`tempbookings`表还包含一个`tempReservedDate`包含日期时间数据类型的字段，我只需要对 tempPlaces 进行 SUM 计算，以求和那些`tempReservedDate`未来有的记录，过去的那些记录只是忽略（类似于我已经通过显示来控制活动只有那些具有未来日期的人）SUM 还需要按每个活动对它们进行分组。

我相信我需要在“WHERE”部分中添加类似

```
[LeisureActivities].[dbo].[tempbookings].[tempReservedDate] > GetDate () 
```

我只是不知道把它放在哪里使它工作而不将它应用于我的整个查询，因为它只需要应用于`tempPlaces`.

我希望我已经设法解释了我的意思，但请询问它是否没有意义，尽管我知道您通常不会像我一样格式化它（使用 [] 等），但对于程序使用这些查询必须以这种特定格式完成。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:39:33.343

您需要在`select`子句中有条件总和：

```
SUM(case when [tempbookings].[tempReservedDate] > GetDate()
                then tempBookings.tempPlaces
           end) as FutureTempPlaces 
```

此外，您应该学习如何更好地格式化您的代码并使用合理的别名（例如`tb`for `tempBookings`）。

# php - MySQL 完全外连接

> ID：15550408
> 
> 赞同：2
> 
> 时间：2013-03-21T14:33:45.560
> 
> 标签：php, mysql, search, join

在过去的几个小时里，我遇到了一个 MySQL 连接问题。我有 2 张桌子：

```
article : 
id(int) 
label(varchar) 
direct_url(varchar)

article_category: 
id(int) 
label(varchar) 
```

我正在尝试使用标签进行搜索查询并加入两个表。我正在这样做：

```
SELECT label,direct_url FROM article FULL OUTER JOIN article_category ON article.label WHERE label LIKE %$q% ORDER BY label ASC 
```

这显然是错误的，因为它不起作用。无论搜索键（$q）如何，我每次都会得到 0 个结果。如果有人能对我的问题有所了解，我将不胜感激。

编辑：[我的来源在这里。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:41:35.743

MySQL 不支持`FULL OUTER JOIN`. 这实际上是将`article`表别名为`FULL`. 有两个语法错误：`OUTER JOIN`本身和值周围缺少引号`LIKE`。 `JOIN ON article.label`也很可能没有做你想让它做的事情。它必须是`JOIN ON article.label = article_category.label`。

我很确定你不想要一个完整的外部连接——从概念上讲，这将是每个表中不存在于另一个表中的值，但实际上你似乎希望能够搜索*两个*标签字段。如果`label`是标识类别的列，最好使用 article_category id 而不是当前`article.label`列。如果不是这种情况，那么无论如何您都没有任何可以加入表格的东西。

# trigger.io - 加载一个简单的 html 页面，该页面使用 trigger.io 关闭当前“选项卡”？

> ID：15550411
> 
> 赞同：1
> 
> 时间：2013-03-21T14:33:51.090
> 
> 标签：trigger.io

我有一个使用 Trigger.io 的移动 html5 应用程序。在某些时候，我需要打开一个外部网页，我正在使用`forge.tab.open`它来实现它。它工作正常。但是，在用户与窗口交互后，我需要关闭选项卡，但我没有到达那里。

在我的常规网页上，我转发到一个简单的 HTML 页面，该页面包含`<body onload="self.close();">`并且工作正常。

在 trigger.io 应用程序上，我尝试使用`<body onload="forge.tabs.closeCurrent();">`但不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:04:53.087

实现这一点的最简单方法是在打开选项卡时指定匹配模式，将用户重定向到与该模式匹配的 url，然后将导致选项卡关闭。

有关更多详细信息，请参阅文档[http://docs.trigger.io/en/v1.4/features/modal.html#match-pattern](http://docs.trigger.io/en/v1.4/features/modal.html#match-pattern)

# solr - 如何从 solr 4.0 正确升级到 4.2？

> ID：15550418
> 
> 赞同：5
> 
> 时间：2013-03-21T14:34:03.473
> 
> 标签：solr

从 4.0 升级到 4.2 后，我的 solr 更新提取处理程序停止工作

当我从 solr 4.0 升级到 4.2 时，所有使用 /update/extract 上传的文件突然停止工作。我注意到缺了一节课。

我通过用我在 4.0 中所做的更改更改 solrconfig（从 4.2 开始）解决了这个问题。

***由于所有这些问题，我想知道从 Solr 4.0 升级到 4.2 的最佳方式是什么？***（或任何其他版本）

我刚刚复制了新的 war、dist 文件夹和 contrib 文件夹，并认为它会很好，但它肯定不是。我知道建议重新编制索引。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:18:55.940

通常，当我在 Solr 版本之间升级时，我会按照下面列出的步骤...

1.  阅读新版本的完整发行说明。特别是检查“从 Solr Xxx 升级”部分。以下是[4.2.0 发行说明](http://lucene.apache.org/solr/4_2_0/changes/Changes.html#4.2.0)另请注意详细更改列表中可能适用于您的实例的任何其他项目。
2.  下载最新版本并将文件夹中的`solrconfig.xml`和与我尝试升级的 Solr 版本（在您的情况下为 Solr 4.0）中的相同文件进行比较。我使用[DiffMerge](http://www.sourcegear.com/diffmerge/)之类的工具或类似的工具来帮助突出差异。`schema.xml``/example/solr/collection1/conf`
3.  检查在步骤 2 中发现的差异。研究更改（使用发行说明、[Solr 问题跟踪器](https://issues.apache.org/jira/browse/SOLR)、[Solr Wiki](http://wiki.apache.org/solr)等）并确定对我在 Solr 实例中实际实施的内容会有什么影响（如果有的话）。
4.  建立一个运行新版本的 Solr 实例，并对我的实现进行适当的配置更改，然后进行相应的测试。

是的，我同意重新索引是最好的，因为 Lucene 的底层版本也在发生变化，并且需要重新索引以利用任何新功能或改进。

希望这可以帮助。

# jquery - 使用 jquery 验证文本框

> ID：15550420
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:34:24.530
> 
> 标签：jquery, validation

使用 jQuery，我需要验证我的表单`onsubmit()`，如果两个文本框都具有非空值，则在它们下方显示错误。

HTML：

```
<input id="actual" type="text" value="#" />
<input id="real" type="text" value="#" />
<input id="submit" type="submit" value="submit" /> 
```

jQuery：

```
$("[value='Submit']").click(function(event) {
    if (($("#actual").val() != null) && ($("#real").val() != null)) {
        // What do I do here?
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:41:30.627

首先：您的 if 语法完全错误。第二点是，您两次检查同一元素的值。

抛出错误是什么意思？真的抛出异常？你这样做：

```
if($("#first_textbox").val() != null && $("#second_textbox").val() != null) {
    throw new Error("Both textboxes are empty.")
} 
```

或者你想在文本框周围包装一个错误样式的类？

```
if($("#first_textbox").val() != null) {
    $("#first_textbox").addClass('error');
}

if($("#second_textbox").val() != null) {
    $("#second_textbox").addClass('error');
} 
```

当然，您必须声明一个添加样式之类的错误的 CSS 类。您可以创建这样的样式：

```
.error {
    border-color: #8B1A1A;
} 
```

另外，请不要在选择器上添加与输入按钮的值部分匹配的点击处理程序。

而不是`$("[value='Submit']")`使用`$('input[type="submit"]')`

**更新**

# matlab - 替换第一行并保存到 Matlab 中的文件？

> ID：15550425
> 
> 赞同：1
> 
> 时间：2013-03-21T14:34:36.570
> 
> 标签：matlab

我正在尝试在 Matlab 中执行此操作，但它表明

> 使用 fget 时出错。文件标识符无效。使用 fopen 生成有效的文件标识符。

任何人都可以帮助解决这个问题吗？提前致谢。

以下是我的语法：

```
function [ ] = replaceStr(fidInFile, DIF(k), DIF(k+1))
for k = 1:100
    fidInFile = fopen(['Rasch' num2str(k) '.inp'],'r');
    fidOutFile = fopen(['Rasch' num2str(k+1) '.inp'],'w');
    nextLine= fgets(fidInFile);
    while nextLine >= 0   
        nextLine = strrep(nextLine,['DATA=DIF' num2str(k) '.dat'], ['DATA=DIF' num2str(k+1) '.dat']);
        fprintf(fidOutFile,'%s', nextLine);
        nextLine=fgets(fidInFile);
    end
    fclose(fidInFile);                         
    fclose(fidOutFile);                       
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:37:09.797

要读入文件，更改第一行并将其写回，您可以执行以下操作：

```
% open files
fidIn = fopen('test.txt');
fidOut = fopen('test2.txt','w');

% read in file
tline = fgets(fidIn);
index = 1; 
while ischar(tline)
    data{index} = tline;     
    tline = fgets(fid);         
    index = index + 1;
end

% replace first row
data{1,1} = 'Something else';

% write to second file
for l = data
    fprintf(fidOut,'%s\n', l{1,1});
end

fclose(fidIn);
fclose(fidOut); 
```

您收到的错误可能是因为您使用的文件名或路径无效。

# c++ - 类内的typedef - 它应该是完整的

> ID：15550427
> 
> 赞同：0
> 
> 时间：2013-03-21T14:34:41.563
> 
> 标签：c++

我可以写这样的代码吗

```
class Foo
{
    typedef Foo type;
}; 
```

我没有看到标准对此有任何限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:41:25.047

**注意：**编译器：Apple GCC，操作系统：OSX 10.7

GCC 对此没有发现任何问题，我可以在`type`后面的 Foo 定义中使用该类型。但是，您不能使用`type`Foo 之外的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:51:34.887

可以编写该代码。`type`并且`Foo`不是保留字，C++ 允许在结构或类中定义类型。事实上，它们大量用于元编程和类型自省的模板中。有关该语言方面的更多详细信息，请参阅[如何理解 C++ 中的依赖名称。](https://stackoverflow.com/questions/1527849/how-do-you-understand-dependent-names-in-c)

# javascript - 有什么方法可以将 AWS 连接到我的 Slickgrid？

> ID：15550433
> 
> 赞同：0
> 
> 时间：2013-03-21T14:34:45.577
> 
> 标签：javascript, jquery, database, amazon-web-services, slickgrid

我期待将我的 Slickgrid 连接到任何 AWS 数据库。在做了很多谷歌搜索之后，我没有找到太多，所以我决定问一下。

做起来简单吗？如果是这样，我将如何按照 Slickgrid 的示例 3 进行操作？就像从数据库加载数据，然后有一个“保存”按钮（或 onCellChange）将其保存回数据库。

也许我应该考虑替代亚马逊数据库。如果是这样，您会推荐什么以及如何将网格连接到数据库。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:39:33.143

您需要添加一个服务器端代码组件来处理提供数据和保存更改。这可以用 php/ruby/python 或任何你喜欢的方式编写。大多数语言都有连接到任何亚马逊数据库的驱动程序或连接器，无论是 RDS 上的传统关系数据库，还是 simpleDB/DynamoDB 等 NoSQL 存储之一。

# php - 将 XSLT 样式表应用于亚马逊产品广告 API XML 输出

> ID：15550435
> 
> 赞同：0
> 
> 时间：2013-03-21T14:34:48.373
> 
> 标签：php, xml, api, xslt, amazon

我正在尝试将我的 XSLT 样式表应用于 Amazon API xml 输出并在页面上显示电影标题

这是我的 XSLT 文件 (amazon.xsl)：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
<xsl:output method="xml" version="1.0" omit-xml-declaration="yes" indent="yes" media-type="text/html"/>

<xsl:template match="/">
    <xml>
        <root>
            <xsl:apply-templates select="aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title" />
        </root>
        </xml>
</xsl:template>

<xsl:template match="aws:Title">
    <xsl:text>Movie title</xsl:text>
    <xsl:value-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

这是亚马逊 API XML 输出：

```
<ItemLookupResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
   <OperationRequest>
       <HTTPHeaders>
          <Header Name="UserAgent" Value="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22"/>
       </HTTPHeaders>
       <RequestId>a1138e89-4335-4650-80f2-641e3c58b623</RequestId>
       <Arguments>
    <Argument Name="Operation" Value="ItemLookup"/>
    <Argument Name="Service" Value="AWSECommerceService"/>
    <Argument Name="Signature" Value="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="AssociateTag" Value="xxxxxxxxxxxxxx"/>
    <Argument Name="Version" Value="2011-08-01"/>
    <Argument Name="ItemId" Value="B004LWZWGK"/>
    <Argument Name="AWSAccessKeyId" Value="xxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="Timestamp" Value="2013-03-21T13:56:55.000Z"/>
    <Argument Name="ResponseGroup" Value="Small"/>
       </Arguments>
       <RequestProcessingTime>0.0189320000000000</RequestProcessingTime>
       </OperationRequest>
    <Items>
      <Item>
         <ItemAttributes>
           <Title>
            The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy)
           </Title>
         </ItemAttributes>
      </Item>
    </Items>
</ItemLookupResponse> 
```

我找到并使用了以下 PHP 代码来搜索电影标题并将其显示在页面上。但是，它仅以纯文本形式显示。我想对其应用 XSLT 样式，但我不知道如何正确地将其包含在我的 php 代码中。

如果正确使用 XSLT，它将在实际标题上方显示“电影标题”。

*亚马逊.php*

```
include('aws_signed_request.php');

$public_key = 'XXXXXXXXXXXXXXXXXXXX';
$private_key = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$associate_tag = 'xxxxxxxxxxxxxxxxxxxxxxxxx';

// generate signed URL
$request = aws_signed_request('co.uk', array(
        'Operation' => 'ItemLookup',
        'ItemId' => 'B004LWZWGK',
        'ResponseGroup' => 'Small'), $public_key, $private_key, $associate_tag);

// do request (you could also use curl etc.)
$response = @file_get_contents($request);
if ($response === FALSE) {
    echo "Request failed.\n";
} else {

    // parse XML
    $xsl = new DOMDocument;
    $xsl->load('amazon.xsl');

    $proc = new XSLTProcessor();
    $proc->importStyleSheet($xsl);

    $doc = DOMDocument::loadXML($response);
    $transform = $proc->transformToXML($doc);
    $pxml = simplexml_load_string($transform);

    if ($pxml === FALSE) {
        echo "Response could not be parsed.\n";
    } else {
        if (isset($pxml->Items->Item->ItemAttributes->Title)) {
            echo $pxml->Items->Item->ItemAttributes->Title, "\n";
        }
    }

} 
```

*aws_signed_request.php*

```
function aws_signed_request($region, $params, $public_key, $private_key, $associate_tag=NULL, $version='2011-08-01')
{    
    /*
    Parameters:
        $region - the Amazon(r) region (ca,com,co.uk,de,fr,co.jp)
        $params - an array of parameters, eg. array("Operation"=>"ItemLookup",
                        "ItemId"=>"B000X9FLKM", "ResponseGroup"=>"Small")
        $public_key - your "Access Key ID"
        $private_key - your "Secret Access Key"
        $version (optional)
    */

    // some paramters
    $method = 'GET';
    $host = 'webservices.amazon.'.$region;
    $uri = '/onca/xml';

    // additional parameters
    $params['Service'] = 'AWSECommerceService';
    $params['AWSAccessKeyId'] = $public_key;
    // GMT timestamp
    $params['Timestamp'] = gmdate('Y-m-d\TH:i:s\Z');
    // API version
    $params['Version'] = $version;
    if ($associate_tag !== NULL) {
        $params['AssociateTag'] = $associate_tag;
    }

    // sort the parameters
    ksort($params);

    // create the canonicalized query
    $canonicalized_query = array();
    foreach ($params as $param=>$value)
    {
        $param = str_replace('%7E', '~', rawurlencode($param));
        $value = str_replace('%7E', '~', rawurlencode($value));
        $canonicalized_query[] = $param.'='.$value;
    }
    $canonicalized_query = implode('&', $canonicalized_query);

    // create the string to sign
    $string_to_sign = $method."\n".$host."\n".$uri."\n".$canonicalized_query;

    // calculate HMAC with SHA256 and base64-encoding
    $signature = base64_encode(hash_hmac('sha256', $string_to_sign, $private_key, TRUE));

    // encode the signature for the request
    $signature = str_replace('%7E', '~', rawurlencode($signature));

    // create request
    $request = 'http://'.$host.$uri.'?'.$canonicalized_query.'&Signature='.$signature;

    return $request;
} 
```

我知道这是很多代码，但是 PHP 中的所有内容都可以正常工作，并且我确实在页面上显示了电影标题。我只想将我的 XSLT 样式表也应用到它。我对 PHP 很陌生，无法弄清楚如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:50:33.303

您已经创建了处理器并在第 6 行和第 7 行导入了样式表，`amazon.php`但您仍然需要使用[`XSLTProcessor::transformToXML`](http://www.php.net/manual/en/xsltprocessor.transformtoxml.php)

```
// parse XML
$doc = DOMDocument::loadXML($response);
$transform = $proc->transformToXML($doc);
$pxml = simplexml_load_string($transform); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:53:28.737

要从评论中回答您的问题，以下是如何从该输入生成 HTML 页面：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
         xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01"
         exclude-result-prefixes="aws">
    <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <html>
        <head>
          <title></title>
        </head>
        <body>
          <xsl:apply-templates />
        </body>
      </html>
    </xsl:template>

  <xsl:template match="aws:Title">
    <h1>
      <xsl:text>Movie Title</xsl:text>
    </h1>
    <xsl:value-of select="." />    
  </xsl:template>
  <xsl:template match="text()" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
  </head>
  <body>
    <h1>Movie Title</h1>
          The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy)
        </body>
</html> 
```

如果您只想生成一个 HTML 片段以添加到您正在显示的较大页面中，您可以使用以下命令：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
         xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01"
         exclude-result-prefixes="aws">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="aws:Title">
    <div>
      <h1>
        <xsl:text>Movie Title</xsl:text>
      </h1>
      <xsl:value-of select="." />
    </div>
  </xsl:template>
  <xsl:template match="text()" />
</xsl:stylesheet> 
```

产生：

```
<h1>Movie Title</h1>
      The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy) 
```

# c# - 泛型列表 >

> ID：15550439
> 
> 赞同：1
> 
> 时间：2013-03-21T14:35:03.870
> 
> 标签：c#, generics

例如，如果我有`List<T>`which 从 type 获得一些列表`MyClass`，`List<List<MyClass>>`并且`MyClass`是来自 的父类`MyClassB`。为什么我不能执行以下操作？

```
List<List<MyClass>> allLists = new List<List<MyClass>>();

List<MyClassB> myList = new List<MyClassB>();
myList.Add(new MyClassB());

//And now the point which dont work
allLists.Add(myList); 
```

如果我实现一个我可以说的方法`SomeClass<T> ... where T : MyClass`，我的列表问题是否有类似的东西？

这样我就可以将任何子类的列表添加到我的一级列表中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T14:41:22.473

```
class Animal {}
class Tiger : Animal {}
class Giraffe : Animal {}
...
List<Giraffe> giraffes = new List<Giraffe>();
List<List<Animal>> lists = new List<List<Animal>>();
lists.Add(giraffes); // Illegal! 
```

你的问题是“为什么这是非法的？” 答案是：假设这是合法的，让我们继续……

```
List<Animal> animals = lists[0]; // Obviously typesafe.
animals.Add(new Tiger()); // Obviously typesafe 
```

我们刚刚在长颈鹿列表中添加了一只老虎。

由于后两步显然是类型安全的，所以不能类型安全的地方一定是`Add(giraffes)`.

现在，从 C# 4 开始，这确实有效：

```
List<IEnumerable<Animal>> lists = new List<IEnumerable<Animal>>();
lists.Add(giraffes); 
```

为什么这是合法的？因为没有`Add`方法 on `IEnumerable<T>`：

```
IEnumerable<Animal> animals = lists[0]; 
```

现在我们不能违反类型安全，因为如果我们只通过`IEnumerable<T>`.

顺便说一句，几乎每天都有人问这个问题。在网络上搜索“C# covariance and contravariance”，你会得到更多关于它的信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T14:39:01.953

你不能这样做的原因如下：想象那`allLists.Add(myList)`行得通。然后编译器会知道那`allLists[0]`是 a `List<MyClass>`，所以下面的就可以了：

```
allLists[0].Add(new MyClassX()); 
```

那将是一个运行时错误，因为`allLists[0]`实际上是一个`List<MyClassB>`. 它不能容纳`MyClassX`物体。

如果您将代码更改`myList`为 a `List<MyClass>`，则您的代码将起作用：

```
List<MyClass> myList = new List<MyClass>();
myList.Add(new MyClassB()); // This works, because MyClassB extends MyClass
allLists.Add(myList); // This works, too 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T14:39:51.990

您必须使用允许派生类的接口（称为[协变接口](http://msdn.microsoft.com/en-us/library/dd997386.aspx)）作为内部集合：

```
var allLists = new List<IEnumerable<MyClass>>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:37:47.800

```
List<List<MyClass>> allLists = new List<List<MyClass>>(); 
```

您添加的列表类型不同。你可以这样做：

```
interface IMyClass
{
    //some properties
} 
```

您的所有子类都必须继承自 IMyClass。然后你会有这样的列表。

```
List<List<IMyClass>> allLists = new List<List<IMyClass>>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:40:34.107

问题是 AllLists 是强类型的以包含 MyClass 的列表。MyList 是强类型以包含 MyClassB 的实例。

尽管您可以将 List 存储在 List> 中，但当前代码中存在类型不匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T14:40:39.850

这将解决问题：

```
List<MyClass> myList = new List<MyClass>(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T14:41:05.270

您需要告诉编译器 MyClass 是 MyClassB 我认为的父级。[这篇](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx#csharp_generics_topic4)关于`where`关键字的文章可能会对您有所帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T14:45:54.633

虽然 MyClassB 是 MyClass 的子类型，但这并不意味着 List 是 List 的子类型。您要问的问题是为什么 List 不与 T 协变（这将导致 List 成为 List 的子类型，其中 T 是 Y 的子类型。查找术语协变和逆变。

答案是双重的。首先 List 在 C# 实现协变和逆变之前实现。但最重要的是，只有当 T 是“out”类型时，你才能是协变的。由于您可以将内容塞入列表中，因此它不是输出类型。IEnumerable 只发出 T 类型的对象。因此，它可以是协变的。

# javascript - 将不同的元素传递给具有相同 id 的 Javascript 函数

> ID：15550450
> 
> 赞同：1
> 
> 时间：2013-03-21T14:35:23.120
> 
> 标签：javascript, jsp

我有一个 jsp 文件，我在其中以表格的形式从数据库中检索数据。我的jsp如下：

```
<%
ResultSet rs1 = stmt.executeQuery("select * from book where category='Fiction'");
%>

<h1><font size="3">
<form name="f1" id="f1" method="post">
<table border="1">
    <tr>
        <th>Name of the Book</th>
        <th>Author</th>
        <th>ISBN</th>
        <th>Price</th>
        <th>Publication</th>
        <th>Description</th>
    </tr>
    <%
    while(rs1.next())
    {
    %>
    <tr> 
        <td id="bname"><%= rs1.getString(1) %></td>
        <td id="aname"><%= rs1.getString(2) %></td>
        <td id="isbn"><%= rs1.getString(3) %></td>
        <td id="price"><%= rs1.getString(4) %></td>
        <td id="pname"><%= rs1.getString(5) %></td>
        <td id="desc"><%= rs1.getString(7) %></td>
        <td><input type="button" value="Add to Cart" onclick="cart()"></input></td>
    </tr>  
    <%
    }
    %> 
```

其输出将是行数。当我单击“添加到购物车”按钮时，它应该将单元格元素传递给 javascript 函数，从而通过 JS 函数传递给 servlet。

我在这里面临的问题是，因为每个 'td' 的 id 都是相同的，虽然我点击了他表的第二行，但只有第一行的元素被传递到 javascript 函数中。

这是我的javascript函数：

```
function cart()
{
    var bname = window.document.getElementById("bname").textContent;
    var isbn = window.document.getElementById("isbn").textContent;
    var price = window.document.getElementById("price").textContent;
    alert(bname);
    alert(isbn);
    alert(price);
} 
```

上面的“警报”仅在我单击第二行中的按钮时才显示第一行的值。

我在网上尝试了很多替代方案，但无法解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:42:08.870

1.  **永远不要**在一页中有两次相同的 ID
2.  将唯一键（最好是行的 id）连接到 TD 的 id。在您的代码中使用该计算出的 id。应该很简单

代码：

```
//assuming 0 is the ID index in the row  
<td id="bname<%= rs1.getString(0) %>"><%= rs1.getString(1) %></td>

<td><input type="button" value="Add to Cart"
           onclick="cart(<%= rs1.getString(0) %>)"></input></td>

...
...
...

function cart(id) {  
    var bname = window.document.getElementById("bname"+id).textContent;
    var isbn = window.document.getElementById("isbn"+id).textContent;
    var price = window.document.getElementById("price"+id).textContent;

    alert(bname);   
    alert(isbn);
    alert(price);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:47:09.343

为什么不使用它，您寻求的值与单击的元素相关。不需要为任何元素提供 id。

请注意，我将单击的按钮传递给卡片功能：

```
 onclick="cart(this)" 
```

这是完整的代码。

```
<!doctype html>
<html lang="en">
    <head> 
        <meta charset="utf-8" />  
        <title>Test the script</title>  
    <script> 
        function cart(button)
        {
            var tds=button.parentNode
              .parentNode.getElementsByTagName("td");
            var bname = tds[0].textContent;
            var isbn = tds[1].textContent;
            var price = tds[2].textContent;
            console.log(bname);
            console.log(isbn);
            console.log(price);
            console.log(tds);
        }
    </script>
    </head>
    <body> 
<h1><font size="3">Title</font></h1>
<form name="f1" id="f1" method="post">
<table border="1">
    <tr>
        <th>Name of the Book</th>
        <th>Author</th>
        <th>ISBN</th>
        <th>Price</th>
        <th>Publication</th>
        <th>Description</th>
    </tr>
    <tr> 
        <td >aname1</td>
        <td >bname1</td>
        <td >isbn1</td>
        <td >price1</td>
        <td >pname1</td>
        <td >desc1</td>
        <td><input type="button" value="Add to Cart" onclick="cart(this)"></input></td>
    </tr>  
    <tr> 
        <td >aname2</td>
        <td >bname3</td>
        <td >isbn4</td>
        <td >price2</td>
        <td >pname2</td>
        <td >desc2</td>
        <td><input type="button" value="Add to Cart" onclick="cart(this)"></input></td>
    </tr>  
    </table>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:12:14.147

最好的解决方案是使用`class`属性而不是`id`：

*   An`id`应该准确地标识每页的一个元素。
*   A`class`标识每页具有相同类型或“类”的多个元素。

您可以查询整个 DOM 的子集（例如`<tr>`被点击的），以查找具有您感兴趣的类的元素。通常使用[jQuery](http://api.jquery.com/category/selectors/)或[Dojo](http://dojotoolkit.org/documentation/tutorials/1.8/using_query/)之类的库来简化查询。

* * *

如果你只是想要一些有用的东西：

*   [HMR的方案](https://stackoverflow.com/a/15550716/117030)不错，就是有点死板。它假设每个`<td>`(bname, aname, isbn...) 都存在并按特定顺序放置。
*   我在下面修改了[Itay 的解决方案](https://stackoverflow.com/a/15550716/117030)，以便于复制粘贴。它通过为每个 id 添加一个唯一的前缀（isbn）来使其唯一：

JSP：

```
<tr> 
    <td id="<%= rs1.getString(3) %>_bname"><%= rs1.getString(1) %></td>
    <td id="<%= rs1.getString(3) %>_aname"><%= rs1.getString(2) %></td>
    <td id="<%= rs1.getString(3) %>_isbn"><%= rs1.getString(3) %></td>
    <td id="<%= rs1.getString(3) %>_price"><%= rs1.getString(4) %></td>
    <td id="<%= rs1.getString(3) %>_pname"><%= rs1.getString(5) %></td>
    <td id="<%= rs1.getString(3) %>_desc"><%= rs1.getString(7) %></td>
    <td><input type="button" value="Add to Cart"
               onclick="cart('<%= rs1.getString(3) %>_')"></input></td>
</tr> 
```

JavaScript：

```
function cart(prefix)
{
    var bname = window.document.getElementById(prefix + "bname").textContent;
    var isbn = window.document.getElementById(prefix + "isbn").textContent;
    var price = window.document.getElementById(prefix + "price").textContent;
    alert(bname);
    alert(isbn);
    alert(price);
} 
```

# linq - MongoDb c# Linq 查询并返回集合的子对象

> ID：15550454
> 
> 赞同：2
> 
> 时间：2013-03-21T14:35:26.427
> 
> 标签：linq, mongodb, mongodb-.net-driver, mongodb-query

假设我有一个典型的客户和订单场景。我有一个客户集合，每个客户文档都有一个订单列表。现在我要查询订单日期在上周的客户，即大于DateTime.UtcNow.AddDays(-7)，小于DateTime.UtcNow。

```
var startDate = DateTime.UtcNow.AddDays(-7);
var endDate = DateTime.UtcNow;
var query = collection.AsQueryable<Customer>()
    .Where(c => c.Orders.Any(o => o.OrderDate > startDate && o.OrderDate < endDate))
    .SelectMany(b => b.Orders); 
```

这会导致以下错误：

```
System.NotSupportedException: The SelectMany query operator is not supported.
at MongoDB.Driver.Linq.SelectQuery.TranslateMethodCall(MethodCallExpression methodCallExpression) in C:\\build\\mongo-csharp-driver\\Driver\\Linq\\Translators\\SelectQuery.cs:line 687 
```

我目前的解决方案非常讨厌：

```
var customers =
    collection.AsQueryable<Customer>()
        .Where(c => 
            c.Orders.Any(o => 
                o.OrderDate > startDate && 
                o.OrderDate < endDate))
        .ToList();

var results = new List<Order>();
foreach (var orders in customer.Select(c => 
    c.Orders.Where(o => 
        o.OrderDate > startDate && 
        o.OrderDate < endDate)))
{
    results.AddRange(orders);
}

return results; 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:23:58.520

作为一个几乎一般的规则，我不会在客户中嵌入订单。*在不*获取他们曾经下过的所有订单的情况下找到所有客户似乎是一个非常自然的查询。此外，订单通常具有相当复杂的生命周期并代表长期运行的业务交易，因此它们值得单独记录。

当然，这在一定程度上取决于您的确切要求，但客户是如此重要，以至于您可以争辩嵌入付款、查询、取消、发票以及基本上任何其他以某种方式与客户相关的业务交易，所以您最终将所有数据填充到一个无法管理的集合中。

无论如何，查询`db.Orders.find({"OrderDate" : {$gt : lastWeek} });`然后使用`$in`运营商通过`Order.CustomerId`.

如果上周的订单数量很大（比如 > 10,000），那么`MostRecentOrder`在客户中引入一个字段或使用 map/reduce 来代替是有意义的。也可以对订单进行分页，然后`$in`对生成的较小大小的块使用运算符。如果您这样做，请确保按照一些稳定的标准进行排序，例如`OrderDate`.

# android - 使用以前的值从数据库中填充微调器

> ID：15550456
> 
> 赞同：0
> 
> 时间：2013-03-21T14:35:33.410
> 
> 标签：android, database, android-spinner

我有一个带有编辑文本和微调器的活动。我在每个中设置值，然后将它们保存在数据库中。现在在具有完全相同的 xml 文件的第二个活动中，我想用数据库中的值自动填充它们，以便修改它们。我使用 .setText 来填充编辑文本，它工作正常。我可以用什么来填充微调器？

示例代码如下...

```
package com.alex.example;
import ...

public class Profile extends Activity {

    DatabaseHelperUser db = new DatabaseHelperUser(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.profile);
        final EditText edtName = (EditText) findViewById(R.id.edtName);
        final Spinner spnSex = (Spinner) findViewById(R.id.spnSex);
        final ImageButton btnConfirm = (ImageButton) findViewById(R.id.btnChickListed);

        Bundle b = getIntent().getExtras();
        final int userid = b.getInt("id");
        final User user = db.getUser(userkid);

        edtName.setText(user.get_name());
        spnSex.
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:51:23.077

将您的项目加载到数组中`array_spinner` 然后：

```
ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, array_spinner);
spnSex.setAdapter(adapter);
spnSex.setSelection(value); // if you want to select a value that you stored somewhere 
```

# android - Android：多色按钮或嵌套视图/按钮

> ID：15550458
> 
> 赞同：0
> 
> 时间：2013-03-21T14:35:36.720
> 
> 标签：android, android-layout, button, layout, textview

我想设计一个看起来像这样的按钮：

[投递箱上的图片](https://www.dropbox.com/s/hgz3yosmhzgkvby/Button.jpg)

（抱歉，还不能发图片……）

有人知道如何布局吗？使用按钮还是文本视图？是否可以选择将 2 个 TextView 分组？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:43:07.250

您创建一个布局并按照您希望它出现在按钮中的方式填充它，生成布局的位图图像，并将该位图设置为 ImageButton 中的图像。

周围有很多布局教程。

有如何进行位图转换的示例：

[从布局中获取位图](https://stackoverflow.com/questions/8119930/get-bitmap-from-layout)

[http://www.brighthub.com/mobile/google-android/articles/30676.aspx](http://www.brighthub.com/mobile/google-android/articles/30676.aspx)

对于图像按钮：

[http://www.mkyong.com/android/android-imagebutton-example/](http://www.mkyong.com/android/android-imagebutton-example/)

尽管这使用了可绘制资源。您只需调用 setImageBitmap 即可。看：

[http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

我可以在今晚晚些时候在我的电脑前提供一个例子。

# autohotkey - AutoHotKey => 将组合键分配给组合键

> ID：15550459
> 
> 赞同：0
> 
> 时间：2013-03-21T14:35:37.793
> 
> 标签：autohotkey

我使用 Alt+J/K/L/I 而不是左/下/右/上键。这很简单：

```
!k::Send {Down Down} 
```

现在我决定在这个序列中添加 Shift 并使用它来扩展选择 Left/Down ...我尝试了不同的方式，阅读了多个帖子 - 没有任何帮助。例如这个：

```
!k:: 
if GetKeyState("Shift")
{
        Send {+Down Down}
        return
}
else
{
    Send {Down Down}
}
return 
```

或这个：

```
!k::
    If GetKeyState("Shift")
        Send {+Down Down}
    Else
        Send {Down Down}
Return 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:52:46.837

您必须通过添加 * 来告诉您的热键“接受”其他修饰符。
否则`Shift`++`Alt`将`k`被忽略（除非你`+!k::`在`!k::`.

```
*!k:: 
if GetKeyState("Shift","P")
{
        ;ToolTip, Shift
        Send {+Down Down}
        return
}
else
{
    ;ToolTip, Normal
    Send {Down Down}
}
return 
```

# list - 对象创建

> ID：15550461
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:35:38.563
> 
> 标签：list, object, input, python-3.x

这只是为了“学习的乐趣”。我完全是从书籍和教程中自学的，而且对编程还是很陌生。我正在尝试探索从列表中创建对象的概念。这是我所拥有的：

```
class Obj:   # Creates my objects
    def __init__(self, x):
        self.name = x
        print('You have created a new object:', self.name)

objList = []
choice = 'y'

while choice != 'n':   # Loop that runs until user chooses, 'n' to quit
    for i in objList:
        print(i)   # Iterates through the list showing all of the objects added
    for i in objList:
        if Obj(i):
            print(i, 'has already been created.')   # Checks for existance of object, if so skips creation
        else:
            createObj = Obj(i)   # Creates object if it doesn't exist
    choice = input('Add object? (y / n): ')
    if choice == 'y':
        newObject = input('Name of object to add: ')
        if newObject in objList:   # Checks for existance of user enrty in list
            print(newObject, 'already exists.')   # Skips .append if item already in list
        else:
            objList.append(newObject)   # Adds entry if not already in list

print('Goodbye!') 
```

当我运行它时，我得到：

```
Add object? (y / n): y
Name of object to add: apple
apple
You have created a new object: apple   # At this point, everything is correct
apple has already been created.   # Why is it giving me both conditions for my "if" statement?
Add object? (y / n): y
Name of object to add: pear
apple
pear
You have created a new object: apple   # Was not intending to re-create this object
apple has already been created.
You have created a new object: pear   # Only this one should be created at this point
pear has already been created.   # Huh???
Add object? (y / n): n
Goodbye! 
```

我已经做了一些研究并阅读了几条关于创建 dict 来做我想做的事情的评论。我已经构建了一个使用 dict 执行此操作的程序，但出于学习目的，我试图了解这是否可以通过创建对象来完成。似乎一切正常，除了当程序通过遍历列表来检查对象的存在时，它会失败。

然后我这样做了：

```
>>> Obj('dog')
You have created a new object: dog
<__main__.Obj object at 0x02F54B50>
>>> if Obj('dog'):
    print('exists')

You have created a new object: dog
exists 
```

这让我想到了一个理论。当我输入“if”语句时，它是否创建了一个名为“dog”的对象的新实例？如果是这样，我如何检查对象的存在？如果我将对象存储在变量中，我的顶部片段中的循环不会在每次迭代时覆盖变量吗？我的“打印”语句是因为对象存在还是因为它的下一行代码而运行？抱歉我的问题太长了，但如果我提供更好的信息，我相信我可以得到更好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:19.793

对象只是数据和函数的容器。尽管`Obj("dog")`和`Obj("dog")`是等价的，但它们并不相同。换句话说，每次你打电话给`__init__`你一个全新的*副本*。所有不是 的对象`None`，`0`或`False`评估为的对象，`True`因此您的`if`语句成功。

您仍然必须使用字典来查看您过去是否创建过狗。例如，

```
objects = { "dog" : Obj("dog"), "cat" : Obj("cat") }
if "cat" in objects:
    print objects["cat"].x  # prints cat 
```

# sql - DB2 更新触发器

> ID：15550462
> 
> 赞同：0
> 
> 时间：2013-03-21T14:35:39.357
> 
> 标签：sql, database, triggers, db2, sql-pl

我试图在 DB2 数据库中创建一个触发器，该触发器在更新一个表中的列时运行，然后用某些值填充另一个表。

例如，有一个带有一`FLEET_ID`列的功率单位表。每次`FLEET_ID`更改时，我都需要在`TRANS_AUDIT`表中创建一个新行。

`TRANS_AUDIT`架构如下：

```
CREATE TABLE LYNX.TRANS_AUDIT (
    TA_ID INTEGER NOT NULL,
    TA_KEY_VALUE VARCHAR(100),
    TA_TABLE_CHANGED VARCHAR(40),
    TA_FIELD_CHANGED VARCHAR(40),
    TA_OLD_FIELD_VALUE VARCHAR(100),
    TA_NEW_FIELD_VALUE VARCHAR(100),
    TA_USER_WHO_CHANGED VARCHAR(128),
    TA_DATE_CHANGED TIMESTAMP,
    TA_COMMENT VARCHAR(40),
    TA_OLD_FIELD_DOUBLE DOUBLE DEFAULT 0,
    TA_NEW_FIELD_DOUBLE DOUBLE DEFAULT 0,
    PRIMARY KEY (TA_ID)
); 
```

这是我到目前为止所拥有的，但我似乎无法让它工作，我遇到了一个`function sequence`错误。

```
CREATE TRIGGER PU_UPD_FLEETID
AFTER UPDATE OF FLEET_ID ON PUNIT 
REFERENCING OLD AS O NEW AS N
FOR EACH ROW 
MODE DB2SQL 
BEGIN ATOMIC 

    DECLARE 
    vTA_ID INTEGER;

    IF(N.FLEET_ID <> O.FLEET_ID) THEN

        SELECT MAX(TA_ID)+1 FROM TRANS_AUDIT INTO vTA_ID; --generate a unique sequential id 
            INSERT INTO LYNX.TRANS_AUDIT (TA_ID, TA_KEY_VALUE, TA_TABLE_CHANGED, TA_FIELD_CHANGED, TA_OLD_FIELD_VALUE, TA_NEW_FIELD_VALUE, TA_USER_WHO_CHANGED, TA_DATE_CHANGED, TA_COMMENT, TA_OLD_FIELD_DOUBLE, TA_NEW_FIELD_DOUBLE)
            VALUES (TA_ID, N.UNIT_ID , 'PUNIT', 'FLEET_ID', O.FLEET_ID, N.FLEET_ID , SESSION_USER ,CURRENT TIMESTAMP , '', '0' ,'0' );
    END IF;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:40:01.690

在您的 INSERT 语句中，我相信 VALUES 中的第一个条目应该是`vTA_ID`，而不是`TA_ID`。

分享和享受。

# java - 使用 Hibernate 实现 Tapestry 服务

> ID：15550464
> 
> 赞同：0
> 
> 时间：2013-03-21T14:35:41.593
> 
> 标签：java, hibernate, tapestry

我说的是 T5，Java 1.7。

我找不到任何关于在 Tapestry 服务中使用休眠的足够详细的教程。我需要的是创建可以独立处理休眠的 Tapestry 服务。例如，这可能是调度程序服务。该服务将处理数据库中的一些对象及其状态，并在应用程序后台工作。

问题是，如何正确地将它与 Hibernate 绑定？应该注入哪个 Hibernate 对象以便在该服务中进一步工作？

* * *

目前的做法是在这个服务内部注入一个`HibernateSessionSource`对象（通过服务的构造函数传递它的实例），然后手动创建会话，开始事务等等。例如：

```
public synchronized void deleteJob(long id) {
    Session session = hss.create();
    JobItem job = (JobItem) session.get(JobItem.class, id);
    if (job != null) {
        Transaction tx = session.beginTransaction();
        try {
            session.delete(job);
            tx.commit();
        } catch (HibernateException e) {
            tx.rollback();
        } finally {
            session.close();
        }
    }
} 
```

它看起来很丑，不像Tapestry的风格。什么是聪明的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:01:37.873

如果您正在处理非 Tapestry 托管服务，则可以使用[HibernateSessionManager 。](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/hibernate/HibernateSessionManager.html)

```
try {
   do_stuff(hibernateSessionManager.getSession());
   hibernateSessionManager.commit();
}catch(Exception ex){
   hibernateSessionManager.abort();
} 
```

对于挂毯托管服务和页面/组件，您可以阅读详细文档。这里有几个链接

1.  [http://tapestry.apache.org/using-tapestry-with-hibernate.html](http://tapestry.apache.org/using-tapestry-with-hibernate.html)
2.  [http://tapestry.apache.org/hibernate-user-guide.html](http://tapestry.apache.org/hibernate-user-guide.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:39:13.553

这个问题由两部分组成：

**如何在 Tapestry 托管服务中使用休眠？**

您可以使用`@Inject`注释在您的服务中注入休眠会话：

```
@Inject
private Session session; 
```

或作为构造函数参数：

```
public MyService buildMyService(Session session) {
  return new MyAwsomeService(session);
} 
```

然后你可以在服务中使用它。此会话由 Tapestry 作为 perthread 服务进行管理。它将在首次使用时打开，并在请求结束后关闭。

**如何在 Tapestry 托管服务中使用休眠转换？**

您可以使用注入的[HibernateSessionManager](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/hibernate/HibernateSessionManager.html)手动执行此操作：

```
@Inject
private HibernateSessionManager manager;

public void doSomeWork(Entity entity) {
  try {
    session.delete(entity);
    manager.commit();
  } catch (Exception e) {
    manager.abort();
  }
} 
```

或者您可以使用[HibernateTransactionAdvisor](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/hibernate/HibernateTransactionAdvisor.html)注释所有事务方法`@CommitAfter`并[为服务提供建议](http://tapestry.apache.org/service-advisors.html)：

```
public interface MyService {

  @CommitAfter
  void doSomeWork(Entity entity);

}

public class MyTapestryModule {
  @Match("*Service")
  public void adviseTransactions(HibernateTransactionAdvisor advisor,
                                 MethodAdviceReceiver receiver) {
    advisor.addTransactionCommitAdvice(receiver);
  }
} 
```

或者你可以使用[HibernateTransactionDecorator](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/hibernate/HibernateTransactionDecorator.html)[装饰服务](http://tapestry.apache.org/tapestry-ioc-decorators.html)：

```
public class MyTapestryModule {
  @Match("*Service")
  public <T> T decorateTransactions(Class<T> serviceInterface,
                                    T delegate,
                                    String serviceId,
                                    HibernateTransactionDecorator decorator) {
    return decorator.build(serviceInterface, delegate, serviceId);
  }
} 
```

这个怎么运作。它将在方法调用之前启动新事务并在之后尝试提交。如果在方法调用期间发生任何错误，该事务将被回滚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:38:35.053

您可以直接@Inject Session 而不是 HibernateSessionManager。

Session Tapestry 提供的实际上是一个每个线程的延迟加载代理。底层会话由 Tapestry 管理，并在每次请求后由 PerThreadManager 清理。

这几乎是魔术！

# c++ - 手动使用多种类型比多态更快？

> ID：15550469
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:35:55.520
> 
> 标签：c++

我需要列出要渲染的对象......现在我开始怀疑，不管风格或个人喜好，只考虑性能，有什么替代方案更快？

多种类型/switch语句：

```
void Object::Render()
{
    switch(type)
    {
        case BUTTON:
            RenderButton(this);
            break;
        case NOT_BUTTON:
            RenderNotButton(this);
            break;
        case WIDGET_ABC:
            RenderWidgetAbc(this);
            break;
    }
} 
```

或多态性：

```
virtual void Object::Render();

class Button : public Object
{
     void Render();
} 
```

编辑 1：如果可能有帮助，我提到这将在 ARM v6 设备中运行

编辑 2：目前该项目上的对象为零（项目目标的一部分是以更具功能性的编程方式使用 C++ 进行实验），这就是考虑这一点的原因。

此外，这将是代码中最常被调用的部分，如果它被实现为 switch 语句，则不会调用其他方法作为这个，因此它确实对性能至关重要。

编辑3：这部分代码实际上是处理要转储到GPU的顶点和UV列表，GPU比CPU快，我想尽可能快地向它抛出顶点和UV。渲染不受 CPU 限制。它还将具有多边形对象，而不仅仅是简单的类似操作系统的 GUI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:39:03.477

我运行以下代码来比较两者。正如我预期的那样，虚函数会稍微快一些（我将在下面解释原因）。

```
#include <stdio.h>

#include <sys/time.h>
#include <stdio.h>
#include <unistd.h>

class Object
{
    public:
        enum Type
        {
            BUTTON,
            NOT_BUTTON,
            WIDGET_ABC
        };

        Object(Type type);

        virtual void renderVirtual() = 0;
        void renderSwitch();

        int counter;

    private:
        void renderButton();
        void renderNotButton();
        void renderWidgetAbc();

        Type type;
};

class Button : public Object
{
    public:
        Button();

        virtual void renderVirtual();
};

class NotButton : public Object
{
    public:
        NotButton();

        virtual void renderVirtual();
};

class WidgetAbc : public Object
{
    public:
        WidgetAbc();

        virtual void renderVirtual();
};

Object::Object(Type type)
    :type(type),
     counter(0)
{

}

void Object::renderSwitch()
{
    switch(type)
    {
        case BUTTON:
            renderButton();
            break;
        case NOT_BUTTON:
            renderNotButton();
            break;
        case WIDGET_ABC:
            renderWidgetAbc();
            break;
    }
}

void Object::renderButton()
{
    counter += 1;
}

void Object::renderNotButton()
{
    counter += 2;
}

void Object::renderWidgetAbc()
{
    counter += 3;
}

Button::Button()
    :Object(BUTTON)
{

}

void Button::renderVirtual()
{
    counter += 1;
}

NotButton::NotButton()
    :Object(NOT_BUTTON)
{

}

void NotButton::renderVirtual()
{
    counter += 2;
}

WidgetAbc::WidgetAbc()
    :Object(WIDGET_ABC)
{

}

void WidgetAbc::renderVirtual()
{
    counter += 3;
}

static struct timeval start, end;
static long mtime, seconds, useconds;

static void startTime()
{
    gettimeofday(&start, NULL);
}

static void printTimeDiff()
{
    gettimeofday(&end, NULL);
    seconds  = end.tv_sec  - start.tv_sec;
    useconds = end.tv_usec - start.tv_usec;
    mtime = ((seconds) * 1000 + useconds/1000.0) + 0.5;
    printf("Elapsed time: %ld milliseconds\n", mtime);
}

int main()
{
    const int size = 10000000;
    Object *button = new Button();
    Object *notButton = new NotButton();
    Object *widgetAbc = new WidgetAbc();

    startTime();

    for(int i = 0; i < size; i++)
    {
        button->renderVirtual();
        notButton->renderVirtual();
        widgetAbc->renderVirtual();
    }

    printf("Virtual Function:\n");
    printTimeDiff();
    printf("button counter = %d\n", button->counter);
    printf("notButton counter = %d\n", notButton->counter);
    printf("widgetAbc counter = %d\n", widgetAbc->counter);

    startTime();

    for(int i = 0; i < size; i++)
    {
        button->renderSwitch();
        notButton->renderSwitch();
        widgetAbc->renderSwitch();
    }

    printf("Switch Function:\n");
    printTimeDiff();
    printf("button counter = %d\n", button->counter);
    printf("notButton counter = %d\n", notButton->counter);
    printf("widgetAbc counter = %d\n", widgetAbc->counter);

    return 0;
} 
```

当我使用“g++ main.cpp”构建时，我得到了以下结果

```
Virtual Function
Elapsed time 132 milliseconds
button counter = 10000000
notButton counter = 20000000
widgetAbc counter = 30000000
Switch Function
Elapsed time 206 milliseconds
button counter = 20000000
notButton counter = 40000000
widgetAbc counter = 60000000 
```

然后我添加了-02（用于优化）并得到了以下结果

```
Virtual Function
Elapsed time 58 milliseconds
button counter = 10000000
notButton counter = 20000000
widgetAbc counter = 30000000
Switch Function
Elapsed time 76 milliseconds
button counter = 20000000
notButton counter = 40000000
widgetAbc counter = 60000000 
```

在这两种情况下，虚函数都更快。

尽管虚函数比非虚函数慢，但开销很小。虚函数很可能是函数指针（尽管编译器可能会以不同的方式做）。因此，当您调用虚函数时，唯一的额外开销是指针取消引用。这是编译器可以为虚拟调用执行的操作的示例。编译器可以做得更优雅一点，但你可以明白。

```
#include <stdio.h>

class Object
{
    public:
        // function pointer acting as virtual function call
        void (*funcPtr) (void *this_ptr);
};

class Button : public Object
{
    public:
        Button();
        static void virtualFunc(void *this_ptr);

        int counter;
};

Button::Button()
    :counter(0)
{
    // set object function pointer to our "virtual function"
    funcPtr = &Button::virtualFunc;
}

void Button::virtualFunc(void *this_ptr)
{
    Button *button_ptr = reinterpret_cast<Button*>(this_ptr);
    button_ptr->counter++;
}

int main()
{
    Object *button = new Button();

    // virtual call using a function pointer
    button->funcPtr(button);

    printf("button counter = %d\n", static_cast<Button*>(button)->counter);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:38:54.210

我认为性能差异将足够小，可以忽略不计。但是可维护性、可测试性和设计会受到很大影响，所以我不会使用第一个版本。

我的经验表明，每次我尝试使用如此小的优化来超越编译器时，我最终都会让主机变得更小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T14:39:19.977

您的第一个代码是维护和设计的噩梦。考虑一下需要添加新类型的情况！
至于表现。只有分析才能为您各自的平台和环境提供明确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:40:12.950

带开关的版本应该更快，因为多态性需要将对象移动到缓存中，但这实际上是一个微优化。

我会选择多态，因为代码可以设计得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:40:18.697

你说的更快是什么意思？

使用多态性更快只是因为

*   它更好地封装了行为
*   可维护性肯定更好（所以它对你来说更快，这很重要）
*   它允许以简单的方式进行更复杂的设计

仅从性能的角度来看，多态性的实现是通过查找表完成的，所需的是双重间接引用以获得动态调用方法的地址。**这意味着多态性的时间是恒定**的，即使它不是微不足道的，因为该方法无法加载到缓存中。

切换调用适当的方法只是忘记了 OOP。这样做是没有意义的。仅仅因为缓存命中/未命中，它可能会更快一些 CPU 周期，但几乎从不这样做是不值得的。

# xml - SOAP 主体有另一个 xml，并且有撇号

> ID：15550485
> 
> 赞同：1
> 
> 时间：2013-03-21T14:36:30.350
> 
> 标签：xml, soap, apostrophe

我们在 SOAP 正文中发送 xml，因此我们将 xml 标记替换为`<`,`>`到`&lt;`&`&gt;`一切都很好，直到我们遇到撇号。

这个 XML 很好：

`&lt;ScemaLocation:Name _FirstName='John' _LastName='OBarber' /&gt;`

但是这个抛出了一个错误，因为它的姓氏中有撇号：

`&lt;ScemaLocation:Name _FirstName='John' _LastName='O'Barber' /&gt;`

我们尝试了以下所有选项，但没有任何帮助

*   `O'Barber`=>`O&apos;Barber`
*   `O'Barber`=>`O/'Barber`
*   `O'Barber`=>`O<![CDATA[']]>Barber`
*   `O'Barber`=>`O&lt;![CDATA[']]&gt;Barber`
*   `O'Barber`=>`<![CDATA[O'Barber]]>`
*   `O'Barber`=>`O&lt;CDATA[O'Barber]]&gt;`
*   `O'Barber`=>`O&#39;Barber`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:08:37.387

我们有两个选项来解决这个问题

选项 1：ScemaLocation:Name _FirstName='John' _LastName='O'Barber'; 选项 2：我们将整个内部 xml 放在 CData 部分。所以不需要用 < 替换 < 并且我们可以使用常规转义序列 ' as ' 所以在我们的例子中是 O'Barber

希望这可能对其他人有用。谢谢！

# java - 我正在使用 OC4J 10.1.3.5.0，但我有一个例外

> ID：15550491
> 
> 赞同：1
> 
> 时间：2013-03-21T14:36:42.380
> 
> 标签：java, spring, hibernate, oc4j

我正在使用 OC4J 10.1.3.5.0 并且 jpa 2 有问题。我将 hibernate-jpa-2.0-api-1.0.1.Final.jar 放在类路径中。当部署我的应用程序并在我的代码中使用 @OneToMany 注释时，我得到了这个异常：java.lang.NoSuchMethodError:javax.persistence.OneToMany.orphanRemoval()Z

当我从代码中删除它时，我的应用程序运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:12:36.487

您在类路径中有不兼容的 JPA 库。错误“java.lang.NoSuchMethodError”表示“javax.persistence.OneToMany”类中没有方法“orphanRemoval()”。您应该能够根据堆栈跟踪检查库版本。

检查 OC4J 部署的 war 文件目录中的类。还要确保 OC4J 容器 lib 目录中没有冲突的库（它们将优先于您打包的 jar）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:38:30.477

OC4J_PATH\j2ee\home\lib\persistance.jar 这个jar文件jpa 1并加载了服务器启动我用同名的Jpa 2 jar替换了这个jar，我的应用程序运行正常

# delphi - 将图标添加到 Firemonkey TTabControl 的选项卡

> ID：15550494
> 
> 赞同：2
> 
> 时间：2013-03-21T14:36:50.167
> 
> 标签：delphi, icons, tabcontrol, firemonkey, firemonkey-fm2

要将图标添加到 Firemonkey 中的 TButton，可以将 TImage 添加到按钮。但是如何将图标添加到 TTabControl 的选项卡？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:28:31.037

至少您需要修改样式（以添加图像）并可能创建一个从 TTabControl 继承的自定义控件来设置图像数据。

# asp.net - asp.net vb 替换字符串中的字符串并使其变为粗体

> ID：15550497
> 
> 赞同：1
> 
> 时间：2013-03-21T14:37:05.200
> 
> 标签：asp.net, regex, vb.net, replace

我正在寻找一个函数来替换字符串中的字符串，并且只将其设为粗体。我已经有了这个功能：

```
Function MakeBold(ByVal input As String, ByVal find As String) As String
    Return Regex.Replace(input, find, "<strong>" + find + "</strong>", RegexOptions.IgnoreCase)
End Function 
```

这有效，但它删除了字符串的大写字母。例如，如果我用字符串“Lorem ipsum dolor sit Dolor”运行它，替换部分是“dolor”，它将返回“Lorem ipsum **dolor** sit **dolor** ”。第二个“dolor”失去了资本，因为它被一个没有资本的人所取代。如何在字符串中保留大写字母？因此，例如“DoLoR”也仍然是那个，而不是“dolor”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:52:40.387

你可以使用这个：

```
Function MakeBold(ByVal input As String, ByVal find As String) As String
    Return Regex.Replace(input, find, "<strong>$0</strong>", RegexOptions.IgnoreCase)
End Function 
```

替换模式中的`$0`替换为完整匹配。

另请参见[此处](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:43:14.817

你好这个功能怎么样：

```
Private Function MakeBold(allstring As String, toFind As String) As String
    Return allstring.Replace(toFind, [String].Format("<strong>{0}</strong>", toFind))
  End Function 
```

# css - 臭名昭著的“大纲：无；” IE 中的问题(8)

> ID：15550500
> 
> 赞同：1
> 
> 时间：2013-03-21T14:37:08.120
> 
> 标签：css, internet-explorer, internet-explorer-8, outline

[http://www.massgeneral.org/international/dev/content-wrap.aspx](http://www.massgeneral.org/international/dev/content-wrap.aspx)

我正在尝试删除在我构建的 UI 中单击锚标记（箭头和缩略图）时创建的轮廓框。我已经设置了“大纲：无；” 致所有被这个边界问题折磨的锚元素。该样式被拉入 IE 中锚元素的选择器中，但是，当用户单击其中一个元素时，仍会生成轮廓。

[http://oi50.tinypic.com/2mfxfg2.jpg](http://oi50.tinypic.com/2mfxfg2.jpg)

**有什么建议吗？**

```
div#wrap a, div#wrap a:focus, div#wrap a:active,
div#wrapWrap a, div#wrapWrap a:focus, div#wrapWrap a:active {outline: none !important;} 
```

我确实提前道歉，因为我知道这个问题已经在几次讨论中得到了回答。但是，经过研究，我似乎正在遵循正确的程序来解决这个问题。不幸的是，这个问题仍然在我的实现中发生。

请仅在 IE8 或更高版本中测试此问题，提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:47:13.960

`<head>`您元素中的以下行正在咬您：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/> 
```

如[this answer](https://stackoverflow.com/a/1538066/1128047)中所述，您需要删除该行以禁用 IE7 仿真模式。另请注意，如果您在 IIS 上运行，则服务器本身可以强制使用此仿真模式（因此也要检查一下，如果删除它不能解决问题）。另外，请确保您`doctype`的设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:47:30.573

实际上，虚线轮廓是 IE 内置的辅助功能（对于那些不能或选择不使用鼠标的人）。真的，它可能不应该被删除，老实说，它并没有真正破坏你的布局或任何东西。但是，如果您必须删除它，也许这些链接之一会帮助您：

*   [这里](http://haslayout.net/css-tuts/Removing-Dotted-Border-on-Clicked-Links)
*   [这里](http://css-tricks.com/removing-the-dotted-outline/)
*   [或者在这里](https://stackoverflow.com/questions/1142819/how-to-remove-dotted-border-around-active-hyperlinks-in-ie8-with-css)

# wix - 是否可以创建同时具有“.cab”和“文件夹结构”的 CDImage

> ID：15550501
> 
> 赞同：2
> 
> 时间：2013-03-21T14:37:12.850
> 
> 标签：wix, wix3.6

我的要求是创建一个 CDImage，其中包含 cab 和文件夹结构中的源文件

我按照以下步骤操作：

```
<Package Compressed='yes' ... />

<Media Id='1' Cabinet='Com~1.cab' Layout='Program Files\Common Files\System' /> 
```

通过这个我可以创建文件夹结构层次结构和 Com~1.cab 文件。但是我的安装不起作用。MSI 在 .msi 旁边的位置而不是在 .msi 下查找文件`Program Files\Common Files\System`。

任何人都可以帮助如何解决我的问题，如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:22:51.757

首先，您需要决定是否要压缩 MSI 中的文件。您实际上可以将一些压缩文件与一些未压缩文件混合在一起，但这通常比它的价值更复杂。

如果要压缩，请设置`Package/@Compressed='yes'`and`Media/@Cabinet='something'`或使用`MediaTemplate`. 然后确保您的 File 元素没有指定`Compressed='no'`（除非您想要解压缩某些特定文件，如上所述，这是不寻常的）。

# java - JSF 1.1 数据表 CRUD 操作

> ID：15550504
> 
> 赞同：3
> 
> 时间：2013-03-21T14:37:24.487
> 
> 标签：java, jsf, crud, tomahawk

我们有一个使用 JSF 1.1 运行的旧应用程序，由于客户端规范无法升级。

我想知道是否可以使用 JSF 1.1 创建一个数据表，并在单击数据表行中的按钮或链接时打开一个对话框弹出窗口并执行 CRUD 操作？

谢谢

编辑 1

我猜 Apache Trinidad 支持 JSF 1.1。我可以在特立尼达进行 CRUD 操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:23:59.977

我认为将 Richfaces 3.1.6（与 JSF 1.1 兼容）与出色的 A4J 结合使用会帮助您做到这一点：

```
<h:form id="myForm">
<rich:dataTable width="100%" style="border:none;margin-left:15px;" id="tableId" columnClasses="colClass"
            value="#{managedBean.someList}" var="someVar">

    <h:column> some content for this column </h:column>
    <h:column>
           <a4j:commandLink styleClass="linkClass" value="Delete" reRender="myForm:myModal" ajaxSingle="true" oncomplete="#{rich:component('myForm:myModal')}.show()" actionListener="#{managedBean.someMethodToUpdateDTO}">
              <a4j:actionparam value="#{someVar.idForExample}" name="someName"  assignTo="#{managedBean.someDTOObjectToBeUpdated.id}"/>
           </a4j:commandLink>

    </h:column>
</rich:dataTable>

<rich:modalPanel id="panel" width="350" height="100">
    <f:facet name="header">
    <h:panelGroup>
        <h:outputText value="Are you really, really sure to delete this one!!! #{managedBean.someDTOObjectToBeUpdated.name}"></h:outputText>
    </h:panelGroup>
    </f:facet>
    <a4j:commandButton styleClass="btnClass" value="Oui" ajaxSingle="true" oncomplete="#{rich:component('myForm:myModal')}.hide()" reRedner="myForm:tableId" action="#{managedBean.deleteIt}">
</rich:modalPanel>

</h:form> 
```

someMethodToUpdateDTO 是一个方法，在您的托管 bean 中如下所示：

```
public void someMethodToUpdateDTO(ActionEvent event){
    //In this method I just load the object from somewhere else
    someDTOObjectToBeUpdated = someDAO.getObject(someDTOObjectToBeUpdated.getId()); 
    //someDTOObjectToBeUpdated is an attribute of your managed bean, of course with its     getter and setter
} 
```

希望这可以帮助，

干杯

# highcharts - 调用 setExtremes 后，Highcharts '重置缩放'

> ID：15550510
> 
> 赞同：10
> 
> 时间：2013-03-21T14:37:58.527
> 
> 标签：highcharts

我正在使用 setExtremes 放大图表中的细节，并允许用户通过在图表中选择来缩放“x，y”。当用户缩放时，他们会得到一个“重置缩放”按钮，但是当我调用 setExtremes 时，我没有。

有没有办法让我强制“重置缩放”按钮以编程方式出现？

更新：

打电话

```
if( !chart.resetZoomButton ) {
    chart.showResetZoom();
} 
```

在 afterSetExtremes 事件处理程序中使按钮出现，但单击它不会执行任何操作。

更新：

我没有调用 setExtremes，而是改为调用

chart.xaxis[0].zoom(minx, maxx); chart.yaxis[0].zoom(miny, maxy); 图表重绘（）；

这与用户通过在图表上选择放大具有相同的效果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T14:47:48.417

刚刚查看了 HighCharts 源代码，看起来这可能适合您：

```
chart.showResetZoom(); 
```

此外，为了使按钮正常工作，您应该使用 axis.zoom 而不是设置极值：

```
axis.zoom(newMin,newMax); 
```

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T14:52:03.993

您可以使用`showResetZoom`，但**您必须检查重置按钮是否已经可见，否则它不会消失**。

```
if( !chart.resetZoomButton ) {
    chart.showResetZoom();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T16:39:21.400

这种方法效果很好：

```
if (!$('.highcharts-button').length) {
    chart.showResetZoom();
} 
```

这是假设唯一可能显示的按钮是“重置缩放”按钮。如果它已经存在，则不要显示另一个。

如果您不执行此检查，则每次调用时都会添加一个新按钮`showResetZoom()`。单击可见（最近）按钮会重置缩放并删除按钮，但旧按钮仍然可见并且什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T14:07:53.640

如果您使用 setExtremes，您还可以将 min 和 max 设置为 null 以重置：

```
chart.xAxis[0].setExtremes(null, null) 
```

# windows - UNICODE_STRING 到 std 字符串的转换

> ID：15550514
> 
> 赞同：0
> 
> 时间：2013-03-21T14:38:17.897
> 
> 标签：windows, driver, kernel-mode, filter-driver

我正在使用**pFileObject->FileName**来获取在内核模式过滤器驱动程序中打开的文件的名称。这个返回的文件名是**[UNICODE_STRING](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380518%28v=vs.85%29.aspx)**的形式。我想将其转换为**std String**。什么方法？？？如果可能，请提供示例...以下是代码

```
NTSTATUS FsFilterDispatchCreate(
    __in PDEVICE_OBJECT DeviceObject,
    __in PIRP           Irp
    )
{
    PFILE_OBJECT pFileObject = IoGetCurrentIrpStackLocation(Irp)->FileObject;

    DbgPrint("%wZ\n", &pFileObject->FileName);

    return FsFilterDispatchPassThrough(DeviceObject, Irp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:25:40.410

我同意汉斯的评论。使 std:: 类在 Windows 内核模式下工作即使不是不可能也是极其困难的。默认的 WinDDK 环境是 C 而不是 C++。最好的办法是将 UNICODE_STRING 转换为 ANSI 空终止字符串。（您可以使用 DbgPrint("%s"...) 等进行打印）。请参见下面的示例。

```
UNICODE_STRING tmp;

// ...

ANSI_STRING dest;
ULONG unicodeBufferSize = tmp.Length;
// Length of unicode string in bytes must be enough to keep ANSI string
dest.Buffer = (PCHAR)ExAllocatePool(NonPagedPool, unicodeBufferSize+1);
// check for allocation failure... 
dest.Length = 0;
dest.MaximumLength = unicodeBufferSize+1;

RtlUnicodeStringToAnsiString(&dest, &tmp, FALSE);
// check for failure...
dest.Buffer[dest.Length] = 0; // now we get it in dest.Buffer 
```

# php - 我收到无法获取标题信息错误，但我无法解决

> ID：15550520
> 
> 赞同：-2
> 
> 时间：2013-03-21T14:38:34.633
> 
> 标签：php

```
Warning: Cannot modify header information - headers already sent by (output started at /home/apexwyxa/public_html/click4jalandhar.in/u-banner.php:14) in /home/apexwyxa/public_html/click4jalandhar.in/conn.php on line 115 
```

上面是我的错误，下面是我的 PHP 代码

```
function update_name($fname, $lname, $u)
        {
            include "db.php";
            $query = "update users set firstname='$fname', lastname='$lname' where user_ID='$u'";
            $result = mysql_query($query);
            if($result)
            {
                $msg = "Name updated";  
            }
            else
            {
                $msg = "Error => ".mysql_error();   
            }
            header("location:userinfo.php?x=$msg");
        }
        function update_uname($username, $u)
        {
            include "db.php";
            $query = "update users set username='$username' where user_ID='$u'";
            $result = mysql_query($query);
            if($result)
            {
                $msg2 = "Username updated"; 
            }
            else
            {
                $msg2 = "Error => ".mysql_error();  
            }
            header("location:userinfo.php?x=$msg2");
        }
        function update_email($email, $u)
        {
            include "db.php";
            $query = "update users set email='$email' where user_ID='$u'";
            $result = mysql_query($query);
            if($result)
            {
                $msg3 = "Email updated";    
            }
            else
            {
                $msg3 = "Error => ".mysql_error();  
            }
            header("location:userinfo.php?x=$msg3");
        }
        function update_pass($old_pass, $new_pass, $u)
        {
            include "db.php";
            $xquery = "select * from users where user_ID = '$u'";
            $xresult = mysql_query($xquery);
            $xnum = mysql_num_rows($xresult);
            if($xnum>0)
            {
                while($xrow = mysql_fetch_array($xresult))
                {
                    extract($xrow);
                    if($xrow[8]!=$old_pass)
                    {
                        $msg4 = "Your current password is not correct/matching";    
                        header("location:userinfo.php?x=$msg4");
                    }
                    else
                    {
                        $query = "update users set password='$new_pass' where user_ID='$u' and password='$old_pass'";
                        $result = mysql_query($query);
                        if($result)
                        {
                            $msg4 = "Password updated"; 
                        }
                        else
                        {
                            $msg4 = "Error => ".mysql_error();  
                        }
                        header("location:userinfo.php?x=$msg4");
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:41:48.120

看看这个话题。 [Wordpress - 错误：标头已发送](https://stackoverflow.com/questions/15546957/wordpress-error-headers-already-sent/15547272#15547272)

发生此错误的原因是您在调用 header() 函数之前输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:49:12.533

您**只能**为发送到浏览器的单个字符设置标题。请改用 javascript 重定向。

# android - Android 运行时 GPS 位置 - 黑莓设备 - 不工作

> ID：15550521
> 
> 赞同：3
> 
> 时间：2013-03-21T14:38:35.763
> 
> 标签：android, gps, blackberry-eclipse-plugin, blackberry-10

我的应用程序已从 Android 移植到黑莓，并且运行良好...

唯一不工作的是在 android 上工作的 GPS 位置....

该应用程序向用户显示一条消息，我们正在尝试查找该位置，如果没有找到位置，我们会告诉用户我们无法检索位置。

这是代码

```
private void gpsLocation()
   {
         //Get the location manager
         locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
         //Provide Criteria
          Criteria criteria = new Criteria();
         provider = locationManager.getBestProvider(criteria, false);
          Location location = locationManager.getLastKnownLocation(provider);

         locationManager.requestLocationUpdates(provider, 400, 1, this);

         if(location != null){

                 onLocationChanged(location);
          } else{
                 Log.i(TAG, "no GPS location available - waiting for GPS fix");

                 Toast.makeText(getApplicationContext(), R.string.gpsWaitingToast, Toast.LENGTH_SHORT).show();

                if (Debug.GPS_USE_MONTREAL) {
                      currentLatitude = Double.valueOf(Debug.GPS_LAT_MONTREAL); currentLongitude = Double.valueOf(Debug.GPS_LNG_MONTREAL); // montreal
                 }
                 waitForGpsFix(GPSFIX_DELAY);
          } 
```

它不工作，我重新启动了应用程序，在窗口旁边做了所有这些东西..

没有任何作用..

非常感谢您的建议和帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:47:21.107

之前有一个错误`LocationManager.NETWORK_PROVIDER`返回null，该方法仍然可能返回`locationManager.getBestProvider()`。但是，这应该在较新的操作系统版本中得到修复。

如果您想立即修复代码，您需要做的就是设置：

```
provider = LocationManager.GPS_PROVIDER 
```

与早期阶段一样，`GPS_PROVIDER`它是唯一在播放器中实施的提供程序。

# html - 限制 twitter bootstrap 中进度条的宽度

> ID：15550525
> 
> 赞同：4
> 
> 时间：2013-03-21T14:38:53.987
> 
> 标签：html, css, jquery-ui, twitter-bootstrap

我正在使用 twitter bootstrap 来为我的 Ui 增添趣味。我真的很想在我的页面上添加一个进度条。以下工作正常，除了进度条跨越屏幕的整个宽度。我希望它被限制在一个小的矩形区域而不是屏幕的整个长度。知道怎么做吗？

```
<div class="left" >
    <p> <strong>Use the portal to submit your claims</strong></p>
    <p> Step 1 </p>
    <div class="progress progress-info">
        <div class="bar" style="width: 15%" ></div>
    </div>
    <p> Step 2 </p>
    <div class="progress progress-info">
        <div class="bar" style="width: 30%"></div>
    </div>
    <p> Step 3 </p>
    <div class="progress progress-info">
        <div class="bar" style="width: 45%"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T14:47:36.253

只需将包含“左”类的 DIV 设置为您想要的宽度即可。

如果您使用的是 Bootstrap 的网格系统，那么您将使用带有一行和一个容器的适当的 'span' 类。

# templates - woocommerce 高级模板

> ID：15550527
> 
> 赞同：0
> 
> 时间：2013-03-21T14:38:55.267
> 
> 标签：templates, woocommerce

我正在开发一个主题，出于某种原因，我需要将面包屑的默认位置（也适用于许多其他事情）移动到 woocommerce 主题上。然后我意识到在我的functions.php上做这样的事情：

```
function woocommerce_remove_breadcrumb(){
    remove_action( 'woocommerce_before_main_content', 'woocommerce_breadcrumb', 20);
}
add_action('woocommerce_before_main_content', 'woocommerce_remove_breadcrumb');

function woocommerce_custom_breadcrumb(){
    woocommerce_breadcrumb();
    }
add_action( 'woo_custom_breadcrumb', 'woocommerce_custom_breadcrumb' ); 
```

然后在任何模板文件上，输出面包屑：

```
<? do_action('woo_custom_breadcrumb'); ?> 
```

并且有效。我的问题不止于此。这是这样的正确方法吗？我的意思是关于 woocommerce 的任何内容，而不仅仅是面包屑，还包括任何图片、评级、标题、按钮、侧边栏等等。我在想的是为什么 woocommerce 模板不带有更深层次的代码。我的意思是，为什么没有这样的 single-content-loop.php 模板，您可以在其中以简单的方式更改事物的顺序、标题、类别、内容、图像等，而不是挂钩到函数中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T22:32:57.313

我认为这是明确调用面包屑的一种可接受的方式。有时调用一个特定的函数比删除它周围的所有东西更容易！

至于改变事物的顺序并进入高级定制；没有一个文件，而是多个文件一起工作。在您的主题根目录中创建一个名为“woocommerce”的文件夹并复制以下文件以进行安全覆盖：

**woocommerce/woocommerce-hooks.php**：

这是您的钩子，包括您在主题functions.php 中覆盖的钩子。您可以在此处尝试删除和重新定位产品页面上的某些元素。搜索“侧边栏”，您将看到添加了“woocommerce_sidebar”操作及其引用的函数的位置...

**woocommerce/woocommerce-template.php**：

以下是模板文件中用于根据条件语句输出内容的函数。例如，搜索“单一产品”系列，您可以看到哪些模板文件用于哪些功能。例如'woocommerce_template_single_title'使用'single-product/title.php' - 如果你复制这个文件夹和文件，你可以对标题部分进行非常具体的编辑

在这两个文件及其随附的引用（如title.php）之间，我相信您可以做您描述的事情。让我知道它是如何工作的！我也是 woocommerce 的新手！

# sql - 编辑数据库元数据

> ID：15550528
> 
> 赞同：2
> 
> 时间：2013-03-21T14:38:56.140
> 
> 标签：sql

我很好奇实际数据库命令和从数据库元数据中删除行之间的联系。

例如，以下命令是否...

`drop table products`

……和这个一样吗？

`delete from information_schema.tables where table_name='products'`(SQL CE)

上述命令适用于`SQL Server Compact`但问题很可能在所有数据库平台上仍然有效。只是好奇第二个命令是否真的做同样的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:44:27.813

不它不是。

首先，这些`information_schema`表通常是基础表上的视图。因此，即使您*可以*从中删除一行，也确实不能。

其次，删除表不仅仅是删除表。您必须删除列定义、约束、索引和触发器。您还必须删除与表关联的所有页面，并释放页面缓存中的所有内存副本。而且可能还有很多其他工作正在进行中。

听起来您想了解更多关于数据库如何真正工作的信息。我鼓励您阅读在线可用的文档并寻找有关数据库软件的好书。

# pointers - 在 c 中为函数传递不同的结构类型

> ID：15550532
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:04.353
> 
> 标签：pointers, structure

我有以下代码：

```
typedef struct PStruct{
int len;
char* data;
}PointerStruct;

typedef struct AStruct{
int len;
char data[256];
}ArrayStruct;

void checkFunc(PointerStruct* myData)
{
  if (0 == myData || 0 == myData->data){
  printf("error\n");
  }
}

int main()
{
   ArrayStruct my_data;
   my_data.len = 256;
   char data[] = "data is sent";
   my_data.data = &data;
   checkFunc((PointerStruct*)my_data);
   return 0;
 } 
```

传递具有数组的结构是否有任何错误。其中所需的是指针。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:41:36.753

在你的程序中有几点需要考虑。

```
char data[] = "data is sent"; 
```

这是一个 13 个字符的字符数组。因此，`my_data.data = &data;`将给出如下所示的编译错误

```
error: incompatible types when assigning to type 'char[256]' from  type 'char (*)[13]' 
```

要复制您的字符串，您可能可以使用 strcpy ，如下所示

```
strcpy(my_data.data, data); 
```

下一点是将指针传递给对象。在此调用中`checkFunc((PointerStruct*)my_data);`，您将对象的实例传递给函数调用，但将类型转换为指针。由于数据类型不匹配，您将面临编译问题`error: cannot convert to a pointer type`

要克服此错误，您应该将`my_data`对象的引用传递为`checkFunc((PointerStruct*) &my_data);`. 因此，您的新`main`功能看起来像

```
int main()
{
    ArrayStruct my_data;
    my_data.len = 256;
    char data[] = "data is sent";
    //my_data.data = &data;
    strcpy(my_data.data, data); // Use of strcpy. You would require to include <string.h>
    checkFunc((PointerStruct*)(&my_data)); // Pass a reference and not by value
    return 0; 
```

}

通过这些更改，您的代码应该可以正常工作。

# salesforce - 使用 Force.com 网站更新机会来自

> ID：15550536
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:15.843
> 
> 标签：salesforce, apex-code, visualforce

我不知道为什么，但是当我访问它并尝试更新我们发送的“调查”时，我的 force.com 网站并没有更新我的机会。

页面上正确填充的数据不会在提交时发送到机会。

这是我正在使用的控制器：

```
public class OpptyCont {
public Opportunity opportunity{ get
        {
        opportunity = [SELECT Id, Name ,X1__c,X2__c,X3__c,X4__c,X5__c,X6__c,X7__c,X8__c,X9__c FROM Opportunity
                WHERE Id = :ApexPages.currentPage().getParameters().get('Id')];
        return opportunity;
        }
             set;
    } 

    public OpptyCont() {
    }

     public PageReference save() {
     try{
           update opportunity;
        }catch(System.DMLException e) {
            ApexPages.addMessages(e);
            return null;
        }
        return null;
    }

} 
```

这是 Apex 页面：

```
 <apex:page Controller="OpptyCont" showHeader="false" sidebar="false">

       <apex:pageBlock title="Survey Questions for {!Opportunity.Name}">
      <b>Please fill out the following Questions:</b>
       </apex:pageBlock>
    <apex:form >
    <br></br>
    <b>1.</b><apex:outputField value="{!Opportunity.X1__c}"/>
    <br></br>
    <br></br>
    <apex:inputTextarea label="{!Opportunity.X1__c}" value="{!Opportunity.X1__c}" id="X1__c" style="width:80%" />
    <br></br>
    <br></br>
   <b> 2.</b><apex:outputField value="{!Opportunity.X2__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X2__c}" value="{!Opportunity.X2__c}"    id="X2__c" style="width:80%" />
   <br></br>
   <br></br>
    <b>3.</b><apex:outputField value="{!Opportunity.X3__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X3__c}" value="{!Opportunity.X3__c}" id="X3__c" style="width:80%" />
   <br></br>
   <br></br>
    <b>4.</b><apex:outputField value="{!Opportunity.X4__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X4__c}" value="{!Opportunity.X4__c}"    id="X4__c" style="width:80%" />
   <br></br>
   <br></br>
    <b>5.</b><apex:outputField value="{!Opportunity.X5__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X5__c}" value="{!Opportunity.X5__c}" id="X5__c" style="width:80%" />
   <br></br>
   <br></br>
    <b>6.</b><apex:outputField value="{!Opportunity.X6__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X6__c}" value="{!Opportunity.X6__c}" id="X6__c" style="width:80%" />
   <br></br>
   <br></br>
    <b>7.</b><apex:outputField value="{!Opportunity.X7__c}"/><br></br>
    <apex:inputTextarea label="{!Opportunity.X7__c}" value="{!Opportunity.X7__c}" id="X7__c" style="width:80%" />
    <br></br>
    <br></br>
     <b>8.</b><apex:outputField value="{!Opportunity.X8__c}"/><br></br>
     <apex:inputTextarea label="{!Opportunity.X8__c}" id="X8__c" style="width:80%" />

    <br></br>
    <br></br>
    <apex:commandButton value="Submit" action="{!save}" />
    </apex:form>
    </apex:page> 
```

如果你能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:12:11.183

检查站点的配置文件（位于站点配置中的按钮之一下）。也许“来宾用户”没有更新机会的权利？

如果您将类定义修改为，请检查是否有任何更改`public without sharing class OpptyCont`- 也许他无权编辑此特定记录？

最后但同样重要的是 - 在设置 -> 监控 -> 调试日志中，您可以将站点名称放入框中（它应该会找到类似于“MySiteName 来宾用户”的内容），这应该有助于跟踪正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:59:15.973

SF 不允许您编辑或更新标准对象（客户、机会、潜在客户等）的记录。您需要创建一个自定义对象来保存数据并创建一个触发器来更新标准对象上的数据。

您只能在标准对象上插入新记录。

# visual-studio-2012 - 使用 Resharper 7 for MBUnit 调试单元测试会引发异常

> ID：15550540
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:21.337
> 
> 标签：visual-studio-2012, resharper, versioning, mbunit, gallio

[我已经安装了位于http://code.google.com/p/mb-unit/issues/detail?id=900#c9](http://code.google.com/p/mb-unit/issues/detail?id=900#c9)的 Gallio Resharper 测试运行程序，按照[How to support MBUnit tests in Resharper 7 中](https://stackoverflow.com/questions/12982978/how-to-support-mbunit-tests-in-resharper-7)的说明。

当我右键单击单元测试内部并单击“运行单元测试”时，测试运行得很好。但是，当我右键单击然后单击“调试单元测试”时，我得到：

> 无法加载文件或程序集“Gallio.ReSharperRunner71，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

我该如何解决？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:04:26.610

您使用的是哪个版本的 Gallio？（我已硬编码插件以链接到 Gallio.dll 3.4.11.0）

您需要插件文件夹中的以下文件：

*   Gallio.ReSharperRunner71.dll
*   Gallio.ReSharperRunner71.plugin
*   加里奥.dll
*   Gallio.XmlSerializers.dll（不确定是否需要这个..）

这有帮助吗？

# r - 匹配模式以从目录中选择文件

> ID：15550541
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:28.693
> 
> 标签：r, directory

假设我运行该功能`list.files()`

我将得到一个如下所示的字符向量：

```
 tst<-c("Test.Uncx4.1_2281.2_deBruijn.txt", "Test.Vax1_3499.1_deBruijn.txt", 
"Test.Vax2_3500.1_deBruijn.txt", "Test.Vsx1_1728.1_deBruijn.txt", 
"Train.Alx3_3418.2_deBruijn.txt", "Train.Alx4_1744.1_deBruijn.txt", 
"Train.Arx_1738.2_deBruijn.txt", "Train.Bapx1_2343.1_deBruijn.txt", 
"Train.Barhl1_2590.2_deBruijn.txt", "Train.Barhl2_3868.1_deBruijn.txt"
) 
```

我遇到的问题是使用像这样的参数`pattern`时`list.files()` ：`list.files(dirs[1], pattern = "^[Train]",ignore.case=F)`

我仍然希望得到所有文件，而我只希望得到火车文件。像这样：

```
c("Train.Alx3_3418.2_deBruijn.txt", "Train.Alx4_1744.1_deBruijn.txt", 
"Train.Arx_1738.2_deBruijn.txt", "Train.Bapx1_2343.1_deBruijn.txt", 
"Train.Barhl1_2590.2_deBruijn.txt", "Train.Barhl2_3868.1_deBruijn.txt") 
```

这怎么可能或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:41:50.030

你想要的是：

```
list.files(dirs[1], pattern = "^Train",ignore.case=F) 
```

使用您提供的模式和括号，您正在过滤名称以 T、r、a、i 或 n 开头的文件。

# java - JPA - 休眠：在另一列上映射多个表

> ID：15550542
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:32.580
> 
> 标签：java, jpa, hibernate-mapping

考虑下表结构

```
country
=======
id
code
name_id

label
======
id
code
label_value_id

translations
=============
id
ref_id
language
value 
```

现在我需要找到一个 JPA 映射来映射`country:name_id`和`label:label_value_id`翻译`ref_id`。我一直在搜索正确的英语术语来解释这种情况，但在体面的点击中却一无所获。所以数据库可以像这个例子一样保存记录

```
country
id: 1, code: BE, name_id: 30

label
id: 1, code: LABELA, label_value_id: 31

translations
id: 1, ref_id: 30, language: EN, value: BELGIUM
id: 2, ref_id: 30, language: NL, value: BELGIE
id: 3, ref_id: 31, language: EN, value: ALPHA_A
id: 4, ref_id: 31, language: NL, value: ALFA_A 
```

在 Java 中，我有 3 个类

Country、Label 和 Translation 我将`@OneToMany`在 Country 和 Label 与 Translation 建立关系，两者都应该映射，`ref_id`但我不知道如何编写`@OneToMany`代码来实现这一点。任何正确方向的提示将不胜感激，提供解决方案或手册

=====

2013-03-23 更新

正如 Joop 所说，使用鉴别器是解决方案，但它并不是开箱即用的。我被迫使用休眠注释@DiscriminatorOptions(force=true)。如果你不添加它，hibernate 在获取所需的集合时会完全忽略它的 SQL 查询中的鉴别器。

```
@Entity
@Table(name = "testtranslations")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DTYPE", discriminatorType = DiscriminatorType.STRING)
@DiscriminatorOptions(force=true)
public class TestTranslation extends DomainObject {

    /**
     * 
     */
    private static final long serialVersionUID = -6211853644196769521L;

    private long id;
    private String language;
    private String value;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO, generator="testtranslations_seq_gen") 
    @SequenceGenerator(name="testtranslations_seq_gen", sequenceName="TESTTRANSLATIONS_SEQ") 
    @Column(name="testtranslation_id")
    public long getId() {
        return id;
    }

    @Column(name="language", length=3, nullable=false)
    public String getLanguage() {
        return language;
    }

    @Column(name="value")
    public String getValue() {
        return value;
    }

    @Override
    public void setId(long id) {
        this.id = id;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public void setValue(String value) {
        this.value = value;
    }
}

@Entity
@Table(name = "testcountries")
public class TestCountry extends DomainObject {

    /**
     * 
     */
    private static final long serialVersionUID = -9207081478447113501L;

    private long id;
    private String code;
    private List<NameTranslation> name;
    private List<DescriptionTranslation> description;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO, generator="testcountries_seq_gen") 
    @SequenceGenerator(name="testcountries_seq_gen", sequenceName="TESTCOUNTRIES_SEQ") 
    @Column(name="country_id")
    public long getId() {
        return id;
    }

    @Column(name="iso_code", length=3, nullable=false)
    public String getCode() {
        return code;
    }

    @OneToMany(mappedBy="refId")
    public List<NameTranslation> getName() {
        return name;
    }

    @OneToMany(mappedBy="refId")
    public List<DescriptionTranslation> getDescription() {
        return description;
    }

    @Override
    public void setId(long id) {
        this.id = id;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public void setName(List<NameTranslation> name) {
        this.name = name;
    }

    public void setDescription(List<DescriptionTranslation> description) {
        this.description = description;
    }
}

@Entity
@DiscriminatorValue("NAMETRANSLATION")
public class NameTranslation extends TestTranslation {

    /**
     * 
     */
    private static final long serialVersionUID = 7197732491071768673L;

    private TestCountry refId;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "refId", nullable=false)
    public TestCountry getRefId() {
        return refId;
    }

    public void setRefId(TestCountry refId) {
        this.refId = refId;
    }   
}

@Entity
@DiscriminatorValue("DESCTRANSLATION")
public class DescriptionTranslation extends TestTranslation {

    /**
     * 
     */
    private static final long serialVersionUID = -4128287237786410515L;

    private TestCountry refId;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "refId", nullable=false)
    public TestCountry getRefId() {
        return refId;
    }

    public void setRefId(TestCountry refId) {
        this.refId = refId;
    }   
} 
```

我进行了所需的休眠映射并编写了一个 DbUnit 测试以通过 id 加载带有以下数据的 TestCountry

```
<TESTCOUNTRIES COUNTRY_ID="1" VERSION="0" ISO_CODE="BE" />  
<TESTTRANSLATIONS TESTTRANSLATION_ID="1" VERSION="0" LANGUAGE="EN" VALUE="Belgium" REFID="1" DTYPE="NAMETRANSLATION" />
<TESTTRANSLATIONS TESTTRANSLATION_ID="2" VERSION="0" LANGUAGE="NL" VALUE="Belgie" REFID="1" DTYPE="NAMETRANSLATION" />
<TESTTRANSLATIONS TESTTRANSLATION_ID="3" VERSION="0" LANGUAGE="EN" VALUE="BelgiumDesc" REFID="1" DTYPE="DESCTRANSLATION" />
<TESTTRANSLATIONS TESTTRANSLATION_ID="4" VERSION="0" LANGUAGE="NL" VALUE="BelgieDesc" REFID="1" DTYPE="DESCTRANSLATION" /> 
```

我希望这将在未来对其他人有所帮助，我很遗憾没有 JPA 解决方案，我不得不被迫使用休眠注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:11:40.570

有点困难，因为您有表 1 或表 2 的外键。

JPA中确实存在一个**鉴别**器概念，用于表继承。然后从一个公共抽象表中派生出两个表，并具有不同的鉴别器字段。一个[例子](http://www.java2s.com/Tutorial/Java/0355__JPA/DiscriminatorColumnAndDiscriminatorValue.htm)。不过，这有点不同。

*PS 使用搜索键 discriminatorValue 和 discriminatorColumn 寻找更好的示例。*

# javascript - indexableText 未使用 Google Drive SDK 更新

> ID：15550545
> 
> 赞同：0
> 
> 时间：2013-03-21T14:39:34.893
> 
> 标签：javascript, google-drive-api

使用适用于 Google Drive 的 JavaScript v2 API，我遇到了这样一种情况：新创建的文件似乎可以很好地为搜索建立索引，但没有对同一 ID 的进一步文件更新实际上会更改元数据。（所以文件保存后，即使删除，我仍然可以使用旧内容找到它，但似乎没有新内容返回搜索结果）。任何人都可以帮助指向正确方向的指针吗？在元数据中设置 indexableText 以及在参数中设置 useContentAsIndexableText 时会发生这种情况。这是我们使用的代码片段：

```
boundary = '-------314159265358979323846',
delimiter = '\r\n--' + boundary + '\r\n',
closeDelim = '\r\n--' + boundary + '--',
data = JSON.stringify(mapInfo.idea),
metadata = {
    'title': mapInfo.idea.title + '.mup',
    'mimeType': contentType,
    'indexableText': {'text': contentSummary }
},
multipartRequestBody =
    delimiter +
    'Content-Type: application/json\r\n\r\n' +
    JSON.stringify(metadata) +
    delimiter +
    'Content-Type: ' + contentType + '\r\n' +
    '\r\n' +
    data +
    closeDelim,
request = gapi.client.request({
    'path': '/upload/drive/v2/files' + (googleId ? '/' + googleId : ''),
    'method': (googleId ? 'PUT' : 'POST'),
    'params': {'uploadType': 'multipart', 'fileId': googleId },
    'headers': {
        'Content-Type': 'multipart/mixed; boundary=\'' + boundary + '\''
    },
    'body': multipartRequestBody
}); 
```

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T03:50:06.507

我相信这两者是相互排斥的。useContentAsIndexableText 表示内容是可索引的。如果您的内容是二进制的，则 indexableText 是您传递的内容。

# python - 从 XML 中提取 Python 中的 URL

> ID：15550546
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:39:37.527
> 
> 标签：python, regex

我读了这个关于从字符串中提取 url 的线程。[https://stackoverflow.com/a/840014/326905](https://stackoverflow.com/a/840014/326905) 真的很好，我从包含[http://www.blabla.com](http://www.blabla.com)的XML 文档中获取了所有 url

```
>>> s = '<link href="http://www.blabla.com/blah" />
         <link href="http://www.blabla.com" />'
>>> re.findall(r'(https?://\S+)', s)
['http://www.blabla.com/blah"', 'http://www.blabla.com"'] 
```

但我不知道如何自定义正则表达式以省略网址末尾的双引号。

首先我认为这是线索

```
re.findall(r'(https?://\S+\")', s) 
```

或这个

```
re.findall(r'(https?://\S+\Z")', s) 
```

但事实并非如此。

有人可以帮助我并告诉我如何在最后省略双引号吗？

顺便提一句。https的“s”后面的问号表示“s”可以出现也可以不出现。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:09:25.613

```
>>>from lxml import html
>>>ht = html.fromstring(s)
>>>ht.xpath('//a/@href')
['http://www.blabla.com/blah', 'http://www.blabla.com'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:42:49.150

您希望双引号显示为前瞻：

```
re.findall(r'(https?://\S+)(?=\")', s) 
```

这样他们就不会出现在比赛中。另外，是的，这`?`意味着该字符是可选的。

请参阅此处的示例：[http ://regexr.com?347nk](http://regexr.com?347nk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:46:31.547

我曾经通过这段代码从文本中提取 URL：

```
url_rgx = re.compile(ur'(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))')
# convert string to lower case
text = text.lower()
matches = re.findall(url_rgx, text)
# patch the 'http://' part if it is missed
urls = ['http://%s'%url[0] if not url[0].startswith('http') else url[0] for url in matches]
print urls 
```

效果很好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:06:50.163

您已经在使用字符类（尽管是速记版本）。我可能会建议稍微修改一下字符类，这样你就不需要前瞻了。只需将引号添加为字符类的一部分：

```
re.findall(r'(https?://[^\s"]+)', s) 
```

这仍然说“一个或多个字符*不是*空格”，但也添加了不包括双引号。所以整体表达是“一个或多个字符*不是*空格*也不*是双引号”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:46:24.880

谢谢。我刚刚读到这个[​​https://stackoverflow.com/a/13057368/326905](https://stackoverflow.com/a/13057368/326905)

并检查了这个也有效。

```
re.findall(r'"(https?://\S+)"', urls) 
```

# regex - Flex 正则表达式文字字符

> ID：15550553
> 
> 赞同：2
> 
> 时间：2013-03-21T14:40:09.780
> 
> 标签：regex, cygwin, expression, flex-lexer

我在使用 flex 设置正则表达式以匹配类似 C 的文字字符时遇到了一些麻烦。

我需要根据语法匹配正确的文字字符和不正确的字符，例如未终止的字符文字。

2条规则，一条用于正确的，一条用于未终止的。

```
chrlit          (\')([^\\\'\n]|(\\.))(\')
untermchrlit    (\')([\\|\']|(.))* 
```

**我需要正则表达式方面的帮助，因为它们没有按照我的需要工作。**以下是它们**应该**如何工作的一些示例：

```
'          -> unterminated char constant
'/'        -> CHRLIT('/')
'('        -> CHRLIT('(')
'a"b"c"de  -> unterminated char constant
'abc       -> unterminated char constant
'abc\      -> unterminated char constant
'\\'       -> CHRLIT('\\')
';'        -> CHRLIT(';')
''         -> unterminated char constant
'a'        -> CHRLIT('a')
'\'        -> unterminated char constant 
'\;'       -> CHRLIT('\;')
'\\\'      -> unterminated char constant
'\\\       -> unterminated char constant    
'\/'       -> CHRLIT('\/')
'a\'       -> unterminated char constant
'\\        -> unterminated char constant
'\t'       -> CHRLIT('\t') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:38:56.007

问题是您的未终止字符文字的模式也将匹配终止的字符以及任何后续字符，除非字符文字位于行尾。与其尝试精确匹配未终止的字符文字，您可以像这样让自己的生活更简单，`untermchrlit`如果遇到`'`不是 a 开头的 a ，则回退到`chrlit`。（所以它必须是未终止的，如果`chrlit`匹配所有可能的终止文字。）（我还冒昧地从您的正则表达式中删除了所有多余的括号和反斜杠，这使得它们阅读起来不那么嘈杂。）

```
chrlit          '([^'\\\n]|\\.)'
untermchrlit    ' 
```

此解决方案的唯一问题是它会在未终止的 之后立即继续扫描`'`，这很可能会产生人为错误，特别是在确实存在匹配的情况下`'`，例如`'too long'`. 在这里，您真的想在第二个之后继续进行词法扫描`'`（实际上，您可能希望将其标记为过长的字符文字而不是未终止的文字）。要处理这种情况，您需要一组更复杂的模式。以下是可能性：

```
/* As before */
chrlit          '([^'\\\n]|\\.)'
/* Also as before, a catch-all case. */
untermchrlit    '
/* Try to match single-quoted strings which are too short or too long */
emptychrlit     ''
/* The action for this regex *must* come after the action for chrlit */
longchrlit      '([^'\\\n]|\\.)+' 
```

我应该注意，`longchrlit`这里也匹配所有`chrlit`匹配的内容，但与 OP 中的模式不同，它不再匹配任何字符。重要的是按照注释指示对操作进行排序，以便正确的文字将与`chrlit`. （如果你弄错了顺序，flex 应该会发出警告。）

请记住，Flex 始终匹配*最长*的匹配项，但如果多个规则与完全相同的标记匹配，Flex 会选择第*一个*操作。

顺便说一句，至少在 C 中，以下*是*有效的字符文字：

```
'a\
' 
```

那是因为`\`紧随其后的换行符完全从输入中删除，因此第二个`'`被词法分析，就好像它紧随`a`.

# c++ - 快速排序 C++ 实现（使用随机枢轴）中断并陷入无限循环

> ID：15550556
> 
> 赞同：1
> 
> 时间：2013-03-21T14:40:16.007
> 
> 标签：c++, python, xcode, sorting, quicksort

我正在尝试将我的 Python 快速排序实现翻译成 C++ 并编写了一些代码。代码似乎坏了。我正在使用 Xcode 进行开发，我所看到的只是，当我编译和运行代码时`(lldb)`，程序似乎陷入了无限循环。

请帮助我找到错误并指出我在 C++ 实现中哪里出错了。

**Python 快速排序代码：**

```
from random import randint

def quickSort(lst):
    if not lst:
        return []
    else:
        pivot_index = randint(0, len(lst) - 1)
        pivot = lst[pivot_index]
        lesser = quickSort([l for i, l in enumerate(lst)
                            if l <= pivot and i != pivot_index])
        greater = quickSort([l for l in lst if l > pivot])
        #print lesser, pivot, greater
        return lesser + [pivot] + greater

print quickSort([3, 2, 5, 6, 1, 7, 2, 4, 234, 234, 23, 1234, 24, 132]) 
```

**C++ 快速排序代码：**

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

// simple print function 
void print(int* lesser, int len_lesser, int pivot, int* greater, int len_greater) {
    for (int i=0; i < len_lesser-1; i++) {
        cout << lesser[i] << " ";
    }
    cout << pivot << " ";
    for (int i=0; i < len_greater-1; i++) {
        cout << greater[i] << " ";
    }
    cout << endl;
}

unsigned long long rdtsc(){
    unsigned int lo,hi;
    __asm__ __volatile__ ("rdtsc" : "=a" (lo), "=d" (hi));
    return ((unsigned long long)hi << 32) | lo;
}

int randint(int len) {
    // srand(time(0));
    srand((unsigned)rdtsc());
    return (rand() % (len) + 0);
}
void quickSort(int* lst, int len) {
    if (lst == NULL) {
        cout << "List Empty" << endl;
        return;
    }
    else {
        int lesser[] = {};
        int greater[] ={};
        int j = 0;
        int k = 0;
        int pivot_index = randint(len);
        int pivot = lst[pivot_index];
        //cout << pivot << endl;
        for (int i=0; i < len-1; i++) {
            if (lst[i] <= pivot && i != pivot_index) {
                lesser[j] = lst[i];
                j = j+1;
            }
        }
        int len_lesser = sizeof(lesser)/sizeof(int);
        quickSort(lesser, len_lesser);

        for (int i=0; i < len-1; i++) {
            if (lst[i] > pivot) {
                greater[j] = lst[i];
                k = k+1;
            }
        }
        int len_greater = sizeof(greater)/sizeof(int);
        quickSort(greater, len_greater);
        print(lesser, len_lesser, pivot, greater, len_greater);
    }

}

int main() {
    int lst[] = {3, 2, 5, 6, 1, 7, 2, 4, 234, 234, 23, 1234, 24, 132};
    int len = sizeof(lst)/sizeof(int);
    quickSort(lst, len);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:43:20.870

在`C++`您声明的数组中不是动态的。您将不得不`std::vector`动态使用或分配数据。否则这些调用（在函数 quickSort 中）：

```
lesser[j] = lst[i]; 
```

正在访问超出范围的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:46:55.367

你至少有一个你没有声明`lesser`也`greater`没有任何规模的主要问题：

```
int lesser[]  = {};
int greater[]  ={}; 
```

因此，稍后当您尝试访问它们时，您将越界：

```
lesser[j] = lst[i]; 
```

然后再取它的大小`0`：

```
int len_lesser = sizeof(lesser)/sizeof(int); 
```

干净的解决方案是使用[std::vector](http://www.cplusplus.com/reference/vector/vector/)然后你不用担心分配或大小。您应该尝试启用警告并始终使用它们进行编译。在使用它`gcc`运行时`-Wall -W -pedantic`不允许我编译，它告诉我：

```
 36:26: error: zero-size array 'lesser'
 37:26: error: zero-size array 'greater' 
```

这会立即告诉您出了什么问题。

# gdb - GDB：断点没有被命中

> ID：15550558
> 
> 赞同：1
> 
> 时间：2013-03-21T14:40:18.580
> 
> 标签：gdb

我们有一个使用 -g 和 -O 编译器标志编译的大型二进制文件。问题是在使用 gdb 进行调试时，在某些文件/行中设置断点不会在该文件/行中中断或在其他行中中断。我知道这可能是由于 -O 编译器标志（用于优化）。不幸的是，我无法删除编译器 -O 标志，因为我需要注意许多脚本级别。

如何确保在我想要的文件/行位置使代码中断？有没有我可以添加的代码行在使用 gdb 调试时总是不会优化或会中断 - 我试过这样的东西 -

诠释 x; 整数y;

但是 GDB 断点仍然无法正常工作 - 我怎样才能正确设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:54:42.943

我能想到两个问题，内联和优化。由于没有标准的方法来告诉编译器禁用内联和/或优化，因此您只能以编译器特定的方式执行此操作。

要在 GCC 中禁用内联，您可以使用`__attribute__((noinline))`on 方法。

要禁止编译器优化函数（并且，未经测试，为您提供可以设置断点的稳定代码行），只需将其添加到代码中；

```
asm (""); 
```

这两个都记录[在这个页面上](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)。

# css - chrome浏览器不显示背景图片

> ID：15550560
> 
> 赞同：8
> 
> 时间：2013-03-21T14:40:23.940
> 
> 标签：css, html, google-chrome

我创建了一个小型搜索小部件，但是通过 chrome 查看它时没有出现背景。我已经测试了 IE、FF 和 safari，它们看起来都不错。

[http://paradigmsearch.co.uk/widget/?id=1](http://paradigmsearch.co.uk/widget/?id=1)

我通常不愿意将布局问题放在 SO 上。但是，我已经讨论了一段时间。

在元素上：

```
<div class="widget" id="id_300x250"> 
```

我正在应用以下 CSS 定义

```
.widget {
  font-family: arial;
  height: 250px;
  width: 300px;
  border: none;
  background: url('/uploads/widget_background/cached/proportional/300x250/1_512648b566578.png') no-repeat center center;
} 
```

背景只是不可见。如果这是一个非常愚蠢的标记/ css 疏忽，那么我深表歉意。

目前使用chrome浏览器版本25.0.1364.172m

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-21T14:54:20.687

这是一个非常有趣的问题，我只是在 Chrome 的隐身模式下打开你的页面时才发现：你的背景图片被 AdBlock 阻止了。

此外，出于渲染目的，最好将`style`元素粘贴到页面的`head`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:57:05.970

我已经使用 chrome 25.0.1364.172m 测试了您的代码，一切正常。

检查它：http: [//jsfiddle.net/rcHMc/](http://jsfiddle.net/rcHMc/)

HTML

```
<div class="widget" id="id_300x250"> 
```

CSS

```
.widget {
  font-family: arial;
  height: 250px;
  width: 300px;
  border: none;
  background: url('http://paradigmsearch.co.uk/uploads/widget_background/cached/proportional/300x250/1_512648b566578.png') no-repeat center center;
} 
```

# sql - H2 在具有限制行为的多列上排序

> ID：15550568
> 
> 赞同：2
> 
> 时间：2013-03-21T14:40:42.363
> 
> 标签：sql, limit, h2, sql-order-by

使用多个排序列并且这些列的顺序发生变化时输出会发生变化是否正常？

## 例如：

```
create table test_table (
    id int8 not null,
    year int4 not null,
    province varchar(16) not null,
    dangerous bool,
    sector varchar(9) not null,
    unit varchar(3) not null,
    amount numeric not null
);

insert into test_table (id, year, province, dangerous, sector, unit, amount) values (1, 2012, 'W_FL', true, 'FOTOG', 'TNE', 55);
insert into test_table (id, year, province, dangerous, sector, unit, amount) values (2, 2012, 'E_FL', true, 'CHEM', 'TNE', 54);
insert into test_table (id, year, province, dangerous, sector, unit, amount) values (3, 2012, 'W_FL', true, 'CHEM', 'TNE', 74);
insert into test_table (id, year, province, dangerous, sector, unit, amount) values (4, 2012, 'E_FL', true, 'FOTOG', 'TNE', 4);
insert into test_table (id, year, province, dangerous, sector, unit, amount) values (5, 2012, 'LIM', true, 'FOTOG', 'TNE', 4); 
```

## 第一个查询：

```
select
    * 
from
    test_table test 
where
    test.year=2012
order by
    test.province asc,
    test.sector asc 
limit 2; 
```

哪个输出：

```
ID      YEAR    PROVINCE    DANGEROUS   SECTOR      UNIT    AMOUNT  
2       2012    E_FL        TRUE        CHEM        TNE     54
4       2012    E_FL        TRUE        FOTOG       TNE     4 
```

## 第二个查询：

```
select
    * 
from
    test_table test 
where
    test.year=2012
order by
test.sector asc,
    test.province asc
limit 2; 
```

此查询返回其他内容：

```
ID      YEAR    PROVINCE    DANGEROUS   SECTOR      UNIT    AMOUNT 
2       2012    E_FL        TRUE        CHEM        TNE     54
3       2012    W_FL        TRUE        CHEM        TNE     74 
```

就好像限制只使用了第二个 order by 子句......有人可以验证我的假设，即两个查询应该产生相同的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:11:39.720

如果您从查询中删除 LIMIT 2，您将看到顺序：

**第一次查询**

```
---- ------ ---------- ----------- -------- ------ ----- ---
| 编号 | 年份 | 省| 危险 | 部门 | 单位 | 金额 |
 ---- ------ ---------- ----------- -------- ------ ----- ---
| 2 | 2012 | E_FL | 1 | 化学 | TNE | 54 |
| 4 | 2012 | E_FL | 1 | 摄影 | TNE | 4 |
| 5 | 2012 | 林 | 1 | 摄影 | TNE | 4 |
| 3 | 2012 | W_FL | 1 | 化学 | TNE | 74 |
| 1 | 2012 | W_FL | 1 | 摄影 | TNE | 55 |
 ---- ------ ---------- ----------- -------- ------ ----- ---

```

**第二次查询**

```
---- ------ ---------- ----------- -------- ------ ----- ---
| 编号 | 年份 | 省| 危险 | 部门 | 单位 | 金额 |
 ---- ------ ---------- ----------- -------- ------ ----- ---
| 2 | 2012 | E_FL | 1 | 化学 | TNE | 54 |
| 3 | 2012 | W_FL | 1 | 化学 | TNE | 74 |
| 4 | 2012 | E_FL | 1 | 摄影 | TNE | 4 |
| 5 | 2012 | 林 | 1 | 摄影 | TNE | 4 |
| 1 | 2012 | W_FL | 1 | 摄影 | TNE | 55 |
 ---- ------ ---------- ----------- -------- ------ ----- ---

```

第二个顺序永远不会改变第一个顺序的顺序。它只会应用于第一个 order by 具有重复条目的行组。

因此，您将从这两个查询中获得这些不同的结果。

# html - 使用 CSS 生成内圈和外圈

> ID：15550574
> 
> 赞同：2
> 
> 时间：2013-03-21T14:40:57.247
> 
> 标签：html, css

按照[此处](http://davidwalsh.name/demo/css-circles.php)的指南，我一直致力于使用 CSS 生成圆圈。我已经完成了基础知识，但我一直试图将一个 CSS 生成的圆圈叠加在另一个圆圈之上。我的小提琴在[这里](http://jsfiddle.net/cvh2013/7txCN/)。

我想：

1.  调整包含文本的内圈的位置 - 我无法让它在外圈上正确排列。这个想法是每个圈子将由一个外圈和一个内圈组成，每个内圈都将包含适当的文本。
2.  使文本正确排列，使其在内圈中垂直和水平居中
3.  将所有三个圆圈放在同一水平线上。

下面粘贴的是我想让圆圈显示的方式的图像。

有人可以帮忙吗？

![3圈](../Images/3f92d226fac88d0e9c917274a2a227dd.png)

HTML：

```
<div id="law-outer-circle" class="circle"><div id="law-inner-circle" class="circle">Law firms</div></div>   
<div id="industry-outer-circle" class="circle"><div id="industry-inner-circle" class="circle">Industry</div></div>
<div id="in-house-outer-circle" class="circle"><div id="in-house-inner-circle" class="circle">In-house counsel</div></div> 
```

CSS：

```
.circle {
border-radius: 50%;
display: inline-block;
margin-right: 20px;

/* text styling */
font-size: 45px;
color: #FFF;
line-height: 75px;
text-align: center;
font-family: Arial;
}

#industry-inner-circle {
width: 250px;
height: 250px;
background: #DD4814;
position: absolute;
top: 24%; 
left : 24%;
display: block;
border: 2px solid #fff;
}

#industry-outer-circle {
background: #DD4814;
width: 270px;
height: 270px;
position:relative;
}

#in-house-inner-circle {
width: 250px;
height: 250px;
background: #AEA79F;
position: absolute;
top: 24%; 
left : 24%;
display: block;
border: 2px solid #fff;
}

#in-house-outer-circle {
background: #AEA79F;
width: 270px;
height: 270px;
position:relative;
}

#law-inner-circle {
width: 250px;
height: 250px;
background: #5E2750;
position: absolute;
top: 24%; 
left : 24%;
display: block;
border: 2px solid #fff;
}

#law-outer-circle {
background: #5E2750;
width: 270px;
height: 270px;
position:relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:56:11.910

您可以使用 css`box-shadow`属性以这种方式进行操作。

**html**

```
<div class="circle color-1 color1-box-shadow">
    industry
</div>
<div class="circle text color-2 color2-box-shadow">
    In-house legal counsel
</div>
<div class="circle color-3 color3-box-shadow">
    Law Firms
</div> 
```

**CSS**

```
.circle {
    border-radius: 50%;
    float: left;
    display: inline-block;
    margin-right: 20px;
    /* text styling */
    font-size: 45px;
    width: 250px;
    height: 250px;
    color: #FFF;  border: 2px solid #fff;
    line-height: 250px;
    text-align: center;
    font-family: Arial;
}
.color-1 { background: #DD4814;}
.color-2 { background: #AEA79F; }
.color-3 { background: #5E2750; }
.color1-box-shadow { box-shadow: 0px 0px 1px 1px #DD4814 }
.color2-box-shadow { box-shadow: 0px 0px 1px 1px #AEA79F }
.color3-box-shadow { box-shadow: 0px 0px 1px 1px #5E2750 }
.text { line-height: 45px; padding-top: 50px; height: 200px } 
```

[例子](http://jsfiddle.net/agriboz/7txCN/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:58:53.973

给出`.circle { line-height: 250px; }`（与您的内圈高度相同）并将内圈`top`和`left`值更改为 8px（outerCircleHeight - innerCircleHeight - bothSidesBorder / 2 = 8）。

```
#industry-inner-circle {
    top: 8px;
    left : 8px;
} 
```

[jsfiddle 示例](http://jsfiddle.net/dxRe2/)

# html - 更改 2 个绝对元素之间的 Z-index ？

> ID：15550575
> 
> 赞同：2
> 
> 时间：2013-03-21T14:40:57.617
> 
> 标签：html, css, position

我有一个简单的 html 结构（我*不能*改变它）

```
 <div class="d1"  >
       <div class="d2" >
             <div class="d3"></div>
       </div>
 </div> 
```

外部 div 是`position:relative`

其他（内部）2 个 div 是`absolute position`.

![在此处输入图像描述](../Images/c167f7519af47c3c9e6e38b2a5bedf5b.png)

但是，我`green`希望*在*`red`

`red`有一个*更大* 的`z-index`但它仍然不适用

我错过了什么？

**[JSBIN](http://jsbin.com/otiniw/1/edit)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:45:13.443

从红色 div 中删除`z-index`并使其在绿色 div 中为负：

[http://jsbin.com/otiniw/14/edit](http://jsbin.com/otiniw/14/edit)

# wordpress - 保存和检索自定义插件选项输入

> ID：15550580
> 
> 赞同：1
> 
> 时间：2013-03-21T14:41:09.773
> 
> 标签：wordpress

我是创建 wordpress 插件的新手。我想创建一个插件，在 wp-admin 部分的设置选项下显示自定义页面选项，并保存输入数据的值并检索它，我已经完成了[otto press的教程](http://ottopress.com/2009/wordpress-settings-api-tutorial/)

我在`wp-content/plugin/`命名文件夹中创建了一个文件夹，`new-setting-plugin`该文件夹是一个名为的文件`new-setting-plugin.php`，因此整个文件路径是`wp-content/plugin/new-setting-plugin/new-setting-plugin.php`

文件 new-setting-plugin.php 的代码在表的末尾给出。创建代码后，我进入 wp-admin 的插件页面并安装了插件，一切都很好。

现在，当我按下“保存设置”按钮时，它会显示“设置已保存”消息，但我看不到输入字段中的值

我正在附加我的图像以预览它在我的插件页面中出现的内容

当转到插件页面时，我看到以下输入字段： ![新设置页面](../Images/b2fd9db93a60705722fa08b7e0000044.png)

现在我将值输入到输入字段： ![输入字段](../Images/17156fbaad247c59ce3ff210730233c0.png)

当我单击“保存设置”按钮时，页面刷新后我收到以下消息 ![提交操作后的页面](../Images/c3ef794867853bb94605d4d3d263e13e.png)

这是我的代码

```
<?php

add_action('admin_menu', 'add_page');

if ( !function_exists( 'add_page' ) ) {

    //function to add page under setting options in wordpress admin section
    function add_page() {
        add_options_page('New Setting Page', 'New Setting', 'manage_options', 'plugin', 'plugin_options_frontpage');

    }

}

function plugin_options_frontpage() {

?>

<div class="wrap">
<?php screen_icon('users'); ?><h2>New Setting Page title</h2>

<form action="options.php" method="post">

<?php settings_fields('plugin_options'); ?>
<?php do_settings_sections('plugin'); ?>
<table class="form-table"> 

  <tr valign="top">

    <td colspan="2">
        <input name="Submit" type="submit" class="button button-primary" value="<?php esc_attr_e('Save Changes'); ?>" />
    </td>

  </tr>
</table>
</form>

</div>

<?php

}

add_action('admin_init', 'plugin_admin_init');
function plugin_admin_init(){
register_setting( 'plugin_options', 'plugin_options', 'plugin_options_validate' );
add_settings_section('plugin_main', 'Main Settings', 'plugin_section_text', 'plugin');
add_settings_field('plugin_text_input1', 'Input 1', 'plugin_input1', 'plugin', 'plugin_main');
add_settings_field('plugin_text_input2', 'Input 2', 'plugin_input2', 'plugin', 'plugin_main');
}

function plugin_section_text() {
echo '<p>New input setting to be saved.</p>';
}

function plugin_input1() {
$options = get_option('plugin_options');
echo "<input id='plugin_input1' class='normal-text code' name='plugin_options[text_string]' size='30' type='text' value='{$options['text_string']}' />";
}

function plugin_input2() {
$options = get_option('plugin_options');
echo "<input id='plugin_input2' class='normal-text code' name='plugin_options[text_string]' size='30' type='text' value='{$options['text_string']}' />";
}

function plugin_options_validate($input) {
$options = get_option('plugin_options');
$options['text_string'] = trim($input['text_string']);
if(!preg_match('/^[a-z0-9]{32}$/i', $options['text_string'])) {
$options['text_string'] = '';
}
return $options;
}

?> 
```

我的代码有什么问题，如何更正我的代码，有没有办法在表格的同一页面中显示字段外的输入字段的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-02T04:42:00.917

你不会在那里看到他们。你必须[`get_options`](http://codex.wordpress.org/Function_Reference/get_option)。

对于您的代码，如果您这样做，`var_export( get_option('plugin_options') );`您将看到那些保存的设置/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T09:38:58.320

您必须更改输入的“名称”：

```
function manage_lists_cc_input1() {
    $options = get_option('manage_lists_cc_options');
    echo "<input id='manage_lists_cc_input1' class='normal-text code' name='manage_lists_cc_options[0]' size='30' type='text' value='{$options['text_string_0']}' />";
}

function manage_lists_cc_input2() {
    $options = get_option('manage_lists_cc_options');
    echo "<input id='manage_lists_cc_input2' class='normal-text code' name='manage_lists_cc_options[1]' size='30' type='text' value='{$options['text_string_1']}' />"; 
```

只需更改验证脚本以获取值（这是一个没有验证的简单示例）：

```
function manage_lists_cc_options_validate($input) {
    $options['text_string_0'] = $input[0];
    $options['text_string_1'] = $input[1];
    return $options;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T08:54:23.707

检查验证标准。

```
preg_match('/^[a-z0-9]{32}$/i', $options['text_string']) 
```

注释验证函数中的代码并进行测试。

```
function plugin_options_validate($input) {
$options = get_option('plugin_options');
//$options['text_string'] = trim($input['text_string']);
//if(!preg_match('/^[a-z0-9]{32}$/i', $options['text_string'])) {
//$options['text_string'] = '';
//}
return $options;
} 
```

# android - PhoneStateListener onMessageWaitingIndicatorChanged() 没有被可靠地调用

> ID：15550587
> 
> 赞同：42
> 
> 时间：2013-03-21T14:41:35.777
> 
> 标签：android, voicemail

我有一些代码可以检测何时有新的语音邮件。它基于一个`PhoneStateListener.onMessageWaitingIndicatorChanged()`实现（因此从技术上讲，它仅在 MWI 指示器发生变化时触发，不一定针对每个新语音邮件）。

在 4.xx 对设备进行更新之前，它已经运行了好几个月。

现在，这在设备重新启动时有效，否则它非常不可靠。我可以看到通知栏中出现语音邮件图标，但调试日志`onMWIChanged`保持沉默。

我知道 4.xx 有一个语音邮件提供商 API。认为这可能有连接，我将`android.intent.action.NEW_VOICEMAIL`and`android.intent.action.PROVIDER_CHANGED`意图添加到我的接收器，但它们也不会触发（在我的`BroadcastReceiver` `onReceive`）中（我的应用程序的 minSdkVersion 是 8）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T20:21:19.743

这是来自 Android 开发人员的一篇关于 Android 4.0 API 的帖子。

[http://developer.android.com/about/versions/android-4.0.html](http://developer.android.com/about/versions/android-4.0.html)

如果您向下滚动，则有一个关于**语音邮件提供商**的部分，其中解释了：

*由于 API 当前不允许第三方应用程序读取系统中的所有语音邮件，因此唯一应该使用语音邮件 API 的第三方应用程序是那些将语音邮件传递给用户的应用程序。*

但是，我假设如果您尝试从第三方而不是从您的服务接收语音邮件，那么这仍然是可能的。查看有关 VoicemailContracts 的链接，我相信它说您需要清单中的**ADD_VOICEMAIL**权限才能使用您在上面使用的操作。

[http://developer.android.com/reference/android/provider/VoicemailContract.html](http://developer.android.com/reference/android/provider/VoicemailContract.html)

还有一些我没有机会看到的示例，称为您的 SDK 中的**Voicemail Provider Demo**。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T13:57:47.060

它确实需要 READ_PHONE_STATE 权限。虽然，如果它在你必须设置它之前工作。

请参阅[LISTEN_MESSAGE_WAITING_INDICATOR](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_MESSAGE_WAITING_INDICATOR)。

# .net - NancyFX 中的 JSON 模式验证

> ID：15550589
> 
> 赞同：0
> 
> 时间：2013-03-21T14:41:43.720
> 
> 标签：.net, json, schema, nancy

我正在尝试使用 NancyFX 启动和运行 REST API，到目前为止，它看起来真的很酷，而且完全符合医生的规定！

有一件事我在任何地方都找不到。我想验证发送到我的 API 端点的 JSON，在我将它传递到端点之前，或者至少在我尝试绑定到模型之前。

任何人都可以将我指向博客文章或维基的一部分，这可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:04:02.483

如果你想这样做，那么你需要查看 Request.Body 并自己解析+验证它。您可以逐条路线进行，但让我们面对现实吧——这将是令人麻木的无聊，而这与南希的全部意义相反。

所以我建议你使用的是前钩。Before-hook 让您可以在传入请求被任何路由处理之前抓住它，并使用它做任何您想做的事情 - 您甚至可以选择短路请求并直接从钩子返回响应。

有两种Before-hook；应用程序和模块。应用程序钩子允许您在到达路由之前捕获*任何*传入请求，而模块钩子允许您捕获任何传入请求，这些请求将由指定钩子的模块中的路由处理。

您可以在我们的 Wiki 上阅读有关钩子的更多信息

*   [应用程序挂钩](https://github.com/NancyFx/Nancy/wiki/The-Application-Before%2C-After-and-OnError-pipelines)

*   [模块挂钩](https://github.com/NancyFx/Nancy/wiki/The-before-and-after-module-hooks)

希望这可以帮助

# android - 自定义形状不会出现在 RelativeLayout

> ID：15550590
> 
> 赞同：0
> 
> 时间：2013-03-21T14:41:44.323
> 
> 标签：android, view, parent, android-relativelayout

我的应用程序有以下问题：我创建了一个自定义视图类：

```
 private class MyCustomPanel extends View {
        private int width;
        private int height;
        public MyCustomPanel(Context context,int width,int height) 
        {
            super(context);
            this.height=height;
            this.width=width;

        }
        @Override
        public void draw(Canvas canvas) {

            Paint paint  = new Paint();
            paint.setAntiAlias(true);
            paint.setStyle(Style.STROKE);
            paint.setStrokeWidth(2);
            paint.setColor(getResources().getColor(R.color.pending));

            float radius=(height)/2;
            float center_x = (width)/2;
            float center_y = (height)/2;

            Log.d("DEBUG","R="+radius+" cx="+center_x+" cy="+center_y);

            final RectF oval = new RectF();
            oval.set(center_x- radius, 

                    center_y - radius, 

                    center_x + radius, 

                    center_y + radius);

            //Draw a left semicircle
            canvas.drawArc(oval, 90, 180, false, paint);
        }
    } 
```

这个类是一个内部类，我试图在它`RelativeLayout`前面添加一个按钮。我已成功尝试将其添加到另一个布局，因此它被正确添加和绘制（请参见此处的[屏幕截图](http://img341.imageshack.us/img341/4912/screenshot20130321at410.png)）。

在前一种情况下，调用 draw 函数并绘制半圆。

**在下面虽然没有调用绘图函数**..我使用这个代码：

```
ViewGroup p=(ViewGroup)button.getParent();
MyCustomPanel c=new MyCustomPanel(p.getContext(),p.getWidth(),p.getHeight());
((ViewGroup)p.findViewById(R.id.semicircleFrame)).addView(c); 
```

和相关布局的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/button_selector"
android:id="@+id/frame">

<Button
    android:id="@+id/button"
    android:layout_gravity="center"
    android:textColor="#FFFFFF"
    android:background="@drawable/calendar_button_selector"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >
</Button>

<RelativeLayout 
    android:id="@+id/semicircleFrame"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
 >

</RelativeLayout>

 </RelativeLayout> 
```

层次结构查看器显示以下内容： [screenshot](http://img90.imageshack.us/img90/7769/screenshot20130321at435.png)

我也尝试将其直接添加到父级`frame`，但相同。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:57:25.900

我也遇到了依赖于相对布局大小的相对布局中的视图问题。我通过更新内部视图大小解决了这个问题

```
private void updateViewSize()
if(rootContainer == null || rootContainer.getLayoutParams() == null)
return;
rootContainer.measure(View.MeasureSpec.makeMeasureSpec(ScalingUtil.getScreenSize().getWidth(), View.MeasureSpec.EXACTLY), View.MeasureSpec.makeMeasureSpec(ViewGroup.LayoutParams.WRAP_CONTENT, View.MeasureSpec.EXACTLY));
RelativeLayout.LayoutParams oldLayoutParams = (RelativeLayout.LayoutParams) rootContainer.findViewById(R.id.deals_card_center_bg).getLayoutParams();
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(rootContainer.getMeasuredWidth(), rootContainer.getMeasuredHeight());
    layoutParams.setMargins(oldLayoutParams.leftMargin, oldLayoutParams.topMargin, oldLayoutParams.rightMargin, oldLayoutParams.bottomMargin);

    rootContainer.findViewById(R.id.deals_card_center_bg).setLayoutParams(layoutParams); 
```

# javascript - 使用鼠标单击获取 X/Y 坐标

> ID：15550592
> 
> 赞同：1
> 
> 时间：2013-03-21T14:41:46.410
> 
> 标签：javascript, jquery, coordinates

我正在尝试通过鼠标单击从 div 获取 X/Y 坐标。

[我已经使用这个脚本：](http://jsfiddle.net/TroyAlford/ZZEk8/)

现在我想收集更多的 X/Y 坐标，而不仅仅是一个。所以如果我在 div 中单击两次或更多次，我想列出 div 下的坐标。

```
<div>"click"
"click"</div>
------------------------
coordinates 1: X/Y
coordinates 2: X/Y
.
.
. 
```

有谁知道我是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:44:09.020

在现有元素之后添加一个新`<div id="log"></div>`元素。

在您的 JavaScript 代码中添加

```
document.getElementById("log").innerHTML += "<br/>Coordinates: X=" + x + "; Y=" + y; 
```

在您的 jsfiddle 示例中：

```
$display.html($display.html() + '<br/> x: ' + x + ', y: ' + y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:10:51.430

这正是你所要求的。

小提琴：http: [//jsfiddle.net/ZZEk8/118/](http://jsfiddle.net/ZZEk8/118/)

添加到 HTML：

```
<span class="log"></span> 
```

JS：

```
var clicks = [],
    updatedClicks = "";
$('.clickable').on('click', function (ev) { //We don't use .bind() after jQuery 1.7, use .on() now.
    var $div = $(ev.target);
    var $display = $div.find('.display');

    var offset = $div.offset();
    var x = ev.clientX - offset.left;
    var y = ev.clientY - offset.top;

    $display.text('x: ' + x + ', y: ' + y);
    clicks.push(x + "/" + y);

    updatedClicks += "coordinates" + " " + clicks.length + ":" + " " + clicks[clicks.length -1] + "<br />";

    $('.log').html(updatedClicks);
}); 
```

**更新：** OP 请求了一种限制坐标并删除坐标的方法。

小提琴：http: [//jsfiddle.net/ZZEk8/125/](http://jsfiddle.net/ZZEk8/125/)

```
var clicks = [],
    updatedClicks = [],
    limit = 5;

$('.clickable').on('click', function (ev) {
    var $div = $(ev.target);
    var $display = $div.find('.display');

    var offset = $div.offset();
    var x = ev.clientX - offset.left;
    var y = ev.clientY - offset.top;

    $display.text('x: ' + x + ', y: ' + y);

    //Stops adding at limit
    if (clicks.length < limit){
        addCoord(x,y);
    }
});

$('.delete').on('change', function(ev) {
    if(clicks.length){
        var selection = this.value -1;
        deleteCoord(selection);
    } else { //If there are no coords to delete run this
        return false;
    }
});

function addCoord (x,y){
    clicks.push(x + "/" + y);

    updatedClicks.push("Coordinates" + ":" + " " + clicks[clicks.length -1] + "<br />");

    $('.log').html(updatedClicks.join(" "));
}

function deleteCoord(selection) {
    clicks.splice(selection, 1);
    updatedClicks.splice(selection, 1);
    $('.log').html(updatedClicks.join(" "));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:48:49.360

我用`div`元素来做，但你可以改变它。
见[小提琴](http://jsfiddle.net/ZZEk8/110/)

我的 JS 变化是

```
 $display.append($('<div />').text('x: ' + x + ', y: ' + y)); 
```

在 HTML 中

```
<div class='clickable'>
    <div class='display'></div> 
</div> 
```

或者[这个](http://jsfiddle.net/ZZEk8/113/)，在需要时带有滚动条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:05:24.963

如果要保存坐标，可以将它们收集到一个数组中，如下所示：

```
//Declare an array with 0 length
var arr = new Array(0);
$('.clickable').bind('click', function (ev) {
var $div = $(ev.target);
var $display = $div.find('.display');

var offset = $div.offset();
var x = ev.clientX - offset.left;
var y = ev.clientY - offset.top;

$display.text('x: ' + x + ', y: ' + y);
//increase the length of array before insert the value of coords
arr.length = arr.length+1;
//insert the value
arr[arr.length-1] = "coordinates" + arr.length + ":" + x +"/" + y;
}); 
```

然后，要操作坐标，您可以使用 for-loop 游览您的数组

# c# - 从一个字符串中获取多个数字

> ID：15550596
> 
> 赞同：1
> 
> 时间：2013-03-21T14:41:56.387
> 
> 标签：c#, wpf, string, numbers

我有像这样的字符串

> AS_!SD 2453iur ks@d9304-52kasd

我需要得到字符串的 2 个前数：

对于这种情况将是： `2453`和`9304`

我在字符串中没有任何分隔符来尝试拆分，并且数字和字符串的长度是可变的，我在 WPF 中的 C# 框架 4.0 中工作。

谢谢你的帮助，对不起我的英语不好

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T14:44:06.577

此解决方案将采用两个前数字，每个数字可以有任意数量的数字

```
string s =  "AS_!SD 2453iur ks@d9304-52kasd";

MatchCollection matches = Regex.Matches(s, @"\d+");

string[] result = matches.Cast<Match>()
                         .Take(2)
                         .Select(match => match.Value)
                         .ToArray();

Console.WriteLine( string.Join(Environment.NewLine, result) ); 
```

将打印

```
2453
9304 
```

您可以将它们解析`int[]`为`result.Select(int.Parse).ToArray();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:48:36.233

您可以循环解析字符串的字符，如果遇到异常，那就是字母，如果不是数字，则必须有一个列表来添加这两个数字，并有一个计数器来限制这一点。

遵循伪代码：

```
for char in string:

if counter == 2:
 stop loop

if parse gets exception
 continue

else
 loop again in samestring stating this point
 if parse gets exception
  stop loop
 else add char to list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:16:18.213

或者，您可以使用 ASCII 编码：

```
string value = "AS_!SD 2453iur ks@d9304-52kasd";

byte zero = 48; // 0
byte nine = 57; // 9

byte[] asciiBytes = Encoding.ASCII.GetBytes(value);

byte[] asciiNumbers = asciiBytes.Where(b => b >= zero && b <= nine)
                    .ToArray();

char[] numbers = Encoding.ASCII.GetChars(asciiNumbers);

// OR

string numbersString =  Encoding.ASCII.GetString(asciiNumbers);

//First two number from char array
int aNum = Convert.ToInt32(numbers[0]);
int bNum =  Convert.ToInt32(numbers[1]);

//First two number from string
string aString = numbersString.Substring(0,2); 
```

# ruby-on-rails - 其他页面上的 Rails link_to 锚标记在 Firefox 中不起作用，但在 Chrome 和 Safari 中起作用

> ID：15550597
> 
> 赞同：1
> 
> 时间：2013-03-21T14:42:00.613
> 
> 标签：ruby-on-rails, firefox, hyperlink, anchor

在 Rails 应用程序中，我链接到另一个页面上的特定锚点。它在 Chrome 和 Safari 中运行良好，但在 Firefox 中却不行。很想听听是否有人对链接到另一个锚点和控制器/动作的语法有任何建议。

```
# The link
<%= link_to 'About', root_path(:controller => "home", :anchor => "about") %>

# Destination on other page
<h3 class="dark"><a name="about" class="anchor-navigation">About</a></h3> 
```

我尝试了很多方法，包括添加 :action => "index"、将 html 中的名称更改为 id 以及添加括号以使其更清晰。到目前为止，在 Firefox 中没有骰子，但在 Chrome/Safari 上运行良好。我的猜测是他们在生成的标记中修复了 FF 没有的东西。任何建议，将不胜感激！谢谢。

编辑：另外，当我在 Chrome 中手动粘贴 url localhost:3000/#about 时，它会直接打开到页面的正确位置，但在 Firefox 中做同样的事情不起作用。它可以在带有上述标记的 chrome 中使用，并在 h3 标记中尝试使用 id 方法：

```
<h3 class="dark" id="about">About</h3> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T15:49:37.640

```
<a href="#details">Click Here To Go There</a>

<a name="details">There</a> 
```

# php - 谷歌地图无法在 IE7 上运行

> ID：15550598
> 
> 赞同：0
> 
> 时间：2013-03-21T14:42:01.813
> 
> 标签：php, internet-explorer, google-maps

我对谷歌地图有疑问，它在 IE8、IE9、Firefox 等上运行良好。但在 IE7 上不行。

这是我的代码：

```
$(function ()
{
 var latlng = new google.maps.LatLng($('.lat').text(), $('.lng').text());

    var myOptions = {         

  zoom: parseInt($('.zoom').text()),        
  center: latlng,         
  mapTypeId: google.maps.MapTypeId.ROADMAP     
 };    

 var map = new google.maps.Map(document.getElementById("map"), myOptions);    

 var marker = new google.maps.Marker({        
  position: latlng,        
  map: map,        
  title: $('.titre').text()     
 });
}); 
```

在 Ie7 上，我只有一个空矩形...

有任何想法吗 ？谢谢 ！

# c# - OpenTK 中的模板缓冲区深度

> ID：15550599
> 
> 赞同：5
> 
> 时间：2013-03-21T14:42:02.400
> 
> 标签：c#, opengl, opentk, tao-framework

我将 OpenTK 用于 OpenGL 和 C#。

我需要使用模板缓冲区，目前想知道如何设置`StencilBuffer`深度。

我之前知道的是 TaoFramework，它的控件具有可以设置此深度的属性。

但是现在在 OpenTK 的 openGlControl 中我找不到这样的属性。据我所知，当前设置的缓冲区深度可以通过调用`GL.GetInteger()`传递给它的特殊参数的方法来获得。当我这样做时，它返回 0。这意味着当前模板缓冲区深度为零，因此任何操作在设置一些缓冲区深度之前都不会产生结果。但我不知道如何做到这一点。

谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:50:13.333

看起来你在创建图形上下文时设置了它：

[http://www.opentk.com/doc/graphics/graphicscontext](http://www.opentk.com/doc/graphics/graphicscontext)

靠近该文档的顶部，它给出了以下示例：

```
// Creates a 3.0-compatible GraphicsContext with 32bpp color, 24bpp depth
// 8bpp stencil and 4x anti-aliasing.
GLControl control = new GLControl(new GraphicsMode(32, 24, 8, 4), 3, 0); 
```

这是典型的——OpenGL 基本上将这种事情放到了特定于操作系统的上下文创建任务中……所以如果你不使用 OpenTK，例如，你必须使用 wgl 和 windows api 进行设置。

# ios - 应用程序IOS启动时登录屏幕应该如何出现

> ID：15550600
> 
> 赞同：0
> 
> 时间：2013-03-21T14:42:03.937
> 
> 标签：ios, storyboard, appdelegate, tabbarcontroller

我正在制作一个新应用程序，其中有 5 个选项卡，它是一个基于用户的应用程序，因此我必须获取用户登录名和密码的凭据。

我正在使用带有 Arc 的故事板，因为它是一个选项卡式应用程序，所以我的初始视图控制器是我的选项卡视图控制器，我还希望添加一个登录屏幕（可能作为模态视图或一个）。

我想不出在选项卡式应用程序中添加登录屏幕的完美方式。

我应该从应用程序委托中调用它还是在视图中会出现或其中一些方法。我尝试了一些代码，但最终得到了不平衡呼叫等警告。

需要您的宝贵建议:)

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:49:09.830

只有两个选项（当然还有更多）：

1.  `UIViewController`在您的应用程序的开头使用一个`rootViewController`。登录成功后会切换`window`'s `rootViewController`.
2.  把`UITabBarController`as `rootViewController`, on `viewWillAppear`, 检查是否登录, 如果没有, 只显示登录名`UIViewController`

# windows - 在应用程序中注册的扩展程序列表

> ID：15550602
> 
> 赞同：1
> 
> 时间：2013-03-21T14:42:05.747
> 
> 标签：windows, file, file-type, file-association, win32-process

对于应用程序（例如：excel.exe），我想知道所有扩展名（例如：.xlt、.xlsx 等）在应用程序（excel.exe）中注册了什么。如何实现？

平台：视窗

语言：C/C++/C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:54:34.313

不幸的是，文件扩展名注册可能有点复杂。没有明确的 API 可以提取您正在寻找的信息类型。有[`IQueryAssociations`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761400.aspx.)接口，但它在查询方式上并没有给你很大的灵活性。它更像是一对一查询，但您正在寻找多对一查询。因此，您必须直接在注册表中挖掘该信息。

用于`RegOpenKeyEx()`打开`HKEY_CLASSES_ROOT`配置单元并使用 枚举其所有直接子键`RegEnumKeyEx()`，查找以句点开头的键名。这将为您提供已知文件扩展名的列表。

对于每个`HKEY_CLASSES_ROOT\<ext>`键，检查：

1.  `(Default)`包含非空字符串的值。如果存在，那就是文件扩展名的 ProgID。您可以打开`HKEY_CLASSES_ROOT\<ProgID>`密钥并查看它是否有`shell\<verb>\command`包含应用程序路径的任何子密钥（可能存在多个`<verb>`值，因此您必须枚举它们）。如果没有，请检查 ProgID 键是否有`CLSID`子键。如果存在，它的`(Default)`值将是`CLSID`处理与该 ProgID 关联的所有内容的 COM 对象。您可以打开该`HKEY_CLASSES_ROOT\CLSID\<CLSID>`键并检查它是否有一个`InprocHandler`、或子键`InprocHandler32`，其中包含拥有该 COM 对象的 EXE 或 DLL 文件的完整路径。`InprocServer``InprocServer32`

2.  一个`PersistentHandler`子键。如果存在，它的`(Default)`值将是`CLSID`处理该文件扩展名的 COM 对象的值。您可以根据需要检查 CLSID。

3.  一个`OpenWithProgIds`子键。如果存在，那么它将包含您可以根据需要检查的 ProgID 列表。

4.  一个`OpenWithList`子键。如果存在，它将包含已注册应用程序名称的列表。您可以打开`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\<AppName>`密钥以获取每个应用程序的完整路径。

还有其他一些可能性（ShellEx 键、DDE 键、其他与 Shell 相关的 COM 对象键等），但我认为您明白了这一点。可能需要大量挖掘才能确定哪个应用程序处理给定的文件扩展名。

# c# - 强制表单保持在顶部

> ID：15550605
> 
> 赞同：1
> 
> 时间：2013-03-21T14:42:09.630
> 
> 标签：c#, .net, winforms, devexpress

我希望每次打开表单时都显示为模态。因为我不能改变它的创建和打开方式。我想知道是否有可能使表单在表单类中保持在顶部。

一个机会是`TopMost`财产。这通常有效，但是如果我在主线程等待它关闭时显示表单，即使我更改应用程序（例如更改为浏览器），表单也会保持在顶部。所以无论我在哪里，表格仍然显示。

我遇到的另一个问题是，在某些情况下，它被父表单采用，然后可能会阻止其他窗口或弹出消息。

一旦失去焦点，我正在考虑一个`OnLostFocus`事件的钩子以使其再次处于领先地位，但我不确定这是否是一个好主意......

有什么有用的想法吗？

* * *

**编辑**

由于评论，我将扩展我的描述，这是真正的用例

我们正在使用`SplashScreenManager`能够将某种形式显示为`WaitForm`. 由于`WaitForm`不打算显示模式（[请参阅支持中心](http://www.devexpress.com/Support/Center/p/Q437986.aspx)），我们正在寻找一种方法来做到这一点。

我们无法更改表单的显示方式，因为这是通过`SplashScreenManager`. `WaitForm`既从主线程显示，也从某些后台工作人员显示。

所以这只是关于我们自己的一种形式，在我们自己的应用程序中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:55:45.110

采用：

```
TopLevel = true; 
```

这将完全符合您的要求；只要显示主窗体就位于最顶层，如果主窗体被另一个窗口隐藏，则隐藏。

您可以在不使用 .Show(owner) 的情况下将启动表单的所有者明确设置为主表单。

```
splashForm.Owner=mainForm;
splashManager.Show(splashForm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T08:43:29.843

我们不想要 TopMost 属性，因为它在窗口级别上工作并且也覆盖其他窗口（例如浏览器）。最后，我连接了窗口的焦点事件，以确保窗口始终位于顶部。

# machine-learning - 神经网络（输入和输出层）

> ID：15550606
> 
> 赞同：2
> 
> 时间：2013-03-21T14:42:10.867
> 
> 标签：machine-learning, artificial-intelligence, neural-network

在处理多类分类时，输入层中不包括偏差的节点数（即向量）是否总是与输出层中的节点数相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:50:05.513

不，输入层摄取特征。输出层对类进行预测。特征和类的数量不需要相同；它还取决于您对多个类输出的建模方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:22:01.223

Lars Kotthoff 是对的。但是，当您使用人工神经网络构建自动[编码器](http://en.wikipedia.org/wiki/Autoencoder)时，您将希望具有相同数量的输入和输出节点，并且您将希望输出节点学习输入节点的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:31:54.770

没有，

通常输入单元的数量等于您将用于训练 NN 分类器的特征数量。

输出层的大小等于数据集中的类数。此外，如果数据集有两个类，那么只有一个输出单元就足以区分这两个类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T15:21:19.940

ANN 输出层对每个类都有一个节点：如果有 3 个类，则使用 3 个节点。输入层（通常称为特征向量）对每个用于预测的特征都有一个节点，通常还有一个额外的偏置节点。您通常只需要 1 个隐藏层，并且很难辨别其理想大小。

隐藏层节点过多会导致过度拟合和训练缓慢。隐藏层节点太少会导致拟合不足（过度泛化）。

以下是一些通用指南（[来源](https://web.archive.org/web/20140721050413/http://www.heatonresearch.com/node/707)）：

*   隐藏神经元的数量应该在输入层的大小和输出层的大小之间。
*   隐藏神经元的数量应该是输入层大小的 2/3，加上输出层的大小。
*   隐藏神经元的数量应小于输入层大小的两倍。

如果您有 3 个类和 30 个特征的输入向量，则可以从大约 23 个节点的隐藏层开始。在训练期间从该层添加和删除节点以减少错误，同时针对验证数据进行测试以防止过度拟合。

# jmeter - JMeter 将图表导出到 CSV 导出到多列，将结果写入文件导出到一列

> ID：15550607
> 
> 赞同：1
> 
> 时间：2013-03-21T14:42:11.433
> 
> 标签：jmeter

我对 JMeter 将数据结果作为一列写入 CSV 感到恼火。因此，当在 Excel 中打开 CSV 文件时，所有值都将添加到一列中（这需要烦人的手动复制/粘贴工作才能获取图表）。然后我注意到，如果我在侦听器图表上选择导出为 CSV，它实际上会将 CSV 文件导出为 Excel 中的单独列，这很棒。

默认情况下，是否可以让“将结果写入文件”将数据写入单独的列，就像使用“导出到 CSV”图表一样？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:53:02.453

假设您至少有 2 个选项：

1.  [简单数据编写](http://jmeter.apache.org/usermanual/component_reference.html#Simple_Data_Writer)器，您目前正在使用的，如您所知。
    在`jmeter.properties`文件 ( `JMETER_HOME\bin\jmeter.properties`) 中取消注释并设置`jmeter.save.saveservice.default_delimiter=;`为使用 ';' 而不是 ','（默认使用）作为 csv 文件（您正在使用“将结果写入文件”创建的文件）中的分隔符 - 如果在 Excel 中打开，这将分隔不同列中的值。

    ```
    # For use with Comma-separated value (CSV) files or other formats
    # where the fields' values are separated by specified delimiters.
    jmeter.save.saveservice.default_delimiter=; 
    ```

2.  [jmeter-plugins包中的](http://code.google.com/p/jmeter-plugins/)[灵活文件编写](http://code.google.com/p/jmeter-plugins/wiki/FlexibleFileWriter)器实现了相同的功能，并且看起来更加可定制。
    思路同上——使用“;” 将写入文件的值分开：

    ```
    Write file header: endTimeMillis;responseTime;latency;sentBytes;receivedBytes;isSuccessful;responseCode
    Record each sample as: endTimeMillis|;|responseTime|;|latency|;|sentBytes|;|receivedBytes|;|isSuccessful|;|responseCode|\r\n 
    ```

希望这可以帮助。

# pdf - 在 WinRT 中创建带有图像的 PDF 文件

> ID：15550608
> 
> 赞同：4
> 
> 时间：2013-03-21T14:42:22.540
> 
> 标签：pdf, windows-8, windows-runtime, pdf-generation

如何从 WinRT 中的图像列表创建 PDF 文件。我在这里找到了适用于 windows phone 8 的类似内容（“[在 windows phone 8 中将图像列表转换为 pdf](https://stackoverflow.com/questions/15409203/converting-list-of-images-to-pdf-in-windows-phone-8) ”）但我正在寻找适用于 windows 8 的解决方案。如果有人对此有所了解，请与我分享您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:57:19.043

试试[http://jspdf.com/](http://jspdf.com/)

这应该适用于 WinJS，但我还没有测试过。在 XAML 应用程序中，您可以尝试使用启用 jsPDF 的页面托管 Web 浏览器控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:03:17.957

[Amyuni PDF Creator for WinRT](http://w8pdf.com)（一个商业图书馆）可用于此任务。您可以通过创建该类的新实例来创建新的 PDF 文件，然后使用[AddPage](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_WinRT/AmyuniPDFCreator_IacDocument/Methods/IacDocument.AddPage_Method.htm)`AmyuniPDFCreator.IacDocument`方法添加新页面，并使用[IacPage.CreateObject](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_WinRT/AmyuniPDFCreator_IacPage/Methods/IacPage.CreateObject_Method.htm)方法将图片添加到每个页面。

C# 中用于向页面添加图片的代码如下所示：

```
public IacDocument CreatePDFFromImage()
{
    IacDocument pdfDoc = new IacDocument();
    // Set the license key
    pdfDoc.SetLicenseKey("Amyuni Tech.", "07EFCD0...C4FB9CFD");
    IacPage targetPage = pdfDoc.GetPage(1); // A new document will always be created with an empty page

    // Adding a picture to the current page
    using (Stream imgStrm = await Windows.ApplicationModel.Package.Current.InstalledLocation.OpenStreamForReadAsync("pdfcreatorwinrt.png"))
    {
        IacObject oPic = page.CreateObject(IacObjectType.acObjectTypePicture, "MyPngPicture");
        BinaryReader binReader = new BinaryReader(imgStrm);
        byte[] imgData = binReader.ReadBytes((int)imgStrm.Length);
        // The "ImageFileData" attribute has not been added yet to the online documentation
        oPic.AttributeByName("ImageFileData").Value = imgData;
        oPic.Coordinates = new Rect(100, 2000, 1200, 2000);
    }
    return pdfDoc;
} 
```

*免责声明：我目前是该库的开发人员*

对于“开源”替代方案，您可能更好地[依赖于](http://www.silverlightrecipes.com/2012/03/consuming-soap-web-services-in-windows.html)使用许多可用开源库之一创建 PDF 文件的 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:16:43.187

[ComponentOne](http://www.componentone.com/SuperProducts/PDFWinRT/)现在已经发布了与 Windows Phone for Windows Runtime 相同的 PDF 库。当然，它不是开源的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-14T07:29:10.367

如果您想将图像（.jpg）文件转换为 PDF 文件，我认为这可能会对您有所帮助。它在我的实验室工作。

```
string source = "image.jpg";
  string destinaton = "image.pdf";

  PdfDocument doc = new PdfDocument();
  doc.Pages.Add(new PdfPage());
  XGraphics xgr = XGraphics.FromPdfPage(doc.Pages[0]);
  XImage img = XImage.FromFile(source);
  xgr.DrawImage(img, 0, 0);
  doc.Save(destinaton);
  doc.Close(); 
```

谢谢。

# ios - ld：警告：忽略文件 libsqlite3.dylib，文件 /libsqlite3.dylib 中缺少所需的体系结构 i386（2 片）

> ID：15550609
> 
> 赞同：0
> 
> 时间：2013-03-21T14:42:28.630
> 
> 标签：ios, xcode

有没有人遇到过这个问题？任何人都可以提供答案吗？

尽管回答了我的第一个问题，但我会再试一次：

“Beginning iOS 6 Development”一书提供的代码（不是我的代码）在 Xcode IDE 中生成以下错误消息

```
ld: warning: ignoring file /Users/myusernamehere/Desktop/Xcode4/SQLitePersistence/libsqlite3.dylib, missing required architecture i386 in file /Users/myusernamehere/Desktop/Xcode4/SQLitePersistence/libsqlite3.dylib (2 slices)
Undefined symbols for architecture i386:
  "_sqlite3_bind_int", referenced from:
      -[ViewController applicationWillResignActive:] in ViewController.o
  "_sqlite3_bind_text", referenced from:
      -[ViewController applicationWillResignActive:] in ViewController.o
  "_sqlite3_close", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
      -[ViewController applicationWillResignActive:] in ViewController.o
  "_sqlite3_column_int", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
  "_sqlite3_column_text", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
  "_sqlite3_exec", referenced from:
      -[ViewController viewDidLoad] in ViewController.o 
```

等等

这是从书中下载的代码而不是我的代码。我已经使用终端验证 sqlite3 在我的机器上

```
Last login: Thu Mar 21 10:19:39 on ttys000
iMac1024:~ myusernamehere$ which sqlite3
/usr/bin/sqlite3 
```

再一次 有人遇到过这个问题吗？你能在这里提供解决方案吗？

当我第一次开始专业地编写软件时，我不是在寻找关于我没有提交错误或偏离主题的评论或任何其他仍在护理的人的无益评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:49:05.373

您忘记链接 SQLite 库。将此添加到项目的“构建阶段”中，转到“与库链接”并添加`libsqite3`.

# java - Java 对象数组内存要求

> ID：15550611
> 
> 赞同：3
> 
> 时间：2013-03-21T14:42:34.217
> 
> 标签：java, memory-management

假设我的班级中有一个整数数组：

```
public class Foo {
   private Integer[] arr = new Integer[20];
   .....

} 
```

在 64 位架构上，对此的空间要求为 ~ (20*8+24) + 24*20 {引用所需的空间 + 一些数组开销 + 对象所需的空间}。

为什么 java 存储对所有 20 个 Integer 对象的引用？不知道第一个内存位置和数组中的项目数就足够了吗？（假设我也在某处读到数组中的对象无论如何都是连续放置的）。我想知道这种实现的原因。对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:25:36.243

Like every other `class`, `Integer` is a reference type. This means it can only be accessed indirectly, via a reference. You cannot store an instance of a reference type in a field, a local variable, a slot in a collection, etc. -- you always have to store a reference and allocate the object itself separately. There are a variety of reasons for this:

*   You need to be able to represent `null`.
*   You need to be able to replace it with another instance *of a subtype* (assuming subtypes are possible, i.e. the class is not `final`). For example, an `Object[]` may actually store instances of any number of different classes with wildly varying sizes.
*   You need to preserve sharing, e.g. after `a[0] = a[1] = someObject;` *all three* must refer to the *same* object. This is much more important (vital even) if the object is mutable, but even with immutable objects the difference can be observed via reference equality checks (`==`).
*   You need reference assignment to be atomic (cf. Java memory model), so copying the whole instance is even more expensive than it seems.

With these and many other constraints, always storing references is the only feasible implementation strategy (in general). In very specific circumstances, a JIT compiler may avoid allocating an object entirely and store its directly (e.g. on the stack), but this is an obscure implementation detail, and not widely applicable. I only mention this for completeness and because it's a wonderful illustration of the as-if rule.

# events - 异步和事件

> ID：15550614
> 
> 赞同：3
> 
> 时间：2013-03-21T14:42:36.523
> 
> 标签：events, asynchronous, f#

我有一个函数可以异步执行一些操作，但不公开异步，而是在完成时调用带有结果的回调。我想把它变成异步的，并想出了这段代码，但似乎不太正确。有什么更好的方法吗？

```
async { 
    let ev = Event<_>()
    someAsyncExternalCodeThatWillCallTheCallbackWhenDone(fun value -> ev.Trigger value)
    let! value = Async.AwaitEvent(ev.Publish)
    return value 
} 
```

在这种情况下使用 Observable 或 ManualResetEvent 代替 Event 有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:52:58.517

我认为在这种情况下惯用的解决方案是使用`Async.FromContinuations`：

```
Async.FromContinuations(fun (cont, econt, ccont) ->
  someAsyncExternalCodeThatWillCallTheCallbackWhenDone(cont)) 
```

该`FromContinuations`函数还允许您处理异常（`econt`如果发生异常则调用）或取消（您可以将其视为创建异步计算的*基本方法）。*

也就是说，我认为使用事件没有任何问题。带有事件的代码实现了几乎相同的逻辑（我认为），但方式更复杂。

# python - 如何强制 pprint 每行打印一个列表/元组/字典元素？

> ID：15550617
> 
> 赞同：8
> 
> 时间：2013-03-21T14:42:42.607
> 
> 标签：python, list, dictionary, pretty-print, pprint

如何强制 pprint() 每行打印一个列表/元组/字典元素？

```
>>> from pprint import pprint
>>> my_var = ['one', 'two', ('red','green'), {'state' : 'Oregon', 'city' : 'Portland'}]
>>> pprint(my_var)
['one', 'two', ('red', 'green'), {'city': 'Portland', 'state': 'Oregon'}] 
```

我希望输出类似于：

```
['one',
 'two',
 ('red',
  'green'),
 {'city': 'Portland',
  'state': 'Oregon'}] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T14:42:42.607

对 pprint() 使用 width=1 参数：

```
>>> from pprint import pprint
>>> my_var = ['one', 'two', ('red','green'), {'state' : 'Oregon', 'city' : 'Portland'}]
>>> pprint(my_var, width=1)
['one',
 'two',
 ('red',
  'green'),
 {'city': 'Portland',
  'state': 'Oregon'}]
>>> 
```

[“pprint - 漂亮的数据打印机” 文档](http://docs.python.org/2/library/pprint.html)

# php - magento soap api v2 - 通过订阅时事通讯获取客户

> ID：15550619
> 
> 赞同：4
> 
> 时间：2013-03-21T14:42:44.480
> 
> 标签：php, magento, soap

我正在尝试从我的 magento 商店中检索所有客户，但只有那些在其帐户中激活了时事通讯订阅的客户。

问题：我不知道如何过滤这个属性（“newsletter”，有吗？）。

我有：

```
$proxy = new SoapClient('http://magentohost/api/v2_soap/?wsdl');
$sessionId = $proxy->login('apiUser', 'apiKey');
$params = array(
    'sessionId' => $session_id,
    'filters' => null
);
$allCustomers = $proxy->customerCustomerList($params); 
```

这将返回所有客户。任何想法如何通过时事通讯订阅过滤这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:19:17.923

通讯订阅存储是一个单独的模块。`Mage_Newsletter`. 该模块似乎没有任何 API 覆盖，但是如果您快速浏览`newsletter_subscriber`数据库表，您会看到同时也是客户的订阅者拥有与他们相关的外键。

我可能会考虑添加一个属性来`Mage_Customer`保存订阅状态，向订阅和取消订阅事件添加一个观察者来更新它。

然后，我希望将此属性添加到`Mage_Customer`API 中，以便在吸引客户时可以通过它进行过滤。

订阅事件的观察者：[https](https://stackoverflow.com/a/12991195/2205881) ://stackoverflow.com/a/12991195/2205881和[向 Magento 的订阅模块添加自定义字段](https://stackoverflow.com/questions/3155784/adding-a-custom-field-to-magentos-subscribtion-module)

扩展 v2 API：http: [//inhoo.net/ecommerce/magento/magento-api-v2/](http://inchoo.net/ecommerce/magento/magento-api-v2/)

# javascript - 如何调用函数并使用 jquery 传递变量？

> ID：15550621
> 
> 赞同：1
> 
> 时间：2013-03-21T14:42:50.413
> 
> 标签：javascript, jquery

我正在尝试做类似的事情

```
<button onclick="editUser('<?=id?>')"> 
```

我有一个使用 Ajax 更新数据库的 jquery 函数，但试图告诉函数要更新哪个 Id。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T14:45:19.673

使 HTML 变成这样：

```
<button id="myButton" data-id="12345678"> 
```

当您的页面加载时，您将执行以下操作：

```
$("#myButton").click(editUser); 
```

然后在`editUser()`

```
var id = $(this).data("id"); 
```

您的函数现在知道您感兴趣的 ID。

# xpages - 如何在 Xpages 中向 dojo 按钮添加图标？

> ID：15550623
> 
> 赞同：0
> 
> 时间：2013-03-21T14:42:51.323
> 
> 标签：xpages, dojo, dijit.form

我想在我的 Xpage 上的一个按钮上使用 dojo 按钮图标。根据网上看到的一个例子，我应该将“dijit.form.Button”添加到Dojo Type，然后添加一个带有我的按钮值的dojo属性“iconClass”；“dijitEditorIcon dijitEditorIconDelete”。

当我在 Chrome/Firefox 中查看调试控制台时，我看到一个错误：

```
dojo/parser::parse() error Error {} xspClientDojo.js:5
(anonymous function) xspClientDojo.js:5
_450 dojo.js:15
then._45d.then dojo.js:15
$DDLG_ dojo.js:15
$DDUV_ xspClientDojo.js:5
(anonymous function) dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJq_ dojo.js:15
$DDJr_ dojo.js:15
$DDJp_ dojo.js:15
$DDSM_ dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-    
1.8.1/dijit/form/Button.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/form/_ButtonMixin.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/form/DropDownButton.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/_HasDropDown.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/form/ComboButton.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/form/ToggleButton.js". dojo.js:15
XHR finished loading: "http://localhost/xsp/.ibmxspres/dojoroot-1.8.1/dijit/form/_ToggleButtonMixin.js". 
```

编辑：XP：按钮

```
<xp:button id="button1" value="Delete"
    dojoType="dijit.form.Button">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="iconClass"  
           value="dijitEditorIcon dijitEditorIconDelete">
        </xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:button> 
```

我将 djConfig 设置为 parseOnLoad: true。

我已将 Xpage 的属性设置为“Trigger dojo parse on load”。

我还有一个带有 dojo.require("dijit.form.Button"); 的 onClientLoad 事件。

如果可能的话，使用ND9...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:59:14.517

您不应该添加`dojo.require("dijit.form.Button")`事件`onClientLoad`。它有不同的用途。删除该代码并将`dijit.form.Button`其作为 Dojo 模块添加到 XPages 属性的 Resources 选项卡中。在源代码中它应该是这样的：

```
<xp:this.resources>
    <xp:dojoModule name="dijit.form.Button"></xp:dojoModule>
</xp:this.resources> 
```

# ruby-on-rails - 安装 sqlite3 (1.3.7) 时出错，Bundler 无法继续

> ID：15550624
> 
> 赞同：5
> 
> 时间：2013-03-21T14:42:53.763
> 
> 标签：ruby-on-rails, macos, heroku

使用命令时出现此错误`git push heroku master`。

```
$ git push heroku master
Counting objects: 126, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (110/110), done.
Writing objects: 100% (126/126), 36.61 KiB, done.
Total 126 (delta 19), reused 0 (delta 0)

-----> Removing .DS_Store files
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (10.0.3)
       Installing i18n (0.6.4)
       Installing multi_json (1.6.1)
       Installing activesupport (3.2.12)
       Installing builder (3.0.4)
       Installing activemodel (3.2.12)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.5)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.5)
       Installing sprockets (2.2.2)
       Installing actionpack (3.2.12)
       Installing mime-types (1.21)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.12)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.12)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.37)
       Installing activerecord (3.2.12)
       Installing activeresource (3.2.12)
       Installing coffee-script-source (1.6.1)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.3)
       Installing json (1.7.7)
       Installing rdoc (3.12.2)
       Installing thor (0.17.0)
       Installing railties (3.2.12)
       Installing coffee-rails (3.2.2)
       Installing jquery-rails (2.2.1)
       Using bundler (1.3.2)
       Installing rails (3.2.12)
       Installing sass (3.2.7)
       Installing sass-rails (3.2.6)
       Installing sqlite3 (1.3.7)
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_19fmy6g68v7he/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7 for inspection.
       Results logged to /tmp/build_19fmy6g68v7he/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out
       An error occurred whenter code hereile installing sqlite3 (1.3.7), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:whispering-taiga-7415.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:whispering-taiga-7415.git' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:40:02.197

您不能将 sqlite3 与 Heroku 一起使用。默认情况下，Heroku 的 Cedar 堆栈使用 Postgresql。您需要将`sqlite3`gem 包装在一个开发组中并包含`pg`在您的 Gemfile 中。

```
group :development, :test do 
  gem 'sqlite3'
end

gem 'pg' 
```

确保在编辑 Gemfile 后再次运行 bundle install 以便您可以推送到 heroku

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:02:05.190

Heroku 通常不支持将 SQLite 作为数据库引擎，主要是因为它们不会像 SQLite 那样在运行时为您的应用程序提供对本地文件系统的写访问权限。

相反，您应该按照 Heroku 的建议使用 PostgreSQL（与`pg`gem）作为数据库引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T19:09:43.517

尝试这个：

*   打开 Gemfile.lock 并向下滚动到 'specs:' 下的 sqlite3 (1.3.x)
*   确保它只显示为 sqlite3 (1.3.x)，没有额外的爵士乐。
*   如果显示任何额外的标签，例如“-x86-mingw32”，则将其删除。
*   运行捆绑安装。
*   然后尝试推动 Heroku 大师。

为我工作。

# r - 如何计算与不同变量条件的相关性？

> ID：15550626
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:43:04.830
> 
> 标签：r, correlation

我只想计算 sf 和 pf 之间的相关性，因为值对应于（最高值）P 的一半

```
 P=c(1,6,5,6,2,8,5)
  sf=c(1,2,6,6,4,5,5)
  Pf=c(1,6,5,8,4,8,5)
  cor(sf,Pf) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:45:22.147

如果我理解正确，那么这应该可以解决问题

```
cor(sf[P > median(P)], Pf[P > median(P)]) 
```

由于您想要 的前 50% `P`，因此这对应于 P 的值大于中位数。

# android - 奇怪的行为 2 查看列表相同的活动

> ID：15550627
> 
> 赞同：0
> 
> 时间：2013-03-21T14:43:06.747
> 
> 标签：android

我正在使用以下代码。我不知道为什么，但是即使我没有修改第二个 viewList，它的外观也消失了。我不知道如何解决它。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView>

<ListView
    android:id="@+id/listView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

* * *

```
onCreate(){
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dual);
    lv1 = (ListView) findViewById(R.id.listView1);
    lv2 = (ListView) findViewById(R.id.listView2);
    lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 , adsGenerator()));        
    lv1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {                
            getItem = arg0.getItemAtPosition(arg2).toString();          
            lv2.setAdapter(new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,adsGenerator2(getItem) ));
        }
    }); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:46:48.970

如果您想要并排的列表：给两个 ListViews`android:layout_width="0dp"`

如果您希望它们一个在另一个之上：同时提供 ListViews`android:layout_height="0dp"`并提供 LinearLayout`android:orientation="vertical"`

编辑：另外，你不应该使用`wrap_content`ListView 的高度。使用`match_parent`或使用 layout_weight 设置它。

# javascript - 如果选中复选框，如何隐藏和显示项目

> ID：15550637
> 
> 赞同：4
> 
> 时间：2013-03-21T14:43:30.623
> 
> 标签：javascript, jquery, asp.net, html

我正在尝试根据是否选中复选框来隐藏和显示一个区域。我尝试了一些选项，但要么该区域始终可见，要么始终隐藏。

**JavaScript：**

```
$(document).ready(function () {
    var mgift = $('#chkbxMGift input[type=checkbox]');     
    MshowHide();    

    mgift.change(function () {
        MshowHide();
    });
});

function MshowHide() {
    var mgift = $('#chkbxMGift input[type=checkbox]');
    var shcompany = $('#shcompany');

    if (mgift.checked) {
        shcompany.show();
    } else {       
        shcompany.hide();        
    }
} 
```

**HTML：**

```
<li>
    <div class="info">                 
        <asp:CheckBox ID="chkbxMGift" runat="server" Text="A matching gift will be made" ClientIDMode="Static"/>
    </div>
</li>

<li id="shcompany">    
    <div class="info">               
        <label for="txtCompanyName">Company Name</label>
        <asp:TextBox runat="server" ID="txtCompanyName" CssClass="narrow" />   
    </div>
    <div class="info">  
        <label for="txtCompanyPhone">Company Phone Number</label>
        <asp:TextBox runat="server" ID="txtCompanyPhone" CssClass="narrow"  />       
    </div>
</li> 
```

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:02:37.677

试试这个代码

```
 $(document).ready(function () {
     $('#chkbxMGift').click(function () {
         var $this = $(this);
         if ($this.is(':checked')) {
             $('#shcompany').hide();
         } else {
             $('#shcompany').show();
         }
     });
 }); 
```

希望它能解决你的问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T14:49:48.100

你的选择器是错误的。

```
var mgift = $('#chkbxMGift input[type=checkbox]'); 
```

这意味着您`input`从 parent中选择子节点`#chkbxMGift`。

我相信这是您需要的选择器：

```
var mgift = $('input#chkbxMGift[type=checkbox]'); 
```

以下是对您的代码的一些改进：

```
$(document).ready(function () {
    var mgift = $('input#chkbxMGift[type=checkbox]'); 
    var shcompany = $('#shcompany');
    // check for default status (when checked, show the shcompany)
    if (mgift.attr('checked') !== undefined){
        shcompany.show();
    } else {
        shcompany.hide();
    }

    // then simply toggle the shcompany on every change
    mgift.change(function(){
        shcompany.toggle();
    });
}); 
```

jQuery 的[切换](http://api.jquery.com/toggle/)非常有用，并在 1.0 版中添加，因此您应该可以使用它。

这是 jsFiddle 中的概念证明，只有最低限度：

[http://jsfiddle.net/Y39Bu/1/](http://jsfiddle.net/Y39Bu/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:50:57.627

[这是从这个](https://stackoverflow.com/questions/3860629/show-hide-content-depending-if-a-checkbox-is-checked?rq=1)答案中偷来的：

[http://jsfiddle.net/MH8e4/4/](http://jsfiddle.net/MH8e4/4/)

```
$('.wpbook_hidden').css({
'display': 'none'
});

alert($(':checkbox:checked').attr('id'))
$(':checkbox').change(function() {
    var option = 'wpbook_option_' + $(this).attr('id');
    if ($('.' + option).css('display') == 'none') {
        $('.' + option).fadeIn();
    }
    else {
        $('.' + option).fadeOut();
    }
}); 
```

在你问你的问题之前搜索类似的问题。如果这解决了您的问题，请给原作者署名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:49:24.940

您是否尝试过直接更改 CSS？如

```
document.getElementById("shcompany").style.display="none"; 
```

或者

```
document.getElementById("shcompany").style.visibility="hidden"; 
```

（或“可见”）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:51:43.757

当一个简单的 CSS 属性更改可以解决问题时，为什么要使用 JQuery？

只需更改 div 的类或修改其样式：

如果您希望它即使在隐藏使用时也**占用空间**`visibility:hidden`（分别`visibility:visible`）

如果您希望它在隐藏时**不**占用空间，请使用 css `display:none`（分别`display:block`）

# javascript - 主干：模型对象内的集合

> ID：15550638
> 
> 赞同：0
> 
> 时间：2013-03-21T14:43:35.157
> 
> 标签：javascript, backbone.js

我想我对 Backbone 的理解有些问题。为什么在集合内 -> 模型 [0] -> 子项我看到包含所有集合元素的集合。在模型中收集的目的是什么。我们使用更多的内存来创建对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:44:33.877

模型只是简单地保留对其包含集合的引用。它不是同一个集合的深层副本。从[文档](http://backbonejs.org/#Model-constructor)：

> `model.collection`否则，当您第一次将模型添加到集合时，会自动添加该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:47:55.277

它在那里，因此模型可以生成一个 URL。即，如果集合有一个URI /collections/，那么默认模型的url 函数将为模型返回/collections/1，假设模型有一个id。

# debugging - 如何在 Solaris 10 上安装 gdb？

> ID：15550640
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:43:35.197
> 
> 标签：debugging, unix, solaris

我已经安装了 sun studio，但没有看到安装 gdb。我看到 gcc，gcore。这是否意味着gdb不是sun studio的一部分，应该单独安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:40:43.493

Sun Studio 调试器是 dbx，而不是 gdb。请注意，它提供了一个 gdb 模式来帮助人们更熟悉 gdb 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-06T10:19:40.660

我们可以像任何其他软件一样在 Solaris 中安装 gdb。但我们需要解决对其他库的一些依赖。 [https://www.opencsw.org/packages/gdb/](https://www.opencsw.org/packages/gdb/)。按照链接解决依赖关系。但更好地使用 dbx 它类似于 gdb 并且它们很容易在 solaries 中使用。这是一些示例命令

step1 :dbx - processid step2: where （检查堆栈跟踪的命令） step3:stop 方法名或停止 sourcefilename:lineno step4:step （进入函数的命令） step5:next （移动到下一行） step7:cont （继续执行） step8:run （运行命令）

# c# - C#路径中的半圆角矩形

> ID：15550641
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:43:36.307
> 
> 标签：c#, winforms, rectangles

我有问题，

我有圆角矩形。它只在右侧是圆形的，在左侧是直的。我想用其他方式来做——左圆，右直。我应该改变什么？

```
int ArcWidth = 10 * 2;
int ArcHeight = 10 * 2;
int ArcX1 = Rect.Left;
int ArcX2 = Rect.Right -(ArcWidth + 1);
int ArcY1 = Rect.Top;
int ArcY2 = Rect.Bottom -(ArcHeight + 1);

path.AddArc(ArcX1, ArcY1, 1, 1, 180, 90); // Top Left
path.AddArc(ArcX2, ArcY1, ArcWidth, ArcHeight, 270, 90); //Top Right
path.AddArc(ArcX2, ArcY2, ArcWidth, ArcHeight, 360, 90); //Bottom Right
path.AddArc(ArcX1, ArcY2, 1, ArcHeight, 90, 90); //Bottom Left 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:46:23.243

交换圆形的边。看起来你的所有方面都布置好了。切换所有号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:19:21.393

我在这里找到了解决方案：

[http://tech.pro/tutorial/656/csharp-creating-rounded-rectangles-using-a-graphics-path](http://tech.pro/tutorial/656/csharp-creating-rounded-rectangles-using-a-graphics-path)

方法是画一条线，而不是弧线......（是的，我知道这很明显）

# google-sheets - 谷歌电子表格翻译，忽略变量名

> ID：15550642
> 
> 赞同：0
> 
> 时间：2013-03-21T14:43:37.877
> 
> 标签：google-sheets

一个有趣的 Google 电子表格问题，我有一个基于 key=value 的语言文件，我已将其复制到电子表格中，例如。

```
titleMessage=Welcome to My Website
youAreLoggedIn=Hello #{user.name} you are now logged in
facebookPublish=Facebook Publishing 
```

我设法将键/值分成两列，然后翻译值列，并用键重新加入它，瞧！这给了我一个翻译的语言文件

但是您可能已经发现其中有一些变量（例如#{user.name}）是由我的应用程序注入的，显然我不想翻译它们。

所以这是我的问题，考虑到以下单元格内容......

```
Hello #{user.name} you are now logged in 
```

是否有一个函数可以使用 TRANSLATE 函数翻译内容，但忽略 #{ } 中的任何内容（这可能在句子中的任何位置）

任何 Google 电子表格大师都可以为我提供解决方案吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T19:50:40.047

如果最多出现一次#{}，那么您可以使用 SPLIT 函数将字符串分成三个部分，如下所示。

```
A           B                   C                 D           E
Original    =SPLIT(An, "#{}")   First piece       Tag         Rest of string
                                Translate         Keep as is  Translate 
```

用 CONCATENATE 将这些部分放在一起。

```
=CONCATINATE(Cn,Dn,En) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-28T22:57:40.787

您不能只是拆分和连接，因为不同的语言使用不同的主语/谓语/宾语等词序，还因为几种语言会根据它们在句子中的作用来修改具有不同前缀/后缀/拼写变化的名词。这一切都非常复杂。谷歌需要在我们想要引用而不是翻译的任何术语周围启用某种括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-21T06:44:10.083

我想出了同样的问题。

假设转义模式是`#{sth.sth}`（在正则表达式中`#{[\w.]+}`）。将它们替换为谷歌翻译认为不可翻译的字符串，如`VAR`.

翻译后，将术语替换为原始模式。

这是我在电子表格的脚本编辑器中执行此操作的方法：

```
function myTranslate(text, source_language, target_language) {
  if(text.toString()) {
    var str = text.toString();
    var regex = /#{[\w.]+}/g; // g flag for multiple matches
    var replace = 'VAR'; // Replace #{variable} to prevent from translation
    var vars = str.match(regex).reverse(); // original patterns
    str = str.replace(regex, replace);

    str = LanguageApp.translate(str, source_language, target_language);

    var ret = '';
    for (var idx = str.search(replace); idx; idx = str.search(replace)) {
      ret += str.slice(0, idx) + vars.pop();
      str = str.slice(idx+replace.length);
    }
    return ret;
  }
  return null;
} 
```

# binding - Shallow & Deep Binding - 这个程序会打印什么？

> ID：15550648
> 
> 赞同：11
> 
> 时间：2013-03-21T14:43:47.260
> 
> 标签：binding, programming-languages, dynamic-binding, static-binding

我不知道该怎么做...

```
function f1()
{
    var x = 10;
    function f2(fx)
    {
        var x;
        x = 6;
        fx();
    };

    function f3()
    {
        print x;
    };

    f2(f3);
}; 
```

对于以下两种绑定方法中的每一种，程序会打印什么？A) 浅绑定 B) 深绑定

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-29T17:20:57.443

只有当过程可以作为参数传递给函数时，深/浅绑定才有意义。

*   **深度绑定**在过程作为参数传递时绑定环境。
*   **浅绑定**在实际调用过程时绑定环境。

## **深度绑定。**

这里*f3()*获取*f1()的环境并将**x*的值打印为*10*，这是*f1()*的局部变量。

## **浅绑定。**

*f3()在**f2()*中调用，因此获取*f2()*的环境并将 x 的值打印为 6，这是*f2()的本地*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-24T01:48:23.123

• 执行传递的子程序的调用语句的环境（浅绑定）

• 传递的子程序的定义环境（深度绑定）。

在某些情况下，声明子程序的子程序也会将该子程序作为参数传递。在这些情况下，深度绑定和临时绑定是相同的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-19T00:15:49.747

浅绑定：执行传递的子程序的调用语句的环境 深度绑定：传递的子程序的定义环境 Ad hoc 绑定：将子问题作为实际参数传递的调用语句的环境

# .net - 如何捕获文件复制/移动事件的详细信息，例如源文件名

> ID：15550649
> 
> 赞同：7
> 
> 时间：2013-03-21T14:43:52.030
> 
> 标签：.net, windows, events, filesystems, filesystemwatcher

只是想写一个应用程序来跟踪磁盘中文件之间的关系。

我们知道 FileSystemWatcher 可以在创建、重命名或删除文件时触发 evetns。

但是 FileSystemWatcher 不能告诉我们源文件的路径。

例如，假设 中有一个文件`F1`，`folder1`然后我们复制`F1`到另一个名为`folder2`的文件夹，新的文件名仍然是`F1`. 在这种情况下，`FileSystemWatcher`可以告诉我们在`folder2`. 但是它不能告诉我们新的是从in`F1`中复制过来的，而这个信息正是我们所需要的。`F1``folder1`

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:55:21.383

这是因为就文件系统而言，没有“复制文件”这样的操作。

当您运行文件复制命令时，它实际上会打开旧文件，创建新文件，将内容读入内存，写入新文件，然后关闭两者。所有文件系统看到的都是写入；没有污点跟踪系统可以确定数据实际上来自另一个文件而没有修改。

最后一步，将文件副本与通常将数据写入文件区分开来，是更改目标的元数据以匹配源。但是同样，文件系统不知道您为什么要更改属性或要匹配它们两个的文件。

文件系统只有链接和取消链接的特殊意识。因此，可以检测到由“创建第二个内容链接；删除第一个链接”组成的移动。如果将复制实现为“创建标记为写入时复制的新链接”，那么您会发现它，但写入时复制并不是一个非常流行的文件系统功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:51:51.723

问题是：您不会为文件夹“f1”触发复制事件。

触发文件夹 1 的文件监视的是：更新文件、将文件从其他目录复制到“f1”或删除文件。

您可以尝试在“f1”中使用两个文件..同时将文件复制到“f2”您可以更新第二个文件，从而触发更新事件处理程序............

希望这可以帮助....

# ios - iOS：从科尔多瓦 2.2.0 升级到 2.3.0 时面临问题

> ID：15550652
> 
> 赞同：4
> 
> 时间：2013-03-21T14:44:08.877
> 
> 标签：ios, cordova

我一直在用cordova 2.2.0 版本开发一个phonegap iOS 应用程序。现在由于某种原因我想升级到cordova 2.3.0。为此，我将 phonegap 文档作为参考，其中他们提到了分步方法。

除了以下步骤，我什么都能做

**通过在项目文件上运行脚本 bin/cordova_plist_to_config_xml 将 Cordova.plist 文件转换为 config.xml。**

如何运行该脚本以及我应该在哪里运行它。我已经在终端中运行了它，但出现以下错误

bash：找不到这样的文件或目录

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:33:04.853

该脚本用于将您的cordova 2.2 Plist 转换为cordova 2.3 XMLConfig...在2.3 版本中，对应的普通plist 需要xmlconfig..所以我们必须将我们的plist 转换为xmlconfig..以下脚本将执行此操作。

这个脚本的语法是

```
./cordova_plist_to_config_xml /Path to your Xcode project/ 
```

例子：

```
./cordova_plist_to_config_xml /Users/shabab/Desktop/Plancentral/Plancentral.xcodeproj 
```

# objective-c - 我似乎陷入了内循环

> ID：15550654
> 
> 赞同：1
> 
> 时间：2013-03-21T14:44:13.230
> 
> 标签：objective-c

我正在尝试完成 iTunes U 上当前可用的目标 c 课程的作业 2。据我所知，我已经从幻灯片中正确输入了所有代码，但在运行时仍然出现错误。我在唯一的错误标志周围添加了几个 NSLog 输出，我必须确切地看到发生了什么。该应用程序编译良好，但在运行时遇到错误。

看起来循环运行正常，直到它最后一次运行。我不知道如何打破它。

生成的日志如下。

```
2013-03-21 08:30:55.604 Matchismo[5897:c07] I Hate you this much 1
2013-03-21 08:30:55.802 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.803 Matchismo[5897:c07] I Hate you this much 2
2013-03-21 08:30:55.803 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.804 Matchismo[5897:c07] I Hate you this much 3
2013-03-21 08:30:55.804 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.804 Matchismo[5897:c07] I Hate you this much 4
2013-03-21 08:30:55.805 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.805 Matchismo[5897:c07] I Hate you this much 5
2013-03-21 08:30:55.806 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.806 Matchismo[5897:c07] I Hate you this much 6
2013-03-21 08:30:55.807 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.807 Matchismo[5897:c07] I Hate you this much 7
2013-03-21 08:30:55.807 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.807 Matchismo[5897:c07] I Hate you this much 8
2013-03-21 08:30:55.808 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.808 Matchismo[5897:c07] I Hate you this much 9
2013-03-21 08:30:55.808 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.809 Matchismo[5897:c07] I Hate you this much 10
2013-03-21 08:30:55.809 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.809 Matchismo[5897:c07] I Hate you this much 11
2013-03-21 08:30:55.810 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.810 Matchismo[5897:c07] I Hate you this much 12
2013-03-21 08:30:55.810 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.811 Matchismo[5897:c07] I Hate you this much 13
2013-03-21 08:30:55.811 Matchismo[5897:c07] I love you like this, ♥
2013-03-21 08:30:55.811 Matchismo[5897:c07] I Hate you this much 1
2013-03-21 08:30:55.811 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.812 Matchismo[5897:c07] I Hate you this much 2
2013-03-21 08:30:55.812 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.812 Matchismo[5897:c07] I Hate you this much 3
2013-03-21 08:30:55.813 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.813 Matchismo[5897:c07] I Hate you this much 4
2013-03-21 08:30:55.814 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.814 Matchismo[5897:c07] I Hate you this much 5
2013-03-21 08:30:55.815 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.815 Matchismo[5897:c07] I Hate you this much 6
2013-03-21 08:30:55.815 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.816 Matchismo[5897:c07] I Hate you this much 7
2013-03-21 08:30:55.816 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.817 Matchismo[5897:c07] I Hate you this much 8
2013-03-21 08:30:55.817 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.817 Matchismo[5897:c07] I Hate you this much 9
2013-03-21 08:30:55.818 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.818 Matchismo[5897:c07] I Hate you this much 10
2013-03-21 08:30:55.818 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.819 Matchismo[5897:c07] I Hate you this much 11
2013-03-21 08:30:55.819 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.820 Matchismo[5897:c07] I Hate you this much 12
2013-03-21 08:30:55.820 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.820 Matchismo[5897:c07] I Hate you this much 13
2013-03-21 08:30:55.821 Matchismo[5897:c07] I love you like this, ♦
2013-03-21 08:30:55.821 Matchismo[5897:c07] I Hate you this much 1
2013-03-21 08:30:55.822 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.822 Matchismo[5897:c07] I Hate you this much 2
2013-03-21 08:30:55.822 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.823 Matchismo[5897:c07] I Hate you this much 3
2013-03-21 08:30:55.823 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.824 Matchismo[5897:c07] I Hate you this much 4
2013-03-21 08:30:55.824 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.824 Matchismo[5897:c07] I Hate you this much 5
2013-03-21 08:30:55.825 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.825 Matchismo[5897:c07] I Hate you this much 6
2013-03-21 08:30:55.825 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.826 Matchismo[5897:c07] I Hate you this much 7
2013-03-21 08:30:55.826 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.826 Matchismo[5897:c07] I Hate you this much 8
2013-03-21 08:30:55.827 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.827 Matchismo[5897:c07] I Hate you this much 9
2013-03-21 08:30:55.827 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.827 Matchismo[5897:c07] I Hate you this much 10
2013-03-21 08:30:55.828 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.834 Matchismo[5897:c07] I Hate you this much 11
2013-03-21 08:30:55.834 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.835 Matchismo[5897:c07] I Hate you this much 12
2013-03-21 08:30:55.835 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.835 Matchismo[5897:c07] I Hate you this much 13
2013-03-21 08:30:55.836 Matchismo[5897:c07] I love you like this, ♠
2013-03-21 08:30:55.836 Matchismo[5897:c07] I Hate you this much 1
2013-03-21 08:30:55.836 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.837 Matchismo[5897:c07] I Hate you this much 2
2013-03-21 08:30:55.837 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.837 Matchismo[5897:c07] I Hate you this much 3
2013-03-21 08:30:55.838 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.838 Matchismo[5897:c07] I Hate you this much 4
2013-03-21 08:30:55.838 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.839 Matchismo[5897:c07] I Hate you this much 5
2013-03-21 08:30:55.839 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.839 Matchismo[5897:c07] I Hate you this much 6
2013-03-21 08:30:55.839 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.840 Matchismo[5897:c07] I Hate you this much 7
2013-03-21 08:30:55.840 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.840 Matchismo[5897:c07] I Hate you this much 8
2013-03-21 08:30:55.841 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.841 Matchismo[5897:c07] I Hate you this much 9
2013-03-21 08:30:55.841 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.841 Matchismo[5897:c07] I Hate you this much 10
2013-03-21 08:30:55.842 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.842 Matchismo[5897:c07] I Hate you this much 11
2013-03-21 08:30:55.842 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.843 Matchismo[5897:c07] I Hate you this much 12
2013-03-21 08:30:55.843 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.843 Matchismo[5897:c07] I Hate you this much 13
2013-03-21 08:30:55.843 Matchismo[5897:c07] I love you like this, ♣
2013-03-21 08:30:55.844 Matchismo[5897:c07] -[PlayingCard isFaceUp]: unrecognized selector sent to instance 0x8670610
2013-03-21 08:30:55.845 Matchismo[5897:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[PlayingCard isFaceUp]: unrecognized selector sent to instance 0x8670610'
*** First throw call stack:
(0x1c96012 0x10d3e7e 0x1d214bd 0x1c85bbc 0x1c8594e 0x2dd9 0x2a8e 0xb015be 0xb010e7 0xb2bb58 0x41de1a 0x41de55 0x10e7663 0x1c9145a 0x233b1c 0xf87e7 0xf8dc8 0xf8ff8 0xf9232 0x483d5 0x4876f 0x48905 0x51917 0x1596c 0x1694b 0x27cb5 0x28beb 0x1a698 0x1bf1df9 0x1bf1ad0 0x1c0bbf5 0x1c0b962 0x1c3cbb6 0x1c3bf44 0x1c3be1b 0x1617a 0x17ffc 0x259d 0x24c5)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

扑克牌甲板.m

```
//
//  PlayingCardDeck.m
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import "PlayingCardDeck.h"
#import "PlayingCard.h"

@implementation PlayingCardDeck

- (id)init
{
    self = [super init];

    if (self) {
        for (NSString *suit in [PlayingCard validSuits]) {
            for (NSUInteger index = 1; index <= [PlayingCard maxRank]; index++) {
                PlayingCard *card = [[PlayingCard alloc] init];
                card.rank = index;
                card.suit = suit;
                NSLog(@"I Hate you this much %d", card.rank);
                [self addCard:card atTop:YES];                  //error is here
                NSLog(@"I love you like this, %@", card.suit);

            }
        }
    }
    return self;
}

@end 
```

错误是黄色三角形，上面写着：发送'PlayingCard *_strong parameter of type'Card*'的不兼容指针类型

扑克牌.h

```
//
//  PlayingCard.h
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import "Card.h"

@interface PlayingCard : NSObject

@property (strong, nonatomic) NSString *suit;
@property (nonatomic) NSUInteger rank;

+ (NSArray *)validSuits;
+ (NSUInteger)maxRank;

@end 
```

扑克牌.m

```
//
//  PlayingCard.m
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import "PlayingCard.h"

@implementation PlayingCard

- (int)match:(NSArray *)otherCards
{
    int score = 0;
    if ([otherCards count] == 1) {
        PlayingCard *otherCard = [otherCards lastObject]; // lastObject never goes out of bounds with an Array
        if ([otherCard.suit isEqualToString:self.suit]) {
            score = 1;
        } else if (otherCard.rank == self.rank) {
            score = 4;
        }
    }
    return score;
}

- (NSString *)contents
{
    NSArray *rankStrings = [PlayingCard rankStrings];
    return [rankStrings[self.rank] stringByAppendingString:self.suit];
}

@synthesize suit = _suit;

+ (NSArray *)validSuits
{
    static NSArray *validSuits = nil;
    if (!validSuits) validSuits = @[@"♥",@"♦",@"♠",@"♣"];
    return validSuits;
}

+ (NSArray *)rankStrings
{
    static NSArray *rankStrings = nil;
    if (!rankStrings) rankStrings = @[@"?",@"A",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"J",@"Q",@"K"];
    return rankStrings;
}

- (void)setSuit:(NSString *)suit
{
    if ([[PlayingCard validSuits] containsObject:suit]){
        _suit = suit;
    }
}

- (NSString *)suit
{
    return _suit ? _suit : @"?";
}

+ (NSUInteger)maxRank { return [self rankStrings].count-1; }

- (void)setRank: (NSUInteger) rank
{
    if (rank <= [PlayingCard maxRank]) {
        _rank = rank;
    }
}

@end 
```

添加了以下内容：

卡片.h

```
//
//  Card.h
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface Card : NSObject

@property (strong, nonatomic) NSString * contents;

@property (nonatomic, getter=isFaceUp) BOOL faceUp;
@property (nonatomic, getter=isUplayable) BOOL uplayable;

- (int)match:(NSArray *)otherCards;

@end 
```

卡.m

```
//
//  Card.m
//  Matchismo
//
//  Created by Isao Ishibashi on 2/3/13.
//  Copyright (c) 2013 Isao's Awesome App Store. All rights reserved.
//

#import "Card.h"

@implementation Card

- (int)match:(NSArray *)otherCards
{
    int score = 0;

    for(Card *card in otherCards) {
        if ([card.contents isEqualToString:self.contents]) {
            score = 1;
        }
    }
    return score;
}
//added
- (NSString*) contents
{
    return @"?";
}

@end 
```

甲板.h

```
//
//  Deck.h
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "Card.h"

@interface Deck : NSObject

- (void)addCard:(Card *)card atTop:(BOOL)atTop;

- (Card *)drawRandomCard;

@end 
```

甲板.m

```
//
//  Deck.m
//  Matchismo
//
//  Created by James on 3/13/13.
//  Copyright (c) 2013 James. All rights reserved.
//

#import "Deck.h"

@interface Deck()

@property (strong, nonatomic) NSMutableArray *cards;

@end

@implementation Deck

- (NSMutableArray *)cards
{
    if (!_cards) _cards = [[NSMutableArray alloc] init];
    return _cards;
}

- (void)addCard:(Card *)card atTop:(BOOL)atTop
{
    if (atTop) {
        [self.cards insertObject:card atIndex:0];
    } else {
        [self.cards addObject:card];
    }
}

- (Card *)drawRandomCard
{

    Card *randomCard = nil;

    if (self.cards.count) {
        unsigned index = arc4random() % self.cards.count;
        randomCard = self.cards[index];
        [self.cards removeObjectAtIndex:index];
    }

    return randomCard;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:16:33.243

好吧，让我们一一解决：

> 错误是黄色三角形，上面写着：发送'PlayingCard *_strong parameter of type'Card*'的不兼容指针类型

这是一个类型错误。一个类型`Card`的对象和一个类型的对象`PlayingCard`是不兼容的，即使它们（或者我假设）都是从`NSObject`. 类型继承意味着当你有一个基类 T 和 T 的两个子类（S 和 C）时，S 和 C 是不兼容的类型，因为它们不能安全地相互解析。Objective-C 允许您放弃这种类型安全，因此解决此问题的方法是重构您的方法以接受任何对象，`id`或创建`PlayingCard`的子类`Card`，而不仅仅是导入其定义。继承由冒号右侧的超类决定，而不是由 import 语句决定。

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[PlayingCard isFaceUp]：无法识别的选择器发送到实例 0x8670610”

这再次源于类型不兼容。我可以假设`Card`该类是唯一实现的`-isFaceUp:`，而不是`PlayingCard`。如果是这样，只需`PlayingCard`从 继承`Card`。如果没有，请实现`-isFaceUp:`或将其转发到`Card`.

> 似乎被困在一个内部循环中

恰恰相反。斯坦福在这里布置的练习实际上是循环遍历并为每套花色添加一种类型的卡片。循环不是问题，您的类型错误是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:42:48.277

我有完全相同的问题。CodaFi 说的完全正确，当我修复它时解决了这个问题。我的错误地说 Deck，但你的说 NSObject。修改你的阅读：

```
#import "Deck.h"

@interface PlayingCard : Card  // <==== Instead of NSObject 
```

这一修复纠正了这两个问题。

但是，请将正确答案归功于 CodaFi 而不是我——我只是向您展示了代码，因为我也有它。

我检查了第 2 课的幻灯片，它也这么说，所以我知道我搞砸了。很多代码。

祝你好运。

# python - 使用 python 抓取谷歌新闻

> ID：15550655
> 
> 赞同：17
> 
> 时间：2013-03-21T14:44:13.000
> 
> 标签：python, web-scraping, google-news

我正在为不同的新闻媒体创建一个网络爬虫，对于《纽约时报》和《卫报》来说，这很容易，因为他们有自己的 API。

现在，我想从这家报纸 GulfTimes.com 上抓取结果。他们没有在他们的网站上提供高级搜索，所以我求助于谷歌新闻。但是，Google 新闻 Api 已被弃用。我想要的是从高级搜索中检索结果的数量，例如关键字 =“埃及”和 begin_date="10/02/2011" 和 end_date="10/05/2011"。

这在 Google 新闻 UI 中是可行的，只需将源设置为“Gulf Times”以及相应的查询和日期，并简单地手动计算结果的数量，但是当我尝试使用 python 执行此操作时，我得到一个 403 错误，这是可以理解的.

关于我将如何做到这一点的任何想法？或者除了谷歌新闻之外还有其他服务可以让我这样做吗？请记住，我会一次发出近 500 个请求。

```
import json
import urllib2
import cookielib
import re
from bs4 import BeautifulSoup

def run():
   Query = "Egypt"
   Month = "3"
   FromDay = "2"
   ToDay = "4"
   Year = "13"
   url='https://www.google.com/search?pz=1&cf=all&ned=us&hl=en&tbm=nws&gl=us&as_q='+Query+'&as_occt=any&as_drrb=b&as_mindate='+Month+'%2F'+FromDay+'%2F'+Year+'&as_maxdate='+Month+'%2F'+ToDay+'%2F'+Year+'&tbs=cdr%3A1%2Ccd_min%3A3%2F1%2F13%2Ccd_max%3A3%2F2%2F13&as_nsrc=Gulf%20Times&authuser=0'
   cj = cookielib.CookieJar()
   opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
   request = urllib2.Request(url)   
   response = opener.open(request)
   htmlFile = BeautifulSoup(response)
   print htmlFile

run() 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T15:48:10.247

您可以使用很棒的[请求](http://docs.python-requests.org/en/latest/)库：

```
import requests

URL = 'https://www.google.com/search?pz=1&cf=all&ned=us&hl=en&tbm=nws&gl=us&as_q={query}&as_occt=any&as_drrb=b&as_mindate={month}%2F%{from_day}%2F{year}&as_maxdate={month}%2F{to_day}%2F{year}&tbs=cdr%3A1%2Ccd_min%3A3%2F1%2F13%2Ccd_max%3A3%2F2%2F13&as_nsrc=Gulf%20Times&authuser=0'

def run(**params):
    response = requests.get(URL.format(**params))
    print response.content, response.status_code

run(query="Egypt", month=3, from_day=2, to_day=2, year=13) 
```

你会得到 status_code=200。

而且，顺便说一句，看看[scrapy](http://scrapy.org/)项目。没有什么比这个工具更简单了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-03T16:06:46.650

您可以使用[`google-search-results`](https://pypi.org/project/google-search-results)包从 Google 新闻中提取数据。这是一个免费试用的付费 API。

[在 Repl.it 上查看演示](https://repl.it/@ilyazub/AlienatedFrizzyProfiler)

```
from serpapi import GoogleSearch
import os

month = 4
from_day = 2
to_day = 3
year = 2020

params = {
    "engine": "google",
    "q": "Trump",
    "google_domain": "google.com",
    "tbm": "nws",
    "tbs": f"cdr:1,cd_min:{month}/{from_day}/{year},cd_max:{month}/{to_day}/{year}",
    "api_key": os.getenv("API_KEY"),
}

client = GoogleSearch(params)
data = client.get_dict()

print(f"Raw HTML: {data['search_metadata']['raw_html_file']}")
print(f"JSON endpoint: {data['search_metadata']['json_endpoint']}")
print()

print("News results")

for result in data['news_results']:
    print(f"""
Title: {result['title']}
Snippet: {result['snippet']}
Date: {result['date']}
""") 
```

**JSON 响应的一部分**

```
{
  "news_results": [
    {
      "position": 1,
      "title": "Trump Promotes Oil Deal That May Not Exist",
      "link": "https://www.nytimes.com/2020/04/02/us/politics/trump-russia-saudi-arabia-oil.html",
      "source": "The New York Times",
      "date": "15 hours ago",
      "snippet": "WASHINGTON — When oil prices crashed in early March after a dispute between \nRussia and Saudi Arabia, President Trump put a positive spin on the news.",
      "thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHAAcAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAACBAEDBQAGB//EADkQAAIBAwMCAgcHAwMFAAAAAAECAwAEEQUSITFBE1EGFCJhcYGhIzJSkbHB8EJi0STh8RUlc5Ky/8QAGQEAAwEBAQAAAAAAAAAAAAAAAQIDAAQF/8QAJBEAAgICAgEEAwEAAAAAAAAAAAECEQMxEiFhIjJBcRMUUQT/2gAMAwEAAhEDEQA/APQZrs1FdQMFmuzQ1NYxOa6ozXZrGJzU0GakGsYMVmaneXttcTRWMIlIGGBAJQ7N2Rkj49xxWiDzXmrmeSyuLm5VHQ3MjeMWPQeHIqlSRjqVqWS+iuOjas7i4kuZY5oyvh/ezjjIU9vjTlYujSFfU4AHdhFIJpyCBId2fL4D5VsE0cbuIMiXLoKoNRmozVCZXu4rkBkuLeMNtDyqp4zkE/8ANTaqkl/aLIPZ8dAeSMDPP899DaKraoix7huvSACxJGHP7CpzltFIxuidrR3VyjS71SZlTgcAUeaqfaLq6Ef3fHfjy5oqMPagSXbDzXZoM1O6mBQVdmhzXZrGoLNZnpHPD6nHH9puEyF/axyTwR8q0qw/SWHfCrbAd0iDt7Q+NJNdDwNXTpFeyg2tkrEoIxjB8qYzSWmR+FaKgXAwpHH9o/fNNZpo6Fkuwia7NBmozRBQenH/ALnZ8Z+3Tj5/5xQ2B8XVYg3s7rs57f1mrNH51ez/APMP3odKO7WYNx63Lcn4moT3L6KR0vspO1Z7jbwDO5+v+1EKqJzLMfOZ/wD6NGDVYe1Cy9zDrs0OaquJ0t4zJKWCDrtUt+lMKXg1xNVI4dVYZAI4yCD9aLdWCWA0lr7AabAGQSBn4Rs44I5/n6cUzmkdYvYo444wwLKjZDJuHUH9x8KSY0B62bdYWj/igUjNFmlNMmSbTrXaW3LEobI70zmmjoD2FmoqM11MKXaIc6zZ8gfa/sap0mdY9VtZCQwM7HOe3tV1raahaahbS3NtcIqYdpFKdSMYA56Zqq0tXs3QzKRJGzFRIMgZ6Hp86455U7f9R0xxtIC3lNyGZAAzSPgDtliRVgZWAMbBlIBB88jNV2Jit7k7LNlDOJHwxyPyX8h76suptHsxm59ZRRGGHO7HTphcnyorPQHisqZJBsnEhILlNm7jpnPSmtP2tqNsG6AnP/qaIXGjPM1kst140D5IKHqV8yvPHarbdtOt7iKX1iQlcsv2Z5GDk0HlTi09jLH6k1ozrUgQJtGOO5zVu6m4bbTjENk0y49nlDwfmBQvaRIrO12oVfvExkAdutWjmjSRKWKVi+6srUkjlMu5efCkI575H+DW3Hbwypviu0dcE5VSaSvNMWRrzbKsuy23AFMEE7s/tyaznF6NGLWxfQxssI1AA9kdD8a0M+dJ6ZYRLpsSreIgfcikRkZIdunHOc+Qrli8CKHbcqY2HsuiDDdjkEKRgg9aX88V0N+Fy7G6lQzZ2jOBk1mxslqrCe5IAY75dg9nJyM4z2opL6B7O4a3aVWO0hw/OSyAED41v2F/DPC72D/1yNrsK9/FdQycFI0IKDuT5cE9vKgSW4utQmiudPi9XZmXxRexDCjOMKoBweOM8ce+lvR+wk1OKeDSnsnkYF5XgeQnAI4G9iBzwcYqr0djhmvNVub26lfw5iYo0vmZQpJzkA+ycdj07dKg4pX4K23QxZsZZ3nayZX8OUHOooeNhP3gxHu6cU5ckSQNNFC/hNIyLHJMsgbBU7h5DDHjHGKWktrYpKInY24WXHizEhxsbGcnJ49/1zSzLNNokzxqvqVtGEQRgDazMuSSGJJbA6/CsldMEurQxpuoetPuubFTvGCWtwwLFRkjGPLp/itZ5HPhKumSAlXxi3PsnL/3cZ+fWvnaWM1pNEbm3CCaEug38KNp94/hrY1e60+2uLeC5hBURlVYTOnshiM8HmnlBX0LGTrs9NeanYxmQyeGwWZ42BIwGGPNh5j+c0T61p3gB9kAU7Sc8A5Ix/V8O9ZWi6MdS9G31S0toEhspXlEcztuO1Q2c8/XyrN0y/F5Be3VnZCJ5ZzkFva3nbn4cbfzNLxG5Weng1q0MrpH6rsMRkLRl9wHTz4599W6g0Nw+oBfV1PhiMbpNvtYIyCD15qzStMt5DcH1xEeaHw9nhocAg8DD9uaG20W9uEuJ5U8XxIxiTwUAbK54PxJ6eRqfJWPx6FNMu4LfTI5XjV5IpZsM8m053DsG4PPcU0ZbKSVVNrJ/ptyxuZJB97k5y/6/SlvRvSJLiyjhumddrS+xJFkqVdeCDz5dfKnzoVvPctJHqWGUEKPCwBkEcH/AH7Clco2MouhGbUNMBgPhKwJEvM7DaQTyCW56VVI+nxxwv6ozOeV/wBW56MrDksc8kf8VoXvozb30UsEl4GLIVXcudu4seBtPalL70ItvAif1iGFIQWZ2jfGNiqT90fgBNFSg/kVxkZ3o/f6PpeRHZRbhE0SoL0nG7rnk8ZAHmP1us5NKjaWT1J4ZbhQZgJ9xxnqeeOp7diPdWPF6RXLAeKYZPcyFfqOKZj1vw1GzTzhORs2Mq/SrvFNCLJA2pbHSbi1KSWzpERyvPGewwf0qbPRLCCD1G3t5VSR/us7AsQRjHn93+ZrFb00Yn7SzLKOxI7fOmIPSnT32hrcxkdeAM/lSPHkSGU4N7NqbQFuVjjaGdNqbFCufu4xVR9G0uoUM9tcOrdAVDdyeo95NUwa5ZOwaOYLweFmGT+eKjCTQReFeXcLqDnwnG089MHjvU/UvBT0/Bpadp9vHHe2fgu03iAABSojBVT2FFa+jVvbWi28do6RgkkBwM5x/gVjW8F2s05N1cRgkBZDLkvjv7qaPrqrtivrgt+Itk/pQryZLwOXmgSmEpaRKjbQoLYOBu3EcnnPPXz71NjY6pZwmBZZmTHC+IvsjGAMA4I+I7Vmlr9CFfVroN+HeB9MUtcXuoWUsPi6ndESNt++PgO3T2vpRp0A9HC+uAmSSGBHcHdsjQ8nqcgjyFUZ1JWdJtIhmUYw+1Pa8xjcPdWHcX17YD1q41q8kjbI8Pcu08E8YAPbzpiW4v4QGfV7yVRknIHUeWBQ4BUjRmknDFW9HVZdwBeOJeB8N5z5dKsT0gtdy2cUKSyNkPBGsoIbGdpGeuOeprOt9R1GVNyajOTkqctkcHy69K8rpTrbelq2iXl3LdWQcRtOoaKEFPLduJwcZyPnTRxJpiym10YK26/jP5VbFH4bbkZw3mDijAo1UsQAMk16TbODiMx3QbC3UQnXuTw351dc6SHiFxZEyRNnK4wwx1+Pw/WjttJmcbrki3j6ktjOPh2+eKYl1KCziEOnDO3P2h7E8Z95+WPdUm++iqXXZgNCR1FQjPE2Y2ZD5qauZ/PgeVVN76oTHIdZv4eFuGYf3AGm4fSOVT9rCjeZHFY4GTUOoFI8cX8Dqclpnp4fSOE9WeM+8E4rRg1RJipV0lI9wzXhgfLiiVipz0NTl/ni9FFnktnujPCWBliiJx/UmQKlrlW2Zdtq5wAOPhXlbTU5YsLI3iL7+v51rxSwzoHTB+hFQlj47LRyXo0knt1fduXd2O0ZFYtpbxQ+ll1f2l2zXXiKJYmjARYmABGc8kAdseVPDlccMPI813gJjIDRnzVyPpWUXG6ZnJOrP//Z"
    },
    {
      "position": 2,
      "title": "Trump’s Oil Summit",
      "link": "https://www.wsj.com/articles/trumps-oil-summit-11585870063",
      "source": "Wall Street Journal",
      "date": "Opinion · 16 hours ago",
      "snippet": "Trump's Oil Summit. Tariffs and quotas won't solve a price shock caused by \na pandemic and a Saudi Arabia-Russia feud.",
      "thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHAAcAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAFBgIDBAABB//EADwQAAIBAgQEBAQDBgQHAAAAAAECAwQRAAUSIRMxQVEGFCJhMnGBkRWhwSNCYrHR8AczUnIWJEOCksLx/8QAFwEBAQEBAAAAAAAAAAAAAAAAAQACA//EABsRAQEBAAMBAQAAAAAAAAAAAAARARIhMQJB/9oADAMBAAIRAxEAPwD6D5od8d5od8LhrnFzwGAHMkMAMQ/EVbkQD21Y6RjkZ/NjvjvNjvhX/EQote56bnHLX3Nhc/fbBFyNHmx3x55sd8LXnxe1unOxxIZgLkaVuO5OKGmI1gHM48NYvfC2a1msQm9+g2v98ctedyFW/wDffFFTEa1e+ImsXvhefMZBv6ee22I/ibG3+Xb5YYqYfODvj0VgPXC9HXTyH9nHxL/6UvjmrqiPd4tIvsShF8UVMRq8eecthc/FJL3Gj/xx34lIbn0bew3xQUM/FJGGmoaVkYbgn9MZDVq8hKoyL2AH6Yr/ABN29DcOMhbEsL7jEC8czsFlJcdNgB/L3xnN1uDNJX5dDpNTTs3oKMqoLX6G5N7/AGwQgnDU0tXFQxmmQCyFbE/I2sR074TJaqT1IugyH0kagpwZ8K5rRxSSUOZUkEhkY6ZJUBZTt6QencYtDf52krxIIUSjqNV0JbUjDse2LJJVpL64lnQp6nRijD2K3sR8sbsxqkXJ5VzGninKORGEI1AX9NiLHlhPZppuH+ySMhdClYwmr3Nhv/PBm07gtFmtBxCy0ztp3ALkaflY4spp5a1mWkyiKVxc3jVyR731YBxJX08qrxkAJuVJsW/LF5qmp0kVJJIw5P8AlOwKnocOgWkgzNxpny6oijvsI4Dt9Tc48EVQhI4FULc2aK1/qbYDjMswiW8ecZip6ASE/wDsMd/xLnEABGeZhb+NT+pwcjBWTNayL0LVSxBeSgm1vvjNHWLMAauq1Mp2BJwKq8xmrv21TUNPUNYPIR8VuX1A264z8YsGuEH/AG2wclBmpqYQf2DHbnpJP64pNdJyWWSw5nUcCjMEU2sT3vj2Nysd99Xflg5iNUVDmVPKkcqnWtpHMMq3VDz33F9j3xjzLNIpagcGReEi+lCyltxvdlAuet7Ypr5Wq3RvPz1U5XRYRgbdrDE6fJ5WhZi/D4al3GqzqAR0G/XGj0jPPTzMDFI5QOdJDX1e9jjx5NUgIgYs3UkEfYAYI+HqChrM2jpZ0ldTHqIBtc+9t/zwxZ14cy4LTxUkb0c88iosjs7La1zccumBFV55JUtNGrlb7am3vzOLKGameVVqF4aNaxRltfcerbbnzwczTwlHRUUlTBmKvwoyxHB59ed8VeH3oM9pFyqsPlqlDeGWNlXXZTckkcu+LdUTyPL8urKiaCtM9BMgW+4fUTz08tvvzGCld4RqKfMkYmonysKXaUaEaMAH08zfpvbrhZcmgn/Cs9MLCL4JYZQeHcA3jJ5juuD+V+JTlwY5rHDVUlRtTzmPWrr17WPK4ti2/ixPO8xymjoFp6KAO7LotIQxC22Y+nGHL6jIIMsiFZTu0oFme8huepFjbDO1HltZV0telFliRiNrw+XsH1WsSO4sfvhfzbLVzjMpFyyOgy5aX0TDQY0nJAIIAB6dcWeGlII0gfnYG5B6DEo42ndI6aMySuQEWIamY9rdcHqbN6rwjUyUCTRF5DxbRNcNcAczbtyONOUx5XnLvmddVy0WY8dnUwIlwLW3B59emCKlvMcszGhVTmFJUQg/C0sLJq68zjIZkfb32uvI+/2wU8U1eZ5lUPRrO9ZRU8t45IodybWuQpOnmR2wutI8eqCfVvtvsRjO4c0xJVMhMNKrU7auUUVtQ5/Fa/8A9x5JrosulErK1TWMEUI3wx3BYmxtcmw788VzVMcczHy4ZpLk3Omxv8Vha+MubRtBV07zcFQItQCltWw/eDAEewxvWTX/AIdI8smZzCpjhRnWPSWsTYG1vbfBXxq/lMhaVKy7RyI2kN8N2tsw5c8Cv8O0olyVpiHWoeUiQg6gLctuXXF3jURHIKplkNlKH1AC5DC3tg7xNOUeIMubLIlqqqnMmgCTiShWv9d8DfEOV1r+IKdcpoTE81KXUw2UmxsWX3sV++FPwhDSVniCmjrxeE6i66Qxb0k9flh2zSWgop6mvhqCtRSuBCmpUXSbAhl69d7i1sG/W5vjWZk9dSVMHiemkyfxDLUU80UqiFEdAzELYn1i/cWPaxwr66rJKqfL62JJaZnKvTzuo4libMN9m7MMTz/MZJswpsxyuNxMoYysiEqG2G/QE7jF/iHManxBRUMrUJR/+o76VcDppc2Jt0+uD525V9ZNi2kq6jLKiDMsrrp6rKIJLzJ8bwfwsttxuNxtthwj/wASKOoVYxpl4g+FaV2v9MfPMriraCokq8vnSSWJdLmJhpYWvaQWPpsD/UYIRwy5nl7yeHZjR1aAmoy9ban90PUe3689Aa8KZtPlC1xqpLvNOX1yJqUKQLC9th8u+AXjTNqXM83jYS0BjWLS+hlW7XOxsb8rYVhR0zsyVhmSbkryLqCt11at7c+WBrQ1CMOF6gdgUFsIOuT5/FkkTpAWdHN2VRa23IH977DA/wAQ+IYM6lWcxVCtHHpR2ZQSb9d9xy6X98A48tq9N6qRIiOSu1z9hc42JRU6MwEQYKbB7c8FMMeV0yvMwyqj1zL6WaMiw/3S7Af7VF/fBVvAivSmoq8x4MlmLXW8Sg89ybn54bad4qeDg0FGVMYtplXhpF8zy+18LufeK6LK40aomSqmINxpvGD10r13tucHiLGZ5PmfhhWmgrtMDEC8MlrnkLg/0OANdV1lSAKqolmW97O2oX/kPoMbJ86zDPJalpyI6aYC/E7A3H9du2MJWKmE0SMsrfvWXe3TFTEopSra+FAL2N9JFvpvi+Od1eSVZOGDcDSbW+uMrUjpCk2rZ+QCnYDqcVVFLOrBZgy3ANmBHTbbCH0TwjlMXjHKGhnzZ1elbQ0QXU2jmLm4uLjt+mF3xdkP/DmZ+VqV1RSeunqNNhIvXlyI6j+uB/h2trshzTzmXVMUcwQqVYEhge4/vlhhnzWs8VwimzeoSQQHilQyoLgG5ACagLe/XDAV6rMEgWnqssjNLURsSZ4JGJ1dOZIt7YL0GYUOYJLXxJJT5lSoJHp6aVYlcD4pEuDb3XFGYRHK5SsNJQrGwJDeqVuZG4ZiAdjtbGbLc+lo6svIbIo9McUKxgnsQtrjn98FUMOYy02bq088UBr0UcRKdyZFW9gzmwHbpt9sLU3ladCJKmNSSdi4GGgx/jdJFnfhpzHW0kaJU0RILxAC3psPUtvbe3e4wInpaXOG4lHHFTZkd3praVm/ijPf+E/TliXgJ5uMSqqjiA82juw+d+WNBkvt07DGdw0bskilWU2KkWsceasI3aavEfjCvrKhqekQyyQNqlDxmKGNehbURve3M9MKU1JX18zVFVLHUSE81mQgDsAG2HsMCpamsaGOnnmmlp4/gTiEhfocQpn1kojR3tcBhzPbfrjEbzR3yVYJFeanWKIDeaS6RqP4jyH5XxfPPWPIdVAauFUsjwxF4zfe4Zdjb8sL0wZWN0RSTcAAbYtin8usa00syAoOKGAsHueXta2HMVhhfNs4MFPQNS1FPShwVhMRVXe/xam3v9bDpbFFVFm1bVI06mbc3eKVZAlzvqYGwPXc4ENmdbLxFWoqFjOzIkr6bH2v79cFPC+S1NbLLUQTRU0cC+qSQXFiOVh7b/bEkxl88iyJA8c0kak8KOeN2I62AJOMsAnUniMVHIdTgwVyCiqvM1HiBpatGDWpYtNiPnf+e+IPnuRoztR5XLUhr6zIDz7jUdsFUwO9BlSKsqzBEWGplQMVHQ6bjV98SzCGmlqoosqfjpwlszLZ3Y9CovY/0xsk8QVcbFKXK6OnZVDDcMdNr9Ljl0xRP4nziSjWFHRUjHwRIBq9+XQYuzMM/hLK6qgzapkpKadWEKiCtltaMlRrBW4DDUeRF9h156PE+X0cqrXtUQQV5sZ4IZBuw/eUqPr0P6K2S1VNWuj5vUzzrL+xMUkrDhuSLPsRcbG3Q7jGiLw5Q1HiNKRs2jjpJCwSd11nUDstr7A9z8sams7uWNbRxZ8P+YkhhrD6YKgAqs9h8Dk8n/n74X62lnoah4KhSrrzwazLIKrwpmklJXRNU01YoSGoRSsR3FywB2K87c+2NcZpayiFBmgeOK5FNXNCVZN7APcDUpPJ/wAwcQhBJxE6SLWFjzxG98dfAEo5XhXSpdkO2kWNvlfHQxS1AbgAtbmGFrfU7fniN8RIazBXYBviAOzfMYjRbXFBTChkh4cgIPFdQNQ3323t2+mG7KkgpfBSGN7GqJZmC7n1G9uXRR98fOkEkaaI5To/0MNS/Y7Y+g+DqalzTIK6SSiiEtOuhTe9/Te/3B2+mCNUpUUdFxRBUVCU0e5eURl9O3YbnfHLKuqXy8wdFHMfvC/O3TvjFMF4sqr8Gvlaw29rn+/tiKgKbrsR1GGM1qaRiUcOV0kWN+R98e+ZdKg641ViRdlxRT1DU6ujRCaNt7X3B/XE+PSCGP8AZTNIZLyq0Oyr7MJN/sPyxHBSZS7pLHrifk+gE3H0/v8APEGqPJvFJTwhXVSole+mx5owFtj2PfAd5X4jeXV0jvdQz2P2AOI8Wqv6XVQOlzy7dMWYt2nnMfHEs/h4ZXUQRywstmM6F2W3JQwYcjuG58vqs1OeZhKlCxZf+Uplp0G+hkW+5UmxJvvgaaio06ZArqeg3t9CcTR4HYIYmueRjNifof0xrexnT//Z"
    }
  ]
} 
```

**输出**

```
News results

Title: Trump Promotes Oil Deal That May Not Exist
Snippet: WASHINGTON — When oil prices crashed in early March after a dispute between 
Russia and Saudi Arabia, President Trump put a positive spin on the news.
Date: 15 hours ago

Title: Trump’s Oil Summit
Snippet: Trump's Oil Summit. Tariffs and quotas won't solve a price shock caused by 
a pandemic and a Saudi Arabia-Russia feud.
Date: Opinion · 16 hours ago

Title: OPEC and allies reportedly set for video meeting as analysts pour 
skepticism on Trump's intervention
Snippet: “Donald Trump's tweet … It's nonsense, really,” Patrick Armstrong, chief 
investment officer at Plurimi Investment Managers, told CNBC's “Squawk Box 
Europe” on ...
Date: 5 hours ago

Title: Trump again tests negative for coronavirus
Snippet: President Donald Trump on Thursday again tested negative for the 
coronavirus after being tested by the White House physician, according to 
two White House ...
Date: 17 hours ago

Title: Trump passes the buck as deadly ventilator shortage looms
Snippet: (CNN) President Donald Trump is pinning the blame on states for a shortage 
of ventilators that governors warn could effectively condemn coronavirus 
patients to ...
Date: 10 hours ago 
```

如果您想了解更多信息，请查看[SerpApi 文档](https://serpapi.com/news-results)或[live playground](https://serpapi.com/playground?q=trump&tbm=nws&tbs=cdr%3A1%2Ccd_min%3A4%2F2%2F2020%2Ccd_max%3A4%2F3%2F2020&highlight=news_results)。

[![SerpApi 谷歌新闻](../Images/30ad22d4730b98ca53a2a8d9a5e3f03f.png)](https://serpapi.com/playground?q=trump&tbm=nws&tbs=cdr%3A1%2Ccd_min%3A4%2F2%2F2020%2Ccd_max%3A4%2F3%2F2020&highlight=news_results)

**披露**：我为 SerpApi 工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-12T23:36:59.080

*嗨，你可以用简单的方法像这样报废*

```
from bs4 import BeautifulSoup
import requests

url="https://news.google.co.in/"
code=requests.get(url)
soup=BeautifulSoup(code.text,'html5lib')
for title in soup.find_all('span',class_="titletext"):
print title.text 
```

# java - 不使用服务的后台任务 - Android

> ID：15550657
> 
> 赞同：0
> 
> 时间：2013-03-21T14:44:16.517
> 
> 标签：java, android, android-service

我正在开发一个包含 5-6 个用户参与活动的应用程序。在此期间将生成一些数据并保存到数据库中。

我需要在服务器之间上传/同步这些数据（我使用 KSOAP2）。但这应该发生在后面。即使用户在活动之间跳转，也不应该受到影响。但是当我退出应用程序时，我不希望这个过程继续下去。

Android服务是做到这一点的唯一方法吗？什么是最好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:36:32.993

您可以使用异步任务

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。**查看标题The 4 steps**下的文档。

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

在 setContentView() 之后的活动中

```
 pd= new ProgressDialog(this);
    pd.setTitle("Making Soap Request");
     new SoapRequestTask().execute();

 private class SoapRequestTask extends AsyncTask<VOid, Void, Void> {

  protected void onPreExecute()
  {
      pd.show();
  }
   protected SoapObject doInBackground(Void... params) {
    // TODO Auto-generated method stub
           //Soap request. do not update ui here
    return null;
    }

 protected void onPostExecute(Void param)
 {   
      //update ui here
  pd.dismiss();

 } 
```

asynctask 的替代方案是**Robospice**。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

您可以在此处开始使用 robopice。[https://github.com/octo-online/robospice/wiki/Starter-Guide](https://github.com/octo-online/robospice/wiki/Starter-Guide)。

[https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations&feature=search_result](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations&feature=search_result)上的 robospice 示例。

robospice 的一些特性。

1\. 异步执行（在后台 AndroidService 中）网络请求（例如：使用 Spring Android 的 REST 请求）。

2.强类型！您使用 POJO 提出请求，并获得 POJO 作为请求结果。

3\. 对用于请求的 POJO 和您在项目中使用的 Activity 类均不实施任何限制。

4.caches 结果（在 Json 中同时包含 Jackson 和 Gson，或 Xml，或纯文本文件，或二进制文件，甚至使用 ORM Lite）。

5.当且仅当它们仍然存在时，通知您的活动（或任何其他上下文）网络请求的结果

6\. 完全没有内存泄漏，就像 Android Loaders 一样，不像 Android AsyncTasks 在他们的 UI 线程上通知你的活动。

7.使用简单但健壮的异常处理模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:45:39.853

我认为异步任务是您正在寻找的... [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:45:42.867

不，您可以使用`AsyncTask`. 文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# wcf - 将 SAML2 令牌与 WCF channelfactory 和 Weblogic 服务一起使用

> ID：15550662
> 
> 赞同：1
> 
> 时间：2013-03-21T14:44:28.460
> 
> 标签：wcf, wif, adfs2.0, saml-2.0, wse

帮助！:) 我在尝试进行以下工作时遇到了无穷无尽的问题（如果我没有使用正确的术语，请提前道歉）:)

我需要一个 .NET Web 应用程序（客户端）与受 SAML 2 策略保护的 Weblogic Web 服务进行通信。我需要使用 .NET 3.5/4 有一些限制，因此我使用 WIF（带有扩展名）来处理配置为生成 SAML2 令牌的 ADFS2。

到目前为止，网站 -> adfs2 -> SAML2 令牌位运行良好 - 我肯定会通过令牌。

附加 (1) - Weblogic 服务必须使用 SAML2 策略来实现发送者担保确认方法，尽管 ADFS 2 默认提供不记名，但我能够在我们通过线路将令牌发送到服务之前操纵 SAML 断言（ s)。

Additional(2) - 由于多种原因，无法通过 SSL 访问 web 服务，basicHTTPBinding 是我唯一的选择。

*现在的问题*..我只是无法与 Weblogic 进行通信，以便在请求中发送令牌（由于请求中没有有效的安全标头，任何记录的尝试都会返回 oracle“常规 Web 服务安全错误” ）。首选方法是通过 WCF，使用通道工厂 - 下面的代码是我尝试过的粗略示例 - 声明身份/令牌内容取自 WIF 扩展内容附带的代码示例：

```
IClaimsIdentity identity = Thread.CurrentPrincipal.Identity as IClaimsIdentity;
Saml2SecurityToken token = identity.BootstrapToken as Saml2SecurityToken;

BasicHttpBinding binding = new BasicHttpBinding();
binding.Security.Mode = BasicHttpSecurityMode.None;
binding.Security.Transport.ClientCredentialType = HttpClientCredntialType.None;

EndpointAddress address = new EndpointAddress("http://someaddress");

ChannelFactory<weblogicService.MyService> factory = new ChannelFactory<weblogicService.MyService>(binding,address);

factory.ConfigureChannelFactory<weblogicService.MyService>();
factory.Credentials.SupportInteractive = false;
weblogicService.MyService proxy = factory.CreateChannelWithIssuedToken<weblogicService.MyService>(token)
proxy.DoSomething(); 
```

以下帖子中的答案（以及我能找到的其他任何地方）： [WCF and WebLogic SAML interop](https://stackoverflow.com/questions/9162384/wcf-and-weblogic-saml-interop)

..正是我正在做的 - 但无论是使用 WireShark 查看流量还是通过实现客户 MessageInspector 并查看“BeforeSendRequest”中的请求，我都看不到令牌的*任何*迹象（并且请求被拒绝为结果）。

此外，我是否操纵令牌以包含发件人担保或仅将其保留原样也没关系。

附加 (3)：如果我不使用 ADFS2/SAML/WIF/WCF 等，我已经能够与 Weblogic 服务成功通信，而是通过更基本的 WSE2.0/3.0 Web 引用方法（即创建SoapRequest、用户名令牌等。）

问题在于在没有用户交互的情况下提供有效的用户名和密码。换句话说，保持“SSO 方法”，而不必每次都实施表单身份验证（或等效方法）来获取用户凭据。似乎没有任何明显的方法可以将 ADFS 生成的 SecurityToken 与 WSE 结合使用任何一个..

任何人都可以帮忙阐明一下吗？为什么使用提供的令牌的 WCF 通道工厂方法根本不起作用，即在调试时没有有效令牌的迹象，而且 Weblogic 肯定没有接收到有效的 SAML 令牌。

我还研究了使用 CustomMessageEncoder 路由，并以这种方式将 SAML 断言添加到 SOAP 标头中。但据我所知，它真的不应该这么难。WCF 中有什么东西坏了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:44:56.277

端点绑定限制（basicHTTP）不支持 SAML2 afaik，ADFS2.0 似乎也只提供不记名令牌并在事实也不是启动器之后修改令牌（WIF 中建议的覆盖似乎不起作用正如预期的那样），最后因为 Web 服务不在 https 后面，所以安全模式为 none（这是唯一可以使用的）意味着无论如何都没有发送令牌。嗯，好吧，回到绘图板！

# c# - 引用不同项目时使用 app.config？

> ID：15550663
> 
> 赞同：1
> 
> 时间：2013-03-21T14:44:31.160
> 
> 标签：c#, app-config

我是第一次使用 app.config 文件，但不确定如何处理项目引用和 app.config 文件。以下是我正在使用的项目的描述：

**Project1**（进程记录器）填充 Project1 app.config 文件中指定的数据库中的日志表。

**Project2**（计算器）运行计算并填充 Project2 app.config 文件中指定的数据库中的表。使用对 Project1 的引用记录日志。

当我在 Project2 中引用 Project1 时，在我的“Release”文件夹中，我没有看到 Project1 的 app.config 文件。处理这种情况的最佳方法是什么？与其在 Project1 中的 app.config 文件中配置数据库，不如将其作为 Project2 指定的参数（Project2.LogConnectionString 作为参数发送到 Project1 中的函数）？或者有没有办法让 app.config 文件出现在我的“发布”文件夹中？

任何帮助将不胜感激，我不知道这样做的正确方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:52:26.520

配置文件基于**启动项目**。这意味着当您在 proj2 中从 proj1 实例化某些东西（proj1 将是 proj2 中的引用）时，您可以使用 proj2 中的 app.config。

基本上，您可以将所有配置存储在 proj2 中并根据需要使用。

顺便说一句，更改项目名称；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:49:36.130

.NET 应用程序有一个配置文件。它通常具有可执行文件的名称。.NET 不支持每个程序集的配置文件。

您应该将连接字符串从可执行文件传递到记录器项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:57:41.350

对您来说最好的选择是在运行时将 Project1 配置加载到 Project2 中。我要做的是在 Project2 confing 中放置配置字符串（或自定义配置部分，如果需要）。此设置基本上只是告诉应用程序在哪里查看 Project1 配置。

一旦你有了配置路径，你可以像这样加载它：

```
 System.Configuration.ExeConfigurationFileMap configFile = new System.Configuration.ExeConfigurationFileMap();
    configFile.ExeConfigFilename = "my_file.config";
    config = System.Configuration.ConfigurationManager.OpenMappedExeConfiguration(configFile, System.Configuration.ConfigurationUserLevel.None);
    settings = config.AppSettings.Settings; 
```

在这种情况下，我从 Project1 访问 AppSettings。

关于我提到的自定义配置，请参阅我的一篇文章，如果您需要更复杂的设置，这个[自定义配置部分将完成这项工作。](https://stackoverflow.com/questions/12824301/c-sharp-wcf-system-configuration-configurationerrorsexception-unrecognized-elem/12824424#12824424)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:17:53.087

[如果您使用默认的 Properties.Settings（app.config 和此处](https://stackoverflow.com/questions/909688/what-is-the-difference-between-app-config-file-and-xyz-settings-file)解释的设置之间的差异）并且您在 Project2 中引用了 Project1，那么您可以这样做：

```
// in Project2: 
    string connectionstring = NamespaceOfProject1.Properties.Settings.Default.Project1ConnString; 
```

# c# - 使用 OpenXML 如何获取 Excel 电子表格中现有样式的 StyleIndex

> ID：15550669
> 
> 赞同：0
> 
> 时间：2013-03-21T14:44:42.780
> 
> 标签：c#, excel, openxml-sdk

我正在编辑一个现有的 Excel 电子表格，其中包含一个名为“ **myFavouriteStyle ”的****现有**单元格样式。

 **使用 OpenXML SDK V2 c# 如何找到该样式的**StyleIndex**，以便将其应用于添加到电子表格的新单元格。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:18:36.307

如果您可以获得对应用了“myFavouriteStyle”的单元格的引用，您可以：

```
public static int GetCellStyleIndex(Cell theCell)
{ 
  int cellStyleIndex;
  if (theCell.StyleIndex == null) 
  {                               
    cellStyleIndex = 0;           
  }                              
  else
  {
    cellStyleIndex = (int)theCell.StyleIndex.Value;
  }     

  return cellStyleIndex;
} 
```**

# java - Persistence.xml 是可选的吗？

> ID：15550670
> 
> 赞同：3
> 
> 时间：2013-03-21T14:44:45.567
> 
> 标签：java, jpa

当我创建一个 jpa 项目时，持久性 xml 是可选的吗？

我使用的是spring JPA，示例项目没有..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:48:59.643

仅当您的项目基于 Spring 时才有可能。否则，您至少需要一个最小的 META-INF/persistence.xml。

# sql - 如何提高此查询和 VBA 的效率？

> ID：15550671
> 
> 赞同：1
> 
> 时间：2013-03-21T14:44:52.280
> 
> 标签：sql, performance, vba, ms-access-2010

我在 Access 中有这个查询：

```
SELECT TOP 10 title,
  ConcatRelated("DOCTEXT","DocumFrag", "title='" & title & "'" ) AS result
FROM DocumFrag
GROUP BY title; 
```

DocumFrag 包含大约 9000 条记录，ConcatRelated 是在这里找到的 VBA 代码：http: [//allenbrowne.com/func-concat.html](http://allenbrowne.com/func-concat.html)

当我仅针对 TOP 10 运行此查询并完成时，它会持续滞后到 20 秒的响应时间（单击、键入等）。

有没有办法可以改进它以使其更稳定？我以 TOP 10 为例来测试它是否滞后；最后我需要全选。

此查询的目标与[在数据库（MS Access）或服务器端代码（ASP.NET）中连接记录值](https://stackoverflow.com/questions/1094974/concatenating-record-values-in-database-ms-access-or-in-server-side-code-asp)相同（在 Access 中，而不是 ASP.NET 中除外）

或者有没有一种方法可以使用查询而不是 VBA 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:57:14.330

我最好的猜测是 ConcatRelated 评估“DocumFrag”中的每个“标题”。在应用函数之前，选择内部查询中的前 10 个：

```
SELECT q.title, ConcatRelated("DOCTEXT","DocumFrag", "title='" & q.title & "'" ) AS result
FROM 
    (SELECT TOP 10 title FROM DocumFrag) AS q
GROUP BY q.title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:55:48.493

是的，首先确保您的数据表有一个聚集索引（这决定了数据存储在磁盘上的顺序），否则您有一个堆，并且 sql 引擎需要查询整个表，因为数据可以在表中的任何位置。2nd 在查询参数和要返回的数据上放置一个覆盖索引。第三，您正在尝试对文本进行分组？最好找到前 10 个项目，然后将与它们关联的文本合并，而不是像您的代码那样合并每个组项目，然后选择前 10 个。

# c++ - 检查模板类实例化

> ID：15550677
> 
> 赞同：0
> 
> 时间：2013-03-21T14:45:15.227
> 
> 标签：c++

该程序：

```
#include <iostream>

#include <type_traits>

template <class C>
struct tmpl
{
};

int main(int, char*[])
{
  std::cout << std::is_class<tmpl<int> >::value << std::endl;
  std::cout << std::is_class<tmpl<char> >::value << std::endl;
  return 0;
} 
```

输出：

```
1
1 
```

但我希望编译器弄清楚模板类`tmpl<int>`并`tmpl<char>`没有被实例化和输出`0`。是否可以？我是否真的`tmpl`在我的示例中实例化了类模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:56:52.153

通过命名您已实例化它的类型。只要您引用`tmpl<SomeTypeNamedFoo>`编译器，编译器就会代表您自动实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:55:21.433

不，不是那样的。`is_class`检查它是否类（例如不是枚举）。如果你`tmpl`用 SFINAE 中断 instatioation，你会得到编译错误。

例如这种方式：

```
template <>
struct tmpl<int>{ char off[-1];}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:27:45.630

为什么需要确定是否发生了特定类型的模板实例化。让编译器来做吧！

只要你 make `Temp<T>`，实例化就发生了。即使此时没有发生，也可能发生在另一个翻译单元中。您将如何弄清楚这一点，如果在另一个翻译单元中发生（或没有）实例化，您会怎么做？项目的不同构建之间的实例化顺序也可能不同。

# java - 我们如何使 HashMap 类型的参数不可编辑？

> ID：15550679
> 
> 赞同：0
> 
> 时间：2013-03-21T14:45:20.097
> 
> 标签：java

抱歉，我的标题可能具有误导性。

这其实是我最近的一次JAVA面试，面试官问了我一个问题：如果我们有一个HashMap类型的参数，如何保证在accepting方法中，用户无法修改这个HashMap （即 get() 方法）

我在面试的时候说用final，面试官根本不领情，我在网上搜索了一段时间还是没有头绪。

专家能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:49:53.833

听起来您可能来自 C++ 背景，在这种情况下，设置参数`const`确实会阻止方法修改对象。在 Java 中，`final`仅阻止分配给该变量；您仍然可以调用修改对象本身的方法。

因此，例如：

```
void callingMethod() {
   HashMap<Integer, Integer> map = new HashMap<Integer, Integer>();
   map.put(1, 2);

   badMethod(map);

   // NullPointerException
   System.out.println(map.get(1).intValue());
}

void badMethod(final HashMap<Integer, Integer> map) {
   map.clear();
} 
```

有几种方法可以防止这种情况：

1.  在调用方法之前制作一个[防御性副本](http://www.javapractices.com/topic/TopicAction.do?Id=15)
2.  [使用Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)将对象包装在不可修改的包装器中
3.  使用明确的不可变类型，例如[Guava提供的类型](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:58:25.710

使用 of`final`不会阻止调用引用上的方法。它只会使引用本身不可更改。所以你的答案是错误的。

我的建议是使用泛型（仅用于此类采访，而不是在程序中！）：

```
 Map<String, String> map = new HashMap< String, String >();
    map.put("a", "b"); // OK

    Map< ? extends String, ? extends String > mapRO = new HashMap< String, String >();
    mapRO.put("a", "b"); // Compile error
    String value = mapRO.get("a"); // OK 
```

如您所见，隐藏泛型类型会`? extends ...`阻止`put`调用“写入”方法（如 ），因为它们通常需要完全定义类型。但是你仍然可以调用`clear()`，所以它是一个非常池安全的概念。

您也可以使用一些包装器，这会在所有“写入”方法调用上引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:47:09.683

从这里的 Hashmap 创建一个不可修改的集合怎么样[？](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)

然后你会这样做： `yourMethod(Collections.unmodifiableMap(yourHashmap));` 使用 final 只意味着你不能用这个块中的另一个引用**覆盖**那个引用，它不会阻止对该对象的**任何方法调用。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:48:39.503

我认为这是不可变或不可修改的地图。

`Collections#unmodifiableCollection`

> 它返回指定地图的不可修改视图。此方法允许模块为用户提供对内部地图的“只读”访问权限。对返回的映射“通读”到指定映射的查询操作，并尝试修改返回的映射，无论是直接还是通过其集合视图，都会导致 UnsupportedOperationException。

[*参考*](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:49:29.330

[使用Collections.unmodifiableMap](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)包装您传递的地图

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T14:50:44.323

`Collections.unmodifiableMap(myMap)`将返回只读映射。您应该处理由此返回的 Map 对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T14:59:04.087

有2种方式

1) this.map = Collections.unmodifiableMap(map);

2）防御性复制：this.map = new HashMap(map);

# c++ - 如何从对象中获取 stl 容器的类型？

> ID：15550682
> 
> 赞同：2
> 
> 时间：2013-03-21T14:45:30.257
> 
> 标签：c++, stl

如何从对象中获取 STL 容器的类型？例如，我有一个`container`变量，我知道它是`std::vector<some type>`. 我需要使用迭代器迭代容器。有没有办法在不知道容器类型的情况下声明迭代器？

我当然可以从代码中获取类型，但我很想在不使用类型的情况下做到这一点。我也没有使用 C++11。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T14:50:05.163

C++11 有一些不错的简单方法：

```
auto it = container.begin(); 
```

或等效地：

```
decltype(container.begin()) it = container.begin(); 
```

甚至：

```
decltype(container)::iterator it = container.begin(); 
```

尽管如此，即使您不能使用类型推导，您也不应该处于无法以某种形式输入类型的情况（可能涉及模板参数）。如果编译器知道它是什么类型，那么你也知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:48:08.323

```
typedef std::vector<some_type> container;

for(container::const_iterator i = container.begin(); i != container.end(); ++i)
    // ... 
```

你也有迭代器 typedef（你可以用它来代替 const_iterator）。如果您使用的是 c++11，请使用 auto 或`for(auto& value: container) { ... }`表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:49:55.833

从类型中获取它：

```
container::value_type. 
```

对于关联容器；`container::mapped_type`（container::value_type 对应对）。它符合 C++ 标准的第 23 章。

使用[boost::is_same](http://www.boost.org/doc/libs/1_40_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html)比较类型

从对象实例中获取它：

```
auto it = container.begin(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:50:40.980

一种方法是使用模板：

```
template <class container>
void dosomething(container &c) { 
    typename container::iterator it = c.begin();
    typename container::iterator end = c.end();

    while (it != end) 
       dosomething_with(*it);
} 
```

根据情况，`auto`也可能有用：

```
for (auto it = container.begin(); it != container.end(); ++it)
    dosomething_with(*it); 
```

后者需要 C++11，但前者在 C++98/03 中可用。

# mongodb - 更新 Mongo 对象中的所有嵌套数组

> ID：15550684
> 
> 赞同：2
> 
> 时间：2013-03-21T14:45:36.117
> 
> 标签：mongodb, nosql

我的数据结构是：

```
{
  "_id": { "$oid" : "511D0A0EC075F3FF25000003" },
  "progresses": [
    {
      "behavior": {
        "behavior": {
          "_id": "511d052f52fbf0fd25000002",
          "disabled": false,
          "name": "Unity Installed",
          "key": "UnityInstalled",
          "points": 1,
          "timeout": 0
        },
        "key": "UnityNotInstalled",
        "name": "Unity Not Installed",
        "points": 1,
        "timeout": 0,
        "disabled": false,
        "_id": { "$oid" : "511D056552FBF0FD25000003" }
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1360857614000.000000 },
      "createdAt": { "$date": 1360857614000.000000 },
      "behaviorType": "user"
    },
    {
      "behavior": {
        "behavior": {
          "_id": "511cfac4955737a01f000001",
          "disabled": false,
          "name": "test",
          "key": "tt",
          "points": 1,
          "timeout": 0
        },
        "name": "Unity Installed",
        "key": "UnityInstalled",
        "points": 1,
        "timeout": 0,
        "disabled": false,
        "_id": { "$oid" : "511D052F52FBF0FD25000002" }
      },
      "behaviorCount": 3,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1360858565000.000000 },
      "createdAt": { "$date": 1360858553000.000000 },
      "behaviorType": "user"
    },
    {
      "behavior": {
        "behavior": {
          "_id": "511d052f52fbf0fd25000002",
          "disabled": false,
          "name": "Unity Installed",
          "key": "UnityInstalled",
          "points": 1,
          "timeout": 0
        },
        "name": "Active User",
        "key": "ActiveUser",
        "points": 1,
        "timeout": 0,
        "disabled": false,
        "_id": { "$oid" : "511D058E52FBF0FD25000004" }
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1360858565000.000000 },
      "createdAt": { "$date": 1360858565000.000000 },
      "behaviorType": "user"
    },
    {
      "behavior": {
        "behavior": {
          "_id": "511d058e52fbf0fd25000004",
          "disabled": false,
          "name": "Active User",
          "key": "ActiveUser",
          "points": 1,
          "timeout": 0
        },
        "name": "Invite Count",
        "key": "InviteCount",
        "points": 1,
        "timeout": 0,
        "disabled": false,
        "_id": { "$oid" : "511D061752FBF0FD25000006" }
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1360858587000.000000 },
      "createdAt": { "$date": 1360858587000.000000 },
      "behaviorType": "user"
    }
  ],
  "trophyAchievements": [

  ],
  "userId": "asfasd"
} 
```

我想将所有progresses.behaviorCount 更新为1。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:26:29.250

您应该使用 mongo 的[位置运算符](http://docs.mongodb.org/manual/applications/update/#update-a-document-element-without-specifying-its-position)和点表示法。

在你的情况下，我会像这样使用 smth：

```
db.test.update({}, {$set: {"progresses.$.behaviorCount": "testing"}}, { multi: true }) 
```

但是，它不会更新嵌套数组中的所有字段，一次只更新一个。

查看类似问题：

*   [MongoDB：更新子文档](https://stackoverflow.com/questions/5646798/mongodb-updating-subdocument)
*   [在 mongodb 中更新子文档？](https://stackoverflow.com/questions/9401668/updating-a-sub-document-in-mongodb)

作为一种解决方法，您可以遍历嵌套数组并按`behaviorCount`索引一次更新一个。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:00:11.083

这个脚本就是答案：

```
var i = 0;
db.users.find().forEach(function(doc) {
    doc.progresses.forEach(function(progress) {
        progress.behaviorCount = 1;
    });

    db.users.save(doc);
    if (i % 10000 == 0) print(i);
    i++;
}); 
```

# android - Android - 访问 android 股票计时器

> ID：15550686
> 
> 赞同：0
> 
> 时间：2013-03-21T14:45:40.517
> 
> 标签：android, timer

所以这是我的问题，我有一个食谱应用程序，我希望用户能够在其中点击一个按钮，然后将其发送到股票 android 倒计时应用程序。

我可以创建自己的计时器，但我认为使用设备附带的计时器会更好（我无法让它变得更好）。

据我所知，每台 android 设备都带有一个，但我不确定如何访问它们（我想做的就是启动它们）。有谁知道特定的包名称或访问时间的最佳方式？

**编辑：**

我环顾四周没有成功，我想做的是这样的： `PackageManager pm = getPackageManager();`

`Intent i = pm.getLaunchIntentForPackage("com.example.package.Timer");` `startActivity(i);`

或其他任何可能有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:03:52.383

API 级别 10 的 Ginger bread 没有默认的 GUI 计时器/秒表。我不确定计时器在其他版本上的一致性可用性，但我确信高于 8 的 API 级别不会始终随计时器一起提供（在 GUI 级别）。如果我是你，我宁愿建立自己的计时器并将其显示给用户。

# typo3 - 比较流体中的日期时间

> ID：15550687
> 
> 赞同：2
> 
> 时间：2013-03-21T14:45:42.967
> 
> 标签：typo3, fluid, extbase

我想将 dateTime 对象与今天的日期进行比较。

这是我的约会对象

```
<f:format.date format="d.m.Y - H:i:s">{article.validFrom}</f:format.date> 
```

如果日期对象大于当天，我想提出一个条件。我会做点什么。

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:24:17.157

`format="U"`使用并比较它们将日期转换为 unix 时间戳。您需要添加一个包含当前日期的变量。

在您的控制器中添加

```
$this->view->assign('date_now', new DateTime());
// or for TYPO3 >= 6.2
$this->view->assign('date_now', new \DateTime()); 
```

然后在您的模板中使用以下

```
<f:if condition="{f:format.date(date: article.validFrom, format: 'U')} > {f:format.date(date: date_now, format: 'U')}">
    Date is valid
</f:if> 
```

* * *

**编辑：** 另一种方法（我认为是更好的方法）是向您的模型添加一个新方法来检查这一点。例子：

类/域/模型/Article.php

```
class Article extends \TYPO3\CMS\Extbase\DomainObject\AbstractEntity {

    /**
      * @return boolean
      */
    public function getDateIsValid() {
        return ($this->getValidFrom() > new DateTime());
    }

} 
```

那么你可以简单地使用

```
<f:if condition="{article.dateIsValid}"></f:if> 
```

# javascript - jquery 函数根据选择的选项显示/隐藏文本区域

> ID：15550689
> 
> 赞同：2
> 
> 时间：2013-03-21T14:45:43.847
> 
> 标签：javascript, jquery, html

我正在进行一项基本调查，其中一个问题是是/否问题。如果用户选择否，我想在问题下方显示一个文本区域，以便用户解释他/她不回答的原因。如果他们单击“是”，则文本框保持隐藏状态（或者如果他们单击“否”并显示它，则隐藏）。

这是我的 HTML 片段（是的，我正在使用表格进行格式化:-)。在这种情况下它可以节省我的时间）。有 4 个是/否问题。这只是其中之一。它们之间的唯一区别是 id 名称 ( `#explain1`, `#explain2`, `#explain3`, `#explain4`)

```
<tr id="yesno1">
    <!-- yes/no1 choices --> <!-- Yes(1) No(0) -->
    <td class="center"><input name="yn1" value="1" id="yes1" type="radio"></td>
    <td class="center"><input name="yn1" value="0" id="no1" type="radio"></td>

    <!-- yes/no1 question -->
    <td class="question">
        Did you meet your goals during this program? (If no, explain.)
    </td>
</tr>

<tr class="explain-box" id="explain1">
    <td></td>
    <td></td>
    <td class="explain-text">
      <textarea name="explain1" placeholder="Please explain..."></textarea>
    </td>
</tr> 
```

这是我的 jQuery。这适用于问题一：

```
$(function() {
    $('.explain-box').hide();

    $('#no1').click(function() {
        $('#explain1').show();
    });

    $('#yes1').click(function() {
        $('#explain1').hide();
    });
}); 
```

我对 javascript 和 jquery 相当模糊，所以我的问题是如何让 jquery 代码工作而不为每个是/否问题的每个 ID 输入条件？我知道我可以`this`以某种方式使用，但我不知道该怎么做。有人可以提供在这种情况下使用的功能的想法吗？我应该硬着头皮输入每个问题条件，因为它只有 4 个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:51:18.650

尝试使用[带有选择器的开头](http://api.jquery.com/attribute-starts-with-selector/)：

```
$(function() {
    $('.explain-box').hide();

    $('[id^=no]').click(function() {
        $(this).parents("tr").next(".explain-box").show();
    });

    $('[id^=yes]').click(function() {
        $(this).parents("tr").next(".explain-box").hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:49:53.973

您可以给复选框一个是或否类别，而不仅仅是一个 ID。然后，使用这种语法，您可以找到与之关联的文本区域。类似于以下内容：

```
$(function() {
    $('.explain-box').hide();

    $('.no').click(function() {
        $(this).parents("tr").next().find('.explain-box').show();
    });

    $('.yes').click(function() {
        $(this).parents("tr").next().find('.explain-box').hide();
    });
}); 
```

**编辑**

您甚至可以通过编写一个函数来切换文本区域来进一步简化这一点：

```
$(function() {
    $('.explain-box').hide();

    $('.checkbox').click(function() {
        var show = $(this).val() == "0";
        $(this).parents("tr").next().find('.explain-box').toggle(show);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:57:27.660

这就是我的做法——没有桌子或开关。

```
$('input:radio').on('change', function(){
    // compare against string value of input
    if ($(this).val() === '0')  {  
        // show textarea closest to $(this) 
        $(this).closest('div').find('textarea').show();
    }
}); 
```

[演示](http://jsfiddle.net/WZFzu)

# asp.net-mvc-3 - 无法更新具有多个 ICollection 属性 MVC3 的模型实体

> ID：15550691
> 
> 赞同：1
> 
> 时间：2013-03-21T14:45:51.517
> 
> 标签：asp.net-mvc-3, properties, model, updatemodel, icollection

这是我的问题，

我在 Componet.cs 中有下一个模型（我的真实组件还有十个 Icollections，但我认为问题应该与 1 个 ICollection 或 10 个相同，我没有将它们写下来）。

```
public partial class Component
{
    public Component()
    {
        this.BrandOwner = new HashSet<BrandOwner>();
        this.Description = new HashSet<Description>();
    }

    public int GestCompID { get; set; }
    public int ID { get; set; }
    public Nullable<int> BaseGestCompID { get; set; }
    public Nullable<int> BaseCompID { get; set; }
    public string DefName { get; set; }
    public string ProductRef { get; set; }

    public virtual country country { get; set; }
    public virtual language language { get; set; }
    public virtual ICollection<BrandOwner> BrandOwner { get; set; }
    public virtual ICollection<Description> Description { get; set; } 
```

在我的应用程序中，我可以编辑该组件以添加、删除或编辑其任何属性。我可以根据国家或语言添加几个品牌所有者或描述。当我选择其中一个组件进行编辑时，我将组件加载到 Session 变量中，并对该 Session 变量执行所有操作。

当我完成编辑项目时，我有两个按钮，接受和取消。如果我取消在 Session 变量中所做的所有更改，则将被解除。

当我按下“接受”按钮更新所选项目时，问题就来了。我找不到路

这是我的接受方法：

```
 public ActionResult AcceptChanges()
    {
        try
        {
            Component component = (Component)Session["component"];
            GIEntities.Current.Component.Attach(component);
            GIEntities.Current.SaveChanges();
            Session["component"] = null;
            return RedirectToAction("Index", new { Message = "correct" });
        }
        catch (DbUpdateException ex)
        {
            String error = ex.ToString();
            Component component = (Component)Session["component"];
            return RedirectToAction("EditComponent", new { id = componente.ID });
        }
    } 
```

我已尝试附加、添加并将状态设置为已修改，但它不起作用。我也尝试过分离 de 组件并再次附加它。有人可以告诉我我做错了什么吗？

非常感谢，并提前感谢。

对不起我的英语不好。

# android - 4.0版本如何获取webView的透明背景

> ID：15550700
> 
> 赞同：21
> 
> 时间：2013-03-21T14:46:22.113
> 
> 标签：android, webview

我正在寻找一段能够在`WebView`4.0 及更高版本中获得透明背景的代码。我的代码在 2.3 版上运行良好，但是当我在 4.0 和 4.2 版上运行它时，它会变成白色背景。我提供的代码适用于 2.3 版，但不适用于 4.0 和 4.2。请帮我。提前致谢...

**在 XML 中：**

```
<WebView
    android:id="@+id/webView"
    android:layout_marginTop="6dp"
    android:layout_below="@+id/image"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:hardwareAccelerated ="true"        
    /> 
```

**在活动文件中：**

```
webView = (WebView) findViewById(R.id.webView);
backButton = (ImageView) findViewById(R.id.backButton);
webView.setBackgroundColor(0);                      
webView.loadUrl("file:///android_asset/Info.html");
webView.setBackgroundColor(Color.TRANSPARENT);  
/* this is used to make the background white after loading the file on screen. */ 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-25T14:11:28.453

试试这个：

```
webView.setBackgroundColor(0x00000000); 
```

并删除`android:hardwareAccelerated ="true"`
，因为那是题外话。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-28T19:15:26.727

如果 webview 是可滚动的：

将此添加到清单中：

```
android:hardwareAccelerated="false" 
```

或者

将以下内容添加到布局中的 WebView：

```
android:background="@android:color/transparent" android:layerType="software" 
```

将以下内容添加到父滚动视图：

```
android:layerType="software" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T13:10:13.977

设置背景颜色（0x00000000）；将使您的 webview 透明

# java - 线程访问 Java 中的非同步方法

> ID：15550704
> 
> 赞同：0
> 
> 时间：2013-03-21T14:46:26.950
> 
> 标签：java, multithreading, thread-safety, thread-synchronization

我能解释一下Java中的线程和同步是如何工作的吗？

我想写一个高性能的应用程序。在这个应用程序中，我将文件中的数据读取到一些嵌套类中，这些类基本上是围绕 HashMap 的一个坚果壳。

数据读取完成后，我启动需要遍历数据并对其执行不同检查的线程。但是，线程永远不会更改数据！

如果我可以保证（或至少尝试保证；）我的线程永远不会更改数据，我可以使用它们调用包含数据的对象的非同步方法吗？

如果多个线程访问非同步方法，不改变任何类字段，但有一些内部变量，是否安全？

人工示例：

```
public class Data{
// this hash map is filled before I start threads
protected Map<Integer, Spike> allSpikes = new HashMap<Integer, Spike>();

public HashMap returnBigSpikes(){
     Map<Integer, Spike> bigSpikes = new HashMap<Integer, Spike>();

     for (Integer i: allSpikes.keySet()){
         if (allSpikes.get(i).spikeSize > 100){
         bigSpikes.put(i,allSpikes.get(i));
         }
     }

     return bigSpikes;
}
} 
```

从线程调用非同步方法 returnBigSpikes() 是否安全？

我现在明白这样的用例可能非常危险，因为很难控制数据（例如，返回的 bigSpikes）不会被修改。但是我已经像这样实现和测试了它，想知道我现在是否可以使用我的应用程序的结果，并在以后更改架构......

如果我使方法同步会发生什么？会不会将应用程序的 CPU 性能减慢到 1？如果是这样，我怎样才能正确设计它并保持性能？

（我将大约 20-40 Gb 的数据（日志消息）读入主内存，然后运行线程，这些线程需要遍历所有数据以找到其中的一些相关性；每个线程仅成为要分析的消息的一部分；但是为了进行分析，线程应该将其部分的每条消息与来自数据的许多其他消息进行比较；这就是为什么我首先决定允许线程在不同步的情况下读取数据）。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:52:35.777

如果在所有线程开始之前填充，您可以通过将其保存为不可[修改的 map](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)`allSpikes`来确保以后不会更改它。

假设`Spike`是不可变的，那么您的方法将可以完全安全地同时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:10:26.027

只要任何实际上不可变的东西（例如使用 final 关键字）并且您使用 unmodifiableMap 一切都很好。

我建议以下 UnmodifiableData：

```
public class UnmodifiableData {
     final Map<Integer,Spike>  bigSpikes;
     public UnmodifiableData(Map<Integer,Spike> bigSpikes) {
         this.bigSpikes = Collections.unmodifiableMap(new HashMap<>(bigSpikes));
     }
     .... 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:59:02.910

一般来说，如果你有一堆线程，你可以保证只有一个线程会修改资源，其余的只会读取该资源，那么对该资源的访问不需要同步。在您的示例中，每次调用 returnBigSpikes() 方法时，它都会创建 bigSpikes 哈希图的新本地副本，因此尽管您正在创建哈希图，但它对于每个线程都是唯一的，因此不会出现同步问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:51:18.843

你的计划应该可以正常工作。你不需要`synchronize`读，只需要写。

但是，如果将来您希望缓存`bigSpikes`以便所有线程都获得相同的映射，那么您需要更加小心同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:52:08.107

如果您使用[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)，它将为您完成所有同步工作。它更好，然后围绕普通的HashMap进行同步。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T14:52:35.843

由于 allSpikes 在启动线程之前已初始化，因此是安全的。仅当线程写入资源而其他线程读取资源时，才会出现并发问题。

# c++ - C++数学表达式的错误结果

> ID：15550708
> 
> 赞同：-2
> 
> 时间：2013-03-21T14:46:37.353
> 
> 标签：c++, integer-division

我必须计算一些简单的数学表达式，但是当我连续计算时，结果总是为零。但正确的结果显然不是零。它很有趣，但是当我分开表达的部分时，我得到了正确的答案。稍后我会用这个结果除，所以它不应该是 0。

表达式是这样的：

```
(X-X1)/(X2-X1) 
```

在这种情况下，*增量*：0

```
double delta = (x - x1) / (x2 - x1); 
```

但是这样*增量*是正确的：

```
double top = x - x1;
double bottom = x2 - x1;
double delta = top/bottom; 
```

你有什么想法，这怎么会发生？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T14:50:39.290

这是“用整数除法做浮点值”的典型案例。如果`x`,`x1`和`x2`都是整数，那么编译器应该按照 C 和 C++ 的规则使用整数计算来计算`x-x1`和`x2-x1`，然后将它们的差异作为整数除法。如果`x2-x1`大于`x-x1`，则结果为零 [假设为 7/14 等正值。-14 / -7 显然是 2]。

The easy fix is to convert the type of one expression to a floating point type:

```
double delta = static_cast<double>(x - x1) / (x2 - x1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:49:41.577

在第一种情况下，整数/整数，结果仍然是整数，然后将整数转换为双精度。

在第二种情况下，双倍/双倍，那么你会得到正确的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:50:29.780

在第一种情况下，您正在执行`int / int`这将产生一个`int`值。因此，如果您的分母大于分子，则结果将被截断为 0。

在第二种情况下，您正在评估一个`double/double`将评估为一个`double`值的表达式，因此保留了小数和整数部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:52:18.923

You have to cast the integer division to double. [type casting](http://www.learncpp.com/cpp-tutorial/44-type-conversion-and-casting/)

# iphone - 你能告诉我 Facebook 应用程序中用于屏幕导航的控件的名称是什么吗？

> ID：15550709
> 
> 赞同：0
> 
> 时间：2013-03-21T14:46:39.920
> 
> 标签：iphone, ios, objective-c, xcode, facebook

如果有例子，你会很周到。

![iPhone 版 Facebook 应用程序](../Images/8cb363c2ef77ea321dd3586797a81f68.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:49:43.917

它不是本机控件。虽然有图书馆。看看[JTRevealSidebar](http://www.cocoacontrols.com/controls/jtrevealsidebar)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:48:50.363

检查 IIViewDeckController。这是github链接：[http ://www.github.com/inferis/viewdeck/](http://www.github.com/inferis/viewdeck/)

# sql-server - 如何根据不是主键的列选择行

> ID：15550713
> 
> 赞同：1
> 
> 时间：2013-03-21T14:47:00.823
> 
> 标签：sql-server, select

我有一个表 t1（id、source、info、contact_date），id 和 source 是主键，例如

```
id    source    info    contact_date
01   s1             …         2013-3-1
01   s2             …         2013-3-1
01   s3             …         2013-2-28
… 
```

我想写一个查询，结果表会像

```
id    source    info    contact_date
01   s1             …         2013-3-1 
```

或者

```
id    source    info    contact_date
01   s2             …         2013-3-1 
```

您可能会建议将主键更改为 id 和 contact_date，但我不能，我必须保留原始设计。目前我有以下查询

```
select 
    t1.id, t1.source, t1.info, t1.contact_date 
from t1 
join
    (select id, max(contact_date) as contact_date 
     from t1 
     group by id) t2 on t1.id = t2.id and t1.contact_date = t2.contact_date 
```

但是结果表在下面，这不是我想要的。

```
id    source    info    contact_date
01   s1             …         2013-3-1
01   s2             …         2013-3-1 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:51:54.743

您可以`Ranking Function`在此使用。

```
SELECT  id, source, info, contact_date
FROM
        (
            SELECT  id, source, info, contact_date,
                    ROW_NUMBER() OVER 
                    (PARTITION BY ID 
                     ORDER BY contact_date DESC) rn
            FROM    t1 
        ) x
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/2f050/2)

# javascript - 有些东西破坏了我的 Node.js HTTP 请求，我不知道是什么破坏了它

> ID：15550715
> 
> 赞同：-3
> 
> 时间：2013-03-21T14:47:05.650
> 
> 标签：javascript, node.js, http, request

我正在使用通用 Node.js HTTP 请求脚本解析大约 4000 个 URL：

```
(function (i){
            http.get(options, function(res) {

                var obj = {};
                obj.url = hostNames[i];
                obj.statusCode = res.statusCode;
                obj.headers = res.headers;

                db.scrape.save(obj);

            }).on('error',function(e){
        console.log("Error: " + hostNames[i] + "\n" + e.stack);
        })
    })(i); 
```

在大约 1300 个 URL 中，我收到此错误，这会停止整个脚本。我不知道 page.ly 是什么，因为我的 URL 列表中没有它。我做了很多研究，但我无法确定导致此错误的原因。

如果有人熟悉 Node.js 上的 HTTP 请求 - 你能帮我吗？

```
Error: key page.ly must not contain '.'
    at Error (unknown source)
    at Function.checkKey (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:1421:11)
    at serializeObject (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:355:14)
    at packElement (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:854:23)
    at serializeObject (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:359:15)
    at Function.serializeWithBufferAndIndex (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:332:10)
    at BSON.serializeWithBufferAndIndex (/Users/loop/node_modules/mongojs/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:1502:15)
    at InsertCommand.toBinary (/Users/loop/node_modules/mongojs/node_modules/mongodb/lib/mongodb/commands/insert_command.js:132:37)
    at Connection.write (/Users/loop/node_modules/mongojs/node_modules/mongodb/lib/mongodb/connection/connection.js:198:35)
    at __executeInsertCommand (/Users/loop/node_modules/mongojs/node_modules/mongodb/lib/mongodb/db.js:1745:14)
    at Db._executeInsertCommand (/Users/loop/node_modules/mongojs/node_modules/mongodb/lib/mongodb/db.js:1801:5)
Loops-MacBook-Air:JS loop$ 
```

什么可以防止这种情况发生？看来我的脚本不能很好地扩展。

编辑：根据我得到的答案 - 某处存在一个带有“。”的键，这在 MongoDB 中是不允许的，我应该逃避它。但是问题仍然存在 - 如果我的键只有`url`,`statusCode`和`headers`, 是什么导致其中带有 a 的键`.`出现？

编辑：发现错误。下面回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:51:54.740

当您尝试在 MongoDB 中持久化一个对象并且一个（或多个）键包含字符“。”时，会导致此错误，例如：

```
{
  "name": "bob",
  "url": "http://example.com",
  "some.field": "value"
} 
```

会引发错误`Error: key some.field must not contain '.'`。

在保存到 MongoDB 之前擦洗你的 '.' 对象键！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:48:36.340

站点“divensurf.com”有一个标题，称为`page.ly: v4.0`

我不知道它是什么，但这破坏了我对 MongoDB 的导入，因为键不能符号。我通过将输出打印到 .txt 文件中找到了罪魁祸首，对 header 进行了搜索`page.ly`，找到了该站点并将其删除。

我将在导入前清理标题。

谢谢你们的帮助。

```
HTTP/1.1 304 Not Modified
X-Varnish: 2236761436 2236710300
Vary: Accept-Encoding,Cookie,X-UA-Device
Cache-Control: max-age=7200, must-revalidate
X-Cache: V1HIT 5
Content-Type: text/html; charset=UTF-8
Page.ly: v4.0
Content-Encoding: gzip
X-Pingback: http://divensurf.com/xmlrpc.php
Date: Thu, 21 Mar 2013 19:45:35 GMT
Accept-Ranges: bytes
Via: 1.1 varnish
Connection: keep-alive
Last-Modified: Thu, 21 Mar 2013 19:40:57 GMT
Age: 278 
```

# android - 添加admob后Android应用无法启动

> ID：15550718
> 
> 赞同：2
> 
> 时间：2013-03-21T14:47:09.840
> 
> 标签：android, admob

我正在尝试在我的应用中实现 admob，但添加后应用无法启动。

这是活动代码： [http ://code.google.com/p/zhuang-dict/source/browse/trunk/ZhuangDict/src/cn/wangdazhuang/zdict/ZhuangDictActivity.java](http://code.google.com/p/zhuang-dict/source/browse/trunk/ZhuangDict/src/cn/wangdazhuang/zdict/ZhuangDictActivity.java)

main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads= "http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    >
        <ImageButton
            android:id="@+id/ts"
            android:contentDescription="@string/tts_contentDescription"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true" 
            android:src="@android:drawable/ic_btn_speak_now"
        />
        <ImageButton
            android:id="@+id/search"
            android:contentDescription="@string/search_contentDescription"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@id/ts"
            android:src="@android:drawable/ic_search_category_default"
        />
        <AutoCompleteTextView
            android:id="@+id/edit"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:focusable="true"
            android:singleLine="true"
            android:layout_toLeftOf="@id/search"
            android:hint="@string/edit_hint"
        />
    </RelativeLayout>
    <WebView
        android:id="@+id/result"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />
    <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="myId"
                     ads:adSize="BANNER"
                     ads:loadAdOnCreate="true"
     />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:11:27.920

您是否已将此添加到您的清单中？

```
 <activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

如谷歌教程中所示：

```
 <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="MY_AD_UNIT_ID"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                     ads:loadAdOnCreate="true"/> 
```

adUnitId 必须是您的应用程序的 ID，您是否设置了此 ID，或者您是否真的设置了“myid”，就像上面显示的代码一样？

## 编辑

这是一些附加信息，所有似乎都是 AdMob Lib 未绑定到您的项目。这可能是由许多不同的原因造成的。阅读步骤并确定，你真的做到了，如果没有，那就去做：

## 更新 Eclipse 和 Android SDK：

1.  以管理员身份打开 Eclipse
2.  转到帮助->检查更新并运行更新
3.  设置所有检查，即在下一个窗口中显示。没有必要，但更新所有内容也不会错
4.  接受条款和被许可人并按完成...更新将开始并需要一些时间
5.  如果更新完成，则以管理员身份重新启动 Eclipse。您可能会收到一条错误消息，指出并非所有更新都可以完成...继续

## 更新 Android SDK：

1.  在 Eclipse 中转到 Window--> Android SDK Manager
2.  在“状态”列中，您可以查看更新是否可用。选择所有更新...
3.  如果完成，请再次重新启动 Eclipse

## 使用 Admob - 放置 jar 文件并设置路径：

1.  从 Google 网站下载 AdMob SDK（可能是不同的链接取决于国家/地区） [https://developers.google.com/mobile-ads-sdk/download?hl=de](https://developers.google.com/mobile-ads-sdk/download?hl=de)
2.  将文件解压缩到一个目录中（无论在哪里）
3.  在 Eclispe 的项目中创建一个“libs”文件夹。确保文件夹被命名为“libs”而不是“lib”。这个错误经常发生

    * * *

4.  将 jar 文件从 admob 文件夹复制到您的项目到 libs 文件夹中

5.  在 lib 文件夹内的 jar 文件上单击鼠标右键，然后选择 Build Path-->add to build path
6.  要确保一切都已真正完成，请在您的项目上单击鼠标右键并选择属性
7.  选择 Java-Build-Path 并转到库选项卡
8.  选择添加外部 jar 并从您的 admob 文件夹中选择此 jar
9.  选择确定

## 开始

1.  把它放到你的 Manifest.xml

    ```
    <activity android:name="com.google.ads.AdActivity"
       android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
     </application> 
    ```

您的 Manifest.xml 应类似于以下内容：

```
 <?xml version="1.0" encoding="utf-8"?>
         <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.company"
          android:versionCode="1" android:versionName="1.0">
       <application android:icon="@drawable/icon" android:label="@string/app_name"
           android:debuggable="true">
       <activity android:label="@string/app_name" android:name="BannerExample">
           <intent-filter>
           <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
             </intent-filter>
       </activity>
      <activity android:name="com.google.ads.AdActivity"
             android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
        </application>
        </manifest> 
```

注意：将此行放在您的活动下方，而不是里面

1.  在 manifest.xml 中设置权限

    ```
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
    ```

2.  例如，创建 xml 布局，如教程中所示

    ```
    <?xml version="1.0" encoding="utf-8"?>
       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">
        <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="MY_AD_UNIT_ID"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                     ads:loadAdOnCreate="true"/>
       </LinearLayout> 
    ```

3.  此外，如果上述步骤不起作用，您可以在要显示 admob 的 Activity 中执行此操作。请参阅您的活动的 onCreate() 中的您的 admob xml id：

    ```
     public class AdMobActivity extends Activity {

       private AdView adView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

            // Create the adView
       adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID);

           // Lookup your LinearLayout assuming it’s been given
          // the attribute android:id="@+id/mainLayout"
        LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

           // Add the adView to it
         layout.addView(adView);

           // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

         } 
    ```

在我的应用程序中，我两者都做了，通常只需要在 XML 或代码中进行，但两者都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-09T17:09:33.140

确保您正在初始化 AdMob，否则您将收到此错误：

获取 isAdIdFakeForDebugLogging 失败

```
MobileAds.initialize(this, AD_MOB_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:33:01.347

Try these steps:

1.  Create a `libs` folder in your project.
2.  Add the Google AdMobs `jar` file to the `libs` folder.
3.  Import the AdMob library from the `libs` folder.
4.  Confirm that the new method of adding the libray works by: Right Click Project -> Build Path -> Configure build Path -> switch to the Libraries Tab and confirm the Google AdMobs library is present in the list.

I had this problem after upgrading to the 15th or he 16th version of the ADT. I do not remember which.

*Don't forget to remove the earlier reference to the library before doing the above.*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T15:32:12.723

**如果您从调色板中添加了 Google AdView 并且应用程序停止工作。**

转到 Android Studio 中的“Gradle Scripts”文件夹 找到 build.gradle(Module: app)

从文件末尾删除这一行

> 实施 'com.google.android.gms:play-services-ads:18.1.1'

保存文件并再次构建项目。一切都会再次正常工作

```
dependencies {
implementation fileTree(dir: 'libs', include: ['*.jar'])
implementation 'androidx.appcompat:appcompat:1.1.0'
implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
testImplementation 'junit:junit:4.12'
androidTestImplementation 'androidx.test.ext:junit:1.1.1'
androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'
implementation 'com.google.android.gms:play-services-ads:18.1.1'
} 
```

# java - 带有 SimpleAdapter 和单选模式的 AlertDialog 不显示单击的项目

> ID：15550723
> 
> 赞同：0
> 
> 时间：2013-03-21T14:47:21.810
> 
> 标签：java, android, android-alertdialog, android-adapter

我需要显示`AlertDialog`一些自定义行。这些行的右侧应该有一个单选按钮，选择模式应该是单选模式（因此是单选按钮）。

是）我有的：

```
ArrayList<HashMap<String, String>> it = new ArrayList<HashMap<String,String>>();
HashMap<String, String> map;

map = new HashMap<String, String>();
map.put("asd", "test1");
it.add(map);
map = new HashMap<String, String>();
map.put("asd", "test2");
it.add(map);
map = new HashMap<String, String>();
map.put("asd", "test3");
it.add(map);

SimpleAdapter sa = new SimpleAdapter(context, it, R.layout.dialog_row, new String[] { "asd" }, new int[] { android.R.id.text1 });

AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setSingleChoiceItems(sa, -1, null);
// here are added positive and negative buttons
builder.show(); 
```

xml 为`dialog_row`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/rowIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/rh_3" />

<CheckedTextView
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?listPreferredItemHeightSmall"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:gravity="center_vertical"
    android:paddingLeft="?listPreferredItemPaddingLeft"
    android:paddingRight="?listPreferredItemPaddingRight"
    android:textAppearance="?textAppearanceListItemSmall" />

</LinearLayout> 
```

正如我预期的`AlertDialog`那样显示 - 但是当我单击一个项目时，单选按钮保持未选中状态。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:51:43.960

我在这里找到了一个可行的解决方案：[https ://stackoverflow.com/a/3281239/554002](https://stackoverflow.com/a/3281239/554002)

基本上我必须进行自定义`ArrayAdapter`，并且只使用 a`CheckedTextView`作为我的布局 xml 中的唯一元素，而不是上面发布的元素。

# java - Java - 如果进程挂起，我应该如何检测/杀死进程（以前使用的看门狗/超时观察器）

> ID：15550733
> 
> 赞同：0
> 
> 时间：2013-03-21T14:47:53.443
> 
> 标签：java, multithreading, process, timeout, watchdog

我正在更新一些旧代码，但不确定复制下面的 Watchdog/TimeoutObserver 功能的最佳方式。但是，这是一种旧的方法，我正在尝试将其更新为更符合 jre7。任何建议或帮助将不胜感激。

```
import org.pache.tools.ant.util.Watchdog;
import org.pache.tools.ant.util.TimeoutObserver;

 public class executer implemnts TimeoutObserver {

     public String execute() throws Exception {
         Watchdog watchDog = null;

         try { 
                    //instantiate a new watch dog to kill the process
        //if exceeds beyond the time 
        watchDog = new Watchdog(getTimeout());
        watchDog.addTimeoutObserver(this);
        watchDog.start();

                 ... Code to do the execution .....

              } finally {
             if (aWatchDog != null) {
                  aWatchDog.stop();
             }
         } 
         public void timeoutOccured(Watchdog arg0) {
              killedByTimeout = true;

              if (process != null){
                   process.destroy();
              }
              arg0.stop();
        }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:21:25.303

您可以使用`Future.cancel(boolean)`方法让任务异步运行一段时间。为了使它工作，你`Runnable`应该通过使用来检测它的线程中断状态`Thread.currentThread().isInterrupted()`（这似乎是在你的内部的代码`process.destroy()`）。

下面是*Java Concurrency in Practice*一书的示例（第 7 章“取消”）。有关此任务的其他一些解决方案，请参阅本书。

```
public static void timedRun(Runnable r, long timeout, TimeUnit unit) throws InterruptedException, ExecutionException {
    Future<?> task = taskExec.submit(r);
    try {
        task.get(timeout, unit);
    } catch (TimeoutException e) {
        // task will be cancelled below
    } finally {
        // Harmless if task already completed
        task.cancel(true); // interrupt if running
    }
} 
```

# serial-port - 串行与 SPI

> ID：15550737
> 
> 赞同：13
> 
> 时间：2013-03-21T14:48:04.390
> 
> 标签：serial-port, hardware, spi

SPI和串行有什么区别？在阅读有关处理器间通信的文章时，它指出串行接口正在被 SPI 取代以获得更好/更快的通信？究竟有什么区别？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T15:49:29.357

“连续”这个词意义不大。但我假设您在谈论传统的串行通信标准。SPI 的根本不同在于它是*同步*的。与 RS-232（一种*异步*信号标准）相反。

异步信令的一个重要属性是波特率，即发送字节中位的频率。接收器必须做额外的工作来恢复发送器使用的时钟。典型的 UART 通过以 16 倍波特率的速率对信号进行过采样来实现这一点。起始位很重要，它同步过采样时钟。字节之间的延迟可以是任意的，接收器为每个单独的字节重新同步。这种方案的问题是发射器和接收器时钟频率和时钟抖动之间的不匹配，有效地限制了波特率。

这不是 SPI 的问题，它有一条额外的信号线来传输时钟信号，因此发送器和接收器都使用完全相同的时钟。因此不受失配和抖动的影响，允许更高的传输速率。时钟频率完全没有稳定性要求，信号可以简单地在软件中生成。典型的四线接线如下所示：

![在此处输入图像描述](../Images/050f0d51266bf5052337bc0c3d6ad453.png)

SCLK 是时钟信号。MOSI和MISO携带数据，SS是片选信号。假设有共同点。更多关于它的信息，[请参阅这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)。electronics.stackexchange.com 是一个很好的网站，可以询问有关它的更多问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-31T00:12:38.247

前面的[答案](https://stackoverflow.com/a/15552137)有些误导。

SPI 和 UART 都以字节和/或字的形式传输二进制数据，具体取决于硬件。如上所述，一种是同步的，一种是异步的。两者都需要额外的数据线来实现双向。ASCII 是对二进制数据的一致解释，实际上也不是其中的一个因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-10T13:21:18.343

第[一个答案](https://stackoverflow.com/questions/15550737/serial-versus-spi/15552137#15552137)几乎是正确的，有一些小评论：

1) SPI 是 SSI 的一个子类型 (另一个例子是 RS-422)
2) SPI 使用主/从概念与 CS/SS (chips select, slave select) pin ...

因此，一个主机可以有多个从机，并使用 SS 引脚在它们之间进行选择。此外，在某些芯片上，**使用 SS 可以将芯片从主机切换到从机。**

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-01-20T00:16:48.643

SPI 是一种双向数据协议。不同之处在于 SPI 使用二进制数据交换。并且 UART 使用 ASCII，使其数据传输速度慢得多

# sql - 无法将存储过程的 IMPLICIT_TRANSACTIONS 设置为 OFF？

> ID：15550739
> 
> 赞同：0
> 
> 时间：2013-03-21T14:48:07.893
> 
> 标签：sql, sql-server, stored-procedures, transactions

我有一个存储过程，其中我没有使用任何明确的事务相关代码（即开始/回滚/提交事务），但`@@Trancount`设置为`2`（我通过在存储期间将此值写入表的行条目来监控这一点程序）。这显然意味着那`IMPLICIT_TRANSACTIONS`是设置在`ON`某个地方。

我将以下行添加到我的存储过程的开头......

```
SET IMPLICIT_TRANSACTIONS OFF
GO 
```

....所以它变成了这样：

```
USE [RentTrackingSystem]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET IMPLICIT_TRANSACTIONS OFF
GO
ALTER PROCEDURE [RTS].[GenerateAnnualPenalty] 
    -- Add the parameters for the stored procedure here

    @dueDate Date = NULL ,
    @fiscalYear numeric(4),
    @createdBy Varchar(50),
    @referenceForm Varchar(50),
    @referenceFormNo Varchar(50),
    @PENALTY_NO int ,
    @PenaltyCutOffDate date = NULL

AS

-- Rest of the body here .. 
```

但是，当我执行查询（以更改存储过程）时，关闭该窗口，然后再次打开相同的存储过程的代码，该添加消失，存储过程再次变为：

```
USE [RentTrackingSystem]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [RTS].[GenerateAnnualPenalty] 
    -- Add the parameters for the stored procedure here

    @dueDate Date = NULL ,
    @fiscalYear numeric(4),
    @createdBy Varchar(50),
    @referenceForm Varchar(50),
    @referenceFormNo Varchar(50),
    @PENALTY_NO int ,
    @PenaltyCutOffDate date = NULL

AS

-- Rest of the body here .. 
```

那么这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:20:00.623

您不能`SET IMPLICIT_TRANSACTIONS OFF`在存储过程的主体之前获取，因为这不是在创建存储过程时捕获的值。当您将implicit_transactions 设置为关闭时，您所做的就是设置连接的值，因此当您运行alter 语句时，您将在关闭implicit_transactions 的上下文中运行它，但与该设置无关以及为存储过程定义捕获的内容。

换句话说，有许多设置在任何给定时间都会影响您的查询，但 SQL Server 仅在创建存储过程时捕获`ANSI_NULLS`和设置。`QUOTED_IDENTIFIER`

根据 MSDN：

> 创建存储过程时，会捕获 SET QUOTED_IDENTIFIER 和 SET ANSI_NULLS 设置并将其用于该存储过程的后续调用。

如果您希望 sproc 的内容受到设置的影响，只需将其设置为sproc 声明`SET IMPLICIT_TRANSACTIONS OFF`后的第一件事。`Create Proc Name (variables Datatypes) As...`

请注意，这不会清除现有交易。如果您在存储过程之外有事务，它们仍然存在，此设置只是为了防止创建任何新的隐含事务。

# php - 基本的mysql查询没有结果

> ID：15550741
> 
> 赞同：1
> 
> 时间：2013-03-21T14:48:12.787
> 
> 标签：php, mysql

我得到一个简单的查询，如下所示：

```
$con = mysqli_connect("host","username","password","default_database");

if(mysqli_connect_errno($con))
{
    mysqli_connect_error();
}
else
{
    $query = "SELECT * FROM `users_t`";
    $result = mysqli_query($query) or die (mysql_error());
    while($row = mysqli_fetch_assoc($result))
    {
        echo $row['email'];
    }

} 
```

运行这个查询绝对没有给我任何东西。没有错误但同时没有结果。我无法弄清楚什么是错的，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:50:45.787

看起来这里可能发生了一些事情：

1.  根据[mysqli_connect_errno() 文档](http://php.net/mysqli_connect_errno)，您应该检查`!$con`而不是`mysqli_connect_errno($con)`在您的`if`语句中。
2.  遇到连接错误时，您正在调用错误函数但不打印它。
3.  根据[mysqli_query() 文档](http://php.net/mysqli_query)，第一个参数应该是数据库连接，第二个参数是查询本身。
4.  当查询出错时，您在`mysql_error()`应该调用时调用`mysqli_error()`，并将连接传递给它。同样，根据[文档](http://php.net/mysqli_error)

试试这个，看看这是否能解决你的问题：

```
<?php
$con = mysqli_connect("host","username","password","default_database");

if(!$con) {
  print mysqli_connect_error();
} else {
  $query = "SELECT * FROM `users_t`";
  $result = mysqli_query($con, $query) or die (mysqli_error($con));
  while($row = mysqli_fetch_assoc($result)) {
    echo $row['email'];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:00:27.230

PHP 是区分大小写的，所以有一个很好的变化是你在数据库中的列实际上是命名的`Email`，然后你检查时没有结果`$row['email']`，因为`E`必须是大写的。

您可以做的是确保在 PHP 中使用正确的大小写，或者只选择您想要的字段。MYSQL 不区分大小写，因此如果您执行以下操作，它将起作用。

也是检查您是否有正确案例的好方法：使用`var_dump($row)`（我已将其添加到代码中只是为了向您展示）

```
$con = mysqli_connect("host","username","password","default_database");

if(mysqli_connect_errno($con))
{
    mysqli_connect_error();
}
else
{
    $query = "SELECT email FROM `users_t`";
    $result = mysqli_query($query) or die (mysql_error());
    while($row = mysqli_fetch_assoc($result))
    {
        echo $row['email'];
        var_dump($row);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:50:26.667

```
$result = mysqli_query($query) or die (mysql_error()); 
```

需要一个 mysqli 资源链接，也不需要`mysql_error()`

```
if ($result = mysqli_query($con,$query))
{
while($row = mysqli_fetch_assoc($result))
    {
        echo $row['email'];
    } 
} 
```

# asp.net - 插入语句不插入任何数据

> ID：15550742
> 
> 赞同：0
> 
> 时间：2013-03-21T14:48:13.873
> 
> 标签：asp.net, sql-server, tsql

我有一个页面，其中显示了我的应用程序的组列表。一个组中可以有多个用户。组列表是用 gridview 实现的。除了组描述列之外，gridview 有一个用于向其添加用户的按钮。当我点击这个按钮时，groupid 被传递到一个新页面，在这个页面上有另一个带有用户列表的 gridview。网格视图还有一个按钮域，用于将该特定用户添加到组的组 ID。为此，我有一张额外的桌子：

**用户组**

```
usergroupid
userid
groupid 
```

我的问题是，该表中没有插入任何内容，执行了插入命令，但似乎缺少某些内容。

这是我的代码：

标记：

```
<asp:Content ID="content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">           
            <asp:GridView OnRowCommand="grdBenutzer_RowCommand" ID="grdBenutzer" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
                <Columns>
                    <asp:BoundField ReadOnly="true" DataField="BenutzerID" HeaderText="ID" />                   
                    <asp:TemplateField HeaderText="Bezeichnung">
                        <ItemTemplate>
                            <%# Eval("Bezeichnung")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBezeichnung" Text='<%# Bind("Bezeichnung")%>'>
                                <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                                <asp:ListItem Text="Praktikant" Value="Praktikant"></asp:ListItem>
                                <asp:ListItem Text="Azubi" Value="Azubi"></asp:ListItem>
                                <asp:ListItem Text="Umschüler" Value="Umschüler"></asp:ListItem>
                            </asp:DropDownList>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Vorname">
                        <ItemTemplate>
                            <%# Eval("Vorname")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox runat="server" ID="txtVorname" Text='<%# Bind("Vorname")%>' />
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Nachname">
                        <ItemTemplate>
                            <%# Eval("Nachname")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox runat="server" ID="txtNachname" Text='<%# Bind("Nachname")%>' />
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField ReadOnly="true" HeaderText="Geburtsdatum" DataField="Geburtsdatum" />                    
                    <asp:TemplateField HeaderText="Benutzerart">
                        <ItemTemplate>
                            <%# Eval("Benutzerart")%>
                        </ItemTemplate>                        
                    </asp:TemplateField>
                    <asp:ButtonField ButtonType="Button" HeaderText="Mitglied hinzufügen" Text="Mitglied hinzufügen" CommandName="MitgliedHinzufuegen" />
                </Columns>              
            </asp:GridView>
         <asp:SqlDataSource OnInserted="SqlDataSource1_Inserted" ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
            SelectCommand="SELECT [BenutzerID], [Bezeichnung], [Vorname], [Geburtsdatum], [Nachname], [Benutzerart] FROM [Benutzer] WHERE [Archiviert] != 1"
             InsertCommand="INSERT INTO BenutzerGruppe (BenutzerID, GruppenID) VALUES (@BenutzerID, @GruppenID)">                        
         </asp:SqlDataSource>
</asp:Content> 
```

代码隐藏：

```
protected void SqlDataSource1_Inserted(object sender, SqlDataSourceStatusEventArgs e)
{
            Response.Redirect("Gruppenverwaltung.aspx");
}

protected void grdBenutzer_RowCommand(object sender, GridViewCommandEventArgs e)
{
            if (e.CommandName == "MitgliedHinzufuegen")
            {
                string gruppenid = Request.QueryString["GruppenID"];
                SqlDataSource1.InsertParameters.Add("GruppenID", gruppenid);               
                SqlDataSource1.Insert();
            }
} 
```

将用户添加到组后会触发插入的方法，但是当我查看组的成员时，没有添加任何用户....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:57:24.973

插入命令需要输入参数@BenutzerID，您似乎没有在代码隐藏中提供。

# android - 如何实现多种类型的asynctaskloader

> ID：15550743
> 
> 赞同：0
> 
> 时间：2013-03-21T14:48:14.333
> 
> 标签：android, asynctaskloader

我想将两种类型`asynctaskloader`合二为一`FragmentActivity`。

```
class MyLoader1 extends AsyncTaskLoader<String>{}
class MyLoader2 extends AsyncTaskLoader<Integer>{} 
```

我写如下。但它编译错误。

```
public class MyActivity extends FragmentActivity 
               implements LoaderCallbacks<String>, LoaderCallbacks<Integer>{} 
```

请用简单的示例代码告诉我答案。

* * *

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:20:03.407

正如 hjpotter92 所提到的，这就是 Java 处理泛型的方式。在这种情况下，我只建议使用 hjpotter92 链接中所示的匿名类。

```
public class MyActivity extends FragmentActivity {
     private LoaderCallbacks<String> mLoaderCallbackString = new LoaderCallbacks<String>() {
           ...
     };

     private LoaderCallbacks<Integer> mLoaderCallbackInteger = new LoaderCallbacks<Integer>() {
           ...
     };
} 
```

然后对于每个加载器，您只需传递正确的 LoaderCallbacks 对象

# mysql - SQL DML 脚本

> ID：15550748
> 
> 赞同：2
> 
> 时间：2013-03-21T14:48:26.290
> 
> 标签：mysql, sql

对于给定时间段（包括两个给定日期），例如 2002 年 12 月 1 日至 2003 年 7 月 31 日，找到在指定时间段内至少拥有一张 EZ 链接卡的人的集合。对于集合中的每个人，请列出 (i) 所有者身份证，(ii) 他/她在此期间发行的卡的总数，以及 (iii) 已更换卡的总数（截至当前日期）仅在给定期间发行的那些卡的所有者。按所有者身份证的升序列出您的结果。

```
create table card
(
CardID  int not null primary key,
OwnerNRIC   char(9),
IssuedDcardate  date,
StoredValue decimal (5,2),
OldCardID   int,
constraint card_fk foreign key (OldCardID) references card(CardID)
); 
```

如上是我的牌桌。

这是我的尝试，但我很迷茫。

```
 Select distinct(ownerNRIC) as NRIC,count(*) as Total Crads Issued during Period
From card
Where issuedDate between ‘2002-12-01’ and ‘2003-7-31’ group by ownerNRIC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:54:16.113

我假设换卡会导致非空 OldCardId。如果 OldCardId 为 NULL，那么这*不是*换卡。利用 COUNT( *expr* ) 忽略*expr*为 NULL 的行的方式。

```
SELECT ownerNRIC AS NRIC, 
  COUNT(*) AS `Total Cards Issued During Period`,
  COUNT(OldCardID) AS `Card Replacements During Period`
FROM card
WHERE issuedDate BETWEEN '2002-12-01' AND '2003-7-31' 
GROUP BY ownerNRIC; 
```

您错误地使用了 DISTINCT。这不是一个函数，而且无论如何都没有必要，因为 ownerNRIC 是您的 GROUP BY 列。

> 所有者仅对在给定期间发行的卡进行的换卡总数（截至当前日期）

这个要求不明确。您的意思是旧卡是在给定期间发行的，而新卡是在当前日期之前的任何时间发行的吗？如果是这样，上面的查询不会给你那个。

# python - 更改 Lambda 的变量

> ID：15550749
> 
> 赞同：1
> 
> 时间：2013-03-21T14:48:26.233
> 
> 标签：python, variables, lambda, scipy

我正在使用 scipy (scipy.optimize.curve_fit) 编写一个 Python 程序。我必须在数据集上拟合多条曲线，然后总结它们。第一步是找到所有最大值，这就完成了。至少会有一个，但通常会更多。我想概括如下。

```
if (len(Maxima) == 1):
    f = lambda a, b, c : a * exp((b * x) + c)
else if (len(Maxima) == 2):
    f = lambda a, b, c, d, e, f : (a * exp((b * x) + c)) + (d * exp((e * x) + f) 
```

等等。我需要它，因此 curve_fit 会识别出有 (3 * Maxima) 参数，然后它会在其中为我找到它们。最多可能有 20 条左右的曲线，因此执行上述语句是不切实际的。

任何帮助，将不胜感激。

谢谢。

编辑：对不起，我错过了该函数依赖于最大值。它实际上是集中在每个最大值上的高斯分布。

即一个术语实际上是

```
f = (a * (Gamma ** 2) / (((E - Maxima[i])**2) + (b**2))) 
```

而 E 是 args 必须以它开头的自变量。

例如，对于

```
len(Maxima) == 2 
```

args 必须是，

```
E, a0, b0, Maxima[0], a1, b1, Maxima[1] 
```

对不起，我错了。

编辑2：

我在想这样的事情：

```
GaussianDistribution = lambda E, E0, I0, Sigma : (I0 * np.exp(-(((E - E0) / Sigma)**2)))
args = tuple([long] * ((len(Maxima) * 3) + 1))
d1, d2 = sc.curve_fit(GaussianDistribution(*args), Data[:, 0], Data[:, 1]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:01:03.890

[您可以使用任意参数列表](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)创建一个接受任意数量参数的 lambda 函数。然后，您可以使用列表推导一次获取三个参数，对它们执行操作，然后对结果求和。

```
f = lambda *args: sum(args[i] * exp((args[i+1]*x)+args[i+2]) for i in range(0, len(args)-3, 3)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:01:16.453

如果我猜对了，你应该可以使用一个 lambda：

```
f = lambda a, b, c : a * exp((b * x) + c) 
```

接着

```
result = sum(f(a, b, c) for a, b, c in maxima) 
```

如果`maxima`是形式

```
maxima = [(1, 2, 3), (4, 5, 6), (7, 9, 8)] 
```

（我猜）。

# sql - 我有一个包含 CircuitID 列和其他一些信息的表

> ID：15550754
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:48:43.843
> 
> 标签：sql, function, loops, procedure

我有一个表`Circuits`，其中包含一列`CircuitID`和一些其他信息。

我还有一张`Ports`包含`PortID`其他信息的表格。

我还有另一个表，`Connections`其中包含`CircuitID`、`A_PortID`、`A_Facing`、和其他一些信息。正面只能是“F”或“R”，分别表示正面和背面。`Z_PortID``Z_Facing`

任何进入“F”前部的连接都连接到“R”后部。

基本上我需要的是检索包含`CircuitID`电路每一端的端口 id 的视图。

例如。

对于连接表内的电路“1”

```
CircuitID, A_PortID, A_Facing, Z_PortID, Z_Facing 
-------------------------------------------------
1             1          "F"        2        "R"
1             2          "F"        3        "F"
1             3          "R"        4        "R" 
```

所以电路的整个连接变成

```
1 "F" <---> 2 "R" <> 2 "F" <---> 3 "F" <> 3 "R" <---> 4 "R" 
```

所以对于电路，`PortID1=1`and `Facing1="F"`and `PortID2=4`and`Facing2="R"`

由于每个电路的连接数量各不相同，我正在考虑使用存储过程或函数从每个电路获取任何 1 个连接。

有了这个，我可以利用`PortID`和面对，然后调用另一个子过程或函数来确定下一个连接端。它将一直循环，直到没有端口连接到远程端。

有了这个，我将能够得到`PortID`这个远程端的和面向。

接下来我将执行相同的功能来检查另一端。

最后，我需要对结果进行分组，`CircuitID`并获取连接端口 ID 和朝向的每一端。

希望任何人都可以建议我应该使用存储过程还是函数。然后继续循环并调用另一个子过程或函数。我不确定哪个更适合这种用途。存储过程或函数。

我创建了一个子过程只是为了找到下一个连接

```
CREATE PROCEDURE dbo.GetNextEnd(@Portid int, @Facing varchar)
AS
 SELECT Connections.Z_PortID AS RemotePortID, Connections.Z_Facing AS RemoteFacing,
    Connections.Z_RackID As RemoteRackID, Connections.Z_Description As RemoteDescription FROM Connections WHERE Connections.A_PortID = @PortID AND Connections.A_Facing = @Facing
    UNION
    SELECT Connections1.A_PortID AS RemotePortID, Connections1.A_Facing AS RemoteFacing,
    Connections1.A_RackID As RemoteRackID, Connections1.A_Description As RemoteDescription FROM Connections AS Connections1 WHERE Connections1.Z_PortID = @PortID AND Connections1.Z_Facing = @Facing 
```

希望有人也可以展示如何在主过程或函数中使用循环来调用上述子过程的任何示例。

我已经尝试了几个星期，但仍然无法让它在 SQL 中工作。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:58:54.630

在您给出的示例中，portid 是有序的，因此最小值是第一个，最大值是最后一个。如果这是真的，那么问题很简单：

```
select circuitId, min(portId), max(portid)
from Connections
group by circuitId 
```

如果这不是真的，那么您需要提供有关您正在使用的数据库的信息。您将需要使用诸如递归 CTE 之类的东西来解决问题（SQL Server、Postgres）或`connect by`子句（Oracle）。或者放弃（MySQL，Access）；）好吧，放弃太强了，但是你必须在存储过程中做很多编码。

# c# - 优化 LINQ 查询

> ID：15550755
> 
> 赞同：2
> 
> 时间：2013-03-21T14:48:47.153
> 
> 标签：c#, sql-server, linq, linq-to-sql, query-optimization

我有一份报告显示向确定的商家发出的订单，它工作正常，直到我需要为付款状态添加过滤器。

这就是我构建查询的方式，按过滤器过滤：

```
var queryOrder = context.Orders.Select(m=>m);

if (viewModel.InitialDate.HasValue)
    queryOrder = queryOrder.Where(m => m.CreatedDate.Date >= viewModel.InitialDate.Value);

(...) /* continues building the query, filter by filter */

if (viewModel.SelectedPaymentStatus != null)
    queryOrder = queryOrder.Where(m => viewModel.SelectedPaymentStatus.Contains(m.Payments.Select(p => p.PaymentStatusId).Single().ToString()));

queryOrder = queryOrder.Where(m => m.MerchantId == merchantId); 
```

当我运行时`queryOrder`，即使它只是一个`queryOrder.Count()`，也需要超过 1 分钟才能执行。使用 SQL Server 的分析工具，我将生成的查询提取为：

```
SELECT [t0].[Id], [t0].[CustomerId], [t0].[MerchantId], [t0].[OrderNumber], [t0].[Amount], [t0].[SoftDescriptor], [t0].[ShippingMethod], [t0].[ShippingPrice], [t0].[IpAddress], [t0].[SellerComment], [t0].[CreatedDate]
FROM [dbo].[Order] AS [t0]
WHERE ([t0].[MerchantId] = @p0) 
AND ((CONVERT(NVarChar,(
       SELECT [t1].[PaymentStatusId]
       FROM [dbo].[Payment] AS [t1]
       WHERE [t1].[OrderId] = [t0].[Id]
    ))) IN (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)) 
```

@p0 参数是 MercerId 的 Guid，@p1 到 @p8 是数字字符串`"1"`thru `"8"`，代表 paymentStatusId。

如果我跳过该行：

```
if (viewModel.SelectedPaymentStatus != null)
    queryOrder = queryOrder.Where(m => viewModel.SelectedPaymentStatus.Contains(m.Payments.Select(p => p.PaymentStatusId).Single().ToString())); 
```

查询在 1 秒内运行。但是，当我使用它时，性能却一落千丈。关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:33:09.210

我已经注释了问题片段：

```
if (viewModel.SelectedPaymentStatus != null) {

    // Give me only orders from queryOrder where...
    queryOrder = queryOrder.Where(

        // ...my viewModel's SelectedPaymentStatus collection...
        m => viewModel.SelectedPaymentStatus.Contains(

                 // ...contains the order's payment's PaymentStatusId...
                 m.Payments.Select(p => p.PaymentStatusId).Single()

                                          // ... represented as a string?!
                                         .ToString()
                                          // Why are database IDs strings?
             )
        );
} 
```

`viewModel.SelectedPaymentStatus`似乎是字符串的集合；因此，您要求数据库转换`PaymentStatusId`为 nvarchar 并与`SelectedPaymentStatus`. 呸。

由于`viewModel.SelectedPaymentStatus`很小，最好创建一个临时的`List<int>`并在查询中使用它：

```
if (viewModel.SelectedPaymentStatus != null) {

    // Let's do the conversion once, in C#
    List<int> statusIds = viewModel.SelectedPaymentStatus.Select( i => Convert.ToInt32(i) ).ToList();

    // Now select the matching orders
    queryOrder = queryOrder.Where(
                     m => statusIds.Contains(
                              m.Payments.Select(p => p.PaymentStatusId).Single())
                          )
                 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:01:19.760

您的所有查询都被推迟，这既是 linq 的好/坏部分。尝试拆分查询并使用一些内存中的结果。尝试删除第一个查询（实际上没有多大意义，您返回的是相同的集合）并将第二个查询修改为这样，看看它是否有任何区别。

```
var clause = context.Orders.Payments.Select(p => p.PaymentStatusId).Single().ToString();
if (viewModel.SelectedPaymentStatus != null)
    var queryOrder = context.Orders.queryOrder.Where(m => viewModel.SelectedPaymentStatus.Contains(clause)); 
```

# three.js - Three.js——让文本覆盖出现在屏幕上

> ID：15550760
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:01.013
> 
> 标签：three.js

我想创建一些机制，在特定时间（例如单击鼠标按钮时）在我的 3D 场景顶部提供文本覆盖。

我正在[浏览 github](http://mrdoob.github.com/three.js/)上的教程，并注意课程之`THREE.TextGeometry`类的内容。使用它，我可以在场景中放置 3D 文本，但它可能比我需要的要多一些——我真正想要的是一种在黑色背景上放置一些文本的方法，将其覆盖在场景中，然后在完成后将其移开。有谁知道在three.js中做到这一点的好方法？（如果`THREE.TextGeometry`课程是这样做的好方法，那很好，我只是不确定如何做覆盖位。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:53:54.333

使用 HTML。它超级简单且功能强大，特别是如果您只需要叠加层。使用 CSS，您还可以实现半透明背景之类的东西。如果您想让它“混合”到场景中，即具有透视等，您可以使用`THREE.CSS3DRenderer`它将根据您提供的相机转换 div。

# ruby-on-rails - Ruby 类型类不匹配错误

> ID：15550762
> 
> 赞同：1
> 
> 时间：2013-03-21T14:49:08.800
> 
> 标签：ruby-on-rails, ruby, nameerror, type-mismatch

平台：Ubuntu 12.10

在我的终端中，我正在尝试运行`bundle exec rspec spec/models/user_spec.rb`

我正在关注 Michael Hartl 的 Learn Web Development：Ruby on Rails 教程来测试用户。

我的代码如下：

```
class User < ActiveRecord::Base      
    attr_accessible :email, :name  
end 
```

我的错误如下所示：

```
root@NIyi-PC:/usr/sample_app# bundle exec rspec spec/models/user_spec.rb 
Rack::File headers parameter replaces cache_control after Rack 1.5.
/usr/sample_app/app/models/user.rb:13:in `<top (required)>': superclass mismatch for class User (TypeError) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:53:21.043

如果您已经`class User`在代码中首先声明了其他地方，则会发生此错误：

```
1.9.3-p374 :001 > class Bar; end
 => nil
1.9.3-p374 :002 > class Foo; end # first declaration, no superclass
 => nil
1.9.3-p374 :003 > class Foo < Bar; end # attempting to declare superclass later
TypeError: superclass mismatch for class Foo
    from (irb):3
    from /Users/Mark/.rvm/rubies/ruby-1.9.3-p374/bin/irb:16:in `<main>' 
```

对比

```
1.9.3-p374 :001 > class Bar; end
 => nil
1.9.3-p374 :002 > class Foo < Bar; end # first declaration, including superclass
 => nil
1.9.3-p374 :003 > class Foo; end # don't have to mention the superclass later
 => nil 
```

有时这可能很难追踪，但一个简单的起点是在整个项目中搜索“类用户”。

# python - Python：如何获取在某个位置花费的时间分布

> ID：15550765
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:16.750
> 
> 标签：python, algorithm, distribution, histogram, text-processing

我有一个包含一些用户位置信息的大数据文件。格式如下图：

```
 User      TimeStamp            Lat        Long
     A   2013-03-01 19:55:00     45.4565    65.6783
     A   2013-03-01 01:40:00     46.3121    -12.3456
     A   2013-03-02 11:25:00     23.1234    -85.3456
     A   2013-03-05 05:00:00     15.4565    32.1234
        ......   

     C   2013-03-01 19:55:00     44.4565    35.6783
     C   2013-03-03 11:20:00     42.3121    -22.3456
     C   2013-03-03 11:25:00     42.3121    -22.3456
     C   2013-03-03 11:30:00     16.4565    22.1234
     C   2013-03-03 11:50:00     42.3121    -22.3456
     C   2013-03-03 11:55:00     19.4565    -25.1234
        ...... 
```

时间戳使得每行代表 5 分钟间隔内的一个位置。该数据为期一周。

现在，我想做的是获得一个用户在整个一周期间每天在每个位置花费的时间的简单分布（直方图）。因此，每个用户每天在每个位置花费的时间为 0 小时到 24 小时。

第二件事与上述类似，但我不会考虑一个用户每天的总时间，而只会考虑连续的时间花费。例如，对于用户 C，我会将第 2 行和第 3 行一起视为 10 分钟的时间段，但他回到同一个地方的第 5 行将是单独的 5 分钟时间段。

我将如何在 python 中执行此操作？我是这里的新手，有点卡在这里。我想我可以把时间戳分成天、小时、分钟和秒，每天都会得到这些计数。但在那之后我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:02:48.033

要收集数据：

对于第一部分（我们没有将时间戳“融合在一起”），维护一张

`(latitude, longitude) -> time spent`

处理每个时间戳，增加相应的映射条目。

对于第二部分：

首先按用户对时间戳进行排序，然后按时间排序。现在您可以在列表中运行两个“指针”，一个用于开始，另一个用于连续周期的结束。

用第三个“维度”扩充您的地图，这可能对应于连续周期的开始。

IE

`(latitude, longitude, beginning of period) -> time spent`

而且，瞧，将连续期间的所有时间戳添加到适当的映射条目。

可视化是另一种野兽：我不知道如何处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:04:45.657

您可以制作这样的热图：

```
import numpy as np
import pandas as pd
import io
import matplotlib.pyplot as plt

content = '''\
   User      TimeStamp            Lat        Long
     A   2013-03-01 19:55:00     45.4565    65.6783
     A   2013-03-01 01:40:00     46.3121    -12.3456
     A   2013-03-02 11:25:00     23.1234    -85.3456
     A   2013-03-05 05:00:00     15.4565    32.1234
     C   2013-03-01 19:55:00     44.4565    35.6783
     C   2013-03-03 11:20:00     42.3121    -22.3456
     C   2013-03-03 11:25:00     42.3121    -22.3456
     C   2013-03-03 11:30:00     16.4565    22.1234
     C   2013-03-03 11:50:00     42.3121    -22.3456
     C   2013-03-03 11:55:00     19.4565    -25.1234
'''

df = pd.read_table(io.BytesIO(content), sep='\s+', parse_dates=True, index_col=[1])
fig, ax = plt.subplots(df['User'].nunique())
for i, (user, grp) in enumerate(df.groupby('User')):
    xedges = np.linspace(grp['Long'].min(), grp['Long'].max(), 5)
    yedges = np.linspace(grp['Lat'].min(), grp['Lat'].max(), 7)        
    hist, xedges, yedges = np.histogram2d(
        grp['Long'], grp['Lat'], (xedges, yedges), normed=False)
    hist = hist.T
    print(hist)
    ax[i].pcolormesh(hist, cmap=plt.get_cmap('jet'))
    ax[i].set_xticks(np.arange(hist.shape[1]+1), minor=False)
    ax[i].set_xticklabels(map('{:0.2f}'.format, xedges), minor=False)
    ax[i].set_yticks(np.arange(hist.shape[0]+1), minor=False)
    ax[i].set_yticklabels(map('{:0.2f}'.format, yedges), minor=False)
    ax[i].invert_yaxis()
    ax[i].set_xlim(0, hist.shape[1])
    ax[i].set_ylim(0, hist.shape[0])
    ax[i].set_title(user)
plt.show() 
```

![在此处输入图像描述](../Images/6fcd29da97f7f6e91d33fdd04f778d3b.png)

# java - 使用 Java 中的正则表达式删除文件的特 定内容

> ID：15550771
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:25.203
> 
> 标签：java, regex

考虑我有一个数据文件存储规则，格式如下：

```
//some header info
//more header info

//Rule: some_uuid_1234 
rule "name" 
 data
 data
 data
end

//Rule: some_uuid_5678 
rule "name2"
 data
 data
 data
end 
```

现在，我想要的是能够给定 ID 号`read(id)`或规则。`delete(id)`因此，我的问题是，我如何选择和删除规则（可能使用正则表达式），然后从文件中删除此特定规则，而不更改其他任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:18:16.790

我能想到 2 种解决方案，它们的性能各不相同，因此您可以选择最适合您的一种。

# 索引文件

您可以为此规则文件编写一个[倒排索引，并为修改该文件的任何操作保持更新。](http://en.wikipedia.org/wiki/Inverted_index)当然，您的单词索引将被限制在一个文件中，并且其中唯一的单词将是唯一的 UUID。您可以使用 RandomAccess 文件从给定的偏移量快速读取（）。delete() 操作可以覆盖目标规则，直到遇到单词'end'。此解决方案需要更多工作，但您可以立即检索值。

# 使用正则表达式

您也可以读取文件中的每一行并将其与匹配您的规则 UUID 的正则表达式模式匹配。继续阅读，直到您到达规则的“结尾”并返回它。一旦您知道所需的索引，删除将涉及覆盖规则。这个解决方案很容易编写，但性能会很糟糕。有很多 IO，它*可能会*成为瓶颈。（您也可以将整个文件加载到内存中并在整个字符串上运行正则表达式，具体取决于文件/字符串的预期大小。不过，这可能会很快变得丑陋。）

无论您选择哪种解决方案，您可能还需要考虑文件级锁以及它如何影响 CRUD 操作。如果此设计尚未实施，请考虑将规则移至数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:00:22.737

只需用`<some_id>`实际的真实 ID 号替换您的选择/删除功能。

```
//Rule: <some_id>.+?rule.+?end 
```

注意：不要忘记 SingleLine 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:22:26.930

我不会使用正则表达式来解决这个特殊问题——它需要将整个文件加载到内存中，处理它并重写它。这本来就不是坏事，但是如果您有足够大的文件，则基于流的解决方案可能会更好。

您要做的是一次处理一行输入文件并保持一个布尔值：

*   `true`当您找到与所需规则的声明标题匹配的行时变为。
*   变成`false`当它的时候`true`，你找到一条匹配的线`end`。

丢弃布尔值设置为 时遇到的所有行`true`，将所有其他行写入临时输出文件（例如，使用 创建的`File#createTempFile`）。

对于每一行，如果您的布尔值为`true`，请忽略它。否则，将其写入临时输出文件。

在该过程结束时，使用临时输出文件覆盖您的输入文件`File#renameTo`。

请注意，此解决方案具有原子性的附加优势：如果在处理过程中发生错误，则不会有部分写入输入文件的风险。它将被完全覆盖或根本不覆盖，这可以保护您免受意外`IOException`的影响。

以下代码演示了如何实现它。它不一定是一个完美的实现，但它应该说明算法 - 在所有样板代码中间的某个地方丢失。

```
public void deleteFrom(String id, File file) throws IOException {
    BufferedReader reader;
    String         line;
    boolean        inRule;
    File           temp;
    PrintWriter    writer;

    reader = null;
    writer = null;
    try {
        // Streams initialisation.
        temp   = File.createTempFile("delete", "rule");
        writer = new PrintWriter(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(temp), "utf-8")));
        reader = new BufferedReader(new InputStreamReader(new FileInputStream(file), "utf-8"));
        inRule = false;

        // For each line in the file...
        while((line = reader.readLine()) != null) {
            // If we're parsing the rule to delete, we're only interested in knowing when we're done.
            if(inRule) {
                if(line.trim().equals("end"))
                    inRule = false;
            }

            // Otherwise, look for the beginning of the targetted rule.
            else if(line.trim().equals("rule \"" + id + "\""))
                inRule = true;

            // Normal line, we want to keep it.
            else
                writer.println(line);
        }
    }

    // Stream cleanup.
    finally {
        if(reader != null)
            reader.close();
        if(writer != null)
            writer.close();
    }

    // We're done, copy the new file over the old one.
    temp.renameTo(file);
} 
```

# matlab - 2 路方差分析期间超过 MATLAB 最大变量大小

> ID：15550772
> 
> 赞同：1
> 
> 时间：2013-03-21T14:49:25.580
> 
> 标签：matlab, variables, size, anova

我正在尝试对 MATLAB 中的一组数据运行 2 路随机效应方差分析。这是我正在使用的代码：

```
[pval table stats terms] = anovan(modelfit, {RATEES RATERS},...
 'model', 'interaction', 'random', 2, 'varnames', {'RATEE' 'RATER'}) 
```

但是，这样做会给我错误：

```
??? Maximum variable size allowed by the program is exceeded.

Error in ==> termcross at 13
ab = a(:,acols) .* b(:,bcols);

Error in ==> anovan>maketerm at 1470
         tdum = termcross(termdum{k}, tdum);

Error in ==> anovan>makedummyterms at 1122
   [tdum,vars,tn,df0,tconstr] = maketerm(tm,isnested,varinfo,j,sindex,...

Error in ==> anovan at 199
terminfo = makedummyterms(sindex, termlist, varinfo, ... 
```

我知道这个错误意味着什么，但我真的不明白为什么我在这里得到它。如果我将我的代码修改为以下任何一项，它将正常工作，但它没有给我我需要的数据：

```
[pval table stats terms] = anovan(modelfit, {RATEES RATERS},...
 'random', 2, 'varnames',     {'RATEE' 'RATER'})

[pval table stats terms] = anovan(modelfit, {RATEES RATERS}) 
```

当我尝试使用“交互”模型时，它只是不起作用。为什么？我真的只有太多的数据吗？我的每个输入变量（modelfit、RATEES、RATERS）的大小都是 14879 x 1。也就是说，1 列数组有 14879 个值。

如果这真的太多了，我该如何获得我需要的交互效果？

编辑：如果相关，我使用的是 64 位 Mac OS X 10.6.8 (Snow Leopard) 和 MATLAB R2008a。

EDIT2：我也不明白如何使用 anovan 命令的“随机”元素。我必须输入一个索引，但它只能让我选择一个变量作为随机效应？我希望 RATEES 和 RATERS 都是随机的，但它只能让我选择一个！为什么 MATLAB 对这种类型的分析如此不灵活？

# c# - 双显示器父子窗口问题

> ID：15550774
> 
> 赞同：2
> 
> 时间：2013-03-21T14:49:26.880
> 
> 标签：c#, wpf

我有两个显示器。当我的应用程序运行时，父级显示在第一台监视器上。当我将父窗口移动到第二个监视器并单击一个按钮（显示用于加载的 xaml 窗口）时，此子窗口将保留在第一个监视器上。无论父窗口位于何处，有没有办法让子窗口与父窗口保持一致？

请注意：父母是winform ...孩子是xaml。

加载 xaml（儿童）

```
<Window x:Class="Test.Loading"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    WindowStyle="None" 
    AllowsTransparency="True" 
    WindowState="Maximized"
    Background="Gray">

    <Grid>
        <Border>
            <TextBlock Text="Loading ..." />
        </Border>
    </Grid>
</Window> 
```

家长

```
 private void btnShowLoading_Click(object sender, EventArgs e)
{
    Loading load = new Loading();

    double top = this.Top;
    double left = this.Left;

    load.Top = top;
    load.Left = left;

    load.Show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:54:18.017

试试这个：

`childWindow.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterOwner;`

更新 1：

获取父窗口的位置并将其设置为子窗口。如果您认为您的父窗口的状态发生了变化，您可以使用它来获取实际的顶部和左侧：

```
var leftField = typeof(Window).GetField("_actualLeft", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
var topField = typeof(Window).GetField("_actualTop", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);

double left = (double)leftField.GetValue(parentWindow);

double top = (double)topField.GetValue(parentWindow); 
```

来源：[Window ActualTop、ActualLeft](https://stackoverflow.com/questions/3600874/window-actualtop-actualleft)

更新 2：首先你必须告诉它`parentWindow`是`WinForms`. 在这种情况下，您可以获得 parentWindow `Top`，`Left`如下所示：

```
double top = this.Top;
double left = this.Left; 
```

然后将 的顶部和左侧传递`parentWindow`给`childWindow`. 加载时`childWindow`它应该设置`top`和`left`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:39:54.033

在 WPF 中，您需要手动设置所有者窗口 - 它不会自动完成。从[Window.Show](http://msdn.microsoft.com/en-us/library/system.windows.window.show.aspx)：

> 通过调用 Show 打开的窗口不会自动与打开它的窗口建立关系；具体来说，打开的窗口不知道是哪个窗口打开的。这种关系可以使用 Owner 属性建立并使用 OwnedWindows 属性进行管理。

由于您的加载窗口没有所有者，它将以您的主监视器为中心。使用下面的代码：

```
private void btnShowLoading_Click(object sender, EventArgs e)
{
    Loading load = new Loading();
    load.Owner = this;
    load.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterOwner; 
    load.Show();
} 
```

# vbscript - VBScript 如果然后，尝试使用参数运行 exe

> ID：15550776
> 
> 赞同：2
> 
> 时间：2013-03-21T14:49:28.017
> 
> 标签：vbscript, if-statement

```
Option Explicit 

Dim oFSO, oTxtFile

Set oFSO = CreateObject("Scripting.FileSystemObject") 

If oFSO.FileExists("c:\users\Installed.txt")  Then
  WScript.Quit
Else 
  Set WshShell = CreateObject("WScript.Shell")
  WshShell.Exec("\\1.1.1.1\software\1.exe -s /s -a ns=1.5.3.2")   

  Set oTxtFile = oFSO.CreateTextFile("c:\users\Installed.txt") 
End If 
```

我的代码在上面。运行我的 vbs 时出现错误。第 13 行 char 1 变量未定义。“WSHShell”。

目标是让这个 vbs 检查文件。如果文件存在则结束。如果找不到该文件，请运行带有参数的安装程序，然后创建该文件。

任何帮助都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:54:26.880

如果您使用“Option Explicit” - 正如您应该使用的那样 - 所有变量都必须是 (Re)Dim-ed。因此，将 WshShell 添加到您的 Dim 语句中。

# cmake - 如何从 cmake `file(GLOB ...)` 模式中排除单个文件？

> ID：15550777
> 
> 赞同：105
> 
> 时间：2013-03-21T14:49:28.007
> 
> 标签：cmake

我的`CMakeLists.txt`包含这一行：

`file(GLOB lib_srcs Half/half.cpp Iex/*.cpp IlmThread/*.cpp Imath/*.cpp IlmImf/*.cpp)`

并且该`IlmImf`文件夹包含`b44ExpLogTable.cpp`，我需要将其从构建中排除。

如何做到这一点？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-03-21T15:12:22.117

您可以使用该[`list`](https://cmake.org/cmake/help/latest/command/list.html)函数来操作列表，例如：

```
list(REMOVE_ITEM <list> <value> [<value> ...]) 
```

在你的情况下，也许这样的事情会起作用：

```
list(REMOVE_ITEM lib_srcs "IlmImf/b44ExpLogTable.cpp") 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2018-03-20T05:57:13.697

FILTER 是另一种选择，在某些情况下可能更方便：

```
list(FILTER <list> <INCLUDE|EXCLUDE> REGEX <regular_expression>) 
```

此行不包括以所需文件名结尾的每个项目：

```
list(FILTER lib_srcs EXCLUDE REGEX ".*b44ExpLogTable\\.cpp$") 
```

这是cmake的正则[表达式规范：](https://cmake.org/cmake/help/v3.6/command/string.html#regex-specification)

```
The following characters have special meaning in regular expressions:

^         Matches at the beginning of input
$         Matches at the end of input
.         Matches any single character
[ ]       Matches any character(s) inside the brackets
[^ ]      Matches any character(s) not inside the brackets
 -        Inside brackets, specifies an inclusive range between
          characters on either side e.g. [a-f] is [abcdef]
          To match a literal - using brackets, make it the first
          or the last character e.g. [+*/-] matches basic
          mathematical operators.
*         Matches preceding pattern zero or more times
+         Matches preceding pattern one or more times
?         Matches preceding pattern zero or once only
|         Matches a pattern on either side of the |
()        Saves a matched subexpression, which can be referenced
          in the REGEX REPLACE operation. Additionally it is saved
          by all regular expression-related commands, including
          e.g. if( MATCHES ), in the variables CMAKE_MATCH_(0..9). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-30T12:22:53.087

尝试这个 ：`CMakeLists.txt`

```
install(DIRECTORY   ${CMAKE_SOURCE_DIR}/ 
            DESTINATION ${CMAKE_INSTALL_PREFIX}
            COMPONENT   copy-files
            PATTERN     ".git*"   EXCLUDE
            PATTERN     "*.in"    EXCLUDE
            PATTERN     "*/build" EXCLUDE)

add_custom_target(copy-files
            COMMAND ${CMAKE_COMMAND} -D COMPONENT=copy-files
            -P cmake_install.cmake) 
```

```
$cmake <src_path> -DCMAKE_INSTALL_PREFIX=<install_path>
$cmake --build . --target copy-files 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T13:21:59.167

我有一个值得注意的替代解决方案：将源标记为头文件。这样它就不会成为构建过程的一部分，但会在 IDE 中可见（在 Visual Studio 和 Xcode 上验证）：

```
set_source_files_properties(b44ExpLogTable.cpp,
                            PROPERTIES HEADER_FILE_ONLY TRUE) 
```

当某些源文件是特定于平台的时，我会使用它。这很好，因为如果必须在许多地方修改某个符号并在一个平台上工作，那么其他平台特定的源将是可见的并且也可以更新。

为此，我创建[了一个辅助函数](https://stackoverflow.com/a/52589309/1387438)，它在我当前的项目中效果很好。

我还没有对文件 GLOB 使用这种方法。

# php - 动态加载 xml 的 XML 请求给出 null

> ID：15550778
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:28.537
> 
> 标签：php, xml, ajax, request

任何想法为什么在动态生成的文件上使用 ajax 请求时返回 null 但将该文件的内容粘贴到静态文件时，请求可以在静态文件上正确执行？

```
//function to load more data when the user scrolls down.
$(window).scroll(
  function()
  {
    if ($(window).scrollTop() == $(document).height() - $(window).height())
{
      request = createRequest();
  if (request == null)
  {alert("Unable To Create Request");
    }  
    else
{
      <!-- file with xml content is generated in php -->
  var url="/xmlfile.php"; 
      <!-- everthing works when the contents of the output are pasted into this file ->
      <!-- var url="/sample.xml"; -->
  request.open("GET",url,true);
  request.open("GET",url,true);
  request.onreadystatechange = method1;
  request.send(null);
}
  });

  function method1()
  { 
    if (request.readyState == 4) 
{
  if (request.status == 200) 
  {
    var xmldata=request.responseXML; 
    <!-- returns null for php file but valid object for static xml file -->
        alert('xmldata :: '+xmldata);
  }
}
  } 
```

由于检查了就绪状态，这不应该意味着文件已完全加载吗？

感谢您的任何提示。

大

# html - CSS 未在 chrome 浏览器中正确应用

> ID：15550788
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:45.597
> 
> 标签：html, css, css-float

我的 JSPX 中有以下几行

```
<div class="page_nav">
   <a id="saveButton" class="button"><span>${save}</span></a>           
   <a id="cancelButton" class="button"><span>${cancel}</span></a>
</div> 
```

用于加载“保存”和“取消”按钮。当我加载页面时，按钮的顺序是没有顺序的，只有在 chrome 中。请参阅屏幕截图以供参考

![按钮未按顺序显示](../Images/9a5b0320f2b6e1e37328e6a8fa031eec.png)

下面是css的复制粘贴

```
a.button {
    background: transparent
        url('../../images/admin/bg_button_span.png') repeat
        scroll top right;
    color: #fff;
    display: block;
    float: left;
    font: normal 1.1em Tahoma, Arial;
    height: 24px;
    margin-right: 6px;
    padding-right: 10px;
    padding-left: 10px;
    text-decoration: none;
    cursor: pointer;
}

.page_nav {
   float: left;
   margin: 1em 0;
   width: 100%;
   clear: both;
} 
```

***这仅在 chrome 中发生***

**我在另一个页面中使用相同的 div（同样的类名）。它在那里完美地工作。不知道这里缺少什么**

请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:53:52.360

尝试为 .page_nav 设置溢出：隐藏：

```
.page_nav {
   float: left;
   display:block;
   margin: 1em 0;
   width: 100%;
   overflow: hidden;
} 
```

# arrays - Fortran：读取字符串中不规则分隔项的文本文件

> ID：15550789
> 
> 赞同：1
> 
> 时间：2013-03-21T14:49:48.307
> 
> 标签：arrays, string, datagrid, text-files, fortran95

我是 Fortran 的新手，我需要编写一个代码，允许我读取一个文本文件（.dat），其中包含不规则空格/不规则分隔的数据数组（1876 列 x 3126 行）并将其写入新文件具有一致的格式。简而言之，我希望数据的列相互对齐。

前任：

> ```
>  <4 spaces>    0.2341   15.0769
>  <2 spaces>  -10.0672    1.6278    
>  <3 spaces>   66.9851  -14.7123
>  <3 spaces>   -0.4468   -2.5673 
> ```

上面的示例基本上是数据列应该是什么样子，每个值之前都有相应的空格数，如图所示。值的格式为“f10.4”

这是我尝试编写的代码。我能够编译代码并运行 exe 文件，但是，它无法从文本文件中读取并产生运行时错误：文件结束。

```
program refgrid
implicit none

   integer :: nrow, ncol
   integer :: i, j
   real, dimension(:,:), allocatable :: mat

   print *, ' Input number of rows: '
   read *, nrow
   print *, 'Input number of columns: '
   read *, ncol

   allocate(mat(1:ncol,1:nrow))

   open(UNIT=1, FILE='bathymetry2.dat', FORM='FORMATTED', STATUS='OLD', ACTION='READ')

   do i=1, nrow
      read(UNIT=1, FMT=*) mat
   end do

   close(UNIT=1)

   open(UNIT=1, FILE='refgrid.dat', FORM='FORMATTED', STATUS='NEW', ACTION='WRITE')

   do i=1, nrow
      write(UNIT=1, FMT=101) mat
      101 format(1826f10.4)
   enddo

   close(UNIT=1)

end program refgrid 
```

我的问题：

1.  如何使用 do 循环从一行中连续读取值？在“do”循环中使用 f 格式的重复功能时，我有点困惑。

2.  我可以将数组“mat”作为一个整体读/写吗？或如何分配 data_list 进行读/写？我可以分配整个矩阵而不是单个元素吗？

对于此事，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:13:44.343

问题是，在 do 循环中的每次迭代中，您都会尝试读取与整个数组一样多的元素`mat`。您应该在每次迭代中只填写一列。或者，您可以使用一条读取语句读取整个数组，而无需任何循环。

至于写作，您需要重复格式与列数一样多。我建议动态创建一个格式字符串，以便它自动适应用户输入的列数。请参见下面的示例。您也可以省略用于写入的 do 循环，因为 Fortran 会在所有格式规范都已使用时自动添加记录结束符号（换行符），并且它将再次开始应用它们。

```
program refgrid
  implicit none

  integer :: nrow, ncol
  real, allocatable :: mat(:,:)
  character(20) :: form

  print *, ' Input number of rows: '
  read *, nrow
  print *, 'Input number of columns: '
  read *, ncol

  allocate(mat(1:ncol, 1:nrow))
  open(unit=1, file='bathymetry2.dat', status='OLD', action='READ')
  read(1, *) mat
  close(1)

  write(form, "(A,I0,A)") "(", ncol, "F10.4)"
  open(1, file='refgrid.dat', form='FORMATTED', status='NEW', action='WRITE')
  write(1, form) mat
  close(1)

end program refgrid 
```

更新：至于格式说明符的动态创建：您在字符串中写入`form`三件事：一个字符串 ( `A`)、一个仅包含所需字符数的整数 ( `I0`) 和另一个字符串 ( `A`)。第一个字符串是`(`，整数是`ncol`，第二个字符串是`F10.4)`。所以，只要`ncol`有 value `128`，你就会有`form`string `(128F10.4)`。这是一个包含有效格式说明符的字符串，因此您可以在 write 语句中使用它而不是硬编码格式说明符。

# php - PHP foreach 给出错误的结果

> ID：15550795
> 
> 赞同：0
> 
> 时间：2013-03-21T14:49:54.690
> 
> 标签：php, if-statement, foreach, while-loop

我已经搜索了很长时间，但我无法弄清楚为什么我的代码无法正常工作。我不确定我是否遇到障碍或其他任何事情，但这里是：

```
$start = 1;
$sstart = strval($start);
$scan = scandir('upload');
$result = null;
while($result==null)
    {
        foreach($scan as $value)
        {
            if(strpos($value,$start) == false)
                {
                    $result = $start;
                    break 2;
                }
            else
                {
                    $start = $start + 1;
                    break;
                }
        }
    } 
```

本质上，我想扫描我的目录`'upload'`以查找带有`$start`. 如果未找到该值，则`$result`取 的值`$start`并`while()`结束循环。否则，我会增加`$start`并继续检查目录中的每个文件。

现在我有一个非常相似的功能，像这样在另一个完美运行的页面上运行。然而，这似乎总是停在 1。

在我的上传文件夹中肯定有一个文件`showreel1.wmv`，它肯定会扫描它。（已经回显了scandir数组）但是，它似乎从未切换到`else`块，而是继续设置`$result`，就好像它从未找到值'1'。

我也尝试过`$sstart`在`strpos()`函数中使用，它没有任何效果，这当然会将值更改`$start`为字符串。

你们能帮我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:56:04.270

如果 haystack 以您正在搜索的针头开始，则 strpos 返回 0

此行将返回误报（即，它会告诉您它不包含字符串，即使它实际上以字符串开头）

```
if(strpos($value,$start) == false) 
```

您需要使用`===`运算符来完全匹配 false

```
 if(strpos($value,$start) === false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:58:07.753

我希望我明白你想要做什么，试试这个：

```
while($result === null)
{
    $found = false;
    foreach($scan as $value)
    {
        if(strpos($value,$start) !== false)
        {
            $found = true;
            $start = $start + 1;
            break;
        }
    }

    if(!$found)
    {
        $result = $start;
        break;
    }
} 
```

顺便说一句，你应该学习如何使用`===`运算符，正确使用是必不可少的`strpos()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:18:53.543

您总是跳出 foreach 语句，因此您只检查目录中的第一个文件。我猜目录中的第一个文件有一个带有数字的名称，否则它将是一个永恒的循环。

```
while($result==null)
{
  foreach($scan as $value)
  {
    if(strpos($value,$start) == false)
    {
      $result = $start;
      break 2; //end the while loop
    }
    else
    {
        $start = $start + 1;
        break; //end the foreach, but result = null so start with a new foreach
    }
  }
} 
```

我猜你想找到不在任何文件中的最小数字。在那种情况下，我会使用

```
$start = 0; //start with zero because I increase it before the check
$result = null;
while($result==null)
{
  $start++;
  $found = false;
  foreach($scan as $value)
  {
    if(strpos($value,$start) !== false) {
      $found = true;
      break; //end the foreach
    }
  }

  if (!$found)
    $result = $start;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:01:38.517

除了 scandir，您还可以使用[RecursiveDirectoryIterator](http://php.net/manual/en/class.recursivedirectoryiterator.php)。您可以跳过 . 和 .. 更容易，您还将获得基本路径、子路径等。虽然这不是您的问题，但它可能会简化您的开发。

# iphone - 将方向更改回纵向

> ID：15550797
> 
> 赞同：2
> 
> 时间：2013-03-21T14:50:01.207
> 
> 标签：iphone, ios, xcode4.6

使用我的应用程序时，用户可以单击并观看列表中显示的视频。一旦他们点击该视频，他们就可以将方向更改为纵向或横向。列表页面仅为纵向。

我面临的错误是当用户观看横向视频并以横向退出页面时，我的列表页面变得一团糟。

每次用户在视频上按下完成并返回列表时，我都需要一种方法将方向转回纵向。

在列表页面上我确实有

```
- (BOOL)shouldAutorotate{
  return YES;
} 
```

我什至尝试`shouldAutorotate`在 viewDidAppear 中调用方法，但这不起作用。我知道`shouldAutorotate`在页面加载后不会调用它，所以有没有办法检查方向然后翻转它或者无论如何都让它成为纵向？

我仍然需要风景，所以我不会从我的 plist 文件中删除它。

任何帮助都会很棒。谢谢

编辑

这是我如何称呼我的视频播放器

```
 MPMoviePlayerViewController *player=[[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[[main_data objectAtIndex:indexPath.row] objectForKey:@"url"]]];

    UIView * playerView = [player view];
    [playerView setFrame: CGRectMake(0, 0, 480, 320)];

    CGAffineTransform landscapeTransform;
    landscapeTransform = CGAffineTransformMakeRotation(90*M_PI/180.0f);
    landscapeTransform = CGAffineTransformTranslate(landscapeTransform, 80, 80);

    [playerView setTransform: landscapeTransform];

    [self presentMoviePlayerViewControllerAnimated:player];

    return; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:03:28.563

在 iOS 6 上，自动旋转行为的机制发生了变化，因此如果您在 iOS 6 设备上进行测试，则需要做一些额外的工作。在您的视图控制器中，添加以下方法：

```
-(NSInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:13:31.453

您有几种方法可供您使用。也许最简单和最可控的就是子类化`MPMoviePlayerViewController`.

首先让您的*应用*支持所有界面方向（在 中`app-info.plist`）。然后使用适用于 iOS 6 和更早版本操作系统的方法限制您的*列表视图*（假设它是）：`MyListViewController.m`

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 return UIInterfaceOrientationMaskPortrait;
}

- (NSUInteger) supportedInterfaceOrientations {
 return(UIInterfaceOrientationMaskPortrait);
}

- (BOOL) shouldAutorotate {
 return FALSE;   
} 
```

现在创建一个派生自 的新的 Objective C 类`MPMoviePlayerViewController`，称为`MyMoviePlayerViewController`. 这是`MyMoviePlayerViewController.h`：

```
#import <MediaPlayer/MediaPlayer.h>

@interface MyMoviePlayerViewController : MPMoviePlayerViewController

@end 
```

这是`MyMoviePlayerViewController.m`：

```
#import "MyMoviePlayerViewController.h"

@interface MyMoviePlayerViewController ()
@end

@implementation MyMoviePlayerViewController

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 return YES;
}

- (NSUInteger) supportedInterfaceOrientations {
 return(UIInterfaceOrientationMaskAll);
}

- (BOOL) shouldAutorotate {
 return TRUE;    
}

-(id)initWithContentURL:(NSURL *)contentURL {
 UIGraphicsBeginImageContext(CGSizeMake(1,1));
 self = [super initWithContentURL:contentURL];
 UIGraphicsEndImageContext();
 if (self) {
    self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [[NSNotificationCenter defaultCenter] removeObserver:self
            name:MPMoviePlayerPlaybackDidFinishNotification
            object:[self moviePlayer]];
        [[NSNotificationCenter defaultCenter] addObserver:self
            selector:@selector(movieFinishedCallback:)
            name:MPMoviePlayerPlaybackDidFinishNotification
            object:[self moviePlayer]];
 }
 return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
[[self moviePlayer] setFullscreen:YES animated:NO];
[self moviePlayer].controlStyle = MPMovieControlStyleDefault;
}

- (void)movieFinishedCallback:(NSNotification*)notification {
    MPMoviePlayerController *moviePlayer = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
        name:MPMoviePlayerPlaybackDidFinishNotification
        object:moviePlayer];
    self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self dismissViewControllerAnimated:YES completion:nil];
}
@end 
```

然后，添加到`MyListViewController.h`：

```
#import "MyMoviePlayerViewController.h" 
```

并且，在 中`MyListViewController.m`，使用：

```
MyMoviePlayerViewController *player =[[MyMoviePlayerViewController alloc]
    initWithContentURL:URLWithString:[[main_data objectAtIndex:indexPath.row]
    objectForKey:@"url"]]];
[self presentViewController:player animated:YES completion:nil]; 
```

显然，您可以调整设置（例如动画样式、要显示的控件...）以满足您的特定需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:27:40.730

`[UIViewController attemptRotationToDeviceOrientation]`当你的视频控制器被隐藏时调用呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:55:27.390

在您的列表视图控制器中实现它

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationPortrait ;
} 
```

-anoop

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T04:06:10.530

试试这个，

在您的 viewdidLoad 方法中写下这一行以支持应用程序中的方向，

```
//rotation
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

#pragma mark -Rotation
//method for rotate your playerview, as user changes orientation
-(void)orientationChanged 
{
    NSLog(@"Orientation Changed..!!");
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.35];
    if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait)  {
        playerView.transform = CGAffineTransformMakeRotation(0);
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortraitUpsideDown) {
        playerView.transform = CGAffineTransformMakeRotation(M_PI);
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationLandscapeLeft)  {
        playerView.transform = CGAffineTransformMakeRotation(M_PI+(M_PI/2));
    }
   else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationLandscapeRight)        {
        playerView.transform = CGAffineTransformMakeRotation(M_PI/2);
    }
    [UIView commitAnimations];
}

#ifdef IOS_OLDER_THAN_6
- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}
#endif

// For Newer than IOS 6.
#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate
{
    return NO;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait);
}
#endif 
```

希望这会有所帮助。，谢谢你..快乐编码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T11:48:08.133

我认为你需要在下面的代码中编写代码`- (void)movieFinishedCallback:(NSNotification*)notification`

```
- (void)movieFinishedCallback:(NSNotification*)notification 
{
    [self.view setFrame: CGRectMake(0, 0, 320, 480)];
    CGAffineTransform landscapeTransform;
    landscapeTransform = CGAffineTransformMakeRotation(270*M_PI/180.0f);
    landscapeTransform = CGAffineTransformTranslate(landscapeTransform, 80, 80);
    [self.view setTransform: landscapeTransform];
} 
```

# xml - 谷歌文档 importXML 问题

> ID：15550799
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:05.157
> 
> 标签：xml, google-sheets, xml-import

我正在尝试将 Tesco Directs 网站上的信息导入 Google Docs 电子表格，但是我尝试的所有操作都失败并显示错误消息“无法评估给定的 xPath 查询”。

我的代码如下所示：

```
=importXml("http://www.tesco.com/direct/keter-e-composter/210-5529.prd";"//li[@class='current-price']") 
```

类似的 importXML 命令适用于所有其他网站而不会出现问题。有什么建议为什么 Tesco 会有所不同？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:17:45.263

1.  您使用了 ; 代替 ，

    `=importXml("[http://www.tesco.com/direct/keter-e-composter/210-5529.prd](http://www.tesco.com/direct/keter-e-composter/210-5529.prd)","//li[@class='current-price']")`

2.  你从上面得到的结果将被分成三个单元格，所以我会更深入地使用 xPath 来获得 //span[@class='pounds']，这样你应该得到 35 没有井号，最后是 0。因此，整个功能将是，

    `=importXml("[http://www.tesco.com/direct/keter-e-composter/210-5529.prd](http://www.tesco.com/direct/keter-e-composter/210-5529.prd)","//li[@class='current-price']//span[@class='pounds']")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T08:21:43.293

您可以在 xpath 前面使用通配符而不是 LI 来执行此操作 - 也是您在访问网站时在上面共享的 url - 没有列出特定项目的价格，因此该类不存在 - 但是这是来自的另一个产品同一个站点 - 使用 xpath 上的示例变体：

```
=importXml("http://www.tesco.com/direct/dyson-dc40-multi-floor-upright-vacuum-cleaner/774-5238.prd","//*[@class='current-price']") 
```

# mysql - 慢 COUNT(*) 查询执行时间超过 1 秒，我怎样才能让它更快？

> ID：15550805
> 
> 赞同：1
> 
> 时间：2013-03-21T14:50:19.433
> 
> 标签：mysql, query-optimization

我有以下查询：

```
SELECT COUNT( * ) 
FROM Table1 AS T1
LEFT JOIN Table2 AS T2
USING ( col1 ) 
WHERE T1.col1 !=  '1'
AND T1.col2
IN (
'A',  'A-B'
)
AND T1.col3 =  'X'
AND T2.col11=  '1'
AND T1.col4 =  'YZ' 
```

此查询需要超过**1 秒**才能执行。如果我用 替换`COUNT(*)`，`SELECT(*)`它也需要**1 秒**以上。但是，如果我`LIMIT 0,30`在最后添加，它会在**0.02 seconds 内**执行。

`WHERE`我对子句中的所有列都有一个索引。我什至有一个综合**指数**。`Table1`

以下是`EXPLAIN EXTENDED`此查询的内容：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  T1  ref PRIMARY,col4,col3,col2,col1,CompositeIndex...   CompositeIndex1 2   const   2010    100 Using where
1   SIMPLE  T2  eq_ref  PRIMARY,CompositeIndex1,incomeLevel PRIMARY 4   T1.col1 1   100 Using where 
```

**为什么**这个查询需要这么长时间，我**怎样**才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:21:10.520

这是您的原始查询

```
SELECT COUNT( * ) 
FROM Table1 AS T1
LEFT JOIN Table2 AS T2
USING ( col1 ) 
WHERE T1.col1 !=  '1'
AND T1.col2
IN (
'A',  'A-B'
)
AND T1.col3 =  'X'
AND T2.col11=  '1'
AND T1.col4 =  'YZ' 
```

你需要做两件事来加快速度

# 重构查询

这是您重构的查询

```
SELECT COUNT(T1.col1) FROM
(SELECT col1 FROM T1 WHERE col3='X' AND
col4='YZ' AND col2 IN ('A','A-B') AND col1<>'1') T1
INNER JOIN (SELECT col1 FROM T2 WHERE T2.col11='1') T2
USING (col1); 
```

# 添加索引以支持子查询

```
ALTER TABLE T1 ADD INDEX col3421_index (col3,col4,col2,col1);
ALTER TABLE T2 ADD INDEX col11_1_index (col11,col1); 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:04:30.103

对于初学者，您正在使用`LEFT join`但需要`T2.col11= '1'`

除此之外，没有足够的信息可以发表评论，只是说我希望你不要真正为你的专栏编号。

# mysql - 每个表使用 2 个值作为别名值连接

> ID：15550810
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:25.567
> 
> 标签：mysql, join

```
SELECT
`wp_posts`.`post_title`
, `wp_posts`.`post_content`
, `wp_posts`.`post_type`
, `wp_posts`.`ID`
, `wp_posts`.`post_date`
, `wp_usermeta`.`user_id` AS `userID`
, `wp_usermeta`.`meta_value` AS `city`
, `wp_usermeta`.`meta_value` AS `state`
, `wp_users`.`fbconnect_userid` AS `fbuid`
FROM    `wp_posts`    
INNER JOIN `wp_emu_shop_reviews`         
    ON (`wp_posts`.`ID` = `wp_emu_shop_reviews`.`postID`)
LEFT JOIN `wp_users`                
    ON (`wp_emu_shop_reviews`.`wpUserID` = `wp_users`.`ID`)
LEFT JOIN `wp_usermeta`              
    ON (`wp_users`.`ID` = `wp_usermeta`.`user_id` AND `wp_usermeta`.`meta_key` ='location_city')
        OR(`wp_users`.`ID` = `wp_usermeta`.`user_id` AND `wp_usermeta`.`meta_key` ='location_state')
WHERE (`wp_posts`.`post_type` = "review"
AND `wp_posts`.`post_status` = "publish"); 
```

不起作用的部分是让城市和州进入结果。当前查询将城市放入 city 和 state 列。Obv，最后一次加入是问题所在。

```
"This is the title" "blahblahblah"  "review"    "2074"  "2012-05-03 00:03:10"   "15"    "Redmond"   "Redmond"   "xxxxxxxx" 
```

我可能需要从 wp_usermeta 表中获取更多值，但我确信如果有人为我解决了这个问题，我可以弄清楚。

啊.. 根据 Juris Malinens 和 Explosion Pills 的建议，我想我得到了这个查询。

```
SELECT
`wp_posts`.`post_title`
/* , `wp_posts`.`post_content` */
, `wp_posts`.`post_type`
, `wp_posts`.`ID`
, `wp_posts`.`post_date`
/* , `wp_usermeta`.`user_id` AS `userID` */
, um1.user_id AS `userID` 
, um1.meta_value AS `city`
, um2.meta_value AS `state`
, `wp_users`.`fbconnect_userid` AS `fbuid`
FROM    `wp_posts`    
INNER JOIN `wp_emu_shop_reviews`         
ON (`wp_posts`.`ID` = `wp_emu_shop_reviews`.`postID`)
LEFT JOIN `wp_users`                
ON (`wp_emu_shop_reviews`.`wpUserID` = `wp_users`.`ID`)
/*  LEFT JOIN `wp_usermeta`              
ON (`wp_users`.`ID` = `wp_usermeta`.`user_id` AND `wp_usermeta`.`meta_key` ='location_city') */
LEFT JOIN wp_usermeta um1 ON (`wp_users`.`ID` = `um1`.`user_id` AND um1.meta_key ='location_city') 
LEFT JOIN wp_usermeta um2 ON(`wp_users`.`ID` = `um2`.`user_id` AND um2.meta_key ='location_state')

WHERE (`wp_posts`.`post_type` = "review"
AND `wp_posts`.`post_status` = "publish"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:55:00.367

查询无法知道您要为特定行加入哪些元值，实际上在当前查询中这是不可能的（即一次只能加入一个）。您需要加入`wp_usermeta`两次：

```
SELECT
    state.user_id AS userID
    state.meta_value AS state,
    city.meta_value AS city,
FROM
    wp_users
    JOIN wp_usermeta state ON (wp_users.ID = state.user_id
       AND state.meta_key = 'location_state')
    JOIN wp_usermeta city ON (wp_users.ID = city.user_id
       AND state.meta_key = 'location_city') 
```

这就是您需要做的事情的要点；只需添加您的其他联接和条件。

# vhdl - 错误：超出非静态循环限制

> ID：15550814
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:30.037
> 
> 标签：vhdl

下面是非恢复平方根算法。它工作正常，但在合成过程中显示错误：“第 46 行：超出非静态循环限制”。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;

ENTITY code IS
    GENERIC(n: NATURAL:= 8);
    PORT(
        Xin: IN STD_LOGIC_VECTOR(2*n-1 DOWNTO 0);
        clk :IN STD_LOGIC ;
        root: OUT STD_LOGIC_VECTOR(n-1 DOWNTO 0) ;
        root2: OUT STD_LOGIC_VECTOR(2*n-1 DOWNTO 0) ;
        intval: IN STD_LOGIC_VECTOR(n-1 DOWNTO 0)  
    );
END code;

architecture Behavioral of code is

    Signal Outp : STD_LOGIC_VECTOR(n-1 DOWNTO 0);
    Signal Const1 : STD_LOGIC_VECTOR(n-1 DOWNTO 0) ;
    Signal Const2 : STD_LOGIC_VECTOR(n-1 DOWNTO 0) ;

--Signal Var : STD_LOGIC_VECTOR(n-1 DOWNTO 0);

begin

    Const1 <= "00000010";
    Const2 <= "00000000";
    --D <= intval;
    --Var <= intval;

    Process (clk) 
        Variable Acc1 : STD_LOGIC_VECTOR(2*n-1 DOWNTO 0);
        Variable Acc2 : STD_LOGIC_VECTOR(n-1 DOWNTO 0);
        Variable D   : STD_LOGIC_VECTOR(n-1 DOWNTO 0);
        Variable Var : STD_LOGIC_VECTOR(n-1 DOWNTO 0);
        Variable Q : STD_LOGIC_VECTOR(2*n-1 DOWNTO 0);
    begin
        Var := "00000000";
        D   := intval;
        Var := intval;

        while (Var > "00000000") loop

            Q := signed(D)*signed(D);
            Acc1 := signed(Xin) - signed(Q);

            if  (Acc1 = "0000000000000000") then
                var:= Const2;

            elsif (Acc1 < "1000000000000000") then
                --root2<=Acc1;
                Acc2 := '0' & var(n-1 downto 1);
                Var := Acc2;
                D := signed(D) + signed(Var);

            elsif (Acc1 > "0111111111111111") then
                --root2<=Acc1; 
                Acc2 := '0' & var(n-1 downto 1);
                Var := Acc2;
                --root <= Var;
                D := signed(D) - signed(Var);

            end if;
        end loop;

        Outp <= D;
    end process;

    root <= Outp;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:18:33.710

除非您正确重新格式化它，否则我不会阅读该代码。所以我只是给你一个大概的问题描述。[编辑：某个好心人确实重新格式化了它]

综合在处理具有非静态边界的循环方面不是很好。当您考虑它时，这应该是显而易见的：对于综合，循环（除非它们包含显式的 WAIT 语句）被展开，直到每次迭代都可以并行执行。这意味着循环边界定义了生成的硬件的大小。

因此，非静态边界意味着在硬件实际运行之前您不知道需要多少硬件！到那时再生成更多的门有点太晚了......

答案是将算法转换为具有静态循环边界的等效算法。在实践中，这通常并不困难：只需转换

```
while (Var > "00000000") loop
   do something;
end loop; 
```

进入

```
constant max_iterations : natural := <some number>;

for i in 1 to max_iterations loop
   -- assuming Var is numeric_std.unsigned, you can simply compare it to 0
   if Var > 0 then      
         do something
   end if;
end loop; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:28:54.820

您的过程对`clk`.

但是，您还需要（对于合成器）说出您想要处理的时钟边缘。

模拟器将在每个时钟沿（上升沿和下降沿）运行您的代码。合成器会一直运行代码，它真的很想看到时钟边沿。

如果您将流程文本包装在

```
if rising_edge(clk) then

end if; 
```

短语，它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:50:33.513

请注意，您正在定义硬件！由于循环在综合中展开，边界必须是静态的。

但是，即使您使用带有静态边界的 for 循环，您也很可能会定义大量资源（例如，当 n=8 时，您将导致 256 个乘数！）在实际系统中可能不可用。尝试调整您的代码以使用一些流水线并优化资源和速度！

对于可综合代码，您不仅应该将时钟放在灵敏度列表中，还应该定义活动时钟沿

```
Process (clk)      
    ...   
begin
    if rising_edge(clk) then
        ... 
```

# c# - 循环通过 IntPtr？

> ID：15550821
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:39.327
> 
> 标签：c#, c++, intptr

这是我的问题：**如何遍历 C# 中 IntPtr 指向的内容？** 我有 C# 代码调用 C++ 代码。C++ 代码返回一个指向图像缓冲区的指针。C# 和 C++ 之间的接口是在 C# 中声明的 IntPtr 变量所以这是我的 C# 代码：

```
private IntPtr _maskData;

public void LoadMask(string maskName)
{            
     _maskData = Marshal.AllocHGlobal(_imgWidth * _imgHeight * 1);
     ReadImage(maskName, ref _maskData);
}

[DllImport(@"D:\Projects\ImageStatistics\ImageStatisticsEllipse\Debug\DiskIO.dll", EntryPoint = "ReadImage")]
        private static extern int ReadImage([MarshalAs(UnmanagedType.LPWStr)]string path, ref IntPtr outputBuffer); 
```

这是我的 C++ 代码：

```
DllExport_ThorDiskIO ReadImage(char *selectedFileName, char* &outputBuffer)
{
    TIFF* image;
    tsize_t stripSize;
    unsigned long imageOffset, result;
    int stripMax, stripCount;
    unsigned long bufferSize;
    wchar_t * path = (wchar_t*)selectedFileName;
    bool status;

    // Open the TIFF image
    if((image = tiffDll->TIFFOpenW(path, "r")) == NULL){
        //      logDll->TLTraceEvent(VERBOSE_EVENT,1,L"Could not open incoming image");

    }

    // Read in the possibly multiple strips
    stripSize = tiffDll->TIFFStripSize(image);
    stripMax = tiffDll->TIFFNumberOfStrips (image);
    imageOffset = 0;

    bufferSize = tiffDll->TIFFNumberOfStrips (image) * stripSize;

    for (stripCount = 0; stripCount < stripMax; stripCount++)
    {
        if((result = tiffDll->TIFFReadEncodedStrip (image, stripCount, outputBuffer + imageOffset, stripSize)) == -1)
        {
            //logDll->TLTraceEvent(VERBOSE_EVENT,1,L"Read error on input strip number");
        }
        imageOffset += result;
    }

    // Close the TIFF image
    tiffDll->TIFFClose(image);

    if(outputBuffer > 0)
    {
        //logDll->TLTraceEvent(VERBOSE_EVENT,1,L"inside output buffer: TRUE");
        status = TRUE;
    }
    else
    {
        //logDll->TLTraceEvent(VERBOSE_EVENT,1,L"inside output buffer: FALSE");
        status = FALSE;
    }   
    return status;  
} 
```

所以现在我认为我可以成功获得 IntPtr，但问题真的是：我该如何使用它？如何遍历图像缓冲区中的每个像素，例如（伪代码）：

```
for (int y = 0; y < imgHeight; y++)
    for (int x = 0; x < imgWidth; x++)
    {
        int pixVal = IntPtr[y * imgWidth + x ];

        // do something to process the pixel value here....

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T13:09:16.220

这是如何循环使用 IntPtr（指向本机内存的指针）指向的图像

```
//assume this actually points to something (not zero!!)
IntPtr pNative = IntPtr.Zero;

//assume these are you image dimensions
int w=640; //width
int h=480; //height
int ch =3; //channels

//image loop
//use unsafe
//this is very fast!! 
unsafe
{
    for (int r = 0; r < h; r++)
    {
        byte* pI = (byte*)pNative.ToPointer() + r*w*ch; //pointer to start of row
        for (int c = 0; c < w; c++)
        {
            pI[c * ch]      = 0; //red
            pI[c * ch+1]    = 0; //green
            pI[c * ch+2]    = 0; //blue

//also equivalent to *(pI + c*ch)  = 0 - i.e. using pointer arythmetic;
        }
    }
} 
```

# c# - 如何在某个任务运行时停止用户键盘输入？

> ID：15550823
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:50:41.043
> 
> 标签：c#, keyboard, console-application

我在为编程练习而创建的控制台中有一个迷宫游戏。我创建了一个动画，并在用户阅读说明后让它运行。虽然不幸的是，我在创建动画的方式中发现了一个缺陷。我使用`Console.setCursorPosition()`和`Console.Write()`。当用户在动画期间按下键盘上的键时，它会在动画中间输入它，因此它会中断它并且不会正确完成动画。

我的问题是如何在此动画期间停止用户输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:55:09.483

你可以使用`Console.KeyAvailable`和的组合`Console.ReadKey(false)`

# copy - 将相同的文件复制到不同的目录

> ID：15550829
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:53.383
> 
> 标签：copy, cmd, rename, copy-paste, pascalscript

是否有程序（或 ReNamer 或 .cmd 的代码）将文件 readme.txt 复制到与 readme.txt 相同的目录中的每个目录？

[重命名器：http: //www.den4b.com/?](http://www.den4b.com/?x=products&product=renamer) x=products&product= renamer （有一个 PascalScript 规则，允许用户编写自己的重命名规则。）

我每天从工作中获得超过 50 个新目录，它们都需要这个文件。我已经手动完成了1000多个，我希望有一个解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:42:55.543

下面是[ReNamer](http://www.den4b.com/?x=products&product=renamer)的 PascalScript 代码，它将在每个处理的文件夹中创建一个*Readme.txt文件。*

该脚本在预览期间执行，因此为了安全起见，每次预览时它都会询问您是否创建*Readme.txt 。*该脚本`ReadmeText`对内容使用常量，但也可以从系统上的文件复制*Readme.txt*文件的内容。*如果Readme.txt*文件尚不存在，它只会创建一个文件。将所有文件夹放入 ReNamer 并使用此脚本。

```
const
  ReadmeName = 'Readme.txt';
  ReadmeText = 'Content of Readme file goes here!';
var
  Initialized: Boolean;
  ReadmePath: WideString;
  DoCreateReadmeFile: Boolean;
begin
  if not Initialized then
  begin
    Initialized := True;
    DoCreateReadmeFile := DialogYesNo('Create Readme file this time?');
  end;
  if WideDirectoryExists(FilePath) then
    ReadmePath := WideIncludeTrailingPathDelimiter(FilePath)
  else
    ReadmePath := WideExtractFilePath(FilePath);
  ReadmePath := ReadmePath + ReadmeName;
  if DoCreateReadmeFile and not WideFileExists(ReadmePath) then
    FileWriteContent(ReadmePath, ReadmeText);
end. 
```

## 编辑

下面的脚本将获取定义的源文件`SourceFilePath`并将其复制到目标文件夹。如果源文件不存在，它也会警告您。

```
const
  TargetFileName = 'Readme.txt';
  SourceFilePath = 'C:\Temp\Readme.txt';
var
  Initialized: Boolean;
  TargetFilePath: WideString;
  DoCreateFiles: Boolean;
begin
  if not Initialized then
  begin
    Initialized := True;
    if WideFileExists(SourceFilePath) then
      DoCreateFiles := WideDialogYesNo('Create "'+TargetFileName+'" files this time?')
    else
      WideShowMessage('Source file does not exist!'+#13#13+SourceFilePath);
  end;
  if WideDirectoryExists(FilePath) then
    TargetFilePath := WideIncludeTrailingPathDelimiter(FilePath)
  else
    TargetFilePath := WideExtractFilePath(FilePath);
  TargetFilePath := TargetFilePath + TargetFileName;
  if DoCreateFiles and not WideFileExists(TargetFilePath) then
    WideCopyFile(SourceFilePath, TargetFilePath, False);
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:21:20.877

```
@echo off
FOR /R %%f in (.) DO xcopy readme.txt %%f 
```

您将 .bat 文件保存在与 readme.txt 相同的位置，并且子目录必须与 readme.txt 位于同一文件夹中：即

```
Desktop
    readme.txt 
    name.bat
    Sub1
    Sub2
    Sub3 
```

ETC....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:16:40.960

在批处理脚本中试试这个：

```
@echo off &setlocal
set "startdir=X:\start\folder"
for /d /r "%startdir%" %%i in (*.*) do copy readme.txt "%%~i"
endlocal 
```

# wpf - wpf实现win explorer新文件夹UI的最佳方式

> ID：15550830
> 
> 赞同：0
> 
> 时间：2013-03-21T14:50:54.583
> 
> 标签：wpf, explorer

我正在尝试实现像 Win7 资源管理器这样的 UI。例如，如果您单击“新建文件夹”按钮，则会在资源管理器 ListView 中添加名称为“New Folder”的新行，并且该名称将保持选中状态，以便您使用新文件夹进行更改。

那么在 WPF 中实现它的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:54:41.050

![在此处输入图像描述](../Images/c0c7a6d7904d40a294afea34a701f809.png)

在您的 xaml 中，在数据模板中，您可能有一个 TextBlock 和 TextBox 重叠，并且在正常视图中，使

```
TextBox.Visibility=Visibility.Collapsed;
TextBlock.Visibility=Visibility.Visible; 
```

如果您希望对文件名进行内联编辑，请切换此选项。

```
TextBox.Visibility=Visibility.Visible;
TextBlock.Visibility=Visibility.Collapsed; 
```

XAML：

```
<TextBlock Text="{Binding Name}"
           Margin="5,0,5,0" VerticalAlignment="Center" 
           Visibility="{Binding CaptionEditBoxVisibility, 
           Converter= {StaticResource InvertVisibility}, Mode=TwoWay}" />
<TextBox x:Name="FolderNodeEdit"
           Text="{Binding Caption, Mode=OneWay}"
           Visibility="{Binding CaptionEditBoxVisibility, Mode=TwoWay}"/> 
```

InvertVisibility 转换器用于从可见转换为折叠，反之亦然。

# django - django model __init__ 额外的 kwarg 和处理如果 kwarg 是错误的类型

> ID：15550835
> 
> 赞同：0
> 
> 时间：2013-03-21T14:51:03.617
> 
> 标签：django, django-models

每[添加一个 **kwarg 到一个类](https://stackoverflow.com/questions/987237/adding-a-kwarg-to-a-class) ，我在将 cn__domainname 转换为 cn 的正确轨道上。我是否在正确的轨道上'cn'是一个整数或一个字符串，首先将其转换为域名实例，或者我应该在验证器中执行此操作？

```
class DomainName(models.Model):
    domainname = models.CharField(max_length=256, unique=True,
            validators=[DomainNameValidator])
    def __unicode__(self):
        return u'%s: domainname=%s' % ( self._meta.object_name, 
                self.domainname.__repr__())

class Machine(models.Model):
    cn = models.OneToOneField(DomainName, primary_key=True)
    #...
    ips = models.ManyToManyField(IP)
    def __unicode__(self):
        return u'%s: cn=%s' % (self._meta.object_name, self.cn.domainname)
    def __init__(self, *args, **kwargs):
        cn__domainname=kwargs.pop('cn__domainname',None)
        cn=kwargs.pop('cn',cn__domainname)
        if cn:
            if isinstance(cn,DomainName):
                kwargs['cn']=cn
            elif isinstance(cn,int):
                kwargs['cn']=DomainName.objects.get(id=cn)
            elif isinstance(cn,(str,unicode)):
                kwargs['cn']=DomainName.objects.get_or_create(domainname=cn)[0]
        super(Machine,self).__init__(*args, **kwargs) 
```

目标是能够做到

```
m,created=Machine.objects.get_or_create(cn__domainname='foo') 
```

代替

```
m,created=Machine.objects.get_or_create(
    cn__domainname='foo',
    defaults=dict(cn=DomainName.objects.get_or_create(domainname='foo')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:44:29.430

我认为在您的机器模型中，`__init__`我将使用以下方法进行检查：

```
 if getattr(self.cn, 'domainname'): 
```

总之，看起来很乱。

使用信号呢？[https://docs.djangoproject.com/en/dev/topics/signals](https://docs.djangoproject.com/en/dev/topics/signals)

创建机器记录时触发域记录的创建。此外，检查域的整数或字符串是否应该在域上。

要回答您的问题，我认为您不在*djangoist*路径中。

# razor - 在 HTML 中将 enum 转换为 int

> ID：15550839
> 
> 赞同：7
> 
> 时间：2013-03-21T14:51:15.917
> 
> 标签：razor

我有以下行

```
<div class="row" data-hns-target="salesChannel" data-hns-condition="^@Model.SeenSalesChannel$"> 
```

`Model.SeenSalesChannel`是一个枚举。我想将其转换为相应的 int 值，但是

```
<div class="row" data-hns-target="salesChannel" data-hns-condition="^@(int)Model.SeenSalesChannel$"> 
```

无效。我还能做什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T14:58:56.757

把整个东西包起来`()`

```
<div class="row" data-hns-target="salesChannel" data-hns-condition="^@((int)Model.SeenSalesChannel)$"> 
```

# javascript - 由于奇怪的类型接口，未解决的推送方法

> ID：15550859
> 
> 赞同：0
> 
> 时间：2013-03-21T14:52:14.170
> 
> 标签：javascript, json, typescript, geojson

我创建了一个这样的模块：

```
module GeoJSON {    
    export interface position {
        (): number[];
    }

    export interface coordinateArray {
        () : position[];
    }

    export interface polygonRings {
        (): position[][];
    }

    export class GeometryType {
        public static Point: string = "Point";
        public static LineString: string = "LineString";
        public static Polygon: string = "Polygon";
        public static MultiPoint: string = "MultiPoint";
        public static MultiLineString: string = "MultiLineString";
        public static MultiPolygon: string = "MultiPolygon";
        public static MultiGeometry: string = "MultiGeometry";
    }

    export interface Geometry {
        type?: string;
    }

    export interface Point extends Geometry {
        coordinates: position;
    }

    export interface LineString extends Geometry {
        coordinates: coordinateArray;
    }

    export interface Polygon extends Geometry {
        coordinates: polygonRings;
    }

    export interface MultiPolygon extends Geometry {
        coordinates: polygonRings[];
    }

    export interface MultiPoint extends Geometry {
        coordinates: coordinateArray;
    }

    export interface MultiLineString extends Geometry {
        coordinates: polygonRings;
    }

    export interface GeometryCollection extends Geometry {
        geometries: Geometry[];
    }
} 
```

当我使用它时，我得到一个愚蠢的错误。这`push`是一个没有解决的方法...

```
var lineString: GeoJSON.LineString = <GeoJSON.LineString> this._myGeometry;
lineString.coordinates.push(position); 
```

我试图将坐标投射到`GeoJSON.position[]`. 代码编译，但`JavaScript`抛出错误:(

```
(<GeoJSON.position[]> lineString.coordinates).push(position); 
```

如何`push`在这里显示？我无法更改`coordinates`from `coordinateArray`to的类型`position[]`，因为稍后`JSON.stringify`将返回不同的 JSON 数据并且服务器不会响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:48:16.577

泛型仍然是 TypeScript 的[开放工作项](https://typescript.codeplex.com/workitem/185)。因此，虽然您可以拥有`position`,`coordinateArray`并`polygonRings`扩展 Array 以知道 push 方法存在，但类型仍然永远不会匹配。lib.d.ts 中的数组使用了一个 hacky _element，它由编译器专门处理，直到实现泛型。

您可以将 Array 的定义复制到`position`并用数字替换 _element 的所有实例，但这感觉真的很难看。我要么`position`用 number[] 替换所有实例，要么给出位置 x 和 y（和 z）成员。

您的运行时问题几乎可以肯定是您从未`LineString`正确构建，因此`lineString.coordinates`未定义。而不是强制转换为`LineString`使接口成为类并在构造函数中设置所有成员。IE：

```
export interface position {
    x: number;
    y: number;
}

export class LineString implements Geometry {
    coordinates: position[];
    constructor() {
        this.coordinates = [];
    }
}

var lineString: GeoJSON.LineString = new GeoJSON.LineString();
lineString.coordinates.push({ x: 0, y: 0 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:52:11.250

要清楚，当你写这个时：

```
export interface coordinateArray {
    () : position[];
} 
```

您所描述的是具有*呼叫签名*的类型。意思是“`()`你可以用零参数打电话给我”，而不是“这就是我”。编译器希望您`coordinateArray`像这样使用：

```
var x: coordinateArray = /* something */;
var y = x(); // y: position[] 
```

# regex - 小写字母或句点后跟大写字母的正则表达式

> ID：15550860
> 
> 赞同：2
> 
> 时间：2013-03-21T14:52:15.123
> 
> 标签：regex

最初我只是想找到一个小写字母后跟一个大写字母，在这种情况下`[a-z][A-Z]`效果很好。

但是，在某些情况下，小写字母会替换为句点。我对正则表达式相当陌生，并且无法找到在正则表达式中明确实现这一点的方法（我当前的解决方案贯穿了一些`if`语句并且感觉非常不雅。

这是正则表达式可以很好地处理的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:53:09.283

```
[a-z.][A-Z] 
```

阅读有关[字符类](http://www.regular-expressions.info/charclass.html)的信息。**指定字符中的一个**字符与之匹配。

* * *

另外：如果您使用`.`外部字符类，则需要将其转义，因为它是正则表达式元字符。

# core-data - NSSortDescriptor 按核心数据对多关系中的项目数排序

> ID：15550861
> 
> 赞同：8
> 
> 时间：2013-03-21T14:52:17.587
> 
> 标签：core-data, ios6, nsfetchedresultscontroller, key-value-observing, nssortdescriptor

在使用 Core Data 的多对关系时，这是一个长期存在的问题，很难根据与实体的一对多关系的数量对实体上`NSSortDescriptor`的获取请求进行排序。这在与 a 结合使用时特别有用。通常将排序描述符初始化为：`Parent``children``Child``NSFetchedResultsController`

```
NSSortDescriptor *sortByNumberOfChildren = [[NSSortDescriptor alloc] initWithKey:@"children.@count" ascending:NO]; 
```

导致异常`'Keypath containing KVC aggregate where there shouldn't be one; failed to handle children.@count`

在**iOS 6.1**上，我通过将 KVO 访问器`-countOf<Key>`作为属性添加到我的托管对象模型作为整数类型发现了一个修复。我没有在我的`NSManagedObject`子类中为这个属性实现任何东西，因为所有的魔法似乎都发生在幕后。（见[https://stackoverflow.com/a/15546371/2042527](https://stackoverflow.com/a/15546371/2042527)）。

**但是，这在iOS 6.0**上不起作用。在这里，我发现将以下方法添加到您的`NSManagedObject`子类可以解决问题：

```
- (NSUInteger)countOfChildren{
      return [self.children count];
  } 
```

添加两者并**不能解决**两个 SDK 中的问题。相反，它破坏了修复。

有没有人知道为什么会发生这种情况以及为什么两者之间存在差异，尽管没有提到 iOS 6.0 和 iOS 6.1 之间对 Core Data 或 Foundation 的更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-20T16:29:08.607

我认为通过说“包含不应该有的 KVC 聚合的 Keypath；未能处理 children.@count”Core Data 想告诉您它不支持这种排序描述符。这很可能是因为当支持 SQLite 存储收到您的 fetch 请求时，它必须生成执行 fetch 请求所描述的 SQL。“children.@count”的情况实际上比人们想象的要复杂得多。

覆盖 -countOfChildren 的“修复”并不是真正的修复。让我们假设这解决了问题，然后 -countOfChilden 将在每个父级上调用。当您第一次访问 self.children 时，Core Data 需要执行一个 SQL 查询来确定（至少）孩子的主键，创建 NSManagedObjectIDs、NSManagedObjects 并返回结果。如果这有效，那么您会看到非常糟糕的性能。

您的问题有几种解决方案。

**1.将子计数存储在持久属性中**

只需向父实体添加一个属性（名称：cachedCountOfChildren，类型：64 位整数）。在您的控制器层（不在您的模型层）中，每次将子项分配给父项时，将 cachedCountOfChildren 递增 1，并在每次从父项中删除子项时递减 cachedCountOfChildren。然后在排序描述符键中使用 cachedCountOfChildren。这会有很好的表现。

**2.使用字典结果**

将 NSFetchRequest 的 resultType 设置为 NSDictionaryResultType。这将导致 -executeFetchRequest:error: 返回 NSDictionaries 而不是 NSManagedObjects。带有 NSDictionaryResultType 的 NSFetchRequest 可以做不同的事情。例如，您可以使用 setPropertiesToGroupBy 和 NSExpression (...)。请查看 WWDC 会议“Using iCloud with Core Data (2012)”（从幻灯片 122 开始）以供参考。基本上，它们向您展示了如何构造一个请求，该请求将返回一个包含具有此结构的字典的数组：

```
(
 {
  countOfChildren = 1;
  parentName = "hello";
 },
 {
  countOfChildren = 134;
  parentName = "dsdsd";
 },
 {
  countOfChildren = 2;
  parentName = "sdd";
 }
) 
```

如您所见，您将得到未排序的结果。但是通过 countOfChildren 对这个数组进行排序可以非常有效地在内存中完成。在这种情况下，Core Data 生成的 SQL 也将非常有效，您将能够准确指定字典应包含哪些属性。所以结果也应该是非常有效的内存。此解决方案的优点是您不必跟踪 countOfChildren。

您必须根据自己的情况决定哪种解决方案最适合自己。

# javascript - 我如何将 2 个 jquery 组合成 1 个

> ID：15550866
> 
> 赞同：0
> 
> 时间：2013-03-21T14:52:29.687
> 
> 标签：javascript, jquery, html

试图理解这个 jquery，我发现了 2 个我想使用的脚本，但我可以将它们组合成 1 个吗？目前我将它们都放在单独的脚本标签下。

这是第一个脚本

```
$(function(){
        $('#navigation_horiz').delay(100).fadeIn(100);
        $('#navigation_horiz').naviDropDown({
        dropDownWidth: 'auto',  //the default width of drop down elements
        slideDownDuration: 600, //easing duration for slideDown
        slideUpDuration: 300 //easing duration for slideUp    
        });
}); 
```

这是第二个脚本

```
if (franchise_id==undefined) { //hide commish nav is not signed into site
     var franchise_id;
     document.write("<style type='text/css'>");
     document.write("#navigation_horiz ul li.commish { display: none; }");
     document.write("</style>");
} 
else if (franchise_id=="0000") { } //show commish nav is logged in as commish
else { // hide both if logged in as any other franchise
     document.write("<style type='text/css'>");
     document.write("#navigation_horiz ul li.commish { display: none; }");
     document.write("</style>");
} 
```

试图放入相同的...下面的示例，但根本不起作用

```
 $(function(){
        $('#navigation_horiz').delay(100).fadeIn(100);
        $('#navigation_horiz').naviDropDown({
        dropDownWidth: 'auto',  //the default width of drop down elements
        slideDownDuration: 600, //easing duration for slideDown
        slideUpDuration: 300 //easing duration for slideUp    
        });
});
if (franchise_id==undefined) { //hide commish nav is not signed into site
     var franchise_id;
     document.write("<style type='text/css'>");
     document.write("#navigation_horiz ul li.commish { display: none; }");
     document.write("</style>");
} 
else if (franchise_id=="0000") { } //show commish nav is logged in as commish
else { // hide both if logged in as any other franchise
     document.write("<style type='text/css'>");
     document.write("#navigation_horiz ul li.commish { display: none; }");
     document.write("</style>");
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:00:32.543

是的你可以。第一部分是 jQuery，第二部分是原始 Javascript，都在顶级命名空间下。

唯一需要注意的是：jQuery 代码依赖于 jQuery 库和一个独立的插件（naviDropDown？）。所以你必须把组合代码放在**jQuery**和插件之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:54:35.090

您可以将它们放入单个标签中，但最好将它们排除在单独的 .js 文件中并在文档末尾加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:27:21.603

一个函数只能在执行完毕后才能执行。

如果您在第一次加载网站时加载第二个脚本，如果您不打算在加载时调用函数，请不要将第二个脚本放入函数中。

只有当且仅当它们服务于相同的事件时，您才应该将脚本组合到相同的函数中。

# git - 塔（GIT）自定义脚本？

> ID：15550871
> 
> 赞同：1
> 
> 时间：2013-03-21T14:52:44.827
> 
> 标签：git, terminal, git-tower

我是新来的塔。如果 repo 中名为 index.html 的文件包含字符串“1234”，我想要做的是防止将 repo 推送到我们的远程。

有什么建议吗？

而且，如果 Tower 不允许这样做，可以直接从终端使用 git 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:14:48.890

它似乎与 Tower 无关，但更多地与远程仓库本身相关：
您可以（在该远程仓库）设置一个[更新挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)，它将检查每个提交，并确保内容不是错误的.
请参阅“[防止推送到某些文件中包含选项卡的 git（例如，、、`*.cpp`）`*.h`”`CMakeLists.txt`中](https://stackoverflow.com/a/4145628/6309)的示例。

像“预推送钩子”这样的客户端钩子 wdel> 不*存在*，因此最好在远程端共同控制该控制，以便对推送到所述远程存储库的任何下游存储库强制执行该控制。

[自 git1.8.2](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt) 5March 8th, 2013 以来，pre-push 钩子实际上存在，但这需要将其部署到每个下游存储库，与在*一个*地方（上游存储库）执行相同的策略相比，这不是最佳的。
话虽如此，如果您正在使用一个下游存储库（即您自己的本地存储库），那么预推送挂钩肯定会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:22:59.337

所以我找到了一个适合我的解决方案。

就 pre-push hook 而言，它确实存在。（这只是为了回答 VonC 留下的评论）。

从 git 1.8.2 开始，可以运行 pre-push 挂钩。因此，当我尝试推送时，我正在做的是从 pre-push 挂钩中退出一个非零值，并且我在 pre-push 挂钩中指定的某个文件包含某个字符串。

所以我想这就是我需要做的。我可以看到在服务器端这样做会更好，但在这种情况下，我需要它以这种方式工作。

因此，使用 git 1.8.2 可以通过使用 pre-push 挂钩轻松完成。

# c++ - 视觉c ++ RECT碰撞

> ID：15550879
> 
> 赞同：1
> 
> 时间：2013-03-21T14:53:16.203
> 
> 标签：c++, visual-studio-2010, collision-detection

几天前，我刚刚开始使用 Win32 GUI 编程。我正在尝试制作一个简单的游戏，我需要在其中检测 2 个对象之间的碰撞。所以我用struct制作了我的*角色*`RECT`

为了检测它们是否发生碰撞，我使用了：

```
// Returns 1 if the point (x, y) lies within the rectangle, 0 otherwise
int is_point_in_rectangle(RECT r, int x, int y) {
    if ((r.left   <= x && r.right >= x) &&
        (r.bottom <= y && r.top   >= y))
        return 1;
    return 0;
}

// Returns 1 if the rectangles overlap, 0 otherwise
int do_rectangles_intersect(RECT a, RECT b) {
    if ( is_point_in_rectangle(a, b.left , b.top   ) ||
         is_point_in_rectangle(a, b.right, b.top   ) ||
         is_point_in_rectangle(a, b.left , b.bottom) ||
         is_point_in_rectangle(a, b.right, b.bottom))
        return 1;
    if ( is_point_in_rectangle(b, a.left , a.top   ) ||
         is_point_in_rectangle(b, a.right, a.top   ) ||
         is_point_in_rectangle(b, a.left , a.bottom) ||
         is_point_in_rectangle(b, a.right, a.bottom))
        return 1;
    return 0;
} 
```

我在这里发现了一个问题，它似乎适用于[这种](http://puu.sh/2loUa)情况。[但是这里](http://puu.sh/2loVS)的这种情况有一个小问题

有没有办法解决这个问题？我做错了吗？我应该尝试不同的方法吗？任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:56:20.153

看看 API 函数：

*   [PtInRect 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162882%28v=vs.85%29.aspx)
*   [IntersectRect 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145001%28v=vs.85%29.aspx)- “如果矩形相交，则返回值非零。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:04:55.840

清楚地检查一个矩形的角是否在另一个矩形内是一个坏主意：

![相交的矩形](../Images/0250949156346b35c29d122e32f2ec2c.png)

一种简单的检查方法是：

```
if (a.left >= b.right || a.right <= b.left ||
    a.top >= b.bottom || a.bottom <= b.top) {

   // No intersection

} else {

   // Intersection

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:57:47.283

此解决方案无效。您可能有两个矩形相交，而其中任何一个的任何顶点都不位于另一个矩形中。例如`((0,0), (10,10))`和`((5,-5), (7, 15))`。尝试检查其中一个矩形的**一侧**是否与另一个矩形相交。

# wordpress - 如何在 Wordpress WPMU 中集成/组合 Membership 插件与 BuddyPress 插件

> ID：15550883
> 
> 赞同：1
> 
> 时间：2013-03-21T14:53:40.573
> 
> 标签：wordpress, membership, buddypress, wpmu

我想让会员/订阅插件与用户个人资料类型相关联。

该网站有**会员/订阅*** *（wpmedev 插件）* *。共有三种会员资格（父母、护理提供者和企业），每种会员资格有 1 年、6 个月和每月三种选择。每种会员类型：（父母、护理提供者和企业）都有不同的价格。

为相应的会员类型（父母、护理提供者和企业）设置了三种配置文件类型。每个配置文件类型都有用户在配置文件创建过程中填写的不同字段。我正在使用**BuddyPress**用户帐户类型 PRO 来帮助完成此过程。插件网站：[http ://wpbpshop.com/buddypress-user-account-type-pro](http://wpbpshop.com/buddypress-user-account-type-pro)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:10:21.680

即使我建议你使用这个 buddy press ..
我使用了这个 buddy press 插件，它对我来说很好用..
我也有我的项目的角色..
我为这个 buddypress 插件实现了支付网关方式..

# javascript - 交叉过滤平均组

> ID：15550884
> 
> 赞同：9
> 
> 时间：2013-03-21T14:53:49.077
> 
> 标签：javascript, d3.js, crossfilter, dc.js

我试图通过总和（查询时间）计算平均查询时间，然后将它们除以计数。我怎样才能得到计数？

```
var querytimeByMonthGroup = moveMonths.group().reduceSum(function (d) {
    return d.querytime;
});

var querytimeByMonthGroup = moveMonths.group().reduceSum(function (d) {
    return d.querytime / d.count; ???
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-19T11:09:45.410

我认为更好的（也是预期的）方法是定义自己的 reduce 函数（添加、删除、初始）。然后，您可以将运行总和、计数等存储在 reduce 函数中，并在过滤器从组中添加和删除数据时适当地调整它们。

在这个类似的问题中给出了使用平均值和最小值和最大值执行此操作的示例：[使用交叉过滤器，是否可以在分组时跟踪最大值/最小值？](https://stackoverflow.com/questions/10509478/using-crossfilter-is-it-possible-to-track-max-min-when-grouping)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:35:37.207

我不熟悉交叉过滤器，只是刚刚开始使用它。可能有更好的方法，但这提供了一种计算用于分组的维度计数的方法（我不是 100% 清楚 d.count 是指用于分组的维度的计数，使用如果需要，另一个分组）。

示例源自以下代码：[https ://github.com/square/crossfilter/wiki/API-Reference](https://github.com/square/crossfilter/wiki/API-Reference)

```
var payments = crossfilter([
    {date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
    {date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab"},
    {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
    {date: "2011-11-14T16:30:43Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T16:53:41Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0, type: "cash"},
    {date: "2011-11-14T16:58:03Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T17:22:59Z", quantity: 2, total: 90, tip: 0, type: "tab"},
    {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0, type: "cash"},
    {date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"}
]);

var paymentsByType = payments.dimension(function(d) { return d.type; }),
        paymentVolumeByType = paymentsByType.group(),
        counts = paymentVolumeByType.reduceCount().all(),
        countByType = {}; 

// what is returned by all is a pseudo-array. An object that behaves like an array. 
// Trick to make it a proper array
Array.prototype.slice.call(counts).forEach(function(d) { countByType[d.key] = d.value; })
var paymentVolumeByType = paymentVolumeByType.reduceSum(function(d, i) { 
    console.log(d.total, d.type, countByType[d.type])
    return d.total / countByType[d.type]; 
});
// accessing parentVolumeByType to cause the reduceSum function to be called
var topTypes = paymentVolumeByType.top(1); 
```

# android - 如何使用纸莎草从 android 项目生成类图

> ID：15550889
> 
> 赞同：3
> 
> 时间：2013-03-21T14:53:54.930
> 
> 标签：android, eclipse, papyrus

我在 Eclipse 上安装了纸莎草纸，以生成我正在处理的 android 应用程序的类图，但我找不到如何生成它。我在网上搜索，我只找到了如何从头开始创建一个新项目，而不是我正在寻找的东西。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T08:04:42.843

我不认为 Papyrus 单独会对 Java 代码进行逆向工程：它更面向从 UML 模型生成 Java 代码。
您有[一些用于 reverse 的插件](http://www.eclipse.org/forums/index.php/t/149226/)，但不一定需要维护。

但是，从[这篇文章](http://www.eclipse.org/forums/index.php/m/1015475/)*中，除了*Modisco 之外，使用**[payrus](http://help.eclipse.org/indigo/index.jsp?nav=/38)**可能更接近您正在寻找的东西。请参阅[Modisco wiki](http://wiki.eclipse.org/MoDisco)和此[分步线程](http://www.eclipse.org/forums/index.php/m/841461/)。

* * *

[OP user2137817](https://stackoverflow.com/users/2137817/user2137817) 提供[了](https://stackoverflow.com/questions/15550889/how-to-generate-a-class-diagram-from-android-project-using-papyrus/15565488?noredirect=1#comment22078524_15565488)另一种选择：[**objectaid**](http://www.objectaid.com/)：

> ObjectAid UML Explorer 是一个用于 Eclipse IDE 的敏捷且轻量级的代码可视化工具。它在实时 UML 类和序列图中显示您的 Java 源代码和库，这些图表会随着您的代码更改而自动更新。
> 下图是实际源代码的类图：

![对象辅助](../Images/b842e6f803517106a401ec025264de47.png)

# html - 仅适用于 Internet Explorer 10 的条件 CSS

> ID：15550890
> 
> 赞同：4
> 
> 时间：2013-03-21T14:54:02.357
> 
> 标签：html, css, conditional, internet-explorer-10

Internet Explorer 10 破坏了我的 jQuery 菜单。我可以通过按照下面的示例对我们的 CSS 进行小修改来解决这个问题。

```
/* For Internet Explorer 10 ------*/
margin-top: 1px;

/* For all other browsers ------*/
margin-top: 2px; 
```

有没有办法在我的 CSS 包括条件下应用这些情况？

我知道浏览器嗅探并不理想，但这似乎工作正常：

```
if ($.browser.msie  && parseInt($.browser.version, 10) === 10) {
    $(".jMenu li ul").css("margin", "1px");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:08:46.050

鉴于您的菜单已经依赖 JavaScript，您可以`<body>`基于 userAgent 字符串向 using JavaScript 代码添加一个类：

### JavaScript

```
if (navigator.userAgent.indexOf("MSIE 10") > -1) {
    document.body.classList.add("ie10");
} 
```

..然后在您的 CSS 中定位 Internet Explorer 10

### CSS

```
/*IE 10 only */
.ie10 .myClass {
    margin-top: 1px;
} 
```

# java - java中的Sqlite连接字符串选项

> ID：15550891
> 
> 赞同：1
> 
> 时间：2013-03-21T14:54:04.013
> 
> 标签：java, sqlite

net 开发人员，对 Java 很陌生。在 .net 中，我们将以下选项添加到连接字符串，以便每次执行数据库操作时都不会创建日志。

```
default isolation level=RepeatableRead;synchronous=Full;pooling=True;journal mode=Persist; 
```

如何在java中做到这一点。我试过属性

```
Class.forName("org.sqlite.JDBC");

Properties prop = new java.util.Properties();
prop.put("default isolation level", "RepeatableRead");
prop.put("synchronous","Full");
prop.put("pooling","True");
prop.put("journal mode","Persist"); 
```

并与`DriverManager.getConnection("jdbc:sqlite:" + ClientDBPath, prop);`

但它似乎确实有效。我的问题是我们有 java udp 客户端，当它从服务器接收数据时，它将不断插入/更新数据库。在此过程中，当 UI flex 应用程序尝试访问时，它无法执行查询。所以我们创建了一个示例应用程序（一个用于读取，另一个用于写入）并使用上述连接字符串选项签入 .net。它工作正常。所以在java中尝试同样的方法。

还请建议其他选项来解决此插入/阅读问题。对不起，如果我已经解释了很多。

# powershell - powershell函数获取多台服务器的CPU和内存使用情况

> ID：15550892
> 
> 赞同：0
> 
> 时间：2013-03-21T14:54:03.620
> 
> 标签：powershell

这是我的功能

```
{
$input|Foreach-Object{Get-WmiObject -computername $_ win32_processor | Measure-Object -property LoadPercentage -Average | Select SystemName, Average}
} 
```

我知道我不能将 SystemName 放在最后一个管道上。如何在包含系统名称的结果中添加另一列。我还有一个单独的内存使用代码，我想结合这两个代码（cpu 和内存使用）。

```
 {   
$input|Foreach-Object{Get-WmiObject -computername $_ -Query "SELECT FreePhysicalMemory,TotalVisibleMemorySize FROM Win32_OperatingSystem" | Select FreePhysicalMemory,TotalVisibleMemorySize
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:55:53.477

如果您正在编写脚本，则不必在一个命令中完成所有操作。[最佳实践#12](http://windowsitpro.com/blog/what-do-not-do-powershell-part-12)

> 从 PowerShell cmdlet 或函数输出信息的正确方法是创建一个包含数据的对象，然后使用 Write-Output 将该对象写入管道。

```
$pcs | % {New-Object -Typename psobject -Property @{'System'=$_;'Average'=((Get-WMIObject -ComputerName $_ -Class win32_processor | Measure-Object -property LoadPercentage -Average).Average);}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:06:36.217

像这样的东西？

```
$input|
Foreach-Object {
 Get-WmiObject -computername $_ -Query "SELECT __Server,FreePhysicalMemory,TotalVisibleMemorySize FROM Win32_OperatingSystem" |
  Select @{l='SystemName';e={$_.__Server}},FreePhysicalMemory,TotalVisibleMemorySize
} 
```

# asp.net-mvc-3 - 当前上下文中不存在名称“ViewBag”

> ID：15550899
> 
> 赞同：41
> 
> 时间：2013-03-21T14:54:19.410
> 
> 标签：asp.net-mvc-3, razor, windows-server-2003

我有一个 Windows 2003 R2 服务器。我必须运行一个 .NET MVC3 网站。我已经安装了所有的运行时（1,2 和 4），我已经安装了所有的 MVC 框架（3 和 4），但是这个错误并没有消失。

我有应该在视图中的 web.config。我在stackoverflow内外都遵循了这个问题的所有和每一个解决方案。我还通过使用添加可部署依赖项（右键单击 mvc 项目）在我的 bin 文件夹中部署了所有 dll。

在这一点上，我不知道还能做什么。在线没有想法或解决方案。

我已经卸载并重新安装了所有运行时、框架等。在我的本地计算机上它运行得很好（Windows 7）但是当我部署时，我得到了以下错误。

> 编译器错误消息：CS0103：当前上下文中不存在名称“ViewBag”
> 
> 源错误：
> 
> 第 1 行：@{
> 
> 第 2 行：ViewBag.Title = "主页";
> 
> 第 3 行：}
> 
> 第 4 行：<h2>@ViewBag.Message</h2>
> 
> 源文件：d:\FamilyDermMVC\Views\Home\Index.cshtml 行：2

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-21T16:45:03.987

听起来您在`Web.Config` **视图文件夹中**缺少以下内容：

/视图/Web.Config

```
<?xml version="1.0"?>

<configuration>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

      <pages pageBaseType="System.Web.Mvc.WebViewPage"> // <-- this line and contents are important
        <namespaces>
          <add namespace="System.Web.Mvc" />
          <add namespace="System.Web.Mvc.Ajax" />
          <add namespace="System.Web.Mvc.Html" />
          <add namespace="System.Web.Routing" />
        </namespaces>
      </pages>

  </system.web.webPages.razor> 
```

视图通常派生`System.Web.Mvc.WebViewPage`自在 web.config 中配置的视图。如果您不随应用程序部署 DLL，则基类在以下 DLL 中安装：

> 汇编 System.Web.Mvc.dll，v4.0.30319
> 
> c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll

**更新 1**

如果您手动从 MVC X 升级到 MVC Y，这需要更改您的目标 .Net Framework（比如 4.5 到 4.6），如果您有旧引用（指向 MVC 5 而不是 6）显然旧文件不能用于结合较新的文件（例如，MVC 5 DLL 不能用于 4.6 中的 System.Web）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-03T23:09:54.630

我看到这是不久前发布的，但我想无论如何我都会在这个问题上添加我的经验。

在创建一个新的 MVC asp.net 项目时，我马上就遇到了同样的错误。我只需单击 BUILD -> Clean Solution，然后单击 Build Solution，它就为我解决了问题。仍然不太清楚为什么错误首先出现，因为它在第一次生成后立即出错。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-30T01:14:09.683

我遇到了相同类型的问题（无法识别 html 帮助程序代码）。

我不确定它是如何开始的，但我通过替换以下内容解决了它：

```
<appSettings>
    <add key="webpages:Enabled" value="false" />
</appSettings> 
```

和

```
<appSettings>
    <add key="webpages:Version" value="3.0.0.0" />
</appSettings> 
```

在视图 web.config 文件中。

[在这里](https://www.devexpress.com/Support/Center/Question/Details/KA18612)找到我的解决方案

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-14T16:16:31.987

有时关闭视图、重建、打开视图会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-12T10:29:53.730

无论是否在 web.config 文件中完成了所有正确的配置，我都遇到了这个问题。

发现***组件缓存中有一些坏文件，导致 Razor 视图无法识别 ViewBag、Model 和 HtmlHelpers。删除这些文件解决了这个问题***（这些文件的好版本是在我下次打开 Visual Studio 时创建的）。

**请按照以下路径查找文件：**

```
C:\Users\your.name.here\AppData\Local\Microsoft\VisualStudio\14.0\ComponentModelCache 
```

**删除所有四个文件：**

> *   Microsoft.VisualStudio.Default.cache
> *   Microsoft.VisualStudio.Default.catalogs
> *   Microsoft.VisualStudio.Default.err
> *   Microsoft.VisualStudio.Default.external

我关闭了我的项目，删除了该路径上的文件并重新打开了我的项目，清理了解决方案并再次构建它，问题就解决了

删除临时 ASP.NET 文件也有帮助。C:\Users\your.name.here\AppData\Local\Temp\Temporary ASP.NET 文件。

通过这种方式，您可以修复视图中与智能相关的所有错误（Razor MVC）试试这个，让我知道这对我有用。

谢谢！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T21:34:44.117

行。我修好了它。我不知道到底是什么修复了它，但我猜这整个“9 英里”修复了它。

我删除了（删除程序）所有 MVC 扩展、工具和你在那里找到的任何东西。

然后重新安装，不删除，.net 运行时。2 和 4。

然后安装了 mvc3 和 mvc4 回来。我去 asp.net 获取最新版本。

然后我在我的笔记本电脑上做了同样的事情。

注意：您需要 Power Shell 2.0 才能在 Windows2003 服务器中安装 MVC4。您需要找到该服务器的特定下载。

一旦我这样做了，回收应用程序池并重新启动服务器。

砰...页面已加载。

我希望这对将来的其他人有所帮助。

谢谢你的回答。

PS：我的感觉是我的笔记本电脑和服务器中分别没有相同版本（或发行版）的 mvc3（或 mvc4）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-12T16:11:33.847

似乎有很多解决方案，每个解决方案的成功率参差不齐。

**对我来说，更改Views/web.config**文件这一行的版本号是有效的：

```
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

我将**4.0.0.0**更改为**5.0.0.0**，保存，关闭解决方案，重新打开，然后瞧！恼人的红色曲线消失了，智能感知回来了

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-19T02:04:32.457

**Resharper 可能导致它**

转到 Visual Studio/Tools/Options/Resharper 然后单击**Suspend Now** / 然后**Resume Resharper**，您的一天将不再是灰色的，但您的剃须刀窗口可能会有更多的灰色！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-04T16:46:50.487

就我而言，我遇到了这个问题，因为我试图将 MVC 3 项目运行到启用 MVC 2 的平台中。

然后我在我的系统上安装了 MVC 3 问题就消失了

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-12T15:07:23.517

[从http://www.asp.net/mvc/mvc5](http://www.asp.net/mvc/mvc5)安装 ASP.NET MVC 5 对 Visual Studio 2012 的支持为我解决了这个问题。

# mysql - ActiveRecord 分组和相关字段

> ID：15550908
> 
> 赞同：0
> 
> 时间：2013-03-21T14:54:49.227
> 
> 标签：mysql, sql, ruby-on-rails, activerecord, sqlite

假设我有一个记录用户和导师之间关系的关系表。我想为每个用户检索**最新的（即最新的）导师。**

```
Relationship.selects("MAX(id) AS newest_relationship_id").group('user_id') 
```

这成功返回，作为列 latest_relationship_id，每个用户的最新关系，但我如何确保 therapy_id 列将为该最新关系返回正确的相应治疗师？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:35:36.663

您可以收集特定导师的新关系 ID，并在子查询中使用它们：

```
mentor = Mentor.find(mentor_id) 
newest_relationship_ids = Relationship.select("MAX(id)").group(:user_id)
mentor.relationships.
       includes(:user).                       # eager load the user
       where(:id => newest_relationship_ids).
       map(&:user)                            # collect the user 
```

您还可以使用子查询更有效地执行此操作：

```
mentor = Mentor.find(mentor_id) 
newest_relationship_ids = Relationship.select("MAX(id)").group(:user_id).to_sql
mentor.relationships.
       includes(:user).         
       where("relationships.id IN (#{newest_relationship_ids}).
       map(&:user) 
```

# mysql - 在 vb6 中使用存储过程填充组合框

> ID：15550909
> 
> 赞同：2
> 
> 时间：2013-03-21T14:54:49.977
> 
> 标签：mysql, database, stored-procedures, vb6, combobox

如何在运行时使用存储过程从数据库中获取值来填充组合框？

这是我的代码，这应该转换为存储过程：

```
Private Sub ComboFill()
Set Rs = New ADODB.Recordset
Set Cmd = New ADODB.Command
With Cmd
.ActiveConnection = Conn
.CommandType = adCmdText
.CommandText = "SELECT suppliername from supplier"
 Set Rs = .Execute
End With

If Not (Rs.BOF And Rs.EOF) Then
Rs.MoveFirst
End If

Do Until Rs.EOF
txtsupplier.AddItem Rs.Fields("suppliername").Value
Rs.MoveNext
Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:07:24.567

试试这个（未测试）：

**编辑：**调整为返回 RS，而不是单个值

```
Set Rs = New ADODB.Recordset
Set cn = New ADODB.Connection
cn.ConnectionString = Session.GetConnectionstring
cn.Open

Set cmd = New ADODB.Command
cmd.ActiveConnection = cn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = “MyStoredProcdure”
' Input param, if you need
' cmd.Parameters.Append cmd.CreateParameter(“Param1”, adInteger, adParamInput, , 614)
' Create a recordset by executing the command.
Set Rs = cmd.Execute()
Rs.MoveFirst()

Do Until Rs.EOF
    txtsupplier.AddItem Rs.Fields("suppliername").Value
Rs.MoveNext

Set Rs = Nothing
Set cmd = Nothing
Set cn = Nothing 
```

# javascript - 将 html 元素的文本与 Raphael paper.print() 同步

> ID：15550910
> 
> 赞同：0
> 
> 时间：2013-03-21T14:54:50.273
> 
> 标签：javascript, fonts, raphael, css

我正在尝试创建编辑器，它将通过使用路径创建文本的像素完美副本。要创建 SVG 路径，我使用 Raphael.js[打印](http://raphaeljs.com/reference.html#Paper.print)方法。问题是我无法理解如何设置`print`函数以使其与 html 元素（即跨度）中的文本完全相同。

以下是`print`调用示例：

```
var textPath = _r.print(0, 0, 'Default text', font1Cufon, 16, 'baseline', 0); 
```

即我有这样的跨度：

```
<span class="text">Default text</span> 
```

CSS：

```
.text {
    top: 0;
    left: 0;
    font-family: 'font1';
    font-size: 16px;
} 
```

这不是产品代码，但我认为主要思想很清楚。它几乎可以工作，但两种类型的文本之间存在一些偏移。有人知道如何同步它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:04:24.820

不幸的是，您无法像处理 SVG 路径渲染那样完全控制 HTML 文本渲染过程使用的字体渲染引擎。除其他事项外，字母间距、字距调整、抗锯齿、亚像素抗锯齿甚至特定字体系列字形选择可能存在细微差异，不仅在操作系统之间，甚至在浏览器之间。

一般来说，这都是最好的：浏览器中的字体通常被设计为与操作系统级别的整体字体显示选择保持一致。我很欣赏它使您想做的事情变得非常困难。如果您有一些几乎可以工作的东西并且您可以控制浏览器/操作系统/字体设置，那么一种选择是手动定位每个字母，就像在[lettering.js](http://letteringjs.com/)中所做的那样。

# ios - 如何获取使用情节提要创建的按钮的对象

> ID：15550911
> 
> 赞同：2
> 
> 时间：2013-03-21T14:54:51.947
> 
> 标签：ios, uiview, storyboard

我通过拖动情节提要中的按钮图标在视图控制器上创建了一个按钮。我认为这会生成一个对象。有没有一种方法可以让我获取 id，即该按钮的对象？是否有一种方法可以为该按钮指定标签或标识符，并且我们可以使用某些方法来引用它？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:02:19.737

当您将按钮从对象库拖到情节提要的场景中时，当该场景在运行时被实例化时，将创建与该按钮关联的对象。如果您想引用该对象以便以编程方式与之交互，您可以打开助手编辑器：

![助理编辑](../Images/41dfa7479e5902e0316e9f4183829f6b.png)

您需要确保为您的视图控制器设置自定义类，如果您告诉您的助理编辑器“自动”选择正确的关联 .h 文件，您将简化您的生活：

![设置类并使用自动模式](../Images/45145568c33dbcc492adb312d7b35c29.png)

然后，您可以`control`从按钮向下拖动（或右键单击拖动）到助手编辑器窗口并创建一个出口（an `IBOutlet`）或一个动作（an `IBAction`）：

![出口](../Images/e25457f7048e6e91ecd221cf982503cc.png)

通过这样做，您可以引用在场景实例化时创建的按钮对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:58:27.283

1.  打开 Assistan Editor（拆分视图，以便您在左侧看到 Interface Builder，在右侧看到您的 View Controller。）
2.  Ctrl-Klick 并拖动按钮并将其拖动到控制器（您会看到一条蓝线）。
3.  将在您的 ViewController 中生成一个`IBOutlet`，您可以访问它。

# c# - C# 单例表单模式，如何运行 2 个或更多表单？

> ID：15550912
> 
> 赞同：-7
> 
> 时间：2013-03-21T14:54:53.807
> 
> 标签：c#, design-patterns

我正在尝试同时运行多个单例表单，但是遇到了问题。我想运行几个相同的表单，因为它们是同一个对象，我不想制作几个单例对象（如果创建的对象很少，单例就会失去它的意义）。我有这个单例形式的代码：

> ```
> class SingletonForm : Form
> {
>     private static readonly SingletonForm instance = new SingletonForm();
> 
>     public static SingletonForm Instance
>     {
>         get
>         {
>             return instance;
>         }
>     }
> } 
> ```

我试着做：

> ```
>  SingletonForm f1 = SingletonForm.Instance;
>     SingletonForm f2 = SingletonForm.Instance;
>     f1.Show();
>     Application.Run(f2); 
> ```

但它只运行一种形式。

如何运行它以便它可以同时运行 2 个或更多单例表单？如果可能的话（我的意思是很容易做到）？

PS 有人告诉我这是可能的，我应该尝试一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:59:03.727

它是**Singleton**模式，这意味着您只能获得一个**SINGLE**对象。如果要获取 N* 个对象，只需将其从单例中删除并调用构造函数即可。

如果你真的想要，你可以创建某种混合静态，允许你设置可以返回的最大实例数。

```
public static int MaxInstances;
public static List<MyObject> instanceList;
public static MyObject GetInstance()
{
    //Fill the instance list up to the MaxInstances
} 
```

但是，管理这将是困难的，并且可能会导致错误。您也许可以传回我猜想的实例的索引，然后也按索引请求实例。但是，再一次，这似乎很容易出错，你应该像平常一样使用实例

# c# - 反射类型中的重复项（？）

> ID：15550913
> 
> 赞同：2
> 
> 时间：2013-03-21T14:54:54.820
> 
> 标签：c#, reflection, types

鉴于以下，代码为什么我会得到重复的项目？

```
Type intType = typeof(Int32);
foreach(var v in intType.GetMethods())
Console.WriteLine(v.Name); 
```

例如`ToString()`出现4次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:57:58.153

因为[Int32.ToString() 有四个重载](http://msdn.microsoft.com/en-us/library/3k9ccxf6.aspx)。通过设置断点并检查`intType.GetMethods()`结果，您可以轻松地看到这一点，您将在其中看到（以及其他）：

```
[5] {System.String ToString()}
[6] {System.String ToString(System.String)}
[7] {System.String ToString(System.IFormatProvider)}
[8] {System.String ToString(System.String, System.IFormatProvider)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:58:12.770

因为[`Type.GetMethods()`](http://msdn.microsoft.com/en-us/library/zt2ztzdc.aspx)返回此类型的*所有重载*方法。

[`Int32.ToString()`](http://msdn.microsoft.com/en-us/library/3k9ccxf6.aspx)方法有 4 个重载，所以...

```
System.String ToString()
System.String ToString(System.String)
System.String ToString(System.IFormatProvider)
System.String ToString(System.String, System.IFormatProvider) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T14:59:37.463

原因是一个方法**不仅仅是**一个名字：

```
Type intType = typeof(Int32);

foreach(var v in intType.GetMethods())
    Console.WriteLine(v.Name + " " +
                     (v.IsStatic? "static " : "") +
                      string.Join(", ", v.GetParameters()
                                         .Select(p => p.ParameterType.Name + " " + p.Name))); 
```

将打印

```
CompareTo Object value
CompareTo Int32 value
Equals Object obj
Equals Int32 obj
GetHashCode 
ToString 
ToString String format
ToString IFormatProvider provider
ToString String format, IFormatProvider provider
Parse static String s
Parse static String s, NumberStyles style
Parse static String s, IFormatProvider provider
Parse static String s, NumberStyles style, IFormatProvider provider
TryParse static String s, Int32& result
TryParse static String s, NumberStyles style, IFormatProvider provider, Int32& result
GetTypeCode 
GetType 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T14:56:42.527

可能是整个继承树。尝试传递`BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly`给`GetMethods`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T15:06:51.037

那是因为它从 Struct Int32 返回 String 方法的所有重载

![在此处输入图像描述](../Images/d65d66119eb00c280322108960581e58.png)

# sql - 删除选择的表

> ID：15550914
> 
> 赞同：0
> 
> 时间：2013-03-21T14:54:57.453
> 
> 标签：sql, sql-server-ce

我知道删除单个表或所有表的命令。但在这种情况下，我需要能够在`SQL CE`. 我知道可以在应用程序级别执行此逻辑，但我想知道是否可以在单个 SQL 命令中执行此操作？我一直无法在其他地方找到这个问题的答案。

我之前尝试过：

`drop table table1, table2, table3`

但这没有用。是否可以在单个命令中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:08:13.977

不，不可能在单个语句中：http: [//msdn.microsoft.com/en-us/library/ms173418.aspx](http://msdn.microsoft.com/en-us/library/ms173418.aspx)

# tsql - 我想加入表格并结合他们拥有的类似信息

> ID：15550919
> 
> 赞同：1
> 
> 时间：2013-03-21T14:55:03.027
> 
> 标签：tsql, join, common-table-expression

我有两个表，我想加入这两个表并组合 table1 具有的表 2 中的值。像这样：

```
 Table1
------------
Column1 | Column2
------------
James|  5 
Bond |  3

  Table2
------------
Column1 | Column2
------------
James|  0
Bond |  0
Dive |  0 
```

我想要这样的输出：

```
 Output
------------
Column1 | Column2
------------
James|  5
Bond |  3
Dive |  0 
```

我试过联合，联合所有，左加入，右加入，完全加入。我也研究了 CTE，但我没有得到它的权利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:59:36.013

`UNION ALL`将满足您的需求。子查询的结果是`Column2`每个`Column1`.

```
SELECT  Column1, SUM(Column2) Column2
FROM
        (
            SELECT Column1, Column2 FROM Table1
            UNION ALL
            SELECT Column1, Column2 FROM Table2
        ) x
GROUP   BY Column1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/0648a/10)

输出

```
╔═════════╦═════════╗
║ COLUMN1 ║ COLUMN2 ║
╠═════════╬═════════╣
║ Bond    ║       3 ║
║ Dive    ║       0 ║
║ James   ║       5 ║
╚═════════╩═════════╝ 
```

# matlab - MATLAB 将 3D 矩阵的高度向量计算为 2D 矩阵

> ID：15550922
> 
> 赞同：0
> 
> 时间：2013-03-21T14:55:19.977
> 
> 标签：matlab, 3d, 2d

我正在 MATLAB 中编程，并希望使我的代码尽可能高效。但我遇到了一个问题。

我有一个 3D 矩阵（行、列、高度）和一个 2D 矩阵（行、列）

我想将高度列的最大值保存在二维矩阵的相应单元格中。这可以通过 for 循环来完成。

```
for i=1:row
    for j=1:column
        2D(i,j)=nanmax(3D(i,j,:));
    end
end 
```

但是还有其他方法吗？就像是：

```
2D(mask)=3D(mask,nanmax(:)); 
```

掩码是一个逻辑矩阵，可能只包含一个以使其更容易。

任何帮助将不胜感激！谢谢贾斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:56:50.077

你有没有尝试过

```
twoD = nanmax( threeD, [], 3 ); 
```

如果您有掩码，则可以使用时间变量

```
tmp = nanmax( threeD, [], 3 );
twoD(mask) = tmp(mask); 
```

PS
[最好不要在matlab中使用`i`and`j`作为变量名](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

# sql - 更新具有多行的链接表

> ID：15550926
> 
> 赞同：0
> 
> 时间：2013-03-21T14:55:37.900
> 
> 标签：sql, sql-server, tsql, join, sql-server-2000

我有一个现有的数据库，其表结构如下：

```
TABLE [Parent]
  [Parent_ID] UNIQUEIDENTIFIER 

TABLE [ChildA]
  [ChildA_ID] INT
  [Parent_ID] UNIQUEIDENTIFIER FK -> [Parent].[Parent_ID]

TABLE [ChildB]
  [ChildB_ID] INT
  [Parent_ID] UNIQUEIDENTIFIER FK -> [Parent].[Parent_ID] 
```

为了支持未来的功能，我需要链接行`ChildA`，`ChildB`以便`ChildB`每个`ChildA`. 新结构应该是

```
TABLE [ChildA]
  [ChildA_ID] INT
  [Parent_ID] UNIQUEIDENTIFIER FK -> [Parent].[Parent_ID]

TABLE [ChildB]
  [ChildB_ID] INT
  [ChildA_ID] INT FK -> [ChildA].[ChildA_ID]
  [Parent_ID] UNIQUEIDENTIFIER FK -> [Parent].[Parent_ID] 
```

现在，两个表都包含几乎重复的表`ChildA`和表中的几行。`ChildB`为了这个问题，我们假设每个表中的行数对于任何给定的都是相同的`Parent_Id`。我需要`ChildA`为每个选择一个唯一的`ChildB`，即使我必须随机选择它们。

这适用于每个表中只有一行的情况：

```
UPDATE b
SET    [ChildA_ID] = a.[ChildA_ID]
FROM   [ChildB] b
       INNER JOIN [ChildA] a ON a.[Parent_ID] = b.[Parent_ID] 
```

我没有任何其他标准可以添加到`JOIN`. 我认为`ROW_NUMBER`可以，但是该数据库在 SQL Server 2000 上运行。当有多个记录时，我将如何`ChildA_ID`为每个分配一个？`ChildB_ID`

# ios - 如何使用弹出框实现 printInteractionControllerParentViewController：？

> ID：15550930
> 
> 赞同：1
> 
> 时间：2013-03-21T14:55:52.703
> 
> 标签：ios, uipopovercontroller, airprint

我正在`printInteractionControllerParentViewController:`根据需要`UIPrintInteractionControllerDelegate`自定义显示打印选项的弹出框。运行时，弹出框出现在（纵向）iPad 的全高大小，然后缩小到正常大小。

任何有关如何以更明智的方式出现弹出框的建议都会有所帮助。

这是我的实现：

```
- (UIViewController*)printInteractionControllerParentViewController:(UIPrintInteractionController*)printInteractionController {
    UINavigationController* navigationController = [[UINavigationController alloc] init];

    popover = [[UIPopoverController alloc] initWithContentViewController:navigationController];
    [popover setPopoverBackgroundViewClass:[CustomPopoverBackgroundView class]];

    [popover presentPopoverFromRect:_printButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    [popover.contentViewController.view setBackgroundColor:backgroundColor];

    return navigationController;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:02:34.220

尝试为视图控制器设置**contentSizeForViewInPopover**：

```
yourViewController.contentSizeForViewInPopover = CGSizeMake(320.0, 750.0); 
```

您可以在初始化我们的控制器时设置它。

# node.js - 当 contentType="application/json" 时 Azure + Nodejs 400 错误请求

> ID：15550931
> 
> 赞同：3
> 
> 时间：2013-03-21T14:55:57.573
> 
> 标签：node.js, jquery, azure, express, ember-data

我有一个 Node.js，Express 应用程序，用作 Emberjs RESTAdapter 的 REST api。我试图让它在 Windows Azure 上运行。当 Ember 在“/examples/1”上发出 HTTP 请求时，如下所示给我一个 400，错误请求。

故障排除后，错误似乎取决于请求标头内容类型。

*   在网络浏览器中访问“(domain)/users/1”会在浏览器窗口中打印出正确的 json。
*   运行 Jquery ajax 调用给我以下结果：

    这不起作用：

    ```
    $.ajax({
      url: "/users/1",
      contentType: "application/json; charset=UTF-8"
    }).done(function(data) {
      console.log(data);
    }); 
    ```

    但是，当切换到这个时，它可以工作。

    ```
    $.ajax({
       url: "/users/1",
       contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    }).done(function(data) {
       console.log(data);
    }); 
    ```

现在，如何设置我的 nodejs/azure 解决方案以允许内容类型为“application/json; charset=UTF-8”的 http 请求？

**更新**

注释后，这是服务器端代码

```
var express = require('express');
var app = express();

app.configure(function(){

   app.set('port', process.env.PORT || 3000);
   app.use(express.bodyParser());
   app.use('/', express.static(__dirname + '/WebContent'));
   app.use(express.cookieParser());

});

app.get('/:param/:id', function(req, res) {
   res.json(200, {user: {id:1, name: 'tester'}} )
});

app.get('/:param', function(req, res) {
   res.json(200, {users: [{id:1, name: 'tester'}]})
});

app.listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T19:47:43.907

我知道这是一个老问题，但我想我可能也遇到过这个问题并找到了解决方案。对我来说，问题是当您在请求上设置标头时[，express 将空正文视为无效 JSON的方式。](https://github.com/visionmedia/express/issues/1316)`ContentType: application/json``GET`

`text/plain`如果您不发送数据，建议的解决方法是将 contentType 设置为。

# asp.net-mvc - EntityFramework 和 MVC 中的多对多关系

> ID：15550935
> 
> 赞同：2
> 
> 时间：2013-03-21T14:56:04.673
> 
> 标签：asp.net-mvc, entity-framework

我在我的 MVC 项目中使用 Code First 方法。为简单起见，我有两个实体`classes Course`之间`Modules`存在多对多关系。这是我的课程的结构

```
 public class Course
    {
        public int CourseId { get; set; }                  
        public string Title { get; set; }

        public virtual ICollection<Module> Modules { get; set; 
}

public class Module
    {
        public int ModuleId { get; set; }                 
        public string Title { get; set; }
        public int Credits { get; set; }

        public virtual ICollection<Course> Courses {get;set;   
 } 
```

我使用 EntityFramework 为每个控制器创建了两个控制器，每个控制器为每个类创建表。现在有了多对多关系，EF 足够聪明，可以为我创建第三个连接表，即。`CourseModule(FK_Course_ID, FK_ModuleID)`. 但问题是该表没有填充各个表中的键。它是空白的。任何人都可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:18:26.667

我在这里很紧张，但是您的上下文课程中是否有以下内容：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
       base.OnModelCreating(modelBuilder);
            modelBuilder.Entity<Course>()
                .HasMany(s => s.Modules)
                .WithMany(a => a.Courses)
                .Map(m =>
                {
                    m.MapLeftKey("CourseID");
                    m.MapRightKey("ModuleID");
                    m.ToTable("CourseModules");
                });
} 
```

另外，我们可以在您尝试保存课程/模块的位置查看您的代码吗？

# iphone - GCDAsyncSocket 写入超时不起作用

> ID：15550942
> 
> 赞同：1
> 
> 时间：2013-03-21T14:56:28.293
> 
> 标签：iphone, objective-c, sockets, gcdasyncsocket

我试图在使用 GCDAsyncSocket 时设置写操作超时。代码非常简单，如下所示。

```
[iAsyncSocket writeData:bytesToSend withTimeout:3.0 tag:0]; 
```

然后我在我的 Mac 上禁用 Internet 连接并等待写入超时发生，但没有任何反应。我没有`GCDAsyncSocketWriteTimeoutError`像我应该的那样因错误而断开连接。

我还验证了我的服务器在我关闭 Internet 连接后按预期停止接收消息。

我查看了源代码，发现负责触发写入超时事件的 writeTimer 总是被取消（调用函数`endCurrentWrite`）。追溯到定时器被取消的地方，我最终得到了以下代码行。

```
ssize_t result = write(socketFD, buffer, (size_t)bytesToWrite); 
```

write 系统调用总是返回我发送的字节总数，就好像套接字设法发送数据一样，尽管没有 Internet 连接。这是合乎逻辑的吗？

有没有人遇到过同样的问题或看到过类似的行为？或者有没有人设法为 GCDAsyncSocket 设置写超时？

非常感谢。

# rest - 如何对进入 Restlet Web 服务的输入进行 XSS 转义

> ID：15550944
> 
> 赞同：0
> 
> 时间：2013-03-21T14:56:29.297
> 
> 标签：rest, gwt, xss, restlet

我有一个使用 Restlet 的 GWT Web 应用程序。

它有 @Post 注释的服务方法，这些方法接受一个 bean 并在其上执行一些逻辑。

我想对这些 bean 中的数据进行 XML 转义。

例如，假设我有以下内容：

```
public class MyService extends ServerResource {
    @Post
    public DataBean performLogic(DataBean bean) {
       ...
    }
}

public class DataBean {
    String data;
} 
```

`DataBean.data`有没有一种方法可以在序列化之后但在发送到之前进行XML 转义`MyService.performLogic()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:12:38.560

您可以覆盖 doInit() 方法，这可以让您做您需要的事情；但会发生在对 ServerResource 中的 @Post @Get 方法的任何调用之前。

或者，如果您需要更广泛地使用它，您可能需要考虑在命令链中添加过滤器并在那里覆盖 beforeHandle() 方法。

# ruby-on-rails - 如何在没有任何 HTTP HEAD 信息的情况下呈现文本？

> ID：15550945
> 
> 赞同：0
> 
> 时间：2013-03-21T14:56:37.190
> 
> 标签：ruby-on-rails, ruby, text, http-headers, rendering

我正在使用 Ruby on Rails 3.2，我想呈现一些*没有任何 HTTP HEAD*信息的响应文本。我尝试`render :text => "MY_CUSTOM_TEXT"`在我的控制器中使用[官方文档](http://guides.rubyonrails.org/layouts_and_rendering.html)

> （来自“2.2.7 渲染文本”一章）您可以使用 :text 选项将纯文本（根本没有标记）发送回浏览器来渲染：`render :text => "OK"`

但响应仍然包含 HTTP HEAD 数据。

如何呈现响应，使其只是文本`MY_CUSTOM_TEXT`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:59:21.973

无论如何都会返回某种头部数据；这是 HTTP 协议的一部分，而不是 rails 或任何其他框架可以关闭的东西。

您要解决的根本问题到底是什么？HEAD 信息给您带来了什么问题？

# xslt - 在 xsl 中读取远程 csv 文件

> ID：15550947
> 
> 赞同：1
> 
> 时间：2013-03-21T14:56:40.327
> 
> 标签：xslt, saxon

我正在尝试使用 Saxon 9 将 csv 文件转换为 xml 文件。但是当我尝试检查存在并使用 xslt 函数读取 csv 文件时遇到问题：unparsed-text-available()、unparsed-text( )

它们适用于本地文件，但是当我将远程文件作为参数传递时，unparsed-text-available() 返回 false。

例如，当我通过“D:\test\test.csv”时，它可以工作。当我通过“\\remote-computer\test\test.csv”时，它找不到它。

这是我的 xsl 文件的一部分：

```
<xsl:template match="/" name="main">
  <xsl:choose>
    <xsl:when test="unparsed-text-available($pathToCSV)">
        <xsl:variable name="csv" select="unparsed-text($pathToCSV)"/>                    
            ....
    </xsl:when>
    <xsl:otherwise>
        <xsl:text>Cannot locate : </xsl:text><xsl:value-of select="$pathToCSV"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

似乎 document() 可以读取远程文件，但仅适用于 xml 文件。

你知道我可以在这种情况下使用的其他一些功能吗？在 xslt 或撒克逊语中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:01:07.707

您必须将该路径转换为有效的 URI。

就像是：

```
unparsed-text(concat('file://',translate($pathToCSV,'\','/'))) 
```

# asp.net - 如何提供不会被 Hotmail 删除的跟踪图像？

> ID：15550949
> 
> 赞同：4
> 
> 时间：2013-03-21T14:56:43.307
> 
> 标签：asp.net, .net, email

我正在我的 ASP.NET 站点中构建一个 emailshot 跟踪功能，该功能将在打开电子邮件时提供链接图像，以便我计算打开的电子邮件。

这一切都是光明正大的，选择加入等，等等，我尝试了两种方法：

*   调用一个`.aspx`页面，该页面提供（直接到响应流）存储在数据库中的 Base64 编码图像
*   调用`.ashx`从物理文件夹中提供图像的 HTTP 处理程序

如果我使用我的 POP 电子邮件或我的 Gmail 帐户，这两种技术都可以正常工作 - 提供图像，并且我可以处理页面代码中的点击。

但是，Hotmail 会阻止它们。它甚至没有提供显示图像的选项 - 如果我`View Source`在浏览器电子邮件显示上，则没有原始链接的痕迹。

只有在以下情况下，图像链接才能在 Hotmail 浏览器窗口中正确显示：

*   在链接中使用实际域名（而不是用于测试的 IP 地址或本地主机）和
*   使用 .链接到物理文件（而不是为其提供服务的页面）`<img src="http://domain/imagefilename.ext"/>`。

是否有另一种方法可以至少提供查看图像的选项？我不会试图以任何方式隐藏跟踪 - 无论如何，电子邮件中通常会有其他链接图像。

所提供的东西也不一定是图像 - 是否有任何其他可以提供（并因此被计算在内）的东西不会被 Hotmail 等过分热心的邮件服务器视为可疑？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:32:23.437

您可以在 url 的末尾添加一个查询字符串值。然后配置 IIS 来处理该扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:09:35.853

好吧，您要问的是电子邮件服务器的噩梦。垃圾邮件发送者使用相同的技术从垃圾电子邮件 ID 中获取有效的电子邮件 ID。现在，我可以向您保证，在任何信誉良好的服务器上使用任何白帽或灰帽技术都无法跟踪电子邮件的打开情况。

请参阅这些链接以获取更多详细信息：- [http://emailuniverse.com/ezine-tips/?id=502](http://emailuniverse.com/ezine-tips/?id=502) [https://webapps.stackexchange.com/questions/22662/way-to-ensure-that-my-sent - 电子邮件已读](https://webapps.stackexchange.com/questions/22662/way-to-ensure-that-my-sent-email-was-read)

但是不要认为 myword '不可能' 是理所当然的，有一些受保护的技术可用，但我不确定 [http://mailchimp.com/](http://mailchimp.com/) 祝你好运

# flash - ActionScript 2 Tween 运行缓慢

> ID：15550950
> 
> 赞同：1
> 
> 时间：2013-03-21T14:56:43.710
> 
> 标签：flash, tooltip, actionscript-2

我有这个 ActionScript 2.0 文件，用于为我的 flash 中的某些 MovieClips 创建工具提示。我用**#include“tooltip.as”**在我的场景的第一帧中调用tooltip.as 并且我给出了一个包含我的工具提示内容的字符串

```
var tooltip:String="Assembleia Geral\nAlice Freitas, Presidente\nJorge Correia, 1º Secretário\nCeleste Madureira, 2º Secretário\n" 
```

工具提示.as：

```
import mx.transitions.Tween;
var lst:Object = new Object ();
this.createEmptyMovieClip ("d_mc", 650000);
var mc_isim:String = new String ();
function olustur (f_mc:MovieClip, f_str:String)
{
    var my_fmt:TextFormat = new TextFormat ();
    my_fmt.size = 13;
    my_fmt.font = "Arial";
    var w:Number = f_str.length * my_fmt.size / 3 * 2;
    var h:Number = 20;
    f_mc.createEmptyMovieClip ("tool_mc", 5);
    f_mc.tool_mc.createTextField ("tool_txt", 1, 5, 5, 10, 10);
    f_mc.tool_mc.tool_txt.autoSize = true;
    f_mc.tool_mc.tool_txt.setNewTextFormat (my_fmt);
    f_mc.tool_mc.tool_txt.text = f_str;
    f_mc.tool_mc.tool_txt._visible = false;
    f_mc.tool_mc.beginFill (0xCDCDCD, 80);
    f_mc.tool_mc.lineStyle (1);
    f_mc.tool_mc.moveTo (5, 5);
    f_mc.tool_mc.lineTo (f_mc.tool_mc.tool_txt._width+10, 5);
    f_mc.tool_mc.lineTo (f_mc.tool_mc.tool_txt._width+10, (f_mc.tool_mc.tool_txt._height + 5));
    f_mc.tool_mc.lineTo (5, (f_mc.tool_mc.tool_txt._height + 5));
    f_mc.tool_mc.lineTo (5, 5);
    f_mc.tool_mc.endFill ();
    f_mc.tool_mc._y = 0 - h;
    f_mc.tool_mc._visible = false;
    var bos:Tween = new Tween (f_mc.tool_mc, "_x", null, f_mc.tool_mc._x, f_mc.tool_mc._x, 2, true);
    bos.onMotionFinished = function ()
    {
        f_mc.tool_mc._visible = true;
        var my:Tween = new Tween (f_mc.tool_mc, "_alpha", null, 0, 100, 1, true);
        my.onMotionFinished = function ()
        {
            f_mc.tool_mc.tool_txt._visible = true;
            my.stop ();
        };
    };
}
lst.onMouseMove = function ()
{
    d_mc.startDrag (true);
    if (typeof (eval (d_mc._droptarget)) == "movieclip")
    {
        f_mc = eval (d_mc._droptarget);
        if (f_mc.tooltip != undefined)
        {
            d_mc._visible = true;
            if (mc_isim != f_mc._name)
            {
                olustur (d_mc, f_mc.tooltip);
                mc_isim = f_mc._name;
            }
        }
    }
    else
    {
        d_mc._visible = false;
    }
};
Mouse.addListener (lst); 
```

我的问题是：我可以让这个工具提示出现得更快吗？大约需要 2 秒钟才会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:16:56.807

`Tween`AS2构造函数的第 6 个参数控制补间的持续时间（请参阅[AS2 补间参考](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)）。当您的初始补间完成时会出现您的工具提示，并且该初始补间需要两秒钟：

```
var bos:Tween = new Tween (f_mc.tool_mc, "_x", null, f_mc.tool_mc._x, f_mc.tool_mc._x, 2, true); 
```

您可以根据需要更改`2`为多少秒。例如，这将导致工具提示仅在`0.5`几秒钟后出现：

```
var bos:Tween = new Tween (f_mc.tool_mc, "_x", null, f_mc.tool_mc._x, f_mc.tool_mc._x, 0.5, true); 
```

# browser - 如何制作将刷新浏览器的扩展程序/脚本/程序，直到找到或找不到某个短语/关键字？

> ID：15550958
> 
> 赞同：1
> 
> 时间：2013-03-21T14:57:05.920
> 
> 标签：browser, google-chrome-extension, refresh

是否有任何程序/扩展程序可以与浏览器一起使用，以刷新网页并搜索某个短语或文本，然后在找到或未找到该短语时停止。

例如，假设我创建了一个站点，该站点使用随机发生器在单词“一”、“二”和“三”之间循环。

这个程序会刷新页面，直到找到“三”这个词，如果我将它设置为找到那个词，然后一旦找到就停止。

或者

该程序将刷新页面，直到找不到单词“三”，如果我将其设置为查找该单词，然后一旦找不到就停止。

我知道我们可以使用 curl 和 grep 来做到这一点，但是页面没有加载到 webbrowser 上。这不是我想要的。看看是否有我们可以在浏览器上加载的解决方案

如果不存在这样的东西，关于如何编写这种程序的任何想法？使用什么工具来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:21:49.603

你可以很容易地编写一个扩展来做到这一点。我建议不要每次都刷新页面，而是轮询数据，直到获得所需的结果，然后在找到页面后刷新页面。一个使用 jQuery 的简短示例，因为我熟悉它：

**清单.json**

```
{
 "name": "Find Text",
 "version": "0.1",
 "description": "Find Text",
 "manifest_version": 2,
 "browser_action": {
   "default_icon": "on.png",
   "default_popup": "popup.html" 
 },
 "permissions": [
   "tabs","http://*/*","https://*/*"
 ],
 "background": {
    "scripts": ["bgp.js","jquery-1.8.3.min.js"],
    "persistent": true
 }
} 
```

**弹出窗口.html**

```
<!DOCTYPE html> 
<html>
  <head>
    <style>
      body { width: 300px; }
    </style>
    <script src="jquery-1.8.3.min.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>
    <div>Desired Search Url</div>
    <input type="text" id="searchUrl">
    <div>Desired Search Text</div>
    <input type="text" id="searchText">
    <button id="searchButton">Search</button>
  </body>
</html> 
```

**Popup.js**

```
$(function(){
  var tabId;
  chrome.tabs.query({active:true,currentWindow:true}, function(tab) {
    $('#searchUrl').val(tab[0].url);
    tabId = tab[0].id;
  });
  $('#searchButton').click(function(){
    chrome.extension.sendMessage({
      url:$('#searchUrl').val(),
      text:$('#searchText').val(),
      tab:tabId
    });
  });
}); 
```

**bgp.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  checkUrlForText(message.url,message.text,message.tab);
});
function checkUrlForText(url,text,tab){
  var contains;
  $.ajax({
    url:url,
    async:false, 
    success: function(data){
      contains = $(':contains('+text+')',data);
      while(contains.length == 0){
        $.ajax({
          url:url,
          async:false,
          success: function(dat){
            contains = $(':contains('+text+')',dat);
          }
        });
      }
    }
  });
  chrome.tabs.reload(tab);
} 
```

如果要求每次都刷新选项卡（内容会在找到您要查找的内容和刷新页面之间发生变化），那么您应该使用它[`content scripts`](http://developer.chrome.com/extensions/content_scripts.html)来测试所需的值并向后台发送消息如果所需的文本不存在刷新页面并重新开始。像这样：

**bgp.js**

```
var contains;
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  checkTabForText(message.text,message.tab);
  contains = false;
});
function checkTabForText(text,tab){
  chrome.tabs.executeScript(tab,{file:"jquery-1.8.3.min.js"});
  chrome.tabs.executeScript(tab,{file:"checkText.js"},function(){
    chrome.tabs.sendMessage(tab, {text:text}, function(response){
      contains = response.contains;
      if(!contains){
        chrome.tabs.reload(tab,function(){
          checkTabForText(text,tab);
        });          
      }
    });
  });    
} 
```

**checkText.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  var contains = $(':contains('+message.text+')');
  if(contains.length > 0)
   sendResponse({contains:true});
  else
   sendResponse({contains:false});
}); 
```

# java - 如何在Android 2.3 中实现对服务器数据库的自定义搜索？

> ID：15550964
> 
> 赞同：0
> 
> 时间：2013-03-21T14:57:15.390
> 
> 标签：java, android, search, searchview

我必须在我的应用程序中为 android 2.3 实现自定义搜索。我有一些`EditText`用户输入一个字母，然后我向服务器发送响应，检索所有与这一个字母匹配的结果，然后我需要将它们显示在一个列表中。当用户键入第二个按钮时，我还需要发送新的响应和刷新数据等等。

问题是如何在 Android 2.3 中做到这一点？我应该用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:51:11.553

这似乎太开放了，有太多问题，无法给出真正有用的答案。

您在应用程序中使用的内容在很大程度上取决于服务器的 API 期望您如何通信。一方面，我完全赞成向应用程序隐藏服务器所做的细节，并将所有“智能”放在 API 后面。所以像这样的查询：

```
http:/blah.com/getresults?search=a 
```

将导致匹配“a”。如果它正在搜索 MySql Db、处理 Google 搜索或访问系统上的文件，则无关紧要。

您的代码需要担心 API 的接口以进行查询和处理结果，无论它们是自由格式的文本、JSON 对象还是其他任何东西。

也许改写你的问题或提供你所知道的信息会有所帮助。

# c - 按位或和逻辑或运算符。有什么不同？

> ID：15550966
> 
> 赞同：7
> 
> 时间：2013-03-21T14:57:20.970
> 
> 标签：c

以下代码中的逻辑运算符和按位运算符之间是否存在任何功能差异？使用一种或另一种的原因是什么？

```
typedef unsigned char BOOLEAN;

void orOperatorsComparison(BOOLEAN bBar, BOOLEAN bFoo)
{
  BOOLEAN bLogicalOr = (bFoo || bBar);
  BOOLEAN bBitwiseOr = (bFoo | bBar);

  ...  
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T14:59:53.050

“支持”是什么意思？

如果它是逻辑的或您的意思，那么当然您应该始终使用`||`它，因为它是布尔、逻辑的“或”运算符。

它具有能够短路的好处，但这在这么简单的代码中并不重要。

如果按位或在不操作位时使用它，我会认为它很奇怪和奇怪（并且由于更正）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T14:59:27.417

布尔值 || 将短路：如果第一个操作数是`true`，则永远不会计算第二个操作数。相比之下，按位 | 总是评估两个参数。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-21T15:02:36.377

其他答案已经谈到了短路（但这在您的特定代码中不是问题）。但这里有一个关键区别。

如果由于某种原因，您的输入值不在 [0,1] 中，那么按位或会给您一个可能也不在 [0,1] 中的答案。逻辑 OR**保证**给你 0 或 1。

因此，您应该更喜欢逻辑 OR。您的意图是（大概）操纵逻辑值，因此使用非逻辑运算符是不合逻辑的。^*

* * *

[* 双关语绝对是有意的。]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T15:08:21.790

*在那种特殊情况下，不，结果*没有区别：

```
1 || 0 == 1
1 | 0  == 1 
```

所有真值表都适用于此。

如果您在谈论我们是如何*得出*结果的，那么*可能*会有所不同。随着`||`你有一个短路机制：

```
BOOLEAN bFooBar = (bFoo||bBar) // if bFoo is TRUE, we never look at bBar
                               // vs
BOOLEAN bFooBar = (bFoo|bBar)  // where we take into account both values 
```

所以总而言之，是的，您可以在某些情况下*错误地*使用逻辑运算符和位运算符并获得相同的结果，但是您为什么***要这样做***呢？如果您知道它是错误的，并且您知道它会导致糟糕的、难以发现的错误，请使用该语言为您提供的工具来完成它们本来应该做的工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T15:00:18.560

按位或运算符从不短路，而逻辑运算符则短路。也就是说，如果`bFoo`为真，`bBar`则永远不会被评估。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T15:08:53.260

> 在以下情况下，逻辑运算符和按位运算符之间是否存在任何功能差异？

是的，有（正如其他人指出的懒惰评估）。

> 有任何理由支持其中一个吗？

如果它们在某种程度上是等价的，那么使用逻辑运算符的情况将是保留该类型预期的语义。另见：[最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。

# c# - C# 自动属性与普通字段

> ID：15550973
> 
> 赞同：5
> 
> 时间：2013-03-21T14:57:47.823
> 
> 标签：c#, automatic-properties

在这个例子中 Foo.Something 和 Bar.Something 之间有什么有效的区别吗？

```
class Foo
{
    public string Something;
}

class Bar
{
    public string Something{get; set;}
}

class Program
{
    static void Main(string[] args)
    {
        var MyFoo = new Foo();
        MyFoo.Something = "Hello: foo";
        System.Console.WriteLine(MyFoo.Something);

        var MyBar = new Bar();
        MyBar.Something = "Hello: bar";
        System.Console.WriteLine(MyBar.Something);
        System.Console.ReadLine();
    }
} 
```

AFAIK 他们的行为完全相同。如果他们这样做，为什么不使用 Foo 中的普通字段？在 java 中，我们使用 setter 来强制执行新的不变量而不破坏代码和 getter 以返回安全数据，但在 c# 中，您始终可以将 Foo 重写为：

```
class Foo
{
    private string _Something;
    public string Something
    {
        get { 
            //logic
            return _Something; 
            }
        set { 
            //check new invariant
            _Something = value; 
            }
    }
} 
```

旧代码不会被破坏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T15:01:31.773

> AFAIK 他们的行为完全相同。

不，他们没有。

*   字段不能用于数据绑定（至少在某些绑定实现中）
*   您可以稍后为属性添加更多逻辑，而不会破坏源代码或二进制兼容性
*   属性不能通过引用传递
*   您不能将初始化程序添加到自动实现的属性
*   它们在反射方面显然会有所不同
*   从哲学上讲，属性在逻辑上是 API 的一部分，而字段是实现细节

> 在 c# 中，您始终可以将 Foo 重写为：[...]

如果你不关心二进制或源代码兼容性，你可以，是的。在某些情况下，这真的*不是*问题——在其他情况下，这是非常非常重要的问题。为什么不选择从一开始就公开你的 API 而不是你的实现细节呢？这不像添加`{ get; set; }`你的代码会增加很多混乱......

有关更多咆哮，请参阅我[关于此的文章](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:00:04.693

`Foo.Something`是一个字段，`Bar.Something`是一个自动实现的属性。这是一个巨大的差异。

您可以像访问字段一样访问属性，但在访问属性时会在内部调用 set/get 方法。

因此，当您说 时`myBar.Something = "asdf"`，C# 编译器会将其转换为对 setter 方法的调用：`myBar.set_Something("asdf")`. setter 和 getter 方法会自动为您生成，以及实际值的支持字段。

通过使用 get 和 set 方法更改`Foo.Something`为属性，您破坏了二进制兼容性，这意味着您必须重新编译`Foo.Something`在它仍然是字段时使用的所有程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:00:03.273

属性的 getter 和 setter（包括自动的）具有方法调用成本。应避免使用公共字段，以使访问保持干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:01:49.870

1）您可以添加私有访问器来获取或设置和控制对属性的访问。

```
public object MyProp {get; private set;} 
```

你可以在任何地方阅读道具，但只能在课堂上写

2）您可以将一些逻辑连接到读/写属性。在现场的情况下，你不能做任何额外的事情

3）你不能序列化字段

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:01:58.923

`public string Something{get; set;}`只是语法糖；编译器实际上将其扩展为方法。因此`get; set;`，仅仅为了它而将所有字段都放在一个地方没有什么意义。

# html - 如何在 HTML/CSS 中制作 3 列完全响应式图像网格？

> ID：15550974
> 
> 赞同：2
> 
> 时间：2013-03-21T14:57:48.393
> 
> 标签：html, css

在 HTML/CSS 中制作一个 3 列完全响应式图像网格的最佳方法是在中心图像的左侧/右侧留出 10 像素的边距（从 1280 像素一直响应到 320 像素），具有广泛的交叉浏览器支持？

我可以使用 CSS 属性，例如：column-count 吗？有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:09:37.920

你的格式本身很简单......

让我们假设这个基本格式在桌面大小......

```
|*****|*|*****|*|*****|
|     | |     | |     |
|     | |     | |     |
|*****|*|*****|*|*****| 
```

所以，让我们使用 3.8% 的利润率。

我们需要根据这些边距计算列的宽度。我们有两个利润率为 3.8% = 7.6%。

100% - 7.6% = 92.4% / 3 列 = 30.8%

所以...

**CSS：**

```
.container { width: 100%; max-width: 1280px; min-width: 320px; margin: 0 auto; clear: both; }

.col-3 { float: left;  width: 30.8%; margin-right: 3.8%; }

.last { margin-right: 0; } 
```

**HTML：**

```
<div class="container">
    <div class="col-3">
    </div>
    <div class="col-3">
    </div>
    <div class="col-3 last">
    </div>
</div> 
```

您将需要使用媒体查询将其调整为移动设备的单列布局。

# mysql - 选择前导零的查询

> ID：15550975
> 
> 赞同：-1
> 
> 时间：2013-03-21T14:57:50.460
> 
> 标签：mysql

我有一个简单的查询...但是两个不兼容的表

```
SELECT
a.name
b.occupation
FROM table1 a
LEFT JOIN table2 b
ON a.ID = B.ID 
```

问题是table1和table2有数据

```
ID       ID
HV       HV
8        008
13       013
A5       A5 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:03:49.850

您可以使用 mysqls [TRIM](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)功能。

```
LEFT JOIN table2 b
ON a.ID = TRIM(LEADING 0 FROM B.ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:01:26.003

您可以通过在整数上下文中评估它们来将值转换为它们的整数值：

```
SELECT
a.name
b.occupation
FROM table1 a
LEFT JOIN table2 b
ON a.ID = B.ID+0 
```

但这可能会破坏使用索引进行连接的任何机会。要进行优化，您必须将值以兼容的格式存储在两个表中。

# methods - 何时在 Salesforce 中将方法声明为静态

> ID：15550976
> 
> 赞同：2
> 
> 时间：2013-03-21T14:57:50.813
> 
> 标签：methods, static, salesforce

我想知道将方法声明为静态的含义是什么。我知道当声明为静态时，我可以在不实例化类的情况下使用该方法。但是我什么时候应该将一个方法声明为静态的，以及当我将一个方法声明为静态时的含义是什么。

在此先感谢您提供有关此主题的任何帮助/说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:07:20.000

在 Salesforce 的 Apex 中使用静态方法的原因与 Java 或其他相关的面向对象语言相同。简而言之，`static`当方法适用于类而不是该类的实例时使用。例如，我将参考[not-just-yeti](https://stackoverflow.com/users/320830/not-just-yeti)对[Java: when to use static methods](https://stackoverflow.com/a/2671636/129492)的回答：

> 在一个类`Car`中，您可能有一个`convertMpgToKpl(double mpg)`静态方法 double，因为即使没有人建造过 Car，也可能想知道 35mpg 转换为什么。但是 void `setMileage(double mpg)`（设置一个特定的效率 `Car`）不能是静态的，因为`Car`在构造任何方法之前调用该方法是不可想象的。

有关更多示例，请参阅： [Java：何时使用静态方法](https://stackoverflow.com/questions/2671496/java-when-to-use-static-methods)

**更新：** 如果您从 Salesforce 开始编程和 OO 设计，我意识到上面的这个例子可能有点抽象，所以让我用[内置 Apex`TimeZone`类](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_timezone.htm)的一个例子重新措辞：

正如您可能期望的那样，这个类代表了世界各地的时区。此类的实例（即`TimeZone`对象）表示各个命名的时区（例如 EST、CST、PST 等）。请注意这里的区别——*该类*定义了一般的时区（例如，具有特定小时数的时间偏移的地球定义区域），但*该类的一个实例*（即*object*）定义了一个特定时间区。例如，PST 的实例将包含有关自身的数据，例如`displayName = "Pacific Standard Time"`和`offset = -8`，您可以分别通过其*实例*方法`getDisplayName()`和访问这些数据`getOffset()`。另一方面，如果您想获取有关时区的一般信息，您可以使用`static`类上的方法`TimeZone`。例如，Apex 定义了一个在类上`static`调用的方法，您可以使用该方法通过 id查找实例。综上所述，请考虑以下示例以获取 PST 的显示名称：`getTimeZone()``TimeZone``TimeZone`

```
TimeZone pst   = TimeZone.getTimeZone('PST');  // static method call
String pstName = pst.getDisplayName();         // instance method call 
```

请注意第一行是如何获取 a 的实例，该实例`TimeZone`具有有关 PST 的特定信息，然后第二行实际上是获取该信息。

希望这可以解决问题并且不会使其更加混乱。总而言之，如果您正在访问数据或对特定数据实例做某事，无论是汽车还是时区，您都需要使用实例方法。另一方面，如果您正在访问数据或对一整类数据做某事，无论是汽车还是时区，您都需要使用一种`static`方法。

# javascript - 流程图渲染错误

> ID：15550979
> 
> 赞同：1
> 
> 时间：2013-03-21T14:57:56.207
> 
> 标签：javascript, jquery, cross-browser, flot

我的 flotchart 渲染不正确，在两个目标浏览器（ie8 和 firefox）中，这个图在数据前面用网格线渲染

[![](../Images/f11f043732802290891f8db8bd93f8e0.png)](https://i.stack.imgur.com/vIMdI.png)

**在 Chrome 和 Safari 中，根本没有出现任何线条，这是预期的结果**。在 Internet Explorer 8 中，图形呈现为 VML，我能够将网格线隔离为 vml 对象，不幸的是，隐藏这些对象所涉及的 CSS 会很棘手，同时仅限于 CSS2，然后这不适用于 Firefox，其中元素的图形不呈现为单独的元素。

这是图形代码[http://jsfiddle.net/gamm/t3Vqh/2/](http://jsfiddle.net/gamm/t3Vqh/2/)

```
var dataset = [overdue, open, completed];

var options = {
    series: {
        stack: true,
        bars: {
            show: true
        }
    },
    bars: {
        align: "center",
        horizontal: false,
        barWidth: .8,
        lineWidth: 0
    },
    grid: {
        borderWidth: 0,
        borderColor: null,
        backgroundColor: null,
        labelMargin: 10,
        minBorderMargin: 10
    },
    yaxis: {
        tickColor: "FFFFFF"
    },
    xaxis: {
        tickColor: "FFFFFF",
        ticks: [
            [1, "Public Works"],
            [2, "Sanitation"],
            [3, "Mayor"],
            [4, "L&I"],
            [5, "Police"]
        ]
    },
    legend: {
        position: 'ne',
        show: true
    }
};

$.plot($("#example-section15 #flotcontainer"), dataset, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:34:44.533

这里发生了两件事：

1.  看起来 Flot 总是在系列填充上方绘制网格线。这从未被认为是一个错误，因为默认情况下线条非常轻，并且当条（或线条等）有边框时效果不太明显。

2.  在 IE 中出现黑线的原因是“FFFFFF”不是有效的颜色规范。如果您改为使用“#ffffff”（或“透明”），那么 IE 看​​起来与其他浏览器相同，它们更宽容。这不仅限于 IE8 或 Excanvas；甚至 IE10 也对这种格式感到窒息。

前者可能值得在[Github](https://github.com/flot/flot/issues)上作为问题提交，因为它可以说是一个错误。

# html - 将块元素固定到屏幕底部的中心？

> ID：15550985
> 
> 赞同：0
> 
> 时间：2013-03-21T14:58:10.227
> 
> 标签：html, css

我想让一个块元素水平居中，垂直居中。这是我正在尝试的：

```
iframe {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 50%;
    right: 50%;
} 
```

它显示在右下角，部分溢出屏幕。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:01:31.030

您需要设置一个负左边距等于元素宽度的一半，例如：

```
left: 50%;
margin-left: -152px; 
```

`right: 50%`什么都不做。

[http://jsfiddle.net/ExplosionPIlls/VgPUZ/](http://jsfiddle.net/ExplosionPIlls/VgPUZ/)

# google-chrome - Chrome - 井号登录 URL 使页面跳转到底部

> ID：15550988
> 
> 赞同：2
> 
> 时间：2013-03-21T14:58:15.647
> 
> 标签：google-chrome

我注意到在 Chrome 中，当 URL 末尾有一个井号时，页面有时会跳到底部（取决于页面）。这是一个例子：

这是在 Chrome 中捕捉到底部的页面版本：http: [//www.w3schools.com/html/html_forms.asp#](http://www.w3schools.com/html/html_forms.asp#)

而这个没有： [http ://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

对这里发生的事情有任何想法吗？我正在开发的网站的行为方式相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:55:59.090

`#`焦点 iframe的存在。这可能是浏览器错误，但唯一的解决方法是不要将片段留空或将其完全删除。 `<form>`s 过去需要一个动作，但[当前的 HTML 规范](http://www.w3.org/TR/html5/forms.html#the-form-element)中没有任何内容表明它`<form>`需要一个动作。离开该操作将导致页面提交到当前 url。

# c# - 在 Visual Studio 中使用自定义方法时在视图名称上显示红色下划线

> ID：15550991
> 
> 赞同：3
> 
> 时间：2013-03-21T14:58:24.097
> 
> 标签：c#, asp.net-mvc, visual-studio, razor, resharper

我有很多用于 ASP MVC 的扩展方法/帮助程序类，它们将控制器名称、操作名称或视图名称作为参数（很像默认的 HtmlHelper 方法）。当您使用其中一种内置的 MVC 方法时，Visual Studio 通常用一条直红线在这些名称下划线，以指示它们与有效的控制器/操作/视图匹配。有没有办法为我自己的方法获得同样的支持？这是一个不错的小功能，但是当我停止使用内置方法时，该功能会慢慢消失。

快速示例：如果已知该视图存在，这将在“SomeViewName”字符串下方有一条直的红线，否则字符串本身将变为红色。

```
public ActionResult SomeAction()
{
    return View("SomeViewName");
} 
```

这将是我自己的一种方法的示例（它位于与 MVC 站点项目本身不同的库中）

```
// Example action using method
public ActionResult Show(int id) 
{
    return ViewOrNotFound("Show", id);
}

// Example of the method itself
private ActionResult ViewOrNotFound(string viewName, int id) 
{
    var model = DoSomethingToGetModel();
    if (model != null)
    {
        return new ViewResult { ViewName = viewName };
    }
    else 
    {
        return new HttpNotFoundResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T01:10:42.440

显然，您需要做的就是使用 JetBrains Annotations，因为这是 ReSharper 的一项功能。

```
public void SomeHelper(this HtmlHelper,[AspMvcController] string controller, [AspMvcAction] string Action, [AspMvcView] string viewName)
{
} 
```

# android - 如何在不更改用户设置的缩放比例的情况下更新地图标记？

> ID：15550998
> 
> 赞同：2
> 
> 时间：2013-03-21T14:58:47.880
> 
> 标签：android, google-maps-api-3, google-maps-markers, currentlocation

我有一个我正在构建的 Android 应用程序，它使用带有位置监听器的谷歌地图。当地图第一次出现时，我在位置监听器中将缩放设置为 12，我在谷歌地图开发方面相当新，所以我想知道一旦用户捏住以更改缩放，我如何在不影响缩放的情况下更新位置？下面是我的位置监听器。

```
/**
 *Mylocationlistener class will give the current GPS location 
 *with the help of Location Listener interface 
 */
private class Mylocationlistener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {

        if (location != null) {
            // ---Get current location latitude, longitude---

            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
            currentLatLng = new LatLng(location.getLatitude(), location.getLongitude());
            Marker currentLocationMarker = map.addMarker(new MarkerOptions().position(currentLocation).title("Current Location"));
            // Move the camera instantly to hamburg with a zoom of 15.
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(currentLatLng, 15));
            // Zoom in, animating the camera.
            map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);
            if (!firstPass){
                currentLocationMarker.remove();
            }
            firstPass = false;
            Toast.makeText(MapViewActivity.this,"Latitude = "+
                    location.getLatitude() + "" +"Longitude = "+ location.getLongitude(),
                    Toast.LENGTH_LONG).show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:40:26.800

您可以在侦听器中添加一个局部变量，并使用它仅缩放第一个位置。代码如下所示：

```
private class Mylocationlistener implements LocationListener {

   private boolean zoomed = false;

   @Override
   public void onLocationChanged(Location location) {

    if (location != null) {
        // ---Get current location latitude, longitude---

        Log.d("LOCATION CHANGED", location.getLatitude() + "");
        Log.d("LOCATION CHANGED", location.getLongitude() + "");
        currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
        currentLatLng = new LatLng(location.getLatitude(), location.getLongitude());
        Marker currentLocationMarker = map.addMarker(new MarkerOptions().position(currentLocation).title("Current Location"));
        // Move the camera instantly to hamburg with a zoom of 15.
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(currentLatLng, 15));
        // Zoom in, animating the camera.
        if (!zoomed) {
            map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);
            zoomed = true;
        }                                       
        if (!firstPass){
            currentLocationMarker.remove();
        }
        firstPass = false;
        Toast.makeText(MapViewActivity.this,"Latitude = "+
                location.getLatitude() + "" +"Longitude = "+ location.getLongitude(),
                Toast.LENGTH_LONG).show();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T10:32:49.210

尝试使用这个：

```
map.animateCamera(CameraUpdateFactory.newLatLngZoom(currentLocationMarker.getPosition(), map.getCameraPosition().zoom)); 
```