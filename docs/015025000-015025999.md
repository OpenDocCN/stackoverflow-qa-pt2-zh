# StackOverflow 问答 15025000-15025999

# java - 如何在局域网上运行java jar文件

> ID：15025001
> 
> 赞同：-3
> 
> 时间：2013-02-22T13:08:24.183
> 
> 标签：java

我们使用 swingx 在 java 上创建了一个桌面应用程序。我们要运行在具有集中数据库的多个系统上生成的 jar 文件。我使用相同的数据库设置在每个系统上运行了单独的 jar，但数据没有正确保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:14:16.770

在最少的情况下，建议让多个客户端直接访问数据库。相反，应该通过服务器组件（例如使用 EJB 的 Java EE 应用程序）访问数据库。

Java EE 应用程序可以提供 Swing 客户端，例如使用 Java WebStart。Swing 客户端可以使用远程 EJB（在 LAN 中）或使用 WebServices 访问服务器逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:55:09.867

在设置数据库路径的代码中设置 ip 地址而不是 localhost，最好使用第 4 种类型的 jdbc 驱动程序

# c# - 处理来自自定义角色提供程序 C# MVC4 的错误

> ID：15025010
> 
> 赞同：0
> 
> 时间：2013-02-22T13:09:04.727
> 
> 标签：c#, asp.net-mvc-4, error-handling, roleprovider

我已经构建了使用 MVC4 C# 应用程序的自定义角色提供程序项目，它工作正常，但是当角色提供程序发生错误时，如 SQL Server 已关闭，应用程序收到如下错误：

源错误：

```
Line 46:     <roleManager enabled="true" defaultProvider="myRoleProvider">
Line 47:       <providers>
Line 48:         <add name="myRoleProvider" type="SDP.myRoleProvider.myRoleProvider,      >SDP.UtilyxRoleProvider" applicationName="SDPlatform" />

Line 49:       </providers>
Line 50:     </roleManager> 
```

> 源文件：d:\Projects\SDPlatform\SDPlatform\SDPlatform\web.config 行：48

我无法在 Web 应用程序端捕获和处理错误。我在角色提供者端捕获它，但我无法在 Web 应用端处理它..

谢谢

# networking - 进入网络时出现数据包丢失 - 可能是什么原因？

> ID：15025011
> 
> 赞同：2
> 
> 时间：2013-02-22T13:09:08.410
> 
> 标签：networking, tcp, wireshark, cisco

具有 1gigabit NIC 的流量源（服务器）连接到 Cisco 交换机的 1gigabit 端口。

我将此流量 (SPAN) 镜像到同一交换机上的单独千兆端口，然后在高吞吐量捕获设备（河床鲨鱼）上捕获此流量。Wireshark 对捕获的分析表明存在一定程度的数据包丢失 - 大约 0.1% 的 TCP 段丢失（基于序列号分析）。

鉴于这是该流量在网络上的第一个点，什么会导致这种损失？吞吐量不接近 1gigabit，没有端口错误（这可能表明补丁引导不可靠）。

在 Richard Stevens 说明 TCP 的书中，他提到了“本地拥塞”——TCP 堆栈以比底层本地队列被清空的速度更快的速度生成数据。

这可能是我所看到的吗？如果是这样，有没有办法在 AIX 机器上确认它？（Stevens 示例使用 Linux 'tc' 命令对 ppp0 设备演示了较低级别的 drop）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:24:22.370

丢失的可能是网络路径上的任何地方。

如果两台主机之间有数据丢失，您应该会看到 DUP ACK。您需要查看发送 DUP ACK 的一方。这将是没有接收所有数据包的主机。（当没有看到一个数据包时，它会发送一个 DUP ACK 以再次请求数据包。）

沿途的其他地方可能会出现拥堵。查找接口上的输出丢弃。或 CRC 错误。

# javascript - 模板切换视图的集合。骨干网.js

> ID：15025014
> 
> 赞同：1
> 
> 时间：2013-02-22T13:09:21.770
> 
> 标签：javascript, jquery, backbone.js

有一个`Bckabone`视图产品：

```
Product = Backbone.View.extend({
    templateBasic: _.template($("#pcard-basic").html()),
    templateFull: _.template($("#pcard-full").html()),
    initialize: function() {
       this.render(this.templateBasic);
    },
// ... 
```

这是我的草稿：http: [//jsfiddle.net/challenge/xQkeP/73](http://jsfiddle.net/challenger/xQkeP/73)

当其中一个被选择/未选择以查看其完整模板时，我如何隐藏/显示其他视图，以便它可以扩展到完整的容器宽度。

我应该为整个集合使用视图吗？我如何处理事件处理？

谢谢！

**编辑**

这是我的最终草案：http: [//jsfiddle.net/challenge/xQkeP/](http://jsfiddle.net/challenger/xQkeP/)

但是我仍然不确定我是否可以以更优雅的方式实现相同的结果？我只是认为隐藏兄弟姐妹不是解决它的最佳方法：

```
viewBasic: function(e) {
    e.preventDefault();
    this.render(this.templateBasic);
    if(this.switchedToFull) {
        this.$el.siblings().show();
        this.switchedToFull = false;
    }
},
viewFull: function(e) {
    e.preventDefault();
    this.render(this.templateFull);
    this.$el.siblings().hide();
    this.switchedToFull = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:51:45.173

如果我理解正确，您希望以两种不同的方式在集合中显示所有模型，而让用户选择如何将它们呈现给用户，对吗？

您可以做到这一点的一种方法是创建一个主视图，供用户选择。当用户决定您应该从该视图触发一个方法，该方法使用不同的模板呈现集合中的每个模型。在您的主视图上，您​​应该有一个容器（表格、div、ul 等），您将在其中附加每个模型视图。

所以，归根结底，你得有意见。一个充当处理用户选择的集合的容器。然后你有另一个视图来渲染集合中的单个模型。此视图必须具有可以使用的模板。在主视图上，您​​迭代集合，为每个模型创建一个新视图实例，以根据用户决定使用不同的模板附加到容器中。

# javascript - 带有打开的 firebug 控制台的 Firefox 使用 sammy.js 和 knockout.js 会引发过多的递归

> ID：15025016
> 
> 赞同：1
> 
> 时间：2013-02-22T13:09:25.553
> 
> 标签：javascript, firefox, knockout.js, firebug, sammy.js

在上次更新 firefox 之后（我假设）我遇到了 firebug 控制台的问题。在我的应用程序中，当我结合`app.refresh()`设置 observable 时，会抛出“太多递归”并且 Firefox 没有响应。当我关闭萤火虫控制台时，一切正常。

在我的视图模型中，我有：

```
self.firstStep = ko.observable();

var app = Sammy(function () {
    this.before({ only: { verb: 'get', path: URL.FirstStep } }, function (context) {
        console.log("before");
    });

    this.get(URL.FirstStep, function () {
        self.firstStep(new firstWindow());
        console.log("get");
    });
});

self.LoadData = function () {
    $.ajax({
        //...
        success: function (data) {
            //here is commented out because of debuging the problem
        },
        complete: function () {
            app.refresh();
        }
    });
};

app.run();
self.LoadData(); 
```

进入控制台记录一次，之前记录两次。当我注释掉时，`self.firstStep(new firstWindow())`get 也被解雇了两次。在 chrome 中一切正常。帮助真的很感激。
**编辑：@Mörre**
当我修改代码时：

```
this.get(URL.FirstStep, function() {
  self.firstStep = ko.observable();
  self.firtStep(new firstWindow());
  console.log("get");
}); 
```

这是工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-10T02:39:46.990

如果您不需要使用“脚本”面板调试 JavaScript，请禁用“脚本”面板为我解决问题。

# node.js - 如何在没有--bare的情况下使用Coffeescript在node.js中存根“全局”模块变量？

> ID：15025017
> 
> 赞同：1
> 
> 时间：2013-02-22T13:09:25.700
> 
> 标签：node.js, testing, mocking, coffeescript, stubbing

我有一些来自 Heroku 的环境变量，为了便于阅读，我倾向于将它们分配给全局变量以提高可读性：

```
ACCESS_TOKEN = process.env.ACCESS_TOKEN 
```

现在我想在测试中改变它的值。我试过[rewire](https://github.com/jhnns/rewire)和[sandboxed-module](https://github.com/felixge/node-sandboxed-module)。但是，它们都是直接设置全局变量，而咖啡脚本变量[被包装在匿名函数中](http://coffeescript.org/#lexical_scope)。

有没有办法解决这个问题，或者`--bare`如果我想测试我的代码，我真的必须使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:13:38.853

我不熟悉节点，但我使用的方法以及我在其他技术中使用的方法是将全局变量或外部依赖项包装在一个对象中，在测试中需要时可以将其换成存根或模拟对象.

说不是将值存储在 ACCESS_TOKEN 中，而是创建了一个 herokuEnvironment 对象并为其提供了方法 accessToken()。无论您需要在哪里使用注入对象的属性。然后在生产中该方法调用 process.env.ACCESS_TOKEN。如果您需要一个安全版本来注入测试情况，您只需提供 { accessToken: function () {return 'foo';}}

# ios - iOS + 正方体 Ocr + OpenCV

> ID：15025019
> 
> 赞同：2
> 
> 时间：2013-02-22T13:09:27.323
> 
> 标签：ios, objective-c, opencv, ocr, tesseract

我为 ios 写了一个数字 OCR。我有一个带有两位数字 5 和 4 的测试图像 png。我找到了轮廓。如何在 tesseract 转移轮廓一？

初始化正方体：

```
 tess = new tesseract::TessBaseAPI();
    tess->Init([dataPath cStringUsingEncoding:NSUTF8StringEncoding], "eng");
    tess->SetPageSegMode(tesseract::PSM_SINGLE_CHAR); //<-- !!!!
    tess->tesseract::TessBaseAPI::SetVariable("tessedit_char_whitelist", "0123456789"); 
```

检测轮廓功能：

```
- (std::vector<std::vector<cv::Point> >)findSquaresInImage:(cv::Mat)_image {
std::vector<std::vector<cv::Point> > squares;
cv::Mat pyr, timg, gray0(_image.size(), CV_8U), gray;
int thresh = 50, N = 11;
cv::pyrDown(_image, pyr, cv::Size(_image.cols/2, _image.rows/2));
cv::pyrUp(pyr, timg, _image.size());
std::vector<std::vector<cv::Point> > contours;
    int ch[] = {0, 0};
    mixChannels(&timg, 1, &gray0, 1, ch, 1);
    for( int l = 0; l < N; l++ ) {
        if( l == 0 ) {
            cv::Canny(gray0, gray, 0, thresh, 5);
            cv::dilate(gray, gray, cv::Mat(), cv::Point(-1,-1));
        }
        else {
            gray = gray0 >= (l+1)*255/N;
        }
        cv::findContours(gray, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
        std::vector<cv::Point> approx;

        CvRect rec1;
        std::string str;
        std::map<int,IplImage*> pic_list;

        for( size_t i = 0; i < contours.size(); i++ )
        {

            rec1 = cv::boundingRect(contours[i]);

            if (rec1.height > 0.5*gray.rows && rec1.width < 0.756*gray.cols) {
                NSLog(@"%d %d %d %d", rec1.width, rec1.height, rec1.x, rec1.y);
                cv::approxPolyDP(cv::Mat(contours[i]), approx, arcLength(cv::Mat(contours[i]), true)*0.02, true);
                squares.push_back(approx);
            }
        }
    }

return squares;  } 
```

绘制轮廓功能：

```
cv::Mat debugSquares( std::vector<std::vector<cv::Point> > squares, cv::Mat image ) {
for ( int i = 0; i< squares.size(); i++ ) {
    // draw contour
    cv::drawContours(image, squares, i, cv::Scalar(255,0,0), 1, 8, std::vector<cv::Vec4i>(), 0, cv::Point());

    // draw bounding rect
    cv::Rect rect = boundingRect(cv::Mat(squares[i]));
    cv::rectangle(image, rect.tl(), rect.br(), cv::Scalar(0,255,0), 2, 8, 0);

    // draw rotated rect
    cv::RotatedRect minRect = minAreaRect(cv::Mat(squares[i]));
    cv::Point2f rect_points[4];
    minRect.points( rect_points );
    for ( int j = 0; j < 4; j++ ) {
        cv::line( image, rect_points[j], rect_points[(j+1)%4], cv::Scalar(0,0,255), 1, 8 ); // blue
    }
}

return image;
} 
```

btn 点击方法：

```
- (IBAction)onMath:(id)sender {
    UIImage *image = [UIImage imageNamed:@"test1.png"];

    cv::Mat iMat = [self cvMatFromUIImage:image];
    std::vector<std::vector<cv::Point> > sq = [self findSquaresInImage:iMat];
    cv::Mat hui = debugSquares(sq, iMat);

    image = [self UIImageFromCVMat:hui];
    self.imView.image = image;
} 
```

之后的图像：

![](../Images/924532d379140dc8a6c4f23c2a8aa6bc.png)

github上的项目链接：[https ://github.com/MaxPatsy/iORC](https://github.com/MaxPatsy/iORC)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-24T08:59:29.527

你能在这里检查这个答案[吗](https://stackoverflow.com/a/28936254/559005)

> 我在这里描述了一些为 Tesseract 准备图像的技巧：使用 tesseract 识别车牌
> 
> 在您的示例中，发生了几件事...
> 
> 您需要使文本为黑色，图像的其余部分为白色（而不是相反）。这就是字符识别的重点。灰度是可以的，只要背景多为全白，文字多为全黑即可；文本的边缘可能是灰色的（抗锯齿），这可能有助于识别（但不一定 - 你必须尝试）
> 
> 您看到的问题之一是，在图像的某些部分，文本真的很“薄”（并且在阈值处理后字母中的间隙出现），而在其他部分它真的很“厚”（字母开始合并）。Tesseract 不会喜欢这样 :) 发生这种情况是因为输入图像的光照不均匀，因此单个阈值并不适用于任何地方。解决方案是进行“局部自适应阈值”，其中为图像的每个邻域计算不同的阈值。有很多方法可以做到这一点，但请查看以下示例：
> 
> 使用 cv2.adaptiveThreshold(...,cv2.ADAPTIVE_THRESH_GAUSSIAN_C,...) 在 OpenCV 中进行自适应高斯阈值处理 局部 Otsu 的方法 局部自适应直方图均衡 您遇到的另一个问题是线条不直。根据我的经验，Tesseract 可以处理非常有限程度的非直线（百分之几的透视失真、倾斜或歪斜），但它实际上不适用于波浪线。如果可以，请确保源图像具有直线 :) 不幸的是，对此没有简单的现成答案；您必须查看研究文献并自己实现一种最先进的算法（如果可能的话将其开源 - 确实需要一个开源解决方案）。谷歌学术搜索“曲线 OCR 提取”会让你开始，
> 
> 弯曲文档图像的文本行分割最后：我认为使用 python 生态系统（ndimage、skimage）比使用 C++ 中的 OpenCV 会做得更好。OpenCV python 包装器适用于简单的东西，但对于你想要做的事情，它们不会完成这项工作，你需要抓取许多不在 OpenCV 中的部分（当然你可以混合和匹配）。在 C++ 中实现曲线检测之类的东西将比在 python 中长一个数量级（*即使你不了解 python，也是如此）。

祝你好运！

# extjs - 启用/禁用“删除过滤器”按钮，具体取决于 grid.store 的活动远程过滤器

> ID：15025022
> 
> 赞同：0
> 
> 时间：2013-02-22T13:09:35.663
> 
> 标签：extjs, filter, grid, store

我有一个 ExtJS 网格，其中包含一个远程过滤和排序的商店。这些请求使用 PHP 在服务器端处理。

我还在网格的工具栏中有一个按钮，用于删除商店中使用 entryGrid.filters.clearFilters() 函数的过滤器。

我想启用/禁用此按钮，具体取决于商店中是否有任何过滤器处于活动状态。因此，当第一次加载 de store（没有任何过滤器）时，该按钮被禁用。

所以我想在 store.load 函数上放一个监听器。

如果确实有可能，那么检查是否有任何过滤器处于活动状态的最干净的方法是什么？

我在手册（[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)）中搜索了网格、存储和过滤器，但找不到任何参考。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:38:53.567

我不知道您是否已经尝试过使用侦听器，但我会这样做（在商店中）：

```
listeners: {
    load: function(){
        if(!this.isFiltered())
        {
            //<add actions to disable the button>
        }
    }
} 
```

# c - C 中的守护进程 - 有没有办法实现它们？

> ID：15025029
> 
> 赞同：4
> 
> 时间：2013-02-22T13:09:48.690
> 
> 标签：c, linux, unix, daemon

我有一个关于 C 中守护进程的一般问题，我现在还没有看到答案。

有没有一种方法应该如何实现对守护进程的控制，比如约定或标准？

--休息是进一步的解释--

我已经看到多个文档教授了如何在 C 中创建守护进程的基础知识。分叉、关闭文件描述符、更改根目录等......没问题。当进程进入无限循环时（当创建守护进程时 - 可以这么说），它们都会停止。但这只是编写守护程序的一半。你必须以*某种方式*控制它。我可以让它以不同的方式工作，但我觉得它还有很多。

为此（检查是否有进程已经在运行或停止正在运行的守护进程，或者......）我已经看到了不同的方法（UNIX 套接字、文件锁、pid 文件......），它们各有优缺点。但在我看来，这像是意见或个人口味。“你为什么不只是……？” 或“我已经这样做了，它对我有用”。我不确定这是否是自由的标志。

我的意思是，如果您查看 sshd、httpd、syslogd 等……它们都可以通过 init-scripts 或服务命令（开始|停止|状态）进行控制。这看起来像一个标准。但这只是很多人试图遵循的一些松散的约定，还是在 C 函数的深海中存在某种“框架”？*您是否必须以某种方式*使其工作- 例如让您的程序响应“停止”参数并*以某种方式*结束守护进程？或者是否有某种标准、约定、UNIX 方式、最佳实践……编写“好的、干净的代码”并在大多数环境中很好地集成？

我的主要问题归结为：有没有办法做到这一点？

如果是这样，我在哪里可以找到更多信息？我想还有更多需要注意的事情，而不仅仅是启动和停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:48:13.550

正如您已经注意到的，没有标准，但有一个*事实上的标准。*

我建议您采用其中一个示例，例如 Apache，并研究 apachectl 的作用。您会发现它基于从文件中读取的 PID 向守护程序发送信号。

对于 Apache，信号是有意义的，因为您不希望某种 HTTP 请求能够停止服务器。对于 DBMS，您可能希望响应传入命令以停止服务器，前提是您首先进行身份验证和授权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:08:59.313

您可以使用信号，或者守护程序可以创建一个 unix 套接字（具有适当的权限）并侦听 in 上的数据。这取决于您需要对程序实施多少控制。

请记住，对于低流量的事情，可以方便地使用 xinetd 并让它分叉和处理连接，然后响应请求。

# wpf - wpf 按钮图像运行时不可见

> ID：15025033
> 
> 赞同：0
> 
> 时间：2013-02-22T13:10:01.030
> 
> 标签：wpf

无法弄清楚为什么在运行时按钮上的图像不可见。同时在设计模式下看起来不错。还尝试删除拉伸，设置图像的高度和宽度，将图像更改为 jpg/png，将源更改为“项目名称，组件” ![在此处输入图像描述](../Images/db22db70f79270516a07770d013206ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:17:52.823

将图像添加到项目资源时，Visual Studio 将此类文件的 Build Action 设置为 None ...

1.  设置`Build Action`为`Resource`
2.  将源更改为`/Resources/filename.png`
3.  设置父对象的大小
4.  `Stretch`为图像设置

查看工作片段

```
<Button x:Name="BtName" Click="Bt_Click" Height="35" Width="35">
   <Image Source="/Resources/Button-Turn-Off-icon.png" Stretch="Fill" />
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:48:22.453

您需要将 Build Action 设置为 Resource，设置始终复制并将图像添加到 bin\debug（如果您正在使用它，则释放）文件。有时 VS 没有引入它，我不知道为什么，但我最近遇到了同样的问题。

# android - 使用 .NET WebService - 从 Android 中的 asmx WebService 解析数据数组

> ID：15025034
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:10:04.140
> 
> 标签：android, web-services, xml-parsing, asmx, android-parser

我有一个带有 asmx 扩​​展名的 .NET Web 服务。服务[http://www.web.com/SampleService/SampleService.asmx](http://www.web.com/SampleService/SampleService.asmx)有两个端点：

首先是[http://www.web.com/SampleService/SampleService.asmx/GetName](http://www.web.com/SampleService/SampleService.asmx/GetName) ，它以以下格式提供客户的名称： ![在此处输入图像描述](../Images/da85666ea4e1d33853445ff96d30fd11.png)

同样，第二个端点[http://www.web.com/SampleService/SampleService.asmx/GetTax](http://www.web.com/SampleService/SampleService.asmx/GetTax)也返回一些 XML 数据。

我想从链接[http://www.web.com/SampleService/SampleService.asmx解析这两个 xml 数据](http://www.web.com/SampleService/SampleService.asmx)

我已阅读[本](http://translate.google.com.ua/translate?hl=uk&sl=ru&tl=en&u=http://mobile-developer.ru/uncategorized/rabota-s-soap-web-servisami-v-android-prilozheniyax/)教程，该教程描述了如何在 Android 中使用`kSOAP2 - library`. 但在本教程中，他们解释了如何将数据传递到 Web 并进行一些添加操作。但我需要从上面给出的 asmx 链接解析 xml 数据，并将结果更新为`ListView`. 我怎样才能做到这一点？请有人帮我举一个完整的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:55:37.947

```
private static void parseResponse(InputStream is, SoapEnvelope envelope)
          throws Throwable {
        try {
          XmlPullParser xp = new KXmlParser();
          xp.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, true);                          

          xp.setInput(is, "UTF-8"); //UTF-8

          envelope.parse(xp);
        } catch (Throwable e) {           
            Log.e(LOG_TAG, "Error reading/parsing SOAP response", e);
            throw e;
        }
      } 
```

……

```
parseResponse(is, envelope);
Object bodyIn = envelope.bodyIn;            
        if (bodyIn instanceof SoapFault) {
            throw (SoapFault) bodyIn;
        } 
```

`is`您的网络请求的输入流在哪里。如果解析没问题，bodyIn 将包含`SoapObject`

# gcc - 针对共享库进行编译时会发生什么？

> ID：15025040
> 
> 赞同：4
> 
> 时间：2013-02-22T13:10:16.350
> 
> 标签：gcc, ld

我知道，当链接到静态库（即 libname.a）时，所用函数的二进制代码会从存档中取出并*插入*到应用程序二进制文件中。因此，静态库必须在编译时存在。

但是，对于共享库，我迷路了。不复制函数定义。那么**为什么需要在链接器命令行上提供共享库**呢？此外，**是否有不同的方法可以链接到共享库**，它们是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:00:40.620

共享库需要提供给链接器的命令行，以便对特定函数和这些函数所在文件的引用存储到可执行文件中。运行可执行文件时，首先加载动态链接器（`/lib/ld-linux.so`,`/libexec/ld-elf.so`等，取决于您的系统）并检查这些引用。一旦找到 lib 文件，它就会将它们（使用`mmap()`系统调用）映射到程序的地址空间。

您可以通过运行查看这些引用

```
objdump -T a.out 
```

或者

```
nm -D a.out 
```

对于 ELF 可执行文件，该`.interp`部分的存在意味着程序使用动态链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:51:12.637

有关显式动态链接加载器管理，请参见**dlopen**和**dlsym的手册页。**

# android - 将字符串写入 ByteArrayOutputStream 时出现 OutOfMemoryError

> ID：15025041
> 
> 赞同：0
> 
> 时间：2013-02-22T13:10:25.187
> 
> 标签：android, bytearray, bytearrayoutputstream

我有一个方法，我有一个字符串对象数组，我需要将其写入 ByteArrayOutputStream，稍后我将写入 ZipOutputStream。

这是我的代码。

```
// SAVE THE STRING AS A BYTE ARRAY IN MEMORY INSTEAD OF CREATING AND SAVING TO A NEW FILE
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            DataOutputStream byteOut = new DataOutputStream(baos);
            byte[] data;
            if (i == 1) {
                if (nodeStringArray != null) {
                    for (String s : nodeStringArray) {
                        byteOut.write(s.getBytes("UTF-8"));
                    }
                }
            } else {
                data = stringArray.get(i).getBytes("UTF-8");
                byteOut.write(data);
            }

            byteOut.close();
            byte[] input = baos.toByteArray();

            ZipEntry entry = new ZipEntry(fileName);
            entry.setSize(input.length);
            zos.putNextEntry(entry);
            zos.write(input);
            zos.closeEntry(); 
```

问题是，我只收到了关于它的崩溃报告，我得到了`OutOfMemoryError`一条在线信息`byteOut.write(s.getBytes("UTF-8"));`

任何人都知道这样做的更好方法，或者可以查看我是否做错了什么？

**主意**

我可以围绕问题放置一个 try catch 语句以及何时调用`byteOut.flush()`？

**提前致谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:18:11.483

您正在制作许多数据副本，这会导致内存不足。

`ZipOutputStream`您应该在第一个循环中直接写入您的内容。

```
ZipEntry entry = new ZipEntry(fileName);
zos.putNextEntry(entry);
for (String s : nodeStringArray) {
    zos.write(s.getBytes("UTF-8"));
}
zos.closeEntry(); 
```

# c# - c#：将具有接口的对象序列化为可读格式的属性

> ID：15025042
> 
> 赞同：1
> 
> 时间：2013-02-22T13:10:42.013
> 
> 标签：c#, serialization

我搜索了，但找不到令人满意的答案。我知道有类似的序列化器：DataContractJsonSerializer、JavaScriptSerializer 可以做到这一点。但是这些需要指定“KnownType”的奇怪要求，这在我的场景中是不可能的，因为我正在序列化的对象属于通用库，并且接口的实际实现可能来自客户端。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:16:21.710

[ServiceStack](https://github.com/ServiceStack/ServiceStack.Text)有一个 JSON 序列化程序，不需要指定已知类型：

```
var json = JsonSerializer.SerializeToString(myObj); 
```

或者使用扩展方法，您可以在任何对象上调用 ToJson：

```
var json = myObj.ToJson(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:38:11.347

`Json.Net`有方法`SerializeObject`。这将为您完成工作。

它的签名是：

```
public static string SerializeObject(object value); 
```

用法：

```
using Newtonsoft.Json;

...

string jsonData = JsonConvert.SerializeObject(obj); 
```

# lotus-domino - 避免 [?open] 用于带参数的 URL？

> ID：15025043
> 
> 赞同：1
> 
> 时间：2013-02-22T13:10:42.993
> 
> 标签：lotus-domino

我们有 Web 应用程序（没有 xPages 构建）。多年来，我们的 URL 确实存在令人讨厌的问题。Domino 需要为带有参数的页面添加 ?open。

域/页面？open¶m1=asd¶m2=qwe

有没有办法避免带有参数的 URL 中的 [?open/?opendocument] ？

简而言之，是否可以使此 URL 正常工作？
[http://www.e-conomic.com/accountingsoftware?parameter=123](http://www.e-conomic.com/accountingsoftware?parameter=123)
我们不希望在 URL 中打开：
[http ://www.e-conomic.com/accountingsoftware?open¶meter=123](http://www.e-conomic.com/accountingsoftware?open&parameter=123)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:32:46.947

AFAIK 可以在 Domino 目录中使用网站设置中的重定向。你可能需要在那里做一些实验，我不知道你到底要使用哪种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:12:43.257

我没有找到任何解决方案如何实现这一目标。但是我发现它可以由 DSAPI 处理，我为此创建了新主题。

[如何通过 DSAPI 管理 url](https://stackoverflow.com/questions/15114195/rewrite-url-using-dsapi)

# c# - Linq To Sql 嵌套表达式

> ID：15025047
> 
> 赞同：0
> 
> 时间：2013-02-22T13:11:03.577
> 
> 标签：c#, asp.net, linq

我正在使用这个表达式来获取所有产品：

```
Expression<Func<Product, ProductInCityDto>> GetAllProducts
{
    get
    {
        return product => new ProductInCityDto
        {
             ProductName = product.ProductName,
             CityName = product.Store.City.Name,
             CountryName = product.Store.City.Country.Name,
             ProductAvgPrice =  CalculateAvg(product)
             . 
             . 
             .  
        }
    }
} 
```

我正在使用函数 CalculateAvg 来计算产品的平均价格。计算是在单独的函数中，因为我在几个地方使用了这个代码。但是，这种方法会导致对数据库的多次调用。是否可以用 Linq 表达式替换函数 CalculateAvg，以便只调用一次数据库？

编辑：

函数 CalculateAvg 看起来像这样：

```
public static decimal CalculateAvg(object tempObj)
{
   Product obj = tempObj as Product; 
   return Convert.ToDecimal
          (obj.Sales.Where(n => n.type != 1)
                 .Average(n=>n.Price)
          );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:54:21.423

首先，我会将您的函数重构为扩展方法并删除转换以隔离一些可能性。请记住，您必须在静态类中放置扩展方法。

```
public static double CalculateAvg(this Product product)
{
   return product.Sales.Where(n => n.type != 1).Average(n=>n.Price);
} 
```

如果这仍然会导致多次往返，请发布您在分析器中看到的查询，以便我们可以处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:14:34.937

困难的部分不是转换为 Linq 表达式。困难的部分是表达式的调用。这很难。但最糟糕的是，它不是类型安全的，并且涉及类似于反射的东西。

真正的魔法部分是 IQueryable.Provider.Execute(Expression)..

你当然可以试试这个......但它绝不是经过测试的。更不用说，非常丑陋。

```
Expression<Func<Product, ProductInCityDto>> GetAllProducts
{
    get
    {
        return product => new ProductInCityDto
        {
             ProductName = product.ProductName,
             CityName = product.Store.City.Name,
             CountryName = product.Store.City.Country.Name,
             //Bit of a hack to coerce the Provider out...
             ProductAvgPrice = product.Sales
                    .AsQueryable.Provider
                    .Execute<double>(CalculateAvg(product), Expression.Constant(product, typeof (Product)) ),
             . 
             . 
             .  
        }
    }
}

public Expression<Func<Product, double>> CalculateAvg()
{
    return product => product.Sales.Where(n => n.type != 1).Average(n=>n.Price);
} 
```

# ruby - Fog VSphere 提供程序 vm_clone 请求无法使用文件夹中的数据存储

> ID：15025054
> 
> 赞同：1
> 
> 时间：2013-02-22T13:11:10.027
> 
> 标签：ruby, fog, vsphere

以下代码效果很好，但仅当指定的数据存储位于数据中心的根目录中时。我们将数据存储区组织在与其关联的集群同名的文件夹中。尝试将路径放入（例如 dc_name/ds_name），但效果不佳。

```
server=connection.vm_clone( 'datacenter'    => 'EWL', 
            'template_path' => '.Templates/RHEL 6.2 x64',
            'name'      => 'new_vm_name',
            'datastore'     => 'E2-CL01-T2-OS-015',
            'dest_folder'   => 'Self-Service',
            'transform' => 'sparse',
            'power_on'  => false ) 
```

有什么线索吗？

# sql-server - 连接字符串中的“服务器”与“数据源”

> ID：15025055
> 
> 赞同：137
> 
> 时间：2013-02-22T13:11:14.123
> 
> 标签：sql-server, connection-string, sqldatasource, localdb

我是 SqlServer 的新手，现在我已经`SqlLocalDb`安装在本地工作。很好，但我通常可以看到两个连接字符串，并且两者都有效：

```
Data Source=(localdb)\v11.0;Integrated Security=true; 
```

和

```
Server=(localdb)\v11.0;Integrated Security=true; 
```

两者之间有什么确切区别？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-02-22T13:48:33.347

有关所有连接字符串关键字的完整列表，包括完全同义的关键字，请参阅[`SqlConnection.ConnectionString`文档](http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)：

这些都是完全等价的：

> *   数据源
> *   服务器
> *   地址
> *   地址
> *   网络地址

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-22T13:23:35.287

> ...服务器和数据源之间没有区别，因为它们代表 SQL Server 相同的东西：SQL Server 实例的全名，语法为 "MyComputerName\MyShortInstanceName" ，可能包括 SQL Server 实例使用的端口交流。

参考：[http ://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/7e3cd9b2-4eed-4103-a07a-5ca2cd33bd21](http://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/7e3cd9b2-4eed-4103-a07a-5ca2cd33bd21)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-22T13:12:38.347

它们是同义词 - 您可以使用其中任何一个。

也就是说 - 就框架而言，它们是相同的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-23T19:56:05.347

我最喜欢的设置是不包含任何空格的设置。在最简单的形式中，必须提供四个值 - URL、容器、用户和凭证。

*   服务器
*   数据库
*   uid
*   密码

所以连接字符串看起来像这样。

> 服务器=stuffy.databases.net;数据库=stuffy;uid=konrad;pwd=Abc123(!);

# r - 循环计算每月降雨量

> ID：15025060
> 
> 赞同：0
> 
> 时间：2013-02-22T12:26:00.353
> 
> 标签：r, time-series, interpolation

在 GRASS GIS 中，我可以访问 PostgreSQL 数据库中具有以下结构的表：

表名：`rainfall_time_serie`s

列：`id | year | month | day | value_mm | x | y | gauge_code`

将 g.region（GRASS 命令）设置为分水岭限制，我需要为每个月创建一个插值栅格，代表降雨量。这个时间序列非常庞大，有 17 年，我的问题是：是否可以通过循环执行此操作？使用带有计数器的 SQL“GROUP BY”子句可能更容易，但我是 R 中的新手。

提前致谢

# c# - 一个进程通过文件系统等待另一个进程的输出

> ID：15025062
> 
> 赞同：2
> 
> 时间：2013-02-22T13:11:30.830
> 
> 标签：c#, c#-4.0

我有一个进程 A 读取由其他进程 B 生成的一些数据。数据通过文件系统“交换”。为确保文件存在，进程 A 当前检查文件是否存在，如下所示：

```
while (!File.Exists(FileLocation))
{
    Thread.Sleep(100);
} 
```

这似乎只有 99% 的时间有效。另外 1% 的时间，进程 A 确定文件存在，但进程 B 尚未写入所有内容（即丢失了一些数据）。

是否有另一种更简单的方法可以使上述情况更加防弹？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:14:11.037

> 是否有另一种更简单的方法可以使上述情况更加防弹？

您可以使用 a[`Mutex`](http://www.albahari.com/threading/part2.aspx#_Mutex)进行可靠的进程间同步。另一种可能性是使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T13:15:54.280

确定文件存在后，您可以尝试以独占方式打开文件，如果另一个进程仍然打开该文件，则会失败：

```
try
{
   File.Open("foo",FileMode.Open,FileAccess.Read,FileShare.None);
}
catch(IOException ex)
{
   // go back to 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:46:01.510

鉴于您说您可以更改两个进程的代码，您可以使用 EventWaitHandle 在进程之间进行通信。

在创建文件的程序中，在 Main() 方法中，您可以创建一个 EventWaitHandle 并保留它直到程序结束。您需要在程序中传递 EventWaitHandle 对象，以便它可用于创建文件的代码位（或提供一些方法，文件创建代码可以调用以设置事件）。

```
using (EventWaitHandle readySignaller = new EventWaitHandle(false, EventResetMode.ManualReset, "MySignalName"))
{
    // Rest of program goes here...
    // When your program creates the file, do this:

    readySignaller.Set();
} 
```

然后在等待文件的程序中有一些这样的代码：

```
// Returns true if the wait was successful.
// Once this has returned true, it will return false until the file is created again.

public static bool WaitForFileToBeCreated(int timeoutMilliseconds) // Pass Timeout.Infinite to wait infinitely.
{
    using (EventWaitHandle readySignaller = new EventWaitHandle(false, EventResetMode.ManualReset, "MySignalName"))
    {
        bool result = readySignaller.WaitOne(timeoutMilliseconds);

        if (result)
        {
            readySignaller.Reset();
        }

        return result;
    }
} 
```

注意：如果我们成功等待，请注意我正在重置信号，它将保持重置，直到其他进程再次设置它。如果需要，您可以以不同的方式处理逻辑；这只是一个例子。

本质上，我们（逻辑上）在这里所做的是在两个进程之间共享一个布尔值。您必须小心设置和重置该共享布尔值的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:16:27.507

试试[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。

> 侦听文件系统更改通知并在目录或目录中的文件更改时引发事件。

# perl - 拆分功能

> ID：15025063
> 
> 赞同：0
> 
> 时间：2013-02-22T13:11:37.950
> 
> 标签：perl

我想得到拆分字符。我尝试了以下编码，但我只能获取拆分后的文本。但是，如果拆分字符相同，则应将其作为单个字符返回。例如，如果字符串为“asa,agas,asa”，则应仅返回 , 。所以在下面的情况下，我应该得到“| : ;” （与空格连接）

```
use strict;
use warnings;

my $str = "Welcome|a:g;v";
my @value = split /[,;:.%|]/, $str;

foreach my $final (@value) {
    print $final, "\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:18:36.977

`split`*当给定分隔*这些元素的元素时，将字符串拆分为元素，因此`split`不是您想要的。相反，使用：

```
my @punctuations = $str =~ /([,;:.%|])/g; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:16:43.717

所以你想得到分裂的反面

尝试：

```
my @value=split /[^,;:.%|]+/,$str; 
```

除了您设置的分隔符**之外**，它将拆分任何内容。

commnets之后的更正：

```
my @value=split /[^,;:.%|]+/,$str;
shift @value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:35:46.623

这很好用，并给出了独特的答案

```
@value = ();
foreach(split('',",;:.%|")) { push @value,$_ if $str=~/$_/; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T20:26:07.073

要仅提取一次所有分隔符，您需要更精细的东西

```
my @punctuations = keys %{{ map { $_ => 1 } $str =~ /[,;:.%|]/g }}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T02:09:09.903

听起来您将我们其他人称为“分隔符”的“拆分字符”称为“分隔符”——如果是这样，POSIX 字符类[`[:punct:]`](http://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes)可能会被证明是有价值的。

OTOH，如果您有一个已定义的分隔符列表，并且您要做的就是列出字符串中存在的分隔符，那么使用`m//`它比使用`split`.

# android - 如何处理电源按钮（Android）

> ID：15025066
> 
> 赞同：3
> 
> 时间：2013-02-22T13:11:52.823
> 
> 标签：android, andengine

我是一个使用andengine 的开发游戏。当我按下电源按钮时，`onPause()`没有调用该方法。我该如何解决这个问题？

```
 @Override
protected void onPause() {      
    //this method is not calling when press power button 
    super.onPause(); 
    this.mEngine.onPause() ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:25:40.220

奇怪，没听说过**不**叫。让我研究一下。

好的，按电源应该**总是**调用`onPause()`，您的代码中似乎存在某种错误。您能否添加一些日志调用以遵循每个步骤。并打印 DDMS 日志。

**其他可能的问题：**

`onPause()`按下电源按钮时，似乎某些设备行为异常并调用了两次。

在这种情况下，请尝试使用 powerManager 来查看屏幕是否实际关闭。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
if (pm.isScreenOn()) {
   //now do stuff
} 
```

Maybe`onPause()`被调用但`onCreate()`在之后被调用？

关闭设备时，会显示锁定屏幕。这通常会强制显示器到特定的方向。如果屏幕当前不在该方向，则需要对其进行更改，并适当更改顶部活动的配置以匹配。

您可以像这样添加配置更改：

```
android:configChanges="keyboardHidden|orientation" android:configChanges="keyboardHidden|screensize" 
```

以确保不会发生这种情况。

# powermock - final Runnable refreshTicker = new Runnable() { public void run() { initialize();}; 初始化（）; } };

> ID：15025067
> 
> 赞同：1
> 
> 时间：2013-02-22T13:11:54.770
> 
> 标签：powermock

How to mock Runnable here using PowerMock .... 这里 initialize () 调用了另外两个方法。你能澄清一下如何做到这一点吗？搜索了将近2天..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T11:07:20.237

请尝试以下步骤：

1.  在测试用例的类级别使用 @RunWith(PowerMockRunner.class) 注释。
2.  在测试用例的类级别使用 @PrepareForTest(ClassThatCreatesTheNewInstance.class) 注释。
3.  使用 PowerMock.createMock(NewInstanceClass.class) 创建应该构造的类的模拟对象（我们称之为 mockObject）。
4.  使用 PowerMock.expectNew(NewInstanceClass.class).andReturn(mockObject) 来预期 NewInstanceClass.class 类型的对象的新构造，而是返回模拟对象。
5.  使用 PowerMock.replay(mockObject, NewInstanceClass.class) 将模拟对象和类更改为重播模式，或者使用 PowerMock.replayAll() 方法。
6.  使用 PowerMock.verify(mockObject, NewInstanceClass.class) 将模拟对象和类更改为验证模式，或者使用 PowerMock.verifyAll() 方法。

参考： [https ://code.google.com/p/powermock/wiki/MockConstructor](https://code.google.com/p/powermock/wiki/MockConstructor)

# java - java中的许多SQL选择查询可能找不到

> ID：15025074
> 
> 赞同：0
> 
> 时间：2013-02-22T13:12:10.110
> 
> 标签：java, mysql, sql

我目前遇到了一个使用许多 sql select 的应用程序的性能问题。

编程语言是java，我使用的是mysql数据库。它包含大约 1000 万条记录。它需要做的是在数据库中查找以邮政编码和门牌号为参数的记录。当它没有找到记录时，它需要只用邮政编码进行查询，并获取门牌号最低的记录。当在数据库中找不到邮政编码时，应用程序需要处理这个问题。

因此，执行单个查询的代码如下所示：

```
Statement select = "select * from zipcode_addresses where zipcode = ? and houseNo =?";
ResultSet rs = select.executeQuery();
if(rs.next()) {
    dealWithResult(rs);
}
else {
    Statement alternativeSelect = "select * from zipcode_addresses where zipcode = ? group by houseNo having min(houseNo)";
    ResultSet rs = alternativeSelect.executeQuery();
    if(rs.next()) {
        dealWithResult(rs);
    } else {
        System.err.println("Could not find zipcode :" + zipcode);
    }
} 
```

是否有适当的方法来处理未找到的数据的批量选择查询？

谢谢！

**更新**

表结构如下：

```
+-----------------+-------------+------+-----+---------+-------+  
| Field           | Type        | Null | Key | Default | Extra |   
+-----------------+-------------+------+-----+---------+-------+   
| zipcode         | varchar(6)  | NO   | PRI | NULL    |       |   
| house_no        | int(11)     | NO   | PRI | NULL    |       |   
| sanddcode       | varchar(45) | NO   |     | NULL    |       |   
| depot           | varchar(3)  | NO   |     | NULL    |       |   
| network_point   | varchar(6)  | NO   |     | NULL    |       |   
| region          | varchar(3)  | NO   |     | NULL    |       |   
| seq             | int(11)     | NO   |     | NULL    |       |   
| cluster_id      | varchar(1)  | NO   |     | NULL    |       |   
| strand_id       | int(11)     | NO   |     | NULL    |       |   
| strand_props_id | int(11)     | NO   |     | NULL    |       |   
| version_id      | int(11)     | NO   | PRI | NULL    |       |   
+-----------------+-------------+------+-----+---------+-------+ 
```

版本 id、zipcode 和 house_no 上的主键 zipcode 和 house_no 上的索引以及 zipcode 上的另一个索引，两者都使用 BTREE 索引。

该应用程序有时可能会用于执行 100 万个不同的选择查询，此时它需要的时间太长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:27:13.273

您的代码片段没有显示您的语句是如何准备的。如果您的语句被多次调用，那么您应该查看 PreparedStatement 对象：

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

然后可以缓存您的语句以减少未来的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:28:40.703

**您的第二个 SQL 查询中的“分组依据”是不必要的，并且会降低性能**。为了获得最佳性能，请替换此选择（代码中的第二个）...

```
select * from zipcode_addresses where zipcode = ? 
  group by houseNo having min(houseNo) 
```

有了这个 ...

```
select min(houseNo) from zipcode_addresses where zipcode = ? 
```

此外，请确保您有一个关于 zipcode + houseNo 的索引（看起来你有 - 来自更新的帖子）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:21:45.260

您可以创建一个带有两个参数的存储过程，并使用门牌号作为可选参数，或者只是让该过程查找是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:22:23.593

很大程度上取决于使用模式。您运行了多少查询，邮政编码缺失的频率等。首先，我会在可能的情况下使用 PreparedStatements。我对 MySQL 不太熟悉，但它们通常被连接数据库缓存和重用，这将有助于提高性能。接下来，如果邮政编码丢失很常见，我可能会在内存中构建邮政编码缓存，以缩短对未命中的 3 次查询。之后，我可能会创建一个 ZIP + 门牌号的视图。更进一步取决于您的应用程序如何工作，但这些事情会有所帮助。

# asp.net - 模型状态.清除（）；不管用？

> ID：15025081
> 
> 赞同：1
> 
> 时间：2013-02-22T13:12:42.787
> 
> 标签：asp.net, asp.net-mvc-4

为什么我没有清除表格？模型状态.清除（）；是不行的！以更新的形式再次发送数据。尝试了许多不同的解决方案，但都是徒劳的，所以希望在这里找到解决这个问题的方法。请帮帮我！“控制器”

```
 public ActionResult Yandex()
            {
                ViewData["sucsess"]=" ";
                return View();
            }
            [HttpPost]
            public ActionResult Yandex(LoginModel model)
            {

                if (model.option1)
                {
                    md.Modules_Update(1,1);
                    ViewData["sucsess"] = "• Дані успішно збережені!";
                }
                else
                {
                    md.Modules_Update(1, 0);
                    ViewData["sucsess"] = "• Дані успішно збережені!";
                }
                ModelState.Clear();
                return View( );
            } 
```

“看法”

```
 @using (Html.BeginForm())
    {
        Settings exit = new Settings();
        <span class="property">Модуль включений: </span>
        <span class="property">Так</span>
        if (exit.Modules(1).ToString() == "1")
        {
        @Html.RadioButtonFor(m => m.option1, true, new { @checked = "checked", id = "1", @class="radio" })
        }
        else
        {
        @Html.RadioButtonFor(m => m.option1, true, new { id = "1",  @class="radio" })
        }
        <span class="property">Ні</span>
        if (exit.Modules(1).ToString() == "0")
        {
        @Html.RadioButtonFor(m => m.option1, false, new { @checked = "checked", id = "0",  @class="radio" })
        }
        else
        {
        @Html.RadioButtonFor(m => m.option1, false, new { id = "0",  @class="radio" })
        }
        <input type="submit" value="Зберегти" class="save"  />
    }
    <span class="property_col">@ViewData["sucsess"]</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:17:06.177

POST 请求中仍然存在值。执行此操作的正确方法是重定向到您的 GET 操作：

```
[HttpPost]
public ActionResult Yandex(LoginModel model)
{
    if (model.option1)
    {
        md.Modules_Update(1,1);
        TempData["sucsess"] = "• Дані успішно збережені!";
    }
    else
    {
        md.Modules_Update(1, 0);
        TempData["sucsess"] = "• Дані успішно збережені!";
    }

    return RedirectToAction("Yandex");
} 
```

另请注意，我在重定向期间使用了 TempData 来传输消息。因此，您可能需要相应地调整您的视图：

```
<span class="property_col">@TempData["sucsess"]</span> 
```

# c++ - 从 std:: 向量中删除项目

> ID：15025083
> 
> 赞同：1
> 
> 时间：2013-02-22T13:12:52.007
> 
> 标签：c++, stdvector

在下面的第一个代码片段中，我试图根据输入 std::remove 函数的静态条件函数从成员函数内的向量中删除一个元素。然后我得到了第二个片段中显示的大量模板错误。你能告诉我我错过了什么吗？

**片段 1（代码）**

```
void removeVipAddress(std::string &uuid)
{
          struct RemoveCond
          {
            static bool condition(const VipAddressEntity & o)
            {
              return o.getUUID() == uuid;
            }
          };

          std::vector<VipAddressEntity>::iterator last =
            std::remove(
                    mVipAddressList.begin(),
                    mVipAddressList.end(),
                    RemoveCond::condition);

          mVipAddressList.erase(last, mVipAddressList.end());

} 
```

**片段 2**（编译输出）

```
 /usr/include/c++/4.7/bits/random.h:4845:5: note: template<class _IntType> bool      std::operator==(const std::discrete_distribution<_IntType>&, const   std::discrete_distribution<_IntType>&)
 /usr/include/c++/4.7/bits/random.h:4845:5: note:   template argument deduction/substitution failed:
 In file included from /usr/include/c++/4.7/algorithm:63:0,
             from Entity.hpp:12:
 /usr/include/c++/4.7/bits/stl_algo.h:174:4: note:   ‘ECLBCP::VipAddressEntity’ is not  derived from ‘const std::discrete_distribution<_IntType>’
 In file included from /usr/include/c++/4.7/random:50:0,
               from /usr/include/c++/4.7/bits/stl_algo.h:67,
               from /usr/include/c++/4.7/algorithm:63,
               from Entity.hpp:12:
 /usr/include/c++/4.7/bits/random.h:4613:5: note: template<class _RealType> bool  std::operator==(const std::extreme_value_distribution<_RealType>&, const  std::extreme_value_distribution<_RealType>&)
 /usr/include/c++/4.7/bits/random.h:4613:5: note:   template argument deduction/substitution failed:
 In file included from /usr/include/c++/4.7/algorithm:63:0,
             from Entity.hpp:12:
 /usr/include/c++/4.7/bits/stl_algo.h:174:4: note:   ‘ECLBCP::VipAddressEntity’ is not  derived from ‘const std::extreme_value_distribution<_RealType>’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:14:47.027

我猜你在找`std::remove_if()`，不是`std::remove()`。

`std::remove_if()`接受一个谓词作为它的第三个参数，并删除满足该谓词的元素。

`std::remove()`将一个值作为第三个参数，并删除等于该值的元素。

**编辑**

为了使这个工作，你还必须将你的`RemoveCond`定义变成一个谓词对象，因为它需要状态。像这样：

```
void removeVipAddress(std::string &uuid)
{
      struct RemoveCond : public std::unary_function<VipAddressEntity, bool>
      {
        std::string uuid;

        RemoveCond(const std::string &uuid) : uuid(uuid) {}

        bool operator() (const VipAddressEntity & o)
        {
          return o.getUUID() == uuid;
        }
      };

      std::vector<VipAddressEntity>::iterator last =
        std::remove(
                mVipAddressList.begin(),
                mVipAddressList.end(),
                RemoveCond(uuid));

      mVipAddressList.erase(last, mVipAddressList.end());

} 
```

# jquery - 使用 jquery 加载内容后避免滚动到顶部

> ID：15025087
> 
> 赞同：0
> 
> 时间：2013-02-22T13:13:15.873
> 
> 标签：jquery, load

我有这段代码可以模拟标签。它运行良好，但每次我加载页面时单击“abas”div 中的链接，页面都会滚动回顶部。我的 while 解决方案（丑陋）是在加载后调用一个函数以将页面滚动到锚点“abas”。这里发生了什么？

这是代码：

```
<ul id="abas">
<li><a href="buscapage.php">Busca por práticas</a></li>
<li><a href="catpage.php" class="off">Categorias</a></li>
</ul>

$('#abas a').click(function(event) {        
  var $loader = '<img src="img/interface/loader.gif" class="loader" alt="" />',
  $pagina = $(this).attr('href');
  $('#get').html($loader).load($pagina, function(){
    $('html,body').animate({scrollTop: $('#abas').offset().top},'slow'); //solution =(
  });
  event.preventDefault(); //prevent does not avoid this to happen  
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:18:12.403

我相信在点击事件函数结束时您需要做的就是返回 false。非常类似于您订阅超链接或按钮上的点击事件，并希望处理事件中的所有执行，因此，一旦您的代码完成，不要让浏览器接管并执行点击本身。

# c# - C# MSChart：即使使用负值也可以在 0 处绘制轴线

> ID：15025089
> 
> 赞同：2
> 
> 时间：2013-02-22T13:13:19.583
> 
> 标签：c#, charts, mschart, bar-chart

使用 XML 文件中的数据（数据可能并不总是相同，请记住这一点）绘制损益图，并使用 MSChart 库，我目前获得了两个条形图，一个用于正值，另一个用于对于负值。将这两个系列组合在一个 ChartArea 中，我目前获得的图表如下所示：

[http://i.imgur.com/K3BHXnS.png](http://i.imgur.com/K3BHXnS.png)

但是，这仍然不是我想要的。我希望 Y 轴的“中”线（图中 5.4 的位置）为“0”。但是，我检查过的每种方法都只能在没有负值的情况下执行此操作，这就是为什么它在我的情况下不起作用的原因。使用“Crossing”属性也是不正确的，因为它在我希望我的标签使用“0”作为“基础”的地方画了一条额外的线，如果你愿意的话。换句话说，我希望我的图表看起来像这样：

[http://i.imgur.com/k2WVGck.png](http://i.imgur.com/k2WVGck.png)

一旦我知道如何显示 0 线，我将能够处理标签的不规则值，这就是为什么知道这一点对我来说很重要。我将非常感谢您能给我的任何帮助，因为我自己的研究到目前为止还没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:44:02.730

确保让控件决定最佳`Min`和`Max`Y 轴。所以**不**要这样做：

```
chart1.ChartAreas[0].AxisY.Maximum = mymax;
chart1.ChartAreas[0].AxisY.Minimum = mymin; 
```

![在此处输入图像描述](../Images/b90523f63a4e6da856411cb0e1b53c37.png) 相反，请确保您`auto`使用以下方式设置模式：

```
chart1.ChartAreas[0].AxisY.Maximum = double.NaN;
chart1.ChartAreas[0].AxisY.Minimum = double.NaN; 
```

![在此处输入图像描述](../Images/c076ee70c18bf97e4468cbe373ce3034.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T21:49:00.143

另一种方法是为您的 Y 轴设置一个间隔。

chart1.ChartAreas["ChartArea1"].AxisY.Interval = 25;

# spring - 绕过弹簧安全

> ID：15025091
> 
> 赞同：0
> 
> 时间：2013-02-22T13:13:20.623
> 
> 标签：spring, spring-security

我有一个网络服务，我希望每个人都能访问这个服务。

在 web.xml 中

```
<filter>
    <filter-name>springSecurityFilterChainRendering</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>
    <filter-mapping>
           <filter-name>springSecurityFilterChainRemoting</filter-name>
           <url-pattern>/cxf/*</url-pattern>
    </filter-mapping> 
```

在过滤器链远程处理.xml

```
 <bean id="springSecurityFilterChainRemoting" class="org.springframework.security.util.FilterChainProxy">
    <security:filter-chain-map path-type="ant">
        <!-- Remoting: stateful WebServices; 
            httpSessionContextIntegrationFilter creates SecurityContext 
            and populates it with information obtained from the HttpSession. 
            contextFilter supplies context with 
            the current project for the current HTTP user session; 
            securityFilter authenticates the user. -->

         <security:filter-chain pattern="/cxf/KioskService/**"
            filters="none"/>

        <security:filter-chain pattern="/cxf/**"
            filters="httpSessionContextIntegrationFilter, contextFilter,securityFilter"/>

    </security:filter-chain-map>
</bean> 
```

我怎么能绕过这些过滤器，每个人都使用这个服务。服务名称 KioskService

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:33:38.000

更改 web.xml 过滤器映射定义：

```
<url-pattern>/cxf/*</url-pattern> 
```

仅拦截您希望安全的网址。

# java - 带圆角和透明度的边框

> ID：15025092
> 
> 赞同：32
> 
> 时间：2013-02-22T13:13:30.633
> 
> 标签：java, swing, awt, border, transparency

以下屏幕截图显示了`TextBubbleBorder`¹的测试。我想让矩形外部的组件的角完全透明并显示它下面的任何组件。我找到了一种方法，通过在实例上设置 a `Clip`（表示圆角外的区域）`Graphics2D`并调用`clearRect()`. 这可以在`Label 1`.

![边界测试](../Images/d73aa71f48408404502d4da3a0003aa7.png)

但是，当父面板上有红色 BG（或任何非标准颜色）时，您可以看到这种方法的缺点。角落默认为默认面板颜色（在 中最容易看到`Panel 2`）。

最终我希望这适用于父容器中的非标准颜色，但它的部分灵感来自于[我需要做什么来复制这个带有渐变色的组件？](https://stackoverflow.com/q/14898497/418556)

有人知道让这些角落透明的方法吗？

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import javax.swing.border.*;

public class BorderTest {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(1,0,5,5));
                gui.setBorder(new EmptyBorder(10,10,10,10));
                gui.setBackground(Color.RED);

                AbstractBorder brdr = new TextBubbleBorder(Color.BLACK,2,16,0);

                JLabel l1 = new JLabel("Label 1");
                l1.setBorder(brdr);
                gui.add(l1);

                JLabel l2 = new JLabel("Label 2");
                l2.setBorder(brdr);
                l2.setBackground(Color.YELLOW);
                l2.setOpaque(true);
                gui.add(l2);

                JPanel p1 = new JPanel();
                p1.add(new JLabel("Panel 1"));
                p1.setBorder(brdr);
                p1.setOpaque(false);
                gui.add(p1);

                JPanel p2 = new JPanel();
                p2.add(new JLabel("Panel 2"));
                p2.setBorder(brdr);
                gui.add(p2);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }

}

class TextBubbleBorder extends AbstractBorder {

    private Color color;
    private int thickness = 4;
    private int radii = 8;
    private int pointerSize = 7;
    private Insets insets = null;
    private BasicStroke stroke = null;
    private int strokePad;
    private int pointerPad = 4;
    RenderingHints hints;

    TextBubbleBorder(
            Color color) {
        new TextBubbleBorder(color, 4, 8, 7);
    }

    TextBubbleBorder(
            Color color, int thickness, int radii, int pointerSize) {
        this.thickness = thickness;
        this.radii = radii;
        this.pointerSize = pointerSize;
        this.color = color;

        stroke = new BasicStroke(thickness);
        strokePad = thickness / 2;

        hints = new RenderingHints(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        int pad = radii + strokePad;
        int bottomPad = pad + pointerSize + strokePad;
        insets = new Insets(pad, pad, bottomPad, pad);
    }

    @Override
    public Insets getBorderInsets(Component c) {
        return insets;
    }

    @Override
    public Insets getBorderInsets(Component c, Insets insets) {
        return getBorderInsets(c);
    }

    @Override
    public void paintBorder(
            Component c,
            Graphics g,
            int x, int y,
            int width, int height) {

        Graphics2D g2 = (Graphics2D) g;

        int bottomLineY = height - thickness - pointerSize;

        RoundRectangle2D.Double bubble = new RoundRectangle2D.Double(
                0 + strokePad,
                0 + strokePad,
                width - thickness,
                bottomLineY,
                radii,
                radii);

        Polygon pointer = new Polygon();

        // left point
        pointer.addPoint(
                strokePad + radii + pointerPad,
                bottomLineY);
        // right point
        pointer.addPoint(
                strokePad + radii + pointerPad + pointerSize,
                bottomLineY);
        // bottom point
        pointer.addPoint(
                strokePad + radii + pointerPad + (pointerSize / 2),
                height - strokePad);

        Area area = new Area(bubble);
        area.add(new Area(pointer));

        g2.setRenderingHints(hints);

        Area spareSpace = new Area(new Rectangle(0, 0, width, height));
        spareSpace.subtract(area);
        g2.setClip(spareSpace);
        g2.clearRect(0, 0, width, height);
        g2.setClip(null);

        g2.setColor(color);
        g2.setStroke(stroke);
        g2.draw(area);
    }
} 
```

1.  虽然是为[带有背景图像的 JTextArea 的内部填充](https://stackoverflow.com/q/8462414/418556)`TextBubbleBorder`设计的（由于上述原因，文本区域一团糟，因此最终使用了 a ），但通过将 a 指定为 0，我们最终得到了一个“圆角矩形”。 `JLabel``pointerSize`

    ![](../Images/49a61ca3ed27f9b299bb7d4cc2f5135a.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-06-04T04:46:47.953

注意此代码中存在一个剪切错误，该错误已在[paintComponent() is drawing on other components](https://stackoverflow.com/q/35190710/418556)的公认答案中得到修复。仅当合并了“剪辑错误修复”时，才应将其视为解决方案。

* * *

```
// Paint the BG color of the parent, everywhere outside the clip
// of the text bubble. 
```

请参阅代码中的这一点，以获取正确显示为的源代码：

![带有 0px 语音指针的 BorderTest](../Images/7d7f1a3f4d8d53e0a8c6c87bcc7e3677.png)

![带有 16px 语音指针的 BorderTest](../Images/25c4e47417a6a813042215b08357ba1a.png)

```
import java.awt.*;
import java.awt.image.*;
import java.awt.geom.*;
import javax.swing.*;
import javax.swing.border.*;

public class BorderTest {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(2,0,5,5));
                gui.setBorder(new EmptyBorder(10,10,10,10));
                gui.setBackground(Color.RED);

                AbstractBorder brdrLeft = new TextBubbleBorder(Color.BLACK,2,16,16);
                AbstractBorder brdrRight = new TextBubbleBorder(Color.BLACK,2,16,16,false);

                JLabel l1 = new JLabel("Label 1");
                l1.setBorder(brdrRight);
                gui.add(l1);

                JLabel l2 = new JLabel("Label 2");
                l2.setBorder(brdrLeft);
                l2.setBackground(Color.YELLOW);
                l2.setOpaque(true);
                gui.add(l2);

                JPanel p1 = new JPanel();
                p1.add(new JLabel("Panel 1"));
                p1.setBorder(brdrRight);
                p1.setOpaque(false);
                gui.add(p1);

                JPanel p2 = new JPanel();
                p2.add(new JLabel("Panel 2"));
                p2.setBorder(brdrLeft);
                gui.add(p2);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }

}

class TextBubbleBorder extends AbstractBorder {

    private Color color;
    private int thickness = 4;
    private int radii = 8;
    private int pointerSize = 7;
    private Insets insets = null;
    private BasicStroke stroke = null;
    private int strokePad;
    private int pointerPad = 4;
    private boolean left = true;
    RenderingHints hints;

    TextBubbleBorder(
            Color color) {
        this(color, 4, 8, 7);
    }

    TextBubbleBorder(
            Color color, int thickness, int radii, int pointerSize) {
        this.thickness = thickness;
        this.radii = radii;
        this.pointerSize = pointerSize;
        this.color = color;

        stroke = new BasicStroke(thickness);
        strokePad = thickness / 2;

        hints = new RenderingHints(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        int pad = radii + strokePad;
        int bottomPad = pad + pointerSize + strokePad;
        insets = new Insets(pad, pad, bottomPad, pad);
    }

    TextBubbleBorder(
            Color color, int thickness, int radii, int pointerSize, boolean left) {
        this(color, thickness, radii, pointerSize);
        this.left = left;
    }

    @Override
    public Insets getBorderInsets(Component c) {
        return insets;
    }

    @Override
    public Insets getBorderInsets(Component c, Insets insets) {
        return getBorderInsets(c);
    }

    @Override
    public void paintBorder(
            Component c,
            Graphics g,
            int x, int y,
            int width, int height) {

        Graphics2D g2 = (Graphics2D) g;

        int bottomLineY = height - thickness - pointerSize;

        RoundRectangle2D.Double bubble = new RoundRectangle2D.Double(
                0 + strokePad,
                0 + strokePad,
                width - thickness,
                bottomLineY,
                radii,
                radii);

        Polygon pointer = new Polygon();

        if (left) {
            // left point
            pointer.addPoint(
                    strokePad + radii + pointerPad,
                    bottomLineY);
            // right point
            pointer.addPoint(
                    strokePad + radii + pointerPad + pointerSize,
                    bottomLineY);
            // bottom point
            pointer.addPoint(
                    strokePad + radii + pointerPad + (pointerSize / 2),
                    height - strokePad);
        } else {
            // left point
            pointer.addPoint(
                    width - (strokePad + radii + pointerPad),
                    bottomLineY);
            // right point
            pointer.addPoint(
                    width - (strokePad + radii + pointerPad + pointerSize),
                    bottomLineY);
            // bottom point
            pointer.addPoint(
                    width - (strokePad + radii + pointerPad + (pointerSize / 2)),
                    height - strokePad);
        }

        Area area = new Area(bubble);
        area.add(new Area(pointer));

        g2.setRenderingHints(hints);

        // Paint the BG color of the parent, everywhere outside the clip
        // of the text bubble.
        Component parent  = c.getParent();
        if (parent!=null) {
            Color bg = parent.getBackground();
            Rectangle rect = new Rectangle(0,0,width, height);
            Area borderRegion = new Area(rect);
            borderRegion.subtract(area);
            g2.setClip(borderRegion);
            g2.setColor(bg);
            g2.fillRect(0, 0, width, height);
            g2.setClip(null);
        }

        g2.setColor(color);
        g2.setStroke(stroke);
        g2.draw(area);
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-27T13:27:36.897

试试这个：

```
 JPanel p = new JPanel() {
     @Override
     protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Dimension arcs = new Dimension(15,15); //Border corners arcs {width,height}, change this to whatever you want
        int width = getWidth();
        int height = getHeight();
        Graphics2D graphics = (Graphics2D) g;
        graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        //Draws the rounded panel with borders.
        graphics.setColor(getBackground());
        graphics.fillRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height);//paint background
        graphics.setColor(getForeground());
        graphics.drawRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height);//paint border
     }
  }; 
```

通过我的测试：

```
 JFrame f = new JFrame();
  f.setLayout(null);
  f.setDefaultCloseOperation(3);
  f.setSize(500, 500);
  JPanel p = new JPanel() {
     @Override
     protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Dimension arcs = new Dimension(15,15);
        int width = getWidth();
        int height = getHeight();
        Graphics2D graphics = (Graphics2D) g;
        graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        //Draws the rounded opaque panel with borders.
        graphics.setColor(getBackground());
        graphics.fillRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height);//paint background
        graphics.setColor(getForeground());
        graphics.drawRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height);//paint border
     }
  };
  p.setBounds(10,10,100,30);
  p.setOpaque(false);
  f.getContentPane().setBackground(Color.red);
  f.add(p);
  f.show(); 
```

结果是：

![代码结果](../Images/941d6d79d6b5cba669eb7a71884ee4fa.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-30T17:19:49.573

谢谢@BackSlash，很好很简单。我对此进行了扩展，因此它更具可重用性。这也允许在构造函数中设置背景颜色。我展示了如何制作一个有趣的圆形面板。

[![在此处输入图像描述](../Images/b34ee15104eb6e4b3eb53543a63e7208.png)](https://i.stack.imgur.com/sb4k9.png)

```
import java.awt.*;
import javax.swing.*;

public class RoundedPanelExample extends JFrame
{
    public RoundedPanelExample()
    {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setTitle("Rounded Panel Example");
        setResizable(true);
        setDefaultLookAndFeelDecorated(true);
        setSize(500, 500);

        Container pane = getContentPane();
        pane.setLayout(null);
        pane.setBackground(Color.LIGHT_GRAY);

        JPanel p1 = new RoundedPanel(10, Color.CYAN);
        p1.setBounds(10,10,100,60);
        p1.setOpaque(false);
        pane.add(p1);

        JPanel p2 = new RoundedPanel(15, Color.RED);
        p2.setBounds(150,10,50,50);
        p2.setOpaque(false);
        pane.add(p2);

        JPanel p3 = new RoundedPanel(30);
        p3.setBounds(230,10,100,150);
        p3.setOpaque(false);
        pane.add(p3);

        JPanel p4 = new RoundedPanel(20);
        p4.setBounds(10,200,100,100);
        p4.setBackground(Color.GREEN);
        p4.setOpaque(false);
        pane.add(p4);

        JPanel p5 = new RoundedPanel(200);
        p5.setBounds(150,200,200,200);
        p5.setBackground(Color.BLUE);
        p5.setOpaque(false);
        pane.add(p5);
    }

    public static void main(String[] args) 
    {
        RoundedPanelExample gui = new RoundedPanelExample();
        gui.setVisible(true);
    }

    class RoundedPanel extends JPanel
    {
        private Color backgroundColor;
        private int cornerRadius = 15;

        public RoundedPanel(LayoutManager layout, int radius) {
            super(layout);
            cornerRadius = radius;
        }

        public RoundedPanel(LayoutManager layout, int radius, Color bgColor) {
            super(layout);
            cornerRadius = radius;
            backgroundColor = bgColor;
        }

        public RoundedPanel(int radius) {
            super();
            cornerRadius = radius;
        }

        public RoundedPanel(int radius, Color bgColor) {
            super();
            cornerRadius = radius;
            backgroundColor = bgColor;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Dimension arcs = new Dimension(cornerRadius, cornerRadius);
            int width = getWidth();
            int height = getHeight();
            Graphics2D graphics = (Graphics2D) g;
            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            //Draws the rounded panel with borders.
            if (backgroundColor != null) {
                graphics.setColor(backgroundColor);
            } else {
                graphics.setColor(getBackground());
            }
            graphics.fillRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height); //paint background
            graphics.setColor(getForeground());
            graphics.drawRoundRect(0, 0, width-1, height-1, arcs.width, arcs.height); //paint border
        }
    }
} 
```

# wpf - dxgrid 将单元格颜色绑定到字符串值

> ID：15025093
> 
> 赞同：0
> 
> 时间：2013-02-22T13:13:38.847
> 
> 标签：wpf, devexpress, mvvm-light

我有一个使用 mvvm light 工具包的 DXgrid，它显示来自 web 服务的对象列表。

对象的属性之一是颜色字段。我希望能够为该颜色的单元格着色。

我试过在单元格内画一个矩形，但没有运气

```
 <dxg:GridControl Grid.Row="1" AutoPopulateColumns="True" Height="412" Name="grdLicence" VerticalAlignment="Bottom"
                     ItemsSource="{Binding Model.Cars}" 
                     DesignTimeDataObjectType="{Binding Model.Cars}" Grid.RowSpan="2">

        <dxg:GridControl.Columns>

            <dxg:GridColumn FieldName="{Binding Path=Id}" DisplayMemberBinding="{Binding Path=Id}" Header="ID"/>
                            <dxg:GridColumn FieldName="{Binding Path=LicenseDate, StringFormat=\{0:dd/MM/yyyy\}}" DisplayMemberBinding="{Binding Path=LicenseDate, StringFormat=\{0:dd/MM/yyyy\}}" Header="Type" >
                <dxg:GridColumn.DisplayTemplate>
                    <ControlTemplate>
                        <Rectangle Height="20" Width="30">
                            <Rectangle.Fill>
                                <SolidColorBrush Color="{Binding Path=Colour}"></SolidColorBrush>
                            </Rectangle.Fill>

                        </Rectangle>

                    </ControlTemplate>
                </dxg:GridColumn.DisplayTemplate>
            </dxg:GridColumn>

            <dxg:GridColumn FieldName="{Binding Path=Province}" DisplayMemberBinding="{Binding Path=Province}" Header="Province" />

        </dxg:GridControl.Columns>

        <dxg:GridControl.View>
            <dxg:TableView Name="tableView1" AutoWidth="True" ShowSearchPanelMode="Always" SelectedRowsSource="{Binding Selection}" MultiSelectMode="Row" NavigationStyle="Row"   FocusedRow="{Binding SelectedItem, Mode=TwoWay}"  />

        </dxg:GridControl.View>
    </dxg:GridControl> 
```

如果我硬编码它的颜色，但不是通过绑定。属性名称是正确的谢谢！

* * *

好吧，更进一步，我正在使用 cellproperty，并使用转换器，但由于某些奇怪的原因，转换器不会触发。我有一个断点，但它从来没有命中

```
 <UserControl.Resources>

    <views:ColourConverter x:Key="clrc"/>

    <Style x:Key="CellStyle" TargetType="{x:Type dxg:CellContentPresenter}">
        <Setter Property="Background" Value="{Binding Path=DataContext.Colour, Converter={StaticResource clrc}}" />
    </Style>
</UserControl.Resources> 
```

//注意颜色是字段名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:41:52.230

如果将 Color 属性绑定到字符串属性，它将不起作用。该程序不知道如何转换它，所以你必须用[IValueConverter](http://wpftutorial.net/ValueConverters.html)告诉他：

```
public class StringToColorConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        System.Drawing.Color color = System.Drawing.Color.FromName(value.ToString());
        if (color != null)
            return new SolidColorBrush(System.Windows.Media.Color.FromArgb(color.A, color.R, color.G, color.B));

        return new SolidColorBrush(System.Windows.Media.Colors.Transparent);

    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value.ToString();
    }
} 
```

如果它仍然不起作用，请在转换方法中放置一个断点，看看它是否被输入。

# sublimetext2 - Sublime Text 2 中的文件导航怎么这么快？

> ID：15025094
> 
> 赞同：6
> 
> 时间：2013-02-22T13:13:40.773
> 
> 标签：sublimetext2

在 Sublime Text 2 中，只需启动编辑器，将文件夹拖入其中，然后按 Ctrl+P 即可立即打开该文件夹中的任何文件。据我所知，文件夹中的文件数量无关紧要，而且它似乎根本不执行任何索引。需要明确的是，我不是在谈论打开特定文件的速度，而是在谈论可用的过滤功能，它可以让您在文件夹中的所有文件之间进行过滤以找到您想要的文件。例如：![截屏](../Images/974438187357034b1c3b7eaeca6ff4e3.png)

相比之下，Vim 和 Emacs 都需要某种索引来快速查找文件（Vim 的 FindFile，Emacs 的 Ctags 或 Cscope）。ST2，另一方面，不需要任何东西，比运行“find”更快的是递归列出目录中的所有文件，更令人惊讶的是，CPU使用率和RAM使用率都没有上升。跑步。

我只是好奇是否有人对 ST2 如何在后台执行此操作有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:46:17.987

我相信当您打开文件夹/项目时，Sublime Text 2 会在后台执行文件扫描。做这件事很安静。各种插件自己进行扫描，但速度不是那么快（如 ctags）。关于 ST2 如何做到这一点的内部信息没有记录或公开。

它也不是那么快，有些人对此有疑问：[http ://sublimetext.userecho.com/topic/49572-cache-folder-treegoto-anything-for-remote-volumes/](http://sublimetext.userecho.com/topic/49572-cache-folder-treegoto-anything-for-remote-volumes/)

[http://sublimetext.userecho.com/topic/49572-cache-folder-treegoto-anything-for-remote-volumes/](http://sublimetext.userecho.com/topic/49572-cache-folder-treegoto-anything-for-remote-volumes/)

# ios - 释放 ViewController？

> ID：15025099
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:13:56.497
> 
> 标签：ios, memory-management, viewcontroller

我有一个`UITabBar`包含 5 个选项卡 ( `viewControllers`) 的应用程序。里面有一个`viewController`我想在它不活跃时发布的东西我认为它是通过`viewDidUnload`但我不知道如何。我需要这个的代码，拜托。

***编辑：我只想知道如何在`viewController`不活动时正常释放 a 。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:30:48.063

您必须从视图控制器外部释放视图控制器 - 它不能自行释放......

因此，例如，当您切换到另一个选项卡时，您可以释放`UITabBar`班级中最后一个选项卡的视图控制器。

**加法**：

查看您的评论，释放视图控制器是完全错误的做法（除此之外， a`UITabBarController`旨在使其所有视图控制器始终正常运行）。

您应该实现一个函数来刷新视图控制器中的书签，并在书签视图控制器出现时调用它（`viewWillAppear`函数），或者在选择书签视图控制器时在 UITabBarController 的委托中出于任何原因需要调用它（委托函数`(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController`）。

也许你应该[在这里阅读 UITabBarController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)。

# android - 按下快捷方式时，Android总是以启动画面开头

> ID：15025104
> 
> 赞同：0
> 
> 时间：2013-02-22T13:14:14.747
> 
> 标签：android

我对我的 Nexus S 有一个奇怪的影响，我也在其中开发：
当生成我的应用程序的发布签名版本并将它安装在设备上时，应用程序有时不会保持它的状态，这意味着它总是在按下启动屏幕时重新启动应用程序快捷方式。
通过菜单启动应用程序时，它会显示最后一个活动。
在手机重新启动后，快捷方式启动再次正常。

有人对此有相同的效果或有一些解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:20:39.130

在两次启动之间保持应用程序状态时，您不能依赖 Android。可能会发生很多事情，包括内存不足状态、强制重启、手机重启、超时等。在大多数情况下，当您关闭应用程序时，Android 会销毁所有活动以回收应用程序占用的一些内存。

此外，您可以检查您的手机设置。有一个选项“不保留活动”，它将简单地自动销毁任何不活动的活动。

# model-view-controller - JSF MVC2 和 MVC1 和 MVC2 有何不同

> ID：15025106
> 
> 赞同：0
> 
> 时间：2013-02-22T13:14:21.617
> 
> 标签：model-view-controller, jsf

MVC1 与 MVC2 有何不同？JSF MVC2 吗？面试官告诉我JSP是MVC1。这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:36:09.510

正确的术语是[“模型 1 MVC 模式”](http://en.wikipedia.org/wiki/Model_1)和[“模型 2 MVC 模式”](http://en.wikipedia.org/wiki/Model_2)。

在 Java 术语中，Model 1 MVC 模式在同一个地方有“视图”和“控制器”（例如，带有`<jsp:useBean>`或*scriptlet*的单个 JSP 文件，或者带有`out.println()`编写 HTML 的单个 servlet）。Model 2 MVC 模式在物理上分离了“视图”和“控制器”。JSP/Facelets 页面是视图，servlet 是控制器。这允许多个视图使用单个控制器（根据[前端控制器模式](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297)）。请注意，如果没有模型（本质上是一个简单的 Javabean 类，其中包含由控制器创建/操作并由视图呈现的数据），那么也没有 MVC 模式的方法。

JSF 绝对是 Model 2 MVC。控制器是`FacesServlet`. JSP 可以是模型 1 或模型 2，这取决于是否存在作为前端控制器的 servlet 以及在不首先调用控制器的情况下无法访问/无法使用 JSP 文件。[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)仅包含 Model 2 示例。

### 也可以看看：

*   [JSF MVC 框架中的 MVC 是哪些组件？](https://stackoverflow.com/questions/5104094/what-components-are-mvc-in-jsf-mvc-framework)

# background - 谷歌浏览器扩展：我们什么时候应该使用后台脚本？

> ID：15025112
> 
> 赞同：1
> 
> 时间：2013-02-22T13:14:40.277
> 
> 标签：background, google-chrome-extension, notifications, desktop

我是 Google Chrome 扩展程序的新手。

我想知道，我们什么时候应该使用后台脚本？

```
"background": { "scripts": ["background.js"] } 
```

实际上，我正在开发一个扩展程序，它将以特定的时间间隔显示一些消息（通过桌面通知）。所以我在 javascript 文件中使用 setInterval() 方法（这不是 background.js）。

但这似乎不起作用。

谁能给我解释一下。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:48:13.083

后台脚本对所有选项卡都是通用的，并且每个选项卡的内容脚本都是独立的。这取决于您想要做什么的场景。

请在[此处](http://developer.chrome.com/extensions/notifications.html)查看通知文档

示例扩展也可[在此处获得](http://developer.chrome.com/extensions/examples/api/notifications.zip)

# php - 当 PHP 脚本多次同时访问 MySQL 数据库时会发生什么？

> ID：15025119
> 
> 赞同：5
> 
> 时间：2013-02-22T13:15:16.513
> 
> 标签：php, mysql, mutex, race-condition

我很好奇 PHP 脚本和 MySQL 的行为方式？该脚本基本上是两个 SQL 查询。

第一个 SELECT 并从由某个 id 决定的特定行的列中获取一个数字。

然后，如果数字为正，则第二个通过减去一定数量来更新列。

显然，这是一个经典案例，我会使用事务或锁或互斥锁等。

**我的问题是：** 在一个网站中，两个或多个用户完全有可能同时为同一行调用脚本。如果您不使用事务或锁定表，PHP 将如何处理？它们是两个查询/函数调用，但它们在一个脚本中。它是否等待整个脚本返回给它的相应用户以再次为另一个用户运行它，或者因为它们是不同的查询，因为伪并行性它可能会在多个用户上运行第一个查询，调用相同的脚本，然后为不同的集合运行第二个查询。 .

基本上我在问，因为我正在做一些我没有足够权限使用事务或锁的事情，我想知道我是否可以避免互斥锁（我不确定这个词，基本上是调用者的新表；在调用上面的脚本之前，我将在此之前调用一个新脚本，在此之前我会将表的布尔列设置为 true 以便其他人在原始脚本完成时无法写入，然后将 bacl 设置为 false，以便下一行可以执行，依此类推)

**编辑：** 我不确定 select for update 的权限是否包含在上述内容中。负责回答我问题的人很难找到，我一直在寻找他...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:21:07.340

很奇怪，您可以进行更新，但不能锁定表（更新是某些引擎的锁定表和其他引擎的锁定行）。但是如果你真的不能这样锁定，你可以使用[get_lock 函数](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock)。它就像互斥锁一样工作。

PS 如果您只使用 assignment( `set a=10`) 进行更新，您可能会丢失一些数据。如果您在filed( `set a=10+a`) 上使用带有ref 的赋值，则永远不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:23:05.107

你不能一个电话就搞定，那样就不会太重要了吗？

```
UPDATE T1
    SET T1.COLUMN = T2.COLUMN - 4
    FROM TABLE1 AS T1
    INNER JOIN TABLE2 AS T2
        ON T1.COLUMN = T2.COLUMN
    WHERE T2.COLUMN = ID
    AND T2.COLUMN > 0 
```

# ruby - 如何将变量传递给动态更新的 Ruby proc？

> ID：15025120
> 
> 赞同：1
> 
> 时间：2013-02-22T13:15:17.900
> 
> 标签：ruby, block, proc

```
p = Proc.new{ |v| puts v }
p(5) #=> 5 
```

这很好用，但是如果我想“绑定” v 让它动态更新怎么办。例如：

```
p = Proc.new{ ... puts v }
v = 5
p #=> 5
v = 7
p #=> 7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:19:12.090

你已经做对了。只需使用 call 来执行你的过程：

```
irb(main):001:0> v= 42
=> 42
irb(main):002:0> p= Proc.new{ puts v }
=> #<Proc:0x422007a8@(irb):2>
irb(main):003:0> p.call
42
=> nil
irb(main):004:0> v= 43
=> 43
irb(main):005:0> p.call
43
=> nil
irb(main):006:0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:19:54.107

在 proc 之前声明变量。创建 proc 时，它将考虑已声明的任何局部变量。

这会出错，因为变量是在 proc 之后声明的。

```
1.9.3p327 :001 > p = Proc.new { puts a }
 => #<Proc:0x9b91e4c@(irb):1> 
1.9.3p327 :002 > p.call()
NameError: undefined local variable or method `a' for main:Object
    from (irb):1:in `block in irb_binding'
    from (irb):2:in `call'
    from (irb):2
    from /home/chris/.rvm/rubies/ruby-1.9.3-p327/bin/irb:16:in `<main>'
1.9.3p327 :003 > a = 1
 => 1 
1.9.3p327 :004 > p.call()
NameError: undefined local variable or method `a' for main:Object
    from (irb):1:in `block in irb_binding'
    from (irb):4:in `call'
    from (irb):4
    from /home/chris/.rvm/rubies/ruby-1.9.3-p327/bin/irb:16:in `<main>' 
```

这适用于在 proc 之前声明的变量。

```
1.9.3p327 :001 > a = 1
 => 1 
1.9.3p327 :002 > p = Proc.new { puts a }
 => #<Proc:0x8cc2d44@(irb):2> 
1.9.3p327 :003 > p.call()
1
 => nil 
1.9.3p327 :004 > a = 2
 => 2 
1.9.3p327 :005 > p.call()
2
 => nil 
```

# django - 让用户在 Django 模型中更改 ManyToManyField 的顺序

> ID：15025126
> 
> 赞同：0
> 
> 时间：2013-02-22T13:15:40.737
> 
> 标签：django, django-models, django-orm

我的模型如下所示：

```
class Reading(models.Model):
    title = models.Charfield(max_length=250)
    url = models.URLField()

class Lesson(models.Model):
    name = models.CharField(max_length=250)
    description = models.TextField(null=True, blank=True)
    readings = models.ManyToManyField(Reading)
    created_by = models.ForeignKey(User) 
```

课程中阅读的顺序（这些只是博客文章）很重要。这可以通过元类选项 *order_with_respect_to* 来完成。但我希望用户（该课程的创建者）可以更改课程中阅读的顺序。我怎样才能做到这一点？

我想到的一种方法是，我应该从阅读模型中创建一个 ForeignKey 的课程，并使用 IntegerField 再创建一个名为 ordering 的字段，用户编辑可以更改该字段。这是正确的方法吗？

我还发现这与说用户拥有待办事项列表并且应该能够更改他想要执行的任务的顺序是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:51:26.770

你可以使用`through`模型。[https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)

# jquery - 如何在 jQuery 验证中验证克隆元素？

> ID：15025134
> 
> 赞同：4
> 
> 时间：2013-02-22T13:16:02.623
> 
> 标签：jquery, jquery-validate

我正在使用[bassistance.de/jquery-plugins](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

这是默认的 jQuery 表单验证服务。

我知道与 jQuery 验证相关的问题问了太多次，但我的问题
有点不同。

我有一个带有一个文件输入的表单，我正在克隆如下

```
var picFields = $('#file').clone(true); 
```

并附加到表单中以上传多个文件。

在克隆时，我有一个带有“必需”名称的类并添加了类似的规则

```
$('.required').each(function() {
 $(this).rules('add', {
    required: true,
 });
}); 
```

并最初验证喜欢

```
$('#form').validate(); 
```

它仅验证第一个元素而不是所有动态添加的字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-20T17:09:56.753

每个输入都需要一个唯一的名称。插件无法考虑诸如 name="location[]" 之类的事情，您必须添加一个索引（正确的应该是 name="location[0]"）。对于克隆的元素，我首先得到 html "clone().html()" 然后我用我跟踪的计数器编号替换 [0] 例如：.replace(/[0]/g, "["+cont+"] ")

然后我可以安全地将生成的 html 附加到 DOM 并且插件照常工作。

请记住：JQUERY VALIDATE 需要在输入中使用唯一的名称！我为此付出了很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T16:53:03.113

解决这个问题 ！

我以前做过的事情：克隆对象后，我调用了一个创建验证的函数：

```
function add_another_form(){
     var new_form =  jQuery(".class").clone(true);
     new_form.appendTo(".parent");
     add_validation_for_forms();//attach again the validation !
}

function add_validation_for_forms(){
    jQuery(".class").validate({....}) 
```

但这不起作用，所以我只是在那里使用了一个*.each*函数，现在它可以工作了......

```
function add_validation_for_forms(){
    jQuery(".class").each(function(){
        jQuery(this).validate({....}) 
```

# iphone - 录制音频 + AirPlay

> ID：15025140
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:16:25.140
> 
> 标签：iphone, ios, record, audiounit, airplay

我正在制作一个允许您执行此操作的应用程序：说话和说话时使用 AirPlay 分享您对 AppleTV 所说的内容。问题是我使用 AVAudioRecorder 来录制音频，然后我从一个路径中选择录制的音频，这在我说话时不会更新文件长度。然后，我想我应该使用 I/O Remote Audio Units 来记录并保存到路径，但我不能这样做。有没有人可以帮我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:37:21.377

也许您应该尝试自己做，这是一个[指南](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/UsingSpecificAudioUnits/UsingSpecificAudioUnits.html#//apple_ref/doc/uid/TP40009492-CH17-SW1)……如果您有任何问题，请随时提出

# makefile - make: 如果 jar 还没有被提取，则提取 jar

> ID：15025142
> 
> 赞同：0
> 
> 时间：2013-02-22T13:16:32.517
> 
> 标签：makefile

在我的项目中，我需要一个库。为了使它可用，我必须提取一个 jar 文件。我想准备 Makefile 来自动化这个过程。我以为我做对了，但不管 java 文件中的变化如何，make 什么都不做（如果 CMDControl.class 存在，否则它每次都会提取 jar 文件）。

```
all : CMDControl.class

%.class : %.java
    javac $<

CMDControl.class : org/gjt/mm/mysql/Driver.class
    jar xf ../mysql-connector-java-5.1.22-bin.jar

clean :
    -rm *.class 
```

jar 文件由以下目录组成： com META-INF org

Makefile 有什么问题？

我试过

```
all : CMDControl
CMDControl : CMDControl.class 
```

但这也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:45:16.343

问题是由于 jar 文件不是任何东西的先决条件，Make 不在乎它是否被修改。

这应该可以解决问题：

```
%.class : %.java
    javac $<

CMDControl.class : org/gjt/mm/mysql/Driver.class

org/gjt/mm/mysql/Driver.class: ../mysql-connector-java-5.1.22-bin.jar
    jar xf $<
    touch $@ 
```

（最后一个命令会更新 的修改时间，`org/gjt/mm/mysql/Driver.class`以便 Make 相信它是最新的。）

# active-directory - 通过 php 将用户添加到 Active Directory

> ID：15025143
> 
> 赞同：2
> 
> 时间：2013-02-22T13:16:32.987
> 
> 标签：active-directory

以下是我用来在 Active Directory 中添加用户的代码

```
<?php
$ldapConn = ldap_connect('ldap://xxx.xx.x.xx:389');
ldap_set_option($ldapConn, LDAP_OPT_PROTOCOL_VERSION, 3);

ldap_bind( $ldapConn, 'xx.xx@xx.xx', 'xxxx');

$dn_user='CN=testLDAP,OU=xx,DC=xx,DC=xx';

$ldaprecord['cn'] = "testLDAP";
$ldaprecord['givenName'] = "testLDAP";  
$ldaprecord['sn'] = "testLDAP";
$ldaprecord['sAMAccountName'] = "testLDAP";
$ldaprecord['UserPrincipalName'] = "testLDAP@xx.xx";
$ldaprecord['displayName'] = "testLDAP";
$ldaprecord['name'] = "testLDAP";
$ldaprecord['UserAccountControl'] = "544";
$ldaprecord['objectclass'][0] = 'top';
$ldaprecord['objectclass'][1] = 'person';
$ldaprecord['objectclass'][2] = 'organizationalPerson';
$ldaprecord['objectclass'][3] = 'user';
$ldaprecord['mail'] = "testLDAP@abc.com";

$add = ldap_add($ldapConn, $dn_user, $ldaprecord);

    if($add) {
        echo "User successfully added";
    } else {
        echo "User not added";
    }
ldap_close($ldapConn);
?> 
```

但我收到错误消息

**警告：ldap_add() [function.ldap-add]：添加：无法联系 LDAP 服务器**

我的代码有什么问题，请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:29:49.740

您必须在 SSL/TLS 下连接才能创建用户或设置/更改密码，所有其他 Active Directory 功能都可以在纯文本连接下执行。

为了让您的生活更轻松，我建议您查看这个第 3 方库：[http ://adldap.sourceforge.net/](http://adldap.sourceforge.net/)

# ios - MVC - 视图可以保持对视图控制器的引用并处理数据吗？

> ID：15025147
> 
> 赞同：0
> 
> 时间：2013-02-22T13:16:43.280
> 
> 标签：ios, objective-c, cocoa-touch, model-view-controller, uiviewcontroller

使用 Cocoa-Touch，但这是一个普遍的问题。

视图可以保留对其视图控制器的引用并处理数据吗？我最近遇到了一个在整个应用程序中执行此操作的代码库 - 例如，有一个表格视图控制器，它的单元格对视图控制器的引用很弱（因此没有保留周期）。单元格通过

```
[self.parentVC presentViewController.....]; 
```

并以类似的方式将其解雇。此外，它们还处理数据/网络操作的变化。

在我看到这一点之前，我习惯于为每个单元创建协议并通过它们与父视图控制器对话。使用直接引用视图控制器的方法摆脱所有协议。

对我来说，这似乎很糟糕，但不确定它是否常见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T14:01:37.427

即将到来的答案是关于**Apple 处理模型视图控制器的方式，这与其他 SDK（例如**[Qt](https://stackoverflow.com/questions/5543198/why-qt-is-misusing-model-view-terminology) ）完全不同。

这绝对是**不好的做法**。可以归结为一个问题，*如果您认为这是一个好主意，那么为什么 Apple 还没有在`UIView`课堂上添加该参考？*

如果你看看[Apple 如何使用模型视图控制器](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MVC.html)，模型就很清楚了：

![在此处输入图像描述](../Images/d69a87bff124dd17bdbc138bd2b43cd4.png)

视图与控制器通信以发出状态更改的信号，控制器在需要时更新模型并相应地更新视图。您永远不会在其中找到将更新堆栈控制器的 Apple 文档或示例。

如果一个`UIView`子类开始持有对持有它的控制器的引用（即使它是一个弱引用），您正在删除视图对其控制器的抽象（引用是相反的），因此强烈鼓励不良做法那些使用相同代码的人。

什么会阻止另一个开发人员这次在视图附加到的“模型”上添加引用？

现在我并不是说这会将你的代码变成意大利面条代码（你仍然可以用它制作一个像样的应用程序），我说这真的是（真的！）不好的做法。

希望这已经足够清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:31:33.110

我认为可能两者兼而有之：非常糟糕和普遍。

视图应该是通用的，它们不需要知道关于它们的控制器的任何细节。通信应限于委托（协议）、数据源（协议）或目标操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:06:03.567

嗯，......这并不少见，也不是很好的风格。我自己这样做了，几乎迷路了。每当需要时，我都会尝试采用委托模式。这意味着，是的，我确实保留了对恰好是视图控制器的委托的引用。委托对象确实实现了一个协议，在该协议中我总结了我将要调用的所有视图控制器（委托）的方法。

在这种情况下和您的示例中，单元格将通过调用方法通知视图控制器发生的事情，然后视图控制器将调用下一个要调用的视图控制器。

通过这样做，我实现了同样的事情，但有点坚持 MVC 模式，因此总是知道在哪里寻找什么样的功能——即使在一年左右的时间里。

# c# - 将模型动态映射到视图

> ID：15025151
> 
> 赞同：0
> 
> 时间：2013-02-22T13:16:55.223
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我有一个使用强类型模型的部分视图。是否可以在 html 帮助器方法中将我的模型动态映射到我的部分视图并返回呈现的 html？

这是我想知道是否可能的伪代码。

```
 public static MvcHtmlString ContentRating(this HtmlHelper html, ContentKey contentKey)
    {
        ContentRatingModel contentRatingModel = new ContentRatingHelper().GetContentRatingModel(contentKey);

        // map my partial view which is named "ContentRating.cshtml" to contentRatingModel    

        return new MvcHtmlString(string.Format("the html output of mapping");
    } 
```

并在我的视图中使用此辅助方法，如下所示：

```
@Html.ContentRating(ContentKey.Test) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:19:52.843

*将局部视图映射到模型的*确切含义尚不清楚，但如果您想在助手中呈现此局部视图的内容，您可以执行以下操作：

```
public static MvcHtmlString ContentRating(this HtmlHelper html, ContentKey contentKey)
{
    ContentRatingModel contentRatingModel = new ContentRatingHelper().GetContentRatingModel(contentKey);

    var result = html.Partial("ContentRating", contentRatingModel);

    return new MvcHtmlString(result.ToHtmlString());
} 
```

不要忘记将`System.Web.Mvc.Html`命名空间纳入范围，以便可以在您的自定义帮助程序中解析 Partial 扩展方法：

```
using System.Web.Mvc.Html; 
```

# monodevelop - 运行LibGdx项目时编译失败错误

> ID：15025152
> 
> 赞同：0
> 
> 时间：2013-02-22T13:16:58.370
> 
> 标签：monodevelop, xamarin, xamarin.ios, xamarin-studio

我正在移植我在 Libgdx 平台上开发的游戏。现在我正在尝试移植到 IOS。当我运行我的项目时，它给我这个错误：-

错误 MT5103：无法编译文件“/var/folders/lc/_tfkdygx19gf9b1rg1ycb3rm0000gn/T/tmp14641e8e.tmp/main.i386.m”。[请在http://bugzilla.xamarin.com](http://bugzilla.xamarin.com) (MT5103)提交错误报告

请让我知道如何解决。我已经购买了单点触控许可证。

如果我使用它 -nosymbolstrip -nostrip -cxx -gcc_flags "-L${ProjectDir}/libs/ios -L${ProjectDir}/libs/ios/ikvm/bin -likvm-natives -lgdx -force_load ${ProjectDir} /libs/ios/libgdx.a -force_load ${ProjectDir}/libs/ios/ikvm/bin/libikvm-natives.a" "-v -v -v" 然后它给我这个错误

错误 MT0010：无法解析命令行参数：无法捆绑未注册的选项“-”。(MT0010) (demoProject-ios)

出现此错误：-

复制 /var/folders/lc/_tfkdygx19gf9b1rg1ycb3rm0000gn/T/tmp3e42cb58.tmp/libObjectAL.dll 到 /Users/rishabhagrawal/Desktop/spidy 3s2 2/demoProject-ios/bin/iPhoneSimulator/Debug/demoProjectios.app/libObjectAL.dll 链接程序集/Users/rishabhagrawal/Desktop/spidy 3s2 2/demoProject-ios/bin/iPhoneSimulator/Debug/iosgame.exe 进入 /Users/rishabhagrawal/Desktop/spidy 3s2 2/demoProject-ios/bin/iPhoneSimulator/Debug/demoProjectios.app 错误MT2001：无法链接程序集。原因：数组索引超出范围。--- 内部异常 System.IndexOutOfRangeException：数组索引超出范围。在 Mono.Cecil.Signatures.SignatureWriter.Write (NamedArg na, Mono.Cecil.Binary.MemoryBinaryWriter writer) [0x00000] 在 Mono.Cecil.Signatures.SignatureWriter.Write (Mono.Cecil.Signatures.CustomAttrib ca, Mono.Cecil.Signatures.SignatureWriter.Write) [0x00000] .Cecil.MethodReference ctor，Mono.Cecil.Binary。

## 在 MonoTouch.Tuner.Linker.Process（MonoTouch.Tuner.LinkerOptions 选项，Mono.Linker.LinkContext& 上下文，System.Collections.Generic.List`1& 程序集）[0x00000] 中：0

在 MonoTouch.Tuner.Linker.Process（MonoTouch.Tuner.LinkerOptions 选项，Mono.Linker.LinkContext& 上下文，System.Collections.Generic.List `1& assemblies) [0x00000] in <filename unknown>:0 at MTouch.LinkAssemblies (System.String main, System.Collections.Generic.List`1& 程序集，布尔 include_debug_info）[0x00000] 在：0 在 MTouch.Main2（System.String [] args) [0x00000] in :0 at MTouch.Main (System.String[] args) [0x00000] in :0

# php - PHP strtotime 失败 1 位数分钟或秒

> ID：15025154
> 
> 赞同：3
> 
> 时间：2013-02-22T13:17:03.983
> 
> 标签：php, datetime, unix-timestamp, strtotime

php`strtotime()`失败，持续一位数的分钟或秒数。

例如-

```
echo date('m/d/Y H:i:s', strtotime('02/23/2013 8:50:1 PM'));  // 01/01/1970 01:00:00
echo date('m/d/Y H:i:s', strtotime('02/23/2013 8:5 PM'));     // 01/01/1970 01:00:00 
```

有没有**快速**的解决方案？

我知道，我们可以拆分它并检查分钟或秒字符串长度，并添加一个 0 前缀。

顺便说一句，一个奇怪的事情是，如果**最后一部分**是一位数字，它就会失败

例如-

```
echo date('m/d/Y H:i:s', strtotime('02/23/2013 8:5:10 PM'));  // 02/23/2013 20:05:10
// worked well, despite of one digit minute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:22:11.843

[PHP Date Man Page](http://www.php.net/manual/en/function.date.php)声明日期格式化命令的说明符i*和*s*必须*包含前导零。

没有办法解决这个问题，它们必须包含零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:24:46.307

```
$time = '02/23/2013 8:5 PM';
$time = preg_replace('/ ([0-9]*:[0-9]) /', " \${1}0 ", $time );
echo date('m/d/Y H:i:s', strtotime($time)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T14:05:36.460

```
preg_replace_callback('/ ([0-9]*):([0-9]*):([0-9]*)/', function($p){                                        
 return " ".str_pad($p[1], 2, 0, STR_PAD_LEFT).":".str_pad($p[2],2 , 0, STR_PAD_LEFT).":".str_pad($p[3],2, 0, STR_PAD_LEFT);
},  $some_bad_date_string); 
```

这会将“11/04/2021 6:5:0”转换为“11/04/2021 06:05:00”。

# android - 通过 facebook 分享 android jelly bean 的意图

> ID：15025156
> 
> 赞同：8
> 
> 时间：2013-02-22T13:17:08.657
> 
> 标签：android, eclipse, android-intent

我想通过 Facebook 从 android jelly bean 分享一些图像和文本。它适用于除 android jelly bean 之外的所有设备。任何人都请帮助我如何解决这个问题。

## **我的代码**

```
 Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Content to share");
        PackageManager pm = v.getContext().getPackageManager();
        List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
        for (final ResolveInfo app : activityList) {
            if ((app.activityInfo.name).contains("facebook")) {
                final ActivityInfo activity = app.activityInfo;
                final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);

                System.out.println("package name"+name);
                shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                shareIntent.setComponent(name);
                v.getContext().startActivity(shareIntent);
                break; 
```

在这段代码中，我想写一些文字。但是EXTRA_TEXT 不起作用。如何在这个EXTRA_TEXT 中传递字符串或图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T13:18:38.613

您不应该只直接针对 Facebook。

相反，您应该只使用共享意图。将您的数据传递到 SDK 中指定的附加组件中，然后让用户选择他们想要共享的对象。不要强迫他们使用 facebook，因为他们**不是**唯一的社交媒体。还有 twitter、4square 和许多其他用户使用的。让这些应用程序处理您的意图，不要规定如此严格的限制，因为这**不是**意图操作`ACTION_SEND`的工作方式。

至于您对 Extra 的问题，显然`EXTRA_TEXT`意图不起作用，因为它不用于图像或任何类似的参考。

## 阅读文档

[http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND)

它说：

> 启动 SEND Intent 时，您通常应该将其包装在选择器中（通过 createChooser(Intent, CharSequence)），这将为用户提供适当的界面来选择如何发送数据并允许您指定提示来指示他们的内容是做。
> 
> > 输入：getType() 是正在发送的数据的 MIME 类型。get*Extra 可以有一个 EXTRA_TEXT 或 EXTRA_STREAM 字段，包含要发送的数据。如果使用EXTRA_TEXT，MIME类型应该是“text/plain”；否则应该是EXTRA_STREAM中数据的MIME类型。如果 MIME 类型未知，则使用*/*（这将只允许可以处理通用数据流的发件人）。如果使用 EXTRA_TEXT，您还可以选择为客户端提供 EXTRA_HTML_TEXT 以检索具有 HTML 格式的文本。
> > 
> > 从 JELLY_BEAN 开始，可以通过 setClipData(ClipData) 提供正在发送的数据。这允许您在共享内容时使用 FLAG_GRANT_READ_URI_PERMISSION：URI 和 ClipData 的其他高级功能。如果使用这种方法，您仍然必须通过下面描述的 EXTRA_TEXT 或 EXTRA_STREAM 字段提供相同的数据，以与旧应用程序兼容。如果您没有设置 ClipData，它将在调用 startActivity(Intent) 时为您复制到那里。
> > 
> > 一些收件人可能会酌情解释的可选标准附加内容是：EXTRA_EMAIL、EXTRA_CC、EXTRA_BCC、EXTRA_SUBJECT。

鉴于此信息，您还需要为您的意图类型中的特定数据设置 mimetype。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:37:05.680

试试下面的代码。我已使用此代码从我的一个应用程序中共享文本和图像，它对我来说非常有用。

我希望它也对你有用。

> ```
>  File pngDir = new   File(Environment.getExternalStorageDirectory(),"Android/data/Textures");
>    if (!pngDir.exists()) {
> pngDir.mkdirs();
> }
> File pngfile = new File(pngDir,"texture1.png");
> Uri pngUri = Uri.fromFile(pngfile);
> Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
> shareIntent.setType("image/png");
> shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
>                 "Text to Share");
> shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,
>         "Context to share");
> shareIntent.putExtra(android.content.Intent.EXTRA_STREAM,
>                 pngUri); //Share the image on Facebook
> PackageManager pm = getApplicationContext().getPackageManager();
> List<ResolveInfo> activityList = pm.queryIntentActivities(
>                     shareIntent, 0);
> for (final ResolveInfo app : activityList) {
>     if ((app.activityInfo.name).contains("facebook")) {
>         final ActivityInfo activity = app.activityInfo;
>         final ComponentName name = new ComponentName(
>                     activity.applicationInfo.packageName,
>                     activity.name);
>         shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
>         shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
>             | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
>         shareIntent.setComponent(name);
>         startActivity(shareIntent);
>         break;
>             }
>         } 
> ```

在此，我使用了存储在设备特定位置的图像。您可以根据您的图像位置进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T12:29:56.410

详情请参阅 Facebook 专页

看起来我们无法在 Facebook 应用程序中传递要分享的文本。

[Facebook 分享意向详情](https://developers.facebook.com/bugs/332619626816423)

# c - 为什么“如果”不是C中的表达式

> ID：15025158
> 
> 赞同：3
> 
> 时间：2013-02-22T13:17:21.847
> 
> 标签：c, if-statement, compiler-construction

C中的'if'语句不是表达式的原因是什么？为什么将三元运算符添加到 C 而不是“if”表达式？

是有技术原因还是只是一个历史决定？

Ed.：为了让事情更清楚，我想象了一个像这样的“if”表达式：如果它的结果​​没有被使用，它的行为可能就像一个语句，但如果某事需要结果，它必须`else`有相同的返回类型。

现在我看到结果是模棱两可的：确实，它是表达式和​​语句的奇怪混合，所以清晰的分离更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T13:22:44.117

我会说因为 C 是一种命令式语言，建模机器，而不是数学，所有函数都有一个值。

if 表达式需要一个强制的 else 表达式（或强制的异常抛出），它不适合只为使用的东西付费的面向性能和机器的编程语言。

* * *

（旁注）标准可以规定，如果 if 表达式不在赋值的右侧，则 else 部分变为可选的。然而，这会使 C 语法更加复杂。

第二个限制：在一个表达式中，您只能使用其他表达式。例如，您不能：

```
int i = if (foo) { for (int x=4; x; --x) {}; 42 } else bar; 
```

虽然原则上是可能的，但我认为这会带走 C 的一些美丽、简约的语法。您将不得不扩展琐碎表达式与代码块的规则，您需要在解析时记住更多上下文，等等。（/边注）

* * *

C++ 中的三元运算符（注意：*C++*）正是这样做的：需要一个 else 部分，因为它是一个表达式或抛出一个异常：

```
int foo = frob ? bar : throw "crap"; 
```

那东西基本上是一个 if-else-*表达式*；Python 将是替换为以下语言的`?:`示例`if/else`：

```
foo = frob if bar else 42 
```

您所描述的实际上是两件事：If 语句和 if 表达式。两者都在 C 中；两者都有明显的特点。而且，不知何故，你问为什么不是*if 语句* **和** *if 表达式*都是*表达式*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:24:17.017

if 是这样定义的：

```
"if" <whitespace> "(" <whitespace> <expression> <whitespace> ")" <whitespace> <statement> 
```

So it will accept a statement if the condition is met. If it was an expression it would need to return something, hence it would only be able to execute other expressions rather than general statements. In fact the ?: can only execute conditional expressions but not statements.

# ruby-on-rails - 为什么在这种情况下我会得到 nil 错误？

> ID：15025162
> 
> 赞同：0
> 
> 时间：2013-02-22T13:17:27.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

事实上，@community 有 4 个标签，因此它不应该返回 nil 错误。
但是在这种情况下，它会像这样返回 nil 错误。为什么以及如何解决？

```
ActionView::Template::Error (undefined method `+' for nil:NilClass): 
```

我的代码

```
<% @community.tags.each do |tag| %><% tag_strings = tag_strings + tag.name + "," %><% end %>
<%= render 'layouts/twitter', :tag => tag_strings + @community.community_name %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:22:25.747

`tag_strings`迭代开始时未初始化。也许您想加入所有标签。如果是这样，请尝试 `tag_strings = @community.tags.map(&:name).join(", ")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:25:08.700

您可以像这样更巧妙地实现这一点：

```
<%= render 'layouts/twitter', :tag => @community.tags.collect(&:name).join(",") + @community.community_name %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:37:13.220

..或者更整洁...

```
class Community < ActiveRecord::Base
  def tags_string
    "#{tags.collect(&:name).join(',')} #{community_name}"
  end
end

= render 'layouts/twitter', tag: @community.tags_string 
```

# html - 当涉及 ajax 时，链接到样式表的正确程序是什么

> ID：15025166
> 
> 赞同：0
> 
> 时间：2013-02-22T13:17:37.273
> 
> 标签：html, css, ajax

我正在使用 ajax 替换页面中 div 的内容。

div 具有初始默认内容，它是同一 html 文件的一部分，其样式将由 css 控制。

但是当我用另一个文件替换内容时，样式如何工作？css 是否会在 div 被切换之前应用与 div 相同的属性？另外，如果我将另一个样式表的链接直接放在包含新 div 内容的页面上，会发生什么情况？

我想我只是不确定如何防止我的初始 div 样式干扰我对新 div 的样式，并且想知道什么是正确的协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:24:18.287

无论内容是否动态加载，CSS 样式都会应用于页面上的每个匹配选择器。如果您不希望旧样式干扰新内容，请不要使用相同的 ID/类（或选择器）。

# freepascal - 如何在freepascal中清除屏幕外（滚动/向上）的控制台显示部分？

> ID：15025168
> 
> 赞同：2
> 
> 时间：2013-02-22T13:17:44.813
> 
> 标签：freepascal

我没有找到一种方法来真正清除屏幕上的所有内容，包括控制台应用程序中由于空间不足而向上推的文本。我需要这个只是为了审美感觉。可以做到吗？如何（跨平台）？如果不能，我一定是误解了控制台显示的工作原理，那么有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T14:54:51.643

在使用 Unix (Linux) 时，只需将“\033c”发送到控制台，例如使用 write()，它就会发挥作用；)

使用例如： printf "\033c" 在纯 shell 中测试它

更深入的解释：“\033c”与将 c 发送到控制台相同，这是非常古老的（因为 VT100 终端原语！）用于清除整个屏幕及其缓冲区的命令。

# sql-server - 在查询结果上添加假行

> ID：15025169
> 
> 赞同：7
> 
> 时间：2013-02-22T13:17:50.410
> 
> 标签：sql-server, tsql

我有一个包含以下列的表（T1）：部门、销售日期、总销售额。我想要实现的是从开始日期开始的一年内每月获得部门的销售额并向后退一年。也许以下查询会更好地显示我想要实现的目标。

```
-- Create the table T1
    CREATE TABLE [dbo].[T1](
    [department] [nvarchar](50) NULL,
    [dateofsale] [datetime] NULL,
    [totalsales] [decimal](18, 5) NULL
    ) ON [PRIMARY]

-- Add some data 
    INSERT [dbo].[T1] ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29B00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))
    INSERT [dbo].[T1] ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A27D00000000 AS DateTime), CAST(300.00000 AS Decimal(18, 5)))
    INSERT [dbo].[T1] ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29C00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))

-- The query
    declare @dataBegin datetime
    declare @dataEnd datetime
    set @dataEnd = '21/12/2013'
    set @dataBegin = DATEADD(month,-11, @dataEnd) - (DAY(@dataEnd)-1)
    set @dataEnd = DATEADD(month,1, @dataEnd) - (DAY(@dataEnd))
    SELECT department,SUM(totalsales) AS totsales, MONTH(dateofsale) as month, YEAR(dateofsale) as year
    FROM T1
    WHERE dateofsale >= @dataBegin AND dateofsale< @dataEnd 
    GROUP BY department,MONTH(dateofsale), YEAR(dateofsale)
    ORDER BY department,MONTH(dateofsale), YEAR(dateofsale) 
```

在查询结果之前添加数据将如下：

```
 department  /totsales/  month /year
    0001/ 300.00000 /11 /2013
    0001/ 400.00000 /12 /2013 
```

问题是我还想要总销售额为零的月份。所以结果一定是：

> ```
> department    /totsales/  month /year
> 0001/ 0   /1  /2013
> 0001/ 0   /2  /2013
> 0001/ 0   /3  /2013
> 0001/ 0   /4  /2013
> 0001/ 0   /5  /2013
> 0001/ 0   /6  /2013
> 0001/ 0   /7  /2013
> 0001/ 0   /8  /2013
> 0001/ 0   /9  /2013
> 0001/ 0   /10 /2013
> 0001/ 300.00000   /11 /2013
> 0001/ 400.00000   /12 /2013 
> ```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:38:32.203

你可以创建一个表 Months 并用它做一个左连接

```
SELECT *
FROM Months M
LEFT JOIN T1 T ON M.month = T.Month 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:14:42.007

您不需要模拟丢失的行，只需为其获取正确的值。

注意：数据不仅需要按年轮换，还需要按部门轮换。否则，您将获得 NULL 值

```
 -- Create the table T1
    DECLARE  @T1 TABLE(
    [department] [nvarchar](50) NULL,
    [dateofsale] [datetime] NULL,
    [totalsales] [decimal](18, 5) NULL
    ) 

-- Add some data 
    INSERT @T1([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29B00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))
    INSERT @T1([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A27D00000000 AS DateTime), CAST(300.00000 AS Decimal(18, 5)))
    INSERT @T1([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29C00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))
    INSERT @T1([department], [dateofsale], [totalsales]) VALUES (N'0003', CAST(0x0000A29C00000000 AS DateTime), CAST(100.00000 AS Decimal(18, 5)))
-- The query
DECLARE @dataBegin DATETIME
DECLARE @dataEnd DATETIME

SET @dataEnd = '20140101'
SET @dataBegin = DATEADD(month, - 11, @dataEnd) - (DAY(@dataEnd) - 1)
SET @dataEnd = DATEADD(month, 1, @dataEnd) - (DAY(@dataEnd));

WITH Months (
    MonthNr
    ,Year
    ,Department
    )
AS (
    SELECT MonthNr
        ,Y.Year
        ,D.department
    FROM (
        VALUES (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12)
        ) M(MonthNr)
    CROSS JOIN (
        SELECT DISTINCT T.department
        FROM @T1 T
        ) D
    CROSS JOIN (
        SELECT year
        FROM (
            VALUES (2013) --insert as many years as you need
            ) T(year)
        ) Y
    )
SELECT M.department
    ,ISNULL(T.totsales, 0) totalSales
    ,M.MonthNr month
    ,M.year
FROM Months M
LEFT JOIN (
    SELECT department
        ,SUM(totalsales) AS totsales
        ,MONTH(dateofsale) AS month
        ,YEAR(dateofsale) AS year
    FROM @T1
    WHERE dateofsale >= @dataBegin
        AND dateofsale < @dataEnd
    GROUP BY department
        ,MONTH(dateofsale)
        ,YEAR(dateofsale)
    ) T ON T.month = M.MonthNr and T.department = M.Department 
ORDER BY department
    ,M.MonthNr
    ,M.Year 
```

结果：

```
department       totalSales          month       year
--------------- --------------------- ----------- -----------
0001            0.00000               1           2013
0001            0.00000               2           2013
0001            0.00000               3           2013
0001            0.00000               4           2013
0001            0.00000               5           2013
0001            0.00000               6           2013
0001            0.00000               7           2013
0001            0.00000               8           2013
0001            0.00000               9           2013
0001            0.00000               10          2013
0001            300.00000             11          2013
0001            400.00000             12          2013
0003            0.00000               1           2013
0003            0.00000               2           2013
0003            0.00000               3           2013
0003            0.00000               4           2013
0003            0.00000               5           2013
0003            0.00000               6           2013
0003            0.00000               7           2013
0003            0.00000               8           2013
0003            0.00000               9           2013
0003            0.00000               10          2013
0003            0.00000               11          2013
0003            100.00000             12          2013 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:35:33.770

您可以创建两个查询并将它们联合起来，或者要制造缺失的行，请使用 CTE。我理解您的意思是您在 11 月之前没有数据。

```
WITH months
AS 
( 
    SELECT 2013 as yr, 1 as mnth     
    UNION ALL 
    SELECT 2013 as yr, mnth+1 as mnth
    FROM months
    WHERE  mnth < 12      
) select months.yr, months.mnth, department, isnull(totsales,0.00) as totsales
from months
left join sales on sales.yr = months.yr and sales.month = months.mnth 
```

只需使用 datepart 函数从您的销售日期中提取月份。上面的查询只是为了向您展示如何获取数据中没有的月份。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:17:15.040

数字表的一大用途：

```
-- Populate numbers table; keep this around, you'll find uses for it!
;WITH
  Pass0 as (select 1 as C union all select 1), --2 rows
  Pass1 as (select 1 as C from Pass0 as A, Pass0 as B),--4 rows
  Pass2 as (select 1 as C from Pass1 as A, Pass1 as B),--16 rows
  Pass3 as (select 1 as C from Pass2 as A, Pass2 as B),--256 rows
  Pass4 as (select 1 as C from Pass3 as A, Pass3 as B),--65536 rows
  Pass5 as (select 1 as C from Pass4 as A, Pass4 as B),--4,294,967,296 rows
  Tally as (select row_number() over(order by C) as Number from Pass5)
 select Number into dbo.Numbers from Tally where Number <= 1000000

-- The query
declare @dataBegin datetime
declare @dataEnd datetime
set @dataEnd = '2013-12-21'
set @dataBegin = DATEADD(month,-11, @dataEnd) - (DAY(@dataEnd)-1)
set @dataEnd = DATEADD(month,1, @dataEnd) - (DAY(@dataEnd));
with sales as (
    SELECT department,SUM(totalsales) AS totsales, MONTH(dateofsale) as month, YEAR(dateofsale) as year
    FROM T1
    WHERE dateofsale >= @dataBegin AND dateofsale< @dataEnd 
    GROUP BY department,MONTH(dateofsale), YEAR(dateofsale)
),
all_months as (
    select distinct department, Number as [month], 2013 as [year]
    from T1 as t
    cross join dbo.Numbers as n
    where n.Number <= 12
)
select m.department, coalesce(s.totsales, 0), m.[month], m.[year]
from all_months as m
left join sales as s
    on m.department = s.department
    and m.[year] = s.[year]
    and m.[month] = s.[month]
ORDER BY m.department, m.[month], m.[year] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T14:09:23.857

当我遇到这个问题时，我设法解决这个问题的方法是创建一个临时表，创建所有必需的日期，然后`UNION`在临时表和 select 语句中的数据查询之间执行：

```
-- Create the table T1
CREATE TABLE #T1(
[department] [nvarchar](50) NULL,
[dateofsale] [datetime] NULL,
[totalsales] [decimal](18, 5) NULL
) ON [PRIMARY]
-- Add some data 
INSERT #T1 ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29B00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))
INSERT #T1 ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A27D00000000 AS DateTime), CAST(300.00000 AS Decimal(18, 5)))
INSERT #T1 ([department], [dateofsale], [totalsales]) VALUES (N'0001', CAST(0x0000A29C00000000 AS DateTime), CAST(200.00000 AS Decimal(18, 5)))

--Solution Start
DECLARE @dataBegin datetime
DECLARE @dataEnd datetime
DECLARE @CurrentDate DATETIME
SET @dataEnd = '2013-12-23'
SET @dataBegin = DATEADD(month,-11, @dataEnd) - (DAY(@dataEnd)-1)
SET @dataEnd = DATEADD(month,1, @dataEnd) - (DAY(@dataEnd))

SET @CurrentDate = @dataBegin

-- Create Temporary Table   
CREATE TABLE #calDate (calDate DATETIME)

-- Populate Table
INSERT INTO #calDate (calDate)
    SELECT @CurrentDate

WHILE DATEADD(MONTH, 1, @CurrentDate) <= @dataEnd 
BEGIN
    INSERT INTO #calDate (calDate)
        SELECT DATEADD(MONTH, 1, @CurrentDate)
    SET @CurrentDate = DATEADD(MONTH, 1, @CurrentDate)
END

-- Query Data
SELECT 
    department
    , sum(totsales)
    , month
    , year
FROM(
    SELECT '0001' as 'department',0 AS totsales, MONTH(calDate) as month, YEAR(calDate) as year FROM #calDate
    UNION
    SELECT department,SUM(totalsales) AS totsales, MONTH(dateofsale) as month, YEAR(dateofsale) as year
    FROM #T1
    WHERE dateofsale >= @dataBegin AND dateofsale< @dataEnd 
    GROUP BY department,MONTH(dateofsale), YEAR(dateofsale)
)a
GROUP BY department,month, year
ORDER BY department,month, year
DROP table #calDate
DROP table #T1 
```

上面唯一的问题是部门在临时表创建中是硬编码的，但可以作为参数传递。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T15:08:53.443

为每个月或日期和每个部门插入一个零值。现在您的数据是明确的，您的查询也得到了简化。

假设没有数据意味着零值不是一个好的数据实践。

# ios - 在越狱设备上本地拉取通知

> ID：15025174
> 
> 赞同：12
> 
> 时间：2013-02-22T13:18:08.253
> 
> 标签：ios, notifications, jailbreak

由于iOS框架不允许本地通知在发布之前执行代码，我正在寻找一种在越狱设备上实现它的方法。

*   是否在越狱设备上内置了功能来安排代码执行而无需用户交互？
*   代码应下载更新并确定用户是否应收到通知。
*   我**不想**使用推送通知，这需要外部服务器将它们推送给用户。

**更新**

好吧，我已经设法创建了一个在启动时启动并保持自身运行的守护进程。但是，发布通知需要`UIApplication`对象。根据[文档](https://developer.apple.com/documentation/uikit/uiapplication)，这个单例是由`UIApplicationMain()`方法创建的，对于常规应用程序，该方法由`main()`. 由于我希望由守护程序发布通知，因此单例为零。

**我可以创建一个实例`UIApplication`吗？或者以其他方式发布通知？**

我已经尝试调用`UIApplicationMain()`然后在应用程序委托中发布通知，以及终止应用程序，但这会暂时显示黑屏；我猜它启动了应用程序。此外，当应用程序无法启动时（当手机尚未完全启动时），它会导致守护程序崩溃。

**这是代码的草图**

```
int main(){
   if(launchedBySpringBoard || launchedBynotification)
      UIApplicationMain(...);
   else if(launchedByDaeamon)
      StartRunLoop();
}

void triggerdByRunLoopEveryXhours(){
    downloadData();
    if(isNewData())
       postNotification();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T22:44:53.037

> ...或者以其他方式发布通知？

**是**的。您可以使用触发通知（*不一定*是`UILocalNotification`）的后台（启动）守护程序来完成这项工作。当通知向用户显示警报时，您的守护程序可以决定是否打开普通的 UI 应用程序。

## 构建启动守护程序。

[这是我找到的最好的教程](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)。启动守护程序在手机启动时启动，并一直作为非图形后台进程运行。从那里，您可以安排检查更新。（我有一个`HelloDaemon`在方法中完成所有工作的类`run:`）：

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        HelloDaemon* daemon = [[HelloDaemon alloc] init];

        // start a timer so that the process does not exit.
        NSTimer* timer = [[NSTimer alloc] initWithFireDate: [NSDate date]
                                                  interval: 1.0
                                                    target: daemon
                                                  selector: @selector(run:)
                                                  userInfo: nil
                                                   repeats: NO];

        NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
        [runLoop addTimer: timer forMode: NSDefaultRunLoopMode];
        [runLoop run];
    }    
    return 0;
} 
```

守护进程可以`NSTimer`正常使用，因此安排另一个计时器（在 内`run:`）检查更新以随时下载。

## 从守护进程通知用户

如果守护进程决定**应该**通知用户，那么您可以：

**1)**打开完整的 UI 应用程序。

```
#include <dlfcn.h>
#define SBSERVPATH "/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices"

-(void) openApp {

    // the SpringboardServices.framework private framework can launch apps,
    //  so we open it dynamically and find SBSLaunchApplicationWithIdentifier()
    void* sbServices = dlopen(SBSERVPATH, RTLD_LAZY);
    int (*SBSLaunchApplicationWithIdentifier)(CFStringRef identifier, Boolean suspended) = dlsym(sbServices, "SBSLaunchApplicationWithIdentifier");
    int result = SBSLaunchApplicationWithIdentifier(CFSTR("com.mycompany.AppName"), false);
    dlclose(sbServices);
} 
```

此代码需要`com.apple.springboard.launchapplications`您的守护程序授权才能成功使用它。 [有关添加权利的信息，请参见此处](https://stackoverflow.com/a/14885266/119114)。*您的守护程序*可执行文件需要一个 entitlements.xml 文件，如下所示：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>com.apple.springboard.launchapplications</key>
        <true/>
    </dict>
</plist> 
```

**2)**从你的守护进程中显示一个[简单的警报窗口](https://stackoverflow.com/a/2441486/119114)，通知用户该事件，并提示他们打开 UI 应用程序

```
#include "CFUserNotification.h"

-(void) showAlert {

    NSMutableDictionary* dict = [NSMutableDictionary dictionary];
    [dict setObject: @"Alert!" forKey: (__bridge NSString*)kCFUserNotificationAlertHeaderKey];
    [dict setObject: @"Updates Ready!" forKey: (__bridge NSString*)kCFUserNotificationAlertMessageKey];
    [dict setObject: @"View" forKey:(__bridge NSString*)kCFUserNotificationDefaultButtonTitleKey];
    [dict setObject: @"Cancel" forKey:(__bridge NSString*)kCFUserNotificationAlternateButtonTitleKey];

    SInt32 error = 0;
    CFUserNotificationRef alert =
    CFUserNotificationCreate(NULL, 0, kCFUserNotificationPlainAlertLevel, &error, (__bridge CFDictionaryRef)dict);

    CFOptionFlags response;
    // we block, waiting for a response, for up to 10 seconds
    if((error) || (CFUserNotificationReceiveResponse(alert, 10, &response))) {
        NSLog(@"alert error or no user response after 10 seconds");
    } else if((response & 0x3) == kCFUserNotificationAlternateResponse) {
        // user clicked on Cancel ... just do nothing
        NSLog(@"cancel");
    } else if((response & 0x3) == kCFUserNotificationDefaultResponse) {
        // user clicked on View ... so, open the UI App
        NSLog(@"view");
        [self openApp];
    }
    CFRelease(alert);
} 
```

您需要一个`CFUserNotification.h`标题才能按照我上面的方式使用代码。您可以通过谷歌搜索找到一个，或[在此处查看一个](http://www.opensource.apple.com/source/CF/CF-476.14/CFUserNotification.h)。这个[较旧的 wiki 文档](http://iphonedevwiki.net/index.php/CFUserNotification)还显示了一些有关`CFUserNotification`从 iOS 应用程序使用的有用信息。

[我从上面的 KennyTM 链接到](https://stackoverflow.com/a/2441486/119114)的答案还显示了如何使警报弹出显示，即使设备被锁定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T21:30:19.157

首先，让我说 BigLex 提供了非常有趣的信息。但是，我从未尝试为越狱的 iphone 编写守护程序。所以，我不知道限制（看起来有一些限制 - 比如 UIApplication sharedApplication 是零。

几个想法：

# 背景

1）如果您计划通过 Cydia 分发（意味着应用程序最终将位于系统卷上），您可以使用两种未记录的后台模式：

“continuos”（这个会一直在后台运行）“unboundedTaskCompletion”（这个会有无限时间，如果你会做 [UIApplication beginBackgroundTaskWithExpirationHandler]

您可以在[此处查看](https://code.google.com/p/isynergyclient/source/browse/trunk/Resources/Info.plist?r=2)使用 continouse 的示例 Info.plist。

2）还有其他方法可以获得永久背景（甚至不需要越狱设备）。

例如，常见的方法是在循环上运行静音音频。[这](https://github.com/mokten/CocoaHTTPServer/commit/17aed4cb1c179c261e02e31f9dcd139ba899daa2)是如何执行此操作的示例。

请注意，此方法不会被 App Store 接受。

3) 在这种情况下，如果您使用路线 1) 或 2)，您将可以访问 [UIApplication sharedApplication) 来发布本地通知

4）您可能有兴趣查看[Backgrounder](https://github.com/ashikase/Backgrounder)。我相信它为越狱设备实现了后台功能。但是，它可能已过时。

# UIApplication 的守护进程问题

5）关于守护进程的问题。如果你仔细阅读[那篇文章](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)，你会看到

> 首先要注意的是，使用 UIApplication 类来启动你的守护进程是不好的（它占用的内存比我们需要的要多），所以我们要编写自己的 main 方法。

因此，那里的代码针对内存进行了优化。但是，我很确定您可以将其替换为常见的 iOS 应用程序代码：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

结果，我认为您应该拥有 UIApplication 单例并且应该能够发布本地通知。

是的......它会消耗额外的 X 千字节内存，但谁在乎（如果你没有运行 100 个这样的守护进程）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T13:23:00.737

只是猜测，这不是一个真正的答案，但也许您可以使用 MobileSubstrate 的挂钩功能来挂钩操作系统的通知处理过程，并告诉操作系统执行一些代码来检查通知是否来自您的应用程序，如果是这样的话，检查更新并决定是否应该显示通知？

或者，也许您可​​以启动一个后台进程，每隔 X 分钟检查是否有任何更新，如果有，则立即设置本地通知。不知道你怎么能做到这一点。

# mysql-workbench - MySQL Workbench 需要 sudo 密码

> ID：15025178
> 
> 赞同：1
> 
> 时间：2013-02-22T13:18:29.600
> 
> 标签：mysql-workbench, sudo

我在运行 OS X 10.8.2 的 Mac 上安装了 MySQL Server 和 MySQL Workbench。在我尝试`innodb_buffer_pool_size`通过更改配置文件来增加之前，我没有任何问题。从那时起，如果我尝试访问服务器日志、配置文件或用户和权限，我会被要求输入 sudo 密码。但是，对话框指示用户名 as`'Nick'`而我的 Mac OS 用户名是`'Nick Francis'`. 我已经尝试过 root 密码和我常用的用户密码，但都不起作用。如何更改用户或重置密码？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:06:29.470

Go to Manage Server Instances and select the instance you wanna change. Switch to the System Profile tab. There's a field "Sudo command". There you can enter your password. Use the command shown there in a terminal to verify it works as expected or change it what fits best for you.

# java - 从android活动中提取并将其放入数据包的类中的方法？会出什么问题？

> ID：15025179
> 
> 赞同：1
> 
> 时间：2013-02-22T13:18:30.423
> 
> 标签：java, android

你好聪明的人！

所以，我有这个活动，它使用了一些我自己制作的方法，这些方法当然包含其他方法，而那些其他方法恰好是 android.* 的一部分；包裹。

到目前为止没有什么奇怪的......

为了Java，我打算采用模块化并使我的代码更漂亮，所以我认为为什么不将我的方法提取到其他类中，它不是一个Activity子类，它只是一个包含我可以调用的静态方法的容器我的活动……

更准确地说，这是我的方法：

```
// This function reads a txt file is my MATLAB vector and converts it
// into an Integer[] array for use by the plot function
public Integer[] convertFiletoIntegerArray(int id)
        throws NotFoundException, NumberFormatException {

    List<Integer> vector = new ArrayList<Integer>();

    InputStream in = getResources().openRawResource(id);
    Scanner sc = new Scanner(new InputStreamReader(in));

    while (sc.hasNext()) {

        vector.add(Integer.parseInt(sc.nextLine()));
    }

    Integer[] splVector = vector.toArray(new Integer[0]);
    return splVector;
} 
```

我在我的 Methods.java 类中使用这段代码并裁剪粘贴......

好吧，一开始我将我的方法声明为静态但不断收到此错误：

```
line 81: InputStream in = getResources().openRawResource(id);

error: The method getResources() is undefined for the type Methods 
```

在我的考虑中，该`getResources()`方法不能在不是一个`Activity`或什么的类中使用....

我真的不知道如何解决这个问题，我再次寻求帮助..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:23:02.277

该方法需要访问上下文或资源。你有两个选择：

1.  将上下文作为参数传递给方法
2.  将上下文传递给`Methods`构造函数并将其保存为成员字段。

我推荐第一个，因为根据您的代码的结构，如果活动被破坏并重新创建（例如，由于设备重新定向），第二个可能会泄漏内存。第一种方法具有允许该方法是静态的额外好处。

```
public static Integer[] convertFiletoIntegerArray(int id, Context activity)
        throws NotFoundException, NumberFormatException {

    List<Integer> vector = new ArrayList<Integer>();

    InputStream in = activity.getResources().openRawResource(id);
    Scanner sc = new Scanner(new InputStreamReader(in));

    while (sc.hasNext()) {

        vector.add(Integer.parseInt(sc.nextLine()));
    }

    Integer[] splVector = vector.toArray(new Integer[0]);
    return splVector;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:22:46.280

我认为您应该在 context 上调用 getResources() 方法。

将上下文作为参数传递给方法

就像打电话一样`mContext.getResources()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:23:15.487

`getResources()`是上下文中的一个方法。由于您的类不再扩展 Context（您之前扩展了 Activity，并且 Activity 扩展了 Context），因此您无法再访问此方法。

为了能够在非 Context 类中调用此类方法，您需要一个 Context 实例，您可以通过该实例获取并存储在您的构造函数中。就像是：

```
public class Helper {
    Context mContext;

    public Helper(Context context) {
        mContext = context;
    }

    // This function reads a txt file is my MATLAB vector and converts it
    // into an Integer[] array for use by the plot function
    public Integer[] convertFiletoIntegerArray(int id) throws NotFoundException, NumberFormatException {

        List<Integer> vector = new ArrayList<Integer>();

        InputStream in = mContext.getResources().openRawResource(id);
        Scanner sc = new Scanner(new InputStreamReader(in));

        while (sc.hasNext()) {
            vector.add(Integer.parseInt(sc.nextLine()));
        }

        Integer[] splVector = vector.toArray(new Integer[0]);
        return splVector;
    }
} 
```

现在在您的活动中使用它：

```
Helper helpclass = new Helper(getBaseContext());
helpclass.convertFiletoIntegerArray(YourID); 
```

请注意，如果这些方法中的任何一个需要创建和显示任何类型的对话框，您将需要有一个有效的（可见的）Activity 的上下文。

# c - c中的字符数组问题

> ID：15025188
> 
> 赞同：0
> 
> 时间：2013-02-22T13:18:47.380
> 
> 标签：c, memory-management

这是我的代码：

```
 #include        
 #include        

 int main(int argc, char *argv[]) {

        const char **keywords;
        const char **values;
        char line[50];
        char *prop, *val, *tmp;
        int i = 0, j = 0;
        FILE *creds = fopen("/path/to/file.props", "r");

        keywords = malloc(5);
        values = malloc(5);

        while (fgets(line, LINE_SIZE, creds) != NULL) {
                if (line[strlen(line) - 1] == '\n')
                        line[strlen(line) - 1] = '\0';
                prop = line; 
                while(*(prop++) != '=') {
                        i++;
                }       
                tmp = prop;
                prop = malloc(i + 1);
                strncpy(prop, line, i);
                prop[i] = '\0';
                keywords[j] = prop;
                val = malloc(strlen(line) - strlen(prop));
                strcpy(val, tmp);
                values[j++] = val;
                i = 0;
        }
printf("%s %s %s %s %s\n", keywords[0], keywords[1], keywords[2], keywords[3], keywords[4]);
} 
```

现在，`file.props`有这样的内容：

```
 hostaddr=127.0.0.1
port=5432
user=username
password=mypass
dbname=my_db_name 
```

当我运行程序时，我得到：

> @raddr 端口 用户密码 dbname

如果我用正确的方式注释该行`values[j++] = val`并正确递增`j`，则输出应该是这样的：

> hostaddr 端口 用户密码 dbname 。

任何人都可以指导我并说明我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:27:56.483

线条

```
keywords = malloc(5);
values = malloc(5); 
```

给你5字节的内存。我想你想要 5 个元素数组。这些将像分配

```
keywords = malloc(5 * sizeof(*keywords));
values = malloc(5 * sizeof(*values)); 
```

目前，您正在写入超出为`keywords` 和分配的内存的末尾`values`。这样做的影响是未定义的（因此无法预测），但听起来超出一个数组末尾的写入正在破坏另一个数组使用的内存。

# google-chrome-extension - 在我发布 rss 提要时显示 chrome 扩展桌面通知框？

> ID：15025191
> 
> 赞同：0
> 
> 时间：2013-02-22T13:18:56.883
> 
> 标签：google-chrome-extension, rss, push-notification, feed

发布 rss 提要时如何显示 chrome 扩展桌面通知框？以及如何在 chrome 扩展图标上显示多少个提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:58:34.620

桌面通知框： [https ://developer.chrome.com/extensions/notifications.html](https://developer.chrome.com/extensions/notifications.html)

注意 createHTMLNotification 函数在当前版本的 chrome 中不可用

在 chrome 扩展图标上显示提要数量：

[https://developer.chrome.com/extensions/browserAction.html#method-setBadgeText](https://developer.chrome.com/extensions/browserAction.html#method-setBadgeText)

# java - 为什么不在 JAVA 中创建对象？

> ID：15025199
> 
> 赞同：-4
> 
> 时间：2013-02-22T13:19:29.173
> 
> 标签：java, android

我正在看一些 android 教程并且有一个问题。为什么你写你的类而不像 cpp 那样创建对象/使用方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:22:30.250

许多实例化是由框架完成的，因此您很少需要手动实例化类。但是，当需要时，您仍然会实例化您自己的支持类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:24:53.557

幕后有些东西。你看不到所有的魔法。

对象实际上不是由您创建的，而是由超类创建的。

# javascript - Flexslider - 如何在滑块外显示标题？

> ID：15025202
> 
> 赞同：0
> 
> 时间：2013-02-22T13:19:44.087
> 
> 标签：javascript, jquery, jquery-plugins, flexslider, woothemes

我正在用拇指旋转木马构建一个滑块，它工作得很好！每个滑块项目都有标题，现在我想在滑块之外显示标题。字幕正在显示，但不会与滑块一起滑动。

我怎样才能解决这个问题？

```
 <div id="wrapper">
     <div id="container">
    <div id="slider" class="slider">
            <ul class="slides">
        <li><img class="image" src="image_1.jpg" /></li>
                <li><img class="image" src="image_2.jpg" /></li>
                <li><img class="image" src="image_3.jpg" /></li>
                <li><img class="image" src="image_4.jpg" /></li>
            </ul>
        </div>
    </div>
</div>

<div class="captions">
    <ul class="slides">
    <li><p>Slide 1 caption</p></li>
        <li><p>Slide 2 caption</p></li>
        <li><p>Slide 3 caption</p></li>
        <li><p>Slide 4 caption</p></li>
    </ul>
</div>

<div id="footerwrapper">
    <div id="carousel" class="flexslider">
    <ul class="slides nd-gallery-list">     
        <li><img class="thumb" src="thumb_1.jpg"></li>
            <li><img class="thumb" src="thumb_2.jpg"></li>
            <li><img class="thumb" src="thumb_3.jpg"></li>
            <li><img class="thumb" src="thumb_4.jpg"></li>
    </ul>
    </div>
</div>

<script type="text/javascript">
$(window).load(function() {

  $('#carousel').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    itemWidth: 103,
    itemMargin: 0,
    asNavFor: '#slider'
  });

  $('#slider').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    animationSpeed: 1,
    sync: "#carousel",
  });
});
  </script> 
```

项目链接：http: [//goo.gl/H715x](http://goo.gl/H715x)

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T14:07:25.420

*very-easy-and-dirty-trick*：如果您`position: absolute`从 .flex-caption 选择器中删除 css 属性，则标题将放置在图像本身的下方。您可以手动编辑 .css 文件或通过 jQuery 动态删除。

就样式而言，结果并不是最好的，但您可以通过对 CSS 进行更多修改来获得更好的结果。

# java - 将现有图像与动态报告一起使用

> ID：15025209
> 
> 赞同：1
> 
> 时间：2013-02-22T13:19:58.130
> 
> 标签：java, dynamic-reports

我正在将现有图像导出到 DynamicReports：

```
public class DReportSample {

    public DReportSample() {
        build();
    }

    private void build() {  
            StyleBuilder boldStyle         = stl.style().bold();
            StyleBuilder boldCenteredStyle = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.CENTER);
            //BufferedImage img = new BufferedImage(1200,1200,BufferedImage.TYPE_INT_RGB);
           BufferedImage img = null;
try {
   // img = ImageIO.read(new File("D:/Hysteresis.png"));
    img = ImageIO.read(new File("D:/Hysteresis.png"));
} catch (IOException e) {
}
        try {
            report()//create new report design
                         // .setColumnTitleStyle(boldStyle)
                         // .setColumnStyle(boldStyle)
                          .highlightDetailEvenRows()
              .columns(//add columns

                col.column(null,"Col_1",      type.stringType()),
                col.column(null,"Col_2",  type.stringType())
                                )
                           .summary(
        cmp.verticalList()
            .add(cmp.text("\n\nHYSTERISIS PLOT").setStyle(boldStyle))

            .add(cmp.image(img))  // Add the exported chart image to the report.

    )
              .title(cmp.text("XYZ Hospital").setStyle(boldCenteredStyle))//shows report title
              .pageFooter(cmp.pageXofY())//shows number of page at page footer
              .setDataSource(createDataSource())//set datasource
              .show();//create and show report
        } catch (DRException e) {
            e.printStackTrace();
        }
    } 
```

但问题是图像似乎是固定大小的，比如（300,300）像素。我希望它看起来更大，

我尝试手动将图像大小调整为双倍大小，然后使用上面的代码，但它再次出现相同大小（300,300）

然后我尝试通过我的代码使用调整大小的版本并尝试：

```
BufferedImage img = new BufferedImage(1200,1200,BufferedImage.TYPE_INT_RGB); 
```

但它没有用：

然后我尝试了：

```
.add(cmp.image(img.getScaledInstance(600, 600, 5))) 
```

它使图像看起来更小。

有人可以让我知道如何在我的动态报告文件中导入所需尺寸的图像。另请指导，我如何更改文本的字体样式、颜色和大小。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:30:18.930

.add(cmp.image(img).setFixedDimension(500, 400))

解决了这个问题。

有人可以告诉我如何在动态报告中更改我的文本的字体样式、颜色和大小

# android - 在所有设备、android、IntelliJ 上运行和调试

> ID：15025212
> 
> 赞同：1
> 
> 时间：2013-02-22T13:20:07.927
> 
> 标签：android, intellij-idea, device

有没有类似的东西：

> 打开'项目属性'-->'运行/调试设置'-->'{我的项目}'-->'{target}'-->'在所有兼容的设备/AVD's上启动'

这可以在 eclipse 中找到，但是对于 IntelliJ？

# wordpress - wordpress woocommerce 模板文件覆盖

> ID：15025213
> 
> 赞同：3
> 
> 时间：2013-02-22T13:20:10.300
> 
> 标签：wordpress, wordpress-theming, woocommerce

我正在使用[woocommerce](http://wordpress.org/extend/plugins/woocommerce/)开发电子商务商店。woocommerce 一切都很好。但我有一个问题。因为我想在产品页面（基于商店的页面）中显示一些带有一些文本的自定义图像。因此，我认为[wordpress 高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)会很好。我让它安装。现在我需要在模板文件中提取图像。但是通过 woocommerce 插件，我知道它不使用 wordpress 模板。Woocommerce 正在自行生成总页面（生产者页面）。我想展示一些来自[wordpress 高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)插件的自定义字段。那么有人可以告诉我该怎么做吗？任何帮助和建议都将是非常可观的。谢谢...

**我希望显示所有产品的 woocommerce 商店页面应该使用我自己的自定义模板。这样我就可以在那里使用 wordpress 高级自定义字段代码**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:49:03.723

为了从 中覆盖 Woocommerce 模板，请在`wp-content/plugins/woocommerce/templates`中创建一个具有相同名称的文件`wp-content/themes/<your theme>/woocommerce`。它将被用来代替原来的。

如果您查看[其中一个原始模板文件](https://github.com/woothemes/woocommerce/blob/master/templates/single-product.php)，您实际上会在顶部的注释中找到此说明：

> 通过将其复制到 yourtheme/woocommerce/single-product.php 来覆盖此模板

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T14:18:38.833

WooCommerce 不使用您主题中的普通模板文件（它使用页眉和页脚等，但大部分实际内部内容被拆分为许多 Woo 模板文件）。

您可以将模板复制出`plugins/woocommerce/templates`目录并将它们移动到`themes/yourtheme/woocommerce`目录以覆盖（只需选择您需要的模板）。

[可以在此处找到](http://wcdocs.woothemes.com/codex/template-structure/)所有模板的列表。[可以在此处找到](http://wcdocs.woothemes.com/codex/extending/hooks/)用于更高级自定义的有用 php 挂钩/过滤器列表。其他有用的资源是[CSS 结构文档](http://wcdocs.woothemes.com/codex/css-structure/)和这个WC[条件模板标签列表。](http://wcdocs.woothemes.com/codex/theming/conditional-tags/)

对于 WC 的具体主题开发，有一些乏善可陈的文档，因此您可能需要花一些时间来试验模板以完成您想要的，但是一旦您了解了您的绕路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-13T13:54:59.380

我找到了一个很棒的免费 woocommerce 插件列表和一些自定义提示。也许会有所帮助。 [http://fivera.net/woocommerce-customization-free-wp-plugins/](http://fivera.net/woocommerce-customization-free-wp-plugins/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-09T20:31:06.837

对于产品页面和您网站中显示主页或类别页面等产品的任何部分，负责它的代码存在于 woocommerce-template.php 第 29 行

```
<?php if ( have_posts() ) : ?>

                <?php do_action('woocommerce_before_shop_loop'); ?>

                <?php woocommerce_product_loop_start(); ?>

                    <?php woocommerce_product_subcategories(); ?>

                    <?php while ( have_posts() ) : the_post(); ?>

                        <?php woocommerce_get_template_part( 'content', 'product' ); ?>

                    <?php endwhile; // end of the loop. ?>

                <?php woocommerce_product_loop_end(); ?>

                <?php do_action('woocommerce_after_shop_loop'); ?>

            <?php elseif ( ! woocommerce_product_subcategories( array( 'before' => woocommerce_product_loop_start( false ), 'after' => woocommerce_product_loop_end( false ) ) ) ) : ?>

                <?php woocommerce_get_template( 'loop/no-products-found.php' ); ?>

            <?php endif; 
```

您可以使用钩子和过滤器来更改某些部分，或者您可以在**主题/您的主题/woocommerce/functions.php**中覆盖函数本身， 也可以直接编辑，但这是不可取的，因为您将在任何升级后丢失更改。

请注意，在第 71 行，此函数使用模板文件 content-product.php，它是用于在循环中显示产品内容的模板，可以通过将其复制到**yourtheme/woocommerce/content-product.php来覆盖**

# android - 在两个活动之间切换时，在两者之间制作动画时显示第三个视图？

> ID：15025217
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:20:29.353
> 
> 标签：android, android-animation

我有一个`GridView`显示我的应用程序中所有活动的图像。当用户单击其中一项时`GridView`，我想开始该活动。我们称它为started `Activity`，FirstActivity。现在，当用户单击 FirstActivity 中的按钮时，我想启动第二个 Activity，我们将其称为 SecondActivity。但是，当从 FirstActivity 转换到 SecondActivity 时，我想显示两者之间的 GridView。

它看起来像这样：

GridActivity（选中网格项）-> FirstActivity
FirstActivity（按钮单击）-> GridActivity -> SecondActivity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:26:05.783

您可以使用[ActivityOptions](http://developer.android.com/reference/android/app/ActivityOptions.html)类在 Activity 开关上制作自定义动画。遗憾的是，它仅适用于 API v16

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T13:51:22.020

您可以在 2 之间启动一个新的 Activity，这将是一个动画。

这就是我的做法：

在activity1中，单击按钮时我调用activity2，它只是一个带有progressBar和一些动画的视图，它一直持续到我的acitivity3准备好打开，然后我的activity2启动activity3。

如果你只是想要那个动画，但你没有任何真正的加载要做，你可以使用线程来模拟一些工作，例如 3 秒，然后调用目标活动。

# asp.net-mvc - MVC OAUTH VS2012模板，redirect_uri在哪里输入？

> ID：15025218
> 
> 赞同：8
> 
> 时间：2013-02-22T13:20:33.783
> 
> 标签：asp.net-mvc, oauth

MVC OAUTH VS2012 模板 VB.Net

我正在添加 OAuth，以便我的用户可以通过 Facebook 等登录。我在 RegisterAuth 函数中输入了我的 clientSecret 和 ClientID。当我运行代码时，我得到： -

为输入参数“redirect_uri”提供的值无效。预期值为“ [https://login.live.com/oauth20_desktop.srf](https://login.live.com/oauth20_desktop.srf) ”或与为此客户端应用程序注册的重定向 URI 匹配的 URL。”

我到处搜索以找到输入 URL 的位置。我认为它默认为“/Account/ExternalLoginCallback”，但这对外部授权者没有用。

我认为这将是显而易见的，但我只是看不到它！

谢谢约翰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-25T06:58:34.820

Lukos 的回答很好，但在 ASP.NET MVC 5 中，我相信默认 URL 重定向已经改变。

使用 MVC 5（在提琴手的帮助下）我看到我们需要使用：（当然用您的站点名称替换 mysite）

```
Root domain:
www.mysite.com

Redirect URLs:
http://www.mysite.com/signin-microsoft 
```

请注意重定向 URL 末尾所需的“/signin-microsoft”。

如果这仍然对您不起作用，请使用 fiddler 并查看来自 /Account/Login 的 POST 并在响应标头中找到 redirect_uri 值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:41:48.617

当您向身份提供者注册帐户时，会将 redirect_uri 添加到身份提供者中。发生这种情况是为了当您重定向到他们的站点以登录时，它知道在身份验证发生后重定向回的位置。

注册时通常总是需要 URI，以避免人们更改它并在网络钓鱼网站中使用它来捎带您的帐户。您所说的路径对于 ASP.net MVC 是正确的（对于 Web 表单是不同的），但需要是绝对的，以便提供者可以重定向。像这样的东西：

```
http://www.mysite.com/Account/ExternalLoginCallback 
```

请注意，某些提供商（绝对是 Google）不允许此 url 是您在本地测试站点时可能想要使用的 localhost。如果您需要这样做，您可以在本地创建一个主机条目，将 www.something.com 指向 localhost，然后在您的提供商处使用 www.something.com 注册 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T13:12:11.237

如果您还没有弄清楚，对于 OAuth 2，您必须在 Microsoft 应用程序页面的“添加平台”下添加这些安全链接（以“/signin-microsoft”结尾），以用作重定向 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T10:57:14.440

Lukos 的回答对我有用，但它并没有立即起作用，我只需要等待几分钟让 MS 真正更新重定向 URI。

我按照本教程进行操作，Microsoft OAuth 现在可以使用：http: [//blogs.msdn.com/b/webdev/archive/2012/09/19/configuring-your-asp-net-application-for-microsoft-oauth-account .aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/19/configuring-your-asp-net-application-for-microsoft-oauth-account.aspx)

# java - 在 LinearLayout 中垂直居中多个 TextView

> ID：15025221
> 
> 赞同：1
> 
> 时间：2013-02-22T13:20:45.947
> 
> 标签：java, android, textview, android-linearlayout, android-relativelayout

我试图在下面的代码和屏幕截图中将 4 垂直`TextViews`居中`LinearLayout`。我知道如何将其中一个`TextViews`垂直居中，`LinearLayout`但我希望所有 4 个都垂直居中，因此 top 和 bottom 上方和下方的距离相同`TextViews`。

XML

```
<RelativeLayout  >

    <TextView />

    <LinearLayout  > 

        <TextView/>

        <TextView />

        <TextView />

        <TextView />

        <TextView />
    </LinearLayout>
</RelativeLayout> 
```

![在此处输入图像描述](../Images/468a7776318cc5c692fc2aa70f2e632e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:22:42.917

尝试将此属性添加到 all `textviews`：

```
android:layout_weight="1" 
```

并设置你`Linearlayout`的

```
android:layout_height="fill_parent" 
```

# c# - 连接字符串属性尚未初始化

> ID：15025224
> 
> 赞同：1
> 
> 时间：2013-02-22T13:20:58.660
> 
> 标签：c#, sql, .net, sql-server, database

我有以下使用查询的方法，但 Visual Studio 会引发错误，如图所示。

```
private void FindOrderData()
        {
            int intOrder = int.Parse(frmInput.InvoiceOrder);

            string InvSql = "SELECT Orders.OrderID, Orders.OrderDate, Orders.Freight," +
                "Customers.CompanyName, Customers.City, " +
                "(Employees.FirstName + Space(1) + Employees.LastName) As Salesperson " +
                "FROM ((Orders " +
                "INNER JOIN Customers ON Orders.CustomerID = Customers.CustomerID) " +
                "INNER JOIN Employees ON Orders.EmployeeID = Employees.EmployeeID) " +
                "WHERE Orders.OrderID = " + "10655";

            OleDbConnection cnn = new OleDbConnection(strCon);
            OleDbCommand cmdOrder = new OleDbCommand(InvSql, cnn);
            cnn.Open();

            OleDbDataReader rdrOrder = cmdOrder.ExecuteReader();

            // Get CompanyName, City, Salesperson, OrderID, OrderDate and Freight
            rdrOrder.Read();
            CustomerName = rdrOrder["CompanyName"].ToString();
            CustomerCity = rdrOrder["City"].ToString();
            SellerName = rdrOrder["Salesperson"].ToString();
            SaleID = rdrOrder["OrderID"].ToString();
            System.DateTime dtOrder = Convert.ToDateTime(rdrOrder["OrderDate"]);
            SaleDate = dtOrder.ToShortDateString();
            SaleFreight = Convert.ToDecimal(rdrOrder["Freight"]);
            // Get invoice total
            GetInvoiceTotal();

            rdrOrder.Close();
            cnn.Close();
        } 
```

![在此处输入图像描述](../Images/bacd2b61aae6edb6d73a818104da7291.png)

```
string strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Northwind.mdb ;Persist Security Info=False;"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:22:52.013

您需要分配`strCon`给正确的连接字符串。这个变量的值很可能是`null`或`empty`。

例如：

```
strCon = "Server=myServerAddress;Database=myDataBase;Trusted_Connection=True;";
OleDbConnection cnn = new OleDbConnection(strCon); 
```

您可以在以下位置找到所需的连接字符串：

[http://connectionstrings.com/](http://connectionstrings.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:26:57.057

如果您从其他地方复制此代码，那么您错过了`strCon`定义的行。它应该是这样的......

```
string strCon = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T12:18:14.627

请停止像 MVP 一样猜测这个......，

我可以用一个强点重现，如果发生异常，如果你已经回滚了你的事务，并尝试继续进一步的数据检索，Connection is Closed，所以错误。

如果您想了解有关您的错误的更多详细信息，请在 VS IDE 中，保持异常打开。（调试->异常，检查异常...）您会看到导致此错误的脏代码！

水工

# http - 如何将此请求标头解释为一个简单的句子？

> ID：15025228
> 
> 赞同：0
> 
> 时间：2013-02-22T13:21:15.823
> 
> 标签：http, ntlm, request-headers, negotiate

你能用一句话解释下面的Request Header要求什么吗？（这样我就可以找到每个术语的解释：Negotiate、Basic-realm、NTLM）

> **WWW-Authenticate** Negotiate NTLM Basic realm="localhost"

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:04:46.103

标头说服务器希望您进行身份验证。

它将接受 NTLM（Windows NT 局域网管理器）或基本身份验证，并且当您将其发回时，使用领域“localhost”。

您的下一个请求应包含 HTTP Authentication: XXXXXX 标头，并为您发出的请求提供适当的身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:43:15.267

这是一个损坏的标题，除非你错过了几个逗号。

# cordova - sencha touch + phonegap 整合

> ID：15025230
> 
> 赞同：0
> 
> 时间：2013-02-22T13:21:27.897
> 
> 标签：cordova, extjs

长期以来，我一直在尝试将 sencha touch 2.1 和 phonegap 集成，但没有成功。几天前，我发现了“Sencha Cordova Builder - PhoneGap 项目的自动化构建”。我按照所有说明将 sencha touch 与 phonegap 集成，安装了 JDK、android SDK、ant 和 adb。问题是，当我尝试构建包时，出现以下错误：

```
[ERR]           com.sencha.exceptions.BasicException: The following error occurred while executing this line:
C:\wamp\www\testbuilder\build.xml:9: Execute failed: java.io.IOException: Cannot run program "ant": CreateProcess error=2, The system cannot find the file specified 
```

但是安装了 ant，当我`ant`在控制台上键入时，我收到以下消息：

```
build file :build.xml does not exist 
build failed 
```

请帮我解决这个问题。

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:01:46.017

如果`ant`在 Windows 命令行中键入会发生什么？对我来说，听起来 ANT 的路径未设置为 Windows 环境路径。

检查以下指南，尤其是底部的第 3B 节：http: [//docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

引用： `Finally, you may need to include %ANT_HOME%\bin to your PATH as well. To check to see if this is required, run a command prompt and type ant. If the program can not be found add %ANT_HOME%\bin to the PATH. You may need to specify the full path instead of using the %ANT_HOME% environment variable.`

编辑：您实际收到的消息是正确的，请参阅下面的评论以进行更正。

# c# - 查找 Min DateTime 并将 DateTime 分配给局部变量

> ID：15025232
> 
> 赞同：0
> 
> 时间：2013-02-22T13:21:37.710
> 
> 标签：c#, asp.net-mvc, linq

我正在尝试获取最小日期时间，然后是最大日期时间并比较两者。但是，当我尝试从 LINQ 中提取 DateTime 值时出现以下错误。任何帮助将不胜感激。

此行引发错误：appChartDateStart = Convert.ToDateTime(dateStartType);

艾伦

> 无法将类型为“WhereSelectEnumerableIterator `2[System.Linq.IGrouping`2 [System.DateTime,LatencyApp.Domain.Models.ChartHist],<>f__AnonymousType2`1[System.DateTime]]”的对象转换为类型“System.IConvertible”。

我的代码：

```
 DateTime appChartDateStart = DateTime.MinValue;
        DateTime appChartDateEnd = DateTime.MinValue;
        var dateStartType = from row in myRow
                                group row by row.LoginDateTime_Rounded into g
                                select new { MinDateTime = g.Min(row => row.LoginDateTime_Rounded) };
        var dateEndType = from row in myRow
                                group row by row.LoginDateTime_Rounded into g
                                select new { MinDateTime = g.Max(row => row.LoginDateTime_Rounded) };
        appChartDateStart = Convert.ToDateTime(dateStartType);
        appChartDateEnd = Convert.ToDateTime(dateEndType);
        TimeSpan difAppChart = appChartDateEnd - appChartDateStart; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:25:05.787

那是因为您的选择正在创建具有属性 MinDateTime 的匿名类型。Convert.TomDateTime 方法不知道如何转换这种匿名类型。尝试做：

```
DateTime appChartDateStart = DateTime.MinValue;
DateTime appChartDateEnd = DateTime.MinValue;
var dateStartType = (from row in myRow
                        group row by row.LoginDateTime_Rounded into g
                        select new { MinDateTime = g.Min(row => row.LoginDateTime_Rounded) }).FirstOrDefault();
var dateEndType = (from row in myRow
                        group row by row.LoginDateTime_Rounded into g
                        select new { MinDateTime = g.Max(row => row.LoginDateTime_Rounded) }).FirstOrDefault();
appChartDateStart = Convert.ToDateTime(dateStartType);
appChartDateEnd = Convert.ToDateTime(dateEndType);
TimeSpan difAppChart = appChartDateEnd - appChartDateStart; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:32:19.590

我是在 LINQ sintax 中完成的，它工作得很好，而且也更干净一些：

```
DateTime appChartDateStart = DateTime.MinValue;
DateTime appChartDateEnd = DateTime.MinValue;

var dateStartType = myRow.GroupBy(x => x.LoginDateTime_Rounded).Select(x => x.Key).Min();
var dateEndType = myRow.GroupBy(x => x.LoginDateTime_Rounded).Select(x => x.Key).Max();

TimeSpan difAppChart = appChartDateEnd - appChartDateStart; 
```

完成代码：

```
 DateTime appChartDateStart = DateTime.MinValue;
        DateTime appChartDateEnd = DateTime.MinValue;
        if (histByApp.Count() != 0)
        {
            var dateStartType = histByApp.GroupBy(x => x.LoginDateTime_Rounded).Select(x => x.Key).Min();
            var dateEndType = histByApp.GroupBy(x => x.LoginDateTime_Rounded).Select(x => x.Key).Max();
            appChartDateStart = Convert.ToDateTime(dateStartType);
            appChartDateEnd = Convert.ToDateTime(dateEndType);
        }
        TimeSpan difAppChart = appChartDateEnd - appChartDateStart; 
```

# php - AS3 或 PHP - 如何从另一个数组中过滤具有多个值的数组？

> ID：15025233
> 
> 赞同：0
> 
> 时间：2013-02-22T13:21:42.450
> 
> 标签：php, arrays, actionscript-3, sorting, filter

谁能帮我解决这个问题。想象一下，您有一个列出葡萄酒的索引数组，每种葡萄酒都有名称、制造商、原产国、价格和年份。

```
var wines:Array = new Array(); 
wines = [ 

{winename:"Baron des Lougres", country:"France", year:"2008", price:"20.00", manufacture:"Le Yeats"},

{winename:"Barefoot Sauvignon", country:"USA", year:"2012", price:"12.00", manufacture:"Big Vines"},

] 
```

显然，索引数组/数据库中有更多葡萄酒。

我希望用户能够归档，例如，制造商、年份，然后选择多个国家/地区（智利、阿根廷、美国）。我必须用一系列选定的国家/地区过滤 wines 数组。我知道如何在 if 过滤中使用 && 对具有设定值的主数组进行排序，但我不知道如何将它与动态值一起使用。国家排序可能有 1 到 10 个或更多值，它的长度是动态的。我想在数组/数据库中有超过 2000 种葡萄酒，所以我希望尽可能有一个简洁的代码 CPU 精简版。

返回的值将仅来自所选国家/地区。是否可以使用数组作为条件编写 IF 语句，还是必须以其他方式执行？

就像是：

```
for (var i:uint = 0; i < wines.length; i++) 
    if (wines.year == selected_year 
&& wines.manufacture == selected_manufacture
&& wines[i].country == selected_countries_array)
{
    trace(wines[i].name);
    }
} 
```

* * *

**更新**

下面的答案，来自 bwroga 工作。它看起来与上面的代码有点不同，但这只是因为我在他回答后编辑了这个问题。但是他的代码， indexOf 部分工作完美。谢谢你。我尝试了以下方法，它奏效了！:)

```
for (var i:uint = 0; i < wines.length; i++) 
    if (wines.year == selected_year 
&& wines.manufacture == selected_manufacture
&& selected_countries_array.indexOf(wines[i].country != -1)
{
    trace(wines[i].name);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:50:21.003

你可以这样做：

```
// Actionscript
if(year == selected_year && 
   manufacture == selected_manufacture && 
   selected_counties_array.indexOf(country) !== -1
){
//action
} 
```

如果国家在 selected_countries_array 中，indexOf 将返回国家在数组中的索引。如果它不在数组中，则返回-1。

在 PHP 中，您可以这样做：

```
// Php
if($year == $selected_year && 
   $manufacture == $selected_manufacture && 
   in_array($country, $selected_counties)
){
//action
} 
```

# yii - YII 框架中的 onChangeMonthYear 选项

> ID：15025248
> 
> 赞同：0
> 
> 时间：2013-02-22T13:22:38.830
> 
> 标签：yii, jquery-ui-datepicker

谁能告诉我为什么它对我不起作用？

实际问题：在日期选择器中浏览日期时，如果未进行选择，则必须选择默认日期。

我在 Jquery Datepicker 中手动完成，但在 YII 中使用 Zii Widget 我没有得到。

```
$this->datePickerOptions = array(
  'showAnim' => 'fold',
  'dateFormat'=>'dd M yy',
  'changeMonth' => 'true',`enter code here`
  'changeYear'=>'true',
  'constrainInput' => 'false',
  'firstDay' => 1,

  'onChangeMonthYear' => 'js:function (year, MM, inst) {
     var selectedDate = new Date();
     _currentDay=this.value.toString().substr(0,2);
     selectedDate = Date.parse(MM + "" + _currentDay + " " + year );
     this.value=selectedDate.toString("dd MMM yyyy");
   }' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:15:48.463

```
'onChangeMonthYear'=>'js:function(y, m, i){                                
                      var d = i.selectedDay;
                      $(this).datepicker("setDate", new Date(y, m - 1, d));
                      }' 
```

像这样我解决了这个问题，现在当我在文本字段中更改月份和年份时，也会更改日期。谢谢你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:23:55.330

您可以尝试设置默认值。如果在选择期间没有任何变化，默认值将保持不变。

```
'defaultDate'=>'0000-00-00', 
```

# c# - 将 int 转换为 short 的更好方法？（如果不可能，则为空）

> ID：15025254
> 
> 赞同：5
> 
> 时间：2013-02-22T13:22:46.737
> 
> 标签：c#, .net

我有以下两种转换`int`为`short?`.

1.  如果值不在短范围内，则第一个失败。
2.  第二种方法有效，但它有一个不必要的`conversion to string`.

有没有更好的方法？

**编辑**：

从下面的答案：

> Int16 只是 Int32 的一个子集，因此您不需要任何转换为​​“中间”类型。

**代码**

```
//Approach 1
int vIn = 123456789;
short? vOut = Convert.ToInt16(vIn);
//Value was either too large or too small for an Int16.

//Approach 2
short? vOut2 = null;
int vIn2 = 123456789;
short number;
string characterRepresentationOfInt = vIn2.ToString();
bool result = Int16.TryParse(characterRepresentationOfInt, out number);
if (result)
{
    vOut2 = number;
} 
```

参考：

1.  [Java：从 int 到 short 的转换](http://www.roseindia.net/tutorial/java/corejava/dataconversion/int/inttoshort.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T13:25:32.977

为什么不能简单地使用演员表的内置转换？只需添加一个检查以确保它没有超出范围（如果您想要一个`null`值而不是异常）。

```
short? ConvertToShort(int value)
{
    if (value < Int16.MinValue || value > Int16.MaxValue)
        return null;

    return (short)value;
} 
```

关于您的方法：

1.  它可以工作（当然），但`null`如果`value`超出`Int16`.

2.  这太慢了。不要忘记`Int16`只是其中的一个子集，`Int32`因此您不需要任何转换为​​“中间”类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:31:23.047

这里有几个可能的解决方案。

静态辅助方法：

```
public static class Number
{
    public static bool TryConvertToShort(int value, out short result)
    {
        bool retval = false;
        result = 0;
        if (value > Int16.MinValue && value < Int16.MaxValue)
        {
            result = Convert.ToInt16(value);
            retval = true;
        }

        return retval;
    }
} 
```

用法：

```
int a = 1234;
short b;
bool success = Number.TryConvertToShort(a, out b); 
```

扩展方法：

```
public static class ExtendInt32
{
    public static bool TryConvertToShort(this int value, out short result)
    {
        bool retval = false;
        result = 0;
        if (value > Int16.MinValue && value < Int16.MaxValue)
        {
            result = Convert.ToInt16(value);
            retval = true;
        }

        return retval;
    }
} 
```

用法：

```
int a = 1234;
short b;
bool success = a.TryConvertToShort(out b); 
```

您还可以创建一个不会正常失败的帮助程序/扩展方法，而是返回默认值 (0) 或引发异常。

```
public static short ConvertToShort(int value)
{
    short result;
    if (value > Int16.MinValue && value < Int16.MaxValue)
    {
        result = Convert.ToInt16(value);
    }
    else
    {
        throw new OverflowException();
    }

    return result;
} 
```

# php - 如何使用 ajax 添加 TinyMCE 文本框

> ID：15025255
> 
> 赞同：1
> 
> 时间：2013-02-22T13:22:51.050
> 
> 标签：php, javascript, ajax, tinymce

我希望我的用户从选择列表中选择 templateId ，当用户选择然后查询数据库以根据 templateId 带来模板内容。然后我想向 textarea 显示模板内容，但它在 TinyMCE textarea 中显示 html 标签，而不是显示设计（视图）。

它仅在我在页面加载时显示相同的模板内容时才有效，但是当我尝试通过从数据库中获取相同的内容时它会失败。

希望这一切都能为您提供任何我需要的线索。

在第 1 步中，代码工作正常...

```
<textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 50%">
    <?php echo htmlspecialchars($ResultArray[0]['Contents']); ?>
</textarea> 
```

...但是选择的 onchange 值我正在调用选定的模板：

```
<select name="templateId" id="templateId" onchange="GetTemplateView(this.value);">
    <?php for($i=0; $i<count($ResultArray); $i++){ ?>
    <option value="<?php echo $ResultArray[$i]['TemplateId']; ?>"><?php echo $ResultArray[$i]['Name']; ?></option>
    <?php }?>
</select> 
```

Ajax 请求是：

```
function GetTemplateView(templateId)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {   // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else
    {   // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            if (navigator.appName == 'Microsoft Internet Explorer')
                document.getElementById("templateView").outerHTML = xmlhttp.responseText;
            else
                document.getElementById("templateView").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "js/GetTemplateView.php?id=" + templateId + "&encode=true", true);
    xmlhttp.send();
} 
```

获取模板视图.php：

```
<?php
include_once("../classes/db_utility_class.php");
$ClassObj= new Cdb();
$input        =   $_GET["id"];
$Encode       =   $_GET["encode"];

if($input!=0)
{
    $query = "SELECT Contents FROM mailtemplate WHERE TemplateId=".$input;
    $result = $ClassObj->getRowFromDB($query);
    if($result != "Error in query" || $result != "No Record Found")
    {
        if($Encode)
        {
            echo '<textarea id="ele1" name="ele1" rows="15" cols="80" style="width: 50%">';
            echo htmlspecialchars($result['Contents']);
            echo '</textarea>';
        }
        else
            echo $result['Contents'];
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:31:55.277

首先使用 jquery.ajax 更容易使用。

1\. 将 tinyMCE 存储到 processpage.php 中的变量中。

1.  并在您的 ajax 调用的成功函数中将其附加到您希望它显示的任何 div 或正文中。

查看示例代码。在需要时调用它。

```
<script>
             $.ajax({
                url: processpage.php, 
                type: 'GET',                     
                contentType: 'text/html',
                dataType: 'text',
                async: false,
                data:{
                                    showTINYMCE : 'Yes'
                                },
                success: function(msg)
                {
                    $('body').append(msg);
                },
                error: function (msg) 
                {
                }
            });

</script> 
```

在您的 processpage.php 中：

```
if($_GET['showTINYMCE'] == 'Yes')
{
$tinymce = "contains the tinymce";     
echo $tinymce;
} 
```

这会做到的。

# mysql - 我想使用选择进行更新，然后使用定义添加

> ID：15025263
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:23:09.907
> 
> 标签：mysql, sql

示例：我有一个表名 Quest 和一个名为 FLAGS 的列

```
FLAGS = 1 =>TEXT = CHARM
FLAGS = 2 =>TEXT = DISORIENTED
FLAGS = 4 =>TEXT = DISARM
FLags = 536870912 =>TEXT = Saped 
```

ETC...

我想做一个这样的 SQL 查询。

```
 Update quest set RESULTinText = 'TOTALFLAGSINTEXT' WHERE FLAGS = TOTALFLAGS in flag column; 
```

如果 flags =1，则结果将是 - RESULTinText 列中的 CHARM。

但是如果是 FLAGS 1 + Flags 2 (3) 结果将在 RESULTinText 列中变得迷人和迷失方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:27:51.343

如果您只有少数几个值，那么听起来 MySQL`set`类型就是您要寻找的。它完全符合您的要求，以位表示有效地存储值，然后允许您将它们作为字符串检索。

[这在文档](http://dev.mysql.com/doc/refman/5.0/en/set.html)中得到了最好的描述。

集合有限制，例如最多只能支持 64 个元素。就我个人而言，我通常会避免使用它们，因为正确的“基于集合”的方法是有一个单独的表，其中包含每个值和一个匹配表。然而，对于一个快速而肮脏的应用程序来说，它可能是正确的。

# javascript - 如何更改highcharts中的标题

> ID：15025267
> 
> 赞同：0
> 
> 时间：2013-02-22T13:23:26.033
> 
> 标签：javascript, jquery, highcharts

```
 $.ajax({
    type : type,

    data: form_data,
    url : geturl(a),

    dataType : 'json',

    error : function(result) {
         alert("error");
        // alert("Error occured!!");

    },

    success : function(result,data) 
    { 
    var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'line',
            marginRight: 300,
            marginBottom: 75,
            marginLeft:50,
            marginTop:80

    },
    title: {
        marginTop:100,
        text:' True Power '
    },
    xAxis: {

        categories: result[0]

    },

    yAxis: {
        title: {
            text: 'Units Of Time'
        }
    },

});

}

    }) 

      }

$(function(){
$('#b').click( function(event) {
event.preventDefault();
alert("tgg");

 chart.setTitle = ({text:"Power Factor"});

 });
 }); 
```

当我点击这个锚标签时，标题应该改变，我设置了一个 id="b" 如下 POWERFACTOR

但它给出了错误，说图表未定义。你能帮忙看看如何改变标题和系列吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:52:00.393

你看过这个例子：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/chart-settitle/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/chart-settitle/)来自文档？

```
$('#title').click(function () {
    chart.setTitle({
        text: 'New title '
    });
}); 
```

# iphone - 如何检测完整的身体，如手、腿？

> ID：15025268
> 
> 赞同：3
> 
> 时间：2013-02-22T13:23:26.380
> 
> 标签：iphone, ios, objective-c, face-detection, cifacefeature

使用[CIFaceFeature](http://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIFaceFeature/Reference/Reference.html)我们可以检测人脸特征。但我也想检测手和腿。

我们如何检测这些？是否有任何其他类或逻辑可以用来检测这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:02:33.420

OpenCV 只是“刚刚开始”。识别是一个难题，大部分仍未解决。openCV 中没有手/腿检测。您必须使用 openCV 提供的机器学习算法自己训练数据。您必须收集正面数据（例如人体图像）和负面数据（非人体图像）才能进行训练。

我建议查看此链接以加快您的速度：

1.  [http://docs.opencv.org/doc/tutorials/objdetect/table_of_content_objdetect/table_of_content_objdetect.html](http://docs.opencv.org/doc/tutorials/objdetect/table_of_content_objdetect/table_of_content_objdetect.html)
2.  [静态图像的 OpenCV haar 训练](https://stackoverflow.com/questions/4118770/opencv-haar-training-for-static-image)
3.  [http://kang.blog.com/2009/08/12/how-to-use-haartraining-in-opencv/](http://kang.blog.com/2009/08/12/how-to-use-haartraining-in-opencv/)
4.  [http://www.technolabsz.com/2011/08/how-to-do-opencv-haar-training.html](http://www.technolabsz.com/2011/08/how-to-do-opencv-haar-training.html)

# matlab - Matlab使用datenum问题将日期字符串转换为时间戳

> ID：15025271
> 
> 赞同：3
> 
> 时间：2013-02-22T13:23:37.603
> 
> 标签：matlab

我是 Matlab 的新手。我正在尝试使用 datenum 函数来解析日期字符串并转换为时间戳（如 Java 中的 getTime()）。然后，我想以秒为单位找出两个日期之间的差异。

```
datenum('2013-02-21T00:39:19Z','yyyy-mm-ddTHH:MM:ss')-datenum('2013-02-21T00:34:19Z','yyyy-mm-ddTHH:MM:ss') 
```

如果我运行上面的函数，我会得到 0.0035，我不知道它是什么值。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T13:33:32.063

[Matlab帮助说：](http://www.mathworks.com/help/matlab/ref/datenum.html)

> 日期序列号表示从固定的预设日期（0000 年 1 月 0 日）开始的**完整天数和小数天数。**

我估计你的答案可能是 0.0035 天，所以我猜它的秒数

```
ans*24*60*60 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T13:37:35.997

正如 Dan 所说，您的结果是 datenum 格式。但是，如果您想以秒为单位查找经过的时间，则有一个功能可以完全满足您的要求。

您可以使用[`etime`](http://www.mathworks.com/help/matlab/ref/etime.html)查找两个日期向量之间的经过时间。

```
d1 = datevec('2013-02-21T00:39:19Z','yyyy-mm-ddTHH:MM:ss');
d2 = datevec('2013-02-21T00:34:19Z','yyyy-mm-ddTHH:MM:ss');

elapsedTime = etime(d1,d2) % Elapsed time in seconds

elapsedTime =

   300 
```

# javascript - 同时淡入和淡出背景图像

> ID：15025276
> 
> 赞同：3
> 
> 时间：2013-02-22T13:24:01.603
> 
> 标签：javascript, jquery, background-image

问题是我的背景图像大小不同且不可预测，因此使用 CSS 过渡将为拉伸设置动画，这看起来很难看。因此，我真的需要用 JS 来做这件事。

```
var images = [
    "http://ns223506.ovh.net/rozne/e800637ee8c7de5cdaed8df8ea3635f1/wallpaper-2585508.jpg",
    "http://ns223506.ovh.net/rozne/15382371cb0d5b9319f5f4469bbc4511/wallpaper-2585497.jpg"
];

var counter = 0;
setInterval(function () {
    $(".bg").css('backgroundImage', 'url("' + images[counter] + '")');

    $('<img>').attr('src', images[++counter]); // preload the next image

    if (counter == images.length) counter = 0;

}, 2000); 
```

[http://jsfiddle.net/mVAvF/1/](http://jsfiddle.net/mVAvF/1/)

我想要做的是淡入新的背景图像，同时淡出旧的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:00:37.840

您不能在同一元素中将一个背景淡入另一个背景。您必须在当前背景的顶部或后面添加另一个元素，然后如果新元素在顶部，则将新元素淡入，如果新元素在后面，则将旧元素淡出。

我之前回答了一个类似的问题，其中包含一个 jsFiddle： [jQuery 背景图像旋转脚本 - 寻找修改](https://stackoverflow.com/questions/14500836/jquery-background-image-rotation-script-looking-to-modify/14501719#14501719)

# transparency - 图像搜索和透明度

> ID：15025277
> 
> 赞同：4
> 
> 时间：2013-02-22T13:24:09.483
> 
> 标签：transparency, autoit

我需要使用透明度（背景每隔几秒钟更改一次）找到图像（检测游戏中的文本）。我的脚本：

```
#include <ImageSearch.au3>

HotKeySet("s", "Start")
$x = 0
$y = 0

Func Start()
    $Search = _ImageSearchArea("*Trans0x40FF00 " & "trans_test.png",1,90,90,@DesktopWidth,@DesktopHeight,$x,$y,50)

    If $Search = 1 Then
        MouseMove($x, $y,10)
    EndIf
EndFunc

While 1
    Sleep(100)
WEnd 
```

它不起作用。`0x40FF00`我要搜索的图像周围都是鲜绿色，代表透明度。如何使我的图像匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-05T15:14:23.397

首先，如果您的游戏以 DirectX 模式或类似模式运行（就像大多数全屏游戏一样）。这根本行不通。（需要 DirectX 钩子或类似的东西，我认为没有人经历过编写从 AutoIt/AHK 执行所需的代码的麻烦。）

否则，在 Autohotkey 中有一个 *n 选项，它可以在正确调整时为您完成这项工作。这可能也存在于 AutoIt 中。
（*TransN 也确实存在于 AutoHotkey 中。）

# javascript - jQuery没有拿起html

> ID：15025282
> 
> 赞同：0
> 
> 时间：2013-02-22T13:24:30.567
> 
> 标签：javascript, jquery, html, dom, tags

所以我有以下HTML

```
<div class="tmpl" id="query_tmpl">
<tr>
    <td><a href="#" class="group"></a></td>
    <td class="primary_email"></td>
</tr>
</div> 
```

和以下JS：

```
 console.log($('#query_tmpl').html()); 
```

出于某种原因，这只记录了“a”标签。（例如：http: [//jsfiddle.net/L8RQq/](http://jsfiddle.net/L8RQq/)）

为什么会发生这种情况以及如何解决它以便我可以正确地拿起 tr/td？如果这有什么不同，我正在使用 jQuery 1.9.2。

更新：是的，标记是“坏 html”，但这个问题的重点是如何解决这个问题。使用现有的 HTML 并且不对其进行更改，即使内容“不好”，我如何才能获取内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:27:01.553

你周围没有`table`标签`tr`。试试这个：

```
<div class="tmpl" id="query_tmpl">
    <table>
        <tr>
            <td><a href="#" class="group"></a></td>
            <td class="primary_email"></td>
        </tr>
    </table>
</div> 
```

**[这将正确记录 div 的内容](http://jsfiddle.net/L8RQq/4/)**。

它没有记录的原因是浏览器看到一些无效`tr`和`td`标签，并删除它们，因为它们只能在 a 中`table`，只留下`a`.

如果您无法更改标记，请告诉编写该标记的人/公司来修复它。这是无效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:27:59.833

让它像这样

```
 <table class="tmpl" id="query_tmpl">
         <tr>
            <td><a href="#" class="group"></a></td>
            <td class="primary_email"></td>
         </tr>
    </table> 
```

然后它肯定会正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:28:41.383

如果您想获取 tr 或 td，您可以使用 css 操作函数，例如`children([selector])`where `selector`is finally a`class`

# css - css 字体系列：为什么某些字体无法在移动设备上呈现

> ID：15025283
> 
> 赞同：1
> 
> 时间：2013-02-22T13:24:33.327
> 
> 标签：css, font-face, font-family

有谁知道为什么我的某些字体系列无法在某些移动设备上呈现？这是一个演示字体的页面：

[http://jl.evermight.com/font/](http://jl.evermight.com/font/)

字体在桌面 chrome 浏览器、ipad 和 iphone 上正确呈现。但是当我在我的 Galaxy Note 上查看该页面时，Have A Nice Day 字体呈现为看起来像 arial 的东西。在我的朋友 nexus 4 上，祝你有美好的一天工作正常，但宇宙浓缩呈现为看起来像 arial 的东西。

有谁知道为什么？

我附上了字体应该是什么样子的截图![在此处输入图像描述](../Images/e2fab8c763199985ab587045c8547e6c.png)

**一些人声称“美好的一天”不适用于 Firefox 或 IE10 的**附加说明。**对我来说，该字体适用于 Firefox。我没有IE10，所以无法验证。**

 **如何使这种字体在我的 android 上工作？

**附加说明** 我在我的 css 文件的链接路径中输入错误。我现在已经更正了。但问题仍然出现在我的机器人浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:34:20.007

刚刚尝试了我手机上的链接 - **HTC 8s**，一切似乎都工作正常。下面是相同的屏幕截图。

**在 HTC 8S 上**

![在此处输入图像描述](../Images/96519d884e14ecc65ce7172b3d857a41.png)

**在 IE 10 上**

![在此处输入图像描述](../Images/bc61ec49d44472cefe8368544f4f1601.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:13:08.780

有可能是下载问题。您声明中列出的字体应该适用于大多数浏览器（只要确保您不在 Opera Mini 中，它并不真正支持任何东西）。

此外，Have a Nice Day 是通过`@font-face`CSS 文件中的声明加载的，但其他似乎是从 JavaScript 加载的，这可能是问题的一部分。默认情况下，Droid Sans 在 Android 手机上，所以他们可能只是将它们拉到本地，这就是他们在 Android 上全面工作的原因。从那里，它可能是 JavaScript 支持的差异（例如，如果 Universe 不起作用，则 JS 没有打开）。

另一件可能有帮助的事情是在不起作用的桌面浏览器中打开开发人员工具（对于 Firefox，您需要选择 Firebug 扩展）。检查“网络”或“网络”选项卡，看看您的字体文件是否正在下载。

如果这仍然不起作用，请尝试在声明中调整字体文件的顺序。我已经看到浏览器对订单有异议。

此外，Droid Serif 字体可从[Google Web Fonts](http://www.google.com/webfonts)获得，它可以跨浏览器使用，不会让人头疼。如果您的其他字体（或类似字体）也在那里，可能值得一看，只需使用 Google 的 Web Font Loader 来加载您的字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:31:36.730

问题已解决。显然 myfonts.com 上有一个错误损坏了我的字体文件。我联系了 myfonts.com，他们立即纠正了这个问题。然后将字体文件重新发送给我。现在一切正常。

myfonts.com 的人很棒。非常好的客户+技术支持服务。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T13:53:35.017

下面是我如何使用@fontfaces 以实现跨浏览器兼容性的链接。

[跨浏览器字体](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)**

# c# - 当我的后台工作线程被中止时，我如何捕捉到？

> ID：15025288
> 
> 赞同：0
> 
> 时间：2013-02-22T13:25:00.963
> 
> 标签：c#, .net, backgroundworker

事件处理程序会`.disposed`捡起它吗？我似乎无法弄清楚如何分配此事件处理程序 - 这就是我分配其他事件处理程序的方式：

```
 bw.ProgressChanged += new ProgressChangedEventHandler(
            delegate(object o, ProgressChangedEventArgs args)
            {
                lb_status.Text = args.ProgressPercentage.ToString() + "%";
                this.Refresh();
            });
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
            delegate(object o, RunWorkerCompletedEventArgs args)
            {
                lb_status.Text = "Ready";
                BindingSource source = new BindingSource();
                source.DataSource = ds.Tables[0];
                dataGridView1.DataSource = source;
                source.ResetBindings(false);
                button1.Enabled = true;
            }); 
```

我在使用`System.Threading.Thread.CurrentThread.Abort()`.

# ruby - 将数字序列转换为条件/范围

> ID：15025294
> 
> 赞同：3
> 
> 时间：2013-02-22T13:25:09.030
> 
> 标签：ruby, conditional, range

我有一个由成对的数字和一些值组成的数组：

```
a = [[2, :foo], [5, :bar], ..., [17, :baz]] 
```

其中可以假设没有两对具有相同的数字，并且这些对按其数字的值排序。基于这个数组`a`，我想传递一个数字`i`，它总是介于最小和最大数字之间`a`，并返回与不超过的最大数字配对的值`i`。一些预期的返回值是：

```
2 # => :foo
4 # => :foo
5 # => :bar
17 # => :baz 
```

做这个的最好方式是什么？使用散列在处理范围作为键时存在问题，并且使用`case`语句很难动态采用 to `a`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:40:38.427

如果您想要对数复杂度，则需要使用二分搜索或某种平衡搜索树。为简单起见，我建议使用[`rbtree`](http://rbtree.rubyforge.org/)gem：

```
require 'rbtree'

a = [[2, :foo], [5, :bar], [17, :baz]]
t = RBTree[a]

t.upper_bound 4  # => [2, :foo]
t.upper_bound 5  # => [5, :bar]
t.upper_bound 1  # => nil 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:01:59.767

即将到来的完美工作[`Range#bsearch`](http://ruby-doc.org/core-2.0/Array.html#method-i-bsearch):-) 这样您就可以获得正确的日志复杂性。

`bsearch`设置为在您想要最大值时找到最小值，因此您需要反转数组。享受：

```
DATA = [[2, :foo], [5, :bar], [12, :hello], [17, :baz]].reverse

def lookup(i)
  nb, val = DATA.bsearch{|nb, val| i >= nb}
  val
end

lookup 2  # => :foo
lookup 4  # => :foo
lookup 5  # => :bar
lookup 17 # => :baz 
```

今天可用[`require 'backports/2.0.0'`](https://github.com/marcandre/backports):-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:33:12.550

我并没有真正理解哈希的问题，但如果我理解正确的话，这可以正常工作。

```
a = [[2, :foo], [5, :bar], [17, :baz]]
h = Hash[a]

class Hash
  def get(i)
    return nil if i < keys.min
    i -= 1 until include?(i)
    self[i]
  end
end

h.get(4) #=> :foo
h.get(5) #=> :bar
h.get(1) #=> nil # No key below 2 exists. 
```

# android - 使用从 Mac 系统压缩的代码对 android 的压缩文件解压缩失败

> ID：15025297
> 
> 赞同：0
> 
> 时间：2013-02-22T13:25:28.390
> 
> 标签：android

在我的应用程序中，我从服务器下载压缩文件并通过此处的代码提取文件，但压缩文件包含 .DS_store 文件，因此我的解压缩失败。有没有办法避免它。

/*/////

```
 public class Decompress { 
                      private String _zipFile; 
                      private String _location; 

                      public Decompress(String zipFile, String location) { 
                        _zipFile = zipFile; 
                        _location = location; 

                        _dirChecker(""); 
                      } 

                      public boolean unZip() { 
                        try  { 
                          FileInputStream fin = new FileInputStream(_zipFile); 
                          ZipInputStream zin = new ZipInputStream(fin); 
                          ZipEntry ze = null; 
                          while ((ze = zin.getNextEntry()) != null) { 
                            Log.v("Decompress", "Unzipping " + ze.getName()); 

                            if(ze.isDirectory()) { 
                              _dirChecker(ze.getName()); 
                            } else { 
                                 byte[] buffer = new byte[1024];

                              FileOutputStream fout = new FileOutputStream(_location + ze.getName()); 
                //            for (int c = zin.read(); c != -1; c = zin.read(buffer,0,1024)) { 
                //              fout.write(buffer,0,c); 
                //            } 
                              int c;
                              while (( c = zin.read(buffer,0,1024)) >= 0) {
                                  fout.write(buffer,0,c); 
                                }

                              zin.closeEntry(); 
                              fout.close(); 
                            } 

                          } 
                          zin.close(); 
                        } catch(Exception e) { 
                          Log.e("Decompress", "unzip", e); 
                          return false;
                        } 
                           return true;
                      } 

                      private void _dirChecker(String dir) { 
                        File f = new File(_location + dir); 

                        if(!f.isDirectory()) { 
                          f.mkdirs(); 
                        } 
                      } 

                    } 
```

//// */

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:12:06.600

使用此代码

```
public class ZipHelper
{
    boolean zipError=false;

    public boolean isZipError() {
        return zipError;
    }

    public void setZipError(boolean zipError) {
        this.zipError = zipError;
    }

    public boolean unzip(String archive, File outputDir)
    {
        try {
            Log.d("control","ZipHelper.unzip() - File: " + archive);
            ZipFile zipfile = new ZipFile(archive);
            for (Enumeration<? extends ZipEntry> e = zipfile.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                unzipEntry(zipfile, entry, outputDir);

            }
            return true;
        }
        catch (Exception e) {
            Log.d("control","ZipHelper.unzip() - Error extracting file " + archive+": "+ e);
            setZipError(true);
            return false;
        }
    }

    private void unzipEntry(ZipFile zipfile, ZipEntry entry, File outputDir) throws IOException
    {
        if (entry.isDirectory()) {
            createDirectory(new File(outputDir, entry.getName()));
            return;
        }

        File outputFile = new File(outputDir, entry.getName());
        if (!outputFile.getParentFile().exists()){
            createDirectory(outputFile.getParentFile());
        }

        Log.d("control","ZipHelper.unzipEntry() - Extracting: " + entry);
        BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
        BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));

        try {
            IOUtils.copy(inputStream, outputStream);
        }
        catch (Exception e) {
            Log.d("control","ZipHelper.unzipEntry() - Error: " + e);
            setZipError(true);
        }
        finally {
            outputStream.close();
            inputStream.close();
        }
    }

    private void createDirectory(File dir)
    {
        Log.d("control","ZipHelper.createDir() - Creating directory: "+dir.getName());
        if (!dir.exists()){
            if(!dir.mkdirs()) throw new RuntimeException("Can't create directory "+dir);
        }
        else Log.d("control","ZipHelper.createDir() - Exists directory: "+dir.getName());
    }
} 
```

像这样调用这个类

```
 final String exportDirectory = Environment.getExternalStorageDirectory().getAbsolutePath()
                +"/destination file/name/";

        final String exportDirectoryArchivefile = Environment.getExternalStorageDirectory().getAbsolutePath()
                +"/original/file name/"+name;
                final File exportDirectoryFilepath = new File(exportDirectory);
                exportDirectoryFilepath.mkdirs();
                final File exportDirectoryFilepathArchive = new File(exportDirectoryArchivefile);
                boolean flag_unzip =zh.unzip(exportDirectoryArchivefile, exportDirectoryFilepath); 
```

# c++ - 设计处理对象的管道

> ID：15025298
> 
> 赞同：0
> 
> 时间：2013-02-22T13:25:31.417
> 
> 标签：c++, pipeline

最近在一次采访中被问到一个简单的设计问题：

假设有一些数据需要以管道方式处理以提高效率。假设有五个任务要完成，每个任务的输出都作为下一个任务的输入，一旦一个对象的任务完成，它就可以处理下一个。

如何设计该系统？下一个任务将如何被触发？如何将一个任务的数据提供给下一个任务？

有任何想法吗？这是在一次 C++ 采访中提出的。因此，面向 C++ 的设计会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:35:50.363

这是一个面试问题，因此他们希望您大声思考并展示您的经验的深度。没有一个“设计”甚至“答案”，因此您应该尽可能多地考虑不同的情况。

您可以将整本书都花在管道设计上，因此我不会（也不能）列出您要注意的所有方面，但这里有一些常见的方面：

*   注意瓶颈
*   在流水线任务之间有一个共同的协议
*   管道是否可以拒绝输入，甚至将它们向后传递，你如何处理这个
*   是否需要大量类型转换
*   您能否将其并行化，并在第一个项目完成之前将更多数据输入管道

# django - 我可以同时使用 UpdateView 和 DeleteView 制作视图吗？

> ID：15025300
> 
> 赞同：0
> 
> 时间：2013-02-22T13:25:33.803
> 
> 标签：django, django-forms, django-templates, django-views, django-generic-views

我正在寻找有关 django 中通用视图的一些信息。

我想要一个将为对象呈现表单的页面。在我的页面上，我想要一个提交按钮来更新对象，而另一个提交按钮将删除对象。

是否可以使用单个视图来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:41:03.150

Yes this is possible. It is possible create a view to handle update and delete functionality using both class based views and function based views. You will find it much easier using function based views. (I'm not sure what you mean by 'merge' `DeleteView` and `UpdateView`, but if you're talking about inheritance then no you can't do that).

See this [question](https://stackoverflow.com/questions/866272/how-can-i-build-multiple-submit-buttons-django-form) for starters.

# android - 在 C/native 代码中检查 .apk-signature

> ID：15025304
> 
> 赞同：9
> 
> 时间：2013-02-22T13:25:43.583
> 
> 标签：android, c, signature, verification

我开发了一个 Android 应用程序，它还包含一个用 C 编写的本机部分（不依赖于应用程序）。

如果共享库不工作，应用程序本身就毫无用处。

我想让原生部分（一个共享库）只做它的工作，如果存在它附带​​的应用程序（.apk）的未修改版本。

对我来说最好的方法是这样：

1.  应用程序安装
2.  共享库检查应用程序/.apk 的签名/哈希
3.  仅当签名与已知签名匹配时才起作用

通过这种方式，我想保护我的应用程序免受修改和盗版。

有什么建议吗？我刚刚在 Java 中找到了检查自己签名的帖子，但如果可以反编译应用程序，那可不是开玩笑的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-08T13:06:19.590

当我被要求发布一些代码时，我现在如何从 C 中检查我的 Java 应用程序的 CRC 代码，这里有一些片段。

由于性能原因，我无法发布完整的工作解决方案，因为它分布在多条线路上，但我希望这是最完整和最有效的：

在您的 MyApplication.java 中：

```
public class MyApplication extends Application {
    private static Context context;

    public static Context getAppContext() {
        return MyApplication.context;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        MyApplication.context = getApplicationContext();
    }
} 
```

安卓.mk：

```
LOCAL_CFLAGS += -O3 -DDEBUG_MODE=0 -DCLASSES_CRC=2331492378 
```

在您的 C 代码中：

```
#define LOG_TAG "Your Log Tag"

#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)
#define LOGI(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)
#define LOGE(...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)

#if DEBUG_MODE
#define LOGDH(...) LOGD(__VA_ARGS__)
#define LOGIH(...) LOGI(__VA_ARGS__)
#define LOGEH(...) LOGE(__VA_ARGS__)
#else
#define LOGDH(...) //
#define LOGIH(...) //
#define LOGEH(...) //
#endif

int isSecure = -1;

jclass MyApplication;
jclass Context;
jclass ApplicationInfo;

jclass ZipFile;
jclass ZipEntry;
jclass CheckedInputStream;
jclass Adler32;
jclass Checksum;

jmethodID MyApplication_getAppContextMethodId;
jmethodID Context_getApplicationInfoMethodId;

jmethodID ZipFile_ConstructorMethodId;
jmethodID CheckedInputStream_ConstructorMethodId;
jmethodID Adler32_ConstructorMethodId;

jmethodID ZipFile_getEntryMethodId;
jmethodID ZipFile_getInputStreamMethodId;
jmethodID CheckedInputStream_readMethodId;
jmethodID CheckedInputStream_getChecksumMethodId;
jmethodID Checksum_getValueMethodId;

jfieldID ApplicationInfo_flagsFieldId;
jfieldID ApplicationInfo_FLAG_DEBUGGABLEFieldId;
jfieldID ApplicationInfo_sourceDirFieldId;

static long getClassesCRC(JNIEnv *env) {
    jobject appContextInstance = (*env)->CallStaticObjectMethod(env,
            MyApplication, MyApplication_getAppContextMethodId);
    if (!appContextInstance) {
        LOGEH("Unable to get instance of AppContext");
        return false;
    }

    jobject applicationInfoInstance = (*env)->CallObjectMethod(env,
            appContextInstance, Context_getApplicationInfoMethodId);
    if (!appContextInstance) {
        LOGEH("Unable to get instance of ApplicationInfo");
        return false;
    }

    jobject zipFileInstance = (*env)->NewObject(env, ZipFile,
            ZipFile_ConstructorMethodId,
            (*env)->GetObjectField(env, applicationInfoInstance,
                    ApplicationInfo_sourceDirFieldId));
    if (!zipFileInstance) {
        LOGEH("Unable to get instance of ZipFile");
        return -1;
    }

    jstring classesDexString = (*env)->NewStringUTF(env, "classes.dex");
    jobject zipEntryInstance = (*env)->CallObjectMethod(env, zipFileInstance,
            ZipFile_getEntryMethodId, classesDexString);
    if (!zipFileInstance) {
        LOGEH("Unable to get instance of ZipEntry");
        return -1;
    }
    (*env)->DeleteLocalRef(env, classesDexString);

    jobject adler32Instance = (*env)->NewObject(env, Adler32,
            Adler32_ConstructorMethodId);
    if (!adler32Instance) {
        LOGEH("Unable to get instance of Adler32");
        return -1;
    }

    jobject inputStreamInstance = (*env)->CallObjectMethod(env, zipFileInstance,
            ZipFile_getInputStreamMethodId, zipEntryInstance);
    if (!inputStreamInstance) {
        LOGEH("Unable to get instance of InputStream");
        return -1;
    }

    jobject checkedInputStreamInstance = (*env)->NewObject(env,
            CheckedInputStream, CheckedInputStream_ConstructorMethodId,
            inputStreamInstance, adler32Instance);
    if (!checkedInputStreamInstance) {
        LOGEH("Unable to get instance of CheckedInputStream");
        return -1;
    }

    int bufferSize = 128;
    jbyteArray bufferBytes = (*env)->NewByteArray(env, bufferSize);

    while ((*env)->CallIntMethod(env, checkedInputStreamInstance,
            CheckedInputStream_readMethodId, bufferBytes) > 0) {
    }
    (*env)->DeleteLocalRef(env, bufferBytes);

    jobject checksumInstance = (*env)->CallObjectMethod(env,
            checkedInputStreamInstance, CheckedInputStream_getChecksumMethodId);
    if (!checksumInstance) {
        LOGEH("Unable to get instance of CheckSum");
        return -1;
    }

    return (*env)->CallLongMethod(env, checksumInstance,
            Checksum_getValueMethodId);
}

static bool isDebuggable(JNIEnv *env) {
    jobject appContextInstance = (*env)->CallStaticObjectMethod(env,
            MyApplication, Application_getAppContextMethodId);
    if (!appContextInstance) {
        LOGEH("Unable to get instance of AppContext");
        return false;
    }

    jobject applicationInfoInstance = (*env)->CallObjectMethod(env,
            appContextInstance, Context_getApplicationInfoMethodId);
    if (!appContextInstance) {
        LOGEH("Unable to get instance of ApplicationInfo");
        return false;
    }

    int FLAG_DEBUGGABLE = (*env)->GetStaticIntField(env, ApplicationInfo,
            ApplicationInfo_FLAG_DEBUGGABLEFieldId);
    int flags = (*env)->GetIntField(env, applicationInfoInstance,
            ApplicationInfo_flagsFieldId);

    return (0 != (flags &= FLAG_DEBUGGABLE));
}

static bool isSecureEnvironment(JNIEnv *env) {

    //isSecure = true; // TODO remove this

    if (isSecure == -1) {
        isSecure = true;

        if (isDebuggable(env)) {
            // someone used the app in debug-mode
#if DEBUG_MODE != 1
            // TODO report

#endif
            LOGEH("App IS DEBUGGABLE!");
            isSecure = false;
        } else {

            // check CRC
            long classesCRC = getClassesCRC(env);
            if (classesCRC != (long) CLASSES_CRC) {
#if DEBUG_MODE != 1
                // TODO report
#endif
                LOGEH("CRC-CHECK FAILED: %lu", classesCRC);

                isSecure = false;
            }
        }
    }
    return isSecure;
}

static bool initJavaClasses(JNIEnv * env) {
    jclass local = (*env)->FindClass(env, "eu/my/MyApplication");
    MyApplication = (*env)->NewGlobalRef(env, local);
    if (!MyApplication) {
    LOGEH("Unable to find the MyApplication class");
    return false;
    }
    local = (*env)->FindClass(env, "android/content/Context");
    Context = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!Context) {
    LOGEH("Unable to find the Context class");
    return false;
    }
    local = (*env)->FindClass(env, "android/content/pm/ApplicationInfo");
    ApplicationInfo = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!ApplicationInfo) {
    LOGEH("Unable to find the ApplicationInfo class");
    return false;
    }

    local = (*env)->FindClass(env, "java/util/zip/ZipFile");
    ZipFile = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!ZipFile) {
    LOGEH("Unable to find the ZipFile class");
    return false;
    }

    local = (*env)->FindClass(env, "java/util/zip/ZipEntry");
    ZipEntry = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!ZipEntry) {
    LOGEH("Unable to find the ZipEntry class");
    return false;
    }

    local = (*env)->FindClass(env, "java/util/zip/CheckedInputStream");
    CheckedInputStream = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!CheckedInputStream) {
    LOGEH("Unable to find the CheckedInputStream class");
    return false;
    }

    local = (*env)->FindClass(env, "java/util/zip/Adler32");
    Adler32 = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!Adler32) {
    LOGEH("Unable to find the Adler32 class");
    return false;
    }

    local = (*env)->FindClass(env, "java/util/zip/Checksum");
    Checksum = (*env)->NewGlobalRef(env, local);
    (*env)->DeleteLocalRef(env, local);
    if (!Checksum) {
    LOGEH("Unable to find the Checksum class");
    return false;
    }

    return true;
}

static bool initJavaMethods(JNIEnv * env) {
    MyApplication_getAppContextMethodId = (*env)->GetStaticMethodID(env,
    MyApplication, "getAppContext", "()Landroid/content/Context;");
    if (!MyApplication_getAppContextMethodId) {
    LOGEH("Unable to find the getAppContext method");
    return false;
    }
    Context_getApplicationInfoMethodId = (*env)->GetMethodID(env, Context,
    "getApplicationInfo", "()Landroid/content/pm/ApplicationInfo;");
    if (!Context_getApplicationInfoMethodId) {
    LOGEH("Unable to find the getApplicationInfo method");
    return false;
    }

    ZipFile_ConstructorMethodId = (*env)->GetMethodID(env, ZipFile, "<init>",
    "(Ljava/lang/String;)V");
    if (!ZipFile_ConstructorMethodId) {
    LOGEH("Unable to find the constructor method");
    return false;
    }

    CheckedInputStream_ConstructorMethodId = (*env)->GetMethodID(env,
    CheckedInputStream, "<init>",
    "(Ljava/io/InputStream;Ljava/util/zip/Checksum;)V");
    if (!CheckedInputStream_ConstructorMethodId) {
    LOGEH("Unable to find the constructor method");
    return false;
    }

    Adler32_ConstructorMethodId = (*env)->GetMethodID(env, Adler32, "<init>",
    "()V");
    if (!Adler32_ConstructorMethodId) {
    LOGEH("Unable to find the constructor method");
    return false;
    }

    ZipFile_getEntryMethodId = (*env)->GetMethodID(env, ZipFile, "getEntry",
    "(Ljava/lang/String;)Ljava/util/zip/ZipEntry;");
    if (!ZipFile_getEntryMethodId) {
    LOGEH("Unable to find the getEntry method");
    return false;
    }

    ZipFile_getInputStreamMethodId = (*env)->GetMethodID(env, ZipFile,
    "getInputStream", "(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;");
    if (!ZipFile_getInputStreamMethodId) {
    LOGEH("Unable to find the getInputStream method");
    return false;
    }

    CheckedInputStream_readMethodId = (*env)->GetMethodID(env, CheckedInputStream,
    "read", "([B)I");
    if (!CheckedInputStream_readMethodId) {
    LOGEH("Unable to find the read method");
    return false;
    }

    CheckedInputStream_getChecksumMethodId = (*env)->GetMethodID(env,
    CheckedInputStream, "getChecksum", "()Ljava/util/zip/Checksum;");
    if (!CheckedInputStream_getChecksumMethodId) {
    LOGEH("Unable to find the getChecksum method");
    return false;
    }

    Checksum_getValueMethodId = (*env)->GetMethodID(env, Checksum, "getValue",
    "()J");
    if (!Checksum_getValueMethodId) {
    LOGEH("Unable to find the getValue method");
    return false;
    }

    return true;
}

static bool initJavaFields(JNIEnv * env) {
    ApplicationInfo_flagsFieldId = (*env)->GetFieldID(env, ApplicationInfo, "flags",
    "I");

    if (!ApplicationInfo_flagsFieldId) {
    LOGEH("Unable to find the flags field");
    return false;
    }

    ApplicationInfo_FLAG_DEBUGGABLEFieldId = (*env)->GetStaticFieldID(env,
    ApplicationInfo, "FLAG_DEBUGGABLE", "I");
    if (!ApplicationInfo_FLAG_DEBUGGABLEFieldId) {
    LOGEH("Unable to get static field FLAG_DEBUGGABLE");
    return false;
    }

    ApplicationInfo_sourceDirFieldId = (*env)->GetFieldID(env, ApplicationInfo,
    "sourceDir", "Ljava/lang/String;");
    if (!ApplicationInfo_sourceDirFieldId) {
    LOGEH("Unable to get static field sourceDir");
    return false;
    }

    return true;
}

jint JNI_OnLoad(JavaVM* vm, void* reserved) {
    (void) reserved; // Suppress the warning.
    JNIEnv * env;

    if ((*vm)->GetEnv(vm, (void **) &env, JNI_VERSION_1_6) != JNI_OK) {
    return -1;
    }

    if (!initJavaClasses(env)) {
    return -1;
    }

    if (!initJavaMethods(env)) {
    return -1;
    }

    if (!initJavaFields(env)) {
    return -1;
    }

    return JNI_VERSION_1_6;
} 
```

不要忘记将 MyApplication 的方法添加到 Proguard-settings 中以防止它们被删除！

用法：

1.  使用 -DDEBUG_MODE=1 创建您的 APK
2.  在您的 Android 上启动 APK
3.  读取“CRC-check failed:xxx”中的值
4.  取该值并将其插入 CLASSES_CRC=xxxx
5.  切换到 -DDEBUG_MODE=0
6.  重建你的APK
7.  检查您的应用程序是否运行良好
8.  发布

这种方法稍微复杂一些，因为它需要 2 次构建才能获得有效的 APK。但是由于在 C 中检查 CRC，而不仅仅是获取 APK 文件的虚拟签名，因此这种检查几乎是万无一失的。

在我的情况下，如果签名无效，我什至不设置许可证机制。

此外，由于此方法仅使用数字而不使用字符，因此已完全编译。

希望这对某人有帮助！

# c# - 计算日期的实例

> ID：15025305
> 
> 赞同：0
> 
> 时间：2013-02-22T13:25:54.317
> 
> 标签：c#, asp.net-mvc

我确信对此有一个简单的答案，但我似乎无法通过搜索来获得正确的结果。

在我的控制器中，假设我有一个类 x 的实例列表，它又具有一个 y 类的成员变量，其中包含一个日期变量。我要做的是计算每个日期有多少实例，以构建图表。所以我想要的只是一个数组，每个不同的日期有 1 行，以及该日期发生的次数。

任何有关执行此操作的最佳方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:34:22.587

听起来你想要这样的东西。

```
var countByDate = items.GroupBy(x => x.Invoice.ReceivedDate) // Or whatever
                       .Select(g => new { Date = g.Key, Count = g.Count() })
                       .OrderBy(pair => pair.Date);
                       .ToArray(); 
```

LINQ 摇滚 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T13:34:01.290

您可以使用 Linq 的`Enumerable.GroupBy`：

```
var dayGroups = listX.GroupBy(x => x.Y.DateTimeVar.Date)
                     .Select(g => new { Day = g.Key, Count = g.Count() })
                     .ToArray(); 
```

现在你已经有了你需要的一切，日期和发生：

```
foreach(var dayGroup in dayGroups)
{
    Console.WriteLine("Day: {0} Count: {1}", dayGroup.Day.ToString(), dayGroup.Count);
} 
```

假设`DateTimeVar`是属性，并且您想按天分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:29:12.737

使用扩展方法应该会有所帮助。在不知道您拥有的类型的情况下，这是我能做的最好的事情：

```
ListOfx.Select(x => x.ClassY.Date) 
```

上一行将为您提供所有日期。然后您可以使用 GroupBy 按它们的值对它们进行分组。这应该给你一个列表列表。

```
ListOfx.Select(x => x.ClassY.Date).GroupBy(x => x.Date) 
```

我认为这应该有效。我目前无法尝试该代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:43:44.227

代码可能很笨拙，但这应该对您有用：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace App
{
    class Program
    {
        static void Main(string[] args)
        {
            List<X> xs = new List<X>
            {
                new X { Y = new Y {D = DateTime.Now}},
                new X { Y = new Y {D = DateTime.Now}},
                new X { Y = new Y {D = DateTime.Now}},
            };

            IEnumerable<DateTime> ds = xs.Select(x => x.Y.D).Distinct();

            var q = from d in ds
                    select new
                    {
                        D = d,
                        Count = xs.Count(x => x.Y.D.Equals(d))
                    };

            foreach (var i in q)
            {
                Console.WriteLine(i);
            }
        }

        class X
        {
            public Y Y { get; set; }
        }

        class Y
        {
            public DateTime D { get; set; }
        }
    }
} 
```

# java - toArray 方法在扩展 ArrayList<> 的类中不起作用

> ID：15025313
> 
> 赞同：0
> 
> 时间：2013-02-22T13:26:10.607
> 
> 标签：java, arrays, arraylist, extends

我有一个名为“Table”的类，它扩展了 ArrayList。在这个类中，我有一个名为 toArray() 的方法。每当我编译时，我都会收到错误消息：“表中的 toArray() 无法在 java.util.List 中实现 toArray() 返回类型 void 与 java.lang.Object [] 不兼容”

这是表类：

```
public class Table extends ArrayList<Row>
{
public ArrayList<String> applicants;
public String appArray[];
public String appArray2[] = {"hello", "world","hello","world","test"};

/**
 * Constructor for objects of class Table
 */
public Table()
{
    applicants = new ArrayList<String>();
}

public void addApplicant(String app)
{
    applicants.add(app);
    toArray();
}

public void toArray()
{
    int x = applicants.size();
    if (x == 0){ } else{
    appArray=applicants.toArray(new String[x]);}
}

public void list() //Lists the arrayList
{
    for (int i = 0; i<applicants.size(); i++)
    {
        System.out.println(applicants.get(i));
    }
}

public void listArray() //Lists the Array[]
{
    for(int i = 0; i<appArray.length; i++)
    {
        System.out.println(appArray[i]);
    }
} 
```

}

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T13:28:28.533

一般建议：不要从不用于客户端子类化的类扩展。`ArrayList`就是这样一个类的一个例子。而是定义您自己的实现`List`接口并包含一个`ArrayList`以重用其功能的类。这就是*装饰器*模式。

具体建议：`toArray`是一个定义在中的方法`ArrayList`，你不能用不同的返回类型覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:28:44.763

这是因为[`Collection`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)实现`ArrayList`的 已经声明了一个[`toArray()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#toArray%28%29)方法。该方法返回`Object[]`，这与您的方法的返回类型不同`void`，因此它不能用作覆盖。

您的方法似乎在做一些完全不同的事情，所以最好的解决方案是重命名它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:30:59.960

您正在重载一个名为 toArray 的方法。

尝试将其称为其他名称，例如 convertToMyArray()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:33:21.667

我不知道你想完成什么，但你的方法应该是这样的。

```
@Override
public Object[] toArray(){
      return applicants.toArray();
   }
} 
```

# jquery - jQuery this() 循环问题

> ID：15025317
> 
> 赞同：0
> 
> 时间：2013-02-22T13:26:38.313
> 
> 标签：jquery, html, css

我正在尝试使用 jQuery 为页面上的云设置动画，并在它们离开最左侧时将它们移动到页面的末尾。

```
<div class="sprite cloud" id="cloud-1"> </div> 
```

```
$(function () {
   function runIt() {

   $(".cloud").each(function(){

       var speed = 20;
       var Position = this.position().left;
       var Width =  this.width();
       if((Position + Width) < 0) 
       {
           Position = $(document).width();
           this.css("left", Position);
       }

   });

  $('#clouds').animate({"left": Position-speed},1000, "linear", runIt)}
   runIt();
}); 
```

如果我使用 $('#cloud-1') 等，它会起作用，但如果我尝试使用 each() 则不会。我收到一条错误消息

> 对象 # 没有方法“位置”

对于任何函数，例如 offset()，我都会遇到相同的错误。

$(this) 而不是 this 解决了它。

新代码：

```
$(function () {
   function runIt() {

   $(".cloud").each(function(){

   var speed = 20;
   var cloudPosition = $(this).position().left;
   var cloudWidth =  $(this).width();

   if((cloudPosition + cloudWidth) < 0) 
   {
       cloudPosition = $(document).width();
       $(this).css("left", cloudPosition);
   }

    $(this).animate({"left": cloudPosition-speed},1000, "linear", runIt)

    });

}

  setInterval(runIt, 1000)
}); 
```

它现在只动画一次。我认为这是因为 runIt 回调现在在一个循环中。我尝试将它移到循环之外，但这没有用。使用 setInterval 可以，但可能不是*正确的*方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:27:26.800

`.position`是 jQuery 对象上的一个方法，`this`内部`each`是一个 DOM 对象。

你需要使用`$(this).position`

`width`和_`css`

# javascript - 更改 Three.js collada 对象的纹理和颜色

> ID：15025319
> 
> 赞同：9
> 
> 时间：2013-02-22T13:26:42.460
> 
> 标签：javascript, three.js, webgl, textures, collada

我最近从官方网站获得了三个.js 示例，使用`ColladaLoader.js`. 现在我的问题是，如何更改加载的 collada 对象颜色属性并添加自定义纹理？我尝试添加纹理但没有运气。

这是我的代码（与原始示例略有不同）：

```
function load_model(el) {

            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var container, stats;

            var camera, scene, renderer, objects;
            var particleLight, pointLight;
            var dae, skin;

            var loader = new THREE.ColladaLoader();
            loader.options.convertUpAxis = true;
            loader.load( '/site_media/models/model.dae', function ( collada ) {
                dae = collada.scene;
                skin = collada.skins[ 0 ];

                dae.scale.x = dae.scale.y = dae.scale.z = 0.90;
                dae.updateMatrix();

                init(el);
                animate();

            } );

            function init(el) {

                container = document.createElement( 'div' );
                el.append( container );

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.set( 2, 2, 3 );

                scene = new THREE.Scene();

                scene.add( dae );

                particleLight = new THREE.Mesh( new THREE.SphereGeometry( 4, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xffffff } ) );
                scene.add( particleLight );

                // Lights

                scene.add( new THREE.AmbientLight( 0xcccccc ) );

                var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );
                directionalLight.position.x = Math.random() - 0.5;
                directionalLight.position.y = Math.random() - 0.5;
                directionalLight.position.z = Math.random() - 0.5;
                directionalLight.position.normalize();
                scene.add( directionalLight );

                // pointLight = new THREE.PointLight( 0xffffff, 4 );
                // pointLight.position = particleLight.position;
                // scene.add( pointLight );

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth/2, window.innerHeight/2 );

                container.appendChild( renderer.domElement );

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                //

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth/2, window.innerHeight/2 );

            }

            //

            var t = 0;
            var clock = new THREE.Clock();

            function animate() {

                var delta = clock.getDelta();

                requestAnimationFrame( animate );

                if ( t > 1 ) t = 0;

                if ( skin ) {

                    // guess this can be done smarter...

                    // (Indeed, there are way more frames than needed and interpolation is not used at all
                    //  could be something like - one morph per each skinning pose keyframe, or even less,
                    //  animation could be resampled, morphing interpolation handles sparse keyframes quite well.
                    //  Simple animation cycles like this look ok with 10-15 frames instead of 100 ;)

                    for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {

                        skin.morphTargetInfluences[ i ] = 0;

                    }

                    skin.morphTargetInfluences[ Math.floor( t * 30 ) ] = 1;

                    t += delta;

                }

                render();
                stats.update();

            }

            function render() {

                var timer = Date.now() * 0.0005;

                camera.position.x = Math.cos( timer ) * 10;
                camera.position.y = 2;
                camera.position.z = Math.sin( timer ) * 10;

                camera.lookAt( scene.position );

                particleLight.position.x = Math.sin( timer * 4 ) * 3009;
                particleLight.position.y = Math.cos( timer * 5 ) * 4000;
                particleLight.position.z = Math.cos( timer * 4 ) * 3009;

                renderer.render( scene, camera );

            }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T14:50:21.060

您可以使用这种函数递归地覆盖您的 collada 场景材质。它遍历整个层次结构并分配材料。

```
var setMaterial = function(node, material) {
  node.material = material;
  if (node.children) {
    for (var i = 0; i < node.children.length; i++) {
      setMaterial(node.children[i], material);
    }
  }
} 
```

像这样使用它`setMaterial(dae, new THREE.MeshBasicMaterial({color: 0xff0000}));`

如果需要，您可以调整它以修改现有的材料属性，而不是分配新的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:06:25.983

在遇到许多问题后，我们在 ColladaLoader.js 中编写了一个小技巧，借鉴了@gaitat 女巫的想法，它基本上替换了图像中纹理的旧路径，在数组中传递了一些新路径，并使用正则表达式解析 xml图片标签下的 .png 或 .jpg。不确定是否有更简单的方法，但由于支持有限，我们不得不以某种方式提出修复

```
function parse( doc, imageReplace, callBack, url ) {

    COLLADA = doc;
    callBack = callBack || readyCallbackFunc;

    if ( url !== undefined ) {

        var parts = url.split( '/' );
        parts.pop();
        baseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';

    }

    parseAsset();
    setUpConversion();
    images = parseLib( "//dae:library_images/dae:image", _Image, "image" );

    for(var i in imageReplace) {
        var iR = imageReplace[i];

        for(var i in images) {
            var image = images[i];

            var patt=new RegExp('[a-zA-Z0-9\-\_]*\/'+iR.name,'g');

            //if(image.id==iR.id)
            if(patt.test(image.init_from))
                image.init_from = iR.new_image; 
        }//for
    }

    materials = parseLib( "//dae:library_materials/dae:material", Material, "material" );
    effects = parseLib( "//dae:library_effects/dae:effect", Effect, "effect" );
    geometries = parseLib( "//dae:library_geometries/dae:geometry", Geometry, "geometry" );
    cameras = parseLib( ".//dae:library_cameras/dae:camera", Camera, "camera" );
    controllers = parseLib( "//dae:library_controllers/dae:controller", Controller, "controller" );
    animations = parseLib( "//dae:library_animations/dae:animation", Animation, "animation" );
    visualScenes = parseLib( ".//dae:library_visual_scenes/dae:visual_scene", VisualScene, "visual_scene" );

    morphs = [];
    skins = [];

    daeScene = parseScene();
    scene = new THREE.Object3D();

    for ( var i = 0; i < daeScene.nodes.length; i ++ ) {

        scene.add( createSceneGraph( daeScene.nodes[ i ] ) );

    }

// unit conversion
scene.position.multiplyScalar(colladaUnit);
scene.scale.multiplyScalar(colladaUnit);

    createAnimations();

    var result = {

        scene: scene,
        morphs: morphs,
        skins: skins,
        animations: animData,
        dae: {
            images: images,
            materials: materials,
            cameras: cameras,
            effects: effects,
            geometries: geometries,
            controllers: controllers,
            animations: animations,
            visualScenes: visualScenes,
            scene: daeScene
        }

    };

    if ( callBack ) {

        callBack( result );

    }

    return result;

}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:33:52.190

您可以做的一件事是修改您的 collada 模型（dae 文件），在那里找到纹理参考并根据自己的喜好进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T14:52:37.230

```
if ( url !== undefined ) {
    var parts = url.split( '/' );
    parts.pop();
    baseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';

}

parseAsset();
setUpConversion();
images = parseLib( "//dae:library_images/dae:image", _Image, "image" );

for(var i in imageReplace) {
    var iR = imageReplace[i];

    for(var i in images) {
        var image = images[i];

        var patt=new RegExp('[a-zA-Z0-9\-\_]*\/'+iR.name,'g');

        //if(image.id==iR.id)
        if(patt.test(image.init_from))
            image.init_from = iR.new_image; 
    }//for
} 
```

# c++ - 跟进：从 std:: 向量中删除一个项目

> ID：15025325
> 
> 赞同：2
> 
> 时间：2013-02-22T13:26:58.360 元素
> 
> 标签：c++, stdvector

在下面的第一个代码片段中，我试图根据输入 std::remove_if 函数的静态条件函数从成员函数内的向量中删除一个元素。我的问题是无法在条件函数中访问 removeVipAddress 方法中的输入参数 uuid。您认为我应该在这里做什么才能根据名为​​ uuid 的输入参数从向量中删除一个项目？谢谢。[注意：这是之前在从 std:: 向量中删除项目](https://stackoverflow.com/questions/15025083/removing-an-item-from-an-std-vector)中解释的后续问题

**片段 1（代码）**

```
void removeVipAddress(std::string &uuid)
{
          struct RemoveCond
          {
            static bool condition(const VipAddressEntity & o)
            {
              return o.getUUID() == uuid;
            }
          };

          std::vector<VipAddressEntity>::iterator last =
            std::remove_if(
                    mVipAddressList.begin(),
                    mVipAddressList.end(),
                    RemoveCond::condition);

          mVipAddressList.erase(last, mVipAddressList.end());

} 
```

**片段 2**（编译输出）

```
 $ g++ -g -c -std=c++11 -Wall Entity.hpp
 Entity.hpp: In static member function ‘static bool ECLBCP::VipAddressSet::removeVipAddress(std::string&)::RemoveCond::condition(const   ECLBCP::VipAddressEntity&)’:
 Entity.hpp:203:32: error: use of parameter from containing function
 Entity.hpp:197:7: error:   ‘std::string& uuid’ declared here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:30:57.750

如果您使用的是 C++11，则可以使用 lambda 来完成：

```
auto last = std::remove_if(
     mVipAddressList.begin(),
     mVipAddressList.end(),
     [uuid]( const VipAddressEntity& o ){
          return o.getUUID() == uuid;
     }); 
```

该函数调用的最后一个参数声明了一个 lambda，它是一个匿名内联函数。该`[uuid]`位告诉它包含`uuid`在 lambda 的范围内。

[这里](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)有一个关于 lambdas 的教程

或者，您可能希望为 RemoveCond 谓词提供构造函数和成员函数（并使用 operator() 而不是名为条件的函数来实现它）。

像这样的东西：

```
struct RemoveCond
{
    RemoveCond( const std::string& uuid ) :
    m_uuid( uuid )
    {
    }

    bool operator()(const VipAddressEntity & o)
    {
        return o.getUUID() == m_uuid;
    }

    const std::string& m_uuid;
};

std::remove_if( 
     mVipAddressList.begin(),
     mVipAddressList.end(),
     RemoveCond( uuid );
     ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:38:10.460

如果您没有 C++11 lambda，您可以将您的表达`RemoveCond`为仿函数：

```
struct RemoveCond
{
  RemoveCond(const std::string uuid) : uuid_(uuid) {}
  bool operator()(const VipAddressEntity & o) const
  {
          return o.getUUID() == uuid_;
  }
  const std::string& uuid_;
}; 
```

然后将实例传递给`std::remove_if`：

```
std::remove_if(mVipAddressList.begin(),
               mVipAddressList.end(),
               RemoveCond(uuid)); 
```

顺便说一句，您`removeVipAddress`的功能应该`const`参考：

```
void removeVipAddress(const std::string &uuid) 
```

# iphone - 将二进制数据附加到文件

> ID：15025329
> 
> 赞同：3
> 
> 时间：2013-02-22T13:27:05.600
> 
> 标签：iphone, ios5, ios6

在我的 iPhone 应用程序中，我需要将二进制数据附加到文件中：

```
 NSError *error;
    NSFileManager *fileMgr = [NSFileManager defaultManager];

    NSData* data = [NSData dataWithBytes:buffer length:readBytes_];    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; 

    NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"myFile"];

    NSFileHandle *myHandle = [NSFileHandle fileHandleForUpdatingAtPath:appFile];
    [myHandle seekToEndOfFile];
    [myHandle writeData: data];
    [myHandle closeFile];
   // [data writeToFile:appFile atomically:YES];

    // Show contents of Documents directory
    NSLog(@"Documents directory: %@",
          [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]); 
```

但是在 NSlog 中我看不到有我的文件。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:42:46.737

如果文件不存在，`[NSFileHandle fileHandleForUpdatingAtPath:]`则将返回`nil`（请参阅[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html#//apple_ref/occ/clm/NSFileHandle/fileHandleForUpdatingAtPath%3a)）。

因此，在尝试打开文件之前检查并在必要时创建它：

```
NSFileManager *fileMan = [NSFileManager defaultManager];
if (![fileMan fileExistsAtPath:appFile])
{
    [fileMan createFileAtPath:appFile contents:nil attributes:nil];
}
NSFileHandle *myHandle = [NSFileHandle fileHandleForUpdatingAtPath:appFile];
// etc. 
```

并全面添加更多错误检查。

# infrared - 将遥感数据转换为彩色图像

> ID：15025331
> 
> 赞同：0
> 
> 时间：2013-02-22T13:27:14.117
> 
> 标签：infrared

请告诉我如何将遥感数据转换为彩色图像？,

或者请告诉我如何从遥感数据中计算红外值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T01:34:32.673

正如另一位成员所说，ENVI 是一种选择。ArcGIS、GRASS 等也是如此。但是，我主要使用 MATLAB。函数 imagesc 可以解决问题。请注意，此功能不能同时缩放超过 3 个波段。ENVI也是如此，它会要求您选择频段...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T15:07:14.443

MATLAB 中有一个函数 - imagesc，它将矩阵中的值缩放为 RGB 值。如果您的数据由多个光谱波段组成，请仅选择您想要查看的波段并使用图像c。在这种情况下，它的用法将与 ENVI 中的非常相似......！

我主要使用它，而不是 ENVI... 在我的工作中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T23:34:57.087

对您来说最好的方法是使用 ENVI。该软件可以轻松处理卫星图像。近红外波段就像灰色图像一样。该值是该波段的辐射度。

# mysql - 使用组 concat 的 MYSQL 日期格式

> ID：15025333
> 
> 赞同：0
> 
> 时间：2013-02-22T13:27:17.223
> 
> 标签：mysql, group-concat

很抱歉重新发布，但这是我一个月前得到的大部分答案的问题。但仍然没有完全按照我想要的方式工作。

有一个日期字段，我从我的数据库中取出以下内容；

```
SELECT event,event_name,
GROUP_CONCAT(DATE_FORMAT(ed.date,'%b %e') ORDER BY ed.date SEPARATOR ',') as date2 
FROM events ev
LEFT JOIN event_dates ed ON ev.eid=ed.eid
WHERE ev.yr='2013' 
GROUP BY ev.eid 
```

这会产生占用大量空间的日期列表。

5月16日,5月23日,5月30日,6月6日,6月20日

我希望它看起来像

5月16日、23日、30日、6月20日

这是我根据上次输入尝试的查询。但它不起作用，因为子查询似乎不知道事件 ID。猜测我可能需要将其转换为联接？

```
SELECT DISTINCT ev.event_id, 
  GROUP_CONCAT(DISTINCT DATE_FORMAT(race_date,'%a') ORDER BY race_date 
  SEPARATOR ',   ')   as date1,

  (SELECT GROUP_CONCAT(dm) FROM
  (SELECT CONCAT(
   MONTHNAME(race_date),
   ' ',
   GROUP_CONCAT(DAY(race_date) ORDER BY race_date)
   ) as dm 
FROM event_dates ed1 WHERE ed1.event_id=ev.event_id  
GROUP BY MONTH(race_date))as t) as date2

FROM events ev
JOIN event_dates ed ON ev.event_id = ed.event_id AND ev.race_year = ed.race_year 
GROUP BY event_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:56:18.860

这应该让你非常接近你正在寻找的东西：

```
SELECT event_name, date2
FROM (
  SELECT 
    @showMonth:=IF(CONCAT(MONTHNAME(ed.date),ev.eid)=@prevMonth,'',CONCAT(MONTHNAME(ed.date), ' ')),
    event_name,
    MONTHNAME(ed.date), 
    GROUP_CONCAT(CONCAT(@showMonth, DATE_FORMAT(ed.date,'%e')) ORDER BY ed.date SEPARATOR ',') as date2,
    @prevMonth:=CONCAT(MONTHNAME(ed.date),ev.eid)
  FROM events ev
    LEFT JOIN event_dates ed ON ev.eid=ed.eid
    JOIN (SELECT @showMonth:='', @prevMonth:='') r
  WHERE ev.yr=2013 
  GROUP BY ev.eid
  ) t 
```

[小提琴演示示例](http://sqlfiddle.com/#!2/9a4b4/4)

# javascript - 修改后如何检测页面加载状态？

> ID：15025344
> 
> 赞同：0
> 
> 时间：2013-02-22T13:27:45.577
> 
> 标签：javascript

当用户单击一个按钮时，我会加载一组图像（可能有 1 到 1000 个......）。是否有可能以某种方式检测最后一张图片何时加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:37:44.940

您可以为每个图像定义和`onload`事件，并在事件中增加一个计数器，直到加载最后一个，这将是您的数组的长度。

# php - Jquery 工具覆盖：php foreach 循环不起作用

> ID：15025346
> 
> 赞同：0
> 
> 时间：2013-02-22T13:27:47.880
> 
> 标签：php, jquery-tools, foreach-loop-container

我将 Jquery Tools 的 Overlay 放在我的站点中，以在多个叠加层中显示项目的信息。这工作得很好，但我一直在尝试“自动化”代码来读取新项目并将它们加载到覆盖中。发生的事情看起来不错，但无论我点击哪个项目，覆盖总是加载第一个项目的内容......

我做了很多谷歌搜索和复制粘贴才能走到这一步，我（还）不是一个程序员，我希望代码不会吓到你们...... ;-)

无论如何，这是一个链接：[http ://www.wgwd.nl/test](http://www.wgwd.nl/test)

如果您单击“项目”，则会打开一个正常的 div，加载它找到的所有项目（现在是两个）。当您单击一个时，它会在 3 个叠加层中打开该内容。如前所述，不幸的是，它总是加载相同的内容，而与您单击的项目无关。

我试图为 JScript 分配一个唯一的函数名称（使用项目文件名中的 php 生成），但这似乎不起作用。

有任何想法吗？这是我的代码：

```
<?
    //reads projectfolder and distills 
    //a basename out of the project description.txt 
    $textfiles = glob('content/projects/*.txt', GLOB_BRACE);
    foreach ($textfiles as $textfile) { ?>
        <div id="details"> <?
            $pad = pathinfo ($textfile);
            $base_name = basename($textfile,'.'.$pad['extension']);

            // the link that opens the overlays. Don't think the "id" tag is nescessary
            echo '<a id="'.$base_name.'" href="#" onclick="'.$base_name.'()"><img src="'.$base_name.'/main.jpg"/></a>' ?>   

            <!-- defines overlay, hidden by default -->
            <div id="dragwindow1" class="overlay ol1">
                <a class="close"></a>
                <?
                    include ('content/projects/'.$base_name.'/content.txt'); 
                ?>
            </div> 
        </div> 
        <?
        // the description of each project
        include ($textfile);
        ?>

        <script> 
            // within the foreach open all overlays with function name $base_name
            var <?=$base_name?> = function () {
                $("a[rel]").each(function() {
                    $(this).overlay().load();
                });
            }

        </script>
        <hr />
    <? } //end foreach ?>
</div> 

<!-- somehow, without defining these links, the whole 'open all overlay' thing doesn't work -->
<a rel="div.overlay:eq(0)" type="button" style="display: none">first</an>
<a rel="div.overlay:eq(1)" type="button" style="display: none">second</a>
<a rel="div.overlay:eq(2)" type="button" style="display: none">third</a> 

<script type="text/javascript">
$(function projects() {
    // positions for each overlay
    var positions = [
        [120, '15%'], //uppper left, #1
        [70, '60%'], // lower left, #2
        ['60%', '40%'], // lower right, #3
    ];

    // setup triggers
    $("a[rel]").each(function(i) {

        $(this).overlay({
            // common configuration for each overlay
            oneInstance: false,

            // setup custom finish position
            top: positions[i][0],
            left: positions[i][1],
        });
    });
});
</script> 
```

提前谢谢！

编辑：我编辑了代码以省略所有不相关的内容问题仍然存在：Javascript 仅返回 foreach 循环中第一次调用的内容。无论如何为PHP中的每个循环生成多个javascript实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:39:33.800

解决了！在朋友的大力帮助下，他重新定义了 Jquery Tools 的多个叠加层如何工作（并且应该首先工作......）

无需过多介绍，这是供将来参考的代码：

基本上诀窍是：

```
// open all overlays
function openAll(currentOverlays) {
    $(currentOverlays).each(function()
    {
        $(this).overlay().load();
    });
} 
```

完整的页面现在是这样的：

```
<script type="text/javascript">
$(function () {
    // positions for each overlay
    var positions = [
        ['60%', 540], // lower right, #3
        [80, '65%'], // lower left, #2
        [120, '12%'], //uppper right, #1

        ];

    // setup triggers
    $("div.overlay").each(function(i) {
        $(this).overlay({
            // some configuration for each overlay

            // positioning the overlays
            top: positions[i % 3][0],
            left: positions[i % 3][1]
        });
    });
});

// open all overlays
function openAll(currentOverlays) {
    $(currentOverlays).each(function()
    {
        $(this).overlay().load();
    });
}

// close all overlays
function closeAll(currentOverlays) {
    $(currentOverlays).each(function()
    {
        $(this).overlay().close();
    });
}
</script>

<div id="projectstarter">
    <h2>Projects</h2>

    <div class="maindetails">
        <a class="close"></a> <!-- defines a close button for the overlay -->

        <?
        $textfiles = glob('content/projects/*.txt', GLOB_BRACE);
        rsort($textfiles);
        foreach ($textfiles as $textfile) { 

            $pad = pathinfo ($textfile);
            $base_name = basename($textfile,'.'.$pad['extension']);
            echo '<a href="#" onclick="openAll(\'div.'.$base_name.'\')">';
            echo '<img src="./content/projects/'.$base_name.'/projectimage.jpg" class="thumb"/></a></div>';
            include '$textfile'; //project description

         } // end MAIN foreach ?>
    </div>
</div>

<div id="projects"> 
<?
foreach ($textfiles as $textfile) { 
        $pad = pathinfo ($textfile);
        $base_name = basename($textfile,'.'.$pad['extension']); ?>
            <div id="dragwindow3" class="<?=$base_name?> overlay ol3">
                <a class="close"></a>
                <h2>Media</h2>
                <div class="details">
                    // include media here
                </div>             
            </div>

            <div id="dragwindow2" class="<?=$base_name?> overlay ol2">
                <a class="close"></a>
                <h2>Credits</h2>
                <div class="details">
                    // include credits here
                </div>
            </div>

            <div id="dragwindow1" class="<?=$base_name?> overlay ol1 ">
                <a class="close"></a>
                <h2>Content</h2>
                <div class="details">
                    // include content here
                </div>
            </div>

    <? } ?>
<script>
    $( "#projectstarter" ).overlay();
    $( "#projectstarter" ).draggable().resizable({ghost: true});
    $( ".ol1" ).draggable().resizable({ghost: true});
    $( ".ol2" ).draggable().resizable({ghost: true});
    $( ".ol3" ).draggable().resizable({ghost: true});
</script> 
```

# java - 如何在android中使用json数组限制测验中问题的显示？

> ID：15025350
> 
> 赞同：0
> 
> 时间：2013-02-22T13:28:00.337
> 
> 标签：java, android, json, limit

嘿伙计们，我正在开发一个测验，其中存储了 50 个问题，这些问题使用 json 数组访问，我只想显示 10 个问题，我的问题是每次用户玩游戏时都会显示所有这 50 个问题。是否可以限制如果我只想显示 10 个问题？在我的第 10 个问题之后，会显示分数等级。

你们能帮我解决这个问题吗？

```
 List<JSONObject> question = null;

    private void loadQuestions() throws Exception {
        try {

            InputStream questions = this.getBaseContext().getResources()
                    .openRawResource(R.raw.questions);
            bReader = new BufferedReader(new InputStreamReader(questions));
            StringBuilder quesString = new StringBuilder();
            String aJsonLine = null;
            while ((aJsonLine = bReader.readLine()) != null) {
                quesString.append(aJsonLine);
            }

            Log.d(this.getClass().toString(), quesString.toString());
            JSONObject quesObj = new JSONObject(quesString.toString());
            quesList = quesObj.getJSONArray("Questions");
            Log.d(this.getClass().getName(),
                    "Num Questions " + quesList.length());

              question = new ArrayList<JSONObject>();
                 int n = Math.min(10, quesList.length());
                 for(int i = 0; i < n; i++) {
                     JSONObject questions1 = quesList.getJSONObject(i);
                     question.add(questions1);

                 }
        } catch (Exception e) {

        } finally {
            try {
                bReader.close();
            } catch (Exception e) {
                Log.e("", e.getMessage().toString(), e.getCause());
            }

        }

    }

    public static JSONArray getQuesList()throws JSONException{

          Random rnd = new Random();

            for (int i = quesList.length() - 1; i >= 0; i--)
            {
              int j = rnd.nextInt(i + 1);
              // Simple swap
              Object object = quesList.get(j);
              quesList.put(j, quesList.get(i));
              quesList.put(i, object);
            }
            return quesList;

    }
}

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.startquiz);

    try {
        score = getIntent().getIntExtra("score",0);
        items = (TextView)findViewById(R.id.displayitems);
        question = (TextView) findViewById(R.id.displayquestion);
        answer1 = (RadioButton) findViewById(R.id.option1);
        answer2 = (RadioButton) findViewById(R.id.option2);
        answer3 = (RadioButton) findViewById(R.id.option3);
        answers = (RadioGroup) findViewById(R.id.QueGroup1);

        next = (Button) findViewById(R.id.selected);
        next.setOnClickListener(nextListener);

        selected = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(selected, -1);
        correctAns = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(correctAns, -1);

        this.showQuestion(0, review);

    } catch (Exception e) {
        Log.e("", e.getMessage().toString(), e.getCause());
    }

}

private void showQuestion(int qIndex, boolean review) {
    try {
        JSONObject aQues = Question1.getQuesList().getJSONObject(
                qIndex);
        String quesValue = aQues.getString("Question");
        if (correctAns[qIndex] == -1) {
            String correctAnsStr = aQues.getString("CorrectAnswer");
            correctAns[qIndex] = Integer.parseInt(correctAnsStr);
        }

        question.setText(quesValue.toCharArray(), 0, quesValue.length());
        answers.check(-1);
        answer1.setTextColor(Color.BLACK);
        answer2.setTextColor(Color.BLACK);
        answer3.setTextColor(Color.BLACK);
        JSONArray ansList = aQues.getJSONArray("Answers");
        String aAns = ansList.getJSONObject(0).getString("Answer");
        answer1.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(1).getString("Answer");
        answer2.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(2).getString("Answer");
        answer3.setText(aAns.toCharArray(), 0, aAns.length());
        Log.d("", selected[qIndex] + "");
        if (selected[qIndex] == 0)
            answers.check(R.id.option1);
        if (selected[qIndex] == 1)
            answers.check(R.id.option2);
        if (selected[qIndex] == 2)
            answers.check(R.id.option3);

        setText();
        if (quesIndex == (Question1.getQuesList().length() - 1))
            next.setEnabled(false);

        if (quesIndex < (Question1.getQuesList().length() - 1))
            next.setEnabled(true);

        if (review) {
            Log.d("review", selected[qIndex] + "" + correctAns[qIndex]);
            ;
            if (selected[qIndex] != correctAns[qIndex]) {
                if (selected[qIndex] == 0)
                    answer1.setTextColor(Color.RED);
                if (selected[qIndex] == 1)
                    answer2.setTextColor(Color.RED);
                if (selected[qIndex] == 2)
                    answer3.setTextColor(Color.RED);
            }
            if (correctAns[qIndex] == 0)
                answer1.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 1)
                answer2.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 2)
                answer3.setTextColor(Color.GREEN);
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage(), e.getCause());
    }
}

private void setAnswer() {
    if (answer1.isChecked())
        selected[quesIndex] = 0;
    if (answer2.isChecked())
        selected[quesIndex] = 1;
    if (answer3.isChecked())
        selected[quesIndex] = 2;

    Log.d("", Arrays.toString(selected));
    Log.d("", Arrays.toString(correctAns));

}

private OnClickListener nextListener = new OnClickListener() {
    public void onClick(View v) {
        int i = correctAns.length;

        if (v == answers){
            if (correctAns[i] == selected[i])
                    {

                        score++;
                        Toast.makeText(getApplicationContext(), "Your answer is correct!", Toast.LENGTH_SHORT).show();
                    }else
                    {
                    Toast.makeText(getApplicationContext(), "Your answer is wrong..." + correctAns, Toast.LENGTH_SHORT).show();
                    }
        }

        quesIndex++;
        try {
            if (quesIndex >= Question1.getQuesList().length())
                quesIndex = Question1.getQuesList().length() - 1;
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        showQuestion(quesIndex, review);

    }
};
private void setText() throws JSONException {
    this.setTitle("Question " + (quesIndex + 1) + "  out of  "
            + Question1.getQuesList().length());
    items.setGravity(250);
}

public void reload() {
    setAnswer();

Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();

overridePendingTransition(0, 0);
startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:55:11.270

据我了解，如果您下载整个 json 响应并仅阅读相关部分，可能会更好。

理想情况下，如果您想有 10 个问题并且总共有 50 个，这意味着您将希望这 10 个问题出现 5 次。为了做到这一点，你可以把它全部存储在一个 ArrayList 中，然后当你到达下一个集合时，只需将你去的位置偏移 10，然后抓取这些元素并显示它们并重复这个过程，直到你用完为止问题。或者另一种方法是在每次使用后删除顶部的设置，并且每次都继续阅读前 10 名。

请记住，当您抓住新问题时，您**必须**使用正在阅读 ArrayList 的新元素更新内容。

# android - ARM 上 Android 的运行时 CPU 类型检测

> ID：15025353
> 
> 赞同：3
> 
> 时间：2013-02-22T13:28:10.860
> 
> 标签：android, android-ndk, arm, neon

从正在运行的 C 应用程序中确定 CPU 类型的最简单方法是什么？我有兴趣确定当前 CPU 有多少个内核以及它是否有 NEON 单元。一个简单的解决方案可能是检查 /proc 中的 cpuinfo 标志，但我不确定这是否是一种快速可靠的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:52:56.307

[您可以使用此文档](http://www.kandroid.org/ndk/docs/CPU-ARM-NEON.html)检查对霓虹灯的支持。要获取核心计数，请阅读[此线程](http://code.google.com/p/android/issues/detail?id=26490)并查看[此页面](http://www.kandroid.org/ndk/docs/CPU-FEATURES.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:01:35.080

你可以用[耶普！库](http://www.yeppp.info)以获取有关 CPU 的大量信息。此信息也可通过 Java 绑定访问，因此您可以在类中定义多个本地方法，例如`processGeneric()`and `processNeon()`，并且仅在 CPU 支持时调用 NEON 方法：

```
import info.yeppp.Library;
import info.yeppp.ArmCpuSimdFeature;
import info.yeppp.CpuMicroarchitecture;

if (Library.isSupported(ArmCpuSimdFeature.NEON)) {
    if (Library.getMicroarchitecture().equals(CpuMicroarchitecture.Krait)) {
        /* Special NEON implementation for recent Qualcomm processors */
        nativeClass.processKrait();
    } else {
        /* Generic NEON implementation */
        nativeClass.processNeon();
    }
} else {
    /* Generic implementation without NEON */
    nativeClass.processGeneric();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-09T02:58:04.913

您可以使用`Build.SUPPORTED_ABIS`来检查 CPU Abi 版本（例如，arm64-v8a、armeabi-v7a 等）。

此外，使用该`/proc/cpuinfo`文件检查是否支持霓虹灯。

## ABI

示例代码

```
@SuppressWarnings("deprecation")
public static List<String> getSupportedABIs() {
    if (Build.VERSION.SDK_INT >= 21) {
        return Arrays.asList(Build.SUPPORTED_ABIS);
    } else {
        return Arrays.asList(Build.CPU_ABI, Build.CPU_ABI2);
    }
} 
```

样本输出是：

```
|    device     |   arch     |         Abi list
| Moto Nexus 6  | arm 32bit  | [armeabi-v7a, armeabi]
| Huawei Mate 8 | arm 64bit  | [arm64-v8a, armeabi-v7a, armeabi]
| OPPO R7s      | arm 64 bit | [arm64-v8a, armeabi-v7a, armeabi]
| Moto X Style  | arm 64 bit | [arm64-v8a, armeabi-v7a, armeabi] 
```

## 氖

这是“cat /proc/cpuinfo”的示例输出

```
shell@mako:/ $ cat /proc/cpuinfo
Processor   : ARMv7 Processor rev 2 (v7l)
processor   : 0
BogoMIPS    : 13.53

processor   : 1
BogoMIPS    : 13.53

processor   : 2
BogoMIPS    : 13.53

processor   : 3
BogoMIPS    : 13.53

Features    : swp half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt
CPU implementer : 0x51
CPU architecture: 7
CPU variant : 0x0
CPU part    : 0x06f
CPU revision    : 2

Hardware    : QCT APQ8064 MAKO
Revision    : 000b
Serial      : 0000000000000000 
```

注意`Features`线路。它包含 CPU 支持的所有功能。注意：该`neon`功能已列出。

因此，检查当前设备是否支持的非常简单的方法`neon`，您只需创建一个`InputStreamReader("/proc/cpuinfo")`，然后阅读该`Features`行。

## 顺便提一句

上面描述的那些方法试图避免使用本机库。如果您想了解有关 cpu 的更多详细信息，请尝试使用官方 NDK 库[cpufeatures](https://developer.android.com/ndk/guides/cpu-features.html)。还有一个[ndk-sample](https://github.com/googlesamples/android-ndk/blob/master/hello-neon/app/src/main/cpp/helloneon.c)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-08T05:31:24.633

由于您有 NDK 标记，因此这是一个 C 上下文答案。在使用现代 NDK 时，我相信您应该使用 Android 的[cpu-features 库](https://developer.android.com/ndk/guides/cpu-features)。

复制`cpu-features.h`并`cpu-features.c`从`$ANDROID_NDK_ROOT/sources/android/cpufeatures`您的项目源代码树中复制。将其编译为源代码的一部分。

然后...

* * *

> ...从正在运行的 C 应用程序中确定 CPU 类型？

要测试 CPU 是否为 ARMv7，请执行以下操作。Android 文档声明首先使用`android_getCpuFamily()`.

```
bool IsARMv7()
{
#if defined(__ANDROID__) && (defined(__aarch64__) || defined(__arm__))
    if (((android_getCpuFamily() & ANDROID_CPU_FAMILY_ARM) != 0) &&
        ((android_getCpuFeatures() & ANDROID_CPU_ARM_FEATURE_ARMv7) != 0))
            return true;
#endif
    return false;
} 
```

* * *

> ...当前 CPU 有多少个内核，是否有 NEON 单元

要测试 NEON，请使用以下代码。NEON 在 ARMv8/Aarch64 上称为 ASIMD。

```
bool HasNEON()
{
#if defined(__ANDROID__) && defined(__aarch64__)
    if (((android_getCpuFamily() & ANDROID_CPU_FAMILY_ARM64) != 0) &&
        ((android_getCpuFeatures() & ANDROID_CPU_ARM64_FEATURE_ASIMD) != 0))
            return true;
#elif defined(__ANDROID__) && defined(__arm__)
    if (((android_getCpuFamily() & ANDROID_CPU_FAMILY_ARM) != 0) &&
        ((android_getCpuFeatures() & ANDROID_CPU_ARM_FEATURE_NEON) != 0))
            return true;
#endif
     return false;
} 
```

根据[cpu-features 库](https://developer.android.com/ndk/guides/cpu-features)文档，您使用以下 CPU 核心数。不过，我从未使用过它。

```
int  android_getCpuCount(void); 
```

# php - strftime() : bool(false) 什么都不显示

> ID：15025362
> 
> 赞同：3
> 
> 时间：2013-02-22T13:28:31.087
> 
> 标签：php, strftime

我想在我的页面上以这种格式显示当前日期：22/02/2013 - 12:00（日/月/年 - 小时）

我使用`strftime("%d/%b/%G - %R", time())`但在页面上没有显示任何内容。如果我做

```
echo var_dump(strftime("%d/%b/%G - %R", time())) 
```

它显示布尔（假）。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T13:31:44.990

从[`strftime()`文档](http://www.php.net/manual/en/function.strftime.php)中：

> 由于输出取决于底层 C 库，因此不支持某些转换说明符。在 Windows 上，提供未知的转换说明符将导致 5 条**E_WARNING**消息并返回**FALSE**。在其他操作系统上，您可能不会收到任何**E_WARNING**消息，并且输出可能包含未转换的转换说明符。

因此，您可能正在使用不受支持的格式参数。

注意：默认情况下`time()`用于时间戳，因此`strftime()`如果您需要此默认 tiemstamp，则可以使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T13:45:30.683

Windows[不支持`%G`or`%R`](http://msdn.microsoft.com/en-us/library/fe06s4ak.aspx)，你应该分别使用`%Y`and `%H:%M`。

```
strftime("%d/%b/%Y - %H:%M") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:36:05.467

试试这个：

```
echo date('d/m/Y - H:s'); 
```

如果需要，您可以像这样设置时区：

```
date_default_timezone_set('UTC'); 
```

# javascript - 访问 iframe 中选定的单选按钮值

> ID：15025364
> 
> 赞同：2
> 
> 时间：2013-02-22T13:28:38.810
> 
> 标签：javascript, html

我写代码。我正在尝试编写一个表单，该表单在“iframe”中包含一长串单选按钮内容，如下所示：

```
<form name="iframeform" method="POST" action="http://localhost/cgi-bin/run">
    <tr>
            <td><iframe id="macList" src="http://localhost/macinfo" style="width:1000px;height:160px">
            </iframe></td>
    </tr>
    <tr>
            <input type="hidden" name="macaddr" value="">
            <td><input type="submit" name="macselect" value="Continue" id="stdbtn" onclick="getIframeContent()"></td>
    </tr>
</form> 
```

'iframe' 指向 macinfo 页面的代码如下：

```
<html>
<body>
<table>
<tr>
<td><input type=radio name=mac value=E8:B7:48:7B:C0:4A>abc.example.com</td>
</tr>
<tr>
<td><input type=radio name=mac value=00:17:08:5A:81:CF>xyz.cisco.com</td>
</tr>
....
</table>
</body>
</html> 
```

如何编写“getIframeContent()”函数来获取选定单选按钮的值？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:32:04.517

您将必须获取`mac`using数组`document.getElementsByName`并对其进行循环：

```
var allRadios = document.getElementsByName("mac");
var checkedItem; 
for(var i=0; i<allRadios.length; i++) {
     if (allRadios[i].checked) {
          checkedItem = allRadios[i];
          alert('Found checked radio button');
     }
 } 
```

然后你可以传递`checkedItem`给你的`getIframeContent`函数。

**编辑**

您可以通过使用在两个页面之间共享`checkedItem`变量`window`

```
window.checkedItem = allRadios[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:25:47.113

长话短说。要访问 iframe`document`使用`.contentWindow.document`，即：

```
document.getElementById('macList').contentWindow.document 
```

还有一个示例代码：

```
<html>
  <head>
    <script type="text/javascript">
      function getIframeContent(){
         var myIFrame = document.getElementById('macList');
         var myIFDoc  = myIFrame.contentWindow.document;
         var myRadios = myIFDoc.getElementsByName("mac");

         var checkedItemValue = "";
         for(var i=0; i<myRadios.length; i++) {
            if (myRadios[i].checked) {
               checkedItemValue = myRadios[i].value;
            }
         }
         if (checkedItemValue) {
            alert(checkedItemValue);
         } else {alert('Select address');}
      }
    </script>
  </head>
<body>

  <iframe id="macList" src="..." 
      style="width:600px;height:160px">
  </iframe>

  <input type="submit" onclick="getIframeContent();">

</body>
</html> 
```

# android - 使用首选项更改 android 应用程序的主题

> ID：15025369
> 
> 赞同：3
> 
> 时间：2013-02-22T13:28:46.173
> 
> 标签：android

我一直在尝试让我的应用程序从首选项中读取数据，并根据所选选项更改主题。我在互联网上找到了许多不同的建议，包括这里，但一直无法让它发挥作用。

我创建了preferences.xml 和arrays.xml，用户可以选择他们想要的主题。但是，更改并未反映在应用程序中。

以下是 ActivityMain.java 的内容：

```
public class MainActivity extends Activity {

 protected void onCreate(Bundle savedInstanceState) {
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    String userTheme = preferences.getString("prefTheme", "darkab"); 
    if (userTheme.equals("darkab"))
        setTheme(R.style.darkab);
    else if (userTheme.equals("light"))
        setTheme(R.style.light);
    else if (userTheme.equals("dark"))
        setTheme(R.style.dark);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@SuppressLint("NewApi")
protected void onResume(Bundle savedInstanceState) {
    recreate();
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    String userTheme = preferences.getString("prefTheme", "darkab");
    if (userTheme.equals("darkab"))
        setTheme(R.style.darkab);
    else if (userTheme.equals("light"))
        setTheme(R.style.light);
    else {setTheme(R.style.dark);}
    super.onResume();
    setContentView(R.layout.activity_main);
} 
```

这些是我希望使用的样式，在 styles.xml 中设置：

```
<style name="darkab" parent="android:Theme.Holo.Light.DarkActionBar"></style>
<style name="light" parent="android:Theme.Holo.Light"></style>
<style name="dark" parent="android:Theme.Holo"> 
```

这是我的preferences.java 文件：

```
public class Preferences extends PreferenceActivity {
@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:37:36.373

`setTheme()`*仅在*布局构建之前有效，即您应该在之前调用它`setContentView()`。`LayoutInflater`解析主题属性并相应地在它创建的 's 上设置属性`View`。要在已运行的 Activity 上应用主题，您必须重新启动 Activity。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-23T14:44:51.567

我知道我迟到了，但我想在这里发布一个解决方案：在此处
查看完整的源代码[。](http://programondaspot.blogspot.com/2015/10/implementing-users-choice-themeapply.html)
这是我使用首选项更改主题时使用的代码..

```
SharedPreferences pref = PreferenceManager
            .getDefaultSharedPreferences(this);
String themeName = pref.getString("prefSyncFrequency3", "Theme1");
if (themeName.equals("Africa")) {
    setTheme(R.style.AppTheme);
} else if (themeName.equals("Colorful Beach")) {
    //Toast.makeText(this, "set theme", Toast.LENGTH_SHORT).show();
    setTheme(R.style.beach);
} else if (themeName.equals("Abstract")) {
    //Toast.makeText(this, "set theme", Toast.LENGTH_SHORT).show();
    setTheme(R.style.abstract2);
} else if (themeName.equals("Default")) {
    setTheme(R.style.defaulttheme);
} 
```

请注意，您必须将代码放在 setcontentview 之前。

# php - 如何将自定义查询传递给 sfPager 以获取分页？

> ID：15025371
> 
> 赞同：0
> 
> 时间：2013-02-22T13:28:55.333
> 
> 标签：php, symfony1, pagination, symfony-1.4, propel

下面是sql查询。这里使用了 3 个表。`EMPLOYER`, `COMPANYPROFILE`,`JOBSEEKERFOLLOWER`

```
$c=new Criteria();
$c->add(EmployerPeer::ITEMPLOYERSTATUS, 1);
$c->addJoin(EmployerPeer::IDEMPLOYER, CompanyprofilePeer::IDEMPLOYER);
EmployerPeer::addSelectColumns($c);
$c->addJoin(EmployerPeer::IDEMPLOYER, JobseekerfollowingPeer::IDEMPLOYER);
JobseekerfollowingPeer::addSelectColumns($c);
$c->addAsColumn('count', 'COUNT(EMPLOYER.IDEMPLOYER)');
$c->addGroupByColumn(CompanyprofilePeer::VCCOMPANYNAME);

//echo $c->toString(); exit;

$pager = new sfPropelPager('Employer', E4sConfig::getRecordsPerPage());
$pager->setCriteria($c);
$pager->setPage($this->getRequestParameter('page', 1));
$pager->init();
$this->pager=$pager; 
```

如果我删除出口并打印 SQL 查询，如果我运行它，它就会变得完美。

现在，我需要将它传递给寻呼机进行分页。但问题是，如果`Employer`在为其创建新对象时使用类，`sfPropelPager`则只会产生该类的元素。我没有得到其他两个表/类（公司简介和求职者追随者）的任何详细信息。如果与任一表一起使用，它也会发生相同的情况。

我真正想要的是 - 只是为了执行查询。如何做到这一点？请让我知道几个与 sfPropel 对象一起使用连接和自定义查询的好例子。

谢谢

# linux - 使用 smbclient 删除非空目录

> ID：15025373
> 
> 赞同：0
> 
> 时间：2013-02-22T13:29:06.153
> 
> 标签：linux, shell, samba

如何使用 smbclient 删除非空目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:37:44.967

您可能无法使用`smbclient`. 如果您在本地计算机上具有超级用户（又名 root）访问权限，则可以使用挂载远程目录`smbmount`，然后使用`rm -Rf`.

# javascript - 将视频带到特定时间的html5视频按钮

> ID：15025378
> 
> 赞同：12
> 
> 时间：2013-02-22T13:29:21.020
> 
> 标签：javascript, html, button, video, hyperlink

我正在尝试放置一个无需控件即可自动播放的视频，但我想在视频下方添加三个自定义按钮，每个按钮将视频跳转到特定时间。不使用 Youtube、Vimeo 或任何其他托管视频。我已经能够链接到特定时间，但这会打开一个新窗口并且不兼容跨浏览器。这可能吗？

```
<video id="movie" style="border:none;" width="575" height="240" preload autoplay controls>
<source src="video.ogv" type="video/ogg; codecs=theora,vorbis" />
<source src="video.mp4" type="video/mp4; codecs=avc1.42E01E,mp4a.40.2" />
<source src="video.webm" type="video/webm; codecs=vp8,vorbis" />
</video>

<p class="navBtns">
<a href="video.ogv#t=9" target="_blank"><img src="dot.png" /></a>
<a href="video.ogv#t=17" target="_blank"><img src="dot.png" /></a>
<a href="video.ogv#t=29" target="_blank"><img src="dot.png" /></a>
</p>

<script>
var v = document.getElementsByTagName('video')[0];
v.removeAttribute('controls') // '' in Chrome, "true" in FF9 (string)
v.controls // true
</script> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T14:16:06.753

您的链接有两个不同的问题：

1.  他们有 target="_blank" 属性，因此他们打开一个新窗口/标签。（摆脱那些）
2.  您链接到视频本身，而不是嵌入视频的页面。这将无法按预期工作。

要在不离开页面的情况下直接控制页面上的视频，您需要一些 javascript。在这里，您将找到一个如何工作的示例。

[JS Fiddle：视频 CurrentTime 示例](http://jsfiddle.net/sCvxm/1/ "JS Fiddle：视频 CurrentTime 示例")

您需要一个函数来跳转到单击您的链接之一的特定时间，这将是（例如）：

```
var firstlink = document.getElementByTagName('a')[0];
firstlink.addEventListener("click", function (event) {
    event.preventDefault();
    myvideo.currentTime = 7;
    myvideo.play();
}, false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T14:16:21.847

您可以设置`currentTime`视频的属性。使用您的示例：

```
var vidLinks = document.querySelectorAll('.navBtns a');

for(var i = 0, l = vidLinks.length; ++i){
    makeVideoLink(vidLinks[i]);
}

function jumpToTime(time){
    v.currentTime = time;
}

function makeVideoLink(element){
    // Extract the `t=` hash from the link
    var timestamp = element.hash.match(/\d+$/,'')[0] * 1000;

    element.addEventListener('click', function videoLinkClick(e){
        jumpToTime(timestamp);

        return false;
    },false)
} 
```

Mozilla 的开发者网络站点有[一个很棒的 HTML5 媒体元素属性列表](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)。

# c# - 我应该如何处理来自我的服务层的异常？

> ID：15025379
> 
> 赞同：0
> 
> 时间：2013-02-22T13:29:28.323
> 
> 标签：c#, asp.net-mvc

我`DataAnnotations`在我的 GUI 层中使用以在表单中显示错误消息，但我有一些关于如何处理来自我的服务层的异常以及如果它们发生时向用户显示什么的问题。

为了与我的服务层通信，我使用了请求和响应类。例如：

```
public class RegisterUserRequest
{
    public string Username { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
} 
```

我应该在 setter 方法中检查我的请求类中的空值吗？还是我应该在我的服务中这样做？`ArgumentNullException`我认为在请求和响应设置器方法上执行此操作并在参数为空时抛出一个是有意义的。

在我的服务类`InvalidOperationException`中，例如用户名或密码无效时，我会抛出一个错误。这是抛出的正确异常吗？

我的另一个问题是我是否应该捕获所有异常，如果是，我应该告诉用户关于异常的什么？例如，如果某个属性为空，它应该抛出一个`ArgumentNullException`. 但是我应该让用户知道这一点吗？

当用户名无效时，我会抛出一个`InvalidOperationException`. 我确实想向用户展示这个，因为它告诉用户它应该使用至少 3 个字符或其他内容。

我认为我应该使用来自的错误消息`InvalidOperationException`向用户显示并在其他异常发生时重定向到标准错误视图，例如：“糟糕，出了点问题”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:36:44.650

我会简单地再次使用 DataAnnotations，因为如果他们没有为他们的用户名或密码输入正确的格式，没有人希望被重定向到错误页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:39:07.400

我认为当用户名或密码无效时抛出的更相关的异常是 ArgumentException。在该异常类型的描述中，它特别涵盖了参数无效的情况。

至于将异常传递给用户，您应该尝试在不暴露任何服务内部工作原理的情况下通知用户错误，因此响应消息包含错误“无效的用户名 - 必须至少 3 个字符”将给他们有用的反馈。

对于您不想详细传递的错误，我建议您自己记录错误消息，然后将错误 ID 传递给用户。例如“发生未处理的错误。请联系支持人员，引用错误 ID xxx”。然而，这应该仅作为最后的手段使用 - 最好通知用户如何修复它，但这将是捕获所有错误而不向客户端传递太多信息的合适方法。

# c++ - gcc 4.7.2 的实现有什么不同吗？

> ID：15025385
> 
> 赞同：0
> 
> 时间：2013-02-22T13:29:46.140
> 
> 标签：c++, gcc4.7

知道为什么这个 std::thread 相关代码在 LiveWorkSpace.org 上使用 gcc 4.7.2 编译[但](http://liveworkspace.org/code/qiT7H%240)在[Ideone.com](http://ideone.com/KeS4ca)和我的 Ubuntu 12.04 机器上运行失败

```
terminate called after throwing an instance of 'std::system_error'
  what():  Operation not permitted 
```

代码测试（所有情况下都是 gcc 4.7.2） -

```
#include <string>
#include <iostream>
#include <thread>

void task1(std::string msg)
{
    std::cout << "task1 says: " << msg<<std::endl;
}

int main()
{
    std::thread t1(task1, "Hello");
    t1.join();

    return 0;
} 
```

# sencha-touch-2 - -webkit-transform 在 Sencha Touch 2.1 中突然添加到 List 元素中

> ID：15025386
> 
> 赞同：0
> 
> 时间：2013-02-22T13:29:48.043
> 
> 标签：sencha-touch-2

我从 Sencha Touch 2.0.1 升级到 2.1，突然框架在我的所有列表元素中添加了一个 -webkit-transform ，这破坏了我的很多布局，有人知道它为什么这样做以及如何删除它？

见附件：

![在此处输入图像描述](../Images/9f0872eec8e3b7a3b6ed71f5767a5a7a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:41:21.250

Sencha Touch 2.1 完全重新设计了列表组件。

**引用 Realease 注释：**

*此版本包含新的 List 组件。此实现替换了旧的列表实现，并且不再在商店和 DOM 元素之间一对一地绑定。这意味着列表的长度将不再影响其滚动性能。此外，如果您使用 itemConfig 指定列表可以使用组件，并且如果您指定 itemTpl 将动态转换为 itemConfig。由于这些更改，列表的 DOM 结构发生了更改，您可能需要更改一些 css 选择器来为列表添加适当的样式。通常，您需要将选择器从 '.x-list-item' 更改为 '.x-list-item > .x-dock-vertical > .x-dock-body' 以获取您可能添加的任何填充或边距。*

[http://www.sencha.com/blog/whats-coming-in-sencha-touch-2-1](http://www.sencha.com/blog/whats-coming-in-sencha-touch-2-1)

重新设计是新 css 列表元素的原因。

我认为您必须为您的列表再次更改和自定义您的 CSS。

# ruby-on-rails - 持久服务器端 Facebook 身份验证

> ID：15025394
> 
> 赞同：0
> 
> 时间：2013-02-22T13:29:57.593
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我正在尝试将公共提要从图表中拉到我的网站上。我目前正在使用用于 Ruby on Rails 的 Koala gem 执行此操作。

我的问题是我不知道是否可以静默维护身份验证以免中断服务。我不希望我的用户被认证，只是我自己使用服务器端连接。

这可以做到吗？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:14:49.250

我假设您设置了 Facebook 应用程序。要获取公共页面的帖子，您需要使用您的应用访问令牌。请注意，这与您在 Facebook 开发者网站上的应用配置中指定的应用 ID 和密码不同。Koala 的 OAuth 类提供了获取它的方法。

这是如何做到的：

```
oauth            = Koala::Facebook::OAuth.new Facebook::APP_ID, Facebook::SECRET
app_access_token = oauth.get_app_access_token
graph            = Koala::Facebook::API.new app_access_token
graph.get_connections("depechemode", "posts") 
```

（我是 Depeche Mode 的粉丝。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:33:22.320

您的意思是，您想提取公共页面的提要并将其显示在您的网站上，而不需要您网站的用户登录到 Facebook？请提供更多细节。

# java - 关于 JFrame 的核心 Java 项目

> ID：15025397
> 
> 赞同：0
> 
> 时间：2013-02-22T13:30:03.663
> 
> 标签：java, swing, netbeans, jframe, frame

我正在制作一个小型 Java 项目，其中有 3 个框架连接在一起，比如`f1`, `f2`, `f3`& `f4`。`f1`有一个按钮，单击它后它会调用`f2`，并且`f2`还有一个调用的按钮`f3`。问题是，如果我一一打开所有表单，然后当我关闭表单`f2`或`f3`主表单（`f1`）关闭时。

我希望即使我关闭表单`f2`，`f3`我的主表单也不应该关闭，直到我亲自关闭它。

```
package mnm;

public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        NewJFrame1 nb=new NewJFrame1();
        nb.setVisible(true);
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
                NewJFrame gn=new NewJFrame();
                gn.setDefaultCloseOperation(NewJFrame.DISPOSE_ON_CLOSE);
            }
        });
    }

    private javax.swing.JButton jButton1;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:35:50.567

> ..3 框架连接在一起

不要这样做！请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)详情。其中两个框架应该是模态对话框或`JOptionPane`.

* * *

> 我希望即使我关闭表单`f2`，`f3`我的主表单也不应该关闭，直到我亲自关闭它。

既然我已经警告过你不要这样做，我会添加..

可以通过设置默认关闭操作来实现请求的行为，`DISPOSE_ON_CLOSE`如[本答案](https://stackoverflow.com/a/7143398/418556)所示。这些框架中的任何一个都可以在不影响其他框架的情况下关闭。

![](../Images/2df12300d0a17e7b750c5283eff2a786.png)

# java - 查看 mojarra 上的过期问题

> ID：15025398
> 
> 赞同：0
> 
> 时间：2013-02-22T13:30:07.790
> 
> 标签：java, jsf, mojarra

我有一个大的 Richfaces 树，可以选择树中的每个元素，通过 AJAX 加载内容并进行编辑，从而将您重定向到新页面。这一直很好，直到我有一个特别大的文档我正在处理并且保存不再起作用。您被重定向到显示正确内容的编辑页面，但尝试“保存”任何编辑导致 ViewExpiredException。

我尝试调整了很多参数，最终得到了两个修复它的参数：

```
com.sun.faces.numberOfViewsInSession
com.sun.faces.numberOfLogicalViews 
```

据我所见，每个的默认值为 15，我将它们设置为荒谬的 500，然后应用程序再次运行。不幸的是，因为我不知道问题出在哪里，而且它是一个大型应用程序，所以我无法向您展示任何相关代码。

但问题是：这些参数究竟做了什么，什么可能导致我遇到这些异常以及什么是可接受的值？

**更新**

我不完全确定为什么这个问题被否决了，但如果是关于所谓的重复：我通过谷歌找到了那个帖子，但它提供的链接已经死了。除了参数的沼泽标准（和模糊）定义外，似乎没有太多关于它们的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:22:53.563

当使用服务器端状态保存（默认）时，这两个参数可用于配置逻辑视图和实际视图的最大数量。

逻辑视图是在每个 GET 请求上创建的顶级视图（例如，当您在新的浏览器窗口或选项卡中打开页面时，在浏览器的地址栏中输入地址时，iframe ......）。每个逻辑视图可以有一些关联的实际视图。实际视图是在用户使用标准 JSF 机制浏览您的页面时创建的（例如，如果您导航到从中的`action`方法返回的页面`commandButton`）。两个视图队列都使用 LRU 算法来决定何时删除视图，并且这些队列的最大数量受这两个参数值的限制。

因此，`com.sun.faces.numberOfViewsInSession`定义每个逻辑视图的会话中存储的 JSF 视图的最大数量，并`com.sun.faces.numberOfLogicalViews`定义每个会话存储的逻辑视图的最大数量。

根据您提供的信息，怀疑配置`com.sun.faces.numberOfViewsInSession`解决了您的问题，但您必须进一步调查为什么会创建这么多视图。

附加链接：

*   [服务器端和客户端状态保存之间有什么区别，各自的优点/缺点是什么？](https://wikis.oracle.com/display/GlassFish/JavaServerFacesRI#JavaServerFacesRI-WhatarethedifferencesbetweenServerandClientsidestatesavingandwhatarethebenefits%2Fdrawbacksofeach%3F)

# javascript - 查找绝对定位的子元素的高度并将其高度设置为其父元素

> ID：15025401
> 
> 赞同：1
> 
> 时间：2013-02-22T13:30:18.633
> 
> 标签：javascript, jquery, html, css, absolute

我有一个评论列表，其中包含绝对定位的 div 中的内容。这是设计的一部分。它们位于一个设置为 display: none 的弹出框中，然后使用单击事件淡入。

我遇到的问题是我需要获取内部绝对内容的高度并将该高度设置为其父级，但似乎无法使其正常工作。每个项目都可以是任何长度，因为它们是评论。

我在这里做了一个小提琴来展示我有什么样的结构。[http://jsfiddle.net/ZTDyA/](http://jsfiddle.net/ZTDyA/)

这是结构

```
<div class="hidden">
    <ul class="list">
        <li>
            <div class="inner">there is some content here</div>
            <div class="base">This is a div under the .inner div</div>
        </li>
        <li>
            <div class="inner">For the thing I have made this has to be positioned absolutely, but the content could be of any length so I need the parent to each of these inners to be set to the height of the inner div.</div>
            <div class="base">This is a div under the .inner div</div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:32:56.580

当然，你可以这样做：

```
$('.list li').each(function() {
    $(this).height( $('.inner', this).height() );
}); 
```

jsFiddle：http: [//jsfiddle.net/ZTDyA/1/](http://jsfiddle.net/ZTDyA/1/)

我不明白为什么它是绝对定位的。如果有的话，您可能想要绝对定位 LI。也许如果您详细说明，我们可以提供更好的解决方案。像这样（通过 js）设置高度是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:40:24.167

检查这个：

```
$('button').on('click', function() {    
var hei=  $('.inner').height();
$('.inner').closest('li').height(hei); 
}); 
```

# java - RestTemplate MalformedByteSequenceException 3 字节 UTF-8 序列的无效字节 2

> ID：15025403
> 
> 赞同：1
> 
> 时间：2013-02-22T13:30:30.833
> 
> 标签：java, jaxb, xerces, resttemplate

我正在尝试使用 RestTemplate 从 Web 服务加载对象，如下所示：

```
Menu menu = null;
RestTemplate rest = new RestTemplate();
String request = "<?xml version=\"1.0\" ?><MenuSync><Header><VendorName>usablehealth</VendorName></Header></MenuSync>";
menu = rest.postForObject("http://localhost:6788/LRequest.cgi", request, Menu.class); 
```

这会产生一个异常：

> [com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：3 字节 UTF-8 序列的无效字节 2。] 在 com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC .java:389) 在 com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208) ) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248) 在 com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62) 在 javax。 servlet.http.HttpServlet.service(HttpServlet.java:637) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)在 org.mortbay.jetty.servlet。ServletHandler.handle(ServletHandler.java:362) at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) at org .mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper .java:152）在 org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty。 Server.handle(Server.java:324) at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505) at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java :380) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)

看起来很简单，但是从 web 服务加载的 XML 不包含 UTF-8 违规。如果我使用显式 JAXB 来解除对象的编组，它可以正常工作。

```
Menu menu = null;
RestTemplate rest = new RestTemplate();
String request = "<?xml version=\"1.0\" ?><MenuSync><Header><VendorName>usablehealth</VendorName></Header></MenuSync>";
String response = rest.postForObject("http://localhost:6788/LRequest.cgi", request, String.class);
try {
  JAXBContext context = JAXBContext.newInstance(Menu.class);
  Unmarshaller um = context.createUnmarshaller();
  um.setEventHandler(new CustomValidationEventHandler());
  menu = (Menu) um.unmarshal(new ByteArrayInputStream(response.getBytes("UTF-8")));
} catch (UnsupportedEncodingException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} catch (JAXBException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

我没有在我的 applicationContext 中声明 RestTemplate bean，因为 Marchal/unmarchal 实现应该是默认的（JAXB？）。这些解决方案有什么区别？

# jetty - 如何在嵌入码头 xml 配置中设置会话超时？

> ID：15025408
> 
> 赞同：3
> 
> 时间：2013-02-22T13:31:12.163
> 
> 标签：jetty, session-timeout

我的 jetty-servlet-context.xml 中有那行代码

```
<bean id="jerseyServletCtx" class="org.eclipse.jetty.servlet.ServletContextHandler">
        <property name="displayName" value="Jersey Servlet Context"/>
        <property name="contextPath" value="/rest"/>
        <property name="sessionHandler">
            <bean class="org.eclipse.jetty.server.session.SessionHandler"/>
        </property>
... 
```

如何在我的 xml 文件中添加设置 maxInactiveInterval 的功能？也许我错过了一些东西，它可能在其他任何地方而不是那个 jerseyServletCtx，但它应该在 jetty-servlet-context.xml。欢迎任何想法。

**PS：**我没有 web.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T00:44:52.760

您的问题已经存在将近一年了，但如果它可能对您或其他人有所帮助：您可能需要查看[`webdefault.xml`](http://wiki.eclipse.org/Jetty/Reference/webdefault.xml)并检查`session-timeout`会话配置部分中的元素。

# ios - 如何以编程方式在 iOS 中播放 .flv 扩展文件

> ID：15025410
> 
> 赞同：0
> 
> 时间：2013-02-22T13:31:17.993
> 
> 标签：ios, objective-c, iphone, xcode, flv

我想在 iPhone 和 iPod 中播放 .flv 扩展名文件。我知道 iPhone 和家人不支持 .flv 文件。以前我尝试将其更改为另一种格式，例如 .mov 和 .mp4。但是在线转换器在更改时会降低视频质量。任何人都可以建议我如何在我的 iOS 应用程序中毫无问题地播放 .flv 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:47:01.487

iOS 没有正确的编解码器来播放 FLV。它需要重新编码为 .mp4 或 .mov 文件。iOS实际上可以玩的东西。

# android - 使用 android 中的按钮启动相同的活动

> ID：15025412
> 
> 赞同：2
> 
> 时间：2013-02-22T13:31:26.403
> 
> 标签：android, button, android-activity

是否可以在单击按钮时启动相同的活动。我的 MainActivity 中有一个按钮，我希望当我单击该按钮时，当前的 Activity (MainActivity) 重新启动（重新开始）？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:33:21.197

这样做的唯一方法是再次启动该 Activity 的 Intent。但是，我不明白您为什么要这样做，只是刷新 Activity 的内容，在该活动中调用相同的活动.. 是多余的并且没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:33:51.693

试试这个 ：）

```
Button buttonOne = (Button) findViewById(R.id.button1);
buttonOne.setOnClickListener(new Button.OnClickListener() {
public void onClick(View v) {
       Intent intent = new Intent(MainActivity.this,
                        MainActivity.class);

                startActivity(intent);
}
 }); 
```

但我不明白你为什么要这样做：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-20T10:44:23.770

如果您只想重新加载活动，无论出于何种原因，您都可以使用活动`this.recreate();`在哪里`this`。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-22T13:42:29.230

```
 Intent intent = new Intent(SameActivity.class);

            startActivity(intent); 
```

# asp.net - 如何获取 Facebook 登录用户的朋友详细信息并从登录用户不是管理员的 C# 应用程序向他们发送消息

> ID：15025419
> 
> 赞同：0
> 
> 时间：2013-02-22T13:31:50.037
> 
> 标签：asp.net

如何获取 Facebook 登录用户的好友详细信息并从登录用户不是管理员的 C# 应用程序向他们发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:19:02.213

如果在 facebook 中创建的应用程序的沙盒模式为关闭，非管理员用户可以检索他们的 facebook 朋友。要发送消息，您可以用户发送由 facebook “ [http://developers.facebook.com/docs/reference/dialogs/send/](http://developers.facebook.com/docs/reference/dialogs/send/) ”提供的对话

# azure - 已发布的 mvc4 Web 应用程序随机重新播种/擦除数据库

> ID：15025427
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:07.623
> 
> 标签：azure, asp.net-mvc-4

我使用 mvc4 创建了一个网站，在开发环境中一切正常。

该站点运行了大约 6 个小时（幸运的是只有少数人注册了），然后数据库恢复到该站点首次发布时的状态。

自从网站上线以来，我对网站进行了一些更改（仅针对视图），并且这些更改仍然存在，如果网站以某种方式重新发布，这些更改将不会保留。

我对数据库种子所做的更改都来自这篇文章；[http://kevin-junghans.blogspot.ie/2013/01/seeding-customizing-aspnet-mvc.html](http://kevin-junghans.blogspot.ie/2013/01/seeding-customizing-aspnet-mvc.html)。

任何帮助都会很好，我无法确定问题并且不想让网站再次上线，直到我知道用户帐户不会被删除。

如果有任何更具体的信息有助于识别问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:25:12.377

我最终发布了包括数据库的项目，而不是删除对 initDb 的引用并重新创建数据库，然后重新发布.. 到目前为止，这个问题还没有再次发生。

# shader - 使用 libgdx 中的 ShaderProgram 为游戏内菜单创建叠加层

> ID：15025428
> 
> 赞同：6
> 
> 时间：2013-02-22T13:32:11.813
> 
> 标签：shader, libgdx

目前正在制作游戏并尝试在单击“菜单”按钮时覆盖屏幕 - 我认为这应该是相当常见/简单的，但仍然存在实现它的问题。

我目前的设置：

*   TiledMapRenderer：渲染 TMX 瓦片（背景/地图）
*   SpriteBatch：用于各种资产（例如玩家图像）
*   阶段：按住菜单按钮
*   ShaderProgram：使用 GLSL 创建叠加/阴影效果
*   SpriteBatch 和 map 设置为使用 ShaderProgram

正如许多人所建议的那样，出于性能考虑，我只使用一个 SpriteBatch - 因此各种资产和菜单舞台都使用相同的精灵批次。

着色器的目的是添加一个深色/半透明覆盖层以使屏幕变灰，以便菜单在打开时更易于阅读。

我遇到的主要问题是，因为资产和菜单共享相同的 SpriteBatch，它们也共享相同的着色器......所以，当我启用着色效果时，**所有内容**（背景和菜单按钮）都是灰色的。

我怎样才能只使用一个 SpriteBatch 但只将着色器应用于背景（并保持菜单按钮正常/无阴影）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:06:10.567

*   你可以使用：setShader（ShaderProgram 着色器）

*   您可以向着色器添加一些逻辑以启用覆盖（统一，读取一些不同的属性等），但不建议这样做，因为您放置在那里的每一行每秒都会执行数千次。

*   [推荐]您实际上可以绘制一个真实的叠加层。有一个透明的灰色小纹理（8x8px）并在背景之后和菜单之前绘制它。那将在屏幕坐标上，就像菜单一样，对吗？所以它也不会增加任何复杂性（创建一个足够大的精灵）。

*   [高级] 当你按下菜单时你的游戏会暂停，你可以在点击菜单按钮时将你的屏幕复制到一个 FBO。然后您可以对图像进行后处理（变暗、模糊），并将其用作菜单的背景。这将允许更好的效果，并且实际上会更有效，因为洞场景绘图被“缓存”在 fbo 内（绘制单个 fbo 纹理比重新计算洞场景更快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:13:01.313

在 libgdx 论坛上四处询问后，发现了 - 解决方案是在着色器中设置强度，然后`spriteBatch.flush()`在绘制**下一**件事之前刷新批次（即）。

那么大致...

```
spriteBatch.start();
//draw stuff
spriteBatch.flush();
// set shader strength/variables
// draw more stuff (is now affected by shader)
spriteBatch.end(); 
```

# html - 如何向 ExtJS HTML 编辑器添加字符限制

> ID：15025429
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:15.043
> 
> 标签：html, oracle, extjs

我在 ExtJS 中有一个 HTML 编辑器。

我想限制用户在其中添加字符。

我将以 HTML 格式将此值存储在数据库中，例如-

```
<font color="FF6600" face="verdana"><i>​This is the HTML text</i></font><br> 
```

我的问题是，（1）如果列的数据类型是 VARCHAR2(2000)，字符的限制应该是多少

(2) 我应该使用哪个属性来限制字符。我尝试使用 `maxLength: 250`但它不起作用。它允许用户添加超过 250 个字符。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:12:13.673

HtmlEditor 不包含名为 maxLength 的属性，只有文本字段包含，您必须自己实现。

您可以将 change 事件用于这样的事情。

```
listeners: {
    change: function(editor, newValue, oldValue) {
        if (newValue.length > editor.maxLength) {
            editor.setValue(oldValue);
        }
    }
} 
```

# plugins - ckeditor 4，版本控制

> ID：15025430
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:18.577
> 
> 标签：plugins, load, ckeditor, version

我想知道是否可以通过工具栏中的按钮加载当前内容的先前版本。不同版本的内容存储在数据库中。理想的行为是单击工具栏中的按钮，会打开一个弹出对话框，其中包含以前版本的内容列表。单击时，所选内容将加载到编辑器中。

我正在使用 php 和 mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:07:27.847

您必须实现一个自定义插件，通过 ajax 获取版本：

[使用自定义对话窗口创建 CKEditor 插件](http://docs.cksource.com/CKEditor_3.x/Tutorials/SimpleLink_Plugin_Part_1)

[CKEDITOR 插件 SDK](http://docs.ckeditor.com/#!/guide/plugin_sdk_intro)

# javascript - 如何将 JSON 对象列表发送到灯箱？

> ID：15025433
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:28.780
> 
> 标签：javascript, ajax, asp.net-mvc, json, lightbox

在 MVC 4 应用程序中，我希望在单击链接时在灯箱中显示一些相关的产品列表。我有方法返回我需要的产品：

```
 public ActionResult GetRelatedProducts(int id)
    {
       var realProducts = GetRelatedProducts(id);
       List<object> productsObjectList = new List<object>();
       foreach (var item in realProducts)
       {
             productsObjectList .Add(new
             {
                 id = item.Id,
                 fullname = item.Name
             });
       }
       return Json(productsObjectList , JsonRequestBehavior.AllowGet);
    } 
```

HTML是：

```
<a class="show" id="show">Show</a>

<div  id="productBox" style="display: none;">
    // Product list will get here
</div> 
```

和脚本：

```
 $('#show').click(function (e) {
     url = '@Url.Action("GetRelatedProducts", "Product")';
     var data = { id: '@Model.Id' };
     $.post(url, data, function (result) {
           $('#productBox').lightbox_me({
           onLoad: function () {

             //How to send returned product list to light box, to show them by foreach loop

           }
       });
      e.preventDefault();
  });
}); 
```

我如何发送产品列表 `productBox`来展示产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:12:58.237

你编码：

```
$('#show').click(function (e) {
     url = '@Url.Action("GetRelatedProducts", "Product")';
     var data = { id: '@Model.Id' };
     $.post(url, data, function (result) { // <- "result" will contain array
       $('#productBox').lightbox_me({
           onLoad: function () { ... }
       });
       e.preventDefault(); // <- this must prevent "a" tag, put it outside
     });
}); 
```

您可以像这样在客户端使用您的列表：

```
$.post(url, data, function (result) {
    var list = '<ul>';
    for(var i = 0; i < result.length; i++)
    {
        list += '<li>' + result[i].fullname + '</li>';
    }
    list += '</ul>';
    $('#productBox').html(list).lightbox_me();
}); 
```

或者正如**Vladimir Bozic**所写，只需使用`PartialViewResult`, from controller return `PartialView`，它就像普通视图，但没有布局，只是 html 块，你可以像这样使用它：

```
$.post(url, data, function (result) {
    $('#productBox').html(result).lightbox_me();
}); 
```

# jasper-reports - 我们可以在 GroupedStackedBarChart 上绘制折线图吗

> ID：15025434
> 
> 赞同：4
> 
> 时间：2013-02-22T13:32:28.790
> 
> 标签：jasper-reports, jfreechart

我正在尝试创建一个`GroupedStackBar`图表，显示每个客户在过去三个月中每种产品的收入，并添加描述每个时期与客户进行的会议的折线图。我正在使用 JasperReports 创建 PDF 报告，并使用常用的图表定制器进行准备。

下面的快照推测了我正在尝试创建的图表：

![图表图像](../Images/f0d9e808301d04b0fb1e244ba4ef52e1.png).

该报告需要描述每个客户的月收入和会议。如，显示`Client1`提供`X`百万收入并`M`在 11 月举行会议，提供`Y`百万收入并`N`在 12 月举行会议等等。

所以，我的 X 轴有两个分组——客户和上个季度的月份。此外，收入与产品进一步叠加。所以，我有点合并两个不同的数据集——每个客户的收入度量、月份、产品与每个客户的会议度量、月份来构建图表。

我为生成图表而创建的示例程序：

```
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.AxisLocation;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.SubCategoryAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.GroupedStackedBarRenderer;
import org.jfree.chart.renderer.category.LineAndShapeRenderer;
import org.jfree.data.KeyToGroupMap;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class GroupedStackedBarLineChart extends ApplicationFrame {

    public GroupedStackedBarLineChart(final String title) {
        super(title);
        // final JFreeChart chart = constructBarOverLineChart();
        final JFreeChart chart = constructLineOverBarChart();
        final ChartPanel panel = new ChartPanel(chart);
        setContentPane(panel);
    }

    private JFreeChart constructLineOverBarChart() {
        final JFreeChart chart = ChartFactory.createLineChart(
                "Stacked Grouped Bar Line Chart", "Products/Month",
                "Meetings/Month", fetchMeetingDataSet(),
                PlotOrientation.VERTICAL, true, true, false);

        final KeyToGroupMap map = new KeyToGroupMap("Jan13");
        map.mapKeyToGroup("Jan13 (Product1)", "Jan13");
        map.mapKeyToGroup("Jan13 (Product2)", "Jan13");
        map.mapKeyToGroup("Jan13 (Product3)", "Jan13");

        map.mapKeyToGroup("Feb13 (Product1)", "Feb13");
        map.mapKeyToGroup("Feb13 (Product2)", "Feb13");
        map.mapKeyToGroup("Feb13 (Product3)", "Feb13");

        map.mapKeyToGroup("Mar13 (Product1)", "Mar13");
        map.mapKeyToGroup("Mar13 (Product2)", "Mar13");
        map.mapKeyToGroup("Mar13 (Product3)", "Mar13");

        final GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();
        renderer.setSeriesToGroupMap(map);
        renderer.setItemMargin(0.076);

        final SubCategoryAxis domainAxis = new SubCategoryAxis("Products/Month");
        domainAxis.addSubCategory("Jan13");
        domainAxis.addSubCategory("Feb13");
        domainAxis.addSubCategory("Mar13");

        domainAxis.setCategoryMargin(0.28);

        final CategoryPlot subPlot1 = (CategoryPlot) chart.getPlot();
        subPlot1.setDataset(1, fetchRevenueDataSet());
        subPlot1.setDomainAxis(domainAxis);
        final ValueAxis revenueAxis = new NumberAxis("Revenue");
        subPlot1.setRangeAxis(1, revenueAxis);
        subPlot1.setRenderer(1, renderer);

        return chart;
    }

    private JFreeChart constructBarOverLineChart() {
        final JFreeChart chart = ChartFactory.createStackedBarChart(
                "Stacked Grouped Bar Line Chart", "Clients", "Revenue",
                fetchRevenueDataSet(), PlotOrientation.VERTICAL, true, true,
                false);

        final KeyToGroupMap map = new KeyToGroupMap("Jan13");
        map.mapKeyToGroup("Jan13 (Product1)", "Jan13");
        map.mapKeyToGroup("Jan13 (Product2)", "Jan13");
        map.mapKeyToGroup("Jan13 (Product3)", "Jan13");

        map.mapKeyToGroup("Feb13 (Product1)", "Feb13");
        map.mapKeyToGroup("Feb13 (Product2)", "Feb13");
        map.mapKeyToGroup("Feb13 (Product3)", "Feb13");

        map.mapKeyToGroup("Mar13 (Product1)", "Mar13");
        map.mapKeyToGroup("Mar13 (Product2)", "Mar13");
        map.mapKeyToGroup("Mar13 (Product3)", "Mar13");

        final GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();
        renderer.setSeriesToGroupMap(map);
        renderer.setItemMargin(0.076);

        final SubCategoryAxis domainAxis = new SubCategoryAxis("Products/Month");
        domainAxis.addSubCategory("Jan13");
        domainAxis.addSubCategory("Feb13");
        domainAxis.addSubCategory("Mar13");

        domainAxis.setCategoryMargin(0.28);

        final CategoryPlot subPlot1 = (CategoryPlot) chart.getPlot();
        subPlot1.setDomainAxis(domainAxis);
        subPlot1.setRenderer(renderer);

        final ValueAxis meetingAxis = new NumberAxis("Meetings");
        subPlot1.setDataset(1, fetchMeetingDataSet());
        // subPlot1.mapDatasetToDomainAxis(1, 1);
        subPlot1.setRangeAxis(1, meetingAxis);
        subPlot1.setRangeAxisLocation(0, AxisLocation.BOTTOM_OR_LEFT);
        subPlot1.setRangeAxisLocation(1, AxisLocation.TOP_OR_RIGHT);
        subPlot1.setRenderer(1, new LineAndShapeRenderer(true, false));

        return chart;
    }

    private CategoryDataset fetchRevenueDataSet() {

        final DefaultCategoryDataset revenueDataSet = new DefaultCategoryDataset();

        revenueDataSet.addValue(20.3, "Jan13 (Product1)", "Client1");
        revenueDataSet.addValue(27.2, "Jan13 (Product2)", "Client1");
        revenueDataSet.addValue(19.7, "Jan13 (Product3)", "Client1");

        revenueDataSet.addValue(19.4, "Feb13 (Product1)", "Client1");
        revenueDataSet.addValue(10.9, "Feb13 (Product2)", "Client1");
        revenueDataSet.addValue(18.4, "Feb13 (Product3)", "Client1");

        revenueDataSet.addValue(16.5, "Mar13 (Product1)", "Client1");
        revenueDataSet.addValue(15.9, "Mar13 (Product2)", "Client1");
        revenueDataSet.addValue(16.1, "Mar13 (Product3)", "Client1");

        revenueDataSet.addValue(23.3, "Jan13 (Product1)", "Client2");
        revenueDataSet.addValue(16.2, "Jan13 (Product2)", "Client2");
        revenueDataSet.addValue(28.7, "Jan13 (Product3)", "Client2");

        revenueDataSet.addValue(12.7, "Feb13 (Product1)", "Client2");
        revenueDataSet.addValue(17.9, "Feb13 (Product2)", "Client2");
        revenueDataSet.addValue(12.6, "Feb13 (Product3)", "Client2");

        revenueDataSet.addValue(15.4, "Mar13 (Product1)", "Client2");
        revenueDataSet.addValue(21.0, "Mar13 (Product2)", "Client2");
        revenueDataSet.addValue(11.1, "Mar13 (Product3)", "Client2");

        revenueDataSet.addValue(23.8, "Jan13 (Product1)", "Client3");
        revenueDataSet.addValue(23.4, "Jan13 (Product2)", "Client3");
        revenueDataSet.addValue(19.3, "Jan13 (Product3)", "Client3");

        revenueDataSet.addValue(11.9, "Feb13 (Product1)", "Client3");
        revenueDataSet.addValue(31.0, "Feb13 (Product2)", "Client3");
        revenueDataSet.addValue(22.7, "Feb13 (Product3)", "Client3");

        revenueDataSet.addValue(15.3, "Mar13 (Product1)", "Client3");
        revenueDataSet.addValue(14.4, "Mar13 (Product2)", "Client3");
        revenueDataSet.addValue(25.3, "Mar13 (Product3)", "Client3");

        return revenueDataSet;
    }

    private CategoryDataset fetchMeetingDataSet() {
        final DefaultCategoryDataset meetingDataSet = new DefaultCategoryDataset();

        meetingDataSet.addValue(20, "Jan13", "Client1");
        meetingDataSet.addValue(8, "Feb13", "Client1");
        meetingDataSet.addValue(35, "Mar13", "Client1");

        meetingDataSet.addValue(7, "Jan13", "Client2");
        meetingDataSet.addValue(20, "Feb13", "Client2");
        meetingDataSet.addValue(12, "Mar13", "Client2");

        meetingDataSet.addValue(25, "Jan13", "Client3");
        meetingDataSet.addValue(17, "Feb13", "Client3");
        meetingDataSet.addValue(7, "Mar13", "Client3");

        return meetingDataSet;
    }

    public static void main(String[] args) {
        GroupedStackedBarLineChart demo = new GroupedStackedBarLineChart(
                "Client Revenue and Meetings");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```

上述程序的输出未按要求显示图表。相反，折线图显示`P`了*Jan13*的会议与`Client1`、*Jan13*的会议与、*Jan13*的会议和*Feb13*的会议、*Feb13*的会议等等。也就是说，不尊重客户的分组。我尝试在没有产量的情况下改变折线图数据集中的行键/列键。`Q`*`Client2``R`*`Client3``X`*`Client2``Y`*`Client2`****

 ***你能指点我正确获得折线图吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:07:46.337

我的第一个想法是实现一个自定义渲染器——GroupStackedBarRenderer 和 LineAndShapeRenderer 的混合体——但是下面的假分组更容易；）

所以我用 StackeBarRenderer 替换了 GroupedStackedBarRenderer 并在组之间插入了一个虚拟列。客户的分组类别标签由第二个域轴归档 - 幸运的是，第二个类别轴的标签在第一个轴的组内居中，无论使用了多少客户/组...

```
import java.awt.Graphics2D;
import org.apache.commons.beanutils.PropertyUtilsBean;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.AxisLocation;
import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.StackedBarRenderer;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.text.G2TextMeasurer;
import org.jfree.text.TextBlock;
import org.jfree.text.TextUtilities;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RectangleEdge;
import org.jfree.ui.RefineryUtilities;

public class GroupedStackedBarLineChart extends ApplicationFrame {

    public GroupedStackedBarLineChart(final String title) {
        super(title);
        // final JFreeChart chart = constructBarOverLineChart();
        final JFreeChart chart = constructLineOverBarChart();
        final ChartPanel panel = new ChartPanel(chart);
        setContentPane(panel);
    }

    private JFreeChart constructLineOverBarChart() {
        final JFreeChart chart = ChartFactory.createLineChart(
                "Stacked Grouped Bar Line Chart", "",
                "Meetings/Month", fetchMeetingDataSet(),
                PlotOrientation.VERTICAL, true, true, false);
        final StackedBarRenderer renderer = new StackedBarRenderer();
        renderer.setItemMargin(0.076);

        final CategoryPlot cp = chart.getCategoryPlot();
        cp.setDataset(1, fetchRevenueDataSet());
        final ValueAxis revenueAxis = new NumberAxis("Revenue");
        cp.setRangeAxis(1, revenueAxis);
        cp.setRenderer(1, renderer);

        chopCategoryLabels(cp);
        insertFakeGrouping(cp);

        CategoryAxis ca = new CategoryAxis("Products/Month");
        cp.setDomainAxis(1, ca);
        cp.setDataset(2, anotherDataSet());
        cp.mapDatasetToDomainAxis(2, 1);
        cp.setDomainAxisLocation(1, AxisLocation.BOTTOM_OR_LEFT);
        ca.setAxisLineVisible(false);
        ca.setTickMarksVisible(false);

        return chart;
    }

    private void insertFakeGrouping(CategoryPlot cp) {
        for (int i=0; i<cp.getDatasetCount(); i++) {
            assert(cp.getDataset(i) instanceof DefaultCategoryDataset);
            CategoryDataset cd = cp.getDataset(i);
            Comparable<?> firstRow = cd.getRowKey(0);

            DefaultCategoryDataset dcd = new DefaultCategoryDataset();
            for (int col=0; col<cd.getColumnCount(); col++) {
                if (col > 0) {
                    String c1 = cd.getColumnKey(col-1).toString();
                    c1 = c1.substring(c1.indexOf('_'));
                    String c2 = cd.getColumnKey(col).toString();
                    c2 = c2.substring(c2.indexOf('_'));
                    if (!c1.equals(c2)) {
                        dcd.addValue(null, firstRow, "dummy"+col);
                    }
                }
                for (int row=0; row<cd.getRowCount(); row++) {
                    Comparable<?> rowKey = cd.getRowKey(row);
                    Comparable<?> columnKey = cd.getColumnKey(col);
                    dcd.addValue(cd.getValue(rowKey, columnKey), rowKey, columnKey);
                }
            }

            cp.setDataset(i, dcd);
        }
    }

    private void chopCategoryLabels(CategoryPlot cp) {
        CategoryAxis caOld = cp.getDomainAxis();
        CategoryAxis caNew = new CategoryAxis(){
            protected TextBlock createLabel(Comparable category, float width,
                RectangleEdge edge, Graphics2D g2) {
                String cat = category.toString();
                cat = (cat.contains("_"))
                    ? cat.substring(0, cat.indexOf('_'))
                    : "";
                TextBlock label = TextUtilities.createTextBlock(cat,
                getTickLabelFont(category), getTickLabelPaint(category), width,
                getMaximumCategoryLabelLines(), new G2TextMeasurer(g2));
                return label;
            }           
        };

        try {
            new PropertyUtilsBean().copyProperties(caNew, caOld);
            cp.setDomainAxis(0, caNew);
        } catch (Exception e) {
            throw new RuntimeException("not really?", e);
        }
    }

    private CategoryDataset anotherDataSet() {
        final DefaultCategoryDataset ds = new DefaultCategoryDataset();
        ds.addValue(1, "1", "Client 1");
        ds.addValue(1, "2", "Client 2");
        ds.addValue(1, "3", "Client 3");
        return ds;
    }

    private CategoryDataset fetchRevenueDataSet() {

        final DefaultCategoryDataset revenueDataSet = new DefaultCategoryDataset();

        revenueDataSet.addValue(20.3, "Product 1", "Jan13_1");
        revenueDataSet.addValue(27.2, "Product 2", "Jan13_1");
        revenueDataSet.addValue(19.7, "Product 3", "Jan13_1");

        revenueDataSet.addValue(19.4, "Product 1", "Feb13_1");
        revenueDataSet.addValue(10.9, "Product 2", "Feb13_1");
        revenueDataSet.addValue(18.4, "Product 3", "Feb13_1");

        revenueDataSet.addValue(16.5, "Product 1", "Mar13_1");
        revenueDataSet.addValue(15.9, "Product 2", "Mar13_1");
        revenueDataSet.addValue(16.1, "Product 3", "Mar13_1");

        revenueDataSet.addValue(23.3, "Product 1", "Jan13_2");
        revenueDataSet.addValue(16.2, "Product 2", "Jan13_2");
        revenueDataSet.addValue(28.7, "Product 3", "Jan13_2");

        revenueDataSet.addValue(12.7, "Product 1", "Feb13_2");
        revenueDataSet.addValue(17.9, "Product 2", "Feb13_2");
        revenueDataSet.addValue(12.6, "Product 3", "Feb13_2");

        revenueDataSet.addValue(15.4, "Product 1", "Mar13_2");
        revenueDataSet.addValue(21.0, "Product 2", "Mar13_2");
        revenueDataSet.addValue(11.1, "Product 3", "Mar13_2");

        revenueDataSet.addValue(23.8, "Product 1", "Jan13_3");
        revenueDataSet.addValue(23.4, "Product 2", "Jan13_3");
        revenueDataSet.addValue(19.3, "Product 3", "Jan13_3");

        revenueDataSet.addValue(11.9, "Product 1", "Feb13_3");
        revenueDataSet.addValue(31.0, "Product 2", "Feb13_3");
        revenueDataSet.addValue(22.7, "Product 3", "Feb13_3");

        revenueDataSet.addValue(15.3, "Product 1", "Mar13_3");
        revenueDataSet.addValue(14.4, "Product 2", "Mar13_3");
        revenueDataSet.addValue(25.3, "Product 3", "Mar13_3");

        return revenueDataSet;
    }

    private CategoryDataset fetchMeetingDataSet() {
        final DefaultCategoryDataset meetingDataSet = new DefaultCategoryDataset();

        meetingDataSet.addValue(20, "Meetings", "Jan13_1");
        meetingDataSet.addValue(8, "Meetings", "Feb13_1");
        meetingDataSet.addValue(35, "Meetings", "Mar13_1");

        meetingDataSet.addValue(7, "Meetings", "Jan13_2");
        meetingDataSet.addValue(20, "Meetings", "Feb13_2");
        meetingDataSet.addValue(12, "Meetings", "Mar13_2");

        meetingDataSet.addValue(25, "Meetings", "Jan13_3");
        meetingDataSet.addValue(17, "Meetings", "Feb13_3");
        meetingDataSet.addValue(7, "Meetings", "Mar13_3");

        return meetingDataSet;
    }

    public static void main(String[] args) {
        GroupedStackedBarLineChart demo = new GroupedStackedBarLineChart(
                "Client Revenue and Meetings");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```***

# red5 - 使用 red5 服务器进行流式传输

> ID：15025436
> 
> 赞同：1
> 
> 时间：2013-02-22T13:32:35.270
> 
> 标签：red5, live-streaming

我想使用 red5 服务器进行流式传输，我执行了以下代码

```
ffmpeg -i /var/lib/red5/webapps/test/1.flv -f flv rtmp://127.0.0.1:1935/live/livestream 
```

但是当我尝试捕获流时它没有给出任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:47:25.990

red5 可以直接读取 flv 文件，并默认将其转换为 rtmp 流在 1935 端口上。不需要ffmpeg。此外，red5 使用端口 1935 连接 flash 客户端，而不是用于抽入 rtmp 流。

# java - jsp/jstl页面中的java错误

> ID：15025439
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:39.477
> 
> 标签：java, jsp, properties, jstl

我有以下代码：

```
<c:choose>
    <c:when test="${empty sessionScope.languageRB}">
        <html:hidden property="language" value="en"/>
        <html:hidden property="country" value="GB"/>
    </c:when>
    <c:otherwise test="${not empty sessionScope.languageRB}">
        <html:hidden property="language" value="<%=languageRB.getString("style.language")%>"/>
        <html:hidden property="country" value="<%=languageRB.getString("style.country")%>"/>
    </c:otherwise>
</c:choose> 
```

languageRB 是存储在会话中的属性，类型为 ResourceBundle。我想做以下事情：如果会话中存在语言RB，则使用括号中字符串的值定义属性，否则将属性设置为默认值。

我收到以下错误：

```
 org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 89 in the jsp file: /pages/common002-preparelogin.jsp
languageRB cannot be resolved

88:         <c:otherwise test="${not empty sessionScope.languageRB}">
89:             <html:hidden property="language" value="<%=languageRB.getString("style.language")%>"/>
90:             <html:hidden property="country" value="<%=languageRB.getString("style.country")%>"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:16:16.637

首先，您不应该混合使用*scriptlet*和 taglibs/EL。使用其中之一。由于*Scriptlet*十年来一直被[官方禁止](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)，您应该忘记它们并坚持使用 taglibs/EL。您的具体问题是因为无论 JSTL 标签库的结果如何，总是调用*scriptltets 。*它们不会与基于编码的标记库同步运行。您可以将其可视化如下：*scriptlet*首先从上到下运行，然后轮到 taglibs/EL 再次从​​上到下运行。您应该使用 EL 来访问资源包属性。另一个优点是 EL 是空安全的，它不会抛出 NPE，而只是绕过属性访问。

其次，当你用EL替换*scriptlet*[`<c:otherwise>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/otherwise.html)时，你有一个新问题，根本不支持`test`属性。摆脱它。`<c:when>`只有当没有任何条件匹配时，它才会被击中。

所以，总而言之，这应该做：

```
<c:choose>
    <c:when test="${empty sessionScope.languageRB}">
        <html:hidden property="language" value="en"/>
        <html:hidden property="country" value="GB"/>
    </c:when>
    <c:otherwise>
        <html:hidden property="language" value="${languageRB['style.language']}"/>
        <html:hidden property="country" value="${languageRB['style.country']}"/>
    </c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:07:27.523

在表达式中，您需要直接从会话中获取捆绑包：

```
<%=((ResourceBundle)session.getAttribute("languageRB")).getString("style.language")%> 
```

# sql - 我怎么能循环这个查询？

> ID：15025440
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:44.970
> 
> 标签：sql, oracle

我在 Oracle 中有以下 sql 查询。

```
SELECT pr.uuid AS masterproductid, 
            (case 
                when xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint1"]/string/text()') IS NOt NULL THEN 'sellingpoint1'
                when xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint2"]/string/text()') IS NOt NULL THEN 'sellingpoint2'
            END
            ) as testt
  FROM product pr WHERE pr.defaultproductvariationid =(SELECT prv.uuid FROM  productvariation prv WHERE  prv.uuid = '3rep_vEBP6IAAAE83REjnPbb' AND pr.typecode='16') 
```

在这种情况下 - 当“卖点 1”和“卖点 2”都不为空但此查询仅返回卖点 1 时，我也想要“卖点 2”我怎么能得到它？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:09:43.183

这将其分为两列：

```
SELECT pr.uuid AS masterproductid, 
            (case when xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint1"]/string/text()') IS NOt NULL
                 THEN 'sellingpoint1'
             end) as testsellingpoint1,
            (case when xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint2"]/string/text()') IS NOt NULL
                  THEN 'sellingpoint2'
             END
            ) as testsellingpoint2
  FROM product pr WHERE pr.defaultproductvariationid =(SELECT prv.uuid FROM  productvariation prv WHERE  prv.uuid = '3rep_vEBP6IAAAE83REjnPbb' AND pr.typecode='16') 
```

# android - 如何在 TabChange 上的 Fragments 中保存/恢复视图状态

> ID：15025442
> 
> 赞同：0
> 
> 时间：2013-02-22T13:32:57.783
> 
> 标签：android, android-fragments, android-tabhost, savestate, fragment-tab-host

可能是重复的问题。但我找不到我的问题的解决方案

我有一个带有 3 个标签的 TabHost。比方说`tabA`，，`tabB`。当我切换到另一个选项卡（即 tabA 或 tabB）时`tabC`，我做了很多视图更改，例如按钮文本更改、editText 更改，然后我失去了所有视图更改。我所有的视图值（按钮和editTexts），它将我的所有视图重置为默认的XML文件值。我不希望这种情况发生。我只想如何保存我的观点状态。我不能在标签更改时丢失这个。`tabC``tabC`

我试过这个[链接](https://stackoverflow.com/questions/6787071/android-fragment-how-to-save-states-of-views-in-a-fragment-when-another-fragmen)但失败了。

这是我的代码

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    Toast.makeText(getActivity(), "onCreateView", Toast.LENGTH_SHORT)
            .show();

    if (container == null) {

        return null;
    }

    View vi = inflater.inflate(R.layout.settings, container, false);

    btnInsert = (Button) vi.findViewById(R.id.btnInsert);
    btnInsert.setOnClickListener(this);
    btnPosition = (Button) vi.findViewById(R.id.btnPosition);
    btnPosition.setOnClickListener(this);
    txtPosition = (TextView) vi.findViewById(R.id.txtPosition);
    txtLogo = (TextView) vi.findViewById(R.id.txtLogo);
    imgLogoPreview = (ImageView) vi.findViewById(R.id.imgLogoPreview);
    imgLogoPreview.setOnClickListener(this);
    edTxtUserText = (EditText) vi.findViewById(R.id.edTxtPreview);
    relLogo = (RelativeLayout) vi.findViewById(R.id.RelLogo);
    relText = (RelativeLayout) vi.findViewById(R.id.RelText);

    logoWheel = (WheelView) vi.findViewById(R.id.wheelLogo);

    logoWheel.setAdapter(new ArrayWheelAdapter<String>(logoWheelList));
    logoWheel.setVisibleItems(4);
    logoWheel.setCurrentItem(1);
    positionWheel = (WheelView) vi.findViewById(R.id.wheelPosition);
    positionWheel.setAdapter(new ArrayWheelAdapter<String>(
            positionWheelTextList));

    // LogoWheel changed listener
    changedListenerLogo = new OnWheelChangedListener() {
        public void onChanged(WheelView wheel, int oldValue, int newValue) {
            if (!wheelScrolled) {

            }
        }
    };

    logoWheel.addChangingListener(changedListenerLogo);

    // Wheel scrolled listener
    scrolledListenerLogo = new OnWheelScrollListener() {

        public void onScrollStarts(WheelView wheel) {
            wheelScrolled = true;

        }

        public void onScrollEnds(WheelView wheel) {
            wheelScrolled = false;
            btnInsert.setText(logoWheelList[wheel.getCurrentItem()] + "");
            wheel.setVisibility(View.INVISIBLE);
            if (wheel.getCurrentItem() == 2) {

                txtPosition.setVisibility(View.INVISIBLE);
                btnPosition.setVisibility(View.INVISIBLE);
                relText.setVisibility(View.INVISIBLE);
                relLogo.setVisibility(View.INVISIBLE);

            } else if (wheel.getCurrentItem() == 1) {

                relText.setVisibility(View.VISIBLE);
                relLogo.setVisibility(View.INVISIBLE);
                txtPosition.setVisibility(View.VISIBLE);
                btnPosition.setVisibility(View.VISIBLE);
                btnPosition.setText("Top");
                positionWheel.setAdapter(new ArrayWheelAdapter<String>(
                        positionWheelTextList));
                positionWheel.setVisibleItems(4);
                positionWheel.setCurrentItem(1);

            } else if (wheel.getCurrentItem() == 0) {

                relLogo.setVisibility(View.VISIBLE);
                relText.setVisibility(View.INVISIBLE);
                txtPosition.setVisibility(View.VISIBLE);
                btnPosition.setVisibility(View.VISIBLE);
                btnPosition.setText("Top Left");
                positionWheel.setAdapter(new ArrayWheelAdapter<String>(
                        positionWheelLogoList));
                positionWheel.setVisibleItems(4);
                positionWheel.setCurrentItem(1);

            }
        }
    };

    logoWheel.addScrollingListener(scrolledListenerLogo);

    // /////////////////////Positon Wheel Listners///////////

    // LogoWheel changed listener
    changedListenerPosition = new OnWheelChangedListener() {
        public void onChanged(WheelView wheel, int oldValue, int newValue) {
            if (!wheelScrolled) {

            }
        }
    };

    positionWheel.addChangingListener(changedListenerPosition);

    // Wheel scrolled listener
    scrolledListenerPosition = new OnWheelScrollListener() {

        public void onScrollStarts(WheelView wheel) {
            wheelScrolled = true;

        }

        public void onScrollEnds(WheelView wheel) {
            wheelScrolled = false;

            String btnStatus = btnInsert.getText().toString();
            if (btnStatus.equals("Logo")) {
                btnPosition.setText(positionWheelLogoList[positionWheel
                        .getCurrentItem()] + "");

            } else if (btnStatus.equals("Text")) {
                btnPosition.setText(positionWheelTextList[positionWheel
                        .getCurrentItem()] + "");
            }

            wheel.setVisibility(View.INVISIBLE);

        }
    };

    positionWheel.addScrollingListener(scrolledListenerPosition);

    return vi;

} 
```

**编辑** 这是我的 FragmentActivity 的代码

```
public class MainActivity extends FragmentActivity implements
    TabHost.OnTabChangeListener {

private TabHost mTabHost;
private HashMap mapTabInfo = new HashMap();
private TabInfo mLastTab = null;

private class TabInfo {
    private String tag;
    private Class clss;
    private Bundle args;
    private Fragment fragment;

    TabInfo(String tag, Class clazz, Bundle args) {
        this.tag = tag;
        this.clss = clazz;
        this.args = args;
    }

}

class TabFactory implements TabContentFactory {

    private final Context mContext;

    /**
     * @param context
     */
    public TabFactory(Context context) {
        mContext = context;
    }

    /**
     * (non-Javadoc)
     * 
     * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
     */
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }

}

/**
 * (non-Javadoc)
 * 
 * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
 */
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Step 1: Inflate layout
    setContentView(R.layout.tabs_layout);
    // Step 2: Setup TabHost
    initialiseTabHost(savedInstanceState);
    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); // set
    }
}

/**
 * (non-Javadoc)
 * 
 * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
 */
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                            // selected
    super.onSaveInstanceState(outState);
}

/**
 * Step 2: Setup TabHost
 */
private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();
    TabInfo tabInfo = null;
    MainActivity.addTab(
            this,
            this.mTabHost,
            this.mTabHost.newTabSpec("Tab1").setIndicator("Home",
                    getResources().getDrawable(R.drawable.instructions)),
            (tabInfo = new TabInfo("Tab1", Instructions.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    MainActivity.addTab(
            this,
            this.mTabHost,
            this.mTabHost.newTabSpec("Tab2").setIndicator("Capture",
                    getResources().getDrawable(R.drawable.capture)),
            (tabInfo = new TabInfo("Tab2", Capture.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    MainActivity.addTab(
            this,
            this.mTabHost,
            this.mTabHost.newTabSpec("Tab3").setIndicator("Settings",
                    getResources().getDrawable(R.drawable.settings)),
            (tabInfo = new TabInfo("Tab3", Settings.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    // Default to first tab
    this.onTabChanged("Tab1");
    //
    mTabHost.setOnTabChangedListener(this);
}

/**
 * @param activity
 * @param tabHost
 * @param tabSpec
 * @param clss
 * @param args
 */
private static void addTab(MainActivity activity, TabHost tabHost,
        TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    // Attach a Tab view factory to the spec
    tabSpec.setContent(activity.new TabFactory(activity));
    String tag = tabSpec.getTag();

    // Check to see if we already have a fragment for this tab, probably
    // from a previously saved state. If so, deactivate it, because our
    // initial state is that a tab isn't shown.
    tabInfo.fragment = activity.getSupportFragmentManager()
            .findFragmentByTag(tag);
    if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
        FragmentTransaction ft = activity.getSupportFragmentManager()
                .beginTransaction();
        ft.detach(tabInfo.fragment);
        ft.commit();
        activity.getSupportFragmentManager().executePendingTransactions();
    }

    tabHost.addTab(tabSpec);
}

/**
 * (non-Javadoc)
 * 
 * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
 */
public void onTabChanged(String tag) {
    TabInfo newTab = (TabInfo) this.mapTabInfo.get(tag);
    if (mLastTab != newTab) {
        FragmentTransaction ft = this.getSupportFragmentManager()
                .beginTransaction();
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(this,
                        newTab.clss.getName(), newTab.args);
                ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
    }
}

} 
```

我正在关注[本](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:02:47.063

这是您的问题的解决方案，我对您有帮助...我发布了一段代码：

```
 TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {
                android.support.v4.app.FragmentManager fm =   getSupportFragmentManager();
                AndroidFragment androidFragment = (AndroidFragment) fm.findFragmentByTag("android");
                AppleFragment appleFragment = (AppleFragment) fm.findFragmentByTag("apple");
                android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();

                /** Detaches the androidfragment if exists */

                /** Detaches the applefragment if exists */

                /** If current tab is android */
                if(tabId.equalsIgnoreCase("android")){

                    if(androidFragment==null){      
                        /** Create AndroidFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new AndroidFragment(), "android");                       
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        if(appleFragment!=null)
                        ft.hide(appleFragment);

                        ft.show(androidFragment);                       
                    }

                }else{  /** If current tab is apple */
                    if(appleFragment==null){
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new AppleFragment(), "apple");                       
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        if(androidFragment!=null)
                            ft.hide(androidFragment);

                        ft.show(appleFragment);                     
                    }
                }
                ft.commit();                
            }
        };

        /** Setting tabchangelistener for the tab */
        tHost.setOnTabChangedListener(tabChangeListener); 
```

只需执行此操作，我就可以很好地保存视图状态....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:55:50.490

对于少量的碎片，你可以试试这个

[http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))

在 onCreate() 设置为 true

# javascript - onclick 事件需要点击两次？

> ID：15025450
> 
> 赞同：0
> 
> 时间：2013-02-22T13:33:22.383
> 
> 标签：javascript, asp.net-mvc-3

为什么我必须点击两次才能将背景颜色设置为绿色？

这是我的 JavaScript：

```
function OnGroupClicked(groupId) {
  var groupIds = new Array();
  $("#group-name-" + groupId).on("click", function () {
    var body = $('#group-name-div' + groupId),
    green = "rgb(0, 128, 0)",
    white = "rgb(255, 255, 255)";

    if (body.css("background-color") !== green) {
      $('#hidden' + groupId).val(1);
      body.css("background-color", green);
    } else {
      $('#hidden' + groupId).val(0);
      body.css("background-color", white);
    }
  });
} 
```

这是我的标记：

```
foreach (var group in Model.AllGroups) {    
    if (Model.GroupsForUser.Any(g => g.GroupId == group.GroupId)) { %>
        <div id="group-name-div<%: group.GroupId %>" style="width:auto; height:50px; border:solid 1px black; margin:5px; background-color:green;" >
            <h3>&nbsp; &nbsp; <a href="javascript:OnGroupClicked(<%: group.GroupId %>)" id="group-name-<%: group.GroupId %>"><%: group.Name %></a></h3> 
        </div>
        <input type="hidden" id="hidden<%: group.GroupId %>" name="group-hidden<%: group.GroupId %>" value="" />
    <% } else { %>
        <div id="group-name-div<%: group.GroupId %>" style="width:auto; height:50px; border:solid 1px black; margin:5px;" >
            <h3>&nbsp; &nbsp; <a href="javascript:OnGroupClicked(<%: group.GroupId %>)" id="group-name-<%: group.GroupId %>"><%: group.Name %></a></h3> 
        </div>
        <input type="hidden" id="hidden<%: group.GroupId %>" name="group-hidden-<%: group.GroupId %>" value="" />
    <% }
} %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:37:27.600

您首先在第一次单击时声明事件处理程序，而不是触发它。

为了进一步解释，当您单击运行该`OnGroupClicked`函数的链接时，这会添加事件侦听器，但不会触发它。

要解决此问题，请将事件附加到元素上，并使用它`this`来了解单击了哪个元素。

你可以这样做：

```
$(".changeColor").on("click", function () {
 var body = $(this).closest('group-name-div'),
     green = "rgb(0, 128, 0)",
     white = "rgb(255, 255, 255)";

 if (body.css("background-color") !== green) {
   body.next('input').val(1);
   body.css("background-color", green);
 } else {
   body.next('input').val(0);
   body.css("background-color", white);
 }
}); 
```

MVC 标记：

```
<div class="group-name-div" id="group-name-div<%: group.GroupId %>">
  <h3><a href="#" class="changeColor"><%: group.Name %></a></h3> 
</div>
<input type="hidden" id="hidden<%: group.GroupId %>" name="group-hidden<%: group.GroupId %>" value="" /> 
```

您不需要整个功能。

# search - 无法在从 Crystal 报表创建的 PDF 文件中搜索

> ID：15025455
> 
> 赞同：0
> 
> 时间：2013-02-22T13:33:33.510
> 
> 标签：search, pdf, crystal-reports

我正在从运行正常的水晶报告创建一个 pdf 文件。但是当我想在创建的 pdf 文件中搜索一个字符串时，它什么也找不到。使用的水晶版本是 13。

有任何想法吗？

谢谢你的帮助

# java - JPA如何调用合并或持久化

> ID：15025457
> 
> 赞同：1
> 
> 时间：2013-02-22T13:33:36.993
> 
> 标签：java, jpa

我是 JPA 的新手，我对来自存储库的这个示例代码有疑问：

```
@Override
public boolean add(User user) {
    EntityManagerFactory emf = HibernateRepositoryFactory
            .getEntityManagerFactory();
    EntityManager em = emf.createEntityManager();
    EntityTransaction tx = em.getTransaction();
    tx.begin();

    User tempUser = null;
    try {
        if (user.getId() != null) {
            tempUser = em.find(User.class, user.getId());
        }
        if (tempUser == null) {
            em.persist(user);
        } else {
            // if so, get the differences and persist them
            tempUser.setPassword(user.getPassword());
            tempUser.setUserName(user.getUserName());
            tempUser = em.merge(user);
        }
    } catch (Exception e) {
        logging.error("log error+ " :" + e);
    }
    tx.commit();
    em.close();
    emf.close();
    return true;
} 
```

与实体：

```
@Entity
@Table(name = "USERS")

public class User implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID", nullable = false, unique = true)
private Long id;

@Version
@Column(name = "OPTLOCK")
private int version;

@Column(name = "USERNAME", nullable = false)
private String userName;

@Column(name = "PASSWORD", nullable = false)
private String password;

public User() {
    super();
}

public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public Long getId() {
    return id;
}

public int getVersion() {
    return version;
} 
```

}

我完全不明白。

在该行中： if (user.getId() != null) user.getId 将始终为 null，因为我相信 id 将在对象被持久化的那一刻生成？像这样 tempUser 永远不会从数据库中填充，并且对象将始终被持久化而不是合并.... 还是我看错了？

查看您是否需要像这样坚持或合并的最佳方法是什么。

编辑

如果我会使用这样的 main 怎么办：

```
User user1 = new User();

    user1 .setPassword("password_user1");
    user1 .setUserName("userName_user1");

... .add(user1); 
```

如果我运行一次，则添加用户。如果我再次运行此用户，则再次使用 id+1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:39:27.123

你是对的，如果用户参数是新的（从未被持久化）那么这个方法会`persist()`它。如果它是一个分离的实例（已经被持久化，并且有一个 id），它将通过调用`merge()`.

我认为该方法的名称具有误导性，它应该被称为`saveOrUpdate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:42:14.070

如果方法参数 User 是一个持久实体，那么 getId() 将不为空。

# c# - 可绑定的 LINQ 库或“为什么不再积极维护 Obtics”

> ID：15025463
> 
> 赞同：9
> 
> 时间：2013-02-22T13:34:00.600
> 
> 标签：c#, .net, linq, binding

最终任务是：将一些 WPF 控件绑定到 LINQ 查询。

搜索“Bindable LINQ”后，我发现多个引用[Obtics](http://obtics.codeplex.com/)、[Bindable Linq](http://www.codeplex.com/bindablelinq)和[Continuous LINQ](http://clinq.codeplex.com/)。他们做我想做的事，但有一件事让我感到困惑：他们的年龄。似乎他们的发展几乎在 2009-2010 年的某个时间停止，这很可疑。

使用它们仍然合理吗？它们最终不是被某些标准库方法所取代吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T18:02:15.130

经过更多研究：

1.  我找到[了 OLinq](https://github.com/wasabii/OLinq)。它得到维护并且非常实用。缺少一些 Linq 操作，但它在设计上相当可扩展。
2.  我还没有看到任何提及这种解决方案的好坏。看起来这简直是罕见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-21T12:10:03.593

让我介绍一下我的库[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)。它是可用于将 WPF 控件绑定到类似 LINQ 的查询的生产就绪库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-21T12:28:45.743

您正在寻找的是[反应式扩展](http://reactivex.io/)（[Rx.Net](https://github.com/dotnet/reactive)）。为了使用 WPF MVVM，有一个名为[ReactiveUI](https://reactiveui.net/)的库。

然后，您可以使用[ReactiveList](https://reactiveui.net/docs/handbook/obsolete/collections/reactive-list)而不是`ObservableCollection`在该列表上定义您的 linq 查询。

代码形成他们的文档：

```
DocumentList = new ReactiveList<Document>() {
    ChangeTrackingEnabled = true,
};

DocumentList.ItemChanged
    .Where(x => x.PropertyName == "IsDirty" && x.Sender.IsDirty)
    .Select(x => x.Sender)
    .Subscribe(x => {
        Console.WriteLine("Make sure to save {0}!", x.DocumentName);
    }); 
```

# c# - C# 从用逗号分隔的文本文件读取到二维数组

> ID：15025468
> 
> 赞同：1
> 
> 时间：2013-02-22T13:34:10.837
> 
> 标签：c#, streamreader

我目前有这个：

```
using (StreamReader sr = new StreamReader("answers.txt"))
{
    for (iCountLine = 0; iCountLine < 10; iCountLine++)
    {
         for (iCountAnswer = 0; iCountAnswer < 4; iCountAnswer++)
         {
             sQuestionAnswers[iCountLine, iCountAnswer] = 
         }
    }
} 
```

我的文本文件格式如下（10 行文本，每行 4 项以逗号分隔）：

> ```
> example, example, example, example 
> 123, 123, 123, 123 
> ```

我不确定在 for 循环中的“=”之后需要什么来读取文本文件的内容并将其拆分为 2D 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:37:19.427

> 我不确定在 for 循环中的“=”之后我需要什么

上面还少了一行：

```
var tokens = sr.ReadLine().Split(','); 
```

现在的行`=`看起来像这样：

```
sQuestionAnswers[iCountLine, iCountAnswer] = tokens[iCountAnswer]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:42:04.597

这不使用`StreamReader`，但它简短易懂：

```
 string[] lines = File.ReadAllLines(@"Data.txt");
        string[][] jaggedArray = lines.Select(line => line.Split(',').ToArray()).ToArray(); 
```

`ReadAllLines`根据换行符提取行。`Split`通过调用每一行来提取列值。它返回锯齿状数组，您可以像多维数组一样使用它，锯齿状数组通常比多维数组更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:37:17.617

```
string line;

using (var sr = new StreamReader("answers.txt"))
{
    while ((line = sr.ReadLine()) != null)
    {
        for (int iCountLine = 0; iCountLine < 10; iCountLine++)
        {
            var answers = line.Split(',');
            for (int iCountAnswer = 0; iCountAnswer < 4; iCountAnswer++)
            {
                sQuestionAnswers[iCountLine, iCountAnswer] = answers[iCountAnswer];
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:38:27.410

我建议你改变方法。

使用 StreamReader 类的 ReadLine() 方法检查文件。然后使用 Split(new[]{','}) 拆分读取行，这将为您提供每条记录。最后 sQuestionAnswers[iCountLine, iCountAnswer] 将是：刚刚拆分数组的 [iCountAnswer] 的记录。

# asp.net-mvc - 在 MVC 4 中使用 Entity Framework Power Tools 进行“逆向工程代码优先”后缺少表

> ID：15025469
> 
> 赞同：0
> 
> 时间：2013-02-22T13:34:11.160
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ef-code-first

在运行“首先执行逆向工程代码”后，我的数据库中缺少一个表。**该操作成功完成，如果没有丢失的表，一切都会好起来的。**

我正在使用 VS2012 和 ASP.NET MVC 4 以及 Entity Framework 5.0 和 Power Tools Beta 3。在数据库端，服务器正在运行 SQL Server 2005。

`'webpages_UsersInRoles'`据我所知，缺少的表是默认创建的标准表，因为它包含有关 MVC 中标准成员角色的关系信息。

任何人都可以阐明为什么它没有包含在 dbcontext 创建中，或者我如何将它添加到导入过程中以确保它被包含。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:12:33.030

Is that the only table that's missing? Did it reverse engineer the other standard Membership tables like aspnet_Users?

# c# - ArcGIS Desktop API - 检查渲染是否完成

> ID：15025471
> 
> 赞同：10
> 
> 时间：2013-02-22T13:34:18.797
> 
> 标签：c#, arcgis

我最近继承了一个 C# 中的大型项目，它使用 ArcGIS 来渲染一些区域平面图。目前使用它的人一直在抱怨该工具的性能极差，我现在的任务是让它更快。

当我第一次看代码时，我很害怕。每次调用 gis api 后，它充满了 30-60 秒的睡眠`System.Threading.Sleep(30000);`，导致简单的操作需要几分钟。

经过一些测试后，很明显移除它们会导致草图不完整或充满伪影，这仅仅是因为在执行下一个动作之前场景尚未完全渲染。

我的问题很简单。有没有办法获得渲染的 ArcGIS 的当前状态，所以我可以停止该工具，而不是等待“默认”30 秒，直到 ArcGis 将当前视图标记为准备好？

谢谢

**编辑：示例代码**

```
doc.ActiveView = (IActiveView)doc.PageLayout;
doc.ActiveView.ContentsChanged();
System.Threading.Thread.Sleep(5000);
doc.PageLayout.ZoomToWhole();    
System.Threading.Thread.Sleep(30000); 
```

我可以提供更多代码片段，但我认为这个问题更通用，与我的代码没有直接关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:17:57.363

我快速浏览了文档，发现以下内容：

1.  [IPageLayoutControlEvents](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/d/0016000002q5000000.htm)
2.  [IActiveView 事件](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/IActiveViewEvents_Interface/00120000019m000000/)

看起来它们很有用，尤其是“AfterDraw”事件。我想您可以收听相关事件以根据需要启用/禁用您的工具。

# python - 将一些 python 脚本打包为 Linux 的可执行文件

> ID：15025474
> 
> 赞同：1
> 
> 时间：2013-02-22T13:34:30.030
> 
> 标签：python, py2exe

我有一个包含 python 库和资源的目录（例如，与`subprocess`具有不同参数的模块分叉的 unix 可执行脚本） - 总共 10-12 个文件 .py + 可执行文件。其中之一是包括其余部分，并且是他们作为整体制作的命令行工具的接口（它当前开始`#!/usr/bin/env python`并直接执行）。

是否可以使它们在用于更容易运输的机器上编译成单个可执行文件（我将创建一个处理它的make文件）？

我找到了 py2exe，但那是针对 Windows 可执行文件的。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:14:19.423

您可以尝试使用 pyinstaller（适用于 linux、windows 和 mac）：http: [//www.pyinstaller.org](http://www.pyinstaller.org)

下载当前版本（2.0）并解压缩后，您可以通过这种方式编译一组 *.py 文件，考虑到您位于 pyinstaller 的路径中：

```
>>> python pyinstaller.py [opts] path_to_yourprogram.py 
```

如果你想要一个文件，你可以使用：

```
>>> python pyinstaller.py --onefile path_to_yourprogram.py 
```

在“path_to_yourprogram.py”中，您必须输入包含其他内容的 python 程序的路径。

而已！pyinstaller 会将您的 *.py 文件编译为单个可执行文件（但由于您有一些额外的资源，例如其他可执行文件，我认为您还必须将这些额外的资源与 pyinstaller 生成的主要可执行文件一起分发）。

# sql - 获取另一个表的一部分中不存在的行

> ID：15025481
> 
> 赞同：1
> 
> 时间：2013-02-22T13:35:01.083
> 
> 标签：sql, sql-server-2005

我在 table1 中有如下所示的数据：

```
 DateMonthID    SubscriberID    othercolumns...
     201201           106
     201201           207
     201202           309
     201203           405
     201203           297 
```

等等等等

和 table2 像这样：

```
 DateMonthID    SubscriberID    Level
       ...           ...          1
       ...           ...          2
       ...           ...          1
       ...           ...          3
       ...           ...          2 
```

等等等等

我需要做的是检查第一个表中的哪些订阅者在另一个表中未来 3 个月的范围内不存在。那有意义吗？

示例：取上表中的subscriberID 106 为日期201201（1 月）。如果 201201-201204（1-4 月）没有出现在另一个表中，我需要累积计数。

这是我到目前为止所拥有的，但它似乎返回了太多的值：

```
SELECT
    COUNT(1) AS Total,
    table1.month_key,
    table2.level
FROM
    dbo.table1
INNER JOIN
    dbo.table2 ON (table2.subscriber_id = table1.subscriber_id)
WHERE
    NOT EXISTS (SELECT * FROM table2
                WHERE
                (table2.month_key >= table1.month_key AND table2.month_key <= (table1.month_key + 3))
                AND table2.subscriber_id = table1.subscriber_id)
GROUP BY
table1.month_key, table2.level
ORDER BY
table2.level, table1.month_key 
```

任何帮助将非常感激

-------------- 编辑 -------------- 只是为了让事情更清楚，因为我不确定我是否解释得很好。情况是，table1 中是停止订阅的行以及他们停止订阅的日期。问题是这可能不是真的，也许他们只是更改订阅或一个月后重新订阅。表 2 是一个包含每个月订阅者的表。我需要通过检查他们是否出现在表 2 中表示他们取消订阅的日期和接下来的 3 个月之间，找出谁真正取消了订阅。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:06:56.293

我认为问题在于你不能在月份键中添加“3”来获得你想要的东西。试试这个：

```
FROM (select table1.*,
             (cast(left(month_key, 4) as int)*12+
                                cast(right(month_key, 2) as int)
                               ) as newMonthKey
      from dbo.table1
     ) table1
. . .

where not exists (select 1
                  from (select table2.*,
                               (cast(left(month_key, 4) as int)*12+
                                cast(right(month_key, 2) as int)
                               ) as newMonthKey
                        from table2
                       ) t
                  where (t.newmonthkey >= table1.newmonthkey AND t.newmonthkey <= (table1.newmonthkey + 3))
                        AND t2.subscriber_id = table1.subscriber_id
                       ) 
```

这会将月份键更改为自第 0 年以来的月份计数器。

# php - PHP mysqli - 从准备好的语句返回关联数组

> ID：15025487
> 
> 赞同：12
> 
> 时间：2013-02-22T01:05:11.100
> 
> 标签：php, arrays, mysqli

我正在尝试使用 mysqli 来准备一个语句，以便安全地将变量值传递给查询。所有这些都对我有用，但我遇到的问题是将结果放入关联数组中。到目前为止，这是我的结构：

```
$query = $c->stmt_init();
$query->prepare("SELECT e._id,e.description,e.eventDate,e.eventTime,e.address,e.locationDescription,i.guestId,r.guestId IS NOT NULL AS 'RSVP-ed'  FROM eventList AS e  JOIN inviteList AS i ON e._id = i.eventId LEFT JOIN rsvpList AS r ON r.eventId = e._id AND i.guestId = r.guestId JOIN guestList AS g ON g._id = i.guestId WHERE g.groupName = ?");
$query->bind_param('s',$groupName);
if ($result = $query->execute()){
    $a  = $result->fetch_array(MYSQLI_ASSOC); // this doesn't work :/
} else{
    error_log ("Didn't work");
} 
```

如您所见，我有很多列被传回，所以我不想将它们每一个绑定到一个变量。

最重要的是，最终目标是将一个 json 编码的关联数组传回我的应用程序的其余部分。

我在 php 文档和堆栈交换中查找了该问题，并找到了建议，但我似乎无法让它们工作。有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T02:57:28.457

如果你有 MySql Native Driver 扩展（[mysqlnd](http://php.net/manual/en/book.mysqlnd.php)），你可以使用[get_result](http://php.net/manual/en/mysqli-stmt.get-result.php)方法获取一个 ResultSet，然后用通常的方式从中获取：

```
$query = $c->prepare("SELECT e._id,e.description,e.eventDate,e.eventTime,e.address,e.locationDescription,i.guestId,r.guestId IS NOT NULL AS 'RSVP-ed'  FROM eventList AS e  JOIN inviteList AS i ON e._id = i.eventId LEFT JOIN rsvpList AS r ON r.eventId = e._id AND i.guestId = r.guestId JOIN guestList AS g ON g._id = i.guestId WHERE g.groupName = ?");
$query->bind_param('s',$groupName);
$query->execute();
$result = $query->get_result();
$a  = $result->fetch_array(MYSQLI_ASSOC); // this does work :) 
```

# .net - 如何使用我的 CAC 上的证书对用 Visual Studio 2008 编写的程序集进行签名？

> ID：15025489
> 
> 赞同：2
> 
> 时间：2013-02-22T13:35:38.730
> 
> 标签：.net, sign, cac

我想使用位于我的通用访问卡 (CAC) 上的证书签署 .NET 程序集。我发现的大多数说明都涉及从证书 (.cer) 文件创建个人信息交换 (.pfx) 文件。但是，在创建 pfx 文件的过程中，我被要求提供我没有的私钥。我只有一个 PIN，允许我使用我的 CAC 登录并验证网络资源，这不允许我使用 pfx 证书进行签名。

我创建了强名称密钥文件并使用强名称密钥文件对程序集进行签名。对于我现在编码的内容，我必须使用我的 CAC 上的证书。

我正在寻找允许我使用我的 CAC 上的证书来签署我正在构建的程序集的过程。

# c++ - 犰狳 C++ 比较

> ID：15025494
> 
> 赞同：2
> 
> 时间：2013-02-22T13:36:00.743
> 
> 标签：c++, armadillo

```
 arma::vec::fixed<3> a({1.0, 2.0, 3.0});
  double b = arma::norm(a, 2);
  double c = arma::norm(a, 2);

  // show 0, why?
  std::cerr << (arma::norm(a, 2) == arma::norm(a, 2)) << std::endl;
  // show 1, ok
  std::cerr << (b == c) << std::endl; 
```

我很困惑。为什么会这样？

# matlab - 多次绘制同一图表的不同版本

> ID：15025496
> 
> 赞同：2
> 
> 时间：2013-02-22T13:36:03.597
> 
> 标签：matlab, plot, matlab-figure

我想修改函数的参数，然后将其绘制在一个循环中，但我遇到了问题。问题是我需要每个情节的标签和不同的颜色

就像是：

```
hold on

for n = N

for t = Time_inv

    error = func(n, t);
    error_array_2(i) = error;
    i = i + 1;

end
    plot (Time_inv, error_array_2);
    i = 1;
end 
```

我是 Matlab 新手，但对其他语言有经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:43:26.717

对于一个情节上的多条线，请使用`hold all`并且可能是[legend](http://www.mathworks.com/help/matlab/ref/legend.html)。

```
figure
hold all
plot(rand(1,10))
plot(rand(1,10))
plot(rand(1,10))
legend('label 1', 'label 2', 'label 3') 
```

对于一个图中的多个图，请使用[subplot](http://www.mathworks.com/help/matlab/ref/subplot.html)。

```
figure
subplot(1,2,1)
plot(rand(1,10))
subplot(1,2,2)
plot(rand(1,10)) 
```

对于不同图中的图，请使用[figure](http://www.mathworks.com/help/matlab/ref/figure.html)。

```
figure
plot(rand(1,10))
figure
plot(rand(1,10)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:12:39.597

要为每个图形设置不同的颜色和标签，您可以创建一个颜色图和一个标签元胞数组：

```
h = zeros(1, length(N))
name = cell(1, length(N))

cm = hsv(length(N));
for n = N
    name{n} = ['condition ' num2str(n)];
    i = 1
    for t = Time_inv
        error = func(n, t);
        error_array_2(i) = error;
        i = i + 1;
    end
    h(n) = plot (Time_inv, error_array_2, 'color', cm(n,:));
    hold on    
end

legend(h, name); 
```

既然您指出您是 matlab 新手，我只想提一下您可能不需要迭代器`i`，因为函数通常适用于矩阵。因此，您的脚本可以缩短（摘录）：

```
for n = N
    ...
    error_array_2 = func(n, Time_inv);
    ... 
end 
```

# c++ - 为在 Qt 中开发的应用程序的会话维护日志文件

> ID：15025500
> 
> 赞同：1
> 
> 时间：2013-02-22T13:36:18.620
> 
> 标签：c++, qt

我正在 Qt 中开发一个应用程序，它现在已接近完成。到目前为止，我一直非常依赖在*Debugging*`QDebug()`时打印错误。但现在我想维护一个**日志文件**，其中将包含用户交互的所有细节以及我想在各种状态下监控的所有变量的值。这是为了假设我的用户遇到崩溃，然后我会要求他将日志文件提交给我，以便我了解问题。目前我可以想到一种机制，通过它我可以在我的所有类中维护对日志文件的引用（有很多！）&只需附加***`QString`到底。但我认为这可能不是线程安全的，而且维护文件会很乏味。我想知道 Qt 中是否已经有任何内置功能，我可以通过它给它我的字符串并且它会自动维护一个文件？谢谢你。***

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:51:04.200

QDebug 本身可以写入日志文件。

> 每当开发人员需要将调试或跟踪信息写入设备、文件、字符串或控制台时，都会使用 QDebug。

[在启动时，使用qInstallMsgHandler()](http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler)设置 qt 消息处理程序。

在消息处理程序中，要写入文件，您可以使用使用下面的构造函数创建的 QDebug 对象。传递给它一个 QFile。

> QDebug::QDebug (QIODevice * 设备)***

# c# - 在非焦点 RichTextBox 中显示输入光标

> ID：15025501
> 
> 赞同：1
> 
> 时间：2013-02-22T13:36:23.093
> 
> 标签：c#, winforms, cursor, richtextbox

我可以在非焦点 RichTextBox 中显示输入光标吗？

在我的项目中，我有一个 RichTextBox 和一个 ListView 控件。重点应该放在 ListView 控件上。我可以处理 ListView 的 KeyPress 和 KeyDown 事件并重定向到 RichTextBox 以启用打字。但是如何在 RichTextBox 上显示光标。

无法调用 RichTextBox.focus()。焦点必须在 ListViewControl 中（如 combobox ）。任何想法....？

# java - 更改密码按钮 - 如何覆盖当前用户密码？

> ID：15025502
> 
> 赞同：0
> 
> 时间：2013-02-22T13:36:25.063
> 
> 标签：java, netbeans, passwords, overwrite

我正在编写更改密码按钮，我在覆盖保存在文本文件中的密码时遇到问题。

所以想象有一个用户名和密码分别保存在一个文本文件中：

```
John01

1871993

$$$

Jessica

123456

$$$

(...) 
```

如何覆盖例如用户：John01 当前密码“1871993”点击更改密码按钮后输入的新密码？

我现在所拥有的就是用新密码保存相同的用户名。

这是我的更改密码按钮的代码：

```
if (ChangePassword())
{
    if (EnterCurrentPasswordTextField.getText().trim().length() != 0 
        && NewPasswordTextField.getText().trim().length() != 0
        && ConfirmNewPasswordTextField.getText().trim().length() != 0)
    {

        if (NewPasswordTextField.getText().equals(ConfirmNewPasswordTextField.getText()))
        {

                FileWriter out = null;
            try{
                out = new FileWriter("login.txt", true);

                out.append(System.getProperty("line.separator"));          
                out.append(NameTextField.getText());
                out.append(System.getProperty("line.separator"));
                out.append(ConfirmNewPasswordTextField.getText());
                out.append(System.getProperty("line.separator"));
                out.append(System.getProperty("line.separator"));
                out.append("$$$");
                out.append(System.getProperty("line.separator"));
                out.close();
                out=null;
                }catch(IOException ioe){
                    NameTextField.setText("IOProblem");
                    }

                StatusMessageLabel.setText(NameTextField.getText() + " you have succesfully changed your password");
                MainTabbedPane.setEnabledAt(0, false);  
                MainTabbedPane.setEnabledAt(1, true);
                MainTabbedPane.setEnabledAt(2, true);
                MainTabbedPane.setEnabledAt(3, true);        
                MainTabbedPane.setEnabledAt(4, true);
                MainTabbedPane.setEnabledAt(5, false);
                MainTabbedPane.setSelectedIndex(2);

        }
        else {
            StatusMessageLabel.setText("ERROR: Please confirm your New Password is identical in both fields!");
        }
    }
    else {
        StatusMessageLabel.setText("ERROR: Please enter all empty fields!");
    }    
}    
else {
    StatusMessageLabel.setText("ERROR: Wrong Current Password Details!!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:43:26.363

将您当前的密码/用户名文件加载到 Map 中找到您的条目并写出您的 Map 条目，也许更好的解决方案是使用某种内存数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:47:33.217

使用[`MappedByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html).

# java - PhoneGap (2.4) 插件错误：“找不到类”

> ID：15025508
> 
> 赞同：1
> 
> 时间：2013-02-22T13:36:50.387
> 
> 标签：java, android, cordova

我试图将一个简单的 Java 类转换为一个 PhoneGap 插件，但我无法加载它，我现在没有想法。

这是课程： [https ://gist.github.com/kowdermeister/5013353](https://gist.github.com/kowdermeister/5013353)

我已将以下内容添加到 /res/xml/config/xml/config.xml

```
<plugin name="MediaPlayerStateWrapper" value="org.apache.cordova.plugins.MediaPlayerStateWrapper"/> 
```

这是尝试加载 MP3 的 JS

```
cordova.exec( function () {
    // Success
    cordova.exec(function(){ alert('playing') }, function () {
        // Failed to start
    },'MediaPlayerStateWrapper', 'play');
}, function (e) {
    alert(e)
}, 'MediaPlayerStateWrapper','setDataSource', ['http://...']); 
```

我的环境是：

日食（ADT）

目标：Android 4.2

PhoneGap SDK：cordova-2.4.0rc1.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:14:03.367

天啊...

我发现了问题。我试图手动将我的插件加载到主要的android onCreate 方法中，Eclipse 警告我我无法访问我的类的方法，因为它的构造不是公共的。它根本没有设置，因此在将其更改为 public 后可以加载它。

它仍然没有播放声音，但现在情况不同了 :)

# ruby-on-rails-3 - 用简单的形式和黄瓜解决 (Capybara::ElementNotFound)

> ID：15025509
> 
> 赞同：0
> 
> 时间：2013-02-22T13:36:51.330
> 
> 标签：ruby-on-rails-3, cucumber, capybara, simple-form, webrat

我正在使用 cucumber 进行测试，我正在使用 simple_form 作为联系表。我收到以下错误：

```
Given I am on the login page 
And I fill in "student_name" with "sadik" 
    Unable to find field "student_name" (Capybara::ElementNotFound) 
```

我的步骤：

```
Scenario: Add a student to the database
  Given I am on the login page
  And I fill in "student_name" with "sadik"
  When I press "OK"
  ... 
```

表格：

```
<%= simple_form_for @student do |f| %>
  <%= f.input :name, label: 'student_name' %>,
    :input_html => { :field => 'student_name' } %>
  <%= f.button :submit %>
<% end %> 
```

我还尝试了 id 和 name 而不是标签。但它没有任何效果。

但第一步是正确的：

```
When /^I go to (.+)$/ do |page_name|
  visit path_to(page_name)
end

When /^I fill in "([^\"]*)" with "([^\"]*)"$/ do |field, value|
  fill_in(field.gsub(' ', '_'), :with => value)
end 
```

那么问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:39:47.360

您的语法和标签似乎不正确。

对于表单尝试：

```
<%= simple_form_for @student do |f| %>
   <%= f.input :name, as: :text, label: 'Student Name' %>
   <%= f.button :submit %>
<% end %> 
```

最后一步尝试：

```
When /^I fill in student_name with "([^\"]*)"$/ do |value|
  fill_in "Student Name", :with => value
end 
```

编辑：您可能还需要更改此行并删除引号：

```
And I fill in student_name with "sadik" 
```

# asp.net-mvc - VB.NET 中的一次性匿名类？

> ID：15025513
> 
> 赞同：1
> 
> 时间：2013-02-22T13:37:05.750
> 
> 标签：asp.net-mvc, vb.net, anonymous-class

我有一个关于与 MVC 相关的类的问题，因为我似乎正在创建大量的一次性模型。

我有一个 MVC 控制器，其函数采用模型并返回 ActionResult。这个模型不会在其他任何地方使用，所以为它生成一个特定的类感觉有点矫枉过正。

我的问题是：有没有办法指定您希望模型匹配匿名类型？

这个人为的伪代码（不起作用）说明了我的意思：

```
Function ViewChanges(model As {.Comments as String, .ID as Integer}) As ActionResult
    'Do Some work...
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:10:50.250

不，你不能那样做。

但是，您仍然可以定义一个结构：

```
Private Structure Model
    Dim Comments As String
    Dim ID As Int32
End Structure

Function ViewChanges(model As Model) As ActionResult
    'Do Some work...
End Function 
```

请注意，您可以在类中定义它。您不需要创建外部类文件。

这也适用于类。您**可以**在类中定义一个类。但是在这种特定情况下，您可以使用应该比类更轻的结构。

# dynamics-crm-2011 - 删除 CRM 2011 中的查找值

> ID：15025518
> 
> 赞同：3
> 
> 时间：2013-02-22T13:37:28.347
> 
> 标签：dynamics-crm-2011

我有一个名为 NDS 的实体，它负责查询帐户。现在，在 UI 中，我可以单击查找图标并单击另一个帐户记录（更新）或单击删除按钮以删除该值。

如何通过删除代码执行相同的功能。我正在写一个插件。

```
//Code to update
NDS["accountid"] = new EntityReference("Account", neworganizationid);
xrmService.Update(NDS)

//Code to remove
//?? 
```

更新的代码工作正常。它是在失败的地方删除的代码。我认为更新的代码可以正常工作，即使使用 Remove 也不会出现任何问题，但我有一条错误消息

ID = 00000000-0000-0000-0000-000000000000 的帐户不存在

有什么想法吗？

PS：我是 MS CRM 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:11:52.527

只要不是 N:N 关系，你只需要这样做：

```
NDS["accountid"] = null;
xrmService.Update(NDS); 
```

从您的错误消息中，我猜您正在这样做：

```
NDS["accountid"] = new EntityReference();
xrmService.Update(NDS); 
```

这是行不通的。

提醒一下，如果是 N:N 关系，您需要使用[Disassociate Request](http://mscrm-developer.blogspot.com/2008/09/delete-disassociate-many-to-many.html)

# c# - 当第一行是字符串时，GetValue() 不读取十进制值

> ID：15025519
> 
> 赞同：3
> 
> 时间：2013-02-22T13:37:32.300
> 
> 标签：c#, sql-server, excel, c#-3.0, oledb

'正在使用 Microsoft.ACE.OLEDB.12.0 提供程序从 Excel 表中读取数据。我正在使用`OleDbDataReader`和他`GetValue()`的来获取数据。第一行/行（可以多于一个）是字符串标题，我不能跳过它。接下来是设置为 0 小数位的数字数据，但是当我选择其中一个时，它会以正确的十进制格式显示在栏中。

如何以完整的原始十进制格式读取这些混合数据，如 Excel 中的栏？我无法更改 Excel 工作表的设置。

![在此处输入图像描述](../Images/da2138ae4ce202e827208a298f598ac1.png)

这是我的代码：

```
using System.Data.OleDb;

    namespace ConsoleApplication2
    {
        class Program
        {
            static void Main(string[] args)
            {
                string query = "SELECT * FROM [List1$]";
                string connString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\Temp\Test.xls;Extended Properties=""Excel 12.0;HDR=NO;IMEX=1""";
                using (OleDbConnection connection = new OleDbConnection(connString))
                {
                    connection.Open();
                    using (OleDbCommand command = new OleDbCommand(query, connection))
                    {
                        using (OleDbDataReader reader = command.ExecuteReader())
                        {
                            while (reader.Read())
                            {
                                object value = reader.GetValue(0);
                            }
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:02:12.887

尝试`HDR=YES`在您的连接字符串中使用并停止跳过第一行：

```
string connString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\Temp\Test.xls;Extended Properties=""Excel 12.0;HDR=YES;IMEX=1"""; 
```

**[更新]**

我建议您使用的解决方法是读取两次文件（使用相同的方法）：

1.  首先，你得到了标题行，可能你稍后会需要它作为数据结构
2.  在第二次阅读时，您跳过标题并阅读行。

它应该是这样的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data.OleDb;
using System.Data;
using System.IO;

class Program
{
    static void Main(string[] args)
    {
        // the Excel file
        string file = @"c:\Temp\Test.xls";

        if (!File.Exists(file))
        {
            Console.WriteLine("File not found.");
            return;
        }

        // DataTable bonus! :)
        System.Data.DataTable dt = new System.Data.DataTable();

        IEnumerable<List<object>> header = new List<List<object>>();
        IEnumerable<List<object>> rows = new List<List<object>>();

        // read the header first
        header = GetData(file, true);

        // read the rows
        rows = GetData(file, false);

        // add the columns
        foreach (var column in header.First())
        {
            dt.Columns.Add(column.ToString());
        }

        // add the rows
        foreach (var row in rows)
        {
            dt.Rows.Add(row.ToArray());
        }

        // now you may use the dt DataTable for your purpose
    }

    /// <summary>
    /// Read from the Excel file
    /// </summary>
    /// <param name="file">The path to the Excel file</param>
    /// <param name="readHeader">True if you want to read the header, 
    /// False if you want to read the rows</param>
    /// <returns></returns>
    private static IEnumerable<List<object>> GetData(string file, bool readHeader)
    {
        string query = "SELECT * FROM [List1$]";
        string connString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
            @"Data Source=" + file + @";Extended Properties=""Excel 12.0 Xml;HDR=NO;IMEX="
            + ((readHeader) ? "1" : "0") + @";""";
        using (OleDbConnection connection = new OleDbConnection(connString))
        {
            connection.Open();
            using (OleDbCommand command = new OleDbCommand(query, connection))
            {
                using (OleDbDataReader reader = command.ExecuteReader())
                {
                    bool isHeaderRead = false;
                    while (reader.Read())
                    {
                        if (readHeader && isHeaderRead)
                        { break; }
                        isHeaderRead = true;
                        List<object> values = new List<object>();
                        for (int i = 0; i < reader.FieldCount; i++)
                        {
                            values.Add(reader.GetValue(i));
                        }
                        yield return values;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:45:32.280

根据经验，您可能会做的最好的事情就是以下。我一直对excel文件有问题，读取数据。这就是为什么我鄙视excel作为数据传输机制的原因。

我在一家通过 excel 获取所有“银行数据”的公司工作。我很高兴被证明是错误的。

笔记。GetValue(0) 运行后，请对其进行监视。它可能会告诉你它是一个字符串。但是你可以确定它认为它是什么，然后稍微调整你的“获取”方法。就像，如果值是“字符串”，您可以将 GetValue(0) 更改为 GetString(0)。

```
while (reader.Read())
{
    Decimal tryParseResultDec;
    object value = reader.GetValue(0);
    if !(Decimal.TryParse(value, out tryParseResultDec))
    {
        throw new ArgumentException(string.Format("Unable to parse '{0}'.", value));   
    }

} 
```

额外的建议。

我通常在类的顶部放置一些私有常量，而不是“0”、“1”、“2”等，以告诉我这些列是什么。

```
private const int EXCEL_COLUMN_TOTAL_AMOUNT = 0; 
```

（你可以做类似的事情，你只是保持简单的例子）

额外提示：

我认为它的工作方式是 excel 将查看**第一行数据**，查看数据类型，并将其用于同一列中的其余行。我不认为它说“检查每一行的数据类型”。因此你的难题。

如果您说没有标题行，它将在 A1 中查找 A 中所有行的数据类型。如果您说有标题行，它将在 A2 中查找 A 中所有行的数据类型。

# java - 我如何在 TextEditor 中显示 Jdom 的当前状态（即内容）

> ID：15025535
> 
> 赞同：0
> 
> 时间：2013-02-22T13:38:31.160
> 
> 标签：java, xml, eclipse-plugin, xml-parsing, jdom

我正在实现基于表单的编辑器，它有 1 个选项卡作为表单页面。这个编辑器扩展了“FormEditor”，标签扩展了“FormPage”类。我正在使用 Jdom 进行 xml 解析。此编辑器用于修改 xml 文件。

假设，我使用这个编辑器打开了一个名为“Test.xml”的文件。然后 getEditorInput() 函数将返回 IEditorInput 即这个 xml 文件的内容。

现在，我以以下方式在基于表单的编辑器中添加了一个新的第二个选项卡作为 TextEditor：

```
int index = addPage(srcObj, getEditorInput());

setPageText(index, "Source"); 
```

但这里的问题是，目前它显示通过此表单编辑器打开的文件的内容。

但是，我希望如果用户在编辑器中进行任何更改（Jdom 模型也会更新）并切换到第 4 个选项卡，那么应该向他/她显示 jdom 的当前内容。

意味着用户应该能够通过此选项卡以 xml 格式查看 Jdom 的当前内容。

任何人都可以帮助我“我如何以 xml 格式在 TextEditor 中显示 Jdom 的当前状态（即内容）。” 提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:50:03.450

基于一些挖掘（我对 Eclipse TextEditor API 不是很熟悉），您想要定位 TextEditor 的底层 IDocument 模型，并调用：

```
org.jdom2.output.XMLOutputter xout = new org.jdom2.output.XMLOutputter();
idocument.set(xout.outputString(jdomdocument); 
```

罗尔夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:58:55.113

我从链接中找到了答案：[http ://wiki.eclipse.org/Eclipse_Plug-in_Development_FAQ#How_can_I_get_the_IDocument_from_an_editor.3F](http://wiki.eclipse.org/Eclipse_Plug-in_Development_FAQ#How_can_I_get_the_IDocument_from_an_editor.3F)

或者

```
XMLOutputter xmlOutput = new XMLOutputter(Format.getPrettyFormat());
String contents = xmlOutput.outputString(document); 
IDocumentProvider provider = srcObj.getDocumentProvider();
IDocument idocument = provider.getDocument(srcObj.getEditorInput());
idocument.set(contents); 
```

谢谢罗尔夫.. :)

# python - Python 3 索引超出范围错误

> ID：15025537
> 
> 赞同：1
> 
> 时间：2013-02-22T13:38:36.887
> 
> 标签：python, postgresql, python-3.x

我在 postgresql 服务器中执行以下代码。

```
from datetime import datetime

now = str(datetime.now(None))
procurementinsertqueries=[]
priceupdatequeries = []
inventoryupdatequeries=[]
ptrcode = -1
debugcode=""

try:
    unpbatches=[]
    query = "select distinct(fk_procurementbatch_code) from newprocurementlist"
    proclistresult = plpy.execute(query)

    for rec in proclistresult:
        unpbatches.append(rec["fk_procurementbatch_code"])

    for batchcode in unpbatches:
        ptrcode=-1
        query = "select procurementtransaction_code from procurement where fk_procurementbatch_code="+str(batchcode)+" order by procurementtransaction_code desc limit 1"
        ptrcoderesult = plpy.execute(query)

        if len(ptrcoderesult)==0:
            ptrcode=0
        else:
            ptrcode=ptrcoderesult[0]["procurementtransaction_code"]

        query = "select * from newprocurementlist where fk_procurementbatch_code="+str(batchcode)
        newproclistresult = plpy.execute(query)

        for r in newproclistresult: 
            ptrcode+=1
            _bcode = str(r["fk_procurementbatch_code"])
            _pref = str(r["fk_product_ref"])
            _up = str(r["unitsprocured"])
            _tp = str(r["totalprice"])
            _cp = str(r["costprice"])
            _sp = str(r["sellingprice"])
            _mrp = str(r["mrp"])
            _trcode = str(ptrcode)
            procurementinsertqueries.append("insert into procurement values("+_bcode+","+_pref+","+_up+","+_tp+","+_cp+","+_sp+","+_mrp+","+_trcode+")")
            priceupdatequeries.append("insert into productpriceupdatelist values("+_pref+")")
            _aunits = 0.0
            _newunits = 0.0
            query="select unitsavailable from inventory where fk_product_ref="+_pref
            au = -1
            au = plpy.execute(query)
            _aunits=float(au[0]["unitsavailable"])
            _newunits = _aunits+float(r["unitsprocured"])
            inventoryupdatequeries.append("update inventory set unitsavailable="+str(_newunits)+" where fk_product_ref="+_pref)
            debugcode+="--Completed--"
        debugcode+="---Loop completed---"   

except Exception as e:
    plpy.execute("insert into log values(\'"+now+"\')")
    raise plpy.error("Error generating insert queries-->"+str(e)+"Debug is "+debugcode)

try:
    with plpy.subtransaction():
        for qry in procurementinsertqueries:
            plpy.execute(qry)
        for qry in priceupdatequeries:
            plpy.execute(qry)   
        for qry in inventoryupdatequeries:
            plpy.execute(qry)
except Exception as e:
    plpy.execute("insert into log values(\'"+now+": Error executing insert queries\')")
    raise plpy.error("Error executing procurement updates. There could be loss of data.Please review database error log. -->"+str(e))

try:
    plpy.execute("delete from newprocurementlist")
except Exception as e:
    plpy.execute("insert into log values(\'"+now+": Error deleting new procurement list table after successful updates\')")
    raise plpy.error("Error deleting completed procurement list. There could be duplication of data. Review error log file-->"+str(e))

try:
    plpy.execute("select product_price_update_process()")
except Exception as e:
    raise plpy.error("Error updating prices. "+str(e)) 
```

问题是我收到“索引超出范围”错误。附件是我得到的错误。

```
ERROR:  plpy.Error: Error generating insert queries-->list index out of rangeDebug is --Completed--
CONTEXT:  Traceback (most recent call last):
  PL/Python function "procurementlist_process", line 61, in <module>
    raise plpy.error("Error generating insert queries-->"+str(e)+"Debug is "+debugcode)
PL/Python function "procurementlist_process" 
```

当我使用 for 循环时，我无法理解索引是如何超出范围的。

请帮忙 ！！

编辑：注意我表中的测试数据，unpbatches 中的项目数只有 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:52:40.007

也许`au`这里是一个空列表：

```
 au = plpy.execute(query)
    _aunits=float(au[0]["unitsavailable"]) 
```

是`au`查询的结果集吗？也许查询没有返回任何行。

* * *

更一般地说，您应该在评论中按照 jknupp 的建议进行更改

```
raise plpy.error("Error generating insert queries-->"+str(e)+"Debug is "+debugcode) 
```

只是

```
raise 
```

查看原始回溯和发生错误的确切行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:06:31.530

如果它的长度为 0，则设置`ptrcode`为 1，然后在进入循环时立即更新它。也许您打算将其设置为`0`？

# javascript - Javascript/Jquery 在窗口中查找最上面的段落

> ID：15025538
> 
> 赞同：0
> 
> 时间：2013-02-22T13:38:40.940
> 
> 标签：javascript, jquery, html, css

有人能告诉我一种在 HTML 文档的**浏览器窗口中找到第一段可见的方法吗？**意味着我希望第一段不在文档内（可能大于窗口区域），而是在浏览器窗口（可见屏幕）内。

* ***PS 除了获取文档中的所有 'p' 元素并遍历以找到第一个可见的元素****

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:56:43.713

有一个 jQuery 插件，你可以试试：[www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:42:31.137

我认为这就是你想要的：

```
$("p:visible:first") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:28:27.303

你可以想出某种机制来根据它们的偏移量标记你的 p 标签。因此，当页面加载时，您必须遍历您的 p 标签（或更好的部分）并根据它们的偏移位置标记它们。然后将用户的当前滚动位置与最接近的偏移量 p 进行比较将是一件简单的事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:49:58.050

这应该有效：

```
$(document).ready(function(){
    var paragraphs = $('p');
    var scrollTop = $(window).scrollTop();
    var scrollBtm = scrollTop + $(window).height();
    paragraphs.each(function(e){
        var top = $(this).offset().top;
        if (top > scrollTop && top < scrollBtm){
            alert("Win");
            return false;
        }
    });
}); 
```

*编辑：我意识到这是遍历 p 标签，但至少使用“return false”你不会循环遍历每个标签，只是当前视图上方的每个标签。*

*编辑 2：在 document.ready 上创建一个段落数组*

# ajax - jQuery Mobile AJAX 使用搜索结果加载先前的数据

> ID：15025542
> 
> 赞同：1
> 
> 时间：2013-02-22T13:39:10.927
> 
> 标签：ajax, jquery, jquery-mobile

我目前正在开发一个移动应用程序，并使用 jQuery Mobile。这个应用程序基本上是一个产品搜索引擎。

目前，如果我要搜索产品，我的脚本会处理在搜索字段中提交的内容，并查找任何相关产品。结果来自通过 AJAX 加载的 JSON 文件。这工作没有缺陷。

我遇到的问题是，如果我要搜索“一个”，然后返回搜索字段再次搜索。一旦我搜索别的东西。第一次搜索的结果仍然在结果页面上，还有我的新搜索结果。这显然是个问题。

单击应用程序“返回”按钮后，如何清除 AJAX 数据？这样，如果我搜索“一”，则返回并搜索“二”。我只看到最近搜索的结果。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:51:34.757

当您返回上一页时，您需要查看 listview 内容是否为空，如果不是，则将其清空。

我给你做了一个简单的例子：http: [//jsfiddle.net/Gajotres/bTgth/](http://jsfiddle.net/Gajotres/bTgth/)，假设当你打开这个例子时，它就像你的页面返回动作。

当带有 id 索引的页面打开时，我们将检查列表是否有内容，如果为真则清空它：

```
$(document).on('pagebeforeshow', '#index', function(){       
    if($('#custom-list li').length > 0){
        $('#custom-list').empty();
    }
}); 
```

# c# - 正则表达式匹配特定字符后

> ID：15025545
> 
> 赞同：6
> 
> 时间：2013-02-22T13:39:23.343
> 
> 标签：c#, regex

```
var str = "=IIF(IsNothing(Fields!Metadata1.Value),"N/A",Fields!Metadata1.Value)";
var regexp = new Regex(@"Fields!(\w+)");
var matches = regexp.Matches(str); 
```

比赛将有“Fields！Metadata1”，而我需要得到“Metadata1”

我要改变什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T13:54:06.260

您需要的称为**lookbehind/lookahead**。正则表达式具有[此功能](http://www.regular-expressions.info/lookaround.html)，您可以指定当前匹配字符串之后（或在本例中为之前）的内容。

`[0-9](?=[a-z])`将匹配任何一个数字后跟一个小写字母。
`[0-9](?![a-z])`将匹配任何一个不跟小写字母的数字。（这称为负前瞻）
`(?<=[a-z])[0-9]`将匹配前面有小写字母的任何一位数字。
`(?<![a-z])[0-9]`将匹配任何一个前面没有小写字母的数字。（这称为负向后查找）

考虑到这一点，您想要的 c# 表达式是：

```
var str = "=IIF(IsNothing(Fields!Metadata1.Value),"N/A",Fields!Metadata1.Value)";
var regexp = new Regex(@"(?<=Fields!)(\w+)");
var matches = regexp.Matches(str); 
```

**编辑：如果您****不想匹配**“字段” ，这对您有好处！部分。一个稍微不同的任务是如果你想匹配它，但你*还需要第二部分的 value*。在这种情况下，我建议使用[命名组](http://www.regular-expressions.info/named.html)，这将捕获整个事物，但您可以从 Groups 集合中获取部分。在这种情况下，正则表达式将是: `Fields!(?'fieldName'\w+)`，而 c# 的用法是

```
var str = "=IIF(IsNothing(Fields!Metadata1.Value),"N/A",Fields!Metadata1.Value)";
var regexp = new Regex(@"Fields!(?'fieldName'\w+)");
var matches = regexp.Matches(str);
foreach (Match m in matches) 
{
   var fieldName = m.Groups["fieldName"].Value;
   //...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-22T13:43:28.640

不知道 c# 语法，对于正则表达式，请尝试：

```
(?<=Fields!)\w* 
```

**编辑**添加简短说明：

`(?<=foo)bar``bar`仅在`bar`以下情况下才 匹配`foo`（foo 不会出现在匹配结果中）`(?<=..)`是肯定的向后看，零宽度断言。谷歌它的详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T13:49:22.140

也许你可以试试这个...

var match = Regex.Match(item, @"!(\w+)");

然后得到 match.Groups[1].Value

# javascript - 从一个js文件调用函数到另一个的问题

> ID：15025548
> 
> 赞同：1
> 
> 时间：2013-02-22T13:39:27.117
> 
> 标签：javascript

在文件 data.js 我有：

```
(function () {

   data() 

   function runThisWhenDataIsFinished() {

        console.log("Works!"); 

   }

})(); 
```

在文件 app.js 我有

```
function data() {

    console.log("Im in the data function");

    runThisWhenDataIsFinished();

} 
```

当我调用 data() 时，我收到消息“我在数据函数中”，当我尝试调用 runThisWhenDataIsFinished() 方法时，我得到错误：runThisWhenDataIsFinished() 方法未定义。

那么如何从 app.js 访问 data.js 中的 runThisWhenDataIsFinished 方法呢？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:42:15.767

你不能这样做，因为`runThisWhenDataIsFinished`它是词法范围的（对于它的父函数）。如果您希望能够在该范围之外访问它，则必须使用某种全局名称空间。

请参阅[http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:42:31.730

这些不是在不同的文件中，而是`runThisWhenDataIsFinished()`在匿名函数中。如果你把它移到函数之外，只要在调用`data.js`之前已经加载，`data()`它就会正确运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:57:09.493

几点评论：

*   首先，在调用“data()”函数*后*定义“runThisWhenDataIsFinished” ；所以没有办法定义函数

*   事件如果在定义函数后调用“data()”，它将不起作用，因为如前所述，它只会在匿名函数的范围内定义。

有些东西会起作用，但不要*那样*做：

```
function data() {

  console.log("Im in the data function");

  // The 'globalRunThisWhenDataIsFinished' function is no defined in this scope, 
  // so it will only be called if it exists as a *global* variable
  globalRunThisWhenDataIsFinished();

}

(function () {

   // When calling the anonymous function like you do, 
   // 'this' is the Window object, so you can add "global" variables
   // like this. However you probably DO NOT WANT TO DO THAT
   this.globalRunThisWhenDataIsFinished = function() {

      console.log("Works!"); 

   }

   data();

})(); 
```

正如所指出的，我建议您查看模块模式以了解您真正想要做什么。

# asp.net - 从 MM/DD/YYYY 中选择月份进行插入、删除和更新

> ID：15025549
> 
> 赞同：-2
> 
> 时间：2013-02-22T13:39:35.200
> 
> 标签：asp.net, .net, sql

我有一个文本框和一个按钮，我有一个包含 EmpID 和日期的数据库。所以我想根据日期而不是确切的日期删除一个 EmpId。

假设 DB 中的 EmpId=2 和 Date=02/20/2012。即使我输入 02/25/2012 或 02/01/2012 也应该能够删除它，因此如果月份和年份匹配，则应将其删除。我在文本框中输入日期。

```
con.Open();
try
{
    SqlCommand Delete = new SqlCommand("delete from Table2 where Date= ('" + TextBox1.Text + "')", con);
    Delete.ExecuteNonQuery();
}
catch (Exception ex)
{
    Console.writeLine("Error");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:18:53.310

我建议您将前端从一个文本框更改为两个控件。第一个将是文本框或下拉列表，用于提交年份。第二个是选择月份的下拉菜单。这将使您的用户更清楚地了解他们在做什么。它还消除了无效日期的问题，例如 2013-02-30。

在后端，如果你有一年零一个月，你应该可以从那里拿走它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:43:05.033

您必须在 where 子句中使用以下代码

```
DATE_FORMAT(Date, '%m/%Y') = compare only month and year here in mm/yyyy format. 
```

希望这对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:47:44.720

一种方法是使用 SQL MONTH 和 YEAR 函数。

例如

```
SqlCommand Delete = new SqlCommand("delete from Table2 where MONTH(Date) = MONTH('" + TextBox1.Text + "') AND YEAR(Date) = YEAR('" + TextBox1.Text + "'), con); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T14:30:15.183

首先，您需要将文本框转换为日期时间，如下所示

```
DateTime dateValue =  DateTime.ParseExact(textBox1.Text, "M/d/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

从变量 dataValue 你可以得到 month 和 year 。现在使用下面的查询

```
SqlCommand Delete = new SqlCommand("delete from Table2 where  datepart(mm,Date) = '" + dateValue.Month + "' And datepart(year,Date) = '" + dateValue.Year + "'", con); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T14:44:32.830

使用`DateTimePiker`control 而不是`Textbox`，使用以下代码：

```
SqlCommand Delete = new SqlCommand("delete from Table2 where Date= ('" + datetimepicker.value + "')", con);

Delete.ExecuteNonQuery(); 
```

# javascript - 我可以通过拖动另一个元素来控制 js 谷歌地图的平移吗？

> ID：15025551
> 
> 赞同：1
> 
> 时间：2013-02-22T13:39:41.303
> 
> 标签：javascript, html, google-maps

我有两个 div，一个在另一个之上。底部包含 JS 谷歌地图。顶部包含文本并具有透明背景。有没有办法通过拖动顶部元素来控制地图的平移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:27:48.557

您可以在 Google Maps Api 命令中使用一些 javascript，在这种情况下，我相信您需要使用 map.panBy()。您可以使用以下命令将此命令分配给 div 上的拖动操作：

```
var isDragging = false;
$("a")
.mousedown(function() {
    $(window).mousemove(function() {
        isDragging = true;
        $(window).unbind("mousemove");
    });
})
.mouseup(function() {
    var wasDragging = isDragging;
    isDragging = false;
    $(window).unbind("mousemove");
    if (!wasDragging) { //was clicking
        $("#throbble").show();
    }
}); 
```

资料来源：

[你能在 jQuery 中检测到“拖动”吗？](https://stackoverflow.com/questions/4127118/can-you-detect-dragging-in-jquery)

[http://www.daveoncode.com/2008/11/17/playing-with-google-maps-api-part-two-create-custom-controls/](http://www.daveoncode.com/2008/11/17/playing-with-google-maps-api-part-two-create-custom-controls/)

# wordpress - 禁止访问 Wordpress 中的父类别

> ID：15025552
> 
> 赞同：0
> 
> 时间：2013-02-22T13:39:45.283
> 
> 标签：wordpress, .htaccess, parent, categories

我们的一个 Wordpress 中有几个子类别，只有一个父类别。我们不希望用户可以转到父类别，因为它又空又丑。

问题是......谷歌正在索引父类别，此外，您可以直接在浏览器中编写父类别的网址。

我们一直在尝试使用这些简单的句子（等等），但仍然不起作用

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} /WE-WANT-THIS-OFF!!!!!!/
Rewriterule ^$ http://www.mydomain.com [L,R=301]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

还有什么建议吗？？在此先感谢人们：D！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:07:14.963

您应该将重写规则放在`RewriteBase`指令下方，因为规则在匹配中使用此基础。也不需要重写条件，因为你只是匹配一个模式。一个单独的 RewriteRule 就足够了。

尝试这样的事情：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Don't do anything if index.php
RewriteRule ^index\.php$ - [L]

# Redirect category
Rewriterule ^category/my-parent-category/?$ http://{{SERVER_NAME}} [R=301,L]

# Pass all other requests to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

# c++ - 为什么 basic_streambuf::pubseekoff() 不是纯虚函数？

> ID：15025553
> 
> 赞同：1
> 
> 时间：2013-02-22T13:39:47.557
> 
> 标签：c++, visual-studio-2010, gcc, stream, streambuf

如果您查看`<streambuf>`VS2010 中的头文件，您会看到此成员函数的定义为

```
pos_type pubseekoff(off_type _Off, ios_base::seekdir _Way,
                ios_base::openmode _Mode = ios_base::in | ios_base::out)
{   // change position by _Off, according to _Way, _Mode
    return (seekoff(_Off, _Way, _Mode));
} 
```

where`seekoff`是一个虚函数，它在派生类中被覆盖，`basic_filebuf`并且`basic_stringbuf`在基类中什么都不做，`basic_streambuf`如下所示：

```
virtual pos_type seekoff(off_type, ios_base::seekdir,
                         ios_base::openmode = ios_base::in | ios_base::out)
{   // change position by offset, according to way and mode
    return (streampos(_BADOFF));
} 
```

我找不到 的定义，`_BADOFF`但它可能是`-1`. 但这在这里真的无关紧要。这个函数 nor`pubseekoff`永远不会被调用，因为该类`basic_streambuf`是一个抽象类（它的构造函数是受保护的）。

**另请注意，`gcc`编译器使用相同的技术**。为什么这两个编译器必须求助于`seekoff()`成员函数，而不是简单地声明`pubseekoff`为纯虚函数`basic_streambuf`并在每个派生类中定义它`basic_filebuf`和`basic_stringbuf`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:47:22.617

出于同样的原因，您通常不会公开虚拟功能。公共函数定义了一个接口，如果要强制执行该接口，基类需要能够捕获它们。当涉及控制反转时也有例外，但在大多数情况下，您根本不公开虚函数。如果你这样做了，你将如何插入前置条件和后置条件检查？（例如，参见 [http://www.gotw.ca/publications/mill18.htm 。）](http://www.gotw.ca/publications/mill18.htm)

# javascript - 颜色框弹出窗口无法从 ie7 中的内联 div 加载谷歌地图

> ID：15025554
> 
> 赞同：0
> 
> 时间：2013-02-22T13:39:55.950
> 
> 标签：javascript, jquery, google-maps, internet-explorer-7, colorbox

以下代码在所有版本的现代浏览器中将谷歌地图从内联 div 加载到颜色框弹出窗口，但无法在 ie7 等过时浏览器中加载地图。

```
<head>
<script src="http://maps.googleapis.com/maps/api/js?key=/////////;sensor=false"></script>
<script>
var myCenter=new google.maps.LatLng(xxxxxxxx,yyyyyyy);

function initialize()
{
var mapProp = {
  center:new google.maps.LatLng(xxxxxxxx,yyyyyyy),
    zoom:10,
  mapTypeId: google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker=new google.maps.Marker({
  position:myCenter,
  });

marker.setMap(map);

var infowindow = new google.maps.InfoWindow({
  content:"hello world
  });

infowindow.open(map,marker);
}
//google.maps.event.addDomListener(window, 'load', initialize);
</script>

<script type="text/javascript">
jQuery(document).ready(function($){
$(".inline").colorbox({
  inline:true,
  href:"#googleMap",
  fixed:true,
  onComplete: function(){
     initialize();

  }
    });
});
</script>

</head> 
```

* * *

```
<body>
<div style="display:none;">
<div id="googleMap" style="width:600px;height:500px;">
</div>
</div>

<a class='inline' href="#googleMap">Google Map</a>
</body> 
```

* * *

我指出了 ie7 控制台在以下代码块中究竟是如何以及在何处注意到 js 错误的：

```
var marker=new google.maps.Marker({
  position:myCenter,
  .....*Error:Expected identifier, string or number...});

jQuery(document).ready(function($){
$(".inline").colorbox({
  inline:true,
  href:"#googleMap",
  fixed:true,
  onComplete: function(){
    ........*Error:Object expected...... initialize();

  }
    });
}); 
```

知道为什么会发生以及如何解决吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:06:58.983

我的建议是不要使用 inline 属性（旧的 IE 难以在 DOM 中移动某些类型的内容），而是尝试使用 html 属性。然后使用 onComplete 来初始化你的脚本：

```
$(".inline").colorbox({
  html:$('#googleMap').clone().attr('id', 'popupMap'),
  fixed:true,
  onComplete: initialize
}); 
```

您需要编辑initialize() 以定位#popupMap 而不是#googleMap。另一种选择是将它放在 iframe 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:24:40.487

IE 对对象文字很挑剔。尝试删除逗号：

```
var marker=new google.maps.Marker({
    position:myCenter,
             //here  ^ 
```

Alsp，您在这里缺少双引号：

```
var infowindow = new google.maps.InfoWindow({
    content:"hello world 
```

应该

```
content:"hello world" 
```

# javascript - option.style.display = "none" 在 Safari 中不起作用

> ID：15025555
> 
> 赞同：17
> 
> 时间：2013-02-22T13:39:59.797
> 
> 标签：javascript, html, css, html-select

这是我正在处理的示例：http: [//jsfiddle.net/4suwY/5/](http://jsfiddle.net/4suwY/5/)

HTML：

```
<select id="asd">
    <option>hello</option>
    <option>I'M THE CHOSEN ONE</option>
    <option>asd</option>
    <option>wer</option>
    <option>qwe</option>
</select> 
```

JS：

```
var sel = document.getElementById("asd");
var optnz = sel.getElementsByTagName("option")[1];
sel.value = optnz.value;
optnz.style.display = "none"; 
```

如您所见，它在 chrome 中有效，但在 safari 中无效。它应该做的是在单击下拉菜单时隐藏“I'M THE CHOSEN ONE”选项。

这是我做的另一个测试：http: [//jsfiddle.net/4suwY/11/](http://jsfiddle.net/4suwY/11/)

相同的 HTML，这是 JS：

```
var sel = document.getElementById("asd");
var opt = document.createElement("option");
opt.innerHTML = "YAYA";
opt.value = "YAYA";
sel.appendChild(opt);
sel.value = "YAYA";
opt.style.display = "none"; 
```

无论如何，我需要做的是将一个选项显示为已选择（当前），并在打开下拉菜单时向用户隐藏，因此他无法选择它。

有什么建议/解决方法吗？我没有看到任何错误。Safari 有什么问题？我应该改变方法吗？Jquery 似乎没有帮助。

* * *

编辑：

我需要隐藏下拉菜单中的选项，但同时我需要将此选项“值”显示为选定值！例如，“关闭”下拉菜单将显示值“我是选择的人”，但如果我单击并打开菜单，唯一可见的选项将是“hello, asd, wer, qwe”..

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-22T14:03:54.727

您不能`<option>`在 Safari（或 IE，就此而言）中的元素切换显示。这是 Safari 限制表单元素上的 CSS 样式功能的长期且不一致的传统的一部分，认为交互元素的视觉语言应该与操作系统一致（没有必要为 IE 的失败寻找理由）。

您唯一的选择是将其删除（并稍后重新附加），或将其设置为`optnz.disabled = true`. 关于这些坏消息我很遗憾！

# linux - linux多线程调度

> ID：15025556
> 
> 赞同：4
> 
> 时间：2013-02-22T13:40:03.607
> 
> 标签：linux, multithreading, pthreads

我有一个程序在 8 核服务器上启动大约 12 个线程。一些线程正在等待关键数据。在循环中使用recv的地方，recv将阻塞直到数据到来。但是，当有数据时，它需要尽快处理它。

我注意到的一件事是，有时连接安静时，线程没有太多活动。线程可能进入睡眠状态（怀疑？），然后当数据进入时，它需要先唤醒，因此浪费时间。我想知道是否有任何设置，所以线程不会被置于睡眠状态并稍后醒来？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:19:22.650

正如 Martin James 所说，阻塞是一件很正常的事情，无论是通过简单的`recv`还是通过`epoll`事件驱动的服务器。如果您没有观察到真正可测量的延迟问题，我不会担心。你正在做每个人都会做的事情。

通过真正可测量的延迟问题，我的意思是您明确定义的目标之间的差异（例如，在特定负载模式下在客户端测量的 1 毫秒的 50% 延迟，100 毫秒的 99.9% ile 延迟，如果您是担心阻塞）和现实。

也就是说，我听说过非常关注延迟的人[抱怨](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/people/jeff/Berkeley-Latency-Mar2012.pdf)当没有足够的工作来保持处理器忙碌时内核将处理器置于太深的[睡眠状态](http://software.intel.com/sites/manageability/AMT_Implementation_and_Reference_Guide/DOCS/Implementation%20and%20Reference%20Guide/default.htm?turl=WordDocuments%2Fsleepstates.htm)，从而导致唤醒时延迟过多。我认为这将是您想要在内核级别控制的东西，而不是您的应用程序。我没有看到任何关于延迟的数字，所以这也是你想要测量的东西：找到（或创建）一种方法来控制它使用的最深睡眠状态并测量效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:20:24.970

这不仅仅是你的线程，还有其他线程。在大范围内，您实际拥有多少线程并不重要。当您的线程在`recv`. 因此，当有数据可以让您`recv`返回时，您的线程将准备好运行，并且*可能*会被调度程序选择执行。如果所有内核都被优先级高于您的线程的线程占用，并且如果它们的时间片不仅幸运地结束，那么您的线程将不得不等待 cpu。但是，为了在有数据之后立即安排**线程**`recv`，您应该提高线程优先级。在这种情况下`recv`return 将使您的线程“可运行”，并且调度程序将在考虑任何其他较低优先级的线程之前切换到它。如果有必要，它甚至会停止线程的较低优先级的线程。

# apache - 对本地开发环境进行大量重定向

> ID：15025557
> 
> 赞同：0
> 
> 时间：2013-02-22T13:40:19.343
> 
> 标签：apache, .htaccess, redirect, webserver, wamp

我有一个本地开发环境，只是在 Windows 7 32 位上安装了 wamp。

现在我的问题是我现有的项目内容想要重定向很多。使用 .htaccess 和狗屎。我的本地网络服务器没有接受这个结果：

> Fout 310 (net::ERR_TOO_MANY_REDIRECTS)：Er zijn te veel omleidingen。
> 
> 错误 310 (net::ERR_TOO_MANY_REDIRECTS)：很多重定向 -*我在荷兰语中有错误我想这是英文版*

现在我的饼干没有问题了。它告诉我检查一下。

我的 .htaccess 看起来像这样：

```
RewriteEngine On

#RewriteCond %{HTTP_HOST} !^localhost\.?(:[0-9]+)?$ 
#RewriteCond %{HTTP_HOST} !^www\.
#RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=404,L]

DirectoryIndex index.php

# -[PHP.INI OVERRIDE]-  -----------------------------------------------------------------------------------------------------------
php_value register_globals 0

# -[UPLOAD MAX FILE SIZE]-  -----------------------------------------------------------------------------------------------------------
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_execution_time 120

# -[ERROR REPORTING]-  -----------------------------------------------------------------------------------------------------------
# Complete error reporting
# php_value error_reporting 8191
# Zend error reporting
# php_value error_reporting 128
# Basic error reporting
  php_value error_reporting 8
# Minimal error reporting  
# php_value error_reporting 1

# -[ERROR DOCS]-  ----------------------------------------------------------------------------------------------------------------
 ErrorDocument 403 /index.php?mode=error&type=403
 ErrorDocument 404 /index.php?mode=error&type=404
 ErrorDocument 500 /index.php?mode=error&type=500

# -[BESTAAT BESTAND -> DOORGEVEN] ------------------------------------------------------------------------------------------------
 RewriteCond %{REQUEST_FILENAME} -f [OR]
 RewriteCond %{REQUEST_FILENAME} -d
 RewriteRule . - [QSA,NC,L]

# -[CMS]---- ---------------------------------------------------------------------------------------------------------------------
 RewriteRule ^cms/$ cms/ [QSA,L]

# -[GLOBAL]- ---------------------------------------------------------------------------------------------------------------------
 RewriteRule ^error/403$ index.php?mode=error&type=403 [L]
 RewriteRule ^error/404$ index.php?mode=error&type=404 [L]
 RewriteRule ^error/500$ index.php?mode=error&type=500 [L]
 RewriteRule ^([0-9a-z_-]*)/([0-9a-z_-]*)/([0-9a-z_-]*)/([0-9a-z_-]*).html$ index.php?mode=$1&mode2=$2&mode3=$3&html=$4 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*)/([0-9a-z_-]*)/([0-9a-z_-]*)/$                   index.php?mode=$1&mode2=$2&mode3=$3 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*)/([0-9a-z_-]*)/([0-9a-z_-]*).html$               index.php?mode=$1&mode2=$2&html=$3 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*)/([0-9@a-z_-]*)/$                                index.php?mode=$1&mode2=$2 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*)/([0-9a-z_-]*).html$                             index.php?mode=$1&html=$2 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*)/$                                               index.php?mode=$1 [NC,QSA,L]
 RewriteRule ^([0-9a-z_-]*).html$                                           index.php?html=$1 [NC,QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:54:57.537

当调用 Rooth 路径等时，Wamp 会跳过根 (/www) 到其后面的文件夹。所以不要删除 wamp 生成的文件，当你有一个项目时，你需要在本地运行以在 wamp 上进行测试，在 /www 内创建一个文件夹，如 /www/myproject。Wamp 使该文件夹成为根目录。

当在 php 中调用一个像 root_path 这样的神奇常量时，它会按字面意思执行此操作：

~~/万维网~~/我的项目

# bash - Bash 发布增量

> ID：15025564
> 
> 赞同：2
> 
> 时间：2013-02-22T13:40:31.757
> 
> 标签：bash, post-increment

只是关于在 bash 中进行后增量的正确方法的一个小问题。

```
while true; do
  VAR=$((CONT++))
  echo "CONT: $CONT"
  sleep 1
done 
```

在这种情况下，VAR 从 1 开始。

```
CONT: 1
CONT: 2
CONT: 3 
```

但如果我这样做：

```
while true; do
  echo "CONT: $((CONT++))"
  sleep 1
done 
```

它从 0 开始。

```
CONT: 0
CONT: 1
CONT: 2 
```

似乎第一种情况表现良好，因为 ((CONT++)) 将评估 CONT (undefined,¿0?) 并添加 +1。

如何获得类似 in`echo`语句的行为以分配给变量？

编辑：在我的第一个示例中，我应该回显 VAR，而不是回显 CONT，这样它就可以正常工作，所以从一开始就是我的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T13:51:08.883

**两种**情况都可以且合理。

`foo++`将首先返回 的当前值（在自动递增之前）`foo`，然后自动递增。

在您的第一种情况下，如果您更改为`echo "CONT: $VAR"`，它将给出与情况 2 相同的结果。

如果你想拥有`1,2,3...`自动增量，你可以尝试：

```
echo "CONT: $((++CONT))" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:56:49.657

让我们简化您的代码以使其更易于理解。

以下：

```
 VAR=$((CONT++))
  echo "CONT: $CONT" 
```

可以分解为以下几个步骤：

```
 VAR=$CONT            # assign CONT to VAR
  CONT=$((CONT+1))     # increment CONT
  echo "CONT: $CONT"   # print CONT 
```

同样，以下语句：

```
echo "CONT: $((CONT++))" 
```

相当于：

```
echo "CONT: $CONT"    # print CONT
CONT=$((CONT+1))      # then increment CONT 
```

希望这有助于解释为什么您会看到这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:52:15.650

后增量意味着，返回*前一个*值，然后增加该值。

在您的第一个示例中，您使用递增*后的值。*在您的第二个示例中，您在增加它*之前*使用它。

如果您想要与第一个示例相同的结果，则必须使用前缀增量

```
while true; do
    echo "CONT: $((++CONT))"
    sleep 1
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-10T11:05:25.337

`((CONT++))`是增加变量的原因。添加`"$"`is 用于其他目的。

# backbone.js - 如何在渲染视图之前管理为两个不同模型获取数据？

> ID：15025566
> 
> 赞同：2
> 
> 时间：2013-02-22T13:40:48.450
> 
> 标签：backbone.js, backbone-events

我有一个描述组织的模型和一个描述组织权限的子集合。

在我看来，我需要在渲染之前从两个模型中获取数据。当我将视图渲染方法绑定到一个事件（例如 model.change 或 subcollection.sync）时，有时我的屏幕会在我的模型被填充之前显示，从而产生错误。

这是我的代码的相关部分：

```
 this.model = new OrgModel({id: id});
  this.model.permissions = new PermissionsCollection({org: id});

  this.model.permissions.on("sync", this.render);  // SOMETIMES GETS CALLED BEFORE model:sync GETS CALLED

  this.model.permissions.fetch({error: Utils.apiError});
  this.model.fetch({error: Utils.apiError}); 
```

我不确定要调用哪个事件“渲染”-因为有时每个请求都会先返回。

有没有办法将“同步”事件绑定在一起，以便在调用 model.fetch 时，它又会调用 subcollection.fetch，并且在调用 subcollection:sync 之前不会传回“同步”事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T21:18:44.637

```
var deferred1, deferred2, that = this;
this.model = new OrgModel({id: id});
this.model.permissions = new PermissionsCollection({org: id});
deferred1 = this.model.permissions.fetch({error: Utils.apiError});
deferred2 = this.model.fetch({error: Utils.apiError});

$.when(deferred1, deferred2).then(function(){
    that.render();
}); 
```

延迟和承诺有一个非常强大的概念。有关该主题的更多信息，请访问[api.jquery.com/jQuery.Deferred](http://api.jquery.com/jQuery.Deferred/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:39:09.133

我处理这个问题的方法是使用计数器来跟踪当前有多少请求处于待处理状态：

*   在`request`计数器上递增
*   On`sync`或`error`计数器递减
*   当计数器从`0`到 时`1`，我触发一个`loading`事件
*   当计数器从`1`到 时`0`，我触发一个`loaded`事件

您可以实现这样的系统并将您的`render`函数绑定到`loaded`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:23:54.137

这可能不是最好的方法，但我通常通过以下方式处理：

*   获取您的收藏模型后添加成功功能。每个函数都会初始化一个变量，例如`this.permissionsFetched = true;`
*   `this.permissionsFetched`修改 render() 以便在您的和`this.modelFetched`变量已初始化的情况下呈现您的视图或其中的一部分。

这样，您的第一次渲染不会触发错误，并且您的视图应该在您的第二次获取结果之后渲染，无论它们执行的顺序如何......

它感觉不是 100% 干净，可能有更好的方法来做到这一点。然而，它对我来说工作正常，它比让你的 fetches 串行好一点。

# gwt - 如何动态创建 GWT UIBinder 元素？

> ID：15025573
> 
> 赞同：1
> 
> 时间：2013-02-22T13:41:09.307
> 
> 标签：gwt, uibinder

我有一个带有一个 Button 和一个 DIV 的小部件，它应该内容动态生成的 Buttons 在`<g:HTMLPanel></g:HTMLPanel>`.

我该如何继续，以便通过单击此按钮创建 GWT 按钮并将其添加到该 DIV 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:05:30.557

替代已经给出的答案：

```
<g:HTMLPanel ui:field="buttonPanel"></g:HTMLPanel> 
```

然后，在您的代码中，声明面板如下：

```
@UiField HTMLPanel buttonPanel; 
```

并像这样添加您的按钮：

```
buttonPanel.add(myButton); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:59:44.013

将 id 赋予活页夹中的 div，例如

```
<div id='dynamicDiv'></div> 
```

并在您的代码中添加如下元素

```
RootPanel.get("dynamicDiv").add(myButton1);

RootPanel.get("dynamicDiv").add(myButton2); 
```

在添加按钮之前，请确保`dynamicDiv`已添加到 中。`DOM`

# xslt - 使用 XSL 删除重复项

> ID：15025575
> 
> 赞同：0
> 
> 时间：2013-02-22T13:41:24.333
> 
> 标签：xslt

这是当前的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
</catalog> 
```

当前 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="/">
    <html>
      <body>
        <table border="1">
          <xsl:variable name="a" select="count(catalog/cd[contains(title,'Empire Burlesque')])"/>
          <xsl:for-each select="catalog/cd">
            <tr>
              <td>
                <xsl:choose>
                  <xsl:when test="$a = '2' and contains(title,'Empire Burlesque') ">
                    <xsl:text>pass</xsl:text>
                  </xsl:when>
                  <xsl:otherwise>
                    <xsl:value-of select="title"/>
                  </xsl:otherwise>
                </xsl:choose>
              </td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

从这里出来的是：

```
pass
Hide your heart
pass
Still got the blues 
```

预期输出：

```
Empire Burlesque
Hide your heart
pass
Still got the blues 
```

我不想重复“Empire Burlesque”，而应该在第二次将其替换为“pass”。有人可以帮我解决我一定出错的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:10:25.883

如果在 XSLT 1 中进行分组或重复删除，那么您需要注意使用键的“Muenchian Grouping”技术：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:key name="t" match="title" use="."/>

  <xsl:template match="/">
    <html>
      <body>
        <table border="1">
          <xsl:for-each select="catalog/cd">
            <tr>
              <td>
                <xsl:choose>
                  <xsl:when test="generate-id(title)=generate-id(key('t',title))[1]">
                    <xsl:value-of select="title"/>
                  </xsl:when>
                  <xsl:otherwise>
                    <xsl:text>pass</xsl:text>
                  </xsl:otherwise>
                </xsl:choose>
              </td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

生产

```
<html>
   <body>
      <table border="1">
         <tr>
            <td>Empire Burlesque</td>
         </tr>
         <tr>
            <td>Hide your heart</td>
         </tr>
         <tr>
            <td>pass</td>
         </tr>
         <tr>
            <td>Still got the blues</td>
         </tr>
      </table>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:32:10.837

这是一个选项：

### 样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html"/>

  <xsl:template match="/">
    <html>
      <body>
        <xsl:apply-templates select="catalog"/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="catalog">
    <table border="1">
      <xsl:apply-templates select="cd"/>
    </table>
  </xsl:template>

  <xsl:template match="cd">
    <tr>
      <xsl:apply-templates select="title"/>
    </tr>
  </xsl:template>

  <xsl:template match="title">
    <td>
      <xsl:value-of select="."/>
    </td>
  </xsl:template>

  <!--
  Match <title> elements that contain the string "Empire Burlesque" with a
  preceding element like it. This template will be applied rather than the
  one above because it has a higher specificity (as in, it is more specific
  about what kind of node it's looking for).
  -->
  <xsl:template match="title[contains(., 'Empire Burlesque') and
                       preceding::title[contains(., 'Empire Burlesque')]]">
    <td>pass</td>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
</catalog> 
```

### 输出

```
<html>
  <body>
    <table border="1">
      <tr>
        <td>Empire Burlesque</td>
      </tr>
      <tr>
        <td>Hide your heart</td>
      </tr>
      <tr>
        <td>pass</td>
      </tr>
      <tr>
        <td>Still got the blues</td>
      </tr>
    </table>
  </body>
</html> 
```

此外，如果可以的话，你会想要[避免`<xsl:for-each>`](https://stackoverflow.com/a/737603/825783)使用`<xsl:apply-templates>`，而是将你的代码分成整洁、可读的块。

# python - 山狮 os X python mysql 安装

> ID：15025578
> 
> 赞同：1
> 
> 时间：2013-02-22T13:41:33.357
> 
> 标签：python, mysql, installation, osx-mountain-lion

从这里下载的 tar 文件

[http://sourceforge.net/projects/mysql-python/files/mysql-python/1.2.3/](http://sourceforge.net/projects/mysql-python/files/mysql-python/1.2.3/)

并遵循[http://decoding.wordpress.com/2012/01/23/how-to-setup-django-and-mysql-python-on-mac-os-x-lion/](http://decoding.wordpress.com/2012/01/23/how-to-setup-django-and-mysql-python-on-mac-os-x-lion/)上的指南。

已成功安装 Django。更改了 mysql_config = /usr/local/mysql-5.6.10-osx10.7-x86_64/mysql_config 中的 site.cfg 配置

然后运行 ​​sudo python setup.py build

得到这个输出

```
dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo)    is setuid or setgid
running build
running build_py
creating build
creating build/lib.macosx-10.6-intel-2.7
copying _mysql_exceptions.py -> build/lib.macosx-10.6-intel-2.7
creating build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/__init__.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/converters.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/connections.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/cursors.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/release.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/times.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
creating build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/__init__.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/CR.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/FIELD_TYPE.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/ER.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/FLAG.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/REFRESH.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/CLIENT.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
running build_ext
building '_mysql' extension
creating build/temp.macosx-10.6-intel-2.7
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -O2 -DNDEBUG -g -O3 -Dversion_info=    (1,2,3,'final',0) -D__version__=1.2.3 -I/usr/local/mysql-5.6.10-osx10.7-x86_64/include -    I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o     build/temp.macosx-10.6-intel-2.7/_mysql.o -Os -g -fno-strict-aliasing -arch x86_64
unable to execute gcc-4.2: No such file or directory
error: command 'gcc-4.2' failed with exit status 1 
```

这些错误来自哪里？找到了雪豹的解决方案，但没有找到山狮的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:00:32.570

看起来你没有`gcc-4.2`安装。请记住，它可能被称为不同的东西。在我的机器上，调用了 gcc 可执行文件`gcc-apple-4.2`

# iphone - JSON 和动态 TableView

> ID：15025581
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:41:40.460
> 
> 标签：iphone, objective-c, json

任何人都可以为我提供任何可点击表格视图的 JSON 字符串的好例子吗？

我正在从服务器获取带有任务的 json 字符串（已经在工作），我需要用 tableview 发布它。但它应该能够单击并给出该行的消息。json结构：

```
{ "messages":[{  
   "id": ....,  
   "msg":....,  
   "special":...,  
   "comments":...}]} 
```

有什么好的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:45:02.097

我发现这个视频对学习非常有用。

[http://www.youtube.com/watch?v=9MEnvlqP-wU](http://www.youtube.com/watch?v=9MEnvlqP-wU)

还要检查我经常问的一些关于 JSON 的问题，但视频是前进的好方法。

更多链接:)

[http://www.youtube.com/watch?v=YggsvQC2SH0](http://www.youtube.com/watch?v=YggsvQC2SH0)

[http://www.youtube.com/watch?v=RJZcD3hfs3k](http://www.youtube.com/watch?v=RJZcD3hfs3k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:28:19.203

这是您要执行的操作的代码。如果您愿意，您可以修改为以不同的方式查看，如果这是正确的，或者您是否希望通过其他方式显示消息，请告诉我。

```
//
//  MyViewController.h
//  Test
//
//  Created by Syed Arsalan Pervez on 2/22/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface MyViewController : UITableViewController
{
    NSArray *_messages;
}

@end

//
//  MyViewController.m
//  Test
//
//  Created by Syed Arsalan Pervez on 2/22/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import "MyViewController.h"

@interface MyViewController ()

@end

@implementation MyViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *JSONString = @"{\"messages\":[{\"id\":\"1\",\"msg\":\"Message Line\",\"special\":\"Special Line\",\"comments\":\"Comments Line\"},{\"id\":\"2\",\"msg\":\"Message Line\",\"special\":\"Special Line\",\"comments\":\"Comments Line\"}]}";

    NSError *error = nil;
    NSDictionary *JSONObj = [NSJSONSerialization JSONObjectWithData:[JSONString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:&error];
    if (!error)
    {
        _messages = [[JSONObj valueForKey:@"messages"] retain];
    }
    else
    {
        NSLog(@"Error: %@", error);
    }

    [self.tableView reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return [_messages count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return  3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSDictionary *_message = [_messages objectAtIndex:indexPath.section];
    switch (indexPath.row)
    {
        case 0:
            cell.textLabel.text = [_message valueForKey:@"msg"];
            break;

        case 1:
            cell.textLabel.text = [_message valueForKey:@"special"];
            break;

        case 2:
            cell.textLabel.text = [_message valueForKey:@"comments"];
            break;
    }
    _message = nil;

    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDictionary *_message = [_messages objectAtIndex:section];
    return [NSString stringWithFormat:@"Message %@", [_message valueForKey:@"id"]];
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    NSDictionary *_message = [_messages objectAtIndex:indexPath.section];
    NSMutableString *string = [NSMutableString new];
    [string appendFormat:@"Message %@: ", [_message valueForKey:@"id"]];
    switch (indexPath.row)
    {
        case 0:
            [string appendString:[_message valueForKey:@"msg"]];
            break;

        case 1:
            [string appendString:[_message valueForKey:@"special"]];
            break;

        case 2:
            [string appendString:[_message valueForKey:@"comments"]];
            break;
    }
    _message = nil;

    [[[[UIAlertView alloc] initWithTitle:@"Alert" message:string delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease] show];
    [string release];
}

- (void)dealloc
{
    [_messages release];

    [super dealloc];
}

@end 
```

输出：

![在此处输入图像描述](../Images/fa17e19fbf36f13640b07ecba6f055b0.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T13:58:33.897

您必须使用库（如[SBJson](https://github.com/stig/json-framework) ）解析该 JSON 响应，然后从您的数据创建数组或字典，并使用此字典和数组来填充您的表格视图。

如果您可以提供您的 json 响应，那么我可以帮助您解析它。

我添加了一些显示解析的代码片段：

```
SBJsonParser *jsonParser = [SBJsonParser new];
NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];

            //to display driver name in drop down

            NSArray * messagesArray = [[NSArray alloc]init];
            messagesArray= [jsonData objectForKey:@"messages"];

            for(int i=0;i<[driverNameArray count];i++)
            {
                NSDictionary *tempDictionary = [messagesArray objectAtIndex:i];
                if([tempDictionary objectForKey:@"id"]!=nil)
                {

                    [idAry addObject:[tempDictionary objectForKey:@"id"]];

                }
                if([tempDictionary objectForKey:@"msg"]!=nil)
                {

                    [msgAry addObject:[tempDictionary objectForKey:@"msg"]];

                }
                if([tempDictionary objectForKey:@"special"]!=nil)
                {

                    [specialAry addObject:[tempDictionary objectForKey:@"special"]];

                }
                if([tempDictionary objectForKey:@"comments"]!=nil)
                {

                    [commentsAry addObject:[tempDictionary objectForKey:@"comments"]];

                }

            } 
```

我使用过的所有数组 commentsAry、specialAry、msgAry、idAry 保存您的数据，并可用于填充 tableview。

# javascript - Javascript $.Map() & Math.Max.Appy() to find maximum height

> ID：15025589
> 
> 赞同：0
> 
> 时间：2013-02-22T13:42:04.290
> 
> 标签：javascript, jquery

*   following code is working code used to find maximum height
*   `$.fn.` is used to add this method as jQuery Plugin.
*   `$.Map()` return new array
*   `Math.Max.Apply` return max number from array

    ```
    $.fn.tallest = function(outer, margins) {

        var fn = outer ? "height" : "outerHeight";

        return Math.max.apply(Math, $.map(this, function(el){return $(el)[fn](margins);}));

    };

    //var images=jquery(img 1.jpg, img 2.jpg, img 3.ipg, img 4.jpg);
    var slidesHeight = images.tallest(); 
    ```

*   In this I have trouble understanding below line, but do understand how .Map() works.
    `$.map(this, function(el) {return $(el)[fn](margins);})`

*   `$(el)[fn](margins)` //Especially how this line return height attribute of image.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:56:26.047

`$(el)[fn]` is just another way of calling a method in `$(el)` whose name is not known in advance.

`$(el)[fn](margins)` is the same as having `$(el).height(margins)` or `$(el).outerHeight(margins)` depending on the value of the `fn` which depends on the value of the argument `outer`.

When `outer` is non-falsy, `fn` will be `"outerHeight"` and the above statement will be equivalent to `$(el).outerHeight(margins)`

When `outer` is falsy, `fn` will be `"height"` and the above statement will be equivalent to `$(el).height(margins)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:03:34.770

*Edited to incorporate Felix Kling's note.

Ok, let's break it down

```
$.map(this, function(el){return $(el)[fn](margins);}) 
```

1.  `$.map` is a function that iterates over a collection and performs the passed in function to each element within the collection and returns an array with all the results.
    For example:

    ```
    $.map([1,2], function(i) {return i + 1})
    [2, 3] 
    ```

2.  The `this` refers to the collection that the jQuery collection `$.fn.tallest()` is working against. For example:

    ```
    $('tr').tallest() // => this would refer to all the tr's within the dom 
    ```

3.  `$(el)[fn]`
    In JavaScript, you can either invoke a function bound to a receiver with the regular dot notation, such as `$(e1).height` or you can use bracket notation as the example you provided does: `$(e1)['height']`.

4.  `$(e1)[fn](margins)`
    `margins` is the passed in argument to the function `height()`.

Hope this helps.

# email - Web 用户身份验证替代方案

> ID：15025591
> 
> 赞同：0
> 
> 时间：2013-02-22T13:42:11.897
> 
> 标签：email, authentication

我正在寻找基于用户的网站的典型和主流用户名/电子邮件密码身份验证的替代方法。我想知道是否存在其他替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:06:57.823

除了用户名/密码身份验证（通常通过表单或使用 HTTP Basic/Digest 身份验证）外，您还可以在使用 HTTPS 或 Kerberos 票证时使用 SSL/TLS 客户端证书（通过 SPNEGO）。

此外，还有多种形式的委托身份验证（通常传达一些额外的授权相关信息），例如 OpenID、OAuth、SAML/Shibboleth。例如，根据实现，这些也可能依赖于（在身份提供者处）密码、证书或 Kerberos。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:44:17.687

[OAuth v2](http://oauth.net) - 通过 Google/Facebook/Twitter 等登录。

或者

[谷歌它](https://www.google.com/search?q=alternative+to+username+password+authentication)。

# php - 关于 AJAX 和 PHP 以及如何在搜索变量中设置多个参数的一些问题

> ID：15025598
> 
> 赞同：0
> 
> 时间：2013-02-22T13:42:32.650
> 
> 标签：php, ajax, dom

好的，这是我的问题。我有一个带有变量 searchResult 的 AJAX 脚本，我想从我的 result.php 中获取它，问题是我不知道应该如何编写获取前提。我试图获取 document.getElementsByName(str.name);

这是我无法帮助的 showSearch 功能。

我会发布我的代码，希望有人有一个好的回答。仅供参考 - 我不太擅长 AJAX。

```
<html>
<head>
<script type="text/javascript" src="jquery-1.9.1.min.js"> </script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery    /1/jquery.min.js"> </script>
<title>Search</title>

<script>
function showSearch(str)
{
var muffin = document.getElementsByName(str.name);
var xmlhttp;
if(str=="")
{
document.getElementById("searchDiv").innerHTML="";
return;

}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
 {
 document.getElementById("searchDiv").innerHTML=xmlhttp.responseText;
 }
}

 var searchResult ="result.php?area="+muffin+"&arealimiter="+muffin+"&pris="+muffin+"&   prislimiter="+muffin+"&avgift="+muffin+"&avgiftlimiter="+muffin+"&objekttyp="+muffin;
 xmlhttp.open("GET",searchResult,true);
 xmlhttp.send();
 }
 </script>
 </head>
 <h2>
 Hitta bostader!
 </h2>

 <body>
 <?php
 include "functions.php";

 $link = pg_connect("host=xxxx dbname=xxxxx user=xxxx password=xxxxxx");
 $maxarea = pg_query($link, "SELECT MAX(area) FROM bostader");
 $minarea = pg_query($link, "SELECT MIN(area) FROM bostader");
 $maxpris= pg_query($link, "SELECT MAX(pris) FROM bostader");
 $minpris= pg_query($link, "SELECT MIN(pris) FROM bostader");
 $maxavgift = pg_query($link, "SELECT MAX(avgift) FROM bostader");
 $minavgift = pg_query($link, "SELECT MIN(avgift) FROM bostader");
 $rum = pg_query($link, "SELECT DISTINCT rum FROM bostader ORDER BY rum");
 $lan = pg_query($link, "SELECT DISTINCT lan FROM bostader ORDER BY lan");
 $objekttyp = pg_query($link, "SELECT DISTINCT objekttyp FROM bostader ORDER BY objekttyp");
 ?>
 <form id="searchForm" action="">

 <?php
 if (isset($_COOKIE["arealimiter"])) {
$isAreaMax = strcmp($_COOKIE["arealimiter"], "min");
}
 ?>
 Area: <input onchange='showSearch(this.value)' type="number" name="area" <?php
 if (isset($_COOKIE["area"]))
echo "value=\"".$_COOKIE["area"]."\"";
 ?>min="<?php echo $minarea;?>" max="<?php echo $maxarea;?>"/> <br>
 <input onchange='showSearch(this.value)' type="radio" name="arealimiter" value="max"<?php if    ($isAreaMax) echo "checked"; ?>>Max
 <input onchange='showSearch(this.value)' type="radio" name="arealimiter" value="min" <?php if (!$isAreaMax) echo "checked"; ?>>Min <br>

Rum: <br>
<?php
$numrum = pg_numrows($rum);
for ($i = 0; $i < $numrum; $i++) {
$row = pg_fetch_array($rum, $i);
echo "<input onchange='showSearch(this.value)' type=\"checkbox\" name=\"rum[]\" value=\"".  $row["rum"]. "\"";
if (isset($_COOKIE["rum".$i]))
    echo " checked";
echo ">". $row["rum"]. "<br>";
 }
 ?> <br>

 <?php
 if (isset($_COOKIE["prislimiter"])) {
$isPrisMax = strcmp($_COOKIE["prislimiter"], "min");
}
 ?>

 Pris: <input onchange='showSearch(this.value)' type="number" name="pris"<?php
 if (isset($_COOKIE["pris"]))
        echo "value=\"".$_COOKIE["pris"]."\"";
 ?>min="<?php echo $minpris;?>" max="<?php echo $maxpris;?>" /> <br>
 <input onchange='showSearch(this.value)' type="radio" name="prislimiter" value="max" <?php if ($isPrisMax) echo "checked"; ?>>Max
 <input onchange='showSearch(this.value)' type="radio" name="prislimiter" value="min"<?php if (!$isPrisMax) echo "checked"; ?>>Min <br>

 <?php
 if (isset($_COOKIE["avgiftlimiter"])) {
$isAreaMax = strcmp($_COOKIE["avgiftlimiter"], "min");
}
 ?>

 Avgift: <input onchange='showSearch(this.value)' type="number" name="avgift"<?php
 if (isset($_COOKIE["avgift"]))
echo "value=\"".$_COOKIE["avgift"]."\"";
 ?>min="<?php echo $minavgift;?>" max="<?php echo $maxavgift;?>" /> <br>
 <input onchange='showSearch(this.value)' type="radio" name="avgiftlimiter" value="max" <?php if ($isAvgiftMax) echo "checked"; ?>>Max
 <input onchange='showSearch(this.value)' type="radio" name="avgiftlimiter" value="min"<?php if (!$isAvgiftMax) echo "checked"; ?>>Min <br>

 Lan: <br>
 <?php
 $numlan = pg_numrows($lan);
 for ($i = 0; $i < $numlan; $i++) {
$row = pg_fetch_array($lan, $i);
echo "<input onchange='showSearch(this.value)' type=\"checkbox\" name=\"lan[]\" value=\"", $row["lan"]."\"";
if (isset($_COOKIE["lan".$i]))
    echo " checked";
echo ">". $row["lan"]. "<br>";
 }
 ?> <br>

 Objekt Typ: <br>
 <?php
 $numtyp = pg_numrows($objekttyp);
 for ($i = 0; $i < $numtyp; $i++) {
$row = pg_fetch_array($objekttyp, $i);
echo "<input onchange='showSearch(this.value)' type=\"checkbox\" name=\"objekttyp[]\"   value=\"". $row["objekttyp"]."\"";
if (isset($_COOKIE["objekttyp".$i]))
    echo " checked";
echo ">". $row["objekttyp"]. "<br>";
 }
 ?> <br>

 </form>

 <div id="searchDiv">Search result will be displayed here...</div>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:17:03.390

由于您使用的是 jQuery，因此您应该使用内置[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)函数而不是重新发明。看起来您希望每次`<input>`更改任何内容时都运行搜索。

作为起点，我将使用以下 jQuery AJAX GET

```
<script type='text/javascript'>
    $(function(){
        var $form = $('#searchForm'); // a handle to your form element

        function showSearch() { // no need to pass anything to this function
            $.ajax({
                type: 'GET',
                url: 'result.php',
                data: $form.serialize() // serialize all form elements with a name attribute
            }).done(function(data) {
                // do something with search result, supplied as the "data" variable,
                // in your case just put the results into the `<div id="searchDiv">`
                $('#searchDiv').html(data);
            });
        }

        // Edit: This is the new function

        // bind the showSearch function to the change event of all inputs
        $('#searchForm').on('change', 'input', showSearch);

    });
</script> 
```

举个简单的例子`<form>`-**编辑：**删除内联事件绑定

```
<form id="searchForm">
    <input type="text" name="one" value="one"/>
    <input text="text" name="two" value="two"/>
</form> 
```

`result.php`这将使用查询字符串执行 HTTP GET`?one=one&two=two`

**编辑：**如果您不想使用 jQuery，请为开发跨浏览器 XMLHTTPRequest 代码的问题做好准备！如果您真的想保留您的代码，您唯一需要更改的*部分*是`<input>`收集`<form>`. 你可以通过使用 JavaScript 来做到这一点

```
document.getElementsByTagName('input'); 
```

这将为您提供一个`<input>`s 数组，然后循环遍历，从每个数组中收集名称和值：

```
var inputs = document.getElementsByTagName('input');
var querystring = '?';
for (i = 0; i < inputs.length; i++) {
    querystring += inputs[i].name + '=' + inputs[i].value + '&';
}

// now remove the last '&' from querystring (or do the above loop differently) 
```

如您所见，需要开发、测试和可能存在错误的代码更多，这就是为什么我建议使用简单的 jQuery[`$.serialize()`](http://api.jquery.com/serialize/)函数 :-)

# java - 停止执行方法以转移到下一个方法

> ID：15025603
> 
> 赞同：0
> 
> 时间：2013-02-22T13:42:49.133
> 
> 标签：java, arrays, if-statement

对这个有点困惑，所以我想我会发布。对不起，如果我的标题不清楚，对 java 很陌生，不知道如何解释。无论如何，到目前为止，这是我的代码集（我猜的问题位）

```
int currentImageIndex = 0; // Assuming [0] is your first image.
int[] nextImageList = { 2, 4, 5, 4, 5, 4, 5, 0, 1 };

public void nekoRun() {
    moveIn();
    scratch();
    moveOut();

private void moveIn() {
    for (int i = 0; i < getWidth()/2; i+=10) {
        xPos = i;
        // swap images
        if (currentImage == nekoPics[0]) 
            currentImage = nekoPics[1];
        else 
            currentImage = nekoPics[0];
        repaint();
        pause(150);

private void scratch() {
    for (int i = xPos; i < getWidth();) {
        xPos = i;

        // Swap images.
        currentImageIndex = nextImageList[currentImageIndex];
        currentImage = nekoPics[currentImageIndex];

            repaint();
            pause(150);
        }
}

private void moveOut() {
    for (int i = xPos; i < getWidth(); i+=10) {
        xPos = i;
        // swap images
        if (currentImage == nekoPics[0]) 
            currentImage = nekoPics[1];

        else 
            currentImage = nekoPics[0];
        repaint();
        pause(150);
    }   
} 
```

所以基本上会发生什么（这不仅仅是“多汁的部分”的所有代码，一只猫会跑过屏幕然后坐下来，它应该抓两次，我得到了一些关于数组的帮助，因为我只是使用了一个整体一堆 else if 语句，我知道那是多余的。猫会跑到中心，它会抓挠，并不断抓挠，出于明显的原因，我只是对如何让它移动感到困惑到 moveOut 方法上，而不是一直循环从头开始。对不起，如果这有点不清楚，我对此很陌生，所以请多多包涵。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:47:19.830

你的问题被称为无限循环......而不是

```
private void scratch() {
    for (int i = xPos; i < getWidth();) { 
```

这应该读

```
private void scratch() {
    for (int i = 0; i < 2*<how many frames the scratching takes>; i++) {
    // **UPDATE** the xPos=i; shouldn't be here!!! 
```

解释：

看来您已经从 moveIn() 函数复制了循环定义，在这种情况下这似乎是合法的。发生了一些事情，直到它到达屏幕的中间。但是在`scratch()`函数中，精灵不会移动，它永远不会到达屏幕的尽头......所以 ozu 必须重复绘制步骤两次划痕跨度的帧数。您必须将该数字放入`<how many frames the scratching takes>`占位符中，它应该可以工作。

**编辑**`xPos=i`; _ 不应该出现在`scratch()`...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T13:47:13.973

您没有在 scratch() 中增加 i ，将 i++ 放在 for 语句的末尾。

```
for (int i = xPos; i < getWidth(); i++) 
```

# ms-access - 为什么我不能保存文件名大于 8 个字符的数据库？MS_Access VBA

> ID：15025607
> 
> 赞同：1
> 
> 时间：2013-02-22T13:43:22.097
> 
> 标签：ms-access, ms-access-2007, vba

我正在使用此代码，但由于某种原因，任何大于 8 个字符的名称都会被截断：

```
Dim SaveName As String
Dim CurrentDate As Date

CurrentDate = Now

SaveName = InputBox("Save Database as..", "Save as..", CurrentDate)

DoCmd.TransferDatabase _
acExport, _
"dBase IV", _
"C:\Data\PLC_MOBZ\Test\export", _
acTable, _
"DB_Total", _
SaveName, _
False 
```

正如您所理解的，即使没有输入任何内容，默认名称也会是：

```
"22-2-2013 14:42:44" 
```

需要超过 8 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:52:47.933

这是一个 dbase 标准。“dir”或“folder”是数据库名称，里面的文件是表。因此，您不能也不应该在 dBase 格式之外创建表。

如果您创建其他任何东西，那么这些 dBase 程序将无法读取或找到反过来代表表的文件。

所以文件夹名和文件名都需要保持 8.3 格式，并且也不能包含空格。所以这不是微软的问题，而是一个 dBase 标准。

您当然可以通过在创建文件后重新命名文件来打破此规则。您可以在 Access 之外执行此操作，或使用 VBA“名称”命令

例如：

```
Name  "oldFileName" as  "newFileName" 
```

# deployment - Vagrant、Chef 和 veewee 盒子的配置错误

> ID：15025610
> 
> 赞同：1
> 
> 时间：2013-02-22T13:43:28.370
> 
> 标签：deployment, rubygems, chef-infra, vagrant

我正在尝试使用**PHP构建一个***Ubuntu 12.04.2 amd64 精确*框。环顾四周，我发现了我想用作[起点](https://github.com/simshaun/symfony-vagrant)的这个存储库，尝试一切正常，但我需要用 64 位的基础盒更改。

 **[因此，我使用veewee](https://github.com/jedi4ever/veewee)创建了一个新盒子：

```
veewee vbox define 'web-php54-precise' 'ubuntu-12.04.2-server-amd64'
veewee vbox build 'web-php54-precise'
veewee vbox export 'web-php54-precise' 
```

克隆源存储库：

```
git clone --recursive git://github.com/simshaun/symfony-vagrant.git
cd symfony-vagrant/vagrant 
```

我更改了`Vagrantfile`, 中的行，以便使用我的新框：

```
config.vm.box = "web-php54-precise"
config.vm.box_url = "" 
```

但是运行时我在**chef-solo**部署`vagrant up`期间遇到了一个致命错误。我试图改变但没有成功。我认为供应商无法识别该文件，因此结果未定义。**`require_recipe``include_recipe``networking_basic/attributes/default.rb``node['networking']['packages']`**

 **请注意，将相同的配方直接添加到*Vagrantfile*可以正常工作：

```
config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = "cookbooks"
    # chef.add_recipe "networking_basic" <= this works
    chef.add_recipe "vagrant_main"
    # cut #
end 
```

我是否错过了使用 veewee 配置基本框的东西？ **一些想法？**谢谢。

这是日志：

```
 vagrant git:(master) ✗ vagrant up
[default] Importing base box 'web-php54-precise'...
[default] Matching MAC address for NAT networking...
[default] Clearing any previously set forwarded ports...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] -- 80 => 8080 (adapter 1)
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Available bridged network interfaces:
1) en0: Ethernet
2) en1: Wi-Fi (AirPort)
3) p2p0
What interface should the network bridge to? 1
[default] Preparing network interfaces based on configuration...
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Configuring and enabling network interfaces...
[default] Mounting shared folders...
[default] -- v-root: /vagrant
[default] -- project1: /home/vagrant/web-app
[default] -- v-csc-1: /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] Running provisioner: Vagrant::Provisioners::ChefSolo...
[default] Generating chef JSON and uploading...
[default] Running chef-solo...
stdin: is not a tty
[2013-02-22T13:10:02+00:00] INFO: *** Chef 11.4.0 ***
[2013-02-22T13:10:03+00:00] INFO: Setting the run_list to ["recipe[vagrant_main]"] from JSON
[2013-02-22T13:10:03+00:00] INFO: Run List is [recipe[vagrant_main]]
[2013-02-22T13:10:03+00:00] INFO: Run List expands to [vagrant_main]
[2013-02-22T13:10:03+00:00] INFO: Starting Chef Run for web-php54-precise
[2013-02-22T13:10:03+00:00] INFO: Running start handlers
[2013-02-22T13:10:03+00:00] INFO: Start handlers complete.
[2013-02-22T13:10:03+00:00] WARN: require_recipe is deprecated and will be removed in a future release, please use include_recipe
[2013-02-22T13:10:03+00:00] WARN: require_recipe is deprecated and will be removed in a future release, please use include_recipe

================================================================================

Recipe Compile Error in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/vagrant_main/recipes/default.rb

================================================================================

NoMethodError

-------------

undefined method `[]' for nil:NilClass

Cookbook Trace:
---------------
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/networking_basic/recipes/default.rb:7:in `from_file'
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/vagrant_main/recipes/default.rb:10:in `from_file'

Relevant File Content:
----------------------
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/networking_basic/recipes/default.rb:

  1:  #
  2:  # Cookbook Name:: networking_basic
  3:  # Recipe:: default
  4:  #
  5:  #
  6:
  7>> node['networking']['packages'].each do |netpkg|
  8:    package netpkg
  9:  end
 10:

[2013-02-22T13:10:03+00:00] ERROR: Running exception handlers
[2013-02-22T13:10:03+00:00] ERROR: Exception handlers complete
[2013-02-22T13:10:03+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-02-22T13:10:03+00:00] FATAL: NoMethodError: undefined method `[]' for nil:NilClass
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:43:35.497

你的假设是正确的，node['networking'] 是 nil，所以它不能有 ['packages'] 子属性。

潜在的问题是 vagrant_main 食谱正在执行“include_recipe”，但尚未加载定义 node['networking']['packages'] 的networking_basic 食谱的属性文件。

在 Chef 10 及更早的版本中，Chef 没有[以确定的顺序加载食谱组件](http://tickets.opscode.com/browse/CHEF-2903)。一般假设是运行列表顺序，因为这是加载配方的顺序。所以 Chef 现在从版本 11 开始执行此操作。

但是，在这种情况下，运行列表没有networking_basic 食谱，vagrant_main 包含它。为了确保组件已加载，需要依赖于我们正在使用的说明书。要解决此问题，请创建一个包含以下内容的 vagrant_main/metadata.rb 文件：

```
name "vagrant_main"
depends "apache2"
depends "apt"
depends "mysql"
depends "networking_basic"
depends "php"
depends "xdebug" 
```****

# java - XMPP - Facebook - 我的客户端实现如何接收其他客户端实现发送的消息？

> ID：15025615
> 
> 赞同：0
> 
> 时间：2013-02-22T13:43:49.947
> 
> 标签：java, facebook, xmpp, smack, facebook-chat

我已经实现了一个使用 Smack API 连接的 facebook 聊天客户端。目前，主要功能运行良好。我发送、接收消息、接收打字通知......但我有一个问题。如果我正在使用我的客户端与某人交谈，我会在 facebook 的聊天中收到我发送给联系人的消息。但是，如果通过 facebook 的聊天向联系人发送消息，我的客户不会收到该消息。如果联系人回答我，我会收到他的消息，但对话会变得不完整，因为它只显示联系人发送的消息，但不会显示我在另一个 XMPP 客户端中发送的消息。

由于 facebook 显示了我的客户发送的消息，我认为也可以这样做。我真的是 XMPP 的新手，我需要一些帮助来弄清楚我该怎么做。

我的代码现在看起来像这样：

接收消息：

```
connection.getChatManager().addChatListener(
    new ChatManagerListener(){

        @Override
        void chatCreated(Chat chat, boolean createdLocally) {
            if(!createdLocally){
                chat.addMessageListener(messageListener)
            }
        }
    }
) 
```

消息侦听器只是通过推送将消息传递给我的 Javascript 客户端。

发送消息：

```
public boolean sendMessage(String jid, String message){
    FacebookContact contact = mapJIDContact.get(jid)

    try{
        if (contact != null && (connection != null) && (connection.isConnected())) {
            ChatManager chatManager = connection.getChatManager();
            if(contact.chat == null){
                contact.chat = chatManager.createChat(jid, messageListener);
            }
            contact.chat.sendMessage(message);
            return true
        }
        return false
    }
    catch (XMPPException e){
        return false
    }
} 
```

FacebookContact 是我创建的一个类。如果已经打开，它会存储一些联系信息和聊天。

编辑：

我发现我想要的这个功能是由这个 XMPP 扩展提供的：http: [//xmpp.org/extensions/xep-0280.html](http://xmpp.org/extensions/xep-0280.html)。我正在尝试查找 facebook 聊天是否实现了此扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:08:28.687

如果您发送 IQ 以启用该功能，服务器将回复 <feature-not-implemented /> 错误 IQ，[此处](http://xmpp.org/extensions/xep-0030.html#info-basic)指定的意思是它不支持 XEP 0280。我刚刚通过 Audium XML 控制台检查了自己。

智商：

```
<iq xmlns='jabber:client'
from='my.facebook.username@chat.facebook.com/Mac-Pro-di-Michele_65563c5f_4D689E59FB8A5' 
to='chat.facebook.com'
type='set'
id='enable1'>
  <enable xmlns='urn:xmpp:carbons:2'/>
</iq> 
```

回复：

```
<iq xmlns='jabber:client'
from='chat.facebook.com'
to='my.facebook.username@chat.facebook.com/Mac-Pro-di-Michele_65563c5f_4D689E59FB8A5' type='error'
id='enable1'>
  <enable xmlns='urn:xmpp:carbons:2'/>
  <error code='501' type='cancel'>
    <feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq> 
```

# javascript - Ember.js 使用已经存在的子模型提交父模型

> ID：15025618
> 
> 赞同：3
> 
> 时间：2013-02-22T13:43:59.070
> 
> 标签：javascript, ember.js, ember-data

干杯! 例如我有三个模型：

```
App.Foo = DS.Model.extend({
  bars: DS.hasMany('App.Bar', {embedded:'always'}),
  bazes: DS.hasMany('App.Baz', {embedded:'always'})
});

App.Bar = DS.Model.extend({
  foo: DS.belongsTo('App.Foo')
});

App.Baz = DS.Model.extend({
  foo: DS.belongsTo('App.Foo)
}); 
```

以及像这样的适配器映射：

```
App.RESTSerializer = DS.RESTSerializer.extend({
  init: function() {
    this._super();

    this.map('App.Foo', {
      bars:{embedded: 'always'},
      bazes:{embedded: 'always'}
    })
  }
}); 
```

我首先在单独的事务中保存子记录（[github.com/emberjs/data/pull/440](http://github.com/emberjs/data/pull/440)）：

```
barTransaction = App.store.transaction();
bar = barTransaction.createRecord(App.Bar);

//later
bazTransaction = App.store.transaction();
baz = bazTransaction.createRecord(App.Baz);

//later
fooTransaction = App.store.transaction();
foo = fooTransaction.createRecord(App.Foo);

//later
foo.get('bars').addObject(bar);
foo.get('bazes').addObject(baz);
fooTransaction.commit(); 
```

我只想知道是否可以通过一个 POST 请求保存父记录和所有子记录？现在它为每个子记录分别创建一个 POST 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:31:21.143

我相信您的问题在于映射嵌入式记录的过时方式。这曾经发生在序列化程序中，但现在发生在适配器上的 map() 上......

您可以在此处查看集成测试：[https ://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_saving_test.js#L50](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_saving_test.js#L50)

我认为这些方面的东西会起作用：

```
App.Foo = DS.Model.extend({
  bars: DS.hasMany('App.Bar'),
  bazes: DS.hasMany('App.Baz')
});

App.Bar = DS.Model.extend({
  foo: DS.belongsTo('App.Foo')
});

App.Baz = DS.Model.extend({
  foo: DS.belongsTo('App.Foo')
});

App.Adapter = DS.RESTAdapter.extend({..configs..});

App.Adapter.map('App.Foo', {
  bars:{embedded: 'always'},
  bazes:{embedded: 'always'}
}) 
```

这应该`POST`在 api 处：`api.com/foo`并包括`bars`和`bazes`

# memory-pool - 可变大小缓冲区的内存池使用情况（boost :: pool）？

> ID：15025619
> 
> 赞同：2
> 
> 时间：2013-02-22T13:44:03.917
> 
> 标签：memory-pool, boost-pool

我当前项目的瓶颈是堆分配......分析表明一个关键线程在`new`操作员中花费的时间大约为 50%。

应用程序不能在这里使用堆栈内存，需要分配大量的一个中央作业结构——自定义作业/缓冲区实现：小而短，但大小可变。该对象本身就是堆内存`std::shared_ptr`/`std::weak_ptr`对象，并带有经典的 C-Array ( `char*`) 有效负载。

根据不同部分的运行时配置和工作负载，可能会创建 300k-500k 对象并同时使用（但这通常不会发生）。由于它的 x64 应用程序内存碎片并不是什么大问题（但当它也针对 x86 时可能会出现）。

为了提高速度和数据包吞吐量，并在未来节省内存碎片，我正在考虑使用一些内存管理池，这导致我使用`boost::pool`.

1.  几乎所有示例都使用固定大小的对象......但我不确定如何处理可变长度的有效负载？可以使用 boost::pool 创建像这样的*简化*对象，但我不确定如何处理有效负载？它完全可以使用`boost:pool`吗？

    ```
    class job {
    public:
        static std::shared_ptr<job> newObj();

    private:
        delegate_t call;
        args_t * args;
        unsigned char * payload;
        size_t payload_size;
    } 
    ```

2.  通常，当对 shared_ptr 的所有引用都超出范围时，对象会被销毁，我不想将 shared-ptr 更改回 c-ptr。对象的延迟销毁也应该可以提高性能，并且从我读到的内容应该可以更好地使用 boost:pool。我还没有发现池是否支持与 smart_ptr 的交互？另一种但古怪的方法是在创建时将对 shared_ptr 的引用与池一起保存并以块的形式释放它们。

有没有人有这两者的经验？boost:pool 使用可变大小的对象和智能指针交互？

谢谢！

# php - Codeigniter如何在提交后保持价值

> ID：15025620
> 
> 赞同：2
> 
> 时间：2013-02-22T13:44:03.917
> 
> 标签：php, forms, codeigniter, validation

我有一个可以正常工作的表单，但是当我提交表单时，这些字段仅在我刷新浏览器后才会更新。如何在不刷新浏览器的情况下自动保留字段值。

这是我的代码：

**控制器**

```
<?php

function input($account_id = '', $platform = '')
{

    if ($account_id > '') {
        $query = $this->db->get_where('db_accounts', array('account_id' => $account_id));
        if (isset($query))
            if ($query->num_rows() > '') {
                $row = $query->row_array();
            }
        //declare variables
        $data['name'] = '';
        $data['account_id'] = '';
        $data['platform'] = '';
        $data['status'] = '';
        $data['location_city'] = '';
        $data['location_country'] = '';
        $data['region'] = '';
        $data['type'] = '';

        //pass field data
        $data['fname']['value'] = $row['name'];
        $data['faccount_id']['value'] = $row['account_id'];
        $data['fplatform']['value'] = $row['platform'];
        $data['fstatus']['value'] = $row['status'];
        $data['flocation_city']['value'] = $row['location_city'];
        $data['flocation_country']['value'] = $row['location_country'];
        $data['fregion']['value'] = $row['region'];
        $data['ftype']['value'] = $row['type'];
    }

    if (isset($account_id)) {
        if ($this->input->post('submit')) {
            if ($this->input->post('account_id')) {
                $this->dashboard_model->entry_update();

                $data['message'] = '- update complete...';
            } else {
                $data['message'] = 'There was an error, update not complete.';
            }
        }
        //echo $name;
        $data['account'] = $this->dashboard_model->get_account($account_id, $platform);
        $this->load->view('manage/input', $data);
    }
}
?> 
```

**看法**

```
<?php
$hidden = array(
    'account_id' => $faccount_id['value'],
    'platform' => $fplatform['value']
);
//form for Edit
echo '<form method="post" accept-charset="utf-8">';
echo form_hidden($hidden);
?>
<a href="/platform/<?php echo $fplatform['value'] . '/account/' . $faccount_id['value']; ?>">Return to Account</a>

<?php
//Platform
echo '<br><br><span  font-weight:bold"><font  color="#C40909">' . $fplatform['value'] . '</font>';
if (isset($message)) {
    echo '<font color=#C40909> ' . $message . '</font></span>';
};
//Header Name
echo '<h1 class="header"><span class="title">' . $fname['value'] . '</span></h1><br>';
//Form Name 
echo '<b> Name</b>' . form_input('name', set_value('name', $fname['value']));
//Form Platform 
echo '<b> Platform</b>' . form_input('platform', $fplatform['value']);

//Form Dropdown Status
$status_options = $this->lang->line('status');
echo form_label('<b> Status</b>', 'status');
echo form_dropdown('status', $status_options, $fstatus, 'style=width:313px');

//Form Location City 
echo '<b> Location: City</b>' . form_input('location_city', set_value('location_city', $flocation_city['value']));

//Form Location Country  
echo '<b> Location: Country</b>' . form_input('location_country', set_value('location_country', $flocation_country['value']));

//Form Region 
$region_options = $this->lang->line('region');
echo form_label('<b> Region</b>', 'region');
echo form_dropdown('region', $region_options, $fregion, 'style=width:313px');
$data = array('name' => 'submit', 'value' => 'Update Account', 'style' => 'width:313px');
echo form_submit($data);
echo form_close();
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:50:01.407

使用 CodeIgniter 表单验证[set_value](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#repopulatingform)。

它肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:31:06.017

在此处添加了 form_validation：

```
if(isset($account_id)){
    $this->form_validation->set_rules('account_id', 'AAccount ID', 'trim|required');
    $this->form_validation->set_rules('name', 'Name', 'trim|required');
    if($this->form_validation->run()){
if($this->input->post('submit')){
//if($this->input->post('account_id')){
 $this->dashboard_model->entry_update();

$data['message'] = '- update complete...';
      }else{
        $data['message'] = 'There was an error, update not complete.';
      }
}
//echo $name;
    $data['account'] = $this->dashboard_model->get_account($account_id,$platform);
    $this->load->view('manage/input',$data);    
}

} 
```

参考这里：以我的形式

```
 //Form Name 
echo form_error('name'); 
echo '<b> Name</b>'.form_input('name', set_value('name', $fname['value']) ); 
```

# meteor - 如何设置 Meteor.js 登录按钮的样式？

> ID：15025621
> 
> 赞同：33
> 
> 时间：2013-02-22T13:44:12.087
> 
> 标签：meteor

文档指定使用模板`{{> loginButtons}}`来实现默认登录按钮。

将我自己的样式应用于此的最佳方法是什么？

*   重写一个新模板（这将如何完成？）
*   将样式添加到标记为我的 CSS 文件`!important`
*   其他？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-22T22:11:21.253

事实证明，可以使用这两种想法的组合。在深入研究[accounts-ui 包](http://github.com/meteor/meteor/tree/master/packages/accounts-ui)后，发现它只包含一个`.less`文件。实际模板包含在[accounts-ui-unstyled](http://github.com/meteor/meteor/tree/master/packages/accounts-ui-unstyled)`accounts-ui`中，添加到`meteor`项目时会自动包含该模板。

因此，可以按如下方式删除 CSS：

```
meteor remove accounts-ui
meteor add accounts-ui-unstyled 
```

然后留下[原始的 HTML](https://github.com/meteor/meteor/blob/master/packages/accounts-ui-unstyled/login_buttons.html)，可以根据您的选择对其进行样式设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-22T13:50:05.163

创建自己的模板肯定会给您更多的控制权。

您可以使用“模板”标签创建模板：

```
<template name="player">
  <div class="player {{selected}}">
    <span class="name">{{name}}</span>
    <span class="score">{{score}}</span>
    <span class="wins"> {{wins}} </span>
    <span class="losses"> {{loss}} </span>
  </div>

</template> 
```

**或者**您可以在登录按钮在网页上呈现后检查它们的“类”或“id”，使用 Chrome 上的“检查元素”，并将这些类用作 CSS 选择器以相应地设置它们的样式。

例如：

HTML：

```
//The login button has a class of loginButton
<button class="loginButton"> Login! </button> 
```

CSS：

```
#Then you can Have a style for the login button as:
.loginButton{
     width: 100px;
     background-color: cyan;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-22T13:50:49.160

查看此截屏视频[EventedMind - 自定义登录](http://www.eventedmind.com/posts/meteor-customizing-login)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-17T23:01:48.107

创建您自己的`html`模板，如下所示。根据您的口味设计。

`meteor add accounts-password accounts-ui`

```
 <template name="login">
                     <form class="login-form">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3>Login</h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email"  class="form-control" id="email" placeholder="Email address">
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" class="form-control" id="password" placeholder="password">
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button type="submit" class="btn btn-danger btn-lg">Login</button>
                            </div>
                        </div>
                    </form>
                </template> 
```

您现在可以`Meteor.loginWithPassword`像这样调用模板事件：

```
Template.login.events({
    'submit .login-form': function(e) {
        e.preventDefault();
        var email = e.target.email.value;
        var password = e.target.password.value;
      Meteor.loginWithPassword(email, password,function(error){
            if(error) {
                //do something if error occurred or 
            }else{
               FlowRouter.go('/');
            }
        });
     }
 }); 
```

您也可以创建另一个表格进行注册。

打电话`Accounts.createUser(object, callback);`

# entity-framework - 为什么我无法将实体框架迁移到初始状态？

> ID：15025622
> 
> 赞同：2
> 
> 时间：2013-02-22T13:44:13.683
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我已经从项目中删除了开发数据库和迁移文件夹。使用我的项目开发数据库运行单元测试时，会重新创建。我不明白为什么运行 update-database 会给我

```
PM> Update-Database
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Applying code-based migrations: [201302201840012_wieleDoWielu].
Applying code-based migration: 201302201840012_wieleDoWielu. 
```

为什么要记住迁移：201302201840012_wieleDoWielu ？我怎样才能删除它？存储在哪里？

最好的问候 普热梅斯瓦夫 Staniszewski

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T14:51:10.893

这是一个答案。请恢复迁移文件夹及其迁移文件（恢复到您的项目）。然后按照我的步骤 [http://pawel.sawicz.eu/entity-framework-reseting-migrations/](http://pawel.sawicz.eu/entity-framework-reseting-migrations/)

1) Update-Database -Targetmigration:0 - 这是关键！首先
2）清除表/迁移（您不必删除整个文件夹）
3）添加迁移初始化
4）更新数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T13:15:11.470

试试这些命令 Sqllocaldb.exe stop V11.0 Sqllocaldb.exe delete V11.0

这应该删除引用。在执行此操作之前，您可能必须注释掉一些更改，然后在执行迁移之前将更改重新恢复到模型中。

我是新手，所以希望我能理解你的问题，因为这听起来和我最近遇到的一样。

一个更持久的解决方案可能是将以下代码添加到您的 Globel 文件中，并将其替换为您需要的代码。这方面的文章也可以在下面的链接中找到：

```
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<PersonContext>()); 
```

[http://ilmatte.wordpress.com/2012/12/05/entity-framework-5-code-first-enabling-migrations-in-a-real-project/](http://ilmatte.wordpress.com/2012/12/05/entity-framework-5-code-first-enabling-migrations-in-a-real-project/)

# c# - 在 WinForm 应用程序中播放 MP3 文件

> ID：15025626
> 
> 赞同：56
> 
> 时间：2013-02-22T13:44:26.977
> 
> 标签：c#, .net, winforms, mp3

我正在开发一个`WinForm`应用程序。我想在用户单击按钮时播放 MP3 文件。

MP3 文件位于执行应用程序的计算机的文件系统中。
我用谷歌搜索了一段时间，我找到了有关该`System.Media.SoundPlayer`课程的信息。但我读过`SoundPlayer`该类只能用于播放 .wav 格式的文件。

哪些类可用于播放 .mp3 格式的文件？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-22T13:56:36.183

下面的链接提供了一个非常好的教程，关于使用 c# 从 windows 窗体播放 mp3 文件：

[http://www.daniweb.com/software-development/csharp/threads/292695/playing-mp3-in-c](http://www.daniweb.com/software-development/csharp/threads/292695/playing-mp3-in-c)

此链接将引导您进入一个主题，其中包含有关如何使用 Windows 窗体播放 mp3 歌曲的大量信息。它还包含许多其他项目，试图实现相同的目标：

[http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/3dbfb9a3-4e14-41d1-afbb-1790420706fe](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/3dbfb9a3-4e14-41d1-afbb-1790420706fe)

例如，将此代码用于 .mp3：

```
WMPLib.WindowsMediaPlayer wplayer = new WMPLib.WindowsMediaPlayer();

wplayer.URL = "My MP3 file.mp3";
wplayer.Controls.Play(); 
```

然后只放 wplayer.Controls.Play(); 在 Button_Click 事件中。

例如，将此代码用于 .wav：

```
System.Media.SoundPlayer player = new System.Media.SoundPlayer();

player.SoundLocation = "Sound.wav";
player.Play(); 
```

放播放器.Play(); 在 Button_Click 事件中，它将起作用。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-22T13:54:44.170

1）最简单的方法是使用[WMPLib](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562692%28v=vs.85%29.aspx)

```
WMPLib.WindowsMediaPlayer Player;

private void PlayFile(String url)
{
    Player = new WMPLib.WindowsMediaPlayer();
    Player.PlayStateChange += Player_PlayStateChange;
    Player.URL = url;
    Player.controls.play();
}

private void Player_PlayStateChange(int NewState)
{
    if ((WMPLib.WMPPlayState)NewState == WMPLib.WMPPlayState.wmppsStopped)
    {
        //Actions on stop
    }
} 
```

2）或者，您可以使用开源库[NAudio](https://github.com/naudio/NAudio)。它可以使用不同的方法播放 mp3 文件，实际上提供的不仅仅是播放文件。

这很简单

```
using NAudio;
using NAudio.Wave;

IWavePlayer waveOutDevice = new WaveOut();
AudioFileReader audioFileReader = new AudioFileReader("Hadouken! - Ugly.mp3");

waveOutDevice.Init(audioFileReader);
waveOutDevice.Play(); 
```

停车后别忘了丢弃

```
waveOutDevice.Stop();
audioFileReader.Dispose();
waveOutDevice.Dispose(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-07T16:54:44.447

1.  首先转到项目的属性
2.  点击添加参考
3.  在 COM 对象下为窗口媒体播放器添加库，然后在需要的位置键入代码

    资源：

    ```
     WMPLib.WindowsMediaPlayer wplayer = new WMPLib.WindowsMediaPlayer();

        wplayer.URL = @"C:\Users\Adil M\Documents\Visual Studio 2012\adil.mp3";
        wplayer.controls.play(); 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-24T06:20:50.483

您可以使用`mciSendString`API 播放 MP3 或 WAV 文件：

```
[DllImport("winmm.dll")]
public static extern uint mciSendString( 
    string lpstrCommand,
    StringBuilder lpstrReturnString,
    int uReturnLength,
    IntPtr hWndCallback
);

mciSendString(@"close temp_alias", null, 0, IntPtr.Zero);
mciSendString(@"open ""music.mp3"" alias temp_alias", null, 0, IntPtr.Zero);
mciSendString("play temp_alias repeat", null, 0, IntPtr.Zero); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T00:46:35.223

您可以使用旧的 DirectShow 功能来做到这一点。

这个[答案](https://stackoverflow.com/a/48629950/823321)教你如何创建`QuartzTypeLib.dll`：

1.  运行 tlbimp 工具（在您的情况下路径会不同）：

2.  跑`TlbImp.exe %windir%\system32\quartz.dll /out:QuartzTypeLib.dll`

或者，[这个项目](https://www.codeproject.com/Articles/2632/DirectShow-MediaPlayer-in-C)包含库，它与步骤**1.**和**2**`interop.QuartzTypeLib.dll`基本相同。以下步骤教如何使用这个库：

 ****3.  添加生成的 QuartzTypeLib.dll 作为项目的 COM 引用（在“解决方案资源管理器”中的项目名称上单击鼠标右键，然后选择“添加”菜单项，然后选择“引用”）

4.  在您的项目中，展开“参考”，找到 QuartzTypeLib 参考。右键单击它并选择属性，然后将“嵌入互操作类型”更改为 false。（否则，您将无法在项目中使用 FilgraphManager 类（可能还有其他几个））。

5.  在项目设置中，在构建选项卡中，我必须禁用首选 32 位标志，否则我会得到这个异常：`System.Runtime.InteropServices.COMException: Exception from HRESULT: 0x80040266`

6.  使用这个类来播放你最喜欢的**MP3**文件：

    ```
    using QuartzTypeLib;

    public sealed class DirectShowPlayer
    {
        private FilgraphManager FilterGraph;

        public void Play(string path)
        {
            FilgraphManager = new FilgraphManager();
            FilterGraph.RenderFile(path);
            FilterGraph.Run();
        }

        public void Stop()
        {
            FilterGraph?.Stop();
        }
    } 
    ```

**PS：** `TlbImp.exe`可以在这里找到： `"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin"`，或 `"C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.7.2 Tools"`

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-09-18T00:08:53.603

重构：

```
new WindowsMediaPlayer() { URL = "MyMusic.mp3" }.controls.play(); 
```****

# mvvm - 将视图绑定到我的主窗口只显示类型

> ID：15025627
> 
> 赞同：0
> 
> 时间：2013-02-22T13:44:27.187
> 
> 标签：mvvm

我正在尝试将视图绑定到我的 ContentControl。目前，它只显示类型（例如 NameSpace.ViewModel.MainWindowViewModel）

尽管我会指出，但我不确定我是否正确地处理了这个问题。

我的简单设置是我有一个视图 (UserControl)，它是空的，而不是单个控件（仅用于视觉效果）。

我的 MainWindow.xaml

```
<Window x:Class="DelegateGoodExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModel="clr-namespace:DelegateGoodExample.ViewModel"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <viewModel:MainWindowViewModel x:Key="Vm" />
    </Window.Resources>

    <Grid>
        <ContentControl Height="147" Margin="53,132,60,0" 
                        VerticalAlignment="Top" 
                        Content="{StaticResource Vm}" />
    </Grid>

</Window> 
```

（后面的代码中没有任何内容）。

我的 MainWindowViewModel.cs

```
namespace DelegateGoodExample.ViewModel
{
    public class MainWindowViewModel
    {
        private object _currentView;
        public object CurrentView 
        { 
            get { return new View.QuickView(); } 
            set { _currentView = value; } 
        }
    }
} 
```

所以，我的问题是，

1.  我是否必须在这种情况下设置数据上下文（即使我添加它，结果仍然存在）？
2.  我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:48:01.470

您将*视图模型*放在 中`ContentControl`，而不是视图中。由于您的 viewmodel 类不是 a[`UIElement`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.aspx)并且无法`DataTemplate`确定它应该如何呈现，所以显示的只是它的`.ToString()`表示。

立即修复将是：

```
<ContentControl Height="147" Margin="53,132,60,0" 
                VerticalAlignment="Top" 
                Content="{Binding Source={StaticResource Vm}, Path=View}" /> 
```

但是，不要以这种方式做事，您应该将视图`Grid`直接放在内部，并且视图模型不应该对视图有任何了解。

# java - 在运行程序时写入值

> ID：15025630
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:44:43.343
> 
> 标签：java

我想将一些数据写入 .txt 文件。

```
 public void writeToFile(String filename) {

    try {

        //Construct the BufferedWriter object
        bufferedWriter = new BufferedWriter(new FileWriter(filename));

        //Start writing to the output stream
        bufferedWriter.write("first value : " + firstValue);
        bufferedWriter.newLine();

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        //Close the BufferedWriter
        try {

           if (bufferedWriter != null) {
               bufferedWriter.flush();
                bufferedWriter.close();
            }
        } catch (IOException ex) {
           ex.printStackTrace();
        }
    }
} 
```

我使用这段代码，但问题是它会不断覆盖第一行（我认为）。有谁知道我该如何解决这个问题？我从串口读取everey 50ms 的值，不想写这个。（每个值都在单独的一行）

它应该写值，直到我关闭程序。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:47:03.543

尝试换行：

```
bufferedWriter = new BufferedWriter(new FileWriter(filename)); 
```

至：

```
bufferedWriter = new BufferedWriter(new FileWriter(filename, true)); 
```

我将以追加模式打开 FileWrite，它会在文件中添加内容，而不是覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:47:09.403

像这样打开作家：

```
bufferedWriter = new BufferedWriter(new FileWriter(filename, true)); 
```

那应该打开文件进行附加。请参阅[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)。

# ruby - 正则表达式降价标头

> ID：15025631
> 
> 赞同：0
> 
> 时间：2013-02-22T13:44:49.067
> 
> 标签：ruby, regex, markdown

我正在尝试创建一个检查多个条件的常规（ruby）表达式。我使用这个正则表达式来替换我的对象的内容。我的正则表达式接近完成，除了我在降价方面面临的两个问题。

首先，标题给我带来了麻烦。例如，如果“Hi”在标题中，我不想将“Hi”替换为“Hello”。

```
Hi John <== # should not change
================== 
```

> 文字：嗨，你好吗？<== # 应该是：你好，你好吗？替换后

或者：

```
#### Hi Peter <== # should not change 
```

> 文字：嗨，你好吗？<== # 应该是：你好，你好吗？替换后

**问题**：如何在我的正则表达式中转义 markdown 标头？我尝试过否定的后向和前瞻断言，但无济于事。

我的第二个问题应该很容易，但不知何故我正在挣扎。如果单词是斜体“ *hi* ”，我想查找并替换它们，而不更改下划线。我可以用这个正则表达式找到这个词：

```
\b[_]*hi[_]*\b 
```

**问题2**：但如果我要替换它，我也会更改下划线。有没有办法只检测单词本身并替换它，同时仍然使用单词边界？

**代码示例**

```
@website.autolinks.all.each do |autolink|
  autolink.name #for example returns "Iphone5"
  autolink.url  #for example returns "http://www.apple.com"

  regex = /\b(?<!##\s)(?<![\d.\[])([_]*)#{autolink.name}([_]*)(?![\d'"<\/a>])\b/

  if @permalink.blog_entry.content.match(regex)
    @permalink.blog_entry.content.gsub!(regex, "[#{autolink.name}](#  {autolink.url})")  
  end
end 
```

示例文本

```
Iphone5 
============== 
```

> Iphone5 是目前最好的手机，尽管三星的人可能认为，或者可能只希望他们的三星 Galaxy S3 更好。

```
#### Samsung Galaxy S3? 
```

> 是的，这是最新款三星手机的名称。

这将产生带有 HTML 标记的文本，但是当我使用正则表达式时，我的内容使用 Markdown 语法（在降价转换器之前使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:17:43.437

正则表达式在做一件明确的事情时效果最好。如果您有多个条件，您的代码通常应该通过将处理分成多个步骤来反映这一点。

在这种情况下，您有两个明确的步骤：

1.  使用简单的正则表达式或其他逻辑跳过消息的标题部分。
2.  一旦你知道你在内容中，使用另一个正则表达式来处理内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:18:06.240

我找到了一个解决方案：

```
regex = /(?<!##\s)(?<![\d.\[a-z])#{autolink.name}(?![\d'"a-z<\/a>])(?!.*\n(==|--))/i

    if @permalink.blog_entry.content.match(regex) 
      @permalink.blog_entry.content.gsub!(regex, "[\\0](#{autolink.url})")
    end 
```

# .net - 解析 XML 时出现 DTD 下载错误

> ID：15025632
> 
> 赞同：1
> 
> 时间：2013-02-22T13:44:53.827
> 
> 标签：.net, xml, vb.net, xml-parsing

我正在做`vb.net` 项目，我已经创建了动态新闻 tiker。

代码 ：

```
Imports System.ServiceModel.Syndication
Imports System.Xml

Partial Class DynamicTicker
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        'Get the latest syndicated content from my Twitter feed!
        Dim myTweets As SyndicationFeed = SyndicationFeed.Load(XmlReader.Create("https://twitter.com/ashuthinks"))

        'Bind myTweets to the ListView
        lvTweets.DataSource = myTweets.Items
        lvTweets.DataBind()
    End Sub

    Protected Function FormatSummary(ByVal summary As String) As String
        Const SummaryHeader As String = "ScottOnWriting: "

        'Remove the leading "ScottOnWriting: "
        If summary.StartsWith(SummaryHeader) Then
            Return summary.Substring(SummaryHeader.Length)
        End If
    End Function

    Protected Function FormatPubDate(ByVal pubDate As DateTime) As String
        Return pubDate.ToString("h:mm, MMM d")
    End Function

End Class 
```

但这给了我和以下错误：

> 出于安全原因，此 XML 文档中禁止使用 DTD。要启用 DTD 处理，请将 XmlReaderSettings 上的 DtdProcessing 属性设置为 Parse 并将设置传递给 XmlReader.Create 方法。

我应该在我的代码中在哪里提到设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T13:31:22.933

```
Dim settings As XmlReaderSettings = new XmlReaderSettings()
settings.DtdProcessing = DtdProcessing.Parse;
Dim myTweets As SyndicationFeed =     SyndicationFeed.Load(XmlReader.Create("https://twitter.com/ashuthinks"),settings) 
```

抱歉，如果我的语法不正确，请不要编写太多 VB.NET 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T06:39:17.880

```
Dim settings As New XmlReaderSettings
   settings.DtdProcessing = DtdProcessing.Parse
   settings.ValidationType = ValidationType.DTD
   Dim xmlR = XmlReader.Create(Currentfile, settings) 
```

# php - SPHINX 搜索引擎上的 enable_star 不起作用

> ID：15025633
> 
> 赞同：1
> 
> 时间：2013-02-22T13:44:56.180
> 
> 标签：php, mysql, sphinx

我使用 Sphinx v 0.9.9，我需要搜索一个`substring within a string`；

我启用了 start sintax，`enable_star = 1`我重新启动了整个系统，但仍然没有结果；

```
index job1
{
    source      = jobSource1
    path        = /home/sphinx/jobs/job1
    docinfo     = extern
    charset_type    = utf-8
    enable_star = 1
} 
```

我从这里阅读了文档：[sphinx start syntax](http://sphinxsearch.com/docs/current.html#conf-enable-star) and also [substring search](http://sphinxsearch.com/info/faq/#substring-search)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:00:54.307

您需要设置`min_prefix_len`并`min_infix_len`像文档中所说的那样，然后重新索引您的数据。

# android - 使用我的真实地图 api 时如何调试 android 应用程序？

> ID：15025635
> 
> 赞同：0
> 
> 时间：2013-02-22T13:45:10.630
> 
> 标签：android, google-maps

我开发了安卓应用。我生成了自己的密钥库并获得了发布应用程序的 api。一切都很好。但是当我尝试使用此地图 api 密钥调试我的应用程序时，在我开发它时，我看不到我的地图。如果我导出 apk 并将其部署到设备，一切都会再次正常工作。

在开发应用程序并对其进行调试以查看地图时，我应该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:49:55.420

您的调试密钥和生产密钥之间存在差异。如果您的 debug.keystore 没有与之关联的 API 密钥，您将看不到地图切片（或矢量图像）。

例如在 OSX 中... debug.keystore 在 ~/.android/

检查以确保您的 debug.keystore 设置也带有 API 密钥。

# azure - 对 Azure 网站上的服务器端包含使用 .html 而不是 .shtml

> ID：15025640
> 
> 赞同：0
> 
> 时间：2013-02-22T13:45:21.197
> 
> 标签：azure, ssi, azure-web-app-service

我想在 Azure 网站上启用 SSI，但使用 .html 而不是 .shtml。SSI 已启用，但在我的一生中，我找不到让它处理 .html 的方法。

在本地，我在 web.config 中添加了一个处理程序

```
<system.webServer>
    <handlers accessPolicy="Read, Script">
    <add name="ASPClassicHtml" path="*.html" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="%IIS_BIN%\asp.dll" resourceType="File" />
    </handlers>
</system.webServer> 
```

这很好用，但是当我上传到 azure 网站时，我收到以下错误；

```
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:00:00.510

目前还不可能，但 WAWS 上的 SSI 模块显然正在筹备中。 [http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/391a7918-00e8-49af-b2db-675980aebbd0](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/391a7918-00e8-49af-b2db-675980aebbd0)

# android - 自定义视图不绘制本身

> ID：15025643
> 
> 赞同：5
> 
> 时间：2013-02-22T13:45:29.337
> 
> 标签：android, android-layout, android-custom-view

我在这里阅读了有关此主题的不同问题，但我仍然找不到答案。出于任何原因，请随时关闭此问题。

我有一个简单的`Circle`类扩展`View`.

这个类的代码是：

```
public class ProgressCircle extends View {
    Paint mCirclePaint;
    float extRadius;
    float viewWidth, viewHeight;
    float centerX, centerY;

    public ProgressCircle(Context context, AttributeSet attrs) {
        super(context, attrs);
        setWillNotDraw(false);
        init();
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        float xpad = (float) getPaddingLeft() + getPaddingRight();
        float ypad = (float) getPaddingTop() + getPaddingBottom();
        float ww = (float)w - xpad; float hh = (float)h - ypad;
        extRadius = Math.min(ww, hh) / 2;

        viewWidth = this.getWidth();
        viewHeight = this.getHeight();
        centerX = viewWidth / 2; centerY = viewHeight / 2;

        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawCircle(centerX, centerY, extRadius, mCirclePaint);
        canvas.drawText("ciao", 0, 0, mCirclePaint);    
    }

    private void init() {
        mCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCirclePaint.setColor(0x666666);
        mCirclePaint.setStyle(Paint.Style.FILL_AND_STROKE);
    } 
```

我确认这个类中的每个方法都是在创建主要活动时调用的（通过使用 some `Log.d()`s）。我`<com.mypackage.Circle>`在我的主要活动中添加了一个元素，`LinearLayout`然后我添加了一个示例测试按钮。

我所取得的成果是显示按钮，而 my`Circle`没有显示，但按钮（在`LinearLayout`之后出现`Circle`）不是布局的第一个元素：这让我认为确实发生了某些事情，但没有绘制任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:38:45.607

这只是一个愚蠢的问题：颜色`mCirclePaint.setColor(0x666666)`是无效的。它与文件夹`mCirclePaint.setColor(Color.RED)`中定义的任何其他颜色一起使用。`res`

如果您需要指定颜色值，则必须包含透明度字节（否则它不是您指定的 32 位整数，而是 24 位）。所以 0x666666 是无效的，但是 0xff666666 是一个有效的颜色并且会绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:11:13.280

After reading the documentation([http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)):

> The Android framework will only call onDraw() as necessary. Each time that your application is prepared to be drawn, you must request your View be invalidated by calling invalidate(). This indicates that you'd like your View to be drawn and Android will then call your onDraw() method (though is not guaranteed that the callback will be instantaneous).

Also another thing worth checking is the dimensions you're drawing insure nothing is invalid like a height of 0 etc..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:24:18.777

我注意到您没有覆盖[View.onMeasure()](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)。

因为您没有覆盖此方法，所以`onsizeChanged()`可能会传递大小 0。您可以通过在`onSizechanged()`方法中放置断点或打印到 Logcat 来检查这一点。

# python - 如何在使用 QWaitCondition 的 QThread 中使用 QTimer？(pyside)

> ID：15025644
> 
> 赞同：2
> 
> 时间：2013-02-22T13:45:30.380
> 
> 标签：python, qt, pyside, qthread, qtimer

我正在使用 pyside 但（我认为）是一个通用的 Qt 问题。

我知道 QThread 实现调用 ._exec() 方法，所以我们应该在启动的 QThread 上有一个事件循环。这样我们就可以在那个线程上使用 QTimer（我已经做到了，而且效果很好）。我的问题是，当还使用 QWaitCondition 时，我希望有一个“消费者”线程，它有一个无限循环，等待在 QWaitCondition 上通知（来自生产者）。我遇到的问题是，通过这种设计，我无法在消费者线程中使用 QTimer。

这是我试图解释的场景片段：

```
from PySide import QtGui
from PySide import QtCore
import sys

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()

        self.button = QtGui.QPushButton(self)
        self.button.setText("Periodical")
        self.button.clicked.connect(self.periodical_call)

        self.thread = QtCore.QThread()
        self.worker = Worker()
        self.worker.moveToThread(self.thread)
        self.thread.started.connect(self.worker.loop)
        self.thread.start()

    def closeEvent(self, x):
        self.worker.stop()
        self.thread.quit()
        self.thread.wait()

    def periodical_call(self):
        self.worker.do_stuff("main window") # this works
        self.timer = QtCore.QTimer()
        self.timer.timeout.connect(self.do_stuff) # this also works
        self.timer.start(2000)

    def do_stuff(self):
        self.worker.do_stuff("timer main window")

class Worker(QtCore.QObject):
    def do_stuff_timer(self):
        do_stuff("timer worker")

    def do_stuff(self, origin):
        self.origin = origin
        self.wait.wakeOne()

    def stop(self):
        self._exit = True
        self.wait.wakeAll()

    def loop(self):
        self.wait = QtCore.QWaitCondition()
        self.mutex = QtCore.QMutex()
        self._exit = False
        while not self._exit:
            self.wait.wait(self.mutex)

            print "loop from %s" % (self.origin,)

            self.timer = QtCore.QTimer()
            self.timer.setSingleShot(True)
            self.timer.timeout.connect(self.do_stuff_timer)
            self.timer.start(1000) # <---- this doesn't work

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    frame = MainWindow()
    frame.show()
    sys.exit(app.exec_()) 
```

单击按钮后，我们将获得如下输出：

```
loop from main window                    
loop from timer main window
loop from timer main window
loop from timer main window
... 
```

这意味着在 loop() 方法中创建的 QTimer 永远不会被事件循环执行。

如果我将设计从 QWaitCondition 更改为 Signals（这是更好的设计恕我直言），QTimer 可以工作，但我想知道为什么在使用 QWaitCondition 时它们不工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T13:58:16.080

要在长时间运行的任务（又名连续循环）中处理事件，您需要调用[`QCoreApplication::processEvents()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents).

这实际上将遍历您线程的所有排队插槽。

信号（如果它们是 QueuedConnection 信号/插槽连接）也需要调用此函数以使其脱离当前线程并进入另一个线程。

* * *

对于 PySides，您需要调用[`PySide.QtCore.QCoreApplication.processEvents()`](http://srinikom.github.com/pyside-docs/PySide/QtCore/QCoreApplication.html#the-event-loop-and-event-handling)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T14:05:51.367

您的方法`loop`完全占用线程。它不会将控制权返回给事件循环。计时器将其事件发送到无法控制的事件循环。
IMO 你的诡计循环有问题。

解决它的一种方法是添加`QApplication.processEvents()`循环（不好的方法）。

我想你想要别的东西，这里是我的更正：

```
def loop(self):
    self.timer = QtCore.QTimer()
    self.timer.setSingleShot(False)
    self.timer.timeout.connect(self.do_stuff_timer)
    self.timer.start(1000)

def stop(self):
    self.timer.stop() 
```

这将每秒调用`do_stuff_timer`一次，直到您调用停止。

# c# - 属性或 get/set 方法对对象大小的影响

> ID：15025646
> 
> 赞同：6
> 
> 时间：2013-02-22T13:45:43.217
> 
> 标签：c#, memory-management, clr

就对象大小而言，如果公开的属性不代表状态而只是将其 getter 和 setter 调用委托给另一个实体，那么属性如何代替 Get/Set 方法影响对象大小？

例如，考虑以下类：

```
public class Person
{
   Address _address = new Address();

   public string AddressName
   {
      get{ return _address.Name; }
      set { _address.Name = value; }
   }

   public string GetAddressName(){ return _address.Name; }
   public void SetAddressName(string name){ _address.Name = name; }

}

public Address
{
    public string Name { get; set; }
} 
```

我猜当创建一个新的 Person 时，CLR 在确定要分配多少内存时会考虑 AddressName 属性的潜在大小。但是，如果我公开的只是 Get/Set AddressName 方法，则不会分配额外的内存来满足 AddressName 属性。因此，为了节省内存占用，在这种情况下最好使用 Get/Set 方法。但是，这不会对 Address 类的 Name 属性产生影响，因为正在保留状态。这个假设正确吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T13:47:45.543

*单个对象*的大小不受属性、方法、事件等数量的影响。它会影响类型元数据的大小和 JITted 代码 - 但不影响每个对象的大小。这*仅*受实例字段的影响。

> 我猜当创建一个新的 Person 时，CLR 在确定要分配多少内存时会考虑 AddressName 属性的潜在大小。

不，*它只*查看您的字段。您有一个字段 ( `_address`)，因此加上正常的对象开销是单个实例所需的所有内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T14:55:18.563

正如 Jon 已经回答的那样，对象实例的大小*仅*由其实例字段决定。但是，让我更详细一点。

一个对象实例*至少*与其字段大小的总和一样大。根据字段对齐约束和 CLR（公共语言运行时）布局字段的方式，可能需要考虑一些填充字节。对于引用类型，实例有两个额外的隐藏字段：同步块索引和类型引用。两者都是本机整数。在堆上，实例的最小大小为 12 字节（不管它们实际需要多少空间）。

以下面的类为例：

```
class X
{
    byte value1;
    string value2;
    int value3;
    long value4;
} 
```

在 32 位系统上， 的实例`X`可能需要 28 个字节：

*   同步块索引和类型引用的 2 乘以 4 个字节，
*   一个字节`byte`，
*   三个填充字节，对齐下一个字段，
*   对象引用的四个字节`string`，
*   另外四个字节`int`
*   和八个字节`long`，

如您所见，getter 和 setter、方法和构造函数不会占用每个对象实例中的空间。相反，有一个单独的对象（您知道它`Type`）维护方法列表（getter、setter 和构造函数也是方法）并包含该类型的静态字段。您可以根据需要创建任意多个类型的对象实例，但任何给定类型实例都只会有一个`Type`对象。

# php - shell_exec 一个 php 文件，里面有 mysql 不工作

> ID：15025650
> 
> 赞同：0
> 
> 时间：2013-02-22T13:46:04.387
> 
> 标签：php, mysql, background, exec, shell-exec

`shell_exec()`我的php 脚本中有一个简单的脚本。上传时运行此行：

```
shell_exec("php  process.php > /dev/null &"); 
```

它肯定会按预期在后台愉快地运行文件，但似乎无法在 process.php 中连接到 mysql

process.php 包括：

```
$db_host="localhost";
$db_name="databasename";
$dbusername="root";
$dbpassword="pass";

mysql_connect($db_host,$dbusername,$dbpassword);
mysql_select_db($db_name);
//then a mysql_query() 
```

似乎`mysql_connect()`失败了。如果我将所有这些复制并粘贴到第一个文件中代替我的`shell_exec()`，它就可以正常工作。

运行时是否有关于 'localhost' 作为 mysql 主机的内容`shell_exec()`？我在 Mac 上的 xampp 中测试 btw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:55:51.610

*   使用 PHP 二进制文件的完整路径`/usr/local/bin/php`而不是`php`
*   确保该`process.php`文件是可执行的
*   您可以使用 ip 代替主机名（*即： 127.0.0.1 而不是 localhost*）来稍微加快速度。
*   删除 /dev/null 部分，以便您可以看到错误和警告。

# search - Drupal - Search Api 中的服务器和索引 Drupal

> ID：15025651
> 
> 赞同：0
> 
> 时间：2013-02-22T13:46:06.203
> 
> 标签：search, drupal-7, drupal-modules

我花了 2 天时间在 Drupal 中学习“Seach Api Module”

```
 Somebody can explain for me , What is Purpose of "Server"
 and "Index" in "Search APi Module",
    Why we need to Create "Server" and "Index", and We Can I find them, Does 
"Index" create a xml file like Solr Server 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:34:59.323

**服务器**是执行搜索的对象以及保存索引定义的内容的位置。一个例子是[数据库搜索](http://drupal.org/project/search_api_db)或搜索 API Solr。

**索引**定义了哪些字段将被索引，以及与您的搜索相关的其他设置，例如构面。它与一种内容相关联，例如节点、分类术语或用户。

如果您安装了 Search API，您可以在 example.com/admin/config/search/search_api 找到设置。在那里您可以添加您的服务器并定义您的索引。![在此处输入图像描述](../Images/90bf487db046b4b22f61e396ffa39355.png)

# c# - 如何读取在 Windows 服务应用程序中创建的事件日志？

> ID：15025654
> 
> 赞同：1
> 
> 时间：2013-02-22T13:46:13.980
> 
> 标签：c#, .net, logging

我有一个 Windows 服务应用程序，我在其中创建了 eventLog 对象。

```
eventLog.Log = "MyLog"; // I'm not really sure what value to choose here
eventLog.Source = this.ServiceName; 
```

我安装应用程序并在 VS2012 中转到：

ServerExplorer -> 服务器 -> myDevice -> EventLogs -> MyLog

但我无法读取此文件。在我的应用程序中，我实现了 FileSystemWatcher，并在某些事件中将信息写入我的日志文件。我如何访问此信息（调试所需）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:58:18.393

去：

组件服务 > 事件查看器 > 应用程序和服务 > MyLog。

您可以通过在搜索区域的“开始”中键入组件服务或转到

**控制面板**，将视图更改为小图标选择**管理工具**。

**笔记：**

我认为您应该更改事件日志源和日志名称，如下所示

```
eventLog.Source = "ServiceNameSource";
eventLog.Log = "ServiceNameLog" 
```

**编辑：**

如果要使用自定义源，请执行以下操作：

*第一个选项：*您必须以管理员身份运行应用程序。因为否则您的应用程序将无法在安全日志中进行搜索，并且会抛出 SecurityException。

```
 EventLog testEventLog = this.EventLog;
        //Or if you are not using windows service, then:
        //EventLog testEventLog = new EventLog();
        testEventLog.Source = "TestServiceSource";
        testEventLog.Log = "TestServiceLog";

        //If log source doesn't exists create new one
        if (!System.Diagnostics.EventLog.SourceExists(testEventLog.Source))
        {
            System.Diagnostics.EventLog.CreateEventSource(testEventLog.Source, testEventLog.Log);
        } 
```

*第二种选择：*您不必以管理员身份运行您的应用程序。但它不会搜索安全日志。

```
 EventLog testEventLog = this.EventLog;
        //Or if you are not using windows service, then:
        //EventLog testEventLog = new EventLog();
        testEventLog.Source = "TestServiceSource";
        testEventLog.Log = "TestServiceLog";

        bool eventSourceExists = false;
        try
        {
            eventSourceExists = System.Diagnostics.EventLog.SourceExists(testEventLog.Source);
        }
        catch(System.Security.SecurityException)
        {           
            eventSourceExists = fasle;
        }

        //If log source doesn't exists create new one
        if (!eventSourceExists)
        {
            System.Diagnostics.EventLog.CreateEventSource(testEventLog.Source, testEventLog.Log);
        } 
```

# matlab - mex 编译错误：Matlab 数据类型和函数的预期表达式错误

> ID：15025656
> 
> 赞同：2
> 
> 时间：2013-02-22T13:46:25.747
> 
> 标签：matlab, error-handling, compiler-errors, mex

我在 linux 上开始使用 mex，所以我在下面开始这个小代码并尝试编译：

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{ 
    mxArray *inputArrayData;     // array for input array pointers  
} 
```

但我的编译结果是：

```
>> mex firsttry.c
firsttry.c: In function ‘mexFunction’:
firsttry.c:5: error: expected expression before '/' token 
```

我已经尝试过其他一些事情，似乎在涉及 matlab 数据和函数定义的所有行都会出现这个“预期表达式”错误。这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:06:04.843

您的文件具有扩展名`.c`，但您使用的是 C++ 样式的注释（以 引入`//`）。将文件重命名为`firsttry.cpp`然后调用

```
>> mex firsttry.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T03:33:22.243

实际上，标准的C89只有“ `/*...*/`”注释，mex编译器可以使用c编译器只支持C89。要解决这个问题，只需简单地将“ `//...`”注释替换为“ `/*...*/`”格式。

# android - 旋转（90 度）根 ViewGroup

> ID：15025658
> 
> 赞同：2
> 
> 时间：2013-02-22T13:46:29.523
> 
> 标签：android

我正在尝试创建基于 FrameLayout 的 ViewGroup，它可能会顺时针/逆时针旋转 90 度，它仍然可以正常工作

到目前为止，我的结果并不那么成功。到目前为止，它看起来像这样（旋转之前的左侧，之后；对不起鲜红色）

![旋转视图组](../Images/479be4bc7a029d5fe9e0184bc41e7956.png)

**活动**布局****

 **```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.example.TestProject.RotatedFrameLayout
        android:id="@+id/container"
        android:layout_centerInParent="true"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00F"/>

</RelativeLayout> 
```

**旋转框架布局**

```
public class RotatedFrameLayout extends FrameLayout {

    private boolean firstMeasure = true;

    public RotatedFrameLayout( Context context ) {
        super( context );
        init();
    }

    public RotatedFrameLayout( Context context, AttributeSet attrs ) {
        super( context, attrs );
        init();
    }

    public RotatedFrameLayout( Context context, AttributeSet attrs, int defStyle ) {
        super( context, attrs, defStyle );
        init();
    }

    private void init() {
        setRotation( 90f );
    }

    @Override
    protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec ) {
        super.onMeasure( heightMeasureSpec, widthMeasureSpec );
    }
} 
```

一些额外的信息

*   我不想使用动画旋转，因为按钮不可点击
*   我不想使用横向模式，因为屏幕上的横向导航按钮在 Nexus 7 上占用了很多空间（这是我试图扩大旋转的主要原因
*   似乎只有屏幕的左侧和右侧超出范围

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:04:56.113

这很难做到，我认为不值得去做。但如果你真的想这样做，你需要：

*   传递给 ViewGroup 正确的尺寸尺寸（交换宽度和高度）。
*   将 ViewGroup 画布旋转 90 度。此时一切都应该看起来不错，但触摸事件无法正常工作。
*   拦截所有触摸事件并交换 x 和 y。然后将固定事件传递给 ViewGroup。

我没有任何代码示例，也从未见过任何代码示例）这种方式应该可以工作，我们对片段进行了缩放转换，当片段缩放时我们必须修复触摸事件坐标。

我没有对它进行大量测试，但这有效：

```
public class RotatedFrameLayout extends FrameLayout {

public RotatedFrameLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public RotatedFrameLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public RotatedFrameLayout(Context context) {
    super(context);
    init();
}

@SuppressLint("NewApi") 
private void init() {
    setPivotX(0);
    setPivotY(0);
    setRotation(90f);
}

@SuppressLint("NewApi") 
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    setTranslationX(getMeasuredHeight());
}
} 
```

![例子](../Images/18492d962110f4fcff99200dc0ffedb6.png)**

# ios - PLUIPrivacyViewController 和访问照片库

> ID：15025662
> 
> 赞同：0
> 
> 时间：2013-02-22T13:46:58.477
> 
> 标签：ios, objective-c, uiimagepickercontroller, photo

当我要求使用 PhotoAlbum 中的照片显示 imagePicker 时，我崩溃了：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/9D75B5EC-6CC9-4306-B4A1-88C369FEEC6C/AlterGeo.app> (loaded)' with name 'PLUIPrivacyViewController''

- (void)showImagePicker {
   UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
   if ([imagePicker respondsToSelector:@selector(setAllowsEditing:)]) {
      [imagePicker setAllowsEditing:_editable];
   }
   [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
   [imagePicker setDelegate:self];
   [[self getNavigationController] presentModalViewController:imagePicker animated:YES];
   [imagePicker release];
}

- (UINavigationController *)getNavigationController {
   if (_delegate && [_delegate isKindOfClass:[UIViewController class]]) {
      return [(UIViewController *)_delegate navigationController];
   }   
   return nil;
} 
```

如果它第一次启动并且我的 ios 请求权限（UIAlertView 允许/拒绝）它会崩溃，但如果我已经授予权限（允许）它会正常工作。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:51:10.790

我找到了我的问题的解决方案。该代码不是我的，它是对项目有奇怪影响的外包人员.. 无论如何，他们要求 UiViewController 类别中的每个 ViewController xib 文件

```
- (NSString *)nibName {
   if ( ! [NSStringFromClass([self class]) isEqualToAnyString:[NSArray arrayWithObjects:
                                                               @"UIStatusBarViewController", 
                                                               @"UIZoomViewController",
                                                               @"PLUIPrivacyViewController",
                                                               nil]]) {
      return NSStringFromClass([self class]);
   }
   return nil;
} 
```

并且在 ios6.0 苹果中添加了 PLUIPrivacyViewController 没有自己的笔尖。我只是在异常中添加 PLUIPrivacyViewController 。当然更好的方法来制作控制器的白名单6因为项目真的很旧并且不会修改，但苹果可以添加一些其他控制器没有笔尖......但它有很多时间。

# javascript - 结合使用 JS 的 Prototype 和 Constructor 属性

> ID：15025667
> 
> 赞同：0
> 
> 时间：2013-02-22T13:47:04.687
> 
> 标签：javascript

据我了解，Prototype 对象是其他对象从中继承属性和方法的对象，基本上它包含一个构造函数属性，该属性引用或指向创建对象的构造函数。请考虑以下代码：

```
function Animal()
{
this.name="no name";
}

function Cat()
{
    Animal.Call(this);          //Please Explain
    this.mood="sleepy";
}

Cat.prototype=new Animal();     //Cat inheriting Animal?
Cat.prototype.constructor=Cat;  //Please Explain 
```

请清楚但详细地解释带有注释的代码行和反射的概念，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:14:00.057

> 目的是什么`Animal.call(this)`

这就像调用`super()`其他编程语言一样。`Animal`它在刚刚创建的新对象 ( ) 上调用父构造函数( `this`)。[MDN 文档`.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)中也对此进行了解释，关于.

在您的示例中，`Animal`分配`"no name"`给`this.name`. 所以在调用之后`Animal.call(this);`，`this`就会有一个`name`具有上述值的属性。

> 和`Cat.prototype.constructor=Cat;`

默认情况下，每个原型的`constructor`属性都指向它所属的函数。但是由于您用 覆盖了原型`Cat.prototype=new Animal();`，因此该`constructor`属性现在指向不同的函数。在这种情况下，因为`new Animal`返回一个继承自 的对象`Animal.prototype`，所以`Cat.prototype.constructor`将指向`Animal`。为了解决这个问题，我们`Cat`再次分配。

严格来说，这不是必需的，因为该`constructor`属性未在任何内部函数中使用。但是，如果您的代码依赖它，则必须将其设置为正确的值。

# c# - 单击另一个 td 但在同一个 tr 内的复选框后，如何在 td 内找到值？

> ID：15025668
> 
> 赞同：0
> 
> 时间：2013-02-22T13:47:08.180
> 
> 标签：c#, jquery, asp.net

我有一个有几列和几行的表。当我单击每行开头的复选框时，我想将特定单元格的值存储到变量中，并将其用于其他内容的比较。

我将如何从与单击的复选框位于同一行的单元格中获取数据？

此函数被单击的复选框的单击事件调用

```
 function checkLives
 if ($('.CarrierID:contains("2")', $( ':checkbox' ).parents( 'td' ) ).length > 0 )
        {
            //if its not dental
            <%if (this.CurrentProduct != Products.Dental){%>

                //if the lives being quoted are over 16

                //Here is where I would need the value inside of that table row
                if (livesover16)
                {
                    //show popup
                  $('#over16').dialog('open');
                    return false;

            <%}%>
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:18:25.050

像这样的东西应该可以工作（在没有看到 html 的情况下很难更精确）：

```
$('input[type="checkbox"]').on('change', function(){

     var tdtext = $(this) //the current clicked chexbox
                   .closest('tr') //the wrapping tr of the chechbox
                   .find('td') //find the td
                   .text(); //get the text 
}); 
```

# ios - Cocos3d：POD 输出不正确和黑色阴影

> ID：15025670
> 
> 赞同：2
> 
> 时间：2013-02-22T13:47:09.163
> 
> 标签：ios, cocos3d

我正在 iOS 上使用 Cocos3d 开发 3d 应用程序。我为一所房子创建了一个搅拌机文件，并将其导出为 .dae 并使用 colladatopod 工具转换为 .pod。当我在搅拌机中渲染图像时，它可以很好地显示输出，但是当我在 cocos3d 项目中转换并添加为 .pod 文件并在模拟器中运行后，输出有黑色阴影。有人可以建议为什么会出现这个问题吗？我确实在代码中将 shouldCullBackFaces 设置为 NO。我按照程序进行 pod 转换。我不知道现在问题出在哪里。

以下是参考截图链接： Blender 输出：[http](http://s11.postimage.org/94d9d2h8z/Blender_House_Model.png) ://s11.postimage.org/94d9d2h8z/Blender_House_Model.png 模拟器输出：[http ://s3.postimage.org/jztkix0s3/Output_In_Simulator.png](http://s3.postimage.org/jztkix0s3/Output_In_Simulator.png)

搅拌机输出： [http](http://s14.postimage.org/huixtamk1/Blender_Output.png) ://s14.postimage.org/huixtamk1/Blender_Output.png 模拟器输出： [http ://s14.postimage.org/u3k1kcu5t/Simulator_Output.png](http://s14.postimage.org/u3k1kcu5t/Simulator_Output.png)

另一个问题是，我的 pod 输出总是在模拟器中显示较小的图像，即使它的 pod 模型更大，我应该如何将其设置为代码中的实际大小？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T05:33:54.970

我猜你的 pod 文件有问题。您如何导出 pod 文件？执行导出到 collada 之类的操作，然后使用 collada 到 POD 转换器来获取所需的 .pod 文件。我以前在搅拌机上遇到过一些问题。它们需要添加 python 文件以实现其他功能。可能是你错过了一些。尝试阅读一些教程。我在cocos工作了几天，所以不能详细告诉你原因。希望这可以帮助 ：）

您还可以检查 POD 文件是否损坏。遵循这些

*   brenwill.com/2011/cocos3d-importing-converting-collada-to-pod

*   cocos2d-iphone.org/forum/topic/28872（也可以通过
    Bill Hollings的教程）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:11:15.437

很难说出您的设置是什么，但这里有一个要检查的事项列表

*   渲染前是否正确设置了着色器？尝试使用不同的。

*   着色器是否使用了任何未对齐的照明？应该有法线吗？

*   是不是加载不当的非二次幂纹理导致了问题？尝试不同的纹理。

*   您是否正确导出纹理坐标，是否将它们读入 VBO？

# c - MPI_Cart_shift 不返回邻居

> ID：15025673
> 
> 赞同：1
> 
> 时间：2013-02-22T13:47:14.407
> 
> 标签：c, algorithm, parallel-processing, mpi

不久前我问了一个关于这个项目的问题，我遇到了一个新问题。当我尝试运行 MPI_cart_shift 以查找与我的进程当前排名最近的邻居时，我没有得到正确的目标排名。

我正在尝试遵循此示例代码。 [http://siber.cankaya.edu.tr/ozdogan/GraduateParallelComputing.old/ceng505/node133.html](http://siber.cankaya.edu.tr/ozdogan/GraduateParallelComputing.old/ceng505/node133.html)

这是我创建坐标系的代码

```
MPI_Comm_rank (MPI_COMM_WORLD, &rank);  /* get current process id */
MPI_Comm_size (MPI_COMM_WORLD, &size);  /* get number of processes */
.
.
.

if(is_perfect_square(size))  dim_size[0] = dim_size[1] = (int) sqrt(size);
else
{ //if size = 2 then dims = 2, 1; size = 4 then 2,2; 8 = 4, 2...
    dim_size[0] = (int) sqrt(size + size);
    dim_size[1] = dim_size[0] / 2;
}
fprintf(stderr, "%d | %d \n", dim_size[0], dim_size[1]);
MPI_Cart_create(MPI_COMM_WORLD, 2, dim_size, periods, 1, &CannonsCart);
MPI_Barrier(MPI_COMM_WORLD);
.
.
.
runCannon(CannonsCart, &a, &b, &c); 
```

这是runCannon。

```
int runCannon( MPI_Comm comm, Matrix *a, Matrix *b, Matrix *c)
{

    int size, rank, coordinates[2];
    int uprank, downrank, leftrank, rightrank;
    int shiftsource, shiftdest;
    int ix, swap;
    MPI_Status status;

    MPI_Comm_size(comm, &size); 
    MPI_Comm_rank(comm, &rank); 
    MPI_Cart_coords(comm, rank, 2, coordinates); 

    MPI_Cart_shift(comm, 0, -1, &rightrank, &leftrank); //Cart_shift is doing weird stuff that I don't understand.
    MPI_Cart_shift(comm, 1, -1, &downrank, &uprank); 

    printf("rank = %d, rightrank = %d, downrank = %d, leftrank = %d, uprank = %d\n", rank, rightrank, downrank, leftrank, uprank); 
```

如果我分别用 4、8、16 个进程运行程序，我会得到这些输出。

```
rank = 0, rightrank = 2, downrank = 1, leftrank = 2, uprank = 1
rank = 1, rightrank = 3, downrank = 0, leftrank = 3, uprank = 0
rank = 3, rightrank = 1, downrank = 2, leftrank = 1, uprank = 2
rank = 2, rightrank = 0, downrank = 3, leftrank = 0, uprank = 3 
```

0 应该有 rightrank = 1、downrank = 2、left rank = 1、uprank = 2 等。但是我不能只交换 MPI_shift 调用，因为如果我有 8 个进程，这就是我的输出。

```
rank = 0, rightrank = 2, downrank = 1, leftrank = 6, uprank = 1
rank = 1, rightrank = 3, downrank = 0, leftrank = 7, uprank = 0
rank = 2, rightrank = 4, downrank = 3, leftrank = 0, uprank = 3
rank = 3, rightrank = 5, downrank = 2, leftrank = 1, uprank = 2
rank = 4, rightrank = 6, downrank = 5, leftrank = 2, uprank = 5
rank = 5, rightrank = 7, downrank = 4, leftrank = 3, uprank = 4
rank = 6, rightrank = 0, downrank = 7, leftrank = 4, uprank = 7
rank = 7, rightrank = 1, downrank = 6, leftrank = 5, uprank = 6 
```

0 应该有 rightrank = 1，downrank = 4，leftrank = 3，uprank = 4

这里是 16 只是为了数据。

```
rank = 9, rightrank = 13, downrank = 10, leftrank = 5, uprank = 8
rank = 3, rightrank = 7, downrank = 0, leftrank = 15, uprank = 2
rank = 0, rightrank = 4, downrank = 1, leftrank = 12, uprank = 3
rank = 2, rightrank = 6, downrank = 3, leftrank = 14, uprank = 1
rank = 1, rightrank = 5, downrank = 2, leftrank = 13, uprank = 0
rank = 8, rightrank = 12, downrank = 9, leftrank = 4, uprank = 11
rank = 6, rightrank = 10, downrank = 7, leftrank = 2, uprank = 5
rank = 7, rightrank = 11, downrank = 4, leftrank = 3, uprank = 6
rank = 4, rightrank = 8, downrank = 5, leftrank = 0, uprank = 7
rank = 5, rightrank = 9, downrank = 6, leftrank = 1, uprank = 4
rank = 12, rightrank = 0, downrank = 13, leftrank = 8, uprank = 15
rank = 14, rightrank = 2, downrank = 15, leftrank = 10, uprank = 13
rank = 13, rightrank = 1, downrank = 14, leftrank = 9, uprank = 12
rank = 10, rightrank = 14, downrank = 11, leftrank = 6, uprank = 9
rank = 11, rightrank = 15, downrank = 8, leftrank = 7, uprank = 10
rank = 15, rightrank = 3, downrank = 12, leftrank = 11, uprank = 14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:07:57.260

需要改变两件事以获得正确的输出。首先，在我的主要代码中，我需要交换 dim_size 中的行和列，所以：

```
else
{ //if size = 2 then dims = 2, 1; size = 4 then 2,2; 8 = 4, 2...
    dim_size[1] = (int) sqrt(size + size);
    dim_size[0] = dim_size[1] / 2;
} 
```

接下来，我需要交换我的 MPI_Cart_shift 调用，所以：

```
MPI_Cart_shift(comm, 1, -1, &rightrank, &leftrank); 
MPI_Cart_shift(comm, 0, -1, &downrank, &uprank); 
```

# java - 如何将@ManagedAttribute 和@ManagedOperation 添加到扩展另一个类的MBean

> ID：15025674
> 
> 赞同：2
> 
> 时间：2013-02-22T13:47:15.393
> 
> 标签：java, spring, jboss7.x, jmx

我创建了一个`MBean`扩展类并实现接口的类。
我正在尝试添加一些新的`@ManagedAttribute`，`@ManagedOperation`但它们没有显示在 jconsole 中。
我还看到其他属性和操作的描述没有正确显示。描述设置为默认值，尽管我在课堂上设置了它们。
有什么办法可以添加新的`@ManagedAttribute`和`@ManagedOperation`我的`MBean`？
我可以设置描述吗？ 我创建了两个带有注释
的类实例。问题是created 是 type而不是？`MBean``@MBean`
`MBean``StandardBean``DynamicBean`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T00:58:18.557

确保使用 @ManagedResource 标记 MBean 以将其注册到 JMX 服务器。并将其标记为@Component。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:33:38.683

尝试在您的接口上声明管理属性和操作。

# jsf-2 - 删除嵌套数据表中的行

> ID：15025678
> 
> 赞同：0
> 
> 时间：2013-02-22T13:47:22.180
> 
> 标签：jsf-2, datatable, delete-row

我试图删除嵌套数据表中的一行，但我收到此消息：已尝试对已删除的实例进行操作。

无论如何，该行都被删除了，但是视图变得一团糟..我删除的那一行下的所有其他行都消失了。我必须重新启动应用程序才能正确查看更改。

这是视图：

```
 <h:dataTable var="father" value="#{miuchile3.getMenusPadre(miuchile3.keyModulo)}">
                                    <h:column>
                                        <li>
                                           <h:panelGroup rendered="#{father!=null}">
                                            <h:commandLink value="#{father.nombre}"
                                                           action="#{miuchile3.setMenu(father)}" rendered="#{father!=null}">
                                                <f:ajax render=":menupags:menuDetalle"/>
                                            </h:commandLink>
                                               </h:panelGroup>
                                            <ul>

                                                <h:dataTable var="submenu" value="#{miuchile3.getHijos(father.id)}" rendered="#{father!=null}">
                                                    <h:column>
                                                        <li><h:commandLink value="#{submenu.nombre}"
                                                                           action="#{miuchile3.setMenu(submenu)}">
                                                            <f:ajax render=":menupags:menuDetalle"/>

                                                        </h:commandLink></li>

                                                    </h:column>

                                                    <h:column>

                                                        <h:commandLink  value="Eliminar"
                                                                        action="#{miuchile3.DeleteMenu(submenu)}" >

                                                        </h:commandLink>
                                                    </h:column>

                                                </h:dataTable>

                                            </ul>

                                        </li>

                                    </h:column>
                                    <h:column>

                                        <h:commandLink  value="Eliminar"
                                                        action="#{miuchile3.DeleteMenu(father)}" >

                                        </h:commandLink>

                                       </h:column>
                                </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:10:17.030

尝试在删除功能上使用 a4j:commandButton 然后尝试渲染数据表

# signals - 为什么 PySide 会从 Signals 的类成员中隐式创建对象成员？

> ID：15025686
> 
> 赞同：8
> 
> 时间：2013-02-22T13:47:51.023
> 
> 标签：signals, pyside

在[PySide 信号和插槽页面上](http://qt-project.org/wiki/Signals_and_Slots_in_PySide)它说：“信号是实例拥有的运行时对象，它们不是类属性”。显然，QObject 构造函数在类属性中查找信号并将它们复制到对象实例。我的测试程序证实了这一点。

从 PySide 导入 QtCore

```
class Klass(QtCore.QObject):
    lst = []
    sig = QtCore.Signal(str)

def main():
    obj1 = Klass()
    obj2 = Klass()

    print "id: obj1.lst  = {}, obj1.sig  = {}".format(id(obj1.lst),  id(obj1.sig))
    print "id: obj2.lst  = {}, obj2.sig  = {}".format(id(obj2.lst),  id(obj2.sig))
    print "id: klass.lst = {}, klass.sig = {}".format(id(Klass.lst), id(Klass.sig))

if __name__ == '__main__':
    main() 
```

在我的输出中，您可以看到现在有三个信号对象，而对象和类的 lst-member 的 id 相同。

```
id: obj1.lst  = 4317739344, obj1.sig  = 4297560376
id: obj2.lst  = 4317739344, obj2.sig  = 4297560400
id: klass.lst = 4317739344, klass.sig = 4317851072 
```

隐式创建对象属性只是令人困惑，因此风格不好（恕我直言）。也许他们确实有充分的理由，但我没有看到他们。所以我的问题是：他们为什么选择这个解决方案而不是仅仅在构造函数中将信号创建为常规属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T21:34:29.733

它们不是*副本*。如果你检查它们的类型，你会看到 class 属性是`PySide.QtCore.Signal`，instance 属性是`PySide.QtCore.SignalInstance`。

```
print "type(obj1.sig): {}".format(type(obj1.sig))
print "type(obj2.sig): {}".format(type(obj2.sig))
print "type(Klass.sig): {}".format(type(Klass.sig))

# type(obj1.sig): <type 'PySide.QtCore.SignalInstance'>
# type(obj2.sig): <type 'PySide.QtCore.SignalInstance'>
# type(Klass.sig): <type 'PySide.QtCore.Signal'> 
```

这是必要的，因为 Qt 定义信号的方式。Qt 使用[元对象系统](http://qt-project.org/doc/qt-4.8/metaobjects.html)来注册信号/槽。为了完成这项工作，PySide 在幕后做了一些“魔术”，将您的自定义类属性信号注册到 Meta-Object System 并返回一个`SignalInstance`与实例属性同名的可用信号 ( )。

原始`Signal`仍然存在，但被实例属性覆盖：

```
print "obj1.sig -> type: {}, id: {}".format(type(obj1.sig), id(obj1.sig))
print "obj1.__class__.sig -> type: {}, id: {}".format(type(obj1.__class__.sig), id(obj1.__class__.sig))
print "Klass.sig -> type: {}, id: {}".format(type(Klass.sig), id(Klass.sig))

# obj1.sig -> type: <type 'PySide.QtCore.SignalInstance'>, id: 40629904
# obj1.__class__.sig -> type: <type 'PySide.QtCore.Signal'>, id: 41556352
# Klass.sig -> type: <type 'PySide.QtCore.Signal'>, id: 41556352 
```

# java - 如何在 hql 上使用“分组依据”？

> ID：15025687
> 
> 赞同：1
> 
> 时间：2013-02-22T13:47:58.180
> 
> 标签：java, hibernate, hql, native

我有一个需要更改为 HQL 的本机查询。

原始查询是：

```
SELECT COUNT(DISTINCT `table`.`id`) FROM `database`.`table` WHERE
(`table`.`date`" " BETWEEN '" + year + "-01-01 00:00:00' AND '" + year
+ "-12-31 23:59:59') AND `table`.`box` NOT LIKE '' GROUP BY MONTH(`table`.`date`)"; 
```

我试过类似的东西：

```
StringBuilder hql = new StringBuilder(); 
hql.append(" select count(distinct table.id)"); 
hql.append(" from Table table");
hql.append(" where table.date between '?-01-01 00:00:00' and '?-12-31 23:59:59'");
hql.append(" and table.box not like ''"); 
hql.append("group by month (table.date)"); 
query.setParameter(1, Integer.toString(year)); 
query.setParameter(2, Integer.toString(year)); 
```

其中 year 是作为参数传递给方法的 int。

生成的查询是：

```
Hibernate: select count(distinct table0_.id) as col_0_0_ from table table0_ where (table0_.date between '2013-01-01 00:00:00' and '2013-12-31 23:59:59') and (table0_.box not like '') group by month(table0_.date) 
```

我的问题是：使用本机查询，我得到一个值，使用 hql 我在第 2 个月（2 月）得到另一个值。第 1 个月（1 月）的结果是相同的。

我在这里想念什么？

提前致谢，

特鲁德维希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:53:26.833

对我来说，它们似乎是没有模式限定的相同查询。你不是在不同的实例中运行它们吗？就像，一个在“数据库”中，另一个指向加载了类似数据的另一个基地？

# jquery - 垂直居中内容，除非更大

> ID：15025692
> 
> 赞同：0
> 
> 时间：2013-02-22T13:48:28.810
> 
> 标签：jquery, css, dynamic

目前我有一个小项目，它是一个响应式网站（使用骨架响应式网格），我正在使用 jQuery 在视口中垂直居中内容。

```
<script>
$(document).ready(function(){                  
 $(window).resize(function(){
  $('.container').css({
   position:'absolute',
   left: ($(window).width() 
     - $('.container').outerWidth())/2,
   top: ($(window).height() 
     - $('.container').outerHeight())/2
 });    
 });
 // To initially run the function:
 $(window).resize(); 
});
</script> 
```

问题是当视口变得小于容器的外部宽度时，它仍然应用绝对位置。

理想情况下，我需要一些说明

如果视口等于或小于 .container 的外部宽度，则不应用任何定位，但是如果视口大于 .container 应用绝对定位以使其在视口中居中？

有谁知道如何使用 Jquery 来实现这一点，就像我挠头一样？

编辑>>>>>

这样的事情是对的吗，我在这里有点抓着稻草.....

```
$(document).ready(function(){
$(window).width();   // returns width of browser viewport
 $(document).width(); // returns width of HTML document

$(window).height();   // returns heightof browser viewport
$(document).height(); // returns height of HTML document

var width = $(window).width(); 
var height = $(window).height(); 

   if ((width >= 1024  ) && (height>=768)) {
 $(window).resize(function(){
  $('.container').css({
  position:'absolute',
  left: ($(window).width() 
 - $('.container').outerWidth())/2,
 top: ($(window).height() 
 - $('.container').outerHeight())/2
 });    
 });
 // To initially run the function:
 $(window).resize(); 
}
else {
//do nothing
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:53:11.627

使用 `$(window).width(); // returns width of browser viewport` 或 `$(document).width(); // returns width of HTML document` 应该与`$('.container').width()`

`if (width comparison) apply_formatting`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:26:36.630

```
<script>
 $(document).ready(function(){                  
     $(window).resize(function(){
          // Here is the new part:
          if(($(window).width() > $('.container').outerWidth()) && ($(window).height() > $('.container').outerHeight()) ){
             $('.container').css({
                  position:'absolute',
                  left: ($(window).width() 
                     - $('.container').outerWidth())/2,
                  top: ($(window).height() 
                     - $('.container').outerHeight())/2
             });
          }else{
             $('.container').css({position:'relative'});
          }    

     });
     // To initially run the function:
     $(window).resize(); 
 });
</script> 
```

希望能帮助到你。这个想法是，当容器的宽度和高度都小于窗口视口时，将应用绝对定位，否则将应用相对（正常）定位。

# python - Python 中的大小增量 Numpy 数组

> ID：15025695
> 
> 赞同：4
> 
> 时间：2013-02-22T13:48:35.130
> 
> 标签：python, arrays, memory-management, numpy, overloading

我刚刚遇到了在 Python 中需要一个增量 Numpy 数组，因为我还没有找到任何东西，所以我实现了它。我只是想知道我的方法是否是最好的方法，或者您可以提出其他想法。

所以，问题是我有一个 2D 数组（程序处理 nD 数组），其大小事先不知道，并且需要在一个方向上将可变数量的数据连接到数组（假设我必须多次调用 np.vstak）。每次连接数据时，我都需要获取数组，沿轴 0 对其进行排序并执行其他操作，因此我无法构造一长串数组然后立即 np.vstak 列表。由于内存分配很昂贵，我转向增量数组，我将数组的大小增加一个大于我需要的大小的数量（我使用 50% 的增量），以便最小化分配的数量。

我对此进行了编码，您可以在以下代码中看到它：

```
class ExpandingArray:

    __DEFAULT_ALLOC_INIT_DIM = 10   # default initial dimension for all the axis is nothing is given by the user
    __DEFAULT_MAX_INCREMENT = 10    # default value in order to limit the increment of memory allocation

    __MAX_INCREMENT = []    # Max increment
    __ALLOC_DIMS = []       # Dimensions of the allocated np.array
    __DIMS = []             # Dimensions of the view with data on the allocated np.array (__DIMS <= __ALLOC_DIMS)

    __ARRAY = []            # Allocated array

    def __init__(self,initData,allocInitDim=None,dtype=np.float64,maxIncrement=None):
        self.__DIMS = np.array(initData.shape)

        self.__MAX_INCREMENT = maxIncrement
        if self.__MAX_INCREMENT == None:
            self.__MAX_INCREMENT = self.__DEFAULT_MAX_INCREMENT

        # Compute the allocation dimensions based on user's input
        if allocInitDim == None:
            allocInitDim = self.__DIMS.copy()

        while np.any( allocInitDim < self.__DIMS  ) or np.any(allocInitDim == 0):
            for i in range(len(self.__DIMS)):
                if allocInitDim[i] == 0:
                    allocInitDim[i] = self.__DEFAULT_ALLOC_INIT_DIM
                if allocInitDim[i] < self.__DIMS[i]:
                    allocInitDim[i] += min(allocInitDim[i]/2, self.__MAX_INCREMENT)

        # Allocate memory 
        self.__ALLOC_DIMS = allocInitDim
        self.__ARRAY = np.zeros(self.__ALLOC_DIMS,dtype=dtype)

        # Set initData 
        sliceIdxs = [slice(self.__DIMS[i]) for i in range(len(self.__DIMS))]
        self.__ARRAY[sliceIdxs] = initData

    def shape(self):
        return tuple(self.__DIMS)

    def getAllocArray(self):
        return self.__ARRAY

    def getDataArray(self):
        """
        Get the view of the array with data
        """
        sliceIdxs = [slice(self.__DIMS[i]) for i in range(len(self.__DIMS))]
        return self.__ARRAY[sliceIdxs]

    def concatenate(self,X,axis=0):
        if axis > len(self.__DIMS):
            print "Error: axis number exceed the number of dimensions"
            return

        # Check dimensions for remaining axis 
        for i in range(len(self.__DIMS)):
            if i != axis:
                if X.shape[i] != self.shape()[i]:
                    print "Error: Dimensions of the input array are not consistent in the axis %d" % i
                    return

        # Check whether allocated memory is enough 
        needAlloc = False
        while self.__ALLOC_DIMS[axis] < self.__DIMS[axis] + X.shape[axis]:
            needAlloc = True
            # Increase the __ALLOC_DIMS 
            self.__ALLOC_DIMS[axis] += min(self.__ALLOC_DIMS[axis]/2,self.__MAX_INCREMENT)

        # Reallocate memory and copy old data 
        if needAlloc:
            # Allocate 
            newArray = np.zeros(self.__ALLOC_DIMS)
            # Copy 
            sliceIdxs = [slice(self.__DIMS[i]) for i in range(len(self.__DIMS))]
            newArray[sliceIdxs] = self.__ARRAY[sliceIdxs]
            self.__ARRAY = newArray

        # Concatenate new data 
        sliceIdxs = []
        for i in range(len(self.__DIMS)):
            if i != axis:
                sliceIdxs.append(slice(self.__DIMS[i]))
            else:
                sliceIdxs.append(slice(self.__DIMS[i],self.__DIMS[i]+X.shape[i]))

        self.__ARRAY[sliceIdxs] = X
        self.__DIMS[axis] += X.shape[axis] 
```

该代码显示出比 vstack/hstack 几个随机大小的串联要好得多的性能。

我想知道的是：这是最好的方法吗？在 numpy 中已经有什么可以做到这一点了吗？

此外，如果能够重载 np.array 的切片赋值运算符，那就太好了，这样一旦用户分配了实际尺寸之外的任何内容，就会执行 ExpandingArray.concatenate()。这种重载怎么办？

**测试代码**：我在这里也发布了一些我用来比较 vstack 和我的方法的代码。我将最大长度为 100 的随机数据块相加。

```
import time

N = 10000

def performEA(N):
    EA = ExpandingArray(np.zeros((0,2)),maxIncrement=1000)
    for i in range(N):
        nNew = np.random.random_integers(low=1,high=100,size=1)
        X = np.random.rand(nNew,2)
        EA.concatenate(X,axis=0)
        # Perform operations on EA.getDataArray()
    return EA

def performVStack(N):
    A = np.zeros((0,2))
    for i in range(N):
        nNew = np.random.random_integers(low=1,high=100,size=1)
        X = np.random.rand(nNew,2)
        A = np.vstack((A,X))
        # Perform operations on A
    return A

start_EA = time.clock()
EA = performEA(N)
stop_EA = time.clock()

start_VS = time.clock()
VS = performVStack(N)
stop_VS = time.clock()

print "Elapsed Time EA: %.2f" % (stop_EA-start_EA)
print "Elapsed Time VS: %.2f" % (stop_VS-start_VS) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:36:13.457

当我遇到类似的问题时，我使用了 ndarray.resize() ( [http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.resize.html#numpy.ndarray.resize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.resize.html#numpy.ndarray.resize) )。大多数情况下，它将完全避免重新分配+复制。我不能保证它会被证明会更快（它可能会），但它要简单得多。

至于你的第二个问题，我认为为了扩展目的而覆盖切片分配不是一个好主意。该运算符用于分配给现有项目/切片。如果你想改变它，在某些情况下你希望它如何表现还不是很清楚，例如：

```
a = MyExtendableArray(np.arange(100))
a[200] = 6  # resize to 200? pad [100:200] with what?
a[90:110] = 7  # assign to existing items AND automagically-allocated items?
a[::-1][200] = 6 # ... 
```

我的建议是切片分配和数据附加应该保持分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:18:24.433

我认为这些东西最常见的设计模式是只为小数组使用一个列表。当然你可以做动态调整大小之类的事情（如果你想做一些疯狂的事情，你也可以尝试使用调整数组大小的方法）。我认为一个典型的方法是总是将大小加倍，当你真的不知道事情会有多大时。当然，如果您知道数组将增长到多大，那么预先分配完整的东西是最简单的。

```
def performVStack_fromlist(N):
    l = []
    for i in range(N):
        nNew = np.random.random_integers(low=1,high=100,size=1)
        X = np.random.rand(nNew,2)
        l.append(X)
    return np.vstack(l) 
```

我确信在某些用例中扩展数组可能很有用（例如，当附加数组都非常小时），但使用上述模式似乎可以更好地处理这个循环。优化主要是关于您需要多久复制一次周围的所有内容，并且做一个这样的列表（除了列表本身），这恰好是一次。所以通常速度要快得多。

# perl - 通过 Perl 创建 MS Access 查询对象

> ID：15025696
> 
> 赞同：0
> 
> 时间：2013-02-22T13:48:41.040
> 
> 标签：perl, ms-access

我想通过 Perl 创建 MS Access 查询对象。我可以查询表，但无法找到如何访问 Access 数据库中现有的查询对象。

我还想通过 Perl 创建新的查询对象并用名称保存它。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:41:08.200

The below link may be helpful for you:

[Class::DBI::MSAccess](https://metacpan.org/module/Class%3a%3aDBI%3a%3aMSAccess)

# ruby-on-rails - 是否可以强制 AR 对象 ID 从某个值开始？

> ID：15025700
> 
> 赞同：0
> 
> 时间：2013-02-22T13:49:08.087
> 
> 标签：ruby-on-rails, testing, rspec, rails-activerecord

有没有办法将某些 AR 模型的 ID 设置为从特定值开始？（说1000）？我只需要这个用于我的 rspec 测试，而不需要将在生产中运行的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:05:51.550

对于mysql，你可以这样做

`ALTER TABLE tablename AUTO_INCREMENT = 1000;`

而对于 postgresql 你可以这样做

`ALTER SEQUENCE tablename_id_seq RESTART 1000;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:02:52.770

主键由您的数据库管理，无法直接在 AR 中更改。请参阅 benchwarmer 的回复以通过您的数据库进行操作。

对于 rspec 测试，您可以只存根`Model#id`等`Model.find`。

# c# - 登录 ASP.net 时如何根据用户重定向页面？

> ID：15025701
> 
> 赞同：0
> 
> 时间：2013-02-22T13:49:09.883
> 
> 标签：c#, asp.net

我的网站中有四个不同的模块：客户、操作员、工程师和管理员。

当我当时单击登录按钮时，如果那是客户，则该页面应重定向到 customer.aspx。

ff工程师登录然后页面应该重定向到engineer.aspx等等..

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:05:56.077

我想您正在使用带有 WebForms 的“普通”ASP.NET。在这种情况下（我再次假设），您的页面上有登录控件，如下所示：

```
<asp:login id="ctrlLogin" runat="server"></asp:login> 
```

该控件公开了一些您可以使用的事件，其中一个在身份验证后被触发。像这样设置您的登录控件：

```
<asp:login id="ctrlLogin" runat="server" onloggedin="OnLoggedIn">
</asp:login> 
```

现在您的 C# 代码添加方法`OnLoggedIn`：

```
protected void OnLoggedIn(object sender, EventArgs e)
{
} 
```

在那里，您可以使用简单的调用重定向到正确的页面`Response.Redirect()`。最后一个问题是如何获得用户的“工作”，如果您使用带有角色的 ASP.NET 身份验证，您可以将您的用户设置为属于该角色（客户、操作员、工程师、管理员）。实际上一个用户可以有多个角色，所以你可能需要*搜索*你感兴趣的角色。一个快速而肮脏的解决方案是拥有这样的功能：

```
private void RedirectToProperPage(params string[] roles)
{
    foreach (string role in roles)
    {
        if (Roles.IsUserInRole(role))
            Response.Redirect(String.Format("~/{0}.aspx", role));
    }
} 
```

在你的`OnLoggedInMethod`你可以简单地这样做：

```
protected void OnLoggedIn(object sender, EventArgs e)
{
    RedirectToProperPage("Admin", "Operator", "Engineer", "Customer");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:53:56.267

如果您正在使用该[`Login`](http://msdn.microsoft.com/en-us/library/t863ehhh%28v=vs.100%29.aspx)控件，那么它有一个[`LoggedIn`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin%28v=vs.100%29.aspx)事件，您可以在用户登录后使用该事件来执行自定义逻辑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T13:57:13.353

您必须在表中再添加一列，其中存储了用户的用户名和密码。在新列中，您可以保存用户的角色。当用户输入正确的用户名和密码时，您可以获取他的角色并根据他的角色重定向用户。

例如：

如果您获取**客户**，那么您可以将用户重定向到 customer.aspx

并对其他角色进行同样的检查。

# c++ - C++ 根据其他模板参数推断模板参数

> ID：15025704
> 
> 赞同：6
> 
> 时间：2013-02-22T13:49:32.943
> 
> 标签：c++, templates

假设我有以下课程：

```
template <class T, class U, class V> Foo
{
    ...
}; 
```

模板参数具有不同的映射，因此我可以根据 T 推断出其他模板参数 U 和 V。例如，如果 T 是 double，U 和 V 将始终是某些类 D1 和 D2，如果 T 是 float，U 和 V 将始终是某些其他类 F1 和 F2。

考虑到这一点，有没有一种方法可以只传入一个模板参数，并让编译器推导出其他两个参数？

我知道简单的答案是将这些其他类也模板化并将模板参数 T 传递给它们，但我无法使这些类模板化（它们是由工具自动生成的）。

理想情况下，我可以像这样使用 typedef 或 #define：

```
typedef Foo<double> Foo<double, D1, D2>
typedef Foo<float> Foo<float, F1, F2> 
```

然而，这些不编译。我想知道是否有办法使用模板元编程或模板模板参数来解决这个问题，但我似乎无法理解这些概念，我有一种直觉，可能有一个更简单的答案。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T13:53:21.253

你可以摆脱`U`and `V`，像这样：

```
template <typename T>
struct Foo
{
  typedef typename deduce_from<T>::U U;
  typedef typename deduce_from<T>::V V;
}; 
```

其中`deduce_from`封装了推演过程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T14:09:20.220

Angew 给出的答案向您展示了正确的方法，但没有向您展示如何处理无法推断且`U`必须*由*实例化客户端提供的情况。`V`

 *要处理这种情况，您可以为模板参数`U`和分配默认参数`V`：

```
struct D1 { }; struct D2 { };
struct F1 { }; struct F2 { };

// Primary template
template<typename T>
struct deduce_from
{
};

// Specialization for double: U -> D1, V -> D2
template<>
struct deduce_from<double>
{
    typedef D1 U;
    typedef D2 V;
};

// Specialization for float: U -> F1, V -> F2
template<>
struct deduce_from<float>
{
    typedef F1 U;
    typedef F2 V;
};

// Give defaults to U and V: if deduce_from is not specialized for
// the supplied T, and U or V are not explicitly provided, a compilation
// error will occur 
template<
    typename T,
    typename U = typename deduce_from<T>::U,
    typename V = typename deduce_from<T>::V
    >
struct Foo
{
    typedef U typeU;
    typedef V typeV;
}; 
```

这是一个简单的程序来测试上述解决方案的正确性：

```
#include <type_traits>

int main()
{
    static_assert(std::is_same<Foo<double>::typeU, D1>::value, "Error!");
    static_assert(std::is_same<Foo<double>::typeV, D2>::value, "Error!");
    static_assert(std::is_same<Foo<float>::typeU, F1>::value, "Error!");
    static_assert(std::is_same<Foo<float>::typeV, F2>::value, "Error!");

    // Uncommenting this will give you an ERROR! 
    // No deduced types for U and V when T is int
    /* static_assert(
        std::is_same<Foo<int>::typeU, void>::value, "Error!"
        ); */
    static_assert(
        std::is_same<Foo<int, bool, char>::typeU, bool>::value, "Error!"
        ); // OK
    static_assert(
        std::is_same<Foo<int, bool, char>::typeV, char>::value, "Error!"
        ); // OK
} 
```*

# sql-server-2008 - 如何在sql存储过程中获取表的父属性？

> ID：15025705
> 
> 赞同：-3
> 
> 时间：2013-02-22T13:49:39.170
> 
> 标签：sql-server-2008, tsql, stored-procedures

我想编写一个选择存储过程，并且在 where 子句中我想检查我正在执行选择查询的当前表的父表的字段的值，我怎样才能做到这一点？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:54:06.943

你会喜欢`JOIN`那些桌子。在不知道表定义的情况下，您的查询应该如下所示：

```
SELECT C.*                   --- List the columns you want here 
FROM ChildTable C
INNER JOIN ParentTable P
    ON C.ParentID = P.ID     --- something along this lines
WHERE P.SomeField = 1        --- put here your condition on the parent table 
```

# html - 如何在 MVC 中消失的文本框上制作灰色文本

> ID：15025708
> 
> 赞同：0
> 
> 时间：2013-02-22T13:49:51.500
> 
> 标签：html, asp.net-mvc-4

我正在寻找与此处给出的相同答案： [HTML/CSS 制作一个文本框，其中的文本显示为灰色，并在我单击输入信息时消失，如何？](https://stackoverflow.com/questions/4681036/html-css-making-a-textbox-with-text-that-is-grayed-out-and-disappears-when-i-cl)

但我想在 MVC4 中做到这一点。

我得到以下观点：

```
 @using (Html.BeginForm("Kompetens", "KumaAdmin"))
            {  
                <div class="three columns" style="margin-right: 627px;">
                    <h6>Kompetens</h6>
                    <div style="width:456px;"> @Html.ListBox("kompetensId", (SelectList)ViewBag.KomId)</div><br/>
                    <h6>Lägg till kompetens</h6>
                    <div class="focus">
                    @Html.EditorFor(mm => mm.KompetensTest)
                    </div>
                    <input type="submit" style="margin-right: 205px;" value="Skapa"/><br/><br/>
                </div>
             } 
```

因为这是我的文本框：

```
@Html.EditorFor(mm => mm.KompetensTest) 
```

我不知道如何在上面的链接中应用“onfocus”和 onblur 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:03:32.973

您需要创建一个编辑器模板。因为 Html.EditorFor 没有 "object htmlattributes" 参数来做 "new { onfocus = "js here" }"。

在视图>共享，

创建一个名为 EditorTemplates 的文件夹

然后，您使用@model 字符串/无论该对象是什么来创建视图。根据需要命名文件。

当您将 @model 放在视图上时，您指定它只接受此类型作为模型。

在此视图中，您创建了一个 Html.TextBox（不是 TextBoxFor），瞧。

在 Html.EditorFor 方法上，还有一种方法可以设置您要使用的编辑器模板。通过键入它的名称来选择您创建的一个，如下所示：

```
@Html.EditorFor(mm => mm.KompetensTest, "GreyedTemplate") 
```

我命名为视图的代码：GreyedTemplate.cshtml

```
@model string

@Html.TextBox("", Model, new { onfocus = "", onclick="" }) 
```

注意第一个参数是空的。这是故意这样做的，因为当您使用 EditorFor(mm => mm.KompetensTest,"GreyedTemplate") 时，它会自动使用 KompetensTest 作为字段的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:53:05.150

您想使用占位符 html 属性 ( [http://www.w3schools.com/tags/att_input_placeholder.asp](http://www.w3schools.com/tags/att_input_placeholder.asp) )

就像是`@Html.EditorFor(mm => mm.KompetensTest, new { placeholder = "Text" })`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:57:53.320

@Gmoliv 它终于奏效了！我搜索了一下，发现“Editfor”无法访问 html 属性。虽然我找到了可以访问它们的“TextBoxFor”，但解决方案是：

```
 @Html.TextBoxFor(mm => mm.Profile, new { placeholder = "Ange Profil" }) 
```

@Pedro我真的很努力让它工作，但问题是我无法获得要设置的值，所以它总是空的，我在视图和模板视图中设置它，它根本没有。如果可以的话，我将不胜感激完整的代码示例

非常感谢！

# html - 多页 jquery 移动应用程序中的 HTML 验证

> ID：15025714
> 
> 赞同：0
> 
> 时间：2013-02-22T13:50:05.780
> 
> 标签：html, jquery-mobile, html-validation

您如何验证（例如使用[http://validator.w3.org/](http://validator.w3.org/)）多页 jquery 移动网站？例如，如果我离开 index.html，页面只是一个没有标题或正文的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:55:53.930

“这取决于”。

验证仅在 HTML 文档的上下文中才有意义，并且如果您使用 JavaScript 修改文档，则只有初始状态需要验证。

您可以使用 Selenium 之类的工具来驱动站点并在 DOM 处于不同状态时对其进行快照（将其序列化为 HTML），然后验证这些快照。（标记验证系列有一个 API，您可以通过编程方式调用，以便将它们组合起来）。

如果您在服务器上生成 HTML 片段（而不是向客户端发送纯结构化数据），那么您可以将这些片段嵌入到 HTML 框架文档中并对其进行验证。无论如何，对于大多数视图，您都应该有这样的文档（因为您不想重复[Gawker 的错误](http://www.webmonkey.com/2011/02/gawker-learns-the-hard-way-why-hash-bang-urls-are-evil/)，让一个[脆弱的站点完全依赖 Ajax](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)）。

另请参阅[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

# html - 将 div 设置为浏览器窗口的高度

> ID：15025715
> 
> 赞同：0
> 
> 时间：2013-02-22T13:50:09.840
> 
> 标签：html

我有 2 个 div，一个在另一个之上，我希望它们都是浏览器窗口的 100% 宽度和高度，同时仍然保持它们在文档中的顺序。

目前你可以看到我刚刚添加了一个内联样式来给盒子 500px 的高度，所以它们是可见的。

到目前为止的相关代码可以在这里找到：

[http://fiddle.jshell.net/pY6dc/9/](http://fiddle.jshell.net/pY6dc/9/)

我对此很陌生，所以你可能需要用非常简单的术语来解释事情。我知道我可能需要某种形式的 javascript 才能实现这一点，甚至不知道从哪里开始。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:54:16.423

在 JavaScript 中执行此操作的一种方法：

```
$(".slide").height($(window).height()); 
```

它所做的是选择所有具有幻灯片类的元素，然后将它们的高度设置为窗口高度。

更新的小提琴：[这里](http://fiddle.jshell.net/pY6dc/12/)

但基本上我假设您可以自己连接 jQuery，一旦您这样做，您可以通过多种方式注册窗口加载功能，最简单的方式是在脚本标签中（更合适的方式是在文档的头部） .

* * *

```
<script type='text/javascript'>
   $(window).load(function(){
      $(".slide").height($(window).height());
   });
</script> 
```

# c# - 对表存储执行查询时设置网络故障超时

> ID：15025718
> 
> 赞同：1
> 
> 时间：2013-02-22T13:50:35.043
> 
> 标签：c#, azure, azure-table-storage

我正在编写一个重试系统，如果网络出现故障，它将重试从 Windows azure 表存储中检索数据。

我的问题是当网络出现故障时，读取数据（下面的第二行代码）等到某个超时然后抛出异常。

```
 Result = Table.ExecuteQuery(query);
               Console.WriteLine(Result.ElementAt(0).Timestamp); 
```

我怎样才能操纵这个超时值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:59:10.217

你设置的`Timeout`属性`DataServiceContext`

[http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.timeout.aspx)

# ios - 发送到后台时如何重置应用程序

> ID：15025720
> 
> 赞同：1
> 
> 时间：2013-02-22T13:50:37.490
> 
> 标签：ios

我正在构建几个简单的计算器应用程序，当用户将其发送到后台时，我希望能够将其恢复到初始设置（就像第一次打开一样）。我猜我必须在 appdelegate 中放一些代码来管理它。任何人都可以为我提供有关如何执行此操作的入门知识吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:58:20.217

在您的应用程序的 Info.plist 文件中添加`Application does not run in background`/`UIApplicationExitsOnSuspend`键并将其设置为`YES`，当它被置于后台时它将始终终止您的应用程序，使其在下次运行时从头开始。

它本质上会关闭您的应用程序的多任务处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:01:55.330

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // app is going to background for whatever reason (but not being killed)
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // app is about to come to the front (but not being launched)
    // reset your ui here
} 
```

如果您不执行其他答案但希望应用程序不被杀死，这将很有用。在我们的案例中，我们实际上跟踪了这两个调用之间的时间间隔并在 30 分钟后重置。

# asp.net - 尝试在 IIS 上托管网站 asp.net 时出错

> ID：15025734
> 
> 赞同：1
> 
> 时间：2013-02-22T13:51:29.970
> 
> 标签：asp.net, iis

我正在使用`IIS 8.0`（无法下载 7.0 版本）。这是我第一次与`web applications`. 我曾经与`winforms`. 我`added new Web Site`，然后我选择了我的 asp.net + C# 解决方案的文件夹，然后将该文件夹转换为`application` on `IIS`。现在我遇到了一个错误。另外，我将其更改`frameWork version`为`v4.0`

`Erro HTTP 500.19 - Internal Server Error`
`The required page couldn't be accessed because the configuration data of the page are invalid`

```
33:<validation validateIntegratedModeConfiguration="false" />
 34:<handlers>
 35:<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

# jquery - jQuery 动画在 Firefox 中有效，但在其他浏览器中无效

> ID：15025735
> 
> 赞同：0
> 
> 时间：2013-02-22T13:51:32.980
> 
> 标签：jquery, animation

我正在开发一个滑块插件。它在 Firefox 中按预期工作，但在 Chrome、IE 和 Safari 中，动画不是向左移动而是向上移动，而不是减小宽度而是减小高度。 [http://htc1swallpapers.zxq.net/jquery.squares.html](http://htc1swallpapers.zxq.net/jquery.squares.html)

HTML 和 CSS

```
<div id="container"></div>

 #container{
     position:relative;
     width: 854px;
     height: 418px;
     margin: 100px;
     border: 3px solid #333;
     overflow: hidden;
 }
 .bar{
     position: absolute;
     top: 0;
     opacity: 0;
 }

$(document).ready(function() {
    $('#container').myplugin({sw: 60, sh: 60, animation: 'vertical'});
//  setTimeout(function(){$('#container').myplugin({sw: 60, sh: 60, animation: 'horizontal'});}, 15000);
}); 
```

jQuery插件

```
// JavaScript Document
(function($){
    $.fn.extend({

        myplugin: function(settings){

            var defaults = {
                speed: 200,
                easing: 'fadeout',
                animation: 'vertical',
                sw: 20, //slice width
                sh: 20, //slice height
                images: 1           
            }

            var settings = $.extend(defaults, settings);

            return $(this).each(function(){

                var opt = settings,
                    cont = $(this),
                    width = cont.innerWidth(),
                    height = cont.innerHeight(),
                    arr = [],
                    hc = Math.ceil(width/opt.sw), //horizontal slices count
                    vc = Math.ceil(height/opt.sh); //vertical slices count

                if(opt.animation === 'vertical'){
                    var loaded = false;
                    cont.empty();
                    for(v = 0; v < vc; v++){
                        for(h = 0; h < hc; h++){
                            if(v == 1) cont.append('<div class="bar" id="bar' + h + '"></div>');
                            var slices = {
                                src: '<img class="square" id="slice' + h.toString() + v.toString() + '" src="shred/squares/img1' + v.toString() + h.toString() + '.jpg"/>',
                                x: h * opt.sw, //offset left
                                y: v * opt.sh, //offset top
                                id: h.toString() + v.toString()
                            }
                            arr.push(slices);
                        }

                    }

                    $.each(arr, function(index, value){
                        for(d = 0; d < hc; d++){
                            if(arr[index].x == d * opt.sw){
                                cont.find('#bar' + d).append(arr[index].src);
                                cont.find('#slice' + arr[index].id).css({'top': arr[index].y, 'left': 0});
                            }
                            loaded = (d == hc -1) ? true : false;
                        }
                    });

                    if(loaded){
                        $('.bar').css({'width': opt.sw, 'height': vc * opt.sh, 'overflow': 'hidden', 'top': 0, 'left': width + opt.sh});

                        function slidein(h, del){setTimeout(function(){
                            cont.find('#bar' + h).stop().animate({
                            'left': h * opt.sw, 
                            'opacity': 1}, opt.speed*10)}, del + 2000);
                        }

                        function slideout(h, del){setTimeout(function(){
                            cont.find('div#bar' + h).stop().animate({
                                'width': 0,
                                'opacity': 0}, opt.speed*6)}, 10000 - h * 100);
                        }

                        for(h = 0; h < hc; h++){
                            var del = h * opt.speed;
                            slidein(h, del);
                            slideout(h, del);
                        }
                    }

                }

            });
        }
    })
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:33:31.213

看起来`loaded`在每个循环之外永远不会被调用。如果我像这样修改代码，我可以让它在 chrome 中工作：

```
$.each(arr, function(index, value){
    for(d = 0; d < hc; d++){
        if(arr[index].x == d * opt.sw){
            cont.find('#bar' + d).append(arr[index].src);
            cont.find('#slice' + arr[index].id).css({'top': arr[index].y, 'left': 0});
        }
        loaded = (d == hc -1) ? true : false;

        if(loaded){
            $('.bar').css({'width': opt.sw, 'height': vc * opt.sh, 'overflow': 'hidden', 'top': 0, 'left': width + opt.sh});

            function slidein(h, del){setTimeout(function(){
                cont.find('#bar' + h).stop().animate({
                'left': h * opt.sw, 
                'opacity': 1}, opt.speed*10)}, del + 2000);
            }

            function slideout(h, del){setTimeout(function(){
                cont.find('div#bar' + h).stop().animate({
                    'width': 0,
                    'opacity': 0}, opt.speed*6)}, 10000 - h * 100);
            }

            for(h = 0; h < hc; h++){
                var del = h * opt.speed;
                slidein(h, del);
                slideout(h, del);
            }
        }
    }
}); 
```

# c# - 使用 htmlAgilityPack 从标签中抓取所有内部文本

> ID：15025736
> 
> 赞同：0
> 
> 时间：2013-02-22T13:51:35.683
> 
> 标签：c#, .net, xpath, html-agility-pack, web-scraping

我想从链接中删除所有单词[http://search.freefind.com/siteindex.html?id=59478474<r=10240&fwr=0&pid=i&ics=1](http://search.freefind.com/siteindex.html?id=59478474&ltr=10240&fwr=0&pid=i&ics=1) 我试过这样的事情：

```
HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = web.Load("http://search.freefind.com/siteindex.html?id=59478474&ltr=10240&fwr=0&pid=i&ics=1");
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//font[@class='search-index-font']//a");

if (nodes != null)
{

    foreach (HtmlNode n in nodes)
    {
         link = n.InnerText;
        my_link.Add(link);
        MessageBox.Show(link);
    }

}
else
    MessageBox.Show("no wordfound "); 
```

我的expexted输出应该像

```
a    
aa
aachhe
aagrashi
aagun
aaj
aam
aanka
aankhi
aar
aashman
abāddhō
abāddhōtā
abadh
..
.. 
```

但是没有用？？**它显示“找不到单词”**意味着它返回 null。在这种情况下，我怎样才能从 <a> 标记中获取所有文本？？？ ***谁能告诉我 SelectNodes("") 应该是什么？？？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:18:14.353

你的问题是

```
doc.DocumentNode.SelectNodes("//font[@class='search-index-font']//a"); 
```

返回`null`，如此[处所述](http://htmlagilitypack.codeplex.com/workitem/29175)。

那是因为`a`元素中没有属性等于您加载的 html中的`font`元素。`class``search-index-font``doc`

* * *

如果您更改传递给的 xpath`SelectNodes`以选择存在的内容，那么您的代码将采用不同的路径。在不知道您要实现什么的情况下，我无法提供进一步的建议。

* * *

您可以使用 HAP 来解析有效的 html，即使用它来识别脚本元素。然后你必须手动滚动一些东西来解析脚本标签的内部文本来提取你想要的东西。

最终，您想要的是孟加拉语单词列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:26:47.910

试试这个：

```
doc.DocumentNode.SelectNodes("//a[@class='search-index-links']"); 
```

代替

```
doc.DocumentNode.SelectNodes("//font[@class='search-index-font']//a"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:34:10.480

```
HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc =
    web.Load("http://search.freefind.com/siteindex.html?id=59478474&ltr=10240&fwr=0&pid=i&ics=1");
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//font[@class='search-index-font']");
string link = string.Empty;
if (nodes != null)
{
    foreach (var item in nodes)
    {
        var value =
        item.Elements("script").ToList();
        foreach (var items in value)
        {
            link += items.NextSibling.InnerText+ "\n";
        }
    }
    MessageBox.Show(link);
}
else
    MessageBox.Show("no wordfound "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:55:08.230

`<script>`您需要在标签（不是`<a>`您所说的标签）之后搜索下一个文本节点，在`<font class='search-index-font'>`. 这个 xpath 表达式可以解决问题：

```
//font[@class='search-index-font']/script/following-sibling::text()[1] 
```

而这段代码：

```
HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = web.Load("http://search.freefind.com/siteindex.html?id=59478474&ltr=10240&fwr=0&pid=i&ics=1");
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//font[@class='search-index-font']/script/following-sibling::text()[1]"); 
```

将返回您需要的文本节点：

```
a
aa
aachhe
aagrashi
aagun
aaj
aam
aanka
aankhi
aar
... 
```

# windows - 在 Windows 和活动目录上使用什么 git 服务器解决方案？

> ID：15025738
> 
> 赞同：5
> 
> 时间：2013-02-22T13:51:38.640
> 
> 标签：windows, git, version-control, active-directory, gitstack

我们正在寻找设置本地 git 服务器的最佳解决方案。我们的愿望清单是

*   在 Windows Server 2008R2 上运行
*   小团队 - 不到十个开发人员
*   易于设置
*   便于使用
*   用户的活动目录身份验证
*   强大的
*   web gui会很好
*   免费会很好

我们正在考虑的解决方案

*   gitosis 看起来很麻烦，而且没有 web gui
*   windows 文件共享上的裸 git - 看起来很简单，但当然没有 web gui
*   gitstack 看起来不错但不是免费的

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:59:47.173

我对[Atlassian 的 Stash](http://www.atlassian.com/software/stash/overview)有很好的体验。

10 个开发人员的费用为 10 美元，并支持具有多个 git 存储库的项目。

您无需设置任何东西，因为它带有集成的 git、ssh 和 http 服务器。（只是服务器本身 duh - 但它并不难，30 分钟就足够了）

它提供了一个不错的 Webgui。你应该检查一下，我猜有 30 天的测试许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:16:02.077

我们正在使用[GitLab](http://gitlab.org/)，它是 gitolite 的 Web 前端。可以使用 LDAP / ActiveDirectory 对 Web 服务器进行用户身份验证，尽管 git commit 访问是通过 ssh 密钥完成的。不过，此 UI 有助于管理密钥和存储库访问。GitExtensions 有一些对话框可以帮助我们的用户生成要上传的密钥（一次性操作）。我怀疑任何比这更漂亮的东西都是商业的。

# php - 将重新排序的列表的顺序提交到我的服务器

> ID：15025740
> 
> 赞同：1
> 
> 时间：2013-02-22T13:51:41.573
> 
> 标签：php, jquery, html, forms, post

请在这方面寻求一点帮助：

我在我正在构建的调查中实现了拖放重新排序功能，但是我不确定一旦用户重新排序后如何将列表的顺序提交到我的服务器。

这是用于重新排序的 JS：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script>
$(function() {
$(  "#sortable"  ).sortable();
$(  "#sortable"  ).disableSelection();
});
</script> 
```

和html：

```
<ol id="sortable">
<li><label for=""><input type="checkbox" name="resortable-option1" value="1">Option 1</label></li>
<li><label for=""><input type="checkbox" name="resortable-option2" value="2">Option 1</label></li>
<li><label for=""><input type="checkbox" name="resortable-option3" value="3">Option 1</label></li>
<li><label for=""><input type="checkbox" name="resortable-option4" value="4">Option 1</label></li></ol> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:13:55.667

尝试这样的事情：

```
$("#sortable").sortable({
      stop: function (event, ui) {

            //Serializes the sortable's item id's into an array of string
            var senderStrIndexArray = $(this).sortable("toArray");

            $.ajax({
                 type: "POST",
                 url: '...',
                 data: { senderOrderedServicesIds: senderStrIndexArray },
            });
      }           
});

$(  "#sortable"  ).disableSelection(); 
```

您将发送一个包含项目排序索引的数组，然后您可以将它们写入数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:25:01.740

这是一个使用表单并提交到 PHP 的示例：

动作页面：

```
 <?php
    if(isset($_POST["resortable-option"])){
       foreach($_POST["resortable-option"] as $item){
         echo $item."<br>";
       }
    }
 ?> 
```

HTML 表单：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script>
   $(function() {
      $(  "#sortable"  ).sortable();
      $(  "#sortable"  ).disableSelection();
   });
</script>
<form action="ActionPage" method="post">
   <ol id="sortable">
   <li><label for=""><input type="checkbox" name="resortable-option[]" value="1">Option 1</label></li>
   <li><label for=""><input type="checkbox" name="resortable-option[]" value="2">Option 2</label></li>
   <li><label for=""><input type="checkbox" name="resortable-option[]" value="3">Option 3</label></li>
   <li><label for=""><input type="checkbox" name="resortable-option[]" value="4">Option 4</label></li></ol>
   <input type="submit" value="send">
</form> 
```

# c++ - 对 std::pair 与 struct 的数组进行排序：哪个更快？

> ID：15025742
> 
> 赞同：1
> 
> 时间：2013-02-22T13:51:44.913
> 
> 标签：c++, sorting, struct, std-pair

我想知道对数组进行排序是否`std::pair`更快，还是对数组进行排序`struct`？

这是我的代码段：

**代码#1：**排序`std::pair`数组（按第一个元素）：

```
#include <algorithm>

pair <int,int> client[100000];

sort(client,client+100000); 
```

**代码#2：**排序`struct`（按`A`）：

```
#include <algorithm>

struct cl{
      int A,B;
}

bool cmp(cl x,cl y){
      return x.A < y.A;
}

cl clients[100000];

sort(clients,clients+100000,cmp); 
```

**代码#3：**排序`struct`（按`A`和内部运算符`<`）：

```
#include <algorithm>

struct cl{
      int A,B;

      bool operator<(cl x){
            return A < x.A;
      }
}

cl clients[100000];

sort(clients,clients+100000); 
```

**更新：**我使用这些代码来解决在线法官中的问题。我对代码 #1 的*时间限制*为 2 秒，并*接受*代码 #2 和 #3（在 62 毫秒内运行）。与其他代码相比，为什么代码 #1 需要这么多时间？区别在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:00:47.360

你知道`std::pair`是什么吗？它是一个结构（或类，在 C++ 中与我们的目的相同）。因此，如果您想知道什么更快，通常的建议适用：您必须对其进行测试并在您的平台上自己找出答案。但最好的选择是，如果您实现与 等效的排序逻辑`std::pair`，您将获得等效的性能，因为编译器并不关心您的数据类型的名称是`std::pair`什么。

但请注意，您发布的代码在功能上与`operator <`提供的`std::pair`. 具体来说，您只比较第一个成员，而不是两者。显然，这可能会导致一些速度增益（但可能不足以在任何实际程序中注意到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:01:17.847

我估计这两种解决方案之间没有太大区别。

但就像所有与性能相关的查询一样，不要依赖互联网上的人告诉他们是相同的，或者一个比另一个更好，而是自己进行测量。有时，实现上的细微差别会对实际结果产生很大影响。

话虽如此， 的 实现`std::pair`是一个具有两个成员的结构（或类），`first`和`second`，所以我很难想象这里有什么真正的区别 - 你只是用你自己的比较函数来实现你自己的对已经存在的对所做的相同的事情......无论是在类的内部函数中还是作为独立函数都不太可能产生太大的不同。

编辑：我做了以下“将代码混合在一起”：

```
#include <algorithm>
#include <iostream>
#include <iomanip>
#include <cstdlib>

using namespace std;

const int size=100000000;

pair <int,int> clients1[size];

struct cl1{
    int first,second;
};

cl1 clients2[size];

struct cl2{
      int first,second;

      bool operator<(const cl2 x) const {
            return first < x.first;
      }
};
cl2 clients3[size];

template<typename T>
void fill(T& t)
{
    srand(471117);   // Use same random number each time/ 
    for(size_t i = 0; i < sizeof(t) / sizeof(t[0]); i++)
    {
    t[i].first = rand();
    t[i].second = -t[i].first;
    }
}

void func1()
{
    sort(clients1,clients1+size);
}

bool cmp(cl1 x, cl1 y){
      return x.first < y.first;
}

void func2()
{
    sort(clients2,clients2+size,cmp);
}

void func3()
{
    sort(clients3,clients3+size);
}

void benchmark(void (*f)(), const char *name)
{
    cout << "running " << name << endl;
    clock_t time = clock();
    f();
    time = clock() - time;
    cout << "Time taken = " << (double)time / CLOCKS_PER_SEC << endl;
}

#define bm(x) benchmark(x, #x)

int main()
{
    fill(clients1);
    fill(clients2);
    fill(clients3);

    bm(func1);
    bm(func2);
    bm(func3);
} 
```

结果如下：

```
running func1
Time taken = 10.39
running func2
Time taken = 14.09
running func3
Time taken = 10.06 
```

我运行了 3 次基准测试，它们都在上述结果的 ~0.1 秒内。

Edit2：查看生成的代码，很明显“中间”函数需要更长的时间，因为比较是内联的`pair`and `struct cl2`，但不能内联`struct cl1`- 所以每次比较都会产生一个函数调用，而不是函数内部的一些指令。这是一个很大的开销。

# iphone - 如果用户更改日期，则订阅到期日期

> ID：15025747
> 
> 赞同：3
> 
> 时间：2013-02-22T13:52:10.060
> 
> 标签：iphone

我们的应用程序使用不可更新订阅来提供为期一年的内容访问。订阅收据存储在 iCloud（如果可用）和设备钥匙串中。有时还会调用一个 WS 来验证收据，但不记录交易。

我们的问题是，如果用户向后更改时钟（例如将日期设置为 2010 年），我们的订阅不会在一年后过期，而是现在三年（2013-2010）。

我们的解决方案是说超过一年的订阅是欺诈性的，收据被清除，生活还在继续。

但是，我的老板现在抱怨用户将时钟设置为过去六个月（不到一年还可以，但订阅持续 1.5 年而不是有效的一年）。

有没有更好的方法来处理设备时钟篡改，还是我们必须忍受的（我相信）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:56:09.593

如果您的应用程序从服务器获取内容，那么您可以存储“设备标识符”列表以及到期日期。

在您的服务器上，无论订阅是否过期，客户端时间都没有声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:10:44.843

正如我在上面的评论中所说，我会使用受信任的服务器检查时间，而不是使用本地时间。同样重要的是，一旦收据过期，立即将其删除或将其标记为过期，这样他们就无法关闭网络访问并回滚时间以使用它。

# shell - 如何增加 sed 捕获的变量？

> ID：15025749
> 
> 赞同：0
> 
> 时间：2013-02-22T13:52:19.703
> 
> 标签：shell, replace, sed, increment

我有一个可以捕捉短语的 sed 脚本`objID="x"`，其中 x 可以是任何正整数。

我想将它增加一个常数值，比如说整个文件中的 100。我怎样才能做到这一点？

```
sed 's/objID="\(\d\)"/objID="\1"/g 
```

我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:58:53.543

尝试这样做：

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")：

```
$ echo 'objID="1"' |
    perl -pe 's/(objID=")(\d+)(")/sprintf "%s%s%s", $1, $2+1, $3/ge'
objID="2" 
```

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
$ echo 'objID="1"' | awk -F'"' '/objID=/{print $1 $2+1 $3}'
objID="2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:04:12.680

正如我评论的那样，awk、perl 会更轻松地完成这项工作，但是如果 sed 是必须的要求，请查看以下示例：

（需要**Gnu Sed**）

```
kent$  echo 'objID="7"'|sed -r 's/(objID=")([0-9]+)(")/echo \1$((100+\2))\3/ge'
objID=107 
```

# asp.net - 在 Umbraco CMS 中制作域相关内容的方法

> ID：15025758
> 
> 赞同：0
> 
> 时间：2013-02-22T13:52:46.683
> 
> 标签：asp.net, umbraco

我的一个客户希望内容树中有一个“部分”，本地用户可以在其中创建本地新闻文章（从 Umbraco 内部）网站结构如下：

```
Content
     - mysite.com (Current hostname: mysite.com (english))
            - Frontpage
            - Some text page
            - Some text page
            - News
            - Local news
                 - Denmark
                      - News item 1
                 - Sweden
                      - News item 1
                 - England
                      - News item 1
                 - Norway
                      - News item 1 
```

现在，在新闻页面上，他们想要创建一个链接，即瑞典（Sverige）本地新闻页面，但前提是用户使用域访问他们的站点：mysite.se 而不是标准站点 .com。

创建这个的最佳方法究竟是什么？“问题”是主导航是使用在 Umbraco 的站点节点上设置的 mysite.com 主机名呈现的。因此，如果我输入带有域的站点：mysite.se，然后单击菜单项（即新闻链接），我将“重定向”到 .com 域。

非常感谢任何输入！:-) 如果上述某些内容需要详细说明，请告诉我。

提前致谢。

一切顺利，

博

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:31:49.280

我想我会通过使用 Umbraco (/config/UrlRewriting.config) 中的内置 UrlRewrite 选项来解决这个问题

首先，如果不需要将新闻文件夹放在一个站点内，我会将它们移到网站根目录之外。

其次，我会在 umbraco 中创建一个通用的新闻概览和新闻详情页面。

为了完成这项工作，我将以这种形式创建指向新闻概述和新闻详细信息页面的链接 /newsdetail/title-of-my-newsitem/nodeId-of-my-newsitem.aspx

然后我会让 UrlRewrite 模块将我的 url 重定向到 newsdetail.aspx 页面，并使用此重写规则将 nodeID 添加到查询字符串：

```
<add name="swedish_newsdetail_page"
 virtualUrl="^~myurl.se/news/(.*)/(.*)"
 rewriteUrlParameter="ExcludeFromClientQueryString"
 destinationUrl="~myurl.se/newsdetail.aspx?nodeId=$2"
 ignoreCase="true" /> 
```

可以为新闻概览页面创建类似的结构。

# oracle - 有没有办法在 Oracle Sql Developer 中找到用于创建用户的 ddl 脚本

> ID：15025762
> 
> 赞同：3
> 
> 时间：2013-02-22T13:52:57.827
> 
> 标签：oracle, oracle-sqldeveloper, toad

在 Toad 中，很容易找到一个 ddl 脚本来创建一个具有所有授权和角色的用户：

![在此处输入图像描述](../Images/bf59068b8553c98a54fbd8a11ae4309f.png)

在 Oracle SQL Developer 中，我找到了一个类似的选项，但它并不完整：

![在此处输入图像描述](../Images/46b0fd7a9acddd00013f6833568e2aab.png)

有没有办法在 Oracle SQL Developer 中拥有相同的 Toad 信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T14:24:20.190

它有点复杂，可能对图片更有意义，但我现在无法创建这些......但如果你进入“查看”菜单并选择“DBA”，你会在左侧看到第二个面板（标题为'DBA'，毫不奇怪）。

单击绿色 + 按钮并从对话框的下拉列表中选择您的连接；然后它将出现在该面板的“连接”下。展开该连接，然后展开“安全”，然后展开“用户”。您将看到列出的所有数据库用户。

右键单击用户并从上下文菜单中选择“创建类似...”，这将提供一个与您已经找到的非常相似的新对话框。

输入用户名和密码以使下一步更有意义，然后转到“SQL”选项卡，您将看到类似于 Toad 生成的内容。

您也可以使用该`DBMS_METADATA`包手动提取 DDL；已在[此处](https://stackoverflow.com/q/4468173/266304)和[DBA.SE](https://dba.stackexchange.com/q/30337)上进行了介绍。

# vba - 您可以在 MS Access 的选项卡控件中设置事件吗？

> ID：15025764
> 
> 赞同：1
> 
> 时间：2013-02-22T13:53:03.047
> 
> 标签：vba, ms-access

我整天都在网上搜索这个。但没有运气。

您可以设置进入/离开选项卡时的事件吗？

IE

```
OnExit(Tab1)
Do something 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:12:59.280

根据您的程序流程，您可以尝试：

```
Private Sub Combo3_Exit(Cancel As Integer)
    If IsNull(Me.Combo3) Then
        MsgBox "No exit"
        Cancel = True
    End If
End Sub

Private Sub Form_Current()
    Me.Combo3.SetFocus
    ''Or to refer to a subform from the main form
    Me.subformcontrolname.Form.Combo3.SetFocus
End Sub 
```

选项卡是否包含子表单或仅包含主表单中的控件？

子表单有一个 Exit 事件，因此如果您只担心进入子表单后不应该在未完成数据的情况下离开，您可以：

```
Private Sub subformcontrolname_Exit(Cancel As Integer)
    If IsNull(Me.subformcontrolname.Form.Combo3) Then
        Me.subformcontrolname.Form.Combo3.SetFocus
        MsgBox "No exit"
        Cancel = True
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:02:59.437

虽然这不是您想要的，但您可以不处理退出，而是简单地阻止用户单击其他地方。为此，请将一些代码附加到您的组合框1，这些代码基本上`.Enabled=X`为选项卡视图之外的所有元素设置 - 其中`X`由组合框的状态决定...

# django - 如何在测试中获取所有 django 响应表单数据

> ID：15025766
> 
> 赞同：2
> 
> 时间：2013-02-22T13:53:08.443
> 
> 标签：django, forms, testing, response

我想编写一个通用的 django 测试，通过简单地请求任意编辑 URL 来测试视图，在响应上下文中获取表单中的所有数据，然后将其发布到相同的 URL 而不进行更改。

django 是否提供了一种从响应对象获取所有这些表单数据的简单方法，即以任何响应对象的方式？一个问题是不知道表单在 response.context 中的位置。

编辑：澄清：- 如果响应 html 只有一个表单，则检索该表单中的所有数据，如果用户只需点击提交按钮，则将发送这些数据，并将其发布到相同的 URL。

睡了之后，使用 BeautifulSoup 来解析响应内容，查找表单并提取数据，这将是一个简单的解决方案，并且比查看 response.context（例如模板）更接近用户实际看到的内容不必呈现表单，因此用户可能实际上看不到它）。唯一的缺点是它会有点慢，我有数百个这样的测试要运行。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T09:15:35.920

您可以使用[django-webtest](https://github.com/kmike/django-webtest)，但在内部它与您使用 BeautifulSoup 的解决方案相同。

# exception - SML - 使用异常时静态范围不会导致任何错误

> ID：15025773
> 
> 赞同：1
> 
> 时间：2013-02-22T13:53:21.433
> 
> 标签：exception, programming-languages, functional-programming, sml, smlnj

给定以下代码：

```
exception E of int;
fun g(y) = raise E(y);
fun f(x) = 
    let 
      exception E of real;
      fun z(y)= raise E(y);
    in 
      x(3.0);
      z(3)
    end;
f(g); 
```

在 SML 中执行代码时，我得到：

```
stdIn:216.8-216.12 Error: operator and operand don't agree [literal]
  operator domain: real
  operand:         int
  in expression:
    z 3 
```

很好 - 我知道该行`z(3);`会导致错误，因为`z`throws`int`而不是`real`.

但我的问题是线路`x(3.0);`，为什么它不会导致错误？

根据我的理解，`x`是`g(y)`，当我们执行时，`x(3.0)`我们实际上执行`g(3.0)`，但`g`只抛出类型的异常`int`，但我们传递给`g`值`3.0`，因此`g`会抛出一个`real`值，所以应该是违规，不是吗？

如果有人能解释为什么执行时没有发生错误，我将不胜感激`x(3.0)`。

谢谢

**编辑：**

当我删除`z(3);`时，意思是：

```
- fun f(x) =
=     let
=       exception E of real;
=       fun z(y)= raise E(y);
=     in
=       x(3.0)
=
=     end;
val f = fn : (real -> 'a) -> 'a
- f(g); 
```

输出是：

```
stdIn:11.1-11.5 Error: operator and operand don't agree [tycon mismatch]
  operator domain: real -> 'Z
  operand:         int -> 'Y
  in expression:
    f g
- 
```

所以，正如 U 所见，在这两种情况下我们都会得到错误。

因此，我回到第一方：为什么当两者都`x(3.0)`出现时`z(3)`（参见代码1，帖子开头发布的第一个代码），为什么SML只提到第二行（`z(3);`）的错误引起的，而不是第一行引起的错误 ( `x(3.0);`)。

再次 10 倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:17:03.433

您的问题在于 x 是一个传递给 f 的函数，因此在键入函数 f 时，它总是会为参数 x 提供正确的类型，因为它不受任何约束。在推断函数的类型时，您拥有一个函数应用程序这一事实`f(g)`没有任何作用`f`。

如果我们将局部函数移到 的`z`定义之外`f`，我们最终会得到一些更简单的东西，它将键入

```
exception R of real;
fun z(y)= raise R (y);

exception I of int;
fun g(y) = raise I (y);

fun f(i, r) = (i(3.0); r(3)) 
```

但是，当我们调用时`f(g,z)`，最终会出现以下错误，因为这两个函数的类型不正确

```
- f(g, z);
stdIn:78.1-78.8 Error: operator and operand don't agree [tycon mismatch]
  operator domain: (real -> 'Z) * (int -> 'Y)
  operand:         (int -> 'X) * (real -> 'W)
  in expression:
    f (g,z) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:36:31.773

为了补充 Jesper 的出色回答：换句话说，调用`x`inside没有任何问题`f`。如果您删除对 的错误调用`z`，然后`f`在 SML 提示符中键入，那么您应该看到类型系统已经推断出类型

```
(real -> 'a)  -> 'a 
```

为了它。这种类型非常好，它只是稍后在程序中的*调用*是错误类型的。`f`因为与要求`g`的参数类型不匹配`real -> 'a`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T19:15:43.103

最初的误解源于不了解何时检测到类型错误。标准 ML 是一种强静态类型的语言。这意味着类型检查都是在编译时完成的，当函数第一次被解释器读取时，而不是在运行时。这意味着类型错误是在代码执行之前生成的，Jesper 正确地指出了这一点。这两种类型错误正是 Jesper 在 f(g) 表达式和 z(3) 表达式中指出的地方。编译表达式时，表达式 x(3.0) 没有任何问题。如果静态类型检查根本没有阻止程序运行，那只会有问题。像 Python 这样的动态类型语言将允许该程序运行并在计算 x(3.0) 表达式时引发 Ron 建议的异常。

# javascript - 使用 URL 启动应用程序

> ID：15025778
> 
> 赞同：2
> 
> 时间：2013-02-22T13:53:47.783
> 
> 标签：javascript, iphone, ios

我有一个网页，它检查用户代理并相应地重定向：

1.  首次打开应用商店下载应用/如果应用已安装则打开应用

2.  为所有其他用户代理重定向到桌面站点

现在这里的问题是：如果应用程序被删除，它会抛出类似 `error: page URI not supported`.

有没有办法检查用户是否删除了应用程序？

PS（只能使用javascript来做到这一点）。谢谢

# javascript - 如果计数器达到最大计数计数器 ++ 否则计数器 = 0 在 javascript

> ID：15025794
> 
> 赞同：-3
> 
> 时间：2013-02-22T13:54:26.213
> 
> 标签：javascript, arrays, image, max

好的，所以我想如果我的计数器达到最大计数，它会重新开始，默认计数器编号为 0 这是我的代码：

```
var picCount = 0; // global
 var maxCount = 4;
 //Pictures, to add more then 4 pics, add var picFive = "link to image here", var picSix ="bla", you get it.. add in picArray ,picFive and ,picSix
 //To change the time delay, change it at the body onload and on the setTimeout
 var picOne = "http://screenshots.nl.sftcdn.net/nl/scrn/3342000/3342167/modloader-for-minecraft-02-700x406.jpg"
 var picTwo = "http://media.moddb.com/images/downloads/1/31/30912/minecraft_blox.png"
 var picThree = "http://www.mupload.nl/img/rl6zeofbb.png"
 var picFour = "http://www.mupload.nl/img/rl6zeofbb.png"

 var picArray = [picOne, picTwo, picThree, picFour]

 //  
 // gets next picture in array
     function nextPic() { // check if adding 1 exceeds number of pics in array
         if (picCount.length < maxCount.length) {
             picCount = (picCount + 1 < picArray.length) ? picCount + 1 : 5000;
             // build the image to write to page using the new pic reference
             var build = '<img border="0" src="' + picArray[picCount] + '" width="649">\n';
             document.getElementById("imgHolder").innerHTML = build;
             // repeat this every    10 seconds. 
             setTimeout('nextPic()', 10 * 1000) //setTimeout is here
         } else {
             picCount = (picCount - maxCount < picArray.length) ? picCount + 1 : 5000;
             // build the image to write to page using the new pic reference
             var build = '<img border="0" src="' + picArray[picCount] + '" width="649">\n';
             document.getElementById("imgHolder").innerHTML = build;
             // repeat this every    10 seconds. 
             setTimeout('nextPic()', 10 * 1000) //setTimeout is here
         }
     } 
```

好的，所以我希望你们能帮助我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:20:41.317

```
var currentPic = 0;
var picArray= ["http://screenshots.nl.sftcdn.net/nl/scrn/3342000/3342167/modloader-for-minecraft-02-700x406.jpg",
               "http://media.moddb.com/images/downloads/1/31/30912/minecraft_blox.png",
               "http://www.mupload.nl/img/rl6zeofbb.png",
               "http://www.mupload.nl/img/rl6zeofbb.png"];

function nextPic()  {
    (currentPic < picArray.length) ? currentPic++ : currentPic = 0;
    var build='<img border="0" src="'+picArray[currentPic]+'" width="649">';
    document.getElementById("imgHolder").innerHTML=build;
}

setTimeout('nextPic()',10 * 1000); 
```

我做了一些更改，使您的代码更清晰。一些技巧：

*   在将图像 URL 放入数组之前，无需将它们存储在 vars 中。只需用它们初始化您的数组。
*   不要重复自己。每当您发现自己在多个地方使用完全相同的代码时，您可能需要重新考虑如何解决问题。
*   查找“三元运算符”。在我看来，它使简单的条件语句更易于阅读。
*   无需使用 maxCount - 最大计数将是您的 picArray 的长度。
*   尽管通常不需要，但请尝试以分号结束所有语句。
*   不要介意某些人的精英态度，但与此同时，在提出问题之前尽可能多地进行研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:07:58.667

那是很多乱七八糟的代码。我对实现的修复可能看起来像这样：

```
var currentPic = 0;
var picOne = "http://screenshots.nl.sftcdn.net/nl/scrn/3342000/3342167/modloader-for-minecraft-02-700x406.jpg"
var picTwo = "http://media.moddb.com/images/downloads/1/31/30912/minecraft_blox.png"
var picThree = "http://www.mupload.nl/img/rl6zeofbb.png"
var picFour = "http://www.mupload.nl/img/rl6zeofbb.png"

var picArray= [picOne,picTwo,picThree,picFour]

function nextPic()  {
    if (currentPic < picArray.length) {currentPic++;}
    else {currentPic = 0;}

    var build='<img border="0" src="'+picArray[currentPic]+'" width="649">';
    document.getElementById("imgHolder").innerHTML=build;
    // repeat this every    10 seconds. 
    setTimeout('nextPic()',10 * 1000)//setTimeout is here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:10:04.543

尽管我确信您的代码中存在许多其他问题，但我相信这一行是您在问题中解决的特定问题的原因：

```
if (picCount.length < maxCount.length) { 
```

`maxCount`并且`picCount`只是数字。它们没有长度属性。将其更改为：

```
if (picCount < maxCount) { 
```

# javascript - 用 Cheerio 执行抓取的 JavaScript

> ID：15025800
> 
> 赞同：5
> 
> 时间：2013-02-22T13:54:54.967
> 
> 标签：javascript, node.js, web-scraping, cheerio

我有一个网页，其中有一些 JS API 不会改变 dom，但会返回一些数字。我想编写一个 NodeJS 应用程序来下载此类页面并在下载页面的上下文中执行这些功能。

我正在寻找 Cheerio 进行页面抓取.. 但是虽然我看到使用它导航和操作 DOM 是多么容易，但我看不到任何运行页面功能的访问权限。有可能做到吗？

我应该看看 jsdom 吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T01:52:51.820

听起来您想使用 PhantomJS，它将提供完全渲染的输出，然后在上面使用cheerio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:27:30.453

Cheerio 和 jsdom 都是 HTML 抓取工具，没有执行 JavaScript 的概念。如果您希望访问的 API 是用 JavaScript 编写的，则几乎没有什么可以阻止您提取它们并在 node.js 中运行它们。但请注意，下载/执行任意 JavaScript 可能会带来巨大的安全风险。如果您想模拟浏览器的行为，请查看[http://phantomjs.org/](http://phantomjs.org/)。这是 Node 的无头浏览器，可以做普通浏览器可以做的所有事情。

# javascript - 如何使用 javascript 更改 div 内容？

> ID：15025807
> 
> 赞同：0
> 
> 时间：2013-02-22T13:55:27.313
> 
> 标签：javascript, jquery, dom, html

如何使用 javascript 将 div 更改为另一个 div？

我想更改 div 的内容，但它都是纯文本，没有样式，我希望它被设置样式。有没有办法改变内容或者我需要改变整个 div 以及如何改变？我没有任何线索！！

这是网站：[http ://www.websteam.nl/index2.html](http://www.websteam.nl/index2.html)

提前致谢！

我所拥有的是：

```
function wijzigTekst(inhoud) {document.getElementById('transbox').innerHTML = inhoud; } 
```

这是html：

```
<ul id="nav">
<li id="nav-1"><a href="#" onmousedown="wijzigTekst('hoi')">Home</a></li>
<li id="nav-2"><a href="#" onmousedown="wijzigTekst('transsbox')">School</a></li>
<li id="nav-3"><a href="#" onmousedown="wijzigTekst('is')">Over Websteam</a></li>
<li id="nav-4"><a href="#" onmousedown="wijzigTekst('de')">Contact</a></li>
<li id="nav-5"><a href="#" onmousedown="wijzigTekst('tekst')">Project</a></li></ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:17:24.973

创建 CSS 样式，将内容添加到 div 中，它会自动采用样式

CSS

```
h1{
    border:solid 2px #009;
    padding:5px 0px;
    font-family:Tahoma, Geneva, sans-serif;
    background-color:#000;
    color:#FFF;
} 
```

JavaScript

```
function changediv(){
    var div = document.getElementById("divData");
    div.innerHTML = "<h1>Hello World</h1>";
} 
```

HTML

```
<a href="javascript:changediv();">Change Data</a>
<div id="divData"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:30:05.317

或通过使用 jquery ：

CSS

```
#text {
    /* style */
} 
```

HTML

```
<div id="transbox">
    <div id="text"></div>
</div> 
```

JS

```
$('#transbox #text').html('your text'); 
```

# regex - 使用正则表达式替换 XML 输出中包含的标记之间的所有内容

> ID：15025810
> 
> 赞同：0
> 
> 时间：2013-02-22T13:55:40.037
> 
> 标签：regex, plsql

我一直在互联网上寻找解决这个问题的方法。基本上，我正在使用公司提供的网络服务，该服务运行我们的支持软件来检索客户票证并通过我们的系统输出它们（取决于过滤），以便客户可以从他们的仪表板中看到他们当前有效的支持票证。我已经设法从通过 Web 服务返回的 XML 中获取所需的标签，并将它们的内容放在一个 html 表中（因此在表中逐行列出活动票证），因为票证描述标签填充了来自客户发送的电子邮件的内容，有很多讨厌的冗余 css 和样式已应用于我要删除的电子邮件。

到目前为止，我已经设法使用“替换”功能来替换此电子邮件内容中的一些冗余内容 ->

```
 l_html_build := replace(l_html_build,'&lt;','<');
        l_html_build := replace(l_html_build,'&gt;','>');
        l_html_build := replace(l_html_build,'&amp;lt;','');
        l_html_build := replace(l_html_build,'&amp;gt;','');
        l_html_build := replace(l_html_build,'&amp;nbsp;','&nbsp;'); 
```

但是我现在需要覆盖添加了各种垃圾的 p 标签，以便它们成为标准的 p 标签->

```
 From this:
    <p 0in;&quot;="" 3.0pt="" padding:="" 1.0pt;="" solid="" border-top:="" none;="" _mce_style=""border:" 0in&quot;="" 0in="" 1.0pt;padding:3.0pt="" #b5c4df="" style=""border:none;border-top:solid">

    To this:
    <p> 
```

我已经研究过使用此处列出的 regEXP 函数[psoug](http://psoug.org/snippet/Regular-Expressions--REGEXP_REPLACE_882.htm)但这似乎需要每次都执行一个 select 语句。我需要操作的数据存储在一个名为 l_html_build 的 CLOB 中，所以有什么方法可以使 regEXP 函数以类似于上面的替换函数的方式使用，或者有没有我不知道的替代方法？

如果这是一个菜鸟问题，我很抱歉。我的专长在于前端开发、PHP 和 MySQL，但不幸的是，在我的新角色中，我现在需要一些 PL/SQL。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:42:04.747

知道：

*   没有解析 HTML 的标准 PL/SQL 包。
*   [您无法使用 regex 可靠地解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。此外，Oracle 只支持基本的正则表达式，限制了它的功能。
*   你想留在 PL/SQL

你只剩下几个选择（我能想到的）：

1.  自己编写一个简单的过程，它可以在大多数情况下工作（但会有很多异常会破坏你的解析器）。
2.  使用 java 解析器，在数据库中加载类，从 PL/SQL 调用 java。Oracle 带有它的集成 jvm，所以这不需要额外的设置。

如果您想要可靠性，我会选择选项（2），或者如果可以接受不常见但不可避免的损失，我会选择选项（1）。

* * *

由于您的内容将来自电子邮件客户端，我们可以假设只有一小部分（可以忽略不计？）会有非常模糊的 HTML。

在这种情况下，您可以从可能需要一些调整的简单正则表达式开始：

```
SQL> SELECT regexp_replace(
  2  '<p1 3.0pt="" padding:="" #b5c4df="">
  3  text
  4  </p>',
  5                        '<([[:alpha:]]+)[^>]*>',
  6                        '<\1>') remove_attr_simple
  7    FROM dual;

REMOVE_ATTR_SIMPLE
------------------
<p>
text
</p> 
```

这将无法捕获棘手的有效 HTML（例如`<P attr=">">`），但由于您的输入有点标准，这应该足够好。您可能需要使用另一个过程删除 HTML 注释——我不确定是否可以使用正则表达式来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:11:00.173

SQL 确实不是这项工作的最佳工具。正则表达式也不能可靠地执行这种任务。您最好使用 XML 解析器提取数据并以另一种语言处理它。

据推测，甲骨文本身并没有发送这些电子邮件。发送什么程序，您可以在那时添加一些程序处理吗？

由于您已经了解 PHP，[因此这里讨论在 PHP 中解析 HTML/XML](https://stackoverflow.com/q/3577641/1919238)。大多数其他语言都有类似的工具。

# python - 在 LXML 中合并标签

> ID：15025811
> 
> 赞同：1
> 
> 时间：2013-02-22T13:55:44.167
> 
> 标签：python, merge, lxml, tail

所以：我们有一个 XML 文档：

```
<items>
  <item id="1">some text</item>
  <item id="2">some <b>bold</b> text which carried onto the next line,</item>
  <item id="3"> and is <b>bold, <i>italic, <u>and underlined</u></i></b>!</item>
  <item id="4">some more boring text <i>with tags</i></item>
</items> 
```

我们知道我们想要组合项目 2 和 3 的内容，所以我们有：

```
<item id="2_3">some <b>bold</b> ... next line,
 and is <b>bold, <i>it ... </b>!</item> 
```

处理标签内容的最干净的方法是什么，这样我们就不会丢失任何嵌套标签/尾随文本？

`list(item)`或者`item.getchildren()`只是给我粗体标签 - 即不是直接的项目文本。

我们可以尝试`item[-1].tail`给它`text`第二个项目，但这看起来非常笨拙——一定有更好的方法，对吧？

# c# - 在 ConfigurationManager 中添加应用程序设置而不保存

> ID：15025812
> 
> 赞同：0
> 
> 时间：2013-02-22T13:55:45.603
> 
> 标签：c#, .net, configurationmanager

我正在从数据库中选择我的应用程序设置。我想在运行时将这些设置添加到我的应用程序中。我不想使用配置文件，因为我不想让任何人看到我的设置。

如果我使用：配置配置 = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

然后进行设置。问题是我必须保存并刷新将配置物理保存在文件中的设置。

如果我直接使用 ConfigurationManager.Appsettings["key"] 它还需要提前在应用程序设置中有键（我把它们没有值）。

我只想在内存中维护我的全局设置，以便用户或任何人看不到设置。解决办法是什么 ？

# listview - WinRT Metro ListView content row/size limit

> ID：15025822
> 
> 赞同：0
> 
> 时间：2013-02-22T13:56:15.573
> 
> 标签：listview, microsoft-metro, windows-runtime

Regarding WinRT `ListView`...

1.  Is there a row or size limit on the control. i.e, will it render only up to a certain number of rows?

**OR**

1.  Will the `ListView` keep filling with items until an `OutOfMemoryException` is reached, or all data is loaded?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:01:37.540

you can specify height / width properties to ensure that it doesn't grow beyond those.

I prefer to use grid layout and force listview to have that as max size.

The listview support data virtualisation.

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listview.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listview.aspx)

This means that any data that is not visible on screen isn't rendered and will only be rendered if it comes into view. this is the default option.

# session - symfony2/fos-user-bundle：按实体登录用户

> ID：15025825
> 
> 赞同：0
> 
> 时间：2013-02-22T13:56:26.037
> 
> 标签：session, login, symfony-2.1, csrf, fosuserbundle

我在 symfony2 控制器中有一个用户实体，我需要登录该用户。显然我不明白该过程如何使用 Csrf 令牌并登录用户。

我必须做什么才能登录用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:21:24.210

拥有一个用户对象，您可以通过编程方式登录/验证用户

```
 $token = new UsernamePasswordToken($user, $user->getPassword(),
                                       "public", $user->getRoles());

    $this->get("security.context")->setToken($token);

    // Trigger login event
    $event = new InteractiveLoginEvent($request, $token);
    $this->get("event_dispatcher")
         ->dispatch("security.interactive_login", $event); 
```

您需要包含此类

```
use Symfony\Component\EventDispatcher\EventDispatcher,
    Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken,
    Symfony\Component\Security\Http\Event\InteractiveLoginEvent; 
```

# c++ - C++ 函数已经定义了吗？

> ID：15025829
> 
> 赞同：0
> 
> 时间：2013-02-22T13:56:32.090
> 
> 标签：c++, visual-c++

在 cpp 文件的顶部，我有

```
namespace PQL {
    class Synonym {
    ...
    public:
        ...
        int size();
    };
}

// removing the below chunk makes it work
int Synonym::size() {
    return ids.size();
} 
```

为什么底部块使代码失败？我正在创建函数的实现？其他函数定义了类似的工作方式。

**更新**：

**[过期（死）链接](http://pastie.org/6316623)**

我得到的错误看起来像：

> `Error 1 error LNK2005: "public: int __thiscall PQL::Synonym::size(void)" (?size@Synonym@PQL@@QAEHXZ) already defined in main.obj H:\Dropbox\Sch\CS3202\SPA_CPP\SPA\pql.obj`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:59:09.093

因为`Synonym`不是全局范围内的名称。

要么使用

```
int PQL::Synonym::size() {
    return ids.size();
} 
```

或在命名空间内实现该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:22:05.213

根据您的评论，我将其放在一起：您将所有内容放在一个 Cpp 文件中，并将该文件包含在不同的其他文件中。这些文件中的每一个都会编译，并且这些文件中的每一个都有一个`PQL::Synonym::size()`. 链接时，链接器会看到所有这些定义，但不知道选择哪一个。

将您的代码拆分为头文件和源文件，并将头文件包含在其他文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:42:29.113

这是因为您的代码位于头文件中并包含在多个编译单元中：

```
 inline int Synonym::size() {
//  ^^^^^^^
        return ids.size();
    } 
```

添加 inline 告诉链接器可能有多个定义。

注意：关键字“内联”与现代编译器中的代码内联无关。

### 作为一个非常重要的说明。

您的头文件包含：

```
 using namespace std;
 // and
 using namespace PQL; 
```

这是一个非常糟糕的主意。您现在正在对使用您的代码的任何人强制执行此操作。我永远不会使用您的头文件，因为它会污染我的代码并导致无法预料的问题。可以在您自己的源文件中执行此操作（当您知道并理解问题时），但您永远不应将其强加给其他开发人员。

请参阅：[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/q/1452721/14065)

# javascript - 画布为画布中的不同绘图应用不同的图像模式？

> ID：15025830
> 
> 赞同：1
> 
> 时间：2013-02-22T13:56:34.913
> 
> 标签：javascript, html, canvas, html5-canvas

我有 4 张图片要在画布上显示。我有4张图纸。每个绘图的每个图像。但是当我运行循环时，它会为所有绘图应用最后一个图像。

我如何将不同的图像图案应用于不同的图纸？

谢谢你。

```
function draw(){
    var ctx = $('#canvas')[0].getContext('2d');

    var $width = $('#canvas').parent().width();
    var $canvas_width = 380;
    var $canvas_margin = 20;
    var $canvas_height = 810;

    var $total_draw = $width / Math.ceil($canvas_width);
    var $start = 0;

    for(var i = 1; i <= $total_draw + 1; i++){
        var image = new Image();
        image.onload = function(){
            ctx.save();
            ctx.beginPath();
            ctx.moveTo($start,0);
            ctx.lineTo($start + $canvas_width,0);
            ctx.lineTo($start, $canvas_height);
            ctx.lineTo(-380 + $start, $canvas_height);
            ctx.lineTo($start,0);
            ctx.fillStyle = ctx.createPattern(image, "no-repeat");
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
            ctx.restore();

            $start = $start + ($canvas_width + $canvas_margin);
        };

        image.src = 'img/samples/b'+i+'.jpg';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:09:44.557

由于您使用相同的变量 ( *image* )，因此 image.src 每次都会更改，直到您到达最后一次迭代。

该循环在加载任何图像之前运行他的 4 个循环，然后加载最后一个图像并调用 image.onload 并绘制你的东西。

要解决此问题，请将所有内容放在*for*循环之外并使用不同的变量名称。或者你可能会做这样的事情：

```
var imgArray = new Array();
for (var i=1; i<=4; i++)
{
    imgArray[i] = new Image();
    imgArray[i].src = 'img/samples/b' + i + '.jpg';
    imgArray[i].onload = function(){
            ctx.save();
            ctx.beginPath();
            ctx.moveTo($start,0);
            ctx.lineTo($start + $canvas_width,0);
            ctx.lineTo($start, $canvas_height);
            ctx.lineTo(-380 + $start, $canvas_height);
            ctx.lineTo($start,0);
            ctx.fillStyle = ctx.createPattern(image, "no-repeat");
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
            ctx.restore();

            $start = $start + ($canvas_width + $canvas_margin);
        };
} 
```

所以*onload*函数适用于不同的对象。

**更新**

希望您对该代码感到满意 :) 抱歉，我没有找到更好的带有序列号的图像。

[http://jsfiddle.net/r5QAF/2/](http://jsfiddle.net/r5QAF/2/)只需将此代码与您的代码合并，您可能会得到您想要的东西

这里有一些关于你面临的问题的阅读（循环中的javascript闭包）[http://www.mennovanslooten.nl/blog/post/62](http://www.mennovanslooten.nl/blog/post/62)

# php - Box-api V2上传文件curl php返回false

> ID：15025835
> 
> 赞同：1
> 
> 时间：2013-02-22T13:56:46.623
> 
> 标签：php, curl, box-api

我正在尝试通过 Box-API v2 从 PHP 上传文件，但我只得到一个**布尔错误响应。** 我认为这是由 CURL 引起的，而不是 Box-API，但我在过去五个小时内一直在努力，但我找不到解决方案。任何的想法？？暗示的代码是：注意：文件存在并且可以从代码访问并且令牌是好的（对API的其他调用工作正常）

```
const CONTENT_ENDPOINT = 'https://api.box.com/2.0/';
$file = "unexeceles.xlsx";

private $defaultOptions = array(
        CURLOPT_SSL_VERIFYPEER => false,
        CURLOPT_VERBOSE        => true,
        CURLOPT_HEADER         => true,
        CURLINFO_HEADER_OUT    => false,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FOLLOWLOCATION => false,
    );    

public function putFile($file) {

        $options = $this->defaultOptions;
        $options[CURLOPT_HTTPHEADER] = array ("Authorization: Bearer ".$this->token);
        $options[CURLOPT_POST] = true;
        $postfields = array();
        $postfields["filename"] = '@'.$file;
        $postfields["parent_id"] = 0;

        $options[CURLOPT_POSTFIELDS] = $postfields;
        $handle = curl_init(BoxConfig::CONTENT_ENDPOINT."files/content");

        curl_setopt_array($handle, $options);

        $response = curl_exec($handle);

        curl_close($handle);
        if (is_string($response)) {
            $response = $this->parse($response);
        }

        return $response;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:19:53.900

最后我找到了解决方案。

问题是文件的相对路径，文件存在并且可以访问表单代码，但 CURL 似乎需要文件的整个路径。

非常有用的函数 curl_errno($handle)

> 如果（curl_errno（$handle））{
> 
> ```
> echo 'Curl error: ' . curl_error($handle); 
> ```
> 
> }

# java - 在java中解析这个字符串的最佳方法是什么？

> ID：15025837
> 
> 赞同：-4
> 
> 时间：2013-02-22T13:57:00.680
> 
> 标签：java, parsing

在 java 中解析这个字符串的最佳方法是什么？

```
Admin State    State          Type             Interface Name
-------------------------------------------------------------------------
Enabled        Connected      Dedicated        Local Area Connection

Enabled        Connected      Dedicated        Local Area Connection 2 
```

每个单词之间是空格，不是制表符，不是其他任何东西，正如您所看到的空格数不相等，并且诸如“局部区域连接”之类的单词之间也是空格。

实际上我想要我所有网络接口的名称和它们的状态。这是 Windows 中“netsh”命令的输出。（如果您知道其他命令女巫可以将此信息作为键：值获取我，这将很有帮助。或者可能有此命令的参数来格式化它？）

如果我能得到这样的东西，那将有很大帮助：

**接口名称：本地连接
类型：专用
状态：已连接
管理状态：已启用**

**接口名称：本地连接 2
类型：专用
状态：已连接
管理状态：已启用**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:02:21.263

您应该使用 Java 功能来获取网络接口。该课程[`NetworkInterface`](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html)提供您正在寻找的内容。

您可以在此处找到示例：[列出网络接口地址](http://docs.oracle.com/javase/tutorial/networking/nifs/listing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:04:50.757

```
BufferedReader b = new BufferedReader(new StringReader(myString));

String line;
while (!(line = b.readLine()).startsWith("-----")) {/*skip*/};

while ((line = b.readLine()) != null) {
    if (line.trim().equals("")) continue; // skip blank lines
    String[] splat = line.split(" +",4);
    System.out.println("Interface Name : " + splat[3]);
    System.out.println("Type : " + splat[2]);
    System.out.println("State : " + splat[1]);
    System.out.println("Admin State : " + splat[0]);
}
b.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T14:01:17.720

如果列的宽度已知，则用于`String.substring(..)`获取每列和`trim()`结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:01:21.620

如果你知道职位，你可以这样做

```
String state = line.substring(15, 30).trim(); 
```

如果您不知道，则解析已知标题的第一行（如`line.indexOf("State")`），这将告诉您位置。

```
// for the header line
int stateBegin = line.indexOf("State");
int typeBegin = line.indexOf("Type");

// for all other lines
String state = line.substring(stateBegin, typeBegin).trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T14:02:20.347

如果没有列分隔符：

1 - 它似乎是固定大小的字段。这意味着列将始终具有 X 个字符，并且下一列将始终从 X+1 开始。在您的示例中，“Admin State”总是有 15 个字符，“State”总是从第 16 个字符开始。“状态”也有 15 个字符 [...]

2 - 如果固定大小的字段不起作用，您可以尝试按 2 个空格解析，但这样容易出错

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T14:07:00.670

```
String s ="Admin State    State          Type             Interface Name";
String[] str = s.split("  +");
for(String ss: str)
    System.out.println(ss); 
```

试试上面的代码，用多个空格分割字符串。

输出：

```
Admin State
State
Type
Interface Name 
```

# java - Java中的小写属性

> ID：15025840
> 
> 赞同：1
> 
> 时间：2013-02-22T13:57:07.723
> 
> 标签：java, properties, jboss

有谁知道Java的属性文件中是否可以使用小写字母？目前当我有示例时：

```
My_Conf=1234567 
```

我得到，在检查财产时

```
My_Conf=null 
```

在代码中。

该代码假定在 Jboss servlet 引擎中运行。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:00:11.370

是的，文件中绝对有可能包含小写字符`.properties`。问题可能是您的代码没有加载文件。

有关更多信息，请查看此处：[http ://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:09:50.063

出于调试目的尝试此操作：

```
 String filename = "example.properties";
    Properties properties = new Properties();
    BufferedInputStream stream = null;
    try {
        stream = new BufferedInputStream(new FileInputStream(filename));
        try {
            properties.load(stream);
            String prop = properties.getProperty("My_Conf");
            System.out.println(prop);
        } catch (IOException e) {
            System.out.println("IOException");
        }finally{
            try {
                stream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } catch (FileNotFoundException e) {
        System.out.println("File not found");
    } 
```

# batch-file - 如何使用参数调用 Run()

> ID：15025843
> 
> 赞同：12
> 
> 时间：2013-02-22T02:53:45.980
> 
> 标签：batch-file, parameters, vbscript

我在 Windows Batch 中有这行代码

```
start "" /wait /i "C:\Program Files\Sandboxie\Start.exe" /box:NetBeans /wait "C:\Program Files\NetBeans 7.3\bin\netbeans64.exe" 
```

我想通过 VBScript 运行它。但我不知道如何在内部有空格的参数中传递路径。

我想出了这样的事情：

```
Set objShell = CreateObject("Wscript.Shell")
objShell.Run("C:\Program Files\Sandboxie\Start.exe" /box:NetBeans /wait "C:\Program Files\NetBeans 7.3\bin\netbeans64.exe"), 1, True 
```

但是有一个错误：

> 预期的： '）'

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-22T03:19:52.687

在文字字符串中，单个双引号字符由两个双引号字符表示。因此，请尝试以下操作：

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run """C:\Program Files\Sandboxie\Start.exe"" /box:NetBeans /wait ""C:\Program Files\NetBeans 7.3\bin\netbeans64.exe""", 1, True
Set objShell = Nothing 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-06T15:48:56.117

我喜欢使用以下系统来嵌入引号：

```
strCommand = Quotes("C:\Program Files\Sandboxie\Start.exe") & _
         " /box:NetBeans /wait " &                            _
         Quotes("C:\Program Files\NetBeans 7.3\bin\netbeans64.exe")

Function Quotes(ByVal strValue)
    Quotes = Chr(34) & strValue & Chr(34)
End Function 
```

它更容易阅读。

# html - Icomoon 自定义字体多种颜色

> ID：15025847
> 
> 赞同：4
> 
> 时间：2013-02-22T13:57:31.327
> 
> 标签：html, css

我正在使用 Icomoon 创建自定义字体图标，我有一种情况，图标需要在同一范围内，例如：

```
<span class="glyph2" aria-hidden="false" data-icon="&#xe000; &#xe001;"></span> 
```

但是它们都需要是不同的颜色。有可能做到这一点吗？

这是包含所有代码的[JSFIDDLE](http://jsfiddle.net/yFeKM/)，但我似乎无法让自定义字体在 jsfiddle 中工作。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:49:48.617

我认为仅使用 data-icon 属性是不可能的。

您可以改用 IcoMoon 的`icon-`类`before`，并在一个上使用 CSS 伪选择`after`器，在第二个上使用选择器。

```
icon1:before {
    content: "A";
    color:red;
}

.icon2:after {
    color: blue;
    content: "B";
} 
```

我已经在[Fiddle](http://jsfiddle.net/yFeKM/10/)中证明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:45:14.467

我无法在小提琴中证明这一点，但看起来它可以工作。

IcoMoon 的样式在 :before 伪选择器中。因此，对于 css，首字母伪选择器应该对生成的内容起作用，因此包括 :before 数据。

所以，包括

```
.glyph2:first-letter {background-color: blue; color:white} 
```

您应该能够将这种外观赋予第一个图标（在具有 2 个自定义字符的 :before 伪元素中生成）。

它在本地对我有用，但我无法让它在小提琴中工作。

# android - 如何将蓝牙活动移动到服务中

> ID：15025852
> 
> 赞同：24
> 
> 时间：2013-02-22T13:58:00.233
> 
> 标签：android, service, android-activity, bluetooth

该应用程序为用户提供 2 个连接选项，USB 和蓝牙。USB 工作正常。我已经获得了蓝牙连接的示例代码，但是它们被设计为活动。我试图在服务中做到这一点，但失败了。

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
startService(new Intent(this, MyService.class));

<service android:enabled="true" android:name=".MyService" />
enter code here 
```

我需要与已配对且其 MAC 地址已知的设备建立蓝牙通信。所以我可以跳过发现和配对阶段。我尝试连接的设备始终处于可发现状态并正在等待连接。有没有办法从服务类做到这一点，并通过其他活动保持这种联系？

我正在使用`BluetoothChatService`和`DeviceListActivity`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-23T08:50:34.353

我编写了一个在后台运行的蓝牙服务，可以使用 Messenger [http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)与应用程序中的任何 Activity 进行通信。

```
public class PrinterService extends Service {
private BluetoothAdapter mBluetoothAdapter;
public static final String BT_DEVICE = "btdevice";
public static final String SPP_UUID = "00001101-0000-1000-8000-00805F9B34FB";
public static final int STATE_NONE = 0; // we're doing nothing
public static final int STATE_LISTEN = 1; // now listening for incoming
                                            // connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing
                                                // connection
public static final int STATE_CONNECTED = 3; // now connected to a remote
                                                // device
private ConnectThread mConnectThread;
private static ConnectedThread mConnectedThread;
// public mInHangler mHandler = new mInHangler(this);
private static Handler mHandler = null;
public static int mState = STATE_NONE;
public static String deviceName;
public Vector<Byte> packdata = new Vector<Byte>(2048);
public static Device device = null;

@Override
public void onCreate() {
    Log.d("PrinterService", "Service started");
    super.onCreate();
}

@Override
public IBinder onBind(Intent intent) {
    mHandler = ((MyAplication) getApplication()).getHandler();
    return mBinder;
}

public class LocalBinder extends Binder {
    PrinterService getService() {
        return PrinterService.this;
    }
}

private final IBinder mBinder = new LocalBinder();

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d("PrinterService", "Onstart Command");
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter != null) {
        device = (Device) intent.getSerializableExtra(BT_DEVICE);
        deviceName = device.getDeviceName();
        String macAddress = device.getMacAddress();
        if (macAddress != null && macAddress.length() > 0) {
            connectToDevice(macAddress);
        } else {
            stopSelf();
            return 0;
        }
    }
    String stopservice = intent.getStringExtra("stopservice");
    if (stopservice != null && stopservice.length() > 0) {
        stop();
    }
    return START_STICKY;
}

private synchronized void connectToDevice(String macAddress) {
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(macAddress);
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }
    mConnectThread = new ConnectThread(device);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

private void setState(int state) {
    PrinterService.mState = state;
    if (mHandler != null) {
        mHandler.obtainMessage(AbstractActivity.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
    }
}

public synchronized void stop() {
    setState(STATE_NONE);
    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }
    if (mBluetoothAdapter != null) {
        mBluetoothAdapter.cancelDiscovery();
    }
    stopSelf();
}

@Override
public boolean stopService(Intent name) {
    setState(STATE_NONE);
    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }
    mBluetoothAdapter.cancelDiscovery();
    return super.stopService(name);
}

private void connectionFailed() {
    PrinterService.this.stop();
    Message msg = mHandler.obtainMessage(AbstractActivity.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(AbstractActivity.TOAST, getString(R.string.error_connect_failed));
    msg.setData(bundle);
    mHandler.sendMessage(msg);
}

private void connectionLost() {
    PrinterService.this.stop();
    Message msg = mHandler.obtainMessage(AbstractActivity.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(AbstractActivity.TOAST, getString(R.string.error_connect_lost));
    msg.setData(bundle);
    mHandler.sendMessage(msg);
}

private static Object obj = new Object();

public static void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (obj) {
        if (mState != STATE_CONNECTED)
            return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
}

private synchronized void connected(BluetoothSocket mmSocket, BluetoothDevice mmDevice) {
    // Cancel the thread that completed the connection
    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    mConnectedThread = new ConnectedThread(mmSocket);
    mConnectedThread.start();

    // Message msg =
    // mHandler.obtainMessage(AbstractActivity.MESSAGE_DEVICE_NAME);
    // Bundle bundle = new Bundle();
    // bundle.putString(AbstractActivity.DEVICE_NAME, "p25");
    // msg.setData(bundle);
    // mHandler.sendMessage(msg);
    setState(STATE_CONNECTED);

}

private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        this.mmDevice = device;
        BluetoothSocket tmp = null;
        try {
            tmp = device.createRfcommSocketToServiceRecord(UUID.fromString(SPP_UUID));
        } catch (IOException e) {
            e.printStackTrace();
        }
        mmSocket = tmp;
    }

    @Override
    public void run() {
        setName("ConnectThread");
        mBluetoothAdapter.cancelDiscovery();
        try {
            mmSocket.connect();
        } catch (IOException e) {
            try {
                mmSocket.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            connectionFailed();
            return;

        }
        synchronized (PrinterService.this) {
            mConnectThread = null;
        }
        connected(mmSocket, mmDevice);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e("PrinterService", "close() of connect socket failed", e);
        }
    }
}

private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e("Printer Service", "temp sockets not created", e);
        }
        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    @Override
    public void run() {
        while (true) {
            try {
                if (!encodeData(mmInStream)) {
                    mState = STATE_NONE;
                    connectionLost();
                    break;
                } else {
                }
                // mHandler.obtainMessage(AbstractActivity.MESSAGE_READ,
                // bytes, -1, buffer).sendToTarget();
            } catch (Exception e) {
                e.printStackTrace();
                connectionLost();
                PrinterService.this.stop();
                break;
            }

        }
    }

    private byte[] btBuff;

    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(AbstractActivity.MESSAGE_WRITE, buffer.length, -1, buffer).sendToTarget();
        } catch (IOException e) {
            Log.e("PrinterService", "Exception during write", e);
        }
    }

    public void cancel() {
        try {
            mmSocket.close();

        } catch (IOException e) {
            Log.e("PrinterService", "close() of connect socket failed", e);
        }
    }

}

public void trace(String msg) {
    Log.d("AbstractActivity", msg);
    toast(msg);
}

public void toast(String msg) {
    Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_SHORT).show();
}

@Override
public void onDestroy() {
    stop();
    Log.d("Printer Service", "Destroyed");
    super.onDestroy();
}

private void sendMsg(int flag) {
    Message msg = new Message();
    msg.what = flag;
    handler.sendMessage(msg);
}

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {//
        if (!Thread.currentThread().isInterrupted()) {
            switch (msg.what) {
            case 3:

                break;

            case 4:

                break;
            case 5:
                break;

            case -1:
                break;
            }
        }
        super.handleMessage(msg);
    }

};
} 
```

**更新**

您需要在 MyApplication 类中使用 Handler

```
Handler.Callback realCallback = null;
Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        if (realCallback != null) {
            realCallback.handleMessage(msg);
        }
    };
};
public Handler getHandler() {
    return handler;
}
public void setCallBack(Handler.Callback callback) {
    this.realCallback = callback;
} 
```

# c# - 当前上下文中不存在名称“someControl”

> ID：15025855
> 
> 赞同：1
> 
> 时间：2013-02-22T13:58:15.270
> 
> 标签：c#, asp.net

我对 asp.net 控件有一些奇怪的问题。

我正在编辑一个（以前的）工作页面，但是当我添加一个新控件并尝试运行它时，它说：

> 当前上下文中不存在名称“xxx”

此外，当我在标记和代码隐藏文件上重命名工作控件时，它也会为此控件提供此错误。

我确实阅读了有关删除设计器文件和“转换为 Web 应用程序”的内容，但我没有任何设计器文件，也没有“转换为 Web 应用程序”的选项。

有没有人有什么建议？

编辑：一些例子：

标记：

```
<asp:DropDownList runat="server" ID="ddlBank" style="width: 227px;">
</asp:DropDownList>
<asp:DropDownList runat="server" ID="DropDownList1" style="width: 227px;">
</asp:DropDownList> 
```

后面的代码：

```
if (ddlBank.SelectedValue == "0")
{
    displayMessageBar("Error", "Je dient eerst een bank op te geven.", "error");
    return;
}

if (DropDownList1.SelectedValue == "0")
{
    displayMessageBar("Error", "Je dient eerst een bank op te geven.", "error");
    return;
} 
```

我的 IDE 给出的错误消息：

![错误信息](../Images/ab7f5a2c1b7f679c1caa4a7dc74bd49f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:19:36.713

找到了解决方案：

似乎某个同事添加了另一个页面，指向相同的代码隐藏文件。效果很好，直到我改变了一些东西。

让我们希望其他人可以使用此信息。

# javascript - 为什么 Object.defineProperty 定义的属性在使用前被访问会改变？

> ID：15025862
> 
> 赞同：1
> 
> 时间：2013-02-22T13:58:25.977
> 
> 标签：javascript, properties, defineproperty

仅在 Chrome 中对此进行了测试，我的应用程序不需要在任何其他浏览器中运行。

例如在以下代码 ( [JSFiddle](http://jsfiddle.net/e3WnY/2/) ) 中：

```
function A(a) {
    document.write(this.B);
    this.A = a;
    this.B = a;
}
function A_C(a) {
    this.A = a;
    this.B = a;
}
A.prototype.constructor = A;
A.prototype.C = A_C;
Object.defineProperty(A.prototype, 'B', {
    writeable: true,
    enumerable: true,
    value: '0'
});

var B = A;

var C = new A('A');
var D = new B('B');

document.write(C.A);
document.write(D.A);
document.write(C.B);
document.write(D.B);

C.C('C');
D.C('D');

document.write(C.A);
document.write(D.A);
document.write(C.B);
document.write(D.B); 
```

输出是：

```
00AB00CD00 
```

代替：

```
00ABABCDCD 
```

而在以下代码（[JSFiddle](http://jsfiddle.net/2bJEU/2/)）中：

```
function A(a) {
    this.A = a;
    this.B = a;
}
function A_C(a) {
    this.A = a;
    this.B = a;
}
A.prototype.constructor = A;
A.prototype.C = A_C;
Object.defineProperty(A.prototype, 'B', {
    writeable: true,
    enumerable: true,
    value: '0'
});

var B = A;

var C = new A('A');
var D = new B('B');

document.write(C.A);
document.write(D.A);
document.write(C.B);
document.write(D.B);

C.C('C');
D.C('D');

document.write(C.A);
document.write(D.A);
document.write(C.B);
document.write(D.B); 
```

输出是：

```
ABABCDCD 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:11:44.293

你打错了`writable`：

```
writable: true 
```

按预期工作。[**小提琴**](http://jsfiddle.net/e3WnY/4/)

`writable`默认情况下是`false`，所以如果名称输入错误，它仍然是`false`.

* * *

如何设置不可写属性并覆盖/隐藏原型是没有意义的，它看起来像是 Chrome 实现中的一个错误。这种错误行为在 Firefox 中是不可重现的。

# google-maps - 带有情节提要的 Google ios sdk mapview

> ID：15025864
> 
> 赞同：2
> 
> 时间：2013-02-22T13:58:32.180
> 
> 标签：google-maps, ios6, google-maps-sdk-ios

您能否告知 google maps ios sdk v 1.1 是否支持故事板。我得到了一些奇怪的结果

我必须有 2 个用于地图的视图控制器。第一个显示单个地图，并在使用故事板推送 segue 推送到导航控制器时呈现绝对良好。

我有另一个正在加载多个标记的地图视图控制器。此视图控制器也在情节提要上，但使用自定义过渡加载以淡入。

我正在根据 loadView 方法中的 sdk 示例加载视图。

我有 3 个问题

1.第一次加载带有多个标记的地图时，地图不会显示/渲染。当我点击按钮再次显示视图时（如果加载视图，它什么也不做）然后渲染地图和标记。

2.我关闭这个视图并使用自定义segue加载另一个视图。如果我返回带有多个标记的地图视图，当它尝试将地图视图分配给视图时，我会在 loadview 方法中遇到异常

```
 *** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <GMSVectorMapViewBridge: 0x150376a0; frame = (0 0; 320 416); layer = <CALayer: 0x15055cd0>> is associated with <GMMapResultsViewController: 0x10faa2a0>. Clear this association before associating this view with <GMMapResultsViewController: 0xb51ad90>. 
```

3.最后，如果我用单个标记加载第一个地图视图控制器，它加载正常，然后我返回到具有多个标记的第二个地图视图控制器。渲染地图时也会出现同样的问题。然后，如果我尝试选择地图标记，则代表不会处理它。即使我第一次加载这张地图也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:44:28.857

我怀疑如果您执行以下操作，您的问题可能会消失......

*   将 UIView 添加到您正在工作的视图控制器中
*   在身份检查器中将其类型设置为 GMSMapView。

然后将它控制拖到您的代码中，就像您对任何其他插座一样。

完成此操作后，使用 Google 地图就变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:26:41.820

如果有人需要一个工作示例：Google Maps SDK 1.1.2 with Storyboards。你可以在 github 上找到它：[https ://github.com/rendulic/GMaps3D](https://github.com/rendulic/GMaps3D)

# c# - WPF DataGrid 未退出编辑模式

> ID：15025865
> 
> 赞同：7
> 
> 时间：2013-02-22T13:58:32.720
> 
> 标签：c#, wpf, mvvm, datagrid

我有一个`DataGrid`显示几行和多列数据，每个都绑定到自己的`Property`. 不在`DataGrid`a 上，`TabControl`但每当它所在的窗口关闭并重新打开时，我都会收到错误消息：`'DeferRefresh' is not allowed during an AddNew or EditItem transaction.` *仅*当一个或多个单元格存在验证问题时`DataGrid`。

**例如：**绑定到的属性`DataGrid`是`cell`a `double`，用户输入“hello”，当然会`WPF's`自动显示红色边框`cell`。现在，如果用户要关闭窗口并重新打开它，就会发生错误。

*我知道为什么*会抛出错误，因为`cell`它没有离开“编辑模式”。

**如何解决此错误？**

**其他注意事项：**

*   我看过[这个问题](https://stackoverflow.com/questions/3354916/what-is-the-proper-way-to-handle-multiple-datagrids-in-a-tab-control-so-that-cel)，但这与 a `DataGrid`on a `TabControl`（我的不是）有关。
*   我试图限制用户的输入，以便如果`Cell`需要 a`double`或然后只接受 a `double`，但问题是没有好的方法来限制用户可以插入的小数点（“.”）的数量。我通过`PreviewTextInput`并且只允许 0-9 和“.”来控制用户输入。

* * *

**异常详细信息**（如果有帮助）

```
System.InvalidOperationException was unhandled
  Message='DeferRefresh' is not allowed during an AddNew or EditItem transaction.
  Source=PresentationFramework
  StackTrace:
       at System.Windows.Data.CollectionView.DeferRefresh()
       at System.Windows.Controls.ItemCollection.SetCollectionView(CollectionView view)
       at System.Windows.Controls.ItemsControl.OnItemsSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
       at System.Windows.Data.BindingExpressionBase.Invalidate(Boolean isASubPropertyChange)
       at System.Windows.Data.BindingExpression.TransferValue(Object newValue, Boolean isASubPropertyChange)
       at System.Windows.Data.BindingExpression.Activate(Object item)
       at System.Windows.Data.BindingExpression.AttachToContext(AttachAttempt attempt)
       at System.Windows.Data.BindingExpression.MS.Internal.Data.IDataBindEngineClient.AttachToContext(Boolean lastChance)
       at MS.Internal.Data.DataBindEngine.Task.Run(Boolean lastChance)
       at MS.Internal.Data.DataBindEngine.Run(Object arg)
       at MS.Internal.Data.DataBindEngine.OnLayoutUpdated(Object sender, EventArgs e)
       at System.Windows.ContextLayoutManager.fireLayoutUpdateEvent()
       at System.Windows.ContextLayoutManager.UpdateLayout()
       at System.Windows.Interop.HwndSource.SetLayoutSize()
       at System.Windows.Interop.HwndSource.set_RootVisualInternal(Visual value)
       at System.Windows.Window.SetRootVisualAndUpdateSTC()
       at System.Windows.Window.SetupInitialState(Double requestedTop, Double requestedLeft, Double requestedWidth, Double requestedHeight)
       at System.Windows.Window.CreateSourceWindow(Boolean duringShow)
       at System.Windows.Window.ShowHelper(Object booleanBox)
       at REACT.ViewModel.ReceiverListViewModel.ShowWindow(String name) in C:\Users\jcarroll42\Documents\Sandbox\REACT\SW\Source\ViewModel\ReceiverListViewModel.cs:line 238
       at REACT.Commands.ShowWindowCommand.Execute(Object parameter) in C:\Users\jcarroll42\Documents\Sandbox\REACT\SW\Source\Commands.cs:line 137
       at MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(ICommandSource commandSource, Boolean userInitiated)
       at System.Windows.Controls.Button.OnClick()
       at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
       at System.Windows.Input.InputManager.ProcessStagingArea()
       at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
       at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
       at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run()
       at REACT.App.Main() in C:\Users\jcarroll42\Documents\Sandbox\REACT\SW\Source\obj\x86\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-17T15:49:24.973

您可以在需要时尝试强制 datagrid 取消版本：

```
myDatagrid.CommitEdit(); 
myDatagrid.CancelEdit(); 
```

这对我有用，我在重新排序行时遇到了类似的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T12:25:11.483

这是 .NET Framework 4.5+ 修复的错误。不幸的是，对于我们这些坚持以前版本的人来说，错误仍然是一个问题。我发现的最佳解决方案是简单地将`DataGrid`to`properties`与 type绑定`string`。这样，就可以完全控制用户输入。在完全控制的情况下，用户应该不会触发任何错误，`DataGrid`也不会导致程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-30T15:51:13.357

我遇到了这个问题 .NET 4.5.1，这是唯一对我有用的东西。

```
 ListCollectionView lcv = (ListCollectionView)CollectionViewSource.GetDefaultView(MyDatagrid.ItemsSource);

                if (lcv.IsAddingNew)
                    lcv.CommitNew();
                if (lcv.IsEditingItem)
                    lcv.CommitEdit(); 
```

# applescript - Applescript：同时使用“打开”和“选择文件”

> ID：15025869
> 
> 赞同：2
> 
> 时间：2013-02-22T13:58:49.247
> 
> 标签：applescript

有没有办法在我的脚本中同时使用“打开”和“选择文件”，而不必像下面的示例中那样重复操作代码？

```
on open myMovie
    tell application "Quicktime Player 7"
    open myMovie
    end tell
end open

set myMovie to choose file
    tell application "Quicktime Player 7"
    open myMovie
    end tell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:15:42.273

```
on open myMovies
    repeat with aMovie in myMovies
        tell application "QuickTime Player 7" to open aMovie
    end repeat
end open

on run
    set myMovie to choose file
    tell application "QuickTime Player 7" to open myMovie
end run 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:13:52.480

另一种方法是从运行处理程序调用脚本的打开处理程序：

```
on open theFiles
    tell application "QuickTime Player 7" to open theFiles
end open

tell me to open (choose file) 
```

# c++ - 如何使用静态字符

> ID：15025871
> 
> 赞同：-1
> 
> 时间：2013-02-22T13:58:50.963
> 
> 标签：c++

我目前正在处理一个*wxWidgets*项目，我必须将一个*wxString*复制到一个静态 c 字符串，该字符串可以保存程序生命周期的值。基本上我的头文件和源文件如下所示：

```
*****************PortDialog.h*****************

...
static char *portName; 

-----------------------end 
```

源文件是；

```
***************PortDialog.cpp*****************

.
.
. 
wxString str = "COM1"; 

strcpy(portName, (const char*)str.mbc_str()); 

---------------------end 
```

但是我遇到了以下链接错误。

```
error LNK2001: unresolved external symbol "public: static char * portDialog::eportName" (?portName@portDialog@@2PADA) 
```

有人可以向我解释我在这里犯了什么错误吗？`static char *`用于上述目的是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:17:55.167

静态变量应该在cpp文件中声明

```
char* PortDialog::PortName = NULL; 
```

就像您使用范围解析运算符访问类的方法（函数）一样

```
void PortDialog::SomeFunction()
{
  //Code Goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:02:59.187

在标头中声明的静态变量应在 cpp 文件中初始化，请参见[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr038 .htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr038.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:31:02.987

除了您收到的有关链接器错误的解释外，您还应该知道，您不能`strcpy`将目标作为`char *`未分配内存来保存源字符串的目标调用。它会编译（和链接），但在运行时几乎可以做任何事情。

# java - 为什么我无法ping通计算机？

> ID：15025874
> 
> 赞同：1
> 
> 时间：2013-02-22T13:58:53.773
> 
> 标签：java, networking, ping

我在同一网络 (XP) 中有 2 个 Windows 系统。如果我打开 cmd 并输入

```
ping Computer2 
```

我得到了答案（所以 ping 正在工作）。我以为我也可以用 Java 做到这一点，但不知何故它不起作用：

```
public static void ping() {

  System.out.println("Ping Poller Starts...");
  final String computer = "Computer2";

  InetAddress inet = null;
  try {
        inet = InetAddress.getByName(computer);
  } catch (UnknownHostException e) {
        e.printStackTrace();
  }
  System.out.println("Sending Ping Request to " + computer);

  boolean status = false;
  try {
        status = inet.isReachable(5000);
  } catch (IOException e) {
            e.printStackTrace();
  }

  if (status)
  {
            System.out.println(computer + " ok");
  }
  else
  {
            System.out.println(computer + " not pingable");
  }
} 
```

总是`not pingable`。有`localhost`代码就好了。但是`Computer2`我无法 ping - 但通过 cmd 它正在工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:02:30.777

不清楚您是在 ping IP 地址还是计算机名称，但它可能很简单，例如使用“\Computer2”而不是“Computer2”。

# php - 使用 PHP 从文件中读取最后一行（即“tail”）的最佳方法是什么？

> ID：15025875
> 
> 赞同：81
> 
> 时间：2013-02-22T13:59:03.117
> 
> 标签：php, performance, logging

在我的 PHP 应用程序中，我需要从许多文件（主要是日志）**的末尾开始读取多行。**有时我只需要最后一个，有时我需要几十个或几百个。基本上，我想要像 Unix`tail` 命令一样灵活的东西。

这里有关于如何从文件中获取最后一行的问题（但我需要*N*行），并给出了不同的解决方案。我不确定哪个是最好的，哪个表现更好。

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-02-22T13:59:03.117

## 方法概述

在互联网上搜索，我遇到了不同的解决方案。我可以将它们分为三种方法：

*   *使用`file()`PHP 函数的*天真者；**
**   *在系统上运行`tail`命令的*作弊者；****   *强大*的人会愉快地使用`fseek()`.**

 **我最终选择（或编写）五个解决方案，一个*幼稚*的解决方案，一个*作弊*的解决方案和三个*强大*的解决方案。

1.  最简洁[***朴素*的解决方案**](https://gist.github.com/d9a609b513d881bdad47)，使用内置数组函数。
2.  [**基于`tail`**command](https://gist.github.com/5cbf78a4447e1a98b59f)的唯一可能的解决方案，它有一个小问题：如果`tail`不可用，它就不会运行，即在非 Unix (Windows) 或不允许系统功能的受限环境中运行。
3.  **从文件末尾读取单个字节**以搜索（并计算）换行符的解决方案，可在**[此处](http://php.net/manual/en/function.fseek.php#69008)**找到。
4.  针对大文件优化 的**多字节缓冲解决方案，可在****[此处](http://www.geekality.net/2011/05/28/php-tail-tackling-large-files/)**找到。
5.  解决方案#4的略微[**修改版本，**](https://gist.github.com/1711e81a9162320fde20)其中缓冲区长度是动态的，根据要检索的行数决定。

所有解决方案**都有效**。从某种意义上说，它们从任何文件以及我们要求的任意数量的行返回预期结果（除了解决方案＃1，它可以在大文件的情况下打破 PHP 内存限制，不返回任何内容）。但是哪一个更好呢？

## 性能测试

为了回答这个问题，我进行了测试。这些事情就是这样完成的，不是吗？

**我准备了一个100 KB**的示例文件，将在我的`/var/log`目录中找到的不同文件连接在一起。然后我编写了一个 PHP 脚本，它使用五种解决方案中的每一种来从文件末尾检索*1、2、..、10、20、... 100、200、...、1000*行。每个单一测试重复十次（这类似于*5 × 28 × 10 = 1400*次测试），以微秒为单位测量**平均经过时间**。

我使用 PHP 命令行解释器在本地开发机器（Xubuntu 12.04、PHP 5.3.10、2.70 GHz 双核 CPU、2 GB RAM）上运行脚本。结果如下：

![示例 100 KB 日志文件的执行时间](../Images/1b642a8cb1827d9851514f53b131b311.png)

解决方案#1 和#2 似乎更糟糕。解决方案#3 仅在我们需要阅读几行代码时才有用。**解决方案#4 和#5 似乎是最好的。** 请注意动态缓冲区大小如何优化算法：由于缓冲区减少，几行执行时间会稍微小一些。

让我们尝试一个更大的文件。如果我们必须读取**10 MB**的日志文件怎么办？

![示例 10 MB 日志文件的执行时间](../Images/47e0a4879a308d8b66fa9a1c81a3dc80.png)

现在解决方案 #1 是最糟糕的一个：事实上，将整个 10 MB 文件加载到内存中并不是一个好主意。我也在 1MB 和 100MB 文件上运行测试，情况几乎相同。

对于微小的日志文件？**这是10 KB**文件的图表：

![示例 10 KB 日志文件的执行时间](../Images/1dd552db819533208cddbd86ae2ab62d.png)

解决方案 #1 现在是最好的解决方案！将 10 KB 加载到内存中对 PHP 来说并不是什么大问题。＃4和＃5也表现良好。然而，这是一个极端情况：10 KB 的日志意味着 150/200 行......

> *[你可以在这里](http://www.lorenzostanco.com/stack/test_tail.zip)下载我所有的测试文件、来源和结果 。*

## 最后的想法

**[强烈建议将解决方案 #5](https://gist.github.com/1711e81a9162320fde20)**用于一般用例：适用于每种文件大小，并且在读取几行时表现特别好。

如果您应该读取大于 10 KB 的文件，请避免使用**[解决方案 #1 。](https://gist.github.com/d9a609b513d881bdad47)**

解决方案**[#2](https://gist.github.com/5cbf78a4447e1a98b59f)** 和**[#3](http://php.net/manual/en/function.fseek.php#69008)** 并不是我运行的每个测试的最佳解决方案：#2 的运行时间不会少于 2 毫秒，而 #3 很大程度上受您询问的行数的影响（仅在 1 或 2 行时效果很好）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-26T12:27:46.647

这是一个修改后的版本，它也可以跳过最后几行：

```
/**
 * Modified version of http://www.geekality.net/2011/05/28/php-tail-tackling-large-files/ and of https://gist.github.com/lorenzos/1711e81a9162320fde20
 * @author Kinga the Witch (Trans-dating.com), Torleif Berger, Lorenzo Stanco
 * @link http://stackoverflow.com/a/15025877/995958
 * @license http://creativecommons.org/licenses/by/3.0/
 */    
function tailWithSkip($filepath, $lines = 1, $skip = 0, $adaptive = true)
{
  // Open file
  $f = @fopen($filepath, "rb");
  if (@flock($f, LOCK_SH) === false) return false;
  if ($f === false) return false;

  if (!$adaptive) $buffer = 4096;
  else {
    // Sets buffer size, according to the number of lines to retrieve.
    // This gives a performance boost when reading a few lines from the file.
    $max=max($lines, $skip);
    $buffer = ($max < 2 ? 64 : ($max < 10 ? 512 : 4096));
  }

  // Jump to last character
  fseek($f, -1, SEEK_END);

  // Read it and adjust line number if necessary
  // (Otherwise the result would be wrong if file doesn't end with a blank line)
  if (fread($f, 1) == "\n") {
    if ($skip > 0) { $skip++; $lines--; }
  } else {
    $lines--;
  }

  // Start reading
  $output = '';
  $chunk = '';
  // While we would like more
  while (ftell($f) > 0 && $lines >= 0) {
    // Figure out how far back we should jump
    $seek = min(ftell($f), $buffer);

    // Do the jump (backwards, relative to where we are)
    fseek($f, -$seek, SEEK_CUR);

    // Read a chunk
    $chunk = fread($f, $seek);

    // Calculate chunk parameters
    $count = substr_count($chunk, "\n");
    $strlen = mb_strlen($chunk, '8bit');

    // Move the file pointer
    fseek($f, -$strlen, SEEK_CUR);

    if ($skip > 0) { // There are some lines to skip
      if ($skip > $count) { $skip -= $count; $chunk=''; } // Chunk contains less new line symbols than
      else {
        $pos = 0;

        while ($skip > 0) {
          if ($pos > 0) $offset = $pos - $strlen - 1; // Calculate the offset - NEGATIVE position of last new line symbol
          else $offset=0; // First search (without offset)

          $pos = strrpos($chunk, "\n", $offset); // Search for last (including offset) new line symbol

          if ($pos !== false) $skip--; // Found new line symbol - skip the line
          else break; // "else break;" - Protection against infinite loop (just in case)
        }
        $chunk=substr($chunk, 0, $pos); // Truncated chunk
        $count=substr_count($chunk, "\n"); // Count new line symbols in truncated chunk
      }
    }

    if (strlen($chunk) > 0) {
      // Add chunk to the output
      $output = $chunk . $output;
      // Decrease our line counter
      $lines -= $count;
    }
  }

  // While we have too many lines
  // (Because of buffer size we might have read too many)
  while ($lines++ < 0) {
    // Find first newline and remove all text before that
    $output = substr($output, strpos($output, "\n") + 1);
  }

  // Close file and return
  @flock($f, LOCK_UN);
  fclose($f);
  return trim($output);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-13T12:16:09.493

这也可以：

```
$file = new SplFileObject("/path/to/file");
$file->seek(PHP_INT_MAX); // cheap trick to seek to EoF
$total_lines = $file->key(); // last line number

// output the last twenty lines
$reader = new LimitIterator($file, $total_lines - 20);
foreach ($reader as $line) {
    echo $line; // includes newlines
} 
```

或者没有`LimitIterator`：

```
$file = new SplFileObject($filepath);
$file->seek(PHP_INT_MAX);
$total_lines = $file->key();
$file->seek($total_lines - 20);
while (!$file->eof()) {
    echo $file->current();
    $file->next();
} 
```

不幸的是，你的测试用例在我的机器上出现了段错误，所以我不知道它是如何执行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-20T08:40:37.400

我喜欢下面的方法，但它不适用于最大 2GB 的文件。

```
<?php
    function lastLines($file, $lines) {
        $size = filesize($file);
        $fd=fopen($file, 'r+');
        $pos = $size;
        $n=0;
        while ( $n < $lines+1 && $pos > 0) {
            fseek($fd, $pos);
            $a = fread($fd, 1);
            if ($a === "\n") {
                ++$n;
            };
            $pos--;
        }
        $ret = array();
        for ($i=0; $i<$lines; $i++) {
            array_push($ret, fgets($fd));
        }
        return $ret;
    }
    print_r(lastLines('hola.php', 4));
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-21T12:07:00.660

在这里阅读所有内容后，我的小复制粘贴解决方案。tail() 不会关闭 $fp ，因为无论如何您都必须使用 Ctrl-C 将其杀死。为节省您的 CPU 时间而睡，目前仅在 Windows 上进行了测试。您需要将此代码放入一个类中！

```
/**
 * @param $pathname
 */
private function tail($pathname)
{
    $realpath = realpath($pathname);
    $fp = fopen($realpath, 'r', FALSE);
    $lastline = '';
    fseek($fp, $this->tailonce($pathname, 1, false), SEEK_END);
    do {
        $line = fread($fp, 1000);
        if ($line == $lastline) {
            usleep(50);
        } else {
            $lastline = $line;
            echo $lastline;
        }
    } while ($fp);
}

/**
 * @param $pathname
 * @param $lines
 * @param bool $echo
 * @return int
 */
private function tailonce($pathname, $lines, $echo = true)
{
    $realpath = realpath($pathname);
    $fp = fopen($realpath, 'r', FALSE);
    $flines = 0;
    $a = -1;
    while ($flines <= $lines) {
        fseek($fp, $a--, SEEK_END);
        $char = fread($fp, 1);
        if ($char == "\n") $flines++;
    }
    $out = fread($fp, 1000000);
    fclose($fp);
    if ($echo) echo $out;
    return $a+2;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-11T22:39:03.717

还有另一个功能，您可以使用正则表达式来分隔项目。用法

```
$last_rows_array = file_get_tail('logfile.log', 100, array(
  'regex'     => true,          // use regex
  'separator' => '#\n{2,}#',   //  separator: at least two newlines
  'typical_item_size' => 200, //   line length
)); 
```

功能：

```
// public domain
function file_get_tail( $file, $requested_num = 100, $args = array() ){
  // default arg values
  $regex         = true;
  $separator     = null;
  $typical_item_size = 100; // estimated size
  $more_size_mul = 1.01; // +1%
  $max_more_size = 4000;
  extract( $args );
  if( $separator === null )  $separator = $regex ? '#\n+#' : "\n";

  if( is_string( $file ))  $f = fopen( $file, 'rb');
  else if( is_resource( $file ) && in_array( get_resource_type( $file ), array('file', 'stream'), true ))
    $f = $file;
  else throw new \Exception( __METHOD__.': file must be either filename or a file or stream resource');

  // get file size
  fseek( $f, 0, SEEK_END );
  $fsize = ftell( $f );
  $fpos = $fsize;
  $bytes_read = 0;

  $all_items = array(); // array of array
  $all_item_num = 0;
  $remaining_num = $requested_num;
  $last_junk = '';

  while( true ){
    // calc size and position of next chunk to read
    $size = $remaining_num * $typical_item_size - strlen( $last_junk );
    // reading a bit more can't hurt
    $size += (int)min( $size * $more_size_mul, $max_more_size );
    if( $size < 1 )  $size = 1;

    // set and fix read position
    $fpos = $fpos - $size;
    if( $fpos < 0 ){
      $size -= -$fpos;
      $fpos = 0;
    }

    // read chunk + add junk from prev iteration
    fseek( $f, $fpos, SEEK_SET );
    $chunk = fread( $f, $size );
    if( strlen( $chunk ) !== $size )  throw new \Exception( __METHOD__.": read error?");
    $bytes_read += strlen( $chunk );
    $chunk .= $last_junk;

    // chunk -> items, with at least one element
    $items = $regex ? preg_split( $separator, $chunk ) : explode( $separator, $chunk );

    // first item is probably cut in half, use it in next iteration ("junk") instead
    // also skip very first '' item
    if( $fpos > 0 || $items[0] === ''){
      $last_junk = $items[0];
      unset( $items[0] );
    } // … else noop, because this is the last iteration

    // ignore last empty item. end( empty [] ) === false
    if( end( $items ) === '')  array_pop( $items );

    // if we got items, push them
    $num = count( $items );
    if( $num > 0 ){
      $remaining_num -= $num;
      // if we read too much, use only needed items
      if( $remaining_num < 0 )  $items = array_slice( $items, - $remaining_num );
      // don't fix $remaining_num, we will exit anyway

      $all_items[] = array_reverse( $items );
      $all_item_num += $num;
    }

    // are we ready?
    if( $fpos === 0 || $remaining_num <= 0 )  break;

    // calculate a better estimate
    if( $all_item_num > 0 )  $typical_item_size = (int)max( 1, round( $bytes_read / $all_item_num ));
  }

  fclose( $f ); 

  //tr( $all_items );
  return call_user_func_array('array_merge', $all_items );
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-15T20:19:28.000

对于常规的小文本文件，一个衬垫，不用担心：

```
echo join(array_slice(file("path/to/file"), -5)); 
```

要定义新行，根据上下文，这种方式通常更容易：

```
echo join("\n",array_slice(explode("\n",file_get_contents("path/to/file")), -5));

echo join("<br>",array_slice(explode(PHP_EOL,file_get_contents("path/to/file")), -5));

echo join(PHP_EOL,array_slice(explode("\n",file_get_contents("path/to/file")), -5)); 
```**

# java - 什么是 Elasticsearch 中的索引

> ID：15025876
> 
> 赞同：34
> 
> 时间：2013-02-22T13:59:04.553
> 
> 标签：java, ruby, elasticsearch, full-text-search

什么是 Elasticsearch 中的索引？一个应用程序有多个索引还是只有一个？

假设您为某个汽车制造商构建了一个系统。它涉及人、汽车、备件等。您是否有一个名为制造商的索引，或者您是否有一个人索引、一个汽车索引和第三个备件索引？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-22T14:29:07.490

好问题，答案比人们预期的要微妙得多。您可以将索引用于多种不同的目的。

## 关系指数

最简单和最熟悉的布局克隆了您对关系数据库的期望。您可以（非常粗略地）将索引想象为数据库。

*   MySQL => 数据库 => 表 => 行/列
*   ElasticSearch => 索引 => 类型 => 具有属性的文档

一个 ElasticSearch 集群可以包含多个`Indices`（数据库），而这些数据库又包含多个`Types`（表）。这些类型包含多个`Documents`（行），每个文档都有`Properties`（列）。

所以在你的汽车制造场景中，你可能有一个`SubaruFactory`索引。在此索引中，您具有三种不同的类型：

*   `People`
*   `Cars`
*   `Spare_Parts`

然后，每种类型都包含与该类型相对应的文档（例如，Subaru Imprezza 文档位于该`Cars`类型内部。该文档包含有关该特定汽车的所有详细信息）。

搜索查询格式为：[http://localhost:9200/[index]/[type]/[operation]](http://localhost:9200/[index]/[type]/[operation])

所以要检索斯巴鲁文档，我可以这样做：

```
 $ curl -XGET localhost:9200/SubaruFactory/Cars/SubaruImprezza 
```

.

## 日志记录索引

现在，现实情况是索引/类型比我们在 RDBM 中习惯的数据库/表抽象灵活得多。它们可以被认为是方便的数据组织机制，根据您设置数据的方式具有额外的性能优势。

为了演示一种完全不同的方法，很多人使用 ElasticSearch 进行日志记录。标准格式是为每一天分配一个新索引。您的索引列表可能如下所示：

*   日志-2013-02-22
*   日志-2013-02-21
*   日志-2013-02-20

ElasticSearch 允许您同时查询多个索引，所以这样做不是问题：

```
 $ curl -XGET localhost:9200/logs-2013-02-22,logs-2013-02-21/Errors/_search=q:"Error Message" 
```

同时搜索过去两天的日志。由于日志的性质，这种格式具有优势 - 大多数日志从未被查看，并且它们以线性时间流进行组织。为每个日志创建索引更合乎逻辑，并为搜索提供更好的性能。

.

## 用户指数

另一种完全不同的方法是为每个用户创建一个索引。想象一下，你有一个社交网站，每个用户都有大量的随机数据。您可以为每个用户创建一个索引。您的结构可能如下所示：

*   扎克指数
    *   爱好类型
    *   朋友类型
    *   图片类型
*   弗雷德指数
    *   爱好类型
    *   朋友类型
    *   图片类型

请注意如何以传统的 RDBM 方式轻松完成此设置（例如，“用户”索引，以爱好/朋友/图片为类型）。然后，所有用户都将被放入一个巨大的索引中。

相反，出于数据组织和性能原因，有时将数据分开是有意义的。在这种情况下，我们假设每个用户都有*大量*数据，并且我们希望它们分开。ElasticSearch 让我们为每个用户创建一个索引没有问题。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-01-16T17:56:50.993

@Zach 的回答对 elasticsearch 5.X 及以下版本有效。由于 elasticsearch 6.X`Type`已被弃用，并将在 7.X 中完全删除。引用弹性搜索文档：

> 最初，我们谈到“索引”类似于 SQL 数据库中的“数据库”，“类型”相当于“表”。这是一个糟糕的类比，导致了错误的假设。

进一步说明，来自两个不同表的 SQL 中同名的两个列可以相互独立。但是在弹性搜索索引中这是不可能的，因为它们由相同的 Lucene 字段支持。因此，elasticsearch 中的“索引”与 SQL 中的“数据库”并不完全相同。如果索引中有任何相同的字段，它们最终会出现字段类型冲突。为了避免这种情况，elasticsearch 文档建议存储**每个文档类型的索引**。

参考：[删除映射类型](https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:27:29.020

索引是一种数据结构，用于存储字段到相应文档的映射。目标是允许更快的搜索，通常以增加内存使用和预处理时间为代价。

您创建的索引数量是您应该根据应用程序要求做出的设计决定。您可以为每个业务概念建立一个索引...您可以为一年中的每个月建立一个索引...

您应该花一些时间熟悉 lucene 和 elasticsearch 概念。

看一下[介绍视频](http://www.elasticsearch.org/videos/2010/02/07/es-introduction.html)和一些[数据设计模式的视频](http://www.elasticsearch.org/videos/2012/06/05/big-data-search-and-analytics.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-16T07:24:32.923

上面一个太详细了，很短可以定义为

**索引：**它是不同类型文档和文档属性的集合。Index 还使用分片的概念来提高性能。例如，一组文档包含社交网络应用程序的数据。来自 tutorialpoints.com 的回答

由于索引是每个问题的不同类型文档的集合，这取决于您要如何分类。

您有一个名为制造商的索引吗？是的，我们将与制造商一起保留一份文件。

你有一个人指数，一个汽车指数，第三个备件指数吗？有人可以解释一下吗？想想同一制造商向许多人在路上驾驶它的实例汽车。因此根据使用次数可能会有许多指标。

如果我们深入思考，我们会发现除了第一个问题之外，所有问题都是无效的。弹性搜索文档与 SQL 文档或 csv 或电子表格文档有很大不同，通过一个索引和强大的查询语言，您可以创建数百万种 CSV 样式的数据分类文档。

由于其极快的索引能力，我们只为一个客户创建一个索引，然后我们根据需要创建多种类型的文档网。例如：

所有老人使用相同型号。或一位老人使用所有型号。

排列是无限的。

# python - 为什么使用 dict 从另一个列表中排除一个列表的速度如此之快？

> ID：15025878
> 
> 赞同：1
> 
> 时间：2013-02-22T13:59:06.567
> 
> 标签：python

我很惊讶在两种方法中排除一个元组列表的速度有多么不同。所以我想知道为什么。

我有一个（int，float）形式的1,500个元组的列表，按`float`值排序。（添加注意：元组列表中的每个 int 值都是不同的。）我想找出排除子列表的最快方法。所以首先我创建了一个要排除的子列表：

```
exclude_list = [v for i,v in enumerate(tuple_list) if (i % 3) == 0] 
```

然后我确定了两种不同的移除方法`exclude_list`（`tuple_list`但这不是我最终确定的两种方法）：

```
remainder_list = [v for v in tuple_list if v not in exclude_list] 
```

和，

```
remainder_set = set(tuple_list) - set(exclude_list)
remainder_list = sorted(remainder_set, key=itemgetter(1)) #edited to chance key to 1 from 0 
```

时间差异很大：第一种方法为 14.7235 秒（500 次），第二种方法为 0.3426（500 次）。我理解为什么这两种方法有如此不同的时间，因为第一种方法需要在 sub_list 中搜索主列表中的每个项目。因此，我想出了一种更好的搜索/排除方法：

```
exclude_dict = dict(exclude_list)
remainder_list = [v for v in tuple_list if v[0] not in exclude_dict] 
```

我不认为这个版本的排除列表项会比第一个快得多。它不仅比第一种方法快，而且比第二种方法快！它的时间为 0.11177（500 次）。为什么这比我的设置差异/度假方法更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:07:20.833

您可能想要检查[list 和 set 操作的时间复杂度](http://wiki.python.org/moin/TimeComplexity)。

```
remainder_list = [v for v in tuple_list if v not in exclude_list] 
```

`in`这里的操作是 O(N)，它会遍历 tuple_list 中的所有元素，看看该元素是否存在于 exclude_list 中。所以它的复杂度是`O(len(tuple_list) * len(exclude_list))`

集合上的差异`-`操作具有 O(n) 复杂性，因为集合使用哈希表作为其底层数据结构并且具有 O(1) 成员资格检查。因此该行：

```
remainder_set = set(tuple_list) - set(exclude_list). 
```

具有`O(len(tuple_list))`复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:01:29.843

列表的`in`运算符是 O(N) 来计算。它只是进行线性搜索。为了做得更好，您可以更改`exclude_list`为`exclude_set`：

```
exclude_set = {v for i,v in enumerate(tuple_list) if (i % 3) == 0} 
```

或者，如果您已经拥有`exclude_list`：

```
exclude_set = set(exclude_list) 
```

然后`remainder_list`像以前一样计算你的：

```
remainder_list = [v for v in tuple_list if v not in exclude_set] 
```

这要**好得多**，因为`in`对于一个集合来说是一个非常令人印象深刻的 O(1)（平均而言）。在这里，您不需要重新排序`remainder_list`，因此删除了 O(MlogM) 步骤（其中`M == len(remainder_list`)）

* * *

当然，通过这个简单的例子，我们可以用 1 个 list-comp 构建整个事物：

```
remainder_list = [v for i,v in enumerate(tuple_list) if (i % 3) != 0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T14:10:38.037

您的算法不等效。你的元素是情侣。使用前两种方法，您可以通过匹配对来排除元素。使用第三种方法（使用 dict），您可以排除仅比较夫妻的第一个元素的元素。

如果这对夫妇的第一个元素很少不同，那么 dict 方法会快得多，但结果可能会有所不同。

# php - PHP破坏了验证链接参数的开头

> ID：15025883
> 
> 赞同：1
> 
> 时间：2013-02-22T13:59:29.080
> 
> 标签：php, mysql, database

我已经为此奋斗了超过 24 小时（包括现在）。我已经设置了我的服务器来设置用户帐户并通过电子邮件向他们发送验证链接。一切正常，但我遇到了两个字符串变量 hash 和 token 的问题，其值来自 mySql 数据库。每次生成电子邮件时，这些变量都会解析它们的数据，前三个字符会被弄乱：

```
http://verify.myserver.com/objects/1.8.12.7.10.1.9/verify-email.php?mm_function=submit&hashü41faa912dd9451a8d397fc9386ca1c69&mm_tokenü2rnjrcbhn3qegtu46np03p5pg6aczbtrs51782fkuwq2c8w9m80enutwruydwewca&mm_timezone=2&mm_charset=utf-8 
```

链接应该是：

```
http://verify.myserver.com/objects/1.8.12.7.10.1.9/verify-email.php?mm_function=submit&hash=fc41faa912dd9451a8d397fc9386ca1c69&mm_token=fc22rnjrcbhn3qegtu46np03p5pg6aczbtrs51782fkuwq2c8w9m80enutwruydwewca&mm_timezone=2&mm_charset=utf-8 
```

我尝试混合和匹配代码无济于事。目前，我的代码如下：

```
$weblink = "http://verify.myserver.com/objects/1.8.12.7.10.1.9/verify-email.php?";
$weblink . "mm_function=submit&hash=" . $hash . "&mm_token=" . $token . "&mm_timezone=" . $timezone . "&mm_charset=utf-8"; 
```

奇怪的是，如果我只是将 $hash 和 $token 作为电子邮件的一部分，独立于链接，它们都可以正常显示。

我正在使用运行 InnoDB 引擎的 mySql，DB Collat​​ion 是 latin7_general_ci。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:21:46.507

事实证明，电子邮件编码是罪魁祸首。感谢 oktopus，我使用 charset=iso-8859-1 将其固定在标题中，如下所示：

```
if (!defined("PHP_EOL")) define("PHP_EOL", "\r\n");

$headers = "From: Some Sender <someone@example.com>". PHP_EOL;
$headers.= "Return-Path: Some Sender <someone@example.com>". PHP_EOL;
$headers.= "Organization: My Organization>". PHP_EOL; 
$headers.= "Content-type: text/plain; charset=iso-8859-1". PHP_EOL;
$headers.= "MIME-Version: 1.0". PHP_EOL;
$headers.= "X-Priority: 3". PHP_EOL;

$weblink = "http://verify.myserver.com/objects/1.8.12.7.10.1.9/process.php?mm_function=submit&";
$weblink.= "mm_hash=$hash&mm_token=$verification&mm_timezone=$timezone&mm_charset=iso-8859-1";

mail($recipient, "Account Verification Link", "Hello $recipient,". PHP_EOL . PHP_EOL ."Please follow the link below to verify and activate your account:". PHP_EOL . PHP_EOL . $weblink . PHP_EOL . PHP_EOL . "Thank you.". PHP_EOL . PHP_EOL . "App Support Team", $headers); 
```

# android - CheckBox 在自定义列表视图中滚动时未选中，未找到解决方案

> ID：15025884
> 
> 赞同：1
> 
> 时间：2013-02-22T13:59:37.553
> 
> 标签：android, listview, custom-adapter

我知道这个问题在论坛中有很多答案，但我尝试了所有答案，但没有一个适用于我的代码。每当列表向下滚动时，该复选框都不会被选中。这是我的代码：

```
public class ContactsAdapter extends ArrayAdapter<User> {

private LayoutInflater inflater;
boolean[] checkBoxState;
ViewHolder holder;

public ContactsAdapter(Context context, ArrayList<User> list) {
    super(context, R.layout.listitemlayout, R.id.itemTextView, list);
    inflater = LayoutInflater.from(context);
    checkBoxState = new boolean [list.size()];
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.listitemlayout, null);
        holder.itemTextView = (TextView)convertView.findViewById(R.id.itemTextView);
        holder.checkbox = (CheckBox)convertView.findViewById(R.id.checkbox);
        convertView.setTag(holder);
    } 
    else {
        holder = (ViewHolder) convertView.getTag();  
    }

    User user = getItem(position);
    holder.itemTextView.setText(user.getName());

    holder.checkbox.setTag(user);
    holder.checkbox.setChecked(checkBoxState[position]);
    holder.checkbox.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(((CheckBox)v).isChecked())
                checkBoxState[position]=true;
            else
                checkBoxState[position]=false;
        }
    });

    return convertView;
}

private class ViewHolder {
    TextView itemTextView;
    CheckBox checkbox;
} 
```

}

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:25:06.060

您是否厌倦了使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.html#setOnCheckedChangeListener%28android.widget.CompoundButton.OnCheckedChangeListener%29)而不是`OnClickListener`? 然后，您可以将您从中获得的任何值分配`isChecked`到您的`checkBoxState`数组中。

# c# - 当我更改 2 个绑定文本框之一时，相同的 DataBinding 没有更新

> ID：15025885
> 
> 赞同：1
> 
> 时间：2013-02-22T13:59:42.167
> 
> 标签：c#, winforms, data-binding, textbox

我有 2 个使用相同 BindingSource 的文本框。当我更新一个 TextBox 并失去焦点时，另一个 TextBox 不会将其属性更新为新值。

任何帮助将不胜感激。

```
 using System.Data;
    using System.Windows.Forms;
    using System.ComponentModel;

    namespace TextBoxes
    {
        public partial class Form1 : Form
        {
            BindingSource bs1 = new BindingSource();
            public Form1()
            {
                InitializeComponent();
                this.Load += Form1_Load;
            }
            void Form1_Load(object sender, System.EventArgs e)
            {
                DataTable dt = new DataTable();
                dt.Columns.Add("Name");
                dt.Rows.Add("Donald Trump");
                dt.Rows.Add("Sergei Rachmaninoff");
                dt.Rows.Add("Bill Gates");

                bs1.DataSource = dt;
                bs1.RaiseListChangedEvents = true;
                bs1.CurrencyManager.Position = 1;

                textBox1.DataBindings.Add("Text", bs1, "Name");
                textBox2.DataBindings.Add("Text", bs1, "Name");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:14:52.263

您可以使用 endEdit 强制刷新 - 如果您将其放在 textchanged 上，那么当您更改 textbox1 时，textbox2 将自动更改。

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    bs1.EndEdit();
} 
```

（如果你想要相互更新，对 textbox2 的 textchanged 执行相同的操作）。

虽然我会说如果你绑定到一个列表，组合不是更好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:16:02.493

在您的代码中添加以下方法...它将起作用...

**表单设计器.cs**

```
 this.textBox1.LostFocus += new System.EventHandler(this.textBox1_LostFocus);
        this.textBox2.LostFocus += new System.EventHandler(this.textBox2_LostFocus); 
```

**表格.cs**

```
 private void textBox1_LostFocus(object sender, EventArgs e)
        {
            textBox2.DataBindings.Clear();
            textBox2.DataBindings.Add("Text", bs1, "Name");
        }

        private void textBox2_LostFocus(object sender, EventArgs e)
        {
            textBox1.DataBindings.Clear();
            textBox1.DataBindings.Add("Text", bs1, "Name");
        } 
```

# css - 如何水平调整图像大小（通过 CSS）以适合框？

> ID：15025891
> 
> 赞同：1
> 
> 时间：2013-02-22T13:59:58.107
> 
> 标签：css, image, responsive-design, centering

我目前遇到了这个问题。我正在通过 CSS 在一个盒子中调整图片的大小，并强制其高度。

```
.img_contener {
width: 100%;
height: 400px;
} 
```

有用于调整图像大小的 CSS：

```
img {  
max-width: 100%;
max-height : auto;
height: auto;
width: auto;
box-sizing: border-box;
} 
```

现在我想将生成的图片居中，根据它的高度，它不适合包含框，并且默认情况下保留在左侧。

margin:auto 和 text-align:center 都不起作用。

到目前为止，我还没有尝试过 jquery 解决方案……我更喜欢基于 CSS 的解决方案。我的替代方法是使用 php 强制调整图片大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:25:56.733

尝试这个：

```
.img_contener { 
   //your css ...

   overflow:hidden;
}

img {

   //your css ...

   display : block;
   margin : 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:28:28.630

如果你想让你的图像在主 DIV 中居中，你需要使用一个额外的标签来 img

像这样的东西

```
<div id="container">

    <p><img src="http://userserve-ak.last.fm/serve/252/15767501.jpg" class="inner"/></p>

</div> 
```

还有你的 CSS

```
#container {
    height: 100px;
    width: 200px;
    border: 1px solid black;
    overflow: hidden;

}

.inner {
    height: 120px;
    width: auto;
}

p {
    text-align: center;

} 
```

工作小提琴：http: [//jsfiddle.net/TXvuQ/1/](http://jsfiddle.net/TXvuQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:08:17.663

这在 CSS 中是完全可行的。请参阅下面的示例，您还应该在容器对象中添加溢出：隐藏。

HTML

```
<div id="container">

    <img src="http://userserve-ak.last.fm/serve/252/15767501.jpg" class="inner"/>

</div> 
```

CSS

```
#container {
    height: 100px;
    width: 100px;
    border: 1px solid black;
    overflow: hidden;

}

.inner {
    height: 100px;
    width: auto;
} 
```

工作小提琴 - [http://jsfiddle.net/TXvuQ/](http://jsfiddle.net/TXvuQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:09:36.043

Margin:auto 仅在您也将 display:block 应用于图像时才有效。

# java - 让事情去中心化 Android

> ID：15025893
> 
> 赞同：7
> 
> 时间：2013-02-22T14:00:02.090
> 
> 标签：java, android

就 Android SDK 而言，这可能没有多大意义，但是，在 C++ 中，我习惯于将 main.cpp（特别是 main() 函数）作为我声明和初始化其他类/对象的地方，然后所有我的应用程序确实发生在这些课程中。之后我再也没有回来检查 main.cpp 中的任何内容。但在 Java、Android SDK 中，您必须在主要活动中覆盖数十个方法，所有这些都发生在一个文件中。例子：

我的项目中有一个 MainActivity.java 和 SomeTest.java 文件，其中首先是扩展 Activity 的默认 MainActivity 类，而 SomeTest.java 包含声明和运行新线程的类。我从 MainActivity.java 初始化 SomeTest 类，并将活动句柄作为参数传递给它：

```
SomeTest test = new SomeTest(MainActivity.this); 
```

有了 MainActivity 的句柄，我继续从这个新创建的线程做所有事情。当我需要更新 UI 时，我使用 runOnUiThread() 在我的主布局上创建并显示一个新的 ListView（例如）。我想获取新创建的 Listview 的宽度和高度，因为我必须在 MainActivity.java 中覆盖 onWindowFocusChanged() 并从那里通知线程，因为 getWidth() 和 getHeight() 只有在 ListView 是时才有值实际显示在屏幕上。对我来说，从 MainActivity 到该线程进行这样的连接（如果你愿意的话，是“回调”）不是一个好习惯。

有没有办法可以将 onWindowFocusChanged() 之类的方法保留*在*线程中，并且根本不接触 MainActivity.java？

正如我所说，可能没有多大意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:12:55.997

> 有没有办法可以将 onWindowFocusChanged() 之类的方法保留在线程中，并且根本不接触 MainActivity.java？

`onWindowFocusChanged()`是一个回调方法。它在活动中被调用。你无法改变这一点。

> 有了 MainActivity 的句柄，我继续从这个新创建的线程做所有事情。

这通常不是一个好主意。例如，使用后台线程从文件或数据库加载一些数据是完全合理的（尽管使用`Loader`或`AsyncTask`可能更好）。但是，通常，后台线程不应该知道也不关心诸如“新创建的 ListView 的宽度和高度”之类的事情。

当然欢迎您将一些逻辑从活动中迁移到其他类中。您可能会为此使用特定的框架，例如片段或自定义视图。但是，类结构不应由您的线程模型驱动。例如，让我们回到你的开场白：

> 在 C++ 中，我习惯于将 main.cpp（特别是 main() 函数）作为我声明和初始化其他类/对象的地方，然后我的应用程序所做的所有事情都发生在这些类中

但是，在 C++ 中，您不会说您只能拥有两个类，其中一个在某个后台线程上运行。虽然您可能有一个或多个类碰巧使用后台线程（或多个线程），但类结构背后的驱动力不是“我有一个后台线程”，而是“我想重用 XYZ 逻辑”或“我希望使用类层次结构来支持策略模式”或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:31:38.677

就个人而言`Context`，从 Android SDK 获取的想法似乎很混乱。您所描述的来自过多的责任`Activity`。这就是为什么您需要在单个文件中跟踪很多东西（`Activity`的生命周期，获取`Context`实例以显示`Dialog`等）。我认为没有完美的解决方案，但我建议使用：

*   `Fragment`有助于将屏幕（等等逻辑）划分为单独部分的子类
*   3rd 方框架/库，如[AndroidAnnotations](http://androidannotations.org/)、[RoboGuice](https://github.com/roboguice/roboguice)、[Otto](http://square.github.com/otto/)，它们是避免意大利面条式代码的完美工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:13:53.823

如果您想从另一个类执行一些 UI 更新，请考虑使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)将您需要更新的视图传递给它。如果您需要示例，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:31:24.197

我阅读了所有内容并理解了您的陈述，我可以看到您已经进行了一段时间的编程，但显然只是从 Android 开始，我之前做过很多嵌入式系统，所以我完全明白拥有一个看起来像的软件的概念：

```
void run(){
    object.setup();
    while(true){
        otherObject.run();
    }
} 
```

但是你的问题的逻辑存在一个基本缺陷：

**Android 编程是不同于 C++ 和计算机编程的编程范式，您应该了解它的特定范式，而不是假设其他范式的良好实践。**

引用你的话：`create and show a new ListView (for example) on my main layout. I want to get the width and height of the newly created Listview, for what I have to override onWindowFocusChanged()`。

从那我可以看出你真的在尝试以一种在 Android 上下文中不推荐的方式来做 Android 的事情。您可以轻松地从 XML 布局实现 ListView，`setContentView(int)`并使用 Activity onCreate 实例化任何线程 (AsyncTaskLoader) 框架以在后台加载数据并将其传递回 UI。

这并不意味着您的所有代码都将被转储到一个文件中，从而使其变得一团糟。我放的这个小例子可以用实现加载器回调的 Activity 来做，一个带有加载器的单独类，一个带有数据加载工作的单独类，一个带有数据适配器的单独类，活动只是一个中心部分，用于组织和在其生命周期的正确时刻管理这些类，并且在任何时候您都不需要调用`onWindowFocusChanged()`并且仍然拥有组织良好的代码。

除此之外，请参考 CommonsWare 答案，因为它通常写得很巧妙且正确。

# oracle - Oracle 数据泵

> ID：15025897
> 
> 赞同：0
> 
> 时间：2013-02-22T14:00:18.610
> 
> 标签：oracle

我正在为我的应用程序使用 Oracle 导出数据泵 (expdp)。我的 oracle 客户端和服务器在不同的机器上。当我在 oracle 客户端机器上使用我的应用程序时，导出的转储总是在 Oracle 服务器机器上创建。这是oracle导出数据泵的限制吗？或者有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:05:47.037

这就是数据泵的设计工作方式。

如果您需要客户端，则必须使用较旧的`exp`和`imp`. 否则之后使用数据泵和 ftp 文件到您的本地机器。

[http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#i1010293](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#i1010293)

> 注意：所有数据泵导出和导入处理，包括转储文件的读取和写入，都在指定的数据库连接字符串选择的系统（服务器）上完成。这意味着对于非特权用户，数据库管理员 (DBA) 必须为在该服务器文件系统上读取和写入的数据泵文件创建目录对象。

# project - 代码块中的文件组织

> ID：15025898
> 
> 赞同：11
> 
> 时间：2013-02-22T14:00:29.717
> 
> 标签：project, codeblocks, projects-and-solutions

我目前正在从事 Code::Blocks 的中/大型项目，我想知道如何组织我的文件。

首先，在 Code::Blocks 中创建“虚拟文件夹”似乎很自然，但是在磁盘上，所有文件都在项目的根文件夹中，这对我来说似乎很乱：如果我想在 Code 之外做一些事情： :Blocks，然后很难找到文件。我应该使用这种方法吗？

然后，如果我每次需要它们时都创建“真实”文件夹，我需要将它们添加到路径中以便构建它们。另外，Code::Blocks 似乎不喜欢这样。有没有一种简单的方法可以对 Code::Blocks 说“构建项目，就像我的项目目录中的子文件夹中的文件直接在根项目目录中一样”？

我没有在互联网上找到通常如何使用 Code::Blocks 组织项目，欢迎任何链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-04T21:05:28.800

### 大型项目组织

如果您正在创建一个新项目、编写一个新的软件应用程序或想要重构现有代码，那么最好正确地构建您的项目。虽然可能有数百种构建方法，并且有很多事情需要考虑，但在这里我想给你一种可能的方法，它对我来说真的很有效。这个例子/提案是我多年来对这个主题所做的研究的总结，所以它不仅仅是“一个想法”

在组织项目时，您肯定需要解决三个“主要”问题：

大中型项目，并不是说所有的项目，都应该是**版本控制**的（以GIT为例）。

大中型项目，并不是说所有的项目，都应该由**项目生成器**来维护（以 Cmake 为例）。

对于大中型项目，将所有文件保存在同一个物理目录中是不可能的。甚至强烈建议不要这样做（包括 linux 内核在内的一些指南）。您应该**以物理逻辑方式组织这些文件**。

一个示例物理项目文件结构将是：

```
~example/environment$project tree .
.
|- code
     |- core
     |- extern
|- docs
|- tests
     |- core_tests
     |- extern-tests
|- ... 
```

不幸的是，在 code::blocks 中，这意味着您*必须将所有项目物理文件夹包含到搜索路径*中。

您可以在 code::blocks 中以任何您想要的方式组织文件，实际上也可以，但是如果您的物理结构是合乎逻辑的，那么*您的项目应该可以直观地浏览！*

code::blocks*不允许包含虚拟路径*。

希望这可以帮助

韩国

赫维

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T13:11:05.377

在我的 Code::Blocks 项目之一中，我在源文件夹中使用了不同的文件夹；客户端、通用和服务器。

然后我有不同的编译目标，这样客户端编译目标将使用在客户端和公共中找到的源文件，而服务器编译目标将使用在服务器和公共中找到的源文件。

不确定这是否是您所追求的，但这是我的项目的图片： ![在此处输入图像描述](../Images/3686131231f50a06b603fde4552b7920.png)

# mono - monomac / Xamarin.Mac - 使用 NSTextViewDelegate 派生 NSTextField

> ID：15025899
> 
> 赞同：0
> 
> 时间：2013-02-22T14:00:30.230
> 
> 标签：mono, monomac, xamarin, xamarin.mac

在 Objective-C 中，我可以使我的 NSTextField 子类符合 NSTextViewDelegate 协议——就像这样：

```
@interface PasswordField : NSTextField <NSTextViewDelegate> 
```

我怎样才能把这个成语翻译成 C# / monomac？

我已经尝试继承 NSTextViewDelegate：

```
private class TextViewDelegate : NSTextViewDelegate
{} 
```

并将其分配给我的 NSTextField 子类的委托属性：

```
public class PasswordField : NSTextField
{
    public PasswordField(NSCoder coder) : base(coder)
    {
        this.Delegate = new TextViewDelegate();
    }
} 
```

但是，显然这不起作用，因为**NSTextField的***Delegate*属性（正确）键入为**NSTextFieldDelegate**。

 ****```
Error CS0029: Cannot implicitly convert type `PasswordFieldControl.PasswordField.TextViewDelegate' to `MonoMac.AppKit.NSTextFieldDelegate' (CS0029) 
```

那么如何使这项工作像在 Objective-C 中那样工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:52:57.713

有两种方法可以做到这一点：

如果您可以将委托分开，您可以这样做：

```
class TextViewDelegate : NSTextViewDelegate
{
    public override void TextDidChange (NSNotification notification)
    {
    }
}

public class PasswordField : NSTextField
{
    public PasswordField(NSCoder coder) : base(coder)
    {
        this.WeakDelegate = new TextViewDelegate();
    }
} 
```

或者，如果您想使用相同的 PasswordField 对象：

```
public class PasswordField : NSTextField
{
    [Export("textDidChange:")]
    public void TextDidChange (NSNotification notification)
    {
    }

    public PasswordField(NSCoder coder) : base(coder)
    {
        this.WeakDelegate = this;
    }
} 
```****

# wordpress - 在 2 种语言之间同步自定义字段（使用 WPML）

> ID：15025900
> 
> 赞同：2
> 
> 时间：2013-02-22T14:00:31.730
> 
> 标签：wordpress, custom-fields, multilingual

我正在使用带有自定义帖子和字段（带有高级自定义字段插件）的 WPML（Wordpress 多语言插件）并且我有这个“问题”：我有一个带有自定义字段（文本）的自定义帖子，我在字段中输入文本并保存。现在我转到翻译后的帖子，看到相同的自定义字段是空的。然后字段不同步。请注意，相反，标签字段在语言之间很好地同步。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:02:27.050

我不认为自定义字段的保存值默认同步。只有变量的名称等。

因此，如果您有一个自定义字段并且不希望它在所有语言上都具有相同的值，只需不要将该自定义字段添加到其他语言。把它放在主要语言上。

然后在模板中，您可以使用它来始终从主要语言中获取值：

```
<?php the_field('fieldname',lang_page_original_id($post->ID));?> 
```

然后将其添加到functions.php

```
function lang_page_original_id($id){
    if(function_exists('icl_object_id')) {
    return icl_object_id($id,'page', false, "MAIN LANGUAGE CODE EX: SV");
    } else {
        return $id;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T00:51:00.403

以下是 ACF 文档： http: [//www.advancedcustomfields.com/resources/multilingual-custom-fields/](http://www.advancedcustomfields.com/resources/multilingual-custom-fields/)

但它并没有你想象的那么好。同步只是从原始版本到翻译版本的“一种方式”。有关更多详细信息，请参阅：[https](https://wordpress.stackexchange.com/questions/181338/fixed-values-for-same-post-translations/214120#214120) ://wordpress.stackexchange.com/questions/181338/fixed-values-for-same-post-translations/214120#214120 。

您将需要 WPML 多语言 CMS 才能使用同步功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T17:42:00.573

嗨，在你的 function.php 中使用这个可以 100% 工作：

```
function sync_field_meta( $post_id, $post, $update ) {

    $post_type = get_post_type($post_id);
    // use this if u have muti custom post type
    $posts_type = array('your_custom_post_type1', 'your_custom_post_type2', 'your_custom_post_type3', 'your_custom_post_type4');

    if( ! in_array($post_type, $posts_type)) return;

    $en = apply_filters( 'wpml_object_id', $post_id, 'any', FALSE, 'en' );
    $fr = apply_filters( 'wpml_object_id', $post_id, 'any', FALSE, 'fr' );

    // your acf key like (field_58136c9dc9963) you can check documention
    $field = get_field('acf_key',$post_id);

    if($en){
        update_field('acf_key',$field,$en);
    }
    if($fr){
        update_field('acf_key',$field,$fr);
    }

}
add_action( 'save_post', 'sync_field_meta', 10, 3 ); 
```

# azure - 超出 Azure 存储表传输速率 - 如何？

> ID：15025906
> 
> 赞同：2
> 
> 时间：2013-02-22T14:01:05.413
> 
> 标签：azure, azure-storage, azure-table-storage

根据 Azure 的[新可扩展性目标](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)，表存储中的每个分区限制为 2000 个实体/秒。

**通过并行性，我已经能够达到每秒 16000 个实体的批量插入。**

例如，在我的 XtraLarge Web 角色（8 个 CPU，8 个内核）上，我在 64 个同时并行任务上插入 6400 个实体（即 64 个单独的批量插入，每个 100 个）。

这怎么可能？2000 个实体/秒只是分区预期的最低性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:19:43.810

它们是可扩展性**目标**，而不是**限制**。正如您所指出的，这是最低预期性能，而不是最高性能。我想你会发现在那个特定的时间，在那个特定的网络和硬件上，几乎没有来自其他 Azure 客户的资源争用。另外，请注意您的实体的大小 - Azure 似乎对小型实体表现良好，目标将是最大 (1MB)。被警告——尽管意外的表现可能是有用的，但不要计划它在那里。还要确保无论您达到限制的频率如何，您都在为故障（500s 和 503s）进行编码，否则当存储服务表现不佳时，您的应用程序可能会开始失败。

# installation - 如何使应用程序便携？

> ID：15025907
> 
> 赞同：10
> 
> 时间：2013-02-22T14:01:10.750
> 
> 标签：installation, portability

我有一些程序的标准安装，尽管它们是免费软件，我可以下载它们并安装在任何机器上，但事情并不总是那么容易。当系统崩溃并且我没有工作机器或工作互联网连接或局域网卡或局域网卡驱动程序时，如果某些依赖文件不在该版本的 Windows 上，我总是很难找到它们并使它们工作。

我需要知道的是如何使应用程序可移植，以便我可以从我的 USB 运行它们，或者只是从我的 PC 上的 USB 复制它们并运行，应用程序需要哪些依赖文件，以及特定应用程序安装的文件和位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-21T19:30:06.857

这是一个复杂的故事，但让我们试着总结一下。从“为什么？”部分开始。

我是一个非常“讨厌”安装人员的痴迷者。我喜欢拥有一个干净的系统，而不会在文件 reg 条目和 DLL 中臃肿。这就是为什么我制作几乎所有（至少 97%）我使用的程序都是可移植的。到今天我做了600多个，我能说的是；

你需要： 1- 一个监视文件系统的程序（安装后包含的）我用这个。简单直接（抱歉不是免费软件，但您可以找到大量替代品） [http://www.samsunsegman.com/um/](http://www.samsunsegman.com/um/)

2- 一个监视注册表的程序（安装后更改或包含的内容）我在 HTML 模式下使用它。免费快速简单。并且具有便携性。 [http://sourceforge.net/projects/regshot/](http://sourceforge.net/projects/regshot/)

现在用这 2 个扫描系统，然后运行安装程序。打开已安装的程序并根据需要进行设置后。而不是使用这 2 个程序来查找添加的文件和注册表项。

对于文件，将它们删除到垃圾桶，然后将它们从垃圾箱中批量取回（很容易这样做）到应用程序的文件夹中。注册表，打开注册表中的相关分支，删除任何包含地址的条目，如（插件文件夹= c：\ prog ....等）右键单击主分支并选择导出。这是你的注册设置...

3- 下载此程序 [http://ctuser.net/?reg2exe](http://ctuser.net/?reg2exe) 这会将您的 reg 文件转换为 exe 文件。

4- 下载此应用程序[http://download.cnet.com/FilePacker/3000-2216_4-10414081.html](http://download.cnet.com/FilePacker/3000-2216_4-10414081.html) 注意：如果没有，请单击“直接下载链接”，cnet 将欢迎您使用他们的安装程序 :)

使用这个程序（我使用它是因为不会干扰任何应用程序）打包你想要移植的程序。在向导中，首先在主程序文件之后选择您的 reg-exe 文件。Launcher 将按此命令执行它们。并在设置中选择“终止后删除”将在退出时删除提取的文件。

您可以发现更多详细信息。这可以帮助您移植近 75% 的简单应用程序。

5-对于复杂的程序或复杂的需求，你甚至可以制作自制的装载机，比如

*   在执行应用程序之前，将用户文件放在 appdata 文件夹下（我讨厌）
*   将设置放入注册表（即使使用动态修改的“路径”地址）
*   选择执行哪个（x86 或 x64）
*   如果需要，在管理员模式下执行
*   执行应用程序...当应用程序终止时...
*   从注册表中删除设置
*   从 appdata 文件夹中取出用户文件并放回程序文件夹（usb 等）下。
*   删除系统下的遗留文件...

我只是写了最后这些，让你明白你能走多远。对于所有这些额外的技巧，我只使用 bat 文件。我也用这个软件把它们转换成exe。[http://www.f2ko.de/programs.php?lang=en&pid=b2e](http://www.f2ko.de/programs.php?lang=en&pid=b2e) （也是免费的）

除“卸载管理器”外，我使用的所有软件都是免费的。使用这种技术，令人惊叹，但有些程序运行得更快。

实际上，您可以只使用 JauntePE 或便携式应用程序打包程序，但是...... Jaunte 和类似的沙盒制作程序非常慢并且无法与所有程序兼容。甚至导致崩溃。就我严格的 spped 和大小标准而言，便携式应用程序方法有点臃肿。这就是为什么我自己做了 10 年（是的，甚至人们都没有谈论可移植性）

注意：我不是程序员，你也不需要做这些。我从未发布过我的便携式设备，而且出于对作者的尊重，您也不应该（阅读 EULA）。

但永远不要忘记要求所有作者提供便携式版本。强制他们退出安装程序；）

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T11:50:57.653

inovasyon 做得很好！如果你想制作一些便携的应用程序，可以在你移动到的每台计算机上运行，​​那么 99.9% 的应用程序都可以便携。如果您还希望该应用程序不会留下任何文件、文件夹或注册表项，并且不会更改或破坏主机 PC 的设置，那么这会进一步限制事情。需要管理员权限才能写入注册表或文件系统的受保护区域的应用程序在具有锁定权限的 PC 上使用时会中断。

需要在主机 PC 上安装服务的应用程序通常会将它们抛在后面。您必须知道有些应用程序被锁定到特定的 PC - Microsoft 最新版本的 Office 就是一个很好的例子。当移动到另一台 PC 时，它们根本不会运行。此外，您还需要一些工具来制作便携式应用程序：cameyo、thinapp、boxedapp、portableapps、spoon、app-v 等。便携式应用程序将从闪存驱动器和计算机运行。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-10T13:54:12.390

*[这是使用PortableApps.com](http://portableapps.com/)*工具设置便携式应用程序的入门指南。他们有一个[面向开发人员的页面，](http://portableapps.com/apps/development)对某些细节非常有帮助，但整个过程没有得到很好的总结。以下是创建可移植应用程序的一般大纲：

**1\. 调查您的应用程序的足迹**

找到您想要移植的应用程序的所有文件、注册表位置和设置（利用[inovasyon 答案](https://stackoverflow.com/a/16677995/1490584)中的第 (1) 和 (2) 点，也许看看[Zsoft](http://www.zsoft.dk/)）。启动虚拟机并跟踪应用程序的更改而不造成太多混乱通常是一个好主意。

**2\. PortableApp 生成器**

下载、解压并打开*[PortableApps.com 平台](http://portableapps.com/download)*，然后按照`[The system tray icon]`→<code>[Apps] →<code>[Get More Apps] →<code>[By Category] ​​安装*PortableApps.com Launcher*和*NSIS（Unicode )*需要移植您的应用程序。或者，但会增加一些麻烦，将*[PortableApps.com Launcher](http://portableapps.com/apps/development/portableapps.com_launcher)*和*[NSIS Portable（Unicode 版本）](http://portableapps.com/apps/development/nsis_portable)*都下载为独立的。
您现在可以通过运行 PortableApps.com 启动器并将其指向您的项目来编译项目。

**3\. PortableApp 布局和结构**

下载*PortableApp.com 应用程序模板（*[在此处](http://portableapps.com/development)搜索），按照规范对（1.）中获得的数据和文件进行结构化。此外，从[portableapps.com](http://portableapps.com/apps)下载一些应用程序，以了解它们的结构的一些实际示例，并了解更多关于便携性的困难（例如在设置文件中替换驱动器号以对应便携驱动器的移动）。
作为一个“Hello World”的例子，试试这个简单程序的可移植性：`helloworld.bat`，内容：

```
 @echo off
    echo Hello World > log.txt 
```

它将所有本地环境变量写入日志文件`log.txt`。您可以尝试将文件写入`%APPDATA%`子目录，看看是否可以让您的项目将其重定向到可移植目录。

**4\. 附加用途**

如果您需要执行一些使用默认`.ini`功能无法实现的额外编码（例如强制仅应用一个应用程序实例），请将带有文件位置的 NSIS 脚本添加`App\AppInfo\Launcher\Custom.nsh`到您的项目中。
*请注意，PortableApps.com 的[自定义代码指南](http://portableapps.com/manuals/PortableApps.comLauncher/advanced/custom.html)错误地将文件位置声明为`Other\Source\Custom.nsh`. 关于这个脚本的布局也非常无益。而是查看其他应用程序中的示例，并通过 Google-ing 学习一下 NSIS 语法。*

# android - 检查文件是否存在于内部目录中

> ID：15025909
> 
> 赞同：0
> 
> 时间：2013-02-22T14:01:15.507
> 
> 标签：android

我正在检查目录中是否存在文件。如果没有，它应该下载它。

```
 File file = new File(mediadir, _name);

    if(file.exists()) {
        Log.i("FILE EXISTS", _name);
    } else {
        Log.i("DOWNLOAD", _name);
        new Download().execute(context, name, "http://192.168.2.136:8080/rest/transfer/"+ linkid +"/"+ username +"/" + json_data.getString("ID"));
} 
```

但是**file.exists()**总是**正确的**

*该文件在那里不存在*

我在 file.exists() 之前运行它

```
 File mediadir = getDir("tvr", Context.MODE_PRIVATE);
        if (mediadir.isDirectory()) {
            String[] children = mediadir.list();
            for (int i = 0; i < children.length; i++) {
                new File(mediadir, children[i]).delete();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:05:37.847

您是否尝试过使用 isFile() 代替？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:12:15.947

试试这个，

```
 for (File f : myDir.listFiles()) {
  //Do your stuf
   String name = f.getName();
  //Here you will get file you have already stored in directory.

  } 
```

# c++ - 如何切换到 VC++ 2012 中的设计视图？

> ID：15025914
> 
> 赞同：6
> 
> 时间：2013-02-22T14:01:25.113
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2012

我刚刚安装了 Visual Studio 2012 专业版，我正计划编写我的第一个 Hello World 应用程序，但我找不到设计器视图！

![在此处输入图像描述](../Images/cbb56120e2d761fc24d685855181109a.png)

如何在 Visual C++ 2012 Professional 中切换到设计器模式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T14:13:44.957

也许你已经习惯了 C#，当你假设`MyForm.cs`你打开它时，它会`MyForm.cs [Design]`默认打开一个窗口，你可以在其中设计你的对话框。

在 Visual C++ 中，对话框的外观存储在资源文件中，因此您需要双击`Win32Project3.rc`它会将您的左窗格切换到**资源视图**。然后你会看到更多的资源类型（它们看起来像文件夹），在**对话框**下你会找到你的对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-01T02:06:16.553

我发现双击头文件（如解决方案资源管理器中所示）会在适用的地方打开设计器视图。为了得到实际的模板，我通过 VS2015 使用了一个在线模板。抱歉，如果这个回答不是最好的，我今天早些时候刚刚掌握了它......

# java - 为spring控制器使用scala伴随对象而不是在服务层实现？

> ID：15025916
> 
> 赞同：0
> 
> 时间：2013-02-22T14:01:33.823
> 
> 标签：java, spring, scala, design-patterns

我正在使用 scala 弹簧控制器。根据我的经验，java spring 控制器是轻量级的类，它们调用一些服务方法，并且可能在将值/集合返回到表示层（jsp）之前执行一些逻辑。

Scala 伴随对象似乎非常适合服务层。因此，不是使用服务层中的控制器调用方法，而是使用伴随类？使用伴生类的原因是为主类提供辅助方法，因此使用伴生控制器是有意义的。

这是一个好的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:45:00.257

我认为应该使用包含服务方法合同的 scala 特征，并为特征方法添加一个实现类。类似于抽象工厂模式。

这个问题与[Why use a service layer instead of a helper class for spring controllers 有关？](https://stackoverflow.com/questions/15028568/why-use-a-service-layer-instead-of-a-helper-class-for-spring-controllers)

# php - 在 php 中的 mysql 时间戳上添加 1 小时

> ID：15025918
> 
> 赞同：5
> 
> 时间：2013-02-22T14:01:41.693
> 
> 标签：php

在我的 Mysql 表中，我有一个时间戳字段。在我的 php 页面中，我以这种方式显示记录 ($row[data])

```
echo date("d-m-Y H:i:s", strtotime($row['data'])); 
```

现在在我的 php 中，我想在我的约会上增加 1 小时。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T14:03:08.967

```
echo date("d-m-Y H:i:s", strtotime($row['data'])+3600); 
```

请注意，您**无法**比较“dmY”格式的结果日期。

比较`strtotime`结果或初始日期。或先将结果格式化为正确的格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T14:21:32.503

您可以在 MySQL 中立即执行此操作：

```
SELECT `date` + INTERVAL 1 HOUR AS `date`
FROM ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T14:12:55.240

```
 echo date("d-m-Y H:i:s", strtotime($row['data'].' +1 hour')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:03:05.303

尝试：

```
strtotime($row['data'] . ' +1 hour') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T14:03:21.993

```
echo date("d-m-Y H:i:s", strtotime($row['data']) + 3600); 
```

只需手动添加时间（3600 秒 = 1 小时）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T14:04:09.407

添加 3600 秒，你会没事的。

```
echo date("d-m-Y H:i:s", strtotime($row['data'])+3600); 
```

# python - 在 Python 中循环遍历大文件需要数小时

> ID：15025919
> 
> 赞同：3
> 
> 时间：2013-02-22T14:01:42.960
> 
> 标签：python, performance, glob

这是我在 Python 中工作的第二天。我在 C++ 中工作了一段时间，但决定尝试 Python。我的程序按预期工作。但是，当我在没有 glob 循环的情况下一次处理一个文件时，每个文件大约需要半小时。当我包含 glob 时，循环需要大约 12 小时来处理 8 个文件。

我的问题是，我的程序中有什么东西肯定会减慢它的速度吗？我应该做些什么来让它更快？

我有一个大文件文件夹。例如

file1.txt (6gb) file2.txt (5.5gb) file3.txt (6gb)

如果有帮助，每行数据都以一个字符开头，该字符告诉我其余字符的格式，这就是我拥有所有 if elif 语句的原因。一行数据如下所示： T35201 M352 RZNGA AC

我正在尝试读取每个文件，使用拆分进行一些解析，然后保存文件。

电脑有32gb的ram，所以我的方法是将每个文件读入ram，然后循环遍历文件，然后保存，为下一个文件清除ram。

我已包含该文件，因此您可以查看我正在使用的方法。我使用了一个 if elif 语句，它使用了大约 10 个不同的 elif 命令。我已经尝试过字典，但我无法弄清楚以挽救我的生命。

任何答案都会有所帮助。

```
import csv
import glob

for filename in glob.glob("/media/3tb/5may/*.txt"):
    f = open(filename,'r')
    c = csv.writer(open(filename + '.csv','wb'))

    second=0
    mill=0
    for line in f.readlines():
       #print line
        event=0
        ticker=0
        marketCategory=0
        variable = line[0:1]    

        if variable is 'T':
           second = line[1:6]
           mill=0
        else: 
           second = second 

        if variable is 'R':
           ticker = line[1:7]   
           marketCategory = line[7:8]
        elif variable is ...
        elif variable is ...
        elif ...
        elif ...
        elif ...
        elif ...
        elif        

        if variable (!= 'T') and (!= 'M')
            c.writerow([second,mill,event ....]) 
   f.close() 
```

**更新** 每个 elif 语句几乎相同。唯一改变的部分是我分割线条的方式。这是两个 elif 语句（总共有 13 个，除了拆分方式之外，它们几乎都是相同的。）

```
 elif variable is 'C':
     order = line[1:10]
     Shares = line[10:16]
     match = line[16:25]
     printable = line[25:26]
     price = line[26:36]
   elif variable is 'P':
     ticker = line[17:23]
     order = line[1:10]
     buy = line[10:11]
     shares = line[11:17]
     price = line[23:33]
     match = line[33:42] 
```

**UPDATE2** 我已经使用`for file in f`两个不同的时间运行了代码。我第一次运行单个文件*时没有* `for filename in glob.glob("/media/3tb/file.txt"):`手动编码一个文件的文件路径大约需要 30 分钟。

我再次运行它，*仅* `for filename in glob.glob("/media/3tb/*file.txt")`文件夹中的一个文件就花了一个小时。glob 代码会增加那么多时间吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T14:06:00.523

这里：

```
for line in f.readlines(): 
```

你应该这样做：

```
for line in f: 
```

前者将整个文件读入一个行列表，然后遍历该列表。后者以增量方式执行此操作，这将大大减少分配的总内存，然后由您的程序释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:18:27.127

每当你问“这其中的哪一部分减慢了整个事情的速度？” 答案是“剖析它”。[在Python Profilers 的](http://docs.python.org/2/library/profile.html)Python 文档中有一个很好的描述如何做到这一点。此外，正如 John Zwinck 指出的那样，您一次将太多内容加载到内存中，并且一次只能加载一行（文件对象在 Python 中是“可迭代的”）。

就个人而言，我更喜欢 Perl 所说的“调度表”，而不是一个巨大的`if..elif...elif`怪物。 [这个网页](http://bytebaker.com/2008/11/03/switch-case-statement-in-python/)描述了一种 Pythonic 的方式。它是功能键的字典，并非在所有情况下都有效，但对于简单的`if x==2:...elif x==3...`（即，切换一个变量的值）来说效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:17:31.057

使用可迭代（通过使用产量）将更多行“缓冲”到内存中，而不是一次只缓冲一行，而不是一次缓冲整个文件。

```
def readManyLines(fObj,num=1000):
  lines = fObj.readlines(num)
  for line in lines:
    yield line

f = open(filename,'r')
for line in readManyLines(f):
  process(line) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:36:44.030

不确定这是否有帮助，但尝试使用它而不是 glob.glob 只是为了排除问题。我在 Windows 上，所以我不能 100% 确定这在 unix 下有效，但我不明白为什么它不会。

```
import re
import os
import csv

def find_text_files(root):
    """Find .txt files under a given directory"""
    foundFiles = []
    for dirpath, dirnames, filenames in os.walk(root):
        for file in filenames:
            txt = re.compile(r'txt$',re.I,).search(file)
            if txt:
                foundFiles.append(os.path.join(dirpath,file))
    return foundFiles

txtfiles = find_text_files('d:\files') #replace the path with yours

for filename in txtfiles:
    f = open(filename,'r')
    c = csv.writer(open(filename + '.csv','wb')) 
```

# python - 不同阶的傅里叶求和

> ID：15025922
> 
> 赞同：0
> 
> 时间：2013-02-22T14:01:47.377
> 
> 标签：python

我正在尝试运行以下脚本。我的目的是获得输出，它会在中间给出一个高强度高斯，然后在大高斯的两侧给出两个小高斯。它是所有 y 值的傅立叶总和，每次取不同的 n 值，并将它们与 x 作图。但不知何故，我没有得到想要的结果。一些帮助将不胜感激。编码-

```
from pylab import *

n = 6    
D = 6

x = linspace(-3, 3, 13000)    
y = [1, 1, 1, 1, 1]    
F = []

for i in range(1,n):
    F=sum((item*cos(2*pi*i*x/D)for item in y)) 

plot(x,F,'r')

show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:29:54.193

您`F`每次都通过循环重新分配。这可能是您的问题，因为在循环结束时您`for i in range(1,n)`将 F 作为数字，而不是作为数字*列表*。

要创建`F`值列表，只需更改`F = sum(....)`为`F.append(sum(...))`，最后您将得到一个值列表。

另请注意，这`range(1, n)`是从`1`到的范围`n-1`。这可能是也可能不是您想要的。

# sql - 多表 SQL (MySQL) 查询的改进方法？

> ID：15025928
> 
> 赞同：1
> 
> 时间：2013-02-22T14:02:12.340
> 
> 标签：sql, left-join, correlated-subquery, multi-query

希望你能提供帮助。我有三个表，并想创建一个条件查询，以根据一个表中存在的行创建一个子集，然后从结果中排除该行，然后查询最终的第三个表。我认为这很简单，但是我在 SQL 方面没有很好的实践，并且在对左连接、相关子查询等进行了 6 个小时的研究/测试之后，它有所帮助，但我仍然无法达到正确的结果集. 所以这里是设置：

t1
arn_mkt_stn
a00001_177_john_fm
a00001_177_bill_fm
a00001_174_dave_fm a00002_177_john_fm a00006_177_bill_fm
a00006_177_bill_fm
a00006_177_bill_fm
a00010_177_john_fm
- 注意：名称与3位前缀（例如_177）和fm部分的关系始终是一致的：'_177_john_fm'只有a000xx更改

T2
arn_mkt
A00001_105
A00001_177
A00001_188
A00001_246
A00002_177
A00003_177
A00004_026
A00004_135
A00004_177
A00006_177
A00010_177

实施例：因此，如果_177_JOHN_FM是arn_mkt_stn行的在T1的子字符串，排除它与177从T2的子串得到arn_mkts时-在这种情况下，所需的结果集将是:
A00003_177
A00004_177
A00006_177

同样，_177_BILL_FM 将返回： A00002_177
A00003_177
A00004_177
A00010_177
然后 我

想使用此结果集从基于“A00003” 等
的 第三 个 表 中 提取 记录方法 [这里 $stn_code = JOHN_FM 和 $stn_mkt = 177] "SELECT * FROM T2, T1 WHERE arn != SUBSTRING(T1.arn_mkt_stn, 1,6) AND SUBSTRING(T1.arn_mkt_stn, 12,7) = '$ stn_code' AND SUBSTRING(arn_mkt, 8,3) = '$stn_mkt' （然后使用此结果查询 T3..）

还有一个左连接和一个子查询，但我显然错过了一些东西！任何指点感激地收到，谢谢，

富有的。

[编辑：感谢您帮助 sgeddes。我将在上面扩展我的逻辑......首先，所需的结果集总是与每个查询只有一个名称相关，例如来自 T1，让我们使用 JOHN_FM。在 T1 中，JOHN_FM 当前与“arn”相关联（在 arn_mkt_stn 内）：A00001、A00002 和 A00010”。T2 中的下一步是查找所有具有 JOHN_FM 的 3 位前缀 (177) 的“arn（在 arn_mkt 内）”，然后排除 T1 中的那些。注意：A00006 仍然存在，因为它没有连接到 T1 中的 JOHN_FM。BILL_FM 的相同查询给出了稍微不同的结果，不包括 A00001 和 A00006，因为它在 T1 中有这个关联。谢谢，R]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:13:34.510

您可以使用 a`LEFT JOIN`从 T2 中删除与 T1 中的记录匹配的记录。但是，我不确定我是否理解您的逻辑。

你说`A00001_177_JOHN_FM`应该返回：

```
A00003_177
A00004_177
A00006_177 
```

但是，不会从上述结果中`A00006_177_BILL_FM`排除吗？`A00006_177`

如果我对您的理解正确，则此查询应该与您要查找的内容接近（不完全确定您需要返回哪些字段）：

```
SELECT T2.arn_mkt, T3.arn
FROM T2 
  LEFT JOIN T1 ON
    T1.arn_mkt_stn LIKE CONCAT(T2.arn_mkt,'%')
  INNER JOIN T3 ON
    T2.arn_mkt LIKE CONCAT(T3.arn,'%')
WHERE T1.arn_mkt_stn IS NULL 
```

[小提琴演示示例](http://sqlfiddle.com/#!2/3c293/3)

**- 编辑 -**

查看评论，这应该是您正在寻找的内容：

```
SELECT *
FROM T2 
  LEFT JOIN T1 ON
    T1.arn_mkt_stn LIKE CONCAT(LEFT(T2.arn_mkt,LOCATE('_',T2.arn_mkt)),'%') AND T1.arn_mkt_stn LIKE '%JOHN_FM'
  INNER JOIN T3 ON
    T2.arn_mkt LIKE CONCAT(T3.arn,'%')
WHERE T1.arn_mkt_stn IS NULL 
```

这是更新的小提琴：[http ://sqlfiddle.com/#!2/3c293/13](http://sqlfiddle.com/#!2/3c293/13)

# python - coco2d (python) 和 pyglet 上的键盘事件

> ID：15025930
> 
> 赞同：1
> 
> 时间：2013-02-22T14:02:18.497
> 
> 标签：python, cocos2d-iphone

这里的第二个问题，我的第一个问题是答案并且真的很有帮助，所以我会再试一次。

这是代码和解释：

```
import cocos
from cocos.actions import *
import pyglet
from pyglet.window import key
from pyglet.window.key import KeyStateHandler
from cocos.director import director

keys = KeyStateHandler()

class ScaleTestLayer(cocos.layer.Layer):
    is_event_handler = True 
    def __init__(self):
        super( ScaleTestLayer, self ).__init__()
        self.sprite = cocos.sprite.Sprite('grossini.png')
        self.sprite.position = 320,240
        self.drag = False
        self.add(self.sprite)
        self.rect = self.sprite.get_rect()

    def on_mouse_release(self, x, y, buttons, modifiers):
        if self.rect.contains(x, y) == True:
            if self.drag == False:
                scale = ScaleBy(5, duration=1)
                if buttons == pyglet.window.mouse.LEFT:
                    self.sprite.do(scale)
                if buttons == pyglet.window.mouse.MIDDLE:
                    rotate = RotateBy(180, 1)
                    self.sprite.do(rotate)
                if buttons == pyglet.window.mouse.RIGHT:
                    scale = (Reverse(scale))
                    self.sprite.do(scale)  
            else:
                self.drag = False    

    def on_mouse_drag(self, x, y, dx, dy, buttons, modifiers):
        if self.rect.contains(x, y):
            self.drag = True
            self.sprite.position = director.get_virtual_coordinates (x, y)
        self.rect.center = self.sprite.position

    def on_key_press(self, symbol, modifiers):
        if keys[key.SPACE]:
            jump = JumpBy((5,0), duration=0.5)
            self.sprite.do(jump)
        if keys[key.RIGHT]:
            move = MoveBy((10,0), 0.5)
            self.sprite.do(move)

if __name__ == "__main__":
    cocos.director.director.init()
    test_layer = ScaleTestLayer ()
    main_scene = cocos.scene.Scene (test_layer)
    cocos.director.director.run (main_scene) 
```

所以这是我的问题。当我按 SPACE 或 RIGHT 时，它不会执行该操作。我打印了值，并且 keys[key.SPACE] 返回 False，即使我确实按下了这些按钮。我错过了什么？也许一些push_handlers？我不知道如何使用它。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:48:20.410

是的，您需要在 上使用 push_handlers`KeyStateHandler`以便更新。我自己没有使用过 cocos2d，只有 pyglet，所以这可能不是最好或正确的方法，但它应该能让你继续前进。

```
if __name__ == '__main__':
    cocos.director.director.init()
    cocos.director.director.window.push_handlers(keys)
    # Create layer, run, etc. 
```

[这是](http://www.pyglet.org/doc/api/pyglet.window.key.KeyStateHandler-class.html)`KeyStateHandler`pyglet 文档中关于使用 a的页面。在 pyglet 中，您自己创建窗口并将其附加到那里，但在 cocos2d 中，窗口由主管处理。

我还在 cocos2d 文档中找到[了这个页面](http://cocos2d.org/doc/programming_guide/handling_events.html)，它可能是也可能不是使用 cocos2d 处理按键的正确方法。

# windows - Windows免费文件实用程序复制具有文件夹结构的文件？

> ID：15025943
> 
> 赞同：0
> 
> 时间：2013-02-22T14:03:07.593
> 
> 标签：windows, fileutils

我正在寻找免费实用程序，它将复制我想要的文件以及文件夹结构。

有人知道任何文件实用程序吗？除了应付的winzip，我找不到。

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:50:42.423

它是内置的：

```
robocopy /mir c:\source d:\dest 
```

robocopy 还有[许多其他选择](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:01:31.910

正如 Sweko 在他的评论中所说，您可以在 Windows 资源管理器中复制/粘贴。

或者在 cmd.exe 中：

> `xcopy /e source destination`

# java - Adt 消息转换器 - INTEGERS 作为空值出现

> ID：15025945
> 
> 赞同：0
> 
> 时间：2013-02-22T14:03:09.547
> 
> 标签：java, jdbc, spring-integration, spring-jdbc, oracle-aq

我正在使用以下配置来处理带有 adt 有效负载的 OracleAQ ...

```
<bean id="messageConverter"
   class="org.springframework.data.jdbc.jms.support.converter.oracle.MappingAdtMessageConverter">
  <constructor-arg>
    <bean class="org.springframework.data.jdbc.jms.support.oracle.StructDatumMapper"> 
      <constructor-arg index="0" value="MY_QUEUE"/>
      <constructor-arg index="1" value="MyMappedClass"/>
    </bean>
  </constructor-arg>
</bean> 
```

问题是，在出队之后，我得到了具有 INTEGER 的字段的 java 端 null 值和其他字段的非 null 值。

```
MyMappedClass@649fe46f[
  id=<null>
  id2=<null>
  time=2013-02-22 14:57:11.0
  user=LUKAS
] 
```

在队列表中，这些值作为非空值存在。

可能是什么原因。我预计映射不好，但我看不出有什么问题。这些字段映射为 Types.INTEGER。

你知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:24:49.100

最后我发现生成的映射文件有错误。对于 Long 字段，我有 Integer setter。这就是转换过程中反射api将这些字段视为不可写的原因。所以这不是库版本或配置问题。

# asp.net - Asp .net Web 窗体 TreeView - PopulateNodesFromClient

> ID：15025948
> 
> 赞同：1
> 
> 时间：2013-02-22T14:03:16.273
> 
> 标签：asp.net, webforms

我的控制配置如下。控件是从服务器填充的，没有回发到服务器，但是在我进行回发后，我无法得到检查项目。是否有任何解决方案或可能有其他想法。

主要问题是在没有整页回发的情况下填充树视图。

感谢您的帮助。

`<asp:TreeView ShowLines="True" runat="server" ID="trvCategories" ShowCheckBoxes="All" EnableClientScript="True" PopulateNodesFromClient="True" OnTreeNodePopulate="PopulateNode"> </asp:TreeView>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:08:49.957

我在我的 VB.NET 应用程序中做了类似的事情；它也可以在 ASP.NET 中很好地工作。

```
Private Sub tvwDataCategory_AfterCheck(ByVal eventSender As System.Object, ByVal eventArgs As System.Windows.Forms.TreeViewEventArgs) Handles tvwDataCategory.AfterCheck
Dim Node As System.Windows.Forms.TreeNode = eventArgs.Node
Dim n As Integer

If VB.Left(Node.Name, cTagLength) = cDataTypeTag Then
Node.ForeColor = DefaultForeColor

Dim nNodes As TreeNodeCollection = eventArgs.Node.Nodes

For Each nNode As TreeNode In nNodes
If nNodes.Count = 0 Then
If nNode.Checked Then
tvwDataCategory.Nodes.Item(n).Checked = True
Else
tvwDataCategory.Nodes.Item(n).Checked = False
End If
End If
Next
Else
Call FormatChecks()
End If
End Sub 
```

这是你要找的吗？

# c - 外部是可选的吗？

> ID：15025949
> 
> 赞同：10
> 
> 时间：2013-02-22T14:03:18.487
> 
> 标签：c, compilation, linker, extern

我确定我快疯了，但请考虑以下 C 代码：

```
// file1.c
int first;

void f(void)
{ first = 2; } 
```

* * *

```
// file2.c
#include <stdio.h>

int first;
void f();
int main(void)
{
    first = 1;
    f();
    printf("%d", first);
} 
```

这两个文件由于某种原因会编译并链接在一起，然后打印`2`. 我一直认为，除非我标记了 with 的一个或另一个（但不是两个）定义，否则`first`这`extern`将无法编译，而这实际上就是`extern`!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T14:14:58.110

它只编译是因为`first`只**声明**了两次，实际上内存中没有两个地方，而只有一个。只需先初始化一个，`int first=4;`然后再初始化另一个，`int first=5;`链接器就会显示错误，例如 GCC：

```
b.o:b.c:(.data+0x0): multiple definition of `_first'
a.o:a.c:(.data+0x0): first defined here
collect2.exe: error: ld returned 1 exit status 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T14:23:44.683

在正常情况下（没有额外的 gcc 标志），您应该可以将此代码编译为：

```
gcc file1.c file2.c 
```

将会发生的事情是编译器会看到你有两个全局变量命名相同，并且都没有被初始化。然后它将您未初始化的全局变量放在代码的“公共”部分^(**)。换句话说，它将只有一个“第一个”变量的副本。发生这种情况是因为默认`gcc`为`-fcommon`

如果您要使用该`-fno-common`标志进行编译，您现在会收到您正在考虑的错误：

```
/tmp/ccZNeN8c.o:(.bss+0x0): multiple definition of `first'
/tmp/cc09s2r7.o:(.bss+0x0): first defined here
collect2: ld returned 1 exit status 
```

要解决此问题，您将添加`extern`除一个变量之外的所有变量。

***警告***：
现在假设您有两个不同大小的全局未初始化数组：

```
// file1.c
int first[10];

// file2.c
int first[20]; 
```

好吧，猜猜看，编译它们不会`gcc -Wall file1.c file2.c`产生**警告或错误**，并且变量是通用的，即使它的大小不同！！！

```
 //objdump from file1.c:
 0000000000000028       O *COM* 0000000000000020 first

 //objdump from file2.c:
 0000000000000050       O *COM* 0000000000000020 first 
```

这是全局变量的危险之一。

* * *

^(**)如果您查看`objdump`*.o 文件中的一个（您必须编译`gcc -c`才能生成它们），您会看到`first`放在 common ( `*COM*`) 部分：

```
mike@mike-VirtualBox:~/C$ objdump -t file2.o

a.o:     file format elf64-x86-64

SYMBOL TABLE:
0000000000000000 l    df *ABS*  0000000000000000 file2.c
0000000000000000 l    d  .text  0000000000000000 .text
0000000000000000 l    d  .data  0000000000000000 .data
0000000000000000 l    d  .bss   0000000000000000 .bss
0000000000000000 l    d  .rodata    0000000000000000 .rodata
0000000000000000 l    d  .note.GNU-stack    0000000000000000 .note.GNU-stack
0000000000000000 l    d  .eh_frame  0000000000000000 .eh_frame
0000000000000000 l    d  .comment   0000000000000000 .comment
0000000000000004       O *COM*  0000000000000004 first
0000000000000000 g     F .text  0000000000000039 main
0000000000000000         *UND*  0000000000000000 f
0000000000000000         *UND*  0000000000000000 printf 
```

# c# - 是否可以使用 Oledb 从数据库中检索整数值？

> ID：15025952
> 
> 赞同：0
> 
> 时间：2013-02-22T14:03:30.217
> 
> 标签：c#, oledb

我的代码成功地从数据库中读取了字符串值，但是当我想导入一个整数值时，它会将其读取为空值（即使数据库具有分配给该字段的值）

我的代码：

```
query = "SELECT * FROM Enemies";
da = new OleDbDataAdapter(query, conn);
da.Fill(dt); // dt = DataTable
wea = new Weapon(Convert.ToString(dt.Rows[randomItem][1])); // Works perfect for only string value retrieval       
// randomItem = Randomly chooses a row from the database to use for object construction 
```

如果我使用以下代码，我会收到“InvalidCastExcpetion 未处理”异常。“对象不能从 DBNull 转换为其他类型”

```
wea = new Weapon(Convert.ToInt32(dt.Rows[randomItem][2])) // The 2 gets the damage column from the database 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:38:28.520

非常感谢您的回答，我找到了一个解决方案，方法是创建一个单独的变量来进行转换，然后将值传递给 Weapon 对象的创建。我觉得我的原始代码应该可以工作，但是如果您在直接调用该值后进行整数转换，它似乎不喜欢它：

编码：

```
 int weaponDamage = Convert.ToInt32(dt.Rows[randomItem][2]);
 wea = new Weapon(weaponDamage); 
```

# javascript - 如何组织我的网站的自定义实用程序 JS 功能

> ID：15025957
> 
> 赞同：0
> 
> 时间：2013-02-22T14:03:40.903
> 
> 标签：javascript, jquery

在此期间，我的自定义函数数量以及我的 jQuery 插件的初始化调用数量不断增加，导致视觉和功能混乱。

**我的自定义功能**

我正在寻找一种将自定义函数组织到库中的方法。

*   我应该创建一个对象并将它们组织为方法吗？

例如

```
(function($) {   
    $.myCUSTOMOBJECT = {};
    $.fn.myCUSTOMOBJECT = function(settings) {
        var var1 = ...
        var var2 = ...
        var var3 = ...
        function onTextSelectionDoSomething() {...}
        function onTextClickDoSomethingElse() {...}
    }

}); 
```

**我的贡献函数**

我有 contrib jQuery 库作为 fancybox、jcarousel、parallax

*   是否建议将它们合并到一个缩小文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:11:17.383

For the sake of simplicity, I wouldn't bother storing your custom work on the jQuery namespace to begin with. I take this approach;

I will have one file like this:

```
( function () {

    var myNamespace = {
        fancybox: { ... },
        jcarousel: { ... }
    };

    window.myNamespace = myNamespace;

})(); 
```

Then on a per website/app basis I would use my namespace like so;

```
( function ( $, ns ) {

    $( document ).ready( function () {

        $( '.lightbox' ).on( 'click', ns.fancybox.init );

    });

})( jQuery, myNamespace ); 
```

The purpose of this is try to remove your *framework* from the rest of your code

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:11:54.230

### Custom functions

I usually create a `utils` object that contains all my little useful functions like `trim` etc. I treat it a bit like a loose underscore. For all my generic functions and methods that have nothing to do with the specifics of my site or application, I will include these in a `plugins.js` file (based on the [implementation in HTML5 boilerplate](https://github.com/h5bp/html5-boilerplate/blob/master/doc/js.md)).

### Contrib functions

I will usually include all relatively small plugins in the `plugins.js` file along with my own. Larger files that I may want to debug or update separately, that have very distinct functionality, I will keep as separate files in a `/vendor/` or `/libs/` folder. This makes it easy to swap in new versions and see if anything breaks, or swap in unminified versions with the same filenames to debug in detail, etc.

### On minification

If you're dealing with a small enough site, where almost all the scripts are necessary on the first page, you will probably want to minify most if not all of your scripts into one for production. This shouldn't affect how you organise scripts in development though.

# c# - 向数据库添加新列

> ID：15025960
> 
> 赞同：0
> 
> 时间：2013-02-22T14:03:53.750
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, nuget

我有一堂课

```
[Table("Member")]
public class Member
{
   [Key]
   public int id;
   public string name;
} 
```

并且这个类被定义为数据库中的一个表。现在我想使用 nuget 添加一个新的主键和外键，如下所示，但我不知道如何。

```
public class Work
{
   public int id;
   public int memberId;
} 
```

**更新**在控制台中，我尝试添加一个新类`Add_migration AddWork`，但它并没有为我创建一个新表，只有一个带有空`Up`和`Down`方法的 xxx_AddWork.cs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:26:08.050

您不会从控制台向数据库添加列。你必须通过类本身来做到这一点：

```
public class Work
{
   [Key]
   public int id; {get; set;}

   [ForeignKey("Member")]
   public int memberId {get; set;}

   public virtual Member Member {get; set;}
} 
```

# node.js - 使用 node.js“请求”模块的响应编码

> ID：15025963
> 
> 赞同：7
> 
> 时间：2013-02-22T14:04:00.087
> 
> 标签：node.js, http, character-encoding, request, bing

我正在尝试从 Bing 搜索 API 获取数据，并且由于现有的库似乎是基于旧的已停产的 API，因此我会尝试使用该`request`库，这似乎是最常见的库。我的代码看起来像

```
var SKEY           =  "myKey...." , 
    ServiceRootURL =  'https://api.datamarket.azure.com/Bing/Search/v1/Composite';

function getBingData(query, top, skip, cb) {
    var params = {
         Sources: "'web'", 
         Query: "'"+query+"'", 
         '$format': "JSON", 
         '$top': top, '$skip': skip
       },
       req = request.get(ServiceRootURL).auth(SKEY, SKEY, false).qs(params);
    request(req, cb)
}

getBingData("bookline.hu", 50, 0, someCallbackWhichParsesTheBody) 
```

Bing 返回一些 JSON，我有时可以使用它，**但**如果响应正文包含大量非 ASCII 字符`JSON.parse`，则会抱怨该字符串格式错误。我尝试切换到 ATOM 内容类型，但没有区别，xml 无效。检查`request()`回调中可用的响应正文实际上显示了错误的代码。

所以我用一些 python 代码尝试了同样的请求，而且它似乎一直都可以正常工作。以供参考：

```
r = requests.get(
       'https://api.datamarket.azure.com/Bing/Search/v1/Composite?Sources=%27web%27&Query=%27sexy%20cosplay%20girls%27&$format=json', 
        auth=HTTPBasicAuth(SKEY,SKEY))
stuffWithResponse(r.json()) 
```

我无法用较小的响应重现问题（例如，限制结果的数量）并且无法识别导致问题的单个结果（通过增加偏移量）。我的印象是响应被分块读取，以某种方式转码并以错误的方式重新组装回来，这意味着如果某些多字节字符被拆分，则 json/atom 数据将变得无效，这发生在较大的响应上，而不是较小的响应上。

作为节点的新手，我不确定是否应该做些什么（在某处设置编码？Bing 返回 UTF-8，所以这似乎不需要）。

有人知道发生了什么吗？

FWIW，我在 OSX 10.8 上，节点是通过 macports 安装的 v0.8.20，请求是通过 npm 安装的 v2.14.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:44:47.837

我不确定请求库，但默认的 nodejs 对我来说效果很好。它似乎也比您的图书馆更容易阅读，并且确实以块的形式返回。

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback) 或 https （就像你的请求）[http://nodejs.org/api/https.html#https_https_request_options_callback](http://nodejs.org/api/https.html#https_https_request_options_callback)（虽然一样）

对于选项一点提示：使用 url parse

```
var url = require('url');

var params = '{}'

var dataURL = url.parse(ServiceRootURL);
var post_options = {  
    hostname: dataURL.hostname,
    port: dataURL.port || 80,
    path: dataURL.path,
    method: 'GET',  
    headers: {  
        'Content-Type': 'application/json; charset=utf-8',  
        'Content-Length': params.length  
    }  
}; 
```

显然 params 需要是您要发送的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:18:25.110

我认为您的请求身份验证不正确。必须在 request.get 之前提供身份验证。请参阅[请求 HTTP 身份验证](https://github.com/mikeal/request#http-authentication)的文档。`qs`是一个对象，必须像 url 和 auth 一样传递给[请求选项。](https://github.com/mikeal/request#requestoptions-callback)您也使用相同`req`的第二个请求。您应该知道 request.get 为给定的 url 返回一个流。您的下一个请求使用`req`将出错。

如果您只需要 HTTPBasicAuth，这也应该有效

```
//remove req = request.get and subsequent request
request.get('http://some.server.com/', {
  'auth': {
    'user': 'username',
    'pass': 'password',
    'sendImmediately': false
  }
 },function (error, response, body) {
}); 
```

回调参数有 3 个参数。第一个是适用时的错误（通常来自 http.Client 选项而不是 http.ClientRequest 对象）。第二个是 http.ClientResponse 对象。第三个是响应体 String 或 Buffer。第二个对象是响应流。要使用它，您必须使用事件“数据”、“结束”、“错误”和“关闭”。

请务必正确使用参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T14:52:26.877

您必须传递选项 {json:true} 才能启用响应的 json 解析

# xml - xml节点的第一个单词加粗

> ID：15025966
> 
> 赞同：0
> 
> 时间：2013-02-22T14:04:09.913
> 
> 标签：xml, actionscript-3, flash, api, twitter

我正在学习一些 AS3，并且正在尝试构建 Twitter 应用程序，但我遇到了从 Twitter RSS API 检索的 XML 的问题。

我想加粗子节点中的第一个单词。我尝试了许多 setTextFormat 方法，但由于我对整个事情都不熟悉，所以都没有和我一起工作。

显示更新的代码是：

```
for each (var nodo:XML in twitter..item) { 
    myUpdates += 
        "<a href='" + 
        nodo.link + 
        "'><font color='#CC3300'>" +
        nodo.title.substr(0,50) + 
        "..." + 
        "</font></a><br>" + 
        "<font color='#000000'>" +
        nodo.pubDate +
        "</font><br/><br/>"; 
} 
```

我设法将 140 条推文减去 50 个字符“substr(0,50)”。

我只想加粗“标题”中的第一个单词。

有任何想法吗？请帮忙。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:21:24.627

要加粗字符串中的第一个单词，您可以这样做：

```
var s:String = "This is a string of words";

// Split the string into an array using the space character as a delimiter.
// (Every word is separated by a space.)
var words:Array = s.split(" ");

var firstWord:String = words[0];

// Remove the first word from the array and join the remaining 
// words back into a string.
words.unshift();
var followingWords = words.join(" ");

var formattedString = "<b>" + firstWord + "</b> " + followingWords; 
```

# operating-system - 需要一些帮助来构建编程竞赛裁判系统

> ID：15025970
> 
> 赞同：0
> 
> 时间：2013-02-22T14:04:28.807
> 
> 标签：operating-system

我计划创建一个现场编程竞赛评委，例如 PC^2，Domjudge。

我想构建基于 Web（本地主机）而不是桌面应用程序的法官系统。

这是我的目标：

1.  裁判系统应该像PC2一样跨平台[与JRE一起运行]
2.  使用 Ruby、Python、PHP 或 Node.JS

现在的问题是使系统跨平台哪种语言最可取？

Ruby、Python、PHP 或 Node.JS 可以处理系统命令吗？[例如。编译 C++/Java 源代码并运行程序] 他们如何处理进程的时间限制？

谁能给我一些有用的链接？我用谷歌搜索了很多，但没有找到任何关于跨平台系统的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T19:22:20.340

如果您正在规划一个基于 Web 的编程竞赛裁判系统，那么它将是跨平台的，因为它是在 Web 上的，至少从用户的角度来看是这样。但是如果你的意思是从服务器的角度跨平台，你将需要一个跨平台的进程管理库，例如：

**升压过程**(www.highscore.de/boost/process/)

**PoCo** (pocoproject.org/)（进程命名空间，在 Foundation 中）

**Psutil** (code.google.com/p/psutil/) (for Python) 如果你选择 python 我推荐[Web.py](http://webpy.org/)作为 web 框架

**Qt** (qt-project.org/) 您可以使用 Qt，它以独立于平台的方式实现许多操作系统实用程序，例如。进程、线程、网络、GUI...

**wxWidgets**还包含一个跨平台进程控制库，用于通过 wxProcess 类生成子进程。

....应该有更多的图书馆...

使用**Node.js**，您可以创建**子进程**，但我不确定您可以使用它多远，例如，我不知道您是否可以继续限制进程的内存。

但是，如果出于任何原因您决定为特定平台（如**GNU/Linux** ）开发软件，您可以从了解该特定平台（[**Linux (POXIS)**](http://siber.cankaya.edu.tr/ozdogan/SystemsProgramming/ceng425/ceng425.html)、**Windows (Win32 API)**）的进程管理如何工作开始

# php - 无法验证 cakephp 中的所有多语言字段

> ID：15025973
> 
> 赞同：0
> 
> 时间：2013-02-22T14:04:35.560
> 
> 标签：php, cakephp, multilingual, cakephp-2.1, translate

希望一切都好。

亲爱的朋友，我需要您的帮助，因为我现在在 cakePHP 中遇到了一个问题，如下所示：

实际上，我已经在我的网站中正确使用了 cakePHP 的“TranslateBehavior”来支持多语言，希望它从现在开始运行良好。

但我现在面临的问题是验证所有多语言字段。

因为我的视图文件（表单）中有多个字段，每种语言。

当我保存数据时，它会完美地保存并准确检索。基于当前语言。但是在以我使用过的所有语言插入数据时，它仅验证默认语言字段，并忽略其余部分。

请提供您对此的看法，以指导我完成。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:59:33.207

你可以使用这个插件[cakephp-MultiTranslateBehavior](https://github.com/zoghal/cakephp-MultiTranslateBehavior)

# php - 如何获取文件信息 (Finfo) 扩展检测到的所有 MIME 类型？

> ID：15025977
> 
> 赞同：0
> 
> 时间：2013-02-22T14:05:17.090
> 
> 标签：php, types, mime

如何获取文件信息（Finfo）扩展可以检测到的所有 MIME 类型？如何获取他的数据库/文件？我的 wamp 上有 Finfo。谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:50:05.383

（Wamp）它在 C:\wamp\bin\apache\apacheX.XX\conf\mime.types

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:19:15.370

如果在构造函数时未指定魔法文件，则 FileInfo 使用 MAGIC 环境变量中指定的文件

> 魔术数据库文件的名称，通常类似于 /path/to/magic.mime。如果未指定，则使用 MAGIC 环境变量。如果此变量也未设置，则默认使用 /usr/share/misc/magic。如果需要，可以添加 .mime 和/或 .mgc 后缀。
> 
> [http://www.php.net/manual/en/function.finfo-open.php](http://www.php.net/manual/en/function.finfo-open.php)

`$magic = getenv('MAGIC');`获取默认使用的数据库的方式也是如此

# win32com - win32com.client 错误

> ID：15025978
> 
> 赞同：3
> 
> 时间：2013-02-22T14:05:17.683
> 
> 标签：win32com

在使用win32com的时候，有些事情让我很困惑。

```
>>> import win32com
>>> w=win32com.client.Dispatch('Word.Application')

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    w=win32com.client.Dispatch('Word.Application')
AttributeError: 'module' object has no attribute 'client' 
```

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T12:00:16.630

win32com.client 是 win32com 包中的一个模块，你需要导入实际的模块。

```
import win32com.client 

w = win32com.client.Dispatch('Word.Application') 
```

# angularjs - 我可以在每个控制器中以角度提供功能吗？

> ID：15025979
> 
> 赞同：192
> 
> 时间：2013-02-22T14:05:20.307
> 
> 标签：angularjs, function, global

如果我有一个实用函数`foo`，我希望能够从`ng-app`声明中的任何位置调用它。有没有办法可以在我的模块设置中使其全局可访问，或者我是否需要将它添加到每个控制器的范围中？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2013-02-22T14:29:37.990

您基本上有两个选择，要么将其定义为服务，要么将其放置在您的根范围内。我建议你用它做一个服务以避免污染根范围。您创建一个服务并使其在您的控制器中可用，如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.factory('myService', function() {
        return {
            foo: function() {
                alert("I'm foo!");
            }
        };
    });

    myApp.controller('MainCtrl', ['$scope', 'myService', function($scope, myService) {
        $scope.callFoo = function() {
            myService.foo();
        }
    }]);
    </script>
</head>
<body ng-controller="MainCtrl">
    <button ng-click="callFoo()">Call foo</button>
</body>
</html> 
```

如果这不是您的选择，您可以将其添加到根范围，如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.run(function($rootScope) {
        $rootScope.globalFoo = function() {
            alert("I'm global foo!");
        };
    });

    myApp.controller('MainCtrl', ['$scope', function($scope){

    }]);
    </script>
</head>
<body ng-controller="MainCtrl">
    <button ng-click="globalFoo()">Call global foo</button>
</body>
</html> 
```

这样，您的所有模板都可以调用`globalFoo()`，而无需从控制器将其传递给模板。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-07-12T15:55:14.263

我猜你也可以将它们组合起来：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
        var myApp = angular.module('myApp', []);

        myApp.factory('myService', function() {
            return {
                foo: function() {
                    alert("I'm foo!");
                }
            };
        });

        myApp.run(function($rootScope, myService) {
            $rootScope.appData = myService;
        });

        myApp.controller('MainCtrl', ['$scope', function($scope){

        }]);

    </script>
</head>
<body ng-controller="MainCtrl">
    <button ng-click="appData.foo()">Call foo</button>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-12-19T23:33:23.757

虽然第一种方法被提倡为“类似角度的”方法，但我觉得这会增加开销。

考虑一下我是否想在 10 个不同的控制器中使用这个 myservice.foo 函数。我将必须指定这个“myService”依赖项，然后在所有十个中指定 $scope.callFoo 范围属性。这只是一个重复，并且在某种程度上违反了 DRY 原则。

然而，如果我使用 $rootScope 方法，我只指定这个全局函数 gobalFoo 一次，它将在我未来的所有控制器中可用，无论有多少。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-27T21:50:26.650

AngularJs 有“**服务**”和“**工厂**”只是为了解决像你这样的问题。这些用于**在控制器、指令、其他服务或任何其他 angularjs 组件之间**具有全局性。你可以定义函数、存储数据、创建计算函数或任何你想要的东西想要内部**服务**并在 AngularJs 组件中使用它们作为**Global** .like

```
angular.module('MyModule', [...])
  .service('MyService', ['$http', function($http){
    return {
       users: [...],
       getUserFriends: function(userId){
          return $http({
            method: 'GET',
            url: '/api/user/friends/' + userId
          });
       }
       ....
    }
  }]) 
```

如果你需要更多

[了解更多关于我们为什么需要 AngularJs 服务和工厂的信息](http://www.w3docs.com/snippets/angularjs/basic-knowledge-about-angularjs-services-and-factories.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T01:54:11.183

我对 Angular 有点新，但我发现有用（而且非常简单）的是我制作了一个全局脚本，我在本地脚本之前加载到我的页面上，其中包含我需要在所有页面上访问的全局变量。在该脚本中，我创建了一个名为“globalFunctions”的对象，并添加了我需要全局访问的函数作为属性。例如`globalFunctions.foo = myFunc();`。然后，在每个本地脚本中，我编写`$scope.globalFunctions = globalFunctions;`并立即可以访问我添加到全局脚本中的 globalFunctions 对象的任何函数。

这是一种解决方法，我不确定它是否对您有帮助，但它肯定对我有帮助，因为我有很多功能，将所有功能添加到每个页面是很痛苦的。

# cuda - 在顺序程序中分离并行 MPI 部分的最佳方法

> ID：15025980
> 
> 赞同：0
> 
> 时间：2013-02-22T14:05:24.327
> 
> 标签：cuda, mpi

我有一个巨大的顺序程序，我想在其中将一些算法与 MPI 和 CUDA 并行化。如何正确地将顺序部分与并行部分分开？**问题在于并行算法的嵌套，以及 slurm 或 loadLeveler 的使用**（例如，在我的 MPI 集群上，我不能写类似的东西：） `mpirun -n 1 a.out: -n 2 b.out`。

*例子：*

```
int main()
{
  funcA();
}
void funcA() 
{
  funcB();
}

void funcB()
{
  parallel algo starts here....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:21:57.007

对于这个问题，我找到了一个很好的解决方案。这是示例代码：

```
 #include <iostream>
 #include <mpi.h>
 #include <unistd.h>

 using namespace std;

 int main(int argc, char** argv) {

MPI_Init(&argc, &argv);
int r;
MPI_Comm_rank(MPI_COMM_WORLD, &r);

if (r == 0) {
    cout << "[GUI]Start perfoming initialization...." << endl;
    sleep(2);
    cout << "[GUI]Send command to start execution...." << endl;
    int command = 1;
    //TODO: now it's hardcoded to send data to 1 proc
    MPI_Send(&command, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);
    cout << "[GUI]Waiting for execution results..." << endl;
    int buf[5];
    MPI_Recv(&buf, 5, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
    for (int i=0; i<5; i++)
    {
        cout << "buf["<< i << "] = " << buf[i] << endl;
    }
} else {
    int command;
    MPI_Recv(&command, 1, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
    cout << "Received command: " << command << endl;
    if (command == 1) {
        cout << "[ALGO]Receive command to start execution" << endl;
        sleep(2);
        cout << "[ALGO]Send computed data..." << endl;
        int buf[5] = {5,4,3,2,1};
        MPI_Send(&buf, 5, MPI_INT, 0, 0, MPI_COMM_WORLD);
    }
}

MPI_Finalize();
return 0;
  } 
```

# ios - 如何从另一个类调用变量

> ID：15025981
> 
> 赞同：2
> 
> 时间：2013-02-22T14:05:28.200
> 
> 标签：ios, variables, gps

首先，你们知道任何好的教程网站或书籍来学习如何为 iOS6 编写代码吗？

现在到手头的问题，我有一个 AppDelegate 类和一个 ViewController 类。

我正在使用 AppDelegate 类来查找我当前的位置并将其保存为 NSString。

我的 ViewController 类中有一个标签，我想在其中显示我的位置。

在java中我通常会做这样的事情

```
label.text = AppDelegate.myLocationString; 
```

但我对目标 c 相当陌生，我不知道如何做同样的事情。老实说，我什至不确定我是否对这种语言采取了正确的方法。在目标 c 中是否有另一种方法来解决这个问题？

我试过四处寻找如何去做，但我什至不确定我的搜索措辞是否正确，所以我不知道我是否在寻找正确的方向。

任何可以提供的帮助将不胜感激

我现在的代码：

AppDelegate.h

```
#import <UIKit/UIKit.h>

#import CoreLocation/CoreLocation.h

@class BIDViewController;

@interface BIDAppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) BIDViewController *viewController;

@property (strong, nonatomic) CLLocationManager *locationManager;

@property (strong, nonatomic) NSString *myPosition;

@end 
```

AppDelegate.m 中的 LocationManager 类

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSDate *eventDate = newLocation.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    if (abs(howRecent) < 15) {

        //if it is within the last 15 seconds, use it. Else do nothing.

        if (newLocation.horizontalAccuracy < 35.0) {

            //location seems pretty accurate so we will use it

            NSLog(@"latitude: %+.6f, longitude: %+.6f\n", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
            NSLog(@"Horizontal accuracy: %f", newLocation.horizontalAccuracy);

            int latDegrees = newLocation.coordinate.latitude;
            int lonDegrees = newLocation.coordinate.longitude;

            double latDecimal = fabs(newLocation.coordinate.latitude - latDegrees);
            double lonDecimal = fabs(newLocation.coordinate.longitude - lonDegrees);

            int latMinutes = latDecimal * 60;
            int lonMinutes = lonDecimal * 60;

            double latSeconds = ((latDecimal * 3600) - (latMinutes * 60));
            double lonSeconds = ((lonDecimal * 3600) - (lonMinutes * 60));

            _myPosition = [NSString stringWithFormat:@"Lat: %d, %d, %1.4f, Lon: %d, %d, %1.4f", latDegrees, latMinutes, latSeconds, lonDegrees, lonMinutes, lonSeconds];

        }
    }
} 
```

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface BIDViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *positionLabel;

@end 
```

视图控制器.m

```
#import "BIDViewController.h"
#import "BIDAppDelegate.h"

@interface BIDViewController ()

@end

@implementation BIDViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    //I have tried setting the label's text here but to no avail so far, I have been 
    //able to set it as "blah" with the following line:
    //
    //    positionLabel.text = @"blah";
    //
    //and I have tried things such as the following to populate the label with the 
    //myPosition variable: 
    //
    //    positionLabel.text = _myPosition;
    //            or
    //    positionLabel.text = AppDelegate._myPosition;
}

- (void)viewDidUnload
{
    [self setPositionLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:11:13.997

In your ViewController

```
BIDAppDelegate *appDelegate = (BIDAppDelegate *)[UIApplication sharedApplication].delegate;
[positionLabel setText:appDelegate.myPosition]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T14:11:51.637

To reference the App Delegate from your view controller, first import its definition (which you've ready done):

```
#import "BIDAppDelegate.h" 
```

and then in code get the delegate:

```
BIDAppDelegate *appDelegate = (BIDAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

and then get the location from the delegate:

```
CLLocation *location = appDelegate.locationManager.location; 
```

and then call whatever method you like on the location object:

```
NSString *descr = location.description; 
```

Or get the pre-calculated position with:

```
NSString *position = appDelegate.myPosition; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T14:11:15.150

> How to call a variable from another class?

Assume you are in `ClassB`

```
ClassA *aObj=... ; //create an object of ClassA
aObj.propertyName=...;//set the property or ivar
NSString *string=aObj.propertyName;//retrieve it 
```

* * *

> do you guys know of any good tutorial sites or books to learn how to code for iOS6?

[http://www.lynda.com/Apple-training-tutorials/106-0.html](http://www.lynda.com/Apple-training-tutorials/106-0.html)

[http://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials)

# java - 将字符串传递到 Windows 命令行

> ID：15025989
> 
> 赞同：5
> 
> 时间：2013-02-22T14:05:54.737
> 
> 标签：java, command-line, process, runtime.exec

请看下面的代码

```
Runtime rt = Runtime.getRuntime();  
rt.exec("cmd /c start");
String[] cmd = {"LogParser", "Select top 10 * into c:\temp\test9.csv from application" };
rt.exec(cmd); 
```

它打开命令窗口，但打开后没有传入字符串。有人能告诉我为什么这段代码不会将字符串放入命令窗口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:11:11.847

The option **/C** means: `Carries out the command specified by the string and then terminates.`

So the other command is handled as a separated one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:14:08.293

使用`OutputStreamWriter`并写入所创建进程的输入流。

```
Process p = Runtime.getRuntime().exec("cmd /K start") ;
Writer w = new java.io.OutputStreamWriter(p.getOutputStream());
w.append(yourCommandHere); 
```

另外，使用 /K 的原因：

> /K 运行命令，然后返回到 CMD 提示符。

参考：[http ://ss64.com/nt/cmd.html](http://ss64.com/nt/cmd.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:20:33.883

为什么不使用这个：

```
String[] cmd = { "cmd /c", "LogParser",
        "Select top 10 * into c:\temp\test9.csv from application" };
rt.exec(cmd); 
```

[在此处](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)`exec`查找有关该方法的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:25:44.773

您首先需要像在前两行代码中一样启动一个进程，但不要使用`start`，因为这会产生一个单独的进程并立即返回。使用 just`LogParser`代替，或者任何可以使您的`LogParser`过程开始而不涉及`cmd`. 之后，您需要检索由创建`OutputStream`的`Process`对象`exec`并将您的`select`命令写入其中。您还需要从`Process`s中读取`InputStream`以查看响应。这些都不会在单独的命令提示符窗口中可见；您需要通过 Java 处理所有内容，并且还涉及一些多线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T14:13:57.463

正如我在评论中所说的那样——“它们作为单独的命令执行，它们并不相关，只是因为你在另一个之前执行了一个”

从`Runtime.exec( string )` [javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec(java.lang.String%5b%5d)) -

> 在单独的进程中执行指定的命令和参数。

您需要将命令链接在一起才能`cmd`处理您的命令，我相信您需要使用`\k`标志来指定需要在命令行上执行的命令。

```
Runtime rt = Runtime.getRuntime();  
String start = "cmd /k ";
String cmd = "LogParser;\n" Select top 10 * into c:\temp\test9.csv from application";
rt.exec(start + cmd); 
```

没有测试，因为我没有窗户，但它应该与此类似。

# html - 在 HTML 中格式化圣经引用和/或圣经引用的最正确方法是什么？

> ID：15025995
> 
> 赞同：2
> 
> 时间：2013-02-22T14:06:13.147
> 
> 标签：html, formatting

我一直在使用`<blockquote>`,`<q>`和`<cite>`来格式化经文引用和参考文献，但我想知道是否有更合适的方法。

我遇到了 3 种典型的圣经参考：块引号、内联引号和参考（又名“章节和经文”参考）。以下是我如何格式化每一个：

# 块引用

```
<blockquote class="scripture">
    <p>Then God said, <q>Let there be light,</q> and there was light.</p>
    <cite>Genesis 1:3</cite>
</blockquote> 
```

# 内联报价

```
<p>As it says in the Bible, <q class="scripture">God said, <q>Let there be light,</q></q> (<cite>Genesis 1:3</cite>) and it just happened.</p> 
```

# 经文参考

```
<p>The account of creation is listed in <cite class="scripture">Genesis 1</cite>.</p> 
```

所以我的问题是，这些是在这些场景中使用的最合适的 HTML 标记吗？我很确定标签很好`<blockquote>`，`<q>`但我不太确定`<cite>`标签的用法。作为内联元素，它可以用作 a 的直接后代`<blockquote>`，还是应该包含在某种其他标签中？

FWIW，我在 s 中使用`<p>`标签的原因`<blockquote>`是我可以获得正确和自动的引用样式和嵌套（也不管圣经引用的语言）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-19T04:08:21.280

经文参考的格式取决于你个人对如何显示的偏好，但是为了以专业的方式显示而不需要特殊的 CSS，我相信这样的结构是更好的选择：

> 约翰福音 6:5,10：
> 
> 5.  耶稣抬头看见一大群人朝他走来，就对腓力说：“我们到哪里买饼给这些人吃呢？”</li>
> 
> 10.  耶稣说：“请人们坐下。” 那个地方有很多草，他们坐下（大约有五千人在那里）。

为此，您可以使用带有自定义编号的有序列表，如“[是否可以为有序列表指定起始编号？](https://stackoverflow.com/questions/779016/is-it-possible-to-specify-a-starting-number-for-an-ordered-list) ”中所述。

如果要引用的经文是连续的，你只需要使用开始标签`start`上的属性：`ol`

```
<h2>John 1:5,6,7</h2>    
<ol start="5">
  <li>passage here</li>
  <li>passage here</li>
  <li>passage here</li>
</ol>
```

如果它们*是非*连续的，您可以在每个开始标签上使用该`value`属性：`li`

```
<h2>John 1:5,9,13</h2>
<ol>
<li value="5">passage here</li>
<li value="9">passage here</li>
<li value="13">passage here</li>
</ol>
```

这将导致列表项采用为每个项设置的值。

如果需要，您可以用`<blockquote></blockquote>`标签包装上面的内容。您还可以使用 CSS 随意设置有序列表的样式。

使用这些属性，您可以避免不必要的 CSS 样式。