# StackOverflow 问答 13964000-13964999

# c - 将头文件添加到 Xcode

> ID：13964005
> 
> 赞同：2
> 
> 时间：2012-12-20T01:35:38.363
> 
> 标签：c, xcode, cs50

我正在尝试将 C 库添加到 Xcode。我从一个在线 C 类下载了库，压缩文件包含两个文件：`cs50.c`和`cs50.h`.

我使用以下命令安装了这些文件：

```
gcc -c -ggdb -std=c99 cs50.c -o cs50.o
ar rcs libcs50.a cs50.o
rm -f cs50.o
chmod 0644 cs50.h libcs50.a
sudo mv cs50.h /usr/include
sudo cp libcs50.a /usr/lib 
```

在构建项目时，我收到以下错误消息：

```
Undefined symbols for architecture x86_64:
"_GetString", referenced from:
_main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这就是我在程序中引用头文件的方式：

```
#include </usr/include/cs50.h> 
```

如果我不包含路径，我会收到一条*找不到文件*的消息。

我的 Xcode 版本是：版本 4.5.2 (4G2008a)，我正在运行 OS X 10.7.5。

感谢您的任何建议。

更新：

![实际错误信息](../Images/e445a68dfbbd3746aeaecd2c30ba8665.png)

![将 -lcs50 添加到构建阶段](../Images/cbdf4227be0f1aacc2d5b2e1b03ad0db.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:46:16.973

作为一般规则，您不应该安装或修改任何东西，`/usr`除非您有充分的理由这样做。这个目录是为操作系统保留的，你很快就会遇到很多问题——例如，如果你不小心覆盖了系统库或头文件，甚至在其中安装了新的东西，都可能在更新操作系统时出现问题。

如果你真的需要在系统范围内安装这个，那么把它放到`/usr/local`.

但是，由于您使用调试信息编译了库，我假设您还想在项目中测试和使用它。

为此，将源作为新的“C/C++ 库”目标添加到项目中要容易得多。然后 Xcode 将处理所有丑陋的细节，例如编译、选择正确的处理器架构（32 位或 64 位）、您将在 Xcode 中获得源代码级调试支持以及如果您想安装您的应用程序或创建一个包对于它，Xcode 也会自动为你打包依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:59:30.700

如果您尝试使用 gcc 编译 cs50.h 库，我发现这在大多数现代 64 位 mac 上都不成功。Xcode 4.x 通常需要 64 位兼容的库格式。GCC 尚未更新以包含 64 位目标文件。Clang/LLVM 是 gcc 的新兴替代品，Apple 将 Xcode 用作他们首选的编译器引擎。我还没有亲自尝试过，但会探索 Xcode 来为 Xcode 生成一个兼容的库。我正在 edX 学习 Harvardx cs50x 课程，这是很棒的课程，即使对于有经验的程序员也是如此。cs50.h 库很有趣，因为它为各种变量类型（例如 String、Integer）提供了相对健壮的 I/O 例程。float 为 c 编程语言，包括对缓冲区溢出攻击的良好保护。您实际上是在构建一个自定义动态库以添加到 Xcode，也称为框架。如果您有苹果开发者帐户，请查看框架编程指南，它应该很有用。

# rally - SDK2 应用程序的单元测试框架

> ID：13964008
> 
> 赞同：2
> 
> 时间：2012-12-20T01:36:17.457
> 
> 标签：rally

有没有人推荐对国产拉力赛应用程序进行单元测试？

我已经开始按照 Sencha 文档中的建议查看[Jasmine](http://docs.sencha.com/ext-js/4-1/#!/guide/testing)，它看起来很有希望，但我有点不确定如何与所有 Rally 基础设施联系起来，而且我不是 Javascript 专家。

如果有人为此使用过 Jasmine，您是否有一些示例说明如何设置基本配置以使用 Jasmine 测试 SDK2 Rally 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:01:41.983

我想在我的[应用程序构建](https://github.com/ferentchak/rally-app-builder)框架中创建的下一件事是与一些测试框架的联系。我倾向于[僵尸](https://github.com/assaf/zombie)，你可能想检查一下。

# python - 从维基百科文章中提取统计信息

> ID：13964017
> 
> 赞同：1
> 
> 时间：2012-12-20T01:38:48.190
> 
> 标签：python, sparql, wikipedia, information-retrieval, dbpedia

我目前正在使用适用于 python 的 SPARQLWrapper 从 DBpedia 文章中提取数据，但我似乎无法找到如何提取给定文章的观察者数量（和其他统计信息）。

有没有简单的方法来实现这一目标？我不介意它是通过 DBpedia 还是直接通过 wikipedia（例如使用 wget）。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:15:53.687

禁止获取每篇任意文章的观察者数量，因为如果每个人都可以找到未观察的页面，则被认为是安全漏洞。例如，只有特权用户才能访问[Special:Unwatched Pages](http://en.wikipedia.org/wiki/Special%3aUnwatchedPages)。有一个[工具服务器工具（可以访问数据库）显示观察者的数量，但](http://toolserver.org/~mzmcbride/cgi-bin/watcher.py)[出于同样的原因](http://en.wikipedia.org/wiki/User%3aMZMcBride/watcher)，它仅限于具有超过 30 个观察者的页面- 至少未经身份验证。

[MediaWiki 查询 API](http://www.mediawiki.org/wiki/API%3aQuery)~~仅~~公开有关文章的大部分[内容和状态信息](http://www.mediawiki.org/wiki/API%3aProperties)，但您也可以查询和评估[公共日志](http://www.mediawiki.org/wiki/API%3aLogevents)或[修订历史记录](http://www.mediawiki.org/wiki/API%3aProperties#revisions_.2F_rv)，以获取有关（公共）用户操作的统计数据。有关 Wikimedia 站点的更多统计信息，您可以查看[Meta:Statistics](http://meta.wikimedia.org/wiki/Statistics) ，其中列出了各种数据源（主要是[http://stats.wikimedia.org/ ）和它们的可视化。](http://stats.wikimedia.org/)

# bash - 复制更改的文件，创建变更集并维护目录结构

> ID：13964023
> 
> 赞同：1
> 
> 时间：2012-12-20T01:39:44.043
> 
> 标签：bash, terminal, cygwin

我只想将我今天创建/编辑的文件复制到一个单独的目录“变更集”中，同时保持它们的目录结构

我想出了以下脚本

```
cd ./myproject/

find ./* -mtime -1 -daystart -exec cp {} ../changeset/{} \; 
```

上面的缺点是没有创建目录并且复制会引发错误。

我已经手动进入 ../changeset/ 并创建文件夹结构，直到命令运行没有错误..但这有点乏味。

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:43:30.337

```
find * -mtime -1 -daystart -print0 | cpio -pd0 ../changeset 
```

cpio 是一个古老的、古怪的归档程序，它有时是完成这项工作的最佳工具。使用`-p`它将 stdin 上命名的文件复制到另一个目录。使用`-d`它根据需要创建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:32:11.740

我找到了另一种解决方案，它不像约翰的那样优雅，但不依赖于`cpio`我没有的。

```
cd ./myproject/

# Create all directories
find ./* -type d -exec mkdir ../changeset/{} \;

# Copy files
find ./* -mtime -1 -daystart -exec cp {} ../changeset/{} \;

# Delete empty directories, run this several times because after moving a child the parent directory needs to be removed
find ../changeset/ -type d -empty -exec rmdir {} \; 
```

# google-maps-sdk-ios - 如何在新的 iOS 版 Google Maps SDK 上添加自定义图层

> ID：13964024
> 
> 赞同：1
> 
> 时间：2012-12-20T01:39:47.230
> 
> 标签：google-maps-sdk-ios

是否可以向新的 iOS 版 Google Maps SDK 添加自定义图层？*平铺图像或 KML 格式的自定义图层。

在文档中，我看不到任何关于图层的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:28:27.387

不，在这个初始版本中没有。虽然有一些希望，因为类似的 Android API 有一个。

我只能建议提出[功能请求](http://code.google.com/p/gmaps-api-issues/issues/list)

# apache - htaccess 将所有请求重定向到 index.php，子文件夹除外

> ID：13964027
> 
> 赞同：12
> 
> 时间：2012-12-20T01:39:58.530
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, apache2

我在我的域的根目录中安装了一个 CMS，其中包含以下 htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

这需要友好的 url 将所有内容重定向到 index.php。我的问题是我有一个包含另一个 cms 的子文件夹。我需要将对子文件夹的请求重定向到正确的文件夹而不是 index.php。

我尝试了以下但它似乎不起作用

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(sub-folder)
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T01:44:35.103

如果请求 uri 与子文件夹匹配，您应该正确验证

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !/subfolder
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

无论如何，前两个 rewritecond 表示：如果请求文件名不是文件或目录。这意味着如果您引用的文件在子文件夹中并且子文件夹在您的 docroot 中，则您无需执行任何操作。

如果仍然无法正常工作，启用日志可以帮助您：

```
RewriteLog "/web/logs/mywebsite.rewrite.log"
RewriteLogLevel 9
RewriteEngine On 
```

**避免此登录生产**

使用较高的 Level 值会显着降低 Apache 服务器的速度！使用级别大于 2 的重写日志文件仅用于调试！

# python - 使用 Mock 进行第三方 API 的 Django/Python 测试

> ID：13964031
> 
> 赞同：3
> 
> 时间：2012-12-20T01:40:21.057
> 
> 标签：python, django, unit-testing, mocking, tropo

我有一个代码，我正在尝试使用 Mock library/python-django 进行测试。简要总结一下我的申请是：

（第一阶段）：客户端使用我的应用程序公开的 API。映射的 API 函数向 3rd 方 API（CaaS 提供者 Tropo）发出 HTTP 连接请求

（第二阶段）：Tropo 服务器（第 3 方）用一些 url 回复我的服务器，我映射到函数，该函数向 Tropo 服务器发送另一个请求，在他们这边，调用（）到电话号码。

* * *

我只使用我的 API 来使用 Django 测试客户端，但问题是它也回复 Tropo 以对我提供的数字进行真正的调用。所以我想使用 mock() 库，但我对它知之甚少.

我所做的是，我看到在 Tropo 的第一阶段后得到的响应将其硬编码在变量中`input`，并且我也有`expected_output`变量，该变量也是在第二阶段后看到输出的硬编码。

但是我想正确地构建我的测试框架，在其中我可以在我的测试环境中模拟整个 tropo 库，并且所有请求都转到这个假库而不是真正的 tropo。但不改变代码。

任何想法或建议。作为开发人员，请让我裸露，这是我尝试做的测试。

由于我没有得到任何回应，我试图提供更多关于我到底陷入了什么的细节：

让我在一个函数中说我的代码片段......

```
conn     = httplib.HTTPConnection('Some_External_URI')

    headers = {"accept": "application/json", "Content-type":"application/json"}
    params  = ''

    conn.request('POST', data, params, headers)

    response  = conn.getresponse()
    payload   = response.read() 
```

我如何模拟这个特定的连接请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:25:45.620

通过在我的代码中模拟类，我能够达到某种程度的测试。

`test.py`

```
 from mock import patch, MagicMock
    from tropo.conferencing import TropoConferencing

    @patch.object(TropoConferencing, 'sendTriggerCallRequest') 
    def test_ConferenceCreation(self, sendTriggerCallRequest):
        response_conference = self._createConference(sendTriggerCallRequest)
        self.assertContains(response_conference, 200)

   def _createConference(self, sendTriggerCallRequest):
        self._twoParticipants_PhaseI(sendTriggerCallRequest)

        response_conference = self.client.post(self.const.create_conferenceApi , {'title':self.const.title,'participants':self.const.participants})
        obj = json.loads(response_conference.content)
        self.conf_id =  obj['details']['conference_id']

        try:
            conference_id =  Conference.objects.get(conferenceId=self.conf_id)
        except Conference.DoesNotExist:
            print 'Conference not found'

        # PHASE II
        self._twoParticipants_PhaseII()

        return response_conference

    def _twoParticipants_PhaseI(self, sendTriggerCallRequest):
        list_of_return_values= [{'json': {'session_id': 'e85ea1229f2dd02c7d7534c2a4392b32', 'address': u'xxxxxxxxx'}, 'response': True},
                            {'json': {'session_id': 'e72bf728d4de2aa039f39843097de14f', 'address': u'xxxxxxxx'}, 'response': True}
                            ]
        def side_effect(*args, **kwargs):
            return list_of_return_values.pop()

        sendTriggerCallRequest.side_effect = side_effect

    def _twoParticipants_PhaseII(self):

        input           = {"session":{"id":"e72bf728d4de2aa039f39843097de14f","accountId":"xxxxx","timestamp":"2013-01-07T18:32:20.905Z","userType":"NONE","initialText":'null',"callId":'null',"parameters":{"phonenumber":"xxxxxxx","action":"create","conference_id":str(self.conf_id),"format":"form"}}}
        expectedOutput  = '{"tropo": [{"call": {"to": "xxxxxxx", "allowSignals": "exit", "from": "xxxxxxx", "timeout": 60}}, {"ask": {"name": "join_conference", "say": {"value": "Please press one to join conference"}, "choices": {"terminator": "*", "value": "1", "mode": "dtmf"}, "attempts": 1, "timeout": 5, "voice": "Susan"}}, {"on": {"event": "mute", "next": "' + self.const.muteEvent+ str(self.conf_id) + '/xxxxxx"}}, {"on": {"event": "unmute", "next": "/conference/rest/v1/conference/events/unmute/'+ str(self.conf_id) + '/xxxxxxx"}}, {"on": {"event": "hangup", "next": "'+ str(self.conf_id) + '/xxxxxx"}}, {"on": {"event": "continue", "next": "'+ str(self.conf_id) + '/xxxxxx"}}, {"on": {"event": "exit", "next": "'+ str(self.conf_id) + '/xxxxxx"}}, {"on": {"event": "error", "next": "/conference/rest/v1/conference/events/hangup/'+ str(self.conf_id) + '/xxxxxxx"}}, {"on": {"event": "incomplete", "next": "'+ str(self.conf_id) + '/xxxxxxx"}}, {"say": {"value": ""}}]}'

        callbackPayload = json.dumps(input)
        request = MagicMock()
        request.raw_post_data = callbackPayload

        response = call(request)

        self.assertEqual(response.content, expectedOutput) 
```

如您所见，我正在对从 Tropo 获得的响应进行硬编码并传递给函数。请让我知道是否有任何 QA 对此类问题有更好的解决方案

# sql - SQL 语句中的特殊名称

> ID：13964032
> 
> 赞同：0
> 
> 时间：2012-12-20T01:40:35.857
> 
> 标签：sql

如何使用在 sql 语句中设置的特殊名称？这是我的 sql 语句

`Create table KioskItem(Lock nvarchar(255))`

但是由于锁是预定义的名称，我无法执行该语句。那么我该如何做才能使 Lock 可以用作列名呢？附带说明一下，这个 sql 命令是在 mysql 中执行的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:41:53.027

向 SQL 保留字添加反引号将解决此问题：

```
CREATE TABLE KioskItem(`Lock` VARCHAR(255)); 
```

[如果您设置 ANSI_QUOTES 模式，如此处](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)指定，您也可以使用双引号：

```
CREATE TABLE KioskItem("Lock" VARCHAR(255)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:43:38.517

此外，在引用列时需要使用反引号“`”，否则会出现 sql 错误

例如

```
SELECT `Lock` FROM table 
```

# ios - 将设备放在表面上后，是否可以确定应用程序 UI 是否处于横向？

> ID：13964038
> 
> 赞同：4
> 
> 时间：2012-12-20T01:41:17.277
> 
> 标签：ios, ipad, keyboard, uiinterfaceorientation, uideviceorientation

如果用户在横向模式下拿着 iPad，我正在确定键盘的帧偏移量。如果我在横向模式下添加内容然后将 iPad 平放在表面上，我发现我无法正确设置偏移量。我正在使用下面的代码来设置偏移量：

```
if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft || [[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight) {
    tableView.frame = CGRectMake(0,0,tableView.frame.size.width, tableView.frame.size.height-keyboardsize.height);
} 
```

我可以检查的 UIDeviceOrientations 是：

```
typedef enum {
   UIDeviceOrientationUnknown,
   UIDeviceOrientationPortrait,
   UIDeviceOrientationPortraitUpsideDown,
   UIDeviceOrientationLandscapeLeft,
   UIDeviceOrientationLandscapeRight,
   UIDeviceOrientationFaceUp,
   UIDeviceOrientationFaceDown
} UIDeviceOrientation; 
```

（来源：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)）

我有什么方法可以检查/知道用户是否一直以横向（`UIDeviceOrientationLandscapeLeft`或`UIDeviceOrientationLandscapeRight`）持有应用程序，然后将设备放下（应该是`UIDeviceOrientationFaceUp`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T01:43:13.057

您感兴趣的不是设备方向，而是界面方向。尝试使用`self.interfaceOrientation`（`self`您的视图控制器在哪里）。您也可以从`[[UIApplication sharedApplication] statusBarOrientation]`.

话虽如此，您可能根本不应该使用界面方向来找出键盘的位置。键盘在出现并四处移动时会生成通知，其中包括位置信息。看看`UIKeyboardWillShowNotification`和`UIKeyboardWillChangeFrameNotification`。他们在 userInfo 字典中的`UIKeyboardFrameBeginUserInfoKey`和`UIKeyboardFrameEndUserInfoKey`键下有位置信息，这将告诉您键盘的位置。

# php - 在 php 中检索调用脚本/Javascript 的名称

> ID：13964042
> 
> 赞同：0
> 
> 时间：2012-12-20T01:42:20.107
> 
> 标签：php, javascript

> **可能重复：**
> [保护远程 ajax 方法调用](https://stackoverflow.com/questions/503469/securing-a-remote-ajax-method-call)

有没有办法从 PHP 代码中检索调用 php 脚本的 javascript 文件的名称？

不幸的是，由于我必须在网页上从 Javascript（用于 Google 地图）调用 PHP 脚本，所以这“邀请”通过手动调用 PHP 脚本来检索我的数据。检查调用 PHP 脚本的脚本/文件至少会带来一些保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:49:20.773

当您的页面打开时，您可以在服务器上设置一个具有随机值的会话变量，并将该变量添加到查询字符串中到您的 php 脚本中。

然后在您的 javascript 调用的 php 脚本中，您启动会话并根据查询之一检查会话变量。

# java - Sitebricks 是否与 GAE 后端 (Java) 兼容

> ID：13964043
> 
> 赞同：1
> 
> 时间：2012-12-20T01:42:23.287
> 
> 标签：java, google-app-engine, guice, backend, sitebricks

我想知道是否可以使用 Sitebricks 托管 Google App Engine 后端 servlet。我试图在我的 GAE Java 应用程序中这样做——前端使用 GAE 的`BackendService`接口获取后端 URL 并发送 HTTP 请求——但 HTTP 响应总是返回*404 Not Found*）。

我很想发布一些源代码/配置文件，但我觉得最好解释一下我在做什么。基本上，我的 servlet 已使用 Sitebricks 以与我的前端 servlet 完全相同的方式进行配置，这些 servlet 运行良好（即，在 servlet 类和方法中使用`@Service`,`@At`和注释，并在我的应用程序的全局 Guice实例中进行配置）。我正在使用一个动态后端实例，在*backends.xml*中正确配置。`@Get``SitebricksModule``Injector`

 *有人对将**Sitebricks**与**GAE 后端**配对有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:25:12.377

是的，Sitebricks 在 GAE 上工作。我推荐 sonatype 的 OSS 存储库中的 0.8.8-SNAPSHOT 版本以获得最新功能。否则，最新的测试版本是来自 Maven Central 的 0.8.7。唯一不起作用的是使用 Sitebricks Web 客户端从 GAE 请求其他网站。

你在使用 GuiceServletContextListener 吗？这是创建 Injector 的最佳方式。还要确保您的 web.xml 指向它并正确设置 GuiceFilter（根据 sitebricks.org 文档）。

丹吉。（维护者，网站砖）*

# python - ntlk python frenchStemmer

> ID：13964045
> 
> 赞同：1
> 
> 时间：2012-12-20T01:42:35.937
> 
> 标签：python, nltk

我试图初始化`FrenchStemmer`：

```
stemmer = nltk.stem.FrenchStemmer('french') 
```

错误是：

> AttributeError：“模块”对象没有属性“FrenchStemmer”

有没有人见过这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:58:58.817

That's because nltk.stem has **no** module called as **FrenchStemmer**.

The **French stemmer** available is in **SnowballStemmer()** and you can access it by

```
import nltk
stemmer=nltk.stem.SnowballStemmer('french') 
```

or by

```
import nltk
stemmer=nltk.stem.snowball.FrenchStemmer() 
```

# c# - 数千并发数据包，ThreadPool vs BeginRead？

> ID：13964050
> 
> 赞同：3
> 
> 时间：2012-12-20T01:43:04.237
> 
> 标签：c#, multithreading, timer, threadpool, udpclient

我正在运行一个具有 5000 个[`UdpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)类实例的应用程序，因为我需要在不同的端口上同时传输数据包。

我目前正在使用[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)在[`ThreadPool`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx). 它有一个非常短`Interval`的触发许多`Elapsed`事件。

修改应用程序以使用`BeginRead`/`EndRead`的功能会更好[`UdpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:28:21.403

当您使用 IO 操作（即网络、文件系统等）时，您应该始终在 async/await 的上下文中使用异步操作，即 BeginXXX/EndXXX、XXXAsync/XXXCompleted、XXXAsync。这些操作使用众所周知的[IO 编译端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)。简而言之，它在传输数据时不消耗任何 CPU 资源。一旦加载了请求的数据，它就会从 ThreadPool 中获取一个线程并将处理程序排队到该线程。在您的情况下，您正在浪费 CPU 资源。线程并没有做一些有用的工作，而是等待数据传输。此外，ThreadPool 的线程数量有限（通常等于 CPU 内核的数量）。因此，在您的情况下，它一次仅向/从 2 个客户端发送/接收数据。

异步方法可能看起来非常复杂（尤其是 BeginXXX/EndXXX），但是有很多包装器可以显着简化它们的使用。例如，您可以使用[Rx 的](http://msdn.microsoft.com/en-us/data/gg577609.aspx) [FromAsyncPattern](http://rxwiki.wikidot.com/101samples#toc10)扩展方法，也可以使用新的[async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)异步模型。

# css - 如何更改 CSS 优先级（不要使用！important）

> ID：13964052
> 
> 赞同：1
> 
> 时间：2012-12-20T01:43:04.983
> 
> 标签：css

如果css如下：

```
input[type="text"]
{
     border: 1px solid green; 
}

.text
{
     border: 1px solid red ; 
} 
```

如果 html 如下所示：

```
<div>
 <input type="text" class="text"/>
</div>​ 
```

文本框的`border-color`是绿色的。似乎“元素”具有更高的优先级。
如何使 .class 有效？是必须使用的`!important`吗？

还有其他选择吗？

* * *

我测试了下面的CSS代码：

```
input[type="text"]
{
     border: 1px solid green; 
}

input[type="text"] .text
{
     border: 1px solid red; 
} 
```

HTML 代码：

```
<div>
     <input type="text" class="text"/>
</div> 
```

你猜怎么着？</p>

还是绿色。

删除 'input[type="text"] .text' 中的空格，它变为 input[type="text"].text 。没关系。边框颜色为红色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T01:45:06.657

CSS中的`C`代表级联。你只需要给它比其他规则更高的优先级。

```
input.text
{
     border: 1px solid red ; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:47:19.170

```
/* Set default border for `text` elements */
.text
{
     border: 1px solid red; 
}

/* Override for input elements */
input.text
{
     border: 1px solid green; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:03:37.790

这是选择器的重量问题。

和

```
`input[type="text"] 
```

您同时传递`input`和`[type=text]`作为选择器，因此您总共传递了两个。

和

```
.text 
```

你只通过了一个。这意味着更少的权重和更少的特异性，所以第一个选择器胜过第二个。

通过`input`在之前添加（即 input.text），您为第二种样式添加了更多权重，正如您对级联样式表所期望的那样，这将占上风。

[特异性可以通过特异性计算器](http://specificity.keegan.st/)等网站轻松可视化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T01:53:15.763

样式是按顺序应用的，但也必须遵循*特定*规则。的`.text`具体程度低于`input[type="text"]`，因此绿色边框“获胜”。如果您使红色边框规则更具体，您可以获得您似乎期望的结果。

尝试类似的东西`input.text`，看看会发生什么。如果那不这样做，你将不得不变得更具体。

# javascript - JavaScript 中的 __proto__ 类型代理是什么？

> ID：13964058
> 
> 赞同：8
> 
> 时间：2012-12-20T01:43:44.427
> 
> 标签：javascript, backbone.js

使用 Backbone.js，我在控制台记录了一个 a 的实例`Backbone.View.extend({})`以查找`__proto__`要代理的类型。

```
var view = Backbone.View.extend({});
console.log(view); 
```

这导致了一个类型为 Surrogate 的对象`__proto__`

```
__proto__: Surrogate 
```

什么是代孕？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T01:55:17.557

Surrogate 是 Backbone 中的一个“帮助”类，用于设置原型链。查看源代码：

```
 // Helper function to correctly set up the prototype chain, for subclasses.
  // Similar to `goog.inherits`, but uses a hash of prototype properties and
  // class properties to be extended.
  var extend = function(protoProps, staticProps) {
    var parent = this;
    var child;

    // The constructor function for the new subclass is either defined by you
    // (the "constructor" property in your `extend` definition), or defaulted
    // by us to simply call the parent's constructor.
    if (protoProps && _.has(protoProps, 'constructor')) {
      child = protoProps.constructor;
    } else {
      child = function(){ parent.apply(this, arguments); };
    }

    // Add static properties to the constructor function, if supplied.
    _.extend(child, parent, staticProps);

    // Set the prototype chain to inherit from `parent`, without calling
    // `parent`'s constructor function.
    var Surrogate = function(){ this.constructor = child; };
    Surrogate.prototype = parent.prototype;
    child.prototype = new Surrogate;

    // Add prototype properties (instance properties) to the subclass,
    // if supplied.
    if (protoProps) _.extend(child.prototype, protoProps);

    // Set a convenience property in case the parent's prototype is needed
    // later.
    child.__super__ = parent.prototype;

    return child;
  }; 
```

# java - 缓冲阅读器拒绝输出数据

> ID：13964060
> 
> 赞同：2
> 
> 时间：2012-12-20T01:43:50.447
> 
> 标签：java, process, runtime, exec, bufferedreader

我正在尝试创建一个程序以在 Linux 服务器上按某个名称查找所有文件，然后将它们的绝对路径通过管道传输到 ArrayList 中进行处理。我使用 Process (with exec) 和 BufferedReader 的方法似乎适用于我的所有其他需求（各种其他命令 du -h df-h 等......）但是，它似乎并没有在这个工作如果我没有输出数据！它似乎正在执行，因为它需要一两分钟才能完成，但我从未看到任何数据结果。

这是代码：（没有try/catch，它只打印堆栈跟踪）

```
Process process = 
    Runtime.getRuntime().exec("find " + Main.serversPath + " -name 'dynmap'");
BufferedReader stdInput = new BufferedReader(
    new InputStreamReader(process.getInputStream()));

while ((s = stdInput.readLine()) != null) {
    filesToDelete.add(s);

    if (Main.debugMode == "High") {
        System.out.println("Preprocess: dynmap pass - found " + s);
    }
}

process.destroy(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:07:18.080

您应该始终在单独的线程（使用 StreamGobbler）中捕获进程的错误流，以处理进程抛出错误的情况。

```
class StreamGobbler extends Thread
{
    private InputStream is;
    private String myMessage;

    public StreamGobbler(InputStream istream)
    {
        this.is = istream;
    }

    public String getMessage()
    {
        return this.myMessage;
    }

    @Override
    public void run()
    {
        StringBuilder buffer = new StringBuilder();
        BufferedReader br = new BufferedReader(new InputStreamReader(is));

        int size = 1024 * 1024;
        char[] ch = new char[size];
        int read = 0;
        try {
            while ((read = br.read(ch, 0, size)) >= 0) {
                buffer.append(ch, 0, read);
            }
        }
        catch (Exception ioe) {
            ioe.printStackTrace();
        }
        finally {
            try {
                br.close();
            }
            catch (IOException e) {
                e.printStackTrace();
            }
        }
        this.myMessage = buffer.toString();
        return;
    }
} 
```

然后你应该使用 StreamGobbler 来捕获错误流，如下所示：

```
Process process = 
    new ProcessBuilder("find", Main.serversPath, "-name", "'dynmap'").start();

StreamGobbler error = new StreamGobbler(process.getErrorStream());
error.start();

BufferedReader stdInput =
    new BufferedReader(new InputStreamReader(process.getInputStream()));

while ((s = stdInput.readLine()) != null) {
    filesToDelete.add(s);

    if (Main.debugMode.equals("High")) {
        System.out.println("Preprocess: dynmap pass - found " + s);
    }
}

// Get the exit status
int exitStatus = process.waitFor();
if (exitStatus != 0) {
    // read the error.getMessage() and handle accordingly.
}
process.destroy(); 
```

另外，推荐使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)来创建流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:06:48.670

这一行：

```
System.out.println("Preprocess: dynmap pass - found " + s); 
```

很可能不会被执行。

当用于字符串时，`==`运算符比较对象引用而不是值。

为了比较实际值，您应该使用以下`String.equals()`方法：

```
if (Main.debugMode.equals("High")) {
    System.out.println("Preprocess: dynmap pass - found " + s);
} 
```

有关在 Java 中比较对象的概述，请参见[此处](http://en.wikibooks.org/wiki/Java_Programming/Comparing_Objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:55:54.710

我认为您的问题是您没有关闭 BufferedRreader。您应该始终关闭，如果需要，请刷新您的流。所以：

```
 Process process = Runtime.getRuntime().exec("find " + Main.serversPath + " -name 'dynmap'");
    BufferedReader stdInput = new BufferedReader(new InputStreamReader(process.getInputStream()));

    while ((s = stdInput.readLine()) != null) {
        filesToDelete.add(s);

        if (Main.debugMode == "High") {
            System.out.println("Preprocess: dynmap pass - found " + s);
        }
    }
    process.destroy();
    //Add this line here!
    stdInput.close(); 
```

您可能还想更改此设置：

```
 if (Main.debugMode == "High") {
            System.out.println("Preprocess: dynmap pass - found " + s);
    } 
```

对此：

```
 if (Main.debugMode.equals("High")) {
            System.out.println("Preprocess: dynmap pass - found " + s);
   } 
```

# ruby-on-rails - Rails：控制器不会正确更新模型

> ID：13964066
> 
> 赞同：3
> 
> 时间：2012-12-20T01:44:56.127
> 
> 标签：ruby-on-rails, ruby, activerecord, callback, controller

我提前道歉，这将是一个很长的问题。

**简洁版本：**

我有一个会议模型，其中包含`date`、`start_time`和`end_time`。这些是时间对象，用户输入当然很痛苦，所以我使用虚拟属性来接受在保存之前由[Chronic解析的字符串。](https://github.com/mojombo/chronic)

我有一个普通的 vanilla rails 控制器，它从表单接收这些虚拟属性并将它们传递给模型。这是控制器：

```
def create
  @meeting = @member.meetings.build(params[:meeting])
  if @meeting.save
    redirect_to member_meetings_path(@member), :notice => "Meeting Added"
  else
    render :new
  end
end

def update
  @meeting = @member.meetings.find(params[:id])
  if @meeting.update_attributes(params[:meeting])
    redirect_to member_meetings_path(@member), :notice => "Meeting Updated"
  else
    render :new
  end
end 
```

我已经验证控制器从表单接收到正确的参数，例如`params[:meeting][:date_string]`按预期设置。

**问题：**

创建时，日期设置正确，但时间分配为 2000 年，设置为 UTC，并且不会在前端显示为本地时间。

更新时，日期不会更新。时间更新但在 2000 年 1 月 1 日保持 UTC。

**更长的版本**

让我觉得这超级奇怪的是我有不错的测试覆盖率，表明所有这些都在模型层工作。

这是模型：

```
# DEPENDENCIES
require 'chronic'
class Meeting < ActiveRecord::Base
  # MASS ASSIGNMENT PROTECTION
  attr_accessible :name, :location, :description, :contact_id, :member_id, :time_zone, 
                  :date, :start_time, :end_time, :date_string, :start_time_string, :end_time_string

  # RELATIONSHIPS
  belongs_to :member
  belongs_to :contact

  # CALLBACKS
  before_save :parse_time

  # Time IO Formatting
  attr_writer :date_string, :start_time_string, :end_time_string

  # Display time as string, year optional    
  def date_string(year=true)
    if date
      str = "%B %e"
      str += ", %Y" if year
      date.strftime(str).gsub('  ',' ')
    else
      ""
    end
  end

  # Display time as string, AM/PM optional
  def start_time_string(meridian=true)
    if start_time
      str = "%l:%M"
      str += " %p" if meridian
      start_time.strftime(str).lstrip
    else
      ""
    end
  end

  # Display time as string, AM/PM optional    
  def end_time_string(meridian=true)
    if end_time
      str = "%l:%M"
      str += " %p" if meridian
      end_time.strftime(str).lstrip
    else
      ""
    end
  end

  # Display Date and Time for Front-End    
  def time
    date.year == Date.today.year ? y = false : y = true
    start_time.meridian != end_time.meridian ? m = true : m = false
    [date_string(y),'; ',start_time_string(m),' - ',end_time_string].join
  end

  private
    # Time Input Processing, called in `before_save`
    def parse_time
      set_time_zone
      self.date ||= @date_string ? Chronic.parse(@date_string).to_date : Date.today
      self.start_time = Chronic.parse @start_time_string, :now => self.date
      self.end_time = Chronic.parse @end_time_string, :now => self.date
    end

    def set_time_zone
      if time_zone
        Time.zone = time_zone
      elsif member && member.time_zone
        Time.zone = member.time_zone
      end
      Chronic.time_class = Time.zone
    end

end 
```

这是规格。请注意，为了单独测试`parse_time`回调，`@meeting.send(:parse_time)`只要我没有实际创建或更新记录，我就会在这些测试中调用。

```
require "minitest_helper"

describe Meeting do
  before do
    @meeting = Meeting.new
  end

  describe "accepting dates in natural language" do
    it "should recognize months and days" do
      @meeting.date_string = 'December 17'
      @meeting.send(:parse_time)
      @meeting.date.must_equal Date.new(Time.now.year,12,17)
    end

    it "should assume a start time is today" do
      @meeting.start_time_string = '1pm'
      @meeting.send(:parse_time)
      @meeting.start_time.must_equal Time.zone.local(Date.today.year,Date.today.month,Date.today.day, 13,0,0)
    end

    it "should assume an end time is today" do
      @meeting.end_time_string = '3:30'
      @meeting.send(:parse_time)
      @meeting.end_time.must_equal Time.zone.local(Date.today.year,Date.today.month,Date.today.day, 15,30,0)
    end

    it "should set start time to the given date" do
      @meeting.date = Date.new(Time.now.year,12,1)
      @meeting.start_time_string = '4:30 pm'
      @meeting.send(:parse_time)
      @meeting.start_time.must_equal Time.zone.local(Time.now.year,12,1,16,30)
    end

    it "should set end time to the given date" do
      @meeting.date = Date.new(Time.now.year,12,1)
      @meeting.end_time_string = '6pm'
      @meeting.send(:parse_time)
      @meeting.end_time.must_equal Time.zone.local(Time.now.year,12,1,18,0)
    end
  end

  describe "displaying time" do
    before do
      @meeting.date = Date.new(Date.today.year,12,1)
      @meeting.start_time = Time.new(Date.today.year,12,1,16,30)
      @meeting.end_time = Time.new(Date.today.year,12,1,18,0)
    end

    it "should print a friendly time" do
      @meeting.time.must_equal "December 1; 4:30 - 6:00 PM"
    end
  end

  describe "displaying if nil" do
    it "should handle nil date" do
      @meeting.date_string.must_equal ""
    end

    it "should handle nil start_time" do
      @meeting.start_time_string.must_equal ""
    end

    it "should handle nil end_time" do
      @meeting.end_time_string.must_equal ""
    end
  end

  describe "time zones" do
    before do
      @meeting.assign_attributes(
        time_zone: 'Central Time (US & Canada)',
        date_string: "December 1, #{Time.now.year}",
        start_time_string: "4:30 PM",
        end_time_string: "6:00 PM"
      )
      @meeting.save
    end

    it "should set meeting start times in the given time zone" do
      Time.zone = 'Central Time (US & Canada)'
      @meeting.start_time.must_equal Time.zone.local(Time.now.year,12,1,16,30)
    end

    it "should set the correct UTC offset" do
      @meeting.start_time.utc_offset.must_equal -(6*60*60)
    end

    after do
      @meeting.destroy
    end
  end

  describe "updating" do
    before do
      @m = Meeting.create(
        time_zone: 'Central Time (US & Canada)',
        date_string: "December 1, #{Time.now.year}",
        start_time_string: "4:30 PM",
        end_time_string: "6:00 PM"
      )
      @m.update_attributes start_time_string: '2pm', end_time_string: '3pm'
      Time.zone = 'Central Time (US & Canada)'
    end

    it "should update start time via mass assignment" do
      @m.start_time.must_equal Time.zone.local(Time.now.year,12,1,14,00)
    end

    it "should update end time via mass assignment" do
      @m.end_time.must_equal Time.zone.local(Time.now.year,12,1,15,00)
    end

    after do
      @m.destroy
    end
  end

end 
```

我什至在以后的测试方法中专门混合通过批量分配创建和更新记录，以确保这些按预期工作。所有这些测试都通过了。

我很欣赏对以下内容的任何见解：

1.  为什么控制器#update 操作中的日期不更新？

2.  为什么时间不是从设定的日期开始计算年份？这在模型和规范中有效，但在通过控制器通过表单提交时无效。

3.  为什么不将时间设置为从表单传入的时区？同样，这些规格通过了，控制器出了什么问题？

4.  为什么时间不会在前端显示在他们的时区？

感谢您的帮助，我觉得我必须为这棵树上的树而失去森林，因为我已经做了几个小时了。

* * *

**更新：**

感谢 AJcodez 的帮助，我看到了一些问题：

1.  指定日期错误，谢谢 AJ！现在使用：

    ```
    if @date_string.present?
        self.date = Chronic.parse(@date_string).to_date
    elsif self.date.nil?
        self.date = Date.today
    end 
    ```

2.  我正确使用了 Chronic，我的错误在数据库层！我将数据库中的字段设置为，`time`而不是`datetime`，这会破坏一切。给任何阅读本文的人的教训：永远不要`time`用作数据库字段（除非您确切了解它的作用以及为什么使用它而不是 datetime）。

3.  与上述相同的问题，更改字段以`datetime`解决问题。

4.  这里的问题与访问模型与视图中的时间有关。如果我将这些时间格式化方法移动到帮助器中，以便在当前请求范围内调用它们，它们将正常工作。

谢谢阿杰！你的建议让我越过了我的盲点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:45:48.490

好了就到这里了。。

1\. *为什么控制器#update 操作中的日期不更新？*

我看到两个潜在的问题。看起来你没有再次解析日期。试试这个：

```
def update
  @meeting = @member.meetings.find(params[:id])
  @meeting.assign_attributes params[:meeting]
  @meeting.send :parse_time
  if @meeting.save
  ... 
```

`assign_attributes`设置但不保存新值：[http ://apidock.com/rails/ActiveRecord/AttributeAssignment/assign_attributes](http://apidock.com/rails/ActiveRecord/AttributeAssignment/assign_attributes)

此外，在您的 parse_time 方法中，您使用此分配：`self.date ||=`如果已分配，它将始终将 self.date 设置回自身。换句话说，除非它是虚假的，否则您无法更新日期。

* * *

2\. *为什么时间不是从设定的日期开始计算年份？这在模型和规范中有效，但在通过控制器通过表单提交时无效。*

不知道，看起来你使用`Chronic#parse`正确。

* * *

3\. *为什么不将时间设置为从表单传入的时区？同样，这些规格通过了，控制器出了什么问题？*

尝试调试`time_zone`并确保它返回的是`params[:meeting][:time_zone]`. 再一次，慢性病看起来是正确的。

旁注：如果你传递一个无效的字符串，`Time#zone=`它会报错。比如`Time.zone = 'utc'`都是坏的。

* * *

4\. *为什么时间不会在前端显示在他们的时区？*

请参阅`Time#in_time_zone` [http://api.rubyonrails.org/classes/Time.html#method-i-in_time_zone](http://api.rubyonrails.org/classes/Time.html#method-i-in_time_zone)并每次都明确命名您的时区。

不确定您是否已经在执行此操作，但请尝试在数据库中显式保存 UTC 时间，然后以本地时间显示。

# php - 如何在不提交表单的情况下在php中调用sql命令？

> ID：13964073
> 
> 赞同：0
> 
> 时间：2012-12-20T01:45:35.753
> 
> 标签：php, sql

我想执行 sql 命令，例如

```
$query_run = mysql_query($query); 
```

在 php.ini 中。但我能找到触发 php 事件的唯一方法是使用以下方式提交表单：

```
if(isset$POST['submit']) {
    $query_run = mysql_query($query);
} 
```

但这会刷新页面并清除页面上动态创建的所有内容。

我想要的是有一个按钮，按下它来触发 sql 命令，而无需像`onclick`在 js 中那样重新加载页面。但是，sql 命令不能在 js 函数中运行（我可以找到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:48:22.883

您需要做的是一个 AJAX 调用。这需要 Javascript（最好借助诸如 jQuery 之类的库）来组装页面中的日期，调用 PHP 页面，并将结果呈现到页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:51:28.120

PHP 是在服务器端解析的，这意味着您无法在不发出服务器请求的情况下运行代码。一旦页面交付给客户端，任何 php 解析都完成了。

您可以创建一个按钮或链接，通过 javascript、AJAX 调用将 http 请求发送到执行您想要完成的数据库工作的小型 php 脚本。你不会让它再次调用你的整个页面。此输出将返回到 javascript，并可用于更新带有成功或失败通知的 CSS 块元素。

这是 W3C Ajax 教程[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# ms-access - 将 MS-Access 报告拆分为 pdf

> ID：13964074
> 
> 赞同：3
> 
> 时间：2012-12-20T01:45:38.480
> 
> 标签：ms-access, vba

不久前，我从网上获得了以下 VBA 代码：

```
Private Sub btnCreatePDF_Click()
    Dim MyPath As String
    Dim MyFilename As String
    MyPath = "D:\reports\"
        MyFilename = "KS1.pdf"
    'Open report preview and auto-save it as a PDF
        DoCmd.OpenReport "Rpt_KS1", acViewPreview
        DoCmd.OutputTo acOutputReport, "", acFormatPDF, MyPath & MyFilename, False 'Change false to true here to auto-open the saved PDF
    'Close the previewed report
        DoCmd.Close acReport, "Rpt_KS1"
End Sub 
```

它用于在 MS Access 中创建单个 pdf 报告（最多包含 30 页），并且可以很好地满足我的需要。但是，我现在需要将报告分成 30 页左右，并为每一页创建一个 pdf。知道如何做到这一点吗？我在报告中有一个“用户名”，或者如果这有助于拆分它们等，可以添加一个唯一 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:45:10.277

使用[Docmd.OpenReport](http://msdn.microsoft.com/en-us/library/office/bb238032%28v=office.12%29.aspx)的第四个参数 (WhereCondition) 。使用 WhereCondition，完全按照您在向查询中添加 Where 时通常会执行的操作，只是不要包含单词 Where。这将使报表仅显示与 WhereCondition 匹配的记录。

将您的唯一标识符列表检索到某种集合或记录集中，然后执行循环。此示例假定您将它们放在一个名为 uniqueIds 的集合中，并且几乎肯定需要您进行一些修改。

```
Dim MyPath As String
Dim MyFilename As String
MyPath = "D:\reports\"    
'Loop structure may vary depending on how you obtain values
For each uniqueId in uniqueIds
    MyFilename = "KS1" & uniqueId & ".pdf"
'Open report preview and auto-save it as a PDF
    DoCmd.OpenReport "Rpt_KS1", acViewPreview, , "uniqueField = " & uniqueID
    DoCmd.OutputTo acOutputReport, "", acFormatPDF, MyPath & MyFilename, False
'Close the previewed report
    DoCmd.Close acReport, "Rpt_KS1"
Next uniqueId 
```

严格来说，这可能不会导致每一页都有不同的 PDF。但它会为每个 uniqueID 生成不同的 PDF，这可能是每个页面，具体取决于您的数据。

# image - 在不丢失透明度的情况下减小 .png 图像的大小

> ID：13964076
> 
> 赞同：17
> 
> 时间：2012-12-20T01:45:44.007
> 
> 标签：image

基本上，我想调整或重新采样 .png 图像（以减小其文件大小）并保持其透明度。

有人知道如何最好地解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-04-21T07:57:29.843

您可以使用 Paint.net，它是一个免费工具。非常基本，但可以完成工作。

转到图像>>调整大小

你可以从这里下载它：[https ://www.getpaint.net/](https://www.getpaint.net/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-08-15T13:26:16.640

偶然发现了这个线程，发现以下网站完全符合要求：[https ://onlinepngtools.com/resize-png](https://onlinepngtools.com/resize-png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T01:50:42.497

你用的是什么图形程序？

Photoshop 通过简单地通过 IMAGE > IMAGE SIZE 并调整大小来做到这一点。透明度不受影响。我确信 Paint Shop Pro 也会这样做

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-25T00:08:42.083

我知道这是一个老问题，但对我有用的答案是使用 Inkscape。

1.  启动 Inkscape（在 Inkscape.org 上免费）。
2.  文件 -> 导入... (Ctrl+I) 要调整大小的 PNG 文件（导入对话框中的默认设置是可以的）。
3.  选择刚刚导入的图像，选择文件 -> 导出 PNG 图像... (Shift+Ctrl+E)
4.  在“导出 PNG 图像”工具窗格中，单击“导出为...”按钮以设置输出文件名和位置。
5.  在同一工具窗格中，使用宽度/高度或像素设置图像大小。
6.  在同一工具窗格中，单击“导出”按钮以创建输出文件。

这对我有用，希望对其他人有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-17T09:18:38.663

提供您创建/一直在处理的图像首先是透明的，使用任何主要图像编辑包（例如 PhotoShop、PaintShop Pro 等）中的“调整大小”或“重新采样”工具不应该影响（或丢失) 透明度。

我自己使用 PaintShop Pro（X6，64 位），通常发现“PNG 优化器”选项提供了更多的选项（比默认的“另存为 > .png”路线）。

希望这对源问题有所帮助（特定于 PaintShop Pro 用户）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-16T04:03:26.587

在等待其他图像编辑软件的下载时，我尝试了 Microsoft Power Point 并成功保留了透明度。在任何幻灯片中拖动图像，裁剪或调整大小，然后将新图片另存为 .png。您可以将图像拖回 ppt 以确认保持透明度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-04T20:18:44.127

完整的 Autodesk Sketchbook 现在免费提供，包括所有以前的高级功能，例如调整图像大小。

您可以通过单击图像 > 图像大小... 像在绘画中一样进行操作，然后您可以将其保存为 .png 而不会丢失透明度。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-02-05T05:55:54.400

可以通过减少颜色数量来减小图像大小，并且有在线工具可以做到这一点。

试试这些..希望他们能解决你的问题

[https://tinypng.com/](https://tinypng.com/) ‎</p>

[http://pngcrush.com/](http://pngcrush.com/)和

[http://tools.dynamicdrive.com/imageoptimizer/](http://tools.dynamicdrive.com/imageoptimizer/) --它提供了更多不同颜色数量的输出图像。但是，平滑度会受到影响，请注意。

# alfresco - Alfresco如何向其他域发送电子邮件

> ID：13964077
> 
> 赞同：0
> 
> 时间：2012-12-20T01:45:43.303
> 
> 标签：alfresco

我已经像这样配置了户外电子邮件出站

```
 mail.host=mailserver.com
 mail.port=25
 mail.username=uname
 mail.password=pword 
```

现在我可以将邮件发送到电子邮件地址，例如`abc@mailserver.com`but `abc@otherdomain.com`。怎么给其他域名发邮件？谢谢！！！（我的露天版是community 4.2.x）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:21:51.540

将评论推广到答案...

Alfresco 本身在向任何目标域发送电子邮件方面绝对没有问题

但是，当您为 Alfresco 设置出站 SMTP 时，您需要指定一个邮件服务器来处理出站邮件。*该*服务器需要配置为允许来自 Alfresco 主机的邮件中继。如果不是，那么您经常会看到内部电子邮件很好，但外部电子邮件被拒绝。确保您的邮件服务器配置为允许 Alfresco 通过它发送（中继）电子邮件，您会没事的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T08:07:02.727

要使用“向指定用户发送电子邮件”规则向 alfresco 发送电子邮件，您必须首先修改文件 alfresco-global.properties。该文件位于文件夹“tomcatsharedclasses”中。

```
mail.host=your host
mail.port=25
mail.username=your mail user
mail.password=your mail password
mail.encoding=UTF-8
mail.from.default=optional name
mail.smtp.auth=true 
```

最后，您可以在 Company Home/Data Dictionary/Email Templates/Notify Email Templates中的文件**notify_user_email.ftl中更改电子邮件通知的模板。**

有关完整示例，请参见此处： [https ://lentux-informatica.com/how-to-send-email-through-alfresco/](https://lentux-informatica.com/how-to-send-email-through-alfresco/)

# objective-c - 如何更改 BOOL 的值？

> ID：13964078
> 
> 赞同：1
> 
> 时间：2012-12-20T01:45:57.533
> 
> 标签：objective-c, xcode, boolean, logic

如何在 Objective-C 中更改 BOOL 的值？`lightOn`是`BOOL`我需要帮助修改的值。

```
@synthesize button, view;
-(IBAction)torchOn:(id)sender;
     {
          AVCaptureDevice*flashlight = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if([flashlight isTorchAvailable] && [flashlight isTorchModeSupported:AVCaptureTorchModeOn] && [lightOn = YES])
{
    BOOL success  [[flashlight lockForConfiguration:nil]];
    if(success)
    {
        [flashlight setTorchMode:AVCaptureTorchModeOn];
        [flashlight unlockForConfiguration];
        lightOn = NO;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:39:39.680

`BOOL success [[flashlight lockForConfiguration:nil]];`是无意义的陈述。

即使我读`[[flashlight lockForConfiguration:nil]]`为`[flashlight lockForConfiguration:nil]`then`lockForConfiguration:`方法应该返回一个`BOOL`值。

然后可以通过以下方式将该值分配给成功：

`BOOL success = [flashlight lockForConfiguration:nil];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T01:52:30.133

Objective-C 扩展了 ANSI C 语言。在那里开始学习。[这是一个入门](http://en.wikibooks.org/wiki/A_Little_C_Primer)

```
BOOL amICrazy;

amICrazy = YES;
// amICrazy = NO;
if (amICrazy == YES)
    [self seekHelp]; 
```

# actionscript-3 - 适用于 Android AS3 的 Adob e AIR 3.2

> ID：13964079
> 
> 赞同：2
> 
> 时间：2012-12-20T01:45:58.873
> 
> 标签：actionscript-3, flash, air, multi-touch

我正在使用 Flash 和 AS3 为 Android 创建一个简单的游戏。我有基本的功能，多点触摸和触摸和拖动等。当 3 个对象被拖动到用户屏幕的某个点时，我试图触发一个事件，特别是跳到一个新帧。下面显示的是我用来控制对象的触摸和拖动事件，但是当所有 3 个事件都被拖动到屏幕上的某个位置时，我对如何触发所需事件感到有点困惑。任何建议或方向将不胜感激。

```
Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

Gem1_MC.addEventListener(TouchEvent.TOUCH_BEGIN, fl_TouchBeginHandler);
Gem1_MC.addEventListener(TouchEvent.TOUCH_END, fl_TouchEndHandler);

var fl_DragBounds:Rectangle = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);

    function fl_TouchBeginHandler(event:TouchEvent):void
    {
        event.target.startTouchDrag(event.touchPointID, false, fl_DragBounds);
    }

    function fl_TouchEndHandler(event:TouchEvent):void
    {
        event.target.stopTouchDrag(event.touchPointID);
    } 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-20T02:11:01.163

您需要在游戏中触发一个循环，该循环会`Event.ENTER_FRAME`针对“胜利”区域的 containsRect() 方法测试每个对象的 Rectangle。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Rectangle.html#containsRect()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Rectangle.html#containsRect())

您需要一个条件来确保所有 3 个评估为`true`然后可以触发您的胜利条件。

您也可以在乐谱对象的移动上触发此循环，但是如果您想做一些事情，例如让计算机控制对手或在游戏中做一个简单的演示并重用该逻辑，那么您会受到一些限制。

# orchardcms - 如何使用果园中的 IRepository 在果园中保存具有多个字段的记录

> ID：13964080
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:45:59.637
> 
> 标签：orchardcms

 ``_itemRepository.Create(new ItemRecord { Name = "Royal True Orange", Brand = "Coca Cola", Description = "Royal True Orange in Can", Size = "1", UnitMeasure = "CASE", IsActive = true });`

错误消息无法插入：[ERP.Item.Models.ItemRecord][SQL: INSERT INTO ERP_Item_ItemRecord（名称，描述，UnitMeasure，尺寸，品牌，IsActive）值（？，？，？，？，？，？）；选择 SCOPE_IDENTITY()]

我用果园有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:08:38.563

Orchard 中的所有表都必须具有 int 类型的 ID 字段，并将其设置为主键和自动增量。您可以在迁移中手动执行此操作，如下所示：

```
SchemaBuilder.CreateTable("ItemRecord", t => t
            .Column<int>("Id", c => c.PrimaryKey().Identity())
.... 
```

或者，您可以让 Orchard 通过继承您的`ItemRecord`from`ContentPartRecord`并在迁移中设置它来处理这个问题，如下所示：

```
SchemaBuilder.CreateTable("ItemRecord", table => table
            .ContentPartRecord()
.... 
````

# jvm - 为什么 JVM 同时具有 `invokespecial` 和 `invokestatic` 操作码？

> ID：13964082
> 
> 赞同：11
> 
> 时间：2012-12-20T01:46:25.253
> 
> 标签：jvm, bytecode

两条指令都使用静态而不是动态调度。似乎唯一的实质性区别是，`invokespecial`它的第一个参数总是有一个对象，该对象是分派方法所属的类的实例。但是，`invokespecial`实际上并没有将对象放在那里；编译器负责通过在发出之前发出适当的堆栈操作序列来实现这一点`invokespecial`。所以替换`invokespecial`不`invokestatic`应该影响运行时堆栈/堆的操作方式——尽管我希望它会导致`VerifyError`违反规范。

我很好奇制作两条不同的指令背后的可能原因，这些指令基本上做同样的事情。我查看了 OpenJDK 解释器的源代码，它看起来`invokespecial`和`invokestatic`处理方式几乎相同。有两个单独的指令是否有助于 JIT 编译器更好地优化代码，或者它是否有助于类文件验证器更有效地证明某些安全属性？或者这只是 JVM 设计中的一个怪癖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-29T23:56:49.630

*免责声明：很难确定，因为我从未阅读过明确的 Oracle 声明，但我认为这就是原因：*

当您查看 Java 字节码时，您可能会就其他指令提出相同的问题。为什么验证者会在将两个`int`s 压入堆栈并立即将它们视为一个时阻止您`long`？（试试看，它会阻止你。）你可以争辩说，通过允许这样做，你可以用更小的指令集表达相同的逻辑。（为了进一步说明这个论点，一个字节不能表达太多的指令，因此 Java 字节码集应尽可能减少。）

当然，理论上您不需要字节码指令来将`int`s 和s 推入堆栈，而且`long`您不需要两条指令来表达方法调用，这一点是正确的。方法由其*方法描述符*（名称和原始参数类型）唯一标识，您不能在同一类中定义具有相同描述的静态和非静态方法。为了验证字节码，Java 编译器必须检查目标方法是否仍然存在。`INVOKESPECIAL``INVOKESTATIC`*`static`*

 **备注*：这与 v6ak 的答案相矛盾。但是，非静态方法的方法描述符不会更改为包含对`this.getClass()`. `INVOKESMART`因此，Java 运行时总是可以从假设指令的方法描述符中推断出适当的方法绑定。请参阅 JVMS §4.3.3。

理论就这么多。但是，两种调用类型表达的意图是完全不同的。请记住，Java 字节码也应该被*javac*以外的其他工具用来创建 JVM 应用程序。使用字节码，这些工具生成的东西比 Java 源代码更类似于机器代码。但它仍然是相当高的水平。例如，仍然会验证字节码，并且在编译为机器码时会自动优化字节码。但是，字节码是一种抽象，它故意包含一些冗余以使*含义*的字节码更明确。就像 Java 语言为相似的事物使用不同的名称以使语言更具可读性一样，字节码指令集也包含一些冗余。另一个好处是，验证和字节码解释/编译可以加快速度，因为方法的调用类型并不总是需要推断，而是在字节码中明确说明。这是可取的，因为验证、解释和编译是在运行时完成的。

作为最后的轶事，我应该提到在 Java 5 之前`<clinit>`没有标记类的静态初始化`static`程序。在这种情况下，静态调用也可以通过方法的名称来推断，但这会导致更多的运行时开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:16:54.563

有以下定义：

*   [http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#invokestatic](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#invokestatic)
*   [http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#invokespecial](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#invokespecial)

* * *

存在显着差异。假设我们要设计一个`invokesmart`指令，它会在`inkovestatic`和之间进行巧妙的选择`invokespecial`：

首先，区分静态调用和虚拟调用不会有问题，因为我们不能有两个具有相同名称、相同参数类型和相同返回类型的方法，即使一个是静态的，第二个是虚拟的。JVM 不允许这样做（出于一个奇怪的原因）。感谢 raphw 注意到这一点。

~~首先，invokesmart 是什么`foo/Bar.baz(I)I`意思？这可能意味着：~~

*   ~~从操作数堆栈`foo.Bar.baz`消耗并添加另一个的静态方法调用。`int``int``// (int) -> (int)`~~
*   ~~一个实例方法调用`foo.Bar.baz`，它消耗`foo.Bar`和`int`来自操作数堆栈并添加`int`.`// (foo.Bar, int) -> (int)`~~

~~你会如何选择他们？两种方法都可能存在。~~

~~我们可以尝试通过要求`foo/Bar.baz(Lfoo/Bar;I)`静态调用来解决它。但是，我们可能同时拥有`public static int baz(Bar, int)`和 `public int baz(int)`。~~

* * *

我们可以说这无关紧要并且可能禁用这种情况。（我认为这不是一个好主意，只是想象一下。）这意味着什么？

*   如果该方法是静态的，则可能没有其他限制。另一方面，如果方法不是静态的，则有一些限制：“最后，如果解析的方法是受保护的（第 4.6 节），并且它要么是当前类的成员，要么是当前类的超类的成员类，那么 objectref 的类必须是当前类或当前类的子类。”
*   还有一些进一步的区别，请参阅关于`ACC_SUPER`.
*   这意味着必须在字节码验证之前加载所有引用的类。我希望现在没有必要，但我不是 100% 确定。

因此，这将意味着非常不一致的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T12:44:49.843

For getting a clear practical idea about these codes, you need to add [eclipse plugin for ASM](http://asm.ow2.org/eclipse/) in your eclipse IDE and find out the bytecode generated for your sample Hello World program which you created.*

# c# - 调用一个类的结果并在其他类中使用

> ID：13964088
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:48:12.813
> 
> 标签：c#, class, function, call

这可能很容易，但我卡住了！

我确实有一门课可以为我创建一个命令，例如：

如您所见，此编码将返回给我 bCommand！

现在我有一个按钮功能，我应该调用这个 bCommand 并将其分配为如下值：

所以我得到了 Bcommand 在当前上下文中不存在的错误我正在寻找任何建议如何解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:58:11.020

您需要将`Encode`方法的结果分配给变量。

```
private void btnModel_Click(object sender, EventArgs e)
{
    byte[] bCommand = Encode("C11", "");
    WriteData(bCommand);  // bCommand will now exist in this context
} 
```

# php - 函数中的硬编码数据应该是静态的吗？

> ID：13964092
> 
> 赞同：3
> 
> 时间：2012-12-20T01:49:02.740
> 
> 标签：php

当我在函数中硬编码数据时，我可以正常初始化变量：

```
function check_country() {
  $countries = array(
    'aa',
    'ab',
    'ae',
    ...
  );

} 
```

PHP 会只`$countries` *指出*内存中的文字数据，还是会将所有初始化数据*复制*到新的 ZVAL 或其他什么？

如果是后者，那将基本上等同于这个，不是吗？

```
function check_country() {
  $countries = array();
  $countries[] = 'aa';
  $countries[] = 'ab';
  $countries[] = 'ae';

} 
```

另一种方法是使变量静态并像这样初始化它：

```
function check_country() {
  static $countries;

  if (!isset($countries))
  {
    $countries = array(
      'aa',
      'ab',
      'ae',
      ...
    );
  }

} 
```

这种技术是否 a) 更快并且 b) 需要两倍的内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:03:36.710

*   要使变量静态，只需在其前面加上`static`关键字。无需额外检查`if (!isset($countries))`；

*   “动态”实现会消耗更多 CPU，因为每次调用函数时都会创建另一个新的局部变量；

*   “静态”实现会消耗更多内存，因为静态变量是在堆中分配的（如全局变量），并且它们一直存在，直到脚本完成执行。

结论：你不会注意到它们之间有任何合理的区别（只要你不创建几兆字节大小的数组）——所以选择你更喜欢的一个（大概是第一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:14:11.387

[在zerkms 回答](https://stackoverflow.com/a/13964206/367456)的内容旁边，对于`static`变体，您可以初始化变量并保留`if`：

```
function check_country() {
  static $countries = array(
      'aa',
      'ab',
      'ae',
      ...
    );
  }    
} 
```

**只要**初始数据也具有静态性质（恒定）（如您的情况）。

# asp.net-mvc-3 - MVC 4 安装导致异常已被调用的目标抛出

> ID：13964095
> 
> 赞同：0
> 
> 时间：2012-12-20T01:49:49.373
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, membership-provider

我有一个使用自定义角色提供程序的 MVC 3 应用程序。

```
public class MyRoleProvider : System.Web.Security.RoleProvider 
```

我在 web.config 中有如下设置

```
<roleManager defaultProvider="MyRoleProvider" enabled="true" cacheRolesInCookie="true">
  <providers>
    <clear />
    <add name="MyRoleProvider" type="Namespace.MyRoleProvider, NameSpace"  connectionStringName="MembershipDBConnStrName" />
  </providers>
</roleManager> 
```

这一切都很好，直到我决定安装 MVC 4 来玩它。

现在我的 mvc 3 应用程序没有加载指向我的自定义角色提供程序的配置错误

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：调用目标已引发异常。

```
Line 81:       <providers>
Line 82:         <clear />
Line 83:         **<add name="MyRoleProvider" type="Namespace.MyRoleProvider, Namespace"     connectionStringName="MembershipDBConnStrName" />**
Line 84:       </providers>
Line 85:     </roleManager> 
```

做一些阅读，我发现会员资格（即 simplemembership 提供者）发生了一些巨大的变化，但我希望有一个快速修复让我的东西继续工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:47:30.710

尝试从“MyRoleProvider”类中删除所有构造函数。

# php - 从 INI 文件中填充选择框

> ID：13964097
> 
> 赞同：2
> 
> 时间：2012-12-20T01:50:05.473
> 
> 标签：php

编码：

```
$INIFile = parse_ini_file('config.ini');
echo '<center><form method="POST" action=""><br /><table class="specialtable">';
echo '<tr><td><font face="Verdana" color="white">Status:&nbsp;</font></td><td><select name="Status">
<option value="0">Offline</option>
<option value="1">Online</option>
</select></td></tr>'; 
```

.ini 文件：

```
Status = 1 
```

这是我的代码。我怎样才能使它从 .ini 文件中读取第一个选项？

提前致谢。

这是一个需要做的例子，除了它不起作用。作为一个例子：

```
echo '<center><form method="POST" action=""><br /><table class="specialtable">';
echo '<tr><td><font face="Verdana" color="white">Status:&nbsp;</font></td><td><select name="Status">
switch('.$INIFile["Status"].')
{
case 0: <option value="0">Off</option>; break;
case 1: <option value="1">On</option>; break;
}
<option value="0">Offline</option>
<option value="1">Online</option>
</select></td></tr>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:00:46.270

```
$INIFile = parse_ini_file('config.ini');
echo '<center><form method="POST" action=""><br /><table class="specialtable">';
echo '<tr><td><font face="Verdana" color="white">'.$INIFile["Status"].':&nbsp;</font></td><td><select name="Status">
<option value="0">Offline</option>
<option value="1">Online</option>
</select></td></tr>'; 
```

**EDIT**

```
$INIFile = parse_ini_file('config.ini');
echo '<center><form method="POST" action=""><br /><table class="specialtable">';
echo '<tr><td><font face="Verdana" color="white">Status:&nbsp;</font></td><td><select name="Status">';
switch($INIFile["Status"])
{
case 0: echo '<option value="0">Off</option>'; break;
case 1: echo '<option value="1">On</option>'; break;
}
echo '<option value="0">Offline</option>
      <option value="1">Online</option>
      </select></td></tr>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:19:00.010

```
$opts = array();     

echo '<select>';

switch($INIFile['Status']):
    case '0': 
        $opts['value'] = '0';
        $opts['text'] = 'Offline';
        break;
    case '1' :
       $opts['value'] = '1';
       $opts['text'] = 'Online';
       break;
endswitch;

echo '<option value="'.$opts['value'].'">'.$opts['text'].'</option>';
echo '</select>'; 
```

# knockout.js - 如何在淘汰赛中将上下文属性伪变量与字符串结合起来

> ID：13964105
> 
> 赞同：1
> 
> 时间：2012-12-20T01:51:03.840
> 
> 标签：knockout.js

我需要在 foreach 中的淘汰赛中添加一个 attr，如下所示：

```
<input type="hidden" data-bind="value: url, attr: { name: 'test[' + $index + ']' }" /> 
```

我需要输出：

```
<input type="hidden" data-bind="value: url, attr: { name: 'test[' + $index + ']' }" name=test[0] /> 
```

但我得到的是：

```
<input type="hidden" data-bind="value: url, attr: { name: 'test[' + $index + ']' }" name="test[function d(){if(0<arguments.length){if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))d.H(),c=arguments[0],d.G();return this}b.r.Va(d);return c}"]/> 
```

当我像这样使用 $index 时：

```
<input type="hidden" data-bind="value: url, attr: { name:  $index }" /> 
```

有用

```
<input type="hidden" data-bind="value: url, attr: { name: 'test[' + $index + ']' }" name=0 /> 
```

...但我需要将它与字符串结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:49:17.023

您需要将括号附加到 $index 以评估它，即`attr: { name: 'test[' + $index() + ']' }`

# php - 使用 array_combine 和使用存储在数组中的 $_SESSION 提取的未识别变量

> ID：13964106
> 
> 赞同：1
> 
> 时间：2012-12-20T01:51:06.207
> 
> 标签：php, arrays, session

我有一个 2 数组：

```
 $arr1 = array($_SESSION['a'], $_SESSION['b']);
 $arr2 = array("1", "2"); 
```

我使用此代码为：

```
 extract(array_combine($arr1, $arr2)); 
```

输出将是：

```
 $_SESSION['a'] = 1;
 $_SESSION['b'] = 2; 
```

当我将它存储到另一个数组时，它是输出的值：

```
 $_SESSION['abcd'] = array($_SESSION['a'], $_SESSION['b']); 
```

当我运行它时，输出告诉我

```
 Unidentified a
 Unidentified b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:09:28.143

值正在分配。我没有遇到任何问题。试试这个

```
session_start();
$_SESSION['a']=a;
$_SESSION['b']=b;'
$arr1 = array($_SESSION['a'], $_SESSION['b']); 
$arr2 = array(1,2);
extract(array_combine($arr1, $arr2));
echo $_SESSION['a']."<br/>";
echo $_SESSION['b']."<br/>";
$_SESSION['abcd'] = array($_SESSION['a'], $_SESSION['b']);
echo $_SESSION['abcd'][0]."<br/>";
echo $_SESSION['abcd'][1]."<br/>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:57:54.913

```
array($_SESSION['a'], $_SESSION['b']) 
```

这将创建一个新数组，其中包含任何**值**`$_SESSION['a']`和`$_SESSION['b']`此时的值。让我们假设它们没有设置，因此`null`. 结果是`array(null, null)`。

**变量是值**的占位符。这里使用的是**值**，而不是变量本身。

> ```
> extract(array_combine($arr1, $arr2)); 
> ```
> 
> 输出将是：
> 
> ```
> $_SESSION['a'] = 1;
> $_SESSION['b'] = 2; 
> ```

这个假设显然是错误的，因此基于它的其他假设也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:50:09.413

你`session_start()`在顶部失踪了。在那之前你不能一起工作`$_SESSION`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T02:57:25.417

现在我明白了（我很伤心，我花了这么长时间）。

`array combine`像@ace 所说的那样工作。

它从 arr1 的值（所以 '' 和 '' 因为它们没有在任何地方设置，`$_SESSION['a'] = '' && $_SESSION['b'] = ''`即数组将是`array('' => 2)`（由于被覆盖）。

`values of array1 supplies keys`

`values of array2 supplies values`

这意味着被提取的变量在技术上是 $（如 '' 的名称，但显然，这不是一个有效的变量）。

如果你已经设置`$_SESSION['a'] = 'aaa'; $_SESSION['b'] = 'bbb';`然后使用`$_SESSION['abcd'] = array($aaa, $bbb);`而不是`$_SESSION['abcd'] = array($_SESSION['a'], $_SESSION['b']);`那么它有点工作。

[http://codepad.org/xH9tEwxR](http://codepad.org/xH9tEwxR)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T02:21:27.290

当您对此使用[array_combine](http://php.net/manual/en/function.array-combine.php)时，这需要它`$_SESSION['a']`并且`$_SESSION['b']`具有值。您还需要在访问之前进行会话`$_SESSION`；

```
$arr1 = array($_SESSION['a'], $_SESSION['b']);
$arr2 = array("1", "2"); 
```

假设您有：

```
session_start();
$_SESSION['a'] = 'keya';
$_SESSION['b'] = 'keyb';
$arr1 = array($_SESSION['a'], $_SESSION['b']);
$arr2 = array("1", "2");
extract(array_combine($arr1, $arr2));
// array_combine will return
// Array
// (
//     [keya] => 1
//     [keyb] => 2
// )
// then running extract on this array will produce
echo $keya; // "1"
echo $keyb; // "2" 
```

所以当你存储在另一个会话变量中时，它应该是这样的

```
$_SESSION['abcd'] = array($keya, $keyb); 
```

# c# - 使用navigationtostring 时可以在webview 中引用本地文件吗？

> ID：13964107
> 
> 赞同：0
> 
> 时间：2012-12-20T01:51:14.423
> 
> 标签：c#, .net, xaml, windows-runtime

我正在使用 webview 在我的 Windows 8 应用程序中显示某些数据。我想使用本地 js 文件的包含以及使用本地存储的图像。

这可能吗？

将文件所在的本地路径放在我没有任何运气。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T05:39:26.080

根据`WebView` [文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)，您只能使用该`ms-appx-web`协议引用其他文件，即加载存储在 中的文件`Windows.ApplicationModel.Package.Current.InstalledLocation`，这意味着它们需要与您的应用程序一起作为内容分发。出于安全原因，该控件不支持`ms-appdata`协议，即，如果您在运行时生成或下载它们，您无法打开存储的文件`Windows.Storage.ApplicationData.Current.LocalFolder` `Windows.Storage.ApplicationData.Current.RemoteFolder`或`Windows.Storage.ApplicationData.Current.TempFolder`您需要放置它们的位置。

JavaScript 应用程序`WebView`更[灵活](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)一点：它也支持`ms-appdata`协议，但仅适用于图像等媒体文件。它无法打开任何潜在的可执行代码，例如脚本或 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T16:31:51.150

如果要打开一些本地 .html 文件或 atc。您应该将其下载到**`InstalledLocation`**文件夹中。如果你没有选择创建一个新文件，你可以使用`file.CopyAsync(htmlFolder, fname + ".html");` 例如我创建一些 .html 文件：

```
StorageFolder htmlFolder = await Windows.ApplicationModel.Package.Current.InstalledLocation.CreateFolderAsync(@"HtmlFiles", CreationCollisionOption.GenerateUniqueName);
IStorageFile file = await htmlFolder .CreateFileAsync(fname + ".html", CreationCollisionOption.GenerateUniqueName); 
```

而且我可以很容易地打开这个 .html 文件，有或没有`FileOpenPicker`：

```
var fop = new FileOpenPicker();
fop.FileTypeFilter.Add(".html");
var file = await fop.PickSingleFileAsync();
if (file != null)
{
   string myPath = file.Path.Substring(file.Path.IndexOf("HtmlFiles"));
   myWebview.Navigate(new Uri("ms-appx-web:///" + myPath));
} 
```

并且不要忘记 - 只有**`InstalledLocation`**你可以打开它`ms-appx-web:///`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:10:39.567

如果 WebView 基于 IE10，则 FIleReader 可能是您正在寻找的。这是我在图像 ipload 页面上使用的一段代码，用于在通过文件打开对话框选择图像时在页面中显示图像：

```
$('input:file').each(function(index, evt){
    if(index===0)
    {
        var files = evt.files;
        for(var i=0;i<files.length;i++)
        {
            if(files[i].name===filename)
            {
                var reader = new FileReader();

                reader.onload=(function(theFile){
                    return function(e){
                        var line= uploader.fineUploader('getItemByFileId',id);
                        if(line!=undefined)
                            $(line).append('<img class="fileimage" id="fileImage-' + id + '" src="'+e.target.result+'" />');
                    };
                })(files[i]);
                reader.readAsDataURL(files[i]);
                break;
            }
        }
    } 
```

我希望这能为您指明正确的方向！

# android - 如何为谷歌地图进行路线优化（旅行推销员）？

> ID：13964112
> 
> 赞同：2
> 
> 时间：2012-12-20T01:52:01.263
> 
> 标签：android, google-maps, google-maps-api-3, geolocation, gps

对于以下问题的任何线索和/或资源和/或解决方案的链接，我将不胜感激：

我有一个送货员，带着各种包裹从一个地方开车到另一个地方。我想为这样的人提供安卓设备并使用谷歌的地图和交通信息。解决方案应该找到最短或最快的位置路径。该人每天将前往 40-100 个地点。大多数将在同一个城市或附近的城市。

MapPoint 中存在类似的解决方案，但不利用交通信息（但不准确）：

[http://www.youtube.com/watch?v=XXPxNvuhiPw](http://www.youtube.com/watch?v=XXPxNvuhiPw)

再一次 - 我很感激任何解决这种情况的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T09:07:55.767

您可以在 Directions API 中使用将`optimize`参数设置为。`true`但是，每个请求最多只能使用 8 个航点（Maps API for Work 客户为 23 个）。这不足为奇，因为旅行商问题在计算大量位置时计算成本很高。

从[文档](https://developers.google.com/maps/documentation/directions/#Waypoints)中。

*默认情况下，Directions 服务会按照给定的顺序计算通过提供的航点的路线。或者，您可以将 optimize:true 作为航点参数中的第一个参数传递，以允许方向服务通过以更有效的顺序重新排列航点来优化提供的路线。（此优化是旅行商问题的一个应用。）*

# python - 未检测到 Django settings.py

> ID：13964113
> 
> 赞同：5
> 
> 时间：2012-12-20T01:52:12.100
> 
> 标签：python, django

我对 Django 很陌生，我在让我的 settings.py 正确加载时遇到了一些困难。我收到以下错误：

> /admin 配置不当
> 
> 将 'django.contrib.admin' 放入 INSTALLED_APPS 设置中，以便使用管理应用程序。

但是，我的 settings.py INSTALLED_APPS 如下所示：

```
INSTALLED_APPS = (
     'django.contrib.auth',
     'django.contrib.contenttypes',
     'django.contrib.sessions',
     'django.contrib.sites',
     'django.contrib.messages',
     'django.contrib.staticfiles',
     'django.contrib.admin',
     'squaredcrm' ) 
```

查看错误日志，我注意到它没有发现我对已安装应用程序的任何更改：

> Django 版本：1.4.3 Python 版本：2.7.3 已安装的应用程序：('django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.sites', 'django .contrib.messages', 'django.contrib.staticfiles') 已安装的中间件: ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware')

我这辈子都想不通。任何其他更改似乎都在起作用，但此字段不会更新。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:01:46.780

我知道这是一个愚蠢的问题，但是您在进行更改后是否重新启动了服务器？

默认情况下，Django 的生产（我的意思是基于 Apache，也许还有其他）实例*不会*在更改时自动重新加载。Django 开发服务器*将*自动重新加载，只要您没有明确告诉它不要这样做。

您必须重新启动（或停止然后启动）基于 Apache 的 Django 才能看到文件更改。

重要提示：不要*在*开发服务器之外运行生产站点。它很慢，很慢，很慢，而且可能以我不知道的方式不安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:02:29.190

如果选择了其他更改，这可能是因为`INSTALLED_APPS`正在`settings.py`文件中的某处重新定义。

这可能是：

*   在下一行。
*   在导入中（可能是 a `from x import *`）。

# macos - 使用旧版 libstdc++ 在 Mac OS 上部署 Qt C++11 应用程序

> ID：13964116
> 
> 赞同：1
> 
> 时间：2012-12-20T01:52:25.263
> 
> 标签：macos, deployment, c++11, linker, libstdc++

当我尝试在另一台机器上部署我的应用程序时，它会因`dyld`/unresolved symbol 错误而失败。（Qt 静态发布版本，顺便说一句。）当我放入`libstdc++`捆绑包（连同`libSystem.B`and `libobjc.A`）并`install_name_tool`正确运行时，对于这些库所依赖的库，我会收到新的链接器错误。例如，`libc++.1`。我真的希望我不必手动遍历并`install_name_tool`在每个库及其子库上运行。（或者写我自己的脚本，我不知道该怎么做。）有没有更好的方法？这对（[一个](https://stackoverflow.com/questions/6365772/unable-to-run-an-application-compiled-on-os-x-snow-leopard-10-6-7-on-another-m)，[两个](https://stackoverflow.com/questions/6444054/deploy-osx-application-compiled-using-gcc-4-6)）问题基本上是在这个问题之后，但没有达到我所做的那样，并且无论如何都没有得到解决。

这是我所在的地方`otool`：

> $otool -L my_app
> 
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices（兼容版本 1.0.0，当前版本 41.0.0） /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation（兼容版本 150.0\. 0，当前版本 635.21.0）/System/Library/Frameworks/Security.framework/Versions/A/Security（兼容版本 1.0.0，当前版本 55148.6.0）/System/Library/Frameworks/Carbon.framework/Versions/ A/Carbon（兼容版本 2.0.0，当前版本 153.0.0）/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit（兼容版本 45.0.0，当前版本 1138.51.0）@executable_path/libz。 1.dylib（兼容版本1.0.0，当前版本1.2.5）@executable_path//libstdc++.6.dylib（兼容版本7.0.0，当前版本7.17.0) /usr/lib/libgcc_s.1.dylib（兼容版本1.0.0，当前版本1094.0.0）/opt/local/lib/gcc47/libgcc_s.1.dylib（兼容版本1.0.0，当前版本1.0。 0）@executable_path/libSystem.B.dylib（兼容版本 1.0.0，当前版本 159.1.0）@executable_path/libobjc.A.dylib（兼容版本 1.0.0，当前版本 228.0.0）/System/Library/Frameworks /CoreServices.framework/Versions/A/CoreServices（兼容版本 1.0.0，当前版本 53.0.0） /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation（兼容版本 300.0.0，当前版本 833.25。 0)dylib（兼容版本 1.0.0，当前版本 159.1.0）@executable_path/libobjc.A.dylib（兼容版本 1.0.0，当前版本 228.0.0）/System/Library/Frameworks/CoreServices.framework/Versions/A/ CoreServices（兼容版本 1.0.0，当前版本 53.0.0）/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation（兼容版本 300.0.0，当前版本 833.25.0）dylib（兼容版本 1.0.0，当前版本 159.1.0）@executable_path/libobjc.A.dylib（兼容版本 1.0.0，当前版本 228.0.0）/System/Library/Frameworks/CoreServices.framework/Versions/A/ CoreServices（兼容版本 1.0.0，当前版本 53.0.0）/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation（兼容版本 300.0.0，当前版本 833.25.0）

**编辑：**这是我收到的初始错误消息，在第一轮更改消失后，将替换为类似的消息`libc++.1`：

> 异常类型：EXC_BREAKPOINT (SIGTRAP) 异常代码：0x0000000000000002、0x0000000000000000 线程崩溃：0
> 
> Dyld 错误消息：找不到符号：__ZNSt8__detail12__prime_listE 引用自：/Users/nfoley/Downloads/WaveSorter-mac-1.0.1-static/WaveSorter.app/Contents/MacOS/WaveSorter 预期在：/usr/lib/libstdc++.6。 dylib

# regex - 用于拆分电子邮件的 VBScript 正则表达式

> ID：13964119
> 
> 赞同：0
> 
> 时间：2012-12-20T01:52:41.513
> 
> 标签：regex, email, vbscript

给我一行这样的字符串

```
To: =?ks_c_5601-1987?B?vcW5zsHY?= <test1@test.co.kr>,
    =?ks_c_5601-1987?B?wNO9w8ij?= <test2@gmail.com>, Henry Han
    <test3@hotmail.com> 
```

基本上，它们是以特定字符集编码的电子邮件地址集。

我想将它们分开并有一个仅包含电子邮件地址的数组

前任：

```
toAddress(0) = test1@test.co.kr
toAddress(1) = test2@gmail.com
toAddress(2) = test3@hotmail.com 
```

VBScript 的正则表达式功能是否足以满足我上面的需要？我将不胜感激任何指导，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:34:01.303

```
dim regex:set regex=new RegExp
regex.Global=True
regex.IgnoreCase=True
regex.Pattern="<.*?>"
dim ori:ori="To: =?ks_c_5601-1987?B?vcW5zsHY?= <test1@test.co.kr>," & vbLF &_
    "=?ks_c_5601-1987?B?wNO9w8ij?= <test2@gmail.com>, Henry Han " & vbLF &_
    "<test3@hotmail.com>"
Response.Write ori & vbLF 'just for debug
dim matches:set matches=regex.Execute(ori)
For Each match In matches
    Response.Write match.value & vbLF
Next 
```

使用 IIS 5 测试，输出：

```
<test1@test.co.kr>
<test2@gmail.com>
<test3@hotmail.com> 
```

您可以在获取时删除`<`and 。`>``match.Value`

# css - CSS3 过渡在 webkit 中的行为不符合预期

> ID：13964121
> 
> 赞同：1
> 
> 时间：2012-12-20T01:52:45.457
> 
> 标签：css, webkit, transition

第一次海报，对网页设计来说相当新。我的设计有一个图像，当悬停时，通过 css3 转换在左侧、顶部和右侧显示图像。

这些图像在悬停时弹出很好，我想将鼠标悬停在新图像上，以便我可以单击它们作为链接。

这似乎在 IE10 和 Firefox 中运行良好，但在 WebKit 浏览器中有些失败。我看到的问题是，当将鼠标悬停在新翻译的 div 上时，过渡会有些闪烁，然后 div 中的随机点会返回其原始状态。

正如我所说，这在 Firefox 和 IE10 中运行良好，我可以将鼠标悬停在新的 div 上并毫无问题地单击它们。使用 WebKit，有时我可以单击 div，有时我只能在 div 缩回之前滚动到一半。

相关代码贴在下面：

```
<div id="logo">
<img id="mainLogo" src="Images/logo.png" style="width:320px;" />
<div id="div1">
<a href=""><img src="Images/box1.png" style="width:320px" /></a>
</div>
<div id="div2">
<a href=""><img src="Images/box3.png" style="width:320px" /></a>
</div>
<div id="div3">
<a href=""><img src="Images/box2.png" style="width:320px" /></a>
</div>
</div> 
```

```
#logo
{
    width:320px;
    position:relative;
    margin:0 auto;
    margin-top:300px;   
}
#div1
{
    top:100px;
    left:-200px;
    background-repeat:no-repeat;
    width:320px;
    height:200px;
    position:absolute;  
    transform:rotatey(270deg);
    -webkit-transform:rotatey(270deg);
    -moz-transform:rotatey(90deg);
    transition:transform 0.5s;
    -webkit-transition:-webkit-transform 0.5s;
    -moz-transition:-moz-transform 0.5s;

}
#div2
{
    top:100px;
    left:200px;
    background-repeat:no-repeat;
    width:320px;
    height:200px;
    position:absolute;  
    transform:rotatey(270deg);
    -webkit-transform:rotatey(270deg);
    -moz-transform:rotatey(90deg);
    transition:transform 0.5s;
    -webkit-transition:-webkit-transform 0.5s;
    -moz-transition:-moz-transform 0.5s;

}
#div3
{
    top:-100px;
    left:0px;
    background-repeat:no-repeat;
    width:320px;
    height:200px;
    position:absolute;  
    transform:rotatex(90deg);
    -webkit-transform:rotatex(90deg);
    -moz-transform:rotatex(90deg);
    transition:transform 0.5s;
    -webkit-transition:-webkit-transform 0.5s;
    -moz-transition:-moz-transform 0.5s;

}
#logo:hover #div1
{
    transform:translate(-120px,0) rotatey(180deg);
    -webkit-transform: translate(-120px,0) rotatey(180deg);
    -moz-transform:translate(-120px,0) rotatey(180deg);
}
#logo:hover #div2
{
    transform:translate(110px,0) rotatey(180deg);
    -webkit-transform: translate(110px,0) rotatey(180deg);
    -moz-transform:translate(110px,0) rotatey(180deg);
}
#logo:hover #div3
{
    transform:translate(0,-60px) rotatex(180deg);
    -webkit-transform: translate(0,-60px) rotatex(180deg);
    -moz-transform:translate(0,-60px) rotatex(180deg);
} 
```

[JSFiddle](http://jsfiddle.net/ZXjau/3/)

# php - php中的活动APC

> ID：13964123
> 
> 赞同：6
> 
> 时间：2012-12-20T01:52:48.977
> 
> 标签：php, apache, apc

我已经在我的服务器中安装了 APC PHP。PHPinfo 正在显示它。但是刚问了一个问题，因为我有点困惑...

到达服务器的新 PHP 请求会自动开始使用 APC，还是需要修改 php 代码才能使用 APC？你能提供一些线索吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:01:33.533

PHP 会自动使用它。您根本无需更改代码即可使用缓存加速器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:02:50.410

APC 正在自动运行。该模块运行您的代码并将其转换为字节码。当您再次调用脚本时，您的网络服务器不会再次运行脚本，而是执行字节码。

如果你有很多流量，它会节省很多性能。

第二个功能是您可以根据需要将值保存在 APC 的共享内存中。为此，您应该阅读文档。

[http://php.net/manual/de/book.apc.php](http://php.net/manual/de/book.apc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:59:21.180

如果 apc 存在，它将被使用。除非默认值为`apc.enabled`False，否则请在 phpinfo.xml 中查看。

如果启用的设置正常，则第一个 apc 使用将是操作码。存储 php 脚本的“编译”版本。现在，通过打开 apc 的几个设置（例如避免在每次文件访问时检查源代码修改），可以大大增强这种行为。

APC 中还有一个第二大功能，就是将其用作应用程序的持久性/缓存存储。但是这些东西需要在您的应用程序中使用特定的应用程序指令，就像您使用数据库一样。检查[这些功能](http://php.net/manual/en/ref.apc.php)。

要真正激活 APC**优化**，您应该查看所有 APC 设置。`apc.shm_size`并且`apc.shm_segments`对于检查 APC 内存大小的设置最有用，并且为所有虚拟主机共享。但是在这些基本设置之后，您应该检查虚拟主机/应用程序（您将在其中使用 php_value 指令）或全局 php.ini 中的一些内容，这是生产配置的摘录：

**请注意，您应该了解每个激活[的设置并阅读文档](http://php.net/manual/en/apc.configuration.php)，否则您将在开发中浪费时间，因为您的源代码更改不会被 php 读取**

```
# Activate apc
apc.enabled =1
# Optimisation of include/require_once calls
apc.include_once_override =1
# transform paths in absolute ones (no effect if apc.stat is not 0),
# files from stream wrappers (extended includes)
# won't be cached if this is activated as they cannot be used with php's realpath()
apc.canonicalize  =1  
# In production set it to 0, then file changes won't be observed before 
# apache is restarted,
# significant boost, else file time is stated at each access (needed at 1 in dev)
apc.stat =0
# avoid problems with rsync or svn not modifying mtime but only ctime
# so if you're in production set this to 0, like for the previous one 
apc.stat_ctime =0  

# deprecated option: apc.optimization not available anymore
# apc.optimization =0  

# inform apc on number of files of the application
apc.num_files_hint =2000

# inform apc on the number of cache variables
apc.user_entries_hint =100

# cache lifetime managmenent ----------------
# time (s) we can stay on the cache even when the cache is full -- Cache full count --
# that means Garbage Collector is never inactivating theses datas before this time is over
# >0 -> old data could stay in the cache while new data want's to come, if no data is deprecated
# 7200 -> entries older than 2 hours will be thrown to make some place
# 0 -> emptying full cache when full
apc.ttl =0
apc.user_ttl =0
# this one is the same but you should note this this prevent Garbage collecting 
# after each source change.
apc.gc_ttl =0

# What to cache ? ----------------------------
# could be used to prevent some caching on specific files
# but it's better to cache often used files, isn't it? at least in production
#apc.filters  ="-config.php-.ini"
# default to 1M, files bigger than that won't be cached
apc.max_file_size  ="5M"

# various things -------------------------------
# only one process caching a same file (beter than apc.slam_defense)
php_fla apc.write_lock  =1  
# prevents caching half written files (by cp for example) by waiting x seconds
# for new files caching. set it to 0 if using only rsync or mv
apc.file_update_protection  =2
# newest versions of APC only
# adding a lazy loading capabilities, so you can parse a lot of files
# and only used things are cached
#apc.lazy_functions =1
#apc.lazy_classes  =1 
```

# javascript - 画布图像缩放、旋转、绘图

> ID：13964125
> 
> 赞同：3
> 
> 时间：2012-12-20T01:52:55.503
> 
> 标签：javascript, canvas

对于一个游戏项目，我正在使用它们的属性绘制图像，例如文件名、位置、比例、旋转。

这是绘图的部分：

```
this.context.save();
this.context.translate(item.position.x, item.position.y);
if (item.rotation > 0) {
    this.context.rotate(item.rotation * (Math.PI / 180));
}
if (item.scale.x !== 1 || item.scale.y !== 1) {
    this.context.scale(item.scale.x, item.scale.y);
}
var width = item.imageSize.width * item.scale.x;
var height = item.imageSize.height * item.scale.y;
this.context.drawImage(this.assets.image[item.fileName], -(width / 2), -(height / 2), width, height);
this.context.restore(); 
```

（不要介意奇怪的定位，这不重要）

这工作正常，但有一件事我不明白：

旋转和缩放可以通过两种不同的方式完成：首先缩放然后旋转，或者其他方式。从逻辑上讲，人们会认为先缩放然后旋转是正确的，但由于某种原因，它只有在我先旋转然后缩放时才能正常工作。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:47:13.447

您的对象的原点在哪里？x/y 是左上角吗？如果是这样，那可能会导致问题。

**[演示缩放然后旋转](http://jsfiddle.net/loktar/sekhk/1/)**

```
ctx.translate(box.x, box.y);
ctx.scale(2,2);
ctx.rotate(box.angle); 
```

**[演示旋转然后缩放](http://jsfiddle.net/loktar/sekhk/2/)**

```
ctx.translate(box.x, box.y);
ctx.rotate(box.angle);
ctx.scale(2,2); 
```

如果您注意到无论我何时执行缩放和旋转，这两个演示都可以正常工作。然而，我的原点（我翻译的地方）位于方框的中心。

要回答您的问题（或尝试），没有正确或错误的方法，您可以先缩放或先旋转，这实际上只是一个偏好问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:56:12.537

“正确的方法”真的取决于你想要做什么。对您而言，旋转然后缩放会产生您所期望的结果。

这是一个小提琴，它显示了旋转然后缩放和缩放然后旋转之间的区别：http: [//jsfiddle.net/HYbC7/3/](http://jsfiddle.net/HYbC7/3/)

对我来说出乎意料的是当你缩放然后旋转时。如果你`scale(x, y)`where`x`和`y`不相等，然后旋转，那么沿 x 轴的旋转将不同于沿 y 轴的旋转，并且生成的网格将是倾斜的。

# c# - 为什么应该是电子邮件地址显示为 Windows.ApplicationModel.Contacts.ContactField？

> ID：13964126
> 
> 赞同：1
> 
> 时间：2012-12-20T01:53:14.813
> 
> 标签：c#, windows-8, contacts, windows-store-apps

我有这个代码：

```
private async void ButtonSelectContact_OnTapped(object sender, TappedRoutedEventArgs e)
{
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker
    {
        CommitButtonText = "Invite"
    };
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        textBoxPerson.Text = contact.Name;
        textBoxEmail.Text = contact.Emails[0].ToString();
    }
} 
```

..效果很好，除了选择联系人后，textBoxEmail.Text 包含“Windows.ApplicationModel.Contacts.ContactField”（应该类似于“rupertTpupkin@kingOfComedy.com”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:56:52.300

That's because `contacts.Emails` is a list of `ContactField` objects. Use `contact.Emails[0].Value` to get the email address you want. You can use `.Type` to retrieve the type of the email address.

Official MSDN documentation: [http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contactfield](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contactfield)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:56:02.683

因为他们在实现类的时候并没有重写ToString()方法，所以是调用Object的ToString()方法，返回类名。你可以打电话`contact.Emails[0].Value`来获取价值。

# javascript - 将代码从 html 移动到 PHP 后，按需脚本停止工作

> ID：13964129
> 
> 赞同：1
> 
> 时间：2012-12-20T01:53:30.183
> 
> 标签：javascript, php, jquery, ajax, jquery-events

我偶然发现了一个非常奇怪的问题。

我在html中使用ajax（确切地说是jQuery加载）内容制作了我的网站，它一切正常，但我不得不将它重写为PHP，主要是因为Google动态`#`链接的SEO问题。无论如何，现在使用下面的脚本执行的按需脚本以这种顺序显示它的方式不起作用。但是显然代码很好，或者在某些情况下似乎很好，因为它在`#!`加载链接并且主脚本按需调用用于该特定链接的所需脚本时工作，即使我在主脚本文件中一次调用它们它们做工作！这种现象的例子：

```
function getalljs() {
    getJs("js/vertical.js","js");
    getJs("js/steps.js","js");
    getJs("js/animatesteps.js","js");
    } 
```

那里发生了另一件奇怪的事情，其中​​一个按需脚本以与下面编写的方式相同的方式加载，实际加载但 jQuery 加载没有（它包含背景动画）。

这些是我的脚本：

此函数用于淡出内容、加载新内容、更改 url 哈希和淡入：

```
function loadajax(toLoad, rest, div, js) {
    window.location.hash = toLoad;
    div.fadeOut(150, loadContent);

    function loadContent() {
        contentload(toLoad, rest, div, js);
        reappear();
    }

    function reappear() {
        div.fadeIn(1000);
    }

    return false;

} 
```

你可能注意到它调用了另一个函数，这个函数用于加载 html，带有 jQ​​uery 加载。

```
function contentload(fragment, rest, div, js) {
    fragment = fragment.slice(1).replace('!', '')
    div.load((fragment + rest), getJs(js, "js"));
} 
```

是的，这个调用另一个来获取用于新加载内容的 Javascript：

```
function getJs(filename, filetype){
 if (filetype=="js"){ //if filename is a external JavaScript file
  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 }
 else if (filetype=="css"){ //if filename is an external CSS file
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
} 
```

这是负责调用它的代码：

```
$("#horizontal_cssmenu a").click(function () {
        var div = $('#contentsth');

        var toLoad = $(this).attr('href');
        var rest = '?ajax=1';
        var javka = 'js/vertical.js';
        loadajax(toLoad, rest, div, javka);

        return false;
    }); 
```

# android - android 视图中的自定义画布有问题

> ID：13964130
> 
> 赞同：0
> 
> 时间：2012-12-20T01:53:58.717
> 
> 标签：android, android-canvas

我在视图中定义了一个自定义画布，运行时它会绘制背景然后绘制一些图片。背景也是图像。触发`onTouchEvent`方法时，将刷新画布，然后绘制背景然后几张图片，但会留下后期图片在背景上的移动痕迹，我不知道如何清除移动痕迹，如果我给背景分配颜色，就不会留下痕迹，有人可以帮我解决这个问题吗？非常感谢。： D

添加：

```
canvas = new Canvas(bgbitmap); 
```

画背景

```
canvas.drawColor(selectedColor); 
```

如果使用 drawBitmap 绘制背景原因：

```
//                     canvas.drawBitmap(bgbitmap, 0, 0, null);

// draw picutre
                    for (int i = fbmpCount - 1; i >= 0; i--) {
                        FreeBitmap fb = findFreeBmpByPriority(i);
                        if (fb != null)
                            this.canvas.drawBitmap(fb.getBmp(), fb.getXpoint(), fb.getYpoint(),
                                    null);
                    }

        this.invalidate();

// onDraw method
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawBitmap(bgbitmap, 0, 0, null);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:55:28.167

根据我的理解，您必须先清除画布，然后再重新绘制。

```
Canvas.drawColor(Color.WHITE) 
```

# c# - 将字符串附加到 linq-to-sql 查询

> ID：13964131
> 
> 赞同：0
> 
> 时间：2012-12-20T01:54:02.387
> 
> 标签：c#, asp.net, asp.net-mvc, linq-to-sql, asp.net-mvc-4

我有一个基于文档类型的带有一些索引的表单。

我想基于这些索引构建我的 linq-to-sql 查询。用户可能只填写一些索引或全部。

我需要这样的东西

```
Gedi.Models.OperacoesModel.indexMatrix[] IndexMatrixArr = (from a in context.sistema_Documentos
join b in context.sistema_Indexacao on a.id equals b.idDocumento
join c in context.sistema_Indexes on a.idDocType equals c.id
join d in context.sistema_DocType_Index on c.id equals d.docTypeId

where d.docTypeId == idTipo and "BUILT STRING" 

orderby b.idIndice ascending
select new Gedi.Models.OperacoesModel.indexMatrix {
idDocumento = a.id,
idIndice = b.idIndice,
valor = b.valor
}).Distinct().ToArray(); 
```

这个构建的字符串应该在代码的早期部分，比如

字段1 == a 和字段2 == b

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:22:28.260

据我所知，您的目标是动态地创建表达式。而且没有办法只是将字符串放入 linq 查询中并使其在简单的 linq 世界中工作——这是个坏消息。但我也有一个好消息要告诉你——有一些方法可以动态地创建你的查询：[表达式树](http://msdn.microsoft.com/en-us/library/vstudio/bb882637.aspx)、[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

# java - 严重的 Tomcat 崩溃让我很难过

> ID：13964133
> 
> 赞同：2
> 
> 时间：2012-12-20T01:54:28.147
> 
> 标签：java, tomcat

我已经习惯了让我的 tomcat 服务器崩溃。但我认为我根本没有做任何改变，似乎完全破坏了它。工作一分钟，然后不是下一分钟。

我真的希望有人可以在这里提供帮助是 Catalina.out：

```
Dec 20, 2012 1:35:56 AM org.apache.catalina.startup.Embedded initDirs
SEVERE: Cannot find specified temporary folder at 
Dec 20, 2012 1:35:57 AM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.23.
Dec 20, 2012 1:35:57 AM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
Dec 20, 2012 1:35:57 AM org.apache.coyote.http11.Http11AprProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8040
Dec 20, 2012 1:35:57 AM org.apache.coyote.ajp.AjpAprProtocol init
INFO: Initializing Coyote AJP/1.3 on ajp-8042
Dec 20, 2012 1:35:57 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 587 ms
Dec 20, 2012 1:35:57 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Dec 20, 2012 1:35:57 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.33
Dec 20, 2012 1:35:57 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory docs
Dec 20, 2012 1:35:57 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Dec 20, 2012 1:35:57 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory myApp
Dec 20, 2012 1:35:57 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/lhome/me/tomcat6/webapps/myApp/WEB-INF/lib/javax.servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Dec 20, 2012 1:35:58 AM org.apache.coyote.http11.Http11AprProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8040
Dec 20, 2012 1:35:58 AM org.apache.coyote.ajp.AjpAprProtocol start
INFO: Starting Coyote AJP/1.3 on ajp-8042
Dec 20, 2012 1:35:58 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 880 ms
Error Reading TLE line 1: java.lang.Exception: TLE line 1 not valid first line
Error Creating SGP4 Satellite
Dec 20, 2012 1:36:26 AM org.apache.coyote.http11.Http11AprProtocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8040
Dec 20, 2012 1:36:26 AM org.apache.coyote.ajp.AjpAprProtocol pause
INFO: Pausing Coyote AJP/1.3 on ajp-8042
Dec 20, 2012 1:36:27 AM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Dec 20, 2012 1:36:30 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/myApp] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Dec 20, 2012 1:36:30 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] is still processing a request that has yet to finish. This is very likely to create a memory leak. You can control the time allowed for requests to finish by using the unloadDelay attribute of the standard Context implementation.
Dec 20, 2012 1:36:30 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.
Dec 20, 2012 1:36:30 AM org.apache.coyote.http11.Http11AprProtocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8040
Dec 20, 2012 1:36:30 AM org.apache.coyote.ajp.AjpAprProtocol destroy
INFO: Stopping Coyote AJP/1.3 on ajp-8042
Dec 20, 2012 1:37:12 AM org.apache.catalina.startup.Catalina stopServer
SEVERE: Catalina.stop: 
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:422)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:338)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:416) 
```

而且我创建了一个新日志，我以前从未见过它，但它似乎认为它很严重。很长，但在这里：

[我从未见过的大量错误日志](http://www.chemsworks.com/hs_err_pid7696.txt)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:10:40.890

你的 JVM 有 SIGBUS。这要么是硬件问题，要么是低级 JVM 代码错误。

```
siginfo:si_signo=SIGBUS: si_errno=0, 
si_code=2 (BUS_ADRERR), si_addr=0x00007f0a9bb06fe5 
```

一个可疑条目是 -Djava.io.tmpdir= 在您的启动中（即 temp dir 是空字符串）。可以对 JVM 做一些有趣的事情，虽然我没有测试它。可能这样就可以了。

```
jvm_args: -Dcatalina.base=/lhome/me/tomcat6 
-Dcatalina.home=/usr/share/tomcat6 
-Djava.endorsed.dirs= 
-Djava.io.tmpdir= 
-Djava.util.logging.config.file=/lhome/me/tomcat6/conf/logging.properties 
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 
```

底线：**我相信您的硬件出现故障。备份一切。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:39:15.233

炸弹似乎发生在`java.util.zip.ZipFile.getZipMessage()`被调用的本机方法中`getEntry()`。 `ZipFile`遇到错误并试图构造异常消息。在重新加载过程中停止正在运行的 web 应用程序时会发生这种情况。

您是否移动了 .war 文件？这可能会导致问题。

这类问题很难诊断和修复。但是，问题很可能是**java.io.tmpdir 设置不正确**。 [http://efod.se/blog/archive/2011/05/02/java-sigbus](http://efod.se/blog/archive/2011/05/02/java-sigbus)是一个类似的问题。

如果还是不行，使用apt-get升级zlib和OpenJDK，强制`ZipFile.getEntry()`解释：

```
-X:CompileCommand=exclude,java/util/zip/ZipFile,getEntry 
```

正如 OSB Stats 所说，不要相信您的硬件（尽管这不太可能是硬件问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:00:12.330

感谢所有在这里提供帮助的人。

但是我跌倒了，我应该回答我自己的问题。虽然我仍然不完全明白为什么会导致如此严重的异常。问题似乎在于我在我的数据库中删除了程序正在读取的表。这张表充满了程序用来编译其他数据的数据。一旦我重新填充此表，它就很好了。

我不知道为什么这么简单的事情会导致如此多的错误，并且从未在日志中显示为 table not found 错误。但是我只能假设该程序正在尝试使用空白数据运行，而这个人导致了一个严重的错误。

所以再次感谢那些提供帮助的人！

# vb.net - 如何阻止空格键单击按钮

> ID：13964136
> 
> 赞同：2
> 
> 时间：2012-12-20T01:54:53.140
> 
> 标签：vb.net, visual-studio-2008, button, motorola

我正在使用 VS 2008。在 Windows 或智能设备项目中，当按钮当前具有焦点时按空格键将导致单击按钮并引发`Click`事件。是否有任何属性或设置会导致它跳过它以使空格键不会导致按钮单击？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:07:48.030

您可以使用 Form 的 KeyPreview 属性和 KeyDown 事件在空格键传递给按钮之前捕获空格键，如果按钮具有焦点，则可以将按键标记为已处理以防止其冒泡：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        MessageBox.Show("Button Clicked")
End Sub

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Me.KeyPreview = True
End Sub

Private Sub Form1_KeyDown(sender As Object, e As KeyEventArgs) Handles MyBase.KeyDown
    If e.KeyCode = Keys.Space And Button1.Focused Then
        e.Handled = True
    End If
End Sub 
```

# regex - 如何使用正则表达式抓取第八个单词

> ID：13964137
> 
> 赞同：5
> 
> 时间：2012-12-20T01:54:54.287
> 
> 标签：regex, extract, token

我见过的正则表达式示例的新手显示搜索非常具体的异常，即。特定的字母组合。

我想要的是抓住第 8 个单词，不管前面是什么，不管那些单词是什么。

所以空格是指定“单词”的地方

采样线将是

9 月 20 日 11:13:18 10.50.3.100 9 月 20 日 11:13:15 DC1ASM1.dcl.greendotcorp.com Blah Blah Blah

我想提取主机名，在本例中为“DC1ASM1.dcl.greendotcorp.com”，它总是以“月、日、时间戳、IP、月、日、时间戳”模式开头。

谢谢雷克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:04:42.337

我不是 100% 确定您使用的是什么版本或风格的正则表达式，所以我会避免后视，而是使用非捕获组：

```
^(?:\S+?\s){7}(\S+) 
```

绑定到行首，忽略*[any character but whitespace] 1+ times] 然后 [one single whitespsace character]*的 7 个连续模式。

但是，如果您选择了，您可以通过使用`\w`而不是更具体地了解“单词”。`\S`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:04:31.533

此表达式将捕获命名组中的主机名`HostName`。它假设总是只有一个空格。

```
^([^ ]+ ){7}(?<HostName>[^ ]+) 
```

两个句柄多个空格使用以下表达式。

```
^([^ ]+ +){7}(?<HostName>[^ ]+) 
```

要同时支持选项卡，请使用以下表达式。

```
^([^ \t]+[ \t]+){7}(?<HostName>[^ \t]+) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:06:27.463

尝试**类似**：

```
regex = "([^\s]+\s+){7}(?<eighthword>[^\s]+)" 
```

# javascript - Javascript：将参数从多个函数传递给 1 个函数

> ID：13964138
> 
> 赞同：2
> 
> 时间：2012-12-20T01:54:59.090
> 
> 标签：javascript, function, arguments

我有几个函数可以评估一些变量并得出结果

例如：

```
function first(){
   //variable declarations
   var result1 = a+b
}

function two(){
   //variable declarations
   var result2 =c+d 
} 
```

我想将这两个结果都传递给另一个函数

```
function three( result1, result2 ) {
   var finalResult = result1 + result2;
} 
```

我的问题是我从哪里调用函数 3。因为实际上我有大约 10 个函数需要通过结果。我是否在每个末尾都放了三个（结果＃）？？？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:59:51.130

```
function first() {
    return a + b;
}

function two() {
    return c + d;
}

function three(result1, result2) {
    return result1 + result2;
} 
```

Call it:

```
var finalResult = three(first(), two()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:00:38.070

A better way is to pass an **object**. It will make sure if you want to put more details, you wont have to add more arguments in the function and make it more **readable**.

```
function first(){
    return "value of one";
} 

function second(){
    return "value of two";
}

function three(data){
    var finalResult = data.first + data.second;
} 
```

ANd call it like:

```
var data = {};
data.first = first();
data.second = second();

three(data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:00:50.677

Here is one approach you could take, although the question is a little vague.

```
function first(){
 return a+b;
} 

function two(){
 return c+d;
}

function three(){
 var finalResult = first() + two();
} 
```

Or, if you didn't want the value in a function, you could do this:

```
<script>
 var results = first() + two();
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T02:02:04.010

不要打扰全局结果，即`result1`等`result2`。只需返回数据并在准备就绪时调用 3

```
function first(){
 return a+b;
} 

function two(){
  return c+d;
}

function three(){
     return (first() + two());
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T02:01:50.507

```
function one( a, b ) {
   var result1 = a + b;
   return result1;
}

function two( c, d ) {
   var result2 = c + d;
   return result2;
}

function three( a, b ) {
   var finalResult = a + b;
   return finalResult;
} 
```

调用它使用`three( one(), two() );`

# php - 页面重定向（用户友好的 URL）

> ID：13964139
> 
> 赞同：3
> 
> 时间：2012-12-20T01:55:16.257
> 
> 标签：php, .htaccess, mod-rewrite, redirect, get

我将如何显示动态内容，例如带有 url 语法的个人资料页面

> mysite.com/users/user1
> mysite.com/users/user2
> mysite.com/users/user3

无需为每个用户提供不同的页面或目录。我希望有一种方法可以在用户目录中包含类似 index.php 的文件，并让它根据 url 的 user1、user2、user3 部分显示适当的用户内容。

我知道这很常见，但我不知道该怎么做，或者它会被称为谷歌吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:05:23.213

如果您正在运行 apache，您可能需要查看.htaccess 文件的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)规则。

在以下示例中，我将指向`/users/user*`站点根目录中名为`users.php`. 你注意到`([^/\.]+)`. 这是一个“包罗万象”的正则表达式，它允许我为我的查询字符串创建一个变量（例如：）`?id=$1`。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^users/user([^/\.]+) users.php?id=$1 [L]
</IfModule> 
```

然后在我的`users.php`我可以检索变量为：

`$id = $_GET['id']`

这将允许我捕获和处理只有 1 个文件的所有用户 URL。

**注意：**这只是一个例子。它必须建立在它的基础上，但它对你来说可能是一个很好的起点

# pointers - 在一段或更少的段落中，指针的目的和好处是什么？

> ID：13964143
> 
> 赞同：3
> 
> 时间：2012-12-20T01:55:47.973
> 
> 标签：pointers, computer-science

见标题。这就是我要问的。对于这个问题，网络没有太多简洁的答案。请记住堆栈与堆。向一个完整的初学者解释。只是寻找“为什么”而不是“如何”。

*编辑* 指针是一种将大对象从堆栈中取出的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:59:28.397

When passing a huge object from one piece of your program to another to be worked on like an entire class for example or something with a large amount of data like an image or video passing every single bit of data would be very inefficient. Instead you can just pass a tiny little memory address (pointer) that the receiving part of your program can then use to get to the object to be worked on.

Aside from that huge aspect, they offer a lot of flexibility but I need more than a paragraph for that.

When you get into managed code like C# or Java **EVERYTHING** is done with pointers/references but it's all behind the scenes and you don't have to deal with them like you would in C++ or another similar language. But it's still crucial to understand how they work.

Edit in response to:

> "why would I pass a large object around if I don't need to work on it?"

You wouldn't. However; Correct me if I'm straying from what your asking but what you'll learn if you continue into Computer Science is that a piece of your program should be as simple as possible it should only do 1 thing. Commonly known as the [Single Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle) this dictates that you will have many seemingly tiny parts of your program that will all work together to accomplish the over arching goal. That means that a lot of those tiny pieces are going to need to work on the same objects, the same data and use the same tools to get the job done. Lets look at a hypothetical.

You're coding a simple image editing application.You're going to need a cropping tool, a paint brush tool, a selection tool, and a re-size tool. Each of these tools are going to need their own place in your program (a class or more likely many classes that work together) and that class will have many smaller pieces (methods/functions and other things) that work together to accomplish the goal of that class. Every single one of these classes and methods is most likely going to need to look at or modify the image data. With a pointer you can provide them with a memory address instead of making an entire copy of the image. That way when one of the classes or methods makes a change to it you don't need to worry about managing all these copies and making sure they all get the same change.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T02:06:34.643

它允许您执行按引用传递/共享数据结构，它有两大特点：通过不进行复制来节省内存和 CPU 开销，以及通过更改共享数据来提供复杂的通信模式。

# python - 给定python中的文件资源字典，是否有一种简单的方法来搜索谷歌驱动器文件

> ID：13964144
> 
> 赞同：0
> 
> 时间：2012-12-20T01:55:49.157
> 
> 标签：python, google-drive-api

我看到了如何使用带有 q 参数的 files.list 来查找文件。我有一个文件资源的情况，例如在这里找到：[https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

但是，我的文件资源（python 字典）没有 fileid，只有其他描述符，如标题、描述、mimetype 等。我想找到与我的文件参数匹配的任何文件。q 接受与字典不同格式的查询字符串。是否有一些功能/实用程序可以将我的字典转换为适当的查询字符串？否则，我会发现自己检查存在哪些参数并手动构建查询字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:29:47.273

恐怕您必须手动创建 q 参数。对不起。我认为如果您编写它，这将是一个非常有用的库。

# php - 本地服务器上的 PHP fwrite 和 NTFS 日志记录

> ID：13964148
> 
> 赞同：0
> 
> 时间：2012-12-20T01:56:09.967
> 
> 标签：php, windows, fwrite, ntfs

如果我使用 ntfs loggong（如我的本地 xampp 服务器）在 Windows 服务器上 fwrite 'w' 文件，有效地覆盖它（vrs 'a' append），ntfs 服务器是否会秘密地将我的旧文件的历史副本保存在硬盘？如果是这样，我可以在 php/js 中擦除它吗？

```
$filename = 'd:\\xxx.txt';
$handle = fopen($filename, 'w'); 
fwrite($handle, $info); 
```

我可以在 php 中获取 FILE_APPEND_DATA 吗？也许通过 js/php 库？

linux web 服务器上是否有自动历史记录（通过 fwrite 到我网站的根目录）？（在这里，我假设 GoDaddy 或任何定期备份的人，但我并不是说这里）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:36:11.843

我假设您指的是文件版本控制。NTFS 支持卷影副本，这是文件系统的块级快照，以帮助备份文件系统。对于支持它的 Windows 版本，您可以恢复文件的先前版本。使用 Windows 内置的文件恢复。由于这些是块快照，因此无法删除文件的单个版本，但它也不意味着是一个强大的“记录该文件的所有版本”系统。快照是在重要的系统相关事件之前和某些预定的场合拍摄的，因此无法保证是否发生了捕获特定版本文件的快照。

没有内置的 linux 操作系统机制来保存文件的版本，GoDaddy 或我所知道的任何其他托管公司也不会定期备份文件（可能在共享服务器上除外）。这些是您必须为自己支付额外费用并自行设置的东西，通常需要支付额外费用。

# python - 不是动态选择字段 WTFORMS 的有效选择

> ID：13964152
> 
> 赞同：52
> 
> 时间：2012-12-20T01:56:52.593
> 
> 标签：python, flask, wtforms

我目前正在使用 WTFORMS 创建一个动态选择字段，但是它从不提交并且验证失败并出现以下错误。

```
Not a valid choice 
```

我的字段是这样创建的：

```
area = SelectField() 
```

在视图中，我正在从数据库中获取选项，如下所示：

```
form = MytestForm()
form.area.choices = [(a.id, a.name) for a in Area.objects.all()] 
```

但是，如果我创建静态选项，它会起作用。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-20T03:37:19.567

我的猜测是，`Area.id`当`int`数据从客户端返回时，WTForms 会将其视为*字符串*，除非将可调用对象传递给构造函数的`coerce`关键字参数[`wtforms.fields.SelectField`](http://wtforms.readthedocs.org/en/latest/fields.html?highlight=fields.selectfield#wtforms.fields.SelectField)：

```
area = SelectField(coerce=int) 
```

或者，如果您使用的是 SQLAlchemy，则可以使用[`wtforms.ext.sqlalchemy.fields.QuerySelectField`](http://wtforms.readthedocs.org/en/latest/ext.html?highlight=wtforms.ext.sqlalchemy.fields.queryselectfield#wtforms.ext.sqlalchemy.fields.QuerySelectField)（[`wtforms_sqlalchemy`](https://github.com/wtforms/wtforms-sqlalchemy)如果您使用的是 WTForms 3+）：

```
area = QuerySelectField(query_factory=Area.objects.all,
                            get_pk=lambda a: a.id,
                            get_label=lambda a: a.name) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-20T09:30:01.440

以下是在没有 QuerySelectField 的情况下如何解决它。

这是我的做法：

```
years = [(str(y), y) for y in reversed(range(1950, 2013))]
years.insert(0, ('','year'))
year = wt.SelectField(choices=years) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-16T09:19:10.807

请记住在设置 Form 类时还要输入可用的选项。

```
class MyForm(FlaskForm):
    sel = SelectField(coerce=int, label="MyLabel", choices=my_choices)
    .... 
```

选择可以是这样的：

```
my_choices = [x.id for x in get_products()] 
```

调用函数`pre_validate`时脚本中`/wtforms/fields/core.py`的函数出现异常`validate_on_submit()`

# javascript - Get JavaScript object from array of objects by value of property

> ID：13964155
> 
> 赞同：1123
> 
> 时间：2012-12-20T01:57:14.967
> 
> 标签：javascript, arrays

Let's say I have an array of four objects:

```
var jsObjects = [
   {a: 1, b: 2}, 
   {a: 3, b: 4}, 
   {a: 5, b: 6}, 
   {a: 7, b: 8}
]; 
```

Is there a way that I can get the third object (`{a: 5, b: 6}`) by the value of the property `b` for example without a `for...in` loop?

* * *

## 回答 #1

> 赞同：1588
> 
> 时间：2012-12-20T02:01:22.363

`Filter` array of objects, which property matches value, returns array:

```
var result = jsObjects.filter(obj => {
  return obj.b === 6
}) 
```

See the [MDN Docs on Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)

```
const jsObjects = [
  {a: 1, b: 2}, 
  {a: 3, b: 4}, 
  {a: 5, b: 6}, 
  {a: 7, b: 8}
]

let result = jsObjects.filter(obj => {
  return obj.b === 6
})

console.log(result)
```

`Find` the value of the first element/object in the array, otherwise `undefined` is returned.

```
var result = jsObjects.find(obj => {
  return obj.b === 6
}) 
```

See the [MDN Docs on Array.prototype.find()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)

```
const jsObjects = [
  {a: 1, b: 2}, 
  {a: 3, b: 4}, 
  {a: 5, b: 6}, 
  {a: 7, b: 8}
]

let result = jsObjects.find(obj => {
  return obj.b === 6
})

console.log(result)
```

* * *

## 回答 #2

> 赞同：415
> 
> 时间：2016-02-14T20:51:13.230

```
jsObjects.find(x => x.b === 6) 
```

来自 MDN：

> [`find()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)如果数组中的元素满足提供的测试功能，则该方法返回数组中的值。否则`undefined`返回。

* * *

旁注：`find()`旧浏览器（如 IE）不支持方法和箭头函数，所以如果你想支持这些浏览器，你应该使用[Babel](https://babeljs.io/)转译你的代码。

* * *

## 回答 #3

> 赞同：189
> 
> 时间：2012-12-20T02:58:29.240

我不知道您为什么反对 for 循环（大概您的意思是 a `for loop`，而不是专门的`for..in`），它们快速且易于阅读。无论如何，这里有一些选择。

***对于循环：***

```
function getByValue(arr, value) {

  for (var i=0, iLen=arr.length; i<iLen; i++) {

    if (arr[i].b == value) return arr[i];
  }
} 
```

***。筛选***

```
function getByValue2(arr, value) {

  var result  = arr.filter(function(o){return o.b == value;} );

  return result? result[0] : null; // or undefined

} 
```

***.forEach***

```
function getByValue3(arr, value) {

  var result = [];

  arr.forEach(function(o){if (o.b == value) result.push(o);} );

  return result? result[0] : null; // or undefined

} 
```

另一方面，如果您确实是指 for..in 并且想要查找具有任何值为 6 的属性的对象，那么您必须使用 for..in 除非您将名称传递给检查。

**例子**

```
function getByValue4(arr, value) {
  var o;

  for (var i=0, iLen=arr.length; i<iLen; i++) {
    o = arr[i];

    for (var p in o) {
      if (o.hasOwnProperty(p) && o[p] == value) {
        return o;
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2016-11-02T09:57:55.620

**达到要求的方法：**

1.  使用[Array.find()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)方法**：**

```
const jsObject = [
   {a: 1, b: 2}, 
   {a: 3, b: 4}, 
   {a: 5, b: 6}, 
   {a: 7, b: 8}
];

const filteredResult = jsObject.find((e) => e.b == 6);

console.log(filteredResult);
```

2.  使用[Array.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)方法**：**

```
const jsObjects = [
   {a: 1, b: 2}, 
   {a: 3, b: 4}, 
   {a: 5, b: 6}, 
   {a: 7, b: 8}
];

const filterObj = jsObjects.filter((e) => e.b == 6);

console.log(filterObj[0]);
```

3.  使用[for...in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in)循环**：**

```
const jsObjects = [
   {a: 1, b: 2}, 
   {a: 3, b: 4}, 
   {a: 5, b: 6}, 
   {a: 7, b: 8}
];

for (const i in jsObjects) {
  if (jsObjects[i].b == 6) {
    console.log(jsObjects[i]);
  }
}
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2018-03-30T05:38:53.110

**好的，**有几种方法可以做到这一点，但让我们从最简单和最新的方法开始，这个函数被称为`find()`.

使用时要小心`find`，因为即使 IE11 也不支持它，所以它需要被转译......

所以你有这个对象，正如你所说：

```
var jsObjects = [
   {a: 1, b: 2}, 
   {a: 3, b: 4}, 
   {a: 5, b: 6}, 
   {a: 7, b: 8}
]; 
```

你可以编写一个函数并像这样得到它：

```
function filterValue(obj, key, value) {
  return obj.find(function(v){ return v[key] === value});
} 
```

并使用这样的功能：

```
filterValue(jsObjects, "b", 6); //{a: 5, b: 6} 
```

同样在**ES6**中用于更短的版本：

```
const filterValue = (obj, key, value)=> obj.find(v => v[key] === value); 
```

此方法仅返回匹配的第一个值...，为了更好的结果和浏览器支持，您可以使用`filter`：

```
const filterValue = (obj, key, value)=> obj.filter(v => v[key] === value); 
```

我们将返回`[{a: 5, b: 6}]`...

此方法将返回一个数组而不是...

您也可以简单地使用 for 循环，创建一个这样的函数：

```
function filteredArray(arr, key, value) {
  const newArray = [];
  for(i=0, l=arr.length; i<l; i++) {
    if(arr[i][key] === value) {
      newArray.push(arr[i]);
    }
  }
 return newArray;
} 
```

并这样称呼它：

```
filteredArray(jsObjects, "b", 6); //[{a: 5, b: 6}] 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2017-09-07T11:35:50.667

请参阅本文档[***`Array.prototype.find()`***](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)

***例子：***

```
var inventory = [
    {name: 'apples', quantity: 2},
    {name: 'bananas', quantity: 0},
    {name: 'cherries', quantity: 5}
];

function findCherries(fruit) { 
    return fruit.name === 'cherries';
}

console.log(inventory.find(findCherries)); 
// { name: 'cherries', quantity: 5 } 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2015-10-16T18:15:36.910

Using underscore.js:

```
var foundObject = _.findWhere(jsObjects, {b: 6}); 
```

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2014-04-04T07:39:54.980

看起来在 ECMAScript 6 提案中有`Array`方法`find()`和`findIndex()`. MDN 还提供了 polyfill，您可以将其包含在内以在所有浏览器中获取这些功能。

[`find()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)：

```
function isPrime(element, index, array) {
    var start = 2;
    while (start <= Math.sqrt(element)) {
        if (element % start++ < 1) return false;
    }
    return (element > 1);
}

console.log( [4, 6, 8, 12].find(isPrime) ); // undefined, not found
console.log( [4, 5, 8, 12].find(isPrime) ); // 5 
```

[`findIndex()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)：

```
function isPrime(element, index, array) {
    var start = 2;
    while (start <= Math.sqrt(element)) {
        if (element % start++ < 1) return false;
    }
    return (element > 1);
}

console.log( [4, 6, 8, 12].findIndex(isPrime) ); // -1, not found
console.log( [4, 6, 7, 12].findIndex(isPrime) ); // 2 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2012-12-20T02:03:03.060

如果我理解正确，您想在数组中找到`b`属性为的对象`6`？

```
var found;
jsObjects.some(function (obj) {
  if (obj.b === 6) {
    found = obj;
    return true;
  }
}); 
```

或者，如果您使用下划线：

```
var found = _.select(jsObjects, function (obj) {
  return obj.b === 6;
}); 
```

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2015-12-08T17:10:22.203

如果您正在寻找单个结果而不是数组，我可以建议减少吗？

这是一个简单的 'ole javascript 解决方案，如果存在则返回匹配的对象，如果不存在则返回 null。

```
var result = arr.reduce(function(prev, curr) { return (curr.b === 6) ? curr : prev; }, null); 
```

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2018-01-16T08:07:58.103

您可以将它与箭头功能一起使用，如下所示：

```
var demoArray = [
   {name: 'apples', quantity: 2},
   {name: 'bananas', quantity: 0},
   {name: 'cherries', quantity: 5}
];

var result = demoArray.filter( obj => obj.name === 'apples')[0];
console.log(result);
// {name: 'apples', quantity: 2} 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2016-12-04T11:37:58.360

如何使用`_.find(collection, [predicate=_.identity], [fromIndex=0])`lo [-dash](https://lodash.com/docs/4.17.2)通过对象属性值从对象数组中获取对象。你可以这样做：

```
var o = _.find(jsObjects, {'b': 6}); 
```

论据：

```
collection (Array|Object): The collection to inspect.
[predicate=_.identity] (Function): The function invoked per iteration.
[fromIndex=0] (number): The index to search from. 
```

退货

```
(*): Returns the matched element (in your case, {a: 5, b: 6}), else undefined. 
```

在性能方面，`_.find()`它更快，因为它只提取第一个具有属性的对象，`{'b': 6}`另一方面，如果假设您的数组包含多个具有匹配属性集（键：值）的对象，那么您应该考虑使用`_.filter()`方法。因此，在您的情况下，由于您的数组具有具有此属性的单个对象，因此我将使用`_.find()`.

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2018-02-15T19:31:02.777

[使这个答案](https://stackoverflow.com/a/13964619/3093731)中最好/最快的部分更加可重用和清晰：

```
function getElByPropVal(myArray, prop, val){
    for (var i = 0, length = myArray.length; i < length; i++) {
        if (myArray[i][prop] == val){
            return myArray[i];
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-02-09T08:18:14.867

```
var result = jsObjects.filter(x=> x.b === 6); 
```

会更好，在过滤器中使用 return 有时你不能得到结果（我不知道为什么）

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-04-27T10:08:42.703

通过特定属性值从对象数组中获取第一个对象：

```
function getObjectFromObjectsArrayByPropertyValue(objectsArray, propertyName, propertyValue) {
  return objectsArray.find(function (objectsArrayElement) {
    return objectsArrayElement[propertyName] == propertyValue;
  });
}

function findObject () {
  var arrayOfObjectsString = document.getElementById("arrayOfObjects").value,
      arrayOfObjects,
      propertyName = document.getElementById("propertyName").value,
      propertyValue = document.getElementById("propertyValue").value,
      preview = document.getElementById("preview"),
      searchingObject;

  arrayOfObjects = JSON.parse(arrayOfObjectsString);

  console.debug(arrayOfObjects);

  if(arrayOfObjects && propertyName && propertyValue) {
    searchingObject = getObjectFromObjectsArrayByPropertyValue(arrayOfObjects, propertyName, propertyValue);
    if(searchingObject) {
      preview.innerHTML = JSON.stringify(searchingObject, false, 2);
    } else {
      preview.innerHTML = "there is no object with property " + propertyName + " = " + propertyValue + " in your array of objects";
    }
  }
}
```

```
pre {
  padding: 5px;
  border-radius: 4px;
  background: #f3f2f2;
}

textarea, button {
  width: 100%
}
```

```
<fieldset>
  <legend>Input Data:</legend>
  <label>Put here your array of objects</label>
  <textarea rows="7" id="arrayOfObjects">
  [
    {"a": 1, "b": 2},
    {"a": 3, "b": 4},
    {"a": 5, "b": 6},
    {"a": 7, "b": 8, "c": 157}
  ]
  </textarea>

  <hr>

  <label>property name: </label> <input type="text" id="propertyName"  value="b"/>
  <label>property value: </label> <input type="text" id="propertyValue" value=6 />

</fieldset>
<hr>
<button onclick="findObject()">find object in array!</button>
<hr>
<fieldset>
  <legend>Searching Result:</legend>
  <pre id="preview">click find</pre>
</fieldset>
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-04-10T12:26:19.703

Using find with bind to pass specific key values to a callback function.

```
 function byValue(o) { 
       return o.a === this.a && o.b === this.b; 
   };   

   var result = jsObjects.find(byValue.bind({ a: 5, b: 6 })); 
```

* * *

## 回答 #17

> 赞同：-31
> 
> 时间：2015-07-23T04:54:33.383

```
var jsObjects = [{a: 1, b: 2}, {a: 3, b: 4}, {a: 5, b: 6}, {a: 7, b: 8}]; 
```

要访问第三个对象，请使用：`jsObjects[2];`
要访问第三个对象 b 值，请使用：`jsObjects[2].b;`

# asp.net-mvc - Portable Areas in MVC 4

> ID：13964156
> 
> 赞同：0
> 
> 时间：2012-12-20T01:57:23.793
> 
> 标签：asp.net-mvc, portability, asp.net-mvc-areas, mvccontrib

Has anyone gotten Portable Areas working in MVC 4?

I have gotten PAs working in MVC 3 by following [this tutorial](http://elegantcode.com/2012/04/06/mvc-portable-areas/).

However, when changing the consuming application to MVC 4, Portable Areas no longer work. It also seems that it doesn't matter if the PA is itself an MVC 3 or 4 application.

Thanks for reading.

Aaron

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:25:33.613

是的，我有。听起来我和你的情况类似。我有一个更新到 MVC4 的 MVC3 项目。我同时更新了区域和项目。虽然升级本身有点涉及，但一旦完成该部分，我就可以毫无问题地使用我的区域。我使用以下 URL 来帮助升级过程

[http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

[Asp.Net MVC3 到 MVC4 升级工具？](https://stackoverflow.com/questions/12655808/asp-net-mvc3-to-mvc4-upgrade-tool)

[http://ivanz.com/2012/08/20/guide-for-migrating-an-asp-net-mvc-solution-to-net-4-5-and-asp-net-mvc-4/](http://ivanz.com/2012/08/20/guide-for-migrating-an-asp-net-mvc-solution-to-net-4-5-and-asp-net-mvc-4/)

# spring - 尝试从另一个项目导入应用程序上下文时出现 BeanCreationException

> ID：13964161
> 
> 赞同：0
> 
> 时间：2012-12-20T01:58:25.763
> 
> 标签：spring, hibernate, jsf, exception

所以我正在努力学习jsf、maven、spring和hibernate。我最近有一个 web 项目从 ui 中获取数据，将其传递给托管 bean、域对象，然后保存到 db。但现在我想更好地构建事物并拥有两个独立的项目。一个用于我的 ui 和托管 bean（这是我的 webapp 项目）。另一个用于我的域和业务逻辑（这是一个普通的 java 项目）。我有两个应用程序上下文文件（web-applicationContext.xml 和 core-applicationContext.xml）。我的 web-applicationContext 在服务器启动期间被拉出，我正在尝试将 core-applicationContext 导入我的 web。但是当我启动我的服务器并尝试访问该站点时，我得到了这个......

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerManagedBean' defined in ServletContext resource [/WEB-INF/web-applicationContext.xml]: Cannot resolve reference to bean 'customerServiceBean' while setting bean property 'customerService'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerServiceBean' is defined
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:332)
    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:43)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1098)
    at org.springframework.beans.factory.access.el.SpringBeanELResolver.getValue(SpringBeanELResolver.java:56)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:161)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerServiceBean' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:553)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 52 more 
```

这是我的 web-applicationContext

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context 
  http://www.springframework.org/schema/context/spring-context-2.5.xsd
  http://www.springframework.org/schema/tx 
  http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <import resource="classpath*:/resources/core-applicationContext.xml" />

    <bean id="customerManagedBean" class="com.test.managedbean.CustomerManagedBean"
        scope="request">
        <property name="customerService" ref="customerServiceBean" />
        <property name="customerServiceDTO" ref="customerServiceDTOBean" />
    </bean>
</beans> 
```

这是我的核心应用上下文

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context 
  http://www.springframework.org/schema/context/spring-context-2.5.xsd
  http://www.springframework.org/schema/tx 
  http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <bean id="customerDao" class="com.test.repository.CustomerDAO">
        <property name="sessionFactory" ref="mySessionFactory" />
    </bean>

    <bean id="customerServiceBean" class="com.test.service.CustomerService">
    </bean>
    <bean id="customerServiceDTOBean" class="com.test.service.CustomerServiceDTO">
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/scottdb" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.test.domain.Customer</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="mySessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />
</beans> 
```

这是我的一些 web.xml

```
 <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
       <param-value>
          /WEB-INF/web-applicationContext.xml
       </param-value>
</context-param> 
```

顺便说一句，我的 web pom 依赖于我的核心，这是在 web pom.xml 中定义的。如果需要，我可以发布。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.test</groupId>
    <artifactId>test-web</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>test-web Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.13</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.13</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.6</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-ehcache</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>com.test</groupId>
            <artifactId>test-core</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>test-web</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:22:23.127

我想`core-applicationContext.xml`没有导入，因为导入语句是错误的。尝试

```
<import resource="classpath:/resources/core-applicationContext.xml" /> 
```

或者

```
<import resource="classpath:core-applicationContext.xml" /> 
```

我不确定您的项目是如何组织的。请参阅[编写基于 XML 的配置元数据](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-xml-import)以供参考。

此外，如果您在其中声明的 bean 中放置一个断点，`core-applicationContext.xml`您将看到 Spring 是否实例化它们。

# sharepoint - Overriding square.gif in Sharepoint

> ID：13964163
> 
> 赞同：0
> 
> 时间：2012-12-20T01:58:35.907
> 
> 标签：sharepoint, sharepoint-2010, web-parts

I currently have a list of links to external web sites on a homepage in a summary web part view. These links include Google, the company's website, newspaper sites etc. Instead of the bullet point (square.gif) that Sharepoint uses, I want an actual logo of the website that it links to.

I have tried adding columns like 'type' but it just displays an image saying it links to another webpage, which I don't want.

I came across this [thread](https://stackoverflow.com/questions/2822550/overridding-sharepoints-square-gif-and-setrect-gif): The very last answer looks like something I could use:

```
 <script language="javascript" type="text/javascript">
    var arrElements = document.getElementsByTagName("img");
    for (var i=0; i<arrElements.length; i++) {
            //get pointer each image element:
            var element=arrElements[i];
            //check for a source with /images/square.gif from this site:
            if (element.getAttribute('src') == 
                      "http://www.MY-SITE-NAME.com/_layouts/images/square.gif") {
                //found... change it's src to our new image:
                element.setAttribute('src', 'http://www.MY-SITE-NAME.com/MY-LOCATION/MY-CUSTOM-BULLET.gif');
            }
        }
</script> 
```

I need to change where it sets each point to the same picture, to javascript looking at each website and retrieving the logo thumbnail (something like the little picture in the tab at the top of the browsers).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:34:40.500

我相信你需要 jQuery 的力量。这应该会让你更进一步：

```
<html>
 <head>
  <title> New Document </title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
 </head>

 <body>
<ul id="myList">
    <li><a href="http://www.google.gr">google</a></li>  
    <li><a href="http://news.in.gr">in news</a></li>    
    <li><a href="http://www.star.gr">star</a></li>  
</ul>
<script type="text/javascript">
$('#myList li').each(function() {
    var href = $(this).children("a").prop("href");
    var discImage = "url('" + href + "favicon.ico')";
    // alert(discImage );
    $(this).css("list-style-image", discImage);
});
</script>
</body>
</html> 
```

favicon 是（可能）唯一在所有站点中具有相同名称的图像，但并不总是相同的大小（例如检查谷歌）。

现场演示在这里--> [http://jsfiddle.net/Mt7XA/](http://jsfiddle.net/Mt7XA/)享受！

# java - Alternative to IdentityHashMap where value pairings are not required?

> ID：13964164
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:58:40.050
> 
> 标签：java

I'm maintaining a piece of software that is using an `IdentityHashMap` to store a list of objects as the `key`, but I noticed that everywhere in the code just populates the paired `value` with null and nothing ever seems to reference the `value` either. This feels wrong to me, I don't know why a map is being used when the value being stored is effectively ignored.

Based on my observations, the map key is being used to store/compare objects and the previous author is using `contains` before populating the map to make sure no attempts to add duplicate objects are made.

I'm not familiar with all the different data structures in Java, but I'm guessing a `collection` is better suited for this purpose. I came to `HashSet` because the order doesn't matter and we don't want duplicates.

Where you guys come in is I'm wondering if my thought process is correct. Is there perhaps something I may not be considering as to why the original author went with `IdentityHashMap`? Would `HashSet` be the appropriate alternative where the value pairings are not required? Are there any performance considerations? (eg. is `IdentityHashMap` actually faster than a `HashSet` in this context?)

If `HashSet` isn't the correct data structure, what is?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:04:15.850

[`IdentityHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/IdentityHashMap.html)用于`==`确定两个对象是否相同，而[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)使用`equals`.

如果您想要 a与 a`Set`具有相同的语义`IdentityHashMap`，您可能希望查看[`Collections.newSetFromMap`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#newSetFromMap%28java.util.Map%29).

```
Set<T> identityHashSet = Collections.newSetFromMap(new IdentityHashMap<T, Boolean>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:05:13.710

在此处使用 a`HashSet`会提供不同的行为。听起来好像`IdentityHashMap`是用于检查地图中是否存在具有相同标识的对象。如果您使用 a `HashSet`，则该`contains`方法用于`equals`比较（其中 as`IdentityHashMap`使用`==`）。

在不了解该问题的情况下，我无法推测为什么要这样做，但要回答您的问题， a`HashSet`不会是等效的替代品。

如果您想使用一个集合，因为使用带有空值的映射似乎不正确（看起来确实有点不干净），请考虑将对象包装在[identity equivalence](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html#identity%28%29)中。然后他们的`equals`方法将委托给`==`.

# javascript - problems with type and format out of a jQuery .map() function

> ID：13964165
> 
> 赞同：0
> 
> 时间：2012-12-20T01:58:45.077
> 
> 标签：javascript, json, jquery, types, jquery-ui-autocomplete

I am trying to insert selections from a second data source into an Autocomplete dropdown. Both 1st and 2d source fetches are via ajax. I crafted and hard coded a JSON array that works to insert 2d source data into Autocomplete's dropdown. It passes the jsonLint test. The format is the following:

```
[{"label":"New York, Bronx, Bronx County, New York, United States","value":"Bronx, Bronx County, New York, United States"},
{"label":"New York, Brooklyn, Kings County, New York, United States","value":"Brooklyn, Kings County, New York, United States", }] 
```

I'm having major trouble creating code to put variable data into that type and format. The database currently contains JSON strings. I use PHP's json_encode() to create the data object passed to the browser. The database entries could be changed, but they now look like:

```
"label":"New York, Bronx, Bronx County, New York, United States","value":"Bronx, Bronx County, New York, United States" 
```

It seems that 1\. the JSON strings don't get changed to objects, and 2\. some extraneous, unknown characters get inserted somehow. However, I'm a novice, especially with functions and objects. Here is the jQuery/Javascript, plus some comments about the state of the data at various points.

```
var boroughData = function() {
    $.ajax({
        //normal stuff like url:, dataType:, etc. It works.
        success: function (data){
            boroughData = $.map( data, function (item){
                //data is JSON, but info inside extra " ", like Object { boroughString=""label":"Dallas, Cockre..., Texas, United States""}
                // # response like [{"boroughString":"\"label\":\"Dallas, Cockrell Hill, Dallas County, Texas, United States\", . . ."}]
                return item.boroughString;//returns JSON strings, not objects, in an array
            });
            alert(jQuery.isArray(boroughData)  + "|bD1"); //true
            console.log(boroughData); //array containing JSON strings in red
        } //closes success: for boroughData
    }); //closes ajax for boroughData
}(); //closes boroughData and (); executes it
alert(jQuery.isArray(boroughData)  + "|bD2"); //false
alert(boroughData + "|bD3"); //"label":"Dallas, Cockrell Hill, Texas", "value":"Dallas, Cockrell Hill, Texas","label":"Dallas, Downtown Dallas, Texas", "value":"Dallas, etc.
alert(JSON.parse(boroughData) + "|bD4");//SyntaxError: JSON.parse: unexpected non-whitespace character after JSON data 
```

Note that the isArray test at bD1 is true and the isArray test at bD2 is false, and the only thing that happens between them is closing off the function and the ajax. Also note the comment line with the hash # mark that documents the seemingly extra " " marks.

How do I get the boroughData function to output a JSON array with the format that I showed in the first code box above? Please make your advice specific and with code. I'm a novice and don't follow general instructions well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:35:49.280

IMO 您的函数不返回值。我不确定你的方式是否真的正确执行功能，但相信如此:)

```
 function boroughData () {
    $.ajax({
        success: function (data){
            boroughData = $.map( data, function (item){
                return item.boroughString;//returns JSON strings, not objects, in an array
            });
            alert(jQuery.isArray(boroughData)  + "|bD1"); //true
            console.log(boroughData); 
        } 
    });
    return boroughData; // it's not good practice to use the same name for local variable... 
    }(); 
    alert(jQuery.isArray(boroughData)  + "|bD2"); //false
    alert(boroughData + "|bD3");
    alert(JSON.parse(boroughData) + "|bD4"); 
```

# image - WinRT App with High resolution background images

> ID：13964167
> 
> 赞同：1
> 
> 时间：2012-12-20T01:58:53.270
> 
> 标签：image, background, windows-runtime, resolution

I'm working on a WinRT App that has multiple pages using the Basic Page template. Each page has 1366*768 resolution background images and when navigating from a page to another there's an undesired and annoying blinking effect. Is there any trick I could get rid of it? I've had some tries to look upon the images' properties but no luck so far. Can this be achieved?

Any help is greatly appreciated, thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:40:35.170

我通过在主框架的背景上设置图像来删除它。

在您的 app.cs 文件中添加以下代码：-

> ```
>  protected override void OnLaunched(LaunchActivatedEventArgs args)
>     {
>         Frame rootFrame = Window.Current.Content as Frame;
>         ImageBrush brush = new ImageBrush();
>         BitmapImage image = new BitmapImage(new Uri("..."));
>         brush.ImageSource = image;
>         rootFrame.Background = brush; 
> ```

这样可以防止闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:16:52.450

罗斯的回答很简单，接近我的想法。我可能会使用两个图像控件，并在它们之间交替设置图片+在新图像加载后运行溶解过渡动画。

我认为 WinRT XAML 的工作方式是当您导航到在可视树中包含图像的新页面时 - 它可能会延迟打开新页面几分之一秒以等待图像加载，但仅适用于短时间。我认为这就是发生的情况，因为我看到打开了新页面并在我的笔记本电脑上加载了图像，但它似乎超时了，因为在 Surface 上 - 它首先显示没有图像并且它们只是稍后才弹出。

如果您想试一试 WinRT XAML Toolkit - 它还有一些其他机制可能对您有所帮助。与 AlternativePage 一起使用的 AlternativeFrame 是 Frame/Page 的交换，具有几乎相同的 API，但 Navigate 方法是异步的，它允许您等待下一页加载其图像（设置 ShouldWaitForImagesToLoad="True"在框架或页面上）或其他内容，然后再打开它，并且支持页面转换。它还有一个 Preload() 方法，允许您在调用 Navigate 之前在内存中预加载下一页，因此它可以在用户的​​操作调用 Navigation 调用时显示出来（假设您没有太多选择导航到您所在的位置）。

您可以从那里使用的另一个工具是 ImageExtensions.FadeInOnLoaded 属性，该属性使您的图像在加载时平滑淡入，而不仅仅是弹出。

# linux - npm 安装失败

> ID：13964173
> 
> 赞同：8
> 
> 时间：2012-12-20T01:59:41.580
> 
> 标签：linux, bash, node.js, shell, npm

我首先要说我几乎没有在终端或 node.js 工作的经验。

同事去度假了，我正在尝试按照他留下的说明在我们的演示服务器上设置他的应用程序。我可以让所有东西在本地运行，但是在安装 socket.io 模块的服务器上遇到了问题。

安装了python，安装了nodejs，都成功了。但随后我发出命令：

```
npm install -g socket.io 
```

我得到的输出是：

```
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm ERR! Error: EACCES, mkdir '/usr/local/lib/node_modules/socket.io'
npm ERR!  { [Error: EACCES, mkdir '/usr/local/lib/node_modules/socket.io']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/usr/local/lib/node_modules/socket.io',
npm ERR!   fstream_type: 'Directory',
npm ERR!   fstream_path: '/usr/local/lib/node_modules/socket.io',
npm ERR!   fstream_class: 'DirWriter',
npm ERR!   fstream_stack:
npm ERR!    [ 'DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)',
npm ERR!      '/usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53',
npm ERR!      'Object.oncomplete (fs.js:297:15)' ] }
npm ERR!
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Linux 2.6.32-279.el6.x86_64
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "-g" "socket.io"
npm ERR! cwd /home/qa
npm ERR! node -v v0.8.16
npm ERR! npm -v 1.1.69
npm ERR! path /usr/local/lib/node_modules/socket.io
npm ERR! fstream_path /usr/local/lib/node_modules/socket.io
npm ERR! fstream_type Directory
npm ERR! fstream_class DirWriter
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, mkdir '/usr/local/lib/node_modules/socket.io'
npm ERR! fstream_stack DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /home/qa/npm-debug.log
npm ERR! not ok code 0 
```

我使用的帐户应该具有管理员权限。谷歌搜索我发现了一些建议，但似乎没有一个对我有用。尝试使用 sudo 前置命令，但得到：

```
[qa@umr-demo ~]sudo npm install -g socket.io
[sudo] password for qa:
sudo: npm: command not found 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T02:18:34.143

`-g`如果没有特权，我也会有同样的错误，所以在使用标志时我必须使用 sudo

如果 sudo 无法识别 npm，您可以尝试：

*   通过npm的完整路线

    ```
    $ sudo $(which npm) install -g socket.io 
    ```

*   preserving the environment with -E flag

    ```
    $ sudo -E npm install -g socket.io 
    ```

**Upd:**

Note that is recommended to use the `-g` flag **only for executables** and install locally (without the flag) the libraries that are `require`d in your code. Privileges are required for copying the executables to `/usr/bin` or, in your case `/usr/local/bin`

Note too that in the socket.io site, the `-g` flag is not included for the installation command ;)

Read more: [http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T09:54:54.910

If you are on Arch Linux, check out the `npm2arch` package in the AUR. It will let you install npm packages using pacman.

Example:

```
npm2archinstall socket.io 
```

# asp.net - 如何管理不同文件夹中的 MasterPages 和 Content Pages

> ID：13964182
> 
> 赞同：0
> 
> 时间：2012-12-20T02:00:55.633
> 
> 标签：asp.net, master-pages

在我的 asp.net 应用程序中，我有一个“MasterPages”文件夹。所有内容页面都在此文件夹之外。

我不知道如何在 masterPages 上为“Script”文件、“Css”、“Images”等设置路径。请给我一个解决方案，在 materpages 上设置路径，这也适用于内容页面。

我不想为这件事使用硬编码的东西。请给我解决方案，这将适用于所有母版页和内容页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:10:27.790

对于引用，请使用以“~”开头的路径。

所以，如果你在一个名为 assets 的文件夹中有一个名为 style.css 的文件，你的路径应该看起来像......

```
<link href="~/assets/style.css" rel="stylesheet" type="text/css"> 
```

# c++ - C++98 中的模板特化

> ID：13964183
> 
> 赞同：0
> 
> 时间：2012-12-20T02:01:01.333
> 
> 标签：c++, templates, c++11, template-specialization

对来自 GCC 的以下错误代码进行了简短的搜索后，一些点击显示了针对此问题寻求帮助的问题，但没有发现任何具体的问题：

`error: explicit specialization of non-template 'std::hash'`

看起来 std::hash 确实是一个模板，所以错误并不清楚问题是什么。生成消息的示例代码如下。GCC 选项 -std=c++0x 可以很好地编译代码。问题是我有一个较旧的编译器在一台机器上不支持 C++11，所以澄清一下为什么它不编译会很有用。

另一种方法可能是使用继承而不是专门化，如果这是唯一的解决方案，那么也很高兴知道。

```
#include <functional>

struct test
{
    int n;
};

namespace std
{
    template<>
        struct hash<test>
        {
        };
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:08:34.133

问题是`std::hash`，以及使用它的无序容器在 C++11 之前并不存在。如果你需要使用只懂 C++98 的编译器，那么你就不能使用它们。

TR1 和 Boost 中提供了类似的容器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T02:07:55.593

在后来的 C++11 之前的 GCC 版本中，非标准遗留`hash_set`和`hash_map`实现被放置在 namespace`__gnu_cxx`中，而不是`std`. 因此，该组遗留容器的默认散列函子实际上是`__gnu_cxx::hash<T>`，不是`std::hash<T>`。此外，AFAIK 它不是`<functional>`.

`unordered_set`then-pre-standard的新兴实现`unordered_map`驻留在`std::tr1`命名空间中，这意味着他们的`hash`functior 版本实际上是`std::tr1::hash<T>`，而不是`std::hash<T>`。

如果您使用的是较旧的编译器，请确定您需要的任何一个。

所以我猜你`std`只是碰巧在`<functional>`一些完全不相关的非模板名称中声明`hash`，这会导致编译器在你尝试在模板上下文中使用它时抱怨。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T02:07:04.950

`std::hash`仅在 C++11 中引入。`template <typename T> struct hash { ... };`因此，没有`std`必要专门研究 C++98/C++03。

# jsf - Primefaces 数据表行编辑器

> ID：13964188
> 
> 赞同：4
> 
> 时间：2012-12-20T02:01:43.200
> 
> 标签：jsf, primefaces

我正在使用 Primefaces`p:dataTable`来显示一个可编辑的表格。有什么方法可以检测`p:rowEditor`图标何时被点击？我需要这个，因为我想在编辑模式下禁用`p:commandLink`我为删除行添加的一个。

这是.xhtml：

```
<p:dataTable paginatorAlwaysVisible="true"
                 paginator="true"
                 paginatorPosition="top"
                 paginatorTemplate="{CurrentPageReport} {PageLinks} {RowsPerPageDropdown}"
                 rowsPerPageTemplate="10,25,50"
                 rows="10"
                 editable="true"
                 value="#{userController.allUsers}"
                 var="user"
                 > 
        <p:ajax event="rowEdit" listener="#{userController.onEdit}"/>
        <p:column headerText="First Name">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{user.firstname}"/>
                </f:facet>
                <f:facet name="input">
                    <h:inputText value="#{user.firstname}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>

        //. . . some other data columns

        <p:column headerText="Options">
            <p:rowEditor/> <br/>
            <p:commandLink id="deleteLink" styleClass="ui-icon ui-icon-trash"  action="#{userController.deleteUser(user.userId)}"/>
        </p:column> 
```

这里是我认为相关的 bean 部分：

```
@ManagedBean
@SessionScoped
public class UserController {
    @EJB
    private UserBean userBean;
    @EJB
    private TeamBean teamBean;
    private Integer currentUserId;
    private String newUserUsername;
    private String newUserPassword;
    private User.AccountType newUserAccountType;
    private String newUserFirstName;
    private String newUserLastName;
    private Integer newUserTeamId;

    // ... some create/ update/ delete functions that work

    public void onEdit(RowEditEvent event) {
        try {
            User user = (User) event.getObject();
            System.out.println("Edit: " + user);

            userBean.update(user.getUserId(), user.getUsername(), user.getPassword(), 
                User.AccountType.valueOf(user.getAccountType()), user.getFirstname(), user.getLastname(),
                user.getTeam() == null ? null : user.getTeam().getTeamId());
            System.out.println("User " + user.getUserId() + " updated: " + user.getFirstname());
    } catch (InexistentUserException ex) {
        Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InvalidUsernameException ex) {
        Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InexistentTeamException ex) {
        Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
    } catch (DataBaseException ex) {
        Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
    }
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T14:45:31.027

检测何时单击 p:rowEditor 的事件是：

```
<p:ajax event="rowEditInit" listener="#{Bean.someListener}" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T00:59:27.743

只需`<p:cellEditor>`在您的列中使用另一个。

```
<p:column headerText="Options">
  <p:rowEditor/>
  <p:cellEditor>
    <f:facet name="output">
      <p:commandLink id="deleteLink" styleClass="ui-icon ui-icon-trash"  action="#{userController.deleteUser(user.userId)}"/>
    </f:facet>
    <f:facet name="input">

    </f:facet>
  </p:cellEditor>
</p:column> 
```

我还建议您将 deleteLink 放在另一列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T11:49:13.220

经过大量研究 event="rowEditInit" 是正确捕捉可编辑行的铅笔点击。

谢谢

# c# - 创建嵌套模型是否需要新的子类？

> ID：13964190
> 
> 赞同：0
> 
> 时间：2012-12-20T02:01:53.370
> 
> 标签：c#, viewmodel

我在数据建模方面工作不多，而且我遇到了一些对我来说似乎很奇怪的事情。

我的 ViewModel 看起来像这样

```
public class HomeIndexViewModel
{
    public Image ForSale { get; set; }
    public Image Sold { get; set; }
    public Image PrivateCollection { get; set; }

    public class Image
    {
        public string ImageUrl { get; set; }
        public string ImageDescription { get; set; }
    }
} 
```

但我觉得必须拥有`new`所有属性以防止`null reference exceptions`

```
var hivm = new HomeIndexViewModel();
hivm.ForSale= new HomeIndexViewModel.Image();
hivm.Sold = new HomeIndexViewModel.Image();
hivm.PrivateCollection = new HomeIndexViewModel.Image(); 
```

有没有更聪明的方法来做到这一点，只需要使用第一行？

```
var hivm = new HomeIndexViewModel(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:18:13.613

为什么不使用默认构造函数？

```
public class HomeIndexViewModel
{
    public Image ForSale { get; set; }
    public Image Sold { get; set; }
    public Image PrivateCollection { get; set; }

    // Default constructor
    public HomeIndexViewModel()
    {
       ForSale = new Image();
       Sold = new Image();
       PrivateCollection = new Image();
    }

    public class Image
    {
       public string ImageUrl { get; set; }
       public string ImageDescription { get; set; }
    }
} 
```

然后当你这样做

```
var hivm = new HomeIndexViewModel(); 
```

它将调用默认构造函数并初始化属性。

还是我做错了什么？

# php - 如何使用多个？在 PHP 中的准备好的语句中

> ID：13964193
> 
> 赞同：2
> 
> 时间：2012-12-20T02:02:04.767
> 
> 标签：php, mysql, prepared-statement

我想使用多个“？”运行一个带有 PHP 的 select 语句。我怎么做？我认为下面的代码应该这样做，有什么问题？

```
$con = mysql_connect("database","login","password");
if (!$con){
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("posdictionary", $con);

$stmt = $con->prepare("SELECT * FROM WordPOS WHERE WORD LIKE '?%' AND pos LIKE BINARY '%?%'");
$stmt->bind_param('ss', $pattern, $pos);
$pattern = $_POST["pattern"];
$pos = $_POST["pos"];

$value = "";
if ($stmt->execute()) {
    while ($row = $stmt->fetch()) {
        $value = $value . $row['word'] . " " . $row['pos'] . "<br />";
    }
} 
```

**更新**：

下面的答案很棒。我的 PHP 中有一个错误，'?%' 在 php sql 语句中是不合法的。查询应如下所示：

```
 $pattern = $_POST["pattern"] ."%";
  $pos = "%". $_POST["pos"] ."%";
  $stmt = $con->prepare("SELECT word, pos FROM WordPOS WHERE word LIKE ? AND pos LIKE BINARY ?"); 
```

然后按照其余的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:07:15.520

连接[`new MySQLi()`](http://php.net/manual/en/mysqli.construct.php)而不是`mysql_connect()`，它与 MySQLi API 不兼容。

```
$con = new MySQLi("database","login","password","posdictionary"); 
```

您的`prepare()`和`execute()`调用是正确的，您的两个参数正确绑定。但是，您[`fetch()`](http://php.net/manual/en/mysqli-stmt.fetch.php)将无法工作，因为 MySQLi 期望结果列通过 绑定到变量中`bind_result()`，*而不是*`$row = $stmt->fetch())`像使用旧`mysql_*()`API 或 PDO那样绑定到数组中。

```
 $pattern = $_POST["pattern"];
  $pos = $_POST["pos"];

  // Substituting explicit columns in the SELECT list
  $stmt = $con->prepare("SELECT word, pos FROM WordPOS WHERE WORD LIKE '?%' AND pos LIKE BINARY '%?%'");
  $stmt->bind_param('ss', $pattern, $pos);

  // Bind result columns into vars $word, $pos
  $stmt->bind_result($word, $pos);

  // Then execute and fetch 
  $value = "";
  if ($stmt->execute()) {
  while ($row = $stmt->fetch()) {
    // Using the bound variables...
    $value .=  $word . " " . $pos . "<br />";
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:11:39.093

您正在使用已弃用的`mysql_*`函数进行连接，然后切换到 mysqli 语法。那是行不通的，你需要改变：

```
$con = mysql_connect("database","login","password");
 if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

  mysql_select_db("posdictionary", $con); 
```

到：

```
$con = mysqli_connect("database","login","password");
 if (!$con)
  {
  die('Could not connect: ' . mysqli_error());
  }

  mysqli_select_db("posdictionary", $con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:08:02.260

我会先分配，然后绑定

```
$pattern = $_POST["pattern"];
$pos = $_POST["pos"];
$stmt->bind_param('ss', $pattern, $pos); 
```

# python - 一系列非字符串的file.writelines（foo），python中的错误

> ID：13964195
> 
> 赞同：1
> 
> 时间：2012-12-20T02:02:12.090
> 
> 标签：python, stdout, counter

好吧，我知道我的错误及其含义。但是，有人可以告诉我如何将一组非字符串参数写入文件吗？

产生错误的代码：

```
with open('count.txt', 'w') as count:
for k,v in makeddict.items():
    print "MID -",k + ':', Counter(v)
    readout = "MID -",k + ':', Counter(v)
    count.writelines(readout) 
```

`Counter`当我尝试将行写入文件的这种标准形式时，我完全理解这是我错误的原因。所以我尝试将我的标准输出写入文件（见下文）。

尝试修复我的代码：

```
for k,v in makeddict.items():
    print "MID -",k + ':', Counter(v)
    sys.stdout = open('count.txt', 'w') 
```

这行得通，我有一行（标准输出的第一行）写入我的文件。但是，我想在我的`count.txt`文件中查看所有其他 19 行。

那么谁能告诉我如何让我的代码将我所有的标准输出打印到一个文件中？我应该在那里扔一个`.append`吗？（现在试试这个）。

或者，当文件具有非字符串参数（如`Counter`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:16:16.927

除了 Thomas Orozco 的回答之外，您的`readout`变量包含一个元组，而不是一个字符串，所以我怀疑结果不是您想要的。您可能想尝试以下方法：

```
readout = "MID -" + k + ':' + Counter(v) 
```

这将尝试用所有部分制作一个字符串。但是，对于没有`__str__`or`__repr__`方法的对象，它将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:05:28.920

`sys.stdout = open('count.txt', 'w')`截断文件，因此在调用它时会清除之前所做的每个更改。

你应该这样做：

```
sys.stdout = open('count.txt', 'w')
for k,v in makeddict.items():
    print "MID -",k + ':', Counter(v) 
```

或者，

```
with open('count.txt', 'w') as f:
    for k,v in makeddict.items():
        print >> f, "MID -",k + ':', Counter(v) 
```

# c# - 让我的搜索框工作？

> ID：13964198
> 
> 赞同：0
> 
> 时间：2012-12-20T02:02:39.377
> 
> 标签：c#, windows-phone-7

我正在创建一个 web 浏览器，它有一个搜索框和 go 按钮。你能帮我设置一下吗？还有一种方法可以使用您在网站上使用的 html 代码搜索栏吗？

这是我的代码：

```
 private void button4_Click(object sender, RoutedEventArgs e)
     {
        string site;
        site = textBox1.Text;
        webBrowser1.Navigate(
             new Uri("http://m.bing.com/search?q=", UriKind.Absolute)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:24:27.293

根据您的评论，它会进入 bing 并且什么也不搜索。

要解决此问题，您需要填充查询字符串参数“q”。这真的很简单：

```
private void button4_Click(object sender, RoutedEventArgs e)
{
    string site;
    site = textBox1.Text;
    webBrowser1.Navigate(
         new Uri("http://m.bing.com/search?q=" + site, UriKind.Absolute)); 
```

您还可以使用该`String.Format`函数来获取：

```
private void button4_Click(object sender, RoutedEventArgs e)
{
    string site;
    site = textBox1.Text;
    webBrowser1.Navigate(
         new Uri(System.String.Format("http://m.bing.com/search?q={0}", site), UriKind.Absolute)); 
```

这些中的任何一个都应该适合你，我个人的偏好是第二个。

# javascript - 根据其他孩子调整div的宽度？

> ID：13964200
> 
> 赞同：1
> 
> 时间：2012-12-20T02:02:54.500
> 
> 标签：javascript, html, css

我真的不知道如何解释，但我会尽力而为。

我有一个 div（例如固定为 500px），我希望内容在它们之间“分割宽度”。

我该怎么做呢？

目前，子 div 只占用它们所需的量，并且它们不会放大以填充所有可用宽度的全部 100%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:09:10.600

你可以这样做：

```
function getIndividualWidth(elementId,childrenCount){
 var div = document.getElementById(elementId);
 var totalWidth = div.offsetWidth;//500
 //calculating childrenCount would require a function
 //if you were not keeping track of it
 return parseInt(totalWidth / childrenCount);
} 
```

这是计算 div 的子元素的一种方法

```
function getChildElementCount(element){
 var childCounter = 0;
 var startPoint = element.childNodes;
 for (var child in startPoint) {
  if (startPoint[child].nodeType != 1) continue; //not an element
  childCounter++;
 }
 return childCounter;
} 
```

这会将功能更改为：

```
function getIndividualWidth(elementId){
 var element = document.getElementById(elementId);
 var totalWidth = element.offsetWidth;//500
 return parseInt(totalWidth / getChildElementCount(element));
} 
```

决定何时使用它取决于您的元素在屏幕上的呈现方式。如果您已经渲染了它们，并且只想从某个父级开始，您可以这样做：

html（跨度是内联元素，因此它们需要`display:inline-block`以实际反映宽度的变化）在这里查看 jsfiddle：http: [//jsfiddle.net/uhejM/](http://jsfiddle.net/uhejM/)

```
<div id="parent" style="width:500px;">
 <span>1</span>
 <span>2</span>
 <span>3</span>
 <span>4</span>
</div> 
```

js

```
function getIndividualWidth(element){
 return parseInt(element.offsetWidth / getChildElementCount(element));
}

function EqualizeChildWidths(element){
 var width = getIndividualWidth(element);
 var startPoint = element.childNodes;
 for (var child in startPoint) {
  if (startPoint[child].nodeType != 1) continue; //not an element
  startPoint[child].style.width = width + "px";
 }
}    

EqualizeChildWidths(document.getElementById("parent")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:32:13.850

如果我正确理解您的问题，请使用 JQuery：

```
​$('.inner').each(function(){

$(this).width(($('#fixed').width() / $('.inner').size()));

})​ 
```

将内部对象浮动到左侧 - 可以使用绝对左侧和更多 jquery 代码。

[http://jsfiddle.net/Q57xC/3/](http://jsfiddle.net/Q57xC/3/)

# objective-c - xcode：如何隐藏此警告？

> ID：13964202
> 
> 赞同：0
> 
> 时间：2012-12-20T02:03:02.597
> 
> 标签：objective-c, ios, xcode

我将 ElementParser 导入到我的项目中以解析 html 字符串。但是 xcode 在以下代码中报告了警告：

```
if ([connectionDelegate respondsToSelector:@selector(connection:didFailWithError:)])
    [connectionDelegate connection:connection didFailWithError: error]; // Warning at this line 
```

由于第一行有检查，第二行在运行时必须是安全的。

我真的不喜欢我的项目中存在警告。所以我想知道是否有办法隐藏这个警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:04:13.897

将对象投射到`id`第一个。

```
if ([connectionDelegate respondsToSelector:@selector(connection:didFailWithError:)])
    [(id)connectionDelegate connection:connection didFailWithError: error]; 
```

或者，更好的是，正如@Rob 建议的那样，对于您的connectionDelegate 类的@interface 声明，添加以下内容

```
@interface MyConnectDelegateClass : id<NSURLConnectionDelegate> 
```

# jquery - 不安全的 JavaScript 尝试访问带有 URL 错误的框架

> ID：13964203
> 
> 赞同：1
> 
> 时间：2012-12-20T02:03:03.017
> 
> 标签：jquery, paypal

错误一：

> [不安全的 JavaScript 尝试从 URL https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s1](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s1)的框架访问具有 URL“测试 URL”的框架 。域、协议和端口必须匹配。

错误2：

> [不安全的 JavaScript 尝试从 URL https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s2](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s2)的框架访问具有 URL“测试 URL”的框架 。请求访问的框架将“document.domain”设置为“paypal.com”，但被访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。

好的，所以我正在尝试集成 Paypal Express Checkout，除了 1 个异常之外，购买罚款的逻辑流程。当 Paypal 购买完成/取消时，灯箱不会关闭，Paypal 处理程序会在灯箱内显示网站。

我知道关于这个有很多问题，但它们似乎都不起作用。仅供参考，我在 Chrome 中运行，这些错误不会出现在 Firefox 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:14:19.147

好的，好像我做错了，我所做的就是将 Paypal 结帐 URL 传递给框架

在我的框架窗口中

```
window.location = ${checkoutURL}; 
```

我需要做的是在我的 mainWindow 上执行回调并告诉 Paypal 处理程序为我执行重定向，因为它控制着 Frame 窗口

```
var handler = window["paypal_handler"];
handler.closeFlow();        //Just in case another flow was already running when it shouldn't be
handler.startFlow(jQuery.unescape(data.checkoutUrl)); 
```

# c# - 使用自定义类型替换字符串参数

> ID：13964205
> 
> 赞同：0
> 
> 时间：2012-12-20T02:03:31.067
> 
> 标签：c#, asp.net, types, properties, webforms

如果您不需要此问题的背景知识，请跳至下面的问题。

正如您在第一个代码块中看到的那样，我使用常量作为传递给样式字典的参数。

因为我知道（到目前为止），类型在 中被广泛使用`.net`，我想知道如何指定字典将接受作为专用类型而不是`string`类型传递的参数。

这也将是我的另一个小课，关于 types 。

```
 //string                //string 
html.StyleDict.Add(Stl.Prop.BgColor, Stl.Vals.Clr.Aquamarine); 
```

到目前为止，我一直在传递它（样式字典）字符串，用作参数，所以我可以让它完成工作，同时保持简单......因为我仍然对`.net`, 和那时......当我创建这个类时，我什至没有想到学习它们是什么`types`，或者如何使用它们。

所以......对于这种情况，实现和使用**应该是一项非常简单的任务**（对于你们中的一些人......实际上，如果不是全部（: ）的话，你们中的大多数人都可以通过使用自定义类型而不是字符串来转换实现。

## 问题是：如何创建样式类？

...所以最终它将为该 C# 样式任务传递字符串，但字典将允许您将参数作为类型传递`style`，这是因为 html css 样式是通过后面的代码通过字符串值完成的。虽然我会在填充样式字典时使用我的自定义样式类。

```
 //styleType                //styleType 
html.StyleDict.Add(Stl.Prop.BgColor, Stl.Vals.Clr.Aquamarine); 
```

**例如。**

这是我用来通过使用生成 html 标记的循环来交替元素背景的类，因此我将循环计数器与循环中当前元素的其他样式属性一起传递

（有点题外话，但我不得不给出一个用法示例来说明这个问题的含义）

......这也是风格词典开始使用的地方。

```
public sealed class html
{
      //  current Typless Dictionary
    public static Dictionary<string, string> StyleDict = new Dictionary<string, string>();

        // future dictionary (: , naturally it wouldnt work with the parameters as it is now (see relevant Styles Class
    public static Dictionary<Styles.Prop, Styles.Vals> StyleDict = new Dictionary<Stl.Prop, Stl.Vals>();
    public static string DynamicStyle_Generator
    (
        int LoopCounter = -1,
        Dictionary<string, string> StyleAttributeDict = null
    )
    {
        string BaseStyle = "", Terminator = "'", BgCol = "";

        StringBuilder StylerSB = new StringBuilder();

        BgCol = "";
        bool bgcolAlternator;

            if (LoopCounter >= 0)
            {
                LoopCounter++ ;
                bgcolAlternator = (RowCounter % 2) == 0;

                    if (bgcolAlternator)
                        BgCol = "#70878F";

                    else BgCol = "#E6E6B8";
             }

        BaseStyle = string.Format("style='background-color:{0};", BgCol);
        return string.Concat(BaseStyle, StyleDict, Terminator);

    } 
```

```
 Lsts.StlsDict.Add(Stl.Prop.BgColor, Stl.Vals.Clr.Aquamarine);

        public Dictionary<Stl.Prop, Stl.Vals> StlsDict = new Dictionary<Stl.Prop, Stl.Vals>();

    public static class Styles
    {

        public sealed class Props
        {
            public static string pBgUrl1(string fileName)
            {
                return "url('images/" + fileName + "')";
            }
            /// <summary>
            /// Specifies the HTML backgroundimage style.
            /// </summary>
            public static readonly string BgColor = "Background-Color ",

            /// <summary>
            ///     Specifies the HTML backgroundimage style.
            /// </summary>
            BackgroundImage = "Background-image ",

            /// <summary>
            ///     Specifies the HTML bordercollapse style.
            /// </summary>
            BorderCollapse = "BorderCollapse ",

            /// <summary>
            ///     Specifies the HTML bordercolor style.
            ///</summary>
            BorderColor = "BorderColor ",

            /// <summary>
            ///     Specifies the HTML borderstyle style.
            ///     </summary>        
            BorderStyle = "BorderStyle ",
     }

        public sealed class Vals
        {

            public class fontNames
            {
                public const string Aharoni = "Aharoni",
                                    Andalus = "Andalus",
                                    AngsanaNew = "Angsana New",
                                    AngsanaUPC = "AngsanaUPC",
                                    Aparajita = "Aparajita";
            }

            public class Color
            {
                public const string AliceBlue = "AliceBlue";
                public const string AntiqueWhite = "AntiqueWhite";
                public const string Aqua = "Aqua";
                public const string Aquamarine = "Aquamarine";
                public const string Azure = "Azure";
            }
       }
} 
```

我可以用来传递自己的类型的另一种方法（条件是使用相同的字典）我能想到的唯一方法是使用设置为参数的默认值

```
while writing this , i could have thought of this actually 

Dictionary<T,T> StyleDict = new Dictionary<T, T>(); 
```

不仅仅是转换为字符串！（不工作）

```
 public static string DynamicStyle_Generator
    (
        int LoopCounter = -1,
        Dictionary<Styles.Props, Styles.Vals.Color> StyleColor = null
        Dictionary<Styles.Props, Styles.Vals.fontNames> StylefontNames = null
    )
    { 
```

除非你想要字体而不是颜色，否则这里没有必要，你必须通过这样的调用感到不舒服

```
DynamicStyle_Generator(counterhere , null, DictionaryOfFonts); 
```

除此以外

```
DynamicStyle_Generator(counterhere , DictionartyColors, DictionaryOfFonts); 
```

那么这将完成它的工作，无论值以相同的方式（是否为空）

```
 return string.Concat(BaseStyle, DictionartyColors, DictionaryOfFontsm, Terminator); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:40:14.080

在我看来，这像是一个过度设计的案例。有一个原因会`System.Web.UI.WebControls.WebControl`公开其`Style`属性，该属性在内部与键和值的字符串一起使用。您想要提供键的常量列表，这没关系，值的常量列表不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:52:18.037

C# 中的枚举用于表示一组固定的不同值

[http://www.codeproject.com/Articles/20805/Enhancing-C-Enums](http://www.codeproject.com/Articles/20805/Enhancing-C-Enums)

根据您的评论，我认为这就是您要查找的内容： [http ://weblogs.asp.net/ralfw/archive/2006/01/07/434774.aspx](http://weblogs.asp.net/ralfw/archive/2006/01/07/434774.aspx)

从上面的链接：

```
public enum Colors
{
   red, blue, green
}

Set<Colors> sc = new Set<Colors>();
sc.Add(Colors.red);
sc.Add(Colors.green);

Set<Colors> sc2 = new Set<Colors>();
sc2.Add(Colors.blue);

sc.Add(sc2); // union

Console.WriteLine(sc); // prints: [red,blue,green] 
```

# java - 屏幕冻结并退出应用程序

> ID：13964212
> 
> 赞同：0
> 
> 时间：2012-12-20T02:04:18.033
> 
> 标签：java, android, sql

单击按钮后，我试图向我的 mysql 数据库发送一些信息，但我的屏幕冻结然后退出。这是代码：

```
 b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            try
            {
                new SendInfo(email.getText().toString(),password.getText().toString());
            }catch(Exception e){
                error.setText((CharSequence) e);
            }

        }
    }); 
```

这是 SendInfo 类：

```
public SendInfo(String email, String pass) throws Exception
{
    Connection conn = null;
    String url = "jdbc:mysql://ip...:3306/"; // info changed
    String dbName = "db"; //info changed
    String driver = "com.mysql.jdbc.Driver";
    String userName = "user"; //info changed
    String password = "pass"; //info changed
    String table = "users";

    Class.forName(driver).newInstance();
    DriverManager.setLoginTimeout(100);
    conn = DriverManager.getConnection(url+dbName,userName,password);

    Statement st = conn.createStatement();
    java.util.Calendar cal = java.util.Calendar.getInstance();
    java.util.Date utilDate = cal.getTime();
    java.sql.Date sqlDate = new Date(utilDate.getTime());

    st.executeUpdate("INSERT INTO users VALUES('1','Komal','asd',"+sqlDate+")");
    conn.close();

} 
```

我什至没有使用我得到的值作为参数来使它更容易，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:10:02.203

看起来下面的行产生了错误：

```
error.setText((CharSequence) e); 
```

将其更改为

```
error.setText(e.toString()); 
```

解决它。

# xml - 无法解析 XML 文档

> ID：13964216
> 
> 赞同：1
> 
> 时间：2012-12-20T02:04:46.153
> 
> 标签：xml, xsd, xml-validation

我无法解析这个 xml。谁能帮我这有什么问题

这是我的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<gea-sr:GETOFFERSResponse 
  xmlns:gea-sr="http://schemas.com/soap/requests" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://schemas.com/soap/requests 
                      file:///C:/Users/Desktop/SMCWebResponse.xsd">
    <requestdate dateDescription="Wed" requestdate="2012-12-19"/>
    <requestdate dateDescription="Mon" requestdate="2012-12-24">
        <offer timeperiod="0800-1200" timeperioddesc="AM 8-12">
            <offertoken/>
            <offertext>12657131N3AM 0004 T000000000N</offertext>
            <offerremarks/>
            <offerflag>F</offerflag>
        </offer>
        <offer timeperiod="1300-1700" timeperioddesc="PM 1-5">
            <offertoken/>
            <offertext>12657131N3AA 0006 T000000000N</offertext>
            <offerremarks/>
            <offerflag>F</offerflag>
        </offer>
    </requestdate>
</gea-sr:GETOFFERSResponse>" 
```

这是我试图用于解析的 XSD 快照

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:gea-sr="http://schemas.com/soap/requests" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xsd:complexType name="requestdateType">
        <xsd:sequence>
            <xsd:element name="offer" type="offerType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="requestdate" type="xsd:date"/>
        <xsd:attribute name="datedescription">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:maxLength value="10"/>
                    <xsd:whiteSpace value="collapse"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>

<xsd:complexType name="offerType">
        <xsd:all>
            <xsd:element name="offertoken" type="offertokenType"/>
            <xsd:element name="offertext" type="offertextType"/>
            <xsd:element name="offerremarks" type="offerremarksType"/>
            <xsd:element name="offerflag" type="offerflagType"/>
        </xsd:all>
        <xsd:attribute name="timeperiod" type="timespanType"/>
        <xsd:attribute name="timeperioddescription">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:maxLength value="25"/>
                    <xsd:whiteSpace value="collapse"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>

<xsd:simpleType name="timespanType">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="0800-1200"/>
            <xsd:enumeration value="1300-1700"/>
            <xsd:enumeration value="0800-1700"/>
            <xsd:enumeration value="1000-1700"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="offertokenType">
        <xsd:restriction base="xsd:string">
            <xsd:maxLength value="50"/>
            <xsd:whiteSpace value="collapse"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="offertextType">
        <xsd:restriction base="xsd:string">
            <xsd:maxLength value="50"/>
            <xsd:minLength value="19"/>
            <xsd:whiteSpace value="collapse"/>
            <xsd:pattern value="[^\s].*"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="offerremarksType">
        <xsd:restriction base="xsd:string">
            <xsd:maxLength value="50"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="offerflagType">
        <xsd:restriction base="xsd:string">
            <xsd:whiteSpace value="collapse"/>
            <xsd:enumeration value="A"/>
            <xsd:enumeration value="F"/>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:element name="GETOFFERSResponse">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="requestdate" type="gea-sr:requestdateType" maxOccurs="unbounded" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element> 
```

我收到错误 cvc-elt.5.2.1：该元素对于实际类型定义“{anonymous}”无效。cvc-model-group：元素的类型“{anonymous}”出乎意料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:28:36.023

*[首先，一个术语问题：在这里解析 XML 文档没有问题；您的 XML 格式完美，没有任何 XML 解析器在解析它时会遇到任何问题。**您在验证**XML 文档时遇到问题。这种差异让一些用户觉得很迂腐，但对于可能能够回答此类问题的人来说，这很重要，因此了解这种差异符合您的兴趣。]*

你在这里有几个问题。

*   在您的 XML 实例中，元素 gea-sr:GETOFFERSResponse 位于命名空间[http://schemas.com/soap/requests](http://schemas.com/soap/requests)中。但是您显示的 XSD 架构文档声明了一个名为 GETOFFERSResponse 的元素，该元素根本没有分配给任何命名空间（架构文档没有目标命名空间）。

*   如果你添加`targetNamespace="http://schemas.com/soap/requests"`到你的模式文档，你会遇到麻烦，因为模式文档中的声明引用了许多使用无前缀名称的类型（所以引用是没有命名空间名称的类型）。

*   将前缀添加`gea-sr`到适当的引用消除了这些错误，并导致此处出现问题的第三个来源：您的架构表示本地元素将位于目标命名空间中，但在您的文档实例中， GETOFFERSResponse 的子元素不是命名空间限定的。您可以将 GETOFFERSResponse 的子级放入 gea-sr 命名空间，也可以将模式说成`elementFormDefault = "unqualified"`.

*   现在我们发现类型定义为元素 requestdate 声明了一个名为 datedescription 的属性，但实例使用了一个名为 dateDescription 的属性。offer 元素在模式中有一个名为 timeperioddescription 的属性，但在 XML 实例中有一个名为 timeperioddesc 的属性。

    这些问题可以通过使模式和实例一致来解决。

解决这些问题后，您的 XML 文档实例就有效了。

# sql - 为什么如果我在 SQL Server 2005 中创建触发器而不是更新，我的表不会更新？

> ID：13964218
> 
> 赞同：0
> 
> 时间：2012-12-20T02:05:04.327
> 
> 标签：sql

首先我用这个脚本创建一个表：

```
 CREATE TABLE [dbo].[Employee_Demo] (
    [Emp_ID] [bigint] IDENTITY (1, 1) NOT NULL ,
[Emp_Name] [varchar] (55) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
[Emp_Sal] [decimal](10, 2) NULL 
    ) ON [PRIMARY] 
```

然后我创建另一个表

```
CREATE TABLE [dbo].[Employee_Demo_Audit] (
 [Emp_ID] [int] NULL ,
 [Emp_Name] [varchar] (55) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
 [Emp_Sal] [decimal](10, 2) NULL ,
 [Audit_Action] [varchar] (100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
 [Audit_Timestamp] [datetime] NULL 
) ON [PRIMARY] 
```

之后，我`INSTEAD OF UPDATE`在表上创建了一个触发器`employee_demo`：

```
CREATE TRIGGER trgInsteadOfUpdate ON dbo.Employee_Demo
INSTEAD OF Update
AS
declare @emp_id int, @emp_name varchar(55), @emp_sal decimal(10,2), @audit_action varchar(100);
select @emp_id=i.Emp_ID from inserted i;
select @emp_name=i.Emp_Name from inserted i;
select @emp_sal=i.Emp_Sal from inserted i;  
IF UPDATE (Emp_sal)
begin
BEGIN
BEGIN TRAN
    if(@emp_sal>=1000)
    begin
    RAISERROR('Cannot Insert where salary fewer then 1000',16,1); ROLLBACK; end
    else begin
    insert into Employee_Demo_Audit(Emp_ID,Emp_Name,Emp_Sal,Audit_Action,Audit_Timestamp) values(@emp_id,@emp_name,@emp_sal,@audit_action,getdate());
    COMMIT;
    PRINT 'Record Updated -- Instead Of Update Trigger.'; END; end
end 
```

我不知道为什么我`employee_demo`用这个脚本更新表：

```
UPDATE employee_demo 
SET emp_name = 'ZHEE' 
WHERE emp_id = 1 
```

名字`emp_id = 1`不变...

为什么 ？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:08:39.350

这可能与您在源表中使用 bigint 作为 a id 而在审计表中使用常规 int 的事实有关吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:22:01.023

`instead of`触发器*替换*了默认行为。`Emp_sal`只有在更改列时，您的触发器才会执行更新。如果该列未更新，则不执行更新语句。

# c# - 如何在javascript中分别读取动态创建的字典式键和值？

> ID：13964221
> 
> 赞同：0
> 
> 时间：2012-12-20T02:05:17.547
> 
> 标签：c#, javascript, jquery, dictionary

我有一个 javascript 代码，它从 csharp 函数中获取数据，该函数返回一个字典（键值对）。现在我需要在 javascript 中读取一个单独数组中的键和另一个单独数组中的值。javascript代码如下

**dorendertDictionary = function (data) { //这里要写的代码来读取数据 }，** 其中数据将动态加载键和值....例如数据将按如下方式加载： ![在此处输入图像描述](../Images/a49184b1b871e843cd806a405afa378b.png)

由于我是 Javascript 新手，因此无法 ping 正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:11:27.950

那么您需要了解 C# 输出中函数的格式。因此，如果 C# 函数以 JSON 格式输出字典，那么您将面临一项简单的任务。简单地说：

```
var dorendertDictionary = function (csharp_output_data) {
    return JSON.parse(csharp_output_data);
};

console.log(dorendertDictionary(csharp_function_output)); 
```

如果是另一种格式，则需要编写一个 javascript 函数来解析该格式。从格式开始，然后编写 javascript 函数。没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:47:54.000

您想遍历键值对，并将每个键值对附加到各自的数组中

```
var dict = {......};
var keys = [], values = [];

for (var key in dict) {
  if (dict.hasOwnProperty(key)) {
    keys.push(key);
    values.push(dict[key]);
  }
} 
```

`foreach`可以通过删除第一个块语句来稍微简化循环：

```
for (var key in dict) if (dict.hasOwnProperty(key)) {
  keys.push(key);
  values.push(dict[key]);
} 
```

# c - 简单的 memcpy 似乎不起作用

> ID：13964224
> 
> 赞同：-2
> 
> 时间：2012-12-20T02:05:23.677
> 
> 标签：c, pointers, memory, memcpy

我正在尝试做一个简单的 memcpy，如下所示。

```
char *token[32];
char *temp_store[4];

for (i = 0 ; i < 4; i++)
{
   memcpy(token[4+i],temp_store[i],strlen(temp_store[i]));
} 
```

我在令牌数组中有以下值。

```
temp_store[0] = "5";
temp_store[1] = "6";
temp_store[2] = "7";
temp_store[3] = "8"; 
```

我希望将这 4 个值分别`"5" , "6", "7", "8"`复制到`token[4],token[5],token[6] and token[7]`。

但是，出于某种原因，我没有在 token[] 中获得这些值。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:19:06.220

首先，如果要使用`memcpy`函数复制 C 字符串，则必须复制`strlen() + 1`字节以包含零终止符。或者您必须自己将终止零添加到目标数组。如果没有终止零，它就不是字符串。

其次，复制以零结尾的字符串实际上是`strcpy`函数的作用。你为什么选择`memcpy`改用？

第三，如果你真的想复制源字符串，你是否记得在执行复制之前分配目标内存？告诉我们你是如何分配它的。您到目前为止发布的代码并未分配该内存，这意味着您的`memcpy`调用将数据“复制到无处”，导致未定义的行为通常导致崩溃。

第四，您确定要复制这些字符串而不是简单地使`token[]`元素指向相同的内存位置吗？后者可以通过简单的实现

```
token[4+i] = temp_store[i]; 
```

这种方法是否适用于您的情况取决于您要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:10:17.070

这里每个 temp_store[0],temp_store[1],temp_store[2],temp_store[3] 都是一个指向 char 数组的指针。您需要确保这四个 char 数组以空结尾。

strlen() 用于确定以空结尾的字符串的长度

将多个数组的内容转换为更大数组的另一种方法是使用 memcpy，如下所示：

```
#include <stdio.h>
#include <string.h>

int main()
{
    const int LEN = 10 ;
    const int NUM_STRING = 4 ;
    char token[NUM_STRING*LEN+1]={0};
    char temp_store[NUM_STRING][LEN] = { {0} };

    for (int i = 0 ; i < NUM_STRING; i++) {
        memcpy(token+LEN*i, temp_store[i], sizeof(temp_store[i]));
    }
    return 0;
} 
```

这会将整个 temp_store[0]、temp_store[1]、temp_store[2]、temp_store[3] 复制到令牌中

（这意味着 temp_store[4][10] 中的所有 10*4 字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:16:57.597

我不确定您要做什么。但是，如果您只是想连接一个字符串，那么 memcpy 不是要走的路。使用 strcat，如下所示：

```
for (i = 0; i < n; i++) {
    strcat(token[i+4], temp_store[i]);
} 
```

如果要进行字符串操作，请使用以空字符结尾的字符串和 str* 函数。C 支持这些，并且您想要的许多字符串操作（连接、长度、分配的复制、比较）都在套件中，而且它们比 mem* 函数使用起来更方便。

# ruby-on-rails-3 - Rails gmaps4rails 地图 - gmaps 未定义错误

> ID：13964225
> 
> 赞同：0
> 
> 时间：2012-12-20T02:05:24.207
> 
> 标签：ruby-on-rails-3, google-maps

我正在尝试使用 gmaps4rails。当我添加记录时，客户端表正在填充纬度和经度。但是，地图没有显示任何内容。

从浏览器控制台，我收到错误：第二行的“Gmaps is not defined”：

```
<script type="text/javascript">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() { 
```

我在我的 application.js 中有包含咖啡文件和这些行的 javascript gmaps4rails 文件夹：

```
//= require gmaps4rails/gmaps4rails.base
//= require gmaps4rails/gmaps4rails.bing
//= require gmaps4rails/gmaps4rails.googlemaps
//= require gmaps4rails/gmaps4rails.mapquest
//= require gmaps4rails/gmaps4rails.openlayers 
```

我的视图代码是：

```
 <ul id="markers_list">
  <%= gmaps("markers" => {"data" => @json, "options" => {"list_container" => "markers_list" } }) %>
  </ul> 
```

我的模型有：

```
 acts_as_gmappable

 def gmaps4rails_address
  "#{address1}, #{city}, #{state}, #{zipcode}"
 end

 def gmaps4rails_infowindow
   "#{client_name}, #{address1}, #{city}, #{state}, #{zipcode}"
 end

 def gmaps4rails_sidebar
   "<span>#{client_name}</span>"
 end 
```

有任何想法吗？

谢谢！

更新：我一直在查看浏览器控制台。

这是在视图页面中，我试图在其中显示 Google 地图：

```
<footer>
<script src="//maps.google.com/maps/api/js?v=3.8&amp;sensor=false&amp;client=&amp;key=&amp;libraries=geometry&amp;language=&amp;hl=&amp;region=" type="text/javascript"></script>
<script src="http://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/8/12/%7Bmain,geometry%7D.js" type="text/javascript"></script>

<script type="text/javascript">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.initialize();
Gmaps.map.markers = [{"description":"Salt Lake County Headquarters, 2001    South State Street, Salt Lake City, UT, 84114","sidebar":"<span>Salt Lake County Headquarters</span>","lat":40.7267176,"lng":-111.8881423}, 
...(more data points right here)
Gmaps.oldOnload = window.onload;
window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); }; 
```

```
</footer> 
```

我很确定在前 2 个脚本 src= 之后，还应该有：

```
<script src="/javascripts/gmaps4rails/gmaps4rails.base.js?1355589475" type="text/javascript"></script>
<script src="/javascripts/gmaps4rails/gmaps4rails.googlemaps.js?1355589475" type="text/javascript"></script> 
```

但是，这些最终会在页面的下方。在我看来，在执行 gmap 之前没有加载 2 个脚本。所以，我得到 gmaps is not defined 错误。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:46:43.383

那么，为什么要将地图渲染到markers_list 中呢？

```
<!-- render your map here -->
<%= gmaps("markers" => {"data" => @json, "options" => {"list_container" => "markers_list" } }) %>
<!-- and here you render the markers_list -->
<ul id="markers_list"></ul> 
```

你舒尔包括`<%= yield :scripts %>`在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:36:47.703

终于想通了。以下代码行在我的布局页脚中：

```
 <%= stylesheet_link_tag "application", :media => "all" %> 
```

将其移至标题，Gmaps4rails 开始工作。

# ios - iPhone应用程序的灵活弹出菜单窗口

> ID：13964226
> 
> 赞同：0
> 
> 时间：2012-12-20T02:05:26.043
> 
> 标签：ios, cocoa-touch, user-interface, popup, xib

我正在为我的应用寻找可用于向用户显示各种消息的 UI 元素。它可能是“今日提示”，可能是折扣代码，或者可能是对他们刚刚进入的屏幕的用途的说明。

我希望这个控件灵活并允许各种内容。用于解雇、文本、图像等的按钮。我也希望能够自定义其背景、透明度、框架等。

我对此不是 100% 确定的，但有人告诉我，iPad 的 UIPopoverViewController 可以实现与我所指的非常相似的东西，尽管我并不认为总是需要在边缘之一上使用箭头。有一个 2 年历史的无 ARC 移植到 iPhone 上，称为[WEPopover](https://github.com/werner77/WEPopover)，它似乎在 iOS 社区中很受欢迎，但我想知道那里是否有更好的东西。我认为“弹出”的概念比“弹出”更接近我正在寻找的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:24:03.080

那绝对不错，不是吗？我不知道有任何预制包可以做到这一点，但您需要创建一个新的 viewController 并将其加载到您目前所在的视图中。如果您使用特定选项（如大小、颜色以及是否需要特定按钮）设置视图的初始化，那么您就在正确的轨道上......

为您提供示例代码非常重要，因为这是您在这里要求的非常核心的东西。但是为了让你开始：

[在此处](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)下载 facebook IOS sdk并查看 FBDialog 文件……他们就是这样做的。

或者，您始终可以创建一个包含 UIWebview 的视图，您可以在其中加载 URL 或发送给它的纯 HTML。将其设计为弹出框，没有人会注意到其中的区别。初始化 UIViewcontroller 并在视图中加载

```
[self.view addSubView:popOver.view]; 
```

在您当前的视图中呈现它。

我知道这不是一个完整的例子，但我不认为有任何......

祝你好运

快速编辑：您也可以在[这里](https://github.com/facebook/facebook-ios-sdk)找到 Github 上的 FB SDK ，更容易查看具体文件...它们在 'src' 文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:29:59.827

我设法找到了一个解决方案，基于一些简单的测试，似乎可以很好地解决问题。这是 David Keegan 的[KGModal](https://github.com/kgn/KGModal)。您可以通过编程方式或通过 xib 创建一个内容视图并将其传递给模式。它计算出尺寸，使背景变暗，并在点击 X 或弹出窗口之外自行关闭。

它非常可扩展，您应该能够对其进行修改以满足您的需要。唯一的挑战是现在它是一个单例，所以如果你想堆叠或排队一堆它们，你不能通过分配一系列模态来做到这一点。不过，这不是您无法解决的问题。

# android - 制作 Facebook Android SDK APKLIB

> ID：13964228
> 
> 赞同：2
> 
> 时间：2012-12-20T02:05:34.467
> 
> 标签：android, facebook, facebook-android-sdk, android-maven-plugin

所以我已经看到了这个问题的几个部分答案，但没有完整的解决方案（或者解决方案已经超过 6 个月了）。希望有人可以完整地解释这个问题的解决方案。

我目前正在使用这里的说明[https://code.google.com/p/maven-android-plugin/wiki/ApkLib](https://code.google.com/p/maven-android-plugin/wiki/ApkLib)来制作包，但即使我也看过我仍然不明白它们的例子。

据我所知，这个过程涉及为 Facebook SDK 创建一个 pom.xml，然后创建一个父 pom.xml 来构建它？我真的不确定，并希望逐步解释这一点（假设除了安装 android maven 和在本地签出 facebook android sdk 之外，我还有 0 条线索）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T01:23:35.497

有人已经这样做了：[https ://github.com/avianey/facebook-api-android-maven](https://github.com/avianey/facebook-api-android-maven)

请参阅此相关问题：[https ://stackoverflow.com/a/14707612/473201](https://stackoverflow.com/a/14707612/473201)

# php - 数据库连接“Sqlserver”丢失，或无法创建

> ID：13964229
> 
> 赞同：2
> 
> 时间：2012-12-20T02:05:35.340
> 
> 标签：php, sql-server, cakephp, connection

我正在尝试使用 CakePHP 2.2.4 连接到 Microsoft SQL Server 数据库。作为我的开发环境，我在我的机器上安装了一个新的 WAMP 服务器。

我启用了 PHP 扩展：

*   php_mssql
*   php_pdo_mssql
*   php_sqlsrv_53_ts
*   php_curl（这个可能无关紧要）。

我还在 Apache 中启用了该模块：

*   重写模块。

我已经更改了 core.php 文件中的 salt 条目。我试图通过 database.php 连接到我的数据库，如下所示：

```
public $default = array(
    'datasource' => 'Database/Sqlserver',
    'persistent' => false,
    'host' => 'Servername',
    'login' => 'Username',
    'password' => 'secretpassword',
    'database' => 'TheDatabase',
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

我去 index.php 测试连接，我得到黄色：

> > Cake 无法连接到数据库。数据库连接“Sqlserver”丢失，或无法创建。

我看到它失败了，`datasource`所以它必须是某个模块或扩展名或 dll 或缺少的东西......如果有帮助，服务器位于我们的 Intranet 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:04:25.213

DataSource 在文件 lib/Cake/Model/Datasource/Database/Sqlserver.php 中定义

> 需要启用`sqlsrv` * 和`pdo_sqlsrv`扩展名。”

检查 phpinfo() 以查看扩展是否已启用。

# mips - 带有 ld 指令的 winmips64 问题

> ID：13964233
> 
> 赞同：0
> 
> 时间：2012-12-20T02:06:24.377
> 
> 标签：mips

我的大学有一个练习，我已经在 mips 中编写了代码。该练习为我们提供了带有一些数字的二维数组。我想在一些寄存器中加载给定的数组。

这是`code`：

```
A: .word 0, 0, 0, 0, 0, 0, 0, 0
.word 0, 1, 1, 1, 1, 1, 1, 1
.word 0, 2, 2, 2, 2, 2, 2, 2
.word 0, 3, 3, 3, 3, 3, 3, 3
.word 0, 4, 4, 4, 4, 4, 4, 4
.word 0, 5, 5, 5, 5, 5, 5, 5
.word 0, 6, 6, 6, 6, 6, 6, 6
.word 0, 7, 7, 7, 7, 7, 7, 7
; 8-by-8 input matrix Β
Β: .word 0, 0, 0, 0, 0, 0, 0, 0
.word 0, 1, 0, 0, 0, 0, 0, 0
.word 0, 0, 2, 0, 0, 0, 0, 0
.word 0, 0, 0, 3, 0, 0, 0, 0
.word 0, 0, 0, 0, 0, 4, 0, 0
.word 0, 0, 0, 0, 5, 0, 0, 0
.word 0, 0, 0, 0, 0, 0, 6, 0
.word 0, 0, 0, 0, 0, 0, 0, 7

dmul        $t4,$s1,$s0             ; $t4=i*N       
dadd        $t4,$t4,$s2             ; $t4=(i*N) + j
dsll        $t4,$t4,3                       ; $t4=8 * ((i * N) + j)  
ld          $s3,A($t4)              ; $s3 = A[i][j]
ld          $s4,B($t5)              ; $s4 =B[i][j] 
```

问题是程序识别第一条加载指令，但它没有显示第二条的红线。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:13:15.643

你可能是想说`ld $s4,B($t4)`。您尚未加载`$t5`可能导致红线的值。

# javascript - 除了 Karma 之外，Selenium 还涵盖哪些测试？

> ID：13964235
> 
> 赞同：35
> 
> 时间：2012-12-20T02:06:29.017
> 
> 标签：javascript, selenium, functional-testing, karma-runner, browser-automation

我了解[Karma](http://karma-runner.github.io/index.html)是一个 JavaScript 测试运行器，可以在真实浏览器中运行测试。如果是这样，Selenium 在 Karma 之外提供了什么样的测试覆盖率。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-20T09:50:59.947

Karma 和 Selenium 之间存在巨大差异。Selenium 有一个内置的浏览器控制机制，而 Karma 没有。所以 Selenium 更适合端到端测试，例如[nightwatch.js](http://nightwatchjs.org/)。Karma 是为单元测试而设计的，因此在其上实现端到端测试要困难得多，您可以添加例如 phantomjs 启动器，但它永远不会与使用 Selenium 的真实浏览器测试相同......我认为两者如果您有适配器，它们可以运行任何 js 测试框架... Mocha、jasmine、qunit 等...

永恒之后：

可以使用 Karma 编写 e2e 测试。您需要创建一个 iframe 或打开一个新窗口并运行一个脚本，该脚本从父框架或窗口进行导航、触发事件、提交表单等。测试页面需要允许您的 Karma 服务器使用 CORS，或者您需要禁用浏览器安全性。我正在开发一个[e2e 测试库](https://github.com/inf3rno/e2e)，它正是这样做的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T02:18:48.100

Selenium 有几个版本，其中最新的（我相信）是 Selenium Web 驱动程序，它允许您创建一个驱动程序，通过模拟与用户界面交互的操作（通过 Json）为您处理浏览器金属丝）。

我目前对 Karma 的理解（我可以补充的是非常有限的）是它严重依赖于执行 javascript。因此，Karma 必须在元素上调用更改事件（如“模糊”和“悬停”），而 Selenium 只需单击、制表符、将光标移动到。Selenium 的浏览器仅限于[此处](http://seleniumhq.org/about/platforms.html)网页上指定的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T11:13:39.023

这取决于你在测试什么。如果您使用 javascript 编写单元测试 - 通过 jasmine/mocha/chai 或等效的 - 业力严重依赖 javascript 而 selenium 不依赖的论点 - 是多余的。

在我的所有经验中，我与很少有专门的自动化测试人员合作过，虽然 selenium 语言可能是他们的选择，但 selenium 方法库不像 jquery 这样的等效选择器引擎那么容易记忆。

专门的自动化测试人员学习语言的困难，以及开发人员对学习较少语言的兴趣缺乏使公司长期缺乏投资于更复杂的自动化测试的投资

多年来，已经有一些使用 selenium 的 jquery 增强实现，但没有一个真正拥有大量的追随者，而且大多数都是用 java 编写的。

Webdriverio 有一个 npm 包有一些 jquery 功能 - [https://www.npmjs.com/package/webdriverio-jquery](https://www.npmjs.com/package/webdriverio-jquery)

Karma 有办法导入整个 jquery 引擎 - [https://github.com/bessdsv/karma-jasmine-jquery](https://github.com/bessdsv/karma-jasmine-jquery)

这取决于正在测试的内容。如果你在测试前端代码，那么使用 javascript 是有意义的，而且使用 jquery 比使用 selenium 语言更容易，而且目前 karma 对 jquery 的支持比 webdriver 更好。

使用 jquery 进行自动化测试将使可转移技能进入开发，反之亦然，开发人员进入自动化测试。

# windows-8 - 在 Windows 8 中使用 Spy++

> ID：13964246
> 
> 赞同：0
> 
> 时间：2012-12-20T02:07:21.333
> 
> 标签：windows-8, spy++

我正在 Windows 8 中编写程序。
现在我在使用 SPY++ 时遇到了一个问题。

通常，我们可以在 Windows 7 中从 SPY++ 获得“Window Proc”。
但在 Windows 8 中，我只能获得“（不可用）（Unicode）”。
我尝试过的程序是“安装向导”。

有没有人也遇到过熟悉的问题？
我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:14:52.853

您可能正在使用 Spy++ 32 位来监视 64 位应用程序。尝试使用 Spy++ 64 位。

# machine-learning - 具有诸如 hasDate、hasLocation、第一个单词等特征的朴素贝叶斯文本分类器

> ID：13964262
> 
> 赞同：4
> 
> 时间：2012-12-20T02:09:43.950
> 
> 标签：machine-learning, bayesian, classification

我正在尝试使用朴素贝叶斯文本分类器。我已经在代码中创建了一个词袋方法。在我的文档中，我注意到某些分类所特有的许多特征。这些特征的示例包括文档是否包含位置、日期或名称。这些都是布尔值，可以在文本分类之前确定。还有其他功能，例如第一个单词是什么等。

我了解基本的朴素贝叶斯方法。但未能找到有关将这些特征合并到分类器中的信息。

我的问题是是否可以将我上面提到的功能包含在词袋中？如果是这样，是否有这样的例子，我可以效仿。如果不是这种情况，您会推荐什么？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:23:43.727

在朴素贝叶斯框架内，没有什么能阻止您添加不基于词袋表示的附加功能。假设您有一个基于词袋特征的类似然 p(document|class_1) = l_1。您有理由相信一些二元特征 b_1 和 b_2 也将有助于分类（这些可以是分别包含日期和时间的文档，以使示例具体化）。

您估计概率 p(b_1 = 1 | class_1) = (# of docs in class 1 with b_1 = 1) / (#of docs in class 1)---p(b_1 = 0 | class_1) = 1 - p( b_1 = 1 | class_1)。您对第 2 类和对这两个类的特征 b_2 执行相同的操作。现在将这些特征添加到分类规则中特别简单，因为朴素贝叶斯只是假设特征独立。所以：

p( class_1 | 文档 ) \propto p(class_1) x l_1 xp(b_1|class_1) xp(b_2|class_1)

其中 l_1 的含义与以前相同（基于 BOW 特征的可能性），对于 p(b_i|class_1) 术语，您可以使用 p(b_i=1|class_1) 或 p(b_i=0|class_1) 术语，具体取决于什么b_i 的值实际上是。这可以以相同的方式扩展到非二进制特征，并且您可以继续添加您的心脏内容（尽管您应该知道您假设特征之间是*独立*的，并且您可能希望切换到不不要做这个假设）。

# c# - 处理多个按键并检测 keyup 事件

> ID：13964265
> 
> 赞同：1
> 
> 时间：2012-12-20T02:10:16.523
> 
> 标签：c#, winforms, keyboard, keydown, keyup

我正在制作一个简单的游戏，我使用以下代码来检测光标键：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (Connection == null || Connection.IsOpen == false)
        return true;

    Thread.Sleep(SleepTime);

    switch (keyData)
    {
        case Keys.Up:
            GoForward();
            return true;

        case Keys.Right:
            GoRight();
            return true;

        case Keys.Left:
            GoLeft();
            return true;

        case Keys.Down:
            GoBackward();
            return true;

        case Keys.Space:
            Beep();
            return true;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

我还使用此代码来确定用户是否释放了先前按下的键：

```
private void MainForm_KeyUp(object sender, KeyEventArgs e)
{
    StopRoomba();
} 
```

我现在有 2 个问题：我想添加用户可以同时按下例如 UP 和 RIGHT 光标的情况，以便角色向上移动。如何在我的代码中检查这种情况？

还会发生一些奇怪的事情（或者可能是默认系统）。我可以一次按 3 个光标键，或者例如我按住 UP 键，然后按住 RIGHT 键，同时按住 UP 和 RIGHT，同时按住 DOWN，我的代码对所有三个代码都有反应。在下图中，您可以看到红色方向已被按下并被我的代码检测到（红色 = 按下）：

![在此处输入图像描述](../Images/4e8fd66c92483e7981b2094047f5f4a7.png)

我的第二个问题是`MainForm_KeyUp` **有时**无法检测到按键释放并且角色一直朝该方向移动。

任何提示/帮助将被应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:17:59.327

Keys 是一个标记的枚举。这意味着您可以使用按位比较来查看是否同时按下了多个键。

```
case Keys.Up & Keys.Right:
    ...
    break; 
```

您还可以使用以下检查来检查单个键：

```
if ((keyData & Keys.Up) == Keys.Up) 
    GoForward();
if ((keyData & Keys.Right) == Keys.Right) 
    GoRight(); 
```

# key - Pig - 键的多个值

> ID：13964269
> 
> 赞同：1
> 
> 时间：2012-12-20T02:10:42.493
> 
> 标签：key, apache-pig, key-value

我编写了一个 Pig 脚本，它将通过 Python UDF 执行一些图像处理。

做了一些操作后，我有类似的东西（例如）：

```
A = load 'data.txt' using PigStorage('|') as (name:chararray, pixelIntensity:float);

B = group A by pixelIntensity;

dump B; 
```

B 是这样的：

```
(131.0,{(image1,jpg,131.0), (image2.jpg,131.0), (image3.jpg,131.0)})
(140.0,{(image5.jpg,140.0), (image5.jpg,140.0)})
(150.0,{(image4.jpg,150.0}) 
```

如果我要去

```
dump A; 
```

我会得到以下信息：

```
(image1.jpg,131.0)
(image2.jpg,131.0)
(image3.jpg,131.0)
(image4.jpg,150.0)
(image5.jpg,140.0) 
```

所以我基本上使用它们的平均像素强度作为关键对它们进行了分组。

我的问题是这样的：

我只能从 B 中的每一行中提取 1 个元素吗？例如，我会喜欢

```
(image1.jpg,131.0)
(image4.jpg,150.0)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:43:15.487

嵌套`FOREACH`的 a`LIMIT`应该做你想做的事：

```
A = LOAD 'data' using PigStorage(',') AS (name:chararray,pixelIntensity:float);
B = GROUP A BY pixelIntensity;
C = FOREACH B {
    D = LIMIT A 1;
    GENERATE flatten(D);
};
STORE C INTO 'res'; 
```

# javascript - 如何从 flickr api 自动调整照片的大小？

> ID：13964271
> 
> 赞同：2
> 
> 时间：2012-12-20T02:10:55.077
> 
> 标签：javascript, if-statement, flickr, autoresize

对于我最近的项目，我想使用来自 flickr api 的图像，但是当图像进入时，大多数图像对于我放置它的地方来说太大了。我被告知要做一个 if 语句，并从来自 api 的原始图像中获取长度和宽度，然后将它们相除，然后将它们乘以所需的宽度。else 则相反（而不是宽度高度）。这是我想出的，但无法让它发挥作用。有人可以告诉我我做错了什么吗？

```
var dimensions = getDimensions(photos[p].width_m, photos[p].height_m);
var m1window = addWindow(photos[p].title, photos[p].url_m, dimensions[0], dimensions[1]);

function getDimensions( w, h ) {
    var array = [wi, he];
    var he;
    var wi;
    if ( wi > he ) {
        wi = 100;
        he = w/h*100;
    } else {
        wi = w/h*100;
        he = 100;
    }    
    return array;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:32:36.227

我不确定我是否理解您的问题，但是如果您的问题是您需要将图像大小调整为具有最大宽度和高度的某个容器，那么我认为您想要的是这样的函数（使用 JQuery ):

```
function resizeImage($image, maxHeight, maxWidth){
    var ratio=1;
    var ratiox=1;
    var ratioy=1;    
    var imgWidth=$image.width();    
    var imgHeight=$image.height();

    if(imgWidth> maxWidth){
        ratiox=maxWidth/imgWidth;
    }
    if(imgHeight> maxHeight){
        ratioy=maxHeight/imgHeight;
    }
    ratio = (ratiox>ratioy)?ratioy:ratiox;
    $image.width(imgWidth*ratio);
    $image.height(imgHeight*ratio);
} 
```

**JSFiddle 示例：http:** [//jsfiddle.net/8uJbY/2/](http://jsfiddle.net/8uJbY/2/)

（如果这是你需要的但你不能使用 JQuery 我可以在没有 JQuery 的情况下重写这个函数）

# opencv - 用于大文件的 OpenCV 视频捕获

> ID：13964278
> 
> 赞同：3
> 
> 时间：2012-12-20T02:12:23.717
> 
> 标签：opencv, avi, large-file-support

我将 OpenCV 2.4.3 与我自己的 64 位二进制文​​件一起使用，这些二进制文件也是用 QT 4.8.3 构建的。我正在使用 DirectShow 进行视频捕捉，最近遇到了一个我无法解决的问题。即，以下代码在小于 2043 帧的未压缩 .avi 文件上完美运行。

```
VideoCapture src = "D:/TestVideo/BigFile.avi";
Mat img;
while( src.read(img) )
{
 imshow("Input", img);
 waitKey(30);  
} 
```

但是， src.read(img) 在第 2043 帧返回 false。

它在不同的 Windows 7、64 位平台和所有大于 2043 帧的 .avi 文件上执行此操作。我怀疑这很重要，但视频是 640x480、8 位、1 和 3 通道。

有没有人见过这个问题，你能推荐一个解决方案吗？

谢谢， TR

# html - 如何使 html5 部分元素居中？垂直的

> ID：13964280
> 
> 赞同：0
> 
> 时间：2012-12-20T02:13:25.167
> 
> 标签：html, css, centering

这里基本上是我的 html 结构，内容部分是我想要在页眉和页脚之间居中的部分，以便在所有分辨率上它都在中间。我尝试使用 table 方法，在该方法周围放置一个带有 display:table 的部分，然后将内容部分设置为 display:table-cell; 垂直对齐：中间；但它似乎会影响 div/section 在内容中的定位，并将屏幕左上角的部分定位在具有 position:absolute; 的 header 元素的顶部。

```
<header>
</header>
<section id="container">
<section id="content">
</section>
</section>
<footer>
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:24:30.180

让我们假设：

```
div {width: 300px; height: 200px;} 
```

你可以加：

```
div {position: absolute; top: 50%; left: 50%; margin: -100px 0 0 -150px;} 
```

在 body 标签内的所有元素周围放置一个“包裹”是一种很好的做法。

让我知道这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T11:09:17.823

对于第一列；

```
float: left;
position: absolute;
left: 50%; 
```

以此类推；

```
float: left;
position: absolute;
left: 70%; 
```

但这种方法效率低下，您可能希望只`float:left;`在 div 内部使用。

# java - 返回字符串长度为 0 的 HttpResponse

> ID：13964281
> 
> 赞同：5
> 
> 时间：2012-12-20T02:13:30.307
> 
> 标签：java, android

我正在尝试在 Android APP 中的服务器上发出 HTTPGet 请求，但是当我更改字符串中的 httpresponse 时，字符串的长度为 0。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet("http://"+server+path+"?assets="+URLEncoder.encode(query, "US-ASCII")+"&lt="+localTime+"&to="+timeOffset);
HttpResponse response = httpclient.execute(httpget);
System.out.println("Status"+ response.getStatusLine());
System.out.println("Length "+org.apache.http.util.EntityUtils.toString(response.getEntity()).length());
return org.apache.http.util.EntityUtils.toString(response.getEntity()); 
```

目录：

```
I/System.out(22344): StatusHTTP/1.1 200 OK
I/System.out(21737): Length 0 
```

uri 很好，当我在浏览器中复制/粘贴它时，我得到如下结果：

```
{"ads":[{"i"...],"pxs":{}} 
```

有谁知道为什么我的字符串是空的？

更新1：

```
 long localTime = System.currentTimeMillis();
    Date date = new Date();
    @SuppressWarnings("deprecation")
    int timeOffset = date.getTimezoneOffset (); 
```

更新 2：

我添加了这一行：

```
httpget.setHeader("User-Agent", "Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)"); 
```

现在我有这个错误：

目录

```
 E/AndroidRuntime(23584): FATAL EXCEPTION: AsyncTask #2
 E/AndroidRuntime(23584): java.lang.RuntimeException: An error occured while executing doInBackground()
 E/AndroidRuntime(23584):   at android.os.AsyncTask$3.done(AsyncTask.java:278)
 E/AndroidRuntime(23584):   at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 E/AndroidRuntime(23584):   at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 E/AndroidRuntime(23584):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 E/AndroidRuntime(23584):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 E/AndroidRuntime(23584):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
 E/AndroidRuntime(23584):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 E/AndroidRuntime(23584):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
 E/AndroidRuntime(23584):   at java.lang.Thread.run(Thread.java:864)
 E/AndroidRuntime(23584): Caused by: java.lang.IllegalStateException: Content has been consumed
 E/AndroidRuntime(23584):   at org.apache.http.entity.BasicHttpEntity.getContent(BasicHttpEntity.java:84) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:29:49.087

```
System.out.println("Length "+org.apache.http.util.EntityUtils.toString(response.getEntity()).length());
return org.apache.http.util.EntityUtils.toString(response.getEntity()); 
```

您正在使用它两次。这就是为什么你得到

```
java.lang.IllegalStateException: Content has been consumed 
```

尝试将其设置为参考。

```
 HttpEntity entity = response.getEntity();
            String responseText = EntityUtils.toString(entity); 
```

然后用 responseText 做你必须做的事情。

# php - 读取数据库内容，转换为字符串

> ID：13964283
> 
> 赞同：0
> 
> 时间：2012-12-20T02:13:54.287
> 
> 标签：php, mysql, database

我目前坚持如何读取数据库的内容并将它们转换为字符串。我的数据库中有一些 varchar 值，我想做的是创建一个 PHP 文件，在其中我使用 MySQL 选择列出数据库的内容（我知道如何执行此操作），然后将它们转换为字符串，以便我可以将它们存储为用于执行附加过程的变量。我不确定如何将它们转换为字符串（即使在尝试研究它之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:30:05.637

返回的值是**var**`mysql_fetch_array()`类型。意味着它们不是特定类型。您可以直接将它们用作字符串。看看这个教程。

 **[MySql SELECT 语句](http://www.w3schools.com/php/php_mysql_select.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:44:01.937

```
$objStmt = $this->objDb->prepare("
    SELECT
        t.columnOne,
        t.columnTwo
    FROM
        tblTable AS t
    WHERE
        t.someColumn = 1);
");

$objStmt->execute();
$objStmt->bind_result($strCol1, $strCol2);

while ($objRow = $objStmt->fetch()) {

    /*
     * at this point, the two values can be treated
     * as strings, even if they are numeric
     */

    [...do something with $strCol1 and $strCol2...]
} 
```**

# mysql - MYSQL 查询 WHERE IN 与 OR

> ID：13964286
> 
> 赞同：4
> 
> 时间：2012-12-20T02:14:25.193
> 
> 标签：mysql, sql, where-in

我开发了一个使用 OR 查询的系统：

```
SELECT * FROM tableA 
JOIN tableB ON (idA = idB)
WHERE idA = 1 OR 
      idA = 2 OR 
      idA = 3 OR 
      idA = 4 OR 
      idA = 5 ...... OR 
      idA=100 
```

与查询 IN 比较：

```
SELECT * 
FROM tableA JOIN tableB ON (idA = idB)
WHERE idA IN (1,2,3,4,5,......,100) 
```

MYSQL 数据库中最好的查询是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T02:18:16.423

用于。

IN 将使用索引。

或将（afaik）不使用索引。

此外，这一点不容小觑，IN 版本：

*   使用更少的代码
*   更容易维护
*   更容易理解

仅出于这些原因，我就会准备好遭受一点性能来获得代码质量，但实际上你也获得了性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T02:20:10.307

在这种情况下，您应该通过 EXPLAIN 运行查询，以检查它如何针对您的数据工作。例如：

```
EXPLAIN SELECT * FROM tableA

JOIN tableB ON (idA = idB)

WHERE idA = 1 OR idA = 2 OR idA = 3 OR idA = 4 OR idA = 5 ...... OR idA=100 
```

这将提供几个统计数据并显示它是否使用索引、顺序扫描等。从中您将能够确定最适合您的情况的方法。

但是，总的来说，我会选择IN。

以前的工作已经确定 IN 几乎总是会更快：[MYSQL OR vs IN 性能](https://stackoverflow.com/questions/782915/mysql-or-vs-in-performance#2481458)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:20:30.177

```
SELECT * FROM tableA

JOIN tableB ON (idA = idB)

WHERE idA <= 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T02:47:17.503

如果您有 In 作为替代品，切勿使用 Or。

它使您的查询超级慢

# php - 运行插入查询，获取 Id 并使用 Id 更新另一个表

> ID：13964288
> 
> 赞同：1
> 
> 时间：2012-12-20T02:15:08.843
> 
> 标签：php, mysql, mysql-insert-id

我需要在表中插入一个新行，然后获取该行的 ID 并更新另一个表。这就是我所拥有的：

```
$leadSQL="INSERT INTO $leadsTable (leadName, leadStatus, leadDescription, leadOpportunity, leadSource, leadSourceDescription, id, leadSince, contactID)
                     VALUES ('$_POST[leadName]', '$_POST[leadStatus]', '$_POST[leadDescription]', '$_POST[leadOpportunity]', '$_POST[leadSource]', '$_POST[leadSourceDescription]','$_POST[id]','$leadSince','$_POST[contactID]')";
$leadQuery = mysql_query($leadSQL);
$lastLeadID = mysql_insert_id();
$updateContactSQL = "UPDATE $contactsTable SET leadID = $lastLeadID WHERE contactID = $_POST[contactID]";
$updateContactQuery = mysql_query($updateContactSQL); 
```

一切正常.. 除了它将重复的行插入到潜在客户表中。我尝试将更新查询放入 if 语句中，它做了同样的事情（这只是为了尝试“某事”）。如果我删除 $lastID = mysql_insert_id(); 它只插入一行，但显然不更新联系人表。所以我很确定它必须与 mysql_insert_id() 相关。我需要它使用插入到潜在客户表中的行的新 ID 来更新联系人表。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:38:52.480

出于所有意图和目的，您应该拥有的东西。

你可以试着把脂肪剪掉一点。由于您的查询不需要资源（它是一个 INSERT），因此您可以摆脱该变量。我只是把 mysql_insert_id() 放在你的更新语句中。

像这样：

```
$leadSQL="INSERT INTO $leadsTable (leadName, leadStatus, leadDescription, leadOpportunity, leadSource, leadSourceDescription, id, leadSince, contactID)
                     VALUES ('$_POST[leadName]', '$_POST[leadStatus]', '$_POST[leadDescription]', '$_POST[leadOpportunity]', '$_POST[leadSource]', '$_POST[leadSourceDescription]','$_POST[id]','$leadSince','$_POST[contactID]')";
mysql_query($leadSQL);
$updateContactSQL = "UPDATE $contactsTable SET leadID = '".mysql_insert_id()."' WHERE contactID = $_POST[contactID]";
mysql_query($updateContactSQL); 
```

# javascript - jQuery - 如何根据类获取元素的动态宽度

> ID：13964290
> 
> 赞同：1
> 
> 时间：2012-12-20T02:16:05.773
> 
> 标签：javascript, jquery, html, css, jquery-animate

我有这个包含两个 div 的基本动画。一个 div 有一个类，`single`另一个 div 有一个类`double`。每个都有 39px 的高度。

`.single`元素的宽度为 100px，`.double`元素的宽度为 200px，但是，我从`.single`50px 和`.double`100px 的 div 开始，然后使用 jQuery，我（希望）根据它的宽度为每个 div 设置动画班级。这有点难以解释，所以我将向您展示代码格式：

**HTML：**

```
<div id="block" class="red single"></div>
<div id="block" class="blue double"></div> 
```

**CSS：**

```
#block {
    display: block;
    height: 16px; /* animate to: 39px */
    background-color: #eee;
}

#block.red {
    background-color: red;
}

#block.blue {
    background-color: blue;
}

#block.single {
    width: 50px; /* animate to: 100px */
}

#block.double {
    width: 100px; /* animate to: 200px */
} 
```

**jQuery** :

```
 if($("#block").hasClass("double")) {
        respectiveWidth = "200px"
    }

    if($("#block").hasClass("single")) {
        respectiveWidth = "100px"
    }

    $("#block").delay(delayRate).animate({
        height: "145px",
        width: respectiveWidth
    }, 900); 
```

我*会这样做*：

```
$("#block").animate({
    height: "39px"
});

$("#block.single").animate({
    width: "100px"
});

$("#block.single").animate({
    width: "200px"
}); 
```

但它在动画`#block.single`之前动画`#block.double`，我希望同时动画它们。

任何帮助将不胜感激，我准备好了。呵呵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:31:14.310

ID 必须是唯一的，您可以使用类来代替，尝试以下方法。

```
<div class="block red single"></div>
<div class="block blue double"></div> 
```

```
$(".block").animate({
    height: "39px"
});

$(".block.single").animate({
    width: "100px"
}, 700);

$(".block.double").animate({
    width: "200px"
}, 700); 
```

[http://jsfiddle.net/eCUf8/](http://jsfiddle.net/eCUf8/)

# php - 调用 API 的函数中的 PHP 长/纬度函数

> ID：13964291
> 
> 赞同：1
> 
> 时间：2012-12-20T02:16:08.067
> 
> 标签：php, api, coordinates, distance

前言：我在这方面不是最擅长的，所以如果我忽略了一些基本的东西，请原谅。

我正在使用 API 来提取“附近地点”的业务数据，并且我想在其中使用距离函数来计算以英里为单位的距离（使用每个位置的坐标）。

单独运行，每个都可以正常工作，但是当我尝试将距离计算器嵌入到 API 请求中时，出现了问题。

**例如，这很好用（坐标在这里是硬编码的）：**

```
<?php
function distance($lat1, $lon1, $lat2, $lon2, $unit) {
    $theta = $lon1 - $lon2;
    $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) +  cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta));
    $dist = acos($dist);
    $dist = rad2deg($dist);
    $miles = $dist * 60 * 1.1515;
    $unit = strtoupper($unit);

    if ($unit == "K") {
        return ($miles * 1.609344);
    } else if ($unit == "N") {
        return ($miles * 0.8684);
    } else {
        return $miles;
    }
}
echo distance($latitude, $longitude, 29.46786, -98.53506, "M") . " Miles<br>";
?> 
```

现在，`$latitude`并`$longitude`引入业务 A 及以上的长/纬度，我在这里硬编码了一些坐标，只是为了测试它是否计算距离。这行得通。

当我尝试将此代码放入从 API 中提取“附近”业务的脚本中时（我可以毫无问题地提取坐标），我遇到了问题。

如何在函数中运行函数，以便我可以提取附近企业的坐标并将它们放入上面（我有硬编码的数字）？

**编辑：这是我试图将上面的代码放在里面的代码......我想在下面显示“交易通过”之前使用上面的函数 - 以显示业务的距离（以英里为单位）**

```
<?php
if  (! in_array('curl', get_loaded_extensions())) {
    die("Curl Extension is not loaded");
}

$key = 'REMOVED FOR EXAMPLE';

$search = "http://api.yipit.com/v1/deals/?key=$key&lat=$latitude&lon=$longitude&radius=10";

$search_init = curl_init();
curl_setopt($search_init, CURLOPT_HTTPHEADER, array( 'Expect:' ) );
curl_setopt($search_init, CURLOPT_URL, $search);
curl_setopt($search_init, CURLOPT_RETURNTRANSFER, TRUE);

$yipit = curl_exec($search_init);

$obj = json_decode($yipit, true);

if (isset($obj["response"]["deals"])) {
    $cnt = count($obj["response"]["deals"]);

    for($i=0;$i<$cnt;$i++) {
        echo "<p>

<h3>".$obj["response"]["deals"][$i]["business"]["name"]." - ".$obj["response"]["deals"][$i]["price"]["formatted"]." for ".$obj["response"]["deals"][$i]["yipit_title"]." (".$obj["response"]["deals"][$i]["value"]["formatted"]." Value)</h3><br>

<img src=".$obj["response"]["deals"][$i]["images"]["image_small"].">

    <b></b><br>
    Deal via ".$obj["response"]["deals"][$i]["source"]["name"]."<br>
    Expires: ".$obj["response"]["deals"][$i]["end_date"]."<br>
    <h3><a href=". $obj["response"]["deals"][$i]["url"].">See more information on this deal</a></h3><br>
    </p><br><br> ";
    }
} else {
    var_dump($yipit);
}

?> 
```

# eclipse - eclipse插件目录中的两个不同插件安装

> ID：13964294
> 
> 赞同：1
> 
> 时间：2012-12-20T02:16:31.680
> 
> 标签：eclipse, eclipse-plugin

在eclipse安装的plugins目录下，有目录和jar文件。

两者有什么区别？为什么有些文件部署在 jar 文件中，而有些文件部署为目录。

![在此处输入图像描述](../Images/b122a0724598eec78121e1b140d7b12b.png)

我什至发现有些目录里面没有jar文件，但是有些目录里面有一个或者多个jar文件。

![在此处输入图像描述](../Images/4f4a2d67b76b28ba8725dffc0da6f44f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:33:11.977

有两种不同的方式来构建插件：作为 jar 或“分解”，这意味着它是一个文件夹而不是一个 jar，这主要是插件开发人员感兴趣的，例如文件可以在有目录时直接寻址而不是比在罐子里，但对于用户来说，应该没有区别。

多次使用同一个插件意味着您可能安装了多个版本。我不知道为什么......也许你是单独手动安装的。为避免这种情况，请考虑使用，`Help > Check for Updates`而不是`Help > Install New Software...`下次。

# c++ - 打印出列表元素问题

> ID：13964297
> 
> 赞同：0
> 
> 时间：2012-12-20T02:16:40.970
> 
> 标签：c++

我正在编写一个从链接列表中打印出项目的函数。它打印出来的东西很好，但是一旦它到达终点并碰到一个我认为为空或没有初始数字的节点，它就会打印出一个随机数（我猜是存储在计算机中）。我怎样才能解决这个问题？

```
void printList(intNode*& intList)
{
intNode* current;

if (intList==NULL)
{
    cout << "No elements to print-list is empty." << endl;
}
else
{
    cout << "Elements in list:" << endl;
    current = intList;
    while (current!=NULL)
    {
        cout << current->intValue <<endl;
        current=current->nextNode;
    }
    if (current==NULL)
    {
        cout << "End of list" << endl;
    }
}
} 
```

这是我创建列表的地方：

```
 void createList(intNode*& intList)
 {
  intNode* lastInt; //points to last integer in file
  lastInt = NULL;
  int fileInt; //int read from input file

ifstream intInputFile;
intNode* anotherInt;
anotherInt = new intNode;

intInputFile.open("intInput.txt");
if (intInputFile.is_open())
{
    cout << "intInput.txt open successful" << endl;
    cout << "check" <<endl;
    while(intInputFile>>fileInt)
    {
        if(intList==NULL)
        {
            intList = anotherInt;
            lastInt = anotherInt;
            lastInt->nextNode = NULL;
            lastInt->nextNode = new intNode;
        }
        else
        {
            lastInt = lastInt->nextNode;
            lastInt->nextNode = NULL;
            lastInt->nextNode = new intNode;
        }
        lastInt->intValue = fileInt;
        cout << lastInt->intValue <<endl;
    }
    lastInt->nextNode->nextNode=NULL;
    intInputFile.close();
    cout << "List created from input file" << endl;
}
else
{
    cout << "intInput.txt open unsuccessful" << endl;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:22:10.600

如果你不初始化你的整数，当你访问它们时，你不能确定它们会返回什么。我建议初始化您的所有整数，如果它仍然发生，请按照 Karthik 的评论进行操作，并检查您的列表是如何初始化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:53:30.947

你做事的顺序不对。您在其中创建新节点，`lastInt->nextNode`然后将值分配给`lastInt->intValue`. 这意味着您将始终在列表末尾有一个尚未初始化的节点。

整个事情看起来相当复杂。这个怎么样：

```
intNode * intList = NULL;
intNode * lastInt = NULL;

while( intInputFile>>fileInt )
{
    // Initialise a new node.
    intNode *newNode = new intNode;
    newNode->nextNode = NULL;
    newNode->intValue = fileInt;

    // Append to list.
    if( intList == NULL ) {
        intList = newNode;
    } else {
        lastInt->nextNode = newNode;
    }
    lastInt = newNode;

    // Make noise...        
    cout << newNode->intValue <<endl;
} 
```

还有其他用于填充列表的选项，包括在完成循环之前不设置“NULL”（所有中间的都是冗余的），或者使用虚拟头节点。但是，让我们保持简单。

请注意，我在循环中使用了一个临时变量，以非常清楚我将数据分配给哪个节点。

# bash - Linux - 删除控制文件中未列出的所有扩展名文件？

> ID：13964305
> 
> 赞同：0
> 
> 时间：2012-12-20T02:17:48.070
> 
> 标签：bash

我想删除所有名称*不*包含在另一个文件中的具有特定扩展名 (.xsl) 的文件。也就是说，如果我有一个像

```
a.xsl
b.xsl
c.xsl 
```

和像这样的目录结构

```
./a.xsl
./d.xsl
./folder1/b.xsl
./folder1/folder2/c.xsl
./folder1/folder2/e.xsl 
```

我希望能够删除`d.xsl`and `e.xsl`，但不能删除`a.xsl`,`b.xsl`或`c.xsl`。目标外壳是 BASH。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:51:17.417

像这样的东西（未测试）：

```
for fn in $(find -type f -name '*.xsl')
do
  echo ${fn##*/} | grep -vf file1 >/dev/null && rm $fn
done 
```

其中 file1 是包含文件条目列表的文件。

`${fn##*/}`这将删除所有内容，直到最后一个斜杠单独给出文件名。这是`grep`针对文件的 ped，如果未重新发送，则删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:17:48.070

此命令将执行此操作：

```
find -type f -name '*.xsl' -exec bash -c \
    'BN=`basename {}`; [[ -z `grep $BN used_xsl` ]] && svn rm {}' \; 
```

但我想知道是否有更好的方法来做到这一点？这似乎是一种相当低效/迂回的方式来做我想做的事......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:43:55.763

如果您的路径名中没有空格，那么您可以使用`fgrep`or`grep -F`巧妙地完成任务：

```
find . -name '*.xsl' -print | grep -F -v -f excluded.files | xargs rm -f 
```

如果您可能必须处理任意路径名（换行符、空格等），那么您必须更加努力。

# php - MySQL 在 PHP 中使用 where 语句插入忽略？

> ID：13964306
> 
> 赞同：1
> 
> 时间：2012-12-20T02:17:48.213
> 
> 标签：php, mysql

我在导入 .csv 文件的 PHP 文件中有以下 MySQL 语句。该语句成功地忽略了精确的记录匹配，但我在表中得到了一些重复记录，其中记录不是 100% 精确。我确实注意到，在发生重复的情况下，纬度和经度仍然始终相同。如果这两个字段在表中已经匹配，有没有办法用某种 WHERE 语句来扩展它以排除导入记录？我尝试了各种 WHERE 尝试并得到 MySQL 错误？

```
 $query = "insert ignore into $databasetable values('$linemysql');"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:26:17.963

您可以直接在 mysql 中的多个列上添加唯一索引。

在 mysql 中，它类似于（对于内存中的 2 列......）：

```
ALTER TABLE `your_table` ADD UNIQUE `some_name_like_position` ( `LATITUDE` , `LONGITUDE` ); 
```

# php - PHP为mysql交互创建函数还是每次都使用纯代码？

> ID：13964311
> 
> 赞同：0
> 
> 时间：2012-12-20T02:18:01.987
> 
> 标签：php, mysql, function

我想知道为简单的 MySQL 操作（如 SELECT、INSERT、DELETE、UPDATE 等）创建几个函数是否有任何缺点

```
function sql_select($table, $values, $condition='WHERE true', $limit='') {
   global $sql_obj;

   $select_query = "SELECT {$values} FROM {$table} WHERE {$condition} {$limit}";
   $result = $sql_obj->run_query($select_query,"select");

   return $result;
}

sql_select('user_table', 'name, address, phone', 'user_id = ' .mysql_real_escape_string($_POST["user_id"]), 'LIMIT 0, 1' ); 
```

上面的功能可以升级一点，以允许更多的功能。我知道它的好处，但有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:20:34.543

没有值得一提的缺点。事实上，作为一般做法，您应该将常用代码分解为函数。正如您所指出的，这将允许您添加额外的增强功能，而无需遍历代码中使用这些功能的所有位置。

唯一需要担心的事情（与代码重复相比，这是一个小问题）是您的函数是否足够通用或与其他假设相结合。例如，您的函数依赖于全局 $sql_obj。用户不知道这一点；如果用户覆盖了这个全局，或者有另一个他/他希望你的函数使用的对象怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:21:29.400

我能想到的唯一缺点是运行复杂的查询很困难/很烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:22:54.970

也许你正在寻找一个`Object Relational Mapper`？也许[学说](http://www.doctrine-project.org/)框架对您来说很有趣。

# php - 特定查询语法在 php mysqli 中无效，但在 MySQL CLI 中无效。

> ID：13964316
> 
> 赞同：1
> 
> 时间：2012-12-20T02:18:30.087
> 
> 标签：php, mysql, mysqli

当我尝试在 PHP mysqli 中执行它时，这个查询给了我语法错误，但在 MySQL CLI 中执行时却没有。谁能告诉我这里发生了什么。

这是查询：

```
DROP TABLE IF EXISTS `wp_commentmeta`;
    CREATE TABLE `wp_commentmeta` (
      `meta_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
      `comment_id` bigint(20) unsigned NOT NULL DEFAULT '0',
      `meta_key` varchar(255) DEFAULT NULL,
      `meta_value` longtext,
      PRIMARY KEY (`meta_id`),
      KEY `comment_id` (`comment_id`),
      KEY `meta_key` (`meta_key`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

这是测试代码：

```
<?php

$sql="
    DROP TABLE IF EXISTS `wp_commentmeta`;
    CREATE TABLE `wp_commentmeta` (
      `meta_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
      `comment_id` bigint(20) unsigned NOT NULL DEFAULT '0',
      `meta_key` varchar(255) DEFAULT NULL,
      `meta_value` longtext,
      PRIMARY KEY (`meta_id`),
      KEY `comment_id` (`comment_id`),
      KEY `meta_key` (`meta_key`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1;
";

$conn=mysqli_connect('localhost','root','yesthereis','test');
if(mysqli_query($conn, $sql)){
    echo "Inserted\n";
}else{
    echo "Failed\n".mysqli_error($conn)."\n";
}
?> 
```

...它的执行：

```
jgalley@jgalley-debian:~/code/$ php test.php 
Failed
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `wp_commentmeta` (
      `meta_id` bigint(20) unsigned NOT NULL AUT' at line 2 
```

如您所见，它在 CLI 中运行良好：

```
jgalley@jgalley-debian:~/code/mysqlsync2$ mysql -u root -p'yesthereis' test
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 213
Server version: 5.1.63-0+squeeze1 (Debian)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> DROP TABLE IF EXISTS `wp_commentmeta`;
Query OK, 0 rows affected, 1 warning (0.05 sec)

mysql>     CREATE TABLE `wp_commentmeta` (
    ->       `meta_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
    ->       `comment_id` bigint(20) unsigned NOT NULL DEFAULT '0',
    ->       `meta_key` varchar(255) DEFAULT NULL,
    ->       `meta_value` longtext,
    ->       PRIMARY KEY (`meta_id`),
    ->       KEY `comment_id` (`comment_id`),
    ->       KEY `meta_key` (`meta_key`)
    ->     ) ENGINE=MyISAM DEFAULT CHARSET=latin1;
Query OK, 0 rows affected (0.01 sec)

mysql> quit
Bye 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T02:23:04.813

您不能在一次`mysqli_query`调用中运行两个查询。将查询字符串一分为二并分别执行。（或者，正如 TheVedge 在评论中正确指出的那样，在您的脚本`mysqli_multi_query`中用作替代品。）`mysqli_query`

这有助于缓解 SQL 注入。

# java - 从 2D 操纵杆获取 3D 旋转轴和角度

> ID：13964324
> 
> 赞同：2
> 
> 时间：2012-12-20T02:19:15.063
> 
> 标签：java, android, opengl-es, libgdx

我在左下角的屏幕上有一个 2D 虚拟操纵杆。我在原点 (0, 0, 0) 处绘制了一个 3D 球体……我的相机可以绕球体旋转。我正在尝试使用操纵杆移动相机，但不知道该怎么做。我需要从我的操纵杆创建一个轴角旋转并更新使用四元数表示其方向的摄像机角度。这是我目前拥有的：

我的相机旋转存储为四元数：

```
// The current rotation
public Quaternion rotation = new Quaternion();

// The temp quaternion for the new rotation
private Quaternion newRotation = new Quaternion(); 
```

旋转和相机通过以下方法更新：

```
// Update the camera using the current rotation
public void update(boolean updateFrustum)
{
    float aspect = camera.viewportWidth / camera.viewportHeight;
    camera.projection.setToProjection(Math.abs(camera.near), Math.abs(camera.far), camera.fieldOfView, aspect);
    camera.view.setToLookAt(camera.position, tmp.set(camera.position).add(camera.direction), camera.up);

    // Rotate the current view matrix using our rotation quaternion
    camera.view.rotate(rotation);

    camera.combined.set(camera.projection);
    Matrix4.mul(camera.combined.val, camera.view.val);

    if (updateFrustum)
    {
        camera.invProjectionView.set(camera.combined);
        Matrix4.inv(camera.invProjectionView.val);
        camera.frustum.update(camera.invProjectionView);
    }
}

public void updateRotation(float axisX, float axisY, float axisZ, float speed)
{
    // Update rotation quaternion
    newRotation.setFromAxis(Vector3.tmp.set(axisX, axisY, axisZ), ROTATION_SPEED * speed * MathHelper.PIOVER180);
    rotation.mul(newRotation);

    // Update the camera
    update(true);
} 
```

我目前`updateRotation()`这样打电话：

```
// Move the camera
if (joystick.isTouched)
{
    // Here is where I'm having trouble...
    // Get the current axis of the joystick to rotate around
    tmpAxis = joystick.getAxis();
    axisX = tmpAxis.X;
    axisY = tmpAxis.Y;

    // Update the camera with the new axis-angle of rotation

    // joystick.getSpeed() is just calculating the distance from 
    // the start point to current position of the joystick so that the 
    // rotation will be slower when closer to where it started and faster 
    // as it moves toward its max bounds

    controller.updateRotation(axisX, axisY, axisZ, joystick.getSpeed());
} 
```

我目前`getAxis()`在`Joystick`课堂上的方法：

```
public Vector2d getAxis()
{
    Vector2d axis = new Vector2d(0.0f, 0.0f);
    float xOffset = 0;
    float yOffset = 0;
    float angle = getAngle();

    // Determine x offset
    xOffset = 1f;

    // Determine y offset
    yOffset = 1f;

    // Determine positive or negative x offset
    if (angle > 270 || angle < 90)
    {
        // Upper left quadrant
        axis.X = xOffset;
    }
    else
    {
        axis.X = -xOffset;
    }

    // Determine positive or negative y offset
    if (angle > 180 && angle < 360)
    {
        // Upper left quadrant
        axis.Y = yOffset;
    }
    else
    {
        axis.Y = -yOffset;
    }

    return axis;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:30:18.567

我将只使用 3 个向量来定义相机：位置、向前、向上（右 = 交叉（向前，向上））。然后对于您的情况，您总是在寻找 (0,0,0) 所以只需在输入上更新这 3 个向量，如下所示：

上/下：

```
right = cross(forward, up);
posititon = normalized(position + up*(input*zoomFactor)) * length(position); //zoomFactor might be useful if you are looking from close to reduce the move but is optional
forward = normalized((0,0,0)-position);
up = cross(right, forward);//should already be normalized Note: might be cross(forward, right) 
```

向左/向右走：

```
right = cross(forward, up);
position = normalized(position + right*(input*zoomFactor)) * length(position);
forward = normalized((0,0,0)-position);
right = cross(forward, up); //you do need to update it
up = cross(right, forward); //Note: might be cross(forward, right) 
```

向左/向右倾斜：

```
up = normalize(up + right*input); //no zoom factor needed here 
```

放大/缩小：

```
position = position + forward*input;//in your case you might just want to set it to some percentage: position = position + forward*(length(position) * (input)); 
```

这种方法应该只适用于通常情况下的小输入值。相对于输入的角度变化将是 alpha = atan(input) 因此，如果输入为无穷大，则角度将变化 90 度。但是您可以轻松保存/加载状态，您可以手动设置相机位置和伴随向量。因此，您拥有调用“lookAt”所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:53:33.503

您可能希望根据其当前旋转状态更新旋转，而不是仅在固定的全局坐标轴上旋转（上和右）我的意思是，在开始位置，例如相机朝向 (0,0,1) 向量：

*   对象在 (0,0,0)
*   凸轮位于 (0,0,-2)
*   cam dir 指向 (0, 0, 1)

如果将操纵杆向上推 90º，相机应该：

*   移动到 (0, 2, 0) 位置
*   cam dir 现在指向 (0, -1, 0)

如果您现在将操纵杆 ro 向右推 90º，相机应如下所示：

*   凸轮在 pos (2, 0, 0)
*   cam dir 向量 (-1, 0, 0)

话虽如此，您可以通过让相机处于固定位置并旋转相机正在寻找的对象来实现相同的目的。

一种简单的方法是生成一对四元数，每个轴旋转一个。但是要旋转的轴会随着对象的旋转而变化。如果相机向上旋转向下看对象中心，则四元数应定义为围绕右轴 (1, 0, 0) 旋转 x 度，以便相机向上旋转。一旦对象旋转以使相机看起来像是在向上，对象“向上”向量不再是全局向上，而是由前一个四元数旋转的“全局向上向量”。

方法：

1- 对于每一帧，通过使用当前对象旋转来旋转全局上下矢量来计算局部上下矢量。

2- 一旦你有了本地的上右矢量，读取操纵杆平移量。

3- 创建两个围绕局部向量旋转的新四元数。将两个四元数相乘，结果应与当前对象四元数相乘（相乘）。

4-将最终的四元数转换为矩阵并将其用作当前的模型视图矩阵。

**编辑：**

一些使用 ShadingZen 类的代码（我不使用 libGDX）：

```
class Camera{
static Vector3 mRight = new Vector3(1.f, 0.f, 0.f);
static Vector3 mUp = new Vector3(0.f, 1.f, 0.f);
static Vector3 mFront = new Vector3(0.f, 0.f, 1.f); // Maybe your front is (0, 0, -1) or (0, 1, 0)

Vector3 mLocalRight; = new Vector3(1.f, 0.f, 0.f);
Vector3 mLocalUp = new Vector3(0.f, 1.f, 0.f);
Vector3 mLocalFront = new Vector3(0.f, 0.f, 1.f);

Quaternion mRotation = new Quaternion(0.f, 0.f, 0.f, 1.f); // Identity rotation
Vector3 mCameraInitialPos = ...

...

/**
 * Compute local axis vectors given the current camera rotation 
 * tickDeltaTime is useful to prevent "jumps" in movement 

*/
private void updateRotation(){
    // Get local (rotated) vectors (current local axis)
    mLocalRight = mRotation.mul(mRight); // Rotate mRight using mRotation quaternion
    mLocalUp = mRotation.mul(mUp); 
    mLocalFront = mRotation.mul(mFront);

    Quaternion rotationAroundRightAxis = new Quaternion(mLocalRight, mJoystickAmmountY*tickDeltaTime);
    Quaternion rotationAroundUpAxis = new Quaternion(mLocalUp, mJoystickAmmountX*tickDeltaTime);

    // Chain rotations
    mRotation = mRotation.mul(rotationAroundRightAxis.mul(rotationAroundUpAxis));

    // Now mRotation contains this step or tick's rotation ammount nad past rotations
    mCameraPos = mRotation.mul(mCameraInitialPos);
}

public void update(boolean updateFrustum)
{
    updateRotation();

    float aspect = camera.viewportWidth / camera.viewportHeight;
    camera.projection.setToProjection(Math.abs(camera.near), Math.abs(camera.far), camera.fieldOfView, aspect);
    camera.view.setToLookAt(mCameraPos, mLocalFront, mLocalUp); // This probably computes your view matrix

    // Not sure if libGDX needs this or calculates internally
    camera.combined.set(camera.projection);
    Matrix4.mul(camera.combined.val, camera.view.val);

    if (updateFrustum)
    {
        camera.invProjectionView.set(camera.combined);
        Matrix4.inv(camera.invProjectionView.val);
        camera.frustum.update(camera.invProjectionView);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:44:52.027

我会给你一些思考的建议。可能不是一个完整的答案，但它应该有所帮助！

1-真的有必要拥有一个数学上完美的棍子吗？我的意思是，你可以检测到中心的位移，并从中计算出你的角度。例如。摇杆以 [x,y] 为中心，用户手指在 [x+a, y+b]，然后您的旋转角度可以是 func(a)、func(b)，其中 func() 是您定义的函数 (几乎总是凭经验）。例如：

```
 angleX = (a/30) % 360; //you should consider maximum displacements may be 
```

2-小心你如何使用你的四元数，

```
rotation.mul(newRotation); 
rotation.leftMul(newRotation); 
```

不等价。通常，您使用第二个选项按您指定的轴旋转旋转的物体，无论该模型是否已经旋转。这就是您想要做的，如果用户向上移动，则向上旋转相机（您不在乎相机是否已累积旋转）。

3-要完成我的“廉价实现”答案，您可以使用 Libgdx 的 setEulerAngles(float yaw, float pitch, float roll) 轻松计算您的四元数。所以：

```
 newRotation.setEulerAngles(angleX, angleY, 0). 
```

记住要左乘这个四元数，这样你就可以在所有三个轴上旋转！

可能缺少几个细节。可能是您应该在 setEulerAngles 中切换参数，可能是您的凸轮不会看到正确的位置，但我只是想表明有时廉价的解决方案是最好的解决方案（因为它是 3 线性近似值）。至少对于快速原型应该足够好！

# php - 使用 Facebook SDK PHP 登录 - 用户必须单击两次登录

> ID：13964327
> 
> 赞同：1
> 
> 时间：2012-12-20T02:19:47.247
> 
> 标签：php, facebook, oauth-2.0, facebook-php-sdk

我正在尝试使用 PHP Facebook SDK 让用户使用 facebook 登录。

我开始使用从 GitHub 下载的 .zip 中提供的示例文件。

当用户单击登录时，他们将被带到身份验证页面。在允许我的应用程序之后，它们将被重定向回应该打印用户对象的原始页面。但事实并非如此。再次单击登录会跳过身份验证页面（因为用户已经允许该应用程序），然后打印对象。

任何帮助，将不胜感激。

```
<?php 
/**
 * Copyright 2011 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License. You may obtain
 * a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

require '../src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => '1111111111',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxx'
));

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
  echo '1 <br>';
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    echo '2 <br>';
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '3 <br>';
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  echo '4 <br>';
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  echo '5 <br>';
  $loginUrl = $facebook->getLoginUrl(array(
      'scope' => 'email,read_stream,publish_stream',
      'display' => 'touch'
      ));
}

// This call will always work since we are fetching public data.
$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
    <style>
      body {
        font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
      }
      h1 a {
        text-decoration: none;
        color: #3b5998;
      }
      h1 a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php echo '6 <br>'; print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php echo '7 <br>'; print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

    <h3>Public profile of Naitik</h3>
    <img src="https://graph.facebook.com/naitik/picture">
    <?php echo $naitik['name']; ?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:33:52.453

```
 <div id="fb-root"></div>
    <script src="//connect.facebook.net/en_US/all.js"></script>
    <script>
      window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
          appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to access the session?
          xfbml      : true  // parse XFBML tags on this page?
        });

        FB.Event.subscribe('auth.login', function(response) {
        window.location.href=window.location.href;
    }

      };

      // Load the SDK's source Asynchronously
      // Note that the debug version is being actively developed and might 
      // contain some type checks that are overly strict. 
      // Please report such bugs using the bugs tool.
      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ false));
    </script> 
```

# git - git diff 同一分支上的两个文件，相同的提交

> ID：13964328
> 
> 赞同：109
> 
> 时间：2012-12-20T02:19:49.557
> 
> 标签：git

抱歉，如果这个问题存在，我惊讶地找不到它：/

如何`git diff`在同一分支和同一提交中的两个文件之间执行？

IE`git diff fileA.php fileB.php`

（理想情况下，提供易于阅读的颜色编码`git`......或类似于 BeyondCompare 程序所做的！）

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2014-01-06T15:46:01.440

如果要`git diff`在两个任意文件上使用，可以使用`git diff --no-index <file_a> <file_b>`. 不需要跟踪这两个文件`git`即可。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-12-20T02:21:34.533

你不需要 git，只需使用`diff fileA.php fileB.php`（或 vimdiff，如果你想并排比较）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-20T02:49:30.963

如果您要比较的文件在您的工作副本中，您可以`diff`按照其他人的指示简单地使用，但是如果文件处于某个修订版中，您可以为每个文件指定一个修订版

```
git diff <revision_1>:<file_1> <revision_2>:<file_2> 
```

如此处所述：[https ://stackoverflow.com/a/3343506/1815446](https://stackoverflow.com/a/3343506/1815446)

在您的情况下（为两个文件指定相同的修订版）：

```
git diff <revisionX>:fileA.php <revisionX>:fileB.php 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-20T04:12:46.807

为了使常规 gnu diff 看起来更像 git diff，我建议使用以下参数：

```
diff -burN file_or_dir1 file_or_dir2 
```

（`-b`忽略空格，`-u`统一差异，`-r`递归，`-N`将丢失的文件视为`/dev/null`）。

它工作得很好，但仍然没有颜色，而且几乎没有 git 样式的自动分页。如果您想同时修复两者（我愿意），请`colordiff`像这样安装和使用它：

```
colordiff -burN file_or_dir1 file_or_dir2 | less -R 
```

这提供了非常接近实际的输出和界面`git diff`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T02:21:48.960

如果你想区分同一目录中的两个本地文件，只需使用 diff。

```
diff fileA.php fileB.php 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-12-20T02:22:49.933

只需使用常规差异。

```
diff -Nua fileA.php fileB.php 
```

# c# - 为什么我不能对从 DynamicObject 继承的对象使用 GetType().GetProperty()？

> ID：13964332
> 
> 赞同：4
> 
> 时间：2012-12-20T02:20:23.113
> 
> 标签：c#, system.reflection, dynamicobject

我正在尝试使用反射从动态类中检索字段或属性，但是当我使用 Getfield 或 GetProperty 调用动态对象时，它永远找不到该字段并且没有输入任何动态 object.Try* 方法。

不知道为什么这不适用于.net4。

请参阅下面的 testdyn 动态测试类。

我这样称呼它：

```
 dynamic td = new testdyn();
        td.SendDebugEvent += new DebugDelegate(debug);
        td.test(); 
```

得到这些结果：

```
one = -1 
two = -1 
fiddle = -1 
test = -1 
set: fiddle = 241827974 
fiddle = -1 
```

期待看到

```
one = 1
two = 2
fiddle = 3
test = -1
set: fiddle = 241827974
fiddle = 241827974 
```

我究竟做错了什么？

注意：如果我调用'td.fiddle'，它确实有效......但你不知道创建类的名称但你知道它可以访问它，这似乎很奇怪？

从这篇文章看来，动态对象可能不支持反射，因为它实现了 idynamicmetaobjectprovider

[如何反映动态对象的成员？](https://stackoverflow.com/questions/2634858/how-do-i-reflect-over-the-members-of-dynamic-object)

问题是使用反射的外部应用程序正在使用此代码。

如果你有想法，请告诉我。

代码如下。

```
 public delegate void DebugDelegate(string msg);
 public class testdyn : System.Dynamic.DynamicObject
    {
        List<string> items = new List<string>(new string[] { "one", "two", "fiddle", "my", "lou" });
        List<int> vals = new List<int>( new int[] { 1,2,3,5,8 });

        public event DebugDelegate SendDebugEvent;
        void debug(string msg)
        {
            if (SendDebugEvent!=null)
                SendDebugEvent(msg);
        }

        public void set(string name, int v)
        {
            var idx = items.IndexOf(name);
            if (idx < 0)
                return;
            vals[idx] = v;
            debug("set: " + name + " = " + v);
        }

    int get(string name)
    {
        object o = null;
        var t = GetType();
        try {
        o = t.GetProperty(name).GetValue(this, null);
        int v = (int)o;
        return v;
        } catch 
        {
            try
            {
                var f = t.GetField(name);
                o = f.GetValue(this);
                return (int)o;
            }
            catch 
            { 

            }
        }
        return -1;
    }

        string g(string name) { return name+" = "+get(name).ToString(); }
        Random r = new Random();
        public void test() { test(string.Empty); }
        public void test(string mytmp)
        {
            var t = GetType();
            // do some reads
            debug(g("one"));
            debug(g("two"));
            debug(g("fiddle"));
            debug(g("test"));
            // do some sets
            set("fiddle", r.Next());
            // they should change
            debug(g("fiddle"));
        }

        public override bool TryInvokeMember(System.Dynamic.InvokeMemberBinder binder, object[] args, out object result)
        {
            debug("got invoke member");
            return base.TryInvokeMember(binder, args, out result);
        }

        public override bool TrySetMember(System.Dynamic.SetMemberBinder binder, object value)
        {
            debug("got setmember");
            return base.TrySetMember(binder, value);
        }

        public override bool TryGetIndex(System.Dynamic.GetIndexBinder binder, object[] indexes, out object result)
        {
            debug("got getindex");
            return base.TryGetIndex(binder, indexes, out result);
        }

        public override bool TryGetMember(System.Dynamic.GetMemberBinder binder, out object result)
        {
            // get index of column value trying to be retrieved
            var idx = items.IndexOf(binder.Name);
            // default to empty
            result = string.Empty;
            // return error if we can't find
            if (idx < 0)
            {
                return base.TryGetMember(binder, out result);
            }
            // get result
            result = vals[idx];
            return true;
        }

        public override bool TryInvoke(System.Dynamic.InvokeBinder binder, object[] args, out object result)
        {
            debug("got invoke");
            return base.TryInvoke(binder, args, out result);
        }

        public override bool TryCreateInstance(System.Dynamic.CreateInstanceBinder binder, object[] args, out object result)
        {
            debug("got create instance");
            return base.TryCreateInstance(binder, args, out result);
        }

        public override IEnumerable<string> GetDynamicMemberNames()
        {
            debug("got member names");
            return items.ToArray();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:39:29.897

反射不适用于动态属性（尽管如果您实现[ICustomTypeProvider](http://msdn.microsoft.com/en-us/library/system.reflection.icustomtypeprovider.aspx)可能会有 .net4.5 例外）

我编写了一个名为 ImpromptuInterface 的开源 DLR 瑞士军刀框架（在 nuget 中可用）。在其中，我有一个静态方法，旨在桥接动态属性，原因是外部代码使用反射来动态访问属性。`Impromptu.ActLikeProperties(this object originalDynamic, IDictionary<string, Type>propertySpec)` [ActLike 属性](http://code.google.com/p/impromptu-interface/wiki/UsageAdvanced)。

问题是您需要向我的方法提供属性名称和返回类型的字典，然后将结果传递给外部 api，我的方法通过`DynamicObject`使用发出的代理包装您的方法，该代理使用 dlr 转发您描述的属性调用在你的字典中从它的静态定义到你的动态类型。

```
td.ActLikeProperties(new Dictionary<string,type>{{"one":typeof(int)},{"two":typeof(int) },{"fiddle":typeof(int) },{"test":typeof(int) }}); 
```

# amazon-web-services - 允许客户通过我的 SES 帐户发送电子邮件的业务可以建立吗？

> ID：13964338
> 
> 赞同：0
> 
> 时间：2012-12-20T02:20:50.540
> 
> 标签：amazon-web-services, amazon-ses

是否可以让我的客户使用我的 SES 帐户透明地进行电子邮件营销。换句话说，我将为他们提供 SaaS 产品，他们将使用它来创建电子邮件活动（比如 MailChimp），他们会付钱给我。（当然，我将支付 AWS 费用）。

显然，应该假设不时会有麻烦的客户违反垃圾邮件规则。当然，他们与我公司的合同一经发现就会立即终止。但这将如何影响我的 SES 帐户？是否有可能创建一个模型，我作为帐户持有人不会受到惩罚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:58:44.407

是的，这是可能的。但我不知道我会推荐它。您最多只能使用 1,000 个“发件人”电子邮件地址，并且从每天 10,000 封邮件的最大配额开始。电子邮件地址的数量是一个硬性限制，而发送配额会根据您的声誉如何变化而增加/减少。是的，如果您的客户开始通过您的帐户发送垃圾邮件，您的所有客户都会受到处罚。

我得到的印象是，SES 的设计更多是为了集成到主要不是电子邮件的 SaaS 应用程序中。例如，如果您提供了一个 SaaS 应用程序，允许您的客户查看 Ebay 的价格变化并收到电子邮件通知，或者如果您正在托管一个簿记应用程序：允许您的客户通过电子邮件将发票发送给他们的客户。

不过，还有很多其他选择：

*   [JangoSMTP](http://www.jangosmtp.com)
*   [山魈](http://mandrill.com/)
*   [发送网格](http://www.sendgrid.com)
*   ETC...

尽管我是一名 AWS 人员，但我认为交易电子邮件有比 SES 更好的选择。

# web-services - 如何在 flex 中显示 Web 服务结果？

> ID：13964339
> 
> 赞同：0
> 
> 时间：2012-12-20T02:20:56.417
> 
> 标签：web-services, apache-flex, webservices-client

嗨，我有以下弹性代码，但我不知道如何显示 xml 的结果。目前文本框的结果是 String[] 但我需要它将 xml 的结果显示为 100,200,300,400,500 谢谢

```
<?xml version="1.0" encoding="utf-8"?> 

<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           xmlns:hellos="services.hellos.*"
           minWidth="955" minHeight="600"> 
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function 
        form_creationCompleteHandler(event:FlexEvent):void
        {
            sayHelloResult.token = hellos.sayHello();
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <hellos:Hellos id="hellos"/>
    <s:CallResponder id="sayHelloResult"/>
</fx:Declarations>
<s:Form id="form" creationComplete="form_creationCompleteHandler(event)">
    <s:FormItem label="SayHello">
        <s:TextInput text="String[]"/>
    </s:FormItem>
</s:Form>

 </s:Application> 
```

xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"  
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-
instance">
  <soapenv:Body>
    <sayHelloResponse xmlns="http://services">
     <sayHelloReturn>100</sayHelloReturn>
     <sayHelloReturn>200</sayHelloReturn>
     <sayHelloReturn>300</sayHelloReturn>
     <sayHelloReturn>400</sayHelloReturn>
     <sayHelloReturn>500</sayHelloReturn>
    </sayHelloResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:41:23.570

将 id 添加到您的标签：

```
 <s:TextInput id="resultText" text=""/> 
```

将处理程序添加到呼叫响应者的结果事件：

```
 <s:CallResponder id="sayHelloResult" result="processResult()" /> 
```

像这样应用响应者：

```
protected function processResult():void{
    var r:Array = [];
    for each(var xml:XML in sayHelloResult.lastResult..*::sayHelloReturn){
        r.push(xml.toString());
    }
    resultText.text = r.join(',');
} 
```

在处理 xml 时，不要忘记命名空间：http: [//jodieorourke.com/view.php ?id=76&blog=news](http://jodieorourke.com/view.php?id=76&blog=news)

# database - 何时使用一个字段而不是 2 个作为主键？

> ID：13964340
> 
> 赞同：1
> 
> 时间：2012-12-20T02:20:59.647
> 
> 标签：database, database-design

我经常看到一些这样的数据库设计：

情况1：

**用户表**

--id[自动增加]

- 用户名

- 密码

- 电子邮件

案例二：

**用户表**

- 用户名

- 密码

- 电子邮件

**角色表：**

--角色ID

--角色名

**用户表角色：**

--id[自动增加]

- 用户名

--角色ID

我有以下问题：

在案例 1 中：为什么不使用**UserName**字段作为主键（**PK**）？为什么使用另一个文件喜欢**id** [自动增加] 作为 PK？如果只有**UserName**和**Email**，为什么不使用 Email 作为**PK**呢？那么，最好的方法是什么？

案例2：在UserRoleTable中，为什么不同时使用**UserName**和**RoleID**作为PK呢？为什么使用另一个文件喜欢**id** [自动增加] 作为**PK**？那么，在这种情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:28:11.070

> 案例 1：为什么不使用 UserName 字段作为主键（PK）？为什么使用另一个文件喜欢 id [自动增加] 作为 PK？

在`UserTable.UserName`此数据模型中具有内在含义，称为**“自然键”**。`UserTable.id`另一方面， 是“**代理键”**。

如果你的模型中有一个自然键，你不能用代理键消除它，你可以替换它。所以问题是：你只使用自然键，还是使用自然键*和*代理键？这两种策略实际上都是有效的，并且各有利弊。

使用代理键的典型原因：

*   为了使**子表**中的 FK更小（在这种情况下为整数与字符串），以实现更小的存储和更好的缓存。
*   避免需要 ON UPDATE CASCADE。
*   对 ORM 工具的友好性。

另一方面：

*   您现在有两个键而不是一个，需要一个额外的索引，使**父表**更大且对缓存不太友好，并且由于索引维护而减慢了 INSERT/UPDATE//DELETE。¹
*   可能需要更多 JOIN-ing ²。
*   并且可能无法很好地使用[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)。³

> 如果只有 UserName 和 Email，为什么不使用 Email 作为 PK？

设计者可能希望避免在用户更改电子邮件时需要的 ON CASCADE UPDATE。

> 案例2：在UserRoleTable中，为什么不同时使用UserName和RoleID作为PK呢？

如果同一用户/角色对不能有多个连接，则无论如何您都必须拥有一个密钥。

除非有 FK 引用的子表`UserTableRole`或使用了不友好的 ORM，否则没有理由需要额外的代理 PK。

* * *

*¹如果使用集群，自然键下的二级索引可能会额外“胖”（因为它包含集群键的副本，通常是PK）并且在查询时需要双重查找（因为聚集表中的行没有稳定的物理位置，因此必须通过集群键定位，除非一些 DBMS 特定的优化，如 Oracle 的“rowid 猜测”）。*

*²例如，您无法`UserName`仅通过阅读联结表找到 - 您必须将其与`UserTable`.*

*³代理通常以对客户端应用程序没有意义的方式排序。自动增量代理键的顺序取决于 INSERT 的顺序，并且查询通常不会在“按插入顺序的用户范围”上进行。诸如 GUID 之类的一些代理可能是随机排序的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:22:46.980

我能想到的不使用像 UserName 这样的东西作为主键的原因之一是它们可能会发生变化。将任何暴露给外界的东西作为主键都会冒着改变这些东西的风险，最好有一个稳定的主键。

如果用户更改了电子邮件或用户名怎么办？你真的想改变你所有关系中的钥匙吗？IMO，最好有一个永远不会看到外界的稳定密钥，每个人都对此一无所知，因此无论数据库中可能发生什么变化，它都可以保持稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:45:13.040

[您的问题本质上是使用natural vs surrogate key](http://en.m.wikipedia.org/wiki/Surrogate_key)的优缺点。

灵活性是首要考虑的问题，使用代理键可以更轻松地更改其用户名。将来您可能需要允许重复的用户名，例如合并。

速度是另一个问题，在像用户表这样经常访问的表上，对整数进行连接通常比对字符串进行连接要快。

另一个是表大小，当用作外键时，您必须存储整个键的值。代理非常紧凑，比自然键小得多。

大多数 ORM 还需要使用代理，因为它提供了表之间的一致性。

此外，在许多系统上，假设电子邮件是唯一的可能不一定安全。

我同意在像 UserRole 这样的关系表中，通常最好使用外键中的主复合键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T02:56:59.227

在您的示例中，我可以想到在用户名上使用代理主键 (Id) 的几个原因。

1.  如果有的话，id 字段很少会受到更新。如果用户名是主键，您必须在更新时级联到使用用户名作为外键的所有表。
2.  表现。int 比较优于字符串比较。
3.  id 键在其他表中作为外键时会占用更少的存储空间。
4.  id 字段允许您不公开敏感数据。例如，考虑一个网络应用程序 url domain/posts/user/1242 vs domain/posts/user/myusername

对于您的第二个问题，使用 userid 比使用 UserTableRole 中的用户名更好。对于这个多对多表是否也包含一个代理键是否更好，这是一个见仁见智的问题。我讨厌对多对多表使用代理 id 键，并且通常只制作两个外键 id 的复合主键。我会在这里考虑代理键的唯一一次是如果我需要在另一个表中将它用作外键。

# android - Android：蓝牙 UUID 如何工作？

> ID：13964342
> 
> 赞同：87
> 
> 时间：2012-12-20T02:21:06.203
> 
> 标签：android, bluetooth, uuid, rfcomm

我不明白蓝牙 UUID 表示什么。UUID 是否表示协议（例如[RFCOMM](http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/UUID.html)）？如果是这样，为什么这些`createRfcommSocketToServiceRecord()`方法需要 UUID，当它们在其名称中指定 rfcomm 时？为什么 BluetoothChat 示例代码有一个看似任意的硬编码 UUID？

出现我的问题是因为，根据[这个问题](https://stackoverflow.com/questions/12485785/nullptr-exception-on-socket-connect-galaxy-tab-2-running-android-4-04)，当运行 4.0.4 的设备尝试使用反射连接（到外部的非 Android 设备）时，我得到一个空指针异常。但是，该问题的解决方案对我不起作用。`UUID muuid = device.getUuids()[0].getUuid();`引发异常。

**编辑：我已经通过根据**[这个答案](https://stackoverflow.com/a/11622794/1286571)（使用`UUID.fromString("00001101-0000-1000-8000-00805f9b34fb");`）硬编码串行端口服务的 UUID 解决了这个问题。

我对为什么我需要提供一个 UUID 来使用`createInsecureRfcommSocketToServiceRecord(),`但不使用反射方法来创建不安全的 rfcomm 套接字感到更加困惑。

任何人都可以理顺我吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-13T16:38:06.007

UUID 用于唯一标识信息。它识别蓝牙设备提供的特定服务。该标准定义了一个基本的`BASE_UUID: 00000000-0000-1000-8000-00805F9B34FB`.

医疗保健传感器等设备可以提供服务，将前八位数字替换为预定义的代码。例如，提供 RFCOMM 连接的设备使用[短代码：0x0003](https://www.bluetooth.org/en-us/specification/assigned-numbers/service-discovery)

因此，Android 手机可以连接到设备，然后使用服务发现协议 (SDP) 来找出它提供的服务 (UUID)。

在许多情况下，您不需要使用这些固定的 UUID。例如，如果您正在创建一个聊天应用程序，一部 Android 手机与另一部使用相同应用程序并因此使用相同 UUID 的 Android 手机进行交互。

因此，您可以为您的应用程序设置任意 UUID，例如，使用网络上众多随机 UUID 生成器之一（[例如](http://www.famkruithof.net/uuid/uuidgen)）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-20T17:22:50.600

它通常代表蓝牙设备支持的一些常用服务（协议）。

创建您自己的 rfcomm 服务器（使用`listenUsingRfcommWithServiceRecord`）时，您应该指定自己的 UUID，以便连接到它的客户端可以识别它；`createRfcommSocketToServiceRecord`这是需要 UUID 参数的原因之一。

否则，一些常用服务具有相同的 UUID，只需找到您需要的并使用它即可。

看[这里](https://www.bluetooth.org/en-us/specification/assigned-numbers/service-discovery)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-07-03T21:02:37.600

在蓝牙中，所有对象都由 UUID 标识。这些包括服务、特性和许多其他的东西。蓝牙为标准对象维护一个分配编号的数据库，并为供应商分配子范围（已经为预订支付了足够的费用）。您可以在此处查看此列表：

[https://www.bluetooth.com/specifications/assigned-numbers/](https://www.bluetooth.com/specifications/assigned-numbers/)

如果您正在实施标准服务（例如，串行端口、键盘、耳机等），那么您应该使用该服务的标准 UUID——这将允许您与非您开发的设备进行互操作。

如果您正在实施自定义服务，那么您应该生成唯一的 UUID，以确保不兼容的第三方设备不会尝试使用您的服务，以为它是其他东西。最简单的方法是生成随机的，然后在您的应用程序中硬编码结果（当然，在将连接到您的服务的设备中使用相同的 UUID）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-14T03:49:06.487

UUID 在概念上类似于 Internet 中的端口号。然而，蓝牙和 Internet 之间的区别在于，在蓝牙中，端口号由 SDP（服务发现协议）服务器在运行时动态分配，其中每个 UUID 都被赋予一个端口号。其他设备将向注册在保留端口号下的 SDP 服务器询问设备上的可用服务，它会回复通过注册在不同 UUID 下彼此区分的不同服务。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-09T17:28:24.560

UUID 只是一个数字。除了您在 Android 应用程序的服务器端创建之外，它没有任何意义。然后客户端使用相同的 UUID 进行连接。

例如，在服务器端，您可以先运行 uuid = UUID.randomUUID() 来生成一个随机数，如 fb36491d-7c21-40ef-9f67-a63237b5bbea。然后将其保存，然后将其硬编码到您的侦听器程序中，如下所示：

```
 UUID uuid = UUID.fromString("fb36491d-7c21-40ef-9f67-a63237b5bbea"); 
```

您的 Android 服务器程序将侦听具有该 UUID 的传入请求，如下所示：

```
 BluetoothServerSocket server = mBluetoothAdapter.listenUsingRfcommWithServiceRecord("anyName", uuid); 
```

BluetoothSocket 套接字 = server.accept();

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T16:15:39.447

综上所述：`UUid`用于唯一标识应用程序。每个应用程序都有一个独特的`UUid`

因此，`UUid`对每个设备使用相同的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-20T06:38:14.397

UUID 代表通用唯一标识符。UUID 是一个简单的 128 位数字，在全球范围内唯一分布。

蓝牙通过空中发送数据，附近的所有设备都可以接收它。假设，有时您必须通过蓝牙发送一些重要文件，并且所有附近的设备都可以在范围内访问它。因此，当您与其他设备配对时，它们只需共享 UUID 编号并在共享文件之前进行匹配。当您发送任何文件时，您的设备会使用适当的设备 UUID 加密该文件并通过网络共享。现在范围内的所有蓝牙设备都可以访问加密文件，但它们需要正确的 UUID 号。因此，只有正确的 UUID 设备才能访问加密文件，其他设备将拒绝错误 UUID 的原因。

简而言之，您可以使用 UUID 作为在任意两个蓝牙设备之间共享文件的秘密密码。

# android - 附加 android 源后 Eclipse 弹出对话框缺少信息

> ID：13964344
> 
> 赞同：3
> 
> 时间：2012-12-20T02:21:18.510
> 
> 标签：android, eclipse, ide, javadoc, content-assist

When I type some class method, Eclipse* brings up a **dialog with completion suggestions** , and when one of those is selected, it will display another dialog showing the method **prototype** (returned value, parameters, etc), method description, as well as an指示该方法是否已弃用以及在哪个**API 级别**添加/弃用。

**但是在我附加了 android 源代码之后，我不再在这个对话框中看到原型或 API 指示。**

**无论如何我可以同时获得这些指示以及附加的资源吗？**为了这个目的必须一直分离和重新附加源，或者在网络浏览器中搜索，这真的很烦人而且很耗时。

**编辑：**我以这种方式附加源：右键单击项目->属性->Java构建路径->库->Android 4.2->android.jar->源附件->编辑->外部位置->外部文件夹- >“C:/Program Files/Android/android-sdk/sources”。Api 17 来源在那里。我的方法有问题吗？

问候

--
*面向移动开发人员的 Eclipse
版本：Juno Service Release 1
Build id：20121004-1855

也尝试过：
Eclipse SDK
版本：4.2.1
构建 id：M20120914-1800

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:22:52.583

尝试在 eclipse 中创建一个新工作区，并将源一次附加到项目目标 api-而不是最低 sdk 版本。

# ruby - “从最新版本安装”是什么意思？

> ID：13964350
> 
> 赞同：2
> 
> 时间：2012-12-20T02:21:37.903
> 
> 标签：ruby, bundler, gemfile

在 gems README 中很常见：

```
Installation:

gem 'foo'

Or, from the latest build:

gem 'foo', git: 'bar' 
```

为什么最新版本总是来自 git repo，而不是来自 gem 服务器？“最新版本”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:33:39.467

Gems 仅在开发中的离散点发布（例如，当某些里程碑，如新功能或错误修复完成时），RubyGems 仅托管这些离散版本。另一方面，“最新版本”是当时源代码库中存在的最新版本，并且包含最新的开发——可能包括一些错误、回归或不完整的功能，但也可能包括最新的错误修复和功能。

# caching - 从 Varnish 缓存中排除特定 URL

> ID：13964351
> 
> 赞同：5
> 
> 时间：2012-12-20T02:21:38.757
> 
> 标签：caching, varnish

我有一个看似简单的问题：

我只需要通过修改 default.vcl 从 Varnish 中排除主页。

我尝试了以下语法：

```
if (req.url == "http://www.test.com/") {
    return (pass);
} 
```

- 所有的变化（斜线等）。

我觉得我在这里遗漏了一些简单/基本的东西......谁能帮帮我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T10:17:44.613

`req.url`按照 http 标准保存 URL。在你的情况下是`/`. `req.http.host`是主机发送的地方。它对应于 HTTP 请求的基本结构。所以你的例子会写成：

```
if (req.http.host == "www.test.com" && req.url == "/") {
    return (pass);
} 
```

# python - Python web2py 打印到屏幕

> ID：13964352
> 
> 赞同：1
> 
> 时间：2012-12-20T02:21:47.780
> 
> 标签：python, web2py

我是编程新手（仍然是学生）。我正在自学 Python，尝试在网络服务器上运行程序，并决定使用 web2py，因为它适合像我这样的初学者。该程序在命令提示符下运行良好，但没有在它制作的网页上正确执行打印语句。我一直在浏览 web2py 文档和教程，试图找到如何基本上打印一些东西而不返回它并关闭函数。当我运行这个：

```
def main():
            url = "http://<someurl>"
            if url[len(url) - 1] == '/':
                url = url[:len(url) - 1]
            maxdepth = 3
            maxpages = 10
            index_cnt = 4
            index = crawl_web(url,maxpages,maxdepth)
            print "Printing index..."
            for i,e in enumerate(index):
                if i >= index_cnt:
                    return
                print "'{}' appears in the following urls:".format(e[0])
                for i,u in enumerate(e[1]):
                    print "    {}".format(u)
                    return "    {}".format(u)  ##only this line printed in web2py page 
```

只有最后的“返回”才会真正显示在页面上。我知道使用 web2py 时有一些不同的语法，但是我发现的示例代码似乎都显示了返回、response.flash、response.print、使用 print str(DIV()) 以及我发现的其他一些但无处可去和。同样，当我“返回索引”返回“无”时——我认为它会返回稍后应该由 for 循环打印的值。

'index()' 函数获取 url 的列表，但支持的函数相当长，但没有返回任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:08:06.123

如果您希望某些内容出现在浏览器中，请不要使用 print（即用于输出到 Python shell）。如果您希望浏览器显示某些内容，则您的函数必须这样`return`做（您也可以引发[`HTTP`异常](http://web2py.com/books/default/chapter/29/04#HTTP-and-redirect)，这最终是框架在您的函数返回响应时所做的）。

如果您还没有这样做，我强烈建议您阅读[本书](http://web2py.com/books/default/chapter/29)的前几章，以更好地了解框架（以及一般的 Web 框架）是如何工作的。特别是看[这里](http://web2py.com/books/default/chapter/29/04#Workflow)和[这里](http://web2py.com/books/default/chapter/29/01#Model-View-Controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:38:01.717

不要直接在控制器中使用打印。您可以返回`dict`到`str`必须使用模板语法进行打印的视图。

# apache-flex - Profiler：实时对象视图不显示所有包

> ID：13964360
> 
> 赞同：1
> 
> 时间：2012-12-20T02:22:17.250
> 
> 标签：apache-flex, air, flexbuilder, flash-builder

我在这里扔了一个冰雹玛丽，有没有人发现只有一小部分已知加载的类/实例正在运行，但由于某种原因，活动对象视图没有显示全部范围？

这与过滤无关，我什至删除了正常的 spark/mx/flash star.star 没有影响。这是一个 AIR 应用程序，但我们的绝大多数项目代码都不是 AIR 特定的。

据 Profiler 所知，它报告的总运行时间约为 1.5Mb，而 SystemTotal 实际上是 20-25Mb。显然，痕迹表明正在调用适当数量的构造函数。

我试过了：

1.  提升对类成员的变量引用认为函数范围可能隐藏了“新”
2.  宣布班级成员公开。
3.  升级到 FlashBuilder 4.7、AIR 3.1 - 效果相同

探查器“有点”意识到存在某些东西，因为许多实例都保存在 RobotLegs 框架中的数组/哈希表中：即，在 Object References 视图中查看时，Injector 的映射数组是正确的长度，但要打开它检查它的属性，除了完全限定的类名之外它是空白的。

这是非常令人沮丧的，因为我知道一个巨大的内存块正在一个特定的区域被吞噬，但这完全被隔离了。

修复？

# http - Sinatra（或者可能不是）重定向问题；传递给后续请求的参数

> ID：13964363
> 
> 赞同：1
> 
> 时间：2012-12-20T02:22:25.390
> 
> 标签：http, browser, sinatra

有什么不对劲。我有一个 get 端点，它接受一些参数，做一些事情然后重定向到'/'。Sinatra 在调用之前生成的响应看起来不错（正确的 'location' 标头和正确的 url）。问题是，浏览器尽管重定向到“/”，但仍将前一个请求中的参数附加到 url。这意味着，如果我刷新，它会失败。有人可以告诉我到底发生了什么吗？我认为问题出在 Sinatra，但也可能与浏览器有关。

编辑：

```
get '/connect' do
  puts params[:code]
  redirect to('/')
end 
```

这是路线。基本上，它是某个 oauth 服务提供商的 oauth 工作流的重定向端点。我最终没有被重定向到“/”，而是被重定向到“/#code=blablabla”，这意味着来自我的 oauth 端点的查询参数将作为散列参数传递给后续重定向。

# objective-c - 难以捕捉 OpenGL 和顶点数组对象的错误

> ID：13964367
> 
> 赞同：3
> 
> 时间：2012-12-20T02:22:42.723
> 
> 标签：objective-c, opengl, vertex-array

我无法发现这个 OpenGL 实现的错误。当我运行程序时，我唯一得到的是黑屏。我应该看到一个立方体。我没有收到任何错误。我怀疑罪魁祸首可能是 VAO：

```
// draws the view
-(void)drawRect:(NSRect)dirtyRect
{
// clear the viewport
glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

shaderProgramID = [self loadShaders];

// get uniform locations
uniformLocations[0] = glGetUniformLocation(shaderProgramID, "rotationX");
uniformLocations[1] = glGetUniformLocation(shaderProgramID, "rotationY");
uniformLocations[2] = glGetUniformLocation(shaderProgramID, "rotationZ");
uniformLocations[3] = glGetUniformLocation(shaderProgramID, "translation");
uniformLocations[4] = glGetUniformLocation(shaderProgramID, "projection");

// use this program
glUseProgram(shaderProgramID);

// create VAO
glGenVertexArraysAPPLE(1, &vao);
glBindVertexArrayAPPLE(vao);
glGenBuffers(3, vbo);

// bind and copy data for vertex position data
glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);
glBufferData(GL_ARRAY_BUFFER, sizeof(cubePositionData), cubePositionData, GL_STATIC_DRAW);
glVertexAttribPointer(TCV_VERTEX_POS_INDEX, TCV_NUM_POS_COMPONENTS, GL_FLOAT, GL_FALSE, 0, 0);
glEnableVertexAttribArray(TCV_VERTEX_POS_INDEX);

// bind and copy data for vertex color data
glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);
glBufferData(GL_ARRAY_BUFFER, sizeof(cubeColorData), cubeColorData, GL_STATIC_DRAW);
glVertexAttribPointer(TCV_VERTEX_COLOR_INDEX, TCV_NUM_COLOR_COMPONENTS, GL_FLOAT, GL_FALSE, 0, 0);
glEnableVertexAttribArray(TCV_VERTEX_COLOR_INDEX);

// bind and copy data for vertex indices data
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vbo[2]);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(cubeIndices), cubeIndices, GL_STATIC_DRAW);
glVertexAttribPointer(TCV_VERTEX_INDICES_INDEX, TCV_NUM_INDEX_ARRAY_COMPONENTS, GL_UNSIGNED_BYTE, GL_FALSE, 0, 0);
glEnableVertexAttribArray(TCV_VERTEX_INDICES_INDEX);

// load uniform data into shader program
glUniformMatrix4fv(uniformLocations[0], 1, GL_FALSE, rotationMatX);
glUniformMatrix4fv(uniformLocations[1], 1, GL_FALSE, rotationMatY);
glUniformMatrix4fv(uniformLocations[2], 1, GL_FALSE, rotationMatZ);
glUniformMatrix4fv(uniformLocations[3], 1, GL_FALSE, translationMat);
glUniformMatrix4fv(uniformLocations[4], 1, GL_FALSE, projectionMat);

// tell OGL to draw the cube, in this order
glDrawElements(GL_TRIANGLES, 12, GL_UNSIGNED_BYTE, cubeIndices);

// unbind VAO
glBindVertexArrayAPPLE(0);

// no longer using program
glUseProgram(0);

// flush buffer
glFlush();
[[self openGLContext] flushBuffer];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T20:22:30.930

我的 OpenGL 实验也有类似的问题。我还为顶点位置和顶点颜色数据使用了单独的缓冲区对象。我相信只有一个 GL_ARRAY_BUFFER 可以绑定到顶点数组对象。因此，将所有数据放入一个组合缓冲区，然后在该缓冲区中设置带有偏移量的属性指针。

您的 VBO / VAO 设置应类似于：

```
glGenVertexArrays(1, &vertexArray);
glBindVertexArray(vertexArray);

glGenBuffers(1,&vertexBuffer);
glBindBuffer(vertexBuffer);
glBindBufferData(GL_ARRAY_BUFFER, sizeof(cubePositionAndColorData), cubePositionAndColorData, GL_STATIC_DRAW);

glVertexAttribPointer(kPositionAttribute, NUM_VERTEX_COMPONENTS, GL_FLOAT, GL_FALSE, 0, 0);
// colorStartingIndex is probably just NUM_VERTEX_COMPONENTS*sizeof(GLfloat)
glVertexAttribPointer(kColorAttribute, NUM_COLOR_COMPONENTS, GL_FLOAT, GL_FALSE, 0, (void *)colorStartingIndex);

glEnableVertexAttribArray(kPositionAttribute);
glEnableVertexAttribArray(kColorAttribute);

glGenBuffers(1,&indexBuffer);
glBindBuffer(indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(cubeIndices), cubeIndices, GL_STATIC_DRAW);

glBindVertexArray(0); 
```

然后，在您的`-drawRect:`功能中，您可以使用该程序，设置您的制服并调用`glDrawElements()`：

```
glUseProgram(shaderProgramID);

// do the necessary uniform configuration
glUniformMatrix4fv(...)

glBindVertexArray(vertexArray);
glDrawElements(GL_TRIANGLES, 12, GL_UNSIGNED_BYTE, 0);

glBindVertexArray(0);

glUseProgram(0); 
```

另外两个值得注意的项目：

1.  我建议将所有缓冲区初始化移出您的`-drawRect:`方法，因为每次重新绘制视图时都会调用它。这意味着您将所有数据重新复制到每个`-drawRect:`.
2.  如果您使用的是更新版本的 osx，您应该考虑使用最新版本的 OpenGL ( `OpenGL/gl3.h`)。

# javascript - 当表达式不可能为 TRUE 时，它的计算结果为 TRUE，不是吗？

> ID：13964369
> 
> 赞同：2
> 
> 时间：2012-12-20T02:22:48.603
> 
> 标签：javascript, logic, expression, evaluation, operator-precedence

我进行了以下检查，以查看是否应将元素视为“悬停”。

我很困惑，因为我看到元素设置`state === 'hover'`在不应该设置的位置。

该`alert`消息更加令人困惑，因为它表明刚刚评估为 true 的表达式是不应该的（如果您从逻辑上考虑的话）。

```
if( (ig.gui.cursor.pos.x >= element.pos.x) 
    && (ig.gui.cursor.pos.x <= element.pos.x + element.size.x)
    && (ig.gui.cursor.pos.y >= element.pos.y) 
    && (ig.gui.cursor.pos.y <= element.pos.y + element.size.y) 
    && !element.disabled ) {

    state = 'hover';

    alert(

        'This statement evaluates to true: '

        + ig.gui.cursor.pos.x
        + '>='
        + element.pos.x
        + '&&'
        + ig.gui.cursor.pos.x
        + '<='
        + element.pos.x
        + '+'
        + element.size.x
        + '&&'

        + ig.gui.cursor.pos.y
        + '>='
        + element.pos.y
        + '&&'
        + ig.gui.cursor.pos.y
        + '<='
        + element.pos.y
        + '+'
        + element.size.y
        + '&&'

        + ( !element.disabled )

    );

} 
```

上面的代码会产生`alert`这样的消息：

![警报信息](../Images/0bc9b72405edefd0987b3c5c31afedaa.png)

当然，我们都同意`580 <= 60 + 48`评估为`FALSE`，对吧？

然而警报仍然被调用......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:31:28.127

`element.pos.x`是一个字符串（“60”）。您需要将它（以及比较中的所有其他字符串）转换回一个数字。

# facebook-ios-sdk - 分享到 Facebook 图像以用于 iPhone 应用程序中的栏按钮项目

> ID：13964383
> 
> 赞同：0
> 
> 时间：2012-12-20T02:25:37.370
> 
> 标签：facebook-ios-sdk

我正在我的 iPhone 应用程序中构建分享到 Facebook 的功能。我想使用一个合适的栏按钮项目，用户将按下该按钮进行共享。

是否有 Facebook 推荐或批准的标准 .png 图片可供我使用？我必须成功吗？还是买？

我知道这不是一个编程问题，但我的应用程序即将准备就绪，除了我没有可以使用的条形按钮图像这一事实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:43:06.517

找到了。没有愚蠢的问题。[http://www.facebook.com/brandpermissions/logos.php](http://www.facebook.com/brandpermissions/logos.php)

# python - 如何使用 flask + Gevent-socketio 制作 werkzeug / 自定义错误页面

> ID：13964385
> 
> 赞同：2
> 
> 时间：2012-12-20T02:25:44.693
> 
> 标签：python, exception-handling, flask, werkzeug, gevent-socketio

我有一个烧瓶 + Gevent-socketio 迷你网站。推出：

```
app = Flask(__name__)
app.debug = True

@werkzeug.serving.run_with_reloader
def runServer():
    print 'Listening on %s...' % WEB_PORT
    ws = SocketIOServer(('0.0.0.0', WEB_PORT),
        SharedDataMiddleware(app, {}),
        resource="socket.io",
        policy_server=False)

    ws.serve_forever() 
```

但是，当我的视图中发生错误时，它会输出

```
<pre style="word-wrap: break-word; white-space: pre-wrap;">Internal Server Error</pre> 
```

而不是显示 werkzeug 调试器。另外，我的习惯`@app.errorhandler(500)`没有被调用。

这发生在使用 Gevent-socketio 时，常规烧瓶网站工作正常。

我想知道是什么在处理错误并取消默认烧瓶行为......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T14:54:45.907

我最近解决了这个问题，可以修改 Werkzeug 调试器以使用 socket.io 命名空间（并且自动重新加载也可以工作），请参见此处并享受：

[https://github.com/aldanor/SocketIO-Flask-Debug](https://github.com/aldanor/SocketIO-Flask-Debug)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:42:36.710

要查看 werkzeug 调试器，您必须使用标准中间件堆栈为默认服务器提供所有 http 请求。

但是您为服务 websockets 请求启动了单独的 SocketIOServer。

[烧瓶和 gevent_socketio 使用示例](https://github.com/abourget/gevent-socketio/blob/master/examples/flask_chat/chat.py)

# ios - ios sqlite如果之前没有插入则插入数据

> ID：13964390
> 
> 赞同：0
> 
> 时间：2012-12-20T02:26:28.827
> 
> 标签：ios, xcode, sqlite, insert, uibutton

在我的视图控制器中，它显示了完整的细节。所以当用户点击添加按钮时，它会将数据插入到 sqlite。问题是如何检查之前是否插入了数据。

```
 //this code is in viewDidLoad
NSString *sql = [NSString stringWithFormat:@"SELECT * FROM exhibitor"];
    sqlite3_stmt *statement;
     check= 0;
    if(sqlite3_prepare_v2(db, [sql UTF8String], -1, &statement, nil) == SQLITE_OK){
        while (sqlite3_step(statement)==SQLITE_ROW) {
            char *exName2 = (char *) sqlite3_column_text(statement, 1);
            NSString *exNameStr = [[NSString alloc] initWithUTF8String:exName2];
            NSString *exhibName = [exhibitionArticle objectForKey:@"ex_name"];

            if([exNameStr isEqualToString:(exhibName)] ){
                check += 1;      
            }else{
                check += 0;
            }

        }
        NSLog(@"%d Result is", check);
    }     //this code checking my data is in sqlite or not 
```

如果数据不在 sqlite 中，则按钮插入数据。

```
- (IBAction)addExhibitor:(id)sender {

    NSLog(@"%d this is addExhibitor int", check);
    if(check == 0){
    NSDate *exhibAddDate = [NSDate date];
    NSString *exhibName = [exhibitionArticle objectForKey:@"ex_name"];
    NSString *exhibAbout = [exhibitionArticle objectForKey:@"ex_about"];
    NSString *exhibBooth = [exhibitionArticle objectForKey:@"ex_booth"];
    NSString *exhibAddress = [exhibitionArticle objectForKey:@"ex_address"];
    NSString *exhibTelephone = [exhibitionArticle objectForKey:@"ex_telephone"];
    NSString *exhibFax = [exhibitionArticle objectForKey:@"ex_fax"];
    NSString *exhibWebSite = [exhibitionArticle objectForKey:@"ex_website"];
    NSString *exhibEmail = [exhibitionArticle objectForKey:@"ex_email"];

    NSString *sql1 = [NSString stringWithFormat:@"INSERT INTO exhibitor ('exhibAddDate', 'exhibName', 'exhibAbout', 'exhibBooth', 'exhibAddress', 'exhibTelephone', 'exhibFax', 'exhibWebSite', 'exhibEmail') VALUES('%@', '%@', '%@', '%@', '%@', '%@', '%@', '%@', '%@')", exhibAddDate, exhibName, exhibAbout, exhibBooth, exhibAddress, exhibTelephone, exhibFax, exhibWebSite, exhibEmail ];

    char *err;
    if(sqlite3_exec(db, [sql1 UTF8String], NULL, NULL, &err) != SQLITE_OK){

        sqlite3_close(db);
        NSAssert(0, @"Could not update table");
    }else{

        NSLog(@"Table Updated");
    }
    }
    else{
     //   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Same Data" message:@"Your data already there" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
      //  [alert show];

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:43:17.173

```
int check = 0;
sqlite3_stmt *statement = nil;
const char * sql;

sql = "SELECT COUNT(*) FROM exhibitor WHERE exhibName = ?";

sqlite3_prepare_v2(db, sql, -1, &statement, NULL);
sqlite3_bind_text(statement, 1, [[exhibitionArticle objectForKey:@"ex_name"] UTF8String], -1, SQLITE_TRANSIENT);

while (sqlite3_step(statement) == SQLITE_ROW) {

    check = sqlite3_column_int(statement, 0);

}

sqlite3_finalize(statement);

if (check == 0) {
    NSLog(@"Result of count is %d and so the data is not in the database", check);
    //insert the data

    NSDate *exhibAddDate = [NSDate date];
    NSString *exhibName = [exhibitionArticle objectForKey:@"ex_name"];
    NSString *exhibAbout = [exhibitionArticle objectForKey:@"ex_about"];
    NSString *exhibBooth = [exhibitionArticle objectForKey:@"ex_booth"];
    NSString *exhibAddress = [exhibitionArticle objectForKey:@"ex_address"];
    NSString *exhibTelephone = [exhibitionArticle objectForKey:@"ex_telephone"];
    NSString *exhibFax = [exhibitionArticle objectForKey:@"ex_fax"];
    NSString *exhibWebSite = [exhibitionArticle objectForKey:@"ex_website"];
    NSString *exhibEmail = [exhibitionArticle objectForKey:@"ex_email"];

    sql = "INSERT INTO exhibitor ('exhibAddDate', 'exhibName', 'exhibAbout', 'exhibBooth', 'exhibAddress', 'exhibTelephone', 'exhibFax', 'exhibWebSite', 'exhibEmail') VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";

    sqlite3_prepare_v2(db, sql, -1, &statement, NULL);
    sqlite3_bind_text(statement, 1, [exhibAddDate UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 2, [exhibName UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 3, [exhibAbout UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 4, [exhibBooth UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 5, [exhibAddress UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 6, [exhibTelephone UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 7, [exhibFax UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 8, [exhibWebSite UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 9, [exhibEmail UTF8String], -1, SQLITE_TRANSIENT);

    if (sqlite3_step(statement) == SQLITE_DONE){
         NSLog(@"Exhibit added");
    } else {
         NSLog( @"Failed from sqlite3_prepare_v2\. Error is:  %s", sqlite3_errmsg(db));
    }

} else {
    NSLog(@"Result of count is %d and so the data is already in the database", check);
}

sqlite3_finalize(statement);
sqlite3_close(db); 
```

试试这样的东西！

--> exhibName <-- sql中的必须是要搜索数据的列。

最好是把这一切都放在你拥有的 IBAction 中。如果检查 == 0，则执行插入。

请查看绑定变量，因为您容易受到 sql 注入的影响。这意味着，如果我输入诸如“blabla; DELETE * FROM existor; blabla”作为标题，您将面临用户删除表中所有数据的风险！绑定变量确保不会发生这种情况。

周围没有 XCode，所以我无法检查它是否一切正常.. 否则摆弄直到你拥有它！

祝你好运

# php - 如何在 Laravel 中添加关系？

> ID：13964391
> 
> 赞同：0
> 
> 时间：2012-12-20T02:27:09.137
> 
> 标签：php, laravel

我尝试按照在[http://net.tutsplus.com/tutorials/php/build-web-apps-from-scratch-with-laravel-the-eloquent-orm/](http://net.tutsplus.com/tutorials/php/build-web-apps-from-scratch-with-laravel-the-eloquent-orm/)和[http://laravel.com/找到的文档进行操作docs/database/eloquent](http://laravel.com/docs/database/eloquent)，但它似乎不起作用。

```
class User extends Eloquent 
{
    public function role()
    {
         return $this->has_one('Role', 'role_code');
    }
}

class Role extends Eloquent 
{
    public function user()
    {
          return $this->belongs_to('User', 'role_code');
    }
} 
```

在我的数据库中，我在用户和角色表中都有 role_code 列。我在控制器中使用了这个命令`$test = User::find(1)->role()->get();`但它只显示一个空白数组。我确定我的用户和角色表中都有一个条目。

我错过了什么？你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:49:09.947

您是否为角色表定义了关键字段？*如果*角色表的键是 $id，那么您向我们展示的内容应该可以工作。如果没有，您需要在 Role 类中添加如下内容：

```
public static $key = 'role_code'; 
```

（我假设如果你使用非常规的外键定义，你可能也有非常规的主键定义。）

# java - 我得到一个 java.lang.classnotfoundexception: com.mysql.jdbc.Driver

> ID：13964392
> 
> 赞同：1
> 
> 时间：2012-12-20T02:27:21.773
> 
> 标签：java, android, jdbc

我怎么会得到这个错误？检查图片： ![在此处输入图像描述](../Images/6e66760664ba56e56e4619ed078fa448.png)

我在普通的java项目（不是android项目）上使用了同一个jar，它曾经可以工作。怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T02:30:57.073

你得到一个`NoClassDefFoundError`因为你的 jar 文件在运行时不可用。为了让它在运行时可用，您必须在 java 构建路径中检查 jar 文件上的复选框，如下所示： ![在此处输入图像描述](../Images/91f321c449ae6cde410f06affabc44dd.png)

# php - 换行符 php python

> ID：13964393
> 
> 赞同：3
> 
> 时间：2012-12-20T02:27:24.160
> 
> 标签：php, python, newline

我有一个带有这样文本的python脚本（p.py）

```
print "Hello"+"\n"
print "World" 
```

我在 php / apache 下的 wamp 中运行这个文件

```
<?php 

$output = system("C:\\python27\\python.exe p.py")

?> 
```

我在浏览器上得到以下信息

```
Hello World 
```

没有新行

如何确保出现换行符。我也试过`"\r\n"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:30:50.213

您需要将其包装在`<pre>`标签中，或使用`<br/>`.

尝试查看类似的内容：

```
<p>
This is
a test
</p> 
```

在网络浏览器中。你不会得到换行符。那是因为 HTML 几乎忽略了换行符。您将不得不为此使用`<br/>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:32:40.487

显然输出是 HTML。如果您检查页面的源文本，您可能会看到换行符。

使用`<br>`或：

```
<?php 
header("Content-Type: text/plain");
$output = system("C:\\python27\\python.exe p.py")
?> 
```

# objective-c - 在objective-c中取消线程

> ID：13964396
> 
> 赞同：0
> 
> 时间：2012-12-20T02:27:52.943
> 
> 标签：objective-c, ios, nsthread

我想通过使用带有 pthreads 的 C 语言来解释我想做什么

```
pthread_t tid1, tid2;

void *threadOne() {
    //some stuff
}

void *threadTwo() {
    //some stuff
    pthread_cancel(tid1);
    //clean up          
}

void setThread() {
    pthread_attr_t attr;
    pthread_attr_init(&attr);
    pthread_create(&tid1,&attr,threadOne, NULL);
    pthread_create(&tid2,&attr,threadTwo, NULL);
    pthread_join(tid2, NULL);
    pthread_join(tid1, NULL);
}

int main() {
    setThread();
    return 0;
} 
```

所以以上就是我想在objective-c中做的事情。这是我在objective-c中用来创建线程的：

```
[NSThread detachNewThreadSelector:@selector(threadOne) toTarget:self withObject:nil]; 
```

由于我没有声明和初始化线程 ID 之类的东西，我不知道如何从另一个线程中取消一个线程。有人可以将我的 C 代码转换为 Objective-c 或向我推荐其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:40:37.973

尝试这个。

```
 -(void)threadOne
    {
        [[NSThread currentThread] cancel];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:41:35.490

类方法`detachNewThreadSelector:toTarget:withObject:`不返回`NSThread`对象，但它只是一个方便的方法。

```
[NSThread detachNewThreadSelector:@selector(threadOne) toTarget:self withObject:nil]; 
```

与以下内容几乎相同：

```
NSThread *threadOne = [[NSThread alloc] initWithTarget:self selector:@selector(threadOne) object:nil];
[threadOne start]; 
```

除了后一种方法给你一个指向创建的`NSThread`对象的指针，你可以在上面使用像`cancel`.

请注意，与 pthread 一样，`NSThread`取消是建议性的；由您在该线程中运行的代码来检查线程的`isCancelled`状态并做出适当的响应。`NSThread`（您可以使用类方法获取对当前运行的引用`currentThread`。）

# amazon-cloudfront - 处理 Amazon S3 和 CloudFront 上定期更新的文件

> ID：13964397
> 
> 赞同：3
> 
> 时间：2012-12-20T02:27:53.413
> 
> 标签：amazon-cloudfront

如果我定期覆盖 S3 上的文件，CloudFront 会在我在浏览器中提供它们时缓存它们。我正在研究 Invalidation 但一次验证的数量是有限制的，这对于多租户网站不起作用。

我能看到的唯一解决方案是在覆盖文件时，删除旧文件并更改新文件的名称（我只是将 TIMESTAMP 添加到末尾），这样 CloudFront 就不会提取缓存的版本。

这是处理此类事情的最建议方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:02:02.330

以下是失效限制细节的链接：http: [//aws.amazon.com/cloudfront/faqs/#Is_there_a_limit_to_the_number_of_invalidation_requests](http://aws.amazon.com/cloudfront/faqs/#Is_there_a_limit_to_the_number_of_invalidation_requests)

> 在任何给定时间，您只能处理 3 个无效请求。如果您超过此限制，则进一步的无效请求将收到错误响应，直到较早的请求之一完成。

AWS 的建议是：

> 建议您为文件实施版本控制系统和/或设置较短的有效期。

较短的有效期很简单，但也有明显的缺点。要实现版本控制系统，您可以跟踪数据库中的文件版本，并将版本附加为查询字符串参数：

`file.jpg?v=2`

这样你可以设置一个较长的有效期，只有当你专门上传新文件并更新版本时文件才会失效。

正如下面评论中所述，默认行为是 CloudFront 在构建缓存键时忽略查询字符串，因此请务必在默认缓存行为设置下启用转发查询字符串以使用此版本控制方法。

# php - 错误：获取非对象的属性

> ID：13964398
> 
> 赞同：2
> 
> 时间：2012-12-20T02:28:10.443
> 
> 标签：php, codeigniter

> **可能重复：**
> [调用非对象上的成员函数](https://stackoverflow.com/questions/254291/call-to-a-member-function-on-a-non-object)

我收到此错误：尝试获取非对象的属性 [来自模型] 当我尝试通过输入字符串从数据库中检索 id 时

这是我的模特

```
 function getRoleId($role_name='')
         {

            $conditions = array('role_name'=> $role_name);
            $this->db->where($conditions);
            $this->db->select('id');
            $query = $this->db->get('roles');       
            $row   = $query->row();
            return $row->id;
         } 
```

控制器（这里的 $radioRole 是 = 某物），但是当它到达模型时，它变成了其他东西。

```
$radioRole  = 'something';
$insertData['role_id']            = $this->user_model->getRoleId($radioRole); 
```

更新

```
print_r($radioRole);
$insertData['role_id']            = $this->user_model->getRoleId($radioRole); 
```

显示 $radioRole 在这种情况下是“某事”

但是当它到达 user_model 并且当我执行 print_r 时，它会显示其他内容，“buyer”，它甚至不会显示在控制器上完成的 print_r。感觉它被覆盖了：O，但我不知道：O

print_r($查询)

```
 CI_DB_mysql_result Object ( [conn_id] => Resource id #37 [result_id] => Resource id #64 [result_array] => Array ( ) [result_object] => Array ( ) [current_row] => 0 [num_rows] => 0 [row_data] => ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:53:24.770

~~你`where`错了：~~

 ~~```
$conditions = array('role_name'=> $role_name);
$this->db->where($conditions); 
```~~ 

应该

```
$conditions = array('role_name', $role_name);
$this->db->where($conditions); 
```

 ~~编辑：

如评论中所述，如果条件直接在以下范围内，则逗号是必要的`where`：

```
$this->db->where('role_name',$role_name); 
```~~

# python - 使用连接字符串作为对象名称创建新对象

> ID：13964399
> 
> 赞同：0
> 
> 时间：2012-12-20T02:28:13.690
> 
> 标签：python, oop

我有一个简单的类，用于存储有关参加会议的人员的信息：

```
class Attendee:
    def __init__(self, fName, lName, email):
        self.fName = fName
        self.lName = lName
        self.email = email 
```

我正在尝试使用两个用户输入的字符串的组合来创建参加者对象：

```
#get inputs from user:
fName = input("First name: ")
lName = input("Last name: ")
    .....

newObjectName = fName[0] + lName

newObjectName = Attendee(fName, lName, email) 
```

显然这行不通 - 但你明白我正在拍摄的想法。我知道在 C# 中你可以通过以下方式创建一个新对象：

```
Attendee newObjectName = new Attendee(fName, lName, email) 
```

这将如何转化为 Python？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:41:44.847

如果你想有变量变量名，那么你需要一个不同的数据结构。例如，字典效果很好：

```
attendees = {}
newObjectName = fName[0] + lName
attendees[newObjectName] = Attendee(fName, lName, email) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:30:13.563

您已经有问题中的代码 -`newObjectName = Attendee(fName, lName, email)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:07:01.323

> 在下面的参加者类中，您定义了 setter，每当创建对象并且用户输入数据时，它将为您的数据属性（变量）设置值
> 
> 并且您还定义了用于按需检索这些数据的 getter
> 
> 最后一行**str**将对象状态打印为字符串

```
class Attendee:

    def __init__(self, fName, lName, email):

        self.fName = fName
        self.lName = lName
        self.email = email

    def set_fName(self, fName):
        self.__fName = fName

    def set_lName(self, lName):
        self.__lName = lName

    def set_email(self, email):
        self.__email = email

    def get_fName(self, fName):
        return self.__fName

    def get_lName(self, lName):
        return self.__lName

    def get_email(self, email):
        return self.__email

    def __str__(self):
        return "First name: " + self.__fName + "\nLast name: " + self.__lName + "\nEmail: " + self.__email 
```

> 下面是一个主程序的示例，它要求用户输入并创建一个类对象（New_attendee 类）我添加了一个字典，它首先创建为空（= {}）并且每个条目都存储在字典中

```
def main():

    NewAttendee = {}

    again = 'y'

    while again == 'y':

        fName = input("First name: ")
        lName = input("Last name: ")
        email = input("Email: ")

        entry = Attendee(fName,lName, email)

        if fName not in NewAttendee:
            NewAttendee[fName] = entry
            print('The new attendee has been added')
        else:
            print('That name already exists.')

        again = input('Do you want to add a new attendee? \'y\' for yes -->')

main() 
```

> 希望有帮助！PS：我没有把**str**（对象状态作为字符串）付诸行动

# c++ - botan.dll 中未处理的异常

> ID：13964404
> 
> 赞同：2
> 
> 时间：2012-12-20T02:29:19.240
> 
> 标签：c++, exception, dll, botan

我正在尝试使用 botan 加密库运行最基本的程序。我正在使用 Botan 1.10 32 位。我在 Windows 7 上使用他们的安装程序获得了二进制文件。IDE 是 Visual Studio 2012。

我将我的项目链接到botan.lib，但程序在启动时报告缺少botan.dll，所以我假设lib 只是链接到dll。因此，我将 botan.dll 放在了 Debug 文件夹中。

现在来解决问题。

```
#include <iostream>

#include <botan/botan.h>
using namespace Botan;
using namespace std;

int main(int argc, char* argv[]) {
    try {
        cout << "d1";
        LibraryInitializer init;  //exception thrown here
    }
    catch(exception& e) {
        cout << "Exception caught: " << e.what() << std::endl;
    }
    cout << "d2";
    return 0;
} 
```

Intellisense 检测到一切正常。当我尝试调试时，我得到：

> rsa.exe 中 0x6A1F2AA0 (botan.dll) 的第一次机会异常：0xC0000005：访问冲突读取位置 0x00310000。rsa.exe 中 0x6A1F2AA0 (botan.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00310000。

似乎在 botan.dll 中引发了一个异常，我无法在我身边抓住它。我不能从这里走得更远。

我在链接到图书馆时做错了什么还是有其他问题？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:23:08.737

扩展我的评论：

如果您的程序即使在您的程序的发布版本中崩溃，您将不得不下载源代码并自己构建它（需要 python 来配置构建）。

如果发布版本没有崩溃，您可以`/RTCs Stack Frames`在您的调试版本的项目设置中禁用运行时检查`C++/Code Generation`，这似乎会导致崩溃。只需将设置从 更改`Both`为`/RTCu Uninitialized Variables` 或通过将其设置为完全禁用它`Default`。

由于这是一种解决方法而不是解决方案，因此您应该考虑自己构建 botan 并构建发布版本和调试版本（然后您可以在调试版本中链接到调试版本并保留调试运行时检查原样。

请参阅有关如何构建它的[文档](http://botan.randombit.net/building.html)（您需要[python](http://www.python.org/)来运行配置）：

构建发布版本（默认）后，将以下文件复制到另一个目录（例如`C:\Botan\release\`），否则在构建调试版本时它们将被覆盖：

*   botan.dll
*   植物学
*   植物学库
*   botan.dll.manifest

现在再次运行配置，这次添加`--enable-debug`选项：

```
> python configure.py --cc=msvc --enable-debug 
```

并再次构建它。这一次，将文件（上面列出的）复制到`C:\Botan\debug\`.

将您的项目配置为链接到调试目录中的库以进行调试构建，以及链接到发布目录中的库以进行发布构建。最后确保您的程序在运行时加载适当的 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:37:46.393

您使用的二进制文件可能是针对发布模式的。我尝试在调试模式下链接，也遇到了访问冲突，然后我切换到发布模式，一切正常。我也不确定二进制文件是否针对 VC110。您可以下载源代码并尝试使用您喜欢的配置来构建它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T16:47:30.693

由于这是 Windows，您将永远不会看到 C++ 异常跨越模块边界。因此，您捕获 C++ 异常的尝试将无法识别这一异常。如果您想处理访问冲突，您将需要使用[结构化异常处理](http://msdn.microsoft.com/en-us/library/ms680657.aspx "结构化异常处理 (Windows)")。

要找出 .dll 崩溃的原因，您应该将 Visual Studio 设置为在生成访问冲突时中断调试器。转到*Debug* -> *Exceptions*并勾选*Win32 Exceptions*下*c0000005 Access violation的**Thrown*复选框。一旦进入调试器，您就可以加载调试符号（假设它们可用）。调用堆栈和参数应该可以让您很好地了解它失败的原因。

 **由于源似乎可用，您也可以自己编译一个 Debug .dll。这既会产生正确的调试符号，也会启用崩溃的源代码级调试。这可能会为您提供诊断手头问题所需的所有信息。**

# redis - 有人可以告诉我如何分析 redis 中的字节数组键吗？

> ID：13964405
> 
> 赞同：1
> 
> 时间：2012-12-20T02:29:33.653
> 
> 标签：redis, bytearray, jedis

我从我的 redis 中得到了一个像这样的键：“\x04y\x03\x00\x00K”，我完全不明白它的含义。

“\x04”代表十六进制字符串，“y”代表ASCII字符吗？是这样，为什么关键要结合两者？

提前谢谢。

编辑：我正在使用 Jedis（redis 的 java 客户端）并将密钥作为字节数组。我的代码（在java中）是这样的：

```
jedis.set(aByteArr, value) 
```

在运行代码时，我打开了redis提供的原生客户端，执行“MONITOR”命令查看redis中实际保存的是什么key。这就是我发现的：

... SET "\x04y\x03\x00\x00K" "aString"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T04:12:02.103

\x 表示十六进制字符转义。所以字节数组键在redis中以十六进制字符序列编码。

# jquery - Jquery insertBefore / insertAfter动画不起作用

> ID：13964408
> 
> 赞同：5
> 
> 时间：2012-12-20T02:29:39.990
> 
> 标签：jquery

我制作了一个简单的脚本，允许用户使用向上和向下按钮对 div 进行排序。

jsFiddle：http: [//jsfiddle.net/dZ6rC/5/](http://jsfiddle.net/dZ6rC/5/)

不幸的是，我尝试在鼠标单击时为移动设置动画并不会导致标签被移动。

这是我的代码：

```
$('.up').click(function(){
  var previous = $(this).parent().parent().prev('.item');
  $(this).parent().parent().insertBefore(previous).slideUp();
});
$('.down').click(function(){
  var next = $(this).parent().parent().next('.item');
  $(this).parent().parent().insertAfter(next).slideDown();
});​ 
```

有人能弄清楚为什么标签不动吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:37:24.550

在向下滑动元素之前，您没有隐藏元素，因此看不到效果：

[http://jsfiddle.net/dZ6rC/4/](http://jsfiddle.net/dZ6rC/4/)

你可以在`.hide`之前添加`.slideDown`。我认为您可能想从那里稍微改进一下动画，但请记住这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:38:01.170

我不完全确定您要完成什么，但链接 3 个`parent()`调用可能不是最好的方法。

我猜这可以解决您的问题：

```
$('.up').click(function(){
  $(this).parents('.item').slideUp();
});
$('.down').click(function(){
 $(this).parents('.item').slideDown();
});​ 
```

如果我缺少要求，请更新您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T01:07:28.600

只需添加一系列隐藏和显示：

```
jQuery(html_usr).insertBefore( "#log_row" ).hide().show('blind'); 
```

# android - 为什么 FragmentManager 的 getBackStackEntryCount() 返回零？

> ID：13964409
> 
> 赞同：13
> 
> 时间：2012-12-20T02:29:40.680
> 
> 标签：android, fragment

```
private static void changeFragment(Fragment f, boolean init) {
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.info_content, f,f.getClass().getName());
        if(!init){
            ft.addToBackStack(null);
        }
        ft.commit();
    } 
```

当我想通过调用 fm.getBackStackEntryCount() 获取堆栈 cout 时，它返回零？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T16:45:07.457

您必须调用`fm.executePendingTransactions()`after`ft.commit()`或 before `fm.getBackStackEntryCount()`。因为 commit() 只为以后的传递安排事务。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-08-17T08:23:00.013

我有一个类似的问题，在我的情况下 getFragmentManager().getBackStackEntryCount() 总是返回零。

我的问题是我使用了支持片段：

```
Fragment fragment = new MyFragment();
// note getSupportFragmentManager() instead getFragmentManager()
FragmentManager fragmentManager = getSupportFragmentManager();
fragmentManager.beginTransaction()
.replace(R.id.frame, fragment)
.addToBackStack(null)
.commit();

fragmentManager.executePendingTransactions(); 
```

我检查*了 getFragmentManager()* backStackEntryCount，它总是返回零（它使用另一个片段管理器）：

```
@Override
public void onBackPressed() {
    if (getFragmentManager().getBackStackEntryCount() > 0 ) {
        getFragmentManager().popBackStack();            
    }
} 
```

而不是*getSupportFragmentManager*，它返回正确的数字：

```
@Override
public void onBackPressed() {
    if (getSupportFragmentManager().getBackStackEntryCount() > 0 ) {
        getSupportFragmentManager().popBackStack();         
    }
} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-17T10:55:43.280

回答这个问题可能为时已晚。希望这个答案无论如何都会对某人有所帮助。

大多数情况下，这取决于您实际调用 getBackStackEntryCount() 方法的位置。在我的例子中，我在调用 super.onBackPressed() 之后调用了这个方法。调用此方法的那一刻，后堆栈中没有片段。这就是为什么我总是收到 0。

在 onBackPressed() 中调用方法的正确方法：

```
 @Override
public void onBackPressed() {
    try {
        int backStackEntryCount = getSupportFragmentManager().getBackStackEntryCount();
        Log.d("class", "items in backstack " + backStackEntryCount);
    } catch (Exception e) {
        e.printStackTrace();
    }
    super.onBackPressed();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-28T07:30:06.700

另一种解决方案是使用[FragmentManager.OnBackStackChangedListener](http://developer.android.com/reference/android/app/FragmentManager.OnBackStackChangedListener.html)

```
fm.addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
        @Override
        public void onBackStackChanged() {
            Log.d("test", "backStackEntryCount: " + fm.getBackStackEntryCount());
        }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-20T06:07:46.077

回答这个问题可能为时已晚。希望这个答案无论如何都会对某人有所帮助。

您应该在 onResume() 中使用 getBackStackEntryCount() 方法。

会是这样的：

```
@Override
protected void onResume() {
    super.onResume();
    Log.i(TAG, "onResume: " + fragmentManager.getBackStackEntryCount());
    for (int entry = 0; entry < fragmentManager.getBackStackEntryCount(); entry++) {
        Log.i(TAG, "Found fragment: " + fragmentManager.getBackStackEntryAt(entry).getId());
    }
} 
```

祝你好运！

# c# - 每个“串行”心智模型而不是“最后一个值”为任务 lambda 提供状态变量？

> ID：13964410
> 
> 赞同：3
> 
> 时间：2012-12-20T02:29:57.697
> 
> 标签：c#, lambda, task-parallel-library

我理解闭包关闭引用而不是封闭变量的值。那不是我的问题。我想知道如何（向编译器）表达“给这个任务这个值，就像它在创建时看到的那样，而不是在执行时看到的”。

换句话说，我怎样才能得到

```
static void Main(string[] args)
{
    var userName = "Alice";
    var task = new Task(() =>
    {
        Console.WriteLine("User is: " + userName);
    });

    // continues work ...
    userName = "Zoltan";
    task.Start();
    Console.ReadLine();
} 
```

打印

```
User is: Alice 
```

而不是它现在所做的，即

```
User is: Zoltan 
```

我试图避免

```
Task.Factory.StartNew((copy) =>
{
     Console.WriteLine("User is: " + (string)copy);
}, userName); 
```

这迫使我将每个状态对象（例如 userName）重新转换为实际 lambda 中的相应类型，因为`StartNew`方法接口将其定义为类型`object`而不是通用接口（例如：）`<T>`。上面的演示示例使用字符串和一个 writeline 似乎没问题 - 但对于一个大型对象的实际情况并在整个屏幕代码中重新转换它有点浪费（并且容易出错）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:13:12.953

我通常只是简单地使用一个临时变量来处理这样的关闭场景：

```
var userName = "Alice";
var taskUserName = userName;
var task = new Task(() =>
{
    Console.WriteLine("User is: " + taskUserName);
}); 
```

**编辑：**

另一种完成相同事情但读起来略有不同的方法是将任务创建重构为一个方法：

```
static void Main(string[] args)
{
   var userName = "Alice";
   var task = CreateUserTask(userName);
   // ...
}

static Task CreateUserTask(string taskUserName)
{
    return new Task(() =>
    {
        Console.WriteLine("User is: " + taskUserName);
    });
} 
```

# sql - 使用 EXISTS 和 OR 运算符的 SQL 查询

> ID：13964414
> 
> 赞同：5
> 
> 时间：2012-12-20T02:30:25.357
> 
> 标签：sql, subquery, exists

我有 4 张桌子

```
 users
    |  id  |Username|
    |   1  |  John  |
    |   2  |  Mike  |
    |   3  |  Alex  |

    user_contacts
    | user_id  |contact_id|
    |   1      |    2     |
    |   1      |    3     |
    |   2      |    3     |

    contact_groups
    | id  |  Group name  |
    |  1  |    Group 1   |  
    |  2  |    Group 2   |
    |  3  |    Group 3   |

    user_contact_groups
    | user_id  |contact_group_id|
    |   1      |    1           |
    |   1      |    2           |
    |   3      |    2           | 
```

id 喜欢做的是拉出属于联系人组 1 和 3 的用户或用户 1 的联系人（在 table:user_contacts 中）。下面是代码，但它返回查询为空

```
SELECT DISTINCT a.* from  users as a 
WHERE EXISTS (SELECT * FROM user_contacts as b 
    WHERE b.user_id = 1) OR 
    (a.id IN (select c.user_id 
         FROM user_contact_groups as c 
            WHERE c.contact_group_id IN (1,3))); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:38:18.657

这就是我的做法，应该是最理想的：

```
SELECT DISTINCT u.*
FROM users u
LEFT OUTER JOIN user_contacts c ON u.id = c.contact_id 
    AND c.user_id = 1
LEFT OUTER JOIN user_contact_groups g ON u.user_id = g.user_id 
    AND g.contact_group_id IN (1,3)
WHERE c.id IS NOT NULL OR g.id IS NOT NULL 
```

如果你想使用 EXISTS，你当然可以转过来，但是查询可能无法使用索引（你可以删除这个查询的 DISTICT）：

```
SELECT *
FROM users u
WHERE EXISTS
(
    SELECT 1
    FROM user_contacts c 
    WHERE c.contact_id = u.id
    AND c.user_id = 1
)
OR EXISTS
(
    SELECT 1
    FROM user_contact_groups g 
    WHERE g.user_id = u.user_id
    AND g.contact_group_id IN (1,3)
) 
```

我建议做一个解释，看看哪一个更适合你的 RDBMS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T02:36:29.700

你可以做左连接，而不是做子查询

```
SELECT DISTINCT a.*
FROM users as a
LEFT JOIN user_contacts as b ON a.id = b.user_id AND a.id = 1
LEFT JOIN user_contact_groups as c on c.user_id = a.id AND c.contact_group_id IN (1,3)
WHERE b.user_id IS NOT NULL OR c.user_id IS NOT NULL 
```

我面前没有 SQL 来测试它，但我认为它会得到正确的结果

# python - \r 在python中破坏变量赋值

> ID：13964415
> 
> 赞同：3
> 
> 时间：2012-12-20T02:30:32.923
> 
> 标签：python

我有一个非常不寻常的问题。我正在使用 python 2.6 对 bulkSMS 网关进行 API 调用。现在如果我这样打电话

```
req = urllib2.Request(url)
urllib2.urlopen(req).read() 
```

我将此（正确）响应打印回终端

```
'<RESPONSE>\r<status>-4</status>\r<credits>31.3403</credits>\r</RESPONSE>' 
```

但是当我将此输出分配给变量时，

```
reply = urllib2.urlopen(req).read() 
```

当我打印到终端时，我得到了这个（不正确的）响应

```
print reply
</RESPONSE>.3403</credits> 
```

有人愿意解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:36:19.937

它将`\r`字符解释为特殊字符（ASCII 回车 - 请参阅[此处](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)的一些示例）并在打印时将它们从字符串中删除。要包含它们，您可以使用`string-escape`编码：

```
In [1]: resp = '<RESPONSE>\r<status>-4</status>\r<credits>31.3403</credits>\r</RESPONSE>'

In [2]: print resp
</RESPONSE>.3403</credits>

In [3]: print resp.encode('string-escape')
<RESPONSE>\r<status>-4</status>\r<credits>31.3403</credits>\r</RESPONSE> 
```

不直接适用于您的情况，但这种转义的另一种方式是在字符串前面加上`r`，这使其成为“原始”字符串并保留反斜杠（您会在正则表达式中看到很多）：

```
In [4]: resp = r'<RESPONSE>\r<status>-4</status>\r<credits>31.3403</credits>\r</RESPONSE>'

In [5]: print resp
<RESPONSE>\r<status>-4</status>\r<credits>31.3403</credits>\r</RESPONSE> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:39:24.267

该字符串包含正确的数据，它只是以一种奇怪的方式打印。 `\r`是一个回车，一些系统将其解释为“回到行首并从那里开始覆盖”。因此，您会看到`"</RESPONSE>"`前一行中更长的数据（因此未被覆盖）。

您的数据包含的内容有点奇怪，`\r`因为如今它不像行尾约定那样常见。

您可以打印`repr(response)`以查看响应，而无需`\r`以这种方式进行解释。您在线进行的任何处理都应该可以正常工作，因为所有数据都在那里，只是没有打印。

# java - 运行线程时，旋转变换在重绘中无法正常工作

> ID：13964419
> 
> 赞同：3
> 
> 时间：2012-12-20T02:31:01.170
> 
> 标签：java, multithreading, swing, awt, graphics2d

我一直在努力让这个程序工作，即使我似乎找不到任何问题。该程序由以下 2 个类组成，不多也不少。它基本上应该在绘图区域中每次单击时绘制一个点，并且在第 3 次单击时所有点都连接起来。我仍然需要努力使它更漂亮、更准确，但这部分有效。不起作用的是应该遵循的：在第四次单击时，一个线程应该开始（并且它开始），并且三角形本身应该在给定任意刷新率的情况下旋转，恰好是 80 次重绘。在动画完成之前，下一次点击不应该起作用，只有在动画停止（线程死亡）后点击，才会显示一个新点并重新开始。

是否有可能所有绘画调用都堆叠到我的线程结束？我知道可能会发生所有事件都堆叠在事件队列中并被视为一个事件。使用带有时间参数的重绘没有帮助。我添加了注释以帮助澄清，因为所有变量都是法语单词（已解释）。我很难弄清楚它是否在我的代码中以找到问题，是否与线程相关甚至与类型相关。我只是在调试模式下无处可去（使用**Eclipse**）。我是否完全忽略了一些明显的事情？

虽然我的方法可能不是最有效的方法，但轮换是我的主要问题。我可以处理编写代码的未编写的剩余部分。谢谢你的帮助！这是两个类：

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class Application extends JFrame {

private static final long serialVersionUID = 1L;
private JPanel contentPane;
private JButton btnTerminer;
private Triangle triangle;
private int totalClics = 0;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Application frame = new Application();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Application() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 453, 692);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    btnTerminer = new JButton("Terminer");
    btnTerminer.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            System.exit(0);
        }
    });
    btnTerminer.setBounds(138, 622, 132, 23);
    contentPane.add(btnTerminer);

    triangle = new Triangle();
    //Adds points for every mouse click
    triangle.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            if(totalClics < 3){
                triangle.ajouterPoint(e.getX(), e.getY());
                totalClics++;
            } else {
                triangle.getAnim().start();
                totalClics = 0;
            }
        }
    });
    triangle.setBounds(10, 11, 400, 600);
    contentPane.add(triangle);
}
} 
```

* * *

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Iterator;

import javax.swing.JPanel;

public class Triangle extends JPanel implements Runnable,Serializable{

private static final long serialVersionUID = 1L;
private ArrayList<Point> points = null;
//Animation thread
private Thread anim;
private Color couleurPrin;
private Color couleurBoite;
//A point's diameter
private int diametre = 8;
//The rectangle's width
private int largeur;
//The rectangle's height
private int hauteur;
//The rectangle's top-left corner
private int minX;
private int minY;
//Angle incrementation multiplier
private int nbAng = 0 ;
//Thread stopping variable
private boolean continuer = true;

public Triangle() {
    setPreferredSize(new Dimension(400, 600));
    setBackground(Color.BLACK);
    couleurPrin = Color.GREEN;
    couleurBoite = Color.RED;
    setAnim(new Thread(this));
    points = new ArrayList<Point>();

}
/**
 * Repaints this component
 */
@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    int i = 0;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    int[] coorX = new int[points.size()+1];
    int[] coorY = new int[points.size()+1];
    Iterator<Point> iter = points.iterator();
    while(iter.hasNext()){
        Point p = iter.next();
        coorX[i] = p.getX();
        coorY[i]= p.getY();
        i++;
    }
    coorX[points.size()] = coorX[0];
    coorY[points.size()] = coorY[0];
    if(points.size() != 0){
        g2d.setColor(Color.white);
        g2d.fillOval(minX+largeur/2, minY+hauteur/2, 6, 6);
        g2d.setColor(couleurPrin);
        for(i =0; i<points.size(); i++){
            g2d.drawLine(coorX[i], coorY[i], coorX[i+1], coorY[i+1]);
        }
        for(i = 0; i<points.size(); i++){
            g2d.fillOval(coorX[i]-diametre/2, coorY[i]-diametre/2, diametre, diametre);
        }
        g2d.setColor(couleurBoite);
        g2d.drawRect(minX, minY, largeur, hauteur);
        g2d.rotate(15.0*nbAng, (largeur+getWidth())/2, (hauteur+getWidth())/2); 

    }

}
/**
 * Adds a point. Stops at 3.
 * @param x
 * @param y
 * 
 * 
 */
public void ajouterPoint(int x, int y){
    Point p = new Point(x,y);
    System.out.println(p.toString());
    if(points.size()>=0 && points.size()<3){
        points.add(p);
        minX = p.getX()-3;
        minY = p.getY()-3;
    }
    if(points.size() == 3){
        rectanguler(points);
    }
    repaint();

}

public Color getCouleurPrin() {
    return couleurPrin;
}
public void setCouleurPrin(Color c) {
    this.couleurPrin = c;
    repaint();
}
public int getDiametre() {
    return diametre;
}
public void setDiametre(int d) {
    this.diametre = d;
    repaint();
}
/**
 * Sets rectangle's values to the largest bounds possible
 * @param points
 */
private void rectanguler(ArrayList<Point> points){
    Iterator<Point> iter = points.iterator();
    Point p1, p2, p3;
    p1 = iter.next();
    p2 = iter.next();
    p3 = iter.next();
    int dLarg;
    int dLong;
    if(p2 != null && p3 != null){
        minX = Math.min(p1.getX(), p2.getX());
        minY = Math.min(p1.getY(), p2.getY());
        largeur = Math.abs(p1.getX()-p2.getX());
        hauteur = Math.abs(p1.getY()-p2.getY());
        if(p3 != null){
            minX = Math.min(minX, p3.getX());
            minY = Math.min(minY, p3.getY());
            dLarg = Math.max(Math.abs(p3.getX()-p2.getX()), Math.abs(p3.getX()-p1.getX()));
            dLong = Math.max(Math.abs(p3.getY()-p2.getY()), Math.abs(p3.getY()-p1.getY()));
            largeur = Math.max(dLarg, largeur);
            hauteur = Math.max(dLong, hauteur);
        }       
    }
}
/**
 * Custom point class
 * Stores an x and y value
 *
 */
private class Point{
    @Override
    public String toString() {
        return "Point [x=" + x + ", y=" + y + "]";
    }
    private int x,y;
    public Point(){
        setX(0);
        setY(0);
    }
    public Point(int x,int y){
        setX(x);
        setY(y);
    }
    public int getX() {
        return x;
    }
    public void setX(int x) {
        this.x = x;
    }
    public int getY() {
        return y;
    }
    public void setY(int y) {
        this.y = y;
    }

}
/**
 * Starts the rotation
 * 
 */
@Override
public void run() {
    int i =1;
    while(continuer){

        nbAng = i;
        repaint();
        try {
            Thread.sleep(200);
        } catch (InterruptedException e) {
            System.out.println("Erreur dans le thread");
            e.printStackTrace();
        }
        i++;
        if(i== 80){
            continuer = false;
        }
    }
    anim = new Thread(this);

}
public Thread getAnim() {
    return anim;
}
public void setAnim(Thread anim) {
    this.anim = anim;
    repaint();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:29:41.370

A`Thread`对于您想要实现的目标来说太过分了。A`javax.swing.Timer`更简单，更容易使用，它也可以重复使用，不像`Thread`.

`Graphics2D#rotate`将翻译应用于所有后续渲染，这意味着您需要在绘制任何内容之前应用它。

您的鼠标点击逻辑也有点偏离，它在允许点击继续之前不会检查线程的状态。

作为示例，我稍微修改了您的代码（对不起，我将鼠标单击处理移至`Triangle`该类，但您应该可以将其删除；））

```
public class TestRotation01 {

    public static void main(String[] args) {
        new TestRotation01();
    }

    public TestRotation01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new Triangle());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class Triangle extends JPanel {

        private static final long serialVersionUID = 1L;
        private ArrayList<Point> points = null;
//Animation thread
//        private Thread anim;
        private Color couleurPrin;
        private Color couleurBoite;
//A point's diameter
        private int diametre = 8;
//The rectangle's width
        private int largeur;
//The rectangle's height
        private int hauteur;
//The rectangle's top-left corner
        private int minX;
        private int minY;
//Angle incrementation multiplier
        private int nbAng = 0;
//Thread stopping variable
        private boolean continuer = true;
        private int totalClics = 0;
        private Timer timer;
        private int cycle;

        public Triangle() {
            setPreferredSize(new Dimension(400, 600));
            setBackground(Color.BLACK);
            couleurPrin = Color.GREEN;
            couleurBoite = Color.RED;
            points = new ArrayList<Point>();
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (!timer.isRunning()) {
                        if (totalClics < 3) {
                            nbAng = 0;
                            ajouterPoint(e.getX(), e.getY());
                            totalClics++;
                        } else {
                            cycle = 0;
                            totalClics = 0;
                            timer.restart();
                        }
                    }
                }
            });

            timer = new Timer(200, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    nbAng += 5;
                    repaint();
                    cycle++;
                    if (cycle == 80) {
                        timer.stop();
                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
        }

        /**
         * Repaints this component
         */
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            if (timer.isRunning()) {

                g2d.rotate(15.0 * nbAng, (largeur + getWidth()) / 2, (hauteur + getWidth()) / 2);

            }

            int i = 0;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            int[] coorX = new int[points.size() + 1];
            int[] coorY = new int[points.size() + 1];
            Iterator<Point> iter = points.iterator();
            while (iter.hasNext()) {
                Point p = iter.next();
                coorX[i] = p.getX();
                coorY[i] = p.getY();
                i++;
            }
            coorX[points.size()] = coorX[0];
            coorY[points.size()] = coorY[0];
            if (points.size() != 0) {
                g2d.setColor(Color.white);
                g2d.fillOval(minX + largeur / 2, minY + hauteur / 2, 6, 6);
                g2d.setColor(couleurPrin);
                for (i = 0; i < points.size(); i++) {
                    g2d.drawLine(coorX[i], coorY[i], coorX[i + 1], coorY[i + 1]);
                }
                for (i = 0; i < points.size(); i++) {
                    g2d.fillOval(coorX[i] - diametre / 2, coorY[i] - diametre / 2, diametre, diametre);
                }
                g2d.setColor(couleurBoite);
                g2d.drawRect(minX, minY, largeur, hauteur);
            }

            g2d.dispose();

        }

        /**
         * Adds a point. Stops at 3.
         *
         * @param x
         * @param y
         *
         *
         */
        public void ajouterPoint(int x, int y) {
            Point p = new Point(x, y);
            System.out.println(p.toString());
            if (points.size() >= 0 && points.size() < 3) {
                points.add(p);
                minX = p.getX() - 3;
                minY = p.getY() - 3;
            }
            if (points.size() == 3) {
                rectanguler(points);
            }
            repaint();

        }

        public Color getCouleurPrin() {
            return couleurPrin;
        }

        public void setCouleurPrin(Color c) {
            this.couleurPrin = c;
            repaint();
        }

        public int getDiametre() {
            return diametre;
        }

        public void setDiametre(int d) {
            this.diametre = d;
            repaint();
        }

        /**
         * Sets rectangle's values to the largest bounds possible
         *
         * @param points
         */
        private void rectanguler(ArrayList<Point> points) {
            Iterator<Point> iter = points.iterator();
            Point p1, p2, p3;
            p1 = iter.next();
            p2 = iter.next();
            p3 = iter.next();
            int dLarg;
            int dLong;
            if (p2 != null && p3 != null) {
                minX = Math.min(p1.getX(), p2.getX());
                minY = Math.min(p1.getY(), p2.getY());
                largeur = Math.abs(p1.getX() - p2.getX());
                hauteur = Math.abs(p1.getY() - p2.getY());
                if (p3 != null) {
                    minX = Math.min(minX, p3.getX());
                    minY = Math.min(minY, p3.getY());
                    dLarg = Math.max(Math.abs(p3.getX() - p2.getX()), Math.abs(p3.getX() - p1.getX()));
                    dLong = Math.max(Math.abs(p3.getY() - p2.getY()), Math.abs(p3.getY() - p1.getY()));
                    largeur = Math.max(dLarg, largeur);
                    hauteur = Math.max(dLong, hauteur);
                }
            }
        }

        /**
         * Custom point class Stores an x and y value
         *
         */
        private class Point {

            @Override
            public String toString() {
                return "Point [x=" + x + ", y=" + y + "]";
            }
            private int x, y;

            public Point() {
                setX(0);
                setY(0);
            }

            public Point(int x, int y) {
                setX(x);
                setY(y);
            }

            public int getX() {
                return x;
            }

            public void setX(int x) {
                this.x = x;
            }

            public int getY() {
                return y;
            }

            public void setY(int y) {
                this.y = y;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T02:52:50.773

第一个问题是你从不调用`start()`动画线程。

第二个问题是你不应该*在*EDT 之外做 gui 的东西。正如@AndrewThompson 在他的评论中提到的那样，您应该使用摆动[计时器](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)而不是线程。

# android - 进程对话框不显示在应用程序上

> ID：13964424
> 
> 赞同：0
> 
> 时间：2012-12-20T02:32:09.037
> 
> 标签：android, android-asynctask

我想从服务器加载信息发票到客户端。但是在加载过程中，没有显示进程对话框，所以我不知道加载何时完成。你能帮助我吗？或者有没有办法在加载过程中显示对话框，请指导我！

代码 callUrl

```
public class CallUrl extends AsyncTask<String, Integer, String> {

public static final int POST_TASK = 1;
public static final int GET_TASK = 2;         
private static final String TAG = "WebServiceTask";
// thời gian chờ của một kết nối, tính theo milliseconds (waiting to connect)
private static final int CONN_TIMEOUT = 3000; 
// thời gian chờ của một socket, tính bằng milliseconds (waiting for data)
private static final int SOCKET_TIMEOUT = 5000;   
private int taskType = GET_TASK;
private Context mContext = null;
private String processMessage = "Processing...";
private ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
private ProgressDialog pDlg = null;

//Khởi tạo
public CallUrl(int taskType, Context mContext, String processMessage) {

    this.taskType = taskType;
    this.mContext = mContext;
    this.processMessage = processMessage;
}

@Override
protected void onPostExecute(String result) {
    pDlg.dismiss();
}

//thêm thông tin cần thiết để gửi lên server 
public void addNameValuePair(String name, String value) {

    params.add(new BasicNameValuePair(name, value));
}

//Hiển thị dialog trong quá trình load data
private void showProgressDialog() {

    pDlg = new ProgressDialog(mContext);
    pDlg.setMessage(processMessage);
    pDlg.setProgressDrawable(mContext.getWallpaper());
    pDlg.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    pDlg.setCancelable(false);
    pDlg.show();
}

@Override
protected void onPreExecute() {

    showProgressDialog();
}

//kết nối đến server thông url
protected String doInBackground(String... urls) {
    String url = urls[0];
    String result = "";
    HttpResponse response = doResponse(url);
    if (response == null) {
        return result;
    } else {
        try {

            result = inputStreamToString(response.getEntity().getContent());

        } catch (IllegalStateException e) {
            Log.e(TAG, e.getLocalizedMessage(), e);

        } catch (IOException e) {
            Log.e(TAG, e.getLocalizedMessage(), e);
        }
    }
    return result;
}

// khởi tạo socket và kết nối
private HttpParams getHttpParams() {

    HttpParams htpp = new BasicHttpParams();   
    HttpConnectionParams.setConnectionTimeout(htpp, CONN_TIMEOUT);
    HttpConnectionParams.setSoTimeout(htpp, SOCKET_TIMEOUT); 
    return htpp;
}

//thao tác xử lý khi kết nối đến server 
private HttpResponse doResponse(String url) {

    HttpClient httpclient = new DefaultHttpClient(getHttpParams());
    HttpResponse response = null;

    try {
        switch (taskType) {

        case POST_TASK:
            HttpPost httppost = new HttpPost(url);
            // Add parameters
            httppost.setEntity(new UrlEncodedFormEntity(params));
            response = httpclient.execute(httppost);
            break;
        case GET_TASK:
            HttpGet httpget = new HttpGet(url);
            response = httpclient.execute(httpget);
            break;
        }
    } catch (Exception e) {

        Log.e(TAG, e.getLocalizedMessage(), e);

    }

    return response;
}

//Chuyển thông tin nhận về thành dạng chuỗi
private String inputStreamToString(InputStream is) {

    String line = "";
    StringBuilder total = new StringBuilder();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    try {
        // đọc thông tin nhận được cho đến khi kết thúc
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }
    } catch (IOException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }

    // Trả về giá trị chuỗi đầy đủ
    return total.toString();
}

} 
```

代码主要

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    doTimerTask();

    }
  public void doTimerTask() {
    TimerTask mTimerTask;
    Timer t = new Timer();
    final Handler handler = new Handler();
    mTimerTask = new TimerTask() {
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    testNetwork();
                    Log.d("TIMER", "TimerTask run");
                }
            });
        }
    };
    // public void schedule (TimerTask task, long delay, long period)
    t.schedule(mTimerTask, 500, 300000); //
}
  public void testNetwork()
{
    // Kiểm tra kết nối đến server
    TestConnectionNew test = new TestConnectionNew();
    try {
        String recieve = test.execute("http://longvansolution.tk/monthlytarget.php").get();
        if (recieve.equalsIgnoreCase("true") && isNetworkAvailable() == true)
        {
            loaddata();
        }
        else if (recieve.equalsIgnoreCase("false") || isNetworkAvailable() == false)
        {
            String mess = "Không thể kết nối đến server hoặc thiết bị chưa có kết nối mạng!";
            Toast.makeText(Invoice.this, mess, Toast.LENGTH_SHORT).show();
        }

    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
}
  public void workoffline()
{
    clearArray();
    try {
        mDb.openDB();
        Cursor mCursor = mDb.getAllInvoice(IDDelivery);
        if (mCursor.moveToFirst()) {
            do {
                codeInvoiceArray.add(mCursor.getString(1));
                nameArray.add(mCursor.getString(2));
                phonenumberArray.add(mCursor.getString(3));
                addressArray.add(mCursor.getString(4));
                urlArray.add(mCursor.getString(5));

            } while (mCursor.moveToNext());
            loaddatalistview();
        }
        mDb.closeDB();
    } catch (Exception e) {
        e.printStackTrace();
    }

}

// lấy dữ liệu từ server về thiết bị
public void loaddata()
{
    String phonenumber, name, address, url, code;
    JSONArray jArray;
    try
    {
        clearArray();
        String sampleURL = SERVICE_URL + "/monthlytarget.php";
        CallUrl wst = new CallUrl(CallUrl.GET_TASK, this, "Lấy thông tin hóa đơn...");
        String result = wst.execute(new String[] {
                sampleURL
        }).get();

        if (result.equalsIgnoreCase(""))
        {
            notification("Hôm nay không còn gì để giao!");
        }
        else
        {
            JSONObject json_data = null;
            JSONObject jsonObject = new JSONObject(result);
            jArray = jsonObject.getJSONArray("Orders");
            // Mở kết nối đến database
            mDb.openDB();

            // sử dụng json lấy các giá trị thông qua các key
            // gán nó vào các mảng tương ứng
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);

                // Lây thông tin theo mã id của người giao hàng
                if (json_data.getString("DeliveryId").equalsIgnoreCase(IDDelivery))
                {
                    phonenumber = json_data.getString("PhoneNumber");
                    address = json_data.getString("Address");
                    name = json_data.getString("CustomerName");
                    url = json_data.getString("Url");
                    code = json_data.getString("CodeInvoice");
                    save(code, url);
                    // Kiểm tra mã hóa đơn này đã có trong database chưa
                    // nếu chưa sẽ thêm data vào databse
                    // nếu đã có rồi sẽ cập nhật lại thông tin thông qua mã
                    // hóa đơn
                    if (mDb.test(code) == true)
                    {
                        mDb.insert(code, name, phonenumber, address, url, "PACKED",
                                IDDelivery);
                    }
                    else
                    {
                        mDb.editAll(code, name, phonenumber, address, url, IDDelivery, "PACKED");

                    }
                }
            }
            // Thực hiện xong, đóng kết nối
            mDb.closeDB();
        }
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    // Hiển thị thông tin nhận được lên listview
    workoffline();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:16:48.737

这里 ：

```
String sampleURL = SERVICE_URL + "/monthlytarget.php";
CallUrl wst = new CallUrl(CallUrl.GET_TASK, this, "Lấy thông tin hóa đơn...");
String result = wst.execute(new String[] {
        sampleURL
}).get();    //<<<<<<<<<<you are using execute().get() 
```

您正在使用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)从 AsyncTask 获取数据，`CallUrl`因为`get()`方法会阻止 UI 线程的执行，直到结果未从`AsyncTask`文档中检索到：

> 如有必要，等待计算完成，然后检索其结果。

因此，为了避免阻塞 UI 线程并显示警报框，您需要执行`CallUrl`以下操作：

```
String sampleURL = SERVICE_URL + "/monthlytarget.php";
CallUrl wst = new CallUrl(CallUrl.GET_TASK, Invoice.this, 
                                          "Lấy thông tin hóa đơn...");
wst.execute(new String[] {
        sampleURL
}); 
```

并用于在执行完成`onPostExecute`时更新 UI`doInBackground`

# android - 我如何知道所需的应用程序权限

> ID：13964426
> 
> 赞同：0
> 
> 时间：2012-12-20T02:32:16.533
> 
> 标签：android, permissions, android-manifest

一开始我给我的应用程序添加了很多权限，但最后我想确认什么是必要的，什么是无用的。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:35:44.193

您只需要您在代码中实际使用的权限。如果您正在制作相机应用程序，您将需要访问相机，而不是互联网。如果您正在制作网络浏览器，则需要访问互联网，而不是相机。

如果我是你，我会做的是删除所有权限，只在需要时添加它们。您不想请求过多的权限，否则您的应用程序可能看起来很可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:41:21.320

实际上，如果您的应用程序在没有所需权限的情况下运行，logcat 会告诉您缺少什么权限。然后添加它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:53:22.173

根据我的经验，LogCat 通常会打印一个错误，说明如果您尝试执行需要没有权限的操作时缺少哪个权限。

# css - CSS DIV 在加载时移动

> ID：13964432
> 
> 赞同：2
> 
> 时间：2012-12-20T02:32:42.873
> 
> 标签：css, google-chrome, joomla, safari, opera

出于某种原因，当我在 Chrome、Safari 和 Opera 中加载网站时，div 容器从网站顶部开始，然后移动到我放置它的位置。这仅在我加载网站时发生。究竟是什么导致 DIV 这样做？但是，该容器在 Firefox 中不会移动，它会在站点加载时和完成加载后加载到位。

我的代码有问题吗？

```
 <div style="padding-top:10px;padding-bottom:4px;"><center><img src="images/home_banner.png" /></center></div><div style="position:relative; float:right; display:inline; margin-top:-180px; padding-top:5px; padding-right:3px;">
<div style="font-size:60px; font-family:arial narrow;padding-bottom:43px;">Starting a Business</div>
<div style="font-size:60px; font-family:arial narrow; font-weight:bold;">Now Made Easy</div>
<div style="font-size:15px;padding-top:34px;">Document Driven Solutions that Promote Business Growth</div>
</div> 
```

# android - OpenGL 动态壁纸仅在三星手机上崩溃（尤其是在三星 Galaxy s3 上）

> ID：13964436
> 
> 赞同：1
> 
> 时间：2012-12-20T02:33:13.227
> 
> 标签：android, live-wallpaper, wallpaper, samsung-mobile

好吧，我有一个绝对让我困惑的问题。我有一个动态壁纸[https://play.google.com/store/apps/details?id=com.simpleworkerz.boise.sunsets#?t=W251bGwsMSwyLDIxMiwiY29tLnNpbXBsZXdvcmtlcnouYm9pc2Uuc3Vuc2V0cyJd](https://play.google.com/store/apps/details?id=com.simpleworkerz.boise.sunsets#?t=W251bGwsMSwyLDIxMiwiY29tLnNpbXBsZXdvcmtlcnouYm9pc2Uuc3Vuc2V0cyJd)

该应用程序包含动态壁纸和幻灯片放映。幻灯片版本与三星配合得很好（动态壁纸和幻灯片都显示了相同的 opengl 渲染器，但是当用户进入动态壁纸并选择“SET WALLPAPER”时，会发生以下情况。

1）设置的壁纸文字改变颜色。（尽管仍然像什么都没有启动一样） 2）屏幕再次变黑，消息“加载壁纸开始” 3）3-4 秒后没有出现任何内容，并且消息说 Boise Sunsets 已停止工作，需要关闭。或者再次点击“设置壁纸”会导致强制关闭。

在用户单击“设置墙纸”之前一切正常，因此一切都按应有的方式呈现和显示。

所以我假设我的问题与 oncreate 或 onsurface 改变有关。当单击“设置壁纸”按钮时，我不太明白到底叫什么。有人知道吗？

这是我的墙纸代码。

```
import android.content.SharedPreferences;
import android.service.wallpaper.*;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import javax.microedition.khronos.egl.EGL10;
import javax.microedition.khronos.egl.EGL11;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.egl.EGLContext;
import javax.microedition.khronos.egl.EGLDisplay;
import javax.microedition.khronos.egl.EGLSurface;
import javax.microedition.khronos.opengles.GL10;

 public class BoiseSunsetsLiveWallpaper extends WallpaperService{

@Override
public Engine onCreateEngine(){

    return new MyEngine();

}

class MyEngine extends Engine
{

    private float mTouchX = -1;
    private float mTouchY = -1;

    private GLRenderer glRenderer;
    private GL10 gl;
    private EGL10 egl;
    private EGLContext glc;
    private EGLDisplay glDisplay;
    private EGLSurface glSurface;

    private ExecutorService executor;
    private Runnable drawCommand;

@Override
    public void onCreate(final SurfaceHolder holder){
        super.onCreate(holder);

        executor = Executors.newSingleThreadExecutor();

        drawCommand = new Runnable(){
            public void run(){

                glRenderer.onDrawFrame(gl);
                egl.eglSwapBuffers(glDisplay, glSurface);
                if(isVisible()
                        && egl.eglGetError() != EGL11.EGL_CONTEXT_LOST 
                        && !executor.isShutdown()){
                    executor.execute(drawCommand);
                }
            }
        };

    }

    @Override
    public void onDestroy(){
        executor.shutdown();

        //setTouchEventsEnabled(false);
        //glRenderer.onSurfaceDestroyed();
        glRenderer = null;

        super.onDestroy();
    }

    @Override
    public void onSurfaceCreated(final SurfaceHolder holder){
        super.onSurfaceCreated(holder);

        Runnable surfaceCreatedCommand = new Runnable(){
            public void run(){

                //Initialize Open GL
                egl = (EGL10) EGLContext.getEGL();
                glDisplay = egl.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);
                int[] version = new int[2];
                egl.eglInitialize(glDisplay, version);
                int[] configSpec = {
                        EGL10.EGL_RED_SIZE, EGL10.EGL_DONT_CARE,
                        EGL10.EGL_GREEN_SIZE, EGL10.EGL_DONT_CARE,
                        EGL10.EGL_BLUE_SIZE, EGL10.EGL_DONT_CARE,
                        EGL10.EGL_DEPTH_SIZE, EGL10.EGL_DONT_CARE,
                        EGL10.EGL_NONE };

                EGLConfig[] configs = new EGLConfig[1];
                int[] numConfig = new int[1];
                egl.eglChooseConfig(glDisplay, configSpec, configs, 1, numConfig);
                EGLConfig config = configs[0];

                glc = egl.eglCreateContext(glDisplay, config, EGL10.EGL_NO_CONTEXT, null);

                glSurface = egl.eglCreateWindowSurface(glDisplay, config, holder, null);

                egl.eglMakeCurrent(glDisplay, glSurface, glSurface, glc);
                gl = (GL10) (glc.getGL());

                //Initialize Renderer
                glRenderer = new GLRenderer(BoiseSunsetsLiveWallpaper.this);
                glRenderer.onSurfaceCreated(gl, config);
                }
            };
            executor.execute(surfaceCreatedCommand);

    }

    @Override
    public void onSurfaceDestroyed(final SurfaceHolder holder){
        Runnable surfaceDestroyedCommand = new Runnable() {
            public void run(){
                //Free OpenGL resources
                egl.eglMakeCurrent(glDisplay, EGL10.EGL_NO_SURFACE, 
                        EGL10.EGL_NO_SURFACE, EGL10.EGL_NO_CONTEXT);
                egl.eglDestroySurface(glDisplay, glSurface);
                egl.eglDestroyContext(glDisplay, glc);
                egl.eglTerminate(glDisplay);
            }
        };
        executor.execute(surfaceDestroyedCommand);
        super.onSurfaceDestroyed(holder);
    }

    @Override
    public void onSurfaceChanged(final SurfaceHolder holder, final int format, final int width, final int height){
        super.onSurfaceChanged(holder, format, width, height);

        Runnable surfaceChangedCommand = new Runnable(){
            public void run(){
                glRenderer.onSurfaceChanged(gl, width, height);
            }
        };
        executor.execute(surfaceChangedCommand);
    }

    @Override
    public void onVisibilityChanged(final boolean visible){
        super.onVisibilityChanged(visible);

        if(visible){

            executor.execute(drawCommand);
        }
    }

    @Override
    public void onOffsetsChanged(final float xOffset, final float yOffset, final float xOffsetStep, final float yOffsetStep,
            final int xPixelOffset,final int yPixelOffset){
        super.onOffsetsChanged(xOffset, yOffset, xOffsetStep, yOffsetStep, xPixelOffset, yPixelOffset);

        Runnable offsetsChangedCommand = new Runnable(){
            public void run(){
                if (xOffsetStep != 0f){
                    glRenderer.setParallax(xOffset - 0.5f);
                }
            }
        };
        executor.execute(offsetsChangedCommand);
    }

    public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {

    }

    @Override
    public void onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            mTouchX = event.getX();
            mTouchY = event.getY();
        } else {
            mTouchX = -1;
            mTouchY = -1;
        }

        Runnable TouchChangedCommand = new Runnable(){
            public void run(){
                if (mTouchX >=0 && mTouchY >= 0){

                    glRenderer.IsPressed(mTouchX, mTouchY);

                }
                else{

                }
            }
        };
        executor.execute(TouchChangedCommand);

        super.onTouchEvent(event);
    }

} 
```

}

奇怪的是，如果我真的快速点击设置壁纸并快速退出屏幕，有时壁纸实际上会起作用！或几秒钟后将关闭。

我实际上并没有三星手机，因为我在 Verizon 和 Sprint 商店都在测试它。哈哈。所以我不能给出具体的错误。一旦我得到三星测试手机，我会的。在那之前，我很感激你能收集到的任何见解！

我正在使用来自 Hello, Android 的 Ed Burnette 的部分代码作为动态壁纸。我认为我的问题与这个问题有关。[http://forums.pragprog.com/forums/152/topics/8254](http://forums.pragprog.com/forums/152/topics/8254) 但我做了所有这些更改，但仍然遇到问题。

## 更新

```
/AndroidRuntime( 9520): FATAL EXCEPTION: pool-1-thread-1

E/AndroidRuntime( 9520): java.lang.NullPointerException

E/AndroidRuntime( 9520):    at com.simpleworkerz.boise.sunsets.BoiseSunsetsLiveWallpaper$MyEngine$1.run(BoiseSunsetsLiveWallpaper.java:55)

E/AndroidRuntime( 9520):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)

E/AndroidRuntime( 9520):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)

E/AndroidRuntime( 9520):    at java.lang.Thread.run(Thread.java:856)

D/KeyguardViewMediator(  651): setHidden false

D/KeyguardViewMediator(  651): setHidden false

I/WindowManager(  651): WIN DEATH: Window{423d0120 XXX.XXXXX.XXX.XXXXXXX/XXX.XXXXX.XXX.XXXXXXX.XXXXXXXX.XXXXXXXXXXXX paused=false} 
```

# javascript - Android 裁剪图像的 Phonegap

> ID：13964444
> 
> 赞同：-1
> 
> 时间：2012-12-20T02:34:16.493
> 
> 标签：javascript, html

我正在使用 javascript 或 HTML 处理 phonegap 裁剪图像。拍照后如何裁剪图片或获取照片表单库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:45:34.943

可以通过 Android API 裁剪图像。Phonegap 只提供一个接口来连接 javascript 到 Android API。否则您可以使用 HTML5 画布选项。

[http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop/](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop/)

# jquery - 使变量可用于其他回调

> ID：13964446
> 
> 赞同：2
> 
> 时间：2012-12-20T02:34:22.587
> 
> 标签：jquery

我想为其他回调函数提供一个变量：

```
$(function(){
    $("#home_sec_2 img").attr("id", function (arr) {
        return arr;
    });
    $('#home_sec_2').on('mouseover','img',function(){
        position = $(this).position().left;
        var $ll = $(this).prev();
        console.log($ll);
        /* $ll.css({left: position}); */
        $ll.css({left:position});

        $ll.addClass('shown');
        $ll.stop().slideToggle('slow');
        var $this = $ll;
        console.log(position);
        var pp = $ll.position();
        console.log(pp);
    }),     
    $('#home_sec_2').on('mouseleave','img',function(){
        /* $ll = $(this).attr('id');     */
        **var $img = $(this).prev()**
        $img.slideToggle('slow');
         console.log($img);
    })
}); 
```

变量在`$img`我想提供如何访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:38:20.620

更改范围，`$img`使其位于该绑定之外，并且就在您准备好的文档下方。例如

```
$(function(){
  // declare $img scope here
  var $img;

  /*
    other code
    ...
    if ($img) { ... }
    ...
  */

  $('#home_sec_2').on('mouseleave','img',function(){
    // assign it here
    $img = $(this).prev();
  });
}); 
```

只需确保`if($img)`在其他任何地方使用它之前进行测试，或设置默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:14:37.667

那你为什么不做一个全局变量呢？

```
<script>
 var your_var;
  $('#home_sec_2').on('mouseover','img',function(){
    your_var = 'some initialization';
  });
  $('#home_sec_2').on('mouseleave','img',function(){
    alert(your_var);
  });
</script> 
```

# c++ - 为什么用 enable_if 编译错误

> ID：13964447
> 
> 赞同：31
> 
> 时间：2012-12-20T02:34:33.490
> 
> 标签：c++, templates, metaprogramming, sfinae, enable-if

为什么这不能用 gcc48 和 clang32 编译？

```
#include <type_traits>

template <int N> 
struct S {

    template<class T> 
    typename std::enable_if<N==1, int>::type
    f(T t) {return 1;};

    template<class T> 
    typename std::enable_if<N!=1, int>::type
    f(T t) {return 2;};
};

int main() {
    S<1> s1;
    return s1.f(99);
} 
```

海合会错误：

```
/home/lvv/p/sto/test/t.cc:12:2: error: no type named ‘type’ in ‘struct enable_if<false, int>’
  f(T t) {return 2;};
  ^ 
```

叮当错误：

```
/home/lvv/p/sto/test/t.cc:11:26: error: no type named 'type' in 'std::enable_if<false, int>'; 'enable_if' cannot be used to
      disable this declaration
        typename std::enable_if<N!=1, int>::type
                                ^~~~
/home/lvv/p/sto/test/t.cc:16:7: note: in instantiation of template class 'S<1>' requested here
        S<1> s1;
             ^ 
```

**编辑 - 解决方案**

我已经接受了 Charles Salvia 的回答，但出于实际原因，我无法使用建议的解决方法（专门研究 N）。我找到了其他适合我的解决方法。使`enable_if`依赖`T`：

```
typename std::enable_if<(sizeof(T),N==1), int>::type 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T02:41:14.383

因为您在函数模板中使用`enable_if`而不使用模板参数`T`。如果要在结构`S`具有特定模板参数值时进行专门化，则`N`需要使用类模板专门化。

```
template <int N, class Enable = void> 
struct S {  };

template <int N>
struct S<N, typename std::enable_if<N == 1>::type>
{
  ....
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-31T15:28:29.497

好吧，我不确定你想做什么，但也许这段代码会有所帮助：

```
#include <iostream>

template <int N>
struct S {

    template<class T=int>
    typename std::enable_if<N==1, T>::type
    f(T t) {return 1;}

    template<class T=int>
    typename std::enable_if<N!=1, T>::type
    f(T t) {return 2;}
};

int main()
{
    S<1> s1;
    S<2> s2;
    std::cout << s1.f(99) << " " << std::endl << s2.f(5);
} 
```

这将打印 1 和 2。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-20T02:51:14.573

要`std::enable_if`像这样工作，您依赖于 SFINAE。不幸的是，在您宣布

```
S<1> s1; 
```

它将实例化所有`S<1>`的成员声明。`S<1>`如果 SFINAE是一个格式不正确的构造，那么此时 SFINAE 才会发挥作用。它不是。不幸的是，它包含一个无效的函数，因此实例化`S<>`是无效的。

对于这样的事情，我可能会遵循一个单独的模板结构：

```
template <bool B>
struct f_functor {
    template <typename T>
    static int f(T t) { return 1; }
};

template <>
struct f_functor<false> {
    template <typename T>
    static int f(T t) { return 2; }
};

template <int N> 
struct S {

    template<class T> 
    typename int f(T t) { return f_functor<N==1>::f(t); }
}; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-16T20:46:52.617

使用默认的布尔模板参数，如下所示：

```
template <int N> 
struct S {

    template<class T, bool EnableBool=true> 
    typename std::enable_if<N==1 && EnableBool, int>::type
    f(T t) {return 1;};

    template<class T, bool EnableBool=true> 
    typename std::enable_if<N!=1 && EnableBool, int>::type
    f(T t) {return 2;};
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T08:50:16.473

对于这种情况，您可以考虑根本不使用 enable_if。可以简单地专门化 f：

```
template <int N> 
struct S {
    template<class T> int f(T t);
};

template<int N>
template<class T>
int S<N>::f(T t) { return 2; }

template<>
template<class T>
int S<1>::f(T t) { return 1; }

int main() {
    S<1> s1;
    return s1.f(99);
} 
```

# scala - 删除斯坦福主题建模工具箱中的标准英语停用词

> ID：13964449
> 
> 赞同：1
> 
> 时间：2012-12-20T02:34:45.760
> 
> 标签：scala, lda, stanford-nlp

我正在使用*Stanford Topic Modeling Toolbox 0.4.0 for LDA*，我注意到如果我想删除标准的英语停用词，我可以使用 a`StopWordFilter("en")`作为标记器的最后一步，但我该如何使用它？

```
import scalanlp.io._;
import scalanlp.stage._;
import scalanlp.stage.text._;
import scalanlp.text.tokenize._;
import scalanlp.pipes.Pipes.global._;

import edu.stanford.nlp.tmt.stage._;
import edu.stanford.nlp.tmt.model.lda._;
import edu.stanford.nlp.tmt.model.llda._;

val source = CSVFile("pubmed-oa-subset.csv") ~> IDColumn(1);

val tokenizer = {
  SimpleEnglishTokenizer() ~>            // tokenize on space and punctuation
  CaseFolder() ~>                        // lowercase everything
  WordsAndNumbersOnlyFilter() ~>         // ignore non-words and non-numbers
  MinimumLengthFilter(3)                 // take terms with >=3 characters
  StopWordFilter("en")                   // how to use it? it's not working.
}

val text = {
  source ~>                              // read from the source file
  Column(4) ~>                           // select column containing text
  TokenizeWith(tokenizer) ~>             // tokenize with tokenizer above
  TermCounter() ~>                       // collect counts (needed below)
  TermMinimumDocumentCountFilter(4) ~>   // filter terms in <4 docs
  TermDynamicStopListFilter(30) ~>       // filter out 30 most common terms
  DocumentMinimumLengthFilter(5)         // take only docs with >=5 terms
}

// turn the text into a dataset ready to be used with LDA
val dataset = LDADataset(text);

// define the model parameters
val params = LDAModelParams(numTopics = 30, dataset = dataset,
  topicSmoothing = 0.01, termSmoothing = 0.01);

// Name of the output model folder to generate
val modelPath = file("lda-"+dataset.signature+"-"+params.signature);

// Trains the model: the model (and intermediate models) are written to the
// output folder.  If a partially trained model with the same dataset and
// parameters exists in that folder, training will be resumed.
TrainCVB0LDA(params, dataset, output=modelPath, maxIterations=1000);

// To use the Gibbs sampler for inference, instead use
// TrainGibbsLDA(params, dataset, output=modelPath, maxIterations=1500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T06:03:33.833

If each line of the stopwords.txt (e.g. download from [http://jmlr.org/papers/volume5/lewis04a/a11-smart-stop-list/english.stop](http://jmlr.org/papers/volume5/lewis04a/a11-smart-stop-list/english.stop)) contains a stop word you can use

```
val text = {
  source ~>                              // read from the source file
  Column(3) ~>                           // select column containing text
  TokenizeWith(tokenizer) ~>             // tokenize with tokenizer above
  TermCounter() ~>                       // collect counts (needed below)
  TermMinimumDocumentCountFilter(4) ~>   // filter terms in <4 docs
  TermStopListFilter(scala.io.Source.fromFile("stopwords.txt").getLines().toList) ~> 
  TermDynamicStopListFilter(30) ~>       // filter out 30 most common terms
  DocumentMinimumLengthFilter(5)         // take only docs with >=5 terms
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:14:43.610

我认为它应该在 val 文本中：

```
val text = {
  source ~>                              // read from the source file
  Column(4) ~>                           // select column containing text
  TokenizeWith(tokenizer) ~>             // tokenize with tokenizer above
  TermCounter() ~>                       // collect counts (needed below)
  TermMinimumDocumentCountFilter(4) ~>   // filter terms in <4 docs
  StopWordFilter("en") ~>
  TermDynamicStopListFilter(30) ~>       // filter out 30 most common terms
  DocumentMinimumLengthFilter(5)         // take only docs with >=5 terms
} 
```

您也可以使用您自己的停止列表，将以下内容代替`StopWordFilter("en") ~>`

```
 TermStopListFilter(List("a", "and", "but", "if")) ~> 
```

只需在此列表中添加所有选择的停用词。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T10:03:59.717

我不是专家，但我想你应该这样做

```
val tokenizer = {
  SimpleEnglishTokenizer() ~>            // tokenize on space and punctuation
  CaseFolder() ~>                        // lowercase everything
  WordsAndNumbersOnlyFilter() ~>         // ignore non-words and non-numbers
  MinimumLengthFilter(3) ~>              // take terms with >=3 characters
  new StopWordFilter("en")               // remove stop words for the english language
} 
```

# java - JavaFx - 以编程方式设置 LineChart 系列颜色

> ID：13964453
> 
> 赞同：5
> 
> 时间：2012-12-20T02:35:21.103
> 
> 标签：java, javafx-2

我是 Java 新手，也是 JavaFX 新手。我正在尝试构建一个使用 JavaFx LineChart 显示实时数据的动态图。

我在 oracle 文档[http://docs.oracle.com/javafx/2/charts/css-styles.htm#CIHGIAGE](http://docs.oracle.com/javafx/2/charts/css-styles.htm#CIHGIAGE)中注意到可以使用 CSS 设置图表样式。

**是否可以以编程方式更改系列的颜色？**

```
public Node addLineChart(){

    //final NumberAxis yAxis = new NumberAxis(-80,60,20);
    final NumberAxis yAxis;
    final CategoryAxis xAxis;

    if(firingOrderSelectionIndex >= 0){
        String selectedFiringOrder = firingOrders[cylselectionIndex][firingOrderSelectionIndex];
        String[] currentFiringOrder = selectedFiringOrder.split("-");

        xAxis = new CategoryAxis(FXCollections.observableArrayList(currentFiringOrder));            
        xAxis.setAutoRanging(false);

        if(selectionIndex > 1){
          yAxis = new NumberAxis(-60,40,20);
        }else{
          yAxis = new NumberAxis(-75,50,15);
        }             
    }else{
        xAxis = new CategoryAxis();
        yAxis = new NumberAxis(0,0,0);          
    }   

    xAxis.setLabel("Order");
    xAxis.setStyle("-fx-font-size: 14;-fx-font-weight: bolder;");
    //xAxis.setAutoRanging(false); //If you are manually setting values in the constructor you can do this.
    //otherwise if this is done, the graph will crash. So, while using constructor with no values leave this config as default.

    //xAxis.setLowerBound(1);        
    //xAxis.setUpperBound(4);
    //xAxis.setTickUnit(1);

    yAxis.setMinorTickVisible(false);

    final LineChart<String,Number> lineChart = new LineChart<String,Number>(xAxis,yAxis);
    lineChart.setTitle("Graph");
    lineChart.setLegendVisible(false);
    lineChart.setStyle(".default-color0.chart-series-line { -fx-stroke: #f0e68c; }");

    //series.setName("Live");
    series.getData().add(new XYChart.Data("1", 5));
    series.getData().add(new XYChart.Data("2", 5));

    lineChart.getData().add(series);    
    xAxis.setVisible(false);

    return lineChart;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:11:06.523

```
chart.setStyle(".default-color0.chart-series-line { -fx-stroke: #e9967a; }"); 
```

# c# - Linux 和 Mac 中的 C#

> ID：13964454
> 
> 赞同：2
> 
> 时间：2012-12-20T02:35:37.383
> 
> 标签：c#, linux, mono, monodevelop

我想在 Linux 和 Mac OS 中运行一个 C#（Windows 应用程序）项目。我的项目有一个简单的代码，但我想在这个项目上制作一个漂亮的界面。只是 Mono 做这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:37:56.563

是的，Mono 允许您在 Mac 和 Linux 上制作 GUI。GTK# 是一个可以跨平台工作的工具包。你可以在这里阅读更多：

[http://www.mono-project.com/Gui_Toolkits](http://www.mono-project.com/Gui_Toolkits)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:39:22.183

如果你问是否可以在 Mono 上完成所有这些，这取决于接口；在一般情况下，我对此表示怀疑。不幸的是，Mono 支持不完整，而且看起来不会很快改变。

请检查以下内容以查看 Mono 的状态： [http ://en.wikipedia.org/wiki/Mono_(software)#Current_status_and_roadmap](http://en.wikipedia.org/wiki/Mono_(software)#Current_status_and_roadmap)

# counter - bxSlider 当前幻灯片数量显示/总幻灯片显示

> ID：13964456
> 
> 赞同：2
> 
> 时间：2012-12-20T02:36:09.160
> 
> 标签：counter, slide, bxslider

我想以 getCurrentSlide / getSlideCount 的格式构建带有分页的 bxslider。像[这里](http://diary.chopard.com/precious-temptations-bejewelled-treats)的东西。

我的html代码：

```
<ul class="bxslider">
  <li>...</li>
  ...
</ul>
<div class="counter">1 / 10</div> 
```

JS代码：

```
jQuery('.bxslider').bxSlider({
  pager: true,
  auto: false,
  controls: true
}); 
```

我假设，我需要使用 getCurrentSlide / getSlideCount，但我没有找到任何示例。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-23T13:57:35.143

bxSlider 有短寻呼机；）

`$('.bxslider').bxSlider({ pager: true, pagerType: 'short' });`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-20T13:09:32.330

你可以这样做；

```
slider = $('.bxslider').bxSlider({ 
    nextSelector: '.next-slide',
    nextText: '>',  
    prevSelector: '.prev-slide',
    prevText: '<',
    mode: 'fade',
    captions: false, 
    auto: true,
    autoControls: false,
    onSlideAfter: function(){    
        $('.slide-number').text((slider.getCurrentSlide()+1)+'/'+slider.getSlideCount());   
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-10T17:23:03.833

将此代码附加到您的标题中

```
<script>
(function ($) {
     //bxslider
     function insertCount(slide_curr, slide_count) {
         $('#slide-counter').html('<strong>' + (slide_curr + 1) + '</strong>/' + slide_count);
     };

        var slider = $('.bxslider').bxSlider({
            auto: true,
            pager: false,
            captions:true,
            onSliderLoad: function () {
                var slide_count = slider.getSlideCount();
                var slide_curr = slider.getCurrentSlide();
                insertCount(slide_curr, slide_count);
            },
            onSlideNext: function () {
                var slide_count = slider.getSlideCount();
                var slide_curr = slider.getCurrentSlide();
                insertCount(slide_curr, slide_count);
            },
            onSlidePrev: function () {
                var slide_count = slider.getSlideCount();
                var slide_curr = slider.getCurrentSlide();
                insertCount(slide_curr, slide_count);
            }
        });
})(jQuery);
</script> 
```

在关闭 ul() 之后添加。您已完成并且应该显示总索引和当前索引希望这会有所帮助。

解决方案[说明和演示可以在这里找到](http://www.antimath.info/jquery/bxslider-slides-counter/)

# php - 如何打印特定的二维数组？

> ID：13964460
> 
> 赞同：-5
> 
> 时间：2012-12-20T02:36:19.920
> 
> 标签：php, arrays

我有这个代码：

```
<?php
$multiplicand=1;
for($i=0;$i<=1;$i++)
{
  $product[$i][$multiplicand] = $multiplicand*$i;
} 
```

我应该将数组的大小更正为 231 x 537，我必须访问 [167][31]。有趣的是我的讲师说表格应该从0开始。请帮我做必要的安排/更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:07:04.900

您需要在现有的循环中添加另一个循环。然后你可以从 0 0 开始到 231 537。只要让两者都从 0 ($i = 0, $j = 0) 开始到 231 和 537 ($i < 231, $j < 537)。

你还需要谷歌二维数组

# c# - 无法打开 SQLite 数据库

> ID：13964462
> 
> 赞同：5
> 
> 时间：2012-12-20T02:36:38.207
> 
> 标签：c#, sqlite, windows-8, windows-store-apps, sqlite-net

使用此代码：

```
public void InsertPlatypiRequestedRecord(string PlatypusId, string PlatypusName, DateTime invitationSentLocal)
{
    var db = new SQLiteConnection(SQLitePath);
    {
        db.CreateTable<PlatypiRequested>();
        db.RunInTransaction(() =>
            {
                db.Insert(new PlatypiRequested
                              {
                                  PlatypusId = PlatypusId,
                                  PlatypusName = PlatypusName,
                                  InvitationSentLocal = invitationSentLocal
                              });
                db.Dispose();
            });
    }
} 
```

...我明白了，“ *SQLite.SQLiteException 未被用户代码 HResult=-2146233088 消息处理=无法从未打开的数据库创建命令*”

...但是尝试添加“db.Open()”是行不通的，因为显然没有这样的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T03:34:38.473

您正在过早地处置数据库（在事务内部）。最好将事情包装在“使用”语句中，这将处理数据库连接：

```
private void InsertPlatypiRequestedRecord(string platypusId, string platypusName, DateTime invitationSentLocal)
{
    using (var db = new SQLiteConnection(SQLitePath))
    {
        db.CreateTable<PlatypiRequested>();
        db.RunInTransaction(() =>
        {
            db.Insert(new PlatypiRequested
            {
                PlatypusId = platypusId,
                PlatypusName = platypusName,
                InvitationSentLocal = invitationSentLocal
            });
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:43:53.397

```
string connecString = @"Data Source=D:\SQLite.db;Pooling=true;FailIfMissing=false";       
/*D:\sqlite.db就是sqlite数据库所在的目录,它的名字你可以随便改的*/
SQLiteConnection conn = new SQLiteConnection(connectString); //新建一个连接
conn.Open();  //打开连接
SQLiteCommand cmd = conn.CreateCommand();

cmd.CommandText = "select * from orders";   //数据库中要事先有个orders表

cmd.CommandType = CommandType.Text;
using (SQLiteDataReader reader = cmd.ExecuteReader())
{
   while (reader.Read())
                Console.WriteLine( reader[0].ToString());
} 
```

[你可以在这里](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)下载 System.Data.SQLite.dll

[这是一篇关于csharp connect sqlite](http://outofmemory.cn/code-snippet/691/C-call-SQLite-yanshi-code)的中文文章

# gwt - POJO 信息在 RPC 调用 (GWT) 期间丢失

> ID：13964468
> 
> 赞同：1
> 
> 时间：2012-12-20T02:37:20.100
> 
> 标签：gwt

我遇到了 RPC 调用和 GWT 的问题。本质上，我有一个`Person`类（客户端和服务器之间的公共代码），它是在客户端 Web 代码中创建的，通过 RPC 调用发送到服务器代码，然后保存到数据库（OrientDB）。我已经验证了以下工作：

1.  RPC 调用 - 我能够向服务器发送信息并从服务器检索信息
2.  保存到数据库 - 已验证人员对象已保存到数据库

我遇到的问题是将 POJO 从客户端传输到服务器。我已经验证 POJO 的属性在它被发送到服务器之前是完整的，但是，传递给服务器的对象包含所有属性的空值。本质上，课程被转移，但信息没有。然后它保存到数据库中，但显然其中没有包含任何相关信息。

我将在下面复制我认为相关的内容，请让我知道我还能提供什么来使这个问题更容易识别。请注意，这些仍处于测试状态，因此请注意评论:)

知道为什么我的 POJO 的信息在翻译中丢失了吗？

## `Person`对象，然后是它继承自的抽象类：

```
public class Person extends org.matesweb.shared.AbsPerson implements Serializable
{
    @Id 
    private String id; // DON'T CREATE GETTER/SETTER FOR IT TO PREVENT THE CHANGING BY THE USER APPLICATION, 
                       // UNLESS IT'S NEEDED

    //sets new user details
    public void setPerson(String fIrstName, String mIdInit, String lAstName, String email, String password)
    {
        firstName = fIrstName;
        middleInitial = mIdInit;
        lastName = lAstName;
    }

    /*getter and setter methods - required for every 
     * field due to restrictions imposed by OrientDB*/ 

    public Object getId()
    {
        String tmp;
        tmp = id.toString();
        return tmp;
    }
//end class  
}

public class AbsPerson implements Serializable
{
    String firstName;
    String middleInitial;
    String lastName;

  //  public sys.Login login;

    public org.matesweb.shared.Group[] groups;
    private org.matesweb.shared.Purchase[] purchases;

    /*this method adds a new purchase to the purchases variable*/
/*    public void addPurchase(float price, String description)
    {
        people.Purchase newPurchase = new people.Purchase(login, price, description);
    }
*/    
    /*adds a person to a group by comparing the passed in group ID and PWD*/
    public void addGroup(String groupID, String groupPWD)
    {
        //compare group ID with group PWD to add a user to the group
    }

    /*getter and setter methods - required for every 
     * field due to restrictions imposed by OrientDB*/
    public String getFirstName()
        {
            return firstName;
        }
    public void setFirstName(String name)
        {
            firstName = name;
        }       

    public String getMiddleInitial()
        {
            return middleInitial;
        }
    public void setMiddleInitial(String midInit)
        {
            middleInitial = midInit;
        }       

    public String getLastName()
        {
            return lastName;
        }
    public void setLastName(String ln)
        {
            lastName = ln;
        }       

    /*
    public sys.Login getLogin()
        {
            return login;
        }
    public void setLogin(sys.Login log)
        {
            login = log;
        }
    */

    public org.matesweb.shared.Group[] getGroups()
        {
            return groups;
        }
    public void setGroups(org.matesweb.shared.Group[] gro)
        {
            groups = gro;
        }       

    public org.matesweb.shared.Purchase[] getPurchases()
        {
            return purchases;
        }
    public void setPurchases(org.matesweb.shared.Purchase[] purch)
        {
            purchases = purch;
        }
} 
```

## 服务

```
package org.matesweb.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;
import org.matesweb.shared.Person;

@RemoteServiceRelativePath("peopleService")
public interface PeopleService extends RemoteService {

//test services
    String stringTest(String outgoingString);
    Person getPerson(String persId);

//production services
    String savePerson(Person p);
} 
```

## 服务异步

```
import com.google.gwt.user.client.rpc.AsyncCallback;
import org.matesweb.shared.Person;

public interface PeopleServiceAsync
{
    //tests
    void stringTest(String outgoingString, AsyncCallback<String> incomingString);
    void getPerson(String persId, AsyncCallback<Person> retPerson);

    //production services
    void savePerson(Person p , AsyncCallback<String> st);
} 
```

## `ServiceImpl`调用此特定方法：

```
//production calls
    @Override
    public String savePerson(Person p) {
        String st = ioObj.saveObj(p);
        if(st.equals("Success")){
            return "Your information has been saved successfully!";
        } else{
            return "Something has gone wrong on our end... Sorry! Error:<br /> " + st;
        } 
    } 
```

最后，调用本身

```
private static void savePerson(Person p)
    {        
        // Initialize the service proxy.
        if (peopleSvc == null) {
          peopleSvc = GWT.create(PeopleService.class);
        }

        //resets status
        st="";

        // Set up the callback object.
        AsyncCallback<String> callback = new AsyncCallback<String>() {
            @Override
            public void onFailure(Throwable caught) {
                st = caught.getMessage();
                Label stLabel= new Label(st);
                personTable.setWidget(3,1,stLabel);            
            }

            @Override
            public void onSuccess(String result) {
                st = result;
                HTML stLabel= new HTML(st);
                joinPanel.add(stLabel);
            }
        };
        // Make the call to the people service.
        peopleSvc.savePerson(p, callback);    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:39:34.093

我可以通过实现 GWT 的 IsSerializable 接口来解决这个问题。我还从 Person 类中删除了 Serializable 接口，并让它从它继承的抽象类继承 IsSerializable 。

# ms-access-2010 - MS Access 2010 触发器/数据宏

> ID：13964473
> 
> 赞同：-2
> 
> 时间：2012-12-20T02:37:47.127
> 
> 标签：ms-access-2010

我正在开发一个数据库来进行年度库存盘点，其中包含 32 个表，包括 Master 在内的 33 个表。

我们目前有 4000 个 SKU，因此需要将主表分解为较小的表，以便我可以将实际数量的工作分配给我的柜台。

我想要实现的是，当我的计数器使用 UI 在较小的表中输入数据时，它会自动填充主表中的字段。

任何帮助将不胜感激。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:42:17.797

在 Access 中，无法将触发器应用于表。您可以做的是创建一个实现网格的表单。有一个更新后的事件可以满足您的需要。您可以使用数据表视图使表单看起来像一个表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:48:33.730

虽然您可以创建一个数据宏* 来从另一个表的更新中更新一个表，但为什么要在这种情况下这样做呢？您可以在子表中包含数量字段并在运行更新查询之前针对主表验证数据，或者子表（注意，表，员工 ID 将足以划分数据）可以仅包含员工 id 和 SKU，然后可以通过 SKU 将子表连接到主表，并且所有更新都使用主表中的数量字段：

```
SELECT Mytable1.SKU, MyTable.Quantity 
FROM MyTable1
INNER JOIN MyTable 
ON MyTable1.SKU = MyTable.SKU
WHERE EmployeeID = [Enter ID: ] 
```

* * *

*[数据宏](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx)

![数据宏](../Images/80538c95e1a7af8c81a7c7d0d66b8633.png)

# php - php 计算单词并删除

> ID：13964474
> 
> 赞同：0
> 
> 时间：2012-12-20T02:37:54.773
> 
> 标签：php, word

如何删除 url inp php 上的一些单词？

网址：/hiaz/0.1.1/index.php?route=product/product&product_id=153&tracking=507b790fadc48

我只想：跟踪=507b790fadc48

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:43:47.190

如果您将完整的 url 存储在 var $myurl 中：

```
$result = substr($myurl, strrpos($myurl, "tracking"), strlen ($myurl) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:40:37.227

如果您`$_GET`在`index.php`. 或者，如果您想获取整个查询字符串，您可以使用`$_SERVER['QUERY_STRING']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:56:35.783

你所拥有的是

```
$url = /hiaz/0.1.1/index.php?route=product/product&product_id=153&tracking=507b790fadc48 
```

你想要的是

```
$newurl = /hiaz/0.1.1/index.php?tracking=507b790fadc48 
```

首先将部分网址提取到“？” 特点。然后提取跟踪部分并合并。

```
$part1 = substr($url,0,strpos($url,'?'));
$part2 = substr($url,strpos($url,"tracking"),strlen($url)-strpos($url,"tracking"));

$newurl = $part1 + $part2; 
```

# python - BeautifulSoup 递归错误调用 tag.string

> ID：13964478
> 
> 赞同：1
> 
> 时间：2012-12-20T02:38:06.907
> 
> 标签：python, beautifulsoup

这是一个非常奇怪的错误，我似乎无法弄清楚。

```
import urllib2
from bs4 import BeautifulSoup

url = 'http://www.crummy.com/software/BeautifulSoup/bs4/doc/'
soup = BeautifulSoup(urllib2.urlopen(url))

print soup.title 
```

这返回

```
<title>Beautiful Soup Documentation â€” Beautiful Soup 4.0.0 documentation</title> 
```

正如预期的那样，但是如果我将其更改为“打印soup.title.string”（应该返回上面的所有内容减去html标签）我得到

```
Traceback (most recent call last):
  File "C:\Users\MyName\Desktop\MyProgram\Python\test.py", line 7, in <module>
    print soup.title.string
  File "C:\Python27\lib\idlelib\rpc.py", line 595, in __call__
    value = self.sockio.remotecall(self.oid, self.name, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 210, in remotecall
    seq = self.asynccall(oid, methodname, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 225, in asynccall
    self.putmessage((seq, request))
  File "C:\Python27\lib\idlelib\rpc.py", line 324, in putmessage
    s = pickle.dumps(message)
  File "C:\Python27\lib\copy_reg.py", line 74, in _reduce_ex
    getstate = self.__getstate__
RuntimeError: maximum recursion depth exceeded 
```

我环顾四周，找不到其他人遇到此错误。有什么建议吗？

编辑：所以我在其他一些页面上尝试了相同的代码，效果更好。例如，google.com 就可以工作。这意味着它与页面的构建有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T07:27:16.330

也许问题是因为它包含 non_ASCII 字符。将您的打印语句修改为此

```
print soup.title.string.encode('ascii','ignore') 
```

# scala - Scala中如何通过分配规则实现表达式简化？

> ID：13964479
> 
> 赞同：1
> 
> 时间：2012-12-20T02:38:12.833
> 
> 标签：scala, pattern-matching

我想编写一个使用分布规则简化这个数学表达式的scala程序：

> a*b+a*c = a(b+c)

为了解决这个例子，我快速编写了以下代码：

```
object Test {

  sealed abstract class Expr

  case class Var(name: String) extends Expr

  case class BinOp(operator: String, left: Expr, right: Expr) extends Expr

  def main(args: Array[String]) {
    val expr = BinOp("+", BinOp("*", Var("a"), Var("b")), BinOp("*", Var("a"), Var("c")))
    println(simplify(expr)) //outputs "a(b + c)"
  }

  def simplify(expr: Expr) : String = expr match {
    case BinOp("+", BinOp("*", Var(x), Var(a)), BinOp("*", Var(y), Var(b))) if (x == y) => "" + x + "*(" + a + " + " + b + ")"
    case _ => "" //no matter for the test since I test the first case statically
  }

} 
```

有没有更好的方法来实现这一目标？

在不为每个组合重复案例的情况下管理操作数顺序的最佳方法是什么（会很难看......）？确实，这些表达式呢：

a*b+a*c = a(b+c)

a*b+c*a = a(b+c)

b*a+a*c = a(b+c)

b*a+c*a = a(b+c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:28:30.120

如果`Expr`保持交换律，它必须是

```
def simplify(expr: Expr) : String = expr match {
  case expr @ BinOp("+", BinOp("*", Var(x), Var(a)), BinOp("*", Var(y), Var(b))) => {
    def another(that: String) = {
      Seq((x, a), (a, x)) find (_._1 == that) map (_._2)
    }

    val byY = another(y).map(z => BinOp("+", Var(y), BinOp("*", Var(z), Var(b)))) // combine by y
    val byB = another(b).map(z => BinOp("+", Var(b), BinOp("*", Var(z), Var(y)))) // combine by b
    (byY orElse byB getOrElse expr).toString
  }
  case _ => "" //no matter for the test since I test the first case statically
} 
```

`byY`并`byB`具有相同的结构。这不是最好的，您可能会重用一些代码。:P

# javascript - 小书签的执行环境和浏览器控制台一样吗？

> ID：13964480
> 
> 赞同：1
> 
> 时间：2012-12-20T02:38:17.660
> 
> 标签：javascript, bookmarklet

由于缺乏编写书签的经验，我想知道这是在书签中执行JS代码，就像我们在浏览器控制台中运行JS代码一样（例如：firebug）。有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:58:48.337

是的，许多控制台确实有一些在全局范围（执行小书签的地方）中找不到的额外工具。示例可能是. `keys`_ 然而，我不确定这些是如何工作的。它们也可能更像是一种万客隆。有关更多信息，请参阅[Firebug 的](http://getfirebug.com/wiki/index.php/Command_Line_API)[*命令行 API*](http://getfirebug.com/wiki/index.php/Command_Line_API)[文档](http://getfirebug.com/wiki/index.php/Command_Line_API)，[Chrome Devtools Console](https://developers.google.com/chrome-developer-tools/docs/console?hl=en)也声称支持它，而[Opera 的 Dragonfly](http://www.opera.com/dragonfly/documentation/console/)至少支持它的一个子集。`Object.keys``$``querySelectorAll`[](http://getfirebug.com/wiki/index.php/Command_Line_API)

 *但是，这些很少见，您通常不会注意到它们，因此在控制台中编写您的书签代码应该可以正常工作而不会分心。*

# batch-file - 如何制作一个回显没有 /n 的符号的循环

> ID：13964483
> 
> 赞同：2
> 
> 时间：2012-12-20T02:38:48.900
> 
> 标签：batch-file

我正在尝试制作一个自动批处理文件游戏生成器，因为手动动画游戏太慢了。我在编程试图实现这一点时遇到了一个问题。我的问题是我无法弄清楚如何使用命令 echo 连续“堆叠”一个符号。这是我想要发生的一个例子：

1.  变量设置为#
2.  程序循环回来，现在设置为##
3.  程序循环直到达到指定数量（如符号#的一个变量中的51）

这是我在被卡住之前写的所有内容。（注意：我试图让我的程序为 2 行符号生成 2 个变量）

```
@echo off
setlocal enabledelayedexpansion
:GroundCreationLoop
set loopcontrol=51
set groundholder=# 
set groundholder2=# 
echo !groundholder! 
echo !groundholder2!
if !loopcontrol!==51 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:36:58.493

```
@echo off
setlocal enabledelayedexpansion
set char=#
for /l %%a in (1,1,51) do (
echo !char!
set char=!char!#
)
pause >nul 
```

输出

```
# 
## 
### 
#### 
##### 
###### 
####### 
######## 
######### 
########## 
########### 
############ 
############# 
############## 
############### 
################ 
################# 
################## 
################### 
#################### 
##################### 
###################### 
####################### 
######################## 
######################### 
########################## 
########################### 
############################ 
############################# 
############################## 
############################### 
################################ 
################################# 
################################## 
################################### 
#################################### 
##################################### 
###################################### 
####################################### 
######################################## 
######################################### 
########################################## 
########################################### 
############################################ 
############################################# 
############################################## 
############################################### 
################################################ 
################################################# 
################################################## 
################################################### 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:10:55.963

我使用 VB 脚本作为辅助函数完成了类似的操作。

`PromptHelper.vbs`使用以下内容创建：

```
If WScript.Arguments.Named.Exists("PROMPT") Then
  WScript.StdOut.Write WScript.Arguments.Named.Item("PROMPT")
End If 
```

然后，在您的批处理脚本中，将 替换为`ECHO`对`PromptHelper.vbs`.

例如：

```
@ECHO OFF

SETLOCAL ENABLEDELAYEDEXPANSION

SET loopcontrol=0

:GroundCreationLoop
  SET /A loopcontrol=!loopcontrol! + 1
  CSCRIPT C:\Scripts\PromptHelper.vbs /PROMPT:#
  IF NOT !loopcontrol! == 51 GOTO GroundCreationLoop

ECHO. 
```

`ECHO.`底部的 会将您带到下一行的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:46:54.717

如果我理解正确，这里有一个批处理脚本可以做到这一点：

```
@echo off
setlocal enabledelayedexpansion
set start=0
set end=51
set char=#
:loop
    if %start%==%end% goto stop
    set /a start=%start%+1
    echo %char%
    set char=#%char%
goto loop
:stop 
```

在这种情况下，char 会不断累积 #，这会为您提供一个由 # 组成的直角三角形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T02:47:37.827

我认为最后没有换行符的回显命令是`echo|set /P=(your thing)`，如果你想连续打印 51 个“#”符号，你必须使用`echo|set /P=!groundholder!`. 另外，您是否缺少一个`goto GroundCreationLoop`？

尝试这个：

```
@echo off
setlocal enabledelayedexpansion
set loopcontrol = 0
set groundholder = #

:GroundCreationLoop
    set /a loopcontrol = %loopcontrol% + 1
    echo|set /P = %groundholder%
    if not %loopcontrol% == 51 goto GroundCreationLoop 
```

# https - SocketIOException：客户端出现意外的握手错误

> ID：13964492
> 
> 赞同：4
> 
> 时间：2012-12-20T02:40:29.017
> 
> 标签：https, dart

**以下例外：**

```
SocketIOException: Unexpected handshake error in client (OS Error: errno = -12268)
#0      _SecureFilterImpl.handshake (dart:io-patch:849:8)
#1      _SecureSocket._secureHandshake (dart:io:7382:28)
#2      _SecureSocket._secureConnectHandler._secureConnectHandler (dart:io:7294:21)
#3      _Socket._updateOutHandler.firstWriteHandler (dart:io-patch:773:64)
#4      _SocketBase._multiplex (dart:io-patch:408:26)
#5      _SocketBase._sendToEventHandler.<anonymous closure> (dart:io-patch:509:20)
#6      _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

**以下代码的结果：**

```
String url = "https://www.google.com";
HttpClient client = new HttpClient();
HttpClientConnection conn = client.getUrl(new Uri(url));
conn.onResponse = (HttpClientResponse resp) {
  print ('content length ${resp.contentLength}');
  print ('status code ${resp.statusCode}');
  InputStream input = resp.inputStream;
  input.onData = () {
    print(codepointsToString(input.read()));
  };
  input.onClosed = () {
    print('closed!');
    client.shutdown();
  };
}; 
```

**请注意，如果我将 url 替换为“http”而不是“https”，它会按预期工作。**

[错误报告在这里。](http://code.google.com/p/dart/issues/detail?id=7541)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:37:36.840

**更新**：请参阅[William Hesse](https://stackoverflow.com/a/33283545/634863)的 Dart 版本 >= 1.12 的答案。

* * *

我有同样的错误`Dart SDK version 0.2.9.9_r16323`。在[问题 7541 中](http://code.google.com/p/dart/issues/detail?id=7541)：

> SecureSocket 库需要在使用安全网络之前显式初始化。我们正在努力让它在您第一次使用它时自动初始化，但尚未提交。要仅使用默认根证书（众所周知的证书颁发机构），请`SecureSocket.initialize()` 在进行任何联网之前调用您的 main() 例程。

因此，通过`SecureSocket.initialize()`在您的代码之前添加，它可以按预期工作。

在[r16384](http://code.google.com/p/dart/source/detail?r=16384)之后，此显式[初始化是可选的](http://code.google.com/p/dart/issues/detail?id=7541#c7)。

> `SecureSocket.initialize()`现在是可选的。如果你不调用它，它就像你在没有参数的情况下调用它一样。如果您明确调用它，则必须这样做一次，并且在创建任何安全连接之前。**如果您正在制作服务器套接字**，则需要显式调用它，因为它们需要证书数据库和密钥数据库的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T14:30:32.067

自编写此问题以来，安全网络库已更改。不再有 SecureSocket.initialize() 函数，并且许多其他方法和对象已更改名称。Dart 1.12 及更高版本的工作等效代码是：

```
import "dart:io";

main() async {
  Uri url = Uri.parse("https://www.google.com");`
  var client = new HttpClient();
  var request = await client.getUrl(url);
  var response = await request.close();
  var responseBytes = (await response.toList()).expand((x) => x);
  print(new String.fromCharCodes(responseBytes));
  client.close();
} 
```

# php - php使用html相同的内容但不起作用

> ID：13964495
> 
> 赞同：0
> 
> 时间：2012-12-20T02:40:44.800
> 
> 标签：php, html

我一开始想在 html 中使用 php，但是我发现方法是创建 .htaccess 文件并且不起作用，所以我使用 php 编写相同的 html 然后在 php 中执行任务。我想在 html 中使用 php 的原因是我想每 10 秒将数据存储在数据库中。但是我的 html 使用 css 来设计布局，当我在 php 中使用相同的代码时，.php 文件在 IE 浏览器中不能像 html 一样工作。但是，我使用firefox和crome浏览器，效果很好。我最近使用IE6，我不确定它是否与IE浏览器有关......我的html中的代码最初是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcom to My CAM</title>
<style>
#extend{
display: none; //預設為隱藏
}
#close{
display: block; //預設為顯示
}
#extend2{
display: none; //預設為隱藏
}
#close2{
display: block; //預設為顯示
}
#extend3{
display: none; //預設為隱藏
}
#close3{
display: block; //預設為顯示
}
body {
    background-color: #CC6633;
}
body,td,th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
}
</style>
<script type="text/javascript">
//第一個參數為欲顯示的區塊，第二個參數為欲隱藏的區塊
function exchange(show,hidden){
if(document.getElementById(show).style.display = 'none'){
document.getElementById(show).style.display = 'block';
document.getElementById(hidden).style.display = 'none';
}
}
function change1_1(){
    document.getElementById("img1_1").src="images/btn1_1c.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change1_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2c.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change1_3(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3c.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_1(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1c.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2c.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_3(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3c.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change3_1(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1c.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change3_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2c.png";
}
</script>
</head>

<body>
<form id="form1">
<div id="close">
<img src="images/btn1.png" onClick="exchange('extend','close')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend">
<img src="images/btn1.png" onClick="exchange('close','extend')">
<a href="index4.html" target="mainFrame"><img src="images/btn1_1.png" id="img1_1" align="right" Style="border:0px solid " onClick="change1_1()"/></a>
<a href="mac.php" target="mainFrame"><img src="images/btn1_2.png" id="img1_2" align="right" Style="border:0px solid " onClick="change1_2()" /></a>
<a href="ipcam.php" target="mainFrame"><img src="images/btn1_3.png" id="img1_3" align="right" Style="border:0px solid " onClick="change1_3()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
<div id="close2">
<img src="images/btn2.png" onClick="exchange('extend2','close2')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend2">
<img src="images/btn2.png" onClick="exchange('close2','extend2')">
<a href="account.php" target="mainFrame"><img src="images/btn2_1.png" id="img2_1" align="right" Style="border:0px solid " onClick="change2_1()" /></a>
<a href="actives.php" target="mainFrame"><img src="images/btn2_2.png" id="img2_2" align="right" Style="border:0px solid " onClick="change2_2()" /></a>
<a href="index4.html" target="mainFrame"><img src="images/btn2_3.png" id="img2_3" align="right" Style="border:0px solid " onClick="change2_3()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
<div id="close3">
<img src="images/btn3.png" onClick="exchange('extend3','close3')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend3">
<img src="images/btn3.png" onClick="exchange('close3','extend3')">
<a href="index4.html" target="mainFrame"><img src="images/btn3_1.png" id="img3_1" align="right" Style="border:0px solid " onClick="change3_1()" /></a>
<a href="index4.html" target="mainFrame"><img src="images/btn3_2.png" id="img3_2" align="right" Style="border:0px solid " onClick="change3_2()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
</form>
</body>
</html> 
```

只是为了使用css做可以隐藏/可见的菜单，它在IE中运行是成功的。并结合php，我的php代码是：

```
 <?php 
  //--------------------------------------------------------------------------
  // 1) Connect to mysql database
  //--------------------------------------------------------------------------
  include "./databases.php";
  //echo $_POST["selectmenu"]."test";
  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------

  $result = mysql_query('select * from user ;');        //;needed!
   if(!$result){
        echo 'Execute SQL failed : ' . mysql_error();
        exit;
   }
   ?>

<html>
<head>
<meta charset="utf-8" />
<title></title>
<style>
#extend{
display: none; //預設為隱藏
}
#close{
display: block; //預設為顯示
}
#extend2{
display: none; //預設為隱藏
}
#close2{
display: block; //預設為顯示
}
#extend3{
display: none; //預設為隱藏
}
#close3{
display: block; //預設為顯示
}
body {
    background-color: #CC6633;
}
body,td,th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
}
</style>
<script type="text/javascript">
//第一個參數為欲顯示的區塊，第二個參數為欲隱藏的區塊
function exchange(show,hidden){
if(document.getElementById(show).style.display = 'none'){
document.getElementById(show).style.display = 'block';
document.getElementById(hidden).style.display = 'none';
}
}
function change1_1(){
    document.getElementById("img1_1").src="images/btn1_1c.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change1_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2c.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change1_3(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3c.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_1(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1c.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2c.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change2_3(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3c.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change3_1(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1c.png";
    document.getElementById("img3_2").src="images/btn3_2.png";
}
function change3_2(){
    document.getElementById("img1_1").src="images/btn1_1.png";
    document.getElementById("img1_2").src="images/btn1_2.png";
    document.getElementById("img1_3").src="images/btn1_3.png";
    document.getElementById("img2_1").src="images/btn2_1.png";
    document.getElementById("img2_2").src="images/btn2_2.png";
    document.getElementById("img2_3").src="images/btn2_3.png";
    document.getElementById("img3_1").src="images/btn3_1.png";
    document.getElementById("img3_2").src="images/btn3_2c.png";
}
</script>
</head>

<body>  
<form id="form1">
<div id="close">
<img src="images/btn1.png" onClick="exchange('extend','close')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend">
<img src="images/btn1.png" onClick="exchange('close','extend')">
<a href="index4.html" target="mainFrame"><img src="images/btn1_1.png" id="img1_1" align="right" Style="border:0px solid " onClick="change1_1()"/></a>
<a href="mac.php" target="mainFrame"><img src="images/btn1_2.png" id="img1_2" align="right" Style="border:0px solid " onClick="change1_2()" /></a>
<a href="ipcam.php" target="mainFrame"><img src="images/btn1_3.png" id="img1_3" align="right" Style="border:0px solid " onClick="change1_3()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
<div id="close2">
<img src="images/btn2.png" onClick="exchange('extend2','close2')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend2">
<img src="images/btn2.png" onClick="exchange('close2','extend2')">
<a href="account.php" target="mainFrame"><img src="images/btn2_1.png" id="img2_1" align="right" Style="border:0px solid " onClick="change2_1()" /></a>
<a href="actives.php" target="mainFrame"><img src="images/btn2_2.png" id="img2_2" align="right" Style="border:0px solid " onClick="change2_2()" /></a>
<a href="index4.html" target="mainFrame"><img src="images/btn2_3.png" id="img2_3" align="right" Style="border:0px solid " onClick="change2_3()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
<div id="close3">
<img src="images/btn3.png" onClick="exchange('extend3','close3')">
<!-- 顯示 extend 同時隱藏 close -->
</div>
<div id="extend3">
<img src="images/btn3.png" onClick="exchange('close3','extend3')">
<a href="index4.html" target="mainFrame"><img src="images/btn3_1.png" id="img3_1" align="right" Style="border:0px solid " onClick="change3_1()" /></a>
<a href="index4.html" target="mainFrame"><img src="images/btn3_2.png" id="img3_2" align="right" Style="border:0px solid " onClick="change3_2()" /></a>
<!-- 顯示 close 同時隱藏 extend -->
</div>
</form>
<?
        header("Refresh:10");
            $handle=fopen("userfile.txt","w+");
            $content="";
            if($handle)
            {
                while( $rows = mysql_fetch_array($result)){

                    $userId = $rows[userId];
                    $userMail = $rows[userMail];

                    $content.=$userId.";".$userMail.";";    

                }

                $num=fwrite($handle, $content);
                fclose($handle);
                #echo $num;
            }
            else
            {
                echo "There is something wrong.";
            }
?>
</body>         
</html> 
```

它在开始时连接到数据库，并且在`<body>`某种程度上，它执行 php 代码来存储数据。

它可以很好地存储数据，但在 IE 中的 UI 无法正常工作。

它出什么问题了？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:46:38.220

你需要这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:50:25.237

CSS注释的形式...

```
/* this is a comment in CSS */ 
```

我怀疑这`//`至少是您关心 IE 的问题的一部分。

# objective-c - 选择 *.jpg 文件 Objective-C

> ID：13964501
> 
> 赞同：1
> 
> 时间：2012-12-20T02:41:40.553
> 
> 标签：objective-c, directory, nsfilemanager

我在 Objective-C 中寻找一种简单的方法来选择目录中的所有 .jpg 文件。现在我只能获取所有目录内容。有没有办法将通配符（如 *.jpg）应用于结果？

```
 if ( [[NSFileManager defaultManager] isReadableFileAtPath:@"/folder2/"] )
             [[NSFileManager defaultManager] copyItemAtPath:@"/folder2/" toPath:@"/folder1/" error:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:04:59.480

你可以使用类似的东西：

```
NSArray *list = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/folder2/" error:nil];
for (NSString* file in list) {
    if ([[file pathExtension] isEqualToString: @"jpg"]) {
         [[NSFileManager defaultManager] copyItemAtPath:file toPath:@"/folder1/" error:nil];
    }
} 
```

该`contentsOfDirectoryAtPath:error`方法返回一个数组，其中包含指定目录中文件的名称。对于每个条目，将`NSString` `pathExtension`方法的结果与目标字符串（“jpg”）进行比较。任何匹配的文件都将复制到目标目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:07:57.273

几乎直接来自[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/enumeratorAtPath%3a)：

```
NSDirectoryEnumerator *dirEnum = [localFileManager enumeratorAtPath:docsDir];
NSString *file;
while (file = [dirEnum nextObject]) {
    if ([[file pathExtension] isEqualToString: @"jpg"]) {
        // process the document
        [self doSomethingWithFile: [docsDir stringByAppendingPathComponent:file]];
    }
} 
```

看起来 NSDirectoryEnumerator 也支持快速枚举，所以你可以使用它：

```
NSDirectoryEnumerator *dirEnum = [localFileManager enumeratorAtPath:docsDir];
for (NSString *file in dirEnum) {
    if ([[file pathExtension] isEqualToString: @"doc"]) {
        // process the document
        [self doSomethingWithFile: [docsDir stringByAppendingPathComponent:file]];
    }
} 
```

使用目录枚举器和遍历返回的列表之间的区别在于`-contentsOfDirectoryAtPath:`，目录枚举器还将提供来自子目录的结果。

# java - openxava 在 Threadlocal 变量中保留会话范围的数据

> ID：13964503
> 
> 赞同：0
> 
> 时间：2012-12-20T02:41:46.967
> 
> 标签：java, openxava

我的 openxava 应用程序在很多地方需要一些会话范围的数据，即用户的当前时间/时区。Openxava 使用 ThreadLocal 变量来保存特定会话的当前登录用户信息（查看 OX 源 org.openxava.util.Users）。它开箱即用。我也遵循同样的方法，但我得到了确定性的结果。有时它会起作用，有时它会给出错误的结果。我不明白它的行为。我在哪里犯错。根据我对 ThreadLocal 变量的理解，这两种情况都不应该起作用。OX 如何保证 Thread 和 Session 之间的一对一映射。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:55:13.040

> OX如何保证Thread和Session之间的一对一映射

不存在这样的映射。当 ThreadLocal 变量附加到线程时，会话对象在整个用户会话中都是活动的。从模型层（实体）使用会话状态不是一个好主意，因为模型可以从其他视图、应用程序、Web 应用程序、批处理等中使用，因此您不能依赖会话状态。

因此，您的第一个选择应该是从控制器层（操作）获取会话数据并将其分配给实体。但是，如果您真的想将会话数据从控制器移动到模型（或应用程序的任何其他部分），您可以使用 ThreadLocal，但您在此变量中设置的值仅在该特定请求中有效，因此**您必须从会话移动到每个请求中的 ThreadLocal var**。

# c# - 将子实体作为一种类型？

> ID：13964504
> 
> 赞同：1
> 
> 时间：2012-12-20T02:41:54.407
> 
> 标签：c#

我正在尝试动态创建对象，然后稍后从它们中调用。例如...

```
for(int i=0;i<10;i++)
{
    tabControl.TabPages.Add(i, i.ToString());
    richTextBox rtb = new richTextBox();
    rtb.Parent = tabControl.TabPages[i];
    rtb.dock = fill;
} 
```

然后在我的编码中..

```
private void onButtonClick_example()
{
    var rtb = tabControl.SelectTab.GetChildrenByPoint(new point(1,1));
    rtb.WordWrap = true;
} 
```

如何再次将该孩子作为“富文本框”返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:55:31.210

如果 GetChildrenByPoint 返回 RichTextBox 以外的内容，则需要使用`as`并检查 null，以免遇到其他控件时崩溃。

```
foreach(var item in tabControl.SelectTab.GetChildrenByPoint(new point(1,1)))
{
  RichTextBox rtb= item as RichTextBox;
  if(rtb != null) //if we found a RichTextBox
  {
     rtb.WordWrap = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:48:41.130

1.  创建富文本框控件时，将动态 ID 添加到它。
2.  循环浏览所选选项卡中的控件：

    ```
     foreach(var control in tabControl.SelectTab.Controls)
    {
        if(control.ID == "NEWCONTROLID")
        {
          RichTextBox rtb = (RichTextBox) control;
        }
    } 
    ```

这样做是出于我的考虑，因此可能存在代码问题，但希望它能让您走上正轨。基本上，您需要在选定选项卡的控件集合中搜索您创建的控件，然后将其转换为 RichTextBox。

您还可以使用 Control.Find() 方法找到您的控件，然后进行转换。

# asp.net - 友好 URL 的 301 重定向

> ID：13964513
> 
> 赞同：2
> 
> 时间：2012-12-20T02:43:20.753
> 
> 标签：asp.net, asp.net-mvc

有没有办法将友好的 url 从 wordpress 站点重定向到 asp.net 站点。

例如[http://www.oldsite.com/blog/2012/11/stress-less-at-christmas-with-natural-health-products/](http://www.oldsite.com/blog/2012/11/stress-less-at-christmas-with-natural-health-products/)

到

[http://www.newsite.com/category/stress-less-at-christmas-with-natural-health-products.aspx](http://www.newsite.com/category/stress-less-at-christmas-with-natural-health-products.aspx)

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:18:22.427

是的，但如何做到这一点取决于您的 WordPress 网站所在的网络服务器类型。如果它使用 Apache（通常用于 Linux，但有时用于 Windows），您将需要[使用 mod_rewrite 通过 regex 重新映射 URL](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)。

如果 WordPress 在 IIS（Windows 服务器的典型情况）上运行，如果您可以控制服务器，则可以安装[URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)，或者您可以询问您的托管服务提供商是否包含它。安装后，您可以[使用 regex 对 URL 进行类似的重新映射](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)。

# android - Android：自定义水平进度条动画

> ID：13964520
> 
> 赞同：13
> 
> 时间：2012-12-20T02:44:04.207
> 
> 标签：android, animation, progress-bar

我正在尝试创建一个进度条，其中条本身在水平进行时以垂直旋转进行动画处理。我通过以下方式成功地将我的进度可绘制对象用作可绘制对象：

```
<ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:progressDrawable="@drawable/custom_progress"
        android:layout_marginRight="5dp" /> 
```

这是我的可绘制对象：

![在此处输入图像描述](../Images/7470b2f990f419a8bdadae873c6b4e4d.png)

但我希望它随着它的进展而产生微妙的滚动效果。所以看起来垂直线正在向后移动。你跟着？任何帮助深表感谢。谢谢。

编辑：我尝试创建一个动画列表作为我的进度可绘制，但我仍然无法看到动画。动画列表可以在进度项的剪辑内吗？

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background" android:drawable="@drawable/gutter"></item>

<item android:id="@android:id/progress">

<clip>
    <animation-list android:oneshot="false">
        <item android:drawable="@drawable/progress_bar_animate" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate2" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate3" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate4" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate5" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate6" android:duration="100" />
        <item android:drawable="@drawable/progress_bar_animate7" android:duration="100" />
    </animation-list>
</clip>

</item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T13:24:18.577

雅虎！最后 ！工作！（但是 !!!! 可能会导致大图像的内存泄漏。它已在下面的帖子中修复）

此代码获取平铺图片（tile1），重复它（TileMode.REPEAT），制作移位动画（10 个片段），将其添加到动画集​​中。

![在此处输入图像描述](../Images/8e596fb08c1b7e0bfd6a89f6ce5db6f9.png)

```
private void initAnimation() {
//      R.drawable.tile1 is PNG
        Bitmap b = BitmapFactory.decodeResource(getResources(),R.drawable.tile1);
        AnimationDrawable shiftedAnimation = getAnimation(b);

//      R.id.img_3 is ImageView in my application
        View v = findViewById(R.id.img_3);
        v.setBackground(shiftedAnimation);
        shiftedAnimation.start();
}

private Bitmap getShiftedBitmap(Bitmap bitmap, int shiftX) {
    Bitmap newBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), bitmap.getConfig());
    Canvas newBitmapCanvas = new Canvas(newBitmap);

    Rect srcRect1 = new Rect(shiftX, 0, bitmap.getWidth(), bitmap.getHeight());
    Rect destRect1 = new Rect(srcRect1);
    destRect1.offset(-shiftX, 0);
    newBitmapCanvas.drawBitmap(bitmap, srcRect1, destRect1, null);

    Rect srcRect2 = new Rect(0, 0, shiftX, bitmap.getHeight());
    Rect destRect2 = new Rect(srcRect2);
    destRect2.offset(bitmap.getWidth() - shiftX, 0);
    newBitmapCanvas.drawBitmap(bitmap, srcRect2, destRect2, null);

    return newBitmap;
}

private List<Bitmap> getShiftedBitmaps(Bitmap bitmap) {
    List<Bitmap> shiftedBitmaps = new ArrayList<Bitmap>();
    int fragments = 10;
    int shiftLength = bitmap.getWidth() / fragments;

    for(int i = 0 ; i < fragments; ++i){
        shiftedBitmaps.add( getShiftedBitmap(bitmap,shiftLength * i));
    }

    return shiftedBitmaps;
}

private AnimationDrawable getAnimation(Bitmap bitmap) {
    AnimationDrawable animation = new AnimationDrawable();
    animation.setOneShot(false);

    List<Bitmap> shiftedBitmaps = getShiftedBitmaps(bitmap);
    int duration = 50;

    for(Bitmap image: shiftedBitmaps){
        BitmapDrawable navigationBackground = new BitmapDrawable(getResources(), image);
        navigationBackground.setTileModeX(TileMode.REPEAT);

        animation.addFrame(navigationBackground, duration);
    }
    return animation;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T00:16:25.843

我不认为这可以像我想象的那样完成。原因是我无法引用动画列表，当时它是一个 ClipDrawable，并将其转换为一个必要的 AnimateDrawable，这样我就可以以编程方式启动动画。还必须将它包含在剪辑元素中，因为这是 ProgressBar 屏蔽图像的方式，因此它只显示图像的一部分作为其进度。

除了使用 ImageViews 伪造我自己的进度条和动画那些我看不到这个特定 ProgressBar 的另一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:03:47.533

我找到了解决方案。创建一个xml，例如progress_loading.xml，如下所示，并将其分配给progressbar的进度drawable：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:id="@android:id/progress">
    <clip>
      <shape>
        <solid android:color="#33FFFFFF" />
      </shape>
    </clip>
  </item>
</layer-list> 
```

然后在代码中：

```
AnimationDrawable anim = (AnimationDrawable) getResources()
                .getDrawable(R.drawable.loading);
        ClipDrawable clipDrawable = new ClipDrawable(anim, Gravity.LEFT,
                ClipDrawable.HORIZONTAL);
        LayerDrawable layerDrawable = (LayerDrawable) progressBar
                .getProgressDrawable();
        layerDrawable.setDrawableByLayerId(android.R.id.progress,
                clipDrawable);
        anim.start(); 
```

xml loading.xml 有实际的动画列表。这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-22T13:19:26.557

我以前的方法存在内存消耗问题。我已经改进它以使用 TranslateAnimation。但它几乎没有滞后（注意 ProgressBgView.initAnimation 方法中的 HACK 注释）

布局 xml：

```
 <com.example.tweenanimation.ProgressBgView
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:id="@+id/progress_db_view"
        /> 
```

后端：

```
 final ProgressBgView prog = (ProgressBgView) findViewById(R.id.progress_db_view);
        prog.setBackgroundAsTile(R.drawable.bg_tile_1);
        prog.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                prog.startAnimation();
            }
        }); 
```

和班级：

```
public class ProgressBgView extends FrameLayout {
    private ImageView mProgressImage;
    private TranslateAnimation mProgressAnimation;

    public ProgressBgView(Context context, AttributeSet attrs) {
        super(context, attrs);

        mProgressImage = new ImageView(getContext());
        FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT);
        mProgressImage.setLayoutParams(layoutParams);
        addView(mProgressImage);
    }

    public void setBackgroundAsTile(int tileImageResId) {
        Bitmap tileBitmap = BitmapFactory.decodeResource(getResources(), tileImageResId);
        BitmapDrawable tileRepeatedBitmap = new BitmapDrawable(getResources(), tileBitmap);
        tileRepeatedBitmap.setTileModeX(TileMode.REPEAT);

        initAnimation(tileBitmap.getWidth());

        mProgressImage.setBackgroundDrawable(tileRepeatedBitmap);
    }

    private void initAnimation(int tileImageWidth) {
        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) mProgressImage.getLayoutParams();
        layoutParams.setMargins(-tileImageWidth, 0, 0, 0);

        // *HACK* tileImageWidth-3 is used because of *lags*(slow pause) in the moment
        // of animation END-RESTART.
        mProgressAnimation = new TranslateAnimation(0, tileImageWidth - 3, 0, 0);
        mProgressAnimation.setInterpolator(new LinearInterpolator());
        mProgressAnimation.setDuration(1000);
        mProgressAnimation.setRepeatCount(Animation.INFINITE);
    }

    public void startAnimation() {
        mProgressImage.startAnimation(mProgressAnimation);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-22T17:22:36.390

这是我得到的。 ![自定义水平进度条](../Images/cba8765fe46f8b36ca103b46b04025cd.png)

这是这样的：

```
<ProgressBar
    android:layout_width="match_parent"
    android:layout_height="15dp"
    android:indeterminate="true"
    style="@style/IndeterminateProgressBar" /> 
```

之后在styles.xml中：

```
<style name="IndeterminateProgressBar" parent="@android:style/Widget.ProgressBar.Horizontal">
    <item name="android:indeterminateDrawable">@anim/progress_bar_indeterminate</item>
</style> 
```

在文件 res/anim/progress_bar_indeterminate.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false">
    <item android:drawable="@drawable/progress_bar_horizontal_1" android:duration="200" />
    <item android:drawable="@drawable/progress_bar_horizontal_2" android:duration="200" />
    <item android:drawable="@drawable/progress_bar_horizontal_3" android:duration="200" />
    <item android:drawable="@drawable/progress_bar_horizontal_4" android:duration="200" />
</animation-list> 
```

这里有 4 张图片需要放入文件夹 res/drawable：

![progress_bar_horizo​​ntal_1](../Images/137993e83f164970cb8d574c9696940d.png)

![progress_bar_horizo​​ntal_2](../Images/44b48d8e7eb118004986477359f873b4.png)

![progress_bar_horizo​​ntal_3](../Images/b8f0b17d38e68119428516252282a48d.png)

![progress_bar_horizo​​ntal_4](../Images/611b9039b22cbe27f6e42b8b60a9c904.png)

PS如果你需要进度条的反向，只需翻转progress_bar_indeterminate.xml中图像名称中的数字即可。

再会！=)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-02T07:49:41.743

对于那些想要确定进度条的人，我将我的改进发布到 user1269737 的答案中。

我已经像这样更改了 intAnimation 方法：

```
private void initAnimation(int tileImageResId) {
    Bitmap b = BitmapFactory.decodeResource(getResources(), tileImageResId);
    if (b != null) {
        shiftedAnimation = getAnimation(b);

        setBackgroundColor(ContextCompat.getColor(getContext(), #14000000));
        mProgressImage.setBackground(shiftedAnimation);
    }
} 
```

并添加了带有动画进度变化的 setProgress 方法：

```
 public void setProgress(double progress){
    if (progress > 100){
        progress = 100;
    }
    else if (progress < 0){
        progress = 0;
    }
    int parentWidth = getWidth();
    final int newWidth =  (int)(parentWidth*(progress/100.0));

    widthAnimator = ValueAnimator.ofInt(mProgressImage.getLayoutParams().width, newWidth);
    widthAnimator.setDuration(200);
    widthAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            mProgressImage.getLayoutParams().width = (Integer) animation.getAnimatedValue();
            mProgressImage.requestLayout();
        }
    });
    widthAnimator.start();
} 
```

以及构造函数的一些变化：

```
public LProgressBar(Context context, AttributeSet attrs) {
    super(context, attrs);

    mProgressImage = new ImageView(getContext());
    FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(0, FrameLayout.LayoutParams.MATCH_PARENT);
    mProgressImage.setLayoutParams(layoutParams);
    addView(mProgressImage);

    initAnimation(R.drawable.pb_background);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-09T14:50:22.120

我找到了一种解决方案，类似于上面的解释，但不是源于它。效果很好！

下面说的是我们的progress_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <solid
                android:color="@color/black_20"/>
        </shape>
    </item>

    <item android:id="@android:id/progress">
        <clip>
            <animation-list
                android:oneshot="false">
                <item
                    android:drawable="@drawable/stripe3"
                    android:duration="100"/>
                <item
                    android:drawable="@drawable/stripe2"
                    android:duration="100"/>
                <item
                    android:drawable="@drawable/stripe1"
                    android:duration="100"/>
            </animation-list>
        </clip>
    </item>
</layer-list> 
```

然后在 Java 代码中，执行以下操作：

```
mDownloadProgressBar.setProgressDrawable(getResources().getDrawable(R.drawable.download_progress, null));
LayerDrawable drawable = (LayerDrawable)mDownloadProgressBar.getProgressDrawable();
ClipDrawable clipDrawable = (ClipDrawable) drawable.getDrawable(1);
AnimationDrawable animationDrawable =(AnimationDrawable)clipDrawable.getDrawable();
animationDrawable.start(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-10T11:14:32.170

下载进度动画.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:drawable="@drawable/stripe3"
        android:duration="100"/>
    <item
        android:drawable="@drawable/stripe2"
        android:duration="100"/>
    <item
        android:drawable="@drawable/stripe1"
        android:duration="100"/>
</animation-list> 
```

Java代码：

```
mDownloadProgressBar.setProgressDrawable(createProgressDrawable(context));

private Drawable createProgressDrawable(Context context) {

    ShapeDrawable shape = new ShapeDrawable();
    shape.getPaint().setStyle(Paint.Style.FILL);
    shape.getPaint()
            .setColor(ContextCompat.getColor(context, R.color.black_20));

    AnimationDrawable animationDrawable = (AnimationDrawable) getDrawable(R.drawable.download_progress_anim, context);
    ClipDrawable clipDrawable = new ClipDrawable(animationDrawable, Gravity.LEFT, ClipDrawable.HORIZONTAL);
    animationDrawable.start();

    LayerDrawable layerDrawable = new LayerDrawable(new Drawable[]{shape, clipDrawable});
    layerDrawable.setId(0, android.R.id.background);
    layerDrawable.setId(1, android.R.id.progress);
    return layerDrawable;
}

private Drawable getDrawable(@DrawableRes int drawable, Context context) {
        if (Build.VERSION.SDK_INT < 21) {
            return context.getResources().getDrawable(drawable);
        } else {
            return context.getResources().getDrawable(drawable, null);
        }
    } 
```

希望能帮助到你。您可以轻松地对其进行修改以支持您自己的实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-23T21:45:28.700

**如果并且仅**当您想要**自定义彩色高度**进度条时：

我相信谷歌（**LinearProgressIndicator**）有一个观点可以做到这一点。您可以自定义颜色和高度。我在这篇文章中解释了它：

[https://stackoverflow.com/a/68505259/2719243](https://stackoverflow.com/a/68505259/2719243)

# php - MySQL 参数化查询 - 缓存持续时间

> ID：13964530
> 
> 赞同：3
> 
> 时间：2012-12-20T02:45:43.890
> 
> 标签：php, caching, mysqli, parameterized-query

> **可能重复：**
> [准备好的语句是否使用 PHP 跨多个页面加载在服务器端缓存？](https://stackoverflow.com/questions/2039416/are-prepared-statements-cached-server-side-across-multiple-page-loads-with-php)

我正在开发一个新项目并第一次使用参数化查询（PHP 和 MySQL DB）。我读到他们参数化的查询被缓存了，但我想知道它们被缓存了多长时间。例如，假设我有一个函数“getAllUsers()”，它从用户表中获取所有活动用户 ID 的列表，并且对于每个 ID，创建一个用户对象并且对函数“getUser($user)”的调用是用于设置对象的其他属性。'getUser()' 函数有它自己准备好的查询，函数末尾有一个 stmt->close()。

如果我这样做，我在“getUser()”中的参数化查询是否完全利用了缓存，或者在每个 stmt->close() 之后查询是否从缓存中销毁？

注意：如果页面只需要单个用户对象的数据，我也会使用 getUser() 函数，所以我想这样做以确保如果用户表发生更改，我只需要更新一个查询。

这是做这样的事情的正确方法还是有更好的方法？

**更新**：有趣，刚刚在 php.net 的准备语句手册上看到了这个（[http://php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)）

> 使用准备好的语句并不总是执行语句的最有效方式。只执行一次的准备好的语句比未准备的语句会导致更多的客户端-服务器往返。

所以我想参数化查询的主要好处是防止 SQL 注入，而不一定要加快速度，除非它是一次重复的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:40:00.253

调用`mysqli_stmt::close`将：

> 关闭准备好的语句。mysqli_stmt_close() 也释放语句句柄。

因此无法使用该语句的缓存版本进行进一步执行。我不介意释放资源或关闭语句，因为 PHP 无论如何都会在脚本结束时为您完成。

此外，如果您正在使用循环（如您所述），请查看[mysqli_stmt::reset](http://php.net/manual/en/mysqli-stmt.reset.php)它将准备好的语句重置为其原始状态（在准备调用之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:30:28.260

从某种角度来看，这是个好问题。

首先，关于“缓存”。
准备好的查询有一些特别之处——您可以将其发送到服务器**一次**，然后多次执行。它可以为使用已经解析和准备好的查询提供一些小的理论上的好处。
看起来，您每次都准备查询时并没有使用这种机制。因此，根本没有缓存。

接下来，关于过早优化。
你*听说过*一些缓存，它占据了你的想象力。
虽然您没有真正需要或理由担心缓存或任何性能问题。

因此，有一条规则：在性能问题成为现实之前，不要让自己陷入困境。
否则你会浪费你的时间。

# tomcat - Grails 不会在 tomcat 中加载 - JDBC 问题

> ID：13964531
> 
> 赞同：2
> 
> 时间：2012-12-20T02:45:47.783
> 
> 标签：tomcat, grails, jdbc

在尝试加载 tomcat（战争部署）时在 grails 中获取以下内容 - 这是在从 grails 1.3.7 升级到 grails 2.1.2 之后发生的

```
SEVERE: Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.AbstractMethodError: com.inet.tds.ag.getJDBCMajorVersion()I
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
  at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
  at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:712)
  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:454)
  at org.codehaus.groovy.grails.commons.spring.DefaultRuntimeSpringConfiguration.getApplicationContext(DefaultRuntimeSpringConfiguration.java:153)
  at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:170)
  at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:127)
  at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121)
  at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:104)
  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
  at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
  at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
  at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
  at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
  at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
  at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
  at java.lang.Thread.run(Thread.java:680)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.AbstractMethodError: com.inet.tds.ag.getJDBCMajorVersion()I
  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
  at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
  at org.codehaus.groovy.grails.orm.support.TransactionManagerPostProcessor.initialize(TransactionManagerPostProcessor.java:74)
  at org.codehaus.groovy.grails.orm.support.TransactionManagerPostProcessor.setBeanFactory(TransactionManagerPostProcessor.java:52)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
  ... 28 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.AbstractMethodError: com.inet.tds.ag.getJDBCMajorVersion()I
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
  at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
  ... 43 more
Caused by: java.lang.AbstractMethodError: com.inet.tds.ag.getJDBCMajorVersion()I
  at org.apache.commons.dbcp.DelegatingDatabaseMetaData.getJDBCMajorVersion(DelegatingDatabaseMetaData.java:338)
  at org.hibernate.engine.jdbc.JdbcSupportLoader.useContextualLobCreation(JdbcSupportLoader.java:78)
  at org.hibernate.engine.jdbc.JdbcSupportLoader.loadJdbcSupport(JdbcSupportLoader.java:52)
  at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:118)
  at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2863)
  at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859)
  at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870)
  at org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsAnnotationConfiguration.buildSessionFactory(GrailsAnnotationConfiguration.java:133)
  at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
  at org.codehaus.groovy.grails.orm.hibernate.ConfigurableLocalSessionFactoryBean.newSessionFactory(ConfigurableLocalSessionFactoryBean.java:155)
  at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
  at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)
  at org.codehaus.groovy.grails.orm.hibernate.ConfigurableLocalSessionFactoryBean.afterPropertiesSet(ConfigurableLocalSessionFactoryBean.java:146)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
  ... 51 more 
```

在tomcat爆发战争后，我在我的WEB-INF/lib目录中找到了这个jar，所以我不认为这是一个依赖问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:11:09.703

我认为原因是您的 JDBC 版本。您使用哪个数据库以及数据库和 JDBC 的哪个版本？

# javascript - 使用变量乘以 Math.random()

> ID：13964532
> 
> 赞同：4
> 
> 时间：2012-12-20T02:46:10.860
> 
> 标签：javascript, random

我需要将 Math.random() 方法与变量相乘。例子：

```
a = 2;
b = Math.floor(Math.random()*a);
alert(b); 
```

然而，这并没有做任何事情。有没有我需要写它的特定方式？如果不是，那么如果我放了 alert(b)，为什么 javascript 会发出警报；或类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:50:27.227

`Math.random()`返回一个介于 0 和 1 之间的数字，并且您正在使用`floor`它，因此将它乘以 1 不会得到任何东西，但当您使用`floor()`它时会得到 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:48:57.057

嗯...乘以 1 是无操作的。试试看`a=10`你是否能得到更好的结果。

# assembly - 在8086cpu中，实模式汇编语言在中断请求时堆栈如何初始化

> ID：13964536
> 
> 赞同：0
> 
> 时间：2012-12-20T02:46:42.747
> 
> 标签：assembly

在 8086 CPU 实模式下，汇编语言：IRQ 如何初始化堆栈？

当 DOS 初始化时，它会加载中断向量表。当一个中断信号发生时，它会保存标志寄存器。我想知道，当它保存数据时，堆栈是如何初始化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:26:21.927

8086 只有一种模式（没有用户/管理员分离）。因此，除非中断例程设置自己的堆栈，否则它将使用中断发生时正在运行的应用程序的堆栈。

只要您只使用“少量”堆栈空间，就可以了。

# php - Google 日历 API 库 (PHP) - 文档在哪里？

> ID：13964543
> 
> 赞同：15
> 
> 时间：2012-12-20T02:48:06.227
> 
> 标签：php, google-api, google-calendar-api, google-api-php-client

我一直在从 PHP Google 客户端库中寻找有关 Google 日历 API 函数、方法等的文档，但终生无法找到该死的东西。有谁知道这住在哪里？我参加了小组，但对于同一件事有一个 2 个月大的问题：

[https://groups.google.com/forum/?fromgroups=#!topic/google-api-php-client/pP-E1noaqsI](https://groups.google.com/forum/?fromgroups=#!topic/google-api-php-client/pP-E1noaqsI)

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:23:04.067

概述：

[https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

PHP 示例下载：

[http://code.google.com/p/google-api-php-client/wiki/Samples#Calendar_API](http://code.google.com/p/google-api-php-client/wiki/Samples#Calendar_API)

方法：

[https://developers.google.com/google-apps/calendar/v3/reference/calendars](https://developers.google.com/google-apps/calendar/v3/reference/calendars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:52:18.553

您需要查看 REST API 的参考指南： [https ://developers.google.com/google-apps/calendar/v3/reference/](https://developers.google.com/google-apps/calendar/v3/reference/)

每个 API 方法都有一个 PHP 代码示例。例如，如果您想更新`CalendarList`您可以访问： [https ://developers.google.com/google-apps/calendar/v3/reference/calendarList/update](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/update)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:31:04.153

你是说[Zend GData 框架](http://framework.zend.com/manual/1.12/en/zend.gdata.calendar.html)吗？

# java - Netbeans 7.2.1 可视化网页编辑器

> ID：13964545
> 
> 赞同：5
> 
> 时间：2012-12-20T02:48:15.347
> 
> 标签：java, jsf, plugins, netbeans, visual-editor

是否有某种用于 Netbeans 7.2.1 和 JSF 开发的可视化 Web 编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:27:41.623

我想不是。看看这里找到什么`Netbeans`推荐：
[http ://wiki.netbeans.org/VisualWebSupport](http://wiki.netbeans.org/VisualWebSupport)

> ## 在哪里可以找到带有可视化编辑器支持网页设计的可视化 Web 包？
> 
> 从 NetBeans 6.8 开始，Visual Web 模块不再可用。没有进一步的开发计划。想要使用 Visual Web 包的用户可以使用 NetBeans 6.7.1 或更早的版本，并从 Beta 更新中心获取 Visual Web 模块。
> 
> **NetBeans IDE 的可视化 Web 文档**现已存档，可以作为 NetBeans IDE 6.5 文档存档的一部分下载。存档的 zip 文件可以从[http://netbeans.org/kb/archive/index.html#NetBeans_6.5_Docs_Archives下载](http://netbeans.org/kb/archive/index.html#NetBeans_6.5_Docs_Archives)
> 
> ## 还有哪些其他选项可用于开发基于 JSF 的 Web 应用程序？
> 
> 想要使用仍然维护的所见即所得、可视 Web 类型环境的开发人员有以下选择：
> 
> ### 来自 Oracle 的 JDeveloper ADF Faces
> 
> 这是一个免费开发的产品，它提供了一个功能齐全的可视化 JSF 开发环境。Oracle ADF Faces 提供了 150 多个支持 AJAX 的 JSF 组件，包括图形、仪表、地图和由已停止的 Woodstock 项目提供的全套核心组件。有关详细信息，请参阅[http://www.oracle.com/technology/products/jdev/htdocs/netbeans/jsf.html](http://www.oracle.com/technology/products/jdev/htdocs/netbeans/jsf.html)。
> 
> ### NetBeans 的 IcesFaces
> 
> IceFaces 提供了与 Woodstock 类似的 JSF 组件集，包括对 JSF 2.0 的支持。IceFaces 使用户能够继续使用 NetBeans IDE，但无需可视化开发环境。有关更多信息，请参见[http://www.icefaces.org/JForum/posts/list/16995.page](http://www.icefaces.org/JForum/posts/list/16995.page)。
> 
> ### Apache MyFaces 特立尼达
> 
> Apache MyFaces Trinidad 是一个 JSF 框架，它有一个大型的企业级组件库，包括对 JSF 2.0 的支持。Oracle 的 ADF Faces 建立在此框架之上。有关详细信息，请参阅[http://myfaces.apache.org/trinidad/index.html](http://myfaces.apache.org/trinidad/index.html)。

# visual-c++ - openCL 和 VC++ 2010“前端编译器构建失败”

> ID：13964546
> 
> 赞同：1
> 
> 时间：2012-12-20T02:48:19.657
> 
> 标签：visual-c++, opencl

我刚刚开始学习 openCL 并使用 VC++ 2010 进行编码。我已按照此说明为 Visual Studio 设置 openCL。一切都很好，只是 CUDA 5 的路径略有不同，所以我忽略了“~\NVIDIA Corporation\NVIDIA GPU Computing SDK\shared\inc”。

[http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%200&referringTitle=OpenCL%20Tutorials](http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%200&referringTitle=OpenCL%20Tutorials)

然后我只用 CL/cl.h 编译了一些非常基本的示例，它们运行良好。但是，当我开始包含 stdio.h 时，我一直收到错误“致命错误：'stdio.h' 文件未找到”

这是一个示例（此代码来自 openCl in Action）

```
#define _CRT_SECURE_NO_WARNINGS
#define PROGRAM_FILE "matvec.cl"
#define KERNEL_FUNC "matvec_mult"

#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>

#ifdef MAC
#include <OpenCL/cl.h>
#else  
#include <CL/cl.h>
#endif

int main() {

   /* Host/device data structures */
   cl_platform_id platform;
   cl_device_id device;
   cl_context context;
   cl_command_queue queue;
   cl_int i, err;

   /* Program/kernel data structures */
   cl_program program;
   FILE *program_handle;
   char *program_buffer, *program_log;
   size_t program_size, log_size;
   cl_kernel kernel;

   /* Data and buffers */
   float mat[16], vec[4], result[4];
   float correct[4] = {0.0f, 0.0f, 0.0f, 0.0f};
   cl_mem mat_buff, vec_buff, res_buff;
   size_t work_units_per_kernel;

   /* Initialize data to be processed by the kernel */
   for(i=0; i<16; i++) {
      mat[i] = i * 2.0f;
   } 
   for(i=0; i<4; i++) {
      vec[i] = i * 3.0f;
      correct[0] += mat[i]    * vec[i];
      correct[1] += mat[i+4]  * vec[i];
      correct[2] += mat[i+8]  * vec[i];
      correct[3] += mat[i+12] * vec[i];      
   }

   /* Identify a platform */
   err = clGetPlatformIDs(1, &platform, NULL);
   if(err < 0) {
      perror("Couldn't find any platforms");
      exit(1);
   }

   /* Access a device */
   err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, 
         &device, NULL);
   if(err < 0) {
      perror("Couldn't find any devices");
      exit(1);
   }

   /* Create the context */
   context = clCreateContext(NULL, 1, &device, NULL, 
         NULL, &err);
   if(err < 0) {
      perror("Couldn't create a context");
      exit(1);   
   }

   /* Read program file and place content into buffer */
   program_handle = fopen(PROGRAM_FILE, "r");
   if(program_handle == NULL) {
      perror("Couldn't find the program file");
      exit(1);   
   }
   fseek(program_handle, 0, SEEK_END);
   program_size = ftell(program_handle);
   rewind(program_handle);
   program_buffer = (char*)malloc(program_size + 1);
   program_buffer[program_size] = '\0';
   fread(program_buffer, sizeof(char), program_size, program_handle);
   fclose(program_handle);

   /* Create program from file */
   program = clCreateProgramWithSource(context, 1, 
      (const char**)&program_buffer, &program_size, &err);
   if(err < 0) {
      perror("Couldn't create the program");
      exit(1);   
   }
   free(program_buffer);

   /* Build program */
   **err = clBuildProgram(program, 0, NULL, NULL, NULL, NULL);**
   if(err < 0) {

      /* Find size of log and print to std output */
      clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, 
            0, NULL, &log_size);
      program_log = (char*) malloc(log_size + 1);
      program_log[log_size] = '\0';
      clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, 
            log_size + 1, program_log, NULL);
      printf("%s\n", program_log);
      free(program_log);
      exit(1);
   }

   /* Create kernel for the mat_vec_mult function */
   kernel = clCreateKernel(program, KERNEL_FUNC, &err);
   if(err < 0) {
      perror("Couldn't create the kernel");
      exit(1);   
   }

   /* Create CL buffers to hold input and output data */
   mat_buff = clCreateBuffer(context, CL_MEM_READ_ONLY | 
      CL_MEM_COPY_HOST_PTR, sizeof(float)*16, mat, &err);
   if(err < 0) {
      perror("Couldn't create a buffer object");
      exit(1);   
   }      
   vec_buff = clCreateBuffer(context, CL_MEM_READ_ONLY | 
      CL_MEM_COPY_HOST_PTR, sizeof(float)*4, vec, NULL);
   res_buff = clCreateBuffer(context, CL_MEM_WRITE_ONLY, 
      sizeof(float)*4, NULL, NULL);

   /* Create kernel arguments from the CL buffers */
   err = clSetKernelArg(kernel, 0, sizeof(cl_mem), &mat_buff);
   if(err < 0) {
      perror("Couldn't set the kernel argument");
      exit(1);   
   }         
   clSetKernelArg(kernel, 1, sizeof(cl_mem), &vec_buff);
   clSetKernelArg(kernel, 2, sizeof(cl_mem), &res_buff);

   /* Create a CL command queue for the device*/
   queue = clCreateCommandQueue(context, device, 0, &err);
   if(err < 0) {
      perror("Couldn't create the command queue");
      exit(1);   
   }

   /* Enqueue the command queue to the device */
   work_units_per_kernel = 4; /* 4 work-units per kernel */ 
   err = clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &work_units_per_kernel, 
      NULL, 0, NULL, NULL);
   if(err < 0) {
      perror("Couldn't enqueue the kernel execution command");
      exit(1);   
   }

   /* Read the result */
   err = clEnqueueReadBuffer(queue, res_buff, CL_TRUE, 0, sizeof(float)*4, 
      result, 0, NULL, NULL);
   if(err < 0) {
      perror("Couldn't enqueue the read buffer command");
      exit(1);   
   }

   /* Test the result */
   if((result[0] == correct[0]) && (result[1] == correct[1])
      && (result[2] == correct[2]) && (result[3] == correct[3])) {
      printf("Matrix-vector multiplication successful.\n");
   }
   else {
      printf("Matrix-vector multiplication unsuccessful.\n");
   }

   /* Deallocate resources */
   clReleaseMemObject(mat_buff);
   clReleaseMemObject(vec_buff);
   clReleaseMemObject(res_buff);
   clReleaseKernel(kernel);
   clReleaseCommandQueue(queue);
   clReleaseProgram(program);
   clReleaseContext(context);

   getchar();
   return 0;
} 
```

clBuildProgram 给出了找不到 stdio.h 的错误。

此外，以下是警告：

```
'cl2.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\OpenCL.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Symbols loaded.
'cl2.exe': Loaded 'C:\Windows\SysWOW64\IntelOpenCL32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86\intelocl.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4974_none_50940634bcb759cb\msvcp90.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4974_none_50940634bcb759cb\msvcr90.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\opengl32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\glu32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\ddraw.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\dciman32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\ProgramData\Browser Manager\2.5.976.107\{c16c1ccb-7046-4e5c-a2f3-533ad2fec8e8}\mngr.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\imagehlp.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\psapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\nvinit.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\profapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\detoured.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\Nvd3d9wrap.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\nvdxgiwrap.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86\clang_compiler.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86\task_executor.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86\tbb.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\dbghelp.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86\cpu_device.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\igdrcl32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\nvcuda.dll', Binary was not built with debug information.
'cl2.exe': Unloaded 'C:\Windows\SysWOW64\nvcuda.dll'
'cl2.exe': Loaded 'C:\Windows\SysWOW64\nvopencl.dll', Binary was not built with debug information.
'cl2.exe': Loaded 'C:\Windows\SysWOW64\ws2_32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\nsi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\nvapi.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\wintrust.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\crypt32.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\msasn1.dll', Cannot find or open the PDB file
'cl2.exe': Loaded 'C:\Windows\SysWOW64\igdfcl32.dll', Cannot find or open the PDB file
'cl2.exe': Unloaded 'C:\Windows\SysWOW64\igdfcl32.dll'
The program '[6324] cl2.exe: Native' has exited with code 1 (0x1). 
```

请告诉我如何解决这个问题。

此致

# php - PHP在完全下载后停止读取远程文件

> ID：13964547
> 
> 赞同：6
> 
> 时间：2012-12-20T02:48:32.577
> 
> 标签：php

我收到一个 30 秒的超时错误，因为代码在文件低于时会不断检查文件是否超过 5mb。该代码旨在拒绝超过 5mb 的文件，但我还需要它在文件低于 5mb 时停止执行。有没有办法检查文件传输块以查看它是否为空？我目前正在使用 DaveRandom 的这个例子：

[如果超过 5mb，PHP 停止远程文件下载](https://stackoverflow.com/questions/13963158/php-stop-remote-file-download-if-it-exceeds-5mb)

[DaveRandom](https://stackoverflow.com/users/889949/daverandom)的代码：

```
$url = 'http://www.spacetelescope.org/static/archives/images/large/heic0601a.jpg';
$file = '../temp/test.jpg';
$limit = 5 * 1024 * 1024; // 5MB

if (!$rfp = fopen($url, 'r')) {
  // error, could not open remote file
}
if (!$lfp = fopen($file, 'w')) {
  // error, could not open local file
}

// Check the content-length for exceeding the limit
foreach ($http_response_header as $header) {
  if (preg_match('/^\s*content-length\s*:\s*(\d+)\s*$/', $header, $matches)) {
    if ($matches[1] > $limit) {
      // error, file too large
    }
  }
}

$downloaded = 0;

while ($downloaded < $limit) {
  $chunk = fread($rfp, 8192);
  fwrite($lfp, $chunk);
  $downloaded += strlen($chunk);
}

if ($downloaded > $limit) {
  // error, file too large
  unlink($file); // delete local data
} else {
  // success
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:55:47.730

您应该检查是否已到达文件末尾：

```
while (!feof($rfp) && $downloaded < $limit) {
  $chunk = fread($rfp, 8192);
  fwrite($lfp, $chunk);
  $downloaded += strlen($chunk);
} 
```

# javascript - 动态隐藏的输入字段以后不能显示

> ID：13964559
> 
> 赞同：2
> 
> 时间：2012-12-20T02:49:38.733
> 
> 标签：javascript, jquery, show-hide, textinput

我有一个带有文本输入的表单和一个用于选择是/否的单选按钮对。为了简单起见，单选按钮单击事件会检查该值，如果是，它会显示输入文本字段。如果否，则隐藏输入字段。我还检查了文档准备就绪的初始状态并显示/隐藏输入文本字段。

我发现单击 No 会导致使用 jQuery .hide() 方法隐藏输入。但是当我选择 Yes 时，结果 .show() 方法调用不显示输入。如果我将收音机设置为是然后刷新页面，则输入显示得很好。

Firebug 显示没有输入标签。这就像单击 No radio 从 DOM 中删除了输入一样。

这是JS代码示例：

```
 $(document).ready(function() {
        if ($('#cost_sharing_yes').attr('checked') == 'checked') {
            $('input#Institutional_CS_TP').show();
        } else {
            $('input#Institutional_CS_TP').hide();
        }

        $('#cost_sharing_yes').click(function() {
            $('input[id="Institutional_CS_TP"]').show();
        });
        $('#cost_sharing_no').click(function() {
            $('input#Institutional_CS_TP').fadeOut("fast");
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:54:11.397

您缺少`)`关闭就绪功能：

```
$(document).ready(function() {

} // <-- 
```

要永久获取`checked`输入的属性，您应该使用`prop`method 而不是`attr`.

```
$(document).ready(function() {
   var isChecked = $('#cost_sharing_yes').prop('checked');
   $('#Institutional_CS_TP').toggle(isChecked);
   // ..
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:42:13.490

我发现了我的问题。这是一个自己造成的编码问题。为了使示例简单，我删除了混合中的另一个函数调用，我认为这与问题没有任何关系。我错了。在那个功能中我有

```
 $('td#Institutional_CS_TP).text('$0');
    $('input[name="Institutional_CS_TP"]').val('0.00'); 
```

这导致仅显示 td 值，而不是同一 td 内的输入。我的 td 和 td 内的输入标签都具有相同的 ID 值……这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-15T09:21:05.227

**html代码**

```
<div id="myRadioGroup">

    Value Based<input type="radio" name="cars"  value="2"  />

    Percent Based<input type="radio" name="cars" value="3" />
    <br>
    <div id="Cars2" class="desc" style="display: none;">
        <br>
        <label for="txtPassportNumber">Commission Value</label>
       <input type="text" id="txtPassportNumber" class="form-control" name="commision_value" />
    </div>
    <div id="Cars3" class="desc" style="display: none;">
        <br>
        <label for="txtPassportNumber">Commission Percent</label>
       <input type="text" id="txtPassportNumber" class="form-control" name="commision_percent" />
    </div>
</div> 
```

**jQuery代码**

```
function myFunction() {
    var x = document.getElementById("myInput");
    if (x.type === "password") {
        x.type = "text";
    } else {
        x.type = "password";
    }
}

function myFunction1() {
    var y = document.getElementById("myInput1");
    if (y.type === "password") {
        y.type = "text";
    } else {
        y.type = "password";
    }
} 
```

# vb.net - 设置 IntelliSense 的默认异常类型

> ID：13964560
> 
> 赞同：2
> 
> 时间：2012-12-20T02:49:52.377
> 
> 标签：vb.net, visual-studio-2012, intellisense

在 Visual Studio 2010 中，如果我键入`th`然后按两次 TAB，我将得到：

```
Throw New ApplicationException("Exception Occured") 
```

但是在 Visual Studio 2012 中，如果我做同样的事情，我会得到：

```
Throw New ArgumentException("Exception Occured") 
```

因此，IntelliSense 的默认异常类型已从 ApplicationException 更改为 ArgumentException。这是可定制的吗？是否可以将 Visual Studio 2012 中的默认智能感知异常类型更改为 ApplicationException？

仅供参考，没有 ReSharper / CodeRush / 等的纯香草 Visual Studio。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:33:27.853

只需编辑 VS2012Path\Vb\Snippets\1033\common code patterns\exception handling\ThrowanException.snippet

改变

```
<Default>ArgumentException</Default> 
```

到

```
<Default>ApplicationException</Default> 
```

# c# - 使用另一个页面中的文本框来编辑按钮的代码？

> ID：13964561
> 
> 赞同：1
> 
> 时间：2012-12-20T02:50:16.937
> 
> 标签：c#, windows-phone-7

我正在创建一个网络浏览器。在“主页”上，它有一个按钮可将您带到主页，我想为用户提供在“page1”（设置）上更改主页的选项。在 page1 我有“textBox1”（用户输入所需的主页）和“button1”（设置）。你能帮我设置一下吗？有没有办法执行该操作可以更改 webBrowser1 的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:50:08.390

首先，我建议您下载这本[Programming Windows Phone 7](http://www.charlespetzold.com/phone/)电子书并探索它以学习 Windows 手机编程，然后再询问 StackOverflow。

来到你的问题，

在项目中创建一个设置类并添加一个名为“HomePageUri”之类的静态字符串属性。然后在您的 Page1 中，将源 uri 添加到该“HomePageUri”。

然后在您的主页中，在 OnNavigatedTo 事件中更新 WebBrowser 的源，或者您可以将 WebBrowser 的源直接绑定到“HomePageUri”属性

祝你好运

# javascript - 使用 js/jquery 在 Safari (ipad) 中禁用图像上的特定鼠标事件

> ID：13964564
> 
> 赞同：1
> 
> 时间：2012-12-20T02:50:23.880
> 
> 标签：javascript, jquery, safari, mouseevent

目前我有一个图像文件。默认情况下，如果我长按该图像文件，则会显示“保存图像/复制”选项。我个人在上面添加了一个双击事件。

问题是：我需要双击事件但不需要长按事件

我在互联网上发现可以简单地`pointer event : none`在 img 样式中添加一个来禁用所有鼠标事件，但是，如果我只想禁用长按事件怎么办？

从文档，

指针事件：自动 | 没有 | 可见彩绘 | 可见填充 | 可见中风 | 可见 | 彩绘| 高分辨率照片| CLIPARTO 填写 | 中风 | 全部 | 继承

但是有没有适合我的情况的参数？谢谢

# c++ - 将文件复制到另一个目录不起作用

> ID：13964571
> 
> 赞同：0
> 
> 时间：2012-12-20T02:51:26.087
> 
> 标签：c++

我从一个将文件复制到另一个文件的网站获得了以下代码，它编译并运行，但输出文件的内容没有改变。有人能指出问题出在哪里吗？我正在使用 dev c++ IDE（**编辑**：可能使用 mingw）。

```
 #include <fstream>
#include <string>
#include <stdio.h>
#include <iostream>
#include <iomanip>
#include <windows.h>

using namespace std;

int main(){

    CopyFile("C:\\Users\\KEVIN\\Documents\\c++\\t.txt","C:\\Users\\KEVIN\\Documents\\c++\\output.txt",false);
system("pause");
return 0;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:00:38.600

**编辑**

这不再是 C++ 问题了。Windows 保护特殊文件夹，例如`C:`等`C:\windows`。您要么需要以管理员身份运行程序，要么只需在其中创建一个临时文件夹`C:`即可访问它。

下面的代码具有未定义的行为，它创建 fileSize/2 内存块但尝试使用 fileSize 读取/写入，它超出了边界。

```
short * buffer = new short[fileSize/2];
initialFile.read((char*)buffer, fileSize); 
```

修理：

```
short * buffer = new short[fileSize]; 
```

我想采用 JerryCoffin 的想法，只是使用 windows CopyFile 功能代替。

# javascript - http://example.com 和 www.example.com 之间真的有区别吗？

> ID：13964573
> 
> 赞同：7
> 
> 时间：2012-12-20T02:51:37.827
> 
> 标签：javascript, css, http, web

我似乎陷入了这个奇怪的问题。如果我通过将地址指定为 来打开我的网站`http://example.com`，它会正常打开。但是，如果我将地址输入为`www.example.com`或`http://www.example.com`，则该站点将打开，就好像浏览器已禁用 JS（并且没有任何 CSS 格式）。

我在 IE、Firefox 和 Chrome 中尝试过。问题始终存在。

`http://example.com`和之间真的有区别`www.example.com`吗？

如果是，那么有什么方法可以为用户提供一致的体验，而不管他是如何登陆网站的？也许，`http`即使他只使用了`www`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T02:53:22.580

是的。`www.example.com`是 的子域`example.com`。*通常*它们是同一个站点，但不一定。有些服务器只接受其中一个。其他人（如我的）将重定向`www.domain.tld`到`domain.tld`以便于 cookie 处理。其他人仍然（很少）托管完全不同的网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:06:40.360

尝试将 www.mysite.com 重定向到 mysite.com。您可以通过修改 .htaccess 文件来实现此目的。这也有利于搜索引擎优化，因为就搜索引擎而言，两者是独立的实体。通过重定向，您告诉搜索引擎两者是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T03:19:52.220

尽管大多数开箱即用的 vhost 配置将两者视为相同，但您可以专门将其设置为 2 个不同的站点。

# c - 指向结构数组的指针

> ID：13964575
> 
> 赞同：2
> 
> 时间：2012-12-20T02:51:45.830
> 
> 标签：c, linux, malloc

我试图理解以下内容，这三个函数调用如何正常工作，我不确定它在内部是如何工作的，我可以理解第一个很好，但是第二次我用 sizeof 调用 malloc struct 然后打印它，第三次我用结构指针的 sizeof 调用 malloc 并打印它。两者如何可以毫无问题地工作？第二个 malloc 分配的大小为 2*2*int=16 字节，第三个 malloc 分配的大小为 2*pointer=8。而且我在尝试释放 pt2 时得到核心转储，这是在使用 C 和 gcc 的 Linux 上

```
#include<stdio.h>
#include<stdlib.h>

struct test{
 int field1; 
 int field2;  
};

struct test func(int a, int b) {
 struct test t;
 t.field1 = a;
 t.field2 = b;
 return t;
}

  int main()
{

struct test t;

struct test  pt[2];
pt[0] = func(1,1);
pt[1] = func(2,2);
printf("%d %d\n", pt[0].field1,pt[0].field2);
printf("%d %d\n", pt[1].field1,pt[1].field2);

printf("\n");

struct test *pt1;
pt1 = malloc(sizeof(struct test) * 2);
pt1[0] = func(2,2);
pt1[1] = func(3,3);
printf("%d %d\n", pt1[0].field1,pt1[0].field2);
printf("%d %d\n", pt1[1].field1,pt1[1].field2);
printf("\n");

struct test *pt2;
pt2 = malloc(sizeof(struct test*) * 2);
pt2[0] = func(4,4);
pt2[1] = func(5,5);
printf("%d %d\n", pt2[0].field1,pt2[0].field2);
printf("%d %d\n", pt2[1].field1,pt2[1].field2);

free(pt1);
free(pt2);// I'm getting core dump when trying to free pt2

} 
```

输出低于

```
1 1
2 2

2 2
3 3

4 4
5 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:59:56.047

```
pt1 = malloc(sizeof(struct test) * 2); 
```

这个说法是正确的。

```
pt2 = malloc(sizeof(struct test*) * 2); 
```

这种说法是错误的。它在表达式中使用了错误的类型，`sizeof`因此分配了错误的内存量。通常的做法是使用`sizeof(*var)`而不是`sizeof(type)`完全避免这个问题。

```
pt2 = malloc(sizeof(*pt2) * 2); 
```

在像您这样的 32 位平台上，错误的 malloc 仅分配所需内存量的一半，因此分配`p2[1]`调用未定义的行为。您的程序写入不属于它的内存。这是 C，几乎没有运行时错误检查。而不是立即崩溃，您通常只会覆盖内存中 malloc'ed 块旁边的任何内容。

缓冲区溢出是一个无声的杀手。谁知道你刚刚覆盖了什么？它可以是任何东西，真的。尝试释放 pt2 会触发核心转储也就不足为奇了。指针错误在 C 语言中是令人讨厌的，因为您的程序经常会在最终崩溃之前跛行一段时间。崩溃的代码不一定是错误所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:02:32.950

您没有为`pt2`. 该声明：

```
pt2 = malloc(sizeof(struct test*) * 2) 
```

只是为两个*指向*结构的指针分配空间，没有足够的空间给结构本身。

您正在写超出`pt2`数组的范围。这是未定义的行为，在您的情况下会导致 crash on `free`。如果这是更复杂程序的一部分，则此类问题可能会导致不同类型的内存损坏...

# javascript - iOS 通过 Javascript 触摸设备的视口 x/y 坐标

> ID：13964583
> 
> 赞同：6
> 
> 时间：2012-12-20T02:53:13.813
> 
> 标签：javascript, iphone, ios, touch, viewport

我目前正在为 iPhone 开发一个网页，其中包含一个用户可以触摸和拖动的 DIV 元素。另外，当用户将元素拖到设备屏幕的顶部或底部时，我想自动向上或向下滚动页面。

我遇到的问题是试图确定一个可靠的公式来获取 onTouchMove 事件中的坐标，该坐标与用户的手指到达设备视口的顶部或底部相一致。我目前的公式似乎很乏味，我觉得可能有更简单的方法来做到这一点。

我当前确定触摸事件是否已到达屏幕底部的公式：

```
function onTouchMoveHandler(e)
{
    var orientation=parent.window.orientation;
    var landscape=(orientation==0 || orientation==180)?true:false;
    var touchoffsety=(!landscape?screen.height - (screen.height - screen.availHeight):screen.width - (screen.width - screen.availWidth)) - e.touches[0].screenY + (window.pageYOffset * .8);
    if(touchoffsety < 40) alert('finger is heading off the bottom of the screen');
} 
```

我对窗口、文档、正文、e.touches 等对象进行了一些 Javascript 反射，以查看是否可以找到一组总加起来等于屏幕顶部或底部的数字，但不可靠成功。对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:21:31.923

假设`screenY`无论当前滚动位置如何，触摸字段都保持相对于屏幕顶部的 y 坐标，那么您当前的计算对我来说没有多大意义。我希望我没有误解你想要做什么。

要确定触摸是靠近设备的顶部还是底部，我首先会检查 screenY 是否靠近顶部（顶部为 0），因为您可以直接使用该值。然后，如果它不靠近顶部，请计算它与底部的距离并检查。

```
var touch = e.touches[0];
if (touch.screenY < 50)
{
    alert("Closing in on Top");
}
else //Only do bottom calculations if needed
{
    var orientation=parent.window.orientation;
    var landscape=(orientation==0 || orientation==180)?true:false;
    //height - (height - availHeight) is the same as just using availHeight, so just get the screen height like this
    var screenHeight = !landscape ? screen.availHeight : screen.availWidth;
    var bottomOffset = screenHeight - touch.screenY; //Get the distance of the touch from the bottom
    if (bottomOffset < 50)
        alert("Closing in on Bottom");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:46:15.390

这其实还不错。您还可以使用 Zepto.js 及其内置的触摸事件和`.offset()`方法来让它更容易一些：

*   [http://zeptojs.com/#touch](http://zeptojs.com/#touch)
*   [http://zeptojs.com/#offset](http://zeptojs.com/#offset)

但是，我很想知道您是否真的设法让它在底部滚动，以及性能是否足够平滑以使效果值得。（经常在 iOS 中滚动会严重中断 JavaScript）

# crystal-reports - 水晶报表 - 子报表中的水印

> ID：13964588
> 
> 赞同：2
> 
> 时间：2012-12-20T02:54:08.603
> 
> 标签：crystal-reports, watermark, subreport

我有一个申请表的水晶报告，我通过在页眉中使用图像作为水印来完成，然后通过将页眉设置为在详细信息部分覆盖一些字段`Underlay Following sections`。

这一切都很好，但现在我想用这个打印另一个报告：基本上是一个求职信，它是主要数据集；然后将我的申请表报告称为子报告。但是，因为子报表没有页眉，所以无论我在分组上选择什么`keep togethor`或选择什么，我都无法让水印和字段相互叠加。`underlay following sections`

有没有人尝试过这样做，并且完全能够做到？我什么也找不到。

或者是否有人创建了水印报告，然后抑制子报告的水印（基本上颠倒了上面的逻辑）。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:06:25.433

如果将页眉设置为底层不起作用，这里有另一种选择。

为每条记录创建一个相同的顶部分组（例如，报告总计的公司）。在“组选项”中，选中“在每页上重复组标题”框。在“部分选项”中，选中“为以下部分添加底图”。

现在，您在该标题中输入的任何内容都将在每一页上重复，其他所有内容都会覆盖它。

# drop-down-menu - 需要在树视图中选择两次才能激活组合框

> ID：13964590
> 
> 赞同：2
> 
> 时间：2012-12-20T02:54:24.410
> 
> 标签：drop-down-menu, combobox, gtk, pygtk, gtktreeview

我正在使用 GTK+ 和 PyGTK 绘制 GUI。

我在 TreeView 中创建了一个 ComboBox。但问题是当我第一次单击一个项目时，下拉箭头不敏感（灰显）。我必须单击另一个项目，然后再次返回该项目以使下拉箭头再次敏感。

这是 TreeView 中 ComboBox 的标准吗？如果您有任何其他语言的修复程序，我也可以接受。

一个例子可以在[这里](https://stackoverflow.com/questions/12088826/dynamically-adding-items-to-cellrenderercombo-in-liststore-pygtk)找到。 *他还面临一些其他问题，但他的代码也证明了这个问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T02:30:13.900

您在上面提到的代码的问题似乎是`ComboBox`当您开始编辑时实际上只有 1 个元素，这使得下拉功能无用（因此无效）。为了让它像我怀疑你希望的那样运行，你所要做的就是使用另一个信号来执行`self.populate_combo`. 我在创建树视图后添加了两行以使其工作：

```
 treeview = gtk.TreeView(liststore_hardware)
    sel = treeview.get_selection()
    sel.connect("changed", self.populate_combo) 
```

也就是说，我对组合进行了更改的选择原因填充，这意味着当控制返回到主循环时，它们中有多个元素。因此下拉工作。

我还注释掉了前一个`editing-started`信号，因为它没有对程序的当前结构添加任何内容。

```
 window.connect("destroy", lambda w: gtk.main_quit())
    #self.cellrenderer_combo.connect("editing-started", self.populate_combo)
    self.cellrenderer_combo.connect("edited", self.combo_changed, liststore_hardware) 
```

**编辑：**

再想一想，该模型是运行`None`后的`__init__`，而不是我上面写的每行长度为 1 的模型，这使得缺少下拉功能更加合理。

**评论：**

如果更改行（或编辑）导致强烈需要重写`ListStore`. 我不确定哪种情况会要求这样做。另一方面，如果'`TreeView`和`ComoBox`'的内容`ListStore`由于搜索操作或在 else-where 完成的过滤而变化，则应该调用该搜索而不是行的更改`populate_combo`。

所以手头代码范围内的替代解决方案，我上面建议的事件也可以注释掉，一个简单的

```
 self.populate_combo() 
```

作为`init`函数的最后一行添加。

此外，如果在应用程序运行期间需要重新填充组合，我建议`ListStore`修改当前而不是每次都创建一个新组合，如果预计变化不会很大（在这种情况下make a new 可能是最快和最简单的）。

# jquery - jquery拦截粘贴事件

> ID：13964592
> 
> 赞同：10
> 
> 时间：2012-12-20T02:54:45.727
> 
> 标签：jquery

我已经从输入绑定了一个粘贴事件：

```
$(document).ready(function(){
      $('.myInput').bind("paste",function(e) {
          console.log(e);
      });
});​ 
```

每次我按 CTRL-V 时，它都会返回`e`事件对象。

我想获取用户将要粘贴到输入中的数据。

通过检查事件对象，我在几个地方找到了值，例如：

*   `e.srcElement.value`
*   `e.target.value`

但是那些在粘贴发生后返回输入中的值。因此，如果我在输入另一个字符串后粘贴一些文本，我会将两个字符串连接起来。

我在互联网上搜索过，除了丑陋的闪存解决方案之外什么也没找到。

在 jquery 中有没有一种干净的方法来做到这一点？

我想`e.srcElement.value`在获取输入值`before`粘贴后获取整个文本，然后比较两个字符串并消除第一部分，通过连续返回剪贴板的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T03:08:58.950

也许这就是你想要做的，不是 100% 肯定的：

HTML：

```
<input type="text" id="test" class="myInput" value="This is some default text" />​ 
```

jQuery：

```
$(document).ready(function () {
    $('input').on('paste', function (e) { //Attach paste event handler for all inputs
        $(this).val('').val(e.target.value); //Clear the current value, then insert the value of the data that was pasted
    });
}); 
```

小提琴：http: [//jsfiddle.net/PMq6U/](http://jsfiddle.net/PMq6U/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T16:16:19.867

clipboardData 适用于现代浏览器（IE11+、Firefox、Chrome...）。

```
$(document).ready(function(){
      $('.myInput').on('paste', function (e) {
          var dt = e.originalEvent.clipboardData;
          if(dt && dt.items && dt.items[0]){
              dt.items[0].getAsString(function(text){
                  console.log(text); //the pasted content
              });
          }else if(dt && 'getData' in dt){
              console.log(dt.getData('text')); //the pasted content
          }
      });
}); 
```

[http://jsfiddle.net/6n10y0ds/9/](http://jsfiddle.net/6n10y0ds/9/)

[https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T03:02:47.790

您可以使用 onbeforepaste 事件来执行此操作。

```
$(function(){
    $('#el').on('beforepaste',function(e){
        [...]
    });
}); 
```

# ios - GPUImage 绿屏

> ID：13964594
> 
> 赞同：2
> 
> 时间：2012-12-20T02:54:55.297
> 
> 标签：ios, gpuimage

我正在尝试使用 GPUImage 制作绿屏效果。我想要达到的效果是播放窗帘打开的电影，并用图像替换电影的白色部分。这将显示窗帘，然后窗帘打开以显示图像。

我的电影显示正确，电影的白色部分和黑色一样，但是当窗帘打开时图像不显示。有人可以看看下面的代码并告诉我我做错了什么吗？

提前致谢。格雷格

```
NSURL *sampleURL = [[NSBundle mainBundle] URLForResource:@"CurtainsOpening" withExtension:@"m4v"];

GPUImageMovie *movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];

movieFile.playAtActualSpeed = YES;

NSLog(@"movie file = %@", movieFile);

GPUImageChromaKeyBlendFilter *filter = [[GPUImageChromaKeyBlendFilter alloc] init];
[(GPUImageChromaKeyBlendFilter *)filter setColorToReplaceRed:1.0 green:1.0 blue:1.0];
[(GPUImageChromaKeyBlendFilter *)filter setThresholdSensitivity:0.0]; //was 0.4

[movieFile addTarget:filter];

UIImage *inputImage = [UIImage imageNamed:@"curtains.jpg"];
NSLog(@"inputImage = %@", inputImage);
GPUImagePicture *overlayPicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];

NSLog(@"overlayPicture = %@", overlayPicture);

[overlayPicture processImage];
[overlayPicture addTarget:filter];
//[movieFile addTarget:overlayPicture];

GPUImageView *view0 = [[GPUImageView alloc] initWithFrame:self.view.frame];
[view0 setFillMode:kGPUImageFillModeStretch];

NSLog(@"view0 = %@", view0);
[filter addTarget:view0];

[self.view addSubview:view0];

[view0 bringSubviewToFront:self.view];

NSLog(@"frame = %f %f", self.view.frame.size.width, self.view.frame.size.height);

[movieFile startProcessing]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:07:27.193

我想通了。如果有人想知道您需要将`GPUImagePicture`变量设为实例变量，以便代码在退出方法时不会从内存中删除该变量。

# spring - 如何使用 Spring Data Solr 搜索嵌套对象？

> ID：13964595
> 
> 赞同：3
> 
> 时间：2012-12-20T02:55:01.040
> 
> 标签：spring, solr, spring-data, spring-data-solr

我有两个这样的 Java 对象：

```
public class PSubject
{

    @Column 
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @org.apache.solr.client.solrj.beans.Field("name")
    private String name;       

    @Column 
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @org.apache.solr.client.solrj.beans.Field("type")
    private String type;        

    @Column 
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @org.apache.solr.client.solrj.beans.Field("uri")
    private String uri;

    @OneToMany(fetch=FetchType.EAGER,cascade=CascadeType.ALL)
    @IndexedEmbedded
    @org.apache.solr.client.solrj.beans.Field("attributes")
    private Set<PAttribute> attributes = new HashSet<PAttribute>();

    .....
}

@Entity
@Indexed
@Table(name="PAttribute")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class PAttribute extends PEntity
{

    private static final long serialVersionUID = 1L;

    @Column
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.YES)
    @org.apache.solr.client.solrj.beans.Field("attr_name")
    private String name;

    @Column
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.YES)
    @org.apache.solr.client.solrj.beans.Field("attr_value")
    private String value;

    .....

} 
```

还有我的 Spring Data Solr 查询界面：

```
public interface DerivedSubjectRepository extends SolrCrudRepository<PSubject, String> {

    Page<PSubject> findByName(String name, Pageable page);

    List<PSubject> findByNameStartingWith(String name);

    Page<PSubject> findBy(Pageable page);

    @Query("name:*?0* or description:*?0* or type:*?0* or mac_address:*?0* or uri:*?0* or attributes:*?0*")
    Page<PSubject> find(String keyword,Pageable page);
    @Query("name:*?0* or description:*?0* or type:*?0* or mac_address:*?0* or uri:*?0* or attributes:*?0*")
    List<PSubject> find(String keyword);
} 
```

我可以按名称、描述、类型和 mac_address 搜索任何内容，但无法按属性搜索任何结果。

**更新：**

例如，当用户搜索“ipod”时，它可能表示主题的类型或主题的名称，或者属性的名称或属性的值。我想在一个请求中获得所有匹配的主题。我知道我可以在单独的查询中搜索属性对象。但这使得后端的代码变得复杂。

那么，如何搜索这个嵌套对象呢？

**更新**：

我展平了我的数据：

```
@Transient
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @org.apache.solr.client.solrj.beans.Field("attrs")
    private String attrs;
public String getAttrs() {
        return attrs;
    }

    public void setAttrs(Set<PAttribute> attributes) {
        StringBuffer attrs = new StringBuffer();
        if(attributes==null) {
            attributes = this.getAttributes();
        }
        for(PAttribute attr:attributes){
            attrs.append(attr.getName()+" " + attr.getValue()).append(" ");
        }
        this.attrs  =attrs.toString();
    } 
```

问题已解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:11:53.653

IIRC 无法在 solr 中存储嵌套数据结构 - 这取决于您如何展平数据以适应例如。多值字段 - 不知道您的架构有点困难。见： http: [//lucene.472066.n3.nabble.com/Possible-to-have-Solr-documents-with-deeply-nested-data-structures-ie-hashes-within-hashes-td4004285.html](http://lucene.472066.n3.nabble.com/Possible-to-have-Solr-documents-with-deeply-nested-data-structures-i-e-hashes-within-hashes-td4004285.html)

你索引中的数据是什么样子的，你有没有看过spring-data-solr发送的http请求？

# ios - 填充 CGContext 的其余部分，保持一个矩形透明

> ID：13964596
> 
> 赞同：3
> 
> 时间：2012-12-20T02:55:16.397
> 
> 标签：ios, cgcontext

我想在绘制矩形后填充 CGCntext 的剩余部分？我怎样才能做到这一点？谢谢！

* * *

但问题是，我设置了 cgcontext kCGBlendModeClear 的混合模式。我想让上下文中的小矩形透明。如果先绘制背景，我还能在矩形中看到图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:51:57.673

如果要填充上下文（其框架为`bigRect`），除了其中的一个矩形（其框架为`smallRect`）：

```
CGContextBeginPath(context);
CGContextAddRect(context, bigRect);
CGContextAddRect(context, smallRect);
CGContextSetFillColorWithColor(context, color);
CGContextEOFillPath(context, bigRect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:06:26.093

先做背景...

```
 CGRect bounds = [self bounds];
    [[UIColor blackColor] set];
    UIBezierPath* backgroundPath = [UIBezierPath bezierPathWithRect:bounds];
    [backgroundPath fill];

    CGRect innerRect = CGRectMake(self.bounds-10, 
                                  self.bounds-10, 
                                  self.bounds.width-20
                                  self.bounds.height-20);
    [[UIColor redColor] set];
    UIBezierPath* foregroundPath = [UIBezierPath bezierPathWithRect:innerRect];
    [foregroundPath fill]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:01:00.477

画出你的背景，然后用它`CGContextClearRect`来清除你想要透明的区域。

任意形状：

```
// do your foreground drawing

CGPathRef arbitraryShape; // asign your arbitrary shape
CGContextBeginPath(ctx);
CGContextAddRect(ctx, bounds); // rect in full size of the context
CGContextAddPath(ctx, arbitraryShape); // set the area you dont want to be drawn on
CGContextClip(ctx);

// do your background drawing 
```

# loops - 根据前缀循环访问变量名

> ID：13964598
> 
> 赞同：4
> 
> 时间：2012-12-20T02:55:22.723
> 
> 标签：loops, local-variables, stata

我必须进行一些配对 t 检验，我想知道如何自动化整个过程。假设我只有以下变量：

```
int_ma    est_ma    tot_ma    int_pa    est_pa    tot_pa 
```

我需要的是计算：

```
ttest int_ma=int_pa
ttest est_ma=est_pa
ttest tot_ma=tot_pa 
```

当然，以某种方式应该可以利用每一对都有一个唯一的前缀和“_pa，_ma”后缀这一事实，但不幸的是，我找不到一种简单的方法来仅引用每个变量名的一部分。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:50:12.720

有几种方法可以做到这一点。我会使用`foreach`带有一般列表的循环。在这里，我循环遍历您的三个前缀，Stata 作为本地宏传递给循环，并附加`_ma`和`_pa`到`generate`和`ttest`变量。

```
* generate some data
clear
set obs 100 
foreach x in int est tot {
    foreach y in ma pa {
        generate `x'_`y' = runiform()
    }
}

* -ttest- in -foreach- loop
foreach x in int est tot {
    ttest `x'_pa = `x'_ma
} 
```

The `foreach` help file is a worth a few reads, as is the `macro` help file. The syntax is a little odd at first (more like bash scripting than R or Matlab), but it is very flexible.

# c# - 浮点数的乘法性能不一致

> ID：13964606
> 
> 赞同：13
> 
> 时间：2012-12-20T02:56:24.387
> 
> 标签：c#, .net, performance, floating-point

在 .NET 中测试浮点数的性能时，我偶然发现了一个奇怪的情况：对于某些值，乘法似乎比正常情况要慢得多。这是测试用例：

```
using System;
using System.Diagnostics;

namespace NumericPerfTestCSharp {
    class Program {
        static void Main() {
            Benchmark(() => float32Multiply(0.1f), "\nfloat32Multiply(0.1f)");
            Benchmark(() => float32Multiply(0.9f), "\nfloat32Multiply(0.9f)");
            Benchmark(() => float32Multiply(0.99f), "\nfloat32Multiply(0.99f)");
            Benchmark(() => float32Multiply(0.999f), "\nfloat32Multiply(0.999f)");
            Benchmark(() => float32Multiply(1f), "\nfloat32Multiply(1f)");
        }

        static void float32Multiply(float param) {
            float n = 1000f;
            for (int i = 0; i < 1000000; ++i) {
                n = n * param;
            }
            // Write result to prevent the compiler from optimizing the entire method away
            Console.Write(n);
        }

        static void Benchmark(Action func, string message) {
            // warm-up call
            func();

            var sw = Stopwatch.StartNew();
            for (int i = 0; i < 5; ++i) {
                func();
            }
            Console.WriteLine(message + " : {0} ms", sw.ElapsedMilliseconds);
        }
    }
} 
```

结果：

```
float32Multiply(0.1f) : 7 ms
float32Multiply(0.9f) : 946 ms
float32Multiply(0.99f) : 8 ms
float32Multiply(0.999f) : 7 ms
float32Multiply(1f) : 7 ms 
```

为什么 param = 0.9f 的结果如此不同？

测试参数：.NET 4.5，发布版本，代码优化开启，x86，没有附加调试器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:47:58.073

正如其他人所提到的，当涉及次正规浮点值时，各种处理器不支持正常速度计算。这要么是设计缺陷（如果行为会损害您的应用程序或其他方面很麻烦），要么是功能（如果您更喜欢更便宜的处理器或通过不使用门来实现这项工作的硅替代使用）。

理解为什么在 0.5 处有过渡是很有启发性的：

假设你乘以*p*。最终，该值变得非常小，以至于结果是一些低于正常值（在 32 位 IEEE 二进制浮点中低于 2 ^(-126 ）。)然后乘法变慢。随着您继续相乘，该值继续减小，并达到 2 ^(-149)，这是可以表示的最小正数。现在，当您乘以*p*时，确切的结果当然是 2 ^(-149) *p*，它介于 0 和 2 ^(-149)之间，这是两个最接近的可表示值。机器必须对结果进行四舍五入并返回这两个值之一。

哪一个？如果*p*小于 ½，则 2 ^(-149) *p比 2* ^(-149)更接近 0 ，因此机器返回 0。然后您不再使用次正规值，并且乘法再次快速。如果*p*大于 ½，则 2 ^(-149) *p*更接近于 2 ^(-149)而不是 0，因此机器返回 2 ^(-149)，并且您继续使用次正规值，并且乘法仍然很慢。如果*p*恰好是 1/2，则舍入规则说使用其有效数（小数部分）的低位为零的值，即零（2 ^(-149)的低位为 1）。

您报告说 .99f 出现得很快。这应该以缓慢的行为结束。也许您发布的代码并不完全是您使用 .99f 测量快速性能的代码？也许起始值或迭代次数已更改？

有一些方法可以解决这个问题。一是硬件具有指定将使用或获得的任何次正规值更改为零的模式设置，称为“非正规化为零”或“刷新为零”模式。我不使用 .NET，也无法建议您如何在 .NET 中设置这些模式。

另一种方法是每次添加一个微小的值，例如

```
n = (n+e) * param; 
```

其中`e`至少为 2 ^(-126) / `param`。请注意，2 ^(-126) /`param`应该**向上四舍五入**计算，除非您可以保证它`n`足够大而`(n+e) * param`不会产生低于正常值的值。这也假定`n`不是负面的。这样做的效果是确保计算的值总是足够大以处于正常范围内，而不是低于正常范围。

以这种方式添加`e`当然会改变结果。但是，例如，如果您正在处理带有某种回声效果（或其他过滤器）的音频，那么 的值`e`太小而不会导致人类收听音频时可以观察到的任何效果。在生成音频时，它可能太小而不会导致硬件行为发生任何变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:43:23.137

我怀疑这与非正规值（fp 值小于 ~ 1e-38）以及与处理它们相关的成本有关。

如果您测试异常值并将其删除，则恢复正常。

```
 static void float32Multiply(float param) {
        float n = 1000f;
        int zeroCount=0;
        for (int i = 0; i < 1000000; ++i) {
            n = n * param;
            if(n<1e-38)n=0;
        }
        // Write result to prevent the compiler from optimizing the entire method away
        Console.Write(n);
    } 
```

# java - 通过 JNI 从不同的线程调用保存的 java 对象

> ID：13964608
> 
> 赞同：24
> 
> 时间：2012-12-20T02:56:40.537
> 
> 标签：java, android, c++, android-ndk, java-native-interface

我有一个通过 JNI 调用 C++ 共享对象的 java 对象。在 C++ 中，我保存了对 JNIEnv 和 jObject 的引用。

```
JavaVM * jvm;
JNIEnv * myEnv;
jobject myobj;

JNIEXPORT void JNICALL Java_org_api_init
   (JNIEnv *env, jobject jObj) {
    myEnv = env;
    myobj = jObj;
} 
```

我还有一个 GLSurface 渲染器，它最终在另一个线程 GLThread 上调用上面提到的 C++ 共享对象。然后我尝试使用我最初保存的 jobject 回调我的原始 Java 对象，但*我认为*因为我在 GLThread 上，所以我收到以下错误。

```
W/dalvikvm(16101): JNI WARNING: 0x41ded218 is not a valid JNI reference
I/dalvikvm(16101): "GLThread 981" prio=5 tid=15 RUNNABLE
I/dalvikvm(16101):   | group="main" sCount=0 dsCount=0 obj=0x41d6e220 self=0x5cb11078
I/dalvikvm(16101):   | sysTid=16133 nice=0 sched=0/0 cgrp=apps handle=1555429136
I/dalvikvm(16101):   | schedstat=( 0 0 0 ) utm=42 stm=32 core=1 
```

回调到 Java 的代码：

```
void setData()
    {
        jvm->AttachCurrentThread(&myEnv, 0);

        jclass javaClass = myEnv->FindClass("com/myapp/myClass");
        if(javaClass == NULL){
            LOGD("ERROR - cant find class");
        }

        jmethodID method = myEnv->GetMethodID(javaClass, "updateDataModel", "()V");
        if(method == NULL){
            LOGD("ERROR - cant access method");
        }

        // this works, but its a new java object
        //jobject myobj2 = myEnv->NewObject(javaClass, method);

        //this is where the crash occurs
        myEnv->CallVoidMethod(myobj, method, NULL); 
```

}

相反，如果我使用 env->NewObject 创建一个新的 jObject，我可以成功回调到 Java，但它是一个新对象，我不想要那个。我需要回到我原来的 Java 对象。

在我回调Java之前切换线程是否有问题？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-20T05:02:28.200

从不同的线程访问对象很好。问题是 JNI 调用获取对象作为本地引用。如果要在 JNI 调用之间保留对 jobject 的引用，则需要将其设为全局引用：

```
myobj = env->NewGlobalRef(jObj); 
```

记得在你用完之后释放它，否则垃圾收集器不会收集它，你会得到内存泄漏：

```
myEnv->DeleteGlobalRef(myobj); 
```

[在此处](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/design.html#wp1242)阅读有关全局与本地参考的信息。

# oauth - OAuth2 破坏了桌面应用程序的安全性？

> ID：13964609
> 
> 赞同：1
> 
> 时间：2012-12-20T02:56:51.817
> 
> 标签：oauth

目前，在 Web 服务 (Imgur) 的桌面应用程序中从 OAuth1 迁移到 OAuth2 的过程中，我对 OAuth2 规范感到困惑。根据此文档[http://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified](http://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified)并查看有关 OAuth2 的不同服务文​​档，显然它破坏了 OAuth1 提供的所有安全性。

使用 OAuth1，您可以使用用户授予访问权限的服务的 URL，并显示 PIN 以复制/粘贴到您的应用程序中，从用户永远不会向应用程序授予登录名/密码的意义上说，这是非常好的安全性，并且可以随时通过服务的网站撤销给定的访问权限。

现在使用 OAuth2，他们将这种情况排除在外，强制应用程序请求用户的登录名/密码，除非应用程序在其网站中制作自己的脚本以在授予访问权限后从服务接收令牌（然后让用户从你的网页）

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:07:18.687

桌面应用程序可以并且应该使用用户代理（浏览器）来执行 OAuth，这在 OAuth 2 规范中的“本机应用程序”下进行了描述。您描述的流程更适用于输入功能有限的设备，例如游戏机、打印机、相机等。

AFAIK，设备流程在 OAuth 2 的早期规范中，但在某些时候被省略了。无论如何，像 Google 这样的一些 API 提供商已经对它实施了有限的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T05:34:51.330

本机应用程序是要走的路。请参阅 OAuth 2.0 RFC 的 ["Native Applications"][1] 部分。本机应用程序不打算存储密码。如果您想避免直接在应用程序中输入凭据（即使在浏览器控件中），您可以从 OAuth 2.0 本机应用程序执行以下操作：

1.  使用授权端点启动默认浏览器。
2.  为您的重定向 URI 实现一个简单的网页，该网页选择授权代码并将其显示给用户。
3.  要求用户复制代码并将其粘贴回本机应用程序。

或者，规范建议您利用本机平台的 URL 重定向方案来恢复原始应用程序。您可以查看 iOS 和 Android 的“URL Scheme”功能。不幸的是，这些平台都不能保证 URL 方案的唯一性，因此授权代码可能会被另一个在同一 URL 上激活的流氓应用程序劫持。我为此提交了一个 iOS 错误。[1]：[https ://www.rfc-editor.org/rfc/rfc6749#page-52](https://www.rfc-editor.org/rfc/rfc6749#page-52)

# c++ - 删除 char* 进行字节转换

> ID：13964612
> 
> 赞同：4
> 
> 时间：2012-12-20T02:57:20.803
> 
> 标签：c++, c

每次读取文件时，我都尝试使用不同长度的字节读取二进制文件。得到值后，我尝试将字节转换为`char*`.

我创建了一个简单的代码如下：

```
//This code is compiled in Visual Studio 2010
typedef unsigned char BYTE;

BYTE *s;
s = new BYTE[3]; // I read 2 bytes from the file, I add +1 to reserve NULL
s[0]= 'a'; s[1]='b';s[2]=NULL;  //just an example I get 2 bytes from file

char* b;
b = new char(sizeof(s));
strcpy(b,(char*)s);
s[0]='x';
cout << s <<"--"<< b<< "--"<< endl;
delete[] s;
delete[]  b;
cin.get();
return 0;` 
```

但是，代码会生成错误“检测到堆损坏”。当我删除该行时，`delete[] b;`程序运行良好。但我不确定下次是否会出现问题。请有人解释一下吗？如果我删除它会导致内存泄漏`delete[] b;`吗？有什么建议可以改进我的代码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T03:03:10.193

这：

```
b = new char(sizeof(s)); 
```

应该：

```
b = new char[sizeof(s)]; 
```

否则，您不会创建一个数组，而只是创建一个指向具有 sizeof(a) 字符代码的 char 的指针。

因此 delete[] b 导致它崩溃，因为您试图删除没有数组的数组。

还有一个问题，sizeof(s) 不会给你你想要的。s 是一个动态分配的数组，因此调用 sizeof(s)**不会**为您提供 s 中字符大小的总和。sizeof(s) 将返回指向 s 的指针的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T03:19:19.677

虽然 David Saxon 已经解释了您的错误的直接原因，但您的代码可以通过使用 C++ 标准库得到显着改进：

```
//This code is compiled in Visual Studio 2010
typedef unsigned char BYTE;

//s will be automatically destroyed when control leaves its scope
//so there is no need for the `delete[]` later on, and there
//will be no memory leaks if the construction of `b` fails.
std::vector<BYTE> s(3);// I read 2 bytes from the file, I add +1 to reserve NULL
s[0]= 'a'; s[1]='b';s[2]=NULL;  //just an example I get 2 bytes from file
//`sizeof s` is wrong, as it gives the size of the `s` object, rather than
//the size of the allocated array.
//Here I instead just make `b` as a copy of `s`.
std::vector<BYTE> b(s);
s[0]='x';
cout << s.data() <<"--"<< b.data() << "--"<< endl;
//There is no need for `delete[] s` and `delete[] b` as `s` and `b`
//have automatic storage duration and so will automatically be destroyed.
cin.get();
return 0;` 
```

# c - 使用 argv[] 从命令行拉取一组数字

> ID：13964614
> 
> 赞同：5
> 
> 时间：2012-12-20T02:57:37.323
> 
> 标签：c

**如果您对解释我的推理的背景信息不感兴趣，请跳到我问题结尾的最底部。

我有一组多项式方程，我需要读入我的程序来执行多项式的单元测试，例如

*   合成师
*   添加
*   减法
*   规模
*   乘法
*   根

所以我需要能够输入范围广泛的数字来测试 BRLCAD 中使用的功能，尽管我无法想出一个有效的解决方案来读取数字。我目前的做法：

给定命令行：

`./unit_test sd 2 3 4 8 1 4 5`

*   sd - 执行合成除法
*   2 - 第一个多边形的度数
*   3,4,8 - 3x^2 + 4x + 8
*   1 - 第二个多边形的度数

编写一个算法来读取这种格式的一组数字很麻烦，而且其他人很难理解，而且我还没有实现另外两个多项式作为要比较的答案来读取。（因为这是一个开源文件，我希望我的工作有一些透明度）。

```
if(strcmp(argv[1],"sd") == 0){

    poly_eqn1.dgr = atoi(argv[2]);
    /* start at argv[3], run degree count plus one times */
    for(counter = 0; counter < (eqn1.dgr + 1); counter++)
        poly_eqn1.cf[counter] = atof(argv[counter+3]);

    poly_eqn2.dgr = atoi(argv[4 + poly_eqn1.dgr]);
    /* start at end of degree one counter */
    for(counter = 0; counter < (dgr2 + 1); counter++)
        poly_eqn2.cf[counter] = atof(argv[counter+5+dgr]);

    /* grab the answer from end of data */

    return test_synthetic(//input proper data...);
} 
```

**在设置了最大度数的情况下，使用`sscanf`我的多项式读取会更有效吗？**在编写了初始方法后，我考虑过使用 sscanf，但我不确定以这种方式使用它是否值得，而不是从上面再写入两个多项式读取：

给定多项式的最大次数为四

`./unit_test sd 2,0,0,2,4,5 1,0,0,0,2,3`

*   2,0,0,2,4,5 - 2 级，0x^4 + 0x^3 + 2x^2 + 4x + 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:05:29.810

如果我是你，我会努力以人类可读的格式支持你的参数。

例如，应该可以以以下形式解析输入：

```
./unit_test "(3*x^2+4*x+8)/(4*x+5)" 
```

当然，您可能必须编写词法解析器才能理解此输入，但从用户的角度来看，这将是最容易理解的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T03:00:50.517

简单地处理命令行参数时，您真的不必担心效率。以适合您任务的最简单、最直接的方式执行此操作。花时间担心重要的效率 - 与实际的数字运算算法紧密循环。

# macos - Apple 帮助书文件是否在视网膜屏幕上查找 @2x 图像

> ID：13964616
> 
> 赞同：2
> 
> 时间：2012-12-20T02:57:44.603
> 
> 标签：macos, cocoa, osx-mountain-lion, apple-help

Apple 帮助书籍`MyApp.help`（包含在应用程序包中）、为包含在 OS X 应用程序（从帮助菜单中）而编写的格式是否会`*@2x.png`在视网膜屏幕上查找图像？

我在 Apple 帮助创作指南或高分辨率指南中没有看到任何提及。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:34:10.020

帮助包只是显示在 Web 视图中的 HTML 页面的集合，因此您可以`@2x`像在网页上一样使用图像。（另外，我刚刚尝试过，[您可以清楚地看到](http://i.stack.imgur.com/oYp5K.png)视网膜内容有效！）有关更多详细信息，请参阅Apple 开发人员网站上的[此页面。](https://developer.apple.com/resources/high-resolution/)

# c++ - 可变参数模板中的 Lambda 函数

> ID：13964617
> 
> 赞同：2
> 
> 时间：2012-12-20T02:57:56.857
> 
> 标签：c++, c++11

我试图通过使用 Lambda 或以某种方式转发参数来摆脱重载函数，但它甚至无法编译。为什么我不能这样做？有哪些选择？

我真的根本不想使用重载功能。我知道我在做什么是错的，但必须有办法吗？

```
int maximum(int n)   //Trying to not have to use this.. I want to get rid of this :l
{
    return n;
}

template<typename... Args>
int maximum(int n, Args... args)
{
    return std::max(n, [&args...](int n){return n;});  //tried using a lambda instead of maximum(args...);
} 
```

我也试过：

```
template<typename... Args>
int maximum(int n, Args... args)
{
    return std::max(n, std::forward<Args>(args)...);
} 
```

另外，为什么是（不编译）：

```
template<typename... Args>
int maximum(int n, Args... args)
{
    return std::max(n, []{return 0;});
} 
```

不同于（编译）：

```
template<typename... Args>
int maximum(int n, Args... args)
{
    return std::max(n, 0);
} 
```

第一个不编译，但第二个肯定可以..：S

我使用上述所有内容，例如：`std::cout<<maximum(1, 2, 3, 7, 2, 5);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:15:17.177

以下作品：

```
template<typename... Args>
int maximum(Args&&... args)
{
    return std::max({std::forward<Args>(args)...});
}

int main()
{
    std::cout << maximum(1, 2, 3, 4, 5);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:09:24.433

如何跳过 lambda 并只写：

```
template <typename T>
const T& maximum ( const T& t ) { return t; }

template <typename T, typename... Args>
const T& maximum ( const T& t, Args... args ) {
    return std::max ( t, maximum ( std::forward<Args>(args)... ));
    } 
```

# jquery - 在 jquery 中显示选定的表格不同的表

> ID：13964624
> 
> 赞同：1
> 
> 时间：2012-12-20T02:58:52.027
> 
> 标签：jquery, html, select

我有以下html编码

```
<select>
<option id="koloman" selected>Koloman</option>
<option id="display" selected>Display</option>
</select>
<input type="submit" class="button-show" value="show data" />

<table id="table-koloman">
//content of table
</table>

<table id="table-display">
//content of table
</table> 
```

我想显示 2 个现有表中的一个，首先出现的默认表是表“table-Koloman”，因为在选择表单中选择了 id =“Koloman”。

如果我更改了 id = "display" 那么 table id = "table-display" 将在按下按钮“显示数据”时出现，jquery javascript 编码如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:08:07.827

```
$('#table-display').hide();
$('.button-show').on('click', function() {
    if ($('option:selected').text() === 'Display') {
        $('#table-koloman').hide();
        $('#table-display').show();
    } else if ($('option:selected').text() === 'Koloman') {
        $('#table-koloman').show();
        $('#table-display').hide();
    }
});​ 
```

[http://jsfiddle.net/hRwAV/](http://jsfiddle.net/hRwAV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:15:48.593

您可以将 ID 更改为值属性，然后使用`val`方法获取选择元素的当前值。

```
<select>
    <option value="koloman" selected>Koloman</option> 
    <option value="display">Display</option> 
</select>
<input type="submit" class="button-show" value="show data">  

<table id="table-koloman"> <tbody><tr><td>first</td></tr></tbody> </table>  
<table id="table-display"> <tbody><tr><td>second</td></tr></tbody> </table> 
```

```
var $table = $('table'); // cache the object 
$('.button-show').click(function(e) {
   e.preventDefault(); // prevents the default action of the event.
   var s = $('select').val(); // get the value
   $table.hide().filter('[id="table-'+s+'"]').show() // filter the tables
}).click() // trigger the click on DOM Ready 
```

[http://jsfiddle.net/LU3za/](http://jsfiddle.net/LU3za/)

请注意，您还可以收听更改事件，而不是强制用户选择一个选项并点击不方便用户的按钮。

```
var $table = $('table');
$('select').change(function(e) {
      $table.hide().filter('[id="table-'+this.value+'"]').show()
}).change() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:04:21.953

单击显示数据后是否要隐藏 table-koloman 并显示 table-display。如果是这样的话

将“ **dropDownId** ”作为 id 给选择标签并尝试这个

```
$('.button-show').click(function() {
    if ($('#dropDownId :selected').text() == 'Display') {
        $('#table-koloman').hide();
        $('#table-display').show();
    } else if ($('#dropDownId :selected').text() == 'Koloman') {
        $('#table-koloman').show();
        $('#table-display').hide();
    }
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T03:09:28.043

```
$("table").hide();
$(".button-show").click(function(){    
    $("table").hide();
    $("#table-" + $("select").val().toLowerCase()).show();
});​ 
```

# c++ - 使用非 32 位整数是否合理？

> ID：13964626
> 
> 赞同：12
> 
> 时间：2012-12-20T02:59:11.203
> 
> 标签：c++, types

> **可能重复：**
> [使用 16 位整数的重要性](https://stackoverflow.com/questions/1477816/the-importance-of-using-a-16bit-integer)

如果今天的处理器（在标准条件下）执行 32 位操作——那么使用“short int”是否合理？因为为了对该数据执行操作，它会将其转换为 32 位（从 16 位）整数，执行操作，然后返回 16 位——我认为。那么有什么意义呢？

本质上，我的问题如下：

1.  使用较小的范围整数会带来什么（如果有）性能增益/障碍？就像，如果我不使用标准的 32 位整数进行存储，而是使用 16 位短整数。
2.  “然后回到 16 位”——我在这里正确吗？往上看。
3.  所有整数数据是否都存储为 CPU/RAM 上的 32 位整数空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:05:49.950

你的第一个问题的答案也应该澄清最后一个问题：如果你需要存储大量 16-bit `int`s，你可以节省 32-bit 所需内存量的一半，`int`以及可能出现的任何“附带好处”有了它，比如更有效地使用缓存。

如今，大多数 CPU 都有单独的 16 位和 32 位操作指令，以及从内存读取和写入 16 位值的指令。在内部，ALU 可能正在执行 32 位操作，但上半部分的结果不会返回到寄存器中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T03:23:01.200

1.  处理器不需要“扩展”一个值来使用它。它只是用零填充未使用的空格，并在执行计算时忽略它们。因此，实际上，在 a 上运行`short int`比在 a 上运行更快`long int`，尽管使用当今的快速 CPU，即使是一点点差异也很难注意到（双关语）。

2.  机器并没有真正转换。更改值的大小时，它要么向左侧填充零，要么完全忽略左侧不适合目标内存区域的额外位。

3.  不，这通常是人们将`short int`值用于`long int`不需要 a just 范围的目的的原因。分配的内存对于 的每个长度都是不同的`int`，例如 a`short int`占用的内存位比 a 少`long int`。优化的步骤之一是将`long int`值更改`short int`为范围不超过 a`short int`的值，这意味着该值永远不会使用分配给 a 的额外位`long int`。在处理数组中的大量元素或大量相同`struct`或`class`.

在 RAM 和内部处理器高速缓存中存储不同`int`大小的位数不同。`float`, `double`, 和也是如此`long double`，尽管`long double`主要用于 64 位系统，大多数编译器只是忽略`long`if 在 32 位机器上运行，因为 32 位累加器和 ALU 中的 64 位值将被“删除”在任何计算期间，可能永远不会收到前 32 位的零以外的任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T03:10:25.127

> 使用较小的范围整数会带来什么（如果有）性能增益/障碍？就像，如果我不使用标准的 32 位整数进行存储，而是使用 16 位短整数。

它使用更少的内存。在正常情况下，它会使用一半。

> “然后回到 16 位”——我在这里正确吗？往上看。

如果您的代码需要，它只会在 16 位和 32 位之间转换，而您未能显示。

> 所有整数数据是否都存储为 CPU/RAM 上的 32 位整数空间？

不，32 位处理器可以直接处理*高达*32 位的值。也可以对 8 位和 16 位值进行许多操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T03:15:17.530

No 是不合理的，除非你有某种（非常严格的）你应该使用的内存限制`int`

1.  你不会获得性能，只是记忆。事实上，由于您刚才所说的，您会失去性能，因为寄存器需要去除高位。
2.  往上看
3.  是的，取决于 CPU，不，它在 RAM 上是 16 位的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T03:27:17.763

> 使用较小的范围整数会带来什么（如果有）性能增益/障碍？就像，如果我不使用标准的 32 位整数进行存储，而是使用 16 位短整数。

性能来自缓存局部性。缓存中的数据越多，程序运行的速度就越快。如果你有很多值，这更相关`short`。

> “然后回到 16 位”——我在这里正确吗？

我不太确定这一点。我原以为 CPU 可以并行优化多个操作，如果您可以将数据打包成 16 位，您将获得更大的吞吐量。这也可能与其他 32 位操作同时发生。我在这里猜测，所以我会停下来！

> 所有整数数据是否都存储为 CPU/RAM 上的 32 位整数空间？

不，各种整数数据类型都有特定的大小。但是，当您使用时，您可能会遇到结构内部的填充`char`，`short`特别是。

* * *

速度效率不是唯一的问题。显然，您具有存储优势以及内在行为（例如，我编写了特定于性能的代码，该代码利用了 a `unsigned short`just 的整数溢出，因此我不必进行任何模运算）。您还可以使用特定的数据大小来读取和写入二进制数据。可能还有更多我没有提到的，但你明白了=）

# ios - 无法从 NSDictionary 获取值是 ios

> ID：13964629
> 
> 赞同：1
> 
> 时间：2012-12-20T02:59:38.960
> 
> 标签：ios, nsdictionary

我的 NSDictionary 输出与 NSLog 显示：

```
{
    "filename" : "mytest100.txt",
    "filedesc" : "File Description here",
    "data" : [

    ]
 } 
```

但是当我这样做时：`NSString *filename = [dict objectForKey:@"filename"];`它在这条线上崩溃。

我究竟做错了什么？这似乎微不足道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:12:24.730

试试这个：

```
NSDictionary *d = [NSDictionary dictionaryWithObject:@"foo" forKey:@"bar"];
NSLog(@"%@", d); 
```

输出是：

```
{
    bar = foo;
} 
```

请注意，键或值中没有记录引号？除非您的键和值的格式为 @"\"foo\""，否则我的猜测是您那里并没有真正的字典。

我会把钱放在代表 JSON 的字符串上。崩溃是因为 objectForKey: 是字符串上无法识别的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:12:03.237

从您收到的错误消息中，该`dict`变量不包含 an `NSDictionary`，而是 and `NSString`。

跟踪您的代码以查找您分配`dict`变量的位置，您肯定会看到它被设置为不是字典的东西。

# c++ - 用布尔函数确定结束

> ID：13964633
> 
> 赞同：1
> 
> 时间：2012-12-20T03:00:35.853
> 
> 标签：c++, boolean

我正在尝试创建一个 Play() 函数（就像媒体播放器类型播放一样），它首先检查以确保给定对象不在其选择的末尾（如果是，用户将被告知倒带.)

我有一个名为 IsCAtEnd() 的布尔函数。它应该找出 C 是否在末尾。现在我有这样的东西：

```
bool AC::IsCAtEnd()
{
CAtEnd = (CurrentSelect == NumOfSelect)
if (CAtEnd)
{return true;}
else
{return false;}
} 
```

在我的 Play() 函数中，我有这样的东西——</p>

```
void AC::Play()
{
int Choice;
cout << Enter Selection to Play: “;
cin >> Choice;

CurrentSelection = Choice;
If (IsCAtEnd())
{
cout << “You need to rewind first.” << endl;
}
else
{
cout << “Playing “ << CurrentSelection << endl;
} 
```

它编译并运行，但不是我想要的那样。例如，如果我输入最后一个选项（假设 C 有 6 个选项，我想播放最后一个选项），它会告诉我快退。相反，我希望它播放该选择，并且下次调用 Play 时告诉我倒带（回忆上次调用 Play 时，它是在最后一个选择上）。我还希望它继续提示用户倒带，直到他们这样做（所以不要再次调用播放，选择不同的选择并让该选择播放）。

我知道我需要这样做，以便如果放入最后一个选择，则 CAtEnd 变量在播放后更改为 true。这样下一次它会声明它需要重绕。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:12:46.860

我认为您想先玩它以进行任何选择。然后检查它是否是最后一个。如果是最后一个，则提示回退消息，否则，什么也不做。

你可以像这样改变它

```
if(currentSelection <= NumberOfSelection)
{
     cout << “Playing “ << CurrentSelection << endl;
}

If (IsCAtEnd())
{
     cout << “You need to rewind first.” << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:55:25.400

如果您希望程序在提示 rewind msg 时连续运行并使用用户输入，您可以有一个 while 循环

```
 int Choice;    
    cout << Enter Selection to Play: “;
    cin >> Choice;

    while(choice != 0)
    {

         CurrentSelection = Choice;

         if(currentSelection <= NumberofSelection)
             cout << “Playing “ << CurrentSelection << endl;

        if (IsCAtEnd())
        {
            cout << “You need to rewind first.” << endl;
            cout << Enter Selection to Play: “;
            cin >> Choice;
        }
} 
```

# algorithm - quadratic_error 变量在 Google 的 PageRank 算法中的作用是什么？

> ID：13964635
> 
> 赞同：0
> 
> 时间：2012-12-20T03:00:38.070
> 
> 标签：algorithm, pagerank, quadratic

[在wikipedia](http://en.wikipedia.org/wiki/PageRank)上有一个 Googles' PageRank 的实现：

```
% Parameter M adjacency matrix where M_i,j represents the link from 'j' to 'i', such that for all 'j' sum(i, M_i,j) = 1
% Parameter d damping factor
% Parameter v_quadratic_error quadratic error for v
% Return v, a vector of ranks such that v_i is the i-th rank from [0, 1]

function [v] = rank(M, d, v_quadratic_error)

N = size(M, 2); % N is equal to half the size of M
v = rand(N, 1);
v = v ./ norm(v, 2);
last_v = ones(N, 1) * inf;
M_hat = (d .* M) + (((1 - d) / N) .* ones(N, N));

while(norm(v - last_v, 2) > v_quadratic_error)
        last_v = v;
        v = M_hat * v;
        v = v ./ norm(v, 2);
end

endfunction 
```

我无法弄清楚 quadratic_error 的用途。它没有在维基百科上描述，也没有在文章的算法规范中描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:09:03.940

看起来这是一个收敛测试。当L [2]与 之间的差不超过 的值`while`时，循环结束。[`v``last_v``v_quadratic_error`]

这里有一点解释。首先，注意它`M_hat`是一个矩阵并且`v`是一个向量。`while`循环替换为`v`乘积`M_hat * v`（标准化为单位向量）。当`v`一次迭代引起的变化足够小时，循环结束。这就是“收敛”在这种情况下的含义。

这似乎是用于查找与矩阵的主要特征值相对应的特征向量的标准[幂迭代](http://en.wikipedia.org/wiki/Power_iteration)`M_hat`循环（在这种情况下为）。在不了解整体算法的更多信息（我不打算研究）的情况下，我不能说为什么这个计算是有用的。

# r - R if else 语句，跳过 if 只做 else

> ID：13964636
> 
> 赞同：0
> 
> 时间：2012-12-20T03:00:40.283
> 
> 标签：r, if-statement

> **可能重复：**
> [为什么这些数字不相等？](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)

下面的 R 代码是一个更大函数的一部分，它一直跳过 if 语句，只在最后执行 else 语句。有什么建议么？谢谢

```
if(solv==0){
theta<-pi/2
} else if(solv==1){
theta<-0
}  else if(solv==-1) {
theta<-pi
}  else{
comb<-top/bottom

theta<-acos(comb)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:24:25.610

重要的问题是，**是`solve`整数吗？**

如果不是，那么正如@GSee 在对您问题的评论中所暗示的那样，您的代码中的错误与[浮点错误有关](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)

请尝试以下操作

```
# Set whichever tolerance is acceptable to you
tol <- 1e-16

if(isTRUE(all.equal(solv, 0, tolerance=tol))){
theta<-pi/2
} else if(isTRUE(all.equal(solv, 1, tolerance=tol))){
theta<-0
}  else if(isTRUE(all.equal(solv, -1, tolerance=tol))) {
theta<-pi
}  else{
comb<-top/bottom

theta<-acos(comb)} 
```

# python - 列表中最长的字符串

> ID：13964637
> 
> 赞同：12
> 
> 时间：2012-12-20T03:00:47.543
> 
> 标签：python

我正在制作一个从列表中返回最长字符串值的函数。我的代码在只有一个字符最多的字符串时有效。如果有多个字符串，我试图让它打印所有最长的字符串，并且我不希望它们被重复。当我运行它时，它只返回'hello'，而我希望它也返回'ohman'和'yoloo'。我觉得问题出在这条线上`if item not list:`，但我已经尝试了所有方法，但它不起作用。

```
list = ['hi', 'hello', 'hey','ohman', 'yoloo', 'hello']
def length(lists):
    a = 0 
    answer = ''
    for item in lists:
        x = len(item) 
    if x > a:
        a = x
        answer = item
    elif x == a:
        if item not in list:
            answer = answer + ' ' + item
    return answer
print length(list) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-20T03:02:16.990

**首先**，我们可以找到列表中任意字符串的最大长度：

```
stringlist = ['hi', 'hello', 'hey','ohman', 'yoloo', 'hello']
#maxlength = max([len(s) for s in stringlist])
maxlength = max(len(s) for s in stringlist)  # omitting the brackets causes max 
                                             # to operate on an iterable, instead
                                             # of first constructing a full list
                                             # in memory, which is more efficient 
```

一点解释。这称为[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，它允许您将一个列表*理解*为另一个列表。该代码的 `[len(s) for s in stringlist]`意思是“生成一个类似列表的对象，通过获取`stringlist`，并且对于`s`该列表中的每个，给我，`len(s)`（该字符串的长度）。

所以现在我们有一个列表`[2, 5, 3, 5, 5, 5]`。然后我们调用它的内置[`max()`](http://docs.python.org/2/library/functions.html#max)函数，它会返回`5`.

**现在**您有了最大长度，您可以过滤原始列表：

```
longest_strings = [s for s in stringlist if len(s) == maxlength] 
```

这就像它用英文读到的那样：“对于`s`stringlist 中的每个字符串，给我那个字符串`s`，如果`len(s)`等于`maxlength`。”

**最后**，如果要使结果唯一，可以使用[`set()`](http://docs.python.org/2/library/stdtypes.html#set)构造函数生成唯一集：

```
unique_longest_strings = list(set(longest_strings)) 
```

（我们呼吁`list()`在删除重复项后将其转回列表。）

* * *

这归结为：

```
ml = max(len(s) for s in stringlist)
result = list(set(s for s in stringlist if len(s) == ml)) 
```

* * *

*注意*：不要使用名为 的变量`list`，因为它会覆盖`list`类型名称的含义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T03:20:20.267

我非常赞同 Jonathon Reinhart 的回答，但我就是忍不住……这个怎么样？

```
max(map(len, stringlist)) 
```

没有必要写一个列表推导，这更简单......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:17:16.327

可能你写错了`if item not in list:`，缩进错误，修改如下：

```
def length(lists):
    a = 0
    answer = ""

    for item in lists:
        x = len(item)
        if x > a:
            a = x
            answer = item
        elif x == a:
            if item not in ans:
                answer = answer + " " + item
    return answer 
```

但我认为 Jonathon Reinhart 提供了更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-11T19:15:43.593

我有同样的问题。我以这种方式想出了我的解决方案：

```
myList =['hi', 'hello', 'hey','ohman', 'yoloo', 'hello']
def get_longest_strings(myList):
        longest=len(max(myList,key=len))
        for each in myList:
                if(longest==len(each)):
                       #common_result is list to store longest string in list
                       common_result.append(each)
        return common_result
print(common_result) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-27T14:03:55.770

像这样的东西...

```
def allLongestStrings(inputArray):
    maxLength = len(max(inputArray, key = len))

    newArray = []

    lengthArray = len(inputArray)

    for i in range(lengthArray):
        if(len(inputArray[i])==maxLength):
            newArray.append(inputArray[i])
    return newArray 
```

# ios - 为什么 FPPopover presentPopoverFromPoint 不起作用？

> ID：13964640
> 
> 赞同：0
> 
> 时间：2012-12-20T03:01:14.373
> 
> 标签：ios, uisegmentedcontrol, popover, fppopover

```
 ContentsTableViewController *contentsTableViewController = [[ContentsTableViewController alloc] initWithStyle:UITableViewStylePlain];
    contentsTableViewController.delegate = self;

    popover = [[FPPopoverController alloc] initWithViewController:contentsTableViewController];
    [contentsTableViewController release];

    popover.tint = FPPopoverDefaultTint;
    popover.delegate = self;
    popover.contentSize = CGSizeMake(300, 500);
    popover.arrowDirection = FPPopoverArrowDirectionUp;

    [popover presentPopoverFromView:segmentedControl];
    //[popover presentPopoverFromPoint:CGPointMake(CGRectGetMinX(segmentedControl.frame), CGRectGetMaxY(segmentedControl.frame))];
    [popover release]; 
```

这是我的代码的一部分。当我使用 presentPopoverFromPoint 方法时，它支持在该点显示 popoverView，但它没有。为什么？

相比之下，它的另一种方法 presentPopoverFromView 确实有效。但是我必须使用方法 presentPopoverFromPoint 来在某个点上呈现 PopoverView。那我该怎么办？

或者，以其他方式，我可以在segmentedControl中获得左段的视图（segmentedControl中有两个段）？

参考：[https ://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:01:37.417

我之前尝试使用 FPPopover，发现在使用`presentPopoverFromPoint`. 我没有时间调试原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:11:22.990

问题可能是您的分段控制。是 UISegmentedControl 的子类吗？

你确定不是 (segmentedControl) nil 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:31:45.137

现在伙计们，这种方法可以正常工作。只需下载最新版本（标签 1.4）

# vb.net - 收到错误，“compareTo”不是 VB.NET 中“RockPaperScissors.Weapons”的成员

> ID：13964641
> 
> 赞同：1
> 
> 时间：2012-12-20T03:01:19.270
> 
> 标签：vb.net, winforms, oop, compareto

我是编程和 OOP 的新手，所以请原谅我缺乏知识。

作为我的 Rock, Paper and Scissors 游戏的一部分，我有一个抽象超类（**Weapon** ），它在 VB.NET中有子类（**Rock, Paper 和 Scissors ），例如：**

```
 Public MustInherit Class Weapons

    Public Class Paper
        Inherits Weapons

        Public Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Paper Then
                Return 0
            ElseIf TypeOf Weapons Is Rock Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Rock
        Inherits Weapons

        Public Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Rock Then
                Return 0
            ElseIf TypeOf Weapons Is Scissors Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Scissors
        Inherits Weapons

        Public Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Scissors Then
                Return 0
            ElseIf TypeOf Weapons Is Paper Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

End Class 
```

还有一个超类**Player**，它具有子类（**PlayerComputerRandom**和**PlayerHumanPlayer**），例如：

```
Imports RockPaperScissors.Weapons

Public Class Player

    Private pName As String
    Private pNumberOfGamesWon As String
    Public pWeapon As Weapons

    Property Name() As String
        Get
            Return pName
        End Get
        Set(ByVal value As String)
            pName = value
        End Set
    End Property

    Property NumberOfGamesWon As String
        Get
            Return pNumberOfGamesWon
        End Get
        Set(ByVal value As String)
            pNumberOfGamesWon = value
        End Set
    End Property

    Property getWeapon As Weapons
        Get
            Return pWeapon
        End Get
        Set(ByVal value As Weapons)
            pWeapon = value
        End Set
    End Property

    Public Sub pickWeapon(ByVal WeaponType As String)
        If WeaponType = "Rock" Then
            pWeapon = New Rock()

        ElseIf WeaponType = "Paper" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class

 Imports RockPaperScissors.Weapons

    Public Class PlayerComputerRandom
        Inherits Player

        Private Enum weaponsList
            Rock
            Paper
            Scissors
        End Enum

        Public Overloads Sub pickWeapon()

            Dim randomChoice = New Random()
            Dim CompChoice As Integer = randomChoice.Next(0, [Enum].GetValues(GetType(weaponsList)).Length)

            If CompChoice = "0" Then
                pWeapon = New Rock()

            ElseIf CompChoice = "1" Then
                pWeapon = New Paper()

            Else
                pWeapon = New Scissors()

            End If

        End Sub

    End Class

     Public Class PlayerHumanPlayer
        Inherits Player

    End Class 
```

但是，在单击 btnRock 后尝试比较结果时，我收到错误***“compareTo”不是“RockPaperScissors.Weapons”的成员。***代码是：

```
 Public Class GameForm

    Private Sub btnRock_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRock.Click
        Dim player1 = New PlayerHumanPlayer()
        Dim player2 = New PlayerComputerRandom()

        player1.Name = "HumanPlayer"
        player1.pickWeapon("Rock")

        player2.Name = "Computer"
        player2.pickWeapon()

        Dim winner As Integer = player1.getWeapon().compareTo(player2.getWeapon())

        Select Case winner
            Case 1
                Console.WriteLine(player1.Name() + " wins!")
            Case -1
                Console.WriteLine(player2.Name() + " wins!")
            Case 0
                Console.WriteLine("Draw!")
        End Select

    End Sub
End Class 
```

' ***Dim Winner As Integer = player1.getWeapon().compareTo(player2.getWeapon()) 行***似乎是导致问题的原因。

知道如何对此进行排序，以确保返回正确的获胜者结果吗？任何帮助将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:33:40.917

问题是您正在尝试创建一个需要具有 compareTo 函数来继承但未完成声明的基类。它需要是这样的。

```
Public MustInherit Class Weapons
    Public MustOverride Function compareTo(Weapons As Object) As Integer
End Class 
```

这会将您的武器类别更改为此。

```
Public Class Paper
    Inherits Weapons

    Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
        If TypeOf Weapons Is Paper Then
            Return 0
        ElseIf TypeOf Weapons Is Rock Then
            Return 1
        Else
            Return -1
        End If
    End Function
End Class

Public Class Rock
    Inherits Weapons

    Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
        If TypeOf Weapons Is Rock Then
            Return 0
        ElseIf TypeOf Weapons Is Scissors Then
            Return 1
        Else
            Return -1
        End If
    End Function
End Class

Public Class Scissors
    Inherits Weapons

    Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
        If TypeOf Weapons Is Scissors Then
            Return 0
        ElseIf TypeOf Weapons Is Paper Then
            Return 1
        Else
            Return -1
        End If
    End Function
End Class 
```

请参阅[MustInherit上的此 MSDN 链接](http://msdn.microsoft.com/en-us/library/aee8f02w%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:08:30.033

如果您希望能够调用“compareTo”，则需要实现`IComparable`接口：http: [//msdn.microsoft.com/en-us/library/system.icomparable.aspx](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)

# html - 使用表格的 HTML 表单

> ID：13964645
> 
> 赞同：0
> 
> 时间：2012-12-20T03:01:38.133
> 
> 标签：html, forms, tabular

这是我网站的注册页面。我使用了一个表格，每一行都有每个唯一的输入字段。但有太接近另一个领域。看图片：

![在此处输入图像描述](../Images/c13b814e797d110a87cb8b35b3499e56.png)

如何在两个字段之间放置一些换行符？由于整个表格都在表格中，我不能简单地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:13:05.460

使用 CSS

在table标签中给你创建的表一个类

```
<table class="myFormContainer"> 
```

然后在您的样式表中创建类并给表格 TD 一些填充；

```
.myFormContainer tr td{padding: 0 3px 0 3px;} 
```

这将在 td 的顶部和底部创建一个 6px 的间隙 - 当然包含您的表单输入字段。

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:14:43.993

**1）**如果每个“输入行”是 beetween`<p>`并且`</p>`您可以使用 CSS 规则

例如：

```
<div id="myForm">
...
...
<p><label for="firstname">Firstname:</label> <input type="text" id="firstname"/>* </p>
...
...
</div> 
```

在 CSS 中，您可以声明：

```
#myform p{
 border-bottom: 1px solid black
} 
```

最后一个参数是颜色或RGB值，后跟#

**2）**您可以使用html命令`<hr/>`

# algorithm - 在谷歌地图的多边形内任意放置一个标记

> ID：13964646
> 
> 赞同：2
> 
> 时间：2012-12-20T03:01:41.647
> 
> 标签：algorithm, google-maps, geometry

关于如何[检测标记是否](https://developers.google.com/maps/documentation/javascript/reference#poly)在谷歌地图的多边形内有很多文档。但是，我的问题是如何在多边形内任意放置标记（最好远离边缘）

我尝试计算多边形点的平均纬度和经度，但这显然在某些非凹多边形中失败。

我还考虑过计算该区域的[质心](https://en.wikipedia.org/wiki/Center_of_mass)，但显然也是如此。

有任何想法吗？我想避免[反复试验的方法](https://stackoverflow.com/questions/9797448/get-a-point-inside-the-polygon?rq=1)，即使它在 99% 的时间内都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:02:41.657

有几种不同的方法可以解决这个问题，具体取决于您的总体目标是什么。

一种方法是构建多边形的*三角剖分*并将标记放置在其中一个三角形内。如果您不太担心最优性，则可以采用简单的启发式方法，例如选择最大三角形的质心，尽管这显然不一定会给您提供离多边形边缘最远的点。多边形三角剖分有多种算法：[剪耳](http://en.wikipedia.org/wiki/Polygon_triangulation)或[约束 Delaunay](http://en.wikipedia.org/wiki/Delaunay_triangulation)三角剖分可能是可行的方法，并且存在许多好的库，即[CGAL](http://www.cgal.org/)和[Triangle](https://www.cs.cmu.edu/~quake/triangle.html)。

如果您有兴趣找到最佳位置，则可以使用基于*骨架*的方法，使用多边形[的中轴](http://en.wikipedia.org/wiki/Medial_axis)或[直骨架](http://en.wikipedia.org/wiki/Straight_skeleton)。中轴是与多边形边缘等距的曲线集，而直骨架是相关结构。具体来说，这些类型的结构可用于查找距离边缘最远的点，请使用基于直线骨架的方法[检查用于 GIS 的标签放置应用程序。](http://proceedings.esri.com/library/userconf/proc01/professional/papers/pap388/p388.htm)

希望这可以帮助。

# google-apps-script - 如何触发引用单元格的 onEdit 事件？

> ID：13964655
> 
> 赞同：3
> 
> 时间：2012-12-20T03:02:46.450
> 
> 标签：google-apps-script, triggers, google-sheets

我正在编写谷歌电子表格的谷歌应用脚​​本，但遇到了一些问题。我尝试通过其值被其他单元格引用的单元格触发“onEdit”函数。但是，它似乎效果不佳。比如A单元格的值被B单元格引用（A的值是“='B'”），如果我改变了B单元格的值，A单元格也会相应改变，但是无法触发onEdit函数一个细胞。我在想是否是因为电子表格自动进行的更改不是会触发 onEdit 函数的事件。

有人知道解决此问题的其他解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:23:45.297

`onEdit`将在单元格更新时运行（如您所假设的）。使用上面的逻辑，是否可以在`onEdit`事件中设置检查以查看更改了哪些单元格，如果是`B`，您能否做出更改的逻辑假设`A`？

```
function onEdit(event)
{
  // 'event' contains information about the edit that took place
  // Here, we read the 'source' and get the active range (our changed cell)
  // We then pull out the string form of the notation to get the cell that changed
  var changedCell= event.source.getActiveRange().getA1Notation();
  Browser.msgBox(changedCell)
  if (changedCell == 'B1') {
    // If the changed cell is the one that affects A, do something
    Browser.msgBox('You changed B1, and this will affect A');
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:26:56.283

正如您所提到的，onEdit 将针对单元格 B 而不是单元格 A 触发。您可以使用它来读取单元格 A，或者您可以每分钟触发一个函数来读取单元格 A。

# ios - iOS：图像到字符串的转换

> ID：13964656
> 
> 赞同：0
> 
> 时间：2012-12-20T03:03:01.567
> 
> 标签：ios

我想开发一个功能，其中用户可以使用本机相机拍摄打印在产品或任何东西上的序列号的照片，然后扫描图片以在我的 iOS 程序中检索序列号作为字符串。我不知道如何实现这一目标。有人可以指导我解决这个问题吗？我不想知道产品的名称，拍完照片后，我想从照片中获取序列号的字符串。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:05:25.213

您需要 OCR（光学字符识别），这不能掉以轻心。看看 Tesseract for iOs，这是一个可以做到这一点的库。但要准备好潜入未知领域。

# node.js - Node.js 和 socket.io 的混淆

> ID：13964660
> 
> 赞同：24
> 
> 时间：2012-12-20T03:03:26.667
> 
> 标签：node.js, socket.io

我经常看到诸如“Node.JS + socket.io 教程”之类的标题。即使在我购买的 Node.js Beginner 书中，它也告诉我下载 socket.io，所以我真的很困惑。

他们之间有什么区别？为什么我不能只使用 Node.JS "OR" Socket.io 来编写我的应用程序？如果我可以编码，为什么人们在标题中使用 socket.io 加 node.js？

我真的很困惑，所以任何形式的回复都将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-20T03:10:27.287

`node.js`是一个平台。

`socket.io``websockets`如果您要在`node.js`.

`socket.io`需要`node.js`但`node.js`不需要`socket.io`

编辑：Ryan Dahl（node.js 的创建者）的介绍视频非常有启发性，有助于解决这种混淆：[http ://www.youtube.com/watch?v=jo_B4LTHi3I](http://www.youtube.com/watch?v=jo_B4LTHi3I)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-20T03:08:21.273

Socket.io 是基于 node.js 的实时应用程序框架。因此，如果您想使用 socket.io，两者都是必需的。您可以编写自己的代码来做同样的事情，但 socket.io 是跨浏览器的，使用它可以帮助您节省时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T12:51:58.207

socket.io 是一个库，除了实际平台 node.js 之外。它就像计算机的软件。没有电脑就不能使用软件。

Node.js - 是一个关注语言的平台 - 使用 V8 的 JavaScript 可视化（将 JS 脚本解释为计算机可理解形式的 JavaScript 引擎）。以及许多其他平台组件。

而 socket.io 只是使用平台的特性，实现了一些很酷的自己的特性，这些特性是添加到节点的。它只是一个库，您可以与核心一起使用。

在现实世界中，它就像 hoover - 是 node.js，而喷嘴是 socket.io。当然这是粗略的例子，事情要复杂得多。但是正如你所看到的，没有核心的喷嘴是毫无意义的。

Node.js 使您的 JavaScript 使用自己的功能运行。虽然 socket.io 是您使用或不使用的东西 - 由您选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T06:25:33.063

我也在学习 nodejs、socket.io、express 等的细节。到目前为止我所理解的是，Nodejs 是托管整个项目（可以在客户端和服务器端）的大骨干，使用节点命令，如 > node servercode.js 等。它可以为 websockets 服务器、Http 服务器甚至 https 服务器打开端口。

然而，socketio 以异步事件驱动的方式（想想 ajax）提供客户端和服务器端之间的通信链接。

希望它有所帮助

# html - HTML 流体列

> ID：13964668
> 
> 赞同：3
> 
> 时间：2012-12-20T03:05:06.400
> 
> 标签：html, css, width, fluid

让我先说我觉得自己像个白痴。我有一个相当简单的场景，我无法弄清楚。

这是我的代码的示例：

```
<div id="container-wrapper">  
  <div id="container">
    <div class="left">This is LEFT</div>
    <div class="line"></div>
  </div>
</div> 
```

假设**#container-wrapper**是固定宽度，例如 960px。 **#container**的宽度设置为 100%。我不知道**.left**的宽度，因为里面的文本是动态的。它向左浮动。 **.line**有一个背景图像，它本质上是一条将重复以填充 div 的宽度的线。我想将它浮动到**.left**旁边， 所以它看起来像这样：

> 这是左边 ----------------------------------------------- ----------

如果我将**.line**的宽度设置为 100%，它将尝试填充整个容器宽度，所以问题是如何让它流畅地调整到**.left**剩余的空间。

希望我很清楚。

谢谢，豪伊

这是我正在使用的真实代码的示例。**.line**真的是**.inside-separator**。

```
<div id="container-wrapper">  
  <div id="container">
     <div class="left">This is LEFT</div>    
     <div class="inside-separator"><span class="inside-separator-left">&nbsp;</span><span class="inside-separator-right">&nbsp;</span></div>
  </div>
</div>

.inside-separator
{
  background: transparent url('../images/inside_separator.png') no-repeat center center;
  margin: 0;
  padding: 0;
  height: 7px;
  width: something?;
}

.inside-separator-left,
.inside-separator-right
{
  display: block;
  position: absolute;
  width: 8px;
  height: 7px;
  background: transparent url('../images/inside_plus.png') no-repeat 0px 0px;
}

.inside-separator-left
{
  float: left;
  left: 0;
}

.inside-separator-right
{
  float: right;
  right: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:10:03.763

我不确定这是否可以使用浮点数。但是如果你可以使用`display:table`而不是浮动 .left 那就更容易了。

```
div#container { display:table; width:100%; }
div.left, div.line { display:table-cell; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:17:12.793

```
 <div class="left"><div class="line">11111111111111111</div> This is LEFT</div> 
```

将 .line 放入 .left 并浮动 .line right

[http://jsfiddle.net/Hk7GR/1/](http://jsfiddle.net/Hk7GR/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:13:24.663

感谢您所有的帮助。display:table 成功了。这是一个示例[http://jsfiddle.net/idpexec/QKSzC/](http://jsfiddle.net/idpexec/QKSzC/)

```
 <div class="container-wrapper">
      <div class="container">
        <div class="left">This is LEFT</div>
        <div class="inside-separator-wrapper">
            <div class="inside-separator">
                <span class="inside-separator-left">&nbsp;</span>
                <span class="inside-separator-right">&nbsp;</span>
            </div>
        </div>
     </div>
    </div> 

    <style>
    .container-wrapper
    {
         width: 500px;
         height: 60px;
         border: 1px solid green;
         margin-bottom: 50px;
    }

    .container
    {
        display:table;
        width:100%;
    }

    .left,
    .inside-separator-wrapper
    {
        display:table-cell;
    }

    .left
    {
        border: 1px solid red;
        white-space: nowrap;
        padding: 0 15px;
    }

    .inside-separator-wrapper
    {
      width: 100%;
      position: relative;
    }

    .inside-separator
    {
      background: transparent url('http://test.2wsx.ws/inside_separator.png') no-repeat center center;
      height: 7px;
      position: relative;
      top: 0px;
      left: 0px;
      padding: 0;
      width: 100%;
    }

    .inside-separator-left,
    .inside-separator-right
    {
      display: block;
      position: absolute;
      width: 8px;
      height: 7px;
      background: transparent url('http://test.2wsx.ws/inside_plus.png') no-repeat 0px 0px;
    }

    .inside-separator-left
    {
      float: left;
      left: 0;
    }

    .inside-separator-right
    {
      float: right;
      right: 0;
    }
    ​&lt;style> 
```

# javascript - 如何阻止在 Google Blogger 模板中加载 CSS 和 js 文件？

> ID：13964673
> 
> 赞同：2
> 
> 时间：2012-12-20T03:05:34.647
> 
> 标签：javascript, html, css, blogger

我想阻止在我的 Blogger 中加载一些 CSS 和 js 文件，例如

```
<link type='text/css' rel='stylesheet' href='//www.blogger.com/static/v1/widgets/1937454905-widget_css_bundle.css' /> 
```

和

```
</script><script type="text/javascript" src="//www.blogger.com/static/v1/widgets/4127629733-widgets.js"></script>` 
```

，但是我在 Blogger 模板中找不到这些标签，它是由 Blogger 添加的。有没有办法删除或评论这些标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:11:04.833

使用风险自负。:)

[如何删除 Blogger CSS，重置样式表](http://damzaky.blogspot.com/2012/10/how-to-remove-blogger-css-reset.html)

这实际上是一种覆盖 Blogger 模板提供的 CSS 的方法。没有办法删除它，横向地，也没有办法删除 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T06:41:13.273

可以删除 Blogger CSS，您可以添加自己的 CSS。但是，如果您想删除 Blogger JavaScript，那么它将停止运行您的小部件，但如果您想将 Blogger 用作简单的 HTML 页面，您也可以这样做。

在这里我分享两个都是简单的步骤......

*   [**如何在您的自定义模板中删除/隐藏 Blogger 官方 CSS？**](http://www.exeideas.com/2013/06/how-to-hide-blogger-official-css.html)
*   [**如何在您的自定义模板中删除/隐藏 Blogger 官方小部件 JS？**](http://www.exeideas.com/2013/06/how-to-hide-blogger-official-javascript.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T16:11:08.653

首先备份您的模板。

**阻止 BLOGGER CSS：**

找到这个：

```
<b:skin><![CDATA[lots-of-css-code]]></b:skin> 
```

并替换为：

```
&lt;style type=&quot;text/css&quot;&gt;&lt;!-- /*<b:skin>*/</b:skin> 
```

找到这个：

```
 <b:template-skin>bunch of code</b:template-skin> 
```

并替换为：

```
<link href='https://www.somewhere.com/yourstylesheet.css' rel='stylesheet' type='text/css'/> 
```

或替换为：

```
 <style>your-custom-css-here</style> 
```

**阻止删除所有 BLOGGER JAVASCRIPT 和小工具：**

找到这个：

```
<b:include data='blog' name='all-head-content'/> 
```

并将其替换为：

```
<meta content='blogger' name='generator'/><link expr:href='data:blog.url' rel='icon' type='image/x-icon'/><link expr:href='data:blog.url' rel='canonical'/><data:blog.feedLinks/><b:if cond='data:blog.url == data:blog.homepageUrl'><link href='http://www.blogger.com/openid-server.g' rel='openid.server'/><link expr:href='data:blog.url' rel='openid.delegate'/></b:if> 
```

找到这个：

```
</head> 
```

并替换为：

```
&lt;!--</head>--&gt;&lt;/head&gt; 
```

# c++ - 如何存储击键？

> ID：13964674
> 
> 赞同：1
> 
> 时间：2012-12-20T03:05:36.360
> 
> 标签：c++, winapi, gdi

我有一个空的 win32 项目。

```
CASE WM_CHAR: 
```

在这种情况下，我需要将每个击键存储在一个数组中，然后使用

```
TextOut(); 
```

我想它会是这样的：

```
char store[LARGE_NUMBER]; 
```

然后在 wm_char 标头的情况下，我将字符存储在存储中，然后使用计数器沿数组移动每个按下的键。我只是不知道如何记录键盘上的特定键，而不仅仅是任何键 - 这称为 wm_char 案例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:14:29.300

该`wParam`参数保存被按下的键的字符代码。看看[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276%28v=vs.85%29.aspx)。`lParam`保存有关按键的更多信息（是否是特殊键，是否按下键等）。

# cakephp - 将 CakePHP 2.2 升级到 2.3 时出错

> ID：13964678
> 
> 赞同：0
> 
> 时间：2012-12-20T03:06:13.190
> 
> 标签：cakephp

为了访问 Cake 中的一些新缓存功能，我一直在尝试从 2.2 升级到 2.3。按照建议，我将 lib/Cake 文件夹替换为升级后的平台。但是，它抛出了一堆关于无法找到的核心控制器的错误。

```
2012-12-19 19:55:11 Error: [MissingControllerException] Controller class ThemeController could not be found. 
```

例如：

```
#0 /Users/work/Dropbox/Websites/cake-cart/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2012-12-19 19:55:11 Error: [MissingControllerException] Controller class ThemeController could not be found.
#0 /Users/work/Dropbox/Websites/cake-cart/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2012-12-19 19:55:11 Error: [MissingControllerException] Controller class JsController could not be found.
#0 /Users/work/Dropbox/Websites/cake-cart/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2012-12-19 19:55:12 Error: [MissingControllerException] Controller class CssController could not be found.
#0 /Users/work/Dropbox/Websites/cake-cart/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2012-12-19 19:55:12 Error: [MissingControllerException] Controller class ImgController could not be found.
#0 /Users/work/Dropbox/Websites/cake-cart/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main} 
```

我一直无法弄清楚这一点。这就是错误日志中的全部内容。谷歌和/或堆栈搜索显示没有其他人有这个问题。我知道它应该很简单，没有 API 问题。

有人能说明我可以从哪里开始解决这个问题吗？

提前致谢 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:24:58.340

没关系....对于任何经历过这种情况的人，请先检查您的蛋糕版本。我认为我的是 2.2，因为我*认为*我已经从 2.1 成功升级，但它仍然不是 2.1，所以我必须完成从 2.1 到 2.2 的迁移步骤，然后 2.3 完美运行（关闭浏览器后 -即使缓存关闭，我猜浏览器中也会缓存一些东西）

# sql - SQL Server XML 列上的 Where 子句过滤属性 AND 值

> ID：13964682
> 
> 赞同：8
> 
> 时间：2012-12-20T03:06:26.487
> 
> 标签：sql, sql-server, xml, tsql

我在表“文档”中有一个“元数据”字段，其中包含以下数据：

```
<properties>
  <property name="someProp">xyz</property>
  <property name="reportId">55</property>
  <property name="someOtherProp">abc</property>
</properties>' 
```

如何编写一个查询来返回存在名称为“reportId”且“reportId”属性元素的值为 55 的属性元素的记录？有时“reportId”属性节点是唯一存在的，有时不存在，而且它并不总是按上述顺序，所以我无法查询绝对位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-17T13:26:21.507

无需提取值。改用[exists() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms189869%28v=sql.100%29.aspx)。

```
select *
from Document
where Metadata.exist('/properties/property[@name="reportId" and . = 55]') = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T03:28:07.660

没关系，明白了。以供参考：

```
select * from Document
where Metadata.value('(/properties/property[@name="reportId"])[1]', 'int') = 55 
```

# javascript - 在 javascript 中打开 lync 聊天窗口

> ID：13964687
> 
> 赞同：7
> 
> 时间：2012-12-20T03:07:18.923
> 
> 标签：javascript, sip, lync

我在stackoverflow上发现了我要问的同样的问题，但答案没有帮助，因为据我所知，该链接没有处理javascript。[是否可以从网页打开新的 Lync 对话？](https://stackoverflow.com/questions/10704811/is-it-possible-to-open-a-new-lync-conversation-from-a-webpage)

简而言之，我想使用 javascript 以编程方式打开 Lync 聊天窗口。我用一个简单的链接完成了这个：

```
<a href="sip:person@domain.com">IM</a> 
```

单击链接将按预期打开窗口。我正在寻找一种在 javascript 中复制该行为的方法：

```
function doImDeveloper() {
    //Javascript to open a Lync window
} 
```

这是在内部环境中。我希望我公司的人员能够单击一个按钮并让它与我启动 Lync 对话。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T05:02:44.153

这对我有用。

```
window.location = "sip:person@domain.com"​ 
```

# c++ - c++中引用变量的大小

> ID：13964690
> 
> 赞同：7
> 
> 时间：2012-12-20T03:08:02.887
> 
> 标签：c++

我想知道为什么堆栈溢出中没有讨论这个问题？引用只是变量的另一个名称，所以执行如何在内存级别发生

引用在内部实现为指针吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-20T03:09:45.353

如何实现引用纯粹是一个实现细节。但是，是的，大多数实现都会使用指针来实现它们。
`sizeof`应用于引用的运算符为您提供它所引用的元素的大小。

> **参考本身的大小是多少？**

**C+11 标准：§ 8.3.2.4**

> 未指定引用是否需要存储 (3.7)。

请注意，**未指定**意味着编译器实现不需要记录它如何实现引用。您也不应该认为实现是特定的。简而言之，语言标准将参考实现视为语言用户不需要知道的细节，因此它抽象了这个细节。

# ios - 在长按手势上调整 UIScrollView 的大小

> ID：13964698
> 
> 赞同：0
> 
> 时间：2012-12-20T03:08:51.297
> 
> 标签：ios, xcode, uiscrollview, resize, uigesturerecognizer

我使用 Storyboard 在 UITableViewController 的最顶部（导航栏下方）有一个 UIScrollView。UIScrollView 的默认大小是 320x50。当用户保持滚动视图至少 1 秒时，我希望 UIScrollView 获得两倍大（320x100），以便通过动画显示更多细节。如果可能，它正下方的 UITableView 应该使用它进行动画处理并向下移动 50。

当 UIScrollView 处于较大设置时，保持至少 1 秒将导致相反的动画，并且 UIScrollView 将动画回其原始大小。

我该怎么做？提前谢谢你！这是我到目前为止所拥有的：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.featureScrollExpanded = NO;
    UILongPressGestureRecognizer* featureHold = [[UILongPressGestureRecognizer alloc] initWithTarget:self  action:@selector (longHold:)];

    [featureHold setDelaysTouchesBegan : YES];
    featureHold.minimumPressDuration = 0.6;
    featureHold.numberOfTouchesRequired = 1;
    [self.featureScrollView addGestureRecognizer:featureHold];
    [featureHold release];
}

- (void)longHold:(UIGestureRecognizer*)sender {
    if (self.featureScrollExpanded==NO) {
        self.featureScrollExpanded=YES;
        //make it bigger

    }
    else {
        self.featureScrollExpanded=NO;
        //make it smaller

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:15:32.057

做一个动画：

```
CGRect frame = yourScrollView.frame;
frame.size.height += 50;
[UIView animateWithDuration:0.6
                     animations:^{
                         yourScrollView.frame = frame;
                     } completion:^(BOOL finished) {
                            //do your other animation here if you want to 
                            //or do them both together and lose this block
                     }
     ]; 
```

或者，如果您想要更多概述：

```
CGRect frame = yourScrollView.frame;
frame.size.height += 50;
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.6];

[self.yourScrollView setFrame:frame];

[UIView commitAnimations]; 
```

# node.js - 为什么不调用 https.request 回调？

> ID：13964700
> 
> 赞同：3
> 
> 时间：2012-12-20T03:08:58.417
> 
> 标签：node.js, twitter-bootstrap, https, jasny-bootstrap

我有一些 node.js 代码，我试图从 raw.github.com 获取 package.info。我正在做一个 HTTPS 请求，但由于某种原因，它看起来从未调用过回调，因为从未输出过“这里”。

有谁看到出了什么问题？

```
console.log(options)

req = https.request(options, function(res) {
  console.log('here')
  res.setEncoding('utf8')
  // ... more code here
 })

 console.log(req)

 // .. return -> listening and waiting 
```

输出

```
{ host: 'raw.github.com',
  port: 443,
  path: '/jasny/bootstrap/2.2.2-j3-wip/package.json',
  method: 'GET' }
{ domain: null,
  _events:
   { response: { [Function: g] listener: [Function] },
     socket: { [Function: g] listener: [Function] } },
  _maxListeners: 10,
  output: [],
  outputEncodings: [],
  writable: true,
  _last: false,
  chunkedEncoding: false,
  shouldKeepAlive: true,
  useChunkedEncodingByDefault: false,
  sendDate: false,
  _hasBody: true,
  _trailer: '',
  finished: false,
  agent:
   { domain: null,
     _events: { free: [Function] },
     _maxListeners: 10,
     options: {},
     requests: {},
     sockets: { 'raw.github.com:443': [Object] },
     maxSockets: 5,
     createConnection: [Function: createConnection] },
  socketPath: undefined,
  method: 'GET',
  path: '/jasny/bootstrap/2.2.2-j3-wip/package.json',
  _headers: { host: 'raw.github.com' },
  _headerNames: { host: 'Host' }
} 
```

有关完整代码，请参见[lib/packageinfo.js](https://github.com/jasny/bootstrap-server/blob/wip/lib/packageinfo.js)。该函数在[index.js中调用](https://github.com/jasny/bootstrap-server/blob/wip/index.js)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T03:19:48.780

您需要调用`end()`请求来执行它，如下所示：

```
req = https.request(options, function(res) {
  console.log('here')
  res.setEncoding('utf8')
  // ... more code here
});
req.end();   // <= Here 
```

# jquery - 当 id 具有非字母数字字符时，无法使用 Jquery 获取 Select HTML 的值

> ID：13964702
> 
> 赞同：3
> 
> 时间：2012-12-20T03:09:05.273
> 
> 标签：jquery, html

在我的 jquery 经验中，除了字母数字（当然包括 id 和类选择器）之外，我没有遇到过使用字符串选择器中的其他字符，现在在我当前的项目中，id 包含 [] 并将其逐字地放在我的选择器上和它根本不起作用。

```
<select name="pdcompany[0]" id="pdcompany[0]">
        <option value="0">
            Please select
        </option> 
```

我已经从文档中阅读了有关创建选择器[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)的规则并遵循了它们，但仍然不起作用。我出了什么问题？

```
 selector = "#pdcompany\\[0\\] > option:selected";
    alert('Selector: ' + selector);
    alert($(selector).text()); 
```

这是我的小提琴供您使用[http://jsfiddle.net/laupkram/Fd42a/](http://jsfiddle.net/laupkram/Fd42a/)

**更新**

已经修复了选择器中的一些错误...丢失`#`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:15:32.083

您不需要“ > option:selected”，因为 .val 已经为您提供了。做就是了：

```
selector = "#pdcompany\\[0\\]"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:14:01.757

怎么样`$('[id="pdcompany[0]"]').text();`。使用引号和[属性选择器](http://api.jquery.com/attribute-equals-selector/)。

[例子](http://jsfiddle.net/Fd42a/6/)

翻译供您使用：

```
$('[id="pdcompany[0]"] option:selected')... 
```

顺便说一句，除非您的选择是 a `multiple`，否则无需使用`option:selected`. `.val()`会很好地工作。

# android - TableLayout 出现在另一个 TableLayout 之上

> ID：13964703
> 
> 赞同：0
> 
> 时间：2012-12-20T03:09:09.440
> 
> 标签：android, android-layout

我有以下定义：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/leftContainer"
    android:layout_weight="0.8">
    <TableLayout
        android:id="@+id/drinksTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="*"
        android:stretchColumns="*"
        android:padding="0dp" />
    <TableLayout
        android:id="@+id/itemsTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="*"
        android:stretchColumns="*"
        android:padding="0dp"
        android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

两种表格布局都是以编程方式构建的。

我希望第二个表直接出现在第一个表的下方，但是我能做的最好的就是让它位于我不喜欢的布局的底部（使用 alignParentBottom）。

我怎样才能让`itemsTable`直接出现在下面`drinksTable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:16:27.683

只需将您的布局转换为 a `LinearLayout`，确保添加`android:orientation="vertical"`; 这将使每个元素垂直堆叠。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/leftContainer"
    android:layout_weight="0.8"
    android:orientation="vertical">
    <TableLayout
        android:id="@+id/drinksTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="*"
        android:stretchColumns="*"
        android:padding="0dp" />
    <TableLayout
        android:id="@+id/itemsTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="*"
        android:stretchColumns="*"
        android:padding="0dp"
        android:layout_alignParentBottom="true" />
</LinearLayout> 
```

但是请注意，如果元素数量过多，它们会从底部的屏幕流出。（您可能希望将其包装`LinearLayout`在`ScrollView`.）

# php - fpdf、fpdi、fpdm 和 fpdf_merge 与多页 pdf - php 冲突

> ID：13964711
> 
> 赞同：2
> 
> 时间：2012-12-20T03:10:08.903
> 
> 标签：php, pdf-generation, fpdf

希望得到一些帮助。我正在尝试使用下面的 php 做 4 件事。第一个长块将签名图像添加到我的 sig.pdf 模板。第二块填充我的 template3.pdf 模板中的表单字段。第三块应该合并两个文件。第四块通过电子邮件发送合并的 pdf。

1 和 4 自己工作，2 和 4 自己工作。

将 1、2 和 4 一起创建两个单独的 pdf，但不会发送电子邮件。

3 从不工作。我收到以下错误：

```
Fatal error: Uncaught exception 'Exception' with message 'object [1] non trouve' in /home/content/.../html/pdf2/fpdf_merge.php:74 Stack trace: #0 /home/content/.../html/pdf2/fpdf_merge.php(214): FPDF_Merge->error('object [1] non ...') #1 /home/content/.../html/pdf2/fpdf_merge.php(615): FPDF_Merge->getObject(Resource id #23, Array, '1') #2 /home/content/.../html/pdf2/fill.php(79): FPDF_Merge->add('qaf.pdf') #3 {main} thrown in /home/content/.../html/pdf2/fpdf_merge.php on line 74 
```

我猜这可能是因为我的 qaf.pdf 有 7 页长，但还没有找到任何文档。

所以我的问题是：

1) 我可以做些什么来使 fpdf_merge.php 与我的两个文档一起工作？

2) 当我同时使用第一个和第二个进程时，为什么我的电子邮件进程不起作用？

我猜我的东西出了问题。但我不知道如何在 php.ini 中解决这个问题。

感谢您提供任何线索！

注意：我删除了评论（其他人的出色工作），只是为了更容易阅读这篇文章。它们保留在我的工作脚本中。

在这里交叉发布：[http ://www.fpdf.org/phorum/read.php?f=1&i=60395&t=60395](http://www.fpdf.org/phorum/read.php?f=1&i=60395&t=60395)

1：

```
$s = new signature; 
$s->use_template_pdf('signed','sig'); 
$s->delete_signature(); 
class signature { 
var $pdf; 
var $hash; 
var $image; 
function __construct(){ 
require('fpdf/fpdf.php'); 
require('fpdi/fpdi.php'); 
$this->make_hash(); 
$this->make_signature(); 
} 
function make_hash(){ 
$this->hash = uniqid(); 
} 
function make_signature(){ 
if(isset($_POST['img'])){ 
$arr = explode(',',$_POST['img']); 
$this->image = "image{$this->hash}.png"; 
if(is_writable(dirname(__FILE__))){ 
file_put_contents($this->image, base64_decode($arr[1])); 
}else{ 
die('<p>The working directory is not writable, abort.</p>'); 
} 
} 
} 
function delete_signature(){ 
if(file_exists($this->image)) @unlink($this->image); 
} 
function use_template_pdf($filename, $template){ 
$this->pdf = new FPDI(); 

$pagecount = $this->pdf->setSourceFile($template.'.pdf'); 
$tplidx = $this->pdf->importPage(1); 
$this->pdf->addPage(); 
$this->pdf->SetXY(90, 260); 
$this->pdf->Write(5,"Signature: "); 
$this->pdf->useTemplate($tplidx, 10, 10); 
$this->pdf->Image($this->image,125,260,-200); 
if(is_writable(dirname(__FILE__))){ 
$this->pdf->Output($filename.'.pdf', 'F'); 
}else{ 
$this->pdf->Output($filename.'.pdf', 'I'); 
} 
$this->pdf = NULL; 
} 
} 
```

2：

```
require('fpdm/fpdm.php'); 
$fields = array( 
'cascade' => $_POST['_fid_6'], 
'structuretype' => $_POST['_fid_7'], 
'marketmanager' => $_POST['_fid_8'], 
); 
$pdf = new FPDM('template3.pdf'); 
$pdf->Load($fields, false); 
$pdf->Merge(); 
$pdf->Output('qaf.pdf', 'F'); 
```

3：

```
require('fpdf_merge.php'); 
$merge = new FPDF_Merge(); 
$merge->add('qaf.pdf'); 
$merge->add('signed.pdf'); 
$merge->output('qaf-final.pdf', 'F'); 
```

4：

```
$to = $_POST['_fid_6']; 
$from = "qaf@me.com"; 
$subject = "Your QAF"; 
$separator = md5(time()); 
$eol = PHP_EOL; 
$filename = "qaf-final.pdf"; 
$pdfdoc = $pdf->Output("", "S"); 
$attachment = chunk_split(base64_encode($pdfdoc)); 
$headers = "From: ".$from.$eol; 
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\""; 
$body = "--".$separator.$eol; 
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol; 
$body .= "Here is your QAF.".$eol; 
$body .= "--".$separator.$eol; 
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol; 
$body .= "Content-Disposition: attachment".$eol.$eol; 
$body .= $attachment.$eol; 
$body .= "--".$separator."--"; 
mail($to, $subject, $body, $headers); 
```

# caching - 在 Xcode / UIWEBVIEW 中缓存单个网页以供离线使用

> ID：13964713
> 
> 赞同：2
> 
> 时间：2012-12-20T03:10:11.290
> 
> 标签：caching, uiwebview

我有一个连接到“login.php?email=a@b.com&password=aaa”的 UIWEBVIEW

Login .php 使用这些详细信息登录到外部网站并使用 CURL 获取和显示其内容。

我已经让我的 login.php 将网页存储到我的网络服务器上的文件夹“/cache/a@b.com.html”中。

我现在需要找到一种方法来告诉 Xcode/UI webview

如果有互联网连接： - 访问 login.php - 下载最新的 /cache/a@b.com.html 并存储在本地。

如果没有互联网连接：-加载本地“a@b.com.html”文件。

我希望你明白，

我查看了一些系统，例如：[http ://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588](http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588)

但这存储了您的 UIWEBVIEW 访问的文件，在我的情况下是“login.php”。

谢谢，

杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:21:25.853

我从来没有设法以这种方式完成任务，确实使用了[https://github.com/rnapier/RNCachingURLProtocol/blob/master/RNCachingURLProtocol.h上的 RNCachingURLProtocol](https://github.com/rnapier/RNCachingURLProtocol/blob/master/RNCachingURLProtocol.h)

# performance - 令人难以置信的慢编译时间

> ID：13964718
> 
> 赞同：2
> 
> 时间：2012-12-20T03:10:35.343
> 
> 标签：performance, visual-c++, visual-studio-2012

我想我可以试试 Visual Studio 2012，所以我创建了一个简单的控制台“hello world”应用程序，它在运行时会发出哔声，但是当我去编译它时需要 25 秒。现在我知道了一个事实，最简单的“hello world”程序，在 i7 的 3.2GHz 的现代系统上不应该花那么长时间来编译。是否有我可以禁用的设置或功能在 2012 年添加，导致编译基本控制台应用程序非常慢？

```
#include <iostream>
using namespace std;

string returnvalue;

int main()
{
    cout << "Hello World\a";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:34:21.300

这听起来像您的系统上还有其他东西在干扰编译，因为像这样的单个文件应该只需要大约一秒钟的时间来构建。我建议在构建时运行[Process Monitor](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)，然后查看 Tools -> Process Activity Summary/File Summary 中的摘要。它很可能会指出您系统上的问题，可能类似于：

*   病毒/间谍软件扫描程序或挂钩所有文件访问的其他进程。桌面搜索工具也可以做到这一点。
*   无法读取或写入文件或目录的权限问题
*   访问可能不可用的网络驱动器上的文件
*   与可能不可用的服务器的其他网络通信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:08:42.637

使用预编译的头文件。第一次会很慢，但之后它会轻而易举地通过它。在您的预编译头 .h 文件中包含 <iostream>。

最简单的方法是重新开始并使用使用预编译头文件的默认配置。或者...

有关如何将预编译头文件添加到现有项目的信息，请参见此处：[如何修复构建时缺少的 .pch 文件？](https://stackoverflow.com/questions/6096384/how-to-fix-pch-file-missing-on-build/12325848#12325848)

# ios - iOS NSURL 到 NSString

> ID：13964722
> 
> 赞同：0
> 
> 时间：2012-12-20T03:10:57.087
> 
> 标签：ios, nsurl

我正在尝试从此文件中读取文本并将其显示在我的应用程序的标签中。我收到这段代码的错误消息。

```
NSURL *url = [NSURL URLWithString:@"http://www.funnynewsletter.tk/files/file.txt"];
NSString *content = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding];
label.text = content; 
```

我知道，这很简单。我刚开始学习iOS，我正在尝试。如果你能给我资源和想法，而不是完整的代码，那将不胜感激......我正在努力学习，而不仅仅是复制你的工作。谢谢大家！:)

错误信息：`No known class method for selector 'stringWithContentsOfUrl:encoding'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:24:24.597

这一行：

```
NSString *content = [NSString stringWithContentsOfURL:url 
                                             encoding:NSASCIIStringEncoding]; 
```

应该是这样的：

```
NSString *content = [NSString stringWithContentsOfURL:url 
                                             encoding:NSASCIIStringEncoding 
                                                error:nil]; 
```

如果您仍然遇到问题，则很可能是在网络上。

**更新 - 错误检查**

您可以检查以下错误：

```
NSError* error;
NSString *content = [NSString stringWithContentsOfURL:url 
                                             encoding:NSASCIIStringEncoding 
                                                error:&error];
if (!content) {
    if (error) {
       NSLog (@"error %@",error);
      //handle error
    }
else {
   //do something with content
} 
```

（*在 Maddy 的评论之后修复*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:25:53.647

错误消息告诉您 NSString 类没有该名称的方法。正确的方法是`stringWithContentsOfURL:encoding:error:`。我认为曾经有，`stringWithContentsOfURL:encoding:`但它已被弃用，然后被删除。如果你只是测试而不关心错误，你可以通过`nil`for `error:`。但是不要在任何严重的代码中这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:24:47.173

有时你只需要阅读规范。您缺少“错误：”参数。

```
NSString *content = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:&errorMsg]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T05:24:33.497

```
 NSURL *url = [NSURL URLWithString:@"http://www.funnynewsletter.tk/files/file.txt"];

NSError *error;
NSString *urlContent = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];

    if(error!=nil)
{ 

    NSLog(@"Error %@",error);

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T03:23:09.700

如果您想从 NSURL 获取字符串，`description`方法可以提供帮助。

```
NSURL *url = [NSURL URLWithString:@"http://www.funnynewsletter.tk/files/file.txt"];
label.text = url.description; 
```

# linker - n 处的成员不是 ELF 对象

> ID：13964726
> 
> 赞同：6
> 
> 时间：2012-12-20T03:11:31.780
> 
> 标签：linker, android-ndk, tesseract

我正在尝试为 Android 构建一个库（Tesseract OCR）。它似乎编译得很好，我得到了一堆静态库，但在链接阶段失败了。

命令是：

```
libtool: link: /opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-g++  -fPIC -DPIC -shared -nostdlib /opt/android-ndk-r8c/platforms/android-8/arch-arm/usr/lib/crtbegin_so.o  -Wl,--whole-archive ./.libs/libtesseract_api.a ../ccmain/.libs/libtesseract_main.a ../cube/.libs/libtesseract_cube.a ../neural_networks/runtime/.libs/libtesseract_neural.a ../textord/.libs/libtesseract_textord.a ../wordrec/.libs/libtesseract_wordrec.a ../classify/.libs/libtesseract_classify.a ../dict/.libs/libtesseract_dict.a ../ccstruct/.libs/libtesseract_ccstruct.a ../image/.libs/libtesseract_image.a ../cutil/.libs/libtesseract_cutil.a ../viewer/.libs/libtesseract_viewer.a ../ccutil/.libs/libtesseract_ccutil.a -Wl,--no-whole-archive  -Wl,-rpath -Wl,/Users/xxx/dev/libs/leptonica/current/android-arm/release/lib -Wl,-rpath -Wl,/Users/xxx/dev/libs/leptonica/current/android-arm/release/lib -L./ -L../ -L../api -L../ccutil -L../viewer -L../cutil -L../image -L../ccstruct -L../dict -L../classify -L../wordrec -L../neural_networks/runtime -L../textord -L../cube -L../ccmain -L/opt/android-ndk-r8c/platforms/android-8/arch-arm/usr/lib -L/Users/xxx/dev/libs/leptonica/current/android-arm/release/lib /Users/xxx/dev/libs/leptonica/current/android-arm/release/lib/liblept.so -lz -L/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/armv7-a -L/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6 -L/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc -L/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/lib -lstdc++ -lm -lc -ldl -lgcc /opt/android-ndk-r8c/platforms/android-8/arch-arm/usr/lib/crtend_so.o  -Os -march=armv7-a --sysroot /opt/android-ndk-r8c/platforms/android-8/arch-arm -mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -Wl,-rpath-link=/opt/android-ndk-r8c/platforms/android-8/arch-arm/usr/lib   -Wl,-soname -Wl,libtesseract.so.3 -o .libs/libtesseract.so.3.0.1 
```

输出如下：

```
/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./.libs/libtesseract_api.a: member at 8 is not an ELF object
/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./.libs/libtesseract_api.a: member at 96 is not an ELF object
/opt/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./.libs/libtesseract_api.a: member at 104400 is not an ELF object`
... 
```

据我所知，`libtesseract_api.a`相关文件是有效的。知道这里发生了什么吗？这不是我以前见过的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:48:15.573

检查您是否有正确的存档类型`nm`

```
.../arm-linux-androideabi-nm .libs/libtesseract_api.a 
```

您应该使用正确的格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-13T07:47:30.170

添加以下内容后`PATH`，链接成功：

```
$ANDROID_NDK/toolchain/bin 
```

# android - 哪个 Android 版本引入了 SpeechRecognizer 的 Audible Cue onReadyForSpeech？

> ID：13964727
> 
> 赞同：13
> 
> 时间：2012-12-20T03:11:35.960
> 
> 标签：android, speech-recognition

Android 2.x在[准备好语音](http://developer.android.com/reference/android/speech/RecognitionListener.html#onReadyForSpeech%28android.os.Bundle%29)输入时**不会**自动发出声音提示。

安卓 4.1 可以。

这些版本之间会发生什么？即这个很酷的功能是什么**时候引入的？**

*   安卓3.0？(Build.VERSION_CODES.HONEYCOMB_MR)
*   安卓3.1？(Build.VERSION_CODES.HONEYCOMB_MR1)
*   安卓3.2？(Build.VERSION_CODES.HONEYCOMB_MR2)
*   安卓4.0？（Build.VERSION_CODES.ICE_CREAM_SANDWICH）

我需要这个才能`Build.VERSION.SDK_INT`在运行时执行检查。

你知道有什么资料来源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:16:41.470

这可能是 Google Voice Search 的一项功能，但 Google Voice Search 是一个常规应用程序，因此在 Android 之外。

`onReadyForSpeech`是一个回调，最终用户应用程序（例如键盘应用程序）可以让语音识别器应用程序（例如 Google 语音搜索）执行一些代码。这两个应用程序都可以发出声音提示，但都不是核心 Android 的一部分。

可能相关： 在 API 级别 16 中添加了[void startRecording (MediaSyncEvent syncEvent) 。](http://developer.android.com/reference/android/media/AudioRecord.html#startRecording%28android.media.MediaSyncEvent%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T03:10:03.910

您所指的“准备讲话”双哔声不是 Android OS 的功能，而是[Google App](https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox&hl=en)的功能。

[这与 Kaarel 的答案非常接近，但语音搜索](https://play.google.com/store/apps/details?id=com.google.android.voicesearch)和[Google App](https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox&hl=en)之间的区别可能令人困惑。

更令人困惑的是，[Google App](https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox&hl=en)曾经被命名为[Google Search](https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox)，但没有弄错：相同的包名变成了`com.google.android.googlequicksearchbox`...。

我不知道究竟是什么时候“没有哔声谷歌搜索”变成了“酷的双哔声谷歌应用程序”，但我有限的观察表明`Google Search version 1.3.3 (Android 2.2.1)`没有哔声，而`Google App version 4.1.24 (Android 4.1.2)`有那些哔声。

截至今天 (2015-01-22)，`1.3.3.247963`Google 搜索版本是适用于 Android 2.2.1 设备的 Google Play 上的最新版本。

但是，Android 4.1.2 设备可以在 Google Play 中看到更高版本并下载并安装它：`4.1.24.1672412.arm`.

因此，这些哔声似乎***与***Android 版本有关。

顺便说一句，Google App 具有所谓的“ [OK Google](http://searchenginewatch.com/sew/news/2268726/ok-google-the-end-of-search-as-we-know-it#) ”功能。也许这就是引入那些（现在很有名的）哔哔声的原因。

“ [OK Google](http://en.wikipedia.org/wiki/Google_Search#Conversational_search_and_Hummingbird_update) ”于 2013 年 5 月在 Google I/O 大会上首次推出，但由于它可以从 Google Play 下载到 Android 4.1 设备（于 2012 年 7 月推出），因此不能假定直接链接到最新版本当时的版本。事实上，有关于如何在 Android 4.0 上安装 Google App 的说明，但我怀疑 Google 是否支持。因此，为了安全起见，我想说如果您在智能手机上启用了自动更新，那么首先引入“识别器哔”的 Android 版本是**4.1**。

# javascript - 切换页面时什么加快“setInterval”？

> ID：13964729
> 
> 赞同：2
> 
> 时间：2012-12-20T03:12:03.930
> 
> 标签：javascript

这是我的页面，这是一个测试移动元素的演示，但是在您更改页面后，回到这里，为什么 DIV 移动得更快？

我的CSS：

```
 #box1 {
        width: 900px;
        height: 50px;
        background-color: #000;
        position: relative;
    }

    #box2 {
        width: 50px;
        height: 50px;
        background-color: #a00;
        position: absolute;
    } 
```

我的 HTML：

```
<div id="box1">
    <div id="box2"></div>
</div> 
```

我的JS：

```
var box2 = document.getElementById("box2");
    var remove = setInterval(function () {
        box2.style.left = "0px";
        var move = setInterval(function () {
            var newLeft = Math.min(parseInt(box2.style.left) + 5, 850) + "px";
            box2.style.left = newLeft;
            if (newLeft == "850px") clearInterval(move)
        }, 20);
    }, 5000) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T03:22:20.467

的速度`setInterval`是不可信的。当标签不集中时，浏览器可能不会发射它，并且可能会比所需的更频繁地启动它。

该行为在当前的 HTML5 草案中被标准化[`WindowTimers`（](http://www.w3.org/TR/html5/webappapis.html#timers)这并不意味着它是这样实现的）。在那里你会找到注释：

> 此 API 不保证计时器将完全按计划运行。由于 CPU 负载、其他任务等导致的延迟是可以预料的。

而且，更明确：

> 9) 可选地，等待用户代理定义的时间长度。
> 
> > 注意：这旨在允许用户代理根据需要填充超时以优化设备的电源使用。例如，某些处理器具有低功耗模式，其中定时器的粒度会降低；在此类平台上，用户代理可以减慢计时器以适应此时间表，而不是要求处理器使用更精确的模式以及相关的更高功率使用。

您可能还想看看[`WindowAnimationTiming`草稿](http://www.w3.org/TR/animation-timing/)。

如果您确实在动画/时钟/等中使用`setInterval`/ ，请始终使用[对象](http://ecma-international.org/ecma-262/5.1/#sec-15.9)（例如 via ）测量实际经过的时间。`setTimeout`[`Date`](http://ecma-international.org/ecma-262/5.1/#sec-15.9)`Date.now()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T03:16:38.727

如果窗口没有聚焦，一些浏览器不会费心触发超时/间隔事件。当窗口重新获得焦点时，它会立即触发所有这些。这是一个性能决定（如果用户甚至不会注意到，为什么每毫秒触发一个事件？），据我所知，没有办法改变这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T03:40:57.777

Mozilla Firefox 和 Google Chrome 都会在选项卡处于非活动状态时限制时间间隔的滴答速度（来源： http: [//pivotallabs.com/users/mrushakoff/blog/articles/2035-chrome-and-firefox-throttle-settimeout- setinterval-in-inactive-tabs](http://pivotallabs.com/users/mrushakoff/blog/articles/2035-chrome-and-firefox-throttle-settimeout-setinterval-in-inactive-tabs) , [https://stackoverflow.com/a/6032591/1756941](https://stackoverflow.com/a/6032591/1756941) )

因此，正如[这个答案](https://stackoverflow.com/a/5927432/1756941)所建议的那样，捕获日期并根据刻度检查它，以验证它是否正常工作，否则补偿丢失的时间..

JS：

```
var tick = 20;
var newLeft=0;

var box2 = document.getElementById("box2");
var remove = setInterval(function() {
    box2.style.left = "0px";

 var now, before = new Date();
    var move = setInterval(function() {
        now = new Date();
        var elapsedTime = (now.getTime() - before.getTime());
        if (elapsedTime > tick) {
            console.log((Math.floor(elapsedTime / tick) * 5));
            newLeft = Math.min(parseInt(box2.style.left) + (Math.floor(elapsedTime / tick) * 5), 850) + "px";
        }
        else {
            newLeft = Math.min(parseInt(box2.style.left) + 5, 850) + "px";
        }
        box2.style.left = newLeft;
        before = new Date();
        if (newLeft == "850px"){clearInterval(move);}
    }, tick);

}, 5000);
​ 
```

JSFiddle：http: [//jsfiddle.net/3jY8h/1/](http://jsfiddle.net/3jY8h/1/)

# javascript - 没有其他html的angularjs换行过滤器

> ID：13964735
> 
> 赞同：88
> 
> 时间：2012-12-20T03:12:31.713
> 
> 标签：javascript, html, angularjs, sanitization

我正在尝试将换行符 ( `\n`) 转换为 html `br`。
根据[Google Group 中的讨论](https://groups.google.com/forum/?fromgroups=#!topic/angular/kRk9_udDZFc)，这就是我所得到的：

```
myApp.filter('newlines', function () {
    return function(text) {
        return text.replace(/\n/g, '<br/>');
    }
}); 
```

那里的讨论还建议在视图中使用以下内容：

```
{{ dataFromModel | newline | html }} 
```

这似乎使用了旧的`html`过滤器，而现在我们应该使用`ng-bind-html`属性。

* * *

无论如何，这会带来一个问题：我不希望将原始字符串 ( `dataFromModel`) 中的任何 HTML 呈现为 HTML；只有`br`'s。

例如，给定以下字符串：

> 虽然 7 > 5
> 我仍然不想要 html 和这里的东西......

我希望它输出：

```
While 7 &gt; 5<br>I still don't want html &amp; stuff in here... 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-07-31T20:50:50.230

也许您只能使用 html 来实现这一点，一种`<preformated text>`方式？它将避免使用过滤器或进行任何类型的处理。

您所要做的就是在具有此 CSS 的元素中显示文本：

```
<p style="white-space: pre;">{{ MyMultiLineText}}</p> 
```

这会将 \n 解析并显示为新行。对我很有用。

在这里，一个[jsFiddle 示例](http://jsfiddle.net/2uSKb/)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-20T19:39:57.490

我决定只使用 2 个过滤器，而不是弄乱新指令：

```
App.filter('newlines', function () {
    return function(text) {
        return text.replace(/\n/g, '<br/>');
    }
})
.filter('noHTML', function () {
    return function(text) {
        return text
                .replace(/&/g, '&amp;')
                .replace(/>/g, '&gt;')
                .replace(/</g, '&lt;');
    }
}); 
```

然后，在我看来，我将一个管道连接到另一个：

```
<span ng-bind-html-unsafe="dataFromModel | noHTML | newlines"></span> 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-11-06T02:11:28.350

一个更简单的方法是创建一个过滤器，将每个文本拆分`\n`为一个列表，然后使用 `ng-repeat.

过滤器：

```
App.filter('newlines', function() {
  return function(text) {
    return text.split(/\n/g);
  };
}); 
```

在html中：

```
<span ng-repeat="line in (text | newlines) track by $index">
    <p> {{line}}</p>
    <br>
</span> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-04-30T15:09:43.707

如果您不想用无尽的字符串破坏布局，请使用前行：

```
<p style="white-space: pre-line;">{{ MyMultiLineText}}</p> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-20T05:24:15.087

我不知道 Angular 是否有剥离 html 的服务，但似乎您需要在传递`newlines`自定义过滤器之前删除 html。我这样做的方式是通过一个自定义`no-html`指令，该指令将传递一个范围属性和过滤器的名称，以在删除`html`

```
<div no-html="data" post-filter="newlines"></div> 
```

这是实现

```
app.directive('noHtml', function($filter){
  return function(scope, element, attrs){
    var html = scope[attrs.noHtml];
    var text = angular.element("<div>").html(html).text();

    // post filter
    var filter = attrs.postFilter;
    var result = $filter(filter)(text);

    // apending html
    element.html(result);
  };
}); 
```

重要的一点是`text`变量。在这里，我创建了一个中间 DOM 元素并使用该方法将其附加到 HTML 中`html`，然后使用该方法仅检索文本`text`。这两种方法都由[Angular 的精简版 jQuery](http://docs.angularjs.org/api/angular.element)提供。

以下部分是应用`newline`过滤器，这是使用`$filter`服务完成的。

在此处检查 plunker：http://plnkr.co/edit/SEtHH5eUgFEtC92Czq7T?p= [preview](http://plnkr.co/edit/SEtHH5eUgFEtC92Czq7T?p=preview)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-20T17:04:11.493

当前使用 ng-bind-html 对过滤器的更新是：

```
myApp.filter('newlines', function () {
  return function(text) {
    return text.replace(/(&#13;)?&#10;/g, '<br/>');
  }
}); 
```

并且不再需要 noHTML 过滤器。

空白解决方案的浏览器支持较低： [http ://caniuse.com/#search=tab-size](http://caniuse.com/#search=tab-size)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-26T10:41:56.307

在这方面有点晚了，但我建议对检查未定义/空字符串进行一些小改进。

就像是：

```
.filter('newlines', function () {
    return function(text) {
        return (text) ? text.replace(/(&#13;)?&#10;/g, '<br/>') : text;
    };
}) 
```

或者（更紧一点）

```
.filter('newlines', function () {
    return function(text) {
        return (text instanceof String || typeof text === "string") ? text.replace(/(&#13;)?&#10;/g, '<br/>') : text;
    };
}) 
```

# xcode - 最新 SDK 的 SDKROOT 路径

> ID：13964742
> 
> 赞同：24
> 
> 时间：2012-12-20T03:13:54.230
> 
> 标签：xcode, macos, xcode4.5, ld

我正在使用 Xcode 构建旧代码并指定`SDKROOT=/Developer/SDKs/MacOSX"${HOST_VERSION}".sdk/`

我想为系统上预装（？）的最新 SDK 指定 SDKROOT。例如，我`10.8`已经使用了，我想`SDKROOT`用 -syslibroot 指定，但`/Developer/SDKs/`. 如果我应该完全忽略 syslibroot`SDK_VERSION == HOST_VERSION`吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-20T08:38:10.423

较新的 Xcode 版本在 Xcode.app 包中包含 SDK，例如

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk 
```

您可以通过运行获得已安装 SDK 的列表及其路径

```
xcodebuild -sdk -version 
```

从命令行。

如果您已经安装了“命令行工具”（Xcode Preferences -> 下载 -> 组件），那么在没有“-syslibroot”的情况下进行编译应该等同于针对最新的 SDK 进行编译。

请参阅“命令行工具”包的帮助：

> 下载此软件包会将核心命令行工具和系统头文件的副本安装到系统文件夹中，包括 LLVM 编译器、链接器和构建工具。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-25T16:52:02.900

如另一个[stackoverflow问题](https://stackoverflow.com/questions/18741675/how-to-get-the-path-of-latest-sdk-available-on-mac)所述：

```
xcrun --sdk macosx --show-sdk-path 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-30T09:52:57.823

有了`xcodebuild -version -sdk macosx10.7 Path`您可以获得 OS X 10.7 SDK 的路径。`${SDK_VERSION}`您可以`${HOST_VERSION}`根据需要替换 10.7 。我不知道获取 OS X 版本的命令，该命令可用于获取与当前运行的 OS X 版本匹配的 SDK 的路径。

注意：要`xcodebuild`正常工作，用户必须已`xcode-select`正确配置，例如`xcode-select -switch /Application/Xcode.app`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-14T13:52:23.833

CommandLineTools 已过时，重新安装命令行工具解决了这个问题：

```
xcode-select --install 
```

# php - 在这种情况下如何避免重复相同的代码

> ID：13964745
> 
> 赞同：3
> 
> 时间：2012-12-20T03:14:35.957
> 
> 标签：php

在下面的代码中有一大段重复的代码。这可以用另一种方式完成，这样代码就不会重复。无论我尝试什么，我都会以同样的方式结束。代码在下面，但在生产版本中要多得多。这东西做国家定位。

```
if ($GL)
{
 echo 'Managed to find your location';
}else{
 echo "Could not identify GL. Please select from the list below.";
} 
```

这是整个事情（精简）。

```
$GL = false; //GL is detected using ip to location, and returns boolean
$location = 'UK';//Read from a cookie.

if(isset($location))
{
    echo 'We found a cookie with your location<br />';

    if(array_key_exists($location,$countries))
    {
        echo 'We found a country in the array. Carrying on<br />';
    }else
    {
        echo 'Did not find a country in the array. Looking for GL';
        if ($GL)
        {
            echo 'Managed to find your location. Carrying on';
        }else{
            echo "Could not identify GL. Please select from the list below.";
            }
    }
}
else
{
    echo 'Did not find a location cookie<br />';

    if ($GL)
    {
        echo 'Managed to find your location.Carrying on.';
    }else{
        echo "Could not identify GL. Please select from the list below.";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:19:45.660

你可以做几个简单的解决方案。如：

1）把它放在一个函数中：

```
function validGL($GL)
{
    if ($GL)
    {
        echo 'Managed to find your location.Carrying on.';
    }
    else
    {
        echo "Could not identify GL. Please select from the list below.";
    }
} 
```

2) 存储一个布尔值以确定是否找到了有效位置：

```
$GL = false; //GL is detected using ip to location, and returns boolean
$location = 'UK';//Read from a cookie.

$locationFound = false;

if(isset($location))
{
    echo 'We found a cookie with your location<br />';

    if(array_key_exists($location,$countries))
    {
        echo 'We found a country in the array. Carrying on<br />';

        $locationFound = true;
    }
    else
    {
        echo 'Did not find a country in the array. Looking for GL';
    }
}
else
{
    echo 'Did not find a location cookie<br />';
}

if (!$locationFound)
{
    if ($GL)
    {
        $GL_msg = 'Managed to find your location. Carrying on';
    }
    else
    {
        $GL_msg = "Could not identify GL. Please select from the list below.";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:51:19.653

你可以这样改写它：

1.  如果位置通过并在有效的国家/地区列表中找到，请使用它。

2.  如果没有，如果找到 GL，请使用它。

3.  如果所有其他方法都失败，则显示列表。

在代码中：

```
if (isset($location) && array_key_exists($location,$countries)) {
    echo 'We found a country in the array. Carrying on<br />';
} elseif ($GL) {
    echo 'Managed to find your location. Carrying on';
} else {
    echo "Could not identify GL. Please select from the list below.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:16:18.720

您可以将其设为函数，然后使用 GL 变量调用该函数。这样一来，您就不必一遍又一遍地重复相同的内容。

# android - 无填充的 Android 按钮

> ID：13964748
> 
> 赞同：2
> 
> 时间：2012-12-20T03:14:46.410
> 
> 标签：android, button, actionbarsherlock, android-styles

我正在尝试使用开源的天线吊舱应用程序作为构建我的 android 应用程序的参考。我正在使用 ActionBarSherlock 并想在我的布局底部创建一个按钮，该按钮从一侧延伸到另一侧，没有填充。它应该如下所示：

![在此处输入图像描述](../Images/383dca0e167ec21a63527b410c1a893a.png)

我的 Styles.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Theme.Application.Light" parent="@style/Theme.Sherlock.Light">
        <item name="attr/non_transparent_background">@color/white</item>
        <item name="attr/borderless_button">@drawable/borderless_button</item>   
    </style>

</resources> 
```

borderless_button.xml 看起来像这样：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"><shape android:shape="rectangle">
        <solid android:color="@color/selection_background_color_light" />
        </shape></item>
    <item android:state_focused="true"><shape android:shape="rectangle">          
        <solid android:color="@color/selection_background_color_light" />
        </shape></item>
    <item><shape android:shape="rectangle">
        <solid android:color="@android:color/transparent" />
    </shape></item>
</selector> 
```

attrs.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <attr name="borderless_button" format="reference" />
    <!-- Used in itemdescription -->
    <attr name="non_transparent_background" format="reference" />

</resources> 
```

我的清单有这个：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Application.Light" >...</> 
```

我的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/footer"
        style="@android:style/ButtonBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/butConfirm"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Search" />

    </LinearLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/queryString"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_margin="8dp"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:text="What would you like to search for?" />

        <EditText
            android:id="@+id/etxtQueryString"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/queryString"
            android:layout_margin="8dp"
            android:hint="Enter Query"
            android:inputType="textUri" />

    </RelativeLayout>

</RelativeLayout> 
```

它最终的样子：

![在此处输入图像描述](../Images/18cebeea4aa39dc157e837169ea5996c.png)

我只需要一个按钮，但仍希望它覆盖整个屏幕宽度。

这是我用作指南的源代码的链接。 [https://github.com/danieloeh/AntennaPod](https://github.com/danieloeh/AntennaPod)

任何帮助都是极好的！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T19:53:39.740

```
<Button
        android:id="@+id/butConfirm"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Search"
        android:background="@null"/> 
```

这应该可以解决问题！

# sql - sql创建表检查日期

> ID：13964758
> 
> 赞同：0
> 
> 时间：2012-12-20T03:15:33.447
> 
> 标签：sql, date

在创建表时，我需要为当前日期添加一个检查语句，应该创建日期单元格。所以例如

```
create table own_departments
(
id number(4) primary key,
name varchar2(30),
num_of_emps number(4) default '0',
est_date date,
check(est_date < sysdate)
); 
```

此检查给出错误。

有谁知道如何检查日期格式？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:09:53.340

如果您使用的是 SQL Server / Oracle / MS Access，那么它应该是这样的：

```
create table own_departments
(
id number(4) primary key,
name varchar2(30),
num_of_emps number(4) default '0',
**est_date date check(est_date < sysdate)**
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:49:57.213

如果您使用的是 SQL Server，那么您将需要创建一个表约束...

```
ALTER TABLE _departments WITH CHECK ADD  CONSTRAINT CK_DateGreaterThan CHECK  (([est_date]>YOUR_DATE))
GO

ALTER TABLE _departments CHECK CONSTRAINT CK_DateGreaterThan 
GO 
```

# c# - 有什么想法可以缩短此代码吗？

> ID：13964760
> 
> 赞同：2
> 
> 时间：2012-12-20T03:15:46.170
> 
> 标签：c#, mysql, select

```
string menuRecipe = "SELECT * FROM recipelist WHERE menu_ID = '" + menuID + "'";
MySqlCommand recipeCmd = new MySqlCommand(menuRecipe, db.mycon);
MySqlDataReader recipeDr = recipeCmd.ExecuteReader();
string[] info = new string[8];
while (recipeDr.Read())
{
    info[1] = (recipeDr["recipe_ID"].ToString());
    info[2] = (recipeDr["stock_ID"].ToString());
    info[4] = (recipeDr["recipe_quantity"].ToString());
    string stockName = "SELECT stock_name FROM stocksdb WHERE stock_ID = '" + info[2] + "'";
    cmd = new MySqlCommand(stockName, db.mycon);
    MySqlDataReader nameDr = cmd.ExecuteReader();
    while (nameDr.Read())
    {
        info[3] = (nameDr["stock_name"].ToString());
    }
    this.recipeList.Items.Add(new ListViewItem(new string[] { info[1], info[2], info[3], info[4] }));
} 
```

我主要想减少必须使用多个 SQL 命令字符串，尽管我不知道如何以及如何将它们隔离到各自的位置，因为有些可能会混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:22:30.120

您可以将查询更改为

```
SELECT r.*, s.stock_name FROM recipelist r
LEFT OUTER JOIN stocksdb s ON r.stock_ID = s.stock_ID
WHERE menu_ID = @parameter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:19:03.873

您可以在初始查询中执行 INNER JOIN 以将 stockdb 表链接到 stock_ID 上的配方列表表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T03:37:27.587

我会将您的代码更改为以下内容：

```
string connect = "...";
using (var cn = new SqlConnection(connect))
{
    cn.Open();

    string sql = @"
SELECT r.*, s.stock_name 
FROM recipelist r
LEFT OUTER JOIN stocksdb s ON r.stock_ID = s.stock_ID
WHERE menu_ID = @MenuID";
    var cmd = new SqlCommand(sql, cn);
    cmd.Parameters.Add("@MenuID", SqlDbType.Int).Value = menuID;
    var dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        this.recipeList.Items.Add(new ListViewItem(new string[] { 
            dr["recipe_ID"].ToString(), 
            dr["stock_ID"].ToString(), 
            dr["stock_name"].ToString(), 
            dr["recipe_quantity"].ToString()
        }));
    }
} 
```

# javascript - 在 JavaScript 中从字符串生成随机数

> ID：13964762
> 
> 赞同：3
> 
> 时间：2012-12-20T03:15:57.673
> 
> 标签：javascript, random, ab-testing

我想做一个客户端 A/B 测试库。

每个用户都有一个存储在 cookie 中的随机数。每个测试都有一个测试名称和一组选项。我需要一个在给定用户随机数、测试名称和选项的情况下选择随机选项的函数。当然，该函数必须始终为给定的一组输入返回相同的选项。

如何在 JavaScript 中编写此函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:15:57.673

我当前的解决方案使用[CryptoJS 库的 MD5](https://code.google.com/p/crypto-js/)散列函数来生成随机数：

```
// seed is the user's random number

choose_option = function(seed, test_name, options) {
  word = CryptoJS.MD5("" + seed + test_name).words[0]; // take first 32-bit word
  i = Math.abs(word % options.length);
  return options[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T07:50:46.113

也许稍晚一点，有点夸张，因为有问题的 lib 有很多你可能不会使用的功能，但我的项目中总是包含这个，所以让我将我的解决方案公开给你遇到的同样的问题。这个库可以用种子（[chancejs#seed](http://chancejs.com/#seed)）初始化，对于创建可重复的结果非常有用：

```
const Chance = require('chance');
c1 = Chance('email@gmail.com', 'maybe a uuid here');
c1.integer();
c1.natural({min:1000,max:9999});

c2 = Chance('foo-baz-bar');
c2.string();
c2.word();
... 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:25:09.747

```
var availNum= [1, 4, 5, 6, 7, 8, 12];
//@var count number of random num you want 
function createRandomData(count) {
    var data = [],
    for (var i = 0; i < count; i++) {
        var random = availNum[Math.floor(Math.random() * availNum.length)],

        data.push({
          random:random 
        });
    }
    return data;
} 
```

# lua - Lua：如何避免循环需求

> ID：13964764
> 
> 赞同：12
> 
> 时间：2012-12-20T03:16:02.760
> 
> 标签：lua, circular-dependency

# 问题

尝试执行循环要求时，如何避免来自 Lua 5.1 的以下错误？

```
$ lua main.lua 
lua: ./bar.lua:1: loop or previous error loading module 'foo'
stack traceback:
    [C]: in function 'require'
    ./bar.lua:1: in main chunk
    [C]: in function 'require'
    ./foo.lua:1: in main chunk
    [C]: in function 'require'
    main.lua:1: in main chunk
    [C]: ? 
```

# 文件结构

**主程序.lua**

```
require "foo"
require "bar"
print (Foo.getName())
print (Bar.getName()) 
```

**foo.lua**

```
require 'bar'
Foo = {}
Foo.name = 'foo'

function Foo:getName()
    return Foo.name .. Bar.name
end 
```

**酒吧.lua**

```
require 'foo'
Bar = {}
Bar.name = 'bar'

function Bar:getName()
    return Bar.name .. Foo.name
end 
```

# 预期产出

```
$ lua main.lua 
foobar
barfoo 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T10:18:31.893

解决此问题的另一种方法是更改​​代码结构并将“相互”功能提取到第三个模块中，这两个模块都`Foo`需要`Bar`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-20T03:16:02.760

# 解决方案

**主程序.lua**

```
Foo = Foo or require "foo"
Bar = Bar or require "bar"
print (Foo.getName())
print (Bar.getName()) 
```

**foo.lua**

```
Foo = {}
Bar = Bar or require "bar"
Foo.name = 'foo'

function Foo:getName()
    return Foo.name .. Bar.name
end

return Foo 
```

**酒吧.lua**

```
Bar = {}
Foo = Foo or require "foo"
Bar.name = 'bar'

function Bar:getName()
    return Bar.name .. Foo.name
end

return Bar 
```

# 解释

由于您正在设置全局变量，因此您可以在尝试另一个要求之前检查文件是否已经被要求（又名；全局已定义）：

```
Bar = Bar or require "bar" 
```

然后您`bar.lua`必须返回 Bar 的定义；

```
Bar = {}
-- ...
return Bar 
```

这不会完全解决`bar.lua`预期`Foo`定义的问题。要解决此问题，您可以定义一个具有相同名称的虚拟变量：

```
Foo = {}
Bar = Bar or require "bar" 
```

这只是可能的，因为您在`Foo`调用函数时推迟了 to 的使用。如果你想`Foo.name`在 的范围内调用`bar.lua`，你最终会遇到同样的循环依赖问题。

# java - java: rtsp stream to file using vlcj

> ID：13964770
> 
> 赞同：2
> 
> 时间：2012-12-20T03:16:27.420
> 
> 标签：java, file, rtsp, rtp, vlcj

I am trying to store a rtsp stream to file using vlcj.

I've done a couple of tutorials, looked at some of their test projects but haven't been able to do this.

Any ideas? Thanks in advance!

* * *

**EDIT**

Found an [An example of transcoding and saving video from a capture device.](https://github.com/caprica/vlcj/blob/master/src/test/java/uk/co/caprica/vlcj/test/capture/CaptureTest.java) Trying to get it to work. Looking for some documentation on the "options" part in `mediaPlayer.playMedia(mrl, options);`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:41:11.930

Someone answered me on the video lan forums, [check it out](http://forum.videolan.org/viewtopic.php?f=32&t=107028).

My relevant code is below, where the most important part is the additional option for the vlc media player `":file{dst=C:/Users/the man/yahoo.mp4}"`.

```
 mFactory = new MediaPlayerFactory();
    mPlayer = mFactory.newHeadlessMediaPlayer();

    String mrl = "rtsp://@" + addressStr + ":" + mPhoneRTSPPort;

    String options = ":sout=#transcode{vcodec=h264,venc=x264{cfr=16},scale=1,acodec=mp4a,ab=160,channels=2,samplerate=44100}"
            + ":file{dst=C:/Users/the man/yahoo.mp4}";

    mPlayer.playMedia(mrl, options); 
```

# javascript - 有一个函数在函数中更改 DOM

> ID：13964778
> 
> 赞同：0
> 
> 时间：2012-12-20T03:17:13.533
> 
> 标签：javascript, html, dom, jquery

我正在使用在 jquery 单击事件期间执行两个步骤的应用程序。1\. 使用 sprite 和颜色属性更改元素的 CSS 属性 2\. 运行迭代扫描页面的函数。

是否可以让页面进行 css 更改并将其显示在浏览器中，然后运行迭代？

通过向元素添加类和删除类来进行 css 更改。

```
onBtn.click(function(event){
    if(clicked['mon'] == 0){
        monBtn.attr("class", "active");
        clicked['mon'] = 1;
        dow['mon'] = 1;
    }
    else {
        monBtn.removeClass("active");
        clicked['mon'] = 0;
        dow['mon'] = 0;
    }
        checkIfButtonsAreClicked();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:22:57.450

如果您在运行其他代码之前正在寻找要更新的屏幕，您可以将代码设置为在 0 毫秒内触发：

```
makeCSSChanges();
setTimeout(function () {
    // The browser will only run this callback once it's taken a breath and
    // done its usual behind-the-scenes stuff.
    scanThePage();
}, 0); 
```

当超时设置为 0 毫秒时，大多数浏览器将执行其通常的行为（重绘页面、执行其业务等），*然后*处理预定事件。

但是，在大多数情况下，延迟不会引起足够的重视。如果延迟*很*明显，那么我们正在接近也可能滞后于整个浏览器的那种延迟。小心。

# excel - 在模块中调用 UserForm_Initialize()

> ID：13964780
> 
> 赞同：6
> 
> 时间：2012-12-20T03:17:28.207
> 
> 标签：excel, vba, module, userform

如何调用`UserForm_Initialize()`a`Module`而不是 UserForm 代码对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T03:29:06.777

从一个模块：

```
UserFormName.UserForm_Initialize 
```

只要确保在您的用户表单中，您像这样更新子：

`Public Sub UserForm_Initialize()`因此可以从表单外部调用它。

或者，如果尚未加载用户表单：

`UserFormName.Show`最终会调用`UserForm_Initialize`，因为它会加载表单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T06:06:25.140

恕我直言，**UserForm_Initialize 方法应该保持私有**，因为它是UserForm**的 Initialize 事件**的事件处理程序。

**当创建用户窗体的新实例**时调用此事件处理程序。在这个偶数处理程序中，您可以初始化 UserForm1 类的私有成员。

*例子：*

**标准模块代码：**

```
Option Explicit

Public Sub Main()
  Dim myUserForm As UserForm1

  Set myUserForm = New UserForm1
  myUserForm.Show

End Sub 
```

**用户表单代码：**

```
Option Explicit

Private m_initializationDate As Date

Private Sub UserForm_Initialize()
  m_initializationDate = VBA.DateTime.Date
  MsgBox "Hi from UserForm_Initialize event handler.", vbInformation
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T07:41:15.990

解决方案 经过这么长时间，我设法解决了这个问题。

在模块中：UserForms(Name).Userform_Initialize

此方法最适合动态初始化当前用户窗体

# c++ - open("dev/null",O_APPEND) 的返回值可以表示打开的文件太多？

> ID：13964782
> 
> 赞同：1
> 
> 时间：2012-12-20T03:17:46.450
> 
> 标签：c++, linux, networking, boost

我看不懂下面的代码。当reservedFd_ == -2时，表示接受了两个多客户端，为什么？非常感谢。

```
// In one function.
...
...
reservedFd_ = ::open("/dev/null", O_APPEND);
if (-1 == reservedFd_)
{
    LOG_DEBUG("Failed to open reserved file!, errno: %d", errno);
}

...
...
...
----------------------------------------------------------------------
// then in other function we accept a new client socket
void TCPServer::HandleAccept( const boost::system::error_code& _err )
{
    if (!_err)
    {
            // too many clients accepted? why?
        if (-2 == reservedFd_)
        {
            boost::system::error_code ignored_ec;
            session_->GetSocket().close(ignored_ec);
        }
        else
        {
        ...
        }

    }

...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:22:56.767

`open(2)`返回一个新的文件描述符，如果发生错误，则返回 -1。`errno`会告诉你失败的具体原因。如果打开的文件描述符太多，那么您应该获取 EMFILE 或 ENFILE。用于`strerror(3)`获取可读的错误消息。

```
LOG_DEBUG("Failed to open reserved file: %s", strerror(errno)); 
```

`open(2)`永远不应该返回-2。那将是违反 POSIX.1 规范的未记录返回码。这将导致世界上大量程序出现问题，这些程序没有预料到。

# html - 让 UL 边框仅环绕文本

> ID：13964783
> 
> 赞同：0
> 
> 时间：2012-12-20T03:17:50.820
> 
> 标签：html, css, html-lists, block

我有一个`UL`用于样式菜单的。不幸的是，当我尝试添加边界时，它会跨越整个屏幕，因为它们是`li`元素（并且是`display: block`）。我也不想为元素定义固定宽度，而是希望宽度是文本所需的宽度。

JsFiddle：http: [//jsfiddle.net/5xu6t/](http://jsfiddle.net/5xu6t/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:23:21.693

尝试：

```
<li><span>Test</span></li>

span{
    border: solid 1px red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:24:16.967

需要在您的 html 中添加额外的标签，但它似乎可以满足您的需求。

```
<li><span>Test</span></li> 
```

并且对 css 也有一点影响。

[http://jsfiddle.net/BVYM7/](http://jsfiddle.net/BVYM7/)

# linux - 使用 CMU 的 Pocketsphinx 和一小部分单词

> ID：13964784
> 
> 赞同：2
> 
> 时间：2012-12-20T03:18:09.050
> 
> 标签：linux, performance, speech-recognition

我想使用 CMU 袖珍狮身人面像来识别一小组单词。我为他们创建了一个语料库并在这里创建了模型文件 - [http://www.speech.cs.cmu.edu/tools/lmtool.html](http://www.speech.cs.cmu.edu/tools/lmtool.html)。

现在，当我在我的 12 核 Linux 机器上使用此模型运行 pocketsphinx_continuous 可执行文件时，识别每个单词大约需要 5 秒。

1.  这个库通常这么慢还是我做错了什么？
2.  控制台输出显示它仍在搜索和评估大量单词，因为我的模型大小只有 12 个单词。
3.  是否有任何其他轻量级且易于使用的库可以用于这个简单的任务，即在大约 12-15 个单词之间进行区分。

# ant - 为什么 ant 在错误的目录中寻找 tools.jar？

> ID：13964785
> 
> 赞同：11
> 
> 时间：2012-12-20T03:18:23.303
> 
> 标签：ant, java

我正在尝试执行“ant -version”，我得到了

```
C:\Users\owner>ant -version
Unable to locate tools.jar. Expected to find it in C:\Program Files\Java\jre7\lib\tools.jar
Apache Ant(TM) version 1.8.4 compiled on May 22 2012 
```

我检查了所有环境变量，但找不到对`C:\Program Files\Java\jre7`

我在和安装了 JDK 和`C:\Program Files (x86)\Java\jre7`JRE`C:\Program Files (x86)\Java\jdk1.7.0_10`

我也有`C:\Program Files\Java\jre7`东西`C:\Program Files\Java\jdk1.7.0_10`

谁能告诉我为什么 ant 在错误的目录中查找？

我在stackoverflow上看到了很多其他问题，但没有一个能解决我的问题。

%path% 的输出是

```
C:\Users\owner>echo %path%
%CommonProgramFiles%\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Window
s;C:\Windows\System32\Wbem;C:\Program Files (x86)\CyberLink\Power2Go;C:\Program
Files (x86)\ATI Technologies\ATI.ACE\Core-Static;c:\Program Files (x86)\Microsof
t SQL Server\90\Tools\binn\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Window
s\System32\WindowsPowerShell\v1.0\;C:\Program Files\Java\jdk1.6.0_24\bin;C:\Prog
ram Files\TortoiseSVN\bin;C:\Program Files (x86)\Java\jdk1.7.0_10;C:\Program Fil
es (x86)\Android\android-sdk\tools\apache-ant-1.8.4\bin;C:\Program Files (x86)\A
ndroid\android-sdk\platform-tools\;C:\Program Files (x86)\Android\android-sdk\to
ols\;C:\Program Files\Common Files\Microsoft Shared\Windows Live

C:\Users\owner>echo %JAVA_HOME%
%ProgramFiles(x86)%\Java\jdk1.7.0_10 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T03:29:14.180

Ant 确实（不幸的是）依赖于`JAVA_HOME`系统属性。您需要确保此属性指向有效的 JDK 安装（而不是 JRE）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T03:38:14.840

我才知道那是什么

将 %JAVA_HOME% 从更改`%ProgramFiles(x86)%\Java\jdk1.7.0_10`为`C:\Program Files (x86)\Java\jdk1.7.0_10`修复它。

# android - “无法实例化片段”

> ID：13964796
> 
> 赞同：0
> 
> 时间：2012-12-20T03:20:12.430
> 
> 标签：android, android-fragments, admob

在下面的错误报告中，它说它找不到片段“com.android.myproject.ad”——这让我很困惑，因为项目中没有“广告”类或对象。造成这种情况的唯一原因可能是 AdMob 库/SDK。

有其他人在 AdMob 中看到过这种情况吗？我检查了我正在使用的 AdMob SDK 的版本，它是最新的 (rev. 8)

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.myproject/com.android.myproject.ActivityMain}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.android.myproject.ad: make sure class name exists, is public, and has an empty constructor that is public
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2753)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
at android.app.ActivityThread.access$2500(ActivityThread.java:129)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2117)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4717)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.android.myproject.ad: make sure class name exists, is public, and has an empty constructor that is public
at android.support.v4.app.Fragment.instantiate(Unknown Source)
at android.support.v4.app.FragmentState.instantiate(Unknown Source)
at android.support.v4.app.FragmentManagerImpl.restoreAllState(Unknown Source)
at android.support.v4.app.FragmentActivity.onCreate(Unknown Source)
at com.android.myproject.ActivityMain.onCreate(Unknown Source)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
... 11 more
Caused by: java.lang.InstantiationException: com.android.myproject.ad
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1429) 
```

AdMob 横幅通过 XML 布局可见：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

    <LinearLayout
    android:id="@+id/main_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

        <!-- widgets like buttons and stuff -->

    </LinearLayout>

    <RelativeLayout
    android:id="@+id/bannersLayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads">

        <com.google.ads.AdView
        android:id="@+id/adViewBanner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        ads:adUnitId="@string/admob_id"
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"
        android:layout_alignParentBottom="true"/>

    </RelativeLayout>

</LinearLayout> 
```

为了保护我的应用免受这个讨厌的问题的影响，有没有更好的方法来展示 AdMob 广告（如果 AdMob 甚至是问题）。

# tridion - Tridion 2011 SP1 GA - 页面已成功发布，但队列卡在“等待部署”中

> ID：13964799
> 
> 赞同：6
> 
> 时间：2012-12-20T03:20:38.460
> 
> 标签：tridion

在 Tridion 2011 SP1 GA 中，我经常在随机时间收到这个奇怪的错误。

发布页面，页面成功写入文件系统，但在发布队列中会卡在“等待部署”

有一天它会成功，而下一天它会卡住。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:35:15.010

这可能是因为您的传输服务已停止轮询部署程序，因为传输服务配置文件中配置的轮询间隔/最大轮询时间已达到其限制。假设是这种情况，Deployer 继续部署文件，但 Transport Service 放弃了检查。但是，我希望看到状态最终报告在发布队列中失败。

目前尚不清楚您使用的是 SDL Tridion 2011 的 GA 还是 SP1。有许多修补程序将有助于解决 GA 和 HR1 的这些问题，所有这些都捆绑到 SP1 中。具体来说，这些解决了与在部署程序中的某种（非灾难性）故障后返回传输服务相关的一些问题，因为它在获得大量项目队列或要处理的特别大的事务后。我强烈建议您在尝试通过配置调整行为之前安装最新的补丁。

如果您已经应用了所有补丁，请仔细检查您是否已将它们正确应用（复制所有新 jar 等）到 CD 端（部署程序和代理等）以及 CM 端。

# c# - 微软网站上的应用内购买教程的错误

> ID：13964803
> 
> 赞同：1
> 
> 时间：2012-12-20T03:21:56.390
> 
> 标签：c#, windows-8, microsoft-metro

我尝试为 Metro 应用实施应用内购买。我在这里按照教程进行操作。

[用于应用内购买的 C# 代码](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

C#代码是

```
function AppInit()
{
    // some app initialization functions 

    // Get the license info
    // The next line is commented out for testing.
    // licenseInformation = CurrentApp.LicenseInformation;

    // The next line is commented out for production/release.       
    licenseInformation = CurrentAppSimulator.LicenseInformation;

    // other app initialization functions
} 
```

但是，C# 中没有`function`关键字。这是错误吗？如果是这样，正确的代码假设是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:11:18.677

该教程似乎错误地显示了代码的 javascript 版本。我在 App 类的 OnLaunched() 函数中有我的许可证初始化代码：

```
 protected override async void OnLaunched(LaunchActivatedEventArgs args)
    {
        Frame rootFrame = Window.Current.Content as Frame;

        // Do not repeat app initialization when the Window already has content,
        // just ensure that the window is active

        if (rootFrame == null)
        {
#if DEBUG
            licenseInformation = CurrentAppSimulator.LicenseInformation;
#else
            licenseInformation = CurrentApp.LicenseInformation;
#endif

            // other init here...
        }
    } 
```

# linux - 如何阻止一个网站，使其无法轻易解除？

> ID：13964805
> 
> 赞同：2
> 
> 时间：2012-12-20T03:22:11.670
> 
> 标签：linux, macos

我发现互联网对我来说是一个巨大的时间槽。我阻止对我完全无用的网站的努力是徒劳的，原因很简单，如果我足够无聊，我会绕过阻止。

我能想到的就是使用主机文件和文件监视器来确保每次编辑它时都有一个环回。

注意：我运行 Linux 和 Mac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:28:52.387

[StayFocusd](https://chrome.google.com/webstore/detail/stayfocusd/laankejkbhbdhmipfmgcngdelahlfoji?hl=en)是 Google Chrome 的生产力扩展程序，可通过限制您在浪费时间的网站上花费的时间来帮助您专注于工作。一旦您分配的时间用完，您被阻止的网站将在一天的剩余时间内无法访问。

它是高度可配置的，允许您阻止或允许整个站点、特定子域、特定路径、特定页面，甚至特定页内内容（视频、游戏、图像、表单等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:25:13.287

假设您有一个允许它的固件，您可以在路由器上阻止该网站。你可以为路由器设置一个长的、不容易输入的密码，然后它会（希望）如此不方便，以至于你无聊时不会费心去改变它。另一方面，你不能去这些网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:26:48.003

尝试创建一个 crontab 任务，每隔几分钟检查和更新主机文件。您可以混淆作业和脚本，以使其更耗时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T03:29:09.197

查看：[https ://www.rescuetime.com/](https://www.rescuetime.com/)

据说他们的产品就是为此目的而设计的。

# javascript - 为什么这些 JavaScript 切换不起作用？

> ID：13964808
> 
> 赞同：-4
> 
> 时间：2012-12-20T03:22:30.010
> 
> 标签：javascript, jquery

[http://kaytee.karmathemes.com/shortcodes/fullwidth-columns/](http://kaytee.karmathemes.com/shortcodes/fullwidth-columns/)

注意页面上的切换，点击它们不会产生动作，有一天它们刚刚停止工作，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:29:47.613

`onload="setTheDivStyle()"`显然没有定义。

也`jSwing`没有定义，所以我假设没有加载 jQuery 插件。

# ios - initWithRootViewController 和 pushViewController (UINavigationController)

> ID：13964818
> 
> 赞同：0
> 
> 时间：2012-12-20T03:23:37.327
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我有一个`UINavigationController`以我自己`UIViewController`为根的初始化。我注意到它没有调整它的视图大小以适应导航视图控制器的范围。它把它往下推。的文档`pushViewController:animated:`说它会自动调整视图的大小，但对于`initWithRootViewController:`. 我需要做什么才能让它自动调整大小以适应？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:29:15.560

您能否分享您获得的图像，显​​示您的视图被向下推。

根据导航控制器，由于导航控制器的导航栏，您的视图将在屏幕上向下推约 44 像素。

在 xib 中设置 view 属性以在屏幕上附加导航栏，以便在通过导航控制器推送视图时可以检查视图。

# javascript - 我可以为 jQuery 提供默认的“上下文”吗？

> ID：13964827
> 
> 赞同：4
> 
> 时间：2012-12-20T03:24:58.077
> 
> 标签：javascript, jquery, iframe

**背景：**

可以提供jQuery 选择器调用的第二个“上下文”参数（例如：）`jQuery(selector, context)`，为选择器引擎提供一个下降的起点。

如果您需要控制 IFRAME（在同一域中）中的内容，这通常很有用。您只需`iframe.contentWindow.document`作为“上下文”参数传递。

如果在使用 jQuery 的 IFRAME 中加载了任何 JavaScript 代码，并且从外部窗口**的范围**调用，那么对该代码的任何引用`$`或`jQuery`在该代码中实际上都是`jQuery`来自外部窗口的实例。

当 IFRAME 中的 JavaScript 代码（例如 Bootstrap.js）执行类似操作`$(document)`（或执行其他没有“上下文”参数的选择器）时，问题就出现了。当从外部窗口调用该代码（在 iframe 内定义）时，`document`指的是外部窗口中的 HTMLDocument 元素——这通常不是预期的结果。

**问题：**

能够创建具有默认“上下文”参数的 jQuery 的词法范围副本/包装器将非常有用，该参数由创建它的人提供。

例子：

```
// jQuery already exists out here
var iframe = document.createElement('IFRAME');
iframe.addEventListener('DOMContentLoaded', function(){

    // code in here can already refer to $ for 'outer' jQuery

    // code in here can refer to $local for 'inner' jQuery by virtue of...
    var $local = jQueryWithContext($, iframe.contentWindow.document);

    // code loaded with IFRAME will use $local by virtue of ...
    iframe.contentWindow.jQuery = iframe.contentWindow.$ = $local;

});
iframe.src = '/path/to/iframe/content.html'; 
```

问题是，是否可以编写类似`jQueryWithContext`上面的内容？

**为什么？**

有时您想隔离从 CSS / JavaScript 污染的角度来看行为不端的 3rd 方 HTML 组件（虽然您从安全角度信任它们）。

Bootstrap.js 就是一个很好的例子。它调用`$(document)`了一个公平的位，并执行其他类似的无上下文选择器调用。如果可以按照我描述的方式重新定义 jQuery 的范围，那么这个“非最佳”编写的库可以很容易地被隔离。

此外，从两个框架中使用相同的集合会非常有帮助，`$.data(el, ...)`如果没有一些上下文管理，这将非常棘手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T03:29:30.083

实际上，它会很简单：

```
function jQueryWithContext( selector, context ) {
  // I added the possibility to overwrite the context here, but you could delete
  return $( selector, context || iframe.contentWindow.document );
}
jQueryWithContext( '#main' ).show(); 
```

但是要将其强制插入插件，您可能需要这样做：

```
jQuery.noConflict(); // keep the real jQuery for now
$ = function( selector, context ){
  return new jQuery.fn.init( selector, context || iframe.contentWindow.document );
};
$.fn = $.prototype = jQuery.fn;
jQuery.extend( $, jQuery ); // copy static method
// Then override default jQuery
jQuery = $; 
```

这有点工作，但它可能会破坏某些用法`$()`（也许现在不是，但在未来的 jQuery 版本中可能，或者任何时候`context`参数的存在都会破坏正常行为）。

# c# - IronPython 沙盒与 CAS

> ID：13964828
> 
> 赞同：3
> 
> 时间：2012-12-20T03:25:02.277
> 
> 标签：c#, ironpython, cas, sandbox

我正在尝试将 IronPython 集成到 C# 应用程序中以进行脚本编写。我还希望脚本在一组限制它们访问文件系统/网络/敏感系统资源的安全策略下运行。

研究表明，最流行的方法是使用 CAS。这很好用，它不允许用户使用套接字、访问文件系统等。但是，当我尝试为脚本注入变量以与之交互时，每次访问某些参数时都会出现安全异常。这只发生在我在程序集中定义的变量上。如果我使用标准的 .NET 类型（如 Dictionary），它就可以正常工作。

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using System.Security.Policy;
using System.Security.Permissions;
using System.Security;
using System.IO;
using Microsoft.Scripting.Hosting;
using IronPython.Hosting;
using System.Runtime.Remoting;
using System.Net;

namespace python_in_appdomain
{
    [Serializable]
    public class Whatever
    {
        public int i;
        public Whatever(int i)
        {
            this.i = i;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Remoting();
        }

        public static void Remoting()
        {
            AppDomainSetup setup = new AppDomainSetup();
            Assembly thisAssembly = Assembly.GetExecutingAssembly();
            setup.ApplicationBase = Path.GetDirectoryName(thisAssembly.Location);

            AssemblyName name = typeof(Program).Assembly.GetName();
            StrongName sn = new StrongName(
                new StrongNamePublicKeyBlob(name.GetPublicKey()),
                name.Name,
                name.Version
            );

            PermissionSet pset = new PermissionSet(PermissionState.None);
            pset.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));
            pset.AddPermission(new ReflectionPermission(PermissionState.Unrestricted));

            setup.PartialTrustVisibleAssemblies = new[] { sn.Name + ", PublicKey=" + sn.PublicKey.ToString() };
            AppDomain domain = AppDomain.CreateDomain("Sandbox", AppDomain.CurrentDomain.Evidence, setup, pset, sn);

            String script = @"
d.Add('hello', 1)
w.i = 5
";

            Whatever w = new Whatever(4);
            Dictionary<string, int> d = new Dictionary<string,int>();

            ScriptRuntime py = Python.CreateRuntime(domain);
            ScriptEngine engine = py.GetEngine("py");
            ScriptScope scope = engine.CreateScope();
            scope.SetVariable("w", w);
            scope.SetVariable("d", d);

            int result;
            Console.WriteLine(w.i);
            d.TryGetValue("hello", out result);
            Console.WriteLine(result);
            Console.WriteLine("-----");

            try
            {
                engine.Execute(script, scope);
            }
            catch (Exception exc)
            {
                Console.WriteLine(exc.ToString());
            }

            w = scope.GetVariable<Whatever>("w");
            d = scope.GetVariable<Dictionary<string,int>>("d");

            Console.WriteLine("-----");
            Console.WriteLine(w.i);
            d.TryGetValue("hello", out result);
            Console.WriteLine(result);

        }
    }
} 
```

注释掉第 55 行的“wi=5”会导致程序在受限的安全设置下正常执行。在第 47 行将 PermissionState 设置为 Unrestricted 允许脚本的两行正常执行。以下是我收到的错误消息：

```
System.Security.SecurityException: Request failed.
   at System.Runtime.CompilerServices.RuntimeHelpers._CompileMethod(IRuntimeMethodInfo method)
   at System.Reflection.Emit.DynamicMethod.CreateDelegate(Type delegateType, Object target)
   at System.Dynamic.Utils.TypeExtensions.CreateDelegate(MethodInfo methodInfo, Type delegateType, Object target)
   at System.Linq.Expressions.Compiler.LambdaCompiler.CreateDelegate()
   at System.Linq.Expressions.Compiler.LambdaCompiler.Compile(LambdaExpression lambda, DebugInfoGenerator debugInfoGenerator)
   at System.Linq.Expressions.Expression`1.Compile()
   at System.Runtime.CompilerServices.CallSiteBinder.BindCore[T](CallSite`1 site, Object[] args)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   at Microsoft.Scripting.Interpreter.DynamicInstruction`3.Run(InterpretedFrame frame)
   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at Microsoft.Scripting.Interpreter.LightLambda.Run2[T0,T1,TRet](T0 arg0, T1 arg1)
   at IronPython.Compiler.PythonScriptCode.RunWorker(CodeContext ctx)
   at IronPython.Compiler.PythonScriptCode.Run(Scope scope)
   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)
   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)
   at Microsoft.Scripting.SourceUnit.Execute(Scope scope, ErrorSink errorSink)
   at Microsoft.Scripting.Hosting.ScriptSource.Execute(ScriptScope scope)
   at Microsoft.Scripting.Hosting.ScriptEngine.Execute(String expression, ScriptScope scope)
   at Microsoft.Scripting.Hosting.ScriptEngine.Execute(String expression, ScriptScope scope)
   at python_in_appdomain.Program.Remoting() in C:\Users\dave\Documents\Visual Studio 2010\Projects\IronPythonTest\IronPythonTest\Program.cs:line 7
6
The action that failed was:
Demand
The type of the first permission that failed was:
System.Security.PermissionSet
The demand was for:
<PermissionSet class="System.Security.PermissionSet"
version="1"
Unrestricted="true"/>

The granted set of the failing assembly was:
<PermissionSet class="System.Security.PermissionSet"
version="1">
<IPermission class="System.Security.Permissions.ReflectionPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
version="1"
Unrestricted="true"/>
<IPermission class="System.Security.Permissions.SecurityPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
version="1"
Flags="Execution"/>
</PermissionSet>

The assembly or AppDomain that failed was:
Microsoft.Dynamic, Version=1.1.0.20, Culture=neutral, PublicKeyToken=7f709c5b713576e1
The method that caused the failure was:
Int32 Run(Microsoft.Scripting.Interpreter.InterpretedFrame)
The Zone of the assembly that failed was:
Internet
The Url of the assembly that failed was:
file:///C:/Users/dave/Documents/Visual Studio 2010/Projects/IronPythonTest/IronPythonTest/bin/Debug/Microsoft.Dynamic.DLL

Unhandled Exception: System.Security.SecurityException: Request failed.
   at System.Delegate.BindToMethodInfo(Object target, IRuntimeMethodInfo method, RuntimeType methodType, DelegateBindingFlags flags)
   at System.Delegate.CreateDelegate(Type type, MethodInfo method, Boolean throwOnBindFailure)
   at System.Dynamic.Utils.TypeExtensions.CreateDelegate(MethodInfo methodInfo, Type delegateType)
   at System.Runtime.CompilerServices.CallSite`1.MakeUpdateDelegate()
   at System.Runtime.CompilerServices.CallSite`1.GetUpdateDelegate(T& addr)
   at System.Runtime.CompilerServices.CallSite`1.GetUpdateDelegate()
   at System.Runtime.CompilerServices.CallSite`1.Create(CallSiteBinder binder)
   at System.Func`2.Invoke(T arg)
   at Microsoft.Scripting.Runtime.DynamicOperations.GetOrCreateSite[T](CallSiteBinder siteBinder, Func`2 factory)
   at Microsoft.Scripting.Runtime.DynamicOperations.GetOrCreateSite[T1,TResult](CallSiteBinder siteBinder)
   at Microsoft.Scripting.Runtime.DynamicOperations.ConvertTo[T](Object obj)
   at IronPython.Runtime.PythonContext.ScopeGetVariable[T](Scope scope, String name)
   at Microsoft.Scripting.Hosting.ScriptScope.GetVariable[T](String name)
   at Microsoft.Scripting.Hosting.ScriptScope.GetVariable[T](String name)
   at python_in_appdomain.Program.Remoting() in C:\Users\dave\Documents\Visual Studio 2010\Projects\IronPythonTest\IronPythonTest\Program.cs:line 8
3
   at python_in_appdomain.Program.Main(String[] args) in C:\Users\dave\Documents\Visual Studio 2010\Projects\IronPythonTest\IronPythonTest\Program.
cs:line 31 
```

这个错误令人震惊地直截了当。它说它期望完全不受限制地访问这种操作。有没有办法解决？为什么字典有效但我的变量无效？有没有办法让 IronPython 像字典一样对待我的变量？我错过了一些非常明显的东西吗？

非常感谢您的帮助。

**2012 年 12 月 21 日更新**

我一直在胡闹，想出了一个可行的解决方案。像这样（使用相同的权限对象）创建 AppDomain 可以让一切正常工作。

```
AppDomainSetup setup = new AppDomainSetup();
            setup.ApplicationBase = System.Environment.CurrentDirectory;
AppDomain domain = AppDomain.CreateDomain("IPyEngine", new Evidence(), setup, pset); 
```

我不能说我完全理解为什么，尽管我可以看到我没有提供我的程序集的证据，也没有将任何程序集添加到信任列表中。在我确定我没有做任何非常愚蠢的事情之前，我不想将其标记为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:48:44.270

这很可疑：

```
The Zone of the assembly that failed was:
Internet
The Url of the assembly that failed was:
file:///C:/Users/dave/Documents/Visual Studio 2010/Projects/IronPythonTest/IronPythonTest/bin/Debug/Microsoft.Dynamic.DLL 
```

我想知道该文件是否具有区域标识符。您可以检查文件属性，并[在必要时取消阻止它](http://blog.jdhardy.ca/2010/09/using-downloaded-ironpython-modules.html)吗？

# c - 在 C 中为实际输入编写一个简单的离散傅里叶变换

> ID：13964829
> 
> 赞同：12
> 
> 时间：2012-12-20T03:25:02.197
> 
> 标签：c, dft, windowing

所以我试图用 C 编写离散傅立叶变换来处理真正的 32 位浮点 wav 文件。它一次读取 2 帧（每个通道一个，但出于我的目的，我假设它们都是相同的，所以我使用帧 [0]）。此代码应该通过使用频率 20、40、60、...、10000 探测输入文件来写出输入文件的幅度谱。我在输入帧上使用 Hanning 窗口。如果可以的话，我想避免使用复数。当我运行它时，它给了我一些非常奇怪的幅度（其中大部分都非常小，并且与正确的频率无关），这让我相信我在计算中犯了一个根本性的错误。有人可以对这里发生的事情提供一些见解吗？这是我的代码：

```
int windowSize = 2205;
int probe[500];
float hann[2205];
int j, n;
// initialize probes to 20,40,60,...,10000
for (j=0; j< len(probe); j++) {
    probe[j] = j*20 + 20;
    fprintf(f, "%d\n", probe[j]);
}
fprintf(f, "-1\n");
// setup the Hann window
for (n=0; n< len(hann); n++) {
    hann[n] = 0.5*(cos((2*M_PI*n/(float)windowSize) + M_PI))+0.5;
}

float angle = 0.0;
float w = 0.0; // windowed sample
float realSum[len(probe)]; // stores the real part of the probe[j] within a window
float imagSum[len(probe)]; // stores the imaginary part of probe[j] within window
float mag[len(probe)]; // stores the calculated amplitude of probe[j] within a window
for (j=0; j<len(probe);j++) {
    realSum[j] = 0.0;
    imagSum[j] = 0.0;
    mag[j] = 0.0;
}

n=0; //count number of samples within current window
framesread = psf_sndReadFloatFrames(ifd,frame,1);
totalread = 0;
while (framesread == 1){
    totalread++;

    // window the frame with hann value at current sample
    w = frame[0]*hann[n];

    // determine both real and imag product values at sample n for all probe freqs times the windowed signal
    for (j=0; j<len(probe);j++) {
        angle = (2.0 * M_PI * probe[j] * n) / windowSize;
        realSum[j] = realSum[j] + (w * cos(angle));
        imagSum[j] = imagSum[j] + (w * sin(angle));
    }
    n++;
    // checks to see if current window has ended
    if (totalread % windowSize == 0) {
        fprintf(f, "B(%f)\n", totalread/44100.0);
        printf("%f breakpoint written\n", totalread/44100.0);
        for (j=0; j < len(mag); j++) { // print out the amplitudes 
            realSum[j] = realSum[j]/windowSize;
            imagSum[j] = imagSum[j]/windowSize;
            mag[j] = sqrt(pow((double)realSum[j],2)+pow((double)imagSum[j],2))/windowSize;
            fprintf(f, "%d\t%f\n", probe[j], mag[j]);
            realSum[j] = 0.0;
            imagSum[j] = 0.0;
        }
        n=0;
    }
    framesread = psf_sndReadFloatFrames(ifd,frame,1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:12:18.777

我认为错误在于角度的计算。每个样本的角度增量取决于采样频率。像这样的东西（你似乎有 44100Hz）：

```
angle = (2.0 * M_PI * probe[j] * n) / 44100; 
```

您的采样窗口将包含一个完整的循环，用于您的最低探测频率 20Hz。如果将 n 循环到 2205，则该角度将为 2*M_PI。您看到的可能是混叠，因为您的参考频率为 2205Hz，所有高于 1102Hz 的频率都混叠为较低的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:08:23.560

使用下面的代码 - 只是稍微重组以编译和创建一个假样本，我*没有*得到全零。我已将输出调用更改为最后：

```
fprintf(f, "%d\t%f\n", probe[j], mag[j] ); 
```

至

```
if (mag[j] > 1e-7)
    fprintf(f, "%d\t%f\n", probe[j], mag[j] * 10000); 
```

这只是使查看非零数据变得更容易。也许唯一的问题是理解比例因子？请注意我如何伪造输入以生成纯音作为测试用例。

```
#include <math.h>

#include <stdio.h>

#define M_PI 3.1415926535

#define SAMPLE_RATE 44100.0f

#define len(array) (sizeof array/sizeof *array)

unsigned psf_sndReadFloatFrames(FILE* inFile,float* frame,int framesToRead)
{
    static float counter = 0;   
    float frequency = 1000;
    float time = counter++;
    float phase = time/SAMPLE_RATE*frequency;
    *frame = (float)sin(phase);
    return counter < SAMPLE_RATE;
}

void discreteFourier(FILE* f)                    
{
    FILE* ifd = 0;
    float frame[1];
    int windowSize = 2205;
    int probe[500];
    float hann[2205];

    float angle = 0.0;
    float w = 0.0; // windowed sample
    float realSum[len(probe)]; // stores the real part of the probe[j] within a window
    float imagSum[len(probe)]; // stores the imaginary part of probe[j] within window
    float mag[len(probe)]; // stores the calculated amplitude of probe[j] within a window

    int j, n;

    unsigned framesread = 0;
    unsigned totalread = 0;

    for (j=0; j<len(probe);j++) {
        realSum[j] = 0.0;
        imagSum[j] = 0.0;
        mag[j] = 0.0;
    }

    // initialize probes to 20,40,60,...,10000
    for (j=0; j< len(probe); j++) {
        probe[j] = j*20 + 20;
        fprintf(f, "%d\n", probe[j]);
    }
    fprintf(f, "-1\n");
    // setup the Hann window
    for (n=0; n< len(hann); n++) 
    {
        hann[n] = 0.5*(cos((2*M_PI*n/(float)windowSize) + M_PI))+0.5;
    }
    n=0; //count number of samples within current window
    framesread = psf_sndReadFloatFrames(ifd,frame,1);
    totalread = 0;
    while (framesread == 1){
        totalread++;

        // window the frame with hann value at current sample
        w = frame[0]*hann[n];

        // determine both real and imag product values at sample n for all probe freqs times the windowed signal
        for (j=0; j<len(probe);j++) {
            angle = (2.0 * M_PI * probe[j] * n) / windowSize;
            realSum[j] = realSum[j] + (w * cos(angle));
            imagSum[j] = imagSum[j] + (w * sin(angle));
        }
        n++;
        // checks to see if current window has ended
        if (totalread % windowSize == 0) {
            fprintf(f, "B(%f)\n", totalread/SAMPLE_RATE);
            printf("%f breakpoint written\n", totalread/SAMPLE_RATE);
            for (j=0; j < len(mag); j++) { // print out the amplitudes 
                realSum[j] = realSum[j]/windowSize;
                imagSum[j] = imagSum[j]/windowSize;
                mag[j] = sqrt(pow((double)realSum[j],2)+pow((double)imagSum[j],2))/windowSize;
                if (mag[j] > 1e-7)
                    fprintf(f, "%d\t%f\n", probe[j], mag[j] * 10000);
                realSum[j] = 0.0;
                imagSum[j] = 0.0;
            }
            n=0;
        }
        framesread = psf_sndReadFloatFrames(ifd,frame,1);
    }
} 
```

# node.js - 从 mongo 中的多个集合中获取数据

> ID：13964837
> 
> 赞同：2
> 
> 时间：2012-12-20T03:26:36.407
> 
> 标签：node.js, mongodb, mongoose

我有一些如下所示的集合，其中包含关系，*testMaster*和*testDoc*之间的关系在*testDocMaster中*

例如：

```
testMaster {
_id: "Schema.Objectid",
name: "String" //master name
}

testDoc {
_id : Schema.ObjectId,
name: "String", //doc name
other datas
}

testDocMaster {
masterId: "_id of the testMaster table",
docId : "_id of the above testDoc"
} 
```

对于每个主条目，我们期待许多关系，

如果我有 masterId，从 testDoc 表中获取数据的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T00:26:20.670

我使用它来工作：

```
// GLOBAL ARRAYS FOR STORING COLLECTION DATA
var collectionOne = [];
var collectionTwo = [];
app.get('/', function(req, res){
  MongoClient.connect("mongodb://localhost:27017/michael", function(err, db) {
    if(!err) {
      console.log("We are connected");
    }
    db.collection("collectionOne", function(err, collection) {
      collection.find().sort({order_num: 1}).toArray(function(err, result) {
        if (err) {
          throw err;
        } else {
          for (i=0; i<result.length; i++) {
            collectionOne[i] = result[i];
          }
        }
      });
      db.collection("collectionTwo", function(err, collection) {
        collection.find().sort({order_num: 1}).toArray(function(err, result) {
          if (err) {
            throw err;
          } else {
            for (i=0; i<result.length; i++) {
              collectionTwo[i] = result[i];
            }
          }
        });
      });
      // Thank you aesede!
      res.render('index.html', {
        collectionOne: collectionOne,
        collectionTwo: collectionTwo
      });
    });
  });
}); 
```

现在，由于某种原因，当 Node 重新启动并且我点击刷新时，它不会将 HTML 呈现到前端。但是，任何后续刷新都会正确呈现页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:40:05.727

假设您的`testDocMaster`架构使用其他两个集合的`ObjectId`类型，`ref`您可以使用 Mongoose 的[查询填充](http://mongoosejs.com/docs/populate.html)支持来帮助解决此问题：

```
TestDocMaster.findOne({ masterId: masterId})
    .populate('docId')
    .exec(function(err, testDocMaster) {
        // testDocMaster.docId is populated with the full testDoc for the
        // matching _id
    }); 
```

# xml - 在 Glassfish 之外访问文件

> ID：13964838
> 
> 赞同：0
> 
> 时间：2012-12-20T03:26:36.983
> 
> 标签：xml, rest, glassfish

我使用 REST Web 服务（不在 glassfish 中）创建了一个 xml 文件，然后我需要一个位于 glassfish 内的 quercus 内的 php 文件，以便能够访问该文件来修改它。但是我无法将文件复制到 glassfish 中，因为它受到保护，而且我似乎无法从内部访问 glassfish 之外的任何文件。

有很多关于使用备用文档根的讨论（例如，[this answer](https://stackoverflow.com/questions/3266608/how-to-provide-access-to-an-external-resource-file-for-a-glassfish-web-applica)或[this document](https://blogs.oracle.com/jluehe/entry/alternate_docroots_in_web_applications)），但我找不到如何实现这一点。他们都说要找到一个`sun-web.xml`文件或`glassfish-web.xml`文件并对其进行编辑，但我的 glassfish 服务器中没有这些文件。我也尝试过通过像这个[网站](http://www.marceble.com/2009/07/virtual-directories-in-glassfish/)这样的网络界面来做这件事，但这也不起作用。

有谁知道我可以尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:32:19.090

（`glassfish-web.xml`以前称为`sun-web.xml`）应放入`WEB-INF/glassfish-web.xml`您的 Web 应用程序的 .war 文件中。这就是为什么在浏览服务器目录时找不到它的原因。

配置备用 docroot 使您的应用程序能够从其他位置提供文件。

为了以防万一，我将添加一个文件示例，但这部分您可能已经知道

```
<glassfish-web-app ...>
    ...
    <property name="alternatedocroot_1" value="from=/my.jpg dir=/srv/images/jpg"/>
    <property name="alternatedocroot_2" value="from=*.jpg dir=/srv/images/jpg"/>
    <property name="alternatedocroot_3" value="from=/jpg/* dir=/src/images"/>
</glassfish-web-app> 
```

查看扩展文档： [http ://docs.oracle.com/cd/E18930_01/html/821-2418/beaft.html#geqpl](http://docs.oracle.com/cd/E18930_01/html/821-2418/beaft.html#geqpl)

# django - Django：blocktrans 不再工作了

> ID：13964844
> 
> 赞同：4
> 
> 时间：2012-12-20T03:27:45.900
> 
> 标签：django, internationalization

在我当前的项目`blocktrans`中不再工作（它曾经工作得很好）。`trans`或单行`blocktrans`工作正常，只有多行`blocktrans`失败。`django-admin.py makemessages`仍然可以正确选择所有这些消息，但在输出中将显示默认 (en) 语言而不是翻译的。

使用 python shell 我可以检索翻译。这是系统似乎没有检索翻译的模板/本地化。内部`python manage.py shell`：

```
from django.utils import translation
s = "the text"
translation.activate('en')
translation.ugettext(s) # gets the default text
translation.activate('hi')
translation.ugettext(s) # gets the correct translated text 
```

*   消息不模糊
*   我试图让翻译的行数和原著一样多

我还在使用 django 1.1

我可能会错过/做错什么？

# ruby-on-rails - redmine 2.1 CSS 和 JS 资产不正确的 url “生产/样式表”

> ID：13964849
> 
> 赞同：2
> 
> 时间：2012-12-20T03:28:43.127
> 
> 标签：ruby-on-rails, ruby, redmine, passenger

我在使用新的 redmine 2.1 设置时遇到问题。

正在工作，试图转移到 apache 乘客。我花了几分钟才开始工作，但它正在运行，我可以登录。

问题是没有加载 JS/CSS 资产，它们都是 404。

所有资产都有这样的网址：/redmine/production/stylesheets/jquery/jquery-ui-1.8.21.css?1355946024

该文件不存在，存在的是 /redmine/stylesheets/jquery/jquery-ui-1.8.21.css?1355946024

为什么所有带有“/production/”的资产都拼接在url的中间？我是 ruby​​/rails/redmine 的新手，所以我什至不知道从哪里开始... google 没有帮助

任何帮助表示赞赏。

# php - PHP - 警告：为 foreach() 提供的参数无效

> ID：13964861
> 
> 赞同：0
> 
> 时间：2012-12-20T03:29:40.430
> 
> 标签：php

我正在创建一个动态字体列表，以在我的一个页面上的选择菜单中进行选择，链接到一个文本字段。

使用下面的脚本，这完全可以正常工作，但是，如果文本字段留空，则选择菜单会向我显示以下错误消息：

> **警告：在第****373**行 的**/opt.php**中为 foreach() 提供的参数无效

 **在第`/opt.php`373 行的文件中：

```
else {
    foreach ($decode['items'] as $key => $value) {
        $item_family = $decode['items'][$key]['family'];
        $item_family_trunc =  str_replace(' ','+',$item_family);        
        $default[$item_family_trunc] = $item_family;
    }
} 
```

由于我是 PHP 新手，我将如何修复上述脚本，以便在文本字段留空时不再收到错误消息？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:32:22.690

`foreach`使用`is_array()`函数确保循环的参数是一个数组

```
if (isset($decode['items']) && is_array($decode['items'])) {
    foreach ($decode['items'] as $key => $value) {
        $item_family = $decode['items'][$key]['family'];
        $item_family_trunc =  str_replace(' ','+',$item_family);        
        $default[$item_family_trunc] = $item_family;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:34:33.527

和

```
if(empty($decode)) { 
```

您只检查 $decode 是否为空，而不是它是否设置了“项目”。

```
if (!isset($decode['items']) && is_array($decode['items'])) { 
```

可能会更好。

同样在您的 foreach 循环中，您可以只引用 $value 而不是尝试遍历数组。所以..

```
$item_family_trunc =  str_replace(' ','+',$value['family']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T03:36:00.253

您需要确保`decode['items']`isset 是一个数组，而不是空的：

```
$decode = json_decode($json, true);
if(empty($decode)) {

}elseif(isset($decode['items']) && !empty($decode['items']) && is_array($decode['items'])){
            foreach ($decode['items'] as $key => $value) {
            $item_family = $decode['items'][$key]['family'];
            $item_family_trunc =  str_replace(' ','+',$item_family);        
            $default[$item_family_trunc] = $item_family;

        }
    }   
} 
```

您的代码的问题在于它可能`$decode`不为空（错误消息等），因此您需要确保它`$decode['items']`可用。**

# android - 将第一行和最后一行设置为自定义可绘制对象

> ID：13964865
> 
> 赞同：0
> 
> 时间：2012-12-20T03:30:07.137
> 
> 标签：android, listview, custom-adapter

我正在努力做到这一点，以便我的列表视图的最后一行和第一行将具有圆角边缘。现在我只是想让第一行有圆角。我能够做到这一点，但一些随机行通常是 5-7 和 15 或 16 行也将设置为圆角背景，我不知道为什么。

这是我的[适配器代码](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)的一部分，我尝试将圆角设置为可绘制：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;

    if (convertView == null) {
        vi = inflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.title = (TextView) vi.findViewById(R.id.title);
        holder.desc = (TextView) vi.findViewById(R.id.details);
        holder.date = (TextView) vi.findViewById(R.id.date);
        holder.price = (TextView) vi.findViewById(R.id.price);
        holder.location = (TextView) vi.findViewById(R.id.location);
        holder.newImage = (ImageView) vi.findViewById(R.id.savedNewItemsRibbon);
        holder.rellay = (RelativeLayout) vi.findViewById(R.id.widget30);

        //holder.image = (ImageView) vi.findViewById(R.id.thumb);
        vi.setTag(holder);
    }else{
        holder = (ViewHolder) vi.getTag();
    }
    if(position == 0 && firstRow){
        holder.rellay.setBackgroundResource(R.drawable.roundededges);
        firstRow = false;
    }else{
        //vi.setBackgroundColor(Color.WHITE);
    }

    Log.d("MySQL", "COunt:"+position);
    holder.price.setText(data.get(position).getPrice());
    holder.location.setText(data.get(position).getUrl());

    datasource = new PostDataSource(activity);
    datasource.open();

    if(datasource.checkIfNew(data.get(position).getTitle())){
        holder.newImage.setVisibility(View.VISIBLE);
        //vi.setBackgroundColor(Color.YELLOW);

    }else{
        holder.title.setTextColor(Color.BLACK);
    }
    holder.title.setText(data.get(position).getTitle());

    holder.desc.setText(data.get(position).getDescription());
    holder.date.setText(data.get(position).getPubDate());
    holder.location.setText(data.get(position).getCity());

    //holder.title.setText(data.get(0).getTitle());
    //imageLoader.DisplayImage((data.get(position).getThumbnail()), activity,holder.image, 72, 72);

    URL url = null;
    try {
        url = new URL((data.get(position).getThumbnail()));
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    InputStream content = null;

    /*
    try {
        //content = (InputStream)url.getContent();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Drawable d = Drawable.createFromStream(content , "src"); 
    Bitmap mIcon1 = null;
     try {
         mIcon1 =
                BitmapFactory.decodeStream(url.openConnection().getInputStream());
    } catch (IOException e) {
        e.printStackTrace();
    }
    holder.image.setImageBitmap(Bitmap.createScaledBitmap(mIcon1, 72, 72, false));
     */
    positionCount++;
    return vi;

} 
```

我试过只使用 position==0 将其设置为无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:40:32.900

这很可能是因为框架将非 null 传递给`convertView`您的`getView`方法，而该方法恰好来自您的第一行。

最简单的解决方法是取消设置除第一行之外的每一行的背景资源：

```
 if (position == 0){
       holder.rellay.setBackgroundResource(R.drawable.roundededges);
   } else {
       holder.rellay.setBackgroundResource(0);
   } 
```

# php - 由于 .htaccess 错误而引发 500 错误

> ID：13964867
> 
> 赞同：-4
> 
> 时间：2012-12-20T03:30:25.747
> 
> 标签：php, .htaccess, codeigniter

> **可能重复：**
> [.htaccess 抛出 500 错误](https://stackoverflow.com/questions/13963946/htaccess-throws-a-500-error)

我正在使用 CodeIgniter，需要去掉 URL 中的“index.php”。我从 CI 教程中复制了 .htaccess 文件，清空了 $config['index_page'] = ''; 并将 .htaccess 放在根目录中。

*   如果没有 .htaccess 文件，它可以正常工作，但很难看：www.example.com/index.php/site/home
*   由于某种原因，它无法正常工作，只会引发 500 的错误。
*   在日志中有一行在每次尝试中都会重复：[Thu Dec 20 04:01:13 2012] [alert] [client 2.55.118.161] /home/morro1980/data/www/knight-guard.org/。 htaccess: 指令需要额外的参数。
*   mod_rewrite 已安装并正在运行

错误在哪里，我该如何解决？

先感谢您

我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folders by users.
    #Additionly this will allow you to create a System.php controller,
    #previously this would not have not been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
<IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php? and everything works as normal.
    # submitted by: ElliotHaughin
    ErrorDocument 404 /index.php
</IfModule> 
```

我的站点控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller {
    public function index(){
        $this->home();
    }
    public function home(){
        echo "default function started.<br/>";
        $this->hello();
        $data['title'] = 'Home!';
        $data['name'] = 'Ilia';
        $data['fname'] = 'Lev';
        $data['operation'] = 'minus';
        $data['val1'] = 5;
        $data['val2'] = 7;
        echo $data['operation']."<br/>";
        $data['result'] = $this->math($data);
        $this->viewLoad("home_view", $data);
        echo "<br/>";
    }
    public function hello(){
        echo "hello function started.<br/>";
    }
    public function math($data){
        $operation = $data['operation'];
        $val1 = $data['val1'];
        $val2 = $data['val2'];
        $this->load->model("math");
        return $this->math->calculate($operation, $val1, $val2)."<br/>";
    }
    public function viewLoad($whatToView, $data){
        try{
            $this->load->view($whatToView, $data);
        }catch(Exception $e){
            echo "There is no such view";
        }
    }
    public function about(){
        $data['title'] = "About!";
        $this->viewLoad("about_view",$data);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:37:37.540

确保您`<IfModule></IfModule>`在 .htaccess 中匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:39:26.537

第一个`<ifModule>`没有关闭，这个：

```
RewriteRule ^(.*)$ index.php?/$1 [L]
<IfModule> 
```

必须

```
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>
#^ 
```

# ruby-on-rails - rake 测试：函数抛出语法错误，意外的关键字结束

> ID：13964869
> 
> 赞同：0
> 
> 时间：2012-12-20T03:31:18.080
> 
> 标签：ruby-on-rails, ruby, activerecord, rake

当我为我的 RoR 应用程序运行 rake 任务“test:functionals”时，它会产生以下错误：

```
>rake test:functionals

rake aborted!
C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:380: syntax error, unexpec
ted keyword_end, expecting $end

Tasks: TOP => test:functionals => test:prepare => db:test:prepare => db:abort_if_pending_migrations => db:load_conf
ig 
```

我检查了我的代码是否有语法错误。为什么 transactions.rb 会有语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:50:39.250

**您的代码**中有不匹配的块，它不在 transactions.rb. 中，即使它说它在 transactions.rb 上也很可能不是。

仔细检查您的开块器，例如`do` `class` `def`

还要检查`.`方法或对象中的尾随

例子：`variable.length.`

# python - pyplot 制表符

> ID：13964872
> 
> 赞同：14
> 
> 时间：2012-12-20T03:31:35.693
> 
> 标签：python, tabs, matplotlib

我正在尝试在 pyplot 中使用制表符。但是，制表符显示的是正方形，而不是我需要的制表符空间。

我的代码是：

```
fig = pl.figure()
fig.text(.1,.05, "test \t test", bbox=dict(facecolor='red', alpha=0.5)) 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T03:49:05.913

我很惊讶`pylab.show`实际上显示了一些空间来代替你的正方形。但`savefig`不要试图变得聪明并给出你所描述的。现在，一个制表符占用多少个空格？这个问题没有意义。4适合你吗？我会为我选择4.2。这意味着您需要决定您希望制表符在文本中占用多少空格，即：

```
fig = pylab.figure()
text = "test \t test".replace("\t", "    ")
fig.text(.1,.05, text, bbox=dict(facecolor='red', alpha=0.5)) 
```

或者，也许您想使用“标准”约定简单地扩展选项卡：

```
text = "test \t test".expandtabs() 
```

# php - PHP 语法错误。似乎无法找到修复

> ID：13964873
> 
> 赞同：0
> 
> 时间：2012-12-20T03:31:36.037
> 
> 标签：php, syntax

谁能指出如何解决我遇到的 2 个语法错误？我对 PHP 不是很先进。

这是代码：

```
$code = '<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
        <script>
        <table id="slideleft" style=" overflow:auto; position:fixed; top:25%;"><tr class="slideLeftItem" style="position:fixed;left:-320px;z-index:1000;height:100%;"><td><img src="https://lh3.googleusercontent.com/-GMJe-Am-U9Q/T4p4bZu7jDI/AAAAAAAAAFs/qQqmMGn-wwg/s800/facebook-vertical.png" style="top:5px; position:absolute; border-left-width:5px; left:318px;"/></td><td class="contentBox" style="border:solid 5px #5370AD; width:300px;height:300px;position:relative;border-radius:5px;background-color:white;"><div id="fb-root"></div><script type="text/javascript" >(function() {var e = document.createElement('script'); e.async = true;e.src = document.location.protocol +'//connect.facebook.net/en_US/all.js#xfbml=1';document.getElementById('fb-root').appendChild(e);());</script>

       <fb:like-box href="https://www.facebook.com/ExplicitWebsiteDesign?ref=hl" width="300" show_faces="true" stream="false" header="false"></fb:like-box></td></tr></table><script type="text/javascript">jQuery(".slideLeftItem").append('<div style="font-size:12px;font-family: arial;width:300px;text-align:right;"><a rel="dofollow" href="http://techbrij.com/944/add-social-slider-widget-website" style="background-color:#D2C9CA;padding:3px 7px;font-weight:bold;color:#516FA9">Get This Widget</a></div>');jQuery("#slideleft tr").hover(function(b){var a=jQuery(this);jQuery("#slideleft tr").not(a).hide();a.css({"z-index":"9999"});a.stop().animate({left:0})},function(b){var a=jQuery(this);a.css({"z-index":"1000"});a.stop().animate({left:-a.outerWidth()});jQuery("#slideleft tr").show()});</script>}</script>'; 
```

下面的图片是我的代码的屏幕截图......谢谢。

![在此处输入图像描述](../Images/cfa9e242bf1f8e95f68a132e283ee293.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:36:31.487

```
$code = ' (function() {var e = document.createElement('scr 
```

您正在尝试将 js 保存为字符串，但 ' 在您的 js 代码中。这搞砸了。你只需要转义那些单引号。将主要内容中的内容从'更改为\'。这应该解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:41:10.740

尝试使用[输出缓冲区](http://hk.php.net/manual/en/function.ob-start.php)来发挥您的优势：

```
ob_start();
?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
        <script>
        <table id="slideleft" style=" overflow:auto; position:fixed; top:25%;"><tr class="slideLeftItem" style="position:fixed;left:-320px;z-index:1000;height:100%;"><td><img src="https://lh3.googleusercontent.com/-GMJe-Am-U9Q/T4p4bZu7jDI/AAAAAAAAAFs/qQqmMGn-wwg/s800/facebook-vertical.png" style="top:5px; position:absolute; border-left-width:5px; left:318px;"/></td><td class="contentBox" style="border:solid 5px #5370AD; width:300px;height:300px;position:relative;border-radius:5px;background-color:white;"><div id="fb-root"></div><script type="text/javascript" >(function() {var e = document.createElement('script'); e.async = true;e.src = document.location.protocol +'//connect.facebook.net/en_US/all.js#xfbml=1';document.getElementById('fb-root').appendChild(e);());</script>

       <fb:like-box href="https://www.facebook.com/ExplicitWebsiteDesign?ref=hl" width="300" show_faces="true" stream="false" header="false"></fb:like-box></td></tr></table><script type="text/javascript">jQuery(".slideLeftItem").append('<div style="font-size:12px;font-family: arial;width:300px;text-align:right;"><a rel="dofollow" href="http://techbrij.com/944/add-social-slider-widget-website" style="background-color:#D2C9CA;padding:3px 7px;font-weight:bold;color:#516FA9">Get This Widget</a></div>');jQuery("#slideleft tr").hover(function(b){var a=jQuery(this);jQuery("#slideleft tr").not(a).hide();a.css({"z-index":"9999"});a.stop().animate({left:0})},function(b){var a=jQuery(this);a.css({"z-index":"1000"});a.stop().animate({left:-a.outerWidth()});jQuery("#slideleft tr").show()});</script>}</script>
<?php
$code = ob_get_clean(); 
```

# c++ - GNU Make 产生完全不同的结果

> ID：13964874
> 
> 赞同：8
> 
> 时间：2012-12-20T03:31:58.207
> 
> 标签：c++, g++, makefile

这令人困惑。我有我的 Makefile：

```
OBJECTS =
INCLUDE_BUILD_PATH = /Users/wen/Projects/include

# Change compilation settings here
COMPILE = g++
override COMPILE_FLAGS += -O2

# Change linker/compiler specific settings here
LD_FLAGS :=
CC_FLAGS := -c -I$(INCLUDE_BUILD_PATH)/bigint

# Add source extensions here
SRC_EXT = cpp cc

# Add header dependencies here
HEADERS = $(wildcard *.hpp) $(wildcard $(INCLUDE_BUILD_PATH)/*/*.hh)

# Add source files here
CC_FILES = $(wildcard *.cpp) $(wildcard $(INCLUDE_BUILD_PATH)/*/*.cc)
CC_O_BUFFER = $(CC_FILES)
CC_O_BUFFER := $(CC_O_BUFFER:.cpp=.o)
CC_O_BUFFER := $(CC_O_BUFFER:.cc=.o)
OBJECTS = $(CC_O_BUFFER)

# Change .exe name here
EXE_NAME = maketest

# Link object files

$(EXE_NAME): $(OBJECTS)
    $(COMPILE) $(COMPILE_FLAGS) $(LD_FLAGS) -o $@ $^

# Build source files

define compile_rule
%.o : %.$1
        $$(COMPILE) $$(COMPILE_FLAGS) $$(CC_FLAGS) -o $$@ $$<
endef
    $(foreach EXT,$(SRC_EXT),$(eval $(call compile_rule,$(EXT))))

# Clean

clean:
    rm -f $(OBJECTS) $(EXE_NAME)

# Debug Build

debug:
    @echo "Rerun with COMPILE_FLAGS=-D_DEBUG"

# Print variables

print:
    @echo $(CC_FILES)
    @echo $(OBJECTS)
    @echo $(HEADERS) 
```

它一开始编译成功，但后来无缘无故停止了，这是输出：

```
Yoshi-Air:maketest wen$ make
c++    -c -o maketest.o maketest.cpp
maketest.cpp:4:10: fatal error: 'BigIntegerLibrary.hh' file not found
#include "BigIntegerLibrary.hh"
         ^
1 error generated. 
```

问题是，我什至没有告诉它在 Makefile 中使用“c++”，而是使用“g++”。此外，当我清除`CC_FLAGS`它`-c`仍然存在。就像Make有自己的想法一样。

如果我`make print`用来打印我的变量，它似乎没问题：

```
maketest.cpp /Users/wen/Projects/include/bigint/BigInteger.cc /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.cc /Users/wen/Projects/include/bigint/BigIntegerUtils.cc /Users/wen/Projects/include/bigint/BigUnsigned.cc /Users/wen/Projects/include/bigint/BigUnsignedInABase.cc
maketest.o /Users/wen/Projects/include/bigint/BigInteger.o /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.o /Users/wen/Projects/include/bigint/BigIntegerUtils.o /Users/wen/Projects/include/bigint/BigUnsigned.o /Users/wen/Projects/include/bigint/BigUnsignedInABase.o
maketest.hpp /Users/wen/Projects/include/bigint/BigInteger.hh /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.hh /Users/wen/Projects/include/bigint/BigIntegerLibrary.hh /Users/wen/Projects/include/bigint/BigIntegerUtils.hh /Users/wen/Projects/include/bigint/BigUnsigned.hh /Users/wen/Projects/include/bigint/BigUnsignedInABase.hh /Users/wen/Projects/include/bigint/NumberlikeArray.hh 
```

任何帮助或建议将不胜感激。谢谢！

# 更新

我更新了我`print`的打印预期的编译执行：

```
print:
    @echo $(CC_FILES)
    @echo $(OBJECTS)
    @echo $(HEADERS)
    @echo "Compiles with:"
    @echo $(COMPILE) $(COMPILE_FLAGS) $(LD_FLAGS) $(CC_FLAGS) 
```

结果：

```
maketest.cpp /Users/wen/Projects/include/bigint/BigInteger.cc /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.cc /Users/wen/Projects/include/bigint/BigIntegerUtils.cc /Users/wen/Projects/include/bigint/BigUnsigned.cc /Users/wen/Projects/include/bigint/BigUnsignedInABase.cc
maketest.o /Users/wen/Projects/include/bigint/BigInteger.o /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.o /Users/wen/Projects/include/bigint/BigIntegerUtils.o /Users/wen/Projects/include/bigint/BigUnsigned.o /Users/wen/Projects/include/bigint/BigUnsignedInABase.o
maketest.hpp /Users/wen/Projects/include/bigint/BigInteger.hh /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.hh /Users/wen/Projects/include/bigint/BigIntegerLibrary.hh /Users/wen/Projects/include/bigint/BigIntegerUtils.hh /Users/wen/Projects/include/bigint/BigUnsigned.hh /Users/wen/Projects/include/bigint/BigUnsignedInABase.hh /Users/wen/Projects/include/bigint/NumberlikeArray.hh
Yoshi-Air:maketest wen$ make print
maketest.cpp /Users/wen/Projects/include/bigint/BigInteger.cc /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.cc /Users/wen/Projects/include/bigint/BigIntegerUtils.cc /Users/wen/Projects/include/bigint/BigUnsigned.cc /Users/wen/Projects/include/bigint/BigUnsignedInABase.cc
maketest.o /Users/wen/Projects/include/bigint/BigInteger.o /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.o /Users/wen/Projects/include/bigint/BigIntegerUtils.o /Users/wen/Projects/include/bigint/BigUnsigned.o /Users/wen/Projects/include/bigint/BigUnsignedInABase.o
maketest.hpp /Users/wen/Projects/include/bigint/BigInteger.hh /Users/wen/Projects/include/bigint/BigIntegerAlgorithms.hh /Users/wen/Projects/include/bigint/BigIntegerLibrary.hh /Users/wen/Projects/include/bigint/BigIntegerUtils.hh /Users/wen/Projects/include/bigint/BigUnsigned.hh /Users/wen/Projects/include/bigint/BigUnsignedInABase.hh /Users/wen/Projects/include/bigint/NumberlikeArray.hh
Compiles with:
g++ -O2 -c -I/Users/wen/Projects/include/bigint 
```

这证明 make 知道我想要什么，但是当它构建时它完全不同：`c++`而不是`g++`?!

# 更新 2：

`c++`调用 clang，安装在我的系统上。

# Alex B 的解决方案：

> 但从编译命令行看来，Make 正在尝试使用隐式后缀规则，并忽略了您的模式规则。

我试过`.SUFFIXES:`了，是的，它报告发现没有规则。谢谢，我去看看说明书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:03:20.633

As I stated in the comment, it works in my environment (Mac OSX, GNU Make 3.81), so the issue may be that the makefile you've posted is incomplete or you are using a different version of Make.

But from the compilation command line it looks like Make is trying to use the implicit suffix rule, and ignores your pattern rule.

You can tell Make to ignore default rules by specifying an empty list of suffixes, so you can debug your issue further.

```
.SUFFIXES: 
```

# objective-c - 是否有任何可用于在 iphone 中生成条形码的开源库？

> ID：13964875
> 
> 赞同：0
> 
> 时间：2012-12-20T03:32:02.220
> 
> 标签：objective-c

> **可能重复：**
> [IOS 内部的条码生成](https://stackoverflow.com/questions/5759073/barcode-generation-inside-of-ios)

现在我正在使用 oblinear 库来生成条形码图像。在生成的条形码中，它显示试用，所以我想移动一些其他库是否有任何开源库在 ios 中可用以生成条形码。如果有人知道，请分享该库和示例代码。提前致谢。

# java - 文本横幅小程序反转显示文本

> ID：13964877
> 
> 赞同：1
> 
> 时间：2012-12-20T03:32:59.787
> 
> 标签：java, multithreading, applet

我正在研究水平显示移动横幅的小程序，当此文本横幅到达小程序窗口的右边界时，它应该从左边界的开始反转，我编写以下类来完成工作，问题是当文本横幅到达右侧横幅时它崩溃，小程序进入无限循环：

```
 import java.applet.*;
    import java.awt.*;
    import java.net.*;
    import java.io.*;
    import javax.swing.*;

    /*
    <applet code="banner" width=300 height=50>
    </applet>
    */
    public class TextBanner extends Applet implements Runnable 
    {
        String msg = "Islam Hamdy", temp="";
        Thread t = null;
        int state;
        boolean stopFlag;
        int x;
        String[] revMsg;
        int msgWidth;
        boolean isReached;

         public void init() 
        {

            setBackground(Color.BLACK);
            setForeground(Color.YELLOW);
        }

        // Start thread

        public void start() 
        {

            t = new Thread(this);
            stopFlag = false;
            t.start();
        }

        // Entry point for the thread that runs the banner.

        public void run() 
        {

            // Display banner
            while(true) 
            {
                try 
                {
                    repaint();
                    Thread.sleep(550);
                    if(stopFlag)
                        break;
                } catch(InterruptedException e) {}
            }
        }

        // Pause the banner.

        public void stop() 
        {
            stopFlag = true;
            t = null;
        }

        // Display the banner.

        public void paint(Graphics g) 
        {
        String temp2="";
        System.out.println("Temp-->"+temp);
        int result=x+msgWidth; 
        FontMetrics fm = g.getFontMetrics();
        msgWidth=fm.stringWidth(msg);
        g.setFont(new Font("ALGERIAN", Font.PLAIN, 30));        
        g.drawString(msg, x, 40);
        x+=10;
        if(x>bounds().width){
        x=0;
    }
        if(result+130>bounds().width){
         x=0;
        while((x<=bounds().width)){
        for(int i=msg.length()-1;i>0;i--){
        temp2=Character.toString(msg.charAt(i));
        temp=temp2+temp;
                    // it crashes here
        System.out.println("Before draw");
            g.drawString(temp, x, 40);
        System.out.println("After draw");
        repaint();
               }
            x++;
            }       // end while
         }          //end if

      }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:46:56.673

让我们从...

*   使用 Swing over AWT 组件（`JApplet`而不是`Applet`）
*   不要覆盖`paint`顶级容器的方法。有很多原因，主要影响你的是顶级容器没有双缓冲。
*   永远不要从事件调度线程以外的任何线程更新 UI，事实上，对于你想要做的事情，a`Thread`简直是过度杀戮。
*   不要使用该`paint`方法更新动画状态。您已尝试在该`paint`方法中执行所有动画，但这不是`paint`工作方式。将`paint`其视为电影中的一帧，由线程决定（在您的情况下）到哪一帧，实际上，它应该准备应该画什么。
*   您无法控制油漆系统。 `repaint`是对绘画子系统执行更新的“请求”。重绘管理器将决定何时进行实际重绘。这使得执行更新有点棘手......

**更新了示例**

![在此处输入图像描述](../Images/4e07f304dd02471928e0ce15ad9a65a8.png)![在此处输入图像描述](../Images/976d77d816d03ec25bb85ea576e20f6f.png)

```
public class Reverse extends JApplet {

    // Set colors and initialize thread.
    public void init() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }
                setBackground(Color.BLACK);
                setForeground(Color.YELLOW);
                setLayout(new BorderLayout());
                add(new TextPane());
            }
        });
    }

    // Start thread
    public void start() {
    }

    // Pause the banner.
    public void stop() {
    }

    public class TextPane extends JPanel {

        int state;
        boolean stopFlag;
        char ch;
        int xPos;
        String masterMsg = "Islam Hamdy", temp = "";
        String msg = masterMsg;
        String revMsg;
        int msgWidth;

        private int direction = 10;

        public TextPane() {
            setOpaque(false);
            setBackground(Color.BLACK);
            setForeground(Color.YELLOW);

            setFont(new Font("ALGERIAN", Font.PLAIN, 30));

            // This only needs to be done one...
            StringBuilder sb = new StringBuilder(masterMsg.length());
            for (int index = 0; index < masterMsg.length(); index++) {
                sb.append(masterMsg.charAt((masterMsg.length() - index) - 1));
            }
            revMsg = sb.toString();

            // Main animation engine.  This is responsible for making
            // the decisions on where the animation is up to and how
            // to react to the edge cases...
            Timer timer = new Timer(100, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    xPos += direction;
                    FontMetrics fm = getFontMetrics(getFont());
                    if (xPos > getWidth()) { // this condition fires when the text banner reaches the right banner
                        direction *= -1;
                        msg = revMsg;
                    } else if (xPos < -fm.stringWidth(masterMsg)) {
                        direction *= -1;
                        msg = masterMsg;
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            System.out.println(xPos);
            FontMetrics fm = g.getFontMetrics();
            msgWidth = fm.stringWidth(msg);
            g.drawString(msg, xPos, 40);
        }
    }
} 
```

**更新了其他示例**

现在，如果您想变得更加聪明...您可以利用负缩放过程，这将为您反转图形...

更新计时器...

```
 Timer timer = new Timer(100, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    xPos += direction;
                    FontMetrics fm = getFontMetrics(getFont());
                    System.out.println(xPos + "; " + scale);
                    if (scale > 0 && xPos > getWidth()) { // this condition fires when the text banner reaches the right banner
                        xPos = -(getWidth() + fm.stringWidth(msg));
                        scale = -1;
                    } else if (scale < 0 && xPos >= 0) {
                        xPos = -fm.stringWidth(msg);
                        scale = 1;
                    }
                    repaint();
                }
            }); 
```

和更新的绘画方法......

```
 protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.scale(scale, 1);
            FontMetrics fm = g2d.getFontMetrics();
            msgWidth = fm.stringWidth(msg);
            g2d.drawString(msg, xPos, 40);
            g2d.dispose();
        } 
```

**更新为“弹跳”...**

这替换了`TextPane`上一个示例中的

当文本超出右边界时，它会“反转”方向并返回到左侧，直到超出该边界，它会再次“反转”......

```
public class TextPane    public class TextPane extends JPanel {

    int state;
    boolean stopFlag;
    char ch;
    int xPos;
    String msg = "Islam Hamdy";
    int msgWidth;

    private int direction = 10;

    public TextPane() {
        setBackground(Color.BLACK);
        setForeground(Color.YELLOW);

        setFont(new Font("ALGERIAN", Font.PLAIN, 30));

        Timer timer = new Timer(100, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                xPos += direction;
                FontMetrics fm = getFontMetrics(getFont());
                if (xPos > getWidth()) {
                    direction *= -1;
                } else if (xPos < -fm.stringWidth(msg)) {
                    direction *= -1;
                }
                repaint();
            }
        });
        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.start();

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g.create();
        FontMetrics fm = g2d.getFontMetrics();
        msgWidth = fm.stringWidth(msg);
        g2d.drawString(msg, xPos, 40);
        g2d.dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:56:12.470

我现在认为您的意思是“应该跳回到起点”，但这又滑了回去。但顺便说一句，我不会考虑为这类事情使用小程序，原因有两个。

1.  滚动文本很糟糕。
2.  如果页面“必须有”滚动文本，最好使用 HTML 和 JS（和 CSS）。

* * *

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/*
 * <applet code="TextBanner" width=600 height=50> </applet>
 */
public class TextBanner extends JApplet {

    private TextBannerPanel banner;

    // Set colors and initialize thread.
    @Override
    public void init() {
        banner = new TextBannerPanel("Islam Hamdy");
        add(banner);
    }

    // Start animation
    @Override
    public void start() {
        banner.start();
    }

    // Stop animation
    @Override
    public void stop() {
        banner.stop();
    }
}

class TextBannerPanel extends JPanel {

    String msg;
    int x;
    int diff = 5;
    Timer timer;
    Font font = new Font("ALGERIAN", Font.PLAIN, 30);

    public TextBannerPanel() {
        new TextBannerPanel("Scrolling Text Banner");
    }

    public TextBannerPanel(String msg) {
        this.msg = msg;
        setBackground(Color.BLACK);
        setForeground(Color.YELLOW);
        ActionListener animate = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                repaint();
            }
        };
        timer = new Timer(100, animate);
    }

    // Display the banner.
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setFont(font);

        FontMetrics fm = g.getFontMetrics();
        int w = (int) fm.getStringBounds(msg, g).getWidth();

        g.drawString(msg, x, 40);

        x += diff;

        diff = x+w > getWidth() ? -5 : diff;
        diff = x < 0 ? 5 : diff;
    }

    public void start() {
        timer.start();
    }

    public void stop() {
        timer.stop();
    }
} 
```

## 旧答案

> ..应该..出现反转..`"Islam Hamdy"`

另见`JArabicInUnicode`：

![在此处输入图像描述](../Images/5929ab070983e6c7c2248088bbe6ab49.png)

```
import javax.swing.*;
import java.awt.*;

/**
 * "Peace Be Upon You", "Aslam Alykm' to which the common reply is "Wa alaykum
 * as salaam", "And upon you, peace". Information obtained from the document
 * http://www.unicode.org/charts/PDF/U0600.pdf Copyright &copy; 1991-2003
 * Unicode, Inc. All rights reserved. Arabic is written and read from right to
 * left. This source is adapted from the original 'Peace' source written by
 * mromarkhan ("Peace be unto you").
 *
 * @author Omar Khan
 * @author Andrew Thompson
 * @version 2004-05-31
 */
public class JArabicInUnicode extends JFrame {

    /**
     * Unicode constant used in this example.
     */
    public final static String ALEF = "\u0627",
            LAM = "\u0644",
            SEEN = "\u0633",
            MEEM = "\u0645",
            AIN = "\u0639",
            YEH = "\u064A",
            KAF = "\u0643",
            HEH = "\u0647";
    /**
     * An array of the letters that spell 'Aslam Alykm'.
     */
    String text[] = {
        ALEF, //a 
        LAM + SEEN, //s 
        LAM, //l 
        ALEF, //a 
        MEEM, //m 
        " ",
        AIN, //a 
        LAM, //l 
        YEH, //y 
        KAF, //k 
        MEEM //m 
    };

    /**
     * Displays the letters of the phrase 'Aslam Alykm' as well as the words
     * spelt out letter by letter.
     */
    public JArabicInUnicode() {
        super("Peace be upon you");

        JTextArea textwod = new JTextArea(7, 10);
        textwod.setEditable(false);
        textwod.setFont(new Font("null", Font.PLAIN, 22));

        String EOL = System.getProperty("line.separator");

    // write the phrase to the text area 
    textwod.append(getCharacters() + EOL);

        // now spell it, one letter at a time 
        for (int ii = 0; ii <= text.length; ii++) {
            textwod.append(getCharacters(ii) + EOL);
        }
        textwod.setCaretPosition(0);

        getContentPane().add(
                new JScrollPane(textwod,
                ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED),
                BorderLayout.CENTER);

        pack();
        setMinimumSize(getPreferredSize());
        try {
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLocationRelativeTo(null);
        } catch (Exception e) {
        }  // allows to run under 1.2 

    }

    /**
     * Get a string of the entire phrase.
     */
    String getCharacters() {
        return getCharacters(text.length);
    }

    /**
     * Get a string of the 1st 'num' characters of the phrase.
     */
    String getCharacters(int num) {
        StringBuffer sb = new StringBuffer();
        for (int ii = 1; ii < num; ii++) {
            sb.append(text[ii]);
        }
        return sb.toString();
    }

    /**
     * Instantiate an ArabicInUnicode frame.
     */
    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new JArabicInUnicode().setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# c# - 如何在 C# 中使用自定义事件

> ID：13964878
> 
> 赞同：0
> 
> 时间：2012-12-20T03:33:00.503
> 
> 标签：c#, events, animation, dll

我有一个库，用于在 Windows 窗体上进行一些出色的转换，它具有在转换完成时触发事件的功能，但我不知道如何使用它。

[http://code.google.com/p/dot-net-transitions/wiki/CodingWithTransitions#Using_the_TransitionCompletedEvent](http://code.google.com/p/dot-net-transitions/wiki/CodingWithTransitions#Using_the_TransitionCompletedEvent)

有图书馆

这是我需要处理的事件

过渡完成事件

如果有人可以帮助我了解如何使用此事件，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:36:58.367

您注册一个方法来处理事件。

```
transition.TransitionCompletedEvent += theHandlerFunction; 
```

处理函数应具有以下签名：

```
private void theHandlerFunction(object sender, Args args) 
```

# json - 为什么我不能在 mongovue 上插入这个 json

> ID：13964880
> 
> 赞同：-1
> 
> 时间：2012-12-20T03:33:41.690
> 
> 标签：json, mongodb, mongovue

```
{
  "_id" : "648290899",
  "First_Name" : "Daniel",
  "Last_Name" : "Wu",
  "Gender" : "male",
  "Birthday" : "13/10/1978",
  "Email" : "dgozali@binacitra.com",
  "Bookmark" : ["mal-taman-anggrek__-6.18_106.79"],
  "Token" : "",
  "LikeOrDislike" : {
    "mal-taman-anggrek__-6.18_106.79" : 1,
    "bebek-goreng-h.-slamet__-6.20_106.77" : 1,
    "mcdonald's__-6.31_106.86" : 1,
    "pasar-rebo__-6.31_106.87" : 0
  },
  "Nearby" : [],
  "History" : [{
      "1355915008" : {
        "day" : "December 19, 2012, 6:03 pm",
        "LikeOrDislike" : {
          "mal-taman-anggrek__-6.18_106.79" : 1
        }
      }
    }, {
      "1355915015" : {
        "day" : "December 19, 2012, 6:03 pm",
        "Bookmark" : {
          "add" : ["mal-taman-anggrek__-6.18_106.79"]
        }
      }
    }, {
      "1355920137" : {
        "day" : "December 19, 2012, 7:28 pm",
        "LikeOrDislike" : {
          "bebek-goreng-h.-slamet__-6.20_106.77" : 1
        }
      }
    }, {
      "1355920233" : {
        "day" : "December 19, 2012, 7:30 pm",
        "LikeOrDislike" : {
          "mcdonald's__-6.31_106.86" : 1
        }
      }
    }, {
      "1355920441" : {
        "day" : "December 19, 2012, 7:34 pm",
        "LikeOrDislike" : {
          "pasar-rebo__-6.31_106.87" : 0
        }
      }
    }],
  "ImageProfile" : "http://graph.facebook.com/648290899/picture/?type=large"
} 
```

我收到投诉说 pasar-rebo__-6.31_106.87 包含一个点。好的，它包含一个点。所以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:51:31.790

> 字段名称不能包含点（即 .）、美元符号（即 $）或空字符。

来源：[MongoDB 官方文档](http://docs.mongodb.org/manual/reference/limits/#Restrictions%20on%20Field%20Names)

原因是 Mongo 允许 javascript 样式的点表示法访问子集合。此外，点用作嵌入文档的分隔符，如此[处所述](http://grokbase.com/t/gg/mongodb-user/11bv4pkbf1/why-dots-in-field-names-are-illegal)

# android - 如何在android中使用uri下载文件？

> ID：13964881
> 
> 赞同：0
> 
> 时间：2012-12-20T03:33:41.587
> 
> 标签：android

我的代码如下。我想在编辑文本中输入 URI 并通过单击下载按钮下载该文件。所以请给我一个下载文件的解决方案。

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/txtvUri"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/URi"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/etxtUri"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" 
            android:hint="Enter the URI">

            <requestFocus />
        </EditText>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/download"
            android:clickable="true"
            android:onClick="click" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:16:06.227

您可以使用 Apache HttpClient 或 java 的 HttpURLConnection。

查看[http://www.androidsnippets.com/download-an-http-file-to-sdcard-with-progress-notification](http://www.androidsnippets.com/download-an-http-file-to-sdcard-with-progress-notification)以获取后者的示例。

# c# - 将文本框绑定到网络浏览器？

> ID：13964886
> 
> 赞同：-1
> 
> 时间：2012-12-20T03:34:19.990
> 
> 标签：c#, windows-phone-7

您能否告诉我如何将 textBox1（地址栏）绑定到 webBrowser1（网页），以便用户在页面上导航到的内容将显示在框中？还是他们这样做的另一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:44:37.890

您可以拥有 WebBrowser 的事件，例如 DocumentCompleted、Navigating、Navigated、

请查看示例代码，如果您有任何疑问，请告诉我。

```
 private void button1_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://www.google.com");
        }

        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            textBox1.Text = webBrowser1.Url.ToString();

        } 
```

# javascript - javascript日期验证错误

> ID：13964887
> 
> 赞同：2
> 
> 时间：2012-12-20T03:34:26.857
> 
> 标签：javascript, jquery-ui

我已经复制并修改了一个 js 日期验证器 - 来自（[http://www.javascriptkit.com/script/script2/validatedate.shtml](http://www.javascriptkit.com/script/script2/validatedate.shtml)）

我将它用作 jquery 模态表单的一部分，它不会让我超过第一个条件.. 即使值是以 datepicker jquery UI 的形式放置的

```
function checkDate( d, n ){
        if ( d.val().length > 0 ) {
            var validformat = /^\d{2}\/\d{2}\/\d{4}$/; //Basic check for format validity
            if ( !validformat.test( d.value ) ) {
                d.addClass( "ui-state-error" );
                updateTips( n + " must be a valid date." );
                return false;
            } else { //Detailed check for valid date ranges
                var monthfield = d.value.split( "/" )[0]
                var dayfield = d.value.split( "/" )[1]
                var yearfield = d.value.split( "/" )[2]
                var dayobj = new Date( yearfield, monthfield-1, dayfield )
                if ( ( dayobj.getMonth()+1 != monthfield ) || ( dayobj.getDate() != dayfield ) || ( dayobj.getFullYear() != yearfield ) ) {
                    d.addClass( "ui-state-error" );
                    updateTips( "Invalid Day, Month, or Year range detected. Please correct and submit again." + n + " must be a valid date." );
                    return false;
                } 
            }
            return true;
        }
    } 
```

当输入 12/25/2012 的值时，它返回...“通知日期必须是有效日期。” 来自 updateTips( n + " 必须是有效日期。" ); 线...

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:39:06.053

I'm not sure what `d` is. Is it a DOM node? Then you can't call `.val()` on it. Is it a jQuery wrapper object? Then accessing its `.value` property will likely result in `undefined`, and the stringification of that value does not match your format.

Use some more variables, like

```
var value = d.val(); // to test length, regex and use in split
…
var parts = value.split("/"); // to get year, month and day part 
```

# jquery - 如何在html中精确布局div

> ID：13964891
> 
> 赞同：3
> 
> 时间：2012-12-20T03:34:40.333
> 
> 标签：jquery, html, css

我被困在试图在我的页面中精确布局一个元素。我希望有人可以帮助我。

请查看[http://jsfiddle.net/malaikuangren/5ssqP/2/show/](http://jsfiddle.net/malaikuangren/5ssqP/2/show/)。

谢谢。

**我的困惑问题清单：**

*   我不知道为什么上面有一个空格`dev-footer`虽然我已经精确计算了元素的高度（你可以看到我在文档准备事件中做了什么）
*   这个问题也与页面右侧的表格内容有关
*   请尝试复制更多行以查看会发生什么

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:56:41.140

不要**使用**Javascript 来调整这些元素的大小。更喜欢直接使用 CSS。这将允许您编写更易于编辑且性能更好的更简洁的代码。在特定情况下，您不需要使用 Javascript 手动计算高度。相反，利用 CSS 定位来实现您想要的结果。

具体来说，将您的主要内容 div 设置为占据所有页面的高度，不包括页脚和页眉，如下所示：

```
#content {
    position: fixed;
    bottom: 40px;
    top: 100px;
} 
```

然后调整该 div 的内容以占用尽可能多的空间，就像您希望它们即时运行一样。例如，您希望侧边栏支架占据#content div 的整个高度。因此，以下 CSS 代码就足够了：

```
#sidebar-holder {
    position: absolute;
    top: 0;
    bottom: 0;
} 
```

同样，您的“拆分器” div 可以使用 CSS 定位来定位，但最好使用 CSS 边框来实现：

```
#sidebar-holder {
    border-right: 5px solid black;
} 
```

为避免广泛且难以管理的绝对定位，`position: relative`请在父元素和`position:absolute`子元素中使用该指令。此技术允许您将子元素定位在由其最近的相对父级定义的框内的绝对坐标中。因此，坐标 (0, 0) 对应于父框的左上角。

I've reproduced in your code the full behavior that you desire using CSS only and it fixes your problems directly, without messy pixel value calculations. In addition, replacing Javascript with CSS makes it behave correctly when resizing the page and does not require rerunning your jQuery code on resize events.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:54:31.043

您没有足够的内容来填补 和 之间的`footer`空白`content`。如果您在没有最大化屏幕时查看页面，则没有间隙。有很多方法可以解决它。我会增加`height`页脚或增加`min-height`您的内容。真的，这取决于你。

# ruby-on-rails - 经验丰富的 Web 开发人员，heroku 的学习曲线如何？

> ID：13964892
> 
> 赞同：0
> 
> 时间：2012-12-20T03:34:44.813
> 
> 标签：ruby-on-rails, ruby, heroku, web-deployment

我刚开始从 spring 开发切换到 ruby​​ on rails。我想从以前使用过它的人那里知道，为 heroku 部署的 rails 应用程序的学习曲线是什么？

heroku 部署有什么特殊需求吗？

Heroku的主要优点和缺点是什么？

先谢谢了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:54:49.193

**Heroku 是最简单的 Rails 部署。** 这是一个为您的应用程序提供的完全托管的黑盒解决方案，具有出色的文档，并且他们不断改进它，着眼于可用性。一旦你的应用程序有了一个可以工作的开发版本，就可以在 Heroku 上启动和运行了。有关详细信息，请参阅[快速入门](https://devcenter.heroku.com/articles/quickstart)和[Ruby 入门](https://devcenter.heroku.com/articles/ruby)文章。

这种易用性的代价是一定程度的不灵活。他们在使事情开放方面做得很好，但是一种万能的托管架构方法不可避免地会导致问题。如果您只有一个带有标准关系数据库和常见负载配置文件的中小型 Web 应用程序，那么这不是什么大问题。如果您需要具有各种附加服务（例如 redis、sphinx、rabbitmq 等）的更多自定义堆栈，那么您可能会使用第三方插件。所有这些托管解决方案和 Heroku 本身都比它们构建的 Amazon Web Services 收取溢价，这反过来又比运行您自己的服务器的原始硬件/托管成本收取溢价。如果您的网站规模非常大，您不仅会支付巨额溢价，但是托管服务提供商为一般情况所做的假设将不可避免地不适合您的特定情况以及自定义调整的集群。这就是为什么像谷歌、Facebook、雅虎这样真正的大公司都运行自己的数据中心的原因，因为在这样的规模下，拥有一支每年 20 万美元的专门系统工程师队伍来设计和维护您的基础设施，只需从远离商品解决方案的节省。

但是在小范围内，尤其是在产品的早期快速迭代期间，使用 Heroku 之类的东西意味着您可以完全专注于您的应用程序，并且对基础架构的担忧最少。一个例外是，如果你有大量的 Linux 系统管理员，那么 Heroku 甚至可能不值得早期花费，在这种情况下，你可能会更喜欢 Engine Yard 之类的东西，它仍然为你提供完整的 Rails 堆栈。盒子，但让你更接近金属。

不管怎样，Heroku 是 Rails 初学者的一个很好的起点。入门是免费的，您没有理由不能进行成本评估并在以后有更多经验时迁移出去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:00:38.853

gtd 的回答很好，只是为了补充一点我在使用 heroku 时遇到的问题：

大约一年前，当我开始使用 Ruby on Rails 和 Heroku 时，给我最大的问题是，默认情况下，在我的开发机器上，Rails 使用 SQLite，而在 Heroku 上，默认情况下是 postgreSQL。

它通常不会带来太多麻烦，但是某些事情（例如`GROUP BY`工作方式不同）当某些事情可以在我的开发机器上而不是在 Heroku 上工作时让我感到非常沮丧。我建议你在你的开发机器上安装一个 postgreSQL 服务器，用于你计划在 Heroku 上部署的非平凡应用程序。

还有一些其他的事情你不能在 Heroku 上做，而你可以在 VPS 上做，我在与支付提供商合作时遇到了问题，要求我有一个静态 IP，因为 Heroku 是一个云服务，它不可能完成了，我不得不使用代理来连接提供商。

还有一些 gem（很少）你不能安装在那里，你不能安装一些 gem 依赖的二进制文件，尽管这对我来说从来都不是问题，请记住这一点。

除了这几个问题之外，Heroku 是开始部署应用程序的最简单的地方。

# actionscript-3 - Flash AS3 多点触控事件处理程序

> ID：13964899
> 
> 赞同：2
> 
> 时间：2012-12-20T03:35:25.400
> 
> 标签：actionscript-3, flash, multi-touch

我在一帧中有 3 个单独的影片剪辑，每个剪辑都可以使用简单的触摸和拖动事件在舞台上移动，如下所示，以防它具有一定的相关性。我想将三个剪辑中的每一个拖到第四个剪辑上，当所有 3 个剪辑都包含在第四个剪辑中时，我希望触发一个事件来更改当前帧。在 AS3 中执行此操作的最简单方法是什么？任何例子都会很棒，因为我是一个完整的初学者。谢谢

```
 Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

    Gem1_MC.addEventListener(TouchEvent.TOUCH_BEGIN, fl_TouchBeginHandler_2);
    Gem1_MC.addEventListener(TouchEvent.TOUCH_END, fl_TouchEndHandler_2);

    var fl_DragBounds_2:Rectangle = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);

    function fl_TouchBeginHandler_2(event:TouchEvent):void

{

 event.target.startTouchDrag(event.touchPointID, false, fl_DragBounds_2);
    }

    function fl_TouchEndHandler_2(event:TouchEvent):void
    {
        event.target.stopTouchDrag(event.touchPointID);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:52:21.617

将来，您希望实现一个解决方案，将您的拖放功能抽象到一个类中，但要使用您所拥有的，这是一个基本解决方案：

跟踪这三个何时`MovieClips`被认为“包含在”第四个剪辑中

```
var contained:Array = new Array(false, false, false); 
```

如果对象完成拖动，请检查它是否包含在`mc1`. 在这些检查结束时，看看它们是否都是真的：

```
function fl_TouchEndHandler_2(event:TouchEvent):void {
    // Drag & drop stuff...
    contained[2] = Gem2_MC.hitTestObject(Gem4_MC)); // where Gem4_MC is your 4th movie clip.

    if (contained.indexOf(false) == -1) { // This returns -1 if it can't find false
        gotoAndStop(frame_number_you_want);
    }
} 
```

作为旁注，`hitTestObject()`使用一个简单的“边界框”来检测“碰撞”。这意味着即使两个影片剪辑看起来并不像它们实际接触，它也可能将命中记录为真实。Flash 中的像素完美碰撞检测是可能的，但更复杂，值得一文。 [可以在此处找到 AS3 中像素完美碰撞的简单示例](http://www.freeactionscript.com/2009/05/pixel-perfect-collision-detection/)。

# file-io - 在 tcl 中递归复制目录

> ID：13964900
> 
> 赞同：3
> 
> 时间：2012-12-20T03:35:26.103
> 
> 标签：file-io, tcl

当我尝试将目录递归复制到另一个目录时，我收到一条错误消息。如果 foo 是我的源并且 bar 是我的目标目录，我会收到错误消息

```
“不能用目录“foo”覆盖文件“bar/foo”
```

我的 tcl 命令是

```
file mkdir "bar"
file copy -force  ./foo bar 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T19:47:33.183

您可以使用执行：

```
exec cp -f ./foo bar 
```

它总是对我有用。

# ajax - AJAX 代码未按预期工作

> ID：13964903
> 
> 赞同：2
> 
> 时间：2012-12-20T03:36:07.790
> 
> 标签：ajax

我是 AJAX 的新手，并试图在下面的代码中运行它，但它不起作用...... Ajax_info.txt 文件位于我的本地驱动器中。

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","c:/python27/ajax_info.txt",true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:50:27.333

通常，由于安全问题，浏览器不会打开本地文件。根据浏览器的不同，我想如果引用的 HTML 文件也在本地加载，它可能会打开它，因为从技术上讲，这将在同一个域中。通常，在使用 AJAX 时，您将使用 Web 服务器上的文件（即使 Web 服务器托管在本地）。无论如何，如果它确实有效，您将从本地文件收到状态 0、状态 200。状态 200 是一个 HTTP 协议状态，不会为本地文件返回，因为它不是通过 HTTP 加载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:38:41.800

我有同样的问题。我删除了`if (xmlhttp.readyState==4 && xmlhttp.status==200)`它，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:57:35.877

请查看此代码并运行您必须提供这样的参数

```
 xmlhttp.open("GET","?c:/python27/ajax_info.txt",true); 
```

告诉我你想在你的 div 中显示什么

```
 <!DOCTYPE html>
            <html>
            <head>
            <script>
            function loadXMLDoc()
            {

            var xmlhttp;
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {

                var str = xmlhttp.responseText
                alert(str)
                document.getElementById("myDiv").innerHTML="change";
                }
              }
            xmlhttp.open("GET","?c:/python27/ajax_info.txt",true);
            xmlhttp.send(null);
            }
            </script>
            </head>
            <body>

            <button type="button" onclick="loadXMLDoc()">Change Content</button>
            <div id="myDiv" >Let AJAX change this text</div>
            </body>
            </html> 
```

# c# - 通过 GET 发送到 MVC 控制器的 GUID JSON 列表在到达时为空，POST 有效

> ID：13964904
> 
> 赞同：2
> 
> 时间：2012-12-20T03:36:22.080
> 
> 标签：c#, jquery, ajax, json, asp.net-mvc-3

我将一组类似 GUID 的对象发送到我的 MVC 控制器，如下所示：

```
$.ajax({
    type: 'GET',
    url: 'http://localhost:61975/Song/GetByIds',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: {
        songIds: JSON.stringify(songIds)
    },
    success: function (data) {
    },
    error: function(error) {
        console.error(error);
    }
}); 
```

在我的请求标头中发送的数据如下所示：

> 歌曲名称：[“6cb44f55-9fd5-4540-9b11-75ccce816d67”]

我的 MVC3 控制器方法如下所示：

```
[HttpGet]
public ActionResult GetByIds(List<Guid> songIds)
{
    SongManager songManager = new SongManager(SongDao, PlaylistDao, PlaylistItemDao);
    IList<Song> songs = songManager.GetByIds(songIds);
    return new JsonDataContractActionResult(songs);
} 
```

在这个实现中，我收到一个非空的 List 对象，但它始终是空的。我的错误是什么？

编辑：如果我这样发布而不是 GET 它工作正常。怎么会？？

```
$.ajax({
    type: 'POST',
    url: 'http://localhost:61975/Song/GetByIds',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({
        songIds: songIds
    }),
    success: function (data) {
        loadedSongs = loadedSongs;
        if (callback) {
            callback(data);
        }
    },
    error: function(error) {
        console.error(error);
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T04:18:59.363

您应该尝试为您的 jQuery Ajax 请求使用设置为 true 的“传统”选项。

有关详细信息，请参阅文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您还应该删除 JSON.Stringify 部分。

你能试试这个，让我知道它是否适合你吗？我做了一个测试，它工作得很好。

```
$.ajax({
    type: 'GET',
    url: 'http://localhost:61975/Song/GetByIds',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    traditional: true, //// traditional option to true
    data: {
       songIds: songIds  /// no JSON.stringify
    },
    success: function (data) {
    },
    error: function(error) {
      console.error(error);
    }
}); 
```

# haskell - 在 Ubuntu 12 上安装 Haskell

> ID：13964907
> 
> 赞同：24
> 
> 时间：2012-12-20T03:36:50.673
> 
> 标签：haskell, ubuntu

我浏览了一些关于在 Ubuntu 上安装 Haskell 的教程。他们基本上讲述了 Ubuntu 11，并提到它需要付出很多努力。我没有发现在 Ubuntu 12 上安装 Haskell。

是否有任何教程或有关如何做到这一点的东西？是否有适用于 Ubuntu 12 x64 的安装程序？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-20T03:39:21.577

我认为

`sudo aptitude install haskell-platform`

应该做的伎俩。

再三考虑，如果你没有`aptitude`安装，你可以这样做

`sudo apt-get install haskell-platform`

`ghci`从那里，您可以通过从命令行调用来访问 REPL 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-11T22:30:57.173

在 Ubuntu 13.04 上，我必须执行以下操作，并且我想安装herbalizer haml -> erb 转换器。

```
sudo apt-get install ghc6 ghc6-prof ghc6-doc cabal-install
cabal update
cabal install herbalizer
sudo ln ~/.cabal/bin/herbalizer /usr/bin/herbalizer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T18:15:12.463

运行 Haskell 所需要做的就是通过输入以下命令来安装 GHCI：

```
sudo apt-get install ghc-ghci 
```

现在您可以通过在终端中编写**ghci来运行它。**您可以在 ghci 提示符下通过以下命令编译您的文件：

```
:load File 
```

希望这会有所帮助

# python - 使用 PyInstaller onefile 选项和清单将 UAC 设置为 requireAdministrator

> ID：13964909
> 
> 赞同：5
> 
> 时间：2012-12-20T03:36:54.777
> 
> 标签：python, windows, visual-studio, pyinstaller

好的，我一直在四处寻找这个问题。我正在`GraphicScriptWizard.exe`使用 -i -F -w 和 -m 选项构建一个使用 PyInstaller 2.0 版调用的应用程序。

我定义的与 -m 选项一起使用的清单文件被调用`GraphicScriptWizard.exe.manifest`并具有以下内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="x86"
     name="GraphicScriptWizard"
     type="win32"/> 

  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

使用此清单和命令行选项，我没有得到提示提升的可执行文件。

为了完整起见，Pyinstaller 生成的规范文件是：

```
# -*- mode: python -*-
a = Analysis(['GraphicScriptWizard.py'],
             pathex=[<Full Development Path>],
             hiddenimports=[],
             hookspath=None)
pyz = PYZ(a.pure)
exe = EXE(pyz,
          a.scripts,
          a.binaries,
          a.zipfiles,
          a.datas,
          name=os.path.join('dist', 'GraphicScriptWizard.exe'),
          debug=False,
          strip=None,
          upx=True,
          console=False , icon='SP.ico', manifest='GraphicScriptWizard.exe.manifest')
app = BUNDLE(exe,
             name=os.path.join('dist', 'GraphicScriptWizard.exe.app')) 
```

我尝试使用不带 -m 选项的 pyinstaller 进行编译，并使用以下命令嵌入 mt：

```
mt.exe -manifest GraphicScriptWizard.exe.manifest -outputresource:GraphicScriptWizard.exe;#1 
```

当我这样做时，应用程序会提示我提升，但是当程序运行时出现错误：

`"Cannot open self <Full path to exe>\GraphicScriptWizard.exe or archive..."`

我真的束手无策，希望更熟悉 Windows 资源和清单的人可以为我提供更多的信息。我的清单 XML 错了吗？我使用 Pyinstaller 的方法错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T20:48:44.657

我自己也刚走这条路，以下是我的观察和经验。

首先要知道清单有两个有效位置：

1.  作为资源嵌入在可执行文件（或 dll）中

2.  正如您当前所做的那样，在可执行文件（或 dll）旁边。

在此处阅读清单：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa374191 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191(v=vs.85).aspx)

根据我的经验，您可以同时使用两者，但如果有任何重叠，嵌入式清单优先。这就是把你搞砸的原因。Pyinstaller 创建的可执行文件有一个嵌入式清单，它将请求的执行级别设置为“asInvoker”，它会覆盖您正在使用的清单中的级别。

--manifest（或 EXE() 的 manifest 参数）仅修改 Pyinstaller 放置在可执行文件/dll 旁边的清单，而不是嵌入式清单。

因此，我们可以使用 mt.exe 来更改嵌入式清单，但正如您所发现的，这会导致应用程序无法运行。这是因为 Pyinstaller 创建的应用程序实际上是两部分；一个提取档案的小型可执行文件，然后在其捆绑的 python 环境中设置并启动您的代码，以及可执行文件操作的档案。这是有效的，因为可执行文件的规范允许在可执行文件的末尾附加任意数据，但在可执行文件本身之外，由记录在可执行文件头中的大小定义。当我们在 Pyinstaller 创建的可执行文件上运行 mt.exe 时，它​​会查看标头以获取大小，并忽略除此之外的任何内容，从而在使用新清单保存您的可执行文件时丢弃该存档数据，

我使用的解决方案是在存档数据附加到可执行文件之前修改清单，这需要修改 Pyinstaller 源代码。Pyinstaller 源具有用于更新可执行文件/dll 中的资源的实用程序，它用作其构建过程的一部分。你会想在你的 Pyinstaller 位置查看**build.py**、**winmanifest.py**和**winresource.py**。我向 EXE 类添加了一个参数，然后在该类的 assemble 方法中添加了一个步骤来更新清单，我在它附加档案之前就这样做了。我添加的肉是这样的：

```
if self.manifest_override != None:
        print "Overriding default manifest"
        tmpnm = tempfile.mktemp()
        shutil.copy2(exe, tmpnm)
        os.chmod(tmpnm, 0755)
        winmanifest.UpdateManifestResourcesFromXMLFile(tmpnm, self.manifest_override, names=[1], languages=[1033])
        exe = tmpnm
        trash.append(tmpnm) 
```

我把它放在下面的行之前：`exe = checkCache(exe, ...` 它应该在上面，但接近`print "Appending archive to EXE"...`

这个解决方案一直对我有用，但我对它并不满意。我宁愿覆盖嵌入的默认清单，而不是更新它，但到目前为止我的努力没有结果。

对不起，文字墙，但这里发生了很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:50:38.710

不是一个完整的解决方案，但可能是一个有用的提示。

Python 2.7.5 AMD64 不适用于上面的清单文件 Python 2.7.5 32 位工作得很好。

所以也许这只是 Python 版本的限制。

# php - assigning static var to non-static var, method to return the values not working

> ID：13964912
> 
> 赞同：6
> 
> 时间：2012-12-20T03:37:01.093
> 
> 标签：php, static-variables

I'm new to PHP and practicing using static variables. I decided to grab an example that I learnt from C++ and re-write it for PHP (example from the bottom of [this article](http://www.learncpp.com/cpp-tutorial/811-static-member-variables/)).

There's a class with two private variables (one static), a constructor and a get-method. The constructor assigns the static variable's value to the second private variable, and then increments.

```
<?php
class Something
{
    private static $s_nIDGenerator = 1;
    private $m_nID;

    public function Something() { 
       $m_nID = self::$s_nIDGenerator++;
       echo "m_nID: " . $m_nID . "</br>"; //for testing, can comment this out
    }
    public function GetID() {
        return $m_nID;
    }

}

// extra question:
// static variable can be assigned a value outside the class in C++, why not in PHP?
// Something::$s_nIDGenerator = 1; 

    $cFirst = new Something();
    $cSecond = new Something();
    $cThird = new Something();

    echo $cFirst->GetID() . "</br>";
    echo $cSecond->GetID() . "</br>";
    echo $cThird->GetID() . "</br>";
?> 
```

Using the echo test in line 9 to see if m_nID is getting a value I see:

```
m_nID: 1
m_nID: 2
m_nID: 3 
```

But these values are **not** being returned by the "->GetID()" calls. Any ideas why?

*Edit: both replies so far have solved this, I wish I could "check" them both, so thank you! I'll leave the original code in the question as-is for any future people who have a similar problem*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T03:38:45.930

Your background in C++ led up to this issue, which is an easy mistake to make. In PHP, all instance (or object) variables are referenced using `$this->`, and static (or class) variables with `self::`. Based on your code:

```
public function GetID() {
    return $m_nID;
} 
```

Access to the private variable `$m_nID` should be scoped like this:

```
public function GetID() {
    return $this->m_nID;
} 
```

And inside your constructor:

```
$m_nID = self::$s_nIDGenerator++; 
```

It should have been:

```
$this->m_nID = self::$s_nIDGenerator++; 
```

**Q & A**

> Why is there no need to put `$` before `m_nID` when using `$this->`

The above two ways of referencing instance and class variables come with a very different kind of syntax:

1.  `$this` is the instance reference variable and any properties are accessed using the `->` operator; the `$` is not repeated for the property names themselves, although they're present in the *declaration* (e.g. `private $myprop`).

2.  `self::` is synonymous to `Something::` (the class name itself); it doesn't reference an instance variable and therefore has no `$` in front of it. To differentiate static variables from class constants (`self::MYCONST`) and class methods (`self::myMethod()`) it's prefixed with a `$`.

**Extra**

That said, `$this->$myvar` is accepted too and works like this:

```
private $foo = 'hello world';

function test()
{
    $myvar = 'foo';
    echo $this->$foo; // echoes 'hello world'
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:44:44.593

```
class Something{
    private static $s_nIDGenerator = 1;
    private $m_nID;

    public function Something() { 
       $this->m_nID = self::$s_nIDGenerator++;
    }
    public function GetID() {
        return $this->m_nID;
    }

} 
```

It is interesting to note the difference between using `self::$s_nIDGenerator` on a static variable vs using `$this->s_nIDGenerator` on a static variable, whereas `$this->` will not store anything.

# jquery - jQuery无法使元素下方的内容在打开和关闭时上下移动

> ID：13964916
> 
> 赞同：0
> 
> 时间：2012-12-20T03:37:38.600
> 
> 标签：jquery, html, css

我有这个网页...

[http://grabbers.maddoggmedia.com/](http://grabbers.maddoggmedia.com/)

当访问者单击聊天区域内的文本输入时，我希望打开聊天，它确实如此。但是，我似乎无法弄清楚如何在打开和关闭时上下移动下面的内容。截至目前，它只是在其他内容之下。

我真的需要尽快完成，我将不胜感激。我今天花了 6 个小时试图找到正确的答案，但无济于事。

[http://jsfiddle.net/maddoggmedia/6LK4p/](http://jsfiddle.net/maddoggmedia/6LK4p/)

```
 $(document).ready(function() {

 $('#chat-box-chats').hide();

 $(".chat-box-textinput").click(function(){
 $("#chat-box-chats").show();
 });

 $(".chat-box-textinput").click(function(){
 $(".chat-box-banner").show();
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:40:22.513

在您的网站上发现了以下代码块：

```
 // Prepare layout options.
    var options = {
        autoResize: true,
        // This will auto-update the layout when the browser window is resized.
        container: $('#main'),
        // Optional, used for some extra CSS styling
        offset: 40,
        // Optional, the distance between grid items
        itemWidth: 264 // Optional, the width of a grid item
    };

    // Get a reference to your grid items.
    var handler = $('#tiles li');

    // Call the layout function.
    handler.wookmark(options); 
```

所以每次更新列表时都要调用它..

JS：

```
 function updateTable() {
    var options = {
        autoResize: true,
        container: $('#main'),
        offset: 40,
        itemWidth: 264
    };
    var handler = $('#tiles li');
    handler.wookmark(options);
}
$(document).ready(function() {
    $('div[id*="chat-box-chats"]').hide();
    updateTable();

    $(".chat-box-textinput textarea").focus(function() {
        $(this).parent().parent().find("#chat-box-chats").show();
         updateTable();
    });

    $(".chat-box-textinput textarea").blur(function() {
        $(this).parent().parent().find("#chat-box-chats").hide();
         updateTable();
    });

    $(".chat-box-textinput").click(function() {
        $(".chat-box-banner").show();
    });
}); 
```

JsFiddle：[演示](http://fiddle.jshell.net/apAAG/2/show/)| [资源](http://fiddle.jshell.net/apAAG/2/)

使用小提琴：http: [//jsfiddle.net/apAAG/](http://jsfiddle.net/apAAG/)

## **编辑：**

**主页.js**：

```
 function updateTable() {
    var options = {
        autoResize: true,
        container: $('#main'),
        offset: 40,
        itemWidth: 264
    };
    var handler = $('#tiles li');
    handler.wookmark(options);
}

// bookmark stars
 $(document).ready(function() {
 $('#chat-box-chats').hide();
 $('#nav-status-offline').hide();
 $('.chat-box-banner').hide();
 // hides the slickbox as soon as the DOM is ready

 $(".chat-box-textinput").click(function(){
  $("#chat-box-chats").show();
});
 $("#nav-status").click(function(){
  $("#nav-status-offline").show();
});
 $("#nav-status").click(function(){
  $("#nav-status").hide();
});
 $("#nav-status-offline").click(function(){
  $("#nav-status-offline").hide();
});
 $("#nav-status-offline").click(function(){
  $("#nav-status").show();
});
 $(".chat-box-textinput").click(function(){
  $(".chat-box-banner").show();
});

$('span.bookmark').click( function() {
$('span.bookmark').toggleClass("pushed");
$('span.bookmark img').toggleClass("noopacity");
});

$('textarea').each(function() {
// Stores the default value for each textarea within each textarea
$.data(this, 'default', this.value);
}).focus(function() {
    // If the user has NOT edited the text clear it when they gain focus
    if (!$.data(this, 'edited')) {
        this.value = "";
    }
}).change(function() {
    // Fires on blur if the content has been changed by the user
    $.data(this, 'edited', this.value != "");
}).blur(function() {
    // Put the default text back in the textarea if its not been edited
    if (!$.data(this, 'edited')) {
        this.value = $.data(this, 'default');
    }
});
});

$(document).ready(function() {
    $('div[id*="chat-box-chats"]').hide();
    updateTable();

    $(".chat-box-textinput textarea").focus(function() {
        $(this).parent().parent().find("#chat-box-chats").show();
        $(this).parent().parent().find(".chat-box-banner").show();
        $(this).addClass("big-textarea");
         updateTable();
    });

    $(".chat-box-textinput textarea").blur(function() {
        $(this).parent().parent().find("#chat-box-chats").hide();
        $(this).parent().parent().find(".chat-box-banner").hide();
        $(this).removeClass("big-textarea");
         updateTable();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:53:29.457

它有点复杂，但是如果您不想更改结构，则需要为每个 LI 在页面加载时为其所属的列分配一个类。所以每个 LI 都有一个类 c1、c2、c3 ......

然后当在其 LI 容器中单击一个 textarea 时。该列中在单击的 LI 之后的所有其他 LI 需要通过单击的文本区域的高度差来增加它们的“顶部”...

所以......让我们假设textarea增加了100px。

```
$('textarea').click({
    myLI = $(this).parent() //if its the direct parent

    var columnClass = myLI.attr('class') // returns c1, c2, c3 ... 

    myLIIndex = $('.'+columnClass ).index(myLI[0]); //gets the index of the LI(from the textarea) thats been clicked

    //selects each LI in this column and if it is after the clicked LI increase its top
    $('.'+columnClass).each(function(idx){
        if(idx >myLIIndex ){
            $(this).css({
                top:$(this).offset.top + 100
            })
       }
    })
})​ 
```

希望这是有道理的...

# iphone - 按下后退按钮返回 rootViewController 时，UILabel sizeToFit 未保留

> ID：13964918
> 
> 赞同：3
> 
> 时间：2012-12-20T03:37:55.057
> 
> 标签：iphone, objective-c, uinavigationcontroller, uilabel

所以我的 rootViewController 包含一个带有自定义 UICollectionViewCell 的 UICollectionView。我在单元格上有一个标签，标题不应该改变，我有一个多行标签组成单元格其余部分的主体。当我启动应用程序时，它会正确调用 sizeToFit 并且顶部对齐所有内容，因此它不会居中。我单击一个单元格并转到下一个视图，然后如果我单击后退按钮返回到 rootViewController，它会运行 viewWillAppear 方法并重新加载数据，但 sizeToFit 不起作用并且多行上的所有内容标签变得居中对齐。它仍然是多行，但如果只有几行，它位于标签的中心，看起来不太好。我怎样才能保持这个，所以它是一致的。我有一个左侧菜单，它将重新加载 rootViewController，它将再次正确定位标签，但是一旦我从 secondViewController 中点击后退按钮，它就不再对齐。有没有办法清除所有单元格并重新加载它们。我试过 [collectionView reloadData]; 在 viewWillAppear 中并且它不起作用，它当前在从 viewWillAppear 方法调用网络连接的 connectionDidFinish 结束时调用。任何帮助表示赞赏。它当前在从 viewWillAppear 方法调用网络连接的 connectionDidFinish 结束时调用。任何帮助表示赞赏。它当前在从 viewWillAppear 方法调用网络连接的 connectionDidFinish 结束时调用。任何帮助表示赞赏。

这是自定义 UICollectionViewCell 代码

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    [contentLabel setNumberOfLines:0];
    [contentLabel sizeToFit];
} 
```

根视图控制器

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:
(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"LocationListCell";
    LocationList *cell = [cv dequeueReusableCellWithReuseIdentifier:cellIdentifier 
                                                           forIndexPath:indexPath];

    [cell.titleBar setText:[value objectAtIndex:indexPath.row]];
    NSArray *tempObject = [[NSArray alloc] initWithArray:[self getData:[key   
                                           objectAtIndex:indexPath.row]]];

    NSMutableString *tempString = [[NSMutableString alloc] init];
    for (int i = 0; i < [tempObject count]; i++)
    {
        [tempString appendString:[tempObject objectAtIndex:i]];
        [tempString appendString:@"\r"];
    }
    //[cell.contentLabel sizeToFit];
    //[cell.contentLabel setNumberOfLines:0];
    [cell.contentLabel setText:tempString];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:05:13.073

将此动态`UILable`与此自定义方法一起使用...

`.m`只需在您的文件中添加此波纹管方法

```
-(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
[text retain];
[withFont retain];
CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

[text release];
[withFont release];

return suggestedSize.height;
} 
```

并像下面一样使用它..

```
 UILabel *yourLable = [[UILabel alloc]init];
    [yourLable setFrame:CGRectMake(110, 31, 200, 50)];        
    [yourLable setText:tempString];
    yourLable.lineBreakMode = UILineBreakModeWordWrap;
    yourLable.numberOfLines = 0;
    yourLable.font = [UIFont fontWithName:@"Helvetica" size:12];

    yourLable.frame = CGRectMake(yourLable.frame.origin.x, yourLable.frame.origin.y, 
                             200,[self calculateHeightOfTextFromWidth:yourLable.text :yourLable.font :200 :UILineBreakModeWordWrap]  ); 

    yourLable.textColor = [UIColor darkGrayColor];

     cell.contentLabel = yourLable; 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:48:33.737

试试这些行：

```
contentLabel.textAlignment = UITextAlignmentLeft;
 contentLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:24:09.323

尝试这样并在 .h 文件中声明标签

```
contentLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 49, 202, 237)];
 [contentLabel setNumberOfLines:0];
    [contentLabel sizeToFit];
  [cell.contentLabel setText:tempString]; 
```

# php - 将mysql日期和时间转换为用户友好的格式？

> ID：13964919
> 
> 赞同：2
> 
> 时间：2012-12-20T03:37:56.057
> 
> 标签：php, mysql, date

我想显示一种用户友好的日期格式，所以我正在更改 mysql 时间戳以使其对用户更简单。我已经得到了回显我想要的日期格式的代码，它在我网站的其他页面上运行良好。但我无法让日期格式显示在我的代码的一部分中。

这是我用来将 mysql 日期转换为用户友好格式的代码：

```
<?php 

    $datesent1 = $sentbox['date_sent']; 

    echo date('D M jS, Y', strtotime($datesent1));?> 
```

这是我的代码，我正在尝试将其合并到：

```
<div class="message-date">
<?php echo "Conversation Dated:&nbsp;&nbsp;{$message['date_sent']}"; ?></div> 
```

我可能应该补充一点，我正在回显 $message['date_sent'] 以检索表格中向用户发送消息的日期。

谁能告诉我这是怎么做的。谢谢，我是 php 和 mysql 的新手，如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:39:44.530

你那么近……

...只需将返回值分配`date()`给一个变量并将其回显：

```
<?php 

    $datesent1 = $sentbox['date_sent']; 

    $pretty_date = date('D M jS, Y', strtotime($datesent1));?>

<div class="message-date">
<?php echo "Conversation Dated:&nbsp;&nbsp;{$pretty_date}"; ?></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T03:41:11.683

您可以将漂亮的日期保存在变量中并与消息一起打印，也可以像这样在打印的地方进行

```
<?php echo "Conversation Dated:&nbsp;&nbsp;{".date('D M jS, Y', strtotime($message['date_sent']))."}"; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T09:12:54.820

可以通过sql查询直接将mysql日期转换为用户友好的格式，这样就可以避免PHP中与日期相关的操作函数。

> ```
>  SELECT CONCAT(DAY(tbl_name.date_field),' ',
>   MONTHNAME(tbl_name.date_field),' ',
>   YEAR(tbl_name.date_field)) as 'datelabel' FROM tbl_name 
> ```

结果日期标签的日期值看起来像**“2014 年 5 月 21 日”**

# c# - 如何使用 WebBrowser 获取用 JavaScript 编写的网页中的超链接

> ID：13964922
> 
> 赞同：2
> 
> 时间：2012-12-20T03:38:12.563
> 
> 标签：c#, javascript, html, hyperlink, webbrowser-control

```
webBrowser1.Navigate(myurl); 
HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("HTML");
foreach (HtmlElement link in links)
{
MessageBox.Show(link.InnerHtml);         
} 
```

我使用上面的代码，可以得到网页的整个HTML文档，但我真正想要的是获取HTML文档中的超链接url(url as ("a href"))。

我用：

```
MessageBox.Show(link.GetAttribute("href")); 
```

但它返回null。

有人可以帮助我解决**不使用正则表达式**而是使用简单函数之类的问题吗？

带有 JavaScript 的 HTML 代码如下所示：

```
<HTML>
<HEAD>
<TITLE>Test for me</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8" />
<SCRIPT LANGUAGE="JavaScript">
<!--

function window::onload()
{

 result.innerHTML = 
      "<br><center><font size=+1><a href='MyMain.aspx' target='_parent'>Back to My Main        Page</a></font><br>"
    + "<font size=+2><b><a href='http://MySub.asp'>Launch My Application</a></b></font></center>";     
}

-->
</SCRIPT>
</HEAD>

<BODY>
<div id="result" />
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:19:43.923

这几乎是一个完整的猜测，但是：

*   您可能必须等到文档*实际加载*后才能获取您的内容。
*   您需要获取正确的内容（“A”标签）

通过[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)，我猜下面的代码可能有效：

首先，设置一个事件处理程序：

```
// Add an event handler that processes the document after it loads.
webBrowser1.DocumentCompleted +=
    new WebBrowserDocumentCompletedEventHandler(ProcessDocument); 
```

在别处，定义处理程序（以及需要发生的事情）

```
private void ProcessDocument(object sender,
    WebBrowserDocumentCompletedEventArgs e)
{

    var webBrowser1 = (WebBrowser)sender;

    HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("A");
    foreach (HtmlElement link in links)
    {
        MessageBox.Show(link.GetAttribute("href"));         
    }

} 
```

最后：

```
webBrowser1.Navigate(myurl); 
```

问题是，msdn 文档没有说明文档“完全加载”之前必须发生的事情。

编辑：我终于在 LinqPad 中尝试过了，它看起来并没有暴露与“窗口加载”事件相关的任何内容，至少直接暴露。我敢打赌 DocumentCompleted 事件的触发更像是“DOMReady”事件。下面是一个 hack，但它出现在 DocumentTitleChange 事件的第三次调用中，它抓取了 href 的内容。请注意第三次调用它的原因是*我有更改标题的javascript*！

```
void Main()
{
    WebBrowser webBrowser1 = new WebBrowser();
    webBrowser1.DocumentTitleChanged +=
        new EventHandler(ProcessDocument);
    webBrowser1.Navigate("http://localhost/test/test.html"); 

    Console.ReadLine();
}

// Define other methods and classes here

private void ProcessDocument(object sender,
    EventArgs e)
{

    var webBrowser1 = (WebBrowser)sender;
    Console.WriteLine("ProcessDocument BEGIN");
    HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("A");
    foreach (HtmlElement link in links)
    {
        Console.WriteLine(link.GetAttribute("href"));         
    }
    Console.WriteLine("ProcessDocument END");
    Console.Out.Flush();

} 
```

你的html在哪里：

```
<HTML>
<HEAD>
<TITLE>Test for me</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8" />
<SCRIPT LANGUAGE="JavaScript">
<!--

function foo()
{
  var result = document.getElementById('result');
 result.innerHTML = 
      "<br><center><font size=+1><a href='MyMain.aspx' target='_parent'>Back to My Main        Page</a></font><br>"
    + "<font size=+2><b><a href='http://MySub.asp'>Launch My Application</a></b></font></center>";
  document.title += "Hack..Aacklgahala, ribbit";    
}

-->
</SCRIPT>
</HEAD>

<BODY onload="foo()">
<a href="http://google.com">bar</a>
<div id="result" />
</BODY>
</HTML> 
```

# javascript - 函数名称作为对象值

> ID：13964925
> 
> 赞同：1
> 
> 时间：2012-12-20T03:38:35.323
> 
> 标签：javascript

我需要根据各种情况有选择地运行几个功能。我有一个这样的基本对象：

```
object = {
  whatever : {
    objects : null
  },
  something : {
    objects : // some object
  }
}; 
```

我需要遍历对象值，如果`objects`是`not null`，我需要运行一个特定的函数。如果`whatever.objects`不为空，我需要运行`whateverFunction();`. 如果`something.objects`不为空，我需要运行`somethingFunction();`.

```
for( i in object )
{
  if ( object[i].objects )
    // run a certain function
} 
```

根据对象中的值运行这些任意命名的函数的最佳方法是什么？我可以将“要运行的函数”的名称存储在对象中`eval()`，但我想尽量避免评估。

创建一个类对象是否更有意义，每个类对象都有自己的要运行的函数，如果是这样，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:41:04.383

```
object = {
  whatever : {
    objects : null,
    func : whateverFunction
  },
  something : {
    objects : // some object,
    func : somethingFunction
  }
};

for (var i in object) {
  if (object[i].objects) {
    objects[i].func();
  }
} 
```

函数本身就是可以传递和存储的对象。无需存储函数名称；存储函数本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:40:39.173

如果`whateverFunction()`和`somethingFunction()`是全球性的，请尝试这样的事情

```
var funcName = 'somethingFunction';

window[funcName](); 
```

# javascript - jquery ui droppable: 大多数都掉了？

> ID：13964927
> 
> 赞同：0
> 
> 时间：2012-12-20T03:38:44.683
> 
> 标签：javascript, jquery-ui, jquery-ui-droppable

我有两个非常靠近的可放置对象，并且可以同时在两者上放置一个可拖动对象。有没有办法确定它被更多地丢弃在哪一个上，由重叠百分比定义？

谢谢你。

-缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:35:47.273

1.  获取两个静态元素的绝对位置（[http://api.jquery.com/offset/](http://api.jquery.com/offset/)）
2.  获取可拖动元素的绝对位置
3.  计算可拖动元素和每个静态元素的重叠大小

# ruby-on-rails-3 - 范围静态引用另一个模型结果表未找到

> ID：13964929
> 
> 赞同：0
> 
> 时间：2012-12-20T03:38:45.230
> 
> 标签：ruby-on-rails-3, named-scope, spork

我使用内存数据库进行测试。每次测试都会重新加载架构。

最近我的 rspec 抱怨找不到表。原因是作用域在加载时引用了另一个模型。

```
class Item
  scope :public, where(:store_id => Store.public_store_ids())

class Store
  def self.public_store_ids
    self.public.pluck(:id) 
```

问题是，在内存中加载项目模型的初始化过程中，尚未加载存储表的架构，但我的范围会尝试查询公共存储ID，从而导致“找不到表”错误.

如何使我的项目范围在运行时动态评估？我不想使用 join 因为它会减慢我的查询速度，但这是我唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:54:00.107

我意识到我可以将其设为类方法，以便在运行时对其进行评估

```
def self.public
  store_ids = BeautyStreet::Store.public_store_ids()
  where(:store_id => store_ids)
end 
```

# ruby-on-rails - 使用 windows8 和 aptana 进行 ruby 调试

> ID：13964930
> 
> 赞同：1
> 
> 时间：2012-12-20T03:38:46.613
> 
> 标签：ruby-on-rails, ruby, windows, ruby-on-rails-3, windows-8

我已经安装

```
gem install ruby-debug-ide --pre 
```

但是当我运行调试时，我收到了这个错误信息

```
4088: Exception in DebugThread loop: wrong number of arguments (0 for 1)
Backtrace:
c:/Ruby193/lib/ruby/gems/1.9.1/gems/debugger-1.2.2/lib/ruby-debug/interface.rb:163:in `read_command'
  from: c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta14/lib/ruby-debug-ide/ide_processor.rb:83:in `process_commands'
  from: c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta14/lib/ruby-debug-ide.rb:160:in `block in start_control'
Exiting 
```

不确定缺少什么？

**更新：**

我安装了这个宝石

```
gem install ruby-debug-ide19 --platform=ruby 
```

并删除

```
gem 'debugger' 
```

in my Gemfile based on this post [Can't run RubyMine debugger with RVM, Ruby 1.9.2 and Rails 3](https://stackoverflow.com/questions/5331920/cant-run-rubymine-debugger-with-rvm-ruby-1-9-2-and-rails-3)

It works now!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:34:37.207

经过*几天*的试验，我终于通过结合其他帖子中发现的步骤在 Windows 8 中成功使用了 Aptana 3.2.2。一个人走向成功的步骤似乎不适用于许多其他人，但如果它可能有帮助，以下是我采取的步骤。我是 Ruby 和 Rails 的新手，所以冒着包含不相关步骤的风险，我会尽量详细说明。请注意，我已经安装了 MySQL，并且已经安装了 Ruby 1.9.3。

1.  清除了现有的 Ruby 和 DevKit 安装（包括在 Windows 注册表中）。（我将我的 C:\Ruby193 目录重命名为 C:\Ruby193_old。请参见下面的步骤 8d。）

2.  使用 ruby​​installer.org 网站上的 ruby​​installer-1.9.3-p327.exe 安装 Ruby。我将它安装到 C:\Ruby193。

3.  将 DevKit（来自 ruby​​installer.org 的 DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe）安装到 C:\Ruby193\DevKit。

4.  将 C:\Ruby193\DevKit\bin 添加到我的 PATH 中。（我打开控制面板，系统和安全，系统，选择高级系统设置以打开“系统属性”窗口，高级选项卡。在那里我单击“环境变量”按钮以打开另一个窗口。在“系统变量" 部分，我选择了 "PATH" 变量，单击编辑，并附加了 ";C:\Ruby193\DevKit\bin"。）

5.  关闭所有当前打开的命令/dos 窗口并打开一个新窗口（以便新的 PATH 生效）。

6.  在命令窗口中，运行以下命令：

    6a。`gem install rails`

    6b。`gem install ruby-debug-ide19 --platform=ruby` （这失败了。）

    6c。`cd \Ruby193\Devkit`

    6d。`devkitvars.bat

    6e。`curl -OL http://rubyforge.org/frs/download.php/75414/linecache19-0.5.13.gem`

    6楼。`curl -OL http://rubyforge.org/frs/download.php/75415/ruby-debug-base19-0.11.26.gem`

    6克。`gem install linecache19-0.5.13.gem`

    6小时。`gem install ruby-debug-base19-0.11.26.gem -- --with-ruby-include=c:\ruby193\include\ruby-1.9.1\ruby-1.9.3-p327`

    6i。`gem install ruby-debug-ide19 --platform=ruby` （与上面相同，但这次安装没有错误。）

7.  下载并安装了 RubyMine 4.5.4 的评估。（有几个人说 RubyMine 会安装必要的缺失 gem。）

8.  在 RubyMine 中：

    8a。Ruby 不知道 SDK 在哪里，所以我点击了文件、设置。在出现的设置窗口的左窗格中，我单击了“Ruby SDK and Gems”。在右窗格中，我单击“添加 SDK...”并选择`C:\Ruby193\bin\ruby.exe (ruby-1.9.3-p327)`. 单击确定返回主窗口。

    8b。单击“运行”、“调试”，这会弹出一个上下文菜单。菜单中的几个项目左侧有数字标签。选择“Development:myproject”（左侧有数字“1.”）。

    8c。弹出一个窗口说“当前未安装调试器所需的 gem ruby​​-debug-base19x。安装它？”我选择了是。下载进度窗口中的文字变化很快，但似乎下载了至少 2 个 gem：

    *   `ruby-debug-base19x-0.11.30.pre10.gem –no-rdoc`

    *   `linecache____` （我无法辨认出空白部分）

    8d。再次尝试调试。我相信正是在这一点上，控制台警告我需要在 C:\Ruby193\bin 文件夹中有正确版本的“libmysql.dll”。我从旧 Ruby 安装中复制了该文件，在上面的步骤 1 中我已将其重命名为 C:\Ruby193\bin。

    8e。再次尝试调试。这次RubyMine说“找不到指定的模块： `C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so`。浏览C：/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib文件夹，我注意到那里是一个“mysql”文件夹而不是一个“mysql2”文件夹，并且“mysql”文件夹有一个 1.9 文件夹和一个 mysql2.so 文件。所以，我创建了一个“mysql2”文件夹并从“mysql”复制所有内容”文件夹到“mysql2”文件夹。

    8楼。再次尝试调试，这次成功了。

    8克。退出 RubyMine。

9.  推出 Aptana。在阿普塔纳：

    9a。在左窗格的 Project Explorer 选项卡中，我选择了项目的根目录。

    9b。在菜单栏中，我单击了运行，然后单击了调试服务器。

有效！控制台读取：

`Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11) listens on 127.0.0.1:53561
=> Booting WEBrick
=> Rails 3.2.9 application starting in development on ht tp://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-12-20 20:23:51] INFO WEBrick 1.3.1
[2012-12-20 20:23:51] INFO ruby 1.9.3 (2012-11-10) [i386-mingw32]
[2012-12-20 20:23:51] INFO WEBrick::HTTPServer#start: pid=4416 port=3000`

在 IE 中，当我浏览时`http://localhost:3000/`，它在调试上下文中运行。（URL 拼写错误是故意的，因此这篇文章通过了 stackoverflow 的发布验证测试。）

# android - 为什么 OnCreate 应该在 Activity 开始时只调用一次？

> ID：13964943
> 
> 赞同：7
> 
> 时间：2012-12-20T03:40:17.643
> 
> 标签：android, android-activity, oncreate, android-lifecycle

我想知道，为什么`OnCreate()`在活动开始时只调用一次？

我们可以`OnCreate()`在同一个活动中多次调用吗？

如果是，那我们怎么称呼它？谁能举个例子？

非常感谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T03:44:53.637

为什么要再次调用它？除非活动被重建，由系统调用。您不能手动调用 OnCreate ，这与您不会调用 setContentView() 两次的原因相同。作为文档：

> onCreate(Bundle) 是您初始化活动的地方。最重要的是，在这里您通常会使用定义 UI 的布局资源调用 setContentView(int)，并使用 findViewById(int) 检索该 UI 中需要以编程方式与之交互的小部件。一旦你完成了你的小部件的初始化，你为什么要这样做？

**更新** 我收回一些话，您可以手动执行此操作，但我仍然不明白为什么要调用它。你试过[片段](http://developer.android.com/guide/components/fragments.html)吗？
示例代码：

```
public class MainActivity extends Activity implements OnClickListener {
        private Button btPost;
        private Bundle state;
        private int counter = 0;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            state = savedInstanceState;
            btPost = (Button) findViewById(R.id.btPost);
            btPost.setOnClickListener(this);
            Toast.makeText(getBaseContext(), " " + counter, Toast.LENGTH_LONG)
                    .show();
        }

        @Override
        public void onClick(View v) {
            counter++;
            this.onCreate(state);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:49:37.310

**onCreate()**方法执行基本的应用程序启动逻辑，在活动的整个生命周期中应该只发生一次。一旦**onCreate()**完成执行，系统会快速连续调用**onStart()**和**onResume()**方法。

初始化过程**`consumes lot of resources`**和为避免这种情况，一旦创建的活动永远不会完全销毁，但在后台对用户不可见，因此一旦将其带回前面，就不会发生重新初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:01:22.440

您要手动调用 onCreate 的位置。

然后就这样做。

```
 finish();
    Intent intent = new Intent(Main.this, Main.class);
    startActivity(intent); 
```

finish() 调用当前的东西。

如果你在这个活动中做某事 getExtra 然后做这个，

```
@Override
    protected void onSaveInstanceState(Bundle outState) {

            outState.putString("key",your_variable);
        super.onSaveInstanceState(outState);

    } 
```

并将其添加到您的 onCreate()

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
if(savedInstanceState != null)
        {
            your_variable= savedInstanceState.getString("key"); 
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T03:44:31.423

为什么要`onCreate`多次调用？您将重新创建活动。如果这是您出于某种原因需要的内容，请完成该活动并使用 an`intent`创建该活动的新实例。否则，您将同时拥有该活动的两个实例。希望这会有所帮助，但如果这没有意义，请添加更多关于您想要什么的信息，以便我们了解上下文

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T03:51:16.707

OnCreate 基本上用于创建您的活动（UI）。如果您已经创建了活动，那么您不需要像已经创建的那样再次创建它。

它基本上用于初始化您的活动并创建活动的用户界面。Activity 是一个视觉部分，您可以一次又一次地使用它。我认为您的问题不是重新创建活动，而是重新初始化活动的所有组件。为此，您可以创建一个方法 initialize_act() 并从任何地方调用它...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T04:01:41.007

@OnCreate 仅用于初始创建，因此只能调用一次。

如果您希望多次完成任何处理，则应将其放在其他地方，也许在 @OnResume 方法中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-26T22:18:44.383

最近我意识到每次屏幕方向更改（横向/纵向）都会调用 onCreate。在规划初始化过程时，您应该意识到这一点。可以在 AndroidManifest.xml 中抑制娱乐：

```
<activity
            android:configChanges="keyboardHidden|orientation"
            android:name=".testActivity"
            android:label="@string/app_name"></activity> 
```

# database - 保留几个组合框（列表框）的最佳表结构是什么

> ID：13964947
> 
> 赞同：1
> 
> 时间：2012-12-20T03:40:45.927
> 
> 标签：database, database-design, database-schema

我的 Web 应用程序中有几个列表框，用户必须填写。管理员可以从控制面板的组合框中添加/删除/编辑值。所以问题是将这些组合框保存在数据库中的最佳方法是什么。

一种方法是为每个组合框保留每个表。我认为这很容易处理，但我必须为每个组合/列表框创建 20 多个表。我认为这样做是否是一种好习惯。

另一种方法是为所有组合框保留一张桌子。但是在这种情况下删除数据时我很担心。如果我想从组合框表中的国家/地区删除印度，那么我将遇到问题。我可能必须将其更新为 null 或其他方式，并且必须在编程方面进行处理。

我对么。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:13:10.593

我认为您应该创建一个包含 3 个字段的表。第一个字段是 id，第二个是名称，最后一个是外键。例如：

combo_box_table
id - 名称 - 框
1 - 日本 - 1
2 - 印度 - 1
3 - 苏格兰 - 2
4 - 英格兰 - 3

你只需要玩查询，每个框代表最后一个字段。1 代表组合框 1 和 2 代表组合框 2 等等 select * from combo_box_table where box = 1

如果你想删除印度，查询只是从 id = 2 的 combo_box_table 中删除

愿这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:45:14.503

另一种可能性是将组合框数据作为数组或 json 字符串保存在表中的单个字段中，但是您是否要这样做取决于您希望表如何运行以及您的应用程序是什么。请参阅[将 PHP 数组保存到 MySQL？](https://stackoverflow.com/questions/1978438/save-php-array-to-mysql)了解更多信息。

编辑：

我将假设您有一个包含不同国家/地区的组合框，可能还有另一个带有职称和其他内容的组合框。

1.  如果您创建多个表，那么是的，您将不得不使用多个 SQL 查询，但表中的数据量将是灵活的，删除将是一步过程：

    ```
    mysqli_query($link,"DELETE FROM Countries WHERE Name='India'"); 
    ```

2.  使用 json 或 array 选项，您可以拥有一个表，并且每个组合框将是一列。这意味着您只需查询表一次即可填充组合框，但随后您必须解码 json 字符串并遍历它们并检查空值，例如，如果国家/地区有 50 个条目但职称只有 20 个. 数据量会有一些限制，因为“文本”类型只有有限的长度。（可能，但管理代码的噩梦）

您可能需要多次查询才能填充这些框，但我觉得第一种方法是最有条理和最灵活的，除非我误解了您的数据库结构需求......

第三种可能的答案虽然非常不同，但可能是使用 AJAX 从服务器上单独的 .txt 文件中填充组合框，尽管通过手动打开文件和键入以外的任何方式对其进行编辑并删除或添加选项在其中或删除它也会很复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:58:22.047

除非您在组合框本身级别有一些额外的信息，否则只需一个简单的组合框项目表就足够了：

```
CREATE TABLE COMBO_BOX_ITEM (
    COMBO_BOX_ID INT,
    VALUE VARCHAR(255),
    PRIMARY KEY (COMBO_BOX_ID, VALUE)
) 
```

要获取给定组合框的项目：

```
SELECT VALUE FROM COMBO_BOX_ITEM WHERE COMBO_BOX_ID = <whatever> 
```

这个查询的好处是它可以通过对主索引的简单范围扫描来满足。事实上，假设你的 DBMS 的查询优化器足够聪明，表堆*根本*[不会被触及，你可以通过对表进行](http://use-the-index-luke.com/sql/glossary/index-only-scan) [集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)来消除这个“不必要的”堆（如果你的 DBMS 支持集群的话）。从物理上讲，您最终会得到一个代表整个表的 B 树。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:54:41.597

使用一个表`Countries`和另一个表进行`Job Descriptions`设置，如下所示：

**国家**

```
ID | Name  | JobsOffered | Jobs Available
_________________________________________
1  | India | 1,2,7,6,5   | 5,6
2  | China | 2,7,5,      | 2,7
etc. 
```

**职位描述**

```
ID |       Name       | Description
___________________________________
1  | Shoe Maker       | Makes shoes
2  | Computer Analyst | Analyzes computers
3  | Hotdog Cook      | Cooks hotdogs well 
```

然后，您可以查询您的数据库中的国家/地区并获取可用（和提供）的工作，然后只需在工作描述表中查询名称并向用户显示哪些工作可用。然后，当一项工作被填满或打开时，您所要做的就是使用新的 jobID 更新 contry 表。

这有帮助吗？（在这种情况下，您需要按照建议为每个组合框创建一个单独的表，并且您有可用作业的引用 ID）*

# algorithm - 比赛日程算法，每支球队进行特定数量的比赛

> ID：13964948
> 
> 赞同：1
> 
> 时间：2012-12-20T03:40:50.517
> 
> 标签：algorithm, match, sports-league-scheduling-problem

我有特定数量的团队。我希望每支球队在 4 个指定时间与 4 个不同的对手进行 4 场比赛。

复杂性在于没有球队可以同时进行两场不同的比赛。例如，如果团队 1 像这样玩

team1 vs team2，team1 vs team3，team1 vs team4，team1 vs team5，

那么 team2 已经占用了第一个时间段，因此 team2 可以这样玩

（team2 vs team1），team2 vs team3，team2 vs team4, team2 vs team5

但是这里出现了问题，team3 将在第二个时间段与 team1 和 team2 一起比赛，这是无法做到的。

我不知道这个算法可以叫什么，但我正在寻找算法来实现它。

我搜索了循环赛和其他比赛，如匹配算法以及婚姻问题，但我认为我的问题不同。如果我错了，请纠正我。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:10:40.480

我得出的结论是，如果团队数量是奇数，则没有解决方案。设 N 为团队的数量。我们总共需要`N*4/2`比赛，每支球队有四场比赛，但每场比赛需要两支球队。要`N*2`在四个时隙中进行匹配，我们必须平均`N/2`每个时隙的匹配。我们`floor(N/2)`一次最多可以进行比赛。如果 N 是奇数，`floor(N/2) < N/2`.

一个仅适用于甚至 N 的解决方案（如果存在）会有用吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-20T18:42:05.190

该算法适用于任意数量的团队。
假设一场比赛有 6 支球队。
[![在此处输入图像描述](../Images/1dd0c68741a52017374c15d3cefc9b5c.png)](https://i.stack.imgur.com/X41jC.jpg)

该解决方案基本上告诉您如何填充 6x6 矩阵，矩阵中的每个条目是行与列中的团队之间的匹配。
考虑算法中的一些规则
1\. 从左到右和从上到下递增矩阵中的值。`mat[0][0] = 1`
2\. 无论何时，然后在处`i == j`填充矩阵。基本上，在 3 处不会有 任何条目。每当矩阵中的条目达到 6 时，将其设为 1 我们将遵循此规则并开始按列填充矩阵。意味着首先我们将填充第 0 列的每一行，然后移动到第 1 列，依此类推。 - At ，应用规则 2。所以填写 - At ，填写下一个数字，即 2 ，类似地`[n-1][j]``[i][j]``i==j`

`[0][0]`
`[0][0]``mat[n-1][0] = 0`
`mat[1][0]``[2][0], [3][0], [4][0]`
- 现在第 1 列，从值 2 开始
- `mat[1][0] = 2;`
- 在`mat[1][1]`应用规则 2 时，填充当前列的最后一行，即`mat[n-1][1] = 3`

如果您希望每支球队只与其他球队打一场比赛，请使用下三角形。
如果你想让每支球队都和其他球队打 2 场比赛，一个主客场使用下三角和上三角。

希望你们理解我的解决方案。
干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:16:07.323

一个简单的算法：

```
Round 1
1  2  3  4
8  7  6  5 
```

然后旋转2-8个位置...

```
Round 2
1  8  2  3
7  6  5  4

Round 3
1  7  8  2
6  5  4  3 
```

[http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm](http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm)

（如果有奇数，可以通过添加一个虚拟配对来表示再见，但是正如 Patricia Shanahan 指出的那样，并非每支球队都会参加每一轮比赛。所以偶数球队和至少六支球队是需要满足要求。）

# asp.net-mvc - 你如何为 asp.net mvc 实现 Stackoverflow 中使用的“添加评论”功能？

> ID：13964949
> 
> 赞同：0
> 
> 时间：2012-12-20T03:40:56.123
> 
> 标签：asp.net-mvc, jquery, comments

如何使用 mvc 3 razor (EF4) 在 Stackoverflow 中重新创建添加评论功能？

这是样机代码：

```
<div>add comment</div> 

<ul id="comments">                                          
@foreach (var comment in Model) {                           
    <li>@comment</li>                                       
}                                                           
</ul>                                                       

<form method="post" id="commentForm"                        
      action="@Url.Action("AddComment")">                   

    @Html.TextArea("Comment", new { rows = 5, cols = 50 })   
    <br />
    <input type="submit" value="Add Comment" />
</form> 
```

如何通过 ajax/jquery 处理添加/编辑评论？应该是片面的观点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:29:31.950

我不确定 StackOverflow 是如何做到的，但有几种方法可以实现相同的目标。

通常，您会在页面中编写一些 jQuery 来拦截表单发布并使用 ajax 发布数据。

1.  您可以发布到 Web API 或只是返回 JSON 的操作。在服务器上，将评论添加到您正在使用的任何数据存储中，并回复成功结果或已保存评论的详细信息（取决于您）。完成后，使用 jQuery 在客户端呈现新条目 - 在您的情况下，只需添加一个带有注释的新 li。或者

2.  您可以发布到返回部分视图的操作。保存评论，更新集合，然后渲染局部视图。在您的 jQuery 中，您可以用新内容替换整个评论部分。

这是一个非常广泛的问题，还有很多其他方法可以做到这一点。您可以使用 SignalR 之类的东西从服务器推送新评论（使其实时），并且您可以使用诸如 Knockout JS 之类的 JS 模板框架，因此您只需处理一个模板和一组对象。

# c - 无法设置 Pthread 优先级

> ID：13964951
> 
> 赞同：9
> 
> 时间：2012-12-20T03:41:01.903
> 
> 标签：c, pthreads, posix, thread-priority

我无法使用`pthread_attr_setschedparam()`. 我试图解决这个问题，但无法做到。我还查阅了我的教科书，它也使用了相同的功能。我从书中复制了这段代码。你能告诉我如何设置线程优先级吗？

这是代码：

```
void *Func(void *arg);
int main()
{
pthread_t tid[5];

pthread_attr_t *tattr;
struct sched_param param;
int pr,error,i;

do
{
if( (tattr=(pthread_attr_t *)malloc(sizeof(pthread_attr_t)) )==NULL)
{
    printf("Couldn't allocate memory for attribute object\n");
}
}while(tattr==NULL);

if(error=pthread_attr_init(tattr))
{
    fprintf(stderr,"Attribute initialization failed with error %s\n",strerror(error));
}

for(i=0;i<5;i++)
{
    //scanf("%d",&pr);
        error = pthread_attr_getschedparam(tattr,&param);

        if(error!=0)
        {
            printf("failed to get priority\n");
        }

        param.sched_priority=10;
        error=pthread_attr_setschedparam(tattr,&param);

        if(error!=0)
        {
            printf("failed to set priority\n");
        }
/*  
    if(i%2==0)
    {
        if(error=pthread_attr_setdetachstate(tattr,PTHREAD_CREATE_DETACHED))

        {
            fprintf(stderr,"Failed to set thread attributes with error %s\n",strerror(error));
        }
    }
    else
        if(error=pthread_attr_setdetachstate(tattr,PTHREAD_CREATE_JOINABLE))
        {
            fprintf(stderr,"Failed to set thread attributes with error %s\n",strerror(error));
        }
*/      
        pthread_create(&tid[i],tattr,Func,NULL);

        printf("waiting for thread %d\n",i);
}

free(tattr);// release dynamically allocated memory

printf("All threads terminated\n");
return 0;
} 

 void *Func(void *arg)
{
printf("inside\n");

pthread_attr_t *tattr=(pthread_attr_t *)arg;
int state,error;

struct sched_param param;

error=pthread_attr_getdetachstate(tattr,&state);

if(error==0 && state==PTHREAD_CREATE_DETACHED)
{
    printf(" My state is DETACHED\n");
}
else
    if(error==0 && state==PTHREAD_CREATE_JOINABLE)
    {
        printf(" My state is JOINABLE\n");
    }

error=pthread_attr_getschedpolicy(tattr,&param);

if(error==0)
{
    printf(" My Priority is %d\n",param.sched_priority);
}

return NULL;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T06:54:21.420

您的`pthread_attr_setschedparam`呼叫因“无效参数”而失败。您的程序将从默认的 linux 调度策略开始`SCHED_OTHER`。您无法更改 的优先级`SCHED_OTHER`。

从人（2）`sched_setscheduler`：

> SCHED_OTHER 只能在静态优先级 0 下使用。SCHED_OTHER 是标准 Linux 分时调度程序，适用于不需要特殊静态优先级实时机制的所有进程。

如果您在尝试更改优先级之前将 pthread 属性中的策略更改为另一种调度，您的程序将正常工作。就像是

```
for (i = 0;i < 5;i++)
{
    policy = SCHED_RR;

    error = pthread_attr_setschedpolicy(tattr, policy);

    // insert error handling

    error = pthread_attr_getschedparam(tattr, &param);

    // insert error handling

    // yada yada yada ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-22T15:21:50.647

这个实现对我有用（在这篇文章的帮助下），它很简单：

```
pthread_t myThread;
pthread_attr_t *tattr;
struct sched_param param;
int error,policy, prio;

prio = 10;

tattr = (pthread_attr_t *)malloc(sizeof(pthread_attr_t));
error = pthread_attr_init(tattr);
cout << "init: " << error << endl;

error = pthread_attr_getschedparam(tattr,&param);
cout << "getschedparam: " << error << endl;

error = pthread_attr_setinheritsched(tattr, PTHREAD_EXPLICIT_SCHED);
cout << "setinheritsched: " << error << endl;

policy = SCHED_RR;
error = pthread_attr_setschedpolicy(tattr, policy);
cout << "setschedpolicy = " << policy << ": " << error << endl;

param.sched_priority = prio;
error = pthread_attr_setschedparam(tattr ,&param);
cout << "setschedparam: " << error << endl;

error = pthread_create(&myThread,tattr,threadFunc,&numOfExecutions);
cout << "create: " << error << endl;

pthread_getschedparam(myThread,&policy,&param);
printf("policy:: %d pri :: %d\n",policy,param.sched_priority); 
```

[你可以在这里](http://hostcode.sourceforge.net/view/5125)找到我的工作代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T12:13:44.300

```
 I created thread in main and set attributes using    
 pthread_attr_setechedparam(...) .Once the child thread is up and    running     i want to check this thread priority and policy set before using
 pthread_getschedparam( , , ). I executed code sudo still it is printing       zero for both pri and policy. Please find the code below.
 #include "stdio.h"

 #include "stdlib.h"

 #include "pthread.h"

void *Func(void *arg); 
int main() 
{

pthread_t tid;

 pthread_attr_t *tattr;

struct sched_param param;

 int pr,error,i;  

 int pol;
 do

  {

 if( (tattr=(pthread_attr_t *)malloc(sizeof(pthread_attr_t)) )==NULL)

 {

  printf("Couldn't allocate memory for attribute object\n");
  }

 }while(tattr==NULL);

  if(error=pthread_attr_init(tattr))
{
   fprintf(stderr,"Attribute initialization failed with error    %s\n",strerror(error));
  }

 //for(i=0;i<5;i++)
  //{
    error = pthread_attr_getschedparam(tattr,&param);

    if(error!=0)
    {
        printf("failed to get priority\n");
    }

    int policy=1;
    error=pthread_attr_setschedpolicy(tattr,policy);
   if(error!=0)
    {
        printf("failed to set priority\n");
    }

    param.sched_priority=10;
    error=pthread_attr_setschedparam(tattr,&param);

    if(error!=0)
    {
        printf("failed to set priority\n");
    }

    pthread_create(&tid,tattr,Func,NULL);

   pthread_getschedparam(tid,&pol,&param);
   printf("policy:: %d pri :: %d\n",pol,param.sched_priority);

    printf("waiting for thread %d\n",i);

    pthread_join(tid,NULL);
    free(tattr);// release dynamically allocated memory

    printf("All threads terminated\n");
    return 0; 
    }

    void *Func(void *arg)
    {
    printf("inside\n");
    int policy,err=0;
    struct sched_param p;
    err=pthread_getschedparam(pthread_self(),&policy,&p);
    if(err!=0) 
     {
    printf("error\n");
     }
    printf("the priorty= %d policy =%d\n",p.sched_priority,policy);

    } 
```

# django - 在管理员中显示来自信号的自定义消息

> ID：13964958
> 
> 赞同：7
> 
> 时间：2012-12-20T03:41:39.203
> 
> 标签：django

我有一个更新第二个模型的预保存信号侦听器。与此示例相同：

*   [Django Signals 更新不同的模型](https://stackoverflow.com/questions/13954499/django-signals-to-update-a-different-model)

我想让用户知道监听器成功更新模型并提供一些信息。通常，我认为我可以使用 django 具有的内置消息功能。问题是信号无法访问“请求”。所以我看不到如何使用内置的 Django Messages Framework。

*   [https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

是否有一种已知的方法可以在管理员中向用户发送消息？也许通过覆盖其中一个模型的 save() 方法？（发送信号或接收信号的那个），但我认为 save() 方法也不能访问“请求”？

这一定是其他人也想做的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:55:52.427

您可以在 ModelAdmin 中覆盖[save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-methods)方法。像这样的东西：

```
from django.contrib import messages
# your imports
...
# your code

def save_model(self, request, obj, form, change):
    obj.user = request.user  
    obj.save()
    # you can just call super(YourModelAdminName, self).save_model(request, obj, form, change)
    messages.add_message(request, messages.INFO, 'Text of message') 
```

# javascript - 删除带有子 div 的 div

> ID：13964959
> 
> 赞同：0
> 
> 时间：2012-12-20T03:41:40.937
> 
> 标签：javascript

我想知道我是否使用以下方法删除了其中包含 div 的 div：

```
var div = document.getElementById('main');
div.parentNode.removeChild(div); 
```

这也会删除其中的所有 Div 吗？还是我必须先清除`innerHTML`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T03:42:52.140

如果你从 DOM 中移除一个元素，你也会移除它的子元素。

# android - Android：处理多个设备特定的库

> ID：13964961
> 
> 赞同：1
> 
> 时间：2012-12-20T03:42:29.933
> 
> 标签：android, jar, libraries, device

我有一个不需要改变太多的 Android 项目，95% 不是特定于设备的。然而，我正在开发的一些设备需要包含特定的库以及对清单文件的微小更改。这些库之间没有重叠，因此它们对于每个设备都是唯一的。

每个项目的单个项目管理起来都很痛苦，因为我必须多次在非设备特定区域复制修复。

你会建议如何处理这个问题？

# c++ - 如何为班级成员创建开关？

> ID：13964965
> 
> 赞同：1
> 
> 时间：2012-12-20T03:43:18.080
> 
> 标签：c++, class, switch-statement

假设我有一个包含几个数据成员的类，我想要一个返回一个数据成员的类方法，下一次调用它时返回另一个数据成员的值。就像是：

```
class MyClass
{
    public:
        MyClass():switch(0){};
        int get();
    private:
        int intA, intB;
        int sw;
};        
int MyClass::get()
{ 
    if ( (++sw)%2 )
        return intA;
    else
        return intB;
} 
```

更优雅的方式是什么？我非常不喜欢 if...else 语句。对于返回之类的东西很好，但如果我实际上使用更复杂的操作，我最终会复制大量代码。或者必须在解决我指向的元素后调用的每个方法中创建第二个方法。

理想情况下，我更愿意做的是使用某种形式的指针，所以我可以做

```
class MyClass
{
    public:
        MyClass():switch(&intA){};
        int get();
        void toggleSwitch();
    private:
        int intA, intB;
        int * sw;
};        
int MyClass::get()
{
    return *sw;
}
void MyClass::toggleSwitch()
{
    if ( sw == &intA )
        sw = &intB;
    else
        sw = &intA;
} 
```

或者类似的东西。我可以调用 toggleSwitch()，让我的类轻松地对一个值或另一个值进行操作。

不过我还是不喜欢。我宁愿尽可能避免使用 if's，在这种情况下我不应该需要一个。裸指针的这种使用应该是相当安全的，但我想我可以有类似 std::unique_ptr 的东西来保存每个元素，然后 std::swap 它们。但随后指针将拥有元素，而它们将成为动态内存。

那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:49:48.480

嗯，`switch`是一个关键字，但我会顺其自然。指针数组怎么样？

```
int *fields[] = {&intA, &intB};

int MyClass::get()
{
    return *fields[++switch % 2];
} 
```

如果您以后可以有其他变量，这将很好地扩展。

或者可能：

```
int MyClass::get()
{
    return *fields[switch = 1 - switch];
} 
```

如果你返回一个*引用*，那么你可以在内部使用 get() 。

```
int &MyClass::get()
{
    return *fields[switch = 1 - switch];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:52:20.063

我将封装一个切换值的概念：

```
template<typename T>
class Toggleable {
    T first;
    T second;
    T* current;
    T* other;

public:
    Toggleable(const T& first, const T& second)
    : first(first),
      second(second),
      current(&first),
      other(&second) {
    }

    bool toggle() {
        std::swap(current, other);
    }

    const T& get() const {
        return *current;
    }
} 
```

然后用作：

```
class MyClass
{
    Toggleable<int> value;

    public:
        MyClass()
        : value(42, 1729)
        {
        }

        const int& get() {
            value.toggle();
            return value.get();
        }
}; 
```

# javascript - 从html5中同一标签内的标签获取id

> ID：13964967
> 
> 赞同：1
> 
> 时间：2012-12-20T03:43:23.747
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:49:10.977

您应该附加事件处理程序而不是将 JavaScript 注入`href`属性

```
entity.setAttribute('href', '#');
entity.addEventListener('click', function() {
    playAudio(path, this.id);
    return false;
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:49:31.337

在这种情况下使用 an`EventListener`更合适：

```
var entity = document.createElement("a");
entity.setAttribute("id", name);
entity.addEventListener("click", function(e){
    playAudio(path, this.id);
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:46:39.833

将javascript粘贴在onclick中。`this`在 href 中指的是**窗口**而不是锚点。

```
var entity = document.createElement("a");
entity.setAttribute("id", name);
entity.setAttribute("onclick", "playAudio('"+path+"', this.id)"); 
```

# ios - NSXMLParser 示例和 ARC

> ID：13964968
> 
> 赞同：0
> 
> 时间：2012-12-20T03:43:43.843
> 
> 标签：ios, nsxmlparser

我看过很多 NSXMLParser 的示例并了解它是如何工作的。例如，这个非常好：

[http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)

我看到的所有示例都使用 Release 在解析过程中的某个时间点释放临时对象，这没关系。但是如果我打开 ARC，我根本无法访问 release。那么示例代码如何变化呢？

例如，请查看上面的代码（链接）并解释如何使用 ARC ON 更改它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:19:41.863

有关如何使用 ARC 启用非 ARC 代码的讨论，我建议您参阅[Transitioning to ARC Release Notes](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。正如 Midhun 所暗示的，您将用`retain`引用替换`strong`引用并消除`release`and `autorelease`。您还将删除对`[super dealloc]`. 所以转换并不难，但有许多项目需要注意。

话虽如此，我不同意您对这个示例代码“相当不错”的评价。在没有侮辱原作者的情况下，它有点过时了，因此，它正在应用历史惯例而不是现代当代实践（例如，明确声明 ivars 用于属性，不使用下划线作为 ivar 名称等）。我还注意到代码中的一些错误（诸如缺少属性之类的小问题，诸如`foundCharacters`例程中的错误之类的更重要的事情等）。

我已经清理了代码（将其转换为 ARC 并解决了许多此类问题）并将其上传到GitHub 上的[存储库。](https://github.com/robertmryan/nsxmlparser-demonstration)注意，我做了两件事：

1.  我已经修改了代码，使其在实践中更加现代（这是`UsersParser`类）并修复了其中一些小错误；

2.  我还对这段代码做了一个更灵活的版本`XmlArrayParser`，其中解析器类没有硬编码用于示例使用的用户 XML 文件。调用它的方法必须了解我们要查找的元素，但解析器本身并不关心。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:20:19.743

当您将其转换为 ARC 时，将不会有任何

*   保持
*   释放
*   自动释放

关键字。

为了更好地理解，您应该使用 Xcode ARC 转换工具转换该示例代码。当你完成它时，你会得到更好的理解。请参阅本[教程](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)以获得帮助。

# c++ - 使用 .chain().method() 与 ->chained(0->method() 的 C++ 链接成员函数

> ID：13964970
> 
> 赞同：4
> 
> 时间：2012-12-20T03:44:12.897
> 
> 标签：c++, this, chaining, method-chaining

## 问题的简短版本

我寻求关于是否使用./*this 与->/this 的建议，即C++ (*this).chained().methods() 与this->chained()->methods()。

顺便说一句，目前我看到的大多数页面都推荐[[C++ (*this).chained().methods()]]。

我只是想知道，因为你做不到

> My_Class object.chained().methods();

（顺便说一句，我没有测试第一节中的示例。我在第二节中提供了测试示例。）

你必须做

> My_Class 对象；
> object.chained().methods();

这是一个烦人的额外行

或者你可以做

> ```
>  My_Class object = My_Class().object.chained().methods(); 
> ```

这需要一个值副本 - 如果构造函数有副作用，例如注册对象实例，则不可接受 - 就像许多旋钮库一样

或者你可以做

> ```
>  My_Class* object_ptr = *(new My_Class).object.chained().methods(); 
> ```

这有效，但需要烦人的 *(ptr)

或者你可以做

> ```
>  My_Class* object_ptr = (new My_Class)->object.chained()->methods(); 
> ```

这有点好。

我想你可以做到

> My_Class& object_ref(My_Class().chained().methods());

我不确定我对此有何看法。

顺便说一句，我在这里不需要调试帮助。
我一直在编写这样的代码，我提供示例只是为了清楚起见。

我正在寻求风格建议，因为有几种编码方式，而且我使用了不同的库，它们以相反的方式完成。

混合它们很丑：

```
 My_Object_with_Setters* object_ptr2 = &((new My_Object_with_Setters)->set_R1(1).set_P1(2)->set_R1(3))

 My_Object().method_returning_ptr()->method_returning_ref(); 
```

也许它不是那么糟糕......但它肯定会令人困惑。

当我遇到使用混合 .chained()->methods() 的两个不同库的代码时，我有时希望能够拥有后缀地址和取消引用运算符

My_Object* mptr = My_Object() .method_returning_ptr() -> method_returning_ref ->&

## 更完整的例子

# 设置器函数

我最常将此习语与 setter 函数一起使用

```
class My_Object_with_Setters {
public:
  static int count;
  int value;
public:
  My_Object_with_Setters() {
    ++count;
    value = 0;
  }
public:
  std::ostream& print_to_stream(std::ostream& ostr) const {
    ostr << "(" << this->count << "," << this->value << ")";
    return ostr;
  }
  friend std::ostream&
  operator<< (
    std::ostream& ostr,
    const My_Object_with_Setters& obj ) {
    return obj.print_to_stream(ostr);
  }

public:
  My_Object_with_Setters& set_R1(int val) {
    this->value = val;
    std::cout << "set_R1: " << *this << "\n";
    return *this;
  }
  My_Object_with_Setters& set_R2(int val) {
    this->value = val;
    std::cout << "set_R2: " << *this << "\n";
    return *this;
  }
public:
  My_Object_with_Setters* set_P1(int val) {
    this->value = val;
    std::cout << "set_P1: " << *this << "\n";
    return this;
  }
  My_Object_with_Setters* set_P2(int val) {
    this->value = val;
    std::cout << "set_P2: " << *this << "\n";
    return this;
  }
public:
  My_Object_with_Setters set_V1(int val) {
    this->value = val;
    std::cout << "set_V1: " << *this << "\n";
    My_Object_with_Setters retval;
    retval = *this;     // kluge to force new object
    return retval;
  }
  My_Object_with_Setters set_V2(int val) {
    this->value = val;
    std::cout << "set_V2: " << *this << "\n";
    My_Object_with_Setters retval;
    retval = *this;     // kluge to force new object
    return retval;
  }
};

int My_Object_with_Setters::count = 0;  // clas static, distinguishes instances

void test_My_Object_with_Setters()
{
  std::cout << "cascading ref, ref, copy, copy, ref, ref\n";
  My_Object_with_Setters object;
  object.set_R1(1).set_R2(2).set_V1(11).set_V2(12).set_R1(101).set_R2(102);

  std::cout << "cascading ptr, ptr, ptr, ptr\n";
  My_Object_with_Setters* object_ptr = (new My_Object_with_Setters)->set_P1(1)->set_P2(2)->set_P1(11)->set_P2(12);

  std::cout << "cascading &address-of, ptr, ptr\n";
  (&object)->set_P1(1)->set_P2(2);

  std::cout << "cascading new ptr ref ptr ref\n";
  My_Object_with_Setters* object_ptr2 = &(*(new My_Object_with_Setters)->set_R1(1).set_P1(2)).set_R1(3);

} 
```

测试输出：

```
cascading ref, ref, copy, copy, ref, ref
set_R1: (1,1)
set_R2: (1,2)
set_V1: (1,11)
set_V2: (2,12)
set_R1: (3,101)
set_R2: (3,102)
cascading ptr, ptr, ptr, ptr
set_P1: (4,1)
set_P2: (4,2)
set_P1: (4,11)
set_P2: (4,12)
cascading &address-of, ptr, ptr
set_P1: (4,1)
set_P2: (4,2)
cascading new ptr ref ptr ref
set_R1: (5,1)
set_P1: (5,2)
set_R1: (5,3) 
```

# 通用示例

```
class My_Object {
public:
  static int count;
public:
  My_Object() {
    ++count;
  }
public:
  My_Object& method1_returning_ref_to_current_object() {
    std::cout << count << ": method1_returning_ref_to_current_object\n";
    return *this;
  }
  My_Object& method2_returning_ref_to_current_object() {
    std::cout << count << ": method2_returning_ref_to_current_object\n";
    return *this;
  }
public:
  My_Object* method1_returning_ptr_to_current_object() {
    std::cout << count << ": method1_returning_ptr_to_current_object\n";
    return this;
  }
  My_Object* method2_returning_ptr_to_current_object() {
    std::cout << count << ": method2_returning_ptr_to_current_object\n";
    return this;
  }
public:
  My_Object method1_returning_value_copy_of_current_object() {
    std::cout << count << ": method1_returning_value_copy_of_current_object\n";
    My_Object retval;
    return retval;
  }
  My_Object method2_returning_value_copy_of_current_object() {
    std::cout << count << ": method2_returning_value_copy_of_current_object\n";
    My_Object retval;
    return *this;
  }
};

int My_Object::count = 0;   // clas static, distinguishes instances

void test_My_Object()
{
  std::cout << "cascading ref, ref, copy, copy, ref, ref\n";
  My_Object object;
  object
   .method1_returning_ref_to_current_object()
   .method2_returning_ref_to_current_object()
   .method1_returning_value_copy_of_current_object()
   .method2_returning_value_copy_of_current_object()
   .method1_returning_ref_to_current_object()
   .method2_returning_ref_to_current_object()
   ;

  std::cout << "cascading ptr, ptr, ptr, ptr\n";
  My_Object* object_ptr = new My_Object;
  object_ptr
   ->method1_returning_ptr_to_current_object()
   ->method2_returning_ptr_to_current_object()
   ->method1_returning_ptr_to_current_object()
   ->method2_returning_ptr_to_current_object()
   ;

  std::cout << "cascading &address-of, ptr, ptr\n";
  (&object)
   ->method1_returning_ptr_to_current_object()
   ->method2_returning_ptr_to_current_object()
   ;

  std::cout << "cascading new ptr ref ptr ref\n";
  My_Object* object_ptr2
   = (&(*(new My_Object)
    ->method1_returning_ptr_to_current_object())
    .method2_returning_ref_to_current_object())
   ;

} 
```

测试输出

```
cascading ref, ref, copy, copy, ref, ref
1: method1_returning_ref_to_current_object
1: method2_returning_ref_to_current_object
1: method1_returning_value_copy_of_current_object
2: method2_returning_value_copy_of_current_object
3: method1_returning_ref_to_current_object
3: method2_returning_ref_to_current_object
cascading ptr, ptr, ptr, ptr
4: method1_returning_ptr_to_current_object
4: method2_returning_ptr_to_current_object
4: method1_returning_ptr_to_current_object
4: method2_returning_ptr_to_current_object
cascading &address-of, ptr, ptr
4: method1_returning_ptr_to_current_object
4: method2_returning_ptr_to_current_object
cascading new ptr ref ptr ref
5: method1_returning_ptr_to_current_object
5: method2_returning_ref_to_current_object 
```

顺便说一句，我在这里不需要调试帮助。我提供这些示例只是为了清楚起见。

我正在寻求风格建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T22:55:05.270

每个人都有自己的风格；正如你所说，只有当你开始混合它们时才会真正变得烦人。

就个人而言，我只从函数返回一个指针，如果它可能是 0；`this`永远不会是 0，所以我总是会返回`*this`（即引用）并因此与`.`.

对于它的价值，我也非常努力地使默认构造函数变得便宜，部分原因是在很多情况下，首先默认构造然后分配是很方便的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:35:53.013

我能给出的最佳答案是“保持一致”。如果您的其余代码使用`this->`，请使用它。如果它使用`(*this).`，请使用它。

由于区别仅在于语法糖，因此您最好的指导是您使用的其他代码的作用。我认识的大多数人都更喜欢这种`->`语法，但如果你要集成到现有的库中，你可能想跳过它。

就个人而言，我会使用额外的初始化方法。它对我来说是最干净的，一行在堆栈上构造对象，其他行根据需要调用方法。如果您只需要这些方法并且它们不依赖于实际对象，我会将它们设为静态并一起跳过对象创建。

# javascript - 从 chrome 发送 udp 数据包

> ID：13964972
> 
> 赞同：3
> 
> 时间：2012-12-20T03:44:34.417
> 
> 标签：javascript, udp, websocket

在互联网上研究（[How to send udp to udp node.js server?](https://stackoverflow.com/questions/7451522/how-to-send-udp-to-udp-node-js-server)，[JavaScript WebSockets with UDP？](https://stackoverflow.com/questions/4657033/javascript-websockets-with-udp)）我发现用javascript发送udp数据包是不可能的。

另一方面，一些页面声称 chrome 浏览器能够做到这一点。例如链接：

[http://blog.alexmaccaw.com/chrome-tcp-udp](http://blog.alexmaccaw.com/chrome-tcp-udp)

声称谷歌浏览器能够发送 udp 数据包。也许我做错了什么。如果chrome确实可以发送udp数据包，如果有人可以发布一个*hello world*示例，我将不胜感激。我已经尝试了我显示的链接中的示例，但它不起作用。也许我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T05:19:38.060

从[链接页面](http://blog.alexmaccaw.com/chrome-tcp-udp)：

> *Chrome Canary 现在在其“实验性”API*中支持原始 TCP 和 UDP 套接字 。这些功能*仅可用于扩展* ，虽然已记录在案，但目前仍处于隐藏状态。

所以，开发一个扩展，它应该可以工作。实际上，2012 年 5 月的那篇文章似乎已经过时，因为该[`chrome.socket`模块](http://developer.chrome.com/apps/socket.html)现在已经失去了它的`experimental`地位。对于 HelloWorld，您可以查看官方页面链接的[udp 示例。](https://github.com/GoogleChrome/chrome-app-samples/tree/master/udp)

# google-app-engine - 在 Java GAE 后端 Servlet 中使用 Guice 注入

> ID：13964974
> 
> 赞同：6
> 
> 时间：2012-12-20T03:44:42.233
> 
> 标签：google-app-engine, servlets, guice, guice-servlet, sitebricks

我在我的 GAE Java 应用程序中遇到了一个难题：我正在尝试编写一个将由 GAE 后端处理的 servlet，**它还**必须使用*Guice 依赖注入*来启动所有 servlet 的字段。我尝试了多种方法，但似乎没有一个对我有用。

我首先尝试在 servlet 中使用**Sitebricks**，但似乎这样做会导致 GAE 在查询后端 URL 时无法将该类检测为合法 servlet：始终从后端返回*404 Not Found 。*尽管如此，我确信该类已使用 Sitebricks 注释正确注释，因为相同的 URI 路径适用于前端实例。

接下来，我尝试使用**Guice Servlet Extension**（请参阅[此链接](http://code.google.com/p/google-guice/wiki/ServletModule)）；在我创建全局的类中`Injector`，我使用了这个绑定：

```
return Guice.createInjector(..., new ServletModule() {
    @Override
    protected void configureServlets() {
        serve("/backend/*").with(MyBackend.class);
    }
}, ...); 
```

不幸的是，发生了与 Sitebricks 完全相同的问题：我在后端返回 404 错误，但在前端没有。

最后一种可行的方法是在 中配置 servlet-mapping `web.xml`。传统的方法。这最终允许我的后端检测 URI 映射（这与[Google 的 Java GAE 后端文档中](https://developers.google.com/appengine/docs/java/backends/overview)所写的内容一起出现：*“后端与主应用程序版本共享 web.xml 中定义的 servlet。”*）。不幸的是，我无法使用此过程利用 Guice 注入，因此我非常不希望使用`web.xml`.

我什至尝试结合第二种和第三种方法：同时使用 Guice Servlet Extension 和 web.xml。这导致从后端返回 500 错误并出现以下错误：

```
java.lang.InstantiationException: com.example.MyBackend
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.BackendServersFilter.doRedirectedServerRequest(BackendServersFilter.java:292)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:106)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at com.google.appengine.tools.development.BackendServers.forwardToServer(BackendServers.java:56)
    at com.google.appengine.tools.development.BackendServersFilter.doServerRedirect(BackendServersFilter.java:237)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:100)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

20-Dec-2012 3:23:53 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /backend/example/rest/call
java.lang.InstantiationException: com.example.MyBackend
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.BackendServersFilter.doRedirectedServerRequest(BackendServersFilter.java:292)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:106)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at com.google.appengine.tools.development.BackendServers.forwardToServer(BackendServers.java:56)
    at com.google.appengine.tools.development.BackendServersFilter.doServerRedirect(BackendServersFilter.java:237)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:100)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

最后要注意的一件事：我将*backends.xml*文件配置为 have `<public>true</public>`，但我正在通过从 GAE 应用程序的前端查询后端来测试这些 HTTP 请求调用。另外，请注意，我的前端实例正在使用`BackendService`（[此处为 javadoc](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/backends/BackendService)）正确检索后端地址。

### 我之前问过的其他相关 Stackoverflow 问题

*   [Sitebricks 是否与 GAE 后端 (Java) 兼容](https://stackoverflow.com/questions/13964043/is-sitebricks-compatible-with-gae-backends-java)
*   [Sitebricks 和渠道存在服务 (GAE)；正常的servlet也有问题](https://stackoverflow.com/questions/12924170/sitebricks-and-channel-presence-service-gae-also-having-trouble-with-normal-s)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T23:52:53.297

[后端已被弃用](https://developers.google.com/appengine/docs/java/config/backends)，取而代之的是[Modules](https://developers.google.com/appengine/docs/java/modules/)。

我正在使用带有 Guice 的[Jersey](https://jersey.java.net/)编写一些示例代码，它仍在进行中（我还没有开始修剪东西），但这里有一些摘录。

来自 pom.xml：

```
<!-- [START Guice] -->
        <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>${guice.version}</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-servlet</artifactId>
            <version>${guice.version}</version>
        </dependency>
<!-- [END Guice] -->
<!-- [START Jersey] -->
        <!-- Jersey -->
      <dependency>
          <groupId>org.glassfish.jersey.core</groupId>
          <artifactId>jersey-server</artifactId>
          <version>${jersey.version}</version>
      </dependency>
      <dependency>
          <groupId>org.glassfish.jersey.containers</groupId>
          <artifactId>jersey-container-servlet</artifactId>
          <version>${jersey.version}</version>
      </dependency>
      <dependency>
          <groupId>org.glassfish.jersey.ext</groupId>
          <artifactId>jersey-mvc-jsp</artifactId>
          <version>${jersey.version}</version>
      </dependency>
        <dependency>
            <groupId>org.glassfish.jersey.media</groupId>
            <artifactId>jersey-media-json-jackson</artifactId>
            <version>${jersey.version}</version>
        </dependency>
      <dependency>
          <groupId>org.glassfish.hk2</groupId>
          <artifactId>guice-bridge</artifactId>
          <version>2.2.0</version>
      </dependency>
<!-- [END Jersey] --> 
```

来自 JerseyConfiguration.java：

```
public class JerseyConfiguration extends ResourceConfig {
    private final Logger log = Logger.getLogger(getClass().getName());

    @Inject
    public JerseyConfiguration(ServiceLocator serviceLocator, ServletContext servletContext) {
        log.info("Creating JerseyConfiguration");
        packages("com.example.gettingstarted");

        GuiceBridge.getGuiceBridge().initializeGuiceBridge(serviceLocator);
        GuiceIntoHK2Bridge guiceBridge = serviceLocator.getService(GuiceIntoHK2Bridge.class);
        guiceBridge.bridgeGuiceInjector((Injector) servletContext.getAttribute(Injector.class.getName()));
    }
} 
```

从 GettingStartedServletContextListener ：

```
public class GettingStartedServletContextListener extends
        GuiceServletContextListener {

    @Override
    protected Injector getInjector() {
        return Guice.createInjector(new GettingStartedModule());
    }
} 
```

从 GettingStartedModule.java：

```
public class GettingStartedModule extends ServletModule {

  @Override
  protected void configureServlets() {
      serve("/hi").with(HelloWorldServlet.class);
  }
} 
```

来自 HelloWorldServlet.java：

```
@SuppressWarnings("serial")
@Singleton
public class HelloWorldServlet extends HttpServlet {

  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp)
          throws ServletException, IOException {
      resp.setContentType("text/plain");
      resp.getWriter().println("Hello, old friend");
  }
} 
```

# ios - 复制 iBooks 缩放/淡入淡出动画

> ID：13964981
> 
> 赞同：0
> 
> 时间：2012-12-20T03:45:47.740
> 
> 标签：ios, core-animation

我试图复制发生在 iPad 上的书籍动画的放大和淡化。基本上，如果你没有看到书在书架上，当你点击它时，它会向屏幕中心增长。当它靠近屏幕中心时，它会与您所在的书页交叉淡入淡出，无论是封面还是第 100 页。在 iPhone 上，书的封面向屏幕中心增长，然后到一半通过过渡，它会淡入您在书中的最后一页，并且缩放完成占据整个屏幕。

为了复制这一点，我试图做的是，有人点击了我的 collectionView。我得到了那个单元格的框架并截取了那个单元格的屏幕截图。我创建了一个内容为该图像的图层。

```
CALayer *smallLayer = [CALayer layer];
UIImage *smallImage = [UIImage renderImageFromView:self.smallZoomView];
smallLayer.frame = self.smallZoomRect;
smallLayer.contents = (__bridge id)smallImage.CGImage; 
```

我将它添加到我用于动画的容器视图中。对于动画部分，我尝试了这个：

```
[CATransaction begin];
[CATransaction setAnimationDuration:5.0];
[CATransaction setDisableActions:YES];

CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
anim.fromValue = [NSNumber numberWithFloat:1.0];
anim.toValue = [NSNumber numberWithFloat:2.0];

[self.smallZoomLayer addAnimation:anim forKey:@"Zoom"]; 
```

我的第一个问题是，无论动画从哪里开始，我如何让它向视图中心增长。由于用户正在单击集合视图单元格，因此它当前只是从该单元格的中心增长，而不是向视图的中心增长。

我的第二个问题是如何与我要展示的下一个屏幕交叉淡入淡出。我想我可以做这样的事情：[How to crossfade between 2 images on iPhone using Core Animation](https://stackoverflow.com/questions/1550206/how-to-crossfade-between-2-images-on-iphone-using-core-animation)以获得交叉淡入淡出，但我不知道如何截取当前尚未显示的视图的屏幕截图。

有什么想法吗？如果这种方法是错误的，请告诉我！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:28:01.947

这是我工作的另一种方式。它不使用快照，而是缩放 PageViewController 的实际视图，将其作为子视图添加到 coverView 下方，在 containerView 中，然后执行类似的动画。从“良好的编码实践”的角度来看，我不知道这是否更好，但它只是展示了另一种解决方法（我一直在自学这些东西，所以我正在尝试不同的替代方案）。

```
@interface ViewController ()
@property (strong,nonatomic) UIView *pageView;
@property (strong,nonatomic) PageController *pageVC;
@end

@implementation ViewController 

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.pageVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Page"]; // controller with the page contnent
    self.pageView = self.pageVC.view;
    self.pageView.transform = CGAffineTransformMakeScale(self.coverView.frame.size.width/self.pageView.frame.size.width, self.coverView.frame.size.height/self.pageView.frame.size.height);
    [self.containerView insertSubview:self.pageView belowSubview:self.coverView];
    [self.containerView constrainViewEqual:self.pageView];
}

-(IBAction)openCover:(id)sender {
    self.coverView.layer.anchorPoint = CGPointMake(0, .5);
    self.coverView.center = CGPointMake(self.coverView.center.x - self.coverView.frame.size.width/2, self.coverView.center.y);

    [self.containerView removeConstraints:self.containerView.constraints];
    [self.view removeConstraints:self.view.constraints];

    [self.view constrainViewEqual:self.containerView];
    [self.containerView constrainViewLeft:self.coverView];
    [self.containerView constrainViewEqual:self.pageView];

    NSInteger animationTime = 1;

    [UIView animateWithDuration:animationTime animations:^{
          self.pageView.transform = CGAffineTransformIdentity;
          [self.view layoutIfNeeded];
     }];
    [UIView animateWithDuration:animationTime animations:^{
        CATransform3D transform = CATransform3DIdentity;
        transform =CATransform3DMakeRotation(M_PI_2, 0.0, -1.0, 0.0);
        transform.m34 = 1/1000.0;
        transform.m14 = -2/10000.0;
        self.coverView.layer.transform =transform;
    } completion:^(BOOL finished) {
        [self.view.window addSubview:self.pageView];
        [self.view.window setRootViewController:self.pageVC];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:53:39.970

这是我重新创建 iBooks 打开封面动画的尝试。我觉得它看起来很不错。ViewController 是初始控制器，它在相同大小的 UIView (pageView) 内具有图像视图 (imageView)，在我的示例中为 90 x 122。imageView 有一个书籍封面的图像，我在另一个控制器视图（FirstPageController）的快照的 imageView 下添加了一个子视图——我有一个关于制作这些快照的问题，我看到你也发布了一个。我通过看似 hack 的方式解决了它——我将 FirstPageController 的视图添加为我的视图的子视图，进行了快照，然后将其从我的视图中删除。希望有人会提供更好的方法来做到这一点。我使用 NSLayoutConstraints 进行了一些大小调整和居中，并且我有一个类别，我在其他项目中使用它来保持代码分离。

```
#import "ViewController.h"
#import "UIView+RDConstraintsAdditions.h"
#import <QuartzCore/QuartzCore.h>
#import "FirstPageController.h"

@interface ViewController ()
@property (strong,nonatomic) FirstPageController *fpController;
@end

@implementation ViewController

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.fpController = [self.storyboard instantiateViewControllerWithIdentifier:@"FirstPage"];

    [self.view insertSubview:self.fpController.view belowSubview:self.view];

    UIGraphicsBeginImageContext(self.fpController.view.bounds.size);
    [self.fpController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self.fpController.view removeFromSuperview];

    self.imageView2 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 90, 122)];
    self.imageView2.image = viewImage;
    [self.pageView insertSubview:self.imageView2 belowSubview:self.imageView];
}

-(IBAction)expandImageView:(id)sender {
    self.imageView.layer.anchorPoint = CGPointMake(0, .5);
    self.imageView.center = CGPointMake(self.imageView.center.x - self.imageView.frame.size.width/2, self.imageView.center.y);
    [self.view removeConstraints:self.view.constraints];
    [self.pageView removeConstraints:self.pageView.constraints];
    [self.view constrainViewEqual:self.pageView];
    [self.pageView constrainViewLeft:self.imageView];
    [self.pageView constrainViewEqual:self.imageView2];
    [UIView animateWithDuration:2 animations:^{
        [self.view layoutIfNeeded];
    }];
    [UIView animateWithDuration:2 animations:^{
        CATransform3D transform = CATransform3DIdentity;
        transform =CATransform3DMakeRotation(M_PI_2, 0.0, -1.0, 0.0);
        transform.m34 = 1/1000.0;
        transform.m14 = -2/10000.0;
        self.imageView.layer.transform =transform;
    } completion:^(BOOL finished) {
        [self.view.window setRootViewController:self.fpController];
    }];
} 
```

这是我使用的 UIView 上的类别：

```
#import "UIView+RDConstraintsAdditions.h"

@implementation UIView (RDConstraintsAdditions)

-(void)constrainViewEqual:(UIView *) view {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeCenterX relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeWidth relatedBy:0 toItem:view attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeHeight relatedBy:0 toItem:view attribute:NSLayoutAttributeHeight multiplier:1 constant:0];
    NSArray *constraints = @[con1,con2,con3,con4];
    [self addConstraints:constraints];
}

-(void)constrainViewLeft:(UIView *) view {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeLeft relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeWidth relatedBy:0 toItem:view attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeHeight relatedBy:0 toItem:view attribute:NSLayoutAttributeHeight multiplier:1 constant:0];
    NSArray *constraints = @[con1,con2,con3,con4];
    [self addConstraints:constraints];
} 
```

在动画结束时，我切换出窗口的根视图控制器以获得“实时”FirstPageController 视图而不是快照。

# python - 没有在 Python 中分组的正则表达式和 OR 运算符？

> ID：13964986
> 
> 赞同：25
> 
> 时间：2012-12-20T03:46:17.527
> 
> 标签：python, regex, regex-group

以下是案例。我正在日志文件中寻找以下模式。

所有字符串都是`AB_N`or的形式`CDE_N`。 `AB`和`CDE`是固定字母，后跟下划线。 `N`可以是 2 个或 3 个数字。

我试过`(AB|CDE)_\d{2,3}`了，但这会返回一个组。我不能这样做`\w{2,3}\d{2,3}`，因为它必须是`AB`or`CDE`而不是`AC`or `FEG`。省略括号也会中断。我确信解决方案很简单，但我是 python 和正则表达式的新手，无法弄清楚。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-20T03:48:26.640

正则表达式中括号内的A`?:`使其无法捕获。像这样：`(?:AB|CDE)_\d{2,3}`

请参阅此处的文档：http: [//docs.python.org/3/library/re.html](http://docs.python.org/3/library/re.html) 大约三分之一的方法是通过非捕获语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T03:47:30.627

非捕获组语法是`(?:...)`. 就这样吧`(?:AB|CDE)_\d{2,3}`。这与其他所有内容一起[记录在案](http://docs.python.org/2/library/re.html#regular-expression-syntax)。

# memory-management - 获取要写入磁盘的扇区 t 值

> ID：13964987
> 
> 赞同：1
> 
> 时间：2012-12-20T03:46:33.873
> 
> 标签：memory-management, io, kernel

如何获取扇区值，即 bio->bi_sector 的扇区值，以对块设备进行 bio 提交 I/O 调用？我有索引节点、页面索引和页面。我需要为块设备找到一个合适的扇区值来完成向设备写入页面的 I/O。

谢谢！

# iphone - 是否可以将iad添加到html网络应用程序

> ID：13964995
> 
> 赞同：2
> 
> 时间：2012-12-20T03:48:03.653
> 
> 标签：iphone, html, iad

我想**将 iAD 添加**到 HTML Web 应用程序。只是想知道这是否可能。需要自己承包框架模拟iAD框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:59:19.237

无法将 iAd 添加到 Web 应用程序，只能添加原生 iOS 应用程序。我会研究谷歌的广告服务，或者其他的。

# android - 如何在来电屏幕上显示某些内容

> ID：13964997
> 
> 赞同：1
> 
> 时间：2012-12-20T03:48:17.527
> 
> 标签：android

我正在开发一个应用程序，当来电屏幕上来电时显示来电者的位置。我成功地从我的算法中获取了位置，但我无法在默认传入屏幕上显示它。

如果我使用 A toast，那么它只会出现 1 或 2 秒，我希望信息应该出现直到接听电话。

我应该使用 Toast、Notification 或其他东西，以及如何使用。

简而言之，在接听电话之前，如何在来电屏幕上显示某些内容

```
 class IncomingCallREceiver extends BroadcastReciever
       {
               void onRecieve()
              {
                //     here I want to show the Information
               }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:00:04.883

您无法覆盖 Android 的通话屏幕，并且有充分的理由，事情可能会被欺骗！

话虽如此，对话框很可能是在用户拿起之前显示某些内容的最佳解决方案。[制作对话框](http://developer.android.com/guide/topics/ui/dialogs.html)最简单的方法是使用 DialogFragments。但是，由于无法从接收方显示对话框，因此您需要启动一个 Activity。所以你的`onReceive()`代码应该是这样的：

```
void onReceive(Context context, Intent intent)
          {
            Intent showDialogIntent = new Intent (context, DialogActivity.class);
            showDialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startIntent (showDialogIntent);               
          } 
```

然后当您的 DialogActivity 启动时，它的`onCreate()`方法将创建 Dialog 并将其显示给用户。