# StackOverflow 问答 16209000-16209999

# mongodb - mongodb内存混乱。页面错误和索引大小

> ID：16209002
> 
> 赞同：0
> 
> 时间：2013-04-25T07:40:01.373
> 
> 标签：mongodb, indexing

我对我的 mongodb 使用了多少实际内存感到非常困惑。

发出 db.stats(1024*1024) 我得到一个输出

```
> db.stats(1024*1024)
{
    "db" : "test",
    "collections" : 9,
    "objects" : 38035503,
    "avgObjSize" : 535.2138471259339,
    "dataSize" : 19414,
    "storageSize" : 22280,
    "numExtents" : 62,
    "indexes" : 12,
    "indexSize" : 4039,
    "fileSize" : 30642,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

所以我有不到 4000 万个对象和 4GB 的索引大小。在具有 17GB RAM 的 Windows 服务器上运行它，查看资源监视器和任务管理器，我的 mongodb 实例有一个 17GB 的工作集和一个相同数量的 Shareable。

我的第一个想法是“好的，所以它具有预先分配的数据文件，以便在它实际需要空间时会有更快的插入”。

但是后来我启动了 mongostat 并且可以清楚地看到一个非常高的页面错误：

```
insert  query update delete getmore command flushes mapped  vsize    res faults
 time
   220   2419      0      0       0     221       0  27.9g  56.1g  16.8g   2659 
```

所以我猜测它实际上已经耗尽了内存，现在正在直接从磁盘交换和拾取。

我的问题基本上是我如何才能真正确定在我用完 RAM 之前能够存储的数据量？统计数据告诉我它只有 4GB 的索引，但 mongo 似乎被阻塞、交换和消耗了所有 17GB。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:55:26.263

你有 17GB 的 RAM 可用于大约 20GB 的数据加上 4GB 的索引（这只是在这个数据库上——我不知道你的系统中是否还有更多，但 mongostat 说你的数据文件总大小约为 28GB）。

如果您正在查询整个数据集，您是否会期望最终正在读取的新数据记录不再适合 RAM，而不会显示一些先前读取（并加载到 RAM 中）的记录？这就是您所看到的页面错误。

您关心的不是数据存储，而是正在使用、查询或访问的数据。如果它不能全部留在 RAM 中，那么它将被换出，然后在再次访问时需要换回。

# cakephp - cake php中的自定义语言切换器

> ID：16209006
> 
> 赞同：0
> 
> 时间：2013-04-25T07:40:11.077
> 
> 标签：cakephp, internationalization

我如何在 cake php 中创建自己的语言切换器。我不想使用谷歌 api。伙计们请建议我有好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:57:17.307

[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

这就是您可以创建的方式。__() --> 翻译函数

```
translation files
/app/Locale/eng/LC_MESSAGES/default.po (English)
/app/Locale/fre/LC_MESSAGES/default.po (French)
/app/Locale/por/LC_MESSAGES/default.po (Portuguese) 
```

在 appController

```
 // App Controller Code.
        public function beforeFilter() {
            $locale = Configure::read('Config.language');
            if ($locale && file_exists(VIEWS . $locale . DS . $this->viewPath)) {
             //  e.g. use /app/View/fre/Pages/tos.ctp instead of /app/View/Pages/tos.ctp
                $this->viewPath = $locale . DS . $this->viewPath;
            }
        } 
```

代替`$locale = Configure::read('Config.language');`从您的语言切换器传递的添加代码，例如语言切换器的下拉菜单。用户选择英语。通过并在 appController 中检查它。休息将由代码处理

# javascript - IE9.js 无法读取 null / navigator.appVersion.match(...) 的属性“1”为 null 第 6 行

> ID：16209008
> 
> 赞同：3
> 
> 时间：2013-04-25T07:40:15.873
> 
> 标签：javascript

我已将[Google 的 IE7/IE8/IE9.js 包含](https://ie7-js.googlecode.com/svn-history/r35/trunk/lib/IE9.js)到我的网站中，现在我在 Chrome 中收到以下错误：`Uncaught TypeError: Cannot read property '1' of null IE9.js:6`

Firefox 更详细一点：`navigator.appVersion.match(...) is null Line 6`

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:49:00.370

有问题的代码如下：

```
var q=h.appVersion=navigator.appVersion.match(/MSIE (\d\.\d)/)[1]-0 
```

由于 Chrome 和 Firefox 中都没有“MSIE” `appVersion`，因此该方法返回`null`，然后代码尝试获取从 调用的`1`属性`null`。因此例外。

您可以使用条件注释包含脚本以防止出现此错误。

```
<!--[if IE]>
<script src="IE9.js" type="text/javascript"></script>
<![endif]--> 
```

# cakephp - cakephp 在一个连接表中一次连接超过 2 个表

> ID：16209014
> 
> 赞同：1
> 
> 时间：2013-04-25T07:40:46.930
> 
> 标签：cakephp, join

我已经成功地将我的许多项目转换为 Cake，但我有一个项目构成了我正在努力应对的挑战。

在典型的“ `hasMany through`”连接中，例如。在 Cake 文档中，您有 3 个表`Student`、`Course`和`CourseMembership`. `Student`和`Course hasMany CourseMembership`和`CourseMembership belongsTo Student`和`Course`。

我的问题是，是否可以使用常规约定以这种方式将两个以上的表连接在一起？例如，添加另一个表，比如说，`Lecturer`（忘记这个现实世界的可能性）会创建更多可能的排列，但是 Cake 可以原生处理这个吗？

提前致谢。

编辑：这将是连接（HTH）的表布局：

```
id | student_id | course_id | lecturer_id 
```

编辑 2：默认情况下，将调用连接表，`course_students`所以我所追求的是`course_lecturer_students`使用上述布局调用的表（显然它不需要调用它，只是为了遵守 CakePHP 命名约定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:18:00.047

绝对地。您可以`Join`根据需要设置任意数量的表。使用 CakePHP 进行 Join 与使用 MySQL 运行 Join 查询没有什么不同——CakePHP 只是采用 CakePHP 语法并为您创建 MySQL（或其他）查​​询。

旁注 - 只需确保您正确索引表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:12:02.130

你可以使用 Cakephp

1.  写简单的sql作为查询（不推荐）
2.  写连接句
3.  使用深度关联（推荐）

但是，您的问题不清楚，无法确定您正在寻找哪种答案，或者您在寻找什么

可能您可以扩展您正在寻找的最终结果以帮助您

# sql-server - SQL 唯一索引

> ID：16209015
> 
> 赞同：1
> 
> 时间：2013-04-25T07:40:50.007
> 
> 标签：sql-server

我有两张桌子（简化） - 卡车和拖车

**卡车**

```
TruckID  int identity
Trailer1 int null
Trailer2 int null 
```

**拖车**

```
TrailerID int identity 
```

由于拖车外键可以为空，因此卡车可以根本没有拖车、有一个拖车或有两个拖车。

如何在 Trucks 表上建立索引以确保相同的 TrailerID 永远不会被使用两次？

对于一个预告片，我可以创建一个计算域

```
IsNull(TrailerID, -1 * TruckID) 
```

并为此创建一个唯一索引。但是我如何为两个预告片管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:57:26.250

您需要创建一个索引视图，该视图可以有效地合并预告片。

为此，您必须创建一个小型支持表：

```
CREATE TABLE place (id INT NOT NULL PRIMARY KEY)

INSERT
INTO    place
VALUES  (1),
        (2)

GO

CREATE VIEW
        v_truck_trailers
WITH SCHEMABINDING
AS
        SELECT  t.id AS truckId,
                p.id AS placeId,
                CASE p.id WHEN 1 THEN trailer1 WHEN 2 THEN trailer2 END AS trailerId
        FROM    dbo.truck t
        JOIN    dbo.place p
        ON      CASE p.id WHEN 1 THEN trailer1 WHEN 2 THEN trailer2 END IS NOT NULL
GO

CREATE UNIQUE CLUSTERED INDEX
        ux_v_truck_trailers_truck_place
ON      v_truck_trailers (truckId, placeId)
GO

CREATE UNIQUE INDEX
        ux_v_truck_trailers_trailer
ON      v_truck_trailers (trailerId)
GO 
```

现在让我们尝试一下：

```
INSERT
INTO    truck
VALUES  (1, 1, NULL) -- succeeds

INSERT
INTO    truck
VALUES  (2, 2, 3) -- also succeeds

INSERT
INTO    truck
VALUES  (3, NULL, 2) -- fails as trailer 2 is already used on truck 2, even if on another place. 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!3/fb1344/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:02:25.107

如果您可以更改表结构，我会推荐第三张表 TrailersTrucks

```
TrailersTrucks

TrailersTrucksID int identity
TruckID  int not null
TrailerID int not null
[TrailerNo int] - optional 
```

更改卡车声明

```
Trucks

TruckID  int identity
TrailersTrucksID int null 
```

然后您可以在 TrailerID 上使用唯一索引。您可能还想引入 TrailerNo 并将其限制为 1 和 2 个值（或使用枚举）并在 TruckID 和 TrailerNo 上添加唯一索引...这样就不可能向卡车添加 3 个或更多拖车...您如果需要，可以随时扩展约束（例如火车）。

这是解决问题的建议方法，然后您将获得规范化的数据库。

但是我知道这并不总是可能的，原因有很多:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:03:15.130

我不认为你可以单独使用索引来做到这一点。您需要拥有自己的身份。我认为如果发生违规行为，您将不得不在更新时触发一个触发器以将其回滚，这将确保预告片 ID 在任何一个中都不存在

```
Select Trailer1 FROM Trucks
UNION
Select Trailer2 FROM Trucks 
```

[http://msdn.microsoft.com/en-gb/library/ms189799%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-gb/library/ms189799%28v=sql.105%29.aspx)用于触发器

Trailer1 和 Trailer2 上仍然应该有索引，以便优化器可以查找 TrailerID 是否存在于任一列中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:38:22.100

您可以分别对 Traileid1 和 TrailerId2 进行 UNIQUE 约束。

```
CREATE TABLE Trailers
(
TrailerID int identity PRIMARY KEY NOT NULL,
t_type varchar(10) null
)

CREATE TABLE Trucks
(
TruckID  int identity PRIMARY KEY NOT NULL,
Trailer1 int UNIQUE null,
Trailer2 int UNIQUE null
FOREIGN KEY ( Trailer1 ) REFERENCES Trailers(TrailerID),
FOREIGN KEY ( Trailer2 ) REFERENCES Trailers(TrailerID),
) 
```

# java - 在启动期间确定 Axis2 服务的文件系统路径

> ID：16209016
> 
> 赞同：0
> 
> 时间：2013-04-25T07:40:55.327
> 
> 标签：java, web-services, filesystems, axis2

我有一些 Axis2 Web 服务被展开部署，这意味着我没有创建一个 .aar 文件来保存在服务目录中，而是有一个目录，其中存在 Axis2 服务的文件和文件夹。类似于以下内容：

[...]axis2\WEB-INF\services\someService\META-INF\service.xml

我的 ServiceClass 正在实现 ServiceLifeCycle 以在服务启动期间执行某些操作。要在启动期间做我需要做的事情，我需要在我的服务目录中有一个文件，但我似乎无法在启动期间获得我的服务目录的路径。通常 AxisService.getFileName() 会提供我的服务目录的路径，但在启动期间似乎还没有服务的路径，getFileName() 提供“null”。似乎该路径仅可用于已启动的服务，因为在 shutdown 方法中 getFileName 为我的服务提供了正确的路径。

在服务启动期间有什么方法可以获取路径吗？我已经在寻找 Hooks 或其他东西，至少在服务启动后直接得到通知，但在它第一次被调用以获取我的路径并做我的“某事”之前，但似乎没有可用的。

我不想要的是在 service.xml 文件中配置我的服务的路径，我希望服务能够自行检索它的路径。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:41:05.580

Axis2 为每个服务提供了一个类加载器，该类加载器可以访问与服务打包的文件（在 AAR 或展开的服务目录中）。访问与服务打包的文件的正常方法是使用该类加载器的功能`getResource()`。`getResourceAsStream()`

要获取服务类加载器，您可以调用`AxisService.getClassLoader()`. `this.getClass().getClassLoader()`从服务中打包的类调用也应该有效。

# android - 从 InputStream 保存 PDF

> ID：16209023
> 
> 赞同：0
> 
> 时间：2013-04-25T07:41:58.317
> 
> 标签：android

我的代码有问题。我正在尝试从 url 保存 PDF。PDF 在那里，但它的长度为零。虽然输入流长度是正确的。为什么 PDF 不能正确保存？

这是从流中保存 PDF 的实际代码：

```
 public void createExternalStoragePrivateFile
                            (String name, String extension, InputStream is) {
    // Create a path where we will place our private file on external
    // storage.
    File file = new File
                     (mContext.getExternalFilesDir(null), name +"."+extension);

    try {
        Log.d("", "before: " + file.getPath() + 
                             " " + file.getTotalSpace() + "  " + file.length());
        OutputStream os = new FileOutputStream(file);
        byte[] data = new byte[is.available()];
        is.read(data);
        os.write(data);
        is.close();
        os.close();

        Log.d("","after: " + file.getPath() + 
                              " " + file.getTotalSpace() + "  " + file.length());
    } catch (IOException e) {
        // Unable to create file, likely because external storage is
        // not currently mounted.
        Log.w("ExternalStorage", "Error writing " + file, e);
    } 
```

输出给了我这个（前后长度为零，但之后总空间不为零。为什么长度为零？

```
04-25 09:38:44.938: D/(4103): before: /storage/emulated/0/Android
                                  /data/what.to.use.myapp/files/Lolpdf.pdf 0  0

04-25 09:38:44.946: D/(4103): after: /storage/emulated/0/Android
                        /data/what.to.use.myapp/files/Lolpdf.pdf 14311309312  0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:07:53.657

该`InputStream.available()`方法不一定会返回正在下载的文件的大小，它会在不进行任何网络调用的情况下返回可用的内容，因此很可能返回 0。更好的方法是分配一个小缓冲区，并继续阅读，直到你到达终点：

```
byte[] buffer = new byte[1024];
int len;
while ((len = is.read(buffer)) != -1) {
    os.write(buffer, 0, len);
} 
```

这将大大提高内存效率，因为它不需要您分配足够的内存来保存您正在下载的整个文档，并且它避免了`available()`不返回您期望的内容的方法。

# php - Joomla自定义php，表单提交自动

> ID：16209030
> 
> 赞同：0
> 
> 时间：2013-04-25T07:42:18.877
> 
> 标签：php, forms, joomla, customization

我创建的 Joomla 自定义模块有问题。我在一个自定义的 html 模块中制作了表格。表单调用动作posting.php。问题是当我想继续使用表单时，代码会自动执行，我什至看不到页面，如果输入成功，我会被重定向到应该重定向的页面。DB 也填充了空白值。在我看来，表单是自动提交的。怎么样？

这是常见问题吗，我忽略了一些东西还是应该发布一些代码:)

# android - 有没有办法检测我的前台应用程序上的恶意视图浮动

> ID：16209033
> 
> 赞同：0
> 
> 时间：2013-04-25T07:42:23.533
> 
> 标签：android, permissions, virus

在 Android 中，视图可以浮动在任何活动上，只要它们具有 android.permission.SYSTEM_ALERT_WINDOW 权限。病毒可以利用这个特性做很多他们想做的事情。那么，有没有办法在我的前台应用程序中检测这些视图？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:16:30.950

> is there a way to detect these view on my foreground application?

Not really.

By default, on newer versions of Android (4.0+ IIRC), touch events are either consumed by such views or cannot be seen by those views via callback methods. Earlier versions of Android supported such a floating view both finding out about touch events *and* allowing them to pass along to underlying activities, referred to as a "tapjacking" attack. For API Level 9+, you can use `android:filterTouchesWhenObscured` to control this behavior.

# unit-testing - Selenium RC 超时

> ID：16209036
> 
> 赞同：3
> 
> 时间：2013-04-25T07:42:37.177
> 
> 标签：unit-testing, tdd, phpunit, selenium-rc

我是新来测试单元的东西。我的配置是结合了 phpunit 和 selenium rc (selenium-server-standalone-2.32.0.jar) 的 windows vista。

我尝试在提示命令上加载测试用例文件：一个提示命令启动 selenium 服务器：

```
@echo
rem comment
cd c:\progra~1\java\jdk1.6.0_32\bin
java -jar selenium-server-standalone-2.32.0.jar -interactive 
```

它加载，没问题，我在另一个提示命令 phpunit 上启动，然后：

```
phpunit testcase.php 
```

它也有效，但我明白了：

Sebastian Bergmann 的 C:\wamp\www\projet>phpunit testcase.php PHPUnit 3.7.19。

乙

时间：47 秒，内存：2.50Mb

有 1 个错误：

1) 示例::testMyTestCase

```
Invalid response while accessing the Selenium Server at 'http://localhost:4444/s
elenium-server/driver/': Timed out after 30000ms

C:\wamp\www\projet\testcase.php:18
C:\wamp\www\projet\testcase.php:18

Caused by
RuntimeException: Invalid response while accessing the Selenium Server at 'http:
//localhost:4444/selenium-server/driver/': Timed out after 30000ms

C:\wamp\www\projet\testcase.php:18
C:\wamp\www\projet\testcase.php:18 
```

失败！测试：1，断言：0，错误：1。

这是 testcase.php 文件：

```
<?php

require_once 'PHPUnit/Extensions/SeleniumTestCase.php';

class Example extends PHPUnit_Extensions_SeleniumTestCase
{
  function setUp()
  {
    $this->setBrowser("*firefox");
    $this->setBrowserUrl("http://www.google.com/");
  }

  function testMyTestCase()
  {
    $this->open("http://www.google.com/");
    $this->type("q", "selenium rc");
    $this->click("btnG");
    $this->waitForPageToLoad("30000");
    $this->assertTrue($this->isTextPresent("Results * for selenium rc"));
  }
}
?> 
```

失败在哪里？谢谢。更好。

# authentication - LDAP 和 Active Directory 身份验证有什么区别？

> ID：16209039
> 
> 赞同：9
> 
> 时间：2013-04-25T07:42:40.507
> 
> 标签：authentication, active-directory, ldap

我试图搜索但没有成功。（我知道 LDAP 和 Active Directory 之间[的区别。另请阅读此 LDAP 和 Active Directory 之间有什么区别？](https://stackoverflow.com/questions/663402/what-are-the-differences-between-ldap-and-active-directory)）

据我了解，LDAP 使用 DN（可分辨名称）和密码进行身份验证（绑定）。例如`CN=bob, OU=Users,DC=test,DC=com`

Active Directory 使用短用户名或完整的域用户名和密码进行身份验证。例如`bob`或`bob@test.com`

因此，LDAP 不允许用户在同一棵树 (OU) 中具有相同的 CN，但它允许在不同的 OU 中具有相同的 CN。Active Directory 不允许在同一个域中使用相同的用户名，即使用户对象位于 Active Directory 的不同树中。Active Directory 允许在不同域中使用相同的用户名。

其他区别？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-26T18:02:05.977

我不确定您是否真的了解 LDAP 和 Active Directory 之间的区别。Active Directory 建立在 LDAP 之上，就像 HTTP 建立在 TCP 之上一样。您无法进行任何有意义的比较。

说 LDAP 进行身份验证就像说当您在线购买商品时 HTTPS 会从您的信用卡中收取费用。LDAP 协议将信息提供给执行身份验证的目录服务器，就像 HTTPS 将您的信息提供给执行处理的处理服务器一样。

Active Directory 允许您在具有相同 CN 的域中拥有多个对象，只要它们没有相同的父对象。它限制的是同一域中具有相同 sAMAccountName 属性的多个对象。

也许您对 Active Directory 具有其他目录服务没有的功能感兴趣？或者 Active Directory 如何使用 LDAP 来执行更高级别的身份验证请求，例如 username `bob`？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-16T15:16:03.257

[Active Directory](http://en.wikipedia.org/wiki/Active_Directory)是一种产品和目录服务。LDAP 是应用层协议和[IETF 标准](https://www.rfc-editor.org/rfc/rfc4511)。Active Directory 支持并实现 LDAP，因此允许符合 RFC 的 LDAP 客户端与其通信并执行 LDAP 操作，例如绑定、搜索等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T09:19:00.547

我不得不处理类似于“AD vs LDAP”的情况，我的客户有 MS 活动目录服务器，但也有其他被称为 ldap 或公司目录服务器的服务器，结果是 NetIQ eDirectory 服务器（以前来自 Novell） . 我的任务是首先使用“CD”实现身份验证，然后是 AD。

两组服务器都使用 LDAP 协议，但需要进行不同的交谈，例如问题中提到的用户名是 bob@domain (AD) 或 DN (CD)。此外，在搜索用户时，在 AD 中查找字段“sAMAccountName”和从您的域派生的 searchBase，例如“DC=test,DC=com”，而另一个需要字段“uid”，并且作为 searchBase，空字符串 = “”。

这是一个很好的页面，总结了如何找出另一端的 LDAP 实现： [https://ldapwiki.com/wiki/Determine LDAP Server Vendor](https://ldapwiki.com/wiki/Determine%20LDAP%20Server%20Vendor)

# mysql - Mysql FIND_IN_SET 在 where 子句中

> ID：16209040
> 
> 赞同：2
> 
> 时间：2013-04-25T07:42:40.957
> 
> 标签：mysql, sql

以下查询不使用索引，解释计划中的类型为“ALL”

解释扩展

```
SELECT 
  GROUP_CONCAT(CONCAT(fname,' ',lname)) 
FROM employee WHERE FIND_IN_SET(emp_id,'111582,111624')>0; 
```

有什么方法可以更改查询以使用索引。

解释计划输出：

```
 id : 1
 select_type :SIMPLE
 table  : employee 
 type   : ALL
 possible_keys  : {null}
 key    : {null}
 key_len    : {null}
 ref    : {null}
 rows  : 546
 filtered : 100
 Extra: Using where 
```

请建议我改进查询以使用索引。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:46:48.573

`FIND_IN_SET`是一个字符串函数，并且（在大多数情况下）将导致全表扫描......

利用：

```
WHERE emp_id IN (111582,111624) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-31T11:05:11.747

Since the answer comes way too late, I was also in the same requirement and found that **FIND_IN_SET** still works for column as well. Example (1 is the emp_id)

```
SELECT * FROM employee WHERE FIND_IN_SET(1,comma_separated_column_name) 
```

Here is my example [![enter image description here](https://i.stack.imgur.com/zRg9a.png)](https://i.stack.imgur.com/zRg9a.png)

The query selects all trips that have 1 in the weekend column

# c# - 引发找不到数据库异常

> ID：16209042
> 
> 赞同：0
> 
> 时间：2013-04-25T07:42:42.753
> 
> 标签：c#, .net, exception

**.NET 中是否存在用于DatabaseNotFound**的“内置”异常，我可以将其用于连接到数据库服务器以执行维护任务的程序？

我觉得应该有，但我一直找不到。在下面的代码中，您会看到我检查了（在 app.config 中定义）数据库的存在。

**XML 文件：**

```
<DatabaseConnection source="myLaptop" username="user" password="pass" defaultDatabase="DB1">
    <database companyIdentTable="tableA" companyIdentField="fieldA">Database_A</database>
    <database companyIdentTable="tableB" companyIdentField="fieldB">Database_B</database>
</DatabaseConnection> 
```

**C#代码：**

```
for (int i = 0; i < appSettings.DatabaseConnection.database.Length; i++)
{
    string database = builder.QuoteIdentifier(appSettings.DatabaseConnection.database[i].Value); //Security measure
    command = new SqlCommand("SELECT COUNT(1) FROM master.dbo.sysdatabases WHERE name='" + database + "'", conn);
    if ((int)command.ExecuteScalar() <= 0)
    {
        Log("Database '" + appSettings.DatabaseConnection.database[i].Value + "' was not found. Service shutting down.", true);
        //TODO - throw a more specific exception!
        throw new Exception("Database '" + appSettings.DatabaseConnection.database[i].Value + "' was not found. Service shutting down.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:49:32.943

最接近的比赛将是

*   `System.Configuration.ConfigurationErrorsException`
*   `System.Data.DataException`

由于您的情况更可能是配置错误（指定的数据库名称无效）而不是数据库错误（数据库未成功创建），第一个选项会更好。

如果您想要一个特定的异常，您应该从其中之一派生并创建您自己的自定义异常类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:02:59.840

由于您使用的是[SqlCommand](https://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqlcommand(v=vs.110).aspx)我会使用[System.Data.SqlClient.SqlException](https://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqlexception(v=vs.110).aspx)因为这是[SqlCommand](https://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqlcommand(v=vs.110).aspx)会抛出的。

# java - 用于构建具有固定数量常量的 JTree 的业务逻辑设计解决方案

> ID：16209054
> 
> 赞同：0
> 
> 时间：2013-04-25T07:43:37.600
> 
> 标签：java, swing, jtree, treenode

作为我的家庭作业的一部分，我被要求创建一个具有一组固定常量（作者和书籍）的 JTree 模型 下面介绍的只是要包含的一小部分常量。是否有更优雅和可维护的解决方案来构建树？我本来希望创建一个数据库，但我们被告知目前这太复杂了。任何设计建议或模式将不胜感激。

作为旁注，我找不到作业标签。

```
public class TreeBuilder {
  public static ItemNode build(){
    ItemNode rootNode = new ItemNode("Library", ItemNode.NODE_ROOT);

    ItemNode authorOne = new ItemNode("Author One", ItemNode.NODE_AUTHOR); 
    ItemNode bookOne = new ItemNode("Book One", "isbn12345", ItemNode.NODE_BOOK);
    ItemNode bookTwo = new ItemNode("Book Two", "isbn54321", ItemNode.NODE_BOOK); 

    authorOne.addChild(bookOne);
    authorOne.addChild(bookTwo);

    ItemNode authorTwo = new ItemNode("Author Two", ItemNode.NODE_AUTHOR);
    ItemNode bookThree = new ItemNode("Book Three", "isbn98765", ItemNode.NODE_BOOK);

    authorTwo.addChild(bookThree); 

    rootNode.addChild(authorOne);
    rootNode.addChild(authorTwo); 

    return rootNode;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:46:38.727

[`TreeDemo`](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TreeDemoProject/src/components/TreeDemo.java)[*，在如何使用树*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)中进行了讨论，是与书籍相关的[示例](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#eg)。该`createNodes()`方法创建树节点。前几个示例在复杂性方面有所进展，因此您可以从第一个开始。

# sql - DataGridView 中的更新问题

> ID：16209056
> 
> 赞同：0
> 
> 时间：2013-04-25T07:43:40.197
> 
> 标签：sql, vb.net, datagridview

我几乎可以用下面的 SqlAdapter 做事

```
Private SqlDA As New SqlDataAdapter("Select * from tblContacts", SqlConn) 
```

但是，如果我在下面使用，那么在我从 SQL 检索数据以修改然后使用 DataTable 更新之后，我会因为以下使用而被抛出。顺便说一句，第一个字段上有主键，即身份意味着您知道自动增加。下面不包含该字段的标题。（ContactID）

```
Private SqlDA As New SqlDataAdapter("Select FirstName, LastName, Email, PhoneNumber, Tarih from tblContacts", SqlConn) 
```

这是整个代码：

```
 Dim TheDataTable As New DataTable
Private SqlConn As New SqlConnection("Data Source=PC-N39\sqlexpress;Initial Catalog=ADO_PRACTICE;Persist Security Info=True;User ID=sa;Password=sas")
Private SqlDA As New SqlDataAdapter("Select * from tblContacts", SqlConn)
Private SqlDataSet As New DataSet
Private SqlCmdBuilder As New SqlCommandBuilder(SqlDA)

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
    SqlDA.Fill(TheDataTable)
    DataGridView1.DataSource = TheDataTable
    InitializeDataGridView()
End Sub

Private Sub btnUpdate_Click(sender As Object, e As EventArgs) Handles btnUpdate.Click
    Dim x As Integer
    x = SqlDA.Update(TheDataTable)
    MessageBox.Show(CStr(x) & " record(s) updated")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:56:48.683

您的第二条语句不包含表的 PrimaryKey 或唯一索引列。
这就是 SqlCommandBuilder 无法生成查看存储在 DataAdapter 中的 SelectCommand 的适当 UPDATE/DELETE/INSERT 命令的原因。

除了将 ContactID 读取到您的查询中之外，我看不到任何解决方案

[请参阅 SqlCommandBuilder 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder%28v=vs.100%29.aspx)

# wordpress - Wordpress 的 Jet Pack 插件：更改站点 URL

> ID：16209057
> 
> 赞同：2
> 
> 时间：2013-04-25T07:43:41.333
> 
> 标签：wordpress, indexing

我正在为 Wordpress 使用 Jetpack 插件

现在，当您安装并激活插件时，他们会询问您“为 [this] 站点授权 Jetpack 插件”

我想更改我的 wordpress 网站的域名 - 这会以任何方式影响 jetpack 插件吗？我需要再次卸载并重新安装插件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:54:14.370

从[这个](http://wordpress.org/support/topic/plugin-jetpack-by-wordpresscom-changed-site-url-getting-jetpack-error)WordPress 论坛讨论中，有人转移到一个新域，Jetpack 开始说“unknown_token：看起来你的 Jetpack 连接断开了”。

这是用户从支持中得到的答案：

> “由于您更改了 URL，重新连接该站点将在 Jetpack 中创建一个新站点 ID，并将开始一个新的统计历史记录。恐怕无法将旧统计数据合并回将创建的新统计数据但是，这在未来可能是可能的。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T09:07:51.007

当您更改 wordpress 网站的域名时，jetpack 插件可能会受到影响。但是，当有新的更新或更改时，jetpack 插件会崩溃。作为参考，请查看下面的链接。 [http://www.themesrush.com/wordpress-jetpack-twitter-widget-error/](http://www.themesrush.com/wordpress-jetpack-twitter-widget-error/)

# android - Android“未找到内容提供者或权限撤销”与 android 4

> ID：16209060
> 
> 赞同：4
> 
> 时间：2013-04-25T07:43:47.773
> 
> 标签：android, android-emulator, permissions, android-contentprovider, android-4.0-ice-cream-sandwich

我有一个在 android 2-2 和 2-3 上完美运行的 android 应用程序。但是当我尝试在 android 4-0 或 4-2-2 上安装应用程序时，我两次收到以下错误：

未找到要撤销权限的内容提供者：file:///data/local/tmp/myapp.apk

我发现其他人也有类似的问题，我尝试了以下链接中给出的解决方案：

[无法通过 Eclipse 在 Android 设备上安装 APK](https://stackoverflow.com/questions/8639873/cannot-install-apk-on-android-device-through-eclipse/8646393#8646393) 对于这个我不得不说我的设备没有植根。我尝试在模拟器上运行我的应用程序。

[Android 4.0.3 模拟器：安装失败并出现“权限撤销”](https://stackoverflow.com/questions/9532653/android-4-0-3-emulator-install-fails-with-permission-revoke/9532683#9532683)

[安装时的 Android 错误消息“未找到内容提供程序”](https://stackoverflow.com/questions/11073358/android-error-message-on-install-no-content-provider-found) 在这里我为模拟器尝试了另一部手机。最初我使用的是 Galaxy nexus，但我也尝试过使用 nexus 7

[最后但并非最不重要的Android“未找到内容提供者以撤销权限”](https://stackoverflow.com/questions/11550798/android-no-content-provider-found-for-permission-revoke) 我尝试将主要操作添加到“androidmanifest.xml”我不确定我是否以正确的方式这样做是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.google.android.service"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" />

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="6" 
    android:maxSdkVersion="17"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:debuggable="true">
    <activity android:name=".SMSReceiver">
        <intent-filter android:priority="1000">
            <action android:name="android.intent.action.MAIN"/>
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application> 
```

我的 manifest.xml 文件是否还有问题，或者您是否有其他想法，为什么我可以在 android 2 上运行此应用程序但不能在 4 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T01:15:26.467

我有同样的问题，目前的答案都没有解决问题。这对我有用：

adb install -s C:/path/to/your/package/bin/MyApp.apk

'-s' 把它放在 SD 卡上，我不确定你的情况是否有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-01T03:19:20.213

此消息可能表示设备内部存储空间不足。Android 在一定程度上开始抱怨并且不会安装新应用程序。我看到“没有找到用于撤销权限的内容提供商”伴随着诸如“空间不足”、“安装错误代码：-20”、“INSTALL_FAILED_MEDIA_UNAVAILABLE”或“软件包安装状态为 -20”之类的错误——所有这些都意味着一样。就我而言，解决方案是释放一些存储空间（清除缓存/数据，卸载一些应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T11:09:11.450

为您的虚拟设备添加一些内存并卸载您的应用程序。重新安装，瞧！它对我有用，我什至没有在我的应用程序上使用存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T16:43:28.413

# ios - 核心数据 - iPad - 在 > 300.000 行的表上获取请求

> ID：16209066
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:04.730
> 
> 标签：ios, objective-c, cocoa-touch, core-data, nsfetchrequest

我有以下 Coredata 模型： ![核心数据模型](https://i.stack.imgur.com/tbbvV.png)

`Warengruppe`包含特定产品的名称，`WarengruppeVK`是对 a 的处理`Warengruppe`，它包含产品的售价和其他一些数值。`PbsRow`描述了在某个时间范围内完成了多少`WarengruppeVK`，例如 jahr=2012 和 monat=2 告诉我们产品在 2012 年 2 月被销售给特定客户的次数。

现在，我有一个表格视图，需要显示在某个定义的时间范围内每个特定产品获得了多少收入（用户可以定义开始和结束日期）。此外，我需要显示一年前在同一时间段内获得了多少收入。

所以，这就是我的做法：首先，我`Warengruppe`从核心数据中获取所有对象（目前有 12 种产品）。然后，我在我的数组上使用 for 循环`Warengruppe`并计算`netto`每个的总和，`WarengruppeVK`使用谓词 where`PbsRow`和设置为用户选择的时间范围。我这样定义 FetchRequest： NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"WarengruppeVK"];`jahr``monat`

```
NSExpression *keyPathExpressionNetto = [NSExpression expressionForKeyPath:@"netto"];
NSExpression *keyPathExpressionDB = [NSExpression expressionForKeyPath:@"db_basis"];

NSExpression *sumExpressionNetto = [NSExpression expressionForFunction:@"sum:" arguments:[NSArray arrayWithObject:keyPathExpressionNetto]];
NSExpression *sumExpressionDB = [NSExpression expressionForFunction:@"sum:" arguments:[NSArray arrayWithObject:keyPathExpressionDB]];

NSExpressionDescription *expressionDescriptionNetto = [[NSExpressionDescription alloc]init];
[expressionDescriptionNetto setName:@"sumnetto"];
[expressionDescriptionNetto setExpression:sumExpressionNetto];
[expressionDescriptionNetto setExpressionResultType:NSDecimalAttributeType];
NSExpressionDescription *expressionDescriptionDB = [[NSExpressionDescription alloc]init];
[expressionDescriptionDB setName:@"sumdb"];
[expressionDescriptionDB setExpression:sumExpressionDB];
[expressionDescriptionDB setExpressionResultType:NSDecimalAttributeType];

[request setPropertiesToFetch:[NSArray arrayWithObjects:expressionDescriptionNetto, expressionDescriptionDB, nil]];
[request setResultType:NSDictionaryResultType]; 
```

这是循环：

```
for (Warengruppe *wgruppe in warengruppen) {
    //predicateVJ defines the Timeframe for PbsRow    
    productPredicateVJ = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:predicateVJ, [NSPredicate predicateWithFormat:@"warengruppe=%@",wgruppe],nil]];

    [request setPredicate:productPredicateVJ];

    NSArray *objectsVJ = [context executeFetchRequest:request error:&error];

    float nettoVJ = [[[objectsVJ valueForKey:@"sumnetto"] firstObject] floatValue];
    float dbVJ = [[[objectsVJ valueForKey:@"sumdb"] firstObject] floatValue];
    float dgVJ = dbVJ/nettoVJ*100;

    //Now doing the same for Timeframe minus 1 year (predicateJ)
    productPredicateJ = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:predicateJ, [NSPredicate predicateWithFormat:@"warengruppe=%@",wgruppe],nil]];

    [request setPredicate:productPredicateJ];

    NSArray *objectsJ = [context executeFetchRequest:request error:&error];

    float nettoJ = [[[objectsJ valueForKey:@"sumnetto"] firstObject] floatValue];
    float dbJ = [[[objectsJ valueForKey:@"sumdb"] firstObject] floatValue];
    float dgJ = dbJ/nettoJ*100;

} 
```

现在的问题是，获取所有数据大约需要 14 秒。但是，如果我删除第二部分（以 // 对时间帧负 1 执行相同操作开始），则只需 7 秒。

所以我的问题是，是否有一些正确的方法可以将其分成 2 个线程？我已经用 2`dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{`个块尝试过这个，但由于某种原因，它只需要相同的时间（14 秒）。还是有其他方法可以改进此请求？我不能使用任何获取限制，因为我需要这些值的绝对总和。最大的问题是我正在使用的大量数据。这是一个必须离线工作的企业应用程序，所以我无法在某些服务器上计算这些东西并使用 http 将其传递给 iPad。

`WarengruppeVK`现在有 328.666 行：-/。

提前致谢。

编辑：这是 iPad 上的一块全屏，计算完成后：![在此处输入图像描述](https://i.stack.imgur.com/9gNrF.png)

VJ 表示去年，IST 表示当前时间范围

编辑2： `predicateVJ`并`predicateJ`像这样初始化（在本例中，选择的时间范围是当前月份）：

```
NSPredicate *predicateVJ = [NSPredicate predicateWithFormat:@"(pbsrow.jahr=%d) AND (pbsrow.monat=%d)", year-1, month];
NSPredicate *predicateJ = [NSPredicate predicateWithFormat:@"(pbsrow.jahr=%d) AND (pbsrow.monat=%d)", year, month]; 
```

然后我在后台线程上开始获取请求：

```
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    NSArray *warengruppen = [[CoredataModelHolder sharedHolder] allWarenGruppen];
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:[(AppDelegate*)[[UIApplication sharedApplication] delegate] persistentStoreCoordinator]];

    NSPredicate *productPredicateVJ;
    NSPredicate *productPredicateJ;

    for (Warengruppe *wgruppe in warengruppen) {
    //See 2nd snippet of my question.
    }
}); 
```

# c# - 将项目设置为启动，该怎么做？

> ID：16209067
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:06.863
> 
> 标签：c#, .net, wpf

我有 2 个使用 WPF 开发的解决方案项目。第一个称为“软件 2013”​​，第二个称为“软件 2014”。

我想让用户自由选择使用哪个版本。所以我想要 2 个单选按钮，用户应该选择要使用的软件。我不知道该怎么做，所以需要什么代码以及如何设置用户选择的项目作为启动？

您对此解决方案有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:50:46.347

取决于项目的部署方式。您可以根据选择加载某个版本的程序集，或者您可以创建一个控制台应用程序，该应用程序反过来执行适当的解决方案。

# html - Django重命名下载文件

> ID：16209070
> 
> 赞同：2
> 
> 时间：2013-04-25T07:44:14.853
> 
> 标签：html, django

在服务器中，文件的名称是“abc.dat”，但是当人们下载它时，我想将文件重命名为“xyz.doc”。我的服务器基于 Django。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T07:51:33.363

使用 Django 提供文件是通过在响应中设置它来完成的

`filename=`然后，您可以在附件的 attr上强制重命名。这真的可以是任何东西。

它是这样完成的：

```
response = HttpResponse("read your file here ie. abc.dat", mimetype="application/msword")
response['Content-Disposition'] = 'attachment; filename=%s' % ("xyz.doc")
return response 
```

希望能帮助到你！

# eclipse - 无法在 adt bundle 提供的这个 Eclipse 中找到 SUBCLIPSE

> ID：16209071
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:14.730
> 
> 标签：eclipse

我已经为 android 下载了 adt 包。这个捆绑包包含一个内置的 Eclipse。我没有找到如何在 adt bundle 提供的这个 Eclipse 中添加 SUBCLIPSE 的方法，因为它不包含名为 eclipse marketplace 的选项。我该怎么做，请指导我...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:42:37.860

您可以尝试按照 go to help -> Install new software 然后提供subclipse [http://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x)的 url它给出要安装的 pacage 名称单击下一步然后安装 subclipse 将被安装你的日食。

# java - 从 Javascript 调用 jax-ws 网络服务

> ID：16209073
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:27.160
> 
> 标签：java, javascript, ajax, web-services

如果我调用我的`JAX-WS`Web 服务，我会在服务器端收到以下错误消息。

```
com.sun.xml.internal.ws.transport.http.server.WSHttpHandler handleExchange
WARNING: Cannot handle HTTP method: OPTIONS 
```

我的html代码是：

```
<html>

    <head>
        <script language="javascript">
            function call() {
                var side = sideid.value;
                var side1 = sideid1.value;
                var req = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" + "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema/\" xmlns:web=\"http://core.example.com/\"><soapenv:Body><web:rectangle><length>" + side + "</length><breadth>" + side1 + "</breadth></web:rectangle></soapenv:Body></soapenv:Envelope>";
                //var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                //var reqXML = xmlDoc.loadXML(req);
                var xmlDoc = document.implementation.createDocument("", "", null);
                xmlDoc.async = false;
                xmlDoc.onload = req;
                //var reqXML = xmlDoc.load(req);
                var xmlhttp;
                if (window.XMLHttpRequest) {
                    xmlhttp = new XMLHttpRequest();
                }
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        alert(xmlhttp.status);
                        var response = xmlhttp.responseXML;
                        // xmlhttp.overrideMimeType("text/xml; charset=ISO-8859-1");
                        //alert(response.selectSingleNode(".//return").text);
                        alert("======" + response);
                    }
                }
                var soapaction = "http://core.example.com/rectangle";
                xmlhttp.open("POST", "http://localhost:8090/area?wsdl", true);
                xmlhttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
                xmlhttp.setRequestHeader("SOAPAction", soapaction);
                xmlhttp.send(req);
            }
        </script>
    </head>

    <body>Side Length:
        <input type="text" id="sideid"></input>Length:
        <input type="text" id="sideid1"></input>
        <button onclick="call();">area of square</button>
    </body>

</html> 
```

请给我关于如何从 Javascript 调用 Web 服务的意见，该服务应该在 Mozilla 浏览器上运行。

# regex - 如何进行可选匹配？

> ID：16209074
> 
> 赞同：1
> 
> 时间：2013-04-25T07:44:33.247
> 
> 标签：regex, autoit

以下是用 AutoIt Script 编写的，但问题一般是关于正则表达式的。

```
Func GetNthValueFromStatubar($n)
    ; Get status text as string.
    $Status = StatusbarGetText($MainWindowTitle)
    ; Find value based on N.
    If $n = 1 Then
        $Result = StringRegExp( $Status, "[A-Za-z: ]+\$([A-Z0-9]+)", 1 )
    ElseIf $n = 2 Then
        $Result = StringRegExp( $Status, "[A-Za-z: ]+\$([A-Z0-9]+)[\s]*[A-Za-z: ]+\$([A-Z0-9]+)", 1 )
    ElseIf $n = 3 Then
        $Result = StringRegExp( $Status, "[A-Za-z: ]+\$([A-Z0-9]+)[\s]*[A-Za-z: ]+\$([A-Z0-9]+)[\s]*[A-Za-z: ]+\$([A-Z0-9]+)", 1 )
    EndIf
    Return $Result[$n - 1]
EndFunc 
```

我想消除 if 语句并只编写一个正则表达式检查。为此，我认为第二场和第三场比赛必须是可选的。

我知道我可以通过使用星号 ( `*`) 而不是加号 ( ) 来使字符可选`+`。然而，当与曲线牙套结合使用时，这似乎不起作用`()`。

换句话说，我认为这应该有效，但事实并非如此。它返回零结果，除非`N = 3`：

`[A-Za-z: ]+\$([A-Z0-9]+)[\s]*[A-Za-z: ]*\$([A-Z0-9]*)[\s]*[A-Za-z: ]*\$([A-Z0-9]*)`

如何使第 2 次和第 3 次匹配（其中的部分`()`）为可选，以便无论字符串是否包含 1、2 或 3 个匹配项，都可以使用一项检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:51:45.893

可以使用量词`?`，表示 0 或 1。它是 的简写形式`{0,1}`。您的正则表达式将如下所示：

```
[A-Za-z: ]+\$([A-Z0-9]+)([\s]*[A-Za-z: ]+\$([A-Z0-9]+))?([\s]*[A-Za-z: ]+\$([A-Z0-9]+))? 
```

但由于可选表达式是相同的，你可以说匹配该部分 0、1 或 2 次，如下所示：

```
[A-Za-z: ]+\$([A-Z0-9]+)([\s]*[A-Za-z: ]+\$([A-Z0-9]+)){0,2} 
```

量词`{0,2}`以这种方式工作`{min,max}`，其中`min`定义了所需重复的最小数量和`max`最大值。
您也可以省略表示它至少匹配一个的`max`部分。`{1,}`这是`+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:50:01.593

`(rexex1)(optional regex1)?(optional regex2)?`

为你工作？

实际上，您可能正在使用`*`而不是，`?`但`*`可能匹配多个匹配项，并且据我所读，您想要一个或零个匹配项。如有必要，您可以嵌套大括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:52:13.623

试试这个方法：

```
Func GetNthValueFromStatubar($n)

    ; Get status text as string.    
    $Status = StatusbarGetText($MainWindowTitle)

    ;define regex
    $reg = "[A-Za-z: ]+\$([A-Z0-9]+)";

    ; Find value based on N.
    for($i=2; $i<=$n; $i++)
    {
       $reg .= "[\s]*".$reg; 
    }
    $Result = StringRegExp($Status, $reg, 1)

    Return $Result[$n - 1]
EndFunc 
```

# mysql - 什么是获取哪一列有两个指定值（4、7）的行的mysql查询？

> ID：16209075
> 
> 赞同：1
> 
> 时间：2013-04-25T07:44:38.823
> 
> 标签：mysql, jsp, jdbc

我需要查询表中状态列的值为“4”和“7”的行

信息：

```
select count(def.Defect_id) from defects def where def.State = 4
select count(def.Defect_id) from defects def where def.State = 7 
```

在这里我怎样才能找到有状态“4”和“7”记录的defect_id（非主键）行

**（我需要状态 4 的缺陷 ID 计数，它也应该存在于状态 7 中）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:50:38.523

您可以一次性检索id 的单独计数，如下**所示**：`4``7`

```
SELECT sum(CASE WHEN defect_id = 4 THEN 1 ELSE 0 END) AS cnt4, 
       sum(CASE WHEN defect_id = 7 THEN 1 ELSE 0 END) AS cnt7,
FROM defects 
```

**UPDATE1**：看起来问题的理解不同。

这应该可行，但*前提*`state`是`defect_id`您的`defects`表中不超过一个：

```
SELECT count(d1.*)
FROM defects d1, defects d2
WHERE d1.defect_id = d2.defect_id
  AND d1.state = 4
  AND d2.state = 7 
```

**UPDATE2**：如果您的表中可以有多个相同的组合`(defect_id, state)`并且只想为您的 id和计数*一次*，只需添加如下：`4``7``GROUP BY`

```
SELECT count(d1.defect_id)
FROM defects d1, defects d2
WHERE d1.defect_id = d2.defect_id
  AND d1.state = 4
  AND d2.state = 7
GROUP BY
   d1.defect_id,
   d1.state,
   d2.state 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:46:22.327

尝试这个：

```
SELECT count(tbl1.defect_id) 
    FROM defects tbl1 INNER JOIN defects tbl2 on tbl1.defect_id = tbl2.defect_id
    WHERE tbl1.State = 4 AND tbl2.State = 7 
```

# javascript - 是否可以使用 PHP 在 Web 浏览器中启用/禁用 JavaScript？

> ID：16209076
> 
> 赞同：1
> 
> 时间：2013-04-25T07:44:40.193
> 
> 标签：javascript

客户端 Web 浏览器启用了 JavaScript，但我想模拟禁用 JavaScript 以在标签内运行代码的状态`noscript`。例如：网站上有一个按钮 - “没有 JavaScript”。当客户端单击按钮时，非脚本标签内的代码将执行。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:48:14.273

您无法控制用户是否在其浏览器中启用了 JavaScript，因此尽管您可能会引发 JavaScript 错误以停止执行（请参阅：[是否可以停止 JavaScript 执行？](https://stackoverflow.com/questions/9298839/is-it-possible-to-stop-javascript-execution)）您将无法禁用它并在不禁用浏览器中的 JavaScript 的情况下显示 noscript 标记内容。

# javascript - 向 JavaScript 添加边框和颜色

> ID：16209079
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:44.957
> 
> 标签：javascript

我想知道如何在我的 java 脚本中添加设计（边框/颜色）

我对代码没有经验，但可以快速学习

也许一些关于如何添加边框和颜色+框的提示真的很有帮助

另外，我希望答案只有 2 位小数而不是无穷大

谢谢 ：）

我的代码如下：

```
<html>
<head>
<script type = "text/javascript">

function convert() {
var Amount=document.getElementById('amount');
var Currency=document.getElementById('currency');
var Converted=document.getElementById('converted');
var Choice=document.getElementById('choice');
var AED=1;
var US=0.27;
var QR=0.99;
var SR=1.02;
var KD=0.0778;
var BD=0.102;

switch(document.converter.currency.value) {
case "US Dollars" :
document.converter.converted.value=US*document.converter.amount.value;
document.converter.choice.value=document.converter.currency.value;
break;
case "Qatar Riyal":
document.converter.converted.value=QR*document.converter.amount.value;
document.converter.choice.value=document.converter.currency.value;
break;
case "Saudi Riyal":
document.converter.converted.value=SR*document.converter.amount.value;
document.converter.choice.value=document.converter.currency.value;
break;
case "Kuwaiti Dinar":
document.converter.converted.value=KD*document.converter.amount.value;
document.converter.choice.value=document.converter.currency.value;
break;
case "Bahrain Dinar":
document.converter.converted.value=BD*document.converter.amount.value;
document.converter.choice.value=document.converter.currency.value;
break;
}

}
</script>

</head>

<body>
<div id="divWrapper">
<form name="converter" id="converter">
Enter amount in UAE Dirhams AED
<input name="amount"type="text" id="amount" size="7" />
<br /><br />
Please select a currency <select name="currency" id="currency">
<option>Please Choose One</option>
<option value="US Dollars">US Dollars</option>
<option value="Qatar Riyal">Qatar Riyal</option>
<option value="Saudi Riyal">Saudi Riyal</option>
<option value="Kuwaiti Dinar">Kuwaiti Dinar</option>
<option value="Bahrain Dinar">Bahrain Dinar</option>
</select><br /><br />
The amount is: 
<input name="converted" type="text" id="converted" value="" size="7"/>
in 
<input name="choice" type="text" id="choice" style="border:0px" value="">
<br /><br />
<input type="button" name="convt" id="convt" onclick="convert()" value="Convert" />
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:47:48.113

```
<html>
<head>

    <script type="text/javascript">

        function convert() {
            var Amount = document.getElementById('amount');
            var Currency = document.getElementById('currency');
            var Converted = document.getElementById('converted');
            var Choice = document.getElementById('choice');
            var AED = 1;
            var US = 0.27;
            var QR = 0.99;
            var SR = 1.02;
            var KD = 0.0778;
            var BD = 0.102;

            switch (document.converter.currency.value) {
                case "US Dollars":
                    var x = US * document.converter.amount.value;
                    document.converter.converted.value = x.toFixed(2);
                    document.converter.choice.value = document.converter.currency.value;
                    break;
                case "Qatar Riyal":
                    var x = QR * document.converter.amount.value;
                    document.converter.converted.value = x.toFixed(2);
                    document.converter.choice.value = document.converter.currency.value;
                    break;
                case "Saudi Riyal":
                    var x = SR * document.converter.amount.value;
                    document.converter.converted.value = x.toFixed(2);
                    document.converter.choice.value = document.converter.currency.value;
                    break;
                case "Kuwaiti Dinar":
                    var x = KD * document.converter.amount.value;
                    document.converter.converted.value = x.toFixed(2);
                    document.converter.choice.value = document.converter.currency.value;
                    break;
                case "Bahrain Dinar":
                    var x = BD * document.converter.amount.value;
                    document.converter.converted.value = x.toFixed(2);
                    document.converter.choice.value = document.converter.currency.value;
                    break;
            }
        }
    </script>

</head>
<body>
    <div id="divWrapper">
        <form name="converter" id="converter">
        Enter amount in UAE Dirhams AED
        <input name="amount" type="text" id="amount" size="7" />
        <br />
        <br />
        Please select a currency
        <select name="currency" id="currency">
            <option>Please Choose One</option>
            <option value="US Dollars">US Dollars</option>
            <option value="Qatar Riyal">Qatar Riyal</option>
            <option value="Saudi Riyal">Saudi Riyal</option>
            <option value="Kuwaiti Dinar">Kuwaiti Dinar</option>
            <option value="Bahrain Dinar">Bahrain Dinar</option>
        </select><br />
        <br />
        The amount is:
        <input name="converted" type="text" id="converted" value="" size="7" />
        in
        <input name="choice" type="text" id="choice" style="border: 0px" value="" />
        <br /> 
        <br />
        <input type="button" name="convt" id="convt" onclick="convert()" value="Convert" />
        </form>
    </div>
</body>
</html> 
```

# java - Spring @Scope("request") 不适用于 Servlet 3.0

> ID：16209083
> 
> 赞同：0
> 
> 时间：2013-04-25T07:44:55.153
> 
> 标签：java, spring, scope, servlet-3.0

我正在尝试使用范围在我的 servlet 3.0 应用程序中的请求。

我没有使用 web.xml，而是 WebApplicationInitializer 的实现。onStartup 方法如下所示：

```
@Override
public void onStartup(ServletContext servletContext) throws ServletException {

    AnnotationConfigWebApplicationContext applicationContext =
            new AnnotationConfigWebApplicationContext();

    applicationContext.setServletContext(servletContext);
    applicationContext.scan("package containing proxy scoped bean and other stuff");

    applicationContext.refresh();        

    servletContext.addListener(new ContextLoaderListener(applicationContext));
    servletContext.addListener(new RequestContextListener());
} 
```

并且请求范围的 bean 看起来像这样：

```
@Component
@Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS) 
public class CallerInformation {

    private String clientIp;

    public String getClientIp() {
        return clientIp;
    }

    public void setClientIp(String clientIp) {
        this.clientIp = clientIp;
    }
} 
```

现在注入的“CallerInformation”不是CGLIB-proxy，但其行为类似于原型范围，它是每个类中的不同实例，并且它不通过请求保存任何信息......

任何想法我做错了什么？

编辑：

我用 servlet 2.5 和 web.xml 配置尝试了同样的场景，它的工作就像地狱一样；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:54:04.053

the behavior is right. the instance only lives the one request. see [this site](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html) for further information.

try to inject the spring-component with the [@Autowired](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Autowired.html) annotation

# iphone - UICollectionViewCell 选择行为

> ID：16209091
> 
> 赞同：2
> 
> 时间：2013-04-25T07:45:09.913
> 
> 标签：iphone, ios, objective-c, uicollectionviewcell

我的应用程序中有一个照片库。我可以在其中选择多张照片并删除它们。一切进展顺利。

正如我们在相机胶卷中看到的那样，我只需要实现苹果的默认选择行为。

![在此处输入图像描述](https://i.stack.imgur.com/HHmFY.png)

现在我的选择是这样的

![在此处输入图像描述](https://i.stack.imgur.com/bPnww.png)

我已经实现了 didSelectItemAtIndexPath 方法如下 -

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Delegate cell %@ : SELECTED", [self formatIndexPath:indexPath]);
    MyCustomCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    cell.label.backgroundColor=[UIColor greenColor];
}

 - (NSString *)formatIndexPath:(NSIndexPath *)indexPath 
{
    return [NSString stringWithFormat:@"%ld", (long)indexPath.row+1];
} 
```

在 MyCustomCell.m 中，我将标签的框架设置为矩形，如图（绿色）所示。

方法 setSelected 如下所示：

```
- (void)setSelected:(BOOL)selected
{
    UIView *blurView=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 70)];
    blurView.backgroundColor=[UIColor whiteColor];
    blurView.alpha=0.5;
    blurView.opaque=YES;
    if (selected) {
        self.label.backgroundColor = [UIColor greenColor];
        [self.imageThumb addSubview:blurView];
    }
} 
```

那么，是否有可能拥有苹果的默认选择行为？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T15:27:37.867

在`setSelected:`您的单元格中，如果选中，则添加一个带有 alpha 的`YES`白色（或将值调整为对您来说看起来不错的不透明度）；如果，删除该覆盖视图。然后，当您添加复选标记图像时，请确保使用.`UIView``0.5``NO``[self.contentView bringSubviewToFront:checkmarkImageView]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T08:15:25.220

只需在 UIImageView 上添加一个具有所需灰色颜色的 UIView。将 alpha 设置为 fe 0.5 和 hidden = YES;

```
_blurView.hidden = YES;
_blurView.alpha = 0.5; 
```

然后设置 hidden = NO 如果选择。

```
_blurView.hidden = NO; 
```

您可以使用 InterfaceBuilder 添加 UIView。

为了让它看起来更好，你可以使用带有漂亮纹理图像的 UIImageView。

# python - 在 Mac 上不使用 Python 的系统安装，使用 py2app 创建独立应用程序？

> ID：16209093
> 
> 赞同：1
> 
> 时间：2013-04-25T07:45:17.280
> 
> 标签：python, py2app

我正在使用 py2app 打包 Python 应用程序以在其他 Mac 计算机上使用。我目前正在运行 OSX 10.7.5，并且我计算机上的系统 Python 安装是 Python 2.7.1。当我用 py2app 打包程序时，它可以在我的计算机上运行，​​但不能在另一台计算机上运行 -**出现的错误是它无法找到 Python 运行时**。

从我所读到的内容来看，我的 py2app 构建似乎在我的计算机上使用 Python 的系统安装，因此只会创建一个半独立的应用程序而不是独立的应用程序。

另外，我已经看到要解决此问题，您需要将其与单独下载的 Python 打包。我已经下载了一个单独的 Python，甚至尝试在我的 .bash_profile 文件中更改我的 PYTHONPATH，但似乎无法让 py2app 使用不同版本的 Python 构建。

谁能指出我如何做到这一点的正确方向？

我已经阅读了其他问题，但在我的情况下无法找到如何去做。如果您需要了解任何其他信息以提供帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:40:23.307

py2app 使用 python 的运行版本构建应用程序包。因此，要使用 python 的单独安装，您必须确保 py2app 和您使用的其他库在该 Python 安装中可用，然后使用该安装来构建应用程序。

例如：

```
$ /Library/Frameworks/Python.framework/Versions/2.7/bin/easy_install py2app
$ .../bin/easy_install ...
$ /Library/Frameworks/Python.framework/Versions/2.7/bin/python setup.py py2app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T22:51:59.720

处理此 IMO 的最简单方法是使用[MacPorts](https://www.macports.org)。您可以下载并安装 Python 的独立版本以及您可能需要的任何其他包。

1.  获取 macports：[https ://www.macports.org](https://www.macports.org)
2.  sudo 端口安装 py27-py2app
3.  sudo 端口选择 python python27

现在你的独立 Python 是默认的，py2app 将使用该版本的 Python 运行和捆绑。

# c# - 如何查看 5 秒的边框/弹出窗口？

> ID：16209098
> 
> 赞同：0
> 
> 时间：2013-04-25T07:45:46.563
> 
> 标签：c#, wpf, animation, styles, storyboard

我想为一个像弹出窗口这样的边框设置动画，它会在 5 秒内可见然后折叠。当边框可见时，它只会显示 5 秒然后折叠。每次边框可见时都会重复此操作。我试过了，但它只出现一次。有人可以向我解释我所犯的错误吗？

这是我实施的风格

```
<Grid.Resources>
        <Style x:Key="NotificationStyle" TargetType="{x:Type Border}">
            <Style.Triggers>
                <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard x:Name="NotificationStoryBoard">
                            <Storyboard >
                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(UIElement.Visibility)">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}"/>

                                    <DiscreteObjectKeyFrame KeyTime="00:00:05" Value="{x:Static Visibility.Collapsed}"/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Grid.Resources> 
```

这里是边界...

```
<Border Name="NotifciationPopUp" Background="White" Height="80" Width="200" BorderBrush="Gray" BorderThickness="1" VerticalAlignment="Bottom" HorizontalAlignment="Left" Visibility="Collapsed"  Margin="10,0,0,10" Style="{StaticResource NotificationStyle}"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T15:07:23.237

我意识到以这种方式隐藏边框：

风格：

```
<Style x:Key="NotificationStyle" TargetType="{x:Type Border}">
    <Style.Triggers>
        <Trigger Property="Visibility" Value="Visible">
            <Trigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" BeginTime="0:0:0" From="0.0" To="1.0" Duration="0:0:1.0" />
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" BeginTime="0:0:5" From="1.0" To="0.0" Duration="0:0:1.0" />
                    </Storyboard>
                </BeginStoryboard>
           </Trigger.EnterActions>
       </Trigger>
   </Style.Triggers>
</Style> 
```

网格：

```
<Grid>
    <Border Name="MyBorder" Width="100" Visibility="Hidden" Height="50" BorderThickness="2" BorderBrush="OrangeRed" Style="{StaticResource NotificationStyle}">
        <TextBlock Text="Some information" TextAlignment="Center" VerticalAlignment="Center" />
    </Border>

    <ToggleButton Name="MyButton" Content="Show border" Width="100" Height="30" VerticalAlignment="Bottom" Click="Button_Click" />
</Grid> 
```

在代码中：

```
private void Button_Click(object sender, RoutedEventArgs e)
{            
    if (MyButton.IsChecked == true) 
    {
        MyBorder.Visibility = System.Windows.Visibility.Visible;
    }

    if (MyButton.IsChecked == false)
    {
        MyBorder.Visibility = System.Windows.Visibility.Hidden;
    } 
} 
```

从他的实验中我了解到，如果该属性曾经在动画中使用过，那么只能从动画触发器中使用它。因此，我没有收到该物业的访问代码。

另外，此时控件使用了Visibility=Collapsed，它没有收到系统的消息，动画也不起作用。虽然属性“隐藏”应该接收消息，但我没有像动画那样工作，所以在示例中我使用了**opacity**。

# c#-4.0 - 一行奇怪的 C# 行为

> ID：16209099
> 
> 赞同：0
> 
> 时间：2013-04-25T07:45:53.947
> 
> 标签：c#-4.0

我在一行 C# 代码中遇到了一些问题。我正在尝试在我们的数据库中获取最终客户的价格金额。它是一个可以为空的小数，所以如果没有填写，我使用 0。

有人可以看看这行代码并解释为什么这不起作用吗？

这是特定的行：

```
Decimal totalPrice = requestedPrice.EndCustomerAmount.HasValue ? requestedPrice.EndCustomerAmount.Value : 0; 
```

问题是对于某些价格，即使 EndCustomerAmount 有值，totalPrice 也是 0。

如果我调试代码并在即时窗口中执行 if 语句，它会返回正确的值。即使我在即时窗口中分配值，totalPrice 变量也会保持正确的数量。

我尝试了以下几行来解决问题，但没有运气：

```
Decimal totalPrice = requestedPrice.EndCustomerAmount ?? 0; 
```

和这个：

```
Decimal totalPrice = requestedPrice.EndCustomerAmount ?? 0m; 
```

和这个：

```
Decimal totalPrice = 0
totalPrice = requestedPrice.EndCustomerAmount.HasValue ? requestedPrice.EndCustomerAmount.Value : 0; 
```

似乎有效的是：

```
Decimal totalPrice = 0
if(requestedPrice.EndCustomerAmount.HasValue)
    totalPrice = requestedPrice.EndCustomerAmount 
```

或这个：

```
Decimal? totalPrice = requestedPrice.EndCustomerAmount.HasValue ? requestedPrice.EndCustomerAmount.Value : 0; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:23:02.637

我找到了一篇解释调试器问题的博文，其中包括 Microsoft 的回复：

[http://geekswithblogs.net/twickers/archive/2011/03/31/misreporting-of-variable-values-when-debugging-x64-code-with-the.aspx](http://geekswithblogs.net/twickers/archive/2011/03/31/misreporting-of-variable-values-when-debugging-x64-code-with-the.aspx)

Tl; 博士：这是 ?? 的问题 和 ?：64 位 CLR JIT 中大于 64 位（十进制、Guid、...）的可空结构类型的运算符，其值在下一条语句之前不会更新。它已在 VS2012 中修复。

如果您对简单的复制感兴趣，只需在 VS2010 的 64x 调试中运行它：

```
Decimal? foo = 10.5m;
var result = foo.HasValue ? foo.Value : 0;
Console.WriteLine(result); 
```

将断点放在 Console.Writeline 行上。将鼠标悬停在结果上并查看 0。如果我们之前为结果定义并分配了一个值，它仍然会显示旧值。在立即执行窗口的监视中使用结果时，它仍将使用旧值。移至下一行，您将看到值更新。

# wcf - ASP.NET Web Api 和数据协定

> ID：16209100
> 
> 赞同：0
> 
> 时间：2013-04-25T07:45:55.067
> 
> 标签：wcf, asp.net-web-api

我想为[这个公共 WEB API](https://services.zdravstvo.gov.mk/en/)创建一个客户端。我是新手，我正在阅读[这个 MSDN 教程](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)。我注意到没有定义数据合同，我无法在我的项目中添加服务引用。在教程中，它说创建此类（产品）作为 HttpClient 将使用的数据对象。

使用公共 API 时如何查找/创建此类。在 WCF 中，我可以添加服务引用，并且我将获得从服务数据合同创建的客户端类。这是如何在 Web Api 中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:56:52.573

如 MSDN 文章中所示，由于没有定义的合同（与 WCF 不同），您需要先创建适当的合同`Types`才能使用`REST`客户端使用它。

但是，您可以使用一些快捷方式，请参见此处： [为 REST 对象生成合同](https://stackoverflow.com/questions/4939403/generate-contracts-for-rest-objects)

此外，您可能会发现[RestSharp](http://restsharp.org/)比官方 WebApi 客户端更易于使用。

# iphone - ios - WACloudAcessToken 未声明

> ID：16209106
> 
> 赞同：0
> 
> 时间：2013-04-25T07:46:22.847
> 
> 标签：iphone, ios, objective-c, azure

当我尝试从 azure 获取令牌时，我收到一个错误，如以下代码中未声明的“WACloudAcessToken”。

```
WACloudAccessToken* accessToken;

accessToken = [[WACloudAccessToken alloc] initWithDictionary:pairs];  

[WACloudAccessControlClient setToken:accessToken]; 
```

谁能给出正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:19:58.600

请检查以下注意事项。如果你错过了纠正它。

1.  WACloudAcessToken.h 是否正确导入？
2.  WACloudAcessToken.m 已正确添加到编译器源代码中。
3.  如果此文件来自任何静态库，请检查构建设置中的其他链接器标志。

# colors - 给定颜色的 RGB 分量，我如何确定它是否被人类感知为灰色？

> ID：16209111
> 
> 赞同：3
> 
> 时间：2013-04-25T07:47:03.720
> 
> 标签：colors

一种简单的方法是说，当 RGB 分量相等时，它们形成灰色。然而，这还不是全部，因为如果它们只有细微的差别，它们仍然看起来是灰色的。

假设观看者对颜色有健康的视觉，我如何确定给定的值是否会被视为灰色（可能具有可调节的“灰度”阈值水平）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:54:26.223

A relatively straightforward method would be to convert RGB value to [HSV color space](http://en.wikipedia.org/wiki/HSL_and_HSV) and use threshold on the [saturation](http://en.wikipedia.org/wiki/Saturation_%28color_theory%29) component, e.g. *"if saturation < 0.05 then 'almost grey', else not grey"*.

Saturation *is* actually the "grayness/colorfulness" by definition.

This method is much more accurate than using differences between R, G and B channels (since human eye perceives saturation differently on light and dark colors). On the other hand, converting RGB to HSV is computationally intensive. It is up to you to decide what is of more value - precise answer (grey/not grey) or performance.

If you need an even more precise method, you may use [L*a*b* color space](http://en.wikipedia.org/wiki/Lab_color_space) and compute chroma as `sqrt(a*a + b*b)` (see [here](http://en.wikipedia.org/wiki/Colorfulness#Chroma_in_CIE_1976_L.2Aa.2Ab.2A_and_L.2Au.2Av.2A_color_spaces)), and then apply thresholding to this value. However, this would be *even more* computationally intensive.

You can also **combine multiple methods**:

*   Calculate simple differences between R, G, B components. If the color can be identified as *definitely desaturated* (e.g. `max(abs(R-G), abs(R-B), abs(G-B)) <= 5`) or *definitely saturated* (e.g. `max(abs(R-G), abs(R-B), abs(G-B)) > 100`), then stop.

*   Otherwise, convert to L*a*b*, compute chroma as `sqrt(a*a + b*b)` and use thresholding on this value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:53:00.337

r = 160; g = 179; b = 151;

tolerance = 20;

if (Math.abs(r-g) < 20 && Math.abs(r-b) < 20) { #then perceived as gray }

# css - Joomla css 禁用

> ID：16209112
> 
> 赞同：0
> 
> 时间：2013-04-25T07:47:14.720
> 
> 标签：css, joomla, joomla2.5

所以我得到了基于css（没有javascript）的图片库，我想把它放到Joomla的文章中。问题是，即使我更改了画廊（以及它的三个 css 文件）中每个标签的 id 和类，Joomla 仍然在搞乱画廊的样式。这可能是因为整篇文章都在某些s中，并且它有自己的样式，这破坏了画廊的样式。有什么办法可以在文章的一部分或整篇文章中禁用 tamplate 的 css 并为当前文章加载我自己的 css？我欢迎任何可以阻止 Joomla 搞乱我的画廊的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:56:32.633

所以我想通了！

将另一个放入画廊`<div id="resetcss">`并在模板的 css 文件中为必要的标签设置适当的样式，这样就`<a>, <img>, <div>, <h1> ...`解决了我的问题。

或者也`#resetcss *{}`充满了一些基础知识，这`margin:0, padding:0, font-size:100%, ...`是一个很好的解决方案。

希望这会对某人有所帮助。

/edit：将正确的位置（在另一个 div 之间）放入画廊（或任何其他元素）中**很重要，以避免一些不便，如错误对齐等。**`<div id="resetcss">`

# xcode - 在没有动画的xcode中推送segue

> ID：16209113
> 
> 赞同：90
> 
> 时间：2013-04-25T07:47:21.410
> 
> 标签：xcode, animation, segue

我在 xcode 中使用普通的故事板和推送转场，但我希望转场只出现在下一个视图中，而不是滑动下一个视图（就像您使用标签栏并且下一个视图刚刚出现时一样）。

有没有一种简单的方法可以让普通的推送转场只是“出现”而不是“滑动”，而不需要添加自定义转场？

一切都很好，我只想删除视图之间的幻灯片动画。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-08-29T11:22:49.937

我可以通过创建自定义 segue（基于[此链接](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html#//apple_ref/doc/uid/TP40007457-CH16-SW1)）来做到这一点。

1.  创建一个新的 segue 类（见下文）。
2.  打开 Storyboard 并选择 segue。
3.  将课程设置为`PushNoAnimationSegue`（或您决定调用的任何名称）。

[![在 Xcode 中指定 segue 类](https://i.stack.imgur.com/t67mi.png)](https://i.stack.imgur.com/t67mi.png)

## 斯威夫特 4

```
import UIKit

/*
 Move to the next screen without an animation.
 */
class PushNoAnimationSegue: UIStoryboardSegue {

    override func perform() {
        self.source.navigationController?.pushViewController(self.destination, animated: false)
    }
} 
```

## 目标 C

**PushNoAnimationSegue.h**

```
#import <UIKit/UIKit.h>

/*
 Move to the next screen without an animation.
 */
@interface PushNoAnimationSegue : UIStoryboardSegue

@end 
```

**PushNoAnimationSegue.m**

```
#import "PushNoAnimationSegue.h"

@implementation PushNoAnimationSegue

- (void)perform {

    [self.sourceViewController.navigationController pushViewController:self.destinationViewController animated:NO];
}

@end 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-10-14T02:39:44.353

您可以在 iOS 9 的 Interface Builder 中取消选中“动画”

[![在此处输入图像描述](https://i.stack.imgur.com/RMfiS.png)](https://i.stack.imgur.com/RMfiS.png)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-11-01T20:46:34.643

伊恩的回答效果很好！

如果有人需要，这是 Segue 的 Swift 版本：

**为 2020 年 5 月的 SWIFT 5 更新**

**PushNoAnimationSegue.swift**

```
import UIKit

/// Move to the next screen without an animation
class PushNoAnimationSegue: UIStoryboardSegue {
override func perform() {
    if let navigation = source.navigationController {
        navigation.pushViewController(destination as UIViewController, animated: false)
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-27T13:35:52.017

我现在已经设法使用以下代码做到这一点：

```
CreditsViewController *creditspage = [self.storyboard instantiateViewControllerWithIdentifier:@"Credits"];
[UIView beginAnimations:@"flipping view" context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:YES];
[self.navigationController pushViewController:creditspage animated:NO];
[UIView commitAnimations]; 
```

希望这对其他人有帮助！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-10T15:31:40.437

这是适用于**模态呈现**不带动画的 ViewController 的 Swift 版本：

```
import UIKit

/// Present the next screen without an animation.
class ModalNoAnimationSegue: UIStoryboardSegue {

    override func perform() {
        self.sourceViewController.presentViewController(
            self.destinationViewController as! UIViewController,
            animated: false,
            completion: nil)
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-29T09:30:14.553

使用**Swift3**回答-

对于“推动”转场：

```
class PushNoAnimationSegue: UIStoryboardSegue
{
    override func perform()
    {
       source.navigationController?.pushViewController(destination, animated: false)
    }
} 
```

对于“模态”转场：

```
class ModalNoAnimationSegue: UIStoryboardSegue
{
    override func perform() {
        self.source.present(destination, animated: false, completion: nil)
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-28T14:19:08.700

对于使用 Xamarin iOS 的任何人，您的自定义 segue 类需要如下所示：

```
[Register ("PushNoAnimationSegue")]
public class PushNoAnimationSegue : UIStoryboardSegue
{
    public PushNoAnimationSegue(IntPtr handle) : base (handle)
    {

    }

    public override void Perform ()
    {
        SourceViewController.NavigationController.PushViewController (DestinationViewController, false);
    }
} 
```

不要忘记您仍然需要在故事板中设置自定义 segue 并将类设置为 PushNoAnimationSegue 类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-17T18:58:58.093

只需在Swift 中设置`animated` **false**`UINavigationController.pushViewController`

```
self.navigationController!.pushViewController(viewController, animated: false) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-13T16:00:52.827

对我来说，最简单的方法是：

```
UIView.performWithoutAnimation { 

        self.performSegueWithIdentifier("yourSegueIdentifier", sender: nil)

    } 
```

适用于 iOS 7.0

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-23T18:09:18.783

**PUSH without ANIMATION : Swift** 这对我有用。

```
import ObjectiveC

private var AssociatedObjectHandle: UInt8 = 0
    extension UIViewController {

        var isAnimationRequired:Bool {
            get {
        return (objc_getAssociatedObject(self, &AssociatedObjectHandle) as? Bool) ?? true
            }
            set {
                objc_setAssociatedObject(self, &AssociatedObjectHandle, newValue, objc_AssociationPolicy.OBJC_ASSOCIATION_RETAIN_NONATOMIC)
            }
        }
    }

    -------------------- SilencePushSegue --------------------

class SilencePushSegue: UIStoryboardSegue {

    override func perform() {
        if self.source.isAnimationRequired == false {
            self.source.navigationController?.pushViewController(self.destination, animated: false)
        }else{
            self.source.navigationController?.pushViewController(self.destination, animated: true)
        }
    }
} 
```

**用法**：从情节提要中设置 segue 类，如图所示。当你想在没有动画的情况下推送 segue 并在调用 self.performSegue 后将其设置回 true 时，将 viewcontroller 中的 isAnimationRequired 设置为 false，从你想调用 performSegue 的位置。祝你好运......

```
DispatchQueue.main.async {
                self.isAnimationRequired = false
                self.performSegue(withIdentifier: "showAllOrders", sender: self);
                self.isAnimationRequired = true
            } 
```

[![如图所示，从情节提要中设置 segue 类。](https://i.stack.imgur.com/6DmCm.png)](https://i.stack.imgur.com/6DmCm.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-25T22:38:34.543

我正在使用带有 Xamarin 的 Visual Studio，并且设计器没有在 dtochetto 的答案中提供“动画”复选标记。

请注意，XCode 设计器会将以下属性应用于 .storyboard 文件中的 segue 元素： animates="NO"

我手动编辑了 .storyboard 文件并将 animates="NO" 添加到 segue 元素，它对我有用。

例子：

```
 <segue id="1234" destination="ZB0-vP-ctU" kind="modal" modalTransitionStyle="crossDissolve" animates="NO" identifier="screen1ToScreen2"/> 
```

# c - 如何过滤 wchar_t 数组？

> ID：16209114
> 
> 赞同：0
> 
> 时间：2013-04-25T07:47:22.980
> 
> 标签：c, winapi

给定：

```
wchar_t filter_chars[] = L".+,?=&";
wchar_t haystack[] = L"words+punctuation&special_chars?"; 
```

期望的结果：

```
wordspunctuationspecialchars 
```

我如何从给定的（unicode）字符串中删除特殊字符？

**我正在使用 win32 c（没有 c++）**

这是我尝试过的：

```
void filter(wchar_t str[]) {

    wchar_t buf[80];
    ZeroMemory(buf, 80);

    UINT i, j;

    for(i = j = 0; i < wcslen(str); i++) {
        if (!wcschr(filter_chars, str[i])) {
            wcscpy((wchar_t*)buf[j], (wchar_t*)str[i]);
        }
    }

    wcscpy(str, buf);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:16:14.467

与处理普通字符串的方式相同：

```
/*dest must be at least strlen(src) wide*/
wchar_t *filter(wchar_t dest[], wchar_t const src[], wchar_t const filter_chars[])
{
    size_t iSrc=0, iDest=0;
    for(iSrc=0 ; src[iSrc] != L'\0' ; ++iSrc)
    {
        if(NULL == wcschr(filter_chars, src[iSrc]))
            dest[iDest++] = src[iSrc];
    }
    dest[iDest] = L'\0';
    return dest;
} 
```

您还可以为`dest`. 我不记得别名在标准中是如何工作的，因此您可能会或可能不会“合法”地使用`dest`equal to调用此函数`src`。

# flash - SWF 调试详细信息

> ID：16209120
> 
> 赞同：0
> 
> 时间：2013-04-25T07:47:41.023
> 
> 标签：flash, apache-flex, flashdevelop

我正在尝试查看 SWF 文件详细信息（例如它是从哪个路径编译的）。此 SWF 是使用 flex SDK 创建的。

在哪里以及如何查看 SWF 文件的调试详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:26:09.663

我使用了 adobe SWF 调查员，

谢谢你们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:37:06.110

您是否尝试使用 Flash Player 的调试版本？它提供了大量的调试功能。此外，您还可以使用反编译器（例如 Sothink SWF Decompiler）检索许多有趣的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:33:22.637

您可以使用 Adob​​e Scout 来解决您的问题，请查看随附的屏幕截图以获取该工具生成的详细报告。![在此处输入图像描述](https://i.stack.imgur.com/t3AYW.png)

# .net - 如何防止 ShowDialog 窃取其他应用程序的焦点？

> ID：16209121
> 
> 赞同：2
> 
> 时间：2013-04-25T07:47:44.580
> 
> 标签：.net, vb.net, winforms

在我的应用程序中，`ShowDialog()`完成一些工作后调用自定义表单的方法。问题是，如果用户在我的应用程序工作时切换到另一个应用程序，对话框会将焦点转移到该应用程序上，这可能会导致不可预知的行为。预期的行为将是在我的应用程序前台显示的对话框，但不在另一个应用程序的顶部，并且让我的应用程序的任务栏项目闪烁。

有没有办法防止该`ShowDialog()`方法窃取焦点？还是我应该使用另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-13T23:16:55.657

使用 Form.ShowWithoutActivation 属性（在您的类中覆盖它以返回 true）。这样你仍然可以使用 ShowDialog()。

[MSDN 文章](https://msdn.microsoft.com/en-us/library/system.windows.forms.form.showwithoutactivation(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:58:26.283

在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)中，您使用[ShowDialog()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog%28v=vs.110%29.aspx)来显示`stealing focus`您所说的表单。和[Show()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.show%28v=vs.110%29.aspx)在不窃取焦点的情况下显示。我不确定它在 VB.NET 中是否相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T13:59:31.483

如果你真的想要这个，你可能必须使用 Show。在表格上保留您自己的财产

DialogResult 结果；

可能默认为取消，因此如果表单关闭，它将被视为取消。然后你只需要在用户点击确定时进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:18:57.230

你可以设置属性

```
me.TopMost = false 
```

[关联](http://msdn.microsoft.com/en-IN/library/system.windows.forms.form.topmost.aspx)

# html - Firefox 在不同计算机上计算元素宽度的方式不同

> ID：16209128
> 
> 赞同：0
> 
> 时间：2013-04-25T07:48:02.767
> 
> 标签：html, css

我今天遇到了一个奇怪的情况。我在我建立的 Joomla 网站（[http://boaz.simplem-test.tk](http://boaz.simplem-test.tk)）中遇到问题，Firefox 确定`li`不同计算机之间（列表项）宽度的方式。问题出在顶部菜单上。一台计算机中的整个`ul.main.menu`宽度计算为 705 像素，而另一台计算机中的整个宽度计算为 722 像素。当我查看项目宽度时，每个项目都有 1-2 个像素的差异。两台计算机都有相同版本的 Firefox (20.0.1)，都在相同的操作系统 (Windows 7) 上运行。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:25:33.013

打开 CSS 源代码[http://boaz.simplem-test.tk/templates/main_template/css/template.css](http://boaz.simplem-test.tk/templates/main_template/css/template.css)，在“主菜单”中没有显式设置宽度。同样，当我使用 Google Chrome 的右键单击“检查元素”功能查看页面时（在您的情况下，由于“无右键单击”脚本，我必须使用 Chrome 菜单->工具访问它- >Developer Tools )，`li`主菜单中的 s 报告为`width:auto`. 由于是这种情况，每个菜单项都会根据其中包含的文本自动分配一个宽度，并且整个菜单可能会受此影响。在整个菜单的上述控制台宽度计算为705px，但我找不到在代码中指定的位置。但问题的症结似乎是标题`<div>`，它是 975 像素，而不是 1000 像素，就像页面的其余部分一样。您应该指定`width="1000px"`标题，这可能会解决问题。בהצלחה！

# nhibernate - nHibernate：无法回滚完成操作

> ID：16209130
> 
> 赞同：1
> 
> 时间：2013-04-25T07:48:09.890
> 
> 标签：nhibernate, transactions, fluent-nhibernate

我们在两个表之间拆分了一个用户对象，一个人表和一个用户表。

```
public UserMap() 
{
   Table("Person");
   Id(x => x.PersonId, "PersonId");
   Map(x => x.Name, "Name");

   Join("User", s => {
      s.Fetch.Join();
      s.KeyColumn("PersonId");
      s.Map(x => x.Username, "Username");
      s.Map(x => x.Password, "Password");
   });
} 
```

在进行插入时，nHibernate 会先插入`Name`到`Person`表中，然后再`Username`插入`Password`到`User`表中。

**当插入`User`-table 失败时会出现问题（例如尝试插入用户名已被占用的用户）。`Person`事务失败，但不会回滚到表中的插入。**

```
 public User Save(User user)
    {
        var session = SessionHelper.GetCurrent();
        using (var dbTransaction = session.BeginTransaction())
        {
            try
            {
                session.SaveOrUpdate(user);
                dbTransaction.Commit();
            }
            catch (Exception)
            {

                dbTransaction.Rollback();
                throw;
            }                
        }

        return user;
    } 
```

我们的 SessionFactory 也设置了 Fluent NHibernate

```
 public ISessionFactory BuildSessionFactory(string connectionString)
    {
        return Fluently.Configure().Database(OracleClientConfiguration.Oracle10.ConnectionString(c => c.Is(connectionString))
                                             .Provider<OracleDriverConnectionProvider>()
                                             .Driver<OracleDataClientDriver>()
                                             .ShowSql)
                                             .Mappings(m => m.FluentMappings.AddFromAssemblyOf<UserMap>())
                                             .BuildSessionFactory();
    } 
```

我已将失败会话[中的日志文件放在 gist](https://gist.github.com/vegar/5458141)中。实体在`User`现实生活中稍微复杂一些，并且正在进行一些身份验证，因此日志文件希望与绘制的图片 1:1 匹配...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T11:03:48.003

[似乎在这里](https://stackoverflow.com/a/4368621/2323504)解决了类似的问题。当您回滚事务时，NHibernate 不会恢复您在会话中所做的更改，即如果您在回滚后刷新会话，您将遇到您描述的问题。为确保您的实体没有更改，当您回滚时，您还必须关闭会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:56:18.640

仅在人员对象中添加用户对象并保存人员对象。在映射文件中使用 Cascade.All()。或第二个选项是使用 TransactionScope。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-28T14:42:41.437

您可以在角色返回事务后使用 session.Clear() 而不是关闭会话，这将删除所有挂起的写入并使会话与新会话一样好。这对我的应用程序起到了作用。

# c# - 如何在主从模式下添加自定义用户控件？

> ID：16209131
> 
> 赞同：1
> 
> 时间：2013-04-25T07:48:13.443
> 
> 标签：c#, wpf, xaml, custom-controls, master-detail

我的页面中有一个 Xpf GridControl。我想为其添加一个主从模式，以便在您单击一行时在单击的行下打开一个自定义用户控件。自定义用户控件有一些组合框和其他带有多行的普通内容。主 GridControl 绑定到对象列表。

我知道我可以添加 1) DataTemplate 2) GridControl 或 3) 包含这三个中任何一个的选项卡式控件。

我想添加我自己的用户控件，因为该控件将决定将哪些数据添加到组合框（始终是相同的数据）。数据将在 C# 端添加。详细视图中的数据与主视图中的数据完全不同——它们使用完全不同的对象但有一个共同的 ID。

那么，如何将我自己的自定义用户控件添加到详细信息视图中呢？此外，我自然需要将用户控件绑定到主 GridControl，以便用户控件知道单击了哪个 ID。或者，如果它更容易，我可以创建一个看起来像这样的聚合类：

```
public class CombinedData 
{
    public DataForMaster MasterData { get; set; }
    public DataForDetail DetailData { get; set; }
} 
```

我也尝试使用内联/就地编辑器来实现这一点，但我只找到了指定特殊单元格编辑器的方法，而不是整行的编辑器。

我相信我需要以某种方式使用 ContentDetailDescriptor 类，但我发现的所有示例都只包括 GridControl、Tabbed 控件或 DataTemplate。

我对 WPF 很陌生，仍然对它有点困惑。谢谢！

# powershell - 使用 Powershell 扩展 PSCX 远程压缩文件

> ID：16209132
> 
> 赞同：0
> 
> 时间：2013-04-25T07:48:13.500
> 
> 标签：powershell, invoke-command

基本上我想这样做：

```
foreach ($SERVER_NAME in $SERVER_NAME_LIST)
{

$SESSION = New-PSSession -ComputerName $SERVER_NAME -Credential $CRED
Invoke-Command -Session $SESSION -ScriptBlock 
{   
    Write-Zip -Path $PATH -OutputPath test.zip -IncludeEmptyDirectories
}
} 
```

我收到此错误：

```
The term 'Write-Zip' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
```

我真的必须在everey远程机器上安装扩展并`import module`每次都调用吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:52:22.707

yes, you need to install on each remote machine, as the invoke-command will run the commond on the remote machine. If you are using Powershell v3, you do not need to import manually, as PSV3 could import module automatically, but if you are using powershell-v2, you need to import in the `-scriptblock {ipmo path\to\module}`

# android - Android：离线时连接到服务器

> ID：16209133
> 
> 赞同：0
> 
> 时间：2013-04-25T07:48:14.160
> 
> 标签：android, android-asynctask, connect

嗨，我正在开发一个可以连接到服务器的 Android 应用程序。此应用程序可以在线或离线工作。为了连接到服务器，我使用 AsyncTask，它和 in`doInBackground`是我执行所有网络操作的地方。然后，当我单击一个按钮时，我会创建一个新的 Asynctask 实例。我想知道是否有一种方法可以检查服务器是否处于活动状态以启动 AsyncTask。我曾想过 try and catch 但我想知道是否有更好的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:54:34.260

在执行 AsyncTask 之前，使用此代码片段检查网络连接。

```
ConnectivityManager connMgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo netInfo = connMgr.getActiveNetworkInfo();

boolean isConnected = netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED; 
```

不要忘记在清单中添加权限。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# sql - 不允许远程表值函数调用

> ID：16209135
> 
> 赞同：35
> 
> 时间：2013-04-25T07:48:18.230
> 
> 标签：sql, sql-server, user-defined-functions, nolock

我怎样才能使这项工作？我正在从远程链接服务器运行表值函数。我尝试在这 4 部分命名中添加不锁定，但我仍然得到相同的错误。我正在使用 mssql-2008

```
select * from [110.10.10.100].testdbname.dbo.ufn_getdata('4/25/2013') as tb;(NOLOCK) 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-06-21T19:11:01.107

您需要添加`WITH (NOLOCK)`. 不完全确定为什么，但我今天刚刚遇到这个问题，这解决了我的问题。

```
SELECT * 
FROM [110.10.10.100].testdbname.dbo.ufn_getdata('4/25/2013') AS tb WITH (NOLOCK); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-03T08:51:40.277

Nolock 对我不起作用。
但是，使用 OPENQUERY 确实...

替换`DMS_DB.dbo.tfu_V_DMS_Desktop(''de'')'`为`[110.10.10.100].testdbname.dbo.ufn_getdata(''4/25/2013'')`

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[tfu_V_DMS_Desktop]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
DROP FUNCTION [dbo].[tfu_V_DMS_Desktop]
GO

CREATE FUNCTION [dbo].[tfu_V_DMS_Desktop] 
(   
    @param1 int 
)
    RETURNS table 
AS
RETURN 
(
    -- Add the SELECT statement with parameter references here
    -- SELECT 0 as abc
    SELECT * FROM OPENQUERY(CORDB2008R2, 'SELECT * FROM DMS_DB.dbo.tfu_V_DMS_Desktop(''de'')') 
)

GO 
```

在脚注上，问题是 OPENQUERY 不允许变量，因此您不能有变量参数。但是，您可以将所有表和视图作为远程服务器的视图引用，并且只需在本地创建表值函数 1:1。但是，这可能会很慢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-20T12:08:36.563

以下[SQL OpenQuery](http://www.kodyaz.com/articles/how-to-sql-select-from-stored-procedure-using-openquery-openrowset.aspx)命令应该可以工作

**用'**包围的参数值被替换为双**''**

所以在这种情况下，不需要在目标实例数据库上创建存储过程

```
SELECT * 
FROM OPENQUERY(
    [110.10.10.100],
    'SELECT * FROM testdbname.dbo.ufn_getdata(''4/25/2013'')'
) as oq 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-08T16:30:47.353

还要确保在链接服务器选项中将 RPC OUT 设置为 TRUE。当您尝试在链接服务器上执行存储过程时，也需要此选项。否则你会得到以下错误。

> 未为 RPC 配置服务器“servername”

[![在此处输入图像描述](https://i.stack.imgur.com/aBgZb.jpg)](https://i.stack.imgur.com/aBgZb.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-23T17:44:41.983

看到这个答案：

[使用 OPENQUERY](https://stackoverflow.com/a/653726/428811)

用查询替换 SP 调用，`SELECT ... FROM fn()`它应该可以工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-25T21:45:21.143

这是在 SQL Server 2014 中调用远程 SQL 用户定义函数返回表作为输出的示例。它对我有用。

```
Declare @Param1 Varchar(10)
Declare @SqlText nvarchar(4000)
Set  @Param1 = 'xxx'
Set @SqlText = 'SELECT * FROM Database.dbo.ufn_Function (''' + @Param1 + ''')'
EXEC LinkedServer.Database.dbo.sp_executesql @SqlText 
```

# c# - 如何以编程方式在 C# 中制作 DDL 列表

> ID：16209138
> 
> 赞同：5
> 
> 时间：2013-04-25T07:48:25.420
> 
> 标签：c#, asp.net, .net, drop-down-menu

我想知道在 C# 类中制作下拉列表的方法。我一直在尝试这样：

```
List<DropDownList> _ddlCollection;
for (int i = 0; i < 5; i++)
            {
                _ddlCollection.Add(new DropDownList());
            } 
```

然后我将 _ddlCollection 添加到 Asp.NET 站点，如下所示：

```
 foreach (DropDownList ddl in _ddlCollection)
    {
        this.Controls.Add(ddl);
    } 
```

但它在线中断：

```
_ddlCollection.Add(new DropDownList()); 
```

你能告诉我如何将一些 DDL 添加到列表中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:51:41.293

它“中断”是因为您尚未在`_ddlCollection`此处初始化局部变量：

```
List<DropDownList> _ddlCollection;
// you cannot use _ddlCollection until it's initialized, 
// it would compile if you'd "initialize" it with null, 
// but then it would fail on runtime 
```

> 由 local-variable-declaration 引入的局部变量不会自动初始化，因此**没有默认值**。这样的局部变量最初被认为是未分配的。local-variable-declaration 可以包含 local-variable-initializer，在这种情况下，除了 local-variable-initializer..

[**局部变量**](http://en.csharp-online.net/ECMA-334%3a_12.1.7_Local_variables)

这是一个正确的初始化：

```
List<DropDownList> _ddlCollection = new List<DropDownList>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:50:40.423

看起来你还没有初始化`_ddlCollection`，因此当你`.Add`中断时。

您需要`_ddlCollection`分配`List<DropDownList>`.

```
 _ddlCollection = new List<DropDownList>(); 
```

# php - 文件删除本身？

> ID：16209140
> 
> 赞同：1
> 
> 时间：2013-04-25T07:48:27.643
> 
> 标签：php

我正在尝试创建一个自毁文件。我的意思是，如果条件等于 true，则文件会自行删除。

在我看来，以下代码应该可以解决问题。但是，它什么也没做。我究竟做错了什么？

```
<?php 
    phpinfo();
    // The following should be activated when the url is 
    // selfdestruct.php?delete=1, correct?
    if ($_GET['delete']==1) {
        $file = 'selfdestruct.php';
        unlink($file);
    }
?> 
```

提前感谢您的帮助！我很感激！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:53:06.733

Check these steps:

1.  Put `error_reporting(E_ALL);` on the first line
2.  Check your permissions
3.  Put the delete code above anything else, after "error_reporting"

You should do the following:

```
if (isset($_GET['delete']) && $_GET['delete'] == '1') {
    unlink(FILE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:50:56.820

你检查过你的 web 服务器和 php 日志文件吗？可能是权限问题，或者 Web 服务器使文件保持打开状态，因此无法删除。

另外，尝试将文件的整个本地路径传递给*unlink*。您可能会使用*unlink(* [**_ *FILE* _**](http://php.net/manual/en/language.constants.predefined.php) *)*

另外，这是在 Windows 还是 Linux 上？他们处理“打开”文件的方式略有不同。我在 Linux 上对此进行了测试，它适用于

```
 unlink(__FILE__); 
```

有关操作系统和正在运行的 Web 服务器等的信息可能很好地添加到这种性质的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:55:45.810

我通常这样做：（使用你的 GET）

```
if ($_GET['delete']==1) {
    unlink( __FILE__ ) or die("Please delete this file.");
    echo "This file has been deleted.<br />";
} 
```

如果文件无法删除，则退出脚本并且不会显示最后的回显。

而且，您的代码应该可以工作，您可以进行快速测试以检查是否满足条件，但无法删除文件是：

```
if ($_GET['delete']==1) {
    echo "Works!";
} 
```

# node.js - 如何使用 express 框架在节点 js 中设置 cookie？

> ID：16209145
> 
> 赞同：216
> 
> 时间：2013-04-25T07:48:36.713
> 
> 标签：node.js, cookies, express

在我的应用程序中，我需要使用 express 框架设置一个 cookie。我已经尝试了以下代码，但它没有设置 cookie。

```
var express = require('express'), http = require('http');
var app = express();
app.configure(function(){
      app.use(express.cookieParser());
      app.use(express.static(__dirname + '/public'));

      app.use(function (req, res) {
           var randomNumber=Math.random().toString();
           randomNumber=randomNumber.substring(2,randomNumber.length);
           res.cookie('cokkieName',randomNumber, { maxAge: 900000, httpOnly: true })

           console.log('cookie have created successfully');
      });

});

var server = http.createServer(app);
var io = require('socket.io').listen(server);
server.listen(5555); 
```

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-04-25T08:09:40.590

在 Express 中使用中间件的顺序很重要：前面声明的中间件将首先被调用，如果它可以处理请求，则后面声明的任何中间件都不会被调用。

如果`express.static`正在处理请求，则需要向上移动中间件：

```
// need cookieParser middleware before we can do anything with cookies
app.use(express.cookieParser());

// set a cookie
app.use(function (req, res, next) {
  // check if client sent cookie
  var cookie = req.cookies.cookieName;
  if (cookie === undefined) {
    // no: set a new cookie
    var randomNumber=Math.random().toString();
    randomNumber=randomNumber.substring(2,randomNumber.length);
    res.cookie('cookieName',randomNumber, { maxAge: 900000, httpOnly: true });
    console.log('cookie created successfully');
  } else {
    // yes, cookie was already present 
    console.log('cookie exists', cookie);
  } 
  next(); // <-- important!
});

// let static middleware do its job
app.use(express.static(__dirname + '/public')); 
```

此外，中间件需要*要么*结束请求（通过发回响应），要么将请求传递给下一个中间件。在这种情况下，我通过`next()`在设置 cookie 时调用来完成后者。

**更新**

到目前为止，cookie 解析器是一个单独的 npm 包，所以不要使用

```
app.use(express.cookieParser()); 
```

您需要使用单独安装它`npm i cookie-parser`，然后将其用作：

```
const cookieParser = require('cookie-parser');
app.use(cookieParser()); 
```

* * *

## 回答 #2

> 赞同：169
> 
> 时间：2016-10-19T14:59:05.973

> **设置 Cookie？**

```
res.cookie('cookieName', 'cookieValue') 
```

> **读饼干？**

```
req.cookies 
```

**演示**

```
const express('express')
    , cookieParser = require('cookie-parser'); // in order to read cookie sent from client

app.get('/', (req,res)=>{

    // read cookies
    console.log(req.cookies) 

    let options = {
        maxAge: 1000 * 60 * 15, // would expire after 15 minutes
        httpOnly: true, // The cookie only accessible by the web server
        signed: true // Indicates if the cookie should be signed
    }

    // Set cookie
    res.cookie('cookieName', 'cookieValue', options) // options is optional
    res.send('')

}) 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2017-03-11T12:16:27.413

不完全回答你的问题，但我在寻找我遇到的问题的答案时遇到了你的问题。也许它会帮助别人。

我的问题是 cookie 是在服务器响应中设置的，但没有被浏览器保存。

服务器响应返回并设置了 cookie：

```
Set-Cookie:my_cookie=HelloWorld; Path=/; Expires=Wed, 15 Mar 2017 15:59:59 GMT 
```

这就是我解决它的方法。

我`fetch`在客户端代码中使用过。如果您未`credentials: 'include'` 在`fetch`选项中指定，cookie 既不会发送到服务器，也不会被浏览器保存，即使服务器响应设置了 cookie。

例子：

```
var headers = new Headers();
headers.append('Content-Type', 'application/json');
headers.append('Accept', 'application/json');

return fetch('/your/server_endpoint', {
    method: 'POST',
    mode: 'same-origin',
    redirect: 'follow',
    credentials: 'include', // Don't forget to specify this if you need cookies
    headers: headers,
    body: JSON.stringify({
        first_name: 'John',
        last_name: 'Doe'
    })
}) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-07-03T22:00:47.317

**设置一个cookie：**

```
res.cookie('cookie', 'monster') 
```

[https://expressjs.com/en/4x/api.html#res.cookie](https://expressjs.com/en/4x/api.html#res.cookie)

**读取 cookie：（**
使用[cookie-parser](https://www.npmjs.com/package/cookie-parser)中间件）

```
req.cookies['cookie'] 
```

[https://expressjs.com/en/4x/api.html#req.cookies](https://expressjs.com/en/4x/api.html#req.cookies)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2021-02-10T23:16:57.317

在快递中设置cookie很容易

1.  首先安装 cookie-parser

```
npm install cookie-parser 
```

2.  使用中间件

```
const cookieParser = require('cookie-parser');
app.use(cookieParser()); 
```

3.  设置 cookie[了解更多](http://expressjs.com/en/5x/api.html#res.cookie)

```
res.cookie('cookieName', '1', { expires: new Date(Date.now() + 900000), httpOnly: true }) 
```

4.  访问该 cookie[了解更多](http://expressjs.com/en/5x/api.html#req.cookies)

```
console.dir(req.cookies.cookieName) 
```

完毕！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-01T09:54:54.487

同构读取 cookie 助手：

```
function getCookieValue(cookieName = '', cookie = '') {
  const matches = cookie.match(`(^|[^;]+)\\s*${cookieName}\\s*=\\s*([^;]+)`)
  return matches ? matches.pop() : ''
}

// Node with express:
getCookieValue('cookieName', req.headers.cookie)

// Browser:
getCookieValue('cookieName', document.cookie) 
```

在 Node 中用 express 编写：

```
res.cookie('cookieName', 'cookieValue') 
```

在浏览器中写：

```
function setCookie(
  cname,
  cvalue,
  exdays = 100 * 365 /* 100 days */
) {
  const now = new Date()
  const expireMs = exdays * 24 * 60 * 60 * 1000
  now.setTime(now.getTime() + expireMs)

  document.cookie = `${cname}=${cvalue};expires=${now.toUTCString()};path=/`
}

// Example of usage
setCookie('cookieName', 'cookieValue') 
```

# javascript - 我可以检测到用户在 IE8-9 中打开开发者工具吗？

> ID：16209147
> 
> 赞同：3
> 
> 时间：2013-04-25T07:48:39.143
> 
> 标签：javascript, internet-explorer, events

是否有某种事件可以用来检测用户何时打开开发者工具？目前我 setInterval 解决了这个问题

```
var interval, consoleOpen = false;
interval = setInterval(function() {
    if(typeof console !== 'undefined' && typeof console.log !== 'undefined') {
        clearInterval(interval);
        consoleOpen = true;
        console.log("Console is open!");
        // dump debug message queue...
    }
}, 100); 
```

但如果可以的话，我想避免这样的解决方案，那么有没有更好的方法可以使用？`console.log()`原因是在控制台出现时保留调试消息的积压和它们。我已经将消息存储在一个数组中，该数组的工作方式类似于限制为 100 条消息的队列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:04:17.193

这在 IE8 中可能不起作用（`defineProperty`有点[错误](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty#Internet_Explorer_8_specific_case)），但我没有手头来验证情况。但是，它在 IE9 [1] 中运行良好。

（感谢这在一个不完全完整的解决方案中产生，但它可能是一个有用的起点。）

```
(function() {
    if ('console' in window) return;
    if (!Object.defineProperty) return;

    Object.defineProperty(window, 'console', {
        configurable: true,
        enumerable: true,
        set: function (val) {
            delete this.console; // 'Unwatch' console changes
            this.console = val;

            // Notify your logging service that it can start
            // outputting to `console.log` here
            // Logger.start() or whatever's appropriate
        }
    });
})(); 
```

[1] 警告：除了把它扔到 IE 上看看会发生什么，我还没有实际测试过它。

# postgresql - PostgreSQL 约束 - ON DELETE CASCADE 未恢复

> ID：16209148
> 
> 赞同：1
> 
> 时间：2013-04-25T07:48:40.293
> 
> 标签：postgresql, cascade, database-backups

在另一台服务器中恢复 PostgreSQL 数据库模式时遇到问题。更准确地说，一些表似乎没有与它们在原始数据库中使用的相同的外键约束。例如，该`ON DELETE CASCADE`子句似乎已从所有约束定义中完全消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:53:16.530

That's probably because the dumping procedure didn't backup the `ON DELETE CASCADE` clauses in your table definitions.

Firstly you should delete the foreign key constraints on your tables and then go on to altering them:

Something like the following:

```
ALTER TABLE ONLY *your_table* DROP CONSTRAINT your_constraint; 
```

After that, recreate the constraints with something like:

```
ALTER TABLE ONLY your_table ADD CONSTRAINT your_constraint (...ON DELETE CASCADE, etc..); 
```

# asp.net-mvc - 带有破折号和非英文字符的路由

> ID：16209149
> 
> 赞同：0
> 
> 时间：2013-04-25T07:48:45.030
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个特定的路由需求，我无法开始工作。我在 StackOverflow 上找到了很多答案，这些答案让我有点走神，但不是一路走来。

我以标准 C# 方式命名我的控制器和操作，即每个单词的第一个字母都是大写的：

> MyController.MyAction()

要达到此操作方法，我希望所有这些 url 都能正常工作：

```
/my-controller/my-action
/my-cöntroller/my-äction
/MyController/MyAction
/MyCöntroller/MyÄction 
```

（虽然最后两个不是很重要......）

所以这里有两件事：

1.  破折号可用于分隔单词（出于可读性和 SEO 目的）。
2.  可以使用一些非英文字符（指定所有替换 - 没有“魔法”）。

我想用这样的助手创建链接：

```
@Html.ActionLink("My link text", "MyController", "MyAction") 
```

即标准方式，这将创建以下链接：

```
/my-controller/my-action 
```

希望这可以在不使我的路由配置过于混乱的情况下完成（例如，每个动作或某事都有一个路由），或者将属性放在所有动作方法上，但如果这是我想知道的唯一解决方案。

到目前为止，我尝试的是实现一个覆盖 GetRouteData() 和 GetVirtualPath() 的自定义路由类。它让我更接近，但不是一直，但我可能会做错事

我有一个想法，通过在执行路由之前进行替换来解决非英语字符的问题，但我还没有找到一种方法来做到这一点（[见这个问题](https://stackoverflow.com/questions/16192657/replace-character-in-url-before-routing-in-asp-net-mvc)）。

如果有人可以帮助我，或者至少为我指明正确的方向，我将非常感激！:)

**编辑：**请注意，上面的示例网址只是为了描述我想要的。实际上，有很多 url 必须处理，所以我更喜欢一些通用的解决方案，而不是涉及每个操作的一条路线或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:28:53.817

1.  创建你的资源文件

    ```
    Name            Value
    myaction1   my-äction   
    myaction2   my-action   
    mycontroller1   my-cöntroller   
    mycontroller2   my-controller 
    ```

2.  在 global.asax 的 RegisterRoute 方法中添加以下路由

    routes.MapRoute(name: "route1", url: Resources.Actions.mycontroller1 + "/" + Resources.Actions.myaction1 , 默认值: new { controller = "mycontroller1", action = "myaction1" } );

    ```
     routes.MapRoute(
               name: "route2",
               url: Resources.Actions.mycontroller2 + "/" + Resources.Actions.myaction2,
               defaults: new { controller = "mycontroller2", action = "myaction2" }
           ); 
    ```

3.  在控制器中，

    ```
     [HttpGet]
        public ActionResult myaction1()
        {

            return View("");
        }

    [HttpGet]
    public ActionResult myaction2()
    {
        return View("");
    } 
    ```

4.  在 _Layout.cshtml

    @Html.ActionLink(Resources.Actions.myaction1, "myaction1", "mycontroller1") @Html.ActionLink(Resources.Actions.myaction2, "myaction2", "mycontroller2")

# javascript - 如何使用 javascript 获取 HTML 文本节点的位置和大小？

> ID：16209153
> 
> 赞同：17
> 
> 时间：2013-04-25T07:49:00.743
> 
> 标签：javascript, html, dom

例如，

```
<div style="width:100px;text-align:center">text</div> 
```

我想获取`text`文本节点的位置和大小，而不是它的`div`包装器。可能吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-25T09:21:53.380

在现代浏览器（最近的 Mozilla、WebKit 和 Opera）中，您可以使用包含文本节点[`getClientRects()`的 DOM 范围的方法。](http://www.w3.org/TR/cssom-view/#extensions-to-the-range-interface)

```
var textNode = document.getElementById("wombat").firstChild;
var range = document.createRange();
range.selectNodeContents(textNode);
var rects = range.getClientRects();
if (rects.length > 0) {
    console.log("Text node rect: ", rects[0]);
}
```

```
<div id="wombat">Wombat</div>
```

# java - Oracle JDBC 教程 - 想了解 2 层 JDBC 与 3 层

> ID：16209156
> 
> 赞同：1
> 
> 时间：2013-04-25T07:49:09.723
> 
> 标签：java, jdbc, architecture, 3-tier, 2-tier

我在这里阅读 oracle JDBC 教程 - [http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html](http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html)

请参阅*图 2：数据访问的三层架构。*

它说——

> 在三层模型中，命令被发送到服务的“中间层”，然后将命令发送到数据源。数据源处理命令并将结果发送回中间层，然后将它们发送给用户。MIS 主管发现三层模型非常有吸引力，因为**中间层可以保持对访问的控制以及可以对公司数据进行的各种更新。**另一个优点是它**简化了应用程序的部署**。最后，在很多情况下，**三层架构可以提供性能优势。**

我不明白粗体部分。这些观点背后的逻辑是什么？

*- 中间层可以保持对访问的控制以及可以对公司数据进行的更新类型。* - 以什么方式 ？

*- 简化应用程序的部署* ——如何简化部署？

*- 三层架构可以提供性能优势。* -- 您刚刚在两个分层拱门之间添加了一层。现在，代码和数据库之间没有直接通信，而是有一个中间层。那么，这不应该降低你的性能/速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:01:20.040

> *   中间层可以保持对访问的控制以及可以对公司数据进行的更新类型。 - 以什么方式 ？

考虑这些角色：

工人可以添加低级数据，但不能添加其他工人。

经理可以添加/更新低级别数据，但看不到高级别统计数据。

高管无法更新低级别数据，无法添加工人，但可以查看高级统计数据。

在组件的世界中也是如此：记录器是只写的，一些组件不能访问其他组件的数据，等等。

> *   简化应用程序的部署——如何简化部署？

每一层都为其客户端提供一个接口。如果您在不触及其接口的情况下更改层的内部实现，则可以为客户端无缝完成更新。

> *   三层架构可以提供性能优势。-- 您刚刚在两个分层拱门之间添加了一层。现在，代码和数据库之间没有直接通信，而是有一个中间层。那么，这不应该降低你的性能/速度吗？

有两种方法可以提高性能：垂直和水平可扩展性（google it）。这里我们说的是水平的，两层架构几乎不可能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T08:07:56.270

`Java`考虑Tomcat 等 Web 服务器、JBoss 等企业服务器、BEA Weblogic、IBM Websphere中的几个“中间层”示例。可能还有许多其他示例属于中级类别。

大多数企业服务器为数据库提供完整的管理功能。它广泛地处理以下要求：

1.  配置（连接池、XA、JDBC 特定属性、ReadOnly/WriteEnabled 等）
2.  部署
3.  维护任务（备份等）
4.  监控（数据库性能统计、其机器性能统计、大小统计等）

作为配置连接池的特定示例`Tomcat`或独立`Java`应用程序将有助于提高性能。

部署明智的具体示例可能是，它将提供配置新数据库、模式等的方法。

我认为，如果您说选择一个中间层（例如 Tomcat）并使用连接池等配置/使用它来进行典型的标准数据库交互，这将对您有所帮助。然后您将能够理解两层拱门与三层拱门之间的比较。

# php - PHP：对多维数组进行排序

> ID：16209160
> 
> 赞同：1
> 
> 时间：2013-04-25T07:49:20.973
> 
> 标签：php, arrays, multidimensional-array

我有像这样的多维数组：

```
Array
(
    [name] => Array
        (
            [0] => South Africa
            [1] => Australia
            [2] => Egypt
        )

    [img] => Array
        (
            [0] => sa-flag.jpg
            [2] => au-flag.jpg
            [1] => eg-flag.jpg
        )
) 
```

我想按字母顺序对其进行排序，使其输出完全像：

```
Array
(
    [name] => Array
        (
            [0] => Australia
            [1] => Egypt
            [2] => South Africa
        )

    [img] => Array
        (
            [0] => au-flag.jpg
            [2] => eg-flag.jpg
            [1] => sa-flag.jpg
        )
) 
```

我无法在两个键上使用排序来将国家名称与国旗同步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:00:43.397

请找到以下解决方案

```
$kd = array(
'name' => array(
        '0' => 'South Africa',
        '1' => 'Australia',
        '2' => 'Egypt',
    ),

'img' => array
    (
        '0' => 'sa-flag.jpg',
        '2' => 'au-flag.jpg',
        '1' => 'eg-flag.jpg',
    ),
);
array_multisort($kd['name'], SORT_ASC, SORT_STRING,$kd['img'], SORT_ASC, SORT_STRING);
echo '<pre>';
print_r($kd); 
```

找到以下核心概念

[http://www.php.net/manual/en/function.array-multisort.php#example-4840](http://www.php.net/manual/en/function.array-multisort.php#example-4840)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:52:44.717

试试这个

```
$arr = array_multisort($array); 
```

# c# - LINQ 语句 Where 子句中的子查询

> ID：16209171
> 
> 赞同：0
> 
> 时间：2013-04-25T07:49:57.233
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

所以我尝试按照[这个](https://stackoverflow.com/questions/3477918/linq-subquery-in)例子在这个 LINQ 查询的 where 子句中有一个子查询。

```
var innerquery =
    from app in context.applications
    select new { app.app_id };

IEnumerable<postDatedCheque> _entityList = context.postDatedCheques
    .Where(e => innerquery.Contains(e.appSancAdvice.application.app_id)); 
```

*目标是从应用程序*表中具有*app_id*的*postDatedCheckes*中选择那些记录。

 **但是我在 where 子句中遇到了以下错误：

1.  委托“System.Func”不接受 1 个参数
2.  无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型
3.  “System.Linq.IQueryable”不包含“包含”的定义，并且最佳扩展方法重载“System.Linq.ParallelEnumerable.Contains(System.Linq.ParallelQuery, TSource)”有一些无效参数
4.  实例参数：无法从“System.Linq.IQueryable”转换为“System.Linq.ParallelQuery”

我编码不正确是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:02:49.920

我认为一个简单的加入就可以完成这项工作。它将过滤掉没有相对“应用程序”的“支票”：

```
 var _entitylist = 
    from cheque in context.postDatedCheques
    join app in context.applications on cheque.appSancAdvice.application equals app
    select cheque; 
```

编辑：

使用 a 的解决方案`.Contains(...)`将被翻译成 SQL`IN`语句。这将是非常低效的。如果您的 DB 架构经过精心修剪（FK、索引）， Linq`join`会被翻译成 SQL `INNER JOIN`，这将非常有效

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T08:02:55.563

关于什么？

```
IEnumerable<postDatedCheque> _entityList = context.postDatedCheques.Where(
     e => context.applications.Any(
          x => e.appSancAdvice.application.app_id == x.app_id)); 
```

如果要使用两个语句，请将第一个语句设置为表达式函数。

```
Expression<Func<string, bool>> innerQuery = 
          x => context.applications.Any(y => y.app_id == x);

IEnumerable<postDatedCheque _entityList = 
  context.postDatedCheques.Where(
    x => innerQuery(x.appSancAdvice.application.app_id)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T08:02:04.430

`innerquery`是一个匿名类型的 IQueryable，它包含一个`app_id`.
该行`Contains(e.appSancAdvice.application.app_id)`没有意义，因为`e.appSancAdvice.application.app_id`和匿名类型不是同一类型。

只需这样做：

```
var _entityList = context.postDatedCheques
                         .Where(e => 
                            context.applications
                                   .Select(a => a.app_id)
                                   .Contains(e.appSancAdvice.application.app_id)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T07:56:46.410

试试这个：

```
var innerquery =
    from app in context.applications
    select new { app.app_id };

IEnumerable<postDatedCheque> _entityList = context.postDatedCheques
    .Where(e => innerquery.Any(a => a.app_id == e.appSansAdvice.application.app_id)); 
```**

# python - LookupError：未知编码：idna - 仅来自 subprocess.call

> ID：16209175
> 
> 赞同：3
> 
> 时间：2013-04-25T07:50:14.553
> 
> 标签：python, subprocess, ironpython

我试图从 Iron python 调用 python 2.7 脚本，使用`subprocess.call`. 调用的进程使用 IronPython 不支持的导入，例如`scikit-learn`和`requests`.

目前我正在尝试使用此命令调用 python 2.7 脚本：

```
sub_ret_val = subprocess.call("C:/Documents and Settings/avishay/workspace/BursaProject_V1_31/brainManager_toFile.py", shell = True, stderr = subprocess.STDOUT) 
```

但我得到：

> LookupError：未知编码：idna

现在，如果我从 windows shell 或 eclipse pydev 环境运行这个脚本，它就可以正常工作。`subprocess.call`从外壳运行它与运行它导致它失败有什么区别？

谢谢

- -编辑 - -

看来我也不能导入 encodings.idna ：

> ImportError：没有名为 idna 的模块

这非常非常奇怪......打印`sys.path`显示`c:\\Python27\\Lib`在那里，并且 idna.py 文件在 encodings 目录中......导入怎么会不起作用？

---再编辑---

我找到了解决问题的一种方法——从 python shell 启动 IronPython 脚本——一切正常。我仍然不知道为什么从 IronPython 调用 python 2.7 解释器会干扰 python 2.7 内部模块...... PYTHONPATH 确实包含这些模块的路径，所以我非常感谢对幕后发生的事情的任何洞察。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:39:16.370

[IronPython 不支持`idna`](http://ironpython.codeplex.com/workitem/4565)[module](https://github.com/kennethreitz/requests/issues/555)可能[使用的`requests`](https://github.com/kennethreitz/requests/issues/555)[编码](http://ironpython.codeplex.com/workitem/4565)。

[`idna`编码从 Python 2.3 开始可用](http://docs.python.org/2/library/codecs.html#module-encodings.idna)：

```
>>> u"яндекс.рф".encode('idna')
b'xn--d1acpjx3f.xn--p1ai'
>>> b'xn--d1acpjx3f.xn--p1ai'.decode('idna')
'яндекс.рф' 
```

为避免对用于运行脚本的 python 产生歧义，请尝试明确指定 Python 可执行文件的路径：

```
from subprocess import STDOUT, check_output as qx

output = qx([r"c:\Python27\python.exe", r"c:\path\to\script.py"], stderr=STDOUT) 
```

作为替代方案，您可以安装[`pylauncher`](https://bitbucket.org/vinay.sajip/pylauncher)，以便能够在其 shebang 行中为 Python 脚本指定所需的 Python 版本，例如`#!python2.7`.

# android - 如何从 url 适合 webview 中的图像

> ID：16209178
> 
> 赞同：1
> 
> 时间：2013-04-25T07:50:24.697
> 
> 标签：android, webview

现在我正在使用 webview 处理列表视图。在这个列表视图中，webview 用于显示图像。它来自 url。现在我面临一个问题，即从 url 我没有得到唯一尺寸的图像，有些图像很小有些很大，虽然显示这个 webview 它没有正确排列。我怎样才能正确排列/适合 webview 图像。我正在使用以下代码。

```
<WebView
        android:layout_marginTop="5dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:id="@+id/webView"
         android:layout_width="55dp"
        android:layout_height="55dp" 

     > 
```

**代码**

```
WebView  webView = (WebView)view.findViewById(R.id.webView);
showImageOnWebView(webView, item.thumbimage,80,80); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:24:38.847

试试这个代码。

```
 String r="<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,target-densityDpi=device-dpi\">"; 

                       String s="<html><body style=\"margin: 0; padding: 0\"><IMG  width=\"100%\" height=\"100%\" src=\""+item.image+"\"><body><html>"; 

       webView.setBackgroundColor(0); 
       webView.setBackgroundResource(R.drawable.android); 
       webView.loadData(s, "text/html","UTF-8"); 
```

# c# - 如何在多个线程中并行运行相关任务？

> ID：16209179
> 
> 赞同：3
> 
> 时间：2013-04-25T07:50:30.173
> 
> 标签：c#, .net, multithreading, parallel-processing, task

我有一组巨大的任务要在 c# 中执行。每次计算都会产生一个我想写入文件的结果数据（我正在使用 SQLite）。目前我正在按顺序执行此操作，例如 [Task1 -> FileSaving1]、[Task2 -> FileSaving2]。等等。

但我的首要任务是先完成所有计算，所以我想在一个线程中并行运行计算，并在另一个线程中完成文件保存。每次计算结束并准备好写入数据时，都会向 FileSaving 线程发出信号。FileSaving 可以是顺序的或并行的。

如何在 C# 中实现这一点？我正在使用.Net 4.0。如果可能的话，请给我一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:59:42.353

您可以使用 a[`BlockingCollection<T>`](http://msdn.microsoft.com/en-gb/library/dd267312.aspx)来帮助解决此问题。

棘手的是您需要多个线程处理工作项，但它们可以以随机顺序产生输出，因此您需要在编写输出时多路复用输出（假设您希望以与本来应该相同的顺序写入数据如果您使用旧的单线程解决方案，则编写）。

[我写了一堂课来做这件事](https://stackoverflow.com/a/15056827/106159)。

它假定您可以将每个“工作项”封装在一个类的实例中。这些实例被添加到工作队列中；然后多个线程（通过`Task`）可以从工作队列中删除工作项，处理它们，然后将它们输出到优先级队列。

最后，另一个线程可以从已完成队列中删除已完成的工作项，注意多路复用它们，以便它以与最初添加到工作队列中的顺序相同的顺序删除这些项。

此实现为您创建和管理线程。您需要告诉它要使用多少个工作线程，并为其提供委托以提供新的工作项 ( `Read()`)、处理每个工作项 ( `Process()`) 并输出每个工作项 ( `Write()`)。

只有`Process()`委托被多个线程调用。

请注意，如果您不关心订单，则可以避免所有这些东西并`BlockingCollection`直接使用。

这是代码：

```
public sealed class ParallelWorkProcessor<T> where T: class // T is the work item type.
{
    public delegate T    Read();           // Called by only one thread.
    public delegate T    Process(T block); // Called simultaneously by multiple threads.
    public delegate void Write(T block);   // Called by only one thread.

    public ParallelWorkProcessor(Read read, Process process, Write write, int numWorkers = 0)
    {
        _read    = read;
        _process = process;
        _write   = write;

        numWorkers = (numWorkers > 0) ? numWorkers : Environment.ProcessorCount;

        _workPool    = new SemaphoreSlim(numWorkers*2);
        _inputQueue  = new BlockingCollection<WorkItem>(numWorkers);
        _outputQueue = new ConcurrentPriorityQueue<int, T>();
        _workers     = new Task[numWorkers];

        startWorkers();
        Task.Factory.StartNew(enqueueWorkItems);
        _multiplexor = Task.Factory.StartNew(multiplex);
    }

    private void startWorkers()
    {
        for (int i = 0; i < _workers.Length; ++i)
        {
            _workers[i] = Task.Factory.StartNew(processBlocks);
        }
    }

    private void enqueueWorkItems()
    {
        int index = 0;

        while (true)
        {
            T data = _read();

            if (data == null) // Signals end of input.
            {
                _inputQueue.CompleteAdding();
                _outputQueue.Enqueue(index, null); // Special sentinel WorkItem .
                break;
            }

            _workPool.Wait();
            _inputQueue.Add(new WorkItem(data, index++));
        }
    }

    private void multiplex()
    {
        int index = 0; // Next required index.
        int last = int.MaxValue;

        while (index != last)
        {
            KeyValuePair<int, T> workItem;
            _outputQueue.WaitForNewItem(); // There will always be at least one item - the sentinel item.

            while ((index != last) && _outputQueue.TryPeek(out workItem))
            {
                if (workItem.Value == null) // The sentinel item has a null value to indicate that it's the sentinel.
                {
                    last = workItem.Key;  // The sentinel's key is the index of the last block + 1.
                }
                else if (workItem.Key == index) // Is this block the next one that we want?
                {
                    // Even if new items are added to the queue while we're here, the new items will be lower priority.
                    // Therefore it is safe to assume that the item we will dequeue now is the same one we peeked at.

                    _outputQueue.TryDequeue(out workItem);
                    Contract.Assume(workItem.Key == index); // This *must* be the case.
                    _workPool.Release();                    // Allow the enqueuer to queue another work item.
                    _write(workItem.Value);
                    ++index;
                }
                else // If it's not the block we want, we know we'll get a new item at some point.
                {
                    _outputQueue.WaitForNewItem();
                }
            }
        }
    }

    private void processBlocks()
    {
        foreach (var block in _inputQueue.GetConsumingEnumerable())
        {
            var processedData = _process(block.Data);
            _outputQueue.Enqueue(block.Index, processedData);
        }
    }

    public bool WaitForFinished(int maxMillisecondsToWait) // Can be Timeout.Infinite.
    {
        return _multiplexor.Wait(maxMillisecondsToWait);
    }

    private sealed class WorkItem
    {
        public WorkItem(T data, int index)
        {
            Data  = data;
            Index = index;
        }

        public T   Data  { get; private set; }
        public int Index { get; private set; }
    }

    private readonly Task[] _workers;
    private readonly Task _multiplexor;
    private readonly SemaphoreSlim _workPool;
    private readonly BlockingCollection<WorkItem> _inputQueue;
    private readonly ConcurrentPriorityQueue<int, T> _outputQueue;
    private readonly Read    _read;
    private readonly Process _process;
    private readonly Write   _write;
} 
```

这是它的测试代码：

```
namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            _rng = new Random(34324);

            int threadCount = 8;
            _maxBlocks = 200;
            ThreadPool.SetMinThreads(threadCount + 2, 4); // Kludge to prevent slow thread startup.

            _numBlocks = _maxBlocks;
            var stopwatch = Stopwatch.StartNew();
            var processor = new ParallelWorkProcessor<byte[]>(read, process, write, threadCount);
            processor.WaitForFinished(Timeout.Infinite);

            Console.WriteLine("\n\nFinished in " + stopwatch.Elapsed + "\n\n");
        }

        private static byte[] read()
        {
            if (_numBlocks-- == 0)
            {
                return null;
            }

            var result = new byte[128];
            result[0] = (byte)(_maxBlocks-_numBlocks);
            Console.WriteLine("Supplied input: " + result[0]);
            return result;
        }

        private static byte[] process(byte[] data)
        {
            if (data[0] == 10) // Hack for test purposes. Make it REALLY slow for this item!
            {
                Console.WriteLine("Delaying a call to process() for 5s for ID 10");
                Thread.Sleep(5000);
            }

            Thread.Sleep(10 + _rng.Next(50));
            Console.WriteLine("Processed: " + data[0]);
            return data;
        }

        private static void write(byte[] data)
        {
            Console.WriteLine("Received output: " + data[0]);
        }

        private static Random _rng;
        private static int _numBlocks;
        private static int _maxBlocks;
    }
} 
```

这也需要[从这里实现 ConcurrentPriorityQueue](http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1696822056)。

我不得不稍微修改一下，所以这是我的修改版本：

```
using System;
using System.Collections;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.Diagnostics.CodeAnalysis;
using System.Threading;

namespace ConsoleApplication1
{
    /// <summary>Provides a thread-safe priority queue data structure.</summary> 
    /// <typeparam name="TKey">Specifies the type of keys used to prioritize values.</typeparam> 
    /// <typeparam name="TValue">Specifies the type of elements in the queue.</typeparam> 

    [SuppressMessage("Microsoft.Naming", "CA1711:IdentifiersShouldNotHaveIncorrectSuffix")]
    [SuppressMessage("Microsoft.Naming", "CA1710:IdentifiersShouldHaveCorrectSuffix")]
    [DebuggerDisplay("Count={Count}")] 

    public sealed class ConcurrentPriorityQueue<TKey, TValue> : 
        IProducerConsumerCollection<KeyValuePair<TKey,TValue>>  
        where TKey : IComparable<TKey> 
    { 
        /// <summary>Initializes a new instance of the ConcurrentPriorityQueue class.</summary> 
        public ConcurrentPriorityQueue() {} 

        /// <summary>Initializes a new instance of the ConcurrentPriorityQueue class that contains elements copied from the specified collection.</summary> 
        /// <param name="collection">The collection whose elements are copied to the new ConcurrentPriorityQueue.</param> 

        [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures")]

        public ConcurrentPriorityQueue(IEnumerable<KeyValuePair<TKey, TValue>> collection) 
        { 
            if (collection == null) throw new ArgumentNullException("collection"); 
            foreach (var item in collection) _minHeap.Insert(item); 
        } 

        /// <summary>Adds the key/value pair to the priority queue.</summary> 
        /// <param name="priority">The priority of the item to be added.</param> 
        /// <param name="value">The item to be added.</param> 
        public void Enqueue(TKey priority, TValue value) 
        { 
            Enqueue(new KeyValuePair<TKey, TValue>(priority, value)); 
        } 

        /// <summary>Adds the key/value pair to the priority queue.</summary> 
        /// <param name="item">The key/value pair to be added to the queue.</param> 
        public void Enqueue(KeyValuePair<TKey, TValue> item) 
        {
            lock (_syncLock)
            {
                _minHeap.Insert(item);
                _newItem.Set();
            }
        }

        /// <summary>Waits for a new item to appear.</summary>
        public void WaitForNewItem()
        {
            _newItem.WaitOne();
        }

        /// <summary>Attempts to remove and return the next prioritized item in the queue.</summary> 
        /// <param name="result"> 
        /// When this method returns, if the operation was successful, result contains the object removed. If 
        /// no object was available to be removed, the value is unspecified. 
        /// </param> 
        /// <returns> 
        /// true if an element was removed and returned from the queue succesfully; otherwise, false. 
        /// </returns> 
        public bool TryDequeue(out KeyValuePair<TKey, TValue> result) 
        { 
            result = default(KeyValuePair<TKey, TValue>); 
            lock (_syncLock) 
            { 
                if (_minHeap.Count > 0) 
                { 
                    result = _minHeap.Remove(); 
                    return true; 
                } 
            } 
            return false; 
        } 

        /// <summary>Attempts to return the next prioritized item in the queue.</summary> 
        /// <param name="result"> 
        /// When this method returns, if the operation was successful, result contains the object. 
        /// The queue was not modified by the operation. 
        /// </param> 
        /// <returns> 
        /// true if an element was returned from the queue succesfully; otherwise, false. 
        /// </returns> 
        public bool TryPeek(out KeyValuePair<TKey, TValue> result) 
        { 
            result = default(KeyValuePair<TKey, TValue>); 
            lock (_syncLock) 
            { 
                if (_minHeap.Count > 0) 
                { 
                    result = _minHeap.Peek(); 
                    return true; 
                } 
            } 
            return false; 
        } 

        /// <summary>Empties the queue.</summary> 
        public void Clear() { lock(_syncLock) _minHeap.Clear(); } 

        /// <summary>Gets whether the queue is empty.</summary> 
        public bool IsEmpty { get { return Count == 0; } } 

        /// <summary>Gets the number of elements contained in the queue.</summary> 
        public int Count 
        { 
            get { lock (_syncLock) return _minHeap.Count; } 
        } 

        /// <summary>Copies the elements of the collection to an array, starting at a particular array index.</summary> 
        /// <param name="array"> 
        /// The one-dimensional array that is the destination of the elements copied from the queue. 
        /// </param> 
        /// <param name="index"> 
        /// The zero-based index in array at which copying begins. 
        /// </param> 
        /// <remarks>The elements will not be copied to the array in any guaranteed order.</remarks> 
        public void CopyTo(KeyValuePair<TKey, TValue>[] array, int index) 
        { 
            lock (_syncLock) _minHeap.Items.CopyTo(array, index); 
        } 

        /// <summary>Copies the elements stored in the queue to a new array.</summary> 
        /// <returns>A new array containing a snapshot of elements copied from the queue.</returns> 
        public KeyValuePair<TKey, TValue>[] ToArray() 
        { 
            lock (_syncLock) 
            { 
                var clonedHeap = new MinBinaryHeap(_minHeap); 
                var result = new KeyValuePair<TKey, TValue>[_minHeap.Count]; 
                for (int i = 0; i < result.Length; i++) 
                { 
                    result[i] = clonedHeap.Remove(); 
                } 
                return result; 
            } 
        } 

        /// <summary>Attempts to add an item in the queue.</summary> 
        /// <param name="item">The key/value pair to be added.</param> 
        /// <returns> 
        /// true if the pair was added; otherwise, false. 
        /// </returns> 
        bool IProducerConsumerCollection<KeyValuePair<TKey, TValue>>.TryAdd(KeyValuePair<TKey, TValue> item) 
        { 
            Enqueue(item); 
            return true; 
        } 

        /// <summary>Attempts to remove and return the next prioritized item in the queue.</summary> 
        /// <param name="item"> 
        /// When this method returns, if the operation was successful, result contains the object removed. If 
        /// no object was available to be removed, the value is unspecified. 
        /// </param> 
        /// <returns> 
        /// true if an element was removed and returned from the queue succesfully; otherwise, false. 
        /// </returns> 
        bool IProducerConsumerCollection<KeyValuePair<TKey, TValue>>.TryTake(out KeyValuePair<TKey, TValue> item) 
        { 
            return TryDequeue(out item); 
        } 

        /// <summary>Returns an enumerator that iterates through the collection.</summary> 
        /// <returns>An enumerator for the contents of the queue.</returns> 
        /// <remarks> 
        /// The enumeration represents a moment-in-time snapshot of the contents of the queue. It does not 
        /// reflect any updates to the collection after GetEnumerator was called. The enumerator is safe to 
        /// use concurrently with reads from and writes to the queue. 
        /// </remarks> 
        public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator() 
        { 
            var arr = ToArray(); 
            return ((IEnumerable<KeyValuePair<TKey, TValue>>)arr).GetEnumerator(); 
        } 

        /// <summary>Returns an enumerator that iterates through a collection.</summary> 
        /// <returns>An IEnumerator that can be used to iterate through the collection.</returns> 
        IEnumerator IEnumerable.GetEnumerator() { return GetEnumerator(); } 

        /// <summary>Copies the elements of the collection to an array, starting at a particular array index.</summary> 
        /// <param name="array"> 
        /// The one-dimensional array that is the destination of the elements copied from the queue. 
        /// </param> 
        /// <param name="index"> 
        /// The zero-based index in array at which copying begins. 
        /// </param> 
        void ICollection.CopyTo(Array array, int index) 
        { 
            lock (_syncLock) ((ICollection)_minHeap.Items).CopyTo(array, index); 
        } 

        /// <summary> 
        /// Gets a value indicating whether access to the ICollection is synchronized with the SyncRoot. 
        /// </summary> 
        bool ICollection.IsSynchronized { get { return true; } } 

        /// <summary> 
        /// Gets an object that can be used to synchronize access to the collection. 
        /// </summary> 
        object ICollection.SyncRoot { get { return _syncLock; } } 

        /// <summary>Implements a binary heap that prioritizes smaller values.</summary> 
        private sealed class MinBinaryHeap 
        { 
            private readonly List<KeyValuePair<TKey, TValue>> _items; 

            /// <summary>Initializes an empty heap.</summary> 
            public MinBinaryHeap() 
            { 
                _items = new List<KeyValuePair<TKey, TValue>>(); 
            } 

            /// <summary>Initializes a heap as a copy of another heap instance.</summary> 
            /// <param name="heapToCopy">The heap to copy.</param> 
            /// <remarks>Key/Value values are not deep cloned.</remarks> 
            public MinBinaryHeap(MinBinaryHeap heapToCopy) 
            { 
                _items = new List<KeyValuePair<TKey, TValue>>(heapToCopy.Items); 
            } 

            /// <summary>Empties the heap.</summary> 
            public void Clear() { _items.Clear(); } 

            /// <summary>Adds an item to the heap.</summary> 
            public void Insert(KeyValuePair<TKey,TValue> entry) 
            { 
                // Add the item to the list, making sure to keep track of where it was added. 
                _items.Add(entry); 
                int pos = _items.Count - 1; 

                // If the new item is the only item, we're done. 
                if (pos == 0) return; 

                // Otherwise, perform log(n) operations, walking up the tree, swapping 
                // where necessary based on key values 
                while (pos > 0) 
                { 
                    // Get the next position to check 
                    int nextPos = (pos-1) / 2; 

                    // Extract the entry at the next position 
                    var toCheck = _items[nextPos]; 

                    // Compare that entry to our new one.  If our entry has a smaller key, move it up. 
                    // Otherwise, we're done. 
                    if (entry.Key.CompareTo(toCheck.Key) < 0) 
                    { 
                        _items[pos] = toCheck; 
                        pos = nextPos; 
                    } 
                    else break; 
                } 

                // Make sure we put this entry back in, just in case 
                _items[pos] = entry; 
            } 

            /// <summary>Returns the entry at the top of the heap.</summary> 
            public KeyValuePair<TKey, TValue> Peek() 
            { 
                // Returns the first item 
                if (_items.Count == 0) throw new InvalidOperationException("The heap is empty."); 
                return _items[0]; 
            } 

            /// <summary>Removes the entry at the top of the heap.</summary> 
            public KeyValuePair<TKey, TValue> Remove() 
            { 
                // Get the first item and save it for later (this is what will be returned). 
                if (_items.Count == 0) throw new InvalidOperationException("The heap is empty."); 
                KeyValuePair<TKey, TValue> toReturn = _items[0]; 

                // Remove the first item if there will only be 0 or 1 items left after doing so.   
                if (_items.Count <= 2) _items.RemoveAt(0); 
                // A reheapify will be required for the removal 
                else 
                { 
                    // Remove the first item and move the last item to the front. 
                    _items[0] = _items[_items.Count - 1]; 
                    _items.RemoveAt(_items.Count - 1); 

                    // Start reheapify 
                    int current = 0, possibleSwap = 0; 

                    // Keep going until the tree is a heap 
                    while (true) 
                    { 
                        // Get the positions of the node's children 
                        int leftChildPos = 2 * current + 1; 
                        int rightChildPos = leftChildPos + 1; 

                        // Should we swap with the left child? 
                        if (leftChildPos < _items.Count) 
                        { 
                            // Get the two entries to compare (node and its left child) 
                            var entry1 = _items[current]; 
                            var entry2 = _items[leftChildPos]; 

                            // If the child has a lower key than the parent, set that as a possible swap 
                            if (entry2.Key.CompareTo(entry1.Key) < 0) possibleSwap = leftChildPos; 
                        } 
                        else break; // if can't swap this, we're done 

                        // Should we swap with the right child?  Note that now we check with the possible swap 
                        // position (which might be current and might be left child). 
                        if (rightChildPos < _items.Count) 
                        { 
                            // Get the two entries to compare (node and its left child) 
                            var entry1 = _items[possibleSwap]; 
                            var entry2 = _items[rightChildPos]; 

                            // If the child has a lower key than the parent, set that as a possible swap 
                            if (entry2.Key.CompareTo(entry1.Key) < 0) possibleSwap = rightChildPos; 
                        } 

                        // Now swap current and possible swap if necessary 
                        if (current != possibleSwap) 
                        { 
                            var temp = _items[current]; 
                            _items[current] = _items[possibleSwap]; 
                            _items[possibleSwap] = temp; 
                        } 
                        else break; // if nothing to swap, we're done 

                        // Update current to the location of the swap 
                        current = possibleSwap; 
                    } 
                } 

                // Return the item from the heap 
                return toReturn; 
            } 

            /// <summary>Gets the number of objects stored in the heap.</summary> 
            public int Count { get { return _items.Count; } } 

            internal List<KeyValuePair<TKey, TValue>> Items { get { return _items; } } 
        }

        private readonly AutoResetEvent _newItem = new AutoResetEvent(false);
        private readonly object _syncLock = new object();
        private readonly MinBinaryHeap _minHeap = new MinBinaryHeap();
    } 
} 
```

# linux - 比较 Bash 脚本中的变量

> ID：16209180
> 
> 赞同：2
> 
> 时间：2013-04-25T07:50:32.323
> 
> 标签：linux, bash

查看其他 Bash 脚本，我看到人们比较变量，例如：`$S == $T`而在其他时候，我看到变量被*包裹*在字符串中：`"$S" == "$T"`。

一些实验似乎表明两者都做同样的事情。下面的演示将`equal`在这两种情况下打印（使用 GNU bash 测试，版本 4.2.37）：

```
#!/usr/bin/env bash

S="text"
T="text"

if [[ $S == $T ]]; then
  echo "equal"
fi

if [[ "$S" == "$T" ]]; then
  echo "equal"
fi 
```

`$S == $T`我的问题：如果和之间有区别`"$S" == "$T"`，那是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:00:11.050

如果您使用`[[`它们几乎相同，但不完全...

> 当使用 == 和 != 运算符时，运算符右侧的字符串被视为一个模式，并根据下面模式匹配中描述的规则进行匹配。[...] 可以引用模式的任何部分以强制将其作为字符串匹配。

如果使用`[`，则必须使用引号，除非您知道变量不能为空或包含空格。

*为了安全起见，您可能希望一直引用所有变量。*

# tizen - 对于旧版本的 Tizen - 如何在 Tizen 模拟器中卸载应用程序？

> ID：16209182
> 
> 赞同：0
> 
> 时间：2013-04-25T07:50:33.933
> 
> 标签：tizen, tizen-emulator

**此问题适用于 Tizen 的最早版本之一，不适用于当前版本**

我刚刚开始使用 Tizen。我设法在模拟器上安装了一个 HelloWorld 应用程序，但我找不到卸载它的方法。我错过了什么？

请参阅模拟器上设置菜单的以下屏幕截图。预加载的应用程序列在应用程序下，但我安装的应用程序不存在。

![Tizen 模拟器上的设置](https://i.stack.imgur.com/tSM26.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:10:45.813

您可以使用`sdb`命令来完成。

```
$ sdb -e uninstall <AppId> 
```

您可以在 manifest.xml 中找到您应用的 AppId。AppId 由随机 10 个字符（字母和数字）组成。

顺便说一句，Tizen 2.1（尚未公开发布）在设置应用程序中具有卸载功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T03:16:26.993

通过右键单击模拟器打开 tizen shell，然后选择 [Shell]。

```
wrt-installer -ug <guid> 
```

或者

```
wrt-installer -un <package_name> 
```

您可以在 config.xml 的 [Overview] 页面找到 guid。

包名称是 tizen 应用程序 ID。您可以在 config.xml 的 [Tizen] 页面找到它。

例如，

```
wrt-installer -ug http://yourdomain/HelloWorld 
```

或者

```
wrt-installer -un Spp6vzPOlp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-17T16:25:44.510

在 tizen 手表模拟器上按右键单击 > 控制面板 > 应用程序管理器（左侧菜单）> 卸载程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-07T18:19:10.700

这很简单，只需单击我在下面四舍五入的设置图标（图 1）。然后用户应用程序将显示一个关闭图标（图 2），只需单击您需要的关闭按钮 :)

![图像1](https://i.stack.imgur.com/HWJud.png)

![图2](https://i.stack.imgur.com/LPf8s.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:54:22.533

From the documentation:

> you can uninstall the app on the phone via Settings > All > Manage applications. Select the app from the list, then click on the Uninstall button. You can also update an existing app from the command line with:

[https://wiki.tizen.org/wiki/Manually_installing_apps](https://wiki.tizen.org/wiki/Manually_installing_apps)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-17T09:47:57.320

在 Tizen 菜单屏幕的左上方有一个设置图标，只需单击该图标，您就可以查看所有用户安装的可以卸载的应用程序。从中选择您的应用程序，您的应用程序将被卸载。

# ios - iOS6，如果从 Cydia 安装，应用程序会收到 SIGSTOP

> ID：16209191
> 
> 赞同：1
> 
> 时间：2013-04-25T07:51:05.440
> 
> 标签：ios, ios6, jailbreak, cydia

我有一个可以以两种形式安装的应用程序：.ipa 文件和 Cydia 包。它在 iOS5 上运行良好。但是在 iOS6 上，当从 Cydia 安装应用程序时，发生了一件奇怪的事情。当我按下**主页**按钮时，iOS 发送`SIGSTOP`并终止应用程序。我没有在 Info.plist 中`UIApplicationExitsOnSuspend`设置。`TRUE`任何想法为什么会发生以及如何防止这种情况？

同样在 iOS6 上，可以从 SpringBoard 中删除 Cydia 应用程序，这看起来不是一个好功能，因为 Cydia 中的应用程序仍然显示为*已安装*。有什么标志可以避免这种情况吗？

编辑：

我发现我的应用程序由于奇怪的死锁而被杀死，并且由于设备在文件系统上有太多的崩溃转储（我在控制台日志中找到了这个）而没有生成崩溃报告。从 FS 删除一些日志后，我遇到了这个问题[https://stackoverflow.com/questions/15164548/cocos2d-x-example-app-crashes-when-pressing-home](https://stackoverflow.com/questions/15164548/cocos2d-x-example-app-crashes-when-pressing-home)。我没有使用 cocos2d，但 OpenGL 子系统似乎有问题。即使它只是初始化并且没有渲染任何东西，它也会崩溃。我试图调用`glFinish()`、卸载着色器程序和`[EAGLContext setCurrentContext:nil]`，但所有这些都无济于事。

编辑：

我通过在应用停用时完全释放我的渲染子系统（包括 OpenGL 上下文）解决了这个问题。幸运的是，这很容易做到。

# oracle-adf - ADF：jquery指向页面上的特定元素

> ID：16209192
> 
> 赞同：0
> 
> 时间：2013-04-25T07:51:10.170
> 
> 标签：oracle-adf, jdeveloper

我正在使用 jdev11.1.1.6

如果我需要滚动到页面顶部..这完美..

```
var scrollTop = function (event) {
$('.mainWrapper,body,html').animate( {
scrollTop : 0
}, 'slow');
} 
```

我把它从 pqr.jsff 称为

```
<af:commandLink text="click test" clientComponent="true" id="col7">
<af:clientListener method="scrollTop " type="click"/>
</af:commandLink> 
```

[将其定向到特定元素的链接](http://www.abeautifulsite.net/blog/2010/01/smoothly-scroll-to-an-element-without-a-jquery-plugin/)

我修改了我的功能如下，但它对我不起作用

```
var scrollToSpecificPosition= function (event) {
$('.mainWrapper,body,html').animate( {
scrollTop : $("#gl1").offset().top
}, 'slow');
} 
```

gl1 是我希望指向的 id

```
<af:goLink id="gl1" text="test"></af:goLink> 
```

我把它从 pqr.jsff 称为

```
<af:commandLink text="click test" clientComponent="true" id="col7">
<af:clientListener method="scrollToSpecificPosition" type="click"/>
</af:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T22:54:08.040

我想，问题是一个 Id 字段。
“gl1” id 是 adf 组件的正确标识符，但在 html-dom 中会有所不同，因为 adf 组件本身可能具有复杂的 html 结构，并且为了保持 id 的唯一性，adf 将为其添加父母 id 作为前缀等.
还有一件事。您必须检查**clientComponent**选项是否设置为“ **true** ”，以确保该组件在 dom 中可用。然后找到类似 FireBug real component id 的东西，

它可能看起来有点复杂，例如“pt1:pg1:gl1:link”。如果你确定你的代码总是在相同的环境中运行，你可以硬编码这个 id。另一种选择是使用掩码来查找您的组件。

您也可以尝试使用 AdfPage (native js lib) 通过它们的原始 id 访问 adf 组件（虽然它不是那么容易使用并且它也有一些限制）。

# c# - 在 Windows C# 中找不到文件异常

> ID：16209194
> 
> 赞同：2
> 
> 时间：2013-04-25T07:51:14.690
> 
> 标签：c#, windows, file, stream

当我第一次打开文件、读取其内容并保存时，该应用程序运行良好。但是当我再次打开同一个文件时，我得到一个*file-not-found exception*。如何刷新流？

```
FileStream usrFs = null;
try
{
    usrFs = new FileStream(xmlSource, FileMode.Open, FileAccess.Read,
    FileShare.ReadWrite);
}
catch (IOException)
{
    MessageBox.Show("File not found in the specified path");
} 
```

### XML

```
<?xml version="1.0"?>
<MenuItem BasePath="c:\SampleApplication"> 
```

### 堆栈跟踪

```
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)    
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)    
at SampleApplication.MainForm.ProcessDocument(BackgroundWorker worker, DoWorkEventArgs e) in C:\Users\273714\Desktop\CRAFTLite - VSTS\SampleApplication\MainForm.cs:line 179 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:58:08.737

你可以试试这个：

```
 using (FileStream usrFs = new FileStream(xmlSource, FileMode.Open, 
      FileAccess.Read, FileShare.ReadWrite) 
     {
       ... 
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:55:24.823

读取文件后，当您完成读取或写入后`close`，`filestream`...

```
finally
{
   fileStream.Close();
} 
```

并且 `IOEXCEPTIONS`将是不同的类型，您只是显示找不到文件的消息。在您的情况下，异常**不会**是找不到文件...它将是`file already open by another process`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:14:33.977

你得到一个`IOException`可能是由许多问题引起的。如果要检查未找到的文件，则应检查`System.IO.FileNotFoundException`. 如果没有任何其他信息，很难准确判断是什么导致了问题。

一个问题是当前您没有关闭文件流。您需要调用`usrFs.Close()`finally 方法。或者更好的是，使用[using](http://msdn.microsoft.com/en-gb/library/yh598w02%28v=vs.80%29.aspx)关键字来确保文件已关闭。

```
using( var usrFs = new FileStream(xmlSource, FileMode.Open, FileAccess.Read, FileShare.ReadWrite) )
{
    // do things here
}
// usrFs is closed here, regardless of any exceptions. 
```

# asp.net-mvc - 在 MVC 中将 HttpPostBasicFile 转换为图像

> ID：16209200
> 
> 赞同：0
> 
> 时间：2013-04-25T07:51:30.047
> 
> 标签：asp.net-mvc, image

我通过上传得到一张图片，我想将其转换为图像文件而不保存它。
我该怎么做？

```
public HttpPostedFileBase BasicPicture { get; set; }

var fileName = Path.GetFileName(BasicPicture.FileName);
// store the file inside ~/App_Data/uploads folder
 var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
BasicPicture.SaveAs(path); 
```

通过此代码，我可以将图片保存在服务器上，但我想将其转换为图像

```
Image img=(Image) BasicPicture; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:27:19.703

您可以使用以下[`FromStream`](http://msdn.microsoft.com/en-us/library/93z9ee4x.aspx)方法：

```
using (Image img = Image.FromStream(BasicPicture.InputStream))
{
    ... do something with the image here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T18:01:24.143

您还可以将**HttpPostedFileBase**转换为**WebImage**（这为您提供了更多 API - 类似 Resize 方法）：

```
public ActionResult SaveUploadedImage(HttpPostedFileBase file)
{

    if(file != null)
    {

        var image = new System.Web.Helpers.WebImage(file.InputStream);

        var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), file.FileName);

        image.Save(path);

    }

    return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:40:26.383

不知道你在做什么以及为什么我可以给出一个完整的智能答案。

就个人而言，我会使用这样的东西来打开图像。您已将图像保存到您的服务器，所以与其投射，为什么不新建一个新图像呢？最终结果是一样的！

`WebImage webImage = new WebImage(path);`

# mongodb - MongoDB Update $push 如果没有包含数组的相应查询字段，则无法应用位置运算符

> ID：16209201
> 
> 赞同：1
> 
> 时间：2013-04-25T07:51:30.727
> 
> 标签：mongodb, mongodb-update

模型：

```
{
    "_id" : "a62107e10f388c90a3eb2d7634357c8b",
    "_appid" : [
        {
            "_id" : "1815aaa7f581c838",
            "events" : [
                {
                    "_id" : "_TB_launch",
                    "boday" : [
                        {
                            "VERSIONSCODE" : "17",
                            "NETWORK" : "cmwap",
                            "VERSIONSNAME" : "2.4.0",
                            "IMSI" : "460026319223205",
                            "PACKAGENAME" : "com.androidbox.astjxmjmmshareMM",
                            "CHANNELID" : "xmjmm17",
                            "CHANNELNAME" : "浠..?.M寰.俊?.韩?.?1.x锛.,
                            "eventid" : "_TB_launch",
                            "uuid" : "a62107e10f388c90a3eb2d7634357c8b",
                            "creattime" : "1366300799766",
                            "ts" : ISODate("2013-04-25T06:28:36.403Z")
                        }
                    ],
                    "size" : 1
                }
            ],
            "size" : 1
        }
    ],
    "size" : 1
}
> db.events.update(
    {
        "_id":"039e569770cec5ff3811e7410233ed27",
        "_appid._id":"e880db04064b03bc534575c7f831a83a",
        "_appid.events._id":"_TB_launch"
    },
    {
        "$push":{
            "_appid.$.events.$.boday":{"111":"123123"}
        }
    }
); 
```

如果没有包含数组的相应查询字段，则无法应用位置运算符。

**为什么？！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:00:45.240

您正在尝试引用多个嵌入级别 - 您只能有一个位置 $ 运算符。[在实现此功能请求](https://jira.mongodb.org/browse/SERVER-831)之前，您将无法执行此类操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T18:22:16.023

[在这里回复](http://grokbase.com/t/gg/mongodb-user/11ajgam3bd/can-you-use-push-on-nested-arrays) 简短的回答是“不”，但是使用嵌套数组会变得很棘手。这是一个例子：

```
db.foo.save({_id: 1, a1:[{_a1id:1, a2:[{a2id:1, a3:[{a3id:1, a4:"data"}]}]}]})
db.foo.find()
{ "_id" : 1, "a1" : [
 { "_a1id" : 1, "a2" : [
  { "a2id" : 1, "a3" : [
   { "a3id" : 1, "a4" : "data" }
  ] }
 ] }
] }

db.foo.update({_id:1}, {$push:{"a1.0.a2.0.a3":{a3id:2, a4:"other data"}}})
db.foo.find()
{ "_id" : 1, "a1" : [
 { "_a1id" : 1, "a2" : [
  { "a2id" : 1, "a3" : [
   { "a3id" : 1, "a4" : "data" }, 
   { "a3id" : 2, "a4" : "other data" }
  ] }
 ] }
] } 
```

如果您不确定您的一个子文档在数组中的哪个位置，您可以使用一个位置运算符，Mongo 将更新第一个匹配的子文档。例如：

```
db.foo.update({_id:1, "a1.a2.a2id":1}, {$push:{"a1.0.a2.$.a3":{a3id:2, a4:"other data"}}}) 
```

# c++ - 未定义的引用 char* 到字符串

> ID：16209209
> 
> 赞同：0
> 
> 时间：2013-04-25T07:51:56.117
> 
> 标签：c++, oop

通过将它们用作我的主构造函数和类构造函数，我得到了以下错误。

```
#include<Process.h>
int main(int argc, char* argv[])
{
  Process pr (0.01,0.0,argv[3],argv[4],argv[5]);
  return 1;
} 
```

和进程类头：

```
class Process
{
  public:
    Process();
    Process(double BinSize,double Offset,const std::string& parameters,const std::string& TDBname,const std::string& DDBname);
    virtual ~Process();
}; 
```

和进程类源：

```
Process::Process()
{
//ctor
}
Process::Process(double BinSize,double Offset,const std::string& TDBname,const std::string& DDBname,const std::string& parameters)
{
//ctor
cout<<TDBname;
} 
```

但是当我通过 Ubuntu 12.10 编译代码时，我得到了：

```
main.cpp:(.text.startup+0xf7): undefined reference to `Process::Process(double, double, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)' 
```

我不知道这个错误来自哪里！先感谢您。

# hadoop - 如何捕获正在传输的数据的 Apache Flume 元数据信息

> ID：16209210
> 
> 赞同：0
> 
> 时间：2013-04-25T07:52:02.180
> 
> 标签：hadoop, flume

我试图捕获 Apache Flume 元数据信息，但我没有看到它记录这些信息的位置。

如果我需要做任何预配置来捕获 Flume 元数据信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T12:22:56.443

Flume 组件在标准 Flume 日志 (/var/log/flume-ng) 中记录一些此类元信息。

例如，[HDFS sink](http://flume.apache.org/FlumeUserGuide.html#hdfs-sink)在文件滚动时记录文件的路径：

```
19 апр 2013 13:00:07,063 INFO  [hdfs-hdfs_sink-roll-timer-0] (org.apache.flume.sink.hdfs.BucketWriter.renameBucket:379)  - Renaming hdfs://localhost/path/to/data/2013/04/19/12/data.1366358400751.tmp to hdfs://localhost/path/to/data/2013/04/19/12/data.1366358400751 
```

[Avro 源](http://flume.apache.org/FlumeUserGuide.html#avro-source)记录每个接收到的事件批次：

```
19 апр 2013 13:00:07,175 DEBUG [New I/O server worker #1-31] (org.apache.flume.source.AvroSource.appendBatch:222)  - Avro source avro_source: Received avro event batch of 100 events. 
```

此外，Flume 中还有监控功能，允许向外部系统（例如 Ganglia）报告一些指标，例如已处理消息的总数、通道大小等。看看[http://flume.apache.org/ FlumeUserGuide.html#monitoring](http://flume.apache.org/FlumeUserGuide.html#monitoring)。

# vim - vim 向前跳 对我也不起作用（snipmate）

> ID：16209213
> 
> 赞同：4
> 
> 时间：2013-04-25T07:52:11.600
> 
> 标签：vim, snipmate

我和许多其他用户有同样的问题。向后`<C-o>`跳有效，但向前跳不行。我阅读了相同的问题和答案，但没有得到任何结果。
我尝试`:verbose map <C-I>`命令并得到这个：
![详细命令结果](https://i.stack.imgur.com/aNNTQ.png) 如何禁用 snipmate 映射？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:09:45.917

首先，如果您不清楚，`<C-i>`则与 ; 相同`<Tab>`。不幸的是，您不能单独映射它们。

您的屏幕截图显示*snipMate*已`<C-i>`在视觉和选择模式下抓取；它需要这些映射来跳转到下一个片段制表位。您可以通过编辑 snipMate 文件来更改它，但这些映射**不会**干扰`<C-i>`您关心的正常模式映射。

在正常模式下，您已将`<C-i>`/重新映射`<Tab>`到`gt`您的`.vimrc`; 您需要重新分配或删除它才能取回原始`<C-i>`命令。

# xml - 如何放入不同的Listview？

> ID：16209222
> 
> 赞同：1
> 
> 时间：2013-04-25T07:52:28.993
> 
> 标签：xml, jquery, jquery-mobile

我的 jquery 代码来获取名称、代码和类别：

```
 $(req.responseText).find("Table").each(function(i) {
              var item = $(this),
              name = item.find('Name').text(),
              code = item.find('Code').text(),
              catg = item.find('Category').text();                    

                 var $content = $('<li><a href="#"><img src="../../img/album-bb.jpg"><h3>Name: '+ name + '</h3><p>Code: '+ code + '</p><p>Category: '+ catg + '</p></a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Add to favorites</a></li>');                              
                 $('#RecipeList').append($content).listview('refresh');

      }); 
```

这是我的 XML 的示例响应：

```
<Table diffgr:id="Table1" msdata:rowOrder="0">
    <Code>106377</Code>
    <Name>Blackened red snapper</Name>
    <Category>123</Category>
    <Yield>4</Yield>
    <YieldUnit/>
</Table>
<Table diffgr:id="Table2" msdata:rowOrder="1">
    <Code>303570</Code>
    <Name>Celery soup</Name>
    <Category>123</Category>
    <Yield>1</Yield>
    <YieldUnit/>
</Table>
<Table diffgr:id="Table3" msdata:rowOrder="2">
    <Code>303675</Code>
    <Name>Challah French Toast</Name>
    <Category>123</Category>
    <Yield>6</Yield>
    <YieldUnit/>
   </Table> 
```

listview 输出是这样的：

```
Name: Blackened red snapperCelerySoupChallah French toast
Code: 106377303570303675
Category: 123123123 
```

如何放入不同的列表视图？..当它追加时。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:09:03.323

试试这个：

```
var ni = 0;
var ci = 0;
var cati = 0;
var NameArr = new Array();
var CodeArr = new Array();
var CatArr  = new Array();

$(req.responseText).find('Name').each(function () {
  NameArr[ni] = $(this).text();
  ni++;
}

$(req.responseText).find('Code').each(function () {
  CodeArr[ci] = $(this).text();
  ci++;
}

$(req.responseText).find('Category').each(function () {
  CatArr[cati] = $(this).text();
  cati++;
}

for(var i=0; i<NameArr.length; i++){
    var $content = $('<li><a href="#"><img src="../../img/album-bb.jpg"><h3>Name: '+ NameArr[i] + '</h3><p>Code: '+ CodeArr[i]+ '</p><p>Category: '+ CatArr[i]+ '</p></a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Add to favorites</a></li>');                              
    $('#RecipeList').append($content).listview('refresh');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:15:24.783

工作示例：http: [//jsfiddle.net/Gajotres/uzphF/](http://jsfiddle.net/Gajotres/uzphF/)

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#table-data').empty();
    $.ajax({
        type: "POST",
        url: "/echo/xml/",
        dataType: "xml",
        data: {
            xml: '<Tables><Table><Code>106377</Code><Name>Blackened red snapper</Name><Category>123</Category><Yield>4</Yield><YieldUnit/></Table><Table><Code>303570</Code><Name>Celery soup</Name><Category>123</Category><Yield>1</Yield><YieldUnit/></Table><Table><Code>303675</Code><Name>Challah French Toast</Name><Category>123</Category><Yield>6</Yield><YieldUnit/></Table></Tables>'
        },
        success: function(xml) {
            ajax.parseXML(xml);
        },
        error: function (request,error) {
            alert('Network error has occurred!');
        }
    });
});

var ajax = {  
    parseXML:function(result){
        $(result).find("Table").each(function(){
            var code  = $(this).find('Code').text();
            var name  = $(this).find('Name').text();
            var cat  = $(this).find('Category').text();
            var yield  = $(this).find('Yield').text();

            $('#table-data').append('<li><a href="#cars"><h3>Table code:<span> '+code+'</span></h3><p>Table name: ' + name + '</p></a></li>');
        });    
        $('#table-data').listview('refresh');
    }
} 
```

本例使用 mockup jsFiddle 函数来测试 XML ajax 调用，但这部分不是必须的。您只需要知道如何循环通过 XML。还有一件事，您的 XML 示例必须包含在父标记中，我将其命名为**tables**。

# java - Call ejb3 existing in a module from a war in JBOSS as 7.1

> ID：16209223
> 
> 赞同：1
> 
> 时间：2013-04-25T07:52:29.123
> 
> 标签：java, jboss, ejb-3.0, jndi

I have a problem while trying to call my ejb3 existing in JBoss 7 module from my war file. Please have a look on following details-

Here is Local interface-

```
package com.uniteller.switchcore.cs.iface;

import javax.ejb.Local;
import javax.ejb.Remote;

@Local
public interface CSTimer {
     public boolean init(  );
} 
```

EJB:

```
package com.uniteller.switchcore.cs.impl;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;

    @Stateless
    @LocalBean
    public class CSTimerBean implements CSTimer {

        public CSTimerBean() {
            // TODO Auto-generated constructor stub
        }

        @Override
        public boolean init() {
    //Some log statements
    }
} 
```

both interface and bean are in side the jboss as 7 module (JBOSS_HOME/modules/com.xxx.switch.main) within Switch.jar.

Now my problem is, I am trying to call it from a war (SwitchMain.war) but getting following exception-

```
12:50:41,593 ERROR [stderr] (MSC service thread 1-4) javax.naming.NameNotFoundException: ejb:/UFSwitch/CSTimerBean!com.uniteller.switchcore.cs.iface.CSTimer -- service jboss.naming. 
```

Please help me to solve this issue.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:31:14.407

您可以尝试通过在 bean 类中添加**@LocalBinding(jndiBinding = “CSTimerBean “)**来定义自己的接口 。请参阅此链接以验证您如何调用接口，这可能是您调用[http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/JNDI_Bindings.html的方式的问题](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/JNDI_Bindings.html)

# coded-ui-tests - Coded ui objects in UIMap

> ID：16209226
> 
> 赞同：2
> 
> 时间：2013-04-25T07:52:44.357
> 
> 标签：coded-ui-tests

I have a question regarding coded ui UIMap. Every time I record an action on the same application, coded ui generates a new object for the same window in the application. It looks like: UIAdminWindow

UIAdminWindow1

UIAdminWindow2

and so on... every window class holds different buttons, even though it's the same window. Thus it's very hard to keep code maintenance. What i would like is that every time i perform actions and records on a window, even if not at the same time, the already generated class for this window, will be updated with the new controls. any suggestions to why it happens?

Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T06:03:31.740

你可以通过做两件事来清理你的 UIMaps：

1.  使用[UIMap 工具箱](http://uimaptoolbox.codeplex.com/)（来自 codeplex）在 UIMap 中移动控件，使它们都位于一个控件树下。
2.  当您有重复的 UI 控件时，请转到引用重复控件的操作的属性并将 UI 控件属性更改为指向 UIMap 中的原始控件。
3.  重复的树现在应该没有被引用，您可以将其从地图中删除，从而保持干净。

是的，这样做很痛苦，但为了可维护性，这是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T11:41:25.477

`UIMap.uitest`您可以更改操作名称和控件名称以便更好地维护。例如：您可以设置`UIAdminWindow`as`FirstAcessWindow`或其他名称，以方便地表达控件或动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T15:46:02.163

我可以猜测的是，有一些随机生成的内容或元素标识数据，例如可能导致它的类或标题。例如，这可能是由不同的用户名引起的。您还可以从 UI 地图元素树中更新元素。

# mysql - MySQL：使用 LIKE 运算符时，“字段列表”中的未知列“search_string”

> ID：16209228
> 
> 赞同：0
> 
> 时间：2013-04-25T07:52:46.630
> 
> 标签：mysql, sql

当我尝试使用“search_string”作为存储过程的参数运行此查询时，我的 MySQL 数据库**在“字段列表”错误消息中为我提供了“未知列”“search_string” ：**

```
DROP PROCEDURE IF EXISTS select_title_from_book_table_like;
CREATE PROCEDURE select_title_from_book_table_like(IN IN_TITLE VARCHAR(255))
BEGIN
    PREPARE stmt FROM
    "SELECT   b.book_id,
              LEFT(b.title, 36) AS title,
              b.edition,
              GROUP_CONCAT(CONCAT_WS(' ', a.last_name,
                                          a.first_name,
                                          a.patronymic)
                                 ORDER BY a.last_name
                                 SEPARATOR ', ') AS authors,
              YEAR(b.published) AS published,
              LEFT(b.pages, 8)  AS pages,
              b.isbn,
              s.subject,
              l.language,
              p.publisher
     FROM    (SELECT * FROM book WHERE title LIKE '%?%') AS b
              LEFT JOIN book_author AS ba
                     ON b.book_id = ba.book_id
              LEFT JOIN author AS a
                     ON ba.author_id = a.author_id
              LEFT JOIN language AS l
                     ON b.language_id = l.language_id
              LEFT JOIN subject AS s
                     ON b.subject_id = s.subject_id
              LEFT JOIN publisher AS p
                     ON b.publisher_id = p.publisher_id
     GROUP BY b.book_id
     ORDER BY b.title ASC";

    SET @param1 = IN_TITLE; 

    EXECUTE stmt USING @param1;
    DEALLOCATE PREPARE stmt;
END$$ 
```

这是调用该过程的代码：

```
ShowStringGrid(StringGrid,
    'CALL select_title_from_book_table_like(' + Trim(SearchBox.Text) + ')'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:57:46.727

我认为你准备好的陈述在这里出错了：

```
WHERE    b.title LIKE '%?%' 
```

您不想在`%`那里设置，因为现在您的问号在`'`. 更好的选择是使用

```
WHERE    b.title LIKE ? 
```

然后将 % 添加到您的实际参数中。

从[对这个问题的答案的评论中，](https://stackoverflow.com/questions/8247970/using-like-wildcard-in-prepared-statement)您还可以发现您可能会在查询中这样做，但我没有这方面的经验：

```
WHERE    b.title LIKE '%' || ? || '%' 
```

# android - 如何使对话框逐渐变大而不是立即变大

> ID：16209236
> 
> 赞同：1
> 
> 时间：2013-04-25T07:53:11.083
> 
> 标签：android, animation, android-animation

我有一个自定义对话框包含一个复选框。当我检查 CheckBox 时，会创建新视图并将其添加到对话框中。如果我取消选中复选框，它将使添加的视图消失并将其更改回以前的视图。

这是它的样子。左侧图片为检查前，左侧为检查后。 ![在此处输入图像描述](https://i.stack.imgur.com/0UEby.png)

选中对话框后，对话框布局将变大，如上图所示。

我的问题是如何使对话框布局逐渐变大而不是立即变大。像动画这样的东西，使布局逐渐扩展。

这是我迄今为止的工作。

```
public class CreateRoomDialogFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        //Get layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        //R.layout.add_player2 is the layout shows on dialog message
        view = inflater.inflate(R.layout.createroom_dialog_fragment, null);

        roomName = (EditText)view.findViewById(R.id.createroom_dialog_roomname);
        roomKey = (EditText)view.findViewById(R.id.createroom_dialog_key);
        keyLayout = (LinearLayout)view.findViewById(R.id.keyLayout);        
        checkBoxLayout1 = (RelativeLayout)view.findViewById(R.id.createroom_dialog_layout1);
        checkBoxLayout2 = (RelativeLayout)view.findViewById(R.id.createroom_dialog_layout2);

        // lock the room with key
        checkBox1 = (CheckBox)view.findViewById(R.id.createroom_dialog_checkbox1);

        // show the key
        checkBox2 = (CheckBox)view.findViewById(R.id.createroom_dialog_checkbox2);

        checkBox1.setOnCheckedChangeListener(new CreateRoomCheckBoxListener());
        checkBox2.setOnCheckedChangeListener(new CreateRoomCheckBoxListener());
    }   

    private class CreateRoomCheckBoxListener implements OnCheckedChangeListener{

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if(buttonView == checkBox1){
                // lock the room with key
                if(isChecked){

                    roomKey.setVisibility(View.VISIBLE);
                    checkBoxLayout2.setVisibility(View.VISIBLE);                    

                }else{

                    roomKey.setVisibility(View.GONE);
                    checkBoxLayout2.setVisibility(View.GONE);
                }

            }   
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:16:45.183

可以为 Dialog 设置动画。
请参考本[教程](http://www.adamrocker.com/blog/291/how-to-animate-the-android-dialog.html)。
对不起，是日文。而且由于我可以阅读日语，我假设您可以阅读日语。

# php - 如何在 IE 中显示 .ico 图像文件

> ID：16209238
> 
> 赞同：1
> 
> 时间：2013-04-25T07:53:14.243
> 
> 标签：php, html, internet-explorer, default.png, .ico

我已经为 favicon 上传了 .ico 文件，它在所有浏览器中都可以作为 favicon 正常工作。但是当我尝试在 IE 的 HTML 图像标签中显示这个 .ico 文件时，它没有正确显示。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:15:38.090

IE 不提供没有图标的网站图标`type="image/x-icon"`。

所以对于 IE 的 favicons，你应该使用这个：
`<link rel="icon" type="image/x-icon" href="favicon.ico" />`

为了将图标显示为`img`标签，我能想到的最佳解决方案是尝试另一种格式。如果您手动上传图标，那么我会使用图像程序转换它们。

如果您的系统允许用户上传图标，那么我会使用[GD](http://www.php.net/gd)或[ImageMagick](http://www.php.net/imagick)库来转换这些图标。

# c++ - 将 head 设置为链表中的 Node* ptr 意味着什么？

> ID：16209239
> 
> 赞同：-4
> 
> 时间：2013-04-25T07:53:15.730
> 
> 标签：c++

所以我正在解决一个问题，我们不能使用虚拟节点

所以代码开始像

```
void LinkedList::deletemiddleNode()
{
    Node *pointer = head;
    ...
} 
```

我之所以感到困惑，是因为我在概念上感到困惑。由于我们没有虚拟节点，因此头部节点的 prev 设置为`NULL`，尾部节点的 next 设置为`NULL`。因此，在绘图中，您将如何描述该指针指向的内容。比如它是一个指向头部的指针吗？那么pointer->prev->next就不能用了，因为head的prev是`NULL`，但是示例解决方案使用它...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:58:35.783

你说的画？像这样的东西怎么样：

假设您有一个变量`head`指向`node`内存中某处的对象。它看起来像这样：

```
+------+ +------------------+
| 头| ---> | 一些节点对象 |
+------+ +------------------+

```

然后你声明另一个指针，命名`pointer`并分配给它的*值*来自`head`. 现在`pointer`包含相同的值，`head`并且指向内存中的相同节点：

```
   +------+      
   | 头| ----。
   +--------+ | +------------------+
               >---> | 一些节点对象 |
+---------+ | +------------------+
| 指针 | ---'
+----------+

```

还是我误解了你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:05:44.250

上面的语句意味着您正在设置或初始化您的头指针以指向某个节点对象，并且头与节点具有相同的用户定义数据类型！！！

# javascript - 将数组推入数组

> ID：16209241
> 
> 赞同：0
> 
> 时间：2013-04-25T07:53:24.037
> 
> 标签：javascript, arrays, push

如何通过使用 Javascript将数组推送到**数组中？**

我知道只推普通数组，比如......

```
var arr = [];
arr.push(['one','two','three']); 
```

那是..

```
array(
 'one',
 'two',
 'three'
) 
```

**但是关于 ？怎么挤成这样……**

```
array(
 array(
  'one',
  'one_two'
 ),
 'two',
 'three'
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:55:28.027

像这样。

```
arr.push([['one','two','three']]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:56:59.103

这就是你已经在做的事情。

此代码生成一个数组：

```
var arr = [];
arr.push('one','two','three'); // push three items 
```

即与以下结果相同：

```
var arr = ['one','two','three']; 
```

此代码生成一个锯齿状数组（数组中的数组）：

```
var arr = [];
arr.push(['one','two','three']); // push one item that is an array 
```

即与以下结果相同：

```
var arr = [
  ['one','two','three']
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:14:43.907

你也可以使用

```
var oldArray = new Array() // Put something inside

var newArray = {a:valueA, b:valueB, c:valueC}

oldArray.push(newArray) 
```

最好的

# python - 将 Fabric env.hosts 刺痛作为变量传递在函数中不起作用

> ID：16209242
> 
> 赞同：5
> 
> 时间：2013-04-25T07:53:25.120
> 
> 标签：python, fabric, hosts, env

将 Fabric env.hosts 刺痛作为变量传递在函数中不起作用。

演示.py

```
#!/usr/bin/env python

from fabric.api import env, run

def deploy(hosts, command):
    print hosts
    env.hosts = hosts
    run(command) 
```

主文件

```
#!/usr/bin/env python

from demo import deploy

hosts = ['localhost']
command = 'hostname'
deploy(hosts, command) 
```

蟒蛇主.py

```
['localhost']
No hosts found. Please specify (single) host string for connection: 
```

但是 env.host_string 有效！

演示.py

```
#!/usr/bin/env python

from fabric.api import env, run

def deploy(host, command):
  print host
  env.host_string = host
  run(command) 
```

主文件

```
#!/usr/bin/env python

from demo import deploy

host = 'localhost'
command = 'hostname'
deploy(host, command) 
```

蟒蛇主.py

```
localhost
[localhost] run: hostname
[localhost] out: heydevops-workspace 
```

但是 env.host_string 对我们来说是不够的，它是一个主机。也许我们可以在循环中使用 env.host_string，但这并不好。因为我们还想设置并发任务数并并行运行。

现在在 ddep（我的部署引擎）中，我只使用 MySQLdb 来获取参数，然后执行 fab 命令，例如：

```
os.system("fab -f service/%s.py -H %s -P -z %s %s" % (project,host,number,task)) 
```

这是一个简单的方法，但不是很好。因为如果我使用 fab 命令，我无法在 Python 中捕获结果的异常和失败，以使我的 ddep 可以“重试”失败的主机。如果我使用“从演示导入部署”，我可以通过 Python 中的一些代码来控制和获取它们。

所以现在“env.host”是个麻烦。有人可以给我一个解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:27:12.573

这是我的见解。

根据[docs](http://docs.fabfile.org/en/latest/usage/library.html)，如果您从 python 脚本调用结构任务 - 您应该使用[fabric.tasks.execute](http://docs.fabfile.org/en/latest/api/core/tasks.html#fabric.tasks.execute)。

应该是这样的：

*   演示.py

    ```
    from fabric.api import run
    from fabric.tasks import execute

    def deploy(hosts, command):
        execute(execute_deploy, command=command, hosts=hosts)

    def execute_deploy(command):
        run(command) 
    ```

*   主文件

    ```
    from demo import deploy

    hosts = ['localhost']
    command = 'hostname'

    deploy(hosts, command) 
    ```

然后，只需运行`python main.py`. 希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:58:56.580

**最后，我通过使用 execute() 和 exec 解决了这个问题。**

主文件

```
#!/usr/bin/env python

from demo import FabricSupport

hosts = ['localhost']

myfab = FabricSupport()
myfab.execute("df",hosts) 
```

演示.py

```
#!/usr/bin/env python

from fabric.api import env, run, execute

class FabricSupport:
    def __init__(self):
        pass

    def hostname(self):
        run("hostname")

    def df(self):
        run("df -h")

    def execute(self,task,hosts):
        get_task = "task = self.%s" % task
        exec get_task
        execute(task,hosts=hosts) 
```

蟒蛇主.py

```
[localhost] Executing task 'hostname'
[localhost] run: hostname
[localhost] out: heydevops-workspace 
```

# javascript - 使用 Jade 和 express 访问对象内的 json 对象

> ID：16209252
> 
> 赞同：1
> 
> 时间：2013-04-25T07:54:17.920
> 
> 标签：javascript, json, node.js, express, pug

我现在正在把头发拉出来一点。我似乎无法弄清楚如何使用 Jade 访问以下 json 对象中的“媒体”内容。

```
 {
      "summary":"Jose Mourinho names his Real Madrid side to face Borussia Dortmund in the Champions League semi-final 24 hours early.",
      "type":"STY",
      "lastUpdated":"2013-04-23T16:31:39+00:00",
      "firstCreated":"2013-04-23T16:31:39+00:00",
      "hasShortForm":true,
      "media":{
         "images":{
            "index":{
               "67193384":{
                  "height":261,
                  "width":464,
                  "href":"http://thesun.co.uk/media/images/67193000/jpg/_67193384_67193383.jpg",
                  "altText":"Jose Mourinho"
               }
            }
         }
      },
   }, 
```

我可以访问摘要、类型、更新等。但我不知道如何访问 media.images.index.67193384 中的图像元数据

```
for item in results
    p #{item.summary}
    p #{item.lastUpdated}
    p #{item.media[0]} // ??? 
```

有人可以帮我弄清楚吗？我从未尝试访问对象中的对象中的对象的数据。此外，images.index 中的*67193384***对象**是唯一**的**，并且***始终会***因结果而异。

 ****谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:02:35.040

有点hack，但它有效：

```
- if (item.media && item.media.images)
  p #{item.media.images.index[Object.keys(item.media.images.index)[0]].height} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:01:44.587

```
for item in results
    p= item.summary
    p= item.lastUpdated
    - for (var key in item.media.images) {break;}
    p= item.images.index[key].height 
```

for 循环[用于获取您的密钥](https://stackoverflow.com/questions/3298477/get-first-key-from-javascript-hash)。****

# android - Send arraylist as request parameter through android

> ID：16209256
> 
> 赞同：2
> 
> 时间：2013-04-25T07:54:30.670
> 
> 标签：android

Is there any alternative to send request parameters through android other than `NameValuePair`. I'm trying to send arraylist as request parameter, but `NameValuePair` accepts only string value.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:01:45.460

您可以考虑将 ArrayList 作为 JSONArray 发送。

检查这个 SO 帖子。

[将 ArrayList<MyCustomClass> 转换为 JSONArray](https://stackoverflow.com/questions/4841952/convert-arraylist-to-jsonarray)

[在android中将普通的Java Array或ArrayList转换为Json Array](https://stackoverflow.com/questions/5166592/convert-normal-java-array-or-arraylist-to-json-array-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:01:59.700

阅读有关 JSONObject, JSONArray .. 您可以使用 toString 方法将其转换为字符串，然后将其带回 JSONObject, JSONArray 如果您从服务器接收到它，则传递此 String 构造函数。

通常它是传递复杂结构的标准方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T09:00:58.837

将arraylist存储到一个字符串中，然后发送它..

```
ArrayList<String> contactlist=new ArrayList<String>();
        contactlist.add("Android");
        contactlist.add("tarnaka");
        contactlist.add("uppal");
        contactlist.add("Prasad");

        String[] contact=new String[contactlist.size()];
        contact=contactlist.toArray(contact); 
```

# mysql - 当我在 mysql 中使用 WHERE 和“=”时无法选择

> ID：16209269
> 
> 赞同：-3
> 
> 时间：2013-04-25T07:55:08.167
> 
> 标签：mysql

我在mysql中有一个这样的表，mysql中的数字和单词被stroed为“文本”

```
+---------+----------+
| 数字 | 话|
+---------+----------+
| 1 | 帮助 |
| 2 | 帮手 |
| 3 | 帮助 |
+---------+----------+

```

但是这句话

```
SELECT * FROM Talbe(just refer the talename) WHERE words='help' 
```

不返回任何结果，我不知道为什么以及我错了？并且表格中的“帮助”前后没有任何空白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:57:25.260

```
SELECT * FROM Table AS t WHERE t.words='help' 
```

尝试使用别名，这样它就可以工作了。表是保留关键字将表的名称更改为其他名称

```
SELECT * FROM myable AS t WHERE t.words='help 
```

另一种方法是逃避

```
SELECT * FROM `Table` WHERE words='help' 
```

但我建议更改表名并使用别名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:10:50.937

如果 MySQL 没有在您的查询上抛出任何错误，那么很可能 Table.words 包含其他不可打印的字符。尝试执行以下操作：

```
SELECT t.words, hex(t.words), 'help', hex('help'), hex(t.words) = hex('help')
FROM Table t
WHERE words LIKE '%help%' 
```

它将任何不可打印/不可见的字符（例如空格）编码为十六进制。比较 hex(t.words) 和 hex('help')，很可能你在 t.words 的前面或末尾有空格（十六进制中的 20）或换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:58:14.713

尝试：

```
SELECT * FROM `Table` WHERE words='help' 
```

或者：

```
SELECT * FROM `Table` WHERE words like 'help' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:58:17.447

尝试使用引号：

```
SELECT * FROM `Table` WHERE `words` = 'help' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:10:32.187

只是问显而易见的。您确定表格中有文字**“帮助”吗？**如果是的话你可以试试

`SELECT * FROM table`

然后右键单击结果中的“帮助”并复制文本并将其放在查询中

`SELECT * FROM tableName WHERE words = 'copied text'`

有时您可能会在没有注意到或意外的情况下进入一个额外的空间（这曾经发生在我身上）。由于您尝试了上述所有答案，但它没有奏效......这可能是问题所在。希望它有效。

# php - for循环并附加到PHP中的数组

> ID：16209271
> 
> 赞同：0
> 
> 时间：2013-04-25T07:55:17.603
> 
> 标签：php, doctrine

我有以下代码：

```
$items = array();

foreach($following as $storeOwner)
{
    array_push($items, $productRepository->mostRecentItem($storeOwner->getId(), 5));
} 
```

我正在尝试附加结果

```
 $productRepository->mostRecentItem($storeOwner->getId(), 5) 
```

到`$items`. 我该怎么做？为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:08:11.113

**var_dump**你不同的对象并返回值以确保包含你认为它们应该包含的内容。代码看起来“正确”，因此可能是对象和值不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:12:32.493

试试这个：

```
$items = array();

foreach($following as $storeOwner)
{
    $items[] = $productRepository->mostRecentItem($storeOwner->getId(), 5);
} 
```

另外，看看 mostRecentItem 方法的结果...。

# c# - “外部组件引发的异常”

> ID：16209275
> 
> 赞同：1
> 
> 时间：2013-04-25T07:55:26.067
> 
> 标签：c#, .net, windows-services

我在 C# 中有一个 Windows 服务。运行1-2天后（不具体），服务停止（它实际上并没有停止，但它没有处理任何东西。服务状态仍然是“已启动”，我需要手动重新启动服务，然后它才能再次工作）。

记录的异常是“**外部组件已引发异常**”。这发生在第三方控件中。

我希望服务继续运行而不会停止，因为在生产中，除非特定功能停止，否则没有人会检查服务是否正在启动/处理。

我已经准备好了所有的 TRY..CATCH。

任何建议，即使发生上述错误，我如何确保服务继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:03:29.520

请改用此 try-catch 构造。

```
try{
}catch{
} 
```

[http://www.java2s.com/Code/CSharp/Language-Basics/Usethecatchallcatchstatement.htm](http://www.java2s.com/Code/CSharp/Language-Basics/Usethecatchallcatchstatement.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:30:24.960

你可能想尝试在你的 catch 块中做这样的事情：

```
public static void RestartService(string serviceName, int timeoutMilliseconds)
{
  ServiceController service = new ServiceController(serviceName);
  try
  {
    int millisec1 = Environment.TickCount;
    TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);

    service.Stop();
    service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);

    // count the rest of the timeout
    int millisec2 = Environment.TickCount;
    timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds - (millisec2-millisec1));

    service.Start();
    service.WaitForStatus(ServiceControllerStatus.Running, timeout);
  }
  catch
  {
    // ...
  }
} 
```

如果 RestartService 失败，您可以一起停止您的服务。代码示例[在这里](http://www.csharp-examples.net/restart-windows-service/)

# haskell - Parsec：消耗所有输入

> ID：16209278
> 
> 赞同：16
> 
> 时间：2013-04-25T07:55:27.943
> 
> 标签：haskell, parsec

我对 Parsec 的一个常见问题是，如果无效输入出现在“正确”的位置，它往往会忽略它。

作为一个具体的例子，假设我们有`integer :: Parser Int`，我写

```
expression = sepBy integer (char '+') 
```

（暂时忽略空白问题。）

这可以正确解析“123+456+789”之类的内容。但是，如果我输入“123+456-789”，它会愉快地忽略非法的“-”字符和表达式的结尾部分；我实际上想要一条错误消息告诉我有关无效输入的信息，而不仅仅是让它默默地忽略该部分。

我理解*为什么*会发生这种情况；我不确定如何解决它。*设计使用所有*提供的输入并仅在*所有*输入都是有效表达式时才成功的解析器的一般方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-25T07:58:09.150

它实际上很简单——只要确保它后面跟着`eof`：

```
parse (expression <* eof) "<interactive>" "123+456-789" 
```

`eof`匹配输入的结尾，即使输入只是一个字符串而不是文件。

显然，这只在解析器的顶层才有意义。

# android - 从 android 中的 GPS_Provider 和 Network _Provider 切换

> ID：16209280
> 
> 赞同：1
> 
> 时间：2013-04-25T07:55:37.240
> 
> 标签：android, networking, gps, geocoding

我正在开发基于 GPS 的应用程序，该应用程序根据 GPS 提供商获取地址，但有时由于缺乏信号（例如在地下停车场或类似地方）而无法正常工作。所以在这种情况下，我想通过网络提供商获取地址并通过 sendSMS() 方法发送短信。它必须每 10 分钟重复一次，并使用更新的 Location 调用 sendSMS() 方法。

获取 GPS 位置的代码如下，您能否建议我根据需要对其进行编辑？

```
 public class WPGActivity extends Activity  {
        ImageButton start;
        Button login;

        String ADDRESS, LOCATION;

        TextView addressText, locationText;
        Location currentLocation;
        double currentLatitude;
        double currentLongitude;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            start=(ImageButton)findViewById(R.id.imageButton1);
            login=(Button)findViewById(R.id.button1);

            addressText = (TextView)findViewById(R.id.addressText);
            locationText = (TextView)findViewById(R.id.locationText);

            myLocation();

          //  if(ACTIVE_MODE==1) startApp();

            start.setOnClickListener(new View.OnClickListener() {           
                public void onClick(View v) { 

                getAddress(); // to get address
                sendSMS(); // to send sms
                sendEmail(); // to send email

                }
            });

        }

        public void myLocation(){

            LocationManager locationManager = 
                (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);

            LocationListener locationListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                    updateLocation(location);
                }
                public void onStatusChanged(
                        String provider, int status, Bundle extras) {}
                public void onProviderEnabled(String provider) {}
                public void onProviderDisabled(String provider) {}
            };

            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000*60*5, 30, locationListener);

        }
          public void getAddress(){
                try{
                    Geocoder gcd = new Geocoder(this, Locale.getDefault());
                    List<Address> addresses = 
                        gcd.getFromLocation(currentLatitude, currentLongitude,100);
                    if (addresses.size() > 0) {
                        StringBuilder result = new StringBuilder();
                        for(int i = 0; i < addresses.size(); i++){
                            Address address =  addresses.get(i);
                            int maxIndex = address.getMaxAddressLineIndex();
                            for (int x = 0; x <= maxIndex; x++ ){
                                result.append(address.getAddressLine(x));
                                result.append(",");
                            }               
                            result.append(address.getLocality());
                            result.append(",");
                            result.append(address.getPostalCode());
                            result.append("\n\n");
                        }
                        ADDRESS = result.toString();
                        addressText.setText(ADDRESS);
                    }
                }
                catch(IOException ex){
                    ADDRESS= ex.getMessage().toString();
                    addressText.setText(ADDRESS);
                }
            }

            void updateLocation(Location location){
                currentLocation = location;
                currentLatitude = currentLocation.getLatitude();
                currentLongitude = currentLocation.getLongitude();
                locationText.setText(LOCATION);
            }

    } 
```

# excel - 无法获取工作表函数类的 Sumif 属性

> ID：16209282
> 
> 赞同：2
> 
> 时间：2013-04-25T07:55:44.673
> 
> 标签：excel, vba

谁能解释我能做些什么来解决这个问题？

![在此处输入图像描述](https://i.stack.imgur.com/PAsS2.jpg)

这是当前代码：

```
SumFinalUnusedSPQCement = WorksheetFunction.Sum(Application.WorksheetFunction.SumIf(Range("V4:V" & lastRow + 3), ">0", "B4:B" & lastRow + 3))
SumFinalUnusedSPQSand = WorksheetFunction.Sum(Application.WorksheetFunction.SumIf(Range("W4:W" & lastRow + 3), ">0", "C4:C" & lastRow + 3))
SumFinalUnusedSPQAggregate = WorksheetFunction.Sum(Application.WorksheetFunction.SumIf(Range("X4:X" & lastRow + 3), ">0", "D4:D" & lastRow + 3)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:02:14.960

你错过了`Range`之前`B4:B`和其他人的类似情况。它应该是

```
SumFinalUnusedSPQCement = Application.WorksheetFunction.SumIf( _
                                      Range("V4:V" & lastRow + 3), _
                                      ">0", _
                                      Range("B4:B" & lastRow + 3) _
                                      ) 
```

你也不需要`WorksheetFunction.Sum`。

# jsf - Primefaces 自定义 selectOneRadio，不会传播到支持 bean

> ID：16209285
> 
> 赞同：0
> 
> 时间：2013-04-25T07:55:59.377
> 
> 标签：jsf, jsf-2, primefaces, radio-button

我目前在使用`<p:radioButton>`and时遇到问题`<p:selectOneRadio>`。我正在尝试制作一个带有三个单选按钮的表单，旁边有一些框，这很有效，并且按钮中的“无线电机制”可以工作，因此一次只能选择一个。但是，选定的单选按钮不会传播到后端。我尝试将 a`<p:ajax>`放入其中`<p:selectOneRadio>`以使其触发对支持 bean 的某种调用，但没有成功。我查看了以下 primefaces 示例： http: [//www.primefaces.org/showcase/ui/selectOneRadio.jsf](http://www.primefaces.org/showcase/ui/selectOneRadio.jsf)

有人能指出我解决这个问题的正确方向吗？

```
<p:selectOneRadio id="customRadio" layout="custom" value="advancedSettingsBean.radioValue">
    <f:selectItem itemValue="1" />
    <f:selectItem itemValue="2" />
    <f:selectItem itemValue="3" />
    <p:ajax />
</p:selectOneRadio>
<tr>
    <td valign="top">
        <p:radioButton id="CheckboxValidTimeCurrent" for="customRadio" itemIndex="0">
        </p:radioButton>
    </td>
    <td colspan="2">
        <h:outputText value="#{messages.search_advanced_validtimecurren}" /> 
        <br />
    </td>
</tr>
<tr>
    <td valign="top">
        <p:radioButton id="CheckboxvValidTimeDate" for="customRadio" itemIndex="1">
        </p:radioButton>
    </td>
    <td colspan="2">
        <h:outputText value="#{messages.search_advanced_validtimedate}" />
        <br /> 
        <p:calendar id="singledate" value="#{advancedSettingsBean.singleSearchDate}"
            datePattern="yyyy-MM-dd" direction="smart" jointPoint="auto"
            inputStyle="width:80px" style="width: 200px">
            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="UTC" />
        </p:calendar> Z 
        <br /> 
        <p:message showSummary="true" showDetail="false"
           id="singledateError" for="singledate" />
        <br />
    </td>
</tr>
<tr>
    <td valign="top">
        <p:radioButton id="CheckboxvValidTimeSpan" for="customRadio" itemIndex="2">
        </p:radioButton>
    </td>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:38:55.467

您应该将 selectoneradio 的值放在 el 表达式中：

```
value="#{advancedSettingsBean.radioValue}" 
```

# java - Flex Java BlazeDS 日期差异

> ID：16209286
> 
> 赞同：2
> 
> 时间：2013-04-25T07:56:03.083
> 
> 标签：java, apache-flex, date, blazeds, date-conversion

我正在尝试使用 BlazeDS 将日期从 flex 端发送到 java

flex 中的字段类型

```
private var _scheduleDate:Date; 
```

我已经用 初始化了它`new Date()`，如果提醒它，正确的日期和时间会显示在我的系统上。现在当对象被发送到java时。日期变了。

请注意我的 flex 应用程序和 java（JBoss 服务器在同一台机器上运行）。如果我在用 初始化的 java 端独立打印日期`new Date()`，它也会显示系统的正确日期。

**现在转换部分**：在 flex 上是

> 25/04/2013 12:30 PM（如警报所示）

当我打印这个过去的日期（在java端）时，它

> 25/04/2013 02:30 PM（时差 2 小时）

我已经阅读了许多博客等以获取解决方案，他们将其称为时区问题，但我不明白，如果客户端和服务器都在单个系统上，时区问题怎么会导致这个问题。

`Alert(flex)`并且`println(java)`随着系统的新`Date()`显示正确日期，那么时区问题是如何出现的。只有我能想到的是，BlazeDS 导致了这个问题。

在此链接中，他们为 blazeDS 引用了一些自定义编组，但它超出了我的想象， [自定义编组通过 BlazeDS 从 Java 到 Flex](https://stackoverflow.com/questions/4053003/custom-marshalling-from-java-to-flex-via-blazeds)

现在，对于这个问题，我只有一个**解决方案**，可以将日期`String`作为纯文本而不是`Date`对象发送，然后在 java 端转换`String`回`Date`对象。

有没有更好的解决方案，或者如果我的理解有任何问题，请有人指出。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:16:14.520

我建议以下解决方案。

首先，发送客户端时区偏移并将其存储为会话属性。

### 柔性

```
ro.setClientTimezoneOffset(-new Date().getTimezoneOffset() * 60 * 1000); 
```

### 爪哇

```
public void setClientTimezoneOffset(Long t) {
    FlexContext.getFlexSession().setAttribute("clientTimezoneOffset", t);
} 
```

创建我们自己的扩展端点类`flex.messaging.endpoints.AMFEndpoint`并将其指向通道定义：

### 服务-config.xml

```
<channel-definition id="my-amf"
            class="mx.messaging.channels.AMFChannel">
    <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amf" 
                class="com.package.AMFEndpoint"/>
</channel-definition> 
```

### AMFEndpoint.java

```
package com.package;

public class AMFEndpoint extends flex.messaging.endpoints.AMFEndpoint {

    @Override
    protected String getSerializerClassName() {
        return Serializer.class.getName();
    }

    @Override
    protected String getDeserializerClassName() {
        return Deserializer.class.getName();
    }
} 
```

扩展 amf 串行器、解串器、amf 输入/输出：

### 序列化器.java

```
package com.package;

import flex.messaging.io.MessageIOConstants;
import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.AmfMessageSerializer;
import flex.messaging.io.amf.AmfTrace;

import java.io.OutputStream;

public class Serializer extends AmfMessageSerializer {
    @Override
    public void initialize(SerializationContext context, OutputStream out, AmfTrace trace) {
        amfOut = new AMF0Output(context);
        amfOut.setOutputStream(out);
        amfOut.setAvmPlus(version >= MessageIOConstants.AMF3);

        debugTrace = trace;
        isDebug = trace != null;
        amfOut.setDebugTrace(debugTrace);
    }
} 
```

### 反序列化器.java

```
package com.package;

import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.AmfMessageDeserializer;
import flex.messaging.io.amf.AmfTrace;

import java.io.InputStream;

public class Deserializer extends AmfMessageDeserializer {
    @Override
    public void initialize(SerializationContext context, InputStream in, AmfTrace trace) {
        amfIn = new AMF0Input(context);
        amfIn.setInputStream(in);

        debugTrace = trace;
        isDebug = debugTrace != null;
        amfIn.setDebugTrace(debugTrace);
    }
} 
```

### AMF0Input.java

```
package com.package;

import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.Amf0Input;

import java.io.IOException;

public class AMF0Input extends Amf0Input {
    public AMF0Input(SerializationContext context) {
        super(context);
    }

    @Override
    public Object readObject() throws ClassNotFoundException, IOException {
        if (avmPlusInput == null) {
            avmPlusInput = new AMF3Input(context);
            avmPlusInput.setDebugTrace(trace);
            avmPlusInput.setInputStream(in);
        }
        return super.readObject();
    }
} 
```

### AMF0输出.java

```
package com.package;    

import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.Amf0Output;

public class AMF0Output extends Amf0Output {
    public AMF0Output(SerializationContext context) {
        super(context);
    }

    @Override
    protected void createAMF3Output()
    {
        avmPlusOutput = new AMF3Output(context);
        avmPlusOutput.setOutputStream(out);
        avmPlusOutput.setDebugTrace(trace);
    }
} 
```

最后，您扩展 amf 3 输入/输出类，其中日期被序列化和反序列化。您应用偏移差异。

### AMF3Input.java

```
package com.package;

import flex.messaging.FlexContext;
import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.Amf3Input;

import java.io.IOException;
import java.util.Date;

public class AMF3Input extends Amf3Input {
    @Override
    protected Date readDate() throws IOException {
        Date d = super.readDate();
        if (d != null) {
            Long clientOffset = (Long) FlexContext.getFlexSession().getAttribute("clientTimezoneOffset");
            Long serverOffset = (Long) (-d.getTimezoneOffset() * 60L * 1000);
            d.setTime(d.getTime() - (serverOffset - clientOffset));
        }
        return d;
    }

    public AMF3Input(SerializationContext context) {
        super(context);
    }
} 
```

### AMF3Output.java

```
package com.package;

import flex.messaging.FlexContext;
import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.Amf3Output;

import java.io.IOException;
import java.util.Date;

public class AMF3Output extends Amf3Output {
    public AMF3Output(SerializationContext context) {
        super(context);
    }

    @Override
    protected void writeAMFDate(Date d) throws IOException {
        if (d != null) {
            Long clientOffset = (Long) FlexContext.getFlexSession().getAttribute("clientTimezoneOffset");
            Long serverOffset = (Long) (-d.getTimezoneOffset() * 60L * 1000);
            d.setTime(d.getTime() + (serverOffset - clientOffset));
        }
        super.writeAMFDate(d);
    }
} 
```

现在，在 Flex 前端和 BlazeDS 后端之间传递的所有日期都将自动转换。**请注意，您实际上更改了 date**。

假设服务器时区为 GMT+6，客户端为 GMT+2 时区。您正在从数据库中检索日期。java 上的日期是`01.01.2013 10.00.00 GMT+6`，通常 flex 会得到`01.01.2013 06.00.00 GMT+2`。这是相同的日期，但等效的字符串不同。在我们的例子中 flex 会得到`01.01.2013 10.00.00 GMT+2`. 我们更改了日期。但是字符串等价物是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T21:08:21.163

另外创建另一个类以与以前的 Java 版本兼容：

```
package br.com.ultreia.flex;

import java.io.OutputStream;

import flex.messaging.io.MessageIOConstants;
import flex.messaging.io.SerializationContext;
import flex.messaging.io.amf.AmfTrace;

public class Java15AmfMessageSerializer extends flex.messaging.io.amf.Java15AmfMessageSerializer{
    @Override
    public void initialize(SerializationContext context, OutputStream out, AmfTrace trace) {
        amfOut = new AMF0Output(context);
        amfOut.setOutputStream(out);
        amfOut.setAvmPlus(version >= MessageIOConstants.AMF3);

        debugTrace = trace;
        isDebug = trace != null;
        amfOut.setDebugTrace(debugTrace);
    }
} 
```

我改变了**AMFEndpoint.java类**

```
public class AMFEndpoint extends flex.messaging.endpoints.AMFEndpoint {

    public AMFEndpoint(){
        super();
    }

    @Override
    protected String getSerializerClassName() {
        return Serializer.class.getName();
    }

    @Override
    protected String getSerializerJava15ClassName() {
        return Java15AmfMessageSerializer.class.getName();
    }

    @Override
    protected String getDeserializerClassName() {
        return Deserializer.class.getName();
    }
} 
```

# c# - 托管在 Windows 服务上的 WCF 服务中的 log4net

> ID：16209288
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:05.283
> 
> 标签：c#, .net, wcf, service, log4net

我有一个托管在 Windows 服务上的 WCF 服务。

我应该放在哪里`XmlConfigurator.Configure();`？

在其他应用程序中，我可以将它放在`Application_Start()`

我可以将它放在我的 Windows 服务的 OnStart() 方法中吗？然后我可以从我的 WCF 服务实例化记录器吗？

这就是我实例化记录器的方式：

```
private readonly ILog _log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType); 
```

这就是我在 Windows 服务中所拥有的

```
 protected override void OnStart(string[] args)
    {
        if (AgentServiceHost != null)
        {
            AgentServiceHost.Close();
        }

        AgentServiceHost = new ServiceHost(typeof(CustoemrService));
        AgentServiceHost.Open();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:58:00.807

只需将这段代码放入您的 AssemblyInfo.cs 文件中：

```
[assembly: log4net.Config.XmlConfigurator(Watch=true)] 
```

[http://logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)

# php - PHP中的Piglatin程序没有正则表达式？

> ID：16209290
> 
> 赞同：3
> 
> 时间：2013-04-25T07:56:09.677
> 
> 标签：php, arrays, string, foreach

基本上，我正在尝试用 PHP 编写一个非常基本的程序，它只接受用户输入并使用 PHP 将其转换为 Piglatin，而不使用正则表达式。到目前为止，这就是我的代码的样子，这很好：

```
<?php # script
$original = $_REQUEST['original'];
$array = explode(" ", $original);

$piglatin = "";
foreach($array as $word)
{
    $word = trim($word);
    $first = substr($word,0,1);
    $thsh = substr($word,1,2);
    $thshrest = substr($word,2, strlen($word)-2);
    $rest = substr($word,1,strlen($word)-1);

     if(trim($word)) 
    {
        $piglatin .= (strlen($word)==1)?$first." ":$rest.$first. "ay ";
    }
 }

echo $original ." becomes: ".$piglatin;
?> 
```

除非它不考虑特殊情况，例如单词以元音开头（在这种情况下，例如单词“igloo”应该打印为“iglooway”），或者如果它以“th”开头或“sh”（在这种情况下，例如，单词“thimble”应该打印为“imblethay”，取前两个字母并将它们带到最后而不是第一个。）

我已经开始从以“th”和“sh”开头的字符串创建变量的过程（参见 $thsh 和 $thshrest），但我真的很困惑我应该从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:31:53.817

怎么样：

```
foreach ($array as $word) {
    if (preg_match('/^[aeiou]/', $word)) {
        $word = preg_replace('/^([aeiou].+)$/', "$1way", $word);
    } else {
        $word = preg_replace('/^(th|sh)(.+)$/', "$2$1ay", $word);
    }
    $piglatin .= $word ." ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:30:11.043

一个正则表达式解决方案（可能不是你想要的，但我想展示它是多么容易）：

```
$pig_latin = preg_replace('#^([^aeiou]+)([aeiou]+)(.*)#', '$2$3$1ay', $original);
$pig_latin = preg_replace('#(^[aeiou].*)#', '$1way', $pig_latin); 
```

# sql - T-SQL：表中的逻辑唯一表行

> ID：16209291
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:10.330
> 
> 标签：sql, sql-server, tsql, select, unique

我有一个简单的表格，其中包含有关元素之间双向链接的信息。表如下所示：

```
link_id | link_side_a_element_id | link_side_b_element_id
---------------------------------------------------------
      1 |                    100 |                    200
      2 |                    200 |                    100
      3 |                    300 |                    400
      4 |                    400 |                    300 
```

我想要的只是选择元素之间的唯一链接，无论哪个元素是 sideA 或 sideB。例如，100 和 200 之间的链接与 200 和 100 之间的链接相同，查询应该只返回一条记录，例如：

```
link_side_a_element_id | link_side_b_element_id
-----------------------------------------------
                   100 |                    200
                   300 |                    400 
```

这对我来说就足够了。但是坚持写正确的选择DML......现在我用Java做，使用正确的hashCode（）和equals（）方法获取所有数据到Set。这目前对我有用，但想在 SQL Management Studio 中正确获取数据......如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:24:43.587

只需选择两个项目应该出现的*顺序*（例如，总是首先列出最低/最早的），然后`DISTINCT`对其运行：

```
SELECT DISTINCT
   CASE WHEN link_side_a_element_id < link_side_b_element_id THEN link_side_a_element_id
        ELSE link_side_b_element_id END as a,
   CASE WHEN link_side_a_element_id < link_side_b_element_id THEN link_side_b_element_id
        ELSE link_side_a_element_id END as b
FROM
    table 
```

# javascript - Chrome 和 Safari 读取 CSS 的方式不同？

> ID：16209293
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:14.837
> 
> 标签：javascript, html, css, alignment

从来没想过我会这么说，但谷歌浏览器相当烦人。

我试图在网页上有一个小画廊，在 Safari 上它显示 100% 正确，所有形状都很紧：

![Safari 显示网页](https://i.stack.imgur.com/ZoSjE.png)

然而，在谷歌浏览器上加载同一页面时，它非常偏离中心。

![Chrome 显示网页](https://i.stack.imgur.com/EvrTy.png)

但是在我的 iPhone 上使用谷歌浏览器，一切都很好。

这是 javascript 库的 CSS 表部分。

```
#slideshow {list-style:none; color:#fff}
#slideshow span {display:none}
#wrapper {width:725px; margin:50px auto; display:none}
#wrapper * {margin:0; padding:0}
#fullsize {position:relative; width:720px; height:540px; padding:2px; border:1px solid         #ccc; background:#000}
#information {position:absolute; bottom:0; width:720px; height:0; background:#000;   color:#fff; overflow:hidden; z-index:200; opacity:.7; filter:alpha(opacity=70)}
#information h3 {padding:4px 8px 3px; font-size:14px}
#information p {padding:0 8px 8px}
#image {width:720px}
#image img {position:absolute; z-index:25; width:auto}
.imgnav {position:absolute; width:25%; height:306px; cursor:pointer; z-index:150}
#imgprev {left:0; background:url(gallery/images/left.gif) left center no-repeat}
#imgnext {right:0; background:url(gallery/images/right.gif) right center no-repeat}
#imglink {position:absolute; height:306px; width:100%; z-index:100; opacity:.4;   filter:alpha(opacity=40)}
.linkhover {background:url(images/link.gif) center center no-repeat}
#thumbnails {margin-top:15px}
#slideleft {float:left; width:20px; height:81px; background:url(gallery/images/scroll-  left.gif) center center no-repeat; background-color:#222}
#slideleft:hover {background-color:#333}
#slideright {float:right; width:20px; height:81px; background:#222     url(gallery/images/scroll-right.gif) center center no-repeat}
#slideright:hover {background-color:#333}
#slidearea {float:left; position:relative; width:675px; margin-left:5px; height:81px;  overflow:hidden}
#slider {position:absolute; left:0; height:81px}
#slider img {cursor:pointer; border:1px solid #666; padding:2px} 
```

我在 iMac 上查看这个网站，但在 Windows 上使用 Firefox 时它也偏离了中心，所以我可以在 CSS 表中重新格式化以跨浏览器工作吗？

先谢谢了。卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:28:54.507

我建议使用[reset.css](http://meyerweb.com/eric/tools/css/reset/)样式表让浏览器以同样的方式看到它。

在链接到您自己的样式表之前先链接到该样式表，这可能会进行一些更改，但是您可以尝试使用它，然后它应该在所有浏览器中看起来都一样。

还有一个好方法是检查浏览器是否支持您正在使用的 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:40:32.997

谢谢大家的回复。我会发布实时链接，但它还没有在本地发布。

但是我已经解决了这个问题。

对于任何看到这一点并需要帮助的人来说，这里是这一行：

```
#image img {position:absolute; z-index:25; width:auto} 
```

添加**左：0; 顶部：0；**to line 告诉 img 排队到父 div 的角落

所以现在这条线

```
#image img {position:absolute; left:0; top:0; z-index:25; width:auto} 
```

再次感谢大家。

# mysql - 按高级方式分组

> ID：16209295
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:23.900
> 
> 标签：mysql, sql, group-by

在尝试进行查询以将消息分组到对话中时，我遇到了一些问题。这样具有相同发送者和接收者的消息将在同一个会话中。还会有小组对话，这意味着两个人和两个人四个人一起交谈。

我的数据库表如下所示：

桌子：`messages`

```
+----+------+----+---------+---------+
| id | from | to | group_1 | group_2 |
+----+------+----+---------+---------+
| 1  | 1    | 2  | 0       | 0       |
| 2  | 2    | 1  | 0       | 0       |
| 3  | 1    | 0  | 1       | 2       |
| 4  | 2    | 0  | 2       | 1       |
| 5  | 3    | 0  | 1       | 2       |
| 6  | 4    | 0  | 2       | 1       |
| 7  | 4    | 1  | 0       | 0       |
| 8  | 1    | 4  | 0       | 0       |
+----+------+----+---------+---------+ 
```

我已经尝试过以下方法，但后来我把所有的消息都拿出来了，所以我需要分组，让它们粘在一行而不是多行用于同一个对话。

选择 * 从`messages`

所以基本上需要做的是按以下方式分组：
- 分组行对话，其中`from`和`to`与其他行相等，而`group_1`和`group_2`= 0。但它也应该将那些`to`与其他行相等的行分组`from`，以及其他绕道而行，但仍然是 while `group_1`and `group_2`= 0。（如上表中的前 2 行）
- 分组行对话 where `group_1`and `group_2`is equal with other rows, while `to`= 0, and as well `group_1`is equal with other rows `group_2`, and other绕道而行，但仍然是 while `to`= 0。（如 id 为 3 和 4 的行）

因此，基本上它应该将所有群组相互交谈以及用户相互交谈的消息分组。

编辑

# 更好地解释`group_1`和`group_2`

`group_1`并且`group_2`是为了让我可以将用户放入一个组中，并使一个组能够与另一个组交谈。

因此，他们不使用`to`and `from`，而是使用`group_1`and `group_2`。`from`它应该像用户对话（在哪里和`to`被定义）一样对组对话进行分组。

你可以看到一行是一个组，当`to = 0`. 当 时`to != 0`，则它不是一个群。

它应该 GROUP`group_1`和`group_2`，就像用户一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:08:20.327

**这是我的建议；**

```
SELECT * FROM messages m GROUP BY m._from HAVING (m._to!=0 AND m.group_1=0 AND m.group_2=0)

SELECT * FROM messages m WHERE m.group_1=m._from OR m.group_2=m._to; 
```

我也很难理解 group_1 和 group_2 的关系/目的。

单一查询（由提问者请求）

```
SELECT * FROM messages m WHERE m.group_1=m._from OR m.group_2=m._to OR m.group_1=0 AND m.group_2=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:08:42.803

您正在寻找的是`GROUP BY <field> HAVING <condition>`. 您的“需要做什么”有点混乱， group_1 和 group_2 也令人困惑。您正在寻找的东西可能是在以下方向：

```
SELECT   *
FROM     messages m
GROUP BY m.from HAVING (
    m.from = group_1 AND
    m.to   = group_2
) 
```

我希望这将帮助您朝着正确的方向前进。

# c - C - 有没有办法使用位检查来检查一个数字是否等于 1？

> ID：16209296
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:31.603
> 
> 标签：c, binary, bit-manipulation, bit

这只是一个有趣的问题——我不确定它实际上是如何适用的。无论如何 - 是否可以使用位检查来查看数字是否等于 1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:01:05.200

我不确定问题到底是什么，但您可以使用`!(x ^ 1)`或`x == 1`或`!(x-1)`或`(x & 1) && !(x & ~1)`或许多其他方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:09:20.597

我认为 if(1==number) 就足够了。在内部进行了一些明智的比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:03:38.360

我不太了解位检查。如果您的意思是逐位检查，则可以循环执行。或者您可以使用以下代码：

```
int equalsOne(int a) {
    return (a && (a == !!a));
} 
```

运算符将`!`返回`0`非零值 else `1`。return 语句中的前导`a`消除了 where 的情况`a == 0`。

# javascript - 代码中的“2e4”是什么意思

> ID：16209299
> 
> 赞同：9
> 
> 时间：2013-04-25T07:56:44.883
> 
> 标签：javascript, raphael

此示例[http://raphaeljs.com/gear.html](http://raphaeljs.com/gear.html) 具有以下代码：

```
function run() {
                e.animate({along: 1}, 2e4, function () {
                    e.attr({along: 0});
                    setTimeout(run);
                });
            } 
```

这个例子中的“2e4”是什么意思，它是如何工作的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T07:59:07.287

这意味着 2*10^4
并在您的控制台`2e4`中尝试输出将是`20000`

这`e`是[科学](http://en.wikipedia.org/wiki/Scientific_notation)记数法

该代码相当于

```
...
e.animate({along: 1}, 20000, function () { .... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T07:58:21.633

`2e4`是 的[科学计数法](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)，`2 * 10^4`因此与 20000 具有相同的值。

# sql - SQL - 选择加入和组

> ID：16209302
> 
> 赞同：0
> 
> 时间：2013-04-25T07:56:49.217
> 
> 标签：sql, oracle, join, group-by, concatenation

通过连接两个表的 SELECT 语句的结果如下 -

```
Col 1   |  Col 2    |  Col 3   |  Col 4
 ----------------------------------
sample11| sample12  | sample13 | sample14
sample11| sample12  | sample23 | sample24
sample11| sample12  | sample23 | sample34
sample11| sample12  | sample43 | sample44 
```

如何对第 4 列中的第 2 行和第 3 行的值进行分组和连接（基于第 3 列中的不同值），以使结果如下 -

```
Col 1   |  Col 2    |  Col 3   |  Col 4
 ----------------------------------
sample11| sample12  | sample13 | sample14
sample11| sample12  | sample23 | sample24, sample34
sample11| sample12  | sample43 | sample44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:06:20.860

如果您使用的是 oracle 11g

```
SELECT  "Col 1", "Col 2", "Col 3", 
        LISTAGG("Col 4", ',') WITHIN GROUP (ORDER BY "Col 1") AS "Col 4"
FROM    TableName
GROUP   BY "Col 1", "Col 2", "Col 3" 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/084b6/4)
*   [列表（）](http://www.oracle-developer.net/display.php?id=515)

# objective-c - 文件浏览器视图的库或 API？

> ID：16209303
> 
> 赞同：2
> 
> 时间：2013-04-25T07:56:50.820
> 
> 标签：objective-c, xcode, macos

我想在我的应用程序中实现文件浏览器视图，以便用户可以使用类似于 XCode、Text Wrangler 和其他一些程序中的浏览器的侧面板打开文件。

![](https://i.stack.imgur.com/ilI24.png)

![](https://i.stack.imgur.com/umiEl.png)

![](https://i.stack.imgur.com/86Dox.png)

在我从头开始实现另一个浏览器之前，有谁知道是否有现有的库或 API 已经这样做了？

谷歌并没有出现太多，大多数搜索都指向我的[NSOpenPanel](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOpenPanel_Class/Reference/Reference.html)，我相信它不会做我想做的事。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:10:39.190

用于显示分层列表的 Cocoa 类称为[NSOutlineView](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)。
大纲视图提供了几个配置选项来调整外观。可以通过实现[数据源协议](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSOutlineViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSOutlineViewDataSource)或通过 Cocoa 绑定来提供内容。

Apple 有一些在线示例代码可以帮助您入门（它是一个文件浏览器 - 所以也许您可以使用该示例的大部分内容）： [https ://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/介绍.html](https://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/Intro.html)

# css - 这是否可以在不通过 css 使用位置属性的情况下实现绝对位置功能？

> ID：16209305
> 
> 赞同：7
> 
> 时间：2013-04-25T07:56:55.350
> 
> 标签：css, outlook, position, absolute

我正在创建 Outlook 电子邮件。我创建了一个电子邮件系统。我检查了所有电子邮件巨头，如 Gmail、雅虎等，它运行良好，但突然当我在 Outlook 中看到相同的电子邮件时，令人震惊的是 Outlook 不支持位置属性。

现在，我想要实现相同的功能，我在谷歌上搜索过，但除了这个平台提问之外，没有找到解决问题的好来源。请帮忙！

提前致谢。

注意：我不想通过将一个 div 放在另一个 div 中来做到这一点。这根本不适合我的应用程序，我希望事物相对于角（宽度/高度）定位。

![在此处输入图像描述](https://i.stack.imgur.com/PLHOg.jpg)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T09:20:45.377

Outlook 不支持`position:`，所以也许使用基于表格的解决方案？

查看这些链接；

[http://msdn.microsoft.com/en-us/library/aa338201.aspx](http://msdn.microsoft.com/en-us/library/aa338201.aspx)

[http://www.campaignmonitor.com/css/#css-com_1](http://www.campaignmonitor.com/css/#css-com_1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:27:44.993

无论您选择自己编写 HTML 电子邮件（我的个人偏好）还是使用现有模板，在创建 HTML 电子邮件时都需要牢记两个基本概念：

*   使用 HTML 表格来控制设计布局和一些演示。您可能习惯于为您的网页使用纯 CSS 布局，但这种方法在电子邮件环境中是行不通的。

*   使用内联 CSS 来控制电子邮件中的其他演示元素，例如背景颜色和字体。

在 Outlook 方面，牢记 css 1.0 标准将对您有很大帮助。[有关其他一些详细信息，请单击此处。](http://webdesign.about.com/od/intermediatetutorials/a/html-newsletters.htm)玩得开心！

# sql - SQL Server 真的评估 case 表达式中的每个“then”子句吗？

> ID：16209307
> 
> 赞同：2
> 
> 时间：2013-04-25T07:57:01.603
> 
> 标签：sql, sql-server

我正在使用 99% 数字的旧系统中的 ItemNumber 字段，但有一些记录包含字母。这些数字都用前导零填充，所以我想我会将它们转换为 bigint 来解决这个问题，但是当它到达带有字母的记录时，它当然会引发错误。

我认为以下 case 语句会起作用，但它仍然会引发错误。如果 isnumeric(itemnumber) = 1 条件不成立，为什么 SQL Server 还要评估演员表？

```
select case when isnumeric(itemnumber) = 1 
           then cast(itemnumber as bigint) 
           else itemnumber 
       end ItemNumber
from items 
```

最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:07:20.353

如果它是数字，您的表达式会尝试将`VARCHAR`值转换为 a `BIGINT`，如果不是，则保持该值不变。

由于您在`CASE`语句中混合了数据类型，因此`SQL Server`尝试将它们全部转换为`BIGINT`但在非数字值上失败。

如果您只想省略非数字值，请删除该`ELSE`子句：

```
SELECT  CASE ISNUMERIC(itemnumber)
        WHEN 1 THEN
                CAST(itemnumber AS BIGINT) 
        END
FROM    items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:03:04.357

也许是因为：

> ISNUMERIC 对某些不是数字的字符（例如加号 (+)、减号 (-)）和有效的货币符号（例如美元符号 ($)）返回 1。有关货币符号的完整列表，请参阅 money 和 smallmoney (Transact-SQL)。

[http://msdn.microsoft.com/en-us/library/ms186272.aspx](http://msdn.microsoft.com/en-us/library/ms186272.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:11:15.020

问题是您仍在混合您的类型：

```
select case when isnumeric(itemnumber) = 1 
           then cast(itemnumber as bigint) --bigint
           else itemnumber --varchar or whatever 
       end ItemNumber --????
from items 
```

你需要两列

```
select case when isnumeric(itemnumber) = 1 
           then cast(itemnumber as bigint) --bigint
           else -1 
       end NumericItemNumber 
from items

select case when isnumeric(itemnumber) = 1 
           then ''
           else itemnumber
       end StringItemNumber 
from items 
```

然后你需要构建一个同时接受 int 和 varchars 的查询

# java - 如何扩展 Eclipse 源格式化程序的边距？

> ID：16209313
> 
> 赞同：3
> 
> 时间：2013-04-25T07:57:33.257
> 
> 标签：java, eclipse

每当我在 Eclipse 中使用**Source > Format**时，它都会从第 80 行开始换行。但是我的程序有很多长行，我想将它的容差扩展到 120。我尝试寻找一个我可以的设置改变这个，但找不到。这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T08:00:28.613

您可以在**Preferences** -> **Java** -> **Code Style** -> **Formatter**下找到它。

单击当前活动配置文件旁边的“**编辑**”按钮，转到“**换行**”选项卡并更改“**最大线宽**”设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:01:18.863

转到 Window/Preferences 并打开 Java/Code Style Formatter。然后编辑配置文件。您可以在“换行”选项卡上更改边距（“最大线宽”）。

# wicket - Wicket 应用程序中的预加载器

> ID：16209314
> 
> 赞同：0
> 
> 时间：2013-04-25T07:57:34.133
> 
> 标签：wicket, ajax-request

在搜索事件的检票口应用程序中，需要几秒钟甚至几分钟的时间才能将结果显示为长数据。我想在从数据库中获取数据时显示一个预加载器，以让用户在单击 search 时知道正在发生的事情。我对 wicket 应用程序很陌生，不太了解这些东西，但我发现 AjaxLazyPreloader 但正如我所说，我想在调用搜索方法时显示预加载器......我正在分享 SearchSubmit 方法......

```
private void processSearchSubmit(AjaxRequestTarget ajaxRequestTarget) {

        ajaxRequestTarget.add(tableHolder);
        ajaxRequestTarget.add(productTableHolder);
        if (zipcode == null) {
            ajaxRequestTarget
                    .appendJavaScript("$().toastmessage('showWarningToast','Please enter a zipcode')");
        } else if (!ZipCodeValidator.isValid(zipcode)) {
            useZones = true;
            currentZone = zipcode;
            ajaxRequestTarget.add(tableHolder);
            if (searchProduct != null) {
                ajaxRequestTarget.add(productTableHolder);
                if (lstProduct.getList().size() == 0) {
                    ajaxRequestTarget
                            .appendJavaScript("$().toastmessage('showErrorToast','Sorry! This product is not avialable .')");
                }
            }

        } else if (lstMerchants.getList().size() == 0) {
            ajaxRequestTarget
                    .appendJavaScript("$().toastmessage('showWarningToast','Sorry! There are currently no services')");
        }

        if (ZipCodeValidator.isValid(zipcode)) {
            ajaxRequestTarget.add(tableHolder);
            if (searchProduct != null && !searchProduct.equals("")) {
                ajaxRequestTarget.add(productTableHolder);
                if (lstProduct.getList().size() == 0) {
                    ajaxRequestTarget
                            .appendJavaScript("$().toastmessage('showErrorToast','Sorry! This product is not avialable in this zip code or zone.')");
                }
            }
        }
    } 
```

我想当这个方法被调用直到它获取结果数据的时候，它应该显示一个预加载器或微调器。任何人都可以建议如何做到这一点.??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:13:14.967

使用 AjaxLazyLoadPanel 或 IndicatingAjaxLink/-Button。两者都可以在正常调用或 Ajax 调用中正常工作。

要使用 AjaxLazyLoadPanel：创建 AjaxLazyLoadPanel 的子类，它加载您要显示的面板并将其添加到 AjaxRequest。

IndicatingAjaxLinks 仅在处理请求时显示一个微调器，并且可以在您当前的应用程序中直接使用。使用它而不是您现在用于表单提交的按钮/链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:34:18.610

如果您需要通过单击按钮调用长执行方法，请检查[此](https://stackoverflow.com/questions/5582084/is-there-an-activity-indicator-in-wicket)答案。您也可以使用 AjaxLazyLoadPanel，查看[这个演示](http://www.wicket-library.com/wicket-examples/ajax/lazy-loading)（它是[Java 部分](http://www.wicket-library.com/wicket-examples/ajax/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?7&SourcesPage_class=org.apache.wicket.examples.ajax.builtin.LazyLoadingPage&source=LazyLoadingPage.java)和[html 部分](http://www.wicket-library.com/wicket-examples/ajax/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?6&SourcesPage_class=org.apache.wicket.examples.ajax.builtin.LazyLoadingPage&source=LazyLoadingPage.html)）

# jquery - 使用 jquery 将 Json 字符串解析为 html div

> ID：16209318
> 
> 赞同：3
> 
> 时间：2013-04-25T07:57:43.367
> 
> 标签：jquery, json

我有这样的json字符串

`{"common_search":{"strBusinessName":"Sun Shine Vision","strAddress":"Amulia St Madhava Pharmacy Jn","intPhone":""}, "cache_table":{"Details":"Speedtrax,Ample's Bldg Off Banerji Rd., Amulia St,"}}`

我必须将这些数据设置为我的 html div，例如：我想将 common_search 数据设置为

```
$("#common_serachdiv").html('strBusinessName') 
```

和 cache_table 数据`$("#cache_table").html('Details')`，或者我必须遍历 Json 中的每个数组。这该怎么做 ，

提前致谢 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T08:02:20.050

您需要`parse json`先使用它。

```
var obj = $.parseJSON('{"common_search":{"strBusinessName":"Sun Shine Vision","strAddress":"Amulia St Madhava Pharmacy Jn","intPhone":""}, "cache_table":{"Details":"Speedtrax,Ample\'s Bldg Off Banerji Rd., Amulia St,"}}');
$("#common_serachdiv").html(obj.common_search.strBusinessName);
$("#cache_table").html(obj.cache_table.Details); 
```

**[小提琴演示。](http://jsfiddle.net/nFUVs/)**

# javascript - 优化嵌套循环以使用 jQuery 创建 HTML 元素

> ID：16209320
> 
> 赞同：0
> 
> 时间：2013-04-25T07:57:53.337
> 
> 标签：javascript, jquery, loops, optimization

我正在使用 HTML / Javascript 开发屏幕键盘。键盘是在运行时生成的。

我正在使用 JSON 数据结构来存储不同的键盘布局、语言设置等。

```
var initParams = {
    keyboardLanguage: "de",
    keyboardLayout: {
        de: {
            row1: ["Q","W","E","R","T","Z","U","I","O","P"],
            row2: ["A","S","D","F","G","H","J","K","L"],
            row3: ["Y","X","C","V","B","N","M"]
        },
        en: {
            row1: ["Q","W","E","R","T","Y","U","I","O","P"],
            row2: ["A","S","D","F","G","H","J","K","L"],
            row3: ["Z","X","C","V","B","N","M"]
        }       
    }
} 
```

这是完成这项工作的功能：

```
function CreateKeyHtmlElements(){

    var divElement = document.createElement("div");

    for(var obj in initParams.keyboardLayout[initParams.keyboardLanguage]){

        var keyRow = divElement.cloneNode(false);
        keyRow.id = "key" + obj;
        keyRow.className = "keyboard-key-row";

        for(var i = 0, l = initParams.keyboardLayout[initParams.keyboardLanguage][obj].length; i < l; i +=1){

            var key = divElement.cloneNode(false);
            key.id = "key-" + initParams.keyboardLayout[initParams.keyboardLanguage][obj][i];
            key.className = "keyboard-key";

            key.textContent = initParams.keyboardLayout[initParams.keyboardLanguage][obj][i];

            keyRow.appendChild(key);

            $(key).appendTo(keyRow);

        }

        $(keyRow).appendTo($("#keyboard-key-box"));

    }

} 
```

是否有任何有效的方法来优化这个功能，特别是循环，使用 jQuery。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:16:43.290

实际上有一个特殊的 HTML 元素用于聚合 html，而不是进行实际的 dom 操作

```
var fragment = document.createDocumentFragment(); 
```

但只要基准测试没有显示片段方法和通过 innerHTML （[证明](http://jsperf.com/another-documentfragment-vs-string-concat-innerhtml-tes)）插入刺痛之间的实际差异，您可以执行以下操作：

```
var result = '<div class="keyboard">';    
$(initParams.keyboardLayout[initParams.keyboardLanguage]).each(function(i,obj){
       result += '<div class="row">';
       result += '<div class="key">'+obj.join('</div class="key"><div>')+'</div>';
       result += '</div>';
    })
$(".target").append(result); 
```

这不会让您有机会添加 ID，但这实际上并不重要，只是在绑定使用`$(el).index()`获取列索引和`$(el).parent().index()`获取行时

# c# - 将 Json 作为流传递给 WCF 方法

> ID：16209321
> 
> 赞同：0
> 
> 时间：2013-04-25T07:57:55.000
> 
> 标签：c#, asp.net, wcf

我使用 WCF REST 服务模板 40(CS) 创建了一个网站，它具有如下服务方法：

```
[WebInvoke(UriTemplate = "CTNotification", Method = "POST", ResponseFormat = WebMessageFormat.Json,
          RequestFormat = WebMessageFormat.Json)]      

public string CTNotification(Stream contents) 
```

如何将 json 传递给它？我无法将服务参数设为字符串，因为客户端会将 json 作为流发送。如何使用 C# 对此服务方法进行后调用，内容类型 = application/json

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:26:50.073

我不确定您是同步执行此操作还是同步执行此操作，但这是传递参数的方法。实施可能会根据客户的需求而有所不同

```
 HttpWebRequest httpWReq =  (HttpWebRequest)WebRequest.Create(ServiceAddress + "CTNotification/");

                //parameters
                byte[] data = Encoding.UTF8.GetBytes(jsonString);

                httpWReq.Method = "POST";
                httpWReq.ContentType = "application/x-www-form-urlencoded"; 
                httpWReq.ContentLength = data.Length;
                httpWReq.Timeout = 1000;

                using (Stream newStream = httpWReq.GetRequestStream())
                {
                    newStream.Write(data, 0, data.Length);
                } 
```

# java - JTable中图像的html问题

> ID：16209322
> 
> 赞同：0
> 
> 时间：2013-04-25T07:57:58.190
> 
> 标签：java, html, swing, file-io, jtable

我扩展了 AbstractTableModel 以创建自定义 TableModel。这样做的原因是将 hashmap 绑定到 JTable。

在我的 TableModel 中，在其中一行我返回 html 代码，如下所示：

```
@Override
        public Object getValueAt(int rowIndex, int columnIndex) {

             switch (columnIndex) {
             case 0:    
                    String sTest = "<div style=\"margin-left:100px;\"><img src='" + new ImageIcon(Wds.class.getResource("/resources/video.png"))+ "'</div>";
                return "<html>" + sTest + sTest + "hello" + "</html>";              

             default:
                    throw new IndexOutOfBoundsException();
             }    
        } 
```

我现在遇到的问题是 Java 对 html 的支持似乎很糟糕。

我需要使用“margin-left，margin-top”等来控制图像。问题是，如果我使用`"<div style>"`它会导致换行，所以之后的所有内容都将是下面的一行。如果我使用`"<span style>"`它不会导致换行，但边距不起作用`"<span style>"`（它应该）；

我也尝试过创建自定义 TableCellRenderer 并在那里添加 .css 值并使用`"<div class>"`，但换行符的问题仍然存在。

通常`"display:inline"`in`"<div style>"`消除了换行符并且`margin-left`通常与 一起使用`"<span style>"`，但似乎 Java 对 HTML 的支持很差。

有人对我如何解决这个问题有任何建议吗？

这是完整的 SSCCE 代码：

```
private Map<String, String> list = new LinkedHashMap<String,String>();

    class MyTableModel extends AbstractTableModel {

        private String[] columnNames = {"Column1"}; 

        public void addElement(String sElement, String sElement2) {         

            list.put(sElement, sElement2);
            fireTableRowsInserted(list.size(), list.size());

        }

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return list.size();
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {

             switch (columnIndex) {
             case 1:    
                    String sTest = "<div style=\"margin-left:100px;\"><img src='" + new ImageIcon(Wds.class.getResource("/resources/video.png"))+ "'</div>";
                    return "<html>" + sTest + sTest + "hello" + "</html>";

             default:
                    throw new IndexOutOfBoundsException();
             }    
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:52:02.560

[例如，您应该在](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)[自定义](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer) `TableCellRenderer`中处理对齐。例子显示了一个，但原理是一样的。`ListCellRenderer`

附录：*我需要添加几个图标并将它们放在单元格中的不同位置。*

您的实现`TableCellRenderer`可以返回任何想要`Component`的——甚至是`JPanel`带有自己布局的 a，例如[此处](https://stackoverflow.com/a/11179669/230513)`StatusPanel`所示。您可能还需要自定义.`TableCellEditor`

# entity-framework - EF 中的动态 linq 查询

> ID：16209327
> 
> 赞同：0
> 
> 时间：2013-04-25T07:58:05.573
> 
> 标签：entity-framework, entity-framework-4, linq-to-entities

我在 EF4 中使用动态 LINQ 查询。

下面的代码抛出错误：**'New' 无法解析为有效的类型或函数。**

```
var x = ent.OM_COMPANY
    .Where(qry)
    .OrderBy("it.CM_CODE")
    .Select("New(it.CM_CODE, it.CM_NAME)"); 
```

我究竟做错了什么？

下面的代码执行没有任何错误。

```
var x = from cmp in ent.OM_COMPANY 
        where (qry) 
        orderby cmp.CM_CODE  
        select new { cmp.CM_CODE, cmp.CM_NAME }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-29T18:04:31.960

我什至不知道你是如何编译第一个代码块的。两者都`OrderBy`取`Select`lambdas 而不是字符串。它应该写成：

```
var x = ent.OM_COMPANY
    .Where(qry)
    .OrderBy(c => c.CM_CODE)
    .Select(c => c.CM_CODE, c.CM_NAME); 
```

# android - 我应该膨胀布局还是以编程方式创建它？

> ID：16209340
> 
> 赞同：14
> 
> 时间：2013-04-25T07:58:30.637
> 
> 标签：android, coding-style

关于Android编程，

这个问题困扰了我一段时间，我应该尽可能地膨胀布局还是应该尽可能以编程方式创建布局？

如果我们把“方便”放在一边，哪个更好？快点？更安全？非常感谢任何具体的投入。

问候，

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-25T12:13:10.767

> 我明白了，所以膨胀是 Google/Android 推荐的传统布局方式

是的。

> 并且它不会大大降低应用程序的运行时间

*与在 Java 中自己做同样的工作相比，*它并没有减慢应用程序的运行时间。

> 因为我在 Android 开发者网站的某个地方读到，这是一个缓慢的过程，在诉诸膨胀之前，应该尽可能地“重用”视图。

在`AdapterView`您最有可能阅读过该建议的地方回收视图很重要，因为*无论这些视图是如何创建的，回收视图都比**创建*视图快。同样，比较不是在通货膨胀与滚动您自己的 Java 代码之间，而是在通货膨胀与*不创建新视图*之间。

 **> 我应该尽可能地扩大布局还是应该尽可能以编程方式创建布局？

请充气。

> 哪个更好？

通货膨胀考虑了资源集（例如，基于屏幕大小和方向的不同布局）。通货膨胀考虑了样式的覆盖。通货膨胀与工具配合得更好。

> 快点？

可能在某些情况下，硬编码的 Java 比通货膨胀更快，就像在某些情况下硬编码的汇编语言比 C 更快一样。在大多数情况下，速度差异并不重要到足以保证麻烦。

> 更安全？

在这种情况下，我不知道您认为“安全”是什么意思。**

# ruby - Ruby：类接受一个块？

> ID：16209343
> 
> 赞同：5
> 
> 时间：2013-04-25T07:58:37.910
> 
> 标签：ruby

我注意到 Ruby 中的 CSV 类有一些快捷接口（参见[http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)）：

```
CSV             { |csv_out| csv_out << %w{my data here} }  # to $stdout
CSV(csv = "")   { |csv_str| csv_str << %w{my data here} }  # to a String
CSV($stderr)    { |csv_err| csv_err << %w{my data here} }  # to $stderr
CSV($stdin)     { |csv_in|  csv_in.each { |row| p row } }  # from $stdin 
```

有没有办法为我自己的课程做到这一点？我正在实现一个 DSL，这将使代码更加简洁。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:03:26.733

它不是一门课。它是一个定义在上面的方法`Object`（虽然也有一个同名的类`CSV`）。您链接的文档具有误导性。[这](http://www.ruby-doc.org/stdlib-2.0/libdoc/csv/rdoc/Object.html#method-i-CSV)更好地解释了它。

你不能用一个模块来做那样的事情，但你可以定义一个接受一个块的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:15:25.933

您展示的示例不是没有方法调用的类。相反，它是在没有类的情况下调用的方法。**sawa**已经[解释](https://stackoverflow.com/a/16209433/901944)了它是如何工作的。

Ruby 2.0 引入了[Refinements](http://blog.headius.com/2012/11/refining-ruby.html)。

您可以改进`Object`以添加自定义方法并像您问题的示例中那样使用它。

如果你卡在 Ruby 1.9 上，你可以使用猴子补丁而不是精炼。

但是您应该三思而后行，因为这可能会使您的代码更加意大利面条式、程序化并且更少面向对象。

# php - 第一个数据支付网关集成soap故障错误

> ID：16209349
> 
> 赞同：2
> 
> 时间：2013-04-25T07:59:10.327
> 
> 标签：php, soap, payment-gateway, hmac, firstdata

您好我正在尝试使用 php 在soap请求方法中集成第一个数据支付网关集成。我已经从第一个数据中下载了工作示例代码，但是当我尝试使用他们提供的示例代码提交付款时，我抛出了一个错误。

整个php代码是

```
<?php

class SoapClientHMAC extends SoapClient {
  public function __doRequest($request, $location, $action, $version, $one_way = NULL) {
    global $context;
    $hmackey = "***********************"; // <-- Insert your HMAC key here
    $keyid = "*****"; // <-- Insert the Key ID here
    $hashtime = date("c");
    $hashstr = "POST\ntext/xml; charset=utf-8\n" . sha1($request) . "\n" . $hashtime . "\n" . parse_url($location,PHP_URL_PATH);
    $authstr = base64_encode(hash_hmac("sha1",$hashstr,$hmackey,TRUE));
    if (version_compare(PHP_VERSION, '5.3.11') == -1) {
        ini_set("user_agent", "PHP-SOAP/" . PHP_VERSION . "\r\nAuthorization: GGE4_API " . $keyid . ":" . $authstr . "\r\nx-gge4-date: " . $hashtime . "\r\nx-gge4-content-sha1: " . sha1($request));
    } else {
        stream_context_set_option($context,array("http" => array("header" => "authorization: GGE4_API " . $keyid . ":" . $authstr . "\r\nx-gge4-date: " . $hashtime . "\r\nx-gge4-content-sha1: " . sha1($request))));
    }
    return parent::__doRequest($request, $location, $action, $version, $one_way);
  }

  public function SoapClientHMAC($wsdl, $options = NULL) {
    global $context;
    $context = stream_context_create();
    $options['stream_context'] = $context;
    return parent::SoapClient($wsdl, $options);
  }
}

$trxnProperties = array(
  "User_Name"=>"",
  "Secure_AuthResult"=>"",
  "Ecommerce_Flag"=>"",
  "XID"=>"",
  "ExactID"=>$_POST["ddlPOS_ExactID"],                  //Payment Gateway
  "CAVV"=>"",
  "Password"=>"********",                                   //Gateway Password
  "CAVV_Algorithm"=>"",
  "Transaction_Type"=>$_POST["ddlPOS_Transaction_Type"],//Transaction Code I.E. Purchase="00" Pre-Authorization="01" etc.
  "Reference_No"=>$_POST["tbPOS_Reference_No"],
  "Customer_Ref"=>$_POST["tbPOS_Customer_Ref"],
  "Reference_3"=>$_POST["tbPOS_Reference_3"],
  "Client_IP"=>"",                                      //This value is only used for fraud investigation.
  "Client_Email"=>$_POST["tb_Client_Email"],            //This value is only used for fraud investigation.
  "Language"=>$_POST["ddlPOS_Language"],                //English="en" French="fr"
  "Card_Number"=>$_POST["tbPOS_Card_Number"],           //For Testing, Use Test#s VISA="4111111111111111" MasterCard="5500000000000004" etc.
  "Expiry_Date"=>$_POST["ddlPOS_Expiry_Date_Month"] . $_POST["ddlPOS_Expiry_Date_Year"],//This value should be in the format MM/YY.
  "CardHoldersName"=>$_POST["tbPOS_CardHoldersName"],
  "Track1"=>"",
  "Track2"=>"",
  "Authorization_Num"=>$_POST["tbPOS_Authorization_Num"],
  "Transaction_Tag"=>$_POST["tbPOS_Transaction_Tag"],
  "DollarAmount"=>$_POST["tbPOS_DollarAmount"],
  "VerificationStr1"=>$_POST["tbPOS_VerificationStr1"],
  "VerificationStr2"=>"",
  "CVD_Presence_Ind"=>"",
  "Secure_AuthRequired"=>"",
  "Currency"=>"",
  "PartialRedemption"=>"",

  // Level 2 fields 
  "ZipCode"=>$_POST["tbPOS_ZipCode"],
  "Tax1Amount"=>$_POST["tbPOS_Tax1Amount"],
  "Tax1Number"=>$_POST["tbPOS_Tax1Number"],
  "Tax2Amount"=>$_POST["tbPOS_Tax2Amount"],
  "Tax2Number"=>$_POST["tbPOS_Tax2Number"],

  //"SurchargeAmount"=>$_POST["tbPOS_SurchargeAmount"], //Used for debit transactions only
  //"PAN"=>$_POST["tbPOS_PAN"]                          //Used for debit transactions only
  );

$client = new SoapClientHMAC("https://api.demo.globalgatewaye4.firstdata.com/transaction/v12/wsdl");
$trxnResult = $client->SendAndCommit($trxnProperties);

if(@$client->fault){
    // there was a fault, inform
    print "<B>FAULT:  Code: {$client->faultcode} <BR />";
    print "String: {$client->faultstring} </B>";
    $trxnResult["CTR"] = "There was an error while processing. No TRANSACTION DATA IN CTR!";
}
//Uncomment the following commented code to display the full results.

echo "<H3><U>Transaction Properties BEFORE Processing</U></H3>";
echo "<TABLE border='0'>\n";
echo " <TR><TD><B>Property</B></TD><TD><B>Value</B></TD></TR>\n";
foreach($trxnProperties as $key=>$value){
    echo " <TR><TD>$key</TD><TD>:$value</TD></TR>\n";
}
echo "</TABLE>\n";

echo "<H3><U>Transaction Properties AFTER Processing</U></H3>";
echo "<TABLE border='0'>\n";
echo " <TR><TD><B>Property</B></TD><TD><B>Value</B></TD></TR>\n";
foreach($trxnResult as $key=>$value){
    $value = nl2br($value);
    echo " <TR><TD valign='top'>$key</TD><TD>:$value</TD></TR>\n";
}
echo "</TABLE>\n";

// kill object
unset($client);
?> 
```

当我提交付款时，我的页面来到这个特定的代码，它抛出的错误是

```
 Fatal error: Uncaught SoapFault exception: [HTTP] in C:\wamp\www\Fd\php\process.php:49 Stack trace: #0 C:\wamp\www\Fd\php\process.php(49): SoapClient->__doRequest('<?xml version="...', 'https://api.dem...', 'http://secure2....', 1, 0) #1 [internal function]: SoapClientHMAC->__doRequest('<?xml version="...', 'https://api.dem...', 'http://secure2....', 1, 0) #2 C:\wamp\www\Fd\php\process.php(104): SoapClient->__call('SendAndCommit', Array) #3 C:\wamp\www\Fd\php\process.php(104): SoapClientHMAC->SendAndCommit(Array) #4 {main} thrown in C:\wamp\www\Fd\php\process.php on line 48. 
```

第 48 行是

```
return parent::__doRequest($request, $location, $action, $version, $one_way); 
```

我无法真正弄清楚这个错误是什么。谷歌搜索并尝试了各种解决方案，但没有成功。如果有帮助的话，我在我的 php 服务器中同时启用了 soap 和 openssl。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-15T03:40:00.373

有点太晚了，但无论如何......只是转储那些垃圾 SOAP 代码，这是我早期的 JSON 和 CURL 版本

```
<?php

class FirstData
{
        protected $host = "api.demo.globalgatewaye4.firstdata.com";
        protected $protocol = "https://";
        protected $uri = "/transaction/v12";

        /*Modify this acording to your firstdata api stuff*/
        protected $hmackey = "XXXXXXXXXXXXXXXXXXXXXXX";
        protected $keyid = "XXXXX";
        protected $gatewayid = "XX000-00";
        protected $password = "XXXXXXX";

        public function request()
        {
                $location = $this->protocol . $this->host . $this->uri;
                $request = array(
                        'transaction_type' => "00",
                        'amount' => 10.00,
                        'cc_expiry' => "0415",
                        'cc_number' => '4111111111111111',
                        'cardholder_name' => 'Test',
                        'reference_no' => '23',
                        'customer_ref' => '11',
                        'reference_3' => '234',
                        'gateway_id' => $this->gatewayid,
                        'password' => $this->password,
                );

                $content = json_encode($request);

                var_dump($content);

                $gge4Date = strftime("%Y-%m-%dT%H:%M:%S", time()) . 'Z';
                $contentType = "application/json";
                $contentDigest = sha1($content);
                $contentSize = sizeof($content);
                $method = "POST";

                $hashstr = "$method\n$contentType\n$contentDigest\n$gge4Date\n$this->uri";

                $authstr = 'GGE4_API ' . $this->keyid . ':' . base64_encode(hash_hmac("sha1", $hashstr, $this->hmackey, true));

                $headers = array( 
                        "Content-Type: $contentType",
                        "X-GGe4-Content-SHA1: $contentDigest",
                        "X-GGe4-Date: $gge4Date",
                        "Authorization: $authstr",
                        "Accept: $contentType"
                );

                //Print the headers we area sending
                var_dump($headers);

                //CURL stuff
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
                curl_setopt($ch, CURLOPT_URL, $location);

                //Warning ->>>>>>>>>>>>>>>>>>>>
                /*Hardcoded for easier implementation, DO NOT USE THIS ON PRODUCTION!!*/
                curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
                //Warning ->>>>>>>>>>>>>>>>>>>>

                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
                curl_setopt($ch, CURLOPT_VERBOSE, 0);
                curl_setopt($ch, CURLOPT_HEADER, 1);

                curl_setopt($ch, CURLOPT_POST, 1);
                curl_setopt($ch, CURLOPT_POSTFIELDS, $content);

                //This guy does the job
                $output = curl_exec($ch);

                //echo curl_error($ch); 
                $header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
                $header = $this->parseHeader(substr($output, 0, $header_size));
                $body = substr($output, $header_size);

                curl_close($ch);
                //Print the response header
                var_dump($header);

                /* If we get any of this X-GGe4-Content-SHA1 X-GGe4-Date Authorization
                 * then the API call is valid */
                if (isset($header['authorization']))
                {
                        //Ovbiously before we do anything we should validate the hash
                        var_dump(json_decode($body));
                }
                //Otherwise just debug the error response, which is just plain text
                else
                {
                        echo $body;
                }
        }

        private function parseHeader($rawHeader)
        {
                $header = array();

                //http://blog.motane.lu/2009/02/16/exploding-new-lines-in-php/
                $lines = preg_split('/\r\n|\r|\n/', $rawHeader);

                foreach ($lines as $key => $line)
                {
                        $keyval = explode(': ', $line, 2);

                        if (isset($keyval[0]) && isset($keyval[1]))
                        {
                                $header[strtolower($keyval[0])] = $keyval[1];
                        }
                }

                return $header;
        }
}

$firstdata = new FirstData();

$firstdata->request(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-15T22:22:58.163

我尝试了 SOAP 没有成功，最后不得不切换到 JSON。@KukoBit 的回答对我有用。唯一的问题是 GMT 中预期的日期字符串。我通过如下计算日期来解决它：

```
$gge4Date = strftime("%Y-%m-%dT%H:%M:%S", time() - (int) substr(date('O'), 0, 3)*60*60) . 'Z'; 
```

希望这可以帮助。

附言。我知道这应该是评论，但由于积分限制，我不能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-24T00:16:29.767

只是提醒那些不断收到“未经授权的请求”的人。凭证错误或丢失。.

确保您没有将您的 PRODUCTION 凭证用于演示环境。他们不会工作。停止拉你的头发:)
你所要做的就是，转到

[https://firstdata.zendesk.com/entries/21510561-first-data-global-gateway-e4sm-demo-accounts](https://firstdata.zendesk.com/entries/21510561-first-data-global-gateway-e4sm-demo-accounts)

注册免费演示。您将生成您的 hmac，并在那里获取您的其他数据，就像您在生产中一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T12:08:47.400

```
$client = new SoapClientHMAC("https://api.demo.globalgatewaye4.firstdata.com/transaction/v12/wsdl"); 
```

删除 ".demo" => " [https://api.globalgatewaye4.firstdata.com/transaction/v12/wsdl](https://api.globalgatewaye4.firstdata.com/transaction/v12/wsdl) "

您在 api first data 中使用实时访问

# html - 在 CSS 中，为什么文本缩进有巨大的负值

> ID：16209350
> 
> 赞同：0
> 
> 时间：2013-04-25T07:59:26.647
> 
> 标签：html, css

当我有一个像 an`anchor`这样的元素用作徽标时，我将使用巨大的负文本缩进值

```
a.logo {
  background: url(logo.gif) no-repeat;
  text-indent: -9999px;
} 
```

所以这个标志看起来像一个图像，加上文字是不可见的。
另外，我需要 DOM 中的文本，以便搜索引擎可以找到它。

然而，

1.  我不喜欢巨大的负值
2.  在某些浏览器和平板电脑上打开关闭手风琴时，我在场景中看到了很大的可滚动
3.  我听说浏览器在 DOM 元素上遇到任何测量值时，根据盒子模型，它会绘制一个至少具有那么大值的盒子。这可能是绘画时的性能问题

我还看到人们使用透明技术、最小的字体大小、与徽标背景匹配的字体颜色等。但在我看来它们并不优雅

即使在 HTML5 和 CSS3 之后，是否没有语义或优雅的技术来向用户隐藏显示的文本仍然存在于 DOM 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:01:37.923

为什么不像[h5bp](http://html5boilerplate.com/)那样做呢？

```
.ir {
    border: 0;
    font: 0/0 a;
    text-shadow: none;
    color: transparent;
    background: url(test.png);
    width: 300px;
    height: 75px;
} 
```

供您参考，您还可以在[此处](http://css-tricks.com/examples/ImageReplacement/)获得许多图像替换技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:19:55.313

你不需要使用文本缩进（如果你不想）试试这个。

CSS代码

```
.logo{
    width:65px;
    height:0;
    background:url(logo.png) 0 0 no-repeat;
    font-size:0;
    line-height:0;
    padding-top:15px;
    overflow:hidden;
    display:block;
} 
```

# selenium-webdriver - Selenium 服务器 v2 无法通过 xpath "//html" 找到元素

> ID：16209351
> 
> 赞同：2
> 
> 时间：2013-04-25T07:59:28.273
> 
> 标签：selenium-webdriver

我不明白这怎么可能。错误有时会消失，但大多数情况下它是实际的。Selenium 日志显示以下内容：

```
Element not found with xpath, //html

Unable to locate element: {"method":"xpath","selector":"//html"}
Command duration or timeout: 1.24 seconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.32.0', revision: '6c40c18', time: '2013-04-09 17:22:56'
System info: os.name: 'Linux', os.arch: 'i386', os.version: '2.6.32-5-686', java.version: '1.7.0_11'
Session ID: cbfc080e-f4a9-4ec9-aa72-3a8adeb0e9b9
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=LINUX, databaseEnabled=true, cssSelectorsEnabled=true, javascriptEnabled=true, acceptSslCerts=true, handlesAlerts=true, browserName=firefox, browserConnectionEnabled=true, nativeEvents=false, webStorageEnabled=true, rotatable=false, locationContextEnabled=true, applicationCacheEnabled=true, takesScreenshot=true, version=17.0}] [] [] 
```

提前感谢您的帮助！

**更新** 我发现这个问题只对以下版本的 Selenium 服务器是实际的：

```
selenium-server-standalone-2.31.0.jar
selenium-server-standalone-2.32.0.jar 
```

selenium-server-standalone-2.28.0.jar 适用于此类 XPath 定位器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T09:37:42.040

我遇到了同样的问题，我已经通过两个操作修复了这些随机错误：

*   我在我的所有功能上都添加了标签**@insulated**。它为每个场景关闭浏览器。[您可以在Behat 文档](http://docs.behat.org/cookbook/behat_and_mink.html#defining-our-own-featurecontext)中找到大部分信息。
*   然后，我在执行 Behat 时添加了选项**--rerun**，因为在少数随机场景中我几乎没有随机错误。手册中有选项（./behat --help）。很快，您可以使用这个选项执行 behat ，如下所示：`bin/behat [@NamespaceMyBundle[/myFeature.feature]] --rerun .behat_rerun`。（bin/behat，因为我在 Symfony2 项目中使用 behat 并从顶层目录启动命令）。
*   我没有实现但**在 Behat doc 上推荐**的第三个选项是实现一个 spin() 方法，如果元素不可用，它将扫描并等待。博客文章可[在此处](http://docs.behat.org/cookbook/using_spin_functions.html)获得。

![在此处输入图像描述](https://i.stack.imgur.com/5U6Qt.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:34:08.867

两个想法：

1.  尝试将 xpath 更改为`/html`

2.  尝试将查找方法更改为`findElement(By.ByTagName("html"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T16:01:35.373

如果错误是间歇性的，是否可能是因为 webdriver 在页面加载之前试图找到元素？如果您在那里进行适当的等待，它会消除错误吗？

# c++ - 移动平均计算中的未初始化变量

> ID：16209352
> 
> 赞同：-3
> 
> 时间：2013-04-25T07:59:38.970
> 
> 标签：c++, compiler-construction, warnings, moving-average

我在以下代码中试图实现的是找到移动平均线；

```
int slots = int ((sr+e)/mst); // finding number of slots

int temp2;
int temp1;

if (temp1 == null) 
{
temp2 = 0;
}

temp2=temp1;   // previously found number of slots
temp1=slots;  // presently found number of slots
double mov_avg = (temp2+temp1)/2; //moving average 
```

问题是当我编译时，我收到 temp1 未初始化的警告；在进行了一项小型研究后，我发现变量在未初始化时不会在 C++ 中默认存储空值或零值；

我不能在代码中放入 temp1 = 0 的行，因为下一次迭代需要它的值才能传递给 temp2 变量；这两者都是计算移动平均线所必需的。

所以，基本上这是第一次运行上述程序的问题；因为如果你通过了它，上面的逻辑就足以计算移动平均线了。你们有什么感想？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:23:38.553

最简单的解决方案是使用序列的第一个值初始化变量：

```
int prev = getValue();

while (valuesAvailable())
{
    int next = getValue();
    double moving_average = (prev + next) / 2.;
    // use moving_average
    prev = next;
} 
```

请注意，我假设您的序列中至少有一个值：您可能需要在获取第一个值之前进行检查以确保它确实存在。

# shell - UNIX - 在输入中简单合并两个文件

> ID：16209353
> 
> 赞同：0
> 
> 时间：2013-04-25T07:59:40.260
> 
> 标签：shell, unix

输入文件1：

```
HELLO
HOW 
```

输入文件2：

```
ARE
YOU 
```

输出文件应该是

```
HELLO
HOW
ARE
YOU 
```

我的输入文件将位于一个文件夹中，我的脚本必须从该文件夹中获取输入文件并按照上述给定顺序合并所有文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:00:46.907

您可以简单地使用`cat`如下所示：

```
cat file1 file2 
```

或者，连接文件夹中的所有文件（假设没有太多）：

```
cat folder/* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:40:19.543

```
sed '' file1 file2 
```

希望这能正常工作+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:47:36.420

猫：

```
cat file1 file2 >output 
```

perl:

```
perl -plne '' file1 file2 >output 
```

awk：

```
awk '1' file1 file2 >output 
```

# gradle - gradle，在 buildSrc 中找不到属性

> ID：16209354
> 
> 赞同：3
> 
> 时间：2013-04-25T07:59:41.657
> 
> 标签：gradle

我做了自定义任务，命名为 MySqlTask​​.groovy

```
import org.gradle.api.DefaultTask
import org.gradle.api.tasks.TaskAction

public class MySqlTask extends DefaultTask {
  def hostname = 'localhost'
  def sql

  @TaskAction
  def runQuery() {
   //to do something...
  }
} 
```

而且，我把这个文件放在 rootProject/buildSrc/src/main/groovy 中。

我的构建文件是 customtasksourcetree.gradle。

> 任务 createDatabase(type: MySqlTask​​) { sql = 'CREATE DATABASE IF NOT EXISTS example' }

当我使用 customtasksrc.gradle 运行 gradle 时，会引发这样的错误。

```
FAILURE: Build failed with an exception.

* Where:
Build file '/Users/need4spd/Programming/Java/workspace/gradleTest/customtasksourcetree.gradle' line: 1

* What went wrong:
A problem occurred evaluating root project 'gradleTest'.
> Could not find property 'MySqlTask' on root project 'gradleTest'. 
```

我已经读过，我在 buildSrc 中的自定义任务文件将在构建时自动编译并添加到类路径中。

我可以在 buildSrc/build/classes 中看到已编译的 MySqlTask​​.class。

有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:15:23.943

我认为问题是由于您没有在构建脚本中导入 MySqlTask

# android - 从 Android 调用 asmx web 服务错误：“java.io.IOException:HTTP request failed, HTTP status: 500”

> ID：16209357
> 
> 赞同：3
> 
> 时间：2013-04-25T07:59:47.040
> 
> 标签：android, web-services, asmx

我正在尝试从 Android 调用 .asmx 网络服务。下面你可以看到我的代码。当我将它用于另一个 Web 服务时它正在工作，但它不适用于我需要使用的一个。问题是“java.io.IOException：HTTP 请求失败，HTTP 状态：500”异常。首先，我假设问题出在 Web 服务端。但是，当我尝试使用 Devexpress 和 .NET 时，它会起作用。

当我删除“contentType:”application/json; 时，我试图从 Devexpress 得到同样的错误。charset=utf-8"," 行。

注意：Web 服务定义没有错误。

私有类 KullaniciServiceAsync 扩展 AsyncTask {

```
 protected void onPreExecute(){
        Toast.makeText(getApplicationContext(), "Kullanici Bilgileri Alınıyor...", Toast.LENGTH_SHORT).show();
    }
    @Override
    protected KullaniciBilgisiGetir doInBackground(String... Str) {
        try {
            //ArrayList<HeaderProperty> headerProperty = new ArrayList<HeaderProperty>();  
            //headerProperty.add(new HeaderProperty("Content-Type", "application/json; charset=utf-8")); 
            k = new KullaniciBilgisiGetir();    
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("UserId","1234567890");
            request.addProperty("Password",Pass);
            request.addProperty("Kod",Kod);
            request.addProperty("Sifre",Sifre);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            Log.e("Request",request.toString());
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;
            try{
                 androidHttpTransport.call(SOAP_ACTION, envelope);
                 SoapObject response = (SoapObject) envelope.getResponse();
                 if (response.hasProperty("KResult")) {
                    if (response.getPropertyAsString("KResult") == null) {
                      k.setKullaniciRespond(null);
                    } else {
                      k.setKullaniciRespond(response.getPropertyAsString("KResult"));
                    }
                 }

             }catch(Exception e){
                 Log.e("httpTRYCATCH", e.toString());
             }
        } catch (Exception e) {
          Log.e("ilkTRY",e.toString());
        }              
        return k;
    }

    protected void onPostExecute(KullaniciBilgisiGetir e){
        txt1.setText("ResponseText   ->" + e.getKullaniciRespond());
        //txt2.setText("bu "+e.getResponse());
        //txt3.setText("Count "+count);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:51:34.970

> **java.io.IOEXCEPTION**
> 
> Signals that an I/O exception of some sort has occurred. This class is the general class of exceptions produced by failed or interrupted I/O operations.

The Web server encountered an unexpected condition that prevented it from fulfilling the request by the client for access to the requested URL.

May be something is wrong at the server end, but the server can not be more specific about the error condition in its response.

therefore it returns it as a error code 500 which means there was an error at server end.

**chances of getting this error might be**

1.  The inputs or values that require to be passed for the method on server side and in your code side are different.
2.  May be your inputs were right but at some point the server failed to process output at his end and given you the response 500

**How can it be resolved?**

You will have to ask system administrator to check the error log at his end(if any log is used on their side).If the error is logged you will know the exact reason.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T00:22:59.390

请检查属性名称是否与 Web 服务参数相同。

例如;

```
request.addProperty("UserId","1234567890"); 
```

您的参数名称是 Web 服务上的 UserId 吗？

您也可以按照本教程进行操作：[Android Programlama – .Net Web Service Kullanımı](http://blog.melihmucuk.com/android-programlama-dotnet-web-service-kullanimi/)

# iphone - 注册一个iphone应用，bundle id注册为域名

> ID：16209358
> 
> 赞同：0
> 
> 时间：2013-04-25T07:59:47.427
> 
> 标签：iphone, ios, app-store-connect

我是 ios 开发的新手，在苹果应用商店保留我的应用名称时，捆绑 ID 最终被注册为**mysite.com**之类的域名， 我已经读过它应该使用保留的域名，例如 com。 mysite.myappname; 我当前的配置会在未来引起问题吗？如果有，我可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:15:25.160

由于您是 IOS 开发新手，我认为重新创建您的 Bundle Id 还为时不晚。

几年前，当我上传 Itunes Connect 拒绝二进制文件时，我确实遇到了一些问题，即 Bundle ID 的格式不正确。

但我不能建议这是否已解决。

# asp.net-web-api - 如何将带空格的参数发送到.net web api

> ID：16209359
> 
> 赞同：3
> 
> 时间：2013-04-25T07:59:48.503
> 
> 标签：asp.net-web-api

我想在我的 web api 中收到一个包含我的方法的空格的长字符串

据我了解，我无法发送带有空格的参数，是否必须以某种方式对其进行编码？

编辑：

我的内容类型是：

```
Content-Type: application/x-www-form-urlencoded 
```

我已将其更改为其他几种类型，但它们都不允许我接收带有 + 而不是空格的参数

我的帖子方法签名是

```
public HttpResponseMessage EditCommentForExtension(string did, string extention, string comment) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T11:12:22.390

在 URL 中使用`+`to 表示“空格”是一些网站使用的内部约定，但它不是 URL 编码标准的一部分。如果你想使用`+`to 表示空格，你将不得不自己转换它们。

正如您所发现的，空格（就像其他所有需要编码的东西一样）应该使用`%XX`where X 标准的十六进制数字进行编码。

[http://www.w3.org/Addressing/rfc1738.txt](http://www.w3.org/Addressing/rfc1738.txt)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:02:25.747

通常，HTTP GET 请求的参数是[URL 编码](http://en.wikipedia.org/wiki/Query_string#URL_encoding)的。这意味着（除其他外）空格被“+”替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T10:29:05.640

唯一对我有用的是添加 %20 而不是空格

# javascript - NVD3 D3 在 xaxis 上获取特定标签

> ID：16209360
> 
> 赞同：0
> 
> 时间：2013-04-25T07:59:49.947
> 
> 标签：javascript, d3.js, nvd3.js

我正在使用 nvd3 库来生成分组多条形图。这是我的数据集（以 JSON 形式）

```
[{"key":"Param 1","values":[{"y":2.0,"x":"2010-04-01"},{"y":0,"x":"2010-10-01"},{"y":0,"x":"2010-12-01"},{"y":0,"x":"2011-01-01"},{"y":0,"x":"2011-04-01"},{"y":0,"x":"2011-10-01"},{"y":0,"x":"2012-01-01"},{"y":0,"x":"2012-03-01"},{"y":0,"x":"2012-05-01"},{"y":0,"x":"2012-08-01"},{"y":0,"x":"2012-10-01"},{"y":0,"x":"2012-11-01"},{"y":25.0,"x":"2012-12-01"},{"y":0,"x":"2013-01-01"},{"y":0,"x":"2013-02-01"},{"y":0,"x":"2013-03-01"},{"y":0,"x":"2013-04-01"}]},{"key":"Param 2","values":[{"y":160.0,"x":"2010-04-01"},{"y":0,"x":"2010-10-01"},{"y":0.0,"x":"2010-12-01"},{"y":0,"x":"2011-01-01"},{"y":4.0,"x":"2011-04-01"},{"y":0,"x":"2011-10-01"},{"y":0.0,"x":"2012-01-01"},{"y":45.0,"x":"2012-03-01"},{"y":9.0,"x":"2012-05-01"},{"y":0,"x":"2012-08-01"},{"y":10.0,"x":"2012-10-01"},{"y":0,"x":"2012-11-01"},{"y":30.0,"x":"2012-12-01"},{"y":0.0,"x":"2013-01-01"},{"y":58.0,"x":"2013-02-01"},{"y":52.0,"x":"2013-03-01"},{"y":36.0,"x":"2013-04-01"}]},{"key":"Param 3","values":[{"y":80.0,"x":"2010-04-01"},{"y":12.0,"x":"2010-10-01"},{"y":0.0,"x":"2010-12-01"},{"y":0,"x":"2011-01-01"},{"y":2.0,"x":"2011-04-01"},{"y":0.0,"x":"2011-10-01"},{"y":0.0,"x":"2012-01-01"},{"y":33.0,"x":"2012-03-01"},{"y":16.0,"x":"2012-05-01"},{"y":20.0,"x":"2012-08-01"},{"y":0.0,"x":"2012-10-01"},{"y":150.0,"x":"2012-11-01"},{"y":65.0,"x":"2012-12-01"},{"y":0.0,"x":"2013-01-01"},{"y":44.0,"x":"2013-02-01"},{"y":116.0,"x":"2013-03-01"},{"y":24.0,"x":"2013-04-01"}]},{"key":"Param 4","values":[{"y":0,"x":"2010-04-01"},{"y":8.0,"x":"2010-10-01"},{"y":0,"x":"2010-12-01"},{"y":0,"x":"2011-01-01"},{"y":0,"x":"2011-04-01"},{"y":0.0,"x":"2011-10-01"},{"y":4.0,"x":"2012-01-01"},{"y":0,"x":"2012-03-01"},{"y":0,"x":"2012-05-01"},{"y":0,"x":"2012-08-01"},{"y":0,"x":"2012-10-01"},{"y":0,"x":"2012-11-01"},{"y":0.0,"x":"2012-12-01"},{"y":0,"x":"2013-01-01"},{"y":0,"x":"2013-02-01"},{"y":67.0,"x":"2013-03-01"},{"y":0,"x":"2013-04-01"}]},{"key":"Param 5","values":[{"y":0,"x":"2010-04-01"},{"y":0,"x":"2010-10-01"},{"y":0,"x":"2010-12-01"},{"y":15.0,"x":"2011-01-01"},{"y":0,"x":"2011-04-01"},{"y":0,"x":"2011-10-01"},{"y":0,"x":"2012-01-01"},{"y":0,"x":"2012-03-01"},{"y":0,"x":"2012-05-01"},{"y":0,"x":"2012-08-01"},{"y":0,"x":"2012-10-01"},{"y":0,"x":"2012-11-01"},{"y":0,"x":"2012-12-01"},{"y":0,"x":"2013-01-01"},{"y":250.0,"x":"2013-02-01"},{"y":120.0,"x":"2013-03-01"},{"y":100.0,"x":"2013-04-01"}]}] 
```

这是我正在使用的代码：

```
var chart;
nv.addGraph(function() {
chart = nv.models.multiBarChart()
  .barColor(d3.scale.category20().range());

chart.xAxis
    .showMaxMin(true).tickFormat(function(d){return d3.time.format('%b-%y')(new Date(d));});

chart.yAxis
    .tickFormat(d3.format(',1f'));

d3.select('#plot_container svg')
    .datum(plot_data)
  .transition().duration(500).call(chart);

nv.utils.windowResize(chart.update);

chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

return chart; 
```

我在 x 轴上得到的标签是由库本身生成的。我想要数据可用的 x 轴上的所有月份。此外，所有这些月份应该是等间隔的，而不是时间线性的。

我尝试过类似`tickValues`无济于事的东西。这应该怎么做？

# html - 如何将水平ul列表中的项目与图像垂直对齐？

> ID：16209363
> 
> 赞同：6
> 
> 时间：2013-04-25T07:59:56.720
> 
> 标签：html, css, vertical-alignment

我有以下html代码：

```
<div id="footer">
    <ul id="yw1">
        <li><a href="/index.php/site/login">About</a></li>
        <li><a href="/index.php/site/login">FAQ</a></li>
        <li><a href="http://twitter.com"><img src="/images/twitter_icon.png" /></a></li>
        <li><a href="http://twitter.com"><img src="/images/facebook_icon.png" /></a></li>
    </ul>       
</div> 
```

以及以下 CSS 样式：

```
#footer {
    margin-top: 25px;
    background: #000000 url(images/background.png) repeat;
    padding: 25px;
    box-shadow: 0px 0px 10px 5px rgba(0, 0, 0, .2);
}
#footer ul {
    margin: 0;
    padding: 0px 0px 0px 0px;
    list-style: none;
    line-height: normal;
}
#footer li {
    padding-left: 20px;
    display: inline;
    list-style-type: none;
}
#footer a {
    color:white;
    letter-spacing: 1px;
    text-decoration: none;
    text-align: center;
    font-size: 14px;
    font-weight: 300;
} 
```

现在结果是：

![截屏](https://i.stack.imgur.com/BXViw.png)

但我需要垂直对齐图像和文本链接。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T08:06:28.183

由于标签默认是内联的，它垂直对齐基线，因此您`img`需要使用标签`vertical-align: middle;``img`

[**演示**](http://jsfiddle.net/7MtKq/178/)

CSS

```
#footer img {
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T14:03:37.283

用户关注 CSS。

```
li { display:inline-block; vertical-align:middle } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:17:50.860

您只需要图像`vertical-align: middle`上的 on`#footer li`和`#footer a`+ `display: inline-block`：

```
#footer li {
    /* ... */
    display: inline;
    vertical-align: middle;
}
#footer a {
    /* ... */
    vertical-align: middle;
    display: inline-block;
} 
```

[http://jsfiddle.net/dfsq/7kssu/](http://jsfiddle.net/dfsq/7kssu/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T08:10:37.550

只需更改您的CSS

从

```
line-height:normal 
```

至

```
line-height:30px 
```

# python - 比较两个表中的两个值并追加

> ID：16209366
> 
> 赞同：1
> 
> 时间：2013-04-25T08:00:11.300
> 
> 标签：python, list, dictionary, python-2.x

我有两个列表（通常它们更长，这里只是一个例子）：

第一个包含`Destination`, `mid`, `TypeSource`,`TypeDestination`和`Time`

```
[{'Destination': 'me.xx@domain.fr', 'mid': '6754', 'Type S': 'VOICE', 'Origine': '+45854521', 'Type D': 'SMTP.0', 'Time': '08:29:50.293'}, {'Destination': 'fax.server@domain.fr', 'mid': '6755', 'Type S': 'FAXG3', 'Origine': 'p0298220991', 'Type D': 'SMTP.0', 'Time': '08:55:33.731'}] 
```

第二个列表包含中间和状态，以了解是否发送消息，有时会出现错误，并且在重复后发送，如示例中所示

```
[{'status': 'OK', 'mid': '6754'}, {'status': 'Erreur', 'mid': '6755'}, {'status': 'OK', 'mid': '6755'}] 
```

* * *

有没有办法通过从`mid`?? _`the first table``second table``append the status``the first``second`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:06:00.917

```
>>> A = [{'Destination': 'me.xx@domain.fr', 'mid': '6754', 'Type S': 'VOICE', 'Origine': '+45854521', 'Type D': 'SMTP.0', 'Time': '08:29:50.293'}, {'Destination': 'fax.server@domain.fr', 'mid': '6755', 'Type S': 'FAXG3', 'Origine': 'p0298220991', 'Type D': 'SMTP.0', 'Time': '08:55:33.731'}]
>>> B = [{'status': 'OK', 'mid': '6754'}, {'status': 'Erreur', 'mid': '6755'}, {'status': 'OK', 'mid': '6756'}]
>>> mid_status = {}
>>> for d in B:
        mid_status.setdefault(d['mid'], []).append(d['status'])

>>> for d in A:
        if d['mid'] in mid_status:
            d['status'] = mid_status[d['mid']]

>>> A
[{'status': ['OK'], 'Destination': 'me.xx@domain.fr', 'mid': '6754', 'Type S': 'VOICE', 'Origine': '+45854521', 'Time': '08:29:50.293', 'Type D': 'SMTP.0'}, {'status': ['Erreur'], 'Destination': 'fax.server@domain.fr', 'mid': '6755', 'Type S': 'FAXG3', 'Origine': 'p0298220991', 'Time': '08:55:33.731', 'Type D': 'SMTP.0'}] 
```

如果没有状态，您可能需要默认值，在这种情况下使用：

```
for d in A:
    d['status'] = mid_status.get(d['mid'], []) 
```

**编辑：**根据请求更新，包括对多种状态的支持

# jquery - 使用敲除快速查找在文本框中输入的数据

> ID：16209368
> 
> 赞同：0
> 
> 时间：2013-04-25T08:00:11.837
> 
> 标签：jquery, knockout.js

我想在使用 knockout.js 在文本框中输入一些文本时创建一个快速查找。即每当用户在文本框中键入与在文本框中输入的字符串相关的数据时，以文本框下的下拉形式显示。谁能告诉我如何实现这个功能？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:03:26.633

是的，您可以在按下键后强制值突变：

```
<input data-bind="value: someValue, valueUpdate: 'afterkeydown'" /> 
```

[knockout.js](http://knockoutjs.com/documentation/value-binding.html)主页上有完整的代码示例：

```
<p>Your value: <input data-bind="value: someValue, valueUpdate: 'afterkeydown'" /></p>
<p>You have typed: <span data-bind="text: someValue"></span></p> <!-- updates in real-time -->

<script type="text/javascript">
    var viewModel = {
        someValue: ko.observable("edit me")
    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:28:21.827

这是一些示例代码：

```
var VM = function () {

    this.text = ko.observable('');

    this.suggestionStrings = [
        'Hello',
        'world',
        'name',
        'richard'
    ];

    this.suggestions = ko.computed(function () {

        var text = this.text();

        return ko.utils.arrayFilter(this.suggestionStrings, function (str) {
            return new RegExp(text, 'i').test(str);
        });
    }, this);
};

ko.applyBindings(new VM()); 
```

这里的例子：http: [//jsfiddle.net/badsyntax/f8aCY/](http://jsfiddle.net/badsyntax/f8aCY/)

# javascript - 在移动设备上单击时锚标记缩进

> ID：16209377
> 
> 赞同：0
> 
> 时间：2013-04-25T08:00:41.707
> 
> 标签：javascript, html, css, mobile, hyperlink

我一直在处理的站点可以在这里找到：[基于滚动的站点](http://morrisonhosting.com/php/portfolio/scroll/) ，它作为一个带有锚点的简单页面运行，当单击菜单项时，它使用 jQuery 滚动到页面上的正确位置。这适用于移动设备和桌面设备。在我尝试制作适合移动设备的版本时，我制作了以下 CSS：

```
@charset "utf-8";

#header {
    width: 100%;
}

#home {
    width: 100%;
}

#features {
    width: 100%;
}

#colors {
    width: 100%;
}

#contact {
    width: 100%;
}

#footer {
    width: 100%;
}

#nav li a {
    margin-left: 30px;
}

@media only screen and (max-width: 720px){
    #nav li a:hover {
        color: #a2a2a2;
    }

    #footer a:hover {
        color: #a2a2a2;
    }

    #logo {
        display: none;
    }

    * {
        font-size: 12pt;
    }

    #header {
        height: auto;
        text-align: center;
    }

    #nav {
        padding: 10px 5px;
    }

    #nav li a {
        margin-left: 5px;
    }

    #footer {
        padding: 13px 0;
    }

    #footer a {
        font-size: 1em;
    }

    #colors img {
        width: 100%;
    }
} 
```

这似乎有效，但无论出于何种原因，当您单击可以测试的菜单链接时它开始缩进：[Here at Responsivator](http://dfcb.github.io/Responsivator/?site=morrisonhosting.com/php/portfolio/scroll)

这种缩进实际上并没有发生在手机上，但是在手机上通过触摸关联的事件永远不会在 javascript 中发生，所以它显然仍然是一个问题。

有没有人对我如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:12:41.770

您需要`#nav li a`并且`#nav li a:hover`拥有相同的 css 指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:10:58.407

这有点奇怪，但是使用开发人员工具，我在第 50 行的 main.css 中发现了这一点：

```
#nav li a, #nav li a:active, #nav li a:visited {
color: #a2a2a2;
text-transform: uppercase;
font-weight: 700;
text-decoration: none;
margin-left: 50px;
transition: color .5s ease;
-moz-transition: color .5s ease;
-webkit-transition: color .5s ease;
-o-transition: color .5s ease;
} 
```

删除 #nav li a:active ，它应该按方面工作。

# code-signing - 如何在试用版的基础上获得 excel 插件 exe 文件的代码签名？

> ID：16209383
> 
> 赞同：-1
> 
> 时间：2013-04-25T08:00:51.223
> 
> 标签：code-signing, excel-addins

我希望发布一个我在我的网站上构建的 excel 插件，用户将下载并安装它。它还具有自动更新功能。我的问题是当自动更新功能运行时，它不允许将文件保存到用户的机器上，因为我没有任何代码签名证书。所以，现在我正在寻找代码签名证书的试用版。有人知道这些事情吗？提前致谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:51:39.750

您可以使用 SSL 证书。市场上有数以百万计的免费和试用版 SSL 证书。谷歌获取 SSL 证书。

# c# - 在 WPF 中使用数学符号

> ID：16209384
> 
> 赞同：0
> 
> 时间：2013-04-25T08:00:53.980
> 
> 标签：c#, wpf, math, richtextbox

在查看 Word 时，它具有可以在文档中添加和修改的方程式，我需要能够在我的程序中执行相同的操作，即允许添加/修改数学方程式，尽管我不确定如何继续。我打算做的是能够在我的程序中打开 Word 并让用户输入他们的方程式，并且在保存这些方程式后应该在我的文本框或 Richtextbox 中看到，我还没有调查如何继续我的计划但这就是我现在打算做的。

或者还有其他我可以使用的支持添加数学方程的控件吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-11T14:46:51.723

使用 NuGet packege WPF-Math。你可以写乳胶公式。

# android - Android 分享意图 - facebook

> ID：16209385
> 
> 赞同：1
> 
> 时间：2013-04-25T08:01:03.067
> 
> 标签：android, facebook, share

我想和我的朋友们分享一些东西。所以我更喜欢android分享意图。我用了，

```
Intent i=new Intent(android.content.Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(android.content.Intent.EXTRA_TEXT, "my share text");
startActivity(Intent.createChooser(i, "share via")); 
```

这显示了 Facebook、Twitter、Gmail、Message、Skype 等可用应用程序的列表。如果我按某种意义上的 Twitter，上面的文本“我的共享文本”会显示在推文文本框中。但如果我选择 Facebook，状态消息不会显示。我想以编程方式设置状态消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:08:46.987

Facebook SDK 有这个错误，我知道这很烦人。但是，如果您将链接（并且只有一个链接）设置为“我的分享文本”，它将出现在 facebook 分享框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T17:19:49.650

我刚刚构建了这段代码，它对我有用：

```
private void shareAppLinkViaFacebook() {
    String urlToShare = "YOUR_URL";

    try {
        Intent intent1 = new Intent();
        intent1.setClassName("com.facebook.katana", "com.facebook.katana.activity.composer.ImplicitShareIntentHandler");
        intent1.setAction("android.intent.action.SEND");
        intent1.setType("text/plain");
        intent1.putExtra("android.intent.extra.TEXT", urlToShare);
        startActivity(intent1);
    } catch (Exception e) {
        // If we failed (not native FB app installed), try share through SEND
        Intent intent = new Intent(Intent.ACTION_SEND);
        String sharerUrl = "https://www.facebook.com/sharer/sharer.php?u=" + urlToShare;
        intent = new Intent(Intent.ACTION_VIEW, Uri.parse(sharerUrl));
        startActivity(intent);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T07:30:47.617

***Facebook 不允许像 twitter 那样在状态框中预先填充文本***。但是我们可以将带有 url 的文本传递给 Facebook。它出现在状态框下方。检查下面的代码。

**注意：使用 Facebook SDK 分享[推荐]。**

**通过意图进行本机共享**

```
 Intent shareIntent= new Intent();
 shareIntent.setAction(Intent.ACTION_SEND);
 shareIntent.putExtra(Intent.EXTRA_TEXT, "http://www.google.com");
 shareIntent.setType("text/plain");
 shareIntent.setPackage("com.facebook.katana");
 startActivity(shareIntent); 
```

**通过 Facebook SDK 分享**

```
ShareDialog shareDialog;

// Sharing in Facebook using the SDK
FacebookSdk.sdkInitialize(this);
shareDialog = new ShareDialog(this);

String title = "Demo Title";
String URL = "http://www.google.com";

ShareLinkContent linkContent = new ShareLinkContent.Builder()
                .setContentTitle(title).setContentDescription(URL)
                .setContentUrl(Uri.parse(URL)).build();

shareDialog.show(linkContent); 
```

检查下面的链接以供参考。

[链接 1](https://stackoverflow.com/questions/7545254/android-and-facebook-share-intent)

让我知道查询或澄清。

# c# - C# 中的动态和泛型

> ID：16209388
> 
> 赞同：1
> 
> 时间：2013-04-25T08:01:07.893
> 
> 标签：c#, c#-4.0, generics

正如在 C 3.5 中发现的那样，由于类型擦除，以下内容是不可能的：-

```
int foo<T>(T bar)
{
    return bar.Length; // will not compile unless I do something like where T : string
}

foo("baz"); 
```

我相信这在 C# 和 java 中不起作用的原因是由于一个称为类型擦除的概念，请参阅[http://en.wikipedia.org/wiki/Type_erasure](http://en.wikipedia.org/wiki/Type_erasure)。

在阅读了[动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)关键字后，我写了以下内容： -

```
int foo<T>(T bar)
{
    dynamic test = bar;
    return test.Length;
}

foo("baz"); // will compile and return 3 
```

因此，据我了解，动态将绕过编译时检查，但如果类型已被删除，除非它更深入并使用某种反射，否则它肯定仍然无法解析符号？

以这种方式使用动态关键字是不好的做法，这是否会使泛型更强大一些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:03:51.633

动力学和泛型是两个完全不同的概念。如果您想要编译时安全和速度，请使用强类型（泛型或仅标准 OOP 技术，例如继承或组合）。如果您在编译时不知道类型，您可以使用动态，但它们会更慢，因为它们使用运行时调用并且不太安全，因为如果类型没有实现您尝试调用的方法，您将收到运行时错误。

这两个概念不可互换，根据您的具体要求，您可以使用其中一个。

当然，具有以下泛型约束是完全没用的，因为`string`它是密封类型，不能用作泛型约束：

```
int foo<T>(T bar) where T : string
{
    return bar.Length;
} 
```

你宁愿有这个：

```
int foo(string bar)
{
    return bar.Length;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:12:23.033

> 我相信这在 C# 和 java 中不起作用的原因是由于一个称为类型擦除的概念，请参阅[http://en.wikipedia.org/wiki/Type_erasure](http://en.wikipedia.org/wiki/Type_erasure)。

不，这不是因为类型擦除。无论如何，在 C# 中没有类型擦除（与 Java 不同）：运行时为每个不同的类型参数集构造一个不同的类型，不会丢失信息。

它不起作用的原因是编译器对 不了解`T`，因此只能假设`T`继承自`object`，因此只有成员`object`可用。但是，您可以通过在 T 上添加约束来向编译器提供更多信息。例如，如果您有一个`IBar`带有`Length`属性的接口，则可以添加如下约束：

```
int foo<T>(T bar) where T : IBar
{
    return bar.Length;
} 
```

但是如果你希望能够传递一个数组或一个字符串，它就行不通了，因为该`Length`属性没有在由两者实现的任何接口中声明，`String`并且`Array`......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:09:44.947

不，C# 没有类型擦除——只有 Java 有。

但是如果你只指定 T，没有任何约束，你就不能使用 obj.Lenght，因为 T 实际上可以是任何东西。

```
foo(new Bar()); 
```

以上将解析为 Bar-Class，因此 Lenght 属性可能不可用。只有当你确保 T 这个方法也确实有时，你才能在 T 上使用方法。（这是通过 where 约束完成的。）

使用动态，您可以放松编译时间检查，我建议您不要使用它们来破解泛型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:07:07.937

在这种情况下，您不会以任何方式从动态中受益。您只需延迟错误，因为如果动态对象不包含`Length`属性，则会引发异常。如果以通用方法访问该`Length`属性，我看不出**有任何**理由不将其限制为肯定具有该属性的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:10:49.580

“Dynamics 是一个强大的新工具，它使与动态语言以及 COM 的互操作变得更容易，并且可以用来替换许多笨拙的反射代码。它们可以用来告诉编译器对一个对象执行操作，对它的检查是推迟到运行时。

最大的危险在于在不适当的上下文中使用动态对象，例如在静态类型的系统中，或者更糟的是，在正确类型的系统中代替接口/基类。”

[引自文章](http://www.codeproject.com/Articles/69407/The-Dynamic-Keyword-in-C-4-0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-22T08:55:19.753

以为我会对此进行权衡，因为没有人澄清泛型如何“在引擎盖下”工作。上面提到了 T 是一个对象的概念，并且非常清楚。没有谈到的是，当我们编译 C# 或 VB 或任何其他受支持的语言时， - 在中间语言 (IL) 级别（我们编译到的）更类似于汇编语言或等效于 Java 字节码， - 在这个级别，没有泛型！所以新的问题是如何在 IL 中支持泛型？对于访问泛型的每种类型，都会生成一个非泛型版本的代码，它将泛型（例如无处不在的 T）替换为调用它的实际类型。因此，如果您只有一种类型的泛型，例如 List<>，那么这就是 IL 将包含的内容。但是如果你使用许多泛型的实现，然后创建许多特定的实现，并将对原始代码的调用替换为对特定非通用版本的调用。需要明确的是，用作：new MyList() 的 MyList 将在 IL 中替换为 MyList_string() 之类的东西。

这是我对正在发生的事情的（有限）理解。关键是，这种方法的好处在于，繁重的工作是在编译时完成的，并且在运行时不会降低性能 - 这也是为什么泛型可能如此受.NET 开发人员在任何地方和任何地方使用的原因。

不利的一面？如果一个方法或类型被多次使用，那么输出的程序集（EXE 或 DLL）将变得越来越大，这取决于相同代码的不同实现的数量。鉴于 DLL 输出的平均大小 - 我怀疑您是否会认为泛型是一个问题。

# plone - 如何通过 jbot 覆盖已经覆盖的模板？

> ID：16209392
> 
> 赞同：2
> 
> 时间：2013-04-25T08:01:34.027
> 
> 标签：plone, zope

我正在制作一个`plonetheme.bootstrap`用作基础皮肤的 Plone 主题。

我想自定义portaltab viewlet，所以我使用`plone.app.themeplugin`'覆盖插件并将我的添加`plone.app.layout.viewlets.sections.pt`到`overrides`文件夹中。

那没有用，而其他模板可以。后来我发现这是因为`plonetheme.bootstrap`已经覆盖了它。

那么如何覆盖已经覆盖的模板呢？有这么多的 BrowserLayer 是如何选择的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T04:21:54.420

感谢 Mikko Ohtamaa 和 David Glick 的提示和信息。

我子类化了 plonetheme.bootstrap 层而不是默认层，并且它起作用了。您还需要通过 将该层添加到 Diazo 主题的浏览器层中`manifest.cfg`，例如：

```
[theme:browserlayer]
layer1 = lanlankernel.theme2013.browser.interfaces.IThemeSpecific 
```

必须有一种方法，可能是一个补丁`plone.app.themeplugin`，以确保由 browserlayer 插件自动生成的层位于查找链的顶部。但是当前的解决方案对我有用，所以我将问题标记为已回答。

# actionscript-3 - 如何在 Flash 项目 as3 中设置 Flash Player 窗口位置？

> ID：16209404
> 
> 赞同：0
> 
> 时间：2013-04-25T08:02:15.087
> 
> 标签：actionscript-3, flash, air

我的电脑上有 2 台显示器，还在编写一个`AS3`导出到 Standalone的程序`SWF`。我的任务是让我的应用程序在第二个屏幕上全屏显示。我怎样才能做到这一点？

我尝试将我的项目转换为`AIR`项目。可以通过使用`nativeWindow`的属性来实现`Stage`。（设置`x`坐标使其出现在第二个屏幕中，然后调用全屏）。它在 Flash 中工作，但是当我在 Flash`swf`外部运行编译时，我的应用程序崩溃（未找到 nativeWindow 属性）。

所以请帮我解决我的问题。我很失望，一直在寻找解决方案已经 3 天...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:26:00.883

您必须坚持使用您的 AIR 应用程序并按照应有的方式使用它：运行 .air 文件。您不能单独启动 AIR swf，因为它会错过所有 AIR 运行时，包括`NativeWindow`您感兴趣的运行时。

需要明确的是，您不能从使用 Flash Player 启动的 swf 操作窗口。

另一种解决方案是从网络浏览器执行您的 swf，并使用通过调用`ExternalInterface`的 javascript 来移动窗口。但与 AIR 相比，它可能会相当痛苦。

# visual-studio - ReSharper - 将设置保存到文件

> ID：16209408
> 
> 赞同：4
> 
> 时间：2013-04-25T08:02:23.307
> 
> 标签：visual-studio, visual-studio-2012, resharper, code-cleanup

如何将**ReSharpers**设置保存到文件中？

我需要在我的同事之间共享设置，并且它还必须包括 VS 中的格式设置设置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T08:05:31.797

在主菜单中打开 Resharper-> 管理选项。那里有导入/导出设置。或者您可以只应用项目设置并将此文件提交到存储库。

# jquery - css - jQuery 使用一个元素的内联样式到另一个元素上，可以使用类值但需要使用内联值

> ID：16209411
> 
> 赞同：1
> 
> 时间：2013-04-25T08:02:31.293
> 
> 标签：jquery, css, inline

这是我的代码

```
 var test = jQuery(".ls-wp-fullwidth-container").css("height");
      jQuery('#main-home').css({ top: test.height() }); 
```

由于变量具有 .css("height"); 在其中，当我删除它时它会起作用，它看起来像这样

```
 var test = jQuery(".ls-wp-fullwidth-container");
      jQuery('#main-home').css({ top: test.height() }); 
```

它返回顶部：0；由于高度未在样式表中定义。

如果我运行下面的代码，它会返回 .ls-wp-fullwidth-container 的内联样式

```
 jQuery(".ls-wp-fullwidth-container").css("height");
      alert(jQuery(".ls-wp-fullwidth-container").css("height")); 
```

我知道只需要进行一些调整，但我不确定是什么。

如果我进入我的样式表并将高度添加到 .ls-wp-fullwidth-container 类中，那么使用第一段代码就可以了。但是我需要返回内联值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:03:58.893

尝试这个：

```
var test = jQuery(".ls-wp-fullwidth-container");

var height = test.css("height");

// You can check the height here
alert(height);

jQuery('#main-home').css({ top: height });

// Also in place of css use .offset()
jQuery('#main-home').offset({ top: height }); 
```

# regex - 试图在字符串中查找字符串

> ID：16209415
> 
> 赞同：1
> 
> 时间：2013-04-25T08:02:39.537
> 
> 标签：regex

对正则表达式完全陌生。希望以前没有回答过这个问题。抱歉，如果有。

我的问题是尝试从字符串中的字符串中获取名称。不确定我是否已经为这个最好的选择感到困惑。这是从总字符串块中提取的一小部分

```
 <div class="txt-block" itemprop="contractors" itemscope
 itemtype="home"> 
                             <h4 class="inline">Employs:</h4> <a href="/.../" itemprop='url'><span class="itemprop"
 itemprop="name">Carp 1</span></a>,  <a href="/.../"
 itemprop='url'><span class="itemprop" itemprop="name">Carp
 2</span></a>,  <a href="/.../" itemprop='url'><span class="itemprop"
 itemprop="name">Carp 3</span></a>                          <span
 class="tots">|</span>
                           <span class="see-more inline"> <a href="/.../" itemprop='url'>See full options</a>                      
 </span>
                          </div> 
```

我想提取“鲤鱼 1”、“鲤鱼 2”、“鲤鱼 3”。字符串长度因我要提取的项目数量而异。

也许还有更简单的方法可以做到这一点。感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:06:42.513

这不是正则表达式问题。您需要通过 HTML DOM 和 XPath 进行 html 解析。

请参阅这些链接以获取参考：

[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

[http://www.php.net/manual/en/domxpath.query.php](http://www.php.net/manual/en/domxpath.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:06:46.647

**更新：**这是在问题格式化之前发布的，以表明这是一个关于解析 HTML 的问题。

此正则表达式假定您正在解析纯文本字符串，例如：

```
Employs: carp1, carp2, carp3 | blah blah... 
```

*一般来说，您不应该使用正则表达式来解析 HTML。但是，如果您使用另一种方法首先删除所有 HTML 标记，则可以在生成的纯文本上使用这种方法。*

通常，这最好通过两步过程来完成：

首先获取您想要的字符串部分：

```
my $carps;
if ($string =~ /Employs:\s*([^|]+)/)
{
    $carps = $1;
} 
```

然后从匹配的部分中取出每个项目。如有必要，您可以使用正则表达式，但在这种情况下，看起来好像一个简单的拆分就足够了：

```
my @carps = split /,\s*/, $carps; 
```

（以 Perl 为例，但这种方法应该适用于任何语言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:35:14.727

使用一些 xml 解析器。对于示例程序，请使用以下链接

[http://www.codeproject.com/Articles/4826/XML-File-Parsing-in-VB-NET](http://www.codeproject.com/Articles/4826/XML-File-Parsing-in-VB-NET)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:15:25.360

由于您要搜索的字符串包含在具有 class 和 item 属性的 span 标记之间： `<span class="itemprop" itemprop="name">STRING</span>`

您可以使用以下正则表达式：

`<span.*?(?:itemprop\s*=\s*"\s*name\s*"\s*)?class\s*=\s*"\s*itemprop\s*"\s*(?:itemprop\s*=\s*"\s*name\s*"\s*)?>(.*?)<\/span>`

通过一些解释查看它的[实际](http://regex101.com/r/hT3vJ8)效果，并且不要忘记正则表达式修饰符。

# git - Git（Heroku）上的日志文件

> ID：16209416
> 
> 赞同：0
> 
> 时间：2013-04-25T08:02:44.430
> 
> 标签：git, logging, heroku, ignore

嗨，如果在抱歉之前问了我的问题，但我找不到确切的问题。我是 github 的新手，所以我找不到我的答案。我的问题是我在 heroku (php) 上有一个 facebook 应用程序。当用户进入我的主页时，一些信息写在 ..log/log.php 中。但是当我进行更改并推送我的网站日志文件时变为空。我知道这是正常的。即使我没有任何事情 heroku 更新我的日志文件并使其为空。我希望我的日志文件永远不会更改并保留其数据。我试过 .gitignore ， git update-index --assume-unchanged ， git/info/exclude 但它们都不起作用。我能做些什么？感谢和抱歉英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:48:00.220

您应该改为登录到 stderr：[https ://devcenter.heroku.com/articles/logging#writing-to-your-log](https://devcenter.heroku.com/articles/logging#writing-to-your-log)

# java - StackOverFlow 错误发生时的识别点

> ID：16209421
> 
> 赞同：2
> 
> 时间：2013-04-25T08:03:02.150
> 
> 标签：java, memory-leaks, stack-overflow

我正在为学生编写一个教育程序，他们可以在其中看到解决旅行推销员问题（时间消耗、状态的视觉表示等）时不同算法的工作原理。问题是我不仅要展示好的算法，还要展示不好的算法。例如，我为 TSP（可怕的选择）实现了广度优先搜索算法。

程序本身是用 Java 编写的。我有一个用于问题解决算法的单独线程，所有算法都实现了一个特定的接口，允许我在每次迭代后进行干预。

所有在具有 N 个节点（n = 城市数）的树结构上运行的盲搜索算法，每个节点是 N 个元素的数组，该实现在生成大约 50k 个节点后会产生 StackOverFlow 异常。我不想限制用户界面，以便可以使用有限数量的城市 - 模拟退火适用于数千个城市。

这里有一个问题：是否有一些可靠的函数可以在某些指定的逻辑语句中使用，以便我可以识别系统即将崩溃的点？有点风格： if (System.memoryLeft() <= 100 / *bytes* / ) { // 停止工作并采取行动

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:09:02.023

检测它是否会抛出错误的最简单方法是等到它抛出错误并捕获它。

```
try {
   action();
} catch(StackOverflowError ste) {
   // you can't call anything here safely, but you can return or unwind the stack.
} 
```

注意：最大堆栈大小因机器而异，并且基于命令行设置。它不是基于多次调用。

如果您真的担心这个问题，我建议您更改代码以使其不使用递归，并且您可以完全避免此问题。

* * *

问题是显示/记录的最大堆栈深度为 1024。如果您有更长的堆栈，您将看不到最初导致它的原因。您可以做的是*减少*最大堆栈大小`-Xss128k`（如果您的 JVM 允许，则减少），以便您的堆栈跟踪始终足够短以便被捕获。

```
public static void main(String... ignored) {
    callMe(1);
}

private static void callMe(int i) {
    callMe(i);
} 
```

当以较小的堆栈大小调用时

```
at Main.callMe(Main.java:42)
at Main.callMe(Main.java:42)
at Main.callMe(Main.java:42)

many deleted

at Main.callMe(Main.java:42)
at Main.callMe(Main.java:42)
at Main.callMe(Main.java:42)
at Main.main(Main.java:38)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:04:48.893

链接到我的答案。[在 C#、C++ 和 Java 中导致堆栈溢出的最简单方法](https://stackoverflow.com/questions/16053559/simplest-ways-to-cause-stack-overflow-in-c-c-and-java/16053616#16053616)

**这个解释是 Java、C、C++ 语言的 StackOverflowException 背后的基本原因。**

由于递归方法调用，Stackoverflow 异常通常在任何语言中引起。

假设您有一个方法正在调用自身或无限递归循环的任何其他方法，那么它将导致 Stacoverflow 异常。这背后的原因是方法调用堆栈被归档，它将无法容纳其他方法调用。

**方法调用堆栈如下图所示。**

![在此处输入图像描述](https://i.stack.imgur.com/4Z6xK.png)

**解释**——假设 Main 方法有 5 个语句，而第三个方法调用了 methodA，那么 main 方法的执行在 statement3 处暂停，并且 MethosA 将被加载到调用堆栈中。然后方法 A 调用了方法 B。所以 methodB 也被加载到堆栈中。

因此，通过这种方式，无限递归调用使调用堆栈被填满。所以它无法承受更多的方法。所以它会抛出 StackOverflowException。

**以及如何遇到它请参阅此链接**

[计算方法调用堆栈大小以检查 StackOverflowException](https://stackoverflow.com/questions/16055441/computing-method-call-stack-size)

我也在寻找我的这个查询的解决方案。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException - 错误的邮政编码

> ID：16209422
> 
> 赞同：-1
> 
> 时间：2013-04-25T08:03:03.733
> 
> 标签：java

有人可以解释为什么我不断收到这个错误吗？该程序是一个地址簿，将接受公司地址或个人地址。每次添加地址时，我都会收到错误邮政编码错误：'ca14 3xn'，然后是线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常。这是我的代码（我省略了一些方法）：

```
class AddressBookGUI extends JFrame
  implements ActionListener
{
    private ExtendedAddressBook addressbook;

 /**
     * Constructor 
     */
    public AddressBookGUI()
    {
        addressbook = new ExtendedAddressBook();
    }

  public AddressBookGUI(String Title)
  {
    //Removed code    }

  private void showFrame()
  {
    //Removed code
  }

  private void makeFrame()
  {
    //Removed code

  }

  public void actionPerformed(ActionEvent e)
  {
    if ((e.getSource() instanceof JButton))
    {
      //Removed some code

      if (e.getSource() == btnEnter)
      {   
          if (entryType == "Personal")
          {
              //Check if fields are empty                 }
              else {
                   String firstName = this.fldFirstName.getText();
                   String lastName = this.fldLastName.getText();
                   String street = this.fldStreet.getText();
                   String town = this.fldTown.getText();
                   String postcode = this.fldPostCode.getText();
                   String dob = this.fldVariable.getText();
                   addressbook.add(new Personal(firstName, lastName, street, town, postcode, dob));
                }
            }
        }
    }
   }

} 
```

入职类：

```
 public Entry(String paramString1, String paramString2, String paramString3, String paramString4, String paramString5)
 {
    this.firstName = paramString1;
    this.lastName = paramString2;
    this.street = paramString3;
    this.town = paramString4;
    if (paramString5.matches("[A-Z]{2}[0-9]{1,2} [0-9]{1,2}[A-Z]{2}")) {
       this.postCode = paramString5;
    } 
    else {
       System.err.printf("Bad postcode: '%s'\n", new Object[] { paramString5 });
       this.postCode = "???";
    }
} 
```

地址簿类：

```
public String add(Entry paramEntry)
{
if (paramEntry == null)
  return "Error: null entry";
if (this.data.contains(paramEntry)) {
  return "Error: this entry already in the book";
}
boolean bool = this.data.add(paramEntry);
if (bool) {
  return " entry added";
}
return "entry could not be added";
} 
```

扩展地址簿：

```
public class ExtendedAddressBook extends AddressBook
{

public String getPersonal()
{
    String PersonalList = "";
    ArrayList<Entry> allEntries = getAddressBook();
    for ( Entry entry : allEntries )
    {
        if ( entry instanceof Personal )
        {
            PersonalList = PersonalList + entry.toString();
        }
    }
    return PersonalList;
}

} 
```

线上出现错误 addressbook.add(new Personal(firstName, lastName, street, town, postcode, dob)); 这是跟踪：

错误的邮政编码：'ca14 3xn'

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at AddressBookGUI.actionPerformed(AddressBookGUI.java:314)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:56:30.060

正如我所见的 AddressBookGUI 类，有 2 个构造函数，但只有一个没有参数的构造函数初始化`addressbook = new ExtendedAddressBook();`

我来宾您可能会调用第二个带有标题的构造函数，这就是为什么`addressbook`为空。这是 NullPointException 的原因。

==> 解决方案是`addressbook`在第二个构造函数中添加初始化。

错误的邮政编码：请参阅此示例：

```
public class PostCodeCheck {
public static void main(String[] args) {
    String postcode = "ca14 3xn";
    System.out.print("\"" 
            + postcode 
            + "\" is " 
            + postcode.matches("[A-Z]{2}[0-9]{1,2} [0-9]{1,2}[A-Z]{2}"));
    postcode = "CA14 3XN";
    System.out.println(" And \n\"" 
            + postcode + "\" is " + postcode.matches("[A-Z]{2}[0-9]{1,2} [0-9]{1,2}[A-Z]{2}")
            + " \nbecause it accepts postcode with capital letter only!");
} 
```

}

# c# - Silverlight 中的数据透视表

> ID：16209426
> 
> 赞同：0
> 
> 时间：2013-04-25T08:03:08.473
> 
> 标签：c#, silverlight, gridview, pivot, silverlight-5.0

我有一个这样构造的数据列表：

```
public class MyData
    {
        public string Name { get; set; }
        public datetime Date { get; set; }
        public double? Value { get; set; }
        public string Other { get; set; }
    }

List<MyData> lstData = new List<MyData>(); 
```

绑定到 GridView

结果如下所示：

```
Name  Date      Value Other
---------------------------
User1 1/1/2001   27   test
User1 1/1/2002   44   test
User1 1/1/2003   65   test
User2 1/1/2001   111  test
User2 1/1/2002   384  test
User2 1/1/2003   98   test
User3 1/1/2001   322  test
User3 1/1/2002   445  test
User3 1/1/2003   77   test
.
.
. 
```

我想将数据旋转为如下所示：

```
Date      User1 User2 User3 ...
--------------------------
1/1/2001  27    111   322
1/1/2002  44    384   445
1/1/2003  65    98    77 
```

并在 GridView 中再次绑定它。

如何在 C# / Silverlight 中实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:45:09.320

好吧，这就是我如何获得所需的结果：

```
List<MyData> lstData = new List<MyData>();

List<dynamic> lst = new List<dynamic>();

            foreach (var item in lstData.Select(a => a.Date).Distinct())
            {
                dynamic obj = new ExpandoObject();
                obj.Date = item;
                lst.Add(obj);
            }

            foreach (string item in lstData.Select(a => a.Name).Distinct())
            {
                foreach (var objitem in lst)
                {
                  string header = item;
                    ((IDictionary<String, Object>)objitem).Add(header, lstData.Where(d => d.Date == objitem.Date && d.Name == item).FirstOrDefault().Value);
                }
            }

gridView.Itemssource = lst; 
```

# opencl - clFinish 挂起，队列为空

> ID：16209429
> 
> 赞同：0
> 
> 时间：2013-04-25T08:03:15.450
> 
> 标签：opencl, nvidia

我用 clCreateCommandQueue() 创建了多个 OpenCL 队列。

```
cl_int ret_code = CL_SUCCESS;
cl_command_queue queue1 = clCreateCommandQueue(GPU_context, GPU_device_ID, CL_QUEUE_PROFILING_ENABLE, &ret_code);
...
cl_command_queue queueN = clCreateCommandQueue(GPU_context, GPU_device_ID, CL_QUEUE_PROFILING_ENABLE, &ret_code); 
```

所有队列均无错误地创建。其中一个队列暂时没有命令。所有内核执行都很好，等等。最后我需要释放我创建的队列。所有 clFinish() 都正常，除了一个 - 等待队列，其中没有命令（例如，queueN 中没有命令）。以便

```
clFinish(queue1);
...
clFinish(queueK); 
```

正确返回，但是

```
clFinish(queueN); 
```

永远挂着。有什么解决办法？

操作系统是 Ubuntu 12.04 x64。GPU 是 GeForce GTS450。OpenCL SDK 1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:51:30.157

问题在于不同平台上发布的 OpenCL 事件的差异。摆脱它之后，代码开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:55:14.247

应该是驱动bug吧。我在“nVIDIA + Linux + OpenCL”中工作时发现了其中的许多。就我而言，我的程序在 clReadBuffer() 阻塞调用之后挂起，该调用从未返回。

即使您只创建 2 个队列也会发生这种情况吗？

克服这个问题我的建议是使用尽可能少的队列。通常 2 个队列是最好的（内核处理 + I/O）。如果您使用事件和乱序队列支持，则不需要更多队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T20:57:59.707

我们在 OS X 10.8、10.9 和 beta 10.10 中看到了类似的问题（以及其他一些问题，包括驱动程序挂起），并发现删除 CL_QUEUE_PROFILING_ENABLE 解决了它。

# linux - 将文件复制到备份目录保留文件夹结构

> ID：16209430
> 
> 赞同：3
> 
> 时间：2013-04-25T08:03:21.670
> 
> 标签：linux, bash, shell, command-line-interface

我必须将目录中的文件复制到其备份目录，同时保留文件夹结构。例如文件`aaa`到`MyFolder/Test/aaa``.MyFolder.bck/Test/aaa`

我试着用

```
cp --parents MyFolder/Test/aaa .MyFolder.bck; 
```

但结果是`.MyFolder.bck/MyFolder/Test/aaa`而不是`.MyFolder.bck/Test/aaa`（这是我想要的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:22:13.890

您需要到`cd`目录，然后复制文件：

```
(cd MyFolder && cp --parents Test/aaa ../.MyFolder.bck) 
```

命令周围的方括号使其在子 shell 中运行，而不是在当前 shell 中运行。这样做的好处是它使您不必`cd`事后回到原始目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:11:49.407

我喜欢为此使用“rsync”。

rsync -av MyFolder/ .MyFolder.bck/

确保使用尾部斜杠，因为它们告诉 rsync 这两个参数都是“顶级”目录（也就是说，不要在 .MyFolder.bck 中创建另一个 MyFolder）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:09:03.640

为什么不使用两个命令？

```
cd MyFolder && cp --parents /Test/aaa .MyFolder.bck; 
```

Linux 也有几个同步实用程序，甚至用于备份目的，例如 rsync、rdiff-backup、synkron……更不用说本地 VCS 的优点……你不应该重新发明轮子。

# php - PHP中的并行处理？

> ID：16209431
> 
> 赞同：0
> 
> 时间：2013-04-25T08:03:22.697
> 
> 标签：php, parallel-processing, ob-start

我的网站有使用 ob_start() 和 $content = ob_get_clean() 的源页面。在它们内部，我多次使用一个函数，该函数使用 curl 和 bing 将单词/短语翻译成指定的语言。

如果翻译在它在数据库中查找之前已经完成，否则它会收到来自 bing 的系列回复。我希望它并行执行，以便更快地翻译页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:11:11.953

PHP 本身并不支持并行处理。但是，有一些方法可以模拟它，如本页所示：[http ://www.d-mueller.de/blog/parallel-processing-in-php/](http://www.d-mueller.de/blog/parallel-processing-in-php/)

它背后的想法是，您创建一个进程管理器或类似的东西来管理在后台运行的线程并检查它们的状态。因为它们是后台进程，所以您可以启动多个。完成后，您的经理可以继续您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:10:19.920

几个并行的 php 进程（**不是线程**）可以用 gearman 尝试[http://gearman.org/](http://gearman.org/) for gearman

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:07:18.147

不幸的是，我认为在 PHP 中没有并行处理。据我所知，模拟并行处理的唯一方法是使用一个聪明的 cron 作业，并启动它的多个实例。

# java - 如何在不执行任何操作的情况下启动计时器？（java swing timer）

> ID：16209438
> 
> 赞同：0
> 
> 时间：2013-04-25T08:03:45.803
> 
> 标签：java, swing, timer

我正在为期末考试复习，这是一个练习题，要求我让一个形状可见半秒，然后不可见半秒。我正在考虑使用计时器来进行这种闪烁行为。

```
Timer count = new Timer(500, someAction) 
```

但是这种定时器需要一个 ActionListener 和一个 ActionPerformed 才能启动这个定时器。

无论如何我可以在没有任何动作的情况下启动计时器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:12:52.573

我仍然认为`Timer`解决方案是完美的

```
Timer timer = new Timer( 500, new ActionListener(){
  @Override
  public void actionPerformed( ActionEvent e ){
    //toggle visible flag of the shape
    //trigger a repaint
  }
} );
timer.setRepeats( true );
timer.start(); 
```

请注意，您可以安全地调整形状的可见标志（将在绘制期间使用），因为`Timer`它将`ActionListener`在 EDT 上调用。的主要优点之一`javax.swing.Timer`，非常适合与 Swing 组件结合使用:-)

# android - Android：广播无序时如何拦截短信？

> ID：16209439
> 
> 赞同：0
> 
> 时间：2013-04-25T08:03:49.307
> 
> 标签：android, sms, broadcastreceiver

我正在拦截短信应用程序。它在 android 1.6 及更高版本中运行良好。但在 android < 1.6 中不起作用。我认为 android 1.5 中的广播是无序的并且 android:priority 不起作用。人们有解决方案或其他方式来拦截短信吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:15:51.107

您可以通过调用来测试广播是否订购`isOrderedBroadcast()`，您会知道，这比想象的要好。

如果广播没有被订购，它就不能被拦截，主要是因为即使可以，你也无法确定你的拦截是否有任何用处，因为你不知道谁已经收到了广播。

# eventbrite - 使用 EventBrite API 获取精选事件

> ID：16209447
> 
> 赞同：0
> 
> 时间：2013-04-25T08:04:03.830
> 
> 标签：eventbrite

如何使用 PHP 中的 Eventbrite API 按组织显示精选事件？我已经检查了[http://developer.eventbrite.com/doc/users/user_list_events/](http://developer.eventbrite.com/doc/users/user_list_events/)。在状态参数中，我可以发送实时事件的实时状态，但如果有多个事件，那么我如何识别特色事件这么多事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:32:29.063

目前无法通过 API 实现。如果您使用自己的帐户，则可以获取特色事件的事件 ID 并使用 event_get API：

[http://developer.eventbrite.com/doc/events/event_get/](http://developer.eventbrite.com/doc/events/event_get/)

# asp.net - 如何从后面生成asp验证控件？

> ID：16209450
> 
> 赞同：1
> 
> 时间：2013-04-25T08:04:39.667
> 
> 标签：asp.net, .net, .net-4.5

我想知道 asp 验证控制，假设我们正在构建一个 asp 应用程序并将其与外部社交媒体（例如：Facebook、LinkedIn 等）集成，并从那里获取一些数据，然后我们使用这些数据并将其填充到一些字段或控件，由于从这些媒体返回的数据量不确定，我们决定从后面生成像文本框这样的控件，取决于返回的数据量，我的问题是如何验证？我们也可以从后面生成asp验证控件吗？如果可能的话，给我看一些例子，任何帮助都会很棒，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:21:01.520

你当然可以！从 Facebook 或 LinkedIn 等社交媒体获取数据与获取响应`POST`或`GEt`呼叫有关。

例如，设置您的变量之一，例如：

```
 mail = Response.Write(Request.Form['mail']); 
```

或者，如果您已经在文本框中简单地拥有它：

```
string email = TextBox1.Text; 
```

然后您可以运行例如`regex`验证器：

```
Regex regExEmail = new Regex(@"^(((((0[1-9])|(1\d)|(2[0-8]))-((0[1-9])|(1[0-2])))|((31-((0[13578])|(1[02])))|((29|30)-((0[1,3-9])|(1[0-2])))))-((20[0-9][0-9])|(19[0-9][0-9])))|((29-02-(19|20)(([02468][048])|([13579][26]))))$ ");
if (!regExEmail.IsMatch(email))
{
    Response.Write("not valid");
} 
```

要动态添加文本框，请[在此处检查](http://www.codeproject.com/Questions/355847/how-to-create-dynamic-textbox-dropdown-list-in-asp)

如果你想`VB`试试[这个](http://www.iowawebnet.com/ein/2013/01/validate-date-in-code-behind-with-regex-vb-net/)

# python - @def 与 @property，@foo.setter

> ID：16209452
> 
> 赞同：2
> 
> 时间：2013-04-25T08:04:42.480
> 
> 标签：python, properties

我决定今天开始学习 python，采用传统的“尝试随机的东西直到有效果”的方式。

我开始阅读类，然后是属性，并尝试自己创建一些。大多数示例，甚至本网站上的问题示例，都定义如下属性：

```
class C(object):
    def __init__(self):
        self._x = None

    @property
    def x(self):
        """I'm the 'x' property."""
        return self._x

    @x.setter
    # etc. taken from the python tutorial 
```

当我开始在我的文本编辑器中输入“@pro”并点击选项卡时，它完成了：

```
# ... Class stuff ...
@def foo():
    doc = "The foo property."
    def fget(self):
        return self._foo
    def fset(self, value):
    self._foo = value
foo = property(**foo()) 
```

这些是否做同样的事情，如果他们这样做，我应该使用哪一个（即哪个被认为是更好的做法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:24:33.583

正如已经提到的，`@def foo():`是无效的语法，应该是`def foo():`. 有了这一点，您发布的两个代码示例几乎完成了相同的事情。操作员接受一个在`@`函数上工作的函数并将其应用于下一个定义的函数。换句话说：

```
@property
def the_answer():
    return 42 
```

与以下内容完全相同：

```
def the_answer():
    return 42
the_answer = property(the_answer) 
```

但是这种`@property`写法更容易写、读和理解，这就是为什么它被认为是更好的做法。

# ruby-on-rails - Rails/Arel User.where(:id => 。用户身份）

> ID：16209456
> 
> 赞同：0
> 
> 时间：2013-04-25T08:05:05.653
> 
> 标签：ruby-on-rails, associations, arel

嘿，我刚刚回到轨道，我忘记了很多与某些协会合作所需的东西。

**问题：**

我有两张表，带有`Customer`fiels`id`和带有 field 。我想得到一个这样的数组 a是a的。我知道如何在 SQL 中执行此操作，但忘记了如何在 Ariel 中执行此操作。`user_id``User``id``Users``Customer``user_id``id``User`

**编辑**

所以我想我需要多解释一点。我正在接管一个现有的项目。用户和客户之间存在一对一的关系，但是只有一些用户具有相关的客户实体，因此大部分时间`user.customer`都会返回呼叫。`nil`我需要编辑一个当前列出所有用户的页面，但现在我只需要列出具有客户记录的用户。

之前的开发人员已经创建了这些关系：

```
class Customer
  belongs_to :user, :class_name => "Refinery::User"
end

Refinery::User.class_eval do
  has_one :customer
end 
```

我的控制器中有以下代码：

```
def index
  # i need to return an array of users, such that the only
  # users in this array are the ones with a non-nil customer.
  @users = Refinery::User.paginate(:page => params[:page])
end 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:10:17.153

`belongs_to`您可以在客户和用户这两个类中定义关联 `has_many`。

然后您将能够使用`Users.find(id).customers`等。

[rails 文档](http://guides.rubyonrails.org/association_basics.html)很好地解释了这一点——看看客户和订单的例子。

**在您的问题更新** 后更新 - 尝试

```
User.where("customer.id IS NOT NULL") 
```

或者

```
@users = Refinery::User.where("customer.id IS NOT NULL").paginate(:page => params[:page]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:14:46.203

您不需要对此提出任何 Ariel 请求。

用户：

```
class User < ActiveRecord::Base
  has_many :customers
end 
```

顾客 ：

```
class Customer < ActiveRecord::Base
  belongs_to :user
end 
```

代码 ：

```
customer = Customer.find(1)
users = customer.users 
```

# objective-c - UIView animateWithDuration 伪影（在视图上闪烁白色垂直线）

> ID：16209458
> 
> 赞同：1
> 
> 时间：2013-04-25T08:05:10.763
> 
> 标签：objective-c, xcode, animation, uiview, uiviewanimation

我有数字时钟中数字分频器的简单闪烁动画。视图层次结构如下所示：

*   时钟BGView
    *   开始按钮
    *   时钟视图

`StartButton`按下时`ClockView`变为可见（它在按钮上方）并开始每秒闪烁数字分隔符的动画。但动画开始几分钟后，出现闪烁的白线。你可以在这个视频中看到它：

[https://dl.dropboxusercontent.com/u/1680228/ANIMATION_ARTEFACT.MOV](https://dl.dropboxusercontent.com/u/1680228/ANIMATION_ARTEFACT.MOV)

```
- (void)updateTimer {
     NSTimeInterval timeInterval = [[NSDate date] timeIntervalSinceDate:self.timerStartDate];

    long seconds = lroundf(timeInterval); // Modulo (%) operator below needs int or long
    int hour = seconds / 3600;
    int mins = (seconds % 3600) / 60;

    self.clockHrsLabel.text = [NSString stringWithFormat:@"%02i", hour];
    self.clockMinLabel.text = [NSString stringWithFormat:@"%02i", mins];

    (hour > 0) ? (self.clockHrsLabel.alpha = 1.0f) : (self.clockHrsLabel.alpha = 0.2f);

    // devider animation blink
    [UIView animateWithDuration:0.3 animations:^{
        self.clockDeviderLabel.alpha = 1.0f;
    } completion:^(BOOL complete){
        [UIView animateWithDuration:0.3 animations:^{
            self.clockDeviderLabel.alpha = 0.0f;
        }];
    }]; 
} 
```

它是错误还是功能？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T15:37:28.130

这个问题可以通过两种解决方案来解决..

> **第一个是：**
> 
> 我认为在您的动画完成之前再次重复计时器。基本上您有两个动画的持续时间均为 0.3 秒。所以你可以每 1 秒调用一次 timer 方法，因为总动画持续时间是 0.6

或者

> **第二个是：**
> 
> 不要使用计时器并使用以下代码....

```
- (void)updateTimer {
     NSTimeInterval timeInterval = [[NSDate date] timeIntervalSinceDate:self.timerStartDate];

    long seconds = lroundf(timeInterval); // Modulo (%) operator below needs int or long
    int hour = seconds / 3600;
    int mins = (seconds % 3600) / 60;

    self.clockHrsLabel.text = [NSString stringWithFormat:@"%02i", hour];
    self.clockMinLabel.text = [NSString stringWithFormat:@"%02i", mins];

    (hour > 0) ? (self.clockHrsLabel.alpha = 1.0f) : (self.clockHrsLabel.alpha = 0.2f);

    // devider animation blink
    [UIView animateWithDuration:0.25 animations:^{
        self.clockDeviderLabel.alpha = 1.0f;
    } completion:^(BOOL complete){
        [UIView animateWithDuration:0.25 animations:^{
            self.clockDeviderLabel.alpha = 0.0f;
        } completion:^(BOOL complete){
            [self updateTimer];
        }];
    }]; 
} 
```

我不确定，但这段代码可能会对你有所帮助.......祝你好运

# 3d - 在线 3D 房屋查看器

> ID：16209459
> 
> 赞同：0
> 
> 时间：2013-04-25T08:05:21.227
> 
> 标签：3d, viewer, 3ds

有没有好的在线 3D 查看器可以在现代浏览器中渲染房屋？

它需要支持 .3ds 格式。

或者这仍然是未来的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:17:57.170

是的，[X3D](https://en.wikipedia.org/wiki/X3D)是一种基于 XML 的 3D 文件格式。它可以嵌入到浏览器 DOM 中，使其能够显示 3D 几何图形。看到[这个](http://www.x3dom.org/check/)。

我会指出很明显，您需要以某种方式将 .3ds 导出到 X3D，才能使用此功能。

# html - 为什么我的 100% 高度 div 不能伸展到父母的 100%？不是浮子

> ID：16209460
> 
> 赞同：2
> 
> 时间：2013-04-25T08:05:30.017
> 
> 标签：html, css, height

[http://thestleonardsacademy.org/stlan/extracurricular.php](http://thestleonardsacademy.org/stlan/extracurricular.php)

`body`and`html`是 100%，容器`#content`是 100%，但是孩子`#newstiles`不会匹配我设置的 100% 高度。我可以设置一个固定高度，将其增加到当前似乎使用的自动高度之外，但 100% 什么也不做。

我一定要疯了，或者错过了一些非常明显的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:11:33.597

尝试添加

```
height: 100%; 
```

到你的#content 风格。您只定义了最大高度和最小高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:13:28.800

尝试在#newstiles 上将位置设置为“绝对”。然后高度是 100%，但是你会得到一些丑陋的滚动条，因为总页面高度是 100% + 你的页眉。

我建议您删除高度和宽度，并将它们替换为绝对位置，顶部：120px（顶部导航的大小）和底部：0px。

希望这就是你要找的。:)

# javascript - 为什么 Closure Compiler 会覆盖一个短的 var ref。到“this”关键字并恢复“this”？

> ID：16209463
> 
> 赞同：1
> 
> 时间：2013-04-25T08:05:36.070
> 
> 标签：javascript, compression, google-closure-compiler

我正在使用带有简单优化的 Google Closure Compiler 测试一些代码，令我惊讶的是一个函数，例如：

```
window.navigator.detect = function() {
  var t = this,
  a = t.userAgent.toLowerCase(),
  match = /(chrome|webkit|firefox|msie)[ \/]([\w.]+)/.exec(a) ||
  /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) ||
  a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];

  t.ua = match[1] || false;
  t.vers = match[2] || "0";
  if (t.ua) t[match[1]] = true;
  if (match = t.msie)
  t.ie = parseInt(t.vers);//ie main version or false if not IE
  else if (t.chrome)
  t.webkit = true;
  else if (t.webkit)
  t.safari = true;
  //css prefix
  t.pre = t.webkit ? '-webkit-' : t.firefox ? '-moz-' : t.ie > 7 ? '-ms-' : t.opera ? '-o-' : '';
}
window.navigator.detect(); 
```

变成：

```
window.navigator.detect = function() {
  var a = this.userAgent.toLowerCase(), a = /(chrome|webkit|firefox|msie)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || 0 > a.indexOf("compatible") && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];
  this.ua = a[1] || !1;
  this.vers = a[2] || "0";
  this.ua && (this[a[1]] = !0);
  this.msie ? this.ie = parseInt(this.vers) : this.chrome ? this.webkit = !0 : this.webkit && (this.safari = !0);
  this.pre = this.webkit ? "-webkit-" : this.firefox ? "-moz-" : 7 < this.ie ? "-ms-" : this.opera ? "-o-" : ""
};
window.navigator.detect(); 
```

我想使用一个较小的 't' 变量作为对 'this' 的引用来节省一些字节，而不是使用更长的 'this' 17 次。在这种情况下，闭包编译器会使我的代码更长，这有点讽刺。不确定这是否是有意的。而且我在 Google 的文档中看不到任何相关内容。

任何想法如何防止这种警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:39:08.980

我自己发现了一些更多的谷歌搜索......答案类似于关于闭包编译器内联字符串的这个问题：[Google Closure中的变量](https://stackoverflow.com/questions/15848174/variables-in-google-closure)

而这个[常见问题解答](http://code.google.com/p/closure-compiler/wiki/FAQ#Closure_Compiler_inlined_all_my_strings,_which_made_my_code_size)难题：

> " **Closure Compiler 内联了我所有的字符串，这使我的代码变大了。为什么这样做？**大多数人通过查看两个未压缩的 JavaScript 文件来比较代码大小。但这是查看代码大小的一种误导方式，因为您的 JavaScript 文件应该不提供未压缩的服务。它应该使用 gzip 压缩服务。"..." gzip 算法通过尝试以最佳方式对字节序列进行别名来工作。手动别名字符串几乎总是会使压缩代码大小更大，因为它颠覆了 gzip 的自己的混叠算法。”

我尝试使用： 将 't' var 作为函数参数传递`window.navigator.detect(window.navigator);`，然后`window.navigator.detect = function(t){}`保留一个短的 1 字符变量。但是，虽然它在“编译大小”上节省了 27 个字节，但“压缩大小”实际上大了 1 个字节......

因此，虽然这里不完全是关于字符串的别名，但 gzip 的最终结果是相似的，并且应该是减少大小方面的主要关注点。

# ruby - Rails validates_presence_of 正在检查保存的记录而不是编辑的记录

> ID：16209467
> 
> 赞同：2
> 
> 时间：2013-04-25T08:05:48.977
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有三个模型 model1、model12 和 mode2。模型 1 有许多模型 2 到模型 12。

我必须通过model12验证model2的存在。

当我尝试保存 model1 的编辑记录时，rails 正在保存没有 model2 的记录。仅当模型 1 中已经存在的数据库条目没有模型 2 信息时，验证才会失败。

```
class model1 < ActiveRecord::Base
  has_many :model12, :dependent => :destroy, :include => [:model]
  has_many :model2, :through => :model12, :uniq => true

  validates_presence_of :model12, :message => "must be present" 
```

我试过了

```
 validates_presence_of :model2, :message => "must be present" 
```

这也行不通。

我想在我的情况下，rails 正在检查保存的记录而不是未保存的记录。这就是为什么当已经保存的记录有model2而未保存的记录没有model2时验证不会失败。但是当保存的记录没有model2并且未保存的记录也没有model2时它会失败。

如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:37:07.230

我找到了解决我的问题的方法。

我在复选框中有model2s。当我取消选中所有已检查的模型 2 并提交表单时。因为我使用的是嵌套属性，所以它会将旧的未检查模型 2 标记为销毁，并且这种销毁将在保存和验证运行之后发生。

所以rails发现一些model2存在所以没有验证错误。

```
class model1 < ActiveRecord::Base

  has_many :model12, :dependent => :destroy, :include => [:model]
  has_many :model2, :through => :model12, :uniq => true

  accepts_nested_attributes_for :model2,
    :allow_destroy => true,
    :reject_if => proc {|m| m.blank? }

  validate :must_have_one_model2

  def must_have_one_model2
    errors.add(:model2s, 'must have one model2') if model12s_count_valid?
  end

  def model12s_count_valid?
    model12s.reject(&:marked_for_destruction?).count >= 1
  end
end 
```

感谢 les hill[使用嵌套模型进行的后期验证](http://blog.leshill.org/blog/2010/04/20/validating-presence-with-nested-models.html)

# r - 根据索引在循环中删除矩阵的行

> ID：16209468
> 
> 赞同：4
> 
> 时间：2013-04-25T08:05:56.690
> 
> 标签：r

在一个循环中，我根据测试识别行。我使用它们的索引（idx）迭代地从原始矩阵（inM）中删除这些行：

```
 inM <- inM[-idx,] 
```

有时，idx 为空，即没有行满足测试，因此 idx 是整数（0）类型。从 inM 中删除 idx 会得到一个空矩阵而不是相同的矩阵。结果，我得到了一个用于以下迭代的空矩阵......

有没有一种单一的解决方案来避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:19:49.240

`if`您可以通过使用`?setdiff`函数来避免：

```
inM <- inM[setdiff(1:nrow(inM), idx), ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:13:19.850

您可以在循环中添加一个条件，例如：

```
if (length(idx)==0)
  next 
```

如果没有要删除的行，则像这样传递到下一次迭代。

# c# - 如何从另一列填充一列？

> ID：16209476
> 
> 赞同：0
> 
> 时间：2013-04-25T08:06:19.707
> 
> 标签：c#, sql, wpf, visual-studio-2010

我有两个名为`ComputerReport`and的表`SoftwareReport`。在第一个表中，我添加了一个名为`SFID`. 我使用此列在第一个表和第二个表之间建立链接。第二个表也有一个名为 的列`SFID`，这也是表的主键。

我想要的是将`SFID`表格`SoftwareReport`中的`SFID`列填充到`ComputerReport`. 在下图中，您可以看到两个表，但中的`SFID`列`ComputerReport`是`NULL`。

如何将`SoftwareReport`表中的 ID 填充到`SFID`列中，`ComputerReport`并且在程序名称不存在时应仅添加程序名称。

这是图片的链接：http: [//i33.tinypic.com/2usewr8.jpg](http://i33.tinypic.com/2usewr8.jpg)

谢谢，

杰米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:48:46.077

如果您的逻辑是仅使用软件报告表中的第一项更新第一台计算机报告，第二项与第二项，第三项与第三项等等，那么这将适用于您：

```
WITH CR AS
(   SELECT  CRID, Name, SFID, rn = ROW_NUMBER() OVER(ORDER BY CRID) 
    FROM    ComputerReport
), SF AS
(   SELECT  SFID, Name, rn = ROW_NUMBER() OVER(ORDER BY SFID)
    FROM    SoftwareReport
)
MERGE INTO CR
USING SF
    ON sf.rn = cr.rn
WHEN MATCHED THEN 
    UPDATE SET SFID = sf.SFID
WHEN NOT MATCHED THEN
    INSERT (Name, SFID) VALUES (sf.Name, sf.sfID); 
```

如果 SFID，这只是用软件表中的相应行更新计算机报告表。如果软件报告表中有其他行，它将向计算机报告表中添加一个新行，以便行数匹配

**[SQL Fiddle 示例](http://sqlfiddle.com/#!3/04b08/2)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:20:48.380

通常，您应该插入已确定`ComputerReport`正确的行`SFID`，而不是更新已插入的行。

```
INSERT INTO ComputerReport
(SFID, CrComputerName, CrLastUpdatedBy) -- add other columns as neeeded 
SELECT SFID, 'JAMI-HP', 'JAMIE-HP\JAMIE'
FROM SoftwareReport 
```

`ComputerReport`如果表不包含任何有价值的东西，您可以截断表并执行上述插入。

否则，您需要一个光标跟随每个表，并`SFID`根据光标位置第一个表中的值在光标位置的第二个表中`SFID`设置。

在理想情况下，您刚刚创建了行，两个表中没有间隙，并且它们都包含相同数量的行，所以我们可以简单地写：

```
UPDATE ComputerReport 
SET SFID = CRID 
```

但在一般情况下，我们必须求助于更复杂的脚本：

```
DECLARE @sfid, @crid

DECLARE sfcursor READONLY
FOR SELECT SFID
    FROM SoftwareReport
    WHERE SFName IS NOT NULL
    ORDER BY SFID ASC;
DECLARE crcursor
FOR SELECT CRID
    FROM  ComputerReport
    -- WHERE SFID IS NULL
    ORDER BY CRID ASC
FOR UPDATE SFID;

OPEN sfcursor;
OPEN crcursor;

FETCH NEXT FROM sfcursor INTO @sfid;
FETCH NEXT FROM crcursor INTO @crid;

-- update for each rows until we reach the end of either cursor
WHILE @@FETCH_STATUS = 0
     BEGIN
     UPDATE crcursor SET SFID = @sfid;
     FETCH NEXT FROM sfcursor INTO @sfid
     FETCH NEXT FROM crcursor INTO @crid
     END

-- if there are remaining rows in sfcursor, insert new rows in ComputerReport

FETCH RELATIVE 0 FROM sfcursor INTO @sfid
WHILE @@FETCH_STATUS = 0
    BEGIN
    INSERT INTO ComputerReport (SFID) -- you should add the other columns here as needed
    VALUES (@sfid);
    FETCH NEXT FROM sfcursor INTO @sfid
    END

CLOSE crcursor
CLOSE sfcursor
DEALLOCATE sfcursor
DEALLOCATE crcursor 
```

如脚本中所示，您应该使用所需的列和值修改`INSERT`查询以获取额外的行。`ComputerReport`

请注意，与常规（基于集合）查询相比，基于游标的脚本速度较慢。参考：

*   [声明游标](http://msdn.microsoft.com/fr-fr/library/ms180169.aspx)
*   [获取游标](http://msdn.microsoft.com/en-us/library/ms180152.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:18:00.407

如果我得到了您想要正确实现的目标，则必须将 CRID 添加到 SoftwareReport 表中并从 ComputerReport 中删除 SFID。

然后，当您添加新软件报告时，您将使用上次报告中的 CRID...

如果您想实现此目的，这是有效的：每次运行检查时，它都会创建新的计算机报告，并在发生连接时将新软件添加到具有连接的公共列表中，换句话说，哪个计算机报告报告了新软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:21:19.213

我真的不太了解问题。很抱歉，如果我的回答不相关。据我了解，您想链接计算机和软件。为此，您需要多对多关系。因为一个软件可以在多台计算机上，而一台计算机可以有很多软件。为了实现这一点，您需要另一个由两列组成的表： **ComputerSoftware (CID, SFID)**。例如，如果 id 为 1 的计算机具有 id 为 2 和 3 的软件，则应将 (1, 2) 和 (1, 3) 插入到 ComputerSoftware 表中。

# java - 当我尝试使用帐户数据显示我的 JTable 时出现 UTFDataFormatException

> ID：16209478
> 
> 赞同：1
> 
> 时间：2013-04-25T08:06:24.323
> 
> 标签：java, io, randomaccessfile

```
 private void view() throws IOException {
    // TODO Auto-generated method stub

    viewframe=new JFrame("#Customer Accounts#");
    viewframe.setSize(600,350);
    viewframe.setVisible(true);
    viewpanel=new JPanel(new BorderLayout());
    viewframe.add(viewpanel);

    int i=0;
    String data[][]=new String[100][100];
    String col[]={"Account Number","First Name", "Last Name", "Balance","Overdraft"};
    Boolean eof=false;
    try {
        datain=new DataInputStream(new FileInputStream("creditunion.txt"));

        while(!eof)
        {
            try{
                while(true)
                {
                    for(int j=0;j<=3;j++)
                    {
                        data[i][j]=datain.readUTF();
                    }
                    i++;
                }

            }catch(EOFException e)
            {
                eof=true;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        datain.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    viewtable=new JTable(data,col);
    scrollpane=new JScrollPane(viewtable);
    viewpanel.add(scrollpane);
}

 java.io.UTFDataFormatException: malformed input around byte 59
at java.io.DataInputStream.readUTF(Unknown Source)
at java.io.DataInputStream.readUTF(Unknown Source)
at CreditUnion.CreditUnion.view(CreditUnion.java:156)
at CreditUnion.CreditUnion.actionPerformed(CreditUnion.java:109)
at java.awt.Button.processActionEvent(Unknown Source)
at java.awt.Button.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

嗨，大家好。我得到一个 UTFDataFormatException 并且无法弄清楚是什么原因。我似乎能够毫无问题地将数据写入 txt 文件，并且可以看到文件本身中出现了数据。

# javascript - 单击时按顺序渲染集合中的主干模型

> ID：16209481
> 
> 赞同：0
> 
> 时间：2013-04-25T08:06:26.950
> 
> 标签：javascript, backbone.js, view, collections, model

我已经从服务器中提取了一组模型，如下所示：

我只想渲染视图中的第一个模型，然后当用户单击渲染视图中的按钮时，我们会依次渲染集合中的下一个模型。

我无法渲染整个视图然后显示/隐藏，因为这些是测验问题，人们很可能会弄清楚如何以这种方式作弊！

我目前的看法：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'config',
    'collection/quiz',
    'text!template/quiz.html'
    ],
    function($, _, Backbone, Router, AppConfig, QuestionList, QuizTemplate) {

        var QuizView = Backbone.View.extend({
            el: '[data-view="main-content"]',
            template: _.template(QuizTemplate),
            initialize: function onInitialize(param){
                this.collection = new QuestionList();
                this.collection.fetch({
                    reset: true,
                    data: {
                        categoryId: param.id || AppConfig.constants.CATEGORY,
                        limit: AppConfig.constants.QLIMIT
                    }
                });
                this.collection.bind('reset', this.render, this);
            },
            render: function onRender(){
                this.$el.html(this.template({questions: this.collection.toJSON()}));
            }
        });

        return QuizView;
}); 
```

我的收藏; base64 解码用于解码来自服务器的编码响应：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'config',
    'model/quiz'
    ],
    function($, _, Backbone, Router, AppConfig, Quiz) {

        var QuestionList = Backbone.Collection.extend({
            model: Quiz,
            url: AppConfig.api.game.quiz,
            parse: function onParse(response){

                var self = this;

                _.each(response, function(obj, index){
                    _.each(obj, function(val, key, list){
                        if(key !== 'id'){
                            obj[key] = self.decode64(val);
                        }
                    });
                    self.push(obj);
                });

                return this.models;
            },
            decode64: function onDecode(data){

                var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
                var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
                    ac = 0,
                    dec = '',
                    tmp_arr = [];

                if (!data) {
                    return data;
                }

                data += '';

                do { // unpack four hexets into three octets using index points in b64
                    h1 = b64.indexOf(data.charAt(i++));
                    h2 = b64.indexOf(data.charAt(i++));
                    h3 = b64.indexOf(data.charAt(i++));
                    h4 = b64.indexOf(data.charAt(i++));

                    bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;

                    o1 = bits >> 16 & 0xff;
                    o2 = bits >> 8 & 0xff;
                    o3 = bits & 0xff;

                    if (h3 == 64) {
                    tmp_arr[ac++] = String.fromCharCode(o1);
                    } else if (h4 == 64) {
                    tmp_arr[ac++] = String.fromCharCode(o1, o2);
                    } else {
                    tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
                    }
                } while (i < data.length);

                dec = tmp_arr.join('');

                return dec;
            }
        });

        return QuestionList;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:09:37.160

正如@Loamhoof 提到的，一种方法是`currentQuestion`向您的集合添加一个属性，然后给它某种`getNextQuestion`递增`currentQuestion`然后返回的方法`this.at(this.currentQuestion)`。

另一种方法是使用该`Backbone.Collection` `shift`方法：

> 从集合中移除并返回第一个模型。采用与删除相同的选项。

因此，`yourCollection.getNextQuestion()`您只需致电`yourCollection.shift()`. 但是，这会修改集合（删除您`shift`提出的问题），因此如果您希望能够向后浏览集合，您可能需要使用该`currentQuestion`方法。

# assembly - 如何在 SPARC 汇编中使用 xor 和 and

> ID：16209493
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:07:18.060
> 
> 标签：assembly, bit, sparc

```
set 0xDEADBEEF, %o1 

set 0x13579246, %o2 

xor %o1, %o2, %o1 
```

寄存器 o1 中会有什么？

```
set 0xDEADBEEF, %o1 

set 0x13579246, %o2 

and %o1, %o2, %o1 
```

寄存器 o1 中会有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:13:55.140

分别是 CDFA2CA9 和 12059246，由于都是按位运算，所以这里没有架构依赖。请参阅：[http ://en.wikibooks.org/wiki/SPARC_Assembly/Arithmetic_Instructions#Logic_Instructions](http://en.wikibooks.org/wiki/SPARC_Assembly/Arithmetic_Instructions#Logic_Instructions)

关于实际计算：

注意：

```
0x0 == 0b0000
0x1 == 0b0001
0x2 == 0b0010
...
0xf == 0b1111 
```

由于在按位运算中，任何 2 的幂的基数中的每个数字都是独立的，因此为任何基数创建一个表很简单：

以 2 为底（^ 表示异或，& 表示与）：

```
& 0 1
0 0 0
1 0 1

^ 0 1
0 0 1
1 1 0 
```

并以 16 为基数（十六进制）：

```
and 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
0   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
1   0   1   0   1   0   1   0   1   0   1   0   1   0   1   0   1
2   0   0   2   2   0   0   2   2   0   0   2   2   0   0   2   2
3   0   1   2   3   0   1   2   3   0   1   2   3   0   1   2   3
4   0   0   0   0   4   4   4   4   0   0   0   0   4   4   4   4
5   0   1   0   1   4   5   4   5   0   1   0   1   4   5   4   5
6   0   0   2   2   4   4   6   6   0   0   2   2   4   4   6   6
7   0   1   2   3   4   5   6   7   0   1   2   3   4   5   6   7
8   0   0   0   0   0   0   0   0   8   8   8   8   8   8   8   8
9   0   1   0   1   0   1   0   1   8   9   8   9   8   9   8   9
A   0   0   2   2   0   0   2   2   8   8   A   A   8   8   A   A
B   0   1   2   3   0   1   2   3   8   9   A   B   8   9   A   B
C   0   0   0   0   4   4   4   4   8   8   8   8   C   C   C   C
D   0   1   0   1   4   5   4   5   8   9   8   9   C   D   C   D
E   0   0   2   2   4   4   6   6   8   8   A   A   C   C   E   E
F   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F

xor 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
0   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
1   1   0   3   2   5   4   7   6   9   8   B   A   D   C   F   E
2   2   3   0   1   6   7   4   5   A   B   8   9   E   F   C   D
3   3   2   1   0   7   6   5   4   B   A   9   8   F   E   D   C
4   4   5   6   7   0   1   2   3   C   D   E   F   8   9   A   B
5   5   4   7   6   1   0   3   2   D   C   F   E   9   8   B   A
6   6   7   4   5   2   3   0   1   E   F   C   D   A   B   8   9
7   7   6   5   4   3   2   1   0   F   E   D   C   B   A   9   8
8   8   9   A   B   C   D   E   F   0   1   2   3   4   5   6   7
9   9   8   B   A   D   C   F   E   1   0   3   2   5   4   7   6
A   A   B   8   9   E   F   C   D   2   3   0   1   6   7   4   5
B   B   A   9   8   F   E   D   C   3   2   1   0   7   6   5   4
C   C   D   E   F   8   9   A   B   4   5   6   7   0   1   2   3
D   D   C   F   E   9   8   B   A   5   4   7   6   1   0   3   2
E   E   F   C   D   A   B   8   9   6   7   4   5   2   3   0   1
F   F   E   D   C   B   A   9   8   7   6   5   4   3   2   1   0 
```

第一种方法意味着进行 32 次非常简单的计算（在简单转换为二进制然后重新转换为十六进制之后），第二种方法意味着在您可能或可能无法提前准备的表中进行 8 次查找。

# python - Twitter Scraper giving 420 Error

> ID：16209500
> 
> 赞同：1
> 
> 时间：2013-04-25T08:07:38.707
> 
> 标签：python, twitter, scraperwiki

I am getting the following error while I am using the following code to scrape twitter for tweets:

```
import scraperwiki
import simplejson
import urllib2

# Change QUERY to your search term of choice. 
# Examples: 'newsnight', 'from:bbcnewsnight', 'to:bbcnewsnight'
QUERY = '#opendata'
RESULTS_PER_PAGE = '100'
LANGUAGE = 'en'
NUM_PAGES = 1000 

for page in range(1, NUM_PAGES+1):
    base_url = 'http://search.twitter.com/search.json?q=%s&rpp=%s&lang=%s&page=%s' \
     % (urllib2.quote(QUERY), RESULTS_PER_PAGE, LANGUAGE, page)
    try:
    results_json = simplejson.loads(scraperwiki.scrape(base_url))
    for result in results_json['results']:
        #print result
        data = {}
        data['id'] = result['id']
        data['text'] = result['text']
        data['from_user'] = result['from_user']
        data['created_at'] = result['created_at']
        print data['from_user'], data['text']
        scraperwiki.sqlite.save(["id"], data) 
   except:
    print 'Oh dear, failed to scrape %s' % base_url
    break 
```

Failed:420 Client Error (420) response time: 479 ms, [http://search.twitter.com/search.json?q=opendata&rpp=100&lang=en&page=1](http://search.twitter.com/search.json?q=opendata&rpp=100&lang=en&page=1)

Please help. The same code seems to work with someone else's scraper with the same code [here](https://scraperwiki.com/editor/raw/super_simple_twitter_scraper_11)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:40:30.590

Twitter's version 1 Search and Trends APIs gives the error code 420 to tell you to "Enhance your calm", when you are being rate limited. See [here](https://dev.twitter.com/docs/rate-limiting/1) for more information

# ruby-on-rails - Rails Unpermitted 参数选择

> ID：16209501
> 
> 赞同：1
> 
> 时间：2013-04-25T08:07:48.850
> 
> 标签：ruby-on-rails, strong-parameters

我正在尝试添加包含字符串列表的记录。

模型：

```
class Startup < ActiveRecord::Base
  before_validation(:on => :create) do
    self.mal = false
  end
  serialize :category
  attr_accessible :name, :url, :description, :category, :creator, :mal, :founded
end 
```

但我的日志中仍然出现此错误：

```
Started POST "/startups" for 127.0.0.1 at 2013-04-25 05:05:00 -0300
Processing by StartupsController#create as JS
  Parameters: {"utf8"=>"✓", "startup"=>{"name"=>"test", "url"=>"http://startupcrawler.com", "category"=>["", "Analytics", "Fitness", "Gaming"], "founded(1i)"=>"2013", "founded(2i)"=>"4", "founded(3i)"=>"1", "description"=>"fdsa"}, "commit"=>"Create Startup"}
Unpermitted parameters: category
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 85ms 
```

我究竟做错了什么？为什么类别不会序列化？

**编辑：**

刚刚发现这种方法已被弃用，我正在使用 Rails 4 ......我应该改用什么？

**编辑2：**

现在在日志中得到这个：

```
Started POST "/startups" for 127.0.0.1 at 2013-04-25 05:30:33 -0300
Processing by StartupsController#create as JS
  Parameters: {"utf8"=>"✓", "startup"=>{"name"=>"blah", "url"=>"http://startupcrawler.com", "category"=>["", "Fitness"], "founded(1i)"=>"2013", "founded(2i)"=>"4", "founded(3i)"=>"1", "description"=>"fdsa"}, "commit"=>"Create Startup"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  Rendered startups/_form.html.erb (16.1ms)
  Rendered startups/new.html.erb within layouts/application (18.9ms)
Completed 200 OK in 128ms (Views: 29.9ms | ActiveRecord: 0.8ms) 
```

但没有创建新记录（出于某种原因回滚）。

我`serialize :category`从模型中删除。这现在在我的控制器中：

```
def startup_params
      params.require(:startup).permit(:name, :url, :added, :founded, :mal, :creator, :description, {:category => []})
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:15:09.220

出于这个原因，Rails 4 中内置了[强参数。](https://github.com/rails/strong_parameters)

# xcode - 找不到 OFFlickrAPIRequestDelegate 的声明

> ID：16209508
> 
> 赞同：0
> 
> 时间：2013-04-25T08:08:13.033
> 
> 标签：xcode, sharekit

在 XCode 中构建我的应用程序失败：

找不到“OFFlickrAPIRequestDelegate”的协议声明。

据我所知，这个问题是由 Sharekit 引起的。有人可以指出我的解决方案吗？我需要更新子模块，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T16:57:03.640

我有同样的问题。您需要升级 ShareKit！

# c# - 什么是 ToString("N0") 格式？

> ID：16209509
> 
> 赞同：82
> 
> 时间：2013-04-25T08:08:13.763
> 
> 标签：c#, .net, number-formatting

此代码来自 Charles Pettzold 的“Programming Windows Sixth Edition”一书：

```
public object Convert(object value, Type targetType, object parameter, string language) 
{ 
    return ((double)value).ToString("N0"); 
} 
```

`ToString("N0")`应该打印带有逗号分隔符且没有小数点的值。我在文档中找不到对适当`ToString`重载和`"N0"`格式的引用。请指出我在 .NET 文档中的正确位置。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-04-25T08:09:39.460

查看[`following article`](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)MSDN 上有关`N`格式示例的信息。这也包括在[`Standard Numeric Format Strings`](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)文章中。

相关摘录：

```
//       Formatting of 1054.32179:
//          N:                     1,054.32 
//          N0:                    1,054 
//          N1:                    1,054.3 
//          N2:                    1,054.32 
//          N3:                    1,054.322 
```

> 当精度说明符控制结果字符串中的小数位数时，结果字符串反映了一个数字，该数字四舍五入为最接近无限精确结果的可表示结果。如果有两个同样接近的可表示结果：
> 
> *   在 .NET Framework 和 .NET Core 直到 .NET Core 2.0 上，运行时选择具有较大最低有效数字的结果（即使用 MidpointRounding.AwayFromZero）。
> *   在 .NET Core 2.1 及更高版本上，运行时选择具有偶数最低有效数字的结果（即使用 MidpointRounding.ToEven）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T08:14:07.420

这是文档所在的位置：

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

> 数字（“N”）格式说明符将数字转换为“-d,ddd,ddd.ddd…”形式的字符串，其中“-”表示负数符号（如果需要），“d”表示数字（0 -9) ...

这就是他们谈论默认值（2）的地方：

[http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimaldigits.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimaldigits.aspx)

```
 // Displays a negative value with the default number of decimal digits (2).
      Int64 myInt = -1234;
      Console.WriteLine( myInt.ToString( "N", nfi ) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T08:11:45.683

这是一个好的开始

[Double.ToString()](http://msdn.microsoft.com/en-us/library/3xb8436k.aspx)

查看示例以了解许多不同的格式化选项[Double.ToString(string)](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T08:11:57.137

[您可以在此处](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)（在 Double.ToString()-MSDN-Article 中）找到格式列表作为示例部分中的注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-25T06:39:30.480

它是一种用于格式化数字结果的格式说明符。[链接上](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/formatting-numeric-results-table)还有其他说明符。

它的作用是根据您的[CultureInfo](http://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo?view=netframework-4.8)`N`将数字分隔成千位小数，并且在浮动部分中仅表示 2 个小数位，必要时通过舍入最右边的数字。`N2`

`N0`不代表任何小数位，但对其应用四舍五入。

让我们举例说明。

```
using System;
using System.Globalization;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            double x = 567892.98789;
            CultureInfo someCulture = new CultureInfo("da-DK", false);

            // 10 means left-padded = right-alignment
            Console.WriteLine(String.Format(someCulture, "{0:N} denmark", x));
            Console.WriteLine("{0,10:N} us", x); 

            // watch out rounding 567,893
            Console.WriteLine(String.Format(someCulture, "{0,10:N0}", x)); 
            Console.WriteLine("{0,10:N0}", x);

            Console.WriteLine(String.Format(someCulture, "{0,10:N5}", x));
            Console.WriteLine("{0,10:N5}", x);

            Console.ReadKey();

        }
    }
} 
```

它产生，

```
567.892,99 denmark
567,892.99 us
   567.893
   567,893
567.892,98789
567,892.98789 
```

# image - 有没有 JavaFX 图像编辑器？

> ID：16209512
> 
> 赞同：4
> 
> 时间：2013-04-25T08:08:39.103
> 
> 标签：image, javafx-2, image-editing

我想将一个简单的光栅图形编辑器放入我的 JavaFX 应用程序中。
似乎无法使用`javafx.scene.image.Image`，因为图形对象是只读的。
有人可以指出我该怎么做，或者也许有一些类可以直接访问像素图？

**upd：**编辑器不需要快速响应，因此建议 a-la *create hidden `java.awt.Canvas`，处理 ImageView 上的所有事件以在画布上绘制，通过某种方式从画布创建输出流以创建新的 javafx 图像并放置它到 ImageView*。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T09:25:57.777

您可以使用[JavaFX 画布](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)来执行此操作，如[画布教程](http://docs.oracle.com/javafx/2/canvas/jfxpub-canvas.htm)“与用户交互”部分所示。你不需要一个`java.awt.Canvas`.

您可以拍摄画布（或任何其他节点）的[快照](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#snapshot%28javafx.scene.SnapshotParameters,%20javafx.scene.image.WritableImage%29)以创建图像。

[您可以使用PixelReader](http://docs.oracle.com/javafx/2/api/javafx/scene/image/PixelWriter.html)从现有图像读取像素图，并使用从[WritableImage获得的](http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html)[PixelWriter](http://docs.oracle.com/javafx/2/api/javafx/scene/image/PixelReader.html)写入图像的像素图，如 [ImageOps 教程](http://docs.oracle.com/javafx/2/image_ops/jfxpub-image_ops.htm)中所示。

要将生成的图像写入磁盘，[请将其转换为 BufferedImage并使用](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/SwingFXUtils.html#fromFXImage%28javafx.scene.image.Image,%20java.awt.image.BufferedImage%29)[ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)将其写出。

如果需要，有将图像缩放为像素化形式的示例（类似于 Microsoft Paint 中的缩放功能）：[JavaFX ImageView without any smoothing](https://stackoverflow.com/questions/16089304/javafx-imageview-without-any-smoothing)。

# sql-server - 在sql server中使用而不是触发器更新记录

> ID：16209518
> 
> 赞同：0
> 
> 时间：2013-04-25T08:08:49.993
> 
> 标签：sql-server, sql-server-2005, triggers

我在 sql server 2005 中有触发器，它检查重复记录，然后更新记录。

```
USE [CheckeCon]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER TRIGGER [dbo].[tgUserRoleExistForUpdate] ON [dbo].[Sec_UserRoles]
INSTEAD OF Update
AS
declare @UserRoleId int, @UserId int,@RoleId int, @FromDate datetime,@ToDate datetime,@CntlCreatedBy nvarchar,@CntlModifiedAt nvarchar,@CntlCurLockNo smallint;
select @UserRoleId=i.UserRoleId from inserted i;
select @UserId=i.UserId from inserted i;
select @RoleId=i.RoleId from inserted i;
select @FromDate=i.FromDate from inserted i;
select @ToDate=i.ToDate from inserted i;
select @CntlCreatedBy=i.CntlCreatedBy from inserted i;
select @CntlModifiedAt=i.CntlModifiedAt from inserted i;
select @CntlCurLockNo=i.CntlCurLockNo from inserted i;
BEGIN
-- BEGIN TRAN
IF NOT EXISTS
(
    SELECT  *
    FROM    Sec_UserRoles SEUR
    JOIN    inserted i ON  
            SEUR.RoleId =  i.RoleId
    AND     SEUR.UserId = i.UserId
    Where i.FromDate BETWEEN SEUR.FromDate AND SEUR.ToDate
)
Update Sec_UserRoles Set UserId = @UserId,RoleId = @RoleId,FromDate = @FromDate,ToDate = @ToDate,
        CntlCreatedBy = @CntlCreatedBy,CntlModifiedAt = @CntlModifiedAt,CntlCurLockNo = @CntlCurLockNo Where  UserRoleId = @UserRoleId 
--Commit;
Else
    RAISERROR('User Role Association Already Present',15,1);
   --ROLLBACK; 
End 
```

但问题是它不能更新记录，只引发了我在触发器中给出的错误。如何使用触发器更新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:41:19.433

可能这对你有帮助-

```
ALTER TRIGGER [dbo].[tgUserRoleExistForUpdate] 

    ON [dbo].[Sec_UserRoles]
    INSTEAD OF UPDATE

AS BEGIN

    IF NOT EXISTS(
        SELECT 1
        FROM INSERTED
    ) RAISERROR('NO ROW IN INSERTED', 16, 1)

    SET NOCOUNT ON;
    SET XACT_ABORT ON;

    DECLARE 
          @UserRoleId INT
        , @UserId INT
        , @RoleId INT
        , @FromDate DATETIME
        , @ToDate DATETIME
        , @CntlCreatedBy NVARCHAR(MAX)
        , @CntlModifiedAt NVARCHAR(MAX)
        , @CntlCurLockNo SMALLINT

    DECLARE cur CURSOR LOCAL READ_ONLY FAST_FORWARD FOR
        SELECT 
              i.UserRoleId
            , i.UserId
            , i.RoleId
            , i.FromDate
            , i.ToDate
            , i.CntlCreatedBy
            , i.CntlModifiedAt
            , i.CntlCurLockNo 
        FROM INSERTED i

    OPEN cur

    FETCH NEXT FROM cur INTO
          @UserRoleId
        , @UserId
        , @RoleId
        , @FromDate
        , @ToDate
        , @CntlCreatedBy
        , @CntlModifiedAt
        , @CntlCurLockNo

    WHILE @@FETCH_STATUS = 0
    BEGIN

        IF NOT EXISTS(
            SELECT 1
            FROM dbo.Sec_UserRoles s
            WHERE @FromDate BETWEEN s.FromDate AND s.ToDate
                AND s.RoleId = @RoleId
                AND s.UserId = @UserId
                --AND s.UserRoleId = @UserRoleId 
        )
        BEGIN

            UPDATE dbo.Sec_UserRoles 
            SET 
                  UserId = @UserId
                , RoleId = @RoleId
                , FromDate = @FromDate
                , ToDate = @ToDate
                , CntlCreatedBy = @CntlCreatedBy
                , CntlModifiedAt = @CntlModifiedAt
                , CntlCurLockNo = @CntlCurLockNo 
            WHERE UserRoleId = @UserRoleId 

        END
        ELSE BEGIN

             RAISERROR('User Role Association Already Present', 0, 1) -- 15      

        END

        FETCH NEXT FROM cur INTO
              @UserRoleId
            , @UserId
            , @RoleId
            , @FromDate
            , @ToDate
            , @CntlCreatedBy
            , @CntlModifiedAt
            , @CntlCurLockNo

    END

    CLOSE cur
    DEALLOCATE cur

END 
```

# php - 从 php 函数的所有参数中去除斜线

> ID：16209526
> 
> 赞同：0
> 
> 时间：2013-04-25T08:09:08.790
> 
> 标签：php

我有这种 php 函数

```
function insertData($username,$name,$password) {
} 
```

以及其他一些，例如：

```
function updateData($color, $hair,$eye) {
} 
```

ETC..

因为这些参数可以包含一些引号或双引号，例如 " 或 '

有没有办法像

清理（​​所有函数参数）

无需编写 sanitize ($color); 消毒（$头发）；消毒（$eye）；

**我正在寻找最通用的函数来清理（带斜杠）函数的所有参数**

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:15:16.050

您可以使用[func_get_args:](http://php.net/manual/en/function.func-get-args.php)和 foreach

```
function insertData($username,$name,$password) {
    $args = func_get_args();
    foreach ($args as $arg)
    {
        // sanitize and whatnot
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:16:15.790

## 你的答案...

您不能只在函数外部调用函数来清理所有函数参数。您必须在函数中执行此操作，如下所示：

```
function foo(/* Polymorphic */){

    // Sanitize the arguments
    $arguments = sanitize(function_get_args());

    // Proceed with the rest of the function
    // $arguments will now be sanitized
}

function sanitize(/* Polymorphic */){

    // Get the functions arguments
    $arguments = function_get_args();

    // If the arguments exist then proceed to sanitizing
    if(is_array($arguments)){
        foreach($arguments as $key=>$value){
            $arguments[$key] = stripslashes($value);
        }
    }

    // Return the sanitized array
    return $arguments;
} 
```

*注意`/* Polymorphic */`评论；这实际上意味着您可以提交任意数量的参数。这里唯一的问题是你不知道哪些参数是哪些，除非你像这样提交它们：*

```
// Call the foo function
foo(array(
    'username' => $username,
    'name'     => $name,
    'password' => $password
)); 
```

然后在 foo 函数中，您将能够像这样访问参数：

```
function foo(/* Polymorphic */){

    // Sanitize the arguments
    $arguments = sanitize(function_get_args());

    // You only want the first item in the arguments array so remove the others...
    $arguments = $arguments[0];

    // Proceed with the rest of the function
    echo 'Username: '.$arguments['username']."\n";
    echo 'Name: '.$arguments['name']."\n";
    echo 'Password: '.$arguments['password'];

} 
```

## 然而...

***如果您出于 MySQL（或任何其他数据库）的目的剥离斜线，那么我强烈建议您查看 MySQLi 或 PDO 库和准备好的语句。如果您使用准备好的语句，则无需进行剥离斜杠的工作。有关更多信息，请参阅以下链接：***

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:16:20.337

```
function stripslashes_deep($value)
{
    $value = is_array($value) ?
                array_map('stripslashes_deep', $value) :
                stripslashes($value);

    return $value;
}

$array = func_get_args();
$array = stripslashes_deep($array);

print_r($array); 
```

# java - OpenCL 是 OpenGL 和 DirectX 的快速替代品吗？

> ID：16209527
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:09:14.693
> 
> 标签：java, opengl, directx, opencl

我正在制作一个小型 Java 游戏库，我想为更多面向 Java 的绘图制作绘图代码，而不是调用一些 C++ 方法来提取 API。无论如何，我担心它可能会比其他图形 API 慢。那么这会是一个不错的选择吗？另一个问题是我找不到有用的 OpenCL 教程（我需要先学习它），有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:20:55.360

OpenCL*不是*图形 API。它不是用来渲染的，而且它通常不能很好地完成它。

此外，OpenCL 并不比 OpenGL“更面向 Java”。它仍然是基于 C 的 API，因此您仍将“调用一些 C++ 方法来提取 API”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:23:45.077

好吧，[OpenCL](http://en.wikipedia.org/wiki/OpenCL)不是图形 API，而是可以使用您的显卡（或其他特定设备）进行非图形计算（[GPGPU ）的](http://en.wikipedia.org/wiki/GPGPU)**异构计算框架**，类似于[DirectCompute](http://en.wikipedia.org/wiki/DirectCompute)，[OpenGL 中的计算着色器](http://www.opengl.org/wiki/Compute_Shader)，[CUDA](http://en.wikipedia.org/wiki/CUDA)等。它不是面向对象的方式，因为使用纯 C 接口。虽然您可以找到绑定（对于 java：[JOCL](http://www.jocl.org/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:50:03.230

还; 您知道有几个很好的面向对象的 java 图形库可用。以 Jmonkey 引擎为例。

据我所知，如果您想要与显卡对话的快速图形，您必须通过 openGL*（与 openCL 不同，它是用于图形的）。所有的 java API 都是在幕后做的，像 LWJGL 这样的东西用一个非常薄的层来做，基本上只是将 OpenGL 的方法暴露给 Java：根本没有面向对象。其他人在用户没有意识到它的 OpenGL 的情况下这样做，这些往往是“场景图”类型的图形引擎，并且完全面向对象。

如果您想要创建对最终用户“感觉像 java”但在后台使用 OpenGL 的东西，我会从 LWJGL 之类的东西开始，然后在它之上构建。这就是 JMonkey 引擎所做的。

所有这些都是假设您在 3D 中工作，如果您在 2D 中工作，那么性能不太可能成为问题。

因此，要回答您关于完整的 java 图形解决方案是否是一个好主意的问题：它不会与图形卡对话，因此您将依靠 CPU 来完成工作；在 2D 中：这可能很好，它会更慢，但慢于非常快仍然非常快。在 3D 中：我怀疑你能否让它在任何现实场景中以实时速度工作。

*或directX，但你也会有同样的问题

# c# - 为什么 LINQ 的执行时间比 foreach 多？

> ID：16209537
> 
> 赞同：0
> 
> 时间：2013-04-25T08:10:06.770
> 
> 标签：c#, linq

我首先运行了以下代码：

```
var stringList = new[]{"A","BB","CCC","DDDD"};
var dictionary = new Dictionary<int, string>();
var stopwatch = new Stopwatch();
stopwatch.Start();
foreach (var s in stringList)
{
    dictionary.Add(s.Length,s);
}
stopwatch.Stop();
Console.WriteLine(stopwatch.Elapsed);
Console.ReadKey(); 
```

执行时间为：00:00:00.0000205

然后我运行了以下代码...

```
var stringList = new[]{"A","BB","CCC","DDDD"};
var stopwatch = new Stopwatch();
stopwatch.Start();
var dictionary = stringList.ToDictionary(s => s.Length);
stopwatch.Stop();
Console.WriteLine(stopwatch.Elapsed);
Console.ReadKey(); 
```

执行时间为：00:00:00.0037431

这是否证明 foreach 比 LINQ 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:12:04.923

> 是不是证明foreach比LINQ好？？

不，它证明它更快。

更好是一个主观的概念。例如，如果您希望拥有更易读和更紧凑的代码，并且性能不是项目的首要任务，并且确定这不是瓶颈，那么 LINQ 实际上可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:19:11.170

您的示例有几处错误：

*   样本量很小。数组中有四个元素？？尝试 1,000,000
*   在第一个示例中，字典对象是在秒表**之外创建的。**对象创建是速度的一个因素，特别是对于这样一个小例子
*   LINQ 代码使用委托。诚然，这是 LINQ 中的常见用法，但要获得真正的比较，要么两者都应该使用方法，要么都应该使用委托。

你应该查看 Jon Skeet关于这个主题的[博客文章](http://codeblog.jonskeet.uk/2011/01/02/reimplementing-linq-to-objects-todictionary/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T08:19:55.633

您可以看到`ToDictionary`使用 .NET 源代码或 ILSpy 的真实外观：

```
public static Dictionary<TKey, TElement> ToDictionary<TSource, TKey, TElement>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector, Func<TSource, TElement> elementSelector, IEqualityComparer<TKey> comparer)
{
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }
    if (keySelector == null)
    {
        throw Error.ArgumentNull("keySelector");
    }
    if (elementSelector == null)
    {
        throw Error.ArgumentNull("elementSelector");
    }

    Dictionary<TKey, TElement> dictionary = new Dictionary<TKey, TElement>(comparer);
    foreach (TSource current in source)
    {
        dictionary.Add(keySelector(current), elementSelector(current));
    }
    return dictionary;
} 
```

如您所见，它也使用`foreach`！然而，参数检查和`Func`委托使得它比你的自定义代码效率低一点，只`Dictionary.Add`需要方法调用。但是，我认为在实际应用中，使用而不是自定义的*惩罚*并不重要。`ToDictionary``foreach`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:29:04.917

为什么？

因为没有魔法，LINQ 版本比非 LINQ 版本做了很多处理。

我写了一小段代码来展示 LINQ 在内部做什么。你可以看到几乎相同的表演。还要注意我在循环中添加了字典的实例化：

```
int testCount = 1000000;
var stringList = new[] { "A", "BB", "CCC", "DDDD" };

Func<string, string> elementSelector = (value) => value;

var stopwatch = Stopwatch.StartNew();

for (int i = 0; i < testCount; i++)
{
    var dictionary = new Dictionary<int, string>();
    Func<string, int> keySelector = (value) => value.Length;
    foreach (var s in stringList)
    {
        if (keySelector != null && elementSelector != null)
        {
            dictionary.Add(keySelector(s), elementSelector(s));
        }
    }
}

stopwatch.Stop();
Console.WriteLine(stopwatch.Elapsed.TotalMilliseconds / testCount);

var stopwatch2 = Stopwatch.StartNew();

for (int i = 0; i < testCount; i++)
{
    var dictionary2 = stringList.ToDictionary(s => s.Length);
}

stopwatch2.Stop();
Console.WriteLine(stopwatch2.Elapsed.TotalMilliseconds / testCount);

Console.ReadKey(); 
```

# c++ - 与直接初始化和复制初始化混淆

> ID：16209540
> 
> 赞同：2
> 
> 时间：2013-04-25T08:10:18.713
> 
> 标签：c++, initialization

我对以下概念感到困惑：

```
string str="123"; 
```

有些书说：使用“=”是复制初始化，

但有些文章说： `string str="123"`与`string str("123")`. 毫无疑问 str("123") 是直接初始化。

那么适合哪种风格`string str="123";`呢？

如何判断是复制初始化还是直接初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:33:51.923

这只是*语法*问题：

*   `T x = y;`是*复制初始化*，并且

*   `T x(y);`是*直接初始化*。

这适用于任何类型`T`。究竟会发生什么取决于类型`T`是什么。对于原始类型（例如`int`s），两者完全相同。对于类类型（例如`std::string`），两者实际上是相同的，尽管复制初始化要求复制构造函数是可访问的且非显式的（尽管实际上不会调用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:28:49.150

是的，这称为复制初始化。

编译器不是默认构造 str ，然后`string`通过`"123"`使用`string(const char*)`然后分配两个字符串来构造另一个，而是使用带有“123”的 string(const char*) 构造一个字符串。

> `string str="123"`与 相同`string str("123")`。毫无疑问 str("123") 是直接初始

**但是请记住，只有在相应的构造函数不是[*显式*](http://www.parashift.com/c++-faq/explicit-ctors.html)的情况下才有可能。**

# java - org.apache.axis2.AxisFault：java.util.UUID

> ID：16209544
> 
> 赞同：0
> 
> 时间：2013-04-25T08:10:28.150
> 
> 标签：java, axis2

我制作了一个简单的 Web 服务，它必须为具有指定 uuid 的用户更新 acrive 字段。

p

```
ublic  String  UpdateDB(UUID choUUIID ) throws ClassNotFoundException 
    {

        String strDelReturn = "UPDATE_FAIL";

        Class.forName("org.postgresql.Driver");
        try 
        {
            conn = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");

        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

        PreparedStatement pstmt = null;
        String selectQuery = "update users set active=active+1 WHERE uuid="+ choUUIID ;

        try {

            pstmt = conn.prepareStatement(selectQuery);
            int rowss = pstmt.executeUpdate();
            if (rowss != 0) 
                strDelReturn = "UPDATE_OK";

        } 
        catch (Exception ex) 
        {

        }
        return strDelReturn;
} 
```

我从 postgresql 数据库中获取参数 choUUIID（该字段是 uuid 类型）但是当我测试它时

```
http://localhost:9091/Hashing_Passwords/services/Hashing_Password/UpdateDB?choUUIID=d99620ae-20a3-46f7-adb1-1afd0e8f3b27 
```

这是我得到的例外：

```
org.apache.axis2.AxisFault: java.util.UUID
        at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
        at org.apache.axis2.engine.DefaultObjectSupplier.getObject(DefaultObjectSupplier.java:47)
        at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:412)
        at org.apache.axis2.databinding.utils.BeanUtil.processObject(BeanUtil.java:818)
        at org.apache.axis2.databinding.utils.BeanUtil.ProcessElement(BeanUtil.java:737)
        at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:646)
        at org.apache.axis2.rpc.receivers.RPCUtil.processRequest(RPCUtil.java:153)
        at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:206)
        at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
        at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
        at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:144)
        at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:139)
        at org.apache.axis2.transport.http.AxisServlet$RestRequestProcessor.processURLRequest(AxisServlet.java:837)
        at org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:273)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: java.lang.InstantiationException: java.util.UUID
        at java.lang.Class.newInstance0(Unknown Source)
        at java.lang.Class.newInstance(Unknown Source)
        at org.apache.axis2.engine.DefaultObjectSupplier.getObject(DefaultObjectSupplier.java:42)
        ... 32 more 
```

# sql-server - 无法登录 SQL Server

> ID：16209548
> 
> 赞同：0
> 
> 时间：2013-04-25T08:10:42.220
> 
> 标签：sql-server, azure, visual-studio-2012, windows-phone-8

我正在尝试使用 SQL Server 身份验证连接到我的 Windows azure sql 数据库，但这是出现的错误

“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）”

我检查了，我的服务器名称、用户名和密码都正确。有人对此有解释吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:19:56.320

谷歌是你的朋友：http: [//blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-连接到 sql-server-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

# sql-server - SQL Server 将十六进制 varchar 值转换为 INT

> ID：16209550
> 
> 赞同：2
> 
> 时间：2013-04-25T08:10:45.190
> 
> 标签：sql-server

我创建了一个 T-SQL 函数

```
CREATE FUNCTION dbo.GetDecimalFromHexa (@HexValue VARCHAR(10))
RETURNS INT
BEGIN
   IF (CHARINDEX('0x',@HexValue) = 0)
      SET @HexValue = '0x' + @HexValue
   RETURN CONVERT(INT, @HexValue )    
END 
```

然后我这样调用我的函数

```
SELECT dbo.GetDecimalFromHexa ('0000385A') 
```

我收到一个错误：

> 将 varchar 值“0x0000385A”转换为数据类型 int 时转换失败。

请纠正我。

[编辑]
我想得到 int 输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:20:59.200

```
ALTER FUNCTION [dbo].[GetDecimalFromHexa] (@HexValue VARCHAR(10))
RETURNS INT
BEGIN
   IF (CHARINDEX('0x',@HexValue) = 0)
      SET @HexValue = CONCAT ('0x', @HexValue)
   RETURN CONVERT(INT, CONVERT(varbinary, @HexValue, 1))    
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:23:13.740

试试这个——

```
SELECT CAST(CONVERT(VARBINARY(4), '0000385A', 2) AS INT) 
```

或者试试这个 -

```
CREATE FUNCTION dbo.GetDecimalFromHexa 
(
    @HexValue VARCHAR(10)
)
RETURNS INT
BEGIN

   RETURN CAST(CONVERT(VARBINARY(4), @HexValue, 2) AS INT)

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T08:00:15.140

在甲骨文中，

只需执行`to_number`功能。

```
SELECT TO_NUMBER('AB','xx') FROM dual 
```

就是这样。它将返回 171 个数字。

# jquery - jQuery：运行事件，除了 td 包含文本区域

> ID：16209558
> 
> 赞同：1
> 
> 时间：2013-04-25T08:11:05.577
> 
> 标签：jquery

我使用 jQuery。如果有人单击特殊表格中的 tr，我想创建事件。但是如果 tr 的 td 包含 textarea，则该事件不应运行。像这样的东西：

```
#table tbody tr td:not(td textarea) 
```

有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:13:37.547

你可以使用[jQuery 有](http://api.jquery.com/has/)

```
jQuery('#table tbody tr td:not(:has(textarea))') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:13:12.197

您应该考虑为此使用 jQuery [**has()**](http://api.jquery.com/has/)选择器。

> has() - 将匹配元素的集合减少为具有与选择器或 DOM 元素匹配的后代的元素。

# database - 在数据库隔离级别上，READ COMMITTED 与 READ UNCOMMITTED 相比有什么优势，或者为什么认为脏读如此糟糕

> ID：16209560
> 
> 赞同：1
> 
> 时间：2013-04-25T08:11:11.207
> 
> 标签：database, concurrency, rdbms, isolation-level

我认为为事务选择隔离级别取决于事务的性质。但据我所知，始终建议避免（或说“受限”）使用 READ_UNCOMMITTED。大多数数据库使用 READ_COMMITTED 作为默认隔离级别。不知何故，我发现自己观察到 READ COMMITTED 优于 READ UNCOMMITTED 的优势很慢。

我看到的 READ COMMITTED 优于 READ UNCOMMITTED 的唯一优势是 READ COMMITTED 将永远不会执行 DIRTY READ。我发现 DIRTY READ 只能在事务 ROLLBACK（进行脏读的事务）的情况下使数据库不一致。这意味着在事务 ROLLBACK 不太可能（或说永远不会）发生的系统的一部分中，READ UNCOMMITTED 将提供比 READ COMMITTED 更好的性能。

让我们举个例子：我们有记录 A = 100；B = 200；

```
T1(READ_UNCOMMITTED)  |    T2
                      |    A = A + 100 //(A=200 NOW)
 READ(A); //200       |
 B = B + A //400      |
 COMMIT;              |
                      |    COMMIT; 
```

数据库不一致的唯一方法是发生事务 T2 'ROLLBACK'。现在，如果 T2 最不可能有 ROLLBACK，那么在我看来，性能增益比承担的风险小。

提前致谢

**编辑** 这个对于评论来说太长了，所以@Quassnoi 假设我们有两个事务 T1（会话 1）和 T2（会话 2）。T2 将数据库从一致性状态 DB_S1 变为 DB_S2。正如您已经知道的那样，带有 READ_UNCOMMITTED 的 T1 可能会给出与 DB_S1 或 DB_S2 都不兼容的结果。对于带有 READ_COMMITTED 的 T1，我们也可以这样说。

```
Lets say a schedule: T1 starts, counts 100; 
T2 starts -> has updated row 1 to .9M ;
T1 starts -> counts 150
T2 starts -> finish update
T1 starts -> can't find anything where value = 1 hence finish. 
```

T1 给出的结果为 150，它从未存在过。

我猜在这种情况下，T1 需要一个可序列化锁来保证一致性结果，否则它将受事务调度程序的支配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:15:47.137

想象一下，你有一个有 1M 记录的表，所有记录都有`value = 1`

然后你同时运行这两个查询：

第 1 节：

```
SELECT  COUNT(*)
FROM    mytable WITH (NOLOCK)
WHERE   value = 1 
```

第 2 节：

```
UPDATE  mytable
SET     value = 2
WHERE   value = 1 
```

在中，第一个查询将返回和`SQL Server`之间的任意数字。`0``1,000,000`

# linux - Linux 路由添加子域通配符 -host *.domain.com

> ID：16209565
> 
> 赞同：3
> 
> 时间：2013-04-25T08:11:17.440
> 
> 标签：linux, dns, subdomain, wildcard, routes

如果我有一个包含以下两个命令的脚本来修改路由

/sbin/route add -host pandora.com -interface ppp0 /sbin/route add -host internal-tuner.pandora.com -interface ppp0

有没有办法用 *.pandora.com 之类的东西创建一个独特的命令路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:30:22.127

我认为答案是否定的。当您使用 dns 名称而不是 ip 地址添加路由时，route 命令所做的第一件事就是查找它并将其转换为 ip 地址。因此，如果 pandora.com 目前解析为 172.16.0.1，那么机器真正在做的是通过 ppp0 添加到 172.16.0.1/32 的路由。当机器决定如何路由数据包时，它会使用您设置的 IP 地址和掩码来执行此操作，而您使用的任何域名在那个阶段早已被遗忘。

为了给域中的所有机器添加路由，你必须知道所有的 IP 地址，这意味着你需要知道所有的主机名。如果您的 DNS 服务器设置为允许此类事情，您可以向它询问 pandora.com 域中的所有内容，但如今很少有 dns 服务器会允许此类事情。

但是...如果您知道 pandora.com 中的所有内容都有一个从 172.16.0.0 到 172.16.0.255 （所谓的网络块，您可以使用 whois 获得的东西）之间开始的 IP 地址，您可以添加整个网络的路由，例如：

```
ip route add 172.16.0.0/24 dev ppp0 
```

另请注意，我在那里使用了 iproute2 命令，而不是 /sbin/route。

# excel - Vba检查单元格中是否部分粗体

> ID：16209572
> 
> 赞同：8
> 
> 时间：2013-04-25T08:11:41.647
> 
> 标签：excel, vba, formatting, cell

我正在从工作表中的文本列表生成 XML，但我不知道如何检查当前单元格中是否包含粗体字。我需要做的是检查 A 列中的每个单元格，将文本读入字符串，如果我点击任何粗体字，请在其周围添加标签。

我知道您可以逐个字符地读取单元格内容，但不能读取其格式。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T08:37:48.217

这是一种可用于检查单元格是否具有

1.  粗体的混合字符。在这种情况下，它将返回`NULL`
2.  所有字符都是粗体。在这种情况下，它将返回`TRUE`
3.  没有一个字符是粗体的。在这种情况下，它将返回`FALSE`

**例子**

![在此处输入图像描述](https://i.stack.imgur.com/KSX9q.png)

```
Sub Sample()
    Debug.Print Range("A1").Font.Bold
    Debug.Print Range("A2").Font.Bold
    Debug.Print Range("A3").Font.Bold
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/jd6iT.png)

要检查单元格是否有任何粗体字符，您也可以使用此函数（*来自 VBA 或 Worksheet*）

```
'~~> This is an additional function which will return...
'~~> TRUE if Cell has mixed/all chars as bold
'~~> FALSE if cell doesn't have any character in bold.
'~~> This can also be used as a worksheet function.
Function FindBoldCharacters(ByVal aCell As Range) As Boolean
    FindBoldCharacters = IsNull(aCell.Font.Bold)
    If Not FindBoldCharacters Then FindBoldCharacters = aCell.Font.Bold
End Function 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/gxEL3.png) ![在此处输入图像描述](https://i.stack.imgur.com/tFPiL.png)

您可以使用它`.Characters().Font.FontStyle`来检查每个字符是否为粗体。使用上面的 Range`A1`示例。

```
Sub Sample()
    For i = 1 To Len(Range("A1").Value)
        Debug.Print Range("A1").Characters(i, 1).Font.FontStyle
    Next i
End Sub 
```

**截图**

![在此处输入图像描述](https://i.stack.imgur.com/4PV8B.png)

**修改后的代码**

```
Sub Sample()
    For i = 1 To Len(Range("A1").Value)
        If Range("A1").Characters(i, 1).Font.FontStyle = "Bold" Then
            Debug.Print "The " & i & " character is in bold."
        End If
    Next i
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/lpOvb.png)

# windows - 如何使用 powershell(1.0) 读取文本文件中的最后一个单词？

> ID：16209574
> 
> 赞同：0
> 
> 时间：2013-04-25T08:11:41.757
> 
> 标签：windows, powershell

我有一个如下的文本文件内容，

* * *

```
 123    123   123   123   123   Exchange 
```

* * *

我想要最后一个词“ *Exchange* ”，需要powershell中的解决方案。请帮我。

注意：文件开头是TAB，中间也是Character。

谢谢，拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:18:18.720

拆分行，如果存在则删除空条目，并获取最后一个元素：

```
$content= Get-Content file.txt
$content.Split("`t",[System.StringSplitOptions]::RemoveEmptyEntries)[-1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:20:58.583

此函数将采用文本文件路径并返回文本文件最后一行的最后一个单词。它将忽略文本文件中可能存在的任何空行。

```
Function Get-Last-Word($path){ 
    $file = (Get-Content $path | Measure-Object)
    $numberOfLines = $file.Count
    $numberOfWords = (Get-Content $path | Select -Index ($numberOfLines -1) | Measure-Object -word)
    $Line = Get-Content $path | Select -Index ($numberOfLines -1)
    $wordArray = $Line.Split("`t")
    $wordArray[($numberOfWords.Words - 1)]
} 
```

例子： `Get-Last-Word "C:\Myfolder\MyTextfile.txt"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:22:37.550

这个单线怎么样：

```
[Regex]::Match((Get-Content .\file_name.txt) -Join ' ', '(\w+)[^\w]*$').Groups[1].Value 
```

不确定您在 Powershell v1 上是否有 -Join，如果有，那么：

```
$t = '';Get-Content .\file_name.txt | % {$t += " $_"};[Regex]::Match($t, '(\w+)[^\w]*$').Groups[1].Value 
```

# css - SASS Mixin 没有产生预期的结果

> ID：16209575
> 
> 赞同：2
> 
> 时间：2013-04-25T08:11:43.360
> 
> 标签：css, sass, mixins

我第一次将 SASS 用于一个项目，我喜欢它。我再也不想写纯 CSS 了。但是，我对以下情况感到有些困惑，希望我遗漏了一些非常明显的东西。

首先，我有以下 SCSS（包括 CSS 输出）：

```
// SCSS
.pos-button {
    @include linear-gradient($color-secondary-green, !important);
    @include text-shadow(lighten($color-secondary-green, 10%), !important);
    &:active {
        box-shadow:inset 0 0 5px 2px darken($color-secondary-green, 20%) !important;
    }
    &:hover {
        @include linear-gradient(darken($color-secondary-green, 10%), !important);
        @include text-shadow($color-secondary-green);
    }
}

// CSS OUTPUT    
.pos-button {
  background: #99c965 !important;
  background: -moz-linear-gradient(#99c965, #669434) !important;
  background: -webkit-linear-gradient(#99c965, #669434) !important;
  background: -o-linear-gradient(#99c965, #669434) !important;
  background: -ms-linear-gradient(#99c965, #669434) !important;
  background: linear-gradient(#99c965, #669434) !important;
  text-shadow: 0 1px #99c965 !important; }
  .pos-button:active {
    box-shadow: inset 0 0 5px 2px #4c6e27 !important; }
  .pos-button:hover {
    background: #80ba41 !important;
    background: -moz-linear-gradient(#80ba41, #4c6e27) !important;
    background: -webkit-linear-gradient(#80ba41, #4c6e27) !important;
    background: -o-linear-gradient(#80ba41, #4c6e27) !important;
    background: -ms-linear-gradient(#80ba41, #4c6e27) !important;
    background: linear-gradient(#80ba41, #4c6e27) !important;
    text-shadow: 0 1px #80ba41; } 
```

现在，问题。我想将上面的内容重构为一个 mixin，但该`:hover`属性没有出现在 CSS 输出中：

```
// SCSS
.pos-button {
    @include color-buttons($color-secondary-green);
}

@mixin color-buttons($color) {
    @include linear-gradient($color, !important);
    @include text-shadow(lighten($color, 10%), !important);
    &:active {
        box-shadow:inset 0 0 5px 2px darken($color, 20%) !important;
    }
    &:hover {
        @include linear-gradient(darken($color, 10%), !important);
        @include text-shadow($color);
    }
}

// CSS OUTPUT
.pos-button {
  background: #99c965 !important;
  background: -moz-linear-gradient(#99c965, #669434) !important;
  background: -webkit-linear-gradient(#99c965, #669434) !important;
  background: -o-linear-gradient(#99c965, #669434) !important;
  background: -ms-linear-gradient(#99c965, #669434) !important;
  background: linear-gradient(#99c965, #669434) !important;
  text-shadow: 0 1px #99c965 !important; }
  .pos-button:active {
    box-shadow: inset 0 0 5px 2px #4c6e27 !important; } 
```

有什么想法是什么问题，或者我是否遇到了 SASS 的限制？我可以将`:active`and`:hover`属性拆分为它们自己的 mixin，但我真的很想把它变成一个单独的，因为我试图让这个项目尽可能 DRY。

谢谢！

**编辑**

混合：

```
@mixin text-shadow($color, $important : null) {
    text-shadow:0 1px $color $important;
}

@mixin linear-gradient($color, $important : null) {
    $from:lighten($color, 10%);
    $to:darken($color, 10%);
    background: $from $important; // Old browsers
    background: -moz-linear-gradient($from, $to) $important; // FF3.6+
    background: -webkit-linear-gradient($from, $to) $important; // Chrome10+,Safari5.1+
    background: -o-linear-gradient($from, $to) $important; // Opera 11.10+
    background: -ms-linear-gradient($from, $to) $important; // IE10+
    background: linear-gradient($from, $to) $important; // W3C
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:08:02.033

对我来说很好： http: [//sassmeister.com/gist/5458986](http://sassmeister.com/gist/5458986)所以它一定是你的代码结构有问题。

我注意到你在声明它之前调用了一个 mixin。除非您之前定义了 mixin 并且您正在尝试重新定义它，否则这应该会引发错误。您最初是在没有`&:hover`零件的情况下定义它的吗？

请仔细检查您没有在自己的脚上开枪。

# android - 一个本地容器（.apk），可以将 html 文件作为应用程序加载到设备中

> ID：16209576
> 
> 赞同：1
> 
> 时间：2013-04-25T08:11:44.310
> 
> 标签：android, cordova, jquery-mobile, sencha-touch-2

我正在尝试使用 html5 css3 和 jquery 开发一个 Web 应用程序，我想在真实设备中进行测试，我已将所有 html 文件放在服务器中并在带有浏览器的设备中进行测试。有没有一种方法可以构建一个本地容器，我可以将它安装在设备中，它可以像应用程序一样全屏显示我的 html 页面。适用于 Android 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:28:26.303

您唯一需要使用的是Phonegap。

[本](http://mobile.tutsplus.com/tutorials/mobile-web-apps/jquery_android/)教程将帮助您学习如何使用 Phonegap 和 jQuery Mobile 创建 apk 文件。

Phonegap可以有多种组合使用，我会按照难度从低到难排列。

1.  PhoneGap/Cordova+ jQuery Mobile -> 低难度

    Phonegap 是您需要的，jQM 仅用于 UI。这种组合仍然很容易一起实现，并且有很多工作示例。Phonegap 服务器作为 HTML5/JS/CSS 的包装器，它可以让您访问手机功能专家。Phonegap 将用于拍照，jQM 将用于修改。

2.  PhoneGap/Cordova+ Sencha Touch -> 中等/困难难度

    与 jQM Sencha Touch 不同，学习起来有点困难（或者更难），特别是如果您没有良好的 javascript 背景知识或没有 Sencha 设计器工具的许可证。只有当你有足够的时间来学习新东西时，才走这条路。

值得一提的是 Rhomobile。类似于 Phonegap/Cordova 但较少使用。

***编辑 ：***

这是一个 Phonegap + jQuery Mobile 的例子：[http](http://therockncoder.blogspot.com/2012/07/jquery-mobile-phonegap-and-camera.html) ://therockncoder.blogspot.com/2012/07/jquery-mobile-phonegap-and-camera.html ，在那里你会找到一个用于 Android 和 iOS 实现的 github 链接。

**更新**

您可能还对开源[PropertyCross](http://propertycross.com/)项目感兴趣，该项目演示了使用一系列跨平台框架（包括 Sencha、jQM 和 PhoneGap）实现的相同应用程序。

# ios - iOS 6.1输入中文时UIKeyboard崩溃

> ID：16209582
> 
> 赞同：1
> 
> 时间：2013-04-25T08:12:01.210
> 
> 标签：ios, crash, calayer, uikeyboard

我有一个`UITextField`接受用户输入来搜索服务器端的内容。只需输入英文就一切顺利。当我尝试输入中文时，应用程序崩溃了（但不是每次都崩溃）。

我得到以下堆栈跟踪：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreGraphics                    0x33a72568 argb32_image_mark + 1732
1   CoreGraphics                    0x33a97f6c argb32_shade + 380
2   libRIP.A.dylib                  0x33dd625c ripl_BltShade + 1116
3   libRIP.A.dylib                  0x33dd578c ripc_DrawShading + 4812
4   CoreGraphics                    0x33a9738e CGContextDrawLinearGradient + 170
5   UIKit                           0x35915a4a UIKBDrawLinearGradient + 38
6   UIKit                           0x35c63abe -[UIKeyboardCandidateUnsplitKeyboardToggleButton toggleButtonBackgroundImageWithHighlight:] + 302
7   UIKit                           0x35c63938 -[UIKeyboardCandidateUnsplitKeyboardToggleButton updateBackgroundImages] + 48
8   UIKit                           0x35c63bd4 -[UIKeyboardCandidateUnsplitKeyboardToggleButton setDrawsBackground:] + 44
9   UIKit                           0x35c636e8 -[UIKeyboardCandidateUnsplitKeyboardToggleButton initWithFrame:] + 108
10  UIKit                           0x35bc05ca -[UIKeyboardCandidateGridHeader initWithFrame:] + 434
11  UIKit                           0x35c605e0 -[UIKeyboardCandidateView_iPhone_Bar initWithFrame:] + 324
12  UIKit                           0x35c5ed72 +[UIKeyboardCandidateView sharedInstance] + 242
13  UIKit                           0x35a5022c -[UIKeyboardImpl updateTextCandidateView] + 340
14  UIKit                           0x358fd648 -[UIKeyboardImpl setCandidates:] + 296
15  UIKit                           0x35a4fda2 -[UIKeyboardImpl updateCandidateDisplayAsyncWithCandidates:forInputManager:] + 146
16  TextInput                       0x394aa802 -[TIWordSearchOperationGetCandidates completeSearchOnMainThreadWithResults:] + 94
17  Foundation                      0x3431049c __NSThreadPerformPerform + 456
18  CoreFoundation                  0x339cd8f4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
19  CoreFoundation                  0x339cd158 __CFRunLoopDoSources0 + 208
20  CoreFoundation                  0x339cbf2a __CFRunLoopRun + 642
21  CoreFoundation                  0x3393f238 CFRunLoopRunSpecific + 352
22  CoreFoundation                  0x3393f0c4 CFRunLoopRunInMode + 100
23  GraphicsServices                0x3751e336 GSEventRunModal + 70
24  UIKit                           0x3585b2b4 UIApplicationMain + 1116 
```

每次应用程序崩溃时，崩溃日志几乎相同。我已经花了几天时间，找不到任何解决方案。

有人对这个有了解吗？

--

我发现一个问题可能会导致这个问题。

我在我的项目中使用 ARC，在根视图控制器的 -[viewDidLoad] 消息中，我创建了一个子视图控制器，并在子视图控制器的 -[viewDidLoad] 消息中，创建一个 NSTimer 并添加到当前运行循环中刷新子视图控制器中的子层。

在我评论创建 NSTimer 的代码后，崩溃就消失了。

我会努力找出原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T03:07:16.287

您是否使用了 UIGraphicsBeginImageContextWithOptions ，而不是通过 UIGraphicsEndImageContext 释放上下文。或类似的东西。

# php - Dropzone.js - $_FILES 为空

> ID：16209584
> 
> 赞同：1
> 
> 时间：2013-04-25T08:12:05.867
> 
> 标签：php, upload, dropzone.js

我有以下代码：

```
<form id="dvw-psa-enter-form" method="post" action="<?php echo site_url() . '/?upload' ?>" enctype="multipart/form-data">
 <div class="dropzone">
    <div class="fallback">
      <input name="file" type="file" multiple />
    </div>
  </div>
  <input type="submit" name="senden" />
</form>

<script src="<?php echo plugins_url() . '/dvelop-workflow-psa/dropzone.js' ?>"></script>
<script>
jQuery(".dropzone").dropzone({
  url: "<?php echo plugins_url() . '/upload' ?>",
  dictDefaultMessage: "Datei bitte hier ablegen!",
  success: function() {
    jQuery('.success-mark').show();
    jQuery('.error-mark').hide();
  },
  error: function() {
    jQuery('.success-mark').hide();
    jQuery('.error-mark').show();
  }
});
</script> 
```

在我的 php 文件中 $_POST 有一些信息，但 $_FILES 是空的。触发成功事件：成功标记可见，但目录中没有文件且 $_FILES 为空。使用经典变体，一切都很好。

php.ini 设置正确。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T20:00:14.350

尝试使用尾随空格的 url。当 url 是路径时，它将自动重定向到 /upload/，但清空 $_FILES 数组。

# javascript - 在 Javascript 中区分触摸和交换事件

> ID：16209586
> 
> 赞同：0
> 
> 时间：2013-04-25T08:12:14.810
> 
> 标签：javascript, jquery, iphone, uiwebview

我有一个用于交换图像的图像库。在画廊中，我使用了 touchstart、touchmove、touchend 和 touchcancel 事件。但现在我也需要处理触摸事件。那么，我是否在移动设备上分别区分触摸和交换事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T20:11:34.950

我正在使用这个技巧：

```
$("#some_element")
        .on('touchstart', function(e) {
            touch_y = e.changedTouches[event.changedTouches.length - 1].clientY;
            touch_x = e.changedTouches[event.changedTouches.length - 1].clientX;
        })
        .on("click touchend", function (e) {
            if(e.type=='touchend' && (Math.abs(touch_y-e.changedTouches[event.changedTouches.length - 1].clientY)>3 || Math.abs(touch_x-e.changedTouches[event.changedTouches.length - 1].clientX)>3)) return;
            // Your code here
            alert('This element only touched, not swiped');
        }); 
```

# java - 多次部署具有通用服务名称的 Axis2 服务组

> ID：16209588
> 
> 赞同：0
> 
> 时间：2013-04-25T08:12:20.600
> 
> 标签：java, web-services, deployment, axis2

我目前有一个 Axis2 Web 服务，它只有一个未命名的服务，Axis2 使用 .aar 文件或服务目录的名称为该服务生成一个服务名称，这取决于我部署的服务是否会自动展开。这样，我可以在 Axis2 的服务目录中的不同服务文​​件夹下部署具有一些不同配置文件的相同服务，而无需配置不同的服务名称或其他。类似于以下内容：

*   [...]axis2\WEB-INF\services\service1\META-INF\service.xml
*   [...]axis2\WEB-INF\services\service2\META-INF\service.xml
*   [...]axis2\WEB-INF\services\service3\META-INF\service.xml

在此示例中，我将部署相同的服务 3 次，它们的文件夹中只有不同的配置文件，这意味着 service.xml 对于所有服务都是相同的。如果我提供了一个服务名称，这将不起作用，因为服务名称需要在所有 Axis2 服务中都是唯一的。

不，我想在上述提供的服务中添加第二个服务，这意味着每个服务都包含一个服务组，其中至少有两个服务。在这种情况下，Axis2 需要服务的名称，我希望它是通用的，并且在所有服务中都相同，因为我不想为每个部署的服务更改 service.xml。我想将我的服务称为“上传”、“下载”等。

默认情况下，Axis2 无法部署具有相同命名服务的三个服务，但我可以做的是实现接口 ServiceLifeCycle 并将 startUp 方法中的服务名称更改为唯一的名称，例如通过生成随机 UUID 或其他方式。这样，服务名称就不再是确定性的了，因此我更喜欢在 service.xml 中配置的服务名称前面加上服务部署文件夹的命名方案。类似于以下内容：

*   服务1.上传
*   服务1.下载
*   服务2.上传
*   服务2.下载 [...]

似乎我[无法在它的 startUp 方法调用期间获取服务的部署文件夹](https://stackoverflow.com/questions/16209016/determine-filesystem-path-of-axis2-service-during-startup)，因此您知道部署由具有通用命名服务的服务组组成的服务的任何其他方法吗？请记住，总体目标是约定优于配置，我只是不想为每个部署的服务更改 service.xml，而只是将服务部署到不同的唯一文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:31:06.787

可以使用 AxisService.getClassLoader().getResource() 访问服务文件夹中的文件并获取服务文件夹的绝对路径。根据访问的文件，您可以通过获取访问文件的父级和一些约定来简单地确定服务的部署文件夹。如果您有部署文件夹，您可以使用它的名称和服务组中配置的服务名称将其设置为生命周期类的 startUp 方法中的新服务名称。由于部署文件夹已经需要在 Axis2 的服务文件夹中是唯一的，因此您对所有服务都具有唯一性，并且可以使用您希望使用此命名约定来命名部署文件夹的任何约定，以便 Web 服务客户端访问服务。

重要的部分只是在生命周期类的 startUp 方法中更改服务名称，因为之后服务名称只需要唯一，并使用类加载器获取到服务目录的绝对路径。

[感谢 Kenster 使用类加载器。](https://stackoverflow.com/a/16219119/2055163)

# c - fread 函数只读取大约 700kb

> ID：16209590
> 
> 赞同：-3
> 
> 时间：2013-04-25T08:12:30.117
> 
> 标签：c, fread

我正在尝试打开并读取 4 MB 的 bin 文件，但无法`fread`读取超过 ~700 KB 的内容。实际上我想打开并读取 genesis ROM 文件，它是二进制格式，读取应该从开始到最后一个字节。当尝试读取该数量时，运行时会发生错误，程序停止并关闭。

我的代码：

```
#include <stdio.h>
int main ()
{
    FILE* fp;
    int buffer[4000000];
    fp=fopen ("file.bin","rb");
    fread (buffer,sizeof(int),4000000,fp);
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:14:41.943

请在循环中针对特定的块大小执行读取操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:28:19.080

[1] 缺少返回（返回负数表示发生错误）

[2] 使用malloc（动态分配堆外）而不是堆栈

[3] 检查文件读取、内存分配和读取字节数的指针值

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
    FILE * pFile;
    char * buffer;
    size_t size = 4194304;
    size_t result;

    pFile = fopen ( "file.bin" , "rb" );
    if (pFile==NULL) {
       fputs ("Unable to open file",stderr); 
       return (-1);
    }

    buffer = (char*) malloc (sizeof(char)*size);
    if (buffer == NULL) {
        fputs ("Unable to allocate memory",stderr); 
        return (-2);
    }

    result = fread (buffer,1,size,pFile);
    if (result != size) {
       fputs ("Unable to read 4 MB",stderr); 
       return (-3);
    }

    fclose (pFile);
    free (buffer);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:18:40.230

更好的选择是加载文件我的块。

另外为了不耗尽堆栈，您应该使用动态分配的缓冲区，因为`heap`它大于`stack`.

```
#define BLOCK_SIZE 4096

#include <stdio.h>
#include <stdlib.h>

int read_file(FILE* file, unsigned char* buffer);

int main ()
{
     FILE* fp;
     unsigned char* buffer = NULL;
     int bytes_read = 0;
     fp=fopen ("file.bin","rb");
     bytes_read = read_file(fp, buffer);
     return 0;
}

int read_file(FILE* file, unsigned char* buffer)
{
    int bytes_read = 0;
    int block_bytes_read = 0;
    unsigned char block[BLOCK_SIZE];

    do
    {
         block_bytes_read = fread (block,sizeof(char),BLOCK,file);
         buffer = realloc(buffer, block_bytes_read*sizeof(char));
         memcpy((buffer + bytes_read), block, block_bytes_read*sizeof(char));
         bytes_read += block_bytes_read;
    } while (block_bytes_read != 0);

   return bytes_read;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:19:13.503

制作`buffer`一个静态变量，这样它就不会驻留在堆栈上。

此外，`fread`请在循环内使用，因为不能保证一次读取所有文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:14:06.100

这段代码我最大的问题是在这一行：

```
fread (buffer,sizeof(int),4000000,fp); 
```

实际上，这一行引入了一系列重要的问题。首先，不能保证您正在读取的文件已成功打开。正如其他人所指出的那样，您需要进行比较`fp`才能`NULL`做出保证。其次，我似乎经常强调这种方式：*你真的应该检查 return value*。这适用于*所有标准 C 函数*，而不仅仅是*fopen*和*fread*。

*fread*的返回值告诉您*实际读取*了多少项目。假设您请求 400 万个`int`s，而该文件仅包含两个。返回值会告诉你只`int`读取了两个 s。

* * *

现在，进入大事！让我们首先考虑`sizeof(int)`在不同的实现上有所不同。您的系统可能会读取 4 个字节，而另一个可能会读取 2 个字节，而另一个可能会读取 8 个字节。这只是*整数表示*可能不同的基本但基本方式。

让我们考虑一种更微妙但同样具有破坏性的*整数表示*可能不同的方式：假设您`int`的 s 是四个字节，最左边的位是最低有效位。另一台机器可能使用最左边的位作为*最低*有效位。同样，考虑*字节顺序*，即字节顺序。

假设您`int`的 s 是 32 位，它们代表 和 之间的值`-(1 << 31)`，`(1 << 31)`这意味着没有填充位。另一个系统可能使用具有 16 位填充的 32 位整数，这意味着它可能只表示 和 之间的`-(1 << 16)`值`(1 << 16)`。假设这些填充位是奇偶校验位，以确保 RAM 正常运行（例如 Intel Xeon 服务器）。现在，您的服务器会告诉您 RAM 有故障，而实际上并非如此。

您的代码应明确地将文件用于存储整数的整数表示转换为计算机本机使用的任何表示。将整数写入文件时，您需要确保将实现表示明确转换*为该*表示。同样，当从文件中读回整数时，您的代码应该将该表示显式转换为您的实现表示。

例如，让我们假设您的`int`值不会超出`-32767`或`32767`（16 位有符号整数，一个的补码）。使用两个字节表示它是可移植的，*但您需要明确定义该整数的符号和表示*。写入时，您可以提取符号和绝对值，然后写入`sign * 128 + absolute_value / 256`文件`absolute_value % 256`。阅读时，您将提取符号位，乘以并添加以重建您的值。

* * *

让我们考虑一下您的文件应该是 4MB，但您正在读取`sizeof (int) * 4000000`值。4MB 是`0x400000`，不是`sizeof (int) * 4000000`。我想您真正想要的是以下内容：

```
unsigned char *foo = malloc(0x400000); /* 4MB */

/* XXX: Handle malloc errors here */
assert(foo != NULL);

FILE *fp = fopen("file.bin", "rb");

/* XXX: Handle fopen errors here */
assert(fp != NULL);

size_t num_bytes_read = fread(foo, 1, 0x400000, fp);

/* XXX: Transform the bytes into integers */

free(foo); 
```

* * *

我的问题是它依赖一个 4MB 的缓冲区来读取字节并将其转换为整数。这个任务根本不需要缓冲区！

```
FILE *fp = fopen("file.bin", "rb");

/* XXX: Handle fopen errors here */
assert(fp != NULL);

for (;;) {
    int x = fgetc(fp);

    /* XXX: Handle fgetc errors here */
    assert(x >= 0);

    int y = fgetc(fp);

    /* XXX: Handle fgetc errors here */
    assert(y >= 0);

    /* XXX: Transform the characters in x and y into the int values */
};

free(foo); 
```

* * *

问题中未指定您是否需要将这些转换后的值存储在某处。如果您不需要，那么我的下一个问题是数组的使用，当您可能只是读取单个项目，处理它然后移动到下一个项目时。

# java - 从java中的多个类扩展

> ID：16209591
> 
> 赞同：0
> 
> 时间：2013-04-25T08:12:30.660
> 
> 标签：java, design-patterns, multiple-inheritance, composition

我知道java不支持多重继承。我有 3 个具体的基类 A、B 和 C。我想在单个类中重用 A、B 和 C 中的所有实用方法 DI 不能使用组合，因为不能使用 A、B 和 C 类。请给我一条出路。

谢谢和问候， Saurabh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:14:04.273

首先，使用多个接口是可能的（并且非常普遍）。

如果为了使用多个扩展类，您需要使用：

`A extends B`，`B extends C`但`D extends A`并不总是可能的。

考虑使用[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)而不是多重继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:56:58.350

我认为你可以使用 Facade 模式

[门面 http://i.msdn.microsoft.com/dynimg/IC400938.png](http://i.msdn.microsoft.com/dynimg/IC400938.png)

至于你的例子：

*   SubsystemA 是你的 A 类

*   SubsystemB 是你的 B 类

*   SubsystemC 是你的 C 类

*   Facade 是你的 D 类，你可以在其中做任何你想做的事。

我认为您可以以这种方式使用组合，因为它不会破坏封装。

# port - 将数据注入com端口

> ID：16209597
> 
> 赞同：0
> 
> 时间：2013-04-25T08:12:44.460
> 
> 标签：port, virtualization

我有一个向应用程序发送数据的心理设备。

我的问题是：

有没有办法可以使用设备使用的相同 COM 端口向该应用程序注入数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T05:31:54.987

有几种方法可以做到这一点，但据我所知，没有一种方法特别容易。

技术答案会因系统而异，但我这样做的方法是创建一个位于您的应用程序和真正的串行驱动程序之间的过滤器驱动程序。然后您可以窥探收到的数据包并根据需要注入您的数据。如果您的操作系统不支持过滤器驱动程序，那么用修改版本替换串行驱动程序将是可行的方法。

如果您可以修改您的问题以提供更多详细信息，我可以对我的回答做同样的事情。

# javascript - 如何为文本框设置货币格式？

> ID：16209599
> 
> 赞同：1
> 
> 时间：2013-04-25T08:12:46.447
> 
> 标签：javascript, asp.net

我想在文本框中输入数字，文本框会自动将这些数字转换为货币。（12,345,654）

我可以使用 FilteredTextBoxExtender

```
<ajaxToolkit:FilteredTextBoxExtender ID="ftbe" runat="server"
TargetControlID="TextBox3"         
FilterType="Custom, Numbers"
ValidChars="," /> 
```

但是我想在用户输入数字时自动添加逗号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T06:06:02.157

我使用 javascript 代码。

```
 function Comma(Num) { //function to add commas to textboxes
        Num += '';
        Num = Num.replace(',', ''); Num = Num.replace(',', ''); Num = Num.replace(',', '');
        Num = Num.replace(',', ''); Num = Num.replace(',', ''); Num = Num.replace(',', '');
        x = Num.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1))
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        return x1 + x2;
    }

<asp:TextBox ID="aPriceTextBox" runat="server" Width="100px"    onkeyup = "javascript:this.value=Comma(this.value);" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:28:46.223

您可以使用 ajax maskedit extander
这里有一些例子：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
        <asp:TextBox ID="TextBox1" runat="server" />
        <cc1:MaskedEditExtender runat ="server"
            TargetControlID="TextBox1"
            Mask="999,999,999,999"
            MessageValidatorTip="true"
            MaskType="Number"
            InputDirection="RightToLeft"
            AcceptNegative="Left"
            DisplayMoney="None"
            ErrorTooltipEnabled="True" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:19:51.180

在这里使用[屏蔽编辑控件](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/maskededit/maskededit.aspx)是一个好主意。

查看StackOverflow 上的[这篇文章以获取更多信息。](https://stackoverflow.com/q/202067/1654121)它建议了为货币字段实现文本框的方法。

你也可以参考codeplex上的[这个组件。](http://currencytextbox.codeplex.com/)

# oracle - 如何让 Hibernate 只使用 Oracle 序列

> ID：16209601
> 
> 赞同：1
> 
> 时间：2013-04-25T08:12:50.520
> 
> 标签：oracle, hibernate

我真的希望有人能帮忙！

我已成功使用 Spring/Hibernate 基于 Web 的应用程序 (Tomcat 6x) 将记录插入 Oracle 数据库。我正在向其中写入记录的 Oracle 数据库表相当简单 - 但重要的是要知道表的第一列需要使用专用 Oracle 序列提供的值填充。

我遇到的问题是，当我插入一行时，我似乎并不总是得到 Oracle 序列的值。

这是一些代码，它说明了我自己尝试解决此问题所采取的步骤：

```
@Entity
@Table(name="MARTINI_STORE.STY_ORDER_RETRY_PAYMENT")
public class STYOrderRetryPayment implements Serializable {
/**
 * Serializable class - generated UID
 */
private static final long serialVersionUID = 4396053457149921483L;

@Id
@GeneratedValue(generator="audit_seq")
@GenericGenerator(  name = "audit_seq", strategy = "sequence", parameters = {  @Parameter(name = "sequence", value = "MARTINI_STORE.STY_SOR_ID_SEQUENCE") }
)
@Column(name="SOR_ID", nullable=false)
private long sorId; 
```

上面的代码显示了我用来将数据持久化到表中的 bean 的片段。字段 sorId 映射到数据库表上的列，该列应填充专用 Oracle 序列提供的值。

我曾尝试寻找此问题的答案，但我尝试过的任何方法似乎都不起作用......

# lua - 如何提高 Redis 服务器的 CPU 使用率？

> ID：16209605
> 
> 赞同：4
> 
> 时间：2013-04-25T08:13:00.287
> 
> 标签：lua, redis, benchmarking

我的目标是让我们的 Redis 服务器在生产中达到大约 80% 的 CPU 利用率。这将有利于我们的后端服务器设计，确保我们不会未充分利用 CPU，同时也为增长和峰值留出一些空间。

在使用 Redis 自己的基准测试工具`redis-benchmark`时，很容易达到大约 100% 的 CPU 使用率：

```
 $ redis-benchmark -h 192.168.1.6 -n 1000000 -c 50 
```

在这个基准测试中，我们分配了 50 个客户端向我们的 Redis 服务器推送 1,000,000 个请求。

但是在使用其他一些客户端工具（如[redis-lua](https://github.com/nrk/redis-lua)或[webdis](https://github.com/nicolasff/webdis)）时，最大 CPU 使用率低于 60%。

我浏览了一些代码`webdis`和`redis-lua`. `webdis`依赖于`hiredis`，并`redis-lua`在 Lua 中实现，依赖于 socket( `lua-socket`)。

与 Redis 基准测试相比，这些客户端是否太慢并且无法最大化 Redis CPU 消耗？

我还浏览了`redis-benchmark.c`. 基准测试的主要工作是在`aeMain`. 似乎`redis-benchmark`使用来自 Redis 的快速代码，而我的测试客户端（`webdis`和`redis-lua`）没有。

目前我的客户有两种选择：

1.  利用`redis-lua`
2.  使用类似的工具`webdis`

但是，这两个并没有最大化 Redis 的 CPU 利用率（低于 60%）。还有其他选择吗？

或者，是否可以在`redis-benchmark`工具本身之外充分利用 redis-server？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T12:19:37.323

我怀疑最大化 Redis 的 CPU 使用率是否会有益于您的后端设计。正确的问题是 Redis 是否足够高效以在给定的延迟下维持吞吐量。Redis 是单线程服务器：在 80% 的 CPU 消耗下，延迟可能会非常糟糕。

我建议您在 redis-benchmark 工作时测量延迟，以查看它是否可以满足您的需求，然后再尝试增加 Redis CPU 消耗。redis-cli 的 --latency 选项可用于此：

*   启动 redis 服务器
*   尝试 redis-cli --latency，记下 avg 值，停止它
*   在另一个窗口中，启动基准测试，并确保它运行一段时间
*   尝试 redis-cli --latency，记下 avg 值，停止它
*   停止基准测试
*   比较两个平均值

现在，如果你真的想增加 Redis CPU 消耗，你需要一个高效的客户端程序（如 redis-benchmark），能够同时处理多个连接，或者客户端程序的多个实例。

Lua 是一种快速解释型语言，但它仍然是一种解释型语言。它会比 C 代码慢一到两个数量级。Redis 在解析/生成其协议方面比 lua-redis 快得多，因此您将无法使用唯一的 Lua 客户端使 Redis 饱和（除非您使用 O(n) Redis 命令 - 见下文）。

webdis 是用 C 实现的，具有高效的客户端库，但必须解析 http/json 协议，这恰好比 Redis 协议更冗长和复杂。对于大多数操作，它可能比 Redis 本身消耗更多的 CPU。同样，您不会用单个 webdis 实例使 Redis 饱和。

下面是一些使用多个 Lua 客户端使 Redis 饱和的示例。

如果尚未完成，我建议您先查看[Redis 基准页面](http://redis.io/topics/benchmarks)。

**如果您在与 Redis 相同的机器上运行基准测试：**

关键是将一个核心专用于Redis，并在其他核心上运行客户端程序。在 Linux 上，您可以为此使用 taskset 命令。

```
# Start Redis on core 0
taskset -c 0 redis-server redis.conf

# Start Lua programs on the other cores
for x in `seq 1 10` ; do taskset -c 1,2,3 luajit example.lua & done 
```

Lua 程序应该使用流水线来最大化吞吐量并减少系统活动。

```
local redis = require 'redis'
local client = redis.connect('127.0.0.1', 6379)
for i=1,1000000 do
    local replies = client:pipeline(function(p)
    for j=1,1000 do
            local key = 'counter:'..tostring(j)
            p:incrby(key,1)
        end
    end)
end 
```

在我的系统上，Lua 程序占用的 CPU 是 Redis 的 4 倍多，因此使用这种方法需要 4 个以上的核心才能使 Redis 饱和（6 核心的盒子应该没问题）。

**如果您在与 Redis 不同的机器上运行基准测试：**

除非您在 CPU 匮乏的虚拟机上运行，​​否则在这种情况下，瓶颈很可能是网络。我不认为你可以用任何小于 1 GbE 的链接使 Redis 饱和。

确保尽可能地管道化查询（参见前面的 Lua 程序）以避免网络延迟瓶颈，并降低 CPU 上的网络中断成本（填充以太网数据包）。尝试在未绑定到网卡（并处理网络中断）的核心上运行 Redis。您可以使用 htop 之类的工具来检查最后一点。

如果可以，请尝试在网络的其他各种机器上运行您的 Lua 客户端。同样，您将需要大量 Lua 客户端来使 Redis 饱和（6-10 应该没问题）。

**在某些情况下，一个独特的 Lua 进程就足够了：**

现在，如果每个查询都足够昂贵，则可以使用单个 Lua 客户端使 Redis 饱和。这是一个例子：

```
local redis = require 'redis'
local client = redis.connect('127.0.0.1', 6379)

for i=1,1000 do
    local replies = client:pipeline(function(p)
        for j=1,1000 do
            p:rpush("toto",i*1000+j)
        end
    end)
end

N = 500000
for i=1,100000 do
    local replies = client:pipeline(function(p)
        for j=1,10 do
            p:lrange("toto",N, N+10)
        end
    end)
end 
```

这个程序用 1M 项填充一个列表，然后使用 lrange 命令从列表中间获取 10 个项目（Redis 的最坏情况）。因此，每次执行查询时，服务器都会扫描 500K 项。因为只返回了 10 个项目，所以它们被 lua-redis 快速解析，不会消耗 CPU。在这种情况下，所有的 CPU 消耗都将在服务器端。

**最后的话**

可能有比 redis-lua 更快的 Redis 客户端：

*   [https://github.com/agladysh/lua-hiredis](https://github.com/agladysh/lua-hiredis)（基于hiredis）
*   [https://github.com/agladysh/ljffi-hiredis](https://github.com/agladysh/ljffi-hiredis)（基于hiredis，使用luajit FFI）

您可能想尝试一下。

# java - 如何在 Mockito 中表达“A，然后（B 或 C）”调用顺序？

> ID：16209606
> 
> 赞同：2
> 
> 时间：2013-04-25T08:13:07.043
> 
> 标签：java, mockito

我有三个在模拟对象上调用的方法。在其他两个方法之前调用其中一个方法很重要，但我不关心最后两个调用的顺序。

这个逻辑可以用 Mockito 来表达吗？据我所知，[`InOrder`](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/InOrder.html)该类将强制我对所有三个调用进行排序，如下所示：

```
InOrder inOrder = inOrder(mock);
inOrder.verify(mock).crucialMethod();
inOrder.verify(mock).methodX();
inOrder.verify(mock).methodY(); // <-- I wouldn't care if this was invoked
                                //     before methodX() 
```

我想解决这个问题，以便我的测试与调用最后两个方法的确切顺序不那么紧密。

*[这个问题](https://stackoverflow.com/questions/12421014/mockito-how-do-you-verify-the-group-order-of-certain-groups-of-method-calls)可能是重复的，但我一直在努力理解 OP 正在寻找什么，也不知道答案是否适用于我。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:45:03.293

您可以使用两个 InOrder 对象：

```
import static org.mockito.Mockito.*;

import org.junit.Test;
import org.mockito.InOrder;
import org.mockito.exceptions.verification.VerificationInOrderFailure;

public class MyTest {

    public interface ToBeTested{
        public void crucialMethod();
        public void methodX();
        public void methodY();
    }

    @Test
    public void testXThenY(){
        // Given
        ToBeTested toBeTested = mock(ToBeTested.class);

        // When
        toBeTested.crucialMethod();
        toBeTested.methodX();
        toBeTested.methodY();

        // Then

        InOrder inOrderX = inOrder(toBeTested);
        inOrderX.verify(toBeTested).crucialMethod();
        inOrderX.verify(toBeTested).methodX();

        InOrder inOrderY = inOrder(toBeTested);
        inOrderY.verify(toBeTested).crucialMethod();
        inOrderY.verify(toBeTested).methodY();
    }

    @Test(expected=VerificationInOrderFailure.class)
    public void crucialTooLateForX(){
        // Given
        ToBeTested toBeTested = mock(ToBeTested.class);

        // When

        toBeTested.methodX();
        toBeTested.crucialMethod();
        toBeTested.methodY();

        // Then

        InOrder inOrderX = inOrder(toBeTested);
        inOrderX.verify(toBeTested).crucialMethod();
        inOrderX.verify(toBeTested).methodX();

        InOrder inOrderY = inOrder(toBeTested);
        inOrderY.verify(toBeTested).crucialMethod();
        inOrderY.verify(toBeTested).methodY();
    }

    @Test(expected=VerificationInOrderFailure.class)
    public void crucialTooLateForY(){
        // Given
        ToBeTested toBeTested = mock(ToBeTested.class);

        // When

        toBeTested.methodY();
        toBeTested.crucialMethod();
        toBeTested.methodX();

        // Then

        InOrder inOrderX = inOrder(toBeTested);
        inOrderX.verify(toBeTested).crucialMethod();
        inOrderX.verify(toBeTested).methodX();

        InOrder inOrderY = inOrder(toBeTested);
        inOrderY.verify(toBeTested).crucialMethod();
        inOrderY.verify(toBeTested).methodY();
    }
} 
```

# android - android:layout_centerInParent 不起作用

> ID：16209607
> 
> 赞同：6
> 
> 时间：2013-04-25T08:13:07.290
> 
> 标签：android, android-relativelayout

我有一张想放在屏幕中央的图像。尽管我的期望是，它水平居中但不是垂直居中。即，图像接触屏幕顶部。

相同的布局在沙盒项目中显示正常，但不幸的是在真实项目中不是。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    <!-- ... -->
        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
            <ImageView
                android:id="@+id/progress2"
                android:src="@drawable/wait2"
                android:layout_centerInParent="true"
               android:layout_centerHorizontal="true"
               android:layout_centerVertical="true"
                android:visibility="visible"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                />
        </RelativeLayout> 
```

线条

```
 android:layout_centerHorizontal="true"
               android:layout_centerVertical="true" 
```

当然是不必要的，但在这两种情况下都不起作用。

欢迎任何建议。

编辑：看起来视图从`InputMethodService`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T11:20:12.113

我只是有同样的问题。我用了

```
android:layout_centerInParent 
```

它适用于 AndroidStudio 预览版和带有 4.3 设备的 Nexus 4。但是在带有 2.3 的 Galaxy S1 上它不起作用。

我通过将要居中的 Layout 包装在 RelativeLayout 中并使用重力属性将其居中来修复它：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">

<RelativeLayout
    ... 
```

这在两种设备上都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T07:52:17.623

有时此错误出现在相对布局中的约束布局使用中：

"android:layout_centerInParent="true">

# eclipse - 如何从存储库安装插件到 Eclipse

> ID：16209613
> 
> 赞同：0
> 
> 时间：2013-04-25T08:13:30.180
> 
> 标签：eclipse, maven, plugins, repository, squash

我想从这个存储库安装插件到 Eclipse：

```
http://repo.squashtest.org/maven2/releases/org/squashtest/ta/squash-ta-maven-plugin/ 
```

但我不知道该怎么做。当我单击帮助-> 安装新软件并添加此 URL 时，我没有从该站点获得插件。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:53:45.087

该 url 指向 Squash 的 maven 插件。

对于 eclipse 你必须找到 Squash 的 eclipse 插件。

# api - 如何检索 Cosm 数据流中的所有数据点？

> ID：16209615
> 
> 赞同：1
> 
> 时间：2013-04-25T08:13:30.690
> 
> 标签：api, rest, cosm

给定一个像[https://api.cosm.com/v2/feeds/61916/datastreams/random5.json](https://api.cosm.com/v2/feeds/61916/datastreams/random5.json)这样的数据流，我希望能够像这样浏览提要中的所有数据点：

```
GET ?start=1970-01-01T00:00:00Z&interval=0&offset=0&limit=1000
GET ?start=1970-01-01T00:00:00Z&interval=0&offset=1000&limit=1000
GET ?start=1970-01-01T00:00:00Z&interval=0&offset=2000&limit=1000
... 
```

但是似乎没有`offset`参数，并且 Cosm 需要 a`start`和a 相距`end`不超过[6h](https://cosm.com/docs/v2/history.html)的参数。我真的需要发出数以千计的请求（即每 6 小时间隔一个或多个，从时间开始），还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T04:46:27.787

通过为 API 设置“interval”参数，似乎可以将持续时间指定为[文档](https://cosm.com/docs/v2/history.html)指示的最大值（最多 86400 秒的间隔，支持长达一年的持续时间）。

这个[jsFiddle 示例](http://jsfiddle.net/99n5T/5/)显示了大约 3 周的持续时间，使用时间间隔为 3600 秒，URL 格式如下：

```
http://api.cosm.com/v2/feeds/79903/datastreams/Temperature.json?start=2012-10-15T08:00:00Z&end=2012-11-08T00:00:00Z&interval=3600&limit=1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:55:58.957

目前，对每个点进行分页的方法是，如您所说，使用间隔 = 0，最大 per_page 为 1000，并将请求分成 6 小时的块。

现在我们正在考虑增加这些限制，因为我们的后端存储可以处理它。

抱歉，我现在无法给出更好的答案，但这应该会有所改善。

# jakarta-ee - 嵌套在组件中的xhtml中的f：convertDateTime？

> ID：16209616
> 
> 赞同：1
> 
> 时间：2013-04-25T08:13:31.937
> 
> 标签：jakarta-ee, date, xhtml

我的理解是这段代码：

```
<composite:implementation>
    <p:fieldset>
        <ul>
            <li>
                <h:outputLabel value="#{amsg.possibleTraining}"/>
                <h:outputText value=" #{cc.attrs.offer.workOfferedFrom}">
                    <f:convertDateTime type="date" pattern="dd.MM.yyyy" />
                </h:outputText>
            </li>
        </ul>
     </p:fieldset> 
```

应该给我一个“正常”的日期，但页面仍然显示类似：“Sat Jun 01 00:00:00 CEST 2013”​​。有人知道我做错了什么吗？

非常感谢！

# jquery-plugins - jQuery 多文件上传器 (mfupload.js) 在框架中不起作用

> ID：16209619
> 
> 赞同：0
> 
> 时间：2013-04-25T08:13:53.253
> 
> 标签：jquery-plugins

很棒的应用程序！一个问题，它似乎在框架内不起作用。框架外完全相同的代码确实有效。通过工作，我的意思是它不会初始化并显示“ini_text”，（将文件拖到此处或单击以上传），并且单击上传区域不会执行任何操作。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:08:28.563

找到`!((window.location != window.parent.location) ? true : false)`改变`!((window.location == window.parent.location) ? true : false)`

# java - IncompatibleClassChangeError：类 ClassMetadataReadingVisitor 具有接口 ClassVisitor 作为超类

> ID：16209623
> 
> 赞同：46
> 
> 时间：2013-04-25T08:13:56.923
> 
> 标签：java, spring-mvc, maven-3

我已经使用 spring-mvc 和 mongodb 作为数据库构建了一个 Web 应用程序。我使用 maven3 构建应用程序。

项目构建成功，但是当应用程序启动时，由于我的应用程序无法启动，我在日志中收到以下错误。这曾经在几个月前起作用。

> 引起：java.lang.IncompatibleClassChangeError：类 org.springframework.core.type.classreading.ClassMetadataReadingVisitor 具有接口 org.springframework.asm.ClassVisitor 作为超类

如果有任何指示或你们需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-25T08:15:51.317

当加载的类 ie`ClassMetadataReadingVisitor`不遵守继承的抽象类或接口 ie 的约定时，会发生此错误`ClassVisitor`。

看起来在加载时上述类的不同版本正在您的案例中加载。

似乎您的应用程序中有新的 spring-core jar 和旧的 spring-asm jar。`ClassMetadataReadingVisitor`类正在从spring **-core**和**spring-asm**加载。`ClassVisitor`

 **请检查使用 maven`dependency:tree`命令查看依赖的 jar。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-01-21T13:16:52.383

在 spring 版本 > 3.2.0 中，您不再需要显式包含`spring-asm`，因为它已经包含在`spring-core`.

从您的构建定义中删除`spring-asm`并确保它`spring-core`存在。

[http://static.springsource.org/spring-framework/docs/current/spring-framework-reference/html/migration-3.2.html#migration-3.2-inline-asm](http://static.springsource.org/spring-framework/docs/current/spring-framework-reference/html/migration-3.2.html#migration-3.2-inline-asm)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-25T08:19:01.177

当使用不兼容的 jar 版本时，通常会出现此错误，例如`spring-asm`和`spring-core`. 看看[forum.springsource.org/showthread.php?133341](http://forum.springsource.org/showthread.php?133341)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T23:56:39.833

我有同样的问题，并通过删除我的`spring-data-jpa`依赖来面对它`pom.xml`

它已经包含在`spring-core`依赖项中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-09T11:18:35.667

对于那些移至 3.1.x 以上版本的人的更新......正如[这个答案所表明的那样，这里](https://stackoverflow.com/questions/19800004/why-is-there-no-spring-asm-3-2-4-release-jar)不再有单独的`spring-asm`，所以最好`spring-asm`完全排除，一旦你在 Spring 版本 3.2.x**

# javascript - 当前时间等于特定时间时如何播放声音

> ID：16209628
> 
> 赞同：6
> 
> 时间：2013-04-25T08:14:13.860
> 
> 标签：javascript, html

在我的网页中，我想在当前时间等于 时播放声音，例如下午 5:00。

我所做的是：

```
<script type='text/css'>
var d = new Date();
var m = d.getMinutes();
var h = d.getHours();
if (h == 17 && m == 00){
document.write = "<embed src =\'notify.mp3\' hidden=\'true\' autostart=\'true\' loop=\'true\'></embed>";
}
</script> 
```

我寻找了一个播放声音的特定功能，但我发现`document.write`它不起作用并且没有意义。

任何建议我应该做什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:21:19.437

在 JS 中试试这个：

```
 <script>
var d = new Date();
var m = d.getMinutes();
var h = d.getHours();
if (h == 17 && m == 00){
      var sound = document.getElementById(sound1);
      sound.Play();
}
</script> 
```

不要忘记在 HTML 中添加这个

```
<embed src="notify.mp3" autostart="false" width="0" height="0" id="sound1"
enablejavascript="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:19:49.883

**尝试这样的事情。**

```
document.getElementById("dummy").innerHTML= "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />"; 
```

**使用元素**

该标签定义了一个外部（非 HTML）内容的容器。以下代码片段应该播放嵌入在网页中的 MP3 文件：

例子

```
<embed height="50" width="100" src="horse.mp3"> 
```

**或者试试**

尝试使用此修订版本的函数 play()

```
function play() 
{
  var embed=document.createElement('object');
  embed.setAttribute('type','audio/wav');
  embed.setAttribute('data', 'c:\test.wav');
  embed.setAttribute('autostart', true);
  document.getElementsByTagName('body')[0].appendChild(embed);
} 
```

参考：http : [//www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)

[http://webdesign.about.com/od/sound/a/play_sound_oncl.htm](http://webdesign.about.com/od/sound/a/play_sound_oncl.htm)

[用 JavaScript 播放声音](https://stackoverflow.com/questions/3402859/playing-sound-with-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:27:46.403

我假设您正在尝试创建类似警报的功能。这是我要做的：

```
var delay = 60000; // in milliseconds, check every minute
var intervalId = setInterval("playWhenReady()", delay);

function playWhenReady()
{
    var d = new Date();
    var h = d.getHours();
    var m = d.getMinutes(); 

    if (h === 17 && m === 00)
    {
        playSound('notify.mp3');
        clearInterval(intervalId);              
    }
}

function playSound(soundFile)
{
    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', soundFile);
    audioElement.play();
} 
```

# testing - 在多层环境中使用 QTP

> ID：16209630
> 
> 赞同：0
> 
> 时间：2013-04-25T08:14:21.170
> 
> 标签：testing, qtp

我们有一个系统 A 和一个系统 B，通过系统 O 连接。系统 O 帮助在系统 A 和系统 B 之间转换数据。

到目前为止，我曾经像这样手动测试这个环境：

```
Step 1\. Trigger data from System A, check system A ports such that data were sent out of System A.
Step 2\. Confirm that data was received & transported by System O.
Step 3\. Confirm that data reached System B, and was processed. 
```

我需要以某种方式自动化整个测试场景。我只有有限的使用 QTP 的技能。我一次最多只能自动化一个系统。

我可以知道如何自动化整个测试场景，即单个自动化必须通过上述所有 3 个步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:08:23.910

如果您“*一次最多只能自动化一个系统......”*，我不明白是什么阻止了您自动化整个事情。

如果由于任何技术原因 QTP 不支持您在同一个脚本中与此类系统交互，您仍然可以独立地自动化所有 3 个步骤，将它们链接到另一个脚本中，并通过输出文件（例如）。

换句话说：

QTP 脚本 1：

*   *触发来自系统 A 的数据，检查系统 A 端口，以便将数据从系统 A 发送出去。*
*   将结果存储在`output1.txt`

QTP 脚本 2：

*   建立内部状态基于`output1.txt`
*   *确认系统 O 已接收和传输数据。*
*   将结果存储在`output2.txt`

QTP 脚本 3：

*   建立内部状态基于`output3.txt`
*   *确认数据已到达系统 B，并已被处理*

使用另一个脚本（如批处理文件）一起运行所有 3 个脚本。

# codeigniter - 通过 TinyMCE 发布的图像不会出现在 MySQL 中，因为 BASE64 代码不会通过 POST 发送

> ID：16209631
> 
> 赞同：1
> 
> 时间：2013-04-25T08:14:21.320
> 
> 标签：codeigniter, post, tinymce, ckeditor, base64

我使用 Codeigniter+TinyMCE。当我从数据库中的 textarea 发布文本和图像时，仅显示文本。为了解决这个问题，我增加了 POST 限制大小，max_allowed_pa​​cket。但这没有帮助。然后我输出转储： $_POST['body'] 只得到：

```
<p><img alt="" /></p>, 
```

但在 TinyMCE 源代码中我看到：

```
 <p><img src="data:image/png;base64,iVBORw0....etc.

echo $this->input->post('body', TRUE); 
```

显示：

```
 <p><img alt="" /></p> <div id="mcePasteBin" absolute; top: 0px; left: 0;    background:    red; width: 1px; height: 1px; overflow: hidden" c>  <div c><img alt="" /></div> </div> 
```

PS。我从缓冲区插入图像 CTRL+C/CTRL+V 我也安装了 CKEditor 问题相同。还尝试更改表单 enctype 类型。(

在没有 Codeigniter 的情况下，它也可以在简单的 php 中完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:10:52.310

根据我的经验，通常无法识别数据 URI 图像；我的假设是，这是由于它们的字符串不是以“http”开头，或者不是以已知的图像文件类型（.jpg；.png；.tiff；.bmp；等）结尾。

我相信在您正在运行的程序中会有解决方案，但认为您会对没有的解决方法感兴趣：

将 URI 缩短为正常外观的字符串，以必要的文件类型结尾。

如果 URI 足够短（大约三千以下），您可以使用 tinyurl，然后将结果传递给 doiop.com，因为它们会让您使用您想要的别名（包括任何 <*.filetype>）只要它从他们的域名开始。在将数据库64编码文件发布到Blogspot时，这对我有用，在那些被拒绝的情况下。

如何自动化这是另一回事；我会感兴趣的。

或者，您可以在您的机器上本地执行此操作，或者通过创建 HTML 页面并使用元刷新；如果我不太忙，我会试试这个并发布结果。

希望有帮助。

# python - wxpython：time.sleep() 会阻止 mac 上的 GUI

> ID：16209640
> 
> 赞同：0
> 
> 时间：2013-04-25T08:14:52.307
> 
> 标签：python, user-interface, wxpython

这是我在 Mac 上使用 wxpython 时遇到的奇怪问题。尽管这在 Windows7 上与 wxpython 完全兼容。我正在尝试在 time.sleep() 之前和之后更新 wx.StaticText 标签，如下所示：

```
self.lblStatus = wx.StaticText(self, label="", pos=(180, 80))
self.lblStatus.SetLabel("Processing....")
time.sleep(10) 
```

在上面的代码中，标签“Processing...”直到 time.sleep() 完成 10 秒后才可见。即SetLabel 10 秒后生效。

在 windows7/wxpython 上按预期工作，但在 Mac 上我遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:33:34.703

我从未见过 time.sleep() 不会阻止 Windows 上的 GUI。sleep 函数阻塞了 wx 的主循环，简单明了。正如 JHolta 所提到的，假设您使用线程安全方法，例如 wx.CallAfter、wx.CallLater 或 wx.PostEvent，您可以将睡眠放入一个线程并从那里更新 GUI。

但是，如果您只是想不时地任意重置标签，我认为使用 wx.Timer() 会简单得多。

*   [http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)
*   [http://wiki.wxpython.org/Timer](http://wiki.wxpython.org/Timer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:44:39.610

wxPython gui 是一个循环，要使部分代码休眠而不导致 gui 休眠，需要多线程。

我会编写一个调用线程函数的函数，现在这是一个肮脏的例子，但应该向您展示需要做什么：

```
import wx
from threading import Thread
import time
from wx.lib.pubsub import setuparg1
from wx.lib.pubsub import pub as Publisher

class Example(wx.Frame):      
    def __init__(self, *args, **kw):
        super(Example, self).__init__(*args, **kw) 
        self.SetTitle('This is a threaded thing')

        self.st1 = wx.StaticText(self, label='', pos=(30, 10))

        self.SetSize((250, 180))
        self.Centre()
        self.Show(True) 

        self.Bind(wx.EVT_MOVE, self.OnMove)
        # call updateUI when the thread returns something
        Publisher.subscribe(self.updateUI, "update")        

    def OnMove(self, evt):
        ''' On frame movement call thread '''
        x, y = evt.GetPosition()
        C = SomeClass()
        C.runthread(x, y)

    def updateUI(self, evt):
      ''' Update label '''
      data = evt.data
      self.st1.SetLabel(data)  

class SomeClass:
    def runthread(self,  x,y):
        ''' Start a new thread '''
        t = Thread(target=self._runthread, args=(x,y,))
        t.start()

    def _runthread(self, x,y):
        ''' this is a threaded function '''
        wx.CallAfter(Publisher.sendMessage, "update", "processing...")
        time.sleep(3)
        wx.CallAfter(Publisher.sendMessage, "update", "%d, %d" % (x, y))

def main():
    ex = wx.App()
    Example(None)
    ex.MainLoop()

if __name__ == '__main__':
    main() 
```

现在，只要您尝试移动“框架”/窗口，线程就会被初始化，并将返回窗口的当前位置。

wx.CallAfter() 是对 GUI 线程的线程安全调用，仅在 GUI 线程准备好接收时发送数据。Publisher-module 简化了将数据发送到我们的线程的任务。

我会建议阅读： http: [//www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# c# - LINQ中的关系划分？

> ID：16209651
> 
> 赞同：4
> 
> 时间：2013-04-25T08:15:29.253
> 
> 标签：c#, sql, linq, relational-algebra, relational-division

关系划分是[Codd](http://en.wikipedia.org/wiki/Edgar_F._Codd)的原始关系运算符之一，俗称提供所有零件的供应商。[已经有各种 SQL 翻译，例如 Celko 使用可以驾驶机库中所有飞机的飞行员](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)的例子讨论了几种方法。

我更喜欢“与集合操作员的划分”，因为它是“有余数”（即威尔逊也可以驾驶 F-17 战斗机，但机库中没有）以及当除数是空集（即当机库为空时，所有飞行员都返回）：

```
WITH PilotSkills
     AS
     (
      SELECT * 
        FROM (
              VALUES ( 'Celko', 'Piper Cub' ), 
                     ( 'Higgins', 'B-52 Bomber' ), ( 'Higgins', 'F-14 Fighter' ),
                     ( 'Higgins', 'Piper Cub' ), 
                     ( 'Jones', 'B-52 Bomber' ), ( 'Jones', 'F-14 Fighter' ),
                     ( 'Smith', 'B-1 Bomber' ), ( 'Smith', 'B-52 Bomber' ),
                     ( 'Smith', 'F-14 Fighter' ),
                     ( 'Wilson', 'B-1 Bomber' ), ( 'Wilson', 'B-52 Bomber' ),
                     ( 'Wilson', 'F-14 Fighter' ), ( 'Wilson', 'F-17 Fighter' )
             ) AS T ( pilot_name, plane_name )
     ), 
     Hangar
     AS
     (
      SELECT * 
        FROM (
              VALUES ( 'B-1 Bomber' ), 
                     ( 'B-52 Bomber' ), 
                     ( 'F-14 Fighter' )
             ) AS T ( plane_name )
     )
SELECT DISTINCT pilot_name 
  FROM PilotSkills AS P1
 WHERE NOT EXISTS (
                   SELECT plane_name 
                     FROM Hangar
                   EXCEPT
                   SELECT plane_name
                     FROM PilotSkills AS P2
                    WHERE P1.pilot_name = P2.pilot_name
                  ); 
```

现在我需要在 LINQ to Objects 中执行此操作。这是一个建议的直接翻译：

```
var hangar = new [] 
{ 
    new { PlaneName = "B-1 Bomber" },
    new { PlaneName = "F-14 Fighter" },
    new { PlaneName = "B-52 Bomber" }
}.AsEnumerable();

var pilotSkills = new [] 
{ 
    new { PilotName = "Celko", PlaneName = "Piper Cub" },
    new { PilotName = "Higgins", PlaneName = "B-52 Bomber" },
    new { PilotName = "Higgins", PlaneName = "F-14 Fighter" },
    new { PilotName = "Higgins", PlaneName = "Piper Cub" },
    new { PilotName = "Jones", PlaneName = "B-52 Bomber" },
    new { PilotName = "Jones", PlaneName = "F-14 Fighter" },
    new { PilotName = "Smith", PlaneName = "B-1 Bomber" },
    new { PilotName = "Smith", PlaneName = "B-52 Bomber" },
    new { PilotName = "Smith", PlaneName = "F-14 Fighter" },
    new { PilotName = "Wilson", PlaneName = "B-1 Bomber" },
    new { PilotName = "Wilson", PlaneName = "B-52 Bomber" },
    new { PilotName = "Wilson", PlaneName = "F-14 Fighter" },
    new { PilotName = "Wilson", PlaneName = "F-17 Fighter" }
}.AsEnumerable();

var actual = pilotSkills.Where
(
    p1 => hangar.Except
    ( 
        pilotSkills.Where( p2 => p2.PilotName == p1.PilotName )
                    .Select( p2 => new { p2.PlaneName } )
    ).Any() == false 
).Select( p1 => new { p1.PilotName } ).Distinct();

var expected = new [] 
{
    new { PilotName = "Smith" },
    new { PilotName = "Wilson" }
};

Assert.That( actual, Is.EquivalentTo( expected ) ); 
```

由于[LINQ 据说是基于关系代数](http://queue.acm.org/detail.cfm?id=2024658)的，因此直接翻译似乎是合理的。但是有更好的“本机”LINQ 方法吗？

* * *

回顾@Daniel Hilgarth 的回答，在 .NET Land 中，数据很可能首先被“分组”：

```
var pilotSkills = new [] 
{ 
    new { PilotName = "Celko", 
            Planes = new [] 
            { new { PlaneName = "Piper Cub" }, } },
    new { PilotName = "Higgins", 
            Planes = new [] 
            { new { PlaneName = "B-52 Bomber" }, 
              new { PlaneName = "F-14 Fighter" }, 
              new { PlaneName = "Piper Cub" }, } },
    new { PilotName = "Jones", 
            Planes = new [] 
            { new { PlaneName = "B-52 Bomber" }, 
              new { PlaneName = "F-14 Fighter" }, } },
    new { PilotName = "Smith", 
            Planes = new [] 
            { new { PlaneName = "B-1 Bomber" }, 
              new { PlaneName = "B-52 Bomber" }, 
              new { PlaneName = "F-14 Fighter" }, } },
    new { PilotName = "Wilson", 
            Planes = new [] 
            { new { PlaneName = "B-1 Bomber" }, 
              new { PlaneName = "B-52 Bomber" }, 
              new { PlaneName = "F-14 Fighter" }, 
              new { PlaneName = "F-17 Fighter" }, } },
}; 
```

...并且仅投影名称是任意的，从而使潜在的解决方案更加直接：

```
 // Easy to understand at a glance:
var actual1 = pilotSkills.Where( x => hangar.All( y => x.Planes.Contains(y) ));

// Potentially more efficient:
var actual = pilotSkills.Where( x => !hangar.Except( x.Planes ).Any() ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:24:26.853

以下应该产生相同的结果：

```
pilotSkills.GroupBy(x => x.PilotName, x => x.PlaneName)
           .Where(g => hangar.All(y => g.Contains(y.PlaneName))) 
```

这将为每位飞行员返回一组，他们可以驾驶机库中的所有飞机。
组的关键是飞行员的名字，组的内容是飞行员能飞的所有飞机，包括那些不在机库的飞机。

如果您现在只想要飞行员，您可以`.Select(g => new { PilotName = g.Key })`在查询末尾添加一个。

* * *

将上述方法与 一起使用`Except`，使其更接近 OP 的原版：

```
pilotSkills.GroupBy(x => x.PilotName, x => new { x.PlaneName } )
           .Where(g => !hangar.Except(g).Any()); 
```

第二个查询可能更好，因为它只迭代`g`一次；第一个查询将其`Contains`迭代 N 次，其中 N 是机库中的飞机数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:04:04.500

使用@Daniel Hilgarth 的答案中的方法，但更接近我的原作：

```
var actual = pilotSkills
                 .GroupBy(x => x.PilotName, x => new { x.PlaneName })
                 .Where(g => !hangar.Except(g).Any())
                 .Select(x => new { PilotName = x.Key }); 
```

# java - 如何在java中编写mongodb查询

> ID：16209652
> 
> 赞同：0
> 
> 时间：2013-04-25T08:15:34.613
> 
> 标签：java, mongodb

我想在我的 android 应用程序中进行空间搜索。我正在尝试用 java 编写 mongodb 查询，但无法这样做。如何在 java 中使用这个 mongodb 查询

`db.places.find( { loc: { $geoWithin : { $center : [ [longitude, latitude], 10 ] } } } )`

我是 mongodb 和空间搜索的新手。

请帮忙！！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:13:12.450

看一下api：[http ://api.mongodb.org/java/2.11.1/](http://api.mongodb.org/java/2.11.1/)

```
BasicDBList geoCoord = new BasicDBList();
    geoCoord.add(longitude);
    geoCoord.add(latitude);

    BasicDBList geoParams = new BasicDBList();
    geoParams.add(geoCoord);
    geoParams.add(10);

    BasicDBObject query = new BasicDBObject("loc", 
        new BasicDBObject("$geoWithin", 
            new BasicObject("$center", geoParams)
        )
    ); 
```

# excel - 如何在同一个 PowerPivot 表中聚合另一个度量？

> ID：16209657
> 
> 赞同：0
> 
> 时间：2013-04-25T08:15:45.163
> 
> 标签：excel, powerpivot, dax

我的 PowerPivot 表中有一个度量值，它根据同一行中其他度量值的值返回 1 或 0。

如果对于数据透视表中的*任何行*，此度量为 1，我想编写一个返回“总计”1 的新度量。更一般地说，我想汇总不同度量的行值。如何才能做到这一点？

（只有总值需要表示这个聚合，每行的计算结果并不重要。）

使用 MAXX(Table_with_row_descriptors, Expression_that_returns_binary_value) 几乎可以工作，但它改变了 Expression_that_returns_binary_value 的评估，使得对于每一行，结果有时与简单的 Expression_that_returns_binary_value 度量不同，因此在某些情况下，总数是错误的.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:32:54.610

我的同事找到了一个解决方案：

```
IF(HASONEVALUE([row_descriptor]), Expression_that_returns_binary_value, MAXX(values(Table_with_row_descriptors), Expression_that_returns_binary_value)) 
```

这将检查我们是否正在评估数据透视表中的正常行或“总”行，并且仅在后一种情况下使用 MAXX。

# php - 在 PHP 中检查手机输入

> ID：16209658
> 
> 赞同：1
> 
> 时间：2013-04-25T08:15:46.207
> 
> 标签：php, algorithm, mobile, sms, prediction

我有一个接受 SMS 文本的系统（它们包含一个单词）。

我需要做的是检查传入单词的准确性，以便预测短信更改。
我想这可以通过某种针对 SMS 字典的查找来完成，但我找不到任何东西。

此外，我需要找到一种方法来确保可能发送的单词列表不会出现在相同的潜在 SMS 预测更改列表中。

传入的单词几乎没有限制，但我可能会强制执行 7 的大小限制。
我曾考虑使用[levenshtein](http://www.php.net/manual/en/function.levenshtein.php)或[similar_text](http://php.net/manual/en/function.similar-text.php)函数，但这些可能不适合预测文本选项。

任何想法最好做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:29:12.803

最流行的预测短信解决方案是专有的，我不认为您所说的那种数据库是公开可用的。 [维基百科](http://en.wikipedia.org/wiki/Predictive_text)

你看过iTap和T9的[这个](http://www.inference.phy.cam.ac.uk/mackay/itprnn/itap/)分析吗？

# grails - Grails 单向多对多

> ID：16209663
> 
> 赞同：0
> 
> 时间：2013-04-25T08:16:00.310
> 
> 标签：grails, grails-orm

我有 Java/JavaEE 背景，最近开始了一个 Grails 项目。

在我写领域模型的时候，有一个要求：单向多对多。我知道它在 Jpa/Hibernate 中应该如何。我在 grails 中对此进行了快速搜索，似乎 Grails 不支持它，有些人建议使用映射类（没有示例应该如何做）。

任何人都可以给我一个例子或者我应该如何满足这个要求？

例如：

```
class Teacher {
static hasMany: [students: Student]
}

class Student {
    static belongsTo: Teacher
    static hasMany: [teachers: Teacher]
} 
```

上面的代码是在 Grails 文档中使用双向多对多完成的。单向多对多的代码是什么样的？

也只有学生可以有教师参考，在教师课上，它不能得到学生的名单。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:24:45.823

我使用了三个班级，例如教师，学生和中级班。从学生我们可以访问教师参考。在教师方面，我们无法访问学生。

```
class Teacher {
String name

}

class Student {
    String name
    static hasMany      = [teachers:StuTeach]

}

class StuTeach {

    static constraints = {
    }
    static belongsTo    = [teacher:Teacher,student:Student]
} 
```

在引导程序中，

```
 def t1=new Teacher(name:"t1")
        t1.save(flush:true)
        def t2=new Teacher(name:"t2")
        t2.save(flush:true)

        def stu=new Student(name:"s1")
        stu.save(flush:true)

        def stuteach1=new StuTeach()
        stuteach1.student=stu
        stuteach1.teacher=t1
        stuteach1.save(flush:true)

        def stuteach2=new StuTeach()
        stuteach2.student=stu
        stuteach2.teacher=t2
        stuteach2.save(flush:true)

        stu.addToTeachers(stuteach1)
        stu.addToTeachers(stuteach2)

        stu.save(flush:true)
        println stu.teachers.teacher 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T15:19:11.570

hibernate 支持单向多对多关系，而 Grails 则可以：

[http://blog.exensio.de/2013/12/unidirectional-many-to-many.html](http://blog.exensio.de/2013/12/unidirectional-many-to-many.html)

# sql-server-2008 - 使用 TRANSACTION ISOLATION LEVEL SERIALIZABLE 时的锁范围

> ID：16209669
> 
> 赞同：0
> 
> 时间：2013-04-25T08:16:17.560
> 
> 标签：sql-server-2008, tsql, serialization, locking, transaction-isolation

以下链接描述了可序列化事务隔离级别。

[http://blogs.msdn.com/b/sqlcat/archive/2011/02/20/concurrency-series-basics-of-transaction-isolation-levels.aspx](http://blogs.msdn.com/b/sqlcat/archive/2011/02/20/concurrency-series-basics-of-transaction-isolation-levels.aspx)

假设我有一个用户更新表`[dbo].[Table_A]`。另一个用户正在更新 table `[dbo].[Table_B]`。而且我想序列化这两个更新语句（意味着在第二个开始之前等待第一个完成），尽管我们正在接触不同的表。我猜我不能使用表锁，但也许范围锁可以做到这一点。有人可以帮我理解代码的样子吗？或者这不适用于 SQL Server 2008 中的事务隔离级别功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:23:25.797

您可以放置​​应用程序锁：

```
EXEC  sp_getapplock @resource = 'my_resource_token', @lockMode = 'Exclusive'

UPDATE ...

EXEC  sp_releaseapplock @resource = 'my_resource_token' 
```

如果另一个会话已获得，这将锁定`my_resource_token`。

# objective-c - 在一个视图中配置多个 UITableView？

> ID：16209672
> 
> 赞同：2
> 
> 时间：2013-04-25T08:16:25.917
> 
> 标签：objective-c, xcode, uitableview

我遇到了一个我无法回答的难题。

我正在创建一个`UITableView`在单个视图中有多个的应用程序。每个`TableView`都需要具有彼此不同的属性。

这些`UITableViewDelegate`方法提供了配置`UITableView`s 的通用方法，但据我所知，这将影响`TableViews`视图中的所有内容。

如果我需要控制每个单曲的参数`TableView`- 这将如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:21:10.303

这是不正确的 - 您可以使用`UITableViewDelegate`. 举个例子：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

`tableView`您可以通过变量区分表格视图。为此，您需要存储对不同表视图的引用（例如，通过属性）。

```
@property (nonatomic, strong) UITableView *myFirstTableView; 
```

现在您可以执行以下操作：

```
if (tableView == self.myFirstTableView) {} else {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:48:15.493

您可以创建一个新类来充当 tableView 委托，而不是使用 UIViewController 作为您的 tableView 委托。然后，此类可以包含它正在处理的特定表所需的参数。

在视图控制器内部，您可以为每个 tableView 分配此类的一个实例并将其分配为委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:22:12.133

对于每个委托方法，它都会为您提供它需要的信息。您可以使用它来识别请求数据的 tableview 的哪个实例..

使用标签来区分表格视图。

```
 tableview1.tag = 100;
    tableview2.tag = 200;
   // ... so on - if using interface builder you can set tag in there too :) 
```

现在在委托。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
if (tableview.tag == 100)
{
// handle for tableview 1
}
else if (tableview.tag == 200)
{
// handle for tableview 2
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:22:41.293

您的所有 tableView 委托方法都以`tableView`as 参数开头。

前任：`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

这会将 UITableView 作为参数传递。因此，您可以添加 switch-case 或 if 语句来检查您要修改哪个 tableView 数据。

# tinymce - Tinymce contenteditable 和退格按钮

> ID：16209674
> 
> 赞同：1
> 
> 时间：2013-04-25T08:16:40.730
> 
> 标签：tinymce

我使用 tinyMCE，并且这个标签通过按钮动态插入。

`<span class="_pElement" contenteditable="false">variable</span>`

当我在编辑器上选择此标签并按退格键时，页面返回页面。按退格键时应该删除这个标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:16:58.627

您应该在插入跨度后立即[聚焦编辑器：](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.focus)

```
tinymce.get('your_editor_id').focus(); 
```

# java - 从 .xml 到 .java 的 Android 视图 - 依赖项

> ID：16209678
> 
> 赞同：0
> 
> 时间：2013-04-25T08:16:49.467
> 
> 标签：java, android, xml, dependencies, params

我只是在一个应用程序上工作了一点，只是为了训练。很快我注意到 .xml 创建的视图对性能有影响，所以我决定在活动中对它们进行编码。但我不知道如何设置所有这些参数和依赖项，我真的需要创建大量参数吗？这就是我的 .xml 的样子：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:paddingBottom="@dimen/activity_vertical_margin"
  android:paddingLeft="@dimen/activity_horizontal_margin"
  android:paddingRight="@dimen/activity_horizontal_margin"
  android:paddingTop="@dimen/activity_vertical_margin"
  android:background="#000000"
  tools:context=".MainActivity" >

    <ImageButton
        android:id="@+id/df_link"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/df_link"
        android:onClick="openWebURL"
        android:contentDescription="@string/df_link" />

    <TextView
        android:id="@+id/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:textColor="#FFFFFF"
        android:text="@string/header" 
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:id="@+id/mm_bottom_row"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:orientation="vertical" >

            <Button
                android:id="@+id/new_b"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:onClick="startNewGame"
                android:startColor="#000000"
                android:endColor="#000000"
                android:textColor="#FFFFFF"
                android:text="@string/new_b" />

            <Button
                android:id="@+id/load_b"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#FFFFFF"
                android:startColor="#000000"
                android:endColor="#000000"
                android:enabled="false"
                android:text="@string/load_b" />

            <Button
                android:id="@+id/options_b"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#FFFFFF"
                android:startColor="#000000"
                android:endColor="#000000"
                android:enabled="false"
                android:text="@string/options_b" />

            <Button
                android:id="@+id/dev_b"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:onClick="loadDevInfo"
                android:startColor="#000000"
                android:endColor="#000000"
                android:textColor="#FFFFFF"
                android:text="@string/dev_b" />

            <Button
                android:id="@+id/wiki_b"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:onClick="showWiki"
                android:startColor="#000000"
                android:endColor="#000000"
                android:textColor="#FFFFFF"
                android:text="@string/wiki_b" />
    </LinearLayout>

</RelativeLayout> 
```

感谢你们对我的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:04:17.760

是的，你必须写很多代码。这就是改用 xml 布局的原因。
[这](http://mainerrors.blogspot.in/2011/02/programmatically-creating-layout-part-1.html)应该会有所帮助。

# javascript - 如果选中则显示提交按钮

> ID：16209679
> 
> 赞同：1
> 
> 时间：2013-04-25T08:16:50.807
> 
> 标签：javascript, jquery, html, checkbox

如果未选中任何复选框，我需要隐藏提交按钮。如果至少选中一个，则应显示提交按钮。我使用 JQuery。

```
<input type="checkbox" name="prog" value="1">
<input type="checkbox" name="prog" value="2">

<input type="submit" id="submit_prog" value='Submit' /> 
```

编辑

如何将它与“全选”复选框结合使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T08:22:40.123

```
$(document).ready(function() {

    var $submit = $("#submit_prog").hide(),
        $cbs = $('input[name="prog"]').click(function() {
            $submit.toggle( $cbs.is(":checked") );
        });

}); 
```

演示：http: [//jsfiddle.net/QMtey/1/](http://jsfiddle.net/QMtey/1/)

该[`.toggle()`方法](http://api.jquery.com/toggle/#toggle-showOrHide)接受一个布尔值来决定是否显示或隐藏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T08:21:45.827

我给你一个更好的！你可以只用 css 做到这一点。

```
input[type=submit] {
  display:none;
}

input[type=checkbox]:checked ~ input[type=submit] {
  display:block;
} 
```

这是一个演示：http: [//jsfiddle.net/5wASK/](http://jsfiddle.net/5wASK/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T08:21:05.840

使用以下代码，当用户检查某些按钮时，按钮将出现，当取消选中所有按钮时，它将再次隐藏。

```
jQuery('[name="prog"]').click(function(){
    if (jQuery('[name="prog"]:checked').length > 0)    
        jQuery('#submit_prog').show();
    else jQuery('#submit_prog').hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:23:15.840

```
var $checkboxes = $('input[type=checkbox]');

$checkboxes.on('change', function() {
   $('#submit_prog').prop('disabled', !($checkboxes.length == $checkboxes.filter(':checked').length));
}); 
```

这个想法是你用 JavaScript 检查复选框的数量是否与选中的复选框的数量相匹配。这 ！翻转它并设置提交按钮的禁用属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:23:35.997

```
$('input[name="prog"]').change(function(){
    var submitBtn=$('#submit_prog');
    if ($('input[name="prog"]:checked').length > 0) {
        submitBtn.show();
    } else {
        submitBtn.hide();
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T08:56:37.897

使用切换隐藏和显示元素。

```
$("input[name='prog']").on("change",function(){
        $("#submit_prog").toggle();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-12T15:48:41.120

你可以用这个

```
$(document).ready(function() {
  var countChecked = function() {
    var n = $("input:checked").length;
    if (n > 1) {
      $("#Should_Be_Same_ID").removeClass('hide');
    }
    else {
      $("#Should_Be_Same_ID").addClass('hide'); 
    }
  };
  countChecked();

  $("input[type=checkbox]").on("click", countChecked);
});
```

```
.hide {
  display : none
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<br />
<br /><input type="checkbox" name="prog" value="1" id="checked">
<label for="checked"> Checked me
</label>
<br />
<br />
<br />
<input type="submit" class="hide" id="Should_Be_Same_ID" value='Submit' />
```

# mongodb - Mongo DB中的保存和插入有什么区别？

> ID：16209681
> 
> 赞同：173
> 
> 时间：2013-04-25T08:17:10.177
> 
> 标签：mongodb

Mongo DB中的保存和插入有什么区别？两者看起来都一样

```
db.users.save({username:"google",password:"google123"})

db.users.insert({username:"google",password:"google123"}) 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-04-25T08:26:10.087

**保存与插入：**

在您给定的示例中，行为基本相同。

`save`如果使用“_id”参数传递，则行为不同。

对于保存，如果文档包含`_id`，它将在`_id`字段上查询集合，如果没有，它将插入。

> 如果具有指定 _id 值的文档不存在，则 save() 方法将使用文档中的指定字段执行插入。
> 
> 如果存在具有指定 _id 值的文档，则 save() 方法执行更新，将现有记录中的所有字段替换为文档中的字段。

* * *

**保存与更新**：

**`update`**修改与您的查询参数匹配的现有文档。如果没有这样的匹配文件，那就是`upsert`图片。

*   `upsert : false`: 当不存在这样的文件时什么都不会发生
*   `upsert : true`: 创建新文档，其内容等于查询参数和更新参数

**`save`**: 不允许任何查询参数。如果`_id`存在并且有相同的匹配文档`_id`，它将替换它。当没有指定_id/没有匹配的文档时，它将文档作为新文档插入。

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2015-03-31T05:59:49.060

让我们考虑这里的两种情况以进行保存：-

1）在文档中有_id。

2) 文档中没有 _id。

```
 Save ()
                        /     \
                       /       \

                 Having _id     Not Having _id 

  ->In this case save will do    ->  It will do normal insertion 
    upsert to insert.Now             in this case as insert() do.
    what that means, it means 
    take the document and replace 
    the complete document having same
    _id. 
```

让我们在这里考虑插入的两种情况：-

1) 在集合中有 _id 的文档。

2) 集合中没有 _id 的文档。

```
 Insert()
                       /        \
                      /          \

   Doc Having _id in collection    Doc Not Having _id 
  ->  E11000 duplicate key     ->Insert a new doc inside the collection.
      error index: 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-04-25T08:21:09.277

`save`插入或更新文档。

`insert`只做一个插入。

但在你的情况下，它会做同样的事情，因为保存中提供的文档没有`_id`字段。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-08-24T17:12:05.013

通过举例

**拯救一个苹果**

```
db.fruit.save({"name":"apple", "color":"red","shape":"round"})
WriteResult({ "nInserted" : 1 })

db.fruit.find();

{
    "_id" : ObjectId("53fa1809132c1f084b005cd0"),
    "color" : "red",
    "shape" : "round",
    "name" : "apple"
} 
```

**使用先前保存的苹果的 _id 保存一个苹果**

```
db.fruit.save(
{"_id" : ObjectId("53fa1809132c1f084b005cd0"),"name":"apple", 
"color":"real red","shape":"round"})

WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 }) 
```

**现在我们保存的苹果有了，颜色从红色更新为真正的红色**

```
db.fruit.find();
{
    "_id" : ObjectId("53fa1809132c1f084b005cd0"),
    "color" : "real red",
    "shape" : "round",
    "name" : "apple"
} 
```

**用 _id 保存一个苹果**

```
db.fruit.save({"_id" : ObjectId("55551809132c1f084b005cd0"),
"name":"apple", "color":"real red","shape":"round"})

    WriteResult({ "nMatched" : 0, "nUpserted" : 1, 
"nModified" : 0, "_id": 55551809132c1f084b005cd0 }) 
```

**Apple 被插入，因为没有具有相同对象 ID 的苹果进行更新**

**插入一个橙子**

```
db.fruit.insert({"name":"orange", "color":"orange","shape":"round"})
WriteResult({ "nInserted" : 1 }) 
```

**橙色被插入**

```
db.fruit.find();
{
    "_id" : ObjectId("53fa1809132c1f084b005cd0"),
    "color" : "real red",
    "shape" : "round",
    "name" : "apple"
}
{
    "_id" : ObjectId("53fa196d132c1f084b005cd7"),
    "color" : "orange",
    "shape" : "round",
    "name" : "orange"
}
{
    "_id" : ObjectId("55551809132c1f084b005cd0"),
    "color" : "real red",
    "shape" : "round",
    "name" : "apple"
} 
```

因此，如果提供了对象 ID，则保存将充当更新，前提是该对象 ID 已经存在，否则它会执行插入。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-05-26T02:49:08.400

如果您尝试将“插入”与以前在同一集合中使用的 ID 一起使用，您将收到重复键错误。如果您对已在同一集合中的 ID 使用“保存”，它将被更新/覆盖。

如果您要进行真正的更新，我建议您使用“更新”。如果您使用集合中已有的相同 ID 进行保存，则更新不会像 Save 那样覆盖。

例如，您有两个字段“x”和“y”，您希望保留这两个字段但更改“x”的值。如果您选择了“保存”命令并且没有将 y 包含在之前的值中，或者您的保存中根本没有 y，那么 y 将不再具有相同的值或存在。但是，如果您选择使用 $set 进行更新并且只在更新语句中包含 x，则不会影响 y。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-25T08:21:33.820

正如您在此处看到的，save 方法本质上将执行 upsert（如果找到文档则更新，否则插入）：

[http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save](http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save)

插入就是这样，一个直的插入。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-03T09:01:18.367

考虑以下文件

```
{ "_id" : 1, "domainName" : "test1.com", "hosting" : "hostgator.com" } 
```

如果 db 已经包含 _id:1 的文档，则

保存操作会抛出如下异常

```
E11000 duplicate key error index ........... 
```

而作为插入操作的地方，只会覆盖文档。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-17T12:05:04.507

在 ORACLE 方面： mongo insert => Oracle insert mongo save => Oracle merge

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-15T07:11:33.957

`db.<collection_name>.save(<Document>)`相当于 InsertOrUpdate 查询。

而，`db.<collection_name>.insert(<Document>)`相当于只是插入查询。

# java - NativeActivity 不显示在屏幕上

> ID：16209683
> 
> 赞同：0
> 
> 时间：2013-04-25T08:17:18.317
> 
> 标签：java, android

在我的 Android 设备（使用 JellyBean 4.1.2）上有一个错误：

当我启动一个特定的 NativeActivity（从我的应用程序加载游戏的 libretroarch-activity）时，模拟器活动显示为好像它在我的应用程序布局“后面”，如果我将应用程序主题设置为，我只能看到它`Theme.Translucent.NoTitleBar.FullScreen`，并且你可以看到黑色区域也变得透明！![半透明错误](https://i.stack.imgur.com/JwsCy.jpg)

当我将主题设置为`Theme.Black.NoTitleBar.FullScreen`并启动游戏时，我看到的是全黑屏，但如果我旋转屏幕，我可以看到游戏的一些距离，然后当屏幕定向过程结束时，屏幕又变黑了。我注意到的另一件事是，如果我用一些不透明的元素（如音量调整或关机对话框）覆盖我的视图，在它消失后的几秒钟内，我会看到一些玩家的游戏屏幕只在有限的区域内有元素。这是一个[youtube 视频](http://www.youtube.com/watch?v=7uj3XbSEoes)，它显示了屏幕方向的奇怪行为（您可以看到即使在股票应用程序中它的行为也一样，这可能是 AOSP 错误吗？），[这是一个错误的视频](http://youtu.be/PPBMQBAnkhM)，它仅在有覆盖时才允许游戏视图对话。

作为临时修复，是否可以用一些设置为最小不透明度的空布局覆盖我的活动，以便可以看到游戏屏幕？否则它是一个可以修复的android已知问题还是与retroarch有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:50:31.083

在与 RetroArch 作者聊天后发现这是他们库中的一个错误，将在即将发布的新版本中修复。

# ruby-on-rails - 从另一个表获取id，rails

> ID：16209684
> 
> 赞同：0
> 
> 时间：2013-04-25T08:17:18.927
> 
> 标签：ruby-on-rails, associations

我有一个包含“user_id”和“post_id”字段的表测试。user_id 我通过 current_user.id 和 post_id 从 post 表中获取。为此，我这样做：在测试控制器中：-

```
def create
  @user = current_user
  @test = Test.new(params[:test])
  @post = Post.find(params[:id])
  @test.post_id = @post.id
  @test.user_id = @user.id
respond_to do |format|
   @test.save
   format.html { redirect_to(:back, :notice => "successfull") }
  else
    format.html { render :action => "new" }
  end
end 
```

在我的模型中，我创建了关联：-

在 test.rb 中：

```
 belongs_to :post 
```

在 post.rb 中：

```
has_many :test 
```

查看页面是：

```
 = form_for @test, :validate => true do |f|
   .span
     = f.text_field :email, :placeholder =>"Email Address"
   .span
     = f.label :name
     = f.text_field :name
   .span
     = f.submit "Save" 
```

user_id 正确保存，但对于 post_id 它给出错误：

```
 Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:27:11.740

您确定仅在登录时才应访问 create 方法，即 current_user 不应为 nil。

如果您`create`仅在方法中收到此错误，则它应该在线

```
@test.user_id = @user.id 
```

这是因为是 nil ，`@user`而您正在调用`.id`.`nil`

已编辑

您需要从表单中发送 post_id，假设您在 @post 中获取 post 对象

添加以下行您的视图

```
= form_for @test, :validate => true do |f|
    = hidden_field_tag "post_id", @post.id 
```

并更新

```
@post = Post.find(params[:id]) 
```

和

```
@post = Post.find(params[:post_id]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:29:36.740

是 Rails 中的标准消息，它告诉您您尝试调用`.id`一个`nil`值。

我怀疑你`current_user`是`nil`。你可以确定`raise current_user.inspect`我认为which会告诉你它的零

您确定您已登录，因此您`current_user`的不是 nil

# php - 调用 base_url() 函数时的不同 URL

> ID：16209686
> 
> 赞同：0
> 
> 时间：2013-04-25T08:17:27.127
> 
> 标签：php, javascript, html, codeigniter

我有一个包含以下内容的 PHP 文件：

```
<script type="text/javascript" src="<?php echo base_url();?>js/example1.js"></script>
<script type="text/javascript">var base_url = '<?php echo @base_url(); ?>';</script>
........
<input type="hidden" id="testvpn" value="<?php echo base_url(); ?>js/example.js"/>
........ 
```

当我尝试在本地打开页面时，一切正常：

```
<script type="text/javascript" src="http://example.com/js/example1.js"></script>
<script type="text/javascript">var base_url = 'http://example.com/';</script>
........
<input type="hidden" id="testvpn" value="http://example.com/js/example.js"/>
........ 
```

当我尝试通过 web vpn 打开页面时，我想看到：

```
<script type="text/javascript" src="https://mywebvpn.com/+CSCO+numbers++/js/example1.js"></script>
<script type="text/javascript">var base_url = 'https://mywebvpn.com/+CSCO+numbers++/';</script>
........
<input type="hidden" id="testvpn" value="https://mywebvpn.com/+CSCO+numbers++/js/example.js"/>
........ 
```

但我得到：

```
<script type="text/javascript" src="https://mywebvpn.com/+CSCO+numbers++/js/example1.js"></script>
<script type="text/javascript">var base_url = 'http://example.com/';</script>
........
<input type="hidden" id="testvpn" value="http://example.com/js/example.js"/>
........ 
```

PS 框架 - 代码点火器。服务器端 - PHP、MYSQL、APACHE。
PPS 配置 webvpn 服务不是我的工作。会不会是 webvpn 的问题？

```
$config['base_url'] = ((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "https" : "http");
$config['base_url'] .= "://".$_SERVER['HTTP_HOST'];
$config['base_url'] .=str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:28:53.107

## base_url()

返回您在**配置文件**中指定的站点基本 URL 。

* * *

检查您是否用该数据覆盖配置。如果不是，那么它只是缓存，但如果这是一个奇迹并且它返回不同的值，你总是可以这样做：

```
<?php
$bUrl = base_url()
?>
<script type="text/javascript" src="<?php echo $bUrl?>js/example1.js"></script>
<script type="text/javascript">var base_url = '<?php echo $bUrl?>';</script>
........
<input type="hidden" id="testvpn" value="<?php echo $bUrl?>js/example.js"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:27:30.763

由于您想使用 base_url() 来加载 JS 和 CSS 文件，我将向您展示我是如何使用它的。

CSS：

```
 <link rel="stylesheet" href="<?=base_url('css/style.css')?>"> 
```

JS：

```
 <script src="<?=base_url('js/jquery.js')?>"></script> 
```

请注意，我使用的是 short_tags，因此根据您的 php.ini，确切的复制/粘贴可能不起作用。

我发现这个解决方案是最好的，因为您为文件提供了绝对路径，所以我从来没有遇到某些服务器设置无法找到文件的问题。

# jquery - 自定义 nivo 滑块幻灯片

> ID：16209689
> 
> 赞同：0
> 
> 时间：2013-04-25T08:17:49.843
> 
> 标签：jquery, css, slideshow

我想自定义带有项目符号的 nivo 滑块幻灯片显示在内部图像中。

Nivo Slider 的幻灯片如下所示： [http ://demo.dev7studios.com/nivo-slider/](http://demo.dev7studios.com/nivo-slider/)

我想像这样自定义项目符号： [http](http://wowslider.com/automatic-jquery-slider-noir-squares-demo.html) ://wowslider.com/automatic-jquery-slider-noir-squares-demo.html 但项目符号出现在图像的右上角。怎么能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:39:26.830

只需将以下内容添加到您的 CSS 中即可：

```
.slider-wrapper{
position:relative;
}

.theme-default .nivo-controlNav{
position:absolute;
top:15px;
right:15px;
padding:0px;
z-index:9;
} 
```

# scala - 如何给一系列任务起别名？

> ID：16209690
> 
> 赞同：21
> 
> 时间：2013-04-25T08:17:50.093
> 
> 标签：scala, sbt

我的 SBT (0.12.2) 项目中有自定义任务。让我们称它们`a`为`b`和`c`。因此，当我处于 SBT 的交互模式时，我只需键入`a`并执行相关的任务`a`。我也可以打字`;a;b;c`，三个任务依次执行；就像类似的事情一样`;clean;compile`。我还可以从交互式 shell 做的是创建一个别名来运行它们：`alias all=;a;b;c`. 现在，当我键入时`all`，任务会以一种明显的方式执行。我想要实现的是在我的项目的 SBT 配置中创建这个别名。

[SBT 文档的这一部分](http://www.scala-sbt.org/0.12.2/docs/Detailed-Topics/TaskInputs)处理任务，但我所能实现的只是这样的：

```
lazy val a = TaskKey[Unit]("a", "does a")
lazy val b = TaskKey[Unit]("b", "does b")
lazy val c = TaskKey[Unit]("c", "does c")
lazy val all = TaskKey[Unit]("all", ";a;b;c")

lazy val taskSettings = Seq(
    all <<= Seq(a,b,c).dependOn
) 
```

我用这种方法遇到的问题是任务被**组合在一起**，因此它们的执行与顺序相反，这是我想要实现的。那么如何`alias all=;a;b;c`在 SBT 配置文件中创建一个别名呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-05-08T08:07:23.173

我一直在寻找同样的东西，发现[这个请求](https://github.com/sbt/sbt/issues/388)是一种简单的别名方法和提供一个别名[的提交](https://github.com/sbt/sbt/commit/6746557d05b2b1c207aa5d1a03e5426694c5bf2b)：`addCommandAlias`.

在我的`build.sbt`我现在有：

```
addCommandAlias("go", ";container:start;~copy-resources") 
```

正如您可能猜到的那样，现在在控制台中编写`go`将为我运行更长的命令序列。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-28T02:52:16.513

实现此目的的另一种方法是在 .sbtrc 文件中定义一个别名，该别名将位于项目目录的根目录中。

```
alias all=;a;b;c 
```

您可以在主目录中定义这些 .sbtrc 文件的附加选项，在这种情况下，此别名将可用于您的所有项目。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-25T10:22:49.437

我想通了：

```
lazy val taskSettings = Seq(
    all <<= c dependsOn (b dependsOn a)
) 
```

# android - Android 2.3 中性能问题的内部连接顺序

> ID：16209696
> 
> 赞同：3
> 
> 时间：2013-04-25T08:18:19.270
> 
> 标签：android, sql, sqlite

我在 android 应用程序中使用了 sql select 查询，它在较新版本的 android 上运行良好，即三星 Galaxy 选项卡（android 4.0.3）上需要 30 到 40 秒才能从 sqlite 数据库中检索数据，但在旧版本 android 2.3 的设备上检索数据需要 18 分钟。如果我删除“按 x_unitperson.UNITSEQ 订购”，那么它在 android 2.3 上的性能不会降低。如何在不删除 order by 子句的情况下提高其在 android 2.3 上的性能。

我的sql是：

```
SELECT PERSON_ID,
       COMMANDER,
       CITIZEN,
       RANK,
       GIVEN,
       SURNAME,
       ISOR,

  (SELECT GROUP_CONCAT(NAME_SHORT, '\n')
   FROM units
   INNER JOIN
     (SELECT *
      FROM x_unitperson
      WHERE PERSON_ID = people.PERSON_ID
      ORDER BY x_unitperson.UNITSEQ) AS xunits
   WHERE units.UNIT_ID = xunits.UNIT_ID) AS NAME_SHORT,

  (SELECT FNAME
   FROM photos
   WHERE PERSON_ID = People.PERSON_ID) AS FNAME
FROM people
ORDER BY SURNAME,
         GIVEN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:47:20.567

我对 SQLite 优化器不太熟悉，如果可以将相关子查询重写为连接，一些优化器将为两个查询创建相同的执行计划，我不确定 SQLite 是否是其中之一，所以它可能值得转换您的查询使用 JOIN 而不是相关子查询，看看它是否避免：

```
SELECT  people.PERSON_ID,
        people.COMMANDER,
        people.CITIZEN,
        people.RANK,
        people.GIVEN,
        people.SURNAME,
        people.ISOR,
        ns.NAME_SHORT,
        Photos.FNANE
FROM    people
        LEFT JOIN
        (   SELECT  units.PERSON_ID, GROUP_CONCAT(NAME_SHORT, '\n') AS NAME_SHORT
            FROM    units
                    INNER JOIN
                    (   SELECT  UNIT_ID, NAME_SHORT
                        FROM    x_unitperson
                        ORDER BY UNIT_ID, x_unitperson.UNITSEQ
                    ) AS xunits
                        ON units.UNIT_ID = xunits.UNIT_ID
            GROUP BY units.PERSON_ID
        ) ns
            ON ns.PERSON_ID = people.PERSON_ID
        LEFT JOIN photos
            ON photos.PERSON_ID = People.PERSON_ID
ORDER BY people.SURNAME, people.GIVEN; 
```

此外（使用我可以收集到的有关您的架构的信息）我已经`SELECT *`从您的查​​询中删除了所有内容，这在生产代码中是不好的做法，我还为所有列引用添加了表名/别名的前缀，这再次保护您的查询免受未来架构的影响变化。

# c# - 在 Page_load 上返回 null 时停止执行代码

> ID：16209697
> 
> 赞同：0
> 
> 时间：2013-04-25T08:18:28.287
> 
> 标签：c#, asp.net

我有一个在 .cs 中有一些属性的页面，这些属性稍后会在 .aspx 中使用例如：

。CS

```
public string Person { get;set; } 
```

.ASPX

```
<a href="<%= Person.WebSite %> >My website</a> 
```

问题在于，如果 Person 为空，框架仍会尝试运行 .aspx 并最终抛出空异常。如果我在 Page_Load 中进行简单检查

if(Person == null) 返回

它仍然会尝试执行 .ASPX，然后再次抛出异常

所以..我的问题是..如果 Persons 为空，是否有办法阻止 .ASPX 被加载

```
if(Person == null)
 //Dont run the aspx,code
 Response.Write("Something went wrong!"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:36:39.547

首先，您可以编写如下代码：

```
<a href="<%= Person != null? Person.WebSite : null %> >My website</a> 
```

但这将导致产生不可点击的链接。这可能是不希望的，不是吗？

但是使用数据绑定通常更容易满足这些要求。ASP.Net 的设计目的是模仿 Windows 窗体的行为。您在这里所做的是“传统”的 asp 代码样式，写入 html 流。在某些情况下它是合法的，但并不常见。

# .net - DevExpress TextEdit - 负值掩码

> ID：16209699
> 
> 赞同：0
> 
> 时间：2013-04-25T08:18:44.910
> 
> 标签：.net, regex, devexpress

实际上，我有一个 Devexpress TextEdit，我在该 TextEdit 中显示数量。我已将 TextEdit 的掩码属性设置为：

```
 - MaskType -> Numeric
 - EditMask -> n2
 - UseMaskAsDisplayFormat -> True 
```

现在，我得到如下输出：

```
 - For Postive Values -> 800.00
 - For Negative Values -> 800.00- 
```

但是，我想要一个负值的输出，比如 -800.00

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T11:16:02.040

您设置：RightToLeft = true - 对吗？请设置 RightToLeft = False & Properties.Appearence.TextOption = Far

=> 当你输入负值时 => **-800.00**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:16:21.303

`n2`告诉显示带有两位小数的`TextEdit`数值，但它没有说明`CultureInfo`要使用的任何内容。（DevExpress 控件或与此相关的任何控件不对文化负责）。

如果您希望应用程序中的所有金额都使用特定的文化，请为每个线程设置它。你可以使用`CultureInfo.InvariantCulture`，或者选择一个类似的东西`new CultureInfo("fr-FR")`。

在 .NET 4.5 中，您可以使用该`CultureInfo.DefaultThreadCurrentCulture`属性来更改 AppDomain 的区域性。见[这里](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture.aspx)。

在 .NET 4.5 之前的版本中，您必须为每个线程设置它。

```
CultureInfo ci = new CultureInfo(theCultureString);
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = ci; 
```

# titanium - Appcelerator Titanium 使用标签的常用选项

> ID：16209704
> 
> 赞同：0
> 
> 时间：2013-04-25T08:18:53.580
> 
> 标签：titanium, appcelerator

```
for ( i = 0; i < 10; i++) {
    var YPos = 30;   

    var Label1 = Ti.UI.createLabel({
            left : 0,
            top : YPos ,
            width: "50%",
            backgroundColor: "blue",
            height: 20,
            text: i.toString(),
            textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
        });

    var Label2 = Ti.UI.createLabel({
            left : "50%",
            top : YPos ,
            width: "50%",
            backgroundColor: "blue",
            height: 20,
            text: i.toString(),
            textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
        });

     YPos += 30;
}; 
```

我不想一次又一次地循环使用下面的代码块。

```
width: "50%",
backgroundColor: "blue",
height: 20,
text: i.toString(),
textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER 
```

我正在使用合金。我分配的班级如下

```
var Label2 = Ti.UI.createLabel({
            left : "50%",
            top : YPos ,
            class:"CommonPro"
        }); 
```

在 .tss 文件中

```
 ".CommonPro":
   {
           width: "50%",
           backgroundColor: "blue",
           height: 20,
           text: "Bla Bla",
           textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
    } 
```

我也习惯`className:"CommonPro"`了标签的属性，但没有任何改变。

我必须如何尝试？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:20:08.493

尝试以下

```
var labelOptions = {
     left : 0,
     width: "50%",
     backgroundColor: "blue",
     height: 20,
     textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
     top  : 0,
     text : ''
};
for ( i = 0; i < 10; i++) {
    var YPos = 30;   
    labelOptions.top = YPos;
    labelOptions.string = i.toString();
    var Label1 = Ti.UI.createLabel(labelOptions);
    var Label2 = Ti.UI.createLabel(labelOptions);
    YPos += 30;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T07:18:06.080

类仅在您在 xml 文件中使用时支持，因此请尝试创建一个通用 json 对象并将其传递给标签或创建返回通用标签对象的函数。

# java - 自动登录到站点

> ID：16209707
> 
> 赞同：0
> 
> 时间：2013-04-25T08:19:02.153
> 
> 标签：java, login

我正在尝试创建某种脚本来登录并单击站点上的某个链接。我已经包含了来自主站点的登录脚本，并且想知道是否有人可以告诉我如何在我加载此站点时将我的用户名和密码输入到此代码中，它会自动加载。或者，如果有人可以制作一个可以点击链接的脚本，那就太棒了。

```
 <table width="100%" cellpadding="0" cellspacing="0" border="0" class="Skin-CustomLoginTable">
<tr>
    <td class="Skin-CustomLoginLeftSide">

    </td>

        <td class="Skin-CustomLoginRightSide">
        <div class="Skin-CustomLoginWrapper">
            <div class="Skin-CustomLoginInnerWrapper">

                <table cellpadding="0" cellspacing="0" class="Skin-CustomLoginFormTable">
                    <tr>
                        <td><label>User Name</label></td>
                        <td><label>Password</label></td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="Skin-CustomLoginInputs" id="LoginUserName"><span id="pageform_CZ1_2_CZ1_0_ctl01_ctl00" style="color:Red;display:none;">This field cannot be left empty.<br /></span><input name="pageform$CZ1$2$CZ1$0$ctl01$UserName" type="text" id="pageform_CZ1_2_CZ1_0_ctl01_UserName" size="35" class="Form-TextField" formID="3bd2a627-4646-4773-bb7a-262216b1e7aa" onkeypress="return(submitFormOnEnterFF('3bd2a627-4646-4773-bb7a-262216b1e7aa', event));" />
                        <td class="Skin-CustomLoginInputs" id="LoginUserPW"><span id="pageform_CZ1_2_CZ1_0_ctl02_ctl00" style="color:Red;display:none;">This field cannot be left empty.<br /></span><input name="pageform$CZ1$2$CZ1$0$ctl02$Password" type="password" id="pageform_CZ1_2_CZ1_0_ctl02_Password" size="35" class="Form-TextField" formID="3bd2a627-4646-4773-bb7a-262216b1e7aa" onkeypress="return(submitFormOnEnterFF('3bd2a627-4646-4773-bb7a-262216b1e7aa', event));" />
                        <td class="Skin-CustomLoginButton" id="LoginButton"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:21:19.193

你可以试试[OpenId 授权](http://krams915.blogspot.com/2011/02/spring-security-3-openid-login-with_13.html)。如果您登录到 Google，您将在任何地方都受到欢迎！

# ios - 图片文件扩展名 Xcode

> ID：16209708
> 
> 赞同：1
> 
> 时间：2013-04-25T08:19:02.877
> 
> 标签：ios, objective-c, macos, cocoa

我正在编写一个类似于电子邮件的应用程序。因此，当我将文件附加到我的消息时，我想显示文件名 + 小图像（图标），此图标应根据文件类型，例如 pdf 如果文件是 pdf，Word id 文件是 word 文件。 ...

有谁知道我怎样才能找到这些小图像？还是有代表性的例子？

进阶谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:37:22.323

如果这适用于 iOS，那么您可以使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)：

```
NSURL *url = [NSURL fileURLWithPath:pathToYourFile];
UIDocumentInteractionController *diac = [UIDocumentInteractionController interactionControllerWithURL:url];
NSArray *icons = diac.icons;
if ([icons count] > 0) {
    // This is the smallest available icon:
    UIImage *icon = [icons objectAtIndex:0];
} else {
    // No icon found.
    // According to the documentation, this case *should not* occur...
} 
```

# javascript - 强制砌体/类似物忽略流动并填充间隙

> ID：16209712
> 
> 赞同：7
> 
> 时间：2013-04-25T08:19:19.897
> 
> 标签：javascript, css, layout, jquery-masonry

Masonry/Isotope/Freetile 和其他在网格/容器中的绝对定位元素方面做得很好。

然而，当一个元素占据网格/容器的整个宽度时，它会产生巨大的间隙，这是不可接受的结果。

这是我的问题的 jsfiddle：http: [//jsfiddle.net/QNf3A/1/](http://jsfiddle.net/QNf3A/1/)

红色 div 的顶部有足够的空间放置绿色 div。然而，不同的图书馆倾向于尊重流程，而不是“不留空隙”的理念。

有谁知道替代 js 库或类似的技巧来避免空白？

-

来自jsfiddle的代码...

HTML：

```
<div id="container">
    <div class="block half"></div>
    <div class="block full"></div>
    <div class="block half"></div>
    <div class="block half"></div>
    <div class="block half"></div>
</div> 
```

CSS：

```
#container{
    width: 600px;
    background-color: #EEE;
}
.block{
  float: left;
}
.half{
    width: 300px;
    height: 100px;
    background-color: #CFC;
}
.full{
    width: 600px;
    height: 100px;
    background-color: #FCC;
} 
```

JS/jQuery：

```
$(function($) {

  $('#container').masonry({
    itemSelector: '.block',
    columnWidth: 300
  });

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T08:51:40.680

我发现了这个：
[https ://github.com/DrewDahlman/Mason](https://github.com/DrewDahlman/Mason)

并且似乎可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-13T21:24:06.163

不知道这个答案是否为时已晚，但请查看 Packery。这是一个砖石类型的插件，它就是这样做的：

[https://github.com/metafizzy/packery](https://github.com/metafizzy/packery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T21:36:02.180

更好的解决方案是二维包装。完美的砌体[http://www.drewdahlman.com/meusLabs/?p=218](http://www.drewdahlman.com/meusLabs/?p=218)可以解决一些与缝隙有关的问题。

# angularjs - 如何使用 angular.js-resource 启用 cors 请求

> ID：16209715
> 
> 赞同：13
> 
> 时间：2013-04-25T08:19:33.703
> 
> 标签：angularjs, cors, angularjs-service

我有一个 angular.js 应用程序，我需要做 CORS 请求。

我想使用角度资源定义我的休息服务“角度”，如下所述：http: [//docs.angularjs.org/tutorial/step_11](http://docs.angularjs.org/tutorial/step_11)。

但我还没有找到让这个工作的方法。在谷歌上，我找到了以下示例代码：http: [//jsfiddle.net/ricardohbin/E3YEt/](http://jsfiddle.net/ricardohbin/E3YEt/)，但这似乎不适用于 angular-resources。

这是我的 app.js

```
'use strict';

angular.module('corsClientAngularApp', ['helloServices'])
  .config(function ($routeProvider) {
    $routeProvider
      .when('/', {
        templateUrl: 'views/main.html',
        controller: 'MainCtrl'
      })
      .otherwise({
        redirectTo: '/'
      });
  }); 
```

这是我的 services.js 和其他服务

```
angular.module('helloServices', ['ngResource']).
    factory('Hello', function($resource){
  return $resource('http://localhost:8080/cors-server/hello/:name', {}, {
    query: {method:'GET', params:{name:'name'}, isArray:false}
  });
}); 
```

这是我的 main.js 与使用 $http 的控制器，这有效！：

```
'use strict';

angular.module('corsClientAngularApp')
  .controller('MainCtrl', function ($scope, $http, Hello) {
    $http.defaults.useXDomain = true;

    $http.get('http://localhost:8080/cors-server/hello/stijn')
        .success(function(data) {
            $scope.hello = data;
        });
  }); 
```

这是我使用角度资源的 main.js 的另一个版本。这不起作用:(

```
'use strict';

angular.module('corsClientAngularApp')
  .controller('MainCtrl', function ($scope, $http, Hello) {
    $http.defaults.useXDomain = true;
    $scope.hello = Hello.query({name:'stijn'});
  }); 
```

这是来自工作请求的标头（来自 chrome devtools）：

```
Request URL:http://localhost:8080/cors-server/hello/stijn
Request Method:OPTIONS
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4
Access-Control-Request-Headers:accept, origin, x-requested-with
Access-Control-Request-Method:GET
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost:8080
Origin:http://localhost:9000
Referer:http://localhost:9000/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31

Response Headers
Access-Control-Allow-Headers:accept, origin, x-requested-with
Access-Control-Allow-Methods:GET
Access-Control-Allow-Origin:*
Content-Length:0
Date:Thu, 25 Apr 2013 10:42:34 GMT
Server:Apache-Coyote/1.1 
```

这些是来自不工作请求的标头：

```
Request URL:http://localhost/cors-server/hello/stijn
Request Method:OPTIONS
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4
Access-Control-Request-Headers:accept, origin, x-requested-with
Access-Control-Request-Method:GET
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost
Origin:http://localhost:9000
Referer:http://localhost:9000/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31

Response Headers
Allow:GET,HEAD,POST,OPTIONS,TRACE
Connection:Keep-Alive
Content-Length:0
Content-Type:text/plain
Date:Thu, 25 Apr 2013 10:41:12 GMT
Keep-Alive:timeout=5, max=100
Server:Apache/2.2.22 (Win32) 
```

使用角度资源时，请求 url 看起来是错误的。但为什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T11:33:35.993

URL`$resource`接受使用冒号作为参数。因此，在 url 中使用端口时，您需要为端口转义冒号。这在[$resource 文档中进行了解释](http://docs.angularjs.org/api/ngResource.$resource)

# c# - 在不访问 IIS 的情况下部署 REST 服务

> ID：16209716
> 
> 赞同：0
> 
> 时间：2013-04-25T08:19:36.663
> 
> 标签：c#, .net, rest, iis, httphandler

我在 C# 中开发了一个 .NET REST Web 服务。虽然我有丰富的 C# 经验，但不幸的是，我对在 Web 托管环境中部署这样的服务并没有太多了解。

由于环境原因，我无法访问 IIS。

托管服务提供商的支持服务向我提供的建议如下：

1.  创建主域的子域以实现专用的应用程序池（这是主机提供商的要求）
2.  创建一个 Bin 文件夹来保存我编译的源代码库
3.  将以下内容添加到 Web.Config 文件中：

> ```
>  <system.web>
>     <httpHandlers>
>         <add type="ReportRESTWebService.Service, ReportRESTWebService" verb="*" path="report" />
>     </httpHandlers>
> </system.web>
> <system.webServer>
>     <handlers>
>         <add name="report" path="report" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="File" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
>     </handlers>
>     <directoryBrowse enabled="false" />
> </system.webServer> 
> ```

以上将具有为所有 HTTP 动词上的报告资源创建处理程序映射并将该资源上的任何 HTTP 流量转发到我的 ReportRESTWebService.dll 进行处理的效果。

我不清楚的一点是上述是否令人满意，以及我如何测试我给出的建议是否正确。我知道我的站点在本地运行，但我可以访问 IIS，因此我可以控制配置。

希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:08:51.193

经过一天的详尽测试后，我采取的步骤（在问题中详细说明）似乎是令人满意的。

需要注意的一点是与您的应用程序池匹配的托管管道模式。未能将其与您的 Web.Config 正确匹配将导致痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:09:08.210

如果您使用的是 Wcf Rest，那么您可以考虑将其托管为 Windows 服务或自托管服务。 `Windows Service` [http://blogs.msdn.com/b/juveriak/archive/2009/03/15/rest-endpoint-hosted-in-a-wcf-windows-service.aspx](http://blogs.msdn.com/b/juveriak/archive/2009/03/15/rest-endpoint-hosted-in-a-wcf-windows-service.aspx)

`Self hosted Service` [http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/self-hosted-wcf-rest-service-or-hosting-wcf-rest-service-in-console-application/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/self-hosted-wcf-rest-service-or-hosting-wcf-rest-service-in-console-application/)

# iphone - 两个选项栏按钮项

> ID：16209717
> 
> 赞同：0
> 
> 时间：2013-04-25T08:19:41.557
> 
> 标签：iphone, ios, uibarbuttonitem

![按钮示例](https://i.stack.imgur.com/FoDEn.png)

也许不是那么聪明的问题，但我怎么能让彼此如此接近，一个开-另一个关类型的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:24:34.633

您的问题确实含糊不清，但是如果我说得对，您正在寻找可以在界面构建器中的对象下找到的分段控件。您可以像 UIBarButtonItem 一样将其添加到 UIToolBar :)

摆弄选项并查看文档以获取更多信息..

-V

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:26:41.567

基本上它是一个`UISegmentedControl`，你可以在创建 XIB 时找到它，在这里：

![在此处输入图像描述](https://i.stack.imgur.com/bk1Mh.png)

你也可以[在这里](https://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=Segmented)找到一些整洁的东西，在那里你可以找到一些定制`UISegmentedControls`的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:00:06.283

您可以使用的最好的东西是`UISegmentedControl`分段控件显示用户可以从中选择的选项列表。每个部分看起来都像一个按钮；即使在用户抬起他或她的手指之后，这些片段仍保持“按下”状态。了解更多详情[了解更多详情](http://mobileappmastery.com/here-is-how-you-use-uisegmentedcontrol/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T11:49:42.083

它是一个 UISegmented 控件，它完成了你想做的事情。检查参考...

[参考1](http://mobisoftinfotech.com/iphone-segmented-controluisegmentedcontrol-tutorial/)

[参考文献 2](http://iphonedevsdk.com/forum/tutorial-discussion/29597-uisegmentedcontrol-tutoria.html)

# java - 为什么我不能推入堆栈？Java 6 泛型

> ID：16209719
> 
> 赞同：1
> 
> 时间：2013-04-25T08:19:46.257
> 
> 标签：java, generics, nullpointerexception, stack

我不知道为什么我不能做一些简单的事情，比如将通用类型的对象推送到堆栈上。我决定我需要一些帮助来解决这个问题。这就是我所拥有的：

```
private void preOrderTrav(BSTnode<K> node) {
            if(node != null){
            myStack.push(node); //Null pointer exception

            while(!myStack.isEmpty()){
                myStack.pop();
                node = node.getLeft();
                myStack.push(node.getRight());
                myStack.push(node.getLeft());

                }

            }
               } 
```

这是从我的构造函数中调用的：

```
public BSTSortedListIterator(BSTnode<K> root) {
    preOrderTrav(root);
} 
```

有人有想法么？顺便说一句，我收到此错误：

```
Exception in thread "main" java.lang.NullPointerException
    at BSTSortedListIterator.preOrderTrav(BSTSortedListIterator.java:33)
    at BSTSortedListIterator.preOrderTrav(BSTSortedListIterator.java:31)
    at BSTSortedListIterator.<init>(BSTSortedListIterator.java:43)
    at BSTSortedList.iterator(BSTSortedList.java:130)
    at WebDictionary.main(WebDictionary.java:135) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:24:50.503

如果你确定这是你得到 NullPointerException 的地方

```
myStack.push(node); 
```

正如你所提到的，有一张支票

```
if(node != null) 
```

唯一可以为 null 的是**myStack**。否则这是不完整的信息。

```
Exception in thread "main" java.lang.NullPointerException
    at BSTSortedListIterator.preOrderTrav(BSTSortedListIterator.java:33) 
```

这是 `myStack.push(node);`BSTSortedListIterator.java 中的第 33 行吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:25:48.940

在大多数`myStack`情况下，实例为 null，因为`stack.push`即使在插入 null 元素的情况下也不会引发错误。`Java` `Stack`类使用`Vector`（或特别是数组）作为底层存储，在添加元素时将元素添加到其数组中：

```
elementData[elementCount++] = obj; 
```

所以，我没有看到 NPE 是由于推送方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:26:24.283

您需要在 main 或其他地方初始化 myStack 对象，但在调用 preOrderTrav(node) 之前。如果没有任何地方像

```
myStack = new Stack<K>() 
```

那么很可能，您忘记了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-10T09:51:04.010

我遇到了同样的问题，我用`JAVA 8`.

一开始，我将变量设置为`static Stack<Node> stack;`

然后我得到了`null pointer`。

我通过设置变量来解决这个问题：

```
static Stack<Node> stack= new Stack<Node>(); 
```

# google-apps-script - 根据单元格中的第一个字符隐藏 Google 电子表格中的行

> ID：16209724
> 
> 赞同：2
> 
> 时间：2013-04-25T08:19:52.510
> 
> 标签：google-apps-script, google-sheets

我正在向 Google 电子表格添加功能。电子表格从网络上导入数据，我把它们都格式化得很好。我的一个专栏是一系列字符串，以两种方式之一格式化 - 字符串或 *String * 没有空格（基本上是从网络导入斜体）。

我试图想出一个在我打开电子表格时运行的脚本，它将：

*   取消隐藏我的电子表格中的所有行
*   循环浏览电子表格
*   隐藏第 2(B) 列以星号开头的每一行

我有以下内容：

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("DoDH");
  sheet.showRows(1, sheet.getMaxRows());
  for(var i=1; i<sheet.getMaxRows()+1; ++i){
    if (sheet.getRange(i, 2).getValue().){
      sheet.hideRow(i)
    }
  }
} 
```

我不知道如何访问每个单元格内的字符串，以及如何访问字符串中的字符。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:49:25.260

这是更新的代码。见评论有洞察力

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("DoDH");
  var maxRows = sheet.getMaxRows();

  //show all the rows
  sheet.showRows(1, maxRows);

  //get data from clumn B
  var data = sheet.getRange('B:B').getValues();

  //iterate over all rows
  for(var i=0; i< data.length; i++){
    //compare first character, if asterisk, then hide row
    if(data[i][0].charAt(0) == '*'){
      sheet.hideRows(i+1);
    }
  }
} 
```

# oracle - TNS：无法解析指定的连接标识符

> ID：16209728
> 
> 赞同：4
> 
> 时间：2013-04-25T08:19:56.270
> 
> 标签：oracle, oracle11g, oracleclient, ora-12154

我的 Windows 7 机器上安装了 oracle 服务器 11g。我必须从远程机器安装此服务器。远程机器是 64 位系统，Ubuntu 12.10。为了访问服务器，我安装了 Oracle 即时客户端并配置了一切。

ORACLE_HOME、TNS_ADMIN、PATH、LD_LIBRARY_PATH 都已设置，并指向正确的位置。

我的 tnsname.ora 文件：

```
ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = ravi)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl.xxx.com)
    )
  ) 
```

我的 sqlnet.ora 文件

```
SQLNET.AUTHENTICATION_SERVICES= (NTS)

NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT) 
```

我在服务器上的 tnslistener 已启动并正在运行。

```
LSNRCTL> services
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:0 refused:0
         LOCAL SERVER
Service "orcl.xxx.com" has 1 instance(s).
  Instance "orcl", status READY, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:221 refused:0 state:ready
         LOCAL SERVER
Service "orclXDB.xxx.com" has 1 instance(s).
  Instance "orcl", status READY, has 1 handler(s) for this service...
    Handler(s):
      "D000" established:0 refused:0 current:0 max:1022 state:ready
         DISPATCHER <machine: ravi, pid: 4844>
         (ADDRESS=(PROTOCOL=tcp)(HOST=ravi.xxx.com)(PORT=49239))
The command completed successfully 
```

即使设置了所有这些，我也无法连接到服务器。

当我发出`sqlplus user1@orcl`命令时，我得到

```
ravi@ubuntu:~/app/ravi/product/11.2.0/dbhome_1/bin$ sqlplus user1@orcl

SQL*Plus: Release 11.2.0.1.0 Production on Thu Apr 25 01:17:01 2013

Copyright (c) 1982, 2009, Oracle.  All rights reserved.

Enter password: 
ERROR:
ORA-12154: TNS:could not resolve the connect identifier specified 
```

这些帖子我都看过了

[使用 bash 变量时 Sqlplus 登录错误：SP2-0306: Invalid option](https://stackoverflow.com/questions/6550542/sqlplus-login-error-when-using-bash-variables-sp2-0306-invalid-option)

[oracle 即时客户端无法解析 ora-12154...](https://stackoverflow.com/questions/7084439/ora-12154-could-not-resolve-with-oracle-instant-client)

实际上还有许多其他帖子，但没有一个可以解决我的问题。

请求帮助

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-07T11:44:50.580

你的监听器配置不正确，我认为......

能否上传：

.- listener.ora ?

.- netstat -na|grep 1521

这是我的“服务”输出之一

LSNRCTL> 服务

连接到 (ADDRESS=(PROTOCOL=tcp)(HOST=)(PORT=1521)) 服务摘要...服务“eva”有 1 个实例。实例“eva1”，状态 READY，有 1 个用于此服务的处理程序...处理程序：“DEDICATED”建立：39 拒绝：0 状态：准备好

还有我的 netstat

[oracle@laborac1 ~]$ netstat -na|grep 1521

tcp 0 0 192.168.113.152:1521 0.0.0.0:* 听

tcp 0 0 192.168.113.150:1521 0.0.0.0:* 听

# cordova - 如何使用 Phonegap 和 html5 框架（如 Sencha Touch）在为 Black Berry OS 6.0 开发的应用程序中实现推送通知

> ID：16209731
> 
> 赞同：0
> 
> 时间：2013-04-25T08:20:01.930
> 
> 标签：cordova, blackberry, sencha-touch, push-notification

[Black Berry 开发者网站](https://developer.blackberry.com/html5/apis/notification.html)中明确指出，HTML5 通知仅在 Black Berry 10 中支持。有没有办法在为 Black Berry OS 6.0 开发的应用程序中使用 Phonegap 和 html5 框架（如 Sencha Touch）实现推送通知。

任何建议，锻炼示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:01:19.453

你可以看看这个：[https](https://github.com/shaders/phonegap-cordova-push-notifications) ://github.com/shaders/phonegap-cordova-push-notifications 。或者这个：[http ://www.pushwoosh.com/programming-push-notification/blackberry-html5-webworks-push-notification-sdk/](http://www.pushwoosh.com/programming-push-notification/blackberry-html5-webworks-push-notification-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T11:31:01.513

查看[http://www.pubnub.com/devcenter](http://www.pubnub.com/devcenter)我已经使用了它的 Javascript SDK，而且非常简单。如果您想将它与 Sencha Touch 一起使用，请阅读此内容[http://www.pubnub.com/blog/building-a-pubnub-powered-chat-app-with-sencha-touch-2/](http://www.pubnub.com/blog/building-a-pubnub-powered-chat-app-with-sencha-touch-2/)

# c# - InputDialog/MessageDialog 与 C# XAML Windows 商店应用程序中的文本框

> ID：16209732
> 
> 赞同：0
> 
> 时间：2013-04-25T08:20:09.867
> 
> 标签：c#, xaml, windows-8, popup, messagedialog

我正在尝试使用 TextBox 创建一个 MessageDialog ，该文本框允许用户输入一个我找不到的单词我该怎么做。有人可以帮我吗？

PS：我认为 Callisto 可以做到，但我没有找到方法。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:20:18.447

你是对的，[Callisto](https://github.com/timheuer/callisto)确实有一个控件**CustomDialog**这几乎正是你所需要的。

有一个带有 Callisto 的示例应用程序，但您要查找的 xaml 在[MainPage.xaml 中](https://github.com/timheuer/callisto/blob/master/src/Callisto.TestApp/MainPage.xaml)。

# meteor - 在流星（mrt）控制台输出中看到的“从结帐运行流星”实际上是什么意思？

> ID：16209733
> 
> 赞同：2
> 
> 时间：2013-04-25T08:20:16.367
> 
> 标签：meteor, meteorite

我突然开始收到以下消息 - 一切似乎都有效，但我不知道为什么我会收到它/它对我的应用程序真正意味着什么。我唯一能想到的是，我正在使用的一些智能包正在寻找旧版本的流星，而 mrt 足够聪明，不会使用会破坏它的流星版本？

> 在陨石做它的事情时退后一步
> 
> 完成安装智能包
> 
> 好的，一切准备就绪。流星来了！
> 
> =>**从结帐运行 Meteor -- 覆盖项目版本 (0.6.2)**

问题是我很确定我*想*在 0.6.2 上运行，而不是将其覆盖到其他版本。

那么这到底意味着什么呢？- 我需要做什么才能*得到*它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:51:14.333

我不太清楚为什么它使用那个奇怪的术语。0.6.0 版本引入了项目版本，因此每个项目都可以运行自己的流星版本，类似于陨石的运行方式`smart.json`

这`Running Meteor from a checkout -- overrides project version (0.6.2)`意味着此版本被您的 smart.json 中的版本覆盖。[通常是github](https://github.com/meteor/meteor)上 master 分支上的最新版本（已签出因此措辞）。所以此时如果你运行`mrt`它会使用`0.6.2.1`

我敢肯定，随着时间的推移，陨石最终会被折叠成流星。0.6.0 刚刚发布不久，因此仍需要进行一些更新以使它们更好地协同工作。

# jquery - Jquery按类选择

> ID：16209735
> 
> 赞同：0
> 
> 时间：2013-04-25T08:20:24.487
> 
> 标签：jquery, html, css

我有两个代表相同用户属性的 html 元素（跨度和输入）。在我的 JQuery 脚本中，我想同时选择这两个元素。我发现这样做的唯一方法是指定不同的 id 并执行两个查询

```
$("#span\\.firstName")
$("#input\\.firstName"). 
```

目前我正在寻找另一种解决方案。我想使用类属性（在跨度和输入上指定类名，然后执行

```
$(".firstName") 
```

)，但是 CSS 还没有准备好，我不知道需要哪些类，所以我不能使用它。您是否知道，是否存在任何其他解决方案来执行此选择，例如使用类属性。

```
<td>
  <div>
     <span id="span.firstName">${user.firstName}</span>
     <span id="span.lastName">${user.lastName}</span>
  </div>
  <div>
     <span>First name</span><input id="input.firstName" value="${user.firstName}"/>
     <span>Last name</span><input id="input.lastName" value="${user.lastName}"/>
  </div>
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:25:12.403

你实际上可以像这样做一个选择器：

```
$("[id*='firstName']") // this will give both span and input of firstName etc 
```

**[`Official Document`](http://api.jquery.com/attribute-contains-selector/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:38:19.463

您可以使用[Attribute Contains Selector [name*="value"]](http://api.jquery.com/attribute-contains-selector/)执行此操作：

```
$('[id*="firstName"]') 
```

[**小提琴**](http://jsfiddle.net/atekw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:25:12.997

您可以使用[多重选择器](http://api.jquery.com/multiple-selector/)。`$('#id1, #id2')`

# php - 用列数据替换括号内的字符串

> ID：16209738
> 
> 赞同：3
> 
> 时间：2013-04-25T08:20:30.033
> 
> 标签：php, regex, preg-replace-callback

我编写了一些代码来允许对特定数据列进行计算。

例如 {1}*{2} 将导致第 1 列乘以第 2 列。我需要做的是用列的实际值替换这些数字。

简单地说，我需要能够获取括号内的值，然后像 $column["value from parenthesis"] 一样使用它来获取要插入计算的值。

然后我可以评估字符串。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:27:15.273

像这样的东西应该工作：

```
$myString = '{1}*{2}';
$myValues = [1 => '684', 2 => '42'];
$myFormula = preg_replace_callback('{([0-9]+)}', function($match) use ($myValues) {
  return $myValues[$match] ?: 'undefined';
}, $myString);
echo "Resulting formula: $myFormula"; 
```

当使用未定义的索引时，可能希望给出更严重的错误，但本质上这应该通过一些调整来工作。

此外，如果您运行比 5.4 更旧的 PHP 版本，则需要重写短数组语法和 lambda。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:39:45.840

PHP 摇滚！！！

```
$string = 'blabla bla I want this to be done !!! {10} + {12} Ah the result is awesome but let\'s try something else {32} *    {54}';

// Requires PHP 5.3+
$string = preg_replace_callback('/\{(\d+(\.\d+)?)\}\s*([\+\*\/-])\s*\{(\d+(\.\d+)?)\}/', function($m){
return mathOp($m[3], $m[1], $m[4]);
}, $string);

echo $string; // blabla bla I want this to be done !!! 22 Ah the result is awesome but let's try something else 1728

// function from: http://stackoverflow.com/a/15434232
function mathOp($operator, $n1, $n2){
    if(!is_numeric($n1) || !is_numeric($n2)){
        return 'Error: You must use numbers';
    }
    switch($operator){
        case '+':
            return($n1 + $n2);
        case '-':
            return($n1 - $n2);
        case '*':
            return($n1 * $n2);
        case '/':
            if($n2 == 0){
                return 'Error: Division by zero';
            }else{
                return($n1 / $n2);
            }
        default:
            return 'Unknown Operator detected';
    }
} 
```

[在线演示](http://codepad.viper-7.com/QX0Rup)。

# android - 在没有通知图标的情况下在 Android 中运行前台服务

> ID：16209741
> 
> 赞同：0
> 
> 时间：2013-04-25T08:20:43.070
> 
> 标签：android, service

在 Android 中，您可以使用 startForeground 方法让服务在前台运行。但是，此方法需要通知第二个参数，这意味着用户将在状态栏上看到一个图标。

是否可以在不向用户发出任何通知或视觉指示的情况下运行前台服务？

# linux - 我如何在每行之后回显换行符

> ID：16209743
> 
> 赞同：0
> 
> 时间：2013-04-25T08:20:54.927
> 
> 标签：linux, bash

我的主人是`Red Hat Enterprise Linux Server release 5.4`bash。
当我使用此命令时：`netstat -tnpl | grep "tcp" | awk '{print $4}'`，它输出以下内容：

```
127.0.0.1:2208
0.0.0.0:871
0.0.0.0:9001
0.0.0.0:3306
0.0.0.0:111
127.0.0.1:631
127.0.0.1:25
127.0.0.1:6010
127.0.0.1:6011
127.0.0.1:2207
:::80
:::22
:::8601
::1:6010
::1:6011
:::443 
```

但是当使用 this: 时`ip_port=`netstat -tnpl | grep "tcp" | awk '{print $4}'` && echo $ip_port`，它变成了以下内容：

```
127.0.0.1:2208 0.0.0.0:871 0.0.0.0:9001 0.0.0.0:3306 0.0.0.0:111 127.0.0.1:631 127.0.0.1:25 127.0.0.1:6010 127.0.0.1:6011 127.0.0.1:2207 :::80 :::22 :::8601 ::1:6010 ::1:6011 :::443 
```

它变成了在线。这是怎么发生的，我想要的是原始格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:24:45.603

回显时，您需要将变量括在引号中：

```
echo "$ip_port" 
```

此外，您不需要同时使用`grep`和`awk`因为`awk`can `grep`。您可以将命令简化为：

```
netstat -tnpl | awk '/tcp/{print $4}' 
```

# c# - InitializeComponent() 后 ComboBox 的数据绑定

> ID：16209745
> 
> 赞同：1
> 
> 时间：2013-04-25T08:20:55.840
> 
> 标签：c#, wpf, xaml, data-binding, binding

我的代码上有两个`ComboBox`：

```
<ComboBox Name="comboBoxSelectCamera" ItemsSource="{Binding Path=ListCameras}" SelectionChanged="comboBoxSelectCamera_SelectionChanged" />
<ComboBox Name="comboBoxCities" ItemsSource="{Binding Path=ListCities}" /> 
```

在我的身上，`Window`我有这段代码，所以`ComboBox`了解它的`Path`来源：

```
<Window ....
     DataContext="{Binding RelativeSource={RelativeSource Self}}"
     .... > 
```

两个组合都绑定到我在我创建的两个列表`MainWindow`：

```
public MainWindow()
{
    InitializeCitiesCombo();

    InitializeComponent();

    // Initialize the control that checks for cameras
    InitializeCameraControl();
    FillCameraProperties();
    DataContext = this;
} 
```

第一个`ComboBox`列表是在**之前**创建的`InitializeComponent`，所以当它的组合创建时，它会填充特定的内容。

第二个`ComboBox`列表是在**之后**创建的`InitializeComponent`，因为它依赖于加载相机的对象，而且，我不知道是不是这个原因，但是如果列表是在**之后** `InitializeComponent`创建的，它不会填充`ComboBox`.

我知道还有其他方法可以在我的计算机上填写已连接摄像机的列表，但**我必须**使用`InitializeComponent`在`InitializeCameraControl()`.

关于我如何`ComboBox`在之后填写这个的任何想法`InitializeComponent`？

**编辑：**两个列表的声明：

```
private List<CameraInfo> ListCameras { get; set; } 
private List<String> ListCities { get; set; } 
```

在代码的某处，`ListCites`：

```
ListCities = new List<String> { Madrid, Barcelona, Alicante, Valencia } 
```

在代码中的某处，我的控件返回已连接摄像机的列表（它有效，它有元素，但它们不显示在组合中）：

```
ListCameras = MyUserControl.ConnectedCameras;  // this returns a valid list of `CameraInfo` 
```

我的`CameraInfo`班级：

```
public class CameraInfo
{
    public CameraInfo(string name, string id);

    public static implicit operator string(CameraInfo cameraInfo);

    public string Id { get; }
    public string Name { get; }

    public override string ToString();
} 
```

请注意，在我们讨论这个问题时，我尝试将相机组合更改为`DisplayMemberPath`.

**绑定错误：**

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Text' property not found on 'object' ''MainWindow' (Name='')'. BindingExpression:Path=Text; DataItem='MainWindow' (Name=''); target element is 'TextBox' (Name=''); target property is 'Template' (type 'ControlTemplate') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:37:08.783

好的，这是你的主要问题。首先，像这样更改您的列表。

```
private ObservableCollection<CameraInfo> _listCamera; 
public ObservableCollection<CameraInfo> ListCameras
{
    get { return _listCamera ?? (_listCamera = new ObservableCollection<CameraInfo>()); }
} 
```

我只为一个列表显示它，但你必须为两者都这样做。要填写列表，请不要重新实例化它们，而是清除它们。例如

```
private void FillCameraInfo()
{
    IEnumerable<CameraInfo> example = new[] { new CameraInfo(), new CameraInfo() };
    ListCameras.Clear();
    foreach(var exampleEntry in example)
        ListCameras.Add(exampleEntry);
} 
```

这只是一个例子，所以我尽可能简单。如果您要重新实例化它们，则绑定将被“销毁”。

第一个`ComboBox`正确填充的事实在于您在使用它们的绑定初始化组件之前填充它。所以可以找到物品。第二个`ComboBox`不知道 中的更改`ListCities`，因为它没有通知它。如果您使用`ObservableCollection<T>`将`ComboBox`收到通知，请在[此处](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.100%29.aspx)查看更多信息。并且绑定应该按预期工作。

**编辑 - 为什么你不应该重新实例化集合**

如果您要执行以下操作以将数据放入集合中

```
public FillCameraInfo()
{
    ListCameras = new ObservableCollection<CameraInfo>(someData); 
} 
```

绑定仍然会监听“旧”实例。但是你改变了引用，`ListCameras`没有人听新的实例。

**编辑 - 为什么你什么都看不到**

好吧，这有点奇怪，但它就是这样。绑定的声明顺序`ComboBox`非常重要，这样它才能正常工作。请在[此处](https://stackoverflow.com/questions/561166/binding-wpf-combobox-to-a-custom-list)查看正确的顺序。

# c# - c#中的克隆队列

> ID：16209747
> 
> 赞同：3
> 
> 时间：2013-04-25T08:21:00.793
> 
> 标签：c#, queue, clone

我有以下代码：

```
Queue<string> oldQueue = new Queue<string>();

oldQueue.Enqueue("One");
oldQueue.Enqueue("Two");
oldQueue.Enqueue("Three");

Queue newQueue = oldQueue;
string newString = newQueue.Dequeue(); 
```

问题是，一旦我将项目从 出列`newQueue`，该项目也会从出列`oldQueue`。有没有办法“克隆”一个队列，从一个队列中删除一个项目将保持它的克隆队列不变？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T08:26:09.657

您必须进行更深入的复制：

```
 //Queue newQueue = oldQueue;
   Queue<string> newQueue = new Queue<string>(oldQueue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:23:47.123

Queue 是一个引用类型，所以 newQueue 和 oldQueue 持有一个指向同一个对象的指针。他们是一样的 ;-）

请参阅有关如何使用反射进行“深度克隆”的答案：

[在 Silverlight 的扩展方法中使用反射进行深度复制？](https://stackoverflow.com/questions/13198658/deep-copy-using-reflection-in-an-extension-method-for-silverlight)

# javascript - 如何使用 Qunit 将 HTML 固定装置与 Karma 测试运行器一起使用？

> ID：16209749
> 
> 赞同：25
> 
> 时间：2013-04-25T08:21:04.323
> 
> 标签：javascript, unit-testing, tdd, qunit, karma-runner

我正在使用**qunit** ( [http://qunitjs.com ) 与](http://qunitjs.com)**Karma**测试运行器 ( [http://karma-runner.github.io/0.8/index.html](http://karma-runner.github.io/0.8/index.html) ) 一起玩。我成功地创建并运行了简单的测试（100% JavaScript），但现在我正在尝试使用 HTML 固定装置来测试与 DOM 节点交互的代码。我可以通过以这种方式在“文件”中声明它们来加载这些固定装置：

 **```
{pattern: 'fixtures/myfixture.html', watched: true, served: true, included: false} 
```

它由 karma 的服务器提供服务，但我不明白如何访问它的 DOM :(

假设我的夹具是一个包含以下标记的简单 html 文件：

```
<div id="container">hello world</div> 
```

如何编写可以访问该节点（div）的测试？据我所知，“文档”与“静态”文件夹下的“context.html”文件有关……那么我的灯具的HTML在哪里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-07T08:17:01.087

我没有使用 AngularJS ...我通过采用 jasmine-jquery 解决了：[https](https://github.com/velesin/jasmine-jquery) ://github.com/velesin/jasmine-jquery （我仅将 jasmine 用于固定装置，我的测试仍然使用 qunit 编写）。在我的配置文件中，我有以下内容：

```
 frameworks = ['qunit', 'jasmine'];

    files = [

      JASMINE, 
      JASMINE_ADAPTER,
      QUNIT, 
      QUNIT_ADAPTER,

      // dependencies
      {pattern: 'src/main/webapp/js/libs/jquery/jquery-1.8.3.js', watched: false, served: true, included: true},
      {pattern: 'src/test/js/lib/jasmine-jquery.js', watched: false, served: true, included: true},

      // fixtures
      {pattern: 'src/test/js/**/*.html', watched: true, served: true, included: false},
      {pattern: 'src/test/js/**/*.json', watched: true, served: true, included: false},
      {pattern: 'src/test/js/**/*.xml', watched: true, served: true, included: false},

      // files to test 
      {pattern: 'src/test/js/**/*.js', watched: true, served: true, included: true}
    ]; 
```

然后在我的测试文件中：

```
module("TestSuiteName", {
    setup: function() {
        var f = jasmine.getFixtures();
        f.fixturesPath = 'base';
        f.load('src/test/js/TestFixture.html');
    },
    teardown: function() {
        var f = jasmine.getFixtures();
        f.cleanUp();
        f.clearCache();
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-26T18:16:11.263

**如果你使用 AngularJS，你可以使用 html2js 预处理器。** 如何做到这一点的一个例子是[https://github.com/vojtajina/ng-directive-testing](https://github.com/vojtajina/ng-directive-testing)。

这些 html 文件由 Karma 提供，但它们不包含在页面中，因此您必须获取它们 - 可能通过 xhr 请求。

这是一个类似的预处理器，它将 html 文件转换为 JS 字符串（对 Angular 不严格）：[https://github.com/karma-runner/karma-html2js-preprocessor](https://github.com/karma-runner/karma-html2js-preprocessor)您可以在 e2e 测试中看到如何使用它：[https://github.com/karma-runner/karma-html2js-preprocessor/tree/master/e2e-test](https://github.com/karma-runner/karma-html2js-preprocessor/tree/master/e2e-test)

*注意：这个 html2js 预处理器不是 Karma 0.8 的一部分，插件只适用于 Karma 0.9+（目前在金丝雀频道），所以你必须使用金丝雀（它包含很多变化;-)）...***

# sql-server - T-SQL 中是否有三元条件运算符？

> ID：16209751
> 
> 赞同：136
> 
> 时间：2013-04-25T08:21:08.137
> 
> 标签：sql-server, tsql

实现以下查询的替代方法是什么：

```
select *  
from table  
where isExternal = @type = 2 ? 1 : 0 
```

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-04-25T08:35:06.207

在 SQL Server **2012**中，您可以使用以下[`IIF`功能](https://docs.microsoft.com/en-us/sql/t-sql/functions/logical-functions-iif-transact-sql)：

```
SELECT *
FROM table
WHERE isExternal = IIF(@type = 2, 1, 0) 
```

另请注意：在 T-SQL 中，赋值（和比较）运算符只是`=`（而不是`==`- 那是 C#）

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2013-04-25T08:22:36.420

使用`case`：

```
select *
from table
where isExternal = case @type when 2 then 1 else 0 end 
```

# c# - 预定义接口公开了一些方法，我们正在使用该方法，但接口没有定义部分，那么它在 c# 中是如何工作的？

> ID：16209752
> 
> 赞同：-1
> 
> 时间：2013-04-25T08:21:08.570
> 
> 标签：c#

接口公开了一些方法，我们在类中使用该方法，但接口没有定义部分，那么它是如何在 c# 中工作的。例如

```
class ProductNameComparer : IComparer
{
   public int Compare(object x, object y)
   {
      Product first = (Product)x;
      Product second = (Product)y;
     return first.Name.CompareTo(second.Name);
   }
} 
```

**这里`IComparer`公开了`CompareTo()`方法，但`IComparer`没有`CompareTo()`方法定义部分，那么它是如何工作的？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:24:47.287

`Interface`只是合同，它只声明方法而不是具有实现部分....`Class`实现该特定`Interface`应具有实现细节。

例如，你有`IAnimal`接口并且`Dog`是一个实现`IAnimal`接口的类，

```
 public interface IAnimal
    {
        void Walk(); // Just declares the method, not implemenation
    }

    //Class implementing the interface 
    //must define the method specified in the interface
    class Dog : IAnimal
    {
        public void Walk()
        {
            Console.WriteLine("Dog can walk");
        }
    } 
```

* * *

在您的示例中，您误解了`IComparer`界面。

`IComparer``Compare()`用方法定义接口

然而

`CompareTo()`由`IComparable` 接口声明。

在上面的代码中，您已经实现了 IComparer 接口，因此您正在类中定义`Compare()`方法细节`ProductNameComparer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:27:13.573

接口没有任何实现，它只是关于某事应该如何工作的合同。

您不能创建接口的实例，只能创建实现该接口的实际类（或结构）的实例。如果您获得对接口的引用，则它指向实现该接口的实际对象。

任何实现该接口的类都必须实现该接口的所有成员，因此如果您有一个适合该接口的实际对象，您就知道该方法已实现。

您可以在不了解任何实现它的类的情况下使用接口，因此您甚至可以在接口的任何实际实现之前编写使用接口的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:57:33.087

> 这里`IComparer`公开了`CompareTo()`方法，但`IComparer`没有`CompareTo()`方法定义部分，那么它是如何工作的？

如果这是您的问题，我认为您非常误解正在发生的事情以及“暴露”的含义。

使用您的示例：

```
class ProductNameComparer : IComparer
{
   public int Compare(object x, object y)
   {
      Product first = (Product)x;
      Product second = (Product)y;
      return first.Name.CompareTo(second.Name);
   }
} 
```

您的`ProductNameComparer`班级正在实施 IComparer。实现的需求类`IComparer`是它们包含一个带有签名的方法`Compare(object x, object y)`。这是你唯一`ProductNameComparer`暴露的东西。那不是别的。

现在你`CompareTo()`在方法中使用，但你没有公开它。如果不知道 的定义，很难更详细地解释`Product.Name`，但我们假设它是一个字符串。

`System.String`实现`IComparable`（在其他接口中），所以`string`有一个`CompareTo()`方法。您只是`String.CompareTo()`在调用您的方法，但没有暴露任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:25:49.617

在开始编程之前，您应该阅读一个好的 c# 教程。

[http://www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners](http://www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:31:53.943

`CompareTo`方法不是来自，`IComparer`但它是您的财产的方法`first.Name`，我认为它是一个字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T08:24:54.010

接口定义类型之间的**契约**，它们不定义实现，这取决于实现`interface`.

考虑：

```
interface IWorkable
{
    void DoWork();
} 
```

然后实现：

```
public class GoodWork : IWorkable
{
    public void DoWork()
    {
        //add the implementation here
    }
} 
```

# php - Doctrine 根据 db 更新 php 模型

> ID：16209761
> 
> 赞同：0
> 
> 时间：2013-04-25T08:21:25.447
> 
> 标签：php, symfony-1.4, doctrine-1.2

我需要维护一个 symfony 1.4 应用程序，该应用程序使用学说（我猜是 1.2）。问题是人们在不使用教义的情况下修改了数据库。为了解决这个问题，我尝试以这种方式更新学说模型：

```
symfony doctrine:build-schema
symfony doctrine:build-model 
```

两者都没有显示任何错误，但是当我访问该网站时，由于数据库问题，一切都失败了。

我收到了诸如“未知别名”之类的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:27:32.647

听从 sriniwas 的建议，一切都很顺利，我猜 ORM 并不意味着什么都能做 :(

# visual-studio-2010 - (boost) 无法打开文件'boost_python-vc100-mt-gd-1_53.lib'

> ID：16209762
> 
> 赞同：0
> 
> 时间：2013-04-25T08:21:26.527
> 
> 标签：visual-studio-2010, boost, bjam

所以，我下载了 boost_1_53_0，然后运行`bjam`​​. 根据序言链接“库”和“包含”后，我运行了我的 Visual C++ 解决方案，我收到以下错误

```
LINK : fatal error LNK1104: cannot open file 'boost_python-vc100-mt-gd-1_53.lib' 
```

我阅读了一些有关执行的解决方案`bjam --build-type=complete --toolset=gcc stage`，但似乎我的命令提示符无法识别`bjam`，即使我`PATH`将

```
Variable name: bjam    
Variable Value: D:\boost_1_53_0\ 
```

但我仍然无法让 bjam 在命令提示符下运行！谢谢

# java - Windows 中获取实时屏幕图像的最佳方法（如果可能）

> ID：16209765
> 
> 赞同：0
> 
> 时间：2013-04-25T08:21:33.460
> 
> 标签：java, c++, windows, image, graphics

我想捕获当前显示在 Windows pc 屏幕上的帧，而不管显示为位图或图像文件或类似文件的内容。

到目前为止，我使用的是 Java 机器人 API 和一些 C++ api，但是它只能捕获桌面和窗口等，但无法捕获使用视频或 DirectX 游戏等覆盖绘制的任何内容。

在视频播放时捕获会返回视频区域为黑色的图像，而在游戏中则返回桌面图像，因为游戏未运行！

是否有任何标准方法可以捕获屏幕上的所有内容（例如在 frap 中等）？

或者我需要为每个显卡制作一个自定义驱动程序（不可能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:20:55.393

以下是从 Java 中截取屏幕截图的代码：http: [//www.codinguide.com/2010/04/capture-screen-shot-from-java.html](http://www.codinguide.com/2010/04/capture-screen-shot-from-java.html)

希望有帮助。

# html - 响应页面高度作为 div 扩展 html css

> ID：16209768
> 
> 赞同：0
> 
> 时间：2013-04-25T08:21:37.030
> 
> 标签：html, css

**我的情况：** 在我的页面上，我的主要内容的右侧栏中有多个可折叠面板。目前发生的情况是，当我展开面板（其中包含大量文本）时，它会离开页面。因此意味着用户无法阅读它。这是因为高度是硬编码的。现在我想要发生的是当 div 扩展时，如果它达到页面的最大高度，页面高度会扩展以包含所有文本。

**问题：** 有没有办法使页面高度与 div 一起扩展？

我的 CSS：

```
.container {
    width: 1000px;
    margin: 0px auto;
    background-color:White;
    height: 0px auto;
}
#page {
    overflow: hidden;
    width: 900px;
    padding: 0px 50px 50px 50px;
    background-color: #FFFFFF;
}
#content {
    float: right;
    width: 580px;
} 
```

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:30:49.300

您可以将 .container 设置为 clearfix，这样它就可以扩展到其中浮动元素的大小。这是[一篇](http://css-tricks.com/snippets/css/clear-fix/)关于使用 clearfix 的好文章。

```
.container {
    width: 1000px;
    margin: 0px auto;
    background-color:White;
    height: 0px auto;
}

.container:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
 } 
```

该代码将适用于 IE6 和 7 之外的所有内容。如果您也需要这些，请查看文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:31:36.283

您可以尝试在 .container 上将位置设置为“绝对”和 0px 顶部和 bot，而不是使用高度？

```
.container {
    width: 1000px;
    margin: 0px auto;
    background-color:White;
    top: 0px;
    bottom: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:29:17.217

没关系，伙计们，我解决了它....这是因为我用相对高度和宽度来定位 div，所以我只使用了 margin-top 。

谢谢大家

# ios - 创建IOS 3D效果

> ID：16209771
> 
> 赞同：-3
> 
> 时间：2013-04-25T08:21:46.337
> 
> 标签：ios, objective-c, c

您将如何实现这种 3D 效果：

[http://www.youtube.com/watch?v=1i2JnJWdCeM](http://www.youtube.com/watch?v=1i2JnJWdCeM)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:30:40.327

我会查看 CMMotionManager 类以获取设备的姿态（俯仰、滚动、偏航），然后相应地移动背景图像..

对于模糊的表述，这就是你所得到的！:P

祝你好运-V

# winapi - win32 api工具栏中的可见分隔符（不仅仅是间隙）？

> ID：16209776
> 
> 赞同：2
> 
> 时间：2013-04-25T08:22:09.413
> 
> 标签：winapi, toolbar

我希望它看起来像这样（只是分隔符）

![分隔符.png](https://i.stack.imgur.com/8TSFX.png)

这就是我所拥有的：

![间隙.png](https://i.stack.imgur.com/BH7OU.png)

我该怎么做呢？

此刻的分隔符就是这样，TBBUTTON 结构中没有为分隔符设置任何其他内容

```
tbb[3].fsStyle = TBSTYLE_SEP; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:09:24.007

如果工具栏使用平面样式，Win32 控件仅绘制垂直分隔线。`TBSTYLE_FLAT`所以你可以在创建工具栏窗口的时候通过包含样式来达到你想要的效果。

# sql - SQL Server：如何按带有偏移量的月份间隔对值进行分组

> ID：16209783
> 
> 赞同：0
> 
> 时间：2013-04-25T08:22:31.920
> 
> 标签：sql, sql-server

我有一个按月对汇总总和值进行分组的查询。

这是查询：

```
Declare @IsByStatus bit
Set @IsByStatus = 0

SELECT
    CAST((DATEDIFF(month, '2012-01-01T06:00:00', datTimeStamp)) AS int) AS [Index] ,
    Min(datTimeStamp) as [From],
    Max(datTimeStamp) as [To],
    Sum(CASE CAST(intIO_ID AS nvarchar(100))
             WHEN N'284' THEN Value ELSE NULL END) AS [286]
FROM 
    [IOValuesFn](@IsByStatus) IOValues 
WHERE 
    datTimeStamp >= '2012-01-01T06:00:00' 
    AND datTimeStamp < '2013-01-01T05:59:59'
    AND intIO_ID IN (284)
GROUP BY 
    CAST ((DATEDIFF(Month,'2012-01-01T06:00:00', datTimeStamp)) AS int)
ORDER BY
    [From] 
```

这是结果：

```
Index   From    To  286
0   2012-01-07 07:00:00.000 2012-01-31 23:00:00.000 142579.898864746
1   2012-02-01 00:00:00.000 2012-02-29 23:00:00.000 139486.498001099
2   2012-03-01 00:00:00.000 2012-03-31 23:00:00.000 99516.3022232056
3   2012-04-01 00:00:00.000 2012-04-30 23:00:00.000 84597.599899292
4   2012-05-01 00:00:00.000 2012-05-31 23:00:00.000 67085.2983112335
5   2012-06-01 00:00:00.000 2012-06-30 23:00:00.000 67768.9982643127
6   2012-07-01 00:00:00.000 2012-07-31 23:00:00.000 121100.264842987
7   2012-08-01 00:00:00.000 2012-08-31 23:00:00.000 165768.90776825
8   2012-09-01 00:00:00.000 2012-09-30 23:00:00.000 97441.7333068848
9   2012-10-01 00:00:00.000 2012-10-31 23:00:00.000 153764.736312866
10  2012-11-01 00:00:00.000 2012-11-30 23:00:00.000 153601.413961411
11  2012-12-01 00:00:00.000 2012-12-31 23:00:00.000 142521.07028389
12  2013-01-01 00:00:00.000 2013-01-01 05:00:00.000 1192.32000732422 
```

现在我想做类似的逻辑，这也会在月份开始结束时间插入一个偏移量。

例如，第一期将从 1 月 1 日上午 11:00 开始，到 2 月 1 日上午 10:59:59 结束。

接下来的每个月也是如此。

提前感谢您的帮助，奥马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:28:38.683

看看下面的例子。诀窍是添加负偏移量，这样当月第一天上午 11 点之前的任何小时都被“推”到上个月。

**架构设置**：

```
create function iovaluesfn(@isbystatus bit) returns table as return
select datTimeStamp = '20130101 10:50', intIO_ID = 284, Value = 1 union all
select '20130101 11:00', 284, 1 union all
select '20130102 11:00', 284, 2 union all
select '20130301 11:00', 284, 3 union all
select '20130401 11:00', 284, 4 union all
select '20120501 11:00', 284, 5 union all
select '20120601 11:00', 284, 6 union all
select '20120101 11:00', 284, 7 union all
select '20120102 11:00', 284, 8 union all
select '20120101 11:01', 284, 9 union all
select '20120101 10:59', 284,10 union all  -- ** this value is counted in Dec 2011
select '20120101 11:00', 284,11 union all
select '20120101 11:01', 281,12 union all
select '20120101 10:59', 281,13 union all
select '20120101 11:00', 281,14
GO 
```

**查询**：

```
Declare @IsByStatus bit;
Set @IsByStatus = 0;

;with IOValues as (
  select DATEADD(hour, -11, datTimeStamp) datTimeStamp, intIO_ID, Value
    FROM [IOValuesFn](@IsByStatus)
   WHERE datTimeStamp >= '2012-01-01T06:00:00' AND datTimeStamp < '2013-01-01T05:59:59'
     AND intIO_ID IN (284)
)
  SELECT CAST((DATEDIFF(month,'2012-01-01T06:00:00',datTimeStamp)) AS int) AS [Index],
         Min(datTimeStamp) as [From],
         Max(datTimeStamp) as [To],
         Sum(CASE CAST(intIO_ID AS nvarchar(100))
             WHEN N'284' THEN Value ELSE NULL END) AS [286]
    FROM IOValues
GROUP BY CAST ((DATEDIFF(Month,'2012-01-01T06:00:00',datTimeStamp))AS int)
order by [From]; 
```

**结果**：

```
| INDEX |              FROM |                TO | 286    |
----------------------------------------------------------
|    -1 | December, 31 2011 | December, 31 2011 |  10*** |
|     0 |  January, 01 2012 |  January, 02 2012 |  35    |
|     4 |      May, 01 2012 |      May, 01 2012 |   5    |
|     5 |     June, 01 2012 |     June, 01 2012 |   6    | 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!6/9cb64/1/0)

# amazon-ec2 - 我可以在不向 CloudWatch 仪表板添加警报的情况下定义具有扩展策略的 EC2 自动扩展组吗？

> ID：16209788
> 
> 赞同：11
> 
> 时间：2013-04-25T08:22:39.830
> 
> 标签：amazon-ec2, autoscaling, amazon-cloudwatch, metric

我按照[http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/as-scale-based-on-demand.html](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/as-scale-based-on-demand.html)上的说明创建了一个基于 CPUUtilization 的自动缩放组。我注意到由 mon-put-metric-alarm 创建的警报会创建列在 cloudwatch 仪表板上的警报。这意味着在低 cpu 利用率下，我总是有一个处于 ALARM 状态的指标。我可以在 CloudWatch Web 界面中隐藏自动缩放指标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T19:17:34.267

有趣的问题 (+1) - 我不知道在[Amazon CloudWatch Web 界面中](http://aws.amazon.com/cloudwatch/)*隐藏自动缩放指标*的任何选项，并且相应的[PutMetricAlarm API 操作](http://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/API_PutMetricAlarm.html)也没有相关选项。

尽管您的用例是合理的，但 AWS 团队在最初实施新服务时通常会遵循[最小可行产品](http://en.wikipedia.org/wiki/Minimum_viable_product)方法，尽管后来稳步添加了其他功能，但他们在选择有价值的功能时仍然倾向于遵守[帕累托原则](http://en.wikipedia.org/wiki/Pareto_principle)，所以我怀疑您可以理解的要求将很快得到实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T19:19:53.433

AWS 现在已经添加了这个功能，搜索变量旁边有一个复选框来隐藏所有 AutoScaling 警报。

# java - 我使用 Handler 的 Runner 无法在 android 上运行

> ID：16209790
> 
> 赞同：1
> 
> 时间：2013-04-25T08:22:41.893
> 
> 标签：java, android, random, handler, runner

这是我到目前为止得到的东西，这是我的应用程序，它所做的只是显示一个数字时钟并每 30 秒将时钟移动到屏幕的一个新部分，但它实际上并没有做最后一部分，这是代码：

```
public class MainActivity extends Activity {

private Runnable runnable = new Runnable(){
    @Override
    public void run() {         
        handler.sendEmptyMessage(0);
    }
};
Handler handler = new Handler() {       
    @Override
    public void handleMessage(Message msg) {            
        //change the text position here         
        this.postDelayed(runnable , 30000);
        }
    }; 

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView textView = (TextView) findViewById(R.id.digitalClock);  
    Random r = new Random();

    Thread thread =new Thread(runnable );
    thread.start();

    int x = r.nextInt(350 - 100);
    int y = r.nextInt(800 - 100);

    textView.setX(x);  
    textView.setY(y);
    } 
```

我似乎无法让它工作，现在已经扫描了大约一个星期的互联网。我认为这与“新线程”有关，但不太确定是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:31:46.647

无需创建额外的`Runnable`实例或您自己的线程。

在该`onCreate`方法中，您要做的就是调用`setContentView`并向处理程序发送一条空消息。

在`handleMessage`您的实例的方法中`Handler`，设置 TextView 的 X 和 Y 并延迟发布另一条空消息。

这是一个可以做你想做的事情的活动。它使用 an`AbsoluteLayout`来对不推荐使用的进行绝对定位`TextView`，但它应该展示`Handler`您问题的核心部分。

```
package com.scompt.so16209790;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.widget.TextView;

import java.lang.ref.WeakReference;
import java.util.Random;

public class MainActivity extends Activity {
    private static final Random RANDOM = new Random();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Handler handler = new RandomMoveHandler((TextView) findViewById(R.id.text_view));
        handler.sendEmptyMessage(0);
    }

    // Make the handler subclass static because of this: http://stackoverflow.com/a/11408340/111777
    private static class RandomMoveHandler extends Handler {
        private final WeakReference<TextView> textViewWeakReference;

        private RandomMoveHandler(TextView textView) {
            this.textViewWeakReference = new WeakReference<TextView>(textView);
        }

        @Override
        public void handleMessage(Message msg) {
            TextView textView = textViewWeakReference.get();
            if (textView == null) {
                Log.i(TAG, "WeakReference is gone so giving up.");
                return;
            }

            int x = RANDOM.nextInt(350 - 100);
            int y = RANDOM.nextInt(800 - 100);

            Log.i(TAG, String.format("Moving text view to (%d, %d)", x, y));
            textView.setX(x);
            textView.setY(y);

            //change the text position here
            this.sendEmptyMessageDelayed(0, 3000);
        }
    }

    private static final String TAG = MainActivity.class.getSimpleName();
} 
```

`main`布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
        android:id="@+id/text_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="0px"
    android:layout_y="0px"
    android:text="Hello World, MainActivity"
    />
</AbsoluteLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:30:41.590

我对您的解决方案有点好奇，我不想在 Android 应用程序中使用 Thread，您可以改为触发 Handler。这是示例

> Handler handler = new Handler() {
> @Override public void handleMessage(Message msg) {
> // 你的工作
> } };

然后在活动中，您可以在需要的地方**发布AtTime**方法。

# c++ - C++ 函数按值调用的奇怪行为

> ID：16209794
> 
> 赞同：2
> 
> 时间：2013-04-25T08:23:01.880
> 
> 标签：c++, gsl

我有一个对象，它是 GNU 科学库中的矩阵结构的类接口

```
typedef double real_t;
typedef unsigned short index_t;
class matrix
{
        gsl_matrix* m;
    public:
        matrix(index_t rows, index_t columns, real_t val);
}

matrix::matrix(index_t rows, index_t columns, real_t val)
{
    m=gsl_matrix_alloc(rows,columns);
    gsl_matrix_set_all(m, val);
    return;
}

index_t matrix::rows(void)
{
    return m->size1;
}

index_t matrix::columns(void)
{
    return m->size2;
} 
```

问题是，如果我使用这样的函数按值获取矩阵对象：

```
void test_function(const matrix m){}; 
```

并在像这样的程序中使用它

```
int main()
{
    matrix m(4,4,1);
    cout << m.rows() << '\t' << m.columns() << endl;
    test_function(m);
    cout << m.rows() << '\t' << m.columns() << endl;
} 
```

我惊讶地发现矩阵对象 m 的行数被函数修改`test_function`为垃圾值，即使我将关键字 const 放在参数之前并且调用是按值进行的。但最奇怪的是，如果我使用这样的函数，该函数利用引用调用：

```
void test_function(const matrix &m){}; 
```

什么都没有发生，一切似乎都很好。

据我所知，按值调用不应该能够修改函数的参数，特别是如果函数在这种情况下什么都不做，特别是如果我在函数原型中的参数名称之前显式使用关键字 const 。 ..

任何帮助将不胜感激。

编辑：

我还将矩阵类的复制构造函数定义为

```
matrix& matrix::operator= (const matrix& src)
{
    gsl_matrix_memcpy(m,src.m);
    return *this;
} 
```

它做了 gsl_matrix 结构的完整副本（我猜）

编辑：

好吧，我想我终于明白了：按值调用函数创建了一个浅拷贝对象，其中只包含指向真实对象的指针，当 test_function 终止时，所有局部变量都被销毁，所以矩阵类的析构函数（定义但为简洁起见，此处省略）被调用，但是通过这种方式，主对象（本地 m 指向的对象）与局部变量一起被销毁。无论如何，我解决了定义一个正确的复制构造函数的问题执行对象的完整（深度）副本，然后使用引用调用，这对于繁重的计算应该更好。非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:26:13.313

因为默认的copy ctor只是做一个浅拷贝，也就是说，它只是拷贝指针m的值，而不是分配一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:34:14.763

当您按值传递参数时，编译器会调用单参数复制构造函数以在函数中创建值。如果您不提供复制构造函数，编译器会为您生成一个。

在上面的示例中，编译器生成的复制构造函数对内部矩阵指针进行浅拷贝。当函数中新生成的矩阵超出范围时，浅拷贝的指针也会被删除。我的猜测是这就是原因。

您可以通过提供不复制 gsl_matrix 指针的复制构造函数来检查这一点。

# powershell - Powershell：组合变量

> ID：16209802
> 
> 赞同：3
> 
> 时间：2013-04-25T08:23:26.780
> 
> 标签：powershell

我是 powershell 新手，我有这个问题：

我做了这个功能：

```
Function A_Function($a,$b){
    $d = $a + $b
    $d
}
A_Function "0","1" 
```

问题是，此函数将其作为输出：

```
0
1 
```

我希望它在一条线上：

```
01 
```

我试过这样的事情：

```
$d = ($a + $b) #result: same a sabove
$d = (""+$a + $b+"") #result: 1 0, but i dont want that space inbetween
$d = "$a$b" #result: 1 0, but i dont want that space inbetween 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:34:03.067

您正在发送一个数组，它只会绑定到 $a 。在 PowerShell 中，您使用空格分隔参数。试试这种方式：

```
A_Function "0" "1" 
```

另请注意，您要添加两个字符串，如果您想添加数字，结果将是“01”ant 而不是 1。

# cocos2d-iphone - 在 Cocos2d 中实现 SLComposeViewController

> ID：16209811
> 
> 赞同：1
> 
> 时间：2013-04-25T08:23:49.453
> 
> 标签：cocos2d-iphone, slcomposeviewcontroller

我似乎无法让 SLComposeViewController 来自 cocos2D 层上的按钮。如果你能看到任何会阻止这个工作的东西，请告诉。任何帮助将不胜感激：NB viewController is a UIViewController

```
-(void)sceneSelect
{
    NSString *message = [NSString stringWithFormat:@"Twitter Message"];

    NSString *serviceType = [NSString stringWithFormat:@"SLServiceTypeTwitter"];

    if ([SLComposeViewController isAvailableForServiceType:serviceType])
    {
        SLComposeViewController *tweetController = [SLComposeViewController composeViewControllerForServiceType:serviceType];
        [tweetController setInitialText:message];

        tweetController.completionHandler = ^(SLComposeViewControllerResult result){

            if (result == SLComposeViewControllerResultDone){
               //NSLog call
            }
            else if (result == SLComposeViewControllerResultCancelled){
               //NSLog call
            }

            [viewController dismissViewControllerAnimated: YES completion: nil];
        };

        [[[CCDirector sharedDirector]openGLView]addSubview:viewController.view];
        [viewController presentViewController:tweetController animated:YES completion:nil];
    }

    else
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Twitter" message:@"Twitter not working" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];

        [alertView show];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:27:39.627

Cocos2d 2.0 然后在 AppDelegate 中使用导航控制器

```
 AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[app navController] presentModalViewController:tweetController animated:YES]; 
```

这是我的完整推特代码： http: [//pastebin.com/hpRRJM1n](http://pastebin.com/hpRRJM1n)

# php - Php - 分隔符不能是字母数字或反斜杠

> ID：16209812
> 
> 赞同：-5
> 
> 时间：2013-04-25T08:23:50.327
> 
> 标签：php

有人问过这个问题，但我不知道如何在我的情况下解决这个问题。我收到以下 php 错误：

> PHP 消息：PHP 警告：preg_match()：第 227 行中的分隔符不能是字母数字或反斜杠

第 227 行如下：

```
if (preg_match($Match, $_SERVER['HTTP_USER_AGENT'])) 
```

和功能：

```
$OSList = array (
'Windows 3.11' => 'Win16',
'Windows 95' => '(Windows 95)|(Win95)|(Windows_95)',
'Windows 98' => '(Windows 98)|(Win98)',
'Windows 2000' => '(Windows NT 5.0)|(Windows 2000)',
'Windows XP' => '(Windows NT 5.1)|(Windows XP)',
'Windows Server 2003' => '(Windows NT 5.2)',
'Windows Vista' => '(Windows NT 6.0)',
'Windows 7' => '(Windows NT 7.0)',
'Windows NT 4.0' => '(Windows NT 4.0)|(WinNT4.0)|(WinNT)|(Windows NT)',
'Windows ME' => 'Windows ME',
'Open BSD' => 'OpenBSD',
'Sun OS' => 'SunOS',
'Linux' => '(Linux)|(X11)',
'Mac OS' => '(Mac_PowerPC)|(Macintosh)',
'QNX' => 'QNX',
'BeOS' => 'BeOS',
'OS/2' => 'OS/2'
);

foreach($OSList as $CurrOS=>$Match)
{

if (preg_match($Match, $_SERVER['HTTP_USER_AGENT']))
{
break;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:27:56.353

确保对需要转义的任何内容进行适当的转义。所以逃跑

```
OS/2 to OS\/2 
7.0 to 7\.0 
etc. 
```

. / ? * etc etc 对 preg 来说都是特殊的，所以你不应该在你的模式中使用它们，除非你逃避它们或者当你想使用它们的“特殊能力”

更新：必须把它放在代码块中才能看到转义；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:28:50.483

来自[PHP 手册 - 分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)：

> 使用 PCRE 函数时，需要用分隔符将模式括起来。定界符可以是任何非字母数字、非反斜杠、非空白字符。
> 
> 常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。以下是有效分隔模式的所有示例。

```
/foo bar/
+php+ %[a-zA-Z0-9_-]%
#^[^0-9]$# 
```

# java - How to change the foreground color of specific items in a List?

> ID：16209818
> 
> 赞同：0
> 
> 时间：2013-04-25T08:23:57.883
> 
> 标签：java, swt

When I press a button, I want to change the foreground color of the selected item in a `List`.

So far, I tried this:

```
list.setForeground(display.getSystemColor(SWT.COLOR_RED)); 
```

but it changes the foreground color of all the items, not just the selected one.

Any ideas how to solve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:18:56.587

Doing this with a `List` would require custom drawing. You are better off using a `Table` instead (or even a `TableViewer` depending on your requirements). Here is an example of a table that does what you want:

```
public static void main(String[] args)
{
    final Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, false));
    shell.setText("StackOverflow");

    final Table table = new Table(shell, SWT.BORDER | SWT.MULTI);
    table.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    for (int i = 0; i < 10; i++)
    {
        TableItem item = new TableItem(table, SWT.NONE);
        item.setText("item " + i);
    }

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Color selected");

    button.addListener(SWT.Selection, new Listener()
    {
        @Override
        public void handleEvent(Event arg0)
        {
            List<TableItem> allItems = new ArrayList<>(Arrays.asList(table.getItems()));
            TableItem[] selItems = table.getSelection();

            for (TableItem item : selItems)
            {
                item.setForeground(display.getSystemColor(SWT.COLOR_RED));
                allItems.remove(item);
            }

            for (TableItem item : allItems)
            {
                item.setForeground(display.getSystemColor(SWT.COLOR_LIST_FOREGROUND));
            }
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

Before button press:

![enter image description here](https://i.stack.imgur.com/wKG0u.png)

After button press:

![enter image description here](https://i.stack.imgur.com/X9SrT.png)

* * *

Just a note: This is not the most efficient way to do it, but should give you the basic idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:21:06.897

List does not supports what you want. Use Table and Table items instead. Each table item represent a row, and it has `setForeground(Color)` method.

# c++ - 通知另一个线程数据可用的最快方法是什么？旋转的任何替代方法？

> ID：16209819
> 
> 赞同：9
> 
> 时间：2013-04-25T08:24:07.650
> 
> 标签：c++, multithreading

我的一个线程将数据写入循环缓冲区，另一个线程需要尽快处理这些数据。本来想写这么简单的`spin`。伪代码！

```
 while (true) {
        while (!a[i]) {
            /* do nothing - just keep checking over and over */
        }
        // process b[i]
        i++;
        if (i >= MAX_LENGTH) {
            i = 0;
        }
    } 
```

上面我`a`用来表示存储的数据`b`可用于处理。可能我还应该为这种“热”进程设置线程亲和力。当然，这种旋转在 CPU 方面非常昂贵，但对我来说没关系，因为我的主要要求是**延迟**。

问题是 - 我真的应该写这样的东西`boost`还是`stl`允许这样的东西：

1.  更容易使用。
2.  具有大致相同（甚至更好？）的**延迟**同时占用更少的 CPU 资源？

我认为我的模式非常普遍，应该在某个地方有一些好的实现。

**upd**看来我的问题还是太复杂了。让我们考虑一下当我需要以任意顺序将一些项目写入数组并且另一个线程应该在项目可用时以正确的顺序读取它们的情况，如何做到这一点？

**更新2**

我正在添加测试程序来演示我想要实现什么以及如何实现。至少在我的机器上它恰好可以工作。我`rand`用来向您展示我不能使用一般`queue`，我需要使用`array-based`结构：

```
#include "stdafx.h"
#include <string>
#include <boost/thread.hpp>
#include "windows.h" // for Sleep

const int BUFFER_LENGTH = 10;
int buffer[BUFFER_LENGTH];
short flags[BUFFER_LENGTH];

void ProcessorThread() {
    for (int i = 0; i < BUFFER_LENGTH; i++) {
        while (flags[i] == 0);
        printf("item %i received, value = %i\n", i, buffer[i]);
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    memset(flags, 0, sizeof(flags));
    boost::thread processor = boost::thread(&ProcessorThread);
    for (int i = 0; i < BUFFER_LENGTH * 10; i++) {
        int x = rand() % BUFFER_LENGTH;
        buffer[x] = x;
        flags[x] = 1;
        Sleep(100);
    }
    processor.join();
    return 0;
} 
```

输出：

```
item 0 received, value = 0
item 1 received, value = 1
item 2 received, value = 2
item 3 received, value = 3
item 4 received, value = 4
item 5 received, value = 5
item 6 received, value = 6
item 7 received, value = 7
item 8 received, value = 8
item 9 received, value = 9 
```

我的程序能保证工作吗？您将如何重新设计它，可能使用 boost/stl 中的一些现有结构而不是数组？是否可以在不影响延迟的情况下摆脱“旋转”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:55:52.803

如果消费线程进入睡眠状态，它需要几微秒才能唤醒。这是您无法避免的进程调度程序延迟，除非线程像您一样忙于旋转。线程还需要是实时 FIFO，这样当它准备好运行但耗尽其时间量时，它永远不会进入睡眠状态。

因此，没有其他替代方案可以匹配繁忙旋转的延迟。

（令人惊讶的是，您使用的是 Windows，如果您对 HFT 很认真，最好避免使用它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:39:22.727

这就是**[条件变量](http://en.wikipedia.org/wiki/Condition_variable#Waiting_and_signaling)**的设计目的。`std::condition_variable`在 C++11 标准库中定义。

对于您的目的而言，究竟什么是最快的取决于您的问题；您可以从多个角度对其进行攻击，但 CV（或衍生实现）是更好地理解主题和接近实现的良好起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:56:33.717

如果您的编译器支持，请考虑使用 C++11 库。如果没有，或者[提升模拟。](http://www.boost.org/doc/libs/1_53_0/doc/html/thread.html)在你的情况下，尤其[`std::future`](http://en.cppreference.com/w/cpp/thread/future)是[`std::promise`](http://en.cppreference.com/w/cpp/thread/promise).

有一本关于线程和 C++11 线程库的好书：

[安东尼威廉姆斯。C++ 并发实践 (2012)](http://www.manning.com/williams/)

来自 cppreference.com 的示例：

```
#include <iostream>
#include <future>
#include <thread>

int main()
{
// future from a packaged_task
std::packaged_task<int()> task([](){ return 7; }); // wrap the function
std::future<int> f1 = task.get_future();  // get a future
std::thread(std::move(task)).detach(); // launch on a thread

// future from an async()
std::future<int> f2 = std::async(std::launch::async, [](){ return 8; });

// future from a promise
std::promise<int> p;
std::future<int> f3 = p.get_future();
std::thread( [](std::promise<int>& p){ p.set_value(9); }, 
             std::ref(p) ).detach();

std::cout << "Waiting..." << std::flush;
f1.wait();
f2.wait();
f3.wait();
std::cout << "Done!\nResults are: "
          << f1.get() << ' ' << f2.get() << ' ' << f3.get() << '\n'; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:12:46.647

如果您想要一种快速的方法，那么只需进行操作系统调用即可。任何包装它们的 C++ 库都会变慢。

例如，在Windows 上，您的消费者可以调用WaitForSingleObject()，而您的数据生产线程可以使用SetEvent() 唤醒消费者。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx)

对于 Unix，这里有一个类似的问题和答案：[Windows Event implementation in Linux using conditional variables？](https://stackoverflow.com/questions/13030413/windows-event-implementation-in-linux-using-conditional-variables?lq=1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T21:17:12.563

你真的需要线程吗？

单线程应用程序非常简单，并且消除了所有线程安全问题和启动线程的开销。我对线程与非线程代码进行了研究，以将文本附加到日志文件。非线程代码在每个性能指标中都更好。

# php - 您可以在没有插件的情况下同时将所有 Wordpress 页面设为私有吗？

> ID：16209821
> 
> 赞同：2
> 
> 时间：2013-04-25T08:24:15.103
> 
> 标签：php, mysql, wordpress

我有一个 Wordpress 安装，其中包含数千个页面，这些页面都是公开的，我需要将其设为私有。我无法使用插件来帮助我；我需要使用 Wordpress 内置的 Public/Protected/Private 范例来完成。

理想情况下，我会在数据库的 SQL 导出上运行搜索和替换。或者，我愿意编写一个 PHP 脚本来处理它。

手动将所有页面设为私有不是一种选择 - 我正在寻找一种程序化方法来处理这个问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T08:30:14.127

只需在数据库中将它们设置为私有，使用以下查询：

```
UPDATE `wp_posts` SET `post_status` = 'private'; 
```

这会将**所有**帖子设置为私有，我猜您不会真正使用该查询。

相反，仅将文章设置为“私人”使用：

```
UPDATE `wp_posts` SET `post_status` = 'private' WHERE `post_type` = 'post'; 
```

并且只禁用页面，使用：

```
UPDATE `wp_posts` SET `post_status` = 'private' WHERE `post_type` = 'page'; 
```

后修订具有“继承”状态，因此从父页面或文章中继承了权利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:35:57.657

正如 Feeela 所说：您可以直接在表上运行查询，也可以使用 WP 功能，例如：

使用`have_post`和`the_post`

```
 $my_posts['ID'] = get_the_ID();
    $my_posts['post_status']  = 'private';
    $my_posts['post_type'] = 'page';
    wp_update_post( $my_post ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:34:49.763

```
UPDATE `wp_posts` SET `post_status` = 'private' WHERE `post_type`='page'; 
```

此查询只会将页面设置为私有

# mysql - 从 MySQL 导入的 MapKit 注释

> ID：16209828
> 
> 赞同：2
> 
> 时间：2013-04-25T08:24:35.823
> 
> 标签：mysql, json, nsstring

我一直在创建一个应用程序，该应用程序应该在存储在 MySQL 数据库中的地图上显示 Pins。我使用 JavaScript 将数据库转换为 JSON，然后将 JSON 数据转换为 NSStrings。

这里的问题是我需要将其中两个 NSStrings 转换为双精度，因为我的 Pins 需要通过纬度和经度放置，下面是我的代码，当它构建时没有显示任何问题，但我的模拟器崩溃并显示了一些错误，我将直接在我的代码下发布。

危害.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Hazards : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationDegrees latitude;
@property (nonatomic, assign) CLLocationDegrees longitude;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@property (nonatomic, strong) NSString * ID;
@property (nonatomic, strong) NSString * ROUTE;
@property (nonatomic, strong) NSString * ADDRESS;
@property (nonatomic, strong) NSString * LATITUDE;
@property (nonatomic, strong) NSString * LONGITUDE;
@property (nonatomic, strong) NSString * HAZARD;
@property (nonatomic, strong) NSString * RISK;

// Methods
- (id) initWithID: (NSString *) hazardsID andROUTE: (NSString *) hazardsROUTE andADDRESS: (NSString *) hazardsADDRESS andLATITUDE: (NSString *) hazardsLATITUDE andLONGITUDE: (NSString *) hazardsLONGITUDE andHAZARD: (NSString *) hazardsHAZARD andRISK: (NSString *) hazardsRISK;

@end 
```

危害.m

```
#import "Hazards.h"

@implementation Hazards
@synthesize coordinate, title, subtitle, ID, ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK, latitude, longitude;

- (id) initWithID: (NSString *) hazardsID andROUTE: (NSString *) hazardsROUTE andADDRESS: (NSString *) hazardsADDRESS andLATITUDE: (NSString *) hazardsLATITUDE andLONGITUDE: (NSString *) hazardsLONGITUDE andHAZARD: (NSString *) hazardsHAZARD andRISK: (NSString *) hazardsRISK {

    self = [super init];
    if (self)
    {
        ID = hazardsID;
        ROUTE = hazardsROUTE;
        ADDRESS = hazardsADDRESS;
        LATITUDE = hazardsLATITUDE;
        LONGITUDE = hazardsLONGITUDE;
        HAZARD = hazardsHAZARD;
        RISK = hazardsRISK;

        latitude = [hazardsLATITUDE doubleValue]; // convert the string hazardsLatitude to a double here
        longitude = [hazardsLONGITUDE doubleValue]; // convert the string hazardsLongitude to a double here

    }
return self;
}

-(NSString *)title
{
    return self.HAZARD;
}

-(NSString *)subtitle
{
    return self.ADDRESS;
}

@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "Hazards.h"

@interface ViewController : UIViewController

@property (nonatomic, strong) NSMutableArray *json;
@property (nonatomic, strong) NSMutableArray *hazardsArray;

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

#pragma mark - Methods
-(void) retrieveData;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "Hazards.h"

@interface ViewController ()

@end

// Railway Street Ballymena Coordinates
#define BALLYMENA_LATITUDE 54.857719;
#define BALLYMENA_LONGITUDE -6.280654;

// Span
#define THE_SPAN 0.01f;

#define getDataURL @"www.ryanball.net/royalmail/json.php"

@implementation ViewController
@synthesize json, hazardsArray, mapView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Create the region
    MKCoordinateRegion myRegion;

    // Center
    CLLocationCoordinate2D center;
    center.latitude = BALLYMENA_LATITUDE;
    center.longitude = BALLYMENA_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = center;
    myRegion.span = span;

    // Set our mapview
    [mapView setRegion:myRegion animated: YES];

    // Annotation
    NSMutableArray *locations = [[NSMutableArray alloc] init];
    CLLocationCoordinate2D location;
    Hazards *myAnn;

    // Pin to show Royal Mail Ballymena delivery office
    myAnn = [[Hazards alloc] init];
    location.latitude = BALLYMENA_LATITUDE;
    location.longitude = BALLYMENA_LONGITUDE;
    myAnn.coordinate = location;
    myAnn.title = @"Royal Mail Ballymena";
    myAnn.subtitle = @"111, Railway Street";
    [locations addObject:myAnn];

    [self.mapView addAnnotations:locations];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Methods
-(void) retrieveData {
    NSURL *url = [NSURL URLWithString:getDataURL];
    NSData *data = [NSData dataWithContentsOfURL:url];

    json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];

    // Setup our hazards array
    hazardsArray = [[NSMutableArray alloc] init];

    for (int i =0; i < json.count; i++) {

        // Create hazard object
        NSString *hazardsID = [[json objectAtIndex:i] objectForKey:@"ID"];
        NSString *hazardsROUTE = [[json objectAtIndex:i] objectForKey:@"ROUTE"];
        NSString *hazardsADDRESS = [[json objectAtIndex:i] objectForKey:@"ADDRESS"];
        NSString *hazardsLATITUDE = [[json objectAtIndex:i] objectForKey:@"LATITUDE"];
        NSString *hazardsLONGITUDE = [[json objectAtIndex:i] objectForKey:@"LONGITUDE"];
        NSString *hazardsHAZARD = [[json objectAtIndex:i] objectForKey:@"HAZARD"];
        NSString *hazardsRISK = [[json objectAtIndex:i] objectForKey:@"RISK"];

        Hazards *myHazards = [[Hazards alloc] initWithID:hazardsID andROUTE:hazardsROUTE andADDRESS:hazardsADDRESS andLATITUDE:hazardsLATITUDE andLONGITUDE:hazardsLONGITUDE andHAZARD:hazardsHAZARD andRISK:hazardsRISK];

        // Add our hazards object to our hazards array
        [hazardsArray addObject:myHazards];
    }
     [self.mapView addAnnotations:hazardsArray];
}

@end 
```

这是我在控制台中得到的错误日志：

```
2013-04-25 09:04:43.628 RoyalMailApp[6596:c07] -[Hazards setCoordinate:]: unrecognized selector sent to instance 0x8c63a60
2013-04-25 09:04:43.629 RoyalMailApp[6596:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Hazards setCoordinate:]: unrecognized selector sent to instance 0x8c63a60'
*** First throw call stack:
(0x1b3c012 0x1458e7e 0x1bc74bd 0x146c7ea 0x1b2bcf9 0x1b2b94e 0x2698 0x47e1c7 0x47e232 0x3cd3d5 0x3cd76f 0x3cd905 0x3d6917 0x39a96c 0x39b94b 0x3accb5 0x3adbeb 0x39f698 0x1a97df9 0x1a97ad0 0x1ab1bf5 0x1ab1962 0x1ae2bb6 0x1ae1f44 0x1ae1e1b 0x39b17a 0x39cffc 0x215d 0x2085 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

# prolog - Prolog查找变量

> ID：16209829
> 
> 赞同：0
> 
> 时间：2013-04-25T08:24:39.910
> 
> 标签：prolog

```
% check if 2 squares colide by sides
col( X, Y, S, X2, Y2, S2):-
    EndX is X + S, EndY is Y + S,
    EndX2 is X2 + S2, EndY2 is Y2 + S2,
    (
    ( EndX =:= X2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % left-l side
    ( X =:= X2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % left-r side
    ( EndX =:= EndX2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % right-l side
    ( X =:= EndX2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % right-r side    
    ( EndY =:= Y2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % top-t side
    ( Y =:= Y2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % top-b side
    ( EndY =:= EndY2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % bottom-t side
    ( Y =:= EndY2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))) % bottom-b side
    ). 
```

仅当我设置所有变量时它才能正常工作，但我想问如何更改它以便我可以使用： `col( 0,0,3,1,2,S).`甚至`col( 0, 0, 3, X,Y, S).` 可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:50:31.250

我想你可以试试[library(clpqr)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.8%27,swi%28%27/doc/Manual/clpqr.html%27%29%29)：

```
:- [library(clpr)].

col( X, Y, S, X2, Y2, S2):- {
    EndX = X + S, EndY = Y + S,
    EndX2 = X2 + S2, EndY2 = Y2 + S2,
    (
    ( EndX = X2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % left-l side
    ( X = X2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % left-r side
    ( EndX = EndX2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % right-l side
    ( X = EndX2, ( (Y >= Y2, Y =< EndY2);(EndY >= Y2, EndY =< EndY2))); % right-r side
    ( EndY = Y2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % top-t side
    ( Y = Y2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % top-b side
    ( EndY = EndY2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))); % bottom-t side
    ( Y = EndY2, ( (X >= X2, X =< EndX2);(EndX >= X2, EndX =< EndX2))) % bottom-b side
    )
                }. 
```

测试：

```
?- col( 0,0,3,1,2,S).
S = 2.0 ;
false. 
```

有了更多变量，您就剩下要处理的范围：

```
?- col( 0, 0, 3, X,Y, S).
X = 3.0,
{Y=< -0.0, _G6533>=0.0, S= -Y+_G6533, _G6550=3.0-Y+_G6533} ;
X = 3.0,
{Y=<3.0, _G8171>=3.0, S= -Y+_G8171, _G8188=3.0-Y+_G8171} ;
X = 0.0,
{Y=< -0.0, _G10154>=0.0, S= -Y+_G10154, _G10171= -Y+_G10154} .
... 
```

# spring - Spring Batch：作业属性

> ID：16209838
> 
> 赞同：1
> 
> 时间：2013-04-25T08:24:54.327
> 
> 标签：spring, spring-batch

如何添加属性：

```
<property name="myProperty" value="value"/> 
```

到批处理作业定义：

```
<batch:job id="MyJob">
    <batch:description>description</batch:description>
    <batch:step id="step0">
        <batch:tasklet ref="MyJobCls"/>
        <batch:listeners>
            <batch:listener ref="MyJobkListener"/>
        </batch:listeners>
    </batch:step>
</batch:job> 
```

然后我可以在我的运行时使用这个属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:03:08.750

您可以将属性放在外部文件中，也可以从 xml 将其注入 PropertyPlaceholderConfigurer：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location"><value>my_config.properties</value></property>
  <property name="properties">
   <props>
      <prop key="myProperty">value</prop>
   </props>
  </property>
</bean> 
```

更多细节在这里：[在spring config中使用属性](https://stackoverflow.com/questions/7241356/using-properties-in-spring-config)

此外，如果您使用 CommandLineJobRunner 运行您的进程，您可以使用 -D 从命令行设置它（[如何在 Spring applicationContext.xml 中读取 JVM 参数](https://stackoverflow.com/questions/5598217/how-do-i-read-jvm-arguments-in-the-spring-applicationcontext-xml)）a-DmyProperty=value

对于 MyJobCls/MyJobkListener 中的 myProperty 值，您至少可以选择：

annotations[如何将属性值注入使用注释配置的 Spring Bean？](https://stackoverflow.com/questions/317687/how-can-i-inject-a-property-value-into-a-spring-bean-which-was-configured-using)

或从 xml 配置注入： [http ://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T13:03:29.273

我有点困惑，你在问什么样的财产。Spring 托管 bean 的字符串或某种类型或引用。

如果你想要一些字符串键值对，那么在 spring-batch-job 参数中定义它。它将可用于所有步骤的整个工作/。

如果您想为引用/类提供一些属性，则将该属性/类作为成员变量添加到您的自定义步骤或自定义作业类中，并使用 setter 和 getter。您也可以对字符串属性执行相同的操作。

# c - C 中的链表错误——Invalid Initalizer 错误

> ID：16209848
> 
> 赞同：1
> 
> 时间：2013-04-25T08:25:34.837
> 
> 标签：c, list, struct, initializer

我正在尝试使用 C（不是 C++）创建链接列表。链接列表通过函数 llinit() 初始化，该函数应该返回一个列表结构。但是，当我编译代码时，我在 lltester.c 文件中收到一条错误消息，指出“错误：无效初始化程序”。为什么是这样？

这是用于在我的 llist.c 文件中初始化链表的函数：

```
list llinit()
{
    list* ll = malloc(sizeof(list));
    ll->head = NULL;
    ll->tail = NULL;
    return *ll;
} 
```

这是我的 llist.h 文件中的列表结构：

```
typedef struct {
    node *head;
    node *tail;
} list; 
```

这是我在 lltester.c 文件中尝试初始化列表的主要函数：

```
int main()
{
    list myList= llinit(); //This is the line where the error occurs on!

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T08:51:14.160

您的代码正在泄漏内存，因为它分配列表，然后*按 value*`malloc()`返回该结构的内容。

 *如果你想要一个按值返回空列表的函数，你应该这样做：

```
list llinit()
{
    list ll;
    ll.head = NULL;
    ll.tail = NULL;

    return ll;
} 
```

以上很好，没有由于超出范围而导致值“消失”的风险，这与例如返回本地`int`值的函数一样安全。返回*值*（全部！）根据需要复制到调用者的内存中。

然后*调用者*决定节点是否应该在堆上是微不足道的。

**更新**：[这是 ideone 上的代码](http://ideone.com/KmFu31)，它确实可以编译并且不会为中的赋值生成错误`main()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:28:30.290

您必须将结构声明为

```
typedef struct _list{
list* head;  /* could have been struct node* as well */
list* tail; 
```

} 列表;

该列表也是您的自定义结构。并且 llPushBack() 不是您的结构的一部分。*

# java - 延迟加载和获取策略

> ID：16209850
> 
> 赞同：0
> 
> 时间：2013-04-25T08:25:42.970
> 
> 标签：java, hibernate, orm, hibernate-mapping

我正在使用 Hibernate 3.6
User 是一个实体类
Contact 是一个实体类
User 有一个 Set<Contact>
关系是单向的，并且映射为一对多。
我已经尝试了以下延迟加载和获取组合。这是我的理解和实际结果的列表

使用 session.get(User.class, <some userId>) 或 session.load(User.class, <some userId>)

```
 lazy      fetch       result

* true      join        ignores lazy loading
*                       1 select for retrieving the User and his contacts with a left outer join
*           select      1 select for a User record
*                       1 select for all contacts of the user
*           subselect   1 select for a User record
*                       1 select for all contacts of the user
* false     join        1 select for retrieving the User and his contacts with a left outer join
*           select      1 select for a User record
*                       1 select for all contacts of the user
*           subselect   1 select for a User record
*                       1 select for all contacts of the user 
```

使用 session.createQuery（来自用户）

```
 lazy     fetch           result

 * true     join            1 select for all User records
 *                          1 select for each User record to retrieve their contacts
 *                          respect lazy loading
 *                          probable n + 1
 *          select          1 select for all User records
 *                          1 select for each User record to retrieve their contacts
 *                          probable n + 1
 *          subselect       1 select for all User records
 *                          1 sub-select to retrieve all contact records in one go
 * false    join            1 select for all User records
 *                          1 select for each User record to retrieve their contacts
 *                          probable n + 1      
 *          select          1 select for all User records
 *                          1 select for each User record to retrieve their contacts
 *                          probable n + 1
 *          subselect       1 select for all User records
 *                          1 sub-select to retrieve all contact records in one go 
```

以下是我的几个问题：

1.  我的理解正确吗？
2.  使用 session.get() 当 lazy=true, fetch=subselect 为什么 Hibernate 不执行 subselect ？我想这是因为它绝对没有必要。我对么 ？
3.  使用 session.get() when lazy=false, fetch=subselect 为什么 Hibernate 不执行 subselect ？它应该在这里执行一个，但它没有。我想知道为什么 ？
4.  使用 session.createQuery() when lazy=true, fetch=join 为什么 Hibernate 延迟加载？session.get() 之前没有这样做
5.  使用 session.createQuery() when lazy=false, fetch=join 为什么 Hibernate 不使用 join ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:02:04.907

好的，经过大量挖掘，这就是我可以得出的结论。只是想和大家分享我的战利品。如果有人觉得他们可以添加更多内容，欢迎您。让我从一个示例数据集开始。

```
用户表
--------------------------------------------------
USER_ID 用户名
--------------------------------------------------
1 用户一
2 用户二
3 用户三

联系表
-------------------------------------------------- -------------------------------------------------- ---------------
CONTACTID TITLE FIRSTNAME LASTNAME CITY COUNTRY EMAIL USER_ID
-------------------------------------------------- -------------------------------------------------- ---------------
1 Clark Kent 先生 纽约 美国 man-of-steel@anywhere.earth 1
2 Hank Ketcham 先生 美国 dennis-mitchell@somewhere.us 2
3 Tony Stark Malibu 先生 美国 iron-man@anywhere.earth 2
4 Bruce Wayne Gotham 先生 美国 dark-knight@gotham.us 2

```

Q2。使用 session.get() 当 lazy=true, fetch=subselect 为什么 Hibernate 不执行 subselect ？我想这是因为它绝对没有必要。我对么 ？

A2。是的，这里绝对不需要子选择。这是子选择的样子

```
选择   
    u.USER_ID AS USER1_1_,   
    u.USERNAME AS USERNAME1_,   
    c.USER_ID AS USER15_1_1_,   
    c.CONTACTID AS CONTACTID1_,   
    c.CONTACTID AS CONTACTID0_0_,   
    c.TITLE AS TITLE0_0_,   
    c.FIRSTNAME AS FIRSTNAME0_0_,   
    c.LASTNAME AS LASTNAME0_0_,   
    c.CITY AS CITY0_0_,   
    c.COUNTRY AS COUNTRY0_0_,   
    c.EMAIL AS EMAIL0_0_,   
    从   
        用户u，联系人c   
    在哪里   
        u.USER_ID = 2  
    和   
        c.USER_ID IN    
        (   
            SELECT USER_ID FROM user WHERE USER_ID = u.USER_ID   
        )  

```

我看不出在这里执行子选择比当前简单地为联系人记录执行单独选择的策略有任何好处。事实上，子选择可能是不必要的性能消耗。

Q3。使用 session.get() when lazy=false, fetch=subselect 为什么 Hibernate 不执行 subselect ？它应该在这里执行一个，但它没有。我想知道为什么 ？

A3。好的。同样，这里是子选择的样子（与上面带有其他 ID 的完全相似）

```
选择   
    u.USER_ID AS USER1_1_,   
    u.USERNAME AS USERNAME1_,   
    c.USER_ID AS USER15_1_1_,   
    c.CONTACTID AS CONTACTID1_,   
    c.CONTACTID AS CONTACTID0_0_,   
    c.TITLE AS TITLE0_0_,   
    c.FIRSTNAME AS FIRSTNAME0_0_,   
    c.LASTNAME AS LASTNAME0_0_,   
    c.CITY AS CITY0_0_,   
    c.COUNTRY AS COUNTRY0_0_,   
    c.EMAIL AS EMAIL0_0_,   
    从   
        用户u，联系人c   
    在哪里   
        u.USER_ID = 3  
    和   
        c.USER_ID IN    
        (   
            SELECT USER_ID FROM user WHERE USER_ID = u.USER_ID   
        )  

```

如您所见，这不会产生任何记录，因为 USER_ID=3 没有任何联系人记录。这违背了为用户记录执行 session.get() 的全部目的，其中 get() 将返回 null，尽管表中有有效的用户记录。同样，单独选择联系人记录是唯一的出路。

Q4。使用 session.createQuery() when lazy=true, fetch=join 为什么 Hibernate 延迟加载？session.get() 之前没有这样做

Q5。使用 session.createQuery() when lazy=false, fetch=join 为什么 Hibernate 不使用 join ？

答。我目前的理解是，这可能仅仅是因为 Hibernate 不希望最终触发一个连接，该连接选择一个巨大的数据集（包括所有用户记录及其联系人记录）并在内存中加载一个巨大的集合。

# python - 将 .obj-model 导出到 three.js json-object 会导致 python-errors

> ID：16209859
> 
> 赞同：0
> 
> 时间：2013-04-25T08:26:09.837
> 
> 标签：python, shell, three.js, converter

我尝试在我的 three.js 脚本中导出 3D 模型以使用。不幸的是，我不太熟悉 python 和所有 3D 的东西。

当我从 Windows shell 运行转换器脚本 (convert_obj_three.py) 时，出现错误。（脚本和模型在同一目录中。）

```
$ c:/Python33/python convert_obj_three.py -i couch.obj -o couch.js
File "convert_obj_three.py", line 781
print "WARNING: skipping morph [%s] with different number of vertices [%d] than the original model [%d]" % (name, n_morph_vertices, n_vertices)

                           ^
SyntaxError: invalid syntax 
```

这是因为模型有问题还是我犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:53:43.133

问题是您使用 Python 3 而不是 Python 2 来运行脚本。

蟒蛇2：

```
print '' 
```

Python 3： print 是一个函数，没有关键字，所以它需要括号：

```
print('') 
```

# rest - Jersey 与 Spring MVC 的集成

> ID：16209863
> 
> 赞同：1
> 
> 时间：2013-04-25T08:26:19.183
> 
> 标签：rest, maven, spring-mvc, jersey

我想创建一个能够与 android 应用程序一起使用的网站。对于这些休息调用，我想使用单独的 servlet

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     id="WebApp_ID" version="2.5">
<display-name>Stage XT-i</display-name>

<welcome-file-list>
    <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
</welcome-file-list>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-servlet.xml
        /WEB-INF/spring-security.xml
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>be.kdg.teamf</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey Web Application</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
</web-app> 
```

正如您所看到的，所有球衣信息都是使用 url 传递的：/rest/* 当我想使用 url 为字符串执行 GET 时：localhost:9999/rest/user/sample 它工作得很好。但是，当我将 @Autowired 与球衣一起使用时，我得到一个空指针异常。

Java类：

```
@Path("/user")
public class UserRest {
@Autowired
private UserService userService;

@Context
UriInfo uriInfo;

// Another "injected" object. This allows us to use the information that's
// part of any incoming request.
// We could, for example, get header information, or the requestor's address.
@Context
Request request;

// Basic "is the service running" test
@GET
@Produces(MediaType.TEXT_PLAIN)
public String respondAsReady() {
    return "Demo service is ready!";
}

@GET
@Path("sample")
@Produces(MediaType.APPLICATION_JSON)
public User getUserJson() {
    User u = userService.listUsers().get(0);
    System.out.println("Returning person");

    return u;
}

} 
```

有没有人看到问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:38:25.280

使用 Spring Jersey 集成 servlet

```
com.sun.jersey.spi.spring.container.servlet.SpringServlet 
```

# gnuplot - 在 GNU 中管理 X 标签

> ID：16209864
> 
> 赞同：0
> 
> 时间：2013-04-25T08:26:22.103
> 
> 标签：gnuplot

我有这样的 x-label 范围：2.0237*e^10 到 15.055*e^10。现在，当我绘制图表时，X-label 值重叠。

如何在不更改字体大小的情况下进行管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:26:30.347

使用“set xtics”来定义 xlabel 主要 tic 之间的更大距离。您还可以使用“set format x”为 x 轴定义更合适的格式：

例如：这仅在 2*e^10, 4*e^10, 6*e^10... 处绘制 xlabel tic

```
set xtics 2E10 
```

这将以更紧凑的形式显示标签 tic：

```
set format x "%1.0E" 
```

您可能还会发现这很有帮助： [http ://heim.ifi.uio.no/inf3330/scripting/doc/gnuplot/Kawano/tics-e.html#3.1](http://heim.ifi.uio.no/inf3330/scripting/doc/gnuplot/Kawano/tics-e.html#3.1)

# c# - Excel 中的 DateTimePicker 值

> ID：16209866
> 
> 赞同：0
> 
> 时间：2013-04-25T08:26:29.753
> 
> 标签：c#

我想知道是否可以从 excel 中的查询行中设置 DateTimePicker 的值。我尝试过不同的方法，但从未接近过，有人帮忙吗？

此外，这一切都显示在 Windows 窗体上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:27:19.420

```
 public void ReadAndWriteToExcel()
    {
        string myPath = @"C:\Excel.xls";
        FileInfo fi = new FileInfo(myPath);
        if (!fi.Exists)
        {
            Console.Out.WriteLine("file doesn't exists!");
        }
        else
        {
            var excelApp = new Microsoft.Office.Interop.Excel.Application();
            var workbook = excelApp.Workbooks.Open(myPath);
            Worksheet worksheet = workbook.ActiveSheet as Worksheet;

            // To write to excel
            Microsoft.Office.Interop.Excel.Range range = worksheet.Cells[1, 1] as Range;
            DateTime dt = dateTimePicker1.Value;
            range.NumberFormat = "dd/MMM/yyyy";
            range.Value2 = dt;

            // To read,
            var date = worksheet.Cells[1, 1].Value;
            Console.Out.WriteLine(date.ToString());

            workbook.Save();
            workbook.Close();
        }
    } 
```

您必须将“Microsoft.Office.Core”和“Microsoft.Office.Interop.Excel”引用添加到您的项目并使用它们。

# c++ - 一个关于弦的核心

> ID：16209867
> 
> 赞同：-5
> 
> 时间：2013-04-25T08:26:33.657
> 
> 标签：c++, stl

我有一个功能如下：

```
#define _GLIBCXX_FULLY_DYNAMIC_STRING 1
typedef struct _coordinate{
    int posx;
    int posy;
    _coordinate(int x = 0,int y = 0){posx = x; posy = y;};
}Coordinate;

int find_way(int x, int y, int food_x, int food_y, vector <string>& grid, vector<Coordinate>& co, vector<Coordinate>& cur, i
nt& min){
    if(cur.empty()){
        if(!co.empty()){
            return 1;
        }
        else{
            return 0;
        }
    }
    Coordinate node = cur.back();
    int nx = 0;
    int ny = 0;
    if((node.posx == food_x) && (node.posy == food_y)){
        if(cur.size() < min){
            co.clear();
              for(int i = 0; i < cur.size(); i++){
                co.push_back(cur[i]);
                cout<<cur[i].posx<<" "<<cur[i].posy<<endl;
            }
            min = co.size();
        }
        cur.pop_back();
        return find_way(x, y, food_x, food_y, grid, co, cur, min);
    }
    //DOWN
    if((node.posx < x-1) && (grid[node.posx+1].at(node.posy) != '%')){
        nx = node.posx+1;
        ny = node.posy;
        grid[nx][ny] = '%';
        cur.push_back(Coordinate(nx,ny));
        cout<<"DOWN "<<nx<<" "<<ny<<endl;
        cout<<"grid.size()="<<grid.size()<<", grid[nx].length()"<<grid[nx].length()<<endl;
        find_way(x, y, food_x, food_y, grid, co, cur, min);
        cur.pop_back();
        grid[nx][ny] = '-';
    }
    //RIGHT
    if((node.posy < y-1) && (grid[node.posx].at(node.posy+1) != '%')){
        nx = node.posx;
           ny = node.posy+1;
        grid[nx][ny] = '%';
        cur.push_back(Coordinate(nx,ny));
        cout<<"RIGHT "<<nx<<" "<<ny<<endl;
        cout<<"grid.size()="<<grid.size()<<", grid[nx].length()"<<grid[nx].length()<<endl;
        find_way(x, y, food_x, food_y, grid, co, cur, min);
        cur.pop_back();
        grid[nx][ny] = '-';
    }
    //LEFT
    if((node.posy > 0) && (grid[node.posx].at(node.posy-1) != '%')){
        nx = node.posx;
        ny = node.posy-1;
        grid[nx][ny] = '%';
        cur.push_back(Coordinate(nx,ny));
        cout<<"LEFT "<<nx<<" "<<ny<<endl;
        cout<<"grid.size()="<<grid.size()<<", grid[nx].length()"<<grid[nx].length()<<endl;
        find_way(x, y, food_x, food_y, grid, co, cur, min);
        cur.pop_back();
        grid[nx][ny] = '-';
    }
    //UP
    if((node.posx > 0) && (grid[node.posx-1].at(node.posy) != '%')){
        nx = node.posx-1;
        ny = node.posy;
        grid[nx][ny] = '%';
        cur.push_back(Coordinate(nx,ny));
        cout<<"UP "<<nx<<" "<<ny<<endl;
        cout<<"grid.size()="<<grid.size()<<", grid[nx].length()"<<grid[nx].length()<<endl;
        find_way(x, y, food_x, food_y, grid, co, cur, min);
        cur.pop_back();
        grid[nx][ny] = '-';
    }
    else{
        cur.pop_back();
        cout<<"pop_back"<<endl;
        //find_way(x, y, food_x, food_y, grid, co, cur, min);
    }
} 
```

当我运行这个程序时，发生了崩溃，核心转储如下：

```
 (gdb) bt
    #0  0x000000302af2e2ed in raise () from /lib64/tls/libc.so.6
    #1  0x000000302af2fa3e in abort () from /lib64/tls/libc.so.6
    #2  0x000000302d3b1138 in __gnu_cxx::__verbose_terminate_handler () from /usr/lib64/libstdc++.so.6
    #3  0x000000302d3af166 in __cxa_call_unexpected () from /usr/lib64/libstdc++.so.6
    #4  0x000000302d3af193 in std::terminate () from /usr/lib64/libstdc++.so.6
    #5  0x000000302d3af293 in __cxa_throw () from /usr/lib64/libstdc++.so.6
    #6  0x000000302d3af61d in operator new () from /usr/lib64/libstdc++.so.6
    #7  0x000000302d3901de in std::string::_Rep::_S_create () from /usr/lib64/libstdc++.so.6
    #8  0x000000302d3908db in std::string::_M_mutate () from /usr/lib64/libstdc++.so.6
    #9  0x000000302d391e31 in std::string::_M_leak_hard () from /usr/lib64/libstdc++.so.6
    #10 0x000000302d391eb8 in std::string::at () from /usr/lib64/libstdc++.so.6
    #11 0x00000000004015b4 in find_way (x=7, y=20, food_x=5, food_y=1, grid=@0x7fbffff8b0, co=@0x7fbffff820, cur=@0x7fbffff7f0, 
        min=@0x7fbffff7ec) at PacMan-DFS.cpp:74
    #12 0x0000000000401562 in find_way (x=7, y=20, food_x=5, food_y=1, grid=@0x7fbffff8b0, co=@0x7fbffff820, cur=@0x7fbffff7f0, 
        min=@0x7fbffff7ec) at PacMan-DFS.cpp:69
    #13 0x0000000000401562 in find_way (x=7, y=20, food_x=5, food_y=1, grid=@0x7fbffff8b0, co=@0x7fbffff820, cur=@0x7fbffff7f0, 
        min=@0x7fbffff7ec) at PacMan-DFS.cpp:69 
```

想知道为什么在使用函数“string.at()”的时候会调用“operator new()”，貌似不需要申请内存块，为什么会发生crash，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:29:44.717

如果您使用 std::string 的*引用计数*实现，std::string.at() 可能会调用 operator new。

在引用计数的实现中，两个字符串可能共享相同的底层字符数组。但是因为`at()`在这种情况下非常量字符串返回非常量引用，所以实现必须分配一个新的字符数组，否则返回的引用`at()`可以用于修改两个字符串。

# javascript - 使用 Web 浏览器的自动填充时的事件处理程序/触发器

> ID：16209870
> 
> 赞同：2
> 
> 时间：2013-04-25T08:26:36.567
> 
> 标签：javascript, html, browser, autocomplete, autofill

我有一个表单，其中输入的标签作为占位符悬停在它们上方。当用户键入文本时，这些标签会被隐藏。然而，我的问题是当浏览器[自动填充](http://support.google.com/chrome/bin/answer.py?hl=en&answer=142893)被触发时，例如 chrome 用值填充所有输入，我的标签保持可见，创建标签文本和输入文本的重叠。我需要一个在使用自动填充时触发的触发器，以便隐藏这些标签。

[我找到*了一个*hack 解决方案](http://furrybrains.com/2009/01/02/capturing-autofill-as-a-change-event/)，但它需要一个计时器来不断检查每个输入值并监听变化。由于资源消耗，这对我来说并不理想，而且它有很多用于简单功能的代码。

是否有事件监听器或类似的东西，所以如果输入是自动完成的，它会触发我自己的功能？

# android - android - gradle 多项目包含和排除库

> ID：16209874
> 
> 赞同：4
> 
> 时间：2013-04-25T08:26:53.483
> 
> 标签：android, gradle, multiple-projects

我正在尝试使用 Gradle 构建一个 Android 项目。

它具有以下结构：

```
ProjectA----- MainProject,   
LibA     ---- Library project,   
LibB     ---- Library project,   
LibC     ---- Library project,   
LibD     ---- Library project,  
etc... 
```

根据情况，我需要包括库，有时需要根据口味包括所有库、1 个库、2 个或 3 个等。在设置文件中，我包含了所有项目。

有人知道如何根据口味包含/排除库吗？

我已经尝试过依赖块，但出现错误。
以下是示例代码

```
dependencies {
if (task.name.matches('compileFlovor1'){
  exclude module: 'LibD'
   }
} 
```

错误是：找不到参数 [{module=LibD}] 的方法 exclude()。

请指导我解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T21:02:20.247

添加特定于风味的依赖项，您必须配置相应的配置。假设您必须品尝“免费”和“付费”

```
android {
    productFlavors {
        free
        paid
    }
} 
```

然后您可以通过以下方式在依赖块中设置特定于风味的依赖项：

```
dependencies {
    compile project(':library1')  //library1 used in free and paid flavour
    freeCompile project(':library2')
    paidCompile project(':library3')    
    paidCompile project(':library4')    
    paidCompile project(':library5')     
} 
```

希望有帮助，

干杯，勒内

# graph - 具有非整数权重的无向图中的最大流

> ID：16209878
> 
> 赞同：0
> 
> 时间：2013-04-25T08:27:08.897
> 
> 标签：graph, max-flow

如果我想在无向图中找到最大流量，我该怎么做？

在维基百科页面[http://en.wikipedia.org/wiki/Maximum_flow_problem](http://en.wikipedia.org/wiki/Maximum_flow_problem)它说算法需要有向图（我只是将每条边转换为一对边）但问题是我可能有非整数权重（例如0.5)。

有没有适合这个问题的现有算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:56:53.807

[stoer-wagner 算法](http://www.cin.ufpe.br/~pcp/stoer-wagner.pdf)完成了这项工作。它专注于最大流量/最小切割的对偶性。具有开创性的[ford-fulkerson](http://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm)的算法（在实值边缘权重上失败）将是[edmonds-karp](http://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm)。

# php - php会话切换图片

> ID：16209881
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:27:12.270
> 
> 标签：php, image, session, swap

我的网站上有一个主页按钮，这个主页按钮是一个房子的图像。但我想让我的网站成为一个用户友好的网站。因此，如果有人单击该按钮，则主页按钮将从颜色更改并打开主页。所以这个人知道他/她在哪个页面上。到目前为止，这是我的代码。

我的脚本的问题是它不会从图像切换我不是 PHP 会话脚本专家，所以你能帮帮我吗？我搜索了谷歌和所有内容，但找不到与我的问题相关的任何内容。

```
 <?php
        session_start();
        $_SESSION['1'] = $_GET["Active"];
        if (!empty($_GET["Active"])){ ?>
            <a href="<?php echo $this->createUrl("/admin/survey/sa/index")."home"; ?>">
            <img src='<?php echo $sImageURL;?>home1.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/></a>
        <?php
        } 
        else{?>
            <a href="<?php echo $this->createUrl("/admin/survey/sa/index").""  ?>">
            <img src='<?php echo $sImageURL;?>home.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/></a>
        <?php
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:38:05.797

嗯，我不知道，你需要这个会话做什么。如果您“读取” $_GET 数组，它似乎没用。我也不知道您的查询字符串状态，但您可以尝试：

```
if (isset($_GET["Active"])) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:41:27.450

所以，如果我理解您的问题：当用户在“主页”（根站点）上时，您想将图像从“home1”切换到“home”吗？像某种“活跃”的东西？

您使用什么在站点之间导航？PHP 的 URL 语法 $_GET? 如果是这样，您可以检查用户是否在指定站点上，然后相应地显示链接。

```
<?php
    $page = $_GET['page'];
    if($page == "" || $page == "home"){
        //User is on the default site (url: mysite.com/)
        echo "<img code....>";
    }elseif($page == "about")
        //User is on the "about site" (url: mysite.com/?page=about)
        echo "<img active about>";
    }else{
        //The user is on a unknown site (url: mysite.com/?page=<something we don't know>)
    }
?> 
```

# java - 将任何文件类型解析为 XML

> ID：16209890
> 
> 赞同：1
> 
> 时间：2013-04-25T08:27:43.093
> 
> 标签：java, groovy, gradle, fileparsing

我在 Gradle 脚本中有以下代码片段（语法是 Groovy/Java 的组合）：

```
File file = new File(filename) // Filename is being read from console
def content = file.getText()
Document document = DOMBuilder.parse(new StringReader(content), false, false) 
```

问题是，我正在尝试解析 XML 文件，但带有`xconf`扩展名（例如`file.xconf`）。出于某种原因，当我尝试上面的代码时，我收到以下错误消息（在控制台中）：

```
java.io.FileNotFoundException: <full_path>/file.dtd (No such file or directory) 
```

路径是正确的，但我注意到扩展名突然更改为`.dtd`. 我注意到文件中有对该文件版本的引用`.dtd`，但我希望解析器忽略它（并停止验证，这就是为什么第二个参数 `DOMBuilder.parse()`为假的原因）。我可以更改此行为以成功解析文件吗？

**注意：如果可能的话，我也希望能够对（任何）其他文件扩展名做同样的事情。**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:34:17.300

file.xconf xml 必须在 XML 中定义 DTD 引用。打开文件并检查。

默认情况下，DOM 解析器根据与 XML 关联的 DTD 验证 XML。如果您不想验证，请将验证模式设置为 false。检查 DomBuilder API。

其他选项是在 XML 中定义 DTD 路径，以便可以从任何地方访问它，或者您也可以注册解析器。我忘了怎么做，但你可以查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:56:37.243

尝试这个：

```
import groovy.xml.*
import org.w3c.dom.Document;
import org.xml.sax.InputSource;

Document parseWithoutDTD( Reader r, boolean validating=false, boolean namespaceAware=true ) {
  FactorySupport.createDocumentBuilderFactory().with { f ->
    f.namespaceAware = namespaceAware
    f.validating = validating
    f.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
    f.newDocumentBuilder().with { db ->
      db.parse( new InputSource( r ) )
    }
  }
}

Document d = new File( filename ).withReader { r ->
  parseWithoutDTD( r )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:38:15.740

[DTD](http://en.wikipedia.org/w/index.php?title=Document_Type_Definition&oldid=551031777)定义了 XML 文档的规则。如果您遵循这些规则，则 xml 文档被视为“[有效](http://www.w3schools.com/xml/xml_dtd.asp)”。如果您想忽略 DTD 文件（例如因为它不存在），请将解析的验证模式设置为 false。

# java - Java Swing 应用程序中的文本文档编辑器

> ID：16209897
> 
> 赞同：1
> 
> 时间：2013-04-25T08:28:06.883
> 
> 标签：java, swing, editor, document

我正在使用 Swing 开发 Java 应用程序。我想在应用程序中打开一个文档文件，用户可以在其中选择一些内容。右键单击时，它应该列出上述所有字段，当用户单击某个字段时，文档中的选定部分将转到该特定字段。

请参考图片：

![图片](https://i.stack.imgur.com/5Z1PL.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:13:17.087

您可以选择 a 中的文本[`JTextComponent`](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)并调出[`JPopupMenu`](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#popup). 菜单应该有一个[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)用于将所选文本复制到相应字段的每个字段。这个相关的[例子](https://stackoverflow.com/a/5129757/230513)说明了一些概念。

# jquery - JQUERY address.value 删除 #

> ID：16209898
> 
> 赞同：0
> 
> 时间：2013-04-25T08:28:07.283
> 
> 标签：jquery

谁能告诉我如何在 jquery.addres.value 的情况下删除地址栏中的 # 值

这是我在现有 wordpress 主题中的代码。我已经设置了 SEO 网址，但点击菜单项后 # 仍在 url 中。

```
var path = (base + "/" != jQuery(this).attr('href'))      
    ?jQuery(this).attr('href').replace(base, "") : "/";

jQuery.address.value(path); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:30:07.560

尝试这个，

```
var url=jQuery(this).attr('href');
var temp=url.split('#');
url=temp[0];
jQuery.address.value(url); 
```

# linux - 在 shell 中扫描程序的输出

> ID：16209902
> 
> 赞同：0
> 
> 时间：2013-04-25T08:28:16.380
> 
> 标签：linux, shell, output

您好，我目前正在尝试在 Linux 中创建一个脚本文件，该文件将 o prgram 的输出作为输入，并对其进行扫描以查找某些单词的出现次数。为了更清楚，我想扫描输出并将某些单词在该输出中存在多少次存储到变量中。我是 linux 中的脚本新手。我尝试将输出存储在一个文件中，然后逐行扫描它以找到单词，但出于某种原因，我用来解析它的循环永远不会结束。你能帮助我吗？

```
./program > buffer.txt

while read LINE
do
echo $LINE | grep word1  #when i use grep command the loop never ends
done <a.txt 
```

编辑：在 C 中，等效程序是

```
char* word="word1"
while(/*parse all the lines at a text */)
{
fgetline("file_a",&buffer)
if(strcmp(buffer,word)==0)
 strcpy(word1,"word") //continue the search with this 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:43:40.297

您的代码运行良好，while 循环将退出。尝试在while循环后添加以下行并验证

echo "当循环退出时！"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T00:45:23.543

最简单的做法是完全跳过写入文件

```
if ./program | grep -q word1 &>/dev/null; then
    echo "TRUE"
fi 
```

-q 告诉 grep 保持安静，但它偶尔仍会产生错误消息，您可以使用 &>/dev/null 来抑制这些错误消息。如果您希望看到任何错误消息，只需删除该部分即可。如果您希望 ./program 的错误和标准输出由 grep 分析，那么您需要像[这样将标准错误重定向到标准输出](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)

# jquery - 下拉菜单，jquery同步滑动内容

> ID：16209905
> 
> 赞同：1
> 
> 时间：2013-04-25T08:28:19.347
> 
> 标签：jquery, html, css

嗨，我用 jquery 构建了一个简单的下拉菜单，可以在 [http://testsiteproject.bugs3.com/找到](http://testsiteproject.bugs3.com/)

当我点击灰色的顶部按钮时，我的问题就出现了，我还希望黑色按钮跟随菜单而不是在 div 已经向下滑动后出现。有没有办法做到这一点？

```
<div id="topMenu">
<div id="top-top"></div>
<a href='javascript:slideMenuUp();'>
<div id="top-bottom"></div>
</a>
</div> 
```

我说它应该向下滑动“topMenu”，其中包括“top-top”和“top-bottom”。但它只滑动“顶部”。

```
function slideMenu(){
    if ($("#topMenu").is(":hidden")) {
        $("#topMenu").slideDown("slow");
    } else {
        $("#topMenu").hide();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:42:46.907

`#top-bottom`将位置从更改`absolute`为`relative`。

```
#top-bottom{
    position: relative;
    left:45%;
    height: 50px;
    width:100px;
    background:url(../images/top-up.png) no-repeat; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:43:02.200

如果您尝试将整个`#topMenu`div 放置在屏幕外（顶部值为负），然后在`top`属性上而不是`slideDown`.

我的意思的快速模型：

**小提琴：http:**
[//jsfiddle.net/vLeyF/](http://jsfiddle.net/vLeyF/)

**JS：**

```
$("#topMenu").animate({top: 0}, "slow"); 
```

然后从这里你可以动画回`top`你之前拥有的任何属性等等。但是，看看 Spokey 的答案，你可能仍然需要做这部分（`#top-bottom`从切换`position:absolute`到`position:relative`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:57:56.553

最好使用`.slideToggle`而不是`.slideDown`.

小提琴：http: [//jsfiddle.net/hMsTJ/1/](http://jsfiddle.net/hMsTJ/1/)

jQuery：

```
$('#topContent').hide();
// Add animation
$('#topMenu a').click(function(){
    $('#topContent').slideToggle('slow', function() {
    // Animation complete.
  });
}); 
```

# css - 在小浏览器窗口上水平显示图像

> ID：16209911
> 
> 赞同：0
> 
> 时间：2013-04-25T08:28:36.637
> 
> 标签：css

我有一个我正在浏览的照片网站，但我对浏览器窗口的反应性大小有疑问。这些图像在 100% 时看起来很棒，但是当我缩小窗口大小时，风景图像开始调整大小，我知道它们正在缩小大小以满足浏览器窗口的宽度。

然而，当我变得非常小时，为了模仿智能手机，我真的希望这些图像堆叠起来，因为这对于肖像图像更有意义。所以这个想法是在浏览器很小的时候从左到右然后从上到下。我对 css 有点生疏，我不记得如何完成这项工作。有人可以帮助一个 brutha 并指出我正确的方向，这样我就可以开始了吗？我通过我的 WP 覆盖选项来做这一切，所以我应该只使用 css 的方法是最好的，因为我是一个更复杂的东西。

网站在这里：http: [//jadanduffinphotography.com/](http://jadanduffinphotography.com/)

谢谢！-贾丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:41:15.660

我建议你做的是：

*   编写 css 来制作图像`float: left;`并`position: relative;`在容器内`div`

*   检测浏览器窗口的方向

*   根据方向，设置容器div的宽度

这应该使图像在可能的情况下水平显示，并在没有时使它们垂直堆叠。

你也应该看看[这个](https://stackoverflow.com/questions/5498934/detect-change-in-orientation-using-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:44:00.957

这很好。不知道响应式布局真正困扰您的是什么，但到目前为止，您的网站运行良好。

如果您仍然不希望在较小的设备上调整大小/布局，请在行之间删除/编辑`#7201`-`#7509`在此文件上`http://jadanduffinphotography.com/wp-content/themes/heat/style.css`

# exception - 尝试显示用户给出的字符串长度时遇到异常。MIPS

> ID：16209924
> 
> 赞同：0
> 
> 时间：2013-04-25T08:29:10.177
> 
> 标签：exception, mips, memory-address, string-length, program-counter

我正在尝试计算用户给出的字符串的长度。每次我尝试运行代码时，我都会收到消息“PC=（某个地址）发生异常，然后是消息：”数据/堆栈读取中的错误地址：（另一个地址）。我知道它与堆栈有关，但我无法找出问题所在。MIPS 中的代码是 bello，我使用的是 QtSpim。您的帮助将不胜感激。

```
sentence:   .space 6
Prompt: .asciiz "Enter the sentence. Max 6 characters, plus a terminator  .\n"  

        .text       # Start of code section
main:               # The prompt is displayed.

    li $v0, 4        # system call code for printing string = 4
    la $a0, Prompt  # load address of string to be printed into $a0
    syscall         # call operating system to perform operation;
                    # $v0 specifies the system function called;
                    # syscall takes $v0 (and opt arguments)

##read the string, plus a terminator, into the sentence
    la      $t0,    sentence
    li      $t0,    6
    li      $v0,    8

    add $v0, $zero, $zero   #initialize length to zero
loop:
    lbu $s0, 0($t0)      #load one character of string
    addi $t0,$t0,1          #point to next character
    addi $v0,$v0,1          #increment length by 1
    bne $s0,$zero, loop     #repeat if not null yet
end_loop:
    addi $v0, $v0, -1       #don't count the null terminator

    li $v0, 4               #display the actual length
    syscall

exit: #exit the program 
    li $v0, 10
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:52:16.070

```
##read the string, plus a terminator, into the sentence
    la      $t0,    sentence
    li      $t0,    6 
```

在这里，您正在加载`sentence`into的地址`$t0`，然后立即`$t0`用 value覆盖`6`。这可能是异常的根本原因，因为下面`lbu`将尝试从地址 0x00000006 读取。我建议你删除`li`.

```
 li      $v0,    8

    add $v0, $zero, $zero   #initialize length to zero 
```

这`li`是没有意义的，因为您`$v0`在下一行设置为零，因此`li`也可以将其删除。

```
sentence:           .space 6
Prompt:     .asciiz "Enter the sentence. Max 6 characters, plus a terminator  .\n" 
```

您说用户最多可以输入 6 个字符。但是您只为 6 个字节分配空间，这意味着如果用户实际输入 6 个字符，则 NULL 终止符将不适合。

# python - 如何使用 django-storages 在 AWS S3 存储桶中创建文件夹？

> ID：16209926
> 
> 赞同：1
> 
> 时间：2013-04-25T08:29:15.170
> 
> 标签：python, django, amazon-web-services, amazon-s3

我尝试了以下方法：

```
f = default_storage.open('test/', 'w')
f.write('')
f.close() 
```

但它返回了这个错误：

> 您提供的 XML 格式不正确或未针对我们发布的架构进行验证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:42:13.557

S3 中没有文件夹之类的东西。如果您使用路径保存文件，则会“伪造”目录结构。

[https://stackoverflow.com/a/2141499/682968](https://stackoverflow.com/a/2141499/682968)

[在 Amazon s3 存储桶中添加文件夹](https://stackoverflow.com/questions/6791257/add-folder-in-amazon-s3-bucket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-14T08:43:06.567

对于 Google Cloud Storage，我最终通过覆盖`save`写入空文件的方法来创建目录：

```
 class Attachment(models.Model):
    file = models.FileField(...)

    def save(self, *args, **kwargs):
        super(Attachment, self).save(*args, **kwargs)

        cloud_storage = GoogleCloudStorage(...)
        directory_path = "<your_path>"
        if not cloud_storage.exists(directory_path):
            directory = cloud_storage.open(directory_path, "w")
            directory.write("")
            directory.close() 
```

# opencv - 实现线的霍夫变换

> ID：16209928
> 
> 赞同：0
> 
> 时间：2013-04-25T08:29:20.740
> 
> 标签：opencv, image-processing, hough-transform

我正在尝试在已经预处理的图像中实现霍夫变换以进行线检测。所以我的输入图像是黑白边缘图像，0 - 背景和 255 - 前景。我不想使用 OpenCV 内置的 HoughLines 库。我实际上坚持创建累加器并正确增加其值。我无法弄清楚我哪里出错了，所以这是我的代码块：

```
int diagonal = sqrt(height * height + width * width);

IplImage *acc = cvCreateImage (cvSize(180, 2 * diagonal),IPL_DEPTH_8U, 1);
unsigned char* accData = (unsigned char *)acc->imageData;

for (int i=0; i<height; i++)
{
    for (int j=0; j<step; j++)
    {
        if (data[i*step + j] > 200)
        {
            for (int theta=0; theta<180; theta++)
            {
                int p = j * cos(theta) + i * sin(theta);
                if (p > 0)
                    accData[theta*180 + p] += 1;
            }
        }
    }
} 
```

我在 acc 中得到的输出图像不是它应该的样子。我没有得到任何正弦曲线，而是到处都是白斑。任何人都可以提供任何关于我哪里出错的反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:55:23.970

我看到的是，您不使用带有弧度值的 sinus，但使用度数值您可以将其更改如下：

```
int p = j * cos((double)theta*PI/180) + i * sin((double)theta*PI/180); 
```

# jquery - 如何使用 jQuery 获取 django 的 HttpResponse 状态码？

> ID：16209930
> 
> 赞同：1
> 
> 时间：2013-04-25T08:29:25.823
> 
> 标签：jquery, ajax, django

我的服务器成功时“返回 HttpResponse()”，失败时“返回 HttpResponse(status=400)”。我的客户有以下 jquery ajax 功能：

```
$('#submit').click(function(){
   $.post("{% url 'addcomment' %}", {msg:$('#newcomment').val()}, function(data,status){
       if (status==200) {
          location.reload()
       } else {
          alert("Comment failed")
       }
   });
}); 
```

但是ajax代码不起作用。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:44:26.813

正如文档明确指出的那样，成功回调返回一个`data`,`textStatus`和`jqXHR`参数

[http://api.jquery.com/jQuery.post/#jQuery-post-url-data-successdata--textStatus--jqXHR-dataType](http://api.jquery.com/jQuery.post/#jQuery-post-url-data-successdata--textStatus--jqXHR-dataType)

如果您想要响应状态，请从第三个参数中获取`jqXHR.status`

# javascript - ember.js - 从任何控制器观察到的更新模板

> ID：16209931
> 
> 赞同：2
> 
> 时间：2013-04-25T08:29:28.893
> 
> 标签：javascript, ember.js

我刚刚开始使用 ember.js。我想根据另一个控制器发出的服务器请求更新控制器的数据；即：当 IndexController 更改属性时，MyController 应该更新其状态。我认为我有这个权利，但我不确定如何根据观察到的变化更新模板。这是我到目前为止所拥有的：

```
<script type="text/x-handlebars" data-template-name="application">
  <div>
    {{outlet}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="index">
  <form>
    <label for="go">Data</label>
    <input type="text" id="go" />
    <button type="button" {{action "findData"}}>Find Data</button>
  </form>
</script>

<script type="text/x-handlebars" data-template-name="my">
  <ul>
    {{#each entry in controller}}
    <li>{{entry}}</li>
    {{/each}}
  </ul>
</script> 
```

这些是当前存储在 index.html 中的模板

```
var App = Ember.Application.create()

App.IndexController = Ember.Controller.extend({
  myProperty: false,

  findData: function() {
    console.log("Requesting data from the server ..");
    myProperty = true;
  }
});

App.MyController = Ember.Controller.extend({
   needs: ['index'],

   myPropertyHasChanged: function() {
   var propertyChanged = this.get('controllers.index.myProperty');
   if (propertyChanged) {
      console.log("property has changed");
      return ["apple", "orange"];
   }
}.observes('controllers.index.myProperty')
}); 
```

这是实际的 ember.js 代码。每当按下索引模板中的按钮时，如何更新“我的”模板中的数据？它应该是 2 个元素的列表（“apple”和“orange”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:24:36.863

尝试将控制器内容的值设置为您希望在`myPropertyHasChanged`函数中显示的列表：

```
this.set('content', ["apple", "orange"]); 
```

# javascript - 从 javascript 表单解析到数据库

> ID：16209934
> 
> 赞同：1
> 
> 时间：2013-04-25T08:29:32.920
> 
> 标签：javascript, parsing

我有一个带有 javascript 代码处理的表单的网页。有一个带有 javascript`onClick()`方法的按钮的表单。这是网页（[捷克语变格](http://pteryx.net/sklonovani.html)）

在输入时，我在 mysql 数据库中有一个名称列表。我需要将单个名称表单列表放入表单中，单击按钮以调用`onClick()`方法，然后在输出时我希望名称带有变格（表单中的字段 5\. vokativ） - 将其插入数据库表中。此操作循环用于列表表单数据库中的每个名称。

请，有什么建议怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:38:30.157

我会推荐ajax来做这个技巧..

如果我理解你的话，使用 jQuery 可以很容易地完成。

它可能看起来像这样：

```
$.ajax({
  url: "validate.php?info=something&otherinfo=somethingelse"
}).done(function() {
  alert('done');
}); 
```

您可以通过以下方式获取所有信息：

```
var something = $('input[name=something]').val(); 
```

然后让 PHP 页面处理这些信息。

希望这可以帮助。

# java - java.lang.IllegalArgumentException：您的 InputStream 既不是 OLE2 流，也不是 OOXML 流

> ID：16209939
> 
> 赞同：9
> 
> 时间：2013-04-25T08:29:44.777
> 
> 标签：java, xls, xssf, poi-hssf

当我阅读 Excel 文件（.xls 格式）时，我不断收到异常：

```
java.lang.IllegalArgumentException: Your Input Stream was neither an OLE 2 stream, nor an OOXML stream. 
```

我搜索了一下，发现如果输入流不支持重置或标记，我应该用`pushbackStream`. 我的输入流不支持标记\重置。

那么使用`pushbackStream`是唯一的选择吗？如何使用它？它有什么用？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-23T07:56:08.997

```
Your InputStream was neither an OLE2 stream, nor an OOXML stream
java.lang.IllegalArgumentException: Your InputStream was neither an OLE2 stream, nor an OOXML stream 
```

我猜您正在使用 Workbook Factory 或不同格式的输入文件和不同的工作簿类型。当它无法读取文件类型时，通常会弹出此错误。Apache POI 不检查文件扩展名。如果您在文本编辑器中打开它，您会看到它采用不同的格式。或者，您可能在使用 Workbook Factory 之前将工作簿类型初始化为 HSSF 或 XSSF。

更简单的解决方案是使用 Microsoft Excel 打开文件并将其另存为另一个文件（使用Microsoft **Excel > Menu中的****File>Save** As 选项）。

 **工作簿工厂不检查文件扩展名，而是检查文件 MIME 类型。基本上 excel 适用于不同的文件（例如：使用第三方应用程序创建的文件，excel 2003 版本），但 Apache POI 非常具体。

`PushbackInputStream`将“推回”或“未读”功能添加到另一个输入流。它允许您提前读取几个字节以查看即将发生的内容，然后才能确定如何解释当前字节。

如果您不使用 Workbook Factory，`PushbackInputStream`我猜这是唯一的选择。

如果您可以在此处共享代码，我可以对其进行测试并重新确认。**

# linux - 有人可以识别这个unix命令吗？

> ID：16209949
> 
> 赞同：1
> 
> 时间：2013-04-25T08:30:31.337
> 
> 标签：linux, unix, diff

在我的大学，我们提交的代码的输出正在与使用（我认为）一些 unix 命令的正确输出进行比较。问题是我不知道它是什么或它意味着什么（我不*认为*这是差异）

```
rivers  passed stage A for width  10
rivers  failed stage B for width  10
--- rivers.expF 2013-04-25 18:15:49.093265000 +1000
+++ rivers.outF 2013-04-25 18:15:49.082424000 +1000
@@ -22,4 +22,3 @@
 beyond
 fixing.

- 
```

我有上面的输出。我想 --- 指的是一个文件，而 +++ 指的是另一个文件，而 22, 4 与行号有关，但是最后的减号是什么意思？（“超越修复”在输入文件的最后几行）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T08:45:30.520

您显示的输出是“统一差异”： [http ://en.wikipedia.org/wiki/Diff#Unified_format](http://en.wikipedia.org/wiki/Diff#Unified_format)

它可以生成，`diff -u`但许多程序可以生成这种输出。

末尾的减号仅表示您的文件与参考文件相比缺少换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:32:32.403

它正在尝试安装软件补丁：

[http://linux.about.com/od/commands/l/blcmdl1_patch.htm](http://linux.about.com/od/commands/l/blcmdl1_patch.htm)

[http://linux.die.net/man/1/patch](http://linux.die.net/man/1/patch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:34:42.920

它看起来很像`diff -Naur`。

# vb.net - 让按钮在继续之前等待用户输入

> ID：16209956
> 
> 赞同：0
> 
> 时间：2013-04-25T08:30:43.850
> 
> 标签：vb.net, button, textbox, wait

我遇到了麻烦，无法找到出路

我正在尝试单击一个按钮，然后让用户在文本框 7 和 8 中输入输入，然后重用文本框 7 和 8 来获取接下来的两个值，一旦完成，线条就被绘制了…… </p>

```
 Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
    Dim myPen As New System.Drawing.Pen(System.Drawing.Color.Red)
    Dim formGraphics As System.Drawing.Graphics

    Dim x1 As Integer
    Dim y1 As Integer
    Dim x2 As Integer
    Dim y2 As Integer

    x1 = TextBox7.Text
    y1 = TextBox8.Text

    'clears textbox values...
    TextBox7.Text = ""
    TextBox8.Text = ""

    'set focus to textbox7...
    TextBox7.Focus()

    x2 = TextBox7.Text
    y2 = TextBox8.Text

    formGraphics = Me.CreateGraphics()
    formGraphics.DrawLine(myPen, x1, y1, x2, y2)
    myPen.Dispose()
    formGraphics.Dispose()
End Sub 
```

目前，在单击按钮之前需要先填充文本框，我希望它反过来..

有人知道怎么做吗？

使用 VB.net...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:41:46.560

您是否要处理文本框 textchanged 事件，以便每当文本框中的文本发生更改时，您都可以检查它是否满足您的条件？

[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.textchanged.aspx)

您还需要将代码分解为几个不同的子例程

# javascript - 如何在 JavaScript 文件中嵌入 CSRF 令牌？

> ID：16209959
> 
> 赞同：1
> 
> 时间：2013-04-25T08:31:05.053
> 
> 标签：javascript, node.js, express, pug, csrf

我有一个 Node.js 应用程序，我在其中实现了 CSRF。它工作正常，当我在 JADE 文件中有一些内联 JavaScript 时，我只是用来`#{token}`将令牌放入 JavaScript。

但是，我现在已经将我的 JavaScript 移动到外部文件中，并且无法找到一种将 CSRF 令牌输入到代码中的简单方法。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:43:23.417

您可以简单地将令牌植入到一个 dom 元素中，例如隐藏的 div。并使用 javascript 获取该元素并读取令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T08:17:16.270

考虑在文档头部使用 META 元素来保存 CSRF 令牌。然后在 AJAX 请求中使用此令牌。如果您的服务器返回一个新令牌，请替换 META 元素的内容。

HTML：

```
<html>
<head>
  <!-- generate this server-side -->
  <meta name="csrf" content="A_VALUE">
</head>
<body>
  <form>
    <input type="text" name="something">
    <input type="submit" value="Send">
  </form> 
<body>
</html> 
```

JAVASCRIPT

```
(function($) {
  var csrf = $("meta[name='csrf']").attr("content");
  $("form").submit(function (evt) {
    evt.preventDefault();
    alert("CSRF: " + csrf);
  });
})(jQuery); 
```

( [http://jsfiddle.net/ZmesY/1/](http://jsfiddle.net/ZmesY/1/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:42:11.890

只需编写一个带有全局标记 var 的内联脚本，您可以从任何其他脚本中引用它。

```
script
  | window.myApp.token = #{token}; 
```

在你的 js 中：

```
$.ajax({ data: { _csrf: window.myApp.token }, ...}); 
```

（确切的语法可能是错误的，自从我使用翡翠以来已经很长时间了，但我相信你明白了一般的想法）。

# android - 启用的操作栏图标不是标题

> ID：16209963
> 
> 赞同：8
> 
> 时间：2013-04-25T08:31:27.360
> 
> 标签：android, android-actionbar

如何使应用程序图标在 actionbarsherlock（不是仅标题图标）中启用，就像在什么应用程序中一样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T14:07:37.257

自 Android 4.2.2 起，标题可与图标一起单击。WhatsApp 使用自定义视图来显示两行标题。这将禁用沿途的标题点击。你可以这样做：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setCustomView(R.layout.ab_title);

TextView title = (TextView) findViewById(android.R.id.text1);
title.setText("Title"); 
```

/res/layout/ab_title.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="@style/TextAppearance.Sherlock.Widget.ActionBar.Title"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:ellipsize="end"
    android:gravity="center_vertical" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T08:36:08.570

将以下内容添加到您的`onCreate`方法中：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

并在您的活动中定义以下覆盖方法：

```
@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        onBackPressed();
        break;
    default:
        return super.onOptionsItemSelected(item);
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:04:48.050

我的朋友，我认为这是 Android 版本/构建“功能”，因为我有两台设备（Nexus S 和 Nexus 7）（Android 4.1.2 和 Android 4.2.2）并且我正在部署我正在开发的应用程序设备，完全相同的代码，在 Nexus S 上，图标是“向上”，在 Nexus 7 上，图标和标题都是“向上”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T10:04:09.870

确保您的 android:minSdkVersion="11" 可以在清单文件中看到，Up 图标已包含在 APK 11 中。将以下内容添加到您的 onCreate 方法对于主页放置 getActionBar().setDisplayHomeAsUpEnabled(false); 确保它是假的，并且在其他活动中保持启用它，即“真”。我制作了一个小样本，请尝试以下链接，这可能会帮助您导入您的工作空间

[http://www.mediafire.com/?hktdvts7yyduwv1](http://www.mediafire.com/?hktdvts7yyduwv1)

# django - Heroku 推送被拒绝，无法与供应商沟通，请稍后再试

> ID：16209967
> 
> 赞同：7
> 
> 时间：2013-04-25T08:31:37.040
> 
> 标签：django, git, heroku

我试图为我的第一个应用程序首次推送到 Heroku git，但我不断收到此错误：

```
-----> Compiled slug size: 29.9MB
-----> Launching... !     Heroku push rejected, Could not communicate with vendor, please try again later 
```

我正在尝试部署 django 应用程序。安装所有 python 包和“发现进程类型”后出现此错误。我的连接性 100% 良好。

有任何想法吗？在帮助中心找不到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:18:00.357

这是供应数据库的问题：[https ://status.heroku.com/incidents/521](https://status.heroku.com/incidents/521)

现在应该修好了。

# arrays - 强制将 Bash 数组中的空格传递给 grep

> ID：16209969
> 
> 赞同：0
> 
> 时间：2013-04-25T08:31:44.917
> 
> 标签：arrays, bash, grep, whitespace

我有一个非常简单的 bash 脚本，它应该 grep 一个文件以查找我想要标记的多个短语。

它一直有效，但是当我想用 grep 查找“ print ”或“ puts ”时，我会摔倒（注意单词前后的空格）。

grep 忽略输入中的空格。

这是我的代码（不相关的内容已被删除）

```
#!/bin/sh

bad_phrases=('console.log(' 'binding.pry' ':focus,' 'alert(' ' print ' ' puts ')
bad_phrase_found=false

FILE='my_test_file.txt'

for bad_phrase in ${bad_phrases[*]} ; do
  if grep -q "$bad_phrase" $FILE ; then
      bad_phrase_found=true
      echo "A '$(tput bold)$(tput setaf 1)$bad_phrase$(tput sgr0)' was found in $(tput bold)$(tput setaf 5)$FILE$(tput sgr0)"
  fi
done

if $bad_phrase_found ; then
  exit 1
fi

exit 0 
```

我已经研究过将 IFS 设置为 '~' 并以这种方式拆分数组，但这完全杀死了 grep 命令。

脚本的示例输出是；

在 my_test_file.txt 中找到“打印”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:39:33.993

你需要使用`"${bad_phrases[@]}"`. 不要忘记双引号。您应该始终养成引用所有变量的习惯，以抑制[分词](http://mywiki.wooledge.org/WordSplitting)。

```
for bad_phrase in "${bad_phrases[@]}" ; do
  if grep -q "$bad_phrase" "$FILE" ; then
      bad_phrase_found=true
      echo "A '$(tput bold)$(tput setaf 1)$bad_phrase$(tput sgr0)' was found in $(tput bold)$(tput setaf 5)$FILE$(tput sgr0)"
  fi
done 
```

# jquery - jQuery重新启动css：在jquery函数终止后在div上

> ID：16209971
> 
> 赞同：0
> 
> 时间：2013-04-25T08:31:47.137
> 
> 标签：jquery, html, css, infinite-scroll

我正在使用此处的代码创建一个合理的画廊：http: [//jsfiddle.net/thirtydot/EDp8R/3/](http://jsfiddle.net/thirtydot/EDp8R/3/)

我还使用无限滚动来加载更多项目。

当前的js：

```
$("#posts").infinitescroll({
navSelector  : '#page_nav',    // selector for the paged navigation 
nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
itemSelector : '.item',     // selector for all items you'll retrieve
loading: {
    finishedMsg: 'No more pages to load.',
    img: 'http://i.imgur.com/qkKy8.gif'
  }
},

function( newElements ) {
            $( newElements ).each(function() {
                $(this).css("width", $(this).width());
            }); 
            $('#posts').removeClass('posts').addClass('posts');
}
); 
```

CSS：

```
#posts.posts{
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

#posts.posts .post{
    height: 250px;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1
}

#posts.posts:after {
    content: '';
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
} 
```

此代码适用于已加载项目的第一块，但忽略了无限滚动加载的项目

已经尝试过了（在另一个类似的帖子中找到了答案）：

```
$("head").append($('<style>div#posts:after { content: "";width:100%;display:inline-block;font-size:0;line-height:0; }</style>')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:48:58.753

我找到了答案每个新元素都应该添加一个空格刚刚添加它`$(this).before("&nbsp;");`

新的是：

```
$("#posts").infinitescroll({
navSelector  : '#page_nav',    // selector for the paged navigation 
nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
itemSelector : '.item',     // selector for all items you'll retrieve
loading: {
    finishedMsg: 'No more pages to load.',
    img: 'http://i.imgur.com/qkKy8.gif'
  }
},

function( newElements ) {
            $( newElements ).each(function() {
                $(this).before("&nbsp;");
                $(this).css("width", $(this).width());
            }); 
            $('#posts').removeClass('posts').addClass('posts');
}
); 
```

# android - android上的SignalR客户端（SignalA），不起作用

> ID：16209974
> 
> 赞同：2
> 
> 时间：2013-04-25T08:32:10.073
> 
> 标签：android, signalr

我是一个初学者的android程序员。我在使用[SignalA](https://github.com/erizet/SignalA)时遇到问题。有人试图运行 SignalA 客户端？它是如何工作的？？？我按照 Erick 所写的那样做所有事情：下载 SignalA.LongPolling。添加了对 SignalA.LongPolling 的引用，添加到 SignalA.LongPolling basic-http-client。

然后添加到**MainActivity**：

```
package com.example.testdemo;

import com.zsoft.SignalA.Connection;
import com.zsoft.SignalA.Transport.StateBase;
import com.zsoft.SignalA.transport.longpolling.LongPollingTransport;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        String url = "http://signalrcalc.apphb.com/";
         Connection con = new com.zsoft.SignalA.Connection(url, this, new LongPollingTransport()) {

                @Override
                public void OnError(Exception exception) {
                    Toast.makeText(MainActivity.this, "On error: " + exception.getMessage(), Toast.LENGTH_LONG).show();
                }

                @Override
                public void OnMessage(String message) {
                    Toast.makeText(MainActivity.this, "Message: " + message, Toast.LENGTH_LONG).show();
                }

                @Override
                public void OnStateChanged(StateBase oldState, StateBase newState) {
                }
            };

            con.Start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

并得到一个错误：

```
04-25 07:05:30.112: E/AndroidRuntime(275): FATAL EXCEPTION: main
04-25 07:05:30.112: E/AndroidRuntime(275): java.lang.NoClassDefFoundError: com.zsoft.SignalA.transport.longpolling.ConnectingState$1
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.transport.longpolling.ConnectingState.OnRun(ConnectingState.java:39)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.transport.longpolling.StopableStateWithCallback.Run(StopableStateWithCallback.java:29)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.ConnectionBase.SetNewState(ConnectionBase.java:46)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.transport.longpolling.DisconnectedState.OnRun(DisconnectedState.java:42)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.Transport.StateBase.Run(StateBase.java:28)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.transport.longpolling.DisconnectedState.Start(DisconnectedState.java:25)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.zsoft.SignalA.ConnectionBase.Start(ConnectionBase.java:127)
04-25 07:05:30.112: E/AndroidRuntime(275):  at com.example.testdemo.MainActivity.onCreate(MainActivity.java:38) 
```

如何运行它，我不知道......（（（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T07:04:06.417

我也遇到了这个错误。我设法通过包含 basic-http-client-android-0.88.jar 和 parallel-http-client.jar 来让 Signala 工作。

后一个库位于 Signala 的主分支中，与其他库一起编译并将其复制到您的项目中。您需要在此处下载的前库[https://code.google.com/p/basic-http-client/](https://code.google.com/p/basic-http-client/)

我使用的是 android studio 而不是 eclipse，所以我也遇到了 gradle 的一些问题；如果遇到这些，请确保在 build.gradle 的依赖项下包含以下内容：

```
compile files('libs/signala.jar','libs/basic-http-client-android-0.88.jar','libs/parallel-basic-http-client.jar','libs/signala.longpolling.jar') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T03:32:13.027

我从源头假设您的建筑。克隆 github 存储库后，请执行以下操作。

```
git submodule init
and then
git submodule update 
```

它将初始化作为子模块包含在项目中的 basic-http-client。然后你不需要安装jar。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T10:12:41.877

我在我的项目中也遇到了很多引用 SignalA 的问题。我试图在我的项目中引用 SignalA、SignalA.LongPolling 和 parallel-basic-http-client。将 basic-http-client-android-0.88.jar 库导入 SignalA.LongPolling 和 parallel-basic-http-client 作为项目库后，我能够编译我的项目而没有任何错误。但是，当我尝试打开 Signalr HubConnection 时，应用程序崩溃了。我得到的错误与@Kiran 的错误非常相似。

我花了几个小时玩它，终于设法让它工作没有任何错误。我的方法是将以下库中的“src”文件夹导出为 Jar 文件：-SignalA-SignalA.LongPolling-parallel-basic-http-client

并将这些 .jar 文件 + basic-http-client-android-0.88.jar 复制到我的项目（Workspace/my_app/libs/）中。

由于 SignalA 是 Android 平台上 SignalR 的唯一解决方案，我想在这里与求助者分享一个完整的解决方法。

您可以观看此视频以逐步按照说明进行操作！

> [https://www.youtube.com/watch?v=f9ih_M7PC10](https://www.youtube.com/watch?v=f9ih_M7PC10)

# php - 如何确保 php 在 wp 专用服务器上具有写权限

> ID：16209975
> 
> 赞同：0
> 
> 时间：2013-04-25T08:32:10.193
> 
> 标签：php, linux, wordpress, file-permissions, mkdir

我已经为此苦苦挣扎了一段时间。我将我的 wordpress 站点从 PRQ 域移到了专用服务器。该脚本用于图片上传。我不喜欢 wordpress 按日期排列的文件夹结构，而是在上传时有一个文件结构，将图片放在以帖子 ID 作为名称的子文件夹中。这在 PRQ 域上工作得很好，但现在无法在新服务器上工作。我对成为服务器管理员不是很了解，但这是我尝试过的。

chown-ing 上传到用户名：apache，apache：apache，nobody：apache，nobody：nobody。我还尝试了所有这些组合，直到 wp-content 和 public_html。当然都是递归的。

将所有文件夹更改为 777、775、755、766。

安全模式未运行

尝试使用 mkdir 和 wp_mkdir_p 操作。

整个过程都在 apache 上重新启动，以确保保存并进行更改。

这些都没有任何影响。

我见过一些人们建议使用服务器主机来提供 php 编写能力的地方。即使它是我安装了所有东西的专用服务器，我是否必须这样做？如果没有，是否有我缺少的配置或设置。我看不出为什么我不能创建一个新目录。

WP 3.5.1
php 5.3.3
Apache/2.2.15 (CentOS)
linux 操作系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:41:15.807

检查您的服务器日志，您会在那里找到答案。盲目地尝试事情不会让你摆脱困境。他们的位置应该是`/var/log/httpd/`。

另外，我确实怀疑权限不是问题，但是您的 php 代码的行为方式，也许您是从 php 5.2.x 升级的，并且在 php 5.3.x 中有些东西不能正常工作。另外，从您的 wp-config.php 文件中打开 wp 错误报告（见`WP_DEBUG`我认为被调用）

# linux - 即使只有一个连接，“epoll”是否比“select”更快？

> ID：16209976
> 
> 赞同：1
> 
> 时间：2013-04-25T08:32:13.933
> 
> 标签：linux, select, epoll, low-latency

我已经尝试过这种方式：在同一台PC上创建一个服务器和一个客户端，并将一个数据包从客户端发送到服务器。一旦服务器端接收到数据包，它就会将相同的数据包发送回客户端。我循环了 1000,000 次，得到总消耗时间，然后取平均值。令我惊讶的是，“select”的平均延迟为 33 微秒，而“epoll”的延迟仅为 10 微秒。由于我只建立了一个连接，我没想到'epoll'延迟更短。这合理吗？谢谢。

# ios - 如何在iOS中通过触摸来使对象移动

> ID：16209977
> 
> 赞同：1
> 
> 时间：2013-04-25T08:32:27.457
> 
> 标签：ios, objective-c, cocoa-touch

我是 Objective-C 的新手，并试图制作一个简单的应用程序，当您触摸对象时，它会随机移动一段时间并停止。然后你需要再次触摸它，它会再次移动并在一段时间后停止。

我搜索了触摸方法和一些教程，但问题是我不知道如何开始。就像我需要一个函数来移动对象和触摸它，但我不知道如何连接它们并使用它们。

这是一个教程，它帮助我了解了很多功能，它实际上以与我的应用程序相反的方式运行。但我仍然无法自己开始编程。

[http://xcodenoobies.blogspot.se/2010/11/under-construction.html](http://xcodenoobies.blogspot.se/2010/11/under-construction.html)

关于如何编程我的逻辑以及如何找到正确的方法以及如何找到我需要的变量类型的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:50:10.447

第 1 步：将此代码放入您的`ViewDidLoad`方法中，我在其中创建了一些代码`UIImageView`并将其添加到随机查看

```
[self.view setTag:1];
for(int i=0;i<4;i++)
{
    int x = arc4random()%300;
    int y = arc4random()%400;

#warning set Image here

    UIImageView *imgview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"someImage.png"]];
    [imgview setFrame:CGRectMake(x, y, 25, 25)];
    [imgview setUserInteractionEnabled:YES];
    [self.view addSubview:imgview];
} 
```

第2步：定义`touchBegan`方法来处理视图周围的触摸和移动对象，我们设置了Tag = 1 `ViewController`，因为我们不想移动我们的主视图，只有子视图会被移动

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    if([[touch view] tag] != 1)
    {
        [UIView animateWithDuration:0.25f animations:^{
            int x = arc4random()%300;
            int y = arc4random()%400;

            [[touch view] setCenter:CGPointMake(x, y)];
        }];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:46:08.997

您需要将手势识别器添加到您希望能够触摸的视图中：

```
// In a view controller or in a UIView subclass
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[self addGestureRecognizer:tapGestureRecognizer];
// Or [self.view addGestureRecognizer:tapGestureRecognizer];

- (void)handleTap:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded) {
        // Animate the view, move it around for a while etc.
        // For animating a view use animateWithDuration:animations:
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:47:31.150

实际上苹果为此做了一个演示。

[http://developer.apple.com/library/ios/#samplecode/MoveMe/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MoveMe/Introduction/Intro.html)

您可以尝试根据需要修改此代码。以及您在哪里寻找的实际功能：

```
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event 
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event 
```

如果这是您要寻找的答案，请单击“已回答”，因此可以将此问题视为已关闭:-)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:47:57.950

如果我理解正确，我会说实现您要求的最简单方法是在 Interface Builder 中创建一个 UIButton 并将其连接到一个 IBAction 将其移动到一个随机位置。然后您可以将自定义图形添加到按钮..

1.  在 ViewController 中创建一个返回类型为 IBAction 的公共方法
2.  在 IB 中创建一个按钮并将其“Touch Up Inside”插座连接到您的 IBAction
3.  在您的 IBAction 方法中，在屏幕边界内生成一个随机的 x 和 y 坐标，并为该点设置动画。

我将/不能详细介绍特定代码，因为它会占用很多空间。请注意，您的问题非常开放且含糊不清，这在 StackOverflow 上被视为不好的风格。此外，在您对 iOS 和 Objective-C 有更多经验之前，您可能不想保存动画之类的东西

-V

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:49:33.330

*   (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;

是用户触摸视图时调用的方法。如果您在主视图（大视图）中覆盖它，您将不得不使用链接中描述的一些辅助方法来查找接触点是否是对象所在的位置。否则，您可以覆盖对象的类并实现该方法，因此您不必显式查找触摸点是否在对象上。

为您的要求。我会说覆盖 uiimageview & 在里面放置 touchesbegan 实现它会正常工作。

```
.h file 

@interface StarView : UIImageView

@end

.m file 

@implementation StarView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // your code in the link with the related methods

Destination = CGPointMake(arc4random() % 320, arc4random() % 480);   

// calculate steps based on speed specified and distance between the current location of the sprite and the new destination  

xamt = ((Destination.x - self.center.x) / speed);  

yamt = ((Destination.y - self.center.y) / speed);  

// ask timer to execute moveBall repeatedly each 0.2 seconds. Execute the timer.   

mainTimer = [NSTimer scheduledTimerWithTimeInterval:(0.02) target:self selector:@selector(moveBall) userInfo:nil repeats: NO]; 
} 
```

在此之后不要忘记复制 moveBall 方法。

在您的主视图中，只需创建一个 StarView 实例并添加到主视图

# ios - 使用 MagicalRecord 导入数据

> ID：16209985
> 
> 赞同：5
> 
> 时间：2013-04-25T08:32:34.283
> 
> 标签：ios, core-data, magicalrecord

我正在使用 MagicalRecord 从 plist 导入数据。[如本教程Importing Data Made Easy](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)中所述，我正在使用无代码导入。

我有两个实体制造商和汽车，它们分别具有一对多和一对一的关系。

![核心数据模型](https://i.stack.imgur.com/3aK7K.png)

列表结构

![在此处输入图像描述](https://i.stack.imgur.com/k8UdE.png)

此导入工作正常

```
NSArray *manufacturers = ...

[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
        [manufacturers enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            [Manufacturer MR_importFromObject:obj inContext:localContext];
        }];
    } completion:^(BOOL success, NSError *error) {

}]; 
```

但这并**没有被导入**

```
[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
        [Manufacturer MR_importFromArray:manufacturers inContext:localContext];
    } completion:^(BOOL success, NSError *error) {

}]; 
```

任何解释将不胜感激。

编辑：制造商数组的日志

```
[
    {
        "Cars": [
            {
                "CarID": 1,
                "Name": "Civic"
            },
            {
                "CarID": 2,
                "Name": "Jazz"
            },
            {
                "CarID": 3,
                "Name": "City"
            }
        ],
        "ManufacturerID": 1,
        "Name": "Honda"
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T11:03:31.810

这个问题似乎就像 MagicalRecord 中的一个错误，发现了一个为此问题[提交的开放错误。](https://github.com/magicalpanda/MagicalRecord/pull/447)

`MR_importFromArray:`正在使用`MR_saveWithBlock:`替换`saveWithBlockAndWait:`解决问题。[错误修复](https://github.com/badeen/MagicalRecord/commit/67d6d0c5948d4024fa59bbb60ca7be01464be692)

# java - Java - 泛型类型

> ID：16209988
> 
> 赞同：4
> 
> 时间：2013-04-25T08:33:03.320
> 
> 标签：java

我正在尝试使用泛型类型创建二叉树，但出现了一个我不明白的错误。我尝试了两种编码方式，第二种有效。我不明白为什么第一个失败了。

我有以下通用代码：

```
public class MyTreea <T extends Comparable<T>> 
{     
   class BT_Node<T extends Comparable<T>>
           {
            T           value;
            BT_Node<T>  left;
            BT_Node<T>  right;

            BT_Node(T node_value) 
                  { 
                    this.value   = node_value ;
                    left         = null;
                    right        = null;
                  }
           } 
```

区别在于插入过程：这有效：

```
 private BT_Node<T> insert(BT_Node<T> node, BT_Node<T> newNode) {
      if ((node.value).compareTo(newNode.value) == 0) { . . . } 
```

但这失败了

```
 private BT_Node insert(BT_Node node, T value) {
        if (value.compareTo(node.value) == 0) { . . 
```

和：

```
MyTreea.java:28: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            if (value.compareTo(node.value) == 0)
required: T#1
found: Comparable
reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
where T#1,T#2 are type-variables:
T#1 extends Comparable<T#1> declared in class MyTreea
T#2 extends Object declared in interface Comparable 
```

显然，如果我用两个节点参数调用 BT_insert 就可以了。（我通过创建一个额外的函数来编写代码来满足这一点）但我不希望这样。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:37:01.377

您应该能够使用具有以下签名的第二个示例：

```
private BT_Node<T> insert(BT_Node<T> node, T value) 
```

您给出的示例使用“原始类型”（即没有泛型参数的泛型类），这通常总是一个坏主意，并且可以说只是为了与 Java 1.4 向后兼容而存在。 `BT_Node`是一个泛型类，所以你应该*总是*给它一个泛型参数。

如果您没有这样做，这大致相当于传入`BT_Node<?>`，因为 Node 的泛型参数可以有任何值。所以编译器不能保证`value`你传入的类型是正确的——例如，第一个参数可能是 a `BT_Node<Int>`，而`T`is `String`。

通过传入泛型参数 as `T`，编译器可以检查 的类型`value`和节点的类型*是否*匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:35:37.310

BT_Node 可以使用 T 而无需再次对其进行参数化，删除其 T 参数。

否则，您必须使用不同的 T，这可能是其 Comparable 的不同扩展。也没有`BT_Node<T>`。

# ruby-on-rails - Force Rails Heroku App from subdomain.herokuapp.com to apex domain?

> ID：16209991
> 
> 赞同：5
> 
> 时间：2013-04-25T08:33:23.673
> 
> 标签：ruby-on-rails, heroku

What is the proper way to send a subdomain.herokuapp.com to the apex domain of the application? This is to avoid multiple domain names with the same content.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T08:45:01.457

[https://github.com/tylerhunt/rack-canonical-host](https://github.com/tylerhunt/rack-canonical-host)似乎是这个的完美选择。把它留在这里给有同样问题的其他人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T08:46:39.743

引用自[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

> 域 myapp.herokuapp.com 将始终保持活动状态，即使您设置了自定义域。如果您希望用户独占使用自定义域，您应该发送 HTTP 状态 301 Moved Permanently 以告诉 Web 浏览器使用自定义域。Host HTTP 请求标头字段将显示用户尝试访问的域；如果该字段是 myapp.herokuapp.com，则发送重定向。

您可以使用 ApplicationController 中的 before 过滤器或使用 rails 路由中的约束将请求重定向到“subdomain.herokuapp.com”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T10:31:06.880

对于具有一些可扩展性的全面答案，总体而言，它看起来像这样；

```
class ApplicationController < ActionController::Base

  before_filter :redirect_to_example if Rails.env.production?

  # Prevent CSRF attacks by raising an exception.
  # For APIs, you may want to use :null_session instead.
  protect_from_forgery with: :exception

  private

    # Redirect to the appropriate domain i.e. example.com
    def redirect_to_example
      domain_to_redirect_to = 'example.com'
      domain_exceptions = ['example.com', 'www.example.com']
      should_redirect = !(domain_exceptions.include? request.host)
      new_url = "#{request.protocol}#{domain_to_redirect_to}#{request.fullpath}"
      redirect_to new_url, status: :moved_permanently if should_redirect
    end
end 
```

这会将所有内容重定向到`domain_to_redirect_to`除了`domain_exceptions`.

# java - 在 Java Web App 中读取 Excel 文件时出现字符编码问题

> ID：16209993
> 
> 赞同：0
> 
> 时间：2013-04-25T08:33:43.907
> 
> 标签：java, linux, excel, character-encoding, struts

在 Java Web 应用程序中，我使用 JExcel API 来读取客户端发送的 Excel 文件。

我正在做这样的事情：

```
byte[] excelFile = ...
InputStream inputStream = new ByteArrayInputStream(excelFile);

WorkbookSettings ws = new WorkbookSettings();
ws.setEncoding("CP1252");

Workbook w = Workbook.getWorkbook(inputStream, ws);
... 
```

Struts 将 Excel 文件作为字节数组提供给我（我使用[FormFile#getFileData()](http://struts.apache.org/release/1.2.x/api/org/apache/struts/upload/FormFile.html#getFileData%28%29)方法）。

它在 Windows 上工作正常。然而，这在 Linux 上是完全不同的。虽然可以正确解析单元格并且可以很好地解释其内容（即使有一些非 ASCII 字符，如“à”、“ê”等），但工作表名称却不能。我得到了一些不好的字符，例如“？” 或“�”。

我强制工作簿编码为 UTF-8 ：

```
ws.setEncoding("UTF-8"); 
```

但没有效果。

我也将 Excel 文件更改为 UTF-8，没有任何反应。我真的不明白为什么它不起作用，尤其是工作表名称，因为整个链都是 UTF-8（我有一个 Servlet 过滤器，它也强制 HTTP 请求编码为 UTF-8）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:41:52.043

这似乎是我正在使用的 JXL 版本的错误。实际上，如果我将 JAR 升级到最新版本，则不会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:38:48.837

我遇到了类似的问题，但使用了另一个 java excel api。问题是excel试图变得聪明并为您替换一些字符。在我的例子中，一个例子是excel用一个代表三个点的单个字符替换了三个点'...'，它代表了它自己的非标准UTF-8字符集中的三个点。我的框架无法识别它，并且我得到了与您现在得到的类似的未定义字符 (�')。为了解决这个问题，我必须手动编辑所有的 Excel 电子表格，然后它就可以正常工作了。我遇到的最大问题是找到它是哪些字符。我不确定这是否适合您。